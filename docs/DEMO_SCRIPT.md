# 命令行验证工具演示脚本

用于录制演示视频或现场演示的步骤脚本。

---

## 📹 演示场景 1：基础预订（最简单）

### 步骤 1：查看帮助

```bash
rake vision:help
```

**解说**：
"首先，我们可以运行 `rake vision:help` 查看工具的使用说明。这里会显示所有可用的参数和示例。"

---

### 步骤 2：启动验证

```bash
rake vision:validate \
  departure_city=深圳 \
  arrival_city=武汉 \
  departure_date=2025-01-15
```

**解说**：
"让我们运行一个基础验证。这个命令会验证'帮我订1月15号从深圳到武汉的机票'这个任务。"

**预期输出**：
```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📋 机票预订任务验证
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🗣️  用户指令：
   "帮我订1月15号从深圳到武汉的机票"

📝 任务参数：
   用户ID: 1
   出发城市: 深圳
   到达城市: 武汉
   出发日期: 2025-01-15
   ...
```

**解说**：
"工具会显示任务信息，包括生成的用户指令和所有参数。然后记录当前数据库状态。"

---

### 步骤 3：执行任务

**预期提示**：
```
⏸️  现在可以执行任务（手动操作或运行大模型）
按 Enter 键继续验证...
```

**解说**：
"现在工具在等待。这时候我们可以：
1. 手动打开浏览器完成预订流程
2. 或者运行大模型让它自动完成

我这里手动演示一下流程..."

**实际操作**：
1. 打开浏览器访问 http://localhost:3000
2. 搜索从深圳到武汉的航班（1月15日）
3. 选择航班
4. 填写表单
5. 处理弹窗
6. 完成支付

**解说**：
"好的，预订已经完成。现在回到终端，按 Enter 键让工具验证结果。"

---

### 步骤 4：查看结果

**按 Enter 键**

**预期输出（成功）**：
```
🔍 正在验证任务结果...

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 验证通过！任务成功完成
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📦 预订详情：
   预订ID: 123
   航班号: CZ3456
   路线: 深圳 → 武汉
   日期: 2025年01月15日
   乘客: 张三
   手机: 13800138000
   保险: 优享保障 ¥50
   状态: 已支付
```

**解说**：
"太好了！验证通过。工具确认数据库中已经创建了正确的预订记录，所有信息都匹配。"

---

## 📹 演示场景 2：复杂任务（指定乘客和保险）

### 步骤 1：启动验证

```bash
rake vision:validate \
  departure_city=北京 \
  arrival_city=上海 \
  departure_date=2025-01-20 \
  passenger_name=张三 \
  contact_phone=13800138000 \
  insurance_required=true
```

**解说**：
"这次我们试一个更复杂的任务，指定了乘客信息，还要求购买保险。"

---

### 步骤 2：查看任务信息

**预期输出**：
```
🗣️  用户指令：
   "帮我订1月20号从北京到上海的机票，乘客姓名张三，手机号13800138000，要买保险"

📝 任务参数：
   用户ID: 1
   出发城市: 北京
   到达城市: 上海
   出发日期: 2025-01-20
   乘客姓名: 张三
   联系电话: 13800138000
   保险要求: 必须购买
   是否支付: 是
```

**解说**：
"注意工具自动生成了完整的用户指令，包含了所有我们指定的参数。"

---

### 步骤 3：执行任务

**解说**：
"现在手动完成预订流程。特别注意：
- 乘客信息要填写'张三'和'13800138000'
- 在保险弹窗中必须选择购买保险（优享或至尊）"

**实际操作**：
1. 搜索北京到上海航班（1月20日）
2. 选择航班
3. 填写乘客：张三，13800138000
4. 选择保险：优享保障 ¥50
5. 完成支付

---

### 步骤 4：验证结果

**按 Enter 键**

**预期输出（成功）**：
```
✅ 验证通过！任务成功完成

📦 预订详情：
   预订ID: 124
   航班号: CA1234
   路线: 北京 → 上海
   日期: 2025年01月20日
   乘客: 张三
   手机: 13800138000
   保险: 优享保障 ¥50
   状态: 已支付
```

**解说**：
"完美！所有信息都匹配：
- 路线正确
- 日期正确
- 乘客信息正确
- 已购买保险
- 支付完成"

---

## 📹 演示场景 3：失败案例（用于调试）

### 步骤 1：故意制造错误

```bash
rake vision:validate \
  departure_city=深圳 \
  arrival_city=武汉 \
  departure_date=2025-01-15 \
  insurance_forbidden=true
```

**解说**：
"这次我们要求不能购买保险。但我故意在操作时选择了保险，看看工具会怎么提示。"

---

### 步骤 2：执行错误操作

**实际操作**：
1. 搜索航班
2. 选择航班
3. **故意选择了"优享保障"保险**
4. 完成支付

---

### 步骤 3：查看验证结果

**按 Enter 键**

**预期输出（失败）**：
```
❌ 验证失败！任务未完成
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🔍 错误详情：
   1. 保险选择不匹配。要求：不能购买保险，实际：购买了优享保障
```

**解说**：
"工具检测到了错误！它清楚地告诉我们：任务要求不购买保险，但实际购买了。这对于调试和训练大模型非常有用。"

---

## 📹 演示场景 4：只填表单不支付

### 步骤 1：启动验证

```bash
rake vision:validate \
  departure_city=杭州 \
  arrival_city=成都 \
  departure_date=2025-01-30 \
  should_complete_payment=false
```

**解说**：
"有时候我们只想测试表单填写，不需要完成支付。设置 `should_complete_payment=false` 即可。"

---

### 步骤 2：执行任务

**实际操作**：
1. 搜索航班
2. 选择航班
3. 填写表单
4. 提交表单
5. **不完成支付，停在支付页面**

---

### 步骤 3：验证结果

**按 Enter 键**

**预期输出（成功）**：
```
✅ 验证通过！任务成功完成

📦 预订详情：
   预订ID: 125
   航班号: CA8888
   路线: 杭州 → 成都
   日期: 2025年01月30日
   状态: 待支付  ← 注意这里是待支付状态
```

**解说**：
"验证通过！因为我们设置了不需要支付，所以状态是'待支付'也是正确的。"

---

## 🎬 总结脚本

**解说**：
"这就是命令行验证工具的完整演示。总结一下：

1. **简单易用**：一条命令就能启动验证
2. **灵活配置**：支持各种任务参数组合
3. **清晰反馈**：成功或失败都有详细信息
4. **适合训练**：可以快速迭代测试大模型的表现

更多详细信息，请查看：
- 完整使用指南：docs/CLI_VALIDATION_GUIDE.md
- 任务定义文档：docs/vision_model_training_tasks.md
- 快速参考：VISION_VALIDATION.md

谢谢观看！"

---

## 📝 录制注意事项

1. **准备工作**
   - 确保项目已启动：`bin/dev`
   - 确保数据库有测试数据：运行 `rails db:seed`
   - 清空浏览器缓存和cookies
   - 准备好终端和浏览器窗口

2. **录制技巧**
   - 使用分屏：左边终端，右边浏览器
   - 放慢操作速度，让观众看清
   - 鼠标移动时可以适当停留，指示要点击的按钮
   - 每个步骤间留1-2秒空白，方便剪辑

3. **后期处理**
   - 添加箭头或高亮标注关键信息
   - 可以加速重复操作（如表单填写）
   - 失败案例可以用红色边框强调错误信息
   - 添加字幕解说关键步骤

4. **时长建议**
   - 场景1（基础）：2-3分钟
   - 场景2（复杂）：3-4分钟
   - 场景3（失败）：2分钟
   - 场景4（不支付）：2分钟
   - 总时长：10-12分钟

---

**祝录制顺利！🎥**
