# å‘½ä»¤è¡ŒéªŒè¯å·¥å…·ä½¿ç”¨æŒ‡å—

## ğŸ“‹ ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºéªŒè¯å¤§æ¨¡å‹ï¼ˆæˆ–æ‰‹åŠ¨æ“ä½œï¼‰æ˜¯å¦æˆåŠŸå®Œæˆæœºç¥¨é¢„è®¢ä»»åŠ¡ã€‚é€šè¿‡ç®€å•çš„ `rake` å‘½ä»¤å³å¯è¿›è¡Œä»»åŠ¡éªŒè¯ã€‚

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£

```bash
rake vision:help
```

### åŸºç¡€éªŒè¯å‘½ä»¤

```bash
rake vision:validate departure_city=æ·±åœ³ arrival_city=æ­¦æ±‰ departure_date=2025-01-15
```

---

## ğŸ“– å‘½ä»¤æ ¼å¼

```bash
rake vision:validate [å‚æ•°1=å€¼1] [å‚æ•°2=å€¼2] ...
```

---

## ğŸ“ å‚æ•°è¯´æ˜

### å¿…å¡«å‚æ•°

| å‚æ•°å | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|
| `departure_city` | å‡ºå‘åŸå¸‚ | `departure_city=æ·±åœ³` |
| `arrival_city` | åˆ°è¾¾åŸå¸‚ | `arrival_city=æ­¦æ±‰` |
| `departure_date` | å‡ºå‘æ—¥æœŸï¼ˆæ ¼å¼ï¼šYYYY-MM-DDï¼‰ | `departure_date=2025-01-15` |

### å¯é€‰å‚æ•°

| å‚æ•°å | è¯´æ˜ | ç±»å‹ | é»˜è®¤å€¼ | ç¤ºä¾‹ |
|--------|------|------|--------|------|
| `user_id` | ç”¨æˆ·ID | æ•´æ•° | 1 | `user_id=2` |
| `passenger_name` | ä¹˜å®¢å§“å | å­—ç¬¦ä¸² | - | `passenger_name=å¼ ä¸‰` |
| `contact_phone` | è”ç³»ç”µè¯ | å­—ç¬¦ä¸² | - | `contact_phone=13800138000` |
| `insurance_required` | æ˜¯å¦è¦æ±‚è´­ä¹°ä¿é™© | å¸ƒå°”å€¼ | - | `insurance_required=true` |
| `insurance_forbidden` | æ˜¯å¦ç¦æ­¢è´­ä¹°ä¿é™© | å¸ƒå°”å€¼ | - | `insurance_forbidden=true` |
| `should_complete_payment` | æ˜¯å¦åº”å®Œæˆæ”¯ä»˜ | å¸ƒå°”å€¼ | true | `should_complete_payment=false` |

---

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šåŸºç¡€é¢„è®¢ï¼ˆæœ€ç®€å•ï¼‰

**ç”¨æˆ·æŒ‡ä»¤**ï¼š"å¸®æˆ‘è®¢1æœˆ15å·ä»æ·±åœ³åˆ°æ­¦æ±‰çš„æœºç¥¨"

```bash
rake vision:validate \
  departure_city=æ·±åœ³ \
  arrival_city=æ­¦æ±‰ \
  departure_date=2025-01-15
```

**éªŒè¯è§„åˆ™**ï¼š
- âœ… åˆ›å»ºäº†æ–°çš„é¢„è®¢è®°å½•
- âœ… èˆªç­è·¯çº¿ï¼šæ·±åœ³ â†’ æ­¦æ±‰
- âœ… å‡ºå‘æ—¥æœŸï¼š2025-01-15
- âœ… æ”¯ä»˜çŠ¶æ€ï¼šå·²æ”¯ä»˜

---

### ç¤ºä¾‹ 2ï¼šæŒ‡å®šä¹˜å®¢ä¿¡æ¯

**ç”¨æˆ·æŒ‡ä»¤**ï¼š"å¸®æˆ‘è®¢1æœˆ20å·ä»åŒ—äº¬åˆ°ä¸Šæµ·çš„æœºç¥¨ï¼Œä¹˜å®¢å§“åå¼ ä¸‰ï¼Œæ‰‹æœºå·13800138000"

```bash
rake vision:validate \
  departure_city=åŒ—äº¬ \
  arrival_city=ä¸Šæµ· \
  departure_date=2025-01-20 \
  passenger_name=å¼ ä¸‰ \
  contact_phone=13800138000
```

**éªŒè¯è§„åˆ™**ï¼š
- âœ… åˆ›å»ºäº†æ–°çš„é¢„è®¢è®°å½•
- âœ… èˆªç­è·¯çº¿ï¼šåŒ—äº¬ â†’ ä¸Šæµ·
- âœ… å‡ºå‘æ—¥æœŸï¼š2025-01-20
- âœ… ä¹˜å®¢å§“åï¼šå¼ ä¸‰
- âœ… è”ç³»ç”µè¯ï¼š13800138000
- âœ… æ”¯ä»˜çŠ¶æ€ï¼šå·²æ”¯ä»˜

---

### ç¤ºä¾‹ 3ï¼šè¦æ±‚è´­ä¹°ä¿é™©

**ç”¨æˆ·æŒ‡ä»¤**ï¼š"å¸®æˆ‘è®¢1æœˆ25å·ä»å¹¿å·åˆ°æ·±åœ³çš„æœºç¥¨ï¼Œè¦ä¹°ä¿é™©"

```bash
rake vision:validate \
  departure_city=å¹¿å· \
  arrival_city=æ·±åœ³ \
  departure_date=2025-01-25 \
  insurance_required=true
```

**éªŒè¯è§„åˆ™**ï¼š
- âœ… åˆ›å»ºäº†æ–°çš„é¢„è®¢è®°å½•
- âœ… èˆªç­è·¯çº¿ï¼šå¹¿å· â†’ æ·±åœ³
- âœ… å‡ºå‘æ—¥æœŸï¼š2025-01-25
- âœ… ä¿é™©ç±»å‹ï¼šä¸ä¸º"æ— ä¿éšœ"
- âœ… ä¿é™©ä»·æ ¼ï¼š> 0
- âœ… æ”¯ä»˜çŠ¶æ€ï¼šå·²æ”¯ä»˜

---

### ç¤ºä¾‹ 4ï¼šæ‹’ç»ä¿é™©

**ç”¨æˆ·æŒ‡ä»¤**ï¼š"å¸®æˆ‘è®¢1æœˆ28å·ä»æˆéƒ½åˆ°é‡åº†çš„æœºç¥¨ï¼Œä¸è¦ä¹°ä¿é™©"

```bash
rake vision:validate \
  departure_city=æˆéƒ½ \
  arrival_city=é‡åº† \
  departure_date=2025-01-28 \
  insurance_forbidden=true
```

**éªŒè¯è§„åˆ™**ï¼š
- âœ… åˆ›å»ºäº†æ–°çš„é¢„è®¢è®°å½•
- âœ… èˆªç­è·¯çº¿ï¼šæˆéƒ½ â†’ é‡åº†
- âœ… å‡ºå‘æ—¥æœŸï¼š2025-01-28
- âœ… ä¿é™©ç±»å‹ï¼šæ— ä¿éšœ
- âœ… æ”¯ä»˜çŠ¶æ€ï¼šå·²æ”¯ä»˜

---

### ç¤ºä¾‹ 5ï¼šåªå¡«è¡¨å•ï¼Œä¸æ”¯ä»˜

**ç”¨æˆ·æŒ‡ä»¤**ï¼š"å¸®æˆ‘å¡«å†™1æœˆ30å·ä»æ­å·åˆ°æˆéƒ½çš„æœºç¥¨é¢„è®¢è¡¨å•ï¼Œä¸ç”¨æ”¯ä»˜"

```bash
rake vision:validate \
  departure_city=æ­å· \
  arrival_city=æˆéƒ½ \
  departure_date=2025-01-30 \
  should_complete_payment=false
```

**éªŒè¯è§„åˆ™**ï¼š
- âœ… åˆ›å»ºäº†æ–°çš„é¢„è®¢è®°å½•
- âœ… èˆªç­è·¯çº¿ï¼šæ­å· â†’ æˆéƒ½
- âœ… å‡ºå‘æ—¥æœŸï¼š2025-01-30
- âœ… æ”¯ä»˜çŠ¶æ€ï¼šå¾…æ”¯ä»˜ï¼ˆpendingï¼‰

---

### ç¤ºä¾‹ 6ï¼šå®Œæ•´å‚æ•°ï¼ˆå¤æ‚ä»»åŠ¡ï¼‰

**ç”¨æˆ·æŒ‡ä»¤**ï¼š"å¸®æˆ‘è®¢2æœˆ1å·ä»ä¸Šæµ·åˆ°æ·±åœ³çš„æœºç¥¨ï¼Œä¹˜å®¢æå››ï¼Œæ‰‹æœº13900139000ï¼Œè¦ä¹°ä¿é™©"

```bash
rake vision:validate \
  user_id=1 \
  departure_city=ä¸Šæµ· \
  arrival_city=æ·±åœ³ \
  departure_date=2025-02-01 \
  passenger_name=æå›› \
  contact_phone=13900139000 \
  insurance_required=true \
  should_complete_payment=true
```

---

## ğŸ”„ å®Œæ•´å·¥ä½œæµç¨‹

### 1. å¯åŠ¨éªŒè¯

```bash
rake vision:validate departure_city=æ·±åœ³ arrival_city=æ­¦æ±‰ departure_date=2025-01-15
```

### 2. æŸ¥çœ‹ä»»åŠ¡ä¿¡æ¯

å·¥å…·ä¼šæ˜¾ç¤ºï¼š
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ æœºç¥¨é¢„è®¢ä»»åŠ¡éªŒè¯
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ—£ï¸  ç”¨æˆ·æŒ‡ä»¤ï¼š
   "å¸®æˆ‘è®¢1æœˆ15å·ä»æ·±åœ³åˆ°æ­¦æ±‰çš„æœºç¥¨"

ğŸ“ ä»»åŠ¡å‚æ•°ï¼š
   ç”¨æˆ·ID: 1
   å‡ºå‘åŸå¸‚: æ·±åœ³
   åˆ°è¾¾åŸå¸‚: æ­¦æ±‰
   å‡ºå‘æ—¥æœŸ: 2025-01-15
   ä¹˜å®¢å§“å: ï¼ˆæœªæŒ‡å®šï¼‰
   è”ç³»ç”µè¯: ï¼ˆæœªæŒ‡å®šï¼‰
   ä¿é™©è¦æ±‚: ï¼ˆæœªæŒ‡å®šï¼‰
   æ˜¯å¦æ”¯ä»˜: æ˜¯
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“Š æ­£åœ¨è®°å½•åˆå§‹çŠ¶æ€...
âœ… åˆå§‹çŠ¶æ€å·²è®°å½•
```

### 3. æ‰§è¡Œä»»åŠ¡

```
â¸ï¸  ç°åœ¨å¯ä»¥æ‰§è¡Œä»»åŠ¡ï¼ˆæ‰‹åŠ¨æ“ä½œæˆ–è¿è¡Œå¤§æ¨¡å‹ï¼‰
æŒ‰ Enter é”®ç»§ç»­éªŒè¯...
```

æ­¤æ—¶ä½ å¯ä»¥ï¼š
- **æ‰‹åŠ¨æ“ä½œ**ï¼šæ‰“å¼€æµè§ˆå™¨ï¼Œæ‰‹åŠ¨å®Œæˆé¢„è®¢æµç¨‹
- **å¤§æ¨¡å‹æ‰§è¡Œ**ï¼šè¿è¡Œè§†è§‰æ¨¡å‹è‡ªåŠ¨å®Œæˆä»»åŠ¡

### 4. å®ŒæˆéªŒè¯

æŒ‰ Enter é”®åï¼Œå·¥å…·ä¼šéªŒè¯æ•°æ®åº“å¹¶æ˜¾ç¤ºç»“æœï¼š

#### âœ… æˆåŠŸç¤ºä¾‹

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… éªŒè¯é€šè¿‡ï¼ä»»åŠ¡æˆåŠŸå®Œæˆ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“¦ é¢„è®¢è¯¦æƒ…ï¼š
   é¢„è®¢ID: 123
   èˆªç­å·: CZ3456
   è·¯çº¿: æ·±åœ³ â†’ æ­¦æ±‰
   æ—¥æœŸ: 2025å¹´01æœˆ15æ—¥
   ä¹˜å®¢: å¼ ä¸‰
   æ‰‹æœº: 13800138000
   ä¿é™©: ä¼˜äº«ä¿éšœ Â¥50
   çŠ¶æ€: å·²æ”¯ä»˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

#### âŒ å¤±è´¥ç¤ºä¾‹

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âŒ éªŒè¯å¤±è´¥ï¼ä»»åŠ¡æœªå®Œæˆ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ” é”™è¯¯è¯¦æƒ…ï¼š
   1. æœªæ‰¾åˆ°æ–°çš„é¢„è®¢è®°å½•
   2. å‡ºå‘åŸå¸‚ä¸åŒ¹é…ã€‚æœŸæœ›ï¼šæ·±åœ³ï¼Œå®é™…ï¼šå¹¿å·

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

## ğŸ¯ éªŒè¯è§„åˆ™

å·¥å…·ä¼šè‡ªåŠ¨éªŒè¯ä»¥ä¸‹è§„åˆ™ï¼š

| è§„åˆ™ | è¯´æ˜ |
|------|------|
| âœ… **æ–°é¢„è®¢åˆ›å»º** | æ˜¯å¦ç”Ÿæˆäº†æ–°çš„é¢„è®¢è®°å½• |
| âœ… **èˆªç­è·¯çº¿** | å‡ºå‘åŸå¸‚ã€åˆ°è¾¾åŸå¸‚æ˜¯å¦åŒ¹é… |
| âœ… **å‡ºå‘æ—¥æœŸ** | æ—¥æœŸæ˜¯å¦åŒ¹é…ï¼ˆå¿…å¡«ï¼‰ |
| âœ… **ä¹˜å®¢ä¿¡æ¯** | å§“åã€æ‰‹æœºå·æ˜¯å¦åŒ¹é…ï¼ˆå¦‚æœæŒ‡å®šï¼‰ |
| âœ… **ä¿é™©é€‰æ‹©** | æ˜¯å¦æŒ‰è¦æ±‚è´­ä¹°/ä¸è´­ä¹°ä¿é™© |
| âœ… **æ”¯ä»˜çŠ¶æ€** | æ˜¯å¦å®Œæˆæ”¯ä»˜ |

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. å‚æ•°æ ¼å¼

- **æ—¥æœŸæ ¼å¼**ï¼šå¿…é¡»ä½¿ç”¨ `YYYY-MM-DD` æ ¼å¼ï¼ˆå¦‚ `2025-01-15`ï¼‰
- **å¸ƒå°”å€¼**ï¼šä½¿ç”¨ `true`/`false` æˆ– `1`/`0` æˆ– `yes`/`no`
- **ä¸­æ–‡å‚æ•°**ï¼šç›´æ¥è¾“å…¥ä¸­æ–‡å³å¯ï¼ˆå¦‚ `departure_city=æ·±åœ³`ï¼‰

### 2. ä¿é™©å‚æ•°äº’æ–¥

ä¸èƒ½åŒæ—¶æŒ‡å®š `insurance_required=true` å’Œ `insurance_forbidden=true`

### 3. æ•°æ®å‡†å¤‡

éªŒè¯å‰ç¡®ä¿ï¼š
- æ•°æ®åº“ä¸­æœ‰å¯¹åº”çš„èˆªç­è®°å½•
- æµ‹è¯•ç”¨æˆ·è´¦å·å­˜åœ¨ï¼ˆé»˜è®¤ user_id=1ï¼‰
- èˆªç­è®°å½•çš„æ—¥æœŸã€è·¯çº¿ä¸ä»»åŠ¡å‚æ•°åŒ¹é…

---

## ğŸ› ï¸ æ•…éšœæ’é™¤

### é—®é¢˜ 1ï¼šæç¤º"ç¼ºå°‘å¿…å¡«å‚æ•°"

**è§£å†³æ–¹æ³•**ï¼šç¡®ä¿æä¾›äº†ä¸‰ä¸ªå¿…å¡«å‚æ•°
```bash
rake vision:validate \
  departure_city=æ·±åœ³ \
  arrival_city=æ­¦æ±‰ \
  departure_date=2025-01-15
```

### é—®é¢˜ 2ï¼šéªŒè¯å¤±è´¥"æœªæ‰¾åˆ°æ–°çš„é¢„è®¢è®°å½•"

**å¯èƒ½åŸå› **ï¼š
1. ä»»åŠ¡æœªæ‰§è¡Œæˆ–æ‰§è¡Œå¤±è´¥
2. é¢„è®¢è®°å½•åˆ›å»ºåœ¨å…¶ä»–ç”¨æˆ·åä¸‹
3. æ—¶é—´æˆ³é—®é¢˜

**è§£å†³æ–¹æ³•**ï¼š
- æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æˆåŠŸå®Œæˆé¢„è®¢
- ç¡®è®¤ `user_id` å‚æ•°æ­£ç¡®
- æŸ¥çœ‹æ•°æ®åº“ `bookings` è¡¨æœ€æ–°è®°å½•

### é—®é¢˜ 3ï¼šéªŒè¯å¤±è´¥"èˆªç­è·¯çº¿ä¸åŒ¹é…"

**å¯èƒ½åŸå› **ï¼š
- èˆªç­ä¿¡æ¯é€‰æ‹©é”™è¯¯
- æ•°æ®åº“ä¸­æ²¡æœ‰å¯¹åº”è·¯çº¿çš„èˆªç­

**è§£å†³æ–¹æ³•**ï¼š
- ç¡®è®¤é¢„è®¢æµç¨‹ä¸­é€‰æ‹©äº†æ­£ç¡®çš„èˆªç­
- æ£€æŸ¥ `flights` è¡¨æ˜¯å¦æœ‰å¯¹åº”è·¯çº¿çš„è®°å½•

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [éªŒè¯æ¡†æ¶æ€»è§ˆ](README.md)
- [ä»»åŠ¡å®šä¹‰æ–‡æ¡£](vision_model_training_tasks.md)
- [ä»»åŠ¡è¡¨æ ¼](tasks_table_for_vision_training.md)
- [éªŒè¯å™¨æºç ](../spec/validators/flight_booking_task_validator.rb)

---

## ğŸ’¡ æç¤º

### æ‰¹é‡æµ‹è¯•

å¯ä»¥åˆ›å»º shell è„šæœ¬æ‰¹é‡è¿è¡Œå¤šä¸ªæµ‹è¯•ï¼š

```bash
#!/bin/bash

# test_suite.sh

echo "å¼€å§‹æ‰¹é‡æµ‹è¯•..."

echo "\næµ‹è¯• 1: åŸºç¡€é¢„è®¢"
rake vision:validate departure_city=æ·±åœ³ arrival_city=æ­¦æ±‰ departure_date=2025-01-15

echo "\næµ‹è¯• 2: æŒ‡å®šä¹˜å®¢"
rake vision:validate departure_city=åŒ—äº¬ arrival_city=ä¸Šæµ· departure_date=2025-01-20 passenger_name=å¼ ä¸‰ contact_phone=13800138000

echo "\næµ‹è¯• 3: è´­ä¹°ä¿é™©"
rake vision:validate departure_city=å¹¿å· arrival_city=æ·±åœ³ departure_date=2025-01-25 insurance_required=true

echo "\næ‰€æœ‰æµ‹è¯•å®Œæˆï¼"
```

### ç¯å¢ƒå˜é‡

ä¹Ÿå¯ä»¥ä½¿ç”¨ç¯å¢ƒå˜é‡ä¼ å‚ï¼š

```bash
export departure_city=æ·±åœ³
export arrival_city=æ­¦æ±‰
export departure_date=2025-01-15

rake vision:validate
```

---

## ğŸ¤ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
1. è¿è¡Œ `rake vision:help` æŸ¥çœ‹å¸®åŠ©
2. æŸ¥çœ‹ [è¯¦ç»†æ–‡æ¡£](README.md)
3. æ£€æŸ¥ [éªŒè¯å™¨æºç ](../spec/validators/flight_booking_task_validator.rb)
