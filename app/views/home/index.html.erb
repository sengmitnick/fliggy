<div class="min-h-screen bg-white">
  <!-- Header -->
  <div class="sticky top-0 z-50 bg-gradient-to-b from-primary via-primary-light to-surface">
    <div class="px-4 py-2">
      <!-- Top Bar -->
      <div class="flex items-center justify-between mb-3">
        <!-- Avatar -->
        <div class="flex items-center gap-2">
          <%= link_to profile_path, class: "w-8 h-8 rounded-full bg-neutral shadow-sm flex items-center justify-center text-base font-bold text-inverse hover:bg-neutral-light transition-colors duration-200" do %>
            <%= (current_user.name.presence&.first || current_user.email&.first || 'U').upcase %>
          <% end %>
        </div>

        <!-- Navigation -->
        <div class="flex items-center gap-5">
          <button class="flex items-center gap-2 hover:opacity-75 transition-opacity duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">
            <span class="text-sm font-medium whitespace-nowrap text-primary">问一问</span>
          </button>
          <button class="text-sm font-medium border-b-2 border-foreground pb-0.5 whitespace-nowrap hover:opacity-75 transition-opacity duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">推荐</button>
          <%= link_to destinations_path, class: "flex items-center gap-0.5 hover:opacity-75 transition-opacity duration-200" do %>
            <span class="text-sm font-medium whitespace-nowrap"><%= @current_destination&.name || '深圳' %></span>
            <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
            </svg>
          <% end %>
        </div>

        <!-- Cart Icon -->
        <button class="flex flex-col items-center gap-0 hover:opacity-75 transition-opacity duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">
          <%= image_tag "home/购物车.png", class: "w-5 h-5", alt: "购物车" %>
          <span class="text-[9px] whitespace-nowrap">我的收藏</span>
        </button>
      </div>

      <!-- Search Bar -->
      <div class="relative" data-controller="search">
        <form data-action="submit->search#search" class="flex items-center gap-2 bg-surface pl-2 pr-1 border-2 border-secondary rounded-xl transition-shadow duration-200 hover:shadow-md" style="height: 48px;">
          <div class="flex items-center gap-2 flex-1">
            <%= image_tag "home/扫一扫.png", class: "w-5 h-5", alt: "搜索" %>
            <input 
              type="text" 
              data-search-target="input"
              placeholder="<%= @search_placeholder %>" 
              class="flex-1 text-base text-secondary font-medium bg-transparent border-none outline-none" 
              style="min-width: 0;"
            />
          </div>
          <button type="submit" class="bg-accent text-inverse font-bold px-3 py-2 rounded-lg whitespace-nowrap text-base hover:bg-accent-dark transition-colors duration-200">
            搜索
          </button>
        </form>
      </div>

      <!-- Quick Links -->
      <div class="flex gap-2 mt-2.5 overflow-x-auto pb-1 no-scrollbar">
        <button class="px-4 py-1.5 text-xs text-secondary whitespace-nowrap bg-neutral-light rounded-2xl hover:bg-neutral transition-colors duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">汉庭</button>
        <button class="px-4 py-1.5 text-xs text-secondary whitespace-nowrap bg-neutral-light rounded-2xl hover:bg-neutral transition-colors duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">深圳的酒店</button>
        <button class="px-4 py-1.5 text-xs text-secondary whitespace-nowrap bg-neutral-light rounded-2xl hover:bg-neutral transition-colors duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">玉龙雪山</button>
        <button class="px-4 py-1.5 text-xs text-secondary whitespace-nowrap bg-neutral-light rounded-2xl hover:bg-neutral transition-colors duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">郑州</button>
        <button class="px-4 py-1.5 text-xs text-secondary whitespace-nowrap bg-neutral-light rounded-2xl hover:bg-neutral transition-colors duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">乐高乐园</button>
      </div>
    </div>
  </div>

  <!-- PWA Install Banner -->
  <div data-controller="pwa-install" class="mx-4 mt-3">
    <button
      data-pwa-install-target="installButton"
      data-action="click->pwa-install#install"
      class="hidden w-full bg-gradient-to-r from-primary to-warning text-foreground font-bold py-3 px-4 rounded-xl shadow-lg flex items-center justify-between hover:shadow-xl transition-all duration-200"
      style="border: 2px solid hsl(var(--color-warning));">
      <div class="flex items-center gap-3">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
        </svg>
        <div class="text-left">
          <div class="text-sm font-bold">安装旅游环境01应用</div>
          <div class="text-xs opacity-90">添加到主屏幕，快速访问</div>
        </div>
        </div>
      </div>
      <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
      </svg>
    </button>
  </div>

  <!-- Main Content -->
  <div class="pt-4">
    <!-- Service Grid -->
    <div class="mx-4 bg-surface rounded-3xl border border-light p-3 mb-4 shadow-sm" data-controller="service-grid">
      <!-- Page 1 -->
      <div data-service-grid-target="page">
        <!-- Row 1 -->
        <div class="grid grid-cols-5 mb-2 h-[80px]">
          <%= link_to hotels_path(city: @current_destination&.name || '深圳'), class: "flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" do %>
            <%= image_tag "home/酒店.png", class: "max-w-[60%] mb-1 h-auto object-contain", alt: "酒店" %>
            <span class="text-[12px] text-secondary">酒店</span>
          <% end %>

          <%= link_to flights_path, class: "flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" do %>
            <%= image_tag "home/机票.png", class: "max-w-[60%] mb-1 h-auto object-contain", alt: "机票" %>
            <span class="text-[12px] text-secondary">机票</span>
          <% end %>

          <%= link_to trains_path, class: "flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" do %>
            <%= image_tag "home/火车票.png", class: "max-w-[60%] mb-1 h-auto object-contain", alt: "火车票" %>
            <span class="text-[12px] text-secondary">火车票</span>
          <% end %>

          <%= link_to cars_path, class: "flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" do %>
            <%= image_tag "home/租车.png", class: "max-w-[60%] mb-1 h-auto object-contain", alt: "租车" %>
            <span class="text-[12px] text-secondary">租车</span>
          <% end %>

          <%= link_to tourism_index_path, class: "flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" do %>
            <%= image_tag "home/旅游.png", class: "max-w-[60%] mb-1 h-auto object-contain", alt: "旅游" %>
            <span class="text-[12px] text-secondary">旅游</span>
          <% end %>
        </div>

        <!-- Row 2 -->
        <div class="grid grid-cols-5 mb-2 h-[60px]">
          <%= link_to homestays_path, class: "flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" do %>
            <%= image_tag "home/民宿公寓.png", class: "max-w-[40%] mb-1 h-auto object-contain", alt: "民宿/公寓" %>
            <span class="text-[12px] text-secondary">民宿/公寓</span>
          <% end %>

          <%= link_to transfers_path, class: "flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" do %>
            <%= image_tag "home/接送机.png", class: "max-w-[40%] mb-1 h-auto object-contain", alt: "接送机" %>
            <span class="text-[12px] text-secondary">接送机</span>
          <% end %>

          <%= link_to tour_groups_path, class: "flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" do %>
            <%= image_tag "home/跟团游.png", class: "max-w-[40%] mb-1 h-auto object-contain", alt: "跟团游" %>
            <span class="text-[12px] text-secondary">跟团游</span>
          <% end %>

          <%= link_to bus_tickets_path, class: "flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" do %>
            <%= image_tag "home/汽车票.png", class: "max-w-[40%] mb-1 h-auto object-contain", alt: "汽车票" %>
            <span class="text-[12px] text-secondary">汽车票</span>
          <% end %>

          <button class="flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">
            <%= image_tag "home/门票.png", class: "max-w-[40%] mb-1 h-auto object-contain", alt: "门票" %>
            <span class="text-[12px] text-secondary">门票</span>
          </button>
        </div>

        <!-- Row 3 -->
        <div class="grid grid-cols-5 mb-2 h-[60px]">
          <%= link_to hotel_packages_path, class: "flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" do %>
            <%= image_tag "home/酒店套餐.png", class: "max-w-[40%] mb-1 h-auto object-contain", alt: "酒店套餐" %>
            <span class="text-[12px] text-secondary">酒店套餐</span>
          <% end %>

          <button class="flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">
            <%= image_tag "home/保险服务.png", class: "max-w-[40%] mb-1 h-auto object-contain", alt: "保险服务" %>
            <span class="text-[12px] text-secondary">保险服务</span>
          </button>

          <button class="flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">
            <%= image_tag "home/借钱分期.png", class: "max-w-[40%] mb-1 h-auto object-contain", alt: "借钱/分期" %>
            <span class="text-[12px] text-secondary">借钱/分期</span>
          </button>

          <%= link_to outbound_tours_path(ref: 'home'), class: "flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" do %>
            <%= image_tag "home/出境游签证.png", class: "max-w-[40%] mb-1 h-auto object-contain", alt: "出境游/签证" %>
            <span class="text-[12px] text-secondary whitespace-nowrap">出境游/签证</span>
          <% end %>

          <button class="flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">
            <%= image_tag "home/里程签到.png", class: "max-w-[40%] mb-1 h-auto object-contain", alt: "里程签到" %>
            <span class="text-[12px] text-secondary">里程签到</span>
          </button>
        </div>
      </div>

      <!-- Page 2 -->
      <div data-service-grid-target="page" class="hidden">
        <!-- Row 1 -->
        <div class="grid grid-cols-5 mb-2 h-[80px]">
          <button class="flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">
            <%= image_tag "home/国际酒店.png", class: "max-w-[40%] mb-1 h-auto object-contain", alt: "国际酒店" %>
            <span class="text-[12px] text-secondary">国际酒店</span>
          </button>

          <%= link_to visas_path(ref: 'home'), class: "flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" do %>
            <%= image_tag "home/签证.png", class: "max-w-[40%] mb-1 h-auto object-contain", alt: "签证" %>
            <span class="text-[12px] text-secondary">签证</span>
          <% end %>

          <%= link_to internet_services_path(tab: 'data_plan'), class: "flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" do %>
            <%= image_tag "home/境外上网.png", class: "max-w-[40%] mb-1 h-auto object-contain", alt: "境外上网" %>
            <span class="text-[12px] text-secondary">境外上网</span>
          <% end %>

          <%= link_to abroad_shops_path, class: "flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" do %>
            <%= image_tag "home/旅行购物.png", class: "max-w-[40%] mb-1 h-auto object-contain", alt: "旅行购物" %>
            <span class="text-[12px] text-secondary">旅行购物</span>
          <% end %>

          <%= link_to abroad_tickets_path(ref: 'home'), class: "flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" do %>
            <%= image_tag "home/境外当地交通.png", class: "max-w-[50%] mb-1 h-auto object-contain", alt: "境外当地交通" %>
            <span class="text-[12px] text-secondary whitespace-nowrap">境外当地交通</span>
          <% end %>
        </div>

        <!-- Row 2 -->
        <div class="grid grid-cols-5 mb-2 h-[60px]">
          <button class="flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">
            <%= image_tag "home/邮轮.png", class: "max-w-[40%] mb-1 h-auto object-contain", alt: "邮轮" %>
            <span class="text-[12px] text-secondary">邮轮</span>
          </button>

          <%= link_to deep_travels_path, class: "flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" do %>
            <%= image_tag "home/深度旅行.png", class: "max-w-[40%] mb-1 h-auto object-contain", alt: "深度游+" %>
            <span class="text-[12px] text-secondary">深度游+</span>
          <% end %>

          <button class="flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">
            <%= image_tag "home/包车游.png", class: "max-w-[40%] mb-1 h-auto object-contain", alt: "包车" %>
            <span class="text-[12px] text-secondary">包车</span>
          </button>

          <button class="flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">
            <%= image_tag "home/路线宝库.png", class: "max-w-[40%] mb-1 h-auto object-contain", alt: "路线宝箱" %>
            <span class="text-[12px] text-secondary">路线宝箱</span>
          </button>

          <button class="flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">
            <%= image_tag "home/打车.png", class: "max-w-[40%] mb-1 h-auto object-contain", alt: "打车" %>
            <span class="text-[12px] text-secondary">打车</span>
          </button>
        </div>

        <!-- Row 3 -->
        <div class="grid grid-cols-5 mb-2 h-[60px]">
          <button class="flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">
            <%= image_tag "home/政府补贴.png", class: "max-w-[40%] mb-1 h-auto object-contain", alt: "政府补贴" %>
            <span class="text-[12px] text-secondary">政府补贴</span>
          </button>

          <button class="flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">
            <%= image_tag "home/阿里商旅.png", class: "max-w-[40%] mb-1 h-auto object-contain", alt: "阿里商旅" %>
            <span class="text-[12px] text-secondary">阿里商旅</span>
          </button>

          <button class="flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">
            <%= image_tag "home/飞猪省钱卡.png", class: "max-w-[40%] mb-1 h-auto object-contain", alt: "省钱卡" %>
            <span class="text-[12px] text-secondary">省钱卡</span>
          </button>
          </button>

          <button class="flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">
            <%= image_tag "home/能量红包.png", class: "max-w-[40%] mb-1 h-auto object-contain", alt: "能量红包" %>
            <span class="text-[12px] text-secondary">能量红包</span>
          </button>

          <button class="flex flex-col items-center justify-end h-full hover:opacity-75 transition-opacity duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">
            <%= image_tag "home/会员商城.png", class: "max-w-[40%] mb-1 h-auto object-contain", alt: "会员商城" %>
            <span class="text-[12px] text-secondary">会员商城</span>
          </button>
        </div>
      </div>

      <!-- Pagination Dots -->
      <div class="flex justify-center gap-2 mt-3">
        <button data-service-grid-target="dot" data-action="click->service-grid#goToPage" data-page="0" class="w-6 h-1 rounded-full transition-all duration-300 cursor-pointer bg-primary-dark hover:bg-primary"></button>
        <button data-service-grid-target="dot" data-action="click->service-grid#goToPage" data-page="1" class="w-1.5 h-1.5 rounded-full bg-neutral transition-all duration-300 cursor-pointer hover:bg-neutral-light"></button>
      </div>
    </div>

    <!-- Promotional Cards - 2x2 Grid -->
    <div class="mx-4 flex gap-2 mb-4">
      <!-- Card 1 - Daily Special -->
      <button class="relative overflow-hidden rounded-xl hover:opacity-90 transition-opacity duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">
        <%= image_tag "home/天天特惠.png", class: "w-full h-auto", alt: "天天特惠" %>
      </button>

      <!-- Card 2 - Special Flights -->
      <%= link_to special_flights_path, class: "relative overflow-hidden rounded-xl hover:opacity-90 transition-opacity duration-200" do %>
        <%= image_tag "home/特价机票.png", class: "w-full h-auto", alt: "特价机票" %>
      <% end %>

      <!-- Card 3 - Flight List -->
<<<<<<< HEAD
      <button class="relative overflow-hidden rounded-xl hover:opacity-90 transition-opacity duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">
        <%= image_tag "home/飞猪榜单.png", class: "w-full h-auto", alt: "飞猪榜单" %>
=======
      <button class="relative overflow-hidden rounded-4" onclick="window.showToast('精彩即将上线，敬请期待')">
        <%= image_tag "home/飞猪榜单.png", class: "w-full h-auto", alt: "榜单" %>
>>>>>>> origin/master
      </button>

      <!-- Card 4 - Performance -->
      <div class="flex flex-col gap-2 relative overflow-hidden">
        <button class="relative overflow-hidden rounded-xl hover:opacity-90 transition-opacity duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">
          <%= image_tag "home/演出.png", class: "w-full h-auto", alt: "演出·赛事" %>
        </button>
         <!-- Live Stream Card -->
        <button class="relative overflow-hidden rounded-xl hover:opacity-90 transition-opacity duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">
          <%= image_tag "home/直播.png", class: "w-full h-auto", alt: "爆款直播" %>
        </button>
      </div>
    </div>

    <!-- Banner -->
    <button class="mx-4 relative mb-4 overflow-hidden rounded-2xl hover:opacity-90 transition-opacity duration-200" onclick="window.showToast('精彩即将上线，敬请期待')">
      <%= image_tag "home/活动.png", class: "w-full h-auto", alt: "活动" %>
    </button>

    <div class="py-12"></div>

    <!-- Category Pills -->
  </div>

  <!-- Bottom Navigation -->
  <%= render 'shared/bottom_navigation', active_tab: :home %>
</div>

<style>
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translate(-50%, -40%);
    }
    to {
      opacity: 1;
      transform: translate(-50%, -50%);
    }
  }
  
  @keyframes fadeOut {
    from {
      opacity: 1;
      transform: translate(-50%, -50%);
    }
    to {
      opacity: 0;
      transform: translate(-50%, -60%);
    }
  }
  
  .animate-fade-in {
    animation: fadeIn 0.3s ease-out;
  }
  
  .animate-fade-out {
    animation: fadeOut 0.3s ease-out;
  }
</style>
