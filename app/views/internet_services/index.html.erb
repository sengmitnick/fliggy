<div class="max-w-[390px] mx-auto bg-white min-h-screen relative pb-[80px]" data-controller="internet-services">
  
  <!-- 1. 顶部导航栏 -->
  <div class="px-5 py-3 flex justify-between items-end bg-[#FFDD00] h-[90px] pb-3 sticky top-0 z-50">
    <div class="flex items-center w-full relative">
      <%= link_to :back, class: "p-1 -ml-2" do %>
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
      <% end %>
      <div class="flex-1 flex justify-center space-x-6 text-lg">
        <div class="relative font-bold">
          境外上网
          <span class="absolute -bottom-1 left-0 right-0 h-0.5 bg-black"></span>
        </div>
        <div class="text-gray-700">境内流量</div>
      </div>
      <button class="p-1 -mr-2">
        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><circle cx="5" cy="12" r="2"/><circle cx="12" cy="12" r="2"/><circle cx="19" cy="12" r="2"/></svg>
      </button>
    </div>
  </div>

  <!-- 2. 地点与攻略栏 -->
  <div class="flex justify-between items-center px-4 py-3 bg-gray-50/50">
    <div class="flex items-center space-x-2 font-bold text-lg cursor-pointer" 
         data-action="click->internet-services#openRegionModal">
      <span class="text-2xl" data-internet-services-target="regionFlag"><%= region_flag(@region) %></span>
      <span data-internet-services-target="regionDisplay"><%= @region %></span>
      <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
    </div>
    <div class="bg-[#FFF8D8] text-xs px-3 py-1.5 rounded-full flex items-center border border-[#FFEBAA] cursor-pointer"
         onclick="window.showToast('精彩即将上线', 'info')">
      <span class="bg-[#FFCC00] text-[10px] px-1 rounded mr-1 font-bold">选购攻略</span>
      <span>境外上网怎么选 ></span>
    </div>
  </div>

  <!-- Destination Selector Modal -->
  <%= render 'destination_selector_modal' %>

  <!-- 3. 二级Tab分类 -->
  <div class="flex justify-between items-center px-6 pt-2 pb-0 border-b border-gray-200 bg-white">
    <%= link_to internet_services_path(tab: 'sim_card', region: @region), 
        data: { action: "internet-services#switchTab", tab: "sim_card" },
        class: "flex flex-col items-center pb-2 #{'border-b-2 border-black' if @current_tab == 'sim_card'}" do %>
      <span class="<%= @current_tab == 'sim_card' ? 'font-bold' : 'text-gray-500' %> text-base">境外电话卡</span>
    <% end %>
    <%= link_to internet_services_path(tab: 'data_plan', region: @region), 
        data: { action: "internet-services#switchTab", tab: "data_plan" },
        class: "flex flex-col items-center pb-2 #{'border-b-2 border-black' if @current_tab == 'data_plan'}" do %>
      <span class="<%= @current_tab == 'data_plan' ? 'font-bold' : 'text-gray-500' %> text-base">境外流量包</span>
    <% end %>
    <%= link_to internet_services_path(tab: 'wifi', region: @region), 
        data: { action: "internet-services#switchTab", tab: "wifi" },
        class: "flex flex-col items-center pb-2 #{'border-b-2 border-black' if @current_tab == 'wifi'}" do %>
      <span class="<%= @current_tab == 'wifi' ? 'font-bold' : 'text-gray-500' %> text-base">随身WiFi</span>
    <% end %>
  </div>

  <!-- Slogan -->
  <% if @current_tab == 'sim_card' %>
    <div class="text-center text-xs text-gray-400 py-2 bg-gray-50">
      - 价格更优 · 网速更快 · 信号稳定 -
    </div>
  <% elsif @current_tab == 'data_plan' %>
    <div class="text-center text-xs text-gray-400 py-2 bg-gray-50">
      - 无需换卡 · 无需换号 · 极速充值 -
    </div>
  <% else %>
    <div class="text-center text-xs text-gray-400 py-2 bg-gray-50">
      - 多网覆盖 · 信号稳定 · 多人共享 -
    </div>
  <% end %>

  <!-- 4. 内容区域 -->
  <div class="bg-white">
    <% if @current_tab == 'sim_card' %>
      <%= render 'sim_card_content' %>
    <% elsif @current_tab == 'data_plan' %>
      <%= render 'data_plan_content' %>
    <% else %>
      <%= render 'wifi_content' %>
    <% end %>
  </div>

</div>
