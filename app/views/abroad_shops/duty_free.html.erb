<% content_for :title, "免税店" %>

<div class="min-h-screen bg-[#f5f6f8] pb-16">
  
  <!-- 顶部导航栏 -->
  <div class="bg-white px-4 py-3 flex justify-between items-center sticky top-0 z-40 shadow-sm">
    <%= link_to abroad_shops_path, class: "p-1" do %>
      <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
      </svg>
    <% end %>
    <h1 class="text-lg font-bold text-gray-900">免税店</h1>
    <button class="p-1">
      <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
      </svg>
    </button>
  </div>

  <!-- 品牌列表 -->
  <div class="p-2 grid grid-cols-2 gap-2">
    <% @brands.each do |brand| %>
      <%= link_to brand_abroad_shop_path(brand), class: "bg-white rounded-lg overflow-hidden pb-2 shadow-sm" do %>
        <div class="aspect-square bg-gray-200 relative overflow-hidden">
          <% if brand.logo_url.present? %>
            <%= image_tag brand.logo_url, class: "w-full h-full object-cover", alt: brand.name %>
          <% else %>
            <div class="w-full h-full bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center">
              <span class="text-4xl font-bold text-blue-600"><%= brand.name[0] %></span>
            </div>
          <% end %>
          <div class="absolute bottom-0 w-full h-1/3 bg-gradient-to-t from-black/20 to-transparent"></div>
        </div>
        <div class="px-2 mt-2">
          <div class="text-sm text-gray-900 font-medium leading-5 line-clamp-2">
            <%= brand.name %>
          </div>
          <div class="mt-1.5 flex flex-wrap gap-1">
            <span class="bg-[#e8eaff] text-[#4a5fcf] text-[10px] px-1 py-0.5 rounded">免税店</span>
            <% if brand.featured? %>
              <span class="bg-[#ffe033] text-gray-800 text-[10px] px-1 py-0.5 rounded">精选</span>
            <% end %>
          </div>
          <div class="mt-2">
            <div class="text-xs text-gray-600 line-clamp-2"><%= brand.description&.truncate(40) || '免税购物，实惠到家' %></div>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>

  <% if @brands.empty? %>
    <div class="flex flex-col items-center justify-center py-16">
      <svg class="w-16 h-16 text-gray-300 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
      </svg>
      <p class="text-gray-500">暂无免税店品牌</p>
    </div>
  <% end %>

</div>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
