<!-- Filter Modal Overlay -->
<div data-flight-filter-target="overlay" class="hidden fixed inset-0 bg-black bg-opacity-50 z-40"></div>

<!-- Filter Modal -->
<div data-flight-filter-target="modal" class="hidden fixed inset-0 z-50 flex items-end justify-center md:items-center">
  <div class="bg-white w-full max-w-md h-[90vh] md:h-[80vh] rounded-t-3xl md:rounded-2xl flex flex-col">
    <!-- Modal Header -->
    <div class="flex items-center justify-between px-4 py-4 border-b border-gray-200">
      <h2 class="text-lg font-bold">筛选</h2>
      <button data-action="click->flight-filter#closeModal" class="p-2">
        <svg class="w-6 h-6 text-gray-600" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
        </svg>
      </button>
    </div>

    <!-- Modal Content -->
    <div class="flex flex-1 overflow-hidden">
      <!-- Left Sidebar - Filter Categories -->
      <div class="w-32 bg-gray-50 overflow-y-auto border-r border-gray-200">
        <button data-flight-filter-target="flightPreferenceTab" data-tab="flightPreference" data-action="click->flight-filter#selectTab" class="w-full px-3 py-4 text-left text-sm border-l-2 border-blue-500 text-blue-600 font-bold bg-white">
          航班偏好
        </button>
        <button data-flight-filter-target="airlineCompanyTab" data-tab="airlineCompany" data-action="click->flight-filter#selectTab" class="w-full px-3 py-4 text-left text-sm border-l-2 border-transparent text-gray-600">
          航空公司
        </button>
        <button data-flight-filter-target="airportTab" data-tab="airport" data-action="click->flight-filter#selectTab" class="w-full px-3 py-4 text-left text-sm border-l-2 border-transparent text-gray-600">
          机场
        </button>
        <button data-flight-filter-target="departureTimeTab" data-tab="departureTime" data-action="click->flight-filter#selectTab" class="w-full px-3 py-4 text-left text-sm border-l-2 border-transparent text-gray-600">
          起降时间
        </button>
        <button data-flight-filter-target="transferCityTab" data-tab="transferCity" data-action="click->flight-filter#selectTab" class="w-full px-3 py-4 text-left text-sm border-l-2 border-transparent text-gray-600">
          中转城市
        </button>
        <button data-flight-filter-target="transferTimesTab" data-tab="transferTimes" data-action="click->flight-filter#selectTab" class="w-full px-3 py-4 text-left text-sm border-l-2 border-transparent text-gray-600">
          中转次数
        </button>
        <button data-flight-filter-target="transferDurationTab" data-tab="transferDuration" data-action="click->flight-filter#selectTab" class="w-full px-3 py-4 text-left text-sm border-l-2 border-transparent text-gray-600">
          中转时长
        </button>
        <button data-flight-filter-target="totalDurationTab" data-tab="totalDuration" data-action="click->flight-filter#selectTab" class="w-full px-3 py-4 text-left text-sm border-l-2 border-transparent text-gray-600">
          总时长
        </button>
        <button data-flight-filter-target="seatClassTab" data-tab="seatClass" data-action="click->flight-filter#selectTab" class="w-full px-3 py-4 text-left text-sm border-l-2 border-transparent text-gray-600">
          舱位
        </button>
        <button data-flight-filter-target="aircraftModelTab" data-tab="aircraftModel" data-action="click->flight-filter#selectTab" class="w-full px-3 py-4 text-left text-sm border-l-2 border-transparent text-gray-600">
          机型
        </button>
        <button data-flight-filter-target="ticketCancellationTab" data-tab="ticketCancellation" data-action="click->flight-filter#selectTab" class="w-full px-3 py-4 text-left text-sm border-l-2 border-transparent text-gray-600">
          报销凭证
        </button>
      </div>

      <!-- Right Content - Filter Options -->
      <div class="flex-1 overflow-y-auto p-4">
        <!-- Flight Preference Section -->
        <div data-flight-filter-target="flightPreferenceSection">
          <h3 class="text-base font-bold mb-4">航班偏好</h3>
          
          <!-- Grid Layout with 2 columns -->
          <div class="grid grid-cols-2 gap-[6px]">
            <!-- 只看直飞 -->
            <div data-flight-filter-target="directFlightCard" data-action="click->flight-filter#toggleDirectFlight" class="relative flex flex-col items-center justify-center py-3 bg-[#f6f7f9] rounded-[4px] cursor-pointer transition-all">
              <svg class="w-6 h-6 mb-1 text-gray-700" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <path d="M17.8 19.2L16 11l3.5-3.5C21 6 21.5 4 21 3.5S19 3 17.5 4.5L14 8l-8.2-1.8L3 9l7.5 3L8 14.5l-3-1L3.5 15l3 2 2 3 1.5-1.5-1-3 2.5-2.5 3 7.5 2.8-1.3z"></path>
              </svg>
              <span class="text-[13px] text-[#333]">只看直飞</span>
              <input type="checkbox" data-flight-filter-target="directFlightCheckbox" class="hidden">
            </div>
            
            <!-- 留学生专享票 (占位) -->
            <div class="flex flex-col items-center justify-center py-3 bg-[#f6f7f9] rounded-[4px] cursor-pointer opacity-50">
              <svg class="w-6 h-6 mb-1 text-gray-700" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <path d="M22 10v6M2 10l10-5 10 5-10 5z"></path>
                <path d="M6 12v5c3 3 9 3 12 0v-5"></path>
              </svg>
              <span class="text-[13px] text-[#333]">留学生专享票</span>
            </div>
            
            <!-- 含托运行李额 -->
            <div data-flight-filter-target="checkedLuggageCard" data-action="click->flight-filter#toggleCheckedLuggage" class="relative flex flex-col items-center justify-center py-3 bg-[#f6f7f9] rounded-[4px] cursor-pointer transition-all overflow-hidden">
              <svg class="w-6 h-6 mb-1 text-[#333]" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <rect x="6" y="7" width="12" height="13" rx="2"></rect>
                <path d="M9 7V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v3"></path>
                <path d="M9 11v4M12 11v4M15 11v4"></path>
              </svg>
              <span class="text-[13px] text-[#333]">含托运行李额</span>
              <input type="checkbox" data-flight-filter-target="includeCheckedLuggageCheckbox" class="hidden">
            </div>
            
            <!-- 不看共享航班 -->
            <div data-flight-filter-target="noSharedFlightCard" data-action="click->flight-filter#toggleNoSharedFlight" class="relative flex flex-col items-center justify-center py-3 bg-[#f6f7f9] rounded-[4px] cursor-pointer transition-all">
              <svg class="w-6 h-6 mb-1 text-gray-700" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <path d="M17.8 19.2L16 11l3.5-3.5C21 6 21.5 4 21 3.5S19 3 17.5 4.5L14 8l-8.2-1.8L3 9l7.5 3L8 14.5l-3-1L3.5 15l3 2 2 3 1.5-1.5-1-3 2.5-2.5 3 7.5 2.8-1.3z"></path>
                <circle cx="18" cy="18" r="3" fill="white" stroke="currentColor" stroke-width="1"></circle>
              </svg>
              <span class="text-[13px] text-[#333]">不看共享航班</span>
              <input type="checkbox" data-flight-filter-target="noSharedFlightCheckbox" class="hidden">
            </div>
            
            <!-- 无需过境签 -->
            <div data-flight-filter-target="noTransitCard" data-action="click->flight-filter#toggleNoTransit" class="relative flex flex-col items-center justify-center py-3 bg-[#f6f7f9] rounded-[4px] cursor-pointer transition-all">
              <svg class="w-6 h-6 mb-1 text-gray-700" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <circle cx="12" cy="10" r="3"></circle>
                <path d="M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662"></path>
              </svg>
              <span class="text-[13px] text-[#333]">无需过境签</span>
              <input type="checkbox" data-flight-filter-target="noTransitCheckbox" class="hidden">
            </div>
            
            <!-- 看优惠前价格 -->
            <div data-flight-filter-target="discountPriceCard" data-action="click->flight-filter#toggleDiscountPrice" class="relative flex flex-col items-center justify-center py-3 bg-[#f6f7f9] rounded-[4px] cursor-pointer transition-all">
              <div class="relative">
                <svg class="w-6 h-6 mb-1 text-gray-700" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path>
                  <circle cx="7" cy="7" r="1"></circle>
                </svg>
                <!-- 右下角减号 -->
                <div class="absolute -bottom-1 -right-1 bg-white border border-gray-400 rounded-full w-3 h-3 flex items-center justify-center">
                  <div class="w-1.5 h-[1.5px] bg-gray-700"></div>
                </div>
              </div>
              <span class="text-[13px] text-[#333]">看优惠前价格</span>
              <input type="checkbox" data-flight-filter-target="discountPriceCheckbox" class="hidden">
            </div>
          </div>
        </div>

        <!-- Airline Company Section -->
        <div data-flight-filter-target="airlineCompanySection" class="hidden">
          <h3 class="text-base font-bold mb-4">航空公司</h3>
          
          <div class="mb-4">
            <h4 class="text-sm text-gray-600 mb-2">星空联盟</h4>
            <label class="flex items-center justify-between py-2">
              <span class="text-sm">深圳航空</span>
              <div class="flex items-center gap-2">
                <span class="text-xs text-gray-500">¥894起</span>
                <input type="checkbox" value="深圳航空" data-filter-type="airline" data-action="change->flight-filter#toggleAirline" class="w-5 h-5 text-blue-600 rounded">
              </div>
            </label>
          </div>

          <div class="mb-4">
            <h4 class="text-sm text-gray-600 mb-2">天合联盟</h4>
            <label class="flex items-center justify-between py-2">
              <span class="text-sm">国泰航空</span>
              <div class="flex items-center gap-2">
                <span class="text-xs text-gray-500">¥911起</span>
                <input type="checkbox" value="国泰航空" data-filter-type="airline" data-action="change->flight-filter#toggleAirline" class="w-5 h-5 text-blue-600 rounded">
              </div>
            </label>
            <label class="flex items-center justify-between py-2">
              <span class="text-sm">泰国亚航</span>
              <div class="flex items-center gap-2">
                <span class="text-xs text-gray-500">¥1041起</span>
                <input type="checkbox" value="泰国亚航" data-filter-type="airline" data-action="change->flight-filter#toggleAirline" class="w-5 h-5 text-blue-600 rounded">
              </div>
            </label>
            <label class="flex items-center justify-between py-2">
              <span class="text-sm">柬埔寨航空</span>
              <div class="flex items-center gap-2">
                <span class="text-xs text-gray-500">¥1073起</span>
                <input type="checkbox" value="柬埔寨航空" data-filter-type="airline" data-action="change->flight-filter#toggleAirline" class="w-5 h-5 text-blue-600 rounded">
              </div>
            </label>
            <label class="flex items-center justify-between py-2">
              <span class="text-sm">南方航空</span>
              <div class="flex items-center gap-2">
                <span class="text-xs text-gray-500">¥1074起</span>
                <input type="checkbox" value="南方航空" data-filter-type="airline" data-action="change->flight-filter#toggleAirline" class="w-5 h-5 text-blue-600 rounded">
              </div>
            </label>
            <label class="flex items-center justify-between py-2">
              <span class="text-sm">泰国越捷航空</span>
              <div class="flex items-center gap-2">
                <span class="text-xs text-gray-500">¥1081起</span>
                <input type="checkbox" value="泰国越捷航空" data-filter-type="airline" data-action="change->flight-filter#toggleAirline" class="w-5 h-5 text-blue-600 rounded">
              </div>
            </label>
          </div>

          <div>
            <button class="text-sm text-blue-600 flex items-center gap-1">
              全部展开
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
              </svg>
            </button>
          </div>
        </div>

        <!-- Airport Section -->
        <div data-flight-filter-target="airportSection" class="hidden">
          <h3 class="text-base font-bold mb-4">机场</h3>
          
          <div class="mb-4">
            <h4 class="text-sm text-gray-600 mb-2">深圳</h4>
            <label class="flex items-center justify-between py-2">
              <span class="text-sm">宝安国际机场 <span class="text-xs text-gray-500">SZX</span></span>
              <div class="flex items-center gap-2">
                <span class="text-xs text-gray-500">¥894起</span>
                <input type="checkbox" value="宝安国际机场" data-filter-type="airport" data-action="change->flight-filter#toggleDepartureAirport" class="w-5 h-5 text-blue-600 rounded">
              </div>
            </label>
            <label class="flex items-center justify-between py-2">
              <span class="text-sm">深圳机场码头 <span class="text-xs text-gray-500">FYG</span></span>
              <div class="flex items-center gap-2">
                <span class="text-xs text-gray-500">¥911起</span>
                <input type="checkbox" value="深圳机场码头" data-filter-type="airport" data-action="change->flight-filter#toggleDepartureAirport" class="w-5 h-5 text-blue-600 rounded">
              </div>
            </label>
            <label class="flex items-center justify-between py-2">
              <span class="text-sm">蛇口邮轮母港 <span class="text-xs text-gray-500">ZYK</span></span>
              <div class="flex items-center gap-2">
                <span class="text-xs text-gray-500">¥911起</span>
                <input type="checkbox" value="蛇口邮轮母港" data-filter-type="airport" data-action="change->flight-filter#toggleDepartureAirport" class="w-5 h-5 text-blue-600 rounded">
              </div>
            </label>
          </div>

          <div>
            <h4 class="text-sm text-gray-600 mb-2">曼谷</h4>
            <label class="flex items-center justify-between py-2">
              <span class="text-sm">素万那普国际机场 <span class="text-xs text-gray-500">BKK</span></span>
              <div class="flex items-center gap-2">
                <span class="text-xs text-gray-500">¥894起</span>
                <input type="checkbox" value="素万那普国际机场" data-filter-type="airport" data-action="change->flight-filter#toggleArrivalAirport" class="w-5 h-5 text-blue-600 rounded">
              </div>
            </label>
            <label class="flex items-center justify-between py-2">
              <span class="text-sm">廊曼国际机场 <span class="text-xs text-gray-500">DMK</span></span>
              <div class="flex items-center gap-2">
                <span class="text-xs text-gray-500">¥1041起</span>
                <input type="checkbox" value="廊曼国际机场" data-filter-type="airport" data-action="change->flight-filter#toggleArrivalAirport" class="w-5 h-5 text-blue-600 rounded">
              </div>
            </label>
          </div>
        </div>

        <!-- Departure Time Section -->
        <div data-flight-filter-target="departureTimeSection" class="hidden">
          <h3 class="text-base font-bold mb-4">起降时间</h3>
          
          <div class="mb-4">
            <h4 class="text-sm text-gray-600 mb-3">起飞 - 北京时间</h4>
            
            <label class="flex items-center justify-between py-3 border-b border-gray-100">
              <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-yellow-100 rounded flex items-center justify-center">
                  <span class="text-lg">🌅</span>
                </div>
                <span class="text-sm">00:00 - 06:00</span>
              </div>
              <input type="checkbox" value="00:00-06:00" data-filter-type="departure-time" data-action="change->flight-filter#toggleDepartureTime" class="w-5 h-5 text-blue-600 rounded">
            </label>
            
            <label class="flex items-center justify-between py-3 border-b border-gray-100">
              <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-blue-100 rounded flex items-center justify-center">
                  <span class="text-lg">☀️</span>
                </div>
                <span class="text-sm">06:00 - 12:00</span>
              </div>
              <input type="checkbox" value="06:00-12:00" data-filter-type="departure-time" data-action="change->flight-filter#toggleDepartureTime" class="w-5 h-5 text-blue-600 rounded">
            </label>
            
            <label class="flex items-center justify-between py-3 border-b border-gray-100">
              <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-orange-100 rounded flex items-center justify-center">
                  <span class="text-lg">🌤️</span>
                </div>
                <span class="text-sm">12:00 - 18:00</span>
              </div>
              <input type="checkbox" value="12:00-18:00" data-filter-type="departure-time" data-action="change->flight-filter#toggleDepartureTime" class="w-5 h-5 text-blue-600 rounded">
            </label>
            
            <label class="flex items-center justify-between py-3">
              <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-indigo-100 rounded flex items-center justify-center">
                  <span class="text-lg">🌙</span>
                </div>
                <span class="text-sm">18:00 - 24:00</span>
              </div>
              <input type="checkbox" value="18:00-24:00" data-filter-type="departure-time" data-action="change->flight-filter#toggleDepartureTime" class="w-5 h-5 text-blue-600 rounded">
            </label>
          </div>
        </div>

        <!-- Transfer City Section -->
        <div data-flight-filter-target="transferCitySection" class="hidden">
          <h3 class="text-base font-bold mb-4">中转城市</h3>
          <p class="text-sm text-gray-500">暂无中转航班</p>
        </div>

        <!-- Transfer Times Section -->
        <div data-flight-filter-target="transferTimesSection" class="hidden">
          <h3 class="text-base font-bold mb-4">中转次数</h3>
          <p class="text-sm text-gray-500">暂无中转航班</p>
        </div>

        <!-- Transfer Duration Section -->
        <div data-flight-filter-target="transferDurationSection" class="hidden">
          <h3 class="text-base font-bold mb-4">中转时长</h3>
          <p class="text-sm text-gray-500">暂无中转航班</p>
        </div>

        <!-- Total Duration Section -->
        <div data-flight-filter-target="totalDurationSection" class="hidden">
          <h3 class="text-base font-bold mb-4">总时长</h3>
          <p class="text-sm text-gray-500">敬请期待</p>
        </div>

        <!-- Seat Class Section -->
        <div data-flight-filter-target="seatClassSection" class="hidden">
          <h3 class="text-base font-bold mb-4">舱位</h3>
          <p class="text-sm text-gray-500">敬请期待</p>
        </div>

        <!-- Aircraft Model Section -->
        <div data-flight-filter-target="aircraftModelSection" class="hidden">
          <h3 class="text-base font-bold mb-4">机型</h3>
          <p class="text-sm text-gray-500">敬请期待</p>
        </div>

        <!-- Ticket Cancellation Section -->
        <div data-flight-filter-target="ticketCancellationSection" class="hidden">
          <h3 class="text-base font-bold mb-4">报销凭证</h3>
          <p class="text-sm text-gray-500">敬请期待</p>
        </div>
      </div>
    </div>

    <!-- Selected Filters Display -->
    <div data-flight-filter-target="selectedFiltersContainer" class="hidden px-4 py-3 border-t border-gray-200 bg-gray-50 max-h-32 overflow-y-auto">
      <div class="text-xs text-gray-600 mb-2">已选：</div>
      <div data-flight-filter-target="selectedFiltersList" class="flex flex-wrap gap-2">
        <!-- Selected filter tags will be dynamically inserted here -->
      </div>
    </div>

    <!-- Modal Footer -->
    <div class="flex items-center justify-between px-4 py-3 border-t border-gray-200 bg-white">
      <button data-flight-filter-target="resetButton" data-action="click->flight-filter#reset" class="px-6 py-2 text-gray-600 font-medium">
        重置
      </button>
      <button data-flight-filter-target="confirmButton" data-action="click->flight-filter#confirm" class="flex-1 ml-3 px-8 py-3 bg-yellow-400 hover:bg-yellow-500 text-gray-900 rounded-full font-bold flex items-center justify-center gap-2">
        查看<span data-flight-filter-target="resultCount">66</span>个结果
      </button>
    </div>
  </div>
</div>
