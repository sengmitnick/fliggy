<% content_for :title, "验证任务管理" %>

<div class="container-xl">
  <!-- Page Title -->
  <div class="flex items-center justify-between mb-8">
    <h1 class="text-3xl font-bold text-gray-900 dark:text-gray-50">验证任务管理</h1>
    <div class="text-sm text-gray-500 dark:text-gray-400">
      共 <%= @tasks.size %> 个任务
    </div>
  </div>

  <!-- Tasks Table -->
  <div class="card bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700">
    <div class="card-body p-0">
      <% if @tasks.any? %>
        <div class="overflow-x-auto">
          <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
            <thead class="bg-gray-50 dark:bg-gray-800">
              <tr>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-48">任务ID</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 tracking-wider">任务名称</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 tracking-wider">描述</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 tracking-wider">超时时间</th>
              </tr>
            </thead>
            <tbody class="bg-gray-50 dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700">
              <% @tasks.each do |task| %>
                <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors">
                  <td class="px-6 py-4 text-sm font-mono max-w-xs break-words">
                    <%= link_to task[:validator_id], admin_validation_task_path(task[:validator_id]), class: "text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 hover:underline" %>
                  </td>
                  <td class="px-6 py-4 text-sm font-semibold text-gray-900 dark:text-gray-100">
                    <%= task[:title] %>
                  </td>
                  <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-300 max-w-md">
                    <%= task[:description] %>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100">
                    <%= task[:timeout] %>秒
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      <% else %>
        <div class="text-center py-12">
          <div class="w-24 h-24 mx-auto mb-4 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center">
            <svg class="w-12 h-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
            </svg>
          </div>
          <h3 class="text-lg font-medium text-gray-900 dark:text-gray-50 mb-2">暂无验证任务</h3>
          <p class="text-gray-500 dark:text-gray-400">请在 app/validators/ 目录下创建验证器。</p>
        </div>
      <% end %>
    </div>
  </div>
</div>
