<!-- 客房列表 -->
<div class="bg-white mb-2">
  <%
    # 根据 room_category 筛选房型
    rooms_to_display = if @room_category == 'hourly'
      @hotel.hotel_rooms.hourly
    elsif @room_category == 'overnight'
      @hotel.hotel_rooms.overnight
    else
      @hotel.hotel_rooms
    end
  %>
  
  <% rooms_to_display.each_with_index do |room, index| %>
    <div class="<%= index > 0 ? 'border-t border-gray-100' : '' %>">
      <div class="flex items-start space-x-3 p-4">
        <div class="flex-shrink-0 relative">
          <div class="w-28 h-28 rounded-lg bg-gradient-to-br from-blue-100 to-purple-100 flex items-center justify-center">
            <svg class="w-12 h-12 text-gray-400" fill="currentColor" viewBox="0 0 24 24">
              <path d="M19,7H11V14H3V5H1V20H3V17H21V20H23V11A4,4 0 0,0 19,7M7,13A3,3 0 0,0 10,10A3,3 0 0,0 7,7A3,3 0 0,0 4,10A3,3 0 0,0 7,13Z"/>
            </svg>
          </div>
        </div>
        <div class="flex-1 min-w-0">
          <div class="flex items-center justify-between mb-1">
            <h3 class="font-bold text-gray-900 text-base flex items-center">
              <%= room.room_type %>
            </h3>
          </div>
          <p class="text-sm text-gray-600 mb-2">
            <%= room.bed_type %> <%= room.area %> 
            <%= room.has_window ? '有窗' : '无窗' %>
            · 最多<%= room.max_guests %>人
          </p>
          <div class="flex items-center justify-between">
            <div>
              <% if room.original_price && room.original_price > room.price %>
                <div class="text-xs text-gray-400 line-through">¥<%= number_with_precision(room.original_price, precision: 0) %></div>
              <% end %>
              <div class="flex items-baseline space-x-1">
                <span class="text-red-600 text-xl font-bold">¥<%= number_with_precision(room.price, precision: 0) %></span>
                <span class="text-sm text-gray-600">起</span>
              </div>
            </div>
            <div class="text-right">
              <% if room.available_rooms > 0 %>
                <%= link_to new_hotel_hotel_booking_path(@hotel, 
                  room_id: room.id,
                  check_in: @check_in,
                  check_out: @check_out,
                  rooms: @rooms,
                  adults: @adults,
                  children: @children
                ), class: "bg-gradient-to-r from-orange-400 to-orange-500 text-white px-6 py-2 rounded-full font-medium text-sm" do %>
                  订
                <% end %>
              <% else %>
                <span class="text-gray-400 text-sm">已订完</span>
              <% end %>
            </div>
          </div>
          
          <% if room.available_rooms < 5 && room.available_rooms > 0 %>
            <div class="mt-2 text-xs text-red-500">
              仅剩<%= room.available_rooms %>间
            </div>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
  
  <% if rooms_to_display.empty? %>
    <div class="p-8 text-center text-gray-500">
      <p>暂无可用房型</p>
    </div>
  <% end %>
</div>
