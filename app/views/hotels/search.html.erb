<div class="min-h-screen bg-gray-100 max-w-[450px] mx-auto relative">

  <!-- æœç´¢æ åŒºåŸŸ -->
  <div class="bg-white px-3 pb-2 pt-3 flex items-center gap-2 sticky top-0 z-40">
    <!-- è¿”å›æŒ‰é’® -->
    <%= link_to hotels_path(city: @city, check_in: @check_in, check_out: @check_out, rooms: @rooms, adults: @adults, children: @children, price_min: params[:price_min], price_max: params[:price_max], star_level: params[:star_level]), class: "flex-shrink-0" do %>
      <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
      </svg>
    <% end %>
    
    <!-- æœç´¢è¾“å…¥æ¡† (é»„è‰²è¾¹æ¡†) -->
    <%= form_with url: search_hotels_path, method: :get, data: { turbo: false }, class: "flex-1" do |f| %>
      <div class="flex-1 flex items-center border-[1.5px] border-[#ffd000] rounded-full h-10 px-3 bg-white shadow-sm overflow-hidden">
        <!-- åŸå¸‚ -->
        <span class="font-bold text-gray-800 text-sm mr-1"><%= @city.gsub('å¸‚', '') %></span>
        <!-- æ—¥æœŸ -->
        <div class="flex flex-col justify-center leading-none text-[9px] text-gray-500 mr-2 border-r border-gray-200 pr-2 h-6">
          <span><%= @check_in.strftime('%m-%d') %> <span class="text-gray-400"><%= @rooms %>é—´</span></span>
          <span><%= @check_out.strftime('%m-%d') %> <span class="text-gray-400"><%= @adults %>äºº</span></span>
        </div>
        <!-- å…³é”®å­— -->
        <%= f.text_field :q, value: params[:q], class: "text-gray-800 text-sm flex-1 truncate border-none outline-none bg-transparent p-0", placeholder: "" %>
        <%= f.hidden_field :city, value: @city %>
        <%= f.hidden_field :check_in, value: @check_in %>
        <%= f.hidden_field :check_out, value: @check_out %>
        <%= f.hidden_field :rooms, value: @rooms %>
        <%= f.hidden_field :adults, value: @adults %>
        <%= f.hidden_field :children, value: @children %>
        <!-- æ¸…é™¤æŒ‰é’® -->
        <% if params[:q].present? %>
          <div class="bg-gray-200 rounded-full p-0.5 ml-1 cursor-pointer" onclick="this.closest('form').querySelector('[name=q]').value=''; this.closest('form').submit();">
            <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20">
              <path d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"></path>
            </svg>
          </div>
        <% end %>
      </div>
    <% end %>

    <!-- å³ä¾§å›¾æ ‡ -->
    <div class="flex gap-3 text-gray-800">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
      </svg>
      <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
        <circle cx="5" cy="12" r="2"/>
        <circle cx="12" cy="12" r="2"/>
        <circle cx="19" cy="12" r="2"/>
      </svg>
    </div>
  </div>

  <!-- ç­›é€‰æ  -->
  <div class="bg-white mt-3 px-4 py-3 flex items-center gap-3 border-b border-gray-100" 
       data-controller="hotel-search-filter" 
       data-hotel-search-filter-city-value="<%= @city %>" 
       data-hotel-search-filter-check-in-value="<%= @check_in %>" 
       data-hotel-search-filter-check-out-value="<%= @check_out %>" 
       data-hotel-search-filter-rooms-value="<%= @rooms %>" 
       data-hotel-search-filter-adults-value="<%= @adults %>" 
       data-hotel-search-filter-children-value="<%= @children %>" 
       data-hotel-search-filter-query-value="<%= params[:q] || '' %>" 
       data-hotel-search-filter-sort-value="<%= params[:sort] || 'recommend' %>" 
       data-hotel-search-filter-district-value="<%= params[:district] || '' %>" 
       data-hotel-search-filter-price-range-value="<%= params[:price_range] || '' %>" 
       data-hotel-search-filter-stars-value="<%= params[:star_level] || '' %>">
    
    <!-- æ’åºæŒ‰é’® -->
    <button type="button" 
            data-hotel-search-filter-target="sortButton" 
            data-action="click->hotel-search-filter#openSortModal" 
            class="flex items-center gap-1 text-sm font-medium text-gray-700 hover:text-primary transition-colors">
      <span><%= params[:sort] == 'rating' ? 'è¯„åˆ†ä¼˜å…ˆ' : params[:sort] == 'distance' ? 'è·ç¦»ä¼˜å…ˆ' : params[:sort] == 'price' ? 'ä»·æ ¼ä¼˜å…ˆ' : 'æ¨èæ’åº' %></span>
      <svg class="w-3 h-3 fill-current" viewBox="0 0 20 20">
        <path d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"/>
      </svg>
    </button>
    
    <!-- å•†åœˆæŒ‰é’® -->
    <button type="button" 
            data-hotel-search-filter-target="districtButton" 
            data-action="click->hotel-search-filter#openDistrictModal" 
            class="flex items-center gap-1 text-sm font-medium text-gray-700 hover:text-primary transition-colors">
      <span><%= params[:district].present? ? params[:district] : 'ä½ç½®è·ç¦»' %></span>
      <svg class="w-3 h-3 fill-current" viewBox="0 0 20 20">
        <path d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"/>
      </svg>
    </button>
    
    <!-- ä»·æ ¼æŒ‰é’® -->
    <button type="button" 
            data-hotel-search-filter-target="priceButton" 
            data-action="click->hotel-search-filter#openPriceModal" 
            class="flex items-center gap-1 text-sm font-medium text-gray-700 hover:text-primary transition-colors">
      <span><%= params[:price_range] == '0-100' ? 'Â¥100ä»¥ä¸‹' : params[:price_range] == '100-200' ? 'Â¥100-200' : params[:price_range] == '200-300' ? 'Â¥200-300' : params[:price_range] == '300+' ? 'Â¥300ä»¥ä¸Š' : 'ä»·æ ¼/æ˜Ÿçº§' %></span>
      <svg class="w-3 h-3 fill-current" viewBox="0 0 20 20">
        <path d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"/>
      </svg>
    </button>
    
    <!-- ç­›é€‰æŒ‰é’® -->
    <button type="button" 
            data-hotel-search-filter-target="filterButton" 
            data-action="click->hotel-search-filter#openFilterModal" 
            class="flex items-center gap-1 text-sm font-medium text-gray-700 hover:text-primary transition-colors">
      <span><%= params[:star_level].present? ? "#{params[:star_level]}æ˜Ÿ" : 'ç­›é€‰' %></span>
      <svg class="w-3 h-3 fill-current" viewBox="0 0 20 20">
        <path d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"/>
      </svg>
    </button>
    
    <!-- æ’åºæ¨¡æ€æ¡† -->
    <div data-hotel-search-filter-target="sortModal" 
         data-action="click->hotel-search-filter#closeAllModals" 
         class="hidden fixed inset-0 bg-black/50 z-50">
      <div data-action="click->hotel-search-filter#stopPropagation" 
           class="absolute bottom-0 left-0 right-0 bg-white rounded-t-2xl max-w-[450px] mx-auto">
        <div class="p-4 space-y-2">
          <h3 class="text-lg font-bold mb-4">æ’åºæ–¹å¼</h3>
          <button data-hotel-search-filter-target="sortOption" 
                  data-value="recommend" 
                  data-action="click->hotel-search-filter#selectSort" 
                  class="w-full text-left px-4 py-3 rounded-lg hover:bg-gray-50 <%= params[:sort].blank? || params[:sort] == 'recommend' ? 'text-primary font-bold' : 'text-gray-700' %>">
            æ¨èæ’åº
          </button>
          <button data-hotel-search-filter-target="sortOption" 
                  data-value="price" 
                  data-action="click->hotel-search-filter#selectSort" 
                  class="w-full text-left px-4 py-3 rounded-lg hover:bg-gray-50 <%= params[:sort] == 'price' ? 'text-primary font-bold' : 'text-gray-700' %>">
            ä»·æ ¼ä¼˜å…ˆ
          </button>
          <button data-hotel-search-filter-target="sortOption" 
                  data-value="rating" 
                  data-action="click->hotel-search-filter#selectSort" 
                  class="w-full text-left px-4 py-3 rounded-lg hover:bg-gray-50 <%= params[:sort] == 'rating' ? 'text-primary font-bold' : 'text-gray-700' %>">
            è¯„åˆ†ä¼˜å…ˆ
          </button>
          <button data-hotel-search-filter-target="sortOption" 
                  data-value="distance" 
                  data-action="click->hotel-search-filter#selectSort" 
                  class="w-full text-left px-4 py-3 rounded-lg hover:bg-gray-50 <%= params[:sort] == 'distance' ? 'text-primary font-bold' : 'text-gray-700' %>">
            è·ç¦»ä¼˜å…ˆ
          </button>
        </div>
      </div>
    </div>
    
    <!-- å•†åœˆæ¨¡æ€æ¡† -->
    <div data-hotel-search-filter-target="districtModal" 
         data-action="click->hotel-search-filter#closeAllModals" 
         class="hidden fixed inset-0 bg-black/50 z-50">
      <div data-action="click->hotel-search-filter#stopPropagation" 
           class="absolute bottom-0 left-0 right-0 bg-white rounded-t-2xl max-w-[450px] mx-auto max-h-[70vh] overflow-y-auto">
        <div class="p-4">
          <h3 class="text-lg font-bold mb-4">é€‰æ‹©å•†åœˆ</h3>
          <div class="grid grid-cols-3 gap-2">
            <button data-hotel-search-filter-target="districtOption" 
                    data-value="" 
                    data-action="click->hotel-search-filter#selectDistrict" 
                    class="px-3 py-2 rounded-lg text-sm <%= params[:district].blank? ? 'bg-primary text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200' %>">
              ä¸é™
            </button>
            <% @districts.each do |district| %>
              <button data-hotel-search-filter-target="districtOption" 
                      data-value="<%= district %>" 
                      data-action="click->hotel-search-filter#selectDistrict" 
                      class="px-3 py-2 rounded-lg text-sm <%= params[:district] == district ? 'bg-primary text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200' %>">
                <%= district %>
              </button>
            <% end %>
          </div>
        </div>
      </div>
    </div>
    
    <!-- ä»·æ ¼æ¨¡æ€æ¡† -->
    <div data-hotel-search-filter-target="priceModal" 
         data-action="click->hotel-search-filter#closeAllModals" 
         class="hidden fixed inset-0 bg-black/50 z-50">
      <div data-action="click->hotel-search-filter#stopPropagation" 
           class="absolute bottom-0 left-0 right-0 bg-white rounded-t-2xl max-w-[450px] mx-auto">
        <div class="p-4">
          <h3 class="text-lg font-bold mb-4">ä»·æ ¼åŒºé—´</h3>
          <div class="grid grid-cols-2 gap-2">
            <button data-hotel-search-filter-target="priceOption" 
                    data-value="" 
                    data-action="click->hotel-search-filter#selectPriceRange" 
                    class="px-3 py-2 rounded-lg text-sm <%= params[:price_range].blank? ? 'bg-primary text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200' %>">
              ä¸é™
            </button>
            <button data-hotel-search-filter-target="priceOption" 
                    data-value="0-100" 
                    data-action="click->hotel-search-filter#selectPriceRange" 
                    class="px-3 py-2 rounded-lg text-sm <%= params[:price_range] == '0-100' ? 'bg-primary text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200' %>">
              Â¥100ä»¥ä¸‹
            </button>
            <button data-hotel-search-filter-target="priceOption" 
                    data-value="100-200" 
                    data-action="click->hotel-search-filter#selectPriceRange" 
                    class="px-3 py-2 rounded-lg text-sm <%= params[:price_range] == '100-200' ? 'bg-primary text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200' %>">
              Â¥100-200
            </button>
            <button data-hotel-search-filter-target="priceOption" 
                    data-value="200-300" 
                    data-action="click->hotel-search-filter#selectPriceRange" 
                    class="px-3 py-2 rounded-lg text-sm <%= params[:price_range] == '200-300' ? 'bg-primary text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200' %>">
              Â¥200-300
            </button>
            <button data-hotel-search-filter-target="priceOption" 
                    data-value="300+" 
                    data-action="click->hotel-search-filter#selectPriceRange" 
                    class="px-3 py-2 rounded-lg text-sm <%= params[:price_range] == '300+' ? 'bg-primary text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200' %>">
              Â¥300ä»¥ä¸Š
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- æ˜Ÿçº§ç­›é€‰æ¨¡æ€æ¡† -->
    <div data-hotel-search-filter-target="filterModal" 
         data-action="click->hotel-search-filter#closeAllModals" 
         class="hidden fixed inset-0 bg-black/50 z-50">
      <div data-action="click->hotel-search-filter#stopPropagation" 
           class="absolute bottom-0 left-0 right-0 bg-white rounded-t-2xl max-w-[450px] mx-auto">
        <div class="p-4">
          <h3 class="text-lg font-bold mb-4">æ˜Ÿçº§ç­›é€‰</h3>
          <div class="space-y-2 mb-4">
            <button data-hotel-search-filter-target="starOption" 
                    data-value="5" 
                    data-action="click->hotel-search-filter#toggleStar" 
                    class="w-full px-4 py-3 rounded-lg text-left <%= params[:star_level] == '5' ? 'bg-primary text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200' %>">
              <div class="font-bold">äº”æ˜Ÿçº§/è±ªå</div>
              <div class="text-xs opacity-80">é«˜æ¡£è±ªåå‹é…’åº—</div>
            </button>
            <button data-hotel-search-filter-target="starOption" 
                    data-value="4" 
                    data-action="click->hotel-search-filter#toggleStar" 
                    class="w-full px-4 py-3 rounded-lg text-left <%= params[:star_level] == '4' ? 'bg-primary text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200' %>">
              <div class="font-bold">å››æ˜Ÿçº§/é«˜æ¡£</div>
              <div class="text-xs opacity-80">èˆ’é€‚é«˜æ¡£å‹é…’åº—</div>
            </button>
            <button data-hotel-search-filter-target="starOption" 
                    data-value="3" 
                    data-action="click->hotel-search-filter#toggleStar" 
                    class="w-full px-4 py-3 rounded-lg text-left <%= params[:star_level] == '3' ? 'bg-primary text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200' %>">
              <div class="font-bold">ä¸‰æ˜Ÿçº§/èˆ’é€‚</div>
              <div class="text-xs opacity-80">ç»æµèˆ’é€‚å‹é…’åº—</div>
            </button>
            <button data-hotel-search-filter-target="starOption" 
                    data-value="2" 
                    data-action="click->hotel-search-filter#toggleStar" 
                    class="w-full px-4 py-3 rounded-lg text-left <%= params[:star_level] == '2' ? 'bg-primary text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200' %>">
              <div class="font-bold">äºŒæ˜Ÿçº§åŠä»¥ä¸‹</div>
              <div class="text-xs opacity-80">ç»æµå®æƒ å‹é…’åº—</div>
            </button>
          </div>
          <div class="flex gap-3 pt-3 border-t">
            <button data-action="click->hotel-search-filter#clearFilters" 
                    class="flex-1 px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50">
              æ¸…ç©ºç­›é€‰
            </button>
            <button data-action="click->hotel-search-filter#applyFilters" 
                    class="flex-1 px-4 py-2 rounded-lg bg-primary text-white hover:bg-primary-dark">
              ç¡®è®¤
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- å¿«æ·æ ‡ç­¾ (æ¨ªå‘æ»šåŠ¨) -->
  <div class="bg-white pl-3 py-2 flex gap-2 overflow-x-auto no-scrollbar border-b border-gray-100">
    <div class="bg-red-50 text-red-500 px-3 py-1.5 rounded text-xs font-medium whitespace-nowrap">å‡ºè¡Œç‰¹æƒ </div>
    <div class="bg-red-50 text-red-500 px-3 py-1.5 rounded text-xs font-bold italic whitespace-nowrap">é™„è¿‘2å…¬é‡Œ</div>
    <div class="bg-gray-100 text-gray-700 px-3 py-1.5 rounded text-xs font-medium flex items-center whitespace-nowrap">
      <span class="text-red-500 mr-1">ğŸ‰</span> çƒ­é—¨ä¼˜æƒ  
      <svg class="w-2 h-2 ml-1 text-gray-500" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
      </svg>
    </div>
    <div class="bg-gray-100 text-gray-700 px-3 py-1.5 rounded text-xs font-medium whitespace-nowrap">å®¢æ ˆ/æ°‘å®¿</div>
    <div class="bg-gray-100 text-gray-700 px-3 py-1.5 rounded text-xs font-medium flex items-center whitespace-nowrap">
      çƒ­é—¨å“ç‰Œ
      <svg class="w-2 h-2 ml-1 text-gray-500" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
      </svg>
    </div>
  </div>

  <!-- åœ°å›¾æ¨¡å— -->
  <div class="relative w-full h-32 overflow-hidden" style="background-color: #eef4f9; background-image: linear-gradient(#dcebf5 2px, transparent 2px), linear-gradient(90deg, #dcebf5 2px, transparent 2px); background-size: 40px 40px;">
    <!-- åœ°å›¾å†…å®¹æ¨¡æ‹Ÿ -->
    <div class="absolute top-0 left-0 w-1/3 h-full bg-blue-100 opacity-50 transform -skew-x-12"></div>
    <div class="absolute bottom-4 left-4 text-xs font-bold text-gray-400">é«˜å¾·åœ°å›¾</div>
    
    <!-- ä»·æ ¼æ°”æ³¡ -->
    <% if @hotels.present? %>
      <% @hotels.first(3).each_with_index do |hotel, index| %>
        <% positions = [[45, 32], [55, 48], [65, 24]] %>
        <% left_pos, top_pos = positions[index] %>
        <div class="absolute flex flex-col items-center z-10" style="top: <%= top_pos %>px; left: <%= left_pos %>%;">
          <div class="bg-[#5c7cfa] text-white text-[10px] px-1.5 py-0.5 rounded shadow-lg border border-white">
            <span>Â¥<%= (hotel.price * @rooms).to_i %></span>
          </div>
          <div class="w-1.5 h-1.5 bg-[#5c7cfa] transform rotate-45 -mt-0.5"></div>
        </div>
      <% end %>
    <% end %>
    
    <!-- çº¢ç‚¹ä¸­å¿ƒ -->
    <div class="absolute top-5 left-[50%] transform -translate-x-1/2">
      <div class="w-8 h-8 bg-red-500/20 rounded-full flex items-center justify-center animate-pulse">
        <div class="w-3 h-3 bg-red-500 rounded-full border-2 border-white shadow"></div>
      </div>
    </div>

    <!-- æµ®åŠ¨æŒ‰é’® -->
    <div class="absolute bottom-3 right-3 bg-white px-2 py-1 rounded shadow text-xs text-gray-700 flex items-center gap-1 border border-gray-200">
      <div class="bg-indigo-500 p-0.5 rounded-sm">
        <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20">
          <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 13a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1h-2a1 1 0 01-1-1v-2z"/>
        </svg>
      </div>
      çœ‹å¤§åœ°å›¾ 
      <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
      </svg>
    </div>
    <div class="absolute bottom-3 right-28 bg-white px-2 py-1 rounded shadow text-xs text-gray-700 border border-gray-200">
      å…³é—­
    </div>
  </div>

  <!-- é…’åº—åˆ—è¡¨ -->
  <div class="pb-10">
    <% @hotels.each do |hotel| %>
      <%= link_to hotel_path(hotel, check_in: @check_in, check_out: @check_out, rooms: @rooms, adults: @adults, children: @children), class: "flex bg-white p-3 border-b border-gray-200" do %>
        <!-- å·¦ä¾§å›¾ç‰‡ -->
        <div class="relative w-[110px] h-[140px] bg-gray-200 rounded-lg overflow-hidden shrink-0">
          <% if hotel.image.attached? %>
            <%= image_tag hotel.image, class: "w-full h-full object-cover", alt: hotel.name %>
          <% elsif hotel.image_url.present? %>
            <%= image_tag hotel.image_url, class: "w-full h-full object-cover", alt: hotel.name, onerror: "this.src='https://images.unsplash.com/photo-1566073771259-6a8506099945?w=800&q=80'" %>
          <% else %>
            <svg class="w-full h-full text-gray-300" fill="currentColor" viewBox="0 0 24 24">
              <rect width="24" height="24" fill="#e5e7eb"/>
              <path d="M2 22h20V10l-10-8-10 8v12z" fill="#9ca3af" opacity="0.5"/>
              <circle cx="5" cy="18" r="1" fill="#fff"/>
              <circle cx="9" cy="18" r="1" fill="#fff"/>
              <circle cx="13" cy="18" r="1" fill="#fff"/>
              <circle cx="5" cy="14" r="1" fill="#fff"/>
              <circle cx="9" cy="14" r="1" fill="#fff"/>
              <circle cx="13" cy="14" r="1" fill="#fff"/>
            </svg>
          <% end %>
          <!-- ä¿ƒé”€æ ‡ç­¾ -->
          <% if hotel.is_featured %>
            <div class="absolute bottom-0 w-full bg-gradient-to-r from-orange-400 to-orange-500 text-white text-[10px] font-medium text-center py-1">
              é™æ—¶é‡Œç¨‹ <span class="text-yellow-100 font-bold text-xs">20</span> å€æŠµç°é‡‘
            </div>
          <% end %>
        </div>
        
        <!-- å³ä¾§å†…å®¹ -->
        <div class="flex-1 ml-3 flex flex-col justify-between">
          <div>
            <div class="flex items-start">
              <h3 class="font-bold text-base text-gray-900 leading-tight">
                <% if hotel.is_featured %>
                  <span class="bg-[#ff4d4f] text-white text-[10px] px-1 rounded-sm align-middle mr-1 relative -top-0.5">é—ªä¿ƒ</span>
                <% end %>
                <%= hotel.name %>
              </h3>
            </div>
            <div class="text-[10px] text-gray-400 mt-1"><%= hotel.hotel_type == 'hotel' ? 'é…’åº—' : 'æ°‘å®¿' %> Â· <%= hotel.star_level %>æ˜Ÿ</div>
            <% if hotel.rating.present? %>
              <div class="flex items-center mt-1">
                <span class="bg-[#5c7cfa] text-white text-[10px] font-bold px-1 rounded-sm mr-1"><%= hotel.rating %></span>
                <span class="text-[#5c7cfa] text-xs mr-2">è®¾æ–½é½å…¨</span>
              </div>
            <% end %>
            <div class="text-xs text-gray-500 mt-0.5 truncate"><%= hotel.address %></div>
            
            <!-- è®¾æ–½æ ‡ç­¾ -->
            <% if hotel.features.present? && hotel.features.is_a?(Array) %>
              <div class="flex flex-wrap gap-1 mt-1.5">
                <% hotel.features.first(4).each do |feature| %>
                  <span class="text-[10px] text-gray-600 border border-gray-200 px-1 rounded bg-gray-50"><%= feature %></span>
                <% end %>
              </div>
            <% end %>
          </div>

          <div class="flex justify-between items-end mt-1">
            <span class="text-[10px] text-gray-400"><%= rand(50..500) %>+é¢„è®¢</span>
            <div class="text-right">
              <% if hotel.original_price.present? && hotel.original_price > hotel.price %>
                <div class="text-[10px] text-gray-400 line-through">Â¥<%= (hotel.original_price * @rooms).to_i %></div>
              <% end %>
              <div class="text-[#ff4d4f] leading-none">
                <span class="text-xs font-bold">Â¥</span><span class="text-2xl font-bold"><%= (hotel.price * @rooms).to_i %></span><span class="text-xs text-gray-500">èµ·</span>
              </div>
              <% if hotel.is_featured %>
                <div class="bg-[#ff4d4f] text-white text-[10px] px-1 rounded-sm inline-block mt-0.5 scale-90 origin-right">
                  è†¨èƒ€ç¥åˆ¸ <span class="bg-white/20 px-0.5 ml-0.5 rounded-sm">å·²è†¨è‡³<%= rand(10..50) %>â†—</span>
                </div>
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    <% end %>
    
    <!-- åˆ†é¡µ -->
    <% if @hotels.present? %>
      <div class="px-4 py-4">
        <%= paginate @hotels %>
      </div>
    <% else %>
      <div class="text-center py-8 text-gray-500">
        æš‚æ— ç¬¦åˆæ¡ä»¶çš„é…’åº—
      </div>
    <% end %>
  </div>

  <!-- åº•éƒ¨å¯¼èˆª -->
  <%= render 'shared/bottom_navigation' %>
</div>

<style>
  /* éšè—æ»šåŠ¨æ¡ä½†ä¿ç•™åŠŸèƒ½ */
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
</style>
