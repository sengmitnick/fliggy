var __defProp = Object.defineProperty;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};

// node_modules/@rails/actioncable/src/adapters.js
var adapters_default;
var init_adapters = __esm({
  "node_modules/@rails/actioncable/src/adapters.js"() {
    adapters_default = {
      logger: typeof console !== "undefined" ? console : void 0,
      WebSocket: typeof WebSocket !== "undefined" ? WebSocket : void 0
    };
  }
});

// node_modules/@rails/actioncable/src/logger.js
var logger_default;
var init_logger = __esm({
  "node_modules/@rails/actioncable/src/logger.js"() {
    init_adapters();
    logger_default = {
      log(...messages) {
        if (this.enabled) {
          messages.push(Date.now());
          adapters_default.logger.log("[ActionCable]", ...messages);
        }
      }
    };
  }
});

// node_modules/@rails/actioncable/src/connection_monitor.js
var now2, secondsSince2, ConnectionMonitor2, connection_monitor_default;
var init_connection_monitor = __esm({
  "node_modules/@rails/actioncable/src/connection_monitor.js"() {
    init_logger();
    now2 = () => (/* @__PURE__ */ new Date()).getTime();
    secondsSince2 = (time) => (now2() - time) / 1e3;
    ConnectionMonitor2 = class {
      constructor(connection) {
        this.visibilityDidChange = this.visibilityDidChange.bind(this);
        this.connection = connection;
        this.reconnectAttempts = 0;
      }
      start() {
        if (!this.isRunning()) {
          this.startedAt = now2();
          delete this.stoppedAt;
          this.startPolling();
          addEventListener("visibilitychange", this.visibilityDidChange);
          logger_default.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`);
        }
      }
      stop() {
        if (this.isRunning()) {
          this.stoppedAt = now2();
          this.stopPolling();
          removeEventListener("visibilitychange", this.visibilityDidChange);
          logger_default.log("ConnectionMonitor stopped");
        }
      }
      isRunning() {
        return this.startedAt && !this.stoppedAt;
      }
      recordMessage() {
        this.pingedAt = now2();
      }
      recordConnect() {
        this.reconnectAttempts = 0;
        delete this.disconnectedAt;
        logger_default.log("ConnectionMonitor recorded connect");
      }
      recordDisconnect() {
        this.disconnectedAt = now2();
        logger_default.log("ConnectionMonitor recorded disconnect");
      }
      // Private
      startPolling() {
        this.stopPolling();
        this.poll();
      }
      stopPolling() {
        clearTimeout(this.pollTimeout);
      }
      poll() {
        this.pollTimeout = setTimeout(
          () => {
            this.reconnectIfStale();
            this.poll();
          },
          this.getPollInterval()
        );
      }
      getPollInterval() {
        const { staleThreshold, reconnectionBackoffRate } = this.constructor;
        const backoff = Math.pow(1 + reconnectionBackoffRate, Math.min(this.reconnectAttempts, 10));
        const jitterMax = this.reconnectAttempts === 0 ? 1 : reconnectionBackoffRate;
        const jitter = jitterMax * Math.random();
        return staleThreshold * 1e3 * backoff * (1 + jitter);
      }
      reconnectIfStale() {
        if (this.connectionIsStale()) {
          logger_default.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${secondsSince2(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`);
          this.reconnectAttempts++;
          if (this.disconnectedRecently()) {
            logger_default.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${secondsSince2(this.disconnectedAt)} s`);
          } else {
            logger_default.log("ConnectionMonitor reopening");
            this.connection.reopen();
          }
        }
      }
      get refreshedAt() {
        return this.pingedAt ? this.pingedAt : this.startedAt;
      }
      connectionIsStale() {
        return secondsSince2(this.refreshedAt) > this.constructor.staleThreshold;
      }
      disconnectedRecently() {
        return this.disconnectedAt && secondsSince2(this.disconnectedAt) < this.constructor.staleThreshold;
      }
      visibilityDidChange() {
        if (document.visibilityState === "visible") {
          setTimeout(
            () => {
              if (this.connectionIsStale() || !this.connection.isOpen()) {
                logger_default.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`);
                this.connection.reopen();
              }
            },
            200
          );
        }
      }
    };
    ConnectionMonitor2.staleThreshold = 6;
    ConnectionMonitor2.reconnectionBackoffRate = 0.15;
    connection_monitor_default = ConnectionMonitor2;
  }
});

// node_modules/@rails/actioncable/src/internal.js
var internal_default;
var init_internal = __esm({
  "node_modules/@rails/actioncable/src/internal.js"() {
    internal_default = {
      "message_types": {
        "welcome": "welcome",
        "disconnect": "disconnect",
        "ping": "ping",
        "confirmation": "confirm_subscription",
        "rejection": "reject_subscription"
      },
      "disconnect_reasons": {
        "unauthorized": "unauthorized",
        "invalid_request": "invalid_request",
        "server_restart": "server_restart",
        "remote": "remote"
      },
      "default_mount_path": "/cable",
      "protocols": [
        "actioncable-v1-json",
        "actioncable-unsupported"
      ]
    };
  }
});

// node_modules/@rails/actioncable/src/connection.js
var message_types2, protocols2, supportedProtocols2, indexOf2, Connection2, connection_default;
var init_connection = __esm({
  "node_modules/@rails/actioncable/src/connection.js"() {
    init_adapters();
    init_connection_monitor();
    init_internal();
    init_logger();
    ({ message_types: message_types2, protocols: protocols2 } = internal_default);
    supportedProtocols2 = protocols2.slice(0, protocols2.length - 1);
    indexOf2 = [].indexOf;
    Connection2 = class {
      constructor(consumer2) {
        this.open = this.open.bind(this);
        this.consumer = consumer2;
        this.subscriptions = this.consumer.subscriptions;
        this.monitor = new connection_monitor_default(this);
        this.disconnected = true;
      }
      send(data2) {
        if (this.isOpen()) {
          this.webSocket.send(JSON.stringify(data2));
          return true;
        } else {
          return false;
        }
      }
      open() {
        if (this.isActive()) {
          logger_default.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`);
          return false;
        } else {
          const socketProtocols = [...protocols2, ...this.consumer.subprotocols || []];
          logger_default.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${socketProtocols}`);
          if (this.webSocket) {
            this.uninstallEventHandlers();
          }
          this.webSocket = new adapters_default.WebSocket(this.consumer.url, socketProtocols);
          this.installEventHandlers();
          this.monitor.start();
          return true;
        }
      }
      close({ allowReconnect } = { allowReconnect: true }) {
        if (!allowReconnect) {
          this.monitor.stop();
        }
        if (this.isOpen()) {
          return this.webSocket.close();
        }
      }
      reopen() {
        logger_default.log(`Reopening WebSocket, current state is ${this.getState()}`);
        if (this.isActive()) {
          try {
            return this.close();
          } catch (error3) {
            logger_default.log("Failed to reopen WebSocket", error3);
          } finally {
            logger_default.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`);
            setTimeout(this.open, this.constructor.reopenDelay);
          }
        } else {
          return this.open();
        }
      }
      getProtocol() {
        if (this.webSocket) {
          return this.webSocket.protocol;
        }
      }
      isOpen() {
        return this.isState("open");
      }
      isActive() {
        return this.isState("open", "connecting");
      }
      triedToReconnect() {
        return this.monitor.reconnectAttempts > 0;
      }
      // Private
      isProtocolSupported() {
        return indexOf2.call(supportedProtocols2, this.getProtocol()) >= 0;
      }
      isState(...states) {
        return indexOf2.call(states, this.getState()) >= 0;
      }
      getState() {
        if (this.webSocket) {
          for (let state in adapters_default.WebSocket) {
            if (adapters_default.WebSocket[state] === this.webSocket.readyState) {
              return state.toLowerCase();
            }
          }
        }
        return null;
      }
      installEventHandlers() {
        for (let eventName in this.events) {
          const handler4 = this.events[eventName].bind(this);
          this.webSocket[`on${eventName}`] = handler4;
        }
      }
      uninstallEventHandlers() {
        for (let eventName in this.events) {
          this.webSocket[`on${eventName}`] = function() {
          };
        }
      }
    };
    Connection2.reopenDelay = 500;
    Connection2.prototype.events = {
      message(event) {
        if (!this.isProtocolSupported()) {
          return;
        }
        const { identifier, message, reason, reconnect, type } = JSON.parse(event.data);
        this.monitor.recordMessage();
        switch (type) {
          case message_types2.welcome:
            if (this.triedToReconnect()) {
              this.reconnectAttempted = true;
            }
            this.monitor.recordConnect();
            return this.subscriptions.reload();
          case message_types2.disconnect:
            logger_default.log(`Disconnecting. Reason: ${reason}`);
            return this.close({ allowReconnect: reconnect });
          case message_types2.ping:
            return null;
          case message_types2.confirmation:
            this.subscriptions.confirmSubscription(identifier);
            if (this.reconnectAttempted) {
              this.reconnectAttempted = false;
              return this.subscriptions.notify(identifier, "connected", { reconnected: true });
            } else {
              return this.subscriptions.notify(identifier, "connected", { reconnected: false });
            }
          case message_types2.rejection:
            return this.subscriptions.reject(identifier);
          default:
            return this.subscriptions.notify(identifier, "received", message);
        }
      },
      open() {
        logger_default.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`);
        this.disconnected = false;
        if (!this.isProtocolSupported()) {
          logger_default.log("Protocol is unsupported. Stopping monitor and disconnecting.");
          return this.close({ allowReconnect: false });
        }
      },
      close(event) {
        logger_default.log("WebSocket onclose event");
        if (this.disconnected) {
          return;
        }
        this.disconnected = true;
        this.monitor.recordDisconnect();
        return this.subscriptions.notifyAll("disconnected", { willAttemptReconnect: this.monitor.isRunning() });
      },
      error() {
        logger_default.log("WebSocket onerror event");
      }
    };
    connection_default = Connection2;
  }
});

// node_modules/@rails/actioncable/src/subscription.js
var extend2, Subscription2;
var init_subscription = __esm({
  "node_modules/@rails/actioncable/src/subscription.js"() {
    extend2 = function(object, properties) {
      if (properties != null) {
        for (let key in properties) {
          const value = properties[key];
          object[key] = value;
        }
      }
      return object;
    };
    Subscription2 = class {
      constructor(consumer2, params = {}, mixin) {
        this.consumer = consumer2;
        this.identifier = JSON.stringify(params);
        extend2(this, mixin);
      }
      // Perform a channel action with the optional data passed as an attribute
      perform(action, data2 = {}) {
        data2.action = action;
        return this.send(data2);
      }
      send(data2) {
        return this.consumer.send({ command: "message", identifier: this.identifier, data: JSON.stringify(data2) });
      }
      unsubscribe() {
        return this.consumer.subscriptions.remove(this);
      }
    };
  }
});

// node_modules/@rails/actioncable/src/subscription_guarantor.js
var SubscriptionGuarantor2, subscription_guarantor_default;
var init_subscription_guarantor = __esm({
  "node_modules/@rails/actioncable/src/subscription_guarantor.js"() {
    init_logger();
    SubscriptionGuarantor2 = class {
      constructor(subscriptions) {
        this.subscriptions = subscriptions;
        this.pendingSubscriptions = [];
      }
      guarantee(subscription) {
        if (this.pendingSubscriptions.indexOf(subscription) == -1) {
          logger_default.log(`SubscriptionGuarantor guaranteeing ${subscription.identifier}`);
          this.pendingSubscriptions.push(subscription);
        } else {
          logger_default.log(`SubscriptionGuarantor already guaranteeing ${subscription.identifier}`);
        }
        this.startGuaranteeing();
      }
      forget(subscription) {
        logger_default.log(`SubscriptionGuarantor forgetting ${subscription.identifier}`);
        this.pendingSubscriptions = this.pendingSubscriptions.filter((s) => s !== subscription);
      }
      startGuaranteeing() {
        this.stopGuaranteeing();
        this.retrySubscribing();
      }
      stopGuaranteeing() {
        clearTimeout(this.retryTimeout);
      }
      retrySubscribing() {
        this.retryTimeout = setTimeout(
          () => {
            if (this.subscriptions && typeof this.subscriptions.subscribe === "function") {
              this.pendingSubscriptions.map((subscription) => {
                logger_default.log(`SubscriptionGuarantor resubscribing ${subscription.identifier}`);
                this.subscriptions.subscribe(subscription);
              });
            }
          },
          500
        );
      }
    };
    subscription_guarantor_default = SubscriptionGuarantor2;
  }
});

// node_modules/@rails/actioncable/src/subscriptions.js
var Subscriptions2;
var init_subscriptions = __esm({
  "node_modules/@rails/actioncable/src/subscriptions.js"() {
    init_subscription();
    init_subscription_guarantor();
    init_logger();
    Subscriptions2 = class {
      constructor(consumer2) {
        this.consumer = consumer2;
        this.guarantor = new subscription_guarantor_default(this);
        this.subscriptions = [];
      }
      create(channelName, mixin) {
        const channel = channelName;
        const params = typeof channel === "object" ? channel : { channel };
        const subscription = new Subscription2(this.consumer, params, mixin);
        return this.add(subscription);
      }
      // Private
      add(subscription) {
        this.subscriptions.push(subscription);
        this.consumer.ensureActiveConnection();
        this.notify(subscription, "initialized");
        this.subscribe(subscription);
        return subscription;
      }
      remove(subscription) {
        this.forget(subscription);
        if (!this.findAll(subscription.identifier).length) {
          this.sendCommand(subscription, "unsubscribe");
        }
        return subscription;
      }
      reject(identifier) {
        return this.findAll(identifier).map((subscription) => {
          this.forget(subscription);
          this.notify(subscription, "rejected");
          return subscription;
        });
      }
      forget(subscription) {
        this.guarantor.forget(subscription);
        this.subscriptions = this.subscriptions.filter((s) => s !== subscription);
        return subscription;
      }
      findAll(identifier) {
        return this.subscriptions.filter((s) => s.identifier === identifier);
      }
      reload() {
        return this.subscriptions.map((subscription) => this.subscribe(subscription));
      }
      notifyAll(callbackName, ...args) {
        return this.subscriptions.map((subscription) => this.notify(subscription, callbackName, ...args));
      }
      notify(subscription, callbackName, ...args) {
        let subscriptions;
        if (typeof subscription === "string") {
          subscriptions = this.findAll(subscription);
        } else {
          subscriptions = [subscription];
        }
        return subscriptions.map((subscription2) => typeof subscription2[callbackName] === "function" ? subscription2[callbackName](...args) : void 0);
      }
      subscribe(subscription) {
        if (this.sendCommand(subscription, "subscribe")) {
          this.guarantor.guarantee(subscription);
        }
      }
      confirmSubscription(identifier) {
        logger_default.log(`Subscription confirmed ${identifier}`);
        this.findAll(identifier).map((subscription) => this.guarantor.forget(subscription));
      }
      sendCommand(subscription, command) {
        const { identifier } = subscription;
        return this.consumer.send({ command, identifier });
      }
    };
  }
});

// node_modules/@rails/actioncable/src/consumer.js
function createWebSocketURL2(url) {
  if (typeof url === "function") {
    url = url();
  }
  if (url && !/^wss?:/i.test(url)) {
    const a = document.createElement("a");
    a.href = url;
    a.href = a.href;
    a.protocol = a.protocol.replace("http", "ws");
    return a.href;
  } else {
    return url;
  }
}
var Consumer2;
var init_consumer = __esm({
  "node_modules/@rails/actioncable/src/consumer.js"() {
    init_connection();
    init_subscriptions();
    Consumer2 = class {
      constructor(url) {
        this._url = url;
        this.subscriptions = new Subscriptions2(this);
        this.connection = new connection_default(this);
        this.subprotocols = [];
      }
      get url() {
        return createWebSocketURL2(this._url);
      }
      send(data2) {
        return this.connection.send(data2);
      }
      connect() {
        return this.connection.open();
      }
      disconnect() {
        return this.connection.close({ allowReconnect: false });
      }
      ensureActiveConnection() {
        if (!this.connection.isActive()) {
          return this.connection.open();
        }
      }
      addSubProtocol(subprotocol) {
        this.subprotocols = [...this.subprotocols, subprotocol];
      }
    };
  }
});

// node_modules/@rails/actioncable/src/index.js
var src_exports = {};
__export(src_exports, {
  Connection: () => connection_default,
  ConnectionMonitor: () => connection_monitor_default,
  Consumer: () => Consumer2,
  INTERNAL: () => internal_default,
  Subscription: () => Subscription2,
  SubscriptionGuarantor: () => subscription_guarantor_default,
  Subscriptions: () => Subscriptions2,
  adapters: () => adapters_default,
  createConsumer: () => createConsumer2,
  createWebSocketURL: () => createWebSocketURL2,
  getConfig: () => getConfig2,
  logger: () => logger_default
});
function createConsumer2(url = getConfig2("url") || internal_default.default_mount_path) {
  return new Consumer2(url);
}
function getConfig2(name) {
  const element = document.head.querySelector(`meta[name='action-cable-${name}']`);
  if (element) {
    return element.getAttribute("content");
  }
}
var init_src = __esm({
  "node_modules/@rails/actioncable/src/index.js"() {
    init_connection();
    init_connection_monitor();
    init_consumer();
    init_internal();
    init_subscription();
    init_subscriptions();
    init_subscription_guarantor();
    init_adapters();
    init_logger();
  }
});

// app/javascript/form_data_patch.ts
(function() {
  const OriginalFormData = window.FormData;
  window.FormData = class PatchedFormData extends OriginalFormData {
    constructor(form) {
      super(form);
      if (form) {
        const disabledFields = form.querySelectorAll(
          "input[disabled][name], textarea[disabled][name], select[disabled][name]"
        );
        disabledFields.forEach((field) => {
          if (field.name && !this.has(field.name)) {
            if (field instanceof HTMLInputElement) {
              if ((field.type === "checkbox" || field.type === "radio") && !field.checked) {
                return;
              }
              if (field.type === "file" && field.files) {
                Array.from(field.files).forEach((file) => {
                  this.append(field.name, file);
                });
                return;
              }
            }
            this.append(field.name, field.value);
          }
        });
      }
    }
  };
  Object.setPrototypeOf(window.FormData, OriginalFormData);
  Object.setPrototypeOf(window.FormData.prototype, OriginalFormData.prototype);
})();

// node_modules/@rails/activestorage/app/assets/javascripts/activestorage.esm.js
var sparkMd5 = {
  exports: {}
};
(function(module, exports) {
  (function(factory) {
    {
      module.exports = factory();
    }
  })(function(undefined$1) {
    var hex_chr = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "a", "b", "c", "d", "e", "f"];
    function md5cycle(x, k) {
      var a = x[0], b = x[1], c = x[2], d = x[3];
      a += (b & c | ~b & d) + k[0] - 680876936 | 0;
      a = (a << 7 | a >>> 25) + b | 0;
      d += (a & b | ~a & c) + k[1] - 389564586 | 0;
      d = (d << 12 | d >>> 20) + a | 0;
      c += (d & a | ~d & b) + k[2] + 606105819 | 0;
      c = (c << 17 | c >>> 15) + d | 0;
      b += (c & d | ~c & a) + k[3] - 1044525330 | 0;
      b = (b << 22 | b >>> 10) + c | 0;
      a += (b & c | ~b & d) + k[4] - 176418897 | 0;
      a = (a << 7 | a >>> 25) + b | 0;
      d += (a & b | ~a & c) + k[5] + 1200080426 | 0;
      d = (d << 12 | d >>> 20) + a | 0;
      c += (d & a | ~d & b) + k[6] - 1473231341 | 0;
      c = (c << 17 | c >>> 15) + d | 0;
      b += (c & d | ~c & a) + k[7] - 45705983 | 0;
      b = (b << 22 | b >>> 10) + c | 0;
      a += (b & c | ~b & d) + k[8] + 1770035416 | 0;
      a = (a << 7 | a >>> 25) + b | 0;
      d += (a & b | ~a & c) + k[9] - 1958414417 | 0;
      d = (d << 12 | d >>> 20) + a | 0;
      c += (d & a | ~d & b) + k[10] - 42063 | 0;
      c = (c << 17 | c >>> 15) + d | 0;
      b += (c & d | ~c & a) + k[11] - 1990404162 | 0;
      b = (b << 22 | b >>> 10) + c | 0;
      a += (b & c | ~b & d) + k[12] + 1804603682 | 0;
      a = (a << 7 | a >>> 25) + b | 0;
      d += (a & b | ~a & c) + k[13] - 40341101 | 0;
      d = (d << 12 | d >>> 20) + a | 0;
      c += (d & a | ~d & b) + k[14] - 1502002290 | 0;
      c = (c << 17 | c >>> 15) + d | 0;
      b += (c & d | ~c & a) + k[15] + 1236535329 | 0;
      b = (b << 22 | b >>> 10) + c | 0;
      a += (b & d | c & ~d) + k[1] - 165796510 | 0;
      a = (a << 5 | a >>> 27) + b | 0;
      d += (a & c | b & ~c) + k[6] - 1069501632 | 0;
      d = (d << 9 | d >>> 23) + a | 0;
      c += (d & b | a & ~b) + k[11] + 643717713 | 0;
      c = (c << 14 | c >>> 18) + d | 0;
      b += (c & a | d & ~a) + k[0] - 373897302 | 0;
      b = (b << 20 | b >>> 12) + c | 0;
      a += (b & d | c & ~d) + k[5] - 701558691 | 0;
      a = (a << 5 | a >>> 27) + b | 0;
      d += (a & c | b & ~c) + k[10] + 38016083 | 0;
      d = (d << 9 | d >>> 23) + a | 0;
      c += (d & b | a & ~b) + k[15] - 660478335 | 0;
      c = (c << 14 | c >>> 18) + d | 0;
      b += (c & a | d & ~a) + k[4] - 405537848 | 0;
      b = (b << 20 | b >>> 12) + c | 0;
      a += (b & d | c & ~d) + k[9] + 568446438 | 0;
      a = (a << 5 | a >>> 27) + b | 0;
      d += (a & c | b & ~c) + k[14] - 1019803690 | 0;
      d = (d << 9 | d >>> 23) + a | 0;
      c += (d & b | a & ~b) + k[3] - 187363961 | 0;
      c = (c << 14 | c >>> 18) + d | 0;
      b += (c & a | d & ~a) + k[8] + 1163531501 | 0;
      b = (b << 20 | b >>> 12) + c | 0;
      a += (b & d | c & ~d) + k[13] - 1444681467 | 0;
      a = (a << 5 | a >>> 27) + b | 0;
      d += (a & c | b & ~c) + k[2] - 51403784 | 0;
      d = (d << 9 | d >>> 23) + a | 0;
      c += (d & b | a & ~b) + k[7] + 1735328473 | 0;
      c = (c << 14 | c >>> 18) + d | 0;
      b += (c & a | d & ~a) + k[12] - 1926607734 | 0;
      b = (b << 20 | b >>> 12) + c | 0;
      a += (b ^ c ^ d) + k[5] - 378558 | 0;
      a = (a << 4 | a >>> 28) + b | 0;
      d += (a ^ b ^ c) + k[8] - 2022574463 | 0;
      d = (d << 11 | d >>> 21) + a | 0;
      c += (d ^ a ^ b) + k[11] + 1839030562 | 0;
      c = (c << 16 | c >>> 16) + d | 0;
      b += (c ^ d ^ a) + k[14] - 35309556 | 0;
      b = (b << 23 | b >>> 9) + c | 0;
      a += (b ^ c ^ d) + k[1] - 1530992060 | 0;
      a = (a << 4 | a >>> 28) + b | 0;
      d += (a ^ b ^ c) + k[4] + 1272893353 | 0;
      d = (d << 11 | d >>> 21) + a | 0;
      c += (d ^ a ^ b) + k[7] - 155497632 | 0;
      c = (c << 16 | c >>> 16) + d | 0;
      b += (c ^ d ^ a) + k[10] - 1094730640 | 0;
      b = (b << 23 | b >>> 9) + c | 0;
      a += (b ^ c ^ d) + k[13] + 681279174 | 0;
      a = (a << 4 | a >>> 28) + b | 0;
      d += (a ^ b ^ c) + k[0] - 358537222 | 0;
      d = (d << 11 | d >>> 21) + a | 0;
      c += (d ^ a ^ b) + k[3] - 722521979 | 0;
      c = (c << 16 | c >>> 16) + d | 0;
      b += (c ^ d ^ a) + k[6] + 76029189 | 0;
      b = (b << 23 | b >>> 9) + c | 0;
      a += (b ^ c ^ d) + k[9] - 640364487 | 0;
      a = (a << 4 | a >>> 28) + b | 0;
      d += (a ^ b ^ c) + k[12] - 421815835 | 0;
      d = (d << 11 | d >>> 21) + a | 0;
      c += (d ^ a ^ b) + k[15] + 530742520 | 0;
      c = (c << 16 | c >>> 16) + d | 0;
      b += (c ^ d ^ a) + k[2] - 995338651 | 0;
      b = (b << 23 | b >>> 9) + c | 0;
      a += (c ^ (b | ~d)) + k[0] - 198630844 | 0;
      a = (a << 6 | a >>> 26) + b | 0;
      d += (b ^ (a | ~c)) + k[7] + 1126891415 | 0;
      d = (d << 10 | d >>> 22) + a | 0;
      c += (a ^ (d | ~b)) + k[14] - 1416354905 | 0;
      c = (c << 15 | c >>> 17) + d | 0;
      b += (d ^ (c | ~a)) + k[5] - 57434055 | 0;
      b = (b << 21 | b >>> 11) + c | 0;
      a += (c ^ (b | ~d)) + k[12] + 1700485571 | 0;
      a = (a << 6 | a >>> 26) + b | 0;
      d += (b ^ (a | ~c)) + k[3] - 1894986606 | 0;
      d = (d << 10 | d >>> 22) + a | 0;
      c += (a ^ (d | ~b)) + k[10] - 1051523 | 0;
      c = (c << 15 | c >>> 17) + d | 0;
      b += (d ^ (c | ~a)) + k[1] - 2054922799 | 0;
      b = (b << 21 | b >>> 11) + c | 0;
      a += (c ^ (b | ~d)) + k[8] + 1873313359 | 0;
      a = (a << 6 | a >>> 26) + b | 0;
      d += (b ^ (a | ~c)) + k[15] - 30611744 | 0;
      d = (d << 10 | d >>> 22) + a | 0;
      c += (a ^ (d | ~b)) + k[6] - 1560198380 | 0;
      c = (c << 15 | c >>> 17) + d | 0;
      b += (d ^ (c | ~a)) + k[13] + 1309151649 | 0;
      b = (b << 21 | b >>> 11) + c | 0;
      a += (c ^ (b | ~d)) + k[4] - 145523070 | 0;
      a = (a << 6 | a >>> 26) + b | 0;
      d += (b ^ (a | ~c)) + k[11] - 1120210379 | 0;
      d = (d << 10 | d >>> 22) + a | 0;
      c += (a ^ (d | ~b)) + k[2] + 718787259 | 0;
      c = (c << 15 | c >>> 17) + d | 0;
      b += (d ^ (c | ~a)) + k[9] - 343485551 | 0;
      b = (b << 21 | b >>> 11) + c | 0;
      x[0] = a + x[0] | 0;
      x[1] = b + x[1] | 0;
      x[2] = c + x[2] | 0;
      x[3] = d + x[3] | 0;
    }
    function md5blk(s) {
      var md5blks = [], i;
      for (i = 0; i < 64; i += 4) {
        md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);
      }
      return md5blks;
    }
    function md5blk_array(a) {
      var md5blks = [], i;
      for (i = 0; i < 64; i += 4) {
        md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);
      }
      return md5blks;
    }
    function md51(s) {
      var n = s.length, state = [1732584193, -271733879, -1732584194, 271733878], i, length, tail, tmp, lo, hi;
      for (i = 64; i <= n; i += 64) {
        md5cycle(state, md5blk(s.substring(i - 64, i)));
      }
      s = s.substring(i - 64);
      length = s.length;
      tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
      for (i = 0; i < length; i += 1) {
        tail[i >> 2] |= s.charCodeAt(i) << (i % 4 << 3);
      }
      tail[i >> 2] |= 128 << (i % 4 << 3);
      if (i > 55) {
        md5cycle(state, tail);
        for (i = 0; i < 16; i += 1) {
          tail[i] = 0;
        }
      }
      tmp = n * 8;
      tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);
      lo = parseInt(tmp[2], 16);
      hi = parseInt(tmp[1], 16) || 0;
      tail[14] = lo;
      tail[15] = hi;
      md5cycle(state, tail);
      return state;
    }
    function md51_array(a) {
      var n = a.length, state = [1732584193, -271733879, -1732584194, 271733878], i, length, tail, tmp, lo, hi;
      for (i = 64; i <= n; i += 64) {
        md5cycle(state, md5blk_array(a.subarray(i - 64, i)));
      }
      a = i - 64 < n ? a.subarray(i - 64) : new Uint8Array(0);
      length = a.length;
      tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
      for (i = 0; i < length; i += 1) {
        tail[i >> 2] |= a[i] << (i % 4 << 3);
      }
      tail[i >> 2] |= 128 << (i % 4 << 3);
      if (i > 55) {
        md5cycle(state, tail);
        for (i = 0; i < 16; i += 1) {
          tail[i] = 0;
        }
      }
      tmp = n * 8;
      tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);
      lo = parseInt(tmp[2], 16);
      hi = parseInt(tmp[1], 16) || 0;
      tail[14] = lo;
      tail[15] = hi;
      md5cycle(state, tail);
      return state;
    }
    function rhex(n) {
      var s = "", j;
      for (j = 0; j < 4; j += 1) {
        s += hex_chr[n >> j * 8 + 4 & 15] + hex_chr[n >> j * 8 & 15];
      }
      return s;
    }
    function hex(x) {
      var i;
      for (i = 0; i < x.length; i += 1) {
        x[i] = rhex(x[i]);
      }
      return x.join("");
    }
    if (hex(md51("hello")) !== "5d41402abc4b2a76b9719d911017c592") ;
    if (typeof ArrayBuffer !== "undefined" && !ArrayBuffer.prototype.slice) {
      (function() {
        function clamp(val, length) {
          val = val | 0 || 0;
          if (val < 0) {
            return Math.max(val + length, 0);
          }
          return Math.min(val, length);
        }
        ArrayBuffer.prototype.slice = function(from, to) {
          var length = this.byteLength, begin = clamp(from, length), end = length, num, target, targetArray, sourceArray;
          if (to !== undefined$1) {
            end = clamp(to, length);
          }
          if (begin > end) {
            return new ArrayBuffer(0);
          }
          num = end - begin;
          target = new ArrayBuffer(num);
          targetArray = new Uint8Array(target);
          sourceArray = new Uint8Array(this, begin, num);
          targetArray.set(sourceArray);
          return target;
        };
      })();
    }
    function toUtf8(str) {
      if (/[\u0080-\uFFFF]/.test(str)) {
        str = unescape(encodeURIComponent(str));
      }
      return str;
    }
    function utf8Str2ArrayBuffer(str, returnUInt8Array) {
      var length = str.length, buff = new ArrayBuffer(length), arr = new Uint8Array(buff), i;
      for (i = 0; i < length; i += 1) {
        arr[i] = str.charCodeAt(i);
      }
      return returnUInt8Array ? arr : buff;
    }
    function arrayBuffer2Utf8Str(buff) {
      return String.fromCharCode.apply(null, new Uint8Array(buff));
    }
    function concatenateArrayBuffers(first, second, returnUInt8Array) {
      var result = new Uint8Array(first.byteLength + second.byteLength);
      result.set(new Uint8Array(first));
      result.set(new Uint8Array(second), first.byteLength);
      return returnUInt8Array ? result : result.buffer;
    }
    function hexToBinaryString(hex2) {
      var bytes = [], length = hex2.length, x;
      for (x = 0; x < length - 1; x += 2) {
        bytes.push(parseInt(hex2.substr(x, 2), 16));
      }
      return String.fromCharCode.apply(String, bytes);
    }
    function SparkMD52() {
      this.reset();
    }
    SparkMD52.prototype.append = function(str) {
      this.appendBinary(toUtf8(str));
      return this;
    };
    SparkMD52.prototype.appendBinary = function(contents) {
      this._buff += contents;
      this._length += contents.length;
      var length = this._buff.length, i;
      for (i = 64; i <= length; i += 64) {
        md5cycle(this._hash, md5blk(this._buff.substring(i - 64, i)));
      }
      this._buff = this._buff.substring(i - 64);
      return this;
    };
    SparkMD52.prototype.end = function(raw2) {
      var buff = this._buff, length = buff.length, i, tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], ret;
      for (i = 0; i < length; i += 1) {
        tail[i >> 2] |= buff.charCodeAt(i) << (i % 4 << 3);
      }
      this._finish(tail, length);
      ret = hex(this._hash);
      if (raw2) {
        ret = hexToBinaryString(ret);
      }
      this.reset();
      return ret;
    };
    SparkMD52.prototype.reset = function() {
      this._buff = "";
      this._length = 0;
      this._hash = [1732584193, -271733879, -1732584194, 271733878];
      return this;
    };
    SparkMD52.prototype.getState = function() {
      return {
        buff: this._buff,
        length: this._length,
        hash: this._hash.slice()
      };
    };
    SparkMD52.prototype.setState = function(state) {
      this._buff = state.buff;
      this._length = state.length;
      this._hash = state.hash;
      return this;
    };
    SparkMD52.prototype.destroy = function() {
      delete this._hash;
      delete this._buff;
      delete this._length;
    };
    SparkMD52.prototype._finish = function(tail, length) {
      var i = length, tmp, lo, hi;
      tail[i >> 2] |= 128 << (i % 4 << 3);
      if (i > 55) {
        md5cycle(this._hash, tail);
        for (i = 0; i < 16; i += 1) {
          tail[i] = 0;
        }
      }
      tmp = this._length * 8;
      tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);
      lo = parseInt(tmp[2], 16);
      hi = parseInt(tmp[1], 16) || 0;
      tail[14] = lo;
      tail[15] = hi;
      md5cycle(this._hash, tail);
    };
    SparkMD52.hash = function(str, raw2) {
      return SparkMD52.hashBinary(toUtf8(str), raw2);
    };
    SparkMD52.hashBinary = function(content, raw2) {
      var hash = md51(content), ret = hex(hash);
      return raw2 ? hexToBinaryString(ret) : ret;
    };
    SparkMD52.ArrayBuffer = function() {
      this.reset();
    };
    SparkMD52.ArrayBuffer.prototype.append = function(arr) {
      var buff = concatenateArrayBuffers(this._buff.buffer, arr, true), length = buff.length, i;
      this._length += arr.byteLength;
      for (i = 64; i <= length; i += 64) {
        md5cycle(this._hash, md5blk_array(buff.subarray(i - 64, i)));
      }
      this._buff = i - 64 < length ? new Uint8Array(buff.buffer.slice(i - 64)) : new Uint8Array(0);
      return this;
    };
    SparkMD52.ArrayBuffer.prototype.end = function(raw2) {
      var buff = this._buff, length = buff.length, tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], i, ret;
      for (i = 0; i < length; i += 1) {
        tail[i >> 2] |= buff[i] << (i % 4 << 3);
      }
      this._finish(tail, length);
      ret = hex(this._hash);
      if (raw2) {
        ret = hexToBinaryString(ret);
      }
      this.reset();
      return ret;
    };
    SparkMD52.ArrayBuffer.prototype.reset = function() {
      this._buff = new Uint8Array(0);
      this._length = 0;
      this._hash = [1732584193, -271733879, -1732584194, 271733878];
      return this;
    };
    SparkMD52.ArrayBuffer.prototype.getState = function() {
      var state = SparkMD52.prototype.getState.call(this);
      state.buff = arrayBuffer2Utf8Str(state.buff);
      return state;
    };
    SparkMD52.ArrayBuffer.prototype.setState = function(state) {
      state.buff = utf8Str2ArrayBuffer(state.buff, true);
      return SparkMD52.prototype.setState.call(this, state);
    };
    SparkMD52.ArrayBuffer.prototype.destroy = SparkMD52.prototype.destroy;
    SparkMD52.ArrayBuffer.prototype._finish = SparkMD52.prototype._finish;
    SparkMD52.ArrayBuffer.hash = function(arr, raw2) {
      var hash = md51_array(new Uint8Array(arr)), ret = hex(hash);
      return raw2 ? hexToBinaryString(ret) : ret;
    };
    return SparkMD52;
  });
})(sparkMd5);
var SparkMD5 = sparkMd5.exports;
var fileSlice = File.prototype.slice || File.prototype.mozSlice || File.prototype.webkitSlice;
var FileChecksum = class _FileChecksum {
  static create(file, callback) {
    const instance = new _FileChecksum(file);
    instance.create(callback);
  }
  constructor(file) {
    this.file = file;
    this.chunkSize = 2097152;
    this.chunkCount = Math.ceil(this.file.size / this.chunkSize);
    this.chunkIndex = 0;
  }
  create(callback) {
    this.callback = callback;
    this.md5Buffer = new SparkMD5.ArrayBuffer();
    this.fileReader = new FileReader();
    this.fileReader.addEventListener("load", (event) => this.fileReaderDidLoad(event));
    this.fileReader.addEventListener("error", (event) => this.fileReaderDidError(event));
    this.readNextChunk();
  }
  fileReaderDidLoad(event) {
    this.md5Buffer.append(event.target.result);
    if (!this.readNextChunk()) {
      const binaryDigest = this.md5Buffer.end(true);
      const base64digest = btoa(binaryDigest);
      this.callback(null, base64digest);
    }
  }
  fileReaderDidError(event) {
    this.callback(`Error reading ${this.file.name}`);
  }
  readNextChunk() {
    if (this.chunkIndex < this.chunkCount || this.chunkIndex == 0 && this.chunkCount == 0) {
      const start4 = this.chunkIndex * this.chunkSize;
      const end = Math.min(start4 + this.chunkSize, this.file.size);
      const bytes = fileSlice.call(this.file, start4, end);
      this.fileReader.readAsArrayBuffer(bytes);
      this.chunkIndex++;
      return true;
    } else {
      return false;
    }
  }
};
function getMetaValue(name) {
  const element = findElement(document.head, `meta[name="${name}"]`);
  if (element) {
    return element.getAttribute("content");
  }
}
function findElements(root, selector) {
  if (typeof root == "string") {
    selector = root;
    root = document;
  }
  const elements = root.querySelectorAll(selector);
  return toArray(elements);
}
function findElement(root, selector) {
  if (typeof root == "string") {
    selector = root;
    root = document;
  }
  return root.querySelector(selector);
}
function dispatchEvent2(element, type, eventInit = {}) {
  const { disabled } = element;
  const { bubbles, cancelable, detail } = eventInit;
  const event = document.createEvent("Event");
  event.initEvent(type, bubbles || true, cancelable || true);
  event.detail = detail || {};
  try {
    element.disabled = false;
    element.dispatchEvent(event);
  } finally {
    element.disabled = disabled;
  }
  return event;
}
function toArray(value) {
  if (Array.isArray(value)) {
    return value;
  } else if (Array.from) {
    return Array.from(value);
  } else {
    return [].slice.call(value);
  }
}
var BlobRecord = class {
  constructor(file, checksum, url, customHeaders = {}) {
    this.file = file;
    this.attributes = {
      filename: file.name,
      content_type: file.type || "application/octet-stream",
      byte_size: file.size,
      checksum
    };
    this.xhr = new XMLHttpRequest();
    this.xhr.open("POST", url, true);
    this.xhr.responseType = "json";
    this.xhr.setRequestHeader("Content-Type", "application/json");
    this.xhr.setRequestHeader("Accept", "application/json");
    this.xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
    Object.keys(customHeaders).forEach((headerKey) => {
      this.xhr.setRequestHeader(headerKey, customHeaders[headerKey]);
    });
    const csrfToken = getMetaValue("csrf-token");
    if (csrfToken != void 0) {
      this.xhr.setRequestHeader("X-CSRF-Token", csrfToken);
    }
    this.xhr.addEventListener("load", (event) => this.requestDidLoad(event));
    this.xhr.addEventListener("error", (event) => this.requestDidError(event));
  }
  get status() {
    return this.xhr.status;
  }
  get response() {
    const { responseType, response } = this.xhr;
    if (responseType == "json") {
      return response;
    } else {
      return JSON.parse(response);
    }
  }
  create(callback) {
    this.callback = callback;
    this.xhr.send(JSON.stringify({
      blob: this.attributes
    }));
  }
  requestDidLoad(event) {
    if (this.status >= 200 && this.status < 300) {
      const { response } = this;
      const { direct_upload } = response;
      delete response.direct_upload;
      this.attributes = response;
      this.directUploadData = direct_upload;
      this.callback(null, this.toJSON());
    } else {
      this.requestDidError(event);
    }
  }
  requestDidError(event) {
    this.callback(`Error creating Blob for "${this.file.name}". Status: ${this.status}`);
  }
  toJSON() {
    const result = {};
    for (const key in this.attributes) {
      result[key] = this.attributes[key];
    }
    return result;
  }
};
var BlobUpload = class {
  constructor(blob) {
    this.blob = blob;
    this.file = blob.file;
    const { url, headers } = blob.directUploadData;
    this.xhr = new XMLHttpRequest();
    this.xhr.open("PUT", url, true);
    this.xhr.responseType = "text";
    for (const key in headers) {
      this.xhr.setRequestHeader(key, headers[key]);
    }
    this.xhr.addEventListener("load", (event) => this.requestDidLoad(event));
    this.xhr.addEventListener("error", (event) => this.requestDidError(event));
  }
  create(callback) {
    this.callback = callback;
    this.xhr.send(this.file.slice());
  }
  requestDidLoad(event) {
    const { status, response } = this.xhr;
    if (status >= 200 && status < 300) {
      this.callback(null, response);
    } else {
      this.requestDidError(event);
    }
  }
  requestDidError(event) {
    this.callback(`Error storing "${this.file.name}". Status: ${this.xhr.status}`);
  }
};
var id = 0;
var DirectUpload = class {
  constructor(file, url, delegate, customHeaders = {}) {
    this.id = ++id;
    this.file = file;
    this.url = url;
    this.delegate = delegate;
    this.customHeaders = customHeaders;
  }
  create(callback) {
    FileChecksum.create(this.file, (error3, checksum) => {
      if (error3) {
        callback(error3);
        return;
      }
      const blob = new BlobRecord(this.file, checksum, this.url, this.customHeaders);
      notify(this.delegate, "directUploadWillCreateBlobWithXHR", blob.xhr);
      blob.create((error4) => {
        if (error4) {
          callback(error4);
        } else {
          const upload = new BlobUpload(blob);
          notify(this.delegate, "directUploadWillStoreFileWithXHR", upload.xhr);
          upload.create((error5) => {
            if (error5) {
              callback(error5);
            } else {
              callback(null, blob.toJSON());
            }
          });
        }
      });
    });
  }
};
function notify(object, methodName, ...messages) {
  if (object && typeof object[methodName] == "function") {
    return object[methodName](...messages);
  }
}
var DirectUploadController = class {
  constructor(input, file) {
    this.input = input;
    this.file = file;
    this.directUpload = new DirectUpload(this.file, this.url, this);
    this.dispatch("initialize");
  }
  start(callback) {
    const hiddenInput = document.createElement("input");
    hiddenInput.type = "hidden";
    hiddenInput.name = this.input.name;
    this.input.insertAdjacentElement("beforebegin", hiddenInput);
    this.dispatch("start");
    this.directUpload.create((error3, attributes) => {
      if (error3) {
        hiddenInput.parentNode.removeChild(hiddenInput);
        this.dispatchError(error3);
      } else {
        hiddenInput.value = attributes.signed_id;
      }
      this.dispatch("end");
      callback(error3);
    });
  }
  uploadRequestDidProgress(event) {
    const progress = event.loaded / event.total * 100;
    if (progress) {
      this.dispatch("progress", {
        progress
      });
    }
  }
  get url() {
    return this.input.getAttribute("data-direct-upload-url");
  }
  dispatch(name, detail = {}) {
    detail.file = this.file;
    detail.id = this.directUpload.id;
    return dispatchEvent2(this.input, `direct-upload:${name}`, {
      detail
    });
  }
  dispatchError(error3) {
    const event = this.dispatch("error", {
      error: error3
    });
    if (!event.defaultPrevented) {
      alert(error3);
    }
  }
  directUploadWillCreateBlobWithXHR(xhr) {
    this.dispatch("before-blob-request", {
      xhr
    });
  }
  directUploadWillStoreFileWithXHR(xhr) {
    this.dispatch("before-storage-request", {
      xhr
    });
    xhr.upload.addEventListener("progress", (event) => this.uploadRequestDidProgress(event));
  }
};
var inputSelector = "input[type=file][data-direct-upload-url]:not([disabled])";
var DirectUploadsController = class {
  constructor(form) {
    this.form = form;
    this.inputs = findElements(form, inputSelector).filter((input) => input.files.length);
  }
  start(callback) {
    const controllers = this.createDirectUploadControllers();
    const startNextController = () => {
      const controller = controllers.shift();
      if (controller) {
        controller.start((error3) => {
          if (error3) {
            callback(error3);
            this.dispatch("end");
          } else {
            startNextController();
          }
        });
      } else {
        callback();
        this.dispatch("end");
      }
    };
    this.dispatch("start");
    startNextController();
  }
  createDirectUploadControllers() {
    const controllers = [];
    this.inputs.forEach((input) => {
      toArray(input.files).forEach((file) => {
        const controller = new DirectUploadController(input, file);
        controllers.push(controller);
      });
    });
    return controllers;
  }
  dispatch(name, detail = {}) {
    return dispatchEvent2(this.form, `direct-uploads:${name}`, {
      detail
    });
  }
};
var processingAttribute = "data-direct-uploads-processing";
var submitButtonsByForm = /* @__PURE__ */ new WeakMap();
var started = false;
function start() {
  if (!started) {
    started = true;
    document.addEventListener("click", didClick, true);
    document.addEventListener("submit", didSubmitForm, true);
    document.addEventListener("ajax:before", didSubmitRemoteElement);
  }
}
function didClick(event) {
  const button = event.target.closest("button, input");
  if (button && button.type === "submit" && button.form) {
    submitButtonsByForm.set(button.form, button);
  }
}
function didSubmitForm(event) {
  handleFormSubmissionEvent(event);
}
function didSubmitRemoteElement(event) {
  if (event.target.tagName == "FORM") {
    handleFormSubmissionEvent(event);
  }
}
function handleFormSubmissionEvent(event) {
  const form = event.target;
  if (form.hasAttribute(processingAttribute)) {
    event.preventDefault();
    return;
  }
  const controller = new DirectUploadsController(form);
  const { inputs } = controller;
  if (inputs.length) {
    event.preventDefault();
    form.setAttribute(processingAttribute, "");
    inputs.forEach(disable);
    controller.start((error3) => {
      form.removeAttribute(processingAttribute);
      if (error3) {
        inputs.forEach(enable);
      } else {
        submitForm(form);
      }
    });
  }
}
function submitForm(form) {
  let button = submitButtonsByForm.get(form) || findElement(form, "input[type=submit], button[type=submit]");
  if (button) {
    const { disabled } = button;
    button.disabled = false;
    button.focus();
    button.click();
    button.disabled = disabled;
  } else {
    button = document.createElement("input");
    button.type = "submit";
    button.style.display = "none";
    form.appendChild(button);
    button.click();
    form.removeChild(button);
  }
  submitButtonsByForm.delete(form);
}
function disable(input) {
  input.disabled = true;
}
function enable(input) {
  input.disabled = false;
}
function autostart() {
  if (window.ActiveStorage) {
    start();
  }
}
setTimeout(autostart, 1);

// node_modules/alpinejs/dist/module.esm.js
var flushPending = false;
var flushing = false;
var queue = [];
var lastFlushedIndex = -1;
function scheduler(callback) {
  queueJob(callback);
}
function queueJob(job) {
  if (!queue.includes(job))
    queue.push(job);
  queueFlush();
}
function dequeueJob(job) {
  let index = queue.indexOf(job);
  if (index !== -1 && index > lastFlushedIndex)
    queue.splice(index, 1);
}
function queueFlush() {
  if (!flushing && !flushPending) {
    flushPending = true;
    queueMicrotask(flushJobs);
  }
}
function flushJobs() {
  flushPending = false;
  flushing = true;
  for (let i = 0; i < queue.length; i++) {
    queue[i]();
    lastFlushedIndex = i;
  }
  queue.length = 0;
  lastFlushedIndex = -1;
  flushing = false;
}
var reactive;
var effect;
var release;
var raw;
var shouldSchedule = true;
function disableEffectScheduling(callback) {
  shouldSchedule = false;
  callback();
  shouldSchedule = true;
}
function setReactivityEngine(engine) {
  reactive = engine.reactive;
  release = engine.release;
  effect = (callback) => engine.effect(callback, { scheduler: (task) => {
    if (shouldSchedule) {
      scheduler(task);
    } else {
      task();
    }
  } });
  raw = engine.raw;
}
function overrideEffect(override) {
  effect = override;
}
function elementBoundEffect(el) {
  let cleanup2 = () => {
  };
  let wrappedEffect = (callback) => {
    let effectReference = effect(callback);
    if (!el._x_effects) {
      el._x_effects = /* @__PURE__ */ new Set();
      el._x_runEffects = () => {
        el._x_effects.forEach((i) => i());
      };
    }
    el._x_effects.add(effectReference);
    cleanup2 = () => {
      if (effectReference === void 0)
        return;
      el._x_effects.delete(effectReference);
      release(effectReference);
    };
    return effectReference;
  };
  return [wrappedEffect, () => {
    cleanup2();
  }];
}
function watch(getter, callback) {
  let firstTime = true;
  let oldValue;
  let effectReference = effect(() => {
    let value = getter();
    JSON.stringify(value);
    if (!firstTime) {
      queueMicrotask(() => {
        callback(value, oldValue);
        oldValue = value;
      });
    } else {
      oldValue = value;
    }
    firstTime = false;
  });
  return () => release(effectReference);
}
var onAttributeAddeds = [];
var onElRemoveds = [];
var onElAddeds = [];
function onElAdded(callback) {
  onElAddeds.push(callback);
}
function onElRemoved(el, callback) {
  if (typeof callback === "function") {
    if (!el._x_cleanups)
      el._x_cleanups = [];
    el._x_cleanups.push(callback);
  } else {
    callback = el;
    onElRemoveds.push(callback);
  }
}
function onAttributesAdded(callback) {
  onAttributeAddeds.push(callback);
}
function onAttributeRemoved(el, name, callback) {
  if (!el._x_attributeCleanups)
    el._x_attributeCleanups = {};
  if (!el._x_attributeCleanups[name])
    el._x_attributeCleanups[name] = [];
  el._x_attributeCleanups[name].push(callback);
}
function cleanupAttributes(el, names) {
  if (!el._x_attributeCleanups)
    return;
  Object.entries(el._x_attributeCleanups).forEach(([name, value]) => {
    if (names === void 0 || names.includes(name)) {
      value.forEach((i) => i());
      delete el._x_attributeCleanups[name];
    }
  });
}
function cleanupElement(el) {
  el._x_effects?.forEach(dequeueJob);
  while (el._x_cleanups?.length)
    el._x_cleanups.pop()();
}
var observer = new MutationObserver(onMutate);
var currentlyObserving = false;
function startObservingMutations() {
  observer.observe(document, { subtree: true, childList: true, attributes: true, attributeOldValue: true });
  currentlyObserving = true;
}
function stopObservingMutations() {
  flushObserver();
  observer.disconnect();
  currentlyObserving = false;
}
var queuedMutations = [];
function flushObserver() {
  let records = observer.takeRecords();
  queuedMutations.push(() => records.length > 0 && onMutate(records));
  let queueLengthWhenTriggered = queuedMutations.length;
  queueMicrotask(() => {
    if (queuedMutations.length === queueLengthWhenTriggered) {
      while (queuedMutations.length > 0)
        queuedMutations.shift()();
    }
  });
}
function mutateDom(callback) {
  if (!currentlyObserving)
    return callback();
  stopObservingMutations();
  let result = callback();
  startObservingMutations();
  return result;
}
var isCollecting = false;
var deferredMutations = [];
function deferMutations() {
  isCollecting = true;
}
function flushAndStopDeferringMutations() {
  isCollecting = false;
  onMutate(deferredMutations);
  deferredMutations = [];
}
function onMutate(mutations) {
  if (isCollecting) {
    deferredMutations = deferredMutations.concat(mutations);
    return;
  }
  let addedNodes = [];
  let removedNodes = /* @__PURE__ */ new Set();
  let addedAttributes = /* @__PURE__ */ new Map();
  let removedAttributes = /* @__PURE__ */ new Map();
  for (let i = 0; i < mutations.length; i++) {
    if (mutations[i].target._x_ignoreMutationObserver)
      continue;
    if (mutations[i].type === "childList") {
      mutations[i].removedNodes.forEach((node) => {
        if (node.nodeType !== 1)
          return;
        if (!node._x_marker)
          return;
        removedNodes.add(node);
      });
      mutations[i].addedNodes.forEach((node) => {
        if (node.nodeType !== 1)
          return;
        if (removedNodes.has(node)) {
          removedNodes.delete(node);
          return;
        }
        if (node._x_marker)
          return;
        addedNodes.push(node);
      });
    }
    if (mutations[i].type === "attributes") {
      let el = mutations[i].target;
      let name = mutations[i].attributeName;
      let oldValue = mutations[i].oldValue;
      let add22 = () => {
        if (!addedAttributes.has(el))
          addedAttributes.set(el, []);
        addedAttributes.get(el).push({ name, value: el.getAttribute(name) });
      };
      let remove = () => {
        if (!removedAttributes.has(el))
          removedAttributes.set(el, []);
        removedAttributes.get(el).push(name);
      };
      if (el.hasAttribute(name) && oldValue === null) {
        add22();
      } else if (el.hasAttribute(name)) {
        remove();
        add22();
      } else {
        remove();
      }
    }
  }
  removedAttributes.forEach((attrs, el) => {
    cleanupAttributes(el, attrs);
  });
  addedAttributes.forEach((attrs, el) => {
    onAttributeAddeds.forEach((i) => i(el, attrs));
  });
  for (let node of removedNodes) {
    if (addedNodes.some((i) => i.contains(node)))
      continue;
    onElRemoveds.forEach((i) => i(node));
  }
  for (let node of addedNodes) {
    if (!node.isConnected)
      continue;
    onElAddeds.forEach((i) => i(node));
  }
  addedNodes = null;
  removedNodes = null;
  addedAttributes = null;
  removedAttributes = null;
}
function scope(node) {
  return mergeProxies(closestDataStack(node));
}
function addScopeToNode(node, data2, referenceNode) {
  node._x_dataStack = [data2, ...closestDataStack(referenceNode || node)];
  return () => {
    node._x_dataStack = node._x_dataStack.filter((i) => i !== data2);
  };
}
function closestDataStack(node) {
  if (node._x_dataStack)
    return node._x_dataStack;
  if (typeof ShadowRoot === "function" && node instanceof ShadowRoot) {
    return closestDataStack(node.host);
  }
  if (!node.parentNode) {
    return [];
  }
  return closestDataStack(node.parentNode);
}
function mergeProxies(objects) {
  return new Proxy({ objects }, mergeProxyTrap);
}
var mergeProxyTrap = {
  ownKeys({ objects }) {
    return Array.from(
      new Set(objects.flatMap((i) => Object.keys(i)))
    );
  },
  has({ objects }, name) {
    if (name == Symbol.unscopables)
      return false;
    return objects.some(
      (obj) => Object.prototype.hasOwnProperty.call(obj, name) || Reflect.has(obj, name)
    );
  },
  get({ objects }, name, thisProxy) {
    if (name == "toJSON")
      return collapseProxies;
    return Reflect.get(
      objects.find(
        (obj) => Reflect.has(obj, name)
      ) || {},
      name,
      thisProxy
    );
  },
  set({ objects }, name, value, thisProxy) {
    const target = objects.find(
      (obj) => Object.prototype.hasOwnProperty.call(obj, name)
    ) || objects[objects.length - 1];
    const descriptor = Object.getOwnPropertyDescriptor(target, name);
    if (descriptor?.set && descriptor?.get)
      return descriptor.set.call(thisProxy, value) || true;
    return Reflect.set(target, name, value);
  }
};
function collapseProxies() {
  let keys = Reflect.ownKeys(this);
  return keys.reduce((acc, key) => {
    acc[key] = Reflect.get(this, key);
    return acc;
  }, {});
}
function initInterceptors(data2) {
  let isObject2 = (val) => typeof val === "object" && !Array.isArray(val) && val !== null;
  let recurse = (obj, basePath = "") => {
    Object.entries(Object.getOwnPropertyDescriptors(obj)).forEach(([key, { value, enumerable }]) => {
      if (enumerable === false || value === void 0)
        return;
      if (typeof value === "object" && value !== null && value.__v_skip)
        return;
      let path = basePath === "" ? key : `${basePath}.${key}`;
      if (typeof value === "object" && value !== null && value._x_interceptor) {
        obj[key] = value.initialize(data2, path, key);
      } else {
        if (isObject2(value) && value !== obj && !(value instanceof Element)) {
          recurse(value, path);
        }
      }
    });
  };
  return recurse(data2);
}
function interceptor(callback, mutateObj = () => {
}) {
  let obj = {
    initialValue: void 0,
    _x_interceptor: true,
    initialize(data2, path, key) {
      return callback(this.initialValue, () => get(data2, path), (value) => set(data2, path, value), path, key);
    }
  };
  mutateObj(obj);
  return (initialValue) => {
    if (typeof initialValue === "object" && initialValue !== null && initialValue._x_interceptor) {
      let initialize = obj.initialize.bind(obj);
      obj.initialize = (data2, path, key) => {
        let innerValue = initialValue.initialize(data2, path, key);
        obj.initialValue = innerValue;
        return initialize(data2, path, key);
      };
    } else {
      obj.initialValue = initialValue;
    }
    return obj;
  };
}
function get(obj, path) {
  return path.split(".").reduce((carry, segment) => carry[segment], obj);
}
function set(obj, path, value) {
  if (typeof path === "string")
    path = path.split(".");
  if (path.length === 1)
    obj[path[0]] = value;
  else if (path.length === 0)
    throw error;
  else {
    if (obj[path[0]])
      return set(obj[path[0]], path.slice(1), value);
    else {
      obj[path[0]] = {};
      return set(obj[path[0]], path.slice(1), value);
    }
  }
}
var magics = {};
function magic(name, callback) {
  magics[name] = callback;
}
function injectMagics(obj, el) {
  let memoizedUtilities = getUtilities(el);
  Object.entries(magics).forEach(([name, callback]) => {
    Object.defineProperty(obj, `$${name}`, {
      get() {
        return callback(el, memoizedUtilities);
      },
      enumerable: false
    });
  });
  return obj;
}
function getUtilities(el) {
  let [utilities, cleanup2] = getElementBoundUtilities(el);
  let utils = { interceptor, ...utilities };
  onElRemoved(el, cleanup2);
  return utils;
}
function tryCatch(el, expression, callback, ...args) {
  try {
    return callback(...args);
  } catch (e) {
    handleError(e, el, expression);
  }
}
function handleError(error22, el, expression = void 0) {
  error22 = Object.assign(
    error22 ?? { message: "No error message given." },
    { el, expression }
  );
  console.warn(`Alpine Expression Error: ${error22.message}

${expression ? 'Expression: "' + expression + '"\n\n' : ""}`, el);
  setTimeout(() => {
    throw error22;
  }, 0);
}
var shouldAutoEvaluateFunctions = true;
function dontAutoEvaluateFunctions(callback) {
  let cache2 = shouldAutoEvaluateFunctions;
  shouldAutoEvaluateFunctions = false;
  let result = callback();
  shouldAutoEvaluateFunctions = cache2;
  return result;
}
function evaluate(el, expression, extras = {}) {
  let result;
  evaluateLater(el, expression)((value) => result = value, extras);
  return result;
}
function evaluateLater(...args) {
  return theEvaluatorFunction(...args);
}
var theEvaluatorFunction = normalEvaluator;
function setEvaluator(newEvaluator) {
  theEvaluatorFunction = newEvaluator;
}
function normalEvaluator(el, expression) {
  let overriddenMagics = {};
  injectMagics(overriddenMagics, el);
  let dataStack = [overriddenMagics, ...closestDataStack(el)];
  let evaluator = typeof expression === "function" ? generateEvaluatorFromFunction(dataStack, expression) : generateEvaluatorFromString(dataStack, expression, el);
  return tryCatch.bind(null, el, expression, evaluator);
}
function generateEvaluatorFromFunction(dataStack, func) {
  return (receiver = () => {
  }, { scope: scope2 = {}, params = [] } = {}) => {
    let result = func.apply(mergeProxies([scope2, ...dataStack]), params);
    runIfTypeOfFunction(receiver, result);
  };
}
var evaluatorMemo = {};
function generateFunctionFromString(expression, el) {
  if (evaluatorMemo[expression]) {
    return evaluatorMemo[expression];
  }
  let AsyncFunction = Object.getPrototypeOf(async function() {
  }).constructor;
  let rightSideSafeExpression = /^[\n\s]*if.*\(.*\)/.test(expression.trim()) || /^(let|const)\s/.test(expression.trim()) ? `(async()=>{ ${expression} })()` : expression;
  const safeAsyncFunction = () => {
    try {
      let func2 = new AsyncFunction(
        ["__self", "scope"],
        `with (scope) { __self.result = ${rightSideSafeExpression} }; __self.finished = true; return __self.result;`
      );
      Object.defineProperty(func2, "name", {
        value: `[Alpine] ${expression}`
      });
      return func2;
    } catch (error22) {
      handleError(error22, el, expression);
      return Promise.resolve();
    }
  };
  let func = safeAsyncFunction();
  evaluatorMemo[expression] = func;
  return func;
}
function generateEvaluatorFromString(dataStack, expression, el) {
  let func = generateFunctionFromString(expression, el);
  return (receiver = () => {
  }, { scope: scope2 = {}, params = [] } = {}) => {
    func.result = void 0;
    func.finished = false;
    let completeScope = mergeProxies([scope2, ...dataStack]);
    if (typeof func === "function") {
      let promise = func(func, completeScope).catch((error22) => handleError(error22, el, expression));
      if (func.finished) {
        runIfTypeOfFunction(receiver, func.result, completeScope, params, el);
        func.result = void 0;
      } else {
        promise.then((result) => {
          runIfTypeOfFunction(receiver, result, completeScope, params, el);
        }).catch((error22) => handleError(error22, el, expression)).finally(() => func.result = void 0);
      }
    }
  };
}
function runIfTypeOfFunction(receiver, value, scope2, params, el) {
  if (shouldAutoEvaluateFunctions && typeof value === "function") {
    let result = value.apply(scope2, params);
    if (result instanceof Promise) {
      result.then((i) => runIfTypeOfFunction(receiver, i, scope2, params)).catch((error22) => handleError(error22, el, value));
    } else {
      receiver(result);
    }
  } else if (typeof value === "object" && value instanceof Promise) {
    value.then((i) => receiver(i));
  } else {
    receiver(value);
  }
}
var prefixAsString = "x-";
function prefix(subject = "") {
  return prefixAsString + subject;
}
function setPrefix(newPrefix) {
  prefixAsString = newPrefix;
}
var directiveHandlers = {};
function directive(name, callback) {
  directiveHandlers[name] = callback;
  return {
    before(directive2) {
      if (!directiveHandlers[directive2]) {
        console.warn(String.raw`Cannot find directive \`${directive2}\`. \`${name}\` will use the default order of execution`);
        return;
      }
      const pos = directiveOrder.indexOf(directive2);
      directiveOrder.splice(pos >= 0 ? pos : directiveOrder.indexOf("DEFAULT"), 0, name);
    }
  };
}
function directiveExists(name) {
  return Object.keys(directiveHandlers).includes(name);
}
function directives(el, attributes, originalAttributeOverride) {
  attributes = Array.from(attributes);
  if (el._x_virtualDirectives) {
    let vAttributes = Object.entries(el._x_virtualDirectives).map(([name, value]) => ({ name, value }));
    let staticAttributes = attributesOnly(vAttributes);
    vAttributes = vAttributes.map((attribute) => {
      if (staticAttributes.find((attr) => attr.name === attribute.name)) {
        return {
          name: `x-bind:${attribute.name}`,
          value: `"${attribute.value}"`
        };
      }
      return attribute;
    });
    attributes = attributes.concat(vAttributes);
  }
  let transformedAttributeMap = {};
  let directives2 = attributes.map(toTransformedAttributes((newName, oldName) => transformedAttributeMap[newName] = oldName)).filter(outNonAlpineAttributes).map(toParsedDirectives(transformedAttributeMap, originalAttributeOverride)).sort(byPriority);
  return directives2.map((directive2) => {
    return getDirectiveHandler(el, directive2);
  });
}
function attributesOnly(attributes) {
  return Array.from(attributes).map(toTransformedAttributes()).filter((attr) => !outNonAlpineAttributes(attr));
}
var isDeferringHandlers = false;
var directiveHandlerStacks = /* @__PURE__ */ new Map();
var currentHandlerStackKey = Symbol();
function deferHandlingDirectives(callback) {
  isDeferringHandlers = true;
  let key = Symbol();
  currentHandlerStackKey = key;
  directiveHandlerStacks.set(key, []);
  let flushHandlers = () => {
    while (directiveHandlerStacks.get(key).length)
      directiveHandlerStacks.get(key).shift()();
    directiveHandlerStacks.delete(key);
  };
  let stopDeferring = () => {
    isDeferringHandlers = false;
    flushHandlers();
  };
  callback(flushHandlers);
  stopDeferring();
}
function getElementBoundUtilities(el) {
  let cleanups = [];
  let cleanup2 = (callback) => cleanups.push(callback);
  let [effect3, cleanupEffect] = elementBoundEffect(el);
  cleanups.push(cleanupEffect);
  let utilities = {
    Alpine: alpine_default,
    effect: effect3,
    cleanup: cleanup2,
    evaluateLater: evaluateLater.bind(evaluateLater, el),
    evaluate: evaluate.bind(evaluate, el)
  };
  let doCleanup = () => cleanups.forEach((i) => i());
  return [utilities, doCleanup];
}
function getDirectiveHandler(el, directive2) {
  let noop = () => {
  };
  let handler4 = directiveHandlers[directive2.type] || noop;
  let [utilities, cleanup2] = getElementBoundUtilities(el);
  onAttributeRemoved(el, directive2.original, cleanup2);
  let fullHandler = () => {
    if (el._x_ignore || el._x_ignoreSelf)
      return;
    handler4.inline && handler4.inline(el, directive2, utilities);
    handler4 = handler4.bind(handler4, el, directive2, utilities);
    isDeferringHandlers ? directiveHandlerStacks.get(currentHandlerStackKey).push(handler4) : handler4();
  };
  fullHandler.runCleanups = cleanup2;
  return fullHandler;
}
var startingWith = (subject, replacement) => ({ name, value }) => {
  if (name.startsWith(subject))
    name = name.replace(subject, replacement);
  return { name, value };
};
var into = (i) => i;
function toTransformedAttributes(callback = () => {
}) {
  return ({ name, value }) => {
    let { name: newName, value: newValue } = attributeTransformers.reduce((carry, transform) => {
      return transform(carry);
    }, { name, value });
    if (newName !== name)
      callback(newName, name);
    return { name: newName, value: newValue };
  };
}
var attributeTransformers = [];
function mapAttributes(callback) {
  attributeTransformers.push(callback);
}
function outNonAlpineAttributes({ name }) {
  return alpineAttributeRegex().test(name);
}
var alpineAttributeRegex = () => new RegExp(`^${prefixAsString}([^:^.]+)\\b`);
function toParsedDirectives(transformedAttributeMap, originalAttributeOverride) {
  return ({ name, value }) => {
    let typeMatch = name.match(alpineAttributeRegex());
    let valueMatch = name.match(/:([a-zA-Z0-9\-_:]+)/);
    let modifiers = name.match(/\.[^.\]]+(?=[^\]]*$)/g) || [];
    let original = originalAttributeOverride || transformedAttributeMap[name] || name;
    return {
      type: typeMatch ? typeMatch[1] : null,
      value: valueMatch ? valueMatch[1] : null,
      modifiers: modifiers.map((i) => i.replace(".", "")),
      expression: value,
      original
    };
  };
}
var DEFAULT = "DEFAULT";
var directiveOrder = [
  "ignore",
  "ref",
  "data",
  "id",
  "anchor",
  "bind",
  "init",
  "for",
  "model",
  "modelable",
  "transition",
  "show",
  "if",
  DEFAULT,
  "teleport"
];
function byPriority(a, b) {
  let typeA = directiveOrder.indexOf(a.type) === -1 ? DEFAULT : a.type;
  let typeB = directiveOrder.indexOf(b.type) === -1 ? DEFAULT : b.type;
  return directiveOrder.indexOf(typeA) - directiveOrder.indexOf(typeB);
}
function dispatch(el, name, detail = {}) {
  el.dispatchEvent(
    new CustomEvent(name, {
      detail,
      bubbles: true,
      // Allows events to pass the shadow DOM barrier.
      composed: true,
      cancelable: true
    })
  );
}
function walk(el, callback) {
  if (typeof ShadowRoot === "function" && el instanceof ShadowRoot) {
    Array.from(el.children).forEach((el2) => walk(el2, callback));
    return;
  }
  let skip = false;
  callback(el, () => skip = true);
  if (skip)
    return;
  let node = el.firstElementChild;
  while (node) {
    walk(node, callback, false);
    node = node.nextElementSibling;
  }
}
function warn(message, ...args) {
  console.warn(`Alpine Warning: ${message}`, ...args);
}
var started2 = false;
function start2() {
  if (started2)
    warn("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems.");
  started2 = true;
  if (!document.body)
    warn("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?");
  dispatch(document, "alpine:init");
  dispatch(document, "alpine:initializing");
  startObservingMutations();
  onElAdded((el) => initTree(el, walk));
  onElRemoved((el) => destroyTree(el));
  onAttributesAdded((el, attrs) => {
    directives(el, attrs).forEach((handle) => handle());
  });
  let outNestedComponents = (el) => !closestRoot(el.parentElement, true);
  Array.from(document.querySelectorAll(allSelectors().join(","))).filter(outNestedComponents).forEach((el) => {
    initTree(el);
  });
  dispatch(document, "alpine:initialized");
  setTimeout(() => {
    warnAboutMissingPlugins();
  });
}
var rootSelectorCallbacks = [];
var initSelectorCallbacks = [];
function rootSelectors() {
  return rootSelectorCallbacks.map((fn) => fn());
}
function allSelectors() {
  return rootSelectorCallbacks.concat(initSelectorCallbacks).map((fn) => fn());
}
function addRootSelector(selectorCallback) {
  rootSelectorCallbacks.push(selectorCallback);
}
function addInitSelector(selectorCallback) {
  initSelectorCallbacks.push(selectorCallback);
}
function closestRoot(el, includeInitSelectors = false) {
  return findClosest(el, (element) => {
    const selectors = includeInitSelectors ? allSelectors() : rootSelectors();
    if (selectors.some((selector) => element.matches(selector)))
      return true;
  });
}
function findClosest(el, callback) {
  if (!el)
    return;
  if (callback(el))
    return el;
  if (el._x_teleportBack)
    el = el._x_teleportBack;
  if (!el.parentElement)
    return;
  return findClosest(el.parentElement, callback);
}
function isRoot(el) {
  return rootSelectors().some((selector) => el.matches(selector));
}
var initInterceptors2 = [];
function interceptInit(callback) {
  initInterceptors2.push(callback);
}
var markerDispenser = 1;
function initTree(el, walker = walk, intercept = () => {
}) {
  if (findClosest(el, (i) => i._x_ignore))
    return;
  deferHandlingDirectives(() => {
    walker(el, (el2, skip) => {
      if (el2._x_marker)
        return;
      intercept(el2, skip);
      initInterceptors2.forEach((i) => i(el2, skip));
      directives(el2, el2.attributes).forEach((handle) => handle());
      if (!el2._x_ignore)
        el2._x_marker = markerDispenser++;
      el2._x_ignore && skip();
    });
  });
}
function destroyTree(root, walker = walk) {
  walker(root, (el) => {
    cleanupElement(el);
    cleanupAttributes(el);
    delete el._x_marker;
  });
}
function warnAboutMissingPlugins() {
  let pluginDirectives = [
    ["ui", "dialog", ["[x-dialog], [x-popover]"]],
    ["anchor", "anchor", ["[x-anchor]"]],
    ["sort", "sort", ["[x-sort]"]]
  ];
  pluginDirectives.forEach(([plugin2, directive2, selectors]) => {
    if (directiveExists(directive2))
      return;
    selectors.some((selector) => {
      if (document.querySelector(selector)) {
        warn(`found "${selector}", but missing ${plugin2} plugin`);
        return true;
      }
    });
  });
}
var tickStack = [];
var isHolding = false;
function nextTick(callback = () => {
}) {
  queueMicrotask(() => {
    isHolding || setTimeout(() => {
      releaseNextTicks();
    });
  });
  return new Promise((res) => {
    tickStack.push(() => {
      callback();
      res();
    });
  });
}
function releaseNextTicks() {
  isHolding = false;
  while (tickStack.length)
    tickStack.shift()();
}
function holdNextTicks() {
  isHolding = true;
}
function setClasses(el, value) {
  if (Array.isArray(value)) {
    return setClassesFromString(el, value.join(" "));
  } else if (typeof value === "object" && value !== null) {
    return setClassesFromObject(el, value);
  } else if (typeof value === "function") {
    return setClasses(el, value());
  }
  return setClassesFromString(el, value);
}
function setClassesFromString(el, classString) {
  let split = (classString2) => classString2.split(" ").filter(Boolean);
  let missingClasses = (classString2) => classString2.split(" ").filter((i) => !el.classList.contains(i)).filter(Boolean);
  let addClassesAndReturnUndo = (classes) => {
    el.classList.add(...classes);
    return () => {
      el.classList.remove(...classes);
    };
  };
  classString = classString === true ? classString = "" : classString || "";
  return addClassesAndReturnUndo(missingClasses(classString));
}
function setClassesFromObject(el, classObject) {
  let split = (classString) => classString.split(" ").filter(Boolean);
  let forAdd = Object.entries(classObject).flatMap(([classString, bool]) => bool ? split(classString) : false).filter(Boolean);
  let forRemove = Object.entries(classObject).flatMap(([classString, bool]) => !bool ? split(classString) : false).filter(Boolean);
  let added = [];
  let removed = [];
  forRemove.forEach((i) => {
    if (el.classList.contains(i)) {
      el.classList.remove(i);
      removed.push(i);
    }
  });
  forAdd.forEach((i) => {
    if (!el.classList.contains(i)) {
      el.classList.add(i);
      added.push(i);
    }
  });
  return () => {
    removed.forEach((i) => el.classList.add(i));
    added.forEach((i) => el.classList.remove(i));
  };
}
function setStyles(el, value) {
  if (typeof value === "object" && value !== null) {
    return setStylesFromObject(el, value);
  }
  return setStylesFromString(el, value);
}
function setStylesFromObject(el, value) {
  let previousStyles = {};
  Object.entries(value).forEach(([key, value2]) => {
    previousStyles[key] = el.style[key];
    if (!key.startsWith("--")) {
      key = kebabCase(key);
    }
    el.style.setProperty(key, value2);
  });
  setTimeout(() => {
    if (el.style.length === 0) {
      el.removeAttribute("style");
    }
  });
  return () => {
    setStyles(el, previousStyles);
  };
}
function setStylesFromString(el, value) {
  let cache2 = el.getAttribute("style", value);
  el.setAttribute("style", value);
  return () => {
    el.setAttribute("style", cache2 || "");
  };
}
function kebabCase(subject) {
  return subject.replace(/([a-z])([A-Z])/g, "$1-$2").toLowerCase();
}
function once(callback, fallback = () => {
}) {
  let called = false;
  return function() {
    if (!called) {
      called = true;
      callback.apply(this, arguments);
    } else {
      fallback.apply(this, arguments);
    }
  };
}
directive("transition", (el, { value, modifiers, expression }, { evaluate: evaluate2 }) => {
  if (typeof expression === "function")
    expression = evaluate2(expression);
  if (expression === false)
    return;
  if (!expression || typeof expression === "boolean") {
    registerTransitionsFromHelper(el, modifiers, value);
  } else {
    registerTransitionsFromClassString(el, expression, value);
  }
});
function registerTransitionsFromClassString(el, classString, stage) {
  registerTransitionObject(el, setClasses, "");
  let directiveStorageMap = {
    "enter": (classes) => {
      el._x_transition.enter.during = classes;
    },
    "enter-start": (classes) => {
      el._x_transition.enter.start = classes;
    },
    "enter-end": (classes) => {
      el._x_transition.enter.end = classes;
    },
    "leave": (classes) => {
      el._x_transition.leave.during = classes;
    },
    "leave-start": (classes) => {
      el._x_transition.leave.start = classes;
    },
    "leave-end": (classes) => {
      el._x_transition.leave.end = classes;
    }
  };
  directiveStorageMap[stage](classString);
}
function registerTransitionsFromHelper(el, modifiers, stage) {
  registerTransitionObject(el, setStyles);
  let doesntSpecify = !modifiers.includes("in") && !modifiers.includes("out") && !stage;
  let transitioningIn = doesntSpecify || modifiers.includes("in") || ["enter"].includes(stage);
  let transitioningOut = doesntSpecify || modifiers.includes("out") || ["leave"].includes(stage);
  if (modifiers.includes("in") && !doesntSpecify) {
    modifiers = modifiers.filter((i, index) => index < modifiers.indexOf("out"));
  }
  if (modifiers.includes("out") && !doesntSpecify) {
    modifiers = modifiers.filter((i, index) => index > modifiers.indexOf("out"));
  }
  let wantsAll = !modifiers.includes("opacity") && !modifiers.includes("scale");
  let wantsOpacity = wantsAll || modifiers.includes("opacity");
  let wantsScale = wantsAll || modifiers.includes("scale");
  let opacityValue = wantsOpacity ? 0 : 1;
  let scaleValue = wantsScale ? modifierValue(modifiers, "scale", 95) / 100 : 1;
  let delay = modifierValue(modifiers, "delay", 0) / 1e3;
  let origin = modifierValue(modifiers, "origin", "center");
  let property = "opacity, transform";
  let durationIn = modifierValue(modifiers, "duration", 150) / 1e3;
  let durationOut = modifierValue(modifiers, "duration", 75) / 1e3;
  let easing = `cubic-bezier(0.4, 0.0, 0.2, 1)`;
  if (transitioningIn) {
    el._x_transition.enter.during = {
      transformOrigin: origin,
      transitionDelay: `${delay}s`,
      transitionProperty: property,
      transitionDuration: `${durationIn}s`,
      transitionTimingFunction: easing
    };
    el._x_transition.enter.start = {
      opacity: opacityValue,
      transform: `scale(${scaleValue})`
    };
    el._x_transition.enter.end = {
      opacity: 1,
      transform: `scale(1)`
    };
  }
  if (transitioningOut) {
    el._x_transition.leave.during = {
      transformOrigin: origin,
      transitionDelay: `${delay}s`,
      transitionProperty: property,
      transitionDuration: `${durationOut}s`,
      transitionTimingFunction: easing
    };
    el._x_transition.leave.start = {
      opacity: 1,
      transform: `scale(1)`
    };
    el._x_transition.leave.end = {
      opacity: opacityValue,
      transform: `scale(${scaleValue})`
    };
  }
}
function registerTransitionObject(el, setFunction, defaultValue = {}) {
  if (!el._x_transition)
    el._x_transition = {
      enter: { during: defaultValue, start: defaultValue, end: defaultValue },
      leave: { during: defaultValue, start: defaultValue, end: defaultValue },
      in(before = () => {
      }, after = () => {
      }) {
        transition(el, setFunction, {
          during: this.enter.during,
          start: this.enter.start,
          end: this.enter.end
        }, before, after);
      },
      out(before = () => {
      }, after = () => {
      }) {
        transition(el, setFunction, {
          during: this.leave.during,
          start: this.leave.start,
          end: this.leave.end
        }, before, after);
      }
    };
}
window.Element.prototype._x_toggleAndCascadeWithTransitions = function(el, value, show, hide) {
  const nextTick2 = document.visibilityState === "visible" ? requestAnimationFrame : setTimeout;
  let clickAwayCompatibleShow = () => nextTick2(show);
  if (value) {
    if (el._x_transition && (el._x_transition.enter || el._x_transition.leave)) {
      el._x_transition.enter && (Object.entries(el._x_transition.enter.during).length || Object.entries(el._x_transition.enter.start).length || Object.entries(el._x_transition.enter.end).length) ? el._x_transition.in(show) : clickAwayCompatibleShow();
    } else {
      el._x_transition ? el._x_transition.in(show) : clickAwayCompatibleShow();
    }
    return;
  }
  el._x_hidePromise = el._x_transition ? new Promise((resolve, reject) => {
    el._x_transition.out(() => {
    }, () => resolve(hide));
    el._x_transitioning && el._x_transitioning.beforeCancel(() => reject({ isFromCancelledTransition: true }));
  }) : Promise.resolve(hide);
  queueMicrotask(() => {
    let closest = closestHide(el);
    if (closest) {
      if (!closest._x_hideChildren)
        closest._x_hideChildren = [];
      closest._x_hideChildren.push(el);
    } else {
      nextTick2(() => {
        let hideAfterChildren = (el2) => {
          let carry = Promise.all([
            el2._x_hidePromise,
            ...(el2._x_hideChildren || []).map(hideAfterChildren)
          ]).then(([i]) => i?.());
          delete el2._x_hidePromise;
          delete el2._x_hideChildren;
          return carry;
        };
        hideAfterChildren(el).catch((e) => {
          if (!e.isFromCancelledTransition)
            throw e;
        });
      });
    }
  });
};
function closestHide(el) {
  let parent = el.parentNode;
  if (!parent)
    return;
  return parent._x_hidePromise ? parent : closestHide(parent);
}
function transition(el, setFunction, { during, start: start22, end } = {}, before = () => {
}, after = () => {
}) {
  if (el._x_transitioning)
    el._x_transitioning.cancel();
  if (Object.keys(during).length === 0 && Object.keys(start22).length === 0 && Object.keys(end).length === 0) {
    before();
    after();
    return;
  }
  let undoStart, undoDuring, undoEnd;
  performTransition(el, {
    start() {
      undoStart = setFunction(el, start22);
    },
    during() {
      undoDuring = setFunction(el, during);
    },
    before,
    end() {
      undoStart();
      undoEnd = setFunction(el, end);
    },
    after,
    cleanup() {
      undoDuring();
      undoEnd();
    }
  });
}
function performTransition(el, stages) {
  let interrupted, reachedBefore, reachedEnd;
  let finish = once(() => {
    mutateDom(() => {
      interrupted = true;
      if (!reachedBefore)
        stages.before();
      if (!reachedEnd) {
        stages.end();
        releaseNextTicks();
      }
      stages.after();
      if (el.isConnected)
        stages.cleanup();
      delete el._x_transitioning;
    });
  });
  el._x_transitioning = {
    beforeCancels: [],
    beforeCancel(callback) {
      this.beforeCancels.push(callback);
    },
    cancel: once(function() {
      while (this.beforeCancels.length) {
        this.beforeCancels.shift()();
      }
      ;
      finish();
    }),
    finish
  };
  mutateDom(() => {
    stages.start();
    stages.during();
  });
  holdNextTicks();
  requestAnimationFrame(() => {
    if (interrupted)
      return;
    let duration = Number(getComputedStyle(el).transitionDuration.replace(/,.*/, "").replace("s", "")) * 1e3;
    let delay = Number(getComputedStyle(el).transitionDelay.replace(/,.*/, "").replace("s", "")) * 1e3;
    if (duration === 0)
      duration = Number(getComputedStyle(el).animationDuration.replace("s", "")) * 1e3;
    mutateDom(() => {
      stages.before();
    });
    reachedBefore = true;
    requestAnimationFrame(() => {
      if (interrupted)
        return;
      mutateDom(() => {
        stages.end();
      });
      releaseNextTicks();
      setTimeout(el._x_transitioning.finish, duration + delay);
      reachedEnd = true;
    });
  });
}
function modifierValue(modifiers, key, fallback) {
  if (modifiers.indexOf(key) === -1)
    return fallback;
  const rawValue = modifiers[modifiers.indexOf(key) + 1];
  if (!rawValue)
    return fallback;
  if (key === "scale") {
    if (isNaN(rawValue))
      return fallback;
  }
  if (key === "duration" || key === "delay") {
    let match = rawValue.match(/([0-9]+)ms/);
    if (match)
      return match[1];
  }
  if (key === "origin") {
    if (["top", "right", "left", "center", "bottom"].includes(modifiers[modifiers.indexOf(key) + 2])) {
      return [rawValue, modifiers[modifiers.indexOf(key) + 2]].join(" ");
    }
  }
  return rawValue;
}
var isCloning = false;
function skipDuringClone(callback, fallback = () => {
}) {
  return (...args) => isCloning ? fallback(...args) : callback(...args);
}
function onlyDuringClone(callback) {
  return (...args) => isCloning && callback(...args);
}
var interceptors = [];
function interceptClone(callback) {
  interceptors.push(callback);
}
function cloneNode(from, to) {
  interceptors.forEach((i) => i(from, to));
  isCloning = true;
  dontRegisterReactiveSideEffects(() => {
    initTree(to, (el, callback) => {
      callback(el, () => {
      });
    });
  });
  isCloning = false;
}
var isCloningLegacy = false;
function clone(oldEl, newEl) {
  if (!newEl._x_dataStack)
    newEl._x_dataStack = oldEl._x_dataStack;
  isCloning = true;
  isCloningLegacy = true;
  dontRegisterReactiveSideEffects(() => {
    cloneTree(newEl);
  });
  isCloning = false;
  isCloningLegacy = false;
}
function cloneTree(el) {
  let hasRunThroughFirstEl = false;
  let shallowWalker = (el2, callback) => {
    walk(el2, (el3, skip) => {
      if (hasRunThroughFirstEl && isRoot(el3))
        return skip();
      hasRunThroughFirstEl = true;
      callback(el3, skip);
    });
  };
  initTree(el, shallowWalker);
}
function dontRegisterReactiveSideEffects(callback) {
  let cache2 = effect;
  overrideEffect((callback2, el) => {
    let storedEffect = cache2(callback2);
    release(storedEffect);
    return () => {
    };
  });
  callback();
  overrideEffect(cache2);
}
function bind(el, name, value, modifiers = []) {
  if (!el._x_bindings)
    el._x_bindings = reactive({});
  el._x_bindings[name] = value;
  name = modifiers.includes("camel") ? camelCase(name) : name;
  switch (name) {
    case "value":
      bindInputValue(el, value);
      break;
    case "style":
      bindStyles(el, value);
      break;
    case "class":
      bindClasses(el, value);
      break;
    case "selected":
    case "checked":
      bindAttributeAndProperty(el, name, value);
      break;
    default:
      bindAttribute(el, name, value);
      break;
  }
}
function bindInputValue(el, value) {
  if (isRadio(el)) {
    if (el.attributes.value === void 0) {
      el.value = value;
    }
    if (window.fromModel) {
      if (typeof value === "boolean") {
        el.checked = safeParseBoolean(el.value) === value;
      } else {
        el.checked = checkedAttrLooseCompare(el.value, value);
      }
    }
  } else if (isCheckbox(el)) {
    if (Number.isInteger(value)) {
      el.value = value;
    } else if (!Array.isArray(value) && typeof value !== "boolean" && ![null, void 0].includes(value)) {
      el.value = String(value);
    } else {
      if (Array.isArray(value)) {
        el.checked = value.some((val) => checkedAttrLooseCompare(val, el.value));
      } else {
        el.checked = !!value;
      }
    }
  } else if (el.tagName === "SELECT") {
    updateSelect(el, value);
  } else {
    if (el.value === value)
      return;
    el.value = value === void 0 ? "" : value;
  }
}
function bindClasses(el, value) {
  if (el._x_undoAddedClasses)
    el._x_undoAddedClasses();
  el._x_undoAddedClasses = setClasses(el, value);
}
function bindStyles(el, value) {
  if (el._x_undoAddedStyles)
    el._x_undoAddedStyles();
  el._x_undoAddedStyles = setStyles(el, value);
}
function bindAttributeAndProperty(el, name, value) {
  bindAttribute(el, name, value);
  setPropertyIfChanged(el, name, value);
}
function bindAttribute(el, name, value) {
  if ([null, void 0, false].includes(value) && attributeShouldntBePreservedIfFalsy(name)) {
    el.removeAttribute(name);
  } else {
    if (isBooleanAttr(name))
      value = name;
    setIfChanged(el, name, value);
  }
}
function setIfChanged(el, attrName, value) {
  if (el.getAttribute(attrName) != value) {
    el.setAttribute(attrName, value);
  }
}
function setPropertyIfChanged(el, propName, value) {
  if (el[propName] !== value) {
    el[propName] = value;
  }
}
function updateSelect(el, value) {
  const arrayWrappedValue = [].concat(value).map((value2) => {
    return value2 + "";
  });
  Array.from(el.options).forEach((option) => {
    option.selected = arrayWrappedValue.includes(option.value);
  });
}
function camelCase(subject) {
  return subject.toLowerCase().replace(/-(\w)/g, (match, char) => char.toUpperCase());
}
function checkedAttrLooseCompare(valueA, valueB) {
  return valueA == valueB;
}
function safeParseBoolean(rawValue) {
  if ([1, "1", "true", "on", "yes", true].includes(rawValue)) {
    return true;
  }
  if ([0, "0", "false", "off", "no", false].includes(rawValue)) {
    return false;
  }
  return rawValue ? Boolean(rawValue) : null;
}
var booleanAttributes = /* @__PURE__ */ new Set([
  "allowfullscreen",
  "async",
  "autofocus",
  "autoplay",
  "checked",
  "controls",
  "default",
  "defer",
  "disabled",
  "formnovalidate",
  "inert",
  "ismap",
  "itemscope",
  "loop",
  "multiple",
  "muted",
  "nomodule",
  "novalidate",
  "open",
  "playsinline",
  "readonly",
  "required",
  "reversed",
  "selected",
  "shadowrootclonable",
  "shadowrootdelegatesfocus",
  "shadowrootserializable"
]);
function isBooleanAttr(attrName) {
  return booleanAttributes.has(attrName);
}
function attributeShouldntBePreservedIfFalsy(name) {
  return !["aria-pressed", "aria-checked", "aria-expanded", "aria-selected"].includes(name);
}
function getBinding(el, name, fallback) {
  if (el._x_bindings && el._x_bindings[name] !== void 0)
    return el._x_bindings[name];
  return getAttributeBinding(el, name, fallback);
}
function extractProp(el, name, fallback, extract = true) {
  if (el._x_bindings && el._x_bindings[name] !== void 0)
    return el._x_bindings[name];
  if (el._x_inlineBindings && el._x_inlineBindings[name] !== void 0) {
    let binding = el._x_inlineBindings[name];
    binding.extract = extract;
    return dontAutoEvaluateFunctions(() => {
      return evaluate(el, binding.expression);
    });
  }
  return getAttributeBinding(el, name, fallback);
}
function getAttributeBinding(el, name, fallback) {
  let attr = el.getAttribute(name);
  if (attr === null)
    return typeof fallback === "function" ? fallback() : fallback;
  if (attr === "")
    return true;
  if (isBooleanAttr(name)) {
    return !![name, "true"].includes(attr);
  }
  return attr;
}
function isCheckbox(el) {
  return el.type === "checkbox" || el.localName === "ui-checkbox" || el.localName === "ui-switch";
}
function isRadio(el) {
  return el.type === "radio" || el.localName === "ui-radio";
}
function debounce(func, wait) {
  var timeout;
  return function() {
    var context = this, args = arguments;
    var later = function() {
      timeout = null;
      func.apply(context, args);
    };
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
  };
}
function throttle(func, limit) {
  let inThrottle;
  return function() {
    let context = this, args = arguments;
    if (!inThrottle) {
      func.apply(context, args);
      inThrottle = true;
      setTimeout(() => inThrottle = false, limit);
    }
  };
}
function entangle({ get: outerGet, set: outerSet }, { get: innerGet, set: innerSet }) {
  let firstRun = true;
  let outerHash;
  let innerHash;
  let reference = effect(() => {
    let outer = outerGet();
    let inner = innerGet();
    if (firstRun) {
      innerSet(cloneIfObject(outer));
      firstRun = false;
    } else {
      let outerHashLatest = JSON.stringify(outer);
      let innerHashLatest = JSON.stringify(inner);
      if (outerHashLatest !== outerHash) {
        innerSet(cloneIfObject(outer));
      } else if (outerHashLatest !== innerHashLatest) {
        outerSet(cloneIfObject(inner));
      } else {
      }
    }
    outerHash = JSON.stringify(outerGet());
    innerHash = JSON.stringify(innerGet());
  });
  return () => {
    release(reference);
  };
}
function cloneIfObject(value) {
  return typeof value === "object" ? JSON.parse(JSON.stringify(value)) : value;
}
function plugin(callback) {
  let callbacks = Array.isArray(callback) ? callback : [callback];
  callbacks.forEach((i) => i(alpine_default));
}
var stores = {};
var isReactive = false;
function store(name, value) {
  if (!isReactive) {
    stores = reactive(stores);
    isReactive = true;
  }
  if (value === void 0) {
    return stores[name];
  }
  stores[name] = value;
  initInterceptors(stores[name]);
  if (typeof value === "object" && value !== null && value.hasOwnProperty("init") && typeof value.init === "function") {
    stores[name].init();
  }
}
function getStores() {
  return stores;
}
var binds = {};
function bind2(name, bindings) {
  let getBindings = typeof bindings !== "function" ? () => bindings : bindings;
  if (name instanceof Element) {
    return applyBindingsObject(name, getBindings());
  } else {
    binds[name] = getBindings;
  }
  return () => {
  };
}
function injectBindingProviders(obj) {
  Object.entries(binds).forEach(([name, callback]) => {
    Object.defineProperty(obj, name, {
      get() {
        return (...args) => {
          return callback(...args);
        };
      }
    });
  });
  return obj;
}
function applyBindingsObject(el, obj, original) {
  let cleanupRunners = [];
  while (cleanupRunners.length)
    cleanupRunners.pop()();
  let attributes = Object.entries(obj).map(([name, value]) => ({ name, value }));
  let staticAttributes = attributesOnly(attributes);
  attributes = attributes.map((attribute) => {
    if (staticAttributes.find((attr) => attr.name === attribute.name)) {
      return {
        name: `x-bind:${attribute.name}`,
        value: `"${attribute.value}"`
      };
    }
    return attribute;
  });
  directives(el, attributes, original).map((handle) => {
    cleanupRunners.push(handle.runCleanups);
    handle();
  });
  return () => {
    while (cleanupRunners.length)
      cleanupRunners.pop()();
  };
}
var datas = {};
function data(name, callback) {
  datas[name] = callback;
}
function injectDataProviders(obj, context) {
  Object.entries(datas).forEach(([name, callback]) => {
    Object.defineProperty(obj, name, {
      get() {
        return (...args) => {
          return callback.bind(context)(...args);
        };
      },
      enumerable: false
    });
  });
  return obj;
}
var Alpine = {
  get reactive() {
    return reactive;
  },
  get release() {
    return release;
  },
  get effect() {
    return effect;
  },
  get raw() {
    return raw;
  },
  version: "3.14.9",
  flushAndStopDeferringMutations,
  dontAutoEvaluateFunctions,
  disableEffectScheduling,
  startObservingMutations,
  stopObservingMutations,
  setReactivityEngine,
  onAttributeRemoved,
  onAttributesAdded,
  closestDataStack,
  skipDuringClone,
  onlyDuringClone,
  addRootSelector,
  addInitSelector,
  interceptClone,
  addScopeToNode,
  deferMutations,
  mapAttributes,
  evaluateLater,
  interceptInit,
  setEvaluator,
  mergeProxies,
  extractProp,
  findClosest,
  onElRemoved,
  closestRoot,
  destroyTree,
  interceptor,
  // INTERNAL: not public API and is subject to change without major release.
  transition,
  // INTERNAL
  setStyles,
  // INTERNAL
  mutateDom,
  directive,
  entangle,
  throttle,
  debounce,
  evaluate,
  initTree,
  nextTick,
  prefixed: prefix,
  prefix: setPrefix,
  plugin,
  magic,
  store,
  start: start2,
  clone,
  // INTERNAL
  cloneNode,
  // INTERNAL
  bound: getBinding,
  $data: scope,
  watch,
  walk,
  data,
  bind: bind2
};
var alpine_default = Alpine;
function makeMap(str, expectsLowerCase) {
  const map = /* @__PURE__ */ Object.create(null);
  const list = str.split(",");
  for (let i = 0; i < list.length; i++) {
    map[list[i]] = true;
  }
  return expectsLowerCase ? (val) => !!map[val.toLowerCase()] : (val) => !!map[val];
}
var specialBooleanAttrs = `itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`;
var isBooleanAttr2 = /* @__PURE__ */ makeMap(specialBooleanAttrs + `,async,autofocus,autoplay,controls,default,defer,disabled,hidden,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected`);
var EMPTY_OBJ = true ? Object.freeze({}) : {};
var EMPTY_ARR = true ? Object.freeze([]) : [];
var hasOwnProperty = Object.prototype.hasOwnProperty;
var hasOwn = (val, key) => hasOwnProperty.call(val, key);
var isArray = Array.isArray;
var isMap = (val) => toTypeString(val) === "[object Map]";
var isString = (val) => typeof val === "string";
var isSymbol = (val) => typeof val === "symbol";
var isObject = (val) => val !== null && typeof val === "object";
var objectToString = Object.prototype.toString;
var toTypeString = (value) => objectToString.call(value);
var toRawType = (value) => {
  return toTypeString(value).slice(8, -1);
};
var isIntegerKey = (key) => isString(key) && key !== "NaN" && key[0] !== "-" && "" + parseInt(key, 10) === key;
var cacheStringFunction = (fn) => {
  const cache2 = /* @__PURE__ */ Object.create(null);
  return (str) => {
    const hit = cache2[str];
    return hit || (cache2[str] = fn(str));
  };
};
var camelizeRE = /-(\w)/g;
var camelize = cacheStringFunction((str) => {
  return str.replace(camelizeRE, (_, c) => c ? c.toUpperCase() : "");
});
var hyphenateRE = /\B([A-Z])/g;
var hyphenate = cacheStringFunction((str) => str.replace(hyphenateRE, "-$1").toLowerCase());
var capitalize = cacheStringFunction((str) => str.charAt(0).toUpperCase() + str.slice(1));
var toHandlerKey = cacheStringFunction((str) => str ? `on${capitalize(str)}` : ``);
var hasChanged = (value, oldValue) => value !== oldValue && (value === value || oldValue === oldValue);
var targetMap = /* @__PURE__ */ new WeakMap();
var effectStack = [];
var activeEffect;
var ITERATE_KEY = Symbol(true ? "iterate" : "");
var MAP_KEY_ITERATE_KEY = Symbol(true ? "Map key iterate" : "");
function isEffect(fn) {
  return fn && fn._isEffect === true;
}
function effect2(fn, options = EMPTY_OBJ) {
  if (isEffect(fn)) {
    fn = fn.raw;
  }
  const effect3 = createReactiveEffect(fn, options);
  if (!options.lazy) {
    effect3();
  }
  return effect3;
}
function stop(effect3) {
  if (effect3.active) {
    cleanup(effect3);
    if (effect3.options.onStop) {
      effect3.options.onStop();
    }
    effect3.active = false;
  }
}
var uid = 0;
function createReactiveEffect(fn, options) {
  const effect3 = function reactiveEffect() {
    if (!effect3.active) {
      return fn();
    }
    if (!effectStack.includes(effect3)) {
      cleanup(effect3);
      try {
        enableTracking();
        effectStack.push(effect3);
        activeEffect = effect3;
        return fn();
      } finally {
        effectStack.pop();
        resetTracking();
        activeEffect = effectStack[effectStack.length - 1];
      }
    }
  };
  effect3.id = uid++;
  effect3.allowRecurse = !!options.allowRecurse;
  effect3._isEffect = true;
  effect3.active = true;
  effect3.raw = fn;
  effect3.deps = [];
  effect3.options = options;
  return effect3;
}
function cleanup(effect3) {
  const { deps } = effect3;
  if (deps.length) {
    for (let i = 0; i < deps.length; i++) {
      deps[i].delete(effect3);
    }
    deps.length = 0;
  }
}
var shouldTrack = true;
var trackStack = [];
function pauseTracking() {
  trackStack.push(shouldTrack);
  shouldTrack = false;
}
function enableTracking() {
  trackStack.push(shouldTrack);
  shouldTrack = true;
}
function resetTracking() {
  const last = trackStack.pop();
  shouldTrack = last === void 0 ? true : last;
}
function track(target, type, key) {
  if (!shouldTrack || activeEffect === void 0) {
    return;
  }
  let depsMap = targetMap.get(target);
  if (!depsMap) {
    targetMap.set(target, depsMap = /* @__PURE__ */ new Map());
  }
  let dep = depsMap.get(key);
  if (!dep) {
    depsMap.set(key, dep = /* @__PURE__ */ new Set());
  }
  if (!dep.has(activeEffect)) {
    dep.add(activeEffect);
    activeEffect.deps.push(dep);
    if (activeEffect.options.onTrack) {
      activeEffect.options.onTrack({
        effect: activeEffect,
        target,
        type,
        key
      });
    }
  }
}
function trigger(target, type, key, newValue, oldValue, oldTarget) {
  const depsMap = targetMap.get(target);
  if (!depsMap) {
    return;
  }
  const effects = /* @__PURE__ */ new Set();
  const add22 = (effectsToAdd) => {
    if (effectsToAdd) {
      effectsToAdd.forEach((effect3) => {
        if (effect3 !== activeEffect || effect3.allowRecurse) {
          effects.add(effect3);
        }
      });
    }
  };
  if (type === "clear") {
    depsMap.forEach(add22);
  } else if (key === "length" && isArray(target)) {
    depsMap.forEach((dep, key2) => {
      if (key2 === "length" || key2 >= newValue) {
        add22(dep);
      }
    });
  } else {
    if (key !== void 0) {
      add22(depsMap.get(key));
    }
    switch (type) {
      case "add":
        if (!isArray(target)) {
          add22(depsMap.get(ITERATE_KEY));
          if (isMap(target)) {
            add22(depsMap.get(MAP_KEY_ITERATE_KEY));
          }
        } else if (isIntegerKey(key)) {
          add22(depsMap.get("length"));
        }
        break;
      case "delete":
        if (!isArray(target)) {
          add22(depsMap.get(ITERATE_KEY));
          if (isMap(target)) {
            add22(depsMap.get(MAP_KEY_ITERATE_KEY));
          }
        }
        break;
      case "set":
        if (isMap(target)) {
          add22(depsMap.get(ITERATE_KEY));
        }
        break;
    }
  }
  const run = (effect3) => {
    if (effect3.options.onTrigger) {
      effect3.options.onTrigger({
        effect: effect3,
        target,
        key,
        type,
        newValue,
        oldValue,
        oldTarget
      });
    }
    if (effect3.options.scheduler) {
      effect3.options.scheduler(effect3);
    } else {
      effect3();
    }
  };
  effects.forEach(run);
}
var isNonTrackableKeys = /* @__PURE__ */ makeMap(`__proto__,__v_isRef,__isVue`);
var builtInSymbols = new Set(Object.getOwnPropertyNames(Symbol).map((key) => Symbol[key]).filter(isSymbol));
var get2 = /* @__PURE__ */ createGetter();
var readonlyGet = /* @__PURE__ */ createGetter(true);
var arrayInstrumentations = /* @__PURE__ */ createArrayInstrumentations();
function createArrayInstrumentations() {
  const instrumentations = {};
  ["includes", "indexOf", "lastIndexOf"].forEach((key) => {
    instrumentations[key] = function(...args) {
      const arr = toRaw(this);
      for (let i = 0, l = this.length; i < l; i++) {
        track(arr, "get", i + "");
      }
      const res = arr[key](...args);
      if (res === -1 || res === false) {
        return arr[key](...args.map(toRaw));
      } else {
        return res;
      }
    };
  });
  ["push", "pop", "shift", "unshift", "splice"].forEach((key) => {
    instrumentations[key] = function(...args) {
      pauseTracking();
      const res = toRaw(this)[key].apply(this, args);
      resetTracking();
      return res;
    };
  });
  return instrumentations;
}
function createGetter(isReadonly = false, shallow = false) {
  return function get3(target, key, receiver) {
    if (key === "__v_isReactive") {
      return !isReadonly;
    } else if (key === "__v_isReadonly") {
      return isReadonly;
    } else if (key === "__v_raw" && receiver === (isReadonly ? shallow ? shallowReadonlyMap : readonlyMap : shallow ? shallowReactiveMap : reactiveMap).get(target)) {
      return target;
    }
    const targetIsArray = isArray(target);
    if (!isReadonly && targetIsArray && hasOwn(arrayInstrumentations, key)) {
      return Reflect.get(arrayInstrumentations, key, receiver);
    }
    const res = Reflect.get(target, key, receiver);
    if (isSymbol(key) ? builtInSymbols.has(key) : isNonTrackableKeys(key)) {
      return res;
    }
    if (!isReadonly) {
      track(target, "get", key);
    }
    if (shallow) {
      return res;
    }
    if (isRef(res)) {
      const shouldUnwrap = !targetIsArray || !isIntegerKey(key);
      return shouldUnwrap ? res.value : res;
    }
    if (isObject(res)) {
      return isReadonly ? readonly(res) : reactive2(res);
    }
    return res;
  };
}
var set2 = /* @__PURE__ */ createSetter();
function createSetter(shallow = false) {
  return function set3(target, key, value, receiver) {
    let oldValue = target[key];
    if (!shallow) {
      value = toRaw(value);
      oldValue = toRaw(oldValue);
      if (!isArray(target) && isRef(oldValue) && !isRef(value)) {
        oldValue.value = value;
        return true;
      }
    }
    const hadKey = isArray(target) && isIntegerKey(key) ? Number(key) < target.length : hasOwn(target, key);
    const result = Reflect.set(target, key, value, receiver);
    if (target === toRaw(receiver)) {
      if (!hadKey) {
        trigger(target, "add", key, value);
      } else if (hasChanged(value, oldValue)) {
        trigger(target, "set", key, value, oldValue);
      }
    }
    return result;
  };
}
function deleteProperty(target, key) {
  const hadKey = hasOwn(target, key);
  const oldValue = target[key];
  const result = Reflect.deleteProperty(target, key);
  if (result && hadKey) {
    trigger(target, "delete", key, void 0, oldValue);
  }
  return result;
}
function has(target, key) {
  const result = Reflect.has(target, key);
  if (!isSymbol(key) || !builtInSymbols.has(key)) {
    track(target, "has", key);
  }
  return result;
}
function ownKeys(target) {
  track(target, "iterate", isArray(target) ? "length" : ITERATE_KEY);
  return Reflect.ownKeys(target);
}
var mutableHandlers = {
  get: get2,
  set: set2,
  deleteProperty,
  has,
  ownKeys
};
var readonlyHandlers = {
  get: readonlyGet,
  set(target, key) {
    if (true) {
      console.warn(`Set operation on key "${String(key)}" failed: target is readonly.`, target);
    }
    return true;
  },
  deleteProperty(target, key) {
    if (true) {
      console.warn(`Delete operation on key "${String(key)}" failed: target is readonly.`, target);
    }
    return true;
  }
};
var toReactive = (value) => isObject(value) ? reactive2(value) : value;
var toReadonly = (value) => isObject(value) ? readonly(value) : value;
var toShallow = (value) => value;
var getProto = (v) => Reflect.getPrototypeOf(v);
function get$1(target, key, isReadonly = false, isShallow = false) {
  target = target[
    "__v_raw"
    /* RAW */
  ];
  const rawTarget = toRaw(target);
  const rawKey = toRaw(key);
  if (key !== rawKey) {
    !isReadonly && track(rawTarget, "get", key);
  }
  !isReadonly && track(rawTarget, "get", rawKey);
  const { has: has2 } = getProto(rawTarget);
  const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;
  if (has2.call(rawTarget, key)) {
    return wrap(target.get(key));
  } else if (has2.call(rawTarget, rawKey)) {
    return wrap(target.get(rawKey));
  } else if (target !== rawTarget) {
    target.get(key);
  }
}
function has$1(key, isReadonly = false) {
  const target = this[
    "__v_raw"
    /* RAW */
  ];
  const rawTarget = toRaw(target);
  const rawKey = toRaw(key);
  if (key !== rawKey) {
    !isReadonly && track(rawTarget, "has", key);
  }
  !isReadonly && track(rawTarget, "has", rawKey);
  return key === rawKey ? target.has(key) : target.has(key) || target.has(rawKey);
}
function size(target, isReadonly = false) {
  target = target[
    "__v_raw"
    /* RAW */
  ];
  !isReadonly && track(toRaw(target), "iterate", ITERATE_KEY);
  return Reflect.get(target, "size", target);
}
function add(value) {
  value = toRaw(value);
  const target = toRaw(this);
  const proto = getProto(target);
  const hadKey = proto.has.call(target, value);
  if (!hadKey) {
    target.add(value);
    trigger(target, "add", value, value);
  }
  return this;
}
function set$1(key, value) {
  value = toRaw(value);
  const target = toRaw(this);
  const { has: has2, get: get3 } = getProto(target);
  let hadKey = has2.call(target, key);
  if (!hadKey) {
    key = toRaw(key);
    hadKey = has2.call(target, key);
  } else if (true) {
    checkIdentityKeys(target, has2, key);
  }
  const oldValue = get3.call(target, key);
  target.set(key, value);
  if (!hadKey) {
    trigger(target, "add", key, value);
  } else if (hasChanged(value, oldValue)) {
    trigger(target, "set", key, value, oldValue);
  }
  return this;
}
function deleteEntry(key) {
  const target = toRaw(this);
  const { has: has2, get: get3 } = getProto(target);
  let hadKey = has2.call(target, key);
  if (!hadKey) {
    key = toRaw(key);
    hadKey = has2.call(target, key);
  } else if (true) {
    checkIdentityKeys(target, has2, key);
  }
  const oldValue = get3 ? get3.call(target, key) : void 0;
  const result = target.delete(key);
  if (hadKey) {
    trigger(target, "delete", key, void 0, oldValue);
  }
  return result;
}
function clear() {
  const target = toRaw(this);
  const hadItems = target.size !== 0;
  const oldTarget = true ? isMap(target) ? new Map(target) : new Set(target) : void 0;
  const result = target.clear();
  if (hadItems) {
    trigger(target, "clear", void 0, void 0, oldTarget);
  }
  return result;
}
function createForEach(isReadonly, isShallow) {
  return function forEach(callback, thisArg) {
    const observed = this;
    const target = observed[
      "__v_raw"
      /* RAW */
    ];
    const rawTarget = toRaw(target);
    const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;
    !isReadonly && track(rawTarget, "iterate", ITERATE_KEY);
    return target.forEach((value, key) => {
      return callback.call(thisArg, wrap(value), wrap(key), observed);
    });
  };
}
function createIterableMethod(method, isReadonly, isShallow) {
  return function(...args) {
    const target = this[
      "__v_raw"
      /* RAW */
    ];
    const rawTarget = toRaw(target);
    const targetIsMap = isMap(rawTarget);
    const isPair = method === "entries" || method === Symbol.iterator && targetIsMap;
    const isKeyOnly = method === "keys" && targetIsMap;
    const innerIterator = target[method](...args);
    const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;
    !isReadonly && track(rawTarget, "iterate", isKeyOnly ? MAP_KEY_ITERATE_KEY : ITERATE_KEY);
    return {
      // iterator protocol
      next() {
        const { value, done } = innerIterator.next();
        return done ? { value, done } : {
          value: isPair ? [wrap(value[0]), wrap(value[1])] : wrap(value),
          done
        };
      },
      // iterable protocol
      [Symbol.iterator]() {
        return this;
      }
    };
  };
}
function createReadonlyMethod(type) {
  return function(...args) {
    if (true) {
      const key = args[0] ? `on key "${args[0]}" ` : ``;
      console.warn(`${capitalize(type)} operation ${key}failed: target is readonly.`, toRaw(this));
    }
    return type === "delete" ? false : this;
  };
}
function createInstrumentations() {
  const mutableInstrumentations2 = {
    get(key) {
      return get$1(this, key);
    },
    get size() {
      return size(this);
    },
    has: has$1,
    add,
    set: set$1,
    delete: deleteEntry,
    clear,
    forEach: createForEach(false, false)
  };
  const shallowInstrumentations2 = {
    get(key) {
      return get$1(this, key, false, true);
    },
    get size() {
      return size(this);
    },
    has: has$1,
    add,
    set: set$1,
    delete: deleteEntry,
    clear,
    forEach: createForEach(false, true)
  };
  const readonlyInstrumentations2 = {
    get(key) {
      return get$1(this, key, true);
    },
    get size() {
      return size(this, true);
    },
    has(key) {
      return has$1.call(this, key, true);
    },
    add: createReadonlyMethod(
      "add"
      /* ADD */
    ),
    set: createReadonlyMethod(
      "set"
      /* SET */
    ),
    delete: createReadonlyMethod(
      "delete"
      /* DELETE */
    ),
    clear: createReadonlyMethod(
      "clear"
      /* CLEAR */
    ),
    forEach: createForEach(true, false)
  };
  const shallowReadonlyInstrumentations2 = {
    get(key) {
      return get$1(this, key, true, true);
    },
    get size() {
      return size(this, true);
    },
    has(key) {
      return has$1.call(this, key, true);
    },
    add: createReadonlyMethod(
      "add"
      /* ADD */
    ),
    set: createReadonlyMethod(
      "set"
      /* SET */
    ),
    delete: createReadonlyMethod(
      "delete"
      /* DELETE */
    ),
    clear: createReadonlyMethod(
      "clear"
      /* CLEAR */
    ),
    forEach: createForEach(true, true)
  };
  const iteratorMethods = ["keys", "values", "entries", Symbol.iterator];
  iteratorMethods.forEach((method) => {
    mutableInstrumentations2[method] = createIterableMethod(method, false, false);
    readonlyInstrumentations2[method] = createIterableMethod(method, true, false);
    shallowInstrumentations2[method] = createIterableMethod(method, false, true);
    shallowReadonlyInstrumentations2[method] = createIterableMethod(method, true, true);
  });
  return [
    mutableInstrumentations2,
    readonlyInstrumentations2,
    shallowInstrumentations2,
    shallowReadonlyInstrumentations2
  ];
}
var [mutableInstrumentations, readonlyInstrumentations, shallowInstrumentations, shallowReadonlyInstrumentations] = /* @__PURE__ */ createInstrumentations();
function createInstrumentationGetter(isReadonly, shallow) {
  const instrumentations = shallow ? isReadonly ? shallowReadonlyInstrumentations : shallowInstrumentations : isReadonly ? readonlyInstrumentations : mutableInstrumentations;
  return (target, key, receiver) => {
    if (key === "__v_isReactive") {
      return !isReadonly;
    } else if (key === "__v_isReadonly") {
      return isReadonly;
    } else if (key === "__v_raw") {
      return target;
    }
    return Reflect.get(hasOwn(instrumentations, key) && key in target ? instrumentations : target, key, receiver);
  };
}
var mutableCollectionHandlers = {
  get: /* @__PURE__ */ createInstrumentationGetter(false, false)
};
var readonlyCollectionHandlers = {
  get: /* @__PURE__ */ createInstrumentationGetter(true, false)
};
function checkIdentityKeys(target, has2, key) {
  const rawKey = toRaw(key);
  if (rawKey !== key && has2.call(target, rawKey)) {
    const type = toRawType(target);
    console.warn(`Reactive ${type} contains both the raw and reactive versions of the same object${type === `Map` ? ` as keys` : ``}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`);
  }
}
var reactiveMap = /* @__PURE__ */ new WeakMap();
var shallowReactiveMap = /* @__PURE__ */ new WeakMap();
var readonlyMap = /* @__PURE__ */ new WeakMap();
var shallowReadonlyMap = /* @__PURE__ */ new WeakMap();
function targetTypeMap(rawType) {
  switch (rawType) {
    case "Object":
    case "Array":
      return 1;
    case "Map":
    case "Set":
    case "WeakMap":
    case "WeakSet":
      return 2;
    default:
      return 0;
  }
}
function getTargetType(value) {
  return value[
    "__v_skip"
    /* SKIP */
  ] || !Object.isExtensible(value) ? 0 : targetTypeMap(toRawType(value));
}
function reactive2(target) {
  if (target && target[
    "__v_isReadonly"
    /* IS_READONLY */
  ]) {
    return target;
  }
  return createReactiveObject(target, false, mutableHandlers, mutableCollectionHandlers, reactiveMap);
}
function readonly(target) {
  return createReactiveObject(target, true, readonlyHandlers, readonlyCollectionHandlers, readonlyMap);
}
function createReactiveObject(target, isReadonly, baseHandlers, collectionHandlers, proxyMap) {
  if (!isObject(target)) {
    if (true) {
      console.warn(`value cannot be made reactive: ${String(target)}`);
    }
    return target;
  }
  if (target[
    "__v_raw"
    /* RAW */
  ] && !(isReadonly && target[
    "__v_isReactive"
    /* IS_REACTIVE */
  ])) {
    return target;
  }
  const existingProxy = proxyMap.get(target);
  if (existingProxy) {
    return existingProxy;
  }
  const targetType = getTargetType(target);
  if (targetType === 0) {
    return target;
  }
  const proxy = new Proxy(target, targetType === 2 ? collectionHandlers : baseHandlers);
  proxyMap.set(target, proxy);
  return proxy;
}
function toRaw(observed) {
  return observed && toRaw(observed[
    "__v_raw"
    /* RAW */
  ]) || observed;
}
function isRef(r) {
  return Boolean(r && r.__v_isRef === true);
}
magic("nextTick", () => nextTick);
magic("dispatch", (el) => dispatch.bind(dispatch, el));
magic("watch", (el, { evaluateLater: evaluateLater2, cleanup: cleanup2 }) => (key, callback) => {
  let evaluate2 = evaluateLater2(key);
  let getter = () => {
    let value;
    evaluate2((i) => value = i);
    return value;
  };
  let unwatch = watch(getter, callback);
  cleanup2(unwatch);
});
magic("store", getStores);
magic("data", (el) => scope(el));
magic("root", (el) => closestRoot(el));
magic("refs", (el) => {
  if (el._x_refs_proxy)
    return el._x_refs_proxy;
  el._x_refs_proxy = mergeProxies(getArrayOfRefObject(el));
  return el._x_refs_proxy;
});
function getArrayOfRefObject(el) {
  let refObjects = [];
  findClosest(el, (i) => {
    if (i._x_refs)
      refObjects.push(i._x_refs);
  });
  return refObjects;
}
var globalIdMemo = {};
function findAndIncrementId(name) {
  if (!globalIdMemo[name])
    globalIdMemo[name] = 0;
  return ++globalIdMemo[name];
}
function closestIdRoot(el, name) {
  return findClosest(el, (element) => {
    if (element._x_ids && element._x_ids[name])
      return true;
  });
}
function setIdRoot(el, name) {
  if (!el._x_ids)
    el._x_ids = {};
  if (!el._x_ids[name])
    el._x_ids[name] = findAndIncrementId(name);
}
magic("id", (el, { cleanup: cleanup2 }) => (name, key = null) => {
  let cacheKey = `${name}${key ? `-${key}` : ""}`;
  return cacheIdByNameOnElement(el, cacheKey, cleanup2, () => {
    let root = closestIdRoot(el, name);
    let id2 = root ? root._x_ids[name] : findAndIncrementId(name);
    return key ? `${name}-${id2}-${key}` : `${name}-${id2}`;
  });
});
interceptClone((from, to) => {
  if (from._x_id) {
    to._x_id = from._x_id;
  }
});
function cacheIdByNameOnElement(el, cacheKey, cleanup2, callback) {
  if (!el._x_id)
    el._x_id = {};
  if (el._x_id[cacheKey])
    return el._x_id[cacheKey];
  let output = callback();
  el._x_id[cacheKey] = output;
  cleanup2(() => {
    delete el._x_id[cacheKey];
  });
  return output;
}
magic("el", (el) => el);
warnMissingPluginMagic("Focus", "focus", "focus");
warnMissingPluginMagic("Persist", "persist", "persist");
function warnMissingPluginMagic(name, magicName, slug) {
  magic(magicName, (el) => warn(`You can't use [$${magicName}] without first installing the "${name}" plugin here: https://alpinejs.dev/plugins/${slug}`, el));
}
directive("modelable", (el, { expression }, { effect: effect3, evaluateLater: evaluateLater2, cleanup: cleanup2 }) => {
  let func = evaluateLater2(expression);
  let innerGet = () => {
    let result;
    func((i) => result = i);
    return result;
  };
  let evaluateInnerSet = evaluateLater2(`${expression} = __placeholder`);
  let innerSet = (val) => evaluateInnerSet(() => {
  }, { scope: { "__placeholder": val } });
  let initialValue = innerGet();
  innerSet(initialValue);
  queueMicrotask(() => {
    if (!el._x_model)
      return;
    el._x_removeModelListeners["default"]();
    let outerGet = el._x_model.get;
    let outerSet = el._x_model.set;
    let releaseEntanglement = entangle(
      {
        get() {
          return outerGet();
        },
        set(value) {
          outerSet(value);
        }
      },
      {
        get() {
          return innerGet();
        },
        set(value) {
          innerSet(value);
        }
      }
    );
    cleanup2(releaseEntanglement);
  });
});
directive("teleport", (el, { modifiers, expression }, { cleanup: cleanup2 }) => {
  if (el.tagName.toLowerCase() !== "template")
    warn("x-teleport can only be used on a <template> tag", el);
  let target = getTarget(expression);
  let clone2 = el.content.cloneNode(true).firstElementChild;
  el._x_teleport = clone2;
  clone2._x_teleportBack = el;
  el.setAttribute("data-teleport-template", true);
  clone2.setAttribute("data-teleport-target", true);
  if (el._x_forwardEvents) {
    el._x_forwardEvents.forEach((eventName) => {
      clone2.addEventListener(eventName, (e) => {
        e.stopPropagation();
        el.dispatchEvent(new e.constructor(e.type, e));
      });
    });
  }
  addScopeToNode(clone2, {}, el);
  let placeInDom = (clone3, target2, modifiers2) => {
    if (modifiers2.includes("prepend")) {
      target2.parentNode.insertBefore(clone3, target2);
    } else if (modifiers2.includes("append")) {
      target2.parentNode.insertBefore(clone3, target2.nextSibling);
    } else {
      target2.appendChild(clone3);
    }
  };
  mutateDom(() => {
    placeInDom(clone2, target, modifiers);
    skipDuringClone(() => {
      initTree(clone2);
    })();
  });
  el._x_teleportPutBack = () => {
    let target2 = getTarget(expression);
    mutateDom(() => {
      placeInDom(el._x_teleport, target2, modifiers);
    });
  };
  cleanup2(
    () => mutateDom(() => {
      clone2.remove();
      destroyTree(clone2);
    })
  );
});
var teleportContainerDuringClone = document.createElement("div");
function getTarget(expression) {
  let target = skipDuringClone(() => {
    return document.querySelector(expression);
  }, () => {
    return teleportContainerDuringClone;
  })();
  if (!target)
    warn(`Cannot find x-teleport element for selector: "${expression}"`);
  return target;
}
var handler = () => {
};
handler.inline = (el, { modifiers }, { cleanup: cleanup2 }) => {
  modifiers.includes("self") ? el._x_ignoreSelf = true : el._x_ignore = true;
  cleanup2(() => {
    modifiers.includes("self") ? delete el._x_ignoreSelf : delete el._x_ignore;
  });
};
directive("ignore", handler);
directive("effect", skipDuringClone((el, { expression }, { effect: effect3 }) => {
  effect3(evaluateLater(el, expression));
}));
function on(el, event, modifiers, callback) {
  let listenerTarget = el;
  let handler4 = (e) => callback(e);
  let options = {};
  let wrapHandler = (callback2, wrapper) => (e) => wrapper(callback2, e);
  if (modifiers.includes("dot"))
    event = dotSyntax(event);
  if (modifiers.includes("camel"))
    event = camelCase2(event);
  if (modifiers.includes("passive"))
    options.passive = true;
  if (modifiers.includes("capture"))
    options.capture = true;
  if (modifiers.includes("window"))
    listenerTarget = window;
  if (modifiers.includes("document"))
    listenerTarget = document;
  if (modifiers.includes("debounce")) {
    let nextModifier = modifiers[modifiers.indexOf("debounce") + 1] || "invalid-wait";
    let wait = isNumeric(nextModifier.split("ms")[0]) ? Number(nextModifier.split("ms")[0]) : 250;
    handler4 = debounce(handler4, wait);
  }
  if (modifiers.includes("throttle")) {
    let nextModifier = modifiers[modifiers.indexOf("throttle") + 1] || "invalid-wait";
    let wait = isNumeric(nextModifier.split("ms")[0]) ? Number(nextModifier.split("ms")[0]) : 250;
    handler4 = throttle(handler4, wait);
  }
  if (modifiers.includes("prevent"))
    handler4 = wrapHandler(handler4, (next, e) => {
      e.preventDefault();
      next(e);
    });
  if (modifiers.includes("stop"))
    handler4 = wrapHandler(handler4, (next, e) => {
      e.stopPropagation();
      next(e);
    });
  if (modifiers.includes("once")) {
    handler4 = wrapHandler(handler4, (next, e) => {
      next(e);
      listenerTarget.removeEventListener(event, handler4, options);
    });
  }
  if (modifiers.includes("away") || modifiers.includes("outside")) {
    listenerTarget = document;
    handler4 = wrapHandler(handler4, (next, e) => {
      if (el.contains(e.target))
        return;
      if (e.target.isConnected === false)
        return;
      if (el.offsetWidth < 1 && el.offsetHeight < 1)
        return;
      if (el._x_isShown === false)
        return;
      next(e);
    });
  }
  if (modifiers.includes("self"))
    handler4 = wrapHandler(handler4, (next, e) => {
      e.target === el && next(e);
    });
  if (isKeyEvent(event) || isClickEvent(event)) {
    handler4 = wrapHandler(handler4, (next, e) => {
      if (isListeningForASpecificKeyThatHasntBeenPressed(e, modifiers)) {
        return;
      }
      next(e);
    });
  }
  listenerTarget.addEventListener(event, handler4, options);
  return () => {
    listenerTarget.removeEventListener(event, handler4, options);
  };
}
function dotSyntax(subject) {
  return subject.replace(/-/g, ".");
}
function camelCase2(subject) {
  return subject.toLowerCase().replace(/-(\w)/g, (match, char) => char.toUpperCase());
}
function isNumeric(subject) {
  return !Array.isArray(subject) && !isNaN(subject);
}
function kebabCase2(subject) {
  if ([" ", "_"].includes(
    subject
  ))
    return subject;
  return subject.replace(/([a-z])([A-Z])/g, "$1-$2").replace(/[_\s]/, "-").toLowerCase();
}
function isKeyEvent(event) {
  return ["keydown", "keyup"].includes(event);
}
function isClickEvent(event) {
  return ["contextmenu", "click", "mouse"].some((i) => event.includes(i));
}
function isListeningForASpecificKeyThatHasntBeenPressed(e, modifiers) {
  let keyModifiers = modifiers.filter((i) => {
    return !["window", "document", "prevent", "stop", "once", "capture", "self", "away", "outside", "passive"].includes(i);
  });
  if (keyModifiers.includes("debounce")) {
    let debounceIndex = keyModifiers.indexOf("debounce");
    keyModifiers.splice(debounceIndex, isNumeric((keyModifiers[debounceIndex + 1] || "invalid-wait").split("ms")[0]) ? 2 : 1);
  }
  if (keyModifiers.includes("throttle")) {
    let debounceIndex = keyModifiers.indexOf("throttle");
    keyModifiers.splice(debounceIndex, isNumeric((keyModifiers[debounceIndex + 1] || "invalid-wait").split("ms")[0]) ? 2 : 1);
  }
  if (keyModifiers.length === 0)
    return false;
  if (keyModifiers.length === 1 && keyToModifiers(e.key).includes(keyModifiers[0]))
    return false;
  const systemKeyModifiers = ["ctrl", "shift", "alt", "meta", "cmd", "super"];
  const selectedSystemKeyModifiers = systemKeyModifiers.filter((modifier) => keyModifiers.includes(modifier));
  keyModifiers = keyModifiers.filter((i) => !selectedSystemKeyModifiers.includes(i));
  if (selectedSystemKeyModifiers.length > 0) {
    const activelyPressedKeyModifiers = selectedSystemKeyModifiers.filter((modifier) => {
      if (modifier === "cmd" || modifier === "super")
        modifier = "meta";
      return e[`${modifier}Key`];
    });
    if (activelyPressedKeyModifiers.length === selectedSystemKeyModifiers.length) {
      if (isClickEvent(e.type))
        return false;
      if (keyToModifiers(e.key).includes(keyModifiers[0]))
        return false;
    }
  }
  return true;
}
function keyToModifiers(key) {
  if (!key)
    return [];
  key = kebabCase2(key);
  let modifierToKeyMap = {
    "ctrl": "control",
    "slash": "/",
    "space": " ",
    "spacebar": " ",
    "cmd": "meta",
    "esc": "escape",
    "up": "arrow-up",
    "down": "arrow-down",
    "left": "arrow-left",
    "right": "arrow-right",
    "period": ".",
    "comma": ",",
    "equal": "=",
    "minus": "-",
    "underscore": "_"
  };
  modifierToKeyMap[key] = key;
  return Object.keys(modifierToKeyMap).map((modifier) => {
    if (modifierToKeyMap[modifier] === key)
      return modifier;
  }).filter((modifier) => modifier);
}
directive("model", (el, { modifiers, expression }, { effect: effect3, cleanup: cleanup2 }) => {
  let scopeTarget = el;
  if (modifiers.includes("parent")) {
    scopeTarget = el.parentNode;
  }
  let evaluateGet = evaluateLater(scopeTarget, expression);
  let evaluateSet;
  if (typeof expression === "string") {
    evaluateSet = evaluateLater(scopeTarget, `${expression} = __placeholder`);
  } else if (typeof expression === "function" && typeof expression() === "string") {
    evaluateSet = evaluateLater(scopeTarget, `${expression()} = __placeholder`);
  } else {
    evaluateSet = () => {
    };
  }
  let getValue = () => {
    let result;
    evaluateGet((value) => result = value);
    return isGetterSetter(result) ? result.get() : result;
  };
  let setValue = (value) => {
    let result;
    evaluateGet((value2) => result = value2);
    if (isGetterSetter(result)) {
      result.set(value);
    } else {
      evaluateSet(() => {
      }, {
        scope: { "__placeholder": value }
      });
    }
  };
  if (typeof expression === "string" && el.type === "radio") {
    mutateDom(() => {
      if (!el.hasAttribute("name"))
        el.setAttribute("name", expression);
    });
  }
  var event = el.tagName.toLowerCase() === "select" || ["checkbox", "radio"].includes(el.type) || modifiers.includes("lazy") ? "change" : "input";
  let removeListener = isCloning ? () => {
  } : on(el, event, modifiers, (e) => {
    setValue(getInputValue(el, modifiers, e, getValue()));
  });
  if (modifiers.includes("fill")) {
    if ([void 0, null, ""].includes(getValue()) || isCheckbox(el) && Array.isArray(getValue()) || el.tagName.toLowerCase() === "select" && el.multiple) {
      setValue(
        getInputValue(el, modifiers, { target: el }, getValue())
      );
    }
  }
  if (!el._x_removeModelListeners)
    el._x_removeModelListeners = {};
  el._x_removeModelListeners["default"] = removeListener;
  cleanup2(() => el._x_removeModelListeners["default"]());
  if (el.form) {
    let removeResetListener = on(el.form, "reset", [], (e) => {
      nextTick(() => el._x_model && el._x_model.set(getInputValue(el, modifiers, { target: el }, getValue())));
    });
    cleanup2(() => removeResetListener());
  }
  el._x_model = {
    get() {
      return getValue();
    },
    set(value) {
      setValue(value);
    }
  };
  el._x_forceModelUpdate = (value) => {
    if (value === void 0 && typeof expression === "string" && expression.match(/\./))
      value = "";
    window.fromModel = true;
    mutateDom(() => bind(el, "value", value));
    delete window.fromModel;
  };
  effect3(() => {
    let value = getValue();
    if (modifiers.includes("unintrusive") && document.activeElement.isSameNode(el))
      return;
    el._x_forceModelUpdate(value);
  });
});
function getInputValue(el, modifiers, event, currentValue) {
  return mutateDom(() => {
    if (event instanceof CustomEvent && event.detail !== void 0)
      return event.detail !== null && event.detail !== void 0 ? event.detail : event.target.value;
    else if (isCheckbox(el)) {
      if (Array.isArray(currentValue)) {
        let newValue = null;
        if (modifiers.includes("number")) {
          newValue = safeParseNumber(event.target.value);
        } else if (modifiers.includes("boolean")) {
          newValue = safeParseBoolean(event.target.value);
        } else {
          newValue = event.target.value;
        }
        return event.target.checked ? currentValue.includes(newValue) ? currentValue : currentValue.concat([newValue]) : currentValue.filter((el2) => !checkedAttrLooseCompare2(el2, newValue));
      } else {
        return event.target.checked;
      }
    } else if (el.tagName.toLowerCase() === "select" && el.multiple) {
      if (modifiers.includes("number")) {
        return Array.from(event.target.selectedOptions).map((option) => {
          let rawValue = option.value || option.text;
          return safeParseNumber(rawValue);
        });
      } else if (modifiers.includes("boolean")) {
        return Array.from(event.target.selectedOptions).map((option) => {
          let rawValue = option.value || option.text;
          return safeParseBoolean(rawValue);
        });
      }
      return Array.from(event.target.selectedOptions).map((option) => {
        return option.value || option.text;
      });
    } else {
      let newValue;
      if (isRadio(el)) {
        if (event.target.checked) {
          newValue = event.target.value;
        } else {
          newValue = currentValue;
        }
      } else {
        newValue = event.target.value;
      }
      if (modifiers.includes("number")) {
        return safeParseNumber(newValue);
      } else if (modifiers.includes("boolean")) {
        return safeParseBoolean(newValue);
      } else if (modifiers.includes("trim")) {
        return newValue.trim();
      } else {
        return newValue;
      }
    }
  });
}
function safeParseNumber(rawValue) {
  let number = rawValue ? parseFloat(rawValue) : null;
  return isNumeric2(number) ? number : rawValue;
}
function checkedAttrLooseCompare2(valueA, valueB) {
  return valueA == valueB;
}
function isNumeric2(subject) {
  return !Array.isArray(subject) && !isNaN(subject);
}
function isGetterSetter(value) {
  return value !== null && typeof value === "object" && typeof value.get === "function" && typeof value.set === "function";
}
directive("cloak", (el) => queueMicrotask(() => mutateDom(() => el.removeAttribute(prefix("cloak")))));
addInitSelector(() => `[${prefix("init")}]`);
directive("init", skipDuringClone((el, { expression }, { evaluate: evaluate2 }) => {
  if (typeof expression === "string") {
    return !!expression.trim() && evaluate2(expression, {}, false);
  }
  return evaluate2(expression, {}, false);
}));
directive("text", (el, { expression }, { effect: effect3, evaluateLater: evaluateLater2 }) => {
  let evaluate2 = evaluateLater2(expression);
  effect3(() => {
    evaluate2((value) => {
      mutateDom(() => {
        el.textContent = value;
      });
    });
  });
});
directive("html", (el, { expression }, { effect: effect3, evaluateLater: evaluateLater2 }) => {
  let evaluate2 = evaluateLater2(expression);
  effect3(() => {
    evaluate2((value) => {
      mutateDom(() => {
        el.innerHTML = value;
        el._x_ignoreSelf = true;
        initTree(el);
        delete el._x_ignoreSelf;
      });
    });
  });
});
mapAttributes(startingWith(":", into(prefix("bind:"))));
var handler2 = (el, { value, modifiers, expression, original }, { effect: effect3, cleanup: cleanup2 }) => {
  if (!value) {
    let bindingProviders = {};
    injectBindingProviders(bindingProviders);
    let getBindings = evaluateLater(el, expression);
    getBindings((bindings) => {
      applyBindingsObject(el, bindings, original);
    }, { scope: bindingProviders });
    return;
  }
  if (value === "key")
    return storeKeyForXFor(el, expression);
  if (el._x_inlineBindings && el._x_inlineBindings[value] && el._x_inlineBindings[value].extract) {
    return;
  }
  let evaluate2 = evaluateLater(el, expression);
  effect3(() => evaluate2((result) => {
    if (result === void 0 && typeof expression === "string" && expression.match(/\./)) {
      result = "";
    }
    mutateDom(() => bind(el, value, result, modifiers));
  }));
  cleanup2(() => {
    el._x_undoAddedClasses && el._x_undoAddedClasses();
    el._x_undoAddedStyles && el._x_undoAddedStyles();
  });
};
handler2.inline = (el, { value, modifiers, expression }) => {
  if (!value)
    return;
  if (!el._x_inlineBindings)
    el._x_inlineBindings = {};
  el._x_inlineBindings[value] = { expression, extract: false };
};
directive("bind", handler2);
function storeKeyForXFor(el, expression) {
  el._x_keyExpression = expression;
}
addRootSelector(() => `[${prefix("data")}]`);
directive("data", (el, { expression }, { cleanup: cleanup2 }) => {
  if (shouldSkipRegisteringDataDuringClone(el))
    return;
  expression = expression === "" ? "{}" : expression;
  let magicContext = {};
  injectMagics(magicContext, el);
  let dataProviderContext = {};
  injectDataProviders(dataProviderContext, magicContext);
  let data2 = evaluate(el, expression, { scope: dataProviderContext });
  if (data2 === void 0 || data2 === true)
    data2 = {};
  injectMagics(data2, el);
  let reactiveData = reactive(data2);
  initInterceptors(reactiveData);
  let undo = addScopeToNode(el, reactiveData);
  reactiveData["init"] && evaluate(el, reactiveData["init"]);
  cleanup2(() => {
    reactiveData["destroy"] && evaluate(el, reactiveData["destroy"]);
    undo();
  });
});
interceptClone((from, to) => {
  if (from._x_dataStack) {
    to._x_dataStack = from._x_dataStack;
    to.setAttribute("data-has-alpine-state", true);
  }
});
function shouldSkipRegisteringDataDuringClone(el) {
  if (!isCloning)
    return false;
  if (isCloningLegacy)
    return true;
  return el.hasAttribute("data-has-alpine-state");
}
directive("show", (el, { modifiers, expression }, { effect: effect3 }) => {
  let evaluate2 = evaluateLater(el, expression);
  if (!el._x_doHide)
    el._x_doHide = () => {
      mutateDom(() => {
        el.style.setProperty("display", "none", modifiers.includes("important") ? "important" : void 0);
      });
    };
  if (!el._x_doShow)
    el._x_doShow = () => {
      mutateDom(() => {
        if (el.style.length === 1 && el.style.display === "none") {
          el.removeAttribute("style");
        } else {
          el.style.removeProperty("display");
        }
      });
    };
  let hide = () => {
    el._x_doHide();
    el._x_isShown = false;
  };
  let show = () => {
    el._x_doShow();
    el._x_isShown = true;
  };
  let clickAwayCompatibleShow = () => setTimeout(show);
  let toggle = once(
    (value) => value ? show() : hide(),
    (value) => {
      if (typeof el._x_toggleAndCascadeWithTransitions === "function") {
        el._x_toggleAndCascadeWithTransitions(el, value, show, hide);
      } else {
        value ? clickAwayCompatibleShow() : hide();
      }
    }
  );
  let oldValue;
  let firstTime = true;
  effect3(() => evaluate2((value) => {
    if (!firstTime && value === oldValue)
      return;
    if (modifiers.includes("immediate"))
      value ? clickAwayCompatibleShow() : hide();
    toggle(value);
    oldValue = value;
    firstTime = false;
  }));
});
directive("for", (el, { expression }, { effect: effect3, cleanup: cleanup2 }) => {
  let iteratorNames = parseForExpression(expression);
  let evaluateItems = evaluateLater(el, iteratorNames.items);
  let evaluateKey = evaluateLater(
    el,
    // the x-bind:key expression is stored for our use instead of evaluated.
    el._x_keyExpression || "index"
  );
  el._x_prevKeys = [];
  el._x_lookup = {};
  effect3(() => loop(el, iteratorNames, evaluateItems, evaluateKey));
  cleanup2(() => {
    Object.values(el._x_lookup).forEach((el2) => mutateDom(
      () => {
        destroyTree(el2);
        el2.remove();
      }
    ));
    delete el._x_prevKeys;
    delete el._x_lookup;
  });
});
function loop(el, iteratorNames, evaluateItems, evaluateKey) {
  let isObject2 = (i) => typeof i === "object" && !Array.isArray(i);
  let templateEl = el;
  evaluateItems((items) => {
    if (isNumeric3(items) && items >= 0) {
      items = Array.from(Array(items).keys(), (i) => i + 1);
    }
    if (items === void 0)
      items = [];
    let lookup = el._x_lookup;
    let prevKeys = el._x_prevKeys;
    let scopes = [];
    let keys = [];
    if (isObject2(items)) {
      items = Object.entries(items).map(([key, value]) => {
        let scope2 = getIterationScopeVariables(iteratorNames, value, key, items);
        evaluateKey((value2) => {
          if (keys.includes(value2))
            warn("Duplicate key on x-for", el);
          keys.push(value2);
        }, { scope: { index: key, ...scope2 } });
        scopes.push(scope2);
      });
    } else {
      for (let i = 0; i < items.length; i++) {
        let scope2 = getIterationScopeVariables(iteratorNames, items[i], i, items);
        evaluateKey((value) => {
          if (keys.includes(value))
            warn("Duplicate key on x-for", el);
          keys.push(value);
        }, { scope: { index: i, ...scope2 } });
        scopes.push(scope2);
      }
    }
    let adds = [];
    let moves = [];
    let removes = [];
    let sames = [];
    for (let i = 0; i < prevKeys.length; i++) {
      let key = prevKeys[i];
      if (keys.indexOf(key) === -1)
        removes.push(key);
    }
    prevKeys = prevKeys.filter((key) => !removes.includes(key));
    let lastKey = "template";
    for (let i = 0; i < keys.length; i++) {
      let key = keys[i];
      let prevIndex = prevKeys.indexOf(key);
      if (prevIndex === -1) {
        prevKeys.splice(i, 0, key);
        adds.push([lastKey, i]);
      } else if (prevIndex !== i) {
        let keyInSpot = prevKeys.splice(i, 1)[0];
        let keyForSpot = prevKeys.splice(prevIndex - 1, 1)[0];
        prevKeys.splice(i, 0, keyForSpot);
        prevKeys.splice(prevIndex, 0, keyInSpot);
        moves.push([keyInSpot, keyForSpot]);
      } else {
        sames.push(key);
      }
      lastKey = key;
    }
    for (let i = 0; i < removes.length; i++) {
      let key = removes[i];
      if (!(key in lookup))
        continue;
      mutateDom(() => {
        destroyTree(lookup[key]);
        lookup[key].remove();
      });
      delete lookup[key];
    }
    for (let i = 0; i < moves.length; i++) {
      let [keyInSpot, keyForSpot] = moves[i];
      let elInSpot = lookup[keyInSpot];
      let elForSpot = lookup[keyForSpot];
      let marker = document.createElement("div");
      mutateDom(() => {
        if (!elForSpot)
          warn(`x-for ":key" is undefined or invalid`, templateEl, keyForSpot, lookup);
        elForSpot.after(marker);
        elInSpot.after(elForSpot);
        elForSpot._x_currentIfEl && elForSpot.after(elForSpot._x_currentIfEl);
        marker.before(elInSpot);
        elInSpot._x_currentIfEl && elInSpot.after(elInSpot._x_currentIfEl);
        marker.remove();
      });
      elForSpot._x_refreshXForScope(scopes[keys.indexOf(keyForSpot)]);
    }
    for (let i = 0; i < adds.length; i++) {
      let [lastKey2, index] = adds[i];
      let lastEl = lastKey2 === "template" ? templateEl : lookup[lastKey2];
      if (lastEl._x_currentIfEl)
        lastEl = lastEl._x_currentIfEl;
      let scope2 = scopes[index];
      let key = keys[index];
      let clone2 = document.importNode(templateEl.content, true).firstElementChild;
      let reactiveScope = reactive(scope2);
      addScopeToNode(clone2, reactiveScope, templateEl);
      clone2._x_refreshXForScope = (newScope) => {
        Object.entries(newScope).forEach(([key2, value]) => {
          reactiveScope[key2] = value;
        });
      };
      mutateDom(() => {
        lastEl.after(clone2);
        skipDuringClone(() => initTree(clone2))();
      });
      if (typeof key === "object") {
        warn("x-for key cannot be an object, it must be a string or an integer", templateEl);
      }
      lookup[key] = clone2;
    }
    for (let i = 0; i < sames.length; i++) {
      lookup[sames[i]]._x_refreshXForScope(scopes[keys.indexOf(sames[i])]);
    }
    templateEl._x_prevKeys = keys;
  });
}
function parseForExpression(expression) {
  let forIteratorRE = /,([^,\}\]]*)(?:,([^,\}\]]*))?$/;
  let stripParensRE = /^\s*\(|\)\s*$/g;
  let forAliasRE = /([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/;
  let inMatch = expression.match(forAliasRE);
  if (!inMatch)
    return;
  let res = {};
  res.items = inMatch[2].trim();
  let item = inMatch[1].replace(stripParensRE, "").trim();
  let iteratorMatch = item.match(forIteratorRE);
  if (iteratorMatch) {
    res.item = item.replace(forIteratorRE, "").trim();
    res.index = iteratorMatch[1].trim();
    if (iteratorMatch[2]) {
      res.collection = iteratorMatch[2].trim();
    }
  } else {
    res.item = item;
  }
  return res;
}
function getIterationScopeVariables(iteratorNames, item, index, items) {
  let scopeVariables = {};
  if (/^\[.*\]$/.test(iteratorNames.item) && Array.isArray(item)) {
    let names = iteratorNames.item.replace("[", "").replace("]", "").split(",").map((i) => i.trim());
    names.forEach((name, i) => {
      scopeVariables[name] = item[i];
    });
  } else if (/^\{.*\}$/.test(iteratorNames.item) && !Array.isArray(item) && typeof item === "object") {
    let names = iteratorNames.item.replace("{", "").replace("}", "").split(",").map((i) => i.trim());
    names.forEach((name) => {
      scopeVariables[name] = item[name];
    });
  } else {
    scopeVariables[iteratorNames.item] = item;
  }
  if (iteratorNames.index)
    scopeVariables[iteratorNames.index] = index;
  if (iteratorNames.collection)
    scopeVariables[iteratorNames.collection] = items;
  return scopeVariables;
}
function isNumeric3(subject) {
  return !Array.isArray(subject) && !isNaN(subject);
}
function handler3() {
}
handler3.inline = (el, { expression }, { cleanup: cleanup2 }) => {
  let root = closestRoot(el);
  if (!root._x_refs)
    root._x_refs = {};
  root._x_refs[expression] = el;
  cleanup2(() => delete root._x_refs[expression]);
};
directive("ref", handler3);
directive("if", (el, { expression }, { effect: effect3, cleanup: cleanup2 }) => {
  if (el.tagName.toLowerCase() !== "template")
    warn("x-if can only be used on a <template> tag", el);
  let evaluate2 = evaluateLater(el, expression);
  let show = () => {
    if (el._x_currentIfEl)
      return el._x_currentIfEl;
    let clone2 = el.content.cloneNode(true).firstElementChild;
    addScopeToNode(clone2, {}, el);
    mutateDom(() => {
      el.after(clone2);
      skipDuringClone(() => initTree(clone2))();
    });
    el._x_currentIfEl = clone2;
    el._x_undoIf = () => {
      mutateDom(() => {
        destroyTree(clone2);
        clone2.remove();
      });
      delete el._x_currentIfEl;
    };
    return clone2;
  };
  let hide = () => {
    if (!el._x_undoIf)
      return;
    el._x_undoIf();
    delete el._x_undoIf;
  };
  effect3(() => evaluate2((value) => {
    value ? show() : hide();
  }));
  cleanup2(() => el._x_undoIf && el._x_undoIf());
});
directive("id", (el, { expression }, { evaluate: evaluate2 }) => {
  let names = evaluate2(expression);
  names.forEach((name) => setIdRoot(el, name));
});
interceptClone((from, to) => {
  if (from._x_ids) {
    to._x_ids = from._x_ids;
  }
});
mapAttributes(startingWith("@", into(prefix("on:"))));
directive("on", skipDuringClone((el, { value, modifiers, expression }, { cleanup: cleanup2 }) => {
  let evaluate2 = expression ? evaluateLater(el, expression) : () => {
  };
  if (el.tagName.toLowerCase() === "template") {
    if (!el._x_forwardEvents)
      el._x_forwardEvents = [];
    if (!el._x_forwardEvents.includes(value))
      el._x_forwardEvents.push(value);
  }
  let removeListener = on(el, value, modifiers, (e) => {
    evaluate2(() => {
    }, { scope: { "$event": e }, params: [e] });
  });
  cleanup2(() => removeListener());
}));
warnMissingPluginDirective("Collapse", "collapse", "collapse");
warnMissingPluginDirective("Intersect", "intersect", "intersect");
warnMissingPluginDirective("Focus", "trap", "focus");
warnMissingPluginDirective("Mask", "mask", "mask");
function warnMissingPluginDirective(name, directiveName, slug) {
  directive(directiveName, (el) => warn(`You can't use [x-${directiveName}] without first installing the "${name}" plugin here: https://alpinejs.dev/plugins/${slug}`, el));
}
alpine_default.setEvaluator(normalEvaluator);
alpine_default.setReactivityEngine({ reactive: reactive2, effect: effect2, release: stop, raw: toRaw });
var src_default = alpine_default;
var module_default = src_default;

// node_modules/@rails/actioncable/app/assets/javascripts/actioncable.esm.js
var actioncable_esm_exports = {};
__export(actioncable_esm_exports, {
  Connection: () => Connection,
  ConnectionMonitor: () => ConnectionMonitor,
  Consumer: () => Consumer,
  INTERNAL: () => INTERNAL,
  Subscription: () => Subscription,
  SubscriptionGuarantor: () => SubscriptionGuarantor,
  Subscriptions: () => Subscriptions,
  adapters: () => adapters,
  createConsumer: () => createConsumer,
  createWebSocketURL: () => createWebSocketURL,
  getConfig: () => getConfig,
  logger: () => logger
});
var adapters = {
  logger: typeof console !== "undefined" ? console : void 0,
  WebSocket: typeof WebSocket !== "undefined" ? WebSocket : void 0
};
var logger = {
  log(...messages) {
    if (this.enabled) {
      messages.push(Date.now());
      adapters.logger.log("[ActionCable]", ...messages);
    }
  }
};
var now = () => (/* @__PURE__ */ new Date()).getTime();
var secondsSince = (time) => (now() - time) / 1e3;
var ConnectionMonitor = class {
  constructor(connection) {
    this.visibilityDidChange = this.visibilityDidChange.bind(this);
    this.connection = connection;
    this.reconnectAttempts = 0;
  }
  start() {
    if (!this.isRunning()) {
      this.startedAt = now();
      delete this.stoppedAt;
      this.startPolling();
      addEventListener("visibilitychange", this.visibilityDidChange);
      logger.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`);
    }
  }
  stop() {
    if (this.isRunning()) {
      this.stoppedAt = now();
      this.stopPolling();
      removeEventListener("visibilitychange", this.visibilityDidChange);
      logger.log("ConnectionMonitor stopped");
    }
  }
  isRunning() {
    return this.startedAt && !this.stoppedAt;
  }
  recordMessage() {
    this.pingedAt = now();
  }
  recordConnect() {
    this.reconnectAttempts = 0;
    delete this.disconnectedAt;
    logger.log("ConnectionMonitor recorded connect");
  }
  recordDisconnect() {
    this.disconnectedAt = now();
    logger.log("ConnectionMonitor recorded disconnect");
  }
  startPolling() {
    this.stopPolling();
    this.poll();
  }
  stopPolling() {
    clearTimeout(this.pollTimeout);
  }
  poll() {
    this.pollTimeout = setTimeout(() => {
      this.reconnectIfStale();
      this.poll();
    }, this.getPollInterval());
  }
  getPollInterval() {
    const { staleThreshold, reconnectionBackoffRate } = this.constructor;
    const backoff = Math.pow(1 + reconnectionBackoffRate, Math.min(this.reconnectAttempts, 10));
    const jitterMax = this.reconnectAttempts === 0 ? 1 : reconnectionBackoffRate;
    const jitter = jitterMax * Math.random();
    return staleThreshold * 1e3 * backoff * (1 + jitter);
  }
  reconnectIfStale() {
    if (this.connectionIsStale()) {
      logger.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${secondsSince(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`);
      this.reconnectAttempts++;
      if (this.disconnectedRecently()) {
        logger.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${secondsSince(this.disconnectedAt)} s`);
      } else {
        logger.log("ConnectionMonitor reopening");
        this.connection.reopen();
      }
    }
  }
  get refreshedAt() {
    return this.pingedAt ? this.pingedAt : this.startedAt;
  }
  connectionIsStale() {
    return secondsSince(this.refreshedAt) > this.constructor.staleThreshold;
  }
  disconnectedRecently() {
    return this.disconnectedAt && secondsSince(this.disconnectedAt) < this.constructor.staleThreshold;
  }
  visibilityDidChange() {
    if (document.visibilityState === "visible") {
      setTimeout(() => {
        if (this.connectionIsStale() || !this.connection.isOpen()) {
          logger.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`);
          this.connection.reopen();
        }
      }, 200);
    }
  }
};
ConnectionMonitor.staleThreshold = 6;
ConnectionMonitor.reconnectionBackoffRate = 0.15;
var INTERNAL = {
  message_types: {
    welcome: "welcome",
    disconnect: "disconnect",
    ping: "ping",
    confirmation: "confirm_subscription",
    rejection: "reject_subscription"
  },
  disconnect_reasons: {
    unauthorized: "unauthorized",
    invalid_request: "invalid_request",
    server_restart: "server_restart",
    remote: "remote"
  },
  default_mount_path: "/cable",
  protocols: ["actioncable-v1-json", "actioncable-unsupported"]
};
var { message_types, protocols } = INTERNAL;
var supportedProtocols = protocols.slice(0, protocols.length - 1);
var indexOf = [].indexOf;
var Connection = class {
  constructor(consumer2) {
    this.open = this.open.bind(this);
    this.consumer = consumer2;
    this.subscriptions = this.consumer.subscriptions;
    this.monitor = new ConnectionMonitor(this);
    this.disconnected = true;
  }
  send(data2) {
    if (this.isOpen()) {
      this.webSocket.send(JSON.stringify(data2));
      return true;
    } else {
      return false;
    }
  }
  open() {
    if (this.isActive()) {
      logger.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`);
      return false;
    } else {
      const socketProtocols = [...protocols, ...this.consumer.subprotocols || []];
      logger.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${socketProtocols}`);
      if (this.webSocket) {
        this.uninstallEventHandlers();
      }
      this.webSocket = new adapters.WebSocket(this.consumer.url, socketProtocols);
      this.installEventHandlers();
      this.monitor.start();
      return true;
    }
  }
  close({ allowReconnect } = {
    allowReconnect: true
  }) {
    if (!allowReconnect) {
      this.monitor.stop();
    }
    if (this.isOpen()) {
      return this.webSocket.close();
    }
  }
  reopen() {
    logger.log(`Reopening WebSocket, current state is ${this.getState()}`);
    if (this.isActive()) {
      try {
        return this.close();
      } catch (error3) {
        logger.log("Failed to reopen WebSocket", error3);
      } finally {
        logger.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`);
        setTimeout(this.open, this.constructor.reopenDelay);
      }
    } else {
      return this.open();
    }
  }
  getProtocol() {
    if (this.webSocket) {
      return this.webSocket.protocol;
    }
  }
  isOpen() {
    return this.isState("open");
  }
  isActive() {
    return this.isState("open", "connecting");
  }
  triedToReconnect() {
    return this.monitor.reconnectAttempts > 0;
  }
  isProtocolSupported() {
    return indexOf.call(supportedProtocols, this.getProtocol()) >= 0;
  }
  isState(...states) {
    return indexOf.call(states, this.getState()) >= 0;
  }
  getState() {
    if (this.webSocket) {
      for (let state in adapters.WebSocket) {
        if (adapters.WebSocket[state] === this.webSocket.readyState) {
          return state.toLowerCase();
        }
      }
    }
    return null;
  }
  installEventHandlers() {
    for (let eventName in this.events) {
      const handler4 = this.events[eventName].bind(this);
      this.webSocket[`on${eventName}`] = handler4;
    }
  }
  uninstallEventHandlers() {
    for (let eventName in this.events) {
      this.webSocket[`on${eventName}`] = function() {
      };
    }
  }
};
Connection.reopenDelay = 500;
Connection.prototype.events = {
  message(event) {
    if (!this.isProtocolSupported()) {
      return;
    }
    const { identifier, message, reason, reconnect, type } = JSON.parse(event.data);
    this.monitor.recordMessage();
    switch (type) {
      case message_types.welcome:
        if (this.triedToReconnect()) {
          this.reconnectAttempted = true;
        }
        this.monitor.recordConnect();
        return this.subscriptions.reload();
      case message_types.disconnect:
        logger.log(`Disconnecting. Reason: ${reason}`);
        return this.close({
          allowReconnect: reconnect
        });
      case message_types.ping:
        return null;
      case message_types.confirmation:
        this.subscriptions.confirmSubscription(identifier);
        if (this.reconnectAttempted) {
          this.reconnectAttempted = false;
          return this.subscriptions.notify(identifier, "connected", {
            reconnected: true
          });
        } else {
          return this.subscriptions.notify(identifier, "connected", {
            reconnected: false
          });
        }
      case message_types.rejection:
        return this.subscriptions.reject(identifier);
      default:
        return this.subscriptions.notify(identifier, "received", message);
    }
  },
  open() {
    logger.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`);
    this.disconnected = false;
    if (!this.isProtocolSupported()) {
      logger.log("Protocol is unsupported. Stopping monitor and disconnecting.");
      return this.close({
        allowReconnect: false
      });
    }
  },
  close(event) {
    logger.log("WebSocket onclose event");
    if (this.disconnected) {
      return;
    }
    this.disconnected = true;
    this.monitor.recordDisconnect();
    return this.subscriptions.notifyAll("disconnected", {
      willAttemptReconnect: this.monitor.isRunning()
    });
  },
  error() {
    logger.log("WebSocket onerror event");
  }
};
var extend = function(object, properties) {
  if (properties != null) {
    for (let key in properties) {
      const value = properties[key];
      object[key] = value;
    }
  }
  return object;
};
var Subscription = class {
  constructor(consumer2, params = {}, mixin) {
    this.consumer = consumer2;
    this.identifier = JSON.stringify(params);
    extend(this, mixin);
  }
  perform(action, data2 = {}) {
    data2.action = action;
    return this.send(data2);
  }
  send(data2) {
    return this.consumer.send({
      command: "message",
      identifier: this.identifier,
      data: JSON.stringify(data2)
    });
  }
  unsubscribe() {
    return this.consumer.subscriptions.remove(this);
  }
};
var SubscriptionGuarantor = class {
  constructor(subscriptions) {
    this.subscriptions = subscriptions;
    this.pendingSubscriptions = [];
  }
  guarantee(subscription) {
    if (this.pendingSubscriptions.indexOf(subscription) == -1) {
      logger.log(`SubscriptionGuarantor guaranteeing ${subscription.identifier}`);
      this.pendingSubscriptions.push(subscription);
    } else {
      logger.log(`SubscriptionGuarantor already guaranteeing ${subscription.identifier}`);
    }
    this.startGuaranteeing();
  }
  forget(subscription) {
    logger.log(`SubscriptionGuarantor forgetting ${subscription.identifier}`);
    this.pendingSubscriptions = this.pendingSubscriptions.filter((s) => s !== subscription);
  }
  startGuaranteeing() {
    this.stopGuaranteeing();
    this.retrySubscribing();
  }
  stopGuaranteeing() {
    clearTimeout(this.retryTimeout);
  }
  retrySubscribing() {
    this.retryTimeout = setTimeout(() => {
      if (this.subscriptions && typeof this.subscriptions.subscribe === "function") {
        this.pendingSubscriptions.map((subscription) => {
          logger.log(`SubscriptionGuarantor resubscribing ${subscription.identifier}`);
          this.subscriptions.subscribe(subscription);
        });
      }
    }, 500);
  }
};
var Subscriptions = class {
  constructor(consumer2) {
    this.consumer = consumer2;
    this.guarantor = new SubscriptionGuarantor(this);
    this.subscriptions = [];
  }
  create(channelName, mixin) {
    const channel = channelName;
    const params = typeof channel === "object" ? channel : {
      channel
    };
    const subscription = new Subscription(this.consumer, params, mixin);
    return this.add(subscription);
  }
  add(subscription) {
    this.subscriptions.push(subscription);
    this.consumer.ensureActiveConnection();
    this.notify(subscription, "initialized");
    this.subscribe(subscription);
    return subscription;
  }
  remove(subscription) {
    this.forget(subscription);
    if (!this.findAll(subscription.identifier).length) {
      this.sendCommand(subscription, "unsubscribe");
    }
    return subscription;
  }
  reject(identifier) {
    return this.findAll(identifier).map((subscription) => {
      this.forget(subscription);
      this.notify(subscription, "rejected");
      return subscription;
    });
  }
  forget(subscription) {
    this.guarantor.forget(subscription);
    this.subscriptions = this.subscriptions.filter((s) => s !== subscription);
    return subscription;
  }
  findAll(identifier) {
    return this.subscriptions.filter((s) => s.identifier === identifier);
  }
  reload() {
    return this.subscriptions.map((subscription) => this.subscribe(subscription));
  }
  notifyAll(callbackName, ...args) {
    return this.subscriptions.map((subscription) => this.notify(subscription, callbackName, ...args));
  }
  notify(subscription, callbackName, ...args) {
    let subscriptions;
    if (typeof subscription === "string") {
      subscriptions = this.findAll(subscription);
    } else {
      subscriptions = [subscription];
    }
    return subscriptions.map((subscription2) => typeof subscription2[callbackName] === "function" ? subscription2[callbackName](...args) : void 0);
  }
  subscribe(subscription) {
    if (this.sendCommand(subscription, "subscribe")) {
      this.guarantor.guarantee(subscription);
    }
  }
  confirmSubscription(identifier) {
    logger.log(`Subscription confirmed ${identifier}`);
    this.findAll(identifier).map((subscription) => this.guarantor.forget(subscription));
  }
  sendCommand(subscription, command) {
    const { identifier } = subscription;
    return this.consumer.send({
      command,
      identifier
    });
  }
};
var Consumer = class {
  constructor(url) {
    this._url = url;
    this.subscriptions = new Subscriptions(this);
    this.connection = new Connection(this);
    this.subprotocols = [];
  }
  get url() {
    return createWebSocketURL(this._url);
  }
  send(data2) {
    return this.connection.send(data2);
  }
  connect() {
    return this.connection.open();
  }
  disconnect() {
    return this.connection.close({
      allowReconnect: false
    });
  }
  ensureActiveConnection() {
    if (!this.connection.isActive()) {
      return this.connection.open();
    }
  }
  addSubProtocol(subprotocol) {
    this.subprotocols = [...this.subprotocols, subprotocol];
  }
};
function createWebSocketURL(url) {
  if (typeof url === "function") {
    url = url();
  }
  if (url && !/^wss?:/i.test(url)) {
    const a = document.createElement("a");
    a.href = url;
    a.href = a.href;
    a.protocol = a.protocol.replace("http", "ws");
    return a.href;
  } else {
    return url;
  }
}
function createConsumer(url = getConfig("url") || INTERNAL.default_mount_path) {
  return new Consumer(url);
}
function getConfig(name) {
  const element = document.head.querySelector(`meta[name='action-cable-${name}']`);
  if (element) {
    return element.getAttribute("content");
  }
}

// node_modules/@hotwired/turbo/dist/turbo.es2017-esm.js
var turbo_es2017_esm_exports = {};
__export(turbo_es2017_esm_exports, {
  FetchEnctype: () => FetchEnctype,
  FetchMethod: () => FetchMethod,
  FetchRequest: () => FetchRequest,
  FetchResponse: () => FetchResponse,
  FrameElement: () => FrameElement,
  FrameLoadingStyle: () => FrameLoadingStyle,
  FrameRenderer: () => FrameRenderer,
  PageRenderer: () => PageRenderer,
  PageSnapshot: () => PageSnapshot,
  StreamActions: () => StreamActions,
  StreamElement: () => StreamElement,
  StreamSourceElement: () => StreamSourceElement,
  cache: () => cache,
  clearCache: () => clearCache,
  config: () => config,
  connectStreamSource: () => connectStreamSource,
  disconnectStreamSource: () => disconnectStreamSource,
  fetch: () => fetchWithTurboHeaders,
  fetchEnctypeFromString: () => fetchEnctypeFromString,
  fetchMethodFromString: () => fetchMethodFromString,
  isSafe: () => isSafe,
  morphBodyElements: () => morphBodyElements,
  morphChildren: () => morphChildren,
  morphElements: () => morphElements,
  morphTurboFrameElements: () => morphTurboFrameElements,
  navigator: () => navigator$1,
  registerAdapter: () => registerAdapter,
  renderStreamMessage: () => renderStreamMessage,
  session: () => session,
  setConfirmMethod: () => setConfirmMethod,
  setFormMode: () => setFormMode,
  setProgressBarDelay: () => setProgressBarDelay,
  start: () => start3,
  visit: () => visit
});
(function(prototype) {
  if (typeof prototype.requestSubmit == "function") return;
  prototype.requestSubmit = function(submitter2) {
    if (submitter2) {
      validateSubmitter(submitter2, this);
      submitter2.click();
    } else {
      submitter2 = document.createElement("input");
      submitter2.type = "submit";
      submitter2.hidden = true;
      this.appendChild(submitter2);
      submitter2.click();
      this.removeChild(submitter2);
    }
  };
  function validateSubmitter(submitter2, form) {
    submitter2 instanceof HTMLElement || raise(TypeError, "parameter 1 is not of type 'HTMLElement'");
    submitter2.type == "submit" || raise(TypeError, "The specified element is not a submit button");
    submitter2.form == form || raise(DOMException, "The specified element is not owned by this form element", "NotFoundError");
  }
  function raise(errorConstructor, message, name) {
    throw new errorConstructor("Failed to execute 'requestSubmit' on 'HTMLFormElement': " + message + ".", name);
  }
})(HTMLFormElement.prototype);
var submittersByForm = /* @__PURE__ */ new WeakMap();
function findSubmitterFromClickTarget(target) {
  const element = target instanceof Element ? target : target instanceof Node ? target.parentElement : null;
  const candidate = element ? element.closest("input, button") : null;
  return candidate?.type == "submit" ? candidate : null;
}
function clickCaptured(event) {
  const submitter2 = findSubmitterFromClickTarget(event.target);
  if (submitter2 && submitter2.form) {
    submittersByForm.set(submitter2.form, submitter2);
  }
}
(function() {
  if ("submitter" in Event.prototype) return;
  let prototype = window.Event.prototype;
  if ("SubmitEvent" in window) {
    const prototypeOfSubmitEvent = window.SubmitEvent.prototype;
    if (/Apple Computer/.test(navigator.vendor) && !("submitter" in prototypeOfSubmitEvent)) {
      prototype = prototypeOfSubmitEvent;
    } else {
      return;
    }
  }
  addEventListener("click", clickCaptured, true);
  Object.defineProperty(prototype, "submitter", {
    get() {
      if (this.type == "submit" && this.target instanceof HTMLFormElement) {
        return submittersByForm.get(this.target);
      }
    }
  });
})();
var FrameLoadingStyle = {
  eager: "eager",
  lazy: "lazy"
};
var FrameElement = class _FrameElement extends HTMLElement {
  static delegateConstructor = void 0;
  loaded = Promise.resolve();
  static get observedAttributes() {
    return ["disabled", "loading", "src"];
  }
  constructor() {
    super();
    this.delegate = new _FrameElement.delegateConstructor(this);
  }
  connectedCallback() {
    this.delegate.connect();
  }
  disconnectedCallback() {
    this.delegate.disconnect();
  }
  reload() {
    return this.delegate.sourceURLReloaded();
  }
  attributeChangedCallback(name) {
    if (name == "loading") {
      this.delegate.loadingStyleChanged();
    } else if (name == "src") {
      this.delegate.sourceURLChanged();
    } else if (name == "disabled") {
      this.delegate.disabledChanged();
    }
  }
  /**
   * Gets the URL to lazily load source HTML from
   */
  get src() {
    return this.getAttribute("src");
  }
  /**
   * Sets the URL to lazily load source HTML from
   */
  set src(value) {
    if (value) {
      this.setAttribute("src", value);
    } else {
      this.removeAttribute("src");
    }
  }
  /**
   * Gets the refresh mode for the frame.
   */
  get refresh() {
    return this.getAttribute("refresh");
  }
  /**
   * Sets the refresh mode for the frame.
   */
  set refresh(value) {
    if (value) {
      this.setAttribute("refresh", value);
    } else {
      this.removeAttribute("refresh");
    }
  }
  get shouldReloadWithMorph() {
    return this.src && this.refresh === "morph";
  }
  /**
   * Determines if the element is loading
   */
  get loading() {
    return frameLoadingStyleFromString(this.getAttribute("loading") || "");
  }
  /**
   * Sets the value of if the element is loading
   */
  set loading(value) {
    if (value) {
      this.setAttribute("loading", value);
    } else {
      this.removeAttribute("loading");
    }
  }
  /**
   * Gets the disabled state of the frame.
   *
   * If disabled, no requests will be intercepted by the frame.
   */
  get disabled() {
    return this.hasAttribute("disabled");
  }
  /**
   * Sets the disabled state of the frame.
   *
   * If disabled, no requests will be intercepted by the frame.
   */
  set disabled(value) {
    if (value) {
      this.setAttribute("disabled", "");
    } else {
      this.removeAttribute("disabled");
    }
  }
  /**
   * Gets the autoscroll state of the frame.
   *
   * If true, the frame will be scrolled into view automatically on update.
   */
  get autoscroll() {
    return this.hasAttribute("autoscroll");
  }
  /**
   * Sets the autoscroll state of the frame.
   *
   * If true, the frame will be scrolled into view automatically on update.
   */
  set autoscroll(value) {
    if (value) {
      this.setAttribute("autoscroll", "");
    } else {
      this.removeAttribute("autoscroll");
    }
  }
  /**
   * Determines if the element has finished loading
   */
  get complete() {
    return !this.delegate.isLoading;
  }
  /**
   * Gets the active state of the frame.
   *
   * If inactive, source changes will not be observed.
   */
  get isActive() {
    return this.ownerDocument === document && !this.isPreview;
  }
  /**
   * Sets the active state of the frame.
   *
   * If inactive, source changes will not be observed.
   */
  get isPreview() {
    return this.ownerDocument?.documentElement?.hasAttribute("data-turbo-preview");
  }
};
function frameLoadingStyleFromString(style2) {
  switch (style2.toLowerCase()) {
    case "lazy":
      return FrameLoadingStyle.lazy;
    default:
      return FrameLoadingStyle.eager;
  }
}
var drive = {
  enabled: true,
  progressBarDelay: 500,
  unvisitableExtensions: /* @__PURE__ */ new Set(
    [
      ".7z",
      ".aac",
      ".apk",
      ".avi",
      ".bmp",
      ".bz2",
      ".css",
      ".csv",
      ".deb",
      ".dmg",
      ".doc",
      ".docx",
      ".exe",
      ".gif",
      ".gz",
      ".heic",
      ".heif",
      ".ico",
      ".iso",
      ".jpeg",
      ".jpg",
      ".js",
      ".json",
      ".m4a",
      ".mkv",
      ".mov",
      ".mp3",
      ".mp4",
      ".mpeg",
      ".mpg",
      ".msi",
      ".ogg",
      ".ogv",
      ".pdf",
      ".pkg",
      ".png",
      ".ppt",
      ".pptx",
      ".rar",
      ".rtf",
      ".svg",
      ".tar",
      ".tif",
      ".tiff",
      ".txt",
      ".wav",
      ".webm",
      ".webp",
      ".wma",
      ".wmv",
      ".xls",
      ".xlsx",
      ".xml",
      ".zip"
    ]
  )
};
function activateScriptElement(element) {
  if (element.getAttribute("data-turbo-eval") == "false") {
    return element;
  } else {
    const createdScriptElement = document.createElement("script");
    const cspNonce = getCspNonce();
    if (cspNonce) {
      createdScriptElement.nonce = cspNonce;
    }
    createdScriptElement.textContent = element.textContent;
    createdScriptElement.async = false;
    copyElementAttributes(createdScriptElement, element);
    return createdScriptElement;
  }
}
function copyElementAttributes(destinationElement, sourceElement) {
  for (const { name, value } of sourceElement.attributes) {
    destinationElement.setAttribute(name, value);
  }
}
function createDocumentFragment(html) {
  const template = document.createElement("template");
  template.innerHTML = html;
  return template.content;
}
function dispatch2(eventName, { target, cancelable, detail } = {}) {
  const event = new CustomEvent(eventName, {
    cancelable,
    bubbles: true,
    composed: true,
    detail
  });
  if (target && target.isConnected) {
    target.dispatchEvent(event);
  } else {
    document.documentElement.dispatchEvent(event);
  }
  return event;
}
function cancelEvent(event) {
  event.preventDefault();
  event.stopImmediatePropagation();
}
function nextRepaint() {
  if (document.visibilityState === "hidden") {
    return nextEventLoopTick();
  } else {
    return nextAnimationFrame();
  }
}
function nextAnimationFrame() {
  return new Promise((resolve) => requestAnimationFrame(() => resolve()));
}
function nextEventLoopTick() {
  return new Promise((resolve) => setTimeout(() => resolve(), 0));
}
function nextMicrotask() {
  return Promise.resolve();
}
function parseHTMLDocument(html = "") {
  return new DOMParser().parseFromString(html, "text/html");
}
function unindent(strings, ...values) {
  const lines = interpolate(strings, values).replace(/^\n/, "").split("\n");
  const match = lines[0].match(/^\s+/);
  const indent = match ? match[0].length : 0;
  return lines.map((line) => line.slice(indent)).join("\n");
}
function interpolate(strings, values) {
  return strings.reduce((result, string, i) => {
    const value = values[i] == void 0 ? "" : values[i];
    return result + string + value;
  }, "");
}
function uuid() {
  return Array.from({ length: 36 }).map((_, i) => {
    if (i == 8 || i == 13 || i == 18 || i == 23) {
      return "-";
    } else if (i == 14) {
      return "4";
    } else if (i == 19) {
      return (Math.floor(Math.random() * 4) + 8).toString(16);
    } else {
      return Math.floor(Math.random() * 15).toString(16);
    }
  }).join("");
}
function getAttribute(attributeName, ...elements) {
  for (const value of elements.map((element) => element?.getAttribute(attributeName))) {
    if (typeof value == "string") return value;
  }
  return null;
}
function hasAttribute(attributeName, ...elements) {
  return elements.some((element) => element && element.hasAttribute(attributeName));
}
function markAsBusy(...elements) {
  for (const element of elements) {
    if (element.localName == "turbo-frame") {
      element.setAttribute("busy", "");
    }
    element.setAttribute("aria-busy", "true");
  }
}
function clearBusyState(...elements) {
  for (const element of elements) {
    if (element.localName == "turbo-frame") {
      element.removeAttribute("busy");
    }
    element.removeAttribute("aria-busy");
  }
}
function waitForLoad(element, timeoutInMilliseconds = 2e3) {
  return new Promise((resolve) => {
    const onComplete = () => {
      element.removeEventListener("error", onComplete);
      element.removeEventListener("load", onComplete);
      resolve();
    };
    element.addEventListener("load", onComplete, { once: true });
    element.addEventListener("error", onComplete, { once: true });
    setTimeout(resolve, timeoutInMilliseconds);
  });
}
function getHistoryMethodForAction(action) {
  switch (action) {
    case "replace":
      return history.replaceState;
    case "advance":
    case "restore":
      return history.pushState;
  }
}
function isAction(action) {
  return action == "advance" || action == "replace" || action == "restore";
}
function getVisitAction(...elements) {
  const action = getAttribute("data-turbo-action", ...elements);
  return isAction(action) ? action : null;
}
function getMetaElement(name) {
  return document.querySelector(`meta[name="${name}"]`);
}
function getMetaContent(name) {
  const element = getMetaElement(name);
  return element && element.content;
}
function getCspNonce() {
  const element = getMetaElement("csp-nonce");
  if (element) {
    const { nonce, content } = element;
    return nonce == "" ? content : nonce;
  }
}
function setMetaContent(name, content) {
  let element = getMetaElement(name);
  if (!element) {
    element = document.createElement("meta");
    element.setAttribute("name", name);
    document.head.appendChild(element);
  }
  element.setAttribute("content", content);
  return element;
}
function findClosestRecursively(element, selector) {
  if (element instanceof Element) {
    return element.closest(selector) || findClosestRecursively(element.assignedSlot || element.getRootNode()?.host, selector);
  }
}
function elementIsFocusable(element) {
  const inertDisabledOrHidden = "[inert], :disabled, [hidden], details:not([open]), dialog:not([open])";
  return !!element && element.closest(inertDisabledOrHidden) == null && typeof element.focus == "function";
}
function queryAutofocusableElement(elementOrDocumentFragment) {
  return Array.from(elementOrDocumentFragment.querySelectorAll("[autofocus]")).find(elementIsFocusable);
}
async function around(callback, reader) {
  const before = reader();
  callback();
  await nextAnimationFrame();
  const after = reader();
  return [before, after];
}
function doesNotTargetIFrame(name) {
  if (name === "_blank") {
    return false;
  } else if (name) {
    for (const element of document.getElementsByName(name)) {
      if (element instanceof HTMLIFrameElement) return false;
    }
    return true;
  } else {
    return true;
  }
}
function findLinkFromClickTarget(target) {
  const link = findClosestRecursively(target, "a[href], a[xlink\\:href]");
  if (!link) return null;
  if (link.hasAttribute("download")) return null;
  if (link.hasAttribute("target") && link.target !== "_self") return null;
  return link;
}
function getLocationForLink(link) {
  return expandURL(link.getAttribute("href") || "");
}
function debounce2(fn, delay) {
  let timeoutId = null;
  return (...args) => {
    const callback = () => fn.apply(this, args);
    clearTimeout(timeoutId);
    timeoutId = setTimeout(callback, delay);
  };
}
var submitter = {
  "aria-disabled": {
    beforeSubmit: (submitter2) => {
      submitter2.setAttribute("aria-disabled", "true");
      submitter2.addEventListener("click", cancelEvent);
    },
    afterSubmit: (submitter2) => {
      submitter2.removeAttribute("aria-disabled");
      submitter2.removeEventListener("click", cancelEvent);
    }
  },
  "disabled": {
    beforeSubmit: (submitter2) => submitter2.disabled = true,
    afterSubmit: (submitter2) => submitter2.disabled = false
  }
};
var Config = class {
  #submitter = null;
  constructor(config2) {
    Object.assign(this, config2);
  }
  get submitter() {
    return this.#submitter;
  }
  set submitter(value) {
    this.#submitter = submitter[value] || value;
  }
};
var forms = new Config({
  mode: "on",
  submitter: "disabled"
});
var config = {
  drive,
  forms
};
function expandURL(locatable) {
  return new URL(locatable.toString(), document.baseURI);
}
function getAnchor(url) {
  let anchorMatch;
  if (url.hash) {
    return url.hash.slice(1);
  } else if (anchorMatch = url.href.match(/#(.*)$/)) {
    return anchorMatch[1];
  }
}
function getAction$1(form, submitter2) {
  const action = submitter2?.getAttribute("formaction") || form.getAttribute("action") || form.action;
  return expandURL(action);
}
function getExtension(url) {
  return (getLastPathComponent(url).match(/\.[^.]*$/) || [])[0] || "";
}
function isPrefixedBy(baseURL, url) {
  const prefix2 = addTrailingSlash(url.origin + url.pathname);
  return addTrailingSlash(baseURL.href) === prefix2 || baseURL.href.startsWith(prefix2);
}
function locationIsVisitable(location2, rootLocation) {
  return isPrefixedBy(location2, rootLocation) && !config.drive.unvisitableExtensions.has(getExtension(location2));
}
function getRequestURL(url) {
  const anchor = getAnchor(url);
  return anchor != null ? url.href.slice(0, -(anchor.length + 1)) : url.href;
}
function toCacheKey(url) {
  return getRequestURL(url);
}
function urlsAreEqual(left, right) {
  return expandURL(left).href == expandURL(right).href;
}
function getPathComponents(url) {
  return url.pathname.split("/").slice(1);
}
function getLastPathComponent(url) {
  return getPathComponents(url).slice(-1)[0];
}
function addTrailingSlash(value) {
  return value.endsWith("/") ? value : value + "/";
}
var FetchResponse = class {
  constructor(response) {
    this.response = response;
  }
  get succeeded() {
    return this.response.ok;
  }
  get failed() {
    return !this.succeeded;
  }
  get clientError() {
    return this.statusCode >= 400 && this.statusCode <= 499;
  }
  get serverError() {
    return this.statusCode >= 500 && this.statusCode <= 599;
  }
  get redirected() {
    return this.response.redirected;
  }
  get location() {
    return expandURL(this.response.url);
  }
  get isHTML() {
    return this.contentType && this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/);
  }
  get statusCode() {
    return this.response.status;
  }
  get contentType() {
    return this.header("Content-Type");
  }
  get responseText() {
    return this.response.clone().text();
  }
  get responseHTML() {
    if (this.isHTML) {
      return this.response.clone().text();
    } else {
      return Promise.resolve(void 0);
    }
  }
  header(name) {
    return this.response.headers.get(name);
  }
};
var LimitedSet = class extends Set {
  constructor(maxSize) {
    super();
    this.maxSize = maxSize;
  }
  add(value) {
    if (this.size >= this.maxSize) {
      const iterator = this.values();
      const oldestValue = iterator.next().value;
      this.delete(oldestValue);
    }
    super.add(value);
  }
};
var recentRequests = new LimitedSet(20);
function fetchWithTurboHeaders(url, options = {}) {
  const modifiedHeaders = new Headers(options.headers || {});
  const requestUID = uuid();
  recentRequests.add(requestUID);
  modifiedHeaders.append("X-Turbo-Request-Id", requestUID);
  return window.fetch(url, {
    ...options,
    headers: modifiedHeaders
  });
}
function fetchMethodFromString(method) {
  switch (method.toLowerCase()) {
    case "get":
      return FetchMethod.get;
    case "post":
      return FetchMethod.post;
    case "put":
      return FetchMethod.put;
    case "patch":
      return FetchMethod.patch;
    case "delete":
      return FetchMethod.delete;
  }
}
var FetchMethod = {
  get: "get",
  post: "post",
  put: "put",
  patch: "patch",
  delete: "delete"
};
function fetchEnctypeFromString(encoding) {
  switch (encoding.toLowerCase()) {
    case FetchEnctype.multipart:
      return FetchEnctype.multipart;
    case FetchEnctype.plain:
      return FetchEnctype.plain;
    default:
      return FetchEnctype.urlEncoded;
  }
}
var FetchEnctype = {
  urlEncoded: "application/x-www-form-urlencoded",
  multipart: "multipart/form-data",
  plain: "text/plain"
};
var FetchRequest = class {
  abortController = new AbortController();
  #resolveRequestPromise = (_value) => {
  };
  constructor(delegate, method, location2, requestBody = new URLSearchParams(), target = null, enctype = FetchEnctype.urlEncoded) {
    const [url, body] = buildResourceAndBody(expandURL(location2), method, requestBody, enctype);
    this.delegate = delegate;
    this.url = url;
    this.target = target;
    this.fetchOptions = {
      credentials: "same-origin",
      redirect: "follow",
      method: method.toUpperCase(),
      headers: { ...this.defaultHeaders },
      body,
      signal: this.abortSignal,
      referrer: this.delegate.referrer?.href
    };
    this.enctype = enctype;
  }
  get method() {
    return this.fetchOptions.method;
  }
  set method(value) {
    const fetchBody = this.isSafe ? this.url.searchParams : this.fetchOptions.body || new FormData();
    const fetchMethod = fetchMethodFromString(value) || FetchMethod.get;
    this.url.search = "";
    const [url, body] = buildResourceAndBody(this.url, fetchMethod, fetchBody, this.enctype);
    this.url = url;
    this.fetchOptions.body = body;
    this.fetchOptions.method = fetchMethod.toUpperCase();
  }
  get headers() {
    return this.fetchOptions.headers;
  }
  set headers(value) {
    this.fetchOptions.headers = value;
  }
  get body() {
    if (this.isSafe) {
      return this.url.searchParams;
    } else {
      return this.fetchOptions.body;
    }
  }
  set body(value) {
    this.fetchOptions.body = value;
  }
  get location() {
    return this.url;
  }
  get params() {
    return this.url.searchParams;
  }
  get entries() {
    return this.body ? Array.from(this.body.entries()) : [];
  }
  cancel() {
    this.abortController.abort();
  }
  async perform() {
    const { fetchOptions } = this;
    this.delegate.prepareRequest(this);
    const event = await this.#allowRequestToBeIntercepted(fetchOptions);
    try {
      this.delegate.requestStarted(this);
      if (event.detail.fetchRequest) {
        this.response = event.detail.fetchRequest.response;
      } else {
        this.response = fetchWithTurboHeaders(this.url.href, fetchOptions);
      }
      const response = await this.response;
      return await this.receive(response);
    } catch (error3) {
      if (error3.name !== "AbortError") {
        if (this.#willDelegateErrorHandling(error3)) {
          this.delegate.requestErrored(this, error3);
        }
        throw error3;
      }
    } finally {
      this.delegate.requestFinished(this);
    }
  }
  async receive(response) {
    const fetchResponse = new FetchResponse(response);
    const event = dispatch2("turbo:before-fetch-response", {
      cancelable: true,
      detail: { fetchResponse },
      target: this.target
    });
    if (event.defaultPrevented) {
      this.delegate.requestPreventedHandlingResponse(this, fetchResponse);
    } else if (fetchResponse.succeeded) {
      this.delegate.requestSucceededWithResponse(this, fetchResponse);
    } else {
      this.delegate.requestFailedWithResponse(this, fetchResponse);
    }
    return fetchResponse;
  }
  get defaultHeaders() {
    return {
      Accept: "text/html, application/xhtml+xml"
    };
  }
  get isSafe() {
    return isSafe(this.method);
  }
  get abortSignal() {
    return this.abortController.signal;
  }
  acceptResponseType(mimeType) {
    this.headers["Accept"] = [mimeType, this.headers["Accept"]].join(", ");
  }
  async #allowRequestToBeIntercepted(fetchOptions) {
    const requestInterception = new Promise((resolve) => this.#resolveRequestPromise = resolve);
    const event = dispatch2("turbo:before-fetch-request", {
      cancelable: true,
      detail: {
        fetchOptions,
        url: this.url,
        resume: this.#resolveRequestPromise
      },
      target: this.target
    });
    this.url = event.detail.url;
    if (event.defaultPrevented) await requestInterception;
    return event;
  }
  #willDelegateErrorHandling(error3) {
    const event = dispatch2("turbo:fetch-request-error", {
      target: this.target,
      cancelable: true,
      detail: { request: this, error: error3 }
    });
    return !event.defaultPrevented;
  }
};
function isSafe(fetchMethod) {
  return fetchMethodFromString(fetchMethod) == FetchMethod.get;
}
function buildResourceAndBody(resource, method, requestBody, enctype) {
  const searchParams = Array.from(requestBody).length > 0 ? new URLSearchParams(entriesExcludingFiles(requestBody)) : resource.searchParams;
  if (isSafe(method)) {
    return [mergeIntoURLSearchParams(resource, searchParams), null];
  } else if (enctype == FetchEnctype.urlEncoded) {
    return [resource, searchParams];
  } else {
    return [resource, requestBody];
  }
}
function entriesExcludingFiles(requestBody) {
  const entries = [];
  for (const [name, value] of requestBody) {
    if (value instanceof File) continue;
    else entries.push([name, value]);
  }
  return entries;
}
function mergeIntoURLSearchParams(url, requestBody) {
  const searchParams = new URLSearchParams(entriesExcludingFiles(requestBody));
  url.search = searchParams.toString();
  return url;
}
var AppearanceObserver = class {
  started = false;
  constructor(delegate, element) {
    this.delegate = delegate;
    this.element = element;
    this.intersectionObserver = new IntersectionObserver(this.intersect);
  }
  start() {
    if (!this.started) {
      this.started = true;
      this.intersectionObserver.observe(this.element);
    }
  }
  stop() {
    if (this.started) {
      this.started = false;
      this.intersectionObserver.unobserve(this.element);
    }
  }
  intersect = (entries) => {
    const lastEntry = entries.slice(-1)[0];
    if (lastEntry?.isIntersecting) {
      this.delegate.elementAppearedInViewport(this.element);
    }
  };
};
var StreamMessage = class {
  static contentType = "text/vnd.turbo-stream.html";
  static wrap(message) {
    if (typeof message == "string") {
      return new this(createDocumentFragment(message));
    } else {
      return message;
    }
  }
  constructor(fragment) {
    this.fragment = importStreamElements(fragment);
  }
};
function importStreamElements(fragment) {
  for (const element of fragment.querySelectorAll("turbo-stream")) {
    const streamElement = document.importNode(element, true);
    for (const inertScriptElement of streamElement.templateElement.content.querySelectorAll("script")) {
      inertScriptElement.replaceWith(activateScriptElement(inertScriptElement));
    }
    element.replaceWith(streamElement);
  }
  return fragment;
}
var PREFETCH_DELAY = 100;
var PrefetchCache = class {
  #prefetchTimeout = null;
  #prefetched = null;
  get(url) {
    if (this.#prefetched && this.#prefetched.url === url && this.#prefetched.expire > Date.now()) {
      return this.#prefetched.request;
    }
  }
  setLater(url, request, ttl) {
    this.clear();
    this.#prefetchTimeout = setTimeout(() => {
      request.perform();
      this.set(url, request, ttl);
      this.#prefetchTimeout = null;
    }, PREFETCH_DELAY);
  }
  set(url, request, ttl) {
    this.#prefetched = { url, request, expire: new Date((/* @__PURE__ */ new Date()).getTime() + ttl) };
  }
  clear() {
    if (this.#prefetchTimeout) clearTimeout(this.#prefetchTimeout);
    this.#prefetched = null;
  }
};
var cacheTtl = 10 * 1e3;
var prefetchCache = new PrefetchCache();
var FormSubmissionState = {
  initialized: "initialized",
  requesting: "requesting",
  waiting: "waiting",
  receiving: "receiving",
  stopping: "stopping",
  stopped: "stopped"
};
var FormSubmission = class _FormSubmission {
  state = FormSubmissionState.initialized;
  static confirmMethod(message) {
    return Promise.resolve(confirm(message));
  }
  constructor(delegate, formElement, submitter2, mustRedirect = false) {
    const method = getMethod(formElement, submitter2);
    const action = getAction(getFormAction(formElement, submitter2), method);
    const body = buildFormData(formElement, submitter2);
    const enctype = getEnctype(formElement, submitter2);
    this.delegate = delegate;
    this.formElement = formElement;
    this.submitter = submitter2;
    this.fetchRequest = new FetchRequest(this, method, action, body, formElement, enctype);
    this.mustRedirect = mustRedirect;
  }
  get method() {
    return this.fetchRequest.method;
  }
  set method(value) {
    this.fetchRequest.method = value;
  }
  get action() {
    return this.fetchRequest.url.toString();
  }
  set action(value) {
    this.fetchRequest.url = expandURL(value);
  }
  get body() {
    return this.fetchRequest.body;
  }
  get enctype() {
    return this.fetchRequest.enctype;
  }
  get isSafe() {
    return this.fetchRequest.isSafe;
  }
  get location() {
    return this.fetchRequest.url;
  }
  // The submission process
  async start() {
    const { initialized, requesting } = FormSubmissionState;
    const confirmationMessage = getAttribute("data-turbo-confirm", this.submitter, this.formElement);
    if (typeof confirmationMessage === "string") {
      const confirmMethod = typeof config.forms.confirm === "function" ? config.forms.confirm : _FormSubmission.confirmMethod;
      const answer = await confirmMethod(confirmationMessage, this.formElement, this.submitter);
      if (!answer) {
        return;
      }
    }
    if (this.state == initialized) {
      this.state = requesting;
      return this.fetchRequest.perform();
    }
  }
  stop() {
    const { stopping, stopped } = FormSubmissionState;
    if (this.state != stopping && this.state != stopped) {
      this.state = stopping;
      this.fetchRequest.cancel();
      return true;
    }
  }
  // Fetch request delegate
  prepareRequest(request) {
    if (!request.isSafe) {
      const token = getCookieValue(getMetaContent("csrf-param")) || getMetaContent("csrf-token");
      if (token) {
        request.headers["X-CSRF-Token"] = token;
      }
    }
    if (this.requestAcceptsTurboStreamResponse(request)) {
      request.acceptResponseType(StreamMessage.contentType);
    }
  }
  requestStarted(_request) {
    this.state = FormSubmissionState.waiting;
    if (this.submitter) config.forms.submitter.beforeSubmit(this.submitter);
    this.setSubmitsWith();
    markAsBusy(this.formElement);
    dispatch2("turbo:submit-start", {
      target: this.formElement,
      detail: { formSubmission: this }
    });
    this.delegate.formSubmissionStarted(this);
  }
  requestPreventedHandlingResponse(request, response) {
    prefetchCache.clear();
    this.result = { success: response.succeeded, fetchResponse: response };
  }
  requestSucceededWithResponse(request, response) {
    if (response.clientError || response.serverError) {
      this.delegate.formSubmissionFailedWithResponse(this, response);
      return;
    }
    prefetchCache.clear();
    if (this.requestMustRedirect(request) && responseSucceededWithoutRedirect(response)) {
      const error3 = new Error("Form responses must redirect to another location");
      this.delegate.formSubmissionErrored(this, error3);
    } else {
      this.state = FormSubmissionState.receiving;
      this.result = { success: true, fetchResponse: response };
      this.delegate.formSubmissionSucceededWithResponse(this, response);
    }
  }
  requestFailedWithResponse(request, response) {
    this.result = { success: false, fetchResponse: response };
    this.delegate.formSubmissionFailedWithResponse(this, response);
  }
  requestErrored(request, error3) {
    this.result = { success: false, error: error3 };
    this.delegate.formSubmissionErrored(this, error3);
  }
  requestFinished(_request) {
    this.state = FormSubmissionState.stopped;
    if (this.submitter) config.forms.submitter.afterSubmit(this.submitter);
    this.resetSubmitterText();
    clearBusyState(this.formElement);
    dispatch2("turbo:submit-end", {
      target: this.formElement,
      detail: { formSubmission: this, ...this.result }
    });
    this.delegate.formSubmissionFinished(this);
  }
  // Private
  setSubmitsWith() {
    if (!this.submitter || !this.submitsWith) return;
    if (this.submitter.matches("button")) {
      this.originalSubmitText = this.submitter.innerHTML;
      this.submitter.innerHTML = this.submitsWith;
    } else if (this.submitter.matches("input")) {
      const input = this.submitter;
      this.originalSubmitText = input.value;
      input.value = this.submitsWith;
    }
  }
  resetSubmitterText() {
    if (!this.submitter || !this.originalSubmitText) return;
    if (this.submitter.matches("button")) {
      this.submitter.innerHTML = this.originalSubmitText;
    } else if (this.submitter.matches("input")) {
      const input = this.submitter;
      input.value = this.originalSubmitText;
    }
  }
  requestMustRedirect(request) {
    return !request.isSafe && this.mustRedirect;
  }
  requestAcceptsTurboStreamResponse(request) {
    return !request.isSafe || hasAttribute("data-turbo-stream", this.submitter, this.formElement);
  }
  get submitsWith() {
    return this.submitter?.getAttribute("data-turbo-submits-with");
  }
};
function buildFormData(formElement, submitter2) {
  const formData = new FormData(formElement);
  const name = submitter2?.getAttribute("name");
  const value = submitter2?.getAttribute("value");
  if (name) {
    formData.append(name, value || "");
  }
  return formData;
}
function getCookieValue(cookieName) {
  if (cookieName != null) {
    const cookies = document.cookie ? document.cookie.split("; ") : [];
    const cookie = cookies.find((cookie2) => cookie2.startsWith(cookieName));
    if (cookie) {
      const value = cookie.split("=").slice(1).join("=");
      return value ? decodeURIComponent(value) : void 0;
    }
  }
}
function responseSucceededWithoutRedirect(response) {
  return response.statusCode == 200 && !response.redirected;
}
function getFormAction(formElement, submitter2) {
  const formElementAction = typeof formElement.action === "string" ? formElement.action : null;
  if (submitter2?.hasAttribute("formaction")) {
    return submitter2.getAttribute("formaction") || "";
  } else {
    return formElement.getAttribute("action") || formElementAction || "";
  }
}
function getAction(formAction, fetchMethod) {
  const action = expandURL(formAction);
  if (isSafe(fetchMethod)) {
    action.search = "";
  }
  return action;
}
function getMethod(formElement, submitter2) {
  const method = submitter2?.getAttribute("formmethod") || formElement.getAttribute("method") || "";
  return fetchMethodFromString(method.toLowerCase()) || FetchMethod.get;
}
function getEnctype(formElement, submitter2) {
  return fetchEnctypeFromString(submitter2?.getAttribute("formenctype") || formElement.enctype);
}
var Snapshot = class {
  constructor(element) {
    this.element = element;
  }
  get activeElement() {
    return this.element.ownerDocument.activeElement;
  }
  get children() {
    return [...this.element.children];
  }
  hasAnchor(anchor) {
    return this.getElementForAnchor(anchor) != null;
  }
  getElementForAnchor(anchor) {
    return anchor ? this.element.querySelector(`[id='${anchor}'], a[name='${anchor}']`) : null;
  }
  get isConnected() {
    return this.element.isConnected;
  }
  get firstAutofocusableElement() {
    return queryAutofocusableElement(this.element);
  }
  get permanentElements() {
    return queryPermanentElementsAll(this.element);
  }
  getPermanentElementById(id2) {
    return getPermanentElementById(this.element, id2);
  }
  getPermanentElementMapForSnapshot(snapshot) {
    const permanentElementMap = {};
    for (const currentPermanentElement of this.permanentElements) {
      const { id: id2 } = currentPermanentElement;
      const newPermanentElement = snapshot.getPermanentElementById(id2);
      if (newPermanentElement) {
        permanentElementMap[id2] = [currentPermanentElement, newPermanentElement];
      }
    }
    return permanentElementMap;
  }
};
function getPermanentElementById(node, id2) {
  return node.querySelector(`#${id2}[data-turbo-permanent]`);
}
function queryPermanentElementsAll(node) {
  return node.querySelectorAll("[id][data-turbo-permanent]");
}
var FormSubmitObserver = class {
  started = false;
  constructor(delegate, eventTarget) {
    this.delegate = delegate;
    this.eventTarget = eventTarget;
  }
  start() {
    if (!this.started) {
      this.eventTarget.addEventListener("submit", this.submitCaptured, true);
      this.started = true;
    }
  }
  stop() {
    if (this.started) {
      this.eventTarget.removeEventListener("submit", this.submitCaptured, true);
      this.started = false;
    }
  }
  submitCaptured = () => {
    this.eventTarget.removeEventListener("submit", this.submitBubbled, false);
    this.eventTarget.addEventListener("submit", this.submitBubbled, false);
  };
  submitBubbled = (event) => {
    if (!event.defaultPrevented) {
      const form = event.target instanceof HTMLFormElement ? event.target : void 0;
      const submitter2 = event.submitter || void 0;
      if (form && submissionDoesNotDismissDialog(form, submitter2) && submissionDoesNotTargetIFrame(form, submitter2) && this.delegate.willSubmitForm(form, submitter2)) {
        event.preventDefault();
        event.stopImmediatePropagation();
        this.delegate.formSubmitted(form, submitter2);
      }
    }
  };
};
function submissionDoesNotDismissDialog(form, submitter2) {
  const method = submitter2?.getAttribute("formmethod") || form.getAttribute("method");
  return method != "dialog";
}
function submissionDoesNotTargetIFrame(form, submitter2) {
  const target = submitter2?.getAttribute("formtarget") || form.getAttribute("target");
  return doesNotTargetIFrame(target);
}
var View = class {
  #resolveRenderPromise = (_value) => {
  };
  #resolveInterceptionPromise = (_value) => {
  };
  constructor(delegate, element) {
    this.delegate = delegate;
    this.element = element;
  }
  // Scrolling
  scrollToAnchor(anchor) {
    const element = this.snapshot.getElementForAnchor(anchor);
    if (element) {
      this.focusElement(element);
      this.scrollToElement(element);
    } else {
      this.scrollToPosition({ x: 0, y: 0 });
    }
  }
  scrollToAnchorFromLocation(location2) {
    this.scrollToAnchor(getAnchor(location2));
  }
  scrollToElement(element) {
    element.scrollIntoView();
  }
  focusElement(element) {
    if (element instanceof HTMLElement) {
      if (element.hasAttribute("tabindex")) {
        element.focus();
      } else {
        element.setAttribute("tabindex", "-1");
        element.focus();
        element.removeAttribute("tabindex");
      }
    }
  }
  scrollToPosition({ x, y }) {
    this.scrollRoot.scrollTo(x, y);
  }
  scrollToTop() {
    this.scrollToPosition({ x: 0, y: 0 });
  }
  get scrollRoot() {
    return window;
  }
  // Rendering
  async render(renderer) {
    const { isPreview, shouldRender, willRender, newSnapshot: snapshot } = renderer;
    const shouldInvalidate = willRender;
    if (shouldRender) {
      try {
        this.renderPromise = new Promise((resolve) => this.#resolveRenderPromise = resolve);
        this.renderer = renderer;
        await this.prepareToRenderSnapshot(renderer);
        const renderInterception = new Promise((resolve) => this.#resolveInterceptionPromise = resolve);
        const options = { resume: this.#resolveInterceptionPromise, render: this.renderer.renderElement, renderMethod: this.renderer.renderMethod };
        const immediateRender = this.delegate.allowsImmediateRender(snapshot, options);
        if (!immediateRender) await renderInterception;
        await this.renderSnapshot(renderer);
        this.delegate.viewRenderedSnapshot(snapshot, isPreview, this.renderer.renderMethod);
        this.delegate.preloadOnLoadLinksForView(this.element);
        this.finishRenderingSnapshot(renderer);
      } finally {
        delete this.renderer;
        this.#resolveRenderPromise(void 0);
        delete this.renderPromise;
      }
    } else if (shouldInvalidate) {
      this.invalidate(renderer.reloadReason);
    }
  }
  invalidate(reason) {
    this.delegate.viewInvalidated(reason);
  }
  async prepareToRenderSnapshot(renderer) {
    this.markAsPreview(renderer.isPreview);
    await renderer.prepareToRender();
  }
  markAsPreview(isPreview) {
    if (isPreview) {
      this.element.setAttribute("data-turbo-preview", "");
    } else {
      this.element.removeAttribute("data-turbo-preview");
    }
  }
  markVisitDirection(direction) {
    this.element.setAttribute("data-turbo-visit-direction", direction);
  }
  unmarkVisitDirection() {
    this.element.removeAttribute("data-turbo-visit-direction");
  }
  async renderSnapshot(renderer) {
    await renderer.render();
  }
  finishRenderingSnapshot(renderer) {
    renderer.finishRendering();
  }
};
var FrameView = class extends View {
  missing() {
    this.element.innerHTML = `<strong class="turbo-frame-error">Content missing</strong>`;
  }
  get snapshot() {
    return new Snapshot(this.element);
  }
};
var LinkInterceptor = class {
  constructor(delegate, element) {
    this.delegate = delegate;
    this.element = element;
  }
  start() {
    this.element.addEventListener("click", this.clickBubbled);
    document.addEventListener("turbo:click", this.linkClicked);
    document.addEventListener("turbo:before-visit", this.willVisit);
  }
  stop() {
    this.element.removeEventListener("click", this.clickBubbled);
    document.removeEventListener("turbo:click", this.linkClicked);
    document.removeEventListener("turbo:before-visit", this.willVisit);
  }
  clickBubbled = (event) => {
    if (this.clickEventIsSignificant(event)) {
      this.clickEvent = event;
    } else {
      delete this.clickEvent;
    }
  };
  linkClicked = (event) => {
    if (this.clickEvent && this.clickEventIsSignificant(event)) {
      if (this.delegate.shouldInterceptLinkClick(event.target, event.detail.url, event.detail.originalEvent)) {
        this.clickEvent.preventDefault();
        event.preventDefault();
        this.delegate.linkClickIntercepted(event.target, event.detail.url, event.detail.originalEvent);
      }
    }
    delete this.clickEvent;
  };
  willVisit = (_event) => {
    delete this.clickEvent;
  };
  clickEventIsSignificant(event) {
    const target = event.composed ? event.target?.parentElement : event.target;
    const element = findLinkFromClickTarget(target) || target;
    return element instanceof Element && element.closest("turbo-frame, html") == this.element;
  }
};
var LinkClickObserver = class {
  started = false;
  constructor(delegate, eventTarget) {
    this.delegate = delegate;
    this.eventTarget = eventTarget;
  }
  start() {
    if (!this.started) {
      this.eventTarget.addEventListener("click", this.clickCaptured, true);
      this.started = true;
    }
  }
  stop() {
    if (this.started) {
      this.eventTarget.removeEventListener("click", this.clickCaptured, true);
      this.started = false;
    }
  }
  clickCaptured = () => {
    this.eventTarget.removeEventListener("click", this.clickBubbled, false);
    this.eventTarget.addEventListener("click", this.clickBubbled, false);
  };
  clickBubbled = (event) => {
    if (event instanceof MouseEvent && this.clickEventIsSignificant(event)) {
      const target = event.composedPath && event.composedPath()[0] || event.target;
      const link = findLinkFromClickTarget(target);
      if (link && doesNotTargetIFrame(link.target)) {
        const location2 = getLocationForLink(link);
        if (this.delegate.willFollowLinkToLocation(link, location2, event)) {
          event.preventDefault();
          this.delegate.followedLinkToLocation(link, location2);
        }
      }
    }
  };
  clickEventIsSignificant(event) {
    return !(event.target && event.target.isContentEditable || event.defaultPrevented || event.which > 1 || event.altKey || event.ctrlKey || event.metaKey || event.shiftKey);
  }
};
var FormLinkClickObserver = class {
  constructor(delegate, element) {
    this.delegate = delegate;
    this.linkInterceptor = new LinkClickObserver(this, element);
  }
  start() {
    this.linkInterceptor.start();
  }
  stop() {
    this.linkInterceptor.stop();
  }
  // Link hover observer delegate
  canPrefetchRequestToLocation(link, location2) {
    return false;
  }
  prefetchAndCacheRequestToLocation(link, location2) {
    return;
  }
  // Link click observer delegate
  willFollowLinkToLocation(link, location2, originalEvent) {
    return this.delegate.willSubmitFormLinkToLocation(link, location2, originalEvent) && (link.hasAttribute("data-turbo-method") || link.hasAttribute("data-turbo-stream"));
  }
  followedLinkToLocation(link, location2) {
    const form = document.createElement("form");
    const type = "hidden";
    for (const [name, value] of location2.searchParams) {
      form.append(Object.assign(document.createElement("input"), { type, name, value }));
    }
    const action = Object.assign(location2, { search: "" });
    form.setAttribute("data-turbo", "true");
    form.setAttribute("action", action.href);
    form.setAttribute("hidden", "");
    const method = link.getAttribute("data-turbo-method");
    if (method) form.setAttribute("method", method);
    const turboFrame = link.getAttribute("data-turbo-frame");
    if (turboFrame) form.setAttribute("data-turbo-frame", turboFrame);
    const turboAction = getVisitAction(link);
    if (turboAction) form.setAttribute("data-turbo-action", turboAction);
    const turboConfirm = link.getAttribute("data-turbo-confirm");
    if (turboConfirm) form.setAttribute("data-turbo-confirm", turboConfirm);
    const turboStream = link.hasAttribute("data-turbo-stream");
    if (turboStream) form.setAttribute("data-turbo-stream", "");
    this.delegate.submittedFormLinkToLocation(link, location2, form);
    document.body.appendChild(form);
    form.addEventListener("turbo:submit-end", () => form.remove(), { once: true });
    requestAnimationFrame(() => form.requestSubmit());
  }
};
var Bardo = class {
  static async preservingPermanentElements(delegate, permanentElementMap, callback) {
    const bardo = new this(delegate, permanentElementMap);
    bardo.enter();
    await callback();
    bardo.leave();
  }
  constructor(delegate, permanentElementMap) {
    this.delegate = delegate;
    this.permanentElementMap = permanentElementMap;
  }
  enter() {
    for (const id2 in this.permanentElementMap) {
      const [currentPermanentElement, newPermanentElement] = this.permanentElementMap[id2];
      this.delegate.enteringBardo(currentPermanentElement, newPermanentElement);
      this.replaceNewPermanentElementWithPlaceholder(newPermanentElement);
    }
  }
  leave() {
    for (const id2 in this.permanentElementMap) {
      const [currentPermanentElement] = this.permanentElementMap[id2];
      this.replaceCurrentPermanentElementWithClone(currentPermanentElement);
      this.replacePlaceholderWithPermanentElement(currentPermanentElement);
      this.delegate.leavingBardo(currentPermanentElement);
    }
  }
  replaceNewPermanentElementWithPlaceholder(permanentElement) {
    const placeholder = createPlaceholderForPermanentElement(permanentElement);
    permanentElement.replaceWith(placeholder);
  }
  replaceCurrentPermanentElementWithClone(permanentElement) {
    const clone2 = permanentElement.cloneNode(true);
    permanentElement.replaceWith(clone2);
  }
  replacePlaceholderWithPermanentElement(permanentElement) {
    const placeholder = this.getPlaceholderById(permanentElement.id);
    placeholder?.replaceWith(permanentElement);
  }
  getPlaceholderById(id2) {
    return this.placeholders.find((element) => element.content == id2);
  }
  get placeholders() {
    return [...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")];
  }
};
function createPlaceholderForPermanentElement(permanentElement) {
  const element = document.createElement("meta");
  element.setAttribute("name", "turbo-permanent-placeholder");
  element.setAttribute("content", permanentElement.id);
  return element;
}
var Renderer = class {
  #activeElement = null;
  static renderElement(currentElement, newElement) {
  }
  constructor(currentSnapshot, newSnapshot, isPreview, willRender = true) {
    this.currentSnapshot = currentSnapshot;
    this.newSnapshot = newSnapshot;
    this.isPreview = isPreview;
    this.willRender = willRender;
    this.renderElement = this.constructor.renderElement;
    this.promise = new Promise((resolve, reject) => this.resolvingFunctions = { resolve, reject });
  }
  get shouldRender() {
    return true;
  }
  get shouldAutofocus() {
    return true;
  }
  get reloadReason() {
    return;
  }
  prepareToRender() {
    return;
  }
  render() {
  }
  finishRendering() {
    if (this.resolvingFunctions) {
      this.resolvingFunctions.resolve();
      delete this.resolvingFunctions;
    }
  }
  async preservingPermanentElements(callback) {
    await Bardo.preservingPermanentElements(this, this.permanentElementMap, callback);
  }
  focusFirstAutofocusableElement() {
    if (this.shouldAutofocus) {
      const element = this.connectedSnapshot.firstAutofocusableElement;
      if (element) {
        element.focus();
      }
    }
  }
  // Bardo delegate
  enteringBardo(currentPermanentElement) {
    if (this.#activeElement) return;
    if (currentPermanentElement.contains(this.currentSnapshot.activeElement)) {
      this.#activeElement = this.currentSnapshot.activeElement;
    }
  }
  leavingBardo(currentPermanentElement) {
    if (currentPermanentElement.contains(this.#activeElement) && this.#activeElement instanceof HTMLElement) {
      this.#activeElement.focus();
      this.#activeElement = null;
    }
  }
  get connectedSnapshot() {
    return this.newSnapshot.isConnected ? this.newSnapshot : this.currentSnapshot;
  }
  get currentElement() {
    return this.currentSnapshot.element;
  }
  get newElement() {
    return this.newSnapshot.element;
  }
  get permanentElementMap() {
    return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot);
  }
  get renderMethod() {
    return "replace";
  }
};
var FrameRenderer = class extends Renderer {
  static renderElement(currentElement, newElement) {
    const destinationRange = document.createRange();
    destinationRange.selectNodeContents(currentElement);
    destinationRange.deleteContents();
    const frameElement = newElement;
    const sourceRange = frameElement.ownerDocument?.createRange();
    if (sourceRange) {
      sourceRange.selectNodeContents(frameElement);
      currentElement.appendChild(sourceRange.extractContents());
    }
  }
  constructor(delegate, currentSnapshot, newSnapshot, renderElement, isPreview, willRender = true) {
    super(currentSnapshot, newSnapshot, renderElement, isPreview, willRender);
    this.delegate = delegate;
  }
  get shouldRender() {
    return true;
  }
  async render() {
    await nextRepaint();
    this.preservingPermanentElements(() => {
      this.loadFrameElement();
    });
    this.scrollFrameIntoView();
    await nextRepaint();
    this.focusFirstAutofocusableElement();
    await nextRepaint();
    this.activateScriptElements();
  }
  loadFrameElement() {
    this.delegate.willRenderFrame(this.currentElement, this.newElement);
    this.renderElement(this.currentElement, this.newElement);
  }
  scrollFrameIntoView() {
    if (this.currentElement.autoscroll || this.newElement.autoscroll) {
      const element = this.currentElement.firstElementChild;
      const block = readScrollLogicalPosition(this.currentElement.getAttribute("data-autoscroll-block"), "end");
      const behavior = readScrollBehavior(this.currentElement.getAttribute("data-autoscroll-behavior"), "auto");
      if (element) {
        element.scrollIntoView({ block, behavior });
        return true;
      }
    }
    return false;
  }
  activateScriptElements() {
    for (const inertScriptElement of this.newScriptElements) {
      const activatedScriptElement = activateScriptElement(inertScriptElement);
      inertScriptElement.replaceWith(activatedScriptElement);
    }
  }
  get newScriptElements() {
    return this.currentElement.querySelectorAll("script");
  }
};
function readScrollLogicalPosition(value, defaultValue) {
  if (value == "end" || value == "start" || value == "center" || value == "nearest") {
    return value;
  } else {
    return defaultValue;
  }
}
function readScrollBehavior(value, defaultValue) {
  if (value == "auto" || value == "smooth") {
    return value;
  } else {
    return defaultValue;
  }
}
var Idiomorph = function() {
  const noOp = () => {
  };
  const defaults = {
    morphStyle: "outerHTML",
    callbacks: {
      beforeNodeAdded: noOp,
      afterNodeAdded: noOp,
      beforeNodeMorphed: noOp,
      afterNodeMorphed: noOp,
      beforeNodeRemoved: noOp,
      afterNodeRemoved: noOp,
      beforeAttributeUpdated: noOp
    },
    head: {
      style: "merge",
      shouldPreserve: (elt) => elt.getAttribute("im-preserve") === "true",
      shouldReAppend: (elt) => elt.getAttribute("im-re-append") === "true",
      shouldRemove: noOp,
      afterHeadMorphed: noOp
    },
    restoreFocus: true
  };
  function morph(oldNode, newContent, config2 = {}) {
    oldNode = normalizeElement(oldNode);
    const newNode = normalizeParent(newContent);
    const ctx = createMorphContext(oldNode, newNode, config2);
    const morphedNodes = saveAndRestoreFocus(ctx, () => {
      return withHeadBlocking(
        ctx,
        oldNode,
        newNode,
        /** @param {MorphContext} ctx */
        (ctx2) => {
          if (ctx2.morphStyle === "innerHTML") {
            morphChildren2(ctx2, oldNode, newNode);
            return Array.from(oldNode.childNodes);
          } else {
            return morphOuterHTML(ctx2, oldNode, newNode);
          }
        }
      );
    });
    ctx.pantry.remove();
    return morphedNodes;
  }
  function morphOuterHTML(ctx, oldNode, newNode) {
    const oldParent = normalizeParent(oldNode);
    let childNodes = Array.from(oldParent.childNodes);
    const index = childNodes.indexOf(oldNode);
    const rightMargin = childNodes.length - (index + 1);
    morphChildren2(
      ctx,
      oldParent,
      newNode,
      // these two optional params are the secret sauce
      oldNode,
      // start point for iteration
      oldNode.nextSibling
      // end point for iteration
    );
    childNodes = Array.from(oldParent.childNodes);
    return childNodes.slice(index, childNodes.length - rightMargin);
  }
  function saveAndRestoreFocus(ctx, fn) {
    if (!ctx.config.restoreFocus) return fn();
    let activeElement = (
      /** @type {HTMLInputElement|HTMLTextAreaElement|null} */
      document.activeElement
    );
    if (!(activeElement instanceof HTMLInputElement || activeElement instanceof HTMLTextAreaElement)) {
      return fn();
    }
    const { id: activeElementId, selectionStart, selectionEnd } = activeElement;
    const results = fn();
    if (activeElementId && activeElementId !== document.activeElement?.id) {
      activeElement = ctx.target.querySelector(`#${activeElementId}`);
      activeElement?.focus();
    }
    if (activeElement && !activeElement.selectionEnd && selectionEnd) {
      activeElement.setSelectionRange(selectionStart, selectionEnd);
    }
    return results;
  }
  const morphChildren2 = /* @__PURE__ */ function() {
    function morphChildren3(ctx, oldParent, newParent, insertionPoint = null, endPoint = null) {
      if (oldParent instanceof HTMLTemplateElement && newParent instanceof HTMLTemplateElement) {
        oldParent = oldParent.content;
        newParent = newParent.content;
      }
      insertionPoint ||= oldParent.firstChild;
      for (const newChild of newParent.childNodes) {
        if (insertionPoint && insertionPoint != endPoint) {
          const bestMatch = findBestMatch(
            ctx,
            newChild,
            insertionPoint,
            endPoint
          );
          if (bestMatch) {
            if (bestMatch !== insertionPoint) {
              removeNodesBetween(ctx, insertionPoint, bestMatch);
            }
            morphNode(bestMatch, newChild, ctx);
            insertionPoint = bestMatch.nextSibling;
            continue;
          }
        }
        if (newChild instanceof Element && ctx.persistentIds.has(newChild.id)) {
          const movedChild = moveBeforeById(
            oldParent,
            newChild.id,
            insertionPoint,
            ctx
          );
          morphNode(movedChild, newChild, ctx);
          insertionPoint = movedChild.nextSibling;
          continue;
        }
        const insertedNode = createNode(
          oldParent,
          newChild,
          insertionPoint,
          ctx
        );
        if (insertedNode) {
          insertionPoint = insertedNode.nextSibling;
        }
      }
      while (insertionPoint && insertionPoint != endPoint) {
        const tempNode = insertionPoint;
        insertionPoint = insertionPoint.nextSibling;
        removeNode(ctx, tempNode);
      }
    }
    function createNode(oldParent, newChild, insertionPoint, ctx) {
      if (ctx.callbacks.beforeNodeAdded(newChild) === false) return null;
      if (ctx.idMap.has(newChild)) {
        const newEmptyChild = document.createElement(
          /** @type {Element} */
          newChild.tagName
        );
        oldParent.insertBefore(newEmptyChild, insertionPoint);
        morphNode(newEmptyChild, newChild, ctx);
        ctx.callbacks.afterNodeAdded(newEmptyChild);
        return newEmptyChild;
      } else {
        const newClonedChild = document.importNode(newChild, true);
        oldParent.insertBefore(newClonedChild, insertionPoint);
        ctx.callbacks.afterNodeAdded(newClonedChild);
        return newClonedChild;
      }
    }
    const findBestMatch = /* @__PURE__ */ function() {
      function findBestMatch2(ctx, node, startPoint, endPoint) {
        let softMatch = null;
        let nextSibling = node.nextSibling;
        let siblingSoftMatchCount = 0;
        let cursor = startPoint;
        while (cursor && cursor != endPoint) {
          if (isSoftMatch(cursor, node)) {
            if (isIdSetMatch(ctx, cursor, node)) {
              return cursor;
            }
            if (softMatch === null) {
              if (!ctx.idMap.has(cursor)) {
                softMatch = cursor;
              }
            }
          }
          if (softMatch === null && nextSibling && isSoftMatch(cursor, nextSibling)) {
            siblingSoftMatchCount++;
            nextSibling = nextSibling.nextSibling;
            if (siblingSoftMatchCount >= 2) {
              softMatch = void 0;
            }
          }
          if (cursor.contains(document.activeElement)) break;
          cursor = cursor.nextSibling;
        }
        return softMatch || null;
      }
      function isIdSetMatch(ctx, oldNode, newNode) {
        let oldSet = ctx.idMap.get(oldNode);
        let newSet = ctx.idMap.get(newNode);
        if (!newSet || !oldSet) return false;
        for (const id2 of oldSet) {
          if (newSet.has(id2)) {
            return true;
          }
        }
        return false;
      }
      function isSoftMatch(oldNode, newNode) {
        const oldElt = (
          /** @type {Element} */
          oldNode
        );
        const newElt = (
          /** @type {Element} */
          newNode
        );
        return oldElt.nodeType === newElt.nodeType && oldElt.tagName === newElt.tagName && // If oldElt has an `id` with possible state and it doesn't match newElt.id then avoid morphing.
        // We'll still match an anonymous node with an IDed newElt, though, because if it got this far,
        // its not persistent, and new nodes can't have any hidden state.
        (!oldElt.id || oldElt.id === newElt.id);
      }
      return findBestMatch2;
    }();
    function removeNode(ctx, node) {
      if (ctx.idMap.has(node)) {
        moveBefore(ctx.pantry, node, null);
      } else {
        if (ctx.callbacks.beforeNodeRemoved(node) === false) return;
        node.parentNode?.removeChild(node);
        ctx.callbacks.afterNodeRemoved(node);
      }
    }
    function removeNodesBetween(ctx, startInclusive, endExclusive) {
      let cursor = startInclusive;
      while (cursor && cursor !== endExclusive) {
        let tempNode = (
          /** @type {Node} */
          cursor
        );
        cursor = cursor.nextSibling;
        removeNode(ctx, tempNode);
      }
      return cursor;
    }
    function moveBeforeById(parentNode, id2, after, ctx) {
      const target = (
        /** @type {Element} - will always be found */
        ctx.target.querySelector(`#${id2}`) || ctx.pantry.querySelector(`#${id2}`)
      );
      removeElementFromAncestorsIdMaps(target, ctx);
      moveBefore(parentNode, target, after);
      return target;
    }
    function removeElementFromAncestorsIdMaps(element, ctx) {
      const id2 = element.id;
      while (element = element.parentNode) {
        let idSet = ctx.idMap.get(element);
        if (idSet) {
          idSet.delete(id2);
          if (!idSet.size) {
            ctx.idMap.delete(element);
          }
        }
      }
    }
    function moveBefore(parentNode, element, after) {
      if (parentNode.moveBefore) {
        try {
          parentNode.moveBefore(element, after);
        } catch (e) {
          parentNode.insertBefore(element, after);
        }
      } else {
        parentNode.insertBefore(element, after);
      }
    }
    return morphChildren3;
  }();
  const morphNode = /* @__PURE__ */ function() {
    function morphNode2(oldNode, newContent, ctx) {
      if (ctx.ignoreActive && oldNode === document.activeElement) {
        return null;
      }
      if (ctx.callbacks.beforeNodeMorphed(oldNode, newContent) === false) {
        return oldNode;
      }
      if (oldNode instanceof HTMLHeadElement && ctx.head.ignore) ;
      else if (oldNode instanceof HTMLHeadElement && ctx.head.style !== "morph") {
        handleHeadElement(
          oldNode,
          /** @type {HTMLHeadElement} */
          newContent,
          ctx
        );
      } else {
        morphAttributes(oldNode, newContent, ctx);
        if (!ignoreValueOfActiveElement(oldNode, ctx)) {
          morphChildren2(ctx, oldNode, newContent);
        }
      }
      ctx.callbacks.afterNodeMorphed(oldNode, newContent);
      return oldNode;
    }
    function morphAttributes(oldNode, newNode, ctx) {
      let type = newNode.nodeType;
      if (type === 1) {
        const oldElt = (
          /** @type {Element} */
          oldNode
        );
        const newElt = (
          /** @type {Element} */
          newNode
        );
        const oldAttributes = oldElt.attributes;
        const newAttributes = newElt.attributes;
        for (const newAttribute of newAttributes) {
          if (ignoreAttribute(newAttribute.name, oldElt, "update", ctx)) {
            continue;
          }
          if (oldElt.getAttribute(newAttribute.name) !== newAttribute.value) {
            oldElt.setAttribute(newAttribute.name, newAttribute.value);
          }
        }
        for (let i = oldAttributes.length - 1; 0 <= i; i--) {
          const oldAttribute = oldAttributes[i];
          if (!oldAttribute) continue;
          if (!newElt.hasAttribute(oldAttribute.name)) {
            if (ignoreAttribute(oldAttribute.name, oldElt, "remove", ctx)) {
              continue;
            }
            oldElt.removeAttribute(oldAttribute.name);
          }
        }
        if (!ignoreValueOfActiveElement(oldElt, ctx)) {
          syncInputValue(oldElt, newElt, ctx);
        }
      }
      if (type === 8 || type === 3) {
        if (oldNode.nodeValue !== newNode.nodeValue) {
          oldNode.nodeValue = newNode.nodeValue;
        }
      }
    }
    function syncInputValue(oldElement, newElement, ctx) {
      if (oldElement instanceof HTMLInputElement && newElement instanceof HTMLInputElement && newElement.type !== "file") {
        let newValue = newElement.value;
        let oldValue = oldElement.value;
        syncBooleanAttribute(oldElement, newElement, "checked", ctx);
        syncBooleanAttribute(oldElement, newElement, "disabled", ctx);
        if (!newElement.hasAttribute("value")) {
          if (!ignoreAttribute("value", oldElement, "remove", ctx)) {
            oldElement.value = "";
            oldElement.removeAttribute("value");
          }
        } else if (oldValue !== newValue) {
          if (!ignoreAttribute("value", oldElement, "update", ctx)) {
            oldElement.setAttribute("value", newValue);
            oldElement.value = newValue;
          }
        }
      } else if (oldElement instanceof HTMLOptionElement && newElement instanceof HTMLOptionElement) {
        syncBooleanAttribute(oldElement, newElement, "selected", ctx);
      } else if (oldElement instanceof HTMLTextAreaElement && newElement instanceof HTMLTextAreaElement) {
        let newValue = newElement.value;
        let oldValue = oldElement.value;
        if (ignoreAttribute("value", oldElement, "update", ctx)) {
          return;
        }
        if (newValue !== oldValue) {
          oldElement.value = newValue;
        }
        if (oldElement.firstChild && oldElement.firstChild.nodeValue !== newValue) {
          oldElement.firstChild.nodeValue = newValue;
        }
      }
    }
    function syncBooleanAttribute(oldElement, newElement, attributeName, ctx) {
      const newLiveValue = newElement[attributeName], oldLiveValue = oldElement[attributeName];
      if (newLiveValue !== oldLiveValue) {
        const ignoreUpdate = ignoreAttribute(
          attributeName,
          oldElement,
          "update",
          ctx
        );
        if (!ignoreUpdate) {
          oldElement[attributeName] = newElement[attributeName];
        }
        if (newLiveValue) {
          if (!ignoreUpdate) {
            oldElement.setAttribute(attributeName, "");
          }
        } else {
          if (!ignoreAttribute(attributeName, oldElement, "remove", ctx)) {
            oldElement.removeAttribute(attributeName);
          }
        }
      }
    }
    function ignoreAttribute(attr, element, updateType, ctx) {
      if (attr === "value" && ctx.ignoreActiveValue && element === document.activeElement) {
        return true;
      }
      return ctx.callbacks.beforeAttributeUpdated(attr, element, updateType) === false;
    }
    function ignoreValueOfActiveElement(possibleActiveElement, ctx) {
      return !!ctx.ignoreActiveValue && possibleActiveElement === document.activeElement && possibleActiveElement !== document.body;
    }
    return morphNode2;
  }();
  function withHeadBlocking(ctx, oldNode, newNode, callback) {
    if (ctx.head.block) {
      const oldHead = oldNode.querySelector("head");
      const newHead = newNode.querySelector("head");
      if (oldHead && newHead) {
        const promises = handleHeadElement(oldHead, newHead, ctx);
        return Promise.all(promises).then(() => {
          const newCtx = Object.assign(ctx, {
            head: {
              block: false,
              ignore: true
            }
          });
          return callback(newCtx);
        });
      }
    }
    return callback(ctx);
  }
  function handleHeadElement(oldHead, newHead, ctx) {
    let added = [];
    let removed = [];
    let preserved = [];
    let nodesToAppend = [];
    let srcToNewHeadNodes = /* @__PURE__ */ new Map();
    for (const newHeadChild of newHead.children) {
      srcToNewHeadNodes.set(newHeadChild.outerHTML, newHeadChild);
    }
    for (const currentHeadElt of oldHead.children) {
      let inNewContent = srcToNewHeadNodes.has(currentHeadElt.outerHTML);
      let isReAppended = ctx.head.shouldReAppend(currentHeadElt);
      let isPreserved = ctx.head.shouldPreserve(currentHeadElt);
      if (inNewContent || isPreserved) {
        if (isReAppended) {
          removed.push(currentHeadElt);
        } else {
          srcToNewHeadNodes.delete(currentHeadElt.outerHTML);
          preserved.push(currentHeadElt);
        }
      } else {
        if (ctx.head.style === "append") {
          if (isReAppended) {
            removed.push(currentHeadElt);
            nodesToAppend.push(currentHeadElt);
          }
        } else {
          if (ctx.head.shouldRemove(currentHeadElt) !== false) {
            removed.push(currentHeadElt);
          }
        }
      }
    }
    nodesToAppend.push(...srcToNewHeadNodes.values());
    let promises = [];
    for (const newNode of nodesToAppend) {
      let newElt = (
        /** @type {ChildNode} */
        document.createRange().createContextualFragment(newNode.outerHTML).firstChild
      );
      if (ctx.callbacks.beforeNodeAdded(newElt) !== false) {
        if ("href" in newElt && newElt.href || "src" in newElt && newElt.src) {
          let resolve;
          let promise = new Promise(function(_resolve) {
            resolve = _resolve;
          });
          newElt.addEventListener("load", function() {
            resolve();
          });
          promises.push(promise);
        }
        oldHead.appendChild(newElt);
        ctx.callbacks.afterNodeAdded(newElt);
        added.push(newElt);
      }
    }
    for (const removedElement of removed) {
      if (ctx.callbacks.beforeNodeRemoved(removedElement) !== false) {
        oldHead.removeChild(removedElement);
        ctx.callbacks.afterNodeRemoved(removedElement);
      }
    }
    ctx.head.afterHeadMorphed(oldHead, {
      added,
      kept: preserved,
      removed
    });
    return promises;
  }
  const createMorphContext = /* @__PURE__ */ function() {
    function createMorphContext2(oldNode, newContent, config2) {
      const { persistentIds, idMap } = createIdMaps(oldNode, newContent);
      const mergedConfig = mergeDefaults(config2);
      const morphStyle = mergedConfig.morphStyle || "outerHTML";
      if (!["innerHTML", "outerHTML"].includes(morphStyle)) {
        throw `Do not understand how to morph style ${morphStyle}`;
      }
      return {
        target: oldNode,
        newContent,
        config: mergedConfig,
        morphStyle,
        ignoreActive: mergedConfig.ignoreActive,
        ignoreActiveValue: mergedConfig.ignoreActiveValue,
        restoreFocus: mergedConfig.restoreFocus,
        idMap,
        persistentIds,
        pantry: createPantry(),
        callbacks: mergedConfig.callbacks,
        head: mergedConfig.head
      };
    }
    function mergeDefaults(config2) {
      let finalConfig = Object.assign({}, defaults);
      Object.assign(finalConfig, config2);
      finalConfig.callbacks = Object.assign(
        {},
        defaults.callbacks,
        config2.callbacks
      );
      finalConfig.head = Object.assign({}, defaults.head, config2.head);
      return finalConfig;
    }
    function createPantry() {
      const pantry = document.createElement("div");
      pantry.hidden = true;
      document.body.insertAdjacentElement("afterend", pantry);
      return pantry;
    }
    function findIdElements(root) {
      let elements = Array.from(root.querySelectorAll("[id]"));
      if (root.id) {
        elements.push(root);
      }
      return elements;
    }
    function populateIdMapWithTree(idMap, persistentIds, root, elements) {
      for (const elt of elements) {
        if (persistentIds.has(elt.id)) {
          let current = elt;
          while (current) {
            let idSet = idMap.get(current);
            if (idSet == null) {
              idSet = /* @__PURE__ */ new Set();
              idMap.set(current, idSet);
            }
            idSet.add(elt.id);
            if (current === root) break;
            current = current.parentElement;
          }
        }
      }
    }
    function createIdMaps(oldContent, newContent) {
      const oldIdElements = findIdElements(oldContent);
      const newIdElements = findIdElements(newContent);
      const persistentIds = createPersistentIds(oldIdElements, newIdElements);
      let idMap = /* @__PURE__ */ new Map();
      populateIdMapWithTree(idMap, persistentIds, oldContent, oldIdElements);
      const newRoot = newContent.__idiomorphRoot || newContent;
      populateIdMapWithTree(idMap, persistentIds, newRoot, newIdElements);
      return { persistentIds, idMap };
    }
    function createPersistentIds(oldIdElements, newIdElements) {
      let duplicateIds = /* @__PURE__ */ new Set();
      let oldIdTagNameMap = /* @__PURE__ */ new Map();
      for (const { id: id2, tagName } of oldIdElements) {
        if (oldIdTagNameMap.has(id2)) {
          duplicateIds.add(id2);
        } else {
          oldIdTagNameMap.set(id2, tagName);
        }
      }
      let persistentIds = /* @__PURE__ */ new Set();
      for (const { id: id2, tagName } of newIdElements) {
        if (persistentIds.has(id2)) {
          duplicateIds.add(id2);
        } else if (oldIdTagNameMap.get(id2) === tagName) {
          persistentIds.add(id2);
        }
      }
      for (const id2 of duplicateIds) {
        persistentIds.delete(id2);
      }
      return persistentIds;
    }
    return createMorphContext2;
  }();
  const { normalizeElement, normalizeParent } = /* @__PURE__ */ function() {
    const generatedByIdiomorph = /* @__PURE__ */ new WeakSet();
    function normalizeElement2(content) {
      if (content instanceof Document) {
        return content.documentElement;
      } else {
        return content;
      }
    }
    function normalizeParent2(newContent) {
      if (newContent == null) {
        return document.createElement("div");
      } else if (typeof newContent === "string") {
        return normalizeParent2(parseContent(newContent));
      } else if (generatedByIdiomorph.has(
        /** @type {Element} */
        newContent
      )) {
        return (
          /** @type {Element} */
          newContent
        );
      } else if (newContent instanceof Node) {
        if (newContent.parentNode) {
          return createDuckTypedParent(newContent);
        } else {
          const dummyParent = document.createElement("div");
          dummyParent.append(newContent);
          return dummyParent;
        }
      } else {
        const dummyParent = document.createElement("div");
        for (const elt of [...newContent]) {
          dummyParent.append(elt);
        }
        return dummyParent;
      }
    }
    function createDuckTypedParent(newContent) {
      return (
        /** @type {Element} */
        /** @type {unknown} */
        {
          childNodes: [newContent],
          /** @ts-ignore - cover your eyes for a minute, tsc */
          querySelectorAll: (s) => {
            const elements = newContent.querySelectorAll(s);
            return newContent.matches(s) ? [newContent, ...elements] : elements;
          },
          /** @ts-ignore */
          insertBefore: (n, r) => newContent.parentNode.insertBefore(n, r),
          /** @ts-ignore */
          moveBefore: (n, r) => newContent.parentNode.moveBefore(n, r),
          // for later use with populateIdMapWithTree to halt upwards iteration
          get __idiomorphRoot() {
            return newContent;
          }
        }
      );
    }
    function parseContent(newContent) {
      let parser = new DOMParser();
      let contentWithSvgsRemoved = newContent.replace(
        /<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,
        ""
      );
      if (contentWithSvgsRemoved.match(/<\/html>/) || contentWithSvgsRemoved.match(/<\/head>/) || contentWithSvgsRemoved.match(/<\/body>/)) {
        let content = parser.parseFromString(newContent, "text/html");
        if (contentWithSvgsRemoved.match(/<\/html>/)) {
          generatedByIdiomorph.add(content);
          return content;
        } else {
          let htmlElement = content.firstChild;
          if (htmlElement) {
            generatedByIdiomorph.add(htmlElement);
          }
          return htmlElement;
        }
      } else {
        let responseDoc = parser.parseFromString(
          "<body><template>" + newContent + "</template></body>",
          "text/html"
        );
        let content = (
          /** @type {HTMLTemplateElement} */
          responseDoc.body.querySelector("template").content
        );
        generatedByIdiomorph.add(content);
        return content;
      }
    }
    return { normalizeElement: normalizeElement2, normalizeParent: normalizeParent2 };
  }();
  return {
    morph,
    defaults
  };
}();
function morphElements(currentElement, newElement, { callbacks, ...options } = {}) {
  Idiomorph.morph(currentElement, newElement, {
    ...options,
    callbacks: new DefaultIdiomorphCallbacks(callbacks)
  });
}
function morphChildren(currentElement, newElement, options = {}) {
  morphElements(currentElement, newElement.childNodes, {
    ...options,
    morphStyle: "innerHTML"
  });
}
function shouldRefreshFrameWithMorphing(currentFrame, newFrame) {
  return currentFrame instanceof FrameElement && // newFrame cannot yet be an instance of FrameElement because custom
  // elements don't get initialized until they're attached to the DOM, so
  // test its Element#nodeName instead
  newFrame instanceof Element && newFrame.nodeName === "TURBO-FRAME" && currentFrame.shouldReloadWithMorph && currentFrame.id === newFrame.id && (!newFrame.getAttribute("src") || urlsAreEqual(currentFrame.src, newFrame.getAttribute("src"))) && !currentFrame.closest("[data-turbo-permanent]");
}
function closestFrameReloadableWithMorphing(node) {
  return node.parentElement.closest("turbo-frame[src][refresh=morph]");
}
var DefaultIdiomorphCallbacks = class {
  #beforeNodeMorphed;
  constructor({ beforeNodeMorphed } = {}) {
    this.#beforeNodeMorphed = beforeNodeMorphed || (() => true);
  }
  beforeNodeAdded = (node) => {
    return !(node.id && node.hasAttribute("data-turbo-permanent") && document.getElementById(node.id));
  };
  beforeNodeMorphed = (currentElement, newElement) => {
    if (currentElement instanceof Element) {
      if (!currentElement.hasAttribute("data-turbo-permanent") && this.#beforeNodeMorphed(currentElement, newElement)) {
        const event = dispatch2("turbo:before-morph-element", {
          cancelable: true,
          target: currentElement,
          detail: { currentElement, newElement }
        });
        return !event.defaultPrevented;
      } else {
        return false;
      }
    }
  };
  beforeAttributeUpdated = (attributeName, target, mutationType) => {
    const event = dispatch2("turbo:before-morph-attribute", {
      cancelable: true,
      target,
      detail: { attributeName, mutationType }
    });
    return !event.defaultPrevented;
  };
  beforeNodeRemoved = (node) => {
    return this.beforeNodeMorphed(node);
  };
  afterNodeMorphed = (currentElement, newElement) => {
    if (currentElement instanceof Element) {
      dispatch2("turbo:morph-element", {
        target: currentElement,
        detail: { currentElement, newElement }
      });
    }
  };
};
var MorphingFrameRenderer = class extends FrameRenderer {
  static renderElement(currentElement, newElement) {
    dispatch2("turbo:before-frame-morph", {
      target: currentElement,
      detail: { currentElement, newElement }
    });
    morphChildren(currentElement, newElement, {
      callbacks: {
        beforeNodeMorphed: (node, newNode) => {
          if (shouldRefreshFrameWithMorphing(node, newNode) && closestFrameReloadableWithMorphing(node) === currentElement) {
            node.reload();
            return false;
          }
          return true;
        }
      }
    });
  }
  async preservingPermanentElements(callback) {
    return await callback();
  }
};
var ProgressBar = class _ProgressBar {
  static animationDuration = 300;
  /*ms*/
  static get defaultCSS() {
    return unindent`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${_ProgressBar.animationDuration}ms ease-out,
          opacity ${_ProgressBar.animationDuration / 2}ms ${_ProgressBar.animationDuration / 2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `;
  }
  hiding = false;
  value = 0;
  visible = false;
  constructor() {
    this.stylesheetElement = this.createStylesheetElement();
    this.progressElement = this.createProgressElement();
    this.installStylesheetElement();
    this.setValue(0);
  }
  show() {
    if (!this.visible) {
      this.visible = true;
      this.installProgressElement();
      this.startTrickling();
    }
  }
  hide() {
    if (this.visible && !this.hiding) {
      this.hiding = true;
      this.fadeProgressElement(() => {
        this.uninstallProgressElement();
        this.stopTrickling();
        this.visible = false;
        this.hiding = false;
      });
    }
  }
  setValue(value) {
    this.value = value;
    this.refresh();
  }
  // Private
  installStylesheetElement() {
    document.head.insertBefore(this.stylesheetElement, document.head.firstChild);
  }
  installProgressElement() {
    this.progressElement.style.width = "0";
    this.progressElement.style.opacity = "1";
    document.documentElement.insertBefore(this.progressElement, document.body);
    this.refresh();
  }
  fadeProgressElement(callback) {
    this.progressElement.style.opacity = "0";
    setTimeout(callback, _ProgressBar.animationDuration * 1.5);
  }
  uninstallProgressElement() {
    if (this.progressElement.parentNode) {
      document.documentElement.removeChild(this.progressElement);
    }
  }
  startTrickling() {
    if (!this.trickleInterval) {
      this.trickleInterval = window.setInterval(this.trickle, _ProgressBar.animationDuration);
    }
  }
  stopTrickling() {
    window.clearInterval(this.trickleInterval);
    delete this.trickleInterval;
  }
  trickle = () => {
    this.setValue(this.value + Math.random() / 100);
  };
  refresh() {
    requestAnimationFrame(() => {
      this.progressElement.style.width = `${10 + this.value * 90}%`;
    });
  }
  createStylesheetElement() {
    const element = document.createElement("style");
    element.type = "text/css";
    element.textContent = _ProgressBar.defaultCSS;
    const cspNonce = getCspNonce();
    if (cspNonce) {
      element.nonce = cspNonce;
    }
    return element;
  }
  createProgressElement() {
    const element = document.createElement("div");
    element.className = "turbo-progress-bar";
    return element;
  }
};
var HeadSnapshot = class extends Snapshot {
  detailsByOuterHTML = this.children.filter((element) => !elementIsNoscript(element)).map((element) => elementWithoutNonce(element)).reduce((result, element) => {
    const { outerHTML } = element;
    const details = outerHTML in result ? result[outerHTML] : {
      type: elementType(element),
      tracked: elementIsTracked(element),
      elements: []
    };
    return {
      ...result,
      [outerHTML]: {
        ...details,
        elements: [...details.elements, element]
      }
    };
  }, {});
  get trackedElementSignature() {
    return Object.keys(this.detailsByOuterHTML).filter((outerHTML) => this.detailsByOuterHTML[outerHTML].tracked).join("");
  }
  getScriptElementsNotInSnapshot(snapshot) {
    return this.getElementsMatchingTypeNotInSnapshot("script", snapshot);
  }
  getStylesheetElementsNotInSnapshot(snapshot) {
    return this.getElementsMatchingTypeNotInSnapshot("stylesheet", snapshot);
  }
  getElementsMatchingTypeNotInSnapshot(matchedType, snapshot) {
    return Object.keys(this.detailsByOuterHTML).filter((outerHTML) => !(outerHTML in snapshot.detailsByOuterHTML)).map((outerHTML) => this.detailsByOuterHTML[outerHTML]).filter(({ type }) => type == matchedType).map(({ elements: [element] }) => element);
  }
  get provisionalElements() {
    return Object.keys(this.detailsByOuterHTML).reduce((result, outerHTML) => {
      const { type, tracked, elements } = this.detailsByOuterHTML[outerHTML];
      if (type == null && !tracked) {
        return [...result, ...elements];
      } else if (elements.length > 1) {
        return [...result, ...elements.slice(1)];
      } else {
        return result;
      }
    }, []);
  }
  getMetaValue(name) {
    const element = this.findMetaElementByName(name);
    return element ? element.getAttribute("content") : null;
  }
  findMetaElementByName(name) {
    return Object.keys(this.detailsByOuterHTML).reduce((result, outerHTML) => {
      const {
        elements: [element]
      } = this.detailsByOuterHTML[outerHTML];
      return elementIsMetaElementWithName(element, name) ? element : result;
    }, void 0 | void 0);
  }
};
function elementType(element) {
  if (elementIsScript(element)) {
    return "script";
  } else if (elementIsStylesheet(element)) {
    return "stylesheet";
  }
}
function elementIsTracked(element) {
  return element.getAttribute("data-turbo-track") == "reload";
}
function elementIsScript(element) {
  const tagName = element.localName;
  return tagName == "script";
}
function elementIsNoscript(element) {
  const tagName = element.localName;
  return tagName == "noscript";
}
function elementIsStylesheet(element) {
  const tagName = element.localName;
  return tagName == "style" || tagName == "link" && element.getAttribute("rel") == "stylesheet";
}
function elementIsMetaElementWithName(element, name) {
  const tagName = element.localName;
  return tagName == "meta" && element.getAttribute("name") == name;
}
function elementWithoutNonce(element) {
  if (element.hasAttribute("nonce")) {
    element.setAttribute("nonce", "");
  }
  return element;
}
var PageSnapshot = class _PageSnapshot extends Snapshot {
  static fromHTMLString(html = "") {
    return this.fromDocument(parseHTMLDocument(html));
  }
  static fromElement(element) {
    return this.fromDocument(element.ownerDocument);
  }
  static fromDocument({ documentElement, body, head }) {
    return new this(documentElement, body, new HeadSnapshot(head));
  }
  constructor(documentElement, body, headSnapshot) {
    super(body);
    this.documentElement = documentElement;
    this.headSnapshot = headSnapshot;
  }
  clone() {
    const clonedElement = this.element.cloneNode(true);
    const selectElements = this.element.querySelectorAll("select");
    const clonedSelectElements = clonedElement.querySelectorAll("select");
    for (const [index, source] of selectElements.entries()) {
      const clone2 = clonedSelectElements[index];
      for (const option of clone2.selectedOptions) option.selected = false;
      for (const option of source.selectedOptions) clone2.options[option.index].selected = true;
    }
    for (const clonedPasswordInput of clonedElement.querySelectorAll('input[type="password"]')) {
      clonedPasswordInput.value = "";
    }
    return new _PageSnapshot(this.documentElement, clonedElement, this.headSnapshot);
  }
  get lang() {
    return this.documentElement.getAttribute("lang");
  }
  get headElement() {
    return this.headSnapshot.element;
  }
  get rootLocation() {
    const root = this.getSetting("root") ?? "/";
    return expandURL(root);
  }
  get cacheControlValue() {
    return this.getSetting("cache-control");
  }
  get isPreviewable() {
    return this.cacheControlValue != "no-preview";
  }
  get isCacheable() {
    return this.cacheControlValue != "no-cache";
  }
  get isVisitable() {
    return this.getSetting("visit-control") != "reload";
  }
  get prefersViewTransitions() {
    const viewTransitionEnabled = this.getSetting("view-transition") === "true" || this.headSnapshot.getMetaValue("view-transition") === "same-origin";
    return viewTransitionEnabled && !window.matchMedia("(prefers-reduced-motion: reduce)").matches;
  }
  get shouldMorphPage() {
    return this.getSetting("refresh-method") === "morph";
  }
  get shouldPreserveScrollPosition() {
    return this.getSetting("refresh-scroll") === "preserve";
  }
  // Private
  getSetting(name) {
    return this.headSnapshot.getMetaValue(`turbo-${name}`);
  }
};
var ViewTransitioner = class {
  #viewTransitionStarted = false;
  #lastOperation = Promise.resolve();
  renderChange(useViewTransition, render) {
    if (useViewTransition && this.viewTransitionsAvailable && !this.#viewTransitionStarted) {
      this.#viewTransitionStarted = true;
      this.#lastOperation = this.#lastOperation.then(async () => {
        await document.startViewTransition(render).finished;
      });
    } else {
      this.#lastOperation = this.#lastOperation.then(render);
    }
    return this.#lastOperation;
  }
  get viewTransitionsAvailable() {
    return document.startViewTransition;
  }
};
var defaultOptions = {
  action: "advance",
  historyChanged: false,
  visitCachedSnapshot: () => {
  },
  willRender: true,
  updateHistory: true,
  shouldCacheSnapshot: true,
  acceptsStreamResponse: false
};
var TimingMetric = {
  visitStart: "visitStart",
  requestStart: "requestStart",
  requestEnd: "requestEnd",
  visitEnd: "visitEnd"
};
var VisitState = {
  initialized: "initialized",
  started: "started",
  canceled: "canceled",
  failed: "failed",
  completed: "completed"
};
var SystemStatusCode = {
  networkFailure: 0,
  timeoutFailure: -1,
  contentTypeMismatch: -2
};
var Direction = {
  advance: "forward",
  restore: "back",
  replace: "none"
};
var Visit = class {
  identifier = uuid();
  // Required by turbo-ios
  timingMetrics = {};
  followedRedirect = false;
  historyChanged = false;
  scrolled = false;
  shouldCacheSnapshot = true;
  acceptsStreamResponse = false;
  snapshotCached = false;
  state = VisitState.initialized;
  viewTransitioner = new ViewTransitioner();
  constructor(delegate, location2, restorationIdentifier, options = {}) {
    this.delegate = delegate;
    this.location = location2;
    this.restorationIdentifier = restorationIdentifier || uuid();
    const {
      action,
      historyChanged,
      referrer,
      snapshot,
      snapshotHTML,
      response,
      visitCachedSnapshot,
      willRender,
      updateHistory,
      shouldCacheSnapshot,
      acceptsStreamResponse,
      direction
    } = {
      ...defaultOptions,
      ...options
    };
    this.action = action;
    this.historyChanged = historyChanged;
    this.referrer = referrer;
    this.snapshot = snapshot;
    this.snapshotHTML = snapshotHTML;
    this.response = response;
    this.isSamePage = this.delegate.locationWithActionIsSamePage(this.location, this.action);
    this.isPageRefresh = this.view.isPageRefresh(this);
    this.visitCachedSnapshot = visitCachedSnapshot;
    this.willRender = willRender;
    this.updateHistory = updateHistory;
    this.scrolled = !willRender;
    this.shouldCacheSnapshot = shouldCacheSnapshot;
    this.acceptsStreamResponse = acceptsStreamResponse;
    this.direction = direction || Direction[action];
  }
  get adapter() {
    return this.delegate.adapter;
  }
  get view() {
    return this.delegate.view;
  }
  get history() {
    return this.delegate.history;
  }
  get restorationData() {
    return this.history.getRestorationDataForIdentifier(this.restorationIdentifier);
  }
  get silent() {
    return this.isSamePage;
  }
  start() {
    if (this.state == VisitState.initialized) {
      this.recordTimingMetric(TimingMetric.visitStart);
      this.state = VisitState.started;
      this.adapter.visitStarted(this);
      this.delegate.visitStarted(this);
    }
  }
  cancel() {
    if (this.state == VisitState.started) {
      if (this.request) {
        this.request.cancel();
      }
      this.cancelRender();
      this.state = VisitState.canceled;
    }
  }
  complete() {
    if (this.state == VisitState.started) {
      this.recordTimingMetric(TimingMetric.visitEnd);
      this.adapter.visitCompleted(this);
      this.state = VisitState.completed;
      this.followRedirect();
      if (!this.followedRedirect) {
        this.delegate.visitCompleted(this);
      }
    }
  }
  fail() {
    if (this.state == VisitState.started) {
      this.state = VisitState.failed;
      this.adapter.visitFailed(this);
      this.delegate.visitCompleted(this);
    }
  }
  changeHistory() {
    if (!this.historyChanged && this.updateHistory) {
      const actionForHistory = this.location.href === this.referrer?.href ? "replace" : this.action;
      const method = getHistoryMethodForAction(actionForHistory);
      this.history.update(method, this.location, this.restorationIdentifier);
      this.historyChanged = true;
    }
  }
  issueRequest() {
    if (this.hasPreloadedResponse()) {
      this.simulateRequest();
    } else if (this.shouldIssueRequest() && !this.request) {
      this.request = new FetchRequest(this, FetchMethod.get, this.location);
      this.request.perform();
    }
  }
  simulateRequest() {
    if (this.response) {
      this.startRequest();
      this.recordResponse();
      this.finishRequest();
    }
  }
  startRequest() {
    this.recordTimingMetric(TimingMetric.requestStart);
    this.adapter.visitRequestStarted(this);
  }
  recordResponse(response = this.response) {
    this.response = response;
    if (response) {
      const { statusCode } = response;
      if (isSuccessful(statusCode)) {
        this.adapter.visitRequestCompleted(this);
      } else {
        this.adapter.visitRequestFailedWithStatusCode(this, statusCode);
      }
    }
  }
  finishRequest() {
    this.recordTimingMetric(TimingMetric.requestEnd);
    this.adapter.visitRequestFinished(this);
  }
  loadResponse() {
    if (this.response) {
      const { statusCode, responseHTML } = this.response;
      this.render(async () => {
        if (this.shouldCacheSnapshot) this.cacheSnapshot();
        if (this.view.renderPromise) await this.view.renderPromise;
        if (isSuccessful(statusCode) && responseHTML != null) {
          const snapshot = PageSnapshot.fromHTMLString(responseHTML);
          await this.renderPageSnapshot(snapshot, false);
          this.adapter.visitRendered(this);
          this.complete();
        } else {
          await this.view.renderError(PageSnapshot.fromHTMLString(responseHTML), this);
          this.adapter.visitRendered(this);
          this.fail();
        }
      });
    }
  }
  getCachedSnapshot() {
    const snapshot = this.view.getCachedSnapshotForLocation(this.location) || this.getPreloadedSnapshot();
    if (snapshot && (!getAnchor(this.location) || snapshot.hasAnchor(getAnchor(this.location)))) {
      if (this.action == "restore" || snapshot.isPreviewable) {
        return snapshot;
      }
    }
  }
  getPreloadedSnapshot() {
    if (this.snapshotHTML) {
      return PageSnapshot.fromHTMLString(this.snapshotHTML);
    }
  }
  hasCachedSnapshot() {
    return this.getCachedSnapshot() != null;
  }
  loadCachedSnapshot() {
    const snapshot = this.getCachedSnapshot();
    if (snapshot) {
      const isPreview = this.shouldIssueRequest();
      this.render(async () => {
        this.cacheSnapshot();
        if (this.isSamePage || this.isPageRefresh) {
          this.adapter.visitRendered(this);
        } else {
          if (this.view.renderPromise) await this.view.renderPromise;
          await this.renderPageSnapshot(snapshot, isPreview);
          this.adapter.visitRendered(this);
          if (!isPreview) {
            this.complete();
          }
        }
      });
    }
  }
  followRedirect() {
    if (this.redirectedToLocation && !this.followedRedirect && this.response?.redirected) {
      this.adapter.visitProposedToLocation(this.redirectedToLocation, {
        action: "replace",
        response: this.response,
        shouldCacheSnapshot: false,
        willRender: false
      });
      this.followedRedirect = true;
    }
  }
  goToSamePageAnchor() {
    if (this.isSamePage) {
      this.render(async () => {
        this.cacheSnapshot();
        this.performScroll();
        this.changeHistory();
        this.adapter.visitRendered(this);
      });
    }
  }
  // Fetch request delegate
  prepareRequest(request) {
    if (this.acceptsStreamResponse) {
      request.acceptResponseType(StreamMessage.contentType);
    }
  }
  requestStarted() {
    this.startRequest();
  }
  requestPreventedHandlingResponse(_request, _response) {
  }
  async requestSucceededWithResponse(request, response) {
    const responseHTML = await response.responseHTML;
    const { redirected, statusCode } = response;
    if (responseHTML == void 0) {
      this.recordResponse({
        statusCode: SystemStatusCode.contentTypeMismatch,
        redirected
      });
    } else {
      this.redirectedToLocation = response.redirected ? response.location : void 0;
      this.recordResponse({ statusCode, responseHTML, redirected });
    }
  }
  async requestFailedWithResponse(request, response) {
    const responseHTML = await response.responseHTML;
    const { redirected, statusCode } = response;
    if (responseHTML == void 0) {
      this.recordResponse({
        statusCode: SystemStatusCode.contentTypeMismatch,
        redirected
      });
    } else {
      this.recordResponse({ statusCode, responseHTML, redirected });
    }
  }
  requestErrored(_request, _error) {
    this.recordResponse({
      statusCode: SystemStatusCode.networkFailure,
      redirected: false
    });
  }
  requestFinished() {
    this.finishRequest();
  }
  // Scrolling
  performScroll() {
    if (!this.scrolled && !this.view.forceReloaded && !this.view.shouldPreserveScrollPosition(this)) {
      if (this.action == "restore") {
        this.scrollToRestoredPosition() || this.scrollToAnchor() || this.view.scrollToTop();
      } else {
        this.scrollToAnchor() || this.view.scrollToTop();
      }
      if (this.isSamePage) {
        this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation, this.location);
      }
      this.scrolled = true;
    }
  }
  scrollToRestoredPosition() {
    const { scrollPosition } = this.restorationData;
    if (scrollPosition) {
      this.view.scrollToPosition(scrollPosition);
      return true;
    }
  }
  scrollToAnchor() {
    const anchor = getAnchor(this.location);
    if (anchor != null) {
      this.view.scrollToAnchor(anchor);
      return true;
    }
  }
  // Instrumentation
  recordTimingMetric(metric) {
    this.timingMetrics[metric] = (/* @__PURE__ */ new Date()).getTime();
  }
  getTimingMetrics() {
    return { ...this.timingMetrics };
  }
  // Private
  hasPreloadedResponse() {
    return typeof this.response == "object";
  }
  shouldIssueRequest() {
    if (this.isSamePage) {
      return false;
    } else if (this.action == "restore") {
      return !this.hasCachedSnapshot();
    } else {
      return this.willRender;
    }
  }
  cacheSnapshot() {
    if (!this.snapshotCached) {
      this.view.cacheSnapshot(this.snapshot).then((snapshot) => snapshot && this.visitCachedSnapshot(snapshot));
      this.snapshotCached = true;
    }
  }
  async render(callback) {
    this.cancelRender();
    await new Promise((resolve) => {
      this.frame = document.visibilityState === "hidden" ? setTimeout(() => resolve(), 0) : requestAnimationFrame(() => resolve());
    });
    await callback();
    delete this.frame;
  }
  async renderPageSnapshot(snapshot, isPreview) {
    await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(snapshot), async () => {
      await this.view.renderPage(snapshot, isPreview, this.willRender, this);
      this.performScroll();
    });
  }
  cancelRender() {
    if (this.frame) {
      cancelAnimationFrame(this.frame);
      delete this.frame;
    }
  }
};
function isSuccessful(statusCode) {
  return statusCode >= 200 && statusCode < 300;
}
var BrowserAdapter = class {
  progressBar = new ProgressBar();
  constructor(session2) {
    this.session = session2;
  }
  visitProposedToLocation(location2, options) {
    if (locationIsVisitable(location2, this.navigator.rootLocation)) {
      this.navigator.startVisit(location2, options?.restorationIdentifier || uuid(), options);
    } else {
      window.location.href = location2.toString();
    }
  }
  visitStarted(visit2) {
    this.location = visit2.location;
    this.redirectedToLocation = null;
    visit2.loadCachedSnapshot();
    visit2.issueRequest();
    visit2.goToSamePageAnchor();
  }
  visitRequestStarted(visit2) {
    this.progressBar.setValue(0);
    if (visit2.hasCachedSnapshot() || visit2.action != "restore") {
      this.showVisitProgressBarAfterDelay();
    } else {
      this.showProgressBar();
    }
  }
  visitRequestCompleted(visit2) {
    visit2.loadResponse();
    if (visit2.response.redirected) {
      this.redirectedToLocation = visit2.redirectedToLocation;
    }
  }
  visitRequestFailedWithStatusCode(visit2, statusCode) {
    switch (statusCode) {
      case SystemStatusCode.networkFailure:
      case SystemStatusCode.timeoutFailure:
      case SystemStatusCode.contentTypeMismatch:
        return this.reload({
          reason: "request_failed",
          context: {
            statusCode
          }
        });
      default:
        return visit2.loadResponse();
    }
  }
  visitRequestFinished(_visit) {
  }
  visitCompleted(_visit) {
    this.progressBar.setValue(1);
    this.hideVisitProgressBar();
  }
  pageInvalidated(reason) {
    this.reload(reason);
  }
  visitFailed(_visit) {
    this.progressBar.setValue(1);
    this.hideVisitProgressBar();
  }
  visitRendered(_visit) {
  }
  // Link prefetching
  linkPrefetchingIsEnabledForLocation(location2) {
    return true;
  }
  // Form Submission Delegate
  formSubmissionStarted(_formSubmission) {
    this.progressBar.setValue(0);
    this.showFormProgressBarAfterDelay();
  }
  formSubmissionFinished(_formSubmission) {
    this.progressBar.setValue(1);
    this.hideFormProgressBar();
  }
  // Private
  showVisitProgressBarAfterDelay() {
    this.visitProgressBarTimeout = window.setTimeout(this.showProgressBar, this.session.progressBarDelay);
  }
  hideVisitProgressBar() {
    this.progressBar.hide();
    if (this.visitProgressBarTimeout != null) {
      window.clearTimeout(this.visitProgressBarTimeout);
      delete this.visitProgressBarTimeout;
    }
  }
  showFormProgressBarAfterDelay() {
    if (this.formProgressBarTimeout == null) {
      this.formProgressBarTimeout = window.setTimeout(this.showProgressBar, this.session.progressBarDelay);
    }
  }
  hideFormProgressBar() {
    this.progressBar.hide();
    if (this.formProgressBarTimeout != null) {
      window.clearTimeout(this.formProgressBarTimeout);
      delete this.formProgressBarTimeout;
    }
  }
  showProgressBar = () => {
    this.progressBar.show();
  };
  reload(reason) {
    dispatch2("turbo:reload", { detail: reason });
    window.location.href = (this.redirectedToLocation || this.location)?.toString() || window.location.href;
  }
  get navigator() {
    return this.session.navigator;
  }
};
var CacheObserver = class {
  selector = "[data-turbo-temporary]";
  deprecatedSelector = "[data-turbo-cache=false]";
  started = false;
  start() {
    if (!this.started) {
      this.started = true;
      addEventListener("turbo:before-cache", this.removeTemporaryElements, false);
    }
  }
  stop() {
    if (this.started) {
      this.started = false;
      removeEventListener("turbo:before-cache", this.removeTemporaryElements, false);
    }
  }
  removeTemporaryElements = (_event) => {
    for (const element of this.temporaryElements) {
      element.remove();
    }
  };
  get temporaryElements() {
    return [...document.querySelectorAll(this.selector), ...this.temporaryElementsWithDeprecation];
  }
  get temporaryElementsWithDeprecation() {
    const elements = document.querySelectorAll(this.deprecatedSelector);
    if (elements.length) {
      console.warn(
        `The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`
      );
    }
    return [...elements];
  }
};
var FrameRedirector = class {
  constructor(session2, element) {
    this.session = session2;
    this.element = element;
    this.linkInterceptor = new LinkInterceptor(this, element);
    this.formSubmitObserver = new FormSubmitObserver(this, element);
  }
  start() {
    this.linkInterceptor.start();
    this.formSubmitObserver.start();
  }
  stop() {
    this.linkInterceptor.stop();
    this.formSubmitObserver.stop();
  }
  // Link interceptor delegate
  shouldInterceptLinkClick(element, _location, _event) {
    return this.#shouldRedirect(element);
  }
  linkClickIntercepted(element, url, event) {
    const frame = this.#findFrameElement(element);
    if (frame) {
      frame.delegate.linkClickIntercepted(element, url, event);
    }
  }
  // Form submit observer delegate
  willSubmitForm(element, submitter2) {
    return element.closest("turbo-frame") == null && this.#shouldSubmit(element, submitter2) && this.#shouldRedirect(element, submitter2);
  }
  formSubmitted(element, submitter2) {
    const frame = this.#findFrameElement(element, submitter2);
    if (frame) {
      frame.delegate.formSubmitted(element, submitter2);
    }
  }
  #shouldSubmit(form, submitter2) {
    const action = getAction$1(form, submitter2);
    const meta = this.element.ownerDocument.querySelector(`meta[name="turbo-root"]`);
    const rootLocation = expandURL(meta?.content ?? "/");
    return this.#shouldRedirect(form, submitter2) && locationIsVisitable(action, rootLocation);
  }
  #shouldRedirect(element, submitter2) {
    const isNavigatable = element instanceof HTMLFormElement ? this.session.submissionIsNavigatable(element, submitter2) : this.session.elementIsNavigatable(element);
    if (isNavigatable) {
      const frame = this.#findFrameElement(element, submitter2);
      return frame ? frame != element.closest("turbo-frame") : false;
    } else {
      return false;
    }
  }
  #findFrameElement(element, submitter2) {
    const id2 = submitter2?.getAttribute("data-turbo-frame") || element.getAttribute("data-turbo-frame");
    if (id2 && id2 != "_top") {
      const frame = this.element.querySelector(`#${id2}:not([disabled])`);
      if (frame instanceof FrameElement) {
        return frame;
      }
    }
  }
};
var History = class {
  location;
  restorationIdentifier = uuid();
  restorationData = {};
  started = false;
  pageLoaded = false;
  currentIndex = 0;
  constructor(delegate) {
    this.delegate = delegate;
  }
  start() {
    if (!this.started) {
      addEventListener("popstate", this.onPopState, false);
      addEventListener("load", this.onPageLoad, false);
      this.currentIndex = history.state?.turbo?.restorationIndex || 0;
      this.started = true;
      this.replace(new URL(window.location.href));
    }
  }
  stop() {
    if (this.started) {
      removeEventListener("popstate", this.onPopState, false);
      removeEventListener("load", this.onPageLoad, false);
      this.started = false;
    }
  }
  push(location2, restorationIdentifier) {
    this.update(history.pushState, location2, restorationIdentifier);
  }
  replace(location2, restorationIdentifier) {
    this.update(history.replaceState, location2, restorationIdentifier);
  }
  update(method, location2, restorationIdentifier = uuid()) {
    if (method === history.pushState) ++this.currentIndex;
    const state = { turbo: { restorationIdentifier, restorationIndex: this.currentIndex } };
    method.call(history, state, "", location2.href);
    this.location = location2;
    this.restorationIdentifier = restorationIdentifier;
  }
  // Restoration data
  getRestorationDataForIdentifier(restorationIdentifier) {
    return this.restorationData[restorationIdentifier] || {};
  }
  updateRestorationData(additionalData) {
    const { restorationIdentifier } = this;
    const restorationData = this.restorationData[restorationIdentifier];
    this.restorationData[restorationIdentifier] = {
      ...restorationData,
      ...additionalData
    };
  }
  // Scroll restoration
  assumeControlOfScrollRestoration() {
    if (!this.previousScrollRestoration) {
      this.previousScrollRestoration = history.scrollRestoration ?? "auto";
      history.scrollRestoration = "manual";
    }
  }
  relinquishControlOfScrollRestoration() {
    if (this.previousScrollRestoration) {
      history.scrollRestoration = this.previousScrollRestoration;
      delete this.previousScrollRestoration;
    }
  }
  // Event handlers
  onPopState = (event) => {
    if (this.shouldHandlePopState()) {
      const { turbo } = event.state || {};
      if (turbo) {
        this.location = new URL(window.location.href);
        const { restorationIdentifier, restorationIndex } = turbo;
        this.restorationIdentifier = restorationIdentifier;
        const direction = restorationIndex > this.currentIndex ? "forward" : "back";
        this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location, restorationIdentifier, direction);
        this.currentIndex = restorationIndex;
      }
    }
  };
  onPageLoad = async (_event) => {
    await nextMicrotask();
    this.pageLoaded = true;
  };
  // Private
  shouldHandlePopState() {
    return this.pageIsLoaded();
  }
  pageIsLoaded() {
    return this.pageLoaded || document.readyState == "complete";
  }
};
var LinkPrefetchObserver = class {
  started = false;
  #prefetchedLink = null;
  constructor(delegate, eventTarget) {
    this.delegate = delegate;
    this.eventTarget = eventTarget;
  }
  start() {
    if (this.started) return;
    if (this.eventTarget.readyState === "loading") {
      this.eventTarget.addEventListener("DOMContentLoaded", this.#enable, { once: true });
    } else {
      this.#enable();
    }
  }
  stop() {
    if (!this.started) return;
    this.eventTarget.removeEventListener("mouseenter", this.#tryToPrefetchRequest, {
      capture: true,
      passive: true
    });
    this.eventTarget.removeEventListener("mouseleave", this.#cancelRequestIfObsolete, {
      capture: true,
      passive: true
    });
    this.eventTarget.removeEventListener("turbo:before-fetch-request", this.#tryToUsePrefetchedRequest, true);
    this.started = false;
  }
  #enable = () => {
    this.eventTarget.addEventListener("mouseenter", this.#tryToPrefetchRequest, {
      capture: true,
      passive: true
    });
    this.eventTarget.addEventListener("mouseleave", this.#cancelRequestIfObsolete, {
      capture: true,
      passive: true
    });
    this.eventTarget.addEventListener("turbo:before-fetch-request", this.#tryToUsePrefetchedRequest, true);
    this.started = true;
  };
  #tryToPrefetchRequest = (event) => {
    if (getMetaContent("turbo-prefetch") === "false") return;
    const target = event.target;
    const isLink = target.matches && target.matches("a[href]:not([target^=_]):not([download])");
    if (isLink && this.#isPrefetchable(target)) {
      const link = target;
      const location2 = getLocationForLink(link);
      if (this.delegate.canPrefetchRequestToLocation(link, location2)) {
        this.#prefetchedLink = link;
        const fetchRequest = new FetchRequest(
          this,
          FetchMethod.get,
          location2,
          new URLSearchParams(),
          target
        );
        fetchRequest.fetchOptions.priority = "low";
        prefetchCache.setLater(location2.toString(), fetchRequest, this.#cacheTtl);
      }
    }
  };
  #cancelRequestIfObsolete = (event) => {
    if (event.target === this.#prefetchedLink) this.#cancelPrefetchRequest();
  };
  #cancelPrefetchRequest = () => {
    prefetchCache.clear();
    this.#prefetchedLink = null;
  };
  #tryToUsePrefetchedRequest = (event) => {
    if (event.target.tagName !== "FORM" && event.detail.fetchOptions.method === "GET") {
      const cached = prefetchCache.get(event.detail.url.toString());
      if (cached) {
        event.detail.fetchRequest = cached;
      }
      prefetchCache.clear();
    }
  };
  prepareRequest(request) {
    const link = request.target;
    request.headers["X-Sec-Purpose"] = "prefetch";
    const turboFrame = link.closest("turbo-frame");
    const turboFrameTarget = link.getAttribute("data-turbo-frame") || turboFrame?.getAttribute("target") || turboFrame?.id;
    if (turboFrameTarget && turboFrameTarget !== "_top") {
      request.headers["Turbo-Frame"] = turboFrameTarget;
    }
  }
  // Fetch request interface
  requestSucceededWithResponse() {
  }
  requestStarted(fetchRequest) {
  }
  requestErrored(fetchRequest) {
  }
  requestFinished(fetchRequest) {
  }
  requestPreventedHandlingResponse(fetchRequest, fetchResponse) {
  }
  requestFailedWithResponse(fetchRequest, fetchResponse) {
  }
  get #cacheTtl() {
    return Number(getMetaContent("turbo-prefetch-cache-time")) || cacheTtl;
  }
  #isPrefetchable(link) {
    const href = link.getAttribute("href");
    if (!href) return false;
    if (unfetchableLink(link)) return false;
    if (linkToTheSamePage(link)) return false;
    if (linkOptsOut(link)) return false;
    if (nonSafeLink(link)) return false;
    if (eventPrevented(link)) return false;
    return true;
  }
};
var unfetchableLink = (link) => {
  return link.origin !== document.location.origin || !["http:", "https:"].includes(link.protocol) || link.hasAttribute("target");
};
var linkToTheSamePage = (link) => {
  return link.pathname + link.search === document.location.pathname + document.location.search || link.href.startsWith("#");
};
var linkOptsOut = (link) => {
  if (link.getAttribute("data-turbo-prefetch") === "false") return true;
  if (link.getAttribute("data-turbo") === "false") return true;
  const turboPrefetchParent = findClosestRecursively(link, "[data-turbo-prefetch]");
  if (turboPrefetchParent && turboPrefetchParent.getAttribute("data-turbo-prefetch") === "false") return true;
  return false;
};
var nonSafeLink = (link) => {
  const turboMethod = link.getAttribute("data-turbo-method");
  if (turboMethod && turboMethod.toLowerCase() !== "get") return true;
  if (isUJS(link)) return true;
  if (link.hasAttribute("data-turbo-confirm")) return true;
  if (link.hasAttribute("data-turbo-stream")) return true;
  return false;
};
var isUJS = (link) => {
  return link.hasAttribute("data-remote") || link.hasAttribute("data-behavior") || link.hasAttribute("data-confirm") || link.hasAttribute("data-method");
};
var eventPrevented = (link) => {
  const event = dispatch2("turbo:before-prefetch", { target: link, cancelable: true });
  return event.defaultPrevented;
};
var Navigator = class {
  constructor(delegate) {
    this.delegate = delegate;
  }
  proposeVisit(location2, options = {}) {
    if (this.delegate.allowsVisitingLocationWithAction(location2, options.action)) {
      this.delegate.visitProposedToLocation(location2, options);
    }
  }
  startVisit(locatable, restorationIdentifier, options = {}) {
    this.stop();
    this.currentVisit = new Visit(this, expandURL(locatable), restorationIdentifier, {
      referrer: this.location,
      ...options
    });
    this.currentVisit.start();
  }
  submitForm(form, submitter2) {
    this.stop();
    this.formSubmission = new FormSubmission(this, form, submitter2, true);
    this.formSubmission.start();
  }
  stop() {
    if (this.formSubmission) {
      this.formSubmission.stop();
      delete this.formSubmission;
    }
    if (this.currentVisit) {
      this.currentVisit.cancel();
      delete this.currentVisit;
    }
  }
  get adapter() {
    return this.delegate.adapter;
  }
  get view() {
    return this.delegate.view;
  }
  get rootLocation() {
    return this.view.snapshot.rootLocation;
  }
  get history() {
    return this.delegate.history;
  }
  // Form submission delegate
  formSubmissionStarted(formSubmission) {
    if (typeof this.adapter.formSubmissionStarted === "function") {
      this.adapter.formSubmissionStarted(formSubmission);
    }
  }
  async formSubmissionSucceededWithResponse(formSubmission, fetchResponse) {
    if (formSubmission == this.formSubmission) {
      const responseHTML = await fetchResponse.responseHTML;
      if (responseHTML) {
        const shouldCacheSnapshot = formSubmission.isSafe;
        if (!shouldCacheSnapshot) {
          this.view.clearSnapshotCache();
        }
        const { statusCode, redirected } = fetchResponse;
        const action = this.#getActionForFormSubmission(formSubmission, fetchResponse);
        const visitOptions = {
          action,
          shouldCacheSnapshot,
          response: { statusCode, responseHTML, redirected }
        };
        this.proposeVisit(fetchResponse.location, visitOptions);
      }
    }
  }
  async formSubmissionFailedWithResponse(formSubmission, fetchResponse) {
    const responseHTML = await fetchResponse.responseHTML;
    if (responseHTML) {
      const snapshot = PageSnapshot.fromHTMLString(responseHTML);
      if (fetchResponse.serverError) {
        await this.view.renderError(snapshot, this.currentVisit);
      } else {
        await this.view.renderPage(snapshot, false, true, this.currentVisit);
      }
      if (!snapshot.shouldPreserveScrollPosition) {
        this.view.scrollToTop();
      }
      this.view.clearSnapshotCache();
    }
  }
  formSubmissionErrored(formSubmission, error3) {
    console.error(error3);
  }
  formSubmissionFinished(formSubmission) {
    if (typeof this.adapter.formSubmissionFinished === "function") {
      this.adapter.formSubmissionFinished(formSubmission);
    }
  }
  // Link prefetching
  linkPrefetchingIsEnabledForLocation(location2) {
    if (typeof this.adapter.linkPrefetchingIsEnabledForLocation === "function") {
      return this.adapter.linkPrefetchingIsEnabledForLocation(location2);
    }
    return true;
  }
  // Visit delegate
  visitStarted(visit2) {
    this.delegate.visitStarted(visit2);
  }
  visitCompleted(visit2) {
    this.delegate.visitCompleted(visit2);
    delete this.currentVisit;
  }
  locationWithActionIsSamePage(location2, action) {
    const anchor = getAnchor(location2);
    const currentAnchor = getAnchor(this.view.lastRenderedLocation);
    const isRestorationToTop = action === "restore" && typeof anchor === "undefined";
    return action !== "replace" && getRequestURL(location2) === getRequestURL(this.view.lastRenderedLocation) && (isRestorationToTop || anchor != null && anchor !== currentAnchor);
  }
  visitScrolledToSamePageLocation(oldURL, newURL) {
    this.delegate.visitScrolledToSamePageLocation(oldURL, newURL);
  }
  // Visits
  get location() {
    return this.history.location;
  }
  get restorationIdentifier() {
    return this.history.restorationIdentifier;
  }
  #getActionForFormSubmission(formSubmission, fetchResponse) {
    const { submitter: submitter2, formElement } = formSubmission;
    return getVisitAction(submitter2, formElement) || this.#getDefaultAction(fetchResponse);
  }
  #getDefaultAction(fetchResponse) {
    const sameLocationRedirect = fetchResponse.redirected && fetchResponse.location.href === this.location?.href;
    return sameLocationRedirect ? "replace" : "advance";
  }
};
var PageStage = {
  initial: 0,
  loading: 1,
  interactive: 2,
  complete: 3
};
var PageObserver = class {
  stage = PageStage.initial;
  started = false;
  constructor(delegate) {
    this.delegate = delegate;
  }
  start() {
    if (!this.started) {
      if (this.stage == PageStage.initial) {
        this.stage = PageStage.loading;
      }
      document.addEventListener("readystatechange", this.interpretReadyState, false);
      addEventListener("pagehide", this.pageWillUnload, false);
      this.started = true;
    }
  }
  stop() {
    if (this.started) {
      document.removeEventListener("readystatechange", this.interpretReadyState, false);
      removeEventListener("pagehide", this.pageWillUnload, false);
      this.started = false;
    }
  }
  interpretReadyState = () => {
    const { readyState } = this;
    if (readyState == "interactive") {
      this.pageIsInteractive();
    } else if (readyState == "complete") {
      this.pageIsComplete();
    }
  };
  pageIsInteractive() {
    if (this.stage == PageStage.loading) {
      this.stage = PageStage.interactive;
      this.delegate.pageBecameInteractive();
    }
  }
  pageIsComplete() {
    this.pageIsInteractive();
    if (this.stage == PageStage.interactive) {
      this.stage = PageStage.complete;
      this.delegate.pageLoaded();
    }
  }
  pageWillUnload = () => {
    this.delegate.pageWillUnload();
  };
  get readyState() {
    return document.readyState;
  }
};
var ScrollObserver = class {
  started = false;
  constructor(delegate) {
    this.delegate = delegate;
  }
  start() {
    if (!this.started) {
      addEventListener("scroll", this.onScroll, false);
      this.onScroll();
      this.started = true;
    }
  }
  stop() {
    if (this.started) {
      removeEventListener("scroll", this.onScroll, false);
      this.started = false;
    }
  }
  onScroll = () => {
    this.updatePosition({ x: window.pageXOffset, y: window.pageYOffset });
  };
  // Private
  updatePosition(position) {
    this.delegate.scrollPositionChanged(position);
  }
};
var StreamMessageRenderer = class {
  render({ fragment }) {
    Bardo.preservingPermanentElements(this, getPermanentElementMapForFragment(fragment), () => {
      withAutofocusFromFragment(fragment, () => {
        withPreservedFocus(() => {
          document.documentElement.appendChild(fragment);
        });
      });
    });
  }
  // Bardo delegate
  enteringBardo(currentPermanentElement, newPermanentElement) {
    newPermanentElement.replaceWith(currentPermanentElement.cloneNode(true));
  }
  leavingBardo() {
  }
};
function getPermanentElementMapForFragment(fragment) {
  const permanentElementsInDocument = queryPermanentElementsAll(document.documentElement);
  const permanentElementMap = {};
  for (const permanentElementInDocument of permanentElementsInDocument) {
    const { id: id2 } = permanentElementInDocument;
    for (const streamElement of fragment.querySelectorAll("turbo-stream")) {
      const elementInStream = getPermanentElementById(streamElement.templateElement.content, id2);
      if (elementInStream) {
        permanentElementMap[id2] = [permanentElementInDocument, elementInStream];
      }
    }
  }
  return permanentElementMap;
}
async function withAutofocusFromFragment(fragment, callback) {
  const generatedID = `turbo-stream-autofocus-${uuid()}`;
  const turboStreams = fragment.querySelectorAll("turbo-stream");
  const elementWithAutofocus = firstAutofocusableElementInStreams(turboStreams);
  let willAutofocusId = null;
  if (elementWithAutofocus) {
    if (elementWithAutofocus.id) {
      willAutofocusId = elementWithAutofocus.id;
    } else {
      willAutofocusId = generatedID;
    }
    elementWithAutofocus.id = willAutofocusId;
  }
  callback();
  await nextRepaint();
  const hasNoActiveElement = document.activeElement == null || document.activeElement == document.body;
  if (hasNoActiveElement && willAutofocusId) {
    const elementToAutofocus = document.getElementById(willAutofocusId);
    if (elementIsFocusable(elementToAutofocus)) {
      elementToAutofocus.focus();
    }
    if (elementToAutofocus && elementToAutofocus.id == generatedID) {
      elementToAutofocus.removeAttribute("id");
    }
  }
}
async function withPreservedFocus(callback) {
  const [activeElementBeforeRender, activeElementAfterRender] = await around(callback, () => document.activeElement);
  const restoreFocusTo = activeElementBeforeRender && activeElementBeforeRender.id;
  if (restoreFocusTo) {
    const elementToFocus = document.getElementById(restoreFocusTo);
    if (elementIsFocusable(elementToFocus) && elementToFocus != activeElementAfterRender) {
      elementToFocus.focus();
    }
  }
}
function firstAutofocusableElementInStreams(nodeListOfStreamElements) {
  for (const streamElement of nodeListOfStreamElements) {
    const elementWithAutofocus = queryAutofocusableElement(streamElement.templateElement.content);
    if (elementWithAutofocus) return elementWithAutofocus;
  }
  return null;
}
var StreamObserver = class {
  sources = /* @__PURE__ */ new Set();
  #started = false;
  constructor(delegate) {
    this.delegate = delegate;
  }
  start() {
    if (!this.#started) {
      this.#started = true;
      addEventListener("turbo:before-fetch-response", this.inspectFetchResponse, false);
    }
  }
  stop() {
    if (this.#started) {
      this.#started = false;
      removeEventListener("turbo:before-fetch-response", this.inspectFetchResponse, false);
    }
  }
  connectStreamSource(source) {
    if (!this.streamSourceIsConnected(source)) {
      this.sources.add(source);
      source.addEventListener("message", this.receiveMessageEvent, false);
    }
  }
  disconnectStreamSource(source) {
    if (this.streamSourceIsConnected(source)) {
      this.sources.delete(source);
      source.removeEventListener("message", this.receiveMessageEvent, false);
    }
  }
  streamSourceIsConnected(source) {
    return this.sources.has(source);
  }
  inspectFetchResponse = (event) => {
    const response = fetchResponseFromEvent(event);
    if (response && fetchResponseIsStream(response)) {
      event.preventDefault();
      this.receiveMessageResponse(response);
    }
  };
  receiveMessageEvent = (event) => {
    if (this.#started && typeof event.data == "string") {
      this.receiveMessageHTML(event.data);
    }
  };
  async receiveMessageResponse(response) {
    const html = await response.responseHTML;
    if (html) {
      this.receiveMessageHTML(html);
    }
  }
  receiveMessageHTML(html) {
    this.delegate.receivedMessageFromStream(StreamMessage.wrap(html));
  }
};
function fetchResponseFromEvent(event) {
  const fetchResponse = event.detail?.fetchResponse;
  if (fetchResponse instanceof FetchResponse) {
    return fetchResponse;
  }
}
function fetchResponseIsStream(response) {
  const contentType = response.contentType ?? "";
  return contentType.startsWith(StreamMessage.contentType);
}
var ErrorRenderer = class extends Renderer {
  static renderElement(currentElement, newElement) {
    const { documentElement, body } = document;
    documentElement.replaceChild(newElement, body);
  }
  async render() {
    this.replaceHeadAndBody();
    this.activateScriptElements();
  }
  replaceHeadAndBody() {
    const { documentElement, head } = document;
    documentElement.replaceChild(this.newHead, head);
    this.renderElement(this.currentElement, this.newElement);
  }
  activateScriptElements() {
    for (const replaceableElement of this.scriptElements) {
      const parentNode = replaceableElement.parentNode;
      if (parentNode) {
        const element = activateScriptElement(replaceableElement);
        parentNode.replaceChild(element, replaceableElement);
      }
    }
  }
  get newHead() {
    return this.newSnapshot.headSnapshot.element;
  }
  get scriptElements() {
    return document.documentElement.querySelectorAll("script");
  }
};
var PageRenderer = class extends Renderer {
  static renderElement(currentElement, newElement) {
    if (document.body && newElement instanceof HTMLBodyElement) {
      document.body.replaceWith(newElement);
    } else {
      document.documentElement.appendChild(newElement);
    }
  }
  get shouldRender() {
    return this.newSnapshot.isVisitable && this.trackedElementsAreIdentical;
  }
  get reloadReason() {
    if (!this.newSnapshot.isVisitable) {
      return {
        reason: "turbo_visit_control_is_reload"
      };
    }
    if (!this.trackedElementsAreIdentical) {
      return {
        reason: "tracked_element_mismatch"
      };
    }
  }
  async prepareToRender() {
    this.#setLanguage();
    await this.mergeHead();
  }
  async render() {
    if (this.willRender) {
      await this.replaceBody();
    }
  }
  finishRendering() {
    super.finishRendering();
    if (!this.isPreview) {
      this.focusFirstAutofocusableElement();
    }
  }
  get currentHeadSnapshot() {
    return this.currentSnapshot.headSnapshot;
  }
  get newHeadSnapshot() {
    return this.newSnapshot.headSnapshot;
  }
  get newElement() {
    return this.newSnapshot.element;
  }
  #setLanguage() {
    const { documentElement } = this.currentSnapshot;
    const { lang } = this.newSnapshot;
    if (lang) {
      documentElement.setAttribute("lang", lang);
    } else {
      documentElement.removeAttribute("lang");
    }
  }
  async mergeHead() {
    const mergedHeadElements = this.mergeProvisionalElements();
    const newStylesheetElements = this.copyNewHeadStylesheetElements();
    this.copyNewHeadScriptElements();
    await mergedHeadElements;
    await newStylesheetElements;
    if (this.willRender) {
      this.removeUnusedDynamicStylesheetElements();
    }
  }
  async replaceBody() {
    await this.preservingPermanentElements(async () => {
      this.activateNewBody();
      await this.assignNewBody();
    });
  }
  get trackedElementsAreIdentical() {
    return this.currentHeadSnapshot.trackedElementSignature == this.newHeadSnapshot.trackedElementSignature;
  }
  async copyNewHeadStylesheetElements() {
    const loadingElements = [];
    for (const element of this.newHeadStylesheetElements) {
      loadingElements.push(waitForLoad(element));
      document.head.appendChild(element);
    }
    await Promise.all(loadingElements);
  }
  copyNewHeadScriptElements() {
    for (const element of this.newHeadScriptElements) {
      document.head.appendChild(activateScriptElement(element));
    }
  }
  removeUnusedDynamicStylesheetElements() {
    for (const element of this.unusedDynamicStylesheetElements) {
      document.head.removeChild(element);
    }
  }
  async mergeProvisionalElements() {
    const newHeadElements = [...this.newHeadProvisionalElements];
    for (const element of this.currentHeadProvisionalElements) {
      if (!this.isCurrentElementInElementList(element, newHeadElements)) {
        document.head.removeChild(element);
      }
    }
    for (const element of newHeadElements) {
      document.head.appendChild(element);
    }
  }
  isCurrentElementInElementList(element, elementList) {
    for (const [index, newElement] of elementList.entries()) {
      if (element.tagName == "TITLE") {
        if (newElement.tagName != "TITLE") {
          continue;
        }
        if (element.innerHTML == newElement.innerHTML) {
          elementList.splice(index, 1);
          return true;
        }
      }
      if (newElement.isEqualNode(element)) {
        elementList.splice(index, 1);
        return true;
      }
    }
    return false;
  }
  removeCurrentHeadProvisionalElements() {
    for (const element of this.currentHeadProvisionalElements) {
      document.head.removeChild(element);
    }
  }
  copyNewHeadProvisionalElements() {
    for (const element of this.newHeadProvisionalElements) {
      document.head.appendChild(element);
    }
  }
  activateNewBody() {
    document.adoptNode(this.newElement);
    this.activateNewBodyScriptElements();
  }
  activateNewBodyScriptElements() {
    for (const inertScriptElement of this.newBodyScriptElements) {
      const activatedScriptElement = activateScriptElement(inertScriptElement);
      inertScriptElement.replaceWith(activatedScriptElement);
    }
  }
  async assignNewBody() {
    await this.renderElement(this.currentElement, this.newElement);
  }
  get unusedDynamicStylesheetElements() {
    return this.oldHeadStylesheetElements.filter((element) => {
      return element.getAttribute("data-turbo-track") === "dynamic";
    });
  }
  get oldHeadStylesheetElements() {
    return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot);
  }
  get newHeadStylesheetElements() {
    return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot);
  }
  get newHeadScriptElements() {
    return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot);
  }
  get currentHeadProvisionalElements() {
    return this.currentHeadSnapshot.provisionalElements;
  }
  get newHeadProvisionalElements() {
    return this.newHeadSnapshot.provisionalElements;
  }
  get newBodyScriptElements() {
    return this.newElement.querySelectorAll("script");
  }
};
var MorphingPageRenderer = class extends PageRenderer {
  static renderElement(currentElement, newElement) {
    morphElements(currentElement, newElement, {
      callbacks: {
        beforeNodeMorphed: (node, newNode) => {
          if (shouldRefreshFrameWithMorphing(node, newNode) && !closestFrameReloadableWithMorphing(node)) {
            node.reload();
            return false;
          }
          return true;
        }
      }
    });
    dispatch2("turbo:morph", { detail: { currentElement, newElement } });
  }
  async preservingPermanentElements(callback) {
    return await callback();
  }
  get renderMethod() {
    return "morph";
  }
  get shouldAutofocus() {
    return false;
  }
};
var SnapshotCache = class {
  keys = [];
  snapshots = {};
  constructor(size2) {
    this.size = size2;
  }
  has(location2) {
    return toCacheKey(location2) in this.snapshots;
  }
  get(location2) {
    if (this.has(location2)) {
      const snapshot = this.read(location2);
      this.touch(location2);
      return snapshot;
    }
  }
  put(location2, snapshot) {
    this.write(location2, snapshot);
    this.touch(location2);
    return snapshot;
  }
  clear() {
    this.snapshots = {};
  }
  // Private
  read(location2) {
    return this.snapshots[toCacheKey(location2)];
  }
  write(location2, snapshot) {
    this.snapshots[toCacheKey(location2)] = snapshot;
  }
  touch(location2) {
    const key = toCacheKey(location2);
    const index = this.keys.indexOf(key);
    if (index > -1) this.keys.splice(index, 1);
    this.keys.unshift(key);
    this.trim();
  }
  trim() {
    for (const key of this.keys.splice(this.size)) {
      delete this.snapshots[key];
    }
  }
};
var PageView = class extends View {
  snapshotCache = new SnapshotCache(10);
  lastRenderedLocation = new URL(location.href);
  forceReloaded = false;
  shouldTransitionTo(newSnapshot) {
    return this.snapshot.prefersViewTransitions && newSnapshot.prefersViewTransitions;
  }
  renderPage(snapshot, isPreview = false, willRender = true, visit2) {
    const shouldMorphPage = this.isPageRefresh(visit2) && this.snapshot.shouldMorphPage;
    const rendererClass = shouldMorphPage ? MorphingPageRenderer : PageRenderer;
    const renderer = new rendererClass(this.snapshot, snapshot, isPreview, willRender);
    if (!renderer.shouldRender) {
      this.forceReloaded = true;
    } else {
      visit2?.changeHistory();
    }
    return this.render(renderer);
  }
  renderError(snapshot, visit2) {
    visit2?.changeHistory();
    const renderer = new ErrorRenderer(this.snapshot, snapshot, false);
    return this.render(renderer);
  }
  clearSnapshotCache() {
    this.snapshotCache.clear();
  }
  async cacheSnapshot(snapshot = this.snapshot) {
    if (snapshot.isCacheable) {
      this.delegate.viewWillCacheSnapshot();
      const { lastRenderedLocation: location2 } = this;
      await nextEventLoopTick();
      const cachedSnapshot = snapshot.clone();
      this.snapshotCache.put(location2, cachedSnapshot);
      return cachedSnapshot;
    }
  }
  getCachedSnapshotForLocation(location2) {
    return this.snapshotCache.get(location2);
  }
  isPageRefresh(visit2) {
    return !visit2 || this.lastRenderedLocation.pathname === visit2.location.pathname && visit2.action === "replace";
  }
  shouldPreserveScrollPosition(visit2) {
    return this.isPageRefresh(visit2) && this.snapshot.shouldPreserveScrollPosition;
  }
  get snapshot() {
    return PageSnapshot.fromElement(this.element);
  }
};
var Preloader = class {
  selector = "a[data-turbo-preload]";
  constructor(delegate, snapshotCache) {
    this.delegate = delegate;
    this.snapshotCache = snapshotCache;
  }
  start() {
    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", this.#preloadAll);
    } else {
      this.preloadOnLoadLinksForView(document.body);
    }
  }
  stop() {
    document.removeEventListener("DOMContentLoaded", this.#preloadAll);
  }
  preloadOnLoadLinksForView(element) {
    for (const link of element.querySelectorAll(this.selector)) {
      if (this.delegate.shouldPreloadLink(link)) {
        this.preloadURL(link);
      }
    }
  }
  async preloadURL(link) {
    const location2 = new URL(link.href);
    if (this.snapshotCache.has(location2)) {
      return;
    }
    const fetchRequest = new FetchRequest(this, FetchMethod.get, location2, new URLSearchParams(), link);
    await fetchRequest.perform();
  }
  // Fetch request delegate
  prepareRequest(fetchRequest) {
    fetchRequest.headers["X-Sec-Purpose"] = "prefetch";
  }
  async requestSucceededWithResponse(fetchRequest, fetchResponse) {
    try {
      const responseHTML = await fetchResponse.responseHTML;
      const snapshot = PageSnapshot.fromHTMLString(responseHTML);
      this.snapshotCache.put(fetchRequest.url, snapshot);
    } catch (_) {
    }
  }
  requestStarted(fetchRequest) {
  }
  requestErrored(fetchRequest) {
  }
  requestFinished(fetchRequest) {
  }
  requestPreventedHandlingResponse(fetchRequest, fetchResponse) {
  }
  requestFailedWithResponse(fetchRequest, fetchResponse) {
  }
  #preloadAll = () => {
    this.preloadOnLoadLinksForView(document.body);
  };
};
var Cache = class {
  constructor(session2) {
    this.session = session2;
  }
  clear() {
    this.session.clearCache();
  }
  resetCacheControl() {
    this.#setCacheControl("");
  }
  exemptPageFromCache() {
    this.#setCacheControl("no-cache");
  }
  exemptPageFromPreview() {
    this.#setCacheControl("no-preview");
  }
  #setCacheControl(value) {
    setMetaContent("turbo-cache-control", value);
  }
};
var Session = class {
  navigator = new Navigator(this);
  history = new History(this);
  view = new PageView(this, document.documentElement);
  adapter = new BrowserAdapter(this);
  pageObserver = new PageObserver(this);
  cacheObserver = new CacheObserver();
  linkPrefetchObserver = new LinkPrefetchObserver(this, document);
  linkClickObserver = new LinkClickObserver(this, window);
  formSubmitObserver = new FormSubmitObserver(this, document);
  scrollObserver = new ScrollObserver(this);
  streamObserver = new StreamObserver(this);
  formLinkClickObserver = new FormLinkClickObserver(this, document.documentElement);
  frameRedirector = new FrameRedirector(this, document.documentElement);
  streamMessageRenderer = new StreamMessageRenderer();
  cache = new Cache(this);
  enabled = true;
  started = false;
  #pageRefreshDebouncePeriod = 150;
  constructor(recentRequests2) {
    this.recentRequests = recentRequests2;
    this.preloader = new Preloader(this, this.view.snapshotCache);
    this.debouncedRefresh = this.refresh;
    this.pageRefreshDebouncePeriod = this.pageRefreshDebouncePeriod;
  }
  start() {
    if (!this.started) {
      this.pageObserver.start();
      this.cacheObserver.start();
      this.linkPrefetchObserver.start();
      this.formLinkClickObserver.start();
      this.linkClickObserver.start();
      this.formSubmitObserver.start();
      this.scrollObserver.start();
      this.streamObserver.start();
      this.frameRedirector.start();
      this.history.start();
      this.preloader.start();
      this.started = true;
      this.enabled = true;
    }
  }
  disable() {
    this.enabled = false;
  }
  stop() {
    if (this.started) {
      this.pageObserver.stop();
      this.cacheObserver.stop();
      this.linkPrefetchObserver.stop();
      this.formLinkClickObserver.stop();
      this.linkClickObserver.stop();
      this.formSubmitObserver.stop();
      this.scrollObserver.stop();
      this.streamObserver.stop();
      this.frameRedirector.stop();
      this.history.stop();
      this.preloader.stop();
      this.started = false;
    }
  }
  registerAdapter(adapter) {
    this.adapter = adapter;
  }
  visit(location2, options = {}) {
    const frameElement = options.frame ? document.getElementById(options.frame) : null;
    if (frameElement instanceof FrameElement) {
      const action = options.action || getVisitAction(frameElement);
      frameElement.delegate.proposeVisitIfNavigatedWithAction(frameElement, action);
      frameElement.src = location2.toString();
    } else {
      this.navigator.proposeVisit(expandURL(location2), options);
    }
  }
  refresh(url, requestId) {
    const isRecentRequest = requestId && this.recentRequests.has(requestId);
    const isCurrentUrl = url === document.baseURI;
    if (!isRecentRequest && !this.navigator.currentVisit && isCurrentUrl) {
      this.visit(url, { action: "replace", shouldCacheSnapshot: false });
    }
  }
  connectStreamSource(source) {
    this.streamObserver.connectStreamSource(source);
  }
  disconnectStreamSource(source) {
    this.streamObserver.disconnectStreamSource(source);
  }
  renderStreamMessage(message) {
    this.streamMessageRenderer.render(StreamMessage.wrap(message));
  }
  clearCache() {
    this.view.clearSnapshotCache();
  }
  setProgressBarDelay(delay) {
    console.warn(
      "Please replace `session.setProgressBarDelay(delay)` with `session.progressBarDelay = delay`. The function is deprecated and will be removed in a future version of Turbo.`"
    );
    this.progressBarDelay = delay;
  }
  set progressBarDelay(delay) {
    config.drive.progressBarDelay = delay;
  }
  get progressBarDelay() {
    return config.drive.progressBarDelay;
  }
  set drive(value) {
    config.drive.enabled = value;
  }
  get drive() {
    return config.drive.enabled;
  }
  set formMode(value) {
    config.forms.mode = value;
  }
  get formMode() {
    return config.forms.mode;
  }
  get location() {
    return this.history.location;
  }
  get restorationIdentifier() {
    return this.history.restorationIdentifier;
  }
  get pageRefreshDebouncePeriod() {
    return this.#pageRefreshDebouncePeriod;
  }
  set pageRefreshDebouncePeriod(value) {
    this.refresh = debounce2(this.debouncedRefresh.bind(this), value);
    this.#pageRefreshDebouncePeriod = value;
  }
  // Preloader delegate
  shouldPreloadLink(element) {
    const isUnsafe = element.hasAttribute("data-turbo-method");
    const isStream = element.hasAttribute("data-turbo-stream");
    const frameTarget = element.getAttribute("data-turbo-frame");
    const frame = frameTarget == "_top" ? null : document.getElementById(frameTarget) || findClosestRecursively(element, "turbo-frame:not([disabled])");
    if (isUnsafe || isStream || frame instanceof FrameElement) {
      return false;
    } else {
      const location2 = new URL(element.href);
      return this.elementIsNavigatable(element) && locationIsVisitable(location2, this.snapshot.rootLocation);
    }
  }
  // History delegate
  historyPoppedToLocationWithRestorationIdentifierAndDirection(location2, restorationIdentifier, direction) {
    if (this.enabled) {
      this.navigator.startVisit(location2, restorationIdentifier, {
        action: "restore",
        historyChanged: true,
        direction
      });
    } else {
      this.adapter.pageInvalidated({
        reason: "turbo_disabled"
      });
    }
  }
  // Scroll observer delegate
  scrollPositionChanged(position) {
    this.history.updateRestorationData({ scrollPosition: position });
  }
  // Form click observer delegate
  willSubmitFormLinkToLocation(link, location2) {
    return this.elementIsNavigatable(link) && locationIsVisitable(location2, this.snapshot.rootLocation);
  }
  submittedFormLinkToLocation() {
  }
  // Link hover observer delegate
  canPrefetchRequestToLocation(link, location2) {
    return this.elementIsNavigatable(link) && locationIsVisitable(location2, this.snapshot.rootLocation) && this.navigator.linkPrefetchingIsEnabledForLocation(location2);
  }
  // Link click observer delegate
  willFollowLinkToLocation(link, location2, event) {
    return this.elementIsNavigatable(link) && locationIsVisitable(location2, this.snapshot.rootLocation) && this.applicationAllowsFollowingLinkToLocation(link, location2, event);
  }
  followedLinkToLocation(link, location2) {
    const action = this.getActionForLink(link);
    const acceptsStreamResponse = link.hasAttribute("data-turbo-stream");
    this.visit(location2.href, { action, acceptsStreamResponse });
  }
  // Navigator delegate
  allowsVisitingLocationWithAction(location2, action) {
    return this.locationWithActionIsSamePage(location2, action) || this.applicationAllowsVisitingLocation(location2);
  }
  visitProposedToLocation(location2, options) {
    extendURLWithDeprecatedProperties(location2);
    this.adapter.visitProposedToLocation(location2, options);
  }
  // Visit delegate
  visitStarted(visit2) {
    if (!visit2.acceptsStreamResponse) {
      markAsBusy(document.documentElement);
      this.view.markVisitDirection(visit2.direction);
    }
    extendURLWithDeprecatedProperties(visit2.location);
    if (!visit2.silent) {
      this.notifyApplicationAfterVisitingLocation(visit2.location, visit2.action);
    }
  }
  visitCompleted(visit2) {
    this.view.unmarkVisitDirection();
    clearBusyState(document.documentElement);
    this.notifyApplicationAfterPageLoad(visit2.getTimingMetrics());
  }
  locationWithActionIsSamePage(location2, action) {
    return this.navigator.locationWithActionIsSamePage(location2, action);
  }
  visitScrolledToSamePageLocation(oldURL, newURL) {
    this.notifyApplicationAfterVisitingSamePageLocation(oldURL, newURL);
  }
  // Form submit observer delegate
  willSubmitForm(form, submitter2) {
    const action = getAction$1(form, submitter2);
    return this.submissionIsNavigatable(form, submitter2) && locationIsVisitable(expandURL(action), this.snapshot.rootLocation);
  }
  formSubmitted(form, submitter2) {
    this.navigator.submitForm(form, submitter2);
  }
  // Page observer delegate
  pageBecameInteractive() {
    this.view.lastRenderedLocation = this.location;
    this.notifyApplicationAfterPageLoad();
  }
  pageLoaded() {
    this.history.assumeControlOfScrollRestoration();
  }
  pageWillUnload() {
    this.history.relinquishControlOfScrollRestoration();
  }
  // Stream observer delegate
  receivedMessageFromStream(message) {
    this.renderStreamMessage(message);
  }
  // Page view delegate
  viewWillCacheSnapshot() {
    if (!this.navigator.currentVisit?.silent) {
      this.notifyApplicationBeforeCachingSnapshot();
    }
  }
  allowsImmediateRender({ element }, options) {
    const event = this.notifyApplicationBeforeRender(element, options);
    const {
      defaultPrevented,
      detail: { render }
    } = event;
    if (this.view.renderer && render) {
      this.view.renderer.renderElement = render;
    }
    return !defaultPrevented;
  }
  viewRenderedSnapshot(_snapshot, _isPreview, renderMethod) {
    this.view.lastRenderedLocation = this.history.location;
    this.notifyApplicationAfterRender(renderMethod);
  }
  preloadOnLoadLinksForView(element) {
    this.preloader.preloadOnLoadLinksForView(element);
  }
  viewInvalidated(reason) {
    this.adapter.pageInvalidated(reason);
  }
  // Frame element
  frameLoaded(frame) {
    this.notifyApplicationAfterFrameLoad(frame);
  }
  frameRendered(fetchResponse, frame) {
    this.notifyApplicationAfterFrameRender(fetchResponse, frame);
  }
  // Application events
  applicationAllowsFollowingLinkToLocation(link, location2, ev) {
    const event = this.notifyApplicationAfterClickingLinkToLocation(link, location2, ev);
    return !event.defaultPrevented;
  }
  applicationAllowsVisitingLocation(location2) {
    const event = this.notifyApplicationBeforeVisitingLocation(location2);
    return !event.defaultPrevented;
  }
  notifyApplicationAfterClickingLinkToLocation(link, location2, event) {
    return dispatch2("turbo:click", {
      target: link,
      detail: { url: location2.href, originalEvent: event },
      cancelable: true
    });
  }
  notifyApplicationBeforeVisitingLocation(location2) {
    return dispatch2("turbo:before-visit", {
      detail: { url: location2.href },
      cancelable: true
    });
  }
  notifyApplicationAfterVisitingLocation(location2, action) {
    return dispatch2("turbo:visit", { detail: { url: location2.href, action } });
  }
  notifyApplicationBeforeCachingSnapshot() {
    return dispatch2("turbo:before-cache");
  }
  notifyApplicationBeforeRender(newBody, options) {
    return dispatch2("turbo:before-render", {
      detail: { newBody, ...options },
      cancelable: true
    });
  }
  notifyApplicationAfterRender(renderMethod) {
    return dispatch2("turbo:render", { detail: { renderMethod } });
  }
  notifyApplicationAfterPageLoad(timing = {}) {
    return dispatch2("turbo:load", {
      detail: { url: this.location.href, timing }
    });
  }
  notifyApplicationAfterVisitingSamePageLocation(oldURL, newURL) {
    dispatchEvent(
      new HashChangeEvent("hashchange", {
        oldURL: oldURL.toString(),
        newURL: newURL.toString()
      })
    );
  }
  notifyApplicationAfterFrameLoad(frame) {
    return dispatch2("turbo:frame-load", { target: frame });
  }
  notifyApplicationAfterFrameRender(fetchResponse, frame) {
    return dispatch2("turbo:frame-render", {
      detail: { fetchResponse },
      target: frame,
      cancelable: true
    });
  }
  // Helpers
  submissionIsNavigatable(form, submitter2) {
    if (config.forms.mode == "off") {
      return false;
    } else {
      const submitterIsNavigatable = submitter2 ? this.elementIsNavigatable(submitter2) : true;
      if (config.forms.mode == "optin") {
        return submitterIsNavigatable && form.closest('[data-turbo="true"]') != null;
      } else {
        return submitterIsNavigatable && this.elementIsNavigatable(form);
      }
    }
  }
  elementIsNavigatable(element) {
    const container = findClosestRecursively(element, "[data-turbo]");
    const withinFrame = findClosestRecursively(element, "turbo-frame");
    if (config.drive.enabled || withinFrame) {
      if (container) {
        return container.getAttribute("data-turbo") != "false";
      } else {
        return true;
      }
    } else {
      if (container) {
        return container.getAttribute("data-turbo") == "true";
      } else {
        return false;
      }
    }
  }
  // Private
  getActionForLink(link) {
    return getVisitAction(link) || "advance";
  }
  get snapshot() {
    return this.view.snapshot;
  }
};
function extendURLWithDeprecatedProperties(url) {
  Object.defineProperties(url, deprecatedLocationPropertyDescriptors);
}
var deprecatedLocationPropertyDescriptors = {
  absoluteURL: {
    get() {
      return this.toString();
    }
  }
};
var session = new Session(recentRequests);
var { cache, navigator: navigator$1 } = session;
function start3() {
  session.start();
}
function registerAdapter(adapter) {
  session.registerAdapter(adapter);
}
function visit(location2, options) {
  session.visit(location2, options);
}
function connectStreamSource(source) {
  session.connectStreamSource(source);
}
function disconnectStreamSource(source) {
  session.disconnectStreamSource(source);
}
function renderStreamMessage(message) {
  session.renderStreamMessage(message);
}
function clearCache() {
  console.warn(
    "Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"
  );
  session.clearCache();
}
function setProgressBarDelay(delay) {
  console.warn(
    "Please replace `Turbo.setProgressBarDelay(delay)` with `Turbo.config.drive.progressBarDelay = delay`. The top-level function is deprecated and will be removed in a future version of Turbo.`"
  );
  config.drive.progressBarDelay = delay;
}
function setConfirmMethod(confirmMethod) {
  console.warn(
    "Please replace `Turbo.setConfirmMethod(confirmMethod)` with `Turbo.config.forms.confirm = confirmMethod`. The top-level function is deprecated and will be removed in a future version of Turbo.`"
  );
  config.forms.confirm = confirmMethod;
}
function setFormMode(mode) {
  console.warn(
    "Please replace `Turbo.setFormMode(mode)` with `Turbo.config.forms.mode = mode`. The top-level function is deprecated and will be removed in a future version of Turbo.`"
  );
  config.forms.mode = mode;
}
function morphBodyElements(currentBody, newBody) {
  MorphingPageRenderer.renderElement(currentBody, newBody);
}
function morphTurboFrameElements(currentFrame, newFrame) {
  MorphingFrameRenderer.renderElement(currentFrame, newFrame);
}
var Turbo2 = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  navigator: navigator$1,
  session,
  cache,
  PageRenderer,
  PageSnapshot,
  FrameRenderer,
  fetch: fetchWithTurboHeaders,
  config,
  start: start3,
  registerAdapter,
  visit,
  connectStreamSource,
  disconnectStreamSource,
  renderStreamMessage,
  clearCache,
  setProgressBarDelay,
  setConfirmMethod,
  setFormMode,
  morphBodyElements,
  morphTurboFrameElements,
  morphChildren,
  morphElements
});
var TurboFrameMissingError = class extends Error {
};
var FrameController = class {
  fetchResponseLoaded = (_fetchResponse) => Promise.resolve();
  #currentFetchRequest = null;
  #resolveVisitPromise = () => {
  };
  #connected = false;
  #hasBeenLoaded = false;
  #ignoredAttributes = /* @__PURE__ */ new Set();
  #shouldMorphFrame = false;
  action = null;
  constructor(element) {
    this.element = element;
    this.view = new FrameView(this, this.element);
    this.appearanceObserver = new AppearanceObserver(this, this.element);
    this.formLinkClickObserver = new FormLinkClickObserver(this, this.element);
    this.linkInterceptor = new LinkInterceptor(this, this.element);
    this.restorationIdentifier = uuid();
    this.formSubmitObserver = new FormSubmitObserver(this, this.element);
  }
  // Frame delegate
  connect() {
    if (!this.#connected) {
      this.#connected = true;
      if (this.loadingStyle == FrameLoadingStyle.lazy) {
        this.appearanceObserver.start();
      } else {
        this.#loadSourceURL();
      }
      this.formLinkClickObserver.start();
      this.linkInterceptor.start();
      this.formSubmitObserver.start();
    }
  }
  disconnect() {
    if (this.#connected) {
      this.#connected = false;
      this.appearanceObserver.stop();
      this.formLinkClickObserver.stop();
      this.linkInterceptor.stop();
      this.formSubmitObserver.stop();
    }
  }
  disabledChanged() {
    if (this.loadingStyle == FrameLoadingStyle.eager) {
      this.#loadSourceURL();
    }
  }
  sourceURLChanged() {
    if (this.#isIgnoringChangesTo("src")) return;
    if (this.element.isConnected) {
      this.complete = false;
    }
    if (this.loadingStyle == FrameLoadingStyle.eager || this.#hasBeenLoaded) {
      this.#loadSourceURL();
    }
  }
  sourceURLReloaded() {
    const { refresh, src } = this.element;
    this.#shouldMorphFrame = src && refresh === "morph";
    this.element.removeAttribute("complete");
    this.element.src = null;
    this.element.src = src;
    return this.element.loaded;
  }
  loadingStyleChanged() {
    if (this.loadingStyle == FrameLoadingStyle.lazy) {
      this.appearanceObserver.start();
    } else {
      this.appearanceObserver.stop();
      this.#loadSourceURL();
    }
  }
  async #loadSourceURL() {
    if (this.enabled && this.isActive && !this.complete && this.sourceURL) {
      this.element.loaded = this.#visit(expandURL(this.sourceURL));
      this.appearanceObserver.stop();
      await this.element.loaded;
      this.#hasBeenLoaded = true;
    }
  }
  async loadResponse(fetchResponse) {
    if (fetchResponse.redirected || fetchResponse.succeeded && fetchResponse.isHTML) {
      this.sourceURL = fetchResponse.response.url;
    }
    try {
      const html = await fetchResponse.responseHTML;
      if (html) {
        const document2 = parseHTMLDocument(html);
        const pageSnapshot = PageSnapshot.fromDocument(document2);
        if (pageSnapshot.isVisitable) {
          await this.#loadFrameResponse(fetchResponse, document2);
        } else {
          await this.#handleUnvisitableFrameResponse(fetchResponse);
        }
      }
    } finally {
      this.#shouldMorphFrame = false;
      this.fetchResponseLoaded = () => Promise.resolve();
    }
  }
  // Appearance observer delegate
  elementAppearedInViewport(element) {
    this.proposeVisitIfNavigatedWithAction(element, getVisitAction(element));
    this.#loadSourceURL();
  }
  // Form link click observer delegate
  willSubmitFormLinkToLocation(link) {
    return this.#shouldInterceptNavigation(link);
  }
  submittedFormLinkToLocation(link, _location, form) {
    const frame = this.#findFrameElement(link);
    if (frame) form.setAttribute("data-turbo-frame", frame.id);
  }
  // Link interceptor delegate
  shouldInterceptLinkClick(element, _location, _event) {
    return this.#shouldInterceptNavigation(element);
  }
  linkClickIntercepted(element, location2) {
    this.#navigateFrame(element, location2);
  }
  // Form submit observer delegate
  willSubmitForm(element, submitter2) {
    return element.closest("turbo-frame") == this.element && this.#shouldInterceptNavigation(element, submitter2);
  }
  formSubmitted(element, submitter2) {
    if (this.formSubmission) {
      this.formSubmission.stop();
    }
    this.formSubmission = new FormSubmission(this, element, submitter2);
    const { fetchRequest } = this.formSubmission;
    this.prepareRequest(fetchRequest);
    this.formSubmission.start();
  }
  // Fetch request delegate
  prepareRequest(request) {
    request.headers["Turbo-Frame"] = this.id;
    if (this.currentNavigationElement?.hasAttribute("data-turbo-stream")) {
      request.acceptResponseType(StreamMessage.contentType);
    }
  }
  requestStarted(_request) {
    markAsBusy(this.element);
  }
  requestPreventedHandlingResponse(_request, _response) {
    this.#resolveVisitPromise();
  }
  async requestSucceededWithResponse(request, response) {
    await this.loadResponse(response);
    this.#resolveVisitPromise();
  }
  async requestFailedWithResponse(request, response) {
    await this.loadResponse(response);
    this.#resolveVisitPromise();
  }
  requestErrored(request, error3) {
    console.error(error3);
    this.#resolveVisitPromise();
  }
  requestFinished(_request) {
    clearBusyState(this.element);
  }
  // Form submission delegate
  formSubmissionStarted({ formElement }) {
    markAsBusy(formElement, this.#findFrameElement(formElement));
  }
  formSubmissionSucceededWithResponse(formSubmission, response) {
    const frame = this.#findFrameElement(formSubmission.formElement, formSubmission.submitter);
    frame.delegate.proposeVisitIfNavigatedWithAction(frame, getVisitAction(formSubmission.submitter, formSubmission.formElement, frame));
    frame.delegate.loadResponse(response);
    if (!formSubmission.isSafe) {
      session.clearCache();
    }
  }
  formSubmissionFailedWithResponse(formSubmission, fetchResponse) {
    this.element.delegate.loadResponse(fetchResponse);
    session.clearCache();
  }
  formSubmissionErrored(formSubmission, error3) {
    console.error(error3);
  }
  formSubmissionFinished({ formElement }) {
    clearBusyState(formElement, this.#findFrameElement(formElement));
  }
  // View delegate
  allowsImmediateRender({ element: newFrame }, options) {
    const event = dispatch2("turbo:before-frame-render", {
      target: this.element,
      detail: { newFrame, ...options },
      cancelable: true
    });
    const {
      defaultPrevented,
      detail: { render }
    } = event;
    if (this.view.renderer && render) {
      this.view.renderer.renderElement = render;
    }
    return !defaultPrevented;
  }
  viewRenderedSnapshot(_snapshot, _isPreview, _renderMethod) {
  }
  preloadOnLoadLinksForView(element) {
    session.preloadOnLoadLinksForView(element);
  }
  viewInvalidated() {
  }
  // Frame renderer delegate
  willRenderFrame(currentElement, _newElement) {
    this.previousFrameElement = currentElement.cloneNode(true);
  }
  visitCachedSnapshot = ({ element }) => {
    const frame = element.querySelector("#" + this.element.id);
    if (frame && this.previousFrameElement) {
      frame.replaceChildren(...this.previousFrameElement.children);
    }
    delete this.previousFrameElement;
  };
  // Private
  async #loadFrameResponse(fetchResponse, document2) {
    const newFrameElement = await this.extractForeignFrameElement(document2.body);
    const rendererClass = this.#shouldMorphFrame ? MorphingFrameRenderer : FrameRenderer;
    if (newFrameElement) {
      const snapshot = new Snapshot(newFrameElement);
      const renderer = new rendererClass(this, this.view.snapshot, snapshot, false, false);
      if (this.view.renderPromise) await this.view.renderPromise;
      this.changeHistory();
      await this.view.render(renderer);
      this.complete = true;
      session.frameRendered(fetchResponse, this.element);
      session.frameLoaded(this.element);
      await this.fetchResponseLoaded(fetchResponse);
    } else if (this.#willHandleFrameMissingFromResponse(fetchResponse)) {
      this.#handleFrameMissingFromResponse(fetchResponse);
    }
  }
  async #visit(url) {
    const request = new FetchRequest(this, FetchMethod.get, url, new URLSearchParams(), this.element);
    this.#currentFetchRequest?.cancel();
    this.#currentFetchRequest = request;
    return new Promise((resolve) => {
      this.#resolveVisitPromise = () => {
        this.#resolveVisitPromise = () => {
        };
        this.#currentFetchRequest = null;
        resolve();
      };
      request.perform();
    });
  }
  #navigateFrame(element, url, submitter2) {
    const frame = this.#findFrameElement(element, submitter2);
    frame.delegate.proposeVisitIfNavigatedWithAction(frame, getVisitAction(submitter2, element, frame));
    this.#withCurrentNavigationElement(element, () => {
      frame.src = url;
    });
  }
  proposeVisitIfNavigatedWithAction(frame, action = null) {
    this.action = action;
    if (this.action) {
      const pageSnapshot = PageSnapshot.fromElement(frame).clone();
      const { visitCachedSnapshot } = frame.delegate;
      frame.delegate.fetchResponseLoaded = async (fetchResponse) => {
        if (frame.src) {
          const { statusCode, redirected } = fetchResponse;
          const responseHTML = await fetchResponse.responseHTML;
          const response = { statusCode, redirected, responseHTML };
          const options = {
            response,
            visitCachedSnapshot,
            willRender: false,
            updateHistory: false,
            restorationIdentifier: this.restorationIdentifier,
            snapshot: pageSnapshot
          };
          if (this.action) options.action = this.action;
          session.visit(frame.src, options);
        }
      };
    }
  }
  changeHistory() {
    if (this.action) {
      const method = getHistoryMethodForAction(this.action);
      session.history.update(method, expandURL(this.element.src || ""), this.restorationIdentifier);
    }
  }
  async #handleUnvisitableFrameResponse(fetchResponse) {
    console.warn(
      `The response (${fetchResponse.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`
    );
    await this.#visitResponse(fetchResponse.response);
  }
  #willHandleFrameMissingFromResponse(fetchResponse) {
    this.element.setAttribute("complete", "");
    const response = fetchResponse.response;
    const visit2 = async (url, options) => {
      if (url instanceof Response) {
        this.#visitResponse(url);
      } else {
        session.visit(url, options);
      }
    };
    const event = dispatch2("turbo:frame-missing", {
      target: this.element,
      detail: { response, visit: visit2 },
      cancelable: true
    });
    return !event.defaultPrevented;
  }
  #handleFrameMissingFromResponse(fetchResponse) {
    this.view.missing();
    this.#throwFrameMissingError(fetchResponse);
  }
  #throwFrameMissingError(fetchResponse) {
    const message = `The response (${fetchResponse.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;
    throw new TurboFrameMissingError(message);
  }
  async #visitResponse(response) {
    const wrapped = new FetchResponse(response);
    const responseHTML = await wrapped.responseHTML;
    const { location: location2, redirected, statusCode } = wrapped;
    return session.visit(location2, { response: { redirected, statusCode, responseHTML } });
  }
  #findFrameElement(element, submitter2) {
    const id2 = getAttribute("data-turbo-frame", submitter2, element) || this.element.getAttribute("target");
    return getFrameElementById(id2) ?? this.element;
  }
  async extractForeignFrameElement(container) {
    let element;
    const id2 = CSS.escape(this.id);
    try {
      element = activateElement(container.querySelector(`turbo-frame#${id2}`), this.sourceURL);
      if (element) {
        return element;
      }
      element = activateElement(container.querySelector(`turbo-frame[src][recurse~=${id2}]`), this.sourceURL);
      if (element) {
        await element.loaded;
        return await this.extractForeignFrameElement(element);
      }
    } catch (error3) {
      console.error(error3);
      return new FrameElement();
    }
    return null;
  }
  #formActionIsVisitable(form, submitter2) {
    const action = getAction$1(form, submitter2);
    return locationIsVisitable(expandURL(action), this.rootLocation);
  }
  #shouldInterceptNavigation(element, submitter2) {
    const id2 = getAttribute("data-turbo-frame", submitter2, element) || this.element.getAttribute("target");
    if (element instanceof HTMLFormElement && !this.#formActionIsVisitable(element, submitter2)) {
      return false;
    }
    if (!this.enabled || id2 == "_top") {
      return false;
    }
    if (id2) {
      const frameElement = getFrameElementById(id2);
      if (frameElement) {
        return !frameElement.disabled;
      }
    }
    if (!session.elementIsNavigatable(element)) {
      return false;
    }
    if (submitter2 && !session.elementIsNavigatable(submitter2)) {
      return false;
    }
    return true;
  }
  // Computed properties
  get id() {
    return this.element.id;
  }
  get enabled() {
    return !this.element.disabled;
  }
  get sourceURL() {
    if (this.element.src) {
      return this.element.src;
    }
  }
  set sourceURL(sourceURL) {
    this.#ignoringChangesToAttribute("src", () => {
      this.element.src = sourceURL ?? null;
    });
  }
  get loadingStyle() {
    return this.element.loading;
  }
  get isLoading() {
    return this.formSubmission !== void 0 || this.#resolveVisitPromise() !== void 0;
  }
  get complete() {
    return this.element.hasAttribute("complete");
  }
  set complete(value) {
    if (value) {
      this.element.setAttribute("complete", "");
    } else {
      this.element.removeAttribute("complete");
    }
  }
  get isActive() {
    return this.element.isActive && this.#connected;
  }
  get rootLocation() {
    const meta = this.element.ownerDocument.querySelector(`meta[name="turbo-root"]`);
    const root = meta?.content ?? "/";
    return expandURL(root);
  }
  #isIgnoringChangesTo(attributeName) {
    return this.#ignoredAttributes.has(attributeName);
  }
  #ignoringChangesToAttribute(attributeName, callback) {
    this.#ignoredAttributes.add(attributeName);
    callback();
    this.#ignoredAttributes.delete(attributeName);
  }
  #withCurrentNavigationElement(element, callback) {
    this.currentNavigationElement = element;
    callback();
    delete this.currentNavigationElement;
  }
};
function getFrameElementById(id2) {
  if (id2 != null) {
    const element = document.getElementById(id2);
    if (element instanceof FrameElement) {
      return element;
    }
  }
}
function activateElement(element, currentURL) {
  if (element) {
    const src = element.getAttribute("src");
    if (src != null && currentURL != null && urlsAreEqual(src, currentURL)) {
      throw new Error(`Matching <turbo-frame id="${element.id}"> element has a source URL which references itself`);
    }
    if (element.ownerDocument !== document) {
      element = document.importNode(element, true);
    }
    if (element instanceof FrameElement) {
      element.connectedCallback();
      element.disconnectedCallback();
      return element;
    }
  }
}
var StreamActions = {
  after() {
    this.targetElements.forEach((e) => e.parentElement?.insertBefore(this.templateContent, e.nextSibling));
  },
  append() {
    this.removeDuplicateTargetChildren();
    this.targetElements.forEach((e) => e.append(this.templateContent));
  },
  before() {
    this.targetElements.forEach((e) => e.parentElement?.insertBefore(this.templateContent, e));
  },
  prepend() {
    this.removeDuplicateTargetChildren();
    this.targetElements.forEach((e) => e.prepend(this.templateContent));
  },
  remove() {
    this.targetElements.forEach((e) => e.remove());
  },
  replace() {
    const method = this.getAttribute("method");
    this.targetElements.forEach((targetElement) => {
      if (method === "morph") {
        morphElements(targetElement, this.templateContent);
      } else {
        targetElement.replaceWith(this.templateContent);
      }
    });
  },
  update() {
    const method = this.getAttribute("method");
    this.targetElements.forEach((targetElement) => {
      if (method === "morph") {
        morphChildren(targetElement, this.templateContent);
      } else {
        targetElement.innerHTML = "";
        targetElement.append(this.templateContent);
      }
    });
  },
  refresh() {
    session.refresh(this.baseURI, this.requestId);
  }
};
var StreamElement = class _StreamElement extends HTMLElement {
  static async renderElement(newElement) {
    await newElement.performAction();
  }
  async connectedCallback() {
    try {
      await this.render();
    } catch (error3) {
      console.error(error3);
    } finally {
      this.disconnect();
    }
  }
  async render() {
    return this.renderPromise ??= (async () => {
      const event = this.beforeRenderEvent;
      if (this.dispatchEvent(event)) {
        await nextRepaint();
        await event.detail.render(this);
      }
    })();
  }
  disconnect() {
    try {
      this.remove();
    } catch {
    }
  }
  /**
   * Removes duplicate children (by ID)
   */
  removeDuplicateTargetChildren() {
    this.duplicateChildren.forEach((c) => c.remove());
  }
  /**
   * Gets the list of duplicate children (i.e. those with the same ID)
   */
  get duplicateChildren() {
    const existingChildren = this.targetElements.flatMap((e) => [...e.children]).filter((c) => !!c.getAttribute("id"));
    const newChildrenIds = [...this.templateContent?.children || []].filter((c) => !!c.getAttribute("id")).map((c) => c.getAttribute("id"));
    return existingChildren.filter((c) => newChildrenIds.includes(c.getAttribute("id")));
  }
  /**
   * Gets the action function to be performed.
   */
  get performAction() {
    if (this.action) {
      const actionFunction = StreamActions[this.action];
      if (actionFunction) {
        return actionFunction;
      }
      this.#raise("unknown action");
    }
    this.#raise("action attribute is missing");
  }
  /**
   * Gets the target elements which the template will be rendered to.
   */
  get targetElements() {
    if (this.target) {
      return this.targetElementsById;
    } else if (this.targets) {
      return this.targetElementsByQuery;
    } else {
      this.#raise("target or targets attribute is missing");
    }
  }
  /**
   * Gets the contents of the main `<template>`.
   */
  get templateContent() {
    return this.templateElement.content.cloneNode(true);
  }
  /**
   * Gets the main `<template>` used for rendering
   */
  get templateElement() {
    if (this.firstElementChild === null) {
      const template = this.ownerDocument.createElement("template");
      this.appendChild(template);
      return template;
    } else if (this.firstElementChild instanceof HTMLTemplateElement) {
      return this.firstElementChild;
    }
    this.#raise("first child element must be a <template> element");
  }
  /**
   * Gets the current action.
   */
  get action() {
    return this.getAttribute("action");
  }
  /**
   * Gets the current target (an element ID) to which the result will
   * be rendered.
   */
  get target() {
    return this.getAttribute("target");
  }
  /**
   * Gets the current "targets" selector (a CSS selector)
   */
  get targets() {
    return this.getAttribute("targets");
  }
  /**
   * Reads the request-id attribute
   */
  get requestId() {
    return this.getAttribute("request-id");
  }
  #raise(message) {
    throw new Error(`${this.description}: ${message}`);
  }
  get description() {
    return (this.outerHTML.match(/<[^>]+>/) ?? [])[0] ?? "<turbo-stream>";
  }
  get beforeRenderEvent() {
    return new CustomEvent("turbo:before-stream-render", {
      bubbles: true,
      cancelable: true,
      detail: { newStream: this, render: _StreamElement.renderElement }
    });
  }
  get targetElementsById() {
    const element = this.ownerDocument?.getElementById(this.target);
    if (element !== null) {
      return [element];
    } else {
      return [];
    }
  }
  get targetElementsByQuery() {
    const elements = this.ownerDocument?.querySelectorAll(this.targets);
    if (elements.length !== 0) {
      return Array.prototype.slice.call(elements);
    } else {
      return [];
    }
  }
};
var StreamSourceElement = class extends HTMLElement {
  streamSource = null;
  connectedCallback() {
    this.streamSource = this.src.match(/^ws{1,2}:/) ? new WebSocket(this.src) : new EventSource(this.src);
    connectStreamSource(this.streamSource);
  }
  disconnectedCallback() {
    if (this.streamSource) {
      this.streamSource.close();
      disconnectStreamSource(this.streamSource);
    }
  }
  get src() {
    return this.getAttribute("src") || "";
  }
};
FrameElement.delegateConstructor = FrameController;
if (customElements.get("turbo-frame") === void 0) {
  customElements.define("turbo-frame", FrameElement);
}
if (customElements.get("turbo-stream") === void 0) {
  customElements.define("turbo-stream", StreamElement);
}
if (customElements.get("turbo-stream-source") === void 0) {
  customElements.define("turbo-stream-source", StreamSourceElement);
}
(() => {
  let element = document.currentScript;
  if (!element) return;
  if (element.hasAttribute("data-turbo-suppress-warning")) return;
  element = element.parentElement;
  while (element) {
    if (element == document.body) {
      return console.warn(
        unindent`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,
        element.outerHTML
      );
    }
    element = element.parentElement;
  }
})();
window.Turbo = { ...Turbo2, StreamActions };
start3();

// node_modules/@hotwired/turbo-rails/app/javascript/turbo/cable.js
var consumer;
async function getConsumer() {
  return consumer || setConsumer(createConsumer3().then(setConsumer));
}
function setConsumer(newConsumer) {
  return consumer = newConsumer;
}
async function createConsumer3() {
  const { createConsumer: createConsumer4 } = await Promise.resolve().then(() => (init_src(), src_exports));
  return createConsumer4();
}
async function subscribeTo(channel, mixin) {
  const { subscriptions } = await getConsumer();
  return subscriptions.create(channel, mixin);
}

// node_modules/@hotwired/turbo-rails/app/javascript/turbo/snakeize.js
function walk2(obj) {
  if (!obj || typeof obj !== "object") return obj;
  if (obj instanceof Date || obj instanceof RegExp) return obj;
  if (Array.isArray(obj)) return obj.map(walk2);
  return Object.keys(obj).reduce(function(acc, key) {
    var camel = key[0].toLowerCase() + key.slice(1).replace(/([A-Z]+)/g, function(m, x) {
      return "_" + x.toLowerCase();
    });
    acc[camel] = walk2(obj[key]);
    return acc;
  }, {});
}

// node_modules/@hotwired/turbo-rails/app/javascript/turbo/cable_stream_source_element.js
var TurboCableStreamSourceElement = class extends HTMLElement {
  static observedAttributes = ["channel", "signed-stream-name"];
  async connectedCallback() {
    connectStreamSource(this);
    this.subscription = await subscribeTo(this.channel, {
      received: this.dispatchMessageEvent.bind(this),
      connected: this.subscriptionConnected.bind(this),
      disconnected: this.subscriptionDisconnected.bind(this)
    });
  }
  disconnectedCallback() {
    disconnectStreamSource(this);
    if (this.subscription) this.subscription.unsubscribe();
    this.subscriptionDisconnected();
  }
  attributeChangedCallback() {
    if (this.subscription) {
      this.disconnectedCallback();
      this.connectedCallback();
    }
  }
  dispatchMessageEvent(data2) {
    const event = new MessageEvent("message", { data: data2 });
    return this.dispatchEvent(event);
  }
  subscriptionConnected() {
    this.setAttribute("connected", "");
  }
  subscriptionDisconnected() {
    this.removeAttribute("connected");
  }
  get channel() {
    const channel = this.getAttribute("channel");
    const signed_stream_name = this.getAttribute("signed-stream-name");
    return { channel, signed_stream_name, ...walk2({ ...this.dataset }) };
  }
};
if (customElements.get("turbo-cable-stream-source") === void 0) {
  customElements.define("turbo-cable-stream-source", TurboCableStreamSourceElement);
}

// node_modules/@hotwired/turbo-rails/app/javascript/turbo/fetch_requests.js
function encodeMethodIntoRequestBody(event) {
  if (event.target instanceof HTMLFormElement) {
    const { target: form, detail: { fetchOptions } } = event;
    form.addEventListener("turbo:submit-start", ({ detail: { formSubmission: { submitter: submitter2 } } }) => {
      const body = isBodyInit(fetchOptions.body) ? fetchOptions.body : new URLSearchParams();
      const method = determineFetchMethod(submitter2, body, form);
      if (!/get/i.test(method)) {
        if (/post/i.test(method)) {
          body.delete("_method");
        } else {
          body.set("_method", method);
        }
        fetchOptions.method = "post";
      }
    }, { once: true });
  }
}
function determineFetchMethod(submitter2, body, form) {
  const formMethod = determineFormMethod(submitter2);
  const overrideMethod = body.get("_method");
  const method = form.getAttribute("method") || "get";
  if (typeof formMethod == "string") {
    return formMethod;
  } else if (typeof overrideMethod == "string") {
    return overrideMethod;
  } else {
    return method;
  }
}
function determineFormMethod(submitter2) {
  if (submitter2 instanceof HTMLButtonElement || submitter2 instanceof HTMLInputElement) {
    if (submitter2.name === "_method") {
      return submitter2.value;
    } else if (submitter2.hasAttribute("formmethod")) {
      return submitter2.formMethod;
    } else {
      return null;
    }
  } else {
    return null;
  }
}
function isBodyInit(body) {
  return body instanceof FormData || body instanceof URLSearchParams;
}

// node_modules/@hotwired/turbo-rails/app/javascript/turbo/index.js
window.Turbo = turbo_es2017_esm_exports;
addEventListener("turbo:before-fetch-request", encodeMethodIntoRequestBody);

// node_modules/@hotwired/stimulus/dist/stimulus.js
var EventListener = class {
  constructor(eventTarget, eventName, eventOptions) {
    this.eventTarget = eventTarget;
    this.eventName = eventName;
    this.eventOptions = eventOptions;
    this.unorderedBindings = /* @__PURE__ */ new Set();
  }
  connect() {
    this.eventTarget.addEventListener(this.eventName, this, this.eventOptions);
  }
  disconnect() {
    this.eventTarget.removeEventListener(this.eventName, this, this.eventOptions);
  }
  bindingConnected(binding) {
    this.unorderedBindings.add(binding);
  }
  bindingDisconnected(binding) {
    this.unorderedBindings.delete(binding);
  }
  handleEvent(event) {
    const extendedEvent = extendEvent(event);
    for (const binding of this.bindings) {
      if (extendedEvent.immediatePropagationStopped) {
        break;
      } else {
        binding.handleEvent(extendedEvent);
      }
    }
  }
  hasBindings() {
    return this.unorderedBindings.size > 0;
  }
  get bindings() {
    return Array.from(this.unorderedBindings).sort((left, right) => {
      const leftIndex = left.index, rightIndex = right.index;
      return leftIndex < rightIndex ? -1 : leftIndex > rightIndex ? 1 : 0;
    });
  }
};
function extendEvent(event) {
  if ("immediatePropagationStopped" in event) {
    return event;
  } else {
    const { stopImmediatePropagation } = event;
    return Object.assign(event, {
      immediatePropagationStopped: false,
      stopImmediatePropagation() {
        this.immediatePropagationStopped = true;
        stopImmediatePropagation.call(this);
      }
    });
  }
}
var Dispatcher = class {
  constructor(application2) {
    this.application = application2;
    this.eventListenerMaps = /* @__PURE__ */ new Map();
    this.started = false;
  }
  start() {
    if (!this.started) {
      this.started = true;
      this.eventListeners.forEach((eventListener) => eventListener.connect());
    }
  }
  stop() {
    if (this.started) {
      this.started = false;
      this.eventListeners.forEach((eventListener) => eventListener.disconnect());
    }
  }
  get eventListeners() {
    return Array.from(this.eventListenerMaps.values()).reduce((listeners, map) => listeners.concat(Array.from(map.values())), []);
  }
  bindingConnected(binding) {
    this.fetchEventListenerForBinding(binding).bindingConnected(binding);
  }
  bindingDisconnected(binding, clearEventListeners = false) {
    this.fetchEventListenerForBinding(binding).bindingDisconnected(binding);
    if (clearEventListeners)
      this.clearEventListenersForBinding(binding);
  }
  handleError(error3, message, detail = {}) {
    this.application.handleError(error3, `Error ${message}`, detail);
  }
  clearEventListenersForBinding(binding) {
    const eventListener = this.fetchEventListenerForBinding(binding);
    if (!eventListener.hasBindings()) {
      eventListener.disconnect();
      this.removeMappedEventListenerFor(binding);
    }
  }
  removeMappedEventListenerFor(binding) {
    const { eventTarget, eventName, eventOptions } = binding;
    const eventListenerMap = this.fetchEventListenerMapForEventTarget(eventTarget);
    const cacheKey = this.cacheKey(eventName, eventOptions);
    eventListenerMap.delete(cacheKey);
    if (eventListenerMap.size == 0)
      this.eventListenerMaps.delete(eventTarget);
  }
  fetchEventListenerForBinding(binding) {
    const { eventTarget, eventName, eventOptions } = binding;
    return this.fetchEventListener(eventTarget, eventName, eventOptions);
  }
  fetchEventListener(eventTarget, eventName, eventOptions) {
    const eventListenerMap = this.fetchEventListenerMapForEventTarget(eventTarget);
    const cacheKey = this.cacheKey(eventName, eventOptions);
    let eventListener = eventListenerMap.get(cacheKey);
    if (!eventListener) {
      eventListener = this.createEventListener(eventTarget, eventName, eventOptions);
      eventListenerMap.set(cacheKey, eventListener);
    }
    return eventListener;
  }
  createEventListener(eventTarget, eventName, eventOptions) {
    const eventListener = new EventListener(eventTarget, eventName, eventOptions);
    if (this.started) {
      eventListener.connect();
    }
    return eventListener;
  }
  fetchEventListenerMapForEventTarget(eventTarget) {
    let eventListenerMap = this.eventListenerMaps.get(eventTarget);
    if (!eventListenerMap) {
      eventListenerMap = /* @__PURE__ */ new Map();
      this.eventListenerMaps.set(eventTarget, eventListenerMap);
    }
    return eventListenerMap;
  }
  cacheKey(eventName, eventOptions) {
    const parts = [eventName];
    Object.keys(eventOptions).sort().forEach((key) => {
      parts.push(`${eventOptions[key] ? "" : "!"}${key}`);
    });
    return parts.join(":");
  }
};
var defaultActionDescriptorFilters = {
  stop({ event, value }) {
    if (value)
      event.stopPropagation();
    return true;
  },
  prevent({ event, value }) {
    if (value)
      event.preventDefault();
    return true;
  },
  self({ event, value, element }) {
    if (value) {
      return element === event.target;
    } else {
      return true;
    }
  }
};
var descriptorPattern = /^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;
function parseActionDescriptorString(descriptorString) {
  const source = descriptorString.trim();
  const matches = source.match(descriptorPattern) || [];
  let eventName = matches[2];
  let keyFilter = matches[3];
  if (keyFilter && !["keydown", "keyup", "keypress"].includes(eventName)) {
    eventName += `.${keyFilter}`;
    keyFilter = "";
  }
  return {
    eventTarget: parseEventTarget(matches[4]),
    eventName,
    eventOptions: matches[7] ? parseEventOptions(matches[7]) : {},
    identifier: matches[5],
    methodName: matches[6],
    keyFilter: matches[1] || keyFilter
  };
}
function parseEventTarget(eventTargetName) {
  if (eventTargetName == "window") {
    return window;
  } else if (eventTargetName == "document") {
    return document;
  }
}
function parseEventOptions(eventOptions) {
  return eventOptions.split(":").reduce((options, token) => Object.assign(options, { [token.replace(/^!/, "")]: !/^!/.test(token) }), {});
}
function stringifyEventTarget(eventTarget) {
  if (eventTarget == window) {
    return "window";
  } else if (eventTarget == document) {
    return "document";
  }
}
function camelize2(value) {
  return value.replace(/(?:[_-])([a-z0-9])/g, (_, char) => char.toUpperCase());
}
function namespaceCamelize(value) {
  return camelize2(value.replace(/--/g, "-").replace(/__/g, "_"));
}
function capitalize2(value) {
  return value.charAt(0).toUpperCase() + value.slice(1);
}
function dasherize(value) {
  return value.replace(/([A-Z])/g, (_, char) => `-${char.toLowerCase()}`);
}
function tokenize(value) {
  return value.match(/[^\s]+/g) || [];
}
function isSomething(object) {
  return object !== null && object !== void 0;
}
function hasProperty(object, property) {
  return Object.prototype.hasOwnProperty.call(object, property);
}
var allModifiers = ["meta", "ctrl", "alt", "shift"];
var Action = class {
  constructor(element, index, descriptor, schema) {
    this.element = element;
    this.index = index;
    this.eventTarget = descriptor.eventTarget || element;
    this.eventName = descriptor.eventName || getDefaultEventNameForElement(element) || error2("missing event name");
    this.eventOptions = descriptor.eventOptions || {};
    this.identifier = descriptor.identifier || error2("missing identifier");
    this.methodName = descriptor.methodName || error2("missing method name");
    this.keyFilter = descriptor.keyFilter || "";
    this.schema = schema;
  }
  static forToken(token, schema) {
    return new this(token.element, token.index, parseActionDescriptorString(token.content), schema);
  }
  toString() {
    const eventFilter = this.keyFilter ? `.${this.keyFilter}` : "";
    const eventTarget = this.eventTargetName ? `@${this.eventTargetName}` : "";
    return `${this.eventName}${eventFilter}${eventTarget}->${this.identifier}#${this.methodName}`;
  }
  shouldIgnoreKeyboardEvent(event) {
    if (!this.keyFilter) {
      return false;
    }
    const filters = this.keyFilter.split("+");
    if (this.keyFilterDissatisfied(event, filters)) {
      return true;
    }
    const standardFilter = filters.filter((key) => !allModifiers.includes(key))[0];
    if (!standardFilter) {
      return false;
    }
    if (!hasProperty(this.keyMappings, standardFilter)) {
      error2(`contains unknown key filter: ${this.keyFilter}`);
    }
    return this.keyMappings[standardFilter].toLowerCase() !== event.key.toLowerCase();
  }
  shouldIgnoreMouseEvent(event) {
    if (!this.keyFilter) {
      return false;
    }
    const filters = [this.keyFilter];
    if (this.keyFilterDissatisfied(event, filters)) {
      return true;
    }
    return false;
  }
  get params() {
    const params = {};
    const pattern = new RegExp(`^data-${this.identifier}-(.+)-param$`, "i");
    for (const { name, value } of Array.from(this.element.attributes)) {
      const match = name.match(pattern);
      const key = match && match[1];
      if (key) {
        params[camelize2(key)] = typecast(value);
      }
    }
    return params;
  }
  get eventTargetName() {
    return stringifyEventTarget(this.eventTarget);
  }
  get keyMappings() {
    return this.schema.keyMappings;
  }
  keyFilterDissatisfied(event, filters) {
    const [meta, ctrl, alt, shift] = allModifiers.map((modifier) => filters.includes(modifier));
    return event.metaKey !== meta || event.ctrlKey !== ctrl || event.altKey !== alt || event.shiftKey !== shift;
  }
};
var defaultEventNames = {
  a: () => "click",
  button: () => "click",
  form: () => "submit",
  details: () => "toggle",
  input: (e) => e.getAttribute("type") == "submit" ? "click" : "input",
  select: () => "change",
  textarea: () => "input"
};
function getDefaultEventNameForElement(element) {
  const tagName = element.tagName.toLowerCase();
  if (tagName in defaultEventNames) {
    return defaultEventNames[tagName](element);
  }
}
function error2(message) {
  throw new Error(message);
}
function typecast(value) {
  try {
    return JSON.parse(value);
  } catch (o_O) {
    return value;
  }
}
var Binding = class {
  constructor(context, action) {
    this.context = context;
    this.action = action;
  }
  get index() {
    return this.action.index;
  }
  get eventTarget() {
    return this.action.eventTarget;
  }
  get eventOptions() {
    return this.action.eventOptions;
  }
  get identifier() {
    return this.context.identifier;
  }
  handleEvent(event) {
    const actionEvent = this.prepareActionEvent(event);
    if (this.willBeInvokedByEvent(event) && this.applyEventModifiers(actionEvent)) {
      this.invokeWithEvent(actionEvent);
    }
  }
  get eventName() {
    return this.action.eventName;
  }
  get method() {
    const method = this.controller[this.methodName];
    if (typeof method == "function") {
      return method;
    }
    throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`);
  }
  applyEventModifiers(event) {
    const { element } = this.action;
    const { actionDescriptorFilters } = this.context.application;
    const { controller } = this.context;
    let passes = true;
    for (const [name, value] of Object.entries(this.eventOptions)) {
      if (name in actionDescriptorFilters) {
        const filter = actionDescriptorFilters[name];
        passes = passes && filter({ name, value, event, element, controller });
      } else {
        continue;
      }
    }
    return passes;
  }
  prepareActionEvent(event) {
    return Object.assign(event, { params: this.action.params });
  }
  invokeWithEvent(event) {
    const { target, currentTarget } = event;
    try {
      this.method.call(this.controller, event);
      this.context.logDebugActivity(this.methodName, { event, target, currentTarget, action: this.methodName });
    } catch (error3) {
      const { identifier, controller, element, index } = this;
      const detail = { identifier, controller, element, index, event };
      this.context.handleError(error3, `invoking action "${this.action}"`, detail);
    }
  }
  willBeInvokedByEvent(event) {
    const eventTarget = event.target;
    if (event instanceof KeyboardEvent && this.action.shouldIgnoreKeyboardEvent(event)) {
      return false;
    }
    if (event instanceof MouseEvent && this.action.shouldIgnoreMouseEvent(event)) {
      return false;
    }
    if (this.element === eventTarget) {
      return true;
    } else if (eventTarget instanceof Element && this.element.contains(eventTarget)) {
      return this.scope.containsElement(eventTarget);
    } else {
      return this.scope.containsElement(this.action.element);
    }
  }
  get controller() {
    return this.context.controller;
  }
  get methodName() {
    return this.action.methodName;
  }
  get element() {
    return this.scope.element;
  }
  get scope() {
    return this.context.scope;
  }
};
var ElementObserver = class {
  constructor(element, delegate) {
    this.mutationObserverInit = { attributes: true, childList: true, subtree: true };
    this.element = element;
    this.started = false;
    this.delegate = delegate;
    this.elements = /* @__PURE__ */ new Set();
    this.mutationObserver = new MutationObserver((mutations) => this.processMutations(mutations));
  }
  start() {
    if (!this.started) {
      this.started = true;
      this.mutationObserver.observe(this.element, this.mutationObserverInit);
      this.refresh();
    }
  }
  pause(callback) {
    if (this.started) {
      this.mutationObserver.disconnect();
      this.started = false;
    }
    callback();
    if (!this.started) {
      this.mutationObserver.observe(this.element, this.mutationObserverInit);
      this.started = true;
    }
  }
  stop() {
    if (this.started) {
      this.mutationObserver.takeRecords();
      this.mutationObserver.disconnect();
      this.started = false;
    }
  }
  refresh() {
    if (this.started) {
      const matches = new Set(this.matchElementsInTree());
      for (const element of Array.from(this.elements)) {
        if (!matches.has(element)) {
          this.removeElement(element);
        }
      }
      for (const element of Array.from(matches)) {
        this.addElement(element);
      }
    }
  }
  processMutations(mutations) {
    if (this.started) {
      for (const mutation of mutations) {
        this.processMutation(mutation);
      }
    }
  }
  processMutation(mutation) {
    if (mutation.type == "attributes") {
      this.processAttributeChange(mutation.target, mutation.attributeName);
    } else if (mutation.type == "childList") {
      this.processRemovedNodes(mutation.removedNodes);
      this.processAddedNodes(mutation.addedNodes);
    }
  }
  processAttributeChange(element, attributeName) {
    if (this.elements.has(element)) {
      if (this.delegate.elementAttributeChanged && this.matchElement(element)) {
        this.delegate.elementAttributeChanged(element, attributeName);
      } else {
        this.removeElement(element);
      }
    } else if (this.matchElement(element)) {
      this.addElement(element);
    }
  }
  processRemovedNodes(nodes) {
    for (const node of Array.from(nodes)) {
      const element = this.elementFromNode(node);
      if (element) {
        this.processTree(element, this.removeElement);
      }
    }
  }
  processAddedNodes(nodes) {
    for (const node of Array.from(nodes)) {
      const element = this.elementFromNode(node);
      if (element && this.elementIsActive(element)) {
        this.processTree(element, this.addElement);
      }
    }
  }
  matchElement(element) {
    return this.delegate.matchElement(element);
  }
  matchElementsInTree(tree = this.element) {
    return this.delegate.matchElementsInTree(tree);
  }
  processTree(tree, processor) {
    for (const element of this.matchElementsInTree(tree)) {
      processor.call(this, element);
    }
  }
  elementFromNode(node) {
    if (node.nodeType == Node.ELEMENT_NODE) {
      return node;
    }
  }
  elementIsActive(element) {
    if (element.isConnected != this.element.isConnected) {
      return false;
    } else {
      return this.element.contains(element);
    }
  }
  addElement(element) {
    if (!this.elements.has(element)) {
      if (this.elementIsActive(element)) {
        this.elements.add(element);
        if (this.delegate.elementMatched) {
          this.delegate.elementMatched(element);
        }
      }
    }
  }
  removeElement(element) {
    if (this.elements.has(element)) {
      this.elements.delete(element);
      if (this.delegate.elementUnmatched) {
        this.delegate.elementUnmatched(element);
      }
    }
  }
};
var AttributeObserver = class {
  constructor(element, attributeName, delegate) {
    this.attributeName = attributeName;
    this.delegate = delegate;
    this.elementObserver = new ElementObserver(element, this);
  }
  get element() {
    return this.elementObserver.element;
  }
  get selector() {
    return `[${this.attributeName}]`;
  }
  start() {
    this.elementObserver.start();
  }
  pause(callback) {
    this.elementObserver.pause(callback);
  }
  stop() {
    this.elementObserver.stop();
  }
  refresh() {
    this.elementObserver.refresh();
  }
  get started() {
    return this.elementObserver.started;
  }
  matchElement(element) {
    return element.hasAttribute(this.attributeName);
  }
  matchElementsInTree(tree) {
    const match = this.matchElement(tree) ? [tree] : [];
    const matches = Array.from(tree.querySelectorAll(this.selector));
    return match.concat(matches);
  }
  elementMatched(element) {
    if (this.delegate.elementMatchedAttribute) {
      this.delegate.elementMatchedAttribute(element, this.attributeName);
    }
  }
  elementUnmatched(element) {
    if (this.delegate.elementUnmatchedAttribute) {
      this.delegate.elementUnmatchedAttribute(element, this.attributeName);
    }
  }
  elementAttributeChanged(element, attributeName) {
    if (this.delegate.elementAttributeValueChanged && this.attributeName == attributeName) {
      this.delegate.elementAttributeValueChanged(element, attributeName);
    }
  }
};
function add2(map, key, value) {
  fetch2(map, key).add(value);
}
function del(map, key, value) {
  fetch2(map, key).delete(value);
  prune(map, key);
}
function fetch2(map, key) {
  let values = map.get(key);
  if (!values) {
    values = /* @__PURE__ */ new Set();
    map.set(key, values);
  }
  return values;
}
function prune(map, key) {
  const values = map.get(key);
  if (values != null && values.size == 0) {
    map.delete(key);
  }
}
var Multimap = class {
  constructor() {
    this.valuesByKey = /* @__PURE__ */ new Map();
  }
  get keys() {
    return Array.from(this.valuesByKey.keys());
  }
  get values() {
    const sets = Array.from(this.valuesByKey.values());
    return sets.reduce((values, set3) => values.concat(Array.from(set3)), []);
  }
  get size() {
    const sets = Array.from(this.valuesByKey.values());
    return sets.reduce((size2, set3) => size2 + set3.size, 0);
  }
  add(key, value) {
    add2(this.valuesByKey, key, value);
  }
  delete(key, value) {
    del(this.valuesByKey, key, value);
  }
  has(key, value) {
    const values = this.valuesByKey.get(key);
    return values != null && values.has(value);
  }
  hasKey(key) {
    return this.valuesByKey.has(key);
  }
  hasValue(value) {
    const sets = Array.from(this.valuesByKey.values());
    return sets.some((set3) => set3.has(value));
  }
  getValuesForKey(key) {
    const values = this.valuesByKey.get(key);
    return values ? Array.from(values) : [];
  }
  getKeysForValue(value) {
    return Array.from(this.valuesByKey).filter(([_key, values]) => values.has(value)).map(([key, _values]) => key);
  }
};
var SelectorObserver = class {
  constructor(element, selector, delegate, details) {
    this._selector = selector;
    this.details = details;
    this.elementObserver = new ElementObserver(element, this);
    this.delegate = delegate;
    this.matchesByElement = new Multimap();
  }
  get started() {
    return this.elementObserver.started;
  }
  get selector() {
    return this._selector;
  }
  set selector(selector) {
    this._selector = selector;
    this.refresh();
  }
  start() {
    this.elementObserver.start();
  }
  pause(callback) {
    this.elementObserver.pause(callback);
  }
  stop() {
    this.elementObserver.stop();
  }
  refresh() {
    this.elementObserver.refresh();
  }
  get element() {
    return this.elementObserver.element;
  }
  matchElement(element) {
    const { selector } = this;
    if (selector) {
      const matches = element.matches(selector);
      if (this.delegate.selectorMatchElement) {
        return matches && this.delegate.selectorMatchElement(element, this.details);
      }
      return matches;
    } else {
      return false;
    }
  }
  matchElementsInTree(tree) {
    const { selector } = this;
    if (selector) {
      const match = this.matchElement(tree) ? [tree] : [];
      const matches = Array.from(tree.querySelectorAll(selector)).filter((match2) => this.matchElement(match2));
      return match.concat(matches);
    } else {
      return [];
    }
  }
  elementMatched(element) {
    const { selector } = this;
    if (selector) {
      this.selectorMatched(element, selector);
    }
  }
  elementUnmatched(element) {
    const selectors = this.matchesByElement.getKeysForValue(element);
    for (const selector of selectors) {
      this.selectorUnmatched(element, selector);
    }
  }
  elementAttributeChanged(element, _attributeName) {
    const { selector } = this;
    if (selector) {
      const matches = this.matchElement(element);
      const matchedBefore = this.matchesByElement.has(selector, element);
      if (matches && !matchedBefore) {
        this.selectorMatched(element, selector);
      } else if (!matches && matchedBefore) {
        this.selectorUnmatched(element, selector);
      }
    }
  }
  selectorMatched(element, selector) {
    this.delegate.selectorMatched(element, selector, this.details);
    this.matchesByElement.add(selector, element);
  }
  selectorUnmatched(element, selector) {
    this.delegate.selectorUnmatched(element, selector, this.details);
    this.matchesByElement.delete(selector, element);
  }
};
var StringMapObserver = class {
  constructor(element, delegate) {
    this.element = element;
    this.delegate = delegate;
    this.started = false;
    this.stringMap = /* @__PURE__ */ new Map();
    this.mutationObserver = new MutationObserver((mutations) => this.processMutations(mutations));
  }
  start() {
    if (!this.started) {
      this.started = true;
      this.mutationObserver.observe(this.element, { attributes: true, attributeOldValue: true });
      this.refresh();
    }
  }
  stop() {
    if (this.started) {
      this.mutationObserver.takeRecords();
      this.mutationObserver.disconnect();
      this.started = false;
    }
  }
  refresh() {
    if (this.started) {
      for (const attributeName of this.knownAttributeNames) {
        this.refreshAttribute(attributeName, null);
      }
    }
  }
  processMutations(mutations) {
    if (this.started) {
      for (const mutation of mutations) {
        this.processMutation(mutation);
      }
    }
  }
  processMutation(mutation) {
    const attributeName = mutation.attributeName;
    if (attributeName) {
      this.refreshAttribute(attributeName, mutation.oldValue);
    }
  }
  refreshAttribute(attributeName, oldValue) {
    const key = this.delegate.getStringMapKeyForAttribute(attributeName);
    if (key != null) {
      if (!this.stringMap.has(attributeName)) {
        this.stringMapKeyAdded(key, attributeName);
      }
      const value = this.element.getAttribute(attributeName);
      if (this.stringMap.get(attributeName) != value) {
        this.stringMapValueChanged(value, key, oldValue);
      }
      if (value == null) {
        const oldValue2 = this.stringMap.get(attributeName);
        this.stringMap.delete(attributeName);
        if (oldValue2)
          this.stringMapKeyRemoved(key, attributeName, oldValue2);
      } else {
        this.stringMap.set(attributeName, value);
      }
    }
  }
  stringMapKeyAdded(key, attributeName) {
    if (this.delegate.stringMapKeyAdded) {
      this.delegate.stringMapKeyAdded(key, attributeName);
    }
  }
  stringMapValueChanged(value, key, oldValue) {
    if (this.delegate.stringMapValueChanged) {
      this.delegate.stringMapValueChanged(value, key, oldValue);
    }
  }
  stringMapKeyRemoved(key, attributeName, oldValue) {
    if (this.delegate.stringMapKeyRemoved) {
      this.delegate.stringMapKeyRemoved(key, attributeName, oldValue);
    }
  }
  get knownAttributeNames() {
    return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)));
  }
  get currentAttributeNames() {
    return Array.from(this.element.attributes).map((attribute) => attribute.name);
  }
  get recordedAttributeNames() {
    return Array.from(this.stringMap.keys());
  }
};
var TokenListObserver = class {
  constructor(element, attributeName, delegate) {
    this.attributeObserver = new AttributeObserver(element, attributeName, this);
    this.delegate = delegate;
    this.tokensByElement = new Multimap();
  }
  get started() {
    return this.attributeObserver.started;
  }
  start() {
    this.attributeObserver.start();
  }
  pause(callback) {
    this.attributeObserver.pause(callback);
  }
  stop() {
    this.attributeObserver.stop();
  }
  refresh() {
    this.attributeObserver.refresh();
  }
  get element() {
    return this.attributeObserver.element;
  }
  get attributeName() {
    return this.attributeObserver.attributeName;
  }
  elementMatchedAttribute(element) {
    this.tokensMatched(this.readTokensForElement(element));
  }
  elementAttributeValueChanged(element) {
    const [unmatchedTokens, matchedTokens] = this.refreshTokensForElement(element);
    this.tokensUnmatched(unmatchedTokens);
    this.tokensMatched(matchedTokens);
  }
  elementUnmatchedAttribute(element) {
    this.tokensUnmatched(this.tokensByElement.getValuesForKey(element));
  }
  tokensMatched(tokens) {
    tokens.forEach((token) => this.tokenMatched(token));
  }
  tokensUnmatched(tokens) {
    tokens.forEach((token) => this.tokenUnmatched(token));
  }
  tokenMatched(token) {
    this.delegate.tokenMatched(token);
    this.tokensByElement.add(token.element, token);
  }
  tokenUnmatched(token) {
    this.delegate.tokenUnmatched(token);
    this.tokensByElement.delete(token.element, token);
  }
  refreshTokensForElement(element) {
    const previousTokens = this.tokensByElement.getValuesForKey(element);
    const currentTokens = this.readTokensForElement(element);
    const firstDifferingIndex = zip(previousTokens, currentTokens).findIndex(([previousToken, currentToken]) => !tokensAreEqual(previousToken, currentToken));
    if (firstDifferingIndex == -1) {
      return [[], []];
    } else {
      return [previousTokens.slice(firstDifferingIndex), currentTokens.slice(firstDifferingIndex)];
    }
  }
  readTokensForElement(element) {
    const attributeName = this.attributeName;
    const tokenString = element.getAttribute(attributeName) || "";
    return parseTokenString(tokenString, element, attributeName);
  }
};
function parseTokenString(tokenString, element, attributeName) {
  return tokenString.trim().split(/\s+/).filter((content) => content.length).map((content, index) => ({ element, attributeName, content, index }));
}
function zip(left, right) {
  const length = Math.max(left.length, right.length);
  return Array.from({ length }, (_, index) => [left[index], right[index]]);
}
function tokensAreEqual(left, right) {
  return left && right && left.index == right.index && left.content == right.content;
}
var ValueListObserver = class {
  constructor(element, attributeName, delegate) {
    this.tokenListObserver = new TokenListObserver(element, attributeName, this);
    this.delegate = delegate;
    this.parseResultsByToken = /* @__PURE__ */ new WeakMap();
    this.valuesByTokenByElement = /* @__PURE__ */ new WeakMap();
  }
  get started() {
    return this.tokenListObserver.started;
  }
  start() {
    this.tokenListObserver.start();
  }
  stop() {
    this.tokenListObserver.stop();
  }
  refresh() {
    this.tokenListObserver.refresh();
  }
  get element() {
    return this.tokenListObserver.element;
  }
  get attributeName() {
    return this.tokenListObserver.attributeName;
  }
  tokenMatched(token) {
    const { element } = token;
    const { value } = this.fetchParseResultForToken(token);
    if (value) {
      this.fetchValuesByTokenForElement(element).set(token, value);
      this.delegate.elementMatchedValue(element, value);
    }
  }
  tokenUnmatched(token) {
    const { element } = token;
    const { value } = this.fetchParseResultForToken(token);
    if (value) {
      this.fetchValuesByTokenForElement(element).delete(token);
      this.delegate.elementUnmatchedValue(element, value);
    }
  }
  fetchParseResultForToken(token) {
    let parseResult = this.parseResultsByToken.get(token);
    if (!parseResult) {
      parseResult = this.parseToken(token);
      this.parseResultsByToken.set(token, parseResult);
    }
    return parseResult;
  }
  fetchValuesByTokenForElement(element) {
    let valuesByToken = this.valuesByTokenByElement.get(element);
    if (!valuesByToken) {
      valuesByToken = /* @__PURE__ */ new Map();
      this.valuesByTokenByElement.set(element, valuesByToken);
    }
    return valuesByToken;
  }
  parseToken(token) {
    try {
      const value = this.delegate.parseValueForToken(token);
      return { value };
    } catch (error3) {
      return { error: error3 };
    }
  }
};
var BindingObserver = class {
  constructor(context, delegate) {
    this.context = context;
    this.delegate = delegate;
    this.bindingsByAction = /* @__PURE__ */ new Map();
  }
  start() {
    if (!this.valueListObserver) {
      this.valueListObserver = new ValueListObserver(this.element, this.actionAttribute, this);
      this.valueListObserver.start();
    }
  }
  stop() {
    if (this.valueListObserver) {
      this.valueListObserver.stop();
      delete this.valueListObserver;
      this.disconnectAllActions();
    }
  }
  get element() {
    return this.context.element;
  }
  get identifier() {
    return this.context.identifier;
  }
  get actionAttribute() {
    return this.schema.actionAttribute;
  }
  get schema() {
    return this.context.schema;
  }
  get bindings() {
    return Array.from(this.bindingsByAction.values());
  }
  connectAction(action) {
    const binding = new Binding(this.context, action);
    this.bindingsByAction.set(action, binding);
    this.delegate.bindingConnected(binding);
  }
  disconnectAction(action) {
    const binding = this.bindingsByAction.get(action);
    if (binding) {
      this.bindingsByAction.delete(action);
      this.delegate.bindingDisconnected(binding);
    }
  }
  disconnectAllActions() {
    this.bindings.forEach((binding) => this.delegate.bindingDisconnected(binding, true));
    this.bindingsByAction.clear();
  }
  parseValueForToken(token) {
    const action = Action.forToken(token, this.schema);
    if (action.identifier == this.identifier) {
      return action;
    }
  }
  elementMatchedValue(element, action) {
    this.connectAction(action);
  }
  elementUnmatchedValue(element, action) {
    this.disconnectAction(action);
  }
};
var ValueObserver = class {
  constructor(context, receiver) {
    this.context = context;
    this.receiver = receiver;
    this.stringMapObserver = new StringMapObserver(this.element, this);
    this.valueDescriptorMap = this.controller.valueDescriptorMap;
  }
  start() {
    this.stringMapObserver.start();
    this.invokeChangedCallbacksForDefaultValues();
  }
  stop() {
    this.stringMapObserver.stop();
  }
  get element() {
    return this.context.element;
  }
  get controller() {
    return this.context.controller;
  }
  getStringMapKeyForAttribute(attributeName) {
    if (attributeName in this.valueDescriptorMap) {
      return this.valueDescriptorMap[attributeName].name;
    }
  }
  stringMapKeyAdded(key, attributeName) {
    const descriptor = this.valueDescriptorMap[attributeName];
    if (!this.hasValue(key)) {
      this.invokeChangedCallback(key, descriptor.writer(this.receiver[key]), descriptor.writer(descriptor.defaultValue));
    }
  }
  stringMapValueChanged(value, name, oldValue) {
    const descriptor = this.valueDescriptorNameMap[name];
    if (value === null)
      return;
    if (oldValue === null) {
      oldValue = descriptor.writer(descriptor.defaultValue);
    }
    this.invokeChangedCallback(name, value, oldValue);
  }
  stringMapKeyRemoved(key, attributeName, oldValue) {
    const descriptor = this.valueDescriptorNameMap[key];
    if (this.hasValue(key)) {
      this.invokeChangedCallback(key, descriptor.writer(this.receiver[key]), oldValue);
    } else {
      this.invokeChangedCallback(key, descriptor.writer(descriptor.defaultValue), oldValue);
    }
  }
  invokeChangedCallbacksForDefaultValues() {
    for (const { key, name, defaultValue, writer } of this.valueDescriptors) {
      if (defaultValue != void 0 && !this.controller.data.has(key)) {
        this.invokeChangedCallback(name, writer(defaultValue), void 0);
      }
    }
  }
  invokeChangedCallback(name, rawValue, rawOldValue) {
    const changedMethodName = `${name}Changed`;
    const changedMethod = this.receiver[changedMethodName];
    if (typeof changedMethod == "function") {
      const descriptor = this.valueDescriptorNameMap[name];
      try {
        const value = descriptor.reader(rawValue);
        let oldValue = rawOldValue;
        if (rawOldValue) {
          oldValue = descriptor.reader(rawOldValue);
        }
        changedMethod.call(this.receiver, value, oldValue);
      } catch (error3) {
        if (error3 instanceof TypeError) {
          error3.message = `Stimulus Value "${this.context.identifier}.${descriptor.name}" - ${error3.message}`;
        }
        throw error3;
      }
    }
  }
  get valueDescriptors() {
    const { valueDescriptorMap } = this;
    return Object.keys(valueDescriptorMap).map((key) => valueDescriptorMap[key]);
  }
  get valueDescriptorNameMap() {
    const descriptors = {};
    Object.keys(this.valueDescriptorMap).forEach((key) => {
      const descriptor = this.valueDescriptorMap[key];
      descriptors[descriptor.name] = descriptor;
    });
    return descriptors;
  }
  hasValue(attributeName) {
    const descriptor = this.valueDescriptorNameMap[attributeName];
    const hasMethodName = `has${capitalize2(descriptor.name)}`;
    return this.receiver[hasMethodName];
  }
};
var TargetObserver = class {
  constructor(context, delegate) {
    this.context = context;
    this.delegate = delegate;
    this.targetsByName = new Multimap();
  }
  start() {
    if (!this.tokenListObserver) {
      this.tokenListObserver = new TokenListObserver(this.element, this.attributeName, this);
      this.tokenListObserver.start();
    }
  }
  stop() {
    if (this.tokenListObserver) {
      this.disconnectAllTargets();
      this.tokenListObserver.stop();
      delete this.tokenListObserver;
    }
  }
  tokenMatched({ element, content: name }) {
    if (this.scope.containsElement(element)) {
      this.connectTarget(element, name);
    }
  }
  tokenUnmatched({ element, content: name }) {
    this.disconnectTarget(element, name);
  }
  connectTarget(element, name) {
    var _a;
    if (!this.targetsByName.has(name, element)) {
      this.targetsByName.add(name, element);
      (_a = this.tokenListObserver) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.targetConnected(element, name));
    }
  }
  disconnectTarget(element, name) {
    var _a;
    if (this.targetsByName.has(name, element)) {
      this.targetsByName.delete(name, element);
      (_a = this.tokenListObserver) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.targetDisconnected(element, name));
    }
  }
  disconnectAllTargets() {
    for (const name of this.targetsByName.keys) {
      for (const element of this.targetsByName.getValuesForKey(name)) {
        this.disconnectTarget(element, name);
      }
    }
  }
  get attributeName() {
    return `data-${this.context.identifier}-target`;
  }
  get element() {
    return this.context.element;
  }
  get scope() {
    return this.context.scope;
  }
};
function readInheritableStaticArrayValues(constructor, propertyName) {
  const ancestors = getAncestorsForConstructor(constructor);
  return Array.from(ancestors.reduce((values, constructor2) => {
    getOwnStaticArrayValues(constructor2, propertyName).forEach((name) => values.add(name));
    return values;
  }, /* @__PURE__ */ new Set()));
}
function readInheritableStaticObjectPairs(constructor, propertyName) {
  const ancestors = getAncestorsForConstructor(constructor);
  return ancestors.reduce((pairs, constructor2) => {
    pairs.push(...getOwnStaticObjectPairs(constructor2, propertyName));
    return pairs;
  }, []);
}
function getAncestorsForConstructor(constructor) {
  const ancestors = [];
  while (constructor) {
    ancestors.push(constructor);
    constructor = Object.getPrototypeOf(constructor);
  }
  return ancestors.reverse();
}
function getOwnStaticArrayValues(constructor, propertyName) {
  const definition = constructor[propertyName];
  return Array.isArray(definition) ? definition : [];
}
function getOwnStaticObjectPairs(constructor, propertyName) {
  const definition = constructor[propertyName];
  return definition ? Object.keys(definition).map((key) => [key, definition[key]]) : [];
}
var OutletObserver = class {
  constructor(context, delegate) {
    this.started = false;
    this.context = context;
    this.delegate = delegate;
    this.outletsByName = new Multimap();
    this.outletElementsByName = new Multimap();
    this.selectorObserverMap = /* @__PURE__ */ new Map();
    this.attributeObserverMap = /* @__PURE__ */ new Map();
  }
  start() {
    if (!this.started) {
      this.outletDefinitions.forEach((outletName) => {
        this.setupSelectorObserverForOutlet(outletName);
        this.setupAttributeObserverForOutlet(outletName);
      });
      this.started = true;
      this.dependentContexts.forEach((context) => context.refresh());
    }
  }
  refresh() {
    this.selectorObserverMap.forEach((observer2) => observer2.refresh());
    this.attributeObserverMap.forEach((observer2) => observer2.refresh());
  }
  stop() {
    if (this.started) {
      this.started = false;
      this.disconnectAllOutlets();
      this.stopSelectorObservers();
      this.stopAttributeObservers();
    }
  }
  stopSelectorObservers() {
    if (this.selectorObserverMap.size > 0) {
      this.selectorObserverMap.forEach((observer2) => observer2.stop());
      this.selectorObserverMap.clear();
    }
  }
  stopAttributeObservers() {
    if (this.attributeObserverMap.size > 0) {
      this.attributeObserverMap.forEach((observer2) => observer2.stop());
      this.attributeObserverMap.clear();
    }
  }
  selectorMatched(element, _selector, { outletName }) {
    const outlet = this.getOutlet(element, outletName);
    if (outlet) {
      this.connectOutlet(outlet, element, outletName);
    }
  }
  selectorUnmatched(element, _selector, { outletName }) {
    const outlet = this.getOutletFromMap(element, outletName);
    if (outlet) {
      this.disconnectOutlet(outlet, element, outletName);
    }
  }
  selectorMatchElement(element, { outletName }) {
    const selector = this.selector(outletName);
    const hasOutlet = this.hasOutlet(element, outletName);
    const hasOutletController = element.matches(`[${this.schema.controllerAttribute}~=${outletName}]`);
    if (selector) {
      return hasOutlet && hasOutletController && element.matches(selector);
    } else {
      return false;
    }
  }
  elementMatchedAttribute(_element, attributeName) {
    const outletName = this.getOutletNameFromOutletAttributeName(attributeName);
    if (outletName) {
      this.updateSelectorObserverForOutlet(outletName);
    }
  }
  elementAttributeValueChanged(_element, attributeName) {
    const outletName = this.getOutletNameFromOutletAttributeName(attributeName);
    if (outletName) {
      this.updateSelectorObserverForOutlet(outletName);
    }
  }
  elementUnmatchedAttribute(_element, attributeName) {
    const outletName = this.getOutletNameFromOutletAttributeName(attributeName);
    if (outletName) {
      this.updateSelectorObserverForOutlet(outletName);
    }
  }
  connectOutlet(outlet, element, outletName) {
    var _a;
    if (!this.outletElementsByName.has(outletName, element)) {
      this.outletsByName.add(outletName, outlet);
      this.outletElementsByName.add(outletName, element);
      (_a = this.selectorObserverMap.get(outletName)) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.outletConnected(outlet, element, outletName));
    }
  }
  disconnectOutlet(outlet, element, outletName) {
    var _a;
    if (this.outletElementsByName.has(outletName, element)) {
      this.outletsByName.delete(outletName, outlet);
      this.outletElementsByName.delete(outletName, element);
      (_a = this.selectorObserverMap.get(outletName)) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.outletDisconnected(outlet, element, outletName));
    }
  }
  disconnectAllOutlets() {
    for (const outletName of this.outletElementsByName.keys) {
      for (const element of this.outletElementsByName.getValuesForKey(outletName)) {
        for (const outlet of this.outletsByName.getValuesForKey(outletName)) {
          this.disconnectOutlet(outlet, element, outletName);
        }
      }
    }
  }
  updateSelectorObserverForOutlet(outletName) {
    const observer2 = this.selectorObserverMap.get(outletName);
    if (observer2) {
      observer2.selector = this.selector(outletName);
    }
  }
  setupSelectorObserverForOutlet(outletName) {
    const selector = this.selector(outletName);
    const selectorObserver = new SelectorObserver(document.body, selector, this, { outletName });
    this.selectorObserverMap.set(outletName, selectorObserver);
    selectorObserver.start();
  }
  setupAttributeObserverForOutlet(outletName) {
    const attributeName = this.attributeNameForOutletName(outletName);
    const attributeObserver = new AttributeObserver(this.scope.element, attributeName, this);
    this.attributeObserverMap.set(outletName, attributeObserver);
    attributeObserver.start();
  }
  selector(outletName) {
    return this.scope.outlets.getSelectorForOutletName(outletName);
  }
  attributeNameForOutletName(outletName) {
    return this.scope.schema.outletAttributeForScope(this.identifier, outletName);
  }
  getOutletNameFromOutletAttributeName(attributeName) {
    return this.outletDefinitions.find((outletName) => this.attributeNameForOutletName(outletName) === attributeName);
  }
  get outletDependencies() {
    const dependencies = new Multimap();
    this.router.modules.forEach((module) => {
      const constructor = module.definition.controllerConstructor;
      const outlets = readInheritableStaticArrayValues(constructor, "outlets");
      outlets.forEach((outlet) => dependencies.add(outlet, module.identifier));
    });
    return dependencies;
  }
  get outletDefinitions() {
    return this.outletDependencies.getKeysForValue(this.identifier);
  }
  get dependentControllerIdentifiers() {
    return this.outletDependencies.getValuesForKey(this.identifier);
  }
  get dependentContexts() {
    const identifiers = this.dependentControllerIdentifiers;
    return this.router.contexts.filter((context) => identifiers.includes(context.identifier));
  }
  hasOutlet(element, outletName) {
    return !!this.getOutlet(element, outletName) || !!this.getOutletFromMap(element, outletName);
  }
  getOutlet(element, outletName) {
    return this.application.getControllerForElementAndIdentifier(element, outletName);
  }
  getOutletFromMap(element, outletName) {
    return this.outletsByName.getValuesForKey(outletName).find((outlet) => outlet.element === element);
  }
  get scope() {
    return this.context.scope;
  }
  get schema() {
    return this.context.schema;
  }
  get identifier() {
    return this.context.identifier;
  }
  get application() {
    return this.context.application;
  }
  get router() {
    return this.application.router;
  }
};
var Context = class {
  constructor(module, scope2) {
    this.logDebugActivity = (functionName, detail = {}) => {
      const { identifier, controller, element } = this;
      detail = Object.assign({ identifier, controller, element }, detail);
      this.application.logDebugActivity(this.identifier, functionName, detail);
    };
    this.module = module;
    this.scope = scope2;
    this.controller = new module.controllerConstructor(this);
    this.bindingObserver = new BindingObserver(this, this.dispatcher);
    this.valueObserver = new ValueObserver(this, this.controller);
    this.targetObserver = new TargetObserver(this, this);
    this.outletObserver = new OutletObserver(this, this);
    try {
      this.controller.initialize();
      this.logDebugActivity("initialize");
    } catch (error3) {
      this.handleError(error3, "initializing controller");
    }
  }
  connect() {
    this.bindingObserver.start();
    this.valueObserver.start();
    this.targetObserver.start();
    this.outletObserver.start();
    try {
      this.controller.connect();
      this.logDebugActivity("connect");
    } catch (error3) {
      this.handleError(error3, "connecting controller");
    }
  }
  refresh() {
    this.outletObserver.refresh();
  }
  disconnect() {
    try {
      this.controller.disconnect();
      this.logDebugActivity("disconnect");
    } catch (error3) {
      this.handleError(error3, "disconnecting controller");
    }
    this.outletObserver.stop();
    this.targetObserver.stop();
    this.valueObserver.stop();
    this.bindingObserver.stop();
  }
  get application() {
    return this.module.application;
  }
  get identifier() {
    return this.module.identifier;
  }
  get schema() {
    return this.application.schema;
  }
  get dispatcher() {
    return this.application.dispatcher;
  }
  get element() {
    return this.scope.element;
  }
  get parentElement() {
    return this.element.parentElement;
  }
  handleError(error3, message, detail = {}) {
    const { identifier, controller, element } = this;
    detail = Object.assign({ identifier, controller, element }, detail);
    this.application.handleError(error3, `Error ${message}`, detail);
  }
  targetConnected(element, name) {
    this.invokeControllerMethod(`${name}TargetConnected`, element);
  }
  targetDisconnected(element, name) {
    this.invokeControllerMethod(`${name}TargetDisconnected`, element);
  }
  outletConnected(outlet, element, name) {
    this.invokeControllerMethod(`${namespaceCamelize(name)}OutletConnected`, outlet, element);
  }
  outletDisconnected(outlet, element, name) {
    this.invokeControllerMethod(`${namespaceCamelize(name)}OutletDisconnected`, outlet, element);
  }
  invokeControllerMethod(methodName, ...args) {
    const controller = this.controller;
    if (typeof controller[methodName] == "function") {
      controller[methodName](...args);
    }
  }
};
function bless(constructor) {
  return shadow(constructor, getBlessedProperties(constructor));
}
function shadow(constructor, properties) {
  const shadowConstructor = extend3(constructor);
  const shadowProperties = getShadowProperties(constructor.prototype, properties);
  Object.defineProperties(shadowConstructor.prototype, shadowProperties);
  return shadowConstructor;
}
function getBlessedProperties(constructor) {
  const blessings = readInheritableStaticArrayValues(constructor, "blessings");
  return blessings.reduce((blessedProperties, blessing) => {
    const properties = blessing(constructor);
    for (const key in properties) {
      const descriptor = blessedProperties[key] || {};
      blessedProperties[key] = Object.assign(descriptor, properties[key]);
    }
    return blessedProperties;
  }, {});
}
function getShadowProperties(prototype, properties) {
  return getOwnKeys(properties).reduce((shadowProperties, key) => {
    const descriptor = getShadowedDescriptor(prototype, properties, key);
    if (descriptor) {
      Object.assign(shadowProperties, { [key]: descriptor });
    }
    return shadowProperties;
  }, {});
}
function getShadowedDescriptor(prototype, properties, key) {
  const shadowingDescriptor = Object.getOwnPropertyDescriptor(prototype, key);
  const shadowedByValue = shadowingDescriptor && "value" in shadowingDescriptor;
  if (!shadowedByValue) {
    const descriptor = Object.getOwnPropertyDescriptor(properties, key).value;
    if (shadowingDescriptor) {
      descriptor.get = shadowingDescriptor.get || descriptor.get;
      descriptor.set = shadowingDescriptor.set || descriptor.set;
    }
    return descriptor;
  }
}
var getOwnKeys = (() => {
  if (typeof Object.getOwnPropertySymbols == "function") {
    return (object) => [...Object.getOwnPropertyNames(object), ...Object.getOwnPropertySymbols(object)];
  } else {
    return Object.getOwnPropertyNames;
  }
})();
var extend3 = (() => {
  function extendWithReflect(constructor) {
    function extended() {
      return Reflect.construct(constructor, arguments, new.target);
    }
    extended.prototype = Object.create(constructor.prototype, {
      constructor: { value: extended }
    });
    Reflect.setPrototypeOf(extended, constructor);
    return extended;
  }
  function testReflectExtension() {
    const a = function() {
      this.a.call(this);
    };
    const b = extendWithReflect(a);
    b.prototype.a = function() {
    };
    return new b();
  }
  try {
    testReflectExtension();
    return extendWithReflect;
  } catch (error3) {
    return (constructor) => class extended extends constructor {
    };
  }
})();
function blessDefinition(definition) {
  return {
    identifier: definition.identifier,
    controllerConstructor: bless(definition.controllerConstructor)
  };
}
var Module = class {
  constructor(application2, definition) {
    this.application = application2;
    this.definition = blessDefinition(definition);
    this.contextsByScope = /* @__PURE__ */ new WeakMap();
    this.connectedContexts = /* @__PURE__ */ new Set();
  }
  get identifier() {
    return this.definition.identifier;
  }
  get controllerConstructor() {
    return this.definition.controllerConstructor;
  }
  get contexts() {
    return Array.from(this.connectedContexts);
  }
  connectContextForScope(scope2) {
    const context = this.fetchContextForScope(scope2);
    this.connectedContexts.add(context);
    context.connect();
  }
  disconnectContextForScope(scope2) {
    const context = this.contextsByScope.get(scope2);
    if (context) {
      this.connectedContexts.delete(context);
      context.disconnect();
    }
  }
  fetchContextForScope(scope2) {
    let context = this.contextsByScope.get(scope2);
    if (!context) {
      context = new Context(this, scope2);
      this.contextsByScope.set(scope2, context);
    }
    return context;
  }
};
var ClassMap = class {
  constructor(scope2) {
    this.scope = scope2;
  }
  has(name) {
    return this.data.has(this.getDataKey(name));
  }
  get(name) {
    return this.getAll(name)[0];
  }
  getAll(name) {
    const tokenString = this.data.get(this.getDataKey(name)) || "";
    return tokenize(tokenString);
  }
  getAttributeName(name) {
    return this.data.getAttributeNameForKey(this.getDataKey(name));
  }
  getDataKey(name) {
    return `${name}-class`;
  }
  get data() {
    return this.scope.data;
  }
};
var DataMap = class {
  constructor(scope2) {
    this.scope = scope2;
  }
  get element() {
    return this.scope.element;
  }
  get identifier() {
    return this.scope.identifier;
  }
  get(key) {
    const name = this.getAttributeNameForKey(key);
    return this.element.getAttribute(name);
  }
  set(key, value) {
    const name = this.getAttributeNameForKey(key);
    this.element.setAttribute(name, value);
    return this.get(key);
  }
  has(key) {
    const name = this.getAttributeNameForKey(key);
    return this.element.hasAttribute(name);
  }
  delete(key) {
    if (this.has(key)) {
      const name = this.getAttributeNameForKey(key);
      this.element.removeAttribute(name);
      return true;
    } else {
      return false;
    }
  }
  getAttributeNameForKey(key) {
    return `data-${this.identifier}-${dasherize(key)}`;
  }
};
var Guide = class {
  constructor(logger2) {
    this.warnedKeysByObject = /* @__PURE__ */ new WeakMap();
    this.logger = logger2;
  }
  warn(object, key, message) {
    let warnedKeys = this.warnedKeysByObject.get(object);
    if (!warnedKeys) {
      warnedKeys = /* @__PURE__ */ new Set();
      this.warnedKeysByObject.set(object, warnedKeys);
    }
    if (!warnedKeys.has(key)) {
      warnedKeys.add(key);
      this.logger.warn(message, object);
    }
  }
};
function attributeValueContainsToken(attributeName, token) {
  return `[${attributeName}~="${token}"]`;
}
var TargetSet = class {
  constructor(scope2) {
    this.scope = scope2;
  }
  get element() {
    return this.scope.element;
  }
  get identifier() {
    return this.scope.identifier;
  }
  get schema() {
    return this.scope.schema;
  }
  has(targetName) {
    return this.find(targetName) != null;
  }
  find(...targetNames) {
    return targetNames.reduce((target, targetName) => target || this.findTarget(targetName) || this.findLegacyTarget(targetName), void 0);
  }
  findAll(...targetNames) {
    return targetNames.reduce((targets, targetName) => [
      ...targets,
      ...this.findAllTargets(targetName),
      ...this.findAllLegacyTargets(targetName)
    ], []);
  }
  findTarget(targetName) {
    const selector = this.getSelectorForTargetName(targetName);
    return this.scope.findElement(selector);
  }
  findAllTargets(targetName) {
    const selector = this.getSelectorForTargetName(targetName);
    return this.scope.findAllElements(selector);
  }
  getSelectorForTargetName(targetName) {
    const attributeName = this.schema.targetAttributeForScope(this.identifier);
    return attributeValueContainsToken(attributeName, targetName);
  }
  findLegacyTarget(targetName) {
    const selector = this.getLegacySelectorForTargetName(targetName);
    return this.deprecate(this.scope.findElement(selector), targetName);
  }
  findAllLegacyTargets(targetName) {
    const selector = this.getLegacySelectorForTargetName(targetName);
    return this.scope.findAllElements(selector).map((element) => this.deprecate(element, targetName));
  }
  getLegacySelectorForTargetName(targetName) {
    const targetDescriptor = `${this.identifier}.${targetName}`;
    return attributeValueContainsToken(this.schema.targetAttribute, targetDescriptor);
  }
  deprecate(element, targetName) {
    if (element) {
      const { identifier } = this;
      const attributeName = this.schema.targetAttribute;
      const revisedAttributeName = this.schema.targetAttributeForScope(identifier);
      this.guide.warn(element, `target:${targetName}`, `Please replace ${attributeName}="${identifier}.${targetName}" with ${revisedAttributeName}="${targetName}". The ${attributeName} attribute is deprecated and will be removed in a future version of Stimulus.`);
    }
    return element;
  }
  get guide() {
    return this.scope.guide;
  }
};
var OutletSet = class {
  constructor(scope2, controllerElement) {
    this.scope = scope2;
    this.controllerElement = controllerElement;
  }
  get element() {
    return this.scope.element;
  }
  get identifier() {
    return this.scope.identifier;
  }
  get schema() {
    return this.scope.schema;
  }
  has(outletName) {
    return this.find(outletName) != null;
  }
  find(...outletNames) {
    return outletNames.reduce((outlet, outletName) => outlet || this.findOutlet(outletName), void 0);
  }
  findAll(...outletNames) {
    return outletNames.reduce((outlets, outletName) => [...outlets, ...this.findAllOutlets(outletName)], []);
  }
  getSelectorForOutletName(outletName) {
    const attributeName = this.schema.outletAttributeForScope(this.identifier, outletName);
    return this.controllerElement.getAttribute(attributeName);
  }
  findOutlet(outletName) {
    const selector = this.getSelectorForOutletName(outletName);
    if (selector)
      return this.findElement(selector, outletName);
  }
  findAllOutlets(outletName) {
    const selector = this.getSelectorForOutletName(outletName);
    return selector ? this.findAllElements(selector, outletName) : [];
  }
  findElement(selector, outletName) {
    const elements = this.scope.queryElements(selector);
    return elements.filter((element) => this.matchesElement(element, selector, outletName))[0];
  }
  findAllElements(selector, outletName) {
    const elements = this.scope.queryElements(selector);
    return elements.filter((element) => this.matchesElement(element, selector, outletName));
  }
  matchesElement(element, selector, outletName) {
    const controllerAttribute = element.getAttribute(this.scope.schema.controllerAttribute) || "";
    return element.matches(selector) && controllerAttribute.split(" ").includes(outletName);
  }
};
var Scope = class _Scope {
  constructor(schema, element, identifier, logger2) {
    this.targets = new TargetSet(this);
    this.classes = new ClassMap(this);
    this.data = new DataMap(this);
    this.containsElement = (element2) => {
      return element2.closest(this.controllerSelector) === this.element;
    };
    this.schema = schema;
    this.element = element;
    this.identifier = identifier;
    this.guide = new Guide(logger2);
    this.outlets = new OutletSet(this.documentScope, element);
  }
  findElement(selector) {
    return this.element.matches(selector) ? this.element : this.queryElements(selector).find(this.containsElement);
  }
  findAllElements(selector) {
    return [
      ...this.element.matches(selector) ? [this.element] : [],
      ...this.queryElements(selector).filter(this.containsElement)
    ];
  }
  queryElements(selector) {
    return Array.from(this.element.querySelectorAll(selector));
  }
  get controllerSelector() {
    return attributeValueContainsToken(this.schema.controllerAttribute, this.identifier);
  }
  get isDocumentScope() {
    return this.element === document.documentElement;
  }
  get documentScope() {
    return this.isDocumentScope ? this : new _Scope(this.schema, document.documentElement, this.identifier, this.guide.logger);
  }
};
var ScopeObserver = class {
  constructor(element, schema, delegate) {
    this.element = element;
    this.schema = schema;
    this.delegate = delegate;
    this.valueListObserver = new ValueListObserver(this.element, this.controllerAttribute, this);
    this.scopesByIdentifierByElement = /* @__PURE__ */ new WeakMap();
    this.scopeReferenceCounts = /* @__PURE__ */ new WeakMap();
  }
  start() {
    this.valueListObserver.start();
  }
  stop() {
    this.valueListObserver.stop();
  }
  get controllerAttribute() {
    return this.schema.controllerAttribute;
  }
  parseValueForToken(token) {
    const { element, content: identifier } = token;
    return this.parseValueForElementAndIdentifier(element, identifier);
  }
  parseValueForElementAndIdentifier(element, identifier) {
    const scopesByIdentifier = this.fetchScopesByIdentifierForElement(element);
    let scope2 = scopesByIdentifier.get(identifier);
    if (!scope2) {
      scope2 = this.delegate.createScopeForElementAndIdentifier(element, identifier);
      scopesByIdentifier.set(identifier, scope2);
    }
    return scope2;
  }
  elementMatchedValue(element, value) {
    const referenceCount = (this.scopeReferenceCounts.get(value) || 0) + 1;
    this.scopeReferenceCounts.set(value, referenceCount);
    if (referenceCount == 1) {
      this.delegate.scopeConnected(value);
    }
  }
  elementUnmatchedValue(element, value) {
    const referenceCount = this.scopeReferenceCounts.get(value);
    if (referenceCount) {
      this.scopeReferenceCounts.set(value, referenceCount - 1);
      if (referenceCount == 1) {
        this.delegate.scopeDisconnected(value);
      }
    }
  }
  fetchScopesByIdentifierForElement(element) {
    let scopesByIdentifier = this.scopesByIdentifierByElement.get(element);
    if (!scopesByIdentifier) {
      scopesByIdentifier = /* @__PURE__ */ new Map();
      this.scopesByIdentifierByElement.set(element, scopesByIdentifier);
    }
    return scopesByIdentifier;
  }
};
var Router = class {
  constructor(application2) {
    this.application = application2;
    this.scopeObserver = new ScopeObserver(this.element, this.schema, this);
    this.scopesByIdentifier = new Multimap();
    this.modulesByIdentifier = /* @__PURE__ */ new Map();
  }
  get element() {
    return this.application.element;
  }
  get schema() {
    return this.application.schema;
  }
  get logger() {
    return this.application.logger;
  }
  get controllerAttribute() {
    return this.schema.controllerAttribute;
  }
  get modules() {
    return Array.from(this.modulesByIdentifier.values());
  }
  get contexts() {
    return this.modules.reduce((contexts, module) => contexts.concat(module.contexts), []);
  }
  start() {
    this.scopeObserver.start();
  }
  stop() {
    this.scopeObserver.stop();
  }
  loadDefinition(definition) {
    this.unloadIdentifier(definition.identifier);
    const module = new Module(this.application, definition);
    this.connectModule(module);
    const afterLoad = definition.controllerConstructor.afterLoad;
    if (afterLoad) {
      afterLoad.call(definition.controllerConstructor, definition.identifier, this.application);
    }
  }
  unloadIdentifier(identifier) {
    const module = this.modulesByIdentifier.get(identifier);
    if (module) {
      this.disconnectModule(module);
    }
  }
  getContextForElementAndIdentifier(element, identifier) {
    const module = this.modulesByIdentifier.get(identifier);
    if (module) {
      return module.contexts.find((context) => context.element == element);
    }
  }
  proposeToConnectScopeForElementAndIdentifier(element, identifier) {
    const scope2 = this.scopeObserver.parseValueForElementAndIdentifier(element, identifier);
    if (scope2) {
      this.scopeObserver.elementMatchedValue(scope2.element, scope2);
    } else {
      console.error(`Couldn't find or create scope for identifier: "${identifier}" and element:`, element);
    }
  }
  handleError(error3, message, detail) {
    this.application.handleError(error3, message, detail);
  }
  createScopeForElementAndIdentifier(element, identifier) {
    return new Scope(this.schema, element, identifier, this.logger);
  }
  scopeConnected(scope2) {
    this.scopesByIdentifier.add(scope2.identifier, scope2);
    const module = this.modulesByIdentifier.get(scope2.identifier);
    if (module) {
      module.connectContextForScope(scope2);
    }
  }
  scopeDisconnected(scope2) {
    this.scopesByIdentifier.delete(scope2.identifier, scope2);
    const module = this.modulesByIdentifier.get(scope2.identifier);
    if (module) {
      module.disconnectContextForScope(scope2);
    }
  }
  connectModule(module) {
    this.modulesByIdentifier.set(module.identifier, module);
    const scopes = this.scopesByIdentifier.getValuesForKey(module.identifier);
    scopes.forEach((scope2) => module.connectContextForScope(scope2));
  }
  disconnectModule(module) {
    this.modulesByIdentifier.delete(module.identifier);
    const scopes = this.scopesByIdentifier.getValuesForKey(module.identifier);
    scopes.forEach((scope2) => module.disconnectContextForScope(scope2));
  }
};
var defaultSchema = {
  controllerAttribute: "data-controller",
  actionAttribute: "data-action",
  targetAttribute: "data-target",
  targetAttributeForScope: (identifier) => `data-${identifier}-target`,
  outletAttributeForScope: (identifier, outlet) => `data-${identifier}-${outlet}-outlet`,
  keyMappings: Object.assign(Object.assign({ enter: "Enter", tab: "Tab", esc: "Escape", space: " ", up: "ArrowUp", down: "ArrowDown", left: "ArrowLeft", right: "ArrowRight", home: "Home", end: "End", page_up: "PageUp", page_down: "PageDown" }, objectFromEntries("abcdefghijklmnopqrstuvwxyz".split("").map((c) => [c, c]))), objectFromEntries("0123456789".split("").map((n) => [n, n])))
};
function objectFromEntries(array) {
  return array.reduce((memo, [k, v]) => Object.assign(Object.assign({}, memo), { [k]: v }), {});
}
var Application = class {
  constructor(element = document.documentElement, schema = defaultSchema) {
    this.logger = console;
    this.debug = false;
    this.logDebugActivity = (identifier, functionName, detail = {}) => {
      if (this.debug) {
        this.logFormattedMessage(identifier, functionName, detail);
      }
    };
    this.element = element;
    this.schema = schema;
    this.dispatcher = new Dispatcher(this);
    this.router = new Router(this);
    this.actionDescriptorFilters = Object.assign({}, defaultActionDescriptorFilters);
  }
  static start(element, schema) {
    const application2 = new this(element, schema);
    application2.start();
    return application2;
  }
  async start() {
    await domReady();
    this.logDebugActivity("application", "starting");
    this.dispatcher.start();
    this.router.start();
    this.logDebugActivity("application", "start");
  }
  stop() {
    this.logDebugActivity("application", "stopping");
    this.dispatcher.stop();
    this.router.stop();
    this.logDebugActivity("application", "stop");
  }
  register(identifier, controllerConstructor) {
    this.load({ identifier, controllerConstructor });
  }
  registerActionOption(name, filter) {
    this.actionDescriptorFilters[name] = filter;
  }
  load(head, ...rest) {
    const definitions = Array.isArray(head) ? head : [head, ...rest];
    definitions.forEach((definition) => {
      if (definition.controllerConstructor.shouldLoad) {
        this.router.loadDefinition(definition);
      }
    });
  }
  unload(head, ...rest) {
    const identifiers = Array.isArray(head) ? head : [head, ...rest];
    identifiers.forEach((identifier) => this.router.unloadIdentifier(identifier));
  }
  get controllers() {
    return this.router.contexts.map((context) => context.controller);
  }
  getControllerForElementAndIdentifier(element, identifier) {
    const context = this.router.getContextForElementAndIdentifier(element, identifier);
    return context ? context.controller : null;
  }
  handleError(error3, message, detail) {
    var _a;
    this.logger.error(`%s

%o

%o`, message, error3, detail);
    (_a = window.onerror) === null || _a === void 0 ? void 0 : _a.call(window, message, "", 0, 0, error3);
  }
  logFormattedMessage(identifier, functionName, detail = {}) {
    detail = Object.assign({ application: this }, detail);
    this.logger.groupCollapsed(`${identifier} #${functionName}`);
    this.logger.log("details:", Object.assign({}, detail));
    this.logger.groupEnd();
  }
};
function domReady() {
  return new Promise((resolve) => {
    if (document.readyState == "loading") {
      document.addEventListener("DOMContentLoaded", () => resolve());
    } else {
      resolve();
    }
  });
}
function ClassPropertiesBlessing(constructor) {
  const classes = readInheritableStaticArrayValues(constructor, "classes");
  return classes.reduce((properties, classDefinition) => {
    return Object.assign(properties, propertiesForClassDefinition(classDefinition));
  }, {});
}
function propertiesForClassDefinition(key) {
  return {
    [`${key}Class`]: {
      get() {
        const { classes } = this;
        if (classes.has(key)) {
          return classes.get(key);
        } else {
          const attribute = classes.getAttributeName(key);
          throw new Error(`Missing attribute "${attribute}"`);
        }
      }
    },
    [`${key}Classes`]: {
      get() {
        return this.classes.getAll(key);
      }
    },
    [`has${capitalize2(key)}Class`]: {
      get() {
        return this.classes.has(key);
      }
    }
  };
}
function OutletPropertiesBlessing(constructor) {
  const outlets = readInheritableStaticArrayValues(constructor, "outlets");
  return outlets.reduce((properties, outletDefinition) => {
    return Object.assign(properties, propertiesForOutletDefinition(outletDefinition));
  }, {});
}
function getOutletController(controller, element, identifier) {
  return controller.application.getControllerForElementAndIdentifier(element, identifier);
}
function getControllerAndEnsureConnectedScope(controller, element, outletName) {
  let outletController = getOutletController(controller, element, outletName);
  if (outletController)
    return outletController;
  controller.application.router.proposeToConnectScopeForElementAndIdentifier(element, outletName);
  outletController = getOutletController(controller, element, outletName);
  if (outletController)
    return outletController;
}
function propertiesForOutletDefinition(name) {
  const camelizedName = namespaceCamelize(name);
  return {
    [`${camelizedName}Outlet`]: {
      get() {
        const outletElement = this.outlets.find(name);
        const selector = this.outlets.getSelectorForOutletName(name);
        if (outletElement) {
          const outletController = getControllerAndEnsureConnectedScope(this, outletElement, name);
          if (outletController)
            return outletController;
          throw new Error(`The provided outlet element is missing an outlet controller "${name}" instance for host controller "${this.identifier}"`);
        }
        throw new Error(`Missing outlet element "${name}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${selector}".`);
      }
    },
    [`${camelizedName}Outlets`]: {
      get() {
        const outlets = this.outlets.findAll(name);
        if (outlets.length > 0) {
          return outlets.map((outletElement) => {
            const outletController = getControllerAndEnsureConnectedScope(this, outletElement, name);
            if (outletController)
              return outletController;
            console.warn(`The provided outlet element is missing an outlet controller "${name}" instance for host controller "${this.identifier}"`, outletElement);
          }).filter((controller) => controller);
        }
        return [];
      }
    },
    [`${camelizedName}OutletElement`]: {
      get() {
        const outletElement = this.outlets.find(name);
        const selector = this.outlets.getSelectorForOutletName(name);
        if (outletElement) {
          return outletElement;
        } else {
          throw new Error(`Missing outlet element "${name}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${selector}".`);
        }
      }
    },
    [`${camelizedName}OutletElements`]: {
      get() {
        return this.outlets.findAll(name);
      }
    },
    [`has${capitalize2(camelizedName)}Outlet`]: {
      get() {
        return this.outlets.has(name);
      }
    }
  };
}
function TargetPropertiesBlessing(constructor) {
  const targets = readInheritableStaticArrayValues(constructor, "targets");
  return targets.reduce((properties, targetDefinition) => {
    return Object.assign(properties, propertiesForTargetDefinition(targetDefinition));
  }, {});
}
function propertiesForTargetDefinition(name) {
  return {
    [`${name}Target`]: {
      get() {
        const target = this.targets.find(name);
        if (target) {
          return target;
        } else {
          throw new Error(`Missing target element "${name}" for "${this.identifier}" controller`);
        }
      }
    },
    [`${name}Targets`]: {
      get() {
        return this.targets.findAll(name);
      }
    },
    [`has${capitalize2(name)}Target`]: {
      get() {
        return this.targets.has(name);
      }
    }
  };
}
function ValuePropertiesBlessing(constructor) {
  const valueDefinitionPairs = readInheritableStaticObjectPairs(constructor, "values");
  const propertyDescriptorMap = {
    valueDescriptorMap: {
      get() {
        return valueDefinitionPairs.reduce((result, valueDefinitionPair) => {
          const valueDescriptor = parseValueDefinitionPair(valueDefinitionPair, this.identifier);
          const attributeName = this.data.getAttributeNameForKey(valueDescriptor.key);
          return Object.assign(result, { [attributeName]: valueDescriptor });
        }, {});
      }
    }
  };
  return valueDefinitionPairs.reduce((properties, valueDefinitionPair) => {
    return Object.assign(properties, propertiesForValueDefinitionPair(valueDefinitionPair));
  }, propertyDescriptorMap);
}
function propertiesForValueDefinitionPair(valueDefinitionPair, controller) {
  const definition = parseValueDefinitionPair(valueDefinitionPair, controller);
  const { key, name, reader: read, writer: write } = definition;
  return {
    [name]: {
      get() {
        const value = this.data.get(key);
        if (value !== null) {
          return read(value);
        } else {
          return definition.defaultValue;
        }
      },
      set(value) {
        if (value === void 0) {
          this.data.delete(key);
        } else {
          this.data.set(key, write(value));
        }
      }
    },
    [`has${capitalize2(name)}`]: {
      get() {
        return this.data.has(key) || definition.hasCustomDefaultValue;
      }
    }
  };
}
function parseValueDefinitionPair([token, typeDefinition], controller) {
  return valueDescriptorForTokenAndTypeDefinition({
    controller,
    token,
    typeDefinition
  });
}
function parseValueTypeConstant(constant) {
  switch (constant) {
    case Array:
      return "array";
    case Boolean:
      return "boolean";
    case Number:
      return "number";
    case Object:
      return "object";
    case String:
      return "string";
  }
}
function parseValueTypeDefault(defaultValue) {
  switch (typeof defaultValue) {
    case "boolean":
      return "boolean";
    case "number":
      return "number";
    case "string":
      return "string";
  }
  if (Array.isArray(defaultValue))
    return "array";
  if (Object.prototype.toString.call(defaultValue) === "[object Object]")
    return "object";
}
function parseValueTypeObject(payload) {
  const { controller, token, typeObject } = payload;
  const hasType = isSomething(typeObject.type);
  const hasDefault = isSomething(typeObject.default);
  const fullObject = hasType && hasDefault;
  const onlyType = hasType && !hasDefault;
  const onlyDefault = !hasType && hasDefault;
  const typeFromObject = parseValueTypeConstant(typeObject.type);
  const typeFromDefaultValue = parseValueTypeDefault(payload.typeObject.default);
  if (onlyType)
    return typeFromObject;
  if (onlyDefault)
    return typeFromDefaultValue;
  if (typeFromObject !== typeFromDefaultValue) {
    const propertyPath = controller ? `${controller}.${token}` : token;
    throw new Error(`The specified default value for the Stimulus Value "${propertyPath}" must match the defined type "${typeFromObject}". The provided default value of "${typeObject.default}" is of type "${typeFromDefaultValue}".`);
  }
  if (fullObject)
    return typeFromObject;
}
function parseValueTypeDefinition(payload) {
  const { controller, token, typeDefinition } = payload;
  const typeObject = { controller, token, typeObject: typeDefinition };
  const typeFromObject = parseValueTypeObject(typeObject);
  const typeFromDefaultValue = parseValueTypeDefault(typeDefinition);
  const typeFromConstant = parseValueTypeConstant(typeDefinition);
  const type = typeFromObject || typeFromDefaultValue || typeFromConstant;
  if (type)
    return type;
  const propertyPath = controller ? `${controller}.${typeDefinition}` : token;
  throw new Error(`Unknown value type "${propertyPath}" for "${token}" value`);
}
function defaultValueForDefinition(typeDefinition) {
  const constant = parseValueTypeConstant(typeDefinition);
  if (constant)
    return defaultValuesByType[constant];
  const hasDefault = hasProperty(typeDefinition, "default");
  const hasType = hasProperty(typeDefinition, "type");
  const typeObject = typeDefinition;
  if (hasDefault)
    return typeObject.default;
  if (hasType) {
    const { type } = typeObject;
    const constantFromType = parseValueTypeConstant(type);
    if (constantFromType)
      return defaultValuesByType[constantFromType];
  }
  return typeDefinition;
}
function valueDescriptorForTokenAndTypeDefinition(payload) {
  const { token, typeDefinition } = payload;
  const key = `${dasherize(token)}-value`;
  const type = parseValueTypeDefinition(payload);
  return {
    type,
    key,
    name: camelize2(key),
    get defaultValue() {
      return defaultValueForDefinition(typeDefinition);
    },
    get hasCustomDefaultValue() {
      return parseValueTypeDefault(typeDefinition) !== void 0;
    },
    reader: readers[type],
    writer: writers[type] || writers.default
  };
}
var defaultValuesByType = {
  get array() {
    return [];
  },
  boolean: false,
  number: 0,
  get object() {
    return {};
  },
  string: ""
};
var readers = {
  array(value) {
    const array = JSON.parse(value);
    if (!Array.isArray(array)) {
      throw new TypeError(`expected value of type "array" but instead got value "${value}" of type "${parseValueTypeDefault(array)}"`);
    }
    return array;
  },
  boolean(value) {
    return !(value == "0" || String(value).toLowerCase() == "false");
  },
  number(value) {
    return Number(value.replace(/_/g, ""));
  },
  object(value) {
    const object = JSON.parse(value);
    if (object === null || typeof object != "object" || Array.isArray(object)) {
      throw new TypeError(`expected value of type "object" but instead got value "${value}" of type "${parseValueTypeDefault(object)}"`);
    }
    return object;
  },
  string(value) {
    return value;
  }
};
var writers = {
  default: writeString,
  array: writeJSON,
  object: writeJSON
};
function writeJSON(value) {
  return JSON.stringify(value);
}
function writeString(value) {
  return `${value}`;
}
var Controller = class {
  constructor(context) {
    this.context = context;
  }
  static get shouldLoad() {
    return true;
  }
  static afterLoad(_identifier, _application) {
    return;
  }
  get application() {
    return this.context.application;
  }
  get scope() {
    return this.context.scope;
  }
  get element() {
    return this.scope.element;
  }
  get identifier() {
    return this.scope.identifier;
  }
  get targets() {
    return this.scope.targets;
  }
  get outlets() {
    return this.scope.outlets;
  }
  get classes() {
    return this.scope.classes;
  }
  get data() {
    return this.scope.data;
  }
  initialize() {
  }
  connect() {
  }
  disconnect() {
  }
  dispatch(eventName, { target = this.element, detail = {}, prefix: prefix2 = this.identifier, bubbles = true, cancelable = true } = {}) {
    const type = prefix2 ? `${prefix2}:${eventName}` : eventName;
    const event = new CustomEvent(type, { detail, bubbles, cancelable });
    target.dispatchEvent(event);
    return event;
  }
};
Controller.blessings = [
  ClassPropertiesBlessing,
  TargetPropertiesBlessing,
  ValuePropertiesBlessing,
  OutletPropertiesBlessing
];
Controller.targets = [];
Controller.outlets = [];
Controller.values = {};

// app/javascript/controllers/theme_controller.ts
var theme_controller_default = class extends Controller {
  static {
    this.targets = ["lightIcon", "darkIcon"];
  }
  static {
    this.values = { storageKey: String };
  }
  connect() {
    this.initializeTheme();
  }
  toggle() {
    const isDark = document.documentElement.classList.contains("dark");
    const newIsDark = !isDark;
    localStorage.setItem(this.storageKeyValue, JSON.stringify(newIsDark));
    this.updateTheme(newIsDark);
  }
  initializeTheme() {
    const savedIsDark = this.getSavedTheme();
    this.updateTheme(savedIsDark);
  }
  getSavedTheme() {
    return JSON.parse(localStorage.getItem(this.storageKeyValue) || "false");
  }
  updateTheme(isDark) {
    if (isDark) {
      document.documentElement.classList.add("dark");
      this.lightIconTarget.classList.add("hidden");
      this.darkIconTarget.classList.remove("hidden");
    } else {
      document.documentElement.classList.remove("dark");
      this.lightIconTarget.classList.remove("hidden");
      this.darkIconTarget.classList.add("hidden");
    }
  }
};

// app/javascript/controllers/dropdown_controller.ts
var dropdown_controller_default = class extends Controller {
  static {
    this.targets = ["menu", "trigger"];
  }
  static {
    this.values = {
      closeOnClickOutside: { type: Boolean, default: true }
    };
  }
  connect() {
    if (this.closeOnClickOutsideValue) {
      document.addEventListener("click", this.clickOutside.bind(this));
    }
  }
  disconnect() {
    if (this.closeOnClickOutsideValue) {
      document.removeEventListener("click", this.clickOutside.bind(this));
    }
  }
  toggle(event) {
    const isHidden = this.menuTarget.classList.contains("hidden");
    if (isHidden) {
      this.open(event);
    } else {
      this.close(event);
    }
  }
  open(event) {
    this.menuTarget.classList.remove("hidden");
    if (this.hasTriggerTarget) {
      this.triggerTarget.setAttribute("aria-expanded", "true");
    }
  }
  close(event) {
    this.menuTarget.classList.add("hidden");
    if (this.hasTriggerTarget) {
      this.triggerTarget.setAttribute("aria-expanded", "false");
    }
  }
  clickOutside(event) {
    if (!this.element.contains(event.target)) {
      this.close(event);
    }
  }
};

// app/javascript/controllers/sdk_integration_controller.ts
var sdk_integration_controller_default = class extends Controller {
  static {
    this.targets = [
      "sdkButton"
    ];
  }
  static {
    this.values = {
      message: String,
      action: String
    };
  }
  connect() {
    this.checkSDKAvailability();
  }
  // Send message to chatbox (SDK integration)
  sendToChatbox() {
    if (!window.sdkUtils || !window.sdkUtils.sendMessage) {
      console.warn("SDK not available");
      return;
    }
    const message = this.messageValue || this.generateDefaultMessage();
    window.sdkUtils.sendMessage(message);
  }
  // Send error to chatbox for fixing
  sendErrorToChatbox() {
    if (!window.sdkUtils || !window.sdkUtils.sendErrorForFix) {
      console.warn("SDK not available");
      return;
    }
    const action = this.actionValue || "sendErrorForFix";
    if (action === "sendErrorForFix") {
      const errorMessage = this.messageValue || "Unknown error";
      window.sdkUtils.sendErrorForFix({ errorMessage });
    } else {
      const message = this.messageValue || this.generateDefaultMessage();
      window.sdkUtils.sendMessage(message);
    }
  }
  // Check SDK availability and show/hide SDK buttons
  checkSDKAvailability() {
    if (!this.hasSdkButtonTarget) return;
    const checkAndShow = () => {
      if (window.isSDKAvailable && window.isSDKAvailable()) {
        this.sdkButtonTarget.style.display = "block";
        return true;
      }
      return false;
    };
    if (!checkAndShow()) {
      setTimeout(checkAndShow, 1e3);
      setTimeout(checkAndShow, 2800);
    }
  }
  // Generate default message for SDK
  generateDefaultMessage() {
    const url = window.location.pathname.substring(1);
    return `Please help me with this page: ${url}

URL: ${window.location.href}
Path: ${url}

I need assistance with this page.`;
  }
};

// app/javascript/controllers/clipboard_controller.ts
var clipboard_controller_default = class extends Controller {
  static {
    this.targets = ["source"];
  }
  // Copy content to clipboard
  copy(event) {
    event.preventDefault();
    const textToCopy = this.sourceTarget.value;
    if (!textToCopy) {
      console.error("No text to copy found");
      this.showFailure();
      return;
    }
    if (!window.copyToClipboard) {
      console.error("window.copyToClipboard not available");
      this.showFailure();
      return;
    }
    console.log("Attempting to copy:", textToCopy);
    window.copyToClipboard(textToCopy).then(() => {
      this.showSuccess();
    }).catch((_error) => {
      this.showFailure();
    });
  }
  // Show success feedback
  showSuccess() {
    const button = this.getButton();
    const originalText = button.innerHTML;
    const originalClass = button.className;
    button.innerHTML = "Copied!";
    button.className = originalClass.replace(/btn-\w+/, "btn-success");
    setTimeout(() => {
      button.innerHTML = originalText;
      button.className = originalClass;
    }, 2e3);
  }
  // Show failure feedback
  showFailure() {
    const button = this.getButton();
    const originalText = button.innerHTML;
    const originalClass = button.className;
    button.innerHTML = "Copy Failed!";
    button.className = originalClass.replace(/btn-\w+/, "btn-danger");
    setTimeout(() => {
      button.innerHTML = originalText;
      button.className = originalClass;
    }, 2e3);
  }
  // Get the button to show feedback on
  getButton() {
    const button = this.element.querySelector("button");
    if (button) {
      return button;
    }
    return this.element;
  }
};

// app/javascript/controllers/city_selector_controller.ts
var city_selector_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectionType = "departure";
    this.isMultiSelectMode = false;
    this.selectedCities = [];
    this.currentMultiCitySegmentId = null;
    this.currentMultiCityCityType = null;
  }
  static {
    this.targets = [
      // stimulus-validator: disable-next-line
      "modal",
      "departure",
      "destination",
      "departureCityInput",
      "destinationCityInput",
      // stimulus-validator: disable-next-line
      "tabDeparture",
      // stimulus-validator: disable-next-line
      "tabDestination",
      // stimulus-validator: disable-next-line
      "tabDomestic",
      // stimulus-validator: disable-next-line
      "tabInternational",
      // stimulus-validator: disable-next-line
      "searchInput",
      // stimulus-validator: disable-next-line
      "domesticList",
      // stimulus-validator: disable-next-line
      "internationalList",
      // stimulus-validator: disable-next-line
      "historySection",
      // stimulus-validator: disable-next-line
      "currentCity",
      // stimulus-validator: disable-next-line
      "locationStatus",
      // stimulus-validator: disable-next-line
      "locationButton",
      // stimulus-validator: disable-next-line
      "locationText",
      // stimulus-validator: disable-next-line
      "locationSpinner",
      // stimulus-validator: disable-next-line
      "locatedCity",
      // stimulus-validator: disable-next-line
      "locatedCityButton",
      // stimulus-validator: disable-next-line
      "currentRegionTab"
    ];
  }
  static {
    this.values = {
      departureCity: String,
      destinationCity: String,
      enableMultiSelect: { type: Boolean, default: true },
      modalTitle: { type: String, default: "" }
    };
  }
  connect() {
    console.log("CitySelector connected", { enableMultiSelect: this.enableMultiSelectValue });
    if (!this.departureCityValue) this.departureCityValue = "\u5317\u4EAC";
    if (!this.destinationCityValue) this.destinationCityValue = "\u676D\u5DDE";
    if (this.hasDepartureCityInputTarget) {
      this.departureCityInputTarget.value = this.departureCityValue;
    }
    if (this.hasDestinationCityInputTarget) {
      this.destinationCityInputTarget.value = this.destinationCityValue;
    }
    if (!this.enableMultiSelectValue) {
      this.hideMultiSelectUI();
    }
    this.element.addEventListener("multi-city:open-city-selector", this.handleMultiCityOpen.bind(this));
  }
  disconnect() {
    this.element.removeEventListener("multi-city:open-city-selector", this.handleMultiCityOpen.bind(this));
  }
  // Handle multi-city city selector request
  handleMultiCityOpen(event) {
    const customEvent = event;
    const { segmentId, cityType } = customEvent.detail;
    console.log("City selector: Received multi-city open request", { segmentId, cityType });
    this.currentMultiCitySegmentId = segmentId;
    this.currentMultiCityCityType = cityType;
    this.selectionType = cityType === "departure" ? "departure" : "destination";
    this.updateModalTitle();
    this.showModal();
  }
  // Open modal for departure city selection
  openDeparture() {
    this.selectionType = "departure";
    this.isMultiSelectMode = false;
    this.selectedCities = [];
    this.updateModalTitle();
    this.updateMultiSelectUI();
    this.showModal();
  }
  // Open modal for destination city selection
  openDestination() {
    this.selectionType = "destination";
    this.isMultiSelectMode = false;
    this.selectedCities = [];
    this.updateModalTitle();
    this.updateMultiSelectUI();
    this.showModal();
  }
  // Show modal
  showModal() {
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // Close modal
  closeModal() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
    this.clearSearch();
  }
  // Select city
  selectCity(event) {
    const button = event.currentTarget;
    const cityName = button.dataset.cityName || "";
    const isInternational = button.dataset.international === "true";
    console.log("City selector: City selected:", cityName, "international:", isInternational);
    if (this.isMultiSelectMode) {
      if (this.selectedCities.includes(cityName)) {
        this.selectedCities = this.selectedCities.filter((city) => city !== cityName);
      } else {
        this.selectedCities.push(cityName);
      }
      this.updateSelectedCitiesDisplay();
      this.updateCityButtonStates();
      return;
    }
    if (this.currentMultiCitySegmentId && this.currentMultiCityCityType) {
      console.log("City selector: Multi-city mode, dispatching event", {
        segmentId: this.currentMultiCitySegmentId,
        cityType: this.currentMultiCityCityType,
        cityName
      });
      const updateEvent = new CustomEvent("city-selector:city-selected", {
        detail: {
          segmentId: this.currentMultiCitySegmentId,
          cityType: this.currentMultiCityCityType,
          cityName
        },
        bubbles: true
      });
      document.dispatchEvent(updateEvent);
      this.currentMultiCitySegmentId = null;
      this.currentMultiCityCityType = null;
    } else {
      console.log("City selector: Regular mode");
      if (this.selectionType === "departure") {
        this.departureCityValue = cityName;
        if (this.hasDepartureTarget) {
          this.departureTarget.textContent = cityName;
        }
        if (this.hasDepartureCityInputTarget) {
          this.departureCityInputTarget.value = cityName;
        }
        this.dispatchCityChangedEvent(cityName);
        this.dispatchHotelCityUpdateEvent(cityName, isInternational);
        if (isInternational) {
          this.switchToInternationalTab();
        }
      } else {
        this.destinationCityValue = cityName;
        if (this.hasDestinationTarget) {
          this.destinationTarget.textContent = cityName;
        }
        if (this.hasDestinationCityInputTarget) {
          this.destinationCityInputTarget.value = cityName;
        }
      }
    }
    this.closeModal();
  }
  // Dispatch city-changed event for other controllers (like tour-group-filter)
  dispatchCityChangedEvent(cityName) {
    const cityChangedEvent = new CustomEvent("city-selector:city-changed", {
      detail: { cityName },
      bubbles: true
    });
    this.element.dispatchEvent(cityChangedEvent);
    console.log("City selector: Dispatched city-changed event", cityName);
  }
  // Dispatch hotel-specific city update event
  dispatchHotelCityUpdateEvent(cityName, isInternational = false) {
    const hotelCityEvent = new CustomEvent("city-selector:city-selected-for-hotel", {
      detail: {
        cityName,
        isInternational
      },
      bubbles: true
    });
    document.dispatchEvent(hotelCityEvent);
    console.log("City selector: Dispatched hotel city update event", { cityName, isInternational });
  }
  // Switch cities
  switchCities() {
    const temp = this.departureCityValue;
    this.departureCityValue = this.destinationCityValue;
    this.destinationCityValue = temp;
    if (this.hasDepartureTarget) {
      this.departureTarget.textContent = this.departureCityValue;
    }
    if (this.hasDestinationTarget) {
      this.destinationTarget.textContent = this.destinationCityValue;
    }
    if (this.hasDepartureCityInputTarget) {
      this.departureCityInputTarget.value = this.departureCityValue;
    }
    if (this.hasDestinationCityInputTarget) {
      this.destinationCityInputTarget.value = this.destinationCityValue;
    }
  }
  // Switch between domestic and international tabs
  showDomestic() {
    this.domesticListTarget.classList.remove("hidden");
    this.domesticListTarget.classList.add("flex");
    this.internationalListTarget.classList.add("hidden");
    this.internationalListTarget.classList.remove("flex");
    this.tabDomesticTarget.classList.add("text-gray-900");
    this.tabDomesticTarget.classList.remove("text-gray-500");
    this.tabInternationalTarget.classList.remove("text-gray-900");
    this.tabInternationalTarget.classList.add("text-gray-500");
    const domesticUnderline = this.tabDomesticTarget.querySelector("div");
    const internationalUnderline = this.tabInternationalTarget.querySelector("div");
    if (domesticUnderline) domesticUnderline.classList.remove("hidden");
    if (internationalUnderline) internationalUnderline.classList.add("hidden");
  }
  showInternational() {
    this.domesticListTarget.classList.add("hidden");
    this.domesticListTarget.classList.remove("flex");
    this.internationalListTarget.classList.remove("hidden");
    this.internationalListTarget.classList.add("flex");
    this.tabDomesticTarget.classList.remove("text-gray-900");
    this.tabDomesticTarget.classList.add("text-gray-500");
    this.tabInternationalTarget.classList.add("text-gray-900");
    this.tabInternationalTarget.classList.remove("text-gray-500");
    const domesticUnderline = this.tabDomesticTarget.querySelector("div");
    const internationalUnderline = this.tabInternationalTarget.querySelector("div");
    if (domesticUnderline) domesticUnderline.classList.add("hidden");
    if (internationalUnderline) internationalUnderline.classList.remove("hidden");
  }
  // Search cities
  search() {
    const query = this.searchInputTarget.value.toLowerCase().trim();
    if (query === "") {
      this.clearSearch();
      return;
    }
    this.historySectionTarget.classList.add("hidden");
    this.filterCities(this.domesticListTarget, query);
    if (!this.internationalListTarget.classList.contains("hidden")) {
      this.filterCities(this.internationalListTarget, query);
    }
  }
  // Filter cities helper
  filterCities(listTarget, query) {
    const cityButtons = listTarget.querySelectorAll("[data-city-name]");
    cityButtons.forEach((button) => {
      const cityName = button.dataset.cityName?.toLowerCase() || "";
      const cityPinyin = button.dataset.cityPinyin?.toLowerCase() || "";
      if (cityName.includes(query) || cityPinyin.includes(query)) {
        button.classList.remove("hidden");
      } else {
        button.classList.add("hidden");
      }
    });
  }
  // Clear search
  clearSearch() {
    this.searchInputTarget.value = "";
    this.historySectionTarget.classList.remove("hidden");
    const allButtons = this.element.querySelectorAll("[data-city-name]");
    allButtons.forEach((button) => {
      button.classList.remove("hidden");
    });
  }
  // Update modal title based on selection type
  updateModalTitle() {
    const singleSelectTitle = this.modalTarget.querySelector("[data-single-select-title]");
    const multiSelectTitle = this.modalTarget.querySelector("[data-multi-select-title]");
    if (!this.enableMultiSelectValue && this.modalTitleValue) {
      if (singleSelectTitle) {
        singleSelectTitle.textContent = this.modalTitleValue;
      }
    } else {
      if (singleSelectTitle) {
        singleSelectTitle.textContent = this.selectionType === "departure" ? "\u5355\u9009\u51FA\u53D1\u5730" : "\u5355\u9009\u76EE\u7684\u5730";
      }
      if (multiSelectTitle) {
        multiSelectTitle.textContent = this.selectionType === "departure" ? "\u591A\u9009\u51FA\u53D1\u5730" : "\u591A\u9009\u76EE\u7684\u5730";
      }
    }
  }
  // Switch to single select mode
  switchToSingleSelect() {
    this.isMultiSelectMode = false;
    this.selectedCities = [];
    this.updateModalTitle();
    this.updateMultiSelectUI();
  }
  // Switch to multi select mode
  switchToMultiSelect() {
    this.isMultiSelectMode = true;
    const currentValue = this.selectionType === "departure" ? this.departureCityValue : this.destinationCityValue;
    if (currentValue && currentValue !== "") {
      this.selectedCities = currentValue.split(",").map((city) => city.trim()).filter((city) => city !== "");
    } else {
      this.selectedCities = [];
    }
    this.updateModalTitle();
    this.updateMultiSelectUI();
  }
  // Update multi-select UI elements
  updateMultiSelectUI() {
    const selectedCitiesContainer = this.modalTarget.querySelector("[data-selected-cities]");
    const confirmButton = this.modalTarget.querySelector("[data-confirm-button]");
    const singleSelectTab = this.modalTarget.querySelector("[data-single-select-tab]");
    const multiSelectTab = this.modalTarget.querySelector("[data-multi-select-tab]");
    if (this.isMultiSelectMode) {
      selectedCitiesContainer?.classList.remove("hidden");
      confirmButton?.classList.remove("hidden");
      singleSelectTab?.classList.remove("bg-white", "shadow-sm", "text-gray-900");
      singleSelectTab?.classList.add("text-gray-500");
      multiSelectTab?.classList.remove("text-gray-500");
      multiSelectTab?.classList.add("bg-white", "shadow-sm", "text-gray-900");
      this.updateSelectedCitiesDisplay();
      this.updateCityButtonStates();
    } else {
      selectedCitiesContainer?.classList.add("hidden");
      confirmButton?.classList.add("hidden");
      singleSelectTab?.classList.remove("text-gray-500");
      singleSelectTab?.classList.add("bg-white", "shadow-sm", "text-gray-900");
      multiSelectTab?.classList.remove("bg-white", "shadow-sm", "text-gray-900");
      multiSelectTab?.classList.add("text-gray-500");
      this.clearCityButtonStates();
    }
  }
  // Update selected cities display
  updateSelectedCitiesDisplay() {
    const container = this.modalTarget.querySelector("[data-selected-cities]");
    if (!container) return;
    container.innerHTML = this.selectedCities.map((city) => `
      <div class="inline-flex items-center bg-yellow-100 px-3 py-1.5 rounded-lg">
        <span class="text-sm font-medium text-gray-900">${city}</span>
        <button 
          data-action="click->city-selector#removeSelectedCity"
          data-city-name="${city}"
          class="ml-2 text-gray-500 hover:text-gray-700">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
    `).join("");
  }
  // Remove selected city
  removeSelectedCity(event) {
    event.stopPropagation();
    const button = event.currentTarget;
    const cityName = button.dataset.cityName || "";
    this.selectedCities = this.selectedCities.filter((city) => city !== cityName);
    this.updateSelectedCitiesDisplay();
    this.updateCityButtonStates();
  }
  // Update city button states (show checkmarks)
  updateCityButtonStates() {
    const cityButtons = this.modalTarget.querySelectorAll("[data-city-name]");
    cityButtons.forEach((button) => {
      const cityName = button.dataset.cityName || "";
      const isSelected = this.selectedCities.includes(cityName);
      if (isSelected) {
        button.classList.add("bg-yellow-100", "relative");
        if (!button.querySelector("[data-checkmark]")) {
          const checkmark = document.createElement("svg");
          checkmark.setAttribute("data-checkmark", "");
          checkmark.setAttribute("class", "absolute right-1 top-1 w-4 h-4 text-yellow-600");
          checkmark.setAttribute("fill", "currentColor");
          checkmark.setAttribute("viewBox", "0 0 20 20");
          checkmark.innerHTML = '<path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>';
          button.appendChild(checkmark);
        }
      } else {
        button.classList.remove("bg-yellow-100", "relative");
        button.querySelector("[data-checkmark]")?.remove();
      }
    });
  }
  // Clear city button states
  clearCityButtonStates() {
    const cityButtons = this.modalTarget.querySelectorAll("[data-city-name]");
    cityButtons.forEach((button) => {
      button.classList.remove("bg-yellow-100", "relative");
      button.querySelector("[data-checkmark]")?.remove();
    });
  }
  // Confirm multi-select
  confirmMultiSelect() {
    if (this.selectedCities.length === 0) {
      alert("\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u4E2A\u57CE\u5E02");
      return;
    }
    if (this.selectionType === "departure") {
      this.departureCityValue = this.selectedCities.join(",");
      this.departureTarget.textContent = this.selectedCities.join("\u3001");
      this.departureCityInputTarget.value = this.departureCityValue;
    } else {
      this.destinationCityValue = this.selectedCities.join(",");
      this.destinationTarget.textContent = this.selectedCities.join("\u3001");
      this.destinationCityInputTarget.value = this.destinationCityValue;
    }
    this.closeModal();
  }
  // Jump to letter section
  jumpToLetter(event) {
    const button = event.currentTarget;
    const letter = button.dataset.letter || "";
    const section = this.domesticListTarget.querySelector(`[data-letter-section="${letter}"]`);
    if (section) {
      section.scrollIntoView({ behavior: "smooth", block: "start" });
    }
  }
  // Request user location
  requestLocation() {
    if (!navigator.geolocation) {
      this.locationTextTarget.textContent = "\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u5B9A\u4F4D";
      return;
    }
    this.locationButtonTarget.disabled = true;
    this.locationTextTarget.textContent = "\u5B9A\u4F4D\u4E2D...";
    this.locationSpinnerTarget.classList.remove("hidden");
    navigator.geolocation.getCurrentPosition(
      (position) => this.handleLocationSuccess(position),
      (error3) => this.handleLocationError(error3),
      {
        enableHighAccuracy: true,
        timeout: 1e4,
        maximumAge: 0
      }
    );
  }
  // Handle location success
  async handleLocationSuccess(position) {
    const { latitude, longitude } = position.coords;
    console.log("Location obtained:", latitude, longitude);
    try {
      const response = await fetch("/api/geocoding/reverse", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "X-CSRF-Token": this.getCSRFToken()
        },
        body: JSON.stringify({
          lat: latitude,
          lng: longitude
        })
      });
      if (!response.ok) {
        throw new Error("\u5B9A\u4F4D\u670D\u52A1\u5931\u8D25");
      }
      const data2 = await response.json();
      console.log("City found:", data2);
      this.locationTextTarget.textContent = `\u5F53\u524D\u4F4D\u7F6E: ${data2.city}`;
      this.locationButtonTarget.disabled = false;
      this.locationSpinnerTarget.classList.add("hidden");
      this.locatedCityButtonTarget.textContent = data2.city;
      this.locatedCityButtonTarget.dataset.cityName = data2.city;
      this.locatedCityButtonTarget.dataset.cityPinyin = data2.pinyin;
      this.locatedCityTarget.classList.remove("hidden");
    } catch (error3) {
      console.error("Reverse geocoding error:", error3);
      this.handleLocationError(error3);
    }
  }
  // Handle location error
  handleLocationError(error3) {
    let errorMessage = "\u5B9A\u4F4D\u5931\u8D25";
    if ("code" in error3) {
      switch (error3.code) {
        case 1:
          errorMessage = "\u7528\u6237\u62D2\u7EDD\u5B9A\u4F4D";
          break;
        case 2:
          errorMessage = "\u4F4D\u7F6E\u4FE1\u606F\u4E0D\u53EF\u7528";
          break;
        case 3:
          errorMessage = "\u5B9A\u4F4D\u8D85\u65F6";
          break;
      }
    }
    console.error("Location error:", error3);
    this.locationTextTarget.textContent = errorMessage;
    this.locationButtonTarget.disabled = false;
    this.locationSpinnerTarget.classList.add("hidden");
  }
  // Get CSRF token
  getCSRFToken() {
    const token = document.querySelector('meta[name="csrf-token"]');
    return token ? token.content : "";
  }
  // Hide multi-select UI elements (for pages that don't need multi-select)
  hideMultiSelectUI() {
    const singleSelectTab = this.modalTarget.querySelector("[data-single-select-tab]");
    const multiSelectTab = this.modalTarget.querySelector("[data-multi-select-tab]");
    if (singleSelectTab && multiSelectTab) {
      const toggleContainer = singleSelectTab.parentElement;
      if (toggleContainer) {
        const titleText = this.modalTitleValue || "\u9009\u62E9\u76EE\u7684\u5730";
        toggleContainer.outerHTML = `<div class="text-lg font-bold text-gray-900">${titleText}</div>`;
      }
    }
    const selectedCitiesContainer = this.modalTarget.querySelector("[data-selected-cities]");
    const confirmButton = this.modalTarget.querySelector("[data-confirm-button]");
    if (selectedCitiesContainer) {
      selectedCitiesContainer.style.display = "none";
    }
    if (confirmButton) {
      confirmButton.style.display = "none";
    }
  }
  // Switch to international tab in hotel context
  switchToInternationalTab() {
    console.log("City selector: Switching to international hotel tab");
    const event = new CustomEvent("city-selector:switch-to-international", {
      detail: {},
      bubbles: true
    });
    document.dispatchEvent(event);
  }
  // Scroll to region in international tab
  scrollToRegion(event) {
    const button = event.currentTarget;
    const regionId = button.dataset.region;
    if (!regionId) return;
    console.log("Scrolling to region:", regionId);
    const allRegionTabs = this.internationalListTarget.querySelectorAll("[data-region]");
    allRegionTabs.forEach((tab) => {
      tab.classList.remove("bg-white", "font-bold", "text-gray-900");
      tab.classList.add("text-gray-500");
    });
    button.classList.add("bg-white", "font-bold", "text-gray-900");
    button.classList.remove("text-gray-500");
    const contentArea = this.internationalListTarget.querySelector(".overflow-y-auto");
    const targetSection = contentArea?.querySelector(`[data-region-section="${regionId}"]`);
    if (targetSection && contentArea) {
      const offsetTop = targetSection.offsetTop - 20;
      contentArea.scrollTo({
        top: offsetTop,
        behavior: "smooth"
      });
    }
  }
};

// app/javascript/controllers/flight_search_controller.ts
var flight_search_controller_default = class extends Controller {
  static {
    this.values = {
      departure: String,
      destination: String,
      date: String
    };
  }
  connect() {
    console.log("FlightSearch connected", {
      departure: this.departureValue,
      destination: this.destinationValue,
      date: this.dateValue
    });
  }
};

// app/javascript/controllers/date_picker_controller.ts
var date_picker_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedDateObj = /* @__PURE__ */ new Date();
    this.currentMultiCitySegmentId = null;
    this.selectedMonths = /* @__PURE__ */ new Set();
  }
  static {
    this.targets = [
      "modal",
      "selectedDate",
      "dateInput",
      "dateButton",
      "exactTab",
      "fuzzyTab",
      "exactDateContent",
      "fuzzyDateContent",
      "monthButton"
    ];
  }
  static {
    this.values = {
      currentDate: String
    };
  }
  connect() {
    console.log("DatePicker connected");
    const clientToday = this.formatDate(/* @__PURE__ */ new Date());
    this.selectedDateObj = /* @__PURE__ */ new Date();
    this.currentDateValue = this.formatDate(this.selectedDateObj);
    if (this.hasSelectedDateTarget) {
      this.updateDisplayedDate();
    }
    if (this.hasDateInputTarget) {
      this.dateInputTarget.value = this.currentDateValue;
    }
    if (!this.hasModalTarget) {
      console.log("DatePicker: No modal target found, skipping modal setup");
      return;
    }
    const modalElement = this.modalTarget;
    if (modalElement) {
      modalElement.dataset.clientToday = clientToday;
    }
    this.updatePastDates();
    this.element.addEventListener("multi-city:open-date-picker", this.handleMultiCityOpen.bind(this));
  }
  disconnect() {
    this.element.removeEventListener("multi-city:open-date-picker", this.handleMultiCityOpen.bind(this));
  }
  // Handle multi-city date picker request
  handleMultiCityOpen(event) {
    const { segmentId } = event.detail;
    console.log("Date picker: Received multi-city open request", { segmentId });
    this.currentMultiCitySegmentId = segmentId;
    this.openModal();
  }
  // Open check-in date picker
  openCheckIn() {
    const checkInDate = prompt("\u8BF7\u8F93\u5165\u5165\u4F4F\u65E5\u671F (YYYY-MM-DD)", this.formatDate(/* @__PURE__ */ new Date()));
    if (checkInDate) {
      const url = new URL(window.location.href);
      url.searchParams.set("check_in", checkInDate);
      window.location.href = url.toString();
    }
  }
  // Open check-out date picker
  openCheckOut() {
    const tomorrow = /* @__PURE__ */ new Date();
    tomorrow.setDate(tomorrow.getDate() + 1);
    const checkOutDate = prompt("\u8BF7\u8F93\u5165\u79BB\u5E97\u65E5\u671F (YYYY-MM-DD)", this.formatDate(tomorrow));
    if (checkOutDate) {
      const url = new URL(window.location.href);
      url.searchParams.set("check_out", checkOutDate);
      window.location.href = url.toString();
    }
  }
  // Open date picker modal
  openModal() {
    if (!this.hasModalTarget) return;
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // Close date picker modal
  closeModal() {
    if (!this.hasModalTarget) return;
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  // Select a date
  selectDate(event) {
    const button = event.currentTarget;
    const dateStr = button.dataset.date || "";
    if (!dateStr) return;
    const selectedDate = /* @__PURE__ */ new Date(`${dateStr}T00:00:00`);
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    selectedDate.setHours(0, 0, 0, 0);
    if (selectedDate < today) {
      console.log("Cannot select past dates (client timezone check)");
      return;
    }
    this.selectedDateObj = selectedDate;
    this.currentDateValue = dateStr;
    if (this.currentMultiCitySegmentId) {
      console.log("Date picker: Multi-city mode, dispatching event", {
        segmentId: this.currentMultiCitySegmentId,
        date: dateStr
      });
      const updateEvent = new CustomEvent("date-picker:date-selected", {
        detail: {
          segmentId: this.currentMultiCitySegmentId,
          date: dateStr
        },
        bubbles: true
      });
      document.dispatchEvent(updateEvent);
      this.currentMultiCitySegmentId = null;
      this.closeModal();
    } else if (window.location.pathname.includes("/flights/search")) {
      console.log("Date picker: Search page mode, reloading with new date");
      const url = new URL(window.location.href);
      url.searchParams.set("date", dateStr);
      window.location.href = url.toString();
    } else {
      console.log("Date picker: Regular mode");
      if (this.hasSelectedDateTarget) {
        this.updateDisplayedDate();
      }
      if (this.hasDateInputTarget) {
        this.dateInputTarget.value = dateStr;
      }
      this.closeModal();
    }
  }
  // Update the displayed date in the main view
  updateDisplayedDate() {
    const month = this.selectedDateObj.getMonth() + 1;
    const day = this.selectedDateObj.getDate();
    const dayName = this.getDayName(this.selectedDateObj);
    this.selectedDateTarget.innerHTML = `
      ${month}<span class="text-lg font-medium mx-0.5">\u6708</span>${day}<span class="text-lg font-medium ml-0.5 mr-2">\u65E5</span>
      <span class="text-base text-gray-500 font-medium">${dayName}</span>
    `;
  }
  // Get day name in Chinese
  getDayName(date) {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    const targetDate = new Date(date);
    targetDate.setHours(0, 0, 0, 0);
    const diffTime = targetDate.getTime() - today.getTime();
    const diffDays = Math.round(diffTime / (1e3 * 60 * 60 * 24));
    if (diffDays === 0) return "\u4ECA\u5929";
    if (diffDays === 1) return "\u660E\u5929";
    if (diffDays === 2) return "\u540E\u5929";
    const weekdays = ["\u5468\u65E5", "\u5468\u4E00", "\u5468\u4E8C", "\u5468\u4E09", "\u5468\u56DB", "\u5468\u4E94", "\u5468\u516D"];
    return weekdays[date.getDay()];
  }
  // Format date as YYYY-MM-DD
  formatDate(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    return `${year}-${month}-${day}`;
  }
  // Generate calendar data
  generateCalendar() {
    const result = [];
    const startDate = /* @__PURE__ */ new Date();
    for (let i = 0; i < 60; i++) {
      const date = new Date(startDate);
      date.setDate(startDate.getDate() + i);
      result.push({
        date: this.formatDate(date),
        day: date.getDate(),
        month: date.getMonth() + 1,
        year: date.getFullYear(),
        weekday: date.getDay(),
        isToday: this.isToday(date),
        isSelected: this.formatDate(date) === this.currentDateValue
      });
    }
    return result;
  }
  // Check if date is today
  isToday(date) {
    const today = /* @__PURE__ */ new Date();
    return date.getDate() === today.getDate() && date.getMonth() === today.getMonth() && date.getFullYear() === today.getFullYear();
  }
  // Update date buttons to disable past dates based on client timezone
  updatePastDates() {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    const todayStr = this.formatDate(today);
    this.dateButtonTargets.forEach((button) => {
      const dateStr = button.dataset.date;
      if (!dateStr) return;
      const buttonDate = /* @__PURE__ */ new Date(`${dateStr}T00:00:00`);
      buttonDate.setHours(0, 0, 0, 0);
      const todayMarker = button.querySelector("[data-today-marker]");
      if (dateStr === todayStr && todayMarker) {
        todayMarker.classList.remove("hidden");
      }
      if (buttonDate < today) {
        button.disabled = true;
        button.classList.add("opacity-30", "cursor-not-allowed");
      } else {
        button.disabled = false;
        button.classList.remove("opacity-30", "cursor-not-allowed");
      }
    });
    console.log(`DatePicker: Updated ${this.dateButtonTargets.length} date buttons based on client timezone (today: ${todayStr})`);
  }
  // Switch to exact date tab
  switchToExactDate() {
    this.exactTabTarget.classList.add("font-bold", "border-b-2", "border-black");
    this.exactTabTarget.classList.remove("text-gray-500");
    this.fuzzyTabTarget.classList.remove("font-bold", "border-b-2", "border-black");
    this.fuzzyTabTarget.classList.add("text-gray-500");
    this.exactDateContentTarget.classList.remove("hidden");
    this.fuzzyDateContentTarget.classList.add("hidden");
  }
  // Switch to fuzzy date tab
  switchToFuzzyDate() {
    this.fuzzyTabTarget.classList.add("font-bold", "border-b-2", "border-black");
    this.fuzzyTabTarget.classList.remove("text-gray-500");
    this.exactTabTarget.classList.remove("font-bold", "border-b-2", "border-black");
    this.exactTabTarget.classList.add("text-gray-500");
    this.fuzzyDateContentTarget.classList.remove("hidden");
    this.exactDateContentTarget.classList.add("hidden");
  }
  // Toggle month selection
  toggleMonth(event) {
    const button = event.currentTarget;
    const month = button.dataset.month;
    if (!month) return;
    if (this.selectedMonths.has(month)) {
      this.selectedMonths.delete(month);
      button.classList.remove("bg-yellow-100", "border-yellow-500");
      button.classList.add("bg-gray-50");
      const svg = button.querySelector("svg");
      if (svg) svg.classList.remove("text-gray-700");
      if (svg) svg.classList.add("text-gray-400");
      const span = button.querySelector("span");
      if (span) span.classList.remove("text-gray-800", "font-medium");
      if (span) span.classList.add("text-gray-500");
      const checkmarks = button.querySelectorAll('div[class*="absolute"]');
      checkmarks.forEach((div) => {
        if (div.querySelector('svg[width="12"]')) {
          div.classList.add("hidden");
        }
      });
    } else {
      this.selectedMonths.add(month);
      button.classList.remove("bg-gray-50");
      button.classList.add("bg-yellow-100", "border-yellow-500");
      const svg = button.querySelector("svg");
      if (svg) svg.classList.remove("text-gray-400");
      if (svg) svg.classList.add("text-gray-700");
      const span = button.querySelector("span");
      if (span) span.classList.remove("text-gray-500");
      if (span) span.classList.add("text-gray-800", "font-medium");
      const checkmarks = button.querySelectorAll('div[class*="absolute"]');
      checkmarks.forEach((div) => {
        if (div.querySelector('svg[width="12"]')) {
          div.classList.remove("hidden");
        }
      });
    }
  }
  // Select quick range (1, 3, or 6 months)
  selectQuickRange(event) {
    const button = event.currentTarget;
    const rangeStr = button.dataset.range;
    if (!rangeStr) return;
    const range = parseInt(rangeStr, 10);
    this.clearMonthSelection();
    const today = /* @__PURE__ */ new Date();
    const currentMonth = new Date(today.getFullYear(), today.getMonth(), 1);
    for (let i = 0; i < range; i++) {
      const targetMonth = new Date(currentMonth);
      targetMonth.setMonth(currentMonth.getMonth() + i);
      const monthValue = `${targetMonth.getFullYear()}-${String(targetMonth.getMonth() + 1).padStart(2, "0")}`;
      const monthButton = this.monthButtonTargets.find((btn) => btn.dataset.month === monthValue);
      if (monthButton && !this.selectedMonths.has(monthValue)) {
        monthButton.click();
      }
    }
  }
  // Clear month selection
  clearMonthSelection() {
    this.monthButtonTargets.forEach((button) => {
      const month = button.dataset.month;
      if (month && this.selectedMonths.has(month)) {
        this.selectedMonths.delete(month);
        button.classList.remove("bg-yellow-100", "border-yellow-500");
        button.classList.add("bg-gray-50");
        const svg = button.querySelector("svg");
        if (svg) svg.classList.remove("text-gray-700");
        if (svg) svg.classList.add("text-gray-400");
        const span = button.querySelector("span");
        if (span) span.classList.remove("text-gray-800", "font-medium");
        if (span) span.classList.add("text-gray-500");
        const checkmarks = button.querySelectorAll('div[class*="absolute"]');
        checkmarks.forEach((div) => {
          if (div.querySelector('svg[width="12"]')) {
            div.classList.add("hidden");
          }
        });
      }
    });
  }
  // Confirm fuzzy date selection
  confirmFuzzyDate() {
    if (this.selectedMonths.size === 0) {
      alert("\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u4E2A\u6708\u4EFD");
      return;
    }
    const monthsArray = Array.from(this.selectedMonths).sort();
    const monthsString = monthsArray.join(",");
    if (window.location.pathname.includes("/flights/search")) {
      console.log("Date picker: Search page fuzzy mode, reloading with first date of selected months");
      const firstMonth = monthsArray[0];
      const [year, month] = firstMonth.split("-");
      const firstDate = `${year}-${month}-01`;
      const url = new URL(window.location.href);
      url.searchParams.set("date", firstDate);
      url.searchParams.set("fuzzy_months", monthsString);
      window.location.href = url.toString();
      return;
    }
    if (this.hasSelectedDateTarget) {
      const firstMonth = monthsArray[0];
      const [, month] = firstMonth.split("-");
      const monthNum = parseInt(month, 10);
      if (monthsArray.length === 1) {
        this.selectedDateTarget.innerHTML = `
          ${monthNum}<span class="text-lg font-medium mx-0.5">\u6708</span>
          <span class="text-base text-gray-500 font-medium">\u5168\u6708</span>
        `;
      } else {
        const lastMonth = monthsArray[monthsArray.length - 1];
        const [, lastMonthStr] = lastMonth.split("-");
        const lastMonthNum = parseInt(lastMonthStr, 10);
        this.selectedDateTarget.innerHTML = `
          ${monthNum}<span class="text-lg font-medium mx-0.5">\u6708</span>-${lastMonthNum}<span class="text-lg font-medium mx-0.5">\u6708</span>
          <span class="text-base text-gray-500 font-medium">(${monthsArray.length}\u4E2A\u6708)</span>
        `;
      }
    }
    if (this.hasDateInputTarget) {
      this.dateInputTarget.value = `fuzzy:${monthsString}`;
    }
    this.closeModal();
  }
};

// app/javascript/controllers/booking_controller.ts
var booking_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    // 
    this.memberCheckCompleted = false;
    // 
    this.isSecondWait = false;
    // 
    this.missingAirlines = [];
  }
  static {
    this.targets = ["termsModal", "insuranceModal", "memberModal", "confirmModal", "totalPriceAmount"];
  }
  selectPassenger(event) {
    const radio = event.currentTarget;
    const idNumber = radio.dataset.idNumber || "";
    const phone = radio.dataset.phone || "";
    const idNumberField = document.getElementById("passenger_id_number");
    const phoneField = document.getElementById("booking_contact_phone");
    if (idNumberField) {
      idNumberField.value = idNumber;
    }
    if (phoneField && phone) {
      phoneField.value = phone;
    }
  }
  selectInsurance(event) {
    const button = event.currentTarget;
    const insuranceType = button.dataset.insuranceType || "none";
    const insurancePrice = button.dataset.insurancePrice || "0";
    this.setInsuranceValues(insuranceType, insurancePrice);
    this.closeInsuranceModal();
  }
  setInsuranceValues(insuranceType, insurancePrice) {
    const insuranceTypeField = document.getElementById("booking_insurance_type");
    const insurancePriceField = document.getElementById("booking_insurance_price");
    if (insuranceTypeField) {
      insuranceTypeField.value = insuranceType;
    }
    if (insurancePriceField) {
      insurancePriceField.value = insurancePrice;
    }
  }
  // 
  selectInsuranceOption(event) {
    const radio = event.currentTarget;
    const insuranceType = radio.dataset.insuranceType || "none";
    const insurancePrice = radio.dataset.insurancePrice || "0";
    this.setInsuranceValues(insuranceType, insurancePrice);
    const allCards = document.querySelectorAll("[data-insurance-card]");
    allCards.forEach((card) => {
      card.classList.remove("border-yellow-400", "border-blue-400", "border-gray-400");
      card.classList.add("border-2", "border-gray-300");
      const checkmark = card.querySelector(".bg-yellow-400");
      if (checkmark) {
        checkmark.style.display = "none";
      }
    });
    const selectedCard = radio.closest("[data-insurance-card]");
    if (selectedCard) {
      selectedCard.classList.remove("border-gray-300");
      if (insuranceType === "standard") {
        selectedCard.classList.add("border-yellow-400");
      } else if (insuranceType === "premium") {
        selectedCard.classList.add("border-blue-400");
      } else {
        selectedCard.classList.add("border-gray-400");
      }
      const checkmark = selectedCard.querySelector(".bg-yellow-400");
      if (checkmark) {
        checkmark.style.display = "flex";
      }
    }
    this.updateTotalPrice();
  }
  // 
  updateTotalPrice() {
    if (!this.totalPriceAmountTarget) return;
    const basePrice = parseInt(this.totalPriceAmountTarget.dataset.basePrice || "0");
    const insurancePriceField = document.getElementById("booking_insurance_price");
    const insurancePrice = parseInt(insurancePriceField?.value || "0");
    const passengerCount = 1;
    const totalPrice = basePrice + insurancePrice * passengerCount;
    this.totalPriceAmountTarget.textContent = totalPrice.toString();
  }
  showTermsModal(event) {
    event.preventDefault();
    this.termsModalTarget.classList.remove("hidden");
  }
  closeTermsModal() {
    this.termsModalTarget.classList.add("hidden");
  }
  acceptTerms() {
    const termsCheckbox = document.getElementById("booking_accept_terms");
    if (termsCheckbox) {
      termsCheckbox.checked = true;
    }
    this.closeTermsModal();
    const insuranceTypeField = document.getElementById("booking_insurance_type");
    const insuranceType = insuranceTypeField?.value || "none";
    if (insuranceType === "none") {
      this.showInsuranceModal();
    } else {
      this.showConfirmModal();
    }
  }
  showInsuranceModal() {
    this.insuranceModalTarget.classList.remove("hidden");
  }
  closeInsuranceModal() {
    this.insuranceModalTarget.classList.add("hidden");
    this.showConfirmModal();
  }
  skipInsurance() {
    this.setInsuranceValues("none", "0");
    this.closeInsuranceModal();
  }
  showMemberModal() {
    this.updateMemberModalContent();
    this.memberModalTarget.classList.remove("hidden");
  }
  updateMemberModalContent() {
    const airlineTextElement = this.memberModalTarget.querySelector("[data-airline-names]");
    if (airlineTextElement && this.missingAirlines.length > 0) {
      const airlinesText = this.missingAirlines.join("\u3001");
      airlineTextElement.textContent = airlinesText;
    }
  }
  closeMemberModal() {
    this.memberModalTarget.classList.add("hidden");
    this.memberCheckCompleted = true;
    this.isSecondWait = true;
    this.showConfirmModal();
  }
  showConfirmModal() {
    this.confirmModalTarget.classList.remove("hidden");
    if (this.isSecondWait) {
      const waitTime = Math.floor(Math.random() * (1e4 - 5e3 + 1)) + 5e3;
      setTimeout(() => {
        this.submitForm();
      }, waitTime);
      return;
    }
    this.checkMembershipStatusFromDB().then((needsMemberRegistration) => {
      if (needsMemberRegistration) {
        this.closeConfirmModal();
        this.showMemberModal();
      } else {
        this.memberCheckCompleted = true;
        const waitTime = Math.floor(Math.random() * (1e4 - 5e3 + 1)) + 5e3;
        setTimeout(() => {
          this.submitForm();
        }, waitTime);
      }
    });
  }
  async checkMembershipStatusFromDB() {
    try {
      const urlParams = new URLSearchParams(window.location.search);
      const flightId = urlParams.get("flight_id");
      const returnFlightId = urlParams.get("return_flight_id");
      let url = `/api/check_membership?flight_id=${flightId}`;
      if (returnFlightId) {
        url += `&return_flight_id=${returnFlightId}`;
      }
      const response = await fetch(url, {
        headers: {
          "Accept": "application/json"
        }
      });
      if (!response.ok) {
        this.missingAirlines = [];
        return true;
      }
      const data2 = await response.json();
      this.missingAirlines = data2.missing_airlines || [];
      return !data2.is_member;
    } catch (error3) {
      console.error("\u68C0\u67E5\u4F1A\u5458\u72B6\u6001\u5931\u8D25:", error3);
      this.missingAirlines = [];
      return true;
    }
  }
  closeConfirmModal() {
    this.confirmModalTarget.classList.add("hidden");
  }
  submitForm() {
    const form = this.element.querySelector("form");
    if (form) {
      form.submit();
    }
  }
  handleSubmit(event) {
    event.preventDefault();
    this.memberCheckCompleted = false;
    this.isSecondWait = false;
    this.showTermsModal(event);
  }
};

// app/javascript/controllers/coupon_controller.ts
var coupon_controller_default = class extends Controller {
  static {
    this.targets = ["modal"];
  }
  connect() {
    this.modalTarget.classList.remove("hidden");
  }
  claimCoupons() {
    alert("\u4F18\u60E0\u5238\u5DF2\u9886\u53D6\u6210\u529F\uFF01");
    this.closeModal();
  }
  closeModal() {
    this.modalTarget.classList.add("hidden");
  }
};

// app/javascript/controllers/destination_controller.ts
var destination_controller_default = class extends Controller {
  static {
    this.targets = [
      "tabContent",
      "tabs"
    ];
  }
  connect() {
    console.log("Destination controller connected");
  }
  disconnect() {
    console.log("Destination disconnected");
  }
  switchTab(event) {
    const button = event.currentTarget;
    const tabName = button.dataset.tab;
    if (!tabName) return;
    const allTabButtons = this.tabsTarget.querySelectorAll(".tab-btn");
    allTabButtons.forEach((btn) => {
      btn.classList.remove("text-gray-900", "border-gray-900");
      btn.classList.add("text-gray-500", "border-transparent");
    });
    button.classList.remove("text-gray-500", "border-transparent");
    button.classList.add("text-gray-900", "border-gray-900");
    this.tabContentTargets.forEach((content) => {
      if (content.dataset.tab === tabName) {
        content.classList.remove("hidden");
      } else {
        content.classList.add("hidden");
      }
    });
  }
};

// app/javascript/controllers/region_selector_controller.ts
var region_selector_controller_default = class extends Controller {
  static {
    this.targets = ["regionButton", "cityList", "searchInput", "searchResults", "searchResultsList", "noResults", "normalView"];
  }
  static {
    this.values = {
      availableDestinations: Array,
      allCities: Array
    };
  }
  connect() {
    console.log("RegionSelector connected");
    this.showRegion("\u70ED\u95E8\u76EE\u7684\u5730");
  }
  search(event) {
    const input = event.target;
    const query = input.value.trim().toLowerCase();
    if (query === "") {
      this.showNormalView();
      return;
    }
    const results = this.allCitiesValue.filter(
      (city) => city.name.toLowerCase().includes(query) || city.pinyin.toLowerCase().includes(query)
    );
    this.displaySearchResults(results);
  }
  clearSearch() {
    this.searchInputTarget.value = "";
    this.showNormalView();
  }
  displaySearchResults(results) {
    this.normalViewTarget.classList.add("hidden");
    if (this.hasSearchResultsTarget) {
      this.searchResultsTarget.classList.remove("hidden");
    }
    if (results.length === 0) {
      this.searchResultsListTarget.innerHTML = "";
      this.noResultsTarget.classList.remove("hidden");
    } else {
      this.noResultsTarget.classList.add("hidden");
      this.searchResultsListTarget.innerHTML = results.map((city) => `
        <div class="text-center py-3 px-2 bg-surface rounded-lg border border-border hover:border-primary hover:shadow-sm transition-all cursor-pointer"
             data-action="click->region-selector#selectCity"
             data-city-name="${city.name}"
             data-city-slug="${city.slug || ""}">
          <div class="text-sm font-medium text-foreground">${city.name}</div>
        </div>
      `).join("");
    }
  }
  showNormalView() {
    this.normalViewTarget.classList.remove("hidden");
    if (this.hasSearchResultsTarget) {
      this.searchResultsTarget.classList.add("hidden");
    }
  }
  selectRegion(event) {
    const button = event.currentTarget;
    const regionName = button.dataset.region;
    if (!regionName) return;
    this.regionButtonTargets.forEach((btn) => {
      if (btn === button) {
        btn.classList.add("text-foreground", "bg-white", "border-l-2", "border-primary", "font-medium");
        btn.classList.remove("text-muted");
      } else {
        btn.classList.remove("text-foreground", "bg-white", "border-l-2", "border-primary", "font-medium");
        btn.classList.add("text-muted");
      }
    });
    this.showRegion(regionName);
  }
  selectCity(event) {
    const cityCard = event.currentTarget;
    const cityName = cityCard.dataset.cityName;
    if (!cityName) return;
    if (this.availableDestinationsValue.includes(cityName)) {
      const slug = cityCard.dataset.citySlug;
      if (slug) {
        window.location.href = `/destinations/${slug}`;
      }
    } else {
      alert(`${cityName}\u7684\u8BE6\u7EC6\u4FE1\u606F\u5373\u5C06\u4E0A\u7EBF\uFF0C\u656C\u8BF7\u671F\u5F85\uFF01`);
    }
  }
  showRegion(regionName) {
    this.cityListTargets.forEach((list) => {
      if (list.dataset.region === regionName) {
        list.classList.remove("hidden");
      } else {
        list.classList.add("hidden");
      }
    });
  }
};

// app/javascript/controllers/hotel_search_controller.ts
var hotel_search_controller_default = class extends Controller {
  static {
    this.targets = [
      "searchModal",
      "searchInput",
      "hotSearchContent",
      "hotSearchIcon",
      "hotBrandContent",
      "hotBrandIcon",
      "hotLocationContent",
      "hotLocationIcon",
      "metroContent",
      "metroIcon",
      "airportContent",
      "airportIcon",
      "attractionContent",
      "attractionIcon",
      "themeContent",
      "themeIcon",
      "hospitalContent",
      "hospitalIcon",
      "universityContent",
      "universityIcon",
      "cityInput",
      "checkInInput",
      "checkOutInput",
      "roomsInput",
      "adultsInput",
      "childrenInput"
    ];
  }
  connect() {
    console.log("HotelSearch connected");
    document.addEventListener("city-selector:city-selected-for-hotel", this.handleCityUpdate.bind(this));
    document.addEventListener("hotel-date-picker:dates-selected", this.handleDateUpdate.bind(this));
    document.addEventListener("hotel-guest-selector:guests-updated", this.handleGuestUpdate.bind(this));
  }
  disconnect() {
    console.log("HotelSearch disconnected");
    document.removeEventListener("city-selector:city-selected-for-hotel", this.handleCityUpdate.bind(this));
    document.removeEventListener("hotel-date-picker:dates-selected", this.handleDateUpdate.bind(this));
    document.removeEventListener("hotel-guest-selector:guests-updated", this.handleGuestUpdate.bind(this));
  }
  // Handle city selection update from city-selector
  handleCityUpdate(event) {
    const customEvent = event;
    const { cityName } = customEvent.detail;
    console.log("HotelSearch: Received city update:", cityName);
    const url = new URL(window.location.href);
    url.searchParams.set("city", cityName);
    console.log("HotelSearch: Reloading page with new city:", cityName);
    window.location.href = url.toString();
  }
  // Handle date selection update from hotel-date-picker
  handleDateUpdate(event) {
    const customEvent = event;
    const { checkIn, checkOut } = customEvent.detail;
    console.log("HotelSearch: Received date update:", { checkIn, checkOut });
    if (this.hasCheckInInputTarget) {
      this.checkInInputTarget.value = checkIn;
      console.log("HotelSearch: Updated check-in to:", checkIn);
    }
    if (this.hasCheckOutInputTarget) {
      this.checkOutInputTarget.value = checkOut;
      console.log("HotelSearch: Updated check-out to:", checkOut);
    }
  }
  // Handle guest selection update from hotel-guest-selector
  handleGuestUpdate(event) {
    const customEvent = event;
    const { rooms, adults, children } = customEvent.detail;
    console.log("HotelSearch: Received guest update:", { rooms, adults, children });
    if (this.hasRoomsInputTarget) {
      this.roomsInputTarget.value = rooms.toString();
      console.log("HotelSearch: Updated rooms to:", rooms);
    }
    if (this.hasAdultsInputTarget) {
      this.adultsInputTarget.value = adults.toString();
      console.log("HotelSearch: Updated adults to:", adults);
    }
    if (this.hasChildrenInputTarget) {
      this.childrenInputTarget.value = children.toString();
      console.log("HotelSearch: Updated children to:", children);
    }
  }
  openSearchModal() {
    this.searchModalTarget.classList.remove("hidden");
    setTimeout(() => {
      this.searchInputTarget.focus();
    }, 100);
  }
  closeSearchModal() {
    this.searchModalTarget.classList.add("hidden");
  }
  submitSearch() {
    const form = this.searchInputTarget.closest("form");
    if (form) {
      form.requestSubmit();
    }
  }
  handleSearchInputKeypress(event) {
    if (event.key === "Enter") {
      event.preventDefault();
      this.submitSearch();
    }
  }
  toggleSection(event) {
    const button = event.currentTarget;
    const section = button.dataset.section;
    if (!section) return;
    const contentTarget = `${section}ContentTarget`;
    const iconTarget = `${section}IconTarget`;
    const content = this[contentTarget];
    const icon = this[iconTarget];
    if (content && icon) {
      content.classList.toggle("hidden");
      icon.classList.toggle("rotate-180");
    }
  }
  openCitySelector() {
    alert("\u57CE\u5E02\u9009\u62E9\u529F\u80FD\uFF1A\n\n\u5728\u5B8C\u6574\u7248\u672C\u4E2D\uFF0C\u8FD9\u91CC\u4F1A\u6253\u5F00\u57CE\u5E02\u9009\u62E9\u5668\u3002\n\n\u5F53\u524D\u57CE\u5E02\uFF1A\u6DF1\u5733\u5E02");
  }
  openGuestSelector() {
    const rooms = prompt("\u8BF7\u8F93\u5165\u623F\u95F4\u6570\u91CF", "1");
    const adults = prompt("\u8BF7\u8F93\u5165\u6210\u4EBA\u6570\u91CF", "1");
    const children = prompt("\u8BF7\u8F93\u5165\u513F\u7AE5\u6570\u91CF", "0");
    if (rooms && adults) {
      const url = new URL(window.location.href);
      url.searchParams.set("rooms", rooms);
      url.searchParams.set("adults", adults);
      url.searchParams.set("children", children || "0");
      window.location.href = url.toString();
    }
  }
};

// app/javascript/controllers/hotel_detail_controller.ts
var hotel_detail_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.currentTab = "cover";
  }
  static {
    this.targets = [
      "tabButton",
      "tabContent"
    ];
  }
  static {
    this.values = {
      // Add your values here, e.g.:
      // roomId: String,
      // userId: String
    };
  }
  connect() {
    console.log("HotelDetail connected");
  }
  disconnect() {
    console.log("HotelDetail disconnected");
  }
  // Tab switching functionality
  switchTab(event) {
    const button = event.currentTarget;
    const tabName = button.dataset.tab;
    if (!tabName || tabName === this.currentTab) return;
    this.tabButtonTargets.forEach((btn) => {
      if (btn.dataset.tab === tabName) {
        btn.classList.remove("text-gray-500", "border-transparent");
        btn.classList.add("text-gray-900", "border-orange-500");
      } else {
        btn.classList.remove("text-gray-900", "border-orange-500");
        btn.classList.add("text-gray-500", "border-transparent");
      }
    });
    this.tabContentTargets.forEach((content) => {
      if (content.dataset.tab === tabName) {
        content.classList.remove("hidden");
        content.classList.add("block");
      } else {
        content.classList.remove("block");
        content.classList.add("hidden");
      }
    });
    this.currentTab = tabName;
  }
  // FORMS: Turbo + Turbo Streams handle everything automatically
  // - Forms submit via AJAX (Turbo Drive)
  // - Server responds with format.turbo_stream
  // - Turbo Streams update DOM automatically
  // - NO manual form handling needed in Stimulus
  //
  // Use Stimulus for:
  // - UI interactions (toggle, show/hide)
  // - Input validation/formatting
  // - Dynamic form fields
};

// app/javascript/controllers/service_grid_controller.ts
var service_grid_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.currentPage = 0;
    this.touchStartX = 0;
    this.touchEndX = 0;
    this.minSwipeDistance = 50;
  }
  static {
    this.targets = ["page", "dot"];
  }
  // 
  connect() {
    this.showPage(0);
    this.element.addEventListener("touchstart", this.handleTouchStart.bind(this), { passive: true });
    this.element.addEventListener("touchend", this.handleTouchEnd.bind(this), { passive: true });
  }
  disconnect() {
    this.element.removeEventListener("touchstart", this.handleTouchStart.bind(this));
    this.element.removeEventListener("touchend", this.handleTouchEnd.bind(this));
  }
  // 
  handleTouchStart(event) {
    this.touchStartX = event.changedTouches[0].screenX;
  }
  // 
  handleTouchEnd(event) {
    this.touchEndX = event.changedTouches[0].screenX;
    this.handleSwipe();
  }
  // 
  handleSwipe() {
    const swipeDistance = this.touchEndX - this.touchStartX;
    if (swipeDistance < -this.minSwipeDistance) {
      this.nextPage();
    } else if (swipeDistance > this.minSwipeDistance) {
      this.prevPage();
    }
  }
  goToPage(event) {
    const target = event.currentTarget;
    const pageIndex = parseInt(target.getAttribute("data-page") || "0", 10);
    if (pageIndex >= 0 && pageIndex < this.pageTargets.length) {
      this.showPage(pageIndex);
    }
  }
  nextPage() {
    const nextIndex = (this.currentPage + 1) % this.pageTargets.length;
    this.showPage(nextIndex);
  }
  prevPage() {
    const prevIndex = (this.currentPage - 1 + this.pageTargets.length) % this.pageTargets.length;
    this.showPage(prevIndex);
  }
  showPage(pageIndex) {
    this.pageTargets.forEach((page, index) => {
      if (index === pageIndex) {
        page.classList.remove("hidden");
      } else {
        page.classList.add("hidden");
      }
    });
    this.dotTargets.forEach((dot, index) => {
      const button = dot;
      if (index === pageIndex) {
        button.classList.remove("bg-gray-300", "w-1.5", "h-1.5");
        button.classList.add("w-6", "h-1");
        button.style.background = "#FFD700";
      } else {
        button.classList.remove("w-6", "h-1");
        button.classList.add("bg-gray-300", "w-1.5", "h-1.5");
        button.style.background = "";
      }
    });
    this.currentPage = pageIndex;
  }
};

// app/javascript/controllers/passenger_selector_controller.ts
var passenger_selector_controller_default = class extends Controller {
  static {
    this.targets = [
      "display",
      "modal",
      "name",
      "idType",
      "idNumber",
      "phone",
      "driverName",
      "driverIdNumber",
      "contactPhone"
    ];
  }
  static {
    this.values = {
      selectedId: Number
    };
  }
  toggleEdit(event) {
    event.preventDefault();
    event.stopPropagation();
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  closeModal(event) {
    event.preventDefault();
    event.stopPropagation();
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  selectPassenger(event) {
    event.preventDefault();
    event.stopPropagation();
    const target = event.currentTarget;
    const passengerId = target.dataset.passengerId;
    const name = target.dataset.passengerName || "";
    const idType = target.dataset.passengerIdType || "";
    const idNumber = target.dataset.passengerIdNumber || "";
    const phone = target.dataset.passengerPhone || "\u672A\u586B\u5199";
    this.nameTarget.textContent = name;
    this.idTypeTarget.textContent = idType;
    this.idNumberTarget.textContent = idNumber;
    this.phoneTarget.textContent = phone;
    this.driverNameTarget.value = name;
    this.driverIdNumberTarget.value = idNumber;
    this.contactPhoneTarget.value = phone === "\u672A\u586B\u5199" ? "" : phone;
    const allItems = this.modalTarget.querySelectorAll("[data-passenger-id]");
    allItems.forEach((item) => {
      const itemElement = item;
      if (itemElement.dataset.passengerId === passengerId) {
        itemElement.classList.add("border-blue-500", "bg-blue-50");
        const circle = itemElement.querySelector(".w-5.h-5");
        circle.classList.remove("border-gray-300");
        circle.classList.add("border-blue-500", "bg-blue-500");
        const checkIcon = '<svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>';
        circle.innerHTML = checkIcon;
      } else {
        itemElement.classList.remove("border-blue-500", "bg-blue-50");
        const circle = itemElement.querySelector(".w-5.h-5");
        circle.classList.remove("border-blue-500", "bg-blue-500");
        circle.classList.add("border-gray-300");
        circle.innerHTML = "";
      }
    });
    this.selectedIdValue = parseInt(passengerId || "0");
    this.closeModal(event);
  }
};

// app/javascript/controllers/cabin_selector_controller.ts
var cabin_selector_controller_default = class extends Controller {
  static {
    this.targets = ["button", "hiddenInput"];
  }
  static {
    this.values = {
      selected: String
    };
  }
  connect() {
    console.log("CabinSelector connected");
    const currentValue = this.hiddenInputTargets[0]?.value;
    if (currentValue) {
      this.selectCabin(currentValue);
    } else {
      this.selectCabin("all");
    }
  }
  selectCabin(cabinType) {
    this.selectedValue = cabinType;
    this.hiddenInputTargets.forEach((input) => {
      input.value = cabinType;
    });
    this.buttonTargets.forEach((button) => {
      const buttonType = button.dataset.cabinType;
      if (buttonType === cabinType) {
        button.classList.add("bg-white", "shadow-sm", "text-gray-900");
        button.classList.remove("text-gray-600");
      } else {
        button.classList.remove("bg-white", "shadow-sm", "text-gray-900");
        button.classList.add("text-gray-600");
      }
    });
  }
  select(event) {
    const button = event.currentTarget;
    const cabinType = button.dataset.cabinType;
    if (cabinType) {
      if (this.selectedValue === cabinType) {
        return;
      }
      this.selectCabin(cabinType);
    }
  }
};

// app/javascript/controllers/trip_type_controller.ts
var trip_type_controller_default = class extends Controller {
  static {
    this.targets = [
      "tab",
      "returnDateSection",
      "tripTypeInput",
      "returnDateInput",
      "oneWayRoundTripForm",
      "multiCityForm",
      "promotionBanner"
    ];
  }
  static {
    this.values = {
      currentType: { type: String, default: "one_way" }
    };
  }
  connect() {
    console.log("TripType connected");
    this.updateUI();
  }
  // 
  selectType(event) {
    const button = event.currentTarget;
    const tripType = button.dataset.tripType || "one_way";
    this.currentTypeValue = tripType;
    this.updateUI();
    if (tripType === "round_trip" && this.hasReturnDateInputTarget) {
      if (!this.returnDateInputTarget.value) {
        const departureDateInput = document.querySelector('[data-date-picker-target="dateInput"]');
        if (departureDateInput && departureDateInput.value) {
          const departureDate = new Date(departureDateInput.value);
          departureDate.setDate(departureDate.getDate() + 1);
          const returnDateStr = this.formatDate(departureDate);
          this.returnDateInputTarget.value = returnDateStr;
          const returnDateController = this.application.getControllerForElementAndIdentifier(
            this.element,
            "return-date-picker"
          );
          if (returnDateController && "currentDateValue" in returnDateController) {
            returnDateController.currentDateValue = returnDateStr;
          }
        }
      }
    }
  }
  // UI
  updateUI() {
    this.tabTargets.forEach((tab) => {
      const isActive = tab.dataset.tripType === this.currentTypeValue;
      if (isActive) {
        tab.classList.remove("text-gray-500");
        tab.classList.add("font-bold", "border-b-2", "border-black");
      } else {
        tab.classList.remove("font-bold", "border-b-2", "border-black");
        tab.classList.add("text-gray-500");
      }
    });
    if (this.hasTripTypeInputTarget) {
      this.tripTypeInputTarget.value = this.currentTypeValue;
    }
    if (this.hasReturnDateSectionTarget) {
      if (this.currentTypeValue === "round_trip") {
        this.returnDateSectionTarget.classList.remove("hidden");
      } else {
        this.returnDateSectionTarget.classList.add("hidden");
      }
    }
    if (this.hasOneWayRoundTripFormTarget && this.hasMultiCityFormTarget) {
      if (this.currentTypeValue === "multi_city") {
        this.oneWayRoundTripFormTarget.classList.add("hidden");
        this.multiCityFormTarget.classList.remove("hidden");
        const multiCityEvent = new CustomEvent("trip-type:multi-city-shown", {
          bubbles: true
        });
        this.element.dispatchEvent(multiCityEvent);
      } else {
        this.oneWayRoundTripFormTarget.classList.remove("hidden");
        this.multiCityFormTarget.classList.add("hidden");
      }
    }
    if (this.hasPromotionBannerTarget) {
      if (this.currentTypeValue === "multi_city") {
        this.promotionBannerTarget.classList.add("hidden");
      } else {
        this.promotionBannerTarget.classList.remove("hidden");
      }
    }
  }
  formatDate(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    return `${year}-${month}-${day}`;
  }
};

// app/javascript/controllers/return_date_picker_controller.ts
var return_date_picker_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedDateObj = null;
  }
  static {
    this.targets = ["modal", "selectedDate", "dateInput"];
  }
  static {
    this.values = {
      currentDate: String,
      minDate: String
    };
  }
  connect() {
    console.log("ReturnDatePicker connected");
    if (this.currentDateValue) {
      this.selectedDateObj = new Date(this.currentDateValue);
    } else if (this.minDateValue) {
      const minDate = new Date(this.minDateValue);
      minDate.setDate(minDate.getDate() + 1);
      this.selectedDateObj = minDate;
      this.currentDateValue = this.formatDate(this.selectedDateObj);
    }
    if (this.selectedDateObj) {
      this.updateDisplayedDate();
    }
  }
  openModal() {
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  closeModal() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  selectDate(event) {
    const button = event.currentTarget;
    const dateStr = button.dataset.date || "";
    if (!dateStr) return;
    this.selectedDateObj = new Date(dateStr);
    this.currentDateValue = dateStr;
    this.updateDisplayedDate();
    this.dateInputTarget.value = dateStr;
    this.closeModal();
  }
  updateDisplayedDate() {
    if (!this.selectedDateObj) return;
    const month = this.selectedDateObj.getMonth() + 1;
    const day = this.selectedDateObj.getDate();
    const dayName = this.getDayName(this.selectedDateObj);
    this.selectedDateTarget.innerHTML = `
      ${month}<span class="text-lg font-medium mx-0.5">\u6708</span>${day}<span class="text-lg font-medium ml-0.5 mr-2">\u65E5</span>
      <span class="text-base text-gray-500 font-medium">${dayName}</span>
    `;
  }
  getDayName(date) {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    const targetDate = new Date(date);
    targetDate.setHours(0, 0, 0, 0);
    const diffTime = targetDate.getTime() - today.getTime();
    const diffDays = Math.round(diffTime / (1e3 * 60 * 60 * 24));
    if (diffDays === 0) return "\u4ECA\u5929";
    if (diffDays === 1) return "\u660E\u5929";
    if (diffDays === 2) return "\u540E\u5929";
    const weekdays = ["\u5468\u65E5", "\u5468\u4E00", "\u5468\u4E8C", "\u5468\u4E09", "\u5468\u56DB", "\u5468\u4E94", "\u5468\u516D"];
    return weekdays[date.getDay()];
  }
  formatDate(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    return `${year}-${month}-${day}`;
  }
};

// app/javascript/controllers/round_trip_selector_controller.ts
var round_trip_selector_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedOutboundIdValue = "";
    this.selectedReturnIdValue = "";
    this.outboundPrice = 0;
    this.returnPrice = 0;
  }
  static {
    this.targets = ["outboundFlight", "returnFlight", "submitButton", "selectedOutboundId", "selectedReturnId", "totalPrice"];
  }
  connect() {
    this.updateSubmitButton();
  }
  selectOutbound(event) {
    event.preventDefault();
    const card = event.currentTarget.closest("[data-flight-id]");
    if (!card) return;
    const flightId = card.dataset.flightId || "";
    const price = parseFloat(card.dataset.price || "0");
    this.outboundFlightTargets.forEach((el) => {
      el.classList.remove("ring-2", "ring-blue-500", "bg-blue-50");
    });
    card.classList.add("ring-2", "ring-blue-500", "bg-blue-50");
    this.selectedOutboundIdValue = flightId;
    this.outboundPrice = price;
    if (this.hasSelectedOutboundIdTarget) {
      this.selectedOutboundIdTarget.value = flightId;
    }
    this.updateSubmitButton();
  }
  selectReturn(event) {
    event.preventDefault();
    const card = event.currentTarget.closest("[data-flight-id]");
    if (!card) return;
    const flightId = card.dataset.flightId || "";
    const price = parseFloat(card.dataset.price || "0");
    this.returnFlightTargets.forEach((el) => {
      el.classList.remove("ring-2", "ring-blue-500", "bg-blue-50");
    });
    card.classList.add("ring-2", "ring-blue-500", "bg-blue-50");
    this.selectedReturnIdValue = flightId;
    this.returnPrice = price;
    if (this.hasSelectedReturnIdTarget) {
      this.selectedReturnIdTarget.value = flightId;
    }
    this.updateSubmitButton();
  }
  updateSubmitButton() {
    if (!this.hasSubmitButtonTarget) return;
    const bothSelected = this.selectedOutboundIdValue && this.selectedReturnIdValue;
    if (bothSelected) {
      this.submitButtonTarget.classList.remove("opacity-50", "cursor-not-allowed");
      this.submitButtonTarget.classList.add("cursor-pointer");
      this.submitButtonTarget.removeAttribute("disabled");
      if (this.hasTotalPriceTarget) {
        const total = this.outboundPrice + this.returnPrice;
        this.totalPriceTarget.textContent = `\xA5${total.toFixed(0)}`;
      }
    } else {
      this.submitButtonTarget.classList.add("opacity-50", "cursor-not-allowed");
      this.submitButtonTarget.classList.remove("cursor-pointer");
      this.submitButtonTarget.setAttribute("disabled", "disabled");
      if (this.hasTotalPriceTarget) {
        this.totalPriceTarget.textContent = "\u8BF7\u9009\u62E9\u53BB\u7A0B\u548C\u8FD4\u7A0B\u822A\u73ED";
      }
    }
  }
  submit(event) {
    if (!this.selectedOutboundIdValue || !this.selectedReturnIdValue) {
      event.preventDefault();
      alert("\u8BF7\u9009\u62E9\u53BB\u7A0B\u548C\u8FD4\u7A0B\u822A\u73ED");
      return;
    }
  }
};

// app/javascript/controllers/train_search_controller.ts
var train_search_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedDateObj = /* @__PURE__ */ new Date();
  }
  static {
    this.targets = [
      "departureCity",
      "arrivalCity",
      "departureCityInput",
      "arrivalCityInput",
      "selectedDate",
      "dateInput",
      "studentTicket",
      "highSpeedOnly"
    ];
  }
  static {
    this.values = {
      departureCity: String,
      arrivalCity: String,
      date: String
    };
  }
  connect() {
    console.log("TrainSearch connected");
    if (!this.departureCityValue) this.departureCityValue = "\u5317\u4EAC\u5E02";
    if (!this.arrivalCityValue) this.arrivalCityValue = "\u676D\u5DDE\u5E02";
    if (!this.dateValue) {
      this.selectedDateObj = /* @__PURE__ */ new Date();
      this.selectedDateObj.setDate(this.selectedDateObj.getDate() + 1);
      this.dateValue = this.formatDate(this.selectedDateObj);
    } else {
      this.selectedDateObj = new Date(this.dateValue);
    }
    this.updateCityDisplay();
    this.updateDateDisplay();
  }
  // Switch cities
  switchCities() {
    const temp = this.departureCityValue;
    this.departureCityValue = this.arrivalCityValue;
    this.arrivalCityValue = temp;
    this.updateCityDisplay();
  }
  // Update city display
  updateCityDisplay() {
    this.departureCityTarget.textContent = this.departureCityValue;
    this.arrivalCityTarget.textContent = this.arrivalCityValue;
    this.departureCityInputTarget.value = this.departureCityValue;
    this.arrivalCityInputTarget.value = this.arrivalCityValue;
  }
  // Update date display
  updateDateDisplay() {
    const month = this.selectedDateObj.getMonth() + 1;
    const day = this.selectedDateObj.getDate();
    const dayName = this.getDayName(this.selectedDateObj);
    this.selectedDateTarget.innerHTML = `
      ${month}<span class="text-sm">\u6708</span>${day}<span class="text-sm">\u65E5</span> <span class="text-sm">${dayName}</span>
    `;
    this.dateInputTarget.value = this.dateValue;
  }
  // Get day name in Chinese
  getDayName(date) {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    const targetDate = new Date(date);
    targetDate.setHours(0, 0, 0, 0);
    const diffTime = targetDate.getTime() - today.getTime();
    const diffDays = Math.round(diffTime / (1e3 * 60 * 60 * 24));
    if (diffDays === 0) return "\u4ECA\u5929";
    if (diffDays === 1) return "\u660E\u5929";
    if (diffDays === 2) return "\u540E\u5929";
    const weekdays = ["\u5468\u65E5", "\u5468\u4E00", "\u5468\u4E8C", "\u5468\u4E09", "\u5468\u56DB", "\u5468\u4E94", "\u5468\u516D"];
    return weekdays[date.getDay()];
  }
  // Format date as YYYY-MM-DD
  formatDate(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    return `${year}-${month}-${day}`;
  }
  // Toggle student ticket
  toggleStudentTicket() {
    console.log("Student ticket toggled:", this.studentTicketTarget.checked);
  }
  // Toggle high speed only
  toggleHighSpeedOnly() {
    console.log("High speed only toggled:", this.highSpeedOnlyTarget.checked);
  }
  // Handle search form submission (Turbo handles actual submission)
  // This is just for any pre-submission UI feedback if needed
  search() {
    console.log("Searching trains:", {
      from: this.departureCityValue,
      to: this.arrivalCityValue,
      date: this.dateValue
    });
  }
};

// app/javascript/controllers/train_list_controller.ts
var train_list_controller_default = class extends Controller {
  static {
    this.targets = [
      "trainItem"
    ];
  }
  connect() {
    console.log("TrainList connected");
  }
  disconnect() {
    console.log("TrainList disconnected");
  }
  toggleFilter(event) {
    const button = event.currentTarget;
    button.classList.toggle("bg-primary");
    button.classList.toggle("text-primary-foreground");
    button.classList.toggle("bg-surface-elevated");
    button.classList.toggle("text-foreground");
  }
  toggleStation(event) {
    const button = event.currentTarget;
    button.classList.toggle("bg-primary");
    button.classList.toggle("text-primary-foreground");
    button.classList.toggle("bg-surface-elevated");
    button.classList.toggle("text-foreground");
  }
  showAdvancedFilters() {
    console.log("Show advanced filters");
  }
};

// app/javascript/controllers/train_city_selector_controller.ts
var train_city_selector_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectionType = "departure";
  }
  static {
    this.targets = [
      "modal",
      "departure",
      "destination",
      "departureCityInput",
      "destinationCityInput",
      "tabDeparture",
      "tabDestination",
      "searchInput",
      "domesticList",
      "internationalList",
      "historySection",
      "currentCity"
    ];
  }
  static {
    this.values = {
      departureCity: String,
      destinationCity: String
    };
  }
  connect() {
    console.log("TrainCitySelector connected");
    if (!this.departureCityValue) this.departureCityValue = "\u5317\u4EAC";
    if (!this.destinationCityValue) this.destinationCityValue = "\u676D\u5DDE";
    this.departureCityInputTarget.value = this.departureCityValue;
    this.destinationCityInputTarget.value = this.destinationCityValue;
  }
  // Open modal for departure city selection
  openDeparture() {
    if (!this.hasModalTarget) {
      console.log("TrainCitySelector: No modal available, skipping");
      return;
    }
    this.selectionType = "departure";
    this.updateModalTitle();
    this.showModal();
  }
  // Open modal for destination city selection
  openDestination() {
    if (!this.hasModalTarget) {
      console.log("TrainCitySelector: No modal available, skipping");
      return;
    }
    this.selectionType = "destination";
    this.updateModalTitle();
    this.showModal();
  }
  // Show modal
  showModal() {
    if (!this.hasModalTarget) return;
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // Close modal
  closeModal() {
    if (!this.hasModalTarget) return;
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
    this.clearSearch();
  }
  // Select city
  selectCity(event) {
    const button = event.currentTarget;
    const cityName = button.dataset.cityName || "";
    if (this.selectionType === "departure") {
      this.departureCityValue = cityName;
      this.departureTarget.textContent = cityName;
      this.departureCityInputTarget.value = cityName;
    } else {
      this.destinationCityValue = cityName;
      this.destinationTarget.textContent = cityName;
      this.destinationCityInputTarget.value = cityName;
    }
    this.closeModal();
  }
  // Switch cities
  switchCities() {
    const temp = this.departureCityValue;
    this.departureCityValue = this.destinationCityValue;
    this.destinationCityValue = temp;
    this.departureTarget.textContent = this.departureCityValue;
    this.destinationTarget.textContent = this.destinationCityValue;
    this.departureCityInputTarget.value = this.departureCityValue;
    this.destinationCityInputTarget.value = this.destinationCityValue;
  }
  // Switch between domestic and international tabs
  showDomestic() {
    this.domesticListTarget.classList.remove("hidden");
    this.internationalListTarget.classList.add("hidden");
    this.tabDepartureTarget.classList.add("active-tab");
    this.tabDestinationTarget.classList.remove("active-tab");
  }
  showInternational() {
    this.domesticListTarget.classList.add("hidden");
    this.internationalListTarget.classList.remove("hidden");
    this.tabDepartureTarget.classList.remove("active-tab");
    this.tabDestinationTarget.classList.add("active-tab");
  }
  // Search cities
  search() {
    const query = this.searchInputTarget.value.toLowerCase().trim();
    if (query === "") {
      this.clearSearch();
      return;
    }
    this.historySectionTarget.classList.add("hidden");
    this.filterCities(this.domesticListTarget, query);
    if (!this.internationalListTarget.classList.contains("hidden")) {
      this.filterCities(this.internationalListTarget, query);
    }
  }
  // Filter cities helper
  filterCities(listTarget, query) {
    const cityButtons = listTarget.querySelectorAll("[data-city-name]");
    cityButtons.forEach((button) => {
      const cityName = button.dataset.cityName?.toLowerCase() || "";
      const cityPinyin = button.dataset.cityPinyin?.toLowerCase() || "";
      if (cityName.includes(query) || cityPinyin.includes(query)) {
        button.classList.remove("hidden");
      } else {
        button.classList.add("hidden");
      }
    });
  }
  // Clear search
  clearSearch() {
    this.searchInputTarget.value = "";
    this.historySectionTarget.classList.remove("hidden");
    const allButtons = this.element.querySelectorAll("[data-city-name]");
    allButtons.forEach((button) => {
      button.classList.remove("hidden");
    });
  }
  // Update modal title based on selection type
  updateModalTitle() {
    if (!this.hasModalTarget) return;
    const titleElement = this.modalTarget.querySelector("[data-modal-title]");
    if (titleElement) {
      titleElement.textContent = this.selectionType === "departure" ? "\u5355\u9009\u51FA\u53D1\u5730" : "\u5355\u9009\u76EE\u7684\u5730";
    }
  }
  // Jump to letter section
  jumpToLetter(event) {
    const button = event.currentTarget;
    const letter = button.dataset.letter || "";
    const section = this.domesticListTarget.querySelector(`[data-letter-section="${letter}"]`);
    if (section) {
      section.scrollIntoView({ behavior: "smooth", block: "start" });
    }
  }
};

// app/javascript/controllers/infinite_scroll_controller.ts
var infinite_scroll_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.observer = null;
    this.isLoading = false;
  }
  static {
    this.targets = [
      "trigger",
      // 
      "container",
      // 
      "loading"
      // 
    ];
  }
  static {
    this.values = {
      page: Number,
      // 
      hasMore: Boolean
      // 
    };
  }
  connect() {
    console.log("InfiniteScroll connected, initial page:", this.pageValue, "hasMore:", this.hasMoreValue);
    if (this.hasMoreValue) {
      this.setupObserver();
    }
  }
  disconnect() {
    console.log("InfiniteScroll disconnected");
    if (this.observer) {
      this.observer.disconnect();
      this.observer = null;
    }
  }
  setupObserver() {
    this.observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting && this.hasMoreValue && !this.isLoading) {
            this.loadMore();
          }
        });
      },
      {
        root: null,
        // viewportroot
        rootMargin: "100px",
        // 100px
        threshold: 0.1
        // 10%
      }
    );
    this.observer.observe(this.triggerTarget);
  }
  async loadMore() {
    if (this.isLoading || !this.hasMoreValue) {
      return;
    }
    this.isLoading = true;
    this.showLoading();
    console.log("Loading more trips, page:", this.pageValue);
    try {
      const url = `/trips/load_more?page=${this.pageValue}`;
      const response = await fetch(url, {
        headers: {
          "Accept": "text/vnd.turbo-stream.html",
          "X-Requested-With": "XMLHttpRequest"
        }
      });
      if (response.ok) {
        const html = await response.text();
        const streamElement = document.createElement("div");
        streamElement.innerHTML = html;
        const turboStreams = streamElement.querySelectorAll("turbo-stream");
        turboStreams.forEach((stream) => {
          document.body.appendChild(stream);
        });
        this.pageValue++;
        if (html.includes("\u5DF2\u663E\u793A\u5168\u90E8\u884C\u7A0B")) {
          this.hasMoreValue = false;
          if (this.observer) {
            this.observer.disconnect();
          }
        }
        console.log("Loaded more trips, new page:", this.pageValue, "hasMore:", this.hasMoreValue);
      }
    } catch (error3) {
      console.error("Failed to load more trips:", error3);
    } finally {
      this.isLoading = false;
      this.hideLoading();
    }
  }
  showLoading() {
    this.loadingTarget.classList.remove("hidden");
  }
  hideLoading() {
    this.loadingTarget.classList.add("hidden");
  }
};

// app/javascript/controllers/deep_travel_controller.ts
var deep_travel_controller_default = class extends Controller {
  static {
    this.targets = ["video", "videoContainer", "tab", "content"];
  }
  connect() {
    console.log("Deep travel controller connected");
  }
  playVideo(event) {
    const video = event.currentTarget;
    if (video.paused) {
      video.play();
    } else {
      video.pause();
    }
  }
  toggleFullscreen(event) {
    const container = event.currentTarget.closest('[data-deep-travel-target="videoContainer"]');
    if (!document.fullscreenElement) {
      container.requestFullscreen();
    } else {
      document.exitFullscreen();
    }
  }
  switchTab(event) {
    const clickedTab = event.currentTarget;
    const tabName = clickedTab.dataset.tab;
    this.tabTargets.forEach((tab) => {
      if (tab === clickedTab) {
        tab.classList.add("text-gray-900", "border-b-2", "border-yellow-400", "bg-yellow-50");
        tab.classList.remove("text-gray-600");
      } else {
        tab.classList.remove("text-gray-900", "border-b-2", "border-yellow-400", "bg-yellow-50");
        tab.classList.add("text-gray-600");
      }
    });
    this.contentTargets.forEach((content) => {
      if (content.dataset.content === tabName) {
        content.classList.remove("hidden");
      } else {
        content.classList.add("hidden");
      }
    });
  }
};

// app/javascript/controllers/multi_city_controller.ts
var multi_city_controller_default = class extends Controller {
  static {
    this.targets = ["segmentsContainer", "segment", "addButton", "hiddenSegmentsInput"];
  }
  static {
    this.values = {
      segments: { type: Array, default: [] },
      switchIconUrl: String
    };
  }
  connect() {
    console.log("MultiCity controller connected");
    if (!this.hasSegmentsContainerTarget) {
      console.log("MultiCity controller: segmentsContainer not available yet, skipping initialization");
      document.addEventListener("trip-type:multi-city-shown", this.handleMultiCityShown.bind(this));
      return;
    }
    this.initializeSegments();
    document.addEventListener("city-selector:city-selected", this.handleCitySelected.bind(this));
    console.log("Multi-city: Added event listener for city-selector:city-selected");
    document.addEventListener("date-picker:date-selected", this.handleDateSelected.bind(this));
    console.log("Multi-city: Added event listener for date-picker:date-selected");
  }
  disconnect() {
    document.removeEventListener("city-selector:city-selected", this.handleCitySelected.bind(this));
    document.removeEventListener("date-picker:date-selected", this.handleDateSelected.bind(this));
    document.removeEventListener("trip-type:multi-city-shown", this.handleMultiCityShown.bind(this));
  }
  // Stimulus value changed callback - automatically called when segmentsValue changes
  segmentsValueChanged() {
    console.log("Multi-city: segmentsValueChanged triggered");
    if (this.hasSegmentsContainerTarget) {
      this.render();
    }
  }
  // Handle when multi-city form is shown
  handleMultiCityShown() {
    console.log("Multi-city: Form is now visible, initializing...");
    if (this.hasSegmentsContainerTarget) {
      this.initializeSegments();
      document.addEventListener("city-selector:city-selected", this.handleCitySelected.bind(this));
      console.log("Multi-city: Added event listener for city-selector:city-selected");
      document.addEventListener("date-picker:date-selected", this.handleDateSelected.bind(this));
      console.log("Multi-city: Added event listener for date-picker:date-selected");
    }
  }
  // Initialize the segments
  initializeSegments() {
    console.log("Multi-city: Initializing segments");
    if (this.segmentsValue.length === 0) {
      this.segmentsValue = [
        {
          id: this.generateId(),
          departureCity: "\u6B66\u6C49",
          destinationCity: "\u6DF1\u5733",
          date: this.formatDate(/* @__PURE__ */ new Date())
        },
        {
          id: this.generateId(),
          departureCity: "\u5E7F\u5DDE",
          destinationCity: "\u676D\u5DDE",
          date: this.formatDate(new Date(Date.now() + 3 * 24 * 60 * 60 * 1e3))
          // 3
        }
      ];
    }
    this.render();
    this.updateAddButtonState();
  }
  // Handle city selection from city selector
  handleCitySelected(event) {
    const customEvent = event;
    console.log("Multi-city: Received city-selector:city-selected event", customEvent.detail);
    const { segmentId, cityType, cityName } = customEvent.detail;
    console.log("Multi-city: Current segments before update:", JSON.stringify(this.segmentsValue));
    const segmentIndex = this.segmentsValue.findIndex((seg) => seg.id === segmentId);
    if (segmentIndex !== -1) {
      console.log(`Multi-city: Found segment ${segmentId}, updating ${cityType} to ${cityName}`);
      this.segmentsValue = this.segmentsValue.map((seg, index) => {
        if (index === segmentIndex) {
          console.log("Multi-city: Segment before update:", JSON.stringify(seg));
          const updatedSegment = {
            ...seg,
            departureCity: cityType === "departure" ? cityName : seg.departureCity,
            destinationCity: cityType === "destination" ? cityName : seg.destinationCity
          };
          console.log("Multi-city: Segment after update:", JSON.stringify(updatedSegment));
          return updatedSegment;
        }
        return seg;
      });
      console.log("Multi-city: All segments after update:", JSON.stringify(this.segmentsValue));
      console.log("Multi-city: Segment updated, render will be triggered by valueChanged");
    } else {
      console.warn("Multi-city: Segment not found:", segmentId);
      console.warn("Multi-city: Available segment IDs:", this.segmentsValue.map((s) => s.id));
    }
  }
  // Handle date selection from date picker
  handleDateSelected(event) {
    console.log("Multi-city: Received date-picker:date-selected event", event.detail);
    const { segmentId, date } = event.detail;
    const segmentIndex = this.segmentsValue.findIndex((seg) => seg.id === segmentId);
    if (segmentIndex !== -1) {
      console.log(`Multi-city: Updating segment ${segmentId} date to ${date}`);
      this.segmentsValue = this.segmentsValue.map((seg, index) => {
        if (index === segmentIndex) {
          return { ...seg, date };
        }
        return seg;
      });
      console.log("Multi-city: Segment date updated");
    } else {
      console.warn("Multi-city: Segment not found:", segmentId);
    }
  }
  // 
  addSegment() {
    if (this.segmentsValue.length >= 8) {
      alert("\u6700\u591A\u652F\u63018\u4E2A\u884C\u7A0B\u6BB5");
      return;
    }
    const lastSegment = this.segmentsValue[this.segmentsValue.length - 1];
    const newSegment = {
      id: this.generateId(),
      departureCity: lastSegment ? lastSegment.destinationCity : "\u5317\u4EAC",
      destinationCity: "\u4E0A\u6D77",
      date: lastSegment ? this.formatDate(new Date(new Date(lastSegment.date).getTime() + 24 * 60 * 60 * 1e3)) : this.formatDate(/* @__PURE__ */ new Date())
    };
    this.segmentsValue = [...this.segmentsValue, newSegment];
    this.render();
    this.updateAddButtonState();
  }
  // 
  removeSegment(event) {
    const button = event.currentTarget;
    const segmentId = button.dataset.segmentId;
    if (this.segmentsValue.length <= 2) {
      alert("\u81F3\u5C11\u9700\u8981\u4FDD\u75592\u4E2A\u884C\u7A0B\u6BB5");
      return;
    }
    this.segmentsValue = this.segmentsValue.filter((seg) => seg.id !== segmentId);
    this.render();
    this.updateAddButtonState();
  }
  // 
  updateCity(event) {
    const input = event.currentTarget;
    const segmentId = input.dataset.segmentId;
    const cityType = input.dataset.cityType;
    const segment = this.segmentsValue.find((seg) => seg.id === segmentId);
    if (segment) {
      if (cityType === "departure") {
        segment.departureCity = input.value;
      } else if (cityType === "destination") {
        segment.destinationCity = input.value;
      }
      this.updateHiddenInput();
    }
  }
  // 
  updateDate(event) {
    const input = event.currentTarget;
    const segmentId = input.dataset.segmentId;
    const segment = this.segmentsValue.find((seg) => seg.id === segmentId);
    if (segment) {
      segment.date = input.value;
      this.updateHiddenInput();
    }
  }
  // 
  openCitySelector(event) {
    const button = event.currentTarget;
    const segmentId = button.dataset.segmentId;
    const cityType = button.dataset.cityType;
    console.log(`Multi-city: Opening city selector for segment ${segmentId}, cityType ${cityType}`);
    const customEvent = new CustomEvent("multi-city:open-city-selector", {
      detail: { segmentId, cityType },
      bubbles: true
    });
    this.element.dispatchEvent(customEvent);
  }
  // 
  openDatePicker(event) {
    const button = event.currentTarget;
    const segmentId = button.dataset.segmentId;
    const customEvent = new CustomEvent("multi-city:open-date-picker", {
      detail: { segmentId },
      bubbles: true
    });
    this.element.dispatchEvent(customEvent);
  }
  // 
  render() {
    if (!this.hasSegmentsContainerTarget) {
      console.log("MultiCity: Cannot render, segmentsContainer not available");
      return;
    }
    console.log("Multi-city: render() called with segments:", JSON.stringify(this.segmentsValue));
    this.segmentsContainerTarget.innerHTML = "";
    this.segmentsValue.forEach((segment, index) => {
      console.log(`Multi-city: Creating element for segment ${index}:`, JSON.stringify(segment));
      const segmentElement = this.createSegmentElement(segment, index);
      this.segmentsContainerTarget.appendChild(segmentElement);
    });
    this.updateHiddenInput();
  }
  // 
  createSegmentElement(segment, index) {
    console.log(`Multi-city: createSegmentElement called for segment ${segment.id}:`, {
      departureCity: segment.departureCity,
      destinationCity: segment.destinationCity,
      date: segment.date
    });
    const div = document.createElement("div");
    div.className = "border-b border-gray-100 py-4";
    div.dataset.multiCityTarget = "segment";
    const date = new Date(segment.date);
    const weekday = this.getWeekday(date);
    div.innerHTML = `
      <div class="flex items-center justify-between mb-3">
        <div class="flex items-center gap-2">
          <span class="inline-flex items-center justify-center w-5 h-5 rounded-full bg-blue-500 text-white text-xs font-bold">
            ${index + 1}
          </span>
          <span class="text-sm text-gray-500">\u7B2C${this.numberToChinese(index + 1)}\u7A0B</span>
        </div>
        ${this.segmentsValue.length > 2 ? `
          <button 
            type="button"
            data-action="click->multi-city#removeSegment"
            data-segment-id="${segment.id}"
            class="text-gray-400 hover:text-red-500">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd"
                d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0
                  -1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                clip-rule="evenodd"/>
            </svg>
          </button>
        ` : ""}
      </div>

      <div class="flex items-center justify-between">
        <button 
          type="button"
          data-action="click->multi-city#openCitySelector"
          data-segment-id="${segment.id}"
          data-city-type="departure"
          class="flex-1 text-left">
          <div class="text-[32px] font-bold leading-tight">${segment.departureCity}</div>
        </button>
        
        <div class="mx-4 flex items-center justify-center">
          <img src="${this.switchIconUrlValue}" class="w-12 h-12" alt="\u5207\u6362" />
        </div>
        
        <button 
          type="button"
          data-action="click->multi-city#openCitySelector"
          data-segment-id="${segment.id}"
          data-city-type="destination"
          class="flex-1 text-right">
          <div class="text-[32px] font-bold leading-tight">${segment.destinationCity}</div>
        </button>
      </div>

      <button 
        type="button"
        data-action="click->multi-city#openDatePicker"
        data-segment-id="${segment.id}"
        class="mt-2 text-left">
        <div class="text-lg font-medium text-gray-700">
          ${date.getMonth() + 1}\u6708${date.getDate()}\u65E5 ${weekday}
        </div>
      </button>
    `;
    console.log(`Multi-city: Created HTML for segment ${segment.id}, departure: ${segment.departureCity}, destination: ${segment.destinationCity}`);
    return div;
  }
  // 
  updateAddButtonState() {
    if (!this.hasAddButtonTarget) {
      console.log("MultiCity: Cannot update add button state, button not available");
      return;
    }
    if (this.segmentsValue.length >= 8) {
      this.addButtonTarget.classList.add("opacity-50", "cursor-not-allowed");
      this.addButtonTarget.setAttribute("disabled", "true");
    } else {
      this.addButtonTarget.classList.remove("opacity-50", "cursor-not-allowed");
      this.addButtonTarget.removeAttribute("disabled");
    }
  }
  // 
  updateHiddenInput() {
    if (this.hasHiddenSegmentsInputTarget) {
      this.hiddenSegmentsInputTarget.value = JSON.stringify(this.segmentsValue);
    }
  }
  // ID
  generateId() {
    return `segment-${Date.now()}-${Math.random().toString(36).substring(2, 11)}`;
  }
  // 
  formatDate(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    return `${year}-${month}-${day}`;
  }
  // 
  getWeekday(date) {
    const weekdays = ["\u5468\u65E5", "\u5468\u4E00", "\u5468\u4E8C", "\u5468\u4E09", "\u5468\u56DB", "\u5468\u4E94", "\u5468\u516D"];
    return weekdays[date.getDay()];
  }
  // 
  numberToChinese(num) {
    const chinese = ["\u4E00", "\u4E8C", "\u4E09", "\u56DB", "\u4E94", "\u516D", "\u4E03", "\u516B"];
    return chinese[num - 1] || num.toString();
  }
};

// app/javascript/controllers/flight_filter_controller.ts
var flight_filter_controller_default = class extends Controller {
  static {
    this.targets = [
      "modal",
      "overlay",
      "flightPreferenceTab",
      "airlineCompanyTab",
      "airportTab",
      "departureTimeTab",
      "transferCityTab",
      "transferTimesTab",
      "transferDurationTab",
      "totalDurationTab",
      "seatClassTab",
      "aircraftModelTab",
      "ticketCancellationTab",
      "flightPreferenceSection",
      "airlineCompanySection",
      "airportSection",
      "departureTimeSection",
      "transferCitySection",
      "transferTimesSection",
      "transferDurationSection",
      "totalDurationSection",
      "seatClassSection",
      "aircraftModelSection",
      "ticketCancellationSection",
      "resultCount",
      "directFlightCheckbox",
      "noTransitCheckbox",
      "includeCheckedLuggageCheckbox",
      "noSharedFlightCheckbox",
      "discountPriceCheckbox",
      "resetButton",
      "confirmButton",
      "filterBadge",
      "selectedFiltersContainer",
      "selectedFiltersList",
      // Card targets for grid layout
      "directFlightCard",
      "checkedLuggageCard",
      "noSharedFlightCard",
      "noTransitCard",
      "discountPriceCard",
      // Quick filter button targets
      "quickDirectFlight",
      "quickNoSharedFlight",
      "quickCheckedLuggage",
      "quickNoTransit",
      "quickDiscountPrice"
    ];
  }
  connect() {
    console.log("FlightFilter controller connected");
    this.currentTab = "flightPreference";
    this.initializeFilters();
  }
  initializeFilters() {
    this.filters = {
      directFlight: false,
      noTransit: false,
      includeCheckedLuggage: false,
      noSharedFlight: false,
      discountPrice: false,
      airlines: /* @__PURE__ */ new Set(),
      departureAirports: /* @__PURE__ */ new Set(),
      arrivalAirports: /* @__PURE__ */ new Set(),
      departureTimeRanges: /* @__PURE__ */ new Set(),
      aircraftModels: /* @__PURE__ */ new Set()
    };
  }
  openModal() {
    this.modalTarget.classList.remove("hidden");
    this.overlayTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  closeModal() {
    this.modalTarget.classList.add("hidden");
    this.overlayTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  selectTab(event) {
    const button = event.currentTarget;
    const tabName = button.dataset.tab;
    if (!tabName) return;
    this.currentTab = tabName;
    const allTabs = [
      this.flightPreferenceTabTarget,
      this.airlineCompanyTabTarget,
      this.airportTabTarget,
      this.departureTimeTabTarget,
      this.transferCityTabTarget,
      this.transferTimesTabTarget,
      this.transferDurationTabTarget,
      this.totalDurationTabTarget,
      this.seatClassTabTarget,
      this.aircraftModelTabTarget,
      this.ticketCancellationTabTarget
    ];
    allTabs.forEach((tab) => {
      tab.classList.remove("border-blue-500", "text-blue-600", "font-bold");
      tab.classList.add("text-gray-600");
    });
    button.classList.add("border-blue-500", "text-blue-600", "font-bold");
    button.classList.remove("text-gray-600");
    const allSections = [
      this.flightPreferenceSectionTarget,
      this.airlineCompanySectionTarget,
      this.airportSectionTarget,
      this.departureTimeSectionTarget,
      this.transferCitySectionTarget,
      this.transferTimesSectionTarget,
      this.transferDurationSectionTarget,
      this.totalDurationSectionTarget,
      this.seatClassSectionTarget,
      this.aircraftModelSectionTarget,
      this.ticketCancellationSectionTarget
    ];
    allSections.forEach((section) => section.classList.add("hidden"));
    const sectionMap = {
      flightPreference: this.flightPreferenceSectionTarget,
      airlineCompany: this.airlineCompanySectionTarget,
      airport: this.airportSectionTarget,
      departureTime: this.departureTimeSectionTarget,
      transferCity: this.transferCitySectionTarget,
      transferTimes: this.transferTimesSectionTarget,
      transferDuration: this.transferDurationSectionTarget,
      totalDuration: this.totalDurationSectionTarget,
      seatClass: this.seatClassSectionTarget,
      aircraftModel: this.aircraftModelSectionTarget,
      ticketCancellation: this.ticketCancellationSectionTarget
    };
    const targetSection = sectionMap[tabName];
    if (targetSection) {
      targetSection.classList.remove("hidden");
    }
  }
  // Flight preference toggles
  toggleDirectFlight() {
    this.directFlightCheckboxTarget.checked = !this.directFlightCheckboxTarget.checked;
    this.filters.directFlight = this.directFlightCheckboxTarget.checked;
    if (this.directFlightCardTarget) {
      if (this.filters.directFlight) {
        this.directFlightCardTarget.classList.remove("bg-[#f6f7f9]");
        this.directFlightCardTarget.classList.add("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        if (!this.directFlightCardTarget.querySelector(".checkmark")) {
          const checkmark = this.createCheckmark();
          this.directFlightCardTarget.appendChild(checkmark);
        }
      } else {
        this.directFlightCardTarget.classList.add("bg-[#f6f7f9]");
        this.directFlightCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        const checkmark = this.directFlightCardTarget.querySelector(".checkmark");
        if (checkmark) checkmark.remove();
      }
    }
    if (this.quickDirectFlightTarget) {
      if (this.filters.directFlight) {
        this.quickDirectFlightTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickDirectFlightTarget.classList.remove("border-gray-300");
      } else {
        this.quickDirectFlightTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickDirectFlightTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  toggleNoTransit() {
    this.noTransitCheckboxTarget.checked = !this.noTransitCheckboxTarget.checked;
    this.filters.noTransit = this.noTransitCheckboxTarget.checked;
    if (this.noTransitCardTarget) {
      if (this.filters.noTransit) {
        this.noTransitCardTarget.classList.remove("bg-[#f6f7f9]");
        this.noTransitCardTarget.classList.add("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        if (!this.noTransitCardTarget.querySelector(".checkmark")) {
          const checkmark = this.createCheckmark();
          this.noTransitCardTarget.appendChild(checkmark);
        }
      } else {
        this.noTransitCardTarget.classList.add("bg-[#f6f7f9]");
        this.noTransitCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        const checkmark = this.noTransitCardTarget.querySelector(".checkmark");
        if (checkmark) checkmark.remove();
      }
    }
    if (this.quickNoTransitTarget) {
      if (this.filters.noTransit) {
        this.quickNoTransitTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickNoTransitTarget.classList.remove("border-gray-300");
      } else {
        this.quickNoTransitTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickNoTransitTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  toggleCheckedLuggage() {
    this.includeCheckedLuggageCheckboxTarget.checked = !this.includeCheckedLuggageCheckboxTarget.checked;
    this.filters.includeCheckedLuggage = this.includeCheckedLuggageCheckboxTarget.checked;
    if (this.checkedLuggageCardTarget) {
      if (this.filters.includeCheckedLuggage) {
        this.checkedLuggageCardTarget.classList.remove("bg-[#f6f7f9]");
        this.checkedLuggageCardTarget.classList.add("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        if (!this.checkedLuggageCardTarget.querySelector(".checkmark")) {
          const checkmark = this.createCheckmark();
          this.checkedLuggageCardTarget.appendChild(checkmark);
        }
      } else {
        this.checkedLuggageCardTarget.classList.add("bg-[#f6f7f9]");
        this.checkedLuggageCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        const checkmark = this.checkedLuggageCardTarget.querySelector(".checkmark");
        if (checkmark) checkmark.remove();
      }
    }
    if (this.quickCheckedLuggageTarget) {
      if (this.filters.includeCheckedLuggage) {
        this.quickCheckedLuggageTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickCheckedLuggageTarget.classList.remove("border-gray-300");
      } else {
        this.quickCheckedLuggageTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickCheckedLuggageTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  toggleNoSharedFlight() {
    this.noSharedFlightCheckboxTarget.checked = !this.noSharedFlightCheckboxTarget.checked;
    this.filters.noSharedFlight = this.noSharedFlightCheckboxTarget.checked;
    if (this.noSharedFlightCardTarget) {
      if (this.filters.noSharedFlight) {
        this.noSharedFlightCardTarget.classList.remove("bg-[#f6f7f9]");
        this.noSharedFlightCardTarget.classList.add("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        if (!this.noSharedFlightCardTarget.querySelector(".checkmark")) {
          const checkmark = this.createCheckmark();
          this.noSharedFlightCardTarget.appendChild(checkmark);
        }
      } else {
        this.noSharedFlightCardTarget.classList.add("bg-[#f6f7f9]");
        this.noSharedFlightCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        const checkmark = this.noSharedFlightCardTarget.querySelector(".checkmark");
        if (checkmark) checkmark.remove();
      }
    }
    if (this.quickNoSharedFlightTarget) {
      if (this.filters.noSharedFlight) {
        this.quickNoSharedFlightTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickNoSharedFlightTarget.classList.remove("border-gray-300");
      } else {
        this.quickNoSharedFlightTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickNoSharedFlightTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  toggleDiscountPrice() {
    this.discountPriceCheckboxTarget.checked = !this.discountPriceCheckboxTarget.checked;
    this.filters.discountPrice = this.discountPriceCheckboxTarget.checked;
    if (this.discountPriceCardTarget) {
      if (this.filters.discountPrice) {
        this.discountPriceCardTarget.classList.remove("bg-[#f6f7f9]");
        this.discountPriceCardTarget.classList.add("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        if (!this.discountPriceCardTarget.querySelector(".checkmark")) {
          const checkmark = this.createCheckmark();
          this.discountPriceCardTarget.appendChild(checkmark);
        }
      } else {
        this.discountPriceCardTarget.classList.add("bg-[#f6f7f9]");
        this.discountPriceCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        const checkmark = this.discountPriceCardTarget.querySelector(".checkmark");
        if (checkmark) checkmark.remove();
      }
    }
    if (this.quickDiscountPriceTarget) {
      if (this.filters.discountPrice) {
        this.quickDiscountPriceTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickDiscountPriceTarget.classList.remove("border-gray-300");
      } else {
        this.quickDiscountPriceTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickDiscountPriceTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  // Quick filter button actions
  toggleQuickDirectFlight() {
    this.filters.directFlight = !this.filters.directFlight;
    this.directFlightCheckboxTarget.checked = this.filters.directFlight;
    if (this.quickDirectFlightTarget) {
      if (this.filters.directFlight) {
        this.quickDirectFlightTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickDirectFlightTarget.classList.remove("border-gray-300");
      } else {
        this.quickDirectFlightTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickDirectFlightTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  toggleQuickNoSharedFlight() {
    this.filters.noSharedFlight = !this.filters.noSharedFlight;
    this.noSharedFlightCheckboxTarget.checked = this.filters.noSharedFlight;
    if (this.quickNoSharedFlightTarget) {
      if (this.filters.noSharedFlight) {
        this.quickNoSharedFlightTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickNoSharedFlightTarget.classList.remove("border-gray-300");
      } else {
        this.quickNoSharedFlightTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickNoSharedFlightTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  toggleQuickCheckedLuggage() {
    this.filters.includeCheckedLuggage = !this.filters.includeCheckedLuggage;
    this.includeCheckedLuggageCheckboxTarget.checked = this.filters.includeCheckedLuggage;
    if (this.quickCheckedLuggageTarget) {
      if (this.filters.includeCheckedLuggage) {
        this.quickCheckedLuggageTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickCheckedLuggageTarget.classList.remove("border-gray-300");
      } else {
        this.quickCheckedLuggageTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickCheckedLuggageTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  toggleQuickNoTransit() {
    this.filters.noTransit = !this.filters.noTransit;
    this.noTransitCheckboxTarget.checked = this.filters.noTransit;
    if (this.quickNoTransitTarget) {
      if (this.filters.noTransit) {
        this.quickNoTransitTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickNoTransitTarget.classList.remove("border-gray-300");
      } else {
        this.quickNoTransitTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickNoTransitTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  toggleQuickDiscountPrice() {
    this.filters.discountPrice = !this.filters.discountPrice;
    this.discountPriceCheckboxTarget.checked = this.filters.discountPrice;
    if (this.quickDiscountPriceTarget) {
      if (this.filters.discountPrice) {
        this.quickDiscountPriceTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickDiscountPriceTarget.classList.remove("border-gray-300");
      } else {
        this.quickDiscountPriceTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickDiscountPriceTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  // Airline selection
  toggleAirline(event) {
    const checkbox = event.target;
    const airline = checkbox.value;
    if (checkbox.checked) {
      this.filters.airlines.add(airline);
    } else {
      this.filters.airlines.delete(airline);
    }
    this.updateResultCount();
  }
  // Airport selection
  toggleDepartureAirport(event) {
    const checkbox = event.target;
    const airport = checkbox.value;
    if (checkbox.checked) {
      this.filters.departureAirports.add(airport);
    } else {
      this.filters.departureAirports.delete(airport);
    }
    this.updateResultCount();
  }
  toggleArrivalAirport(event) {
    const checkbox = event.target;
    const airport = checkbox.value;
    if (checkbox.checked) {
      this.filters.arrivalAirports.add(airport);
    } else {
      this.filters.arrivalAirports.delete(airport);
    }
    this.updateResultCount();
  }
  // Departure time selection
  toggleDepartureTime(event) {
    const checkbox = event.target;
    const timeRange = checkbox.value;
    if (checkbox.checked) {
      this.filters.departureTimeRanges.add(timeRange);
    } else {
      this.filters.departureTimeRanges.delete(timeRange);
    }
    this.updateResultCount();
  }
  // Aircraft model selection
  toggleAircraftModel(event) {
    const checkbox = event.target;
    const model = checkbox.value;
    if (checkbox.checked) {
      this.filters.aircraftModels.add(model);
    } else {
      this.filters.aircraftModels.delete(model);
    }
    this.updateResultCount();
  }
  // Reset all filters
  reset() {
    this.initializeFilters();
    this.directFlightCheckboxTarget.checked = false;
    this.noTransitCheckboxTarget.checked = false;
    this.includeCheckedLuggageCheckboxTarget.checked = false;
    this.noSharedFlightCheckboxTarget.checked = false;
    this.discountPriceCheckboxTarget.checked = false;
    const airlineCheckboxes = this.element.querySelectorAll('input[type="checkbox"][data-filter-type="airline"]');
    airlineCheckboxes.forEach((cb) => cb.checked = false);
    const airportCheckboxes = this.element.querySelectorAll('input[type="checkbox"][data-filter-type="airport"]');
    airportCheckboxes.forEach((cb) => cb.checked = false);
    const timeCheckboxes = this.element.querySelectorAll('input[type="checkbox"][data-filter-type="departure-time"]');
    timeCheckboxes.forEach((cb) => cb.checked = false);
    const modelCheckboxes = this.element.querySelectorAll('input[type="checkbox"][data-filter-type="aircraft-model"]');
    modelCheckboxes.forEach((cb) => cb.checked = false);
    if (this.quickDirectFlightTarget) {
      this.quickDirectFlightTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
      this.quickDirectFlightTarget.classList.add("border-gray-300");
    }
    if (this.quickNoSharedFlightTarget) {
      this.quickNoSharedFlightTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
      this.quickNoSharedFlightTarget.classList.add("border-gray-300");
    }
    if (this.quickCheckedLuggageTarget) {
      this.quickCheckedLuggageTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
      this.quickCheckedLuggageTarget.classList.add("border-gray-300");
    }
    if (this.quickNoTransitTarget) {
      this.quickNoTransitTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
      this.quickNoTransitTarget.classList.add("border-gray-300");
    }
    if (this.quickDiscountPriceTarget) {
      this.quickDiscountPriceTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
      this.quickDiscountPriceTarget.classList.add("border-gray-300");
    }
    if (this.directFlightCardTarget) {
      this.directFlightCardTarget.classList.add("bg-[#f6f7f9]");
      this.directFlightCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
      const checkmark = this.directFlightCardTarget.querySelector(".checkmark");
      if (checkmark) checkmark.remove();
    }
    if (this.noSharedFlightCardTarget) {
      this.noSharedFlightCardTarget.classList.add("bg-[#f6f7f9]");
      this.noSharedFlightCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
      const checkmark = this.noSharedFlightCardTarget.querySelector(".checkmark");
      if (checkmark) checkmark.remove();
    }
    if (this.checkedLuggageCardTarget) {
      this.checkedLuggageCardTarget.classList.add("bg-[#f6f7f9]");
      this.checkedLuggageCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
      const checkmark = this.checkedLuggageCardTarget.querySelector(".checkmark");
      if (checkmark) checkmark.remove();
    }
    if (this.noTransitCardTarget) {
      this.noTransitCardTarget.classList.add("bg-[#f6f7f9]");
      this.noTransitCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
      const checkmark = this.noTransitCardTarget.querySelector(".checkmark");
      if (checkmark) checkmark.remove();
    }
    if (this.discountPriceCardTarget) {
      this.discountPriceCardTarget.classList.add("bg-[#f6f7f9]");
      this.discountPriceCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
      const checkmark = this.discountPriceCardTarget.querySelector(".checkmark");
      if (checkmark) checkmark.remove();
    }
    this.updateResultCount();
  }
  // Apply filters and close modal
  confirm() {
    this.closeModal();
    this.element.dispatchEvent(new CustomEvent("filters-applied", {
      detail: { filters: this.filters },
      bubbles: true
    }));
  }
  // Update result count (placeholder - in real app would count filtered flights)
  updateResultCount() {
    let count = 66;
    if (this.filters.directFlight) count = Math.floor(count * 0.7);
    if (this.filters.noTransit) count = Math.floor(count * 0.8);
    if (this.filters.airlines.size > 0) count = Math.floor(count * 0.6);
    if (this.filters.departureAirports.size > 0) count = Math.floor(count * 0.7);
    if (this.filters.arrivalAirports.size > 0) count = Math.floor(count * 0.7);
    if (this.filters.departureTimeRanges.size > 0) count = Math.floor(count * 0.5);
    if (this.filters.aircraftModels.size > 0) count = Math.floor(count * 0.6);
    this.resultCountTarget.textContent = count.toString();
    this.updateFilterBadge();
    this.updateSelectedFiltersDisplay();
  }
  // Update filter badge count
  updateFilterBadge() {
    let activeFilterCount = 0;
    if (this.filters.directFlight) activeFilterCount++;
    if (this.filters.noTransit) activeFilterCount++;
    if (this.filters.includeCheckedLuggage) activeFilterCount++;
    if (this.filters.noSharedFlight) activeFilterCount++;
    if (this.filters.discountPrice) activeFilterCount++;
    activeFilterCount += this.filters.airlines.size;
    activeFilterCount += this.filters.departureAirports.size;
    activeFilterCount += this.filters.arrivalAirports.size;
    activeFilterCount += this.filters.departureTimeRanges.size;
    activeFilterCount += this.filters.aircraftModels.size;
    if (activeFilterCount > 0) {
      this.filterBadgeTarget.textContent = activeFilterCount.toString();
      this.filterBadgeTarget.classList.remove("hidden");
    } else {
      this.filterBadgeTarget.classList.add("hidden");
    }
  }
  // Update selected filters display
  updateSelectedFiltersDisplay() {
    const filterLabels = [];
    const filterNameMap = {
      directFlight: "\u53EA\u770B\u76F4\u98DE",
      noSharedFlight: "\u4E0D\u770B\u5171\u4EAB\u822A\u73ED",
      includeCheckedLuggage: "\u542B\u6258\u8FD0\u884C\u674E\u989D",
      noTransit: "\u65E0\u9700\u8FC7\u5883\u7B7E",
      discountPrice: "\u770B\u4F18\u60E0\u524D\u4EF7\u683C"
    };
    if (this.filters.directFlight) {
      filterLabels.push({ text: filterNameMap.directFlight, type: "directFlight", value: "" });
    }
    if (this.filters.noSharedFlight) {
      filterLabels.push({ text: filterNameMap.noSharedFlight, type: "noSharedFlight", value: "" });
    }
    if (this.filters.includeCheckedLuggage) {
      filterLabels.push({ text: filterNameMap.includeCheckedLuggage, type: "includeCheckedLuggage", value: "" });
    }
    if (this.filters.noTransit) {
      filterLabels.push({ text: filterNameMap.noTransit, type: "noTransit", value: "" });
    }
    if (this.filters.discountPrice) {
      filterLabels.push({ text: filterNameMap.discountPrice, type: "discountPrice", value: "" });
    }
    this.filters.airlines.forEach((airline) => {
      filterLabels.push({ text: airline, type: "airline", value: airline });
    });
    this.filters.departureAirports.forEach((airport) => {
      filterLabels.push({ text: airport, type: "departureAirport", value: airport });
    });
    this.filters.arrivalAirports.forEach((airport) => {
      filterLabels.push({ text: airport, type: "arrivalAirport", value: airport });
    });
    this.filters.departureTimeRanges.forEach((range) => {
      filterLabels.push({ text: range, type: "departureTime", value: range });
    });
    this.filters.aircraftModels.forEach((model) => {
      filterLabels.push({ text: model, type: "aircraftModel", value: model });
    });
    this.selectedFiltersListTarget.innerHTML = "";
    if (filterLabels.length > 0) {
      this.selectedFiltersContainerTarget.classList.remove("hidden");
      filterLabels.forEach((filter) => {
        const tag = document.createElement("button");
        tag.className = "inline-flex items-center gap-1 px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full border border-yellow-300 hover:bg-yellow-200";
        tag.dataset.filterType = filter.type;
        tag.dataset.filterValue = filter.value;
        tag.innerHTML = `
          ${filter.text}
          <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd"
              d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0
                -1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
              clip-rule="evenodd"/>
          </svg>
        `;
        tag.addEventListener("click", () => this.removeFilter(filter.type, filter.value));
        this.selectedFiltersListTarget.appendChild(tag);
      });
    } else {
      this.selectedFiltersContainerTarget.classList.add("hidden");
    }
  }
  // Remove a single filter
  removeFilter(type, value) {
    switch (type) {
      case "directFlight":
        this.filters.directFlight = false;
        this.directFlightCheckboxTarget.checked = false;
        if (this.quickDirectFlightTarget) {
          this.quickDirectFlightTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
          this.quickDirectFlightTarget.classList.add("border-gray-300");
        }
        if (this.directFlightCardTarget) {
          this.directFlightCardTarget.classList.add("bg-[#f6f7f9]");
          this.directFlightCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
          const checkmark = this.directFlightCardTarget.querySelector(".checkmark");
          if (checkmark) checkmark.remove();
        }
        break;
      case "noSharedFlight":
        this.filters.noSharedFlight = false;
        this.noSharedFlightCheckboxTarget.checked = false;
        if (this.quickNoSharedFlightTarget) {
          this.quickNoSharedFlightTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
          this.quickNoSharedFlightTarget.classList.add("border-gray-300");
        }
        if (this.noSharedFlightCardTarget) {
          this.noSharedFlightCardTarget.classList.add("bg-[#f6f7f9]");
          this.noSharedFlightCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
          const checkmark = this.noSharedFlightCardTarget.querySelector(".checkmark");
          if (checkmark) checkmark.remove();
        }
        break;
      case "includeCheckedLuggage":
        this.filters.includeCheckedLuggage = false;
        this.includeCheckedLuggageCheckboxTarget.checked = false;
        if (this.quickCheckedLuggageTarget) {
          this.quickCheckedLuggageTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
          this.quickCheckedLuggageTarget.classList.add("border-gray-300");
        }
        if (this.checkedLuggageCardTarget) {
          this.checkedLuggageCardTarget.classList.add("bg-[#f6f7f9]");
          this.checkedLuggageCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
          const checkmark = this.checkedLuggageCardTarget.querySelector(".checkmark");
          if (checkmark) checkmark.remove();
        }
        break;
      case "noTransit":
        this.filters.noTransit = false;
        this.noTransitCheckboxTarget.checked = false;
        if (this.quickNoTransitTarget) {
          this.quickNoTransitTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
          this.quickNoTransitTarget.classList.add("border-gray-300");
        }
        if (this.noTransitCardTarget) {
          this.noTransitCardTarget.classList.add("bg-[#f6f7f9]");
          this.noTransitCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
          const checkmark = this.noTransitCardTarget.querySelector(".checkmark");
          if (checkmark) checkmark.remove();
        }
        break;
      case "discountPrice":
        this.filters.discountPrice = false;
        this.discountPriceCheckboxTarget.checked = false;
        if (this.quickDiscountPriceTarget) {
          this.quickDiscountPriceTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
          this.quickDiscountPriceTarget.classList.add("border-gray-300");
        }
        if (this.discountPriceCardTarget) {
          this.discountPriceCardTarget.classList.add("bg-[#f6f7f9]");
          this.discountPriceCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
          const checkmark = this.discountPriceCardTarget.querySelector(".checkmark");
          if (checkmark) checkmark.remove();
        }
        break;
      case "airline": {
        this.filters.airlines.delete(value);
        const airlineCheckbox = this.element.querySelector(`input[type="checkbox"][data-filter-type="airline"][value="${value}"]`);
        if (airlineCheckbox) airlineCheckbox.checked = false;
        break;
      }
      case "departureAirport": {
        this.filters.departureAirports.delete(value);
        const depAirportCheckbox = this.element.querySelector(`input[type="checkbox"][data-filter-type="airport"][value="${value}"]`);
        if (depAirportCheckbox) depAirportCheckbox.checked = false;
        break;
      }
      case "arrivalAirport": {
        this.filters.arrivalAirports.delete(value);
        const arrAirportCheckbox = this.element.querySelector(`input[type="checkbox"][data-filter-type="airport"][value="${value}"]`);
        if (arrAirportCheckbox) arrAirportCheckbox.checked = false;
        break;
      }
      case "departureTime": {
        this.filters.departureTimeRanges.delete(value);
        const timeCheckbox = this.element.querySelector(`input[type="checkbox"][data-filter-type="departure-time"][value="${value}"]`);
        if (timeCheckbox) timeCheckbox.checked = false;
        break;
      }
      case "aircraftModel": {
        this.filters.aircraftModels.delete(value);
        const modelCheckbox = this.element.querySelector(`input[type="checkbox"][data-filter-type="aircraft-model"][value="${value}"]`);
        if (modelCheckbox) modelCheckbox.checked = false;
        break;
      }
    }
    this.updateResultCount();
  }
  // Helper method to create checkmark SVG
  createCheckmark() {
    const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    svg.setAttribute("class", "checkmark absolute bottom-0 right-0");
    svg.setAttribute("width", "16");
    svg.setAttribute("height", "16");
    svg.setAttribute("viewBox", "0 0 24 24");
    const bgPath = document.createElementNS("http://www.w3.org/2000/svg", "path");
    bgPath.setAttribute("d", "M24 24H0L24 0V24Z");
    bgPath.setAttribute("fill", "#fcc32a");
    svg.appendChild(bgPath);
    const checkPath = document.createElementNS("http://www.w3.org/2000/svg", "path");
    checkPath.setAttribute("d", "M14 18l2 2 4-4");
    checkPath.setAttribute("stroke", "white");
    checkPath.setAttribute("stroke-width", "2");
    checkPath.setAttribute("stroke-linecap", "round");
    checkPath.setAttribute("stroke-linejoin", "round");
    checkPath.setAttribute("fill", "none");
    svg.appendChild(checkPath);
    return svg;
  }
};

// app/javascript/controllers/flight_sort_controller.ts
var flight_sort_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    // Sort state
    this.currentSort = "default";
    // default, direct_priority, price_asc, departure_early, departure_late, arrival_early, arrival_late, duration_short
    this.directPriorityActive = false;
    this.pricePriorityActive = false;
  }
  static {
    this.targets = [
      "modal",
      "overlay",
      "directPriorityButton",
      "pricePriorityButton",
      "timeSortButton",
      "flightList"
    ];
  }
  static {
    this.values = {
      initialSort: { type: String, default: "default" }
    };
  }
  connect() {
    console.log("FlightSort controller connected");
    if (this.initialSortValue === "price_asc") {
      this.currentSort = "price_asc";
      this.pricePriorityActive = true;
      this.pricePriorityButtonTarget.classList.add("border-b-2", "border-black");
      this.pricePriorityButtonTarget.querySelector("span")?.classList.add("font-bold");
      this.pricePriorityButtonTarget.querySelector("span")?.classList.remove("text-gray-600");
    }
  }
  // Toggle direct flight priority
  toggleDirectPriority() {
    this.directPriorityActive = !this.directPriorityActive;
    if (this.directPriorityActive) {
      this.currentSort = "direct_priority";
      this.directPriorityButtonTarget.classList.add("border-b-2", "border-black");
      this.directPriorityButtonTarget.querySelector("span")?.classList.add("font-bold");
      this.directPriorityButtonTarget.querySelector("span")?.classList.remove("text-gray-600");
    } else {
      this.currentSort = "default";
      this.directPriorityButtonTarget.classList.remove("border-b-2", "border-black");
      this.directPriorityButtonTarget.querySelector("span")?.classList.remove("font-bold");
      this.directPriorityButtonTarget.querySelector("span")?.classList.add("text-gray-600");
    }
    this.applySort();
  }
  // Toggle price priority (low price first)
  togglePricePriority() {
    this.pricePriorityActive = !this.pricePriorityActive;
    if (this.pricePriorityActive) {
      this.currentSort = "price_asc";
      this.pricePriorityButtonTarget.classList.add("border-b-2", "border-black");
      this.pricePriorityButtonTarget.querySelector("span")?.classList.add("font-bold");
      this.pricePriorityButtonTarget.querySelector("span")?.classList.remove("text-gray-600");
    } else {
      this.currentSort = "default";
      this.pricePriorityButtonTarget.classList.remove("border-b-2", "border-black");
      this.pricePriorityButtonTarget.querySelector("span")?.classList.remove("font-bold");
      this.pricePriorityButtonTarget.querySelector("span")?.classList.add("text-gray-600");
    }
    this.applySort();
  }
  // Open time sort modal
  openTimeSortModal() {
    this.modalTarget.classList.remove("hidden");
    this.overlayTarget.classList.remove("hidden");
    setTimeout(() => {
      this.modalTarget.classList.remove("translate-y-full");
      this.overlayTarget.classList.remove("opacity-0");
    }, 10);
  }
  // Close modal
  closeModal() {
    this.modalTarget.classList.add("translate-y-full");
    this.overlayTarget.classList.add("opacity-0");
    setTimeout(() => {
      this.modalTarget.classList.add("hidden");
      this.overlayTarget.classList.add("hidden");
    }, 300);
  }
  // Apply sort option from time sort modal
  applySortOption(event) {
    const button = event.currentTarget;
    const sortType = button.dataset.sortType;
    if (!sortType) return;
    this.currentSort = sortType;
    this.updateTimeSortButtonText(sortType);
    this.applySort();
    this.closeModal();
  }
  // Update time sort button text based on selected sort
  updateTimeSortButtonText(sortType) {
    const textMap = {
      "departure_early": "\u8D77\u98DE\u65E9-\u665A",
      "departure_late": "\u8D77\u98DE\u665A-\u65E9",
      "arrival_early": "\u5230\u8FBE\u65E9-\u665A",
      "arrival_late": "\u5230\u8FBE\u665A-\u65E9",
      "duration_short": "\u8017\u65F6\u77ED-\u957F"
    };
    const buttonText = textMap[sortType];
    if (buttonText) {
      const span = this.timeSortButtonTarget.querySelector("span");
      if (span) {
        span.textContent = buttonText;
      }
      this.timeSortButtonTarget.classList.add("border-b-2", "border-black");
      this.timeSortButtonTarget.querySelector("span")?.classList.add("font-bold");
      this.timeSortButtonTarget.querySelector("span")?.classList.remove("text-gray-600");
    }
  }
  // Apply the current sort to flight list
  applySort() {
    const flightCards = Array.from(this.flightListTarget.children);
    if (flightCards.length === 0) return;
    let sortedCards = [];
    switch (this.currentSort) {
      case "direct_priority":
        sortedCards = flightCards.sort((a, b) => {
          const aDirect = !a.textContent?.includes("\u4E2D\u56FD\u9999\u6E2F") && !a.textContent?.includes("\u676D\u5DDE");
          const bDirect = !b.textContent?.includes("\u4E2D\u56FD\u9999\u6E2F") && !b.textContent?.includes("\u676D\u5DDE");
          if (aDirect && !bDirect) return -1;
          if (!aDirect && bDirect) return 1;
          const aPrice = this.extractPrice(a);
          const bPrice = this.extractPrice(b);
          return aPrice - bPrice;
        });
        break;
      case "price_asc":
        sortedCards = flightCards.sort((a, b) => {
          return this.extractPrice(a) - this.extractPrice(b);
        });
        break;
      case "departure_early":
        sortedCards = flightCards.sort((a, b) => {
          return this.extractDepartureTime(a) - this.extractDepartureTime(b);
        });
        break;
      case "departure_late":
        sortedCards = flightCards.sort((a, b) => {
          return this.extractDepartureTime(b) - this.extractDepartureTime(a);
        });
        break;
      case "arrival_early":
        sortedCards = flightCards.sort((a, b) => {
          return this.extractArrivalTime(a) - this.extractArrivalTime(b);
        });
        break;
      case "arrival_late":
        sortedCards = flightCards.sort((a, b) => {
          return this.extractArrivalTime(b) - this.extractArrivalTime(a);
        });
        break;
      case "duration_short":
        sortedCards = flightCards.sort((a, b) => {
          return this.extractDuration(a) - this.extractDuration(b);
        });
        break;
      default:
        sortedCards = flightCards;
    }
    sortedCards.forEach((card) => {
      this.flightListTarget.appendChild(card);
    });
    this.flightListTarget.classList.add("opacity-50");
    setTimeout(() => {
      this.flightListTarget.classList.remove("opacity-50");
    }, 150);
  }
  // Extract price from flight card
  extractPrice(card) {
    const priceText = card.querySelector(".text-red-500.font-bold")?.textContent;
    if (!priceText) return 0;
    const match = priceText.match(/(\d+)/);
    return match ? parseInt(match[1]) : 0;
  }
  // Extract departure time from flight card (convert to minutes since midnight)
  extractDepartureTime(card) {
    const timeText = card.querySelector(".text-3xl.font-bold")?.textContent;
    if (!timeText) return 0;
    const match = timeText.match(/(\d+):(\d+)/);
    if (!match) return 0;
    const hours = parseInt(match[1]);
    const minutes = parseInt(match[2]);
    return hours * 60 + minutes;
  }
  // Extract arrival time from flight card
  extractArrivalTime(card) {
    const timeElements = card.querySelectorAll(".text-3xl.font-bold");
    if (timeElements.length < 2) return 0;
    const timeText = timeElements[1].textContent;
    if (!timeText) return 0;
    const match = timeText.match(/(\d+):(\d+)/);
    if (!match) return 0;
    const hours = parseInt(match[1]);
    const minutes = parseInt(match[2]);
    const departureTime = this.extractDepartureTime(card);
    const arrivalTime = hours * 60 + minutes;
    return arrivalTime < departureTime ? arrivalTime + 24 * 60 : arrivalTime;
  }
  // Extract duration from flight card
  extractDuration(card) {
    const durationText = card.textContent;
    if (!durationText) return 0;
    const match = durationText.match(/(\d+)h(?:(\d+)m)?/);
    if (!match) return 0;
    const hours = parseInt(match[1]);
    const minutes = match[2] ? parseInt(match[2]) : 0;
    return hours * 60 + minutes;
  }
};

// app/javascript/controllers/date_link_controller.ts
var date_link_controller_default = class extends Controller {
  static {
    this.values = {
      url: String,
      selectedDate: String,
      allSegmentDates: Array,
      selectedFlightDates: Array,
      currentSegmentIndex: Number
    };
  }
  async navigate(event) {
    event.preventDefault();
    if (this.selectedDateValue && this.allSegmentDatesValue && this.allSegmentDatesValue.length > 0) {
      const selectedDate = new Date(this.selectedDateValue);
      const currentIndex = this.currentSegmentIndexValue;
      const segmentNumber = currentIndex + 1;
      let previousDate = null;
      if (currentIndex > 0) {
        if (this.selectedFlightDatesValue && this.selectedFlightDatesValue.length > 0) {
          const lastSelectedFlightDate = this.selectedFlightDatesValue[this.selectedFlightDatesValue.length - 1];
          if (lastSelectedFlightDate) {
            previousDate = new Date(lastSelectedFlightDate);
          }
        }
        if (!previousDate && this.allSegmentDatesValue[currentIndex - 1]) {
          previousDate = new Date(this.allSegmentDatesValue[currentIndex - 1]);
        }
      }
      let nextDate = null;
      if (currentIndex + 1 < this.allSegmentDatesValue.length) {
        nextDate = new Date(this.allSegmentDatesValue[currentIndex + 1]);
      }
      if (previousDate && selectedDate < previousDate) {
        if (window.showToast) {
          window.showToast(`\u7B2C${segmentNumber}\u7A0B\u65E5\u671F\u4E0D\u80FD\u65E9\u4E8E\u7B2C${currentIndex}\u7A0B\uFF0C\u8BF7\u8FD4\u56DE\u822A\u73ED\u9996\u9875\u4FEE\u6539`);
        }
        return;
      }
      if (nextDate && selectedDate > nextDate) {
        if (window.showToast) {
          window.showToast(`\u7B2C${segmentNumber}\u7A0B\u65E5\u671F\u4E0D\u80FD\u665A\u4E8E\u7B2C${currentIndex + 2}\u7A0B\uFF0C\u8BF7\u8FD4\u56DE\u822A\u73ED\u9996\u9875\u4FEE\u6539`);
        }
        return;
      }
    }
    try {
      const response = await fetch(this.urlValue, {
        headers: {
          "Accept": "text/vnd.turbo-stream.html, text/html",
          "Turbo-Frame": "_top"
        }
      });
      const contentType = response.headers.get("Content-Type");
      if (contentType?.includes("turbo-stream")) {
        const html = await response.text();
        renderStreamMessage(html);
      } else {
        visit(this.urlValue);
      }
    } catch (error3) {
      console.error("Navigation error:", error3);
      visit(this.urlValue);
    }
  }
};

// app/javascript/controllers/hotel_guest_selector_controller.ts
var hotel_guest_selector_controller_default = class extends Controller {
  static {
    this.targets = [
      "modal",
      "roomsCount",
      "adultsCount",
      "childrenCount",
      "roomsInput",
      "adultsInput",
      "childrenInput",
      "displayText"
    ];
  }
  static {
    this.values = {
      rooms: Number,
      adults: Number,
      children: Number
    };
  }
  connect() {
    console.log("HotelGuestSelector connected");
    if (this.hasRoomsInputTarget && this.hasAdultsInputTarget && this.hasChildrenInputTarget) {
      this.roomsValue = parseInt(this.roomsInputTarget.value) || 1;
      this.adultsValue = parseInt(this.adultsInputTarget.value) || 1;
      this.childrenValue = parseInt(this.childrenInputTarget.value) || 0;
      this.updateDisplay();
    }
  }
  disconnect() {
    console.log("HotelGuestSelector disconnected");
  }
  // Open modal
  openModal() {
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // Close modal
  closeModal() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  // Increment rooms
  incrementRooms() {
    if (this.roomsValue < 10) {
      this.roomsValue++;
      this.updateCounts();
    }
  }
  // Decrement rooms
  decrementRooms() {
    if (this.roomsValue > 1) {
      this.roomsValue--;
      this.updateCounts();
    }
  }
  // Increment adults
  incrementAdults() {
    if (this.adultsValue < 20) {
      this.adultsValue++;
      this.updateCounts();
    }
  }
  // Decrement adults
  decrementAdults() {
    if (this.adultsValue > 1) {
      this.adultsValue--;
      this.updateCounts();
    }
  }
  // Increment children
  incrementChildren() {
    if (this.childrenValue < 10) {
      this.childrenValue++;
      this.updateCounts();
    }
  }
  // Decrement children
  decrementChildren() {
    if (this.childrenValue > 0) {
      this.childrenValue--;
      this.updateCounts();
    }
  }
  // Reset to defaults
  reset() {
    this.roomsValue = 1;
    this.adultsValue = 1;
    this.childrenValue = 0;
    this.updateCounts();
  }
  // Confirm and close
  confirm() {
    this.updateDisplay();
    this.dispatchGuestUpdateEvent();
    this.closeModal();
  }
  // Update count displays and hidden inputs
  updateCounts() {
    this.roomsCountTarget.textContent = this.roomsValue.toString();
    this.adultsCountTarget.textContent = this.adultsValue.toString();
    this.childrenCountTarget.textContent = this.childrenValue.toString();
    this.roomsInputTarget.value = this.roomsValue.toString();
    this.adultsInputTarget.value = this.adultsValue.toString();
    this.childrenInputTarget.value = this.childrenValue.toString();
  }
  // Update display text
  updateDisplay() {
    if (this.hasDisplayTextTarget) {
      this.displayTextTarget.textContent = `${this.roomsValue}\u95F4\u623F ${this.adultsValue}\u6210\u4EBA ${this.childrenValue}\u513F\u7AE5`;
    }
  }
  // Dispatch event to notify hotel-search controller
  dispatchGuestUpdateEvent() {
    const guestUpdateEvent = new CustomEvent("hotel-guest-selector:guests-updated", {
      detail: {
        rooms: this.roomsValue,
        adults: this.adultsValue,
        children: this.childrenValue
      },
      bubbles: true
    });
    document.dispatchEvent(guestUpdateEvent);
    console.log("Hotel guest selector: Dispatched guest update event", {
      rooms: this.roomsValue,
      adults: this.adultsValue,
      children: this.childrenValue
    });
  }
};

// app/javascript/controllers/hotel_date_picker_controller.ts
var hotel_date_picker_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.currentMonth = /* @__PURE__ */ new Date();
    this.checkInDate = null;
    this.checkOutDate = null;
  }
  static {
    this.targets = [
      "modal",
      "calendar",
      "monthLabel",
      "promptText",
      "checkInInput",
      "checkOutInput",
      "checkInDisplay",
      "checkOutDisplay",
      "nightsDisplay"
    ];
  }
  static {
    this.values = {
      checkIn: String,
      checkOut: String,
      selectingCheckIn: Boolean
    };
  }
  connect() {
    if (this.hasCheckInInputTarget && this.hasCheckOutInputTarget) {
      if (this.checkInInputTarget.value) {
        this.checkInDate = this.parseLocalDate(this.checkInInputTarget.value);
      }
      if (this.checkOutInputTarget.value) {
        this.checkOutDate = this.parseLocalDate(this.checkOutInputTarget.value);
      }
      this.updateDisplay();
    }
  }
  parseLocalDate(dateStr) {
    const parts = dateStr.split("-");
    if (parts.length === 3) {
      const year = parseInt(parts[0], 10);
      const month = parseInt(parts[1], 10) - 1;
      const day = parseInt(parts[2], 10);
      return new Date(year, month, day);
    }
    return /* @__PURE__ */ new Date();
  }
  openModal() {
    this.selectingCheckInValue = true;
    this.promptTextTarget.textContent = "\u8BF7\u9009\u62E9\u5165\u4F4F\u65E5\u671F";
    this.currentMonth = /* @__PURE__ */ new Date();
    this.renderMultiMonthCalendar();
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  closeModal() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  selectDate(event) {
    const button = event.currentTarget;
    const dateStr = button.dataset.date;
    if (!dateStr) return;
    const selectedDate = this.parseLocalDate(dateStr);
    if (this.selectingCheckInValue) {
      this.checkInDate = selectedDate;
      this.checkOutDate = null;
      this.selectingCheckInValue = false;
      this.promptTextTarget.textContent = "\u8BF7\u9009\u62E9\u79BB\u5E97\u65E5\u671F";
    } else {
      if (this.checkInDate && selectedDate <= this.checkInDate) {
        this.checkInDate = selectedDate;
        this.checkOutDate = null;
        this.promptTextTarget.textContent = "\u8BF7\u9009\u62E9\u79BB\u5E97\u65E5\u671F";
      } else {
        this.checkOutDate = selectedDate;
      }
    }
    this.renderMultiMonthCalendar();
  }
  confirm() {
    if (this.checkInDate && this.checkOutDate) {
      this.checkInInputTarget.value = this.formatDate(this.checkInDate);
      this.checkOutInputTarget.value = this.formatDate(this.checkOutDate);
      this.updateDisplay();
      this.dispatchDateUpdateEvent();
      this.closeModal();
    }
  }
  reset() {
    this.checkInDate = null;
    this.checkOutDate = null;
    this.selectingCheckInValue = true;
    this.promptTextTarget.textContent = "\u8BF7\u9009\u62E9\u5165\u4F4F\u65E5\u671F";
    this.renderMultiMonthCalendar();
  }
  previousMonth() {
    this.currentMonth = new Date(this.currentMonth.getFullYear(), this.currentMonth.getMonth() - 1, 1);
    this.renderMultiMonthCalendar();
  }
  nextMonth() {
    this.currentMonth = new Date(this.currentMonth.getFullYear(), this.currentMonth.getMonth() + 1, 1);
    this.renderMultiMonthCalendar();
  }
  renderMultiMonthCalendar() {
    let html = "";
    for (let i = 0; i < 3; i++) {
      const displayMonth = new Date(this.currentMonth.getFullYear(), this.currentMonth.getMonth() + i, 1);
      html += this.renderSingleMonth(displayMonth);
    }
    this.calendarTarget.innerHTML = html;
    const year = this.currentMonth.getFullYear();
    const month = this.currentMonth.getMonth();
    this.monthLabelTarget.textContent = `${year}\u5E74${month + 1}\u6708`;
  }
  renderSingleMonth(displayMonth) {
    const year = displayMonth.getFullYear();
    const month = displayMonth.getMonth();
    let html = `<div class="mb-6">
      <div class="text-lg font-bold text-gray-900 mb-3">${year}\u5E74${month + 1}\u6708</div>
    `;
    const firstDay = new Date(year, month, 1);
    const lastDay = new Date(year, month + 1, 0);
    const daysInMonth = lastDay.getDate();
    const startingDayOfWeek = firstDay.getDay();
    const days = [];
    const prevMonthLastDay = new Date(year, month, 0).getDate();
    for (let i = startingDayOfWeek - 1; i >= 0; i--) {
      const day = prevMonthLastDay - i;
      const date = new Date(year, month - 1, day);
      days.push({
        date,
        dayOfMonth: day,
        isCurrentMonth: false,
        isToday: false,
        isSelected: false,
        isInRange: false,
        isDisabled: this.isDateDisabled(date)
      });
    }
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    for (let day = 1; day <= daysInMonth; day++) {
      const date = new Date(year, month, day);
      const isToday = date.getTime() === today.getTime();
      const isSelected = this.isDateSelected(date);
      const isInRange = this.isDateInRange(date);
      days.push({
        date,
        dayOfMonth: day,
        isCurrentMonth: true,
        isToday,
        isSelected,
        isInRange,
        isDisabled: this.isDateDisabled(date),
        label: this.getDateLabel(date),
        holiday: this.getHoliday(date)
      });
    }
    const remainingDays = 42 - days.length;
    for (let day = 1; day <= remainingDays; day++) {
      const date = new Date(year, month + 1, day);
      days.push({
        date,
        dayOfMonth: day,
        isCurrentMonth: false,
        isToday: false,
        isSelected: false,
        isInRange: false,
        isDisabled: this.isDateDisabled(date)
      });
    }
    html += this.renderDays(days);
    html += "</div>";
    return html;
  }
  renderDays(days) {
    const weekdays = ["\u65E5", "\u4E00", "\u4E8C", "\u4E09", "\u56DB", "\u4E94", "\u516D"];
    let html = '<div class="grid grid-cols-7 gap-1 mb-2">';
    weekdays.forEach((day) => {
      html += `<div class="text-center text-sm text-gray-500 py-2">${day}</div>`;
    });
    html += "</div>";
    html += '<div class="grid grid-cols-7 gap-1">';
    days.forEach((day) => {
      const dateStr = this.formatDate(day.date);
      const baseClasses = "relative h-12 flex flex-col items-center justify-center text-sm rounded-lg";
      let classes = baseClasses;
      let textColor = day.isCurrentMonth ? "text-gray-900" : "text-gray-300";
      let bgColor = "";
      if (day.isDisabled) {
        classes += " opacity-40 cursor-not-allowed";
      } else {
        classes += " cursor-pointer hover:bg-gray-100";
      }
      if (day.isSelected) {
        bgColor = "bg-yellow-400";
        textColor = "text-white font-bold";
      } else if (day.isInRange) {
        bgColor = "bg-yellow-50";
      }
      if (day.isToday && !day.isSelected) {
        classes += " border-2 border-blue-500";
      }
      const label = day.label || day.holiday || "";
      const labelClass = day.holiday ? "text-red-500" : "text-blue-500";
      html += `
        <button 
          data-date="${dateStr}"
          data-action="click->hotel-date-picker#selectDate"
          class="${classes} ${bgColor} ${textColor}"
          ${day.isDisabled ? "disabled" : ""}
        >
          <span class="font-medium">${day.dayOfMonth}</span>
          ${label ? `<span class="text-xs ${labelClass} absolute bottom-0">${label}</span>` : ""}
        </button>
      `;
    });
    html += "</div>";
    return html;
  }
  isDateDisabled(date) {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    return date < today;
  }
  isDateSelected(date) {
    if (this.checkInDate && this.isSameDay(date, this.checkInDate)) return true;
    if (this.checkOutDate && this.isSameDay(date, this.checkOutDate)) return true;
    return false;
  }
  isDateInRange(date) {
    if (!this.checkInDate || !this.checkOutDate) return false;
    return date > this.checkInDate && date < this.checkOutDate;
  }
  isSameDay(date1, date2) {
    return date1.getFullYear() === date2.getFullYear() && date1.getMonth() === date2.getMonth() && date1.getDate() === date2.getDate();
  }
  formatDate(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    return `${year}-${month}-${day}`;
  }
  getDateLabel(date) {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    const targetDate = new Date(date);
    targetDate.setHours(0, 0, 0, 0);
    const diffTime = targetDate.getTime() - today.getTime();
    const diffDays = Math.round(diffTime / (1e3 * 60 * 60 * 24));
    if (diffDays === 0) return "\u4ECA\u5929";
    if (diffDays === 1) return "\u660E\u5929";
    if (diffDays === 2) return "\u540E\u5929";
    const weekdays = ["\u5468\u65E5", "\u5468\u4E00", "\u5468\u4E8C", "\u5468\u4E09", "\u5468\u56DB", "\u5468\u4E94", "\u5468\u516D"];
    return weekdays[date.getDay()];
  }
  getHoliday(date) {
    const month = date.getMonth() + 1;
    const day = date.getDate();
    if (month === 1 && day === 1) return "\u5143\u65E6";
    if (month === 2 && day === 14) return "\u60C5\u4EBA\u8282";
    if (month === 5 && day === 1) return "\u52B3\u52A8\u8282";
    if (month === 6 && day === 1) return "\u513F\u7AE5\u8282";
    if (month === 10 && day === 1) return "\u56FD\u5E86\u8282";
    if (month === 12 && day === 25) return "\u5723\u8BDE\u8282";
    return "";
  }
  updateDisplay() {
    if (this.checkInDate) {
      const month = this.checkInDate.getMonth() + 1;
      const day = this.checkInDate.getDate();
      this.checkInDisplayTarget.textContent = `${month}\u6708${day}\u65E5`;
      const checkInLabel = this.checkInDisplayTarget.nextElementSibling;
      if (checkInLabel) {
        checkInLabel.textContent = this.getDateLabel(this.checkInDate);
      }
    }
    if (this.checkOutDate) {
      const month = this.checkOutDate.getMonth() + 1;
      const day = this.checkOutDate.getDate();
      this.checkOutDisplayTarget.textContent = `${month}\u6708${day}\u65E5`;
      const checkOutLabel = this.checkOutDisplayTarget.nextElementSibling;
      if (checkOutLabel) {
        checkOutLabel.textContent = this.getDateLabel(this.checkOutDate);
      }
    }
    if (this.checkInDate && this.checkOutDate) {
      const nights = Math.floor((this.checkOutDate.getTime() - this.checkInDate.getTime()) / (1e3 * 60 * 60 * 24));
      this.nightsDisplayTarget.textContent = `${nights}\u665A`;
    }
  }
  // Dispatch date update event for hotel-search controller
  dispatchDateUpdateEvent() {
    if (!this.checkInDate || !this.checkOutDate) return;
    const dateUpdateEvent = new CustomEvent("hotel-date-picker:dates-selected", {
      detail: {
        checkIn: this.formatDate(this.checkInDate),
        checkOut: this.formatDate(this.checkOutDate)
      },
      bubbles: true
    });
    document.dispatchEvent(dateUpdateEvent);
    console.log("Hotel date picker: Dispatched dates update event", {
      checkIn: this.formatDate(this.checkInDate),
      checkOut: this.formatDate(this.checkOutDate)
    });
  }
};

// app/javascript/controllers/payment_modal_controller.ts
var payment_modal_controller_default = class extends Controller {
  static {
    this.targets = [
      "modal",
      "backdrop",
      "paymentOption",
      "paymentMethodInput"
    ];
  }
  static {
    this.values = {
      totalPrice: String
    };
  }
  connect() {
    console.log("PaymentModal connected");
  }
  // 
  open(event) {
    event.preventDefault();
    this.modalTarget.classList.remove("hidden");
    this.backdropTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // 
  close(event) {
    if (event) {
      event.preventDefault();
    }
    this.modalTarget.classList.add("hidden");
    this.backdropTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  // 
  closeOnBackdrop(event) {
    if (event.target === event.currentTarget) {
      this.close();
    }
  }
  // 
  selectPayment(event) {
    const target = event.currentTarget;
    const paymentMethod = target.dataset.paymentMethod;
    this.paymentOptionTargets.forEach((option) => {
      option.classList.remove("border-blue-500", "bg-blue-50");
      option.classList.add("border-gray-200");
      const checkmark2 = option.querySelector(".checkmark");
      if (checkmark2) {
        checkmark2.classList.add("hidden");
      }
    });
    target.classList.remove("border-gray-200");
    target.classList.add("border-blue-500", "bg-blue-50");
    const checkmark = target.querySelector(".checkmark");
    if (checkmark) {
      checkmark.classList.remove("hidden");
    }
    if (paymentMethod) {
      this.paymentMethodInputTarget.value = paymentMethod;
    }
  }
  //  - 
  confirmPayment(event) {
    event.preventDefault();
    const form = this.element.closest("form");
    if (form) {
      form.requestSubmit();
    }
  }
};

// app/javascript/controllers/payment_confirmation_controller.ts
var payment_confirmation_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.password = "";
  }
  static {
    this.targets = [
      "passwordModal",
      "fingerprintModal",
      "processingModal",
      "statusModal",
      "passwordDots",
      "passwordAmount",
      "processingAmount",
      "userEmail",
      "statusAmount",
      "statusUserEmail",
      "statusIcon",
      "statusText",
      "statusDots"
    ];
  }
  static {
    this.values = {
      amount: String,
      userEmail: String,
      paymentUrl: String,
      successUrl: String
    };
  }
  connect() {
    console.log("Payment confirmation controller connected");
  }
  showPasswordModal() {
    if (!this.hasPasswordModalTarget) {
      console.error("Password modal target not found");
      return;
    }
    this.password = "";
    if (this.hasPasswordDotsTarget) {
      this.updatePasswordDots();
    }
    if (this.hasPasswordAmountTarget) {
      this.passwordAmountTarget.textContent = this.amountValue;
    }
    this.passwordModalTarget.classList.remove("hidden");
  }
  closePasswordModal() {
    if (this.hasPasswordModalTarget) {
      this.passwordModalTarget.classList.add("hidden");
    }
  }
  inputPassword(event) {
    const button = event.currentTarget;
    const number = button.dataset.number;
    if (!number) return;
    if (this.password.length < 6) {
      this.password += number;
      this.updatePasswordDots();
      if (this.password.length === 6) {
        this.processPasswordPayment();
      }
    }
  }
  deletePassword() {
    if (this.password.length > 0) {
      this.password = this.password.slice(0, -1);
      this.updatePasswordDots();
    }
  }
  updatePasswordDots() {
    if (!this.hasPasswordDotsTarget) return;
    const dots = this.passwordDotsTarget.querySelectorAll(".password-dot");
    dots.forEach((dot, index) => {
      if (index < this.password.length) {
        dot.classList.add("active");
      } else {
        dot.classList.remove("active");
      }
    });
  }
  processPasswordPayment() {
    this.verifyPasswordThenPay();
  }
  async verifyPasswordThenPay() {
    try {
      const verifyResponse = await fetch("/profile/verify_pay_password", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "X-CSRF-Token": document.querySelector('meta[name="csrf-token"]')?.content || ""
        },
        body: JSON.stringify({
          pay_password: this.password
        })
      });
      const verifyData = await verifyResponse.json();
      if (!verifyResponse.ok || !verifyData.success) {
        const message = verifyData.message || "\u652F\u4ED8\u5BC6\u7801\u9519\u8BEF";
        if (message.includes("\u8BF7\u5148\u8BBE\u7F6E\u652F\u4ED8\u5BC6\u7801") || message.includes("\u8BBE\u7F6E\u652F\u4ED8\u5BC6\u7801")) {
          if (this.hasPasswordModalTarget) {
            this.passwordModalTarget.classList.add("hidden");
          }
          window.location.href = "/profile/edit_pay_password";
          return;
        }
        if (typeof window.showToast === "function") {
          window.showToast(message);
        } else {
          alert(message);
        }
        this.password = "";
        this.updatePasswordDots();
        if (this.hasPasswordModalTarget) {
          this.passwordModalTarget.classList.remove("hidden");
        }
        return;
      }
      if (this.hasPasswordModalTarget) {
        this.passwordModalTarget.classList.add("hidden");
      }
      this.showPayingStatus();
      await this.processActualPayment();
    } catch (error3) {
      console.error("\u9A8C\u8BC1\u652F\u4ED8\u5BC6\u7801\u5931\u8D25:", error3);
      if (typeof window.showToast === "function") {
        window.showToast("\u7F51\u7EDC\u9519\u8BEF\uFF0C\u8BF7\u91CD\u8BD5");
      } else {
        alert("\u7F51\u7EDC\u9519\u8BEF\uFF0C\u8BF7\u91CD\u8BD5");
      }
      this.password = "";
      this.updatePasswordDots();
      if (this.hasPasswordModalTarget) {
        this.passwordModalTarget.classList.remove("hidden");
      }
    }
  }
  async processActualPayment() {
    try {
      const response = await fetch(`${this.paymentUrlValue}.json`, {
        method: "PATCH",
        headers: {
          "Content-Type": "application/json",
          "Accept": "application/json",
          "X-CSRF-Token": document.querySelector('meta[name="csrf-token"]')?.content || ""
        },
        body: JSON.stringify({})
        // Password already verified, just trigger payment
      });
      const data2 = await response.json();
      if (response.ok && data2.success) {
        this.showPaymentSuccess();
        setTimeout(() => {
          window.location.href = this.successUrlValue;
        }, 2e3);
      } else {
        throw new Error(data2.message || "\u652F\u4ED8\u5931\u8D25");
      }
    } catch (error3) {
      console.error("\u652F\u4ED8\u5931\u8D25:", error3);
      this.closeStatusModal();
      const message = error3 instanceof Error ? error3.message : "\u652F\u4ED8\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5";
      if (typeof window.showToast === "function") {
        window.showToast(message);
      } else {
        alert(message);
      }
      this.password = "";
      this.showPasswordModal();
    }
  }
  showPayingStatus() {
    if (!this.hasStatusModalTarget) return;
    if (this.hasStatusAmountTarget) {
      this.statusAmountTarget.textContent = this.amountValue;
    }
    if (this.hasStatusUserEmailTarget) {
      this.statusUserEmailTarget.textContent = this.userEmailValue;
    }
    if (this.hasStatusIconTarget) {
      this.statusIconTarget.textContent = "\u{1F4B3}";
    }
    if (this.hasStatusTextTarget) {
      this.statusTextTarget.textContent = "\u6B63\u5728\u4ED8\u6B3E";
    }
    if (this.hasStatusDotsTarget) {
      this.statusDotsTarget.style.display = "block";
    }
    this.statusModalTarget.classList.remove("hidden");
  }
  showPaymentSuccess() {
    if (this.hasStatusIconTarget) {
      this.statusIconTarget.textContent = "\u2713";
    }
    if (this.hasStatusTextTarget) {
      this.statusTextTarget.textContent = "\u4ED8\u6B3E\u6210\u529F";
    }
    if (this.hasStatusDotsTarget) {
      this.statusDotsTarget.style.display = "none";
    }
  }
  closeStatusModal() {
    if (this.hasStatusModalTarget) {
      this.statusModalTarget.classList.add("hidden");
    }
  }
};

// app/javascript/controllers/hotel_tabs_controller.ts
var hotel_tabs_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.activeTabType = "domestic";
  }
  static {
    this.targets = ["tab"];
  }
  connect() {
    const activeTab = this.element.querySelector("[data-tab-type].bg-white");
    this.activeTabType = activeTab?.dataset.tabType || "domestic";
    document.addEventListener("city-selector:switch-to-international", this.handleInternationalSwitch.bind(this));
  }
  disconnect() {
    document.removeEventListener("city-selector:switch-to-international", this.handleInternationalSwitch.bind(this));
  }
  // Handle international switch from city selector
  handleInternationalSwitch() {
    console.log("Hotel tabs: Received switch to international event");
    const internationalTab = this.tabTargets.find((tab) => tab.dataset.tabType === "international");
    if (internationalTab && this.activeTabType !== "international") {
      internationalTab.click();
    }
  }
  switchTab(event) {
    const clickedTab = event.currentTarget;
    const newTabType = clickedTab.dataset.tabType;
    if (!newTabType) return;
    if (newTabType === this.activeTabType) {
      return;
    }
    this.activeTabType = newTabType;
    this.tabTargets.forEach((tab) => {
      tab.classList.remove("bg-white", "rounded-t-[12px]", "px-3", "py-2.5", "relative");
      tab.classList.add("px-2", "py-2");
      const span = tab.querySelector("span");
      if (span) {
        span.className = "text-[13px] font-medium text-[#666666]";
      }
      if (tab.tagName === "BUTTON") {
        tab.classList.add("text-[13px]", "font-medium", "text-[#666666]", "cursor-pointer", "whitespace-nowrap");
      }
    });
    clickedTab.classList.remove("px-2", "py-2");
    clickedTab.classList.add("relative", "bg-white", "rounded-t-[12px]", "px-3", "py-2.5");
    if (clickedTab.tagName === "BUTTON") {
      const label = clickedTab.textContent?.trim() || "";
      clickedTab.innerHTML = `
        <div class="flex flex-col items-center">
          <span class="text-[15px] font-bold text-[#1a1a1a] leading-tight whitespace-nowrap">${label}</span>
        </div>
      `;
    } else {
      const span = clickedTab.querySelector("span");
      if (span) {
        span.className = "text-[15px] font-bold text-[#1a1a1a] leading-tight whitespace-nowrap";
      }
    }
    this.dispatch("typeChanged", { detail: { type: newTabType } });
    this.filterHotels(newTabType);
  }
  filterHotels(type) {
    console.log(`\u5207\u6362\u5230\u7C7B\u578B: ${type}`);
    const currentParams = new URLSearchParams(window.location.search);
    const citySelectorElement = document.querySelector('[data-controller*="city-selector"]');
    if (citySelectorElement) {
      const departureCityInput = citySelectorElement.querySelector('[data-city-selector-target="departureCityInput"]');
      if (departureCityInput && departureCityInput.value) {
        currentParams.set("city", departureCityInput.value);
        console.log(`\u4FDD\u7559\u9009\u62E9\u7684\u57CE\u5E02: ${departureCityInput.value}`);
      }
    }
    currentParams.delete("type");
    currentParams.delete("room_category");
    if (type === "domestic") {
      currentParams.set("location_type", "domestic");
    } else if (type === "international") {
      currentParams.set("location_type", "international");
    } else if (type === "hourly") {
      currentParams.set("location_type", "domestic");
      currentParams.set("room_category", "hourly");
    } else if (type === "homestay") {
      currentParams.set("location_type", "domestic");
      currentParams.set("type", "homestay");
    }
    const newUrl = `${window.location.pathname}?${currentParams.toString()}`;
    window.location.href = newUrl;
  }
};

// app/javascript/controllers/hotel_traveler_selector_controller.ts
var hotel_traveler_selector_controller_default = class extends Controller {
  static {
    this.targets = [
      "modal",
      "guestNameInput",
      "guestPhoneInput",
      "selectedPassenger"
    ];
  }
  static {
    this.values = {
      selectedPassengerId: String,
      selectedPassengerName: String,
      selectedPassengerPhone: String
    };
  }
  connect() {
    console.log("HotelTravelerSelector connected");
  }
  // Open modal
  openModal() {
    console.log("Opening traveler selector modal");
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // Close modal
  closeModal() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  // Select a passenger from the list
  selectPassenger(event) {
    const target = event.currentTarget;
    const passengerId = target.dataset.passengerId || "";
    const passengerName = target.dataset.passengerName || "";
    const passengerPhone = target.dataset.passengerPhone || "";
    console.log("Selected passenger:", { passengerId, passengerName, passengerPhone });
    this.selectedPassengerIdValue = passengerId;
    this.selectedPassengerNameValue = passengerName;
    this.selectedPassengerPhoneValue = passengerPhone;
    this.guestNameInputTarget.value = passengerName;
    this.guestPhoneInputTarget.value = passengerPhone;
    if (this.hasSelectedPassengerTarget) {
      this.selectedPassengerTarget.textContent = passengerName;
    }
    this.closeModal();
  }
  // Manual input - clear selection
  clearSelection() {
    this.selectedPassengerIdValue = "";
    this.selectedPassengerNameValue = "";
    this.selectedPassengerPhoneValue = "";
  }
  // Stop propagation for inner clicks
  stopPropagation(event) {
    event.stopPropagation();
  }
};

// app/javascript/controllers/toast_controller.ts
var toast_controller_default = class extends Controller {
  connect() {
    setTimeout(() => {
      this.element.classList.add("animate-fade-out");
      setTimeout(() => {
        if (this.element.parentNode) {
          this.element.parentNode.removeChild(this.element);
        }
      }, 300);
    }, 2e3);
  }
};

// app/javascript/controllers/toast_trigger_controller.ts
var toast_trigger_controller_default = class extends Controller {
  static {
    this.values = {
      message: String
    };
  }
  connect() {
    if (this.messageValue && window.showToast) {
      window.showToast(this.messageValue);
    }
    this.element.remove();
  }
};

// app/javascript/controllers/hotel_booking_controller.ts
var hotel_booking_controller_default = class extends Controller {
  static {
    this.targets = ["insuranceModal", "confirmModal", "form", "totalPriceAmount"];
  }
  // Handle insurance option selection in form
  selectInsuranceOption(event) {
    const radio = event.currentTarget;
    const insuranceType = radio.dataset.insuranceType || "none";
    const insurancePrice = radio.dataset.insurancePrice || "0";
    this.setInsuranceValues(insuranceType, insurancePrice);
    const allCards = document.querySelectorAll("[data-insurance-card]");
    allCards.forEach((card) => {
      card.classList.remove("border-orange-400", "border-gray-400");
      card.classList.add("border-2", "border-gray-300");
    });
    const selectedCard = radio.closest("[data-insurance-card]");
    if (selectedCard) {
      selectedCard.classList.remove("border-gray-300");
      if (insuranceType === "none") {
        selectedCard.classList.add("border-gray-400");
      } else {
        selectedCard.classList.add("border-orange-400");
      }
    }
    this.updateTotalPrice();
  }
  // Update total price display
  updateTotalPrice() {
    if (!this.totalPriceAmountTarget) return;
    const basePrice = parseFloat(this.totalPriceAmountTarget.dataset.basePrice || "0");
    const insurancePriceField = document.getElementById("hotel_booking_insurance_price");
    const insurancePrice = parseFloat(insurancePriceField?.value || "0");
    const totalPrice = basePrice + insurancePrice;
    this.totalPriceAmountTarget.textContent = totalPrice.toFixed(2);
  }
  setInsuranceValues(insuranceType, insurancePrice) {
    const insuranceTypeField = document.getElementById("hotel_booking_insurance_type");
    const insurancePriceField = document.getElementById("hotel_booking_insurance_price");
    if (insuranceTypeField) {
      insuranceTypeField.value = insuranceType;
    }
    if (insurancePriceField) {
      insurancePriceField.value = insurancePrice;
    }
  }
  // Handle submit button click
  handleSubmit(event) {
    event.preventDefault();
    const guestNameField = document.getElementById("hotel_booking_guest_name");
    const guestPhoneField = document.getElementById("hotel_booking_guest_phone");
    const guestName = guestNameField?.value?.trim() || "";
    const guestPhone = guestPhoneField?.value?.trim() || "";
    if (!guestName) {
      alert("\u8BF7\u586B\u5199\u5165\u4F4F\u4EBA\u59D3\u540D");
      guestNameField?.focus();
      return;
    }
    if (!guestPhone) {
      alert("\u8BF7\u586B\u5199\u8054\u7CFB\u624B\u673A");
      guestPhoneField?.focus();
      return;
    }
    const phoneRegex = /^1[3-9]\d{9}$/;
    if (!phoneRegex.test(guestPhone)) {
      alert("\u8BF7\u586B\u5199\u6B63\u786E\u7684\u624B\u673A\u53F7\u7801");
      guestPhoneField?.focus();
      return;
    }
    const insuranceTypeField = document.getElementById("hotel_booking_insurance_type");
    const insuranceType = insuranceTypeField?.value || "none";
    if (insuranceType === "none") {
      this.showInsuranceModal();
    } else {
      this.showConfirmModal();
    }
  }
  showInsuranceModal() {
    this.insuranceModalTarget.classList.remove("hidden");
  }
  closeInsuranceModal() {
    this.insuranceModalTarget.classList.add("hidden");
  }
  // Select recommended insurance from modal
  selectRecommendedInsurance(event) {
    const button = event.currentTarget;
    const insuranceType = button.dataset.insuranceType || "hotel_cancellation";
    const insurancePrice = button.dataset.insurancePrice || "16";
    this.setInsuranceValues(insuranceType, insurancePrice);
    const targetRadio = document.querySelector(`input[name="insurance_selection"][value="${insuranceType}"]`);
    if (targetRadio) {
      targetRadio.checked = true;
      targetRadio.dispatchEvent(new Event("change", { bubbles: true }));
    }
    this.closeInsuranceModal();
    this.showConfirmModal();
  }
  // Skip insurance selection
  skipInsurance() {
    this.setInsuranceValues("none", "0");
    this.closeInsuranceModal();
    this.showConfirmModal();
  }
  showConfirmModal() {
    this.confirmModalTarget.classList.remove("hidden");
    setTimeout(() => {
      this.submitForm();
    }, 1e4);
  }
  closeConfirmModal() {
    this.confirmModalTarget.classList.add("hidden");
  }
  submitForm() {
    console.log("Submitting form:", this.formTarget);
    this.formTarget.submit();
  }
};

// app/javascript/controllers/tour_detail_controller.ts
var tour_detail_controller_default = class extends Controller {
  static {
    this.targets = [
      "packageSelector",
      "priceDisplay"
    ];
  }
  static {
    this.values = {
      selectedPackageId: Number
    };
  }
  connect() {
    console.log("TourDetail controller connected");
  }
  disconnect() {
    console.log("TourDetail controller disconnected");
  }
  // Navigate to packages tab
  selectPackage() {
    const currentUrl = new URL(window.location.href);
    currentUrl.searchParams.set("tab", "packages");
    window.location.href = currentUrl.toString();
  }
  // Select a specific package
  selectThisPackage(event) {
    const target = event.currentTarget;
    const packageId = target.dataset.packageId;
    if (packageId) {
      this.selectedPackageIdValue = parseInt(packageId);
      const currentUrl = new URL(window.location.href);
      currentUrl.searchParams.set("tab", "overview");
      currentUrl.searchParams.set("package_id", packageId);
      window.location.href = currentUrl.toString();
    }
  }
  // Scroll to specific section (for smooth navigation)
  scrollToSection(event) {
    const target = event.currentTarget;
    const sectionId = target.dataset.section;
    if (sectionId) {
      const section = document.getElementById(sectionId);
      if (section) {
        section.scrollIntoView({ behavior: "smooth", block: "start" });
      }
    }
  }
};

// app/javascript/controllers/carousel_controller.ts
var carousel_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    // Handle touch/swipe gestures
    this.touchStartX = 0;
    this.touchEndX = 0;
  }
  static {
    this.targets = ["slide", "indicator"];
  }
  static {
    this.values = {
      index: { type: Number, default: 0 },
      autoplay: { type: Boolean, default: false },
      interval: { type: Number, default: 5e3 }
    };
  }
  connect() {
    console.log("Carousel controller connected");
    this.showSlide(this.indexValue);
    if (this.autoplayValue) {
      this.startAutoplay();
    }
  }
  disconnect() {
    console.log("Carousel controller disconnected");
    this.stopAutoplay();
  }
  // Navigate to previous slide
  previous() {
    this.stopAutoplay();
    const newIndex = this.indexValue > 0 ? this.indexValue - 1 : this.slideTargets.length - 1;
    this.indexValue = newIndex;
    this.showSlide(newIndex);
  }
  // Navigate to next slide
  next() {
    this.stopAutoplay();
    const newIndex = this.indexValue < this.slideTargets.length - 1 ? this.indexValue + 1 : 0;
    this.indexValue = newIndex;
    this.showSlide(newIndex);
  }
  // Go to specific slide
  goTo(event) {
    this.stopAutoplay();
    const target = event.currentTarget;
    const index = parseInt(target.dataset.index || "0");
    this.indexValue = index;
    this.showSlide(index);
  }
  // Show specific slide
  showSlide(index) {
    this.slideTargets.forEach((slide, i) => {
      if (i === index) {
        slide.classList.remove("hidden");
      } else {
        slide.classList.add("hidden");
      }
    });
    if (this.hasIndicatorTarget) {
      this.indicatorTargets?.forEach((indicator, i) => {
        if (i === index) {
          indicator.classList.add("active");
        } else {
          indicator.classList.remove("active");
        }
      });
    }
  }
  // Autoplay functionality
  startAutoplay() {
    this.autoplayTimer = window.setInterval(() => {
      this.next();
    }, this.intervalValue);
  }
  stopAutoplay() {
    if (this.autoplayTimer) {
      clearInterval(this.autoplayTimer);
      this.autoplayTimer = void 0;
    }
  }
  handleTouchStart(event) {
    this.touchStartX = event.changedTouches[0].screenX;
  }
  handleTouchEnd(event) {
    this.touchEndX = event.changedTouches[0].screenX;
    this.handleSwipe();
  }
  handleSwipe() {
    const swipeThreshold = 50;
    const diff = this.touchStartX - this.touchEndX;
    if (Math.abs(diff) > swipeThreshold) {
      if (diff > 0) {
        this.next();
      } else {
        this.previous();
      }
    }
  }
};

// app/javascript/controllers/scroll_spy_controller.ts
var scroll_spy_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.observer = null;
    this.isScrolling = false;
  }
  static {
    this.targets = ["tab", "section"];
  }
  static {
    this.values = {
      offset: { type: Number, default: 120 }
      // Top offset for nav bars (top nav 56px + tab nav 56px + extra 8px)
    };
  }
  connect() {
    console.log("ScrollSpy controller connected");
    this.setupIntersectionObserver();
    this.updateActiveTab();
  }
  disconnect() {
    if (this.observer) {
      this.observer.disconnect();
    }
  }
  setupIntersectionObserver() {
    const options = {
      root: null,
      rootMargin: `-${this.offsetValue}px 0px -50% 0px`,
      // Active when section is near top
      threshold: 0
    };
    this.observer = new IntersectionObserver((entries) => {
      if (this.isScrolling) return;
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          const sectionId = entry.target.id;
          this.setActiveTab(sectionId);
        }
      });
    }, options);
    this.sectionTargets.forEach((section) => {
      this.observer?.observe(section);
    });
  }
  scrollToSection(event) {
    event.preventDefault();
    event.stopPropagation();
    const target = event.currentTarget;
    const sectionId = target.dataset.section;
    if (!sectionId) return;
    const section = document.getElementById(sectionId);
    if (!section) return;
    this.isScrolling = true;
    const sectionTop = section.getBoundingClientRect().top + window.scrollY;
    const scrollTo = sectionTop - this.offsetValue;
    window.scrollTo({
      top: scrollTo,
      behavior: "smooth"
    });
    this.setActiveTab(sectionId);
    setTimeout(() => {
      this.isScrolling = false;
    }, 1e3);
  }
  setActiveTab(sectionId) {
    this.tabTargets.forEach((tab) => {
      tab.classList.remove("border-primary", "text-primary");
      tab.classList.add("border-transparent", "text-foreground-muted");
    });
    const activeTab = this.tabTargets.find((tab) => tab.dataset.section === sectionId);
    if (activeTab) {
      activeTab.classList.remove("border-transparent", "text-foreground-muted");
      activeTab.classList.add("border-primary", "text-primary");
      activeTab.scrollIntoView({
        behavior: "smooth",
        block: "nearest",
        inline: "center"
      });
    }
  }
  updateActiveTab() {
    const scrollPosition = window.pageYOffset + this.offsetValue + 10;
    for (let i = this.sectionTargets.length - 1; i >= 0; i--) {
      const section = this.sectionTargets[i];
      const sectionTop = section.offsetTop;
      if (scrollPosition >= sectionTop) {
        this.setActiveTab(section.id);
        break;
      }
    }
  }
};

// app/javascript/controllers/package_switcher_controller.ts
var package_switcher_controller_default = class extends Controller {
  static {
    this.targets = ["card", "details"];
  }
  static {
    this.values = {
      selectedId: Number
    };
  }
  connect() {
    console.log("PackageSwitcher connected");
    window.addEventListener("booking-modal:package-changed", (event) => {
      const customEvent = event;
      const packageId = customEvent.detail.packageId;
      if (packageId && packageId !== this.selectedIdValue) {
        this.syncPackageSelection(packageId);
      }
    });
    window.addEventListener("booking-modal:request-sync", () => {
      const syncEvent = new CustomEvent("package:selected", {
        detail: { packageId: this.selectedIdValue }
      });
      window.dispatchEvent(syncEvent);
    });
  }
  selectPackage(event) {
    const card = event.currentTarget;
    const packageId = parseInt(card.dataset.packageId || "0");
    if (packageId === this.selectedIdValue) {
      return;
    }
    this.selectedIdValue = packageId;
    this.updatePackageUI(packageId);
    const customEvent = new CustomEvent("package:selected", {
      detail: { packageId }
    });
    window.dispatchEvent(customEvent);
  }
  syncPackageSelection(packageId) {
    this.selectedIdValue = packageId;
    this.updatePackageUI(packageId);
  }
  updatePackageUI(packageId) {
    this.cardTargets.forEach((cardEl) => {
      const cardPackageId = parseInt(cardEl.dataset.packageId || "0");
      if (cardPackageId === packageId) {
        cardEl.classList.remove("bg-white", "border-gray-100", "border");
        cardEl.classList.add("bg-[#FFF9E6]", "border-2", "border-[#FFD700]");
        const checkmark = cardEl.querySelector('svg[viewBox="0 0 20 20"]');
        if (checkmark) {
          checkmark.classList.remove("hidden");
        }
      } else {
        cardEl.classList.remove("bg-[#FFF9E6]", "border-2", "border-[#FFD700]");
        cardEl.classList.add("bg-white", "border", "border-gray-100");
        const checkmark = cardEl.querySelector('svg[viewBox="0 0 20 20"]');
        if (checkmark) {
          checkmark.classList.add("hidden");
        }
      }
    });
    const detailsContainer = this.detailsTarget;
    const allDetails = detailsContainer.querySelectorAll("[data-package-id]");
    allDetails.forEach((detail) => {
      const detailElement = detail;
      const detailPackageId = parseInt(detailElement.dataset.packageId || "0");
      if (detailPackageId === packageId) {
        detailElement.classList.remove("hidden");
      } else {
        detailElement.classList.add("hidden");
      }
    });
  }
};

// app/javascript/controllers/booking_modal_controller.ts
var booking_modal_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedPackageId = null;
    this.selectedDate = null;
    this.adultQuantity = 1;
    this.childQuantity = 0;
  }
  static {
    this.targets = [
      "modal",
      "packageBtn",
      "monthTab",
      "calendar",
      "dateBtn",
      "adultCount",
      "childCount"
    ];
  }
  connect() {
    console.log("Booking modal controller connected");
    window.addEventListener("package:selected", (event) => {
      const customEvent = event;
      const packageId = customEvent.detail.packageId;
      if (packageId && packageId !== this.selectedPackageId) {
        this.syncPackageSelection(packageId);
      }
    });
    window.addEventListener("bottom-bar:open-modal", () => {
      this.open();
    });
  }
  open() {
    const event = new CustomEvent("booking-modal:request-sync");
    window.dispatchEvent(event);
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  close() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  selectPackage(event) {
    const btn = event.currentTarget;
    const packageId = parseInt(btn.dataset.packageId || "0");
    this.selectedPackageId = packageId;
    this.updatePackageButtons(packageId);
    const customEvent = new CustomEvent("booking-modal:package-changed", {
      detail: { packageId }
    });
    window.dispatchEvent(customEvent);
  }
  syncPackageSelection(packageId) {
    this.selectedPackageId = packageId;
    this.updatePackageButtons(packageId);
  }
  updatePackageButtons(packageId) {
    this.packageBtnTargets.forEach((btnEl) => {
      const btnPackageId = parseInt(btnEl.dataset.packageId || "0");
      if (btnPackageId === packageId) {
        btnEl.classList.remove("bg-white", "border-gray-200");
        btnEl.classList.add("bg-[#FFF9E6]", "border-[#FFD700]");
        if (!btnEl.querySelector("svg")) {
          const checkmark = document.createElementNS("http://www.w3.org/2000/svg", "svg");
          checkmark.classList.add("absolute", "top-2", "right-2", "w-5", "h-5");
          checkmark.style.color = "#FFD700";
          checkmark.setAttribute("fill", "currentColor");
          checkmark.setAttribute("viewBox", "0 0 20 20");
          const pathD = "M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z";
          checkmark.innerHTML = `<path fill-rule="evenodd" d="${pathD}" clip-rule="evenodd"></path>`;
          btnEl.appendChild(checkmark);
        }
      } else {
        btnEl.classList.remove("bg-[#FFF9E6]", "border-[#FFD700]");
        btnEl.classList.add("bg-white", "border-gray-200");
        const checkmark = btnEl.querySelector("svg");
        if (checkmark) {
          checkmark.remove();
        }
      }
    });
  }
  selectMonth(event) {
    const btn = event.currentTarget;
    const month = btn.dataset.month;
    this.monthTabTargets.forEach((tabEl) => {
      if (tabEl.dataset.month === month) {
        tabEl.classList.remove("text-foreground-muted");
        tabEl.classList.add("text-red-500", "border-b-2", "border-red-500");
      } else {
        tabEl.classList.remove("text-red-500", "border-b-2", "border-red-500");
        tabEl.classList.add("text-foreground-muted");
      }
    });
  }
  selectDate(event) {
    const btn = event.currentTarget;
    const date = btn.dataset.date;
    if (!date || btn.disabled) return;
    this.selectedDate = date;
    this.dateBtnTargets.forEach((dateBtn) => {
      if (dateBtn.dataset.date === date) {
        dateBtn.style.background = "#FFD700";
        dateBtn.style.color = "#000";
      } else {
        dateBtn.style.background = "";
        dateBtn.style.color = "";
      }
    });
  }
  increaseAdult() {
    this.adultQuantity++;
    this.adultCountTarget.textContent = this.adultQuantity.toString();
  }
  decreaseAdult() {
    if (this.adultQuantity > 1) {
      this.adultQuantity--;
      this.adultCountTarget.textContent = this.adultQuantity.toString();
    }
  }
  increaseChild() {
    this.childQuantity++;
    this.childCountTarget.textContent = this.childQuantity.toString();
  }
  decreaseChild() {
    if (this.childQuantity > 0) {
      this.childQuantity--;
      this.childCountTarget.textContent = this.childQuantity.toString();
    }
  }
  addToCart() {
    if (!this.validateSelection()) {
      return;
    }
    console.log("Adding to cart:", {
      packageId: this.selectedPackageId,
      date: this.selectedDate,
      adults: this.adultQuantity,
      children: this.childQuantity
    });
    alert("\u5DF2\u52A0\u5165\u8D2D\u7269\u8F66");
    this.close();
  }
  buyNow() {
    if (!this.validateSelection()) {
      return;
    }
    const productId = window.location.pathname.split("/").pop();
    const params = new URLSearchParams({
      product_id: productId || "",
      package_id: (this.selectedPackageId || "").toString(),
      travel_date: this.selectedDate || "",
      adult_count: this.adultQuantity.toString(),
      child_count: this.childQuantity.toString()
    });
    window.location.href = `/tour_group_bookings/new?${params.toString()}`;
  }
  validateSelection() {
    if (!this.selectedDate) {
      alert("\u8BF7\u9009\u62E9\u51FA\u884C\u65E5\u671F");
      return false;
    }
    if (this.adultQuantity < 1) {
      alert("\u81F3\u5C11\u9700\u89811\u4F4D\u6210\u4EBA");
      return false;
    }
    return true;
  }
};

// app/javascript/controllers/bottom_bar_controller.ts
var bottom_bar_controller_default = class extends Controller {
  connect() {
    console.log("Bottom bar controller connected");
  }
  openModal() {
    const event = new CustomEvent("bottom-bar:open-modal");
    window.dispatchEvent(event);
  }
};

// app/javascript/controllers/insurance_selector_controller.ts
var insurance_selector_controller_default = class extends Controller {
  static {
    this.targets = ["radio", "totalPrice"];
  }
  static {
    this.values = {
      basePrice: Number,
      adultCount: Number,
      childCount: Number
    };
  }
  connect() {
    console.log("InsuranceSelector connected");
  }
  disconnect() {
    console.log("InsuranceSelector disconnected");
  }
  updatePrice() {
    const selectedRadio = this.radioTargets.find((radio) => radio.checked);
    if (!selectedRadio) return;
    const insuranceType = selectedRadio.value;
    const totalPeople = this.adultCountValue + this.childCountValue;
    let insurancePrice = 0;
    if (insuranceType === "standard") {
      insurancePrice = 15 * totalPeople;
    } else if (insuranceType === "premium") {
      insurancePrice = 35 * totalPeople;
    }
    const totalPrice = this.basePriceValue + insurancePrice;
    this.totalPriceTarget.textContent = `\xA5${Math.round(totalPrice)}`;
  }
};

// app/javascript/controllers/tour_traveler_selector_controller.ts
var tour_traveler_selector_controller_default = class extends Controller {
  static {
    this.targets = [
      "modal",
      "travelerNameInput",
      "travelerIdInput"
    ];
  }
  static {
    this.values = {
      selectedPassengerId: String,
      selectedPassengerName: String,
      selectedPassengerIdNumber: String,
      travelerIndex: Number
    };
  }
  connect() {
    console.log("TourTravelerSelector connected");
  }
  disconnect() {
    console.log("TourTravelerSelector disconnected");
  }
  // Open modal for specific traveler
  openModal(event) {
    const target = event.currentTarget;
    const travelerIndex = parseInt(target.dataset.travelerIndex || "0");
    console.log("Opening traveler selector modal for index:", travelerIndex);
    this.travelerIndexValue = travelerIndex;
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // Close modal
  closeModal() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  // Select a passenger from the list
  selectPassenger(event) {
    const target = event.currentTarget;
    const passengerId = target.dataset.passengerId || "";
    const passengerName = target.dataset.passengerName || "";
    const passengerIdNumber = target.dataset.passengerIdNumber || "";
    console.log("Selected passenger:", { passengerId, passengerName, passengerIdNumber, travelerIndex: this.travelerIndexValue });
    this.selectedPassengerIdValue = passengerId;
    this.selectedPassengerNameValue = passengerName;
    this.selectedPassengerIdNumberValue = passengerIdNumber;
    if (this.travelerNameInputTargets[this.travelerIndexValue]) {
      this.travelerNameInputTargets[this.travelerIndexValue].value = passengerName;
    }
    if (this.travelerIdInputTargets[this.travelerIndexValue]) {
      this.travelerIdInputTargets[this.travelerIndexValue].value = passengerIdNumber;
    }
    this.closeModal();
  }
  // Stop propagation for inner clicks
  stopPropagation(event) {
    event.stopPropagation();
  }
};

// app/javascript/controllers/special_flights_form_controller.ts
var special_flights_form_controller_default = class extends Controller {
  connect() {
    console.log("SpecialFlightsForm controller connected");
  }
  handleSubmit(event) {
    event.preventDefault();
    const form = this.element;
    const formData = new FormData(form);
    const destinationCities = formData.get("destination_cities");
    const departureCity = formData.get("departure_city");
    const date = formData.get("date");
    const sortBy = formData.get("sort_by");
    const tripType = formData.get("trip_type");
    const cities = destinationCities.split(",").map((city) => city.trim()).filter((city) => city !== "");
    const isMultiCity = cities.length > 1;
    let url;
    const params = new URLSearchParams();
    if (isMultiCity) {
      url = "/flights/combinations";
      params.append("departure_city", departureCity);
      params.append("destination_cities", destinationCities);
      params.append("date", date);
      params.append("sort_by", sortBy);
      params.append("trip_type", tripType);
    } else {
      url = "/flights/search";
      params.append("departure_city", departureCity);
      params.append("destination_city", cities[0] || destinationCities);
      params.append("date", date);
      params.append("sort_by", sortBy);
      params.append("trip_type", tripType);
    }
    const fullUrl = `${url}?${params.toString()}`;
    console.log("Redirecting to:", fullUrl);
    window.location.href = fullUrl;
  }
};

// app/javascript/controllers/train_booking_controller.ts
var train_booking_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.basePrice = 0;
    this.insurancePrice = 0;
    this.currentCarriage = "";
    this.selectedSeats = /* @__PURE__ */ new Set();
    this.maxSeats = 1;
  }
  static {
    this.targets = [
      "totalPrice",
      "selectedCarriage",
      "carriageButton",
      "seatButton",
      "selectedSeatCount"
    ];
  }
  connect() {
    const priceField = document.getElementById("booking_total_price");
    if (priceField) {
      this.basePrice = parseFloat(priceField.value || "0");
    }
    this.updateTotalPrice();
  }
  selectPassenger(event) {
    const radio = event.currentTarget;
    const passengerName = radio.dataset.passengerName || "";
    const idNumber = radio.dataset.idNumber || "";
    const phone = radio.dataset.phone || "";
    const nameField = document.getElementById("booking_passenger_name");
    const idField = document.getElementById("booking_passenger_id_number");
    const phoneField = document.getElementById("booking_contact_phone");
    if (nameField) nameField.value = passengerName;
    if (idField) idField.value = idNumber;
    if (phoneField) phoneField.value = phone;
  }
  selectCarriage(event) {
    const button = event.currentTarget;
    const carriage = button.dataset.carriage || "";
    if (this.currentCarriage === carriage) {
      button.classList.remove("bg-orange-500", "text-white", "border-orange-500");
      button.classList.add("bg-white", "text-gray-700", "border-gray-300");
      this.selectedCarriageTarget.value = "";
      this.currentCarriage = "";
    } else {
      this.carriageButtonTargets.forEach((btn) => {
        btn.classList.remove("bg-orange-500", "text-white", "border-orange-500");
        btn.classList.add("bg-white", "text-gray-700", "border-gray-300");
      });
      button.classList.remove("bg-white", "text-gray-700", "border-gray-300");
      button.classList.add("bg-orange-500", "text-white", "border-orange-500");
      this.selectedCarriageTarget.value = carriage;
      this.currentCarriage = carriage;
    }
  }
  selectSeat(event) {
    const button = event.currentTarget;
    const seatLetter = button.dataset.seatLetter || "";
    if (!seatLetter) return;
    if (this.selectedSeats.has(seatLetter)) {
      this.selectedSeats.delete(seatLetter);
      button.classList.remove("bg-orange-500", "text-white", "border-orange-500");
      button.classList.add("bg-white", "text-gray-700", "border-gray-300");
    } else {
      if (this.selectedSeats.size >= this.maxSeats) {
        window.showToast(`\u6700\u591A\u53EA\u80FD\u9009\u62E9${this.maxSeats}\u4E2A\u5EA7\u4F4D`);
        return;
      }
      this.selectedSeats.add(seatLetter);
      button.classList.remove("bg-white", "text-gray-700", "border-gray-300", "bg-gray-100", "text-gray-400");
      button.classList.add("bg-orange-500", "text-white", "border-orange-500");
    }
    this.updateSelectedSeatCount();
  }
  updateSelectedSeatCount() {
    if (this.selectedSeatCountTarget) {
      this.selectedSeatCountTarget.textContent = `${this.selectedSeats.size}/${this.maxSeats}`;
    }
  }
  toggleNearDoor(event) {
    const checkbox = event.currentTarget;
    if (checkbox.checked) {
      console.log("Near door option selected");
    }
  }
  handleNormalBooking() {
    const form = this.element.querySelector("form");
    if (!form) return;
    const passengerRadio = document.querySelector('input[name="passenger"]:checked');
    if (!passengerRadio) {
      window.showToast("\u8BF7\u9009\u62E9\u4E58\u8F66\u4EBA");
      return;
    }
    const phoneField = document.getElementById("booking_contact_phone");
    if (!phoneField || !phoneField.value.trim()) {
      window.showToast("\u8BF7\u8F93\u5165\u8054\u7CFB\u624B\u673A");
      return;
    }
    const acceptTermsField = document.getElementById("booking_accept_terms");
    if (acceptTermsField) {
      acceptTermsField.value = "1";
    }
    HTMLFormElement.prototype.submit.call(form);
  }
  selectInsuranceOption(event) {
    const radio = event.currentTarget;
    const insuranceType = radio.value;
    const insurancePrice = parseFloat(radio.dataset.price || "0");
    const insuranceTypeField = document.getElementById("booking_insurance_type");
    const insurancePriceField = document.getElementById("booking_insurance_price");
    if (insuranceTypeField) insuranceTypeField.value = insuranceType;
    if (insurancePriceField) insurancePriceField.value = insurancePrice.toString();
    this.insurancePrice = insurancePrice;
    this.updateTotalPrice();
  }
  handleSubmit(event) {
    event.preventDefault();
    const passengerRadio = document.querySelector('input[name="passenger"]:checked');
    if (!passengerRadio) {
      alert("\u8BF7\u9009\u62E9\u4E58\u8F66\u4EBA");
      return;
    }
    const phoneField = document.getElementById("booking_contact_phone");
    if (!phoneField || !phoneField.value.trim()) {
      alert("\u8BF7\u8F93\u5165\u8054\u7CFB\u624B\u673A");
      return;
    }
    const visualCheckbox = document.getElementById("visual_accept_terms");
    if (!visualCheckbox || !visualCheckbox.checked) {
      this.showTermsModal();
      return;
    }
    const insuranceTypeField = document.getElementById("booking_insurance_type");
    const insuranceType = insuranceTypeField?.value || "none";
    if (insuranceType === "none") {
      this.showInsuranceModal();
    } else {
      this.submitBooking();
    }
  }
  showTermsModal() {
    const modal = document.createElement("div");
    modal.className = "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50";
    modal.innerHTML = `
      <div class="bg-white rounded-lg p-6 max-w-md mx-4">
        <h3 class="text-xl font-bold mb-4">\u7528\u6237\u534F\u8BAE\u548C\u9690\u79C1\u653F\u7B56</h3>
        <div class="max-h-60 overflow-y-auto mb-4 text-sm text-gray-600">
          <p class="mb-2">\u6B22\u8FCE\u4F7F\u7528\u6211\u4EEC\u7684\u670D\u52A1\u3002\u8BF7\u4ED4\u7EC6\u9605\u8BFB\u4EE5\u4E0B\u6761\u6B3E\uFF1A</p>
          <p class="mb-2">1. \u670D\u52A1\u6761\u6B3E...</p>
          <p class="mb-2">2. \u9690\u79C1\u653F\u7B56...</p>
          <p class="mb-2">3. \u9000\u6539\u89C4\u5219...</p>
        </div>
        <div class="flex space-x-3">
          <button class="flex-1 py-3 border border-gray-300 rounded" data-action="decline">
            \u4E0D\u540C\u610F
          </button>
          <button class="flex-1 py-3 bg-orange-500 text-white rounded" data-action="accept">
            \u540C\u610F
          </button>
        </div>
      </div>
    `;
    const declineBtn = modal.querySelector('[data-action="decline"]');
    const acceptBtn = modal.querySelector('[data-action="accept"]');
    declineBtn?.addEventListener("click", () => {
      document.body.removeChild(modal);
    });
    acceptBtn?.addEventListener("click", () => {
      this.acceptTerms();
      document.body.removeChild(modal);
    });
    document.body.appendChild(modal);
  }
  acceptTerms() {
    const visualCheckbox = document.getElementById("visual_accept_terms");
    const hiddenField = document.getElementById("booking_accept_terms");
    if (visualCheckbox) visualCheckbox.checked = true;
    if (hiddenField) hiddenField.value = "1";
    const insuranceTypeField = document.getElementById("booking_insurance_type");
    const insuranceType = insuranceTypeField?.value || "none";
    if (insuranceType === "none") {
      this.showInsuranceModal();
    } else {
      this.submitBooking();
    }
  }
  showInsuranceModal() {
    const existingModal = document.getElementById("insurance_recommendation_modal");
    if (existingModal) {
      existingModal.classList.remove("hidden");
      return;
    }
    const modal = document.createElement("div");
    modal.id = "insurance_recommendation_modal";
    modal.className = "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50";
    modal.innerHTML = `
      <div class="bg-white rounded-lg p-6 max-w-md mx-4">
        <h3 class="text-xl font-bold mb-4">\u5EFA\u8BAE\u8D2D\u4E70\u4FDD\u9669</h3>
        <p class="text-gray-600 mb-6">\u4E3A\u4E86\u60A8\u7684\u51FA\u884C\u5B89\u5168\uFF0C\u5EFA\u8BAE\u8D2D\u4E70\u51FA\u884C\u4FDD\u9669</p>
        
        <div class="space-y-3 mb-6">
          <label class="flex items-center justify-between p-3 border rounded cursor-pointer">
            <div>
              <div class="font-medium">\u6807\u51C6\u4FDD\u9669</div>
              <div class="text-sm text-gray-500">\xA530</div>
            </div>
            <input type="radio" name="insurance_modal" value="standard" data-price="30" class="w-5 h-5" />
          </label>
          
          <label class="flex items-center justify-between p-3 border rounded cursor-pointer">
            <div>
              <div class="font-medium">\u9AD8\u7EA7\u4FDD\u9669</div>
              <div class="text-sm text-gray-500">\xA550</div>
            </div>
            <input type="radio" name="insurance_modal" value="premium" data-price="50" class="w-5 h-5" />
          </label>
        </div>
        
        <div class="flex space-x-3">
          <button class="flex-1 py-3 border border-gray-300 rounded" data-action="skip-insurance">
            \u653E\u5F03\u4FDD\u9669
          </button>
          <button class="flex-1 py-3 bg-orange-500 text-white rounded" data-action="select-insurance">
            \u786E\u8BA4\u9009\u62E9
          </button>
        </div>
      </div>
    `;
    const skipBtn = modal.querySelector('[data-action="skip-insurance"]');
    const selectBtn = modal.querySelector('[data-action="select-insurance"]');
    skipBtn?.addEventListener("click", () => {
      document.body.removeChild(modal);
      this.submitBooking();
    });
    selectBtn?.addEventListener("click", () => {
      const selectedRadio = modal.querySelector('input[name="insurance_modal"]:checked');
      if (selectedRadio) {
        const insuranceType = selectedRadio.value;
        const insurancePrice = parseFloat(selectedRadio.dataset.price || "0");
        const insuranceTypeField = document.getElementById("booking_insurance_type");
        const insurancePriceField = document.getElementById("booking_insurance_price");
        if (insuranceTypeField) insuranceTypeField.value = insuranceType;
        if (insurancePriceField) insurancePriceField.value = insurancePrice.toString();
        this.insurancePrice = insurancePrice;
        this.updateTotalPrice();
      }
      document.body.removeChild(modal);
      this.submitBooking();
    });
    document.body.appendChild(modal);
  }
  submitBooking() {
    const form = this.element.querySelector("form");
    if (form) {
      form.submit();
    }
  }
  updateTotalPrice() {
    const total = this.basePrice + this.insurancePrice;
    if (this.totalPriceTarget) {
      this.totalPriceTarget.textContent = `\xA5${Math.round(total)}`;
    }
  }
};

// app/javascript/controllers/train_booking_lock_controller.ts
var train_booking_lock_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.lockingInterval = null;
    this.currentProgress = 0;
  }
  static {
    this.targets = [
      "statusTitle",
      "statusMessage",
      "progressPercent",
      "progressCircle",
      "seatIcon",
      "seatDisplay",
      "seatBadge",
      "paymentBar",
      "cancelBar"
    ];
  }
  connect() {
    this.startLockingAnimation();
  }
  disconnect() {
    if (this.lockingInterval) {
      clearInterval(this.lockingInterval);
    }
  }
  startLockingAnimation() {
    const totalDuration = 5e3;
    const updateInterval = 50;
    const totalSteps = totalDuration / updateInterval;
    const progressStep = 100 / totalSteps;
    this.lockingInterval = window.setInterval(() => {
      this.currentProgress += progressStep;
      if (this.currentProgress >= 100) {
        this.currentProgress = 100;
        this.completeLocking();
        if (this.lockingInterval) {
          clearInterval(this.lockingInterval);
        }
      }
      this.updateProgress(this.currentProgress);
    }, updateInterval);
  }
  updateProgress(progress) {
    if (this.hasProgressPercentTarget) {
      this.progressPercentTarget.textContent = Math.floor(progress).toString();
    }
    if (this.hasProgressCircleTarget) {
      const circumference = 534;
      const offset = circumference - progress / 100 * circumference;
      this.progressCircleTarget.style.strokeDashoffset = offset.toString();
    }
    if (this.hasSeatIconTarget) {
      if (progress % 20 < 2) {
        this.seatIconTarget.style.transform = "scale(1.2)";
        setTimeout(() => {
          if (this.hasSeatIconTarget) {
            this.seatIconTarget.style.transform = "scale(1)";
          }
        }, 200);
      }
    }
  }
  completeLocking() {
    if (this.hasStatusTitleTarget) {
      this.statusTitleTarget.textContent = "\u5360\u5EA7\u6210\u529F";
    }
    if (this.hasStatusMessageTarget) {
      const expiryTime = /* @__PURE__ */ new Date();
      expiryTime.setMinutes(expiryTime.getMinutes() + 15);
      const hours = expiryTime.getHours().toString().padStart(2, "0");
      const minutes = expiryTime.getMinutes().toString().padStart(2, "0");
      const timeString = `${hours}:${minutes}`;
      this.statusMessageTarget.innerHTML = `\u8BF7\u5728<span class="text-red-600">${timeString}</span>\u5185\u5B8C\u6210\u652F\u4ED8\uFF0C\u8D85\u65F6\u8BA2\u5355\u5C06\u5173\u95ED`;
    }
    if (this.hasSeatDisplayTarget) {
      this.seatDisplayTarget.style.display = "inline";
    }
    if (this.hasSeatBadgeTarget) {
      this.seatBadgeTarget.style.display = "inline-block";
    }
    if (this.hasSeatIconTarget) {
      this.seatIconTarget.textContent = "\u{1FA91}";
      this.seatIconTarget.style.transform = "scale(1.3)";
      setTimeout(() => {
        if (this.hasSeatIconTarget) {
          this.seatIconTarget.style.transform = "scale(1)";
        }
      }, 300);
    }
    if (this.hasCancelBarTarget) {
      this.cancelBarTarget.style.display = "none";
    }
    if (this.hasPaymentBarTarget) {
      this.paymentBarTarget.style.display = "block";
    }
  }
};

// app/javascript/controllers/train_seat_selector_controller.ts
var train_seat_selector_controller_default = class extends Controller {
  static {
    this.targets = ["seatTab", "optionsContainer"];
  }
  static {
    this.values = {
      trainId: String,
      selectedSeatType: { type: String, default: "second_class" }
    };
  }
  connect() {
    console.log("TrainSeatSelector connected");
    if (this.seatTabTargets.length > 0) {
      this.selectSeat(this.seatTabTargets[0]);
    }
  }
  // 
  selectSeat(event) {
    const target = event instanceof Event ? event.currentTarget : event;
    const seatType = target.dataset.seatType;
    const seatPrice = parseFloat(target.dataset.seatPrice || "0");
    if (!seatType) return;
    this.seatTabTargets.forEach((tab) => {
      tab.classList.remove("bg-white", "shadow");
    });
    target.classList.add("bg-white", "shadow");
    this.seatTabTargets.forEach((tab) => {
      const arrow = tab.querySelector(".seat-arrow");
      if (arrow) {
        if (tab === target) {
          arrow.classList.remove("hidden");
        } else {
          arrow.classList.add("hidden");
        }
      }
    });
    this.selectedSeatTypeValue = seatType;
    this.updateBookingOptions(seatPrice);
  }
  // 
  updateBookingOptions(basePrice) {
    const links = this.optionsContainerTarget.querySelectorAll('a[href*="train_bookings/new"]');
    links.forEach((link) => {
      if (link instanceof HTMLAnchorElement) {
        const url = new URL(link.href, window.location.origin);
        url.searchParams.set("seat_type", this.selectedSeatTypeValue);
        link.href = url.toString();
      }
    });
    const priceElements = this.optionsContainerTarget.querySelectorAll(".booking-option-price");
    priceElements.forEach((priceEl) => {
      if (priceEl instanceof HTMLElement) {
        const extraFee = parseFloat(priceEl.dataset.extraFee || "0");
        const totalPrice = Math.floor(basePrice + extraFee);
        priceEl.textContent = totalPrice.toString();
      }
    });
  }
};

// app/javascript/controllers/tour_group_filter_controller.ts
var tour_group_filter_controller_default = class extends Controller {
  static {
    this.targets = [
      "destinationInput",
      "durationInput",
      "groupSizeInput",
      "destinationButton",
      "durationButton",
      "groupSizeButton",
      "departureDisplay"
    ];
  }
  static {
    this.values = {
      destination: String,
      duration: String,
      groupSize: String
    };
  }
  connect() {
    this.element.addEventListener("city-selector:city-changed", this.handleCityChanged.bind(this));
    if (this.groupSizeValue) {
      this.autoSelectGroupSize(this.groupSizeValue);
    }
  }
  disconnect() {
    this.element.removeEventListener("city-selector:city-changed", this.handleCityChanged.bind(this));
  }
  // Handle city change from city-selector modal
  handleCityChanged(event) {
    const customEvent = event;
    const { cityName } = customEvent.detail;
    console.log("TourGroupFilter: City changed to", cityName);
    this.destinationValue = cityName;
    this.destinationInputTarget.value = cityName;
    this.updateHotDestinationButtons(cityName);
  }
  // Update hot destination buttons based on selected city
  updateHotDestinationButtons(cityName) {
    let cityInHotList = false;
    this.destinationButtonTargets.forEach((btn) => {
      if (btn.dataset.destination === cityName) {
        btn.classList.remove("bg-gray-50");
        btn.classList.add("bg-[#FFE8CC]");
        cityInHotList = true;
      } else {
        btn.classList.add("bg-gray-50");
        btn.classList.remove("bg-[#FFE8CC]");
      }
    });
    console.log(`City "${cityName}" ${cityInHotList ? "is" : "is not"} in hot destination list`);
  }
  // 
  selectDestination(event) {
    const button = event.currentTarget;
    const destination = button.dataset.destination || "";
    this.destinationValue = destination;
    this.destinationInputTarget.value = destination;
    this.departureDisplayTarget.textContent = destination;
    this.updateHotDestinationButtons(destination);
  }
  // 
  selectDuration(event) {
    const button = event.currentTarget;
    const duration = button.dataset.duration || "";
    this.durationValue = duration;
    this.durationInputTarget.value = duration;
    this.durationButtonTargets.forEach((btn) => {
      if (btn.dataset.duration === duration) {
        btn.classList.remove("bg-gray-50");
        btn.classList.add("bg-[#FFE8CC]");
      } else {
        btn.classList.add("bg-gray-50");
        btn.classList.remove("bg-[#FFE8CC]");
      }
    });
  }
  // 
  selectGroupSize(event) {
    const button = event.currentTarget;
    const groupSize = button.dataset.groupSize || "";
    this.groupSizeValue = groupSize;
    this.groupSizeInputTarget.value = groupSize;
    this.updateGroupSizeButtons(groupSize);
  }
  // Auto-select group size on page load
  autoSelectGroupSize(groupSize) {
    if (this.groupSizeInputTarget) {
      this.groupSizeInputTarget.value = groupSize;
    }
    this.updateGroupSizeButtons(groupSize);
  }
  // Update group size button styles
  updateGroupSizeButtons(groupSize) {
    this.groupSizeButtonTargets.forEach((btn) => {
      const radio = btn.querySelector(".radio-circle");
      if (btn.dataset.groupSize === groupSize) {
        radio?.classList.add("bg-[#FFD700]");
        radio?.classList.remove("bg-transparent");
      } else {
        radio?.classList.add("bg-transparent");
        radio?.classList.remove("bg-[#FFD700]");
      }
    });
  }
};

// app/javascript/controllers/car_rental_tabs_controller.ts
var car_rental_tabs_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.isDomestic = true;
    this.isSwapEnabled = false;
  }
  static {
    this.targets = ["domesticButton", "internationalButton", "swapToggle", "swapIndicator"];
  }
  connect() {
    this.updateDomesticView();
  }
  selectDomestic() {
    this.isDomestic = true;
    this.updateDomesticView();
  }
  selectInternational() {
    this.isDomestic = false;
    this.updateInternationalView();
  }
  toggleSwap() {
    this.isSwapEnabled = !this.isSwapEnabled;
    this.updateSwapToggle();
  }
  updateDomesticView() {
    this.domesticButtonTarget.classList.add("bg-white", "shadow-sm", "font-bold");
    this.domesticButtonTarget.classList.remove("text-gray-500");
    this.internationalButtonTarget.classList.remove("bg-white", "shadow-sm", "font-bold");
    this.internationalButtonTarget.classList.add("text-gray-500");
  }
  updateInternationalView() {
    this.internationalButtonTarget.classList.add("bg-white", "shadow-sm", "font-bold");
    this.internationalButtonTarget.classList.remove("text-gray-500");
    this.domesticButtonTarget.classList.remove("bg-white", "shadow-sm", "font-bold");
    this.domesticButtonTarget.classList.add("text-gray-500");
  }
  updateSwapToggle() {
    if (this.isSwapEnabled) {
      this.swapIndicatorTarget.classList.remove("left-1");
      this.swapIndicatorTarget.classList.add("left-5");
      this.swapToggleTarget.classList.remove("bg-gray-200");
      this.swapToggleTarget.classList.add("bg-blue-500");
    } else {
      this.swapIndicatorTarget.classList.add("left-1");
      this.swapIndicatorTarget.classList.remove("left-5");
      this.swapToggleTarget.classList.add("bg-gray-200");
      this.swapToggleTarget.classList.remove("bg-blue-500");
    }
  }
};

// app/javascript/controllers/hotel_package_search_controller.ts
var hotel_package_search_controller_default = class extends Controller {
  static {
    this.targets = [
      // Add your targets here, e.g.:
      // "messageInput", "messagesContainer", "sendButton"
    ];
  }
  static {
    this.values = {
      // Add your values here, e.g.:
      // roomId: String,
      // userId: String
    };
  }
  // Declare your targets and values
  // declare readonly messageInputTarget: HTMLInputElement
  // declare readonly messagesContainerTarget: HTMLElement
  // declare readonly roomIdValue: string
  connect() {
    console.log("HotelPackageSearch connected");
  }
  disconnect() {
    console.log("HotelPackageSearch disconnected");
  }
  // Add your action methods here
  // Example:
  // click(): void {
  //   console.log("Button clicked")
  // }
  // FORMS: Turbo + Turbo Streams handle everything automatically
  // - Forms submit via AJAX (Turbo Drive)
  // - Server responds with format.turbo_stream
  // - Turbo Streams update DOM automatically
  // - NO manual form handling needed in Stimulus
  //
  // Use Stimulus for:
  // - UI interactions (toggle, show/hide)
  // - Input validation/formatting
  // - Dynamic form fields
};

// app/javascript/controllers/hotel_package_order_controller.ts
var hotel_package_order_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.pendingFormData = null;
    this.allowSubmission = false;
  }
  static {
    this.targets = [
      "quantityInput",
      "totalPrice",
      "bottomPrice",
      "decreaseBtn",
      "increaseBtn",
      "stockupTab",
      "instantTab",
      "bookingTypeInput",
      "contactNameInput",
      "contactPhoneInput",
      "confirmModal",
      "confirmQuantity",
      "confirmContact",
      "confirmBookingType",
      "confirmTotalPrice"
    ];
  }
  connect() {
    console.log("HotelPackageOrder connected");
    this.updateButtonStates();
  }
  increaseQuantity(event) {
    event.preventDefault();
    const currentQuantity = parseInt(this.quantityInputTarget.value) || 1;
    const newQuantity = currentQuantity + 1;
    if (newQuantity <= 99) {
      this.quantityInputTarget.value = newQuantity.toString();
      this.updatePrice();
      this.updateButtonStates();
    }
  }
  decreaseQuantity(event) {
    event.preventDefault();
    const currentQuantity = parseInt(this.quantityInputTarget.value) || 1;
    const newQuantity = currentQuantity - 1;
    if (newQuantity >= 1) {
      this.quantityInputTarget.value = newQuantity.toString();
      this.updatePrice();
      this.updateButtonStates();
    }
  }
  updatePrice() {
    const quantity = parseInt(this.quantityInputTarget.value) || 1;
    const unitPrice = parseFloat(this.increaseBtnTarget.dataset.price || "0");
    const totalPrice = quantity * unitPrice;
    this.totalPriceTarget.textContent = `\xA5${totalPrice.toFixed(2)}`;
    this.bottomPriceTarget.textContent = Math.round(totalPrice).toString();
    this.updatePaymentConfirmationAmount(Math.round(totalPrice));
  }
  updateButtonStates() {
    const quantity = parseInt(this.quantityInputTarget.value) || 1;
    if (quantity <= 1) {
      this.decreaseBtnTarget.classList.remove("border-blue-500", "bg-blue-50", "text-blue-600");
      this.decreaseBtnTarget.classList.add("border-gray-200", "text-gray-300");
      this.decreaseBtnTarget.disabled = true;
    } else {
      this.decreaseBtnTarget.classList.remove("border-gray-200", "text-gray-300");
      this.decreaseBtnTarget.classList.add("border-blue-500", "bg-blue-50", "text-blue-600");
      this.decreaseBtnTarget.disabled = false;
    }
  }
  selectTab(event) {
    event.preventDefault();
    const target = event.currentTarget;
    const tabType = target.dataset.tab;
    if (tabType === "stockup") {
      this.stockupTabTarget.classList.remove("bg-[#FCEEA8]", "bg-opacity-60", "text-gray-700");
      this.stockupTabTarget.classList.add("bg-[#F5F8FA]", "z-10");
      this.stockupTabTarget.querySelector("span:first-child")?.classList.remove("font-medium");
      this.stockupTabTarget.querySelector("span:first-child")?.classList.add("font-bold", "text-black");
      this.instantTabTarget.classList.remove("bg-[#F5F8FA]", "z-10");
      this.instantTabTarget.classList.add("bg-[#FCEEA8]", "bg-opacity-60", "text-gray-700");
      this.instantTabTarget.querySelector("span:first-child")?.classList.remove("font-bold", "text-black");
      this.instantTabTarget.querySelector("span:first-child")?.classList.add("font-medium");
      this.bookingTypeInputTarget.value = "stockup";
    } else if (tabType === "instant") {
      this.instantTabTarget.classList.remove("bg-[#FCEEA8]", "bg-opacity-60", "text-gray-700");
      this.instantTabTarget.classList.add("bg-[#F5F8FA]", "z-10");
      this.instantTabTarget.querySelector("span:first-child")?.classList.remove("font-medium");
      this.instantTabTarget.querySelector("span:first-child")?.classList.add("font-bold", "text-black");
      this.stockupTabTarget.classList.remove("bg-[#F5F8FA]", "z-10");
      this.stockupTabTarget.classList.add("bg-[#FCEEA8]", "bg-opacity-60", "text-gray-700");
      this.stockupTabTarget.querySelector("span:first-child")?.classList.remove("font-bold", "text-black");
      this.stockupTabTarget.querySelector("span:first-child")?.classList.add("font-medium");
      this.bookingTypeInputTarget.value = "instant";
    }
  }
  selectPassenger(event) {
    const label = event.currentTarget;
    const name = label.dataset.passengerName || "";
    const phone = label.dataset.passengerPhone || "";
    this.contactNameInputTarget.value = name;
    this.contactPhoneInputTarget.value = phone;
  }
  handleSubmit(event) {
    if (this.allowSubmission) {
      console.log("Allowing form submission");
      return;
    }
    event.preventDefault();
    if (!this.contactNameInputTarget.value || !this.contactPhoneInputTarget.value) {
      alert("\u8BF7\u9009\u62E9\u8054\u7CFB\u4EBA");
      return;
    }
    const form = this.element.querySelector("form");
    if (form) {
      this.pendingFormData = new FormData(form);
    }
    this.updateConfirmModal();
    this.showConfirmModal();
  }
  updateConfirmModal() {
    const quantity = this.quantityInputTarget.value;
    this.confirmQuantityTarget.textContent = quantity;
    const contactName = this.contactNameInputTarget.value;
    const contactPhone = this.contactPhoneInputTarget.value;
    this.confirmContactTarget.textContent = `${contactName} ${contactPhone}`;
    const bookingType = this.bookingTypeInputTarget.value;
    this.confirmBookingTypeTarget.textContent = bookingType === "stockup" ? "\u5148\u56E4\u540E\u7EA6" : "\u7ACB\u5373\u9884\u7EA6";
    const totalPrice = this.bottomPriceTarget.textContent;
    this.confirmTotalPriceTarget.textContent = totalPrice || "0";
  }
  showConfirmModal() {
    this.confirmModalTarget.classList.remove("hidden");
    const waitTime = Math.floor(Math.random() * (3e3 - 2e3 + 1)) + 2e3;
    setTimeout(() => {
      this.closeConfirmModal();
      this.showPaymentPasswordModal();
    }, waitTime);
  }
  closeConfirmModal() {
    this.confirmModalTarget.classList.add("hidden");
  }
  showPaymentPasswordModal() {
    const paymentController = this.application.getControllerForElementAndIdentifier(
      this.element,
      "payment-confirmation"
    );
    if (paymentController && typeof paymentController.showPasswordModal === "function") {
      paymentController.showPasswordModal();
      this.setupPaymentSuccessListener();
    }
  }
  setupPaymentSuccessListener() {
    const paymentController = this.application.getControllerForElementAndIdentifier(
      this.element,
      "payment-confirmation"
    );
    if (paymentController) {
      paymentController.processActualPayment = async () => {
        this.submitFormWithData();
      };
    }
  }
  submitFormWithData() {
    const form = this.element.querySelector("form");
    if (form) {
      console.log("Setting allowSubmission flag and submitting form...");
      this.allowSubmission = true;
      form.requestSubmit();
    } else {
      console.error("Form not found");
    }
  }
  updatePaymentConfirmationAmount(amount) {
    const paymentController = this.application.getControllerForElementAndIdentifier(
      this.element,
      "payment-confirmation"
    );
    if (paymentController) {
      paymentController.amountValue = amount.toString();
    }
  }
};

// app/javascript/controllers/pwa_install_controller.ts
var pwa_install_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.deferredPrompt = null;
  }
  connect() {
    window.addEventListener("beforeinstallprompt", this.handleBeforeInstallPrompt.bind(this));
    window.addEventListener("appinstalled", this.handleAppInstalled.bind(this));
    if (this.isStandalone()) {
      this.hideInstallButton();
    }
  }
  disconnect() {
    window.removeEventListener("beforeinstallprompt", this.handleBeforeInstallPrompt.bind(this));
    window.removeEventListener("appinstalled", this.handleAppInstalled.bind(this));
  }
  handleBeforeInstallPrompt(e) {
    e.preventDefault();
    this.deferredPrompt = e;
    if (this.hasInstallButtonTarget) {
      this.installButtonTarget.classList.remove("hidden");
    }
  }
  handleAppInstalled() {
    this.deferredPrompt = null;
    this.hideInstallButton();
  }
  async install() {
    if (!this.deferredPrompt) {
      return;
    }
    this.deferredPrompt.prompt();
    const { outcome } = await this.deferredPrompt.userChoice;
    if (outcome === "accepted") {
      console.log("PWA installation accepted");
    }
    this.deferredPrompt = null;
    this.hideInstallButton();
  }
  isStandalone() {
    return window.matchMedia("(display-mode: standalone)").matches || window.navigator.standalone === true;
  }
  hideInstallButton() {
    if (this.hasInstallButtonTarget) {
      this.installButtonTarget.classList.add("hidden");
    }
  }
  static {
    this.targets = ["installButton"];
  }
};

// app/javascript/controllers/bus_date_picker_controller.ts
var bus_date_picker_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedDateObj = /* @__PURE__ */ new Date();
  }
  static {
    this.targets = [
      "modal",
      "selectedDate",
      "dateInput",
      "dateButton"
    ];
  }
  static {
    this.values = {
      currentDate: String
    };
  }
  connect() {
    console.log("BusDatePicker connected");
    this.selectedDateObj = /* @__PURE__ */ new Date();
    this.currentDateValue = this.formatDate(this.selectedDateObj);
    if (this.hasSelectedDateTarget) {
      this.updateDisplayedDate();
    }
    if (this.hasDateInputTarget) {
      this.dateInputTarget.value = this.currentDateValue;
    }
    this.updatePastDates();
  }
  // Open date picker modal
  openModal() {
    if (!this.hasModalTarget) return;
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // Close date picker modal
  closeModal() {
    if (!this.hasModalTarget) return;
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  // Select a date
  selectDate(event) {
    const button = event.currentTarget;
    const dateStr = button.dataset.date || "";
    if (!dateStr) return;
    const selectedDate = /* @__PURE__ */ new Date(`${dateStr}T00:00:00`);
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    selectedDate.setHours(0, 0, 0, 0);
    if (selectedDate < today) {
      console.log("Cannot select past dates (client timezone check)");
      return;
    }
    this.selectedDateObj = selectedDate;
    this.currentDateValue = dateStr;
    if (this.hasSelectedDateTarget) {
      this.updateDisplayedDate();
    }
    if (this.hasDateInputTarget) {
      this.dateInputTarget.value = dateStr;
    }
    const currentPath = window.location.pathname;
    if (currentPath.includes("/bus_tickets/search")) {
      this.closeModal();
      this.refreshSearchResults(dateStr);
    } else {
      this.closeModal();
    }
  }
  // Refresh search results with new date (search page only)
  refreshSearchResults(dateStr) {
    const params = new URLSearchParams(window.location.search);
    params.set("date", dateStr);
    const newUrl = `${window.location.pathname}?${params.toString()}`;
    if (typeof Turbo !== "undefined") {
      Turbo.visit(newUrl);
    } else {
      window.location.href = newUrl;
    }
  }
  // Update the displayed date in the main view
  updateDisplayedDate() {
    const month = this.selectedDateObj.getMonth() + 1;
    const day = this.selectedDateObj.getDate();
    const dayName = this.getDayName(this.selectedDateObj);
    this.selectedDateTarget.innerHTML = `
      ${month}<span class="text-base mx-0.5">\u6708</span>${day}<span class="text-base ml-0.5 mr-2">\u65E5</span>
    `;
    const dayLabel = this.selectedDateTarget.nextElementSibling;
    if (dayLabel) {
      dayLabel.textContent = dayName;
    }
  }
  // Get day name in Chinese
  getDayName(date) {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    const targetDate = new Date(date);
    targetDate.setHours(0, 0, 0, 0);
    const diffTime = targetDate.getTime() - today.getTime();
    const diffDays = Math.round(diffTime / (1e3 * 60 * 60 * 24));
    if (diffDays === 0) return "\u4ECA\u5929";
    if (diffDays === 1) return "\u660E\u5929";
    if (diffDays === 2) return "\u540E\u5929";
    const weekdays = ["\u5468\u65E5", "\u5468\u4E00", "\u5468\u4E8C", "\u5468\u4E09", "\u5468\u56DB", "\u5468\u4E94", "\u5468\u516D"];
    return weekdays[date.getDay()];
  }
  // Format date as YYYY-MM-DD
  formatDate(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    return `${year}-${month}-${day}`;
  }
  // Update past dates to be disabled
  updatePastDates() {
    if (!this.dateButtonTargets) return;
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    this.dateButtonTargets.forEach((button) => {
      const dateStr = button.dataset.date;
      if (!dateStr) return;
      const buttonDate = /* @__PURE__ */ new Date(`${dateStr}T00:00:00`);
      buttonDate.setHours(0, 0, 0, 0);
      if (buttonDate < today) {
        button.disabled = true;
        button.classList.add("opacity-40", "cursor-not-allowed");
        button.classList.remove("hover:bg-blue-50");
      }
    });
  }
  // Check if date is today
  isToday(date) {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    const compareDate = new Date(date);
    compareDate.setHours(0, 0, 0, 0);
    return compareDate.getTime() === today.getTime();
  }
};

// app/javascript/controllers/bus_ticket_search_controller.ts
var bus_ticket_search_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedDepartureTimes = /* @__PURE__ */ new Set();
    this.selectedSeatTypes = /* @__PURE__ */ new Set();
    this.selectedDepartureStations = /* @__PURE__ */ new Set();
    this.selectedArrivalStations = /* @__PURE__ */ new Set();
    this.currentSortField = "default";
    this.currentSortDirection = "";
    //  -> 
    this.timeSlotLabels = {
      morning: "\u51CC\u6668 00:00-05:59",
      morning2: "\u4E0A\u5348 06:00-11:59",
      afternoon: "\u4E0B\u5348 12:00-17:59",
      evening: "\u665A\u4E0A 18:00-23:59"
    };
  }
  static {
    this.values = {
      origin: String,
      destination: String,
      date: String
    };
  }
  static {
    this.targets = [
      "overlay",
      "modal",
      "departureTimeTab",
      "seatTypeTab",
      "departureStationTab",
      "arrivalStationTab",
      "departureTimeSection",
      "seatTypeSection",
      "departureStationSection",
      "arrivalStationSection",
      "departureTimeCard",
      "seatTypeCard",
      "departureStationCard",
      "arrivalStationCard",
      "applyButton",
      "filterBadge",
      "selectedTagsContainer",
      "selectedTagsList",
      "sortModal",
      "sortOption",
      "timeButton",
      "priceButton"
    ];
  }
  connect() {
    this.restoreFiltersFromUrl();
    this.restoreSortFromUrl();
  }
  //  URL 
  restoreFiltersFromUrl() {
    const urlParams = new URLSearchParams(window.location.search);
    const timeSlots = urlParams.get("time_slots");
    if (timeSlots) {
      timeSlots.split(",").forEach((time) => {
        this.selectedDepartureTimes.add(time);
        const timeCard = this.departureTimeCardTargets.find(
          (card) => card.dataset.time === time
        );
        if (timeCard) this.addSelectedStyle(timeCard);
      });
    }
    const seatTypes = urlParams.get("seat_types");
    if (seatTypes) {
      seatTypes.split(",").forEach((seatType) => {
        this.selectedSeatTypes.add(seatType);
        const seatCard = this.seatTypeCardTargets.find(
          (card) => card.dataset.seatType === seatType
        );
        if (seatCard) this.addSelectedStyle(seatCard);
      });
    }
    const departureStations = urlParams.get("departure_stations");
    if (departureStations) {
      departureStations.split(",").forEach((station) => {
        this.selectedDepartureStations.add(station);
        const depCard = this.departureStationCardTargets.find(
          (card) => card.dataset.station === station
        );
        if (depCard) this.addSelectedStyle(depCard);
      });
    }
    const arrivalStations = urlParams.get("arrival_stations");
    if (arrivalStations) {
      arrivalStations.split(",").forEach((station) => {
        this.selectedArrivalStations.add(station);
        const arrCard = this.arrivalStationCardTargets.find(
          (card) => card.dataset.station === station
        );
        if (arrCard) this.addSelectedStyle(arrCard);
      });
    }
    this.updateFilterBadge();
    this.updateSelectedTags();
  }
  openFilter() {
    this.overlayTarget.classList.remove("hidden");
    this.modalTarget.classList.remove("hidden");
  }
  closeModal() {
    this.overlayTarget.classList.add("hidden");
    this.modalTarget.classList.add("hidden");
  }
  selectTab(event) {
    const button = event.currentTarget;
    const tab = button.dataset.tab;
    if (!tab) return;
    const tabs = [
      this.departureTimeTabTarget,
      this.seatTypeTabTarget,
      this.departureStationTabTarget,
      this.arrivalStationTabTarget
    ];
    tabs.forEach((t) => {
      t.classList.remove("bg-white", "border-[#FFD900]", "text-gray-900", "font-medium");
      t.classList.add("text-gray-600");
      t.classList.remove("border-l-4");
      t.classList.add("border-l-2", "border-transparent");
    });
    button.classList.add("bg-white", "border-l-4", "border-[#FFD900]", "text-gray-900", "font-medium");
    button.classList.remove("text-gray-600", "border-l-2", "border-transparent");
    const sections = [
      this.departureTimeSectionTarget,
      this.seatTypeSectionTarget,
      this.departureStationSectionTarget,
      this.arrivalStationSectionTarget
    ];
    sections.forEach((s) => s.classList.add("hidden"));
    const sectionMap = {
      departureTime: this.departureTimeSectionTarget,
      seatType: this.seatTypeSectionTarget,
      departureStation: this.departureStationSectionTarget,
      arrivalStation: this.arrivalStationSectionTarget
    };
    const targetSection = sectionMap[tab];
    if (targetSection) {
      targetSection.classList.remove("hidden");
    }
  }
  toggleDepartureTime(event) {
    const card = event.currentTarget;
    const time = card.dataset.time;
    if (!time) return;
    if (this.selectedDepartureTimes.has(time)) {
      this.selectedDepartureTimes.delete(time);
      this.removeSelectedStyle(card);
    } else {
      this.selectedDepartureTimes.add(time);
      this.addSelectedStyle(card);
    }
    this.updateFilterBadge();
    this.updateApplyButton();
    this.updateSelectedTags();
  }
  toggleSeatType(event) {
    const card = event.currentTarget;
    const seatType = card.dataset.seatType;
    if (!seatType) return;
    if (this.selectedSeatTypes.has(seatType)) {
      this.selectedSeatTypes.delete(seatType);
      this.removeSelectedStyle(card);
    } else {
      this.selectedSeatTypes.add(seatType);
      this.addSelectedStyle(card);
    }
    this.updateFilterBadge();
    this.updateApplyButton();
    this.updateSelectedTags();
  }
  toggleDepartureStation(event) {
    const card = event.currentTarget;
    const station = card.dataset.station;
    if (!station) return;
    if (this.selectedDepartureStations.has(station)) {
      this.selectedDepartureStations.delete(station);
      this.removeSelectedStyle(card);
    } else {
      this.selectedDepartureStations.add(station);
      this.addSelectedStyle(card);
    }
    this.updateFilterBadge();
    this.updateApplyButton();
    this.updateSelectedTags();
  }
  toggleArrivalStation(event) {
    const card = event.currentTarget;
    const station = card.dataset.station;
    if (!station) return;
    if (this.selectedArrivalStations.has(station)) {
      this.selectedArrivalStations.delete(station);
      this.removeSelectedStyle(card);
    } else {
      this.selectedArrivalStations.add(station);
      this.addSelectedStyle(card);
    }
    this.updateFilterBadge();
    this.updateApplyButton();
    this.updateSelectedTags();
  }
  addSelectedStyle(card) {
    card.classList.remove("bg-[#F7F8FA]");
    card.classList.add("bg-[#FFD900]");
    if (!card.querySelector(".checkmark-icon")) {
      const checkmark = this.createCheckmark();
      card.appendChild(checkmark);
    }
  }
  removeSelectedStyle(card) {
    card.classList.remove("bg-[#FFD900]");
    card.classList.add("bg-[#F7F8FA]");
    const checkmark = card.querySelector(".checkmark-icon");
    if (checkmark) {
      checkmark.remove();
    }
  }
  createCheckmark() {
    const checkmark = document.createElement("div");
    checkmark.className = "checkmark-icon absolute top-2 right-2";
    checkmark.innerHTML = `
      <svg class="w-5 h-5 text-gray-900" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
      </svg>
    `;
    return checkmark;
  }
  updateFilterBadge() {
    const totalFilters = this.selectedDepartureTimes.size + this.selectedSeatTypes.size + this.selectedDepartureStations.size + this.selectedArrivalStations.size;
    if (totalFilters > 0) {
      this.filterBadgeTarget.textContent = totalFilters.toString();
      this.filterBadgeTarget.classList.remove("hidden");
    } else {
      this.filterBadgeTarget.classList.add("hidden");
    }
  }
  updateApplyButton() {
    this.fetchFilteredCount();
  }
  resetFilters() {
    this.selectedDepartureTimes.clear();
    this.selectedSeatTypes.clear();
    this.selectedDepartureStations.clear();
    this.selectedArrivalStations.clear();
    const allCards = [
      ...this.departureTimeCardTargets,
      ...this.seatTypeCardTargets,
      ...this.departureStationCardTargets,
      ...this.arrivalStationCardTargets
    ];
    allCards.forEach((card) => {
      this.removeSelectedStyle(card);
    });
    this.updateFilterBadge();
    this.updateApplyButton();
    this.updateSelectedTags();
  }
  applyFilters() {
    const params = new URLSearchParams();
    params.set("origin", this.originValue);
    params.set("destination", this.destinationValue);
    params.set("date", this.dateValue);
    if (this.selectedDepartureTimes.size > 0) {
      params.set("time_slots", Array.from(this.selectedDepartureTimes).join(","));
    }
    if (this.selectedSeatTypes.size > 0) {
      params.set("seat_types", Array.from(this.selectedSeatTypes).join(","));
    }
    if (this.selectedDepartureStations.size > 0) {
      params.set("departure_stations", Array.from(this.selectedDepartureStations).join(","));
    }
    if (this.selectedArrivalStations.size > 0) {
      params.set("arrival_stations", Array.from(this.selectedArrivalStations).join(","));
    }
    this.closeModal();
    visit(`/bus_tickets/search?${params.toString()}`);
  }
  // 
  updateSelectedTags() {
    const tags = [];
    this.selectedDepartureTimes.forEach((time) => {
      tags.push({
        type: "departureTime",
        value: time,
        label: this.timeSlotLabels[time] || time
      });
    });
    this.selectedSeatTypes.forEach((seatType) => {
      tags.push({
        type: "seatType",
        value: seatType,
        label: seatType
      });
    });
    this.selectedDepartureStations.forEach((station) => {
      tags.push({
        type: "departureStation",
        value: station,
        label: station
      });
    });
    this.selectedArrivalStations.forEach((station) => {
      tags.push({
        type: "arrivalStation",
        value: station,
        label: station
      });
    });
    this.selectedTagsListTarget.innerHTML = "";
    if (tags.length === 0) {
      this.selectedTagsContainerTarget.classList.add("hidden");
    } else {
      this.selectedTagsContainerTarget.classList.remove("hidden");
      tags.forEach((tag) => {
        const tagElement = document.createElement("div");
        tagElement.className = "bg-[#FFD900] text-gray-900 text-[13px] px-3 py-1 rounded-full flex items-center gap-1";
        tagElement.innerHTML = `
          <span>${tag.label}</span>
          <button type="button" 
            data-action="click->bus-ticket-search#removeTag"
            data-tag-type="${tag.type}"
            data-tag-value="${tag.value}"
            class="text-gray-900 hover:text-gray-700 font-bold">
            \u2715
          </button>
        `;
        this.selectedTagsListTarget.appendChild(tagElement);
      });
    }
  }
  // 
  removeTag(event) {
    const button = event.currentTarget;
    const tagType = button.dataset.tagType;
    const tagValue = button.dataset.tagValue;
    if (!tagType || !tagValue) return;
    switch (tagType) {
      case "departureTime": {
        this.selectedDepartureTimes.delete(tagValue);
        const timeCard = this.departureTimeCardTargets.find(
          (card) => card.dataset.time === tagValue
        );
        if (timeCard) this.removeSelectedStyle(timeCard);
        break;
      }
      case "seatType": {
        this.selectedSeatTypes.delete(tagValue);
        const seatCard = this.seatTypeCardTargets.find(
          (card) => card.dataset.seatType === tagValue
        );
        if (seatCard) this.removeSelectedStyle(seatCard);
        break;
      }
      case "departureStation": {
        this.selectedDepartureStations.delete(tagValue);
        const depCard = this.departureStationCardTargets.find(
          (card) => card.dataset.station === tagValue
        );
        if (depCard) this.removeSelectedStyle(depCard);
        break;
      }
      case "arrivalStation": {
        this.selectedArrivalStations.delete(tagValue);
        const arrCard = this.arrivalStationCardTargets.find(
          (card) => card.dataset.station === tagValue
        );
        if (arrCard) this.removeSelectedStyle(arrCard);
        break;
      }
    }
    this.updateFilterBadge();
    this.updateApplyButton();
    this.updateSelectedTags();
  }
  // 
  async fetchFilteredCount() {
    try {
      const params = new URLSearchParams();
      params.set("origin", this.originValue);
      params.set("destination", this.destinationValue);
      params.set("date", this.dateValue);
      if (this.selectedDepartureTimes.size > 0) {
        params.set("time_slots", Array.from(this.selectedDepartureTimes).join(","));
      }
      if (this.selectedSeatTypes.size > 0) {
        params.set("seat_types", Array.from(this.selectedSeatTypes).join(","));
      }
      if (this.selectedDepartureStations.size > 0) {
        params.set("departure_stations", Array.from(this.selectedDepartureStations).join(","));
      }
      if (this.selectedArrivalStations.size > 0) {
        params.set("arrival_stations", Array.from(this.selectedArrivalStations).join(","));
      }
      const response = await fetch(`/bus_tickets/count_filtered_results?${params.toString()}`);
      const data2 = await response.json();
      this.applyButtonTarget.textContent = `\u67E5\u770B${data2.count}\u6761\u7ED3\u679C`;
    } catch (error3) {
      console.error("\u83B7\u53D6\u7B5B\u9009\u7ED3\u679C\u6570\u91CF\u5931\u8D25:", error3);
      this.applyButtonTarget.textContent = "\u67E5\u770B\u7ED3\u679C";
    }
  }
  // =====  =====
  //  URL 
  restoreSortFromUrl() {
    const urlParams = new URLSearchParams(window.location.search);
    const sortBy = urlParams.get("sort_by");
    const sortDirection = urlParams.get("sort_direction");
    if (sortBy) {
      this.currentSortField = sortBy;
      this.currentSortDirection = sortDirection || "";
      this.updateSortButtonsDisplay();
    }
  }
  // 
  openSortModal() {
    this.sortModalTarget.classList.remove("hidden");
    this.highlightCurrentSort();
  }
  // 
  closeSortModal() {
    this.sortModalTarget.classList.add("hidden");
  }
  // 
  stopPropagation(event) {
    event.stopPropagation();
  }
  // 
  selectSort(event) {
    const button = event.currentTarget;
    const sortField = button.dataset.sortField;
    const sortDirection = button.dataset.sortDirection;
    if (!sortField) return;
    this.sortOptionTargets.forEach((option) => {
      option.classList.remove("bg-[#FFD900]", "border-2", "border-[#FF6A00]");
      option.classList.add("bg-[#F7F8FA]");
    });
    button.classList.remove("bg-[#F7F8FA]");
    button.classList.add("bg-[#FFD900]", "border-2", "border-[#FF6A00]");
    this.currentSortField = sortField;
    this.currentSortDirection = sortDirection || "";
  }
  // 
  applySortAndClose() {
    this.closeSortModal();
    this.applySort();
  }
  // 
  applySort() {
    const params = new URLSearchParams(window.location.search);
    params.delete("sort_by");
    params.delete("sort_direction");
    if (this.currentSortField !== "default") {
      params.set("sort_by", this.currentSortField);
      if (this.currentSortDirection) {
        params.set("sort_direction", this.currentSortDirection);
      }
    }
    this.updateSortButtonsDisplay();
    visit(`/bus_tickets/search?${params.toString()}`);
  }
  // 
  highlightCurrentSort() {
    this.sortOptionTargets.forEach((option) => {
      const sortField = option.dataset.sortField;
      const sortDirection = option.dataset.sortDirection || "";
      if (sortField === this.currentSortField && sortDirection === this.currentSortDirection) {
        option.classList.remove("bg-[#F7F8FA]");
        option.classList.add("bg-[#FFD900]", "border-2", "border-[#FF6A00]");
      } else {
        option.classList.remove("bg-[#FFD900]", "border-2", "border-[#FF6A00]");
        option.classList.add("bg-[#F7F8FA]");
      }
    });
  }
  // 
  updateSortButtonsDisplay() {
    if (this.timeButtonTarget) {
      this.resetButtonStyle(this.timeButtonTarget);
    }
    if (this.priceButtonTarget) {
      this.resetButtonStyle(this.priceButtonTarget);
    }
    if (this.currentSortField === "time" && this.timeButtonTarget) {
      this.highlightButton(this.timeButtonTarget, this.currentSortDirection === "asc" ? "\u65E9\u2192\u665A" : "\u665A\u2192\u65E9");
    } else if (this.currentSortField === "price" && this.priceButtonTarget) {
      this.highlightButton(this.priceButtonTarget, this.currentSortDirection === "asc" ? "\u4F4E\u2192\u9AD8" : "\u9AD8\u2192\u4F4E");
    }
  }
  // 
  resetButtonStyle(button) {
    const icon = button.querySelector(".w-6.h-6");
    const text = button.querySelector(".text-\\[11px\\]");
    if (icon) {
      icon.classList.remove("bg-[#FFD900]", "border-[#FF6A00]");
      icon.classList.add("border-gray-600");
    }
    if (text) {
      text.classList.remove("text-[#FF6A00]", "font-semibold");
      text.classList.add("text-gray-700");
    }
  }
  // 
  highlightButton(button, label) {
    const icon = button.querySelector(".w-6.h-6");
    const text = button.querySelector(".text-\\[11px\\]");
    if (icon) {
      icon.classList.remove("border-gray-600");
      icon.classList.add("bg-[#FFD900]", "border-[#FF6A00]");
    }
    if (text) {
      text.classList.remove("text-gray-700");
      text.classList.add("text-[#FF6A00]", "font-semibold");
      text.textContent = label;
    }
  }
};

// app/javascript/controllers/bus_ticket_order_controller.ts
var bus_ticket_order_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedPassengers = /* @__PURE__ */ new Set();
    this.basePrice = 0;
    this.insurancePrice = 0;
    this.insuranceType = "none";
  }
  static {
    this.targets = [
      "checkIcon",
      "passengerCount",
      "totalPrice",
      "contactPhone",
      "formData"
    ];
  }
  connect() {
    console.log("BusTicketOrder connected");
    this.insuranceType = this.formDataTarget.dataset.insuranceType || "none";
    this.insurancePrice = parseInt(this.formDataTarget.dataset.insurancePrice || "0");
    const firstPassenger = this.element.querySelector("[data-passenger-id]");
    if (firstPassenger) {
      const passengerId = firstPassenger.dataset.passengerId;
      if (passengerId) {
        this.selectedPassengers.add(passengerId);
        this.updatePassengerUI(firstPassenger, true);
        const phone = firstPassenger.dataset.passengerPhone;
        if (phone) {
          this.contactPhoneTarget.textContent = phone;
        }
      }
    }
    this.updateTotal();
  }
  togglePassenger(event) {
    const target = event.currentTarget;
    const passengerId = target.dataset.passengerId;
    if (!passengerId) return;
    if (this.selectedPassengers.has(passengerId)) {
      this.selectedPassengers.delete(passengerId);
      this.updatePassengerUI(target, false);
    } else {
      if (this.selectedPassengers.size >= 5) {
        alert("\u6700\u591A\u53EA\u80FD\u9009\u62E95\u4F4D\u4E58\u8F66\u4EBA");
        return;
      }
      this.selectedPassengers.add(passengerId);
      this.updatePassengerUI(target, true);
      if (this.selectedPassengers.size === 1) {
        const phone = target.dataset.passengerPhone;
        if (phone) {
          this.contactPhoneTarget.textContent = phone;
        }
      }
    }
    this.updateTotal();
  }
  selectInsurance(event) {
    const target = event.currentTarget;
    this.insuranceType = target.dataset.insuranceType || "none";
    this.insurancePrice = parseInt(target.dataset.insurancePrice || "0");
    const allInsuranceCards = this.element.querySelectorAll("[data-insurance-type]");
    allInsuranceCards.forEach((card) => {
      const cardElement = card;
      const cardType = cardElement.dataset.insuranceType;
      const checkIcon = cardElement.querySelector("svg:last-child");
      if (cardType === this.insuranceType) {
        if (cardType === "none") {
          cardElement.classList.add("border-[#FFD944]");
          cardElement.classList.remove("border-gray-100");
          if (checkIcon) checkIcon.classList.remove("text-gray-300");
          if (checkIcon) checkIcon.classList.add("text-[#FFD944]");
        } else if (cardType === "premium") {
          cardElement.classList.add("bg-[#FFFAED]", "border-[#FFD944]");
          cardElement.classList.remove("bg-gray-50", "border-gray-100");
          if (checkIcon) checkIcon.classList.remove("text-gray-300");
          if (checkIcon) checkIcon.classList.add("text-[#FFD944]");
        } else if (cardType === "refund") {
          cardElement.classList.add("bg-[#F0F7FF]", "border-[#5D9CEC]");
          cardElement.classList.remove("bg-gray-50", "border-gray-100");
          if (checkIcon) checkIcon.classList.remove("text-gray-300");
          if (checkIcon) checkIcon.classList.add("text-[#5D9CEC]");
        }
      } else {
        if (cardType === "none") {
          cardElement.classList.remove("border-[#FFD944]");
          cardElement.classList.add("border-gray-100");
          if (checkIcon) checkIcon.classList.add("text-gray-300");
          if (checkIcon) checkIcon.classList.remove("text-[#FFD944]");
        } else {
          cardElement.classList.remove("bg-[#FFFAED]", "bg-[#F0F7FF]", "border-[#FFD944]", "border-[#5D9CEC]");
          cardElement.classList.add("bg-gray-50", "border-gray-100");
          if (checkIcon) checkIcon.classList.add("text-gray-300");
          if (checkIcon) checkIcon.classList.remove("text-[#FFD944]", "text-[#5D9CEC]");
        }
      }
    });
    this.updateTotal();
  }
  async submitOrder(event) {
    event.preventDefault();
    const button = event.currentTarget;
    const busTicketId = button.dataset.busTicketId;
    const basePrice = parseInt(button.dataset.basePrice || "0");
    this.basePrice = basePrice;
    if (this.selectedPassengers.size === 0) {
      alert("\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u4F4D\u4E58\u8F66\u4EBA");
      return;
    }
    const passengerIds = Array.from(this.selectedPassengers);
    const totalPrice = this.calculateTotal();
    const totalInsurancePrice = this.insurancePrice * passengerIds.length;
    const orderData = {
      bus_ticket_order: {
        bus_ticket_id: busTicketId,
        passenger_ids: passengerIds,
        insurance_type: this.insuranceType,
        insurance_price: totalInsurancePrice,
        total_price: totalPrice
      }
    };
    button.disabled = true;
    button.textContent = "\u521B\u5EFA\u4E2D...";
    try {
      const csrfToken = document.querySelector('meta[name="csrf-token"]')?.content || "";
      const response = await fetch("/bus_ticket_orders", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "X-CSRF-Token": csrfToken
        },
        body: JSON.stringify(orderData)
      });
      const data2 = await response.json();
      if (response.ok && data2.success) {
        this.triggerPaymentModal(totalPrice.toString(), data2.payment_url, data2.success_url);
      } else {
        throw new Error(data2.message || "\u521B\u5EFA\u8BA2\u5355\u5931\u8D25");
      }
    } catch (error3) {
      console.error("Error creating order:", error3);
      const message = error3 instanceof Error ? error3.message : "\u521B\u5EFA\u8BA2\u5355\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5";
      alert(message);
      button.disabled = false;
      button.textContent = "\u53BB\u652F\u4ED8";
    }
  }
  triggerPaymentModal(amount, paymentUrl, successUrl) {
    const paymentElement = document.querySelector('[data-controller*="payment-confirmation"]');
    if (!paymentElement) {
      console.error("Payment confirmation controller not found");
      alert("\u652F\u4ED8\u7CFB\u7EDF\u672A\u52A0\u8F7D\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
      return;
    }
    const app = window.Stimulus;
    if (!app) {
      console.error("Stimulus not found");
      alert("\u7CFB\u7EDF\u9519\u8BEF\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
      return;
    }
    const paymentController = app.getControllerForElementAndIdentifier(paymentElement, "payment-confirmation");
    if (paymentController) {
      paymentController.amountValue = amount;
      const userEmail = document.querySelector('meta[name="user-email"]')?.content || document.querySelector("[data-user-email]")?.getAttribute("data-user-email") || "demo@example.com";
      paymentController.userEmailValue = userEmail;
      paymentController.paymentUrlValue = paymentUrl;
      paymentController.successUrlValue = successUrl;
      paymentController.showPasswordModal();
    } else {
      console.error("Payment controller not initialized");
      alert("\u652F\u4ED8\u7CFB\u7EDF\u672A\u521D\u59CB\u5316\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
    }
  }
  updatePassengerUI(element, selected) {
    const checkIcon = element.querySelector('[data-bus-ticket-order-target="checkIcon"]');
    if (checkIcon) {
      if (selected) {
        checkIcon.classList.remove("text-gray-300");
        checkIcon.classList.add("text-[#FFD944]");
      } else {
        checkIcon.classList.add("text-gray-300");
        checkIcon.classList.remove("text-[#FFD944]");
      }
    }
  }
  updateTotal() {
    const passengerCount = this.selectedPassengers.size;
    this.passengerCountTarget.textContent = `\u5171${passengerCount}\u4EBA`;
    const total = this.calculateTotal();
    this.totalPriceTarget.textContent = total.toString();
  }
  calculateTotal() {
    const passengerCount = this.selectedPassengers.size;
    if (passengerCount === 0) return 0;
    const button = this.element.querySelector("[data-base-price]");
    const basePrice = parseInt(button?.dataset.basePrice || "0");
    return (basePrice + this.insurancePrice) * passengerCount;
  }
};

// app/javascript/controllers/deep_booking_controller.ts
var deep_booking_controller_default = class extends Controller {
  static {
    this.targets = [
      "productCard",
      "dateModal",
      "countModal",
      "adultCount",
      "childCount",
      "selectedDate",
      "totalPrice"
    ];
  }
  static {
    this.values = {
      guideId: String,
      selectedDate: String,
      adultCount: Number,
      childCount: Number,
      pricePerPerson: Number
    };
  }
  connect() {
    console.log("DeepBooking controller connected");
    this.adultCountValue = 1;
    this.childCountValue = 0;
    if (this.productCardTargets && this.productCardTargets.length > 0) {
      const priceElement = this.productCardTargets[0].querySelector(".text-xl.font-bold.text-\\[\\#ff5336\\]");
      if (priceElement) {
        this.pricePerPersonValue = parseInt(priceElement.textContent || "192");
      } else {
        this.pricePerPersonValue = 192;
      }
    } else {
      this.pricePerPersonValue = 192;
    }
  }
  disconnect() {
    console.log("DeepBooking disconnected");
  }
  // 
  selectDate(event) {
    const button = event.currentTarget;
    const date = button.dataset.date;
    if (!date) return;
    this.selectedDateValue = date;
    console.log("Selected date:", date);
    const dateButtons = this.element.querySelectorAll('[data-action*="selectDate"]');
    dateButtons.forEach((btn) => {
      btn.classList.remove("bg-[#ffeeb8]", "border-[#ffeeb8]");
      btn.classList.add("bg-[#f5f7fa]");
    });
    button.classList.remove("bg-[#f5f7fa]");
    button.classList.add("bg-[#ffeeb8]", "border-[#ffeeb8]");
  }
  // 
  openCalendar(event) {
    event.preventDefault();
    console.log("Opening calendar modal");
    this.showToast("\u65E5\u5386\u9009\u62E9\u529F\u80FD\u5373\u5C06\u4E0A\u7EBF");
  }
  // 
  openCountModal(event) {
    event.preventDefault();
    if (!this.selectedDateValue) {
      this.showToast("\u8BF7\u5148\u9009\u62E9\u51FA\u884C\u65E5\u671F");
      return;
    }
    console.log("Opening count modal");
    const modalHTML = `
      <div class="fixed inset-0 bg-black/60 z-40" 
           data-action="click->deep-booking#closeCountModal" 
           data-deep-booking-target="countModal">
        <div class="absolute bottom-0 w-full max-w-[414px] left-1/2 -translate-x-1/2 bg-white z-50 rounded-t-2xl px-5 pt-5 pb-8 animate-slide-up" 
             data-action="click->deep-booking#stopPropagation">
          
          <!-- \u5F39\u7A97\u6807\u9898\u680F -->
          <div class="flex justify-between items-center mb-8 relative">
            <div class="w-full text-center">
              <h3 class="text-lg font-bold text-gray-900">\u9884\u7EA6\u4EBA\u6570</h3>
            </div>
            <button class="absolute right-0 top-0 p-1" data-action="click->deep-booking#closeCountModal">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-500">
                <path d="M18 6L6 18M6 6l12 12" />
              </svg>
            </button>
          </div>

          <!-- \u5217\u8868\u9879\uFF1A\u6210\u4EBA -->
          <div class="flex justify-between items-center mb-8">
            <div>
              <div class="text-lg font-medium text-gray-900">\u6210\u4EBA</div>
              <div class="text-sm text-gray-400 mt-1">\u5355\u4EF7: \xA5${this.pricePerPersonValue}</div>
            </div>
            <div class="flex items-center gap-4">
              <button class="w-7 h-7 rounded-full border flex items-center justify-center transition-colors ${this.adultCountValue <= 1 ? "border-gray-300 text-gray-300 cursor-not-allowed" : "border-blue-custom text-blue-custom hover:bg-blue-50"}"
                      data-action="click->deep-booking#decrementAdult"
                      ${this.adultCountValue <= 1 ? "disabled" : ""}>
                <svg width="12" height="2" viewBox="0 0 12 2" fill="currentColor">
                  <rect width="12" height="2" rx="1"/>
                </svg>
              </button>
              
              <span class="text-lg font-medium w-4 text-center" data-deep-booking-target="adultCount">${this.adultCountValue}</span>
              
              <button class="w-7 h-7 rounded-full border border-blue-custom flex items-center justify-center text-blue-custom hover:bg-blue-50"
                      data-action="click->deep-booking#incrementAdult">
                <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                  <rect y="5" width="12" height="2" rx="1"/>
                  <rect x="5" width="2" height="12" rx="1"/>
                </svg>
              </button>
            </div>
          </div>

          <!-- \u5217\u8868\u9879\uFF1A\u513F\u7AE5 -->
          <div class="flex justify-between items-center mb-10">
            <div>
              <div class="text-lg font-medium text-gray-900">\u513F\u7AE5</div>
              <div class="text-sm text-gray-400 mt-1">\u5355\u4EF7: \xA5${Math.round(this.pricePerPersonValue * 0.8)}</div>
            </div>
            <div class="flex items-center gap-4">
              <button class="w-7 h-7 rounded-full border flex items-center justify-center transition-colors ${this.childCountValue <= 0 ? "border-gray-300 text-gray-300 cursor-not-allowed" : "border-blue-custom text-blue-custom hover:bg-blue-50"}"
                      data-action="click->deep-booking#decrementChild"
                      ${this.childCountValue <= 0 ? "disabled" : ""}>
                <svg width="12" height="2" viewBox="0 0 12 2" fill="currentColor">
                  <rect width="12" height="2" rx="1"/>
                </svg>
              </button>
              
              <span class="text-lg font-medium w-4 text-center" data-deep-booking-target="childCount">${this.childCountValue}</span>
              
              <button class="w-7 h-7 rounded-full border border-blue-custom flex items-center justify-center text-blue-custom hover:bg-blue-50"
                      data-action="click->deep-booking#incrementChild">
                <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                  <rect y="5" width="12" height="2" rx="1"/>
                  <rect x="5" width="2" height="12" rx="1"/>
                </svg>
              </button>
            </div>
          </div>

          <!-- \u5E95\u90E8\u6309\u94AE -->
          <button class="w-full bg-[#FF5A43] text-white text-lg font-bold py-3.5 rounded-full shadow-lg active:opacity-90 transition-opacity"
                  data-action="click->deep-booking#confirmBooking">
            \u7ACB\u5373\u9884\u7EA6
          </button>
          
        </div>
      </div>
    `;
    this.element.insertAdjacentHTML("beforeend", modalHTML);
  }
  // 
  closeCountModal(event) {
    event.preventDefault();
    const modal = document.querySelector('[data-deep-booking-target="countModal"]');
    if (modal) {
      modal.remove();
    }
  }
  // 
  stopPropagation(event) {
    event.stopPropagation();
  }
  // 
  incrementAdult(event) {
    event.preventDefault();
    this.adultCountValue++;
    this.updateCountDisplay();
  }
  // 
  decrementAdult(event) {
    event.preventDefault();
    if (this.adultCountValue > 1) {
      this.adultCountValue--;
      this.updateCountDisplay();
    }
  }
  // 
  incrementChild(event) {
    event.preventDefault();
    this.childCountValue++;
    this.updateCountDisplay();
  }
  // 
  decrementChild(event) {
    event.preventDefault();
    if (this.childCountValue > 0) {
      this.childCountValue--;
      this.updateCountDisplay();
    }
  }
  // 
  updateCountDisplay() {
    const modal = document.querySelector('[data-deep-booking-target="countModal"]');
    if (!modal) return;
    const adultCountEl = modal.querySelector('[data-deep-booking-target="adultCount"]');
    if (adultCountEl) {
      adultCountEl.textContent = this.adultCountValue.toString();
    }
    const childCountEl = modal.querySelector('[data-deep-booking-target="childCount"]');
    if (childCountEl) {
      childCountEl.textContent = this.childCountValue.toString();
    }
    const decrementAdultBtn = modal.querySelector('[data-action*="decrementAdult"]');
    if (decrementAdultBtn) {
      if (this.adultCountValue <= 1) {
        decrementAdultBtn.disabled = true;
        decrementAdultBtn.classList.remove("border-blue-custom", "text-blue-custom", "hover:bg-blue-50");
        decrementAdultBtn.classList.add("border-gray-300", "text-gray-300", "cursor-not-allowed");
      } else {
        decrementAdultBtn.disabled = false;
        decrementAdultBtn.classList.remove("border-gray-300", "text-gray-300", "cursor-not-allowed");
        decrementAdultBtn.classList.add("border-blue-custom", "text-blue-custom", "hover:bg-blue-50");
      }
    }
    const decrementChildBtn = modal.querySelector('[data-action*="decrementChild"]');
    if (decrementChildBtn) {
      if (this.childCountValue <= 0) {
        decrementChildBtn.disabled = true;
        decrementChildBtn.classList.remove("border-blue-custom", "text-blue-custom", "hover:bg-blue-50");
        decrementChildBtn.classList.add("border-gray-300", "text-gray-300", "cursor-not-allowed");
      } else {
        decrementChildBtn.disabled = false;
        decrementChildBtn.classList.remove("border-gray-300", "text-gray-300", "cursor-not-allowed");
        decrementChildBtn.classList.add("border-blue-custom", "text-blue-custom", "hover:bg-blue-50");
      }
    }
  }
  //  - 
  confirmBooking(event) {
    event.preventDefault();
    const url = `/deep_travel_bookings/new?guide_id=${this.guideIdValue}&date=${this.selectedDateValue}&adult_count=${this.adultCountValue}&child_count=${this.childCountValue}`;
    console.log("Confirming booking:", {
      guideId: this.guideIdValue,
      date: this.selectedDateValue,
      adultCount: this.adultCountValue,
      childCount: this.childCountValue,
      url
    });
    window.location.href = url;
  }
  // 
  showToast(message) {
    if (typeof window.showToast === "function") {
      window.showToast(message);
    } else {
      alert(message);
    }
  }
};
var style = document.createElement("style");
style.textContent = `
  .border-blue-custom {
    border-color: #4E6EF2;
  }
  .text-blue-custom {
    color: #4E6EF2;
  }
  @keyframes slide-up {
    from {
      transform: translateY(100%);
    }
    to {
      transform: translateY(0);
    }
  }
  .animate-slide-up {
    animation: slide-up 0.3s ease-out;
  }
`;
document.head.appendChild(style);

// app/javascript/controllers/visa_order_controller.ts
var visa_order_controller_default = class extends Controller {
  static {
    this.targets = ["totalPrice", "deliveryAddress"];
  }
  connect() {
    console.log("VisaOrder controller connected");
  }
  async submitOrder(event) {
    event.preventDefault();
    const button = event.currentTarget;
    const visaProductId = button.dataset.visaProductId || "";
    const travelerCount = parseInt(button.dataset.travelerCount || "1");
    const totalPrice = parseFloat(button.dataset.totalPrice || "0");
    const insuranceType = button.dataset.insuranceType || "none";
    const insurancePrice = parseFloat(button.dataset.insurancePrice || "0");
    const contactName = button.dataset.contactName || "";
    const contactPhone = button.dataset.contactPhone || "";
    const deliveryAddress = button.dataset.deliveryAddress || "";
    if (!contactName || contactName.trim() === "") {
      alert("\u8BF7\u586B\u5199\u8054\u7CFB\u4EBA\u59D3\u540D");
      return;
    }
    if (!contactPhone || contactPhone.trim() === "") {
      alert("\u8BF7\u586B\u5199\u8054\u7CFB\u4EBA\u7535\u8BDD");
      return;
    }
    if (!deliveryAddress || deliveryAddress.trim() === "") {
      alert("\u8BF7\u586B\u5199\u90AE\u5BC4\u5730\u5740");
      return;
    }
    const orderData = {
      visa_order: {
        visa_product_id: visaProductId,
        traveler_count: travelerCount,
        insurance_type: insuranceType,
        insurance_price: insurancePrice,
        total_price: totalPrice,
        contact_name: contactName.trim(),
        contact_phone: contactPhone.trim(),
        delivery_address: deliveryAddress.trim()
      }
    };
    button.disabled = true;
    button.textContent = "\u521B\u5EFA\u4E2D...";
    try {
      const csrfToken = document.querySelector('meta[name="csrf-token"]')?.content || "";
      const response = await fetch("/visa_orders", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "X-CSRF-Token": csrfToken
        },
        body: JSON.stringify(orderData)
      });
      const data2 = await response.json();
      if (response.ok && data2.success) {
        this.triggerPaymentModal(totalPrice.toString(), data2.payment_url, data2.success_url);
      } else {
        throw new Error(data2.message || "\u521B\u5EFA\u8BA2\u5355\u5931\u8D25");
      }
    } catch (error3) {
      console.error("Error creating order:", error3);
      const message = error3 instanceof Error ? error3.message : "\u521B\u5EFA\u8BA2\u5355\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5";
      alert(message);
      button.disabled = false;
      button.textContent = "\u7ACB\u523B\u652F\u4ED8";
    }
  }
  triggerPaymentModal(amount, paymentUrl, successUrl) {
    const paymentElement = document.querySelector('[data-controller*="payment-confirmation"]');
    if (!paymentElement) {
      console.error("Payment confirmation controller not found");
      alert("\u652F\u4ED8\u7CFB\u7EDF\u672A\u52A0\u8F7D\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
      return;
    }
    const app = window.Stimulus;
    if (!app) {
      console.error("Stimulus not found");
      alert("\u7CFB\u7EDF\u9519\u8BEF\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
      return;
    }
    const paymentController = app.getControllerForElementAndIdentifier(paymentElement, "payment-confirmation");
    if (paymentController) {
      paymentController.amountValue = amount;
      const userEmail = document.querySelector('meta[name="user-email"]')?.content || document.querySelector("[data-user-email]")?.getAttribute("data-user-email") || "demo@example.com";
      paymentController.userEmailValue = userEmail;
      paymentController.paymentUrlValue = paymentUrl;
      paymentController.successUrlValue = successUrl;
      paymentController.showPasswordModal();
    } else {
      console.error("Payment controller not initialized");
      alert("\u652F\u4ED8\u7CFB\u7EDF\u672A\u521D\u59CB\u5316\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
    }
  }
};

// app/javascript/controllers/abroad_region_selector_controller.ts
var abroad_region_selector_controller_default = class extends Controller {
  static {
    this.targets = ["regionButton", "regionContent", "ticketTypeButton", "ticketTypeContent"];
  }
  connect() {
    console.log("AbroadRegionSelector connected");
  }
  selectRegion(event) {
    const clickedButton = event.currentTarget;
    const region = clickedButton.dataset.region;
    if (this.hasRegionButtonTarget) {
      this.regionButtonTargets.forEach((button) => {
        button.classList.remove("text-yellow-600", "font-bold", "border-b-2", "border-yellow-600");
        button.classList.add("text-gray-500");
      });
    }
    clickedButton.classList.remove("text-gray-500");
    clickedButton.classList.add("text-yellow-600", "font-bold", "border-b-2", "border-yellow-600");
    this.regionContentTargets.forEach((content) => {
      if (content.dataset.region === region) {
        content.classList.remove("hidden");
      } else {
        content.classList.add("hidden");
      }
    });
  }
  selectTicketType(event) {
    const clickedButton = event.currentTarget;
    const ticketType = clickedButton.dataset.ticketType;
    if (this.hasTicketTypeButtonTarget) {
      this.ticketTypeButtonTargets.forEach((button) => {
        button.classList.remove("bg-yellow-500", "text-white");
        button.classList.add("bg-gray-100", "text-gray-700");
      });
    }
    clickedButton.classList.remove("bg-gray-100", "text-gray-700");
    clickedButton.classList.add("bg-yellow-500", "text-white");
    this.ticketTypeContentTargets.forEach((content) => {
      if (content.dataset.ticketType === ticketType) {
        content.classList.remove("hidden");
      } else {
        content.classList.add("hidden");
      }
    });
  }
  swapStations() {
    const originSelect = document.querySelector('[name="origin"]');
    const destinationSelect = document.querySelector('[name="destination"]');
    if (originSelect && destinationSelect) {
      const temp = originSelect.value;
      originSelect.value = destinationSelect.value;
      destinationSelect.value = temp;
    }
  }
};

// app/javascript/controllers/abroad_date_picker_controller.ts
var abroad_date_picker_controller_default = class extends Controller {
  static {
    this.targets = ["modal", "dateButton"];
  }
  static {
    this.values = {
      currentDate: String
    };
  }
  connect() {
    console.log("AbroadDatePicker connected");
    this.element.addEventListener("abroad-ticket-search:open-date-picker", () => {
      this.openModal();
    });
    this.updatePastDates();
  }
  openModal() {
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  closeModal() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  selectDate(event) {
    const target = event.currentTarget;
    const dateStr = target.dataset.date;
    if (dateStr) {
      const selectedDate = /* @__PURE__ */ new Date(`${dateStr}T00:00:00`);
      const today = /* @__PURE__ */ new Date();
      today.setHours(0, 0, 0, 0);
      selectedDate.setHours(0, 0, 0, 0);
      if (selectedDate < today) {
        return;
      }
      const searchController = this.application.getControllerForElementAndIdentifier(
        this.element,
        "abroad-ticket-search"
      );
      if (searchController && "updateDate" in searchController) {
        searchController.updateDate(dateStr);
      }
      this.closeModal();
    }
  }
  // Update past dates to be disabled
  updatePastDates() {
    if (!this.dateButtonTargets) return;
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    this.dateButtonTargets.forEach((button) => {
      const dateStr = button.dataset.date;
      if (!dateStr) return;
      const buttonDate = /* @__PURE__ */ new Date(`${dateStr}T00:00:00`);
      buttonDate.setHours(0, 0, 0, 0);
      if (buttonDate < today) {
        button.disabled = true;
        button.classList.add("opacity-40", "cursor-not-allowed");
        button.classList.remove("hover:bg-blue-50");
      }
    });
  }
};

// app/javascript/controllers/abroad_passenger_selector_controller.ts
var abroad_passenger_selector_controller_default = class extends Controller {
  static {
    this.targets = ["type"];
  }
  connect() {
    console.log("AbroadPassengerSelector connected");
  }
  select(event) {
    const clickedElement = event.currentTarget;
    const selectedType = clickedElement.dataset.abroadPassengerSelectorTypeParam;
    if (this.hasTypeTarget) {
      this.typeTargets.forEach((element) => {
        element.classList.remove("bg-[#FFFBF0]", "border", "border-[#FFE5B5]");
        element.classList.add("bg-gray-100");
        const checkmark = element.querySelector(".absolute");
        if (checkmark) {
          checkmark.remove();
        }
      });
    }
    clickedElement.classList.remove("bg-gray-100");
    clickedElement.classList.add("bg-[#FFFBF0]", "border", "border-[#FFE5B5]");
    const checkmarkHTML = `
      <div class="absolute bottom-0 right-0 w-3 h-3 bg-[#FFCC00] rounded-tl-lg rounded-br-lg flex items-center justify-center">
        <svg class="w-2 h-2 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path>
        </svg>
      </div>
    `;
    clickedElement.insertAdjacentHTML("beforeend", checkmarkHTML);
    if (selectedType) {
      const url = new URL(window.location.href);
      const ticketId = url.searchParams.get("abroad_ticket_id");
      const seatCategory = url.searchParams.get("seat_category");
      if (ticketId && seatCategory) {
        const bookingButtons = document.querySelectorAll('a[href*="new_abroad_ticket_order"]');
        bookingButtons.forEach((button) => {
          const href = button.getAttribute("href");
          if (href) {
            const newUrl = new URL(href, window.location.origin);
            newUrl.searchParams.set("passenger_type", selectedType);
            button.setAttribute("href", newUrl.toString());
          }
        });
      }
    }
  }
};

// app/javascript/controllers/abroad_order_form_controller.ts
var abroad_order_form_controller_default = class extends Controller {
  static {
    this.targets = ["modal", "nameInput", "phoneInput", "emailInput"];
  }
  async submitOrder(event) {
    event.preventDefault();
    const button = event.currentTarget;
    const abroadTicketId = button.dataset.abroadTicketId;
    const totalPrice = button.dataset.totalPrice;
    if (!this.validateForm()) {
      return;
    }
    const passengerTypeInput = document.getElementById("passenger_type");
    const seatCategoryInput = document.getElementById("seat_category");
    const notesInput = document.getElementById("notes");
    const formData = {
      abroad_ticket_order: {
        abroad_ticket_id: abroadTicketId,
        passenger_name: this.nameInputTarget.value,
        contact_phone: this.phoneInputTarget.value,
        contact_email: this.emailInputTarget.value,
        passenger_type: passengerTypeInput?.value || "",
        seat_category: seatCategoryInput?.value || "",
        total_price: totalPrice,
        notes: notesInput?.value || ""
      }
    };
    button.disabled = true;
    button.textContent = "\u521B\u5EFA\u4E2D...";
    try {
      const csrfToken = document.querySelector('meta[name="csrf-token"]')?.content || "";
      const response = await fetch("/abroad_ticket_orders.json", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Accept": "application/json",
          "X-CSRF-Token": csrfToken
        },
        body: JSON.stringify(formData)
      });
      const data2 = await response.json();
      if (response.ok && data2.success) {
        this.triggerPaymentModal(totalPrice || "0", data2.payment_url, data2.success_url);
      } else {
        throw new Error(data2.message || "\u521B\u5EFA\u8BA2\u5355\u5931\u8D25");
      }
    } catch (error3) {
      console.error("Error creating order:", error3);
      const message = error3 instanceof Error ? error3.message : "\u521B\u5EFA\u8BA2\u5355\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5";
      alert(message);
      button.disabled = false;
      button.textContent = "\u7ACB\u5373\u9884\u8BA2";
    }
  }
  validateForm() {
    if (!this.hasNameInputTarget || !this.nameInputTarget.value.trim()) {
      alert("\u8BF7\u8F93\u5165\u59D3\u540D");
      return false;
    }
    if (!this.hasPhoneInputTarget || !this.phoneInputTarget.value.trim()) {
      alert("\u8BF7\u8F93\u5165\u624B\u673A\u53F7");
      return false;
    }
    if (!this.hasEmailInputTarget || !this.emailInputTarget.value.trim()) {
      alert("\u8BF7\u8F93\u5165\u90AE\u7BB1");
      return false;
    }
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(this.emailInputTarget.value)) {
      alert("\u8BF7\u8F93\u5165\u6709\u6548\u7684\u90AE\u7BB1\u5730\u5740");
      return false;
    }
    return true;
  }
  triggerPaymentModal(amount, paymentUrl, successUrl) {
    const paymentElement = document.querySelector('[data-controller*="payment-confirmation"]');
    if (!paymentElement) {
      console.error("Payment confirmation controller not found");
      alert("\u652F\u4ED8\u7CFB\u7EDF\u672A\u52A0\u8F7D\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
      return;
    }
    const app = window.Stimulus;
    if (!app) {
      console.error("Stimulus not found");
      alert("\u7CFB\u7EDF\u9519\u8BEF\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
      return;
    }
    const paymentController = app.getControllerForElementAndIdentifier(paymentElement, "payment-confirmation");
    if (paymentController) {
      paymentController.amountValue = amount;
      paymentController.userEmailValue = this.emailInputTarget.value;
      paymentController.paymentUrlValue = paymentUrl;
      paymentController.successUrlValue = successUrl;
      paymentController.showPasswordModal();
    } else {
      console.error("Payment controller not initialized");
      alert("\u652F\u4ED8\u7CFB\u7EDF\u672A\u521D\u59CB\u5316\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
    }
  }
  openPassengerSelector() {
    this.modalTarget.classList.remove("hidden");
  }
  closePassengerSelector() {
    this.modalTarget.classList.add("hidden");
  }
  selectPassenger(event) {
    const element = event.currentTarget;
    const name = element.dataset.abroadOrderFormNameParam || "";
    const phone = element.dataset.abroadOrderFormPhoneParam || "";
    if (this.hasNameInputTarget) {
      this.nameInputTarget.value = name;
    }
    if (this.hasPhoneInputTarget) {
      this.phoneInputTarget.value = phone;
    }
    this.closePassengerSelector();
  }
};

// app/javascript/controllers/abroad_ticket_search_controller.ts
var abroad_ticket_search_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.currentSelectionType = "origin";
    this.currentRegion = "japan";
    // 
    this.japanStations = {
      "\u4E1C\u4EAC": [
        { name: "\u4E1C\u4EAC\u7AD9", nameEn: "Tokyo Station", city: "\u4E1C\u4EAC" },
        { name: "\u65B0\u5BBF\u7AD9", nameEn: "Shinjuku Station", city: "\u4E1C\u4EAC" },
        { name: "\u6DA9\u8C37\u7AD9", nameEn: "Shibuya Station", city: "\u4E1C\u4EAC" },
        { name: "\u6C60\u888B\u7AD9", nameEn: "Ikebukuro Station", city: "\u4E1C\u4EAC" },
        { name: "\u54C1\u5DDD\u7AD9", nameEn: "Shinagawa Station", city: "\u4E1C\u4EAC" }
      ],
      "\u5927\u962A": [
        { name: "\u65B0\u5927\u962A\u7AD9", nameEn: "Shin-Osaka Station", city: "\u5927\u962A" },
        { name: "\u5927\u962A\u7AD9", nameEn: "Osaka Station", city: "\u5927\u962A" },
        { name: "\u96BE\u6CE2\u7AD9", nameEn: "Namba Station", city: "\u5927\u962A" },
        { name: "\u5929\u738B\u5BFA\u7AD9", nameEn: "Tennoji Station", city: "\u5927\u962A" }
      ],
      "\u4EAC\u90FD": [
        { name: "\u4EAC\u90FD\u7AD9", nameEn: "Kyoto Station", city: "\u4EAC\u90FD" },
        { name: "\u54C1\u5DDD\u7AD9", nameEn: "Shinagawa Station", city: "\u4EAC\u90FD" }
      ],
      "\u540D\u53E4\u5C4B": [
        { name: "\u540D\u53E4\u5C4B\u7AD9", nameEn: "Nagoya Station", city: "\u540D\u53E4\u5C4B" }
      ],
      "\u4ED9\u53F0": [
        { name: "\u4ED9\u53F0\u7AD9", nameEn: "Sendai Station", city: "\u4ED9\u53F0" }
      ],
      "\u9752\u68EE": [
        { name: "\u9752\u68EE\u7AD9", nameEn: "Aomori Station", city: "\u9752\u68EE" }
      ],
      "\u65B0\u6F5F": [
        { name: "\u65B0\u6F5F\u7AD9", nameEn: "Niigata Station", city: "\u65B0\u6F5F" }
      ],
      "\u5E7F\u5C9B": [
        { name: "\u5E7F\u5C9B\u7AD9", nameEn: "Hiroshima Station", city: "\u5E7F\u5C9B" }
      ],
      "\u798F\u5188": [
        { name: "\u535A\u591A\u7AD9", nameEn: "Hakata Station", city: "\u798F\u5188" }
      ],
      "\u9E7F\u513F\u5C9B": [
        { name: "\u9E7F\u513F\u5C9B\u4E2D\u592E\u7AD9", nameEn: "Kagoshima-Chuo Station", city: "\u9E7F\u513F\u5C9B" }
      ],
      "\u5317\u6D77\u9053": [
        { name: "\u672D\u5E4C\u7AD9", nameEn: "Sapporo Station", city: "\u5317\u6D77\u9053" }
      ]
    };
    // 
    this.europeStations = {
      "\u6CD5\u56FD": [
        { name: "\u5DF4\u9ECE\u5317\u7AD9", nameEn: "Paris Nord", city: "\u6CD5\u56FD" },
        { name: "\u5DF4\u9ECE\u91CC\u6602\u7AD9", nameEn: "Paris Gare de Lyon", city: "\u6CD5\u56FD" },
        { name: "\u91CC\u6602\u7AD9", nameEn: "Lyon Station", city: "\u6CD5\u56FD" },
        { name: "\u9A6C\u8D5B\u7AD9", nameEn: "Marseille Station", city: "\u6CD5\u56FD" }
      ],
      "\u8377\u5170": [
        { name: "\u963F\u59C6\u65AF\u7279\u4E39\u4E2D\u592E\u8F66\u7AD9", nameEn: "Amsterdam Centraal", city: "\u8377\u5170" },
        { name: "\u9E7F\u7279\u4E39\u4E2D\u592E\u8F66\u7AD9", nameEn: "Rotterdam Centraal", city: "\u8377\u5170" }
      ],
      "\u5FB7\u56FD": [
        { name: "\u67CF\u6797\u4E2D\u592E\u8F66\u7AD9", nameEn: "Berlin Hauptbahnhof", city: "\u5FB7\u56FD" },
        { name: "\u6155\u5C3C\u9ED1\u4E2D\u592E\u8F66\u7AD9", nameEn: "M\xFCnchen Hauptbahnhof", city: "\u5FB7\u56FD" },
        { name: "\u6CD5\u5170\u514B\u798F\u4E2D\u592E\u8F66\u7AD9", nameEn: "Frankfurt Hauptbahnhof", city: "\u5FB7\u56FD" }
      ],
      "\u610F\u5927\u5229": [
        { name: "\u7F57\u9A6C\u7279\u7C73\u5C3C\u7AD9", nameEn: "Roma Termini", city: "\u610F\u5927\u5229" },
        { name: "\u7C73\u5170\u4E2D\u592E\u8F66\u7AD9", nameEn: "Milano Centrale", city: "\u610F\u5927\u5229" },
        { name: "\u4F5B\u7F57\u4F26\u8428\u5723\u6BCD\u739B\u5229\u4E9A\u8F66\u7AD9", nameEn: "Firenze Santa Maria Novella", city: "\u610F\u5927\u5229" }
      ],
      "\u897F\u73ED\u7259": [
        { name: "\u9A6C\u5FB7\u91CC\u963F\u6258\u67E5\u7AD9", nameEn: "Madrid Atocha", city: "\u897F\u73ED\u7259" },
        { name: "\u5DF4\u585E\u7F57\u90A3\u6851\u65AF\u7AD9", nameEn: "Barcelona Sants", city: "\u897F\u73ED\u7259" }
      ]
    };
    // 
    this.popularRoutes = {
      japan: [
        { origin: "\u4E1C\u4EAC\u7AD9", destination: "\u4EAC\u90FD\u7AD9" },
        { origin: "\u4E1C\u4EAC\u7AD9", destination: "\u65B0\u5927\u962A\u7AD9" }
      ],
      europe: [
        { origin: "\u5DF4\u9ECE\u5317\u7AD9", destination: "\u963F\u59C6\u65AF\u7279\u4E39\u4E2D\u592E\u8F66\u7AD9" },
        { origin: "\u5DF4\u9ECE\u91CC\u6602\u7AD9", destination: "\u7F57\u9A6C\u7279\u7C73\u5C3C\u7AD9" }
      ]
    };
  }
  static {
    this.targets = [
      "form",
      "regionInput",
      "originInput",
      "destinationInput",
      "originText",
      "destinationText",
      "dateInput",
      "dateText",
      "stationModal",
      "stationList",
      "searchInput"
    ];
  }
  static {
    this.values = {
      currentDate: String
    };
  }
  connect() {
    this.currentRegion = this.regionInputTarget.value;
    console.log("Abroad ticket search controller connected");
  }
  selectRegion(event) {
    const button = event.currentTarget;
    const region = button.dataset.abroadTicketSearchRegionParam;
    if (region && region !== this.currentRegion) {
      const url = new URL(window.location.href);
      url.searchParams.set("region", region);
      window.Turbo.visit(url.toString());
    }
  }
  selectTicketType(event) {
    event.preventDefault();
    const button = event.currentTarget;
    const ticketType = button.dataset.abroadTicketSearchTicketTypeParam;
    const allButtons = button.parentElement?.querySelectorAll("button") || [];
    allButtons.forEach((btn) => {
      btn.classList.remove("bg-white", "shadow-sm", "font-bold");
      btn.classList.add("font-medium", "text-gray-500");
    });
    button.classList.remove("font-medium", "text-gray-500");
    button.classList.add("bg-white", "shadow-sm", "font-bold");
    console.log("Selected ticket type:", ticketType);
  }
  selectOrigin(event) {
    event.preventDefault();
    this.currentSelectionType = "origin";
    this.openStationModal();
  }
  selectDestination(event) {
    event.preventDefault();
    this.currentSelectionType = "destination";
    this.openStationModal();
  }
  swapStations(event) {
    event.preventDefault();
    const originValue = this.originInputTarget.value;
    const destinationValue = this.destinationInputTarget.value;
    this.originInputTarget.value = destinationValue;
    this.destinationInputTarget.value = originValue;
    this.originTextTarget.textContent = destinationValue;
    this.destinationTextTarget.textContent = originValue;
  }
  openDatePicker(event) {
    event.preventDefault();
    const customEvent = new CustomEvent("abroad-ticket-search:open-date-picker", {
      bubbles: true
    });
    this.element.dispatchEvent(customEvent);
  }
  updateDate(dateStr) {
    this.dateInputTarget.value = dateStr;
    this.currentDateValue = dateStr;
    const date = /* @__PURE__ */ new Date(`${dateStr}T00:00:00`);
    const month = date.getMonth() + 1;
    const day = date.getDate();
    const weekdays = ["\u5468\u65E5", "\u5468\u4E00", "\u5468\u4E8C", "\u5468\u4E09", "\u5468\u56DB", "\u5468\u4E94", "\u5468\u516D"];
    const weekday = weekdays[date.getDay()];
    this.dateTextTarget.textContent = `${month}\u6708${day}\u65E5`;
    const weekdayElement = this.dateTextTarget.nextElementSibling;
    if (weekdayElement) {
      weekdayElement.textContent = weekday;
    }
  }
  openStationModal() {
    this.stationModalTarget.classList.remove("hidden");
    this.renderStationList();
    this.searchInputTarget.value = "";
    this.searchInputTarget.focus();
  }
  closeStationModal() {
    this.stationModalTarget.classList.add("hidden");
  }
  selectStation(event) {
    const element = event.currentTarget;
    const stationName = element.dataset.stationName;
    const stationNameEn = element.dataset.stationNameEn;
    if (!stationName) return;
    if (this.currentSelectionType === "origin") {
      this.originInputTarget.value = stationName;
      this.originTextTarget.textContent = stationName;
      const subtitle = this.originTextTarget.nextElementSibling;
      if (subtitle) {
        subtitle.textContent = stationNameEn || "";
      }
    } else {
      this.destinationInputTarget.value = stationName;
      this.destinationTextTarget.textContent = stationName;
      const subtitle = this.destinationTextTarget.nextElementSibling;
      if (subtitle) {
        subtitle.textContent = stationNameEn || "";
      }
    }
    this.closeStationModal();
  }
  searchStations(event) {
    const input = event.currentTarget;
    const query = input.value.trim().toLowerCase();
    this.renderStationList(query);
  }
  renderStationList(searchQuery = "") {
    const stations = this.currentRegion === "japan" ? this.japanStations : this.europeStations;
    const popularRoutes = this.currentRegion === "japan" ? this.popularRoutes.japan : this.popularRoutes.europe;
    let html = "";
    if (!searchQuery && popularRoutes.length > 0) {
      html += `
        <div class="mb-6">
          <h3 class="text-sm font-medium text-gray-500 mb-3 px-4">\u70ED\u95E8\u8DEF\u7EBF</h3>
          <div class="flex gap-3 px-4 overflow-x-auto">
            ${popularRoutes.map((route) => `
              <div class="bg-gray-50 rounded-lg px-4 py-2 whitespace-nowrap cursor-pointer hover:bg-gray-100"
                   data-action="click->abroad-ticket-search#selectPopularRoute"
                   data-origin="${route.origin}"
                   data-destination="${route.destination}">
                <span class="text-sm font-medium">${route.origin} - ${route.destination}</span>
              </div>
            `).join("")}
          </div>
        </div>
      `;
    }
    html += '<div class="mb-4"><h3 class="text-sm font-medium text-gray-500 mb-3 px-4">\u7AD9\u70B9\u9009\u62E9</h3></div>';
    Object.entries(stations).forEach(([city, stationList]) => {
      const filteredStations = stationList.filter(
        (station) => !searchQuery || station.name.toLowerCase().includes(searchQuery) || station.nameEn.toLowerCase().includes(searchQuery) || city.toLowerCase().includes(searchQuery)
      );
      if (filteredStations.length > 0) {
        html += `
          <div class="mb-4">
            <div class="flex items-center px-4 py-2 bg-gray-50">
              <span class="text-sm font-bold text-gray-700">${city}</span>
            </div>
            ${filteredStations.map((station) => {
          const isSelected = this.currentSelectionType === "origin" && this.originInputTarget.value === station.name || this.currentSelectionType === "destination" && this.destinationInputTarget.value === station.name;
          return `
                <div class="flex items-center justify-between px-4 py-3 border-b border-gray-100 cursor-pointer hover:bg-gray-50"
                     data-action="click->abroad-ticket-search#selectStation"
                     data-station-name="${station.name}"
                     data-station-name-en="${station.nameEn}">
                  <div class="flex-1">
                    <div class="text-base font-medium text-gray-900">${station.name}</div>
                    <div class="text-xs text-gray-400 mt-0.5">${station.nameEn}</div>
                  </div>
                  ${isSelected ? `
                    <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd"
                            d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                            clip-rule="evenodd"/>
                    </svg>
                  ` : ""}
                </div>
              `;
        }).join("")}
          </div>
        `;
      }
    });
    const noResultsHeader = '<div class="mb-4"><h3 class="text-sm font-medium text-gray-500 mb-3 px-4">\u7AD9\u70B9\u9009\u62E9</h3></div>';
    if (html === noResultsHeader) {
      html += '<div class="text-center py-8 text-gray-400">\u672A\u627E\u5230\u5339\u914D\u7684\u7AD9\u70B9</div>';
    }
    this.stationListTarget.innerHTML = html;
  }
  selectPopularRoute(event) {
    const element = event.currentTarget;
    const origin = element.dataset.origin;
    const destination = element.dataset.destination;
    if (origin && destination) {
      const stations = this.currentRegion === "japan" ? this.japanStations : this.europeStations;
      let originStation;
      let destinationStation;
      Object.values(stations).forEach((stationList) => {
        stationList.forEach((station) => {
          if (station.name === origin) originStation = station;
          if (station.name === destination) destinationStation = station;
        });
      });
      if (originStation) {
        this.originInputTarget.value = originStation.name;
        this.originTextTarget.textContent = originStation.name;
        const subtitle = this.originTextTarget.nextElementSibling;
        if (subtitle) subtitle.textContent = originStation.nameEn;
      }
      if (destinationStation) {
        this.destinationInputTarget.value = destinationStation.name;
        this.destinationTextTarget.textContent = destinationStation.name;
        const subtitle = this.destinationTextTarget.nextElementSibling;
        if (subtitle) subtitle.textContent = destinationStation.nameEn;
      }
      this.closeStationModal();
    }
  }
};

// app/javascript/controllers/homestay_search_controller.ts
var homestay_search_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.currentLocationType = "domestic";
    this.lastDomesticCity = "\u5317\u4EAC";
    this.lastInternationalCity = "\u9999\u6E2F";
  }
  static {
    this.targets = [
      "searchForm",
      "cityInput",
      "cityDisplay",
      "checkInInput",
      "checkOutInput",
      "roomsInput",
      "adultsInput",
      "childrenInput",
      "queryInput",
      "domesticTab",
      "internationalTab",
      "domesticIndicator",
      "internationalIndicator"
    ];
  }
  connect() {
    console.log("HomestaySearch connected");
    if (this.hasCityInputTarget) {
      const currentCity = this.cityInputTarget.value;
      if (currentCity) {
        this.lastDomesticCity = currentCity;
        console.log("HomestaySearch: Initialized lastDomesticCity to:", currentCity);
      }
    }
    document.addEventListener("city-selector:city-selected-for-hotel", this.handleCityUpdate.bind(this));
    document.addEventListener("hotel-date-picker:dates-selected", this.handleDateUpdate.bind(this));
    document.addEventListener("hotel-guest-selector:guests-updated", this.handleGuestUpdate.bind(this));
  }
  disconnect() {
    console.log("HomestaySearch disconnected");
    document.removeEventListener("city-selector:city-selected-for-hotel", this.handleCityUpdate.bind(this));
    document.removeEventListener("hotel-date-picker:dates-selected", this.handleDateUpdate.bind(this));
    document.removeEventListener("hotel-guest-selector:guests-updated", this.handleGuestUpdate.bind(this));
  }
  // Handle city selection update from city-selector
  handleCityUpdate(event) {
    const customEvent = event;
    const { cityName, isInternational } = customEvent.detail;
    console.log("HomestaySearch: Received city update:", cityName, "isInternational:", isInternational);
    if (isInternational) {
      this.lastInternationalCity = cityName;
    } else {
      this.lastDomesticCity = cityName;
    }
    if (this.hasCityInputTarget) {
      this.cityInputTarget.value = cityName;
      console.log("HomestaySearch: Updated city input to:", cityName);
    }
    if (isInternational) {
      this.switchToInternational(false);
    } else {
      this.switchToDomestic(false);
    }
  }
  // Handle date selection update from hotel-date-picker
  handleDateUpdate(event) {
    const customEvent = event;
    const { checkIn, checkOut } = customEvent.detail;
    console.log("HomestaySearch: Received date update:", { checkIn, checkOut });
    if (this.hasCheckInInputTarget) {
      this.checkInInputTarget.value = checkIn;
      console.log("HomestaySearch: Updated check-in to:", checkIn);
    }
    if (this.hasCheckOutInputTarget) {
      this.checkOutInputTarget.value = checkOut;
      console.log("HomestaySearch: Updated check-out to:", checkOut);
    }
  }
  // Handle guest selection update from hotel-guest-selector
  handleGuestUpdate(event) {
    const customEvent = event;
    const { rooms, adults, children } = customEvent.detail;
    console.log("HomestaySearch: Received guest update:", { rooms, adults, children });
    if (this.hasRoomsInputTarget) {
      this.roomsInputTarget.value = rooms.toString();
      console.log("HomestaySearch: Updated rooms to:", rooms);
    }
    if (this.hasAdultsInputTarget) {
      this.adultsInputTarget.value = adults.toString();
      console.log("HomestaySearch: Updated adults to:", adults);
    }
    if (this.hasChildrenInputTarget) {
      this.childrenInputTarget.value = children.toString();
      console.log("HomestaySearch: Updated children to:", children);
    }
  }
  openSearchModal() {
    const keyword = prompt("\u8BF7\u8F93\u5165\u6C11\u5BBF\u540D\u79F0\u3001\u5730\u540D\u6216\u5173\u952E\u8BCD\uFF1A");
    if (keyword !== null && this.hasQueryInputTarget) {
      this.queryInputTarget.value = keyword;
      if (this.searchFormTarget) {
        this.searchFormTarget.requestSubmit();
      }
    }
  }
  // Switch to domestic tab
  switchToDomestic(updateCity = true) {
    if (this.currentLocationType === "domestic") return;
    console.log("HomestaySearch: Switching to domestic");
    this.currentLocationType = "domestic";
    if (updateCity) {
      if (this.hasCityInputTarget) {
        this.cityInputTarget.value = this.lastDomesticCity;
        console.log("HomestaySearch: Restored domestic city to:", this.lastDomesticCity);
      }
      if (this.hasCityDisplayTarget) {
        this.cityDisplayTarget.textContent = this.lastDomesticCity;
        console.log("HomestaySearch: Updated city display to:", this.lastDomesticCity);
      }
    }
    const domesticSpan = this.domesticTabTarget.querySelector("span");
    if (domesticSpan) {
      domesticSpan.classList.remove("font-medium");
      domesticSpan.classList.add("font-bold");
    }
    this.domesticTabTarget.classList.remove("text-gray-500");
    this.domesticTabTarget.classList.add("text-gray-800");
    this.domesticIndicatorTarget.classList.remove("hidden");
    const internationalSpan = this.internationalTabTarget.querySelector("span");
    if (internationalSpan) {
      internationalSpan.classList.remove("font-bold");
      internationalSpan.classList.add("font-medium");
    }
    this.internationalTabTarget.classList.remove("text-gray-800");
    this.internationalTabTarget.classList.add("text-gray-500");
    this.internationalIndicatorTarget.classList.add("hidden");
  }
  // Switch to international tab
  switchToInternational(updateCity = true) {
    if (this.currentLocationType === "international") return;
    console.log("HomestaySearch: Switching to international");
    this.currentLocationType = "international";
    if (updateCity) {
      if (this.hasCityInputTarget) {
        this.cityInputTarget.value = this.lastInternationalCity;
        console.log("HomestaySearch: Restored international city to:", this.lastInternationalCity);
      }
      if (this.hasCityDisplayTarget) {
        this.cityDisplayTarget.textContent = this.lastInternationalCity;
        console.log("HomestaySearch: Updated city display to:", this.lastInternationalCity);
      }
    }
    const internationalSpan = this.internationalTabTarget.querySelector("span");
    if (internationalSpan) {
      internationalSpan.classList.remove("font-medium");
      internationalSpan.classList.add("font-bold");
    }
    this.internationalTabTarget.classList.remove("text-gray-500");
    this.internationalTabTarget.classList.add("text-gray-800");
    this.internationalIndicatorTarget.classList.remove("hidden");
    const domesticSpan = this.domesticTabTarget.querySelector("span");
    if (domesticSpan) {
      domesticSpan.classList.remove("font-bold");
      domesticSpan.classList.add("font-medium");
    }
    this.domesticTabTarget.classList.remove("text-gray-800");
    this.domesticTabTarget.classList.add("text-gray-500");
    this.domesticIndicatorTarget.classList.add("hidden");
  }
};

// app/javascript/controllers/internet_services_controller.ts
var internet_services_controller_default = class extends Controller {
  connect() {
    console.log("InternetServices connected");
  }
  switchTab(event) {
  }
};

// app/javascript/controllers/sim_card_filter_controller.ts
var sim_card_filter_controller_default = class extends Controller {
  connect() {
    console.log("SimCardFilter connected");
  }
  selectDelivery(event) {
    const button = event.currentTarget;
    const method = button.dataset.method;
    const allButtons = this.element.querySelectorAll("[data-method]");
    allButtons.forEach((b) => {
      b.classList.remove("font-medium");
      b.classList.add("text-gray-700");
    });
    button.classList.add("font-medium");
  }
  selectDays(event) {
    const button = event.currentTarget;
    const allButtons = this.element.querySelectorAll("[data-days]");
    allButtons.forEach((b) => {
      b.classList.remove("bg-[#FFF8D8]", "border-[#FFCC00]", "font-medium");
      b.classList.add("bg-gray-50", "text-gray-700");
      b.querySelectorAll(".absolute").forEach((el) => el.remove());
    });
    button.classList.add("bg-[#FFF8D8]", "border-[#FFCC00]", "font-medium");
    button.classList.remove("bg-gray-50", "text-gray-700");
    const checkmarkHTML = `
      <div class="absolute bottom-0 right-0 w-3 h-3 bg-[#FFCC00] rounded-tl-lg"></div>
      <svg class="absolute bottom-0.5 right-0.5 w-1.5 h-1.5 text-black z-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path>
      </svg>
    `;
    button.insertAdjacentHTML("beforeend", checkmarkHTML);
  }
  selectData(event) {
    const button = event.currentTarget;
    const allButtons = this.element.querySelectorAll("[data-data]");
    allButtons.forEach((b) => {
      b.classList.remove("bg-[#FFF8D8]", "border-[#FFCC00]", "font-medium");
      b.classList.add("bg-gray-50", "text-gray-700");
      b.querySelectorAll(".absolute").forEach((el) => el.remove());
    });
    button.classList.add("bg-[#FFF8D8]", "border-[#FFCC00]", "font-medium");
    button.classList.remove("bg-gray-50", "text-gray-700");
    const checkmarkHTML = `
      <div class="absolute bottom-0 right-0 w-3 h-3 bg-[#FFCC00] rounded-tl-lg"></div>
      <svg class="absolute bottom-0.5 right-0.5 w-1.5 h-1.5 text-black z-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path>
      </svg>
    `;
    button.insertAdjacentHTML("beforeend", checkmarkHTML);
  }
};

// app/javascript/controllers/data_plan_controller.ts
var data_plan_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedPlanId = "";
    this.selectedPrice = 35;
  }
  static {
    this.targets = ["totalPrice", "paymentButton"];
  }
  connect() {
    console.log("DataPlan connected");
  }
  selectPlan(event) {
    const card = event.currentTarget;
    const planId = card.dataset.planId || "";
    const price = parseFloat(card.dataset.planPrice || "35");
    this.selectedPlanId = planId;
    this.selectedPrice = price;
    if (this.hasTotalPriceTarget) {
      this.totalPriceTarget.textContent = price.toFixed(0);
    }
    if (this.hasPaymentButtonTarget) {
      const url = new URL(this.paymentButtonTarget.href);
      url.searchParams.set("orderable_id", planId);
      this.paymentButtonTarget.href = url.toString();
    }
    const allCards = this.element.querySelectorAll("[data-plan-id]");
    allCards.forEach((c) => {
      c.classList.remove("bg-[#FFF9E6]", "border-[#FFD200]");
      c.classList.add("bg-[#F7F8FA]");
      const checkmark = c.querySelector(".absolute");
      if (checkmark) checkmark.remove();
    });
    card.classList.add("bg-[#FFF9E6]", "border-[#FFD200]");
    card.classList.remove("bg-[#F7F8FA]");
    const checkmarkHTML = `
      <div class="absolute bottom-0 right-0 w-0 h-0 border-solid border-[0_0_20px_24px] border-transparent border-b-[#FFD200] rounded-br-lg">
        <svg class="absolute bottom-[-16px] right-[2px] w-2 h-2 text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="4">
          <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path>
        </svg>
      </div>
    `;
    card.insertAdjacentHTML("beforeend", checkmarkHTML);
  }
};

// app/javascript/controllers/wifi_booking_controller.ts
var wifi_booking_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedPlanId = "";
    this.dailyPrice = 17;
    this.days = 7;
    this.currentDeliveryMethod = "pickup";
  }
  static {
    this.targets = [
      "quantity",
      "totalPrice",
      "contactName",
      "contactPhone",
      "dateRange",
      "mailTab",
      "pickupTab",
      "addressSection",
      "mailAddress"
    ];
  }
  connect() {
    const firstPlan = this.element.querySelector("[data-wifi-id]");
    if (firstPlan) {
      const id2 = firstPlan.getAttribute("data-wifi-id");
      const price = firstPlan.getAttribute("data-wifi-price");
      if (id2) this.selectedPlanId = id2;
      if (price) this.dailyPrice = parseFloat(price);
    }
    this.updateTotalPrice();
    this.updatePaymentButton();
  }
  selectPlan(event) {
    const card = event.currentTarget;
    const planId = card.dataset.wifiId || "";
    const price = parseFloat(card.dataset.wifiPrice || "17");
    this.selectedPlanId = planId;
    this.dailyPrice = price;
    this.updateTotalPrice();
    this.updatePaymentButton();
    const allCards = this.element.querySelectorAll("[data-wifi-id]");
    allCards.forEach((c) => {
      c.classList.remove("bg-[#FFFDF2]", "border-[#FFDD00]");
      c.classList.add("bg-white");
      const checkmark = c.querySelector(".bg-[#FFDD00]");
      if (checkmark) {
        checkmark.outerHTML = '<div class="w-5 h-5 ml-2 border border-gray-300 rounded-full"></div>';
      }
    });
    card.classList.add("bg-[#FFFDF2]", "border-[#FFDD00]");
    card.classList.remove("bg-white");
    const circle = card.querySelector(".border-gray-300");
    if (circle) {
      const checkmarkSVG = '<svg class="w-3.5 h-3.5 text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>';
      const checkmarkHTML = `<div class="w-5 h-5 ml-2 bg-[#FFDD00] rounded-full flex items-center justify-center">${checkmarkSVG}</div>`;
      circle.outerHTML = checkmarkHTML;
    }
  }
  selectDelivery(event) {
    event.preventDefault();
    const button = event.currentTarget;
    const method = button.dataset.method;
    if (!method) return;
    this.currentDeliveryMethod = method;
    if (this.hasMailTabTarget && this.hasPickupTabTarget) {
      this.mailTabTarget.classList.remove("font-bold", "bg-white", "shadow-sm", "text-gray-800");
      this.mailTabTarget.classList.add("text-gray-500");
      this.pickupTabTarget.classList.remove("font-bold", "bg-white", "shadow-sm", "text-gray-800");
      this.pickupTabTarget.classList.add("text-gray-500");
      if (method === "mail") {
        this.mailTabTarget.classList.remove("text-gray-500");
        this.mailTabTarget.classList.add("font-bold", "bg-white", "shadow-sm", "text-gray-800");
        if (this.hasAddressSectionTarget) this.addressSectionTarget.classList.add("hidden");
        if (this.hasMailAddressTarget) this.mailAddressTarget.classList.remove("hidden");
      } else {
        this.pickupTabTarget.classList.remove("text-gray-500");
        this.pickupTabTarget.classList.add("font-bold", "bg-white", "shadow-sm", "text-gray-800");
        if (this.hasAddressSectionTarget) this.addressSectionTarget.classList.remove("hidden");
        if (this.hasMailAddressTarget) this.mailAddressTarget.classList.add("hidden");
      }
    }
  }
  increase() {
    const currentQty = parseInt(this.quantityTarget.textContent || "1");
    this.quantityTarget.textContent = (currentQty + 1).toString();
    this.updateTotalPrice();
  }
  decrease() {
    const currentQty = parseInt(this.quantityTarget.textContent || "1");
    if (currentQty > 1) {
      this.quantityTarget.textContent = (currentQty - 1).toString();
      this.updateTotalPrice();
    }
  }
  updateTotalPrice() {
    const quantity = parseInt(this.quantityTarget.textContent || "1");
    const total = this.dailyPrice * this.days * quantity;
    if (this.hasTotalPriceTarget) {
      this.totalPriceTarget.textContent = total.toFixed(0);
    }
  }
  updatePaymentButton() {
    console.log("[WiFi] updatePaymentButton called, selectedPlanId:", this.selectedPlanId);
    const paymentLink = this.element.querySelector("a#wifi-payment-link");
    console.log("[WiFi] Found paymentLink:", paymentLink);
    if (paymentLink && this.selectedPlanId) {
      const url = new URL(paymentLink.href);
      url.searchParams.set("orderable_id", this.selectedPlanId);
      paymentLink.href = url.toString();
      console.log("[WiFi] Updated paymentLink href to:", paymentLink.href);
    }
  }
};

// app/javascript/controllers/internet_order_form_controller.ts
var internet_order_form_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.basePrice = 0;
  }
  static {
    this.targets = ["quantity", "totalPrice"];
  }
  connect() {
    console.log("InternetOrderForm connected");
    const totalPriceField = this.element.querySelector('[data-internet-order-form-target="totalPriceField"]');
    if (totalPriceField) {
      this.basePrice = parseFloat(totalPriceField.value) || 0;
    }
  }
  selectAddress(event) {
    const radio = event.target;
    const selectedIndex = parseInt(radio.value);
    const labels = this.element.querySelectorAll('[data-internet-order-form-target="mailSection"] label');
    labels.forEach((label, index) => {
      if (index === selectedIndex) {
        label.classList.add("border-[#FFDD00]", "bg-[#FFFEF8]");
        label.classList.remove("border-gray-200");
      } else {
        label.classList.remove("border-[#FFDD00]", "bg-[#FFFEF8]");
        label.classList.add("border-gray-200");
      }
      const hiddenFields = label.querySelectorAll('input[type="hidden"]');
      hiddenFields.forEach((field) => {
        field.disabled = index !== selectedIndex;
      });
    });
  }
  selectPassenger(event) {
    const radio = event.target;
    const selectedIndex = parseInt(radio.value);
    const labels = this.element.querySelectorAll('[data-internet-order-form-target="pickupSection"] label');
    labels.forEach((label, index) => {
      if (index === selectedIndex) {
        label.classList.add("border-[#FFDD00]", "bg-[#FFFEF8]");
        label.classList.remove("border-gray-200");
      } else {
        label.classList.remove("border-[#FFDD00]", "bg-[#FFFEF8]");
        label.classList.add("border-gray-200");
      }
      const hiddenFields = label.querySelectorAll('input[type="hidden"]');
      hiddenFields.forEach((field) => {
        field.disabled = index !== selectedIndex;
      });
    });
  }
  increase() {
    const currentQty = parseInt(this.quantityTarget.textContent || "1");
    const newQty = currentQty + 1;
    this.quantityTarget.textContent = newQty.toString();
    this.updateQuantityField(newQty);
    this.updateTotalPrice(newQty);
  }
  decrease() {
    const currentQty = parseInt(this.quantityTarget.textContent || "1");
    if (currentQty > 1) {
      const newQty = currentQty - 1;
      this.quantityTarget.textContent = newQty.toString();
      this.updateQuantityField(newQty);
      this.updateTotalPrice(newQty);
    }
  }
  updateRentalDays(event) {
    const input = event.target;
    const days = parseInt(input.value) || 1;
    this.updateTotalPrice(days);
    const rentalDaysField = this.element.querySelector('[data-internet-order-form-target="rentalDaysField"]');
    if (rentalDaysField) {
      rentalDaysField.value = days.toString();
      const pickupDateField = rentalDaysField.closest("div")?.querySelector('input[name*="[pickup_date]"]');
      const returnDateField = rentalDaysField.closest("div")?.querySelector('input[name*="[return_date]"]');
      if (pickupDateField && returnDateField) {
        const pickupDate = new Date(pickupDateField.value);
        const returnDate = new Date(pickupDate);
        returnDate.setDate(returnDate.getDate() + days);
        returnDateField.value = returnDate.toISOString().split("T")[0];
      }
    }
  }
  selectDeliveryMethod(event) {
    const radio = event.target;
    const mailSection = this.element.querySelector('[data-internet-order-form-target="mailSection"]');
    const pickupSection = this.element.querySelector('[data-internet-order-form-target="pickupSection"]');
    const mailLabel = this.element.querySelector('[data-internet-order-form-target="mailLabel"]');
    const pickupLabel = this.element.querySelector('[data-internet-order-form-target="pickupLabel"]');
    if (radio.value === "mail") {
      mailSection?.classList.remove("hidden");
      pickupSection?.classList.add("hidden");
      mailLabel?.classList.add("border-[#FFDD00]", "bg-[#FFFEF8]");
      pickupLabel?.classList.remove("border-[#FFDD00]", "bg-[#FFFEF8]");
    } else {
      mailSection?.classList.add("hidden");
      pickupSection?.classList.remove("hidden");
      pickupLabel?.classList.add("border-[#FFDD00]", "bg-[#FFFEF8]");
      mailLabel?.classList.remove("border-[#FFDD00]", "bg-[#FFFEF8]");
    }
  }
  updateQuantityField(quantity) {
    const quantityField = this.element.querySelector('[data-internet-order-form-target="quantityField"]');
    if (quantityField) {
      quantityField.value = quantity.toString();
    }
  }
  updateTotalPrice(multiplier) {
    const total = this.basePrice * multiplier;
    if (this.hasTotalPriceTarget) {
      this.totalPriceTarget.textContent = total.toFixed(0);
    }
    const totalPriceField = this.element.querySelector('[data-internet-order-form-target="totalPriceField"]');
    if (totalPriceField) {
      totalPriceField.value = total.toString();
    }
  }
};

// app/javascript/controllers/product_card_controller.ts
var product_card_controller_default = class extends Controller {
  select(event) {
    event.preventDefault();
    const card = this.element;
    document.querySelectorAll('[data-controller="product-card"]').forEach((el) => {
      const checkbox = el.querySelector(".w-5.h-5.rounded-full");
      if (checkbox && !checkbox.classList.contains("border")) {
        el.classList.remove("border-[#FFCC00]", "bg-[#FFFEF8]");
        el.classList.add("border-gray-100", "bg-white");
      }
    });
    card.classList.remove("border-gray-100", "bg-white");
    card.classList.add("border-[#FFCC00]", "bg-[#FFFEF8]");
  }
};

// app/javascript/controllers/sim_card_booking_controller.ts
var sim_card_booking_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.basePrice = 9.9;
  }
  static {
    this.targets = ["quantity", "totalPrice"];
  }
  static {
    this.values = { orderableType: String };
  }
  connect() {
    const firstProduct = document.querySelector('[data-controller="product-card"]');
    if (firstProduct) {
      const priceEl = firstProduct.querySelector(".text-xl.font-bold.text-\\[\\#FF4400\\]");
      if (priceEl) {
        this.basePrice = parseFloat(priceEl.textContent || "9.9");
      }
    }
    this.updateTotalPrice();
  }
  decrease(event) {
    event.preventDefault();
    const currentQty = parseInt(this.quantityTarget.textContent || "1");
    if (currentQty > 1) {
      this.quantityTarget.textContent = (currentQty - 1).toString();
      this.updateTotalPrice();
    }
  }
  increase(event) {
    event.preventDefault();
    const currentQty = parseInt(this.quantityTarget.textContent || "1");
    this.quantityTarget.textContent = (currentQty + 1).toString();
    this.updateTotalPrice();
  }
  checkout(event) {
    event.preventDefault();
    const allCards = document.querySelectorAll('[data-controller="product-card"]');
    let selectedCard = null;
    allCards.forEach((card) => {
      const classes = card.className;
      if (classes.includes("FFCC00") || classes.includes("border-[#FFCC00]")) {
        selectedCard = card;
      }
    });
    if (!selectedCard && allCards.length > 0) {
      selectedCard = allCards[0];
    }
    if (!selectedCard) {
      alert("\u8BF7\u9009\u62E9\u4E00\u4E2ASIM\u5361\u4EA7\u54C1");
      return;
    }
    const orderableId = selectedCard.dataset.productId;
    const orderableType = this.orderableTypeValue;
    const quantity = this.quantityTarget.textContent;
    const url = `/internet_orders/new?orderable_type=${orderableType}&orderable_id=${orderableId}&quantity=${quantity}`;
    window.location.href = url;
  }
  updateTotalPrice() {
    const quantity = parseInt(this.quantityTarget.textContent || "1");
    const total = this.basePrice * quantity;
    this.totalPriceTarget.textContent = total.toFixed(1);
  }
};

// app/javascript/controllers/qrcode_modal_controller.ts
var qrcode_modal_controller_default = class extends Controller {
  static {
    this.targets = ["modal", "content"];
  }
  connect() {
    console.log("QrcodeModal controller connected");
  }
  // 
  show(event) {
    event.preventDefault();
    this.modalTarget.classList.remove("hidden");
    setTimeout(() => {
      this.contentTarget.classList.add("scale-100", "opacity-100");
    }, 10);
  }
  // 
  hide(event) {
    event.preventDefault();
    this.contentTarget.classList.remove("scale-100", "opacity-100");
    setTimeout(() => {
      this.modalTarget.classList.add("hidden");
    }, 200);
  }
  // 
  backdropClick(event) {
    if (event.target === this.modalTarget) {
      this.hide(event);
    }
  }
};

// app/javascript/controllers/location_selector_controller.ts
var location_selector_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedLocation = null;
  }
  static {
    this.targets = [
      "modal",
      "searchInput",
      "locationList",
      "locationInput",
      "locationDisplay",
      "recentSection",
      "recentList"
    ];
  }
  static {
    this.values = {
      locationType: String
      // "from" or "to"
    };
  }
  connect() {
    console.log("LocationSelector connected");
  }
  disconnect() {
    console.log("LocationSelector disconnected");
  }
  openModal() {
    this.modalTarget.classList.remove("hidden");
    this.searchInputTarget.value = "";
    this.searchInputTarget.focus();
    document.body.style.overflow = "hidden";
  }
  closeModal() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  stopPropagation(event) {
    event.stopPropagation();
  }
  selectLocation(event) {
    const button = event.currentTarget;
    const name = button.dataset.locationName || "";
    const address = button.dataset.locationAddress || "";
    this.selectedLocation = { name, address };
    this.locationListTarget.querySelectorAll("button").forEach((btn) => {
      btn.classList.remove("bg-primary-light", "border-primary");
    });
    button.classList.add("bg-primary-light", "border", "border-primary");
  }
  confirm() {
    if (!this.selectedLocation) {
      return;
    }
    if (this.hasLocationInputTarget) {
      this.locationInputTarget.value = this.selectedLocation.name;
    }
    if (this.hasLocationDisplayTarget) {
      this.locationDisplayTarget.textContent = this.selectedLocation.name;
      this.locationDisplayTarget.classList.remove("text-text-muted");
      this.locationDisplayTarget.classList.add("text-text-primary");
    }
    this.saveToRecent(this.selectedLocation);
    this.closeModal();
  }
  search(event) {
    const input = event.target;
    const query = input.value.toLowerCase().trim();
    const buttons = this.locationListTarget.querySelectorAll("button[data-location-name]");
    buttons.forEach((button) => {
      const element = button;
      const name = element.dataset.locationName?.toLowerCase() || "";
      const address = element.dataset.locationAddress?.toLowerCase() || "";
      if (name.includes(query) || address.includes(query)) {
        element.classList.remove("hidden");
      } else {
        element.classList.add("hidden");
      }
    });
  }
  saveToRecent(location2) {
    try {
      const key = "recent_transfer_locations";
      const stored = localStorage.getItem(key);
      let recent = stored ? JSON.parse(stored) : [];
      recent = recent.filter((loc) => loc.name !== location2.name);
      recent.unshift(location2);
      recent = recent.slice(0, 5);
      localStorage.setItem(key, JSON.stringify(recent));
      this.updateRecentList(recent);
    } catch (error3) {
      console.error("Failed to save recent location:", error3);
    }
  }
  updateRecentList(locations) {
    if (locations.length === 0) {
      this.recentSectionTarget.classList.add("hidden");
      return;
    }
    this.recentSectionTarget.classList.remove("hidden");
    const html = locations.map((loc) => `
      <button
        type="button"
        data-action="click->location-selector#selectLocation"
        data-location-name="${loc.name}"
        data-location-address="${loc.address}"
        class="w-full text-left p-3 rounded-lg hover:bg-surface-hover transition-colors">
        <div class="flex items-start">
          <svg class="w-5 h-5 text-text-muted mt-0.5 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
          </svg>
          <div class="flex-1">
            <div class="text-text-primary font-medium">${loc.name}</div>
            <div class="text-xs text-text-muted mt-0.5">${loc.address}</div>
          </div>
        </div>
      </button>
    `).join("");
    this.recentListTarget.innerHTML = html;
  }
};

// app/javascript/controllers/transfer_search_controller.ts
var transfer_search_controller_default = class extends Controller {
  static {
    this.values = {
      transferType: String,
      serviceType: String,
      flightId: String,
      trainId: String
    };
  }
  connect() {
    console.log("TransferSearch connected");
  }
  handleSearch(event) {
    event.preventDefault();
    const locationInput = document.querySelector('[data-location-selector-target="locationInput"]');
    const locationTo = locationInput?.value;
    if (!locationTo || locationTo.trim() === "") {
      alert("\u8BF7\u5148\u9009\u62E9\u4E0B\u8F66\u70B9");
      const modalButton = document.querySelector('[data-action="click->location-selector#openModal"]');
      if (modalButton) {
        modalButton.click();
      }
      return;
    }
    let locationFrom = "";
    if (this.flightIdValue) {
      const flightLocationElement = document.querySelector(".text-xl.font-bold.text-text-primary");
      locationFrom = flightLocationElement?.textContent?.trim() || "";
    } else if (this.trainIdValue) {
      const trainLocationElement = document.querySelector(".text-xl.font-bold.text-text-primary");
      locationFrom = trainLocationElement?.textContent?.trim() || "";
    }
    const params = new URLSearchParams();
    params.append("transfer_type", this.transferTypeValue);
    params.append("service_type", this.serviceTypeValue);
    params.append("location_to", locationTo);
    if (locationFrom) {
      params.append("location_from", locationFrom);
    }
    if (this.flightIdValue) {
      params.append("flight_id", this.flightIdValue);
    }
    if (this.trainIdValue) {
      params.append("train_id", this.trainIdValue);
    }
    window.location.href = `/transfers/packages?${params.toString()}`;
  }
};

// app/javascript/controllers/address_selector_controller.ts
var address_selector_controller_default = class extends Controller {
  static {
    this.targets = ["modal", "name", "phone", "address", "selectedInfo"];
  }
  static {
    this.values = {
      addressId: String
    };
  }
  connect() {
    console.log("AddressSelector connected");
  }
  openModal() {
    this.modalTarget.classList.remove("hidden");
  }
  closeModal() {
    this.modalTarget.classList.add("hidden");
  }
  selectAddress(event) {
    const target = event.currentTarget;
    const addressId = target.dataset.addressId || "";
    const name = target.dataset.name || "";
    const phone = target.dataset.phone || "";
    const address = target.dataset.address || "";
    this.addressIdValue = addressId;
    this.nameTarget.textContent = name;
    this.phoneTarget.textContent = phone;
    this.addressTarget.textContent = address;
    const visaOrderElement = document.querySelector('[data-controller*="visa-order"]');
    if (visaOrderElement) {
      const input = visaOrderElement.querySelector('[data-visa-order-target="deliveryAddress"]');
      if (input) {
        input.value = address;
      }
    }
    this.closeModal();
  }
};

// app/javascript/controllers/search_controller.ts
var search_controller_default = class extends Controller {
  static {
    this.targets = ["input"];
  }
  search(event) {
    event.preventDefault();
    let query = this.inputTarget.value.trim();
    if (query === "") {
      query = this.inputTarget.placeholder;
    }
    window.showToast(`\u641C\u7D22"${query}"\u529F\u80FD\u5373\u5C06\u4E0A\u7EBF\uFF0C\u656C\u8BF7\u671F\u5F85`);
  }
  clear() {
    this.inputTarget.value = "";
    this.inputTarget.focus();
  }
};

// app/javascript/controllers/smart_back_controller.ts
var smart_back_controller_default = class extends Controller {
  static {
    this.values = {
      fallback: { type: String, default: "/" }
    };
  }
  connect() {
  }
  /**
   * Smart back navigation based on referrer
   * - If user came from same site: go back
   * - If user came from external site or direct access: go to fallback
   */
  goBack(event) {
    event.preventDefault();
    const referrer = document.referrer;
    const currentHost = window.location.host;
    if (referrer && referrer.includes(currentHost)) {
      if (window.history.length > 1) {
        window.history.back();
        return;
      }
    }
    window.location.href = this.fallbackValue;
  }
};

// app/javascript/controllers/tour_group_tabs_controller.ts
var tour_group_tabs_controller_default = class extends Controller {
  static {
    this.targets = [
      // Add your targets here, e.g.:
      // "messageInput", "messagesContainer", "sendButton"
    ];
  }
  static {
    this.values = {
      // Add your values here, e.g.:
      // roomId: String,
      // userId: String
    };
  }
  // Declare your targets and values
  // declare readonly messageInputTarget: HTMLInputElement
  // declare readonly messagesContainerTarget: HTMLElement
  // declare readonly roomIdValue: string
  connect() {
    console.log("TourGroupTabs connected");
  }
  disconnect() {
    console.log("TourGroupTabs disconnected");
  }
  // Add your action methods here
  // Example:
  // click(): void {
  //   console.log("Button clicked")
  // }
  // FORMS: Turbo + Turbo Streams handle everything automatically
  // - Forms submit via AJAX (Turbo Drive)
  // - Server responds with format.turbo_stream
  // - Turbo Streams update DOM automatically
  // - NO manual form handling needed in Stimulus
  //
  // Use Stimulus for:
  // - UI interactions (toggle, show/hide)
  // - Input validation/formatting
  // - Dynamic form fields
};

// app/javascript/controllers/index.ts
var application = Application.start();
application.register("theme", theme_controller_default);
application.register("dropdown", dropdown_controller_default);
application.register("sdk-integration", sdk_integration_controller_default);
application.register("clipboard", clipboard_controller_default);
application.register("city-selector", city_selector_controller_default);
application.register("flight-search", flight_search_controller_default);
application.register("date-picker", date_picker_controller_default);
application.register("booking", booking_controller_default);
application.register("coupon", coupon_controller_default);
application.register("destination", destination_controller_default);
application.register("region-selector", region_selector_controller_default);
application.register("hotel-search", hotel_search_controller_default);
application.register("hotel-detail", hotel_detail_controller_default);
application.register("service-grid", service_grid_controller_default);
application.register("passenger-selector", passenger_selector_controller_default);
application.register("cabin-selector", cabin_selector_controller_default);
application.register("trip-type", trip_type_controller_default);
application.register("return-date-picker", return_date_picker_controller_default);
application.register("round-trip-selector", round_trip_selector_controller_default);
application.register("train-search", train_search_controller_default);
application.register("train-list", train_list_controller_default);
application.register("train-city-selector", train_city_selector_controller_default);
application.register("infinite-scroll", infinite_scroll_controller_default);
application.register("deep-travel", deep_travel_controller_default);
application.register("multi-city", multi_city_controller_default);
application.register("flight-filter", flight_filter_controller_default);
application.register("flight-sort", flight_sort_controller_default);
application.register("date-link", date_link_controller_default);
application.register("hotel-guest-selector", hotel_guest_selector_controller_default);
application.register("hotel-date-picker", hotel_date_picker_controller_default);
application.register("payment-modal", payment_modal_controller_default);
application.register("payment-confirmation", payment_confirmation_controller_default);
application.register("hotel-tabs", hotel_tabs_controller_default);
application.register("hotel-traveler-selector", hotel_traveler_selector_controller_default);
application.register("toast", toast_controller_default);
application.register("toast-trigger", toast_trigger_controller_default);
application.register("hotel-booking", hotel_booking_controller_default);
application.register("tour-detail", tour_detail_controller_default);
application.register("carousel", carousel_controller_default);
application.register("scroll-spy", scroll_spy_controller_default);
application.register("package-switcher", package_switcher_controller_default);
application.register("booking-modal", booking_modal_controller_default);
application.register("bottom-bar", bottom_bar_controller_default);
application.register("insurance-selector", insurance_selector_controller_default);
application.register("tour-traveler-selector", tour_traveler_selector_controller_default);
application.register("special-flights-form", special_flights_form_controller_default);
application.register("train-booking", train_booking_controller_default);
application.register("train-booking-lock", train_booking_lock_controller_default);
application.register("train-seat-selector", train_seat_selector_controller_default);
application.register("tour-group-filter", tour_group_filter_controller_default);
application.register("car-rental-tabs", car_rental_tabs_controller_default);
application.register("hotel-package-search", hotel_package_search_controller_default);
application.register("hotel-package-order", hotel_package_order_controller_default);
application.register("pwa-install", pwa_install_controller_default);
application.register("bus-date-picker", bus_date_picker_controller_default);
application.register("bus-ticket-search", bus_ticket_search_controller_default);
application.register("bus-ticket-order", bus_ticket_order_controller_default);
application.register("deep-booking", deep_booking_controller_default);
application.register("visa-order", visa_order_controller_default);
application.register("abroad-region-selector", abroad_region_selector_controller_default);
application.register("abroad-date-picker", abroad_date_picker_controller_default);
application.register("abroad-passenger-selector", abroad_passenger_selector_controller_default);
application.register("abroad-order-form", abroad_order_form_controller_default);
application.register("abroad-ticket-search", abroad_ticket_search_controller_default);
application.register("homestay-search", homestay_search_controller_default);
application.register("internet-services", internet_services_controller_default);
application.register("sim-card-filter", sim_card_filter_controller_default);
application.register("data-plan", data_plan_controller_default);
application.register("wifi-booking", wifi_booking_controller_default);
application.register("internet-order-form", internet_order_form_controller_default);
application.register("product-card", product_card_controller_default);
application.register("sim-card-booking", sim_card_booking_controller_default);
application.register("qrcode-modal", qrcode_modal_controller_default);
application.register("location-selector", location_selector_controller_default);
application.register("transfer-search", transfer_search_controller_default);
application.register("address-selector", address_selector_controller_default);
application.register("search", search_controller_default);
application.register("smart-back", smart_back_controller_default);
application.register("tour-group-tabs", tour_group_tabs_controller_default);
window.Stimulus = application;

// app/javascript/clipboard_utils.ts
function copyToClipboard(text) {
  return new Promise((resolve, reject) => {
    if (navigator.clipboard && window.isSecureContext) {
      navigator.clipboard.writeText(text).then(() => resolve(true)).catch(() => {
        if (fallbackCopy(text)) {
          resolve(true);
        } else {
          reject(new Error("Copy failed"));
        }
      });
    } else {
      if (fallbackCopy(text)) {
        resolve(true);
      } else {
        reject(new Error("Copy failed"));
      }
    }
  });
}
function fallbackCopy(text) {
  const textArea = document.createElement("textarea");
  textArea.value = text;
  textArea.style.position = "fixed";
  textArea.style.opacity = "0";
  document.body.appendChild(textArea);
  textArea.select();
  try {
    const success = document.execCommand("copy");
    document.body.removeChild(textArea);
    return success;
  } catch (error3) {
    document.body.removeChild(textArea);
    return false;
  }
}
window.copyToClipboard = copyToClipboard;

// app/javascript/sdk_utils.ts
var SDKUtils = class {
  constructor() {
    this.isAvailable = this.checkSDKAvailability();
  }
  /**
   * Check if SDK is available in current context
   */
  checkSDKAvailability() {
    return typeof window.sdk !== "undefined" && window.sdk && typeof window.sdk.send === "function";
  }
  /**
   * Send message to chatbox if SDK is available
   * @param {string} message - Message to send
   * @returns {boolean} - Whether message was sent successfully
   */
  sendMessage(message) {
    if (this.isAvailable) {
      try {
        window.sdk.send(message);
        console.log("Message sent to chatbox:", message);
        return true;
      } catch (error3) {
        console.error("Failed to send message to SDK:", error3);
        return false;
      }
    } else {
      console.log("SDK not available. Would send message:", message);
      return false;
    }
  }
  /**
   * Send error details to chatbox for fixing
   * @param {Object} errorInfo - Error information object
   */
  sendErrorForFix(errorInfo = {}) {
    const {
      url = window.location.href,
      path = window.location.pathname.substring(1),
      errorMessage = "Unknown error",
      additionalContext = ""
    } = errorInfo;
    const message = `Fix this error:
URL: ${url}
Error: ${errorMessage}
Path: ${path}${additionalContext ? `

Additional Context:
${additionalContext}` : ""}

Please help me fix this issue.`;
    return this.sendMessage(message);
  }
  /**
   * Refresh SDK availability status
   */
  refresh() {
    this.isAvailable = this.checkSDKAvailability();
    return this.isAvailable;
  }
  /**
   * Get current SDK status
   */
  getStatus() {
    return {
      isAvailable: this.isAvailable,
      hasSDK: typeof window.sdk !== "undefined",
      hasSendMethod: typeof window.sdk?.send === "function"
    };
  }
};
var sdkUtils = new SDKUtils();
window.sendToSDK = (message) => sdkUtils.sendMessage(message);
window.sendErrorToSDK = (errorInfo) => sdkUtils.sendErrorForFix(errorInfo);
window.isSDKAvailable = () => sdkUtils.getStatus().isAvailable;
window.sdkUtils = sdkUtils;

// app/javascript/stimulus_validator.ts
var StimulusValidator = class {
  constructor() {
    this.registeredControllers = /* @__PURE__ */ new Set();
    this.missingControllers = /* @__PURE__ */ new Set();
    this.hasReported = false;
    this.elementIssues = /* @__PURE__ */ new Map();
    this.stimulus = window.Stimulus;
    this.initValidator();
  }
  initValidator() {
    if (!this.isDevelopment()) {
      console.log("StimulusValidator not enable in non-develop environment.");
      return;
    }
    if (!window.Stimulus) {
      console.log("StimulusValidator not enable while Stimulus not found");
      return;
    }
    this.setupStimulusErrorHandler();
    this.collectRegisteredControllers();
    this.validateOnDOMReady();
    this.interceptActionClicks();
  }
  isDevelopment() {
    return !!window.errorHandler;
  }
  setupStimulusErrorHandler() {
    const setupHandler = () => {
      const stimulus = window.Stimulus;
      if (stimulus && typeof stimulus.handleError === "undefined") {
        stimulus.handleError = (error3, message, detail) => {
          console.error("Stimulus Error:", { error: error3, message, detail });
          if (window.errorHandler) {
            let errorMessage = message || error3.message || "Stimulus error occurred";
            let controllerName = "";
            let action = "";
            let subType = "scope-error";
            let suggestion = "";
            let elementInfo = null;
            if (detail) {
              if (detail.identifier) {
                controllerName = detail.identifier;
              }
              if (detail.action) {
                action = detail.action;
              }
              if (detail.element) {
                elementInfo = {
                  tagName: detail.element.tagName,
                  id: detail.element.id,
                  className: detail.element.className,
                  outerHTML: `${detail.element.outerHTML?.substring(0, 200)}...`
                };
              }
            }
            if (error3.message.includes("Controller") && error3.message.includes("is not defined")) {
              subType = "missing-controller";
              const controllerMatch = error3.message.match(/(\w+)Controller is not defined/);
              if (controllerMatch) {
                controllerName = controllerMatch[1].toLowerCase();
                errorMessage = `Stimulus controller "${controllerName}" is not defined or not registered`;
                suggestion = `Make sure to import and register the "${controllerName}" controller in app/javascript/controllers/index.ts. Check if the controller file exists at app/javascript/controllers/${controllerName}_controller.ts`;
              }
            } else if (error3.message.includes("Missing target element")) {
              subType = "missing-target";
              suggestion = "Check that the target element exists in the DOM and has the correct data-[controller]-target attribute";
            } else if (error3.message.includes("Missing action")) {
              subType = "missing-action";
              suggestion = "Verify that the action method exists in the controller class and is properly defined";
            } else if (message && message.includes("click")) {
              subType = "action-click";
              suggestion = "Check if the click action handler exists and the element has the correct data-action attribute";
            }
            window.errorHandler.handleError({
              message: errorMessage,
              type: "stimulus",
              subType,
              controllerName,
              action,
              suggestion,
              elementInfo,
              details: {
                originalMessage: message,
                error: {
                  name: error3.name,
                  message: error3.message,
                  stack: error3.stack
                },
                detail
              },
              timestamp: (/* @__PURE__ */ new Date()).toISOString(),
              filename: "stimulus-application",
              error: error3
            });
          }
        };
        console.log("Stimulus error handling configured via stimulus_validator");
      }
    };
    if (window.Stimulus) {
      setupHandler();
    } else {
      const checkStimulus = () => {
        if (window.Stimulus) {
          setupHandler();
        } else {
          setTimeout(checkStimulus, 100);
        }
      };
      checkStimulus();
    }
  }
  collectRegisteredControllers() {
    try {
      const stimulus = window.Stimulus;
      if (stimulus?.router?.modulesByIdentifier) {
        const modules = stimulus.router.modulesByIdentifier;
        for (const [identifier] of modules) {
          this.registeredControllers.add(identifier);
        }
      }
    } catch (error3) {
      console.warn("Could not access Stimulus controllers:", error3);
    }
  }
  validateOnDOMReady() {
    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", () => this.validateControllers());
    } else {
      this.validateControllers();
    }
    this.observeNewContent();
  }
  validateControllers() {
    const elements = document.querySelectorAll("[data-controller]");
    elements.forEach((element) => {
      const controllers = element.getAttribute("data-controller")?.split(" ") || [];
      controllers.forEach((controller) => {
        const trimmedController = controller.trim();
        if (trimmedController && !this.registeredControllers.has(trimmedController)) {
          this.missingControllers.add(trimmedController);
        } else if (trimmedController && this.registeredControllers.has(trimmedController)) {
          this.validateRequiredTargets(element, trimmedController);
        }
      });
      this.validateElementPositioning(element);
    });
    if (this.missingControllers.size > 0) {
      this.reportMissingControllers();
    }
    if (this.elementIssues.size > 0) {
      this.reportElementIssues();
    }
  }
  observeNewContent() {
    const observer2 = new MutationObserver((mutations) => {
      let hasNewElements = false;
      mutations.forEach((mutation) => {
        if (mutation.type === "childList" && mutation.addedNodes.length > 0) {
          const hasRelevantChanges = Array.from(mutation.addedNodes).some((node) => {
            if (node.nodeType === Node.ELEMENT_NODE) {
              const element = node;
              if (element.id === "js-error-status-bar" || element.closest("#js-error-status-bar")) {
                return false;
              }
              return element.hasAttribute("data-controller") || element.querySelector("[data-controller]");
            }
            return false;
          });
          if (hasRelevantChanges) {
            hasNewElements = true;
          }
        }
      });
      if (hasNewElements) {
        setTimeout(() => this.validateControllers(), 100);
      }
    });
    observer2.observe(document.body, {
      childList: true,
      subtree: true
    });
  }
  reportMissingControllers() {
    if (this.hasReported) {
      return;
    }
    const missingList = Array.from(this.missingControllers);
    this.hasReported = true;
    if (window.errorHandler) {
      window.errorHandler.handleError({
        message: `Missing Stimulus controllers: ${missingList.join(", ")}`,
        type: "stimulus",
        subType: "missing-controller",
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        missingControllers: missingList,
        suggestion: `Run: rails generate stimulus_controller ${missingList[0]}`,
        details: {
          controllers: missingList,
          generatorCommands: missingList.map((name) => `rails generate stimulus_controller ${name}`)
        }
      });
    } else {
      console.error("\u{1F534} Missing Stimulus Controllers:", missingList);
      console.info("\u{1F4A1} Generate missing controllers:", missingList.map(
        (name) => `rails generate stimulus_controller ${name}`
      ).join("\n"));
    }
  }
  validateRequiredTargets(controllerElement, controllerName) {
    try {
      const stimulus = window.Stimulus;
      if (stimulus?.router?.modulesByIdentifier) {
        const module = stimulus.router.modulesByIdentifier.get(controllerName);
        if (module) {
          const controllerClass = module.definition.controllerConstructor;
          const definedTargets = controllerClass.targets || [];
          const missingTargets = [];
          const outOfScopeTargets = [];
          const optionalTargets = this.getOptionalTargets(controllerClass);
          definedTargets.forEach((targetName) => {
            if (optionalTargets.has(targetName)) {
              return;
            }
            const targetSelector = `[data-${controllerName}-target="${targetName}"]`;
            const targetElement = controllerElement.querySelector(targetSelector);
            if (!targetElement) {
              const globalTargetElement = document.querySelector(targetSelector);
              if (globalTargetElement) {
                outOfScopeTargets.push(targetName);
              } else {
                missingTargets.push(targetName);
              }
            }
          });
          if (missingTargets.length > 0) {
            this.reportMissingTargets(controllerName, missingTargets, controllerElement);
          }
          if (outOfScopeTargets.length > 0) {
            this.reportOutOfScopeTargets(controllerName, outOfScopeTargets, controllerElement);
          }
        }
      }
    } catch (error3) {
      console.warn(`Could not validate targets for controller ${controllerName}:`, error3);
    }
  }
  getOptionalTargets(controllerClass) {
    const optionalTargets = /* @__PURE__ */ new Set();
    try {
      const definedTargets = controllerClass.targets || [];
      definedTargets.forEach((targetName) => {
        const capitalizedTarget = targetName.charAt(0).toUpperCase() + targetName.slice(1);
        const hasTargetProperty = `has${capitalizedTarget}Target`;
        if (hasTargetProperty in controllerClass.prototype || Object.getOwnPropertyDescriptor(controllerClass.prototype, hasTargetProperty) || Object.hasOwnProperty.call(controllerClass.prototype, hasTargetProperty)) {
          optionalTargets.add(targetName);
        }
      });
    } catch (error3) {
      console.warn("Could not analyze controller for optional targets:", error3);
    }
    return optionalTargets;
  }
  validateElementPositioning(controllerElement) {
    const controllerName = controllerElement.getAttribute("data-controller")?.split(" ")[0];
    if (!controllerName) return;
    const issues = [];
    this.checkCommonSelectors(controllerElement, controllerName, issues);
    if (issues.length > 0) {
      this.elementIssues.set(controllerName, issues);
    }
  }
  checkCommonSelectors(element, controllerName, issues) {
    const relevantIds = [];
    relevantIds.push(`${controllerName}-input`, `${controllerName}-button`, `${controllerName}-form`);
    relevantIds.forEach((id2) => {
      const globalElement = document.getElementById(id2);
      if (globalElement) {
        const isInScope = globalElement === element || element.contains(globalElement);
        if (!isInScope) {
          issues.push(`Element #${id2} exists but outside controller scope`);
        }
      }
    });
  }
  interceptActionClicks() {
    document.addEventListener("click", (event) => {
      const target = event.target;
      if (!target) return;
      const actionElement = target.closest("[data-action]");
      if (!actionElement) return;
      const actions = actionElement.getAttribute("data-action")?.split(" ") || [];
      actions.forEach((action) => {
        const controllerMatch = action.match(/([\w-]+)#([\w-]+)/);
        if (controllerMatch) {
          const controllerName = controllerMatch[1];
          const methodName = controllerMatch[2];
          if (!this.registeredControllers.has(controllerName)) {
            this.reportMissingActionController(controllerName, action, actionElement);
            return;
          }
          const controllerElement = actionElement.closest(`[data-controller*="${controllerName}"]`);
          if (!controllerElement) {
            this.reportMissingControllerScope(controllerName, action, actionElement);
            return;
          }
          this.checkMethodExists(controllerName, methodName, action, actionElement);
        }
      });
    }, true);
  }
  reportMissingTargets(controllerName, missingTargets, controllerElement) {
    if (window.errorHandler) {
      const targetList = missingTargets.join(", ");
      const targetExamples = missingTargets.map(
        (target) => `<div data-${controllerName}-target="${target}">...</div>`
      ).join("\n");
      window.errorHandler.handleError({
        message: `Stimulus controller "${controllerName}" requires missing target elements: ${targetList}`,
        type: "stimulus",
        subType: "missing-target",
        controllerName,
        missingTargets,
        elementInfo: this.getElementInfo(controllerElement),
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        suggestion: `Add the required target elements to the DOM within the controller scope, or make them optional by adding 'declare readonly has${missingTargets.map((t) => t.charAt(0).toUpperCase() + t.slice(1)).join("Target: boolean, declare readonly has")}Target: boolean' to the controller`,
        details: {
          errorType: "Missing Required Targets",
          controllerName,
          missingTargets,
          requiredElements: targetExamples,
          elementInfo: this.getElementInfo(controllerElement),
          description: `The controller "${controllerName}" defines targets [${targetList}] but these elements are not found in the DOM within the controller scope`
        }
      });
    }
  }
  reportOutOfScopeTargets(controllerName, outOfScopeTargets, controllerElement) {
    if (window.errorHandler) {
      const targetList = outOfScopeTargets.join(", ");
      window.errorHandler.handleError({
        message: `Stimulus controller "${controllerName}" targets exist but are outside controller scope: ${targetList}`,
        type: "stimulus",
        subType: "target-scope-error",
        controllerName,
        outOfScopeTargets,
        elementInfo: this.getElementInfo(controllerElement),
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        suggestion: `Move target elements inside controller scope or expand controller scope to include targets`,
        details: {
          errorType: "Targets Outside Controller Scope",
          controllerName,
          outOfScopeTargets,
          elementInfo: this.getElementInfo(controllerElement),
          description: `The controller "${controllerName}" defines targets [${targetList}] and these elements exist in the DOM but are outside the controller scope`,
          solution: `Either move the target elements inside the controller scope, or expand the controller scope to include the targets by moving the data-controller attribute to a parent element that contains both the controller logic and the target elements.`
        }
      });
    }
  }
  reportMissingActionController(controllerName, action, element) {
    if (window.errorHandler) {
      window.errorHandler.handleError({
        message: `User clicked action "${action}" but controller "${controllerName}" is not registered`,
        type: "stimulus",
        subType: "action-click",
        controllerName,
        action,
        elementInfo: this.getElementInfo(element),
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        suggestion: `Run: rails generate stimulus_controller ${controllerName}`,
        details: {
          errorType: "Missing Controller on Action Click",
          controllerName,
          action,
          elementInfo: this.getElementInfo(element),
          description: "User attempted to trigger an action but the required controller is not registered"
        }
      });
    }
  }
  reportMissingControllerScope(controllerName, action, element) {
    if (window.errorHandler) {
      window.errorHandler.handleError({
        message: `User clicked action "${action}" but no "${controllerName}" controller found in parent scope`,
        type: "stimulus",
        subType: "scope-error",
        controllerName,
        action,
        elementInfo: this.getElementInfo(element),
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        suggestion: `Add data-controller="${controllerName}" to a parent element or move this element inside the controller scope`,
        details: {
          errorType: "Controller Scope Missing",
          controllerName,
          action,
          elementInfo: this.getElementInfo(element),
          description: "Action element is not within the scope of its target controller",
          solution: `Wrap the element with <div data-controller="${controllerName}">...</div>`
        }
      });
    }
  }
  checkMethodExists(controllerName, methodName, action, element) {
    try {
      const stimulus = window.Stimulus;
      if (stimulus?.router?.modulesByIdentifier) {
        const module = stimulus.router.modulesByIdentifier.get(controllerName);
        if (module) {
          const controllerClass = module.definition.controllerConstructor;
          const instance = new controllerClass();
          if (typeof instance[methodName] !== "function") {
            this.reportMissingMethod(controllerName, methodName, action, element);
          }
        }
      }
    } catch (_error) {
      this.checkMethodExistsAlternative(controllerName, methodName, action, element);
    }
  }
  checkMethodExistsAlternative(controllerName, methodName, action, element) {
    try {
      const stimulus = window.Stimulus;
      if (stimulus?.router?.modulesByIdentifier) {
        const module = stimulus.router.modulesByIdentifier.get(controllerName);
        if (module) {
          const controllerClass = module.definition.controllerConstructor;
          if (!controllerClass.prototype[methodName] || typeof controllerClass.prototype[methodName] !== "function") {
            this.reportMissingMethod(controllerName, methodName, action, element);
          }
        }
      }
    } catch (error3) {
      console.warn(`Could not validate method existence for ${controllerName}#${methodName}:`, error3);
    }
  }
  reportMissingMethod(controllerName, methodName, action, element) {
    if (window.errorHandler) {
      window.errorHandler.handleError({
        message: `User clicked action "${action}" but method "${methodName}" does not exist in controller "${controllerName}"`,
        type: "stimulus",
        subType: "method-not-found",
        controllerName,
        methodName,
        action,
        elementInfo: this.getElementInfo(element),
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        suggestion: `Add method "${methodName}" to the ${controllerName} controller or fix the action name`,
        details: {
          errorType: "Method Not Found",
          controllerName,
          methodName,
          action,
          elementInfo: this.getElementInfo(element),
          description: `The method "${methodName}" was called but does not exist in the controller`,
          solution: `Add the method to your controller:

${methodName}(): void {
  // Your implementation here
}`
        }
      });
    }
  }
  reportElementIssues() {
    const allIssues = [];
    const detailedIssues = {};
    this.elementIssues.forEach((issues, controllerName) => {
      allIssues.push(`${controllerName}: ${issues.join(", ")}`);
      detailedIssues[controllerName] = issues;
    });
    if (window.errorHandler) {
      window.errorHandler.handleError({
        message: `Stimulus element positioning issues detected`,
        type: "stimulus",
        subType: "positioning-issues",
        positioningIssues: allIssues,
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        suggestion: "Consider using data-targets or moving elements inside controller scope",
        details: {
          errorType: "Element Positioning Issues",
          controllers: Object.keys(detailedIssues),
          issuesByController: detailedIssues,
          totalIssues: allIssues.length,
          description: "Some elements are referenced by controllers but exist outside their scope",
          possibleSolutions: [
            "Move elements inside controller scope",
            "Use data-targets for external elements",
            "Check controller data-controller attribute placement"
          ]
        }
      });
    }
    this.elementIssues.clear();
  }
  getElementInfo(element) {
    return {
      tagName: element.tagName.toLowerCase(),
      id: element.id || "no-id",
      className: element.className || "no-class",
      textContent: (element.textContent || "").substring(0, 50)
    };
  }
  // Public API
  getRegisteredControllers() {
    return Array.from(this.registeredControllers);
  }
  getMissingControllers() {
    return Array.from(this.missingControllers);
  }
  forceValidation() {
    this.missingControllers.clear();
    this.elementIssues.clear();
    this.hasReported = false;
    this.validateControllers();
  }
};
if (typeof window !== "undefined") {
  window.stimulusValidator = new StimulusValidator();
}

// app/javascript/channels/consumer.ts
var consumer_default = createConsumer();

// app/javascript/base.ts
start();
window.ActionCable = actioncable_esm_exports;
module_default.start();
window.Alpine = module_default;
window.Turbo = turbo_es2017_esm_exports;
window.restoreButtonStates = function() {
  const disabledButtons = document.querySelectorAll(
    'input[type="submit"][disabled], button[type="submit"][disabled], button:not([type])[disabled]'
  );
  disabledButtons.forEach((button) => {
    button.disabled = false;
    const originalText = button.dataset.originalText;
    if (originalText) {
      button.textContent = originalText;
      delete button.dataset.originalText;
    }
    button.classList.remove("loading");
  });
};
function convertLegacyAttributes() {
  document.querySelectorAll("[data-method]:not([data-turbo-method])").forEach((el) => {
    const method = el.getAttribute("data-method");
    if (method && method !== "get") {
      el.setAttribute("data-turbo-method", method);
      el.removeAttribute("data-method");
    }
  });
  document.querySelectorAll("[data-confirm]:not([data-turbo-confirm])").forEach((el) => {
    const confirm2 = el.getAttribute("data-confirm");
    if (confirm2) {
      el.setAttribute("data-turbo-confirm", confirm2);
      el.removeAttribute("data-confirm");
    }
  });
  document.querySelectorAll('[data-remote="true"]').forEach((el) => {
    el.removeAttribute("data-remote");
  });
  document.querySelectorAll("[data-disable-with]:not([data-turbo-submits-with])").forEach((el) => {
    if (el.dataset.turbo === "false") return;
    const parentForm = el.closest("form");
    if (parentForm?.dataset.turbo === "false") return;
    const text = el.getAttribute("data-disable-with");
    if (text) {
      el.setAttribute("data-turbo-submits-with", text);
      el.removeAttribute("data-disable-with");
    }
  });
}
document.addEventListener("DOMContentLoaded", convertLegacyAttributes);
document.addEventListener("turbo:load", convertLegacyAttributes);
document.addEventListener("turbo:frame-load", convertLegacyAttributes);
function handleNonTurboFormSubmit(event) {
  const form = event.target;
  const submit = form.querySelector(
    'button[type="submit"], button:not([type]), input[type="submit"]'
  );
  const isTurboDisabled = form.dataset.turbo === "false" || submit?.dataset.turbo === "false";
  if (isTurboDisabled && submit?.dataset.disableWith) {
    const isButton = submit instanceof HTMLButtonElement;
    const key = isButton ? "textContent" : "value";
    submit.dataset.originalText = submit[key] || "";
    submit[key] = submit.dataset.disableWith;
    submit.disabled = true;
  }
}
function handleVisibilityChange() {
  if (document.visibilityState === "visible") {
    const selector = 'form[data-turbo="false"] [disabled][data-original-text], [data-turbo="false"][disabled][data-original-text]';
    document.querySelectorAll(selector).forEach((submit) => {
      submit.disabled = false;
      const originalText = submit.dataset.originalText;
      if (originalText) {
        const key = submit instanceof HTMLButtonElement ? "textContent" : "value";
        submit[key] = originalText;
        delete submit.dataset.originalText;
      }
    });
  }
}
document.addEventListener("submit", handleNonTurboFormSubmit);
document.addEventListener("visibilitychange", handleVisibilityChange);
StreamActions.report_async_error = function() {
  const errorData = JSON.parse(this.getAttribute("data-error") || "{}");
  if (window.errorHandler) {
    window.errorHandler.handleError({
      type: "asyncjob",
      message: errorData.message || "Async job error occurred",
      timestamp: (/* @__PURE__ */ new Date()).toISOString(),
      job_class: errorData.job_class,
      job_id: errorData.job_id,
      queue: errorData.queue,
      exception_class: errorData.exception_class,
      backtrace: errorData.backtrace,
      details: errorData
    });
  }
};
StreamActions.redirect = function() {
  const url = this.getAttribute("url");
  const turbo = this.getAttribute("data-turbo");
  if (url) {
    if (turbo === "false") {
      if (window.self !== window.parent) {
        window.open(url, "_blank");
      } else {
        window.location.href = url;
      }
    } else {
      turbo_es2017_esm_exports.visit(url);
    }
  }
};
/*! Bundled license information:

@hotwired/turbo/dist/turbo.es2017-esm.js:
  (*!
  Turbo 8.0.17
  Copyright  2025 37signals LLC
   *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0ByYWlscy9hY3Rpb25jYWJsZS9zcmMvYWRhcHRlcnMuanMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0ByYWlscy9hY3Rpb25jYWJsZS9zcmMvbG9nZ2VyLmpzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AcmFpbHMvYWN0aW9uY2FibGUvc3JjL2Nvbm5lY3Rpb25fbW9uaXRvci5qcyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHJhaWxzL2FjdGlvbmNhYmxlL3NyYy9pbnRlcm5hbC5qcyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHJhaWxzL2FjdGlvbmNhYmxlL3NyYy9jb25uZWN0aW9uLmpzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AcmFpbHMvYWN0aW9uY2FibGUvc3JjL3N1YnNjcmlwdGlvbi5qcyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHJhaWxzL2FjdGlvbmNhYmxlL3NyYy9zdWJzY3JpcHRpb25fZ3VhcmFudG9yLmpzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AcmFpbHMvYWN0aW9uY2FibGUvc3JjL3N1YnNjcmlwdGlvbnMuanMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0ByYWlscy9hY3Rpb25jYWJsZS9zcmMvY29uc3VtZXIuanMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0ByYWlscy9hY3Rpb25jYWJsZS9zcmMvaW5kZXguanMiLCAiLi4vLi4vamF2YXNjcmlwdC9mb3JtX2RhdGFfcGF0Y2gudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0ByYWlscy9hY3RpdmVzdG9yYWdlL2FwcC9hc3NldHMvamF2YXNjcmlwdHMvYWN0aXZlc3RvcmFnZS5lc20uanMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2FscGluZWpzL2Rpc3QvbW9kdWxlLmVzbS5qcyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHJhaWxzL2FjdGlvbmNhYmxlL2FwcC9hc3NldHMvamF2YXNjcmlwdHMvYWN0aW9uY2FibGUuZXNtLmpzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AaG90d2lyZWQvdHVyYm8vZGlzdC90dXJiby5lczIwMTctZXNtLmpzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AaG90d2lyZWQvdHVyYm8tcmFpbHMvYXBwL2phdmFzY3JpcHQvdHVyYm8vY2FibGUuanMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0Bob3R3aXJlZC90dXJiby1yYWlscy9hcHAvamF2YXNjcmlwdC90dXJiby9zbmFrZWl6ZS5qcyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGhvdHdpcmVkL3R1cmJvLXJhaWxzL2FwcC9qYXZhc2NyaXB0L3R1cmJvL2NhYmxlX3N0cmVhbV9zb3VyY2VfZWxlbWVudC5qcyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGhvdHdpcmVkL3R1cmJvLXJhaWxzL2FwcC9qYXZhc2NyaXB0L3R1cmJvL2ZldGNoX3JlcXVlc3RzLmpzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AaG90d2lyZWQvdHVyYm8tcmFpbHMvYXBwL2phdmFzY3JpcHQvdHVyYm8vaW5kZXguanMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0Bob3R3aXJlZC9zdGltdWx1cy9kaXN0L3N0aW11bHVzLmpzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvdGhlbWVfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2Ryb3Bkb3duX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9zZGtfaW50ZWdyYXRpb25fY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2NsaXBib2FyZF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvY2l0eV9zZWxlY3Rvcl9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvZmxpZ2h0X3NlYXJjaF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvZGF0ZV9waWNrZXJfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2Jvb2tpbmdfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2NvdXBvbl9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvZGVzdGluYXRpb25fY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3JlZ2lvbl9zZWxlY3Rvcl9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvaG90ZWxfc2VhcmNoX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9ob3RlbF9kZXRhaWxfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3NlcnZpY2VfZ3JpZF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvcGFzc2VuZ2VyX3NlbGVjdG9yX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9jYWJpbl9zZWxlY3Rvcl9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvdHJpcF90eXBlX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9yZXR1cm5fZGF0ZV9waWNrZXJfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3JvdW5kX3RyaXBfc2VsZWN0b3JfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3RyYWluX3NlYXJjaF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvdHJhaW5fbGlzdF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvdHJhaW5fY2l0eV9zZWxlY3Rvcl9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvaW5maW5pdGVfc2Nyb2xsX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9kZWVwX3RyYXZlbF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvbXVsdGlfY2l0eV9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvZmxpZ2h0X2ZpbHRlcl9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvZmxpZ2h0X3NvcnRfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2RhdGVfbGlua19jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvaG90ZWxfZ3Vlc3Rfc2VsZWN0b3JfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2hvdGVsX2RhdGVfcGlja2VyX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9wYXltZW50X21vZGFsX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9wYXltZW50X2NvbmZpcm1hdGlvbl9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvaG90ZWxfdGFic19jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvaG90ZWxfdHJhdmVsZXJfc2VsZWN0b3JfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3RvYXN0X2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy90b2FzdF90cmlnZ2VyX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9ob3RlbF9ib29raW5nX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy90b3VyX2RldGFpbF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvY2Fyb3VzZWxfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3Njcm9sbF9zcHlfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3BhY2thZ2Vfc3dpdGNoZXJfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2Jvb2tpbmdfbW9kYWxfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2JvdHRvbV9iYXJfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2luc3VyYW5jZV9zZWxlY3Rvcl9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvdG91cl90cmF2ZWxlcl9zZWxlY3Rvcl9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvc3BlY2lhbF9mbGlnaHRzX2Zvcm1fY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3RyYWluX2Jvb2tpbmdfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3RyYWluX2Jvb2tpbmdfbG9ja19jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvdHJhaW5fc2VhdF9zZWxlY3Rvcl9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvdG91cl9ncm91cF9maWx0ZXJfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2Nhcl9yZW50YWxfdGFic19jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvaG90ZWxfcGFja2FnZV9zZWFyY2hfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2hvdGVsX3BhY2thZ2Vfb3JkZXJfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3B3YV9pbnN0YWxsX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9idXNfZGF0ZV9waWNrZXJfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2J1c190aWNrZXRfc2VhcmNoX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9idXNfdGlja2V0X29yZGVyX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9kZWVwX2Jvb2tpbmdfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3Zpc2Ffb3JkZXJfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2Ficm9hZF9yZWdpb25fc2VsZWN0b3JfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2Ficm9hZF9kYXRlX3BpY2tlcl9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvYWJyb2FkX3Bhc3Nlbmdlcl9zZWxlY3Rvcl9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvYWJyb2FkX29yZGVyX2Zvcm1fY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2Ficm9hZF90aWNrZXRfc2VhcmNoX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9ob21lc3RheV9zZWFyY2hfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2ludGVybmV0X3NlcnZpY2VzX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9zaW1fY2FyZF9maWx0ZXJfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2RhdGFfcGxhbl9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvd2lmaV9ib29raW5nX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9pbnRlcm5ldF9vcmRlcl9mb3JtX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9wcm9kdWN0X2NhcmRfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3NpbV9jYXJkX2Jvb2tpbmdfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3FyY29kZV9tb2RhbF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvbG9jYXRpb25fc2VsZWN0b3JfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3RyYW5zZmVyX3NlYXJjaF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvYWRkcmVzc19zZWxlY3Rvcl9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvc2VhcmNoX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9zbWFydF9iYWNrX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy90b3VyX2dyb3VwX3RhYnNfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2luZGV4LnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY2xpcGJvYXJkX3V0aWxzLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvc2RrX3V0aWxzLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvc3RpbXVsdXNfdmFsaWRhdG9yLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY2hhbm5lbHMvY29uc3VtZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9iYXNlLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJleHBvcnQgZGVmYXVsdCB7XG4gIGxvZ2dlcjogdHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgPyBjb25zb2xlIDogdW5kZWZpbmVkLFxuICBXZWJTb2NrZXQ6IHR5cGVvZiBXZWJTb2NrZXQgIT09IFwidW5kZWZpbmVkXCIgPyBXZWJTb2NrZXQgOiB1bmRlZmluZWQsXG59XG4iLCAiaW1wb3J0IGFkYXB0ZXJzIGZyb20gXCIuL2FkYXB0ZXJzXCJcblxuLy8gVGhlIGxvZ2dlciBpcyBkaXNhYmxlZCBieSBkZWZhdWx0LiBZb3UgY2FuIGVuYWJsZSBpdCB3aXRoOlxuLy9cbi8vICAgQWN0aW9uQ2FibGUubG9nZ2VyLmVuYWJsZWQgPSB0cnVlXG4vL1xuLy8gICBFeGFtcGxlOlxuLy9cbi8vICAgaW1wb3J0ICogYXMgQWN0aW9uQ2FibGUgZnJvbSAnQHJhaWxzL2FjdGlvbmNhYmxlJ1xuLy9cbi8vICAgQWN0aW9uQ2FibGUubG9nZ2VyLmVuYWJsZWQgPSB0cnVlXG4vLyAgIEFjdGlvbkNhYmxlLmxvZ2dlci5sb2coJ0Nvbm5lY3Rpb24gRXN0YWJsaXNoZWQuJylcbi8vXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbG9nKC4uLm1lc3NhZ2VzKSB7XG4gICAgaWYgKHRoaXMuZW5hYmxlZCkge1xuICAgICAgbWVzc2FnZXMucHVzaChEYXRlLm5vdygpKVxuICAgICAgYWRhcHRlcnMubG9nZ2VyLmxvZyhcIltBY3Rpb25DYWJsZV1cIiwgLi4ubWVzc2FnZXMpXG4gICAgfVxuICB9LFxufVxuIiwgImltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyXCJcblxuLy8gUmVzcG9uc2libGUgZm9yIGVuc3VyaW5nIHRoZSBjYWJsZSBjb25uZWN0aW9uIGlzIGluIGdvb2QgaGVhbHRoIGJ5IHZhbGlkYXRpbmcgdGhlIGhlYXJ0YmVhdCBwaW5ncyBzZW50IGZyb20gdGhlIHNlcnZlciwgYW5kIGF0dGVtcHRpbmdcbi8vIHJldml2YWwgcmVjb25uZWN0aW9ucyBpZiB0aGluZ3MgZ28gYXN0cmF5LiBJbnRlcm5hbCBjbGFzcywgbm90IGludGVuZGVkIGZvciBkaXJlY3QgdXNlciBtYW5pcHVsYXRpb24uXG5cbmNvbnN0IG5vdyA9ICgpID0+IG5ldyBEYXRlKCkuZ2V0VGltZSgpXG5cbmNvbnN0IHNlY29uZHNTaW5jZSA9IHRpbWUgPT4gKG5vdygpIC0gdGltZSkgLyAxMDAwXG5cbmNsYXNzIENvbm5lY3Rpb25Nb25pdG9yIHtcbiAgY29uc3RydWN0b3IoY29ubmVjdGlvbikge1xuICAgIHRoaXMudmlzaWJpbGl0eURpZENoYW5nZSA9IHRoaXMudmlzaWJpbGl0eURpZENoYW5nZS5iaW5kKHRoaXMpXG4gICAgdGhpcy5jb25uZWN0aW9uID0gY29ubmVjdGlvblxuICAgIHRoaXMucmVjb25uZWN0QXR0ZW1wdHMgPSAwXG4gIH1cblxuICBzdGFydCgpIHtcbiAgICBpZiAoIXRoaXMuaXNSdW5uaW5nKCkpIHtcbiAgICAgIHRoaXMuc3RhcnRlZEF0ID0gbm93KClcbiAgICAgIGRlbGV0ZSB0aGlzLnN0b3BwZWRBdFxuICAgICAgdGhpcy5zdGFydFBvbGxpbmcoKVxuICAgICAgYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy52aXNpYmlsaXR5RGlkQ2hhbmdlKVxuICAgICAgbG9nZ2VyLmxvZyhgQ29ubmVjdGlvbk1vbml0b3Igc3RhcnRlZC4gc3RhbGUgdGhyZXNob2xkID0gJHt0aGlzLmNvbnN0cnVjdG9yLnN0YWxlVGhyZXNob2xkfSBzYClcbiAgICB9XG4gIH1cblxuICBzdG9wKCkge1xuICAgIGlmICh0aGlzLmlzUnVubmluZygpKSB7XG4gICAgICB0aGlzLnN0b3BwZWRBdCA9IG5vdygpXG4gICAgICB0aGlzLnN0b3BQb2xsaW5nKClcbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMudmlzaWJpbGl0eURpZENoYW5nZSlcbiAgICAgIGxvZ2dlci5sb2coXCJDb25uZWN0aW9uTW9uaXRvciBzdG9wcGVkXCIpXG4gICAgfVxuICB9XG5cbiAgaXNSdW5uaW5nKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXJ0ZWRBdCAmJiAhdGhpcy5zdG9wcGVkQXRcbiAgfVxuXG4gIHJlY29yZE1lc3NhZ2UoKSB7XG4gICAgdGhpcy5waW5nZWRBdCA9IG5vdygpXG4gIH1cblxuICByZWNvcmRDb25uZWN0KCkge1xuICAgIHRoaXMucmVjb25uZWN0QXR0ZW1wdHMgPSAwXG4gICAgZGVsZXRlIHRoaXMuZGlzY29ubmVjdGVkQXRcbiAgICBsb2dnZXIubG9nKFwiQ29ubmVjdGlvbk1vbml0b3IgcmVjb3JkZWQgY29ubmVjdFwiKVxuICB9XG5cbiAgcmVjb3JkRGlzY29ubmVjdCgpIHtcbiAgICB0aGlzLmRpc2Nvbm5lY3RlZEF0ID0gbm93KClcbiAgICBsb2dnZXIubG9nKFwiQ29ubmVjdGlvbk1vbml0b3IgcmVjb3JkZWQgZGlzY29ubmVjdFwiKVxuICB9XG5cbiAgLy8gUHJpdmF0ZVxuXG4gIHN0YXJ0UG9sbGluZygpIHtcbiAgICB0aGlzLnN0b3BQb2xsaW5nKClcbiAgICB0aGlzLnBvbGwoKVxuICB9XG5cbiAgc3RvcFBvbGxpbmcoKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMucG9sbFRpbWVvdXQpXG4gIH1cblxuICBwb2xsKCkge1xuICAgIHRoaXMucG9sbFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMucmVjb25uZWN0SWZTdGFsZSgpXG4gICAgICB0aGlzLnBvbGwoKVxuICAgIH1cbiAgICAsIHRoaXMuZ2V0UG9sbEludGVydmFsKCkpXG4gIH1cblxuICBnZXRQb2xsSW50ZXJ2YWwoKSB7XG4gICAgY29uc3QgeyBzdGFsZVRocmVzaG9sZCwgcmVjb25uZWN0aW9uQmFja29mZlJhdGUgfSA9IHRoaXMuY29uc3RydWN0b3JcbiAgICBjb25zdCBiYWNrb2ZmID0gTWF0aC5wb3coMSArIHJlY29ubmVjdGlvbkJhY2tvZmZSYXRlLCBNYXRoLm1pbih0aGlzLnJlY29ubmVjdEF0dGVtcHRzLCAxMCkpXG4gICAgY29uc3Qgaml0dGVyTWF4ID0gdGhpcy5yZWNvbm5lY3RBdHRlbXB0cyA9PT0gMCA/IDEuMCA6IHJlY29ubmVjdGlvbkJhY2tvZmZSYXRlXG4gICAgY29uc3Qgaml0dGVyID0gaml0dGVyTWF4ICogTWF0aC5yYW5kb20oKVxuICAgIHJldHVybiBzdGFsZVRocmVzaG9sZCAqIDEwMDAgKiBiYWNrb2ZmICogKDEgKyBqaXR0ZXIpXG4gIH1cblxuICByZWNvbm5lY3RJZlN0YWxlKCkge1xuICAgIGlmICh0aGlzLmNvbm5lY3Rpb25Jc1N0YWxlKCkpIHtcbiAgICAgIGxvZ2dlci5sb2coYENvbm5lY3Rpb25Nb25pdG9yIGRldGVjdGVkIHN0YWxlIGNvbm5lY3Rpb24uIHJlY29ubmVjdEF0dGVtcHRzID0gJHt0aGlzLnJlY29ubmVjdEF0dGVtcHRzfSwgdGltZSBzdGFsZSA9ICR7c2Vjb25kc1NpbmNlKHRoaXMucmVmcmVzaGVkQXQpfSBzLCBzdGFsZSB0aHJlc2hvbGQgPSAke3RoaXMuY29uc3RydWN0b3Iuc3RhbGVUaHJlc2hvbGR9IHNgKVxuICAgICAgdGhpcy5yZWNvbm5lY3RBdHRlbXB0cysrXG4gICAgICBpZiAodGhpcy5kaXNjb25uZWN0ZWRSZWNlbnRseSgpKSB7XG4gICAgICAgIGxvZ2dlci5sb2coYENvbm5lY3Rpb25Nb25pdG9yIHNraXBwaW5nIHJlb3BlbmluZyByZWNlbnQgZGlzY29ubmVjdC4gdGltZSBkaXNjb25uZWN0ZWQgPSAke3NlY29uZHNTaW5jZSh0aGlzLmRpc2Nvbm5lY3RlZEF0KX0gc2ApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2dnZXIubG9nKFwiQ29ubmVjdGlvbk1vbml0b3IgcmVvcGVuaW5nXCIpXG4gICAgICAgIHRoaXMuY29ubmVjdGlvbi5yZW9wZW4oKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldCByZWZyZXNoZWRBdCgpIHtcbiAgICByZXR1cm4gdGhpcy5waW5nZWRBdCA/IHRoaXMucGluZ2VkQXQgOiB0aGlzLnN0YXJ0ZWRBdFxuICB9XG5cbiAgY29ubmVjdGlvbklzU3RhbGUoKSB7XG4gICAgcmV0dXJuIHNlY29uZHNTaW5jZSh0aGlzLnJlZnJlc2hlZEF0KSA+IHRoaXMuY29uc3RydWN0b3Iuc3RhbGVUaHJlc2hvbGRcbiAgfVxuXG4gIGRpc2Nvbm5lY3RlZFJlY2VudGx5KCkge1xuICAgIHJldHVybiB0aGlzLmRpc2Nvbm5lY3RlZEF0ICYmIChzZWNvbmRzU2luY2UodGhpcy5kaXNjb25uZWN0ZWRBdCkgPCB0aGlzLmNvbnN0cnVjdG9yLnN0YWxlVGhyZXNob2xkKVxuICB9XG5cbiAgdmlzaWJpbGl0eURpZENoYW5nZSgpIHtcbiAgICBpZiAoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSBcInZpc2libGVcIikge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb25Jc1N0YWxlKCkgfHwgIXRoaXMuY29ubmVjdGlvbi5pc09wZW4oKSkge1xuICAgICAgICAgIGxvZ2dlci5sb2coYENvbm5lY3Rpb25Nb25pdG9yIHJlb3BlbmluZyBzdGFsZSBjb25uZWN0aW9uIG9uIHZpc2liaWxpdHljaGFuZ2UuIHZpc2liaWxpdHlTdGF0ZSA9ICR7ZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlfWApXG4gICAgICAgICAgdGhpcy5jb25uZWN0aW9uLnJlb3BlbigpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgICwgMjAwKVxuICAgIH1cbiAgfVxuXG59XG5cbkNvbm5lY3Rpb25Nb25pdG9yLnN0YWxlVGhyZXNob2xkID0gNiAvLyBTZXJ2ZXI6OkNvbm5lY3Rpb25zOjpCRUFUX0lOVEVSVkFMICogMiAobWlzc2VkIHR3byBwaW5ncylcbkNvbm5lY3Rpb25Nb25pdG9yLnJlY29ubmVjdGlvbkJhY2tvZmZSYXRlID0gMC4xNVxuXG5leHBvcnQgZGVmYXVsdCBDb25uZWN0aW9uTW9uaXRvclxuIiwgImV4cG9ydCBkZWZhdWx0IHtcbiAgXCJtZXNzYWdlX3R5cGVzXCI6IHtcbiAgICBcIndlbGNvbWVcIjogXCJ3ZWxjb21lXCIsXG4gICAgXCJkaXNjb25uZWN0XCI6IFwiZGlzY29ubmVjdFwiLFxuICAgIFwicGluZ1wiOiBcInBpbmdcIixcbiAgICBcImNvbmZpcm1hdGlvblwiOiBcImNvbmZpcm1fc3Vic2NyaXB0aW9uXCIsXG4gICAgXCJyZWplY3Rpb25cIjogXCJyZWplY3Rfc3Vic2NyaXB0aW9uXCJcbiAgfSxcbiAgXCJkaXNjb25uZWN0X3JlYXNvbnNcIjoge1xuICAgIFwidW5hdXRob3JpemVkXCI6IFwidW5hdXRob3JpemVkXCIsXG4gICAgXCJpbnZhbGlkX3JlcXVlc3RcIjogXCJpbnZhbGlkX3JlcXVlc3RcIixcbiAgICBcInNlcnZlcl9yZXN0YXJ0XCI6IFwic2VydmVyX3Jlc3RhcnRcIixcbiAgICBcInJlbW90ZVwiOiBcInJlbW90ZVwiXG4gIH0sXG4gIFwiZGVmYXVsdF9tb3VudF9wYXRoXCI6IFwiL2NhYmxlXCIsXG4gIFwicHJvdG9jb2xzXCI6IFtcbiAgICBcImFjdGlvbmNhYmxlLXYxLWpzb25cIixcbiAgICBcImFjdGlvbmNhYmxlLXVuc3VwcG9ydGVkXCJcbiAgXVxufVxuIiwgImltcG9ydCBhZGFwdGVycyBmcm9tIFwiLi9hZGFwdGVyc1wiXG5pbXBvcnQgQ29ubmVjdGlvbk1vbml0b3IgZnJvbSBcIi4vY29ubmVjdGlvbl9tb25pdG9yXCJcbmltcG9ydCBJTlRFUk5BTCBmcm9tIFwiLi9pbnRlcm5hbFwiXG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlclwiXG5cbi8vIEVuY2Fwc3VsYXRlIHRoZSBjYWJsZSBjb25uZWN0aW9uIGhlbGQgYnkgdGhlIGNvbnN1bWVyLiBUaGlzIGlzIGFuIGludGVybmFsIGNsYXNzIG5vdCBpbnRlbmRlZCBmb3IgZGlyZWN0IHVzZXIgbWFuaXB1bGF0aW9uLlxuXG5jb25zdCB7bWVzc2FnZV90eXBlcywgcHJvdG9jb2xzfSA9IElOVEVSTkFMXG5jb25zdCBzdXBwb3J0ZWRQcm90b2NvbHMgPSBwcm90b2NvbHMuc2xpY2UoMCwgcHJvdG9jb2xzLmxlbmd0aCAtIDEpXG5cbmNvbnN0IGluZGV4T2YgPSBbXS5pbmRleE9mXG5cbmNsYXNzIENvbm5lY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcihjb25zdW1lcikge1xuICAgIHRoaXMub3BlbiA9IHRoaXMub3Blbi5iaW5kKHRoaXMpXG4gICAgdGhpcy5jb25zdW1lciA9IGNvbnN1bWVyXG4gICAgdGhpcy5zdWJzY3JpcHRpb25zID0gdGhpcy5jb25zdW1lci5zdWJzY3JpcHRpb25zXG4gICAgdGhpcy5tb25pdG9yID0gbmV3IENvbm5lY3Rpb25Nb25pdG9yKHRoaXMpXG4gICAgdGhpcy5kaXNjb25uZWN0ZWQgPSB0cnVlXG4gIH1cblxuICBzZW5kKGRhdGEpIHtcbiAgICBpZiAodGhpcy5pc09wZW4oKSkge1xuICAgICAgdGhpcy53ZWJTb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShkYXRhKSlcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgaWYgKHRoaXMuaXNBY3RpdmUoKSkge1xuICAgICAgbG9nZ2VyLmxvZyhgQXR0ZW1wdGVkIHRvIG9wZW4gV2ViU29ja2V0LCBidXQgZXhpc3Rpbmcgc29ja2V0IGlzICR7dGhpcy5nZXRTdGF0ZSgpfWApXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc29ja2V0UHJvdG9jb2xzID0gWy4uLnByb3RvY29scywgLi4udGhpcy5jb25zdW1lci5zdWJwcm90b2NvbHMgfHwgW11dXG4gICAgICBsb2dnZXIubG9nKGBPcGVuaW5nIFdlYlNvY2tldCwgY3VycmVudCBzdGF0ZSBpcyAke3RoaXMuZ2V0U3RhdGUoKX0sIHN1YnByb3RvY29sczogJHtzb2NrZXRQcm90b2NvbHN9YClcbiAgICAgIGlmICh0aGlzLndlYlNvY2tldCkgeyB0aGlzLnVuaW5zdGFsbEV2ZW50SGFuZGxlcnMoKSB9XG4gICAgICB0aGlzLndlYlNvY2tldCA9IG5ldyBhZGFwdGVycy5XZWJTb2NrZXQodGhpcy5jb25zdW1lci51cmwsIHNvY2tldFByb3RvY29scylcbiAgICAgIHRoaXMuaW5zdGFsbEV2ZW50SGFuZGxlcnMoKVxuICAgICAgdGhpcy5tb25pdG9yLnN0YXJ0KClcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgY2xvc2Uoe2FsbG93UmVjb25uZWN0fSA9IHthbGxvd1JlY29ubmVjdDogdHJ1ZX0pIHtcbiAgICBpZiAoIWFsbG93UmVjb25uZWN0KSB7IHRoaXMubW9uaXRvci5zdG9wKCkgfVxuICAgIC8vIEF2b2lkIGNsb3Npbmcgd2Vic29ja2V0cyBpbiBhIFwiY29ubmVjdGluZ1wiIHN0YXRlIGR1ZSB0byBTYWZhcmkgMTUuMSsgYnVnLiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yYWlscy9yYWlscy9pc3N1ZXMvNDM4MzUjaXNzdWVjb21tZW50LTEwMDIyODg0NzhcbiAgICBpZiAodGhpcy5pc09wZW4oKSkge1xuICAgICAgcmV0dXJuIHRoaXMud2ViU29ja2V0LmNsb3NlKClcbiAgICB9XG4gIH1cblxuICByZW9wZW4oKSB7XG4gICAgbG9nZ2VyLmxvZyhgUmVvcGVuaW5nIFdlYlNvY2tldCwgY3VycmVudCBzdGF0ZSBpcyAke3RoaXMuZ2V0U3RhdGUoKX1gKVxuICAgIGlmICh0aGlzLmlzQWN0aXZlKCkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNsb3NlKClcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ2dlci5sb2coXCJGYWlsZWQgdG8gcmVvcGVuIFdlYlNvY2tldFwiLCBlcnJvcilcbiAgICAgIH1cbiAgICAgIGZpbmFsbHkge1xuICAgICAgICBsb2dnZXIubG9nKGBSZW9wZW5pbmcgV2ViU29ja2V0IGluICR7dGhpcy5jb25zdHJ1Y3Rvci5yZW9wZW5EZWxheX1tc2ApXG4gICAgICAgIHNldFRpbWVvdXQodGhpcy5vcGVuLCB0aGlzLmNvbnN0cnVjdG9yLnJlb3BlbkRlbGF5KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5vcGVuKClcbiAgICB9XG4gIH1cblxuICBnZXRQcm90b2NvbCgpIHtcbiAgICBpZiAodGhpcy53ZWJTb2NrZXQpIHtcbiAgICAgIHJldHVybiB0aGlzLndlYlNvY2tldC5wcm90b2NvbFxuICAgIH1cbiAgfVxuXG4gIGlzT3BlbigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1N0YXRlKFwib3BlblwiKVxuICB9XG5cbiAgaXNBY3RpdmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNTdGF0ZShcIm9wZW5cIiwgXCJjb25uZWN0aW5nXCIpXG4gIH1cblxuICB0cmllZFRvUmVjb25uZWN0KCkge1xuICAgIHJldHVybiB0aGlzLm1vbml0b3IucmVjb25uZWN0QXR0ZW1wdHMgPiAwXG4gIH1cblxuICAvLyBQcml2YXRlXG5cbiAgaXNQcm90b2NvbFN1cHBvcnRlZCgpIHtcbiAgICByZXR1cm4gaW5kZXhPZi5jYWxsKHN1cHBvcnRlZFByb3RvY29scywgdGhpcy5nZXRQcm90b2NvbCgpKSA+PSAwXG4gIH1cblxuICBpc1N0YXRlKC4uLnN0YXRlcykge1xuICAgIHJldHVybiBpbmRleE9mLmNhbGwoc3RhdGVzLCB0aGlzLmdldFN0YXRlKCkpID49IDBcbiAgfVxuXG4gIGdldFN0YXRlKCkge1xuICAgIGlmICh0aGlzLndlYlNvY2tldCkge1xuICAgICAgZm9yIChsZXQgc3RhdGUgaW4gYWRhcHRlcnMuV2ViU29ja2V0KSB7XG4gICAgICAgIGlmIChhZGFwdGVycy5XZWJTb2NrZXRbc3RhdGVdID09PSB0aGlzLndlYlNvY2tldC5yZWFkeVN0YXRlKSB7XG4gICAgICAgICAgcmV0dXJuIHN0YXRlLnRvTG93ZXJDYXNlKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgaW5zdGFsbEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgZm9yIChsZXQgZXZlbnROYW1lIGluIHRoaXMuZXZlbnRzKSB7XG4gICAgICBjb25zdCBoYW5kbGVyID0gdGhpcy5ldmVudHNbZXZlbnROYW1lXS5iaW5kKHRoaXMpXG4gICAgICB0aGlzLndlYlNvY2tldFtgb24ke2V2ZW50TmFtZX1gXSA9IGhhbmRsZXJcbiAgICB9XG4gIH1cblxuICB1bmluc3RhbGxFdmVudEhhbmRsZXJzKCkge1xuICAgIGZvciAobGV0IGV2ZW50TmFtZSBpbiB0aGlzLmV2ZW50cykge1xuICAgICAgdGhpcy53ZWJTb2NrZXRbYG9uJHtldmVudE5hbWV9YF0gPSBmdW5jdGlvbigpIHt9XG4gICAgfVxuICB9XG5cbn1cblxuQ29ubmVjdGlvbi5yZW9wZW5EZWxheSA9IDUwMFxuXG5Db25uZWN0aW9uLnByb3RvdHlwZS5ldmVudHMgPSB7XG4gIG1lc3NhZ2UoZXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuaXNQcm90b2NvbFN1cHBvcnRlZCgpKSB7IHJldHVybiB9XG4gICAgY29uc3Qge2lkZW50aWZpZXIsIG1lc3NhZ2UsIHJlYXNvbiwgcmVjb25uZWN0LCB0eXBlfSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSlcbiAgICB0aGlzLm1vbml0b3IucmVjb3JkTWVzc2FnZSgpXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIG1lc3NhZ2VfdHlwZXMud2VsY29tZTpcbiAgICAgICAgaWYgKHRoaXMudHJpZWRUb1JlY29ubmVjdCgpKSB7XG4gICAgICAgICAgdGhpcy5yZWNvbm5lY3RBdHRlbXB0ZWQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tb25pdG9yLnJlY29yZENvbm5lY3QoKVxuICAgICAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25zLnJlbG9hZCgpXG4gICAgICBjYXNlIG1lc3NhZ2VfdHlwZXMuZGlzY29ubmVjdDpcbiAgICAgICAgbG9nZ2VyLmxvZyhgRGlzY29ubmVjdGluZy4gUmVhc29uOiAke3JlYXNvbn1gKVxuICAgICAgICByZXR1cm4gdGhpcy5jbG9zZSh7YWxsb3dSZWNvbm5lY3Q6IHJlY29ubmVjdH0pXG4gICAgICBjYXNlIG1lc3NhZ2VfdHlwZXMucGluZzpcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgIGNhc2UgbWVzc2FnZV90eXBlcy5jb25maXJtYXRpb246XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5jb25maXJtU3Vic2NyaXB0aW9uKGlkZW50aWZpZXIpXG4gICAgICAgIGlmICh0aGlzLnJlY29ubmVjdEF0dGVtcHRlZCkge1xuICAgICAgICAgIHRoaXMucmVjb25uZWN0QXR0ZW1wdGVkID0gZmFsc2VcbiAgICAgICAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25zLm5vdGlmeShpZGVudGlmaWVyLCBcImNvbm5lY3RlZFwiLCB7cmVjb25uZWN0ZWQ6IHRydWV9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbnMubm90aWZ5KGlkZW50aWZpZXIsIFwiY29ubmVjdGVkXCIsIHtyZWNvbm5lY3RlZDogZmFsc2V9KVxuICAgICAgICB9XG4gICAgICBjYXNlIG1lc3NhZ2VfdHlwZXMucmVqZWN0aW9uOlxuICAgICAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25zLnJlamVjdChpZGVudGlmaWVyKVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaXB0aW9ucy5ub3RpZnkoaWRlbnRpZmllciwgXCJyZWNlaXZlZFwiLCBtZXNzYWdlKVxuICAgIH1cbiAgfSxcblxuICBvcGVuKCkge1xuICAgIGxvZ2dlci5sb2coYFdlYlNvY2tldCBvbm9wZW4gZXZlbnQsIHVzaW5nICcke3RoaXMuZ2V0UHJvdG9jb2woKX0nIHN1YnByb3RvY29sYClcbiAgICB0aGlzLmRpc2Nvbm5lY3RlZCA9IGZhbHNlXG4gICAgaWYgKCF0aGlzLmlzUHJvdG9jb2xTdXBwb3J0ZWQoKSkge1xuICAgICAgbG9nZ2VyLmxvZyhcIlByb3RvY29sIGlzIHVuc3VwcG9ydGVkLiBTdG9wcGluZyBtb25pdG9yIGFuZCBkaXNjb25uZWN0aW5nLlwiKVxuICAgICAgcmV0dXJuIHRoaXMuY2xvc2Uoe2FsbG93UmVjb25uZWN0OiBmYWxzZX0pXG4gICAgfVxuICB9LFxuXG4gIGNsb3NlKGV2ZW50KSB7XG4gICAgbG9nZ2VyLmxvZyhcIldlYlNvY2tldCBvbmNsb3NlIGV2ZW50XCIpXG4gICAgaWYgKHRoaXMuZGlzY29ubmVjdGVkKSB7IHJldHVybiB9XG4gICAgdGhpcy5kaXNjb25uZWN0ZWQgPSB0cnVlXG4gICAgdGhpcy5tb25pdG9yLnJlY29yZERpc2Nvbm5lY3QoKVxuICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbnMubm90aWZ5QWxsKFwiZGlzY29ubmVjdGVkXCIsIHt3aWxsQXR0ZW1wdFJlY29ubmVjdDogdGhpcy5tb25pdG9yLmlzUnVubmluZygpfSlcbiAgfSxcblxuICBlcnJvcigpIHtcbiAgICBsb2dnZXIubG9nKFwiV2ViU29ja2V0IG9uZXJyb3IgZXZlbnRcIilcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDb25uZWN0aW9uXG4iLCAiLy8gQSBuZXcgc3Vic2NyaXB0aW9uIGlzIGNyZWF0ZWQgdGhyb3VnaCB0aGUgQWN0aW9uQ2FibGUuU3Vic2NyaXB0aW9ucyBpbnN0YW5jZSBhdmFpbGFibGUgb24gdGhlIGNvbnN1bWVyLlxuLy8gSXQgcHJvdmlkZXMgYSBudW1iZXIgb2YgY2FsbGJhY2tzIGFuZCBhIG1ldGhvZCBmb3IgY2FsbGluZyByZW1vdGUgcHJvY2VkdXJlIGNhbGxzIG9uIHRoZSBjb3JyZXNwb25kaW5nXG4vLyBDaGFubmVsIGluc3RhbmNlIG9uIHRoZSBzZXJ2ZXIgc2lkZS5cbi8vXG4vLyBBbiBleGFtcGxlIGRlbW9uc3RyYXRlcyB0aGUgYmFzaWMgZnVuY3Rpb25hbGl0eTpcbi8vXG4vLyAgIEFwcC5hcHBlYXJhbmNlID0gQXBwLmNhYmxlLnN1YnNjcmlwdGlvbnMuY3JlYXRlKFwiQXBwZWFyYW5jZUNoYW5uZWxcIiwge1xuLy8gICAgIGNvbm5lY3RlZCgpIHtcbi8vICAgICAgIC8vIENhbGxlZCBvbmNlIHRoZSBzdWJzY3JpcHRpb24gaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IGNvbXBsZXRlZFxuLy8gICAgIH0sXG4vL1xuLy8gICAgIGRpc2Nvbm5lY3RlZCh7IHdpbGxBdHRlbXB0UmVjb25uZWN0OiBib29sZWFuIH0pIHtcbi8vICAgICAgIC8vIENhbGxlZCB3aGVuIHRoZSBjbGllbnQgaGFzIGRpc2Nvbm5lY3RlZCB3aXRoIHRoZSBzZXJ2ZXIuXG4vLyAgICAgICAvLyBUaGUgb2JqZWN0IHdpbGwgaGF2ZSBhbiBgd2lsbEF0dGVtcHRSZWNvbm5lY3RgIHByb3BlcnR5IHdoaWNoXG4vLyAgICAgICAvLyBzYXlzIHdoZXRoZXIgdGhlIGNsaWVudCBoYXMgdGhlIGludGVudGlvbiBvZiBhdHRlbXB0aW5nXG4vLyAgICAgICAvLyB0byByZWNvbm5lY3QuXG4vLyAgICAgfSxcbi8vXG4vLyAgICAgYXBwZWFyKCkge1xuLy8gICAgICAgdGhpcy5wZXJmb3JtKCdhcHBlYXInLCB7YXBwZWFyaW5nX29uOiB0aGlzLmFwcGVhcmluZ09uKCl9KVxuLy8gICAgIH0sXG4vL1xuLy8gICAgIGF3YXkoKSB7XG4vLyAgICAgICB0aGlzLnBlcmZvcm0oJ2F3YXknKVxuLy8gICAgIH0sXG4vL1xuLy8gICAgIGFwcGVhcmluZ09uKCkge1xuLy8gICAgICAgJCgnbWFpbicpLmRhdGEoJ2FwcGVhcmluZy1vbicpXG4vLyAgICAgfVxuLy8gICB9KVxuLy9cbi8vIFRoZSBtZXRob2RzICNhcHBlYXIgYW5kICNhd2F5IGZvcndhcmQgdGhlaXIgaW50ZW50IHRvIHRoZSByZW1vdGUgQXBwZWFyYW5jZUNoYW5uZWwgaW5zdGFuY2Ugb24gdGhlIHNlcnZlclxuLy8gYnkgY2FsbGluZyB0aGUgYHBlcmZvcm1gIG1ldGhvZCB3aXRoIHRoZSBmaXJzdCBwYXJhbWV0ZXIgYmVpbmcgdGhlIGFjdGlvbiAod2hpY2ggbWFwcyB0byBBcHBlYXJhbmNlQ2hhbm5lbCNhcHBlYXIvYXdheSkuXG4vLyBUaGUgc2Vjb25kIHBhcmFtZXRlciBpcyBhIGhhc2ggdGhhdCdsbCBnZXQgSlNPTiBlbmNvZGVkIGFuZCBtYWRlIGF2YWlsYWJsZSBvbiB0aGUgc2VydmVyIGluIHRoZSBkYXRhIHBhcmFtZXRlci5cbi8vXG4vLyBUaGlzIGlzIGhvdyB0aGUgc2VydmVyIGNvbXBvbmVudCB3b3VsZCBsb29rOlxuLy9cbi8vICAgY2xhc3MgQXBwZWFyYW5jZUNoYW5uZWwgPCBBcHBsaWNhdGlvbkFjdGlvbkNhYmxlOjpDaGFubmVsXG4vLyAgICAgZGVmIHN1YnNjcmliZWRcbi8vICAgICAgIGN1cnJlbnRfdXNlci5hcHBlYXJcbi8vICAgICBlbmRcbi8vXG4vLyAgICAgZGVmIHVuc3Vic2NyaWJlZFxuLy8gICAgICAgY3VycmVudF91c2VyLmRpc2FwcGVhclxuLy8gICAgIGVuZFxuLy9cbi8vICAgICBkZWYgYXBwZWFyKGRhdGEpXG4vLyAgICAgICBjdXJyZW50X3VzZXIuYXBwZWFyIG9uOiBkYXRhWydhcHBlYXJpbmdfb24nXVxuLy8gICAgIGVuZFxuLy9cbi8vICAgICBkZWYgYXdheVxuLy8gICAgICAgY3VycmVudF91c2VyLmF3YXlcbi8vICAgICBlbmRcbi8vICAgZW5kXG4vL1xuLy8gVGhlIFwiQXBwZWFyYW5jZUNoYW5uZWxcIiBuYW1lIGlzIGF1dG9tYXRpY2FsbHkgbWFwcGVkIGJldHdlZW4gdGhlIGNsaWVudC1zaWRlIHN1YnNjcmlwdGlvbiBjcmVhdGlvbiBhbmQgdGhlIHNlcnZlci1zaWRlIFJ1YnkgY2xhc3MgbmFtZS5cbi8vIFRoZSBBcHBlYXJhbmNlQ2hhbm5lbCNhcHBlYXIvYXdheSBwdWJsaWMgbWV0aG9kcyBhcmUgZXhwb3NlZCBhdXRvbWF0aWNhbGx5IHRvIGNsaWVudC1zaWRlIGludm9jYXRpb24gdGhyb3VnaCB0aGUgcGVyZm9ybSBtZXRob2QuXG5cbmNvbnN0IGV4dGVuZCA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydGllcykge1xuICBpZiAocHJvcGVydGllcyAhPSBudWxsKSB7XG4gICAgZm9yIChsZXQga2V5IGluIHByb3BlcnRpZXMpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gcHJvcGVydGllc1trZXldXG4gICAgICBvYmplY3Rba2V5XSA9IHZhbHVlXG4gICAgfVxuICB9XG4gIHJldHVybiBvYmplY3Rcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3Vic2NyaXB0aW9uIHtcbiAgY29uc3RydWN0b3IoY29uc3VtZXIsIHBhcmFtcyA9IHt9LCBtaXhpbikge1xuICAgIHRoaXMuY29uc3VtZXIgPSBjb25zdW1lclxuICAgIHRoaXMuaWRlbnRpZmllciA9IEpTT04uc3RyaW5naWZ5KHBhcmFtcylcbiAgICBleHRlbmQodGhpcywgbWl4aW4pXG4gIH1cblxuICAvLyBQZXJmb3JtIGEgY2hhbm5lbCBhY3Rpb24gd2l0aCB0aGUgb3B0aW9uYWwgZGF0YSBwYXNzZWQgYXMgYW4gYXR0cmlidXRlXG4gIHBlcmZvcm0oYWN0aW9uLCBkYXRhID0ge30pIHtcbiAgICBkYXRhLmFjdGlvbiA9IGFjdGlvblxuICAgIHJldHVybiB0aGlzLnNlbmQoZGF0YSlcbiAgfVxuXG4gIHNlbmQoZGF0YSkge1xuICAgIHJldHVybiB0aGlzLmNvbnN1bWVyLnNlbmQoe2NvbW1hbmQ6IFwibWVzc2FnZVwiLCBpZGVudGlmaWVyOiB0aGlzLmlkZW50aWZpZXIsIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpfSlcbiAgfVxuXG4gIHVuc3Vic2NyaWJlKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnN1bWVyLnN1YnNjcmlwdGlvbnMucmVtb3ZlKHRoaXMpXG4gIH1cbn1cbiIsICJpbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlclwiXG5cbi8vIFJlc3BvbnNpYmxlIGZvciBlbnN1cmluZyBjaGFubmVsIHN1YnNjcmliZSBjb21tYW5kIGlzIGNvbmZpcm1lZCwgcmV0cnlpbmcgdW50aWwgY29uZmlybWF0aW9uIGlzIHJlY2VpdmVkLlxuLy8gSW50ZXJuYWwgY2xhc3MsIG5vdCBpbnRlbmRlZCBmb3IgZGlyZWN0IHVzZXIgbWFuaXB1bGF0aW9uLlxuXG5jbGFzcyBTdWJzY3JpcHRpb25HdWFyYW50b3Ige1xuICBjb25zdHJ1Y3RvcihzdWJzY3JpcHRpb25zKSB7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zID0gc3Vic2NyaXB0aW9uc1xuICAgIHRoaXMucGVuZGluZ1N1YnNjcmlwdGlvbnMgPSBbXVxuICB9XG5cbiAgZ3VhcmFudGVlKHN1YnNjcmlwdGlvbikge1xuICAgIGlmKHRoaXMucGVuZGluZ1N1YnNjcmlwdGlvbnMuaW5kZXhPZihzdWJzY3JpcHRpb24pID09IC0xKXsgXG4gICAgICBsb2dnZXIubG9nKGBTdWJzY3JpcHRpb25HdWFyYW50b3IgZ3VhcmFudGVlaW5nICR7c3Vic2NyaXB0aW9uLmlkZW50aWZpZXJ9YClcbiAgICAgIHRoaXMucGVuZGluZ1N1YnNjcmlwdGlvbnMucHVzaChzdWJzY3JpcHRpb24pIFxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGxvZ2dlci5sb2coYFN1YnNjcmlwdGlvbkd1YXJhbnRvciBhbHJlYWR5IGd1YXJhbnRlZWluZyAke3N1YnNjcmlwdGlvbi5pZGVudGlmaWVyfWApXG4gICAgfVxuICAgIHRoaXMuc3RhcnRHdWFyYW50ZWVpbmcoKVxuICB9XG5cbiAgZm9yZ2V0KHN1YnNjcmlwdGlvbikge1xuICAgIGxvZ2dlci5sb2coYFN1YnNjcmlwdGlvbkd1YXJhbnRvciBmb3JnZXR0aW5nICR7c3Vic2NyaXB0aW9uLmlkZW50aWZpZXJ9YClcbiAgICB0aGlzLnBlbmRpbmdTdWJzY3JpcHRpb25zID0gKHRoaXMucGVuZGluZ1N1YnNjcmlwdGlvbnMuZmlsdGVyKChzKSA9PiBzICE9PSBzdWJzY3JpcHRpb24pKVxuICB9XG5cbiAgc3RhcnRHdWFyYW50ZWVpbmcoKSB7XG4gICAgdGhpcy5zdG9wR3VhcmFudGVlaW5nKClcbiAgICB0aGlzLnJldHJ5U3Vic2NyaWJpbmcoKVxuICB9XG4gIFxuICBzdG9wR3VhcmFudGVlaW5nKCkge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLnJldHJ5VGltZW91dClcbiAgfVxuXG4gIHJldHJ5U3Vic2NyaWJpbmcoKSB7XG4gICAgdGhpcy5yZXRyeVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICh0aGlzLnN1YnNjcmlwdGlvbnMgJiYgdHlwZW9mKHRoaXMuc3Vic2NyaXB0aW9ucy5zdWJzY3JpYmUpID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhpcy5wZW5kaW5nU3Vic2NyaXB0aW9ucy5tYXAoKHN1YnNjcmlwdGlvbikgPT4ge1xuICAgICAgICAgIGxvZ2dlci5sb2coYFN1YnNjcmlwdGlvbkd1YXJhbnRvciByZXN1YnNjcmliaW5nICR7c3Vic2NyaXB0aW9uLmlkZW50aWZpZXJ9YClcbiAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuc3Vic2NyaWJlKHN1YnNjcmlwdGlvbilcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgLCA1MDApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU3Vic2NyaXB0aW9uR3VhcmFudG9yIiwgImltcG9ydCBTdWJzY3JpcHRpb24gZnJvbSBcIi4vc3Vic2NyaXB0aW9uXCJcbmltcG9ydCBTdWJzY3JpcHRpb25HdWFyYW50b3IgZnJvbSBcIi4vc3Vic2NyaXB0aW9uX2d1YXJhbnRvclwiXG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlclwiXG5cbi8vIENvbGxlY3Rpb24gY2xhc3MgZm9yIGNyZWF0aW5nIChhbmQgaW50ZXJuYWxseSBtYW5hZ2luZykgY2hhbm5lbCBzdWJzY3JpcHRpb25zLlxuLy8gVGhlIG9ubHkgbWV0aG9kIGludGVuZGVkIHRvIGJlIHRyaWdnZXJlZCBieSB0aGUgdXNlciBpcyBBY3Rpb25DYWJsZS5TdWJzY3JpcHRpb25zI2NyZWF0ZSxcbi8vIGFuZCBpdCBzaG91bGQgYmUgY2FsbGVkIHRocm91Z2ggdGhlIGNvbnN1bWVyIGxpa2Ugc286XG4vL1xuLy8gICBBcHAgPSB7fVxuLy8gICBBcHAuY2FibGUgPSBBY3Rpb25DYWJsZS5jcmVhdGVDb25zdW1lcihcIndzOi8vZXhhbXBsZS5jb20vYWNjb3VudHMvMVwiKVxuLy8gICBBcHAuYXBwZWFyYW5jZSA9IEFwcC5jYWJsZS5zdWJzY3JpcHRpb25zLmNyZWF0ZShcIkFwcGVhcmFuY2VDaGFubmVsXCIpXG4vL1xuLy8gRm9yIG1vcmUgZGV0YWlscyBvbiBob3cgeW91J2QgY29uZmlndXJlIGFuIGFjdHVhbCBjaGFubmVsIHN1YnNjcmlwdGlvbiwgc2VlIEFjdGlvbkNhYmxlLlN1YnNjcmlwdGlvbi5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3Vic2NyaXB0aW9ucyB7XG4gIGNvbnN0cnVjdG9yKGNvbnN1bWVyKSB7XG4gICAgdGhpcy5jb25zdW1lciA9IGNvbnN1bWVyXG4gICAgdGhpcy5ndWFyYW50b3IgPSBuZXcgU3Vic2NyaXB0aW9uR3VhcmFudG9yKHRoaXMpXG4gICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW11cbiAgfVxuXG4gIGNyZWF0ZShjaGFubmVsTmFtZSwgbWl4aW4pIHtcbiAgICBjb25zdCBjaGFubmVsID0gY2hhbm5lbE5hbWVcbiAgICBjb25zdCBwYXJhbXMgPSB0eXBlb2YgY2hhbm5lbCA9PT0gXCJvYmplY3RcIiA/IGNoYW5uZWwgOiB7Y2hhbm5lbH1cbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKHRoaXMuY29uc3VtZXIsIHBhcmFtcywgbWl4aW4pXG4gICAgcmV0dXJuIHRoaXMuYWRkKHN1YnNjcmlwdGlvbilcbiAgfVxuXG4gIC8vIFByaXZhdGVcblxuICBhZGQoc3Vic2NyaXB0aW9uKSB7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goc3Vic2NyaXB0aW9uKVxuICAgIHRoaXMuY29uc3VtZXIuZW5zdXJlQWN0aXZlQ29ubmVjdGlvbigpXG4gICAgdGhpcy5ub3RpZnkoc3Vic2NyaXB0aW9uLCBcImluaXRpYWxpemVkXCIpXG4gICAgdGhpcy5zdWJzY3JpYmUoc3Vic2NyaXB0aW9uKVxuICAgIHJldHVybiBzdWJzY3JpcHRpb25cbiAgfVxuXG4gIHJlbW92ZShzdWJzY3JpcHRpb24pIHtcbiAgICB0aGlzLmZvcmdldChzdWJzY3JpcHRpb24pXG4gICAgaWYgKCF0aGlzLmZpbmRBbGwoc3Vic2NyaXB0aW9uLmlkZW50aWZpZXIpLmxlbmd0aCkge1xuICAgICAgdGhpcy5zZW5kQ29tbWFuZChzdWJzY3JpcHRpb24sIFwidW5zdWJzY3JpYmVcIilcbiAgICB9XG4gICAgcmV0dXJuIHN1YnNjcmlwdGlvblxuICB9XG5cbiAgcmVqZWN0KGlkZW50aWZpZXIpIHtcbiAgICByZXR1cm4gdGhpcy5maW5kQWxsKGlkZW50aWZpZXIpLm1hcCgoc3Vic2NyaXB0aW9uKSA9PiB7XG4gICAgICB0aGlzLmZvcmdldChzdWJzY3JpcHRpb24pXG4gICAgICB0aGlzLm5vdGlmeShzdWJzY3JpcHRpb24sIFwicmVqZWN0ZWRcIilcbiAgICAgIHJldHVybiBzdWJzY3JpcHRpb25cbiAgICB9KVxuICB9XG5cbiAgZm9yZ2V0KHN1YnNjcmlwdGlvbikge1xuICAgIHRoaXMuZ3VhcmFudG9yLmZvcmdldChzdWJzY3JpcHRpb24pXG4gICAgdGhpcy5zdWJzY3JpcHRpb25zID0gKHRoaXMuc3Vic2NyaXB0aW9ucy5maWx0ZXIoKHMpID0+IHMgIT09IHN1YnNjcmlwdGlvbikpXG4gICAgcmV0dXJuIHN1YnNjcmlwdGlvblxuICB9XG5cbiAgZmluZEFsbChpZGVudGlmaWVyKSB7XG4gICAgcmV0dXJuIHRoaXMuc3Vic2NyaXB0aW9ucy5maWx0ZXIoKHMpID0+IHMuaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcilcbiAgfVxuXG4gIHJlbG9hZCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25zLm1hcCgoc3Vic2NyaXB0aW9uKSA9PlxuICAgICAgdGhpcy5zdWJzY3JpYmUoc3Vic2NyaXB0aW9uKSlcbiAgfVxuXG4gIG5vdGlmeUFsbChjYWxsYmFja05hbWUsIC4uLmFyZ3MpIHtcbiAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25zLm1hcCgoc3Vic2NyaXB0aW9uKSA9PlxuICAgICAgdGhpcy5ub3RpZnkoc3Vic2NyaXB0aW9uLCBjYWxsYmFja05hbWUsIC4uLmFyZ3MpKVxuICB9XG5cbiAgbm90aWZ5KHN1YnNjcmlwdGlvbiwgY2FsbGJhY2tOYW1lLCAuLi5hcmdzKSB7XG4gICAgbGV0IHN1YnNjcmlwdGlvbnNcbiAgICBpZiAodHlwZW9mIHN1YnNjcmlwdGlvbiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgc3Vic2NyaXB0aW9ucyA9IHRoaXMuZmluZEFsbChzdWJzY3JpcHRpb24pXG4gICAgfSBlbHNlIHtcbiAgICAgIHN1YnNjcmlwdGlvbnMgPSBbc3Vic2NyaXB0aW9uXVxuICAgIH1cblxuICAgIHJldHVybiBzdWJzY3JpcHRpb25zLm1hcCgoc3Vic2NyaXB0aW9uKSA9PlxuICAgICAgKHR5cGVvZiBzdWJzY3JpcHRpb25bY2FsbGJhY2tOYW1lXSA9PT0gXCJmdW5jdGlvblwiID8gc3Vic2NyaXB0aW9uW2NhbGxiYWNrTmFtZV0oLi4uYXJncykgOiB1bmRlZmluZWQpKVxuICB9XG5cbiAgc3Vic2NyaWJlKHN1YnNjcmlwdGlvbikge1xuICAgIGlmICh0aGlzLnNlbmRDb21tYW5kKHN1YnNjcmlwdGlvbiwgXCJzdWJzY3JpYmVcIikpIHtcbiAgICAgIHRoaXMuZ3VhcmFudG9yLmd1YXJhbnRlZShzdWJzY3JpcHRpb24pXG4gICAgfVxuICB9XG5cbiAgY29uZmlybVN1YnNjcmlwdGlvbihpZGVudGlmaWVyKSB7XG4gICAgbG9nZ2VyLmxvZyhgU3Vic2NyaXB0aW9uIGNvbmZpcm1lZCAke2lkZW50aWZpZXJ9YClcbiAgICB0aGlzLmZpbmRBbGwoaWRlbnRpZmllcikubWFwKChzdWJzY3JpcHRpb24pID0+XG4gICAgICB0aGlzLmd1YXJhbnRvci5mb3JnZXQoc3Vic2NyaXB0aW9uKSlcbiAgfVxuXG4gIHNlbmRDb21tYW5kKHN1YnNjcmlwdGlvbiwgY29tbWFuZCkge1xuICAgIGNvbnN0IHtpZGVudGlmaWVyfSA9IHN1YnNjcmlwdGlvblxuICAgIHJldHVybiB0aGlzLmNvbnN1bWVyLnNlbmQoe2NvbW1hbmQsIGlkZW50aWZpZXJ9KVxuICB9XG59XG4iLCAiaW1wb3J0IENvbm5lY3Rpb24gZnJvbSBcIi4vY29ubmVjdGlvblwiXG5pbXBvcnQgU3Vic2NyaXB0aW9ucyBmcm9tIFwiLi9zdWJzY3JpcHRpb25zXCJcblxuLy8gVGhlIEFjdGlvbkNhYmxlLkNvbnN1bWVyIGVzdGFibGlzaGVzIHRoZSBjb25uZWN0aW9uIHRvIGEgc2VydmVyLXNpZGUgUnVieSBDb25uZWN0aW9uIG9iamVjdC4gT25jZSBlc3RhYmxpc2hlZCxcbi8vIHRoZSBBY3Rpb25DYWJsZS5Db25uZWN0aW9uTW9uaXRvciB3aWxsIGVuc3VyZSB0aGF0IGl0cyBwcm9wZXJseSBtYWludGFpbmVkIHRocm91Z2ggaGVhcnRiZWF0cyBhbmQgY2hlY2tpbmcgZm9yIHN0YWxlIHVwZGF0ZXMuXG4vLyBUaGUgQ29uc3VtZXIgaW5zdGFuY2UgaXMgYWxzbyB0aGUgZ2F0ZXdheSB0byBlc3RhYmxpc2hpbmcgc3Vic2NyaXB0aW9ucyB0byBkZXNpcmVkIGNoYW5uZWxzIHRocm91Z2ggdGhlICNjcmVhdGVTdWJzY3JpcHRpb25cbi8vIG1ldGhvZC5cbi8vXG4vLyBUaGUgZm9sbG93aW5nIGV4YW1wbGUgc2hvd3MgaG93IHRoaXMgY2FuIGJlIHNldCB1cDpcbi8vXG4vLyAgIEFwcCA9IHt9XG4vLyAgIEFwcC5jYWJsZSA9IEFjdGlvbkNhYmxlLmNyZWF0ZUNvbnN1bWVyKFwid3M6Ly9leGFtcGxlLmNvbS9hY2NvdW50cy8xXCIpXG4vLyAgIEFwcC5hcHBlYXJhbmNlID0gQXBwLmNhYmxlLnN1YnNjcmlwdGlvbnMuY3JlYXRlKFwiQXBwZWFyYW5jZUNoYW5uZWxcIilcbi8vXG4vLyBGb3IgbW9yZSBkZXRhaWxzIG9uIGhvdyB5b3UnZCBjb25maWd1cmUgYW4gYWN0dWFsIGNoYW5uZWwgc3Vic2NyaXB0aW9uLCBzZWUgQWN0aW9uQ2FibGUuU3Vic2NyaXB0aW9uLlxuLy9cbi8vIFdoZW4gYSBjb25zdW1lciBpcyBjcmVhdGVkLCBpdCBhdXRvbWF0aWNhbGx5IGNvbm5lY3RzIHdpdGggdGhlIHNlcnZlci5cbi8vXG4vLyBUbyBkaXNjb25uZWN0IGZyb20gdGhlIHNlcnZlciwgY2FsbFxuLy9cbi8vICAgQXBwLmNhYmxlLmRpc2Nvbm5lY3QoKVxuLy9cbi8vIGFuZCB0byByZXN0YXJ0IHRoZSBjb25uZWN0aW9uOlxuLy9cbi8vICAgQXBwLmNhYmxlLmNvbm5lY3QoKVxuLy9cbi8vIEFueSBjaGFubmVsIHN1YnNjcmlwdGlvbnMgd2hpY2ggZXhpc3RlZCBwcmlvciB0byBkaXNjb25uZWN0aW5nIHdpbGxcbi8vIGF1dG9tYXRpY2FsbHkgcmVzdWJzY3JpYmUuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbnN1bWVyIHtcbiAgY29uc3RydWN0b3IodXJsKSB7XG4gICAgdGhpcy5fdXJsID0gdXJsXG4gICAgdGhpcy5zdWJzY3JpcHRpb25zID0gbmV3IFN1YnNjcmlwdGlvbnModGhpcylcbiAgICB0aGlzLmNvbm5lY3Rpb24gPSBuZXcgQ29ubmVjdGlvbih0aGlzKVxuICAgIHRoaXMuc3VicHJvdG9jb2xzID0gW11cbiAgfVxuXG4gIGdldCB1cmwoKSB7XG4gICAgcmV0dXJuIGNyZWF0ZVdlYlNvY2tldFVSTCh0aGlzLl91cmwpXG4gIH1cblxuICBzZW5kKGRhdGEpIHtcbiAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnNlbmQoZGF0YSlcbiAgfVxuXG4gIGNvbm5lY3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5vcGVuKClcbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5jbG9zZSh7YWxsb3dSZWNvbm5lY3Q6IGZhbHNlfSlcbiAgfVxuXG4gIGVuc3VyZUFjdGl2ZUNvbm5lY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLmNvbm5lY3Rpb24uaXNBY3RpdmUoKSkge1xuICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5vcGVuKClcbiAgICB9XG4gIH1cblxuICBhZGRTdWJQcm90b2NvbChzdWJwcm90b2NvbCkge1xuICAgIHRoaXMuc3VicHJvdG9jb2xzID0gWy4uLnRoaXMuc3VicHJvdG9jb2xzLCBzdWJwcm90b2NvbF1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlV2ViU29ja2V0VVJMKHVybCkge1xuICBpZiAodHlwZW9mIHVybCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgdXJsID0gdXJsKClcbiAgfVxuXG4gIGlmICh1cmwgJiYgIS9ed3NzPzovaS50ZXN0KHVybCkpIHtcbiAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIilcbiAgICBhLmhyZWYgPSB1cmxcbiAgICAvLyBGaXggcG9wdWxhdGluZyBMb2NhdGlvbiBwcm9wZXJ0aWVzIGluIElFLiBPdGhlcndpc2UsIHByb3RvY29sIHdpbGwgYmUgYmxhbmsuXG4gICAgYS5ocmVmID0gYS5ocmVmIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICBhLnByb3RvY29sID0gYS5wcm90b2NvbC5yZXBsYWNlKFwiaHR0cFwiLCBcIndzXCIpXG4gICAgcmV0dXJuIGEuaHJlZlxuICB9IGVsc2Uge1xuICAgIHJldHVybiB1cmxcbiAgfVxufVxuIiwgImltcG9ydCBDb25uZWN0aW9uIGZyb20gXCIuL2Nvbm5lY3Rpb25cIlxuaW1wb3J0IENvbm5lY3Rpb25Nb25pdG9yIGZyb20gXCIuL2Nvbm5lY3Rpb25fbW9uaXRvclwiXG5pbXBvcnQgQ29uc3VtZXIsIHsgY3JlYXRlV2ViU29ja2V0VVJMIH0gZnJvbSBcIi4vY29uc3VtZXJcIlxuaW1wb3J0IElOVEVSTkFMIGZyb20gXCIuL2ludGVybmFsXCJcbmltcG9ydCBTdWJzY3JpcHRpb24gZnJvbSBcIi4vc3Vic2NyaXB0aW9uXCJcbmltcG9ydCBTdWJzY3JpcHRpb25zIGZyb20gXCIuL3N1YnNjcmlwdGlvbnNcIlxuaW1wb3J0IFN1YnNjcmlwdGlvbkd1YXJhbnRvciBmcm9tIFwiLi9zdWJzY3JpcHRpb25fZ3VhcmFudG9yXCJcbmltcG9ydCBhZGFwdGVycyBmcm9tIFwiLi9hZGFwdGVyc1wiXG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlclwiXG5cbmV4cG9ydCB7XG4gIENvbm5lY3Rpb24sXG4gIENvbm5lY3Rpb25Nb25pdG9yLFxuICBDb25zdW1lcixcbiAgSU5URVJOQUwsXG4gIFN1YnNjcmlwdGlvbixcbiAgU3Vic2NyaXB0aW9ucyxcbiAgU3Vic2NyaXB0aW9uR3VhcmFudG9yLFxuICBhZGFwdGVycyxcbiAgY3JlYXRlV2ViU29ja2V0VVJMLFxuICBsb2dnZXIsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDb25zdW1lcih1cmwgPSBnZXRDb25maWcoXCJ1cmxcIikgfHwgSU5URVJOQUwuZGVmYXVsdF9tb3VudF9wYXRoKSB7XG4gIHJldHVybiBuZXcgQ29uc3VtZXIodXJsKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29uZmlnKG5hbWUpIHtcbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmhlYWQucXVlcnlTZWxlY3RvcihgbWV0YVtuYW1lPSdhY3Rpb24tY2FibGUtJHtuYW1lfSddYClcbiAgaWYgKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJjb250ZW50XCIpXG4gIH1cbn1cbiIsICIvKipcbiAqIEZvcm1EYXRhIFBhdGNoIC0gSW5jbHVkZSBkaXNhYmxlZCBmaWVsZHNcbiAqXG4gKiBCcm93c2VyIGRlZmF1bHQ6IGRpc2FibGVkIGZpZWxkcyBhcmUgTk9UIHN1Ym1pdHRlZFxuICogVGhpcyBwYXRjaDogZGlzYWJsZWQgZmllbGRzIEFSRSBzdWJtaXR0ZWRcbiAqXG4gKiBXaHk6IEFJIG1heSBkaXNhYmxlIGlucHV0cyBiZWZvcmUgZm9ybSBzdWJtaXNzaW9uLCBicmVha2luZyBmb3JtIGRhdGEgY29sbGVjdGlvbi5cbiAqIFRoaXMgcGF0Y2ggZW5zdXJlcyBkaXNhYmxlZCBmaWVsZHMgYXJlIHN0aWxsIGluY2x1ZGVkIGluIEZvcm1EYXRhLlxuICovXG5cbihmdW5jdGlvbigpIHtcbiAgY29uc3QgT3JpZ2luYWxGb3JtRGF0YSA9IHdpbmRvdy5Gb3JtRGF0YTtcblxuICB3aW5kb3cuRm9ybURhdGEgPSBjbGFzcyBQYXRjaGVkRm9ybURhdGEgZXh0ZW5kcyBPcmlnaW5hbEZvcm1EYXRhIHtcbiAgICBjb25zdHJ1Y3Rvcihmb3JtPzogSFRNTEZvcm1FbGVtZW50KSB7XG4gICAgICBzdXBlcihmb3JtKTtcblxuICAgICAgaWYgKGZvcm0pIHtcbiAgICAgICAgLy8gQ29sbGVjdCBkaXNhYmxlZCBmaWVsZHMgdGhhdCB3b3VsZCBub3JtYWxseSBiZSBleGNsdWRlZFxuICAgICAgICBjb25zdCBkaXNhYmxlZEZpZWxkcyA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbDxIVE1MSW5wdXRFbGVtZW50IHwgSFRNTFRleHRBcmVhRWxlbWVudCB8IEhUTUxTZWxlY3RFbGVtZW50PihcbiAgICAgICAgICAnaW5wdXRbZGlzYWJsZWRdW25hbWVdLCB0ZXh0YXJlYVtkaXNhYmxlZF1bbmFtZV0sIHNlbGVjdFtkaXNhYmxlZF1bbmFtZV0nXG4gICAgICAgICk7XG5cbiAgICAgICAgZGlzYWJsZWRGaWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XG4gICAgICAgICAgLy8gT25seSBhZGQgaWYgZmllbGQgaGFzIGEgbmFtZSBhbmQgd2Fzbid0IGFscmVhZHkgYWRkZWRcbiAgICAgICAgICBpZiAoZmllbGQubmFtZSAmJiAhdGhpcy5oYXMoZmllbGQubmFtZSkpIHtcbiAgICAgICAgICAgIGlmIChmaWVsZCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgLy8gSGFuZGxlIGNoZWNrYm94ZXMgYW5kIHJhZGlvc1xuICAgICAgICAgICAgICBpZiAoKGZpZWxkLnR5cGUgPT09ICdjaGVja2JveCcgfHwgZmllbGQudHlwZSA9PT0gJ3JhZGlvJykgJiYgIWZpZWxkLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIFNraXAgdW5jaGVja2VkIGNoZWNrYm94ZXMvcmFkaW9zXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBIYW5kbGUgZmlsZSBpbnB1dHNcbiAgICAgICAgICAgICAgaWYgKGZpZWxkLnR5cGUgPT09ICdmaWxlJyAmJiBmaWVsZC5maWxlcykge1xuICAgICAgICAgICAgICAgIEFycmF5LmZyb20oZmllbGQuZmlsZXMpLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZChmaWVsZC5uYW1lLCBmaWxlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQWRkIHJlZ3VsYXIgZmllbGQgdmFsdWVcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kKGZpZWxkLm5hbWUsIGZpZWxkLnZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSBhcyBhbnk7XG5cbiAgLy8gUHJlc2VydmUgc3RhdGljIG1ldGhvZHNcbiAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHdpbmRvdy5Gb3JtRGF0YSwgT3JpZ2luYWxGb3JtRGF0YSk7XG4gIE9iamVjdC5zZXRQcm90b3R5cGVPZih3aW5kb3cuRm9ybURhdGEucHJvdG90eXBlLCBPcmlnaW5hbEZvcm1EYXRhLnByb3RvdHlwZSk7XG59KSgpO1xuIiwgInZhciBzcGFya01kNSA9IHtcbiAgZXhwb3J0czoge31cbn07XG5cbihmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcbiAgKGZ1bmN0aW9uKGZhY3RvcnkpIHtcbiAgICB7XG4gICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcbiAgICB9XG4gIH0pKChmdW5jdGlvbih1bmRlZmluZWQkMSkge1xuICAgIHZhciBoZXhfY2hyID0gWyBcIjBcIiwgXCIxXCIsIFwiMlwiLCBcIjNcIiwgXCI0XCIsIFwiNVwiLCBcIjZcIiwgXCI3XCIsIFwiOFwiLCBcIjlcIiwgXCJhXCIsIFwiYlwiLCBcImNcIiwgXCJkXCIsIFwiZVwiLCBcImZcIiBdO1xuICAgIGZ1bmN0aW9uIG1kNWN5Y2xlKHgsIGspIHtcbiAgICAgIHZhciBhID0geFswXSwgYiA9IHhbMV0sIGMgPSB4WzJdLCBkID0geFszXTtcbiAgICAgIGEgKz0gKGIgJiBjIHwgfmIgJiBkKSArIGtbMF0gLSA2ODA4NzY5MzYgfCAwO1xuICAgICAgYSA9IChhIDw8IDcgfCBhID4+PiAyNSkgKyBiIHwgMDtcbiAgICAgIGQgKz0gKGEgJiBiIHwgfmEgJiBjKSArIGtbMV0gLSAzODk1NjQ1ODYgfCAwO1xuICAgICAgZCA9IChkIDw8IDEyIHwgZCA+Pj4gMjApICsgYSB8IDA7XG4gICAgICBjICs9IChkICYgYSB8IH5kICYgYikgKyBrWzJdICsgNjA2MTA1ODE5IHwgMDtcbiAgICAgIGMgPSAoYyA8PCAxNyB8IGMgPj4+IDE1KSArIGQgfCAwO1xuICAgICAgYiArPSAoYyAmIGQgfCB+YyAmIGEpICsga1szXSAtIDEwNDQ1MjUzMzAgfCAwO1xuICAgICAgYiA9IChiIDw8IDIyIHwgYiA+Pj4gMTApICsgYyB8IDA7XG4gICAgICBhICs9IChiICYgYyB8IH5iICYgZCkgKyBrWzRdIC0gMTc2NDE4ODk3IHwgMDtcbiAgICAgIGEgPSAoYSA8PCA3IHwgYSA+Pj4gMjUpICsgYiB8IDA7XG4gICAgICBkICs9IChhICYgYiB8IH5hICYgYykgKyBrWzVdICsgMTIwMDA4MDQyNiB8IDA7XG4gICAgICBkID0gKGQgPDwgMTIgfCBkID4+PiAyMCkgKyBhIHwgMDtcbiAgICAgIGMgKz0gKGQgJiBhIHwgfmQgJiBiKSArIGtbNl0gLSAxNDczMjMxMzQxIHwgMDtcbiAgICAgIGMgPSAoYyA8PCAxNyB8IGMgPj4+IDE1KSArIGQgfCAwO1xuICAgICAgYiArPSAoYyAmIGQgfCB+YyAmIGEpICsga1s3XSAtIDQ1NzA1OTgzIHwgMDtcbiAgICAgIGIgPSAoYiA8PCAyMiB8IGIgPj4+IDEwKSArIGMgfCAwO1xuICAgICAgYSArPSAoYiAmIGMgfCB+YiAmIGQpICsga1s4XSArIDE3NzAwMzU0MTYgfCAwO1xuICAgICAgYSA9IChhIDw8IDcgfCBhID4+PiAyNSkgKyBiIHwgMDtcbiAgICAgIGQgKz0gKGEgJiBiIHwgfmEgJiBjKSArIGtbOV0gLSAxOTU4NDE0NDE3IHwgMDtcbiAgICAgIGQgPSAoZCA8PCAxMiB8IGQgPj4+IDIwKSArIGEgfCAwO1xuICAgICAgYyArPSAoZCAmIGEgfCB+ZCAmIGIpICsga1sxMF0gLSA0MjA2MyB8IDA7XG4gICAgICBjID0gKGMgPDwgMTcgfCBjID4+PiAxNSkgKyBkIHwgMDtcbiAgICAgIGIgKz0gKGMgJiBkIHwgfmMgJiBhKSArIGtbMTFdIC0gMTk5MDQwNDE2MiB8IDA7XG4gICAgICBiID0gKGIgPDwgMjIgfCBiID4+PiAxMCkgKyBjIHwgMDtcbiAgICAgIGEgKz0gKGIgJiBjIHwgfmIgJiBkKSArIGtbMTJdICsgMTgwNDYwMzY4MiB8IDA7XG4gICAgICBhID0gKGEgPDwgNyB8IGEgPj4+IDI1KSArIGIgfCAwO1xuICAgICAgZCArPSAoYSAmIGIgfCB+YSAmIGMpICsga1sxM10gLSA0MDM0MTEwMSB8IDA7XG4gICAgICBkID0gKGQgPDwgMTIgfCBkID4+PiAyMCkgKyBhIHwgMDtcbiAgICAgIGMgKz0gKGQgJiBhIHwgfmQgJiBiKSArIGtbMTRdIC0gMTUwMjAwMjI5MCB8IDA7XG4gICAgICBjID0gKGMgPDwgMTcgfCBjID4+PiAxNSkgKyBkIHwgMDtcbiAgICAgIGIgKz0gKGMgJiBkIHwgfmMgJiBhKSArIGtbMTVdICsgMTIzNjUzNTMyOSB8IDA7XG4gICAgICBiID0gKGIgPDwgMjIgfCBiID4+PiAxMCkgKyBjIHwgMDtcbiAgICAgIGEgKz0gKGIgJiBkIHwgYyAmIH5kKSArIGtbMV0gLSAxNjU3OTY1MTAgfCAwO1xuICAgICAgYSA9IChhIDw8IDUgfCBhID4+PiAyNykgKyBiIHwgMDtcbiAgICAgIGQgKz0gKGEgJiBjIHwgYiAmIH5jKSArIGtbNl0gLSAxMDY5NTAxNjMyIHwgMDtcbiAgICAgIGQgPSAoZCA8PCA5IHwgZCA+Pj4gMjMpICsgYSB8IDA7XG4gICAgICBjICs9IChkICYgYiB8IGEgJiB+YikgKyBrWzExXSArIDY0MzcxNzcxMyB8IDA7XG4gICAgICBjID0gKGMgPDwgMTQgfCBjID4+PiAxOCkgKyBkIHwgMDtcbiAgICAgIGIgKz0gKGMgJiBhIHwgZCAmIH5hKSArIGtbMF0gLSAzNzM4OTczMDIgfCAwO1xuICAgICAgYiA9IChiIDw8IDIwIHwgYiA+Pj4gMTIpICsgYyB8IDA7XG4gICAgICBhICs9IChiICYgZCB8IGMgJiB+ZCkgKyBrWzVdIC0gNzAxNTU4NjkxIHwgMDtcbiAgICAgIGEgPSAoYSA8PCA1IHwgYSA+Pj4gMjcpICsgYiB8IDA7XG4gICAgICBkICs9IChhICYgYyB8IGIgJiB+YykgKyBrWzEwXSArIDM4MDE2MDgzIHwgMDtcbiAgICAgIGQgPSAoZCA8PCA5IHwgZCA+Pj4gMjMpICsgYSB8IDA7XG4gICAgICBjICs9IChkICYgYiB8IGEgJiB+YikgKyBrWzE1XSAtIDY2MDQ3ODMzNSB8IDA7XG4gICAgICBjID0gKGMgPDwgMTQgfCBjID4+PiAxOCkgKyBkIHwgMDtcbiAgICAgIGIgKz0gKGMgJiBhIHwgZCAmIH5hKSArIGtbNF0gLSA0MDU1Mzc4NDggfCAwO1xuICAgICAgYiA9IChiIDw8IDIwIHwgYiA+Pj4gMTIpICsgYyB8IDA7XG4gICAgICBhICs9IChiICYgZCB8IGMgJiB+ZCkgKyBrWzldICsgNTY4NDQ2NDM4IHwgMDtcbiAgICAgIGEgPSAoYSA8PCA1IHwgYSA+Pj4gMjcpICsgYiB8IDA7XG4gICAgICBkICs9IChhICYgYyB8IGIgJiB+YykgKyBrWzE0XSAtIDEwMTk4MDM2OTAgfCAwO1xuICAgICAgZCA9IChkIDw8IDkgfCBkID4+PiAyMykgKyBhIHwgMDtcbiAgICAgIGMgKz0gKGQgJiBiIHwgYSAmIH5iKSArIGtbM10gLSAxODczNjM5NjEgfCAwO1xuICAgICAgYyA9IChjIDw8IDE0IHwgYyA+Pj4gMTgpICsgZCB8IDA7XG4gICAgICBiICs9IChjICYgYSB8IGQgJiB+YSkgKyBrWzhdICsgMTE2MzUzMTUwMSB8IDA7XG4gICAgICBiID0gKGIgPDwgMjAgfCBiID4+PiAxMikgKyBjIHwgMDtcbiAgICAgIGEgKz0gKGIgJiBkIHwgYyAmIH5kKSArIGtbMTNdIC0gMTQ0NDY4MTQ2NyB8IDA7XG4gICAgICBhID0gKGEgPDwgNSB8IGEgPj4+IDI3KSArIGIgfCAwO1xuICAgICAgZCArPSAoYSAmIGMgfCBiICYgfmMpICsga1syXSAtIDUxNDAzNzg0IHwgMDtcbiAgICAgIGQgPSAoZCA8PCA5IHwgZCA+Pj4gMjMpICsgYSB8IDA7XG4gICAgICBjICs9IChkICYgYiB8IGEgJiB+YikgKyBrWzddICsgMTczNTMyODQ3MyB8IDA7XG4gICAgICBjID0gKGMgPDwgMTQgfCBjID4+PiAxOCkgKyBkIHwgMDtcbiAgICAgIGIgKz0gKGMgJiBhIHwgZCAmIH5hKSArIGtbMTJdIC0gMTkyNjYwNzczNCB8IDA7XG4gICAgICBiID0gKGIgPDwgMjAgfCBiID4+PiAxMikgKyBjIHwgMDtcbiAgICAgIGEgKz0gKGIgXiBjIF4gZCkgKyBrWzVdIC0gMzc4NTU4IHwgMDtcbiAgICAgIGEgPSAoYSA8PCA0IHwgYSA+Pj4gMjgpICsgYiB8IDA7XG4gICAgICBkICs9IChhIF4gYiBeIGMpICsga1s4XSAtIDIwMjI1NzQ0NjMgfCAwO1xuICAgICAgZCA9IChkIDw8IDExIHwgZCA+Pj4gMjEpICsgYSB8IDA7XG4gICAgICBjICs9IChkIF4gYSBeIGIpICsga1sxMV0gKyAxODM5MDMwNTYyIHwgMDtcbiAgICAgIGMgPSAoYyA8PCAxNiB8IGMgPj4+IDE2KSArIGQgfCAwO1xuICAgICAgYiArPSAoYyBeIGQgXiBhKSArIGtbMTRdIC0gMzUzMDk1NTYgfCAwO1xuICAgICAgYiA9IChiIDw8IDIzIHwgYiA+Pj4gOSkgKyBjIHwgMDtcbiAgICAgIGEgKz0gKGIgXiBjIF4gZCkgKyBrWzFdIC0gMTUzMDk5MjA2MCB8IDA7XG4gICAgICBhID0gKGEgPDwgNCB8IGEgPj4+IDI4KSArIGIgfCAwO1xuICAgICAgZCArPSAoYSBeIGIgXiBjKSArIGtbNF0gKyAxMjcyODkzMzUzIHwgMDtcbiAgICAgIGQgPSAoZCA8PCAxMSB8IGQgPj4+IDIxKSArIGEgfCAwO1xuICAgICAgYyArPSAoZCBeIGEgXiBiKSArIGtbN10gLSAxNTU0OTc2MzIgfCAwO1xuICAgICAgYyA9IChjIDw8IDE2IHwgYyA+Pj4gMTYpICsgZCB8IDA7XG4gICAgICBiICs9IChjIF4gZCBeIGEpICsga1sxMF0gLSAxMDk0NzMwNjQwIHwgMDtcbiAgICAgIGIgPSAoYiA8PCAyMyB8IGIgPj4+IDkpICsgYyB8IDA7XG4gICAgICBhICs9IChiIF4gYyBeIGQpICsga1sxM10gKyA2ODEyNzkxNzQgfCAwO1xuICAgICAgYSA9IChhIDw8IDQgfCBhID4+PiAyOCkgKyBiIHwgMDtcbiAgICAgIGQgKz0gKGEgXiBiIF4gYykgKyBrWzBdIC0gMzU4NTM3MjIyIHwgMDtcbiAgICAgIGQgPSAoZCA8PCAxMSB8IGQgPj4+IDIxKSArIGEgfCAwO1xuICAgICAgYyArPSAoZCBeIGEgXiBiKSArIGtbM10gLSA3MjI1MjE5NzkgfCAwO1xuICAgICAgYyA9IChjIDw8IDE2IHwgYyA+Pj4gMTYpICsgZCB8IDA7XG4gICAgICBiICs9IChjIF4gZCBeIGEpICsga1s2XSArIDc2MDI5MTg5IHwgMDtcbiAgICAgIGIgPSAoYiA8PCAyMyB8IGIgPj4+IDkpICsgYyB8IDA7XG4gICAgICBhICs9IChiIF4gYyBeIGQpICsga1s5XSAtIDY0MDM2NDQ4NyB8IDA7XG4gICAgICBhID0gKGEgPDwgNCB8IGEgPj4+IDI4KSArIGIgfCAwO1xuICAgICAgZCArPSAoYSBeIGIgXiBjKSArIGtbMTJdIC0gNDIxODE1ODM1IHwgMDtcbiAgICAgIGQgPSAoZCA8PCAxMSB8IGQgPj4+IDIxKSArIGEgfCAwO1xuICAgICAgYyArPSAoZCBeIGEgXiBiKSArIGtbMTVdICsgNTMwNzQyNTIwIHwgMDtcbiAgICAgIGMgPSAoYyA8PCAxNiB8IGMgPj4+IDE2KSArIGQgfCAwO1xuICAgICAgYiArPSAoYyBeIGQgXiBhKSArIGtbMl0gLSA5OTUzMzg2NTEgfCAwO1xuICAgICAgYiA9IChiIDw8IDIzIHwgYiA+Pj4gOSkgKyBjIHwgMDtcbiAgICAgIGEgKz0gKGMgXiAoYiB8IH5kKSkgKyBrWzBdIC0gMTk4NjMwODQ0IHwgMDtcbiAgICAgIGEgPSAoYSA8PCA2IHwgYSA+Pj4gMjYpICsgYiB8IDA7XG4gICAgICBkICs9IChiIF4gKGEgfCB+YykpICsga1s3XSArIDExMjY4OTE0MTUgfCAwO1xuICAgICAgZCA9IChkIDw8IDEwIHwgZCA+Pj4gMjIpICsgYSB8IDA7XG4gICAgICBjICs9IChhIF4gKGQgfCB+YikpICsga1sxNF0gLSAxNDE2MzU0OTA1IHwgMDtcbiAgICAgIGMgPSAoYyA8PCAxNSB8IGMgPj4+IDE3KSArIGQgfCAwO1xuICAgICAgYiArPSAoZCBeIChjIHwgfmEpKSArIGtbNV0gLSA1NzQzNDA1NSB8IDA7XG4gICAgICBiID0gKGIgPDwgMjEgfCBiID4+PiAxMSkgKyBjIHwgMDtcbiAgICAgIGEgKz0gKGMgXiAoYiB8IH5kKSkgKyBrWzEyXSArIDE3MDA0ODU1NzEgfCAwO1xuICAgICAgYSA9IChhIDw8IDYgfCBhID4+PiAyNikgKyBiIHwgMDtcbiAgICAgIGQgKz0gKGIgXiAoYSB8IH5jKSkgKyBrWzNdIC0gMTg5NDk4NjYwNiB8IDA7XG4gICAgICBkID0gKGQgPDwgMTAgfCBkID4+PiAyMikgKyBhIHwgMDtcbiAgICAgIGMgKz0gKGEgXiAoZCB8IH5iKSkgKyBrWzEwXSAtIDEwNTE1MjMgfCAwO1xuICAgICAgYyA9IChjIDw8IDE1IHwgYyA+Pj4gMTcpICsgZCB8IDA7XG4gICAgICBiICs9IChkIF4gKGMgfCB+YSkpICsga1sxXSAtIDIwNTQ5MjI3OTkgfCAwO1xuICAgICAgYiA9IChiIDw8IDIxIHwgYiA+Pj4gMTEpICsgYyB8IDA7XG4gICAgICBhICs9IChjIF4gKGIgfCB+ZCkpICsga1s4XSArIDE4NzMzMTMzNTkgfCAwO1xuICAgICAgYSA9IChhIDw8IDYgfCBhID4+PiAyNikgKyBiIHwgMDtcbiAgICAgIGQgKz0gKGIgXiAoYSB8IH5jKSkgKyBrWzE1XSAtIDMwNjExNzQ0IHwgMDtcbiAgICAgIGQgPSAoZCA8PCAxMCB8IGQgPj4+IDIyKSArIGEgfCAwO1xuICAgICAgYyArPSAoYSBeIChkIHwgfmIpKSArIGtbNl0gLSAxNTYwMTk4MzgwIHwgMDtcbiAgICAgIGMgPSAoYyA8PCAxNSB8IGMgPj4+IDE3KSArIGQgfCAwO1xuICAgICAgYiArPSAoZCBeIChjIHwgfmEpKSArIGtbMTNdICsgMTMwOTE1MTY0OSB8IDA7XG4gICAgICBiID0gKGIgPDwgMjEgfCBiID4+PiAxMSkgKyBjIHwgMDtcbiAgICAgIGEgKz0gKGMgXiAoYiB8IH5kKSkgKyBrWzRdIC0gMTQ1NTIzMDcwIHwgMDtcbiAgICAgIGEgPSAoYSA8PCA2IHwgYSA+Pj4gMjYpICsgYiB8IDA7XG4gICAgICBkICs9IChiIF4gKGEgfCB+YykpICsga1sxMV0gLSAxMTIwMjEwMzc5IHwgMDtcbiAgICAgIGQgPSAoZCA8PCAxMCB8IGQgPj4+IDIyKSArIGEgfCAwO1xuICAgICAgYyArPSAoYSBeIChkIHwgfmIpKSArIGtbMl0gKyA3MTg3ODcyNTkgfCAwO1xuICAgICAgYyA9IChjIDw8IDE1IHwgYyA+Pj4gMTcpICsgZCB8IDA7XG4gICAgICBiICs9IChkIF4gKGMgfCB+YSkpICsga1s5XSAtIDM0MzQ4NTU1MSB8IDA7XG4gICAgICBiID0gKGIgPDwgMjEgfCBiID4+PiAxMSkgKyBjIHwgMDtcbiAgICAgIHhbMF0gPSBhICsgeFswXSB8IDA7XG4gICAgICB4WzFdID0gYiArIHhbMV0gfCAwO1xuICAgICAgeFsyXSA9IGMgKyB4WzJdIHwgMDtcbiAgICAgIHhbM10gPSBkICsgeFszXSB8IDA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1kNWJsayhzKSB7XG4gICAgICB2YXIgbWQ1YmxrcyA9IFtdLCBpO1xuICAgICAgZm9yIChpID0gMDsgaSA8IDY0OyBpICs9IDQpIHtcbiAgICAgICAgbWQ1Ymxrc1tpID4+IDJdID0gcy5jaGFyQ29kZUF0KGkpICsgKHMuY2hhckNvZGVBdChpICsgMSkgPDwgOCkgKyAocy5jaGFyQ29kZUF0KGkgKyAyKSA8PCAxNikgKyAocy5jaGFyQ29kZUF0KGkgKyAzKSA8PCAyNCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWQ1YmxrcztcbiAgICB9XG4gICAgZnVuY3Rpb24gbWQ1YmxrX2FycmF5KGEpIHtcbiAgICAgIHZhciBtZDVibGtzID0gW10sIGk7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgNjQ7IGkgKz0gNCkge1xuICAgICAgICBtZDVibGtzW2kgPj4gMl0gPSBhW2ldICsgKGFbaSArIDFdIDw8IDgpICsgKGFbaSArIDJdIDw8IDE2KSArIChhW2kgKyAzXSA8PCAyNCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWQ1YmxrcztcbiAgICB9XG4gICAgZnVuY3Rpb24gbWQ1MShzKSB7XG4gICAgICB2YXIgbiA9IHMubGVuZ3RoLCBzdGF0ZSA9IFsgMTczMjU4NDE5MywgLTI3MTczMzg3OSwgLTE3MzI1ODQxOTQsIDI3MTczMzg3OCBdLCBpLCBsZW5ndGgsIHRhaWwsIHRtcCwgbG8sIGhpO1xuICAgICAgZm9yIChpID0gNjQ7IGkgPD0gbjsgaSArPSA2NCkge1xuICAgICAgICBtZDVjeWNsZShzdGF0ZSwgbWQ1YmxrKHMuc3Vic3RyaW5nKGkgLSA2NCwgaSkpKTtcbiAgICAgIH1cbiAgICAgIHMgPSBzLnN1YnN0cmluZyhpIC0gNjQpO1xuICAgICAgbGVuZ3RoID0gcy5sZW5ndGg7XG4gICAgICB0YWlsID0gWyAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwIF07XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgdGFpbFtpID4+IDJdIHw9IHMuY2hhckNvZGVBdChpKSA8PCAoaSAlIDQgPDwgMyk7XG4gICAgICB9XG4gICAgICB0YWlsW2kgPj4gMl0gfD0gMTI4IDw8IChpICUgNCA8PCAzKTtcbiAgICAgIGlmIChpID4gNTUpIHtcbiAgICAgICAgbWQ1Y3ljbGUoc3RhdGUsIHRhaWwpO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgMTY7IGkgKz0gMSkge1xuICAgICAgICAgIHRhaWxbaV0gPSAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0bXAgPSBuICogODtcbiAgICAgIHRtcCA9IHRtcC50b1N0cmluZygxNikubWF0Y2goLyguKj8pKC57MCw4fSkkLyk7XG4gICAgICBsbyA9IHBhcnNlSW50KHRtcFsyXSwgMTYpO1xuICAgICAgaGkgPSBwYXJzZUludCh0bXBbMV0sIDE2KSB8fCAwO1xuICAgICAgdGFpbFsxNF0gPSBsbztcbiAgICAgIHRhaWxbMTVdID0gaGk7XG4gICAgICBtZDVjeWNsZShzdGF0ZSwgdGFpbCk7XG4gICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1kNTFfYXJyYXkoYSkge1xuICAgICAgdmFyIG4gPSBhLmxlbmd0aCwgc3RhdGUgPSBbIDE3MzI1ODQxOTMsIC0yNzE3MzM4NzksIC0xNzMyNTg0MTk0LCAyNzE3MzM4NzggXSwgaSwgbGVuZ3RoLCB0YWlsLCB0bXAsIGxvLCBoaTtcbiAgICAgIGZvciAoaSA9IDY0OyBpIDw9IG47IGkgKz0gNjQpIHtcbiAgICAgICAgbWQ1Y3ljbGUoc3RhdGUsIG1kNWJsa19hcnJheShhLnN1YmFycmF5KGkgLSA2NCwgaSkpKTtcbiAgICAgIH1cbiAgICAgIGEgPSBpIC0gNjQgPCBuID8gYS5zdWJhcnJheShpIC0gNjQpIDogbmV3IFVpbnQ4QXJyYXkoMCk7XG4gICAgICBsZW5ndGggPSBhLmxlbmd0aDtcbiAgICAgIHRhaWwgPSBbIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAgXTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICB0YWlsW2kgPj4gMl0gfD0gYVtpXSA8PCAoaSAlIDQgPDwgMyk7XG4gICAgICB9XG4gICAgICB0YWlsW2kgPj4gMl0gfD0gMTI4IDw8IChpICUgNCA8PCAzKTtcbiAgICAgIGlmIChpID4gNTUpIHtcbiAgICAgICAgbWQ1Y3ljbGUoc3RhdGUsIHRhaWwpO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgMTY7IGkgKz0gMSkge1xuICAgICAgICAgIHRhaWxbaV0gPSAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0bXAgPSBuICogODtcbiAgICAgIHRtcCA9IHRtcC50b1N0cmluZygxNikubWF0Y2goLyguKj8pKC57MCw4fSkkLyk7XG4gICAgICBsbyA9IHBhcnNlSW50KHRtcFsyXSwgMTYpO1xuICAgICAgaGkgPSBwYXJzZUludCh0bXBbMV0sIDE2KSB8fCAwO1xuICAgICAgdGFpbFsxNF0gPSBsbztcbiAgICAgIHRhaWxbMTVdID0gaGk7XG4gICAgICBtZDVjeWNsZShzdGF0ZSwgdGFpbCk7XG4gICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJoZXgobikge1xuICAgICAgdmFyIHMgPSBcIlwiLCBqO1xuICAgICAgZm9yIChqID0gMDsgaiA8IDQ7IGogKz0gMSkge1xuICAgICAgICBzICs9IGhleF9jaHJbbiA+PiBqICogOCArIDQgJiAxNV0gKyBoZXhfY2hyW24gPj4gaiAqIDggJiAxNV07XG4gICAgICB9XG4gICAgICByZXR1cm4gcztcbiAgICB9XG4gICAgZnVuY3Rpb24gaGV4KHgpIHtcbiAgICAgIHZhciBpO1xuICAgICAgZm9yIChpID0gMDsgaSA8IHgubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgeFtpXSA9IHJoZXgoeFtpXSk7XG4gICAgICB9XG4gICAgICByZXR1cm4geC5qb2luKFwiXCIpO1xuICAgIH1cbiAgICBpZiAoaGV4KG1kNTEoXCJoZWxsb1wiKSkgIT09IFwiNWQ0MTQwMmFiYzRiMmE3NmI5NzE5ZDkxMTAxN2M1OTJcIikgO1xuICAgIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09IFwidW5kZWZpbmVkXCIgJiYgIUFycmF5QnVmZmVyLnByb3RvdHlwZS5zbGljZSkge1xuICAgICAgKGZ1bmN0aW9uKCkge1xuICAgICAgICBmdW5jdGlvbiBjbGFtcCh2YWwsIGxlbmd0aCkge1xuICAgICAgICAgIHZhbCA9IHZhbCB8IDAgfHwgMDtcbiAgICAgICAgICBpZiAodmFsIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KHZhbCArIGxlbmd0aCwgMCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBNYXRoLm1pbih2YWwsIGxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgQXJyYXlCdWZmZXIucHJvdG90eXBlLnNsaWNlID0gZnVuY3Rpb24oZnJvbSwgdG8pIHtcbiAgICAgICAgICB2YXIgbGVuZ3RoID0gdGhpcy5ieXRlTGVuZ3RoLCBiZWdpbiA9IGNsYW1wKGZyb20sIGxlbmd0aCksIGVuZCA9IGxlbmd0aCwgbnVtLCB0YXJnZXQsIHRhcmdldEFycmF5LCBzb3VyY2VBcnJheTtcbiAgICAgICAgICBpZiAodG8gIT09IHVuZGVmaW5lZCQxKSB7XG4gICAgICAgICAgICBlbmQgPSBjbGFtcCh0bywgbGVuZ3RoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGJlZ2luID4gZW5kKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEFycmF5QnVmZmVyKDApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBudW0gPSBlbmQgLSBiZWdpbjtcbiAgICAgICAgICB0YXJnZXQgPSBuZXcgQXJyYXlCdWZmZXIobnVtKTtcbiAgICAgICAgICB0YXJnZXRBcnJheSA9IG5ldyBVaW50OEFycmF5KHRhcmdldCk7XG4gICAgICAgICAgc291cmNlQXJyYXkgPSBuZXcgVWludDhBcnJheSh0aGlzLCBiZWdpbiwgbnVtKTtcbiAgICAgICAgICB0YXJnZXRBcnJheS5zZXQoc291cmNlQXJyYXkpO1xuICAgICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICAgIH07XG4gICAgICB9KSgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB0b1V0Zjgoc3RyKSB7XG4gICAgICBpZiAoL1tcXHUwMDgwLVxcdUZGRkZdLy50ZXN0KHN0cikpIHtcbiAgICAgICAgc3RyID0gdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHN0cikpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXRmOFN0cjJBcnJheUJ1ZmZlcihzdHIsIHJldHVyblVJbnQ4QXJyYXkpIHtcbiAgICAgIHZhciBsZW5ndGggPSBzdHIubGVuZ3RoLCBidWZmID0gbmV3IEFycmF5QnVmZmVyKGxlbmd0aCksIGFyciA9IG5ldyBVaW50OEFycmF5KGJ1ZmYpLCBpO1xuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGFycltpXSA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJldHVyblVJbnQ4QXJyYXkgPyBhcnIgOiBidWZmO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhcnJheUJ1ZmZlcjJVdGY4U3RyKGJ1ZmYpIHtcbiAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIG5ldyBVaW50OEFycmF5KGJ1ZmYpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY29uY2F0ZW5hdGVBcnJheUJ1ZmZlcnMoZmlyc3QsIHNlY29uZCwgcmV0dXJuVUludDhBcnJheSkge1xuICAgICAgdmFyIHJlc3VsdCA9IG5ldyBVaW50OEFycmF5KGZpcnN0LmJ5dGVMZW5ndGggKyBzZWNvbmQuYnl0ZUxlbmd0aCk7XG4gICAgICByZXN1bHQuc2V0KG5ldyBVaW50OEFycmF5KGZpcnN0KSk7XG4gICAgICByZXN1bHQuc2V0KG5ldyBVaW50OEFycmF5KHNlY29uZCksIGZpcnN0LmJ5dGVMZW5ndGgpO1xuICAgICAgcmV0dXJuIHJldHVyblVJbnQ4QXJyYXkgPyByZXN1bHQgOiByZXN1bHQuYnVmZmVyO1xuICAgIH1cbiAgICBmdW5jdGlvbiBoZXhUb0JpbmFyeVN0cmluZyhoZXgpIHtcbiAgICAgIHZhciBieXRlcyA9IFtdLCBsZW5ndGggPSBoZXgubGVuZ3RoLCB4O1xuICAgICAgZm9yICh4ID0gMDsgeCA8IGxlbmd0aCAtIDE7IHggKz0gMikge1xuICAgICAgICBieXRlcy5wdXNoKHBhcnNlSW50KGhleC5zdWJzdHIoeCwgMiksIDE2KSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGJ5dGVzKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gU3BhcmtNRDUoKSB7XG4gICAgICB0aGlzLnJlc2V0KCk7XG4gICAgfVxuICAgIFNwYXJrTUQ1LnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbihzdHIpIHtcbiAgICAgIHRoaXMuYXBwZW5kQmluYXJ5KHRvVXRmOChzdHIpKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgU3BhcmtNRDUucHJvdG90eXBlLmFwcGVuZEJpbmFyeSA9IGZ1bmN0aW9uKGNvbnRlbnRzKSB7XG4gICAgICB0aGlzLl9idWZmICs9IGNvbnRlbnRzO1xuICAgICAgdGhpcy5fbGVuZ3RoICs9IGNvbnRlbnRzLmxlbmd0aDtcbiAgICAgIHZhciBsZW5ndGggPSB0aGlzLl9idWZmLmxlbmd0aCwgaTtcbiAgICAgIGZvciAoaSA9IDY0OyBpIDw9IGxlbmd0aDsgaSArPSA2NCkge1xuICAgICAgICBtZDVjeWNsZSh0aGlzLl9oYXNoLCBtZDVibGsodGhpcy5fYnVmZi5zdWJzdHJpbmcoaSAtIDY0LCBpKSkpO1xuICAgICAgfVxuICAgICAgdGhpcy5fYnVmZiA9IHRoaXMuX2J1ZmYuc3Vic3RyaW5nKGkgLSA2NCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIFNwYXJrTUQ1LnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbihyYXcpIHtcbiAgICAgIHZhciBidWZmID0gdGhpcy5fYnVmZiwgbGVuZ3RoID0gYnVmZi5sZW5ndGgsIGksIHRhaWwgPSBbIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAgXSwgcmV0O1xuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIHRhaWxbaSA+PiAyXSB8PSBidWZmLmNoYXJDb2RlQXQoaSkgPDwgKGkgJSA0IDw8IDMpO1xuICAgICAgfVxuICAgICAgdGhpcy5fZmluaXNoKHRhaWwsIGxlbmd0aCk7XG4gICAgICByZXQgPSBoZXgodGhpcy5faGFzaCk7XG4gICAgICBpZiAocmF3KSB7XG4gICAgICAgIHJldCA9IGhleFRvQmluYXJ5U3RyaW5nKHJldCk7XG4gICAgICB9XG4gICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICByZXR1cm4gcmV0O1xuICAgIH07XG4gICAgU3BhcmtNRDUucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLl9idWZmID0gXCJcIjtcbiAgICAgIHRoaXMuX2xlbmd0aCA9IDA7XG4gICAgICB0aGlzLl9oYXNoID0gWyAxNzMyNTg0MTkzLCAtMjcxNzMzODc5LCAtMTczMjU4NDE5NCwgMjcxNzMzODc4IF07XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIFNwYXJrTUQ1LnByb3RvdHlwZS5nZXRTdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYnVmZjogdGhpcy5fYnVmZixcbiAgICAgICAgbGVuZ3RoOiB0aGlzLl9sZW5ndGgsXG4gICAgICAgIGhhc2g6IHRoaXMuX2hhc2guc2xpY2UoKVxuICAgICAgfTtcbiAgICB9O1xuICAgIFNwYXJrTUQ1LnByb3RvdHlwZS5zZXRTdGF0ZSA9IGZ1bmN0aW9uKHN0YXRlKSB7XG4gICAgICB0aGlzLl9idWZmID0gc3RhdGUuYnVmZjtcbiAgICAgIHRoaXMuX2xlbmd0aCA9IHN0YXRlLmxlbmd0aDtcbiAgICAgIHRoaXMuX2hhc2ggPSBzdGF0ZS5oYXNoO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBTcGFya01ENS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xuICAgICAgZGVsZXRlIHRoaXMuX2hhc2g7XG4gICAgICBkZWxldGUgdGhpcy5fYnVmZjtcbiAgICAgIGRlbGV0ZSB0aGlzLl9sZW5ndGg7XG4gICAgfTtcbiAgICBTcGFya01ENS5wcm90b3R5cGUuX2ZpbmlzaCA9IGZ1bmN0aW9uKHRhaWwsIGxlbmd0aCkge1xuICAgICAgdmFyIGkgPSBsZW5ndGgsIHRtcCwgbG8sIGhpO1xuICAgICAgdGFpbFtpID4+IDJdIHw9IDEyOCA8PCAoaSAlIDQgPDwgMyk7XG4gICAgICBpZiAoaSA+IDU1KSB7XG4gICAgICAgIG1kNWN5Y2xlKHRoaXMuX2hhc2gsIHRhaWwpO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgMTY7IGkgKz0gMSkge1xuICAgICAgICAgIHRhaWxbaV0gPSAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0bXAgPSB0aGlzLl9sZW5ndGggKiA4O1xuICAgICAgdG1wID0gdG1wLnRvU3RyaW5nKDE2KS5tYXRjaCgvKC4qPykoLnswLDh9KSQvKTtcbiAgICAgIGxvID0gcGFyc2VJbnQodG1wWzJdLCAxNik7XG4gICAgICBoaSA9IHBhcnNlSW50KHRtcFsxXSwgMTYpIHx8IDA7XG4gICAgICB0YWlsWzE0XSA9IGxvO1xuICAgICAgdGFpbFsxNV0gPSBoaTtcbiAgICAgIG1kNWN5Y2xlKHRoaXMuX2hhc2gsIHRhaWwpO1xuICAgIH07XG4gICAgU3BhcmtNRDUuaGFzaCA9IGZ1bmN0aW9uKHN0ciwgcmF3KSB7XG4gICAgICByZXR1cm4gU3BhcmtNRDUuaGFzaEJpbmFyeSh0b1V0Zjgoc3RyKSwgcmF3KTtcbiAgICB9O1xuICAgIFNwYXJrTUQ1Lmhhc2hCaW5hcnkgPSBmdW5jdGlvbihjb250ZW50LCByYXcpIHtcbiAgICAgIHZhciBoYXNoID0gbWQ1MShjb250ZW50KSwgcmV0ID0gaGV4KGhhc2gpO1xuICAgICAgcmV0dXJuIHJhdyA/IGhleFRvQmluYXJ5U3RyaW5nKHJldCkgOiByZXQ7XG4gICAgfTtcbiAgICBTcGFya01ENS5BcnJheUJ1ZmZlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5yZXNldCgpO1xuICAgIH07XG4gICAgU3BhcmtNRDUuQXJyYXlCdWZmZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uKGFycikge1xuICAgICAgdmFyIGJ1ZmYgPSBjb25jYXRlbmF0ZUFycmF5QnVmZmVycyh0aGlzLl9idWZmLmJ1ZmZlciwgYXJyLCB0cnVlKSwgbGVuZ3RoID0gYnVmZi5sZW5ndGgsIGk7XG4gICAgICB0aGlzLl9sZW5ndGggKz0gYXJyLmJ5dGVMZW5ndGg7XG4gICAgICBmb3IgKGkgPSA2NDsgaSA8PSBsZW5ndGg7IGkgKz0gNjQpIHtcbiAgICAgICAgbWQ1Y3ljbGUodGhpcy5faGFzaCwgbWQ1YmxrX2FycmF5KGJ1ZmYuc3ViYXJyYXkoaSAtIDY0LCBpKSkpO1xuICAgICAgfVxuICAgICAgdGhpcy5fYnVmZiA9IGkgLSA2NCA8IGxlbmd0aCA/IG5ldyBVaW50OEFycmF5KGJ1ZmYuYnVmZmVyLnNsaWNlKGkgLSA2NCkpIDogbmV3IFVpbnQ4QXJyYXkoMCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIFNwYXJrTUQ1LkFycmF5QnVmZmVyLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbihyYXcpIHtcbiAgICAgIHZhciBidWZmID0gdGhpcy5fYnVmZiwgbGVuZ3RoID0gYnVmZi5sZW5ndGgsIHRhaWwgPSBbIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAgXSwgaSwgcmV0O1xuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIHRhaWxbaSA+PiAyXSB8PSBidWZmW2ldIDw8IChpICUgNCA8PCAzKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2ZpbmlzaCh0YWlsLCBsZW5ndGgpO1xuICAgICAgcmV0ID0gaGV4KHRoaXMuX2hhc2gpO1xuICAgICAgaWYgKHJhdykge1xuICAgICAgICByZXQgPSBoZXhUb0JpbmFyeVN0cmluZyhyZXQpO1xuICAgICAgfVxuICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xuICAgIFNwYXJrTUQ1LkFycmF5QnVmZmVyLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5fYnVmZiA9IG5ldyBVaW50OEFycmF5KDApO1xuICAgICAgdGhpcy5fbGVuZ3RoID0gMDtcbiAgICAgIHRoaXMuX2hhc2ggPSBbIDE3MzI1ODQxOTMsIC0yNzE3MzM4NzksIC0xNzMyNTg0MTk0LCAyNzE3MzM4NzggXTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgU3BhcmtNRDUuQXJyYXlCdWZmZXIucHJvdG90eXBlLmdldFN0YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc3RhdGUgPSBTcGFya01ENS5wcm90b3R5cGUuZ2V0U3RhdGUuY2FsbCh0aGlzKTtcbiAgICAgIHN0YXRlLmJ1ZmYgPSBhcnJheUJ1ZmZlcjJVdGY4U3RyKHN0YXRlLmJ1ZmYpO1xuICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH07XG4gICAgU3BhcmtNRDUuQXJyYXlCdWZmZXIucHJvdG90eXBlLnNldFN0YXRlID0gZnVuY3Rpb24oc3RhdGUpIHtcbiAgICAgIHN0YXRlLmJ1ZmYgPSB1dGY4U3RyMkFycmF5QnVmZmVyKHN0YXRlLmJ1ZmYsIHRydWUpO1xuICAgICAgcmV0dXJuIFNwYXJrTUQ1LnByb3RvdHlwZS5zZXRTdGF0ZS5jYWxsKHRoaXMsIHN0YXRlKTtcbiAgICB9O1xuICAgIFNwYXJrTUQ1LkFycmF5QnVmZmVyLnByb3RvdHlwZS5kZXN0cm95ID0gU3BhcmtNRDUucHJvdG90eXBlLmRlc3Ryb3k7XG4gICAgU3BhcmtNRDUuQXJyYXlCdWZmZXIucHJvdG90eXBlLl9maW5pc2ggPSBTcGFya01ENS5wcm90b3R5cGUuX2ZpbmlzaDtcbiAgICBTcGFya01ENS5BcnJheUJ1ZmZlci5oYXNoID0gZnVuY3Rpb24oYXJyLCByYXcpIHtcbiAgICAgIHZhciBoYXNoID0gbWQ1MV9hcnJheShuZXcgVWludDhBcnJheShhcnIpKSwgcmV0ID0gaGV4KGhhc2gpO1xuICAgICAgcmV0dXJuIHJhdyA/IGhleFRvQmluYXJ5U3RyaW5nKHJldCkgOiByZXQ7XG4gICAgfTtcbiAgICByZXR1cm4gU3BhcmtNRDU7XG4gIH0pKTtcbn0pKHNwYXJrTWQ1KTtcblxudmFyIFNwYXJrTUQ1ID0gc3BhcmtNZDUuZXhwb3J0cztcblxuY29uc3QgZmlsZVNsaWNlID0gRmlsZS5wcm90b3R5cGUuc2xpY2UgfHwgRmlsZS5wcm90b3R5cGUubW96U2xpY2UgfHwgRmlsZS5wcm90b3R5cGUud2Via2l0U2xpY2U7XG5cbmNsYXNzIEZpbGVDaGVja3N1bSB7XG4gIHN0YXRpYyBjcmVhdGUoZmlsZSwgY2FsbGJhY2spIHtcbiAgICBjb25zdCBpbnN0YW5jZSA9IG5ldyBGaWxlQ2hlY2tzdW0oZmlsZSk7XG4gICAgaW5zdGFuY2UuY3JlYXRlKGNhbGxiYWNrKTtcbiAgfVxuICBjb25zdHJ1Y3RvcihmaWxlKSB7XG4gICAgdGhpcy5maWxlID0gZmlsZTtcbiAgICB0aGlzLmNodW5rU2l6ZSA9IDIwOTcxNTI7XG4gICAgdGhpcy5jaHVua0NvdW50ID0gTWF0aC5jZWlsKHRoaXMuZmlsZS5zaXplIC8gdGhpcy5jaHVua1NpemUpO1xuICAgIHRoaXMuY2h1bmtJbmRleCA9IDA7XG4gIH1cbiAgY3JlYXRlKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIHRoaXMubWQ1QnVmZmVyID0gbmV3IFNwYXJrTUQ1LkFycmF5QnVmZmVyO1xuICAgIHRoaXMuZmlsZVJlYWRlciA9IG5ldyBGaWxlUmVhZGVyO1xuICAgIHRoaXMuZmlsZVJlYWRlci5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoZXZlbnQgPT4gdGhpcy5maWxlUmVhZGVyRGlkTG9hZChldmVudCkpKTtcbiAgICB0aGlzLmZpbGVSZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIChldmVudCA9PiB0aGlzLmZpbGVSZWFkZXJEaWRFcnJvcihldmVudCkpKTtcbiAgICB0aGlzLnJlYWROZXh0Q2h1bmsoKTtcbiAgfVxuICBmaWxlUmVhZGVyRGlkTG9hZChldmVudCkge1xuICAgIHRoaXMubWQ1QnVmZmVyLmFwcGVuZChldmVudC50YXJnZXQucmVzdWx0KTtcbiAgICBpZiAoIXRoaXMucmVhZE5leHRDaHVuaygpKSB7XG4gICAgICBjb25zdCBiaW5hcnlEaWdlc3QgPSB0aGlzLm1kNUJ1ZmZlci5lbmQodHJ1ZSk7XG4gICAgICBjb25zdCBiYXNlNjRkaWdlc3QgPSBidG9hKGJpbmFyeURpZ2VzdCk7XG4gICAgICB0aGlzLmNhbGxiYWNrKG51bGwsIGJhc2U2NGRpZ2VzdCk7XG4gICAgfVxuICB9XG4gIGZpbGVSZWFkZXJEaWRFcnJvcihldmVudCkge1xuICAgIHRoaXMuY2FsbGJhY2soYEVycm9yIHJlYWRpbmcgJHt0aGlzLmZpbGUubmFtZX1gKTtcbiAgfVxuICByZWFkTmV4dENodW5rKCkge1xuICAgIGlmICh0aGlzLmNodW5rSW5kZXggPCB0aGlzLmNodW5rQ291bnQgfHwgdGhpcy5jaHVua0luZGV4ID09IDAgJiYgdGhpcy5jaHVua0NvdW50ID09IDApIHtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5jaHVua0luZGV4ICogdGhpcy5jaHVua1NpemU7XG4gICAgICBjb25zdCBlbmQgPSBNYXRoLm1pbihzdGFydCArIHRoaXMuY2h1bmtTaXplLCB0aGlzLmZpbGUuc2l6ZSk7XG4gICAgICBjb25zdCBieXRlcyA9IGZpbGVTbGljZS5jYWxsKHRoaXMuZmlsZSwgc3RhcnQsIGVuZCk7XG4gICAgICB0aGlzLmZpbGVSZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYnl0ZXMpO1xuICAgICAgdGhpcy5jaHVua0luZGV4Kys7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRNZXRhVmFsdWUobmFtZSkge1xuICBjb25zdCBlbGVtZW50ID0gZmluZEVsZW1lbnQoZG9jdW1lbnQuaGVhZCwgYG1ldGFbbmFtZT1cIiR7bmFtZX1cIl1gKTtcbiAgaWYgKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJjb250ZW50XCIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmRFbGVtZW50cyhyb290LCBzZWxlY3Rvcikge1xuICBpZiAodHlwZW9mIHJvb3QgPT0gXCJzdHJpbmdcIikge1xuICAgIHNlbGVjdG9yID0gcm9vdDtcbiAgICByb290ID0gZG9jdW1lbnQ7XG4gIH1cbiAgY29uc3QgZWxlbWVudHMgPSByb290LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICByZXR1cm4gdG9BcnJheShlbGVtZW50cyk7XG59XG5cbmZ1bmN0aW9uIGZpbmRFbGVtZW50KHJvb3QsIHNlbGVjdG9yKSB7XG4gIGlmICh0eXBlb2Ygcm9vdCA9PSBcInN0cmluZ1wiKSB7XG4gICAgc2VsZWN0b3IgPSByb290O1xuICAgIHJvb3QgPSBkb2N1bWVudDtcbiAgfVxuICByZXR1cm4gcm9vdC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbn1cblxuZnVuY3Rpb24gZGlzcGF0Y2hFdmVudChlbGVtZW50LCB0eXBlLCBldmVudEluaXQgPSB7fSkge1xuICBjb25zdCB7ZGlzYWJsZWQ6IGRpc2FibGVkfSA9IGVsZW1lbnQ7XG4gIGNvbnN0IHtidWJibGVzOiBidWJibGVzLCBjYW5jZWxhYmxlOiBjYW5jZWxhYmxlLCBkZXRhaWw6IGRldGFpbH0gPSBldmVudEluaXQ7XG4gIGNvbnN0IGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKTtcbiAgZXZlbnQuaW5pdEV2ZW50KHR5cGUsIGJ1YmJsZXMgfHwgdHJ1ZSwgY2FuY2VsYWJsZSB8fCB0cnVlKTtcbiAgZXZlbnQuZGV0YWlsID0gZGV0YWlsIHx8IHt9O1xuICB0cnkge1xuICAgIGVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICBlbGVtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICB9IGZpbmFsbHkge1xuICAgIGVsZW1lbnQuZGlzYWJsZWQgPSBkaXNhYmxlZDtcbiAgfVxuICByZXR1cm4gZXZlbnQ7XG59XG5cbmZ1bmN0aW9uIHRvQXJyYXkodmFsdWUpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9IGVsc2UgaWYgKEFycmF5LmZyb20pIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFtdLnNsaWNlLmNhbGwodmFsdWUpO1xuICB9XG59XG5cbmNsYXNzIEJsb2JSZWNvcmQge1xuICBjb25zdHJ1Y3RvcihmaWxlLCBjaGVja3N1bSwgdXJsLCBjdXN0b21IZWFkZXJzID0ge30pIHtcbiAgICB0aGlzLmZpbGUgPSBmaWxlO1xuICAgIHRoaXMuYXR0cmlidXRlcyA9IHtcbiAgICAgIGZpbGVuYW1lOiBmaWxlLm5hbWUsXG4gICAgICBjb250ZW50X3R5cGU6IGZpbGUudHlwZSB8fCBcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiLFxuICAgICAgYnl0ZV9zaXplOiBmaWxlLnNpemUsXG4gICAgICBjaGVja3N1bTogY2hlY2tzdW1cbiAgICB9O1xuICAgIHRoaXMueGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0O1xuICAgIHRoaXMueGhyLm9wZW4oXCJQT1NUXCIsIHVybCwgdHJ1ZSk7XG4gICAgdGhpcy54aHIucmVzcG9uc2VUeXBlID0gXCJqc29uXCI7XG4gICAgdGhpcy54aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgdGhpcy54aHIuc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdFwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgdGhpcy54aHIuc2V0UmVxdWVzdEhlYWRlcihcIlgtUmVxdWVzdGVkLVdpdGhcIiwgXCJYTUxIdHRwUmVxdWVzdFwiKTtcbiAgICBPYmplY3Qua2V5cyhjdXN0b21IZWFkZXJzKS5mb3JFYWNoKChoZWFkZXJLZXkgPT4ge1xuICAgICAgdGhpcy54aHIuc2V0UmVxdWVzdEhlYWRlcihoZWFkZXJLZXksIGN1c3RvbUhlYWRlcnNbaGVhZGVyS2V5XSk7XG4gICAgfSkpO1xuICAgIGNvbnN0IGNzcmZUb2tlbiA9IGdldE1ldGFWYWx1ZShcImNzcmYtdG9rZW5cIik7XG4gICAgaWYgKGNzcmZUb2tlbiAhPSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMueGhyLnNldFJlcXVlc3RIZWFkZXIoXCJYLUNTUkYtVG9rZW5cIiwgY3NyZlRva2VuKTtcbiAgICB9XG4gICAgdGhpcy54aHIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKGV2ZW50ID0+IHRoaXMucmVxdWVzdERpZExvYWQoZXZlbnQpKSk7XG4gICAgdGhpcy54aHIuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIChldmVudCA9PiB0aGlzLnJlcXVlc3REaWRFcnJvcihldmVudCkpKTtcbiAgfVxuICBnZXQgc3RhdHVzKCkge1xuICAgIHJldHVybiB0aGlzLnhoci5zdGF0dXM7XG4gIH1cbiAgZ2V0IHJlc3BvbnNlKCkge1xuICAgIGNvbnN0IHtyZXNwb25zZVR5cGU6IHJlc3BvbnNlVHlwZSwgcmVzcG9uc2U6IHJlc3BvbnNlfSA9IHRoaXMueGhyO1xuICAgIGlmIChyZXNwb25zZVR5cGUgPT0gXCJqc29uXCIpIHtcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UocmVzcG9uc2UpO1xuICAgIH1cbiAgfVxuICBjcmVhdGUoY2FsbGJhY2spIHtcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgdGhpcy54aHIuc2VuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICBibG9iOiB0aGlzLmF0dHJpYnV0ZXNcbiAgICB9KSk7XG4gIH1cbiAgcmVxdWVzdERpZExvYWQoZXZlbnQpIHtcbiAgICBpZiAodGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgMzAwKSB7XG4gICAgICBjb25zdCB7cmVzcG9uc2U6IHJlc3BvbnNlfSA9IHRoaXM7XG4gICAgICBjb25zdCB7ZGlyZWN0X3VwbG9hZDogZGlyZWN0X3VwbG9hZH0gPSByZXNwb25zZTtcbiAgICAgIGRlbGV0ZSByZXNwb25zZS5kaXJlY3RfdXBsb2FkO1xuICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gcmVzcG9uc2U7XG4gICAgICB0aGlzLmRpcmVjdFVwbG9hZERhdGEgPSBkaXJlY3RfdXBsb2FkO1xuICAgICAgdGhpcy5jYWxsYmFjayhudWxsLCB0aGlzLnRvSlNPTigpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZXF1ZXN0RGlkRXJyb3IoZXZlbnQpO1xuICAgIH1cbiAgfVxuICByZXF1ZXN0RGlkRXJyb3IoZXZlbnQpIHtcbiAgICB0aGlzLmNhbGxiYWNrKGBFcnJvciBjcmVhdGluZyBCbG9iIGZvciBcIiR7dGhpcy5maWxlLm5hbWV9XCIuIFN0YXR1czogJHt0aGlzLnN0YXR1c31gKTtcbiAgfVxuICB0b0pTT04oKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5hdHRyaWJ1dGVzKSB7XG4gICAgICByZXN1bHRba2V5XSA9IHRoaXMuYXR0cmlidXRlc1trZXldO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG5cbmNsYXNzIEJsb2JVcGxvYWQge1xuICBjb25zdHJ1Y3RvcihibG9iKSB7XG4gICAgdGhpcy5ibG9iID0gYmxvYjtcbiAgICB0aGlzLmZpbGUgPSBibG9iLmZpbGU7XG4gICAgY29uc3Qge3VybDogdXJsLCBoZWFkZXJzOiBoZWFkZXJzfSA9IGJsb2IuZGlyZWN0VXBsb2FkRGF0YTtcbiAgICB0aGlzLnhociA9IG5ldyBYTUxIdHRwUmVxdWVzdDtcbiAgICB0aGlzLnhoci5vcGVuKFwiUFVUXCIsIHVybCwgdHJ1ZSk7XG4gICAgdGhpcy54aHIucmVzcG9uc2VUeXBlID0gXCJ0ZXh0XCI7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gaGVhZGVycykge1xuICAgICAgdGhpcy54aHIuc2V0UmVxdWVzdEhlYWRlcihrZXksIGhlYWRlcnNba2V5XSk7XG4gICAgfVxuICAgIHRoaXMueGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIChldmVudCA9PiB0aGlzLnJlcXVlc3REaWRMb2FkKGV2ZW50KSkpO1xuICAgIHRoaXMueGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCAoZXZlbnQgPT4gdGhpcy5yZXF1ZXN0RGlkRXJyb3IoZXZlbnQpKSk7XG4gIH1cbiAgY3JlYXRlKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIHRoaXMueGhyLnNlbmQodGhpcy5maWxlLnNsaWNlKCkpO1xuICB9XG4gIHJlcXVlc3REaWRMb2FkKGV2ZW50KSB7XG4gICAgY29uc3Qge3N0YXR1czogc3RhdHVzLCByZXNwb25zZTogcmVzcG9uc2V9ID0gdGhpcy54aHI7XG4gICAgaWYgKHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwKSB7XG4gICAgICB0aGlzLmNhbGxiYWNrKG51bGwsIHJlc3BvbnNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZXF1ZXN0RGlkRXJyb3IoZXZlbnQpO1xuICAgIH1cbiAgfVxuICByZXF1ZXN0RGlkRXJyb3IoZXZlbnQpIHtcbiAgICB0aGlzLmNhbGxiYWNrKGBFcnJvciBzdG9yaW5nIFwiJHt0aGlzLmZpbGUubmFtZX1cIi4gU3RhdHVzOiAke3RoaXMueGhyLnN0YXR1c31gKTtcbiAgfVxufVxuXG5sZXQgaWQgPSAwO1xuXG5jbGFzcyBEaXJlY3RVcGxvYWQge1xuICBjb25zdHJ1Y3RvcihmaWxlLCB1cmwsIGRlbGVnYXRlLCBjdXN0b21IZWFkZXJzID0ge30pIHtcbiAgICB0aGlzLmlkID0gKytpZDtcbiAgICB0aGlzLmZpbGUgPSBmaWxlO1xuICAgIHRoaXMudXJsID0gdXJsO1xuICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICB0aGlzLmN1c3RvbUhlYWRlcnMgPSBjdXN0b21IZWFkZXJzO1xuICB9XG4gIGNyZWF0ZShjYWxsYmFjaykge1xuICAgIEZpbGVDaGVja3N1bS5jcmVhdGUodGhpcy5maWxlLCAoKGVycm9yLCBjaGVja3N1bSkgPT4ge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNhbGxiYWNrKGVycm9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iUmVjb3JkKHRoaXMuZmlsZSwgY2hlY2tzdW0sIHRoaXMudXJsLCB0aGlzLmN1c3RvbUhlYWRlcnMpO1xuICAgICAgbm90aWZ5KHRoaXMuZGVsZWdhdGUsIFwiZGlyZWN0VXBsb2FkV2lsbENyZWF0ZUJsb2JXaXRoWEhSXCIsIGJsb2IueGhyKTtcbiAgICAgIGJsb2IuY3JlYXRlKChlcnJvciA9PiB7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgIGNhbGxiYWNrKGVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCB1cGxvYWQgPSBuZXcgQmxvYlVwbG9hZChibG9iKTtcbiAgICAgICAgICBub3RpZnkodGhpcy5kZWxlZ2F0ZSwgXCJkaXJlY3RVcGxvYWRXaWxsU3RvcmVGaWxlV2l0aFhIUlwiLCB1cGxvYWQueGhyKTtcbiAgICAgICAgICB1cGxvYWQuY3JlYXRlKChlcnJvciA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgYmxvYi50b0pTT04oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICB9KSk7XG4gICAgfSkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG5vdGlmeShvYmplY3QsIG1ldGhvZE5hbWUsIC4uLm1lc3NhZ2VzKSB7XG4gIGlmIChvYmplY3QgJiYgdHlwZW9mIG9iamVjdFttZXRob2ROYW1lXSA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICByZXR1cm4gb2JqZWN0W21ldGhvZE5hbWVdKC4uLm1lc3NhZ2VzKTtcbiAgfVxufVxuXG5jbGFzcyBEaXJlY3RVcGxvYWRDb250cm9sbGVyIHtcbiAgY29uc3RydWN0b3IoaW5wdXQsIGZpbGUpIHtcbiAgICB0aGlzLmlucHV0ID0gaW5wdXQ7XG4gICAgdGhpcy5maWxlID0gZmlsZTtcbiAgICB0aGlzLmRpcmVjdFVwbG9hZCA9IG5ldyBEaXJlY3RVcGxvYWQodGhpcy5maWxlLCB0aGlzLnVybCwgdGhpcyk7XG4gICAgdGhpcy5kaXNwYXRjaChcImluaXRpYWxpemVcIik7XG4gIH1cbiAgc3RhcnQoY2FsbGJhY2spIHtcbiAgICBjb25zdCBoaWRkZW5JbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBoaWRkZW5JbnB1dC50eXBlID0gXCJoaWRkZW5cIjtcbiAgICBoaWRkZW5JbnB1dC5uYW1lID0gdGhpcy5pbnB1dC5uYW1lO1xuICAgIHRoaXMuaW5wdXQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYmVmb3JlYmVnaW5cIiwgaGlkZGVuSW5wdXQpO1xuICAgIHRoaXMuZGlzcGF0Y2goXCJzdGFydFwiKTtcbiAgICB0aGlzLmRpcmVjdFVwbG9hZC5jcmVhdGUoKChlcnJvciwgYXR0cmlidXRlcykgPT4ge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGhpZGRlbklucHV0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaGlkZGVuSW5wdXQpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXJyb3IoZXJyb3IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaGlkZGVuSW5wdXQudmFsdWUgPSBhdHRyaWJ1dGVzLnNpZ25lZF9pZDtcbiAgICAgIH1cbiAgICAgIHRoaXMuZGlzcGF0Y2goXCJlbmRcIik7XG4gICAgICBjYWxsYmFjayhlcnJvcik7XG4gICAgfSkpO1xuICB9XG4gIHVwbG9hZFJlcXVlc3REaWRQcm9ncmVzcyhldmVudCkge1xuICAgIGNvbnN0IHByb2dyZXNzID0gZXZlbnQubG9hZGVkIC8gZXZlbnQudG90YWwgKiAxMDA7XG4gICAgaWYgKHByb2dyZXNzKSB7XG4gICAgICB0aGlzLmRpc3BhdGNoKFwicHJvZ3Jlc3NcIiwge1xuICAgICAgICBwcm9ncmVzczogcHJvZ3Jlc3NcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBnZXQgdXJsKCkge1xuICAgIHJldHVybiB0aGlzLmlucHV0LmdldEF0dHJpYnV0ZShcImRhdGEtZGlyZWN0LXVwbG9hZC11cmxcIik7XG4gIH1cbiAgZGlzcGF0Y2gobmFtZSwgZGV0YWlsID0ge30pIHtcbiAgICBkZXRhaWwuZmlsZSA9IHRoaXMuZmlsZTtcbiAgICBkZXRhaWwuaWQgPSB0aGlzLmRpcmVjdFVwbG9hZC5pZDtcbiAgICByZXR1cm4gZGlzcGF0Y2hFdmVudCh0aGlzLmlucHV0LCBgZGlyZWN0LXVwbG9hZDoke25hbWV9YCwge1xuICAgICAgZGV0YWlsOiBkZXRhaWxcbiAgICB9KTtcbiAgfVxuICBkaXNwYXRjaEVycm9yKGVycm9yKSB7XG4gICAgY29uc3QgZXZlbnQgPSB0aGlzLmRpc3BhdGNoKFwiZXJyb3JcIiwge1xuICAgICAgZXJyb3I6IGVycm9yXG4gICAgfSk7XG4gICAgaWYgKCFldmVudC5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICBhbGVydChlcnJvcik7XG4gICAgfVxuICB9XG4gIGRpcmVjdFVwbG9hZFdpbGxDcmVhdGVCbG9iV2l0aFhIUih4aHIpIHtcbiAgICB0aGlzLmRpc3BhdGNoKFwiYmVmb3JlLWJsb2ItcmVxdWVzdFwiLCB7XG4gICAgICB4aHI6IHhoclxuICAgIH0pO1xuICB9XG4gIGRpcmVjdFVwbG9hZFdpbGxTdG9yZUZpbGVXaXRoWEhSKHhocikge1xuICAgIHRoaXMuZGlzcGF0Y2goXCJiZWZvcmUtc3RvcmFnZS1yZXF1ZXN0XCIsIHtcbiAgICAgIHhocjogeGhyXG4gICAgfSk7XG4gICAgeGhyLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIiwgKGV2ZW50ID0+IHRoaXMudXBsb2FkUmVxdWVzdERpZFByb2dyZXNzKGV2ZW50KSkpO1xuICB9XG59XG5cbmNvbnN0IGlucHV0U2VsZWN0b3IgPSBcImlucHV0W3R5cGU9ZmlsZV1bZGF0YS1kaXJlY3QtdXBsb2FkLXVybF06bm90KFtkaXNhYmxlZF0pXCI7XG5cbmNsYXNzIERpcmVjdFVwbG9hZHNDb250cm9sbGVyIHtcbiAgY29uc3RydWN0b3IoZm9ybSkge1xuICAgIHRoaXMuZm9ybSA9IGZvcm07XG4gICAgdGhpcy5pbnB1dHMgPSBmaW5kRWxlbWVudHMoZm9ybSwgaW5wdXRTZWxlY3RvcikuZmlsdGVyKChpbnB1dCA9PiBpbnB1dC5maWxlcy5sZW5ndGgpKTtcbiAgfVxuICBzdGFydChjYWxsYmFjaykge1xuICAgIGNvbnN0IGNvbnRyb2xsZXJzID0gdGhpcy5jcmVhdGVEaXJlY3RVcGxvYWRDb250cm9sbGVycygpO1xuICAgIGNvbnN0IHN0YXJ0TmV4dENvbnRyb2xsZXIgPSAoKSA9PiB7XG4gICAgICBjb25zdCBjb250cm9sbGVyID0gY29udHJvbGxlcnMuc2hpZnQoKTtcbiAgICAgIGlmIChjb250cm9sbGVyKSB7XG4gICAgICAgIGNvbnRyb2xsZXIuc3RhcnQoKGVycm9yID0+IHtcbiAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yKTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2goXCJlbmRcIik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0YXJ0TmV4dENvbnRyb2xsZXIoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2goXCJlbmRcIik7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmRpc3BhdGNoKFwic3RhcnRcIik7XG4gICAgc3RhcnROZXh0Q29udHJvbGxlcigpO1xuICB9XG4gIGNyZWF0ZURpcmVjdFVwbG9hZENvbnRyb2xsZXJzKCkge1xuICAgIGNvbnN0IGNvbnRyb2xsZXJzID0gW107XG4gICAgdGhpcy5pbnB1dHMuZm9yRWFjaCgoaW5wdXQgPT4ge1xuICAgICAgdG9BcnJheShpbnB1dC5maWxlcykuZm9yRWFjaCgoZmlsZSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgRGlyZWN0VXBsb2FkQ29udHJvbGxlcihpbnB1dCwgZmlsZSk7XG4gICAgICAgIGNvbnRyb2xsZXJzLnB1c2goY29udHJvbGxlcik7XG4gICAgICB9KSk7XG4gICAgfSkpO1xuICAgIHJldHVybiBjb250cm9sbGVycztcbiAgfVxuICBkaXNwYXRjaChuYW1lLCBkZXRhaWwgPSB7fSkge1xuICAgIHJldHVybiBkaXNwYXRjaEV2ZW50KHRoaXMuZm9ybSwgYGRpcmVjdC11cGxvYWRzOiR7bmFtZX1gLCB7XG4gICAgICBkZXRhaWw6IGRldGFpbFxuICAgIH0pO1xuICB9XG59XG5cbmNvbnN0IHByb2Nlc3NpbmdBdHRyaWJ1dGUgPSBcImRhdGEtZGlyZWN0LXVwbG9hZHMtcHJvY2Vzc2luZ1wiO1xuXG5jb25zdCBzdWJtaXRCdXR0b25zQnlGb3JtID0gbmV3IFdlYWtNYXA7XG5cbmxldCBzdGFydGVkID0gZmFsc2U7XG5cbmZ1bmN0aW9uIHN0YXJ0KCkge1xuICBpZiAoIXN0YXJ0ZWQpIHtcbiAgICBzdGFydGVkID0gdHJ1ZTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZGlkQ2xpY2ssIHRydWUpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZGlkU3VibWl0Rm9ybSwgdHJ1ZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImFqYXg6YmVmb3JlXCIsIGRpZFN1Ym1pdFJlbW90ZUVsZW1lbnQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRpZENsaWNrKGV2ZW50KSB7XG4gIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KFwiYnV0dG9uLCBpbnB1dFwiKTtcbiAgaWYgKGJ1dHRvbiAmJiBidXR0b24udHlwZSA9PT0gXCJzdWJtaXRcIiAmJiBidXR0b24uZm9ybSkge1xuICAgIHN1Ym1pdEJ1dHRvbnNCeUZvcm0uc2V0KGJ1dHRvbi5mb3JtLCBidXR0b24pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRpZFN1Ym1pdEZvcm0oZXZlbnQpIHtcbiAgaGFuZGxlRm9ybVN1Ym1pc3Npb25FdmVudChldmVudCk7XG59XG5cbmZ1bmN0aW9uIGRpZFN1Ym1pdFJlbW90ZUVsZW1lbnQoZXZlbnQpIHtcbiAgaWYgKGV2ZW50LnRhcmdldC50YWdOYW1lID09IFwiRk9STVwiKSB7XG4gICAgaGFuZGxlRm9ybVN1Ym1pc3Npb25FdmVudChldmVudCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlRm9ybVN1Ym1pc3Npb25FdmVudChldmVudCkge1xuICBjb25zdCBmb3JtID0gZXZlbnQudGFyZ2V0O1xuICBpZiAoZm9ybS5oYXNBdHRyaWJ1dGUocHJvY2Vzc2luZ0F0dHJpYnV0ZSkpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBjb250cm9sbGVyID0gbmV3IERpcmVjdFVwbG9hZHNDb250cm9sbGVyKGZvcm0pO1xuICBjb25zdCB7aW5wdXRzOiBpbnB1dHN9ID0gY29udHJvbGxlcjtcbiAgaWYgKGlucHV0cy5sZW5ndGgpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGZvcm0uc2V0QXR0cmlidXRlKHByb2Nlc3NpbmdBdHRyaWJ1dGUsIFwiXCIpO1xuICAgIGlucHV0cy5mb3JFYWNoKGRpc2FibGUpO1xuICAgIGNvbnRyb2xsZXIuc3RhcnQoKGVycm9yID0+IHtcbiAgICAgIGZvcm0ucmVtb3ZlQXR0cmlidXRlKHByb2Nlc3NpbmdBdHRyaWJ1dGUpO1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGlucHV0cy5mb3JFYWNoKGVuYWJsZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdWJtaXRGb3JtKGZvcm0pO1xuICAgICAgfVxuICAgIH0pKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzdWJtaXRGb3JtKGZvcm0pIHtcbiAgbGV0IGJ1dHRvbiA9IHN1Ym1pdEJ1dHRvbnNCeUZvcm0uZ2V0KGZvcm0pIHx8IGZpbmRFbGVtZW50KGZvcm0sIFwiaW5wdXRbdHlwZT1zdWJtaXRdLCBidXR0b25bdHlwZT1zdWJtaXRdXCIpO1xuICBpZiAoYnV0dG9uKSB7XG4gICAgY29uc3Qge2Rpc2FibGVkOiBkaXNhYmxlZH0gPSBidXR0b247XG4gICAgYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgYnV0dG9uLmZvY3VzKCk7XG4gICAgYnV0dG9uLmNsaWNrKCk7XG4gICAgYnV0dG9uLmRpc2FibGVkID0gZGlzYWJsZWQ7XG4gIH0gZWxzZSB7XG4gICAgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIGJ1dHRvbi50eXBlID0gXCJzdWJtaXRcIjtcbiAgICBidXR0b24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIGZvcm0uYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgICBidXR0b24uY2xpY2soKTtcbiAgICBmb3JtLnJlbW92ZUNoaWxkKGJ1dHRvbik7XG4gIH1cbiAgc3VibWl0QnV0dG9uc0J5Rm9ybS5kZWxldGUoZm9ybSk7XG59XG5cbmZ1bmN0aW9uIGRpc2FibGUoaW5wdXQpIHtcbiAgaW5wdXQuZGlzYWJsZWQgPSB0cnVlO1xufVxuXG5mdW5jdGlvbiBlbmFibGUoaW5wdXQpIHtcbiAgaW5wdXQuZGlzYWJsZWQgPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gYXV0b3N0YXJ0KCkge1xuICBpZiAod2luZG93LkFjdGl2ZVN0b3JhZ2UpIHtcbiAgICBzdGFydCgpO1xuICB9XG59XG5cbnNldFRpbWVvdXQoYXV0b3N0YXJ0LCAxKTtcblxuZXhwb3J0IHsgRGlyZWN0VXBsb2FkLCBEaXJlY3RVcGxvYWRDb250cm9sbGVyLCBEaXJlY3RVcGxvYWRzQ29udHJvbGxlciwgZGlzcGF0Y2hFdmVudCwgc3RhcnQgfTtcbiIsICIvLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvc2NoZWR1bGVyLmpzXG52YXIgZmx1c2hQZW5kaW5nID0gZmFsc2U7XG52YXIgZmx1c2hpbmcgPSBmYWxzZTtcbnZhciBxdWV1ZSA9IFtdO1xudmFyIGxhc3RGbHVzaGVkSW5kZXggPSAtMTtcbmZ1bmN0aW9uIHNjaGVkdWxlcihjYWxsYmFjaykge1xuICBxdWV1ZUpvYihjYWxsYmFjayk7XG59XG5mdW5jdGlvbiBxdWV1ZUpvYihqb2IpIHtcbiAgaWYgKCFxdWV1ZS5pbmNsdWRlcyhqb2IpKVxuICAgIHF1ZXVlLnB1c2goam9iKTtcbiAgcXVldWVGbHVzaCgpO1xufVxuZnVuY3Rpb24gZGVxdWV1ZUpvYihqb2IpIHtcbiAgbGV0IGluZGV4ID0gcXVldWUuaW5kZXhPZihqb2IpO1xuICBpZiAoaW5kZXggIT09IC0xICYmIGluZGV4ID4gbGFzdEZsdXNoZWRJbmRleClcbiAgICBxdWV1ZS5zcGxpY2UoaW5kZXgsIDEpO1xufVxuZnVuY3Rpb24gcXVldWVGbHVzaCgpIHtcbiAgaWYgKCFmbHVzaGluZyAmJiAhZmx1c2hQZW5kaW5nKSB7XG4gICAgZmx1c2hQZW5kaW5nID0gdHJ1ZTtcbiAgICBxdWV1ZU1pY3JvdGFzayhmbHVzaEpvYnMpO1xuICB9XG59XG5mdW5jdGlvbiBmbHVzaEpvYnMoKSB7XG4gIGZsdXNoUGVuZGluZyA9IGZhbHNlO1xuICBmbHVzaGluZyA9IHRydWU7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICBxdWV1ZVtpXSgpO1xuICAgIGxhc3RGbHVzaGVkSW5kZXggPSBpO1xuICB9XG4gIHF1ZXVlLmxlbmd0aCA9IDA7XG4gIGxhc3RGbHVzaGVkSW5kZXggPSAtMTtcbiAgZmx1c2hpbmcgPSBmYWxzZTtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL3JlYWN0aXZpdHkuanNcbnZhciByZWFjdGl2ZTtcbnZhciBlZmZlY3Q7XG52YXIgcmVsZWFzZTtcbnZhciByYXc7XG52YXIgc2hvdWxkU2NoZWR1bGUgPSB0cnVlO1xuZnVuY3Rpb24gZGlzYWJsZUVmZmVjdFNjaGVkdWxpbmcoY2FsbGJhY2spIHtcbiAgc2hvdWxkU2NoZWR1bGUgPSBmYWxzZTtcbiAgY2FsbGJhY2soKTtcbiAgc2hvdWxkU2NoZWR1bGUgPSB0cnVlO1xufVxuZnVuY3Rpb24gc2V0UmVhY3Rpdml0eUVuZ2luZShlbmdpbmUpIHtcbiAgcmVhY3RpdmUgPSBlbmdpbmUucmVhY3RpdmU7XG4gIHJlbGVhc2UgPSBlbmdpbmUucmVsZWFzZTtcbiAgZWZmZWN0ID0gKGNhbGxiYWNrKSA9PiBlbmdpbmUuZWZmZWN0KGNhbGxiYWNrLCB7IHNjaGVkdWxlcjogKHRhc2spID0+IHtcbiAgICBpZiAoc2hvdWxkU2NoZWR1bGUpIHtcbiAgICAgIHNjaGVkdWxlcih0YXNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGFzaygpO1xuICAgIH1cbiAgfSB9KTtcbiAgcmF3ID0gZW5naW5lLnJhdztcbn1cbmZ1bmN0aW9uIG92ZXJyaWRlRWZmZWN0KG92ZXJyaWRlKSB7XG4gIGVmZmVjdCA9IG92ZXJyaWRlO1xufVxuZnVuY3Rpb24gZWxlbWVudEJvdW5kRWZmZWN0KGVsKSB7XG4gIGxldCBjbGVhbnVwMiA9ICgpID0+IHtcbiAgfTtcbiAgbGV0IHdyYXBwZWRFZmZlY3QgPSAoY2FsbGJhY2spID0+IHtcbiAgICBsZXQgZWZmZWN0UmVmZXJlbmNlID0gZWZmZWN0KGNhbGxiYWNrKTtcbiAgICBpZiAoIWVsLl94X2VmZmVjdHMpIHtcbiAgICAgIGVsLl94X2VmZmVjdHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgICAgZWwuX3hfcnVuRWZmZWN0cyA9ICgpID0+IHtcbiAgICAgICAgZWwuX3hfZWZmZWN0cy5mb3JFYWNoKChpKSA9PiBpKCkpO1xuICAgICAgfTtcbiAgICB9XG4gICAgZWwuX3hfZWZmZWN0cy5hZGQoZWZmZWN0UmVmZXJlbmNlKTtcbiAgICBjbGVhbnVwMiA9ICgpID0+IHtcbiAgICAgIGlmIChlZmZlY3RSZWZlcmVuY2UgPT09IHZvaWQgMClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgZWwuX3hfZWZmZWN0cy5kZWxldGUoZWZmZWN0UmVmZXJlbmNlKTtcbiAgICAgIHJlbGVhc2UoZWZmZWN0UmVmZXJlbmNlKTtcbiAgICB9O1xuICAgIHJldHVybiBlZmZlY3RSZWZlcmVuY2U7XG4gIH07XG4gIHJldHVybiBbd3JhcHBlZEVmZmVjdCwgKCkgPT4ge1xuICAgIGNsZWFudXAyKCk7XG4gIH1dO1xufVxuZnVuY3Rpb24gd2F0Y2goZ2V0dGVyLCBjYWxsYmFjaykge1xuICBsZXQgZmlyc3RUaW1lID0gdHJ1ZTtcbiAgbGV0IG9sZFZhbHVlO1xuICBsZXQgZWZmZWN0UmVmZXJlbmNlID0gZWZmZWN0KCgpID0+IHtcbiAgICBsZXQgdmFsdWUgPSBnZXR0ZXIoKTtcbiAgICBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgaWYgKCFmaXJzdFRpbWUpIHtcbiAgICAgIHF1ZXVlTWljcm90YXNrKCgpID0+IHtcbiAgICAgICAgY2FsbGJhY2sodmFsdWUsIG9sZFZhbHVlKTtcbiAgICAgICAgb2xkVmFsdWUgPSB2YWx1ZTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBvbGRWYWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICBmaXJzdFRpbWUgPSBmYWxzZTtcbiAgfSk7XG4gIHJldHVybiAoKSA9PiByZWxlYXNlKGVmZmVjdFJlZmVyZW5jZSk7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9tdXRhdGlvbi5qc1xudmFyIG9uQXR0cmlidXRlQWRkZWRzID0gW107XG52YXIgb25FbFJlbW92ZWRzID0gW107XG52YXIgb25FbEFkZGVkcyA9IFtdO1xuZnVuY3Rpb24gb25FbEFkZGVkKGNhbGxiYWNrKSB7XG4gIG9uRWxBZGRlZHMucHVzaChjYWxsYmFjayk7XG59XG5mdW5jdGlvbiBvbkVsUmVtb3ZlZChlbCwgY2FsbGJhY2spIHtcbiAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgaWYgKCFlbC5feF9jbGVhbnVwcylcbiAgICAgIGVsLl94X2NsZWFudXBzID0gW107XG4gICAgZWwuX3hfY2xlYW51cHMucHVzaChjYWxsYmFjayk7XG4gIH0gZWxzZSB7XG4gICAgY2FsbGJhY2sgPSBlbDtcbiAgICBvbkVsUmVtb3ZlZHMucHVzaChjYWxsYmFjayk7XG4gIH1cbn1cbmZ1bmN0aW9uIG9uQXR0cmlidXRlc0FkZGVkKGNhbGxiYWNrKSB7XG4gIG9uQXR0cmlidXRlQWRkZWRzLnB1c2goY2FsbGJhY2spO1xufVxuZnVuY3Rpb24gb25BdHRyaWJ1dGVSZW1vdmVkKGVsLCBuYW1lLCBjYWxsYmFjaykge1xuICBpZiAoIWVsLl94X2F0dHJpYnV0ZUNsZWFudXBzKVxuICAgIGVsLl94X2F0dHJpYnV0ZUNsZWFudXBzID0ge307XG4gIGlmICghZWwuX3hfYXR0cmlidXRlQ2xlYW51cHNbbmFtZV0pXG4gICAgZWwuX3hfYXR0cmlidXRlQ2xlYW51cHNbbmFtZV0gPSBbXTtcbiAgZWwuX3hfYXR0cmlidXRlQ2xlYW51cHNbbmFtZV0ucHVzaChjYWxsYmFjayk7XG59XG5mdW5jdGlvbiBjbGVhbnVwQXR0cmlidXRlcyhlbCwgbmFtZXMpIHtcbiAgaWYgKCFlbC5feF9hdHRyaWJ1dGVDbGVhbnVwcylcbiAgICByZXR1cm47XG4gIE9iamVjdC5lbnRyaWVzKGVsLl94X2F0dHJpYnV0ZUNsZWFudXBzKS5mb3JFYWNoKChbbmFtZSwgdmFsdWVdKSA9PiB7XG4gICAgaWYgKG5hbWVzID09PSB2b2lkIDAgfHwgbmFtZXMuaW5jbHVkZXMobmFtZSkpIHtcbiAgICAgIHZhbHVlLmZvckVhY2goKGkpID0+IGkoKSk7XG4gICAgICBkZWxldGUgZWwuX3hfYXR0cmlidXRlQ2xlYW51cHNbbmFtZV07XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIGNsZWFudXBFbGVtZW50KGVsKSB7XG4gIGVsLl94X2VmZmVjdHM/LmZvckVhY2goZGVxdWV1ZUpvYik7XG4gIHdoaWxlIChlbC5feF9jbGVhbnVwcz8ubGVuZ3RoKVxuICAgIGVsLl94X2NsZWFudXBzLnBvcCgpKCk7XG59XG52YXIgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihvbk11dGF0ZSk7XG52YXIgY3VycmVudGx5T2JzZXJ2aW5nID0gZmFsc2U7XG5mdW5jdGlvbiBzdGFydE9ic2VydmluZ011dGF0aW9ucygpIHtcbiAgb2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudCwgeyBzdWJ0cmVlOiB0cnVlLCBjaGlsZExpc3Q6IHRydWUsIGF0dHJpYnV0ZXM6IHRydWUsIGF0dHJpYnV0ZU9sZFZhbHVlOiB0cnVlIH0pO1xuICBjdXJyZW50bHlPYnNlcnZpbmcgPSB0cnVlO1xufVxuZnVuY3Rpb24gc3RvcE9ic2VydmluZ011dGF0aW9ucygpIHtcbiAgZmx1c2hPYnNlcnZlcigpO1xuICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gIGN1cnJlbnRseU9ic2VydmluZyA9IGZhbHNlO1xufVxudmFyIHF1ZXVlZE11dGF0aW9ucyA9IFtdO1xuZnVuY3Rpb24gZmx1c2hPYnNlcnZlcigpIHtcbiAgbGV0IHJlY29yZHMgPSBvYnNlcnZlci50YWtlUmVjb3JkcygpO1xuICBxdWV1ZWRNdXRhdGlvbnMucHVzaCgoKSA9PiByZWNvcmRzLmxlbmd0aCA+IDAgJiYgb25NdXRhdGUocmVjb3JkcykpO1xuICBsZXQgcXVldWVMZW5ndGhXaGVuVHJpZ2dlcmVkID0gcXVldWVkTXV0YXRpb25zLmxlbmd0aDtcbiAgcXVldWVNaWNyb3Rhc2soKCkgPT4ge1xuICAgIGlmIChxdWV1ZWRNdXRhdGlvbnMubGVuZ3RoID09PSBxdWV1ZUxlbmd0aFdoZW5UcmlnZ2VyZWQpIHtcbiAgICAgIHdoaWxlIChxdWV1ZWRNdXRhdGlvbnMubGVuZ3RoID4gMClcbiAgICAgICAgcXVldWVkTXV0YXRpb25zLnNoaWZ0KCkoKTtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gbXV0YXRlRG9tKGNhbGxiYWNrKSB7XG4gIGlmICghY3VycmVudGx5T2JzZXJ2aW5nKVxuICAgIHJldHVybiBjYWxsYmFjaygpO1xuICBzdG9wT2JzZXJ2aW5nTXV0YXRpb25zKCk7XG4gIGxldCByZXN1bHQgPSBjYWxsYmFjaygpO1xuICBzdGFydE9ic2VydmluZ011dGF0aW9ucygpO1xuICByZXR1cm4gcmVzdWx0O1xufVxudmFyIGlzQ29sbGVjdGluZyA9IGZhbHNlO1xudmFyIGRlZmVycmVkTXV0YXRpb25zID0gW107XG5mdW5jdGlvbiBkZWZlck11dGF0aW9ucygpIHtcbiAgaXNDb2xsZWN0aW5nID0gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGZsdXNoQW5kU3RvcERlZmVycmluZ011dGF0aW9ucygpIHtcbiAgaXNDb2xsZWN0aW5nID0gZmFsc2U7XG4gIG9uTXV0YXRlKGRlZmVycmVkTXV0YXRpb25zKTtcbiAgZGVmZXJyZWRNdXRhdGlvbnMgPSBbXTtcbn1cbmZ1bmN0aW9uIG9uTXV0YXRlKG11dGF0aW9ucykge1xuICBpZiAoaXNDb2xsZWN0aW5nKSB7XG4gICAgZGVmZXJyZWRNdXRhdGlvbnMgPSBkZWZlcnJlZE11dGF0aW9ucy5jb25jYXQobXV0YXRpb25zKTtcbiAgICByZXR1cm47XG4gIH1cbiAgbGV0IGFkZGVkTm9kZXMgPSBbXTtcbiAgbGV0IHJlbW92ZWROb2RlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gIGxldCBhZGRlZEF0dHJpYnV0ZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBsZXQgcmVtb3ZlZEF0dHJpYnV0ZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG11dGF0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChtdXRhdGlvbnNbaV0udGFyZ2V0Ll94X2lnbm9yZU11dGF0aW9uT2JzZXJ2ZXIpXG4gICAgICBjb250aW51ZTtcbiAgICBpZiAobXV0YXRpb25zW2ldLnR5cGUgPT09IFwiY2hpbGRMaXN0XCIpIHtcbiAgICAgIG11dGF0aW9uc1tpXS5yZW1vdmVkTm9kZXMuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSAhPT0gMSlcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICghbm9kZS5feF9tYXJrZXIpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICByZW1vdmVkTm9kZXMuYWRkKG5vZGUpO1xuICAgICAgfSk7XG4gICAgICBtdXRhdGlvbnNbaV0uYWRkZWROb2Rlcy5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgIGlmIChub2RlLm5vZGVUeXBlICE9PSAxKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHJlbW92ZWROb2Rlcy5oYXMobm9kZSkpIHtcbiAgICAgICAgICByZW1vdmVkTm9kZXMuZGVsZXRlKG5vZGUpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobm9kZS5feF9tYXJrZXIpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBhZGRlZE5vZGVzLnB1c2gobm9kZSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKG11dGF0aW9uc1tpXS50eXBlID09PSBcImF0dHJpYnV0ZXNcIikge1xuICAgICAgbGV0IGVsID0gbXV0YXRpb25zW2ldLnRhcmdldDtcbiAgICAgIGxldCBuYW1lID0gbXV0YXRpb25zW2ldLmF0dHJpYnV0ZU5hbWU7XG4gICAgICBsZXQgb2xkVmFsdWUgPSBtdXRhdGlvbnNbaV0ub2xkVmFsdWU7XG4gICAgICBsZXQgYWRkMiA9ICgpID0+IHtcbiAgICAgICAgaWYgKCFhZGRlZEF0dHJpYnV0ZXMuaGFzKGVsKSlcbiAgICAgICAgICBhZGRlZEF0dHJpYnV0ZXMuc2V0KGVsLCBbXSk7XG4gICAgICAgIGFkZGVkQXR0cmlidXRlcy5nZXQoZWwpLnB1c2goeyBuYW1lLCB2YWx1ZTogZWwuZ2V0QXR0cmlidXRlKG5hbWUpIH0pO1xuICAgICAgfTtcbiAgICAgIGxldCByZW1vdmUgPSAoKSA9PiB7XG4gICAgICAgIGlmICghcmVtb3ZlZEF0dHJpYnV0ZXMuaGFzKGVsKSlcbiAgICAgICAgICByZW1vdmVkQXR0cmlidXRlcy5zZXQoZWwsIFtdKTtcbiAgICAgICAgcmVtb3ZlZEF0dHJpYnV0ZXMuZ2V0KGVsKS5wdXNoKG5hbWUpO1xuICAgICAgfTtcbiAgICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUobmFtZSkgJiYgb2xkVmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgYWRkMigpO1xuICAgICAgfSBlbHNlIGlmIChlbC5oYXNBdHRyaWJ1dGUobmFtZSkpIHtcbiAgICAgICAgcmVtb3ZlKCk7XG4gICAgICAgIGFkZDIoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlbW92ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZW1vdmVkQXR0cmlidXRlcy5mb3JFYWNoKChhdHRycywgZWwpID0+IHtcbiAgICBjbGVhbnVwQXR0cmlidXRlcyhlbCwgYXR0cnMpO1xuICB9KTtcbiAgYWRkZWRBdHRyaWJ1dGVzLmZvckVhY2goKGF0dHJzLCBlbCkgPT4ge1xuICAgIG9uQXR0cmlidXRlQWRkZWRzLmZvckVhY2goKGkpID0+IGkoZWwsIGF0dHJzKSk7XG4gIH0pO1xuICBmb3IgKGxldCBub2RlIG9mIHJlbW92ZWROb2Rlcykge1xuICAgIGlmIChhZGRlZE5vZGVzLnNvbWUoKGkpID0+IGkuY29udGFpbnMobm9kZSkpKVxuICAgICAgY29udGludWU7XG4gICAgb25FbFJlbW92ZWRzLmZvckVhY2goKGkpID0+IGkobm9kZSkpO1xuICB9XG4gIGZvciAobGV0IG5vZGUgb2YgYWRkZWROb2Rlcykge1xuICAgIGlmICghbm9kZS5pc0Nvbm5lY3RlZClcbiAgICAgIGNvbnRpbnVlO1xuICAgIG9uRWxBZGRlZHMuZm9yRWFjaCgoaSkgPT4gaShub2RlKSk7XG4gIH1cbiAgYWRkZWROb2RlcyA9IG51bGw7XG4gIHJlbW92ZWROb2RlcyA9IG51bGw7XG4gIGFkZGVkQXR0cmlidXRlcyA9IG51bGw7XG4gIHJlbW92ZWRBdHRyaWJ1dGVzID0gbnVsbDtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL3Njb3BlLmpzXG5mdW5jdGlvbiBzY29wZShub2RlKSB7XG4gIHJldHVybiBtZXJnZVByb3hpZXMoY2xvc2VzdERhdGFTdGFjayhub2RlKSk7XG59XG5mdW5jdGlvbiBhZGRTY29wZVRvTm9kZShub2RlLCBkYXRhMiwgcmVmZXJlbmNlTm9kZSkge1xuICBub2RlLl94X2RhdGFTdGFjayA9IFtkYXRhMiwgLi4uY2xvc2VzdERhdGFTdGFjayhyZWZlcmVuY2VOb2RlIHx8IG5vZGUpXTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBub2RlLl94X2RhdGFTdGFjayA9IG5vZGUuX3hfZGF0YVN0YWNrLmZpbHRlcigoaSkgPT4gaSAhPT0gZGF0YTIpO1xuICB9O1xufVxuZnVuY3Rpb24gY2xvc2VzdERhdGFTdGFjayhub2RlKSB7XG4gIGlmIChub2RlLl94X2RhdGFTdGFjaylcbiAgICByZXR1cm4gbm9kZS5feF9kYXRhU3RhY2s7XG4gIGlmICh0eXBlb2YgU2hhZG93Um9vdCA9PT0gXCJmdW5jdGlvblwiICYmIG5vZGUgaW5zdGFuY2VvZiBTaGFkb3dSb290KSB7XG4gICAgcmV0dXJuIGNsb3Nlc3REYXRhU3RhY2sobm9kZS5ob3N0KTtcbiAgfVxuICBpZiAoIW5vZGUucGFyZW50Tm9kZSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICByZXR1cm4gY2xvc2VzdERhdGFTdGFjayhub2RlLnBhcmVudE5vZGUpO1xufVxuZnVuY3Rpb24gbWVyZ2VQcm94aWVzKG9iamVjdHMpIHtcbiAgcmV0dXJuIG5ldyBQcm94eSh7IG9iamVjdHMgfSwgbWVyZ2VQcm94eVRyYXApO1xufVxudmFyIG1lcmdlUHJveHlUcmFwID0ge1xuICBvd25LZXlzKHsgb2JqZWN0cyB9KSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oXG4gICAgICBuZXcgU2V0KG9iamVjdHMuZmxhdE1hcCgoaSkgPT4gT2JqZWN0LmtleXMoaSkpKVxuICAgICk7XG4gIH0sXG4gIGhhcyh7IG9iamVjdHMgfSwgbmFtZSkge1xuICAgIGlmIChuYW1lID09IFN5bWJvbC51bnNjb3BhYmxlcylcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gb2JqZWN0cy5zb21lKFxuICAgICAgKG9iaikgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgbmFtZSkgfHwgUmVmbGVjdC5oYXMob2JqLCBuYW1lKVxuICAgICk7XG4gIH0sXG4gIGdldCh7IG9iamVjdHMgfSwgbmFtZSwgdGhpc1Byb3h5KSB7XG4gICAgaWYgKG5hbWUgPT0gXCJ0b0pTT05cIilcbiAgICAgIHJldHVybiBjb2xsYXBzZVByb3hpZXM7XG4gICAgcmV0dXJuIFJlZmxlY3QuZ2V0KFxuICAgICAgb2JqZWN0cy5maW5kKFxuICAgICAgICAob2JqKSA9PiBSZWZsZWN0LmhhcyhvYmosIG5hbWUpXG4gICAgICApIHx8IHt9LFxuICAgICAgbmFtZSxcbiAgICAgIHRoaXNQcm94eVxuICAgICk7XG4gIH0sXG4gIHNldCh7IG9iamVjdHMgfSwgbmFtZSwgdmFsdWUsIHRoaXNQcm94eSkge1xuICAgIGNvbnN0IHRhcmdldCA9IG9iamVjdHMuZmluZChcbiAgICAgIChvYmopID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIG5hbWUpXG4gICAgKSB8fCBvYmplY3RzW29iamVjdHMubGVuZ3RoIC0gMV07XG4gICAgY29uc3QgZGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBuYW1lKTtcbiAgICBpZiAoZGVzY3JpcHRvcj8uc2V0ICYmIGRlc2NyaXB0b3I/LmdldClcbiAgICAgIHJldHVybiBkZXNjcmlwdG9yLnNldC5jYWxsKHRoaXNQcm94eSwgdmFsdWUpIHx8IHRydWU7XG4gICAgcmV0dXJuIFJlZmxlY3Quc2V0KHRhcmdldCwgbmFtZSwgdmFsdWUpO1xuICB9XG59O1xuZnVuY3Rpb24gY29sbGFwc2VQcm94aWVzKCkge1xuICBsZXQga2V5cyA9IFJlZmxlY3Qub3duS2V5cyh0aGlzKTtcbiAgcmV0dXJuIGtleXMucmVkdWNlKChhY2MsIGtleSkgPT4ge1xuICAgIGFjY1trZXldID0gUmVmbGVjdC5nZXQodGhpcywga2V5KTtcbiAgICByZXR1cm4gYWNjO1xuICB9LCB7fSk7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9pbnRlcmNlcHRvci5qc1xuZnVuY3Rpb24gaW5pdEludGVyY2VwdG9ycyhkYXRhMikge1xuICBsZXQgaXNPYmplY3QyID0gKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIiAmJiAhQXJyYXkuaXNBcnJheSh2YWwpICYmIHZhbCAhPT0gbnVsbDtcbiAgbGV0IHJlY3Vyc2UgPSAob2JqLCBiYXNlUGF0aCA9IFwiXCIpID0+IHtcbiAgICBPYmplY3QuZW50cmllcyhPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhvYmopKS5mb3JFYWNoKChba2V5LCB7IHZhbHVlLCBlbnVtZXJhYmxlIH1dKSA9PiB7XG4gICAgICBpZiAoZW51bWVyYWJsZSA9PT0gZmFsc2UgfHwgdmFsdWUgPT09IHZvaWQgMClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZS5fX3Zfc2tpcClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgbGV0IHBhdGggPSBiYXNlUGF0aCA9PT0gXCJcIiA/IGtleSA6IGAke2Jhc2VQYXRofS4ke2tleX1gO1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZS5feF9pbnRlcmNlcHRvcikge1xuICAgICAgICBvYmpba2V5XSA9IHZhbHVlLmluaXRpYWxpemUoZGF0YTIsIHBhdGgsIGtleSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaXNPYmplY3QyKHZhbHVlKSAmJiB2YWx1ZSAhPT0gb2JqICYmICEodmFsdWUgaW5zdGFuY2VvZiBFbGVtZW50KSkge1xuICAgICAgICAgIHJlY3Vyc2UodmFsdWUsIHBhdGgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG4gIHJldHVybiByZWN1cnNlKGRhdGEyKTtcbn1cbmZ1bmN0aW9uIGludGVyY2VwdG9yKGNhbGxiYWNrLCBtdXRhdGVPYmogPSAoKSA9PiB7XG59KSB7XG4gIGxldCBvYmogPSB7XG4gICAgaW5pdGlhbFZhbHVlOiB2b2lkIDAsXG4gICAgX3hfaW50ZXJjZXB0b3I6IHRydWUsXG4gICAgaW5pdGlhbGl6ZShkYXRhMiwgcGF0aCwga2V5KSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2sodGhpcy5pbml0aWFsVmFsdWUsICgpID0+IGdldChkYXRhMiwgcGF0aCksICh2YWx1ZSkgPT4gc2V0KGRhdGEyLCBwYXRoLCB2YWx1ZSksIHBhdGgsIGtleSk7XG4gICAgfVxuICB9O1xuICBtdXRhdGVPYmoob2JqKTtcbiAgcmV0dXJuIChpbml0aWFsVmFsdWUpID0+IHtcbiAgICBpZiAodHlwZW9mIGluaXRpYWxWYWx1ZSA9PT0gXCJvYmplY3RcIiAmJiBpbml0aWFsVmFsdWUgIT09IG51bGwgJiYgaW5pdGlhbFZhbHVlLl94X2ludGVyY2VwdG9yKSB7XG4gICAgICBsZXQgaW5pdGlhbGl6ZSA9IG9iai5pbml0aWFsaXplLmJpbmQob2JqKTtcbiAgICAgIG9iai5pbml0aWFsaXplID0gKGRhdGEyLCBwYXRoLCBrZXkpID0+IHtcbiAgICAgICAgbGV0IGlubmVyVmFsdWUgPSBpbml0aWFsVmFsdWUuaW5pdGlhbGl6ZShkYXRhMiwgcGF0aCwga2V5KTtcbiAgICAgICAgb2JqLmluaXRpYWxWYWx1ZSA9IGlubmVyVmFsdWU7XG4gICAgICAgIHJldHVybiBpbml0aWFsaXplKGRhdGEyLCBwYXRoLCBrZXkpO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgb2JqLmluaXRpYWxWYWx1ZSA9IGluaXRpYWxWYWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfTtcbn1cbmZ1bmN0aW9uIGdldChvYmosIHBhdGgpIHtcbiAgcmV0dXJuIHBhdGguc3BsaXQoXCIuXCIpLnJlZHVjZSgoY2FycnksIHNlZ21lbnQpID0+IGNhcnJ5W3NlZ21lbnRdLCBvYmopO1xufVxuZnVuY3Rpb24gc2V0KG9iaiwgcGF0aCwgdmFsdWUpIHtcbiAgaWYgKHR5cGVvZiBwYXRoID09PSBcInN0cmluZ1wiKVxuICAgIHBhdGggPSBwYXRoLnNwbGl0KFwiLlwiKTtcbiAgaWYgKHBhdGgubGVuZ3RoID09PSAxKVxuICAgIG9ialtwYXRoWzBdXSA9IHZhbHVlO1xuICBlbHNlIGlmIChwYXRoLmxlbmd0aCA9PT0gMClcbiAgICB0aHJvdyBlcnJvcjtcbiAgZWxzZSB7XG4gICAgaWYgKG9ialtwYXRoWzBdXSlcbiAgICAgIHJldHVybiBzZXQob2JqW3BhdGhbMF1dLCBwYXRoLnNsaWNlKDEpLCB2YWx1ZSk7XG4gICAgZWxzZSB7XG4gICAgICBvYmpbcGF0aFswXV0gPSB7fTtcbiAgICAgIHJldHVybiBzZXQob2JqW3BhdGhbMF1dLCBwYXRoLnNsaWNlKDEpLCB2YWx1ZSk7XG4gICAgfVxuICB9XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9tYWdpY3MuanNcbnZhciBtYWdpY3MgPSB7fTtcbmZ1bmN0aW9uIG1hZ2ljKG5hbWUsIGNhbGxiYWNrKSB7XG4gIG1hZ2ljc1tuYW1lXSA9IGNhbGxiYWNrO1xufVxuZnVuY3Rpb24gaW5qZWN0TWFnaWNzKG9iaiwgZWwpIHtcbiAgbGV0IG1lbW9pemVkVXRpbGl0aWVzID0gZ2V0VXRpbGl0aWVzKGVsKTtcbiAgT2JqZWN0LmVudHJpZXMobWFnaWNzKS5mb3JFYWNoKChbbmFtZSwgY2FsbGJhY2tdKSA9PiB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgYCQke25hbWV9YCwge1xuICAgICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soZWwsIG1lbW9pemVkVXRpbGl0aWVzKTtcbiAgICAgIH0sXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZVxuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIG9iajtcbn1cbmZ1bmN0aW9uIGdldFV0aWxpdGllcyhlbCkge1xuICBsZXQgW3V0aWxpdGllcywgY2xlYW51cDJdID0gZ2V0RWxlbWVudEJvdW5kVXRpbGl0aWVzKGVsKTtcbiAgbGV0IHV0aWxzID0geyBpbnRlcmNlcHRvciwgLi4udXRpbGl0aWVzIH07XG4gIG9uRWxSZW1vdmVkKGVsLCBjbGVhbnVwMik7XG4gIHJldHVybiB1dGlscztcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL3V0aWxzL2Vycm9yLmpzXG5mdW5jdGlvbiB0cnlDYXRjaChlbCwgZXhwcmVzc2lvbiwgY2FsbGJhY2ssIC4uLmFyZ3MpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gY2FsbGJhY2soLi4uYXJncyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBoYW5kbGVFcnJvcihlLCBlbCwgZXhwcmVzc2lvbik7XG4gIH1cbn1cbmZ1bmN0aW9uIGhhbmRsZUVycm9yKGVycm9yMiwgZWwsIGV4cHJlc3Npb24gPSB2b2lkIDApIHtcbiAgZXJyb3IyID0gT2JqZWN0LmFzc2lnbihcbiAgICBlcnJvcjIgPz8geyBtZXNzYWdlOiBcIk5vIGVycm9yIG1lc3NhZ2UgZ2l2ZW4uXCIgfSxcbiAgICB7IGVsLCBleHByZXNzaW9uIH1cbiAgKTtcbiAgY29uc29sZS53YXJuKGBBbHBpbmUgRXhwcmVzc2lvbiBFcnJvcjogJHtlcnJvcjIubWVzc2FnZX1cblxuJHtleHByZXNzaW9uID8gJ0V4cHJlc3Npb246IFwiJyArIGV4cHJlc3Npb24gKyAnXCJcXG5cXG4nIDogXCJcIn1gLCBlbCk7XG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIHRocm93IGVycm9yMjtcbiAgfSwgMCk7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9ldmFsdWF0b3IuanNcbnZhciBzaG91bGRBdXRvRXZhbHVhdGVGdW5jdGlvbnMgPSB0cnVlO1xuZnVuY3Rpb24gZG9udEF1dG9FdmFsdWF0ZUZ1bmN0aW9ucyhjYWxsYmFjaykge1xuICBsZXQgY2FjaGUgPSBzaG91bGRBdXRvRXZhbHVhdGVGdW5jdGlvbnM7XG4gIHNob3VsZEF1dG9FdmFsdWF0ZUZ1bmN0aW9ucyA9IGZhbHNlO1xuICBsZXQgcmVzdWx0ID0gY2FsbGJhY2soKTtcbiAgc2hvdWxkQXV0b0V2YWx1YXRlRnVuY3Rpb25zID0gY2FjaGU7XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBldmFsdWF0ZShlbCwgZXhwcmVzc2lvbiwgZXh0cmFzID0ge30pIHtcbiAgbGV0IHJlc3VsdDtcbiAgZXZhbHVhdGVMYXRlcihlbCwgZXhwcmVzc2lvbikoKHZhbHVlKSA9PiByZXN1bHQgPSB2YWx1ZSwgZXh0cmFzKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGV2YWx1YXRlTGF0ZXIoLi4uYXJncykge1xuICByZXR1cm4gdGhlRXZhbHVhdG9yRnVuY3Rpb24oLi4uYXJncyk7XG59XG52YXIgdGhlRXZhbHVhdG9yRnVuY3Rpb24gPSBub3JtYWxFdmFsdWF0b3I7XG5mdW5jdGlvbiBzZXRFdmFsdWF0b3IobmV3RXZhbHVhdG9yKSB7XG4gIHRoZUV2YWx1YXRvckZ1bmN0aW9uID0gbmV3RXZhbHVhdG9yO1xufVxuZnVuY3Rpb24gbm9ybWFsRXZhbHVhdG9yKGVsLCBleHByZXNzaW9uKSB7XG4gIGxldCBvdmVycmlkZGVuTWFnaWNzID0ge307XG4gIGluamVjdE1hZ2ljcyhvdmVycmlkZGVuTWFnaWNzLCBlbCk7XG4gIGxldCBkYXRhU3RhY2sgPSBbb3ZlcnJpZGRlbk1hZ2ljcywgLi4uY2xvc2VzdERhdGFTdGFjayhlbCldO1xuICBsZXQgZXZhbHVhdG9yID0gdHlwZW9mIGV4cHJlc3Npb24gPT09IFwiZnVuY3Rpb25cIiA/IGdlbmVyYXRlRXZhbHVhdG9yRnJvbUZ1bmN0aW9uKGRhdGFTdGFjaywgZXhwcmVzc2lvbikgOiBnZW5lcmF0ZUV2YWx1YXRvckZyb21TdHJpbmcoZGF0YVN0YWNrLCBleHByZXNzaW9uLCBlbCk7XG4gIHJldHVybiB0cnlDYXRjaC5iaW5kKG51bGwsIGVsLCBleHByZXNzaW9uLCBldmFsdWF0b3IpO1xufVxuZnVuY3Rpb24gZ2VuZXJhdGVFdmFsdWF0b3JGcm9tRnVuY3Rpb24oZGF0YVN0YWNrLCBmdW5jKSB7XG4gIHJldHVybiAocmVjZWl2ZXIgPSAoKSA9PiB7XG4gIH0sIHsgc2NvcGU6IHNjb3BlMiA9IHt9LCBwYXJhbXMgPSBbXSB9ID0ge30pID0+IHtcbiAgICBsZXQgcmVzdWx0ID0gZnVuYy5hcHBseShtZXJnZVByb3hpZXMoW3Njb3BlMiwgLi4uZGF0YVN0YWNrXSksIHBhcmFtcyk7XG4gICAgcnVuSWZUeXBlT2ZGdW5jdGlvbihyZWNlaXZlciwgcmVzdWx0KTtcbiAgfTtcbn1cbnZhciBldmFsdWF0b3JNZW1vID0ge307XG5mdW5jdGlvbiBnZW5lcmF0ZUZ1bmN0aW9uRnJvbVN0cmluZyhleHByZXNzaW9uLCBlbCkge1xuICBpZiAoZXZhbHVhdG9yTWVtb1tleHByZXNzaW9uXSkge1xuICAgIHJldHVybiBldmFsdWF0b3JNZW1vW2V4cHJlc3Npb25dO1xuICB9XG4gIGxldCBBc3luY0Z1bmN0aW9uID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGFzeW5jIGZ1bmN0aW9uKCkge1xuICB9KS5jb25zdHJ1Y3RvcjtcbiAgbGV0IHJpZ2h0U2lkZVNhZmVFeHByZXNzaW9uID0gL15bXFxuXFxzXSppZi4qXFwoLipcXCkvLnRlc3QoZXhwcmVzc2lvbi50cmltKCkpIHx8IC9eKGxldHxjb25zdClcXHMvLnRlc3QoZXhwcmVzc2lvbi50cmltKCkpID8gYChhc3luYygpPT57ICR7ZXhwcmVzc2lvbn0gfSkoKWAgOiBleHByZXNzaW9uO1xuICBjb25zdCBzYWZlQXN5bmNGdW5jdGlvbiA9ICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgbGV0IGZ1bmMyID0gbmV3IEFzeW5jRnVuY3Rpb24oXG4gICAgICAgIFtcIl9fc2VsZlwiLCBcInNjb3BlXCJdLFxuICAgICAgICBgd2l0aCAoc2NvcGUpIHsgX19zZWxmLnJlc3VsdCA9ICR7cmlnaHRTaWRlU2FmZUV4cHJlc3Npb259IH07IF9fc2VsZi5maW5pc2hlZCA9IHRydWU7IHJldHVybiBfX3NlbGYucmVzdWx0O2BcbiAgICAgICk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZnVuYzIsIFwibmFtZVwiLCB7XG4gICAgICAgIHZhbHVlOiBgW0FscGluZV0gJHtleHByZXNzaW9ufWBcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGZ1bmMyO1xuICAgIH0gY2F0Y2ggKGVycm9yMikge1xuICAgICAgaGFuZGxlRXJyb3IoZXJyb3IyLCBlbCwgZXhwcmVzc2lvbik7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICB9O1xuICBsZXQgZnVuYyA9IHNhZmVBc3luY0Z1bmN0aW9uKCk7XG4gIGV2YWx1YXRvck1lbW9bZXhwcmVzc2lvbl0gPSBmdW5jO1xuICByZXR1cm4gZnVuYztcbn1cbmZ1bmN0aW9uIGdlbmVyYXRlRXZhbHVhdG9yRnJvbVN0cmluZyhkYXRhU3RhY2ssIGV4cHJlc3Npb24sIGVsKSB7XG4gIGxldCBmdW5jID0gZ2VuZXJhdGVGdW5jdGlvbkZyb21TdHJpbmcoZXhwcmVzc2lvbiwgZWwpO1xuICByZXR1cm4gKHJlY2VpdmVyID0gKCkgPT4ge1xuICB9LCB7IHNjb3BlOiBzY29wZTIgPSB7fSwgcGFyYW1zID0gW10gfSA9IHt9KSA9PiB7XG4gICAgZnVuYy5yZXN1bHQgPSB2b2lkIDA7XG4gICAgZnVuYy5maW5pc2hlZCA9IGZhbHNlO1xuICAgIGxldCBjb21wbGV0ZVNjb3BlID0gbWVyZ2VQcm94aWVzKFtzY29wZTIsIC4uLmRhdGFTdGFja10pO1xuICAgIGlmICh0eXBlb2YgZnVuYyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBsZXQgcHJvbWlzZSA9IGZ1bmMoZnVuYywgY29tcGxldGVTY29wZSkuY2F0Y2goKGVycm9yMikgPT4gaGFuZGxlRXJyb3IoZXJyb3IyLCBlbCwgZXhwcmVzc2lvbikpO1xuICAgICAgaWYgKGZ1bmMuZmluaXNoZWQpIHtcbiAgICAgICAgcnVuSWZUeXBlT2ZGdW5jdGlvbihyZWNlaXZlciwgZnVuYy5yZXN1bHQsIGNvbXBsZXRlU2NvcGUsIHBhcmFtcywgZWwpO1xuICAgICAgICBmdW5jLnJlc3VsdCA9IHZvaWQgMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb21pc2UudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgcnVuSWZUeXBlT2ZGdW5jdGlvbihyZWNlaXZlciwgcmVzdWx0LCBjb21wbGV0ZVNjb3BlLCBwYXJhbXMsIGVsKTtcbiAgICAgICAgfSkuY2F0Y2goKGVycm9yMikgPT4gaGFuZGxlRXJyb3IoZXJyb3IyLCBlbCwgZXhwcmVzc2lvbikpLmZpbmFsbHkoKCkgPT4gZnVuYy5yZXN1bHQgPSB2b2lkIDApO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIHJ1bklmVHlwZU9mRnVuY3Rpb24ocmVjZWl2ZXIsIHZhbHVlLCBzY29wZTIsIHBhcmFtcywgZWwpIHtcbiAgaWYgKHNob3VsZEF1dG9FdmFsdWF0ZUZ1bmN0aW9ucyAmJiB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGxldCByZXN1bHQgPSB2YWx1ZS5hcHBseShzY29wZTIsIHBhcmFtcyk7XG4gICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgIHJlc3VsdC50aGVuKChpKSA9PiBydW5JZlR5cGVPZkZ1bmN0aW9uKHJlY2VpdmVyLCBpLCBzY29wZTIsIHBhcmFtcykpLmNhdGNoKChlcnJvcjIpID0+IGhhbmRsZUVycm9yKGVycm9yMiwgZWwsIHZhbHVlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlY2VpdmVyKHJlc3VsdCk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICB2YWx1ZS50aGVuKChpKSA9PiByZWNlaXZlcihpKSk7XG4gIH0gZWxzZSB7XG4gICAgcmVjZWl2ZXIodmFsdWUpO1xuICB9XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9kaXJlY3RpdmVzLmpzXG52YXIgcHJlZml4QXNTdHJpbmcgPSBcIngtXCI7XG5mdW5jdGlvbiBwcmVmaXgoc3ViamVjdCA9IFwiXCIpIHtcbiAgcmV0dXJuIHByZWZpeEFzU3RyaW5nICsgc3ViamVjdDtcbn1cbmZ1bmN0aW9uIHNldFByZWZpeChuZXdQcmVmaXgpIHtcbiAgcHJlZml4QXNTdHJpbmcgPSBuZXdQcmVmaXg7XG59XG52YXIgZGlyZWN0aXZlSGFuZGxlcnMgPSB7fTtcbmZ1bmN0aW9uIGRpcmVjdGl2ZShuYW1lLCBjYWxsYmFjaykge1xuICBkaXJlY3RpdmVIYW5kbGVyc1tuYW1lXSA9IGNhbGxiYWNrO1xuICByZXR1cm4ge1xuICAgIGJlZm9yZShkaXJlY3RpdmUyKSB7XG4gICAgICBpZiAoIWRpcmVjdGl2ZUhhbmRsZXJzW2RpcmVjdGl2ZTJdKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihTdHJpbmcucmF3YENhbm5vdCBmaW5kIGRpcmVjdGl2ZSBcXGAke2RpcmVjdGl2ZTJ9XFxgLiBcXGAke25hbWV9XFxgIHdpbGwgdXNlIHRoZSBkZWZhdWx0IG9yZGVyIG9mIGV4ZWN1dGlvbmApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBwb3MgPSBkaXJlY3RpdmVPcmRlci5pbmRleE9mKGRpcmVjdGl2ZTIpO1xuICAgICAgZGlyZWN0aXZlT3JkZXIuc3BsaWNlKHBvcyA+PSAwID8gcG9zIDogZGlyZWN0aXZlT3JkZXIuaW5kZXhPZihcIkRFRkFVTFRcIiksIDAsIG5hbWUpO1xuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIGRpcmVjdGl2ZUV4aXN0cyhuYW1lKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhkaXJlY3RpdmVIYW5kbGVycykuaW5jbHVkZXMobmFtZSk7XG59XG5mdW5jdGlvbiBkaXJlY3RpdmVzKGVsLCBhdHRyaWJ1dGVzLCBvcmlnaW5hbEF0dHJpYnV0ZU92ZXJyaWRlKSB7XG4gIGF0dHJpYnV0ZXMgPSBBcnJheS5mcm9tKGF0dHJpYnV0ZXMpO1xuICBpZiAoZWwuX3hfdmlydHVhbERpcmVjdGl2ZXMpIHtcbiAgICBsZXQgdkF0dHJpYnV0ZXMgPSBPYmplY3QuZW50cmllcyhlbC5feF92aXJ0dWFsRGlyZWN0aXZlcykubWFwKChbbmFtZSwgdmFsdWVdKSA9PiAoeyBuYW1lLCB2YWx1ZSB9KSk7XG4gICAgbGV0IHN0YXRpY0F0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzT25seSh2QXR0cmlidXRlcyk7XG4gICAgdkF0dHJpYnV0ZXMgPSB2QXR0cmlidXRlcy5tYXAoKGF0dHJpYnV0ZSkgPT4ge1xuICAgICAgaWYgKHN0YXRpY0F0dHJpYnV0ZXMuZmluZCgoYXR0cikgPT4gYXR0ci5uYW1lID09PSBhdHRyaWJ1dGUubmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBuYW1lOiBgeC1iaW5kOiR7YXR0cmlidXRlLm5hbWV9YCxcbiAgICAgICAgICB2YWx1ZTogYFwiJHthdHRyaWJ1dGUudmFsdWV9XCJgXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4gYXR0cmlidXRlO1xuICAgIH0pO1xuICAgIGF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzLmNvbmNhdCh2QXR0cmlidXRlcyk7XG4gIH1cbiAgbGV0IHRyYW5zZm9ybWVkQXR0cmlidXRlTWFwID0ge307XG4gIGxldCBkaXJlY3RpdmVzMiA9IGF0dHJpYnV0ZXMubWFwKHRvVHJhbnNmb3JtZWRBdHRyaWJ1dGVzKChuZXdOYW1lLCBvbGROYW1lKSA9PiB0cmFuc2Zvcm1lZEF0dHJpYnV0ZU1hcFtuZXdOYW1lXSA9IG9sZE5hbWUpKS5maWx0ZXIob3V0Tm9uQWxwaW5lQXR0cmlidXRlcykubWFwKHRvUGFyc2VkRGlyZWN0aXZlcyh0cmFuc2Zvcm1lZEF0dHJpYnV0ZU1hcCwgb3JpZ2luYWxBdHRyaWJ1dGVPdmVycmlkZSkpLnNvcnQoYnlQcmlvcml0eSk7XG4gIHJldHVybiBkaXJlY3RpdmVzMi5tYXAoKGRpcmVjdGl2ZTIpID0+IHtcbiAgICByZXR1cm4gZ2V0RGlyZWN0aXZlSGFuZGxlcihlbCwgZGlyZWN0aXZlMik7XG4gIH0pO1xufVxuZnVuY3Rpb24gYXR0cmlidXRlc09ubHkoYXR0cmlidXRlcykge1xuICByZXR1cm4gQXJyYXkuZnJvbShhdHRyaWJ1dGVzKS5tYXAodG9UcmFuc2Zvcm1lZEF0dHJpYnV0ZXMoKSkuZmlsdGVyKChhdHRyKSA9PiAhb3V0Tm9uQWxwaW5lQXR0cmlidXRlcyhhdHRyKSk7XG59XG52YXIgaXNEZWZlcnJpbmdIYW5kbGVycyA9IGZhbHNlO1xudmFyIGRpcmVjdGl2ZUhhbmRsZXJTdGFja3MgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xudmFyIGN1cnJlbnRIYW5kbGVyU3RhY2tLZXkgPSBTeW1ib2woKTtcbmZ1bmN0aW9uIGRlZmVySGFuZGxpbmdEaXJlY3RpdmVzKGNhbGxiYWNrKSB7XG4gIGlzRGVmZXJyaW5nSGFuZGxlcnMgPSB0cnVlO1xuICBsZXQga2V5ID0gU3ltYm9sKCk7XG4gIGN1cnJlbnRIYW5kbGVyU3RhY2tLZXkgPSBrZXk7XG4gIGRpcmVjdGl2ZUhhbmRsZXJTdGFja3Muc2V0KGtleSwgW10pO1xuICBsZXQgZmx1c2hIYW5kbGVycyA9ICgpID0+IHtcbiAgICB3aGlsZSAoZGlyZWN0aXZlSGFuZGxlclN0YWNrcy5nZXQoa2V5KS5sZW5ndGgpXG4gICAgICBkaXJlY3RpdmVIYW5kbGVyU3RhY2tzLmdldChrZXkpLnNoaWZ0KCkoKTtcbiAgICBkaXJlY3RpdmVIYW5kbGVyU3RhY2tzLmRlbGV0ZShrZXkpO1xuICB9O1xuICBsZXQgc3RvcERlZmVycmluZyA9ICgpID0+IHtcbiAgICBpc0RlZmVycmluZ0hhbmRsZXJzID0gZmFsc2U7XG4gICAgZmx1c2hIYW5kbGVycygpO1xuICB9O1xuICBjYWxsYmFjayhmbHVzaEhhbmRsZXJzKTtcbiAgc3RvcERlZmVycmluZygpO1xufVxuZnVuY3Rpb24gZ2V0RWxlbWVudEJvdW5kVXRpbGl0aWVzKGVsKSB7XG4gIGxldCBjbGVhbnVwcyA9IFtdO1xuICBsZXQgY2xlYW51cDIgPSAoY2FsbGJhY2spID0+IGNsZWFudXBzLnB1c2goY2FsbGJhY2spO1xuICBsZXQgW2VmZmVjdDMsIGNsZWFudXBFZmZlY3RdID0gZWxlbWVudEJvdW5kRWZmZWN0KGVsKTtcbiAgY2xlYW51cHMucHVzaChjbGVhbnVwRWZmZWN0KTtcbiAgbGV0IHV0aWxpdGllcyA9IHtcbiAgICBBbHBpbmU6IGFscGluZV9kZWZhdWx0LFxuICAgIGVmZmVjdDogZWZmZWN0MyxcbiAgICBjbGVhbnVwOiBjbGVhbnVwMixcbiAgICBldmFsdWF0ZUxhdGVyOiBldmFsdWF0ZUxhdGVyLmJpbmQoZXZhbHVhdGVMYXRlciwgZWwpLFxuICAgIGV2YWx1YXRlOiBldmFsdWF0ZS5iaW5kKGV2YWx1YXRlLCBlbClcbiAgfTtcbiAgbGV0IGRvQ2xlYW51cCA9ICgpID0+IGNsZWFudXBzLmZvckVhY2goKGkpID0+IGkoKSk7XG4gIHJldHVybiBbdXRpbGl0aWVzLCBkb0NsZWFudXBdO1xufVxuZnVuY3Rpb24gZ2V0RGlyZWN0aXZlSGFuZGxlcihlbCwgZGlyZWN0aXZlMikge1xuICBsZXQgbm9vcCA9ICgpID0+IHtcbiAgfTtcbiAgbGV0IGhhbmRsZXI0ID0gZGlyZWN0aXZlSGFuZGxlcnNbZGlyZWN0aXZlMi50eXBlXSB8fCBub29wO1xuICBsZXQgW3V0aWxpdGllcywgY2xlYW51cDJdID0gZ2V0RWxlbWVudEJvdW5kVXRpbGl0aWVzKGVsKTtcbiAgb25BdHRyaWJ1dGVSZW1vdmVkKGVsLCBkaXJlY3RpdmUyLm9yaWdpbmFsLCBjbGVhbnVwMik7XG4gIGxldCBmdWxsSGFuZGxlciA9ICgpID0+IHtcbiAgICBpZiAoZWwuX3hfaWdub3JlIHx8IGVsLl94X2lnbm9yZVNlbGYpXG4gICAgICByZXR1cm47XG4gICAgaGFuZGxlcjQuaW5saW5lICYmIGhhbmRsZXI0LmlubGluZShlbCwgZGlyZWN0aXZlMiwgdXRpbGl0aWVzKTtcbiAgICBoYW5kbGVyNCA9IGhhbmRsZXI0LmJpbmQoaGFuZGxlcjQsIGVsLCBkaXJlY3RpdmUyLCB1dGlsaXRpZXMpO1xuICAgIGlzRGVmZXJyaW5nSGFuZGxlcnMgPyBkaXJlY3RpdmVIYW5kbGVyU3RhY2tzLmdldChjdXJyZW50SGFuZGxlclN0YWNrS2V5KS5wdXNoKGhhbmRsZXI0KSA6IGhhbmRsZXI0KCk7XG4gIH07XG4gIGZ1bGxIYW5kbGVyLnJ1bkNsZWFudXBzID0gY2xlYW51cDI7XG4gIHJldHVybiBmdWxsSGFuZGxlcjtcbn1cbnZhciBzdGFydGluZ1dpdGggPSAoc3ViamVjdCwgcmVwbGFjZW1lbnQpID0+ICh7IG5hbWUsIHZhbHVlIH0pID0+IHtcbiAgaWYgKG5hbWUuc3RhcnRzV2l0aChzdWJqZWN0KSlcbiAgICBuYW1lID0gbmFtZS5yZXBsYWNlKHN1YmplY3QsIHJlcGxhY2VtZW50KTtcbiAgcmV0dXJuIHsgbmFtZSwgdmFsdWUgfTtcbn07XG52YXIgaW50byA9IChpKSA9PiBpO1xuZnVuY3Rpb24gdG9UcmFuc2Zvcm1lZEF0dHJpYnV0ZXMoY2FsbGJhY2sgPSAoKSA9PiB7XG59KSB7XG4gIHJldHVybiAoeyBuYW1lLCB2YWx1ZSB9KSA9PiB7XG4gICAgbGV0IHsgbmFtZTogbmV3TmFtZSwgdmFsdWU6IG5ld1ZhbHVlIH0gPSBhdHRyaWJ1dGVUcmFuc2Zvcm1lcnMucmVkdWNlKChjYXJyeSwgdHJhbnNmb3JtKSA9PiB7XG4gICAgICByZXR1cm4gdHJhbnNmb3JtKGNhcnJ5KTtcbiAgICB9LCB7IG5hbWUsIHZhbHVlIH0pO1xuICAgIGlmIChuZXdOYW1lICE9PSBuYW1lKVxuICAgICAgY2FsbGJhY2sobmV3TmFtZSwgbmFtZSk7XG4gICAgcmV0dXJuIHsgbmFtZTogbmV3TmFtZSwgdmFsdWU6IG5ld1ZhbHVlIH07XG4gIH07XG59XG52YXIgYXR0cmlidXRlVHJhbnNmb3JtZXJzID0gW107XG5mdW5jdGlvbiBtYXBBdHRyaWJ1dGVzKGNhbGxiYWNrKSB7XG4gIGF0dHJpYnV0ZVRyYW5zZm9ybWVycy5wdXNoKGNhbGxiYWNrKTtcbn1cbmZ1bmN0aW9uIG91dE5vbkFscGluZUF0dHJpYnV0ZXMoeyBuYW1lIH0pIHtcbiAgcmV0dXJuIGFscGluZUF0dHJpYnV0ZVJlZ2V4KCkudGVzdChuYW1lKTtcbn1cbnZhciBhbHBpbmVBdHRyaWJ1dGVSZWdleCA9ICgpID0+IG5ldyBSZWdFeHAoYF4ke3ByZWZpeEFzU3RyaW5nfShbXjpeLl0rKVxcXFxiYCk7XG5mdW5jdGlvbiB0b1BhcnNlZERpcmVjdGl2ZXModHJhbnNmb3JtZWRBdHRyaWJ1dGVNYXAsIG9yaWdpbmFsQXR0cmlidXRlT3ZlcnJpZGUpIHtcbiAgcmV0dXJuICh7IG5hbWUsIHZhbHVlIH0pID0+IHtcbiAgICBsZXQgdHlwZU1hdGNoID0gbmFtZS5tYXRjaChhbHBpbmVBdHRyaWJ1dGVSZWdleCgpKTtcbiAgICBsZXQgdmFsdWVNYXRjaCA9IG5hbWUubWF0Y2goLzooW2EtekEtWjAtOVxcLV86XSspLyk7XG4gICAgbGV0IG1vZGlmaWVycyA9IG5hbWUubWF0Y2goL1xcLlteLlxcXV0rKD89W15cXF1dKiQpL2cpIHx8IFtdO1xuICAgIGxldCBvcmlnaW5hbCA9IG9yaWdpbmFsQXR0cmlidXRlT3ZlcnJpZGUgfHwgdHJhbnNmb3JtZWRBdHRyaWJ1dGVNYXBbbmFtZV0gfHwgbmFtZTtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogdHlwZU1hdGNoID8gdHlwZU1hdGNoWzFdIDogbnVsbCxcbiAgICAgIHZhbHVlOiB2YWx1ZU1hdGNoID8gdmFsdWVNYXRjaFsxXSA6IG51bGwsXG4gICAgICBtb2RpZmllcnM6IG1vZGlmaWVycy5tYXAoKGkpID0+IGkucmVwbGFjZShcIi5cIiwgXCJcIikpLFxuICAgICAgZXhwcmVzc2lvbjogdmFsdWUsXG4gICAgICBvcmlnaW5hbFxuICAgIH07XG4gIH07XG59XG52YXIgREVGQVVMVCA9IFwiREVGQVVMVFwiO1xudmFyIGRpcmVjdGl2ZU9yZGVyID0gW1xuICBcImlnbm9yZVwiLFxuICBcInJlZlwiLFxuICBcImRhdGFcIixcbiAgXCJpZFwiLFxuICBcImFuY2hvclwiLFxuICBcImJpbmRcIixcbiAgXCJpbml0XCIsXG4gIFwiZm9yXCIsXG4gIFwibW9kZWxcIixcbiAgXCJtb2RlbGFibGVcIixcbiAgXCJ0cmFuc2l0aW9uXCIsXG4gIFwic2hvd1wiLFxuICBcImlmXCIsXG4gIERFRkFVTFQsXG4gIFwidGVsZXBvcnRcIlxuXTtcbmZ1bmN0aW9uIGJ5UHJpb3JpdHkoYSwgYikge1xuICBsZXQgdHlwZUEgPSBkaXJlY3RpdmVPcmRlci5pbmRleE9mKGEudHlwZSkgPT09IC0xID8gREVGQVVMVCA6IGEudHlwZTtcbiAgbGV0IHR5cGVCID0gZGlyZWN0aXZlT3JkZXIuaW5kZXhPZihiLnR5cGUpID09PSAtMSA/IERFRkFVTFQgOiBiLnR5cGU7XG4gIHJldHVybiBkaXJlY3RpdmVPcmRlci5pbmRleE9mKHR5cGVBKSAtIGRpcmVjdGl2ZU9yZGVyLmluZGV4T2YodHlwZUIpO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvdXRpbHMvZGlzcGF0Y2guanNcbmZ1bmN0aW9uIGRpc3BhdGNoKGVsLCBuYW1lLCBkZXRhaWwgPSB7fSkge1xuICBlbC5kaXNwYXRjaEV2ZW50KFxuICAgIG5ldyBDdXN0b21FdmVudChuYW1lLCB7XG4gICAgICBkZXRhaWwsXG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgLy8gQWxsb3dzIGV2ZW50cyB0byBwYXNzIHRoZSBzaGFkb3cgRE9NIGJhcnJpZXIuXG4gICAgICBjb21wb3NlZDogdHJ1ZSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICB9KVxuICApO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvdXRpbHMvd2Fsay5qc1xuZnVuY3Rpb24gd2FsayhlbCwgY2FsbGJhY2spIHtcbiAgaWYgKHR5cGVvZiBTaGFkb3dSb290ID09PSBcImZ1bmN0aW9uXCIgJiYgZWwgaW5zdGFuY2VvZiBTaGFkb3dSb290KSB7XG4gICAgQXJyYXkuZnJvbShlbC5jaGlsZHJlbikuZm9yRWFjaCgoZWwyKSA9PiB3YWxrKGVsMiwgY2FsbGJhY2spKTtcbiAgICByZXR1cm47XG4gIH1cbiAgbGV0IHNraXAgPSBmYWxzZTtcbiAgY2FsbGJhY2soZWwsICgpID0+IHNraXAgPSB0cnVlKTtcbiAgaWYgKHNraXApXG4gICAgcmV0dXJuO1xuICBsZXQgbm9kZSA9IGVsLmZpcnN0RWxlbWVudENoaWxkO1xuICB3aGlsZSAobm9kZSkge1xuICAgIHdhbGsobm9kZSwgY2FsbGJhY2ssIGZhbHNlKTtcbiAgICBub2RlID0gbm9kZS5uZXh0RWxlbWVudFNpYmxpbmc7XG4gIH1cbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL3V0aWxzL3dhcm4uanNcbmZ1bmN0aW9uIHdhcm4obWVzc2FnZSwgLi4uYXJncykge1xuICBjb25zb2xlLndhcm4oYEFscGluZSBXYXJuaW5nOiAke21lc3NhZ2V9YCwgLi4uYXJncyk7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9saWZlY3ljbGUuanNcbnZhciBzdGFydGVkID0gZmFsc2U7XG5mdW5jdGlvbiBzdGFydCgpIHtcbiAgaWYgKHN0YXJ0ZWQpXG4gICAgd2FybihcIkFscGluZSBoYXMgYWxyZWFkeSBiZWVuIGluaXRpYWxpemVkIG9uIHRoaXMgcGFnZS4gQ2FsbGluZyBBbHBpbmUuc3RhcnQoKSBtb3JlIHRoYW4gb25jZSBjYW4gY2F1c2UgcHJvYmxlbXMuXCIpO1xuICBzdGFydGVkID0gdHJ1ZTtcbiAgaWYgKCFkb2N1bWVudC5ib2R5KVxuICAgIHdhcm4oXCJVbmFibGUgdG8gaW5pdGlhbGl6ZS4gVHJ5aW5nIHRvIGxvYWQgQWxwaW5lIGJlZm9yZSBgPGJvZHk+YCBpcyBhdmFpbGFibGUuIERpZCB5b3UgZm9yZ2V0IHRvIGFkZCBgZGVmZXJgIGluIEFscGluZSdzIGA8c2NyaXB0PmAgdGFnP1wiKTtcbiAgZGlzcGF0Y2goZG9jdW1lbnQsIFwiYWxwaW5lOmluaXRcIik7XG4gIGRpc3BhdGNoKGRvY3VtZW50LCBcImFscGluZTppbml0aWFsaXppbmdcIik7XG4gIHN0YXJ0T2JzZXJ2aW5nTXV0YXRpb25zKCk7XG4gIG9uRWxBZGRlZCgoZWwpID0+IGluaXRUcmVlKGVsLCB3YWxrKSk7XG4gIG9uRWxSZW1vdmVkKChlbCkgPT4gZGVzdHJveVRyZWUoZWwpKTtcbiAgb25BdHRyaWJ1dGVzQWRkZWQoKGVsLCBhdHRycykgPT4ge1xuICAgIGRpcmVjdGl2ZXMoZWwsIGF0dHJzKS5mb3JFYWNoKChoYW5kbGUpID0+IGhhbmRsZSgpKTtcbiAgfSk7XG4gIGxldCBvdXROZXN0ZWRDb21wb25lbnRzID0gKGVsKSA9PiAhY2xvc2VzdFJvb3QoZWwucGFyZW50RWxlbWVudCwgdHJ1ZSk7XG4gIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhbGxTZWxlY3RvcnMoKS5qb2luKFwiLFwiKSkpLmZpbHRlcihvdXROZXN0ZWRDb21wb25lbnRzKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgIGluaXRUcmVlKGVsKTtcbiAgfSk7XG4gIGRpc3BhdGNoKGRvY3VtZW50LCBcImFscGluZTppbml0aWFsaXplZFwiKTtcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgd2FybkFib3V0TWlzc2luZ1BsdWdpbnMoKTtcbiAgfSk7XG59XG52YXIgcm9vdFNlbGVjdG9yQ2FsbGJhY2tzID0gW107XG52YXIgaW5pdFNlbGVjdG9yQ2FsbGJhY2tzID0gW107XG5mdW5jdGlvbiByb290U2VsZWN0b3JzKCkge1xuICByZXR1cm4gcm9vdFNlbGVjdG9yQ2FsbGJhY2tzLm1hcCgoZm4pID0+IGZuKCkpO1xufVxuZnVuY3Rpb24gYWxsU2VsZWN0b3JzKCkge1xuICByZXR1cm4gcm9vdFNlbGVjdG9yQ2FsbGJhY2tzLmNvbmNhdChpbml0U2VsZWN0b3JDYWxsYmFja3MpLm1hcCgoZm4pID0+IGZuKCkpO1xufVxuZnVuY3Rpb24gYWRkUm9vdFNlbGVjdG9yKHNlbGVjdG9yQ2FsbGJhY2spIHtcbiAgcm9vdFNlbGVjdG9yQ2FsbGJhY2tzLnB1c2goc2VsZWN0b3JDYWxsYmFjayk7XG59XG5mdW5jdGlvbiBhZGRJbml0U2VsZWN0b3Ioc2VsZWN0b3JDYWxsYmFjaykge1xuICBpbml0U2VsZWN0b3JDYWxsYmFja3MucHVzaChzZWxlY3RvckNhbGxiYWNrKTtcbn1cbmZ1bmN0aW9uIGNsb3Nlc3RSb290KGVsLCBpbmNsdWRlSW5pdFNlbGVjdG9ycyA9IGZhbHNlKSB7XG4gIHJldHVybiBmaW5kQ2xvc2VzdChlbCwgKGVsZW1lbnQpID0+IHtcbiAgICBjb25zdCBzZWxlY3RvcnMgPSBpbmNsdWRlSW5pdFNlbGVjdG9ycyA/IGFsbFNlbGVjdG9ycygpIDogcm9vdFNlbGVjdG9ycygpO1xuICAgIGlmIChzZWxlY3RvcnMuc29tZSgoc2VsZWN0b3IpID0+IGVsZW1lbnQubWF0Y2hlcyhzZWxlY3RvcikpKVxuICAgICAgcmV0dXJuIHRydWU7XG4gIH0pO1xufVxuZnVuY3Rpb24gZmluZENsb3Nlc3QoZWwsIGNhbGxiYWNrKSB7XG4gIGlmICghZWwpXG4gICAgcmV0dXJuO1xuICBpZiAoY2FsbGJhY2soZWwpKVxuICAgIHJldHVybiBlbDtcbiAgaWYgKGVsLl94X3RlbGVwb3J0QmFjaylcbiAgICBlbCA9IGVsLl94X3RlbGVwb3J0QmFjaztcbiAgaWYgKCFlbC5wYXJlbnRFbGVtZW50KVxuICAgIHJldHVybjtcbiAgcmV0dXJuIGZpbmRDbG9zZXN0KGVsLnBhcmVudEVsZW1lbnQsIGNhbGxiYWNrKTtcbn1cbmZ1bmN0aW9uIGlzUm9vdChlbCkge1xuICByZXR1cm4gcm9vdFNlbGVjdG9ycygpLnNvbWUoKHNlbGVjdG9yKSA9PiBlbC5tYXRjaGVzKHNlbGVjdG9yKSk7XG59XG52YXIgaW5pdEludGVyY2VwdG9yczIgPSBbXTtcbmZ1bmN0aW9uIGludGVyY2VwdEluaXQoY2FsbGJhY2spIHtcbiAgaW5pdEludGVyY2VwdG9yczIucHVzaChjYWxsYmFjayk7XG59XG52YXIgbWFya2VyRGlzcGVuc2VyID0gMTtcbmZ1bmN0aW9uIGluaXRUcmVlKGVsLCB3YWxrZXIgPSB3YWxrLCBpbnRlcmNlcHQgPSAoKSA9PiB7XG59KSB7XG4gIGlmIChmaW5kQ2xvc2VzdChlbCwgKGkpID0+IGkuX3hfaWdub3JlKSlcbiAgICByZXR1cm47XG4gIGRlZmVySGFuZGxpbmdEaXJlY3RpdmVzKCgpID0+IHtcbiAgICB3YWxrZXIoZWwsIChlbDIsIHNraXApID0+IHtcbiAgICAgIGlmIChlbDIuX3hfbWFya2VyKVxuICAgICAgICByZXR1cm47XG4gICAgICBpbnRlcmNlcHQoZWwyLCBza2lwKTtcbiAgICAgIGluaXRJbnRlcmNlcHRvcnMyLmZvckVhY2goKGkpID0+IGkoZWwyLCBza2lwKSk7XG4gICAgICBkaXJlY3RpdmVzKGVsMiwgZWwyLmF0dHJpYnV0ZXMpLmZvckVhY2goKGhhbmRsZSkgPT4gaGFuZGxlKCkpO1xuICAgICAgaWYgKCFlbDIuX3hfaWdub3JlKVxuICAgICAgICBlbDIuX3hfbWFya2VyID0gbWFya2VyRGlzcGVuc2VyKys7XG4gICAgICBlbDIuX3hfaWdub3JlICYmIHNraXAoKTtcbiAgICB9KTtcbiAgfSk7XG59XG5mdW5jdGlvbiBkZXN0cm95VHJlZShyb290LCB3YWxrZXIgPSB3YWxrKSB7XG4gIHdhbGtlcihyb290LCAoZWwpID0+IHtcbiAgICBjbGVhbnVwRWxlbWVudChlbCk7XG4gICAgY2xlYW51cEF0dHJpYnV0ZXMoZWwpO1xuICAgIGRlbGV0ZSBlbC5feF9tYXJrZXI7XG4gIH0pO1xufVxuZnVuY3Rpb24gd2FybkFib3V0TWlzc2luZ1BsdWdpbnMoKSB7XG4gIGxldCBwbHVnaW5EaXJlY3RpdmVzID0gW1xuICAgIFtcInVpXCIsIFwiZGlhbG9nXCIsIFtcIlt4LWRpYWxvZ10sIFt4LXBvcG92ZXJdXCJdXSxcbiAgICBbXCJhbmNob3JcIiwgXCJhbmNob3JcIiwgW1wiW3gtYW5jaG9yXVwiXV0sXG4gICAgW1wic29ydFwiLCBcInNvcnRcIiwgW1wiW3gtc29ydF1cIl1dXG4gIF07XG4gIHBsdWdpbkRpcmVjdGl2ZXMuZm9yRWFjaCgoW3BsdWdpbjIsIGRpcmVjdGl2ZTIsIHNlbGVjdG9yc10pID0+IHtcbiAgICBpZiAoZGlyZWN0aXZlRXhpc3RzKGRpcmVjdGl2ZTIpKVxuICAgICAgcmV0dXJuO1xuICAgIHNlbGVjdG9ycy5zb21lKChzZWxlY3RvcikgPT4ge1xuICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpKSB7XG4gICAgICAgIHdhcm4oYGZvdW5kIFwiJHtzZWxlY3Rvcn1cIiwgYnV0IG1pc3NpbmcgJHtwbHVnaW4yfSBwbHVnaW5gKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvbmV4dFRpY2suanNcbnZhciB0aWNrU3RhY2sgPSBbXTtcbnZhciBpc0hvbGRpbmcgPSBmYWxzZTtcbmZ1bmN0aW9uIG5leHRUaWNrKGNhbGxiYWNrID0gKCkgPT4ge1xufSkge1xuICBxdWV1ZU1pY3JvdGFzaygoKSA9PiB7XG4gICAgaXNIb2xkaW5nIHx8IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgcmVsZWFzZU5leHRUaWNrcygpO1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMpID0+IHtcbiAgICB0aWNrU3RhY2sucHVzaCgoKSA9PiB7XG4gICAgICBjYWxsYmFjaygpO1xuICAgICAgcmVzKCk7XG4gICAgfSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gcmVsZWFzZU5leHRUaWNrcygpIHtcbiAgaXNIb2xkaW5nID0gZmFsc2U7XG4gIHdoaWxlICh0aWNrU3RhY2subGVuZ3RoKVxuICAgIHRpY2tTdGFjay5zaGlmdCgpKCk7XG59XG5mdW5jdGlvbiBob2xkTmV4dFRpY2tzKCkge1xuICBpc0hvbGRpbmcgPSB0cnVlO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvdXRpbHMvY2xhc3Nlcy5qc1xuZnVuY3Rpb24gc2V0Q2xhc3NlcyhlbCwgdmFsdWUpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIHNldENsYXNzZXNGcm9tU3RyaW5nKGVsLCB2YWx1ZS5qb2luKFwiIFwiKSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9PSBudWxsKSB7XG4gICAgcmV0dXJuIHNldENsYXNzZXNGcm9tT2JqZWN0KGVsLCB2YWx1ZSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICByZXR1cm4gc2V0Q2xhc3NlcyhlbCwgdmFsdWUoKSk7XG4gIH1cbiAgcmV0dXJuIHNldENsYXNzZXNGcm9tU3RyaW5nKGVsLCB2YWx1ZSk7XG59XG5mdW5jdGlvbiBzZXRDbGFzc2VzRnJvbVN0cmluZyhlbCwgY2xhc3NTdHJpbmcpIHtcbiAgbGV0IHNwbGl0ID0gKGNsYXNzU3RyaW5nMikgPT4gY2xhc3NTdHJpbmcyLnNwbGl0KFwiIFwiKS5maWx0ZXIoQm9vbGVhbik7XG4gIGxldCBtaXNzaW5nQ2xhc3NlcyA9IChjbGFzc1N0cmluZzIpID0+IGNsYXNzU3RyaW5nMi5zcGxpdChcIiBcIikuZmlsdGVyKChpKSA9PiAhZWwuY2xhc3NMaXN0LmNvbnRhaW5zKGkpKS5maWx0ZXIoQm9vbGVhbik7XG4gIGxldCBhZGRDbGFzc2VzQW5kUmV0dXJuVW5kbyA9IChjbGFzc2VzKSA9PiB7XG4gICAgZWwuY2xhc3NMaXN0LmFkZCguLi5jbGFzc2VzKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSguLi5jbGFzc2VzKTtcbiAgICB9O1xuICB9O1xuICBjbGFzc1N0cmluZyA9IGNsYXNzU3RyaW5nID09PSB0cnVlID8gY2xhc3NTdHJpbmcgPSBcIlwiIDogY2xhc3NTdHJpbmcgfHwgXCJcIjtcbiAgcmV0dXJuIGFkZENsYXNzZXNBbmRSZXR1cm5VbmRvKG1pc3NpbmdDbGFzc2VzKGNsYXNzU3RyaW5nKSk7XG59XG5mdW5jdGlvbiBzZXRDbGFzc2VzRnJvbU9iamVjdChlbCwgY2xhc3NPYmplY3QpIHtcbiAgbGV0IHNwbGl0ID0gKGNsYXNzU3RyaW5nKSA9PiBjbGFzc1N0cmluZy5zcGxpdChcIiBcIikuZmlsdGVyKEJvb2xlYW4pO1xuICBsZXQgZm9yQWRkID0gT2JqZWN0LmVudHJpZXMoY2xhc3NPYmplY3QpLmZsYXRNYXAoKFtjbGFzc1N0cmluZywgYm9vbF0pID0+IGJvb2wgPyBzcGxpdChjbGFzc1N0cmluZykgOiBmYWxzZSkuZmlsdGVyKEJvb2xlYW4pO1xuICBsZXQgZm9yUmVtb3ZlID0gT2JqZWN0LmVudHJpZXMoY2xhc3NPYmplY3QpLmZsYXRNYXAoKFtjbGFzc1N0cmluZywgYm9vbF0pID0+ICFib29sID8gc3BsaXQoY2xhc3NTdHJpbmcpIDogZmFsc2UpLmZpbHRlcihCb29sZWFuKTtcbiAgbGV0IGFkZGVkID0gW107XG4gIGxldCByZW1vdmVkID0gW107XG4gIGZvclJlbW92ZS5mb3JFYWNoKChpKSA9PiB7XG4gICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucyhpKSkge1xuICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZShpKTtcbiAgICAgIHJlbW92ZWQucHVzaChpKTtcbiAgICB9XG4gIH0pO1xuICBmb3JBZGQuZm9yRWFjaCgoaSkgPT4ge1xuICAgIGlmICghZWwuY2xhc3NMaXN0LmNvbnRhaW5zKGkpKSB7XG4gICAgICBlbC5jbGFzc0xpc3QuYWRkKGkpO1xuICAgICAgYWRkZWQucHVzaChpKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIHJlbW92ZWQuZm9yRWFjaCgoaSkgPT4gZWwuY2xhc3NMaXN0LmFkZChpKSk7XG4gICAgYWRkZWQuZm9yRWFjaCgoaSkgPT4gZWwuY2xhc3NMaXN0LnJlbW92ZShpKSk7XG4gIH07XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy91dGlscy9zdHlsZXMuanNcbmZ1bmN0aW9uIHNldFN0eWxlcyhlbCwgdmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAhPT0gbnVsbCkge1xuICAgIHJldHVybiBzZXRTdHlsZXNGcm9tT2JqZWN0KGVsLCB2YWx1ZSk7XG4gIH1cbiAgcmV0dXJuIHNldFN0eWxlc0Zyb21TdHJpbmcoZWwsIHZhbHVlKTtcbn1cbmZ1bmN0aW9uIHNldFN0eWxlc0Zyb21PYmplY3QoZWwsIHZhbHVlKSB7XG4gIGxldCBwcmV2aW91c1N0eWxlcyA9IHt9O1xuICBPYmplY3QuZW50cmllcyh2YWx1ZSkuZm9yRWFjaCgoW2tleSwgdmFsdWUyXSkgPT4ge1xuICAgIHByZXZpb3VzU3R5bGVzW2tleV0gPSBlbC5zdHlsZVtrZXldO1xuICAgIGlmICgha2V5LnN0YXJ0c1dpdGgoXCItLVwiKSkge1xuICAgICAga2V5ID0ga2ViYWJDYXNlKGtleSk7XG4gICAgfVxuICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KGtleSwgdmFsdWUyKTtcbiAgfSk7XG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGlmIChlbC5zdHlsZS5sZW5ndGggPT09IDApIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShcInN0eWxlXCIpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgc2V0U3R5bGVzKGVsLCBwcmV2aW91c1N0eWxlcyk7XG4gIH07XG59XG5mdW5jdGlvbiBzZXRTdHlsZXNGcm9tU3RyaW5nKGVsLCB2YWx1ZSkge1xuICBsZXQgY2FjaGUgPSBlbC5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCB2YWx1ZSk7XG4gIGVsLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIHZhbHVlKTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBlbC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBjYWNoZSB8fCBcIlwiKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGtlYmFiQ2FzZShzdWJqZWN0KSB7XG4gIHJldHVybiBzdWJqZWN0LnJlcGxhY2UoLyhbYS16XSkoW0EtWl0pL2csIFwiJDEtJDJcIikudG9Mb3dlckNhc2UoKTtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL3V0aWxzL29uY2UuanNcbmZ1bmN0aW9uIG9uY2UoY2FsbGJhY2ssIGZhbGxiYWNrID0gKCkgPT4ge1xufSkge1xuICBsZXQgY2FsbGVkID0gZmFsc2U7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBpZiAoIWNhbGxlZCkge1xuICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9O1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvZGlyZWN0aXZlcy94LXRyYW5zaXRpb24uanNcbmRpcmVjdGl2ZShcInRyYW5zaXRpb25cIiwgKGVsLCB7IHZhbHVlLCBtb2RpZmllcnMsIGV4cHJlc3Npb24gfSwgeyBldmFsdWF0ZTogZXZhbHVhdGUyIH0pID0+IHtcbiAgaWYgKHR5cGVvZiBleHByZXNzaW9uID09PSBcImZ1bmN0aW9uXCIpXG4gICAgZXhwcmVzc2lvbiA9IGV2YWx1YXRlMihleHByZXNzaW9uKTtcbiAgaWYgKGV4cHJlc3Npb24gPT09IGZhbHNlKVxuICAgIHJldHVybjtcbiAgaWYgKCFleHByZXNzaW9uIHx8IHR5cGVvZiBleHByZXNzaW9uID09PSBcImJvb2xlYW5cIikge1xuICAgIHJlZ2lzdGVyVHJhbnNpdGlvbnNGcm9tSGVscGVyKGVsLCBtb2RpZmllcnMsIHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICByZWdpc3RlclRyYW5zaXRpb25zRnJvbUNsYXNzU3RyaW5nKGVsLCBleHByZXNzaW9uLCB2YWx1ZSk7XG4gIH1cbn0pO1xuZnVuY3Rpb24gcmVnaXN0ZXJUcmFuc2l0aW9uc0Zyb21DbGFzc1N0cmluZyhlbCwgY2xhc3NTdHJpbmcsIHN0YWdlKSB7XG4gIHJlZ2lzdGVyVHJhbnNpdGlvbk9iamVjdChlbCwgc2V0Q2xhc3NlcywgXCJcIik7XG4gIGxldCBkaXJlY3RpdmVTdG9yYWdlTWFwID0ge1xuICAgIFwiZW50ZXJcIjogKGNsYXNzZXMpID0+IHtcbiAgICAgIGVsLl94X3RyYW5zaXRpb24uZW50ZXIuZHVyaW5nID0gY2xhc3NlcztcbiAgICB9LFxuICAgIFwiZW50ZXItc3RhcnRcIjogKGNsYXNzZXMpID0+IHtcbiAgICAgIGVsLl94X3RyYW5zaXRpb24uZW50ZXIuc3RhcnQgPSBjbGFzc2VzO1xuICAgIH0sXG4gICAgXCJlbnRlci1lbmRcIjogKGNsYXNzZXMpID0+IHtcbiAgICAgIGVsLl94X3RyYW5zaXRpb24uZW50ZXIuZW5kID0gY2xhc3NlcztcbiAgICB9LFxuICAgIFwibGVhdmVcIjogKGNsYXNzZXMpID0+IHtcbiAgICAgIGVsLl94X3RyYW5zaXRpb24ubGVhdmUuZHVyaW5nID0gY2xhc3NlcztcbiAgICB9LFxuICAgIFwibGVhdmUtc3RhcnRcIjogKGNsYXNzZXMpID0+IHtcbiAgICAgIGVsLl94X3RyYW5zaXRpb24ubGVhdmUuc3RhcnQgPSBjbGFzc2VzO1xuICAgIH0sXG4gICAgXCJsZWF2ZS1lbmRcIjogKGNsYXNzZXMpID0+IHtcbiAgICAgIGVsLl94X3RyYW5zaXRpb24ubGVhdmUuZW5kID0gY2xhc3NlcztcbiAgICB9XG4gIH07XG4gIGRpcmVjdGl2ZVN0b3JhZ2VNYXBbc3RhZ2VdKGNsYXNzU3RyaW5nKTtcbn1cbmZ1bmN0aW9uIHJlZ2lzdGVyVHJhbnNpdGlvbnNGcm9tSGVscGVyKGVsLCBtb2RpZmllcnMsIHN0YWdlKSB7XG4gIHJlZ2lzdGVyVHJhbnNpdGlvbk9iamVjdChlbCwgc2V0U3R5bGVzKTtcbiAgbGV0IGRvZXNudFNwZWNpZnkgPSAhbW9kaWZpZXJzLmluY2x1ZGVzKFwiaW5cIikgJiYgIW1vZGlmaWVycy5pbmNsdWRlcyhcIm91dFwiKSAmJiAhc3RhZ2U7XG4gIGxldCB0cmFuc2l0aW9uaW5nSW4gPSBkb2VzbnRTcGVjaWZ5IHx8IG1vZGlmaWVycy5pbmNsdWRlcyhcImluXCIpIHx8IFtcImVudGVyXCJdLmluY2x1ZGVzKHN0YWdlKTtcbiAgbGV0IHRyYW5zaXRpb25pbmdPdXQgPSBkb2VzbnRTcGVjaWZ5IHx8IG1vZGlmaWVycy5pbmNsdWRlcyhcIm91dFwiKSB8fCBbXCJsZWF2ZVwiXS5pbmNsdWRlcyhzdGFnZSk7XG4gIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoXCJpblwiKSAmJiAhZG9lc250U3BlY2lmeSkge1xuICAgIG1vZGlmaWVycyA9IG1vZGlmaWVycy5maWx0ZXIoKGksIGluZGV4KSA9PiBpbmRleCA8IG1vZGlmaWVycy5pbmRleE9mKFwib3V0XCIpKTtcbiAgfVxuICBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKFwib3V0XCIpICYmICFkb2VzbnRTcGVjaWZ5KSB7XG4gICAgbW9kaWZpZXJzID0gbW9kaWZpZXJzLmZpbHRlcigoaSwgaW5kZXgpID0+IGluZGV4ID4gbW9kaWZpZXJzLmluZGV4T2YoXCJvdXRcIikpO1xuICB9XG4gIGxldCB3YW50c0FsbCA9ICFtb2RpZmllcnMuaW5jbHVkZXMoXCJvcGFjaXR5XCIpICYmICFtb2RpZmllcnMuaW5jbHVkZXMoXCJzY2FsZVwiKTtcbiAgbGV0IHdhbnRzT3BhY2l0eSA9IHdhbnRzQWxsIHx8IG1vZGlmaWVycy5pbmNsdWRlcyhcIm9wYWNpdHlcIik7XG4gIGxldCB3YW50c1NjYWxlID0gd2FudHNBbGwgfHwgbW9kaWZpZXJzLmluY2x1ZGVzKFwic2NhbGVcIik7XG4gIGxldCBvcGFjaXR5VmFsdWUgPSB3YW50c09wYWNpdHkgPyAwIDogMTtcbiAgbGV0IHNjYWxlVmFsdWUgPSB3YW50c1NjYWxlID8gbW9kaWZpZXJWYWx1ZShtb2RpZmllcnMsIFwic2NhbGVcIiwgOTUpIC8gMTAwIDogMTtcbiAgbGV0IGRlbGF5ID0gbW9kaWZpZXJWYWx1ZShtb2RpZmllcnMsIFwiZGVsYXlcIiwgMCkgLyAxZTM7XG4gIGxldCBvcmlnaW4gPSBtb2RpZmllclZhbHVlKG1vZGlmaWVycywgXCJvcmlnaW5cIiwgXCJjZW50ZXJcIik7XG4gIGxldCBwcm9wZXJ0eSA9IFwib3BhY2l0eSwgdHJhbnNmb3JtXCI7XG4gIGxldCBkdXJhdGlvbkluID0gbW9kaWZpZXJWYWx1ZShtb2RpZmllcnMsIFwiZHVyYXRpb25cIiwgMTUwKSAvIDFlMztcbiAgbGV0IGR1cmF0aW9uT3V0ID0gbW9kaWZpZXJWYWx1ZShtb2RpZmllcnMsIFwiZHVyYXRpb25cIiwgNzUpIC8gMWUzO1xuICBsZXQgZWFzaW5nID0gYGN1YmljLWJlemllcigwLjQsIDAuMCwgMC4yLCAxKWA7XG4gIGlmICh0cmFuc2l0aW9uaW5nSW4pIHtcbiAgICBlbC5feF90cmFuc2l0aW9uLmVudGVyLmR1cmluZyA9IHtcbiAgICAgIHRyYW5zZm9ybU9yaWdpbjogb3JpZ2luLFxuICAgICAgdHJhbnNpdGlvbkRlbGF5OiBgJHtkZWxheX1zYCxcbiAgICAgIHRyYW5zaXRpb25Qcm9wZXJ0eTogcHJvcGVydHksXG4gICAgICB0cmFuc2l0aW9uRHVyYXRpb246IGAke2R1cmF0aW9uSW59c2AsXG4gICAgICB0cmFuc2l0aW9uVGltaW5nRnVuY3Rpb246IGVhc2luZ1xuICAgIH07XG4gICAgZWwuX3hfdHJhbnNpdGlvbi5lbnRlci5zdGFydCA9IHtcbiAgICAgIG9wYWNpdHk6IG9wYWNpdHlWYWx1ZSxcbiAgICAgIHRyYW5zZm9ybTogYHNjYWxlKCR7c2NhbGVWYWx1ZX0pYFxuICAgIH07XG4gICAgZWwuX3hfdHJhbnNpdGlvbi5lbnRlci5lbmQgPSB7XG4gICAgICBvcGFjaXR5OiAxLFxuICAgICAgdHJhbnNmb3JtOiBgc2NhbGUoMSlgXG4gICAgfTtcbiAgfVxuICBpZiAodHJhbnNpdGlvbmluZ091dCkge1xuICAgIGVsLl94X3RyYW5zaXRpb24ubGVhdmUuZHVyaW5nID0ge1xuICAgICAgdHJhbnNmb3JtT3JpZ2luOiBvcmlnaW4sXG4gICAgICB0cmFuc2l0aW9uRGVsYXk6IGAke2RlbGF5fXNgLFxuICAgICAgdHJhbnNpdGlvblByb3BlcnR5OiBwcm9wZXJ0eSxcbiAgICAgIHRyYW5zaXRpb25EdXJhdGlvbjogYCR7ZHVyYXRpb25PdXR9c2AsXG4gICAgICB0cmFuc2l0aW9uVGltaW5nRnVuY3Rpb246IGVhc2luZ1xuICAgIH07XG4gICAgZWwuX3hfdHJhbnNpdGlvbi5sZWF2ZS5zdGFydCA9IHtcbiAgICAgIG9wYWNpdHk6IDEsXG4gICAgICB0cmFuc2Zvcm06IGBzY2FsZSgxKWBcbiAgICB9O1xuICAgIGVsLl94X3RyYW5zaXRpb24ubGVhdmUuZW5kID0ge1xuICAgICAgb3BhY2l0eTogb3BhY2l0eVZhbHVlLFxuICAgICAgdHJhbnNmb3JtOiBgc2NhbGUoJHtzY2FsZVZhbHVlfSlgXG4gICAgfTtcbiAgfVxufVxuZnVuY3Rpb24gcmVnaXN0ZXJUcmFuc2l0aW9uT2JqZWN0KGVsLCBzZXRGdW5jdGlvbiwgZGVmYXVsdFZhbHVlID0ge30pIHtcbiAgaWYgKCFlbC5feF90cmFuc2l0aW9uKVxuICAgIGVsLl94X3RyYW5zaXRpb24gPSB7XG4gICAgICBlbnRlcjogeyBkdXJpbmc6IGRlZmF1bHRWYWx1ZSwgc3RhcnQ6IGRlZmF1bHRWYWx1ZSwgZW5kOiBkZWZhdWx0VmFsdWUgfSxcbiAgICAgIGxlYXZlOiB7IGR1cmluZzogZGVmYXVsdFZhbHVlLCBzdGFydDogZGVmYXVsdFZhbHVlLCBlbmQ6IGRlZmF1bHRWYWx1ZSB9LFxuICAgICAgaW4oYmVmb3JlID0gKCkgPT4ge1xuICAgICAgfSwgYWZ0ZXIgPSAoKSA9PiB7XG4gICAgICB9KSB7XG4gICAgICAgIHRyYW5zaXRpb24oZWwsIHNldEZ1bmN0aW9uLCB7XG4gICAgICAgICAgZHVyaW5nOiB0aGlzLmVudGVyLmR1cmluZyxcbiAgICAgICAgICBzdGFydDogdGhpcy5lbnRlci5zdGFydCxcbiAgICAgICAgICBlbmQ6IHRoaXMuZW50ZXIuZW5kXG4gICAgICAgIH0sIGJlZm9yZSwgYWZ0ZXIpO1xuICAgICAgfSxcbiAgICAgIG91dChiZWZvcmUgPSAoKSA9PiB7XG4gICAgICB9LCBhZnRlciA9ICgpID0+IHtcbiAgICAgIH0pIHtcbiAgICAgICAgdHJhbnNpdGlvbihlbCwgc2V0RnVuY3Rpb24sIHtcbiAgICAgICAgICBkdXJpbmc6IHRoaXMubGVhdmUuZHVyaW5nLFxuICAgICAgICAgIHN0YXJ0OiB0aGlzLmxlYXZlLnN0YXJ0LFxuICAgICAgICAgIGVuZDogdGhpcy5sZWF2ZS5lbmRcbiAgICAgICAgfSwgYmVmb3JlLCBhZnRlcik7XG4gICAgICB9XG4gICAgfTtcbn1cbndpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5feF90b2dnbGVBbmRDYXNjYWRlV2l0aFRyYW5zaXRpb25zID0gZnVuY3Rpb24oZWwsIHZhbHVlLCBzaG93LCBoaWRlKSB7XG4gIGNvbnN0IG5leHRUaWNrMiA9IGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gXCJ2aXNpYmxlXCIgPyByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgOiBzZXRUaW1lb3V0O1xuICBsZXQgY2xpY2tBd2F5Q29tcGF0aWJsZVNob3cgPSAoKSA9PiBuZXh0VGljazIoc2hvdyk7XG4gIGlmICh2YWx1ZSkge1xuICAgIGlmIChlbC5feF90cmFuc2l0aW9uICYmIChlbC5feF90cmFuc2l0aW9uLmVudGVyIHx8IGVsLl94X3RyYW5zaXRpb24ubGVhdmUpKSB7XG4gICAgICBlbC5feF90cmFuc2l0aW9uLmVudGVyICYmIChPYmplY3QuZW50cmllcyhlbC5feF90cmFuc2l0aW9uLmVudGVyLmR1cmluZykubGVuZ3RoIHx8IE9iamVjdC5lbnRyaWVzKGVsLl94X3RyYW5zaXRpb24uZW50ZXIuc3RhcnQpLmxlbmd0aCB8fCBPYmplY3QuZW50cmllcyhlbC5feF90cmFuc2l0aW9uLmVudGVyLmVuZCkubGVuZ3RoKSA/IGVsLl94X3RyYW5zaXRpb24uaW4oc2hvdykgOiBjbGlja0F3YXlDb21wYXRpYmxlU2hvdygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbC5feF90cmFuc2l0aW9uID8gZWwuX3hfdHJhbnNpdGlvbi5pbihzaG93KSA6IGNsaWNrQXdheUNvbXBhdGlibGVTaG93KCk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuICBlbC5feF9oaWRlUHJvbWlzZSA9IGVsLl94X3RyYW5zaXRpb24gPyBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgZWwuX3hfdHJhbnNpdGlvbi5vdXQoKCkgPT4ge1xuICAgIH0sICgpID0+IHJlc29sdmUoaGlkZSkpO1xuICAgIGVsLl94X3RyYW5zaXRpb25pbmcgJiYgZWwuX3hfdHJhbnNpdGlvbmluZy5iZWZvcmVDYW5jZWwoKCkgPT4gcmVqZWN0KHsgaXNGcm9tQ2FuY2VsbGVkVHJhbnNpdGlvbjogdHJ1ZSB9KSk7XG4gIH0pIDogUHJvbWlzZS5yZXNvbHZlKGhpZGUpO1xuICBxdWV1ZU1pY3JvdGFzaygoKSA9PiB7XG4gICAgbGV0IGNsb3Nlc3QgPSBjbG9zZXN0SGlkZShlbCk7XG4gICAgaWYgKGNsb3Nlc3QpIHtcbiAgICAgIGlmICghY2xvc2VzdC5feF9oaWRlQ2hpbGRyZW4pXG4gICAgICAgIGNsb3Nlc3QuX3hfaGlkZUNoaWxkcmVuID0gW107XG4gICAgICBjbG9zZXN0Ll94X2hpZGVDaGlsZHJlbi5wdXNoKGVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV4dFRpY2syKCgpID0+IHtcbiAgICAgICAgbGV0IGhpZGVBZnRlckNoaWxkcmVuID0gKGVsMikgPT4ge1xuICAgICAgICAgIGxldCBjYXJyeSA9IFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgIGVsMi5feF9oaWRlUHJvbWlzZSxcbiAgICAgICAgICAgIC4uLihlbDIuX3hfaGlkZUNoaWxkcmVuIHx8IFtdKS5tYXAoaGlkZUFmdGVyQ2hpbGRyZW4pXG4gICAgICAgICAgXSkudGhlbigoW2ldKSA9PiBpPy4oKSk7XG4gICAgICAgICAgZGVsZXRlIGVsMi5feF9oaWRlUHJvbWlzZTtcbiAgICAgICAgICBkZWxldGUgZWwyLl94X2hpZGVDaGlsZHJlbjtcbiAgICAgICAgICByZXR1cm4gY2Fycnk7XG4gICAgICAgIH07XG4gICAgICAgIGhpZGVBZnRlckNoaWxkcmVuKGVsKS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgIGlmICghZS5pc0Zyb21DYW5jZWxsZWRUcmFuc2l0aW9uKVxuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufTtcbmZ1bmN0aW9uIGNsb3Nlc3RIaWRlKGVsKSB7XG4gIGxldCBwYXJlbnQgPSBlbC5wYXJlbnROb2RlO1xuICBpZiAoIXBhcmVudClcbiAgICByZXR1cm47XG4gIHJldHVybiBwYXJlbnQuX3hfaGlkZVByb21pc2UgPyBwYXJlbnQgOiBjbG9zZXN0SGlkZShwYXJlbnQpO1xufVxuZnVuY3Rpb24gdHJhbnNpdGlvbihlbCwgc2V0RnVuY3Rpb24sIHsgZHVyaW5nLCBzdGFydDogc3RhcnQyLCBlbmQgfSA9IHt9LCBiZWZvcmUgPSAoKSA9PiB7XG59LCBhZnRlciA9ICgpID0+IHtcbn0pIHtcbiAgaWYgKGVsLl94X3RyYW5zaXRpb25pbmcpXG4gICAgZWwuX3hfdHJhbnNpdGlvbmluZy5jYW5jZWwoKTtcbiAgaWYgKE9iamVjdC5rZXlzKGR1cmluZykubGVuZ3RoID09PSAwICYmIE9iamVjdC5rZXlzKHN0YXJ0MikubGVuZ3RoID09PSAwICYmIE9iamVjdC5rZXlzKGVuZCkubGVuZ3RoID09PSAwKSB7XG4gICAgYmVmb3JlKCk7XG4gICAgYWZ0ZXIoKTtcbiAgICByZXR1cm47XG4gIH1cbiAgbGV0IHVuZG9TdGFydCwgdW5kb0R1cmluZywgdW5kb0VuZDtcbiAgcGVyZm9ybVRyYW5zaXRpb24oZWwsIHtcbiAgICBzdGFydCgpIHtcbiAgICAgIHVuZG9TdGFydCA9IHNldEZ1bmN0aW9uKGVsLCBzdGFydDIpO1xuICAgIH0sXG4gICAgZHVyaW5nKCkge1xuICAgICAgdW5kb0R1cmluZyA9IHNldEZ1bmN0aW9uKGVsLCBkdXJpbmcpO1xuICAgIH0sXG4gICAgYmVmb3JlLFxuICAgIGVuZCgpIHtcbiAgICAgIHVuZG9TdGFydCgpO1xuICAgICAgdW5kb0VuZCA9IHNldEZ1bmN0aW9uKGVsLCBlbmQpO1xuICAgIH0sXG4gICAgYWZ0ZXIsXG4gICAgY2xlYW51cCgpIHtcbiAgICAgIHVuZG9EdXJpbmcoKTtcbiAgICAgIHVuZG9FbmQoKTtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gcGVyZm9ybVRyYW5zaXRpb24oZWwsIHN0YWdlcykge1xuICBsZXQgaW50ZXJydXB0ZWQsIHJlYWNoZWRCZWZvcmUsIHJlYWNoZWRFbmQ7XG4gIGxldCBmaW5pc2ggPSBvbmNlKCgpID0+IHtcbiAgICBtdXRhdGVEb20oKCkgPT4ge1xuICAgICAgaW50ZXJydXB0ZWQgPSB0cnVlO1xuICAgICAgaWYgKCFyZWFjaGVkQmVmb3JlKVxuICAgICAgICBzdGFnZXMuYmVmb3JlKCk7XG4gICAgICBpZiAoIXJlYWNoZWRFbmQpIHtcbiAgICAgICAgc3RhZ2VzLmVuZCgpO1xuICAgICAgICByZWxlYXNlTmV4dFRpY2tzKCk7XG4gICAgICB9XG4gICAgICBzdGFnZXMuYWZ0ZXIoKTtcbiAgICAgIGlmIChlbC5pc0Nvbm5lY3RlZClcbiAgICAgICAgc3RhZ2VzLmNsZWFudXAoKTtcbiAgICAgIGRlbGV0ZSBlbC5feF90cmFuc2l0aW9uaW5nO1xuICAgIH0pO1xuICB9KTtcbiAgZWwuX3hfdHJhbnNpdGlvbmluZyA9IHtcbiAgICBiZWZvcmVDYW5jZWxzOiBbXSxcbiAgICBiZWZvcmVDYW5jZWwoY2FsbGJhY2spIHtcbiAgICAgIHRoaXMuYmVmb3JlQ2FuY2Vscy5wdXNoKGNhbGxiYWNrKTtcbiAgICB9LFxuICAgIGNhbmNlbDogb25jZShmdW5jdGlvbigpIHtcbiAgICAgIHdoaWxlICh0aGlzLmJlZm9yZUNhbmNlbHMubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuYmVmb3JlQ2FuY2Vscy5zaGlmdCgpKCk7XG4gICAgICB9XG4gICAgICA7XG4gICAgICBmaW5pc2goKTtcbiAgICB9KSxcbiAgICBmaW5pc2hcbiAgfTtcbiAgbXV0YXRlRG9tKCgpID0+IHtcbiAgICBzdGFnZXMuc3RhcnQoKTtcbiAgICBzdGFnZXMuZHVyaW5nKCk7XG4gIH0pO1xuICBob2xkTmV4dFRpY2tzKCk7XG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgaWYgKGludGVycnVwdGVkKVxuICAgICAgcmV0dXJuO1xuICAgIGxldCBkdXJhdGlvbiA9IE51bWJlcihnZXRDb21wdXRlZFN0eWxlKGVsKS50cmFuc2l0aW9uRHVyYXRpb24ucmVwbGFjZSgvLC4qLywgXCJcIikucmVwbGFjZShcInNcIiwgXCJcIikpICogMWUzO1xuICAgIGxldCBkZWxheSA9IE51bWJlcihnZXRDb21wdXRlZFN0eWxlKGVsKS50cmFuc2l0aW9uRGVsYXkucmVwbGFjZSgvLC4qLywgXCJcIikucmVwbGFjZShcInNcIiwgXCJcIikpICogMWUzO1xuICAgIGlmIChkdXJhdGlvbiA9PT0gMClcbiAgICAgIGR1cmF0aW9uID0gTnVtYmVyKGdldENvbXB1dGVkU3R5bGUoZWwpLmFuaW1hdGlvbkR1cmF0aW9uLnJlcGxhY2UoXCJzXCIsIFwiXCIpKSAqIDFlMztcbiAgICBtdXRhdGVEb20oKCkgPT4ge1xuICAgICAgc3RhZ2VzLmJlZm9yZSgpO1xuICAgIH0pO1xuICAgIHJlYWNoZWRCZWZvcmUgPSB0cnVlO1xuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICBpZiAoaW50ZXJydXB0ZWQpXG4gICAgICAgIHJldHVybjtcbiAgICAgIG11dGF0ZURvbSgoKSA9PiB7XG4gICAgICAgIHN0YWdlcy5lbmQoKTtcbiAgICAgIH0pO1xuICAgICAgcmVsZWFzZU5leHRUaWNrcygpO1xuICAgICAgc2V0VGltZW91dChlbC5feF90cmFuc2l0aW9uaW5nLmZpbmlzaCwgZHVyYXRpb24gKyBkZWxheSk7XG4gICAgICByZWFjaGVkRW5kID0gdHJ1ZTtcbiAgICB9KTtcbiAgfSk7XG59XG5mdW5jdGlvbiBtb2RpZmllclZhbHVlKG1vZGlmaWVycywga2V5LCBmYWxsYmFjaykge1xuICBpZiAobW9kaWZpZXJzLmluZGV4T2Yoa2V5KSA9PT0gLTEpXG4gICAgcmV0dXJuIGZhbGxiYWNrO1xuICBjb25zdCByYXdWYWx1ZSA9IG1vZGlmaWVyc1ttb2RpZmllcnMuaW5kZXhPZihrZXkpICsgMV07XG4gIGlmICghcmF3VmFsdWUpXG4gICAgcmV0dXJuIGZhbGxiYWNrO1xuICBpZiAoa2V5ID09PSBcInNjYWxlXCIpIHtcbiAgICBpZiAoaXNOYU4ocmF3VmFsdWUpKVxuICAgICAgcmV0dXJuIGZhbGxiYWNrO1xuICB9XG4gIGlmIChrZXkgPT09IFwiZHVyYXRpb25cIiB8fCBrZXkgPT09IFwiZGVsYXlcIikge1xuICAgIGxldCBtYXRjaCA9IHJhd1ZhbHVlLm1hdGNoKC8oWzAtOV0rKW1zLyk7XG4gICAgaWYgKG1hdGNoKVxuICAgICAgcmV0dXJuIG1hdGNoWzFdO1xuICB9XG4gIGlmIChrZXkgPT09IFwib3JpZ2luXCIpIHtcbiAgICBpZiAoW1widG9wXCIsIFwicmlnaHRcIiwgXCJsZWZ0XCIsIFwiY2VudGVyXCIsIFwiYm90dG9tXCJdLmluY2x1ZGVzKG1vZGlmaWVyc1ttb2RpZmllcnMuaW5kZXhPZihrZXkpICsgMl0pKSB7XG4gICAgICByZXR1cm4gW3Jhd1ZhbHVlLCBtb2RpZmllcnNbbW9kaWZpZXJzLmluZGV4T2Yoa2V5KSArIDJdXS5qb2luKFwiIFwiKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJhd1ZhbHVlO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvY2xvbmUuanNcbnZhciBpc0Nsb25pbmcgPSBmYWxzZTtcbmZ1bmN0aW9uIHNraXBEdXJpbmdDbG9uZShjYWxsYmFjaywgZmFsbGJhY2sgPSAoKSA9PiB7XG59KSB7XG4gIHJldHVybiAoLi4uYXJncykgPT4gaXNDbG9uaW5nID8gZmFsbGJhY2soLi4uYXJncykgOiBjYWxsYmFjayguLi5hcmdzKTtcbn1cbmZ1bmN0aW9uIG9ubHlEdXJpbmdDbG9uZShjYWxsYmFjaykge1xuICByZXR1cm4gKC4uLmFyZ3MpID0+IGlzQ2xvbmluZyAmJiBjYWxsYmFjayguLi5hcmdzKTtcbn1cbnZhciBpbnRlcmNlcHRvcnMgPSBbXTtcbmZ1bmN0aW9uIGludGVyY2VwdENsb25lKGNhbGxiYWNrKSB7XG4gIGludGVyY2VwdG9ycy5wdXNoKGNhbGxiYWNrKTtcbn1cbmZ1bmN0aW9uIGNsb25lTm9kZShmcm9tLCB0bykge1xuICBpbnRlcmNlcHRvcnMuZm9yRWFjaCgoaSkgPT4gaShmcm9tLCB0bykpO1xuICBpc0Nsb25pbmcgPSB0cnVlO1xuICBkb250UmVnaXN0ZXJSZWFjdGl2ZVNpZGVFZmZlY3RzKCgpID0+IHtcbiAgICBpbml0VHJlZSh0bywgKGVsLCBjYWxsYmFjaykgPT4ge1xuICAgICAgY2FsbGJhY2soZWwsICgpID0+IHtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbiAgaXNDbG9uaW5nID0gZmFsc2U7XG59XG52YXIgaXNDbG9uaW5nTGVnYWN5ID0gZmFsc2U7XG5mdW5jdGlvbiBjbG9uZShvbGRFbCwgbmV3RWwpIHtcbiAgaWYgKCFuZXdFbC5feF9kYXRhU3RhY2spXG4gICAgbmV3RWwuX3hfZGF0YVN0YWNrID0gb2xkRWwuX3hfZGF0YVN0YWNrO1xuICBpc0Nsb25pbmcgPSB0cnVlO1xuICBpc0Nsb25pbmdMZWdhY3kgPSB0cnVlO1xuICBkb250UmVnaXN0ZXJSZWFjdGl2ZVNpZGVFZmZlY3RzKCgpID0+IHtcbiAgICBjbG9uZVRyZWUobmV3RWwpO1xuICB9KTtcbiAgaXNDbG9uaW5nID0gZmFsc2U7XG4gIGlzQ2xvbmluZ0xlZ2FjeSA9IGZhbHNlO1xufVxuZnVuY3Rpb24gY2xvbmVUcmVlKGVsKSB7XG4gIGxldCBoYXNSdW5UaHJvdWdoRmlyc3RFbCA9IGZhbHNlO1xuICBsZXQgc2hhbGxvd1dhbGtlciA9IChlbDIsIGNhbGxiYWNrKSA9PiB7XG4gICAgd2FsayhlbDIsIChlbDMsIHNraXApID0+IHtcbiAgICAgIGlmIChoYXNSdW5UaHJvdWdoRmlyc3RFbCAmJiBpc1Jvb3QoZWwzKSlcbiAgICAgICAgcmV0dXJuIHNraXAoKTtcbiAgICAgIGhhc1J1blRocm91Z2hGaXJzdEVsID0gdHJ1ZTtcbiAgICAgIGNhbGxiYWNrKGVsMywgc2tpcCk7XG4gICAgfSk7XG4gIH07XG4gIGluaXRUcmVlKGVsLCBzaGFsbG93V2Fsa2VyKTtcbn1cbmZ1bmN0aW9uIGRvbnRSZWdpc3RlclJlYWN0aXZlU2lkZUVmZmVjdHMoY2FsbGJhY2spIHtcbiAgbGV0IGNhY2hlID0gZWZmZWN0O1xuICBvdmVycmlkZUVmZmVjdCgoY2FsbGJhY2syLCBlbCkgPT4ge1xuICAgIGxldCBzdG9yZWRFZmZlY3QgPSBjYWNoZShjYWxsYmFjazIpO1xuICAgIHJlbGVhc2Uoc3RvcmVkRWZmZWN0KTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgIH07XG4gIH0pO1xuICBjYWxsYmFjaygpO1xuICBvdmVycmlkZUVmZmVjdChjYWNoZSk7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy91dGlscy9iaW5kLmpzXG5mdW5jdGlvbiBiaW5kKGVsLCBuYW1lLCB2YWx1ZSwgbW9kaWZpZXJzID0gW10pIHtcbiAgaWYgKCFlbC5feF9iaW5kaW5ncylcbiAgICBlbC5feF9iaW5kaW5ncyA9IHJlYWN0aXZlKHt9KTtcbiAgZWwuX3hfYmluZGluZ3NbbmFtZV0gPSB2YWx1ZTtcbiAgbmFtZSA9IG1vZGlmaWVycy5pbmNsdWRlcyhcImNhbWVsXCIpID8gY2FtZWxDYXNlKG5hbWUpIDogbmFtZTtcbiAgc3dpdGNoIChuYW1lKSB7XG4gICAgY2FzZSBcInZhbHVlXCI6XG4gICAgICBiaW5kSW5wdXRWYWx1ZShlbCwgdmFsdWUpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcInN0eWxlXCI6XG4gICAgICBiaW5kU3R5bGVzKGVsLCB2YWx1ZSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiY2xhc3NcIjpcbiAgICAgIGJpbmRDbGFzc2VzKGVsLCB2YWx1ZSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwic2VsZWN0ZWRcIjpcbiAgICBjYXNlIFwiY2hlY2tlZFwiOlxuICAgICAgYmluZEF0dHJpYnV0ZUFuZFByb3BlcnR5KGVsLCBuYW1lLCB2YWx1ZSk7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgYmluZEF0dHJpYnV0ZShlbCwgbmFtZSwgdmFsdWUpO1xuICAgICAgYnJlYWs7XG4gIH1cbn1cbmZ1bmN0aW9uIGJpbmRJbnB1dFZhbHVlKGVsLCB2YWx1ZSkge1xuICBpZiAoaXNSYWRpbyhlbCkpIHtcbiAgICBpZiAoZWwuYXR0cmlidXRlcy52YWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgICBlbC52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICBpZiAod2luZG93LmZyb21Nb2RlbCkge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgZWwuY2hlY2tlZCA9IHNhZmVQYXJzZUJvb2xlYW4oZWwudmFsdWUpID09PSB2YWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsLmNoZWNrZWQgPSBjaGVja2VkQXR0ckxvb3NlQ29tcGFyZShlbC52YWx1ZSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChpc0NoZWNrYm94KGVsKSkge1xuICAgIGlmIChOdW1iZXIuaXNJbnRlZ2VyKHZhbHVlKSkge1xuICAgICAgZWwudmFsdWUgPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB0eXBlb2YgdmFsdWUgIT09IFwiYm9vbGVhblwiICYmICFbbnVsbCwgdm9pZCAwXS5pbmNsdWRlcyh2YWx1ZSkpIHtcbiAgICAgIGVsLnZhbHVlID0gU3RyaW5nKHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIGVsLmNoZWNrZWQgPSB2YWx1ZS5zb21lKCh2YWwpID0+IGNoZWNrZWRBdHRyTG9vc2VDb21wYXJlKHZhbCwgZWwudmFsdWUpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsLmNoZWNrZWQgPSAhIXZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChlbC50YWdOYW1lID09PSBcIlNFTEVDVFwiKSB7XG4gICAgdXBkYXRlU2VsZWN0KGVsLCB2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKGVsLnZhbHVlID09PSB2YWx1ZSlcbiAgICAgIHJldHVybjtcbiAgICBlbC52YWx1ZSA9IHZhbHVlID09PSB2b2lkIDAgPyBcIlwiIDogdmFsdWU7XG4gIH1cbn1cbmZ1bmN0aW9uIGJpbmRDbGFzc2VzKGVsLCB2YWx1ZSkge1xuICBpZiAoZWwuX3hfdW5kb0FkZGVkQ2xhc3NlcylcbiAgICBlbC5feF91bmRvQWRkZWRDbGFzc2VzKCk7XG4gIGVsLl94X3VuZG9BZGRlZENsYXNzZXMgPSBzZXRDbGFzc2VzKGVsLCB2YWx1ZSk7XG59XG5mdW5jdGlvbiBiaW5kU3R5bGVzKGVsLCB2YWx1ZSkge1xuICBpZiAoZWwuX3hfdW5kb0FkZGVkU3R5bGVzKVxuICAgIGVsLl94X3VuZG9BZGRlZFN0eWxlcygpO1xuICBlbC5feF91bmRvQWRkZWRTdHlsZXMgPSBzZXRTdHlsZXMoZWwsIHZhbHVlKTtcbn1cbmZ1bmN0aW9uIGJpbmRBdHRyaWJ1dGVBbmRQcm9wZXJ0eShlbCwgbmFtZSwgdmFsdWUpIHtcbiAgYmluZEF0dHJpYnV0ZShlbCwgbmFtZSwgdmFsdWUpO1xuICBzZXRQcm9wZXJ0eUlmQ2hhbmdlZChlbCwgbmFtZSwgdmFsdWUpO1xufVxuZnVuY3Rpb24gYmluZEF0dHJpYnV0ZShlbCwgbmFtZSwgdmFsdWUpIHtcbiAgaWYgKFtudWxsLCB2b2lkIDAsIGZhbHNlXS5pbmNsdWRlcyh2YWx1ZSkgJiYgYXR0cmlidXRlU2hvdWxkbnRCZVByZXNlcnZlZElmRmFsc3kobmFtZSkpIHtcbiAgICBlbC5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKGlzQm9vbGVhbkF0dHIobmFtZSkpXG4gICAgICB2YWx1ZSA9IG5hbWU7XG4gICAgc2V0SWZDaGFuZ2VkKGVsLCBuYW1lLCB2YWx1ZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIHNldElmQ2hhbmdlZChlbCwgYXR0ck5hbWUsIHZhbHVlKSB7XG4gIGlmIChlbC5nZXRBdHRyaWJ1dGUoYXR0ck5hbWUpICE9IHZhbHVlKSB7XG4gICAgZWwuc2V0QXR0cmlidXRlKGF0dHJOYW1lLCB2YWx1ZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIHNldFByb3BlcnR5SWZDaGFuZ2VkKGVsLCBwcm9wTmFtZSwgdmFsdWUpIHtcbiAgaWYgKGVsW3Byb3BOYW1lXSAhPT0gdmFsdWUpIHtcbiAgICBlbFtwcm9wTmFtZV0gPSB2YWx1ZTtcbiAgfVxufVxuZnVuY3Rpb24gdXBkYXRlU2VsZWN0KGVsLCB2YWx1ZSkge1xuICBjb25zdCBhcnJheVdyYXBwZWRWYWx1ZSA9IFtdLmNvbmNhdCh2YWx1ZSkubWFwKCh2YWx1ZTIpID0+IHtcbiAgICByZXR1cm4gdmFsdWUyICsgXCJcIjtcbiAgfSk7XG4gIEFycmF5LmZyb20oZWwub3B0aW9ucykuZm9yRWFjaCgob3B0aW9uKSA9PiB7XG4gICAgb3B0aW9uLnNlbGVjdGVkID0gYXJyYXlXcmFwcGVkVmFsdWUuaW5jbHVkZXMob3B0aW9uLnZhbHVlKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBjYW1lbENhc2Uoc3ViamVjdCkge1xuICByZXR1cm4gc3ViamVjdC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoLy0oXFx3KS9nLCAobWF0Y2gsIGNoYXIpID0+IGNoYXIudG9VcHBlckNhc2UoKSk7XG59XG5mdW5jdGlvbiBjaGVja2VkQXR0ckxvb3NlQ29tcGFyZSh2YWx1ZUEsIHZhbHVlQikge1xuICByZXR1cm4gdmFsdWVBID09IHZhbHVlQjtcbn1cbmZ1bmN0aW9uIHNhZmVQYXJzZUJvb2xlYW4ocmF3VmFsdWUpIHtcbiAgaWYgKFsxLCBcIjFcIiwgXCJ0cnVlXCIsIFwib25cIiwgXCJ5ZXNcIiwgdHJ1ZV0uaW5jbHVkZXMocmF3VmFsdWUpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKFswLCBcIjBcIiwgXCJmYWxzZVwiLCBcIm9mZlwiLCBcIm5vXCIsIGZhbHNlXS5pbmNsdWRlcyhyYXdWYWx1ZSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHJhd1ZhbHVlID8gQm9vbGVhbihyYXdWYWx1ZSkgOiBudWxsO1xufVxudmFyIGJvb2xlYW5BdHRyaWJ1dGVzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoW1xuICBcImFsbG93ZnVsbHNjcmVlblwiLFxuICBcImFzeW5jXCIsXG4gIFwiYXV0b2ZvY3VzXCIsXG4gIFwiYXV0b3BsYXlcIixcbiAgXCJjaGVja2VkXCIsXG4gIFwiY29udHJvbHNcIixcbiAgXCJkZWZhdWx0XCIsXG4gIFwiZGVmZXJcIixcbiAgXCJkaXNhYmxlZFwiLFxuICBcImZvcm1ub3ZhbGlkYXRlXCIsXG4gIFwiaW5lcnRcIixcbiAgXCJpc21hcFwiLFxuICBcIml0ZW1zY29wZVwiLFxuICBcImxvb3BcIixcbiAgXCJtdWx0aXBsZVwiLFxuICBcIm11dGVkXCIsXG4gIFwibm9tb2R1bGVcIixcbiAgXCJub3ZhbGlkYXRlXCIsXG4gIFwib3BlblwiLFxuICBcInBsYXlzaW5saW5lXCIsXG4gIFwicmVhZG9ubHlcIixcbiAgXCJyZXF1aXJlZFwiLFxuICBcInJldmVyc2VkXCIsXG4gIFwic2VsZWN0ZWRcIixcbiAgXCJzaGFkb3dyb290Y2xvbmFibGVcIixcbiAgXCJzaGFkb3dyb290ZGVsZWdhdGVzZm9jdXNcIixcbiAgXCJzaGFkb3dyb290c2VyaWFsaXphYmxlXCJcbl0pO1xuZnVuY3Rpb24gaXNCb29sZWFuQXR0cihhdHRyTmFtZSkge1xuICByZXR1cm4gYm9vbGVhbkF0dHJpYnV0ZXMuaGFzKGF0dHJOYW1lKTtcbn1cbmZ1bmN0aW9uIGF0dHJpYnV0ZVNob3VsZG50QmVQcmVzZXJ2ZWRJZkZhbHN5KG5hbWUpIHtcbiAgcmV0dXJuICFbXCJhcmlhLXByZXNzZWRcIiwgXCJhcmlhLWNoZWNrZWRcIiwgXCJhcmlhLWV4cGFuZGVkXCIsIFwiYXJpYS1zZWxlY3RlZFwiXS5pbmNsdWRlcyhuYW1lKTtcbn1cbmZ1bmN0aW9uIGdldEJpbmRpbmcoZWwsIG5hbWUsIGZhbGxiYWNrKSB7XG4gIGlmIChlbC5feF9iaW5kaW5ncyAmJiBlbC5feF9iaW5kaW5nc1tuYW1lXSAhPT0gdm9pZCAwKVxuICAgIHJldHVybiBlbC5feF9iaW5kaW5nc1tuYW1lXTtcbiAgcmV0dXJuIGdldEF0dHJpYnV0ZUJpbmRpbmcoZWwsIG5hbWUsIGZhbGxiYWNrKTtcbn1cbmZ1bmN0aW9uIGV4dHJhY3RQcm9wKGVsLCBuYW1lLCBmYWxsYmFjaywgZXh0cmFjdCA9IHRydWUpIHtcbiAgaWYgKGVsLl94X2JpbmRpbmdzICYmIGVsLl94X2JpbmRpbmdzW25hbWVdICE9PSB2b2lkIDApXG4gICAgcmV0dXJuIGVsLl94X2JpbmRpbmdzW25hbWVdO1xuICBpZiAoZWwuX3hfaW5saW5lQmluZGluZ3MgJiYgZWwuX3hfaW5saW5lQmluZGluZ3NbbmFtZV0gIT09IHZvaWQgMCkge1xuICAgIGxldCBiaW5kaW5nID0gZWwuX3hfaW5saW5lQmluZGluZ3NbbmFtZV07XG4gICAgYmluZGluZy5leHRyYWN0ID0gZXh0cmFjdDtcbiAgICByZXR1cm4gZG9udEF1dG9FdmFsdWF0ZUZ1bmN0aW9ucygoKSA9PiB7XG4gICAgICByZXR1cm4gZXZhbHVhdGUoZWwsIGJpbmRpbmcuZXhwcmVzc2lvbik7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGdldEF0dHJpYnV0ZUJpbmRpbmcoZWwsIG5hbWUsIGZhbGxiYWNrKTtcbn1cbmZ1bmN0aW9uIGdldEF0dHJpYnV0ZUJpbmRpbmcoZWwsIG5hbWUsIGZhbGxiYWNrKSB7XG4gIGxldCBhdHRyID0gZWwuZ2V0QXR0cmlidXRlKG5hbWUpO1xuICBpZiAoYXR0ciA9PT0gbnVsbClcbiAgICByZXR1cm4gdHlwZW9mIGZhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIgPyBmYWxsYmFjaygpIDogZmFsbGJhY2s7XG4gIGlmIChhdHRyID09PSBcIlwiKVxuICAgIHJldHVybiB0cnVlO1xuICBpZiAoaXNCb29sZWFuQXR0cihuYW1lKSkge1xuICAgIHJldHVybiAhIVtuYW1lLCBcInRydWVcIl0uaW5jbHVkZXMoYXR0cik7XG4gIH1cbiAgcmV0dXJuIGF0dHI7XG59XG5mdW5jdGlvbiBpc0NoZWNrYm94KGVsKSB7XG4gIHJldHVybiBlbC50eXBlID09PSBcImNoZWNrYm94XCIgfHwgZWwubG9jYWxOYW1lID09PSBcInVpLWNoZWNrYm94XCIgfHwgZWwubG9jYWxOYW1lID09PSBcInVpLXN3aXRjaFwiO1xufVxuZnVuY3Rpb24gaXNSYWRpbyhlbCkge1xuICByZXR1cm4gZWwudHlwZSA9PT0gXCJyYWRpb1wiIHx8IGVsLmxvY2FsTmFtZSA9PT0gXCJ1aS1yYWRpb1wiO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvdXRpbHMvZGVib3VuY2UuanNcbmZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQpIHtcbiAgdmFyIHRpbWVvdXQ7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgY29udGV4dCA9IHRoaXMsIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgfTtcbiAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuICB9O1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvdXRpbHMvdGhyb3R0bGUuanNcbmZ1bmN0aW9uIHRocm90dGxlKGZ1bmMsIGxpbWl0KSB7XG4gIGxldCBpblRocm90dGxlO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgbGV0IGNvbnRleHQgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzO1xuICAgIGlmICghaW5UaHJvdHRsZSkge1xuICAgICAgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIGluVGhyb3R0bGUgPSB0cnVlO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiBpblRocm90dGxlID0gZmFsc2UsIGxpbWl0KTtcbiAgICB9XG4gIH07XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9lbnRhbmdsZS5qc1xuZnVuY3Rpb24gZW50YW5nbGUoeyBnZXQ6IG91dGVyR2V0LCBzZXQ6IG91dGVyU2V0IH0sIHsgZ2V0OiBpbm5lckdldCwgc2V0OiBpbm5lclNldCB9KSB7XG4gIGxldCBmaXJzdFJ1biA9IHRydWU7XG4gIGxldCBvdXRlckhhc2g7XG4gIGxldCBpbm5lckhhc2g7XG4gIGxldCByZWZlcmVuY2UgPSBlZmZlY3QoKCkgPT4ge1xuICAgIGxldCBvdXRlciA9IG91dGVyR2V0KCk7XG4gICAgbGV0IGlubmVyID0gaW5uZXJHZXQoKTtcbiAgICBpZiAoZmlyc3RSdW4pIHtcbiAgICAgIGlubmVyU2V0KGNsb25lSWZPYmplY3Qob3V0ZXIpKTtcbiAgICAgIGZpcnN0UnVuID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBvdXRlckhhc2hMYXRlc3QgPSBKU09OLnN0cmluZ2lmeShvdXRlcik7XG4gICAgICBsZXQgaW5uZXJIYXNoTGF0ZXN0ID0gSlNPTi5zdHJpbmdpZnkoaW5uZXIpO1xuICAgICAgaWYgKG91dGVySGFzaExhdGVzdCAhPT0gb3V0ZXJIYXNoKSB7XG4gICAgICAgIGlubmVyU2V0KGNsb25lSWZPYmplY3Qob3V0ZXIpKTtcbiAgICAgIH0gZWxzZSBpZiAob3V0ZXJIYXNoTGF0ZXN0ICE9PSBpbm5lckhhc2hMYXRlc3QpIHtcbiAgICAgICAgb3V0ZXJTZXQoY2xvbmVJZk9iamVjdChpbm5lcikpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgIH1cbiAgICB9XG4gICAgb3V0ZXJIYXNoID0gSlNPTi5zdHJpbmdpZnkob3V0ZXJHZXQoKSk7XG4gICAgaW5uZXJIYXNoID0gSlNPTi5zdHJpbmdpZnkoaW5uZXJHZXQoKSk7XG4gIH0pO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIHJlbGVhc2UocmVmZXJlbmNlKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGNsb25lSWZPYmplY3QodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiA/IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodmFsdWUpKSA6IHZhbHVlO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvcGx1Z2luLmpzXG5mdW5jdGlvbiBwbHVnaW4oY2FsbGJhY2spIHtcbiAgbGV0IGNhbGxiYWNrcyA9IEFycmF5LmlzQXJyYXkoY2FsbGJhY2spID8gY2FsbGJhY2sgOiBbY2FsbGJhY2tdO1xuICBjYWxsYmFja3MuZm9yRWFjaCgoaSkgPT4gaShhbHBpbmVfZGVmYXVsdCkpO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvc3RvcmUuanNcbnZhciBzdG9yZXMgPSB7fTtcbnZhciBpc1JlYWN0aXZlID0gZmFsc2U7XG5mdW5jdGlvbiBzdG9yZShuYW1lLCB2YWx1ZSkge1xuICBpZiAoIWlzUmVhY3RpdmUpIHtcbiAgICBzdG9yZXMgPSByZWFjdGl2ZShzdG9yZXMpO1xuICAgIGlzUmVhY3RpdmUgPSB0cnVlO1xuICB9XG4gIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgcmV0dXJuIHN0b3Jlc1tuYW1lXTtcbiAgfVxuICBzdG9yZXNbbmFtZV0gPSB2YWx1ZTtcbiAgaW5pdEludGVyY2VwdG9ycyhzdG9yZXNbbmFtZV0pO1xuICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9PSBudWxsICYmIHZhbHVlLmhhc093blByb3BlcnR5KFwiaW5pdFwiKSAmJiB0eXBlb2YgdmFsdWUuaW5pdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgc3RvcmVzW25hbWVdLmluaXQoKTtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0U3RvcmVzKCkge1xuICByZXR1cm4gc3RvcmVzO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvYmluZHMuanNcbnZhciBiaW5kcyA9IHt9O1xuZnVuY3Rpb24gYmluZDIobmFtZSwgYmluZGluZ3MpIHtcbiAgbGV0IGdldEJpbmRpbmdzID0gdHlwZW9mIGJpbmRpbmdzICE9PSBcImZ1bmN0aW9uXCIgPyAoKSA9PiBiaW5kaW5ncyA6IGJpbmRpbmdzO1xuICBpZiAobmFtZSBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcbiAgICByZXR1cm4gYXBwbHlCaW5kaW5nc09iamVjdChuYW1lLCBnZXRCaW5kaW5ncygpKTtcbiAgfSBlbHNlIHtcbiAgICBiaW5kc1tuYW1lXSA9IGdldEJpbmRpbmdzO1xuICB9XG4gIHJldHVybiAoKSA9PiB7XG4gIH07XG59XG5mdW5jdGlvbiBpbmplY3RCaW5kaW5nUHJvdmlkZXJzKG9iaikge1xuICBPYmplY3QuZW50cmllcyhiaW5kcykuZm9yRWFjaCgoW25hbWUsIGNhbGxiYWNrXSkgPT4ge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIG5hbWUsIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKC4uLmFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIG9iajtcbn1cbmZ1bmN0aW9uIGFwcGx5QmluZGluZ3NPYmplY3QoZWwsIG9iaiwgb3JpZ2luYWwpIHtcbiAgbGV0IGNsZWFudXBSdW5uZXJzID0gW107XG4gIHdoaWxlIChjbGVhbnVwUnVubmVycy5sZW5ndGgpXG4gICAgY2xlYW51cFJ1bm5lcnMucG9wKCkoKTtcbiAgbGV0IGF0dHJpYnV0ZXMgPSBPYmplY3QuZW50cmllcyhvYmopLm1hcCgoW25hbWUsIHZhbHVlXSkgPT4gKHsgbmFtZSwgdmFsdWUgfSkpO1xuICBsZXQgc3RhdGljQXR0cmlidXRlcyA9IGF0dHJpYnV0ZXNPbmx5KGF0dHJpYnV0ZXMpO1xuICBhdHRyaWJ1dGVzID0gYXR0cmlidXRlcy5tYXAoKGF0dHJpYnV0ZSkgPT4ge1xuICAgIGlmIChzdGF0aWNBdHRyaWJ1dGVzLmZpbmQoKGF0dHIpID0+IGF0dHIubmFtZSA9PT0gYXR0cmlidXRlLm5hbWUpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBgeC1iaW5kOiR7YXR0cmlidXRlLm5hbWV9YCxcbiAgICAgICAgdmFsdWU6IGBcIiR7YXR0cmlidXRlLnZhbHVlfVwiYFxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGF0dHJpYnV0ZTtcbiAgfSk7XG4gIGRpcmVjdGl2ZXMoZWwsIGF0dHJpYnV0ZXMsIG9yaWdpbmFsKS5tYXAoKGhhbmRsZSkgPT4ge1xuICAgIGNsZWFudXBSdW5uZXJzLnB1c2goaGFuZGxlLnJ1bkNsZWFudXBzKTtcbiAgICBoYW5kbGUoKTtcbiAgfSk7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgd2hpbGUgKGNsZWFudXBSdW5uZXJzLmxlbmd0aClcbiAgICAgIGNsZWFudXBSdW5uZXJzLnBvcCgpKCk7XG4gIH07XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9kYXRhcy5qc1xudmFyIGRhdGFzID0ge307XG5mdW5jdGlvbiBkYXRhKG5hbWUsIGNhbGxiYWNrKSB7XG4gIGRhdGFzW25hbWVdID0gY2FsbGJhY2s7XG59XG5mdW5jdGlvbiBpbmplY3REYXRhUHJvdmlkZXJzKG9iaiwgY29udGV4dCkge1xuICBPYmplY3QuZW50cmllcyhkYXRhcykuZm9yRWFjaCgoW25hbWUsIGNhbGxiYWNrXSkgPT4ge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIG5hbWUsIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmJpbmQoY29udGV4dCkoLi4uYXJncyk7XG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgZW51bWVyYWJsZTogZmFsc2VcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBvYmo7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9hbHBpbmUuanNcbnZhciBBbHBpbmUgPSB7XG4gIGdldCByZWFjdGl2ZSgpIHtcbiAgICByZXR1cm4gcmVhY3RpdmU7XG4gIH0sXG4gIGdldCByZWxlYXNlKCkge1xuICAgIHJldHVybiByZWxlYXNlO1xuICB9LFxuICBnZXQgZWZmZWN0KCkge1xuICAgIHJldHVybiBlZmZlY3Q7XG4gIH0sXG4gIGdldCByYXcoKSB7XG4gICAgcmV0dXJuIHJhdztcbiAgfSxcbiAgdmVyc2lvbjogXCIzLjE0LjlcIixcbiAgZmx1c2hBbmRTdG9wRGVmZXJyaW5nTXV0YXRpb25zLFxuICBkb250QXV0b0V2YWx1YXRlRnVuY3Rpb25zLFxuICBkaXNhYmxlRWZmZWN0U2NoZWR1bGluZyxcbiAgc3RhcnRPYnNlcnZpbmdNdXRhdGlvbnMsXG4gIHN0b3BPYnNlcnZpbmdNdXRhdGlvbnMsXG4gIHNldFJlYWN0aXZpdHlFbmdpbmUsXG4gIG9uQXR0cmlidXRlUmVtb3ZlZCxcbiAgb25BdHRyaWJ1dGVzQWRkZWQsXG4gIGNsb3Nlc3REYXRhU3RhY2ssXG4gIHNraXBEdXJpbmdDbG9uZSxcbiAgb25seUR1cmluZ0Nsb25lLFxuICBhZGRSb290U2VsZWN0b3IsXG4gIGFkZEluaXRTZWxlY3RvcixcbiAgaW50ZXJjZXB0Q2xvbmUsXG4gIGFkZFNjb3BlVG9Ob2RlLFxuICBkZWZlck11dGF0aW9ucyxcbiAgbWFwQXR0cmlidXRlcyxcbiAgZXZhbHVhdGVMYXRlcixcbiAgaW50ZXJjZXB0SW5pdCxcbiAgc2V0RXZhbHVhdG9yLFxuICBtZXJnZVByb3hpZXMsXG4gIGV4dHJhY3RQcm9wLFxuICBmaW5kQ2xvc2VzdCxcbiAgb25FbFJlbW92ZWQsXG4gIGNsb3Nlc3RSb290LFxuICBkZXN0cm95VHJlZSxcbiAgaW50ZXJjZXB0b3IsXG4gIC8vIElOVEVSTkFMOiBub3QgcHVibGljIEFQSSBhbmQgaXMgc3ViamVjdCB0byBjaGFuZ2Ugd2l0aG91dCBtYWpvciByZWxlYXNlLlxuICB0cmFuc2l0aW9uLFxuICAvLyBJTlRFUk5BTFxuICBzZXRTdHlsZXMsXG4gIC8vIElOVEVSTkFMXG4gIG11dGF0ZURvbSxcbiAgZGlyZWN0aXZlLFxuICBlbnRhbmdsZSxcbiAgdGhyb3R0bGUsXG4gIGRlYm91bmNlLFxuICBldmFsdWF0ZSxcbiAgaW5pdFRyZWUsXG4gIG5leHRUaWNrLFxuICBwcmVmaXhlZDogcHJlZml4LFxuICBwcmVmaXg6IHNldFByZWZpeCxcbiAgcGx1Z2luLFxuICBtYWdpYyxcbiAgc3RvcmUsXG4gIHN0YXJ0LFxuICBjbG9uZSxcbiAgLy8gSU5URVJOQUxcbiAgY2xvbmVOb2RlLFxuICAvLyBJTlRFUk5BTFxuICBib3VuZDogZ2V0QmluZGluZyxcbiAgJGRhdGE6IHNjb3BlLFxuICB3YXRjaCxcbiAgd2FsayxcbiAgZGF0YSxcbiAgYmluZDogYmluZDJcbn07XG52YXIgYWxwaW5lX2RlZmF1bHQgPSBBbHBpbmU7XG5cbi8vIG5vZGVfbW9kdWxlcy9AdnVlL3NoYXJlZC9kaXN0L3NoYXJlZC5lc20tYnVuZGxlci5qc1xuZnVuY3Rpb24gbWFrZU1hcChzdHIsIGV4cGVjdHNMb3dlckNhc2UpIHtcbiAgY29uc3QgbWFwID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGNvbnN0IGxpc3QgPSBzdHIuc3BsaXQoXCIsXCIpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICBtYXBbbGlzdFtpXV0gPSB0cnVlO1xuICB9XG4gIHJldHVybiBleHBlY3RzTG93ZXJDYXNlID8gKHZhbCkgPT4gISFtYXBbdmFsLnRvTG93ZXJDYXNlKCldIDogKHZhbCkgPT4gISFtYXBbdmFsXTtcbn1cbnZhciBzcGVjaWFsQm9vbGVhbkF0dHJzID0gYGl0ZW1zY29wZSxhbGxvd2Z1bGxzY3JlZW4sZm9ybW5vdmFsaWRhdGUsaXNtYXAsbm9tb2R1bGUsbm92YWxpZGF0ZSxyZWFkb25seWA7XG52YXIgaXNCb29sZWFuQXR0cjIgPSAvKiBAX19QVVJFX18gKi8gbWFrZU1hcChzcGVjaWFsQm9vbGVhbkF0dHJzICsgYCxhc3luYyxhdXRvZm9jdXMsYXV0b3BsYXksY29udHJvbHMsZGVmYXVsdCxkZWZlcixkaXNhYmxlZCxoaWRkZW4sbG9vcCxvcGVuLHJlcXVpcmVkLHJldmVyc2VkLHNjb3BlZCxzZWFtbGVzcyxjaGVja2VkLG11dGVkLG11bHRpcGxlLHNlbGVjdGVkYCk7XG52YXIgRU1QVFlfT0JKID0gdHJ1ZSA/IE9iamVjdC5mcmVlemUoe30pIDoge307XG52YXIgRU1QVFlfQVJSID0gdHJ1ZSA/IE9iamVjdC5mcmVlemUoW10pIDogW107XG52YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIGhhc093biA9ICh2YWwsIGtleSkgPT4gaGFzT3duUHJvcGVydHkuY2FsbCh2YWwsIGtleSk7XG52YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG52YXIgaXNNYXAgPSAodmFsKSA9PiB0b1R5cGVTdHJpbmcodmFsKSA9PT0gXCJbb2JqZWN0IE1hcF1cIjtcbnZhciBpc1N0cmluZyA9ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCI7XG52YXIgaXNTeW1ib2wgPSAodmFsKSA9PiB0eXBlb2YgdmFsID09PSBcInN5bWJvbFwiO1xudmFyIGlzT2JqZWN0ID0gKHZhbCkgPT4gdmFsICE9PSBudWxsICYmIHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCI7XG52YXIgb2JqZWN0VG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xudmFyIHRvVHlwZVN0cmluZyA9ICh2YWx1ZSkgPT4gb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG52YXIgdG9SYXdUeXBlID0gKHZhbHVlKSA9PiB7XG4gIHJldHVybiB0b1R5cGVTdHJpbmcodmFsdWUpLnNsaWNlKDgsIC0xKTtcbn07XG52YXIgaXNJbnRlZ2VyS2V5ID0gKGtleSkgPT4gaXNTdHJpbmcoa2V5KSAmJiBrZXkgIT09IFwiTmFOXCIgJiYga2V5WzBdICE9PSBcIi1cIiAmJiBcIlwiICsgcGFyc2VJbnQoa2V5LCAxMCkgPT09IGtleTtcbnZhciBjYWNoZVN0cmluZ0Z1bmN0aW9uID0gKGZuKSA9PiB7XG4gIGNvbnN0IGNhY2hlID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHJldHVybiAoc3RyKSA9PiB7XG4gICAgY29uc3QgaGl0ID0gY2FjaGVbc3RyXTtcbiAgICByZXR1cm4gaGl0IHx8IChjYWNoZVtzdHJdID0gZm4oc3RyKSk7XG4gIH07XG59O1xudmFyIGNhbWVsaXplUkUgPSAvLShcXHcpL2c7XG52YXIgY2FtZWxpemUgPSBjYWNoZVN0cmluZ0Z1bmN0aW9uKChzdHIpID0+IHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKGNhbWVsaXplUkUsIChfLCBjKSA9PiBjID8gYy50b1VwcGVyQ2FzZSgpIDogXCJcIik7XG59KTtcbnZhciBoeXBoZW5hdGVSRSA9IC9cXEIoW0EtWl0pL2c7XG52YXIgaHlwaGVuYXRlID0gY2FjaGVTdHJpbmdGdW5jdGlvbigoc3RyKSA9PiBzdHIucmVwbGFjZShoeXBoZW5hdGVSRSwgXCItJDFcIikudG9Mb3dlckNhc2UoKSk7XG52YXIgY2FwaXRhbGl6ZSA9IGNhY2hlU3RyaW5nRnVuY3Rpb24oKHN0cikgPT4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpKTtcbnZhciB0b0hhbmRsZXJLZXkgPSBjYWNoZVN0cmluZ0Z1bmN0aW9uKChzdHIpID0+IHN0ciA/IGBvbiR7Y2FwaXRhbGl6ZShzdHIpfWAgOiBgYCk7XG52YXIgaGFzQ2hhbmdlZCA9ICh2YWx1ZSwgb2xkVmFsdWUpID0+IHZhbHVlICE9PSBvbGRWYWx1ZSAmJiAodmFsdWUgPT09IHZhbHVlIHx8IG9sZFZhbHVlID09PSBvbGRWYWx1ZSk7XG5cbi8vIG5vZGVfbW9kdWxlcy9AdnVlL3JlYWN0aXZpdHkvZGlzdC9yZWFjdGl2aXR5LmVzbS1idW5kbGVyLmpzXG52YXIgdGFyZ2V0TWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG52YXIgZWZmZWN0U3RhY2sgPSBbXTtcbnZhciBhY3RpdmVFZmZlY3Q7XG52YXIgSVRFUkFURV9LRVkgPSBTeW1ib2wodHJ1ZSA/IFwiaXRlcmF0ZVwiIDogXCJcIik7XG52YXIgTUFQX0tFWV9JVEVSQVRFX0tFWSA9IFN5bWJvbCh0cnVlID8gXCJNYXAga2V5IGl0ZXJhdGVcIiA6IFwiXCIpO1xuZnVuY3Rpb24gaXNFZmZlY3QoZm4pIHtcbiAgcmV0dXJuIGZuICYmIGZuLl9pc0VmZmVjdCA9PT0gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGVmZmVjdDIoZm4sIG9wdGlvbnMgPSBFTVBUWV9PQkopIHtcbiAgaWYgKGlzRWZmZWN0KGZuKSkge1xuICAgIGZuID0gZm4ucmF3O1xuICB9XG4gIGNvbnN0IGVmZmVjdDMgPSBjcmVhdGVSZWFjdGl2ZUVmZmVjdChmbiwgb3B0aW9ucyk7XG4gIGlmICghb3B0aW9ucy5sYXp5KSB7XG4gICAgZWZmZWN0MygpO1xuICB9XG4gIHJldHVybiBlZmZlY3QzO1xufVxuZnVuY3Rpb24gc3RvcChlZmZlY3QzKSB7XG4gIGlmIChlZmZlY3QzLmFjdGl2ZSkge1xuICAgIGNsZWFudXAoZWZmZWN0Myk7XG4gICAgaWYgKGVmZmVjdDMub3B0aW9ucy5vblN0b3ApIHtcbiAgICAgIGVmZmVjdDMub3B0aW9ucy5vblN0b3AoKTtcbiAgICB9XG4gICAgZWZmZWN0My5hY3RpdmUgPSBmYWxzZTtcbiAgfVxufVxudmFyIHVpZCA9IDA7XG5mdW5jdGlvbiBjcmVhdGVSZWFjdGl2ZUVmZmVjdChmbiwgb3B0aW9ucykge1xuICBjb25zdCBlZmZlY3QzID0gZnVuY3Rpb24gcmVhY3RpdmVFZmZlY3QoKSB7XG4gICAgaWYgKCFlZmZlY3QzLmFjdGl2ZSkge1xuICAgICAgcmV0dXJuIGZuKCk7XG4gICAgfVxuICAgIGlmICghZWZmZWN0U3RhY2suaW5jbHVkZXMoZWZmZWN0MykpIHtcbiAgICAgIGNsZWFudXAoZWZmZWN0Myk7XG4gICAgICB0cnkge1xuICAgICAgICBlbmFibGVUcmFja2luZygpO1xuICAgICAgICBlZmZlY3RTdGFjay5wdXNoKGVmZmVjdDMpO1xuICAgICAgICBhY3RpdmVFZmZlY3QgPSBlZmZlY3QzO1xuICAgICAgICByZXR1cm4gZm4oKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGVmZmVjdFN0YWNrLnBvcCgpO1xuICAgICAgICByZXNldFRyYWNraW5nKCk7XG4gICAgICAgIGFjdGl2ZUVmZmVjdCA9IGVmZmVjdFN0YWNrW2VmZmVjdFN0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgZWZmZWN0My5pZCA9IHVpZCsrO1xuICBlZmZlY3QzLmFsbG93UmVjdXJzZSA9ICEhb3B0aW9ucy5hbGxvd1JlY3Vyc2U7XG4gIGVmZmVjdDMuX2lzRWZmZWN0ID0gdHJ1ZTtcbiAgZWZmZWN0My5hY3RpdmUgPSB0cnVlO1xuICBlZmZlY3QzLnJhdyA9IGZuO1xuICBlZmZlY3QzLmRlcHMgPSBbXTtcbiAgZWZmZWN0My5vcHRpb25zID0gb3B0aW9ucztcbiAgcmV0dXJuIGVmZmVjdDM7XG59XG5mdW5jdGlvbiBjbGVhbnVwKGVmZmVjdDMpIHtcbiAgY29uc3QgeyBkZXBzIH0gPSBlZmZlY3QzO1xuICBpZiAoZGVwcy5sZW5ndGgpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGRlcHNbaV0uZGVsZXRlKGVmZmVjdDMpO1xuICAgIH1cbiAgICBkZXBzLmxlbmd0aCA9IDA7XG4gIH1cbn1cbnZhciBzaG91bGRUcmFjayA9IHRydWU7XG52YXIgdHJhY2tTdGFjayA9IFtdO1xuZnVuY3Rpb24gcGF1c2VUcmFja2luZygpIHtcbiAgdHJhY2tTdGFjay5wdXNoKHNob3VsZFRyYWNrKTtcbiAgc2hvdWxkVHJhY2sgPSBmYWxzZTtcbn1cbmZ1bmN0aW9uIGVuYWJsZVRyYWNraW5nKCkge1xuICB0cmFja1N0YWNrLnB1c2goc2hvdWxkVHJhY2spO1xuICBzaG91bGRUcmFjayA9IHRydWU7XG59XG5mdW5jdGlvbiByZXNldFRyYWNraW5nKCkge1xuICBjb25zdCBsYXN0ID0gdHJhY2tTdGFjay5wb3AoKTtcbiAgc2hvdWxkVHJhY2sgPSBsYXN0ID09PSB2b2lkIDAgPyB0cnVlIDogbGFzdDtcbn1cbmZ1bmN0aW9uIHRyYWNrKHRhcmdldCwgdHlwZSwga2V5KSB7XG4gIGlmICghc2hvdWxkVHJhY2sgfHwgYWN0aXZlRWZmZWN0ID09PSB2b2lkIDApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgbGV0IGRlcHNNYXAgPSB0YXJnZXRNYXAuZ2V0KHRhcmdldCk7XG4gIGlmICghZGVwc01hcCkge1xuICAgIHRhcmdldE1hcC5zZXQodGFyZ2V0LCBkZXBzTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSk7XG4gIH1cbiAgbGV0IGRlcCA9IGRlcHNNYXAuZ2V0KGtleSk7XG4gIGlmICghZGVwKSB7XG4gICAgZGVwc01hcC5zZXQoa2V5LCBkZXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpKTtcbiAgfVxuICBpZiAoIWRlcC5oYXMoYWN0aXZlRWZmZWN0KSkge1xuICAgIGRlcC5hZGQoYWN0aXZlRWZmZWN0KTtcbiAgICBhY3RpdmVFZmZlY3QuZGVwcy5wdXNoKGRlcCk7XG4gICAgaWYgKGFjdGl2ZUVmZmVjdC5vcHRpb25zLm9uVHJhY2spIHtcbiAgICAgIGFjdGl2ZUVmZmVjdC5vcHRpb25zLm9uVHJhY2soe1xuICAgICAgICBlZmZlY3Q6IGFjdGl2ZUVmZmVjdCxcbiAgICAgICAgdGFyZ2V0LFxuICAgICAgICB0eXBlLFxuICAgICAgICBrZXlcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gdHJpZ2dlcih0YXJnZXQsIHR5cGUsIGtleSwgbmV3VmFsdWUsIG9sZFZhbHVlLCBvbGRUYXJnZXQpIHtcbiAgY29uc3QgZGVwc01hcCA9IHRhcmdldE1hcC5nZXQodGFyZ2V0KTtcbiAgaWYgKCFkZXBzTWFwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGVmZmVjdHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICBjb25zdCBhZGQyID0gKGVmZmVjdHNUb0FkZCkgPT4ge1xuICAgIGlmIChlZmZlY3RzVG9BZGQpIHtcbiAgICAgIGVmZmVjdHNUb0FkZC5mb3JFYWNoKChlZmZlY3QzKSA9PiB7XG4gICAgICAgIGlmIChlZmZlY3QzICE9PSBhY3RpdmVFZmZlY3QgfHwgZWZmZWN0My5hbGxvd1JlY3Vyc2UpIHtcbiAgICAgICAgICBlZmZlY3RzLmFkZChlZmZlY3QzKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuICBpZiAodHlwZSA9PT0gXCJjbGVhclwiKSB7XG4gICAgZGVwc01hcC5mb3JFYWNoKGFkZDIpO1xuICB9IGVsc2UgaWYgKGtleSA9PT0gXCJsZW5ndGhcIiAmJiBpc0FycmF5KHRhcmdldCkpIHtcbiAgICBkZXBzTWFwLmZvckVhY2goKGRlcCwga2V5MikgPT4ge1xuICAgICAgaWYgKGtleTIgPT09IFwibGVuZ3RoXCIgfHwga2V5MiA+PSBuZXdWYWx1ZSkge1xuICAgICAgICBhZGQyKGRlcCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKGtleSAhPT0gdm9pZCAwKSB7XG4gICAgICBhZGQyKGRlcHNNYXAuZ2V0KGtleSkpO1xuICAgIH1cbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgXCJhZGRcIjpcbiAgICAgICAgaWYgKCFpc0FycmF5KHRhcmdldCkpIHtcbiAgICAgICAgICBhZGQyKGRlcHNNYXAuZ2V0KElURVJBVEVfS0VZKSk7XG4gICAgICAgICAgaWYgKGlzTWFwKHRhcmdldCkpIHtcbiAgICAgICAgICAgIGFkZDIoZGVwc01hcC5nZXQoTUFQX0tFWV9JVEVSQVRFX0tFWSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChpc0ludGVnZXJLZXkoa2V5KSkge1xuICAgICAgICAgIGFkZDIoZGVwc01hcC5nZXQoXCJsZW5ndGhcIikpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImRlbGV0ZVwiOlxuICAgICAgICBpZiAoIWlzQXJyYXkodGFyZ2V0KSkge1xuICAgICAgICAgIGFkZDIoZGVwc01hcC5nZXQoSVRFUkFURV9LRVkpKTtcbiAgICAgICAgICBpZiAoaXNNYXAodGFyZ2V0KSkge1xuICAgICAgICAgICAgYWRkMihkZXBzTWFwLmdldChNQVBfS0VZX0lURVJBVEVfS0VZKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInNldFwiOlxuICAgICAgICBpZiAoaXNNYXAodGFyZ2V0KSkge1xuICAgICAgICAgIGFkZDIoZGVwc01hcC5nZXQoSVRFUkFURV9LRVkpKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgY29uc3QgcnVuID0gKGVmZmVjdDMpID0+IHtcbiAgICBpZiAoZWZmZWN0My5vcHRpb25zLm9uVHJpZ2dlcikge1xuICAgICAgZWZmZWN0My5vcHRpb25zLm9uVHJpZ2dlcih7XG4gICAgICAgIGVmZmVjdDogZWZmZWN0MyxcbiAgICAgICAgdGFyZ2V0LFxuICAgICAgICBrZXksXG4gICAgICAgIHR5cGUsXG4gICAgICAgIG5ld1ZhbHVlLFxuICAgICAgICBvbGRWYWx1ZSxcbiAgICAgICAgb2xkVGFyZ2V0XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGVmZmVjdDMub3B0aW9ucy5zY2hlZHVsZXIpIHtcbiAgICAgIGVmZmVjdDMub3B0aW9ucy5zY2hlZHVsZXIoZWZmZWN0Myk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVmZmVjdDMoKTtcbiAgICB9XG4gIH07XG4gIGVmZmVjdHMuZm9yRWFjaChydW4pO1xufVxudmFyIGlzTm9uVHJhY2thYmxlS2V5cyA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKGBfX3Byb3RvX18sX192X2lzUmVmLF9faXNWdWVgKTtcbnZhciBidWlsdEluU3ltYm9scyA9IG5ldyBTZXQoT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoU3ltYm9sKS5tYXAoKGtleSkgPT4gU3ltYm9sW2tleV0pLmZpbHRlcihpc1N5bWJvbCkpO1xudmFyIGdldDIgPSAvKiBAX19QVVJFX18gKi8gY3JlYXRlR2V0dGVyKCk7XG52YXIgcmVhZG9ubHlHZXQgPSAvKiBAX19QVVJFX18gKi8gY3JlYXRlR2V0dGVyKHRydWUpO1xudmFyIGFycmF5SW5zdHJ1bWVudGF0aW9ucyA9IC8qIEBfX1BVUkVfXyAqLyBjcmVhdGVBcnJheUluc3RydW1lbnRhdGlvbnMoKTtcbmZ1bmN0aW9uIGNyZWF0ZUFycmF5SW5zdHJ1bWVudGF0aW9ucygpIHtcbiAgY29uc3QgaW5zdHJ1bWVudGF0aW9ucyA9IHt9O1xuICBbXCJpbmNsdWRlc1wiLCBcImluZGV4T2ZcIiwgXCJsYXN0SW5kZXhPZlwiXS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBpbnN0cnVtZW50YXRpb25zW2tleV0gPSBmdW5jdGlvbiguLi5hcmdzKSB7XG4gICAgICBjb25zdCBhcnIgPSB0b1Jhdyh0aGlzKTtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gdGhpcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdHJhY2soYXJyLCBcImdldFwiLCBpICsgXCJcIik7XG4gICAgICB9XG4gICAgICBjb25zdCByZXMgPSBhcnJba2V5XSguLi5hcmdzKTtcbiAgICAgIGlmIChyZXMgPT09IC0xIHx8IHJlcyA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIGFycltrZXldKC4uLmFyZ3MubWFwKHRvUmF3KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgfVxuICAgIH07XG4gIH0pO1xuICBbXCJwdXNoXCIsIFwicG9wXCIsIFwic2hpZnRcIiwgXCJ1bnNoaWZ0XCIsIFwic3BsaWNlXCJdLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGluc3RydW1lbnRhdGlvbnNba2V5XSA9IGZ1bmN0aW9uKC4uLmFyZ3MpIHtcbiAgICAgIHBhdXNlVHJhY2tpbmcoKTtcbiAgICAgIGNvbnN0IHJlcyA9IHRvUmF3KHRoaXMpW2tleV0uYXBwbHkodGhpcywgYXJncyk7XG4gICAgICByZXNldFRyYWNraW5nKCk7XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gIH0pO1xuICByZXR1cm4gaW5zdHJ1bWVudGF0aW9ucztcbn1cbmZ1bmN0aW9uIGNyZWF0ZUdldHRlcihpc1JlYWRvbmx5ID0gZmFsc2UsIHNoYWxsb3cgPSBmYWxzZSkge1xuICByZXR1cm4gZnVuY3Rpb24gZ2V0Myh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpIHtcbiAgICBpZiAoa2V5ID09PSBcIl9fdl9pc1JlYWN0aXZlXCIpIHtcbiAgICAgIHJldHVybiAhaXNSZWFkb25seTtcbiAgICB9IGVsc2UgaWYgKGtleSA9PT0gXCJfX3ZfaXNSZWFkb25seVwiKSB7XG4gICAgICByZXR1cm4gaXNSZWFkb25seTtcbiAgICB9IGVsc2UgaWYgKGtleSA9PT0gXCJfX3ZfcmF3XCIgJiYgcmVjZWl2ZXIgPT09IChpc1JlYWRvbmx5ID8gc2hhbGxvdyA/IHNoYWxsb3dSZWFkb25seU1hcCA6IHJlYWRvbmx5TWFwIDogc2hhbGxvdyA/IHNoYWxsb3dSZWFjdGl2ZU1hcCA6IHJlYWN0aXZlTWFwKS5nZXQodGFyZ2V0KSkge1xuICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9XG4gICAgY29uc3QgdGFyZ2V0SXNBcnJheSA9IGlzQXJyYXkodGFyZ2V0KTtcbiAgICBpZiAoIWlzUmVhZG9ubHkgJiYgdGFyZ2V0SXNBcnJheSAmJiBoYXNPd24oYXJyYXlJbnN0cnVtZW50YXRpb25zLCBrZXkpKSB7XG4gICAgICByZXR1cm4gUmVmbGVjdC5nZXQoYXJyYXlJbnN0cnVtZW50YXRpb25zLCBrZXksIHJlY2VpdmVyKTtcbiAgICB9XG4gICAgY29uc3QgcmVzID0gUmVmbGVjdC5nZXQodGFyZ2V0LCBrZXksIHJlY2VpdmVyKTtcbiAgICBpZiAoaXNTeW1ib2woa2V5KSA/IGJ1aWx0SW5TeW1ib2xzLmhhcyhrZXkpIDogaXNOb25UcmFja2FibGVLZXlzKGtleSkpIHtcbiAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIGlmICghaXNSZWFkb25seSkge1xuICAgICAgdHJhY2sodGFyZ2V0LCBcImdldFwiLCBrZXkpO1xuICAgIH1cbiAgICBpZiAoc2hhbGxvdykge1xuICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgaWYgKGlzUmVmKHJlcykpIHtcbiAgICAgIGNvbnN0IHNob3VsZFVud3JhcCA9ICF0YXJnZXRJc0FycmF5IHx8ICFpc0ludGVnZXJLZXkoa2V5KTtcbiAgICAgIHJldHVybiBzaG91bGRVbndyYXAgPyByZXMudmFsdWUgOiByZXM7XG4gICAgfVxuICAgIGlmIChpc09iamVjdChyZXMpKSB7XG4gICAgICByZXR1cm4gaXNSZWFkb25seSA/IHJlYWRvbmx5KHJlcykgOiByZWFjdGl2ZTIocmVzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfTtcbn1cbnZhciBzZXQyID0gLyogQF9fUFVSRV9fICovIGNyZWF0ZVNldHRlcigpO1xuZnVuY3Rpb24gY3JlYXRlU2V0dGVyKHNoYWxsb3cgPSBmYWxzZSkge1xuICByZXR1cm4gZnVuY3Rpb24gc2V0Myh0YXJnZXQsIGtleSwgdmFsdWUsIHJlY2VpdmVyKSB7XG4gICAgbGV0IG9sZFZhbHVlID0gdGFyZ2V0W2tleV07XG4gICAgaWYgKCFzaGFsbG93KSB7XG4gICAgICB2YWx1ZSA9IHRvUmF3KHZhbHVlKTtcbiAgICAgIG9sZFZhbHVlID0gdG9SYXcob2xkVmFsdWUpO1xuICAgICAgaWYgKCFpc0FycmF5KHRhcmdldCkgJiYgaXNSZWYob2xkVmFsdWUpICYmICFpc1JlZih2YWx1ZSkpIHtcbiAgICAgICAgb2xkVmFsdWUudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGhhZEtleSA9IGlzQXJyYXkodGFyZ2V0KSAmJiBpc0ludGVnZXJLZXkoa2V5KSA/IE51bWJlcihrZXkpIDwgdGFyZ2V0Lmxlbmd0aCA6IGhhc093bih0YXJnZXQsIGtleSk7XG4gICAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5zZXQodGFyZ2V0LCBrZXksIHZhbHVlLCByZWNlaXZlcik7XG4gICAgaWYgKHRhcmdldCA9PT0gdG9SYXcocmVjZWl2ZXIpKSB7XG4gICAgICBpZiAoIWhhZEtleSkge1xuICAgICAgICB0cmlnZ2VyKHRhcmdldCwgXCJhZGRcIiwga2V5LCB2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGhhc0NoYW5nZWQodmFsdWUsIG9sZFZhbHVlKSkge1xuICAgICAgICB0cmlnZ2VyKHRhcmdldCwgXCJzZXRcIiwga2V5LCB2YWx1ZSwgb2xkVmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufVxuZnVuY3Rpb24gZGVsZXRlUHJvcGVydHkodGFyZ2V0LCBrZXkpIHtcbiAgY29uc3QgaGFkS2V5ID0gaGFzT3duKHRhcmdldCwga2V5KTtcbiAgY29uc3Qgb2xkVmFsdWUgPSB0YXJnZXRba2V5XTtcbiAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5kZWxldGVQcm9wZXJ0eSh0YXJnZXQsIGtleSk7XG4gIGlmIChyZXN1bHQgJiYgaGFkS2V5KSB7XG4gICAgdHJpZ2dlcih0YXJnZXQsIFwiZGVsZXRlXCIsIGtleSwgdm9pZCAwLCBvbGRWYWx1ZSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGhhcyh0YXJnZXQsIGtleSkge1xuICBjb25zdCByZXN1bHQgPSBSZWZsZWN0Lmhhcyh0YXJnZXQsIGtleSk7XG4gIGlmICghaXNTeW1ib2woa2V5KSB8fCAhYnVpbHRJblN5bWJvbHMuaGFzKGtleSkpIHtcbiAgICB0cmFjayh0YXJnZXQsIFwiaGFzXCIsIGtleSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIG93bktleXModGFyZ2V0KSB7XG4gIHRyYWNrKHRhcmdldCwgXCJpdGVyYXRlXCIsIGlzQXJyYXkodGFyZ2V0KSA/IFwibGVuZ3RoXCIgOiBJVEVSQVRFX0tFWSk7XG4gIHJldHVybiBSZWZsZWN0Lm93bktleXModGFyZ2V0KTtcbn1cbnZhciBtdXRhYmxlSGFuZGxlcnMgPSB7XG4gIGdldDogZ2V0MixcbiAgc2V0OiBzZXQyLFxuICBkZWxldGVQcm9wZXJ0eSxcbiAgaGFzLFxuICBvd25LZXlzXG59O1xudmFyIHJlYWRvbmx5SGFuZGxlcnMgPSB7XG4gIGdldDogcmVhZG9ubHlHZXQsXG4gIHNldCh0YXJnZXQsIGtleSkge1xuICAgIGlmICh0cnVlKSB7XG4gICAgICBjb25zb2xlLndhcm4oYFNldCBvcGVyYXRpb24gb24ga2V5IFwiJHtTdHJpbmcoa2V5KX1cIiBmYWlsZWQ6IHRhcmdldCBpcyByZWFkb25seS5gLCB0YXJnZXQpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcbiAgZGVsZXRlUHJvcGVydHkodGFyZ2V0LCBrZXkpIHtcbiAgICBpZiAodHJ1ZSkge1xuICAgICAgY29uc29sZS53YXJuKGBEZWxldGUgb3BlcmF0aW9uIG9uIGtleSBcIiR7U3RyaW5nKGtleSl9XCIgZmFpbGVkOiB0YXJnZXQgaXMgcmVhZG9ubHkuYCwgdGFyZ2V0KTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn07XG52YXIgdG9SZWFjdGl2ZSA9ICh2YWx1ZSkgPT4gaXNPYmplY3QodmFsdWUpID8gcmVhY3RpdmUyKHZhbHVlKSA6IHZhbHVlO1xudmFyIHRvUmVhZG9ubHkgPSAodmFsdWUpID0+IGlzT2JqZWN0KHZhbHVlKSA/IHJlYWRvbmx5KHZhbHVlKSA6IHZhbHVlO1xudmFyIHRvU2hhbGxvdyA9ICh2YWx1ZSkgPT4gdmFsdWU7XG52YXIgZ2V0UHJvdG8gPSAodikgPT4gUmVmbGVjdC5nZXRQcm90b3R5cGVPZih2KTtcbmZ1bmN0aW9uIGdldCQxKHRhcmdldCwga2V5LCBpc1JlYWRvbmx5ID0gZmFsc2UsIGlzU2hhbGxvdyA9IGZhbHNlKSB7XG4gIHRhcmdldCA9IHRhcmdldFtcbiAgICBcIl9fdl9yYXdcIlxuICAgIC8qIFJBVyAqL1xuICBdO1xuICBjb25zdCByYXdUYXJnZXQgPSB0b1Jhdyh0YXJnZXQpO1xuICBjb25zdCByYXdLZXkgPSB0b1JhdyhrZXkpO1xuICBpZiAoa2V5ICE9PSByYXdLZXkpIHtcbiAgICAhaXNSZWFkb25seSAmJiB0cmFjayhyYXdUYXJnZXQsIFwiZ2V0XCIsIGtleSk7XG4gIH1cbiAgIWlzUmVhZG9ubHkgJiYgdHJhY2socmF3VGFyZ2V0LCBcImdldFwiLCByYXdLZXkpO1xuICBjb25zdCB7IGhhczogaGFzMiB9ID0gZ2V0UHJvdG8ocmF3VGFyZ2V0KTtcbiAgY29uc3Qgd3JhcCA9IGlzU2hhbGxvdyA/IHRvU2hhbGxvdyA6IGlzUmVhZG9ubHkgPyB0b1JlYWRvbmx5IDogdG9SZWFjdGl2ZTtcbiAgaWYgKGhhczIuY2FsbChyYXdUYXJnZXQsIGtleSkpIHtcbiAgICByZXR1cm4gd3JhcCh0YXJnZXQuZ2V0KGtleSkpO1xuICB9IGVsc2UgaWYgKGhhczIuY2FsbChyYXdUYXJnZXQsIHJhd0tleSkpIHtcbiAgICByZXR1cm4gd3JhcCh0YXJnZXQuZ2V0KHJhd0tleSkpO1xuICB9IGVsc2UgaWYgKHRhcmdldCAhPT0gcmF3VGFyZ2V0KSB7XG4gICAgdGFyZ2V0LmdldChrZXkpO1xuICB9XG59XG5mdW5jdGlvbiBoYXMkMShrZXksIGlzUmVhZG9ubHkgPSBmYWxzZSkge1xuICBjb25zdCB0YXJnZXQgPSB0aGlzW1xuICAgIFwiX192X3Jhd1wiXG4gICAgLyogUkFXICovXG4gIF07XG4gIGNvbnN0IHJhd1RhcmdldCA9IHRvUmF3KHRhcmdldCk7XG4gIGNvbnN0IHJhd0tleSA9IHRvUmF3KGtleSk7XG4gIGlmIChrZXkgIT09IHJhd0tleSkge1xuICAgICFpc1JlYWRvbmx5ICYmIHRyYWNrKHJhd1RhcmdldCwgXCJoYXNcIiwga2V5KTtcbiAgfVxuICAhaXNSZWFkb25seSAmJiB0cmFjayhyYXdUYXJnZXQsIFwiaGFzXCIsIHJhd0tleSk7XG4gIHJldHVybiBrZXkgPT09IHJhd0tleSA/IHRhcmdldC5oYXMoa2V5KSA6IHRhcmdldC5oYXMoa2V5KSB8fCB0YXJnZXQuaGFzKHJhd0tleSk7XG59XG5mdW5jdGlvbiBzaXplKHRhcmdldCwgaXNSZWFkb25seSA9IGZhbHNlKSB7XG4gIHRhcmdldCA9IHRhcmdldFtcbiAgICBcIl9fdl9yYXdcIlxuICAgIC8qIFJBVyAqL1xuICBdO1xuICAhaXNSZWFkb25seSAmJiB0cmFjayh0b1Jhdyh0YXJnZXQpLCBcIml0ZXJhdGVcIiwgSVRFUkFURV9LRVkpO1xuICByZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0LCBcInNpemVcIiwgdGFyZ2V0KTtcbn1cbmZ1bmN0aW9uIGFkZCh2YWx1ZSkge1xuICB2YWx1ZSA9IHRvUmF3KHZhbHVlKTtcbiAgY29uc3QgdGFyZ2V0ID0gdG9SYXcodGhpcyk7XG4gIGNvbnN0IHByb3RvID0gZ2V0UHJvdG8odGFyZ2V0KTtcbiAgY29uc3QgaGFkS2V5ID0gcHJvdG8uaGFzLmNhbGwodGFyZ2V0LCB2YWx1ZSk7XG4gIGlmICghaGFkS2V5KSB7XG4gICAgdGFyZ2V0LmFkZCh2YWx1ZSk7XG4gICAgdHJpZ2dlcih0YXJnZXQsIFwiYWRkXCIsIHZhbHVlLCB2YWx1ZSk7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59XG5mdW5jdGlvbiBzZXQkMShrZXksIHZhbHVlKSB7XG4gIHZhbHVlID0gdG9SYXcodmFsdWUpO1xuICBjb25zdCB0YXJnZXQgPSB0b1Jhdyh0aGlzKTtcbiAgY29uc3QgeyBoYXM6IGhhczIsIGdldDogZ2V0MyB9ID0gZ2V0UHJvdG8odGFyZ2V0KTtcbiAgbGV0IGhhZEtleSA9IGhhczIuY2FsbCh0YXJnZXQsIGtleSk7XG4gIGlmICghaGFkS2V5KSB7XG4gICAga2V5ID0gdG9SYXcoa2V5KTtcbiAgICBoYWRLZXkgPSBoYXMyLmNhbGwodGFyZ2V0LCBrZXkpO1xuICB9IGVsc2UgaWYgKHRydWUpIHtcbiAgICBjaGVja0lkZW50aXR5S2V5cyh0YXJnZXQsIGhhczIsIGtleSk7XG4gIH1cbiAgY29uc3Qgb2xkVmFsdWUgPSBnZXQzLmNhbGwodGFyZ2V0LCBrZXkpO1xuICB0YXJnZXQuc2V0KGtleSwgdmFsdWUpO1xuICBpZiAoIWhhZEtleSkge1xuICAgIHRyaWdnZXIodGFyZ2V0LCBcImFkZFwiLCBrZXksIHZhbHVlKTtcbiAgfSBlbHNlIGlmIChoYXNDaGFuZ2VkKHZhbHVlLCBvbGRWYWx1ZSkpIHtcbiAgICB0cmlnZ2VyKHRhcmdldCwgXCJzZXRcIiwga2V5LCB2YWx1ZSwgb2xkVmFsdWUpO1xuICB9XG4gIHJldHVybiB0aGlzO1xufVxuZnVuY3Rpb24gZGVsZXRlRW50cnkoa2V5KSB7XG4gIGNvbnN0IHRhcmdldCA9IHRvUmF3KHRoaXMpO1xuICBjb25zdCB7IGhhczogaGFzMiwgZ2V0OiBnZXQzIH0gPSBnZXRQcm90byh0YXJnZXQpO1xuICBsZXQgaGFkS2V5ID0gaGFzMi5jYWxsKHRhcmdldCwga2V5KTtcbiAgaWYgKCFoYWRLZXkpIHtcbiAgICBrZXkgPSB0b1JhdyhrZXkpO1xuICAgIGhhZEtleSA9IGhhczIuY2FsbCh0YXJnZXQsIGtleSk7XG4gIH0gZWxzZSBpZiAodHJ1ZSkge1xuICAgIGNoZWNrSWRlbnRpdHlLZXlzKHRhcmdldCwgaGFzMiwga2V5KTtcbiAgfVxuICBjb25zdCBvbGRWYWx1ZSA9IGdldDMgPyBnZXQzLmNhbGwodGFyZ2V0LCBrZXkpIDogdm9pZCAwO1xuICBjb25zdCByZXN1bHQgPSB0YXJnZXQuZGVsZXRlKGtleSk7XG4gIGlmIChoYWRLZXkpIHtcbiAgICB0cmlnZ2VyKHRhcmdldCwgXCJkZWxldGVcIiwga2V5LCB2b2lkIDAsIG9sZFZhbHVlKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gY2xlYXIoKSB7XG4gIGNvbnN0IHRhcmdldCA9IHRvUmF3KHRoaXMpO1xuICBjb25zdCBoYWRJdGVtcyA9IHRhcmdldC5zaXplICE9PSAwO1xuICBjb25zdCBvbGRUYXJnZXQgPSB0cnVlID8gaXNNYXAodGFyZ2V0KSA/IG5ldyBNYXAodGFyZ2V0KSA6IG5ldyBTZXQodGFyZ2V0KSA6IHZvaWQgMDtcbiAgY29uc3QgcmVzdWx0ID0gdGFyZ2V0LmNsZWFyKCk7XG4gIGlmIChoYWRJdGVtcykge1xuICAgIHRyaWdnZXIodGFyZ2V0LCBcImNsZWFyXCIsIHZvaWQgMCwgdm9pZCAwLCBvbGRUYXJnZXQpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBjcmVhdGVGb3JFYWNoKGlzUmVhZG9ubHksIGlzU2hhbGxvdykge1xuICByZXR1cm4gZnVuY3Rpb24gZm9yRWFjaChjYWxsYmFjaywgdGhpc0FyZykge1xuICAgIGNvbnN0IG9ic2VydmVkID0gdGhpcztcbiAgICBjb25zdCB0YXJnZXQgPSBvYnNlcnZlZFtcbiAgICAgIFwiX192X3Jhd1wiXG4gICAgICAvKiBSQVcgKi9cbiAgICBdO1xuICAgIGNvbnN0IHJhd1RhcmdldCA9IHRvUmF3KHRhcmdldCk7XG4gICAgY29uc3Qgd3JhcCA9IGlzU2hhbGxvdyA/IHRvU2hhbGxvdyA6IGlzUmVhZG9ubHkgPyB0b1JlYWRvbmx5IDogdG9SZWFjdGl2ZTtcbiAgICAhaXNSZWFkb25seSAmJiB0cmFjayhyYXdUYXJnZXQsIFwiaXRlcmF0ZVwiLCBJVEVSQVRFX0tFWSk7XG4gICAgcmV0dXJuIHRhcmdldC5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICByZXR1cm4gY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB3cmFwKHZhbHVlKSwgd3JhcChrZXkpLCBvYnNlcnZlZCk7XG4gICAgfSk7XG4gIH07XG59XG5mdW5jdGlvbiBjcmVhdGVJdGVyYWJsZU1ldGhvZChtZXRob2QsIGlzUmVhZG9ubHksIGlzU2hhbGxvdykge1xuICByZXR1cm4gZnVuY3Rpb24oLi4uYXJncykge1xuICAgIGNvbnN0IHRhcmdldCA9IHRoaXNbXG4gICAgICBcIl9fdl9yYXdcIlxuICAgICAgLyogUkFXICovXG4gICAgXTtcbiAgICBjb25zdCByYXdUYXJnZXQgPSB0b1Jhdyh0YXJnZXQpO1xuICAgIGNvbnN0IHRhcmdldElzTWFwID0gaXNNYXAocmF3VGFyZ2V0KTtcbiAgICBjb25zdCBpc1BhaXIgPSBtZXRob2QgPT09IFwiZW50cmllc1wiIHx8IG1ldGhvZCA9PT0gU3ltYm9sLml0ZXJhdG9yICYmIHRhcmdldElzTWFwO1xuICAgIGNvbnN0IGlzS2V5T25seSA9IG1ldGhvZCA9PT0gXCJrZXlzXCIgJiYgdGFyZ2V0SXNNYXA7XG4gICAgY29uc3QgaW5uZXJJdGVyYXRvciA9IHRhcmdldFttZXRob2RdKC4uLmFyZ3MpO1xuICAgIGNvbnN0IHdyYXAgPSBpc1NoYWxsb3cgPyB0b1NoYWxsb3cgOiBpc1JlYWRvbmx5ID8gdG9SZWFkb25seSA6IHRvUmVhY3RpdmU7XG4gICAgIWlzUmVhZG9ubHkgJiYgdHJhY2socmF3VGFyZ2V0LCBcIml0ZXJhdGVcIiwgaXNLZXlPbmx5ID8gTUFQX0tFWV9JVEVSQVRFX0tFWSA6IElURVJBVEVfS0VZKTtcbiAgICByZXR1cm4ge1xuICAgICAgLy8gaXRlcmF0b3IgcHJvdG9jb2xcbiAgICAgIG5leHQoKSB7XG4gICAgICAgIGNvbnN0IHsgdmFsdWUsIGRvbmUgfSA9IGlubmVySXRlcmF0b3IubmV4dCgpO1xuICAgICAgICByZXR1cm4gZG9uZSA/IHsgdmFsdWUsIGRvbmUgfSA6IHtcbiAgICAgICAgICB2YWx1ZTogaXNQYWlyID8gW3dyYXAodmFsdWVbMF0pLCB3cmFwKHZhbHVlWzFdKV0gOiB3cmFwKHZhbHVlKSxcbiAgICAgICAgICBkb25lXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgLy8gaXRlcmFibGUgcHJvdG9jb2xcbiAgICAgIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICB9O1xuICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlUmVhZG9ubHlNZXRob2QodHlwZSkge1xuICByZXR1cm4gZnVuY3Rpb24oLi4uYXJncykge1xuICAgIGlmICh0cnVlKSB7XG4gICAgICBjb25zdCBrZXkgPSBhcmdzWzBdID8gYG9uIGtleSBcIiR7YXJnc1swXX1cIiBgIDogYGA7XG4gICAgICBjb25zb2xlLndhcm4oYCR7Y2FwaXRhbGl6ZSh0eXBlKX0gb3BlcmF0aW9uICR7a2V5fWZhaWxlZDogdGFyZ2V0IGlzIHJlYWRvbmx5LmAsIHRvUmF3KHRoaXMpKTtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGUgPT09IFwiZGVsZXRlXCIgPyBmYWxzZSA6IHRoaXM7XG4gIH07XG59XG5mdW5jdGlvbiBjcmVhdGVJbnN0cnVtZW50YXRpb25zKCkge1xuICBjb25zdCBtdXRhYmxlSW5zdHJ1bWVudGF0aW9uczIgPSB7XG4gICAgZ2V0KGtleSkge1xuICAgICAgcmV0dXJuIGdldCQxKHRoaXMsIGtleSk7XG4gICAgfSxcbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgIHJldHVybiBzaXplKHRoaXMpO1xuICAgIH0sXG4gICAgaGFzOiBoYXMkMSxcbiAgICBhZGQsXG4gICAgc2V0OiBzZXQkMSxcbiAgICBkZWxldGU6IGRlbGV0ZUVudHJ5LFxuICAgIGNsZWFyLFxuICAgIGZvckVhY2g6IGNyZWF0ZUZvckVhY2goZmFsc2UsIGZhbHNlKVxuICB9O1xuICBjb25zdCBzaGFsbG93SW5zdHJ1bWVudGF0aW9uczIgPSB7XG4gICAgZ2V0KGtleSkge1xuICAgICAgcmV0dXJuIGdldCQxKHRoaXMsIGtleSwgZmFsc2UsIHRydWUpO1xuICAgIH0sXG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICByZXR1cm4gc2l6ZSh0aGlzKTtcbiAgICB9LFxuICAgIGhhczogaGFzJDEsXG4gICAgYWRkLFxuICAgIHNldDogc2V0JDEsXG4gICAgZGVsZXRlOiBkZWxldGVFbnRyeSxcbiAgICBjbGVhcixcbiAgICBmb3JFYWNoOiBjcmVhdGVGb3JFYWNoKGZhbHNlLCB0cnVlKVxuICB9O1xuICBjb25zdCByZWFkb25seUluc3RydW1lbnRhdGlvbnMyID0ge1xuICAgIGdldChrZXkpIHtcbiAgICAgIHJldHVybiBnZXQkMSh0aGlzLCBrZXksIHRydWUpO1xuICAgIH0sXG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICByZXR1cm4gc2l6ZSh0aGlzLCB0cnVlKTtcbiAgICB9LFxuICAgIGhhcyhrZXkpIHtcbiAgICAgIHJldHVybiBoYXMkMS5jYWxsKHRoaXMsIGtleSwgdHJ1ZSk7XG4gICAgfSxcbiAgICBhZGQ6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFxuICAgICAgXCJhZGRcIlxuICAgICAgLyogQUREICovXG4gICAgKSxcbiAgICBzZXQ6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFxuICAgICAgXCJzZXRcIlxuICAgICAgLyogU0VUICovXG4gICAgKSxcbiAgICBkZWxldGU6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFxuICAgICAgXCJkZWxldGVcIlxuICAgICAgLyogREVMRVRFICovXG4gICAgKSxcbiAgICBjbGVhcjogY3JlYXRlUmVhZG9ubHlNZXRob2QoXG4gICAgICBcImNsZWFyXCJcbiAgICAgIC8qIENMRUFSICovXG4gICAgKSxcbiAgICBmb3JFYWNoOiBjcmVhdGVGb3JFYWNoKHRydWUsIGZhbHNlKVxuICB9O1xuICBjb25zdCBzaGFsbG93UmVhZG9ubHlJbnN0cnVtZW50YXRpb25zMiA9IHtcbiAgICBnZXQoa2V5KSB7XG4gICAgICByZXR1cm4gZ2V0JDEodGhpcywga2V5LCB0cnVlLCB0cnVlKTtcbiAgICB9LFxuICAgIGdldCBzaXplKCkge1xuICAgICAgcmV0dXJuIHNpemUodGhpcywgdHJ1ZSk7XG4gICAgfSxcbiAgICBoYXMoa2V5KSB7XG4gICAgICByZXR1cm4gaGFzJDEuY2FsbCh0aGlzLCBrZXksIHRydWUpO1xuICAgIH0sXG4gICAgYWRkOiBjcmVhdGVSZWFkb25seU1ldGhvZChcbiAgICAgIFwiYWRkXCJcbiAgICAgIC8qIEFERCAqL1xuICAgICksXG4gICAgc2V0OiBjcmVhdGVSZWFkb25seU1ldGhvZChcbiAgICAgIFwic2V0XCJcbiAgICAgIC8qIFNFVCAqL1xuICAgICksXG4gICAgZGVsZXRlOiBjcmVhdGVSZWFkb25seU1ldGhvZChcbiAgICAgIFwiZGVsZXRlXCJcbiAgICAgIC8qIERFTEVURSAqL1xuICAgICksXG4gICAgY2xlYXI6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFxuICAgICAgXCJjbGVhclwiXG4gICAgICAvKiBDTEVBUiAqL1xuICAgICksXG4gICAgZm9yRWFjaDogY3JlYXRlRm9yRWFjaCh0cnVlLCB0cnVlKVxuICB9O1xuICBjb25zdCBpdGVyYXRvck1ldGhvZHMgPSBbXCJrZXlzXCIsIFwidmFsdWVzXCIsIFwiZW50cmllc1wiLCBTeW1ib2wuaXRlcmF0b3JdO1xuICBpdGVyYXRvck1ldGhvZHMuZm9yRWFjaCgobWV0aG9kKSA9PiB7XG4gICAgbXV0YWJsZUluc3RydW1lbnRhdGlvbnMyW21ldGhvZF0gPSBjcmVhdGVJdGVyYWJsZU1ldGhvZChtZXRob2QsIGZhbHNlLCBmYWxzZSk7XG4gICAgcmVhZG9ubHlJbnN0cnVtZW50YXRpb25zMlttZXRob2RdID0gY3JlYXRlSXRlcmFibGVNZXRob2QobWV0aG9kLCB0cnVlLCBmYWxzZSk7XG4gICAgc2hhbGxvd0luc3RydW1lbnRhdGlvbnMyW21ldGhvZF0gPSBjcmVhdGVJdGVyYWJsZU1ldGhvZChtZXRob2QsIGZhbHNlLCB0cnVlKTtcbiAgICBzaGFsbG93UmVhZG9ubHlJbnN0cnVtZW50YXRpb25zMlttZXRob2RdID0gY3JlYXRlSXRlcmFibGVNZXRob2QobWV0aG9kLCB0cnVlLCB0cnVlKTtcbiAgfSk7XG4gIHJldHVybiBbXG4gICAgbXV0YWJsZUluc3RydW1lbnRhdGlvbnMyLFxuICAgIHJlYWRvbmx5SW5zdHJ1bWVudGF0aW9uczIsXG4gICAgc2hhbGxvd0luc3RydW1lbnRhdGlvbnMyLFxuICAgIHNoYWxsb3dSZWFkb25seUluc3RydW1lbnRhdGlvbnMyXG4gIF07XG59XG52YXIgW211dGFibGVJbnN0cnVtZW50YXRpb25zLCByZWFkb25seUluc3RydW1lbnRhdGlvbnMsIHNoYWxsb3dJbnN0cnVtZW50YXRpb25zLCBzaGFsbG93UmVhZG9ubHlJbnN0cnVtZW50YXRpb25zXSA9IC8qIEBfX1BVUkVfXyAqLyBjcmVhdGVJbnN0cnVtZW50YXRpb25zKCk7XG5mdW5jdGlvbiBjcmVhdGVJbnN0cnVtZW50YXRpb25HZXR0ZXIoaXNSZWFkb25seSwgc2hhbGxvdykge1xuICBjb25zdCBpbnN0cnVtZW50YXRpb25zID0gc2hhbGxvdyA/IGlzUmVhZG9ubHkgPyBzaGFsbG93UmVhZG9ubHlJbnN0cnVtZW50YXRpb25zIDogc2hhbGxvd0luc3RydW1lbnRhdGlvbnMgOiBpc1JlYWRvbmx5ID8gcmVhZG9ubHlJbnN0cnVtZW50YXRpb25zIDogbXV0YWJsZUluc3RydW1lbnRhdGlvbnM7XG4gIHJldHVybiAodGFyZ2V0LCBrZXksIHJlY2VpdmVyKSA9PiB7XG4gICAgaWYgKGtleSA9PT0gXCJfX3ZfaXNSZWFjdGl2ZVwiKSB7XG4gICAgICByZXR1cm4gIWlzUmVhZG9ubHk7XG4gICAgfSBlbHNlIGlmIChrZXkgPT09IFwiX192X2lzUmVhZG9ubHlcIikge1xuICAgICAgcmV0dXJuIGlzUmVhZG9ubHk7XG4gICAgfSBlbHNlIGlmIChrZXkgPT09IFwiX192X3Jhd1wiKSB7XG4gICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cbiAgICByZXR1cm4gUmVmbGVjdC5nZXQoaGFzT3duKGluc3RydW1lbnRhdGlvbnMsIGtleSkgJiYga2V5IGluIHRhcmdldCA/IGluc3RydW1lbnRhdGlvbnMgOiB0YXJnZXQsIGtleSwgcmVjZWl2ZXIpO1xuICB9O1xufVxudmFyIG11dGFibGVDb2xsZWN0aW9uSGFuZGxlcnMgPSB7XG4gIGdldDogLyogQF9fUFVSRV9fICovIGNyZWF0ZUluc3RydW1lbnRhdGlvbkdldHRlcihmYWxzZSwgZmFsc2UpXG59O1xudmFyIHJlYWRvbmx5Q29sbGVjdGlvbkhhbmRsZXJzID0ge1xuICBnZXQ6IC8qIEBfX1BVUkVfXyAqLyBjcmVhdGVJbnN0cnVtZW50YXRpb25HZXR0ZXIodHJ1ZSwgZmFsc2UpXG59O1xuZnVuY3Rpb24gY2hlY2tJZGVudGl0eUtleXModGFyZ2V0LCBoYXMyLCBrZXkpIHtcbiAgY29uc3QgcmF3S2V5ID0gdG9SYXcoa2V5KTtcbiAgaWYgKHJhd0tleSAhPT0ga2V5ICYmIGhhczIuY2FsbCh0YXJnZXQsIHJhd0tleSkpIHtcbiAgICBjb25zdCB0eXBlID0gdG9SYXdUeXBlKHRhcmdldCk7XG4gICAgY29uc29sZS53YXJuKGBSZWFjdGl2ZSAke3R5cGV9IGNvbnRhaW5zIGJvdGggdGhlIHJhdyBhbmQgcmVhY3RpdmUgdmVyc2lvbnMgb2YgdGhlIHNhbWUgb2JqZWN0JHt0eXBlID09PSBgTWFwYCA/IGAgYXMga2V5c2AgOiBgYH0sIHdoaWNoIGNhbiBsZWFkIHRvIGluY29uc2lzdGVuY2llcy4gQXZvaWQgZGlmZmVyZW50aWF0aW5nIGJldHdlZW4gdGhlIHJhdyBhbmQgcmVhY3RpdmUgdmVyc2lvbnMgb2YgYW4gb2JqZWN0IGFuZCBvbmx5IHVzZSB0aGUgcmVhY3RpdmUgdmVyc2lvbiBpZiBwb3NzaWJsZS5gKTtcbiAgfVxufVxudmFyIHJlYWN0aXZlTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG52YXIgc2hhbGxvd1JlYWN0aXZlTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG52YXIgcmVhZG9ubHlNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbnZhciBzaGFsbG93UmVhZG9ubHlNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIHRhcmdldFR5cGVNYXAocmF3VHlwZSkge1xuICBzd2l0Y2ggKHJhd1R5cGUpIHtcbiAgICBjYXNlIFwiT2JqZWN0XCI6XG4gICAgY2FzZSBcIkFycmF5XCI6XG4gICAgICByZXR1cm4gMTtcbiAgICBjYXNlIFwiTWFwXCI6XG4gICAgY2FzZSBcIlNldFwiOlxuICAgIGNhc2UgXCJXZWFrTWFwXCI6XG4gICAgY2FzZSBcIldlYWtTZXRcIjpcbiAgICAgIHJldHVybiAyO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gMDtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0VGFyZ2V0VHlwZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWVbXG4gICAgXCJfX3Zfc2tpcFwiXG4gICAgLyogU0tJUCAqL1xuICBdIHx8ICFPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKSA/IDAgOiB0YXJnZXRUeXBlTWFwKHRvUmF3VHlwZSh2YWx1ZSkpO1xufVxuZnVuY3Rpb24gcmVhY3RpdmUyKHRhcmdldCkge1xuICBpZiAodGFyZ2V0ICYmIHRhcmdldFtcbiAgICBcIl9fdl9pc1JlYWRvbmx5XCJcbiAgICAvKiBJU19SRUFET05MWSAqL1xuICBdKSB7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICByZXR1cm4gY3JlYXRlUmVhY3RpdmVPYmplY3QodGFyZ2V0LCBmYWxzZSwgbXV0YWJsZUhhbmRsZXJzLCBtdXRhYmxlQ29sbGVjdGlvbkhhbmRsZXJzLCByZWFjdGl2ZU1hcCk7XG59XG5mdW5jdGlvbiByZWFkb25seSh0YXJnZXQpIHtcbiAgcmV0dXJuIGNyZWF0ZVJlYWN0aXZlT2JqZWN0KHRhcmdldCwgdHJ1ZSwgcmVhZG9ubHlIYW5kbGVycywgcmVhZG9ubHlDb2xsZWN0aW9uSGFuZGxlcnMsIHJlYWRvbmx5TWFwKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVJlYWN0aXZlT2JqZWN0KHRhcmdldCwgaXNSZWFkb25seSwgYmFzZUhhbmRsZXJzLCBjb2xsZWN0aW9uSGFuZGxlcnMsIHByb3h5TWFwKSB7XG4gIGlmICghaXNPYmplY3QodGFyZ2V0KSkge1xuICAgIGlmICh0cnVlKSB7XG4gICAgICBjb25zb2xlLndhcm4oYHZhbHVlIGNhbm5vdCBiZSBtYWRlIHJlYWN0aXZlOiAke1N0cmluZyh0YXJnZXQpfWApO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIGlmICh0YXJnZXRbXG4gICAgXCJfX3ZfcmF3XCJcbiAgICAvKiBSQVcgKi9cbiAgXSAmJiAhKGlzUmVhZG9ubHkgJiYgdGFyZ2V0W1xuICAgIFwiX192X2lzUmVhY3RpdmVcIlxuICAgIC8qIElTX1JFQUNUSVZFICovXG4gIF0pKSB7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICBjb25zdCBleGlzdGluZ1Byb3h5ID0gcHJveHlNYXAuZ2V0KHRhcmdldCk7XG4gIGlmIChleGlzdGluZ1Byb3h5KSB7XG4gICAgcmV0dXJuIGV4aXN0aW5nUHJveHk7XG4gIH1cbiAgY29uc3QgdGFyZ2V0VHlwZSA9IGdldFRhcmdldFR5cGUodGFyZ2V0KTtcbiAgaWYgKHRhcmdldFR5cGUgPT09IDApIHtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIGNvbnN0IHByb3h5ID0gbmV3IFByb3h5KHRhcmdldCwgdGFyZ2V0VHlwZSA9PT0gMiA/IGNvbGxlY3Rpb25IYW5kbGVycyA6IGJhc2VIYW5kbGVycyk7XG4gIHByb3h5TWFwLnNldCh0YXJnZXQsIHByb3h5KTtcbiAgcmV0dXJuIHByb3h5O1xufVxuZnVuY3Rpb24gdG9SYXcob2JzZXJ2ZWQpIHtcbiAgcmV0dXJuIG9ic2VydmVkICYmIHRvUmF3KG9ic2VydmVkW1xuICAgIFwiX192X3Jhd1wiXG4gICAgLyogUkFXICovXG4gIF0pIHx8IG9ic2VydmVkO1xufVxuZnVuY3Rpb24gaXNSZWYocikge1xuICByZXR1cm4gQm9vbGVhbihyICYmIHIuX192X2lzUmVmID09PSB0cnVlKTtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL21hZ2ljcy8kbmV4dFRpY2suanNcbm1hZ2ljKFwibmV4dFRpY2tcIiwgKCkgPT4gbmV4dFRpY2spO1xuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvbWFnaWNzLyRkaXNwYXRjaC5qc1xubWFnaWMoXCJkaXNwYXRjaFwiLCAoZWwpID0+IGRpc3BhdGNoLmJpbmQoZGlzcGF0Y2gsIGVsKSk7XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9tYWdpY3MvJHdhdGNoLmpzXG5tYWdpYyhcIndhdGNoXCIsIChlbCwgeyBldmFsdWF0ZUxhdGVyOiBldmFsdWF0ZUxhdGVyMiwgY2xlYW51cDogY2xlYW51cDIgfSkgPT4gKGtleSwgY2FsbGJhY2spID0+IHtcbiAgbGV0IGV2YWx1YXRlMiA9IGV2YWx1YXRlTGF0ZXIyKGtleSk7XG4gIGxldCBnZXR0ZXIgPSAoKSA9PiB7XG4gICAgbGV0IHZhbHVlO1xuICAgIGV2YWx1YXRlMigoaSkgPT4gdmFsdWUgPSBpKTtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH07XG4gIGxldCB1bndhdGNoID0gd2F0Y2goZ2V0dGVyLCBjYWxsYmFjayk7XG4gIGNsZWFudXAyKHVud2F0Y2gpO1xufSk7XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9tYWdpY3MvJHN0b3JlLmpzXG5tYWdpYyhcInN0b3JlXCIsIGdldFN0b3Jlcyk7XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9tYWdpY3MvJGRhdGEuanNcbm1hZ2ljKFwiZGF0YVwiLCAoZWwpID0+IHNjb3BlKGVsKSk7XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9tYWdpY3MvJHJvb3QuanNcbm1hZ2ljKFwicm9vdFwiLCAoZWwpID0+IGNsb3Nlc3RSb290KGVsKSk7XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9tYWdpY3MvJHJlZnMuanNcbm1hZ2ljKFwicmVmc1wiLCAoZWwpID0+IHtcbiAgaWYgKGVsLl94X3JlZnNfcHJveHkpXG4gICAgcmV0dXJuIGVsLl94X3JlZnNfcHJveHk7XG4gIGVsLl94X3JlZnNfcHJveHkgPSBtZXJnZVByb3hpZXMoZ2V0QXJyYXlPZlJlZk9iamVjdChlbCkpO1xuICByZXR1cm4gZWwuX3hfcmVmc19wcm94eTtcbn0pO1xuZnVuY3Rpb24gZ2V0QXJyYXlPZlJlZk9iamVjdChlbCkge1xuICBsZXQgcmVmT2JqZWN0cyA9IFtdO1xuICBmaW5kQ2xvc2VzdChlbCwgKGkpID0+IHtcbiAgICBpZiAoaS5feF9yZWZzKVxuICAgICAgcmVmT2JqZWN0cy5wdXNoKGkuX3hfcmVmcyk7XG4gIH0pO1xuICByZXR1cm4gcmVmT2JqZWN0cztcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2lkcy5qc1xudmFyIGdsb2JhbElkTWVtbyA9IHt9O1xuZnVuY3Rpb24gZmluZEFuZEluY3JlbWVudElkKG5hbWUpIHtcbiAgaWYgKCFnbG9iYWxJZE1lbW9bbmFtZV0pXG4gICAgZ2xvYmFsSWRNZW1vW25hbWVdID0gMDtcbiAgcmV0dXJuICsrZ2xvYmFsSWRNZW1vW25hbWVdO1xufVxuZnVuY3Rpb24gY2xvc2VzdElkUm9vdChlbCwgbmFtZSkge1xuICByZXR1cm4gZmluZENsb3Nlc3QoZWwsIChlbGVtZW50KSA9PiB7XG4gICAgaWYgKGVsZW1lbnQuX3hfaWRzICYmIGVsZW1lbnQuX3hfaWRzW25hbWVdKVxuICAgICAgcmV0dXJuIHRydWU7XG4gIH0pO1xufVxuZnVuY3Rpb24gc2V0SWRSb290KGVsLCBuYW1lKSB7XG4gIGlmICghZWwuX3hfaWRzKVxuICAgIGVsLl94X2lkcyA9IHt9O1xuICBpZiAoIWVsLl94X2lkc1tuYW1lXSlcbiAgICBlbC5feF9pZHNbbmFtZV0gPSBmaW5kQW5kSW5jcmVtZW50SWQobmFtZSk7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9tYWdpY3MvJGlkLmpzXG5tYWdpYyhcImlkXCIsIChlbCwgeyBjbGVhbnVwOiBjbGVhbnVwMiB9KSA9PiAobmFtZSwga2V5ID0gbnVsbCkgPT4ge1xuICBsZXQgY2FjaGVLZXkgPSBgJHtuYW1lfSR7a2V5ID8gYC0ke2tleX1gIDogXCJcIn1gO1xuICByZXR1cm4gY2FjaGVJZEJ5TmFtZU9uRWxlbWVudChlbCwgY2FjaGVLZXksIGNsZWFudXAyLCAoKSA9PiB7XG4gICAgbGV0IHJvb3QgPSBjbG9zZXN0SWRSb290KGVsLCBuYW1lKTtcbiAgICBsZXQgaWQgPSByb290ID8gcm9vdC5feF9pZHNbbmFtZV0gOiBmaW5kQW5kSW5jcmVtZW50SWQobmFtZSk7XG4gICAgcmV0dXJuIGtleSA/IGAke25hbWV9LSR7aWR9LSR7a2V5fWAgOiBgJHtuYW1lfS0ke2lkfWA7XG4gIH0pO1xufSk7XG5pbnRlcmNlcHRDbG9uZSgoZnJvbSwgdG8pID0+IHtcbiAgaWYgKGZyb20uX3hfaWQpIHtcbiAgICB0by5feF9pZCA9IGZyb20uX3hfaWQ7XG4gIH1cbn0pO1xuZnVuY3Rpb24gY2FjaGVJZEJ5TmFtZU9uRWxlbWVudChlbCwgY2FjaGVLZXksIGNsZWFudXAyLCBjYWxsYmFjaykge1xuICBpZiAoIWVsLl94X2lkKVxuICAgIGVsLl94X2lkID0ge307XG4gIGlmIChlbC5feF9pZFtjYWNoZUtleV0pXG4gICAgcmV0dXJuIGVsLl94X2lkW2NhY2hlS2V5XTtcbiAgbGV0IG91dHB1dCA9IGNhbGxiYWNrKCk7XG4gIGVsLl94X2lkW2NhY2hlS2V5XSA9IG91dHB1dDtcbiAgY2xlYW51cDIoKCkgPT4ge1xuICAgIGRlbGV0ZSBlbC5feF9pZFtjYWNoZUtleV07XG4gIH0pO1xuICByZXR1cm4gb3V0cHV0O1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvbWFnaWNzLyRlbC5qc1xubWFnaWMoXCJlbFwiLCAoZWwpID0+IGVsKTtcblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL21hZ2ljcy9pbmRleC5qc1xud2Fybk1pc3NpbmdQbHVnaW5NYWdpYyhcIkZvY3VzXCIsIFwiZm9jdXNcIiwgXCJmb2N1c1wiKTtcbndhcm5NaXNzaW5nUGx1Z2luTWFnaWMoXCJQZXJzaXN0XCIsIFwicGVyc2lzdFwiLCBcInBlcnNpc3RcIik7XG5mdW5jdGlvbiB3YXJuTWlzc2luZ1BsdWdpbk1hZ2ljKG5hbWUsIG1hZ2ljTmFtZSwgc2x1Zykge1xuICBtYWdpYyhtYWdpY05hbWUsIChlbCkgPT4gd2FybihgWW91IGNhbid0IHVzZSBbJCR7bWFnaWNOYW1lfV0gd2l0aG91dCBmaXJzdCBpbnN0YWxsaW5nIHRoZSBcIiR7bmFtZX1cIiBwbHVnaW4gaGVyZTogaHR0cHM6Ly9hbHBpbmVqcy5kZXYvcGx1Z2lucy8ke3NsdWd9YCwgZWwpKTtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2RpcmVjdGl2ZXMveC1tb2RlbGFibGUuanNcbmRpcmVjdGl2ZShcIm1vZGVsYWJsZVwiLCAoZWwsIHsgZXhwcmVzc2lvbiB9LCB7IGVmZmVjdDogZWZmZWN0MywgZXZhbHVhdGVMYXRlcjogZXZhbHVhdGVMYXRlcjIsIGNsZWFudXA6IGNsZWFudXAyIH0pID0+IHtcbiAgbGV0IGZ1bmMgPSBldmFsdWF0ZUxhdGVyMihleHByZXNzaW9uKTtcbiAgbGV0IGlubmVyR2V0ID0gKCkgPT4ge1xuICAgIGxldCByZXN1bHQ7XG4gICAgZnVuYygoaSkgPT4gcmVzdWx0ID0gaSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbiAgbGV0IGV2YWx1YXRlSW5uZXJTZXQgPSBldmFsdWF0ZUxhdGVyMihgJHtleHByZXNzaW9ufSA9IF9fcGxhY2Vob2xkZXJgKTtcbiAgbGV0IGlubmVyU2V0ID0gKHZhbCkgPT4gZXZhbHVhdGVJbm5lclNldCgoKSA9PiB7XG4gIH0sIHsgc2NvcGU6IHsgXCJfX3BsYWNlaG9sZGVyXCI6IHZhbCB9IH0pO1xuICBsZXQgaW5pdGlhbFZhbHVlID0gaW5uZXJHZXQoKTtcbiAgaW5uZXJTZXQoaW5pdGlhbFZhbHVlKTtcbiAgcXVldWVNaWNyb3Rhc2soKCkgPT4ge1xuICAgIGlmICghZWwuX3hfbW9kZWwpXG4gICAgICByZXR1cm47XG4gICAgZWwuX3hfcmVtb3ZlTW9kZWxMaXN0ZW5lcnNbXCJkZWZhdWx0XCJdKCk7XG4gICAgbGV0IG91dGVyR2V0ID0gZWwuX3hfbW9kZWwuZ2V0O1xuICAgIGxldCBvdXRlclNldCA9IGVsLl94X21vZGVsLnNldDtcbiAgICBsZXQgcmVsZWFzZUVudGFuZ2xlbWVudCA9IGVudGFuZ2xlKFxuICAgICAge1xuICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgcmV0dXJuIG91dGVyR2V0KCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldCh2YWx1ZSkge1xuICAgICAgICAgIG91dGVyU2V0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgZ2V0KCkge1xuICAgICAgICAgIHJldHVybiBpbm5lckdldCgpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQodmFsdWUpIHtcbiAgICAgICAgICBpbm5lclNldCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICAgIGNsZWFudXAyKHJlbGVhc2VFbnRhbmdsZW1lbnQpO1xuICB9KTtcbn0pO1xuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvZGlyZWN0aXZlcy94LXRlbGVwb3J0LmpzXG5kaXJlY3RpdmUoXCJ0ZWxlcG9ydFwiLCAoZWwsIHsgbW9kaWZpZXJzLCBleHByZXNzaW9uIH0sIHsgY2xlYW51cDogY2xlYW51cDIgfSkgPT4ge1xuICBpZiAoZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpICE9PSBcInRlbXBsYXRlXCIpXG4gICAgd2FybihcIngtdGVsZXBvcnQgY2FuIG9ubHkgYmUgdXNlZCBvbiBhIDx0ZW1wbGF0ZT4gdGFnXCIsIGVsKTtcbiAgbGV0IHRhcmdldCA9IGdldFRhcmdldChleHByZXNzaW9uKTtcbiAgbGV0IGNsb25lMiA9IGVsLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpLmZpcnN0RWxlbWVudENoaWxkO1xuICBlbC5feF90ZWxlcG9ydCA9IGNsb25lMjtcbiAgY2xvbmUyLl94X3RlbGVwb3J0QmFjayA9IGVsO1xuICBlbC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXRlbGVwb3J0LXRlbXBsYXRlXCIsIHRydWUpO1xuICBjbG9uZTIuc2V0QXR0cmlidXRlKFwiZGF0YS10ZWxlcG9ydC10YXJnZXRcIiwgdHJ1ZSk7XG4gIGlmIChlbC5feF9mb3J3YXJkRXZlbnRzKSB7XG4gICAgZWwuX3hfZm9yd2FyZEV2ZW50cy5mb3JFYWNoKChldmVudE5hbWUpID0+IHtcbiAgICAgIGNsb25lMi5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgKGUpID0+IHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgZS5jb25zdHJ1Y3RvcihlLnR5cGUsIGUpKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIGFkZFNjb3BlVG9Ob2RlKGNsb25lMiwge30sIGVsKTtcbiAgbGV0IHBsYWNlSW5Eb20gPSAoY2xvbmUzLCB0YXJnZXQyLCBtb2RpZmllcnMyKSA9PiB7XG4gICAgaWYgKG1vZGlmaWVyczIuaW5jbHVkZXMoXCJwcmVwZW5kXCIpKSB7XG4gICAgICB0YXJnZXQyLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGNsb25lMywgdGFyZ2V0Mik7XG4gICAgfSBlbHNlIGlmIChtb2RpZmllcnMyLmluY2x1ZGVzKFwiYXBwZW5kXCIpKSB7XG4gICAgICB0YXJnZXQyLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGNsb25lMywgdGFyZ2V0Mi5uZXh0U2libGluZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhcmdldDIuYXBwZW5kQ2hpbGQoY2xvbmUzKTtcbiAgICB9XG4gIH07XG4gIG11dGF0ZURvbSgoKSA9PiB7XG4gICAgcGxhY2VJbkRvbShjbG9uZTIsIHRhcmdldCwgbW9kaWZpZXJzKTtcbiAgICBza2lwRHVyaW5nQ2xvbmUoKCkgPT4ge1xuICAgICAgaW5pdFRyZWUoY2xvbmUyKTtcbiAgICB9KSgpO1xuICB9KTtcbiAgZWwuX3hfdGVsZXBvcnRQdXRCYWNrID0gKCkgPT4ge1xuICAgIGxldCB0YXJnZXQyID0gZ2V0VGFyZ2V0KGV4cHJlc3Npb24pO1xuICAgIG11dGF0ZURvbSgoKSA9PiB7XG4gICAgICBwbGFjZUluRG9tKGVsLl94X3RlbGVwb3J0LCB0YXJnZXQyLCBtb2RpZmllcnMpO1xuICAgIH0pO1xuICB9O1xuICBjbGVhbnVwMihcbiAgICAoKSA9PiBtdXRhdGVEb20oKCkgPT4ge1xuICAgICAgY2xvbmUyLnJlbW92ZSgpO1xuICAgICAgZGVzdHJveVRyZWUoY2xvbmUyKTtcbiAgICB9KVxuICApO1xufSk7XG52YXIgdGVsZXBvcnRDb250YWluZXJEdXJpbmdDbG9uZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5mdW5jdGlvbiBnZXRUYXJnZXQoZXhwcmVzc2lvbikge1xuICBsZXQgdGFyZ2V0ID0gc2tpcER1cmluZ0Nsb25lKCgpID0+IHtcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihleHByZXNzaW9uKTtcbiAgfSwgKCkgPT4ge1xuICAgIHJldHVybiB0ZWxlcG9ydENvbnRhaW5lckR1cmluZ0Nsb25lO1xuICB9KSgpO1xuICBpZiAoIXRhcmdldClcbiAgICB3YXJuKGBDYW5ub3QgZmluZCB4LXRlbGVwb3J0IGVsZW1lbnQgZm9yIHNlbGVjdG9yOiBcIiR7ZXhwcmVzc2lvbn1cImApO1xuICByZXR1cm4gdGFyZ2V0O1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvZGlyZWN0aXZlcy94LWlnbm9yZS5qc1xudmFyIGhhbmRsZXIgPSAoKSA9PiB7XG59O1xuaGFuZGxlci5pbmxpbmUgPSAoZWwsIHsgbW9kaWZpZXJzIH0sIHsgY2xlYW51cDogY2xlYW51cDIgfSkgPT4ge1xuICBtb2RpZmllcnMuaW5jbHVkZXMoXCJzZWxmXCIpID8gZWwuX3hfaWdub3JlU2VsZiA9IHRydWUgOiBlbC5feF9pZ25vcmUgPSB0cnVlO1xuICBjbGVhbnVwMigoKSA9PiB7XG4gICAgbW9kaWZpZXJzLmluY2x1ZGVzKFwic2VsZlwiKSA/IGRlbGV0ZSBlbC5feF9pZ25vcmVTZWxmIDogZGVsZXRlIGVsLl94X2lnbm9yZTtcbiAgfSk7XG59O1xuZGlyZWN0aXZlKFwiaWdub3JlXCIsIGhhbmRsZXIpO1xuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvZGlyZWN0aXZlcy94LWVmZmVjdC5qc1xuZGlyZWN0aXZlKFwiZWZmZWN0XCIsIHNraXBEdXJpbmdDbG9uZSgoZWwsIHsgZXhwcmVzc2lvbiB9LCB7IGVmZmVjdDogZWZmZWN0MyB9KSA9PiB7XG4gIGVmZmVjdDMoZXZhbHVhdGVMYXRlcihlbCwgZXhwcmVzc2lvbikpO1xufSkpO1xuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvdXRpbHMvb24uanNcbmZ1bmN0aW9uIG9uKGVsLCBldmVudCwgbW9kaWZpZXJzLCBjYWxsYmFjaykge1xuICBsZXQgbGlzdGVuZXJUYXJnZXQgPSBlbDtcbiAgbGV0IGhhbmRsZXI0ID0gKGUpID0+IGNhbGxiYWNrKGUpO1xuICBsZXQgb3B0aW9ucyA9IHt9O1xuICBsZXQgd3JhcEhhbmRsZXIgPSAoY2FsbGJhY2syLCB3cmFwcGVyKSA9PiAoZSkgPT4gd3JhcHBlcihjYWxsYmFjazIsIGUpO1xuICBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKFwiZG90XCIpKVxuICAgIGV2ZW50ID0gZG90U3ludGF4KGV2ZW50KTtcbiAgaWYgKG1vZGlmaWVycy5pbmNsdWRlcyhcImNhbWVsXCIpKVxuICAgIGV2ZW50ID0gY2FtZWxDYXNlMihldmVudCk7XG4gIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoXCJwYXNzaXZlXCIpKVxuICAgIG9wdGlvbnMucGFzc2l2ZSA9IHRydWU7XG4gIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoXCJjYXB0dXJlXCIpKVxuICAgIG9wdGlvbnMuY2FwdHVyZSA9IHRydWU7XG4gIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoXCJ3aW5kb3dcIikpXG4gICAgbGlzdGVuZXJUYXJnZXQgPSB3aW5kb3c7XG4gIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoXCJkb2N1bWVudFwiKSlcbiAgICBsaXN0ZW5lclRhcmdldCA9IGRvY3VtZW50O1xuICBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKFwiZGVib3VuY2VcIikpIHtcbiAgICBsZXQgbmV4dE1vZGlmaWVyID0gbW9kaWZpZXJzW21vZGlmaWVycy5pbmRleE9mKFwiZGVib3VuY2VcIikgKyAxXSB8fCBcImludmFsaWQtd2FpdFwiO1xuICAgIGxldCB3YWl0ID0gaXNOdW1lcmljKG5leHRNb2RpZmllci5zcGxpdChcIm1zXCIpWzBdKSA/IE51bWJlcihuZXh0TW9kaWZpZXIuc3BsaXQoXCJtc1wiKVswXSkgOiAyNTA7XG4gICAgaGFuZGxlcjQgPSBkZWJvdW5jZShoYW5kbGVyNCwgd2FpdCk7XG4gIH1cbiAgaWYgKG1vZGlmaWVycy5pbmNsdWRlcyhcInRocm90dGxlXCIpKSB7XG4gICAgbGV0IG5leHRNb2RpZmllciA9IG1vZGlmaWVyc1ttb2RpZmllcnMuaW5kZXhPZihcInRocm90dGxlXCIpICsgMV0gfHwgXCJpbnZhbGlkLXdhaXRcIjtcbiAgICBsZXQgd2FpdCA9IGlzTnVtZXJpYyhuZXh0TW9kaWZpZXIuc3BsaXQoXCJtc1wiKVswXSkgPyBOdW1iZXIobmV4dE1vZGlmaWVyLnNwbGl0KFwibXNcIilbMF0pIDogMjUwO1xuICAgIGhhbmRsZXI0ID0gdGhyb3R0bGUoaGFuZGxlcjQsIHdhaXQpO1xuICB9XG4gIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoXCJwcmV2ZW50XCIpKVxuICAgIGhhbmRsZXI0ID0gd3JhcEhhbmRsZXIoaGFuZGxlcjQsIChuZXh0LCBlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBuZXh0KGUpO1xuICAgIH0pO1xuICBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKFwic3RvcFwiKSlcbiAgICBoYW5kbGVyNCA9IHdyYXBIYW5kbGVyKGhhbmRsZXI0LCAobmV4dCwgZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIG5leHQoZSk7XG4gICAgfSk7XG4gIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoXCJvbmNlXCIpKSB7XG4gICAgaGFuZGxlcjQgPSB3cmFwSGFuZGxlcihoYW5kbGVyNCwgKG5leHQsIGUpID0+IHtcbiAgICAgIG5leHQoZSk7XG4gICAgICBsaXN0ZW5lclRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyNCwgb3B0aW9ucyk7XG4gICAgfSk7XG4gIH1cbiAgaWYgKG1vZGlmaWVycy5pbmNsdWRlcyhcImF3YXlcIikgfHwgbW9kaWZpZXJzLmluY2x1ZGVzKFwib3V0c2lkZVwiKSkge1xuICAgIGxpc3RlbmVyVGFyZ2V0ID0gZG9jdW1lbnQ7XG4gICAgaGFuZGxlcjQgPSB3cmFwSGFuZGxlcihoYW5kbGVyNCwgKG5leHQsIGUpID0+IHtcbiAgICAgIGlmIChlbC5jb250YWlucyhlLnRhcmdldCkpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGlmIChlLnRhcmdldC5pc0Nvbm5lY3RlZCA9PT0gZmFsc2UpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGlmIChlbC5vZmZzZXRXaWR0aCA8IDEgJiYgZWwub2Zmc2V0SGVpZ2h0IDwgMSlcbiAgICAgICAgcmV0dXJuO1xuICAgICAgaWYgKGVsLl94X2lzU2hvd24gPT09IGZhbHNlKVxuICAgICAgICByZXR1cm47XG4gICAgICBuZXh0KGUpO1xuICAgIH0pO1xuICB9XG4gIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoXCJzZWxmXCIpKVxuICAgIGhhbmRsZXI0ID0gd3JhcEhhbmRsZXIoaGFuZGxlcjQsIChuZXh0LCBlKSA9PiB7XG4gICAgICBlLnRhcmdldCA9PT0gZWwgJiYgbmV4dChlKTtcbiAgICB9KTtcbiAgaWYgKGlzS2V5RXZlbnQoZXZlbnQpIHx8IGlzQ2xpY2tFdmVudChldmVudCkpIHtcbiAgICBoYW5kbGVyNCA9IHdyYXBIYW5kbGVyKGhhbmRsZXI0LCAobmV4dCwgZSkgPT4ge1xuICAgICAgaWYgKGlzTGlzdGVuaW5nRm9yQVNwZWNpZmljS2V5VGhhdEhhc250QmVlblByZXNzZWQoZSwgbW9kaWZpZXJzKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBuZXh0KGUpO1xuICAgIH0pO1xuICB9XG4gIGxpc3RlbmVyVGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXI0LCBvcHRpb25zKTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBsaXN0ZW5lclRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyNCwgb3B0aW9ucyk7XG4gIH07XG59XG5mdW5jdGlvbiBkb3RTeW50YXgoc3ViamVjdCkge1xuICByZXR1cm4gc3ViamVjdC5yZXBsYWNlKC8tL2csIFwiLlwiKTtcbn1cbmZ1bmN0aW9uIGNhbWVsQ2FzZTIoc3ViamVjdCkge1xuICByZXR1cm4gc3ViamVjdC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoLy0oXFx3KS9nLCAobWF0Y2gsIGNoYXIpID0+IGNoYXIudG9VcHBlckNhc2UoKSk7XG59XG5mdW5jdGlvbiBpc051bWVyaWMoc3ViamVjdCkge1xuICByZXR1cm4gIUFycmF5LmlzQXJyYXkoc3ViamVjdCkgJiYgIWlzTmFOKHN1YmplY3QpO1xufVxuZnVuY3Rpb24ga2ViYWJDYXNlMihzdWJqZWN0KSB7XG4gIGlmIChbXCIgXCIsIFwiX1wiXS5pbmNsdWRlcyhcbiAgICBzdWJqZWN0XG4gICkpXG4gICAgcmV0dXJuIHN1YmplY3Q7XG4gIHJldHVybiBzdWJqZWN0LnJlcGxhY2UoLyhbYS16XSkoW0EtWl0pL2csIFwiJDEtJDJcIikucmVwbGFjZSgvW19cXHNdLywgXCItXCIpLnRvTG93ZXJDYXNlKCk7XG59XG5mdW5jdGlvbiBpc0tleUV2ZW50KGV2ZW50KSB7XG4gIHJldHVybiBbXCJrZXlkb3duXCIsIFwia2V5dXBcIl0uaW5jbHVkZXMoZXZlbnQpO1xufVxuZnVuY3Rpb24gaXNDbGlja0V2ZW50KGV2ZW50KSB7XG4gIHJldHVybiBbXCJjb250ZXh0bWVudVwiLCBcImNsaWNrXCIsIFwibW91c2VcIl0uc29tZSgoaSkgPT4gZXZlbnQuaW5jbHVkZXMoaSkpO1xufVxuZnVuY3Rpb24gaXNMaXN0ZW5pbmdGb3JBU3BlY2lmaWNLZXlUaGF0SGFzbnRCZWVuUHJlc3NlZChlLCBtb2RpZmllcnMpIHtcbiAgbGV0IGtleU1vZGlmaWVycyA9IG1vZGlmaWVycy5maWx0ZXIoKGkpID0+IHtcbiAgICByZXR1cm4gIVtcIndpbmRvd1wiLCBcImRvY3VtZW50XCIsIFwicHJldmVudFwiLCBcInN0b3BcIiwgXCJvbmNlXCIsIFwiY2FwdHVyZVwiLCBcInNlbGZcIiwgXCJhd2F5XCIsIFwib3V0c2lkZVwiLCBcInBhc3NpdmVcIl0uaW5jbHVkZXMoaSk7XG4gIH0pO1xuICBpZiAoa2V5TW9kaWZpZXJzLmluY2x1ZGVzKFwiZGVib3VuY2VcIikpIHtcbiAgICBsZXQgZGVib3VuY2VJbmRleCA9IGtleU1vZGlmaWVycy5pbmRleE9mKFwiZGVib3VuY2VcIik7XG4gICAga2V5TW9kaWZpZXJzLnNwbGljZShkZWJvdW5jZUluZGV4LCBpc051bWVyaWMoKGtleU1vZGlmaWVyc1tkZWJvdW5jZUluZGV4ICsgMV0gfHwgXCJpbnZhbGlkLXdhaXRcIikuc3BsaXQoXCJtc1wiKVswXSkgPyAyIDogMSk7XG4gIH1cbiAgaWYgKGtleU1vZGlmaWVycy5pbmNsdWRlcyhcInRocm90dGxlXCIpKSB7XG4gICAgbGV0IGRlYm91bmNlSW5kZXggPSBrZXlNb2RpZmllcnMuaW5kZXhPZihcInRocm90dGxlXCIpO1xuICAgIGtleU1vZGlmaWVycy5zcGxpY2UoZGVib3VuY2VJbmRleCwgaXNOdW1lcmljKChrZXlNb2RpZmllcnNbZGVib3VuY2VJbmRleCArIDFdIHx8IFwiaW52YWxpZC13YWl0XCIpLnNwbGl0KFwibXNcIilbMF0pID8gMiA6IDEpO1xuICB9XG4gIGlmIChrZXlNb2RpZmllcnMubGVuZ3RoID09PSAwKVxuICAgIHJldHVybiBmYWxzZTtcbiAgaWYgKGtleU1vZGlmaWVycy5sZW5ndGggPT09IDEgJiYga2V5VG9Nb2RpZmllcnMoZS5rZXkpLmluY2x1ZGVzKGtleU1vZGlmaWVyc1swXSkpXG4gICAgcmV0dXJuIGZhbHNlO1xuICBjb25zdCBzeXN0ZW1LZXlNb2RpZmllcnMgPSBbXCJjdHJsXCIsIFwic2hpZnRcIiwgXCJhbHRcIiwgXCJtZXRhXCIsIFwiY21kXCIsIFwic3VwZXJcIl07XG4gIGNvbnN0IHNlbGVjdGVkU3lzdGVtS2V5TW9kaWZpZXJzID0gc3lzdGVtS2V5TW9kaWZpZXJzLmZpbHRlcigobW9kaWZpZXIpID0+IGtleU1vZGlmaWVycy5pbmNsdWRlcyhtb2RpZmllcikpO1xuICBrZXlNb2RpZmllcnMgPSBrZXlNb2RpZmllcnMuZmlsdGVyKChpKSA9PiAhc2VsZWN0ZWRTeXN0ZW1LZXlNb2RpZmllcnMuaW5jbHVkZXMoaSkpO1xuICBpZiAoc2VsZWN0ZWRTeXN0ZW1LZXlNb2RpZmllcnMubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGFjdGl2ZWx5UHJlc3NlZEtleU1vZGlmaWVycyA9IHNlbGVjdGVkU3lzdGVtS2V5TW9kaWZpZXJzLmZpbHRlcigobW9kaWZpZXIpID0+IHtcbiAgICAgIGlmIChtb2RpZmllciA9PT0gXCJjbWRcIiB8fCBtb2RpZmllciA9PT0gXCJzdXBlclwiKVxuICAgICAgICBtb2RpZmllciA9IFwibWV0YVwiO1xuICAgICAgcmV0dXJuIGVbYCR7bW9kaWZpZXJ9S2V5YF07XG4gICAgfSk7XG4gICAgaWYgKGFjdGl2ZWx5UHJlc3NlZEtleU1vZGlmaWVycy5sZW5ndGggPT09IHNlbGVjdGVkU3lzdGVtS2V5TW9kaWZpZXJzLmxlbmd0aCkge1xuICAgICAgaWYgKGlzQ2xpY2tFdmVudChlLnR5cGUpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAoa2V5VG9Nb2RpZmllcnMoZS5rZXkpLmluY2x1ZGVzKGtleU1vZGlmaWVyc1swXSkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBrZXlUb01vZGlmaWVycyhrZXkpIHtcbiAgaWYgKCFrZXkpXG4gICAgcmV0dXJuIFtdO1xuICBrZXkgPSBrZWJhYkNhc2UyKGtleSk7XG4gIGxldCBtb2RpZmllclRvS2V5TWFwID0ge1xuICAgIFwiY3RybFwiOiBcImNvbnRyb2xcIixcbiAgICBcInNsYXNoXCI6IFwiL1wiLFxuICAgIFwic3BhY2VcIjogXCIgXCIsXG4gICAgXCJzcGFjZWJhclwiOiBcIiBcIixcbiAgICBcImNtZFwiOiBcIm1ldGFcIixcbiAgICBcImVzY1wiOiBcImVzY2FwZVwiLFxuICAgIFwidXBcIjogXCJhcnJvdy11cFwiLFxuICAgIFwiZG93blwiOiBcImFycm93LWRvd25cIixcbiAgICBcImxlZnRcIjogXCJhcnJvdy1sZWZ0XCIsXG4gICAgXCJyaWdodFwiOiBcImFycm93LXJpZ2h0XCIsXG4gICAgXCJwZXJpb2RcIjogXCIuXCIsXG4gICAgXCJjb21tYVwiOiBcIixcIixcbiAgICBcImVxdWFsXCI6IFwiPVwiLFxuICAgIFwibWludXNcIjogXCItXCIsXG4gICAgXCJ1bmRlcnNjb3JlXCI6IFwiX1wiXG4gIH07XG4gIG1vZGlmaWVyVG9LZXlNYXBba2V5XSA9IGtleTtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKG1vZGlmaWVyVG9LZXlNYXApLm1hcCgobW9kaWZpZXIpID0+IHtcbiAgICBpZiAobW9kaWZpZXJUb0tleU1hcFttb2RpZmllcl0gPT09IGtleSlcbiAgICAgIHJldHVybiBtb2RpZmllcjtcbiAgfSkuZmlsdGVyKChtb2RpZmllcikgPT4gbW9kaWZpZXIpO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvZGlyZWN0aXZlcy94LW1vZGVsLmpzXG5kaXJlY3RpdmUoXCJtb2RlbFwiLCAoZWwsIHsgbW9kaWZpZXJzLCBleHByZXNzaW9uIH0sIHsgZWZmZWN0OiBlZmZlY3QzLCBjbGVhbnVwOiBjbGVhbnVwMiB9KSA9PiB7XG4gIGxldCBzY29wZVRhcmdldCA9IGVsO1xuICBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKFwicGFyZW50XCIpKSB7XG4gICAgc2NvcGVUYXJnZXQgPSBlbC5wYXJlbnROb2RlO1xuICB9XG4gIGxldCBldmFsdWF0ZUdldCA9IGV2YWx1YXRlTGF0ZXIoc2NvcGVUYXJnZXQsIGV4cHJlc3Npb24pO1xuICBsZXQgZXZhbHVhdGVTZXQ7XG4gIGlmICh0eXBlb2YgZXhwcmVzc2lvbiA9PT0gXCJzdHJpbmdcIikge1xuICAgIGV2YWx1YXRlU2V0ID0gZXZhbHVhdGVMYXRlcihzY29wZVRhcmdldCwgYCR7ZXhwcmVzc2lvbn0gPSBfX3BsYWNlaG9sZGVyYCk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGV4cHJlc3Npb24gPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgZXhwcmVzc2lvbigpID09PSBcInN0cmluZ1wiKSB7XG4gICAgZXZhbHVhdGVTZXQgPSBldmFsdWF0ZUxhdGVyKHNjb3BlVGFyZ2V0LCBgJHtleHByZXNzaW9uKCl9ID0gX19wbGFjZWhvbGRlcmApO1xuICB9IGVsc2Uge1xuICAgIGV2YWx1YXRlU2V0ID0gKCkgPT4ge1xuICAgIH07XG4gIH1cbiAgbGV0IGdldFZhbHVlID0gKCkgPT4ge1xuICAgIGxldCByZXN1bHQ7XG4gICAgZXZhbHVhdGVHZXQoKHZhbHVlKSA9PiByZXN1bHQgPSB2YWx1ZSk7XG4gICAgcmV0dXJuIGlzR2V0dGVyU2V0dGVyKHJlc3VsdCkgPyByZXN1bHQuZ2V0KCkgOiByZXN1bHQ7XG4gIH07XG4gIGxldCBzZXRWYWx1ZSA9ICh2YWx1ZSkgPT4ge1xuICAgIGxldCByZXN1bHQ7XG4gICAgZXZhbHVhdGVHZXQoKHZhbHVlMikgPT4gcmVzdWx0ID0gdmFsdWUyKTtcbiAgICBpZiAoaXNHZXR0ZXJTZXR0ZXIocmVzdWx0KSkge1xuICAgICAgcmVzdWx0LnNldCh2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV2YWx1YXRlU2V0KCgpID0+IHtcbiAgICAgIH0sIHtcbiAgICAgICAgc2NvcGU6IHsgXCJfX3BsYWNlaG9sZGVyXCI6IHZhbHVlIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbiAgaWYgKHR5cGVvZiBleHByZXNzaW9uID09PSBcInN0cmluZ1wiICYmIGVsLnR5cGUgPT09IFwicmFkaW9cIikge1xuICAgIG11dGF0ZURvbSgoKSA9PiB7XG4gICAgICBpZiAoIWVsLmhhc0F0dHJpYnV0ZShcIm5hbWVcIikpXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgZXhwcmVzc2lvbik7XG4gICAgfSk7XG4gIH1cbiAgdmFyIGV2ZW50ID0gZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcInNlbGVjdFwiIHx8IFtcImNoZWNrYm94XCIsIFwicmFkaW9cIl0uaW5jbHVkZXMoZWwudHlwZSkgfHwgbW9kaWZpZXJzLmluY2x1ZGVzKFwibGF6eVwiKSA/IFwiY2hhbmdlXCIgOiBcImlucHV0XCI7XG4gIGxldCByZW1vdmVMaXN0ZW5lciA9IGlzQ2xvbmluZyA/ICgpID0+IHtcbiAgfSA6IG9uKGVsLCBldmVudCwgbW9kaWZpZXJzLCAoZSkgPT4ge1xuICAgIHNldFZhbHVlKGdldElucHV0VmFsdWUoZWwsIG1vZGlmaWVycywgZSwgZ2V0VmFsdWUoKSkpO1xuICB9KTtcbiAgaWYgKG1vZGlmaWVycy5pbmNsdWRlcyhcImZpbGxcIikpIHtcbiAgICBpZiAoW3ZvaWQgMCwgbnVsbCwgXCJcIl0uaW5jbHVkZXMoZ2V0VmFsdWUoKSkgfHwgaXNDaGVja2JveChlbCkgJiYgQXJyYXkuaXNBcnJheShnZXRWYWx1ZSgpKSB8fCBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwic2VsZWN0XCIgJiYgZWwubXVsdGlwbGUpIHtcbiAgICAgIHNldFZhbHVlKFxuICAgICAgICBnZXRJbnB1dFZhbHVlKGVsLCBtb2RpZmllcnMsIHsgdGFyZ2V0OiBlbCB9LCBnZXRWYWx1ZSgpKVxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgaWYgKCFlbC5feF9yZW1vdmVNb2RlbExpc3RlbmVycylcbiAgICBlbC5feF9yZW1vdmVNb2RlbExpc3RlbmVycyA9IHt9O1xuICBlbC5feF9yZW1vdmVNb2RlbExpc3RlbmVyc1tcImRlZmF1bHRcIl0gPSByZW1vdmVMaXN0ZW5lcjtcbiAgY2xlYW51cDIoKCkgPT4gZWwuX3hfcmVtb3ZlTW9kZWxMaXN0ZW5lcnNbXCJkZWZhdWx0XCJdKCkpO1xuICBpZiAoZWwuZm9ybSkge1xuICAgIGxldCByZW1vdmVSZXNldExpc3RlbmVyID0gb24oZWwuZm9ybSwgXCJyZXNldFwiLCBbXSwgKGUpID0+IHtcbiAgICAgIG5leHRUaWNrKCgpID0+IGVsLl94X21vZGVsICYmIGVsLl94X21vZGVsLnNldChnZXRJbnB1dFZhbHVlKGVsLCBtb2RpZmllcnMsIHsgdGFyZ2V0OiBlbCB9LCBnZXRWYWx1ZSgpKSkpO1xuICAgIH0pO1xuICAgIGNsZWFudXAyKCgpID0+IHJlbW92ZVJlc2V0TGlzdGVuZXIoKSk7XG4gIH1cbiAgZWwuX3hfbW9kZWwgPSB7XG4gICAgZ2V0KCkge1xuICAgICAgcmV0dXJuIGdldFZhbHVlKCk7XG4gICAgfSxcbiAgICBzZXQodmFsdWUpIHtcbiAgICAgIHNldFZhbHVlKHZhbHVlKTtcbiAgICB9XG4gIH07XG4gIGVsLl94X2ZvcmNlTW9kZWxVcGRhdGUgPSAodmFsdWUpID0+IHtcbiAgICBpZiAodmFsdWUgPT09IHZvaWQgMCAmJiB0eXBlb2YgZXhwcmVzc2lvbiA9PT0gXCJzdHJpbmdcIiAmJiBleHByZXNzaW9uLm1hdGNoKC9cXC4vKSlcbiAgICAgIHZhbHVlID0gXCJcIjtcbiAgICB3aW5kb3cuZnJvbU1vZGVsID0gdHJ1ZTtcbiAgICBtdXRhdGVEb20oKCkgPT4gYmluZChlbCwgXCJ2YWx1ZVwiLCB2YWx1ZSkpO1xuICAgIGRlbGV0ZSB3aW5kb3cuZnJvbU1vZGVsO1xuICB9O1xuICBlZmZlY3QzKCgpID0+IHtcbiAgICBsZXQgdmFsdWUgPSBnZXRWYWx1ZSgpO1xuICAgIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoXCJ1bmludHJ1c2l2ZVwiKSAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmlzU2FtZU5vZGUoZWwpKVxuICAgICAgcmV0dXJuO1xuICAgIGVsLl94X2ZvcmNlTW9kZWxVcGRhdGUodmFsdWUpO1xuICB9KTtcbn0pO1xuZnVuY3Rpb24gZ2V0SW5wdXRWYWx1ZShlbCwgbW9kaWZpZXJzLCBldmVudCwgY3VycmVudFZhbHVlKSB7XG4gIHJldHVybiBtdXRhdGVEb20oKCkgPT4ge1xuICAgIGlmIChldmVudCBpbnN0YW5jZW9mIEN1c3RvbUV2ZW50ICYmIGV2ZW50LmRldGFpbCAhPT0gdm9pZCAwKVxuICAgICAgcmV0dXJuIGV2ZW50LmRldGFpbCAhPT0gbnVsbCAmJiBldmVudC5kZXRhaWwgIT09IHZvaWQgMCA/IGV2ZW50LmRldGFpbCA6IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICBlbHNlIGlmIChpc0NoZWNrYm94KGVsKSkge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY3VycmVudFZhbHVlKSkge1xuICAgICAgICBsZXQgbmV3VmFsdWUgPSBudWxsO1xuICAgICAgICBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKFwibnVtYmVyXCIpKSB7XG4gICAgICAgICAgbmV3VmFsdWUgPSBzYWZlUGFyc2VOdW1iZXIoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoXCJib29sZWFuXCIpKSB7XG4gICAgICAgICAgbmV3VmFsdWUgPSBzYWZlUGFyc2VCb29sZWFuKGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3VmFsdWUgPSBldmVudC50YXJnZXQudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV2ZW50LnRhcmdldC5jaGVja2VkID8gY3VycmVudFZhbHVlLmluY2x1ZGVzKG5ld1ZhbHVlKSA/IGN1cnJlbnRWYWx1ZSA6IGN1cnJlbnRWYWx1ZS5jb25jYXQoW25ld1ZhbHVlXSkgOiBjdXJyZW50VmFsdWUuZmlsdGVyKChlbDIpID0+ICFjaGVja2VkQXR0ckxvb3NlQ29tcGFyZTIoZWwyLCBuZXdWYWx1ZSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGV2ZW50LnRhcmdldC5jaGVja2VkO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcInNlbGVjdFwiICYmIGVsLm11bHRpcGxlKSB7XG4gICAgICBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKFwibnVtYmVyXCIpKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKGV2ZW50LnRhcmdldC5zZWxlY3RlZE9wdGlvbnMpLm1hcCgob3B0aW9uKSA9PiB7XG4gICAgICAgICAgbGV0IHJhd1ZhbHVlID0gb3B0aW9uLnZhbHVlIHx8IG9wdGlvbi50ZXh0O1xuICAgICAgICAgIHJldHVybiBzYWZlUGFyc2VOdW1iZXIocmF3VmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKFwiYm9vbGVhblwiKSkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShldmVudC50YXJnZXQuc2VsZWN0ZWRPcHRpb25zKS5tYXAoKG9wdGlvbikgPT4ge1xuICAgICAgICAgIGxldCByYXdWYWx1ZSA9IG9wdGlvbi52YWx1ZSB8fCBvcHRpb24udGV4dDtcbiAgICAgICAgICByZXR1cm4gc2FmZVBhcnNlQm9vbGVhbihyYXdWYWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIEFycmF5LmZyb20oZXZlbnQudGFyZ2V0LnNlbGVjdGVkT3B0aW9ucykubWFwKChvcHRpb24pID0+IHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbi52YWx1ZSB8fCBvcHRpb24udGV4dDtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgbmV3VmFsdWU7XG4gICAgICBpZiAoaXNSYWRpbyhlbCkpIHtcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5jaGVja2VkKSB7XG4gICAgICAgICAgbmV3VmFsdWUgPSBldmVudC50YXJnZXQudmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3VmFsdWUgPSBjdXJyZW50VmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld1ZhbHVlID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgICAgfVxuICAgICAgaWYgKG1vZGlmaWVycy5pbmNsdWRlcyhcIm51bWJlclwiKSkge1xuICAgICAgICByZXR1cm4gc2FmZVBhcnNlTnVtYmVyKG5ld1ZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKFwiYm9vbGVhblwiKSkge1xuICAgICAgICByZXR1cm4gc2FmZVBhcnNlQm9vbGVhbihuZXdWYWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKG1vZGlmaWVycy5pbmNsdWRlcyhcInRyaW1cIikpIHtcbiAgICAgICAgcmV0dXJuIG5ld1ZhbHVlLnRyaW0oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXdWYWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gc2FmZVBhcnNlTnVtYmVyKHJhd1ZhbHVlKSB7XG4gIGxldCBudW1iZXIgPSByYXdWYWx1ZSA/IHBhcnNlRmxvYXQocmF3VmFsdWUpIDogbnVsbDtcbiAgcmV0dXJuIGlzTnVtZXJpYzIobnVtYmVyKSA/IG51bWJlciA6IHJhd1ZhbHVlO1xufVxuZnVuY3Rpb24gY2hlY2tlZEF0dHJMb29zZUNvbXBhcmUyKHZhbHVlQSwgdmFsdWVCKSB7XG4gIHJldHVybiB2YWx1ZUEgPT0gdmFsdWVCO1xufVxuZnVuY3Rpb24gaXNOdW1lcmljMihzdWJqZWN0KSB7XG4gIHJldHVybiAhQXJyYXkuaXNBcnJheShzdWJqZWN0KSAmJiAhaXNOYU4oc3ViamVjdCk7XG59XG5mdW5jdGlvbiBpc0dldHRlclNldHRlcih2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiB2YWx1ZS5nZXQgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgdmFsdWUuc2V0ID09PSBcImZ1bmN0aW9uXCI7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9kaXJlY3RpdmVzL3gtY2xvYWsuanNcbmRpcmVjdGl2ZShcImNsb2FrXCIsIChlbCkgPT4gcXVldWVNaWNyb3Rhc2soKCkgPT4gbXV0YXRlRG9tKCgpID0+IGVsLnJlbW92ZUF0dHJpYnV0ZShwcmVmaXgoXCJjbG9ha1wiKSkpKSk7XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9kaXJlY3RpdmVzL3gtaW5pdC5qc1xuYWRkSW5pdFNlbGVjdG9yKCgpID0+IGBbJHtwcmVmaXgoXCJpbml0XCIpfV1gKTtcbmRpcmVjdGl2ZShcImluaXRcIiwgc2tpcER1cmluZ0Nsb25lKChlbCwgeyBleHByZXNzaW9uIH0sIHsgZXZhbHVhdGU6IGV2YWx1YXRlMiB9KSA9PiB7XG4gIGlmICh0eXBlb2YgZXhwcmVzc2lvbiA9PT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiAhIWV4cHJlc3Npb24udHJpbSgpICYmIGV2YWx1YXRlMihleHByZXNzaW9uLCB7fSwgZmFsc2UpO1xuICB9XG4gIHJldHVybiBldmFsdWF0ZTIoZXhwcmVzc2lvbiwge30sIGZhbHNlKTtcbn0pKTtcblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2RpcmVjdGl2ZXMveC10ZXh0LmpzXG5kaXJlY3RpdmUoXCJ0ZXh0XCIsIChlbCwgeyBleHByZXNzaW9uIH0sIHsgZWZmZWN0OiBlZmZlY3QzLCBldmFsdWF0ZUxhdGVyOiBldmFsdWF0ZUxhdGVyMiB9KSA9PiB7XG4gIGxldCBldmFsdWF0ZTIgPSBldmFsdWF0ZUxhdGVyMihleHByZXNzaW9uKTtcbiAgZWZmZWN0MygoKSA9PiB7XG4gICAgZXZhbHVhdGUyKCh2YWx1ZSkgPT4ge1xuICAgICAgbXV0YXRlRG9tKCgpID0+IHtcbiAgICAgICAgZWwudGV4dENvbnRlbnQgPSB2YWx1ZTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvZGlyZWN0aXZlcy94LWh0bWwuanNcbmRpcmVjdGl2ZShcImh0bWxcIiwgKGVsLCB7IGV4cHJlc3Npb24gfSwgeyBlZmZlY3Q6IGVmZmVjdDMsIGV2YWx1YXRlTGF0ZXI6IGV2YWx1YXRlTGF0ZXIyIH0pID0+IHtcbiAgbGV0IGV2YWx1YXRlMiA9IGV2YWx1YXRlTGF0ZXIyKGV4cHJlc3Npb24pO1xuICBlZmZlY3QzKCgpID0+IHtcbiAgICBldmFsdWF0ZTIoKHZhbHVlKSA9PiB7XG4gICAgICBtdXRhdGVEb20oKCkgPT4ge1xuICAgICAgICBlbC5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgICAgICAgZWwuX3hfaWdub3JlU2VsZiA9IHRydWU7XG4gICAgICAgIGluaXRUcmVlKGVsKTtcbiAgICAgICAgZGVsZXRlIGVsLl94X2lnbm9yZVNlbGY7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2RpcmVjdGl2ZXMveC1iaW5kLmpzXG5tYXBBdHRyaWJ1dGVzKHN0YXJ0aW5nV2l0aChcIjpcIiwgaW50byhwcmVmaXgoXCJiaW5kOlwiKSkpKTtcbnZhciBoYW5kbGVyMiA9IChlbCwgeyB2YWx1ZSwgbW9kaWZpZXJzLCBleHByZXNzaW9uLCBvcmlnaW5hbCB9LCB7IGVmZmVjdDogZWZmZWN0MywgY2xlYW51cDogY2xlYW51cDIgfSkgPT4ge1xuICBpZiAoIXZhbHVlKSB7XG4gICAgbGV0IGJpbmRpbmdQcm92aWRlcnMgPSB7fTtcbiAgICBpbmplY3RCaW5kaW5nUHJvdmlkZXJzKGJpbmRpbmdQcm92aWRlcnMpO1xuICAgIGxldCBnZXRCaW5kaW5ncyA9IGV2YWx1YXRlTGF0ZXIoZWwsIGV4cHJlc3Npb24pO1xuICAgIGdldEJpbmRpbmdzKChiaW5kaW5ncykgPT4ge1xuICAgICAgYXBwbHlCaW5kaW5nc09iamVjdChlbCwgYmluZGluZ3MsIG9yaWdpbmFsKTtcbiAgICB9LCB7IHNjb3BlOiBiaW5kaW5nUHJvdmlkZXJzIH0pO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAodmFsdWUgPT09IFwia2V5XCIpXG4gICAgcmV0dXJuIHN0b3JlS2V5Rm9yWEZvcihlbCwgZXhwcmVzc2lvbik7XG4gIGlmIChlbC5feF9pbmxpbmVCaW5kaW5ncyAmJiBlbC5feF9pbmxpbmVCaW5kaW5nc1t2YWx1ZV0gJiYgZWwuX3hfaW5saW5lQmluZGluZ3NbdmFsdWVdLmV4dHJhY3QpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgbGV0IGV2YWx1YXRlMiA9IGV2YWx1YXRlTGF0ZXIoZWwsIGV4cHJlc3Npb24pO1xuICBlZmZlY3QzKCgpID0+IGV2YWx1YXRlMigocmVzdWx0KSA9PiB7XG4gICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwICYmIHR5cGVvZiBleHByZXNzaW9uID09PSBcInN0cmluZ1wiICYmIGV4cHJlc3Npb24ubWF0Y2goL1xcLi8pKSB7XG4gICAgICByZXN1bHQgPSBcIlwiO1xuICAgIH1cbiAgICBtdXRhdGVEb20oKCkgPT4gYmluZChlbCwgdmFsdWUsIHJlc3VsdCwgbW9kaWZpZXJzKSk7XG4gIH0pKTtcbiAgY2xlYW51cDIoKCkgPT4ge1xuICAgIGVsLl94X3VuZG9BZGRlZENsYXNzZXMgJiYgZWwuX3hfdW5kb0FkZGVkQ2xhc3NlcygpO1xuICAgIGVsLl94X3VuZG9BZGRlZFN0eWxlcyAmJiBlbC5feF91bmRvQWRkZWRTdHlsZXMoKTtcbiAgfSk7XG59O1xuaGFuZGxlcjIuaW5saW5lID0gKGVsLCB7IHZhbHVlLCBtb2RpZmllcnMsIGV4cHJlc3Npb24gfSkgPT4ge1xuICBpZiAoIXZhbHVlKVxuICAgIHJldHVybjtcbiAgaWYgKCFlbC5feF9pbmxpbmVCaW5kaW5ncylcbiAgICBlbC5feF9pbmxpbmVCaW5kaW5ncyA9IHt9O1xuICBlbC5feF9pbmxpbmVCaW5kaW5nc1t2YWx1ZV0gPSB7IGV4cHJlc3Npb24sIGV4dHJhY3Q6IGZhbHNlIH07XG59O1xuZGlyZWN0aXZlKFwiYmluZFwiLCBoYW5kbGVyMik7XG5mdW5jdGlvbiBzdG9yZUtleUZvclhGb3IoZWwsIGV4cHJlc3Npb24pIHtcbiAgZWwuX3hfa2V5RXhwcmVzc2lvbiA9IGV4cHJlc3Npb247XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9kaXJlY3RpdmVzL3gtZGF0YS5qc1xuYWRkUm9vdFNlbGVjdG9yKCgpID0+IGBbJHtwcmVmaXgoXCJkYXRhXCIpfV1gKTtcbmRpcmVjdGl2ZShcImRhdGFcIiwgKGVsLCB7IGV4cHJlc3Npb24gfSwgeyBjbGVhbnVwOiBjbGVhbnVwMiB9KSA9PiB7XG4gIGlmIChzaG91bGRTa2lwUmVnaXN0ZXJpbmdEYXRhRHVyaW5nQ2xvbmUoZWwpKVxuICAgIHJldHVybjtcbiAgZXhwcmVzc2lvbiA9IGV4cHJlc3Npb24gPT09IFwiXCIgPyBcInt9XCIgOiBleHByZXNzaW9uO1xuICBsZXQgbWFnaWNDb250ZXh0ID0ge307XG4gIGluamVjdE1hZ2ljcyhtYWdpY0NvbnRleHQsIGVsKTtcbiAgbGV0IGRhdGFQcm92aWRlckNvbnRleHQgPSB7fTtcbiAgaW5qZWN0RGF0YVByb3ZpZGVycyhkYXRhUHJvdmlkZXJDb250ZXh0LCBtYWdpY0NvbnRleHQpO1xuICBsZXQgZGF0YTIgPSBldmFsdWF0ZShlbCwgZXhwcmVzc2lvbiwgeyBzY29wZTogZGF0YVByb3ZpZGVyQ29udGV4dCB9KTtcbiAgaWYgKGRhdGEyID09PSB2b2lkIDAgfHwgZGF0YTIgPT09IHRydWUpXG4gICAgZGF0YTIgPSB7fTtcbiAgaW5qZWN0TWFnaWNzKGRhdGEyLCBlbCk7XG4gIGxldCByZWFjdGl2ZURhdGEgPSByZWFjdGl2ZShkYXRhMik7XG4gIGluaXRJbnRlcmNlcHRvcnMocmVhY3RpdmVEYXRhKTtcbiAgbGV0IHVuZG8gPSBhZGRTY29wZVRvTm9kZShlbCwgcmVhY3RpdmVEYXRhKTtcbiAgcmVhY3RpdmVEYXRhW1wiaW5pdFwiXSAmJiBldmFsdWF0ZShlbCwgcmVhY3RpdmVEYXRhW1wiaW5pdFwiXSk7XG4gIGNsZWFudXAyKCgpID0+IHtcbiAgICByZWFjdGl2ZURhdGFbXCJkZXN0cm95XCJdICYmIGV2YWx1YXRlKGVsLCByZWFjdGl2ZURhdGFbXCJkZXN0cm95XCJdKTtcbiAgICB1bmRvKCk7XG4gIH0pO1xufSk7XG5pbnRlcmNlcHRDbG9uZSgoZnJvbSwgdG8pID0+IHtcbiAgaWYgKGZyb20uX3hfZGF0YVN0YWNrKSB7XG4gICAgdG8uX3hfZGF0YVN0YWNrID0gZnJvbS5feF9kYXRhU3RhY2s7XG4gICAgdG8uc2V0QXR0cmlidXRlKFwiZGF0YS1oYXMtYWxwaW5lLXN0YXRlXCIsIHRydWUpO1xuICB9XG59KTtcbmZ1bmN0aW9uIHNob3VsZFNraXBSZWdpc3RlcmluZ0RhdGFEdXJpbmdDbG9uZShlbCkge1xuICBpZiAoIWlzQ2xvbmluZylcbiAgICByZXR1cm4gZmFsc2U7XG4gIGlmIChpc0Nsb25pbmdMZWdhY3kpXG4gICAgcmV0dXJuIHRydWU7XG4gIHJldHVybiBlbC5oYXNBdHRyaWJ1dGUoXCJkYXRhLWhhcy1hbHBpbmUtc3RhdGVcIik7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9kaXJlY3RpdmVzL3gtc2hvdy5qc1xuZGlyZWN0aXZlKFwic2hvd1wiLCAoZWwsIHsgbW9kaWZpZXJzLCBleHByZXNzaW9uIH0sIHsgZWZmZWN0OiBlZmZlY3QzIH0pID0+IHtcbiAgbGV0IGV2YWx1YXRlMiA9IGV2YWx1YXRlTGF0ZXIoZWwsIGV4cHJlc3Npb24pO1xuICBpZiAoIWVsLl94X2RvSGlkZSlcbiAgICBlbC5feF9kb0hpZGUgPSAoKSA9PiB7XG4gICAgICBtdXRhdGVEb20oKCkgPT4ge1xuICAgICAgICBlbC5zdHlsZS5zZXRQcm9wZXJ0eShcImRpc3BsYXlcIiwgXCJub25lXCIsIG1vZGlmaWVycy5pbmNsdWRlcyhcImltcG9ydGFudFwiKSA/IFwiaW1wb3J0YW50XCIgOiB2b2lkIDApO1xuICAgICAgfSk7XG4gICAgfTtcbiAgaWYgKCFlbC5feF9kb1Nob3cpXG4gICAgZWwuX3hfZG9TaG93ID0gKCkgPT4ge1xuICAgICAgbXV0YXRlRG9tKCgpID0+IHtcbiAgICAgICAgaWYgKGVsLnN0eWxlLmxlbmd0aCA9PT0gMSAmJiBlbC5zdHlsZS5kaXNwbGF5ID09PSBcIm5vbmVcIikge1xuICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShcInN0eWxlXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KFwiZGlzcGxheVwiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcbiAgbGV0IGhpZGUgPSAoKSA9PiB7XG4gICAgZWwuX3hfZG9IaWRlKCk7XG4gICAgZWwuX3hfaXNTaG93biA9IGZhbHNlO1xuICB9O1xuICBsZXQgc2hvdyA9ICgpID0+IHtcbiAgICBlbC5feF9kb1Nob3coKTtcbiAgICBlbC5feF9pc1Nob3duID0gdHJ1ZTtcbiAgfTtcbiAgbGV0IGNsaWNrQXdheUNvbXBhdGlibGVTaG93ID0gKCkgPT4gc2V0VGltZW91dChzaG93KTtcbiAgbGV0IHRvZ2dsZSA9IG9uY2UoXG4gICAgKHZhbHVlKSA9PiB2YWx1ZSA/IHNob3coKSA6IGhpZGUoKSxcbiAgICAodmFsdWUpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgZWwuX3hfdG9nZ2xlQW5kQ2FzY2FkZVdpdGhUcmFuc2l0aW9ucyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGVsLl94X3RvZ2dsZUFuZENhc2NhZGVXaXRoVHJhbnNpdGlvbnMoZWwsIHZhbHVlLCBzaG93LCBoaWRlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlID8gY2xpY2tBd2F5Q29tcGF0aWJsZVNob3coKSA6IGhpZGUoKTtcbiAgICAgIH1cbiAgICB9XG4gICk7XG4gIGxldCBvbGRWYWx1ZTtcbiAgbGV0IGZpcnN0VGltZSA9IHRydWU7XG4gIGVmZmVjdDMoKCkgPT4gZXZhbHVhdGUyKCh2YWx1ZSkgPT4ge1xuICAgIGlmICghZmlyc3RUaW1lICYmIHZhbHVlID09PSBvbGRWYWx1ZSlcbiAgICAgIHJldHVybjtcbiAgICBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKFwiaW1tZWRpYXRlXCIpKVxuICAgICAgdmFsdWUgPyBjbGlja0F3YXlDb21wYXRpYmxlU2hvdygpIDogaGlkZSgpO1xuICAgIHRvZ2dsZSh2YWx1ZSk7XG4gICAgb2xkVmFsdWUgPSB2YWx1ZTtcbiAgICBmaXJzdFRpbWUgPSBmYWxzZTtcbiAgfSkpO1xufSk7XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9kaXJlY3RpdmVzL3gtZm9yLmpzXG5kaXJlY3RpdmUoXCJmb3JcIiwgKGVsLCB7IGV4cHJlc3Npb24gfSwgeyBlZmZlY3Q6IGVmZmVjdDMsIGNsZWFudXA6IGNsZWFudXAyIH0pID0+IHtcbiAgbGV0IGl0ZXJhdG9yTmFtZXMgPSBwYXJzZUZvckV4cHJlc3Npb24oZXhwcmVzc2lvbik7XG4gIGxldCBldmFsdWF0ZUl0ZW1zID0gZXZhbHVhdGVMYXRlcihlbCwgaXRlcmF0b3JOYW1lcy5pdGVtcyk7XG4gIGxldCBldmFsdWF0ZUtleSA9IGV2YWx1YXRlTGF0ZXIoXG4gICAgZWwsXG4gICAgLy8gdGhlIHgtYmluZDprZXkgZXhwcmVzc2lvbiBpcyBzdG9yZWQgZm9yIG91ciB1c2UgaW5zdGVhZCBvZiBldmFsdWF0ZWQuXG4gICAgZWwuX3hfa2V5RXhwcmVzc2lvbiB8fCBcImluZGV4XCJcbiAgKTtcbiAgZWwuX3hfcHJldktleXMgPSBbXTtcbiAgZWwuX3hfbG9va3VwID0ge307XG4gIGVmZmVjdDMoKCkgPT4gbG9vcChlbCwgaXRlcmF0b3JOYW1lcywgZXZhbHVhdGVJdGVtcywgZXZhbHVhdGVLZXkpKTtcbiAgY2xlYW51cDIoKCkgPT4ge1xuICAgIE9iamVjdC52YWx1ZXMoZWwuX3hfbG9va3VwKS5mb3JFYWNoKChlbDIpID0+IG11dGF0ZURvbShcbiAgICAgICgpID0+IHtcbiAgICAgICAgZGVzdHJveVRyZWUoZWwyKTtcbiAgICAgICAgZWwyLnJlbW92ZSgpO1xuICAgICAgfVxuICAgICkpO1xuICAgIGRlbGV0ZSBlbC5feF9wcmV2S2V5cztcbiAgICBkZWxldGUgZWwuX3hfbG9va3VwO1xuICB9KTtcbn0pO1xuZnVuY3Rpb24gbG9vcChlbCwgaXRlcmF0b3JOYW1lcywgZXZhbHVhdGVJdGVtcywgZXZhbHVhdGVLZXkpIHtcbiAgbGV0IGlzT2JqZWN0MiA9IChpKSA9PiB0eXBlb2YgaSA9PT0gXCJvYmplY3RcIiAmJiAhQXJyYXkuaXNBcnJheShpKTtcbiAgbGV0IHRlbXBsYXRlRWwgPSBlbDtcbiAgZXZhbHVhdGVJdGVtcygoaXRlbXMpID0+IHtcbiAgICBpZiAoaXNOdW1lcmljMyhpdGVtcykgJiYgaXRlbXMgPj0gMCkge1xuICAgICAgaXRlbXMgPSBBcnJheS5mcm9tKEFycmF5KGl0ZW1zKS5rZXlzKCksIChpKSA9PiBpICsgMSk7XG4gICAgfVxuICAgIGlmIChpdGVtcyA9PT0gdm9pZCAwKVxuICAgICAgaXRlbXMgPSBbXTtcbiAgICBsZXQgbG9va3VwID0gZWwuX3hfbG9va3VwO1xuICAgIGxldCBwcmV2S2V5cyA9IGVsLl94X3ByZXZLZXlzO1xuICAgIGxldCBzY29wZXMgPSBbXTtcbiAgICBsZXQga2V5cyA9IFtdO1xuICAgIGlmIChpc09iamVjdDIoaXRlbXMpKSB7XG4gICAgICBpdGVtcyA9IE9iamVjdC5lbnRyaWVzKGl0ZW1zKS5tYXAoKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICBsZXQgc2NvcGUyID0gZ2V0SXRlcmF0aW9uU2NvcGVWYXJpYWJsZXMoaXRlcmF0b3JOYW1lcywgdmFsdWUsIGtleSwgaXRlbXMpO1xuICAgICAgICBldmFsdWF0ZUtleSgodmFsdWUyKSA9PiB7XG4gICAgICAgICAgaWYgKGtleXMuaW5jbHVkZXModmFsdWUyKSlcbiAgICAgICAgICAgIHdhcm4oXCJEdXBsaWNhdGUga2V5IG9uIHgtZm9yXCIsIGVsKTtcbiAgICAgICAgICBrZXlzLnB1c2godmFsdWUyKTtcbiAgICAgICAgfSwgeyBzY29wZTogeyBpbmRleDoga2V5LCAuLi5zY29wZTIgfSB9KTtcbiAgICAgICAgc2NvcGVzLnB1c2goc2NvcGUyKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBzY29wZTIgPSBnZXRJdGVyYXRpb25TY29wZVZhcmlhYmxlcyhpdGVyYXRvck5hbWVzLCBpdGVtc1tpXSwgaSwgaXRlbXMpO1xuICAgICAgICBldmFsdWF0ZUtleSgodmFsdWUpID0+IHtcbiAgICAgICAgICBpZiAoa2V5cy5pbmNsdWRlcyh2YWx1ZSkpXG4gICAgICAgICAgICB3YXJuKFwiRHVwbGljYXRlIGtleSBvbiB4LWZvclwiLCBlbCk7XG4gICAgICAgICAga2V5cy5wdXNoKHZhbHVlKTtcbiAgICAgICAgfSwgeyBzY29wZTogeyBpbmRleDogaSwgLi4uc2NvcGUyIH0gfSk7XG4gICAgICAgIHNjb3Blcy5wdXNoKHNjb3BlMik7XG4gICAgICB9XG4gICAgfVxuICAgIGxldCBhZGRzID0gW107XG4gICAgbGV0IG1vdmVzID0gW107XG4gICAgbGV0IHJlbW92ZXMgPSBbXTtcbiAgICBsZXQgc2FtZXMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByZXZLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQga2V5ID0gcHJldktleXNbaV07XG4gICAgICBpZiAoa2V5cy5pbmRleE9mKGtleSkgPT09IC0xKVxuICAgICAgICByZW1vdmVzLnB1c2goa2V5KTtcbiAgICB9XG4gICAgcHJldktleXMgPSBwcmV2S2V5cy5maWx0ZXIoKGtleSkgPT4gIXJlbW92ZXMuaW5jbHVkZXMoa2V5KSk7XG4gICAgbGV0IGxhc3RLZXkgPSBcInRlbXBsYXRlXCI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQga2V5ID0ga2V5c1tpXTtcbiAgICAgIGxldCBwcmV2SW5kZXggPSBwcmV2S2V5cy5pbmRleE9mKGtleSk7XG4gICAgICBpZiAocHJldkluZGV4ID09PSAtMSkge1xuICAgICAgICBwcmV2S2V5cy5zcGxpY2UoaSwgMCwga2V5KTtcbiAgICAgICAgYWRkcy5wdXNoKFtsYXN0S2V5LCBpXSk7XG4gICAgICB9IGVsc2UgaWYgKHByZXZJbmRleCAhPT0gaSkge1xuICAgICAgICBsZXQga2V5SW5TcG90ID0gcHJldktleXMuc3BsaWNlKGksIDEpWzBdO1xuICAgICAgICBsZXQga2V5Rm9yU3BvdCA9IHByZXZLZXlzLnNwbGljZShwcmV2SW5kZXggLSAxLCAxKVswXTtcbiAgICAgICAgcHJldktleXMuc3BsaWNlKGksIDAsIGtleUZvclNwb3QpO1xuICAgICAgICBwcmV2S2V5cy5zcGxpY2UocHJldkluZGV4LCAwLCBrZXlJblNwb3QpO1xuICAgICAgICBtb3Zlcy5wdXNoKFtrZXlJblNwb3QsIGtleUZvclNwb3RdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNhbWVzLnB1c2goa2V5KTtcbiAgICAgIH1cbiAgICAgIGxhc3RLZXkgPSBrZXk7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVtb3Zlcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGtleSA9IHJlbW92ZXNbaV07XG4gICAgICBpZiAoIShrZXkgaW4gbG9va3VwKSlcbiAgICAgICAgY29udGludWU7XG4gICAgICBtdXRhdGVEb20oKCkgPT4ge1xuICAgICAgICBkZXN0cm95VHJlZShsb29rdXBba2V5XSk7XG4gICAgICAgIGxvb2t1cFtrZXldLnJlbW92ZSgpO1xuICAgICAgfSk7XG4gICAgICBkZWxldGUgbG9va3VwW2tleV07XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbW92ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBba2V5SW5TcG90LCBrZXlGb3JTcG90XSA9IG1vdmVzW2ldO1xuICAgICAgbGV0IGVsSW5TcG90ID0gbG9va3VwW2tleUluU3BvdF07XG4gICAgICBsZXQgZWxGb3JTcG90ID0gbG9va3VwW2tleUZvclNwb3RdO1xuICAgICAgbGV0IG1hcmtlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBtdXRhdGVEb20oKCkgPT4ge1xuICAgICAgICBpZiAoIWVsRm9yU3BvdClcbiAgICAgICAgICB3YXJuKGB4LWZvciBcIjprZXlcIiBpcyB1bmRlZmluZWQgb3IgaW52YWxpZGAsIHRlbXBsYXRlRWwsIGtleUZvclNwb3QsIGxvb2t1cCk7XG4gICAgICAgIGVsRm9yU3BvdC5hZnRlcihtYXJrZXIpO1xuICAgICAgICBlbEluU3BvdC5hZnRlcihlbEZvclNwb3QpO1xuICAgICAgICBlbEZvclNwb3QuX3hfY3VycmVudElmRWwgJiYgZWxGb3JTcG90LmFmdGVyKGVsRm9yU3BvdC5feF9jdXJyZW50SWZFbCk7XG4gICAgICAgIG1hcmtlci5iZWZvcmUoZWxJblNwb3QpO1xuICAgICAgICBlbEluU3BvdC5feF9jdXJyZW50SWZFbCAmJiBlbEluU3BvdC5hZnRlcihlbEluU3BvdC5feF9jdXJyZW50SWZFbCk7XG4gICAgICAgIG1hcmtlci5yZW1vdmUoKTtcbiAgICAgIH0pO1xuICAgICAgZWxGb3JTcG90Ll94X3JlZnJlc2hYRm9yU2NvcGUoc2NvcGVzW2tleXMuaW5kZXhPZihrZXlGb3JTcG90KV0pO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFkZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBbbGFzdEtleTIsIGluZGV4XSA9IGFkZHNbaV07XG4gICAgICBsZXQgbGFzdEVsID0gbGFzdEtleTIgPT09IFwidGVtcGxhdGVcIiA/IHRlbXBsYXRlRWwgOiBsb29rdXBbbGFzdEtleTJdO1xuICAgICAgaWYgKGxhc3RFbC5feF9jdXJyZW50SWZFbClcbiAgICAgICAgbGFzdEVsID0gbGFzdEVsLl94X2N1cnJlbnRJZkVsO1xuICAgICAgbGV0IHNjb3BlMiA9IHNjb3Blc1tpbmRleF07XG4gICAgICBsZXQga2V5ID0ga2V5c1tpbmRleF07XG4gICAgICBsZXQgY2xvbmUyID0gZG9jdW1lbnQuaW1wb3J0Tm9kZSh0ZW1wbGF0ZUVsLmNvbnRlbnQsIHRydWUpLmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgbGV0IHJlYWN0aXZlU2NvcGUgPSByZWFjdGl2ZShzY29wZTIpO1xuICAgICAgYWRkU2NvcGVUb05vZGUoY2xvbmUyLCByZWFjdGl2ZVNjb3BlLCB0ZW1wbGF0ZUVsKTtcbiAgICAgIGNsb25lMi5feF9yZWZyZXNoWEZvclNjb3BlID0gKG5ld1Njb3BlKSA9PiB7XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKG5ld1Njb3BlKS5mb3JFYWNoKChba2V5MiwgdmFsdWVdKSA9PiB7XG4gICAgICAgICAgcmVhY3RpdmVTY29wZVtrZXkyXSA9IHZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgICBtdXRhdGVEb20oKCkgPT4ge1xuICAgICAgICBsYXN0RWwuYWZ0ZXIoY2xvbmUyKTtcbiAgICAgICAgc2tpcER1cmluZ0Nsb25lKCgpID0+IGluaXRUcmVlKGNsb25lMikpKCk7XG4gICAgICB9KTtcbiAgICAgIGlmICh0eXBlb2Yga2V5ID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHdhcm4oXCJ4LWZvciBrZXkgY2Fubm90IGJlIGFuIG9iamVjdCwgaXQgbXVzdCBiZSBhIHN0cmluZyBvciBhbiBpbnRlZ2VyXCIsIHRlbXBsYXRlRWwpO1xuICAgICAgfVxuICAgICAgbG9va3VwW2tleV0gPSBjbG9uZTI7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2FtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxvb2t1cFtzYW1lc1tpXV0uX3hfcmVmcmVzaFhGb3JTY29wZShzY29wZXNba2V5cy5pbmRleE9mKHNhbWVzW2ldKV0pO1xuICAgIH1cbiAgICB0ZW1wbGF0ZUVsLl94X3ByZXZLZXlzID0ga2V5cztcbiAgfSk7XG59XG5mdW5jdGlvbiBwYXJzZUZvckV4cHJlc3Npb24oZXhwcmVzc2lvbikge1xuICBsZXQgZm9ySXRlcmF0b3JSRSA9IC8sKFteLFxcfVxcXV0qKSg/OiwoW14sXFx9XFxdXSopKT8kLztcbiAgbGV0IHN0cmlwUGFyZW5zUkUgPSAvXlxccypcXCh8XFwpXFxzKiQvZztcbiAgbGV0IGZvckFsaWFzUkUgPSAvKFtcXHNcXFNdKj8pXFxzKyg/OmlufG9mKVxccysoW1xcc1xcU10qKS87XG4gIGxldCBpbk1hdGNoID0gZXhwcmVzc2lvbi5tYXRjaChmb3JBbGlhc1JFKTtcbiAgaWYgKCFpbk1hdGNoKVxuICAgIHJldHVybjtcbiAgbGV0IHJlcyA9IHt9O1xuICByZXMuaXRlbXMgPSBpbk1hdGNoWzJdLnRyaW0oKTtcbiAgbGV0IGl0ZW0gPSBpbk1hdGNoWzFdLnJlcGxhY2Uoc3RyaXBQYXJlbnNSRSwgXCJcIikudHJpbSgpO1xuICBsZXQgaXRlcmF0b3JNYXRjaCA9IGl0ZW0ubWF0Y2goZm9ySXRlcmF0b3JSRSk7XG4gIGlmIChpdGVyYXRvck1hdGNoKSB7XG4gICAgcmVzLml0ZW0gPSBpdGVtLnJlcGxhY2UoZm9ySXRlcmF0b3JSRSwgXCJcIikudHJpbSgpO1xuICAgIHJlcy5pbmRleCA9IGl0ZXJhdG9yTWF0Y2hbMV0udHJpbSgpO1xuICAgIGlmIChpdGVyYXRvck1hdGNoWzJdKSB7XG4gICAgICByZXMuY29sbGVjdGlvbiA9IGl0ZXJhdG9yTWF0Y2hbMl0udHJpbSgpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXMuaXRlbSA9IGl0ZW07XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cbmZ1bmN0aW9uIGdldEl0ZXJhdGlvblNjb3BlVmFyaWFibGVzKGl0ZXJhdG9yTmFtZXMsIGl0ZW0sIGluZGV4LCBpdGVtcykge1xuICBsZXQgc2NvcGVWYXJpYWJsZXMgPSB7fTtcbiAgaWYgKC9eXFxbLipcXF0kLy50ZXN0KGl0ZXJhdG9yTmFtZXMuaXRlbSkgJiYgQXJyYXkuaXNBcnJheShpdGVtKSkge1xuICAgIGxldCBuYW1lcyA9IGl0ZXJhdG9yTmFtZXMuaXRlbS5yZXBsYWNlKFwiW1wiLCBcIlwiKS5yZXBsYWNlKFwiXVwiLCBcIlwiKS5zcGxpdChcIixcIikubWFwKChpKSA9PiBpLnRyaW0oKSk7XG4gICAgbmFtZXMuZm9yRWFjaCgobmFtZSwgaSkgPT4ge1xuICAgICAgc2NvcGVWYXJpYWJsZXNbbmFtZV0gPSBpdGVtW2ldO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKC9eXFx7LipcXH0kLy50ZXN0KGl0ZXJhdG9yTmFtZXMuaXRlbSkgJiYgIUFycmF5LmlzQXJyYXkoaXRlbSkgJiYgdHlwZW9mIGl0ZW0gPT09IFwib2JqZWN0XCIpIHtcbiAgICBsZXQgbmFtZXMgPSBpdGVyYXRvck5hbWVzLml0ZW0ucmVwbGFjZShcIntcIiwgXCJcIikucmVwbGFjZShcIn1cIiwgXCJcIikuc3BsaXQoXCIsXCIpLm1hcCgoaSkgPT4gaS50cmltKCkpO1xuICAgIG5hbWVzLmZvckVhY2goKG5hbWUpID0+IHtcbiAgICAgIHNjb3BlVmFyaWFibGVzW25hbWVdID0gaXRlbVtuYW1lXTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBzY29wZVZhcmlhYmxlc1tpdGVyYXRvck5hbWVzLml0ZW1dID0gaXRlbTtcbiAgfVxuICBpZiAoaXRlcmF0b3JOYW1lcy5pbmRleClcbiAgICBzY29wZVZhcmlhYmxlc1tpdGVyYXRvck5hbWVzLmluZGV4XSA9IGluZGV4O1xuICBpZiAoaXRlcmF0b3JOYW1lcy5jb2xsZWN0aW9uKVxuICAgIHNjb3BlVmFyaWFibGVzW2l0ZXJhdG9yTmFtZXMuY29sbGVjdGlvbl0gPSBpdGVtcztcbiAgcmV0dXJuIHNjb3BlVmFyaWFibGVzO1xufVxuZnVuY3Rpb24gaXNOdW1lcmljMyhzdWJqZWN0KSB7XG4gIHJldHVybiAhQXJyYXkuaXNBcnJheShzdWJqZWN0KSAmJiAhaXNOYU4oc3ViamVjdCk7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9kaXJlY3RpdmVzL3gtcmVmLmpzXG5mdW5jdGlvbiBoYW5kbGVyMygpIHtcbn1cbmhhbmRsZXIzLmlubGluZSA9IChlbCwgeyBleHByZXNzaW9uIH0sIHsgY2xlYW51cDogY2xlYW51cDIgfSkgPT4ge1xuICBsZXQgcm9vdCA9IGNsb3Nlc3RSb290KGVsKTtcbiAgaWYgKCFyb290Ll94X3JlZnMpXG4gICAgcm9vdC5feF9yZWZzID0ge307XG4gIHJvb3QuX3hfcmVmc1tleHByZXNzaW9uXSA9IGVsO1xuICBjbGVhbnVwMigoKSA9PiBkZWxldGUgcm9vdC5feF9yZWZzW2V4cHJlc3Npb25dKTtcbn07XG5kaXJlY3RpdmUoXCJyZWZcIiwgaGFuZGxlcjMpO1xuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvZGlyZWN0aXZlcy94LWlmLmpzXG5kaXJlY3RpdmUoXCJpZlwiLCAoZWwsIHsgZXhwcmVzc2lvbiB9LCB7IGVmZmVjdDogZWZmZWN0MywgY2xlYW51cDogY2xlYW51cDIgfSkgPT4ge1xuICBpZiAoZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpICE9PSBcInRlbXBsYXRlXCIpXG4gICAgd2FybihcIngtaWYgY2FuIG9ubHkgYmUgdXNlZCBvbiBhIDx0ZW1wbGF0ZT4gdGFnXCIsIGVsKTtcbiAgbGV0IGV2YWx1YXRlMiA9IGV2YWx1YXRlTGF0ZXIoZWwsIGV4cHJlc3Npb24pO1xuICBsZXQgc2hvdyA9ICgpID0+IHtcbiAgICBpZiAoZWwuX3hfY3VycmVudElmRWwpXG4gICAgICByZXR1cm4gZWwuX3hfY3VycmVudElmRWw7XG4gICAgbGV0IGNsb25lMiA9IGVsLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpLmZpcnN0RWxlbWVudENoaWxkO1xuICAgIGFkZFNjb3BlVG9Ob2RlKGNsb25lMiwge30sIGVsKTtcbiAgICBtdXRhdGVEb20oKCkgPT4ge1xuICAgICAgZWwuYWZ0ZXIoY2xvbmUyKTtcbiAgICAgIHNraXBEdXJpbmdDbG9uZSgoKSA9PiBpbml0VHJlZShjbG9uZTIpKSgpO1xuICAgIH0pO1xuICAgIGVsLl94X2N1cnJlbnRJZkVsID0gY2xvbmUyO1xuICAgIGVsLl94X3VuZG9JZiA9ICgpID0+IHtcbiAgICAgIG11dGF0ZURvbSgoKSA9PiB7XG4gICAgICAgIGRlc3Ryb3lUcmVlKGNsb25lMik7XG4gICAgICAgIGNsb25lMi5yZW1vdmUoKTtcbiAgICAgIH0pO1xuICAgICAgZGVsZXRlIGVsLl94X2N1cnJlbnRJZkVsO1xuICAgIH07XG4gICAgcmV0dXJuIGNsb25lMjtcbiAgfTtcbiAgbGV0IGhpZGUgPSAoKSA9PiB7XG4gICAgaWYgKCFlbC5feF91bmRvSWYpXG4gICAgICByZXR1cm47XG4gICAgZWwuX3hfdW5kb0lmKCk7XG4gICAgZGVsZXRlIGVsLl94X3VuZG9JZjtcbiAgfTtcbiAgZWZmZWN0MygoKSA9PiBldmFsdWF0ZTIoKHZhbHVlKSA9PiB7XG4gICAgdmFsdWUgPyBzaG93KCkgOiBoaWRlKCk7XG4gIH0pKTtcbiAgY2xlYW51cDIoKCkgPT4gZWwuX3hfdW5kb0lmICYmIGVsLl94X3VuZG9JZigpKTtcbn0pO1xuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvZGlyZWN0aXZlcy94LWlkLmpzXG5kaXJlY3RpdmUoXCJpZFwiLCAoZWwsIHsgZXhwcmVzc2lvbiB9LCB7IGV2YWx1YXRlOiBldmFsdWF0ZTIgfSkgPT4ge1xuICBsZXQgbmFtZXMgPSBldmFsdWF0ZTIoZXhwcmVzc2lvbik7XG4gIG5hbWVzLmZvckVhY2goKG5hbWUpID0+IHNldElkUm9vdChlbCwgbmFtZSkpO1xufSk7XG5pbnRlcmNlcHRDbG9uZSgoZnJvbSwgdG8pID0+IHtcbiAgaWYgKGZyb20uX3hfaWRzKSB7XG4gICAgdG8uX3hfaWRzID0gZnJvbS5feF9pZHM7XG4gIH1cbn0pO1xuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvZGlyZWN0aXZlcy94LW9uLmpzXG5tYXBBdHRyaWJ1dGVzKHN0YXJ0aW5nV2l0aChcIkBcIiwgaW50byhwcmVmaXgoXCJvbjpcIikpKSk7XG5kaXJlY3RpdmUoXCJvblwiLCBza2lwRHVyaW5nQ2xvbmUoKGVsLCB7IHZhbHVlLCBtb2RpZmllcnMsIGV4cHJlc3Npb24gfSwgeyBjbGVhbnVwOiBjbGVhbnVwMiB9KSA9PiB7XG4gIGxldCBldmFsdWF0ZTIgPSBleHByZXNzaW9uID8gZXZhbHVhdGVMYXRlcihlbCwgZXhwcmVzc2lvbikgOiAoKSA9PiB7XG4gIH07XG4gIGlmIChlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwidGVtcGxhdGVcIikge1xuICAgIGlmICghZWwuX3hfZm9yd2FyZEV2ZW50cylcbiAgICAgIGVsLl94X2ZvcndhcmRFdmVudHMgPSBbXTtcbiAgICBpZiAoIWVsLl94X2ZvcndhcmRFdmVudHMuaW5jbHVkZXModmFsdWUpKVxuICAgICAgZWwuX3hfZm9yd2FyZEV2ZW50cy5wdXNoKHZhbHVlKTtcbiAgfVxuICBsZXQgcmVtb3ZlTGlzdGVuZXIgPSBvbihlbCwgdmFsdWUsIG1vZGlmaWVycywgKGUpID0+IHtcbiAgICBldmFsdWF0ZTIoKCkgPT4ge1xuICAgIH0sIHsgc2NvcGU6IHsgXCIkZXZlbnRcIjogZSB9LCBwYXJhbXM6IFtlXSB9KTtcbiAgfSk7XG4gIGNsZWFudXAyKCgpID0+IHJlbW92ZUxpc3RlbmVyKCkpO1xufSkpO1xuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvZGlyZWN0aXZlcy9pbmRleC5qc1xud2Fybk1pc3NpbmdQbHVnaW5EaXJlY3RpdmUoXCJDb2xsYXBzZVwiLCBcImNvbGxhcHNlXCIsIFwiY29sbGFwc2VcIik7XG53YXJuTWlzc2luZ1BsdWdpbkRpcmVjdGl2ZShcIkludGVyc2VjdFwiLCBcImludGVyc2VjdFwiLCBcImludGVyc2VjdFwiKTtcbndhcm5NaXNzaW5nUGx1Z2luRGlyZWN0aXZlKFwiRm9jdXNcIiwgXCJ0cmFwXCIsIFwiZm9jdXNcIik7XG53YXJuTWlzc2luZ1BsdWdpbkRpcmVjdGl2ZShcIk1hc2tcIiwgXCJtYXNrXCIsIFwibWFza1wiKTtcbmZ1bmN0aW9uIHdhcm5NaXNzaW5nUGx1Z2luRGlyZWN0aXZlKG5hbWUsIGRpcmVjdGl2ZU5hbWUsIHNsdWcpIHtcbiAgZGlyZWN0aXZlKGRpcmVjdGl2ZU5hbWUsIChlbCkgPT4gd2FybihgWW91IGNhbid0IHVzZSBbeC0ke2RpcmVjdGl2ZU5hbWV9XSB3aXRob3V0IGZpcnN0IGluc3RhbGxpbmcgdGhlIFwiJHtuYW1lfVwiIHBsdWdpbiBoZXJlOiBodHRwczovL2FscGluZWpzLmRldi9wbHVnaW5zLyR7c2x1Z31gLCBlbCkpO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvaW5kZXguanNcbmFscGluZV9kZWZhdWx0LnNldEV2YWx1YXRvcihub3JtYWxFdmFsdWF0b3IpO1xuYWxwaW5lX2RlZmF1bHQuc2V0UmVhY3Rpdml0eUVuZ2luZSh7IHJlYWN0aXZlOiByZWFjdGl2ZTIsIGVmZmVjdDogZWZmZWN0MiwgcmVsZWFzZTogc3RvcCwgcmF3OiB0b1JhdyB9KTtcbnZhciBzcmNfZGVmYXVsdCA9IGFscGluZV9kZWZhdWx0O1xuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9idWlsZHMvbW9kdWxlLmpzXG52YXIgbW9kdWxlX2RlZmF1bHQgPSBzcmNfZGVmYXVsdDtcbmV4cG9ydCB7XG4gIHNyY19kZWZhdWx0IGFzIEFscGluZSxcbiAgbW9kdWxlX2RlZmF1bHQgYXMgZGVmYXVsdFxufTtcbiIsICJ2YXIgYWRhcHRlcnMgPSB7XG4gIGxvZ2dlcjogdHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgPyBjb25zb2xlIDogdW5kZWZpbmVkLFxuICBXZWJTb2NrZXQ6IHR5cGVvZiBXZWJTb2NrZXQgIT09IFwidW5kZWZpbmVkXCIgPyBXZWJTb2NrZXQgOiB1bmRlZmluZWRcbn07XG5cbnZhciBsb2dnZXIgPSB7XG4gIGxvZyguLi5tZXNzYWdlcykge1xuICAgIGlmICh0aGlzLmVuYWJsZWQpIHtcbiAgICAgIG1lc3NhZ2VzLnB1c2goRGF0ZS5ub3coKSk7XG4gICAgICBhZGFwdGVycy5sb2dnZXIubG9nKFwiW0FjdGlvbkNhYmxlXVwiLCAuLi5tZXNzYWdlcyk7XG4gICAgfVxuICB9XG59O1xuXG5jb25zdCBub3cgPSAoKSA9PiAobmV3IERhdGUpLmdldFRpbWUoKTtcblxuY29uc3Qgc2Vjb25kc1NpbmNlID0gdGltZSA9PiAobm93KCkgLSB0aW1lKSAvIDFlMztcblxuY2xhc3MgQ29ubmVjdGlvbk1vbml0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uKSB7XG4gICAgdGhpcy52aXNpYmlsaXR5RGlkQ2hhbmdlID0gdGhpcy52aXNpYmlsaXR5RGlkQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5jb25uZWN0aW9uID0gY29ubmVjdGlvbjtcbiAgICB0aGlzLnJlY29ubmVjdEF0dGVtcHRzID0gMDtcbiAgfVxuICBzdGFydCgpIHtcbiAgICBpZiAoIXRoaXMuaXNSdW5uaW5nKCkpIHtcbiAgICAgIHRoaXMuc3RhcnRlZEF0ID0gbm93KCk7XG4gICAgICBkZWxldGUgdGhpcy5zdG9wcGVkQXQ7XG4gICAgICB0aGlzLnN0YXJ0UG9sbGluZygpO1xuICAgICAgYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy52aXNpYmlsaXR5RGlkQ2hhbmdlKTtcbiAgICAgIGxvZ2dlci5sb2coYENvbm5lY3Rpb25Nb25pdG9yIHN0YXJ0ZWQuIHN0YWxlIHRocmVzaG9sZCA9ICR7dGhpcy5jb25zdHJ1Y3Rvci5zdGFsZVRocmVzaG9sZH0gc2ApO1xuICAgIH1cbiAgfVxuICBzdG9wKCkge1xuICAgIGlmICh0aGlzLmlzUnVubmluZygpKSB7XG4gICAgICB0aGlzLnN0b3BwZWRBdCA9IG5vdygpO1xuICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xuICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy52aXNpYmlsaXR5RGlkQ2hhbmdlKTtcbiAgICAgIGxvZ2dlci5sb2coXCJDb25uZWN0aW9uTW9uaXRvciBzdG9wcGVkXCIpO1xuICAgIH1cbiAgfVxuICBpc1J1bm5pbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhcnRlZEF0ICYmICF0aGlzLnN0b3BwZWRBdDtcbiAgfVxuICByZWNvcmRNZXNzYWdlKCkge1xuICAgIHRoaXMucGluZ2VkQXQgPSBub3coKTtcbiAgfVxuICByZWNvcmRDb25uZWN0KCkge1xuICAgIHRoaXMucmVjb25uZWN0QXR0ZW1wdHMgPSAwO1xuICAgIGRlbGV0ZSB0aGlzLmRpc2Nvbm5lY3RlZEF0O1xuICAgIGxvZ2dlci5sb2coXCJDb25uZWN0aW9uTW9uaXRvciByZWNvcmRlZCBjb25uZWN0XCIpO1xuICB9XG4gIHJlY29yZERpc2Nvbm5lY3QoKSB7XG4gICAgdGhpcy5kaXNjb25uZWN0ZWRBdCA9IG5vdygpO1xuICAgIGxvZ2dlci5sb2coXCJDb25uZWN0aW9uTW9uaXRvciByZWNvcmRlZCBkaXNjb25uZWN0XCIpO1xuICB9XG4gIHN0YXJ0UG9sbGluZygpIHtcbiAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XG4gICAgdGhpcy5wb2xsKCk7XG4gIH1cbiAgc3RvcFBvbGxpbmcoKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMucG9sbFRpbWVvdXQpO1xuICB9XG4gIHBvbGwoKSB7XG4gICAgdGhpcy5wb2xsVGltZW91dCA9IHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgIHRoaXMucmVjb25uZWN0SWZTdGFsZSgpO1xuICAgICAgdGhpcy5wb2xsKCk7XG4gICAgfSksIHRoaXMuZ2V0UG9sbEludGVydmFsKCkpO1xuICB9XG4gIGdldFBvbGxJbnRlcnZhbCgpIHtcbiAgICBjb25zdCB7c3RhbGVUaHJlc2hvbGQ6IHN0YWxlVGhyZXNob2xkLCByZWNvbm5lY3Rpb25CYWNrb2ZmUmF0ZTogcmVjb25uZWN0aW9uQmFja29mZlJhdGV9ID0gdGhpcy5jb25zdHJ1Y3RvcjtcbiAgICBjb25zdCBiYWNrb2ZmID0gTWF0aC5wb3coMSArIHJlY29ubmVjdGlvbkJhY2tvZmZSYXRlLCBNYXRoLm1pbih0aGlzLnJlY29ubmVjdEF0dGVtcHRzLCAxMCkpO1xuICAgIGNvbnN0IGppdHRlck1heCA9IHRoaXMucmVjb25uZWN0QXR0ZW1wdHMgPT09IDAgPyAxIDogcmVjb25uZWN0aW9uQmFja29mZlJhdGU7XG4gICAgY29uc3Qgaml0dGVyID0gaml0dGVyTWF4ICogTWF0aC5yYW5kb20oKTtcbiAgICByZXR1cm4gc3RhbGVUaHJlc2hvbGQgKiAxZTMgKiBiYWNrb2ZmICogKDEgKyBqaXR0ZXIpO1xuICB9XG4gIHJlY29ubmVjdElmU3RhbGUoKSB7XG4gICAgaWYgKHRoaXMuY29ubmVjdGlvbklzU3RhbGUoKSkge1xuICAgICAgbG9nZ2VyLmxvZyhgQ29ubmVjdGlvbk1vbml0b3IgZGV0ZWN0ZWQgc3RhbGUgY29ubmVjdGlvbi4gcmVjb25uZWN0QXR0ZW1wdHMgPSAke3RoaXMucmVjb25uZWN0QXR0ZW1wdHN9LCB0aW1lIHN0YWxlID0gJHtzZWNvbmRzU2luY2UodGhpcy5yZWZyZXNoZWRBdCl9IHMsIHN0YWxlIHRocmVzaG9sZCA9ICR7dGhpcy5jb25zdHJ1Y3Rvci5zdGFsZVRocmVzaG9sZH0gc2ApO1xuICAgICAgdGhpcy5yZWNvbm5lY3RBdHRlbXB0cysrO1xuICAgICAgaWYgKHRoaXMuZGlzY29ubmVjdGVkUmVjZW50bHkoKSkge1xuICAgICAgICBsb2dnZXIubG9nKGBDb25uZWN0aW9uTW9uaXRvciBza2lwcGluZyByZW9wZW5pbmcgcmVjZW50IGRpc2Nvbm5lY3QuIHRpbWUgZGlzY29ubmVjdGVkID0gJHtzZWNvbmRzU2luY2UodGhpcy5kaXNjb25uZWN0ZWRBdCl9IHNgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvZ2dlci5sb2coXCJDb25uZWN0aW9uTW9uaXRvciByZW9wZW5pbmdcIik7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbi5yZW9wZW4oKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZ2V0IHJlZnJlc2hlZEF0KCkge1xuICAgIHJldHVybiB0aGlzLnBpbmdlZEF0ID8gdGhpcy5waW5nZWRBdCA6IHRoaXMuc3RhcnRlZEF0O1xuICB9XG4gIGNvbm5lY3Rpb25Jc1N0YWxlKCkge1xuICAgIHJldHVybiBzZWNvbmRzU2luY2UodGhpcy5yZWZyZXNoZWRBdCkgPiB0aGlzLmNvbnN0cnVjdG9yLnN0YWxlVGhyZXNob2xkO1xuICB9XG4gIGRpc2Nvbm5lY3RlZFJlY2VudGx5KCkge1xuICAgIHJldHVybiB0aGlzLmRpc2Nvbm5lY3RlZEF0ICYmIHNlY29uZHNTaW5jZSh0aGlzLmRpc2Nvbm5lY3RlZEF0KSA8IHRoaXMuY29uc3RydWN0b3Iuc3RhbGVUaHJlc2hvbGQ7XG4gIH1cbiAgdmlzaWJpbGl0eURpZENoYW5nZSgpIHtcbiAgICBpZiAoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSBcInZpc2libGVcIikge1xuICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5jb25uZWN0aW9uSXNTdGFsZSgpIHx8ICF0aGlzLmNvbm5lY3Rpb24uaXNPcGVuKCkpIHtcbiAgICAgICAgICBsb2dnZXIubG9nKGBDb25uZWN0aW9uTW9uaXRvciByZW9wZW5pbmcgc3RhbGUgY29ubmVjdGlvbiBvbiB2aXNpYmlsaXR5Y2hhbmdlLiB2aXNpYmlsaXR5U3RhdGUgPSAke2RvY3VtZW50LnZpc2liaWxpdHlTdGF0ZX1gKTtcbiAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24ucmVvcGVuKCk7XG4gICAgICAgIH1cbiAgICAgIH0pLCAyMDApO1xuICAgIH1cbiAgfVxufVxuXG5Db25uZWN0aW9uTW9uaXRvci5zdGFsZVRocmVzaG9sZCA9IDY7XG5cbkNvbm5lY3Rpb25Nb25pdG9yLnJlY29ubmVjdGlvbkJhY2tvZmZSYXRlID0gLjE1O1xuXG52YXIgSU5URVJOQUwgPSB7XG4gIG1lc3NhZ2VfdHlwZXM6IHtcbiAgICB3ZWxjb21lOiBcIndlbGNvbWVcIixcbiAgICBkaXNjb25uZWN0OiBcImRpc2Nvbm5lY3RcIixcbiAgICBwaW5nOiBcInBpbmdcIixcbiAgICBjb25maXJtYXRpb246IFwiY29uZmlybV9zdWJzY3JpcHRpb25cIixcbiAgICByZWplY3Rpb246IFwicmVqZWN0X3N1YnNjcmlwdGlvblwiXG4gIH0sXG4gIGRpc2Nvbm5lY3RfcmVhc29uczoge1xuICAgIHVuYXV0aG9yaXplZDogXCJ1bmF1dGhvcml6ZWRcIixcbiAgICBpbnZhbGlkX3JlcXVlc3Q6IFwiaW52YWxpZF9yZXF1ZXN0XCIsXG4gICAgc2VydmVyX3Jlc3RhcnQ6IFwic2VydmVyX3Jlc3RhcnRcIixcbiAgICByZW1vdGU6IFwicmVtb3RlXCJcbiAgfSxcbiAgZGVmYXVsdF9tb3VudF9wYXRoOiBcIi9jYWJsZVwiLFxuICBwcm90b2NvbHM6IFsgXCJhY3Rpb25jYWJsZS12MS1qc29uXCIsIFwiYWN0aW9uY2FibGUtdW5zdXBwb3J0ZWRcIiBdXG59O1xuXG5jb25zdCB7bWVzc2FnZV90eXBlczogbWVzc2FnZV90eXBlcywgcHJvdG9jb2xzOiBwcm90b2NvbHN9ID0gSU5URVJOQUw7XG5cbmNvbnN0IHN1cHBvcnRlZFByb3RvY29scyA9IHByb3RvY29scy5zbGljZSgwLCBwcm90b2NvbHMubGVuZ3RoIC0gMSk7XG5cbmNvbnN0IGluZGV4T2YgPSBbXS5pbmRleE9mO1xuXG5jbGFzcyBDb25uZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoY29uc3VtZXIpIHtcbiAgICB0aGlzLm9wZW4gPSB0aGlzLm9wZW4uYmluZCh0aGlzKTtcbiAgICB0aGlzLmNvbnN1bWVyID0gY29uc3VtZXI7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zID0gdGhpcy5jb25zdW1lci5zdWJzY3JpcHRpb25zO1xuICAgIHRoaXMubW9uaXRvciA9IG5ldyBDb25uZWN0aW9uTW9uaXRvcih0aGlzKTtcbiAgICB0aGlzLmRpc2Nvbm5lY3RlZCA9IHRydWU7XG4gIH1cbiAgc2VuZChkYXRhKSB7XG4gICAgaWYgKHRoaXMuaXNPcGVuKCkpIHtcbiAgICAgIHRoaXMud2ViU29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgb3BlbigpIHtcbiAgICBpZiAodGhpcy5pc0FjdGl2ZSgpKSB7XG4gICAgICBsb2dnZXIubG9nKGBBdHRlbXB0ZWQgdG8gb3BlbiBXZWJTb2NrZXQsIGJ1dCBleGlzdGluZyBzb2NrZXQgaXMgJHt0aGlzLmdldFN0YXRlKCl9YCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNvY2tldFByb3RvY29scyA9IFsgLi4ucHJvdG9jb2xzLCAuLi50aGlzLmNvbnN1bWVyLnN1YnByb3RvY29scyB8fCBbXSBdO1xuICAgICAgbG9nZ2VyLmxvZyhgT3BlbmluZyBXZWJTb2NrZXQsIGN1cnJlbnQgc3RhdGUgaXMgJHt0aGlzLmdldFN0YXRlKCl9LCBzdWJwcm90b2NvbHM6ICR7c29ja2V0UHJvdG9jb2xzfWApO1xuICAgICAgaWYgKHRoaXMud2ViU29ja2V0KSB7XG4gICAgICAgIHRoaXMudW5pbnN0YWxsRXZlbnRIYW5kbGVycygpO1xuICAgICAgfVxuICAgICAgdGhpcy53ZWJTb2NrZXQgPSBuZXcgYWRhcHRlcnMuV2ViU29ja2V0KHRoaXMuY29uc3VtZXIudXJsLCBzb2NrZXRQcm90b2NvbHMpO1xuICAgICAgdGhpcy5pbnN0YWxsRXZlbnRIYW5kbGVycygpO1xuICAgICAgdGhpcy5tb25pdG9yLnN0YXJ0KCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgY2xvc2Uoe2FsbG93UmVjb25uZWN0OiBhbGxvd1JlY29ubmVjdH0gPSB7XG4gICAgYWxsb3dSZWNvbm5lY3Q6IHRydWVcbiAgfSkge1xuICAgIGlmICghYWxsb3dSZWNvbm5lY3QpIHtcbiAgICAgIHRoaXMubW9uaXRvci5zdG9wKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLmlzT3BlbigpKSB7XG4gICAgICByZXR1cm4gdGhpcy53ZWJTb2NrZXQuY2xvc2UoKTtcbiAgICB9XG4gIH1cbiAgcmVvcGVuKCkge1xuICAgIGxvZ2dlci5sb2coYFJlb3BlbmluZyBXZWJTb2NrZXQsIGN1cnJlbnQgc3RhdGUgaXMgJHt0aGlzLmdldFN0YXRlKCl9YCk7XG4gICAgaWYgKHRoaXMuaXNBY3RpdmUoKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xvc2UoKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ2dlci5sb2coXCJGYWlsZWQgdG8gcmVvcGVuIFdlYlNvY2tldFwiLCBlcnJvcik7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBsb2dnZXIubG9nKGBSZW9wZW5pbmcgV2ViU29ja2V0IGluICR7dGhpcy5jb25zdHJ1Y3Rvci5yZW9wZW5EZWxheX1tc2ApO1xuICAgICAgICBzZXRUaW1lb3V0KHRoaXMub3BlbiwgdGhpcy5jb25zdHJ1Y3Rvci5yZW9wZW5EZWxheSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLm9wZW4oKTtcbiAgICB9XG4gIH1cbiAgZ2V0UHJvdG9jb2woKSB7XG4gICAgaWYgKHRoaXMud2ViU29ja2V0KSB7XG4gICAgICByZXR1cm4gdGhpcy53ZWJTb2NrZXQucHJvdG9jb2w7XG4gICAgfVxuICB9XG4gIGlzT3BlbigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1N0YXRlKFwib3BlblwiKTtcbiAgfVxuICBpc0FjdGl2ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1N0YXRlKFwib3BlblwiLCBcImNvbm5lY3RpbmdcIik7XG4gIH1cbiAgdHJpZWRUb1JlY29ubmVjdCgpIHtcbiAgICByZXR1cm4gdGhpcy5tb25pdG9yLnJlY29ubmVjdEF0dGVtcHRzID4gMDtcbiAgfVxuICBpc1Byb3RvY29sU3VwcG9ydGVkKCkge1xuICAgIHJldHVybiBpbmRleE9mLmNhbGwoc3VwcG9ydGVkUHJvdG9jb2xzLCB0aGlzLmdldFByb3RvY29sKCkpID49IDA7XG4gIH1cbiAgaXNTdGF0ZSguLi5zdGF0ZXMpIHtcbiAgICByZXR1cm4gaW5kZXhPZi5jYWxsKHN0YXRlcywgdGhpcy5nZXRTdGF0ZSgpKSA+PSAwO1xuICB9XG4gIGdldFN0YXRlKCkge1xuICAgIGlmICh0aGlzLndlYlNvY2tldCkge1xuICAgICAgZm9yIChsZXQgc3RhdGUgaW4gYWRhcHRlcnMuV2ViU29ja2V0KSB7XG4gICAgICAgIGlmIChhZGFwdGVycy5XZWJTb2NrZXRbc3RhdGVdID09PSB0aGlzLndlYlNvY2tldC5yZWFkeVN0YXRlKSB7XG4gICAgICAgICAgcmV0dXJuIHN0YXRlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaW5zdGFsbEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgZm9yIChsZXQgZXZlbnROYW1lIGluIHRoaXMuZXZlbnRzKSB7XG4gICAgICBjb25zdCBoYW5kbGVyID0gdGhpcy5ldmVudHNbZXZlbnROYW1lXS5iaW5kKHRoaXMpO1xuICAgICAgdGhpcy53ZWJTb2NrZXRbYG9uJHtldmVudE5hbWV9YF0gPSBoYW5kbGVyO1xuICAgIH1cbiAgfVxuICB1bmluc3RhbGxFdmVudEhhbmRsZXJzKCkge1xuICAgIGZvciAobGV0IGV2ZW50TmFtZSBpbiB0aGlzLmV2ZW50cykge1xuICAgICAgdGhpcy53ZWJTb2NrZXRbYG9uJHtldmVudE5hbWV9YF0gPSBmdW5jdGlvbigpIHt9O1xuICAgIH1cbiAgfVxufVxuXG5Db25uZWN0aW9uLnJlb3BlbkRlbGF5ID0gNTAwO1xuXG5Db25uZWN0aW9uLnByb3RvdHlwZS5ldmVudHMgPSB7XG4gIG1lc3NhZ2UoZXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuaXNQcm90b2NvbFN1cHBvcnRlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHtpZGVudGlmaWVyOiBpZGVudGlmaWVyLCBtZXNzYWdlOiBtZXNzYWdlLCByZWFzb246IHJlYXNvbiwgcmVjb25uZWN0OiByZWNvbm5lY3QsIHR5cGU6IHR5cGV9ID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcbiAgICB0aGlzLm1vbml0b3IucmVjb3JkTWVzc2FnZSgpO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICBjYXNlIG1lc3NhZ2VfdHlwZXMud2VsY29tZTpcbiAgICAgIGlmICh0aGlzLnRyaWVkVG9SZWNvbm5lY3QoKSkge1xuICAgICAgICB0aGlzLnJlY29ubmVjdEF0dGVtcHRlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICB0aGlzLm1vbml0b3IucmVjb3JkQ29ubmVjdCgpO1xuICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaXB0aW9ucy5yZWxvYWQoKTtcblxuICAgICBjYXNlIG1lc3NhZ2VfdHlwZXMuZGlzY29ubmVjdDpcbiAgICAgIGxvZ2dlci5sb2coYERpc2Nvbm5lY3RpbmcuIFJlYXNvbjogJHtyZWFzb259YCk7XG4gICAgICByZXR1cm4gdGhpcy5jbG9zZSh7XG4gICAgICAgIGFsbG93UmVjb25uZWN0OiByZWNvbm5lY3RcbiAgICAgIH0pO1xuXG4gICAgIGNhc2UgbWVzc2FnZV90eXBlcy5waW5nOlxuICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICAgY2FzZSBtZXNzYWdlX3R5cGVzLmNvbmZpcm1hdGlvbjpcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5jb25maXJtU3Vic2NyaXB0aW9uKGlkZW50aWZpZXIpO1xuICAgICAgaWYgKHRoaXMucmVjb25uZWN0QXR0ZW1wdGVkKSB7XG4gICAgICAgIHRoaXMucmVjb25uZWN0QXR0ZW1wdGVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbnMubm90aWZ5KGlkZW50aWZpZXIsIFwiY29ubmVjdGVkXCIsIHtcbiAgICAgICAgICByZWNvbm5lY3RlZDogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbnMubm90aWZ5KGlkZW50aWZpZXIsIFwiY29ubmVjdGVkXCIsIHtcbiAgICAgICAgICByZWNvbm5lY3RlZDogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgY2FzZSBtZXNzYWdlX3R5cGVzLnJlamVjdGlvbjpcbiAgICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbnMucmVqZWN0KGlkZW50aWZpZXIpO1xuXG4gICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25zLm5vdGlmeShpZGVudGlmaWVyLCBcInJlY2VpdmVkXCIsIG1lc3NhZ2UpO1xuICAgIH1cbiAgfSxcbiAgb3BlbigpIHtcbiAgICBsb2dnZXIubG9nKGBXZWJTb2NrZXQgb25vcGVuIGV2ZW50LCB1c2luZyAnJHt0aGlzLmdldFByb3RvY29sKCl9JyBzdWJwcm90b2NvbGApO1xuICAgIHRoaXMuZGlzY29ubmVjdGVkID0gZmFsc2U7XG4gICAgaWYgKCF0aGlzLmlzUHJvdG9jb2xTdXBwb3J0ZWQoKSkge1xuICAgICAgbG9nZ2VyLmxvZyhcIlByb3RvY29sIGlzIHVuc3VwcG9ydGVkLiBTdG9wcGluZyBtb25pdG9yIGFuZCBkaXNjb25uZWN0aW5nLlwiKTtcbiAgICAgIHJldHVybiB0aGlzLmNsb3NlKHtcbiAgICAgICAgYWxsb3dSZWNvbm5lY3Q6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG4gIGNsb3NlKGV2ZW50KSB7XG4gICAgbG9nZ2VyLmxvZyhcIldlYlNvY2tldCBvbmNsb3NlIGV2ZW50XCIpO1xuICAgIGlmICh0aGlzLmRpc2Nvbm5lY3RlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmRpc2Nvbm5lY3RlZCA9IHRydWU7XG4gICAgdGhpcy5tb25pdG9yLnJlY29yZERpc2Nvbm5lY3QoKTtcbiAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25zLm5vdGlmeUFsbChcImRpc2Nvbm5lY3RlZFwiLCB7XG4gICAgICB3aWxsQXR0ZW1wdFJlY29ubmVjdDogdGhpcy5tb25pdG9yLmlzUnVubmluZygpXG4gICAgfSk7XG4gIH0sXG4gIGVycm9yKCkge1xuICAgIGxvZ2dlci5sb2coXCJXZWJTb2NrZXQgb25lcnJvciBldmVudFwiKTtcbiAgfVxufTtcblxuY29uc3QgZXh0ZW5kID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0aWVzKSB7XG4gIGlmIChwcm9wZXJ0aWVzICE9IG51bGwpIHtcbiAgICBmb3IgKGxldCBrZXkgaW4gcHJvcGVydGllcykge1xuICAgICAgY29uc3QgdmFsdWUgPSBwcm9wZXJ0aWVzW2tleV07XG4gICAgICBvYmplY3Rba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gb2JqZWN0O1xufTtcblxuY2xhc3MgU3Vic2NyaXB0aW9uIHtcbiAgY29uc3RydWN0b3IoY29uc3VtZXIsIHBhcmFtcyA9IHt9LCBtaXhpbikge1xuICAgIHRoaXMuY29uc3VtZXIgPSBjb25zdW1lcjtcbiAgICB0aGlzLmlkZW50aWZpZXIgPSBKU09OLnN0cmluZ2lmeShwYXJhbXMpO1xuICAgIGV4dGVuZCh0aGlzLCBtaXhpbik7XG4gIH1cbiAgcGVyZm9ybShhY3Rpb24sIGRhdGEgPSB7fSkge1xuICAgIGRhdGEuYWN0aW9uID0gYWN0aW9uO1xuICAgIHJldHVybiB0aGlzLnNlbmQoZGF0YSk7XG4gIH1cbiAgc2VuZChkYXRhKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uc3VtZXIuc2VuZCh7XG4gICAgICBjb21tYW5kOiBcIm1lc3NhZ2VcIixcbiAgICAgIGlkZW50aWZpZXI6IHRoaXMuaWRlbnRpZmllcixcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpXG4gICAgfSk7XG4gIH1cbiAgdW5zdWJzY3JpYmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uc3VtZXIuc3Vic2NyaXB0aW9ucy5yZW1vdmUodGhpcyk7XG4gIH1cbn1cblxuY2xhc3MgU3Vic2NyaXB0aW9uR3VhcmFudG9yIHtcbiAgY29uc3RydWN0b3Ioc3Vic2NyaXB0aW9ucykge1xuICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IHN1YnNjcmlwdGlvbnM7XG4gICAgdGhpcy5wZW5kaW5nU3Vic2NyaXB0aW9ucyA9IFtdO1xuICB9XG4gIGd1YXJhbnRlZShzdWJzY3JpcHRpb24pIHtcbiAgICBpZiAodGhpcy5wZW5kaW5nU3Vic2NyaXB0aW9ucy5pbmRleE9mKHN1YnNjcmlwdGlvbikgPT0gLTEpIHtcbiAgICAgIGxvZ2dlci5sb2coYFN1YnNjcmlwdGlvbkd1YXJhbnRvciBndWFyYW50ZWVpbmcgJHtzdWJzY3JpcHRpb24uaWRlbnRpZmllcn1gKTtcbiAgICAgIHRoaXMucGVuZGluZ1N1YnNjcmlwdGlvbnMucHVzaChzdWJzY3JpcHRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2dnZXIubG9nKGBTdWJzY3JpcHRpb25HdWFyYW50b3IgYWxyZWFkeSBndWFyYW50ZWVpbmcgJHtzdWJzY3JpcHRpb24uaWRlbnRpZmllcn1gKTtcbiAgICB9XG4gICAgdGhpcy5zdGFydEd1YXJhbnRlZWluZygpO1xuICB9XG4gIGZvcmdldChzdWJzY3JpcHRpb24pIHtcbiAgICBsb2dnZXIubG9nKGBTdWJzY3JpcHRpb25HdWFyYW50b3IgZm9yZ2V0dGluZyAke3N1YnNjcmlwdGlvbi5pZGVudGlmaWVyfWApO1xuICAgIHRoaXMucGVuZGluZ1N1YnNjcmlwdGlvbnMgPSB0aGlzLnBlbmRpbmdTdWJzY3JpcHRpb25zLmZpbHRlcigocyA9PiBzICE9PSBzdWJzY3JpcHRpb24pKTtcbiAgfVxuICBzdGFydEd1YXJhbnRlZWluZygpIHtcbiAgICB0aGlzLnN0b3BHdWFyYW50ZWVpbmcoKTtcbiAgICB0aGlzLnJldHJ5U3Vic2NyaWJpbmcoKTtcbiAgfVxuICBzdG9wR3VhcmFudGVlaW5nKCkge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLnJldHJ5VGltZW91dCk7XG4gIH1cbiAgcmV0cnlTdWJzY3JpYmluZygpIHtcbiAgICB0aGlzLnJldHJ5VGltZW91dCA9IHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgIGlmICh0aGlzLnN1YnNjcmlwdGlvbnMgJiYgdHlwZW9mIHRoaXMuc3Vic2NyaXB0aW9ucy5zdWJzY3JpYmUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aGlzLnBlbmRpbmdTdWJzY3JpcHRpb25zLm1hcCgoc3Vic2NyaXB0aW9uID0+IHtcbiAgICAgICAgICBsb2dnZXIubG9nKGBTdWJzY3JpcHRpb25HdWFyYW50b3IgcmVzdWJzY3JpYmluZyAke3N1YnNjcmlwdGlvbi5pZGVudGlmaWVyfWApO1xuICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5zdWJzY3JpYmUoc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0pLCA1MDApO1xuICB9XG59XG5cbmNsYXNzIFN1YnNjcmlwdGlvbnMge1xuICBjb25zdHJ1Y3Rvcihjb25zdW1lcikge1xuICAgIHRoaXMuY29uc3VtZXIgPSBjb25zdW1lcjtcbiAgICB0aGlzLmd1YXJhbnRvciA9IG5ldyBTdWJzY3JpcHRpb25HdWFyYW50b3IodGhpcyk7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XG4gIH1cbiAgY3JlYXRlKGNoYW5uZWxOYW1lLCBtaXhpbikge1xuICAgIGNvbnN0IGNoYW5uZWwgPSBjaGFubmVsTmFtZTtcbiAgICBjb25zdCBwYXJhbXMgPSB0eXBlb2YgY2hhbm5lbCA9PT0gXCJvYmplY3RcIiA/IGNoYW5uZWwgOiB7XG4gICAgICBjaGFubmVsOiBjaGFubmVsXG4gICAgfTtcbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKHRoaXMuY29uc3VtZXIsIHBhcmFtcywgbWl4aW4pO1xuICAgIHJldHVybiB0aGlzLmFkZChzdWJzY3JpcHRpb24pO1xuICB9XG4gIGFkZChzdWJzY3JpcHRpb24pIHtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChzdWJzY3JpcHRpb24pO1xuICAgIHRoaXMuY29uc3VtZXIuZW5zdXJlQWN0aXZlQ29ubmVjdGlvbigpO1xuICAgIHRoaXMubm90aWZ5KHN1YnNjcmlwdGlvbiwgXCJpbml0aWFsaXplZFwiKTtcbiAgICB0aGlzLnN1YnNjcmliZShzdWJzY3JpcHRpb24pO1xuICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gIH1cbiAgcmVtb3ZlKHN1YnNjcmlwdGlvbikge1xuICAgIHRoaXMuZm9yZ2V0KHN1YnNjcmlwdGlvbik7XG4gICAgaWYgKCF0aGlzLmZpbmRBbGwoc3Vic2NyaXB0aW9uLmlkZW50aWZpZXIpLmxlbmd0aCkge1xuICAgICAgdGhpcy5zZW5kQ29tbWFuZChzdWJzY3JpcHRpb24sIFwidW5zdWJzY3JpYmVcIik7XG4gICAgfVxuICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gIH1cbiAgcmVqZWN0KGlkZW50aWZpZXIpIHtcbiAgICByZXR1cm4gdGhpcy5maW5kQWxsKGlkZW50aWZpZXIpLm1hcCgoc3Vic2NyaXB0aW9uID0+IHtcbiAgICAgIHRoaXMuZm9yZ2V0KHN1YnNjcmlwdGlvbik7XG4gICAgICB0aGlzLm5vdGlmeShzdWJzY3JpcHRpb24sIFwicmVqZWN0ZWRcIik7XG4gICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICAgIH0pKTtcbiAgfVxuICBmb3JnZXQoc3Vic2NyaXB0aW9uKSB7XG4gICAgdGhpcy5ndWFyYW50b3IuZm9yZ2V0KHN1YnNjcmlwdGlvbik7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zID0gdGhpcy5zdWJzY3JpcHRpb25zLmZpbHRlcigocyA9PiBzICE9PSBzdWJzY3JpcHRpb24pKTtcbiAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICB9XG4gIGZpbmRBbGwoaWRlbnRpZmllcikge1xuICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbnMuZmlsdGVyKChzID0+IHMuaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcikpO1xuICB9XG4gIHJlbG9hZCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25zLm1hcCgoc3Vic2NyaXB0aW9uID0+IHRoaXMuc3Vic2NyaWJlKHN1YnNjcmlwdGlvbikpKTtcbiAgfVxuICBub3RpZnlBbGwoY2FsbGJhY2tOYW1lLCAuLi5hcmdzKSB7XG4gICAgcmV0dXJuIHRoaXMuc3Vic2NyaXB0aW9ucy5tYXAoKHN1YnNjcmlwdGlvbiA9PiB0aGlzLm5vdGlmeShzdWJzY3JpcHRpb24sIGNhbGxiYWNrTmFtZSwgLi4uYXJncykpKTtcbiAgfVxuICBub3RpZnkoc3Vic2NyaXB0aW9uLCBjYWxsYmFja05hbWUsIC4uLmFyZ3MpIHtcbiAgICBsZXQgc3Vic2NyaXB0aW9ucztcbiAgICBpZiAodHlwZW9mIHN1YnNjcmlwdGlvbiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgc3Vic2NyaXB0aW9ucyA9IHRoaXMuZmluZEFsbChzdWJzY3JpcHRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdWJzY3JpcHRpb25zID0gWyBzdWJzY3JpcHRpb24gXTtcbiAgICB9XG4gICAgcmV0dXJuIHN1YnNjcmlwdGlvbnMubWFwKChzdWJzY3JpcHRpb24gPT4gdHlwZW9mIHN1YnNjcmlwdGlvbltjYWxsYmFja05hbWVdID09PSBcImZ1bmN0aW9uXCIgPyBzdWJzY3JpcHRpb25bY2FsbGJhY2tOYW1lXSguLi5hcmdzKSA6IHVuZGVmaW5lZCkpO1xuICB9XG4gIHN1YnNjcmliZShzdWJzY3JpcHRpb24pIHtcbiAgICBpZiAodGhpcy5zZW5kQ29tbWFuZChzdWJzY3JpcHRpb24sIFwic3Vic2NyaWJlXCIpKSB7XG4gICAgICB0aGlzLmd1YXJhbnRvci5ndWFyYW50ZWUoc3Vic2NyaXB0aW9uKTtcbiAgICB9XG4gIH1cbiAgY29uZmlybVN1YnNjcmlwdGlvbihpZGVudGlmaWVyKSB7XG4gICAgbG9nZ2VyLmxvZyhgU3Vic2NyaXB0aW9uIGNvbmZpcm1lZCAke2lkZW50aWZpZXJ9YCk7XG4gICAgdGhpcy5maW5kQWxsKGlkZW50aWZpZXIpLm1hcCgoc3Vic2NyaXB0aW9uID0+IHRoaXMuZ3VhcmFudG9yLmZvcmdldChzdWJzY3JpcHRpb24pKSk7XG4gIH1cbiAgc2VuZENvbW1hbmQoc3Vic2NyaXB0aW9uLCBjb21tYW5kKSB7XG4gICAgY29uc3Qge2lkZW50aWZpZXI6IGlkZW50aWZpZXJ9ID0gc3Vic2NyaXB0aW9uO1xuICAgIHJldHVybiB0aGlzLmNvbnN1bWVyLnNlbmQoe1xuICAgICAgY29tbWFuZDogY29tbWFuZCxcbiAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXJcbiAgICB9KTtcbiAgfVxufVxuXG5jbGFzcyBDb25zdW1lciB7XG4gIGNvbnN0cnVjdG9yKHVybCkge1xuICAgIHRoaXMuX3VybCA9IHVybDtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBuZXcgU3Vic2NyaXB0aW9ucyh0aGlzKTtcbiAgICB0aGlzLmNvbm5lY3Rpb24gPSBuZXcgQ29ubmVjdGlvbih0aGlzKTtcbiAgICB0aGlzLnN1YnByb3RvY29scyA9IFtdO1xuICB9XG4gIGdldCB1cmwoKSB7XG4gICAgcmV0dXJuIGNyZWF0ZVdlYlNvY2tldFVSTCh0aGlzLl91cmwpO1xuICB9XG4gIHNlbmQoZGF0YSkge1xuICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZChkYXRhKTtcbiAgfVxuICBjb25uZWN0KCkge1xuICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24ub3BlbigpO1xuICB9XG4gIGRpc2Nvbm5lY3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5jbG9zZSh7XG4gICAgICBhbGxvd1JlY29ubmVjdDogZmFsc2VcbiAgICB9KTtcbiAgfVxuICBlbnN1cmVBY3RpdmVDb25uZWN0aW9uKCkge1xuICAgIGlmICghdGhpcy5jb25uZWN0aW9uLmlzQWN0aXZlKCkpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24ub3BlbigpO1xuICAgIH1cbiAgfVxuICBhZGRTdWJQcm90b2NvbChzdWJwcm90b2NvbCkge1xuICAgIHRoaXMuc3VicHJvdG9jb2xzID0gWyAuLi50aGlzLnN1YnByb3RvY29scywgc3VicHJvdG9jb2wgXTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVXZWJTb2NrZXRVUkwodXJsKSB7XG4gIGlmICh0eXBlb2YgdXJsID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICB1cmwgPSB1cmwoKTtcbiAgfVxuICBpZiAodXJsICYmICEvXndzcz86L2kudGVzdCh1cmwpKSB7XG4gICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICAgIGEuaHJlZiA9IHVybDtcbiAgICBhLmhyZWYgPSBhLmhyZWY7XG4gICAgYS5wcm90b2NvbCA9IGEucHJvdG9jb2wucmVwbGFjZShcImh0dHBcIiwgXCJ3c1wiKTtcbiAgICByZXR1cm4gYS5ocmVmO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB1cmw7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlQ29uc3VtZXIodXJsID0gZ2V0Q29uZmlnKFwidXJsXCIpIHx8IElOVEVSTkFMLmRlZmF1bHRfbW91bnRfcGF0aCkge1xuICByZXR1cm4gbmV3IENvbnN1bWVyKHVybCk7XG59XG5cbmZ1bmN0aW9uIGdldENvbmZpZyhuYW1lKSB7XG4gIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5oZWFkLnF1ZXJ5U2VsZWN0b3IoYG1ldGFbbmFtZT0nYWN0aW9uLWNhYmxlLSR7bmFtZX0nXWApO1xuICBpZiAoZWxlbWVudCkge1xuICAgIHJldHVybiBlbGVtZW50LmdldEF0dHJpYnV0ZShcImNvbnRlbnRcIik7XG4gIH1cbn1cblxuZXhwb3J0IHsgQ29ubmVjdGlvbiwgQ29ubmVjdGlvbk1vbml0b3IsIENvbnN1bWVyLCBJTlRFUk5BTCwgU3Vic2NyaXB0aW9uLCBTdWJzY3JpcHRpb25HdWFyYW50b3IsIFN1YnNjcmlwdGlvbnMsIGFkYXB0ZXJzLCBjcmVhdGVDb25zdW1lciwgY3JlYXRlV2ViU29ja2V0VVJMLCBnZXRDb25maWcsIGxvZ2dlciB9O1xuIiwgIi8qIVxuVHVyYm8gOC4wLjE3XG5Db3B5cmlnaHQgXHUwMEE5IDIwMjUgMzdzaWduYWxzIExMQ1xuICovXG4vKipcbiAqIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAxOSBKYXZhbiBNYWtobWFsaVxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbiAqIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbiAqIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbiAqIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbiAqIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuICogZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuICogYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbiAqIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4gKiBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4gKiBUSEUgU09GVFdBUkUuXG4gKi9cblxuKGZ1bmN0aW9uIChwcm90b3R5cGUpIHtcbiAgaWYgKHR5cGVvZiBwcm90b3R5cGUucmVxdWVzdFN1Ym1pdCA9PSBcImZ1bmN0aW9uXCIpIHJldHVyblxuXG4gIHByb3RvdHlwZS5yZXF1ZXN0U3VibWl0ID0gZnVuY3Rpb24gKHN1Ym1pdHRlcikge1xuICAgIGlmIChzdWJtaXR0ZXIpIHtcbiAgICAgIHZhbGlkYXRlU3VibWl0dGVyKHN1Ym1pdHRlciwgdGhpcyk7XG4gICAgICBzdWJtaXR0ZXIuY2xpY2soKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3VibWl0dGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgc3VibWl0dGVyLnR5cGUgPSBcInN1Ym1pdFwiO1xuICAgICAgc3VibWl0dGVyLmhpZGRlbiA9IHRydWU7XG4gICAgICB0aGlzLmFwcGVuZENoaWxkKHN1Ym1pdHRlcik7XG4gICAgICBzdWJtaXR0ZXIuY2xpY2soKTtcbiAgICAgIHRoaXMucmVtb3ZlQ2hpbGQoc3VibWl0dGVyKTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gdmFsaWRhdGVTdWJtaXR0ZXIoc3VibWl0dGVyLCBmb3JtKSB7XG4gICAgc3VibWl0dGVyIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgfHwgcmFpc2UoVHlwZUVycm9yLCBcInBhcmFtZXRlciAxIGlzIG5vdCBvZiB0eXBlICdIVE1MRWxlbWVudCdcIik7XG4gICAgc3VibWl0dGVyLnR5cGUgPT0gXCJzdWJtaXRcIiB8fCByYWlzZShUeXBlRXJyb3IsIFwiVGhlIHNwZWNpZmllZCBlbGVtZW50IGlzIG5vdCBhIHN1Ym1pdCBidXR0b25cIik7XG4gICAgc3VibWl0dGVyLmZvcm0gPT0gZm9ybSB8fFxuICAgICAgcmFpc2UoRE9NRXhjZXB0aW9uLCBcIlRoZSBzcGVjaWZpZWQgZWxlbWVudCBpcyBub3Qgb3duZWQgYnkgdGhpcyBmb3JtIGVsZW1lbnRcIiwgXCJOb3RGb3VuZEVycm9yXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmFpc2UoZXJyb3JDb25zdHJ1Y3RvciwgbWVzc2FnZSwgbmFtZSkge1xuICAgIHRocm93IG5ldyBlcnJvckNvbnN0cnVjdG9yKFwiRmFpbGVkIHRvIGV4ZWN1dGUgJ3JlcXVlc3RTdWJtaXQnIG9uICdIVE1MRm9ybUVsZW1lbnQnOiBcIiArIG1lc3NhZ2UgKyBcIi5cIiwgbmFtZSlcbiAgfVxufSkoSFRNTEZvcm1FbGVtZW50LnByb3RvdHlwZSk7XG5cbmNvbnN0IHN1Ym1pdHRlcnNCeUZvcm0gPSBuZXcgV2Vha01hcCgpO1xuXG5mdW5jdGlvbiBmaW5kU3VibWl0dGVyRnJvbUNsaWNrVGFyZ2V0KHRhcmdldCkge1xuICBjb25zdCBlbGVtZW50ID0gdGFyZ2V0IGluc3RhbmNlb2YgRWxlbWVudCA/IHRhcmdldCA6IHRhcmdldCBpbnN0YW5jZW9mIE5vZGUgPyB0YXJnZXQucGFyZW50RWxlbWVudCA6IG51bGw7XG4gIGNvbnN0IGNhbmRpZGF0ZSA9IGVsZW1lbnQgPyBlbGVtZW50LmNsb3Nlc3QoXCJpbnB1dCwgYnV0dG9uXCIpIDogbnVsbDtcbiAgcmV0dXJuIGNhbmRpZGF0ZT8udHlwZSA9PSBcInN1Ym1pdFwiID8gY2FuZGlkYXRlIDogbnVsbFxufVxuXG5mdW5jdGlvbiBjbGlja0NhcHR1cmVkKGV2ZW50KSB7XG4gIGNvbnN0IHN1Ym1pdHRlciA9IGZpbmRTdWJtaXR0ZXJGcm9tQ2xpY2tUYXJnZXQoZXZlbnQudGFyZ2V0KTtcblxuICBpZiAoc3VibWl0dGVyICYmIHN1Ym1pdHRlci5mb3JtKSB7XG4gICAgc3VibWl0dGVyc0J5Rm9ybS5zZXQoc3VibWl0dGVyLmZvcm0sIHN1Ym1pdHRlcik7XG4gIH1cbn1cblxuKGZ1bmN0aW9uICgpIHtcbiAgaWYgKFwic3VibWl0dGVyXCIgaW4gRXZlbnQucHJvdG90eXBlKSByZXR1cm5cblxuICBsZXQgcHJvdG90eXBlID0gd2luZG93LkV2ZW50LnByb3RvdHlwZTtcbiAgLy8gQ2VydGFpbiB2ZXJzaW9ucyBvZiBTYWZhcmkgMTUgaGF2ZSBhIGJ1ZyB3aGVyZSB0aGV5IHdvbid0XG4gIC8vIHBvcHVsYXRlIHRoZSBzdWJtaXR0ZXIuIFRoaXMgaHVydHMgVHVyYm9Ecml2ZSdzIGVuYWJsZS9kaXNhYmxlIGRldGVjdGlvbi5cbiAgLy8gU2VlIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0yMjk2NjBcbiAgaWYgKFwiU3VibWl0RXZlbnRcIiBpbiB3aW5kb3cpIHtcbiAgICBjb25zdCBwcm90b3R5cGVPZlN1Ym1pdEV2ZW50ID0gd2luZG93LlN1Ym1pdEV2ZW50LnByb3RvdHlwZTtcblxuICAgIGlmICgvQXBwbGUgQ29tcHV0ZXIvLnRlc3QobmF2aWdhdG9yLnZlbmRvcikgJiYgIShcInN1Ym1pdHRlclwiIGluIHByb3RvdHlwZU9mU3VibWl0RXZlbnQpKSB7XG4gICAgICBwcm90b3R5cGUgPSBwcm90b3R5cGVPZlN1Ym1pdEV2ZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gLy8gcG9seWZpbGwgbm90IG5lZWRlZFxuICAgIH1cbiAgfVxuXG4gIGFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbGlja0NhcHR1cmVkLCB0cnVlKTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvdG90eXBlLCBcInN1Ym1pdHRlclwiLCB7XG4gICAgZ2V0KCkge1xuICAgICAgaWYgKHRoaXMudHlwZSA9PSBcInN1Ym1pdFwiICYmIHRoaXMudGFyZ2V0IGluc3RhbmNlb2YgSFRNTEZvcm1FbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBzdWJtaXR0ZXJzQnlGb3JtLmdldCh0aGlzLnRhcmdldClcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufSkoKTtcblxuY29uc3QgRnJhbWVMb2FkaW5nU3R5bGUgPSB7XG4gIGVhZ2VyOiBcImVhZ2VyXCIsXG4gIGxhenk6IFwibGF6eVwiXG59O1xuXG4vKipcbiAqIENvbnRhaW5zIGEgZnJhZ21lbnQgb2YgSFRNTCB3aGljaCBpcyB1cGRhdGVkIGJhc2VkIG9uIG5hdmlnYXRpb24gd2l0aGluXG4gKiBpdCAoZS5nLiB2aWEgbGlua3Mgb3IgZm9ybSBzdWJtaXNzaW9ucykuXG4gKlxuICogQGN1c3RvbUVsZW1lbnQgdHVyYm8tZnJhbWVcbiAqIEBleGFtcGxlXG4gKiAgIDx0dXJiby1mcmFtZSBpZD1cIm1lc3NhZ2VzXCI+XG4gKiAgICAgPGEgaHJlZj1cIi9tZXNzYWdlcy9leHBhbmRlZFwiPlxuICogICAgICAgU2hvdyBhbGwgZXhwYW5kZWQgbWVzc2FnZXMgaW4gdGhpcyBmcmFtZS5cbiAqICAgICA8L2E+XG4gKlxuICogICAgIDxmb3JtIGFjdGlvbj1cIi9tZXNzYWdlc1wiPlxuICogICAgICAgU2hvdyByZXNwb25zZSBmcm9tIHRoaXMgZm9ybSB3aXRoaW4gdGhpcyBmcmFtZS5cbiAqICAgICA8L2Zvcm0+XG4gKiAgIDwvdHVyYm8tZnJhbWU+XG4gKi9cbmNsYXNzIEZyYW1lRWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgc3RhdGljIGRlbGVnYXRlQ29uc3RydWN0b3IgPSB1bmRlZmluZWRcblxuICBsb2FkZWQgPSBQcm9taXNlLnJlc29sdmUoKVxuXG4gIHN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzKCkge1xuICAgIHJldHVybiBbXCJkaXNhYmxlZFwiLCBcImxvYWRpbmdcIiwgXCJzcmNcIl1cbiAgfVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5kZWxlZ2F0ZSA9IG5ldyBGcmFtZUVsZW1lbnQuZGVsZWdhdGVDb25zdHJ1Y3Rvcih0aGlzKTtcbiAgfVxuXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHRoaXMuZGVsZWdhdGUuY29ubmVjdCgpO1xuICB9XG5cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgdGhpcy5kZWxlZ2F0ZS5kaXNjb25uZWN0KCk7XG4gIH1cblxuICByZWxvYWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGVsZWdhdGUuc291cmNlVVJMUmVsb2FkZWQoKVxuICB9XG5cbiAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUpIHtcbiAgICBpZiAobmFtZSA9PSBcImxvYWRpbmdcIikge1xuICAgICAgdGhpcy5kZWxlZ2F0ZS5sb2FkaW5nU3R5bGVDaGFuZ2VkKCk7XG4gICAgfSBlbHNlIGlmIChuYW1lID09IFwic3JjXCIpIHtcbiAgICAgIHRoaXMuZGVsZWdhdGUuc291cmNlVVJMQ2hhbmdlZCgpO1xuICAgIH0gZWxzZSBpZiAobmFtZSA9PSBcImRpc2FibGVkXCIpIHtcbiAgICAgIHRoaXMuZGVsZWdhdGUuZGlzYWJsZWRDaGFuZ2VkKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIFVSTCB0byBsYXppbHkgbG9hZCBzb3VyY2UgSFRNTCBmcm9tXG4gICAqL1xuICBnZXQgc3JjKCkge1xuICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZShcInNyY1wiKVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIFVSTCB0byBsYXppbHkgbG9hZCBzb3VyY2UgSFRNTCBmcm9tXG4gICAqL1xuICBzZXQgc3JjKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZShcInNyY1wiLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKFwic3JjXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSByZWZyZXNoIG1vZGUgZm9yIHRoZSBmcmFtZS5cbiAgICovXG4gIGdldCByZWZyZXNoKCkge1xuICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZShcInJlZnJlc2hcIilcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSByZWZyZXNoIG1vZGUgZm9yIHRoZSBmcmFtZS5cbiAgICovXG4gIHNldCByZWZyZXNoKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZShcInJlZnJlc2hcIiwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShcInJlZnJlc2hcIik7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHNob3VsZFJlbG9hZFdpdGhNb3JwaCgpIHtcbiAgICByZXR1cm4gdGhpcy5zcmMgJiYgdGhpcy5yZWZyZXNoID09PSBcIm1vcnBoXCJcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIGlmIHRoZSBlbGVtZW50IGlzIGxvYWRpbmdcbiAgICovXG4gIGdldCBsb2FkaW5nKCkge1xuICAgIHJldHVybiBmcmFtZUxvYWRpbmdTdHlsZUZyb21TdHJpbmcodGhpcy5nZXRBdHRyaWJ1dGUoXCJsb2FkaW5nXCIpIHx8IFwiXCIpXG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdmFsdWUgb2YgaWYgdGhlIGVsZW1lbnQgaXMgbG9hZGluZ1xuICAgKi9cbiAgc2V0IGxvYWRpbmcodmFsdWUpIHtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwibG9hZGluZ1wiLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKFwibG9hZGluZ1wiKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgZGlzYWJsZWQgc3RhdGUgb2YgdGhlIGZyYW1lLlxuICAgKlxuICAgKiBJZiBkaXNhYmxlZCwgbm8gcmVxdWVzdHMgd2lsbCBiZSBpbnRlcmNlcHRlZCBieSB0aGUgZnJhbWUuXG4gICAqL1xuICBnZXQgZGlzYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIilcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBkaXNhYmxlZCBzdGF0ZSBvZiB0aGUgZnJhbWUuXG4gICAqXG4gICAqIElmIGRpc2FibGVkLCBubyByZXF1ZXN0cyB3aWxsIGJlIGludGVyY2VwdGVkIGJ5IHRoZSBmcmFtZS5cbiAgICovXG4gIHNldCBkaXNhYmxlZCh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcIlwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgYXV0b3Njcm9sbCBzdGF0ZSBvZiB0aGUgZnJhbWUuXG4gICAqXG4gICAqIElmIHRydWUsIHRoZSBmcmFtZSB3aWxsIGJlIHNjcm9sbGVkIGludG8gdmlldyBhdXRvbWF0aWNhbGx5IG9uIHVwZGF0ZS5cbiAgICovXG4gIGdldCBhdXRvc2Nyb2xsKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShcImF1dG9zY3JvbGxcIilcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBhdXRvc2Nyb2xsIHN0YXRlIG9mIHRoZSBmcmFtZS5cbiAgICpcbiAgICogSWYgdHJ1ZSwgdGhlIGZyYW1lIHdpbGwgYmUgc2Nyb2xsZWQgaW50byB2aWV3IGF1dG9tYXRpY2FsbHkgb24gdXBkYXRlLlxuICAgKi9cbiAgc2V0IGF1dG9zY3JvbGwodmFsdWUpIHtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiYXV0b3Njcm9sbFwiLCBcIlwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoXCJhdXRvc2Nyb2xsXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIGlmIHRoZSBlbGVtZW50IGhhcyBmaW5pc2hlZCBsb2FkaW5nXG4gICAqL1xuICBnZXQgY29tcGxldGUoKSB7XG4gICAgcmV0dXJuICF0aGlzLmRlbGVnYXRlLmlzTG9hZGluZ1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGFjdGl2ZSBzdGF0ZSBvZiB0aGUgZnJhbWUuXG4gICAqXG4gICAqIElmIGluYWN0aXZlLCBzb3VyY2UgY2hhbmdlcyB3aWxsIG5vdCBiZSBvYnNlcnZlZC5cbiAgICovXG4gIGdldCBpc0FjdGl2ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5vd25lckRvY3VtZW50ID09PSBkb2N1bWVudCAmJiAhdGhpcy5pc1ByZXZpZXdcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBhY3RpdmUgc3RhdGUgb2YgdGhlIGZyYW1lLlxuICAgKlxuICAgKiBJZiBpbmFjdGl2ZSwgc291cmNlIGNoYW5nZXMgd2lsbCBub3QgYmUgb2JzZXJ2ZWQuXG4gICAqL1xuICBnZXQgaXNQcmV2aWV3KCkge1xuICAgIHJldHVybiB0aGlzLm93bmVyRG9jdW1lbnQ/LmRvY3VtZW50RWxlbWVudD8uaGFzQXR0cmlidXRlKFwiZGF0YS10dXJiby1wcmV2aWV3XCIpXG4gIH1cbn1cblxuZnVuY3Rpb24gZnJhbWVMb2FkaW5nU3R5bGVGcm9tU3RyaW5nKHN0eWxlKSB7XG4gIHN3aXRjaCAoc3R5bGUudG9Mb3dlckNhc2UoKSkge1xuICAgIGNhc2UgXCJsYXp5XCI6XG4gICAgICByZXR1cm4gRnJhbWVMb2FkaW5nU3R5bGUubGF6eVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gRnJhbWVMb2FkaW5nU3R5bGUuZWFnZXJcbiAgfVxufVxuXG5jb25zdCBkcml2ZSA9IHtcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgcHJvZ3Jlc3NCYXJEZWxheTogNTAwLFxuICB1bnZpc2l0YWJsZUV4dGVuc2lvbnM6IG5ldyBTZXQoXG4gICAgW1xuICAgICAgXCIuN3pcIiwgXCIuYWFjXCIsIFwiLmFwa1wiLCBcIi5hdmlcIiwgXCIuYm1wXCIsIFwiLmJ6MlwiLCBcIi5jc3NcIiwgXCIuY3N2XCIsIFwiLmRlYlwiLCBcIi5kbWdcIiwgXCIuZG9jXCIsXG4gICAgICBcIi5kb2N4XCIsIFwiLmV4ZVwiLCBcIi5naWZcIiwgXCIuZ3pcIiwgXCIuaGVpY1wiLCBcIi5oZWlmXCIsIFwiLmljb1wiLCBcIi5pc29cIiwgXCIuanBlZ1wiLCBcIi5qcGdcIixcbiAgICAgIFwiLmpzXCIsIFwiLmpzb25cIiwgXCIubTRhXCIsIFwiLm1rdlwiLCBcIi5tb3ZcIiwgXCIubXAzXCIsIFwiLm1wNFwiLCBcIi5tcGVnXCIsIFwiLm1wZ1wiLCBcIi5tc2lcIixcbiAgICAgIFwiLm9nZ1wiLCBcIi5vZ3ZcIiwgXCIucGRmXCIsIFwiLnBrZ1wiLCBcIi5wbmdcIiwgXCIucHB0XCIsIFwiLnBwdHhcIiwgXCIucmFyXCIsIFwiLnJ0ZlwiLFxuICAgICAgXCIuc3ZnXCIsIFwiLnRhclwiLCBcIi50aWZcIiwgXCIudGlmZlwiLCBcIi50eHRcIiwgXCIud2F2XCIsIFwiLndlYm1cIiwgXCIud2VicFwiLCBcIi53bWFcIiwgXCIud212XCIsXG4gICAgICBcIi54bHNcIiwgXCIueGxzeFwiLCBcIi54bWxcIiwgXCIuemlwXCJcbiAgICBdXG4gIClcbn07XG5cbmZ1bmN0aW9uIGFjdGl2YXRlU2NyaXB0RWxlbWVudChlbGVtZW50KSB7XG4gIGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm8tZXZhbFwiKSA9PSBcImZhbHNlXCIpIHtcbiAgICByZXR1cm4gZWxlbWVudFxuICB9IGVsc2Uge1xuICAgIGNvbnN0IGNyZWF0ZWRTY3JpcHRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICBjb25zdCBjc3BOb25jZSA9IGdldENzcE5vbmNlKCk7XG4gICAgaWYgKGNzcE5vbmNlKSB7XG4gICAgICBjcmVhdGVkU2NyaXB0RWxlbWVudC5ub25jZSA9IGNzcE5vbmNlO1xuICAgIH1cbiAgICBjcmVhdGVkU2NyaXB0RWxlbWVudC50ZXh0Q29udGVudCA9IGVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgY3JlYXRlZFNjcmlwdEVsZW1lbnQuYXN5bmMgPSBmYWxzZTtcbiAgICBjb3B5RWxlbWVudEF0dHJpYnV0ZXMoY3JlYXRlZFNjcmlwdEVsZW1lbnQsIGVsZW1lbnQpO1xuICAgIHJldHVybiBjcmVhdGVkU2NyaXB0RWxlbWVudFxuICB9XG59XG5cbmZ1bmN0aW9uIGNvcHlFbGVtZW50QXR0cmlidXRlcyhkZXN0aW5hdGlvbkVsZW1lbnQsIHNvdXJjZUVsZW1lbnQpIHtcbiAgZm9yIChjb25zdCB7IG5hbWUsIHZhbHVlIH0gb2Ygc291cmNlRWxlbWVudC5hdHRyaWJ1dGVzKSB7XG4gICAgZGVzdGluYXRpb25FbGVtZW50LnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlRG9jdW1lbnRGcmFnbWVudChodG1sKSB7XG4gIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xuICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sO1xuICByZXR1cm4gdGVtcGxhdGUuY29udGVudFxufVxuXG5mdW5jdGlvbiBkaXNwYXRjaChldmVudE5hbWUsIHsgdGFyZ2V0LCBjYW5jZWxhYmxlLCBkZXRhaWwgfSA9IHt9KSB7XG4gIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KGV2ZW50TmFtZSwge1xuICAgIGNhbmNlbGFibGUsXG4gICAgYnViYmxlczogdHJ1ZSxcbiAgICBjb21wb3NlZDogdHJ1ZSxcbiAgICBkZXRhaWxcbiAgfSk7XG5cbiAgaWYgKHRhcmdldCAmJiB0YXJnZXQuaXNDb25uZWN0ZWQpIHtcbiAgICB0YXJnZXQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gIH0gZWxzZSB7XG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICB9XG5cbiAgcmV0dXJuIGV2ZW50XG59XG5cbmZ1bmN0aW9uIGNhbmNlbEV2ZW50KGV2ZW50KSB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xufVxuXG5mdW5jdGlvbiBuZXh0UmVwYWludCgpIHtcbiAgaWYgKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gXCJoaWRkZW5cIikge1xuICAgIHJldHVybiBuZXh0RXZlbnRMb29wVGljaygpXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5leHRBbmltYXRpb25GcmFtZSgpXG4gIH1cbn1cblxuZnVuY3Rpb24gbmV4dEFuaW1hdGlvbkZyYW1lKCkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiByZXNvbHZlKCkpKVxufVxuXG5mdW5jdGlvbiBuZXh0RXZlbnRMb29wVGljaygpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KCgpID0+IHJlc29sdmUoKSwgMCkpXG59XG5cbmZ1bmN0aW9uIG5leHRNaWNyb3Rhc2soKSB7XG4gIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxufVxuXG5mdW5jdGlvbiBwYXJzZUhUTUxEb2N1bWVudChodG1sID0gXCJcIikge1xuICByZXR1cm4gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhodG1sLCBcInRleHQvaHRtbFwiKVxufVxuXG5mdW5jdGlvbiB1bmluZGVudChzdHJpbmdzLCAuLi52YWx1ZXMpIHtcbiAgY29uc3QgbGluZXMgPSBpbnRlcnBvbGF0ZShzdHJpbmdzLCB2YWx1ZXMpLnJlcGxhY2UoL15cXG4vLCBcIlwiKS5zcGxpdChcIlxcblwiKTtcbiAgY29uc3QgbWF0Y2ggPSBsaW5lc1swXS5tYXRjaCgvXlxccysvKTtcbiAgY29uc3QgaW5kZW50ID0gbWF0Y2ggPyBtYXRjaFswXS5sZW5ndGggOiAwO1xuICByZXR1cm4gbGluZXMubWFwKChsaW5lKSA9PiBsaW5lLnNsaWNlKGluZGVudCkpLmpvaW4oXCJcXG5cIilcbn1cblxuZnVuY3Rpb24gaW50ZXJwb2xhdGUoc3RyaW5ncywgdmFsdWVzKSB7XG4gIHJldHVybiBzdHJpbmdzLnJlZHVjZSgocmVzdWx0LCBzdHJpbmcsIGkpID0+IHtcbiAgICBjb25zdCB2YWx1ZSA9IHZhbHVlc1tpXSA9PSB1bmRlZmluZWQgPyBcIlwiIDogdmFsdWVzW2ldO1xuICAgIHJldHVybiByZXN1bHQgKyBzdHJpbmcgKyB2YWx1ZVxuICB9LCBcIlwiKVxufVxuXG5mdW5jdGlvbiB1dWlkKCkge1xuICByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogMzYgfSlcbiAgICAubWFwKChfLCBpKSA9PiB7XG4gICAgICBpZiAoaSA9PSA4IHx8IGkgPT0gMTMgfHwgaSA9PSAxOCB8fCBpID09IDIzKSB7XG4gICAgICAgIHJldHVybiBcIi1cIlxuICAgICAgfSBlbHNlIGlmIChpID09IDE0KSB7XG4gICAgICAgIHJldHVybiBcIjRcIlxuICAgICAgfSBlbHNlIGlmIChpID09IDE5KSB7XG4gICAgICAgIHJldHVybiAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNCkgKyA4KS50b1N0cmluZygxNilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxNSkudG9TdHJpbmcoMTYpXG4gICAgICB9XG4gICAgfSlcbiAgICAuam9pbihcIlwiKVxufVxuXG5mdW5jdGlvbiBnZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSwgLi4uZWxlbWVudHMpIHtcbiAgZm9yIChjb25zdCB2YWx1ZSBvZiBlbGVtZW50cy5tYXAoKGVsZW1lbnQpID0+IGVsZW1lbnQ/LmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lKSkpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09IFwic3RyaW5nXCIpIHJldHVybiB2YWx1ZVxuICB9XG5cbiAgcmV0dXJuIG51bGxcbn1cblxuZnVuY3Rpb24gaGFzQXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUsIC4uLmVsZW1lbnRzKSB7XG4gIHJldHVybiBlbGVtZW50cy5zb21lKChlbGVtZW50KSA9PiBlbGVtZW50ICYmIGVsZW1lbnQuaGFzQXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpKVxufVxuXG5mdW5jdGlvbiBtYXJrQXNCdXN5KC4uLmVsZW1lbnRzKSB7XG4gIGZvciAoY29uc3QgZWxlbWVudCBvZiBlbGVtZW50cykge1xuICAgIGlmIChlbGVtZW50LmxvY2FsTmFtZSA9PSBcInR1cmJvLWZyYW1lXCIpIHtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYnVzeVwiLCBcIlwiKTtcbiAgICB9XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWJ1c3lcIiwgXCJ0cnVlXCIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNsZWFyQnVzeVN0YXRlKC4uLmVsZW1lbnRzKSB7XG4gIGZvciAoY29uc3QgZWxlbWVudCBvZiBlbGVtZW50cykge1xuICAgIGlmIChlbGVtZW50LmxvY2FsTmFtZSA9PSBcInR1cmJvLWZyYW1lXCIpIHtcbiAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiYnVzeVwiKTtcbiAgICB9XG5cbiAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtYnVzeVwiKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB3YWl0Rm9yTG9hZChlbGVtZW50LCB0aW1lb3V0SW5NaWxsaXNlY29uZHMgPSAyMDAwKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIGNvbnN0IG9uQ29tcGxldGUgPSAoKSA9PiB7XG4gICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBvbkNvbXBsZXRlKTtcbiAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgb25Db21wbGV0ZSk7XG4gICAgICByZXNvbHZlKCk7XG4gICAgfTtcblxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgb25Db21wbGV0ZSwgeyBvbmNlOiB0cnVlIH0pO1xuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIG9uQ29tcGxldGUsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICBzZXRUaW1lb3V0KHJlc29sdmUsIHRpbWVvdXRJbk1pbGxpc2Vjb25kcyk7XG4gIH0pXG59XG5cbmZ1bmN0aW9uIGdldEhpc3RvcnlNZXRob2RGb3JBY3Rpb24oYWN0aW9uKSB7XG4gIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgY2FzZSBcInJlcGxhY2VcIjpcbiAgICAgIHJldHVybiBoaXN0b3J5LnJlcGxhY2VTdGF0ZVxuICAgIGNhc2UgXCJhZHZhbmNlXCI6XG4gICAgY2FzZSBcInJlc3RvcmVcIjpcbiAgICAgIHJldHVybiBoaXN0b3J5LnB1c2hTdGF0ZVxuICB9XG59XG5cbmZ1bmN0aW9uIGlzQWN0aW9uKGFjdGlvbikge1xuICByZXR1cm4gYWN0aW9uID09IFwiYWR2YW5jZVwiIHx8IGFjdGlvbiA9PSBcInJlcGxhY2VcIiB8fCBhY3Rpb24gPT0gXCJyZXN0b3JlXCJcbn1cblxuZnVuY3Rpb24gZ2V0VmlzaXRBY3Rpb24oLi4uZWxlbWVudHMpIHtcbiAgY29uc3QgYWN0aW9uID0gZ2V0QXR0cmlidXRlKFwiZGF0YS10dXJiby1hY3Rpb25cIiwgLi4uZWxlbWVudHMpO1xuXG4gIHJldHVybiBpc0FjdGlvbihhY3Rpb24pID8gYWN0aW9uIDogbnVsbFxufVxuXG5mdW5jdGlvbiBnZXRNZXRhRWxlbWVudChuYW1lKSB7XG4gIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBtZXRhW25hbWU9XCIke25hbWV9XCJdYClcbn1cblxuZnVuY3Rpb24gZ2V0TWV0YUNvbnRlbnQobmFtZSkge1xuICBjb25zdCBlbGVtZW50ID0gZ2V0TWV0YUVsZW1lbnQobmFtZSk7XG4gIHJldHVybiBlbGVtZW50ICYmIGVsZW1lbnQuY29udGVudFxufVxuXG5mdW5jdGlvbiBnZXRDc3BOb25jZSgpIHtcbiAgY29uc3QgZWxlbWVudCA9IGdldE1ldGFFbGVtZW50KFwiY3NwLW5vbmNlXCIpO1xuXG4gIGlmIChlbGVtZW50KSB7XG4gICAgY29uc3QgeyBub25jZSwgY29udGVudCB9ID0gZWxlbWVudDtcbiAgICByZXR1cm4gbm9uY2UgPT0gXCJcIiA/IGNvbnRlbnQgOiBub25jZVxuICB9XG59XG5cbmZ1bmN0aW9uIHNldE1ldGFDb250ZW50KG5hbWUsIGNvbnRlbnQpIHtcbiAgbGV0IGVsZW1lbnQgPSBnZXRNZXRhRWxlbWVudChuYW1lKTtcblxuICBpZiAoIWVsZW1lbnQpIHtcbiAgICBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm1ldGFcIik7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIG5hbWUpO1xuXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgfVxuXG4gIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwiY29udGVudFwiLCBjb250ZW50KTtcblxuICByZXR1cm4gZWxlbWVudFxufVxuXG5mdW5jdGlvbiBmaW5kQ2xvc2VzdFJlY3Vyc2l2ZWx5KGVsZW1lbnQsIHNlbGVjdG9yKSB7XG4gIGlmIChlbGVtZW50IGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgIHJldHVybiAoXG4gICAgICBlbGVtZW50LmNsb3Nlc3Qoc2VsZWN0b3IpIHx8IGZpbmRDbG9zZXN0UmVjdXJzaXZlbHkoZWxlbWVudC5hc3NpZ25lZFNsb3QgfHwgZWxlbWVudC5nZXRSb290Tm9kZSgpPy5ob3N0LCBzZWxlY3RvcilcbiAgICApXG4gIH1cbn1cblxuZnVuY3Rpb24gZWxlbWVudElzRm9jdXNhYmxlKGVsZW1lbnQpIHtcbiAgY29uc3QgaW5lcnREaXNhYmxlZE9ySGlkZGVuID0gXCJbaW5lcnRdLCA6ZGlzYWJsZWQsIFtoaWRkZW5dLCBkZXRhaWxzOm5vdChbb3Blbl0pLCBkaWFsb2c6bm90KFtvcGVuXSlcIjtcblxuICByZXR1cm4gISFlbGVtZW50ICYmIGVsZW1lbnQuY2xvc2VzdChpbmVydERpc2FibGVkT3JIaWRkZW4pID09IG51bGwgJiYgdHlwZW9mIGVsZW1lbnQuZm9jdXMgPT0gXCJmdW5jdGlvblwiXG59XG5cbmZ1bmN0aW9uIHF1ZXJ5QXV0b2ZvY3VzYWJsZUVsZW1lbnQoZWxlbWVudE9yRG9jdW1lbnRGcmFnbWVudCkge1xuICByZXR1cm4gQXJyYXkuZnJvbShlbGVtZW50T3JEb2N1bWVudEZyYWdtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbYXV0b2ZvY3VzXVwiKSkuZmluZChlbGVtZW50SXNGb2N1c2FibGUpXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGFyb3VuZChjYWxsYmFjaywgcmVhZGVyKSB7XG4gIGNvbnN0IGJlZm9yZSA9IHJlYWRlcigpO1xuXG4gIGNhbGxiYWNrKCk7XG5cbiAgYXdhaXQgbmV4dEFuaW1hdGlvbkZyYW1lKCk7XG5cbiAgY29uc3QgYWZ0ZXIgPSByZWFkZXIoKTtcblxuICByZXR1cm4gW2JlZm9yZSwgYWZ0ZXJdXG59XG5cbmZ1bmN0aW9uIGRvZXNOb3RUYXJnZXRJRnJhbWUobmFtZSkge1xuICBpZiAobmFtZSA9PT0gXCJfYmxhbmtcIikge1xuICAgIHJldHVybiBmYWxzZVxuICB9IGVsc2UgaWYgKG5hbWUpIHtcbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUobmFtZSkpIHtcbiAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgSFRNTElGcmFtZUVsZW1lbnQpIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxufVxuXG5mdW5jdGlvbiBmaW5kTGlua0Zyb21DbGlja1RhcmdldCh0YXJnZXQpIHtcbiAgY29uc3QgbGluayA9IGZpbmRDbG9zZXN0UmVjdXJzaXZlbHkodGFyZ2V0LCBcImFbaHJlZl0sIGFbeGxpbmtcXFxcOmhyZWZdXCIpO1xuXG4gIGlmICghbGluaykgcmV0dXJuIG51bGxcbiAgaWYgKGxpbmsuaGFzQXR0cmlidXRlKFwiZG93bmxvYWRcIikpIHJldHVybiBudWxsXG4gIGlmIChsaW5rLmhhc0F0dHJpYnV0ZShcInRhcmdldFwiKSAmJiBsaW5rLnRhcmdldCAhPT0gXCJfc2VsZlwiKSByZXR1cm4gbnVsbFxuXG4gIHJldHVybiBsaW5rXG59XG5cbmZ1bmN0aW9uIGdldExvY2F0aW9uRm9yTGluayhsaW5rKSB7XG4gIHJldHVybiBleHBhbmRVUkwobGluay5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpIHx8IFwiXCIpXG59XG5cbmZ1bmN0aW9uIGRlYm91bmNlKGZuLCBkZWxheSkge1xuICBsZXQgdGltZW91dElkID0gbnVsbDtcblxuICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICBjb25zdCBjYWxsYmFjayA9ICgpID0+IGZuLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoY2FsbGJhY2ssIGRlbGF5KTtcbiAgfVxufVxuXG5jb25zdCBzdWJtaXR0ZXIgPSB7XG4gIFwiYXJpYS1kaXNhYmxlZFwiOiB7XG4gICAgYmVmb3JlU3VibWl0OiBzdWJtaXR0ZXIgPT4ge1xuICAgICAgc3VibWl0dGVyLnNldEF0dHJpYnV0ZShcImFyaWEtZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xuICAgICAgc3VibWl0dGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjYW5jZWxFdmVudCk7XG4gICAgfSxcblxuICAgIGFmdGVyU3VibWl0OiBzdWJtaXR0ZXIgPT4ge1xuICAgICAgc3VibWl0dGVyLnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtZGlzYWJsZWRcIik7XG4gICAgICBzdWJtaXR0ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNhbmNlbEV2ZW50KTtcbiAgICB9XG4gIH0sXG5cbiAgXCJkaXNhYmxlZFwiOiB7XG4gICAgYmVmb3JlU3VibWl0OiBzdWJtaXR0ZXIgPT4gc3VibWl0dGVyLmRpc2FibGVkID0gdHJ1ZSxcbiAgICBhZnRlclN1Ym1pdDogc3VibWl0dGVyID0+IHN1Ym1pdHRlci5kaXNhYmxlZCA9IGZhbHNlXG4gIH1cbn07XG5cbmNsYXNzIENvbmZpZyB7XG4gICNzdWJtaXR0ZXIgPSBudWxsXG5cbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLCBjb25maWcpO1xuICB9XG5cbiAgZ2V0IHN1Ym1pdHRlcigpIHtcbiAgICByZXR1cm4gdGhpcy4jc3VibWl0dGVyXG4gIH1cblxuICBzZXQgc3VibWl0dGVyKHZhbHVlKSB7XG4gICAgdGhpcy4jc3VibWl0dGVyID0gc3VibWl0dGVyW3ZhbHVlXSB8fCB2YWx1ZTtcbiAgfVxufVxuXG5jb25zdCBmb3JtcyA9IG5ldyBDb25maWcoe1xuICBtb2RlOiBcIm9uXCIsXG4gIHN1Ym1pdHRlcjogXCJkaXNhYmxlZFwiXG59KTtcblxuY29uc3QgY29uZmlnID0ge1xuICBkcml2ZSxcbiAgZm9ybXNcbn07XG5cbmZ1bmN0aW9uIGV4cGFuZFVSTChsb2NhdGFibGUpIHtcbiAgcmV0dXJuIG5ldyBVUkwobG9jYXRhYmxlLnRvU3RyaW5nKCksIGRvY3VtZW50LmJhc2VVUkkpXG59XG5cbmZ1bmN0aW9uIGdldEFuY2hvcih1cmwpIHtcbiAgbGV0IGFuY2hvck1hdGNoO1xuICBpZiAodXJsLmhhc2gpIHtcbiAgICByZXR1cm4gdXJsLmhhc2guc2xpY2UoMSlcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uZC1hc3NpZ25cbiAgfSBlbHNlIGlmICgoYW5jaG9yTWF0Y2ggPSB1cmwuaHJlZi5tYXRjaCgvIyguKikkLykpKSB7XG4gICAgcmV0dXJuIGFuY2hvck1hdGNoWzFdXG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0QWN0aW9uJDEoZm9ybSwgc3VibWl0dGVyKSB7XG4gIGNvbnN0IGFjdGlvbiA9IHN1Ym1pdHRlcj8uZ2V0QXR0cmlidXRlKFwiZm9ybWFjdGlvblwiKSB8fCBmb3JtLmdldEF0dHJpYnV0ZShcImFjdGlvblwiKSB8fCBmb3JtLmFjdGlvbjtcblxuICByZXR1cm4gZXhwYW5kVVJMKGFjdGlvbilcbn1cblxuZnVuY3Rpb24gZ2V0RXh0ZW5zaW9uKHVybCkge1xuICByZXR1cm4gKGdldExhc3RQYXRoQ29tcG9uZW50KHVybCkubWF0Y2goL1xcLlteLl0qJC8pIHx8IFtdKVswXSB8fCBcIlwiXG59XG5cbmZ1bmN0aW9uIGlzUHJlZml4ZWRCeShiYXNlVVJMLCB1cmwpIHtcbiAgY29uc3QgcHJlZml4ID0gYWRkVHJhaWxpbmdTbGFzaCh1cmwub3JpZ2luICsgdXJsLnBhdGhuYW1lKTtcbiAgcmV0dXJuIGFkZFRyYWlsaW5nU2xhc2goYmFzZVVSTC5ocmVmKSA9PT0gcHJlZml4IHx8IGJhc2VVUkwuaHJlZi5zdGFydHNXaXRoKHByZWZpeClcbn1cblxuZnVuY3Rpb24gbG9jYXRpb25Jc1Zpc2l0YWJsZShsb2NhdGlvbiwgcm9vdExvY2F0aW9uKSB7XG4gIHJldHVybiBpc1ByZWZpeGVkQnkobG9jYXRpb24sIHJvb3RMb2NhdGlvbikgJiYgIWNvbmZpZy5kcml2ZS51bnZpc2l0YWJsZUV4dGVuc2lvbnMuaGFzKGdldEV4dGVuc2lvbihsb2NhdGlvbikpXG59XG5cbmZ1bmN0aW9uIGdldFJlcXVlc3RVUkwodXJsKSB7XG4gIGNvbnN0IGFuY2hvciA9IGdldEFuY2hvcih1cmwpO1xuICByZXR1cm4gYW5jaG9yICE9IG51bGwgPyB1cmwuaHJlZi5zbGljZSgwLCAtKGFuY2hvci5sZW5ndGggKyAxKSkgOiB1cmwuaHJlZlxufVxuXG5mdW5jdGlvbiB0b0NhY2hlS2V5KHVybCkge1xuICByZXR1cm4gZ2V0UmVxdWVzdFVSTCh1cmwpXG59XG5cbmZ1bmN0aW9uIHVybHNBcmVFcXVhbChsZWZ0LCByaWdodCkge1xuICByZXR1cm4gZXhwYW5kVVJMKGxlZnQpLmhyZWYgPT0gZXhwYW5kVVJMKHJpZ2h0KS5ocmVmXG59XG5cbmZ1bmN0aW9uIGdldFBhdGhDb21wb25lbnRzKHVybCkge1xuICByZXR1cm4gdXJsLnBhdGhuYW1lLnNwbGl0KFwiL1wiKS5zbGljZSgxKVxufVxuXG5mdW5jdGlvbiBnZXRMYXN0UGF0aENvbXBvbmVudCh1cmwpIHtcbiAgcmV0dXJuIGdldFBhdGhDb21wb25lbnRzKHVybCkuc2xpY2UoLTEpWzBdXG59XG5cbmZ1bmN0aW9uIGFkZFRyYWlsaW5nU2xhc2godmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlLmVuZHNXaXRoKFwiL1wiKSA/IHZhbHVlIDogdmFsdWUgKyBcIi9cIlxufVxuXG5jbGFzcyBGZXRjaFJlc3BvbnNlIHtcbiAgY29uc3RydWN0b3IocmVzcG9uc2UpIHtcbiAgICB0aGlzLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gIH1cblxuICBnZXQgc3VjY2VlZGVkKCkge1xuICAgIHJldHVybiB0aGlzLnJlc3BvbnNlLm9rXG4gIH1cblxuICBnZXQgZmFpbGVkKCkge1xuICAgIHJldHVybiAhdGhpcy5zdWNjZWVkZWRcbiAgfVxuXG4gIGdldCBjbGllbnRFcnJvcigpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0dXNDb2RlID49IDQwMCAmJiB0aGlzLnN0YXR1c0NvZGUgPD0gNDk5XG4gIH1cblxuICBnZXQgc2VydmVyRXJyb3IoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdHVzQ29kZSA+PSA1MDAgJiYgdGhpcy5zdGF0dXNDb2RlIDw9IDU5OVxuICB9XG5cbiAgZ2V0IHJlZGlyZWN0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVzcG9uc2UucmVkaXJlY3RlZFxuICB9XG5cbiAgZ2V0IGxvY2F0aW9uKCkge1xuICAgIHJldHVybiBleHBhbmRVUkwodGhpcy5yZXNwb25zZS51cmwpXG4gIH1cblxuICBnZXQgaXNIVE1MKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRlbnRUeXBlICYmIHRoaXMuY29udGVudFR5cGUubWF0Y2goL14oPzp0ZXh0XFwvKFteXFxzOyxdK1xcYik/aHRtbHxhcHBsaWNhdGlvblxcL3hodG1sXFwreG1sKVxcYi8pXG4gIH1cblxuICBnZXQgc3RhdHVzQ29kZSgpIHtcbiAgICByZXR1cm4gdGhpcy5yZXNwb25zZS5zdGF0dXNcbiAgfVxuXG4gIGdldCBjb250ZW50VHlwZSgpIHtcbiAgICByZXR1cm4gdGhpcy5oZWFkZXIoXCJDb250ZW50LVR5cGVcIilcbiAgfVxuXG4gIGdldCByZXNwb25zZVRleHQoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVzcG9uc2UuY2xvbmUoKS50ZXh0KClcbiAgfVxuXG4gIGdldCByZXNwb25zZUhUTUwoKSB7XG4gICAgaWYgKHRoaXMuaXNIVE1MKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZXNwb25zZS5jbG9uZSgpLnRleHQoKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHVuZGVmaW5lZClcbiAgICB9XG4gIH1cblxuICBoZWFkZXIobmFtZSkge1xuICAgIHJldHVybiB0aGlzLnJlc3BvbnNlLmhlYWRlcnMuZ2V0KG5hbWUpXG4gIH1cbn1cblxuY2xhc3MgTGltaXRlZFNldCBleHRlbmRzIFNldCB7XG4gIGNvbnN0cnVjdG9yKG1heFNpemUpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMubWF4U2l6ZSA9IG1heFNpemU7XG4gIH1cblxuICBhZGQodmFsdWUpIHtcbiAgICBpZiAodGhpcy5zaXplID49IHRoaXMubWF4U2l6ZSkge1xuICAgICAgY29uc3QgaXRlcmF0b3IgPSB0aGlzLnZhbHVlcygpO1xuICAgICAgY29uc3Qgb2xkZXN0VmFsdWUgPSBpdGVyYXRvci5uZXh0KCkudmFsdWU7XG4gICAgICB0aGlzLmRlbGV0ZShvbGRlc3RWYWx1ZSk7XG4gICAgfVxuICAgIHN1cGVyLmFkZCh2YWx1ZSk7XG4gIH1cbn1cblxuY29uc3QgcmVjZW50UmVxdWVzdHMgPSBuZXcgTGltaXRlZFNldCgyMCk7XG5cbmZ1bmN0aW9uIGZldGNoV2l0aFR1cmJvSGVhZGVycyh1cmwsIG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCBtb2RpZmllZEhlYWRlcnMgPSBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMgfHwge30pO1xuICBjb25zdCByZXF1ZXN0VUlEID0gdXVpZCgpO1xuICByZWNlbnRSZXF1ZXN0cy5hZGQocmVxdWVzdFVJRCk7XG4gIG1vZGlmaWVkSGVhZGVycy5hcHBlbmQoXCJYLVR1cmJvLVJlcXVlc3QtSWRcIiwgcmVxdWVzdFVJRCk7XG5cbiAgcmV0dXJuIHdpbmRvdy5mZXRjaCh1cmwsIHtcbiAgICAuLi5vcHRpb25zLFxuICAgIGhlYWRlcnM6IG1vZGlmaWVkSGVhZGVyc1xuICB9KVxufVxuXG5mdW5jdGlvbiBmZXRjaE1ldGhvZEZyb21TdHJpbmcobWV0aG9kKSB7XG4gIHN3aXRjaCAobWV0aG9kLnRvTG93ZXJDYXNlKCkpIHtcbiAgICBjYXNlIFwiZ2V0XCI6XG4gICAgICByZXR1cm4gRmV0Y2hNZXRob2QuZ2V0XG4gICAgY2FzZSBcInBvc3RcIjpcbiAgICAgIHJldHVybiBGZXRjaE1ldGhvZC5wb3N0XG4gICAgY2FzZSBcInB1dFwiOlxuICAgICAgcmV0dXJuIEZldGNoTWV0aG9kLnB1dFxuICAgIGNhc2UgXCJwYXRjaFwiOlxuICAgICAgcmV0dXJuIEZldGNoTWV0aG9kLnBhdGNoXG4gICAgY2FzZSBcImRlbGV0ZVwiOlxuICAgICAgcmV0dXJuIEZldGNoTWV0aG9kLmRlbGV0ZVxuICB9XG59XG5cbmNvbnN0IEZldGNoTWV0aG9kID0ge1xuICBnZXQ6IFwiZ2V0XCIsXG4gIHBvc3Q6IFwicG9zdFwiLFxuICBwdXQ6IFwicHV0XCIsXG4gIHBhdGNoOiBcInBhdGNoXCIsXG4gIGRlbGV0ZTogXCJkZWxldGVcIlxufTtcblxuZnVuY3Rpb24gZmV0Y2hFbmN0eXBlRnJvbVN0cmluZyhlbmNvZGluZykge1xuICBzd2l0Y2ggKGVuY29kaW5nLnRvTG93ZXJDYXNlKCkpIHtcbiAgICBjYXNlIEZldGNoRW5jdHlwZS5tdWx0aXBhcnQ6XG4gICAgICByZXR1cm4gRmV0Y2hFbmN0eXBlLm11bHRpcGFydFxuICAgIGNhc2UgRmV0Y2hFbmN0eXBlLnBsYWluOlxuICAgICAgcmV0dXJuIEZldGNoRW5jdHlwZS5wbGFpblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gRmV0Y2hFbmN0eXBlLnVybEVuY29kZWRcbiAgfVxufVxuXG5jb25zdCBGZXRjaEVuY3R5cGUgPSB7XG4gIHVybEVuY29kZWQ6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIsXG4gIG11bHRpcGFydDogXCJtdWx0aXBhcnQvZm9ybS1kYXRhXCIsXG4gIHBsYWluOiBcInRleHQvcGxhaW5cIlxufTtcblxuY2xhc3MgRmV0Y2hSZXF1ZXN0IHtcbiAgYWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpXG4gICNyZXNvbHZlUmVxdWVzdFByb21pc2UgPSAoX3ZhbHVlKSA9PiB7fVxuXG4gIGNvbnN0cnVjdG9yKGRlbGVnYXRlLCBtZXRob2QsIGxvY2F0aW9uLCByZXF1ZXN0Qm9keSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKSwgdGFyZ2V0ID0gbnVsbCwgZW5jdHlwZSA9IEZldGNoRW5jdHlwZS51cmxFbmNvZGVkKSB7XG4gICAgY29uc3QgW3VybCwgYm9keV0gPSBidWlsZFJlc291cmNlQW5kQm9keShleHBhbmRVUkwobG9jYXRpb24pLCBtZXRob2QsIHJlcXVlc3RCb2R5LCBlbmN0eXBlKTtcblxuICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICB0aGlzLnVybCA9IHVybDtcbiAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICB0aGlzLmZldGNoT3B0aW9ucyA9IHtcbiAgICAgIGNyZWRlbnRpYWxzOiBcInNhbWUtb3JpZ2luXCIsXG4gICAgICByZWRpcmVjdDogXCJmb2xsb3dcIixcbiAgICAgIG1ldGhvZDogbWV0aG9kLnRvVXBwZXJDYXNlKCksXG4gICAgICBoZWFkZXJzOiB7IC4uLnRoaXMuZGVmYXVsdEhlYWRlcnMgfSxcbiAgICAgIGJvZHk6IGJvZHksXG4gICAgICBzaWduYWw6IHRoaXMuYWJvcnRTaWduYWwsXG4gICAgICByZWZlcnJlcjogdGhpcy5kZWxlZ2F0ZS5yZWZlcnJlcj8uaHJlZlxuICAgIH07XG4gICAgdGhpcy5lbmN0eXBlID0gZW5jdHlwZTtcbiAgfVxuXG4gIGdldCBtZXRob2QoKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hPcHRpb25zLm1ldGhvZFxuICB9XG5cbiAgc2V0IG1ldGhvZCh2YWx1ZSkge1xuICAgIGNvbnN0IGZldGNoQm9keSA9IHRoaXMuaXNTYWZlID8gdGhpcy51cmwuc2VhcmNoUGFyYW1zIDogdGhpcy5mZXRjaE9wdGlvbnMuYm9keSB8fCBuZXcgRm9ybURhdGEoKTtcbiAgICBjb25zdCBmZXRjaE1ldGhvZCA9IGZldGNoTWV0aG9kRnJvbVN0cmluZyh2YWx1ZSkgfHwgRmV0Y2hNZXRob2QuZ2V0O1xuXG4gICAgdGhpcy51cmwuc2VhcmNoID0gXCJcIjtcblxuICAgIGNvbnN0IFt1cmwsIGJvZHldID0gYnVpbGRSZXNvdXJjZUFuZEJvZHkodGhpcy51cmwsIGZldGNoTWV0aG9kLCBmZXRjaEJvZHksIHRoaXMuZW5jdHlwZSk7XG5cbiAgICB0aGlzLnVybCA9IHVybDtcbiAgICB0aGlzLmZldGNoT3B0aW9ucy5ib2R5ID0gYm9keTtcbiAgICB0aGlzLmZldGNoT3B0aW9ucy5tZXRob2QgPSBmZXRjaE1ldGhvZC50b1VwcGVyQ2FzZSgpO1xuICB9XG5cbiAgZ2V0IGhlYWRlcnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hPcHRpb25zLmhlYWRlcnNcbiAgfVxuXG4gIHNldCBoZWFkZXJzKHZhbHVlKSB7XG4gICAgdGhpcy5mZXRjaE9wdGlvbnMuaGVhZGVycyA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IGJvZHkoKSB7XG4gICAgaWYgKHRoaXMuaXNTYWZlKSB7XG4gICAgICByZXR1cm4gdGhpcy51cmwuc2VhcmNoUGFyYW1zXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmZldGNoT3B0aW9ucy5ib2R5XG4gICAgfVxuICB9XG5cbiAgc2V0IGJvZHkodmFsdWUpIHtcbiAgICB0aGlzLmZldGNoT3B0aW9ucy5ib2R5ID0gdmFsdWU7XG4gIH1cblxuICBnZXQgbG9jYXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudXJsXG4gIH1cblxuICBnZXQgcGFyYW1zKCkge1xuICAgIHJldHVybiB0aGlzLnVybC5zZWFyY2hQYXJhbXNcbiAgfVxuXG4gIGdldCBlbnRyaWVzKCkge1xuICAgIHJldHVybiB0aGlzLmJvZHkgPyBBcnJheS5mcm9tKHRoaXMuYm9keS5lbnRyaWVzKCkpIDogW11cbiAgfVxuXG4gIGNhbmNlbCgpIHtcbiAgICB0aGlzLmFib3J0Q29udHJvbGxlci5hYm9ydCgpO1xuICB9XG5cbiAgYXN5bmMgcGVyZm9ybSgpIHtcbiAgICBjb25zdCB7IGZldGNoT3B0aW9ucyB9ID0gdGhpcztcbiAgICB0aGlzLmRlbGVnYXRlLnByZXBhcmVSZXF1ZXN0KHRoaXMpO1xuICAgIGNvbnN0IGV2ZW50ID0gYXdhaXQgdGhpcy4jYWxsb3dSZXF1ZXN0VG9CZUludGVyY2VwdGVkKGZldGNoT3B0aW9ucyk7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuZGVsZWdhdGUucmVxdWVzdFN0YXJ0ZWQodGhpcyk7XG5cbiAgICAgIGlmIChldmVudC5kZXRhaWwuZmV0Y2hSZXF1ZXN0KSB7XG4gICAgICAgIHRoaXMucmVzcG9uc2UgPSBldmVudC5kZXRhaWwuZmV0Y2hSZXF1ZXN0LnJlc3BvbnNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZXNwb25zZSA9IGZldGNoV2l0aFR1cmJvSGVhZGVycyh0aGlzLnVybC5ocmVmLCBmZXRjaE9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVzcG9uc2U7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5yZWNlaXZlKHJlc3BvbnNlKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IubmFtZSAhPT0gXCJBYm9ydEVycm9yXCIpIHtcbiAgICAgICAgaWYgKHRoaXMuI3dpbGxEZWxlZ2F0ZUVycm9ySGFuZGxpbmcoZXJyb3IpKSB7XG4gICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5yZXF1ZXN0RXJyb3JlZCh0aGlzLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZXJyb3JcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5kZWxlZ2F0ZS5yZXF1ZXN0RmluaXNoZWQodGhpcyk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmVjZWl2ZShyZXNwb25zZSkge1xuICAgIGNvbnN0IGZldGNoUmVzcG9uc2UgPSBuZXcgRmV0Y2hSZXNwb25zZShyZXNwb25zZSk7XG4gICAgY29uc3QgZXZlbnQgPSBkaXNwYXRjaChcInR1cmJvOmJlZm9yZS1mZXRjaC1yZXNwb25zZVwiLCB7XG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgZGV0YWlsOiB7IGZldGNoUmVzcG9uc2UgfSxcbiAgICAgIHRhcmdldDogdGhpcy50YXJnZXRcbiAgICB9KTtcbiAgICBpZiAoZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgdGhpcy5kZWxlZ2F0ZS5yZXF1ZXN0UHJldmVudGVkSGFuZGxpbmdSZXNwb25zZSh0aGlzLCBmZXRjaFJlc3BvbnNlKTtcbiAgICB9IGVsc2UgaWYgKGZldGNoUmVzcG9uc2Uuc3VjY2VlZGVkKSB7XG4gICAgICB0aGlzLmRlbGVnYXRlLnJlcXVlc3RTdWNjZWVkZWRXaXRoUmVzcG9uc2UodGhpcywgZmV0Y2hSZXNwb25zZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGVsZWdhdGUucmVxdWVzdEZhaWxlZFdpdGhSZXNwb25zZSh0aGlzLCBmZXRjaFJlc3BvbnNlKTtcbiAgICB9XG4gICAgcmV0dXJuIGZldGNoUmVzcG9uc2VcbiAgfVxuXG4gIGdldCBkZWZhdWx0SGVhZGVycygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgQWNjZXB0OiBcInRleHQvaHRtbCwgYXBwbGljYXRpb24veGh0bWwreG1sXCJcbiAgICB9XG4gIH1cblxuICBnZXQgaXNTYWZlKCkge1xuICAgIHJldHVybiBpc1NhZmUodGhpcy5tZXRob2QpXG4gIH1cblxuICBnZXQgYWJvcnRTaWduYWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWJvcnRDb250cm9sbGVyLnNpZ25hbFxuICB9XG5cbiAgYWNjZXB0UmVzcG9uc2VUeXBlKG1pbWVUeXBlKSB7XG4gICAgdGhpcy5oZWFkZXJzW1wiQWNjZXB0XCJdID0gW21pbWVUeXBlLCB0aGlzLmhlYWRlcnNbXCJBY2NlcHRcIl1dLmpvaW4oXCIsIFwiKTtcbiAgfVxuXG4gIGFzeW5jICNhbGxvd1JlcXVlc3RUb0JlSW50ZXJjZXB0ZWQoZmV0Y2hPcHRpb25zKSB7XG4gICAgY29uc3QgcmVxdWVzdEludGVyY2VwdGlvbiA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiAodGhpcy4jcmVzb2x2ZVJlcXVlc3RQcm9taXNlID0gcmVzb2x2ZSkpO1xuICAgIGNvbnN0IGV2ZW50ID0gZGlzcGF0Y2goXCJ0dXJibzpiZWZvcmUtZmV0Y2gtcmVxdWVzdFwiLCB7XG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIGZldGNoT3B0aW9ucyxcbiAgICAgICAgdXJsOiB0aGlzLnVybCxcbiAgICAgICAgcmVzdW1lOiB0aGlzLiNyZXNvbHZlUmVxdWVzdFByb21pc2VcbiAgICAgIH0sXG4gICAgICB0YXJnZXQ6IHRoaXMudGFyZ2V0XG4gICAgfSk7XG4gICAgdGhpcy51cmwgPSBldmVudC5kZXRhaWwudXJsO1xuICAgIGlmIChldmVudC5kZWZhdWx0UHJldmVudGVkKSBhd2FpdCByZXF1ZXN0SW50ZXJjZXB0aW9uO1xuXG4gICAgcmV0dXJuIGV2ZW50XG4gIH1cblxuICAjd2lsbERlbGVnYXRlRXJyb3JIYW5kbGluZyhlcnJvcikge1xuICAgIGNvbnN0IGV2ZW50ID0gZGlzcGF0Y2goXCJ0dXJibzpmZXRjaC1yZXF1ZXN0LWVycm9yXCIsIHtcbiAgICAgIHRhcmdldDogdGhpcy50YXJnZXQsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgZGV0YWlsOiB7IHJlcXVlc3Q6IHRoaXMsIGVycm9yOiBlcnJvciB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWRcbiAgfVxufVxuXG5mdW5jdGlvbiBpc1NhZmUoZmV0Y2hNZXRob2QpIHtcbiAgcmV0dXJuIGZldGNoTWV0aG9kRnJvbVN0cmluZyhmZXRjaE1ldGhvZCkgPT0gRmV0Y2hNZXRob2QuZ2V0XG59XG5cbmZ1bmN0aW9uIGJ1aWxkUmVzb3VyY2VBbmRCb2R5KHJlc291cmNlLCBtZXRob2QsIHJlcXVlc3RCb2R5LCBlbmN0eXBlKSB7XG4gIGNvbnN0IHNlYXJjaFBhcmFtcyA9XG4gICAgQXJyYXkuZnJvbShyZXF1ZXN0Qm9keSkubGVuZ3RoID4gMCA/IG5ldyBVUkxTZWFyY2hQYXJhbXMoZW50cmllc0V4Y2x1ZGluZ0ZpbGVzKHJlcXVlc3RCb2R5KSkgOiByZXNvdXJjZS5zZWFyY2hQYXJhbXM7XG5cbiAgaWYgKGlzU2FmZShtZXRob2QpKSB7XG4gICAgcmV0dXJuIFttZXJnZUludG9VUkxTZWFyY2hQYXJhbXMocmVzb3VyY2UsIHNlYXJjaFBhcmFtcyksIG51bGxdXG4gIH0gZWxzZSBpZiAoZW5jdHlwZSA9PSBGZXRjaEVuY3R5cGUudXJsRW5jb2RlZCkge1xuICAgIHJldHVybiBbcmVzb3VyY2UsIHNlYXJjaFBhcmFtc11cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gW3Jlc291cmNlLCByZXF1ZXN0Qm9keV1cbiAgfVxufVxuXG5mdW5jdGlvbiBlbnRyaWVzRXhjbHVkaW5nRmlsZXMocmVxdWVzdEJvZHkpIHtcbiAgY29uc3QgZW50cmllcyA9IFtdO1xuXG4gIGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiByZXF1ZXN0Qm9keSkge1xuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEZpbGUpIGNvbnRpbnVlXG4gICAgZWxzZSBlbnRyaWVzLnB1c2goW25hbWUsIHZhbHVlXSk7XG4gIH1cblxuICByZXR1cm4gZW50cmllc1xufVxuXG5mdW5jdGlvbiBtZXJnZUludG9VUkxTZWFyY2hQYXJhbXModXJsLCByZXF1ZXN0Qm9keSkge1xuICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGVudHJpZXNFeGNsdWRpbmdGaWxlcyhyZXF1ZXN0Qm9keSkpO1xuXG4gIHVybC5zZWFyY2ggPSBzZWFyY2hQYXJhbXMudG9TdHJpbmcoKTtcblxuICByZXR1cm4gdXJsXG59XG5cbmNsYXNzIEFwcGVhcmFuY2VPYnNlcnZlciB7XG4gIHN0YXJ0ZWQgPSBmYWxzZVxuXG4gIGNvbnN0cnVjdG9yKGRlbGVnYXRlLCBlbGVtZW50KSB7XG4gICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcih0aGlzLmludGVyc2VjdCk7XG4gIH1cblxuICBzdGFydCgpIHtcbiAgICBpZiAoIXRoaXMuc3RhcnRlZCkge1xuICAgICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyLnVub2JzZXJ2ZSh0aGlzLmVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIGludGVyc2VjdCA9IChlbnRyaWVzKSA9PiB7XG4gICAgY29uc3QgbGFzdEVudHJ5ID0gZW50cmllcy5zbGljZSgtMSlbMF07XG4gICAgaWYgKGxhc3RFbnRyeT8uaXNJbnRlcnNlY3RpbmcpIHtcbiAgICAgIHRoaXMuZGVsZWdhdGUuZWxlbWVudEFwcGVhcmVkSW5WaWV3cG9ydCh0aGlzLmVsZW1lbnQpO1xuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBTdHJlYW1NZXNzYWdlIHtcbiAgc3RhdGljIGNvbnRlbnRUeXBlID0gXCJ0ZXh0L3ZuZC50dXJiby1zdHJlYW0uaHRtbFwiXG5cbiAgc3RhdGljIHdyYXAobWVzc2FnZSkge1xuICAgIGlmICh0eXBlb2YgbWVzc2FnZSA9PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXR1cm4gbmV3IHRoaXMoY3JlYXRlRG9jdW1lbnRGcmFnbWVudChtZXNzYWdlKSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG1lc3NhZ2VcbiAgICB9XG4gIH1cblxuICBjb25zdHJ1Y3RvcihmcmFnbWVudCkge1xuICAgIHRoaXMuZnJhZ21lbnQgPSBpbXBvcnRTdHJlYW1FbGVtZW50cyhmcmFnbWVudCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW1wb3J0U3RyZWFtRWxlbWVudHMoZnJhZ21lbnQpIHtcbiAgZm9yIChjb25zdCBlbGVtZW50IG9mIGZyYWdtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJ0dXJiby1zdHJlYW1cIikpIHtcbiAgICBjb25zdCBzdHJlYW1FbGVtZW50ID0gZG9jdW1lbnQuaW1wb3J0Tm9kZShlbGVtZW50LCB0cnVlKTtcblxuICAgIGZvciAoY29uc3QgaW5lcnRTY3JpcHRFbGVtZW50IG9mIHN0cmVhbUVsZW1lbnQudGVtcGxhdGVFbGVtZW50LmNvbnRlbnQucXVlcnlTZWxlY3RvckFsbChcInNjcmlwdFwiKSkge1xuICAgICAgaW5lcnRTY3JpcHRFbGVtZW50LnJlcGxhY2VXaXRoKGFjdGl2YXRlU2NyaXB0RWxlbWVudChpbmVydFNjcmlwdEVsZW1lbnQpKTtcbiAgICB9XG5cbiAgICBlbGVtZW50LnJlcGxhY2VXaXRoKHN0cmVhbUVsZW1lbnQpO1xuICB9XG5cbiAgcmV0dXJuIGZyYWdtZW50XG59XG5cbmNvbnN0IFBSRUZFVENIX0RFTEFZID0gMTAwO1xuXG5jbGFzcyBQcmVmZXRjaENhY2hlIHtcbiAgI3ByZWZldGNoVGltZW91dCA9IG51bGxcbiAgI3ByZWZldGNoZWQgPSBudWxsXG5cbiAgZ2V0KHVybCkge1xuICAgIGlmICh0aGlzLiNwcmVmZXRjaGVkICYmIHRoaXMuI3ByZWZldGNoZWQudXJsID09PSB1cmwgJiYgdGhpcy4jcHJlZmV0Y2hlZC5leHBpcmUgPiBEYXRlLm5vdygpKSB7XG4gICAgICByZXR1cm4gdGhpcy4jcHJlZmV0Y2hlZC5yZXF1ZXN0XG4gICAgfVxuICB9XG5cbiAgc2V0TGF0ZXIodXJsLCByZXF1ZXN0LCB0dGwpIHtcbiAgICB0aGlzLmNsZWFyKCk7XG5cbiAgICB0aGlzLiNwcmVmZXRjaFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHJlcXVlc3QucGVyZm9ybSgpO1xuICAgICAgdGhpcy5zZXQodXJsLCByZXF1ZXN0LCB0dGwpO1xuICAgICAgdGhpcy4jcHJlZmV0Y2hUaW1lb3V0ID0gbnVsbDtcbiAgICB9LCBQUkVGRVRDSF9ERUxBWSk7XG4gIH1cblxuICBzZXQodXJsLCByZXF1ZXN0LCB0dGwpIHtcbiAgICB0aGlzLiNwcmVmZXRjaGVkID0geyB1cmwsIHJlcXVlc3QsIGV4cGlyZTogbmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgKyB0dGwpIH07XG4gIH1cblxuICBjbGVhcigpIHtcbiAgICBpZiAodGhpcy4jcHJlZmV0Y2hUaW1lb3V0KSBjbGVhclRpbWVvdXQodGhpcy4jcHJlZmV0Y2hUaW1lb3V0KTtcbiAgICB0aGlzLiNwcmVmZXRjaGVkID0gbnVsbDtcbiAgfVxufVxuXG5jb25zdCBjYWNoZVR0bCA9IDEwICogMTAwMDtcbmNvbnN0IHByZWZldGNoQ2FjaGUgPSBuZXcgUHJlZmV0Y2hDYWNoZSgpO1xuXG5jb25zdCBGb3JtU3VibWlzc2lvblN0YXRlID0ge1xuICBpbml0aWFsaXplZDogXCJpbml0aWFsaXplZFwiLFxuICByZXF1ZXN0aW5nOiBcInJlcXVlc3RpbmdcIixcbiAgd2FpdGluZzogXCJ3YWl0aW5nXCIsXG4gIHJlY2VpdmluZzogXCJyZWNlaXZpbmdcIixcbiAgc3RvcHBpbmc6IFwic3RvcHBpbmdcIixcbiAgc3RvcHBlZDogXCJzdG9wcGVkXCJcbn07XG5cbmNsYXNzIEZvcm1TdWJtaXNzaW9uIHtcbiAgc3RhdGUgPSBGb3JtU3VibWlzc2lvblN0YXRlLmluaXRpYWxpemVkXG5cbiAgc3RhdGljIGNvbmZpcm1NZXRob2QobWVzc2FnZSkge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY29uZmlybShtZXNzYWdlKSlcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGRlbGVnYXRlLCBmb3JtRWxlbWVudCwgc3VibWl0dGVyLCBtdXN0UmVkaXJlY3QgPSBmYWxzZSkge1xuICAgIGNvbnN0IG1ldGhvZCA9IGdldE1ldGhvZChmb3JtRWxlbWVudCwgc3VibWl0dGVyKTtcbiAgICBjb25zdCBhY3Rpb24gPSBnZXRBY3Rpb24oZ2V0Rm9ybUFjdGlvbihmb3JtRWxlbWVudCwgc3VibWl0dGVyKSwgbWV0aG9kKTtcbiAgICBjb25zdCBib2R5ID0gYnVpbGRGb3JtRGF0YShmb3JtRWxlbWVudCwgc3VibWl0dGVyKTtcbiAgICBjb25zdCBlbmN0eXBlID0gZ2V0RW5jdHlwZShmb3JtRWxlbWVudCwgc3VibWl0dGVyKTtcblxuICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICB0aGlzLmZvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5zdWJtaXR0ZXIgPSBzdWJtaXR0ZXI7XG4gICAgdGhpcy5mZXRjaFJlcXVlc3QgPSBuZXcgRmV0Y2hSZXF1ZXN0KHRoaXMsIG1ldGhvZCwgYWN0aW9uLCBib2R5LCBmb3JtRWxlbWVudCwgZW5jdHlwZSk7XG4gICAgdGhpcy5tdXN0UmVkaXJlY3QgPSBtdXN0UmVkaXJlY3Q7XG4gIH1cblxuICBnZXQgbWV0aG9kKCkge1xuICAgIHJldHVybiB0aGlzLmZldGNoUmVxdWVzdC5tZXRob2RcbiAgfVxuXG4gIHNldCBtZXRob2QodmFsdWUpIHtcbiAgICB0aGlzLmZldGNoUmVxdWVzdC5tZXRob2QgPSB2YWx1ZTtcbiAgfVxuXG4gIGdldCBhY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hSZXF1ZXN0LnVybC50b1N0cmluZygpXG4gIH1cblxuICBzZXQgYWN0aW9uKHZhbHVlKSB7XG4gICAgdGhpcy5mZXRjaFJlcXVlc3QudXJsID0gZXhwYW5kVVJMKHZhbHVlKTtcbiAgfVxuXG4gIGdldCBib2R5KCkge1xuICAgIHJldHVybiB0aGlzLmZldGNoUmVxdWVzdC5ib2R5XG4gIH1cblxuICBnZXQgZW5jdHlwZSgpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaFJlcXVlc3QuZW5jdHlwZVxuICB9XG5cbiAgZ2V0IGlzU2FmZSgpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaFJlcXVlc3QuaXNTYWZlXG4gIH1cblxuICBnZXQgbG9jYXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hSZXF1ZXN0LnVybFxuICB9XG5cbiAgLy8gVGhlIHN1Ym1pc3Npb24gcHJvY2Vzc1xuXG4gIGFzeW5jIHN0YXJ0KCkge1xuICAgIGNvbnN0IHsgaW5pdGlhbGl6ZWQsIHJlcXVlc3RpbmcgfSA9IEZvcm1TdWJtaXNzaW9uU3RhdGU7XG4gICAgY29uc3QgY29uZmlybWF0aW9uTWVzc2FnZSA9IGdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm8tY29uZmlybVwiLCB0aGlzLnN1Ym1pdHRlciwgdGhpcy5mb3JtRWxlbWVudCk7XG5cbiAgICBpZiAodHlwZW9mIGNvbmZpcm1hdGlvbk1lc3NhZ2UgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGNvbnN0IGNvbmZpcm1NZXRob2QgPSB0eXBlb2YgY29uZmlnLmZvcm1zLmNvbmZpcm0gPT09IFwiZnVuY3Rpb25cIiA/XG4gICAgICAgIGNvbmZpZy5mb3Jtcy5jb25maXJtIDpcbiAgICAgICAgRm9ybVN1Ym1pc3Npb24uY29uZmlybU1ldGhvZDtcblxuICAgICAgY29uc3QgYW5zd2VyID0gYXdhaXQgY29uZmlybU1ldGhvZChjb25maXJtYXRpb25NZXNzYWdlLCB0aGlzLmZvcm1FbGVtZW50LCB0aGlzLnN1Ym1pdHRlcik7XG4gICAgICBpZiAoIWFuc3dlcikge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0ZSA9PSBpbml0aWFsaXplZCkge1xuICAgICAgdGhpcy5zdGF0ZSA9IHJlcXVlc3Rpbmc7XG4gICAgICByZXR1cm4gdGhpcy5mZXRjaFJlcXVlc3QucGVyZm9ybSgpXG4gICAgfVxuICB9XG5cbiAgc3RvcCgpIHtcbiAgICBjb25zdCB7IHN0b3BwaW5nLCBzdG9wcGVkIH0gPSBGb3JtU3VibWlzc2lvblN0YXRlO1xuICAgIGlmICh0aGlzLnN0YXRlICE9IHN0b3BwaW5nICYmIHRoaXMuc3RhdGUgIT0gc3RvcHBlZCkge1xuICAgICAgdGhpcy5zdGF0ZSA9IHN0b3BwaW5nO1xuICAgICAgdGhpcy5mZXRjaFJlcXVlc3QuY2FuY2VsKCk7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIC8vIEZldGNoIHJlcXVlc3QgZGVsZWdhdGVcblxuICBwcmVwYXJlUmVxdWVzdChyZXF1ZXN0KSB7XG4gICAgaWYgKCFyZXF1ZXN0LmlzU2FmZSkge1xuICAgICAgY29uc3QgdG9rZW4gPSBnZXRDb29raWVWYWx1ZShnZXRNZXRhQ29udGVudChcImNzcmYtcGFyYW1cIikpIHx8IGdldE1ldGFDb250ZW50KFwiY3NyZi10b2tlblwiKTtcbiAgICAgIGlmICh0b2tlbikge1xuICAgICAgICByZXF1ZXN0LmhlYWRlcnNbXCJYLUNTUkYtVG9rZW5cIl0gPSB0b2tlbjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5yZXF1ZXN0QWNjZXB0c1R1cmJvU3RyZWFtUmVzcG9uc2UocmVxdWVzdCkpIHtcbiAgICAgIHJlcXVlc3QuYWNjZXB0UmVzcG9uc2VUeXBlKFN0cmVhbU1lc3NhZ2UuY29udGVudFR5cGUpO1xuICAgIH1cbiAgfVxuXG4gIHJlcXVlc3RTdGFydGVkKF9yZXF1ZXN0KSB7XG4gICAgdGhpcy5zdGF0ZSA9IEZvcm1TdWJtaXNzaW9uU3RhdGUud2FpdGluZztcbiAgICBpZiAodGhpcy5zdWJtaXR0ZXIpIGNvbmZpZy5mb3Jtcy5zdWJtaXR0ZXIuYmVmb3JlU3VibWl0KHRoaXMuc3VibWl0dGVyKTtcbiAgICB0aGlzLnNldFN1Ym1pdHNXaXRoKCk7XG4gICAgbWFya0FzQnVzeSh0aGlzLmZvcm1FbGVtZW50KTtcbiAgICBkaXNwYXRjaChcInR1cmJvOnN1Ym1pdC1zdGFydFwiLCB7XG4gICAgICB0YXJnZXQ6IHRoaXMuZm9ybUVsZW1lbnQsXG4gICAgICBkZXRhaWw6IHsgZm9ybVN1Ym1pc3Npb246IHRoaXMgfVxuICAgIH0pO1xuICAgIHRoaXMuZGVsZWdhdGUuZm9ybVN1Ym1pc3Npb25TdGFydGVkKHRoaXMpO1xuICB9XG5cbiAgcmVxdWVzdFByZXZlbnRlZEhhbmRsaW5nUmVzcG9uc2UocmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgICBwcmVmZXRjaENhY2hlLmNsZWFyKCk7XG5cbiAgICB0aGlzLnJlc3VsdCA9IHsgc3VjY2VzczogcmVzcG9uc2Uuc3VjY2VlZGVkLCBmZXRjaFJlc3BvbnNlOiByZXNwb25zZSB9O1xuICB9XG5cbiAgcmVxdWVzdFN1Y2NlZWRlZFdpdGhSZXNwb25zZShyZXF1ZXN0LCByZXNwb25zZSkge1xuICAgIGlmIChyZXNwb25zZS5jbGllbnRFcnJvciB8fCByZXNwb25zZS5zZXJ2ZXJFcnJvcikge1xuICAgICAgdGhpcy5kZWxlZ2F0ZS5mb3JtU3VibWlzc2lvbkZhaWxlZFdpdGhSZXNwb25zZSh0aGlzLCByZXNwb25zZSk7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBwcmVmZXRjaENhY2hlLmNsZWFyKCk7XG5cbiAgICBpZiAodGhpcy5yZXF1ZXN0TXVzdFJlZGlyZWN0KHJlcXVlc3QpICYmIHJlc3BvbnNlU3VjY2VlZGVkV2l0aG91dFJlZGlyZWN0KHJlc3BvbnNlKSkge1xuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoXCJGb3JtIHJlc3BvbnNlcyBtdXN0IHJlZGlyZWN0IHRvIGFub3RoZXIgbG9jYXRpb25cIik7XG4gICAgICB0aGlzLmRlbGVnYXRlLmZvcm1TdWJtaXNzaW9uRXJyb3JlZCh0aGlzLCBlcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhdGUgPSBGb3JtU3VibWlzc2lvblN0YXRlLnJlY2VpdmluZztcbiAgICAgIHRoaXMucmVzdWx0ID0geyBzdWNjZXNzOiB0cnVlLCBmZXRjaFJlc3BvbnNlOiByZXNwb25zZSB9O1xuICAgICAgdGhpcy5kZWxlZ2F0ZS5mb3JtU3VibWlzc2lvblN1Y2NlZWRlZFdpdGhSZXNwb25zZSh0aGlzLCByZXNwb25zZSk7XG4gICAgfVxuICB9XG5cbiAgcmVxdWVzdEZhaWxlZFdpdGhSZXNwb25zZShyZXF1ZXN0LCByZXNwb25zZSkge1xuICAgIHRoaXMucmVzdWx0ID0geyBzdWNjZXNzOiBmYWxzZSwgZmV0Y2hSZXNwb25zZTogcmVzcG9uc2UgfTtcbiAgICB0aGlzLmRlbGVnYXRlLmZvcm1TdWJtaXNzaW9uRmFpbGVkV2l0aFJlc3BvbnNlKHRoaXMsIHJlc3BvbnNlKTtcbiAgfVxuXG4gIHJlcXVlc3RFcnJvcmVkKHJlcXVlc3QsIGVycm9yKSB7XG4gICAgdGhpcy5yZXN1bHQgPSB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvciB9O1xuICAgIHRoaXMuZGVsZWdhdGUuZm9ybVN1Ym1pc3Npb25FcnJvcmVkKHRoaXMsIGVycm9yKTtcbiAgfVxuXG4gIHJlcXVlc3RGaW5pc2hlZChfcmVxdWVzdCkge1xuICAgIHRoaXMuc3RhdGUgPSBGb3JtU3VibWlzc2lvblN0YXRlLnN0b3BwZWQ7XG4gICAgaWYgKHRoaXMuc3VibWl0dGVyKSBjb25maWcuZm9ybXMuc3VibWl0dGVyLmFmdGVyU3VibWl0KHRoaXMuc3VibWl0dGVyKTtcbiAgICB0aGlzLnJlc2V0U3VibWl0dGVyVGV4dCgpO1xuICAgIGNsZWFyQnVzeVN0YXRlKHRoaXMuZm9ybUVsZW1lbnQpO1xuICAgIGRpc3BhdGNoKFwidHVyYm86c3VibWl0LWVuZFwiLCB7XG4gICAgICB0YXJnZXQ6IHRoaXMuZm9ybUVsZW1lbnQsXG4gICAgICBkZXRhaWw6IHsgZm9ybVN1Ym1pc3Npb246IHRoaXMsIC4uLnRoaXMucmVzdWx0IH1cbiAgICB9KTtcbiAgICB0aGlzLmRlbGVnYXRlLmZvcm1TdWJtaXNzaW9uRmluaXNoZWQodGhpcyk7XG4gIH1cblxuICAvLyBQcml2YXRlXG5cbiAgc2V0U3VibWl0c1dpdGgoKSB7XG4gICAgaWYgKCF0aGlzLnN1Ym1pdHRlciB8fCAhdGhpcy5zdWJtaXRzV2l0aCkgcmV0dXJuXG5cbiAgICBpZiAodGhpcy5zdWJtaXR0ZXIubWF0Y2hlcyhcImJ1dHRvblwiKSkge1xuICAgICAgdGhpcy5vcmlnaW5hbFN1Ym1pdFRleHQgPSB0aGlzLnN1Ym1pdHRlci5pbm5lckhUTUw7XG4gICAgICB0aGlzLnN1Ym1pdHRlci5pbm5lckhUTUwgPSB0aGlzLnN1Ym1pdHNXaXRoO1xuICAgIH0gZWxzZSBpZiAodGhpcy5zdWJtaXR0ZXIubWF0Y2hlcyhcImlucHV0XCIpKSB7XG4gICAgICBjb25zdCBpbnB1dCA9IHRoaXMuc3VibWl0dGVyO1xuICAgICAgdGhpcy5vcmlnaW5hbFN1Ym1pdFRleHQgPSBpbnB1dC52YWx1ZTtcbiAgICAgIGlucHV0LnZhbHVlID0gdGhpcy5zdWJtaXRzV2l0aDtcbiAgICB9XG4gIH1cblxuICByZXNldFN1Ym1pdHRlclRleHQoKSB7XG4gICAgaWYgKCF0aGlzLnN1Ym1pdHRlciB8fCAhdGhpcy5vcmlnaW5hbFN1Ym1pdFRleHQpIHJldHVyblxuXG4gICAgaWYgKHRoaXMuc3VibWl0dGVyLm1hdGNoZXMoXCJidXR0b25cIikpIHtcbiAgICAgIHRoaXMuc3VibWl0dGVyLmlubmVySFRNTCA9IHRoaXMub3JpZ2luYWxTdWJtaXRUZXh0O1xuICAgIH0gZWxzZSBpZiAodGhpcy5zdWJtaXR0ZXIubWF0Y2hlcyhcImlucHV0XCIpKSB7XG4gICAgICBjb25zdCBpbnB1dCA9IHRoaXMuc3VibWl0dGVyO1xuICAgICAgaW5wdXQudmFsdWUgPSB0aGlzLm9yaWdpbmFsU3VibWl0VGV4dDtcbiAgICB9XG4gIH1cblxuICByZXF1ZXN0TXVzdFJlZGlyZWN0KHJlcXVlc3QpIHtcbiAgICByZXR1cm4gIXJlcXVlc3QuaXNTYWZlICYmIHRoaXMubXVzdFJlZGlyZWN0XG4gIH1cblxuICByZXF1ZXN0QWNjZXB0c1R1cmJvU3RyZWFtUmVzcG9uc2UocmVxdWVzdCkge1xuICAgIHJldHVybiAhcmVxdWVzdC5pc1NhZmUgfHwgaGFzQXR0cmlidXRlKFwiZGF0YS10dXJiby1zdHJlYW1cIiwgdGhpcy5zdWJtaXR0ZXIsIHRoaXMuZm9ybUVsZW1lbnQpXG4gIH1cblxuICBnZXQgc3VibWl0c1dpdGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3VibWl0dGVyPy5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLXN1Ym1pdHMtd2l0aFwiKVxuICB9XG59XG5cbmZ1bmN0aW9uIGJ1aWxkRm9ybURhdGEoZm9ybUVsZW1lbnQsIHN1Ym1pdHRlcikge1xuICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShmb3JtRWxlbWVudCk7XG4gIGNvbnN0IG5hbWUgPSBzdWJtaXR0ZXI/LmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XG4gIGNvbnN0IHZhbHVlID0gc3VibWl0dGVyPy5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKTtcblxuICBpZiAobmFtZSkge1xuICAgIGZvcm1EYXRhLmFwcGVuZChuYW1lLCB2YWx1ZSB8fCBcIlwiKTtcbiAgfVxuXG4gIHJldHVybiBmb3JtRGF0YVxufVxuXG5mdW5jdGlvbiBnZXRDb29raWVWYWx1ZShjb29raWVOYW1lKSB7XG4gIGlmIChjb29raWVOYW1lICE9IG51bGwpIHtcbiAgICBjb25zdCBjb29raWVzID0gZG9jdW1lbnQuY29va2llID8gZG9jdW1lbnQuY29va2llLnNwbGl0KFwiOyBcIikgOiBbXTtcbiAgICBjb25zdCBjb29raWUgPSBjb29raWVzLmZpbmQoKGNvb2tpZSkgPT4gY29va2llLnN0YXJ0c1dpdGgoY29va2llTmFtZSkpO1xuICAgIGlmIChjb29raWUpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gY29va2llLnNwbGl0KFwiPVwiKS5zbGljZSgxKS5qb2luKFwiPVwiKTtcbiAgICAgIHJldHVybiB2YWx1ZSA/IGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkgOiB1bmRlZmluZWRcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVzcG9uc2VTdWNjZWVkZWRXaXRob3V0UmVkaXJlY3QocmVzcG9uc2UpIHtcbiAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1c0NvZGUgPT0gMjAwICYmICFyZXNwb25zZS5yZWRpcmVjdGVkXG59XG5cbmZ1bmN0aW9uIGdldEZvcm1BY3Rpb24oZm9ybUVsZW1lbnQsIHN1Ym1pdHRlcikge1xuICBjb25zdCBmb3JtRWxlbWVudEFjdGlvbiA9IHR5cGVvZiBmb3JtRWxlbWVudC5hY3Rpb24gPT09IFwic3RyaW5nXCIgPyBmb3JtRWxlbWVudC5hY3Rpb24gOiBudWxsO1xuXG4gIGlmIChzdWJtaXR0ZXI/Lmhhc0F0dHJpYnV0ZShcImZvcm1hY3Rpb25cIikpIHtcbiAgICByZXR1cm4gc3VibWl0dGVyLmdldEF0dHJpYnV0ZShcImZvcm1hY3Rpb25cIikgfHwgXCJcIlxuICB9IGVsc2Uge1xuICAgIHJldHVybiBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJhY3Rpb25cIikgfHwgZm9ybUVsZW1lbnRBY3Rpb24gfHwgXCJcIlxuICB9XG59XG5cbmZ1bmN0aW9uIGdldEFjdGlvbihmb3JtQWN0aW9uLCBmZXRjaE1ldGhvZCkge1xuICBjb25zdCBhY3Rpb24gPSBleHBhbmRVUkwoZm9ybUFjdGlvbik7XG5cbiAgaWYgKGlzU2FmZShmZXRjaE1ldGhvZCkpIHtcbiAgICBhY3Rpb24uc2VhcmNoID0gXCJcIjtcbiAgfVxuXG4gIHJldHVybiBhY3Rpb25cbn1cblxuZnVuY3Rpb24gZ2V0TWV0aG9kKGZvcm1FbGVtZW50LCBzdWJtaXR0ZXIpIHtcbiAgY29uc3QgbWV0aG9kID0gc3VibWl0dGVyPy5nZXRBdHRyaWJ1dGUoXCJmb3JtbWV0aG9kXCIpIHx8IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcIm1ldGhvZFwiKSB8fCBcIlwiO1xuICByZXR1cm4gZmV0Y2hNZXRob2RGcm9tU3RyaW5nKG1ldGhvZC50b0xvd2VyQ2FzZSgpKSB8fCBGZXRjaE1ldGhvZC5nZXRcbn1cblxuZnVuY3Rpb24gZ2V0RW5jdHlwZShmb3JtRWxlbWVudCwgc3VibWl0dGVyKSB7XG4gIHJldHVybiBmZXRjaEVuY3R5cGVGcm9tU3RyaW5nKHN1Ym1pdHRlcj8uZ2V0QXR0cmlidXRlKFwiZm9ybWVuY3R5cGVcIikgfHwgZm9ybUVsZW1lbnQuZW5jdHlwZSlcbn1cblxuY2xhc3MgU25hcHNob3Qge1xuICBjb25zdHJ1Y3RvcihlbGVtZW50KSB7XG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgfVxuXG4gIGdldCBhY3RpdmVFbGVtZW50KCkge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnQub3duZXJEb2N1bWVudC5hY3RpdmVFbGVtZW50XG4gIH1cblxuICBnZXQgY2hpbGRyZW4oKSB7XG4gICAgcmV0dXJuIFsuLi50aGlzLmVsZW1lbnQuY2hpbGRyZW5dXG4gIH1cblxuICBoYXNBbmNob3IoYW5jaG9yKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0RWxlbWVudEZvckFuY2hvcihhbmNob3IpICE9IG51bGxcbiAgfVxuXG4gIGdldEVsZW1lbnRGb3JBbmNob3IoYW5jaG9yKSB7XG4gICAgcmV0dXJuIGFuY2hvciA/IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKGBbaWQ9JyR7YW5jaG9yfSddLCBhW25hbWU9JyR7YW5jaG9yfSddYCkgOiBudWxsXG4gIH1cblxuICBnZXQgaXNDb25uZWN0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudC5pc0Nvbm5lY3RlZFxuICB9XG5cbiAgZ2V0IGZpcnN0QXV0b2ZvY3VzYWJsZUVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHF1ZXJ5QXV0b2ZvY3VzYWJsZUVsZW1lbnQodGhpcy5lbGVtZW50KVxuICB9XG5cbiAgZ2V0IHBlcm1hbmVudEVsZW1lbnRzKCkge1xuICAgIHJldHVybiBxdWVyeVBlcm1hbmVudEVsZW1lbnRzQWxsKHRoaXMuZWxlbWVudClcbiAgfVxuXG4gIGdldFBlcm1hbmVudEVsZW1lbnRCeUlkKGlkKSB7XG4gICAgcmV0dXJuIGdldFBlcm1hbmVudEVsZW1lbnRCeUlkKHRoaXMuZWxlbWVudCwgaWQpXG4gIH1cblxuICBnZXRQZXJtYW5lbnRFbGVtZW50TWFwRm9yU25hcHNob3Qoc25hcHNob3QpIHtcbiAgICBjb25zdCBwZXJtYW5lbnRFbGVtZW50TWFwID0ge307XG5cbiAgICBmb3IgKGNvbnN0IGN1cnJlbnRQZXJtYW5lbnRFbGVtZW50IG9mIHRoaXMucGVybWFuZW50RWxlbWVudHMpIHtcbiAgICAgIGNvbnN0IHsgaWQgfSA9IGN1cnJlbnRQZXJtYW5lbnRFbGVtZW50O1xuICAgICAgY29uc3QgbmV3UGVybWFuZW50RWxlbWVudCA9IHNuYXBzaG90LmdldFBlcm1hbmVudEVsZW1lbnRCeUlkKGlkKTtcbiAgICAgIGlmIChuZXdQZXJtYW5lbnRFbGVtZW50KSB7XG4gICAgICAgIHBlcm1hbmVudEVsZW1lbnRNYXBbaWRdID0gW2N1cnJlbnRQZXJtYW5lbnRFbGVtZW50LCBuZXdQZXJtYW5lbnRFbGVtZW50XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcGVybWFuZW50RWxlbWVudE1hcFxuICB9XG59XG5cbmZ1bmN0aW9uIGdldFBlcm1hbmVudEVsZW1lbnRCeUlkKG5vZGUsIGlkKSB7XG4gIHJldHVybiBub2RlLnF1ZXJ5U2VsZWN0b3IoYCMke2lkfVtkYXRhLXR1cmJvLXBlcm1hbmVudF1gKVxufVxuXG5mdW5jdGlvbiBxdWVyeVBlcm1hbmVudEVsZW1lbnRzQWxsKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUucXVlcnlTZWxlY3RvckFsbChcIltpZF1bZGF0YS10dXJiby1wZXJtYW5lbnRdXCIpXG59XG5cbmNsYXNzIEZvcm1TdWJtaXRPYnNlcnZlciB7XG4gIHN0YXJ0ZWQgPSBmYWxzZVxuXG4gIGNvbnN0cnVjdG9yKGRlbGVnYXRlLCBldmVudFRhcmdldCkge1xuICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICB0aGlzLmV2ZW50VGFyZ2V0ID0gZXZlbnRUYXJnZXQ7XG4gIH1cblxuICBzdGFydCgpIHtcbiAgICBpZiAoIXRoaXMuc3RhcnRlZCkge1xuICAgICAgdGhpcy5ldmVudFRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuc3VibWl0Q2FwdHVyZWQsIHRydWUpO1xuICAgICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBzdG9wKCkge1xuICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgIHRoaXMuZXZlbnRUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLnN1Ym1pdENhcHR1cmVkLCB0cnVlKTtcbiAgICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHN1Ym1pdENhcHR1cmVkID0gKCkgPT4ge1xuICAgIHRoaXMuZXZlbnRUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLnN1Ym1pdEJ1YmJsZWQsIGZhbHNlKTtcbiAgICB0aGlzLmV2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5zdWJtaXRCdWJibGVkLCBmYWxzZSk7XG4gIH1cblxuICBzdWJtaXRCdWJibGVkID0gKGV2ZW50KSA9PiB7XG4gICAgaWYgKCFldmVudC5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICBjb25zdCBmb3JtID0gZXZlbnQudGFyZ2V0IGluc3RhbmNlb2YgSFRNTEZvcm1FbGVtZW50ID8gZXZlbnQudGFyZ2V0IDogdW5kZWZpbmVkO1xuICAgICAgY29uc3Qgc3VibWl0dGVyID0gZXZlbnQuc3VibWl0dGVyIHx8IHVuZGVmaW5lZDtcblxuICAgICAgaWYgKFxuICAgICAgICBmb3JtICYmXG4gICAgICAgIHN1Ym1pc3Npb25Eb2VzTm90RGlzbWlzc0RpYWxvZyhmb3JtLCBzdWJtaXR0ZXIpICYmXG4gICAgICAgIHN1Ym1pc3Npb25Eb2VzTm90VGFyZ2V0SUZyYW1lKGZvcm0sIHN1Ym1pdHRlcikgJiZcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZS53aWxsU3VibWl0Rm9ybShmb3JtLCBzdWJtaXR0ZXIpXG4gICAgICApIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUuZm9ybVN1Ym1pdHRlZChmb3JtLCBzdWJtaXR0ZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBzdWJtaXNzaW9uRG9lc05vdERpc21pc3NEaWFsb2coZm9ybSwgc3VibWl0dGVyKSB7XG4gIGNvbnN0IG1ldGhvZCA9IHN1Ym1pdHRlcj8uZ2V0QXR0cmlidXRlKFwiZm9ybW1ldGhvZFwiKSB8fCBmb3JtLmdldEF0dHJpYnV0ZShcIm1ldGhvZFwiKTtcblxuICByZXR1cm4gbWV0aG9kICE9IFwiZGlhbG9nXCJcbn1cblxuZnVuY3Rpb24gc3VibWlzc2lvbkRvZXNOb3RUYXJnZXRJRnJhbWUoZm9ybSwgc3VibWl0dGVyKSB7XG4gIGNvbnN0IHRhcmdldCA9IHN1Ym1pdHRlcj8uZ2V0QXR0cmlidXRlKFwiZm9ybXRhcmdldFwiKSB8fCBmb3JtLmdldEF0dHJpYnV0ZShcInRhcmdldFwiKTtcblxuICByZXR1cm4gZG9lc05vdFRhcmdldElGcmFtZSh0YXJnZXQpXG59XG5cbmNsYXNzIFZpZXcge1xuICAjcmVzb2x2ZVJlbmRlclByb21pc2UgPSAoX3ZhbHVlKSA9PiB7fVxuICAjcmVzb2x2ZUludGVyY2VwdGlvblByb21pc2UgPSAoX3ZhbHVlKSA9PiB7fVxuXG4gIGNvbnN0cnVjdG9yKGRlbGVnYXRlLCBlbGVtZW50KSB7XG4gICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gIH1cblxuICAvLyBTY3JvbGxpbmdcblxuICBzY3JvbGxUb0FuY2hvcihhbmNob3IpIHtcbiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5zbmFwc2hvdC5nZXRFbGVtZW50Rm9yQW5jaG9yKGFuY2hvcik7XG4gICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgIHRoaXMuZm9jdXNFbGVtZW50KGVsZW1lbnQpO1xuICAgICAgdGhpcy5zY3JvbGxUb0VsZW1lbnQoZWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2Nyb2xsVG9Qb3NpdGlvbih7IHg6IDAsIHk6IDAgfSk7XG4gICAgfVxuICB9XG5cbiAgc2Nyb2xsVG9BbmNob3JGcm9tTG9jYXRpb24obG9jYXRpb24pIHtcbiAgICB0aGlzLnNjcm9sbFRvQW5jaG9yKGdldEFuY2hvcihsb2NhdGlvbikpO1xuICB9XG5cbiAgc2Nyb2xsVG9FbGVtZW50KGVsZW1lbnQpIHtcbiAgICBlbGVtZW50LnNjcm9sbEludG9WaWV3KCk7XG4gIH1cblxuICBmb2N1c0VsZW1lbnQoZWxlbWVudCkge1xuICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgIGlmIChlbGVtZW50Lmhhc0F0dHJpYnV0ZShcInRhYmluZGV4XCIpKSB7XG4gICAgICAgIGVsZW1lbnQuZm9jdXMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgXCItMVwiKTtcbiAgICAgICAgZWxlbWVudC5mb2N1cygpO1xuICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcInRhYmluZGV4XCIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNjcm9sbFRvUG9zaXRpb24oeyB4LCB5IH0pIHtcbiAgICB0aGlzLnNjcm9sbFJvb3Quc2Nyb2xsVG8oeCwgeSk7XG4gIH1cblxuICBzY3JvbGxUb1RvcCgpIHtcbiAgICB0aGlzLnNjcm9sbFRvUG9zaXRpb24oeyB4OiAwLCB5OiAwIH0pO1xuICB9XG5cbiAgZ2V0IHNjcm9sbFJvb3QoKSB7XG4gICAgcmV0dXJuIHdpbmRvd1xuICB9XG5cbiAgLy8gUmVuZGVyaW5nXG5cbiAgYXN5bmMgcmVuZGVyKHJlbmRlcmVyKSB7XG4gICAgY29uc3QgeyBpc1ByZXZpZXcsIHNob3VsZFJlbmRlciwgd2lsbFJlbmRlciwgbmV3U25hcHNob3Q6IHNuYXBzaG90IH0gPSByZW5kZXJlcjtcblxuICAgIC8vIEEgd29ya2Fyb3VuZCB0byBpZ25vcmUgdHJhY2tlZCBlbGVtZW50IG1pc21hdGNoIHJlbG9hZHMgd2hlbiBwZXJmb3JtaW5nXG4gICAgLy8gYSBwcm9tb3RlZCBWaXNpdCBmcm9tIGEgZnJhbWUgbmF2aWdhdGlvblxuICAgIGNvbnN0IHNob3VsZEludmFsaWRhdGUgPSB3aWxsUmVuZGVyO1xuXG4gICAgaWYgKHNob3VsZFJlbmRlcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+ICh0aGlzLiNyZXNvbHZlUmVuZGVyUHJvbWlzZSA9IHJlc29sdmUpKTtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICBhd2FpdCB0aGlzLnByZXBhcmVUb1JlbmRlclNuYXBzaG90KHJlbmRlcmVyKTtcblxuICAgICAgICBjb25zdCByZW5kZXJJbnRlcmNlcHRpb24gPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gKHRoaXMuI3Jlc29sdmVJbnRlcmNlcHRpb25Qcm9taXNlID0gcmVzb2x2ZSkpO1xuICAgICAgICBjb25zdCBvcHRpb25zID0geyByZXN1bWU6IHRoaXMuI3Jlc29sdmVJbnRlcmNlcHRpb25Qcm9taXNlLCByZW5kZXI6IHRoaXMucmVuZGVyZXIucmVuZGVyRWxlbWVudCwgcmVuZGVyTWV0aG9kOiB0aGlzLnJlbmRlcmVyLnJlbmRlck1ldGhvZCB9O1xuICAgICAgICBjb25zdCBpbW1lZGlhdGVSZW5kZXIgPSB0aGlzLmRlbGVnYXRlLmFsbG93c0ltbWVkaWF0ZVJlbmRlcihzbmFwc2hvdCwgb3B0aW9ucyk7XG4gICAgICAgIGlmICghaW1tZWRpYXRlUmVuZGVyKSBhd2FpdCByZW5kZXJJbnRlcmNlcHRpb247XG5cbiAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJTbmFwc2hvdChyZW5kZXJlcik7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUudmlld1JlbmRlcmVkU25hcHNob3Qoc25hcHNob3QsIGlzUHJldmlldywgdGhpcy5yZW5kZXJlci5yZW5kZXJNZXRob2QpO1xuICAgICAgICB0aGlzLmRlbGVnYXRlLnByZWxvYWRPbkxvYWRMaW5rc0ZvclZpZXcodGhpcy5lbGVtZW50KTtcbiAgICAgICAgdGhpcy5maW5pc2hSZW5kZXJpbmdTbmFwc2hvdChyZW5kZXJlcik7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBkZWxldGUgdGhpcy5yZW5kZXJlcjtcbiAgICAgICAgdGhpcy4jcmVzb2x2ZVJlbmRlclByb21pc2UodW5kZWZpbmVkKTtcbiAgICAgICAgZGVsZXRlIHRoaXMucmVuZGVyUHJvbWlzZTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHNob3VsZEludmFsaWRhdGUpIHtcbiAgICAgIHRoaXMuaW52YWxpZGF0ZShyZW5kZXJlci5yZWxvYWRSZWFzb24pO1xuICAgIH1cbiAgfVxuXG4gIGludmFsaWRhdGUocmVhc29uKSB7XG4gICAgdGhpcy5kZWxlZ2F0ZS52aWV3SW52YWxpZGF0ZWQocmVhc29uKTtcbiAgfVxuXG4gIGFzeW5jIHByZXBhcmVUb1JlbmRlclNuYXBzaG90KHJlbmRlcmVyKSB7XG4gICAgdGhpcy5tYXJrQXNQcmV2aWV3KHJlbmRlcmVyLmlzUHJldmlldyk7XG4gICAgYXdhaXQgcmVuZGVyZXIucHJlcGFyZVRvUmVuZGVyKCk7XG4gIH1cblxuICBtYXJrQXNQcmV2aWV3KGlzUHJldmlldykge1xuICAgIGlmIChpc1ByZXZpZXcpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLXByZXZpZXdcIiwgXCJcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLXByZXZpZXdcIik7XG4gICAgfVxuICB9XG5cbiAgbWFya1Zpc2l0RGlyZWN0aW9uKGRpcmVjdGlvbikge1xuICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLXZpc2l0LWRpcmVjdGlvblwiLCBkaXJlY3Rpb24pO1xuICB9XG5cbiAgdW5tYXJrVmlzaXREaXJlY3Rpb24oKSB7XG4gICAgdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtdHVyYm8tdmlzaXQtZGlyZWN0aW9uXCIpO1xuICB9XG5cbiAgYXN5bmMgcmVuZGVyU25hcHNob3QocmVuZGVyZXIpIHtcbiAgICBhd2FpdCByZW5kZXJlci5yZW5kZXIoKTtcbiAgfVxuXG4gIGZpbmlzaFJlbmRlcmluZ1NuYXBzaG90KHJlbmRlcmVyKSB7XG4gICAgcmVuZGVyZXIuZmluaXNoUmVuZGVyaW5nKCk7XG4gIH1cbn1cblxuY2xhc3MgRnJhbWVWaWV3IGV4dGVuZHMgVmlldyB7XG4gIG1pc3NpbmcoKSB7XG4gICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IGA8c3Ryb25nIGNsYXNzPVwidHVyYm8tZnJhbWUtZXJyb3JcIj5Db250ZW50IG1pc3Npbmc8L3N0cm9uZz5gO1xuICB9XG5cbiAgZ2V0IHNuYXBzaG90KCkge1xuICAgIHJldHVybiBuZXcgU25hcHNob3QodGhpcy5lbGVtZW50KVxuICB9XG59XG5cbmNsYXNzIExpbmtJbnRlcmNlcHRvciB7XG4gIGNvbnN0cnVjdG9yKGRlbGVnYXRlLCBlbGVtZW50KSB7XG4gICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gIH1cblxuICBzdGFydCgpIHtcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xpY2tCdWJibGVkKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidHVyYm86Y2xpY2tcIiwgdGhpcy5saW5rQ2xpY2tlZCk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInR1cmJvOmJlZm9yZS12aXNpdFwiLCB0aGlzLndpbGxWaXNpdCk7XG4gIH1cblxuICBzdG9wKCkge1xuICAgIHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jbGlja0J1YmJsZWQpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0dXJibzpjbGlja1wiLCB0aGlzLmxpbmtDbGlja2VkKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidHVyYm86YmVmb3JlLXZpc2l0XCIsIHRoaXMud2lsbFZpc2l0KTtcbiAgfVxuXG4gIGNsaWNrQnViYmxlZCA9IChldmVudCkgPT4ge1xuICAgIGlmICh0aGlzLmNsaWNrRXZlbnRJc1NpZ25pZmljYW50KGV2ZW50KSkge1xuICAgICAgdGhpcy5jbGlja0V2ZW50ID0gZXZlbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlbGV0ZSB0aGlzLmNsaWNrRXZlbnQ7XG4gICAgfVxuICB9XG5cbiAgbGlua0NsaWNrZWQgPSAoZXZlbnQpID0+IHtcbiAgICBpZiAodGhpcy5jbGlja0V2ZW50ICYmIHRoaXMuY2xpY2tFdmVudElzU2lnbmlmaWNhbnQoZXZlbnQpKSB7XG4gICAgICBpZiAodGhpcy5kZWxlZ2F0ZS5zaG91bGRJbnRlcmNlcHRMaW5rQ2xpY2soZXZlbnQudGFyZ2V0LCBldmVudC5kZXRhaWwudXJsLCBldmVudC5kZXRhaWwub3JpZ2luYWxFdmVudCkpIHtcbiAgICAgICAgdGhpcy5jbGlja0V2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUubGlua0NsaWNrSW50ZXJjZXB0ZWQoZXZlbnQudGFyZ2V0LCBldmVudC5kZXRhaWwudXJsLCBldmVudC5kZXRhaWwub3JpZ2luYWxFdmVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIGRlbGV0ZSB0aGlzLmNsaWNrRXZlbnQ7XG4gIH1cblxuICB3aWxsVmlzaXQgPSAoX2V2ZW50KSA9PiB7XG4gICAgZGVsZXRlIHRoaXMuY2xpY2tFdmVudDtcbiAgfVxuXG4gIGNsaWNrRXZlbnRJc1NpZ25pZmljYW50KGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY29tcG9zZWQgPyBldmVudC50YXJnZXQ/LnBhcmVudEVsZW1lbnQgOiBldmVudC50YXJnZXQ7XG4gICAgY29uc3QgZWxlbWVudCA9IGZpbmRMaW5rRnJvbUNsaWNrVGFyZ2V0KHRhcmdldCkgfHwgdGFyZ2V0O1xuXG4gICAgcmV0dXJuIGVsZW1lbnQgaW5zdGFuY2VvZiBFbGVtZW50ICYmIGVsZW1lbnQuY2xvc2VzdChcInR1cmJvLWZyYW1lLCBodG1sXCIpID09IHRoaXMuZWxlbWVudFxuICB9XG59XG5cbmNsYXNzIExpbmtDbGlja09ic2VydmVyIHtcbiAgc3RhcnRlZCA9IGZhbHNlXG5cbiAgY29uc3RydWN0b3IoZGVsZWdhdGUsIGV2ZW50VGFyZ2V0KSB7XG4gICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgIHRoaXMuZXZlbnRUYXJnZXQgPSBldmVudFRhcmdldDtcbiAgfVxuXG4gIHN0YXJ0KCkge1xuICAgIGlmICghdGhpcy5zdGFydGVkKSB7XG4gICAgICB0aGlzLmV2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsaWNrQ2FwdHVyZWQsIHRydWUpO1xuICAgICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBzdG9wKCkge1xuICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgIHRoaXMuZXZlbnRUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xpY2tDYXB0dXJlZCwgdHJ1ZSk7XG4gICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBjbGlja0NhcHR1cmVkID0gKCkgPT4ge1xuICAgIHRoaXMuZXZlbnRUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xpY2tCdWJibGVkLCBmYWxzZSk7XG4gICAgdGhpcy5ldmVudFRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jbGlja0J1YmJsZWQsIGZhbHNlKTtcbiAgfVxuXG4gIGNsaWNrQnViYmxlZCA9IChldmVudCkgPT4ge1xuICAgIGlmIChldmVudCBpbnN0YW5jZW9mIE1vdXNlRXZlbnQgJiYgdGhpcy5jbGlja0V2ZW50SXNTaWduaWZpY2FudChldmVudCkpIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IChldmVudC5jb21wb3NlZFBhdGggJiYgZXZlbnQuY29tcG9zZWRQYXRoKClbMF0pIHx8IGV2ZW50LnRhcmdldDtcbiAgICAgIGNvbnN0IGxpbmsgPSBmaW5kTGlua0Zyb21DbGlja1RhcmdldCh0YXJnZXQpO1xuICAgICAgaWYgKGxpbmsgJiYgZG9lc05vdFRhcmdldElGcmFtZShsaW5rLnRhcmdldCkpIHtcbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnZXRMb2NhdGlvbkZvckxpbmsobGluayk7XG4gICAgICAgIGlmICh0aGlzLmRlbGVnYXRlLndpbGxGb2xsb3dMaW5rVG9Mb2NhdGlvbihsaW5rLCBsb2NhdGlvbiwgZXZlbnQpKSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0aGlzLmRlbGVnYXRlLmZvbGxvd2VkTGlua1RvTG9jYXRpb24obGluaywgbG9jYXRpb24pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY2xpY2tFdmVudElzU2lnbmlmaWNhbnQoZXZlbnQpIHtcbiAgICByZXR1cm4gIShcbiAgICAgIChldmVudC50YXJnZXQgJiYgZXZlbnQudGFyZ2V0LmlzQ29udGVudEVkaXRhYmxlKSB8fFxuICAgICAgZXZlbnQuZGVmYXVsdFByZXZlbnRlZCB8fFxuICAgICAgZXZlbnQud2hpY2ggPiAxIHx8XG4gICAgICBldmVudC5hbHRLZXkgfHxcbiAgICAgIGV2ZW50LmN0cmxLZXkgfHxcbiAgICAgIGV2ZW50Lm1ldGFLZXkgfHxcbiAgICAgIGV2ZW50LnNoaWZ0S2V5XG4gICAgKVxuICB9XG59XG5cbmNsYXNzIEZvcm1MaW5rQ2xpY2tPYnNlcnZlciB7XG4gIGNvbnN0cnVjdG9yKGRlbGVnYXRlLCBlbGVtZW50KSB7XG4gICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgIHRoaXMubGlua0ludGVyY2VwdG9yID0gbmV3IExpbmtDbGlja09ic2VydmVyKHRoaXMsIGVsZW1lbnQpO1xuICB9XG5cbiAgc3RhcnQoKSB7XG4gICAgdGhpcy5saW5rSW50ZXJjZXB0b3Iuc3RhcnQoKTtcbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgdGhpcy5saW5rSW50ZXJjZXB0b3Iuc3RvcCgpO1xuICB9XG5cbiAgLy8gTGluayBob3ZlciBvYnNlcnZlciBkZWxlZ2F0ZVxuXG4gIGNhblByZWZldGNoUmVxdWVzdFRvTG9jYXRpb24obGluaywgbG9jYXRpb24pIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHByZWZldGNoQW5kQ2FjaGVSZXF1ZXN0VG9Mb2NhdGlvbihsaW5rLCBsb2NhdGlvbikge1xuICAgIHJldHVyblxuICB9XG5cbiAgLy8gTGluayBjbGljayBvYnNlcnZlciBkZWxlZ2F0ZVxuXG4gIHdpbGxGb2xsb3dMaW5rVG9Mb2NhdGlvbihsaW5rLCBsb2NhdGlvbiwgb3JpZ2luYWxFdmVudCkge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLmRlbGVnYXRlLndpbGxTdWJtaXRGb3JtTGlua1RvTG9jYXRpb24obGluaywgbG9jYXRpb24sIG9yaWdpbmFsRXZlbnQpICYmXG4gICAgICAobGluay5oYXNBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLW1ldGhvZFwiKSB8fCBsaW5rLmhhc0F0dHJpYnV0ZShcImRhdGEtdHVyYm8tc3RyZWFtXCIpKVxuICAgIClcbiAgfVxuXG4gIGZvbGxvd2VkTGlua1RvTG9jYXRpb24obGluaywgbG9jYXRpb24pIHtcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvcm1cIik7XG5cbiAgICBjb25zdCB0eXBlID0gXCJoaWRkZW5cIjtcbiAgICBmb3IgKGNvbnN0IFtuYW1lLCB2YWx1ZV0gb2YgbG9jYXRpb24uc2VhcmNoUGFyYW1zKSB7XG4gICAgICBmb3JtLmFwcGVuZChPYmplY3QuYXNzaWduKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSwgeyB0eXBlLCBuYW1lLCB2YWx1ZSB9KSk7XG4gICAgfVxuXG4gICAgY29uc3QgYWN0aW9uID0gT2JqZWN0LmFzc2lnbihsb2NhdGlvbiwgeyBzZWFyY2g6IFwiXCIgfSk7XG4gICAgZm9ybS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvXCIsIFwidHJ1ZVwiKTtcbiAgICBmb3JtLnNldEF0dHJpYnV0ZShcImFjdGlvblwiLCBhY3Rpb24uaHJlZik7XG4gICAgZm9ybS5zZXRBdHRyaWJ1dGUoXCJoaWRkZW5cIiwgXCJcIik7XG5cbiAgICBjb25zdCBtZXRob2QgPSBsaW5rLmdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm8tbWV0aG9kXCIpO1xuICAgIGlmIChtZXRob2QpIGZvcm0uc2V0QXR0cmlidXRlKFwibWV0aG9kXCIsIG1ldGhvZCk7XG5cbiAgICBjb25zdCB0dXJib0ZyYW1lID0gbGluay5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLWZyYW1lXCIpO1xuICAgIGlmICh0dXJib0ZyYW1lKSBmb3JtLnNldEF0dHJpYnV0ZShcImRhdGEtdHVyYm8tZnJhbWVcIiwgdHVyYm9GcmFtZSk7XG5cbiAgICBjb25zdCB0dXJib0FjdGlvbiA9IGdldFZpc2l0QWN0aW9uKGxpbmspO1xuICAgIGlmICh0dXJib0FjdGlvbikgZm9ybS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLWFjdGlvblwiLCB0dXJib0FjdGlvbik7XG5cbiAgICBjb25zdCB0dXJib0NvbmZpcm0gPSBsaW5rLmdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm8tY29uZmlybVwiKTtcbiAgICBpZiAodHVyYm9Db25maXJtKSBmb3JtLnNldEF0dHJpYnV0ZShcImRhdGEtdHVyYm8tY29uZmlybVwiLCB0dXJib0NvbmZpcm0pO1xuXG4gICAgY29uc3QgdHVyYm9TdHJlYW0gPSBsaW5rLmhhc0F0dHJpYnV0ZShcImRhdGEtdHVyYm8tc3RyZWFtXCIpO1xuICAgIGlmICh0dXJib1N0cmVhbSkgZm9ybS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLXN0cmVhbVwiLCBcIlwiKTtcblxuICAgIHRoaXMuZGVsZWdhdGUuc3VibWl0dGVkRm9ybUxpbmtUb0xvY2F0aW9uKGxpbmssIGxvY2F0aW9uLCBmb3JtKTtcblxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZm9ybSk7XG4gICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwidHVyYm86c3VibWl0LWVuZFwiLCAoKSA9PiBmb3JtLnJlbW92ZSgpLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IGZvcm0ucmVxdWVzdFN1Ym1pdCgpKTtcbiAgfVxufVxuXG5jbGFzcyBCYXJkbyB7XG4gIHN0YXRpYyBhc3luYyBwcmVzZXJ2aW5nUGVybWFuZW50RWxlbWVudHMoZGVsZWdhdGUsIHBlcm1hbmVudEVsZW1lbnRNYXAsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgYmFyZG8gPSBuZXcgdGhpcyhkZWxlZ2F0ZSwgcGVybWFuZW50RWxlbWVudE1hcCk7XG4gICAgYmFyZG8uZW50ZXIoKTtcbiAgICBhd2FpdCBjYWxsYmFjaygpO1xuICAgIGJhcmRvLmxlYXZlKCk7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihkZWxlZ2F0ZSwgcGVybWFuZW50RWxlbWVudE1hcCkge1xuICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICB0aGlzLnBlcm1hbmVudEVsZW1lbnRNYXAgPSBwZXJtYW5lbnRFbGVtZW50TWFwO1xuICB9XG5cbiAgZW50ZXIoKSB7XG4gICAgZm9yIChjb25zdCBpZCBpbiB0aGlzLnBlcm1hbmVudEVsZW1lbnRNYXApIHtcbiAgICAgIGNvbnN0IFtjdXJyZW50UGVybWFuZW50RWxlbWVudCwgbmV3UGVybWFuZW50RWxlbWVudF0gPSB0aGlzLnBlcm1hbmVudEVsZW1lbnRNYXBbaWRdO1xuICAgICAgdGhpcy5kZWxlZ2F0ZS5lbnRlcmluZ0JhcmRvKGN1cnJlbnRQZXJtYW5lbnRFbGVtZW50LCBuZXdQZXJtYW5lbnRFbGVtZW50KTtcbiAgICAgIHRoaXMucmVwbGFjZU5ld1Blcm1hbmVudEVsZW1lbnRXaXRoUGxhY2Vob2xkZXIobmV3UGVybWFuZW50RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgbGVhdmUoKSB7XG4gICAgZm9yIChjb25zdCBpZCBpbiB0aGlzLnBlcm1hbmVudEVsZW1lbnRNYXApIHtcbiAgICAgIGNvbnN0IFtjdXJyZW50UGVybWFuZW50RWxlbWVudF0gPSB0aGlzLnBlcm1hbmVudEVsZW1lbnRNYXBbaWRdO1xuICAgICAgdGhpcy5yZXBsYWNlQ3VycmVudFBlcm1hbmVudEVsZW1lbnRXaXRoQ2xvbmUoY3VycmVudFBlcm1hbmVudEVsZW1lbnQpO1xuICAgICAgdGhpcy5yZXBsYWNlUGxhY2Vob2xkZXJXaXRoUGVybWFuZW50RWxlbWVudChjdXJyZW50UGVybWFuZW50RWxlbWVudCk7XG4gICAgICB0aGlzLmRlbGVnYXRlLmxlYXZpbmdCYXJkbyhjdXJyZW50UGVybWFuZW50RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgcmVwbGFjZU5ld1Blcm1hbmVudEVsZW1lbnRXaXRoUGxhY2Vob2xkZXIocGVybWFuZW50RWxlbWVudCkge1xuICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gY3JlYXRlUGxhY2Vob2xkZXJGb3JQZXJtYW5lbnRFbGVtZW50KHBlcm1hbmVudEVsZW1lbnQpO1xuICAgIHBlcm1hbmVudEVsZW1lbnQucmVwbGFjZVdpdGgocGxhY2Vob2xkZXIpO1xuICB9XG5cbiAgcmVwbGFjZUN1cnJlbnRQZXJtYW5lbnRFbGVtZW50V2l0aENsb25lKHBlcm1hbmVudEVsZW1lbnQpIHtcbiAgICBjb25zdCBjbG9uZSA9IHBlcm1hbmVudEVsZW1lbnQuY2xvbmVOb2RlKHRydWUpO1xuICAgIHBlcm1hbmVudEVsZW1lbnQucmVwbGFjZVdpdGgoY2xvbmUpO1xuICB9XG5cbiAgcmVwbGFjZVBsYWNlaG9sZGVyV2l0aFBlcm1hbmVudEVsZW1lbnQocGVybWFuZW50RWxlbWVudCkge1xuICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gdGhpcy5nZXRQbGFjZWhvbGRlckJ5SWQocGVybWFuZW50RWxlbWVudC5pZCk7XG4gICAgcGxhY2Vob2xkZXI/LnJlcGxhY2VXaXRoKHBlcm1hbmVudEVsZW1lbnQpO1xuICB9XG5cbiAgZ2V0UGxhY2Vob2xkZXJCeUlkKGlkKSB7XG4gICAgcmV0dXJuIHRoaXMucGxhY2Vob2xkZXJzLmZpbmQoKGVsZW1lbnQpID0+IGVsZW1lbnQuY29udGVudCA9PSBpZClcbiAgfVxuXG4gIGdldCBwbGFjZWhvbGRlcnMoKSB7XG4gICAgcmV0dXJuIFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwibWV0YVtuYW1lPXR1cmJvLXBlcm1hbmVudC1wbGFjZWhvbGRlcl1bY29udGVudF1cIildXG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlUGxhY2Vob2xkZXJGb3JQZXJtYW5lbnRFbGVtZW50KHBlcm1hbmVudEVsZW1lbnQpIHtcbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJtZXRhXCIpO1xuICBlbGVtZW50LnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJ0dXJiby1wZXJtYW5lbnQtcGxhY2Vob2xkZXJcIik7XG4gIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwiY29udGVudFwiLCBwZXJtYW5lbnRFbGVtZW50LmlkKTtcbiAgcmV0dXJuIGVsZW1lbnRcbn1cblxuY2xhc3MgUmVuZGVyZXIge1xuICAjYWN0aXZlRWxlbWVudCA9IG51bGxcblxuICBzdGF0aWMgcmVuZGVyRWxlbWVudChjdXJyZW50RWxlbWVudCwgbmV3RWxlbWVudCkge1xuICAgIC8vIEFic3RyYWN0IG1ldGhvZFxuICB9XG5cbiAgY29uc3RydWN0b3IoY3VycmVudFNuYXBzaG90LCBuZXdTbmFwc2hvdCwgaXNQcmV2aWV3LCB3aWxsUmVuZGVyID0gdHJ1ZSkge1xuICAgIHRoaXMuY3VycmVudFNuYXBzaG90ID0gY3VycmVudFNuYXBzaG90O1xuICAgIHRoaXMubmV3U25hcHNob3QgPSBuZXdTbmFwc2hvdDtcbiAgICB0aGlzLmlzUHJldmlldyA9IGlzUHJldmlldztcbiAgICB0aGlzLndpbGxSZW5kZXIgPSB3aWxsUmVuZGVyO1xuICAgIHRoaXMucmVuZGVyRWxlbWVudCA9IHRoaXMuY29uc3RydWN0b3IucmVuZGVyRWxlbWVudDtcbiAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiAodGhpcy5yZXNvbHZpbmdGdW5jdGlvbnMgPSB7IHJlc29sdmUsIHJlamVjdCB9KSk7XG4gIH1cblxuICBnZXQgc2hvdWxkUmVuZGVyKCkge1xuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBnZXQgc2hvdWxkQXV0b2ZvY3VzKCkge1xuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBnZXQgcmVsb2FkUmVhc29uKCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgcHJlcGFyZVRvUmVuZGVyKCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIC8vIEFic3RyYWN0IG1ldGhvZFxuICB9XG5cbiAgZmluaXNoUmVuZGVyaW5nKCkge1xuICAgIGlmICh0aGlzLnJlc29sdmluZ0Z1bmN0aW9ucykge1xuICAgICAgdGhpcy5yZXNvbHZpbmdGdW5jdGlvbnMucmVzb2x2ZSgpO1xuICAgICAgZGVsZXRlIHRoaXMucmVzb2x2aW5nRnVuY3Rpb25zO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHByZXNlcnZpbmdQZXJtYW5lbnRFbGVtZW50cyhjYWxsYmFjaykge1xuICAgIGF3YWl0IEJhcmRvLnByZXNlcnZpbmdQZXJtYW5lbnRFbGVtZW50cyh0aGlzLCB0aGlzLnBlcm1hbmVudEVsZW1lbnRNYXAsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIGZvY3VzRmlyc3RBdXRvZm9jdXNhYmxlRWxlbWVudCgpIHtcbiAgICBpZiAodGhpcy5zaG91bGRBdXRvZm9jdXMpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmNvbm5lY3RlZFNuYXBzaG90LmZpcnN0QXV0b2ZvY3VzYWJsZUVsZW1lbnQ7XG4gICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICBlbGVtZW50LmZvY3VzKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gQmFyZG8gZGVsZWdhdGVcblxuICBlbnRlcmluZ0JhcmRvKGN1cnJlbnRQZXJtYW5lbnRFbGVtZW50KSB7XG4gICAgaWYgKHRoaXMuI2FjdGl2ZUVsZW1lbnQpIHJldHVyblxuXG4gICAgaWYgKGN1cnJlbnRQZXJtYW5lbnRFbGVtZW50LmNvbnRhaW5zKHRoaXMuY3VycmVudFNuYXBzaG90LmFjdGl2ZUVsZW1lbnQpKSB7XG4gICAgICB0aGlzLiNhY3RpdmVFbGVtZW50ID0gdGhpcy5jdXJyZW50U25hcHNob3QuYWN0aXZlRWxlbWVudDtcbiAgICB9XG4gIH1cblxuICBsZWF2aW5nQmFyZG8oY3VycmVudFBlcm1hbmVudEVsZW1lbnQpIHtcbiAgICBpZiAoY3VycmVudFBlcm1hbmVudEVsZW1lbnQuY29udGFpbnModGhpcy4jYWN0aXZlRWxlbWVudCkgJiYgdGhpcy4jYWN0aXZlRWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICB0aGlzLiNhY3RpdmVFbGVtZW50LmZvY3VzKCk7XG5cbiAgICAgIHRoaXMuI2FjdGl2ZUVsZW1lbnQgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGdldCBjb25uZWN0ZWRTbmFwc2hvdCgpIHtcbiAgICByZXR1cm4gdGhpcy5uZXdTbmFwc2hvdC5pc0Nvbm5lY3RlZCA/IHRoaXMubmV3U25hcHNob3QgOiB0aGlzLmN1cnJlbnRTbmFwc2hvdFxuICB9XG5cbiAgZ2V0IGN1cnJlbnRFbGVtZW50KCkge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRTbmFwc2hvdC5lbGVtZW50XG4gIH1cblxuICBnZXQgbmV3RWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5uZXdTbmFwc2hvdC5lbGVtZW50XG4gIH1cblxuICBnZXQgcGVybWFuZW50RWxlbWVudE1hcCgpIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50U25hcHNob3QuZ2V0UGVybWFuZW50RWxlbWVudE1hcEZvclNuYXBzaG90KHRoaXMubmV3U25hcHNob3QpXG4gIH1cblxuICBnZXQgcmVuZGVyTWV0aG9kKCkge1xuICAgIHJldHVybiBcInJlcGxhY2VcIlxuICB9XG59XG5cbmNsYXNzIEZyYW1lUmVuZGVyZXIgZXh0ZW5kcyBSZW5kZXJlciB7XG4gIHN0YXRpYyByZW5kZXJFbGVtZW50KGN1cnJlbnRFbGVtZW50LCBuZXdFbGVtZW50KSB7XG4gICAgY29uc3QgZGVzdGluYXRpb25SYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgZGVzdGluYXRpb25SYW5nZS5zZWxlY3ROb2RlQ29udGVudHMoY3VycmVudEVsZW1lbnQpO1xuICAgIGRlc3RpbmF0aW9uUmFuZ2UuZGVsZXRlQ29udGVudHMoKTtcblxuICAgIGNvbnN0IGZyYW1lRWxlbWVudCA9IG5ld0VsZW1lbnQ7XG4gICAgY29uc3Qgc291cmNlUmFuZ2UgPSBmcmFtZUVsZW1lbnQub3duZXJEb2N1bWVudD8uY3JlYXRlUmFuZ2UoKTtcbiAgICBpZiAoc291cmNlUmFuZ2UpIHtcbiAgICAgIHNvdXJjZVJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyhmcmFtZUVsZW1lbnQpO1xuICAgICAgY3VycmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoc291cmNlUmFuZ2UuZXh0cmFjdENvbnRlbnRzKCkpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGRlbGVnYXRlLCBjdXJyZW50U25hcHNob3QsIG5ld1NuYXBzaG90LCByZW5kZXJFbGVtZW50LCBpc1ByZXZpZXcsIHdpbGxSZW5kZXIgPSB0cnVlKSB7XG4gICAgc3VwZXIoY3VycmVudFNuYXBzaG90LCBuZXdTbmFwc2hvdCwgcmVuZGVyRWxlbWVudCwgaXNQcmV2aWV3LCB3aWxsUmVuZGVyKTtcbiAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gIH1cblxuICBnZXQgc2hvdWxkUmVuZGVyKCkge1xuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyByZW5kZXIoKSB7XG4gICAgYXdhaXQgbmV4dFJlcGFpbnQoKTtcbiAgICB0aGlzLnByZXNlcnZpbmdQZXJtYW5lbnRFbGVtZW50cygoKSA9PiB7XG4gICAgICB0aGlzLmxvYWRGcmFtZUVsZW1lbnQoKTtcbiAgICB9KTtcbiAgICB0aGlzLnNjcm9sbEZyYW1lSW50b1ZpZXcoKTtcbiAgICBhd2FpdCBuZXh0UmVwYWludCgpO1xuICAgIHRoaXMuZm9jdXNGaXJzdEF1dG9mb2N1c2FibGVFbGVtZW50KCk7XG4gICAgYXdhaXQgbmV4dFJlcGFpbnQoKTtcbiAgICB0aGlzLmFjdGl2YXRlU2NyaXB0RWxlbWVudHMoKTtcbiAgfVxuXG4gIGxvYWRGcmFtZUVsZW1lbnQoKSB7XG4gICAgdGhpcy5kZWxlZ2F0ZS53aWxsUmVuZGVyRnJhbWUodGhpcy5jdXJyZW50RWxlbWVudCwgdGhpcy5uZXdFbGVtZW50KTtcbiAgICB0aGlzLnJlbmRlckVsZW1lbnQodGhpcy5jdXJyZW50RWxlbWVudCwgdGhpcy5uZXdFbGVtZW50KTtcbiAgfVxuXG4gIHNjcm9sbEZyYW1lSW50b1ZpZXcoKSB7XG4gICAgaWYgKHRoaXMuY3VycmVudEVsZW1lbnQuYXV0b3Njcm9sbCB8fCB0aGlzLm5ld0VsZW1lbnQuYXV0b3Njcm9sbCkge1xuICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuY3VycmVudEVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICBjb25zdCBibG9jayA9IHJlYWRTY3JvbGxMb2dpY2FsUG9zaXRpb24odGhpcy5jdXJyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWF1dG9zY3JvbGwtYmxvY2tcIiksIFwiZW5kXCIpO1xuICAgICAgY29uc3QgYmVoYXZpb3IgPSByZWFkU2Nyb2xsQmVoYXZpb3IodGhpcy5jdXJyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWF1dG9zY3JvbGwtYmVoYXZpb3JcIiksIFwiYXV0b1wiKTtcblxuICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgZWxlbWVudC5zY3JvbGxJbnRvVmlldyh7IGJsb2NrLCBiZWhhdmlvciB9KTtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBhY3RpdmF0ZVNjcmlwdEVsZW1lbnRzKCkge1xuICAgIGZvciAoY29uc3QgaW5lcnRTY3JpcHRFbGVtZW50IG9mIHRoaXMubmV3U2NyaXB0RWxlbWVudHMpIHtcbiAgICAgIGNvbnN0IGFjdGl2YXRlZFNjcmlwdEVsZW1lbnQgPSBhY3RpdmF0ZVNjcmlwdEVsZW1lbnQoaW5lcnRTY3JpcHRFbGVtZW50KTtcbiAgICAgIGluZXJ0U2NyaXB0RWxlbWVudC5yZXBsYWNlV2l0aChhY3RpdmF0ZWRTY3JpcHRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBnZXQgbmV3U2NyaXB0RWxlbWVudHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcInNjcmlwdFwiKVxuICB9XG59XG5cbmZ1bmN0aW9uIHJlYWRTY3JvbGxMb2dpY2FsUG9zaXRpb24odmFsdWUsIGRlZmF1bHRWYWx1ZSkge1xuICBpZiAodmFsdWUgPT0gXCJlbmRcIiB8fCB2YWx1ZSA9PSBcInN0YXJ0XCIgfHwgdmFsdWUgPT0gXCJjZW50ZXJcIiB8fCB2YWx1ZSA9PSBcIm5lYXJlc3RcIikge1xuICAgIHJldHVybiB2YWx1ZVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBkZWZhdWx0VmFsdWVcbiAgfVxufVxuXG5mdW5jdGlvbiByZWFkU2Nyb2xsQmVoYXZpb3IodmFsdWUsIGRlZmF1bHRWYWx1ZSkge1xuICBpZiAodmFsdWUgPT0gXCJhdXRvXCIgfHwgdmFsdWUgPT0gXCJzbW9vdGhcIikge1xuICAgIHJldHVybiB2YWx1ZVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBkZWZhdWx0VmFsdWVcbiAgfVxufVxuXG4vKipcbiAqIEB0eXBlZGVmIHtvYmplY3R9IENvbmZpZ0hlYWRcbiAqXG4gKiBAcHJvcGVydHkgeydtZXJnZScgfCAnYXBwZW5kJyB8ICdtb3JwaCcgfCAnbm9uZSd9IFtzdHlsZV1cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2Jsb2NrXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbaWdub3JlXVxuICogQHByb3BlcnR5IHtmdW5jdGlvbihFbGVtZW50KTogYm9vbGVhbn0gW3Nob3VsZFByZXNlcnZlXVxuICogQHByb3BlcnR5IHtmdW5jdGlvbihFbGVtZW50KTogYm9vbGVhbn0gW3Nob3VsZFJlQXBwZW5kXVxuICogQHByb3BlcnR5IHtmdW5jdGlvbihFbGVtZW50KTogYm9vbGVhbn0gW3Nob3VsZFJlbW92ZV1cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oRWxlbWVudCwge2FkZGVkOiBOb2RlW10sIGtlcHQ6IEVsZW1lbnRbXSwgcmVtb3ZlZDogRWxlbWVudFtdfSk6IHZvaWR9IFthZnRlckhlYWRNb3JwaGVkXVxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge29iamVjdH0gQ29uZmlnQ2FsbGJhY2tzXG4gKlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihOb2RlKTogYm9vbGVhbn0gW2JlZm9yZU5vZGVBZGRlZF1cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oTm9kZSk6IHZvaWR9IFthZnRlck5vZGVBZGRlZF1cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oRWxlbWVudCwgTm9kZSk6IGJvb2xlYW59IFtiZWZvcmVOb2RlTW9ycGhlZF1cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oRWxlbWVudCwgTm9kZSk6IHZvaWR9IFthZnRlck5vZGVNb3JwaGVkXVxuICogQHByb3BlcnR5IHtmdW5jdGlvbihFbGVtZW50KTogYm9vbGVhbn0gW2JlZm9yZU5vZGVSZW1vdmVkXVxuICogQHByb3BlcnR5IHtmdW5jdGlvbihFbGVtZW50KTogdm9pZH0gW2FmdGVyTm9kZVJlbW92ZWRdXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKHN0cmluZywgRWxlbWVudCwgXCJ1cGRhdGVcIiB8IFwicmVtb3ZlXCIpOiBib29sZWFufSBbYmVmb3JlQXR0cmlidXRlVXBkYXRlZF1cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtvYmplY3R9IENvbmZpZ1xuICpcbiAqIEBwcm9wZXJ0eSB7J291dGVySFRNTCcgfCAnaW5uZXJIVE1MJ30gW21vcnBoU3R5bGVdXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtpZ25vcmVBY3RpdmVdXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtpZ25vcmVBY3RpdmVWYWx1ZV1cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Jlc3RvcmVGb2N1c11cbiAqIEBwcm9wZXJ0eSB7Q29uZmlnQ2FsbGJhY2tzfSBbY2FsbGJhY2tzXVxuICogQHByb3BlcnR5IHtDb25maWdIZWFkfSBbaGVhZF1cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbn0gTm9PcFxuICpcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge29iamVjdH0gQ29uZmlnSGVhZEludGVybmFsXG4gKlxuICogQHByb3BlcnR5IHsnbWVyZ2UnIHwgJ2FwcGVuZCcgfCAnbW9ycGgnIHwgJ25vbmUnfSBzdHlsZVxuICogQHByb3BlcnR5IHtib29sZWFufSBbYmxvY2tdXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtpZ25vcmVdXG4gKiBAcHJvcGVydHkgeyhmdW5jdGlvbihFbGVtZW50KTogYm9vbGVhbikgfCBOb09wfSBzaG91bGRQcmVzZXJ2ZVxuICogQHByb3BlcnR5IHsoZnVuY3Rpb24oRWxlbWVudCk6IGJvb2xlYW4pIHwgTm9PcH0gc2hvdWxkUmVBcHBlbmRcbiAqIEBwcm9wZXJ0eSB7KGZ1bmN0aW9uKEVsZW1lbnQpOiBib29sZWFuKSB8IE5vT3B9IHNob3VsZFJlbW92ZVxuICogQHByb3BlcnR5IHsoZnVuY3Rpb24oRWxlbWVudCwge2FkZGVkOiBOb2RlW10sIGtlcHQ6IEVsZW1lbnRbXSwgcmVtb3ZlZDogRWxlbWVudFtdfSk6IHZvaWQpIHwgTm9PcH0gYWZ0ZXJIZWFkTW9ycGhlZFxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge29iamVjdH0gQ29uZmlnQ2FsbGJhY2tzSW50ZXJuYWxcbiAqXG4gKiBAcHJvcGVydHkgeyhmdW5jdGlvbihOb2RlKTogYm9vbGVhbikgfCBOb09wfSBiZWZvcmVOb2RlQWRkZWRcbiAqIEBwcm9wZXJ0eSB7KGZ1bmN0aW9uKE5vZGUpOiB2b2lkKSB8IE5vT3B9IGFmdGVyTm9kZUFkZGVkXG4gKiBAcHJvcGVydHkgeyhmdW5jdGlvbihOb2RlLCBOb2RlKTogYm9vbGVhbikgfCBOb09wfSBiZWZvcmVOb2RlTW9ycGhlZFxuICogQHByb3BlcnR5IHsoZnVuY3Rpb24oTm9kZSwgTm9kZSk6IHZvaWQpIHwgTm9PcH0gYWZ0ZXJOb2RlTW9ycGhlZFxuICogQHByb3BlcnR5IHsoZnVuY3Rpb24oTm9kZSk6IGJvb2xlYW4pIHwgTm9PcH0gYmVmb3JlTm9kZVJlbW92ZWRcbiAqIEBwcm9wZXJ0eSB7KGZ1bmN0aW9uKE5vZGUpOiB2b2lkKSB8IE5vT3B9IGFmdGVyTm9kZVJlbW92ZWRcbiAqIEBwcm9wZXJ0eSB7KGZ1bmN0aW9uKHN0cmluZywgRWxlbWVudCwgXCJ1cGRhdGVcIiB8IFwicmVtb3ZlXCIpOiBib29sZWFuKSB8IE5vT3B9IGJlZm9yZUF0dHJpYnV0ZVVwZGF0ZWRcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtvYmplY3R9IENvbmZpZ0ludGVybmFsXG4gKlxuICogQHByb3BlcnR5IHsnb3V0ZXJIVE1MJyB8ICdpbm5lckhUTUwnfSBtb3JwaFN0eWxlXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtpZ25vcmVBY3RpdmVdXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtpZ25vcmVBY3RpdmVWYWx1ZV1cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Jlc3RvcmVGb2N1c11cbiAqIEBwcm9wZXJ0eSB7Q29uZmlnQ2FsbGJhY2tzSW50ZXJuYWx9IGNhbGxiYWNrc1xuICogQHByb3BlcnR5IHtDb25maWdIZWFkSW50ZXJuYWx9IGhlYWRcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IElkU2V0c1xuICogQHByb3BlcnR5IHtTZXQ8c3RyaW5nPn0gcGVyc2lzdGVudElkc1xuICogQHByb3BlcnR5IHtNYXA8Tm9kZSwgU2V0PHN0cmluZz4+fSBpZE1hcFxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge0Z1bmN0aW9ufSBNb3JwaFxuICpcbiAqIEBwYXJhbSB7RWxlbWVudCB8IERvY3VtZW50fSBvbGROb2RlXG4gKiBAcGFyYW0ge0VsZW1lbnQgfCBOb2RlIHwgSFRNTENvbGxlY3Rpb24gfCBOb2RlW10gfCBzdHJpbmcgfCBudWxsfSBuZXdDb250ZW50XG4gKiBAcGFyYW0ge0NvbmZpZ30gW2NvbmZpZ11cbiAqIEByZXR1cm5zIHt1bmRlZmluZWQgfCBOb2RlW119XG4gKi9cblxuLy8gYmFzZSBJSUZFIHRvIGRlZmluZSBpZGlvbW9ycGhcbi8qKlxuICpcbiAqIEB0eXBlIHt7ZGVmYXVsdHM6IENvbmZpZ0ludGVybmFsLCBtb3JwaDogTW9ycGh9fVxuICovXG52YXIgSWRpb21vcnBoID0gKGZ1bmN0aW9uICgpIHtcblxuICAvKipcbiAgICogQHR5cGVkZWYge29iamVjdH0gTW9ycGhDb250ZXh0XG4gICAqXG4gICAqIEBwcm9wZXJ0eSB7RWxlbWVudH0gdGFyZ2V0XG4gICAqIEBwcm9wZXJ0eSB7RWxlbWVudH0gbmV3Q29udGVudFxuICAgKiBAcHJvcGVydHkge0NvbmZpZ0ludGVybmFsfSBjb25maWdcbiAgICogQHByb3BlcnR5IHtDb25maWdJbnRlcm5hbFsnbW9ycGhTdHlsZSddfSBtb3JwaFN0eWxlXG4gICAqIEBwcm9wZXJ0eSB7Q29uZmlnSW50ZXJuYWxbJ2lnbm9yZUFjdGl2ZSddfSBpZ25vcmVBY3RpdmVcbiAgICogQHByb3BlcnR5IHtDb25maWdJbnRlcm5hbFsnaWdub3JlQWN0aXZlVmFsdWUnXX0gaWdub3JlQWN0aXZlVmFsdWVcbiAgICogQHByb3BlcnR5IHtDb25maWdJbnRlcm5hbFsncmVzdG9yZUZvY3VzJ119IHJlc3RvcmVGb2N1c1xuICAgKiBAcHJvcGVydHkge01hcDxOb2RlLCBTZXQ8c3RyaW5nPj59IGlkTWFwXG4gICAqIEBwcm9wZXJ0eSB7U2V0PHN0cmluZz59IHBlcnNpc3RlbnRJZHNcbiAgICogQHByb3BlcnR5IHtDb25maWdJbnRlcm5hbFsnY2FsbGJhY2tzJ119IGNhbGxiYWNrc1xuICAgKiBAcHJvcGVydHkge0NvbmZpZ0ludGVybmFsWydoZWFkJ119IGhlYWRcbiAgICogQHByb3BlcnR5IHtIVE1MRGl2RWxlbWVudH0gcGFudHJ5XG4gICAqL1xuXG4gIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gQU5EIE5PVyBJVCBCRUdJTlMuLi5cbiAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIGNvbnN0IG5vT3AgPSAoKSA9PiB7fTtcbiAgLyoqXG4gICAqIERlZmF1bHQgY29uZmlndXJhdGlvbiB2YWx1ZXMsIHVwZGF0YWJsZSBieSB1c2VycyBub3dcbiAgICogQHR5cGUge0NvbmZpZ0ludGVybmFsfVxuICAgKi9cbiAgY29uc3QgZGVmYXVsdHMgPSB7XG4gICAgbW9ycGhTdHlsZTogXCJvdXRlckhUTUxcIixcbiAgICBjYWxsYmFja3M6IHtcbiAgICAgIGJlZm9yZU5vZGVBZGRlZDogbm9PcCxcbiAgICAgIGFmdGVyTm9kZUFkZGVkOiBub09wLFxuICAgICAgYmVmb3JlTm9kZU1vcnBoZWQ6IG5vT3AsXG4gICAgICBhZnRlck5vZGVNb3JwaGVkOiBub09wLFxuICAgICAgYmVmb3JlTm9kZVJlbW92ZWQ6IG5vT3AsXG4gICAgICBhZnRlck5vZGVSZW1vdmVkOiBub09wLFxuICAgICAgYmVmb3JlQXR0cmlidXRlVXBkYXRlZDogbm9PcCxcbiAgICB9LFxuICAgIGhlYWQ6IHtcbiAgICAgIHN0eWxlOiBcIm1lcmdlXCIsXG4gICAgICBzaG91bGRQcmVzZXJ2ZTogKGVsdCkgPT4gZWx0LmdldEF0dHJpYnV0ZShcImltLXByZXNlcnZlXCIpID09PSBcInRydWVcIixcbiAgICAgIHNob3VsZFJlQXBwZW5kOiAoZWx0KSA9PiBlbHQuZ2V0QXR0cmlidXRlKFwiaW0tcmUtYXBwZW5kXCIpID09PSBcInRydWVcIixcbiAgICAgIHNob3VsZFJlbW92ZTogbm9PcCxcbiAgICAgIGFmdGVySGVhZE1vcnBoZWQ6IG5vT3AsXG4gICAgfSxcbiAgICByZXN0b3JlRm9jdXM6IHRydWUsXG4gIH07XG5cbiAgLyoqXG4gICAqIENvcmUgaWRpb21vcnBoIGZ1bmN0aW9uIGZvciBtb3JwaGluZyBvbmUgRE9NIHRyZWUgdG8gYW5vdGhlclxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnQgfCBEb2N1bWVudH0gb2xkTm9kZVxuICAgKiBAcGFyYW0ge0VsZW1lbnQgfCBOb2RlIHwgSFRNTENvbGxlY3Rpb24gfCBOb2RlW10gfCBzdHJpbmcgfCBudWxsfSBuZXdDb250ZW50XG4gICAqIEBwYXJhbSB7Q29uZmlnfSBbY29uZmlnXVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxOb2RlW10+IHwgTm9kZVtdfVxuICAgKi9cbiAgZnVuY3Rpb24gbW9ycGgob2xkTm9kZSwgbmV3Q29udGVudCwgY29uZmlnID0ge30pIHtcbiAgICBvbGROb2RlID0gbm9ybWFsaXplRWxlbWVudChvbGROb2RlKTtcbiAgICBjb25zdCBuZXdOb2RlID0gbm9ybWFsaXplUGFyZW50KG5ld0NvbnRlbnQpO1xuICAgIGNvbnN0IGN0eCA9IGNyZWF0ZU1vcnBoQ29udGV4dChvbGROb2RlLCBuZXdOb2RlLCBjb25maWcpO1xuXG4gICAgY29uc3QgbW9ycGhlZE5vZGVzID0gc2F2ZUFuZFJlc3RvcmVGb2N1cyhjdHgsICgpID0+IHtcbiAgICAgIHJldHVybiB3aXRoSGVhZEJsb2NraW5nKFxuICAgICAgICBjdHgsXG4gICAgICAgIG9sZE5vZGUsXG4gICAgICAgIG5ld05vZGUsXG4gICAgICAgIC8qKiBAcGFyYW0ge01vcnBoQ29udGV4dH0gY3R4ICovIChjdHgpID0+IHtcbiAgICAgICAgICBpZiAoY3R4Lm1vcnBoU3R5bGUgPT09IFwiaW5uZXJIVE1MXCIpIHtcbiAgICAgICAgICAgIG1vcnBoQ2hpbGRyZW4oY3R4LCBvbGROb2RlLCBuZXdOb2RlKTtcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKG9sZE5vZGUuY2hpbGROb2Rlcyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBtb3JwaE91dGVySFRNTChjdHgsIG9sZE5vZGUsIG5ld05vZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBjdHgucGFudHJ5LnJlbW92ZSgpO1xuICAgIHJldHVybiBtb3JwaGVkTm9kZXM7XG4gIH1cblxuICAvKipcbiAgICogTW9ycGgganVzdCB0aGUgb3V0ZXJIVE1MIG9mIHRoZSBvbGROb2RlIHRvIHRoZSBuZXdDb250ZW50XG4gICAqIFdlIGhhdmUgdG8gYmUgY2FyZWZ1bCBiZWNhdXNlIHRoZSBvbGROb2RlIGNvdWxkIGhhdmUgc2libGluZ3Mgd2hpY2ggbmVlZCB0byBiZSB1bnRvdWNoZWRcbiAgICogQHBhcmFtIHtNb3JwaENvbnRleHR9IGN0eFxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IG9sZE5vZGVcbiAgICogQHBhcmFtIHtFbGVtZW50fSBuZXdOb2RlXG4gICAqIEByZXR1cm5zIHtOb2RlW119XG4gICAqL1xuICBmdW5jdGlvbiBtb3JwaE91dGVySFRNTChjdHgsIG9sZE5vZGUsIG5ld05vZGUpIHtcbiAgICBjb25zdCBvbGRQYXJlbnQgPSBub3JtYWxpemVQYXJlbnQob2xkTm9kZSk7XG5cbiAgICAvLyBiYXNpcyBmb3IgY2FsdWxhdGluZyB3aGljaCBub2RlcyB3ZXJlIG1vcnBoZWRcbiAgICAvLyBzaW5jZSB0aGVyZSBtYXkgYmUgdW5tb3JwaGVkIHNpYmxpbmcgbm9kZXNcbiAgICBsZXQgY2hpbGROb2RlcyA9IEFycmF5LmZyb20ob2xkUGFyZW50LmNoaWxkTm9kZXMpO1xuICAgIGNvbnN0IGluZGV4ID0gY2hpbGROb2Rlcy5pbmRleE9mKG9sZE5vZGUpO1xuICAgIC8vIGhvdyBtYW55IGVsZW1lbnRzIGFyZSB0byB0aGUgcmlnaHQgb2YgdGhlIG9sZE5vZGVcbiAgICBjb25zdCByaWdodE1hcmdpbiA9IGNoaWxkTm9kZXMubGVuZ3RoIC0gKGluZGV4ICsgMSk7XG5cbiAgICBtb3JwaENoaWxkcmVuKFxuICAgICAgY3R4LFxuICAgICAgb2xkUGFyZW50LFxuICAgICAgbmV3Tm9kZSxcbiAgICAgIC8vIHRoZXNlIHR3byBvcHRpb25hbCBwYXJhbXMgYXJlIHRoZSBzZWNyZXQgc2F1Y2VcbiAgICAgIG9sZE5vZGUsIC8vIHN0YXJ0IHBvaW50IGZvciBpdGVyYXRpb25cbiAgICAgIG9sZE5vZGUubmV4dFNpYmxpbmcsIC8vIGVuZCBwb2ludCBmb3IgaXRlcmF0aW9uXG4gICAgKTtcblxuICAgIC8vIHJldHVybiBqdXN0IHRoZSBtb3JwaGVkIG5vZGVzXG4gICAgY2hpbGROb2RlcyA9IEFycmF5LmZyb20ob2xkUGFyZW50LmNoaWxkTm9kZXMpO1xuICAgIHJldHVybiBjaGlsZE5vZGVzLnNsaWNlKGluZGV4LCBjaGlsZE5vZGVzLmxlbmd0aCAtIHJpZ2h0TWFyZ2luKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge01vcnBoQ29udGV4dH0gY3R4XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPE5vZGVbXT4gfCBOb2RlW119XG4gICAqL1xuICBmdW5jdGlvbiBzYXZlQW5kUmVzdG9yZUZvY3VzKGN0eCwgZm4pIHtcbiAgICBpZiAoIWN0eC5jb25maWcucmVzdG9yZUZvY3VzKSByZXR1cm4gZm4oKTtcbiAgICBsZXQgYWN0aXZlRWxlbWVudCA9XG4gICAgICAvKiogQHR5cGUge0hUTUxJbnB1dEVsZW1lbnR8SFRNTFRleHRBcmVhRWxlbWVudHxudWxsfSAqLyAoXG4gICAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnRcbiAgICAgICk7XG5cbiAgICAvLyBkb24ndCBib3RoZXIgaWYgdGhlIGFjdGl2ZSBlbGVtZW50IGlzIG5vdCBhbiBpbnB1dCBvciB0ZXh0YXJlYVxuICAgIGlmIChcbiAgICAgICEoXG4gICAgICAgIGFjdGl2ZUVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50IHx8XG4gICAgICAgIGFjdGl2ZUVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MVGV4dEFyZWFFbGVtZW50XG4gICAgICApXG4gICAgKSB7XG4gICAgICByZXR1cm4gZm4oKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGlkOiBhY3RpdmVFbGVtZW50SWQsIHNlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmQgfSA9IGFjdGl2ZUVsZW1lbnQ7XG5cbiAgICBjb25zdCByZXN1bHRzID0gZm4oKTtcblxuICAgIGlmIChhY3RpdmVFbGVtZW50SWQgJiYgYWN0aXZlRWxlbWVudElkICE9PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50Py5pZCkge1xuICAgICAgYWN0aXZlRWxlbWVudCA9IGN0eC50YXJnZXQucXVlcnlTZWxlY3RvcihgIyR7YWN0aXZlRWxlbWVudElkfWApO1xuICAgICAgYWN0aXZlRWxlbWVudD8uZm9jdXMoKTtcbiAgICB9XG4gICAgaWYgKGFjdGl2ZUVsZW1lbnQgJiYgIWFjdGl2ZUVsZW1lbnQuc2VsZWN0aW9uRW5kICYmIHNlbGVjdGlvbkVuZCkge1xuICAgICAgYWN0aXZlRWxlbWVudC5zZXRTZWxlY3Rpb25SYW5nZShzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuXG4gIGNvbnN0IG1vcnBoQ2hpbGRyZW4gPSAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIFRoaXMgaXMgdGhlIGNvcmUgYWxnb3JpdGhtIGZvciBtYXRjaGluZyB1cCBjaGlsZHJlbi4gIFRoZSBpZGVhIGlzIHRvIHVzZSBpZCBzZXRzIHRvIHRyeSB0byBtYXRjaCB1cFxuICAgICAqIG5vZGVzIGFzIGZhaXRoZnVsbHkgYXMgcG9zc2libGUuICBXZSBncmVlZGlseSBtYXRjaCwgd2hpY2ggYWxsb3dzIHVzIHRvIGtlZXAgdGhlIGFsZ29yaXRobSBmYXN0LCBidXRcbiAgICAgKiBieSB1c2luZyBpZCBzZXRzLCB3ZSBhcmUgYWJsZSB0byBiZXR0ZXIgbWF0Y2ggdXAgd2l0aCBjb250ZW50IGRlZXBlciBpbiB0aGUgRE9NLlxuICAgICAqXG4gICAgICogQmFzaWMgYWxnb3JpdGhtOlxuICAgICAqIC0gZm9yIGVhY2ggbm9kZSBpbiB0aGUgbmV3IGNvbnRlbnQ6XG4gICAgICogICAtIHNlYXJjaCBzZWxmIGFuZCBzaWJsaW5ncyBmb3IgYW4gaWQgc2V0IG1hdGNoLCBmYWxsaW5nIGJhY2sgdG8gYSBzb2Z0IG1hdGNoXG4gICAgICogICAtIGlmIG1hdGNoIGZvdW5kXG4gICAgICogICAgIC0gcmVtb3ZlIGFueSBub2RlcyB1cCB0byB0aGUgbWF0Y2g6XG4gICAgICogICAgICAgLSBwYW50cnkgcGVyc2lzdGVudCBub2Rlc1xuICAgICAqICAgICAgIC0gZGVsZXRlIHRoZSByZXN0XG4gICAgICogICAgIC0gbW9ycGggdGhlIG1hdGNoXG4gICAgICogICAtIGVsc2lmIG5vIG1hdGNoIGZvdW5kLCBhbmQgbm9kZSBpcyBwZXJzaXN0ZW50XG4gICAgICogICAgIC0gZmluZCBpdHMgbWF0Y2ggYnkgcXVlcnlpbmcgdGhlIG9sZCByb290IChmdXR1cmUpIGFuZCBwYW50cnkgKHBhc3QpXG4gICAgICogICAgIC0gbW92ZSBpdCBhbmQgaXRzIGNoaWxkcmVuIGhlcmVcbiAgICAgKiAgICAgLSBtb3JwaCBpdFxuICAgICAqICAgLSBlbHNlXG4gICAgICogICAgIC0gY3JlYXRlIGEgbmV3IG5vZGUgZnJvbSBzY3JhdGNoIGFzIGEgbGFzdCByZXN1bHRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7TW9ycGhDb250ZXh0fSBjdHggdGhlIG1lcmdlIGNvbnRleHRcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG9sZFBhcmVudCB0aGUgb2xkIGNvbnRlbnQgdGhhdCB3ZSBhcmUgbWVyZ2luZyB0aGUgbmV3IGNvbnRlbnQgaW50b1xuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gbmV3UGFyZW50IHRoZSBwYXJlbnQgZWxlbWVudCBvZiB0aGUgbmV3IGNvbnRlbnRcbiAgICAgKiBAcGFyYW0ge05vZGV8bnVsbH0gW2luc2VydGlvblBvaW50XSB0aGUgcG9pbnQgaW4gdGhlIERPTSB3ZSBzdGFydCBtb3JwaGluZyBhdCAoZGVmYXVsdHMgdG8gZmlyc3QgY2hpbGQpXG4gICAgICogQHBhcmFtIHtOb2RlfG51bGx9IFtlbmRQb2ludF0gdGhlIHBvaW50IGluIHRoZSBET00gd2Ugc3RvcCBtb3JwaGluZyBhdCAoZGVmYXVsdHMgdG8gYWZ0ZXIgbGFzdCBjaGlsZClcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtb3JwaENoaWxkcmVuKFxuICAgICAgY3R4LFxuICAgICAgb2xkUGFyZW50LFxuICAgICAgbmV3UGFyZW50LFxuICAgICAgaW5zZXJ0aW9uUG9pbnQgPSBudWxsLFxuICAgICAgZW5kUG9pbnQgPSBudWxsLFxuICAgICkge1xuICAgICAgLy8gbm9ybWFsaXplXG4gICAgICBpZiAoXG4gICAgICAgIG9sZFBhcmVudCBpbnN0YW5jZW9mIEhUTUxUZW1wbGF0ZUVsZW1lbnQgJiZcbiAgICAgICAgbmV3UGFyZW50IGluc3RhbmNlb2YgSFRNTFRlbXBsYXRlRWxlbWVudFxuICAgICAgKSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmUgd2UgY2FuIHByZXRlbmQgdGhlIERvY3VtZW50RnJhZ21lbnQgaXMgYW4gRWxlbWVudFxuICAgICAgICBvbGRQYXJlbnQgPSBvbGRQYXJlbnQuY29udGVudDtcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBkaXR0b1xuICAgICAgICBuZXdQYXJlbnQgPSBuZXdQYXJlbnQuY29udGVudDtcbiAgICAgIH1cbiAgICAgIGluc2VydGlvblBvaW50IHx8PSBvbGRQYXJlbnQuZmlyc3RDaGlsZDtcblxuICAgICAgLy8gcnVuIHRocm91Z2ggYWxsIHRoZSBuZXcgY29udGVudFxuICAgICAgZm9yIChjb25zdCBuZXdDaGlsZCBvZiBuZXdQYXJlbnQuY2hpbGROb2Rlcykge1xuICAgICAgICAvLyBvbmNlIHdlIHJlYWNoIHRoZSBlbmQgb2YgdGhlIG9sZCBwYXJlbnQgY29udGVudCBza2lwIHRvIHRoZSBlbmQgYW5kIGluc2VydCB0aGUgcmVzdFxuICAgICAgICBpZiAoaW5zZXJ0aW9uUG9pbnQgJiYgaW5zZXJ0aW9uUG9pbnQgIT0gZW5kUG9pbnQpIHtcbiAgICAgICAgICBjb25zdCBiZXN0TWF0Y2ggPSBmaW5kQmVzdE1hdGNoKFxuICAgICAgICAgICAgY3R4LFxuICAgICAgICAgICAgbmV3Q2hpbGQsXG4gICAgICAgICAgICBpbnNlcnRpb25Qb2ludCxcbiAgICAgICAgICAgIGVuZFBvaW50LFxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKGJlc3RNYXRjaCkge1xuICAgICAgICAgICAgLy8gaWYgdGhlIG5vZGUgdG8gbW9ycGggaXMgbm90IGF0IHRoZSBpbnNlcnRpb24gcG9pbnQgdGhlbiByZW1vdmUvbW92ZSB1cCB0byBpdFxuICAgICAgICAgICAgaWYgKGJlc3RNYXRjaCAhPT0gaW5zZXJ0aW9uUG9pbnQpIHtcbiAgICAgICAgICAgICAgcmVtb3ZlTm9kZXNCZXR3ZWVuKGN0eCwgaW5zZXJ0aW9uUG9pbnQsIGJlc3RNYXRjaCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtb3JwaE5vZGUoYmVzdE1hdGNoLCBuZXdDaGlsZCwgY3R4KTtcbiAgICAgICAgICAgIGluc2VydGlvblBvaW50ID0gYmVzdE1hdGNoLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgdGhlIG1hdGNoaW5nIG5vZGUgaXMgZWxzZXdoZXJlIGluIHRoZSBvcmlnaW5hbCBjb250ZW50XG4gICAgICAgIGlmIChuZXdDaGlsZCBpbnN0YW5jZW9mIEVsZW1lbnQgJiYgY3R4LnBlcnNpc3RlbnRJZHMuaGFzKG5ld0NoaWxkLmlkKSkge1xuICAgICAgICAgIC8vIG1vdmUgaXQgYW5kIGFsbCBpdHMgY2hpbGRyZW4gaGVyZSBhbmQgbW9ycGhcbiAgICAgICAgICBjb25zdCBtb3ZlZENoaWxkID0gbW92ZUJlZm9yZUJ5SWQoXG4gICAgICAgICAgICBvbGRQYXJlbnQsXG4gICAgICAgICAgICBuZXdDaGlsZC5pZCxcbiAgICAgICAgICAgIGluc2VydGlvblBvaW50LFxuICAgICAgICAgICAgY3R4LFxuICAgICAgICAgICk7XG4gICAgICAgICAgbW9ycGhOb2RlKG1vdmVkQ2hpbGQsIG5ld0NoaWxkLCBjdHgpO1xuICAgICAgICAgIGluc2VydGlvblBvaW50ID0gbW92ZWRDaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGxhc3QgcmVzb3J0OiBpbnNlcnQgdGhlIG5ldyBub2RlIGZyb20gc2NyYXRjaFxuICAgICAgICBjb25zdCBpbnNlcnRlZE5vZGUgPSBjcmVhdGVOb2RlKFxuICAgICAgICAgIG9sZFBhcmVudCxcbiAgICAgICAgICBuZXdDaGlsZCxcbiAgICAgICAgICBpbnNlcnRpb25Qb2ludCxcbiAgICAgICAgICBjdHgsXG4gICAgICAgICk7XG4gICAgICAgIC8vIGNvdWxkIGJlIG51bGwgaWYgYmVmb3JlTm9kZUFkZGVkIHByZXZlbnRlZCBpbnNlcnRpb25cbiAgICAgICAgaWYgKGluc2VydGVkTm9kZSkge1xuICAgICAgICAgIGluc2VydGlvblBvaW50ID0gaW5zZXJ0ZWROb2RlLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIHJlbW92ZSBhbnkgcmVtYWluaW5nIG9sZCBub2RlcyB0aGF0IGRpZG4ndCBtYXRjaCB1cCB3aXRoIG5ldyBjb250ZW50XG4gICAgICB3aGlsZSAoaW5zZXJ0aW9uUG9pbnQgJiYgaW5zZXJ0aW9uUG9pbnQgIT0gZW5kUG9pbnQpIHtcbiAgICAgICAgY29uc3QgdGVtcE5vZGUgPSBpbnNlcnRpb25Qb2ludDtcbiAgICAgICAgaW5zZXJ0aW9uUG9pbnQgPSBpbnNlcnRpb25Qb2ludC5uZXh0U2libGluZztcbiAgICAgICAgcmVtb3ZlTm9kZShjdHgsIHRlbXBOb2RlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIHBlcmZvcm1zIHRoZSBhY3Rpb24gb2YgaW5zZXJ0aW5nIGEgbmV3IG5vZGUgd2hpbGUgaGFuZGxpbmcgc2l0dWF0aW9ucyB3aGVyZSB0aGUgbm9kZSBjb250YWluc1xuICAgICAqIGVsZW1lbnRzIHdpdGggcGVyc2lzdGVudCBpZHMgYW5kIHBvc3NpYmxlIHN0YXRlIGluZm8gd2UgY2FuIHN0aWxsIHByZXNlcnZlIGJ5IG1vdmluZyBpbiBhbmQgdGhlbiBtb3JwaGluZ1xuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBvbGRQYXJlbnRcbiAgICAgKiBAcGFyYW0ge05vZGV9IG5ld0NoaWxkXG4gICAgICogQHBhcmFtIHtOb2RlfG51bGx9IGluc2VydGlvblBvaW50XG4gICAgICogQHBhcmFtIHtNb3JwaENvbnRleHR9IGN0eFxuICAgICAqIEByZXR1cm5zIHtOb2RlfG51bGx9XG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlTm9kZShvbGRQYXJlbnQsIG5ld0NoaWxkLCBpbnNlcnRpb25Qb2ludCwgY3R4KSB7XG4gICAgICBpZiAoY3R4LmNhbGxiYWNrcy5iZWZvcmVOb2RlQWRkZWQobmV3Q2hpbGQpID09PSBmYWxzZSkgcmV0dXJuIG51bGw7XG4gICAgICBpZiAoY3R4LmlkTWFwLmhhcyhuZXdDaGlsZCkpIHtcbiAgICAgICAgLy8gbm9kZSBoYXMgY2hpbGRyZW4gd2l0aCBpZHMgd2l0aCBwb3NzaWJsZSBzdGF0ZSBzbyBjcmVhdGUgYSBkdW1teSBlbHQgb2Ygc2FtZSB0eXBlIGFuZCBhcHBseSBmdWxsIG1vcnBoIGFsZ29yaXRobVxuICAgICAgICBjb25zdCBuZXdFbXB0eUNoaWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAvKiogQHR5cGUge0VsZW1lbnR9ICovIChuZXdDaGlsZCkudGFnTmFtZSxcbiAgICAgICAgKTtcbiAgICAgICAgb2xkUGFyZW50Lmluc2VydEJlZm9yZShuZXdFbXB0eUNoaWxkLCBpbnNlcnRpb25Qb2ludCk7XG4gICAgICAgIG1vcnBoTm9kZShuZXdFbXB0eUNoaWxkLCBuZXdDaGlsZCwgY3R4KTtcbiAgICAgICAgY3R4LmNhbGxiYWNrcy5hZnRlck5vZGVBZGRlZChuZXdFbXB0eUNoaWxkKTtcbiAgICAgICAgcmV0dXJuIG5ld0VtcHR5Q2hpbGQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBvcHRpbWlzYXRpb246IG5vIGlkIHN0YXRlIHRvIHByZXNlcnZlIHNvIHdlIGNhbiBqdXN0IGluc2VydCBhIGNsb25lIG9mIHRoZSBuZXdDaGlsZCBhbmQgaXRzIGRlc2NlbmRhbnRzXG4gICAgICAgIGNvbnN0IG5ld0Nsb25lZENoaWxkID0gZG9jdW1lbnQuaW1wb3J0Tm9kZShuZXdDaGlsZCwgdHJ1ZSk7IC8vIGltcG9ydE5vZGUgdG8gbm90IG11dGF0ZSBuZXdQYXJlbnRcbiAgICAgICAgb2xkUGFyZW50Lmluc2VydEJlZm9yZShuZXdDbG9uZWRDaGlsZCwgaW5zZXJ0aW9uUG9pbnQpO1xuICAgICAgICBjdHguY2FsbGJhY2tzLmFmdGVyTm9kZUFkZGVkKG5ld0Nsb25lZENoaWxkKTtcbiAgICAgICAgcmV0dXJuIG5ld0Nsb25lZENoaWxkO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyBNYXRjaGluZyBGdW5jdGlvbnNcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgY29uc3QgZmluZEJlc3RNYXRjaCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAvKipcbiAgICAgICAqIFNjYW5zIGZvcndhcmQgZnJvbSB0aGUgc3RhcnRQb2ludCB0byB0aGUgZW5kUG9pbnQgbG9va2luZyBmb3IgYSBtYXRjaFxuICAgICAgICogZm9yIHRoZSBub2RlLiBJdCBsb29rcyBmb3IgYW4gaWQgc2V0IG1hdGNoIGZpcnN0LCB0aGVuIGEgc29mdCBtYXRjaC5cbiAgICAgICAqIFdlIGFib3J0IHNvZnRtYXRjaGluZyBpZiB3ZSBmaW5kIHR3byBmdXR1cmUgc29mdCBtYXRjaGVzLCB0byByZWR1Y2UgY2h1cm4uXG4gICAgICAgKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAgICAgICAqIEBwYXJhbSB7TW9ycGhDb250ZXh0fSBjdHhcbiAgICAgICAqIEBwYXJhbSB7Tm9kZSB8IG51bGx9IHN0YXJ0UG9pbnRcbiAgICAgICAqIEBwYXJhbSB7Tm9kZSB8IG51bGx9IGVuZFBvaW50XG4gICAgICAgKiBAcmV0dXJucyB7Tm9kZSB8IG51bGx9XG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIGZpbmRCZXN0TWF0Y2goY3R4LCBub2RlLCBzdGFydFBvaW50LCBlbmRQb2ludCkge1xuICAgICAgICBsZXQgc29mdE1hdGNoID0gbnVsbDtcbiAgICAgICAgbGV0IG5leHRTaWJsaW5nID0gbm9kZS5uZXh0U2libGluZztcbiAgICAgICAgbGV0IHNpYmxpbmdTb2Z0TWF0Y2hDb3VudCA9IDA7XG5cbiAgICAgICAgbGV0IGN1cnNvciA9IHN0YXJ0UG9pbnQ7XG4gICAgICAgIHdoaWxlIChjdXJzb3IgJiYgY3Vyc29yICE9IGVuZFBvaW50KSB7XG4gICAgICAgICAgLy8gc29mdCBtYXRjaGluZyBpcyBhIHByZXJlcXVpc2l0ZSBmb3IgaWQgc2V0IG1hdGNoaW5nXG4gICAgICAgICAgaWYgKGlzU29mdE1hdGNoKGN1cnNvciwgbm9kZSkpIHtcbiAgICAgICAgICAgIGlmIChpc0lkU2V0TWF0Y2goY3R4LCBjdXJzb3IsIG5vZGUpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBjdXJzb3I7IC8vIGZvdW5kIGFuIGlkIHNldCBtYXRjaCwgd2UncmUgZG9uZSFcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gd2UgaGF2ZW4ndCB5ZXQgc2F2ZWQgYSBzb2Z0IG1hdGNoIGZhbGxiYWNrXG4gICAgICAgICAgICBpZiAoc29mdE1hdGNoID09PSBudWxsKSB7XG4gICAgICAgICAgICAgIC8vIHRoZSBjdXJyZW50IHNvZnQgbWF0Y2ggd2lsbCBoYXJkIG1hdGNoIHNvbWV0aGluZyBlbHNlIGluIHRoZSBmdXR1cmUsIGxlYXZlIGl0XG4gICAgICAgICAgICAgIGlmICghY3R4LmlkTWFwLmhhcyhjdXJzb3IpKSB7XG4gICAgICAgICAgICAgICAgLy8gc2F2ZSB0aGlzIGFzIHRoZSBmYWxsYmFjayBpZiB3ZSBnZXQgdGhyb3VnaCB0aGUgbG9vcCB3aXRob3V0IGZpbmRpbmcgYSBoYXJkIG1hdGNoXG4gICAgICAgICAgICAgICAgc29mdE1hdGNoID0gY3Vyc29yO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHNvZnRNYXRjaCA9PT0gbnVsbCAmJlxuICAgICAgICAgICAgbmV4dFNpYmxpbmcgJiZcbiAgICAgICAgICAgIGlzU29mdE1hdGNoKGN1cnNvciwgbmV4dFNpYmxpbmcpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBUaGUgbmV4dCBuZXcgbm9kZSBoYXMgYSBzb2Z0IG1hdGNoIHdpdGggdGhpcyBub2RlLCBzb1xuICAgICAgICAgICAgLy8gaW5jcmVtZW50IHRoZSBjb3VudCBvZiBmdXR1cmUgc29mdCBtYXRjaGVzXG4gICAgICAgICAgICBzaWJsaW5nU29mdE1hdGNoQ291bnQrKztcbiAgICAgICAgICAgIG5leHRTaWJsaW5nID0gbmV4dFNpYmxpbmcubmV4dFNpYmxpbmc7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSB0d28gZnV0dXJlIHNvZnQgbWF0Y2hlcywgYmxvY2sgc29mdCBtYXRjaGluZyBmb3IgdGhpcyBub2RlIHRvIGFsbG93XG4gICAgICAgICAgICAvLyBmdXR1cmUgc2libGluZ3MgdG8gc29mdCBtYXRjaC4gVGhpcyBpcyB0byByZWR1Y2UgY2h1cm4gaW4gdGhlIERPTSB3aGVuIGFuIGVsZW1lbnRcbiAgICAgICAgICAgIC8vIGlzIHByZXBlbmRlZC5cbiAgICAgICAgICAgIGlmIChzaWJsaW5nU29mdE1hdGNoQ291bnQgPj0gMikge1xuICAgICAgICAgICAgICBzb2Z0TWF0Y2ggPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gaWYgdGhlIGN1cnJlbnQgbm9kZSBjb250YWlucyBhY3RpdmUgZWxlbWVudCwgc3RvcCBsb29raW5nIGZvciBiZXR0ZXIgZnV0dXJlIG1hdGNoZXMsXG4gICAgICAgICAgLy8gYmVjYXVzZSBpZiBvbmUgaXMgZm91bmQsIHRoaXMgbm9kZSB3aWxsIGJlIG1vdmVkIHRvIHRoZSBwYW50cnksIHJlcGFyZW50aW5nIGl0IGFuZCB0aHVzIGxvc2luZyBmb2N1c1xuICAgICAgICAgIGlmIChjdXJzb3IuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpIGJyZWFrO1xuXG4gICAgICAgICAgY3Vyc29yID0gY3Vyc29yLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNvZnRNYXRjaCB8fCBudWxsO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge01vcnBoQ29udGV4dH0gY3R4XG4gICAgICAgKiBAcGFyYW0ge05vZGV9IG9sZE5vZGVcbiAgICAgICAqIEBwYXJhbSB7Tm9kZX0gbmV3Tm9kZVxuICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIGlzSWRTZXRNYXRjaChjdHgsIG9sZE5vZGUsIG5ld05vZGUpIHtcbiAgICAgICAgbGV0IG9sZFNldCA9IGN0eC5pZE1hcC5nZXQob2xkTm9kZSk7XG4gICAgICAgIGxldCBuZXdTZXQgPSBjdHguaWRNYXAuZ2V0KG5ld05vZGUpO1xuXG4gICAgICAgIGlmICghbmV3U2V0IHx8ICFvbGRTZXQpIHJldHVybiBmYWxzZTtcblxuICAgICAgICBmb3IgKGNvbnN0IGlkIG9mIG9sZFNldCkge1xuICAgICAgICAgIC8vIGEgcG90ZW50aWFsIG1hdGNoIGlzIGFuIGlkIGluIHRoZSBuZXcgYW5kIG9sZCBub2RlcyB0aGF0XG4gICAgICAgICAgLy8gaGFzIG5vdCBhbHJlYWR5IGJlZW4gbWVyZ2VkIGludG8gdGhlIERPTVxuICAgICAgICAgIC8vIEJ1dCB0aGUgbmV3Tm9kZSBjb250ZW50IHdlIGNhbGwgdGhpcyBvbiBoYXMgbm90IGJlZW5cbiAgICAgICAgICAvLyBtZXJnZWQgeWV0IGFuZCB3ZSBkb24ndCBhbGxvdyBkdXBsaWNhdGUgSURzIHNvIGl0IGlzIHNpbXBsZVxuICAgICAgICAgIGlmIChuZXdTZXQuaGFzKGlkKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtOb2RlfSBvbGROb2RlXG4gICAgICAgKiBAcGFyYW0ge05vZGV9IG5ld05vZGVcbiAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBpc1NvZnRNYXRjaChvbGROb2RlLCBuZXdOb2RlKSB7XG4gICAgICAgIC8vIG9rIHRvIGNhc3Q6IGlmIG9uZSBpcyBub3QgZWxlbWVudCwgYGlkYCBhbmQgYHRhZ05hbWVgIHdpbGwgYmUgdW5kZWZpbmVkIGFuZCB3ZSdsbCBqdXN0IGNvbXBhcmUgdGhhdC5cbiAgICAgICAgY29uc3Qgb2xkRWx0ID0gLyoqIEB0eXBlIHtFbGVtZW50fSAqLyAob2xkTm9kZSk7XG4gICAgICAgIGNvbnN0IG5ld0VsdCA9IC8qKiBAdHlwZSB7RWxlbWVudH0gKi8gKG5ld05vZGUpO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgb2xkRWx0Lm5vZGVUeXBlID09PSBuZXdFbHQubm9kZVR5cGUgJiZcbiAgICAgICAgICBvbGRFbHQudGFnTmFtZSA9PT0gbmV3RWx0LnRhZ05hbWUgJiZcbiAgICAgICAgICAvLyBJZiBvbGRFbHQgaGFzIGFuIGBpZGAgd2l0aCBwb3NzaWJsZSBzdGF0ZSBhbmQgaXQgZG9lc24ndCBtYXRjaCBuZXdFbHQuaWQgdGhlbiBhdm9pZCBtb3JwaGluZy5cbiAgICAgICAgICAvLyBXZSdsbCBzdGlsbCBtYXRjaCBhbiBhbm9ueW1vdXMgbm9kZSB3aXRoIGFuIElEZWQgbmV3RWx0LCB0aG91Z2gsIGJlY2F1c2UgaWYgaXQgZ290IHRoaXMgZmFyLFxuICAgICAgICAgIC8vIGl0cyBub3QgcGVyc2lzdGVudCwgYW5kIG5ldyBub2RlcyBjYW4ndCBoYXZlIGFueSBoaWRkZW4gc3RhdGUuXG4gICAgICAgICAgKCFvbGRFbHQuaWQgfHwgb2xkRWx0LmlkID09PSBuZXdFbHQuaWQpXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmaW5kQmVzdE1hdGNoO1xuICAgIH0pKCk7XG5cbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gRE9NIE1hbmlwdWxhdGlvbiBGdW5jdGlvbnNcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHJpZCBvZiBhbiB1bndhbnRlZCBET00gbm9kZTsgc3RyYXRlZ3kgZGVwZW5kcyBvbiBuYXR1cmUgb2YgaXRzIHJldXNlOlxuICAgICAqIC0gUGVyc2lzdGVudCBub2RlcyB3aWxsIGJlIG1vdmVkIHRvIHRoZSBwYW50cnkgZm9yIGxhdGVyIHJldXNlXG4gICAgICogLSBPdGhlciBub2RlcyB3aWxsIGhhdmUgdGhlaXIgaG9va3MgY2FsbGVkLCBhbmQgdGhlbiBhcmUgcmVtb3ZlZFxuICAgICAqIEBwYXJhbSB7TW9ycGhDb250ZXh0fSBjdHhcbiAgICAgKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW1vdmVOb2RlKGN0eCwgbm9kZSkge1xuICAgICAgLy8gYXJlIHdlIGdvaW5nIHRvIGlkIHNldCBtYXRjaCB0aGlzIGxhdGVyP1xuICAgICAgaWYgKGN0eC5pZE1hcC5oYXMobm9kZSkpIHtcbiAgICAgICAgLy8gc2tpcCBjYWxsYmFja3MgYW5kIG1vdmUgdG8gcGFudHJ5XG4gICAgICAgIG1vdmVCZWZvcmUoY3R4LnBhbnRyeSwgbm9kZSwgbnVsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyByZW1vdmUgZm9yIHJlYWxzaWVzXG4gICAgICAgIGlmIChjdHguY2FsbGJhY2tzLmJlZm9yZU5vZGVSZW1vdmVkKG5vZGUpID09PSBmYWxzZSkgcmV0dXJuO1xuICAgICAgICBub2RlLnBhcmVudE5vZGU/LnJlbW92ZUNoaWxkKG5vZGUpO1xuICAgICAgICBjdHguY2FsbGJhY2tzLmFmdGVyTm9kZVJlbW92ZWQobm9kZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIG5vZGVzIGJldHdlZW4gdGhlIHN0YXJ0IGFuZCBlbmQgbm9kZXNcbiAgICAgKiBAcGFyYW0ge01vcnBoQ29udGV4dH0gY3R4XG4gICAgICogQHBhcmFtIHtOb2RlfSBzdGFydEluY2x1c2l2ZVxuICAgICAqIEBwYXJhbSB7Tm9kZX0gZW5kRXhjbHVzaXZlXG4gICAgICogQHJldHVybnMge05vZGV8bnVsbH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW1vdmVOb2Rlc0JldHdlZW4oY3R4LCBzdGFydEluY2x1c2l2ZSwgZW5kRXhjbHVzaXZlKSB7XG4gICAgICAvKiogQHR5cGUge05vZGUgfCBudWxsfSAqL1xuICAgICAgbGV0IGN1cnNvciA9IHN0YXJ0SW5jbHVzaXZlO1xuICAgICAgLy8gcmVtb3ZlIG5vZGVzIHVudGlsIHRoZSBlbmRFeGNsdXNpdmUgbm9kZVxuICAgICAgd2hpbGUgKGN1cnNvciAmJiBjdXJzb3IgIT09IGVuZEV4Y2x1c2l2ZSkge1xuICAgICAgICBsZXQgdGVtcE5vZGUgPSAvKiogQHR5cGUge05vZGV9ICovIChjdXJzb3IpO1xuICAgICAgICBjdXJzb3IgPSBjdXJzb3IubmV4dFNpYmxpbmc7XG4gICAgICAgIHJlbW92ZU5vZGUoY3R4LCB0ZW1wTm9kZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY3Vyc29yO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlYXJjaCBmb3IgYW4gZWxlbWVudCBieSBpZCB3aXRoaW4gdGhlIGRvY3VtZW50IGFuZCBwYW50cnksIGFuZCBtb3ZlIGl0IHVzaW5nIG1vdmVCZWZvcmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IHBhcmVudE5vZGUgLSBUaGUgcGFyZW50IG5vZGUgdG8gd2hpY2ggdGhlIGVsZW1lbnQgd2lsbCBiZSBtb3ZlZC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBUaGUgSUQgb2YgdGhlIGVsZW1lbnQgdG8gYmUgbW92ZWQuXG4gICAgICogQHBhcmFtIHtOb2RlIHwgbnVsbH0gYWZ0ZXIgLSBUaGUgcmVmZXJlbmNlIG5vZGUgdG8gaW5zZXJ0IHRoZSBlbGVtZW50IGJlZm9yZS5cbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIGBudWxsYCwgdGhlIGVsZW1lbnQgaXMgYXBwZW5kZWQgYXMgdGhlIGxhc3QgY2hpbGQuXG4gICAgICogQHBhcmFtIHtNb3JwaENvbnRleHR9IGN0eFxuICAgICAqIEByZXR1cm5zIHtFbGVtZW50fSBUaGUgZm91bmQgZWxlbWVudFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1vdmVCZWZvcmVCeUlkKHBhcmVudE5vZGUsIGlkLCBhZnRlciwgY3R4KSB7XG4gICAgICBjb25zdCB0YXJnZXQgPVxuICAgICAgICAvKiogQHR5cGUge0VsZW1lbnR9IC0gd2lsbCBhbHdheXMgYmUgZm91bmQgKi9cbiAgICAgICAgKFxuICAgICAgICAgIGN0eC50YXJnZXQucXVlcnlTZWxlY3RvcihgIyR7aWR9YCkgfHxcbiAgICAgICAgICAgIGN0eC5wYW50cnkucXVlcnlTZWxlY3RvcihgIyR7aWR9YClcbiAgICAgICAgKTtcbiAgICAgIHJlbW92ZUVsZW1lbnRGcm9tQW5jZXN0b3JzSWRNYXBzKHRhcmdldCwgY3R4KTtcbiAgICAgIG1vdmVCZWZvcmUocGFyZW50Tm9kZSwgdGFyZ2V0LCBhZnRlcik7XG4gICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYW4gZWxlbWVudCBmcm9tIGl0cyBhbmNlc3RvcnMnIGlkIG1hcHMuIFRoaXMgaXMgbmVlZGVkIHdoZW4gYW4gZWxlbWVudCBpcyBtb3ZlZCBmcm9tIHRoZVxuICAgICAqIFwiZnV0dXJlXCIgdmlhIGBtb3ZlQmVmb3JlSWRgLiBPdGhlcndpc2UsIGl0cyBlcnN0d2hpbGUgYW5jZXN0b3JzIGNvdWxkIGJlIG1pc3Rha2VubHkgbW92ZWQgdG8gdGhlXG4gICAgICogcGFudHJ5IHJhdGhlciB0aGFuIGJlaW5nIGRlbGV0ZWQsIHByZXZlbnRpbmcgdGhlaXIgcmVtb3ZhbCBob29rcyBmcm9tIGJlaW5nIGNhbGxlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCAtIGVsZW1lbnQgdG8gcmVtb3ZlIGZyb20gaXRzIGFuY2VzdG9ycycgaWQgbWFwc1xuICAgICAqIEBwYXJhbSB7TW9ycGhDb250ZXh0fSBjdHhcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW1vdmVFbGVtZW50RnJvbUFuY2VzdG9yc0lkTWFwcyhlbGVtZW50LCBjdHgpIHtcbiAgICAgIGNvbnN0IGlkID0gZWxlbWVudC5pZDtcbiAgICAgIC8qKiBAdHMtaWdub3JlIC0gc2FmZSB0byBsb29wIGluIHRoaXMgd2F5ICoqL1xuICAgICAgd2hpbGUgKChlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlKSkge1xuICAgICAgICBsZXQgaWRTZXQgPSBjdHguaWRNYXAuZ2V0KGVsZW1lbnQpO1xuICAgICAgICBpZiAoaWRTZXQpIHtcbiAgICAgICAgICBpZFNldC5kZWxldGUoaWQpO1xuICAgICAgICAgIGlmICghaWRTZXQuc2l6ZSkge1xuICAgICAgICAgICAgY3R4LmlkTWFwLmRlbGV0ZShlbGVtZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb3ZlcyBhbiBlbGVtZW50IGJlZm9yZSBhbm90aGVyIGVsZW1lbnQgd2l0aGluIHRoZSBzYW1lIHBhcmVudC5cbiAgICAgKiBVc2VzIHRoZSBwcm9wb3NlZCBgbW92ZUJlZm9yZWAgQVBJIGlmIGF2YWlsYWJsZSAoYW5kIHdvcmtpbmcpLCBvdGhlcndpc2UgZmFsbHMgYmFjayB0byBgaW5zZXJ0QmVmb3JlYC5cbiAgICAgKiBUaGlzIGlzIGVzc2VudGlhbHkgYSBmb3J3YXJkLWNvbXBhdCB3cmFwcGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBwYXJlbnROb2RlIC0gVGhlIHBhcmVudCBub2RlIGNvbnRhaW5pbmcgdGhlIGFmdGVyIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHtOb2RlfSBlbGVtZW50IC0gVGhlIGVsZW1lbnQgdG8gYmUgbW92ZWQuXG4gICAgICogQHBhcmFtIHtOb2RlIHwgbnVsbH0gYWZ0ZXIgLSBUaGUgcmVmZXJlbmNlIG5vZGUgdG8gaW5zZXJ0IGBlbGVtZW50YCBiZWZvcmUuXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBgbnVsbGAsIGBlbGVtZW50YCBpcyBhcHBlbmRlZCBhcyB0aGUgbGFzdCBjaGlsZC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtb3ZlQmVmb3JlKHBhcmVudE5vZGUsIGVsZW1lbnQsIGFmdGVyKSB7XG4gICAgICAvLyBAdHMtaWdub3JlIC0gdXNlIHByb3Bvc2VkIG1vdmVCZWZvcmUgZmVhdHVyZVxuICAgICAgaWYgKHBhcmVudE5vZGUubW92ZUJlZm9yZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIEB0cy1pZ25vcmUgLSB1c2UgcHJvcG9zZWQgbW92ZUJlZm9yZSBmZWF0dXJlXG4gICAgICAgICAgcGFyZW50Tm9kZS5tb3ZlQmVmb3JlKGVsZW1lbnQsIGFmdGVyKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIGZhbGwgYmFjayB0byBpbnNlcnRCZWZvcmUgYXMgc29tZSBicm93c2VycyBtYXkgZmFpbCBvbiBtb3ZlQmVmb3JlIHdoZW4gdHJ5aW5nIHRvIG1vdmUgRG9tIGRpc2Nvbm5lY3RlZCBub2RlcyB0byBwYW50cnlcbiAgICAgICAgICBwYXJlbnROb2RlLmluc2VydEJlZm9yZShlbGVtZW50LCBhZnRlcik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsZW1lbnQsIGFmdGVyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbW9ycGhDaGlsZHJlbjtcbiAgfSkoKTtcblxuICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFNpbmdsZSBOb2RlIE1vcnBoaW5nIENvZGVcbiAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBjb25zdCBtb3JwaE5vZGUgPSAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gb2xkTm9kZSByb290IG5vZGUgdG8gbWVyZ2UgY29udGVudCBpbnRvXG4gICAgICogQHBhcmFtIHtOb2RlfSBuZXdDb250ZW50IG5ldyBjb250ZW50IHRvIG1lcmdlXG4gICAgICogQHBhcmFtIHtNb3JwaENvbnRleHR9IGN0eCB0aGUgbWVyZ2UgY29udGV4dFxuICAgICAqIEByZXR1cm5zIHtOb2RlIHwgbnVsbH0gdGhlIGVsZW1lbnQgdGhhdCBlbmRlZCB1cCBpbiB0aGUgRE9NXG4gICAgICovXG4gICAgZnVuY3Rpb24gbW9ycGhOb2RlKG9sZE5vZGUsIG5ld0NvbnRlbnQsIGN0eCkge1xuICAgICAgaWYgKGN0eC5pZ25vcmVBY3RpdmUgJiYgb2xkTm9kZSA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkge1xuICAgICAgICAvLyBkb24ndCBtb3JwaCBmb2N1c2VkIGVsZW1lbnRcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmIChjdHguY2FsbGJhY2tzLmJlZm9yZU5vZGVNb3JwaGVkKG9sZE5vZGUsIG5ld0NvbnRlbnQpID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gb2xkTm9kZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9sZE5vZGUgaW5zdGFuY2VvZiBIVE1MSGVhZEVsZW1lbnQgJiYgY3R4LmhlYWQuaWdub3JlKSA7IGVsc2UgaWYgKFxuICAgICAgICBvbGROb2RlIGluc3RhbmNlb2YgSFRNTEhlYWRFbGVtZW50ICYmXG4gICAgICAgIGN0eC5oZWFkLnN0eWxlICE9PSBcIm1vcnBoXCJcbiAgICAgICkge1xuICAgICAgICAvLyBvayB0byBjYXN0OiBpZiBuZXdDb250ZW50IHdhc24ndCBhbHNvIGEgPGhlYWQ+LCBpdCB3b3VsZCd2ZSBnb3QgY2F1Z2h0IGluIHRoZSBgIWlzU29mdE1hdGNoYCBicmFuY2ggYWJvdmVcbiAgICAgICAgaGFuZGxlSGVhZEVsZW1lbnQoXG4gICAgICAgICAgb2xkTm9kZSxcbiAgICAgICAgICAvKiogQHR5cGUge0hUTUxIZWFkRWxlbWVudH0gKi8gKG5ld0NvbnRlbnQpLFxuICAgICAgICAgIGN0eCxcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1vcnBoQXR0cmlidXRlcyhvbGROb2RlLCBuZXdDb250ZW50LCBjdHgpO1xuICAgICAgICBpZiAoIWlnbm9yZVZhbHVlT2ZBY3RpdmVFbGVtZW50KG9sZE5vZGUsIGN0eCkpIHtcbiAgICAgICAgICAvLyBAdHMtaWdub3JlIG5ld0NvbnRlbnQgY2FuIGJlIGEgbm9kZSBoZXJlIGJlY2F1c2UgLmZpcnN0Q2hpbGQgd2lsbCBiZSBudWxsXG4gICAgICAgICAgbW9ycGhDaGlsZHJlbihjdHgsIG9sZE5vZGUsIG5ld0NvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjdHguY2FsbGJhY2tzLmFmdGVyTm9kZU1vcnBoZWQob2xkTm9kZSwgbmV3Q29udGVudCk7XG4gICAgICByZXR1cm4gb2xkTm9kZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzeW5jcyB0aGUgb2xkTm9kZSB0byB0aGUgbmV3Tm9kZSwgY29weWluZyBvdmVyIGFsbCBhdHRyaWJ1dGVzIGFuZFxuICAgICAqIGlubmVyIGVsZW1lbnQgc3RhdGUgZnJvbSB0aGUgbmV3Tm9kZSB0byB0aGUgb2xkTm9kZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtOb2RlfSBvbGROb2RlIHRoZSBub2RlIHRvIGNvcHkgYXR0cmlidXRlcyAmIHN0YXRlIHRvXG4gICAgICogQHBhcmFtIHtOb2RlfSBuZXdOb2RlIHRoZSBub2RlIHRvIGNvcHkgYXR0cmlidXRlcyAmIHN0YXRlIGZyb21cbiAgICAgKiBAcGFyYW0ge01vcnBoQ29udGV4dH0gY3R4IHRoZSBtZXJnZSBjb250ZXh0XG4gICAgICovXG4gICAgZnVuY3Rpb24gbW9ycGhBdHRyaWJ1dGVzKG9sZE5vZGUsIG5ld05vZGUsIGN0eCkge1xuICAgICAgbGV0IHR5cGUgPSBuZXdOb2RlLm5vZGVUeXBlO1xuXG4gICAgICAvLyBpZiBpcyBhbiBlbGVtZW50IHR5cGUsIHN5bmMgdGhlIGF0dHJpYnV0ZXMgZnJvbSB0aGVcbiAgICAgIC8vIG5ldyBub2RlIGludG8gdGhlIG5ldyBub2RlXG4gICAgICBpZiAodHlwZSA9PT0gMSAvKiBlbGVtZW50IHR5cGUgKi8pIHtcbiAgICAgICAgY29uc3Qgb2xkRWx0ID0gLyoqIEB0eXBlIHtFbGVtZW50fSAqLyAob2xkTm9kZSk7XG4gICAgICAgIGNvbnN0IG5ld0VsdCA9IC8qKiBAdHlwZSB7RWxlbWVudH0gKi8gKG5ld05vZGUpO1xuXG4gICAgICAgIGNvbnN0IG9sZEF0dHJpYnV0ZXMgPSBvbGRFbHQuYXR0cmlidXRlcztcbiAgICAgICAgY29uc3QgbmV3QXR0cmlidXRlcyA9IG5ld0VsdC5hdHRyaWJ1dGVzO1xuICAgICAgICBmb3IgKGNvbnN0IG5ld0F0dHJpYnV0ZSBvZiBuZXdBdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgaWYgKGlnbm9yZUF0dHJpYnV0ZShuZXdBdHRyaWJ1dGUubmFtZSwgb2xkRWx0LCBcInVwZGF0ZVwiLCBjdHgpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG9sZEVsdC5nZXRBdHRyaWJ1dGUobmV3QXR0cmlidXRlLm5hbWUpICE9PSBuZXdBdHRyaWJ1dGUudmFsdWUpIHtcbiAgICAgICAgICAgIG9sZEVsdC5zZXRBdHRyaWJ1dGUobmV3QXR0cmlidXRlLm5hbWUsIG5ld0F0dHJpYnV0ZS52YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGl0ZXJhdGUgYmFja3dhcmRzIHRvIGF2b2lkIHNraXBwaW5nIG92ZXIgaXRlbXMgd2hlbiBhIGRlbGV0ZSBvY2N1cnNcbiAgICAgICAgZm9yIChsZXQgaSA9IG9sZEF0dHJpYnV0ZXMubGVuZ3RoIC0gMTsgMCA8PSBpOyBpLS0pIHtcbiAgICAgICAgICBjb25zdCBvbGRBdHRyaWJ1dGUgPSBvbGRBdHRyaWJ1dGVzW2ldO1xuXG4gICAgICAgICAgLy8gdG9BdHRyaWJ1dGVzIGlzIGEgbGl2ZSBOYW1lZE5vZGVNYXAsIHNvIGl0ZXJhdGlvbittdXRhdGlvbiBpcyB1bnNhZmVcbiAgICAgICAgICAvLyBlLmcuIGN1c3RvbSBlbGVtZW50IGF0dHJpYnV0ZSBjYWxsYmFja3MgY2FuIHJlbW92ZSBvdGhlciBhdHRyaWJ1dGVzXG4gICAgICAgICAgaWYgKCFvbGRBdHRyaWJ1dGUpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgaWYgKCFuZXdFbHQuaGFzQXR0cmlidXRlKG9sZEF0dHJpYnV0ZS5uYW1lKSkge1xuICAgICAgICAgICAgaWYgKGlnbm9yZUF0dHJpYnV0ZShvbGRBdHRyaWJ1dGUubmFtZSwgb2xkRWx0LCBcInJlbW92ZVwiLCBjdHgpKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb2xkRWx0LnJlbW92ZUF0dHJpYnV0ZShvbGRBdHRyaWJ1dGUubmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpZ25vcmVWYWx1ZU9mQWN0aXZlRWxlbWVudChvbGRFbHQsIGN0eCkpIHtcbiAgICAgICAgICBzeW5jSW5wdXRWYWx1ZShvbGRFbHQsIG5ld0VsdCwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBzeW5jIHRleHQgbm9kZXNcbiAgICAgIGlmICh0eXBlID09PSA4IC8qIGNvbW1lbnQgKi8gfHwgdHlwZSA9PT0gMyAvKiB0ZXh0ICovKSB7XG4gICAgICAgIGlmIChvbGROb2RlLm5vZGVWYWx1ZSAhPT0gbmV3Tm9kZS5ub2RlVmFsdWUpIHtcbiAgICAgICAgICBvbGROb2RlLm5vZGVWYWx1ZSA9IG5ld05vZGUubm9kZVZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTkI6IG1hbnkgYm90aGFucyBkaWVkIHRvIGJyaW5nIHVzIGluZm9ybWF0aW9uOlxuICAgICAqXG4gICAgICogIGh0dHBzOi8vZ2l0aHViLmNvbS9wYXRyaWNrLXN0ZWVsZS1pZGVtL21vcnBoZG9tL2Jsb2IvbWFzdGVyL3NyYy9zcGVjaWFsRWxIYW5kbGVycy5qc1xuICAgICAqICBodHRwczovL2dpdGh1Yi5jb20vY2hvb2pzL25hbm9tb3JwaC9ibG9iL21hc3Rlci9saWIvbW9ycGguanNMMTEzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG9sZEVsZW1lbnQgdGhlIGVsZW1lbnQgdG8gc3luYyB0aGUgaW5wdXQgdmFsdWUgdG9cbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG5ld0VsZW1lbnQgdGhlIGVsZW1lbnQgdG8gc3luYyB0aGUgaW5wdXQgdmFsdWUgZnJvbVxuICAgICAqIEBwYXJhbSB7TW9ycGhDb250ZXh0fSBjdHggdGhlIG1lcmdlIGNvbnRleHRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzeW5jSW5wdXRWYWx1ZShvbGRFbGVtZW50LCBuZXdFbGVtZW50LCBjdHgpIHtcbiAgICAgIGlmIChcbiAgICAgICAgb2xkRWxlbWVudCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgJiZcbiAgICAgICAgbmV3RWxlbWVudCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgJiZcbiAgICAgICAgbmV3RWxlbWVudC50eXBlICE9PSBcImZpbGVcIlxuICAgICAgKSB7XG4gICAgICAgIGxldCBuZXdWYWx1ZSA9IG5ld0VsZW1lbnQudmFsdWU7XG4gICAgICAgIGxldCBvbGRWYWx1ZSA9IG9sZEVsZW1lbnQudmFsdWU7XG5cbiAgICAgICAgLy8gc3luYyBib29sZWFuIGF0dHJpYnV0ZXNcbiAgICAgICAgc3luY0Jvb2xlYW5BdHRyaWJ1dGUob2xkRWxlbWVudCwgbmV3RWxlbWVudCwgXCJjaGVja2VkXCIsIGN0eCk7XG4gICAgICAgIHN5bmNCb29sZWFuQXR0cmlidXRlKG9sZEVsZW1lbnQsIG5ld0VsZW1lbnQsIFwiZGlzYWJsZWRcIiwgY3R4KTtcblxuICAgICAgICBpZiAoIW5ld0VsZW1lbnQuaGFzQXR0cmlidXRlKFwidmFsdWVcIikpIHtcbiAgICAgICAgICBpZiAoIWlnbm9yZUF0dHJpYnV0ZShcInZhbHVlXCIsIG9sZEVsZW1lbnQsIFwicmVtb3ZlXCIsIGN0eCkpIHtcbiAgICAgICAgICAgIG9sZEVsZW1lbnQudmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgb2xkRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJ2YWx1ZVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAob2xkVmFsdWUgIT09IG5ld1ZhbHVlKSB7XG4gICAgICAgICAgaWYgKCFpZ25vcmVBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBvbGRFbGVtZW50LCBcInVwZGF0ZVwiLCBjdHgpKSB7XG4gICAgICAgICAgICBvbGRFbGVtZW50LnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIG5ld1ZhbHVlKTtcbiAgICAgICAgICAgIG9sZEVsZW1lbnQudmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gVE9ETzogUVVFU1RJT04oMWNnKTogdGhpcyB1c2VkIHRvIG9ubHkgY2hlY2sgYG5ld0VsZW1lbnRgIHVubGlrZSB0aGUgb3RoZXIgYnJhbmNoZXMgLS0gd2h5P1xuICAgICAgICAvLyBkaWQgSSBicmVhayBzb21ldGhpbmc/XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBvbGRFbGVtZW50IGluc3RhbmNlb2YgSFRNTE9wdGlvbkVsZW1lbnQgJiZcbiAgICAgICAgbmV3RWxlbWVudCBpbnN0YW5jZW9mIEhUTUxPcHRpb25FbGVtZW50XG4gICAgICApIHtcbiAgICAgICAgc3luY0Jvb2xlYW5BdHRyaWJ1dGUob2xkRWxlbWVudCwgbmV3RWxlbWVudCwgXCJzZWxlY3RlZFwiLCBjdHgpO1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgb2xkRWxlbWVudCBpbnN0YW5jZW9mIEhUTUxUZXh0QXJlYUVsZW1lbnQgJiZcbiAgICAgICAgbmV3RWxlbWVudCBpbnN0YW5jZW9mIEhUTUxUZXh0QXJlYUVsZW1lbnRcbiAgICAgICkge1xuICAgICAgICBsZXQgbmV3VmFsdWUgPSBuZXdFbGVtZW50LnZhbHVlO1xuICAgICAgICBsZXQgb2xkVmFsdWUgPSBvbGRFbGVtZW50LnZhbHVlO1xuICAgICAgICBpZiAoaWdub3JlQXR0cmlidXRlKFwidmFsdWVcIiwgb2xkRWxlbWVudCwgXCJ1cGRhdGVcIiwgY3R4KSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3VmFsdWUgIT09IG9sZFZhbHVlKSB7XG4gICAgICAgICAgb2xkRWxlbWVudC52YWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICBvbGRFbGVtZW50LmZpcnN0Q2hpbGQgJiZcbiAgICAgICAgICBvbGRFbGVtZW50LmZpcnN0Q2hpbGQubm9kZVZhbHVlICE9PSBuZXdWYWx1ZVxuICAgICAgICApIHtcbiAgICAgICAgICBvbGRFbGVtZW50LmZpcnN0Q2hpbGQubm9kZVZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG9sZEVsZW1lbnQgZWxlbWVudCB0byB3cml0ZSB0aGUgdmFsdWUgdG9cbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG5ld0VsZW1lbnQgZWxlbWVudCB0byByZWFkIHRoZSB2YWx1ZSBmcm9tXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZU5hbWUgdGhlIGF0dHJpYnV0ZSBuYW1lXG4gICAgICogQHBhcmFtIHtNb3JwaENvbnRleHR9IGN0eCB0aGUgbWVyZ2UgY29udGV4dFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHN5bmNCb29sZWFuQXR0cmlidXRlKG9sZEVsZW1lbnQsIG5ld0VsZW1lbnQsIGF0dHJpYnV0ZU5hbWUsIGN0eCkge1xuICAgICAgLy8gQHRzLWlnbm9yZSB0aGlzIGZ1bmN0aW9uIGlzIG9ubHkgdXNlZCBvbiBib29sZWFuIGF0dHJzIHRoYXQgYXJlIHJlZmxlY3RlZCBhcyBkb20gcHJvcGVydGllc1xuICAgICAgY29uc3QgbmV3TGl2ZVZhbHVlID0gbmV3RWxlbWVudFthdHRyaWJ1dGVOYW1lXSxcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBkaXR0b1xuICAgICAgICBvbGRMaXZlVmFsdWUgPSBvbGRFbGVtZW50W2F0dHJpYnV0ZU5hbWVdO1xuICAgICAgaWYgKG5ld0xpdmVWYWx1ZSAhPT0gb2xkTGl2ZVZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGlnbm9yZVVwZGF0ZSA9IGlnbm9yZUF0dHJpYnV0ZShcbiAgICAgICAgICBhdHRyaWJ1dGVOYW1lLFxuICAgICAgICAgIG9sZEVsZW1lbnQsXG4gICAgICAgICAgXCJ1cGRhdGVcIixcbiAgICAgICAgICBjdHgsXG4gICAgICAgICk7XG4gICAgICAgIGlmICghaWdub3JlVXBkYXRlKSB7XG4gICAgICAgICAgLy8gdXBkYXRlIGF0dHJpYnV0ZSdzIGFzc29jaWF0ZWQgRE9NIHByb3BlcnR5XG4gICAgICAgICAgLy8gQHRzLWlnbm9yZSB0aGlzIGZ1bmN0aW9uIGlzIG9ubHkgdXNlZCBvbiBib29sZWFuIGF0dHJzIHRoYXQgYXJlIHJlZmxlY3RlZCBhcyBkb20gcHJvcGVydGllc1xuICAgICAgICAgIG9sZEVsZW1lbnRbYXR0cmlidXRlTmFtZV0gPSBuZXdFbGVtZW50W2F0dHJpYnV0ZU5hbWVdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZXdMaXZlVmFsdWUpIHtcbiAgICAgICAgICBpZiAoIWlnbm9yZVVwZGF0ZSkge1xuICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9HbG9zc2FyeS9Cb29sZWFuL0hUTUxcbiAgICAgICAgICAgIC8vIHRoaXMgaXMgdGhlIGNvcnJlY3Qgd2F5IHRvIHNldCBhIGJvb2xlYW4gYXR0cmlidXRlIHRvIFwidHJ1ZVwiXG4gICAgICAgICAgICBvbGRFbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lLCBcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCFpZ25vcmVBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSwgb2xkRWxlbWVudCwgXCJyZW1vdmVcIiwgY3R4KSkge1xuICAgICAgICAgICAgb2xkRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGF0dHIgdGhlIGF0dHJpYnV0ZSB0byBiZSBtdXRhdGVkXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IHRoZSBlbGVtZW50IHRoYXQgaXMgZ29pbmcgdG8gYmUgdXBkYXRlZFxuICAgICAqIEBwYXJhbSB7XCJ1cGRhdGVcIiB8IFwicmVtb3ZlXCJ9IHVwZGF0ZVR5cGVcbiAgICAgKiBAcGFyYW0ge01vcnBoQ29udGV4dH0gY3R4IHRoZSBtZXJnZSBjb250ZXh0XG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgdGhlIGF0dHJpYnV0ZSBzaG91bGQgYmUgaWdub3JlZCwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaWdub3JlQXR0cmlidXRlKGF0dHIsIGVsZW1lbnQsIHVwZGF0ZVR5cGUsIGN0eCkge1xuICAgICAgaWYgKFxuICAgICAgICBhdHRyID09PSBcInZhbHVlXCIgJiZcbiAgICAgICAgY3R4Lmlnbm9yZUFjdGl2ZVZhbHVlICYmXG4gICAgICAgIGVsZW1lbnQgPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnRcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAoXG4gICAgICAgIGN0eC5jYWxsYmFja3MuYmVmb3JlQXR0cmlidXRlVXBkYXRlZChhdHRyLCBlbGVtZW50LCB1cGRhdGVUeXBlKSA9PT1cbiAgICAgICAgZmFsc2VcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtOb2RlfSBwb3NzaWJsZUFjdGl2ZUVsZW1lbnRcbiAgICAgKiBAcGFyYW0ge01vcnBoQ29udGV4dH0gY3R4XG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgZnVuY3Rpb24gaWdub3JlVmFsdWVPZkFjdGl2ZUVsZW1lbnQocG9zc2libGVBY3RpdmVFbGVtZW50LCBjdHgpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgICEhY3R4Lmlnbm9yZUFjdGl2ZVZhbHVlICYmXG4gICAgICAgIHBvc3NpYmxlQWN0aXZlRWxlbWVudCA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJlxuICAgICAgICBwb3NzaWJsZUFjdGl2ZUVsZW1lbnQgIT09IGRvY3VtZW50LmJvZHlcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1vcnBoTm9kZTtcbiAgfSkoKTtcblxuICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIEhlYWQgTWFuYWdlbWVudCBGdW5jdGlvbnNcbiAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvKipcbiAgICogQHBhcmFtIHtNb3JwaENvbnRleHR9IGN0eFxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IG9sZE5vZGVcbiAgICogQHBhcmFtIHtFbGVtZW50fSBuZXdOb2RlXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXG4gICAqIEByZXR1cm5zIHtOb2RlW10gfCBQcm9taXNlPE5vZGVbXT59XG4gICAqL1xuICBmdW5jdGlvbiB3aXRoSGVhZEJsb2NraW5nKGN0eCwgb2xkTm9kZSwgbmV3Tm9kZSwgY2FsbGJhY2spIHtcbiAgICBpZiAoY3R4LmhlYWQuYmxvY2spIHtcbiAgICAgIGNvbnN0IG9sZEhlYWQgPSBvbGROb2RlLnF1ZXJ5U2VsZWN0b3IoXCJoZWFkXCIpO1xuICAgICAgY29uc3QgbmV3SGVhZCA9IG5ld05vZGUucXVlcnlTZWxlY3RvcihcImhlYWRcIik7XG4gICAgICBpZiAob2xkSGVhZCAmJiBuZXdIZWFkKSB7XG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gaGFuZGxlSGVhZEVsZW1lbnQob2xkSGVhZCwgbmV3SGVhZCwgY3R4KTtcbiAgICAgICAgLy8gd2hlbiBoZWFkIHByb21pc2VzIHJlc29sdmUsIHByb2NlZWQgaWdub3JpbmcgdGhlIGhlYWQgdGFnXG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKSA9PiB7XG4gICAgICAgICAgY29uc3QgbmV3Q3R4ID0gT2JqZWN0LmFzc2lnbihjdHgsIHtcbiAgICAgICAgICAgIGhlYWQ6IHtcbiAgICAgICAgICAgICAgYmxvY2s6IGZhbHNlLFxuICAgICAgICAgICAgICBpZ25vcmU6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuZXdDdHgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8ganVzdCBwcm9jZWVkIGlmIHdlIG5vdCBoZWFkIGJsb2NraW5nXG4gICAgcmV0dXJuIGNhbGxiYWNrKGN0eCk7XG4gIH1cblxuICAvKipcbiAgICogIFRoZSBIRUFEIHRhZyBjYW4gYmUgaGFuZGxlZCBzcGVjaWFsbHksIGVpdGhlciB3LyBhICdtZXJnZScgb3IgJ2FwcGVuZCcgc3R5bGVcbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBvbGRIZWFkXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gbmV3SGVhZFxuICAgKiBAcGFyYW0ge01vcnBoQ29udGV4dH0gY3R4XG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+W119XG4gICAqL1xuICBmdW5jdGlvbiBoYW5kbGVIZWFkRWxlbWVudChvbGRIZWFkLCBuZXdIZWFkLCBjdHgpIHtcbiAgICBsZXQgYWRkZWQgPSBbXTtcbiAgICBsZXQgcmVtb3ZlZCA9IFtdO1xuICAgIGxldCBwcmVzZXJ2ZWQgPSBbXTtcbiAgICBsZXQgbm9kZXNUb0FwcGVuZCA9IFtdO1xuXG4gICAgLy8gcHV0IGFsbCBuZXcgaGVhZCBlbGVtZW50cyBpbnRvIGEgTWFwLCBieSB0aGVpciBvdXRlckhUTUxcbiAgICBsZXQgc3JjVG9OZXdIZWFkTm9kZXMgPSBuZXcgTWFwKCk7XG4gICAgZm9yIChjb25zdCBuZXdIZWFkQ2hpbGQgb2YgbmV3SGVhZC5jaGlsZHJlbikge1xuICAgICAgc3JjVG9OZXdIZWFkTm9kZXMuc2V0KG5ld0hlYWRDaGlsZC5vdXRlckhUTUwsIG5ld0hlYWRDaGlsZCk7XG4gICAgfVxuXG4gICAgLy8gZm9yIGVhY2ggZWx0IGluIHRoZSBjdXJyZW50IGhlYWRcbiAgICBmb3IgKGNvbnN0IGN1cnJlbnRIZWFkRWx0IG9mIG9sZEhlYWQuY2hpbGRyZW4pIHtcbiAgICAgIC8vIElmIHRoZSBjdXJyZW50IGhlYWQgZWxlbWVudCBpcyBpbiB0aGUgbWFwXG4gICAgICBsZXQgaW5OZXdDb250ZW50ID0gc3JjVG9OZXdIZWFkTm9kZXMuaGFzKGN1cnJlbnRIZWFkRWx0Lm91dGVySFRNTCk7XG4gICAgICBsZXQgaXNSZUFwcGVuZGVkID0gY3R4LmhlYWQuc2hvdWxkUmVBcHBlbmQoY3VycmVudEhlYWRFbHQpO1xuICAgICAgbGV0IGlzUHJlc2VydmVkID0gY3R4LmhlYWQuc2hvdWxkUHJlc2VydmUoY3VycmVudEhlYWRFbHQpO1xuICAgICAgaWYgKGluTmV3Q29udGVudCB8fCBpc1ByZXNlcnZlZCkge1xuICAgICAgICBpZiAoaXNSZUFwcGVuZGVkKSB7XG4gICAgICAgICAgLy8gcmVtb3ZlIHRoZSBjdXJyZW50IHZlcnNpb24gYW5kIGxldCB0aGUgbmV3IHZlcnNpb24gcmVwbGFjZSBpdCBhbmQgcmUtZXhlY3V0ZVxuICAgICAgICAgIHJlbW92ZWQucHVzaChjdXJyZW50SGVhZEVsdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gdGhpcyBlbGVtZW50IGFscmVhZHkgZXhpc3RzIGFuZCBzaG91bGQgbm90IGJlIHJlLWFwcGVuZGVkLCBzbyByZW1vdmUgaXQgZnJvbVxuICAgICAgICAgIC8vIHRoZSBuZXcgY29udGVudCBtYXAsIHByZXNlcnZpbmcgaXQgaW4gdGhlIERPTVxuICAgICAgICAgIHNyY1RvTmV3SGVhZE5vZGVzLmRlbGV0ZShjdXJyZW50SGVhZEVsdC5vdXRlckhUTUwpO1xuICAgICAgICAgIHByZXNlcnZlZC5wdXNoKGN1cnJlbnRIZWFkRWx0KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGN0eC5oZWFkLnN0eWxlID09PSBcImFwcGVuZFwiKSB7XG4gICAgICAgICAgLy8gd2UgYXJlIGFwcGVuZGluZyBhbmQgdGhpcyBleGlzdGluZyBlbGVtZW50IGlzIG5vdCBuZXcgY29udGVudFxuICAgICAgICAgIC8vIHNvIGlmIGFuZCBvbmx5IGlmIGl0IGlzIG1hcmtlZCBmb3IgcmUtYXBwZW5kIGRvIHdlIGRvIGFueXRoaW5nXG4gICAgICAgICAgaWYgKGlzUmVBcHBlbmRlZCkge1xuICAgICAgICAgICAgcmVtb3ZlZC5wdXNoKGN1cnJlbnRIZWFkRWx0KTtcbiAgICAgICAgICAgIG5vZGVzVG9BcHBlbmQucHVzaChjdXJyZW50SGVhZEVsdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGlmIHRoaXMgaXMgYSBtZXJnZSwgd2UgcmVtb3ZlIHRoaXMgY29udGVudCBzaW5jZSBpdCBpcyBub3QgaW4gdGhlIG5ldyBoZWFkXG4gICAgICAgICAgaWYgKGN0eC5oZWFkLnNob3VsZFJlbW92ZShjdXJyZW50SGVhZEVsdCkgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZW1vdmVkLnB1c2goY3VycmVudEhlYWRFbHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFB1c2ggdGhlIHJlbWFpbmluZyBuZXcgaGVhZCBlbGVtZW50cyBpbiB0aGUgTWFwIGludG8gdGhlXG4gICAgLy8gbm9kZXMgdG8gYXBwZW5kIHRvIHRoZSBoZWFkIHRhZ1xuICAgIG5vZGVzVG9BcHBlbmQucHVzaCguLi5zcmNUb05ld0hlYWROb2Rlcy52YWx1ZXMoKSk7XG5cbiAgICBsZXQgcHJvbWlzZXMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IG5ld05vZGUgb2Ygbm9kZXNUb0FwcGVuZCkge1xuICAgICAgLy8gVE9ETzogVGhpcyBjb3VsZCB0aGVvcmV0aWNhbGx5IGJlIG51bGwsIGJhc2VkIG9uIHR5cGVcbiAgICAgIGxldCBuZXdFbHQgPSAvKiogQHR5cGUge0NoaWxkTm9kZX0gKi8gKFxuICAgICAgICBkb2N1bWVudC5jcmVhdGVSYW5nZSgpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChuZXdOb2RlLm91dGVySFRNTClcbiAgICAgICAgICAuZmlyc3RDaGlsZFxuICAgICAgKTtcbiAgICAgIGlmIChjdHguY2FsbGJhY2tzLmJlZm9yZU5vZGVBZGRlZChuZXdFbHQpICE9PSBmYWxzZSkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgKFwiaHJlZlwiIGluIG5ld0VsdCAmJiBuZXdFbHQuaHJlZikgfHxcbiAgICAgICAgICAoXCJzcmNcIiBpbiBuZXdFbHQgJiYgbmV3RWx0LnNyYylcbiAgICAgICAgKSB7XG4gICAgICAgICAgLyoqIEB0eXBlIHsocmVzdWx0PzogYW55KSA9PiB2b2lkfSAqLyBsZXQgcmVzb2x2ZTtcbiAgICAgICAgICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChfcmVzb2x2ZSkge1xuICAgICAgICAgICAgcmVzb2x2ZSA9IF9yZXNvbHZlO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIG5ld0VsdC5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcHJvbWlzZXMucHVzaChwcm9taXNlKTtcbiAgICAgICAgfVxuICAgICAgICBvbGRIZWFkLmFwcGVuZENoaWxkKG5ld0VsdCk7XG4gICAgICAgIGN0eC5jYWxsYmFja3MuYWZ0ZXJOb2RlQWRkZWQobmV3RWx0KTtcbiAgICAgICAgYWRkZWQucHVzaChuZXdFbHQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJlbW92ZSBhbGwgcmVtb3ZlZCBlbGVtZW50cywgYWZ0ZXIgd2UgaGF2ZSBhcHBlbmRlZCB0aGUgbmV3IGVsZW1lbnRzIHRvIGF2b2lkXG4gICAgLy8gYWRkaXRpb25hbCBuZXR3b3JrIHJlcXVlc3RzIGZvciB0aGluZ3MgbGlrZSBzdHlsZSBzaGVldHNcbiAgICBmb3IgKGNvbnN0IHJlbW92ZWRFbGVtZW50IG9mIHJlbW92ZWQpIHtcbiAgICAgIGlmIChjdHguY2FsbGJhY2tzLmJlZm9yZU5vZGVSZW1vdmVkKHJlbW92ZWRFbGVtZW50KSAhPT0gZmFsc2UpIHtcbiAgICAgICAgb2xkSGVhZC5yZW1vdmVDaGlsZChyZW1vdmVkRWxlbWVudCk7XG4gICAgICAgIGN0eC5jYWxsYmFja3MuYWZ0ZXJOb2RlUmVtb3ZlZChyZW1vdmVkRWxlbWVudCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY3R4LmhlYWQuYWZ0ZXJIZWFkTW9ycGhlZChvbGRIZWFkLCB7XG4gICAgICBhZGRlZDogYWRkZWQsXG4gICAgICBrZXB0OiBwcmVzZXJ2ZWQsXG4gICAgICByZW1vdmVkOiByZW1vdmVkLFxuICAgIH0pO1xuICAgIHJldHVybiBwcm9taXNlcztcbiAgfVxuXG4gIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gQ3JlYXRlIE1vcnBoIENvbnRleHQgRnVuY3Rpb25zXG4gIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgY29uc3QgY3JlYXRlTW9ycGhDb250ZXh0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gb2xkTm9kZVxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gbmV3Q29udGVudFxuICAgICAqIEBwYXJhbSB7Q29uZmlnfSBjb25maWdcbiAgICAgKiBAcmV0dXJucyB7TW9ycGhDb250ZXh0fVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZU1vcnBoQ29udGV4dChvbGROb2RlLCBuZXdDb250ZW50LCBjb25maWcpIHtcbiAgICAgIGNvbnN0IHsgcGVyc2lzdGVudElkcywgaWRNYXAgfSA9IGNyZWF0ZUlkTWFwcyhvbGROb2RlLCBuZXdDb250ZW50KTtcblxuICAgICAgY29uc3QgbWVyZ2VkQ29uZmlnID0gbWVyZ2VEZWZhdWx0cyhjb25maWcpO1xuICAgICAgY29uc3QgbW9ycGhTdHlsZSA9IG1lcmdlZENvbmZpZy5tb3JwaFN0eWxlIHx8IFwib3V0ZXJIVE1MXCI7XG4gICAgICBpZiAoIVtcImlubmVySFRNTFwiLCBcIm91dGVySFRNTFwiXS5pbmNsdWRlcyhtb3JwaFN0eWxlKSkge1xuICAgICAgICB0aHJvdyBgRG8gbm90IHVuZGVyc3RhbmQgaG93IHRvIG1vcnBoIHN0eWxlICR7bW9ycGhTdHlsZX1gO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICB0YXJnZXQ6IG9sZE5vZGUsXG4gICAgICAgIG5ld0NvbnRlbnQ6IG5ld0NvbnRlbnQsXG4gICAgICAgIGNvbmZpZzogbWVyZ2VkQ29uZmlnLFxuICAgICAgICBtb3JwaFN0eWxlOiBtb3JwaFN0eWxlLFxuICAgICAgICBpZ25vcmVBY3RpdmU6IG1lcmdlZENvbmZpZy5pZ25vcmVBY3RpdmUsXG4gICAgICAgIGlnbm9yZUFjdGl2ZVZhbHVlOiBtZXJnZWRDb25maWcuaWdub3JlQWN0aXZlVmFsdWUsXG4gICAgICAgIHJlc3RvcmVGb2N1czogbWVyZ2VkQ29uZmlnLnJlc3RvcmVGb2N1cyxcbiAgICAgICAgaWRNYXA6IGlkTWFwLFxuICAgICAgICBwZXJzaXN0ZW50SWRzOiBwZXJzaXN0ZW50SWRzLFxuICAgICAgICBwYW50cnk6IGNyZWF0ZVBhbnRyeSgpLFxuICAgICAgICBjYWxsYmFja3M6IG1lcmdlZENvbmZpZy5jYWxsYmFja3MsXG4gICAgICAgIGhlYWQ6IG1lcmdlZENvbmZpZy5oZWFkLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWVwIG1lcmdlcyB0aGUgY29uZmlnIG9iamVjdCBhbmQgdGhlIElkaW9tb3JwaC5kZWZhdWx0cyBvYmplY3QgdG9cbiAgICAgKiBwcm9kdWNlIGEgZmluYWwgY29uZmlndXJhdGlvbiBvYmplY3RcbiAgICAgKiBAcGFyYW0ge0NvbmZpZ30gY29uZmlnXG4gICAgICogQHJldHVybnMge0NvbmZpZ0ludGVybmFsfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1lcmdlRGVmYXVsdHMoY29uZmlnKSB7XG4gICAgICBsZXQgZmluYWxDb25maWcgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0cyk7XG5cbiAgICAgIC8vIGNvcHkgdG9wIGxldmVsIHN0dWZmIGludG8gZmluYWwgY29uZmlnXG4gICAgICBPYmplY3QuYXNzaWduKGZpbmFsQ29uZmlnLCBjb25maWcpO1xuXG4gICAgICAvLyBjb3B5IGNhbGxiYWNrcyBpbnRvIGZpbmFsIGNvbmZpZyAoZG8gdGhpcyB0byBkZWVwIG1lcmdlIHRoZSBjYWxsYmFja3MpXG4gICAgICBmaW5hbENvbmZpZy5jYWxsYmFja3MgPSBPYmplY3QuYXNzaWduKFxuICAgICAgICB7fSxcbiAgICAgICAgZGVmYXVsdHMuY2FsbGJhY2tzLFxuICAgICAgICBjb25maWcuY2FsbGJhY2tzLFxuICAgICAgKTtcblxuICAgICAgLy8gY29weSBoZWFkIGNvbmZpZyBpbnRvIGZpbmFsIGNvbmZpZyAgKGRvIHRoaXMgdG8gZGVlcCBtZXJnZSB0aGUgaGVhZClcbiAgICAgIGZpbmFsQ29uZmlnLmhlYWQgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0cy5oZWFkLCBjb25maWcuaGVhZCk7XG5cbiAgICAgIHJldHVybiBmaW5hbENvbmZpZztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7SFRNTERpdkVsZW1lbnR9XG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlUGFudHJ5KCkge1xuICAgICAgY29uc3QgcGFudHJ5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHBhbnRyeS5oaWRkZW4gPSB0cnVlO1xuICAgICAgZG9jdW1lbnQuYm9keS5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmVuZFwiLCBwYW50cnkpO1xuICAgICAgcmV0dXJuIHBhbnRyeTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFsbCBlbGVtZW50cyB3aXRoIGFuIElEIGNvbnRhaW5lZCB3aXRoaW4gdGhlIHJvb3QgZWxlbWVudCBhbmQgaXRzIGRlc2NlbmRhbnRzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IHJvb3RcbiAgICAgKiBAcmV0dXJucyB7RWxlbWVudFtdfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZpbmRJZEVsZW1lbnRzKHJvb3QpIHtcbiAgICAgIGxldCBlbGVtZW50cyA9IEFycmF5LmZyb20ocm9vdC5xdWVyeVNlbGVjdG9yQWxsKFwiW2lkXVwiKSk7XG4gICAgICBpZiAocm9vdC5pZCkge1xuICAgICAgICBlbGVtZW50cy5wdXNoKHJvb3QpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGVsZW1lbnRzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgYm90dG9tLXVwIGFsZ29yaXRobSB0aGF0IHBvcHVsYXRlcyBhIG1hcCBvZiBFbGVtZW50IC0+IElkU2V0LlxuICAgICAqIFRoZSBpZFNldCBmb3IgYSBnaXZlbiBlbGVtZW50IGlzIHRoZSBzZXQgb2YgYWxsIElEcyBjb250YWluZWQgd2l0aGluIGl0cyBzdWJ0cmVlLlxuICAgICAqIEFzIGFuIG9wdGltemF0aW9uLCB3ZSBmaWx0ZXIgdGhlc2UgSURzIHRocm91Z2ggdGhlIGdpdmVuIGxpc3Qgb2YgcGVyc2lzdGVudCBJRHMsXG4gICAgICogYmVjYXVzZSB3ZSBkb24ndCBuZWVkIHRvIGJvdGhlciBjb25zaWRlcmluZyBJRGVkIGVsZW1lbnRzIHRoYXQgd29uJ3QgYmUgaW4gdGhlIG5ldyBjb250ZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtNYXA8Tm9kZSwgU2V0PHN0cmluZz4+fSBpZE1hcFxuICAgICAqIEBwYXJhbSB7U2V0PHN0cmluZz59IHBlcnNpc3RlbnRJZHNcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IHJvb3RcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnRbXX0gZWxlbWVudHNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwb3B1bGF0ZUlkTWFwV2l0aFRyZWUoaWRNYXAsIHBlcnNpc3RlbnRJZHMsIHJvb3QsIGVsZW1lbnRzKSB7XG4gICAgICBmb3IgKGNvbnN0IGVsdCBvZiBlbGVtZW50cykge1xuICAgICAgICBpZiAocGVyc2lzdGVudElkcy5oYXMoZWx0LmlkKSkge1xuICAgICAgICAgIC8qKiBAdHlwZSB7RWxlbWVudHxudWxsfSAqL1xuICAgICAgICAgIGxldCBjdXJyZW50ID0gZWx0O1xuICAgICAgICAgIC8vIHdhbGsgdXAgdGhlIHBhcmVudCBoaWVyYXJjaHkgb2YgdGhhdCBlbGVtZW50LCBhZGRpbmcgdGhlIGlkXG4gICAgICAgICAgLy8gb2YgZWxlbWVudCB0byB0aGUgcGFyZW50J3MgaWQgc2V0XG4gICAgICAgICAgd2hpbGUgKGN1cnJlbnQpIHtcbiAgICAgICAgICAgIGxldCBpZFNldCA9IGlkTWFwLmdldChjdXJyZW50KTtcbiAgICAgICAgICAgIC8vIGlmIHRoZSBpZCBzZXQgZG9lc24ndCBleGlzdCwgY3JlYXRlIGl0IGFuZCBpbnNlcnQgaXQgaW4gdGhlIG1hcFxuICAgICAgICAgICAgaWYgKGlkU2V0ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgaWRTZXQgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICAgIGlkTWFwLnNldChjdXJyZW50LCBpZFNldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZFNldC5hZGQoZWx0LmlkKTtcblxuICAgICAgICAgICAgaWYgKGN1cnJlbnQgPT09IHJvb3QpIGJyZWFrO1xuICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGNvbXB1dGVzIGEgbWFwIG9mIG5vZGVzIHRvIGFsbCBpZHMgY29udGFpbmVkIHdpdGhpbiB0aGF0IG5vZGUgKGluY2x1c2l2ZSBvZiB0aGVcbiAgICAgKiBub2RlKS4gIFRoaXMgbWFwIGNhbiBiZSB1c2VkIHRvIGFzayBpZiB0d28gbm9kZXMgaGF2ZSBpbnRlcnNlY3Rpbmcgc2V0cyBvZiBpZHMsIHdoaWNoIGFsbG93c1xuICAgICAqIGZvciBhIGxvb3NlciBkZWZpbml0aW9uIG9mIFwibWF0Y2hpbmdcIiB0aGFuIHRyYWRpdGlvbiBpZCBtYXRjaGluZywgYW5kIGFsbG93cyBjaGlsZCBub2Rlc1xuICAgICAqIHRvIGNvbnRyaWJ1dGUgdG8gYSBwYXJlbnQgbm9kZXMgbWF0Y2hpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG9sZENvbnRlbnQgIHRoZSBvbGQgY29udGVudCB0aGF0IHdpbGwgYmUgbW9ycGhlZFxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gbmV3Q29udGVudCAgdGhlIG5ldyBjb250ZW50IHRvIG1vcnBoIHRvXG4gICAgICogQHJldHVybnMge0lkU2V0c31cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVJZE1hcHMob2xkQ29udGVudCwgbmV3Q29udGVudCkge1xuICAgICAgY29uc3Qgb2xkSWRFbGVtZW50cyA9IGZpbmRJZEVsZW1lbnRzKG9sZENvbnRlbnQpO1xuICAgICAgY29uc3QgbmV3SWRFbGVtZW50cyA9IGZpbmRJZEVsZW1lbnRzKG5ld0NvbnRlbnQpO1xuXG4gICAgICBjb25zdCBwZXJzaXN0ZW50SWRzID0gY3JlYXRlUGVyc2lzdGVudElkcyhvbGRJZEVsZW1lbnRzLCBuZXdJZEVsZW1lbnRzKTtcblxuICAgICAgLyoqIEB0eXBlIHtNYXA8Tm9kZSwgU2V0PHN0cmluZz4+fSAqL1xuICAgICAgbGV0IGlkTWFwID0gbmV3IE1hcCgpO1xuICAgICAgcG9wdWxhdGVJZE1hcFdpdGhUcmVlKGlkTWFwLCBwZXJzaXN0ZW50SWRzLCBvbGRDb250ZW50LCBvbGRJZEVsZW1lbnRzKTtcblxuICAgICAgLyoqIEB0cy1pZ25vcmUgLSBpZiBuZXdDb250ZW50IGlzIGEgZHVjay10eXBlZCBwYXJlbnQsIHBhc3MgaXRzIHNpbmdsZSBjaGlsZCBub2RlIGFzIHRoZSByb290IHRvIGhhbHQgdXB3YXJkcyBpdGVyYXRpb24gKi9cbiAgICAgIGNvbnN0IG5ld1Jvb3QgPSBuZXdDb250ZW50Ll9faWRpb21vcnBoUm9vdCB8fCBuZXdDb250ZW50O1xuICAgICAgcG9wdWxhdGVJZE1hcFdpdGhUcmVlKGlkTWFwLCBwZXJzaXN0ZW50SWRzLCBuZXdSb290LCBuZXdJZEVsZW1lbnRzKTtcblxuICAgICAgcmV0dXJuIHsgcGVyc2lzdGVudElkcywgaWRNYXAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGNvbXB1dGVzIHRoZSBzZXQgb2YgaWRzIHRoYXQgcGVyc2lzdCBiZXR3ZWVuIHRoZSB0d28gY29udGVudHMgZXhjbHVkaW5nIGR1cGxpY2F0ZXNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudFtdfSBvbGRJZEVsZW1lbnRzXG4gICAgICogQHBhcmFtIHtFbGVtZW50W119IG5ld0lkRWxlbWVudHNcbiAgICAgKiBAcmV0dXJucyB7U2V0PHN0cmluZz59XG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlUGVyc2lzdGVudElkcyhvbGRJZEVsZW1lbnRzLCBuZXdJZEVsZW1lbnRzKSB7XG4gICAgICBsZXQgZHVwbGljYXRlSWRzID0gbmV3IFNldCgpO1xuXG4gICAgICAvKiogQHR5cGUge01hcDxzdHJpbmcsIHN0cmluZz59ICovXG4gICAgICBsZXQgb2xkSWRUYWdOYW1lTWFwID0gbmV3IE1hcCgpO1xuICAgICAgZm9yIChjb25zdCB7IGlkLCB0YWdOYW1lIH0gb2Ygb2xkSWRFbGVtZW50cykge1xuICAgICAgICBpZiAob2xkSWRUYWdOYW1lTWFwLmhhcyhpZCkpIHtcbiAgICAgICAgICBkdXBsaWNhdGVJZHMuYWRkKGlkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvbGRJZFRhZ05hbWVNYXAuc2V0KGlkLCB0YWdOYW1lKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsZXQgcGVyc2lzdGVudElkcyA9IG5ldyBTZXQoKTtcbiAgICAgIGZvciAoY29uc3QgeyBpZCwgdGFnTmFtZSB9IG9mIG5ld0lkRWxlbWVudHMpIHtcbiAgICAgICAgaWYgKHBlcnNpc3RlbnRJZHMuaGFzKGlkKSkge1xuICAgICAgICAgIGR1cGxpY2F0ZUlkcy5hZGQoaWQpO1xuICAgICAgICB9IGVsc2UgaWYgKG9sZElkVGFnTmFtZU1hcC5nZXQoaWQpID09PSB0YWdOYW1lKSB7XG4gICAgICAgICAgcGVyc2lzdGVudElkcy5hZGQoaWQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNraXAgaWYgdGFnIHR5cGVzIG1pc21hdGNoIGJlY2F1c2UgaXRzIG5vdCBwb3NzaWJsZSB0byBtb3JwaCBvbmUgdGFnIGludG8gYW5vdGhlclxuICAgICAgfVxuXG4gICAgICBmb3IgKGNvbnN0IGlkIG9mIGR1cGxpY2F0ZUlkcykge1xuICAgICAgICBwZXJzaXN0ZW50SWRzLmRlbGV0ZShpZCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcGVyc2lzdGVudElkcztcbiAgICB9XG5cbiAgICByZXR1cm4gY3JlYXRlTW9ycGhDb250ZXh0O1xuICB9KSgpO1xuXG4gIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gSFRNTCBOb3JtYWxpemF0aW9uIEZ1bmN0aW9uc1xuICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIGNvbnN0IHsgbm9ybWFsaXplRWxlbWVudCwgbm9ybWFsaXplUGFyZW50IH0gPSAoZnVuY3Rpb24gKCkge1xuICAgIC8qKiBAdHlwZSB7V2Vha1NldDxOb2RlPn0gKi9cbiAgICBjb25zdCBnZW5lcmF0ZWRCeUlkaW9tb3JwaCA9IG5ldyBXZWFrU2V0KCk7XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudCB8IERvY3VtZW50fSBjb250ZW50XG4gICAgICogQHJldHVybnMge0VsZW1lbnR9XG4gICAgICovXG4gICAgZnVuY3Rpb24gbm9ybWFsaXplRWxlbWVudChjb250ZW50KSB7XG4gICAgICBpZiAoY29udGVudCBpbnN0YW5jZW9mIERvY3VtZW50KSB7XG4gICAgICAgIHJldHVybiBjb250ZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudWxsIHwgc3RyaW5nIHwgTm9kZSB8IEhUTUxDb2xsZWN0aW9uIHwgTm9kZVtdIHwgRG9jdW1lbnQgJiB7Z2VuZXJhdGVkQnlJZGlvbW9ycGg6Ym9vbGVhbn19IG5ld0NvbnRlbnRcbiAgICAgKiBAcmV0dXJucyB7RWxlbWVudH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBub3JtYWxpemVQYXJlbnQobmV3Q29udGVudCkge1xuICAgICAgaWYgKG5ld0NvbnRlbnQgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTsgLy8gZHVtbXkgcGFyZW50IGVsZW1lbnRcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG5ld0NvbnRlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZVBhcmVudChwYXJzZUNvbnRlbnQobmV3Q29udGVudCkpO1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgZ2VuZXJhdGVkQnlJZGlvbW9ycGguaGFzKC8qKiBAdHlwZSB7RWxlbWVudH0gKi8gKG5ld0NvbnRlbnQpKVxuICAgICAgKSB7XG4gICAgICAgIC8vIHRoZSB0ZW1wbGF0ZSB0YWcgY3JlYXRlZCBieSBpZGlvbW9ycGggcGFyc2luZyBjYW4gc2VydmUgYXMgYSBkdW1teSBwYXJlbnRcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7RWxlbWVudH0gKi8gKG5ld0NvbnRlbnQpO1xuICAgICAgfSBlbHNlIGlmIChuZXdDb250ZW50IGluc3RhbmNlb2YgTm9kZSkge1xuICAgICAgICBpZiAobmV3Q29udGVudC5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgLy8gd2UgY2FuJ3QgdXNlIHRoZSBwYXJlbnQgZGlyZWN0bHkgYmVjYXVzZSBuZXdDb250ZW50IG1heSBoYXZlIHNpYmxpbmdzXG4gICAgICAgICAgLy8gdGhhdCB3ZSBkb24ndCB3YW50IGluIHRoZSBtb3JwaCwgYW5kIHJlcGFyZW50aW5nIG1pZ2h0IGJlIGV4cGVuc2l2ZSAoVE9ETyBpcyBpdD8pLFxuICAgICAgICAgIC8vIHNvIHdlIGNyZWF0ZSBhIGR1Y2stdHlwZWQgcGFyZW50IG5vZGUgaW5zdGVhZC5cbiAgICAgICAgICByZXR1cm4gY3JlYXRlRHVja1R5cGVkUGFyZW50KG5ld0NvbnRlbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGEgc2luZ2xlIG5vZGUgaXMgYWRkZWQgYXMgYSBjaGlsZCB0byBhIGR1bW15IHBhcmVudFxuICAgICAgICAgIGNvbnN0IGR1bW15UGFyZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICBkdW1teVBhcmVudC5hcHBlbmQobmV3Q29udGVudCk7XG4gICAgICAgICAgcmV0dXJuIGR1bW15UGFyZW50O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBhbGwgbm9kZXMgaW4gdGhlIGFycmF5IG9yIEhUTUxFbGVtZW50IGNvbGxlY3Rpb24gYXJlIGNvbnNvbGlkYXRlZCB1bmRlclxuICAgICAgICAvLyBhIHNpbmdsZSBkdW1teSBwYXJlbnQgZWxlbWVudFxuICAgICAgICBjb25zdCBkdW1teVBhcmVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGZvciAoY29uc3QgZWx0IG9mIFsuLi5uZXdDb250ZW50XSkge1xuICAgICAgICAgIGR1bW15UGFyZW50LmFwcGVuZChlbHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkdW1teVBhcmVudDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZmFrZSBkdWNrLXR5cGVkIHBhcmVudCBlbGVtZW50IHRvIHdyYXAgYSBzaW5nbGUgbm9kZSwgd2l0aG91dCBhY3R1YWxseSByZXBhcmVudGluZyBpdC5cbiAgICAgKiBcIklmIGl0IHdhbGtzIGxpa2UgYSBkdWNrLCBhbmQgcXVhY2tzIGxpa2UgYSBkdWNrLCB0aGVuIGl0IG11c3QgYmUgYSBkdWNrIVwiIC0tIEphbWVzIFdoaXRjb21iIFJpbGV5ICgxODQ5XHUyMDEzMTkxNilcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gbmV3Q29udGVudFxuICAgICAqIEByZXR1cm5zIHtFbGVtZW50fVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUR1Y2tUeXBlZFBhcmVudChuZXdDb250ZW50KSB7XG4gICAgICByZXR1cm4gLyoqIEB0eXBlIHtFbGVtZW50fSAqLyAoXG4gICAgICAgIC8qKiBAdHlwZSB7dW5rbm93bn0gKi8gKHtcbiAgICAgICAgICBjaGlsZE5vZGVzOiBbbmV3Q29udGVudF0sXG4gICAgICAgICAgLyoqIEB0cy1pZ25vcmUgLSBjb3ZlciB5b3VyIGV5ZXMgZm9yIGEgbWludXRlLCB0c2MgKi9cbiAgICAgICAgICBxdWVyeVNlbGVjdG9yQWxsOiAocykgPT4ge1xuICAgICAgICAgICAgLyoqIEB0cy1pZ25vcmUgKi9cbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRzID0gbmV3Q29udGVudC5xdWVyeVNlbGVjdG9yQWxsKHMpO1xuICAgICAgICAgICAgLyoqIEB0cy1pZ25vcmUgKi9cbiAgICAgICAgICAgIHJldHVybiBuZXdDb250ZW50Lm1hdGNoZXMocykgPyBbbmV3Q29udGVudCwgLi4uZWxlbWVudHNdIDogZWxlbWVudHM7XG4gICAgICAgICAgfSxcbiAgICAgICAgICAvKiogQHRzLWlnbm9yZSAqL1xuICAgICAgICAgIGluc2VydEJlZm9yZTogKG4sIHIpID0+IG5ld0NvbnRlbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobiwgciksXG4gICAgICAgICAgLyoqIEB0cy1pZ25vcmUgKi9cbiAgICAgICAgICBtb3ZlQmVmb3JlOiAobiwgcikgPT4gbmV3Q29udGVudC5wYXJlbnROb2RlLm1vdmVCZWZvcmUobiwgciksXG4gICAgICAgICAgLy8gZm9yIGxhdGVyIHVzZSB3aXRoIHBvcHVsYXRlSWRNYXBXaXRoVHJlZSB0byBoYWx0IHVwd2FyZHMgaXRlcmF0aW9uXG4gICAgICAgICAgZ2V0IF9faWRpb21vcnBoUm9vdCgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXdDb250ZW50O1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5ld0NvbnRlbnRcbiAgICAgKiBAcmV0dXJucyB7Tm9kZSB8IG51bGwgfCBEb2N1bWVudEZyYWdtZW50fVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHBhcnNlQ29udGVudChuZXdDb250ZW50KSB7XG4gICAgICBsZXQgcGFyc2VyID0gbmV3IERPTVBhcnNlcigpO1xuXG4gICAgICAvLyByZW1vdmUgc3ZncyB0byBhdm9pZCBmYWxzZS1wb3NpdGl2ZSBtYXRjaGVzIG9uIGhlYWQsIGV0Yy5cbiAgICAgIGxldCBjb250ZW50V2l0aFN2Z3NSZW1vdmVkID0gbmV3Q29udGVudC5yZXBsYWNlKFxuICAgICAgICAvPHN2ZyhcXHNbXj5dKj58PikoW1xcc1xcU10qPyk8XFwvc3ZnPi9naW0sXG4gICAgICAgIFwiXCIsXG4gICAgICApO1xuXG4gICAgICAvLyBpZiB0aGUgbmV3Q29udGVudCBjb250YWlucyBhIGh0bWwsIGhlYWQgb3IgYm9keSB0YWcsIHdlIGNhbiBzaW1wbHkgcGFyc2UgaXQgdy9vIHdyYXBwaW5nXG4gICAgICBpZiAoXG4gICAgICAgIGNvbnRlbnRXaXRoU3Znc1JlbW92ZWQubWF0Y2goLzxcXC9odG1sPi8pIHx8XG4gICAgICAgIGNvbnRlbnRXaXRoU3Znc1JlbW92ZWQubWF0Y2goLzxcXC9oZWFkPi8pIHx8XG4gICAgICAgIGNvbnRlbnRXaXRoU3Znc1JlbW92ZWQubWF0Y2goLzxcXC9ib2R5Pi8pXG4gICAgICApIHtcbiAgICAgICAgbGV0IGNvbnRlbnQgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKG5ld0NvbnRlbnQsIFwidGV4dC9odG1sXCIpO1xuICAgICAgICAvLyBpZiBpdCBpcyBhIGZ1bGwgSFRNTCBkb2N1bWVudCwgcmV0dXJuIHRoZSBkb2N1bWVudCBpdHNlbGYgYXMgdGhlIHBhcmVudCBjb250YWluZXJcbiAgICAgICAgaWYgKGNvbnRlbnRXaXRoU3Znc1JlbW92ZWQubWF0Y2goLzxcXC9odG1sPi8pKSB7XG4gICAgICAgICAgZ2VuZXJhdGVkQnlJZGlvbW9ycGguYWRkKGNvbnRlbnQpO1xuICAgICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIG90aGVyd2lzZSByZXR1cm4gdGhlIGh0bWwgZWxlbWVudCBhcyB0aGUgcGFyZW50IGNvbnRhaW5lclxuICAgICAgICAgIGxldCBodG1sRWxlbWVudCA9IGNvbnRlbnQuZmlyc3RDaGlsZDtcbiAgICAgICAgICBpZiAoaHRtbEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGdlbmVyYXRlZEJ5SWRpb21vcnBoLmFkZChodG1sRWxlbWVudCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBodG1sRWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gaWYgaXQgaXMgcGFydGlhbCBIVE1MLCB3cmFwIGl0IGluIGEgdGVtcGxhdGUgdGFnIHRvIHByb3ZpZGUgYSBwYXJlbnQgZWxlbWVudCBhbmQgYWxzbyB0byBoZWxwXG4gICAgICAgIC8vIGRlYWwgd2l0aCB0b3VjaHkgdGFncyBsaWtlIHRyLCB0Ym9keSwgZXRjLlxuICAgICAgICBsZXQgcmVzcG9uc2VEb2MgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKFxuICAgICAgICAgIFwiPGJvZHk+PHRlbXBsYXRlPlwiICsgbmV3Q29udGVudCArIFwiPC90ZW1wbGF0ZT48L2JvZHk+XCIsXG4gICAgICAgICAgXCJ0ZXh0L2h0bWxcIixcbiAgICAgICAgKTtcbiAgICAgICAgbGV0IGNvbnRlbnQgPSAvKiogQHR5cGUge0hUTUxUZW1wbGF0ZUVsZW1lbnR9ICovIChcbiAgICAgICAgICByZXNwb25zZURvYy5ib2R5LnF1ZXJ5U2VsZWN0b3IoXCJ0ZW1wbGF0ZVwiKVxuICAgICAgICApLmNvbnRlbnQ7XG4gICAgICAgIGdlbmVyYXRlZEJ5SWRpb21vcnBoLmFkZChjb250ZW50KTtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgbm9ybWFsaXplRWxlbWVudCwgbm9ybWFsaXplUGFyZW50IH07XG4gIH0pKCk7XG5cbiAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBUaGlzIGlzIHdoYXQgZW5kcyB1cCBiZWNvbWluZyB0aGUgSWRpb21vcnBoIGdsb2JhbCBvYmplY3RcbiAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICByZXR1cm4ge1xuICAgIG1vcnBoLFxuICAgIGRlZmF1bHRzLFxuICB9O1xufSkoKTtcblxuLyoqXG4gKiBNb3JwaCB0aGUgc3RhdGUgb2YgdGhlIGN1cnJlbnRFbGVtZW50IGJhc2VkIG9uIHRoZSBhdHRyaWJ1dGVzIGFuZCBjb250ZW50cyBvZlxuICogdGhlIG5ld0VsZW1lbnQuIE1vcnBoaW5nIG1heSBkaXNwYXRjaCB0dXJibzpiZWZvcmUtbW9ycGgtZWxlbWVudCxcbiAqIHR1cmJvOmJlZm9yZS1tb3JwaC1hdHRyaWJ1dGUsIGFuZCB0dXJibzptb3JwaC1lbGVtZW50IGV2ZW50cy5cbiAqXG4gKiBAcGFyYW0gY3VycmVudEVsZW1lbnQgRWxlbWVudCBkZXN0aW5hdGlvbiBvZiBtb3JwaGluZyBjaGFuZ2VzXG4gKiBAcGFyYW0gbmV3RWxlbWVudCBFbGVtZW50IHNvdXJjZSBvZiBtb3JwaGluZyBjaGFuZ2VzXG4gKi9cbmZ1bmN0aW9uIG1vcnBoRWxlbWVudHMoY3VycmVudEVsZW1lbnQsIG5ld0VsZW1lbnQsIHsgY2FsbGJhY2tzLCAuLi5vcHRpb25zIH0gPSB7fSkge1xuICBJZGlvbW9ycGgubW9ycGgoY3VycmVudEVsZW1lbnQsIG5ld0VsZW1lbnQsIHtcbiAgICAuLi5vcHRpb25zLFxuICAgIGNhbGxiYWNrczogbmV3IERlZmF1bHRJZGlvbW9ycGhDYWxsYmFja3MoY2FsbGJhY2tzKVxuICB9KTtcbn1cblxuLyoqXG4gKiBNb3JwaCB0aGUgY2hpbGQgZWxlbWVudHMgb2YgdGhlIGN1cnJlbnRFbGVtZW50IGJhc2VkIG9uIHRoZSBjaGlsZCBlbGVtZW50cyBvZlxuICogdGhlIG5ld0VsZW1lbnQuIE1vcnBoaW5nIGNoaWxkcmVuIG1heSBkaXNwYXRjaCB0dXJibzpiZWZvcmUtbW9ycGgtZWxlbWVudCxcbiAqIHR1cmJvOmJlZm9yZS1tb3JwaC1hdHRyaWJ1dGUsIGFuZCB0dXJibzptb3JwaC1lbGVtZW50IGV2ZW50cy5cbiAqXG4gKiBAcGFyYW0gY3VycmVudEVsZW1lbnQgRWxlbWVudCBkZXN0aW5hdGlvbiBvZiBtb3JwaGluZyBjaGlsZHJlbiBjaGFuZ2VzXG4gKiBAcGFyYW0gbmV3RWxlbWVudCBFbGVtZW50IHNvdXJjZSBvZiBtb3JwaGluZyBjaGlsZHJlbiBjaGFuZ2VzXG4gKi9cbmZ1bmN0aW9uIG1vcnBoQ2hpbGRyZW4oY3VycmVudEVsZW1lbnQsIG5ld0VsZW1lbnQsIG9wdGlvbnMgPSB7fSkge1xuICBtb3JwaEVsZW1lbnRzKGN1cnJlbnRFbGVtZW50LCBuZXdFbGVtZW50LmNoaWxkTm9kZXMsIHtcbiAgICAuLi5vcHRpb25zLFxuICAgIG1vcnBoU3R5bGU6IFwiaW5uZXJIVE1MXCJcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHNob3VsZFJlZnJlc2hGcmFtZVdpdGhNb3JwaGluZyhjdXJyZW50RnJhbWUsIG5ld0ZyYW1lKSB7XG4gIHJldHVybiBjdXJyZW50RnJhbWUgaW5zdGFuY2VvZiBGcmFtZUVsZW1lbnQgJiZcbiAgICAvLyBuZXdGcmFtZSBjYW5ub3QgeWV0IGJlIGFuIGluc3RhbmNlIG9mIEZyYW1lRWxlbWVudCBiZWNhdXNlIGN1c3RvbVxuICAgIC8vIGVsZW1lbnRzIGRvbid0IGdldCBpbml0aWFsaXplZCB1bnRpbCB0aGV5J3JlIGF0dGFjaGVkIHRvIHRoZSBET00sIHNvXG4gICAgLy8gdGVzdCBpdHMgRWxlbWVudCNub2RlTmFtZSBpbnN0ZWFkXG4gICAgbmV3RnJhbWUgaW5zdGFuY2VvZiBFbGVtZW50ICYmIG5ld0ZyYW1lLm5vZGVOYW1lID09PSBcIlRVUkJPLUZSQU1FXCIgJiZcbiAgICBjdXJyZW50RnJhbWUuc2hvdWxkUmVsb2FkV2l0aE1vcnBoICYmXG4gICAgY3VycmVudEZyYW1lLmlkID09PSBuZXdGcmFtZS5pZCAmJlxuICAgICghbmV3RnJhbWUuZ2V0QXR0cmlidXRlKFwic3JjXCIpIHx8IHVybHNBcmVFcXVhbChjdXJyZW50RnJhbWUuc3JjLCBuZXdGcmFtZS5nZXRBdHRyaWJ1dGUoXCJzcmNcIikpKSAmJlxuICAgICFjdXJyZW50RnJhbWUuY2xvc2VzdChcIltkYXRhLXR1cmJvLXBlcm1hbmVudF1cIilcbn1cblxuZnVuY3Rpb24gY2xvc2VzdEZyYW1lUmVsb2FkYWJsZVdpdGhNb3JwaGluZyhub2RlKSB7XG4gIHJldHVybiBub2RlLnBhcmVudEVsZW1lbnQuY2xvc2VzdChcInR1cmJvLWZyYW1lW3NyY11bcmVmcmVzaD1tb3JwaF1cIilcbn1cblxuY2xhc3MgRGVmYXVsdElkaW9tb3JwaENhbGxiYWNrcyB7XG4gICNiZWZvcmVOb2RlTW9ycGhlZFxuXG4gIGNvbnN0cnVjdG9yKHsgYmVmb3JlTm9kZU1vcnBoZWQgfSA9IHt9KSB7XG4gICAgdGhpcy4jYmVmb3JlTm9kZU1vcnBoZWQgPSBiZWZvcmVOb2RlTW9ycGhlZCB8fCAoKCkgPT4gdHJ1ZSk7XG4gIH1cblxuICBiZWZvcmVOb2RlQWRkZWQgPSAobm9kZSkgPT4ge1xuICAgIHJldHVybiAhKG5vZGUuaWQgJiYgbm9kZS5oYXNBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLXBlcm1hbmVudFwiKSAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChub2RlLmlkKSlcbiAgfVxuXG4gIGJlZm9yZU5vZGVNb3JwaGVkID0gKGN1cnJlbnRFbGVtZW50LCBuZXdFbGVtZW50KSA9PiB7XG4gICAgaWYgKGN1cnJlbnRFbGVtZW50IGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgaWYgKCFjdXJyZW50RWxlbWVudC5oYXNBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLXBlcm1hbmVudFwiKSAmJiB0aGlzLiNiZWZvcmVOb2RlTW9ycGhlZChjdXJyZW50RWxlbWVudCwgbmV3RWxlbWVudCkpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBkaXNwYXRjaChcInR1cmJvOmJlZm9yZS1tb3JwaC1lbGVtZW50XCIsIHtcbiAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgICAgIHRhcmdldDogY3VycmVudEVsZW1lbnQsXG4gICAgICAgICAgZGV0YWlsOiB7IGN1cnJlbnRFbGVtZW50LCBuZXdFbGVtZW50IH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuICFldmVudC5kZWZhdWx0UHJldmVudGVkXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBiZWZvcmVBdHRyaWJ1dGVVcGRhdGVkID0gKGF0dHJpYnV0ZU5hbWUsIHRhcmdldCwgbXV0YXRpb25UeXBlKSA9PiB7XG4gICAgY29uc3QgZXZlbnQgPSBkaXNwYXRjaChcInR1cmJvOmJlZm9yZS1tb3JwaC1hdHRyaWJ1dGVcIiwge1xuICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICAgIHRhcmdldCxcbiAgICAgIGRldGFpbDogeyBhdHRyaWJ1dGVOYW1lLCBtdXRhdGlvblR5cGUgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuICFldmVudC5kZWZhdWx0UHJldmVudGVkXG4gIH1cblxuICBiZWZvcmVOb2RlUmVtb3ZlZCA9IChub2RlKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuYmVmb3JlTm9kZU1vcnBoZWQobm9kZSlcbiAgfVxuXG4gIGFmdGVyTm9kZU1vcnBoZWQgPSAoY3VycmVudEVsZW1lbnQsIG5ld0VsZW1lbnQpID0+IHtcbiAgICBpZiAoY3VycmVudEVsZW1lbnQgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICBkaXNwYXRjaChcInR1cmJvOm1vcnBoLWVsZW1lbnRcIiwge1xuICAgICAgICB0YXJnZXQ6IGN1cnJlbnRFbGVtZW50LFxuICAgICAgICBkZXRhaWw6IHsgY3VycmVudEVsZW1lbnQsIG5ld0VsZW1lbnQgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5cbmNsYXNzIE1vcnBoaW5nRnJhbWVSZW5kZXJlciBleHRlbmRzIEZyYW1lUmVuZGVyZXIge1xuICBzdGF0aWMgcmVuZGVyRWxlbWVudChjdXJyZW50RWxlbWVudCwgbmV3RWxlbWVudCkge1xuICAgIGRpc3BhdGNoKFwidHVyYm86YmVmb3JlLWZyYW1lLW1vcnBoXCIsIHtcbiAgICAgIHRhcmdldDogY3VycmVudEVsZW1lbnQsXG4gICAgICBkZXRhaWw6IHsgY3VycmVudEVsZW1lbnQsIG5ld0VsZW1lbnQgfVxuICAgIH0pO1xuXG4gICAgbW9ycGhDaGlsZHJlbihjdXJyZW50RWxlbWVudCwgbmV3RWxlbWVudCwge1xuICAgICAgY2FsbGJhY2tzOiB7XG4gICAgICAgIGJlZm9yZU5vZGVNb3JwaGVkOiAobm9kZSwgbmV3Tm9kZSkgPT4ge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHNob3VsZFJlZnJlc2hGcmFtZVdpdGhNb3JwaGluZyhub2RlLCBuZXdOb2RlKSAmJlxuICAgICAgICAgICAgICBjbG9zZXN0RnJhbWVSZWxvYWRhYmxlV2l0aE1vcnBoaW5nKG5vZGUpID09PSBjdXJyZW50RWxlbWVudFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgbm9kZS5yZWxvYWQoKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBwcmVzZXJ2aW5nUGVybWFuZW50RWxlbWVudHMoY2FsbGJhY2spIHtcbiAgICByZXR1cm4gYXdhaXQgY2FsbGJhY2soKVxuICB9XG59XG5cbmNsYXNzIFByb2dyZXNzQmFyIHtcbiAgc3RhdGljIGFuaW1hdGlvbkR1cmF0aW9uID0gMzAwIC8qbXMqL1xuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdENTUygpIHtcbiAgICByZXR1cm4gdW5pbmRlbnRgXG4gICAgICAudHVyYm8tcHJvZ3Jlc3MtYmFyIHtcbiAgICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICBsZWZ0OiAwO1xuICAgICAgICBoZWlnaHQ6IDNweDtcbiAgICAgICAgYmFja2dyb3VuZDogIzAwNzZmZjtcbiAgICAgICAgei1pbmRleDogMjE0NzQ4MzY0NztcbiAgICAgICAgdHJhbnNpdGlvbjpcbiAgICAgICAgICB3aWR0aCAke1Byb2dyZXNzQmFyLmFuaW1hdGlvbkR1cmF0aW9ufW1zIGVhc2Utb3V0LFxuICAgICAgICAgIG9wYWNpdHkgJHtQcm9ncmVzc0Jhci5hbmltYXRpb25EdXJhdGlvbiAvIDJ9bXMgJHtQcm9ncmVzc0Jhci5hbmltYXRpb25EdXJhdGlvbiAvIDJ9bXMgZWFzZS1pbjtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgwLCAwLCAwKTtcbiAgICAgIH1cbiAgICBgXG4gIH1cblxuICBoaWRpbmcgPSBmYWxzZVxuICB2YWx1ZSA9IDBcbiAgdmlzaWJsZSA9IGZhbHNlXG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zdHlsZXNoZWV0RWxlbWVudCA9IHRoaXMuY3JlYXRlU3R5bGVzaGVldEVsZW1lbnQoKTtcbiAgICB0aGlzLnByb2dyZXNzRWxlbWVudCA9IHRoaXMuY3JlYXRlUHJvZ3Jlc3NFbGVtZW50KCk7XG4gICAgdGhpcy5pbnN0YWxsU3R5bGVzaGVldEVsZW1lbnQoKTtcbiAgICB0aGlzLnNldFZhbHVlKDApO1xuICB9XG5cbiAgc2hvdygpIHtcbiAgICBpZiAoIXRoaXMudmlzaWJsZSkge1xuICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcbiAgICAgIHRoaXMuaW5zdGFsbFByb2dyZXNzRWxlbWVudCgpO1xuICAgICAgdGhpcy5zdGFydFRyaWNrbGluZygpO1xuICAgIH1cbiAgfVxuXG4gIGhpZGUoKSB7XG4gICAgaWYgKHRoaXMudmlzaWJsZSAmJiAhdGhpcy5oaWRpbmcpIHtcbiAgICAgIHRoaXMuaGlkaW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMuZmFkZVByb2dyZXNzRWxlbWVudCgoKSA9PiB7XG4gICAgICAgIHRoaXMudW5pbnN0YWxsUHJvZ3Jlc3NFbGVtZW50KCk7XG4gICAgICAgIHRoaXMuc3RvcFRyaWNrbGluZygpO1xuICAgICAgICB0aGlzLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5oaWRpbmcgPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHNldFZhbHVlKHZhbHVlKSB7XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIHRoaXMucmVmcmVzaCgpO1xuICB9XG5cbiAgLy8gUHJpdmF0ZVxuXG4gIGluc3RhbGxTdHlsZXNoZWV0RWxlbWVudCgpIHtcbiAgICBkb2N1bWVudC5oZWFkLmluc2VydEJlZm9yZSh0aGlzLnN0eWxlc2hlZXRFbGVtZW50LCBkb2N1bWVudC5oZWFkLmZpcnN0Q2hpbGQpO1xuICB9XG5cbiAgaW5zdGFsbFByb2dyZXNzRWxlbWVudCgpIHtcbiAgICB0aGlzLnByb2dyZXNzRWxlbWVudC5zdHlsZS53aWR0aCA9IFwiMFwiO1xuICAgIHRoaXMucHJvZ3Jlc3NFbGVtZW50LnN0eWxlLm9wYWNpdHkgPSBcIjFcIjtcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKHRoaXMucHJvZ3Jlc3NFbGVtZW50LCBkb2N1bWVudC5ib2R5KTtcbiAgICB0aGlzLnJlZnJlc2goKTtcbiAgfVxuXG4gIGZhZGVQcm9ncmVzc0VsZW1lbnQoY2FsbGJhY2spIHtcbiAgICB0aGlzLnByb2dyZXNzRWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gXCIwXCI7XG4gICAgc2V0VGltZW91dChjYWxsYmFjaywgUHJvZ3Jlc3NCYXIuYW5pbWF0aW9uRHVyYXRpb24gKiAxLjUpO1xuICB9XG5cbiAgdW5pbnN0YWxsUHJvZ3Jlc3NFbGVtZW50KCkge1xuICAgIGlmICh0aGlzLnByb2dyZXNzRWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5wcm9ncmVzc0VsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIHN0YXJ0VHJpY2tsaW5nKCkge1xuICAgIGlmICghdGhpcy50cmlja2xlSW50ZXJ2YWwpIHtcbiAgICAgIHRoaXMudHJpY2tsZUludGVydmFsID0gd2luZG93LnNldEludGVydmFsKHRoaXMudHJpY2tsZSwgUHJvZ3Jlc3NCYXIuYW5pbWF0aW9uRHVyYXRpb24pO1xuICAgIH1cbiAgfVxuXG4gIHN0b3BUcmlja2xpbmcoKSB7XG4gICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy50cmlja2xlSW50ZXJ2YWwpO1xuICAgIGRlbGV0ZSB0aGlzLnRyaWNrbGVJbnRlcnZhbDtcbiAgfVxuXG4gIHRyaWNrbGUgPSAoKSA9PiB7XG4gICAgdGhpcy5zZXRWYWx1ZSh0aGlzLnZhbHVlICsgTWF0aC5yYW5kb20oKSAvIDEwMCk7XG4gIH1cblxuICByZWZyZXNoKCkge1xuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICB0aGlzLnByb2dyZXNzRWxlbWVudC5zdHlsZS53aWR0aCA9IGAkezEwICsgdGhpcy52YWx1ZSAqIDkwfSVgO1xuICAgIH0pO1xuICB9XG5cbiAgY3JlYXRlU3R5bGVzaGVldEVsZW1lbnQoKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICBlbGVtZW50LnR5cGUgPSBcInRleHQvY3NzXCI7XG4gICAgZWxlbWVudC50ZXh0Q29udGVudCA9IFByb2dyZXNzQmFyLmRlZmF1bHRDU1M7XG4gICAgY29uc3QgY3NwTm9uY2UgPSBnZXRDc3BOb25jZSgpO1xuICAgIGlmIChjc3BOb25jZSkge1xuICAgICAgZWxlbWVudC5ub25jZSA9IGNzcE5vbmNlO1xuICAgIH1cbiAgICByZXR1cm4gZWxlbWVudFxuICB9XG5cbiAgY3JlYXRlUHJvZ3Jlc3NFbGVtZW50KCkge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gXCJ0dXJiby1wcm9ncmVzcy1iYXJcIjtcbiAgICByZXR1cm4gZWxlbWVudFxuICB9XG59XG5cbmNsYXNzIEhlYWRTbmFwc2hvdCBleHRlbmRzIFNuYXBzaG90IHtcbiAgZGV0YWlsc0J5T3V0ZXJIVE1MID0gdGhpcy5jaGlsZHJlblxuICAgIC5maWx0ZXIoKGVsZW1lbnQpID0+ICFlbGVtZW50SXNOb3NjcmlwdChlbGVtZW50KSlcbiAgICAubWFwKChlbGVtZW50KSA9PiBlbGVtZW50V2l0aG91dE5vbmNlKGVsZW1lbnQpKVxuICAgIC5yZWR1Y2UoKHJlc3VsdCwgZWxlbWVudCkgPT4ge1xuICAgICAgY29uc3QgeyBvdXRlckhUTUwgfSA9IGVsZW1lbnQ7XG4gICAgICBjb25zdCBkZXRhaWxzID1cbiAgICAgICAgb3V0ZXJIVE1MIGluIHJlc3VsdFxuICAgICAgICAgID8gcmVzdWx0W291dGVySFRNTF1cbiAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgdHlwZTogZWxlbWVudFR5cGUoZWxlbWVudCksXG4gICAgICAgICAgICAgIHRyYWNrZWQ6IGVsZW1lbnRJc1RyYWNrZWQoZWxlbWVudCksXG4gICAgICAgICAgICAgIGVsZW1lbnRzOiBbXVxuICAgICAgICAgICAgfTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnJlc3VsdCxcbiAgICAgICAgW291dGVySFRNTF06IHtcbiAgICAgICAgICAuLi5kZXRhaWxzLFxuICAgICAgICAgIGVsZW1lbnRzOiBbLi4uZGV0YWlscy5lbGVtZW50cywgZWxlbWVudF1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHt9KVxuXG4gIGdldCB0cmFja2VkRWxlbWVudFNpZ25hdHVyZSgpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5kZXRhaWxzQnlPdXRlckhUTUwpXG4gICAgICAuZmlsdGVyKChvdXRlckhUTUwpID0+IHRoaXMuZGV0YWlsc0J5T3V0ZXJIVE1MW291dGVySFRNTF0udHJhY2tlZClcbiAgICAgIC5qb2luKFwiXCIpXG4gIH1cblxuICBnZXRTY3JpcHRFbGVtZW50c05vdEluU25hcHNob3Qoc25hcHNob3QpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRFbGVtZW50c01hdGNoaW5nVHlwZU5vdEluU25hcHNob3QoXCJzY3JpcHRcIiwgc25hcHNob3QpXG4gIH1cblxuICBnZXRTdHlsZXNoZWV0RWxlbWVudHNOb3RJblNuYXBzaG90KHNuYXBzaG90KSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0RWxlbWVudHNNYXRjaGluZ1R5cGVOb3RJblNuYXBzaG90KFwic3R5bGVzaGVldFwiLCBzbmFwc2hvdClcbiAgfVxuXG4gIGdldEVsZW1lbnRzTWF0Y2hpbmdUeXBlTm90SW5TbmFwc2hvdChtYXRjaGVkVHlwZSwgc25hcHNob3QpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5kZXRhaWxzQnlPdXRlckhUTUwpXG4gICAgICAuZmlsdGVyKChvdXRlckhUTUwpID0+ICEob3V0ZXJIVE1MIGluIHNuYXBzaG90LmRldGFpbHNCeU91dGVySFRNTCkpXG4gICAgICAubWFwKChvdXRlckhUTUwpID0+IHRoaXMuZGV0YWlsc0J5T3V0ZXJIVE1MW291dGVySFRNTF0pXG4gICAgICAuZmlsdGVyKCh7IHR5cGUgfSkgPT4gdHlwZSA9PSBtYXRjaGVkVHlwZSlcbiAgICAgIC5tYXAoKHsgZWxlbWVudHM6IFtlbGVtZW50XSB9KSA9PiBlbGVtZW50KVxuICB9XG5cbiAgZ2V0IHByb3Zpc2lvbmFsRWxlbWVudHMoKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuZGV0YWlsc0J5T3V0ZXJIVE1MKS5yZWR1Y2UoKHJlc3VsdCwgb3V0ZXJIVE1MKSA9PiB7XG4gICAgICBjb25zdCB7IHR5cGUsIHRyYWNrZWQsIGVsZW1lbnRzIH0gPSB0aGlzLmRldGFpbHNCeU91dGVySFRNTFtvdXRlckhUTUxdO1xuICAgICAgaWYgKHR5cGUgPT0gbnVsbCAmJiAhdHJhY2tlZCkge1xuICAgICAgICByZXR1cm4gWy4uLnJlc3VsdCwgLi4uZWxlbWVudHNdXG4gICAgICB9IGVsc2UgaWYgKGVsZW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgcmV0dXJuIFsuLi5yZXN1bHQsIC4uLmVsZW1lbnRzLnNsaWNlKDEpXVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgfVxuICAgIH0sIFtdKVxuICB9XG5cbiAgZ2V0TWV0YVZhbHVlKG5hbWUpIHtcbiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5maW5kTWV0YUVsZW1lbnRCeU5hbWUobmFtZSk7XG4gICAgcmV0dXJuIGVsZW1lbnQgPyBlbGVtZW50LmdldEF0dHJpYnV0ZShcImNvbnRlbnRcIikgOiBudWxsXG4gIH1cblxuICBmaW5kTWV0YUVsZW1lbnRCeU5hbWUobmFtZSkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmRldGFpbHNCeU91dGVySFRNTCkucmVkdWNlKChyZXN1bHQsIG91dGVySFRNTCkgPT4ge1xuICAgICAgY29uc3Qge1xuICAgICAgICBlbGVtZW50czogW2VsZW1lbnRdXG4gICAgICB9ID0gdGhpcy5kZXRhaWxzQnlPdXRlckhUTUxbb3V0ZXJIVE1MXTtcbiAgICAgIHJldHVybiBlbGVtZW50SXNNZXRhRWxlbWVudFdpdGhOYW1lKGVsZW1lbnQsIG5hbWUpID8gZWxlbWVudCA6IHJlc3VsdFxuICAgIH0sIHVuZGVmaW5lZCB8IHVuZGVmaW5lZClcbiAgfVxufVxuXG5mdW5jdGlvbiBlbGVtZW50VHlwZShlbGVtZW50KSB7XG4gIGlmIChlbGVtZW50SXNTY3JpcHQoZWxlbWVudCkpIHtcbiAgICByZXR1cm4gXCJzY3JpcHRcIlxuICB9IGVsc2UgaWYgKGVsZW1lbnRJc1N0eWxlc2hlZXQoZWxlbWVudCkpIHtcbiAgICByZXR1cm4gXCJzdHlsZXNoZWV0XCJcbiAgfVxufVxuXG5mdW5jdGlvbiBlbGVtZW50SXNUcmFja2VkKGVsZW1lbnQpIHtcbiAgcmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS10dXJiby10cmFja1wiKSA9PSBcInJlbG9hZFwiXG59XG5cbmZ1bmN0aW9uIGVsZW1lbnRJc1NjcmlwdChlbGVtZW50KSB7XG4gIGNvbnN0IHRhZ05hbWUgPSBlbGVtZW50LmxvY2FsTmFtZTtcbiAgcmV0dXJuIHRhZ05hbWUgPT0gXCJzY3JpcHRcIlxufVxuXG5mdW5jdGlvbiBlbGVtZW50SXNOb3NjcmlwdChlbGVtZW50KSB7XG4gIGNvbnN0IHRhZ05hbWUgPSBlbGVtZW50LmxvY2FsTmFtZTtcbiAgcmV0dXJuIHRhZ05hbWUgPT0gXCJub3NjcmlwdFwiXG59XG5cbmZ1bmN0aW9uIGVsZW1lbnRJc1N0eWxlc2hlZXQoZWxlbWVudCkge1xuICBjb25zdCB0YWdOYW1lID0gZWxlbWVudC5sb2NhbE5hbWU7XG4gIHJldHVybiB0YWdOYW1lID09IFwic3R5bGVcIiB8fCAodGFnTmFtZSA9PSBcImxpbmtcIiAmJiBlbGVtZW50LmdldEF0dHJpYnV0ZShcInJlbFwiKSA9PSBcInN0eWxlc2hlZXRcIilcbn1cblxuZnVuY3Rpb24gZWxlbWVudElzTWV0YUVsZW1lbnRXaXRoTmFtZShlbGVtZW50LCBuYW1lKSB7XG4gIGNvbnN0IHRhZ05hbWUgPSBlbGVtZW50LmxvY2FsTmFtZTtcbiAgcmV0dXJuIHRhZ05hbWUgPT0gXCJtZXRhXCIgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpID09IG5hbWVcbn1cblxuZnVuY3Rpb24gZWxlbWVudFdpdGhvdXROb25jZShlbGVtZW50KSB7XG4gIGlmIChlbGVtZW50Lmhhc0F0dHJpYnV0ZShcIm5vbmNlXCIpKSB7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJub25jZVwiLCBcIlwiKTtcbiAgfVxuXG4gIHJldHVybiBlbGVtZW50XG59XG5cbmNsYXNzIFBhZ2VTbmFwc2hvdCBleHRlbmRzIFNuYXBzaG90IHtcbiAgc3RhdGljIGZyb21IVE1MU3RyaW5nKGh0bWwgPSBcIlwiKSB7XG4gICAgcmV0dXJuIHRoaXMuZnJvbURvY3VtZW50KHBhcnNlSFRNTERvY3VtZW50KGh0bWwpKVxuICB9XG5cbiAgc3RhdGljIGZyb21FbGVtZW50KGVsZW1lbnQpIHtcbiAgICByZXR1cm4gdGhpcy5mcm9tRG9jdW1lbnQoZWxlbWVudC5vd25lckRvY3VtZW50KVxuICB9XG5cbiAgc3RhdGljIGZyb21Eb2N1bWVudCh7IGRvY3VtZW50RWxlbWVudCwgYm9keSwgaGVhZCB9KSB7XG4gICAgcmV0dXJuIG5ldyB0aGlzKGRvY3VtZW50RWxlbWVudCwgYm9keSwgbmV3IEhlYWRTbmFwc2hvdChoZWFkKSlcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGRvY3VtZW50RWxlbWVudCwgYm9keSwgaGVhZFNuYXBzaG90KSB7XG4gICAgc3VwZXIoYm9keSk7XG4gICAgdGhpcy5kb2N1bWVudEVsZW1lbnQgPSBkb2N1bWVudEVsZW1lbnQ7XG4gICAgdGhpcy5oZWFkU25hcHNob3QgPSBoZWFkU25hcHNob3Q7XG4gIH1cblxuICBjbG9uZSgpIHtcbiAgICBjb25zdCBjbG9uZWRFbGVtZW50ID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSh0cnVlKTtcblxuICAgIGNvbnN0IHNlbGVjdEVsZW1lbnRzID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJzZWxlY3RcIik7XG4gICAgY29uc3QgY2xvbmVkU2VsZWN0RWxlbWVudHMgPSBjbG9uZWRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJzZWxlY3RcIik7XG5cbiAgICBmb3IgKGNvbnN0IFtpbmRleCwgc291cmNlXSBvZiBzZWxlY3RFbGVtZW50cy5lbnRyaWVzKCkpIHtcbiAgICAgIGNvbnN0IGNsb25lID0gY2xvbmVkU2VsZWN0RWxlbWVudHNbaW5kZXhdO1xuICAgICAgZm9yIChjb25zdCBvcHRpb24gb2YgY2xvbmUuc2VsZWN0ZWRPcHRpb25zKSBvcHRpb24uc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIHNvdXJjZS5zZWxlY3RlZE9wdGlvbnMpIGNsb25lLm9wdGlvbnNbb3B0aW9uLmluZGV4XS5zZWxlY3RlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBjbG9uZWRQYXNzd29yZElucHV0IG9mIGNsb25lZEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cInBhc3N3b3JkXCJdJykpIHtcbiAgICAgIGNsb25lZFBhc3N3b3JkSW5wdXQudmFsdWUgPSBcIlwiO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgUGFnZVNuYXBzaG90KHRoaXMuZG9jdW1lbnRFbGVtZW50LCBjbG9uZWRFbGVtZW50LCB0aGlzLmhlYWRTbmFwc2hvdClcbiAgfVxuXG4gIGdldCBsYW5nKCkge1xuICAgIHJldHVybiB0aGlzLmRvY3VtZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJsYW5nXCIpXG4gIH1cblxuICBnZXQgaGVhZEVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGVhZFNuYXBzaG90LmVsZW1lbnRcbiAgfVxuXG4gIGdldCByb290TG9jYXRpb24oKSB7XG4gICAgY29uc3Qgcm9vdCA9IHRoaXMuZ2V0U2V0dGluZyhcInJvb3RcIikgPz8gXCIvXCI7XG4gICAgcmV0dXJuIGV4cGFuZFVSTChyb290KVxuICB9XG5cbiAgZ2V0IGNhY2hlQ29udHJvbFZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLmdldFNldHRpbmcoXCJjYWNoZS1jb250cm9sXCIpXG4gIH1cblxuICBnZXQgaXNQcmV2aWV3YWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jYWNoZUNvbnRyb2xWYWx1ZSAhPSBcIm5vLXByZXZpZXdcIlxuICB9XG5cbiAgZ2V0IGlzQ2FjaGVhYmxlKCkge1xuICAgIHJldHVybiB0aGlzLmNhY2hlQ29udHJvbFZhbHVlICE9IFwibm8tY2FjaGVcIlxuICB9XG5cbiAgZ2V0IGlzVmlzaXRhYmxlKCkge1xuICAgIHJldHVybiB0aGlzLmdldFNldHRpbmcoXCJ2aXNpdC1jb250cm9sXCIpICE9IFwicmVsb2FkXCJcbiAgfVxuXG4gIGdldCBwcmVmZXJzVmlld1RyYW5zaXRpb25zKCkge1xuICAgIGNvbnN0IHZpZXdUcmFuc2l0aW9uRW5hYmxlZCA9IHRoaXMuZ2V0U2V0dGluZyhcInZpZXctdHJhbnNpdGlvblwiKSA9PT0gXCJ0cnVlXCIgfHwgdGhpcy5oZWFkU25hcHNob3QuZ2V0TWV0YVZhbHVlKFwidmlldy10cmFuc2l0aW9uXCIpID09PSBcInNhbWUtb3JpZ2luXCI7XG4gICAgcmV0dXJuIHZpZXdUcmFuc2l0aW9uRW5hYmxlZCAmJiAhd2luZG93Lm1hdGNoTWVkaWEoXCIocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjogcmVkdWNlKVwiKS5tYXRjaGVzXG4gIH1cblxuICBnZXQgc2hvdWxkTW9ycGhQYWdlKCkge1xuICAgIHJldHVybiB0aGlzLmdldFNldHRpbmcoXCJyZWZyZXNoLW1ldGhvZFwiKSA9PT0gXCJtb3JwaFwiXG4gIH1cblxuICBnZXQgc2hvdWxkUHJlc2VydmVTY3JvbGxQb3NpdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRTZXR0aW5nKFwicmVmcmVzaC1zY3JvbGxcIikgPT09IFwicHJlc2VydmVcIlxuICB9XG5cbiAgLy8gUHJpdmF0ZVxuXG4gIGdldFNldHRpbmcobmFtZSkge1xuICAgIHJldHVybiB0aGlzLmhlYWRTbmFwc2hvdC5nZXRNZXRhVmFsdWUoYHR1cmJvLSR7bmFtZX1gKVxuICB9XG59XG5cbmNsYXNzIFZpZXdUcmFuc2l0aW9uZXIge1xuICAjdmlld1RyYW5zaXRpb25TdGFydGVkID0gZmFsc2VcbiAgI2xhc3RPcGVyYXRpb24gPSBQcm9taXNlLnJlc29sdmUoKVxuXG4gIHJlbmRlckNoYW5nZSh1c2VWaWV3VHJhbnNpdGlvbiwgcmVuZGVyKSB7XG4gICAgaWYgKHVzZVZpZXdUcmFuc2l0aW9uICYmIHRoaXMudmlld1RyYW5zaXRpb25zQXZhaWxhYmxlICYmICF0aGlzLiN2aWV3VHJhbnNpdGlvblN0YXJ0ZWQpIHtcbiAgICAgIHRoaXMuI3ZpZXdUcmFuc2l0aW9uU3RhcnRlZCA9IHRydWU7XG4gICAgICB0aGlzLiNsYXN0T3BlcmF0aW9uID0gdGhpcy4jbGFzdE9wZXJhdGlvbi50aGVuKGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgZG9jdW1lbnQuc3RhcnRWaWV3VHJhbnNpdGlvbihyZW5kZXIpLmZpbmlzaGVkO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuI2xhc3RPcGVyYXRpb24gPSB0aGlzLiNsYXN0T3BlcmF0aW9uLnRoZW4ocmVuZGVyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy4jbGFzdE9wZXJhdGlvblxuICB9XG5cbiAgZ2V0IHZpZXdUcmFuc2l0aW9uc0F2YWlsYWJsZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuc3RhcnRWaWV3VHJhbnNpdGlvblxuICB9XG59XG5cbmNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xuICBhY3Rpb246IFwiYWR2YW5jZVwiLFxuICBoaXN0b3J5Q2hhbmdlZDogZmFsc2UsXG4gIHZpc2l0Q2FjaGVkU25hcHNob3Q6ICgpID0+IHt9LFxuICB3aWxsUmVuZGVyOiB0cnVlLFxuICB1cGRhdGVIaXN0b3J5OiB0cnVlLFxuICBzaG91bGRDYWNoZVNuYXBzaG90OiB0cnVlLFxuICBhY2NlcHRzU3RyZWFtUmVzcG9uc2U6IGZhbHNlXG59O1xuXG5jb25zdCBUaW1pbmdNZXRyaWMgPSB7XG4gIHZpc2l0U3RhcnQ6IFwidmlzaXRTdGFydFwiLFxuICByZXF1ZXN0U3RhcnQ6IFwicmVxdWVzdFN0YXJ0XCIsXG4gIHJlcXVlc3RFbmQ6IFwicmVxdWVzdEVuZFwiLFxuICB2aXNpdEVuZDogXCJ2aXNpdEVuZFwiXG59O1xuXG5jb25zdCBWaXNpdFN0YXRlID0ge1xuICBpbml0aWFsaXplZDogXCJpbml0aWFsaXplZFwiLFxuICBzdGFydGVkOiBcInN0YXJ0ZWRcIixcbiAgY2FuY2VsZWQ6IFwiY2FuY2VsZWRcIixcbiAgZmFpbGVkOiBcImZhaWxlZFwiLFxuICBjb21wbGV0ZWQ6IFwiY29tcGxldGVkXCJcbn07XG5cbmNvbnN0IFN5c3RlbVN0YXR1c0NvZGUgPSB7XG4gIG5ldHdvcmtGYWlsdXJlOiAwLFxuICB0aW1lb3V0RmFpbHVyZTogLTEsXG4gIGNvbnRlbnRUeXBlTWlzbWF0Y2g6IC0yXG59O1xuXG5jb25zdCBEaXJlY3Rpb24gPSB7XG4gIGFkdmFuY2U6IFwiZm9yd2FyZFwiLFxuICByZXN0b3JlOiBcImJhY2tcIixcbiAgcmVwbGFjZTogXCJub25lXCJcbn07XG5cbmNsYXNzIFZpc2l0IHtcbiAgaWRlbnRpZmllciA9IHV1aWQoKSAvLyBSZXF1aXJlZCBieSB0dXJiby1pb3NcbiAgdGltaW5nTWV0cmljcyA9IHt9XG5cbiAgZm9sbG93ZWRSZWRpcmVjdCA9IGZhbHNlXG4gIGhpc3RvcnlDaGFuZ2VkID0gZmFsc2VcbiAgc2Nyb2xsZWQgPSBmYWxzZVxuICBzaG91bGRDYWNoZVNuYXBzaG90ID0gdHJ1ZVxuICBhY2NlcHRzU3RyZWFtUmVzcG9uc2UgPSBmYWxzZVxuICBzbmFwc2hvdENhY2hlZCA9IGZhbHNlXG4gIHN0YXRlID0gVmlzaXRTdGF0ZS5pbml0aWFsaXplZFxuICB2aWV3VHJhbnNpdGlvbmVyID0gbmV3IFZpZXdUcmFuc2l0aW9uZXIoKVxuXG4gIGNvbnN0cnVjdG9yKGRlbGVnYXRlLCBsb2NhdGlvbiwgcmVzdG9yYXRpb25JZGVudGlmaWVyLCBvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gICAgdGhpcy5sb2NhdGlvbiA9IGxvY2F0aW9uO1xuICAgIHRoaXMucmVzdG9yYXRpb25JZGVudGlmaWVyID0gcmVzdG9yYXRpb25JZGVudGlmaWVyIHx8IHV1aWQoKTtcblxuICAgIGNvbnN0IHtcbiAgICAgIGFjdGlvbixcbiAgICAgIGhpc3RvcnlDaGFuZ2VkLFxuICAgICAgcmVmZXJyZXIsXG4gICAgICBzbmFwc2hvdCxcbiAgICAgIHNuYXBzaG90SFRNTCxcbiAgICAgIHJlc3BvbnNlLFxuICAgICAgdmlzaXRDYWNoZWRTbmFwc2hvdCxcbiAgICAgIHdpbGxSZW5kZXIsXG4gICAgICB1cGRhdGVIaXN0b3J5LFxuICAgICAgc2hvdWxkQ2FjaGVTbmFwc2hvdCxcbiAgICAgIGFjY2VwdHNTdHJlYW1SZXNwb25zZSxcbiAgICAgIGRpcmVjdGlvblxuICAgIH0gPSB7XG4gICAgICAuLi5kZWZhdWx0T3B0aW9ucyxcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9O1xuICAgIHRoaXMuYWN0aW9uID0gYWN0aW9uO1xuICAgIHRoaXMuaGlzdG9yeUNoYW5nZWQgPSBoaXN0b3J5Q2hhbmdlZDtcbiAgICB0aGlzLnJlZmVycmVyID0gcmVmZXJyZXI7XG4gICAgdGhpcy5zbmFwc2hvdCA9IHNuYXBzaG90O1xuICAgIHRoaXMuc25hcHNob3RIVE1MID0gc25hcHNob3RIVE1MO1xuICAgIHRoaXMucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICB0aGlzLmlzU2FtZVBhZ2UgPSB0aGlzLmRlbGVnYXRlLmxvY2F0aW9uV2l0aEFjdGlvbklzU2FtZVBhZ2UodGhpcy5sb2NhdGlvbiwgdGhpcy5hY3Rpb24pO1xuICAgIHRoaXMuaXNQYWdlUmVmcmVzaCA9IHRoaXMudmlldy5pc1BhZ2VSZWZyZXNoKHRoaXMpO1xuICAgIHRoaXMudmlzaXRDYWNoZWRTbmFwc2hvdCA9IHZpc2l0Q2FjaGVkU25hcHNob3Q7XG4gICAgdGhpcy53aWxsUmVuZGVyID0gd2lsbFJlbmRlcjtcbiAgICB0aGlzLnVwZGF0ZUhpc3RvcnkgPSB1cGRhdGVIaXN0b3J5O1xuICAgIHRoaXMuc2Nyb2xsZWQgPSAhd2lsbFJlbmRlcjtcbiAgICB0aGlzLnNob3VsZENhY2hlU25hcHNob3QgPSBzaG91bGRDYWNoZVNuYXBzaG90O1xuICAgIHRoaXMuYWNjZXB0c1N0cmVhbVJlc3BvbnNlID0gYWNjZXB0c1N0cmVhbVJlc3BvbnNlO1xuICAgIHRoaXMuZGlyZWN0aW9uID0gZGlyZWN0aW9uIHx8IERpcmVjdGlvblthY3Rpb25dO1xuICB9XG5cbiAgZ2V0IGFkYXB0ZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGVsZWdhdGUuYWRhcHRlclxuICB9XG5cbiAgZ2V0IHZpZXcoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGVsZWdhdGUudmlld1xuICB9XG5cbiAgZ2V0IGhpc3RvcnkoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGVsZWdhdGUuaGlzdG9yeVxuICB9XG5cbiAgZ2V0IHJlc3RvcmF0aW9uRGF0YSgpIHtcbiAgICByZXR1cm4gdGhpcy5oaXN0b3J5LmdldFJlc3RvcmF0aW9uRGF0YUZvcklkZW50aWZpZXIodGhpcy5yZXN0b3JhdGlvbklkZW50aWZpZXIpXG4gIH1cblxuICBnZXQgc2lsZW50KCkge1xuICAgIHJldHVybiB0aGlzLmlzU2FtZVBhZ2VcbiAgfVxuXG4gIHN0YXJ0KCkge1xuICAgIGlmICh0aGlzLnN0YXRlID09IFZpc2l0U3RhdGUuaW5pdGlhbGl6ZWQpIHtcbiAgICAgIHRoaXMucmVjb3JkVGltaW5nTWV0cmljKFRpbWluZ01ldHJpYy52aXNpdFN0YXJ0KTtcbiAgICAgIHRoaXMuc3RhdGUgPSBWaXNpdFN0YXRlLnN0YXJ0ZWQ7XG4gICAgICB0aGlzLmFkYXB0ZXIudmlzaXRTdGFydGVkKHRoaXMpO1xuICAgICAgdGhpcy5kZWxlZ2F0ZS52aXNpdFN0YXJ0ZWQodGhpcyk7XG4gICAgfVxuICB9XG5cbiAgY2FuY2VsKCkge1xuICAgIGlmICh0aGlzLnN0YXRlID09IFZpc2l0U3RhdGUuc3RhcnRlZCkge1xuICAgICAgaWYgKHRoaXMucmVxdWVzdCkge1xuICAgICAgICB0aGlzLnJlcXVlc3QuY2FuY2VsKCk7XG4gICAgICB9XG4gICAgICB0aGlzLmNhbmNlbFJlbmRlcigpO1xuICAgICAgdGhpcy5zdGF0ZSA9IFZpc2l0U3RhdGUuY2FuY2VsZWQ7XG4gICAgfVxuICB9XG5cbiAgY29tcGxldGUoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUgPT0gVmlzaXRTdGF0ZS5zdGFydGVkKSB7XG4gICAgICB0aGlzLnJlY29yZFRpbWluZ01ldHJpYyhUaW1pbmdNZXRyaWMudmlzaXRFbmQpO1xuICAgICAgdGhpcy5hZGFwdGVyLnZpc2l0Q29tcGxldGVkKHRoaXMpO1xuICAgICAgdGhpcy5zdGF0ZSA9IFZpc2l0U3RhdGUuY29tcGxldGVkO1xuICAgICAgdGhpcy5mb2xsb3dSZWRpcmVjdCgpO1xuXG4gICAgICBpZiAoIXRoaXMuZm9sbG93ZWRSZWRpcmVjdCkge1xuICAgICAgICB0aGlzLmRlbGVnYXRlLnZpc2l0Q29tcGxldGVkKHRoaXMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZhaWwoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUgPT0gVmlzaXRTdGF0ZS5zdGFydGVkKSB7XG4gICAgICB0aGlzLnN0YXRlID0gVmlzaXRTdGF0ZS5mYWlsZWQ7XG4gICAgICB0aGlzLmFkYXB0ZXIudmlzaXRGYWlsZWQodGhpcyk7XG4gICAgICB0aGlzLmRlbGVnYXRlLnZpc2l0Q29tcGxldGVkKHRoaXMpO1xuICAgIH1cbiAgfVxuXG4gIGNoYW5nZUhpc3RvcnkoKSB7XG4gICAgaWYgKCF0aGlzLmhpc3RvcnlDaGFuZ2VkICYmIHRoaXMudXBkYXRlSGlzdG9yeSkge1xuICAgICAgY29uc3QgYWN0aW9uRm9ySGlzdG9yeSA9IHRoaXMubG9jYXRpb24uaHJlZiA9PT0gdGhpcy5yZWZlcnJlcj8uaHJlZiA/IFwicmVwbGFjZVwiIDogdGhpcy5hY3Rpb247XG4gICAgICBjb25zdCBtZXRob2QgPSBnZXRIaXN0b3J5TWV0aG9kRm9yQWN0aW9uKGFjdGlvbkZvckhpc3RvcnkpO1xuICAgICAgdGhpcy5oaXN0b3J5LnVwZGF0ZShtZXRob2QsIHRoaXMubG9jYXRpb24sIHRoaXMucmVzdG9yYXRpb25JZGVudGlmaWVyKTtcbiAgICAgIHRoaXMuaGlzdG9yeUNoYW5nZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGlzc3VlUmVxdWVzdCgpIHtcbiAgICBpZiAodGhpcy5oYXNQcmVsb2FkZWRSZXNwb25zZSgpKSB7XG4gICAgICB0aGlzLnNpbXVsYXRlUmVxdWVzdCgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5zaG91bGRJc3N1ZVJlcXVlc3QoKSAmJiAhdGhpcy5yZXF1ZXN0KSB7XG4gICAgICB0aGlzLnJlcXVlc3QgPSBuZXcgRmV0Y2hSZXF1ZXN0KHRoaXMsIEZldGNoTWV0aG9kLmdldCwgdGhpcy5sb2NhdGlvbik7XG4gICAgICB0aGlzLnJlcXVlc3QucGVyZm9ybSgpO1xuICAgIH1cbiAgfVxuXG4gIHNpbXVsYXRlUmVxdWVzdCgpIHtcbiAgICBpZiAodGhpcy5yZXNwb25zZSkge1xuICAgICAgdGhpcy5zdGFydFJlcXVlc3QoKTtcbiAgICAgIHRoaXMucmVjb3JkUmVzcG9uc2UoKTtcbiAgICAgIHRoaXMuZmluaXNoUmVxdWVzdCgpO1xuICAgIH1cbiAgfVxuXG4gIHN0YXJ0UmVxdWVzdCgpIHtcbiAgICB0aGlzLnJlY29yZFRpbWluZ01ldHJpYyhUaW1pbmdNZXRyaWMucmVxdWVzdFN0YXJ0KTtcbiAgICB0aGlzLmFkYXB0ZXIudmlzaXRSZXF1ZXN0U3RhcnRlZCh0aGlzKTtcbiAgfVxuXG4gIHJlY29yZFJlc3BvbnNlKHJlc3BvbnNlID0gdGhpcy5yZXNwb25zZSkge1xuICAgIHRoaXMucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICBpZiAocmVzcG9uc2UpIHtcbiAgICAgIGNvbnN0IHsgc3RhdHVzQ29kZSB9ID0gcmVzcG9uc2U7XG4gICAgICBpZiAoaXNTdWNjZXNzZnVsKHN0YXR1c0NvZGUpKSB7XG4gICAgICAgIHRoaXMuYWRhcHRlci52aXNpdFJlcXVlc3RDb21wbGV0ZWQodGhpcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmFkYXB0ZXIudmlzaXRSZXF1ZXN0RmFpbGVkV2l0aFN0YXR1c0NvZGUodGhpcywgc3RhdHVzQ29kZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZmluaXNoUmVxdWVzdCgpIHtcbiAgICB0aGlzLnJlY29yZFRpbWluZ01ldHJpYyhUaW1pbmdNZXRyaWMucmVxdWVzdEVuZCk7XG4gICAgdGhpcy5hZGFwdGVyLnZpc2l0UmVxdWVzdEZpbmlzaGVkKHRoaXMpO1xuICB9XG5cbiAgbG9hZFJlc3BvbnNlKCkge1xuICAgIGlmICh0aGlzLnJlc3BvbnNlKSB7XG4gICAgICBjb25zdCB7IHN0YXR1c0NvZGUsIHJlc3BvbnNlSFRNTCB9ID0gdGhpcy5yZXNwb25zZTtcbiAgICAgIHRoaXMucmVuZGVyKGFzeW5jICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkQ2FjaGVTbmFwc2hvdCkgdGhpcy5jYWNoZVNuYXBzaG90KCk7XG4gICAgICAgIGlmICh0aGlzLnZpZXcucmVuZGVyUHJvbWlzZSkgYXdhaXQgdGhpcy52aWV3LnJlbmRlclByb21pc2U7XG5cbiAgICAgICAgaWYgKGlzU3VjY2Vzc2Z1bChzdGF0dXNDb2RlKSAmJiByZXNwb25zZUhUTUwgIT0gbnVsbCkge1xuICAgICAgICAgIGNvbnN0IHNuYXBzaG90ID0gUGFnZVNuYXBzaG90LmZyb21IVE1MU3RyaW5nKHJlc3BvbnNlSFRNTCk7XG4gICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJQYWdlU25hcHNob3Qoc25hcHNob3QsIGZhbHNlKTtcblxuICAgICAgICAgIHRoaXMuYWRhcHRlci52aXNpdFJlbmRlcmVkKHRoaXMpO1xuICAgICAgICAgIHRoaXMuY29tcGxldGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnZpZXcucmVuZGVyRXJyb3IoUGFnZVNuYXBzaG90LmZyb21IVE1MU3RyaW5nKHJlc3BvbnNlSFRNTCksIHRoaXMpO1xuICAgICAgICAgIHRoaXMuYWRhcHRlci52aXNpdFJlbmRlcmVkKHRoaXMpO1xuICAgICAgICAgIHRoaXMuZmFpbCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBnZXRDYWNoZWRTbmFwc2hvdCgpIHtcbiAgICBjb25zdCBzbmFwc2hvdCA9IHRoaXMudmlldy5nZXRDYWNoZWRTbmFwc2hvdEZvckxvY2F0aW9uKHRoaXMubG9jYXRpb24pIHx8IHRoaXMuZ2V0UHJlbG9hZGVkU25hcHNob3QoKTtcblxuICAgIGlmIChzbmFwc2hvdCAmJiAoIWdldEFuY2hvcih0aGlzLmxvY2F0aW9uKSB8fCBzbmFwc2hvdC5oYXNBbmNob3IoZ2V0QW5jaG9yKHRoaXMubG9jYXRpb24pKSkpIHtcbiAgICAgIGlmICh0aGlzLmFjdGlvbiA9PSBcInJlc3RvcmVcIiB8fCBzbmFwc2hvdC5pc1ByZXZpZXdhYmxlKSB7XG4gICAgICAgIHJldHVybiBzbmFwc2hvdFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldFByZWxvYWRlZFNuYXBzaG90KCkge1xuICAgIGlmICh0aGlzLnNuYXBzaG90SFRNTCkge1xuICAgICAgcmV0dXJuIFBhZ2VTbmFwc2hvdC5mcm9tSFRNTFN0cmluZyh0aGlzLnNuYXBzaG90SFRNTClcbiAgICB9XG4gIH1cblxuICBoYXNDYWNoZWRTbmFwc2hvdCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDYWNoZWRTbmFwc2hvdCgpICE9IG51bGxcbiAgfVxuXG4gIGxvYWRDYWNoZWRTbmFwc2hvdCgpIHtcbiAgICBjb25zdCBzbmFwc2hvdCA9IHRoaXMuZ2V0Q2FjaGVkU25hcHNob3QoKTtcbiAgICBpZiAoc25hcHNob3QpIHtcbiAgICAgIGNvbnN0IGlzUHJldmlldyA9IHRoaXMuc2hvdWxkSXNzdWVSZXF1ZXN0KCk7XG4gICAgICB0aGlzLnJlbmRlcihhc3luYyAoKSA9PiB7XG4gICAgICAgIHRoaXMuY2FjaGVTbmFwc2hvdCgpO1xuICAgICAgICBpZiAodGhpcy5pc1NhbWVQYWdlIHx8IHRoaXMuaXNQYWdlUmVmcmVzaCkge1xuICAgICAgICAgIHRoaXMuYWRhcHRlci52aXNpdFJlbmRlcmVkKHRoaXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh0aGlzLnZpZXcucmVuZGVyUHJvbWlzZSkgYXdhaXQgdGhpcy52aWV3LnJlbmRlclByb21pc2U7XG5cbiAgICAgICAgICBhd2FpdCB0aGlzLnJlbmRlclBhZ2VTbmFwc2hvdChzbmFwc2hvdCwgaXNQcmV2aWV3KTtcblxuICAgICAgICAgIHRoaXMuYWRhcHRlci52aXNpdFJlbmRlcmVkKHRoaXMpO1xuICAgICAgICAgIGlmICghaXNQcmV2aWV3KSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBsZXRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBmb2xsb3dSZWRpcmVjdCgpIHtcbiAgICBpZiAodGhpcy5yZWRpcmVjdGVkVG9Mb2NhdGlvbiAmJiAhdGhpcy5mb2xsb3dlZFJlZGlyZWN0ICYmIHRoaXMucmVzcG9uc2U/LnJlZGlyZWN0ZWQpIHtcbiAgICAgIHRoaXMuYWRhcHRlci52aXNpdFByb3Bvc2VkVG9Mb2NhdGlvbih0aGlzLnJlZGlyZWN0ZWRUb0xvY2F0aW9uLCB7XG4gICAgICAgIGFjdGlvbjogXCJyZXBsYWNlXCIsXG4gICAgICAgIHJlc3BvbnNlOiB0aGlzLnJlc3BvbnNlLFxuICAgICAgICBzaG91bGRDYWNoZVNuYXBzaG90OiBmYWxzZSxcbiAgICAgICAgd2lsbFJlbmRlcjogZmFsc2VcbiAgICAgIH0pO1xuICAgICAgdGhpcy5mb2xsb3dlZFJlZGlyZWN0ID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBnb1RvU2FtZVBhZ2VBbmNob3IoKSB7XG4gICAgaWYgKHRoaXMuaXNTYW1lUGFnZSkge1xuICAgICAgdGhpcy5yZW5kZXIoYXN5bmMgKCkgPT4ge1xuICAgICAgICB0aGlzLmNhY2hlU25hcHNob3QoKTtcbiAgICAgICAgdGhpcy5wZXJmb3JtU2Nyb2xsKCk7XG4gICAgICAgIHRoaXMuY2hhbmdlSGlzdG9yeSgpO1xuICAgICAgICB0aGlzLmFkYXB0ZXIudmlzaXRSZW5kZXJlZCh0aGlzKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIEZldGNoIHJlcXVlc3QgZGVsZWdhdGVcblxuICBwcmVwYXJlUmVxdWVzdChyZXF1ZXN0KSB7XG4gICAgaWYgKHRoaXMuYWNjZXB0c1N0cmVhbVJlc3BvbnNlKSB7XG4gICAgICByZXF1ZXN0LmFjY2VwdFJlc3BvbnNlVHlwZShTdHJlYW1NZXNzYWdlLmNvbnRlbnRUeXBlKTtcbiAgICB9XG4gIH1cblxuICByZXF1ZXN0U3RhcnRlZCgpIHtcbiAgICB0aGlzLnN0YXJ0UmVxdWVzdCgpO1xuICB9XG5cbiAgcmVxdWVzdFByZXZlbnRlZEhhbmRsaW5nUmVzcG9uc2UoX3JlcXVlc3QsIF9yZXNwb25zZSkge31cblxuICBhc3luYyByZXF1ZXN0U3VjY2VlZGVkV2l0aFJlc3BvbnNlKHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gICAgY29uc3QgcmVzcG9uc2VIVE1MID0gYXdhaXQgcmVzcG9uc2UucmVzcG9uc2VIVE1MO1xuICAgIGNvbnN0IHsgcmVkaXJlY3RlZCwgc3RhdHVzQ29kZSB9ID0gcmVzcG9uc2U7XG4gICAgaWYgKHJlc3BvbnNlSFRNTCA9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMucmVjb3JkUmVzcG9uc2Uoe1xuICAgICAgICBzdGF0dXNDb2RlOiBTeXN0ZW1TdGF0dXNDb2RlLmNvbnRlbnRUeXBlTWlzbWF0Y2gsXG4gICAgICAgIHJlZGlyZWN0ZWRcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlZGlyZWN0ZWRUb0xvY2F0aW9uID0gcmVzcG9uc2UucmVkaXJlY3RlZCA/IHJlc3BvbnNlLmxvY2F0aW9uIDogdW5kZWZpbmVkO1xuICAgICAgdGhpcy5yZWNvcmRSZXNwb25zZSh7IHN0YXR1c0NvZGU6IHN0YXR1c0NvZGUsIHJlc3BvbnNlSFRNTCwgcmVkaXJlY3RlZCB9KTtcbiAgICB9XG4gIH1cblxuICBhc3luYyByZXF1ZXN0RmFpbGVkV2l0aFJlc3BvbnNlKHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gICAgY29uc3QgcmVzcG9uc2VIVE1MID0gYXdhaXQgcmVzcG9uc2UucmVzcG9uc2VIVE1MO1xuICAgIGNvbnN0IHsgcmVkaXJlY3RlZCwgc3RhdHVzQ29kZSB9ID0gcmVzcG9uc2U7XG4gICAgaWYgKHJlc3BvbnNlSFRNTCA9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMucmVjb3JkUmVzcG9uc2Uoe1xuICAgICAgICBzdGF0dXNDb2RlOiBTeXN0ZW1TdGF0dXNDb2RlLmNvbnRlbnRUeXBlTWlzbWF0Y2gsXG4gICAgICAgIHJlZGlyZWN0ZWRcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlY29yZFJlc3BvbnNlKHsgc3RhdHVzQ29kZTogc3RhdHVzQ29kZSwgcmVzcG9uc2VIVE1MLCByZWRpcmVjdGVkIH0pO1xuICAgIH1cbiAgfVxuXG4gIHJlcXVlc3RFcnJvcmVkKF9yZXF1ZXN0LCBfZXJyb3IpIHtcbiAgICB0aGlzLnJlY29yZFJlc3BvbnNlKHtcbiAgICAgIHN0YXR1c0NvZGU6IFN5c3RlbVN0YXR1c0NvZGUubmV0d29ya0ZhaWx1cmUsXG4gICAgICByZWRpcmVjdGVkOiBmYWxzZVxuICAgIH0pO1xuICB9XG5cbiAgcmVxdWVzdEZpbmlzaGVkKCkge1xuICAgIHRoaXMuZmluaXNoUmVxdWVzdCgpO1xuICB9XG5cbiAgLy8gU2Nyb2xsaW5nXG5cbiAgcGVyZm9ybVNjcm9sbCgpIHtcbiAgICBpZiAoIXRoaXMuc2Nyb2xsZWQgJiYgIXRoaXMudmlldy5mb3JjZVJlbG9hZGVkICYmICF0aGlzLnZpZXcuc2hvdWxkUHJlc2VydmVTY3JvbGxQb3NpdGlvbih0aGlzKSkge1xuICAgICAgaWYgKHRoaXMuYWN0aW9uID09IFwicmVzdG9yZVwiKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsVG9SZXN0b3JlZFBvc2l0aW9uKCkgfHwgdGhpcy5zY3JvbGxUb0FuY2hvcigpIHx8IHRoaXMudmlldy5zY3JvbGxUb1RvcCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zY3JvbGxUb0FuY2hvcigpIHx8IHRoaXMudmlldy5zY3JvbGxUb1RvcCgpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaXNTYW1lUGFnZSkge1xuICAgICAgICB0aGlzLmRlbGVnYXRlLnZpc2l0U2Nyb2xsZWRUb1NhbWVQYWdlTG9jYXRpb24odGhpcy52aWV3Lmxhc3RSZW5kZXJlZExvY2F0aW9uLCB0aGlzLmxvY2F0aW9uKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zY3JvbGxlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgc2Nyb2xsVG9SZXN0b3JlZFBvc2l0aW9uKCkge1xuICAgIGNvbnN0IHsgc2Nyb2xsUG9zaXRpb24gfSA9IHRoaXMucmVzdG9yYXRpb25EYXRhO1xuICAgIGlmIChzY3JvbGxQb3NpdGlvbikge1xuICAgICAgdGhpcy52aWV3LnNjcm9sbFRvUG9zaXRpb24oc2Nyb2xsUG9zaXRpb24pO1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cblxuICBzY3JvbGxUb0FuY2hvcigpIHtcbiAgICBjb25zdCBhbmNob3IgPSBnZXRBbmNob3IodGhpcy5sb2NhdGlvbik7XG4gICAgaWYgKGFuY2hvciAhPSBudWxsKSB7XG4gICAgICB0aGlzLnZpZXcuc2Nyb2xsVG9BbmNob3IoYW5jaG9yKTtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgLy8gSW5zdHJ1bWVudGF0aW9uXG5cbiAgcmVjb3JkVGltaW5nTWV0cmljKG1ldHJpYykge1xuICAgIHRoaXMudGltaW5nTWV0cmljc1ttZXRyaWNdID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gIH1cblxuICBnZXRUaW1pbmdNZXRyaWNzKCkge1xuICAgIHJldHVybiB7IC4uLnRoaXMudGltaW5nTWV0cmljcyB9XG4gIH1cblxuICAvLyBQcml2YXRlXG5cbiAgaGFzUHJlbG9hZGVkUmVzcG9uc2UoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0aGlzLnJlc3BvbnNlID09IFwib2JqZWN0XCJcbiAgfVxuXG4gIHNob3VsZElzc3VlUmVxdWVzdCgpIHtcbiAgICBpZiAodGhpcy5pc1NhbWVQYWdlKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9IGVsc2UgaWYgKHRoaXMuYWN0aW9uID09IFwicmVzdG9yZVwiKSB7XG4gICAgICByZXR1cm4gIXRoaXMuaGFzQ2FjaGVkU25hcHNob3QoKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy53aWxsUmVuZGVyXG4gICAgfVxuICB9XG5cbiAgY2FjaGVTbmFwc2hvdCgpIHtcbiAgICBpZiAoIXRoaXMuc25hcHNob3RDYWNoZWQpIHtcbiAgICAgIHRoaXMudmlldy5jYWNoZVNuYXBzaG90KHRoaXMuc25hcHNob3QpLnRoZW4oKHNuYXBzaG90KSA9PiBzbmFwc2hvdCAmJiB0aGlzLnZpc2l0Q2FjaGVkU25hcHNob3Qoc25hcHNob3QpKTtcbiAgICAgIHRoaXMuc25hcHNob3RDYWNoZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlbmRlcihjYWxsYmFjaykge1xuICAgIHRoaXMuY2FuY2VsUmVuZGVyKCk7XG4gICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIHRoaXMuZnJhbWUgPVxuICAgICAgICBkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09IFwiaGlkZGVuXCIgPyBzZXRUaW1lb3V0KCgpID0+IHJlc29sdmUoKSwgMCkgOiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gcmVzb2x2ZSgpKTtcbiAgICB9KTtcbiAgICBhd2FpdCBjYWxsYmFjaygpO1xuICAgIGRlbGV0ZSB0aGlzLmZyYW1lO1xuICB9XG5cbiAgYXN5bmMgcmVuZGVyUGFnZVNuYXBzaG90KHNuYXBzaG90LCBpc1ByZXZpZXcpIHtcbiAgICBhd2FpdCB0aGlzLnZpZXdUcmFuc2l0aW9uZXIucmVuZGVyQ2hhbmdlKHRoaXMudmlldy5zaG91bGRUcmFuc2l0aW9uVG8oc25hcHNob3QpLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB0aGlzLnZpZXcucmVuZGVyUGFnZShzbmFwc2hvdCwgaXNQcmV2aWV3LCB0aGlzLndpbGxSZW5kZXIsIHRoaXMpO1xuICAgICAgdGhpcy5wZXJmb3JtU2Nyb2xsKCk7XG4gICAgfSk7XG4gIH1cblxuICBjYW5jZWxSZW5kZXIoKSB7XG4gICAgaWYgKHRoaXMuZnJhbWUpIHtcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuZnJhbWUpO1xuICAgICAgZGVsZXRlIHRoaXMuZnJhbWU7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGlzU3VjY2Vzc2Z1bChzdGF0dXNDb2RlKSB7XG4gIHJldHVybiBzdGF0dXNDb2RlID49IDIwMCAmJiBzdGF0dXNDb2RlIDwgMzAwXG59XG5cbmNsYXNzIEJyb3dzZXJBZGFwdGVyIHtcbiAgcHJvZ3Jlc3NCYXIgPSBuZXcgUHJvZ3Jlc3NCYXIoKVxuXG4gIGNvbnN0cnVjdG9yKHNlc3Npb24pIHtcbiAgICB0aGlzLnNlc3Npb24gPSBzZXNzaW9uO1xuICB9XG5cbiAgdmlzaXRQcm9wb3NlZFRvTG9jYXRpb24obG9jYXRpb24sIG9wdGlvbnMpIHtcbiAgICBpZiAobG9jYXRpb25Jc1Zpc2l0YWJsZShsb2NhdGlvbiwgdGhpcy5uYXZpZ2F0b3Iucm9vdExvY2F0aW9uKSkge1xuICAgICAgdGhpcy5uYXZpZ2F0b3Iuc3RhcnRWaXNpdChsb2NhdGlvbiwgb3B0aW9ucz8ucmVzdG9yYXRpb25JZGVudGlmaWVyIHx8IHV1aWQoKSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gbG9jYXRpb24udG9TdHJpbmcoKTtcbiAgICB9XG4gIH1cblxuICB2aXNpdFN0YXJ0ZWQodmlzaXQpIHtcbiAgICB0aGlzLmxvY2F0aW9uID0gdmlzaXQubG9jYXRpb247XG4gICAgdGhpcy5yZWRpcmVjdGVkVG9Mb2NhdGlvbiA9IG51bGw7XG5cbiAgICB2aXNpdC5sb2FkQ2FjaGVkU25hcHNob3QoKTtcbiAgICB2aXNpdC5pc3N1ZVJlcXVlc3QoKTtcbiAgICB2aXNpdC5nb1RvU2FtZVBhZ2VBbmNob3IoKTtcbiAgfVxuXG4gIHZpc2l0UmVxdWVzdFN0YXJ0ZWQodmlzaXQpIHtcbiAgICB0aGlzLnByb2dyZXNzQmFyLnNldFZhbHVlKDApO1xuICAgIGlmICh2aXNpdC5oYXNDYWNoZWRTbmFwc2hvdCgpIHx8IHZpc2l0LmFjdGlvbiAhPSBcInJlc3RvcmVcIikge1xuICAgICAgdGhpcy5zaG93VmlzaXRQcm9ncmVzc0JhckFmdGVyRGVsYXkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zaG93UHJvZ3Jlc3NCYXIoKTtcbiAgICB9XG4gIH1cblxuICB2aXNpdFJlcXVlc3RDb21wbGV0ZWQodmlzaXQpIHtcbiAgICB2aXNpdC5sb2FkUmVzcG9uc2UoKTtcblxuICAgIGlmICh2aXNpdC5yZXNwb25zZS5yZWRpcmVjdGVkKSB7XG4gICAgICB0aGlzLnJlZGlyZWN0ZWRUb0xvY2F0aW9uID0gdmlzaXQucmVkaXJlY3RlZFRvTG9jYXRpb247XG4gICAgfVxuICB9XG5cbiAgdmlzaXRSZXF1ZXN0RmFpbGVkV2l0aFN0YXR1c0NvZGUodmlzaXQsIHN0YXR1c0NvZGUpIHtcbiAgICBzd2l0Y2ggKHN0YXR1c0NvZGUpIHtcbiAgICAgIGNhc2UgU3lzdGVtU3RhdHVzQ29kZS5uZXR3b3JrRmFpbHVyZTpcbiAgICAgIGNhc2UgU3lzdGVtU3RhdHVzQ29kZS50aW1lb3V0RmFpbHVyZTpcbiAgICAgIGNhc2UgU3lzdGVtU3RhdHVzQ29kZS5jb250ZW50VHlwZU1pc21hdGNoOlxuICAgICAgICByZXR1cm4gdGhpcy5yZWxvYWQoe1xuICAgICAgICAgIHJlYXNvbjogXCJyZXF1ZXN0X2ZhaWxlZFwiLFxuICAgICAgICAgIGNvbnRleHQ6IHtcbiAgICAgICAgICAgIHN0YXR1c0NvZGVcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdmlzaXQubG9hZFJlc3BvbnNlKClcbiAgICB9XG4gIH1cblxuICB2aXNpdFJlcXVlc3RGaW5pc2hlZChfdmlzaXQpIHt9XG5cbiAgdmlzaXRDb21wbGV0ZWQoX3Zpc2l0KSB7XG4gICAgdGhpcy5wcm9ncmVzc0Jhci5zZXRWYWx1ZSgxKTtcbiAgICB0aGlzLmhpZGVWaXNpdFByb2dyZXNzQmFyKCk7XG4gIH1cblxuICBwYWdlSW52YWxpZGF0ZWQocmVhc29uKSB7XG4gICAgdGhpcy5yZWxvYWQocmVhc29uKTtcbiAgfVxuXG4gIHZpc2l0RmFpbGVkKF92aXNpdCkge1xuICAgIHRoaXMucHJvZ3Jlc3NCYXIuc2V0VmFsdWUoMSk7XG4gICAgdGhpcy5oaWRlVmlzaXRQcm9ncmVzc0JhcigpO1xuICB9XG5cbiAgdmlzaXRSZW5kZXJlZChfdmlzaXQpIHt9XG5cbiAgLy8gTGluayBwcmVmZXRjaGluZ1xuXG4gIGxpbmtQcmVmZXRjaGluZ0lzRW5hYmxlZEZvckxvY2F0aW9uKGxvY2F0aW9uKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIC8vIEZvcm0gU3VibWlzc2lvbiBEZWxlZ2F0ZVxuXG4gIGZvcm1TdWJtaXNzaW9uU3RhcnRlZChfZm9ybVN1Ym1pc3Npb24pIHtcbiAgICB0aGlzLnByb2dyZXNzQmFyLnNldFZhbHVlKDApO1xuICAgIHRoaXMuc2hvd0Zvcm1Qcm9ncmVzc0JhckFmdGVyRGVsYXkoKTtcbiAgfVxuXG4gIGZvcm1TdWJtaXNzaW9uRmluaXNoZWQoX2Zvcm1TdWJtaXNzaW9uKSB7XG4gICAgdGhpcy5wcm9ncmVzc0Jhci5zZXRWYWx1ZSgxKTtcbiAgICB0aGlzLmhpZGVGb3JtUHJvZ3Jlc3NCYXIoKTtcbiAgfVxuXG4gIC8vIFByaXZhdGVcblxuICBzaG93VmlzaXRQcm9ncmVzc0JhckFmdGVyRGVsYXkoKSB7XG4gICAgdGhpcy52aXNpdFByb2dyZXNzQmFyVGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KHRoaXMuc2hvd1Byb2dyZXNzQmFyLCB0aGlzLnNlc3Npb24ucHJvZ3Jlc3NCYXJEZWxheSk7XG4gIH1cblxuICBoaWRlVmlzaXRQcm9ncmVzc0JhcigpIHtcbiAgICB0aGlzLnByb2dyZXNzQmFyLmhpZGUoKTtcbiAgICBpZiAodGhpcy52aXNpdFByb2dyZXNzQmFyVGltZW91dCAhPSBudWxsKSB7XG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMudmlzaXRQcm9ncmVzc0JhclRpbWVvdXQpO1xuICAgICAgZGVsZXRlIHRoaXMudmlzaXRQcm9ncmVzc0JhclRpbWVvdXQ7XG4gICAgfVxuICB9XG5cbiAgc2hvd0Zvcm1Qcm9ncmVzc0JhckFmdGVyRGVsYXkoKSB7XG4gICAgaWYgKHRoaXMuZm9ybVByb2dyZXNzQmFyVGltZW91dCA9PSBudWxsKSB7XG4gICAgICB0aGlzLmZvcm1Qcm9ncmVzc0JhclRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCh0aGlzLnNob3dQcm9ncmVzc0JhciwgdGhpcy5zZXNzaW9uLnByb2dyZXNzQmFyRGVsYXkpO1xuICAgIH1cbiAgfVxuXG4gIGhpZGVGb3JtUHJvZ3Jlc3NCYXIoKSB7XG4gICAgdGhpcy5wcm9ncmVzc0Jhci5oaWRlKCk7XG4gICAgaWYgKHRoaXMuZm9ybVByb2dyZXNzQmFyVGltZW91dCAhPSBudWxsKSB7XG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuZm9ybVByb2dyZXNzQmFyVGltZW91dCk7XG4gICAgICBkZWxldGUgdGhpcy5mb3JtUHJvZ3Jlc3NCYXJUaW1lb3V0O1xuICAgIH1cbiAgfVxuXG4gIHNob3dQcm9ncmVzc0JhciA9ICgpID0+IHtcbiAgICB0aGlzLnByb2dyZXNzQmFyLnNob3coKTtcbiAgfVxuXG4gIHJlbG9hZChyZWFzb24pIHtcbiAgICBkaXNwYXRjaChcInR1cmJvOnJlbG9hZFwiLCB7IGRldGFpbDogcmVhc29uIH0pO1xuXG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAodGhpcy5yZWRpcmVjdGVkVG9Mb2NhdGlvbiB8fCB0aGlzLmxvY2F0aW9uKT8udG9TdHJpbmcoKSB8fCB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgfVxuXG4gIGdldCBuYXZpZ2F0b3IoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5uYXZpZ2F0b3JcbiAgfVxufVxuXG5jbGFzcyBDYWNoZU9ic2VydmVyIHtcbiAgc2VsZWN0b3IgPSBcIltkYXRhLXR1cmJvLXRlbXBvcmFyeV1cIlxuICBkZXByZWNhdGVkU2VsZWN0b3IgPSBcIltkYXRhLXR1cmJvLWNhY2hlPWZhbHNlXVwiXG5cbiAgc3RhcnRlZCA9IGZhbHNlXG5cbiAgc3RhcnQoKSB7XG4gICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XG4gICAgICBhZGRFdmVudExpc3RlbmVyKFwidHVyYm86YmVmb3JlLWNhY2hlXCIsIHRoaXMucmVtb3ZlVGVtcG9yYXJ5RWxlbWVudHMsIGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICBzdG9wKCkge1xuICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihcInR1cmJvOmJlZm9yZS1jYWNoZVwiLCB0aGlzLnJlbW92ZVRlbXBvcmFyeUVsZW1lbnRzLCBmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgcmVtb3ZlVGVtcG9yYXJ5RWxlbWVudHMgPSAoX2V2ZW50KSA9PiB7XG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMudGVtcG9yYXJ5RWxlbWVudHMpIHtcbiAgICAgIGVsZW1lbnQucmVtb3ZlKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHRlbXBvcmFyeUVsZW1lbnRzKCkge1xuICAgIHJldHVybiBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLnNlbGVjdG9yKSwgLi4udGhpcy50ZW1wb3JhcnlFbGVtZW50c1dpdGhEZXByZWNhdGlvbl1cbiAgfVxuXG4gIGdldCB0ZW1wb3JhcnlFbGVtZW50c1dpdGhEZXByZWNhdGlvbigpIHtcbiAgICBjb25zdCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5kZXByZWNhdGVkU2VsZWN0b3IpO1xuXG4gICAgaWYgKGVsZW1lbnRzLmxlbmd0aCkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgVGhlICR7dGhpcy5kZXByZWNhdGVkU2VsZWN0b3J9IHNlbGVjdG9yIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSB2ZXJzaW9uLiBVc2UgJHt0aGlzLnNlbGVjdG9yfSBpbnN0ZWFkLmBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFsuLi5lbGVtZW50c11cbiAgfVxufVxuXG5jbGFzcyBGcmFtZVJlZGlyZWN0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXNzaW9uLCBlbGVtZW50KSB7XG4gICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgIHRoaXMubGlua0ludGVyY2VwdG9yID0gbmV3IExpbmtJbnRlcmNlcHRvcih0aGlzLCBlbGVtZW50KTtcbiAgICB0aGlzLmZvcm1TdWJtaXRPYnNlcnZlciA9IG5ldyBGb3JtU3VibWl0T2JzZXJ2ZXIodGhpcywgZWxlbWVudCk7XG4gIH1cblxuICBzdGFydCgpIHtcbiAgICB0aGlzLmxpbmtJbnRlcmNlcHRvci5zdGFydCgpO1xuICAgIHRoaXMuZm9ybVN1Ym1pdE9ic2VydmVyLnN0YXJ0KCk7XG4gIH1cblxuICBzdG9wKCkge1xuICAgIHRoaXMubGlua0ludGVyY2VwdG9yLnN0b3AoKTtcbiAgICB0aGlzLmZvcm1TdWJtaXRPYnNlcnZlci5zdG9wKCk7XG4gIH1cblxuICAvLyBMaW5rIGludGVyY2VwdG9yIGRlbGVnYXRlXG5cbiAgc2hvdWxkSW50ZXJjZXB0TGlua0NsaWNrKGVsZW1lbnQsIF9sb2NhdGlvbiwgX2V2ZW50KSB7XG4gICAgcmV0dXJuIHRoaXMuI3Nob3VsZFJlZGlyZWN0KGVsZW1lbnQpXG4gIH1cblxuICBsaW5rQ2xpY2tJbnRlcmNlcHRlZChlbGVtZW50LCB1cmwsIGV2ZW50KSB7XG4gICAgY29uc3QgZnJhbWUgPSB0aGlzLiNmaW5kRnJhbWVFbGVtZW50KGVsZW1lbnQpO1xuICAgIGlmIChmcmFtZSkge1xuICAgICAgZnJhbWUuZGVsZWdhdGUubGlua0NsaWNrSW50ZXJjZXB0ZWQoZWxlbWVudCwgdXJsLCBldmVudCk7XG4gICAgfVxuICB9XG5cbiAgLy8gRm9ybSBzdWJtaXQgb2JzZXJ2ZXIgZGVsZWdhdGVcblxuICB3aWxsU3VibWl0Rm9ybShlbGVtZW50LCBzdWJtaXR0ZXIpIHtcbiAgICByZXR1cm4gKFxuICAgICAgZWxlbWVudC5jbG9zZXN0KFwidHVyYm8tZnJhbWVcIikgPT0gbnVsbCAmJlxuICAgICAgdGhpcy4jc2hvdWxkU3VibWl0KGVsZW1lbnQsIHN1Ym1pdHRlcikgJiZcbiAgICAgIHRoaXMuI3Nob3VsZFJlZGlyZWN0KGVsZW1lbnQsIHN1Ym1pdHRlcilcbiAgICApXG4gIH1cblxuICBmb3JtU3VibWl0dGVkKGVsZW1lbnQsIHN1Ym1pdHRlcikge1xuICAgIGNvbnN0IGZyYW1lID0gdGhpcy4jZmluZEZyYW1lRWxlbWVudChlbGVtZW50LCBzdWJtaXR0ZXIpO1xuICAgIGlmIChmcmFtZSkge1xuICAgICAgZnJhbWUuZGVsZWdhdGUuZm9ybVN1Ym1pdHRlZChlbGVtZW50LCBzdWJtaXR0ZXIpO1xuICAgIH1cbiAgfVxuXG4gICNzaG91bGRTdWJtaXQoZm9ybSwgc3VibWl0dGVyKSB7XG4gICAgY29uc3QgYWN0aW9uID0gZ2V0QWN0aW9uJDEoZm9ybSwgc3VibWl0dGVyKTtcbiAgICBjb25zdCBtZXRhID0gdGhpcy5lbGVtZW50Lm93bmVyRG9jdW1lbnQucXVlcnlTZWxlY3RvcihgbWV0YVtuYW1lPVwidHVyYm8tcm9vdFwiXWApO1xuICAgIGNvbnN0IHJvb3RMb2NhdGlvbiA9IGV4cGFuZFVSTChtZXRhPy5jb250ZW50ID8/IFwiL1wiKTtcblxuICAgIHJldHVybiB0aGlzLiNzaG91bGRSZWRpcmVjdChmb3JtLCBzdWJtaXR0ZXIpICYmIGxvY2F0aW9uSXNWaXNpdGFibGUoYWN0aW9uLCByb290TG9jYXRpb24pXG4gIH1cblxuICAjc2hvdWxkUmVkaXJlY3QoZWxlbWVudCwgc3VibWl0dGVyKSB7XG4gICAgY29uc3QgaXNOYXZpZ2F0YWJsZSA9XG4gICAgICBlbGVtZW50IGluc3RhbmNlb2YgSFRNTEZvcm1FbGVtZW50XG4gICAgICAgID8gdGhpcy5zZXNzaW9uLnN1Ym1pc3Npb25Jc05hdmlnYXRhYmxlKGVsZW1lbnQsIHN1Ym1pdHRlcilcbiAgICAgICAgOiB0aGlzLnNlc3Npb24uZWxlbWVudElzTmF2aWdhdGFibGUoZWxlbWVudCk7XG5cbiAgICBpZiAoaXNOYXZpZ2F0YWJsZSkge1xuICAgICAgY29uc3QgZnJhbWUgPSB0aGlzLiNmaW5kRnJhbWVFbGVtZW50KGVsZW1lbnQsIHN1Ym1pdHRlcik7XG4gICAgICByZXR1cm4gZnJhbWUgPyBmcmFtZSAhPSBlbGVtZW50LmNsb3Nlc3QoXCJ0dXJiby1mcmFtZVwiKSA6IGZhbHNlXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gICNmaW5kRnJhbWVFbGVtZW50KGVsZW1lbnQsIHN1Ym1pdHRlcikge1xuICAgIGNvbnN0IGlkID0gc3VibWl0dGVyPy5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLWZyYW1lXCIpIHx8IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS10dXJiby1mcmFtZVwiKTtcbiAgICBpZiAoaWQgJiYgaWQgIT0gXCJfdG9wXCIpIHtcbiAgICAgIGNvbnN0IGZyYW1lID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lkfTpub3QoW2Rpc2FibGVkXSlgKTtcbiAgICAgIGlmIChmcmFtZSBpbnN0YW5jZW9mIEZyYW1lRWxlbWVudCkge1xuICAgICAgICByZXR1cm4gZnJhbWVcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuY2xhc3MgSGlzdG9yeSB7XG4gIGxvY2F0aW9uXG4gIHJlc3RvcmF0aW9uSWRlbnRpZmllciA9IHV1aWQoKVxuICByZXN0b3JhdGlvbkRhdGEgPSB7fVxuICBzdGFydGVkID0gZmFsc2VcbiAgcGFnZUxvYWRlZCA9IGZhbHNlXG4gIGN1cnJlbnRJbmRleCA9IDBcblxuICBjb25zdHJ1Y3RvcihkZWxlZ2F0ZSkge1xuICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgfVxuXG4gIHN0YXJ0KCkge1xuICAgIGlmICghdGhpcy5zdGFydGVkKSB7XG4gICAgICBhZGRFdmVudExpc3RlbmVyKFwicG9wc3RhdGVcIiwgdGhpcy5vblBvcFN0YXRlLCBmYWxzZSk7XG4gICAgICBhZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCB0aGlzLm9uUGFnZUxvYWQsIGZhbHNlKTtcbiAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gaGlzdG9yeS5zdGF0ZT8udHVyYm8/LnJlc3RvcmF0aW9uSW5kZXggfHwgMDtcbiAgICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XG4gICAgICB0aGlzLnJlcGxhY2UobmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZikpO1xuICAgIH1cbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvcHN0YXRlXCIsIHRoaXMub25Qb3BTdGF0ZSwgZmFsc2UpO1xuICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgdGhpcy5vblBhZ2VMb2FkLCBmYWxzZSk7XG4gICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBwdXNoKGxvY2F0aW9uLCByZXN0b3JhdGlvbklkZW50aWZpZXIpIHtcbiAgICB0aGlzLnVwZGF0ZShoaXN0b3J5LnB1c2hTdGF0ZSwgbG9jYXRpb24sIHJlc3RvcmF0aW9uSWRlbnRpZmllcik7XG4gIH1cblxuICByZXBsYWNlKGxvY2F0aW9uLCByZXN0b3JhdGlvbklkZW50aWZpZXIpIHtcbiAgICB0aGlzLnVwZGF0ZShoaXN0b3J5LnJlcGxhY2VTdGF0ZSwgbG9jYXRpb24sIHJlc3RvcmF0aW9uSWRlbnRpZmllcik7XG4gIH1cblxuICB1cGRhdGUobWV0aG9kLCBsb2NhdGlvbiwgcmVzdG9yYXRpb25JZGVudGlmaWVyID0gdXVpZCgpKSB7XG4gICAgaWYgKG1ldGhvZCA9PT0gaGlzdG9yeS5wdXNoU3RhdGUpICsrdGhpcy5jdXJyZW50SW5kZXg7XG5cbiAgICBjb25zdCBzdGF0ZSA9IHsgdHVyYm86IHsgcmVzdG9yYXRpb25JZGVudGlmaWVyLCByZXN0b3JhdGlvbkluZGV4OiB0aGlzLmN1cnJlbnRJbmRleCB9IH07XG4gICAgbWV0aG9kLmNhbGwoaGlzdG9yeSwgc3RhdGUsIFwiXCIsIGxvY2F0aW9uLmhyZWYpO1xuICAgIHRoaXMubG9jYXRpb24gPSBsb2NhdGlvbjtcbiAgICB0aGlzLnJlc3RvcmF0aW9uSWRlbnRpZmllciA9IHJlc3RvcmF0aW9uSWRlbnRpZmllcjtcbiAgfVxuXG4gIC8vIFJlc3RvcmF0aW9uIGRhdGFcblxuICBnZXRSZXN0b3JhdGlvbkRhdGFGb3JJZGVudGlmaWVyKHJlc3RvcmF0aW9uSWRlbnRpZmllcikge1xuICAgIHJldHVybiB0aGlzLnJlc3RvcmF0aW9uRGF0YVtyZXN0b3JhdGlvbklkZW50aWZpZXJdIHx8IHt9XG4gIH1cblxuICB1cGRhdGVSZXN0b3JhdGlvbkRhdGEoYWRkaXRpb25hbERhdGEpIHtcbiAgICBjb25zdCB7IHJlc3RvcmF0aW9uSWRlbnRpZmllciB9ID0gdGhpcztcbiAgICBjb25zdCByZXN0b3JhdGlvbkRhdGEgPSB0aGlzLnJlc3RvcmF0aW9uRGF0YVtyZXN0b3JhdGlvbklkZW50aWZpZXJdO1xuICAgIHRoaXMucmVzdG9yYXRpb25EYXRhW3Jlc3RvcmF0aW9uSWRlbnRpZmllcl0gPSB7XG4gICAgICAuLi5yZXN0b3JhdGlvbkRhdGEsXG4gICAgICAuLi5hZGRpdGlvbmFsRGF0YVxuICAgIH07XG4gIH1cblxuICAvLyBTY3JvbGwgcmVzdG9yYXRpb25cblxuICBhc3N1bWVDb250cm9sT2ZTY3JvbGxSZXN0b3JhdGlvbigpIHtcbiAgICBpZiAoIXRoaXMucHJldmlvdXNTY3JvbGxSZXN0b3JhdGlvbikge1xuICAgICAgdGhpcy5wcmV2aW91c1Njcm9sbFJlc3RvcmF0aW9uID0gaGlzdG9yeS5zY3JvbGxSZXN0b3JhdGlvbiA/PyBcImF1dG9cIjtcbiAgICAgIGhpc3Rvcnkuc2Nyb2xsUmVzdG9yYXRpb24gPSBcIm1hbnVhbFwiO1xuICAgIH1cbiAgfVxuXG4gIHJlbGlucXVpc2hDb250cm9sT2ZTY3JvbGxSZXN0b3JhdGlvbigpIHtcbiAgICBpZiAodGhpcy5wcmV2aW91c1Njcm9sbFJlc3RvcmF0aW9uKSB7XG4gICAgICBoaXN0b3J5LnNjcm9sbFJlc3RvcmF0aW9uID0gdGhpcy5wcmV2aW91c1Njcm9sbFJlc3RvcmF0aW9uO1xuICAgICAgZGVsZXRlIHRoaXMucHJldmlvdXNTY3JvbGxSZXN0b3JhdGlvbjtcbiAgICB9XG4gIH1cblxuICAvLyBFdmVudCBoYW5kbGVyc1xuXG4gIG9uUG9wU3RhdGUgPSAoZXZlbnQpID0+IHtcbiAgICBpZiAodGhpcy5zaG91bGRIYW5kbGVQb3BTdGF0ZSgpKSB7XG4gICAgICBjb25zdCB7IHR1cmJvIH0gPSBldmVudC5zdGF0ZSB8fCB7fTtcbiAgICAgIGlmICh0dXJibykge1xuICAgICAgICB0aGlzLmxvY2F0aW9uID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gICAgICAgIGNvbnN0IHsgcmVzdG9yYXRpb25JZGVudGlmaWVyLCByZXN0b3JhdGlvbkluZGV4IH0gPSB0dXJibztcbiAgICAgICAgdGhpcy5yZXN0b3JhdGlvbklkZW50aWZpZXIgPSByZXN0b3JhdGlvbklkZW50aWZpZXI7XG4gICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHJlc3RvcmF0aW9uSW5kZXggPiB0aGlzLmN1cnJlbnRJbmRleCA/IFwiZm9yd2FyZFwiIDogXCJiYWNrXCI7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUuaGlzdG9yeVBvcHBlZFRvTG9jYXRpb25XaXRoUmVzdG9yYXRpb25JZGVudGlmaWVyQW5kRGlyZWN0aW9uKHRoaXMubG9jYXRpb24sIHJlc3RvcmF0aW9uSWRlbnRpZmllciwgZGlyZWN0aW9uKTtcbiAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSByZXN0b3JhdGlvbkluZGV4O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG9uUGFnZUxvYWQgPSBhc3luYyAoX2V2ZW50KSA9PiB7XG4gICAgYXdhaXQgbmV4dE1pY3JvdGFzaygpO1xuICAgIHRoaXMucGFnZUxvYWRlZCA9IHRydWU7XG4gIH1cblxuICAvLyBQcml2YXRlXG5cbiAgc2hvdWxkSGFuZGxlUG9wU3RhdGUoKSB7XG4gICAgLy8gU2FmYXJpIGRpc3BhdGNoZXMgYSBwb3BzdGF0ZSBldmVudCBhZnRlciB3aW5kb3cncyBsb2FkIGV2ZW50LCBpZ25vcmUgaXRcbiAgICByZXR1cm4gdGhpcy5wYWdlSXNMb2FkZWQoKVxuICB9XG5cbiAgcGFnZUlzTG9hZGVkKCkge1xuICAgIHJldHVybiB0aGlzLnBhZ2VMb2FkZWQgfHwgZG9jdW1lbnQucmVhZHlTdGF0ZSA9PSBcImNvbXBsZXRlXCJcbiAgfVxufVxuXG5jbGFzcyBMaW5rUHJlZmV0Y2hPYnNlcnZlciB7XG4gIHN0YXJ0ZWQgPSBmYWxzZVxuICAjcHJlZmV0Y2hlZExpbmsgPSBudWxsXG5cbiAgY29uc3RydWN0b3IoZGVsZWdhdGUsIGV2ZW50VGFyZ2V0KSB7XG4gICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgIHRoaXMuZXZlbnRUYXJnZXQgPSBldmVudFRhcmdldDtcbiAgfVxuXG4gIHN0YXJ0KCkge1xuICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHJldHVyblxuXG4gICAgaWYgKHRoaXMuZXZlbnRUYXJnZXQucmVhZHlTdGF0ZSA9PT0gXCJsb2FkaW5nXCIpIHtcbiAgICAgIHRoaXMuZXZlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgdGhpcy4jZW5hYmxlLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuI2VuYWJsZSgpO1xuICAgIH1cbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHJldHVyblxuXG4gICAgdGhpcy5ldmVudFRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLCB0aGlzLiN0cnlUb1ByZWZldGNoUmVxdWVzdCwge1xuICAgICAgY2FwdHVyZTogdHJ1ZSxcbiAgICAgIHBhc3NpdmU6IHRydWVcbiAgICB9KTtcbiAgICB0aGlzLmV2ZW50VGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIHRoaXMuI2NhbmNlbFJlcXVlc3RJZk9ic29sZXRlLCB7XG4gICAgICBjYXB0dXJlOiB0cnVlLFxuICAgICAgcGFzc2l2ZTogdHJ1ZVxuICAgIH0pO1xuXG4gICAgdGhpcy5ldmVudFRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwidHVyYm86YmVmb3JlLWZldGNoLXJlcXVlc3RcIiwgdGhpcy4jdHJ5VG9Vc2VQcmVmZXRjaGVkUmVxdWVzdCwgdHJ1ZSk7XG4gICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gIH1cblxuICAjZW5hYmxlID0gKCkgPT4ge1xuICAgIHRoaXMuZXZlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIiwgdGhpcy4jdHJ5VG9QcmVmZXRjaFJlcXVlc3QsIHtcbiAgICAgIGNhcHR1cmU6IHRydWUsXG4gICAgICBwYXNzaXZlOiB0cnVlXG4gICAgfSk7XG4gICAgdGhpcy5ldmVudFRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCB0aGlzLiNjYW5jZWxSZXF1ZXN0SWZPYnNvbGV0ZSwge1xuICAgICAgY2FwdHVyZTogdHJ1ZSxcbiAgICAgIHBhc3NpdmU6IHRydWVcbiAgICB9KTtcblxuICAgIHRoaXMuZXZlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcInR1cmJvOmJlZm9yZS1mZXRjaC1yZXF1ZXN0XCIsIHRoaXMuI3RyeVRvVXNlUHJlZmV0Y2hlZFJlcXVlc3QsIHRydWUpO1xuICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XG4gIH1cblxuICAjdHJ5VG9QcmVmZXRjaFJlcXVlc3QgPSAoZXZlbnQpID0+IHtcbiAgICBpZiAoZ2V0TWV0YUNvbnRlbnQoXCJ0dXJiby1wcmVmZXRjaFwiKSA9PT0gXCJmYWxzZVwiKSByZXR1cm5cblxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICBjb25zdCBpc0xpbmsgPSB0YXJnZXQubWF0Y2hlcyAmJiB0YXJnZXQubWF0Y2hlcyhcImFbaHJlZl06bm90KFt0YXJnZXRePV9dKTpub3QoW2Rvd25sb2FkXSlcIik7XG5cbiAgICBpZiAoaXNMaW5rICYmIHRoaXMuI2lzUHJlZmV0Y2hhYmxlKHRhcmdldCkpIHtcbiAgICAgIGNvbnN0IGxpbmsgPSB0YXJnZXQ7XG4gICAgICBjb25zdCBsb2NhdGlvbiA9IGdldExvY2F0aW9uRm9yTGluayhsaW5rKTtcblxuICAgICAgaWYgKHRoaXMuZGVsZWdhdGUuY2FuUHJlZmV0Y2hSZXF1ZXN0VG9Mb2NhdGlvbihsaW5rLCBsb2NhdGlvbikpIHtcbiAgICAgICAgdGhpcy4jcHJlZmV0Y2hlZExpbmsgPSBsaW5rO1xuXG4gICAgICAgIGNvbnN0IGZldGNoUmVxdWVzdCA9IG5ldyBGZXRjaFJlcXVlc3QoXG4gICAgICAgICAgdGhpcyxcbiAgICAgICAgICBGZXRjaE1ldGhvZC5nZXQsXG4gICAgICAgICAgbG9jYXRpb24sXG4gICAgICAgICAgbmV3IFVSTFNlYXJjaFBhcmFtcygpLFxuICAgICAgICAgIHRhcmdldFxuICAgICAgICApO1xuXG4gICAgICAgIGZldGNoUmVxdWVzdC5mZXRjaE9wdGlvbnMucHJpb3JpdHkgPSBcImxvd1wiO1xuXG4gICAgICAgIHByZWZldGNoQ2FjaGUuc2V0TGF0ZXIobG9jYXRpb24udG9TdHJpbmcoKSwgZmV0Y2hSZXF1ZXN0LCB0aGlzLiNjYWNoZVR0bCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgI2NhbmNlbFJlcXVlc3RJZk9ic29sZXRlID0gKGV2ZW50KSA9PiB7XG4gICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gdGhpcy4jcHJlZmV0Y2hlZExpbmspIHRoaXMuI2NhbmNlbFByZWZldGNoUmVxdWVzdCgpO1xuICB9XG5cbiAgI2NhbmNlbFByZWZldGNoUmVxdWVzdCA9ICgpID0+IHtcbiAgICBwcmVmZXRjaENhY2hlLmNsZWFyKCk7XG4gICAgdGhpcy4jcHJlZmV0Y2hlZExpbmsgPSBudWxsO1xuICB9XG5cbiAgI3RyeVRvVXNlUHJlZmV0Y2hlZFJlcXVlc3QgPSAoZXZlbnQpID0+IHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0LnRhZ05hbWUgIT09IFwiRk9STVwiICYmIGV2ZW50LmRldGFpbC5mZXRjaE9wdGlvbnMubWV0aG9kID09PSBcIkdFVFwiKSB7XG4gICAgICBjb25zdCBjYWNoZWQgPSBwcmVmZXRjaENhY2hlLmdldChldmVudC5kZXRhaWwudXJsLnRvU3RyaW5nKCkpO1xuXG4gICAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgIC8vIFVzZXIgY2xpY2tlZCBsaW5rLCB1c2UgY2FjaGUgcmVzcG9uc2VcbiAgICAgICAgZXZlbnQuZGV0YWlsLmZldGNoUmVxdWVzdCA9IGNhY2hlZDtcbiAgICAgIH1cblxuICAgICAgcHJlZmV0Y2hDYWNoZS5jbGVhcigpO1xuICAgIH1cbiAgfVxuXG4gIHByZXBhcmVSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgICBjb25zdCBsaW5rID0gcmVxdWVzdC50YXJnZXQ7XG5cbiAgICByZXF1ZXN0LmhlYWRlcnNbXCJYLVNlYy1QdXJwb3NlXCJdID0gXCJwcmVmZXRjaFwiO1xuXG4gICAgY29uc3QgdHVyYm9GcmFtZSA9IGxpbmsuY2xvc2VzdChcInR1cmJvLWZyYW1lXCIpO1xuICAgIGNvbnN0IHR1cmJvRnJhbWVUYXJnZXQgPSBsaW5rLmdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm8tZnJhbWVcIikgfHwgdHVyYm9GcmFtZT8uZ2V0QXR0cmlidXRlKFwidGFyZ2V0XCIpIHx8IHR1cmJvRnJhbWU/LmlkO1xuXG4gICAgaWYgKHR1cmJvRnJhbWVUYXJnZXQgJiYgdHVyYm9GcmFtZVRhcmdldCAhPT0gXCJfdG9wXCIpIHtcbiAgICAgIHJlcXVlc3QuaGVhZGVyc1tcIlR1cmJvLUZyYW1lXCJdID0gdHVyYm9GcmFtZVRhcmdldDtcbiAgICB9XG4gIH1cblxuICAvLyBGZXRjaCByZXF1ZXN0IGludGVyZmFjZVxuXG4gIHJlcXVlc3RTdWNjZWVkZWRXaXRoUmVzcG9uc2UoKSB7fVxuXG4gIHJlcXVlc3RTdGFydGVkKGZldGNoUmVxdWVzdCkge31cblxuICByZXF1ZXN0RXJyb3JlZChmZXRjaFJlcXVlc3QpIHt9XG5cbiAgcmVxdWVzdEZpbmlzaGVkKGZldGNoUmVxdWVzdCkge31cblxuICByZXF1ZXN0UHJldmVudGVkSGFuZGxpbmdSZXNwb25zZShmZXRjaFJlcXVlc3QsIGZldGNoUmVzcG9uc2UpIHt9XG5cbiAgcmVxdWVzdEZhaWxlZFdpdGhSZXNwb25zZShmZXRjaFJlcXVlc3QsIGZldGNoUmVzcG9uc2UpIHt9XG5cbiAgZ2V0ICNjYWNoZVR0bCgpIHtcbiAgICByZXR1cm4gTnVtYmVyKGdldE1ldGFDb250ZW50KFwidHVyYm8tcHJlZmV0Y2gtY2FjaGUtdGltZVwiKSkgfHwgY2FjaGVUdGxcbiAgfVxuXG4gICNpc1ByZWZldGNoYWJsZShsaW5rKSB7XG4gICAgY29uc3QgaHJlZiA9IGxpbmsuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKTtcblxuICAgIGlmICghaHJlZikgcmV0dXJuIGZhbHNlXG5cbiAgICBpZiAodW5mZXRjaGFibGVMaW5rKGxpbmspKSByZXR1cm4gZmFsc2VcbiAgICBpZiAobGlua1RvVGhlU2FtZVBhZ2UobGluaykpIHJldHVybiBmYWxzZVxuICAgIGlmIChsaW5rT3B0c091dChsaW5rKSkgcmV0dXJuIGZhbHNlXG4gICAgaWYgKG5vblNhZmVMaW5rKGxpbmspKSByZXR1cm4gZmFsc2VcbiAgICBpZiAoZXZlbnRQcmV2ZW50ZWQobGluaykpIHJldHVybiBmYWxzZVxuXG4gICAgcmV0dXJuIHRydWVcbiAgfVxufVxuXG5jb25zdCB1bmZldGNoYWJsZUxpbmsgPSAobGluaykgPT4ge1xuICByZXR1cm4gbGluay5vcmlnaW4gIT09IGRvY3VtZW50LmxvY2F0aW9uLm9yaWdpbiB8fCAhW1wiaHR0cDpcIiwgXCJodHRwczpcIl0uaW5jbHVkZXMobGluay5wcm90b2NvbCkgfHwgbGluay5oYXNBdHRyaWJ1dGUoXCJ0YXJnZXRcIilcbn07XG5cbmNvbnN0IGxpbmtUb1RoZVNhbWVQYWdlID0gKGxpbmspID0+IHtcbiAgcmV0dXJuIChsaW5rLnBhdGhuYW1lICsgbGluay5zZWFyY2ggPT09IGRvY3VtZW50LmxvY2F0aW9uLnBhdGhuYW1lICsgZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoKSB8fCBsaW5rLmhyZWYuc3RhcnRzV2l0aChcIiNcIilcbn07XG5cbmNvbnN0IGxpbmtPcHRzT3V0ID0gKGxpbmspID0+IHtcbiAgaWYgKGxpbmsuZ2V0QXR0cmlidXRlKFwiZGF0YS10dXJiby1wcmVmZXRjaFwiKSA9PT0gXCJmYWxzZVwiKSByZXR1cm4gdHJ1ZVxuICBpZiAobGluay5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvXCIpID09PSBcImZhbHNlXCIpIHJldHVybiB0cnVlXG5cbiAgY29uc3QgdHVyYm9QcmVmZXRjaFBhcmVudCA9IGZpbmRDbG9zZXN0UmVjdXJzaXZlbHkobGluaywgXCJbZGF0YS10dXJiby1wcmVmZXRjaF1cIik7XG4gIGlmICh0dXJib1ByZWZldGNoUGFyZW50ICYmIHR1cmJvUHJlZmV0Y2hQYXJlbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS10dXJiby1wcmVmZXRjaFwiKSA9PT0gXCJmYWxzZVwiKSByZXR1cm4gdHJ1ZVxuXG4gIHJldHVybiBmYWxzZVxufTtcblxuY29uc3Qgbm9uU2FmZUxpbmsgPSAobGluaykgPT4ge1xuICBjb25zdCB0dXJib01ldGhvZCA9IGxpbmsuZ2V0QXR0cmlidXRlKFwiZGF0YS10dXJiby1tZXRob2RcIik7XG4gIGlmICh0dXJib01ldGhvZCAmJiB0dXJib01ldGhvZC50b0xvd2VyQ2FzZSgpICE9PSBcImdldFwiKSByZXR1cm4gdHJ1ZVxuXG4gIGlmIChpc1VKUyhsaW5rKSkgcmV0dXJuIHRydWVcbiAgaWYgKGxpbmsuaGFzQXR0cmlidXRlKFwiZGF0YS10dXJiby1jb25maXJtXCIpKSByZXR1cm4gdHJ1ZVxuICBpZiAobGluay5oYXNBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLXN0cmVhbVwiKSkgcmV0dXJuIHRydWVcblxuICByZXR1cm4gZmFsc2Vcbn07XG5cbmNvbnN0IGlzVUpTID0gKGxpbmspID0+IHtcbiAgcmV0dXJuIGxpbmsuaGFzQXR0cmlidXRlKFwiZGF0YS1yZW1vdGVcIikgfHwgbGluay5oYXNBdHRyaWJ1dGUoXCJkYXRhLWJlaGF2aW9yXCIpIHx8IGxpbmsuaGFzQXR0cmlidXRlKFwiZGF0YS1jb25maXJtXCIpIHx8IGxpbmsuaGFzQXR0cmlidXRlKFwiZGF0YS1tZXRob2RcIilcbn07XG5cbmNvbnN0IGV2ZW50UHJldmVudGVkID0gKGxpbmspID0+IHtcbiAgY29uc3QgZXZlbnQgPSBkaXNwYXRjaChcInR1cmJvOmJlZm9yZS1wcmVmZXRjaFwiLCB7IHRhcmdldDogbGluaywgY2FuY2VsYWJsZTogdHJ1ZSB9KTtcbiAgcmV0dXJuIGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWRcbn07XG5cbmNsYXNzIE5hdmlnYXRvciB7XG4gIGNvbnN0cnVjdG9yKGRlbGVnYXRlKSB7XG4gICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICB9XG5cbiAgcHJvcG9zZVZpc2l0KGxvY2F0aW9uLCBvcHRpb25zID0ge30pIHtcbiAgICBpZiAodGhpcy5kZWxlZ2F0ZS5hbGxvd3NWaXNpdGluZ0xvY2F0aW9uV2l0aEFjdGlvbihsb2NhdGlvbiwgb3B0aW9ucy5hY3Rpb24pKSB7XG4gICAgICB0aGlzLmRlbGVnYXRlLnZpc2l0UHJvcG9zZWRUb0xvY2F0aW9uKGxvY2F0aW9uLCBvcHRpb25zKTtcbiAgICB9XG4gIH1cblxuICBzdGFydFZpc2l0KGxvY2F0YWJsZSwgcmVzdG9yYXRpb25JZGVudGlmaWVyLCBvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLnN0b3AoKTtcbiAgICB0aGlzLmN1cnJlbnRWaXNpdCA9IG5ldyBWaXNpdCh0aGlzLCBleHBhbmRVUkwobG9jYXRhYmxlKSwgcmVzdG9yYXRpb25JZGVudGlmaWVyLCB7XG4gICAgICByZWZlcnJlcjogdGhpcy5sb2NhdGlvbixcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9KTtcbiAgICB0aGlzLmN1cnJlbnRWaXNpdC5zdGFydCgpO1xuICB9XG5cbiAgc3VibWl0Rm9ybShmb3JtLCBzdWJtaXR0ZXIpIHtcbiAgICB0aGlzLnN0b3AoKTtcbiAgICB0aGlzLmZvcm1TdWJtaXNzaW9uID0gbmV3IEZvcm1TdWJtaXNzaW9uKHRoaXMsIGZvcm0sIHN1Ym1pdHRlciwgdHJ1ZSk7XG5cbiAgICB0aGlzLmZvcm1TdWJtaXNzaW9uLnN0YXJ0KCk7XG4gIH1cblxuICBzdG9wKCkge1xuICAgIGlmICh0aGlzLmZvcm1TdWJtaXNzaW9uKSB7XG4gICAgICB0aGlzLmZvcm1TdWJtaXNzaW9uLnN0b3AoKTtcbiAgICAgIGRlbGV0ZSB0aGlzLmZvcm1TdWJtaXNzaW9uO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmN1cnJlbnRWaXNpdCkge1xuICAgICAgdGhpcy5jdXJyZW50VmlzaXQuY2FuY2VsKCk7XG4gICAgICBkZWxldGUgdGhpcy5jdXJyZW50VmlzaXQ7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGFkYXB0ZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGVsZWdhdGUuYWRhcHRlclxuICB9XG5cbiAgZ2V0IHZpZXcoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGVsZWdhdGUudmlld1xuICB9XG5cbiAgZ2V0IHJvb3RMb2NhdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy52aWV3LnNuYXBzaG90LnJvb3RMb2NhdGlvblxuICB9XG5cbiAgZ2V0IGhpc3RvcnkoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGVsZWdhdGUuaGlzdG9yeVxuICB9XG5cbiAgLy8gRm9ybSBzdWJtaXNzaW9uIGRlbGVnYXRlXG5cbiAgZm9ybVN1Ym1pc3Npb25TdGFydGVkKGZvcm1TdWJtaXNzaW9uKSB7XG4gICAgLy8gTm90IGFsbCBhZGFwdGVycyBpbXBsZW1lbnQgZm9ybVN1Ym1pc3Npb25TdGFydGVkXG4gICAgaWYgKHR5cGVvZiB0aGlzLmFkYXB0ZXIuZm9ybVN1Ym1pc3Npb25TdGFydGVkID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHRoaXMuYWRhcHRlci5mb3JtU3VibWlzc2lvblN0YXJ0ZWQoZm9ybVN1Ym1pc3Npb24pO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGZvcm1TdWJtaXNzaW9uU3VjY2VlZGVkV2l0aFJlc3BvbnNlKGZvcm1TdWJtaXNzaW9uLCBmZXRjaFJlc3BvbnNlKSB7XG4gICAgaWYgKGZvcm1TdWJtaXNzaW9uID09IHRoaXMuZm9ybVN1Ym1pc3Npb24pIHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlSFRNTCA9IGF3YWl0IGZldGNoUmVzcG9uc2UucmVzcG9uc2VIVE1MO1xuICAgICAgaWYgKHJlc3BvbnNlSFRNTCkge1xuICAgICAgICBjb25zdCBzaG91bGRDYWNoZVNuYXBzaG90ID0gZm9ybVN1Ym1pc3Npb24uaXNTYWZlO1xuICAgICAgICBpZiAoIXNob3VsZENhY2hlU25hcHNob3QpIHtcbiAgICAgICAgICB0aGlzLnZpZXcuY2xlYXJTbmFwc2hvdENhY2hlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IHN0YXR1c0NvZGUsIHJlZGlyZWN0ZWQgfSA9IGZldGNoUmVzcG9uc2U7XG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IHRoaXMuI2dldEFjdGlvbkZvckZvcm1TdWJtaXNzaW9uKGZvcm1TdWJtaXNzaW9uLCBmZXRjaFJlc3BvbnNlKTtcbiAgICAgICAgY29uc3QgdmlzaXRPcHRpb25zID0ge1xuICAgICAgICAgIGFjdGlvbixcbiAgICAgICAgICBzaG91bGRDYWNoZVNuYXBzaG90LFxuICAgICAgICAgIHJlc3BvbnNlOiB7IHN0YXR1c0NvZGUsIHJlc3BvbnNlSFRNTCwgcmVkaXJlY3RlZCB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucHJvcG9zZVZpc2l0KGZldGNoUmVzcG9uc2UubG9jYXRpb24sIHZpc2l0T3B0aW9ucyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZm9ybVN1Ym1pc3Npb25GYWlsZWRXaXRoUmVzcG9uc2UoZm9ybVN1Ym1pc3Npb24sIGZldGNoUmVzcG9uc2UpIHtcbiAgICBjb25zdCByZXNwb25zZUhUTUwgPSBhd2FpdCBmZXRjaFJlc3BvbnNlLnJlc3BvbnNlSFRNTDtcblxuICAgIGlmIChyZXNwb25zZUhUTUwpIHtcbiAgICAgIGNvbnN0IHNuYXBzaG90ID0gUGFnZVNuYXBzaG90LmZyb21IVE1MU3RyaW5nKHJlc3BvbnNlSFRNTCk7XG4gICAgICBpZiAoZmV0Y2hSZXNwb25zZS5zZXJ2ZXJFcnJvcikge1xuICAgICAgICBhd2FpdCB0aGlzLnZpZXcucmVuZGVyRXJyb3Ioc25hcHNob3QsIHRoaXMuY3VycmVudFZpc2l0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IHRoaXMudmlldy5yZW5kZXJQYWdlKHNuYXBzaG90LCBmYWxzZSwgdHJ1ZSwgdGhpcy5jdXJyZW50VmlzaXQpO1xuICAgICAgfVxuICAgICAgaWYoIXNuYXBzaG90LnNob3VsZFByZXNlcnZlU2Nyb2xsUG9zaXRpb24pIHtcbiAgICAgICAgdGhpcy52aWV3LnNjcm9sbFRvVG9wKCk7XG4gICAgICB9XG4gICAgICB0aGlzLnZpZXcuY2xlYXJTbmFwc2hvdENhY2hlKCk7XG4gICAgfVxuICB9XG5cbiAgZm9ybVN1Ym1pc3Npb25FcnJvcmVkKGZvcm1TdWJtaXNzaW9uLCBlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICB9XG5cbiAgZm9ybVN1Ym1pc3Npb25GaW5pc2hlZChmb3JtU3VibWlzc2lvbikge1xuICAgIC8vIE5vdCBhbGwgYWRhcHRlcnMgaW1wbGVtZW50IGZvcm1TdWJtaXNzaW9uRmluaXNoZWRcbiAgICBpZiAodHlwZW9mIHRoaXMuYWRhcHRlci5mb3JtU3VibWlzc2lvbkZpbmlzaGVkID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHRoaXMuYWRhcHRlci5mb3JtU3VibWlzc2lvbkZpbmlzaGVkKGZvcm1TdWJtaXNzaW9uKTtcbiAgICB9XG4gIH1cblxuICAvLyBMaW5rIHByZWZldGNoaW5nXG5cbiAgbGlua1ByZWZldGNoaW5nSXNFbmFibGVkRm9yTG9jYXRpb24obG9jYXRpb24pIHtcbiAgICAvLyBOb3QgYWxsIGFkYXB0ZXJzIGltcGxlbWVudCBsaW5rUHJlZmV0Y2hpbmdJc0VuYWJsZWRGb3JMb2NhdGlvblxuICAgIGlmICh0eXBlb2YgdGhpcy5hZGFwdGVyLmxpbmtQcmVmZXRjaGluZ0lzRW5hYmxlZEZvckxvY2F0aW9uID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybiB0aGlzLmFkYXB0ZXIubGlua1ByZWZldGNoaW5nSXNFbmFibGVkRm9yTG9jYXRpb24obG9jYXRpb24pXG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIC8vIFZpc2l0IGRlbGVnYXRlXG5cbiAgdmlzaXRTdGFydGVkKHZpc2l0KSB7XG4gICAgdGhpcy5kZWxlZ2F0ZS52aXNpdFN0YXJ0ZWQodmlzaXQpO1xuICB9XG5cbiAgdmlzaXRDb21wbGV0ZWQodmlzaXQpIHtcbiAgICB0aGlzLmRlbGVnYXRlLnZpc2l0Q29tcGxldGVkKHZpc2l0KTtcbiAgICBkZWxldGUgdGhpcy5jdXJyZW50VmlzaXQ7XG4gIH1cblxuICBsb2NhdGlvbldpdGhBY3Rpb25Jc1NhbWVQYWdlKGxvY2F0aW9uLCBhY3Rpb24pIHtcbiAgICBjb25zdCBhbmNob3IgPSBnZXRBbmNob3IobG9jYXRpb24pO1xuICAgIGNvbnN0IGN1cnJlbnRBbmNob3IgPSBnZXRBbmNob3IodGhpcy52aWV3Lmxhc3RSZW5kZXJlZExvY2F0aW9uKTtcbiAgICBjb25zdCBpc1Jlc3RvcmF0aW9uVG9Ub3AgPSBhY3Rpb24gPT09IFwicmVzdG9yZVwiICYmIHR5cGVvZiBhbmNob3IgPT09IFwidW5kZWZpbmVkXCI7XG5cbiAgICByZXR1cm4gKFxuICAgICAgYWN0aW9uICE9PSBcInJlcGxhY2VcIiAmJlxuICAgICAgZ2V0UmVxdWVzdFVSTChsb2NhdGlvbikgPT09IGdldFJlcXVlc3RVUkwodGhpcy52aWV3Lmxhc3RSZW5kZXJlZExvY2F0aW9uKSAmJlxuICAgICAgKGlzUmVzdG9yYXRpb25Ub1RvcCB8fCAoYW5jaG9yICE9IG51bGwgJiYgYW5jaG9yICE9PSBjdXJyZW50QW5jaG9yKSlcbiAgICApXG4gIH1cblxuICB2aXNpdFNjcm9sbGVkVG9TYW1lUGFnZUxvY2F0aW9uKG9sZFVSTCwgbmV3VVJMKSB7XG4gICAgdGhpcy5kZWxlZ2F0ZS52aXNpdFNjcm9sbGVkVG9TYW1lUGFnZUxvY2F0aW9uKG9sZFVSTCwgbmV3VVJMKTtcbiAgfVxuXG4gIC8vIFZpc2l0c1xuXG4gIGdldCBsb2NhdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5oaXN0b3J5LmxvY2F0aW9uXG4gIH1cblxuICBnZXQgcmVzdG9yYXRpb25JZGVudGlmaWVyKCkge1xuICAgIHJldHVybiB0aGlzLmhpc3RvcnkucmVzdG9yYXRpb25JZGVudGlmaWVyXG4gIH1cblxuICAjZ2V0QWN0aW9uRm9yRm9ybVN1Ym1pc3Npb24oZm9ybVN1Ym1pc3Npb24sIGZldGNoUmVzcG9uc2UpIHtcbiAgICBjb25zdCB7IHN1Ym1pdHRlciwgZm9ybUVsZW1lbnQgfSA9IGZvcm1TdWJtaXNzaW9uO1xuICAgIHJldHVybiBnZXRWaXNpdEFjdGlvbihzdWJtaXR0ZXIsIGZvcm1FbGVtZW50KSB8fCB0aGlzLiNnZXREZWZhdWx0QWN0aW9uKGZldGNoUmVzcG9uc2UpXG4gIH1cblxuICAjZ2V0RGVmYXVsdEFjdGlvbihmZXRjaFJlc3BvbnNlKSB7XG4gICAgY29uc3Qgc2FtZUxvY2F0aW9uUmVkaXJlY3QgPSBmZXRjaFJlc3BvbnNlLnJlZGlyZWN0ZWQgJiYgZmV0Y2hSZXNwb25zZS5sb2NhdGlvbi5ocmVmID09PSB0aGlzLmxvY2F0aW9uPy5ocmVmO1xuICAgIHJldHVybiBzYW1lTG9jYXRpb25SZWRpcmVjdCA/IFwicmVwbGFjZVwiIDogXCJhZHZhbmNlXCJcbiAgfVxufVxuXG5jb25zdCBQYWdlU3RhZ2UgPSB7XG4gIGluaXRpYWw6IDAsXG4gIGxvYWRpbmc6IDEsXG4gIGludGVyYWN0aXZlOiAyLFxuICBjb21wbGV0ZTogM1xufTtcblxuY2xhc3MgUGFnZU9ic2VydmVyIHtcbiAgc3RhZ2UgPSBQYWdlU3RhZ2UuaW5pdGlhbFxuICBzdGFydGVkID0gZmFsc2VcblxuICBjb25zdHJ1Y3RvcihkZWxlZ2F0ZSkge1xuICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgfVxuXG4gIHN0YXJ0KCkge1xuICAgIGlmICghdGhpcy5zdGFydGVkKSB7XG4gICAgICBpZiAodGhpcy5zdGFnZSA9PSBQYWdlU3RhZ2UuaW5pdGlhbCkge1xuICAgICAgICB0aGlzLnN0YWdlID0gUGFnZVN0YWdlLmxvYWRpbmc7XG4gICAgICB9XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwicmVhZHlzdGF0ZWNoYW5nZVwiLCB0aGlzLmludGVycHJldFJlYWR5U3RhdGUsIGZhbHNlKTtcbiAgICAgIGFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCB0aGlzLnBhZ2VXaWxsVW5sb2FkLCBmYWxzZSk7XG4gICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlYWR5c3RhdGVjaGFuZ2VcIiwgdGhpcy5pbnRlcnByZXRSZWFkeVN0YXRlLCBmYWxzZSk7XG4gICAgICByZW1vdmVFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgdGhpcy5wYWdlV2lsbFVubG9hZCwgZmFsc2UpO1xuICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgaW50ZXJwcmV0UmVhZHlTdGF0ZSA9ICgpID0+IHtcbiAgICBjb25zdCB7IHJlYWR5U3RhdGUgfSA9IHRoaXM7XG4gICAgaWYgKHJlYWR5U3RhdGUgPT0gXCJpbnRlcmFjdGl2ZVwiKSB7XG4gICAgICB0aGlzLnBhZ2VJc0ludGVyYWN0aXZlKCk7XG4gICAgfSBlbHNlIGlmIChyZWFkeVN0YXRlID09IFwiY29tcGxldGVcIikge1xuICAgICAgdGhpcy5wYWdlSXNDb21wbGV0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIHBhZ2VJc0ludGVyYWN0aXZlKCkge1xuICAgIGlmICh0aGlzLnN0YWdlID09IFBhZ2VTdGFnZS5sb2FkaW5nKSB7XG4gICAgICB0aGlzLnN0YWdlID0gUGFnZVN0YWdlLmludGVyYWN0aXZlO1xuICAgICAgdGhpcy5kZWxlZ2F0ZS5wYWdlQmVjYW1lSW50ZXJhY3RpdmUoKTtcbiAgICB9XG4gIH1cblxuICBwYWdlSXNDb21wbGV0ZSgpIHtcbiAgICB0aGlzLnBhZ2VJc0ludGVyYWN0aXZlKCk7XG4gICAgaWYgKHRoaXMuc3RhZ2UgPT0gUGFnZVN0YWdlLmludGVyYWN0aXZlKSB7XG4gICAgICB0aGlzLnN0YWdlID0gUGFnZVN0YWdlLmNvbXBsZXRlO1xuICAgICAgdGhpcy5kZWxlZ2F0ZS5wYWdlTG9hZGVkKCk7XG4gICAgfVxuICB9XG5cbiAgcGFnZVdpbGxVbmxvYWQgPSAoKSA9PiB7XG4gICAgdGhpcy5kZWxlZ2F0ZS5wYWdlV2lsbFVubG9hZCgpO1xuICB9XG5cbiAgZ2V0IHJlYWR5U3RhdGUoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LnJlYWR5U3RhdGVcbiAgfVxufVxuXG5jbGFzcyBTY3JvbGxPYnNlcnZlciB7XG4gIHN0YXJ0ZWQgPSBmYWxzZVxuXG4gIGNvbnN0cnVjdG9yKGRlbGVnYXRlKSB7XG4gICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICB9XG5cbiAgc3RhcnQoKSB7XG4gICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgIGFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5vblNjcm9sbCwgZmFsc2UpO1xuICAgICAgdGhpcy5vblNjcm9sbCgpO1xuICAgICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBzdG9wKCkge1xuICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5vblNjcm9sbCwgZmFsc2UpO1xuICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgb25TY3JvbGwgPSAoKSA9PiB7XG4gICAgdGhpcy51cGRhdGVQb3NpdGlvbih7IHg6IHdpbmRvdy5wYWdlWE9mZnNldCwgeTogd2luZG93LnBhZ2VZT2Zmc2V0IH0pO1xuICB9XG5cbiAgLy8gUHJpdmF0ZVxuXG4gIHVwZGF0ZVBvc2l0aW9uKHBvc2l0aW9uKSB7XG4gICAgdGhpcy5kZWxlZ2F0ZS5zY3JvbGxQb3NpdGlvbkNoYW5nZWQocG9zaXRpb24pO1xuICB9XG59XG5cbmNsYXNzIFN0cmVhbU1lc3NhZ2VSZW5kZXJlciB7XG4gIHJlbmRlcih7IGZyYWdtZW50IH0pIHtcbiAgICBCYXJkby5wcmVzZXJ2aW5nUGVybWFuZW50RWxlbWVudHModGhpcywgZ2V0UGVybWFuZW50RWxlbWVudE1hcEZvckZyYWdtZW50KGZyYWdtZW50KSwgKCkgPT4ge1xuICAgICAgd2l0aEF1dG9mb2N1c0Zyb21GcmFnbWVudChmcmFnbWVudCwgKCkgPT4ge1xuICAgICAgICB3aXRoUHJlc2VydmVkRm9jdXMoKCkgPT4ge1xuICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBCYXJkbyBkZWxlZ2F0ZVxuXG4gIGVudGVyaW5nQmFyZG8oY3VycmVudFBlcm1hbmVudEVsZW1lbnQsIG5ld1Blcm1hbmVudEVsZW1lbnQpIHtcbiAgICBuZXdQZXJtYW5lbnRFbGVtZW50LnJlcGxhY2VXaXRoKGN1cnJlbnRQZXJtYW5lbnRFbGVtZW50LmNsb25lTm9kZSh0cnVlKSk7XG4gIH1cblxuICBsZWF2aW5nQmFyZG8oKSB7fVxufVxuXG5mdW5jdGlvbiBnZXRQZXJtYW5lbnRFbGVtZW50TWFwRm9yRnJhZ21lbnQoZnJhZ21lbnQpIHtcbiAgY29uc3QgcGVybWFuZW50RWxlbWVudHNJbkRvY3VtZW50ID0gcXVlcnlQZXJtYW5lbnRFbGVtZW50c0FsbChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpO1xuICBjb25zdCBwZXJtYW5lbnRFbGVtZW50TWFwID0ge307XG4gIGZvciAoY29uc3QgcGVybWFuZW50RWxlbWVudEluRG9jdW1lbnQgb2YgcGVybWFuZW50RWxlbWVudHNJbkRvY3VtZW50KSB7XG4gICAgY29uc3QgeyBpZCB9ID0gcGVybWFuZW50RWxlbWVudEluRG9jdW1lbnQ7XG5cbiAgICBmb3IgKGNvbnN0IHN0cmVhbUVsZW1lbnQgb2YgZnJhZ21lbnQucXVlcnlTZWxlY3RvckFsbChcInR1cmJvLXN0cmVhbVwiKSkge1xuICAgICAgY29uc3QgZWxlbWVudEluU3RyZWFtID0gZ2V0UGVybWFuZW50RWxlbWVudEJ5SWQoc3RyZWFtRWxlbWVudC50ZW1wbGF0ZUVsZW1lbnQuY29udGVudCwgaWQpO1xuXG4gICAgICBpZiAoZWxlbWVudEluU3RyZWFtKSB7XG4gICAgICAgIHBlcm1hbmVudEVsZW1lbnRNYXBbaWRdID0gW3Blcm1hbmVudEVsZW1lbnRJbkRvY3VtZW50LCBlbGVtZW50SW5TdHJlYW1dO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBwZXJtYW5lbnRFbGVtZW50TWFwXG59XG5cbmFzeW5jIGZ1bmN0aW9uIHdpdGhBdXRvZm9jdXNGcm9tRnJhZ21lbnQoZnJhZ21lbnQsIGNhbGxiYWNrKSB7XG4gIGNvbnN0IGdlbmVyYXRlZElEID0gYHR1cmJvLXN0cmVhbS1hdXRvZm9jdXMtJHt1dWlkKCl9YDtcbiAgY29uc3QgdHVyYm9TdHJlYW1zID0gZnJhZ21lbnQucXVlcnlTZWxlY3RvckFsbChcInR1cmJvLXN0cmVhbVwiKTtcbiAgY29uc3QgZWxlbWVudFdpdGhBdXRvZm9jdXMgPSBmaXJzdEF1dG9mb2N1c2FibGVFbGVtZW50SW5TdHJlYW1zKHR1cmJvU3RyZWFtcyk7XG4gIGxldCB3aWxsQXV0b2ZvY3VzSWQgPSBudWxsO1xuXG4gIGlmIChlbGVtZW50V2l0aEF1dG9mb2N1cykge1xuICAgIGlmIChlbGVtZW50V2l0aEF1dG9mb2N1cy5pZCkge1xuICAgICAgd2lsbEF1dG9mb2N1c0lkID0gZWxlbWVudFdpdGhBdXRvZm9jdXMuaWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbGxBdXRvZm9jdXNJZCA9IGdlbmVyYXRlZElEO1xuICAgIH1cblxuICAgIGVsZW1lbnRXaXRoQXV0b2ZvY3VzLmlkID0gd2lsbEF1dG9mb2N1c0lkO1xuICB9XG5cbiAgY2FsbGJhY2soKTtcbiAgYXdhaXQgbmV4dFJlcGFpbnQoKTtcblxuICBjb25zdCBoYXNOb0FjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09IG51bGwgfHwgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PSBkb2N1bWVudC5ib2R5O1xuXG4gIGlmIChoYXNOb0FjdGl2ZUVsZW1lbnQgJiYgd2lsbEF1dG9mb2N1c0lkKSB7XG4gICAgY29uc3QgZWxlbWVudFRvQXV0b2ZvY3VzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQod2lsbEF1dG9mb2N1c0lkKTtcblxuICAgIGlmIChlbGVtZW50SXNGb2N1c2FibGUoZWxlbWVudFRvQXV0b2ZvY3VzKSkge1xuICAgICAgZWxlbWVudFRvQXV0b2ZvY3VzLmZvY3VzKCk7XG4gICAgfVxuICAgIGlmIChlbGVtZW50VG9BdXRvZm9jdXMgJiYgZWxlbWVudFRvQXV0b2ZvY3VzLmlkID09IGdlbmVyYXRlZElEKSB7XG4gICAgICBlbGVtZW50VG9BdXRvZm9jdXMucmVtb3ZlQXR0cmlidXRlKFwiaWRcIik7XG4gICAgfVxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHdpdGhQcmVzZXJ2ZWRGb2N1cyhjYWxsYmFjaykge1xuICBjb25zdCBbYWN0aXZlRWxlbWVudEJlZm9yZVJlbmRlciwgYWN0aXZlRWxlbWVudEFmdGVyUmVuZGVyXSA9IGF3YWl0IGFyb3VuZChjYWxsYmFjaywgKCkgPT4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCk7XG5cbiAgY29uc3QgcmVzdG9yZUZvY3VzVG8gPSBhY3RpdmVFbGVtZW50QmVmb3JlUmVuZGVyICYmIGFjdGl2ZUVsZW1lbnRCZWZvcmVSZW5kZXIuaWQ7XG5cbiAgaWYgKHJlc3RvcmVGb2N1c1RvKSB7XG4gICAgY29uc3QgZWxlbWVudFRvRm9jdXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChyZXN0b3JlRm9jdXNUbyk7XG5cbiAgICBpZiAoZWxlbWVudElzRm9jdXNhYmxlKGVsZW1lbnRUb0ZvY3VzKSAmJiBlbGVtZW50VG9Gb2N1cyAhPSBhY3RpdmVFbGVtZW50QWZ0ZXJSZW5kZXIpIHtcbiAgICAgIGVsZW1lbnRUb0ZvY3VzLmZvY3VzKCk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGZpcnN0QXV0b2ZvY3VzYWJsZUVsZW1lbnRJblN0cmVhbXMobm9kZUxpc3RPZlN0cmVhbUVsZW1lbnRzKSB7XG4gIGZvciAoY29uc3Qgc3RyZWFtRWxlbWVudCBvZiBub2RlTGlzdE9mU3RyZWFtRWxlbWVudHMpIHtcbiAgICBjb25zdCBlbGVtZW50V2l0aEF1dG9mb2N1cyA9IHF1ZXJ5QXV0b2ZvY3VzYWJsZUVsZW1lbnQoc3RyZWFtRWxlbWVudC50ZW1wbGF0ZUVsZW1lbnQuY29udGVudCk7XG5cbiAgICBpZiAoZWxlbWVudFdpdGhBdXRvZm9jdXMpIHJldHVybiBlbGVtZW50V2l0aEF1dG9mb2N1c1xuICB9XG5cbiAgcmV0dXJuIG51bGxcbn1cblxuY2xhc3MgU3RyZWFtT2JzZXJ2ZXIge1xuICBzb3VyY2VzID0gbmV3IFNldCgpXG4gICNzdGFydGVkID0gZmFsc2VcblxuICBjb25zdHJ1Y3RvcihkZWxlZ2F0ZSkge1xuICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgfVxuXG4gIHN0YXJ0KCkge1xuICAgIGlmICghdGhpcy4jc3RhcnRlZCkge1xuICAgICAgdGhpcy4jc3RhcnRlZCA9IHRydWU7XG4gICAgICBhZGRFdmVudExpc3RlbmVyKFwidHVyYm86YmVmb3JlLWZldGNoLXJlc3BvbnNlXCIsIHRoaXMuaW5zcGVjdEZldGNoUmVzcG9uc2UsIGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICBzdG9wKCkge1xuICAgIGlmICh0aGlzLiNzdGFydGVkKSB7XG4gICAgICB0aGlzLiNzdGFydGVkID0gZmFsc2U7XG4gICAgICByZW1vdmVFdmVudExpc3RlbmVyKFwidHVyYm86YmVmb3JlLWZldGNoLXJlc3BvbnNlXCIsIHRoaXMuaW5zcGVjdEZldGNoUmVzcG9uc2UsIGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICBjb25uZWN0U3RyZWFtU291cmNlKHNvdXJjZSkge1xuICAgIGlmICghdGhpcy5zdHJlYW1Tb3VyY2VJc0Nvbm5lY3RlZChzb3VyY2UpKSB7XG4gICAgICB0aGlzLnNvdXJjZXMuYWRkKHNvdXJjZSk7XG4gICAgICBzb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgdGhpcy5yZWNlaXZlTWVzc2FnZUV2ZW50LCBmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgZGlzY29ubmVjdFN0cmVhbVNvdXJjZShzb3VyY2UpIHtcbiAgICBpZiAodGhpcy5zdHJlYW1Tb3VyY2VJc0Nvbm5lY3RlZChzb3VyY2UpKSB7XG4gICAgICB0aGlzLnNvdXJjZXMuZGVsZXRlKHNvdXJjZSk7XG4gICAgICBzb3VyY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgdGhpcy5yZWNlaXZlTWVzc2FnZUV2ZW50LCBmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgc3RyZWFtU291cmNlSXNDb25uZWN0ZWQoc291cmNlKSB7XG4gICAgcmV0dXJuIHRoaXMuc291cmNlcy5oYXMoc291cmNlKVxuICB9XG5cbiAgaW5zcGVjdEZldGNoUmVzcG9uc2UgPSAoZXZlbnQpID0+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGZldGNoUmVzcG9uc2VGcm9tRXZlbnQoZXZlbnQpO1xuICAgIGlmIChyZXNwb25zZSAmJiBmZXRjaFJlc3BvbnNlSXNTdHJlYW0ocmVzcG9uc2UpKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5yZWNlaXZlTWVzc2FnZVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICB9XG4gIH1cblxuICByZWNlaXZlTWVzc2FnZUV2ZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgaWYgKHRoaXMuI3N0YXJ0ZWQgJiYgdHlwZW9mIGV2ZW50LmRhdGEgPT0gXCJzdHJpbmdcIikge1xuICAgICAgdGhpcy5yZWNlaXZlTWVzc2FnZUhUTUwoZXZlbnQuZGF0YSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmVjZWl2ZU1lc3NhZ2VSZXNwb25zZShyZXNwb25zZSkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZXNwb25zZS5yZXNwb25zZUhUTUw7XG4gICAgaWYgKGh0bWwpIHtcbiAgICAgIHRoaXMucmVjZWl2ZU1lc3NhZ2VIVE1MKGh0bWwpO1xuICAgIH1cbiAgfVxuXG4gIHJlY2VpdmVNZXNzYWdlSFRNTChodG1sKSB7XG4gICAgdGhpcy5kZWxlZ2F0ZS5yZWNlaXZlZE1lc3NhZ2VGcm9tU3RyZWFtKFN0cmVhbU1lc3NhZ2Uud3JhcChodG1sKSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmV0Y2hSZXNwb25zZUZyb21FdmVudChldmVudCkge1xuICBjb25zdCBmZXRjaFJlc3BvbnNlID0gZXZlbnQuZGV0YWlsPy5mZXRjaFJlc3BvbnNlO1xuICBpZiAoZmV0Y2hSZXNwb25zZSBpbnN0YW5jZW9mIEZldGNoUmVzcG9uc2UpIHtcbiAgICByZXR1cm4gZmV0Y2hSZXNwb25zZVxuICB9XG59XG5cbmZ1bmN0aW9uIGZldGNoUmVzcG9uc2VJc1N0cmVhbShyZXNwb25zZSkge1xuICBjb25zdCBjb250ZW50VHlwZSA9IHJlc3BvbnNlLmNvbnRlbnRUeXBlID8/IFwiXCI7XG4gIHJldHVybiBjb250ZW50VHlwZS5zdGFydHNXaXRoKFN0cmVhbU1lc3NhZ2UuY29udGVudFR5cGUpXG59XG5cbmNsYXNzIEVycm9yUmVuZGVyZXIgZXh0ZW5kcyBSZW5kZXJlciB7XG4gIHN0YXRpYyByZW5kZXJFbGVtZW50KGN1cnJlbnRFbGVtZW50LCBuZXdFbGVtZW50KSB7XG4gICAgY29uc3QgeyBkb2N1bWVudEVsZW1lbnQsIGJvZHkgfSA9IGRvY3VtZW50O1xuXG4gICAgZG9jdW1lbnRFbGVtZW50LnJlcGxhY2VDaGlsZChuZXdFbGVtZW50LCBib2R5KTtcbiAgfVxuXG4gIGFzeW5jIHJlbmRlcigpIHtcbiAgICB0aGlzLnJlcGxhY2VIZWFkQW5kQm9keSgpO1xuICAgIHRoaXMuYWN0aXZhdGVTY3JpcHRFbGVtZW50cygpO1xuICB9XG5cbiAgcmVwbGFjZUhlYWRBbmRCb2R5KCkge1xuICAgIGNvbnN0IHsgZG9jdW1lbnRFbGVtZW50LCBoZWFkIH0gPSBkb2N1bWVudDtcbiAgICBkb2N1bWVudEVsZW1lbnQucmVwbGFjZUNoaWxkKHRoaXMubmV3SGVhZCwgaGVhZCk7XG4gICAgdGhpcy5yZW5kZXJFbGVtZW50KHRoaXMuY3VycmVudEVsZW1lbnQsIHRoaXMubmV3RWxlbWVudCk7XG4gIH1cblxuICBhY3RpdmF0ZVNjcmlwdEVsZW1lbnRzKCkge1xuICAgIGZvciAoY29uc3QgcmVwbGFjZWFibGVFbGVtZW50IG9mIHRoaXMuc2NyaXB0RWxlbWVudHMpIHtcbiAgICAgIGNvbnN0IHBhcmVudE5vZGUgPSByZXBsYWNlYWJsZUVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICAgIGlmIChwYXJlbnROb2RlKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBhY3RpdmF0ZVNjcmlwdEVsZW1lbnQocmVwbGFjZWFibGVFbGVtZW50KTtcbiAgICAgICAgcGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoZWxlbWVudCwgcmVwbGFjZWFibGVFbGVtZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXQgbmV3SGVhZCgpIHtcbiAgICByZXR1cm4gdGhpcy5uZXdTbmFwc2hvdC5oZWFkU25hcHNob3QuZWxlbWVudFxuICB9XG5cbiAgZ2V0IHNjcmlwdEVsZW1lbnRzKCkge1xuICAgIHJldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcInNjcmlwdFwiKVxuICB9XG59XG5cbmNsYXNzIFBhZ2VSZW5kZXJlciBleHRlbmRzIFJlbmRlcmVyIHtcbiAgc3RhdGljIHJlbmRlckVsZW1lbnQoY3VycmVudEVsZW1lbnQsIG5ld0VsZW1lbnQpIHtcbiAgICBpZiAoZG9jdW1lbnQuYm9keSAmJiBuZXdFbGVtZW50IGluc3RhbmNlb2YgSFRNTEJvZHlFbGVtZW50KSB7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlcGxhY2VXaXRoKG5ld0VsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQobmV3RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHNob3VsZFJlbmRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5uZXdTbmFwc2hvdC5pc1Zpc2l0YWJsZSAmJiB0aGlzLnRyYWNrZWRFbGVtZW50c0FyZUlkZW50aWNhbFxuICB9XG5cbiAgZ2V0IHJlbG9hZFJlYXNvbigpIHtcbiAgICBpZiAoIXRoaXMubmV3U25hcHNob3QuaXNWaXNpdGFibGUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlYXNvbjogXCJ0dXJib192aXNpdF9jb250cm9sX2lzX3JlbG9hZFwiXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnRyYWNrZWRFbGVtZW50c0FyZUlkZW50aWNhbCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVhc29uOiBcInRyYWNrZWRfZWxlbWVudF9taXNtYXRjaFwiXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcHJlcGFyZVRvUmVuZGVyKCkge1xuICAgIHRoaXMuI3NldExhbmd1YWdlKCk7XG4gICAgYXdhaXQgdGhpcy5tZXJnZUhlYWQoKTtcbiAgfVxuXG4gIGFzeW5jIHJlbmRlcigpIHtcbiAgICBpZiAodGhpcy53aWxsUmVuZGVyKSB7XG4gICAgICBhd2FpdCB0aGlzLnJlcGxhY2VCb2R5KCk7XG4gICAgfVxuICB9XG5cbiAgZmluaXNoUmVuZGVyaW5nKCkge1xuICAgIHN1cGVyLmZpbmlzaFJlbmRlcmluZygpO1xuICAgIGlmICghdGhpcy5pc1ByZXZpZXcpIHtcbiAgICAgIHRoaXMuZm9jdXNGaXJzdEF1dG9mb2N1c2FibGVFbGVtZW50KCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGN1cnJlbnRIZWFkU25hcHNob3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudFNuYXBzaG90LmhlYWRTbmFwc2hvdFxuICB9XG5cbiAgZ2V0IG5ld0hlYWRTbmFwc2hvdCgpIHtcbiAgICByZXR1cm4gdGhpcy5uZXdTbmFwc2hvdC5oZWFkU25hcHNob3RcbiAgfVxuXG4gIGdldCBuZXdFbGVtZW50KCkge1xuICAgIHJldHVybiB0aGlzLm5ld1NuYXBzaG90LmVsZW1lbnRcbiAgfVxuXG4gICNzZXRMYW5ndWFnZSgpIHtcbiAgICBjb25zdCB7IGRvY3VtZW50RWxlbWVudCB9ID0gdGhpcy5jdXJyZW50U25hcHNob3Q7XG4gICAgY29uc3QgeyBsYW5nIH0gPSB0aGlzLm5ld1NuYXBzaG90O1xuXG4gICAgaWYgKGxhbmcpIHtcbiAgICAgIGRvY3VtZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJsYW5nXCIsIGxhbmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwibGFuZ1wiKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBtZXJnZUhlYWQoKSB7XG4gICAgY29uc3QgbWVyZ2VkSGVhZEVsZW1lbnRzID0gdGhpcy5tZXJnZVByb3Zpc2lvbmFsRWxlbWVudHMoKTtcbiAgICBjb25zdCBuZXdTdHlsZXNoZWV0RWxlbWVudHMgPSB0aGlzLmNvcHlOZXdIZWFkU3R5bGVzaGVldEVsZW1lbnRzKCk7XG4gICAgdGhpcy5jb3B5TmV3SGVhZFNjcmlwdEVsZW1lbnRzKCk7XG5cbiAgICBhd2FpdCBtZXJnZWRIZWFkRWxlbWVudHM7XG4gICAgYXdhaXQgbmV3U3R5bGVzaGVldEVsZW1lbnRzO1xuXG4gICAgaWYgKHRoaXMud2lsbFJlbmRlcikge1xuICAgICAgdGhpcy5yZW1vdmVVbnVzZWREeW5hbWljU3R5bGVzaGVldEVsZW1lbnRzKCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmVwbGFjZUJvZHkoKSB7XG4gICAgYXdhaXQgdGhpcy5wcmVzZXJ2aW5nUGVybWFuZW50RWxlbWVudHMoYXN5bmMgKCkgPT4ge1xuICAgICAgdGhpcy5hY3RpdmF0ZU5ld0JvZHkoKTtcbiAgICAgIGF3YWl0IHRoaXMuYXNzaWduTmV3Qm9keSgpO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0IHRyYWNrZWRFbGVtZW50c0FyZUlkZW50aWNhbCgpIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50SGVhZFNuYXBzaG90LnRyYWNrZWRFbGVtZW50U2lnbmF0dXJlID09IHRoaXMubmV3SGVhZFNuYXBzaG90LnRyYWNrZWRFbGVtZW50U2lnbmF0dXJlXG4gIH1cblxuICBhc3luYyBjb3B5TmV3SGVhZFN0eWxlc2hlZXRFbGVtZW50cygpIHtcbiAgICBjb25zdCBsb2FkaW5nRWxlbWVudHMgPSBbXTtcblxuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLm5ld0hlYWRTdHlsZXNoZWV0RWxlbWVudHMpIHtcbiAgICAgIGxvYWRpbmdFbGVtZW50cy5wdXNoKHdhaXRGb3JMb2FkKGVsZW1lbnQpKTtcblxuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICB9XG5cbiAgICBhd2FpdCBQcm9taXNlLmFsbChsb2FkaW5nRWxlbWVudHMpO1xuICB9XG5cbiAgY29weU5ld0hlYWRTY3JpcHRFbGVtZW50cygpIHtcbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgdGhpcy5uZXdIZWFkU2NyaXB0RWxlbWVudHMpIHtcbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoYWN0aXZhdGVTY3JpcHRFbGVtZW50KGVsZW1lbnQpKTtcbiAgICB9XG4gIH1cblxuICByZW1vdmVVbnVzZWREeW5hbWljU3R5bGVzaGVldEVsZW1lbnRzKCkge1xuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLnVudXNlZER5bmFtaWNTdHlsZXNoZWV0RWxlbWVudHMpIHtcbiAgICAgIGRvY3VtZW50LmhlYWQucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbWVyZ2VQcm92aXNpb25hbEVsZW1lbnRzKCkge1xuICAgIGNvbnN0IG5ld0hlYWRFbGVtZW50cyA9IFsuLi50aGlzLm5ld0hlYWRQcm92aXNpb25hbEVsZW1lbnRzXTtcblxuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLmN1cnJlbnRIZWFkUHJvdmlzaW9uYWxFbGVtZW50cykge1xuICAgICAgaWYgKCF0aGlzLmlzQ3VycmVudEVsZW1lbnRJbkVsZW1lbnRMaXN0KGVsZW1lbnQsIG5ld0hlYWRFbGVtZW50cykpIHtcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5yZW1vdmVDaGlsZChlbGVtZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgbmV3SGVhZEVsZW1lbnRzKSB7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIGlzQ3VycmVudEVsZW1lbnRJbkVsZW1lbnRMaXN0KGVsZW1lbnQsIGVsZW1lbnRMaXN0KSB7XG4gICAgZm9yIChjb25zdCBbaW5kZXgsIG5ld0VsZW1lbnRdIG9mIGVsZW1lbnRMaXN0LmVudHJpZXMoKSkge1xuICAgICAgLy8gaWYgdGl0bGUgZWxlbWVudC4uLlxuICAgICAgaWYgKGVsZW1lbnQudGFnTmFtZSA9PSBcIlRJVExFXCIpIHtcbiAgICAgICAgaWYgKG5ld0VsZW1lbnQudGFnTmFtZSAhPSBcIlRJVExFXCIpIHtcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChlbGVtZW50LmlubmVySFRNTCA9PSBuZXdFbGVtZW50LmlubmVySFRNTCkge1xuICAgICAgICAgIGVsZW1lbnRMaXN0LnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBpZiBhbnkgb3RoZXIgZWxlbWVudC4uLlxuICAgICAgaWYgKG5ld0VsZW1lbnQuaXNFcXVhbE5vZGUoZWxlbWVudCkpIHtcbiAgICAgICAgZWxlbWVudExpc3Quc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHJlbW92ZUN1cnJlbnRIZWFkUHJvdmlzaW9uYWxFbGVtZW50cygpIHtcbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgdGhpcy5jdXJyZW50SGVhZFByb3Zpc2lvbmFsRWxlbWVudHMpIHtcbiAgICAgIGRvY3VtZW50LmhlYWQucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgY29weU5ld0hlYWRQcm92aXNpb25hbEVsZW1lbnRzKCkge1xuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLm5ld0hlYWRQcm92aXNpb25hbEVsZW1lbnRzKSB7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIGFjdGl2YXRlTmV3Qm9keSgpIHtcbiAgICBkb2N1bWVudC5hZG9wdE5vZGUodGhpcy5uZXdFbGVtZW50KTtcbiAgICB0aGlzLmFjdGl2YXRlTmV3Qm9keVNjcmlwdEVsZW1lbnRzKCk7XG4gIH1cblxuICBhY3RpdmF0ZU5ld0JvZHlTY3JpcHRFbGVtZW50cygpIHtcbiAgICBmb3IgKGNvbnN0IGluZXJ0U2NyaXB0RWxlbWVudCBvZiB0aGlzLm5ld0JvZHlTY3JpcHRFbGVtZW50cykge1xuICAgICAgY29uc3QgYWN0aXZhdGVkU2NyaXB0RWxlbWVudCA9IGFjdGl2YXRlU2NyaXB0RWxlbWVudChpbmVydFNjcmlwdEVsZW1lbnQpO1xuICAgICAgaW5lcnRTY3JpcHRFbGVtZW50LnJlcGxhY2VXaXRoKGFjdGl2YXRlZFNjcmlwdEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGFzc2lnbk5ld0JvZHkoKSB7XG4gICAgYXdhaXQgdGhpcy5yZW5kZXJFbGVtZW50KHRoaXMuY3VycmVudEVsZW1lbnQsIHRoaXMubmV3RWxlbWVudCk7XG4gIH1cblxuICBnZXQgdW51c2VkRHluYW1pY1N0eWxlc2hlZXRFbGVtZW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5vbGRIZWFkU3R5bGVzaGVldEVsZW1lbnRzLmZpbHRlcigoZWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS10dXJiby10cmFja1wiKSA9PT0gXCJkeW5hbWljXCJcbiAgICB9KVxuICB9XG5cbiAgZ2V0IG9sZEhlYWRTdHlsZXNoZWV0RWxlbWVudHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudEhlYWRTbmFwc2hvdC5nZXRTdHlsZXNoZWV0RWxlbWVudHNOb3RJblNuYXBzaG90KHRoaXMubmV3SGVhZFNuYXBzaG90KVxuICB9XG5cbiAgZ2V0IG5ld0hlYWRTdHlsZXNoZWV0RWxlbWVudHMoKSB7XG4gICAgcmV0dXJuIHRoaXMubmV3SGVhZFNuYXBzaG90LmdldFN0eWxlc2hlZXRFbGVtZW50c05vdEluU25hcHNob3QodGhpcy5jdXJyZW50SGVhZFNuYXBzaG90KVxuICB9XG5cbiAgZ2V0IG5ld0hlYWRTY3JpcHRFbGVtZW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5uZXdIZWFkU25hcHNob3QuZ2V0U2NyaXB0RWxlbWVudHNOb3RJblNuYXBzaG90KHRoaXMuY3VycmVudEhlYWRTbmFwc2hvdClcbiAgfVxuXG4gIGdldCBjdXJyZW50SGVhZFByb3Zpc2lvbmFsRWxlbWVudHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudEhlYWRTbmFwc2hvdC5wcm92aXNpb25hbEVsZW1lbnRzXG4gIH1cblxuICBnZXQgbmV3SGVhZFByb3Zpc2lvbmFsRWxlbWVudHMoKSB7XG4gICAgcmV0dXJuIHRoaXMubmV3SGVhZFNuYXBzaG90LnByb3Zpc2lvbmFsRWxlbWVudHNcbiAgfVxuXG4gIGdldCBuZXdCb2R5U2NyaXB0RWxlbWVudHMoKSB7XG4gICAgcmV0dXJuIHRoaXMubmV3RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwic2NyaXB0XCIpXG4gIH1cbn1cblxuY2xhc3MgTW9ycGhpbmdQYWdlUmVuZGVyZXIgZXh0ZW5kcyBQYWdlUmVuZGVyZXIge1xuICBzdGF0aWMgcmVuZGVyRWxlbWVudChjdXJyZW50RWxlbWVudCwgbmV3RWxlbWVudCkge1xuICAgIG1vcnBoRWxlbWVudHMoY3VycmVudEVsZW1lbnQsIG5ld0VsZW1lbnQsIHtcbiAgICAgIGNhbGxiYWNrczoge1xuICAgICAgICBiZWZvcmVOb2RlTW9ycGhlZDogKG5vZGUsIG5ld05vZGUpID0+IHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBzaG91bGRSZWZyZXNoRnJhbWVXaXRoTW9ycGhpbmcobm9kZSwgbmV3Tm9kZSkgJiZcbiAgICAgICAgICAgICAgIWNsb3Nlc3RGcmFtZVJlbG9hZGFibGVXaXRoTW9ycGhpbmcobm9kZSlcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIG5vZGUucmVsb2FkKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZGlzcGF0Y2goXCJ0dXJibzptb3JwaFwiLCB7IGRldGFpbDogeyBjdXJyZW50RWxlbWVudCwgbmV3RWxlbWVudCB9IH0pO1xuICB9XG5cbiAgYXN5bmMgcHJlc2VydmluZ1Blcm1hbmVudEVsZW1lbnRzKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIGF3YWl0IGNhbGxiYWNrKClcbiAgfVxuXG4gIGdldCByZW5kZXJNZXRob2QoKSB7XG4gICAgcmV0dXJuIFwibW9ycGhcIlxuICB9XG5cbiAgZ2V0IHNob3VsZEF1dG9mb2N1cygpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5jbGFzcyBTbmFwc2hvdENhY2hlIHtcbiAga2V5cyA9IFtdXG4gIHNuYXBzaG90cyA9IHt9XG5cbiAgY29uc3RydWN0b3Ioc2l6ZSkge1xuICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gIH1cblxuICBoYXMobG9jYXRpb24pIHtcbiAgICByZXR1cm4gdG9DYWNoZUtleShsb2NhdGlvbikgaW4gdGhpcy5zbmFwc2hvdHNcbiAgfVxuXG4gIGdldChsb2NhdGlvbikge1xuICAgIGlmICh0aGlzLmhhcyhsb2NhdGlvbikpIHtcbiAgICAgIGNvbnN0IHNuYXBzaG90ID0gdGhpcy5yZWFkKGxvY2F0aW9uKTtcbiAgICAgIHRoaXMudG91Y2gobG9jYXRpb24pO1xuICAgICAgcmV0dXJuIHNuYXBzaG90XG4gICAgfVxuICB9XG5cbiAgcHV0KGxvY2F0aW9uLCBzbmFwc2hvdCkge1xuICAgIHRoaXMud3JpdGUobG9jYXRpb24sIHNuYXBzaG90KTtcbiAgICB0aGlzLnRvdWNoKGxvY2F0aW9uKTtcbiAgICByZXR1cm4gc25hcHNob3RcbiAgfVxuXG4gIGNsZWFyKCkge1xuICAgIHRoaXMuc25hcHNob3RzID0ge307XG4gIH1cblxuICAvLyBQcml2YXRlXG5cbiAgcmVhZChsb2NhdGlvbikge1xuICAgIHJldHVybiB0aGlzLnNuYXBzaG90c1t0b0NhY2hlS2V5KGxvY2F0aW9uKV1cbiAgfVxuXG4gIHdyaXRlKGxvY2F0aW9uLCBzbmFwc2hvdCkge1xuICAgIHRoaXMuc25hcHNob3RzW3RvQ2FjaGVLZXkobG9jYXRpb24pXSA9IHNuYXBzaG90O1xuICB9XG5cbiAgdG91Y2gobG9jYXRpb24pIHtcbiAgICBjb25zdCBrZXkgPSB0b0NhY2hlS2V5KGxvY2F0aW9uKTtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMua2V5cy5pbmRleE9mKGtleSk7XG4gICAgaWYgKGluZGV4ID4gLTEpIHRoaXMua2V5cy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIHRoaXMua2V5cy51bnNoaWZ0KGtleSk7XG4gICAgdGhpcy50cmltKCk7XG4gIH1cblxuICB0cmltKCkge1xuICAgIGZvciAoY29uc3Qga2V5IG9mIHRoaXMua2V5cy5zcGxpY2UodGhpcy5zaXplKSkge1xuICAgICAgZGVsZXRlIHRoaXMuc25hcHNob3RzW2tleV07XG4gICAgfVxuICB9XG59XG5cbmNsYXNzIFBhZ2VWaWV3IGV4dGVuZHMgVmlldyB7XG4gIHNuYXBzaG90Q2FjaGUgPSBuZXcgU25hcHNob3RDYWNoZSgxMClcbiAgbGFzdFJlbmRlcmVkTG9jYXRpb24gPSBuZXcgVVJMKGxvY2F0aW9uLmhyZWYpXG4gIGZvcmNlUmVsb2FkZWQgPSBmYWxzZVxuXG4gIHNob3VsZFRyYW5zaXRpb25UbyhuZXdTbmFwc2hvdCkge1xuICAgIHJldHVybiB0aGlzLnNuYXBzaG90LnByZWZlcnNWaWV3VHJhbnNpdGlvbnMgJiYgbmV3U25hcHNob3QucHJlZmVyc1ZpZXdUcmFuc2l0aW9uc1xuICB9XG5cbiAgcmVuZGVyUGFnZShzbmFwc2hvdCwgaXNQcmV2aWV3ID0gZmFsc2UsIHdpbGxSZW5kZXIgPSB0cnVlLCB2aXNpdCkge1xuICAgIGNvbnN0IHNob3VsZE1vcnBoUGFnZSA9IHRoaXMuaXNQYWdlUmVmcmVzaCh2aXNpdCkgJiYgdGhpcy5zbmFwc2hvdC5zaG91bGRNb3JwaFBhZ2U7XG4gICAgY29uc3QgcmVuZGVyZXJDbGFzcyA9IHNob3VsZE1vcnBoUGFnZSA/IE1vcnBoaW5nUGFnZVJlbmRlcmVyIDogUGFnZVJlbmRlcmVyO1xuXG4gICAgY29uc3QgcmVuZGVyZXIgPSBuZXcgcmVuZGVyZXJDbGFzcyh0aGlzLnNuYXBzaG90LCBzbmFwc2hvdCwgaXNQcmV2aWV3LCB3aWxsUmVuZGVyKTtcblxuICAgIGlmICghcmVuZGVyZXIuc2hvdWxkUmVuZGVyKSB7XG4gICAgICB0aGlzLmZvcmNlUmVsb2FkZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB2aXNpdD8uY2hhbmdlSGlzdG9yeSgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnJlbmRlcihyZW5kZXJlcilcbiAgfVxuXG4gIHJlbmRlckVycm9yKHNuYXBzaG90LCB2aXNpdCkge1xuICAgIHZpc2l0Py5jaGFuZ2VIaXN0b3J5KCk7XG4gICAgY29uc3QgcmVuZGVyZXIgPSBuZXcgRXJyb3JSZW5kZXJlcih0aGlzLnNuYXBzaG90LCBzbmFwc2hvdCwgZmFsc2UpO1xuICAgIHJldHVybiB0aGlzLnJlbmRlcihyZW5kZXJlcilcbiAgfVxuXG4gIGNsZWFyU25hcHNob3RDYWNoZSgpIHtcbiAgICB0aGlzLnNuYXBzaG90Q2FjaGUuY2xlYXIoKTtcbiAgfVxuXG4gIGFzeW5jIGNhY2hlU25hcHNob3Qoc25hcHNob3QgPSB0aGlzLnNuYXBzaG90KSB7XG4gICAgaWYgKHNuYXBzaG90LmlzQ2FjaGVhYmxlKSB7XG4gICAgICB0aGlzLmRlbGVnYXRlLnZpZXdXaWxsQ2FjaGVTbmFwc2hvdCgpO1xuICAgICAgY29uc3QgeyBsYXN0UmVuZGVyZWRMb2NhdGlvbjogbG9jYXRpb24gfSA9IHRoaXM7XG4gICAgICBhd2FpdCBuZXh0RXZlbnRMb29wVGljaygpO1xuICAgICAgY29uc3QgY2FjaGVkU25hcHNob3QgPSBzbmFwc2hvdC5jbG9uZSgpO1xuICAgICAgdGhpcy5zbmFwc2hvdENhY2hlLnB1dChsb2NhdGlvbiwgY2FjaGVkU25hcHNob3QpO1xuICAgICAgcmV0dXJuIGNhY2hlZFNuYXBzaG90XG4gICAgfVxuICB9XG5cbiAgZ2V0Q2FjaGVkU25hcHNob3RGb3JMb2NhdGlvbihsb2NhdGlvbikge1xuICAgIHJldHVybiB0aGlzLnNuYXBzaG90Q2FjaGUuZ2V0KGxvY2F0aW9uKVxuICB9XG5cbiAgaXNQYWdlUmVmcmVzaCh2aXNpdCkge1xuICAgIHJldHVybiAhdmlzaXQgfHwgKHRoaXMubGFzdFJlbmRlcmVkTG9jYXRpb24ucGF0aG5hbWUgPT09IHZpc2l0LmxvY2F0aW9uLnBhdGhuYW1lICYmIHZpc2l0LmFjdGlvbiA9PT0gXCJyZXBsYWNlXCIpXG4gIH1cblxuICBzaG91bGRQcmVzZXJ2ZVNjcm9sbFBvc2l0aW9uKHZpc2l0KSB7XG4gICAgcmV0dXJuIHRoaXMuaXNQYWdlUmVmcmVzaCh2aXNpdCkgJiYgdGhpcy5zbmFwc2hvdC5zaG91bGRQcmVzZXJ2ZVNjcm9sbFBvc2l0aW9uXG4gIH1cblxuICBnZXQgc25hcHNob3QoKSB7XG4gICAgcmV0dXJuIFBhZ2VTbmFwc2hvdC5mcm9tRWxlbWVudCh0aGlzLmVsZW1lbnQpXG4gIH1cbn1cblxuY2xhc3MgUHJlbG9hZGVyIHtcbiAgc2VsZWN0b3IgPSBcImFbZGF0YS10dXJiby1wcmVsb2FkXVwiXG5cbiAgY29uc3RydWN0b3IoZGVsZWdhdGUsIHNuYXBzaG90Q2FjaGUpIHtcbiAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gICAgdGhpcy5zbmFwc2hvdENhY2hlID0gc25hcHNob3RDYWNoZTtcbiAgfVxuXG4gIHN0YXJ0KCkge1xuICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImxvYWRpbmdcIikge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgdGhpcy4jcHJlbG9hZEFsbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucHJlbG9hZE9uTG9hZExpbmtzRm9yVmlldyhkb2N1bWVudC5ib2R5KTtcbiAgICB9XG4gIH1cblxuICBzdG9wKCkge1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIHRoaXMuI3ByZWxvYWRBbGwpO1xuICB9XG5cbiAgcHJlbG9hZE9uTG9hZExpbmtzRm9yVmlldyhlbGVtZW50KSB7XG4gICAgZm9yIChjb25zdCBsaW5rIG9mIGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLnNlbGVjdG9yKSkge1xuICAgICAgaWYgKHRoaXMuZGVsZWdhdGUuc2hvdWxkUHJlbG9hZExpbmsobGluaykpIHtcbiAgICAgICAgdGhpcy5wcmVsb2FkVVJMKGxpbmspO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHByZWxvYWRVUkwobGluaykge1xuICAgIGNvbnN0IGxvY2F0aW9uID0gbmV3IFVSTChsaW5rLmhyZWYpO1xuXG4gICAgaWYgKHRoaXMuc25hcHNob3RDYWNoZS5oYXMobG9jYXRpb24pKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBmZXRjaFJlcXVlc3QgPSBuZXcgRmV0Y2hSZXF1ZXN0KHRoaXMsIEZldGNoTWV0aG9kLmdldCwgbG9jYXRpb24sIG5ldyBVUkxTZWFyY2hQYXJhbXMoKSwgbGluayk7XG4gICAgYXdhaXQgZmV0Y2hSZXF1ZXN0LnBlcmZvcm0oKTtcbiAgfVxuXG4gIC8vIEZldGNoIHJlcXVlc3QgZGVsZWdhdGVcblxuICBwcmVwYXJlUmVxdWVzdChmZXRjaFJlcXVlc3QpIHtcbiAgICBmZXRjaFJlcXVlc3QuaGVhZGVyc1tcIlgtU2VjLVB1cnBvc2VcIl0gPSBcInByZWZldGNoXCI7XG4gIH1cblxuICBhc3luYyByZXF1ZXN0U3VjY2VlZGVkV2l0aFJlc3BvbnNlKGZldGNoUmVxdWVzdCwgZmV0Y2hSZXNwb25zZSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZUhUTUwgPSBhd2FpdCBmZXRjaFJlc3BvbnNlLnJlc3BvbnNlSFRNTDtcbiAgICAgIGNvbnN0IHNuYXBzaG90ID0gUGFnZVNuYXBzaG90LmZyb21IVE1MU3RyaW5nKHJlc3BvbnNlSFRNTCk7XG5cbiAgICAgIHRoaXMuc25hcHNob3RDYWNoZS5wdXQoZmV0Y2hSZXF1ZXN0LnVybCwgc25hcHNob3QpO1xuICAgIH0gY2F0Y2ggKF8pIHtcbiAgICAgIC8vIElmIHdlIGNhbm5vdCBwcmVsb2FkIHRoYXQgaXMgb2shXG4gICAgfVxuICB9XG5cbiAgcmVxdWVzdFN0YXJ0ZWQoZmV0Y2hSZXF1ZXN0KSB7fVxuXG4gIHJlcXVlc3RFcnJvcmVkKGZldGNoUmVxdWVzdCkge31cblxuICByZXF1ZXN0RmluaXNoZWQoZmV0Y2hSZXF1ZXN0KSB7fVxuXG4gIHJlcXVlc3RQcmV2ZW50ZWRIYW5kbGluZ1Jlc3BvbnNlKGZldGNoUmVxdWVzdCwgZmV0Y2hSZXNwb25zZSkge31cblxuICByZXF1ZXN0RmFpbGVkV2l0aFJlc3BvbnNlKGZldGNoUmVxdWVzdCwgZmV0Y2hSZXNwb25zZSkge31cblxuICAjcHJlbG9hZEFsbCA9ICgpID0+IHtcbiAgICB0aGlzLnByZWxvYWRPbkxvYWRMaW5rc0ZvclZpZXcoZG9jdW1lbnQuYm9keSk7XG4gIH1cbn1cblxuY2xhc3MgQ2FjaGUge1xuICBjb25zdHJ1Y3RvcihzZXNzaW9uKSB7XG4gICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcbiAgfVxuXG4gIGNsZWFyKCkge1xuICAgIHRoaXMuc2Vzc2lvbi5jbGVhckNhY2hlKCk7XG4gIH1cblxuICByZXNldENhY2hlQ29udHJvbCgpIHtcbiAgICB0aGlzLiNzZXRDYWNoZUNvbnRyb2woXCJcIik7XG4gIH1cblxuICBleGVtcHRQYWdlRnJvbUNhY2hlKCkge1xuICAgIHRoaXMuI3NldENhY2hlQ29udHJvbChcIm5vLWNhY2hlXCIpO1xuICB9XG5cbiAgZXhlbXB0UGFnZUZyb21QcmV2aWV3KCkge1xuICAgIHRoaXMuI3NldENhY2hlQ29udHJvbChcIm5vLXByZXZpZXdcIik7XG4gIH1cblxuICAjc2V0Q2FjaGVDb250cm9sKHZhbHVlKSB7XG4gICAgc2V0TWV0YUNvbnRlbnQoXCJ0dXJiby1jYWNoZS1jb250cm9sXCIsIHZhbHVlKTtcbiAgfVxufVxuXG5jbGFzcyBTZXNzaW9uIHtcbiAgbmF2aWdhdG9yID0gbmV3IE5hdmlnYXRvcih0aGlzKVxuICBoaXN0b3J5ID0gbmV3IEhpc3RvcnkodGhpcylcbiAgdmlldyA9IG5ldyBQYWdlVmlldyh0aGlzLCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpXG4gIGFkYXB0ZXIgPSBuZXcgQnJvd3NlckFkYXB0ZXIodGhpcylcblxuICBwYWdlT2JzZXJ2ZXIgPSBuZXcgUGFnZU9ic2VydmVyKHRoaXMpXG4gIGNhY2hlT2JzZXJ2ZXIgPSBuZXcgQ2FjaGVPYnNlcnZlcigpXG4gIGxpbmtQcmVmZXRjaE9ic2VydmVyID0gbmV3IExpbmtQcmVmZXRjaE9ic2VydmVyKHRoaXMsIGRvY3VtZW50KVxuICBsaW5rQ2xpY2tPYnNlcnZlciA9IG5ldyBMaW5rQ2xpY2tPYnNlcnZlcih0aGlzLCB3aW5kb3cpXG4gIGZvcm1TdWJtaXRPYnNlcnZlciA9IG5ldyBGb3JtU3VibWl0T2JzZXJ2ZXIodGhpcywgZG9jdW1lbnQpXG4gIHNjcm9sbE9ic2VydmVyID0gbmV3IFNjcm9sbE9ic2VydmVyKHRoaXMpXG4gIHN0cmVhbU9ic2VydmVyID0gbmV3IFN0cmVhbU9ic2VydmVyKHRoaXMpXG4gIGZvcm1MaW5rQ2xpY2tPYnNlcnZlciA9IG5ldyBGb3JtTGlua0NsaWNrT2JzZXJ2ZXIodGhpcywgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KVxuICBmcmFtZVJlZGlyZWN0b3IgPSBuZXcgRnJhbWVSZWRpcmVjdG9yKHRoaXMsIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudClcbiAgc3RyZWFtTWVzc2FnZVJlbmRlcmVyID0gbmV3IFN0cmVhbU1lc3NhZ2VSZW5kZXJlcigpXG4gIGNhY2hlID0gbmV3IENhY2hlKHRoaXMpXG5cbiAgZW5hYmxlZCA9IHRydWVcbiAgc3RhcnRlZCA9IGZhbHNlXG4gICNwYWdlUmVmcmVzaERlYm91bmNlUGVyaW9kID0gMTUwXG5cbiAgY29uc3RydWN0b3IocmVjZW50UmVxdWVzdHMpIHtcbiAgICB0aGlzLnJlY2VudFJlcXVlc3RzID0gcmVjZW50UmVxdWVzdHM7XG4gICAgdGhpcy5wcmVsb2FkZXIgPSBuZXcgUHJlbG9hZGVyKHRoaXMsIHRoaXMudmlldy5zbmFwc2hvdENhY2hlKTtcbiAgICB0aGlzLmRlYm91bmNlZFJlZnJlc2ggPSB0aGlzLnJlZnJlc2g7XG4gICAgdGhpcy5wYWdlUmVmcmVzaERlYm91bmNlUGVyaW9kID0gdGhpcy5wYWdlUmVmcmVzaERlYm91bmNlUGVyaW9kO1xuICB9XG5cbiAgc3RhcnQoKSB7XG4gICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgIHRoaXMucGFnZU9ic2VydmVyLnN0YXJ0KCk7XG4gICAgICB0aGlzLmNhY2hlT2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICAgIHRoaXMubGlua1ByZWZldGNoT2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICAgIHRoaXMuZm9ybUxpbmtDbGlja09ic2VydmVyLnN0YXJ0KCk7XG4gICAgICB0aGlzLmxpbmtDbGlja09ic2VydmVyLnN0YXJ0KCk7XG4gICAgICB0aGlzLmZvcm1TdWJtaXRPYnNlcnZlci5zdGFydCgpO1xuICAgICAgdGhpcy5zY3JvbGxPYnNlcnZlci5zdGFydCgpO1xuICAgICAgdGhpcy5zdHJlYW1PYnNlcnZlci5zdGFydCgpO1xuICAgICAgdGhpcy5mcmFtZVJlZGlyZWN0b3Iuc3RhcnQoKTtcbiAgICAgIHRoaXMuaGlzdG9yeS5zdGFydCgpO1xuICAgICAgdGhpcy5wcmVsb2FkZXIuc3RhcnQoKTtcbiAgICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XG4gICAgICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGRpc2FibGUoKSB7XG4gICAgdGhpcy5lbmFibGVkID0gZmFsc2U7XG4gIH1cblxuICBzdG9wKCkge1xuICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgIHRoaXMucGFnZU9ic2VydmVyLnN0b3AoKTtcbiAgICAgIHRoaXMuY2FjaGVPYnNlcnZlci5zdG9wKCk7XG4gICAgICB0aGlzLmxpbmtQcmVmZXRjaE9ic2VydmVyLnN0b3AoKTtcbiAgICAgIHRoaXMuZm9ybUxpbmtDbGlja09ic2VydmVyLnN0b3AoKTtcbiAgICAgIHRoaXMubGlua0NsaWNrT2JzZXJ2ZXIuc3RvcCgpO1xuICAgICAgdGhpcy5mb3JtU3VibWl0T2JzZXJ2ZXIuc3RvcCgpO1xuICAgICAgdGhpcy5zY3JvbGxPYnNlcnZlci5zdG9wKCk7XG4gICAgICB0aGlzLnN0cmVhbU9ic2VydmVyLnN0b3AoKTtcbiAgICAgIHRoaXMuZnJhbWVSZWRpcmVjdG9yLnN0b3AoKTtcbiAgICAgIHRoaXMuaGlzdG9yeS5zdG9wKCk7XG4gICAgICB0aGlzLnByZWxvYWRlci5zdG9wKCk7XG4gICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZWdpc3RlckFkYXB0ZXIoYWRhcHRlcikge1xuICAgIHRoaXMuYWRhcHRlciA9IGFkYXB0ZXI7XG4gIH1cblxuICB2aXNpdChsb2NhdGlvbiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgZnJhbWVFbGVtZW50ID0gb3B0aW9ucy5mcmFtZSA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG9wdGlvbnMuZnJhbWUpIDogbnVsbDtcblxuICAgIGlmIChmcmFtZUVsZW1lbnQgaW5zdGFuY2VvZiBGcmFtZUVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IGFjdGlvbiA9IG9wdGlvbnMuYWN0aW9uIHx8IGdldFZpc2l0QWN0aW9uKGZyYW1lRWxlbWVudCk7XG5cbiAgICAgIGZyYW1lRWxlbWVudC5kZWxlZ2F0ZS5wcm9wb3NlVmlzaXRJZk5hdmlnYXRlZFdpdGhBY3Rpb24oZnJhbWVFbGVtZW50LCBhY3Rpb24pO1xuICAgICAgZnJhbWVFbGVtZW50LnNyYyA9IGxvY2F0aW9uLnRvU3RyaW5nKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubmF2aWdhdG9yLnByb3Bvc2VWaXNpdChleHBhbmRVUkwobG9jYXRpb24pLCBvcHRpb25zKTtcbiAgICB9XG4gIH1cblxuICByZWZyZXNoKHVybCwgcmVxdWVzdElkKSB7XG4gICAgY29uc3QgaXNSZWNlbnRSZXF1ZXN0ID0gcmVxdWVzdElkICYmIHRoaXMucmVjZW50UmVxdWVzdHMuaGFzKHJlcXVlc3RJZCk7XG4gICAgY29uc3QgaXNDdXJyZW50VXJsID0gdXJsID09PSBkb2N1bWVudC5iYXNlVVJJO1xuICAgIGlmICghaXNSZWNlbnRSZXF1ZXN0ICYmICF0aGlzLm5hdmlnYXRvci5jdXJyZW50VmlzaXQgJiYgaXNDdXJyZW50VXJsKSB7XG4gICAgICB0aGlzLnZpc2l0KHVybCwgeyBhY3Rpb246IFwicmVwbGFjZVwiLCBzaG91bGRDYWNoZVNuYXBzaG90OiBmYWxzZSB9KTtcbiAgICB9XG4gIH1cblxuICBjb25uZWN0U3RyZWFtU291cmNlKHNvdXJjZSkge1xuICAgIHRoaXMuc3RyZWFtT2JzZXJ2ZXIuY29ubmVjdFN0cmVhbVNvdXJjZShzb3VyY2UpO1xuICB9XG5cbiAgZGlzY29ubmVjdFN0cmVhbVNvdXJjZShzb3VyY2UpIHtcbiAgICB0aGlzLnN0cmVhbU9ic2VydmVyLmRpc2Nvbm5lY3RTdHJlYW1Tb3VyY2Uoc291cmNlKTtcbiAgfVxuXG4gIHJlbmRlclN0cmVhbU1lc3NhZ2UobWVzc2FnZSkge1xuICAgIHRoaXMuc3RyZWFtTWVzc2FnZVJlbmRlcmVyLnJlbmRlcihTdHJlYW1NZXNzYWdlLndyYXAobWVzc2FnZSkpO1xuICB9XG5cbiAgY2xlYXJDYWNoZSgpIHtcbiAgICB0aGlzLnZpZXcuY2xlYXJTbmFwc2hvdENhY2hlKCk7XG4gIH1cblxuICBzZXRQcm9ncmVzc0JhckRlbGF5KGRlbGF5KSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgXCJQbGVhc2UgcmVwbGFjZSBgc2Vzc2lvbi5zZXRQcm9ncmVzc0JhckRlbGF5KGRlbGF5KWAgd2l0aCBgc2Vzc2lvbi5wcm9ncmVzc0JhckRlbGF5ID0gZGVsYXlgLiBUaGUgZnVuY3Rpb24gaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHZlcnNpb24gb2YgVHVyYm8uYFwiXG4gICAgKTtcblxuICAgIHRoaXMucHJvZ3Jlc3NCYXJEZWxheSA9IGRlbGF5O1xuICB9XG5cbiAgc2V0IHByb2dyZXNzQmFyRGVsYXkoZGVsYXkpIHtcbiAgICBjb25maWcuZHJpdmUucHJvZ3Jlc3NCYXJEZWxheSA9IGRlbGF5O1xuICB9XG5cbiAgZ2V0IHByb2dyZXNzQmFyRGVsYXkoKSB7XG4gICAgcmV0dXJuIGNvbmZpZy5kcml2ZS5wcm9ncmVzc0JhckRlbGF5XG4gIH1cblxuICBzZXQgZHJpdmUodmFsdWUpIHtcbiAgICBjb25maWcuZHJpdmUuZW5hYmxlZCA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IGRyaXZlKCkge1xuICAgIHJldHVybiBjb25maWcuZHJpdmUuZW5hYmxlZFxuICB9XG5cbiAgc2V0IGZvcm1Nb2RlKHZhbHVlKSB7XG4gICAgY29uZmlnLmZvcm1zLm1vZGUgPSB2YWx1ZTtcbiAgfVxuXG4gIGdldCBmb3JtTW9kZSgpIHtcbiAgICByZXR1cm4gY29uZmlnLmZvcm1zLm1vZGVcbiAgfVxuXG4gIGdldCBsb2NhdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5oaXN0b3J5LmxvY2F0aW9uXG4gIH1cblxuICBnZXQgcmVzdG9yYXRpb25JZGVudGlmaWVyKCkge1xuICAgIHJldHVybiB0aGlzLmhpc3RvcnkucmVzdG9yYXRpb25JZGVudGlmaWVyXG4gIH1cblxuICBnZXQgcGFnZVJlZnJlc2hEZWJvdW5jZVBlcmlvZCgpIHtcbiAgICByZXR1cm4gdGhpcy4jcGFnZVJlZnJlc2hEZWJvdW5jZVBlcmlvZFxuICB9XG5cbiAgc2V0IHBhZ2VSZWZyZXNoRGVib3VuY2VQZXJpb2QodmFsdWUpIHtcbiAgICB0aGlzLnJlZnJlc2ggPSBkZWJvdW5jZSh0aGlzLmRlYm91bmNlZFJlZnJlc2guYmluZCh0aGlzKSwgdmFsdWUpO1xuICAgIHRoaXMuI3BhZ2VSZWZyZXNoRGVib3VuY2VQZXJpb2QgPSB2YWx1ZTtcbiAgfVxuXG4gIC8vIFByZWxvYWRlciBkZWxlZ2F0ZVxuXG4gIHNob3VsZFByZWxvYWRMaW5rKGVsZW1lbnQpIHtcbiAgICBjb25zdCBpc1Vuc2FmZSA9IGVsZW1lbnQuaGFzQXR0cmlidXRlKFwiZGF0YS10dXJiby1tZXRob2RcIik7XG4gICAgY29uc3QgaXNTdHJlYW0gPSBlbGVtZW50Lmhhc0F0dHJpYnV0ZShcImRhdGEtdHVyYm8tc3RyZWFtXCIpO1xuICAgIGNvbnN0IGZyYW1lVGFyZ2V0ID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLWZyYW1lXCIpO1xuICAgIGNvbnN0IGZyYW1lID0gZnJhbWVUYXJnZXQgPT0gXCJfdG9wXCIgP1xuICAgICAgbnVsbCA6XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmcmFtZVRhcmdldCkgfHwgZmluZENsb3Nlc3RSZWN1cnNpdmVseShlbGVtZW50LCBcInR1cmJvLWZyYW1lOm5vdChbZGlzYWJsZWRdKVwiKTtcblxuICAgIGlmIChpc1Vuc2FmZSB8fCBpc1N0cmVhbSB8fCBmcmFtZSBpbnN0YW5jZW9mIEZyYW1lRWxlbWVudCkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGxvY2F0aW9uID0gbmV3IFVSTChlbGVtZW50LmhyZWYpO1xuXG4gICAgICByZXR1cm4gdGhpcy5lbGVtZW50SXNOYXZpZ2F0YWJsZShlbGVtZW50KSAmJiBsb2NhdGlvbklzVmlzaXRhYmxlKGxvY2F0aW9uLCB0aGlzLnNuYXBzaG90LnJvb3RMb2NhdGlvbilcbiAgICB9XG4gIH1cblxuICAvLyBIaXN0b3J5IGRlbGVnYXRlXG5cbiAgaGlzdG9yeVBvcHBlZFRvTG9jYXRpb25XaXRoUmVzdG9yYXRpb25JZGVudGlmaWVyQW5kRGlyZWN0aW9uKGxvY2F0aW9uLCByZXN0b3JhdGlvbklkZW50aWZpZXIsIGRpcmVjdGlvbikge1xuICAgIGlmICh0aGlzLmVuYWJsZWQpIHtcbiAgICAgIHRoaXMubmF2aWdhdG9yLnN0YXJ0VmlzaXQobG9jYXRpb24sIHJlc3RvcmF0aW9uSWRlbnRpZmllciwge1xuICAgICAgICBhY3Rpb246IFwicmVzdG9yZVwiLFxuICAgICAgICBoaXN0b3J5Q2hhbmdlZDogdHJ1ZSxcbiAgICAgICAgZGlyZWN0aW9uXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hZGFwdGVyLnBhZ2VJbnZhbGlkYXRlZCh7XG4gICAgICAgIHJlYXNvbjogXCJ0dXJib19kaXNhYmxlZFwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBTY3JvbGwgb2JzZXJ2ZXIgZGVsZWdhdGVcblxuICBzY3JvbGxQb3NpdGlvbkNoYW5nZWQocG9zaXRpb24pIHtcbiAgICB0aGlzLmhpc3RvcnkudXBkYXRlUmVzdG9yYXRpb25EYXRhKHsgc2Nyb2xsUG9zaXRpb246IHBvc2l0aW9uIH0pO1xuICB9XG5cbiAgLy8gRm9ybSBjbGljayBvYnNlcnZlciBkZWxlZ2F0ZVxuXG4gIHdpbGxTdWJtaXRGb3JtTGlua1RvTG9jYXRpb24obGluaywgbG9jYXRpb24pIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50SXNOYXZpZ2F0YWJsZShsaW5rKSAmJiBsb2NhdGlvbklzVmlzaXRhYmxlKGxvY2F0aW9uLCB0aGlzLnNuYXBzaG90LnJvb3RMb2NhdGlvbilcbiAgfVxuXG4gIHN1Ym1pdHRlZEZvcm1MaW5rVG9Mb2NhdGlvbigpIHt9XG5cbiAgLy8gTGluayBob3ZlciBvYnNlcnZlciBkZWxlZ2F0ZVxuXG4gIGNhblByZWZldGNoUmVxdWVzdFRvTG9jYXRpb24obGluaywgbG9jYXRpb24pIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5lbGVtZW50SXNOYXZpZ2F0YWJsZShsaW5rKSAmJlxuICAgICAgbG9jYXRpb25Jc1Zpc2l0YWJsZShsb2NhdGlvbiwgdGhpcy5zbmFwc2hvdC5yb290TG9jYXRpb24pICYmXG4gICAgICB0aGlzLm5hdmlnYXRvci5saW5rUHJlZmV0Y2hpbmdJc0VuYWJsZWRGb3JMb2NhdGlvbihsb2NhdGlvbilcbiAgICApXG4gIH1cblxuICAvLyBMaW5rIGNsaWNrIG9ic2VydmVyIGRlbGVnYXRlXG5cbiAgd2lsbEZvbGxvd0xpbmtUb0xvY2F0aW9uKGxpbmssIGxvY2F0aW9uLCBldmVudCkge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLmVsZW1lbnRJc05hdmlnYXRhYmxlKGxpbmspICYmXG4gICAgICBsb2NhdGlvbklzVmlzaXRhYmxlKGxvY2F0aW9uLCB0aGlzLnNuYXBzaG90LnJvb3RMb2NhdGlvbikgJiZcbiAgICAgIHRoaXMuYXBwbGljYXRpb25BbGxvd3NGb2xsb3dpbmdMaW5rVG9Mb2NhdGlvbihsaW5rLCBsb2NhdGlvbiwgZXZlbnQpXG4gICAgKVxuICB9XG5cbiAgZm9sbG93ZWRMaW5rVG9Mb2NhdGlvbihsaW5rLCBsb2NhdGlvbikge1xuICAgIGNvbnN0IGFjdGlvbiA9IHRoaXMuZ2V0QWN0aW9uRm9yTGluayhsaW5rKTtcbiAgICBjb25zdCBhY2NlcHRzU3RyZWFtUmVzcG9uc2UgPSBsaW5rLmhhc0F0dHJpYnV0ZShcImRhdGEtdHVyYm8tc3RyZWFtXCIpO1xuXG4gICAgdGhpcy52aXNpdChsb2NhdGlvbi5ocmVmLCB7IGFjdGlvbiwgYWNjZXB0c1N0cmVhbVJlc3BvbnNlIH0pO1xuICB9XG5cbiAgLy8gTmF2aWdhdG9yIGRlbGVnYXRlXG5cbiAgYWxsb3dzVmlzaXRpbmdMb2NhdGlvbldpdGhBY3Rpb24obG9jYXRpb24sIGFjdGlvbikge1xuICAgIHJldHVybiB0aGlzLmxvY2F0aW9uV2l0aEFjdGlvbklzU2FtZVBhZ2UobG9jYXRpb24sIGFjdGlvbikgfHwgdGhpcy5hcHBsaWNhdGlvbkFsbG93c1Zpc2l0aW5nTG9jYXRpb24obG9jYXRpb24pXG4gIH1cblxuICB2aXNpdFByb3Bvc2VkVG9Mb2NhdGlvbihsb2NhdGlvbiwgb3B0aW9ucykge1xuICAgIGV4dGVuZFVSTFdpdGhEZXByZWNhdGVkUHJvcGVydGllcyhsb2NhdGlvbik7XG4gICAgdGhpcy5hZGFwdGVyLnZpc2l0UHJvcG9zZWRUb0xvY2F0aW9uKGxvY2F0aW9uLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8vIFZpc2l0IGRlbGVnYXRlXG5cbiAgdmlzaXRTdGFydGVkKHZpc2l0KSB7XG4gICAgaWYgKCF2aXNpdC5hY2NlcHRzU3RyZWFtUmVzcG9uc2UpIHtcbiAgICAgIG1hcmtBc0J1c3koZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTtcbiAgICAgIHRoaXMudmlldy5tYXJrVmlzaXREaXJlY3Rpb24odmlzaXQuZGlyZWN0aW9uKTtcbiAgICB9XG4gICAgZXh0ZW5kVVJMV2l0aERlcHJlY2F0ZWRQcm9wZXJ0aWVzKHZpc2l0LmxvY2F0aW9uKTtcbiAgICBpZiAoIXZpc2l0LnNpbGVudCkge1xuICAgICAgdGhpcy5ub3RpZnlBcHBsaWNhdGlvbkFmdGVyVmlzaXRpbmdMb2NhdGlvbih2aXNpdC5sb2NhdGlvbiwgdmlzaXQuYWN0aW9uKTtcbiAgICB9XG4gIH1cblxuICB2aXNpdENvbXBsZXRlZCh2aXNpdCkge1xuICAgIHRoaXMudmlldy51bm1hcmtWaXNpdERpcmVjdGlvbigpO1xuICAgIGNsZWFyQnVzeVN0YXRlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7XG4gICAgdGhpcy5ub3RpZnlBcHBsaWNhdGlvbkFmdGVyUGFnZUxvYWQodmlzaXQuZ2V0VGltaW5nTWV0cmljcygpKTtcbiAgfVxuXG4gIGxvY2F0aW9uV2l0aEFjdGlvbklzU2FtZVBhZ2UobG9jYXRpb24sIGFjdGlvbikge1xuICAgIHJldHVybiB0aGlzLm5hdmlnYXRvci5sb2NhdGlvbldpdGhBY3Rpb25Jc1NhbWVQYWdlKGxvY2F0aW9uLCBhY3Rpb24pXG4gIH1cblxuICB2aXNpdFNjcm9sbGVkVG9TYW1lUGFnZUxvY2F0aW9uKG9sZFVSTCwgbmV3VVJMKSB7XG4gICAgdGhpcy5ub3RpZnlBcHBsaWNhdGlvbkFmdGVyVmlzaXRpbmdTYW1lUGFnZUxvY2F0aW9uKG9sZFVSTCwgbmV3VVJMKTtcbiAgfVxuXG4gIC8vIEZvcm0gc3VibWl0IG9ic2VydmVyIGRlbGVnYXRlXG5cbiAgd2lsbFN1Ym1pdEZvcm0oZm9ybSwgc3VibWl0dGVyKSB7XG4gICAgY29uc3QgYWN0aW9uID0gZ2V0QWN0aW9uJDEoZm9ybSwgc3VibWl0dGVyKTtcblxuICAgIHJldHVybiAoXG4gICAgICB0aGlzLnN1Ym1pc3Npb25Jc05hdmlnYXRhYmxlKGZvcm0sIHN1Ym1pdHRlcikgJiZcbiAgICAgIGxvY2F0aW9uSXNWaXNpdGFibGUoZXhwYW5kVVJMKGFjdGlvbiksIHRoaXMuc25hcHNob3Qucm9vdExvY2F0aW9uKVxuICAgIClcbiAgfVxuXG4gIGZvcm1TdWJtaXR0ZWQoZm9ybSwgc3VibWl0dGVyKSB7XG4gICAgdGhpcy5uYXZpZ2F0b3Iuc3VibWl0Rm9ybShmb3JtLCBzdWJtaXR0ZXIpO1xuICB9XG5cbiAgLy8gUGFnZSBvYnNlcnZlciBkZWxlZ2F0ZVxuXG4gIHBhZ2VCZWNhbWVJbnRlcmFjdGl2ZSgpIHtcbiAgICB0aGlzLnZpZXcubGFzdFJlbmRlcmVkTG9jYXRpb24gPSB0aGlzLmxvY2F0aW9uO1xuICAgIHRoaXMubm90aWZ5QXBwbGljYXRpb25BZnRlclBhZ2VMb2FkKCk7XG4gIH1cblxuICBwYWdlTG9hZGVkKCkge1xuICAgIHRoaXMuaGlzdG9yeS5hc3N1bWVDb250cm9sT2ZTY3JvbGxSZXN0b3JhdGlvbigpO1xuICB9XG5cbiAgcGFnZVdpbGxVbmxvYWQoKSB7XG4gICAgdGhpcy5oaXN0b3J5LnJlbGlucXVpc2hDb250cm9sT2ZTY3JvbGxSZXN0b3JhdGlvbigpO1xuICB9XG5cbiAgLy8gU3RyZWFtIG9ic2VydmVyIGRlbGVnYXRlXG5cbiAgcmVjZWl2ZWRNZXNzYWdlRnJvbVN0cmVhbShtZXNzYWdlKSB7XG4gICAgdGhpcy5yZW5kZXJTdHJlYW1NZXNzYWdlKG1lc3NhZ2UpO1xuICB9XG5cbiAgLy8gUGFnZSB2aWV3IGRlbGVnYXRlXG5cbiAgdmlld1dpbGxDYWNoZVNuYXBzaG90KCkge1xuICAgIGlmICghdGhpcy5uYXZpZ2F0b3IuY3VycmVudFZpc2l0Py5zaWxlbnQpIHtcbiAgICAgIHRoaXMubm90aWZ5QXBwbGljYXRpb25CZWZvcmVDYWNoaW5nU25hcHNob3QoKTtcbiAgICB9XG4gIH1cblxuICBhbGxvd3NJbW1lZGlhdGVSZW5kZXIoeyBlbGVtZW50IH0sIG9wdGlvbnMpIHtcbiAgICBjb25zdCBldmVudCA9IHRoaXMubm90aWZ5QXBwbGljYXRpb25CZWZvcmVSZW5kZXIoZWxlbWVudCwgb3B0aW9ucyk7XG4gICAgY29uc3Qge1xuICAgICAgZGVmYXVsdFByZXZlbnRlZCxcbiAgICAgIGRldGFpbDogeyByZW5kZXIgfVxuICAgIH0gPSBldmVudDtcblxuICAgIGlmICh0aGlzLnZpZXcucmVuZGVyZXIgJiYgcmVuZGVyKSB7XG4gICAgICB0aGlzLnZpZXcucmVuZGVyZXIucmVuZGVyRWxlbWVudCA9IHJlbmRlcjtcbiAgICB9XG5cbiAgICByZXR1cm4gIWRlZmF1bHRQcmV2ZW50ZWRcbiAgfVxuXG4gIHZpZXdSZW5kZXJlZFNuYXBzaG90KF9zbmFwc2hvdCwgX2lzUHJldmlldywgcmVuZGVyTWV0aG9kKSB7XG4gICAgdGhpcy52aWV3Lmxhc3RSZW5kZXJlZExvY2F0aW9uID0gdGhpcy5oaXN0b3J5LmxvY2F0aW9uO1xuICAgIHRoaXMubm90aWZ5QXBwbGljYXRpb25BZnRlclJlbmRlcihyZW5kZXJNZXRob2QpO1xuICB9XG5cbiAgcHJlbG9hZE9uTG9hZExpbmtzRm9yVmlldyhlbGVtZW50KSB7XG4gICAgdGhpcy5wcmVsb2FkZXIucHJlbG9hZE9uTG9hZExpbmtzRm9yVmlldyhlbGVtZW50KTtcbiAgfVxuXG4gIHZpZXdJbnZhbGlkYXRlZChyZWFzb24pIHtcbiAgICB0aGlzLmFkYXB0ZXIucGFnZUludmFsaWRhdGVkKHJlYXNvbik7XG4gIH1cblxuICAvLyBGcmFtZSBlbGVtZW50XG5cbiAgZnJhbWVMb2FkZWQoZnJhbWUpIHtcbiAgICB0aGlzLm5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJGcmFtZUxvYWQoZnJhbWUpO1xuICB9XG5cbiAgZnJhbWVSZW5kZXJlZChmZXRjaFJlc3BvbnNlLCBmcmFtZSkge1xuICAgIHRoaXMubm90aWZ5QXBwbGljYXRpb25BZnRlckZyYW1lUmVuZGVyKGZldGNoUmVzcG9uc2UsIGZyYW1lKTtcbiAgfVxuXG4gIC8vIEFwcGxpY2F0aW9uIGV2ZW50c1xuXG4gIGFwcGxpY2F0aW9uQWxsb3dzRm9sbG93aW5nTGlua1RvTG9jYXRpb24obGluaywgbG9jYXRpb24sIGV2KSB7XG4gICAgY29uc3QgZXZlbnQgPSB0aGlzLm5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJDbGlja2luZ0xpbmtUb0xvY2F0aW9uKGxpbmssIGxvY2F0aW9uLCBldik7XG4gICAgcmV0dXJuICFldmVudC5kZWZhdWx0UHJldmVudGVkXG4gIH1cblxuICBhcHBsaWNhdGlvbkFsbG93c1Zpc2l0aW5nTG9jYXRpb24obG9jYXRpb24pIHtcbiAgICBjb25zdCBldmVudCA9IHRoaXMubm90aWZ5QXBwbGljYXRpb25CZWZvcmVWaXNpdGluZ0xvY2F0aW9uKGxvY2F0aW9uKTtcbiAgICByZXR1cm4gIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWRcbiAgfVxuXG4gIG5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJDbGlja2luZ0xpbmtUb0xvY2F0aW9uKGxpbmssIGxvY2F0aW9uLCBldmVudCkge1xuICAgIHJldHVybiBkaXNwYXRjaChcInR1cmJvOmNsaWNrXCIsIHtcbiAgICAgIHRhcmdldDogbGluayxcbiAgICAgIGRldGFpbDogeyB1cmw6IGxvY2F0aW9uLmhyZWYsIG9yaWdpbmFsRXZlbnQ6IGV2ZW50IH0sXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSlcbiAgfVxuXG4gIG5vdGlmeUFwcGxpY2F0aW9uQmVmb3JlVmlzaXRpbmdMb2NhdGlvbihsb2NhdGlvbikge1xuICAgIHJldHVybiBkaXNwYXRjaChcInR1cmJvOmJlZm9yZS12aXNpdFwiLCB7XG4gICAgICBkZXRhaWw6IHsgdXJsOiBsb2NhdGlvbi5ocmVmIH0sXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSlcbiAgfVxuXG4gIG5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJWaXNpdGluZ0xvY2F0aW9uKGxvY2F0aW9uLCBhY3Rpb24pIHtcbiAgICByZXR1cm4gZGlzcGF0Y2goXCJ0dXJibzp2aXNpdFwiLCB7IGRldGFpbDogeyB1cmw6IGxvY2F0aW9uLmhyZWYsIGFjdGlvbiB9IH0pXG4gIH1cblxuICBub3RpZnlBcHBsaWNhdGlvbkJlZm9yZUNhY2hpbmdTbmFwc2hvdCgpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2goXCJ0dXJibzpiZWZvcmUtY2FjaGVcIilcbiAgfVxuXG4gIG5vdGlmeUFwcGxpY2F0aW9uQmVmb3JlUmVuZGVyKG5ld0JvZHksIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2goXCJ0dXJibzpiZWZvcmUtcmVuZGVyXCIsIHtcbiAgICAgIGRldGFpbDogeyBuZXdCb2R5LCAuLi5vcHRpb25zIH0sXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSlcbiAgfVxuXG4gIG5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJSZW5kZXIocmVuZGVyTWV0aG9kKSB7XG4gICAgcmV0dXJuIGRpc3BhdGNoKFwidHVyYm86cmVuZGVyXCIsIHsgZGV0YWlsOiB7IHJlbmRlck1ldGhvZCB9IH0pXG4gIH1cblxuICBub3RpZnlBcHBsaWNhdGlvbkFmdGVyUGFnZUxvYWQodGltaW5nID0ge30pIHtcbiAgICByZXR1cm4gZGlzcGF0Y2goXCJ0dXJibzpsb2FkXCIsIHtcbiAgICAgIGRldGFpbDogeyB1cmw6IHRoaXMubG9jYXRpb24uaHJlZiwgdGltaW5nIH1cbiAgICB9KVxuICB9XG5cbiAgbm90aWZ5QXBwbGljYXRpb25BZnRlclZpc2l0aW5nU2FtZVBhZ2VMb2NhdGlvbihvbGRVUkwsIG5ld1VSTCkge1xuICAgIGRpc3BhdGNoRXZlbnQoXG4gICAgICBuZXcgSGFzaENoYW5nZUV2ZW50KFwiaGFzaGNoYW5nZVwiLCB7XG4gICAgICAgIG9sZFVSTDogb2xkVVJMLnRvU3RyaW5nKCksXG4gICAgICAgIG5ld1VSTDogbmV3VVJMLnRvU3RyaW5nKClcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIG5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJGcmFtZUxvYWQoZnJhbWUpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2goXCJ0dXJibzpmcmFtZS1sb2FkXCIsIHsgdGFyZ2V0OiBmcmFtZSB9KVxuICB9XG5cbiAgbm90aWZ5QXBwbGljYXRpb25BZnRlckZyYW1lUmVuZGVyKGZldGNoUmVzcG9uc2UsIGZyYW1lKSB7XG4gICAgcmV0dXJuIGRpc3BhdGNoKFwidHVyYm86ZnJhbWUtcmVuZGVyXCIsIHtcbiAgICAgIGRldGFpbDogeyBmZXRjaFJlc3BvbnNlIH0sXG4gICAgICB0YXJnZXQ6IGZyYW1lLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgIH0pXG4gIH1cblxuICAvLyBIZWxwZXJzXG5cbiAgc3VibWlzc2lvbklzTmF2aWdhdGFibGUoZm9ybSwgc3VibWl0dGVyKSB7XG4gICAgaWYgKGNvbmZpZy5mb3Jtcy5tb2RlID09IFwib2ZmXCIpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBzdWJtaXR0ZXJJc05hdmlnYXRhYmxlID0gc3VibWl0dGVyID8gdGhpcy5lbGVtZW50SXNOYXZpZ2F0YWJsZShzdWJtaXR0ZXIpIDogdHJ1ZTtcblxuICAgICAgaWYgKGNvbmZpZy5mb3Jtcy5tb2RlID09IFwib3B0aW5cIikge1xuICAgICAgICByZXR1cm4gc3VibWl0dGVySXNOYXZpZ2F0YWJsZSAmJiBmb3JtLmNsb3Nlc3QoJ1tkYXRhLXR1cmJvPVwidHJ1ZVwiXScpICE9IG51bGxcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBzdWJtaXR0ZXJJc05hdmlnYXRhYmxlICYmIHRoaXMuZWxlbWVudElzTmF2aWdhdGFibGUoZm9ybSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBlbGVtZW50SXNOYXZpZ2F0YWJsZShlbGVtZW50KSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZmluZENsb3Nlc3RSZWN1cnNpdmVseShlbGVtZW50LCBcIltkYXRhLXR1cmJvXVwiKTtcbiAgICBjb25zdCB3aXRoaW5GcmFtZSA9IGZpbmRDbG9zZXN0UmVjdXJzaXZlbHkoZWxlbWVudCwgXCJ0dXJiby1mcmFtZVwiKTtcblxuICAgIC8vIENoZWNrIGlmIERyaXZlIGlzIGVuYWJsZWQgb24gdGhlIHNlc3Npb24gb3Igd2UncmUgd2l0aGluIGEgRnJhbWUuXG4gICAgaWYgKGNvbmZpZy5kcml2ZS5lbmFibGVkIHx8IHdpdGhpbkZyYW1lKSB7XG4gICAgICAvLyBFbGVtZW50IGlzIG5hdmlnYXRhYmxlIGJ5IGRlZmF1bHQsIHVubGVzcyBgZGF0YS10dXJibz1cImZhbHNlXCJgLlxuICAgICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICByZXR1cm4gY29udGFpbmVyLmdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm9cIikgIT0gXCJmYWxzZVwiXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBFbGVtZW50IGlzbid0IG5hdmlnYXRhYmxlIGJ5IGRlZmF1bHQsIHVubGVzcyBgZGF0YS10dXJibz1cInRydWVcImAuXG4gICAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICAgIHJldHVybiBjb250YWluZXIuZ2V0QXR0cmlidXRlKFwiZGF0YS10dXJib1wiKSA9PSBcInRydWVcIlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gUHJpdmF0ZVxuXG4gIGdldEFjdGlvbkZvckxpbmsobGluaykge1xuICAgIHJldHVybiBnZXRWaXNpdEFjdGlvbihsaW5rKSB8fCBcImFkdmFuY2VcIlxuICB9XG5cbiAgZ2V0IHNuYXBzaG90KCkge1xuICAgIHJldHVybiB0aGlzLnZpZXcuc25hcHNob3RcbiAgfVxufVxuXG4vLyBPbGRlciB2ZXJzaW9ucyBvZiB0aGUgVHVyYm8gTmF0aXZlIGFkYXB0ZXJzIHJlZmVyZW5jZWQgdGhlXG4vLyBgTG9jYXRpb24jYWJzb2x1dGVVUkxgIHByb3BlcnR5IGluIHRoZWlyIGltcGxlbWVudGF0aW9ucyBvZlxuLy8gdGhlIGBBZGFwdGVyI3Zpc2l0UHJvcG9zZWRUb0xvY2F0aW9uKClgIGFuZCBgI3Zpc2l0U3RhcnRlZCgpYFxuLy8gbWV0aG9kcy4gVGhlIExvY2F0aW9uIGNsYXNzIGhhcyBzaW5jZSBiZWVuIHJlbW92ZWQgaW4gZmF2b3Jcbi8vIG9mIHRoZSBET00gVVJMIEFQSSwgYW5kIGFjY29yZGluZ2x5IGFsbCBBZGFwdGVyIG1ldGhvZHMgbm93XG4vLyByZWNlaXZlIFVSTCBvYmplY3RzLlxuLy9cbi8vIFdlIGFsaWFzICNhYnNvbHV0ZVVSTCB0byAjdG9TdHJpbmcoKSBoZXJlIHRvIGF2b2lkIGNyYXNoaW5nXG4vLyBvbGRlciBhZGFwdGVycyB3aGljaCBkbyBub3QgZXhwZWN0IFVSTCBvYmplY3RzLiBXZSBzaG91bGRcbi8vIGNvbnNpZGVyIHJlbW92aW5nIHRoaXMgc3VwcG9ydCBhdCBzb21lIHBvaW50IGluIHRoZSBmdXR1cmUuXG5cbmZ1bmN0aW9uIGV4dGVuZFVSTFdpdGhEZXByZWNhdGVkUHJvcGVydGllcyh1cmwpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModXJsLCBkZXByZWNhdGVkTG9jYXRpb25Qcm9wZXJ0eURlc2NyaXB0b3JzKTtcbn1cblxuY29uc3QgZGVwcmVjYXRlZExvY2F0aW9uUHJvcGVydHlEZXNjcmlwdG9ycyA9IHtcbiAgYWJzb2x1dGVVUkw6IHtcbiAgICBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy50b1N0cmluZygpXG4gICAgfVxuICB9XG59O1xuXG5jb25zdCBzZXNzaW9uID0gbmV3IFNlc3Npb24ocmVjZW50UmVxdWVzdHMpO1xuY29uc3QgeyBjYWNoZSwgbmF2aWdhdG9yOiBuYXZpZ2F0b3IkMSB9ID0gc2Vzc2lvbjtcblxuLyoqXG4gKiBTdGFydHMgdGhlIG1haW4gc2Vzc2lvbi5cbiAqIFRoaXMgaW5pdGlhbGlzZXMgYW55IG5lY2Vzc2FyeSBvYnNlcnZlcnMgc3VjaCBhcyB0aG9zZSB0byBtb25pdG9yXG4gKiBsaW5rIGludGVyYWN0aW9ucy5cbiAqL1xuZnVuY3Rpb24gc3RhcnQoKSB7XG4gIHNlc3Npb24uc3RhcnQoKTtcbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYW4gYWRhcHRlciBmb3IgdGhlIG1haW4gc2Vzc2lvbi5cbiAqXG4gKiBAcGFyYW0gYWRhcHRlciBBZGFwdGVyIHRvIHJlZ2lzdGVyXG4gKi9cbmZ1bmN0aW9uIHJlZ2lzdGVyQWRhcHRlcihhZGFwdGVyKSB7XG4gIHNlc3Npb24ucmVnaXN0ZXJBZGFwdGVyKGFkYXB0ZXIpO1xufVxuXG4vKipcbiAqIFBlcmZvcm1zIGFuIGFwcGxpY2F0aW9uIHZpc2l0IHRvIHRoZSBnaXZlbiBsb2NhdGlvbi5cbiAqXG4gKiBAcGFyYW0gbG9jYXRpb24gTG9jYXRpb24gdG8gdmlzaXQgKGEgVVJMIG9yIHBhdGgpXG4gKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIHRvIGFwcGx5XG4gKiBAcGFyYW0gb3B0aW9ucy5hY3Rpb24gVHlwZSBvZiBoaXN0b3J5IG5hdmlnYXRpb24gdG8gYXBwbHkgKFwicmVzdG9yZVwiLFxuICogXCJyZXBsYWNlXCIgb3IgXCJhZHZhbmNlXCIpXG4gKiBAcGFyYW0gb3B0aW9ucy5oaXN0b3J5Q2hhbmdlZCBTcGVjaWZpZXMgd2hldGhlciB0aGUgYnJvd3NlciBoaXN0b3J5IGhhc1xuICogYWxyZWFkeSBiZWVuIGNoYW5nZWQgZm9yIHRoaXMgdmlzaXQgb3Igbm90XG4gKiBAcGFyYW0gb3B0aW9ucy5yZWZlcnJlciBTcGVjaWZpZXMgdGhlIHJlZmVycmVyIG9mIHRoaXMgdmlzaXQgc3VjaCB0aGF0XG4gKiBuYXZpZ2F0aW9ucyB0byB0aGUgc2FtZSBwYWdlIHdpbGwgbm90IHJlc3VsdCBpbiBhIG5ldyBoaXN0b3J5IGVudHJ5LlxuICogQHBhcmFtIG9wdGlvbnMuc25hcHNob3RIVE1MIENhY2hlZCBzbmFwc2hvdCB0byByZW5kZXJcbiAqIEBwYXJhbSBvcHRpb25zLnJlc3BvbnNlIFJlc3BvbnNlIG9mIHRoZSBzcGVjaWZpZWQgbG9jYXRpb25cbiAqL1xuZnVuY3Rpb24gdmlzaXQobG9jYXRpb24sIG9wdGlvbnMpIHtcbiAgc2Vzc2lvbi52aXNpdChsb2NhdGlvbiwgb3B0aW9ucyk7XG59XG5cbi8qKlxuICogQ29ubmVjdHMgYSBzdHJlYW0gc291cmNlIHRvIHRoZSBtYWluIHNlc3Npb24uXG4gKlxuICogQHBhcmFtIHNvdXJjZSBTdHJlYW0gc291cmNlIHRvIGNvbm5lY3RcbiAqL1xuZnVuY3Rpb24gY29ubmVjdFN0cmVhbVNvdXJjZShzb3VyY2UpIHtcbiAgc2Vzc2lvbi5jb25uZWN0U3RyZWFtU291cmNlKHNvdXJjZSk7XG59XG5cbi8qKlxuICogRGlzY29ubmVjdHMgYSBzdHJlYW0gc291cmNlIGZyb20gdGhlIG1haW4gc2Vzc2lvbi5cbiAqXG4gKiBAcGFyYW0gc291cmNlIFN0cmVhbSBzb3VyY2UgdG8gZGlzY29ubmVjdFxuICovXG5mdW5jdGlvbiBkaXNjb25uZWN0U3RyZWFtU291cmNlKHNvdXJjZSkge1xuICBzZXNzaW9uLmRpc2Nvbm5lY3RTdHJlYW1Tb3VyY2Uoc291cmNlKTtcbn1cblxuLyoqXG4gKiBSZW5kZXJzIGEgc3RyZWFtIG1lc3NhZ2UgdG8gdGhlIG1haW4gc2Vzc2lvbiBieSBhcHBlbmRpbmcgaXQgdG8gdGhlXG4gKiBjdXJyZW50IGRvY3VtZW50LlxuICpcbiAqIEBwYXJhbSBtZXNzYWdlIE1lc3NhZ2UgdG8gcmVuZGVyXG4gKi9cbmZ1bmN0aW9uIHJlbmRlclN0cmVhbU1lc3NhZ2UobWVzc2FnZSkge1xuICBzZXNzaW9uLnJlbmRlclN0cmVhbU1lc3NhZ2UobWVzc2FnZSk7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwgZW50cmllcyBmcm9tIHRoZSBUdXJibyBEcml2ZSBwYWdlIGNhY2hlLlxuICogQ2FsbCB0aGlzIHdoZW4gc3RhdGUgaGFzIGNoYW5nZWQgb24gdGhlIHNlcnZlciB0aGF0IG1heSBhZmZlY3QgY2FjaGVkIHBhZ2VzLlxuICpcbiAqIEBkZXByZWNhdGVkIHNpbmNlIHZlcnNpb24gNy4yLjAgaW4gZmF2b3Igb2YgYFR1cmJvLmNhY2hlLmNsZWFyKClgXG4gKi9cbmZ1bmN0aW9uIGNsZWFyQ2FjaGUoKSB7XG4gIGNvbnNvbGUud2FybihcbiAgICBcIlBsZWFzZSByZXBsYWNlIGBUdXJiby5jbGVhckNhY2hlKClgIHdpdGggYFR1cmJvLmNhY2hlLmNsZWFyKClgLiBUaGUgdG9wLWxldmVsIGZ1bmN0aW9uIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSB2ZXJzaW9uIG9mIFR1cmJvLmBcIlxuICApO1xuICBzZXNzaW9uLmNsZWFyQ2FjaGUoKTtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBkZWxheSBhZnRlciB3aGljaCB0aGUgcHJvZ3Jlc3MgYmFyIHdpbGwgYXBwZWFyIGR1cmluZyBuYXZpZ2F0aW9uLlxuICpcbiAqIFRoZSBwcm9ncmVzcyBiYXIgYXBwZWFycyBhZnRlciA1MDBtcyBieSBkZWZhdWx0LlxuICpcbiAqIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBoYXMgbm8gZWZmZWN0IHdoZW4gdXNlZCB3aXRoIHRoZSBpT1Mgb3IgQW5kcm9pZFxuICogYWRhcHRlcnMuXG4gKlxuICogQHBhcmFtIGRlbGF5IFRpbWUgdG8gZGVsYXkgaW4gbWlsbGlzZWNvbmRzXG4gKi9cbmZ1bmN0aW9uIHNldFByb2dyZXNzQmFyRGVsYXkoZGVsYXkpIHtcbiAgY29uc29sZS53YXJuKFxuICAgIFwiUGxlYXNlIHJlcGxhY2UgYFR1cmJvLnNldFByb2dyZXNzQmFyRGVsYXkoZGVsYXkpYCB3aXRoIGBUdXJiby5jb25maWcuZHJpdmUucHJvZ3Jlc3NCYXJEZWxheSA9IGRlbGF5YC4gVGhlIHRvcC1sZXZlbCBmdW5jdGlvbiBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbiBvZiBUdXJiby5gXCJcbiAgKTtcbiAgY29uZmlnLmRyaXZlLnByb2dyZXNzQmFyRGVsYXkgPSBkZWxheTtcbn1cblxuZnVuY3Rpb24gc2V0Q29uZmlybU1ldGhvZChjb25maXJtTWV0aG9kKSB7XG4gIGNvbnNvbGUud2FybihcbiAgICBcIlBsZWFzZSByZXBsYWNlIGBUdXJiby5zZXRDb25maXJtTWV0aG9kKGNvbmZpcm1NZXRob2QpYCB3aXRoIGBUdXJiby5jb25maWcuZm9ybXMuY29uZmlybSA9IGNvbmZpcm1NZXRob2RgLiBUaGUgdG9wLWxldmVsIGZ1bmN0aW9uIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSB2ZXJzaW9uIG9mIFR1cmJvLmBcIlxuICApO1xuICBjb25maWcuZm9ybXMuY29uZmlybSA9IGNvbmZpcm1NZXRob2Q7XG59XG5cbmZ1bmN0aW9uIHNldEZvcm1Nb2RlKG1vZGUpIHtcbiAgY29uc29sZS53YXJuKFxuICAgIFwiUGxlYXNlIHJlcGxhY2UgYFR1cmJvLnNldEZvcm1Nb2RlKG1vZGUpYCB3aXRoIGBUdXJiby5jb25maWcuZm9ybXMubW9kZSA9IG1vZGVgLiBUaGUgdG9wLWxldmVsIGZ1bmN0aW9uIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSB2ZXJzaW9uIG9mIFR1cmJvLmBcIlxuICApO1xuICBjb25maWcuZm9ybXMubW9kZSA9IG1vZGU7XG59XG5cbi8qKlxuICogTW9ycGggdGhlIHN0YXRlIG9mIHRoZSBjdXJyZW50Qm9keSBiYXNlZCBvbiB0aGUgYXR0cmlidXRlcyBhbmQgY29udGVudHMgb2ZcbiAqIHRoZSBuZXdCb2R5LiBNb3JwaGluZyBib2R5IGVsZW1lbnRzIG1heSBkaXNwYXRjaCB0dXJibzptb3JwaCxcbiAqIHR1cmJvOmJlZm9yZS1tb3JwaC1lbGVtZW50LCB0dXJibzpiZWZvcmUtbW9ycGgtYXR0cmlidXRlLCBhbmRcbiAqIHR1cmJvOm1vcnBoLWVsZW1lbnQgZXZlbnRzLlxuICpcbiAqIEBwYXJhbSBjdXJyZW50Qm9keSBIVE1MQm9keUVsZW1lbnQgZGVzdGluYXRpb24gb2YgbW9ycGhpbmcgY2hhbmdlc1xuICogQHBhcmFtIG5ld0JvZHkgSFRNTEJvZHlFbGVtZW50IHNvdXJjZSBvZiBtb3JwaGluZyBjaGFuZ2VzXG4gKi9cbmZ1bmN0aW9uIG1vcnBoQm9keUVsZW1lbnRzKGN1cnJlbnRCb2R5LCBuZXdCb2R5KSB7XG4gIE1vcnBoaW5nUGFnZVJlbmRlcmVyLnJlbmRlckVsZW1lbnQoY3VycmVudEJvZHksIG5ld0JvZHkpO1xufVxuXG4vKipcbiAqIE1vcnBoIHRoZSBjaGlsZCBlbGVtZW50cyBvZiB0aGUgY3VycmVudEZyYW1lIGJhc2VkIG9uIHRoZSBjaGlsZCBlbGVtZW50cyBvZlxuICogdGhlIG5ld0ZyYW1lLiBNb3JwaGluZyB0dXJiby1mcmFtZSBlbGVtZW50cyBtYXkgZGlzcGF0Y2ggdHVyYm86YmVmb3JlLWZyYW1lLW1vcnBoLFxuICogdHVyYm86YmVmb3JlLW1vcnBoLWVsZW1lbnQsIHR1cmJvOmJlZm9yZS1tb3JwaC1hdHRyaWJ1dGUsIGFuZFxuICogdHVyYm86bW9ycGgtZWxlbWVudCBldmVudHMuXG4gKlxuICogQHBhcmFtIGN1cnJlbnRGcmFtZSBGcmFtZUVsZW1lbnQgZGVzdGluYXRpb24gb2YgbW9ycGhpbmcgY2hpbGRyZW4gY2hhbmdlc1xuICogQHBhcmFtIG5ld0ZyYW1lIEZyYW1lRWxlbWVudCBzb3VyY2Ugb2YgbW9ycGhpbmcgY2hpbGRyZW4gY2hhbmdlc1xuICovXG5mdW5jdGlvbiBtb3JwaFR1cmJvRnJhbWVFbGVtZW50cyhjdXJyZW50RnJhbWUsIG5ld0ZyYW1lKSB7XG4gIE1vcnBoaW5nRnJhbWVSZW5kZXJlci5yZW5kZXJFbGVtZW50KGN1cnJlbnRGcmFtZSwgbmV3RnJhbWUpO1xufVxuXG52YXIgVHVyYm8gPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgbmF2aWdhdG9yOiBuYXZpZ2F0b3IkMSxcbiAgc2Vzc2lvbjogc2Vzc2lvbixcbiAgY2FjaGU6IGNhY2hlLFxuICBQYWdlUmVuZGVyZXI6IFBhZ2VSZW5kZXJlcixcbiAgUGFnZVNuYXBzaG90OiBQYWdlU25hcHNob3QsXG4gIEZyYW1lUmVuZGVyZXI6IEZyYW1lUmVuZGVyZXIsXG4gIGZldGNoOiBmZXRjaFdpdGhUdXJib0hlYWRlcnMsXG4gIGNvbmZpZzogY29uZmlnLFxuICBzdGFydDogc3RhcnQsXG4gIHJlZ2lzdGVyQWRhcHRlcjogcmVnaXN0ZXJBZGFwdGVyLFxuICB2aXNpdDogdmlzaXQsXG4gIGNvbm5lY3RTdHJlYW1Tb3VyY2U6IGNvbm5lY3RTdHJlYW1Tb3VyY2UsXG4gIGRpc2Nvbm5lY3RTdHJlYW1Tb3VyY2U6IGRpc2Nvbm5lY3RTdHJlYW1Tb3VyY2UsXG4gIHJlbmRlclN0cmVhbU1lc3NhZ2U6IHJlbmRlclN0cmVhbU1lc3NhZ2UsXG4gIGNsZWFyQ2FjaGU6IGNsZWFyQ2FjaGUsXG4gIHNldFByb2dyZXNzQmFyRGVsYXk6IHNldFByb2dyZXNzQmFyRGVsYXksXG4gIHNldENvbmZpcm1NZXRob2Q6IHNldENvbmZpcm1NZXRob2QsXG4gIHNldEZvcm1Nb2RlOiBzZXRGb3JtTW9kZSxcbiAgbW9ycGhCb2R5RWxlbWVudHM6IG1vcnBoQm9keUVsZW1lbnRzLFxuICBtb3JwaFR1cmJvRnJhbWVFbGVtZW50czogbW9ycGhUdXJib0ZyYW1lRWxlbWVudHMsXG4gIG1vcnBoQ2hpbGRyZW46IG1vcnBoQ2hpbGRyZW4sXG4gIG1vcnBoRWxlbWVudHM6IG1vcnBoRWxlbWVudHNcbn0pO1xuXG5jbGFzcyBUdXJib0ZyYW1lTWlzc2luZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige31cblxuY2xhc3MgRnJhbWVDb250cm9sbGVyIHtcbiAgZmV0Y2hSZXNwb25zZUxvYWRlZCA9IChfZmV0Y2hSZXNwb25zZSkgPT4gUHJvbWlzZS5yZXNvbHZlKClcbiAgI2N1cnJlbnRGZXRjaFJlcXVlc3QgPSBudWxsXG4gICNyZXNvbHZlVmlzaXRQcm9taXNlID0gKCkgPT4ge31cbiAgI2Nvbm5lY3RlZCA9IGZhbHNlXG4gICNoYXNCZWVuTG9hZGVkID0gZmFsc2VcbiAgI2lnbm9yZWRBdHRyaWJ1dGVzID0gbmV3IFNldCgpXG4gICNzaG91bGRNb3JwaEZyYW1lID0gZmFsc2VcbiAgYWN0aW9uID0gbnVsbFxuXG4gIGNvbnN0cnVjdG9yKGVsZW1lbnQpIHtcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgIHRoaXMudmlldyA9IG5ldyBGcmFtZVZpZXcodGhpcywgdGhpcy5lbGVtZW50KTtcbiAgICB0aGlzLmFwcGVhcmFuY2VPYnNlcnZlciA9IG5ldyBBcHBlYXJhbmNlT2JzZXJ2ZXIodGhpcywgdGhpcy5lbGVtZW50KTtcbiAgICB0aGlzLmZvcm1MaW5rQ2xpY2tPYnNlcnZlciA9IG5ldyBGb3JtTGlua0NsaWNrT2JzZXJ2ZXIodGhpcywgdGhpcy5lbGVtZW50KTtcbiAgICB0aGlzLmxpbmtJbnRlcmNlcHRvciA9IG5ldyBMaW5rSW50ZXJjZXB0b3IodGhpcywgdGhpcy5lbGVtZW50KTtcbiAgICB0aGlzLnJlc3RvcmF0aW9uSWRlbnRpZmllciA9IHV1aWQoKTtcbiAgICB0aGlzLmZvcm1TdWJtaXRPYnNlcnZlciA9IG5ldyBGb3JtU3VibWl0T2JzZXJ2ZXIodGhpcywgdGhpcy5lbGVtZW50KTtcbiAgfVxuXG4gIC8vIEZyYW1lIGRlbGVnYXRlXG5cbiAgY29ubmVjdCgpIHtcbiAgICBpZiAoIXRoaXMuI2Nvbm5lY3RlZCkge1xuICAgICAgdGhpcy4jY29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgIGlmICh0aGlzLmxvYWRpbmdTdHlsZSA9PSBGcmFtZUxvYWRpbmdTdHlsZS5sYXp5KSB7XG4gICAgICAgIHRoaXMuYXBwZWFyYW5jZU9ic2VydmVyLnN0YXJ0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLiNsb2FkU291cmNlVVJMKCk7XG4gICAgICB9XG4gICAgICB0aGlzLmZvcm1MaW5rQ2xpY2tPYnNlcnZlci5zdGFydCgpO1xuICAgICAgdGhpcy5saW5rSW50ZXJjZXB0b3Iuc3RhcnQoKTtcbiAgICAgIHRoaXMuZm9ybVN1Ym1pdE9ic2VydmVyLnN0YXJ0KCk7XG4gICAgfVxuICB9XG5cbiAgZGlzY29ubmVjdCgpIHtcbiAgICBpZiAodGhpcy4jY29ubmVjdGVkKSB7XG4gICAgICB0aGlzLiNjb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuYXBwZWFyYW5jZU9ic2VydmVyLnN0b3AoKTtcbiAgICAgIHRoaXMuZm9ybUxpbmtDbGlja09ic2VydmVyLnN0b3AoKTtcbiAgICAgIHRoaXMubGlua0ludGVyY2VwdG9yLnN0b3AoKTtcbiAgICAgIHRoaXMuZm9ybVN1Ym1pdE9ic2VydmVyLnN0b3AoKTtcbiAgICB9XG4gIH1cblxuICBkaXNhYmxlZENoYW5nZWQoKSB7XG4gICAgaWYgKHRoaXMubG9hZGluZ1N0eWxlID09IEZyYW1lTG9hZGluZ1N0eWxlLmVhZ2VyKSB7XG4gICAgICB0aGlzLiNsb2FkU291cmNlVVJMKCk7XG4gICAgfVxuICB9XG5cbiAgc291cmNlVVJMQ2hhbmdlZCgpIHtcbiAgICBpZiAodGhpcy4jaXNJZ25vcmluZ0NoYW5nZXNUbyhcInNyY1wiKSkgcmV0dXJuXG5cbiAgICBpZiAodGhpcy5lbGVtZW50LmlzQ29ubmVjdGVkKSB7XG4gICAgICB0aGlzLmNvbXBsZXRlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubG9hZGluZ1N0eWxlID09IEZyYW1lTG9hZGluZ1N0eWxlLmVhZ2VyIHx8IHRoaXMuI2hhc0JlZW5Mb2FkZWQpIHtcbiAgICAgIHRoaXMuI2xvYWRTb3VyY2VVUkwoKTtcbiAgICB9XG4gIH1cblxuICBzb3VyY2VVUkxSZWxvYWRlZCgpIHtcbiAgICBjb25zdCB7IHJlZnJlc2gsIHNyYyB9ID0gdGhpcy5lbGVtZW50O1xuXG4gICAgdGhpcy4jc2hvdWxkTW9ycGhGcmFtZSA9IHNyYyAmJiByZWZyZXNoID09PSBcIm1vcnBoXCI7XG5cbiAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiY29tcGxldGVcIik7XG4gICAgdGhpcy5lbGVtZW50LnNyYyA9IG51bGw7XG4gICAgdGhpcy5lbGVtZW50LnNyYyA9IHNyYztcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50LmxvYWRlZFxuICB9XG5cbiAgbG9hZGluZ1N0eWxlQ2hhbmdlZCgpIHtcbiAgICBpZiAodGhpcy5sb2FkaW5nU3R5bGUgPT0gRnJhbWVMb2FkaW5nU3R5bGUubGF6eSkge1xuICAgICAgdGhpcy5hcHBlYXJhbmNlT2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hcHBlYXJhbmNlT2JzZXJ2ZXIuc3RvcCgpO1xuICAgICAgdGhpcy4jbG9hZFNvdXJjZVVSTCgpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jICNsb2FkU291cmNlVVJMKCkge1xuICAgIGlmICh0aGlzLmVuYWJsZWQgJiYgdGhpcy5pc0FjdGl2ZSAmJiAhdGhpcy5jb21wbGV0ZSAmJiB0aGlzLnNvdXJjZVVSTCkge1xuICAgICAgdGhpcy5lbGVtZW50LmxvYWRlZCA9IHRoaXMuI3Zpc2l0KGV4cGFuZFVSTCh0aGlzLnNvdXJjZVVSTCkpO1xuICAgICAgdGhpcy5hcHBlYXJhbmNlT2JzZXJ2ZXIuc3RvcCgpO1xuICAgICAgYXdhaXQgdGhpcy5lbGVtZW50LmxvYWRlZDtcbiAgICAgIHRoaXMuI2hhc0JlZW5Mb2FkZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGxvYWRSZXNwb25zZShmZXRjaFJlc3BvbnNlKSB7XG4gICAgaWYgKGZldGNoUmVzcG9uc2UucmVkaXJlY3RlZCB8fCAoZmV0Y2hSZXNwb25zZS5zdWNjZWVkZWQgJiYgZmV0Y2hSZXNwb25zZS5pc0hUTUwpKSB7XG4gICAgICB0aGlzLnNvdXJjZVVSTCA9IGZldGNoUmVzcG9uc2UucmVzcG9uc2UudXJsO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBodG1sID0gYXdhaXQgZmV0Y2hSZXNwb25zZS5yZXNwb25zZUhUTUw7XG4gICAgICBpZiAoaHRtbCkge1xuICAgICAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlSFRNTERvY3VtZW50KGh0bWwpO1xuICAgICAgICBjb25zdCBwYWdlU25hcHNob3QgPSBQYWdlU25hcHNob3QuZnJvbURvY3VtZW50KGRvY3VtZW50KTtcblxuICAgICAgICBpZiAocGFnZVNuYXBzaG90LmlzVmlzaXRhYmxlKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy4jbG9hZEZyYW1lUmVzcG9uc2UoZmV0Y2hSZXNwb25zZSwgZG9jdW1lbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZVVudmlzaXRhYmxlRnJhbWVSZXNwb25zZShmZXRjaFJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLiNzaG91bGRNb3JwaEZyYW1lID0gZmFsc2U7XG4gICAgICB0aGlzLmZldGNoUmVzcG9uc2VMb2FkZWQgPSAoKSA9PiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gIH1cblxuICAvLyBBcHBlYXJhbmNlIG9ic2VydmVyIGRlbGVnYXRlXG5cbiAgZWxlbWVudEFwcGVhcmVkSW5WaWV3cG9ydChlbGVtZW50KSB7XG4gICAgdGhpcy5wcm9wb3NlVmlzaXRJZk5hdmlnYXRlZFdpdGhBY3Rpb24oZWxlbWVudCwgZ2V0VmlzaXRBY3Rpb24oZWxlbWVudCkpO1xuICAgIHRoaXMuI2xvYWRTb3VyY2VVUkwoKTtcbiAgfVxuXG4gIC8vIEZvcm0gbGluayBjbGljayBvYnNlcnZlciBkZWxlZ2F0ZVxuXG4gIHdpbGxTdWJtaXRGb3JtTGlua1RvTG9jYXRpb24obGluaykge1xuICAgIHJldHVybiB0aGlzLiNzaG91bGRJbnRlcmNlcHROYXZpZ2F0aW9uKGxpbmspXG4gIH1cblxuICBzdWJtaXR0ZWRGb3JtTGlua1RvTG9jYXRpb24obGluaywgX2xvY2F0aW9uLCBmb3JtKSB7XG4gICAgY29uc3QgZnJhbWUgPSB0aGlzLiNmaW5kRnJhbWVFbGVtZW50KGxpbmspO1xuICAgIGlmIChmcmFtZSkgZm9ybS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLWZyYW1lXCIsIGZyYW1lLmlkKTtcbiAgfVxuXG4gIC8vIExpbmsgaW50ZXJjZXB0b3IgZGVsZWdhdGVcblxuICBzaG91bGRJbnRlcmNlcHRMaW5rQ2xpY2soZWxlbWVudCwgX2xvY2F0aW9uLCBfZXZlbnQpIHtcbiAgICByZXR1cm4gdGhpcy4jc2hvdWxkSW50ZXJjZXB0TmF2aWdhdGlvbihlbGVtZW50KVxuICB9XG5cbiAgbGlua0NsaWNrSW50ZXJjZXB0ZWQoZWxlbWVudCwgbG9jYXRpb24pIHtcbiAgICB0aGlzLiNuYXZpZ2F0ZUZyYW1lKGVsZW1lbnQsIGxvY2F0aW9uKTtcbiAgfVxuXG4gIC8vIEZvcm0gc3VibWl0IG9ic2VydmVyIGRlbGVnYXRlXG5cbiAgd2lsbFN1Ym1pdEZvcm0oZWxlbWVudCwgc3VibWl0dGVyKSB7XG4gICAgcmV0dXJuIGVsZW1lbnQuY2xvc2VzdChcInR1cmJvLWZyYW1lXCIpID09IHRoaXMuZWxlbWVudCAmJiB0aGlzLiNzaG91bGRJbnRlcmNlcHROYXZpZ2F0aW9uKGVsZW1lbnQsIHN1Ym1pdHRlcilcbiAgfVxuXG4gIGZvcm1TdWJtaXR0ZWQoZWxlbWVudCwgc3VibWl0dGVyKSB7XG4gICAgaWYgKHRoaXMuZm9ybVN1Ym1pc3Npb24pIHtcbiAgICAgIHRoaXMuZm9ybVN1Ym1pc3Npb24uc3RvcCgpO1xuICAgIH1cblxuICAgIHRoaXMuZm9ybVN1Ym1pc3Npb24gPSBuZXcgRm9ybVN1Ym1pc3Npb24odGhpcywgZWxlbWVudCwgc3VibWl0dGVyKTtcbiAgICBjb25zdCB7IGZldGNoUmVxdWVzdCB9ID0gdGhpcy5mb3JtU3VibWlzc2lvbjtcbiAgICB0aGlzLnByZXBhcmVSZXF1ZXN0KGZldGNoUmVxdWVzdCk7XG4gICAgdGhpcy5mb3JtU3VibWlzc2lvbi5zdGFydCgpO1xuICB9XG5cbiAgLy8gRmV0Y2ggcmVxdWVzdCBkZWxlZ2F0ZVxuXG4gIHByZXBhcmVSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgICByZXF1ZXN0LmhlYWRlcnNbXCJUdXJiby1GcmFtZVwiXSA9IHRoaXMuaWQ7XG5cbiAgICBpZiAodGhpcy5jdXJyZW50TmF2aWdhdGlvbkVsZW1lbnQ/Lmhhc0F0dHJpYnV0ZShcImRhdGEtdHVyYm8tc3RyZWFtXCIpKSB7XG4gICAgICByZXF1ZXN0LmFjY2VwdFJlc3BvbnNlVHlwZShTdHJlYW1NZXNzYWdlLmNvbnRlbnRUeXBlKTtcbiAgICB9XG4gIH1cblxuICByZXF1ZXN0U3RhcnRlZChfcmVxdWVzdCkge1xuICAgIG1hcmtBc0J1c3kodGhpcy5lbGVtZW50KTtcbiAgfVxuXG4gIHJlcXVlc3RQcmV2ZW50ZWRIYW5kbGluZ1Jlc3BvbnNlKF9yZXF1ZXN0LCBfcmVzcG9uc2UpIHtcbiAgICB0aGlzLiNyZXNvbHZlVmlzaXRQcm9taXNlKCk7XG4gIH1cblxuICBhc3luYyByZXF1ZXN0U3VjY2VlZGVkV2l0aFJlc3BvbnNlKHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gICAgYXdhaXQgdGhpcy5sb2FkUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgIHRoaXMuI3Jlc29sdmVWaXNpdFByb21pc2UoKTtcbiAgfVxuXG4gIGFzeW5jIHJlcXVlc3RGYWlsZWRXaXRoUmVzcG9uc2UocmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgICBhd2FpdCB0aGlzLmxvYWRSZXNwb25zZShyZXNwb25zZSk7XG4gICAgdGhpcy4jcmVzb2x2ZVZpc2l0UHJvbWlzZSgpO1xuICB9XG5cbiAgcmVxdWVzdEVycm9yZWQocmVxdWVzdCwgZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB0aGlzLiNyZXNvbHZlVmlzaXRQcm9taXNlKCk7XG4gIH1cblxuICByZXF1ZXN0RmluaXNoZWQoX3JlcXVlc3QpIHtcbiAgICBjbGVhckJ1c3lTdGF0ZSh0aGlzLmVsZW1lbnQpO1xuICB9XG5cbiAgLy8gRm9ybSBzdWJtaXNzaW9uIGRlbGVnYXRlXG5cbiAgZm9ybVN1Ym1pc3Npb25TdGFydGVkKHsgZm9ybUVsZW1lbnQgfSkge1xuICAgIG1hcmtBc0J1c3koZm9ybUVsZW1lbnQsIHRoaXMuI2ZpbmRGcmFtZUVsZW1lbnQoZm9ybUVsZW1lbnQpKTtcbiAgfVxuXG4gIGZvcm1TdWJtaXNzaW9uU3VjY2VlZGVkV2l0aFJlc3BvbnNlKGZvcm1TdWJtaXNzaW9uLCByZXNwb25zZSkge1xuICAgIGNvbnN0IGZyYW1lID0gdGhpcy4jZmluZEZyYW1lRWxlbWVudChmb3JtU3VibWlzc2lvbi5mb3JtRWxlbWVudCwgZm9ybVN1Ym1pc3Npb24uc3VibWl0dGVyKTtcblxuICAgIGZyYW1lLmRlbGVnYXRlLnByb3Bvc2VWaXNpdElmTmF2aWdhdGVkV2l0aEFjdGlvbihmcmFtZSwgZ2V0VmlzaXRBY3Rpb24oZm9ybVN1Ym1pc3Npb24uc3VibWl0dGVyLCBmb3JtU3VibWlzc2lvbi5mb3JtRWxlbWVudCwgZnJhbWUpKTtcbiAgICBmcmFtZS5kZWxlZ2F0ZS5sb2FkUmVzcG9uc2UocmVzcG9uc2UpO1xuXG4gICAgaWYgKCFmb3JtU3VibWlzc2lvbi5pc1NhZmUpIHtcbiAgICAgIHNlc3Npb24uY2xlYXJDYWNoZSgpO1xuICAgIH1cbiAgfVxuXG4gIGZvcm1TdWJtaXNzaW9uRmFpbGVkV2l0aFJlc3BvbnNlKGZvcm1TdWJtaXNzaW9uLCBmZXRjaFJlc3BvbnNlKSB7XG4gICAgdGhpcy5lbGVtZW50LmRlbGVnYXRlLmxvYWRSZXNwb25zZShmZXRjaFJlc3BvbnNlKTtcbiAgICBzZXNzaW9uLmNsZWFyQ2FjaGUoKTtcbiAgfVxuXG4gIGZvcm1TdWJtaXNzaW9uRXJyb3JlZChmb3JtU3VibWlzc2lvbiwgZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgfVxuXG4gIGZvcm1TdWJtaXNzaW9uRmluaXNoZWQoeyBmb3JtRWxlbWVudCB9KSB7XG4gICAgY2xlYXJCdXN5U3RhdGUoZm9ybUVsZW1lbnQsIHRoaXMuI2ZpbmRGcmFtZUVsZW1lbnQoZm9ybUVsZW1lbnQpKTtcbiAgfVxuXG4gIC8vIFZpZXcgZGVsZWdhdGVcblxuICBhbGxvd3NJbW1lZGlhdGVSZW5kZXIoeyBlbGVtZW50OiBuZXdGcmFtZSB9LCBvcHRpb25zKSB7XG4gICAgY29uc3QgZXZlbnQgPSBkaXNwYXRjaChcInR1cmJvOmJlZm9yZS1mcmFtZS1yZW5kZXJcIiwge1xuICAgICAgdGFyZ2V0OiB0aGlzLmVsZW1lbnQsXG4gICAgICBkZXRhaWw6IHsgbmV3RnJhbWUsIC4uLm9wdGlvbnMgfSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICB9KTtcblxuICAgIGNvbnN0IHtcbiAgICAgIGRlZmF1bHRQcmV2ZW50ZWQsXG4gICAgICBkZXRhaWw6IHsgcmVuZGVyIH1cbiAgICB9ID0gZXZlbnQ7XG5cbiAgICBpZiAodGhpcy52aWV3LnJlbmRlcmVyICYmIHJlbmRlcikge1xuICAgICAgdGhpcy52aWV3LnJlbmRlcmVyLnJlbmRlckVsZW1lbnQgPSByZW5kZXI7XG4gICAgfVxuXG4gICAgcmV0dXJuICFkZWZhdWx0UHJldmVudGVkXG4gIH1cblxuICB2aWV3UmVuZGVyZWRTbmFwc2hvdChfc25hcHNob3QsIF9pc1ByZXZpZXcsIF9yZW5kZXJNZXRob2QpIHt9XG5cbiAgcHJlbG9hZE9uTG9hZExpbmtzRm9yVmlldyhlbGVtZW50KSB7XG4gICAgc2Vzc2lvbi5wcmVsb2FkT25Mb2FkTGlua3NGb3JWaWV3KGVsZW1lbnQpO1xuICB9XG5cbiAgdmlld0ludmFsaWRhdGVkKCkge31cblxuICAvLyBGcmFtZSByZW5kZXJlciBkZWxlZ2F0ZVxuXG4gIHdpbGxSZW5kZXJGcmFtZShjdXJyZW50RWxlbWVudCwgX25ld0VsZW1lbnQpIHtcbiAgICB0aGlzLnByZXZpb3VzRnJhbWVFbGVtZW50ID0gY3VycmVudEVsZW1lbnQuY2xvbmVOb2RlKHRydWUpO1xuICB9XG5cbiAgdmlzaXRDYWNoZWRTbmFwc2hvdCA9ICh7IGVsZW1lbnQgfSkgPT4ge1xuICAgIGNvbnN0IGZyYW1lID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI1wiICsgdGhpcy5lbGVtZW50LmlkKTtcblxuICAgIGlmIChmcmFtZSAmJiB0aGlzLnByZXZpb3VzRnJhbWVFbGVtZW50KSB7XG4gICAgICBmcmFtZS5yZXBsYWNlQ2hpbGRyZW4oLi4udGhpcy5wcmV2aW91c0ZyYW1lRWxlbWVudC5jaGlsZHJlbik7XG4gICAgfVxuXG4gICAgZGVsZXRlIHRoaXMucHJldmlvdXNGcmFtZUVsZW1lbnQ7XG4gIH1cblxuICAvLyBQcml2YXRlXG5cbiAgYXN5bmMgI2xvYWRGcmFtZVJlc3BvbnNlKGZldGNoUmVzcG9uc2UsIGRvY3VtZW50KSB7XG4gICAgY29uc3QgbmV3RnJhbWVFbGVtZW50ID0gYXdhaXQgdGhpcy5leHRyYWN0Rm9yZWlnbkZyYW1lRWxlbWVudChkb2N1bWVudC5ib2R5KTtcbiAgICBjb25zdCByZW5kZXJlckNsYXNzID0gdGhpcy4jc2hvdWxkTW9ycGhGcmFtZSA/IE1vcnBoaW5nRnJhbWVSZW5kZXJlciA6IEZyYW1lUmVuZGVyZXI7XG5cbiAgICBpZiAobmV3RnJhbWVFbGVtZW50KSB7XG4gICAgICBjb25zdCBzbmFwc2hvdCA9IG5ldyBTbmFwc2hvdChuZXdGcmFtZUVsZW1lbnQpO1xuICAgICAgY29uc3QgcmVuZGVyZXIgPSBuZXcgcmVuZGVyZXJDbGFzcyh0aGlzLCB0aGlzLnZpZXcuc25hcHNob3QsIHNuYXBzaG90LCBmYWxzZSwgZmFsc2UpO1xuICAgICAgaWYgKHRoaXMudmlldy5yZW5kZXJQcm9taXNlKSBhd2FpdCB0aGlzLnZpZXcucmVuZGVyUHJvbWlzZTtcbiAgICAgIHRoaXMuY2hhbmdlSGlzdG9yeSgpO1xuXG4gICAgICBhd2FpdCB0aGlzLnZpZXcucmVuZGVyKHJlbmRlcmVyKTtcbiAgICAgIHRoaXMuY29tcGxldGUgPSB0cnVlO1xuICAgICAgc2Vzc2lvbi5mcmFtZVJlbmRlcmVkKGZldGNoUmVzcG9uc2UsIHRoaXMuZWxlbWVudCk7XG4gICAgICBzZXNzaW9uLmZyYW1lTG9hZGVkKHRoaXMuZWxlbWVudCk7XG4gICAgICBhd2FpdCB0aGlzLmZldGNoUmVzcG9uc2VMb2FkZWQoZmV0Y2hSZXNwb25zZSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLiN3aWxsSGFuZGxlRnJhbWVNaXNzaW5nRnJvbVJlc3BvbnNlKGZldGNoUmVzcG9uc2UpKSB7XG4gICAgICB0aGlzLiNoYW5kbGVGcmFtZU1pc3NpbmdGcm9tUmVzcG9uc2UoZmV0Y2hSZXNwb25zZSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgI3Zpc2l0KHVybCkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgRmV0Y2hSZXF1ZXN0KHRoaXMsIEZldGNoTWV0aG9kLmdldCwgdXJsLCBuZXcgVVJMU2VhcmNoUGFyYW1zKCksIHRoaXMuZWxlbWVudCk7XG5cbiAgICB0aGlzLiNjdXJyZW50RmV0Y2hSZXF1ZXN0Py5jYW5jZWwoKTtcbiAgICB0aGlzLiNjdXJyZW50RmV0Y2hSZXF1ZXN0ID0gcmVxdWVzdDtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy4jcmVzb2x2ZVZpc2l0UHJvbWlzZSA9ICgpID0+IHtcbiAgICAgICAgdGhpcy4jcmVzb2x2ZVZpc2l0UHJvbWlzZSA9ICgpID0+IHt9O1xuICAgICAgICB0aGlzLiNjdXJyZW50RmV0Y2hSZXF1ZXN0ID0gbnVsbDtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfTtcbiAgICAgIHJlcXVlc3QucGVyZm9ybSgpO1xuICAgIH0pXG4gIH1cblxuICAjbmF2aWdhdGVGcmFtZShlbGVtZW50LCB1cmwsIHN1Ym1pdHRlcikge1xuICAgIGNvbnN0IGZyYW1lID0gdGhpcy4jZmluZEZyYW1lRWxlbWVudChlbGVtZW50LCBzdWJtaXR0ZXIpO1xuXG4gICAgZnJhbWUuZGVsZWdhdGUucHJvcG9zZVZpc2l0SWZOYXZpZ2F0ZWRXaXRoQWN0aW9uKGZyYW1lLCBnZXRWaXNpdEFjdGlvbihzdWJtaXR0ZXIsIGVsZW1lbnQsIGZyYW1lKSk7XG5cbiAgICB0aGlzLiN3aXRoQ3VycmVudE5hdmlnYXRpb25FbGVtZW50KGVsZW1lbnQsICgpID0+IHtcbiAgICAgIGZyYW1lLnNyYyA9IHVybDtcbiAgICB9KTtcbiAgfVxuXG4gIHByb3Bvc2VWaXNpdElmTmF2aWdhdGVkV2l0aEFjdGlvbihmcmFtZSwgYWN0aW9uID0gbnVsbCkge1xuICAgIHRoaXMuYWN0aW9uID0gYWN0aW9uO1xuXG4gICAgaWYgKHRoaXMuYWN0aW9uKSB7XG4gICAgICBjb25zdCBwYWdlU25hcHNob3QgPSBQYWdlU25hcHNob3QuZnJvbUVsZW1lbnQoZnJhbWUpLmNsb25lKCk7XG4gICAgICBjb25zdCB7IHZpc2l0Q2FjaGVkU25hcHNob3QgfSA9IGZyYW1lLmRlbGVnYXRlO1xuXG4gICAgICBmcmFtZS5kZWxlZ2F0ZS5mZXRjaFJlc3BvbnNlTG9hZGVkID0gYXN5bmMgKGZldGNoUmVzcG9uc2UpID0+IHtcbiAgICAgICAgaWYgKGZyYW1lLnNyYykge1xuICAgICAgICAgIGNvbnN0IHsgc3RhdHVzQ29kZSwgcmVkaXJlY3RlZCB9ID0gZmV0Y2hSZXNwb25zZTtcbiAgICAgICAgICBjb25zdCByZXNwb25zZUhUTUwgPSBhd2FpdCBmZXRjaFJlc3BvbnNlLnJlc3BvbnNlSFRNTDtcbiAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHsgc3RhdHVzQ29kZSwgcmVkaXJlY3RlZCwgcmVzcG9uc2VIVE1MIH07XG4gICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHJlc3BvbnNlLFxuICAgICAgICAgICAgdmlzaXRDYWNoZWRTbmFwc2hvdCxcbiAgICAgICAgICAgIHdpbGxSZW5kZXI6IGZhbHNlLFxuICAgICAgICAgICAgdXBkYXRlSGlzdG9yeTogZmFsc2UsXG4gICAgICAgICAgICByZXN0b3JhdGlvbklkZW50aWZpZXI6IHRoaXMucmVzdG9yYXRpb25JZGVudGlmaWVyLFxuICAgICAgICAgICAgc25hcHNob3Q6IHBhZ2VTbmFwc2hvdFxuICAgICAgICAgIH07XG5cbiAgICAgICAgICBpZiAodGhpcy5hY3Rpb24pIG9wdGlvbnMuYWN0aW9uID0gdGhpcy5hY3Rpb247XG5cbiAgICAgICAgICBzZXNzaW9uLnZpc2l0KGZyYW1lLnNyYywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgY2hhbmdlSGlzdG9yeSgpIHtcbiAgICBpZiAodGhpcy5hY3Rpb24pIHtcbiAgICAgIGNvbnN0IG1ldGhvZCA9IGdldEhpc3RvcnlNZXRob2RGb3JBY3Rpb24odGhpcy5hY3Rpb24pO1xuICAgICAgc2Vzc2lvbi5oaXN0b3J5LnVwZGF0ZShtZXRob2QsIGV4cGFuZFVSTCh0aGlzLmVsZW1lbnQuc3JjIHx8IFwiXCIpLCB0aGlzLnJlc3RvcmF0aW9uSWRlbnRpZmllcik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgI2hhbmRsZVVudmlzaXRhYmxlRnJhbWVSZXNwb25zZShmZXRjaFJlc3BvbnNlKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgYFRoZSByZXNwb25zZSAoJHtmZXRjaFJlc3BvbnNlLnN0YXR1c0NvZGV9KSBmcm9tIDx0dXJiby1mcmFtZSBpZD1cIiR7dGhpcy5lbGVtZW50LmlkfVwiPiBpcyBwZXJmb3JtaW5nIGEgZnVsbCBwYWdlIHZpc2l0IGR1ZSB0byB0dXJiby12aXNpdC1jb250cm9sLmBcbiAgICApO1xuXG4gICAgYXdhaXQgdGhpcy4jdmlzaXRSZXNwb25zZShmZXRjaFJlc3BvbnNlLnJlc3BvbnNlKTtcbiAgfVxuXG4gICN3aWxsSGFuZGxlRnJhbWVNaXNzaW5nRnJvbVJlc3BvbnNlKGZldGNoUmVzcG9uc2UpIHtcbiAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwiY29tcGxldGVcIiwgXCJcIik7XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGZldGNoUmVzcG9uc2UucmVzcG9uc2U7XG4gICAgY29uc3QgdmlzaXQgPSBhc3luYyAodXJsLCBvcHRpb25zKSA9PiB7XG4gICAgICBpZiAodXJsIGluc3RhbmNlb2YgUmVzcG9uc2UpIHtcbiAgICAgICAgdGhpcy4jdmlzaXRSZXNwb25zZSh1cmwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2Vzc2lvbi52aXNpdCh1cmwsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBldmVudCA9IGRpc3BhdGNoKFwidHVyYm86ZnJhbWUtbWlzc2luZ1wiLCB7XG4gICAgICB0YXJnZXQ6IHRoaXMuZWxlbWVudCxcbiAgICAgIGRldGFpbDogeyByZXNwb25zZSwgdmlzaXQgfSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICB9KTtcblxuICAgIHJldHVybiAhZXZlbnQuZGVmYXVsdFByZXZlbnRlZFxuICB9XG5cbiAgI2hhbmRsZUZyYW1lTWlzc2luZ0Zyb21SZXNwb25zZShmZXRjaFJlc3BvbnNlKSB7XG4gICAgdGhpcy52aWV3Lm1pc3NpbmcoKTtcbiAgICB0aGlzLiN0aHJvd0ZyYW1lTWlzc2luZ0Vycm9yKGZldGNoUmVzcG9uc2UpO1xuICB9XG5cbiAgI3Rocm93RnJhbWVNaXNzaW5nRXJyb3IoZmV0Y2hSZXNwb25zZSkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBgVGhlIHJlc3BvbnNlICgke2ZldGNoUmVzcG9uc2Uuc3RhdHVzQ29kZX0pIGRpZCBub3QgY29udGFpbiB0aGUgZXhwZWN0ZWQgPHR1cmJvLWZyYW1lIGlkPVwiJHt0aGlzLmVsZW1lbnQuaWR9XCI+IGFuZCB3aWxsIGJlIGlnbm9yZWQuIFRvIHBlcmZvcm0gYSBmdWxsIHBhZ2UgdmlzaXQgaW5zdGVhZCwgc2V0IHR1cmJvLXZpc2l0LWNvbnRyb2wgdG8gcmVsb2FkLmA7XG4gICAgdGhyb3cgbmV3IFR1cmJvRnJhbWVNaXNzaW5nRXJyb3IobWVzc2FnZSlcbiAgfVxuXG4gIGFzeW5jICN2aXNpdFJlc3BvbnNlKHJlc3BvbnNlKSB7XG4gICAgY29uc3Qgd3JhcHBlZCA9IG5ldyBGZXRjaFJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICBjb25zdCByZXNwb25zZUhUTUwgPSBhd2FpdCB3cmFwcGVkLnJlc3BvbnNlSFRNTDtcbiAgICBjb25zdCB7IGxvY2F0aW9uLCByZWRpcmVjdGVkLCBzdGF0dXNDb2RlIH0gPSB3cmFwcGVkO1xuXG4gICAgcmV0dXJuIHNlc3Npb24udmlzaXQobG9jYXRpb24sIHsgcmVzcG9uc2U6IHsgcmVkaXJlY3RlZCwgc3RhdHVzQ29kZSwgcmVzcG9uc2VIVE1MIH0gfSlcbiAgfVxuXG4gICNmaW5kRnJhbWVFbGVtZW50KGVsZW1lbnQsIHN1Ym1pdHRlcikge1xuICAgIGNvbnN0IGlkID0gZ2V0QXR0cmlidXRlKFwiZGF0YS10dXJiby1mcmFtZVwiLCBzdWJtaXR0ZXIsIGVsZW1lbnQpIHx8IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIik7XG4gICAgcmV0dXJuIGdldEZyYW1lRWxlbWVudEJ5SWQoaWQpID8/IHRoaXMuZWxlbWVudFxuICB9XG5cbiAgYXN5bmMgZXh0cmFjdEZvcmVpZ25GcmFtZUVsZW1lbnQoY29udGFpbmVyKSB7XG4gICAgbGV0IGVsZW1lbnQ7XG4gICAgY29uc3QgaWQgPSBDU1MuZXNjYXBlKHRoaXMuaWQpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGVsZW1lbnQgPSBhY3RpdmF0ZUVsZW1lbnQoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYHR1cmJvLWZyYW1lIyR7aWR9YCksIHRoaXMuc291cmNlVVJMKTtcbiAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBlbGVtZW50XG4gICAgICB9XG5cbiAgICAgIGVsZW1lbnQgPSBhY3RpdmF0ZUVsZW1lbnQoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYHR1cmJvLWZyYW1lW3NyY11bcmVjdXJzZX49JHtpZH1dYCksIHRoaXMuc291cmNlVVJMKTtcbiAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgIGF3YWl0IGVsZW1lbnQubG9hZGVkO1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5leHRyYWN0Rm9yZWlnbkZyYW1lRWxlbWVudChlbGVtZW50KVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIHJldHVybiBuZXcgRnJhbWVFbGVtZW50KClcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgI2Zvcm1BY3Rpb25Jc1Zpc2l0YWJsZShmb3JtLCBzdWJtaXR0ZXIpIHtcbiAgICBjb25zdCBhY3Rpb24gPSBnZXRBY3Rpb24kMShmb3JtLCBzdWJtaXR0ZXIpO1xuXG4gICAgcmV0dXJuIGxvY2F0aW9uSXNWaXNpdGFibGUoZXhwYW5kVVJMKGFjdGlvbiksIHRoaXMucm9vdExvY2F0aW9uKVxuICB9XG5cbiAgI3Nob3VsZEludGVyY2VwdE5hdmlnYXRpb24oZWxlbWVudCwgc3VibWl0dGVyKSB7XG4gICAgY29uc3QgaWQgPSBnZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLWZyYW1lXCIsIHN1Ym1pdHRlciwgZWxlbWVudCkgfHwgdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcInRhcmdldFwiKTtcblxuICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgSFRNTEZvcm1FbGVtZW50ICYmICF0aGlzLiNmb3JtQWN0aW9uSXNWaXNpdGFibGUoZWxlbWVudCwgc3VibWl0dGVyKSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmVuYWJsZWQgfHwgaWQgPT0gXCJfdG9wXCIpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGlmIChpZCkge1xuICAgICAgY29uc3QgZnJhbWVFbGVtZW50ID0gZ2V0RnJhbWVFbGVtZW50QnlJZChpZCk7XG4gICAgICBpZiAoZnJhbWVFbGVtZW50KSB7XG4gICAgICAgIHJldHVybiAhZnJhbWVFbGVtZW50LmRpc2FibGVkXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFzZXNzaW9uLmVsZW1lbnRJc05hdmlnYXRhYmxlKGVsZW1lbnQpKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoc3VibWl0dGVyICYmICFzZXNzaW9uLmVsZW1lbnRJc05hdmlnYXRhYmxlKHN1Ym1pdHRlcikpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICAvLyBDb21wdXRlZCBwcm9wZXJ0aWVzXG5cbiAgZ2V0IGlkKCkge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnQuaWRcbiAgfVxuXG4gIGdldCBlbmFibGVkKCkge1xuICAgIHJldHVybiAhdGhpcy5lbGVtZW50LmRpc2FibGVkXG4gIH1cblxuICBnZXQgc291cmNlVVJMKCkge1xuICAgIGlmICh0aGlzLmVsZW1lbnQuc3JjKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbGVtZW50LnNyY1xuICAgIH1cbiAgfVxuXG4gIHNldCBzb3VyY2VVUkwoc291cmNlVVJMKSB7XG4gICAgdGhpcy4jaWdub3JpbmdDaGFuZ2VzVG9BdHRyaWJ1dGUoXCJzcmNcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5lbGVtZW50LnNyYyA9IHNvdXJjZVVSTCA/PyBudWxsO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0IGxvYWRpbmdTdHlsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50LmxvYWRpbmdcbiAgfVxuXG4gIGdldCBpc0xvYWRpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuZm9ybVN1Ym1pc3Npb24gIT09IHVuZGVmaW5lZCB8fCB0aGlzLiNyZXNvbHZlVmlzaXRQcm9taXNlKCkgIT09IHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGNvbXBsZXRlKCkge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnQuaGFzQXR0cmlidXRlKFwiY29tcGxldGVcIilcbiAgfVxuXG4gIHNldCBjb21wbGV0ZSh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShcImNvbXBsZXRlXCIsIFwiXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiY29tcGxldGVcIik7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGlzQWN0aXZlKCkge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnQuaXNBY3RpdmUgJiYgdGhpcy4jY29ubmVjdGVkXG4gIH1cblxuICBnZXQgcm9vdExvY2F0aW9uKCkge1xuICAgIGNvbnN0IG1ldGEgPSB0aGlzLmVsZW1lbnQub3duZXJEb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBtZXRhW25hbWU9XCJ0dXJiby1yb290XCJdYCk7XG4gICAgY29uc3Qgcm9vdCA9IG1ldGE/LmNvbnRlbnQgPz8gXCIvXCI7XG4gICAgcmV0dXJuIGV4cGFuZFVSTChyb290KVxuICB9XG5cbiAgI2lzSWdub3JpbmdDaGFuZ2VzVG8oYXR0cmlidXRlTmFtZSkge1xuICAgIHJldHVybiB0aGlzLiNpZ25vcmVkQXR0cmlidXRlcy5oYXMoYXR0cmlidXRlTmFtZSlcbiAgfVxuXG4gICNpZ25vcmluZ0NoYW5nZXNUb0F0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lLCBjYWxsYmFjaykge1xuICAgIHRoaXMuI2lnbm9yZWRBdHRyaWJ1dGVzLmFkZChhdHRyaWJ1dGVOYW1lKTtcbiAgICBjYWxsYmFjaygpO1xuICAgIHRoaXMuI2lnbm9yZWRBdHRyaWJ1dGVzLmRlbGV0ZShhdHRyaWJ1dGVOYW1lKTtcbiAgfVxuXG4gICN3aXRoQ3VycmVudE5hdmlnYXRpb25FbGVtZW50KGVsZW1lbnQsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jdXJyZW50TmF2aWdhdGlvbkVsZW1lbnQgPSBlbGVtZW50O1xuICAgIGNhbGxiYWNrKCk7XG4gICAgZGVsZXRlIHRoaXMuY3VycmVudE5hdmlnYXRpb25FbGVtZW50O1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldEZyYW1lRWxlbWVudEJ5SWQoaWQpIHtcbiAgaWYgKGlkICE9IG51bGwpIHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgRnJhbWVFbGVtZW50KSB7XG4gICAgICByZXR1cm4gZWxlbWVudFxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhY3RpdmF0ZUVsZW1lbnQoZWxlbWVudCwgY3VycmVudFVSTCkge1xuICBpZiAoZWxlbWVudCkge1xuICAgIGNvbnN0IHNyYyA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwic3JjXCIpO1xuICAgIGlmIChzcmMgIT0gbnVsbCAmJiBjdXJyZW50VVJMICE9IG51bGwgJiYgdXJsc0FyZUVxdWFsKHNyYywgY3VycmVudFVSTCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTWF0Y2hpbmcgPHR1cmJvLWZyYW1lIGlkPVwiJHtlbGVtZW50LmlkfVwiPiBlbGVtZW50IGhhcyBhIHNvdXJjZSBVUkwgd2hpY2ggcmVmZXJlbmNlcyBpdHNlbGZgKVxuICAgIH1cbiAgICBpZiAoZWxlbWVudC5vd25lckRvY3VtZW50ICE9PSBkb2N1bWVudCkge1xuICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmltcG9ydE5vZGUoZWxlbWVudCwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBGcmFtZUVsZW1lbnQpIHtcbiAgICAgIGVsZW1lbnQuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgIGVsZW1lbnQuZGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgIHJldHVybiBlbGVtZW50XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IFN0cmVhbUFjdGlvbnMgPSB7XG4gIGFmdGVyKCkge1xuICAgIHRoaXMudGFyZ2V0RWxlbWVudHMuZm9yRWFjaCgoZSkgPT4gZS5wYXJlbnRFbGVtZW50Py5pbnNlcnRCZWZvcmUodGhpcy50ZW1wbGF0ZUNvbnRlbnQsIGUubmV4dFNpYmxpbmcpKTtcbiAgfSxcblxuICBhcHBlbmQoKSB7XG4gICAgdGhpcy5yZW1vdmVEdXBsaWNhdGVUYXJnZXRDaGlsZHJlbigpO1xuICAgIHRoaXMudGFyZ2V0RWxlbWVudHMuZm9yRWFjaCgoZSkgPT4gZS5hcHBlbmQodGhpcy50ZW1wbGF0ZUNvbnRlbnQpKTtcbiAgfSxcblxuICBiZWZvcmUoKSB7XG4gICAgdGhpcy50YXJnZXRFbGVtZW50cy5mb3JFYWNoKChlKSA9PiBlLnBhcmVudEVsZW1lbnQ/Lmluc2VydEJlZm9yZSh0aGlzLnRlbXBsYXRlQ29udGVudCwgZSkpO1xuICB9LFxuXG4gIHByZXBlbmQoKSB7XG4gICAgdGhpcy5yZW1vdmVEdXBsaWNhdGVUYXJnZXRDaGlsZHJlbigpO1xuICAgIHRoaXMudGFyZ2V0RWxlbWVudHMuZm9yRWFjaCgoZSkgPT4gZS5wcmVwZW5kKHRoaXMudGVtcGxhdGVDb250ZW50KSk7XG4gIH0sXG5cbiAgcmVtb3ZlKCkge1xuICAgIHRoaXMudGFyZ2V0RWxlbWVudHMuZm9yRWFjaCgoZSkgPT4gZS5yZW1vdmUoKSk7XG4gIH0sXG5cbiAgcmVwbGFjZSgpIHtcbiAgICBjb25zdCBtZXRob2QgPSB0aGlzLmdldEF0dHJpYnV0ZShcIm1ldGhvZFwiKTtcblxuICAgIHRoaXMudGFyZ2V0RWxlbWVudHMuZm9yRWFjaCgodGFyZ2V0RWxlbWVudCkgPT4ge1xuICAgICAgaWYgKG1ldGhvZCA9PT0gXCJtb3JwaFwiKSB7XG4gICAgICAgIG1vcnBoRWxlbWVudHModGFyZ2V0RWxlbWVudCwgdGhpcy50ZW1wbGF0ZUNvbnRlbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0RWxlbWVudC5yZXBsYWNlV2l0aCh0aGlzLnRlbXBsYXRlQ29udGVudCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgdXBkYXRlKCkge1xuICAgIGNvbnN0IG1ldGhvZCA9IHRoaXMuZ2V0QXR0cmlidXRlKFwibWV0aG9kXCIpO1xuXG4gICAgdGhpcy50YXJnZXRFbGVtZW50cy5mb3JFYWNoKCh0YXJnZXRFbGVtZW50KSA9PiB7XG4gICAgICBpZiAobWV0aG9kID09PSBcIm1vcnBoXCIpIHtcbiAgICAgICAgbW9ycGhDaGlsZHJlbih0YXJnZXRFbGVtZW50LCB0aGlzLnRlbXBsYXRlQ29udGVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXRFbGVtZW50LmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgIHRhcmdldEVsZW1lbnQuYXBwZW5kKHRoaXMudGVtcGxhdGVDb250ZW50KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICByZWZyZXNoKCkge1xuICAgIHNlc3Npb24ucmVmcmVzaCh0aGlzLmJhc2VVUkksIHRoaXMucmVxdWVzdElkKTtcbiAgfVxufTtcblxuLy8gPHR1cmJvLXN0cmVhbSBhY3Rpb249cmVwbGFjZSB0YXJnZXQ9aWQ+PHRlbXBsYXRlPi4uLlxuXG4vKipcbiAqIFJlbmRlcnMgdXBkYXRlcyB0byB0aGUgcGFnZSBmcm9tIGEgc3RyZWFtIG9mIG1lc3NhZ2VzLlxuICpcbiAqIFVzaW5nIHRoZSBgYWN0aW9uYCBhdHRyaWJ1dGUsIHRoaXMgY2FuIGJlIGNvbmZpZ3VyZWQgb25lIG9mIGVpZ2h0IHdheXM6XG4gKlxuICogLSBgYWZ0ZXJgIC0gaW5zZXJ0cyB0aGUgcmVzdWx0IGFmdGVyIHRoZSB0YXJnZXRcbiAqIC0gYGFwcGVuZGAgLSBhcHBlbmRzIHRoZSByZXN1bHQgdG8gdGhlIHRhcmdldFxuICogLSBgYmVmb3JlYCAtIGluc2VydHMgdGhlIHJlc3VsdCBiZWZvcmUgdGhlIHRhcmdldFxuICogLSBgcHJlcGVuZGAgLSBwcmVwZW5kcyB0aGUgcmVzdWx0IHRvIHRoZSB0YXJnZXRcbiAqIC0gYHJlZnJlc2hgIC0gaW5pdGlhdGVzIGEgcGFnZSByZWZyZXNoXG4gKiAtIGByZW1vdmVgIC0gcmVtb3ZlcyB0aGUgdGFyZ2V0XG4gKiAtIGByZXBsYWNlYCAtIHJlcGxhY2VzIHRoZSBvdXRlciBIVE1MIG9mIHRoZSB0YXJnZXRcbiAqIC0gYHVwZGF0ZWAgLSByZXBsYWNlcyB0aGUgaW5uZXIgSFRNTCBvZiB0aGUgdGFyZ2V0XG4gKlxuICogQGN1c3RvbUVsZW1lbnQgdHVyYm8tc3RyZWFtXG4gKiBAZXhhbXBsZVxuICogICA8dHVyYm8tc3RyZWFtIGFjdGlvbj1cImFwcGVuZFwiIHRhcmdldD1cImRvbV9pZFwiPlxuICogICAgIDx0ZW1wbGF0ZT5cbiAqICAgICAgIENvbnRlbnQgdG8gYXBwZW5kIHRvIHRhcmdldCBkZXNpZ25hdGVkIHdpdGggdGhlIGRvbV9pZC5cbiAqICAgICA8L3RlbXBsYXRlPlxuICogICA8L3R1cmJvLXN0cmVhbT5cbiAqL1xuY2xhc3MgU3RyZWFtRWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgc3RhdGljIGFzeW5jIHJlbmRlckVsZW1lbnQobmV3RWxlbWVudCkge1xuICAgIGF3YWl0IG5ld0VsZW1lbnQucGVyZm9ybUFjdGlvbigpO1xuICB9XG5cbiAgYXN5bmMgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMucmVuZGVyKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLmRpc2Nvbm5lY3QoKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyByZW5kZXIoKSB7XG4gICAgcmV0dXJuICh0aGlzLnJlbmRlclByb21pc2UgPz89IChhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBldmVudCA9IHRoaXMuYmVmb3JlUmVuZGVyRXZlbnQ7XG5cbiAgICAgIGlmICh0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpKSB7XG4gICAgICAgIGF3YWl0IG5leHRSZXBhaW50KCk7XG4gICAgICAgIGF3YWl0IGV2ZW50LmRldGFpbC5yZW5kZXIodGhpcyk7XG4gICAgICB9XG4gICAgfSkoKSlcbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKSB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMucmVtb3ZlKCk7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZW1wdHlcbiAgICB9IGNhdGNoIHt9XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBkdXBsaWNhdGUgY2hpbGRyZW4gKGJ5IElEKVxuICAgKi9cbiAgcmVtb3ZlRHVwbGljYXRlVGFyZ2V0Q2hpbGRyZW4oKSB7XG4gICAgdGhpcy5kdXBsaWNhdGVDaGlsZHJlbi5mb3JFYWNoKChjKSA9PiBjLnJlbW92ZSgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBsaXN0IG9mIGR1cGxpY2F0ZSBjaGlsZHJlbiAoaS5lLiB0aG9zZSB3aXRoIHRoZSBzYW1lIElEKVxuICAgKi9cbiAgZ2V0IGR1cGxpY2F0ZUNoaWxkcmVuKCkge1xuICAgIGNvbnN0IGV4aXN0aW5nQ2hpbGRyZW4gPSB0aGlzLnRhcmdldEVsZW1lbnRzLmZsYXRNYXAoKGUpID0+IFsuLi5lLmNoaWxkcmVuXSkuZmlsdGVyKChjKSA9PiAhIWMuZ2V0QXR0cmlidXRlKFwiaWRcIikpO1xuICAgIGNvbnN0IG5ld0NoaWxkcmVuSWRzID0gWy4uLih0aGlzLnRlbXBsYXRlQ29udGVudD8uY2hpbGRyZW4gfHwgW10pXS5maWx0ZXIoKGMpID0+ICEhYy5nZXRBdHRyaWJ1dGUoXCJpZFwiKSkubWFwKChjKSA9PiBjLmdldEF0dHJpYnV0ZShcImlkXCIpKTtcblxuICAgIHJldHVybiBleGlzdGluZ0NoaWxkcmVuLmZpbHRlcigoYykgPT4gbmV3Q2hpbGRyZW5JZHMuaW5jbHVkZXMoYy5nZXRBdHRyaWJ1dGUoXCJpZFwiKSkpXG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgYWN0aW9uIGZ1bmN0aW9uIHRvIGJlIHBlcmZvcm1lZC5cbiAgICovXG4gIGdldCBwZXJmb3JtQWN0aW9uKCkge1xuICAgIGlmICh0aGlzLmFjdGlvbikge1xuICAgICAgY29uc3QgYWN0aW9uRnVuY3Rpb24gPSBTdHJlYW1BY3Rpb25zW3RoaXMuYWN0aW9uXTtcbiAgICAgIGlmIChhY3Rpb25GdW5jdGlvbikge1xuICAgICAgICByZXR1cm4gYWN0aW9uRnVuY3Rpb25cbiAgICAgIH1cbiAgICAgIHRoaXMuI3JhaXNlKFwidW5rbm93biBhY3Rpb25cIik7XG4gICAgfVxuICAgIHRoaXMuI3JhaXNlKFwiYWN0aW9uIGF0dHJpYnV0ZSBpcyBtaXNzaW5nXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHRhcmdldCBlbGVtZW50cyB3aGljaCB0aGUgdGVtcGxhdGUgd2lsbCBiZSByZW5kZXJlZCB0by5cbiAgICovXG4gIGdldCB0YXJnZXRFbGVtZW50cygpIHtcbiAgICBpZiAodGhpcy50YXJnZXQpIHtcbiAgICAgIHJldHVybiB0aGlzLnRhcmdldEVsZW1lbnRzQnlJZFxuICAgIH0gZWxzZSBpZiAodGhpcy50YXJnZXRzKSB7XG4gICAgICByZXR1cm4gdGhpcy50YXJnZXRFbGVtZW50c0J5UXVlcnlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4jcmFpc2UoXCJ0YXJnZXQgb3IgdGFyZ2V0cyBhdHRyaWJ1dGUgaXMgbWlzc2luZ1wiKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY29udGVudHMgb2YgdGhlIG1haW4gYDx0ZW1wbGF0ZT5gLlxuICAgKi9cbiAgZ2V0IHRlbXBsYXRlQ29udGVudCgpIHtcbiAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZUVsZW1lbnQuY29udGVudC5jbG9uZU5vZGUodHJ1ZSlcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBtYWluIGA8dGVtcGxhdGU+YCB1c2VkIGZvciByZW5kZXJpbmdcbiAgICovXG4gIGdldCB0ZW1wbGF0ZUVsZW1lbnQoKSB7XG4gICAgaWYgKHRoaXMuZmlyc3RFbGVtZW50Q2hpbGQgPT09IG51bGwpIHtcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGhpcy5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcbiAgICAgIHRoaXMuYXBwZW5kQ2hpbGQodGVtcGxhdGUpO1xuICAgICAgcmV0dXJuIHRlbXBsYXRlXG4gICAgfSBlbHNlIGlmICh0aGlzLmZpcnN0RWxlbWVudENoaWxkIGluc3RhbmNlb2YgSFRNTFRlbXBsYXRlRWxlbWVudCkge1xuICAgICAgcmV0dXJuIHRoaXMuZmlyc3RFbGVtZW50Q2hpbGRcbiAgICB9XG4gICAgdGhpcy4jcmFpc2UoXCJmaXJzdCBjaGlsZCBlbGVtZW50IG11c3QgYmUgYSA8dGVtcGxhdGU+IGVsZW1lbnRcIik7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VycmVudCBhY3Rpb24uXG4gICAqL1xuICBnZXQgYWN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZShcImFjdGlvblwiKVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1cnJlbnQgdGFyZ2V0IChhbiBlbGVtZW50IElEKSB0byB3aGljaCB0aGUgcmVzdWx0IHdpbGxcbiAgICogYmUgcmVuZGVyZWQuXG4gICAqL1xuICBnZXQgdGFyZ2V0KCkge1xuICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZShcInRhcmdldFwiKVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1cnJlbnQgXCJ0YXJnZXRzXCIgc2VsZWN0b3IgKGEgQ1NTIHNlbGVjdG9yKVxuICAgKi9cbiAgZ2V0IHRhcmdldHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKFwidGFyZ2V0c1wiKVxuICB9XG5cbiAgLyoqXG4gICAqIFJlYWRzIHRoZSByZXF1ZXN0LWlkIGF0dHJpYnV0ZVxuICAgKi9cbiAgZ2V0IHJlcXVlc3RJZCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoXCJyZXF1ZXN0LWlkXCIpXG4gIH1cblxuICAjcmFpc2UobWVzc2FnZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgJHt0aGlzLmRlc2NyaXB0aW9ufTogJHttZXNzYWdlfWApXG4gIH1cblxuICBnZXQgZGVzY3JpcHRpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLm91dGVySFRNTC5tYXRjaCgvPFtePl0rPi8pID8/IFtdKVswXSA/PyBcIjx0dXJiby1zdHJlYW0+XCJcbiAgfVxuXG4gIGdldCBiZWZvcmVSZW5kZXJFdmVudCgpIHtcbiAgICByZXR1cm4gbmV3IEN1c3RvbUV2ZW50KFwidHVyYm86YmVmb3JlLXN0cmVhbS1yZW5kZXJcIiwge1xuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWUsXG4gICAgICBkZXRhaWw6IHsgbmV3U3RyZWFtOiB0aGlzLCByZW5kZXI6IFN0cmVhbUVsZW1lbnQucmVuZGVyRWxlbWVudCB9XG4gICAgfSlcbiAgfVxuXG4gIGdldCB0YXJnZXRFbGVtZW50c0J5SWQoKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IHRoaXMub3duZXJEb2N1bWVudD8uZ2V0RWxlbWVudEJ5SWQodGhpcy50YXJnZXQpO1xuXG4gICAgaWYgKGVsZW1lbnQgIT09IG51bGwpIHtcbiAgICAgIHJldHVybiBbZWxlbWVudF1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICB9XG5cbiAgZ2V0IHRhcmdldEVsZW1lbnRzQnlRdWVyeSgpIHtcbiAgICBjb25zdCBlbGVtZW50cyA9IHRoaXMub3duZXJEb2N1bWVudD8ucXVlcnlTZWxlY3RvckFsbCh0aGlzLnRhcmdldHMpO1xuXG4gICAgaWYgKGVsZW1lbnRzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGVsZW1lbnRzKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gIH1cbn1cblxuY2xhc3MgU3RyZWFtU291cmNlRWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgc3RyZWFtU291cmNlID0gbnVsbFxuXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHRoaXMuc3RyZWFtU291cmNlID0gdGhpcy5zcmMubWF0Y2goL153c3sxLDJ9Oi8pID8gbmV3IFdlYlNvY2tldCh0aGlzLnNyYykgOiBuZXcgRXZlbnRTb3VyY2UodGhpcy5zcmMpO1xuXG4gICAgY29ubmVjdFN0cmVhbVNvdXJjZSh0aGlzLnN0cmVhbVNvdXJjZSk7XG4gIH1cblxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBpZiAodGhpcy5zdHJlYW1Tb3VyY2UpIHtcbiAgICAgIHRoaXMuc3RyZWFtU291cmNlLmNsb3NlKCk7XG5cbiAgICAgIGRpc2Nvbm5lY3RTdHJlYW1Tb3VyY2UodGhpcy5zdHJlYW1Tb3VyY2UpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBzcmMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKFwic3JjXCIpIHx8IFwiXCJcbiAgfVxufVxuXG5GcmFtZUVsZW1lbnQuZGVsZWdhdGVDb25zdHJ1Y3RvciA9IEZyYW1lQ29udHJvbGxlcjtcblxuaWYgKGN1c3RvbUVsZW1lbnRzLmdldChcInR1cmJvLWZyYW1lXCIpID09PSB1bmRlZmluZWQpIHtcbiAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwidHVyYm8tZnJhbWVcIiwgRnJhbWVFbGVtZW50KTtcbn1cblxuaWYgKGN1c3RvbUVsZW1lbnRzLmdldChcInR1cmJvLXN0cmVhbVwiKSA9PT0gdW5kZWZpbmVkKSB7XG4gIGN1c3RvbUVsZW1lbnRzLmRlZmluZShcInR1cmJvLXN0cmVhbVwiLCBTdHJlYW1FbGVtZW50KTtcbn1cblxuaWYgKGN1c3RvbUVsZW1lbnRzLmdldChcInR1cmJvLXN0cmVhbS1zb3VyY2VcIikgPT09IHVuZGVmaW5lZCkge1xuICBjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJ0dXJiby1zdHJlYW0tc291cmNlXCIsIFN0cmVhbVNvdXJjZUVsZW1lbnQpO1xufVxuXG4oKCkgPT4ge1xuICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQ7XG4gIGlmICghZWxlbWVudCkgcmV0dXJuXG4gIGlmIChlbGVtZW50Lmhhc0F0dHJpYnV0ZShcImRhdGEtdHVyYm8tc3VwcHJlc3Mtd2FybmluZ1wiKSkgcmV0dXJuXG5cbiAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgd2hpbGUgKGVsZW1lbnQpIHtcbiAgICBpZiAoZWxlbWVudCA9PSBkb2N1bWVudC5ib2R5KSB7XG4gICAgICByZXR1cm4gY29uc29sZS53YXJuKFxuICAgICAgICB1bmluZGVudGBcbiAgICAgICAgWW91IGFyZSBsb2FkaW5nIFR1cmJvIGZyb20gYSA8c2NyaXB0PiBlbGVtZW50IGluc2lkZSB0aGUgPGJvZHk+IGVsZW1lbnQuIFRoaXMgaXMgcHJvYmFibHkgbm90IHdoYXQgeW91IG1lYW50IHRvIGRvIVxuXG4gICAgICAgIExvYWQgeW91ciBhcHBsaWNhdGlvblx1MjAxOXMgSmF2YVNjcmlwdCBidW5kbGUgaW5zaWRlIHRoZSA8aGVhZD4gZWxlbWVudCBpbnN0ZWFkLiA8c2NyaXB0PiBlbGVtZW50cyBpbiA8Ym9keT4gYXJlIGV2YWx1YXRlZCB3aXRoIGVhY2ggcGFnZSBjaGFuZ2UuXG5cbiAgICAgICAgRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZTogaHR0cHM6Ly90dXJiby5ob3R3aXJlZC5kZXYvaGFuZGJvb2svYnVpbGRpbmcjd29ya2luZy13aXRoLXNjcmlwdC1lbGVtZW50c1xuXG4gICAgICAgIFx1MjAxNFx1MjAxNFxuICAgICAgICBTdXBwcmVzcyB0aGlzIHdhcm5pbmcgYnkgYWRkaW5nIGEgXCJkYXRhLXR1cmJvLXN1cHByZXNzLXdhcm5pbmdcIiBhdHRyaWJ1dGUgdG86ICVzXG4gICAgICBgLFxuICAgICAgICBlbGVtZW50Lm91dGVySFRNTFxuICAgICAgKVxuICAgIH1cblxuICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gIH1cbn0pKCk7XG5cbndpbmRvdy5UdXJibyA9IHsgLi4uVHVyYm8sIFN0cmVhbUFjdGlvbnMgfTtcbnN0YXJ0KCk7XG5cbmV4cG9ydCB7IEZldGNoRW5jdHlwZSwgRmV0Y2hNZXRob2QsIEZldGNoUmVxdWVzdCwgRmV0Y2hSZXNwb25zZSwgRnJhbWVFbGVtZW50LCBGcmFtZUxvYWRpbmdTdHlsZSwgRnJhbWVSZW5kZXJlciwgUGFnZVJlbmRlcmVyLCBQYWdlU25hcHNob3QsIFN0cmVhbUFjdGlvbnMsIFN0cmVhbUVsZW1lbnQsIFN0cmVhbVNvdXJjZUVsZW1lbnQsIGNhY2hlLCBjbGVhckNhY2hlLCBjb25maWcsIGNvbm5lY3RTdHJlYW1Tb3VyY2UsIGRpc2Nvbm5lY3RTdHJlYW1Tb3VyY2UsIGZldGNoV2l0aFR1cmJvSGVhZGVycyBhcyBmZXRjaCwgZmV0Y2hFbmN0eXBlRnJvbVN0cmluZywgZmV0Y2hNZXRob2RGcm9tU3RyaW5nLCBpc1NhZmUsIG1vcnBoQm9keUVsZW1lbnRzLCBtb3JwaENoaWxkcmVuLCBtb3JwaEVsZW1lbnRzLCBtb3JwaFR1cmJvRnJhbWVFbGVtZW50cywgbmF2aWdhdG9yJDEgYXMgbmF2aWdhdG9yLCByZWdpc3RlckFkYXB0ZXIsIHJlbmRlclN0cmVhbU1lc3NhZ2UsIHNlc3Npb24sIHNldENvbmZpcm1NZXRob2QsIHNldEZvcm1Nb2RlLCBzZXRQcm9ncmVzc0JhckRlbGF5LCBzdGFydCwgdmlzaXQgfTtcbiIsICJsZXQgY29uc3VtZXJcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENvbnN1bWVyKCkge1xuICByZXR1cm4gY29uc3VtZXIgfHwgc2V0Q29uc3VtZXIoY3JlYXRlQ29uc3VtZXIoKS50aGVuKHNldENvbnN1bWVyKSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldENvbnN1bWVyKG5ld0NvbnN1bWVyKSB7XG4gIHJldHVybiBjb25zdW1lciA9IG5ld0NvbnN1bWVyXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDb25zdW1lcigpIHtcbiAgY29uc3QgeyBjcmVhdGVDb25zdW1lciB9ID0gYXdhaXQgaW1wb3J0KC8qIHdlYnBhY2tDaHVua05hbWU6IFwiYWN0aW9uY2FibGVcIiAqLyBcIkByYWlscy9hY3Rpb25jYWJsZS9zcmNcIilcbiAgcmV0dXJuIGNyZWF0ZUNvbnN1bWVyKClcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN1YnNjcmliZVRvKGNoYW5uZWwsIG1peGluKSB7XG4gIGNvbnN0IHsgc3Vic2NyaXB0aW9ucyB9ID0gYXdhaXQgZ2V0Q29uc3VtZXIoKVxuICByZXR1cm4gc3Vic2NyaXB0aW9ucy5jcmVhdGUoY2hhbm5lbCwgbWl4aW4pXG59XG4iLCAiLy8gQmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL25hdGhhbjcvc25ha2VpemVcbi8vXG4vLyBUaGlzIHNvZnR3YXJlIGlzIHJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZTpcbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2Zcbi8vIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW5cbi8vIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG9cbi8vIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mXG4vLyB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sXG4vLyBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsXG4vLyBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4vLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTU1xuLy8gRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SXG4vLyBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVJcbi8vIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOXG4vLyBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gd2FsayAob2JqKSB7XG4gICAgaWYgKCFvYmogfHwgdHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHJldHVybiBvYmo7XG4gICAgaWYgKG9iaiBpbnN0YW5jZW9mIERhdGUgfHwgb2JqIGluc3RhbmNlb2YgUmVnRXhwKSByZXR1cm4gb2JqO1xuICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHJldHVybiBvYmoubWFwKHdhbGspO1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBrZXkpIHtcbiAgICAgICAgdmFyIGNhbWVsID0ga2V5WzBdLnRvTG93ZXJDYXNlKCkgKyBrZXkuc2xpY2UoMSkucmVwbGFjZSgvKFtBLVpdKykvZywgZnVuY3Rpb24gKG0sIHgpIHtcbiAgICAgICAgICAgIHJldHVybiAnXycgKyB4LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBhY2NbY2FtZWxdID0gd2FsayhvYmpba2V5XSk7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pO1xufTsiLCAiaW1wb3J0IHsgY29ubmVjdFN0cmVhbVNvdXJjZSwgZGlzY29ubmVjdFN0cmVhbVNvdXJjZSB9IGZyb20gXCJAaG90d2lyZWQvdHVyYm9cIlxuaW1wb3J0IHsgc3Vic2NyaWJlVG8gfSBmcm9tIFwiLi9jYWJsZVwiXG5pbXBvcnQgc25ha2VpemUgZnJvbSBcIi4vc25ha2VpemVcIlxuXG5jbGFzcyBUdXJib0NhYmxlU3RyZWFtU291cmNlRWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgc3RhdGljIG9ic2VydmVkQXR0cmlidXRlcyA9IFtcImNoYW5uZWxcIiwgXCJzaWduZWQtc3RyZWFtLW5hbWVcIl1cblxuICBhc3luYyBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBjb25uZWN0U3RyZWFtU291cmNlKHRoaXMpXG4gICAgdGhpcy5zdWJzY3JpcHRpb24gPSBhd2FpdCBzdWJzY3JpYmVUbyh0aGlzLmNoYW5uZWwsIHtcbiAgICAgIHJlY2VpdmVkOiB0aGlzLmRpc3BhdGNoTWVzc2FnZUV2ZW50LmJpbmQodGhpcyksXG4gICAgICBjb25uZWN0ZWQ6IHRoaXMuc3Vic2NyaXB0aW9uQ29ubmVjdGVkLmJpbmQodGhpcyksXG4gICAgICBkaXNjb25uZWN0ZWQ6IHRoaXMuc3Vic2NyaXB0aW9uRGlzY29ubmVjdGVkLmJpbmQodGhpcylcbiAgICB9KVxuICB9XG5cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgZGlzY29ubmVjdFN0cmVhbVNvdXJjZSh0aGlzKVxuICAgIGlmICh0aGlzLnN1YnNjcmlwdGlvbikgdGhpcy5zdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKVxuICAgIHRoaXMuc3Vic2NyaXB0aW9uRGlzY29ubmVjdGVkKClcbiAgfVxuXG4gIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjaygpIHtcbiAgICBpZiAodGhpcy5zdWJzY3JpcHRpb24pIHtcbiAgICAgIHRoaXMuZGlzY29ubmVjdGVkQ2FsbGJhY2soKVxuICAgICAgdGhpcy5jb25uZWN0ZWRDYWxsYmFjaygpXG4gICAgfVxuICB9XG5cbiAgZGlzcGF0Y2hNZXNzYWdlRXZlbnQoZGF0YSkge1xuICAgIGNvbnN0IGV2ZW50ID0gbmV3IE1lc3NhZ2VFdmVudChcIm1lc3NhZ2VcIiwgeyBkYXRhIH0pXG4gICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudClcbiAgfVxuXG4gIHN1YnNjcmlwdGlvbkNvbm5lY3RlZCgpIHtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZShcImNvbm5lY3RlZFwiLCBcIlwiKVxuICB9XG5cbiAgc3Vic2NyaXB0aW9uRGlzY29ubmVjdGVkKCkge1xuICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKFwiY29ubmVjdGVkXCIpXG4gIH1cblxuICBnZXQgY2hhbm5lbCgpIHtcbiAgICBjb25zdCBjaGFubmVsID0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJjaGFubmVsXCIpXG4gICAgY29uc3Qgc2lnbmVkX3N0cmVhbV9uYW1lID0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJzaWduZWQtc3RyZWFtLW5hbWVcIilcbiAgICByZXR1cm4geyBjaGFubmVsLCBzaWduZWRfc3RyZWFtX25hbWUsIC4uLnNuYWtlaXplKHsgLi4udGhpcy5kYXRhc2V0IH0pIH1cbiAgfVxufVxuXG5cbmlmIChjdXN0b21FbGVtZW50cy5nZXQoXCJ0dXJiby1jYWJsZS1zdHJlYW0tc291cmNlXCIpID09PSB1bmRlZmluZWQpIHtcbiAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwidHVyYm8tY2FibGUtc3RyZWFtLXNvdXJjZVwiLCBUdXJib0NhYmxlU3RyZWFtU291cmNlRWxlbWVudClcbn1cbiIsICJleHBvcnQgZnVuY3Rpb24gZW5jb2RlTWV0aG9kSW50b1JlcXVlc3RCb2R5KGV2ZW50KSB7XG4gIGlmIChldmVudC50YXJnZXQgaW5zdGFuY2VvZiBIVE1MRm9ybUVsZW1lbnQpIHtcbiAgICBjb25zdCB7IHRhcmdldDogZm9ybSwgZGV0YWlsOiB7IGZldGNoT3B0aW9ucyB9IH0gPSBldmVudFxuXG4gICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwidHVyYm86c3VibWl0LXN0YXJ0XCIsICh7IGRldGFpbDogeyBmb3JtU3VibWlzc2lvbjogeyBzdWJtaXR0ZXIgfSB9IH0pID0+IHtcbiAgICAgIGNvbnN0IGJvZHkgPSBpc0JvZHlJbml0KGZldGNoT3B0aW9ucy5ib2R5KSA/IGZldGNoT3B0aW9ucy5ib2R5IDogbmV3IFVSTFNlYXJjaFBhcmFtcygpXG4gICAgICBjb25zdCBtZXRob2QgPSBkZXRlcm1pbmVGZXRjaE1ldGhvZChzdWJtaXR0ZXIsIGJvZHksIGZvcm0pXG5cbiAgICAgIGlmICghL2dldC9pLnRlc3QobWV0aG9kKSkge1xuICAgICAgICBpZiAoL3Bvc3QvaS50ZXN0KG1ldGhvZCkpIHtcbiAgICAgICAgICBib2R5LmRlbGV0ZShcIl9tZXRob2RcIilcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBib2R5LnNldChcIl9tZXRob2RcIiwgbWV0aG9kKVxuICAgICAgICB9XG5cbiAgICAgICAgZmV0Y2hPcHRpb25zLm1ldGhvZCA9IFwicG9zdFwiXG4gICAgICB9XG4gICAgfSwgeyBvbmNlOiB0cnVlIH0pXG4gIH1cbn1cblxuZnVuY3Rpb24gZGV0ZXJtaW5lRmV0Y2hNZXRob2Qoc3VibWl0dGVyLCBib2R5LCBmb3JtKSB7XG4gIGNvbnN0IGZvcm1NZXRob2QgPSBkZXRlcm1pbmVGb3JtTWV0aG9kKHN1Ym1pdHRlcilcbiAgY29uc3Qgb3ZlcnJpZGVNZXRob2QgPSBib2R5LmdldChcIl9tZXRob2RcIilcbiAgY29uc3QgbWV0aG9kID0gZm9ybS5nZXRBdHRyaWJ1dGUoXCJtZXRob2RcIikgfHwgXCJnZXRcIlxuXG4gIGlmICh0eXBlb2YgZm9ybU1ldGhvZCA9PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIGZvcm1NZXRob2RcbiAgfSBlbHNlIGlmICh0eXBlb2Ygb3ZlcnJpZGVNZXRob2QgPT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiBvdmVycmlkZU1ldGhvZFxuICB9IGVsc2Uge1xuICAgIHJldHVybiBtZXRob2RcbiAgfVxufVxuXG5mdW5jdGlvbiBkZXRlcm1pbmVGb3JtTWV0aG9kKHN1Ym1pdHRlcikge1xuICBpZiAoc3VibWl0dGVyIGluc3RhbmNlb2YgSFRNTEJ1dHRvbkVsZW1lbnQgfHwgc3VibWl0dGVyIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgIC8vIFJhaWxzIDcgQWN0aW9uVmlldzo6SGVscGVyczo6Rm9ybUJ1aWxkZXIjYnV0dG9uIG1ldGhvZCBoYXMgYW4gb3ZlcnJpZGVcbiAgICAvLyBmb3IgZm9ybW1ldGhvZCBpZiB0aGUgYnV0dG9uIGRvZXMgbm90IGhhdmUgbmFtZSBvciB2YWx1ZSBhdHRyaWJ1dGVzXG4gICAgLy8gc2V0LCB3aGljaCBpcyB0aGUgZGVmYXVsdC4gVGhpcyBtZWFucyB0aGF0IGlmIHlvdSB1c2UgPCU9IGYuYnV0dG9uXG4gICAgLy8gZm9ybW1ldGhvZDogOmRlbGV0ZSAlPiwgaXQgd2lsbCBnZW5lcmF0ZSBhIDxidXR0b24gbmFtZT1cIl9tZXRob2RcIlxuICAgIC8vIHZhbHVlPVwiZGVsZXRlXCIgZm9ybW1ldGhvZD1cInBvc3RcIj4uIFRoZXJlZm9yZSwgaWYgdGhlIHN1Ym1pdHRlcidzIG5hbWVcbiAgICAvLyBpcyBhbHJlYWR5IF9tZXRob2QsIGl0J3MgdmFsdWUgYXR0cmlidXRlIGFscmVhZHkgY29udGFpbnMgdGhlIGRlc2lyZWRcbiAgICAvLyBtZXRob2QuXG4gICAgaWYgKHN1Ym1pdHRlci5uYW1lID09PSAnX21ldGhvZCcpIHtcbiAgICAgIHJldHVybiBzdWJtaXR0ZXIudmFsdWVcbiAgICB9IGVsc2UgaWYgKHN1Ym1pdHRlci5oYXNBdHRyaWJ1dGUoXCJmb3JtbWV0aG9kXCIpKSB7XG4gICAgICByZXR1cm4gc3VibWl0dGVyLmZvcm1NZXRob2RcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG5mdW5jdGlvbiBpc0JvZHlJbml0KGJvZHkpIHtcbiAgcmV0dXJuIGJvZHkgaW5zdGFuY2VvZiBGb3JtRGF0YSB8fCBib2R5IGluc3RhbmNlb2YgVVJMU2VhcmNoUGFyYW1zXG59XG4iLCAiaW1wb3J0IFwiLi9jYWJsZV9zdHJlYW1fc291cmNlX2VsZW1lbnRcIlxuXG5pbXBvcnQgKiBhcyBUdXJibyBmcm9tIFwiQGhvdHdpcmVkL3R1cmJvXCJcbmV4cG9ydCB7IFR1cmJvIH1cblxuaW1wb3J0ICogYXMgY2FibGUgZnJvbSBcIi4vY2FibGVcIlxuZXhwb3J0IHsgY2FibGUgfVxuXG5pbXBvcnQgeyBlbmNvZGVNZXRob2RJbnRvUmVxdWVzdEJvZHkgfSBmcm9tIFwiLi9mZXRjaF9yZXF1ZXN0c1wiXG5cbndpbmRvdy5UdXJibyA9IFR1cmJvXG5cbmFkZEV2ZW50TGlzdGVuZXIoXCJ0dXJibzpiZWZvcmUtZmV0Y2gtcmVxdWVzdFwiLCBlbmNvZGVNZXRob2RJbnRvUmVxdWVzdEJvZHkpXG4iLCAiLypcblN0aW11bHVzIDMuMi4xXG5Db3B5cmlnaHQgXHUwMEE5IDIwMjMgQmFzZWNhbXAsIExMQ1xuICovXG5jbGFzcyBFdmVudExpc3RlbmVyIHtcbiAgICBjb25zdHJ1Y3RvcihldmVudFRhcmdldCwgZXZlbnROYW1lLCBldmVudE9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5ldmVudFRhcmdldCA9IGV2ZW50VGFyZ2V0O1xuICAgICAgICB0aGlzLmV2ZW50TmFtZSA9IGV2ZW50TmFtZTtcbiAgICAgICAgdGhpcy5ldmVudE9wdGlvbnMgPSBldmVudE9wdGlvbnM7XG4gICAgICAgIHRoaXMudW5vcmRlcmVkQmluZGluZ3MgPSBuZXcgU2V0KCk7XG4gICAgfVxuICAgIGNvbm5lY3QoKSB7XG4gICAgICAgIHRoaXMuZXZlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmV2ZW50TmFtZSwgdGhpcywgdGhpcy5ldmVudE9wdGlvbnMpO1xuICAgIH1cbiAgICBkaXNjb25uZWN0KCkge1xuICAgICAgICB0aGlzLmV2ZW50VGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5ldmVudE5hbWUsIHRoaXMsIHRoaXMuZXZlbnRPcHRpb25zKTtcbiAgICB9XG4gICAgYmluZGluZ0Nvbm5lY3RlZChiaW5kaW5nKSB7XG4gICAgICAgIHRoaXMudW5vcmRlcmVkQmluZGluZ3MuYWRkKGJpbmRpbmcpO1xuICAgIH1cbiAgICBiaW5kaW5nRGlzY29ubmVjdGVkKGJpbmRpbmcpIHtcbiAgICAgICAgdGhpcy51bm9yZGVyZWRCaW5kaW5ncy5kZWxldGUoYmluZGluZyk7XG4gICAgfVxuICAgIGhhbmRsZUV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGV4dGVuZGVkRXZlbnQgPSBleHRlbmRFdmVudChldmVudCk7XG4gICAgICAgIGZvciAoY29uc3QgYmluZGluZyBvZiB0aGlzLmJpbmRpbmdzKSB7XG4gICAgICAgICAgICBpZiAoZXh0ZW5kZWRFdmVudC5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJpbmRpbmcuaGFuZGxlRXZlbnQoZXh0ZW5kZWRFdmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFzQmluZGluZ3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVub3JkZXJlZEJpbmRpbmdzLnNpemUgPiAwO1xuICAgIH1cbiAgICBnZXQgYmluZGluZ3MoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMudW5vcmRlcmVkQmluZGluZ3MpLnNvcnQoKGxlZnQsIHJpZ2h0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsZWZ0SW5kZXggPSBsZWZ0LmluZGV4LCByaWdodEluZGV4ID0gcmlnaHQuaW5kZXg7XG4gICAgICAgICAgICByZXR1cm4gbGVmdEluZGV4IDwgcmlnaHRJbmRleCA/IC0xIDogbGVmdEluZGV4ID4gcmlnaHRJbmRleCA/IDEgOiAwO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5mdW5jdGlvbiBleHRlbmRFdmVudChldmVudCkge1xuICAgIGlmIChcImltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZFwiIGluIGV2ZW50KSB7XG4gICAgICAgIHJldHVybiBldmVudDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHsgc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uIH0gPSBldmVudDtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oZXZlbnQsIHtcbiAgICAgICAgICAgIGltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDogZmFsc2UsXG4gICAgICAgICAgICBzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbi5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5jbGFzcyBEaXNwYXRjaGVyIHtcbiAgICBjb25zdHJ1Y3RvcihhcHBsaWNhdGlvbikge1xuICAgICAgICB0aGlzLmFwcGxpY2F0aW9uID0gYXBwbGljYXRpb247XG4gICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lck1hcHMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzLmZvckVhY2goKGV2ZW50TGlzdGVuZXIpID0+IGV2ZW50TGlzdGVuZXIuY29ubmVjdCgpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuZm9yRWFjaCgoZXZlbnRMaXN0ZW5lcikgPT4gZXZlbnRMaXN0ZW5lci5kaXNjb25uZWN0KCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBldmVudExpc3RlbmVycygpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5ldmVudExpc3RlbmVyTWFwcy52YWx1ZXMoKSkucmVkdWNlKChsaXN0ZW5lcnMsIG1hcCkgPT4gbGlzdGVuZXJzLmNvbmNhdChBcnJheS5mcm9tKG1hcC52YWx1ZXMoKSkpLCBbXSk7XG4gICAgfVxuICAgIGJpbmRpbmdDb25uZWN0ZWQoYmluZGluZykge1xuICAgICAgICB0aGlzLmZldGNoRXZlbnRMaXN0ZW5lckZvckJpbmRpbmcoYmluZGluZykuYmluZGluZ0Nvbm5lY3RlZChiaW5kaW5nKTtcbiAgICB9XG4gICAgYmluZGluZ0Rpc2Nvbm5lY3RlZChiaW5kaW5nLCBjbGVhckV2ZW50TGlzdGVuZXJzID0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5mZXRjaEV2ZW50TGlzdGVuZXJGb3JCaW5kaW5nKGJpbmRpbmcpLmJpbmRpbmdEaXNjb25uZWN0ZWQoYmluZGluZyk7XG4gICAgICAgIGlmIChjbGVhckV2ZW50TGlzdGVuZXJzKVxuICAgICAgICAgICAgdGhpcy5jbGVhckV2ZW50TGlzdGVuZXJzRm9yQmluZGluZyhiaW5kaW5nKTtcbiAgICB9XG4gICAgaGFuZGxlRXJyb3IoZXJyb3IsIG1lc3NhZ2UsIGRldGFpbCA9IHt9KSB7XG4gICAgICAgIHRoaXMuYXBwbGljYXRpb24uaGFuZGxlRXJyb3IoZXJyb3IsIGBFcnJvciAke21lc3NhZ2V9YCwgZGV0YWlsKTtcbiAgICB9XG4gICAgY2xlYXJFdmVudExpc3RlbmVyc0ZvckJpbmRpbmcoYmluZGluZykge1xuICAgICAgICBjb25zdCBldmVudExpc3RlbmVyID0gdGhpcy5mZXRjaEV2ZW50TGlzdGVuZXJGb3JCaW5kaW5nKGJpbmRpbmcpO1xuICAgICAgICBpZiAoIWV2ZW50TGlzdGVuZXIuaGFzQmluZGluZ3MoKSkge1xuICAgICAgICAgICAgZXZlbnRMaXN0ZW5lci5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZU1hcHBlZEV2ZW50TGlzdGVuZXJGb3IoYmluZGluZyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlTWFwcGVkRXZlbnRMaXN0ZW5lckZvcihiaW5kaW5nKSB7XG4gICAgICAgIGNvbnN0IHsgZXZlbnRUYXJnZXQsIGV2ZW50TmFtZSwgZXZlbnRPcHRpb25zIH0gPSBiaW5kaW5nO1xuICAgICAgICBjb25zdCBldmVudExpc3RlbmVyTWFwID0gdGhpcy5mZXRjaEV2ZW50TGlzdGVuZXJNYXBGb3JFdmVudFRhcmdldChldmVudFRhcmdldCk7XG4gICAgICAgIGNvbnN0IGNhY2hlS2V5ID0gdGhpcy5jYWNoZUtleShldmVudE5hbWUsIGV2ZW50T3B0aW9ucyk7XG4gICAgICAgIGV2ZW50TGlzdGVuZXJNYXAuZGVsZXRlKGNhY2hlS2V5KTtcbiAgICAgICAgaWYgKGV2ZW50TGlzdGVuZXJNYXAuc2l6ZSA9PSAwKVxuICAgICAgICAgICAgdGhpcy5ldmVudExpc3RlbmVyTWFwcy5kZWxldGUoZXZlbnRUYXJnZXQpO1xuICAgIH1cbiAgICBmZXRjaEV2ZW50TGlzdGVuZXJGb3JCaW5kaW5nKGJpbmRpbmcpIHtcbiAgICAgICAgY29uc3QgeyBldmVudFRhcmdldCwgZXZlbnROYW1lLCBldmVudE9wdGlvbnMgfSA9IGJpbmRpbmc7XG4gICAgICAgIHJldHVybiB0aGlzLmZldGNoRXZlbnRMaXN0ZW5lcihldmVudFRhcmdldCwgZXZlbnROYW1lLCBldmVudE9wdGlvbnMpO1xuICAgIH1cbiAgICBmZXRjaEV2ZW50TGlzdGVuZXIoZXZlbnRUYXJnZXQsIGV2ZW50TmFtZSwgZXZlbnRPcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50TGlzdGVuZXJNYXAgPSB0aGlzLmZldGNoRXZlbnRMaXN0ZW5lck1hcEZvckV2ZW50VGFyZ2V0KGV2ZW50VGFyZ2V0KTtcbiAgICAgICAgY29uc3QgY2FjaGVLZXkgPSB0aGlzLmNhY2hlS2V5KGV2ZW50TmFtZSwgZXZlbnRPcHRpb25zKTtcbiAgICAgICAgbGV0IGV2ZW50TGlzdGVuZXIgPSBldmVudExpc3RlbmVyTWFwLmdldChjYWNoZUtleSk7XG4gICAgICAgIGlmICghZXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgZXZlbnRMaXN0ZW5lciA9IHRoaXMuY3JlYXRlRXZlbnRMaXN0ZW5lcihldmVudFRhcmdldCwgZXZlbnROYW1lLCBldmVudE9wdGlvbnMpO1xuICAgICAgICAgICAgZXZlbnRMaXN0ZW5lck1hcC5zZXQoY2FjaGVLZXksIGV2ZW50TGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBldmVudExpc3RlbmVyO1xuICAgIH1cbiAgICBjcmVhdGVFdmVudExpc3RlbmVyKGV2ZW50VGFyZ2V0LCBldmVudE5hbWUsIGV2ZW50T3B0aW9ucykge1xuICAgICAgICBjb25zdCBldmVudExpc3RlbmVyID0gbmV3IEV2ZW50TGlzdGVuZXIoZXZlbnRUYXJnZXQsIGV2ZW50TmFtZSwgZXZlbnRPcHRpb25zKTtcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgICAgICAgZXZlbnRMaXN0ZW5lci5jb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV2ZW50TGlzdGVuZXI7XG4gICAgfVxuICAgIGZldGNoRXZlbnRMaXN0ZW5lck1hcEZvckV2ZW50VGFyZ2V0KGV2ZW50VGFyZ2V0KSB7XG4gICAgICAgIGxldCBldmVudExpc3RlbmVyTWFwID0gdGhpcy5ldmVudExpc3RlbmVyTWFwcy5nZXQoZXZlbnRUYXJnZXQpO1xuICAgICAgICBpZiAoIWV2ZW50TGlzdGVuZXJNYXApIHtcbiAgICAgICAgICAgIGV2ZW50TGlzdGVuZXJNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICB0aGlzLmV2ZW50TGlzdGVuZXJNYXBzLnNldChldmVudFRhcmdldCwgZXZlbnRMaXN0ZW5lck1hcCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV2ZW50TGlzdGVuZXJNYXA7XG4gICAgfVxuICAgIGNhY2hlS2V5KGV2ZW50TmFtZSwgZXZlbnRPcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHBhcnRzID0gW2V2ZW50TmFtZV07XG4gICAgICAgIE9iamVjdC5rZXlzKGV2ZW50T3B0aW9ucylcbiAgICAgICAgICAgIC5zb3J0KClcbiAgICAgICAgICAgIC5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIHBhcnRzLnB1c2goYCR7ZXZlbnRPcHRpb25zW2tleV0gPyBcIlwiIDogXCIhXCJ9JHtrZXl9YCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcGFydHMuam9pbihcIjpcIik7XG4gICAgfVxufVxuXG5jb25zdCBkZWZhdWx0QWN0aW9uRGVzY3JpcHRvckZpbHRlcnMgPSB7XG4gICAgc3RvcCh7IGV2ZW50LCB2YWx1ZSB9KSB7XG4gICAgICAgIGlmICh2YWx1ZSlcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIHByZXZlbnQoeyBldmVudCwgdmFsdWUgfSkge1xuICAgICAgICBpZiAodmFsdWUpXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIHNlbGYoeyBldmVudCwgdmFsdWUsIGVsZW1lbnQgfSkge1xuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50ID09PSBldmVudC50YXJnZXQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0sXG59O1xuY29uc3QgZGVzY3JpcHRvclBhdHRlcm4gPSAvXig/Oig/OihbXi5dKz8pXFwrKT8oLis/KSg/OlxcLiguKz8pKT8oPzpAKHdpbmRvd3xkb2N1bWVudCkpPy0+KT8oLis/KSg/OiMoW146XSs/KSkoPzo6KC4rKSk/JC87XG5mdW5jdGlvbiBwYXJzZUFjdGlvbkRlc2NyaXB0b3JTdHJpbmcoZGVzY3JpcHRvclN0cmluZykge1xuICAgIGNvbnN0IHNvdXJjZSA9IGRlc2NyaXB0b3JTdHJpbmcudHJpbSgpO1xuICAgIGNvbnN0IG1hdGNoZXMgPSBzb3VyY2UubWF0Y2goZGVzY3JpcHRvclBhdHRlcm4pIHx8IFtdO1xuICAgIGxldCBldmVudE5hbWUgPSBtYXRjaGVzWzJdO1xuICAgIGxldCBrZXlGaWx0ZXIgPSBtYXRjaGVzWzNdO1xuICAgIGlmIChrZXlGaWx0ZXIgJiYgIVtcImtleWRvd25cIiwgXCJrZXl1cFwiLCBcImtleXByZXNzXCJdLmluY2x1ZGVzKGV2ZW50TmFtZSkpIHtcbiAgICAgICAgZXZlbnROYW1lICs9IGAuJHtrZXlGaWx0ZXJ9YDtcbiAgICAgICAga2V5RmlsdGVyID0gXCJcIjtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZXZlbnRUYXJnZXQ6IHBhcnNlRXZlbnRUYXJnZXQobWF0Y2hlc1s0XSksXG4gICAgICAgIGV2ZW50TmFtZSxcbiAgICAgICAgZXZlbnRPcHRpb25zOiBtYXRjaGVzWzddID8gcGFyc2VFdmVudE9wdGlvbnMobWF0Y2hlc1s3XSkgOiB7fSxcbiAgICAgICAgaWRlbnRpZmllcjogbWF0Y2hlc1s1XSxcbiAgICAgICAgbWV0aG9kTmFtZTogbWF0Y2hlc1s2XSxcbiAgICAgICAga2V5RmlsdGVyOiBtYXRjaGVzWzFdIHx8IGtleUZpbHRlcixcbiAgICB9O1xufVxuZnVuY3Rpb24gcGFyc2VFdmVudFRhcmdldChldmVudFRhcmdldE5hbWUpIHtcbiAgICBpZiAoZXZlbnRUYXJnZXROYW1lID09IFwid2luZG93XCIpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcbiAgICB9XG4gICAgZWxzZSBpZiAoZXZlbnRUYXJnZXROYW1lID09IFwiZG9jdW1lbnRcIikge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQ7XG4gICAgfVxufVxuZnVuY3Rpb24gcGFyc2VFdmVudE9wdGlvbnMoZXZlbnRPcHRpb25zKSB7XG4gICAgcmV0dXJuIGV2ZW50T3B0aW9uc1xuICAgICAgICAuc3BsaXQoXCI6XCIpXG4gICAgICAgIC5yZWR1Y2UoKG9wdGlvbnMsIHRva2VuKSA9PiBPYmplY3QuYXNzaWduKG9wdGlvbnMsIHsgW3Rva2VuLnJlcGxhY2UoL14hLywgXCJcIildOiAhL14hLy50ZXN0KHRva2VuKSB9KSwge30pO1xufVxuZnVuY3Rpb24gc3RyaW5naWZ5RXZlbnRUYXJnZXQoZXZlbnRUYXJnZXQpIHtcbiAgICBpZiAoZXZlbnRUYXJnZXQgPT0gd2luZG93KSB7XG4gICAgICAgIHJldHVybiBcIndpbmRvd1wiO1xuICAgIH1cbiAgICBlbHNlIGlmIChldmVudFRhcmdldCA9PSBkb2N1bWVudCkge1xuICAgICAgICByZXR1cm4gXCJkb2N1bWVudFwiO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY2FtZWxpemUodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUucmVwbGFjZSgvKD86W18tXSkoW2EtejAtOV0pL2csIChfLCBjaGFyKSA9PiBjaGFyLnRvVXBwZXJDYXNlKCkpO1xufVxuZnVuY3Rpb24gbmFtZXNwYWNlQ2FtZWxpemUodmFsdWUpIHtcbiAgICByZXR1cm4gY2FtZWxpemUodmFsdWUucmVwbGFjZSgvLS0vZywgXCItXCIpLnJlcGxhY2UoL19fL2csIFwiX1wiKSk7XG59XG5mdW5jdGlvbiBjYXBpdGFsaXplKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdmFsdWUuc2xpY2UoMSk7XG59XG5mdW5jdGlvbiBkYXNoZXJpemUodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUucmVwbGFjZSgvKFtBLVpdKS9nLCAoXywgY2hhcikgPT4gYC0ke2NoYXIudG9Mb3dlckNhc2UoKX1gKTtcbn1cbmZ1bmN0aW9uIHRva2VuaXplKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlLm1hdGNoKC9bXlxcc10rL2cpIHx8IFtdO1xufVxuXG5mdW5jdGlvbiBpc1NvbWV0aGluZyhvYmplY3QpIHtcbiAgICByZXR1cm4gb2JqZWN0ICE9PSBudWxsICYmIG9iamVjdCAhPT0gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gaGFzUHJvcGVydHkob2JqZWN0LCBwcm9wZXJ0eSkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7XG59XG5cbmNvbnN0IGFsbE1vZGlmaWVycyA9IFtcIm1ldGFcIiwgXCJjdHJsXCIsIFwiYWx0XCIsIFwic2hpZnRcIl07XG5jbGFzcyBBY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIGluZGV4LCBkZXNjcmlwdG9yLCBzY2hlbWEpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xuICAgICAgICB0aGlzLmV2ZW50VGFyZ2V0ID0gZGVzY3JpcHRvci5ldmVudFRhcmdldCB8fCBlbGVtZW50O1xuICAgICAgICB0aGlzLmV2ZW50TmFtZSA9IGRlc2NyaXB0b3IuZXZlbnROYW1lIHx8IGdldERlZmF1bHRFdmVudE5hbWVGb3JFbGVtZW50KGVsZW1lbnQpIHx8IGVycm9yKFwibWlzc2luZyBldmVudCBuYW1lXCIpO1xuICAgICAgICB0aGlzLmV2ZW50T3B0aW9ucyA9IGRlc2NyaXB0b3IuZXZlbnRPcHRpb25zIHx8IHt9O1xuICAgICAgICB0aGlzLmlkZW50aWZpZXIgPSBkZXNjcmlwdG9yLmlkZW50aWZpZXIgfHwgZXJyb3IoXCJtaXNzaW5nIGlkZW50aWZpZXJcIik7XG4gICAgICAgIHRoaXMubWV0aG9kTmFtZSA9IGRlc2NyaXB0b3IubWV0aG9kTmFtZSB8fCBlcnJvcihcIm1pc3NpbmcgbWV0aG9kIG5hbWVcIik7XG4gICAgICAgIHRoaXMua2V5RmlsdGVyID0gZGVzY3JpcHRvci5rZXlGaWx0ZXIgfHwgXCJcIjtcbiAgICAgICAgdGhpcy5zY2hlbWEgPSBzY2hlbWE7XG4gICAgfVxuICAgIHN0YXRpYyBmb3JUb2tlbih0b2tlbiwgc2NoZW1hKSB7XG4gICAgICAgIHJldHVybiBuZXcgdGhpcyh0b2tlbi5lbGVtZW50LCB0b2tlbi5pbmRleCwgcGFyc2VBY3Rpb25EZXNjcmlwdG9yU3RyaW5nKHRva2VuLmNvbnRlbnQpLCBzY2hlbWEpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3QgZXZlbnRGaWx0ZXIgPSB0aGlzLmtleUZpbHRlciA/IGAuJHt0aGlzLmtleUZpbHRlcn1gIDogXCJcIjtcbiAgICAgICAgY29uc3QgZXZlbnRUYXJnZXQgPSB0aGlzLmV2ZW50VGFyZ2V0TmFtZSA/IGBAJHt0aGlzLmV2ZW50VGFyZ2V0TmFtZX1gIDogXCJcIjtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuZXZlbnROYW1lfSR7ZXZlbnRGaWx0ZXJ9JHtldmVudFRhcmdldH0tPiR7dGhpcy5pZGVudGlmaWVyfSMke3RoaXMubWV0aG9kTmFtZX1gO1xuICAgIH1cbiAgICBzaG91bGRJZ25vcmVLZXlib2FyZEV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGlmICghdGhpcy5rZXlGaWx0ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaWx0ZXJzID0gdGhpcy5rZXlGaWx0ZXIuc3BsaXQoXCIrXCIpO1xuICAgICAgICBpZiAodGhpcy5rZXlGaWx0ZXJEaXNzYXRpc2ZpZWQoZXZlbnQsIGZpbHRlcnMpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGFuZGFyZEZpbHRlciA9IGZpbHRlcnMuZmlsdGVyKChrZXkpID0+ICFhbGxNb2RpZmllcnMuaW5jbHVkZXMoa2V5KSlbMF07XG4gICAgICAgIGlmICghc3RhbmRhcmRGaWx0ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWhhc1Byb3BlcnR5KHRoaXMua2V5TWFwcGluZ3MsIHN0YW5kYXJkRmlsdGVyKSkge1xuICAgICAgICAgICAgZXJyb3IoYGNvbnRhaW5zIHVua25vd24ga2V5IGZpbHRlcjogJHt0aGlzLmtleUZpbHRlcn1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5rZXlNYXBwaW5nc1tzdGFuZGFyZEZpbHRlcl0udG9Mb3dlckNhc2UoKSAhPT0gZXZlbnQua2V5LnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuICAgIHNob3VsZElnbm9yZU1vdXNlRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmtleUZpbHRlcikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpbHRlcnMgPSBbdGhpcy5rZXlGaWx0ZXJdO1xuICAgICAgICBpZiAodGhpcy5rZXlGaWx0ZXJEaXNzYXRpc2ZpZWQoZXZlbnQsIGZpbHRlcnMpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBwYXJhbXMoKSB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHt9O1xuICAgICAgICBjb25zdCBwYXR0ZXJuID0gbmV3IFJlZ0V4cChgXmRhdGEtJHt0aGlzLmlkZW50aWZpZXJ9LSguKyktcGFyYW0kYCwgXCJpXCIpO1xuICAgICAgICBmb3IgKGNvbnN0IHsgbmFtZSwgdmFsdWUgfSBvZiBBcnJheS5mcm9tKHRoaXMuZWxlbWVudC5hdHRyaWJ1dGVzKSkge1xuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBuYW1lLm1hdGNoKHBhdHRlcm4pO1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gbWF0Y2ggJiYgbWF0Y2hbMV07XG4gICAgICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgcGFyYW1zW2NhbWVsaXplKGtleSldID0gdHlwZWNhc3QodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJhbXM7XG4gICAgfVxuICAgIGdldCBldmVudFRhcmdldE5hbWUoKSB7XG4gICAgICAgIHJldHVybiBzdHJpbmdpZnlFdmVudFRhcmdldCh0aGlzLmV2ZW50VGFyZ2V0KTtcbiAgICB9XG4gICAgZ2V0IGtleU1hcHBpbmdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY2hlbWEua2V5TWFwcGluZ3M7XG4gICAgfVxuICAgIGtleUZpbHRlckRpc3NhdGlzZmllZChldmVudCwgZmlsdGVycykge1xuICAgICAgICBjb25zdCBbbWV0YSwgY3RybCwgYWx0LCBzaGlmdF0gPSBhbGxNb2RpZmllcnMubWFwKChtb2RpZmllcikgPT4gZmlsdGVycy5pbmNsdWRlcyhtb2RpZmllcikpO1xuICAgICAgICByZXR1cm4gZXZlbnQubWV0YUtleSAhPT0gbWV0YSB8fCBldmVudC5jdHJsS2V5ICE9PSBjdHJsIHx8IGV2ZW50LmFsdEtleSAhPT0gYWx0IHx8IGV2ZW50LnNoaWZ0S2V5ICE9PSBzaGlmdDtcbiAgICB9XG59XG5jb25zdCBkZWZhdWx0RXZlbnROYW1lcyA9IHtcbiAgICBhOiAoKSA9PiBcImNsaWNrXCIsXG4gICAgYnV0dG9uOiAoKSA9PiBcImNsaWNrXCIsXG4gICAgZm9ybTogKCkgPT4gXCJzdWJtaXRcIixcbiAgICBkZXRhaWxzOiAoKSA9PiBcInRvZ2dsZVwiLFxuICAgIGlucHV0OiAoZSkgPT4gKGUuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSA9PSBcInN1Ym1pdFwiID8gXCJjbGlja1wiIDogXCJpbnB1dFwiKSxcbiAgICBzZWxlY3Q6ICgpID0+IFwiY2hhbmdlXCIsXG4gICAgdGV4dGFyZWE6ICgpID0+IFwiaW5wdXRcIixcbn07XG5mdW5jdGlvbiBnZXREZWZhdWx0RXZlbnROYW1lRm9yRWxlbWVudChlbGVtZW50KSB7XG4gICAgY29uc3QgdGFnTmFtZSA9IGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmICh0YWdOYW1lIGluIGRlZmF1bHRFdmVudE5hbWVzKSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0RXZlbnROYW1lc1t0YWdOYW1lXShlbGVtZW50KTtcbiAgICB9XG59XG5mdW5jdGlvbiBlcnJvcihtZXNzYWdlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xufVxuZnVuY3Rpb24gdHlwZWNhc3QodmFsdWUpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh2YWx1ZSk7XG4gICAgfVxuICAgIGNhdGNoIChvX08pIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbn1cblxuY2xhc3MgQmluZGluZyB7XG4gICAgY29uc3RydWN0b3IoY29udGV4dCwgYWN0aW9uKSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMuYWN0aW9uID0gYWN0aW9uO1xuICAgIH1cbiAgICBnZXQgaW5kZXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjdGlvbi5pbmRleDtcbiAgICB9XG4gICAgZ2V0IGV2ZW50VGFyZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hY3Rpb24uZXZlbnRUYXJnZXQ7XG4gICAgfVxuICAgIGdldCBldmVudE9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjdGlvbi5ldmVudE9wdGlvbnM7XG4gICAgfVxuICAgIGdldCBpZGVudGlmaWVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0LmlkZW50aWZpZXI7XG4gICAgfVxuICAgIGhhbmRsZUV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGFjdGlvbkV2ZW50ID0gdGhpcy5wcmVwYXJlQWN0aW9uRXZlbnQoZXZlbnQpO1xuICAgICAgICBpZiAodGhpcy53aWxsQmVJbnZva2VkQnlFdmVudChldmVudCkgJiYgdGhpcy5hcHBseUV2ZW50TW9kaWZpZXJzKGFjdGlvbkV2ZW50KSkge1xuICAgICAgICAgICAgdGhpcy5pbnZva2VXaXRoRXZlbnQoYWN0aW9uRXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBldmVudE5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjdGlvbi5ldmVudE5hbWU7XG4gICAgfVxuICAgIGdldCBtZXRob2QoKSB7XG4gICAgICAgIGNvbnN0IG1ldGhvZCA9IHRoaXMuY29udHJvbGxlclt0aGlzLm1ldGhvZE5hbWVdO1xuICAgICAgICBpZiAodHlwZW9mIG1ldGhvZCA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBtZXRob2Q7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBY3Rpb24gXCIke3RoaXMuYWN0aW9ufVwiIHJlZmVyZW5jZXMgdW5kZWZpbmVkIG1ldGhvZCBcIiR7dGhpcy5tZXRob2ROYW1lfVwiYCk7XG4gICAgfVxuICAgIGFwcGx5RXZlbnRNb2RpZmllcnMoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgeyBlbGVtZW50IH0gPSB0aGlzLmFjdGlvbjtcbiAgICAgICAgY29uc3QgeyBhY3Rpb25EZXNjcmlwdG9yRmlsdGVycyB9ID0gdGhpcy5jb250ZXh0LmFwcGxpY2F0aW9uO1xuICAgICAgICBjb25zdCB7IGNvbnRyb2xsZXIgfSA9IHRoaXMuY29udGV4dDtcbiAgICAgICAgbGV0IHBhc3NlcyA9IHRydWU7XG4gICAgICAgIGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLmV2ZW50T3B0aW9ucykpIHtcbiAgICAgICAgICAgIGlmIChuYW1lIGluIGFjdGlvbkRlc2NyaXB0b3JGaWx0ZXJzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsdGVyID0gYWN0aW9uRGVzY3JpcHRvckZpbHRlcnNbbmFtZV07XG4gICAgICAgICAgICAgICAgcGFzc2VzID0gcGFzc2VzICYmIGZpbHRlcih7IG5hbWUsIHZhbHVlLCBldmVudCwgZWxlbWVudCwgY29udHJvbGxlciB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXNzZXM7XG4gICAgfVxuICAgIHByZXBhcmVBY3Rpb25FdmVudChldmVudCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihldmVudCwgeyBwYXJhbXM6IHRoaXMuYWN0aW9uLnBhcmFtcyB9KTtcbiAgICB9XG4gICAgaW52b2tlV2l0aEV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHsgdGFyZ2V0LCBjdXJyZW50VGFyZ2V0IH0gPSBldmVudDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMubWV0aG9kLmNhbGwodGhpcy5jb250cm9sbGVyLCBldmVudCk7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQubG9nRGVidWdBY3Rpdml0eSh0aGlzLm1ldGhvZE5hbWUsIHsgZXZlbnQsIHRhcmdldCwgY3VycmVudFRhcmdldCwgYWN0aW9uOiB0aGlzLm1ldGhvZE5hbWUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCB7IGlkZW50aWZpZXIsIGNvbnRyb2xsZXIsIGVsZW1lbnQsIGluZGV4IH0gPSB0aGlzO1xuICAgICAgICAgICAgY29uc3QgZGV0YWlsID0geyBpZGVudGlmaWVyLCBjb250cm9sbGVyLCBlbGVtZW50LCBpbmRleCwgZXZlbnQgfTtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5oYW5kbGVFcnJvcihlcnJvciwgYGludm9raW5nIGFjdGlvbiBcIiR7dGhpcy5hY3Rpb259XCJgLCBkZXRhaWwpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdpbGxCZUludm9rZWRCeUV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGV2ZW50VGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICBpZiAoZXZlbnQgaW5zdGFuY2VvZiBLZXlib2FyZEV2ZW50ICYmIHRoaXMuYWN0aW9uLnNob3VsZElnbm9yZUtleWJvYXJkRXZlbnQoZXZlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50IGluc3RhbmNlb2YgTW91c2VFdmVudCAmJiB0aGlzLmFjdGlvbi5zaG91bGRJZ25vcmVNb3VzZUV2ZW50KGV2ZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnQgPT09IGV2ZW50VGFyZ2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChldmVudFRhcmdldCBpbnN0YW5jZW9mIEVsZW1lbnQgJiYgdGhpcy5lbGVtZW50LmNvbnRhaW5zKGV2ZW50VGFyZ2V0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGUuY29udGFpbnNFbGVtZW50KGV2ZW50VGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNjb3BlLmNvbnRhaW5zRWxlbWVudCh0aGlzLmFjdGlvbi5lbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgY29udHJvbGxlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5jb250cm9sbGVyO1xuICAgIH1cbiAgICBnZXQgbWV0aG9kTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWN0aW9uLm1ldGhvZE5hbWU7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY29wZS5lbGVtZW50O1xuICAgIH1cbiAgICBnZXQgc2NvcGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQuc2NvcGU7XG4gICAgfVxufVxuXG5jbGFzcyBFbGVtZW50T2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIGRlbGVnYXRlKSB7XG4gICAgICAgIHRoaXMubXV0YXRpb25PYnNlcnZlckluaXQgPSB7IGF0dHJpYnV0ZXM6IHRydWUsIGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZSB9O1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgICAgICB0aGlzLmVsZW1lbnRzID0gbmV3IFNldCgpO1xuICAgICAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB0aGlzLnByb2Nlc3NNdXRhdGlvbnMobXV0YXRpb25zKSk7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICBpZiAoIXRoaXMuc3RhcnRlZCkge1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25PYnNlcnZlci5vYnNlcnZlKHRoaXMuZWxlbWVudCwgdGhpcy5tdXRhdGlvbk9ic2VydmVySW5pdCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwYXVzZShjYWxsYmFjaykge1xuICAgICAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25PYnNlcnZlci5vYnNlcnZlKHRoaXMuZWxlbWVudCwgdGhpcy5tdXRhdGlvbk9ic2VydmVySW5pdCk7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25PYnNlcnZlci50YWtlUmVjb3JkcygpO1xuICAgICAgICAgICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlZnJlc2goKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSBuZXcgU2V0KHRoaXMubWF0Y2hFbGVtZW50c0luVHJlZSgpKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBBcnJheS5mcm9tKHRoaXMuZWxlbWVudHMpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXRjaGVzLmhhcyhlbGVtZW50KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUVsZW1lbnQoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIEFycmF5LmZyb20obWF0Y2hlcykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEVsZW1lbnQoZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJvY2Vzc011dGF0aW9ucyhtdXRhdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBtdXRhdGlvbiBvZiBtdXRhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NNdXRhdGlvbihtdXRhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJvY2Vzc011dGF0aW9uKG11dGF0aW9uKSB7XG4gICAgICAgIGlmIChtdXRhdGlvbi50eXBlID09IFwiYXR0cmlidXRlc1wiKSB7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NBdHRyaWJ1dGVDaGFuZ2UobXV0YXRpb24udGFyZ2V0LCBtdXRhdGlvbi5hdHRyaWJ1dGVOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtdXRhdGlvbi50eXBlID09IFwiY2hpbGRMaXN0XCIpIHtcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc1JlbW92ZWROb2RlcyhtdXRhdGlvbi5yZW1vdmVkTm9kZXMpO1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzQWRkZWROb2RlcyhtdXRhdGlvbi5hZGRlZE5vZGVzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcm9jZXNzQXR0cmlidXRlQ2hhbmdlKGVsZW1lbnQsIGF0dHJpYnV0ZU5hbWUpIHtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudHMuaGFzKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZS5lbGVtZW50QXR0cmlidXRlQ2hhbmdlZCAmJiB0aGlzLm1hdGNoRWxlbWVudChlbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUuZWxlbWVudEF0dHJpYnV0ZUNoYW5nZWQoZWxlbWVudCwgYXR0cmlidXRlTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUVsZW1lbnQoZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5tYXRjaEVsZW1lbnQoZWxlbWVudCkpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkRWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcm9jZXNzUmVtb3ZlZE5vZGVzKG5vZGVzKSB7XG4gICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiBBcnJheS5mcm9tKG5vZGVzKSkge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuZWxlbWVudEZyb21Ob2RlKG5vZGUpO1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NUcmVlKGVsZW1lbnQsIHRoaXMucmVtb3ZlRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJvY2Vzc0FkZGVkTm9kZXMobm9kZXMpIHtcbiAgICAgICAgZm9yIChjb25zdCBub2RlIG9mIEFycmF5LmZyb20obm9kZXMpKSB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5lbGVtZW50RnJvbU5vZGUobm9kZSk7XG4gICAgICAgICAgICBpZiAoZWxlbWVudCAmJiB0aGlzLmVsZW1lbnRJc0FjdGl2ZShlbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1RyZWUoZWxlbWVudCwgdGhpcy5hZGRFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBtYXRjaEVsZW1lbnQoZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5tYXRjaEVsZW1lbnQoZWxlbWVudCk7XG4gICAgfVxuICAgIG1hdGNoRWxlbWVudHNJblRyZWUodHJlZSA9IHRoaXMuZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5tYXRjaEVsZW1lbnRzSW5UcmVlKHRyZWUpO1xuICAgIH1cbiAgICBwcm9jZXNzVHJlZSh0cmVlLCBwcm9jZXNzb3IpIHtcbiAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMubWF0Y2hFbGVtZW50c0luVHJlZSh0cmVlKSkge1xuICAgICAgICAgICAgcHJvY2Vzc29yLmNhbGwodGhpcywgZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxlbWVudEZyb21Ob2RlKG5vZGUpIHtcbiAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gTm9kZS5FTEVNRU5UX05PREUpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsZW1lbnRJc0FjdGl2ZShlbGVtZW50KSB7XG4gICAgICAgIGlmIChlbGVtZW50LmlzQ29ubmVjdGVkICE9IHRoaXMuZWxlbWVudC5pc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5jb250YWlucyhlbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRFbGVtZW50KGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVsZW1lbnRzLmhhcyhlbGVtZW50KSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudElzQWN0aXZlKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50cy5hZGQoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUuZWxlbWVudE1hdGNoZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5lbGVtZW50TWF0Y2hlZChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlRWxlbWVudChlbGVtZW50KSB7XG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnRzLmhhcyhlbGVtZW50KSkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy5kZWxldGUoZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZS5lbGVtZW50VW5tYXRjaGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5lbGVtZW50VW5tYXRjaGVkKGVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5jbGFzcyBBdHRyaWJ1dGVPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgYXR0cmlidXRlTmFtZSwgZGVsZWdhdGUpIHtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVOYW1lID0gYXR0cmlidXRlTmFtZTtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgICAgICB0aGlzLmVsZW1lbnRPYnNlcnZlciA9IG5ldyBFbGVtZW50T2JzZXJ2ZXIoZWxlbWVudCwgdGhpcyk7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50T2JzZXJ2ZXIuZWxlbWVudDtcbiAgICB9XG4gICAgZ2V0IHNlbGVjdG9yKCkge1xuICAgICAgICByZXR1cm4gYFske3RoaXMuYXR0cmlidXRlTmFtZX1dYDtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudE9ic2VydmVyLnN0YXJ0KCk7XG4gICAgfVxuICAgIHBhdXNlKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudE9ic2VydmVyLnBhdXNlKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50T2JzZXJ2ZXIuc3RvcCgpO1xuICAgIH1cbiAgICByZWZyZXNoKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnRPYnNlcnZlci5yZWZyZXNoKCk7XG4gICAgfVxuICAgIGdldCBzdGFydGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50T2JzZXJ2ZXIuc3RhcnRlZDtcbiAgICB9XG4gICAgbWF0Y2hFbGVtZW50KGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQuaGFzQXR0cmlidXRlKHRoaXMuYXR0cmlidXRlTmFtZSk7XG4gICAgfVxuICAgIG1hdGNoRWxlbWVudHNJblRyZWUodHJlZSkge1xuICAgICAgICBjb25zdCBtYXRjaCA9IHRoaXMubWF0Y2hFbGVtZW50KHRyZWUpID8gW3RyZWVdIDogW107XG4gICAgICAgIGNvbnN0IG1hdGNoZXMgPSBBcnJheS5mcm9tKHRyZWUucXVlcnlTZWxlY3RvckFsbCh0aGlzLnNlbGVjdG9yKSk7XG4gICAgICAgIHJldHVybiBtYXRjaC5jb25jYXQobWF0Y2hlcyk7XG4gICAgfVxuICAgIGVsZW1lbnRNYXRjaGVkKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUuZWxlbWVudE1hdGNoZWRBdHRyaWJ1dGUpIHtcbiAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUuZWxlbWVudE1hdGNoZWRBdHRyaWJ1dGUoZWxlbWVudCwgdGhpcy5hdHRyaWJ1dGVOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbGVtZW50VW5tYXRjaGVkKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUuZWxlbWVudFVubWF0Y2hlZEF0dHJpYnV0ZSkge1xuICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5lbGVtZW50VW5tYXRjaGVkQXR0cmlidXRlKGVsZW1lbnQsIHRoaXMuYXR0cmlidXRlTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxlbWVudEF0dHJpYnV0ZUNoYW5nZWQoZWxlbWVudCwgYXR0cmlidXRlTmFtZSkge1xuICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZS5lbGVtZW50QXR0cmlidXRlVmFsdWVDaGFuZ2VkICYmIHRoaXMuYXR0cmlidXRlTmFtZSA9PSBhdHRyaWJ1dGVOYW1lKSB7XG4gICAgICAgICAgICB0aGlzLmRlbGVnYXRlLmVsZW1lbnRBdHRyaWJ1dGVWYWx1ZUNoYW5nZWQoZWxlbWVudCwgYXR0cmlidXRlTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGFkZChtYXAsIGtleSwgdmFsdWUpIHtcbiAgICBmZXRjaChtYXAsIGtleSkuYWRkKHZhbHVlKTtcbn1cbmZ1bmN0aW9uIGRlbChtYXAsIGtleSwgdmFsdWUpIHtcbiAgICBmZXRjaChtYXAsIGtleSkuZGVsZXRlKHZhbHVlKTtcbiAgICBwcnVuZShtYXAsIGtleSk7XG59XG5mdW5jdGlvbiBmZXRjaChtYXAsIGtleSkge1xuICAgIGxldCB2YWx1ZXMgPSBtYXAuZ2V0KGtleSk7XG4gICAgaWYgKCF2YWx1ZXMpIHtcbiAgICAgICAgdmFsdWVzID0gbmV3IFNldCgpO1xuICAgICAgICBtYXAuc2V0KGtleSwgdmFsdWVzKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlcztcbn1cbmZ1bmN0aW9uIHBydW5lKG1hcCwga2V5KSB7XG4gICAgY29uc3QgdmFsdWVzID0gbWFwLmdldChrZXkpO1xuICAgIGlmICh2YWx1ZXMgIT0gbnVsbCAmJiB2YWx1ZXMuc2l6ZSA9PSAwKSB7XG4gICAgICAgIG1hcC5kZWxldGUoa2V5KTtcbiAgICB9XG59XG5cbmNsYXNzIE11bHRpbWFwIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy52YWx1ZXNCeUtleSA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgZ2V0IGtleXMoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMudmFsdWVzQnlLZXkua2V5cygpKTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlcygpIHtcbiAgICAgICAgY29uc3Qgc2V0cyA9IEFycmF5LmZyb20odGhpcy52YWx1ZXNCeUtleS52YWx1ZXMoKSk7XG4gICAgICAgIHJldHVybiBzZXRzLnJlZHVjZSgodmFsdWVzLCBzZXQpID0+IHZhbHVlcy5jb25jYXQoQXJyYXkuZnJvbShzZXQpKSwgW10pO1xuICAgIH1cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgY29uc3Qgc2V0cyA9IEFycmF5LmZyb20odGhpcy52YWx1ZXNCeUtleS52YWx1ZXMoKSk7XG4gICAgICAgIHJldHVybiBzZXRzLnJlZHVjZSgoc2l6ZSwgc2V0KSA9PiBzaXplICsgc2V0LnNpemUsIDApO1xuICAgIH1cbiAgICBhZGQoa2V5LCB2YWx1ZSkge1xuICAgICAgICBhZGQodGhpcy52YWx1ZXNCeUtleSwga2V5LCB2YWx1ZSk7XG4gICAgfVxuICAgIGRlbGV0ZShrZXksIHZhbHVlKSB7XG4gICAgICAgIGRlbCh0aGlzLnZhbHVlc0J5S2V5LCBrZXksIHZhbHVlKTtcbiAgICB9XG4gICAgaGFzKGtleSwgdmFsdWUpIHtcbiAgICAgICAgY29uc3QgdmFsdWVzID0gdGhpcy52YWx1ZXNCeUtleS5nZXQoa2V5KTtcbiAgICAgICAgcmV0dXJuIHZhbHVlcyAhPSBudWxsICYmIHZhbHVlcy5oYXModmFsdWUpO1xuICAgIH1cbiAgICBoYXNLZXkoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlc0J5S2V5LmhhcyhrZXkpO1xuICAgIH1cbiAgICBoYXNWYWx1ZSh2YWx1ZSkge1xuICAgICAgICBjb25zdCBzZXRzID0gQXJyYXkuZnJvbSh0aGlzLnZhbHVlc0J5S2V5LnZhbHVlcygpKTtcbiAgICAgICAgcmV0dXJuIHNldHMuc29tZSgoc2V0KSA9PiBzZXQuaGFzKHZhbHVlKSk7XG4gICAgfVxuICAgIGdldFZhbHVlc0ZvcktleShrZXkpIHtcbiAgICAgICAgY29uc3QgdmFsdWVzID0gdGhpcy52YWx1ZXNCeUtleS5nZXQoa2V5KTtcbiAgICAgICAgcmV0dXJuIHZhbHVlcyA/IEFycmF5LmZyb20odmFsdWVzKSA6IFtdO1xuICAgIH1cbiAgICBnZXRLZXlzRm9yVmFsdWUodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy52YWx1ZXNCeUtleSlcbiAgICAgICAgICAgIC5maWx0ZXIoKFtfa2V5LCB2YWx1ZXNdKSA9PiB2YWx1ZXMuaGFzKHZhbHVlKSlcbiAgICAgICAgICAgIC5tYXAoKFtrZXksIF92YWx1ZXNdKSA9PiBrZXkpO1xuICAgIH1cbn1cblxuY2xhc3MgSW5kZXhlZE11bHRpbWFwIGV4dGVuZHMgTXVsdGltYXAge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmtleXNCeVZhbHVlID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICBnZXQgdmFsdWVzKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmtleXNCeVZhbHVlLmtleXMoKSk7XG4gICAgfVxuICAgIGFkZChrZXksIHZhbHVlKSB7XG4gICAgICAgIHN1cGVyLmFkZChrZXksIHZhbHVlKTtcbiAgICAgICAgYWRkKHRoaXMua2V5c0J5VmFsdWUsIHZhbHVlLCBrZXkpO1xuICAgIH1cbiAgICBkZWxldGUoa2V5LCB2YWx1ZSkge1xuICAgICAgICBzdXBlci5kZWxldGUoa2V5LCB2YWx1ZSk7XG4gICAgICAgIGRlbCh0aGlzLmtleXNCeVZhbHVlLCB2YWx1ZSwga2V5KTtcbiAgICB9XG4gICAgaGFzVmFsdWUodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5c0J5VmFsdWUuaGFzKHZhbHVlKTtcbiAgICB9XG4gICAgZ2V0S2V5c0ZvclZhbHVlKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHNldCA9IHRoaXMua2V5c0J5VmFsdWUuZ2V0KHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHNldCA/IEFycmF5LmZyb20oc2V0KSA6IFtdO1xuICAgIH1cbn1cblxuY2xhc3MgU2VsZWN0b3JPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgc2VsZWN0b3IsIGRlbGVnYXRlLCBkZXRhaWxzKSB7XG4gICAgICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgICAgIHRoaXMuZGV0YWlscyA9IGRldGFpbHM7XG4gICAgICAgIHRoaXMuZWxlbWVudE9ic2VydmVyID0gbmV3IEVsZW1lbnRPYnNlcnZlcihlbGVtZW50LCB0aGlzKTtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgICAgICB0aGlzLm1hdGNoZXNCeUVsZW1lbnQgPSBuZXcgTXVsdGltYXAoKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRPYnNlcnZlci5zdGFydGVkO1xuICAgIH1cbiAgICBnZXQgc2VsZWN0b3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZWxlY3RvcjtcbiAgICB9XG4gICAgc2V0IHNlbGVjdG9yKHNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50T2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICB9XG4gICAgcGF1c2UoY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5lbGVtZW50T2JzZXJ2ZXIucGF1c2UoY2FsbGJhY2spO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnRPYnNlcnZlci5zdG9wKCk7XG4gICAgfVxuICAgIHJlZnJlc2goKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudE9ic2VydmVyLnJlZnJlc2goKTtcbiAgICB9XG4gICAgZ2V0IGVsZW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRPYnNlcnZlci5lbGVtZW50O1xuICAgIH1cbiAgICBtYXRjaEVsZW1lbnQoZWxlbWVudCkge1xuICAgICAgICBjb25zdCB7IHNlbGVjdG9yIH0gPSB0aGlzO1xuICAgICAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSBlbGVtZW50Lm1hdGNoZXMoc2VsZWN0b3IpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUuc2VsZWN0b3JNYXRjaEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hlcyAmJiB0aGlzLmRlbGVnYXRlLnNlbGVjdG9yTWF0Y2hFbGVtZW50KGVsZW1lbnQsIHRoaXMuZGV0YWlscyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hlcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtYXRjaEVsZW1lbnRzSW5UcmVlKHRyZWUpIHtcbiAgICAgICAgY29uc3QgeyBzZWxlY3RvciB9ID0gdGhpcztcbiAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IHRoaXMubWF0Y2hFbGVtZW50KHRyZWUpID8gW3RyZWVdIDogW107XG4gICAgICAgICAgICBjb25zdCBtYXRjaGVzID0gQXJyYXkuZnJvbSh0cmVlLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKS5maWx0ZXIoKG1hdGNoKSA9PiB0aGlzLm1hdGNoRWxlbWVudChtYXRjaCkpO1xuICAgICAgICAgICAgcmV0dXJuIG1hdGNoLmNvbmNhdChtYXRjaGVzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbGVtZW50TWF0Y2hlZChlbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IHsgc2VsZWN0b3IgfSA9IHRoaXM7XG4gICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rvck1hdGNoZWQoZWxlbWVudCwgc2VsZWN0b3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsZW1lbnRVbm1hdGNoZWQoZWxlbWVudCkge1xuICAgICAgICBjb25zdCBzZWxlY3RvcnMgPSB0aGlzLm1hdGNoZXNCeUVsZW1lbnQuZ2V0S2V5c0ZvclZhbHVlKGVsZW1lbnQpO1xuICAgICAgICBmb3IgKGNvbnN0IHNlbGVjdG9yIG9mIHNlbGVjdG9ycykge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RvclVubWF0Y2hlZChlbGVtZW50LCBzZWxlY3Rvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxlbWVudEF0dHJpYnV0ZUNoYW5nZWQoZWxlbWVudCwgX2F0dHJpYnV0ZU5hbWUpIHtcbiAgICAgICAgY29uc3QgeyBzZWxlY3RvciB9ID0gdGhpcztcbiAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICBjb25zdCBtYXRjaGVzID0gdGhpcy5tYXRjaEVsZW1lbnQoZWxlbWVudCk7XG4gICAgICAgICAgICBjb25zdCBtYXRjaGVkQmVmb3JlID0gdGhpcy5tYXRjaGVzQnlFbGVtZW50LmhhcyhzZWxlY3RvciwgZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAobWF0Y2hlcyAmJiAhbWF0Y2hlZEJlZm9yZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0b3JNYXRjaGVkKGVsZW1lbnQsIHNlbGVjdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFtYXRjaGVzICYmIG1hdGNoZWRCZWZvcmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdG9yVW5tYXRjaGVkKGVsZW1lbnQsIHNlbGVjdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzZWxlY3Rvck1hdGNoZWQoZWxlbWVudCwgc2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZS5zZWxlY3Rvck1hdGNoZWQoZWxlbWVudCwgc2VsZWN0b3IsIHRoaXMuZGV0YWlscyk7XG4gICAgICAgIHRoaXMubWF0Y2hlc0J5RWxlbWVudC5hZGQoc2VsZWN0b3IsIGVsZW1lbnQpO1xuICAgIH1cbiAgICBzZWxlY3RvclVubWF0Y2hlZChlbGVtZW50LCBzZWxlY3Rvcikge1xuICAgICAgICB0aGlzLmRlbGVnYXRlLnNlbGVjdG9yVW5tYXRjaGVkKGVsZW1lbnQsIHNlbGVjdG9yLCB0aGlzLmRldGFpbHMpO1xuICAgICAgICB0aGlzLm1hdGNoZXNCeUVsZW1lbnQuZGVsZXRlKHNlbGVjdG9yLCBlbGVtZW50KTtcbiAgICB9XG59XG5cbmNsYXNzIFN0cmluZ01hcE9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBkZWxlZ2F0ZSkge1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gICAgICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnN0cmluZ01hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9ucykgPT4gdGhpcy5wcm9jZXNzTXV0YXRpb25zKG11dGF0aW9ucykpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmVsZW1lbnQsIHsgYXR0cmlidXRlczogdHJ1ZSwgYXR0cmlidXRlT2xkVmFsdWU6IHRydWUgfSk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXIudGFrZVJlY29yZHMoKTtcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25PYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWZyZXNoKCkge1xuICAgICAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGF0dHJpYnV0ZU5hbWUgb2YgdGhpcy5rbm93bkF0dHJpYnV0ZU5hbWVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoQXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUsIG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHByb2Nlc3NNdXRhdGlvbnMobXV0YXRpb25zKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbXV0YXRpb24gb2YgbXV0YXRpb25zKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzTXV0YXRpb24obXV0YXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHByb2Nlc3NNdXRhdGlvbihtdXRhdGlvbikge1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGVOYW1lID0gbXV0YXRpb24uYXR0cmlidXRlTmFtZTtcbiAgICAgICAgaWYgKGF0dHJpYnV0ZU5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lLCBtdXRhdGlvbi5vbGRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVmcmVzaEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lLCBvbGRWYWx1ZSkge1xuICAgICAgICBjb25zdCBrZXkgPSB0aGlzLmRlbGVnYXRlLmdldFN0cmluZ01hcEtleUZvckF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lKTtcbiAgICAgICAgaWYgKGtleSAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RyaW5nTWFwLmhhcyhhdHRyaWJ1dGVOYW1lKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RyaW5nTWFwS2V5QWRkZWQoa2V5LCBhdHRyaWJ1dGVOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0cmluZ01hcC5nZXQoYXR0cmlidXRlTmFtZSkgIT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0cmluZ01hcFZhbHVlQ2hhbmdlZCh2YWx1ZSwga2V5LCBvbGRWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9sZFZhbHVlID0gdGhpcy5zdHJpbmdNYXAuZ2V0KGF0dHJpYnV0ZU5hbWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RyaW5nTWFwLmRlbGV0ZShhdHRyaWJ1dGVOYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAob2xkVmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RyaW5nTWFwS2V5UmVtb3ZlZChrZXksIGF0dHJpYnV0ZU5hbWUsIG9sZFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RyaW5nTWFwLnNldChhdHRyaWJ1dGVOYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RyaW5nTWFwS2V5QWRkZWQoa2V5LCBhdHRyaWJ1dGVOYW1lKSB7XG4gICAgICAgIGlmICh0aGlzLmRlbGVnYXRlLnN0cmluZ01hcEtleUFkZGVkKSB7XG4gICAgICAgICAgICB0aGlzLmRlbGVnYXRlLnN0cmluZ01hcEtleUFkZGVkKGtleSwgYXR0cmlidXRlTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RyaW5nTWFwVmFsdWVDaGFuZ2VkKHZhbHVlLCBrZXksIG9sZFZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLmRlbGVnYXRlLnN0cmluZ01hcFZhbHVlQ2hhbmdlZCkge1xuICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5zdHJpbmdNYXBWYWx1ZUNoYW5nZWQodmFsdWUsIGtleSwgb2xkVmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0cmluZ01hcEtleVJlbW92ZWQoa2V5LCBhdHRyaWJ1dGVOYW1lLCBvbGRWYWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZS5zdHJpbmdNYXBLZXlSZW1vdmVkKSB7XG4gICAgICAgICAgICB0aGlzLmRlbGVnYXRlLnN0cmluZ01hcEtleVJlbW92ZWQoa2V5LCBhdHRyaWJ1dGVOYW1lLCBvbGRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGtub3duQXR0cmlidXRlTmFtZXMoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKG5ldyBTZXQodGhpcy5jdXJyZW50QXR0cmlidXRlTmFtZXMuY29uY2F0KHRoaXMucmVjb3JkZWRBdHRyaWJ1dGVOYW1lcykpKTtcbiAgICB9XG4gICAgZ2V0IGN1cnJlbnRBdHRyaWJ1dGVOYW1lcygpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5lbGVtZW50LmF0dHJpYnV0ZXMpLm1hcCgoYXR0cmlidXRlKSA9PiBhdHRyaWJ1dGUubmFtZSk7XG4gICAgfVxuICAgIGdldCByZWNvcmRlZEF0dHJpYnV0ZU5hbWVzKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnN0cmluZ01hcC5rZXlzKCkpO1xuICAgIH1cbn1cblxuY2xhc3MgVG9rZW5MaXN0T2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIGF0dHJpYnV0ZU5hbWUsIGRlbGVnYXRlKSB7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlT2JzZXJ2ZXIgPSBuZXcgQXR0cmlidXRlT2JzZXJ2ZXIoZWxlbWVudCwgYXR0cmlidXRlTmFtZSwgdGhpcyk7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICAgICAgdGhpcy50b2tlbnNCeUVsZW1lbnQgPSBuZXcgTXVsdGltYXAoKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZU9ic2VydmVyLnN0YXJ0ZWQ7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZU9ic2VydmVyLnN0YXJ0KCk7XG4gICAgfVxuICAgIHBhdXNlKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlT2JzZXJ2ZXIucGF1c2UoY2FsbGJhY2spO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZU9ic2VydmVyLnN0b3AoKTtcbiAgICB9XG4gICAgcmVmcmVzaCgpIHtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVPYnNlcnZlci5yZWZyZXNoKCk7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGVPYnNlcnZlci5lbGVtZW50O1xuICAgIH1cbiAgICBnZXQgYXR0cmlidXRlTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlT2JzZXJ2ZXIuYXR0cmlidXRlTmFtZTtcbiAgICB9XG4gICAgZWxlbWVudE1hdGNoZWRBdHRyaWJ1dGUoZWxlbWVudCkge1xuICAgICAgICB0aGlzLnRva2Vuc01hdGNoZWQodGhpcy5yZWFkVG9rZW5zRm9yRWxlbWVudChlbGVtZW50KSk7XG4gICAgfVxuICAgIGVsZW1lbnRBdHRyaWJ1dGVWYWx1ZUNoYW5nZWQoZWxlbWVudCkge1xuICAgICAgICBjb25zdCBbdW5tYXRjaGVkVG9rZW5zLCBtYXRjaGVkVG9rZW5zXSA9IHRoaXMucmVmcmVzaFRva2Vuc0ZvckVsZW1lbnQoZWxlbWVudCk7XG4gICAgICAgIHRoaXMudG9rZW5zVW5tYXRjaGVkKHVubWF0Y2hlZFRva2Vucyk7XG4gICAgICAgIHRoaXMudG9rZW5zTWF0Y2hlZChtYXRjaGVkVG9rZW5zKTtcbiAgICB9XG4gICAgZWxlbWVudFVubWF0Y2hlZEF0dHJpYnV0ZShlbGVtZW50KSB7XG4gICAgICAgIHRoaXMudG9rZW5zVW5tYXRjaGVkKHRoaXMudG9rZW5zQnlFbGVtZW50LmdldFZhbHVlc0ZvcktleShlbGVtZW50KSk7XG4gICAgfVxuICAgIHRva2Vuc01hdGNoZWQodG9rZW5zKSB7XG4gICAgICAgIHRva2Vucy5mb3JFYWNoKCh0b2tlbikgPT4gdGhpcy50b2tlbk1hdGNoZWQodG9rZW4pKTtcbiAgICB9XG4gICAgdG9rZW5zVW5tYXRjaGVkKHRva2Vucykge1xuICAgICAgICB0b2tlbnMuZm9yRWFjaCgodG9rZW4pID0+IHRoaXMudG9rZW5Vbm1hdGNoZWQodG9rZW4pKTtcbiAgICB9XG4gICAgdG9rZW5NYXRjaGVkKHRva2VuKSB7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUudG9rZW5NYXRjaGVkKHRva2VuKTtcbiAgICAgICAgdGhpcy50b2tlbnNCeUVsZW1lbnQuYWRkKHRva2VuLmVsZW1lbnQsIHRva2VuKTtcbiAgICB9XG4gICAgdG9rZW5Vbm1hdGNoZWQodG9rZW4pIHtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZS50b2tlblVubWF0Y2hlZCh0b2tlbik7XG4gICAgICAgIHRoaXMudG9rZW5zQnlFbGVtZW50LmRlbGV0ZSh0b2tlbi5lbGVtZW50LCB0b2tlbik7XG4gICAgfVxuICAgIHJlZnJlc2hUb2tlbnNGb3JFbGVtZW50KGVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgcHJldmlvdXNUb2tlbnMgPSB0aGlzLnRva2Vuc0J5RWxlbWVudC5nZXRWYWx1ZXNGb3JLZXkoZWxlbWVudCk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUb2tlbnMgPSB0aGlzLnJlYWRUb2tlbnNGb3JFbGVtZW50KGVsZW1lbnQpO1xuICAgICAgICBjb25zdCBmaXJzdERpZmZlcmluZ0luZGV4ID0gemlwKHByZXZpb3VzVG9rZW5zLCBjdXJyZW50VG9rZW5zKS5maW5kSW5kZXgoKFtwcmV2aW91c1Rva2VuLCBjdXJyZW50VG9rZW5dKSA9PiAhdG9rZW5zQXJlRXF1YWwocHJldmlvdXNUb2tlbiwgY3VycmVudFRva2VuKSk7XG4gICAgICAgIGlmIChmaXJzdERpZmZlcmluZ0luZGV4ID09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gW1tdLCBbXV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gW3ByZXZpb3VzVG9rZW5zLnNsaWNlKGZpcnN0RGlmZmVyaW5nSW5kZXgpLCBjdXJyZW50VG9rZW5zLnNsaWNlKGZpcnN0RGlmZmVyaW5nSW5kZXgpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWFkVG9rZW5zRm9yRWxlbWVudChlbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZU5hbWUgPSB0aGlzLmF0dHJpYnV0ZU5hbWU7XG4gICAgICAgIGNvbnN0IHRva2VuU3RyaW5nID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSkgfHwgXCJcIjtcbiAgICAgICAgcmV0dXJuIHBhcnNlVG9rZW5TdHJpbmcodG9rZW5TdHJpbmcsIGVsZW1lbnQsIGF0dHJpYnV0ZU5hbWUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHBhcnNlVG9rZW5TdHJpbmcodG9rZW5TdHJpbmcsIGVsZW1lbnQsIGF0dHJpYnV0ZU5hbWUpIHtcbiAgICByZXR1cm4gdG9rZW5TdHJpbmdcbiAgICAgICAgLnRyaW0oKVxuICAgICAgICAuc3BsaXQoL1xccysvKVxuICAgICAgICAuZmlsdGVyKChjb250ZW50KSA9PiBjb250ZW50Lmxlbmd0aClcbiAgICAgICAgLm1hcCgoY29udGVudCwgaW5kZXgpID0+ICh7IGVsZW1lbnQsIGF0dHJpYnV0ZU5hbWUsIGNvbnRlbnQsIGluZGV4IH0pKTtcbn1cbmZ1bmN0aW9uIHppcChsZWZ0LCByaWdodCkge1xuICAgIGNvbnN0IGxlbmd0aCA9IE1hdGgubWF4KGxlZnQubGVuZ3RoLCByaWdodC5sZW5ndGgpO1xuICAgIHJldHVybiBBcnJheS5mcm9tKHsgbGVuZ3RoIH0sIChfLCBpbmRleCkgPT4gW2xlZnRbaW5kZXhdLCByaWdodFtpbmRleF1dKTtcbn1cbmZ1bmN0aW9uIHRva2Vuc0FyZUVxdWFsKGxlZnQsIHJpZ2h0KSB7XG4gICAgcmV0dXJuIGxlZnQgJiYgcmlnaHQgJiYgbGVmdC5pbmRleCA9PSByaWdodC5pbmRleCAmJiBsZWZ0LmNvbnRlbnQgPT0gcmlnaHQuY29udGVudDtcbn1cblxuY2xhc3MgVmFsdWVMaXN0T2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIGF0dHJpYnV0ZU5hbWUsIGRlbGVnYXRlKSB7XG4gICAgICAgIHRoaXMudG9rZW5MaXN0T2JzZXJ2ZXIgPSBuZXcgVG9rZW5MaXN0T2JzZXJ2ZXIoZWxlbWVudCwgYXR0cmlidXRlTmFtZSwgdGhpcyk7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICAgICAgdGhpcy5wYXJzZVJlc3VsdHNCeVRva2VuID0gbmV3IFdlYWtNYXAoKTtcbiAgICAgICAgdGhpcy52YWx1ZXNCeVRva2VuQnlFbGVtZW50ID0gbmV3IFdlYWtNYXAoKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRva2VuTGlzdE9ic2VydmVyLnN0YXJ0ZWQ7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLnRva2VuTGlzdE9ic2VydmVyLnN0YXJ0KCk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMudG9rZW5MaXN0T2JzZXJ2ZXIuc3RvcCgpO1xuICAgIH1cbiAgICByZWZyZXNoKCkge1xuICAgICAgICB0aGlzLnRva2VuTGlzdE9ic2VydmVyLnJlZnJlc2goKTtcbiAgICB9XG4gICAgZ2V0IGVsZW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRva2VuTGlzdE9ic2VydmVyLmVsZW1lbnQ7XG4gICAgfVxuICAgIGdldCBhdHRyaWJ1dGVOYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b2tlbkxpc3RPYnNlcnZlci5hdHRyaWJ1dGVOYW1lO1xuICAgIH1cbiAgICB0b2tlbk1hdGNoZWQodG9rZW4pIHtcbiAgICAgICAgY29uc3QgeyBlbGVtZW50IH0gPSB0b2tlbjtcbiAgICAgICAgY29uc3QgeyB2YWx1ZSB9ID0gdGhpcy5mZXRjaFBhcnNlUmVzdWx0Rm9yVG9rZW4odG9rZW4pO1xuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuZmV0Y2hWYWx1ZXNCeVRva2VuRm9yRWxlbWVudChlbGVtZW50KS5zZXQodG9rZW4sIHZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUuZWxlbWVudE1hdGNoZWRWYWx1ZShlbGVtZW50LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9rZW5Vbm1hdGNoZWQodG9rZW4pIHtcbiAgICAgICAgY29uc3QgeyBlbGVtZW50IH0gPSB0b2tlbjtcbiAgICAgICAgY29uc3QgeyB2YWx1ZSB9ID0gdGhpcy5mZXRjaFBhcnNlUmVzdWx0Rm9yVG9rZW4odG9rZW4pO1xuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuZmV0Y2hWYWx1ZXNCeVRva2VuRm9yRWxlbWVudChlbGVtZW50KS5kZWxldGUodG9rZW4pO1xuICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5lbGVtZW50VW5tYXRjaGVkVmFsdWUoZWxlbWVudCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZldGNoUGFyc2VSZXN1bHRGb3JUb2tlbih0b2tlbikge1xuICAgICAgICBsZXQgcGFyc2VSZXN1bHQgPSB0aGlzLnBhcnNlUmVzdWx0c0J5VG9rZW4uZ2V0KHRva2VuKTtcbiAgICAgICAgaWYgKCFwYXJzZVJlc3VsdCkge1xuICAgICAgICAgICAgcGFyc2VSZXN1bHQgPSB0aGlzLnBhcnNlVG9rZW4odG9rZW4pO1xuICAgICAgICAgICAgdGhpcy5wYXJzZVJlc3VsdHNCeVRva2VuLnNldCh0b2tlbiwgcGFyc2VSZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJzZVJlc3VsdDtcbiAgICB9XG4gICAgZmV0Y2hWYWx1ZXNCeVRva2VuRm9yRWxlbWVudChlbGVtZW50KSB7XG4gICAgICAgIGxldCB2YWx1ZXNCeVRva2VuID0gdGhpcy52YWx1ZXNCeVRva2VuQnlFbGVtZW50LmdldChlbGVtZW50KTtcbiAgICAgICAgaWYgKCF2YWx1ZXNCeVRva2VuKSB7XG4gICAgICAgICAgICB2YWx1ZXNCeVRva2VuID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgdGhpcy52YWx1ZXNCeVRva2VuQnlFbGVtZW50LnNldChlbGVtZW50LCB2YWx1ZXNCeVRva2VuKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWVzQnlUb2tlbjtcbiAgICB9XG4gICAgcGFyc2VUb2tlbih0b2tlbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmRlbGVnYXRlLnBhcnNlVmFsdWVGb3JUb2tlbih0b2tlbik7XG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZSB9O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY2xhc3MgQmluZGluZ09ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0LCBkZWxlZ2F0ZSkge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gICAgICAgIHRoaXMuYmluZGluZ3NCeUFjdGlvbiA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGlmICghdGhpcy52YWx1ZUxpc3RPYnNlcnZlcikge1xuICAgICAgICAgICAgdGhpcy52YWx1ZUxpc3RPYnNlcnZlciA9IG5ldyBWYWx1ZUxpc3RPYnNlcnZlcih0aGlzLmVsZW1lbnQsIHRoaXMuYWN0aW9uQXR0cmlidXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudmFsdWVMaXN0T2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZUxpc3RPYnNlcnZlcikge1xuICAgICAgICAgICAgdGhpcy52YWx1ZUxpc3RPYnNlcnZlci5zdG9wKCk7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy52YWx1ZUxpc3RPYnNlcnZlcjtcbiAgICAgICAgICAgIHRoaXMuZGlzY29ubmVjdEFsbEFjdGlvbnMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5lbGVtZW50O1xuICAgIH1cbiAgICBnZXQgaWRlbnRpZmllcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5pZGVudGlmaWVyO1xuICAgIH1cbiAgICBnZXQgYWN0aW9uQXR0cmlidXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY2hlbWEuYWN0aW9uQXR0cmlidXRlO1xuICAgIH1cbiAgICBnZXQgc2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0LnNjaGVtYTtcbiAgICB9XG4gICAgZ2V0IGJpbmRpbmdzKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmJpbmRpbmdzQnlBY3Rpb24udmFsdWVzKCkpO1xuICAgIH1cbiAgICBjb25uZWN0QWN0aW9uKGFjdGlvbikge1xuICAgICAgICBjb25zdCBiaW5kaW5nID0gbmV3IEJpbmRpbmcodGhpcy5jb250ZXh0LCBhY3Rpb24pO1xuICAgICAgICB0aGlzLmJpbmRpbmdzQnlBY3Rpb24uc2V0KGFjdGlvbiwgYmluZGluZyk7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUuYmluZGluZ0Nvbm5lY3RlZChiaW5kaW5nKTtcbiAgICB9XG4gICAgZGlzY29ubmVjdEFjdGlvbihhY3Rpb24pIHtcbiAgICAgICAgY29uc3QgYmluZGluZyA9IHRoaXMuYmluZGluZ3NCeUFjdGlvbi5nZXQoYWN0aW9uKTtcbiAgICAgICAgaWYgKGJpbmRpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuYmluZGluZ3NCeUFjdGlvbi5kZWxldGUoYWN0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUuYmluZGluZ0Rpc2Nvbm5lY3RlZChiaW5kaW5nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkaXNjb25uZWN0QWxsQWN0aW9ucygpIHtcbiAgICAgICAgdGhpcy5iaW5kaW5ncy5mb3JFYWNoKChiaW5kaW5nKSA9PiB0aGlzLmRlbGVnYXRlLmJpbmRpbmdEaXNjb25uZWN0ZWQoYmluZGluZywgdHJ1ZSkpO1xuICAgICAgICB0aGlzLmJpbmRpbmdzQnlBY3Rpb24uY2xlYXIoKTtcbiAgICB9XG4gICAgcGFyc2VWYWx1ZUZvclRva2VuKHRva2VuKSB7XG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IEFjdGlvbi5mb3JUb2tlbih0b2tlbiwgdGhpcy5zY2hlbWEpO1xuICAgICAgICBpZiAoYWN0aW9uLmlkZW50aWZpZXIgPT0gdGhpcy5pZGVudGlmaWVyKSB7XG4gICAgICAgICAgICByZXR1cm4gYWN0aW9uO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsZW1lbnRNYXRjaGVkVmFsdWUoZWxlbWVudCwgYWN0aW9uKSB7XG4gICAgICAgIHRoaXMuY29ubmVjdEFjdGlvbihhY3Rpb24pO1xuICAgIH1cbiAgICBlbGVtZW50VW5tYXRjaGVkVmFsdWUoZWxlbWVudCwgYWN0aW9uKSB7XG4gICAgICAgIHRoaXMuZGlzY29ubmVjdEFjdGlvbihhY3Rpb24pO1xuICAgIH1cbn1cblxuY2xhc3MgVmFsdWVPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IoY29udGV4dCwgcmVjZWl2ZXIpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy5yZWNlaXZlciA9IHJlY2VpdmVyO1xuICAgICAgICB0aGlzLnN0cmluZ01hcE9ic2VydmVyID0gbmV3IFN0cmluZ01hcE9ic2VydmVyKHRoaXMuZWxlbWVudCwgdGhpcyk7XG4gICAgICAgIHRoaXMudmFsdWVEZXNjcmlwdG9yTWFwID0gdGhpcy5jb250cm9sbGVyLnZhbHVlRGVzY3JpcHRvck1hcDtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuc3RyaW5nTWFwT2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICAgICAgdGhpcy5pbnZva2VDaGFuZ2VkQ2FsbGJhY2tzRm9yRGVmYXVsdFZhbHVlcygpO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICB0aGlzLnN0cmluZ01hcE9ic2VydmVyLnN0b3AoKTtcbiAgICB9XG4gICAgZ2V0IGVsZW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQuZWxlbWVudDtcbiAgICB9XG4gICAgZ2V0IGNvbnRyb2xsZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQuY29udHJvbGxlcjtcbiAgICB9XG4gICAgZ2V0U3RyaW5nTWFwS2V5Rm9yQXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpIHtcbiAgICAgICAgaWYgKGF0dHJpYnV0ZU5hbWUgaW4gdGhpcy52YWx1ZURlc2NyaXB0b3JNYXApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlRGVzY3JpcHRvck1hcFthdHRyaWJ1dGVOYW1lXS5uYW1lO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0cmluZ01hcEtleUFkZGVkKGtleSwgYXR0cmlidXRlTmFtZSkge1xuICAgICAgICBjb25zdCBkZXNjcmlwdG9yID0gdGhpcy52YWx1ZURlc2NyaXB0b3JNYXBbYXR0cmlidXRlTmFtZV07XG4gICAgICAgIGlmICghdGhpcy5oYXNWYWx1ZShrZXkpKSB7XG4gICAgICAgICAgICB0aGlzLmludm9rZUNoYW5nZWRDYWxsYmFjayhrZXksIGRlc2NyaXB0b3Iud3JpdGVyKHRoaXMucmVjZWl2ZXJba2V5XSksIGRlc2NyaXB0b3Iud3JpdGVyKGRlc2NyaXB0b3IuZGVmYXVsdFZhbHVlKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RyaW5nTWFwVmFsdWVDaGFuZ2VkKHZhbHVlLCBuYW1lLCBvbGRWYWx1ZSkge1xuICAgICAgICBjb25zdCBkZXNjcmlwdG9yID0gdGhpcy52YWx1ZURlc2NyaXB0b3JOYW1lTWFwW25hbWVdO1xuICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChvbGRWYWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgb2xkVmFsdWUgPSBkZXNjcmlwdG9yLndyaXRlcihkZXNjcmlwdG9yLmRlZmF1bHRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbnZva2VDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgdmFsdWUsIG9sZFZhbHVlKTtcbiAgICB9XG4gICAgc3RyaW5nTWFwS2V5UmVtb3ZlZChrZXksIGF0dHJpYnV0ZU5hbWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSB0aGlzLnZhbHVlRGVzY3JpcHRvck5hbWVNYXBba2V5XTtcbiAgICAgICAgaWYgKHRoaXMuaGFzVmFsdWUoa2V5KSkge1xuICAgICAgICAgICAgdGhpcy5pbnZva2VDaGFuZ2VkQ2FsbGJhY2soa2V5LCBkZXNjcmlwdG9yLndyaXRlcih0aGlzLnJlY2VpdmVyW2tleV0pLCBvbGRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmludm9rZUNoYW5nZWRDYWxsYmFjayhrZXksIGRlc2NyaXB0b3Iud3JpdGVyKGRlc2NyaXB0b3IuZGVmYXVsdFZhbHVlKSwgb2xkVmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGludm9rZUNoYW5nZWRDYWxsYmFja3NGb3JEZWZhdWx0VmFsdWVzKCkge1xuICAgICAgICBmb3IgKGNvbnN0IHsga2V5LCBuYW1lLCBkZWZhdWx0VmFsdWUsIHdyaXRlciB9IG9mIHRoaXMudmFsdWVEZXNjcmlwdG9ycykge1xuICAgICAgICAgICAgaWYgKGRlZmF1bHRWYWx1ZSAhPSB1bmRlZmluZWQgJiYgIXRoaXMuY29udHJvbGxlci5kYXRhLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnZva2VDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgd3JpdGVyKGRlZmF1bHRWYWx1ZSksIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW52b2tlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIHJhd1ZhbHVlLCByYXdPbGRWYWx1ZSkge1xuICAgICAgICBjb25zdCBjaGFuZ2VkTWV0aG9kTmFtZSA9IGAke25hbWV9Q2hhbmdlZGA7XG4gICAgICAgIGNvbnN0IGNoYW5nZWRNZXRob2QgPSB0aGlzLnJlY2VpdmVyW2NoYW5nZWRNZXRob2ROYW1lXTtcbiAgICAgICAgaWYgKHR5cGVvZiBjaGFuZ2VkTWV0aG9kID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRvciA9IHRoaXMudmFsdWVEZXNjcmlwdG9yTmFtZU1hcFtuYW1lXTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBkZXNjcmlwdG9yLnJlYWRlcihyYXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgbGV0IG9sZFZhbHVlID0gcmF3T2xkVmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHJhd09sZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlID0gZGVzY3JpcHRvci5yZWFkZXIocmF3T2xkVmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjaGFuZ2VkTWV0aG9kLmNhbGwodGhpcy5yZWNlaXZlciwgdmFsdWUsIG9sZFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFR5cGVFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBlcnJvci5tZXNzYWdlID0gYFN0aW11bHVzIFZhbHVlIFwiJHt0aGlzLmNvbnRleHQuaWRlbnRpZmllcn0uJHtkZXNjcmlwdG9yLm5hbWV9XCIgLSAke2Vycm9yLm1lc3NhZ2V9YDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IHZhbHVlRGVzY3JpcHRvcnMoKSB7XG4gICAgICAgIGNvbnN0IHsgdmFsdWVEZXNjcmlwdG9yTWFwIH0gPSB0aGlzO1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModmFsdWVEZXNjcmlwdG9yTWFwKS5tYXAoKGtleSkgPT4gdmFsdWVEZXNjcmlwdG9yTWFwW2tleV0pO1xuICAgIH1cbiAgICBnZXQgdmFsdWVEZXNjcmlwdG9yTmFtZU1hcCgpIHtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRvcnMgPSB7fTtcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy52YWx1ZURlc2NyaXB0b3JNYXApLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRvciA9IHRoaXMudmFsdWVEZXNjcmlwdG9yTWFwW2tleV07XG4gICAgICAgICAgICBkZXNjcmlwdG9yc1tkZXNjcmlwdG9yLm5hbWVdID0gZGVzY3JpcHRvcjtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkZXNjcmlwdG9ycztcbiAgICB9XG4gICAgaGFzVmFsdWUoYXR0cmlidXRlTmFtZSkge1xuICAgICAgICBjb25zdCBkZXNjcmlwdG9yID0gdGhpcy52YWx1ZURlc2NyaXB0b3JOYW1lTWFwW2F0dHJpYnV0ZU5hbWVdO1xuICAgICAgICBjb25zdCBoYXNNZXRob2ROYW1lID0gYGhhcyR7Y2FwaXRhbGl6ZShkZXNjcmlwdG9yLm5hbWUpfWA7XG4gICAgICAgIHJldHVybiB0aGlzLnJlY2VpdmVyW2hhc01ldGhvZE5hbWVdO1xuICAgIH1cbn1cblxuY2xhc3MgVGFyZ2V0T2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQsIGRlbGVnYXRlKSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICAgICAgdGhpcy50YXJnZXRzQnlOYW1lID0gbmV3IE11bHRpbWFwKCk7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICBpZiAoIXRoaXMudG9rZW5MaXN0T2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIHRoaXMudG9rZW5MaXN0T2JzZXJ2ZXIgPSBuZXcgVG9rZW5MaXN0T2JzZXJ2ZXIodGhpcy5lbGVtZW50LCB0aGlzLmF0dHJpYnV0ZU5hbWUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy50b2tlbkxpc3RPYnNlcnZlci5zdGFydCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIGlmICh0aGlzLnRva2VuTGlzdE9ic2VydmVyKSB7XG4gICAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3RBbGxUYXJnZXRzKCk7XG4gICAgICAgICAgICB0aGlzLnRva2VuTGlzdE9ic2VydmVyLnN0b3AoKTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnRva2VuTGlzdE9ic2VydmVyO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRva2VuTWF0Y2hlZCh7IGVsZW1lbnQsIGNvbnRlbnQ6IG5hbWUgfSkge1xuICAgICAgICBpZiAodGhpcy5zY29wZS5jb250YWluc0VsZW1lbnQoZWxlbWVudCkpIHtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdFRhcmdldChlbGVtZW50LCBuYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b2tlblVubWF0Y2hlZCh7IGVsZW1lbnQsIGNvbnRlbnQ6IG5hbWUgfSkge1xuICAgICAgICB0aGlzLmRpc2Nvbm5lY3RUYXJnZXQoZWxlbWVudCwgbmFtZSk7XG4gICAgfVxuICAgIGNvbm5lY3RUYXJnZXQoZWxlbWVudCwgbmFtZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICghdGhpcy50YXJnZXRzQnlOYW1lLmhhcyhuYW1lLCBlbGVtZW50KSkge1xuICAgICAgICAgICAgdGhpcy50YXJnZXRzQnlOYW1lLmFkZChuYW1lLCBlbGVtZW50KTtcbiAgICAgICAgICAgIChfYSA9IHRoaXMudG9rZW5MaXN0T2JzZXJ2ZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wYXVzZSgoKSA9PiB0aGlzLmRlbGVnYXRlLnRhcmdldENvbm5lY3RlZChlbGVtZW50LCBuYW1lKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGlzY29ubmVjdFRhcmdldChlbGVtZW50LCBuYW1lKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0c0J5TmFtZS5oYXMobmFtZSwgZWxlbWVudCkpIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0c0J5TmFtZS5kZWxldGUobmFtZSwgZWxlbWVudCk7XG4gICAgICAgICAgICAoX2EgPSB0aGlzLnRva2VuTGlzdE9ic2VydmVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucGF1c2UoKCkgPT4gdGhpcy5kZWxlZ2F0ZS50YXJnZXREaXNjb25uZWN0ZWQoZWxlbWVudCwgbmFtZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRpc2Nvbm5lY3RBbGxUYXJnZXRzKCkge1xuICAgICAgICBmb3IgKGNvbnN0IG5hbWUgb2YgdGhpcy50YXJnZXRzQnlOYW1lLmtleXMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLnRhcmdldHNCeU5hbWUuZ2V0VmFsdWVzRm9yS2V5KG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0VGFyZ2V0KGVsZW1lbnQsIG5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBhdHRyaWJ1dGVOYW1lKCkge1xuICAgICAgICByZXR1cm4gYGRhdGEtJHt0aGlzLmNvbnRleHQuaWRlbnRpZmllcn0tdGFyZ2V0YDtcbiAgICB9XG4gICAgZ2V0IGVsZW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQuZWxlbWVudDtcbiAgICB9XG4gICAgZ2V0IHNjb3BlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0LnNjb3BlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcmVhZEluaGVyaXRhYmxlU3RhdGljQXJyYXlWYWx1ZXMoY29uc3RydWN0b3IsIHByb3BlcnR5TmFtZSkge1xuICAgIGNvbnN0IGFuY2VzdG9ycyA9IGdldEFuY2VzdG9yc0ZvckNvbnN0cnVjdG9yKGNvbnN0cnVjdG9yKTtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShhbmNlc3RvcnMucmVkdWNlKCh2YWx1ZXMsIGNvbnN0cnVjdG9yKSA9PiB7XG4gICAgICAgIGdldE93blN0YXRpY0FycmF5VmFsdWVzKGNvbnN0cnVjdG9yLCBwcm9wZXJ0eU5hbWUpLmZvckVhY2goKG5hbWUpID0+IHZhbHVlcy5hZGQobmFtZSkpO1xuICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgIH0sIG5ldyBTZXQoKSkpO1xufVxuZnVuY3Rpb24gcmVhZEluaGVyaXRhYmxlU3RhdGljT2JqZWN0UGFpcnMoY29uc3RydWN0b3IsIHByb3BlcnR5TmFtZSkge1xuICAgIGNvbnN0IGFuY2VzdG9ycyA9IGdldEFuY2VzdG9yc0ZvckNvbnN0cnVjdG9yKGNvbnN0cnVjdG9yKTtcbiAgICByZXR1cm4gYW5jZXN0b3JzLnJlZHVjZSgocGFpcnMsIGNvbnN0cnVjdG9yKSA9PiB7XG4gICAgICAgIHBhaXJzLnB1c2goLi4uZ2V0T3duU3RhdGljT2JqZWN0UGFpcnMoY29uc3RydWN0b3IsIHByb3BlcnR5TmFtZSkpO1xuICAgICAgICByZXR1cm4gcGFpcnM7XG4gICAgfSwgW10pO1xufVxuZnVuY3Rpb24gZ2V0QW5jZXN0b3JzRm9yQ29uc3RydWN0b3IoY29uc3RydWN0b3IpIHtcbiAgICBjb25zdCBhbmNlc3RvcnMgPSBbXTtcbiAgICB3aGlsZSAoY29uc3RydWN0b3IpIHtcbiAgICAgICAgYW5jZXN0b3JzLnB1c2goY29uc3RydWN0b3IpO1xuICAgICAgICBjb25zdHJ1Y3RvciA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihjb25zdHJ1Y3Rvcik7XG4gICAgfVxuICAgIHJldHVybiBhbmNlc3RvcnMucmV2ZXJzZSgpO1xufVxuZnVuY3Rpb24gZ2V0T3duU3RhdGljQXJyYXlWYWx1ZXMoY29uc3RydWN0b3IsIHByb3BlcnR5TmFtZSkge1xuICAgIGNvbnN0IGRlZmluaXRpb24gPSBjb25zdHJ1Y3Rvcltwcm9wZXJ0eU5hbWVdO1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGRlZmluaXRpb24pID8gZGVmaW5pdGlvbiA6IFtdO1xufVxuZnVuY3Rpb24gZ2V0T3duU3RhdGljT2JqZWN0UGFpcnMoY29uc3RydWN0b3IsIHByb3BlcnR5TmFtZSkge1xuICAgIGNvbnN0IGRlZmluaXRpb24gPSBjb25zdHJ1Y3Rvcltwcm9wZXJ0eU5hbWVdO1xuICAgIHJldHVybiBkZWZpbml0aW9uID8gT2JqZWN0LmtleXMoZGVmaW5pdGlvbikubWFwKChrZXkpID0+IFtrZXksIGRlZmluaXRpb25ba2V5XV0pIDogW107XG59XG5cbmNsYXNzIE91dGxldE9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0LCBkZWxlZ2F0ZSkge1xuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgICAgICB0aGlzLm91dGxldHNCeU5hbWUgPSBuZXcgTXVsdGltYXAoKTtcbiAgICAgICAgdGhpcy5vdXRsZXRFbGVtZW50c0J5TmFtZSA9IG5ldyBNdWx0aW1hcCgpO1xuICAgICAgICB0aGlzLnNlbGVjdG9yT2JzZXJ2ZXJNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlT2JzZXJ2ZXJNYXAgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICBpZiAoIXRoaXMuc3RhcnRlZCkge1xuICAgICAgICAgICAgdGhpcy5vdXRsZXREZWZpbml0aW9ucy5mb3JFYWNoKChvdXRsZXROYW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXR1cFNlbGVjdG9yT2JzZXJ2ZXJGb3JPdXRsZXQob3V0bGV0TmFtZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXR1cEF0dHJpYnV0ZU9ic2VydmVyRm9yT3V0bGV0KG91dGxldE5hbWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5kZXBlbmRlbnRDb250ZXh0cy5mb3JFYWNoKChjb250ZXh0KSA9PiBjb250ZXh0LnJlZnJlc2goKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVmcmVzaCgpIHtcbiAgICAgICAgdGhpcy5zZWxlY3Rvck9ic2VydmVyTWFwLmZvckVhY2goKG9ic2VydmVyKSA9PiBvYnNlcnZlci5yZWZyZXNoKCkpO1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZU9ic2VydmVyTWFwLmZvckVhY2goKG9ic2VydmVyKSA9PiBvYnNlcnZlci5yZWZyZXNoKCkpO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZGlzY29ubmVjdEFsbE91dGxldHMoKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcFNlbGVjdG9yT2JzZXJ2ZXJzKCk7XG4gICAgICAgICAgICB0aGlzLnN0b3BBdHRyaWJ1dGVPYnNlcnZlcnMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdG9wU2VsZWN0b3JPYnNlcnZlcnMoKSB7XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdG9yT2JzZXJ2ZXJNYXAuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0b3JPYnNlcnZlck1hcC5mb3JFYWNoKChvYnNlcnZlcikgPT4gb2JzZXJ2ZXIuc3RvcCgpKTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0b3JPYnNlcnZlck1hcC5jbGVhcigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0b3BBdHRyaWJ1dGVPYnNlcnZlcnMoKSB7XG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZU9ic2VydmVyTWFwLnNpemUgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZU9ic2VydmVyTWFwLmZvckVhY2goKG9ic2VydmVyKSA9PiBvYnNlcnZlci5zdG9wKCkpO1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVPYnNlcnZlck1hcC5jbGVhcigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbGVjdG9yTWF0Y2hlZChlbGVtZW50LCBfc2VsZWN0b3IsIHsgb3V0bGV0TmFtZSB9KSB7XG4gICAgICAgIGNvbnN0IG91dGxldCA9IHRoaXMuZ2V0T3V0bGV0KGVsZW1lbnQsIG91dGxldE5hbWUpO1xuICAgICAgICBpZiAob3V0bGV0KSB7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RPdXRsZXQob3V0bGV0LCBlbGVtZW50LCBvdXRsZXROYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZWxlY3RvclVubWF0Y2hlZChlbGVtZW50LCBfc2VsZWN0b3IsIHsgb3V0bGV0TmFtZSB9KSB7XG4gICAgICAgIGNvbnN0IG91dGxldCA9IHRoaXMuZ2V0T3V0bGV0RnJvbU1hcChlbGVtZW50LCBvdXRsZXROYW1lKTtcbiAgICAgICAgaWYgKG91dGxldCkge1xuICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0T3V0bGV0KG91dGxldCwgZWxlbWVudCwgb3V0bGV0TmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VsZWN0b3JNYXRjaEVsZW1lbnQoZWxlbWVudCwgeyBvdXRsZXROYW1lIH0pIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0b3IgPSB0aGlzLnNlbGVjdG9yKG91dGxldE5hbWUpO1xuICAgICAgICBjb25zdCBoYXNPdXRsZXQgPSB0aGlzLmhhc091dGxldChlbGVtZW50LCBvdXRsZXROYW1lKTtcbiAgICAgICAgY29uc3QgaGFzT3V0bGV0Q29udHJvbGxlciA9IGVsZW1lbnQubWF0Y2hlcyhgWyR7dGhpcy5zY2hlbWEuY29udHJvbGxlckF0dHJpYnV0ZX1+PSR7b3V0bGV0TmFtZX1dYCk7XG4gICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgcmV0dXJuIGhhc091dGxldCAmJiBoYXNPdXRsZXRDb250cm9sbGVyICYmIGVsZW1lbnQubWF0Y2hlcyhzZWxlY3Rvcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxlbWVudE1hdGNoZWRBdHRyaWJ1dGUoX2VsZW1lbnQsIGF0dHJpYnV0ZU5hbWUpIHtcbiAgICAgICAgY29uc3Qgb3V0bGV0TmFtZSA9IHRoaXMuZ2V0T3V0bGV0TmFtZUZyb21PdXRsZXRBdHRyaWJ1dGVOYW1lKGF0dHJpYnV0ZU5hbWUpO1xuICAgICAgICBpZiAob3V0bGV0TmFtZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTZWxlY3Rvck9ic2VydmVyRm9yT3V0bGV0KG91dGxldE5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsZW1lbnRBdHRyaWJ1dGVWYWx1ZUNoYW5nZWQoX2VsZW1lbnQsIGF0dHJpYnV0ZU5hbWUpIHtcbiAgICAgICAgY29uc3Qgb3V0bGV0TmFtZSA9IHRoaXMuZ2V0T3V0bGV0TmFtZUZyb21PdXRsZXRBdHRyaWJ1dGVOYW1lKGF0dHJpYnV0ZU5hbWUpO1xuICAgICAgICBpZiAob3V0bGV0TmFtZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTZWxlY3Rvck9ic2VydmVyRm9yT3V0bGV0KG91dGxldE5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsZW1lbnRVbm1hdGNoZWRBdHRyaWJ1dGUoX2VsZW1lbnQsIGF0dHJpYnV0ZU5hbWUpIHtcbiAgICAgICAgY29uc3Qgb3V0bGV0TmFtZSA9IHRoaXMuZ2V0T3V0bGV0TmFtZUZyb21PdXRsZXRBdHRyaWJ1dGVOYW1lKGF0dHJpYnV0ZU5hbWUpO1xuICAgICAgICBpZiAob3V0bGV0TmFtZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTZWxlY3Rvck9ic2VydmVyRm9yT3V0bGV0KG91dGxldE5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbm5lY3RPdXRsZXQob3V0bGV0LCBlbGVtZW50LCBvdXRsZXROYW1lKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKCF0aGlzLm91dGxldEVsZW1lbnRzQnlOYW1lLmhhcyhvdXRsZXROYW1lLCBlbGVtZW50KSkge1xuICAgICAgICAgICAgdGhpcy5vdXRsZXRzQnlOYW1lLmFkZChvdXRsZXROYW1lLCBvdXRsZXQpO1xuICAgICAgICAgICAgdGhpcy5vdXRsZXRFbGVtZW50c0J5TmFtZS5hZGQob3V0bGV0TmFtZSwgZWxlbWVudCk7XG4gICAgICAgICAgICAoX2EgPSB0aGlzLnNlbGVjdG9yT2JzZXJ2ZXJNYXAuZ2V0KG91dGxldE5hbWUpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucGF1c2UoKCkgPT4gdGhpcy5kZWxlZ2F0ZS5vdXRsZXRDb25uZWN0ZWQob3V0bGV0LCBlbGVtZW50LCBvdXRsZXROYW1lKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGlzY29ubmVjdE91dGxldChvdXRsZXQsIGVsZW1lbnQsIG91dGxldE5hbWUpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAodGhpcy5vdXRsZXRFbGVtZW50c0J5TmFtZS5oYXMob3V0bGV0TmFtZSwgZWxlbWVudCkpIHtcbiAgICAgICAgICAgIHRoaXMub3V0bGV0c0J5TmFtZS5kZWxldGUob3V0bGV0TmFtZSwgb3V0bGV0KTtcbiAgICAgICAgICAgIHRoaXMub3V0bGV0RWxlbWVudHNCeU5hbWUuZGVsZXRlKG91dGxldE5hbWUsIGVsZW1lbnQpO1xuICAgICAgICAgICAgKF9hID0gdGhpcy5zZWxlY3Rvck9ic2VydmVyTWFwXG4gICAgICAgICAgICAgICAgLmdldChvdXRsZXROYW1lKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnBhdXNlKCgpID0+IHRoaXMuZGVsZWdhdGUub3V0bGV0RGlzY29ubmVjdGVkKG91dGxldCwgZWxlbWVudCwgb3V0bGV0TmFtZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRpc2Nvbm5lY3RBbGxPdXRsZXRzKCkge1xuICAgICAgICBmb3IgKGNvbnN0IG91dGxldE5hbWUgb2YgdGhpcy5vdXRsZXRFbGVtZW50c0J5TmFtZS5rZXlzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgdGhpcy5vdXRsZXRFbGVtZW50c0J5TmFtZS5nZXRWYWx1ZXNGb3JLZXkob3V0bGV0TmFtZSkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG91dGxldCBvZiB0aGlzLm91dGxldHNCeU5hbWUuZ2V0VmFsdWVzRm9yS2V5KG91dGxldE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzY29ubmVjdE91dGxldChvdXRsZXQsIGVsZW1lbnQsIG91dGxldE5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVTZWxlY3Rvck9ic2VydmVyRm9yT3V0bGV0KG91dGxldE5hbWUpIHtcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSB0aGlzLnNlbGVjdG9yT2JzZXJ2ZXJNYXAuZ2V0KG91dGxldE5hbWUpO1xuICAgICAgICBpZiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLnNlbGVjdG9yID0gdGhpcy5zZWxlY3RvcihvdXRsZXROYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXR1cFNlbGVjdG9yT2JzZXJ2ZXJGb3JPdXRsZXQob3V0bGV0TmFtZSkge1xuICAgICAgICBjb25zdCBzZWxlY3RvciA9IHRoaXMuc2VsZWN0b3Iob3V0bGV0TmFtZSk7XG4gICAgICAgIGNvbnN0IHNlbGVjdG9yT2JzZXJ2ZXIgPSBuZXcgU2VsZWN0b3JPYnNlcnZlcihkb2N1bWVudC5ib2R5LCBzZWxlY3RvciwgdGhpcywgeyBvdXRsZXROYW1lIH0pO1xuICAgICAgICB0aGlzLnNlbGVjdG9yT2JzZXJ2ZXJNYXAuc2V0KG91dGxldE5hbWUsIHNlbGVjdG9yT2JzZXJ2ZXIpO1xuICAgICAgICBzZWxlY3Rvck9ic2VydmVyLnN0YXJ0KCk7XG4gICAgfVxuICAgIHNldHVwQXR0cmlidXRlT2JzZXJ2ZXJGb3JPdXRsZXQob3V0bGV0TmFtZSkge1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGVOYW1lID0gdGhpcy5hdHRyaWJ1dGVOYW1lRm9yT3V0bGV0TmFtZShvdXRsZXROYW1lKTtcbiAgICAgICAgY29uc3QgYXR0cmlidXRlT2JzZXJ2ZXIgPSBuZXcgQXR0cmlidXRlT2JzZXJ2ZXIodGhpcy5zY29wZS5lbGVtZW50LCBhdHRyaWJ1dGVOYW1lLCB0aGlzKTtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVPYnNlcnZlck1hcC5zZXQob3V0bGV0TmFtZSwgYXR0cmlidXRlT2JzZXJ2ZXIpO1xuICAgICAgICBhdHRyaWJ1dGVPYnNlcnZlci5zdGFydCgpO1xuICAgIH1cbiAgICBzZWxlY3RvcihvdXRsZXROYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3BlLm91dGxldHMuZ2V0U2VsZWN0b3JGb3JPdXRsZXROYW1lKG91dGxldE5hbWUpO1xuICAgIH1cbiAgICBhdHRyaWJ1dGVOYW1lRm9yT3V0bGV0TmFtZShvdXRsZXROYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3BlLnNjaGVtYS5vdXRsZXRBdHRyaWJ1dGVGb3JTY29wZSh0aGlzLmlkZW50aWZpZXIsIG91dGxldE5hbWUpO1xuICAgIH1cbiAgICBnZXRPdXRsZXROYW1lRnJvbU91dGxldEF0dHJpYnV0ZU5hbWUoYXR0cmlidXRlTmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5vdXRsZXREZWZpbml0aW9ucy5maW5kKChvdXRsZXROYW1lKSA9PiB0aGlzLmF0dHJpYnV0ZU5hbWVGb3JPdXRsZXROYW1lKG91dGxldE5hbWUpID09PSBhdHRyaWJ1dGVOYW1lKTtcbiAgICB9XG4gICAgZ2V0IG91dGxldERlcGVuZGVuY2llcygpIHtcbiAgICAgICAgY29uc3QgZGVwZW5kZW5jaWVzID0gbmV3IE11bHRpbWFwKCk7XG4gICAgICAgIHRoaXMucm91dGVyLm1vZHVsZXMuZm9yRWFjaCgobW9kdWxlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb25zdHJ1Y3RvciA9IG1vZHVsZS5kZWZpbml0aW9uLmNvbnRyb2xsZXJDb25zdHJ1Y3RvcjtcbiAgICAgICAgICAgIGNvbnN0IG91dGxldHMgPSByZWFkSW5oZXJpdGFibGVTdGF0aWNBcnJheVZhbHVlcyhjb25zdHJ1Y3RvciwgXCJvdXRsZXRzXCIpO1xuICAgICAgICAgICAgb3V0bGV0cy5mb3JFYWNoKChvdXRsZXQpID0+IGRlcGVuZGVuY2llcy5hZGQob3V0bGV0LCBtb2R1bGUuaWRlbnRpZmllcikpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRlcGVuZGVuY2llcztcbiAgICB9XG4gICAgZ2V0IG91dGxldERlZmluaXRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vdXRsZXREZXBlbmRlbmNpZXMuZ2V0S2V5c0ZvclZhbHVlKHRoaXMuaWRlbnRpZmllcik7XG4gICAgfVxuICAgIGdldCBkZXBlbmRlbnRDb250cm9sbGVySWRlbnRpZmllcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm91dGxldERlcGVuZGVuY2llcy5nZXRWYWx1ZXNGb3JLZXkodGhpcy5pZGVudGlmaWVyKTtcbiAgICB9XG4gICAgZ2V0IGRlcGVuZGVudENvbnRleHRzKCkge1xuICAgICAgICBjb25zdCBpZGVudGlmaWVycyA9IHRoaXMuZGVwZW5kZW50Q29udHJvbGxlcklkZW50aWZpZXJzO1xuICAgICAgICByZXR1cm4gdGhpcy5yb3V0ZXIuY29udGV4dHMuZmlsdGVyKChjb250ZXh0KSA9PiBpZGVudGlmaWVycy5pbmNsdWRlcyhjb250ZXh0LmlkZW50aWZpZXIpKTtcbiAgICB9XG4gICAgaGFzT3V0bGV0KGVsZW1lbnQsIG91dGxldE5hbWUpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5nZXRPdXRsZXQoZWxlbWVudCwgb3V0bGV0TmFtZSkgfHwgISF0aGlzLmdldE91dGxldEZyb21NYXAoZWxlbWVudCwgb3V0bGV0TmFtZSk7XG4gICAgfVxuICAgIGdldE91dGxldChlbGVtZW50LCBvdXRsZXROYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcGxpY2F0aW9uLmdldENvbnRyb2xsZXJGb3JFbGVtZW50QW5kSWRlbnRpZmllcihlbGVtZW50LCBvdXRsZXROYW1lKTtcbiAgICB9XG4gICAgZ2V0T3V0bGV0RnJvbU1hcChlbGVtZW50LCBvdXRsZXROYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm91dGxldHNCeU5hbWUuZ2V0VmFsdWVzRm9yS2V5KG91dGxldE5hbWUpLmZpbmQoKG91dGxldCkgPT4gb3V0bGV0LmVsZW1lbnQgPT09IGVsZW1lbnQpO1xuICAgIH1cbiAgICBnZXQgc2NvcGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQuc2NvcGU7XG4gICAgfVxuICAgIGdldCBzY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQuc2NoZW1hO1xuICAgIH1cbiAgICBnZXQgaWRlbnRpZmllcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5pZGVudGlmaWVyO1xuICAgIH1cbiAgICBnZXQgYXBwbGljYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQuYXBwbGljYXRpb247XG4gICAgfVxuICAgIGdldCByb3V0ZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcGxpY2F0aW9uLnJvdXRlcjtcbiAgICB9XG59XG5cbmNsYXNzIENvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKG1vZHVsZSwgc2NvcGUpIHtcbiAgICAgICAgdGhpcy5sb2dEZWJ1Z0FjdGl2aXR5ID0gKGZ1bmN0aW9uTmFtZSwgZGV0YWlsID0ge30pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgaWRlbnRpZmllciwgY29udHJvbGxlciwgZWxlbWVudCB9ID0gdGhpcztcbiAgICAgICAgICAgIGRldGFpbCA9IE9iamVjdC5hc3NpZ24oeyBpZGVudGlmaWVyLCBjb250cm9sbGVyLCBlbGVtZW50IH0sIGRldGFpbCk7XG4gICAgICAgICAgICB0aGlzLmFwcGxpY2F0aW9uLmxvZ0RlYnVnQWN0aXZpdHkodGhpcy5pZGVudGlmaWVyLCBmdW5jdGlvbk5hbWUsIGRldGFpbCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubW9kdWxlID0gbW9kdWxlO1xuICAgICAgICB0aGlzLnNjb3BlID0gc2NvcGU7XG4gICAgICAgIHRoaXMuY29udHJvbGxlciA9IG5ldyBtb2R1bGUuY29udHJvbGxlckNvbnN0cnVjdG9yKHRoaXMpO1xuICAgICAgICB0aGlzLmJpbmRpbmdPYnNlcnZlciA9IG5ldyBCaW5kaW5nT2JzZXJ2ZXIodGhpcywgdGhpcy5kaXNwYXRjaGVyKTtcbiAgICAgICAgdGhpcy52YWx1ZU9ic2VydmVyID0gbmV3IFZhbHVlT2JzZXJ2ZXIodGhpcywgdGhpcy5jb250cm9sbGVyKTtcbiAgICAgICAgdGhpcy50YXJnZXRPYnNlcnZlciA9IG5ldyBUYXJnZXRPYnNlcnZlcih0aGlzLCB0aGlzKTtcbiAgICAgICAgdGhpcy5vdXRsZXRPYnNlcnZlciA9IG5ldyBPdXRsZXRPYnNlcnZlcih0aGlzLCB0aGlzKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5pbml0aWFsaXplKCk7XG4gICAgICAgICAgICB0aGlzLmxvZ0RlYnVnQWN0aXZpdHkoXCJpbml0aWFsaXplXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgXCJpbml0aWFsaXppbmcgY29udHJvbGxlclwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25uZWN0KCkge1xuICAgICAgICB0aGlzLmJpbmRpbmdPYnNlcnZlci5zdGFydCgpO1xuICAgICAgICB0aGlzLnZhbHVlT2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICAgICAgdGhpcy50YXJnZXRPYnNlcnZlci5zdGFydCgpO1xuICAgICAgICB0aGlzLm91dGxldE9ic2VydmVyLnN0YXJ0KCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIuY29ubmVjdCgpO1xuICAgICAgICAgICAgdGhpcy5sb2dEZWJ1Z0FjdGl2aXR5KFwiY29ubmVjdFwiKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIFwiY29ubmVjdGluZyBjb250cm9sbGVyXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlZnJlc2goKSB7XG4gICAgICAgIHRoaXMub3V0bGV0T2JzZXJ2ZXIucmVmcmVzaCgpO1xuICAgIH1cbiAgICBkaXNjb25uZWN0KCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIHRoaXMubG9nRGVidWdBY3Rpdml0eShcImRpc2Nvbm5lY3RcIik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBcImRpc2Nvbm5lY3RpbmcgY29udHJvbGxlclwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm91dGxldE9ic2VydmVyLnN0b3AoKTtcbiAgICAgICAgdGhpcy50YXJnZXRPYnNlcnZlci5zdG9wKCk7XG4gICAgICAgIHRoaXMudmFsdWVPYnNlcnZlci5zdG9wKCk7XG4gICAgICAgIHRoaXMuYmluZGluZ09ic2VydmVyLnN0b3AoKTtcbiAgICB9XG4gICAgZ2V0IGFwcGxpY2F0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tb2R1bGUuYXBwbGljYXRpb247XG4gICAgfVxuICAgIGdldCBpZGVudGlmaWVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tb2R1bGUuaWRlbnRpZmllcjtcbiAgICB9XG4gICAgZ2V0IHNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbGljYXRpb24uc2NoZW1hO1xuICAgIH1cbiAgICBnZXQgZGlzcGF0Y2hlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbGljYXRpb24uZGlzcGF0Y2hlcjtcbiAgICB9XG4gICAgZ2V0IGVsZW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3BlLmVsZW1lbnQ7XG4gICAgfVxuICAgIGdldCBwYXJlbnRFbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgfVxuICAgIGhhbmRsZUVycm9yKGVycm9yLCBtZXNzYWdlLCBkZXRhaWwgPSB7fSkge1xuICAgICAgICBjb25zdCB7IGlkZW50aWZpZXIsIGNvbnRyb2xsZXIsIGVsZW1lbnQgfSA9IHRoaXM7XG4gICAgICAgIGRldGFpbCA9IE9iamVjdC5hc3NpZ24oeyBpZGVudGlmaWVyLCBjb250cm9sbGVyLCBlbGVtZW50IH0sIGRldGFpbCk7XG4gICAgICAgIHRoaXMuYXBwbGljYXRpb24uaGFuZGxlRXJyb3IoZXJyb3IsIGBFcnJvciAke21lc3NhZ2V9YCwgZGV0YWlsKTtcbiAgICB9XG4gICAgdGFyZ2V0Q29ubmVjdGVkKGVsZW1lbnQsIG5hbWUpIHtcbiAgICAgICAgdGhpcy5pbnZva2VDb250cm9sbGVyTWV0aG9kKGAke25hbWV9VGFyZ2V0Q29ubmVjdGVkYCwgZWxlbWVudCk7XG4gICAgfVxuICAgIHRhcmdldERpc2Nvbm5lY3RlZChlbGVtZW50LCBuYW1lKSB7XG4gICAgICAgIHRoaXMuaW52b2tlQ29udHJvbGxlck1ldGhvZChgJHtuYW1lfVRhcmdldERpc2Nvbm5lY3RlZGAsIGVsZW1lbnQpO1xuICAgIH1cbiAgICBvdXRsZXRDb25uZWN0ZWQob3V0bGV0LCBlbGVtZW50LCBuYW1lKSB7XG4gICAgICAgIHRoaXMuaW52b2tlQ29udHJvbGxlck1ldGhvZChgJHtuYW1lc3BhY2VDYW1lbGl6ZShuYW1lKX1PdXRsZXRDb25uZWN0ZWRgLCBvdXRsZXQsIGVsZW1lbnQpO1xuICAgIH1cbiAgICBvdXRsZXREaXNjb25uZWN0ZWQob3V0bGV0LCBlbGVtZW50LCBuYW1lKSB7XG4gICAgICAgIHRoaXMuaW52b2tlQ29udHJvbGxlck1ldGhvZChgJHtuYW1lc3BhY2VDYW1lbGl6ZShuYW1lKX1PdXRsZXREaXNjb25uZWN0ZWRgLCBvdXRsZXQsIGVsZW1lbnQpO1xuICAgIH1cbiAgICBpbnZva2VDb250cm9sbGVyTWV0aG9kKG1ldGhvZE5hbWUsIC4uLmFyZ3MpIHtcbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IHRoaXMuY29udHJvbGxlcjtcbiAgICAgICAgaWYgKHR5cGVvZiBjb250cm9sbGVyW21ldGhvZE5hbWVdID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgY29udHJvbGxlclttZXRob2ROYW1lXSguLi5hcmdzKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gYmxlc3MoY29uc3RydWN0b3IpIHtcbiAgICByZXR1cm4gc2hhZG93KGNvbnN0cnVjdG9yLCBnZXRCbGVzc2VkUHJvcGVydGllcyhjb25zdHJ1Y3RvcikpO1xufVxuZnVuY3Rpb24gc2hhZG93KGNvbnN0cnVjdG9yLCBwcm9wZXJ0aWVzKSB7XG4gICAgY29uc3Qgc2hhZG93Q29uc3RydWN0b3IgPSBleHRlbmQoY29uc3RydWN0b3IpO1xuICAgIGNvbnN0IHNoYWRvd1Byb3BlcnRpZXMgPSBnZXRTaGFkb3dQcm9wZXJ0aWVzKGNvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvcGVydGllcyk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoc2hhZG93Q29uc3RydWN0b3IucHJvdG90eXBlLCBzaGFkb3dQcm9wZXJ0aWVzKTtcbiAgICByZXR1cm4gc2hhZG93Q29uc3RydWN0b3I7XG59XG5mdW5jdGlvbiBnZXRCbGVzc2VkUHJvcGVydGllcyhjb25zdHJ1Y3Rvcikge1xuICAgIGNvbnN0IGJsZXNzaW5ncyA9IHJlYWRJbmhlcml0YWJsZVN0YXRpY0FycmF5VmFsdWVzKGNvbnN0cnVjdG9yLCBcImJsZXNzaW5nc1wiKTtcbiAgICByZXR1cm4gYmxlc3NpbmdzLnJlZHVjZSgoYmxlc3NlZFByb3BlcnRpZXMsIGJsZXNzaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSBibGVzc2luZyhjb25zdHJ1Y3Rvcik7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSBibGVzc2VkUHJvcGVydGllc1trZXldIHx8IHt9O1xuICAgICAgICAgICAgYmxlc3NlZFByb3BlcnRpZXNba2V5XSA9IE9iamVjdC5hc3NpZ24oZGVzY3JpcHRvciwgcHJvcGVydGllc1trZXldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYmxlc3NlZFByb3BlcnRpZXM7XG4gICAgfSwge30pO1xufVxuZnVuY3Rpb24gZ2V0U2hhZG93UHJvcGVydGllcyhwcm90b3R5cGUsIHByb3BlcnRpZXMpIHtcbiAgICByZXR1cm4gZ2V0T3duS2V5cyhwcm9wZXJ0aWVzKS5yZWR1Y2UoKHNoYWRvd1Byb3BlcnRpZXMsIGtleSkgPT4ge1xuICAgICAgICBjb25zdCBkZXNjcmlwdG9yID0gZ2V0U2hhZG93ZWREZXNjcmlwdG9yKHByb3RvdHlwZSwgcHJvcGVydGllcywga2V5KTtcbiAgICAgICAgaWYgKGRlc2NyaXB0b3IpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oc2hhZG93UHJvcGVydGllcywgeyBba2V5XTogZGVzY3JpcHRvciB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2hhZG93UHJvcGVydGllcztcbiAgICB9LCB7fSk7XG59XG5mdW5jdGlvbiBnZXRTaGFkb3dlZERlc2NyaXB0b3IocHJvdG90eXBlLCBwcm9wZXJ0aWVzLCBrZXkpIHtcbiAgICBjb25zdCBzaGFkb3dpbmdEZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihwcm90b3R5cGUsIGtleSk7XG4gICAgY29uc3Qgc2hhZG93ZWRCeVZhbHVlID0gc2hhZG93aW5nRGVzY3JpcHRvciAmJiBcInZhbHVlXCIgaW4gc2hhZG93aW5nRGVzY3JpcHRvcjtcbiAgICBpZiAoIXNoYWRvd2VkQnlWYWx1ZSkge1xuICAgICAgICBjb25zdCBkZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihwcm9wZXJ0aWVzLCBrZXkpLnZhbHVlO1xuICAgICAgICBpZiAoc2hhZG93aW5nRGVzY3JpcHRvcikge1xuICAgICAgICAgICAgZGVzY3JpcHRvci5nZXQgPSBzaGFkb3dpbmdEZXNjcmlwdG9yLmdldCB8fCBkZXNjcmlwdG9yLmdldDtcbiAgICAgICAgICAgIGRlc2NyaXB0b3Iuc2V0ID0gc2hhZG93aW5nRGVzY3JpcHRvci5zZXQgfHwgZGVzY3JpcHRvci5zZXQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlc2NyaXB0b3I7XG4gICAgfVxufVxuY29uc3QgZ2V0T3duS2V5cyA9ICgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gKG9iamVjdCkgPT4gWy4uLk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iamVjdCksIC4uLk9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KV07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7XG4gICAgfVxufSkoKTtcbmNvbnN0IGV4dGVuZCA9ICgoKSA9PiB7XG4gICAgZnVuY3Rpb24gZXh0ZW5kV2l0aFJlZmxlY3QoY29uc3RydWN0b3IpIHtcbiAgICAgICAgZnVuY3Rpb24gZXh0ZW5kZWQoKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5jb25zdHJ1Y3QoY29uc3RydWN0b3IsIGFyZ3VtZW50cywgbmV3LnRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgICAgZXh0ZW5kZWQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShjb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBleHRlbmRlZCB9LFxuICAgICAgICB9KTtcbiAgICAgICAgUmVmbGVjdC5zZXRQcm90b3R5cGVPZihleHRlbmRlZCwgY29uc3RydWN0b3IpO1xuICAgICAgICByZXR1cm4gZXh0ZW5kZWQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRlc3RSZWZsZWN0RXh0ZW5zaW9uKCkge1xuICAgICAgICBjb25zdCBhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5hLmNhbGwodGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGIgPSBleHRlbmRXaXRoUmVmbGVjdChhKTtcbiAgICAgICAgYi5wcm90b3R5cGUuYSA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICAgICAgcmV0dXJuIG5ldyBiKCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIHRlc3RSZWZsZWN0RXh0ZW5zaW9uKCk7XG4gICAgICAgIHJldHVybiBleHRlbmRXaXRoUmVmbGVjdDtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHVybiAoY29uc3RydWN0b3IpID0+IGNsYXNzIGV4dGVuZGVkIGV4dGVuZHMgY29uc3RydWN0b3Ige1xuICAgICAgICB9O1xuICAgIH1cbn0pKCk7XG5cbmZ1bmN0aW9uIGJsZXNzRGVmaW5pdGlvbihkZWZpbml0aW9uKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaWRlbnRpZmllcjogZGVmaW5pdGlvbi5pZGVudGlmaWVyLFxuICAgICAgICBjb250cm9sbGVyQ29uc3RydWN0b3I6IGJsZXNzKGRlZmluaXRpb24uY29udHJvbGxlckNvbnN0cnVjdG9yKSxcbiAgICB9O1xufVxuXG5jbGFzcyBNb2R1bGUge1xuICAgIGNvbnN0cnVjdG9yKGFwcGxpY2F0aW9uLCBkZWZpbml0aW9uKSB7XG4gICAgICAgIHRoaXMuYXBwbGljYXRpb24gPSBhcHBsaWNhdGlvbjtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9uID0gYmxlc3NEZWZpbml0aW9uKGRlZmluaXRpb24pO1xuICAgICAgICB0aGlzLmNvbnRleHRzQnlTY29wZSA9IG5ldyBXZWFrTWFwKCk7XG4gICAgICAgIHRoaXMuY29ubmVjdGVkQ29udGV4dHMgPSBuZXcgU2V0KCk7XG4gICAgfVxuICAgIGdldCBpZGVudGlmaWVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZWZpbml0aW9uLmlkZW50aWZpZXI7XG4gICAgfVxuICAgIGdldCBjb250cm9sbGVyQ29uc3RydWN0b3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlZmluaXRpb24uY29udHJvbGxlckNvbnN0cnVjdG9yO1xuICAgIH1cbiAgICBnZXQgY29udGV4dHMoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuY29ubmVjdGVkQ29udGV4dHMpO1xuICAgIH1cbiAgICBjb25uZWN0Q29udGV4dEZvclNjb3BlKHNjb3BlKSB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLmZldGNoQ29udGV4dEZvclNjb3BlKHNjb3BlKTtcbiAgICAgICAgdGhpcy5jb25uZWN0ZWRDb250ZXh0cy5hZGQoY29udGV4dCk7XG4gICAgICAgIGNvbnRleHQuY29ubmVjdCgpO1xuICAgIH1cbiAgICBkaXNjb25uZWN0Q29udGV4dEZvclNjb3BlKHNjb3BlKSB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLmNvbnRleHRzQnlTY29wZS5nZXQoc2NvcGUpO1xuICAgICAgICBpZiAoY29udGV4dCkge1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0ZWRDb250ZXh0cy5kZWxldGUoY29udGV4dCk7XG4gICAgICAgICAgICBjb250ZXh0LmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmZXRjaENvbnRleHRGb3JTY29wZShzY29wZSkge1xuICAgICAgICBsZXQgY29udGV4dCA9IHRoaXMuY29udGV4dHNCeVNjb3BlLmdldChzY29wZSk7XG4gICAgICAgIGlmICghY29udGV4dCkge1xuICAgICAgICAgICAgY29udGV4dCA9IG5ldyBDb250ZXh0KHRoaXMsIHNjb3BlKTtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dHNCeVNjb3BlLnNldChzY29wZSwgY29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRleHQ7XG4gICAgfVxufVxuXG5jbGFzcyBDbGFzc01hcCB7XG4gICAgY29uc3RydWN0b3Ioc2NvcGUpIHtcbiAgICAgICAgdGhpcy5zY29wZSA9IHNjb3BlO1xuICAgIH1cbiAgICBoYXMobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmhhcyh0aGlzLmdldERhdGFLZXkobmFtZSkpO1xuICAgIH1cbiAgICBnZXQobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRBbGwobmFtZSlbMF07XG4gICAgfVxuICAgIGdldEFsbChuYW1lKSB7XG4gICAgICAgIGNvbnN0IHRva2VuU3RyaW5nID0gdGhpcy5kYXRhLmdldCh0aGlzLmdldERhdGFLZXkobmFtZSkpIHx8IFwiXCI7XG4gICAgICAgIHJldHVybiB0b2tlbml6ZSh0b2tlblN0cmluZyk7XG4gICAgfVxuICAgIGdldEF0dHJpYnV0ZU5hbWUobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmdldEF0dHJpYnV0ZU5hbWVGb3JLZXkodGhpcy5nZXREYXRhS2V5KG5hbWUpKTtcbiAgICB9XG4gICAgZ2V0RGF0YUtleShuYW1lKSB7XG4gICAgICAgIHJldHVybiBgJHtuYW1lfS1jbGFzc2A7XG4gICAgfVxuICAgIGdldCBkYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY29wZS5kYXRhO1xuICAgIH1cbn1cblxuY2xhc3MgRGF0YU1hcCB7XG4gICAgY29uc3RydWN0b3Ioc2NvcGUpIHtcbiAgICAgICAgdGhpcy5zY29wZSA9IHNjb3BlO1xuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGUuZWxlbWVudDtcbiAgICB9XG4gICAgZ2V0IGlkZW50aWZpZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3BlLmlkZW50aWZpZXI7XG4gICAgfVxuICAgIGdldChrZXkpIHtcbiAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMuZ2V0QXR0cmlidXRlTmFtZUZvcktleShrZXkpO1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShuYW1lKTtcbiAgICB9XG4gICAgc2V0KGtleSwgdmFsdWUpIHtcbiAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMuZ2V0QXR0cmlidXRlTmFtZUZvcktleShrZXkpO1xuICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KGtleSk7XG4gICAgfVxuICAgIGhhcyhrZXkpIHtcbiAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMuZ2V0QXR0cmlidXRlTmFtZUZvcktleShrZXkpO1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50Lmhhc0F0dHJpYnV0ZShuYW1lKTtcbiAgICB9XG4gICAgZGVsZXRlKGtleSkge1xuICAgICAgICBpZiAodGhpcy5oYXMoa2V5KSkge1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMuZ2V0QXR0cmlidXRlTmFtZUZvcktleShrZXkpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldEF0dHJpYnV0ZU5hbWVGb3JLZXkoa2V5KSB7XG4gICAgICAgIHJldHVybiBgZGF0YS0ke3RoaXMuaWRlbnRpZmllcn0tJHtkYXNoZXJpemUoa2V5KX1gO1xuICAgIH1cbn1cblxuY2xhc3MgR3VpZGUge1xuICAgIGNvbnN0cnVjdG9yKGxvZ2dlcikge1xuICAgICAgICB0aGlzLndhcm5lZEtleXNCeU9iamVjdCA9IG5ldyBXZWFrTWFwKCk7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyO1xuICAgIH1cbiAgICB3YXJuKG9iamVjdCwga2V5LCBtZXNzYWdlKSB7XG4gICAgICAgIGxldCB3YXJuZWRLZXlzID0gdGhpcy53YXJuZWRLZXlzQnlPYmplY3QuZ2V0KG9iamVjdCk7XG4gICAgICAgIGlmICghd2FybmVkS2V5cykge1xuICAgICAgICAgICAgd2FybmVkS2V5cyA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgIHRoaXMud2FybmVkS2V5c0J5T2JqZWN0LnNldChvYmplY3QsIHdhcm5lZEtleXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghd2FybmVkS2V5cy5oYXMoa2V5KSkge1xuICAgICAgICAgICAgd2FybmVkS2V5cy5hZGQoa2V5KTtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4obWVzc2FnZSwgb2JqZWN0KTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gYXR0cmlidXRlVmFsdWVDb250YWluc1Rva2VuKGF0dHJpYnV0ZU5hbWUsIHRva2VuKSB7XG4gICAgcmV0dXJuIGBbJHthdHRyaWJ1dGVOYW1lfX49XCIke3Rva2VufVwiXWA7XG59XG5cbmNsYXNzIFRhcmdldFNldCB7XG4gICAgY29uc3RydWN0b3Ioc2NvcGUpIHtcbiAgICAgICAgdGhpcy5zY29wZSA9IHNjb3BlO1xuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGUuZWxlbWVudDtcbiAgICB9XG4gICAgZ2V0IGlkZW50aWZpZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3BlLmlkZW50aWZpZXI7XG4gICAgfVxuICAgIGdldCBzY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3BlLnNjaGVtYTtcbiAgICB9XG4gICAgaGFzKHRhcmdldE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZCh0YXJnZXROYW1lKSAhPSBudWxsO1xuICAgIH1cbiAgICBmaW5kKC4uLnRhcmdldE5hbWVzKSB7XG4gICAgICAgIHJldHVybiB0YXJnZXROYW1lcy5yZWR1Y2UoKHRhcmdldCwgdGFyZ2V0TmFtZSkgPT4gdGFyZ2V0IHx8IHRoaXMuZmluZFRhcmdldCh0YXJnZXROYW1lKSB8fCB0aGlzLmZpbmRMZWdhY3lUYXJnZXQodGFyZ2V0TmFtZSksIHVuZGVmaW5lZCk7XG4gICAgfVxuICAgIGZpbmRBbGwoLi4udGFyZ2V0TmFtZXMpIHtcbiAgICAgICAgcmV0dXJuIHRhcmdldE5hbWVzLnJlZHVjZSgodGFyZ2V0cywgdGFyZ2V0TmFtZSkgPT4gW1xuICAgICAgICAgICAgLi4udGFyZ2V0cyxcbiAgICAgICAgICAgIC4uLnRoaXMuZmluZEFsbFRhcmdldHModGFyZ2V0TmFtZSksXG4gICAgICAgICAgICAuLi50aGlzLmZpbmRBbGxMZWdhY3lUYXJnZXRzKHRhcmdldE5hbWUpLFxuICAgICAgICBdLCBbXSk7XG4gICAgfVxuICAgIGZpbmRUYXJnZXQodGFyZ2V0TmFtZSkge1xuICAgICAgICBjb25zdCBzZWxlY3RvciA9IHRoaXMuZ2V0U2VsZWN0b3JGb3JUYXJnZXROYW1lKHRhcmdldE5hbWUpO1xuICAgICAgICByZXR1cm4gdGhpcy5zY29wZS5maW5kRWxlbWVudChzZWxlY3Rvcik7XG4gICAgfVxuICAgIGZpbmRBbGxUYXJnZXRzKHRhcmdldE5hbWUpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0b3IgPSB0aGlzLmdldFNlbGVjdG9yRm9yVGFyZ2V0TmFtZSh0YXJnZXROYW1lKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGUuZmluZEFsbEVsZW1lbnRzKHNlbGVjdG9yKTtcbiAgICB9XG4gICAgZ2V0U2VsZWN0b3JGb3JUYXJnZXROYW1lKHRhcmdldE5hbWUpIHtcbiAgICAgICAgY29uc3QgYXR0cmlidXRlTmFtZSA9IHRoaXMuc2NoZW1hLnRhcmdldEF0dHJpYnV0ZUZvclNjb3BlKHRoaXMuaWRlbnRpZmllcik7XG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGVWYWx1ZUNvbnRhaW5zVG9rZW4oYXR0cmlidXRlTmFtZSwgdGFyZ2V0TmFtZSk7XG4gICAgfVxuICAgIGZpbmRMZWdhY3lUYXJnZXQodGFyZ2V0TmFtZSkge1xuICAgICAgICBjb25zdCBzZWxlY3RvciA9IHRoaXMuZ2V0TGVnYWN5U2VsZWN0b3JGb3JUYXJnZXROYW1lKHRhcmdldE5hbWUpO1xuICAgICAgICByZXR1cm4gdGhpcy5kZXByZWNhdGUodGhpcy5zY29wZS5maW5kRWxlbWVudChzZWxlY3RvciksIHRhcmdldE5hbWUpO1xuICAgIH1cbiAgICBmaW5kQWxsTGVnYWN5VGFyZ2V0cyh0YXJnZXROYW1lKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdG9yID0gdGhpcy5nZXRMZWdhY3lTZWxlY3RvckZvclRhcmdldE5hbWUodGFyZ2V0TmFtZSk7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3BlLmZpbmRBbGxFbGVtZW50cyhzZWxlY3RvcikubWFwKChlbGVtZW50KSA9PiB0aGlzLmRlcHJlY2F0ZShlbGVtZW50LCB0YXJnZXROYW1lKSk7XG4gICAgfVxuICAgIGdldExlZ2FjeVNlbGVjdG9yRm9yVGFyZ2V0TmFtZSh0YXJnZXROYW1lKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldERlc2NyaXB0b3IgPSBgJHt0aGlzLmlkZW50aWZpZXJ9LiR7dGFyZ2V0TmFtZX1gO1xuICAgICAgICByZXR1cm4gYXR0cmlidXRlVmFsdWVDb250YWluc1Rva2VuKHRoaXMuc2NoZW1hLnRhcmdldEF0dHJpYnV0ZSwgdGFyZ2V0RGVzY3JpcHRvcik7XG4gICAgfVxuICAgIGRlcHJlY2F0ZShlbGVtZW50LCB0YXJnZXROYW1lKSB7XG4gICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgICBjb25zdCB7IGlkZW50aWZpZXIgfSA9IHRoaXM7XG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVOYW1lID0gdGhpcy5zY2hlbWEudGFyZ2V0QXR0cmlidXRlO1xuICAgICAgICAgICAgY29uc3QgcmV2aXNlZEF0dHJpYnV0ZU5hbWUgPSB0aGlzLnNjaGVtYS50YXJnZXRBdHRyaWJ1dGVGb3JTY29wZShpZGVudGlmaWVyKTtcbiAgICAgICAgICAgIHRoaXMuZ3VpZGUud2FybihlbGVtZW50LCBgdGFyZ2V0OiR7dGFyZ2V0TmFtZX1gLCBgUGxlYXNlIHJlcGxhY2UgJHthdHRyaWJ1dGVOYW1lfT1cIiR7aWRlbnRpZmllcn0uJHt0YXJnZXROYW1lfVwiIHdpdGggJHtyZXZpc2VkQXR0cmlidXRlTmFtZX09XCIke3RhcmdldE5hbWV9XCIuIGAgK1xuICAgICAgICAgICAgICAgIGBUaGUgJHthdHRyaWJ1dGVOYW1lfSBhdHRyaWJ1dGUgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHZlcnNpb24gb2YgU3RpbXVsdXMuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfVxuICAgIGdldCBndWlkZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGUuZ3VpZGU7XG4gICAgfVxufVxuXG5jbGFzcyBPdXRsZXRTZXQge1xuICAgIGNvbnN0cnVjdG9yKHNjb3BlLCBjb250cm9sbGVyRWxlbWVudCkge1xuICAgICAgICB0aGlzLnNjb3BlID0gc2NvcGU7XG4gICAgICAgIHRoaXMuY29udHJvbGxlckVsZW1lbnQgPSBjb250cm9sbGVyRWxlbWVudDtcbiAgICB9XG4gICAgZ2V0IGVsZW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3BlLmVsZW1lbnQ7XG4gICAgfVxuICAgIGdldCBpZGVudGlmaWVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY29wZS5pZGVudGlmaWVyO1xuICAgIH1cbiAgICBnZXQgc2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY29wZS5zY2hlbWE7XG4gICAgfVxuICAgIGhhcyhvdXRsZXROYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmQob3V0bGV0TmFtZSkgIT0gbnVsbDtcbiAgICB9XG4gICAgZmluZCguLi5vdXRsZXROYW1lcykge1xuICAgICAgICByZXR1cm4gb3V0bGV0TmFtZXMucmVkdWNlKChvdXRsZXQsIG91dGxldE5hbWUpID0+IG91dGxldCB8fCB0aGlzLmZpbmRPdXRsZXQob3V0bGV0TmFtZSksIHVuZGVmaW5lZCk7XG4gICAgfVxuICAgIGZpbmRBbGwoLi4ub3V0bGV0TmFtZXMpIHtcbiAgICAgICAgcmV0dXJuIG91dGxldE5hbWVzLnJlZHVjZSgob3V0bGV0cywgb3V0bGV0TmFtZSkgPT4gWy4uLm91dGxldHMsIC4uLnRoaXMuZmluZEFsbE91dGxldHMob3V0bGV0TmFtZSldLCBbXSk7XG4gICAgfVxuICAgIGdldFNlbGVjdG9yRm9yT3V0bGV0TmFtZShvdXRsZXROYW1lKSB7XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZU5hbWUgPSB0aGlzLnNjaGVtYS5vdXRsZXRBdHRyaWJ1dGVGb3JTY29wZSh0aGlzLmlkZW50aWZpZXIsIG91dGxldE5hbWUpO1xuICAgICAgICByZXR1cm4gdGhpcy5jb250cm9sbGVyRWxlbWVudC5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSk7XG4gICAgfVxuICAgIGZpbmRPdXRsZXQob3V0bGV0TmFtZSkge1xuICAgICAgICBjb25zdCBzZWxlY3RvciA9IHRoaXMuZ2V0U2VsZWN0b3JGb3JPdXRsZXROYW1lKG91dGxldE5hbWUpO1xuICAgICAgICBpZiAoc2VsZWN0b3IpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maW5kRWxlbWVudChzZWxlY3Rvciwgb3V0bGV0TmFtZSk7XG4gICAgfVxuICAgIGZpbmRBbGxPdXRsZXRzKG91dGxldE5hbWUpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0b3IgPSB0aGlzLmdldFNlbGVjdG9yRm9yT3V0bGV0TmFtZShvdXRsZXROYW1lKTtcbiAgICAgICAgcmV0dXJuIHNlbGVjdG9yID8gdGhpcy5maW5kQWxsRWxlbWVudHMoc2VsZWN0b3IsIG91dGxldE5hbWUpIDogW107XG4gICAgfVxuICAgIGZpbmRFbGVtZW50KHNlbGVjdG9yLCBvdXRsZXROYW1lKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gdGhpcy5zY29wZS5xdWVyeUVsZW1lbnRzKHNlbGVjdG9yKTtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnRzLmZpbHRlcigoZWxlbWVudCkgPT4gdGhpcy5tYXRjaGVzRWxlbWVudChlbGVtZW50LCBzZWxlY3Rvciwgb3V0bGV0TmFtZSkpWzBdO1xuICAgIH1cbiAgICBmaW5kQWxsRWxlbWVudHMoc2VsZWN0b3IsIG91dGxldE5hbWUpIHtcbiAgICAgICAgY29uc3QgZWxlbWVudHMgPSB0aGlzLnNjb3BlLnF1ZXJ5RWxlbWVudHMoc2VsZWN0b3IpO1xuICAgICAgICByZXR1cm4gZWxlbWVudHMuZmlsdGVyKChlbGVtZW50KSA9PiB0aGlzLm1hdGNoZXNFbGVtZW50KGVsZW1lbnQsIHNlbGVjdG9yLCBvdXRsZXROYW1lKSk7XG4gICAgfVxuICAgIG1hdGNoZXNFbGVtZW50KGVsZW1lbnQsIHNlbGVjdG9yLCBvdXRsZXROYW1lKSB7XG4gICAgICAgIGNvbnN0IGNvbnRyb2xsZXJBdHRyaWJ1dGUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSh0aGlzLnNjb3BlLnNjaGVtYS5jb250cm9sbGVyQXR0cmlidXRlKSB8fCBcIlwiO1xuICAgICAgICByZXR1cm4gZWxlbWVudC5tYXRjaGVzKHNlbGVjdG9yKSAmJiBjb250cm9sbGVyQXR0cmlidXRlLnNwbGl0KFwiIFwiKS5pbmNsdWRlcyhvdXRsZXROYW1lKTtcbiAgICB9XG59XG5cbmNsYXNzIFNjb3BlIHtcbiAgICBjb25zdHJ1Y3RvcihzY2hlbWEsIGVsZW1lbnQsIGlkZW50aWZpZXIsIGxvZ2dlcikge1xuICAgICAgICB0aGlzLnRhcmdldHMgPSBuZXcgVGFyZ2V0U2V0KHRoaXMpO1xuICAgICAgICB0aGlzLmNsYXNzZXMgPSBuZXcgQ2xhc3NNYXAodGhpcyk7XG4gICAgICAgIHRoaXMuZGF0YSA9IG5ldyBEYXRhTWFwKHRoaXMpO1xuICAgICAgICB0aGlzLmNvbnRhaW5zRWxlbWVudCA9IChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5jbG9zZXN0KHRoaXMuY29udHJvbGxlclNlbGVjdG9yKSA9PT0gdGhpcy5lbGVtZW50O1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNjaGVtYSA9IHNjaGVtYTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5pZGVudGlmaWVyID0gaWRlbnRpZmllcjtcbiAgICAgICAgdGhpcy5ndWlkZSA9IG5ldyBHdWlkZShsb2dnZXIpO1xuICAgICAgICB0aGlzLm91dGxldHMgPSBuZXcgT3V0bGV0U2V0KHRoaXMuZG9jdW1lbnRTY29wZSwgZWxlbWVudCk7XG4gICAgfVxuICAgIGZpbmRFbGVtZW50KHNlbGVjdG9yKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQubWF0Y2hlcyhzZWxlY3RvcikgPyB0aGlzLmVsZW1lbnQgOiB0aGlzLnF1ZXJ5RWxlbWVudHMoc2VsZWN0b3IpLmZpbmQodGhpcy5jb250YWluc0VsZW1lbnQpO1xuICAgIH1cbiAgICBmaW5kQWxsRWxlbWVudHMoc2VsZWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIC4uLih0aGlzLmVsZW1lbnQubWF0Y2hlcyhzZWxlY3RvcikgPyBbdGhpcy5lbGVtZW50XSA6IFtdKSxcbiAgICAgICAgICAgIC4uLnRoaXMucXVlcnlFbGVtZW50cyhzZWxlY3RvcikuZmlsdGVyKHRoaXMuY29udGFpbnNFbGVtZW50KSxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgcXVlcnlFbGVtZW50cyhzZWxlY3Rvcikge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xuICAgIH1cbiAgICBnZXQgY29udHJvbGxlclNlbGVjdG9yKCkge1xuICAgICAgICByZXR1cm4gYXR0cmlidXRlVmFsdWVDb250YWluc1Rva2VuKHRoaXMuc2NoZW1hLmNvbnRyb2xsZXJBdHRyaWJ1dGUsIHRoaXMuaWRlbnRpZmllcik7XG4gICAgfVxuICAgIGdldCBpc0RvY3VtZW50U2NvcGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQgPT09IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICB9XG4gICAgZ2V0IGRvY3VtZW50U2NvcGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzRG9jdW1lbnRTY29wZVxuICAgICAgICAgICAgPyB0aGlzXG4gICAgICAgICAgICA6IG5ldyBTY29wZSh0aGlzLnNjaGVtYSwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCB0aGlzLmlkZW50aWZpZXIsIHRoaXMuZ3VpZGUubG9nZ2VyKTtcbiAgICB9XG59XG5cbmNsYXNzIFNjb3BlT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIHNjaGVtYSwgZGVsZWdhdGUpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5zY2hlbWEgPSBzY2hlbWE7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICAgICAgdGhpcy52YWx1ZUxpc3RPYnNlcnZlciA9IG5ldyBWYWx1ZUxpc3RPYnNlcnZlcih0aGlzLmVsZW1lbnQsIHRoaXMuY29udHJvbGxlckF0dHJpYnV0ZSwgdGhpcyk7XG4gICAgICAgIHRoaXMuc2NvcGVzQnlJZGVudGlmaWVyQnlFbGVtZW50ID0gbmV3IFdlYWtNYXAoKTtcbiAgICAgICAgdGhpcy5zY29wZVJlZmVyZW5jZUNvdW50cyA9IG5ldyBXZWFrTWFwKCk7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLnZhbHVlTGlzdE9ic2VydmVyLnN0YXJ0KCk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMudmFsdWVMaXN0T2JzZXJ2ZXIuc3RvcCgpO1xuICAgIH1cbiAgICBnZXQgY29udHJvbGxlckF0dHJpYnV0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NoZW1hLmNvbnRyb2xsZXJBdHRyaWJ1dGU7XG4gICAgfVxuICAgIHBhcnNlVmFsdWVGb3JUb2tlbih0b2tlbikge1xuICAgICAgICBjb25zdCB7IGVsZW1lbnQsIGNvbnRlbnQ6IGlkZW50aWZpZXIgfSA9IHRva2VuO1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZVZhbHVlRm9yRWxlbWVudEFuZElkZW50aWZpZXIoZWxlbWVudCwgaWRlbnRpZmllcik7XG4gICAgfVxuICAgIHBhcnNlVmFsdWVGb3JFbGVtZW50QW5kSWRlbnRpZmllcihlbGVtZW50LCBpZGVudGlmaWVyKSB7XG4gICAgICAgIGNvbnN0IHNjb3Blc0J5SWRlbnRpZmllciA9IHRoaXMuZmV0Y2hTY29wZXNCeUlkZW50aWZpZXJGb3JFbGVtZW50KGVsZW1lbnQpO1xuICAgICAgICBsZXQgc2NvcGUgPSBzY29wZXNCeUlkZW50aWZpZXIuZ2V0KGlkZW50aWZpZXIpO1xuICAgICAgICBpZiAoIXNjb3BlKSB7XG4gICAgICAgICAgICBzY29wZSA9IHRoaXMuZGVsZWdhdGUuY3JlYXRlU2NvcGVGb3JFbGVtZW50QW5kSWRlbnRpZmllcihlbGVtZW50LCBpZGVudGlmaWVyKTtcbiAgICAgICAgICAgIHNjb3Blc0J5SWRlbnRpZmllci5zZXQoaWRlbnRpZmllciwgc2NvcGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzY29wZTtcbiAgICB9XG4gICAgZWxlbWVudE1hdGNoZWRWYWx1ZShlbGVtZW50LCB2YWx1ZSkge1xuICAgICAgICBjb25zdCByZWZlcmVuY2VDb3VudCA9ICh0aGlzLnNjb3BlUmVmZXJlbmNlQ291bnRzLmdldCh2YWx1ZSkgfHwgMCkgKyAxO1xuICAgICAgICB0aGlzLnNjb3BlUmVmZXJlbmNlQ291bnRzLnNldCh2YWx1ZSwgcmVmZXJlbmNlQ291bnQpO1xuICAgICAgICBpZiAocmVmZXJlbmNlQ291bnQgPT0gMSkge1xuICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5zY29wZUNvbm5lY3RlZCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxlbWVudFVubWF0Y2hlZFZhbHVlKGVsZW1lbnQsIHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHJlZmVyZW5jZUNvdW50ID0gdGhpcy5zY29wZVJlZmVyZW5jZUNvdW50cy5nZXQodmFsdWUpO1xuICAgICAgICBpZiAocmVmZXJlbmNlQ291bnQpIHtcbiAgICAgICAgICAgIHRoaXMuc2NvcGVSZWZlcmVuY2VDb3VudHMuc2V0KHZhbHVlLCByZWZlcmVuY2VDb3VudCAtIDEpO1xuICAgICAgICAgICAgaWYgKHJlZmVyZW5jZUNvdW50ID09IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlbGVnYXRlLnNjb3BlRGlzY29ubmVjdGVkKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmZXRjaFNjb3Blc0J5SWRlbnRpZmllckZvckVsZW1lbnQoZWxlbWVudCkge1xuICAgICAgICBsZXQgc2NvcGVzQnlJZGVudGlmaWVyID0gdGhpcy5zY29wZXNCeUlkZW50aWZpZXJCeUVsZW1lbnQuZ2V0KGVsZW1lbnQpO1xuICAgICAgICBpZiAoIXNjb3Blc0J5SWRlbnRpZmllcikge1xuICAgICAgICAgICAgc2NvcGVzQnlJZGVudGlmaWVyID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgdGhpcy5zY29wZXNCeUlkZW50aWZpZXJCeUVsZW1lbnQuc2V0KGVsZW1lbnQsIHNjb3Blc0J5SWRlbnRpZmllcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNjb3Blc0J5SWRlbnRpZmllcjtcbiAgICB9XG59XG5cbmNsYXNzIFJvdXRlciB7XG4gICAgY29uc3RydWN0b3IoYXBwbGljYXRpb24pIHtcbiAgICAgICAgdGhpcy5hcHBsaWNhdGlvbiA9IGFwcGxpY2F0aW9uO1xuICAgICAgICB0aGlzLnNjb3BlT2JzZXJ2ZXIgPSBuZXcgU2NvcGVPYnNlcnZlcih0aGlzLmVsZW1lbnQsIHRoaXMuc2NoZW1hLCB0aGlzKTtcbiAgICAgICAgdGhpcy5zY29wZXNCeUlkZW50aWZpZXIgPSBuZXcgTXVsdGltYXAoKTtcbiAgICAgICAgdGhpcy5tb2R1bGVzQnlJZGVudGlmaWVyID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbGljYXRpb24uZWxlbWVudDtcbiAgICB9XG4gICAgZ2V0IHNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbGljYXRpb24uc2NoZW1hO1xuICAgIH1cbiAgICBnZXQgbG9nZ2VyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBsaWNhdGlvbi5sb2dnZXI7XG4gICAgfVxuICAgIGdldCBjb250cm9sbGVyQXR0cmlidXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY2hlbWEuY29udHJvbGxlckF0dHJpYnV0ZTtcbiAgICB9XG4gICAgZ2V0IG1vZHVsZXMoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMubW9kdWxlc0J5SWRlbnRpZmllci52YWx1ZXMoKSk7XG4gICAgfVxuICAgIGdldCBjb250ZXh0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubW9kdWxlcy5yZWR1Y2UoKGNvbnRleHRzLCBtb2R1bGUpID0+IGNvbnRleHRzLmNvbmNhdChtb2R1bGUuY29udGV4dHMpLCBbXSk7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLnNjb3BlT2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5zY29wZU9ic2VydmVyLnN0b3AoKTtcbiAgICB9XG4gICAgbG9hZERlZmluaXRpb24oZGVmaW5pdGlvbikge1xuICAgICAgICB0aGlzLnVubG9hZElkZW50aWZpZXIoZGVmaW5pdGlvbi5pZGVudGlmaWVyKTtcbiAgICAgICAgY29uc3QgbW9kdWxlID0gbmV3IE1vZHVsZSh0aGlzLmFwcGxpY2F0aW9uLCBkZWZpbml0aW9uKTtcbiAgICAgICAgdGhpcy5jb25uZWN0TW9kdWxlKG1vZHVsZSk7XG4gICAgICAgIGNvbnN0IGFmdGVyTG9hZCA9IGRlZmluaXRpb24uY29udHJvbGxlckNvbnN0cnVjdG9yLmFmdGVyTG9hZDtcbiAgICAgICAgaWYgKGFmdGVyTG9hZCkge1xuICAgICAgICAgICAgYWZ0ZXJMb2FkLmNhbGwoZGVmaW5pdGlvbi5jb250cm9sbGVyQ29uc3RydWN0b3IsIGRlZmluaXRpb24uaWRlbnRpZmllciwgdGhpcy5hcHBsaWNhdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdW5sb2FkSWRlbnRpZmllcihpZGVudGlmaWVyKSB7XG4gICAgICAgIGNvbnN0IG1vZHVsZSA9IHRoaXMubW9kdWxlc0J5SWRlbnRpZmllci5nZXQoaWRlbnRpZmllcik7XG4gICAgICAgIGlmIChtb2R1bGUpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzY29ubmVjdE1vZHVsZShtb2R1bGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldENvbnRleHRGb3JFbGVtZW50QW5kSWRlbnRpZmllcihlbGVtZW50LCBpZGVudGlmaWVyKSB7XG4gICAgICAgIGNvbnN0IG1vZHVsZSA9IHRoaXMubW9kdWxlc0J5SWRlbnRpZmllci5nZXQoaWRlbnRpZmllcik7XG4gICAgICAgIGlmIChtb2R1bGUpIHtcbiAgICAgICAgICAgIHJldHVybiBtb2R1bGUuY29udGV4dHMuZmluZCgoY29udGV4dCkgPT4gY29udGV4dC5lbGVtZW50ID09IGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByb3Bvc2VUb0Nvbm5lY3RTY29wZUZvckVsZW1lbnRBbmRJZGVudGlmaWVyKGVsZW1lbnQsIGlkZW50aWZpZXIpIHtcbiAgICAgICAgY29uc3Qgc2NvcGUgPSB0aGlzLnNjb3BlT2JzZXJ2ZXIucGFyc2VWYWx1ZUZvckVsZW1lbnRBbmRJZGVudGlmaWVyKGVsZW1lbnQsIGlkZW50aWZpZXIpO1xuICAgICAgICBpZiAoc2NvcGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2NvcGVPYnNlcnZlci5lbGVtZW50TWF0Y2hlZFZhbHVlKHNjb3BlLmVsZW1lbnQsIHNjb3BlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYENvdWxkbid0IGZpbmQgb3IgY3JlYXRlIHNjb3BlIGZvciBpZGVudGlmaWVyOiBcIiR7aWRlbnRpZmllcn1cIiBhbmQgZWxlbWVudDpgLCBlbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVFcnJvcihlcnJvciwgbWVzc2FnZSwgZGV0YWlsKSB7XG4gICAgICAgIHRoaXMuYXBwbGljYXRpb24uaGFuZGxlRXJyb3IoZXJyb3IsIG1lc3NhZ2UsIGRldGFpbCk7XG4gICAgfVxuICAgIGNyZWF0ZVNjb3BlRm9yRWxlbWVudEFuZElkZW50aWZpZXIoZWxlbWVudCwgaWRlbnRpZmllcikge1xuICAgICAgICByZXR1cm4gbmV3IFNjb3BlKHRoaXMuc2NoZW1hLCBlbGVtZW50LCBpZGVudGlmaWVyLCB0aGlzLmxvZ2dlcik7XG4gICAgfVxuICAgIHNjb3BlQ29ubmVjdGVkKHNjb3BlKSB7XG4gICAgICAgIHRoaXMuc2NvcGVzQnlJZGVudGlmaWVyLmFkZChzY29wZS5pZGVudGlmaWVyLCBzY29wZSk7XG4gICAgICAgIGNvbnN0IG1vZHVsZSA9IHRoaXMubW9kdWxlc0J5SWRlbnRpZmllci5nZXQoc2NvcGUuaWRlbnRpZmllcik7XG4gICAgICAgIGlmIChtb2R1bGUpIHtcbiAgICAgICAgICAgIG1vZHVsZS5jb25uZWN0Q29udGV4dEZvclNjb3BlKHNjb3BlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzY29wZURpc2Nvbm5lY3RlZChzY29wZSkge1xuICAgICAgICB0aGlzLnNjb3Blc0J5SWRlbnRpZmllci5kZWxldGUoc2NvcGUuaWRlbnRpZmllciwgc2NvcGUpO1xuICAgICAgICBjb25zdCBtb2R1bGUgPSB0aGlzLm1vZHVsZXNCeUlkZW50aWZpZXIuZ2V0KHNjb3BlLmlkZW50aWZpZXIpO1xuICAgICAgICBpZiAobW9kdWxlKSB7XG4gICAgICAgICAgICBtb2R1bGUuZGlzY29ubmVjdENvbnRleHRGb3JTY29wZShzY29wZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29ubmVjdE1vZHVsZShtb2R1bGUpIHtcbiAgICAgICAgdGhpcy5tb2R1bGVzQnlJZGVudGlmaWVyLnNldChtb2R1bGUuaWRlbnRpZmllciwgbW9kdWxlKTtcbiAgICAgICAgY29uc3Qgc2NvcGVzID0gdGhpcy5zY29wZXNCeUlkZW50aWZpZXIuZ2V0VmFsdWVzRm9yS2V5KG1vZHVsZS5pZGVudGlmaWVyKTtcbiAgICAgICAgc2NvcGVzLmZvckVhY2goKHNjb3BlKSA9PiBtb2R1bGUuY29ubmVjdENvbnRleHRGb3JTY29wZShzY29wZSkpO1xuICAgIH1cbiAgICBkaXNjb25uZWN0TW9kdWxlKG1vZHVsZSkge1xuICAgICAgICB0aGlzLm1vZHVsZXNCeUlkZW50aWZpZXIuZGVsZXRlKG1vZHVsZS5pZGVudGlmaWVyKTtcbiAgICAgICAgY29uc3Qgc2NvcGVzID0gdGhpcy5zY29wZXNCeUlkZW50aWZpZXIuZ2V0VmFsdWVzRm9yS2V5KG1vZHVsZS5pZGVudGlmaWVyKTtcbiAgICAgICAgc2NvcGVzLmZvckVhY2goKHNjb3BlKSA9PiBtb2R1bGUuZGlzY29ubmVjdENvbnRleHRGb3JTY29wZShzY29wZSkpO1xuICAgIH1cbn1cblxuY29uc3QgZGVmYXVsdFNjaGVtYSA9IHtcbiAgICBjb250cm9sbGVyQXR0cmlidXRlOiBcImRhdGEtY29udHJvbGxlclwiLFxuICAgIGFjdGlvbkF0dHJpYnV0ZTogXCJkYXRhLWFjdGlvblwiLFxuICAgIHRhcmdldEF0dHJpYnV0ZTogXCJkYXRhLXRhcmdldFwiLFxuICAgIHRhcmdldEF0dHJpYnV0ZUZvclNjb3BlOiAoaWRlbnRpZmllcikgPT4gYGRhdGEtJHtpZGVudGlmaWVyfS10YXJnZXRgLFxuICAgIG91dGxldEF0dHJpYnV0ZUZvclNjb3BlOiAoaWRlbnRpZmllciwgb3V0bGV0KSA9PiBgZGF0YS0ke2lkZW50aWZpZXJ9LSR7b3V0bGV0fS1vdXRsZXRgLFxuICAgIGtleU1hcHBpbmdzOiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBlbnRlcjogXCJFbnRlclwiLCB0YWI6IFwiVGFiXCIsIGVzYzogXCJFc2NhcGVcIiwgc3BhY2U6IFwiIFwiLCB1cDogXCJBcnJvd1VwXCIsIGRvd246IFwiQXJyb3dEb3duXCIsIGxlZnQ6IFwiQXJyb3dMZWZ0XCIsIHJpZ2h0OiBcIkFycm93UmlnaHRcIiwgaG9tZTogXCJIb21lXCIsIGVuZDogXCJFbmRcIiwgcGFnZV91cDogXCJQYWdlVXBcIiwgcGFnZV9kb3duOiBcIlBhZ2VEb3duXCIgfSwgb2JqZWN0RnJvbUVudHJpZXMoXCJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5elwiLnNwbGl0KFwiXCIpLm1hcCgoYykgPT4gW2MsIGNdKSkpLCBvYmplY3RGcm9tRW50cmllcyhcIjAxMjM0NTY3ODlcIi5zcGxpdChcIlwiKS5tYXAoKG4pID0+IFtuLCBuXSkpKSxcbn07XG5mdW5jdGlvbiBvYmplY3RGcm9tRW50cmllcyhhcnJheSkge1xuICAgIHJldHVybiBhcnJheS5yZWR1Y2UoKG1lbW8sIFtrLCB2XSkgPT4gKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbWVtbyksIHsgW2tdOiB2IH0pKSwge30pO1xufVxuXG5jbGFzcyBBcHBsaWNhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgc2NoZW1hID0gZGVmYXVsdFNjaGVtYSkge1xuICAgICAgICB0aGlzLmxvZ2dlciA9IGNvbnNvbGU7XG4gICAgICAgIHRoaXMuZGVidWcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5sb2dEZWJ1Z0FjdGl2aXR5ID0gKGlkZW50aWZpZXIsIGZ1bmN0aW9uTmFtZSwgZGV0YWlsID0ge30pID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRlYnVnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dGb3JtYXR0ZWRNZXNzYWdlKGlkZW50aWZpZXIsIGZ1bmN0aW9uTmFtZSwgZGV0YWlsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5zY2hlbWEgPSBzY2hlbWE7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hlciA9IG5ldyBEaXNwYXRjaGVyKHRoaXMpO1xuICAgICAgICB0aGlzLnJvdXRlciA9IG5ldyBSb3V0ZXIodGhpcyk7XG4gICAgICAgIHRoaXMuYWN0aW9uRGVzY3JpcHRvckZpbHRlcnMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0QWN0aW9uRGVzY3JpcHRvckZpbHRlcnMpO1xuICAgIH1cbiAgICBzdGF0aWMgc3RhcnQoZWxlbWVudCwgc2NoZW1hKSB7XG4gICAgICAgIGNvbnN0IGFwcGxpY2F0aW9uID0gbmV3IHRoaXMoZWxlbWVudCwgc2NoZW1hKTtcbiAgICAgICAgYXBwbGljYXRpb24uc3RhcnQoKTtcbiAgICAgICAgcmV0dXJuIGFwcGxpY2F0aW9uO1xuICAgIH1cbiAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgYXdhaXQgZG9tUmVhZHkoKTtcbiAgICAgICAgdGhpcy5sb2dEZWJ1Z0FjdGl2aXR5KFwiYXBwbGljYXRpb25cIiwgXCJzdGFydGluZ1wiKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaGVyLnN0YXJ0KCk7XG4gICAgICAgIHRoaXMucm91dGVyLnN0YXJ0KCk7XG4gICAgICAgIHRoaXMubG9nRGVidWdBY3Rpdml0eShcImFwcGxpY2F0aW9uXCIsIFwic3RhcnRcIik7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMubG9nRGVidWdBY3Rpdml0eShcImFwcGxpY2F0aW9uXCIsIFwic3RvcHBpbmdcIik7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hlci5zdG9wKCk7XG4gICAgICAgIHRoaXMucm91dGVyLnN0b3AoKTtcbiAgICAgICAgdGhpcy5sb2dEZWJ1Z0FjdGl2aXR5KFwiYXBwbGljYXRpb25cIiwgXCJzdG9wXCIpO1xuICAgIH1cbiAgICByZWdpc3RlcihpZGVudGlmaWVyLCBjb250cm9sbGVyQ29uc3RydWN0b3IpIHtcbiAgICAgICAgdGhpcy5sb2FkKHsgaWRlbnRpZmllciwgY29udHJvbGxlckNvbnN0cnVjdG9yIH0pO1xuICAgIH1cbiAgICByZWdpc3RlckFjdGlvbk9wdGlvbihuYW1lLCBmaWx0ZXIpIHtcbiAgICAgICAgdGhpcy5hY3Rpb25EZXNjcmlwdG9yRmlsdGVyc1tuYW1lXSA9IGZpbHRlcjtcbiAgICB9XG4gICAgbG9hZChoZWFkLCAuLi5yZXN0KSB7XG4gICAgICAgIGNvbnN0IGRlZmluaXRpb25zID0gQXJyYXkuaXNBcnJheShoZWFkKSA/IGhlYWQgOiBbaGVhZCwgLi4ucmVzdF07XG4gICAgICAgIGRlZmluaXRpb25zLmZvckVhY2goKGRlZmluaXRpb24pID0+IHtcbiAgICAgICAgICAgIGlmIChkZWZpbml0aW9uLmNvbnRyb2xsZXJDb25zdHJ1Y3Rvci5zaG91bGRMb2FkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3V0ZXIubG9hZERlZmluaXRpb24oZGVmaW5pdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1bmxvYWQoaGVhZCwgLi4ucmVzdCkge1xuICAgICAgICBjb25zdCBpZGVudGlmaWVycyA9IEFycmF5LmlzQXJyYXkoaGVhZCkgPyBoZWFkIDogW2hlYWQsIC4uLnJlc3RdO1xuICAgICAgICBpZGVudGlmaWVycy5mb3JFYWNoKChpZGVudGlmaWVyKSA9PiB0aGlzLnJvdXRlci51bmxvYWRJZGVudGlmaWVyKGlkZW50aWZpZXIpKTtcbiAgICB9XG4gICAgZ2V0IGNvbnRyb2xsZXJzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb3V0ZXIuY29udGV4dHMubWFwKChjb250ZXh0KSA9PiBjb250ZXh0LmNvbnRyb2xsZXIpO1xuICAgIH1cbiAgICBnZXRDb250cm9sbGVyRm9yRWxlbWVudEFuZElkZW50aWZpZXIoZWxlbWVudCwgaWRlbnRpZmllcikge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5yb3V0ZXIuZ2V0Q29udGV4dEZvckVsZW1lbnRBbmRJZGVudGlmaWVyKGVsZW1lbnQsIGlkZW50aWZpZXIpO1xuICAgICAgICByZXR1cm4gY29udGV4dCA/IGNvbnRleHQuY29udHJvbGxlciA6IG51bGw7XG4gICAgfVxuICAgIGhhbmRsZUVycm9yKGVycm9yLCBtZXNzYWdlLCBkZXRhaWwpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihgJXNcXG5cXG4lb1xcblxcbiVvYCwgbWVzc2FnZSwgZXJyb3IsIGRldGFpbCk7XG4gICAgICAgIChfYSA9IHdpbmRvdy5vbmVycm9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2FsbCh3aW5kb3csIG1lc3NhZ2UsIFwiXCIsIDAsIDAsIGVycm9yKTtcbiAgICB9XG4gICAgbG9nRm9ybWF0dGVkTWVzc2FnZShpZGVudGlmaWVyLCBmdW5jdGlvbk5hbWUsIGRldGFpbCA9IHt9KSB7XG4gICAgICAgIGRldGFpbCA9IE9iamVjdC5hc3NpZ24oeyBhcHBsaWNhdGlvbjogdGhpcyB9LCBkZXRhaWwpO1xuICAgICAgICB0aGlzLmxvZ2dlci5ncm91cENvbGxhcHNlZChgJHtpZGVudGlmaWVyfSAjJHtmdW5jdGlvbk5hbWV9YCk7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhcImRldGFpbHM6XCIsIE9iamVjdC5hc3NpZ24oe30sIGRldGFpbCkpO1xuICAgICAgICB0aGlzLmxvZ2dlci5ncm91cEVuZCgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRvbVJlYWR5KCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PSBcImxvYWRpbmdcIikge1xuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4gcmVzb2x2ZSgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBDbGFzc1Byb3BlcnRpZXNCbGVzc2luZyhjb25zdHJ1Y3Rvcikge1xuICAgIGNvbnN0IGNsYXNzZXMgPSByZWFkSW5oZXJpdGFibGVTdGF0aWNBcnJheVZhbHVlcyhjb25zdHJ1Y3RvciwgXCJjbGFzc2VzXCIpO1xuICAgIHJldHVybiBjbGFzc2VzLnJlZHVjZSgocHJvcGVydGllcywgY2xhc3NEZWZpbml0aW9uKSA9PiB7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHByb3BlcnRpZXMsIHByb3BlcnRpZXNGb3JDbGFzc0RlZmluaXRpb24oY2xhc3NEZWZpbml0aW9uKSk7XG4gICAgfSwge30pO1xufVxuZnVuY3Rpb24gcHJvcGVydGllc0ZvckNsYXNzRGVmaW5pdGlvbihrZXkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBbYCR7a2V5fUNsYXNzYF06IHtcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGNsYXNzZXMgfSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgaWYgKGNsYXNzZXMuaGFzKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNsYXNzZXMuZ2V0KGtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGUgPSBjbGFzc2VzLmdldEF0dHJpYnV0ZU5hbWUoa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIGF0dHJpYnV0ZSBcIiR7YXR0cmlidXRlfVwiYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgW2Ake2tleX1DbGFzc2VzYF06IHtcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jbGFzc2VzLmdldEFsbChrZXkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgW2BoYXMke2NhcGl0YWxpemUoa2V5KX1DbGFzc2BdOiB7XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2xhc3Nlcy5oYXMoa2V5KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gT3V0bGV0UHJvcGVydGllc0JsZXNzaW5nKGNvbnN0cnVjdG9yKSB7XG4gICAgY29uc3Qgb3V0bGV0cyA9IHJlYWRJbmhlcml0YWJsZVN0YXRpY0FycmF5VmFsdWVzKGNvbnN0cnVjdG9yLCBcIm91dGxldHNcIik7XG4gICAgcmV0dXJuIG91dGxldHMucmVkdWNlKChwcm9wZXJ0aWVzLCBvdXRsZXREZWZpbml0aW9uKSA9PiB7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHByb3BlcnRpZXMsIHByb3BlcnRpZXNGb3JPdXRsZXREZWZpbml0aW9uKG91dGxldERlZmluaXRpb24pKTtcbiAgICB9LCB7fSk7XG59XG5mdW5jdGlvbiBnZXRPdXRsZXRDb250cm9sbGVyKGNvbnRyb2xsZXIsIGVsZW1lbnQsIGlkZW50aWZpZXIpIHtcbiAgICByZXR1cm4gY29udHJvbGxlci5hcHBsaWNhdGlvbi5nZXRDb250cm9sbGVyRm9yRWxlbWVudEFuZElkZW50aWZpZXIoZWxlbWVudCwgaWRlbnRpZmllcik7XG59XG5mdW5jdGlvbiBnZXRDb250cm9sbGVyQW5kRW5zdXJlQ29ubmVjdGVkU2NvcGUoY29udHJvbGxlciwgZWxlbWVudCwgb3V0bGV0TmFtZSkge1xuICAgIGxldCBvdXRsZXRDb250cm9sbGVyID0gZ2V0T3V0bGV0Q29udHJvbGxlcihjb250cm9sbGVyLCBlbGVtZW50LCBvdXRsZXROYW1lKTtcbiAgICBpZiAob3V0bGV0Q29udHJvbGxlcilcbiAgICAgICAgcmV0dXJuIG91dGxldENvbnRyb2xsZXI7XG4gICAgY29udHJvbGxlci5hcHBsaWNhdGlvbi5yb3V0ZXIucHJvcG9zZVRvQ29ubmVjdFNjb3BlRm9yRWxlbWVudEFuZElkZW50aWZpZXIoZWxlbWVudCwgb3V0bGV0TmFtZSk7XG4gICAgb3V0bGV0Q29udHJvbGxlciA9IGdldE91dGxldENvbnRyb2xsZXIoY29udHJvbGxlciwgZWxlbWVudCwgb3V0bGV0TmFtZSk7XG4gICAgaWYgKG91dGxldENvbnRyb2xsZXIpXG4gICAgICAgIHJldHVybiBvdXRsZXRDb250cm9sbGVyO1xufVxuZnVuY3Rpb24gcHJvcGVydGllc0Zvck91dGxldERlZmluaXRpb24obmFtZSkge1xuICAgIGNvbnN0IGNhbWVsaXplZE5hbWUgPSBuYW1lc3BhY2VDYW1lbGl6ZShuYW1lKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBbYCR7Y2FtZWxpemVkTmFtZX1PdXRsZXRgXToge1xuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG91dGxldEVsZW1lbnQgPSB0aGlzLm91dGxldHMuZmluZChuYW1lKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RvciA9IHRoaXMub3V0bGV0cy5nZXRTZWxlY3RvckZvck91dGxldE5hbWUobmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKG91dGxldEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0bGV0Q29udHJvbGxlciA9IGdldENvbnRyb2xsZXJBbmRFbnN1cmVDb25uZWN0ZWRTY29wZSh0aGlzLCBvdXRsZXRFbGVtZW50LCBuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG91dGxldENvbnRyb2xsZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3V0bGV0Q29udHJvbGxlcjtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgcHJvdmlkZWQgb3V0bGV0IGVsZW1lbnQgaXMgbWlzc2luZyBhbiBvdXRsZXQgY29udHJvbGxlciBcIiR7bmFtZX1cIiBpbnN0YW5jZSBmb3IgaG9zdCBjb250cm9sbGVyIFwiJHt0aGlzLmlkZW50aWZpZXJ9XCJgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIG91dGxldCBlbGVtZW50IFwiJHtuYW1lfVwiIGZvciBob3N0IGNvbnRyb2xsZXIgXCIke3RoaXMuaWRlbnRpZmllcn1cIi4gU3RpbXVsdXMgY291bGRuJ3QgZmluZCBhIG1hdGNoaW5nIG91dGxldCBlbGVtZW50IHVzaW5nIHNlbGVjdG9yIFwiJHtzZWxlY3Rvcn1cIi5gKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIFtgJHtjYW1lbGl6ZWROYW1lfU91dGxldHNgXToge1xuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG91dGxldHMgPSB0aGlzLm91dGxldHMuZmluZEFsbChuYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAob3V0bGV0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvdXRsZXRzXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChvdXRsZXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRsZXRDb250cm9sbGVyID0gZ2V0Q29udHJvbGxlckFuZEVuc3VyZUNvbm5lY3RlZFNjb3BlKHRoaXMsIG91dGxldEVsZW1lbnQsIG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG91dGxldENvbnRyb2xsZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG91dGxldENvbnRyb2xsZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFRoZSBwcm92aWRlZCBvdXRsZXQgZWxlbWVudCBpcyBtaXNzaW5nIGFuIG91dGxldCBjb250cm9sbGVyIFwiJHtuYW1lfVwiIGluc3RhbmNlIGZvciBob3N0IGNvbnRyb2xsZXIgXCIke3RoaXMuaWRlbnRpZmllcn1cImAsIG91dGxldEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigoY29udHJvbGxlcikgPT4gY29udHJvbGxlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIFtgJHtjYW1lbGl6ZWROYW1lfU91dGxldEVsZW1lbnRgXToge1xuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG91dGxldEVsZW1lbnQgPSB0aGlzLm91dGxldHMuZmluZChuYW1lKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RvciA9IHRoaXMub3V0bGV0cy5nZXRTZWxlY3RvckZvck91dGxldE5hbWUobmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKG91dGxldEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG91dGxldEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3Npbmcgb3V0bGV0IGVsZW1lbnQgXCIke25hbWV9XCIgZm9yIGhvc3QgY29udHJvbGxlciBcIiR7dGhpcy5pZGVudGlmaWVyfVwiLiBTdGltdWx1cyBjb3VsZG4ndCBmaW5kIGEgbWF0Y2hpbmcgb3V0bGV0IGVsZW1lbnQgdXNpbmcgc2VsZWN0b3IgXCIke3NlbGVjdG9yfVwiLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIFtgJHtjYW1lbGl6ZWROYW1lfU91dGxldEVsZW1lbnRzYF06IHtcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vdXRsZXRzLmZpbmRBbGwobmFtZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBbYGhhcyR7Y2FwaXRhbGl6ZShjYW1lbGl6ZWROYW1lKX1PdXRsZXRgXToge1xuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm91dGxldHMuaGFzKG5hbWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBUYXJnZXRQcm9wZXJ0aWVzQmxlc3NpbmcoY29uc3RydWN0b3IpIHtcbiAgICBjb25zdCB0YXJnZXRzID0gcmVhZEluaGVyaXRhYmxlU3RhdGljQXJyYXlWYWx1ZXMoY29uc3RydWN0b3IsIFwidGFyZ2V0c1wiKTtcbiAgICByZXR1cm4gdGFyZ2V0cy5yZWR1Y2UoKHByb3BlcnRpZXMsIHRhcmdldERlZmluaXRpb24pID0+IHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ocHJvcGVydGllcywgcHJvcGVydGllc0ZvclRhcmdldERlZmluaXRpb24odGFyZ2V0RGVmaW5pdGlvbikpO1xuICAgIH0sIHt9KTtcbn1cbmZ1bmN0aW9uIHByb3BlcnRpZXNGb3JUYXJnZXREZWZpbml0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBbYCR7bmFtZX1UYXJnZXRgXToge1xuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXMudGFyZ2V0cy5maW5kKG5hbWUpO1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyB0YXJnZXQgZWxlbWVudCBcIiR7bmFtZX1cIiBmb3IgXCIke3RoaXMuaWRlbnRpZmllcn1cIiBjb250cm9sbGVyYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgW2Ake25hbWV9VGFyZ2V0c2BdOiB7XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0cy5maW5kQWxsKG5hbWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgW2BoYXMke2NhcGl0YWxpemUobmFtZSl9VGFyZ2V0YF06IHtcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50YXJnZXRzLmhhcyhuYW1lKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gVmFsdWVQcm9wZXJ0aWVzQmxlc3NpbmcoY29uc3RydWN0b3IpIHtcbiAgICBjb25zdCB2YWx1ZURlZmluaXRpb25QYWlycyA9IHJlYWRJbmhlcml0YWJsZVN0YXRpY09iamVjdFBhaXJzKGNvbnN0cnVjdG9yLCBcInZhbHVlc1wiKTtcbiAgICBjb25zdCBwcm9wZXJ0eURlc2NyaXB0b3JNYXAgPSB7XG4gICAgICAgIHZhbHVlRGVzY3JpcHRvck1hcDoge1xuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZURlZmluaXRpb25QYWlycy5yZWR1Y2UoKHJlc3VsdCwgdmFsdWVEZWZpbml0aW9uUGFpcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZURlc2NyaXB0b3IgPSBwYXJzZVZhbHVlRGVmaW5pdGlvblBhaXIodmFsdWVEZWZpbml0aW9uUGFpciwgdGhpcy5pZGVudGlmaWVyKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlTmFtZSA9IHRoaXMuZGF0YS5nZXRBdHRyaWJ1dGVOYW1lRm9yS2V5KHZhbHVlRGVzY3JpcHRvci5rZXkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihyZXN1bHQsIHsgW2F0dHJpYnV0ZU5hbWVdOiB2YWx1ZURlc2NyaXB0b3IgfSk7XG4gICAgICAgICAgICAgICAgfSwge30pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9O1xuICAgIHJldHVybiB2YWx1ZURlZmluaXRpb25QYWlycy5yZWR1Y2UoKHByb3BlcnRpZXMsIHZhbHVlRGVmaW5pdGlvblBhaXIpID0+IHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ocHJvcGVydGllcywgcHJvcGVydGllc0ZvclZhbHVlRGVmaW5pdGlvblBhaXIodmFsdWVEZWZpbml0aW9uUGFpcikpO1xuICAgIH0sIHByb3BlcnR5RGVzY3JpcHRvck1hcCk7XG59XG5mdW5jdGlvbiBwcm9wZXJ0aWVzRm9yVmFsdWVEZWZpbml0aW9uUGFpcih2YWx1ZURlZmluaXRpb25QYWlyLCBjb250cm9sbGVyKSB7XG4gICAgY29uc3QgZGVmaW5pdGlvbiA9IHBhcnNlVmFsdWVEZWZpbml0aW9uUGFpcih2YWx1ZURlZmluaXRpb25QYWlyLCBjb250cm9sbGVyKTtcbiAgICBjb25zdCB7IGtleSwgbmFtZSwgcmVhZGVyOiByZWFkLCB3cml0ZXI6IHdyaXRlIH0gPSBkZWZpbml0aW9uO1xuICAgIHJldHVybiB7XG4gICAgICAgIFtuYW1lXToge1xuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5kYXRhLmdldChrZXkpO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVmaW5pdGlvbi5kZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldCh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5zZXQoa2V5LCB3cml0ZSh2YWx1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIFtgaGFzJHtjYXBpdGFsaXplKG5hbWUpfWBdOiB7XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5oYXMoa2V5KSB8fCBkZWZpbml0aW9uLmhhc0N1c3RvbURlZmF1bHRWYWx1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmZ1bmN0aW9uIHBhcnNlVmFsdWVEZWZpbml0aW9uUGFpcihbdG9rZW4sIHR5cGVEZWZpbml0aW9uXSwgY29udHJvbGxlcikge1xuICAgIHJldHVybiB2YWx1ZURlc2NyaXB0b3JGb3JUb2tlbkFuZFR5cGVEZWZpbml0aW9uKHtcbiAgICAgICAgY29udHJvbGxlcixcbiAgICAgICAgdG9rZW4sXG4gICAgICAgIHR5cGVEZWZpbml0aW9uLFxuICAgIH0pO1xufVxuZnVuY3Rpb24gcGFyc2VWYWx1ZVR5cGVDb25zdGFudChjb25zdGFudCkge1xuICAgIHN3aXRjaCAoY29uc3RhbnQpIHtcbiAgICAgICAgY2FzZSBBcnJheTpcbiAgICAgICAgICAgIHJldHVybiBcImFycmF5XCI7XG4gICAgICAgIGNhc2UgQm9vbGVhbjpcbiAgICAgICAgICAgIHJldHVybiBcImJvb2xlYW5cIjtcbiAgICAgICAgY2FzZSBOdW1iZXI6XG4gICAgICAgICAgICByZXR1cm4gXCJudW1iZXJcIjtcbiAgICAgICAgY2FzZSBPYmplY3Q6XG4gICAgICAgICAgICByZXR1cm4gXCJvYmplY3RcIjtcbiAgICAgICAgY2FzZSBTdHJpbmc6XG4gICAgICAgICAgICByZXR1cm4gXCJzdHJpbmdcIjtcbiAgICB9XG59XG5mdW5jdGlvbiBwYXJzZVZhbHVlVHlwZURlZmF1bHQoZGVmYXVsdFZhbHVlKSB7XG4gICAgc3dpdGNoICh0eXBlb2YgZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJib29sZWFuXCI7XG4gICAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgICAgIHJldHVybiBcIm51bWJlclwiO1xuICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJzdHJpbmdcIjtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZGVmYXVsdFZhbHVlKSlcbiAgICAgICAgcmV0dXJuIFwiYXJyYXlcIjtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGRlZmF1bHRWYWx1ZSkgPT09IFwiW29iamVjdCBPYmplY3RdXCIpXG4gICAgICAgIHJldHVybiBcIm9iamVjdFwiO1xufVxuZnVuY3Rpb24gcGFyc2VWYWx1ZVR5cGVPYmplY3QocGF5bG9hZCkge1xuICAgIGNvbnN0IHsgY29udHJvbGxlciwgdG9rZW4sIHR5cGVPYmplY3QgfSA9IHBheWxvYWQ7XG4gICAgY29uc3QgaGFzVHlwZSA9IGlzU29tZXRoaW5nKHR5cGVPYmplY3QudHlwZSk7XG4gICAgY29uc3QgaGFzRGVmYXVsdCA9IGlzU29tZXRoaW5nKHR5cGVPYmplY3QuZGVmYXVsdCk7XG4gICAgY29uc3QgZnVsbE9iamVjdCA9IGhhc1R5cGUgJiYgaGFzRGVmYXVsdDtcbiAgICBjb25zdCBvbmx5VHlwZSA9IGhhc1R5cGUgJiYgIWhhc0RlZmF1bHQ7XG4gICAgY29uc3Qgb25seURlZmF1bHQgPSAhaGFzVHlwZSAmJiBoYXNEZWZhdWx0O1xuICAgIGNvbnN0IHR5cGVGcm9tT2JqZWN0ID0gcGFyc2VWYWx1ZVR5cGVDb25zdGFudCh0eXBlT2JqZWN0LnR5cGUpO1xuICAgIGNvbnN0IHR5cGVGcm9tRGVmYXVsdFZhbHVlID0gcGFyc2VWYWx1ZVR5cGVEZWZhdWx0KHBheWxvYWQudHlwZU9iamVjdC5kZWZhdWx0KTtcbiAgICBpZiAob25seVR5cGUpXG4gICAgICAgIHJldHVybiB0eXBlRnJvbU9iamVjdDtcbiAgICBpZiAob25seURlZmF1bHQpXG4gICAgICAgIHJldHVybiB0eXBlRnJvbURlZmF1bHRWYWx1ZTtcbiAgICBpZiAodHlwZUZyb21PYmplY3QgIT09IHR5cGVGcm9tRGVmYXVsdFZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHByb3BlcnR5UGF0aCA9IGNvbnRyb2xsZXIgPyBgJHtjb250cm9sbGVyfS4ke3Rva2VufWAgOiB0b2tlbjtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgc3BlY2lmaWVkIGRlZmF1bHQgdmFsdWUgZm9yIHRoZSBTdGltdWx1cyBWYWx1ZSBcIiR7cHJvcGVydHlQYXRofVwiIG11c3QgbWF0Y2ggdGhlIGRlZmluZWQgdHlwZSBcIiR7dHlwZUZyb21PYmplY3R9XCIuIFRoZSBwcm92aWRlZCBkZWZhdWx0IHZhbHVlIG9mIFwiJHt0eXBlT2JqZWN0LmRlZmF1bHR9XCIgaXMgb2YgdHlwZSBcIiR7dHlwZUZyb21EZWZhdWx0VmFsdWV9XCIuYCk7XG4gICAgfVxuICAgIGlmIChmdWxsT2JqZWN0KVxuICAgICAgICByZXR1cm4gdHlwZUZyb21PYmplY3Q7XG59XG5mdW5jdGlvbiBwYXJzZVZhbHVlVHlwZURlZmluaXRpb24ocGF5bG9hZCkge1xuICAgIGNvbnN0IHsgY29udHJvbGxlciwgdG9rZW4sIHR5cGVEZWZpbml0aW9uIH0gPSBwYXlsb2FkO1xuICAgIGNvbnN0IHR5cGVPYmplY3QgPSB7IGNvbnRyb2xsZXIsIHRva2VuLCB0eXBlT2JqZWN0OiB0eXBlRGVmaW5pdGlvbiB9O1xuICAgIGNvbnN0IHR5cGVGcm9tT2JqZWN0ID0gcGFyc2VWYWx1ZVR5cGVPYmplY3QodHlwZU9iamVjdCk7XG4gICAgY29uc3QgdHlwZUZyb21EZWZhdWx0VmFsdWUgPSBwYXJzZVZhbHVlVHlwZURlZmF1bHQodHlwZURlZmluaXRpb24pO1xuICAgIGNvbnN0IHR5cGVGcm9tQ29uc3RhbnQgPSBwYXJzZVZhbHVlVHlwZUNvbnN0YW50KHR5cGVEZWZpbml0aW9uKTtcbiAgICBjb25zdCB0eXBlID0gdHlwZUZyb21PYmplY3QgfHwgdHlwZUZyb21EZWZhdWx0VmFsdWUgfHwgdHlwZUZyb21Db25zdGFudDtcbiAgICBpZiAodHlwZSlcbiAgICAgICAgcmV0dXJuIHR5cGU7XG4gICAgY29uc3QgcHJvcGVydHlQYXRoID0gY29udHJvbGxlciA/IGAke2NvbnRyb2xsZXJ9LiR7dHlwZURlZmluaXRpb259YCA6IHRva2VuO1xuICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biB2YWx1ZSB0eXBlIFwiJHtwcm9wZXJ0eVBhdGh9XCIgZm9yIFwiJHt0b2tlbn1cIiB2YWx1ZWApO1xufVxuZnVuY3Rpb24gZGVmYXVsdFZhbHVlRm9yRGVmaW5pdGlvbih0eXBlRGVmaW5pdGlvbikge1xuICAgIGNvbnN0IGNvbnN0YW50ID0gcGFyc2VWYWx1ZVR5cGVDb25zdGFudCh0eXBlRGVmaW5pdGlvbik7XG4gICAgaWYgKGNvbnN0YW50KVxuICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlc0J5VHlwZVtjb25zdGFudF07XG4gICAgY29uc3QgaGFzRGVmYXVsdCA9IGhhc1Byb3BlcnR5KHR5cGVEZWZpbml0aW9uLCBcImRlZmF1bHRcIik7XG4gICAgY29uc3QgaGFzVHlwZSA9IGhhc1Byb3BlcnR5KHR5cGVEZWZpbml0aW9uLCBcInR5cGVcIik7XG4gICAgY29uc3QgdHlwZU9iamVjdCA9IHR5cGVEZWZpbml0aW9uO1xuICAgIGlmIChoYXNEZWZhdWx0KVxuICAgICAgICByZXR1cm4gdHlwZU9iamVjdC5kZWZhdWx0O1xuICAgIGlmIChoYXNUeXBlKSB7XG4gICAgICAgIGNvbnN0IHsgdHlwZSB9ID0gdHlwZU9iamVjdDtcbiAgICAgICAgY29uc3QgY29uc3RhbnRGcm9tVHlwZSA9IHBhcnNlVmFsdWVUeXBlQ29uc3RhbnQodHlwZSk7XG4gICAgICAgIGlmIChjb25zdGFudEZyb21UeXBlKVxuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZXNCeVR5cGVbY29uc3RhbnRGcm9tVHlwZV07XG4gICAgfVxuICAgIHJldHVybiB0eXBlRGVmaW5pdGlvbjtcbn1cbmZ1bmN0aW9uIHZhbHVlRGVzY3JpcHRvckZvclRva2VuQW5kVHlwZURlZmluaXRpb24ocGF5bG9hZCkge1xuICAgIGNvbnN0IHsgdG9rZW4sIHR5cGVEZWZpbml0aW9uIH0gPSBwYXlsb2FkO1xuICAgIGNvbnN0IGtleSA9IGAke2Rhc2hlcml6ZSh0b2tlbil9LXZhbHVlYDtcbiAgICBjb25zdCB0eXBlID0gcGFyc2VWYWx1ZVR5cGVEZWZpbml0aW9uKHBheWxvYWQpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGUsXG4gICAgICAgIGtleSxcbiAgICAgICAgbmFtZTogY2FtZWxpemUoa2V5KSxcbiAgICAgICAgZ2V0IGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWVGb3JEZWZpbml0aW9uKHR5cGVEZWZpbml0aW9uKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0IGhhc0N1c3RvbURlZmF1bHRWYWx1ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZVZhbHVlVHlwZURlZmF1bHQodHlwZURlZmluaXRpb24pICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIHJlYWRlcjogcmVhZGVyc1t0eXBlXSxcbiAgICAgICAgd3JpdGVyOiB3cml0ZXJzW3R5cGVdIHx8IHdyaXRlcnMuZGVmYXVsdCxcbiAgICB9O1xufVxuY29uc3QgZGVmYXVsdFZhbHVlc0J5VHlwZSA9IHtcbiAgICBnZXQgYXJyYXkoKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9LFxuICAgIGJvb2xlYW46IGZhbHNlLFxuICAgIG51bWJlcjogMCxcbiAgICBnZXQgb2JqZWN0KCkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfSxcbiAgICBzdHJpbmc6IFwiXCIsXG59O1xuY29uc3QgcmVhZGVycyA9IHtcbiAgICBhcnJheSh2YWx1ZSkge1xuICAgICAgICBjb25zdCBhcnJheSA9IEpTT04ucGFyc2UodmFsdWUpO1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyYXkpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBleHBlY3RlZCB2YWx1ZSBvZiB0eXBlIFwiYXJyYXlcIiBidXQgaW5zdGVhZCBnb3QgdmFsdWUgXCIke3ZhbHVlfVwiIG9mIHR5cGUgXCIke3BhcnNlVmFsdWVUeXBlRGVmYXVsdChhcnJheSl9XCJgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgfSxcbiAgICBib29sZWFuKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiAhKHZhbHVlID09IFwiMFwiIHx8IFN0cmluZyh2YWx1ZSkudG9Mb3dlckNhc2UoKSA9PSBcImZhbHNlXCIpO1xuICAgIH0sXG4gICAgbnVtYmVyKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBOdW1iZXIodmFsdWUucmVwbGFjZSgvXy9nLCBcIlwiKSk7XG4gICAgfSxcbiAgICBvYmplY3QodmFsdWUpIHtcbiAgICAgICAgY29uc3Qgb2JqZWN0ID0gSlNPTi5wYXJzZSh2YWx1ZSk7XG4gICAgICAgIGlmIChvYmplY3QgPT09IG51bGwgfHwgdHlwZW9mIG9iamVjdCAhPSBcIm9iamVjdFwiIHx8IEFycmF5LmlzQXJyYXkob2JqZWN0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgZXhwZWN0ZWQgdmFsdWUgb2YgdHlwZSBcIm9iamVjdFwiIGJ1dCBpbnN0ZWFkIGdvdCB2YWx1ZSBcIiR7dmFsdWV9XCIgb2YgdHlwZSBcIiR7cGFyc2VWYWx1ZVR5cGVEZWZhdWx0KG9iamVjdCl9XCJgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH0sXG4gICAgc3RyaW5nKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxufTtcbmNvbnN0IHdyaXRlcnMgPSB7XG4gICAgZGVmYXVsdDogd3JpdGVTdHJpbmcsXG4gICAgYXJyYXk6IHdyaXRlSlNPTixcbiAgICBvYmplY3Q6IHdyaXRlSlNPTixcbn07XG5mdW5jdGlvbiB3cml0ZUpTT04odmFsdWUpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xufVxuZnVuY3Rpb24gd3JpdGVTdHJpbmcodmFsdWUpIHtcbiAgICByZXR1cm4gYCR7dmFsdWV9YDtcbn1cblxuY2xhc3MgQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IoY29udGV4dCkge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IHNob3VsZExvYWQoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBzdGF0aWMgYWZ0ZXJMb2FkKF9pZGVudGlmaWVyLCBfYXBwbGljYXRpb24pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBnZXQgYXBwbGljYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQuYXBwbGljYXRpb247XG4gICAgfVxuICAgIGdldCBzY29wZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5zY29wZTtcbiAgICB9XG4gICAgZ2V0IGVsZW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3BlLmVsZW1lbnQ7XG4gICAgfVxuICAgIGdldCBpZGVudGlmaWVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY29wZS5pZGVudGlmaWVyO1xuICAgIH1cbiAgICBnZXQgdGFyZ2V0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGUudGFyZ2V0cztcbiAgICB9XG4gICAgZ2V0IG91dGxldHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3BlLm91dGxldHM7XG4gICAgfVxuICAgIGdldCBjbGFzc2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY29wZS5jbGFzc2VzO1xuICAgIH1cbiAgICBnZXQgZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGUuZGF0YTtcbiAgICB9XG4gICAgaW5pdGlhbGl6ZSgpIHtcbiAgICB9XG4gICAgY29ubmVjdCgpIHtcbiAgICB9XG4gICAgZGlzY29ubmVjdCgpIHtcbiAgICB9XG4gICAgZGlzcGF0Y2goZXZlbnROYW1lLCB7IHRhcmdldCA9IHRoaXMuZWxlbWVudCwgZGV0YWlsID0ge30sIHByZWZpeCA9IHRoaXMuaWRlbnRpZmllciwgYnViYmxlcyA9IHRydWUsIGNhbmNlbGFibGUgPSB0cnVlLCB9ID0ge30pIHtcbiAgICAgICAgY29uc3QgdHlwZSA9IHByZWZpeCA/IGAke3ByZWZpeH06JHtldmVudE5hbWV9YCA6IGV2ZW50TmFtZTtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQodHlwZSwgeyBkZXRhaWwsIGJ1YmJsZXMsIGNhbmNlbGFibGUgfSk7XG4gICAgICAgIHRhcmdldC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgICAgcmV0dXJuIGV2ZW50O1xuICAgIH1cbn1cbkNvbnRyb2xsZXIuYmxlc3NpbmdzID0gW1xuICAgIENsYXNzUHJvcGVydGllc0JsZXNzaW5nLFxuICAgIFRhcmdldFByb3BlcnRpZXNCbGVzc2luZyxcbiAgICBWYWx1ZVByb3BlcnRpZXNCbGVzc2luZyxcbiAgICBPdXRsZXRQcm9wZXJ0aWVzQmxlc3NpbmcsXG5dO1xuQ29udHJvbGxlci50YXJnZXRzID0gW107XG5Db250cm9sbGVyLm91dGxldHMgPSBbXTtcbkNvbnRyb2xsZXIudmFsdWVzID0ge307XG5cbmV4cG9ydCB7IEFwcGxpY2F0aW9uLCBBdHRyaWJ1dGVPYnNlcnZlciwgQ29udGV4dCwgQ29udHJvbGxlciwgRWxlbWVudE9ic2VydmVyLCBJbmRleGVkTXVsdGltYXAsIE11bHRpbWFwLCBTZWxlY3Rvck9ic2VydmVyLCBTdHJpbmdNYXBPYnNlcnZlciwgVG9rZW5MaXN0T2JzZXJ2ZXIsIFZhbHVlTGlzdE9ic2VydmVyLCBhZGQsIGRlZmF1bHRTY2hlbWEsIGRlbCwgZmV0Y2gsIHBydW5lIH07XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG4vLyBzdGltdWx1cy12YWxpZGF0b3I6IHN5c3RlbS1jb250cm9sbGVyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJsaWdodEljb25cIiwgXCJkYXJrSWNvblwiXVxuICBzdGF0aWMgdmFsdWVzID0geyBzdG9yYWdlS2V5OiBTdHJpbmcgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbGlnaHRJY29uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRhcmtJY29uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHN0b3JhZ2VLZXlWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICB0aGlzLmluaXRpYWxpemVUaGVtZSgpXG4gIH1cblxuICB0b2dnbGUoKTogdm9pZCB7XG4gICAgY29uc3QgaXNEYXJrID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZGFyaycpXG4gICAgY29uc3QgbmV3SXNEYXJrID0gIWlzRGFya1xuICAgIFxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMuc3RvcmFnZUtleVZhbHVlLCBKU09OLnN0cmluZ2lmeShuZXdJc0RhcmspKVxuICAgIHRoaXMudXBkYXRlVGhlbWUobmV3SXNEYXJrKVxuICB9XG5cbiAgcHJpdmF0ZSBpbml0aWFsaXplVGhlbWUoKTogdm9pZCB7XG4gICAgY29uc3Qgc2F2ZWRJc0RhcmsgPSB0aGlzLmdldFNhdmVkVGhlbWUoKVxuICAgIHRoaXMudXBkYXRlVGhlbWUoc2F2ZWRJc0RhcmspXG4gIH1cblxuICBwcml2YXRlIGdldFNhdmVkVGhlbWUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5zdG9yYWdlS2V5VmFsdWUpIHx8ICdmYWxzZScpXG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVRoZW1lKGlzRGFyazogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmIChpc0RhcmspIHtcbiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdkYXJrJylcbiAgICAgIHRoaXMubGlnaHRJY29uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICB0aGlzLmRhcmtJY29uVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgfSBlbHNlIHtcbiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdkYXJrJylcbiAgICAgIHRoaXMubGlnaHRJY29uVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICB0aGlzLmRhcmtJY29uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gJ0Bob3R3aXJlZC9zdGltdWx1cydcblxuLyoqXG4gKiBEcm9wZG93biBDb250cm9sbGVyXG4gKlxuICogQSB2ZXJzYXRpbGUgY29udHJvbGxlciBmb3IgdG9nZ2xpbmcgdmlzaWJpbGl0eSBvZiBkcm9wZG93biBtZW51cywgc2lkZWJhcnMsIGFuZCBtb2RhbHMuXG4gKlxuICogVXNhZ2U6XG4gKiAgIDxkaXYgZGF0YS1jb250cm9sbGVyPVwiZHJvcGRvd25cIj5cbiAqICAgICA8YnV0dG9uIGRhdGEtYWN0aW9uPVwiY2xpY2stPmRyb3Bkb3duI3RvZ2dsZVwiPlRvZ2dsZTwvYnV0dG9uPlxuICogICAgIDxkaXYgZGF0YS1kcm9wZG93bi10YXJnZXQ9XCJtZW51XCIgY2xhc3M9XCJoaWRkZW5cIj5cbiAqICAgICAgIE1lbnUgY29udGVudC4uLlxuICogICAgIDwvZGl2PlxuICogICA8L2Rpdj5cbiAqXG4gKiBUYXJnZXRzOlxuICogICAtIG1lbnUgKHJlcXVpcmVkKTogVGhlIGVsZW1lbnQgdG8gc2hvdy9oaWRlXG4gKiAgIC0gdHJpZ2dlciAob3B0aW9uYWwpOiBUaGUgYnV0dG9uIHRoYXQgdHJpZ2dlcnMgdGhlIGRyb3Bkb3duIChnZXRzIGFyaWEtZXhwYW5kZWQgYXR0cmlidXRlKVxuICpcbiAqIFZhbHVlczpcbiAqICAgLSBjbG9zZU9uQ2xpY2tPdXRzaWRlIChib29sZWFuLCBkZWZhdWx0OiB0cnVlKTogQXV0by1jbG9zZSB3aGVuIGNsaWNraW5nIG91dHNpZGVcbiAqXG4gKiBBY3Rpb25zOlxuICogICAtIHRvZ2dsZTogVG9nZ2xlIG1lbnUgdmlzaWJpbGl0eVxuICogICAtIG9wZW46IFNob3cgbWVudVxuICogICAtIGNsb3NlOiBIaWRlIG1lbnVcbiAqXG4gKiBFeGFtcGxlczpcbiAqICAgLy8gVXNlciBkcm9wZG93biB3aXRoIGF1dG8tY2xvc2VcbiAqICAgPGRpdiBkYXRhLWNvbnRyb2xsZXI9XCJkcm9wZG93blwiPlxuICogICAgIDxidXR0b24gZGF0YS1kcm9wZG93bi10YXJnZXQ9XCJ0cmlnZ2VyXCIgZGF0YS1hY3Rpb249XCJjbGljay0+ZHJvcGRvd24jdG9nZ2xlXCI+TWVudTwvYnV0dG9uPlxuICogICAgIDxkaXYgZGF0YS1kcm9wZG93bi10YXJnZXQ9XCJtZW51XCIgY2xhc3M9XCJoaWRkZW5cIj4uLi48L2Rpdj5cbiAqICAgPC9kaXY+XG4gKlxuICogICAvLyBNb2JpbGUgc2lkZWJhciB3aXRob3V0IGF1dG8tY2xvc2VcbiAqICAgPGRpdiBkYXRhLWNvbnRyb2xsZXI9XCJkcm9wZG93blwiIGRhdGEtZHJvcGRvd24tY2xvc2Utb24tY2xpY2stb3V0c2lkZS12YWx1ZT1cImZhbHNlXCI+XG4gKiAgICAgPGJ1dHRvbiBkYXRhLWFjdGlvbj1cImNsaWNrLT5kcm9wZG93biN0b2dnbGVcIj5cdTI2MzA8L2J1dHRvbj5cbiAqICAgICA8ZGl2IGRhdGEtZHJvcGRvd24tdGFyZ2V0PVwibWVudVwiIGNsYXNzPVwiaGlkZGVuXCI+Li4uPC9kaXY+XG4gKiAgIDwvZGl2PlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbJ21lbnUnLCAndHJpZ2dlciddXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgY2xvc2VPbkNsaWNrT3V0c2lkZTogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiB0cnVlIH1cbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbWVudVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0cmlnZ2VyVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1RyaWdnZXJUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBjbG9zZU9uQ2xpY2tPdXRzaWRlVmFsdWU6IGJvb2xlYW5cblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNsb3NlT25DbGlja091dHNpZGVWYWx1ZSkge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsaWNrT3V0c2lkZS5iaW5kKHRoaXMpKVxuICAgIH1cbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY2xvc2VPbkNsaWNrT3V0c2lkZVZhbHVlKSB7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xpY2tPdXRzaWRlLmJpbmQodGhpcykpXG4gICAgfVxuICB9XG5cbiAgdG9nZ2xlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGlzSGlkZGVuID0gdGhpcy5tZW51VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJylcbiAgICBpZiAoaXNIaWRkZW4pIHtcbiAgICAgIHRoaXMub3BlbihldmVudClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jbG9zZShldmVudClcbiAgICB9XG4gIH1cblxuICBvcGVuKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIHRoaXMubWVudVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIGlmICh0aGlzLmhhc1RyaWdnZXJUYXJnZXQpIHtcbiAgICAgIHRoaXMudHJpZ2dlclRhcmdldC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpXG4gICAgfVxuICB9XG5cbiAgY2xvc2UoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5tZW51VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgaWYgKHRoaXMuaGFzVHJpZ2dlclRhcmdldCkge1xuICAgICAgdGhpcy50cmlnZ2VyVGFyZ2V0LnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICdmYWxzZScpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjbGlja091dHNpZGUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmVsZW1lbnQuY29udGFpbnMoZXZlbnQudGFyZ2V0IGFzIE5vZGUpKSB7XG4gICAgICB0aGlzLmNsb3NlKGV2ZW50KVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuLy8gU0RLIEludGVncmF0aW9uIENvbnRyb2xsZXJcbi8vIEhhbmRsZXMgU0RLIGF2YWlsYWJpbGl0eSBkZXRlY3Rpb24gYW5kIGNvbW11bmljYXRpb24gd2l0aCBleHRlcm5hbCBkZXZlbG9wbWVudCB0b29sc1xuLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBzeXN0ZW0tY29udHJvbGxlclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwic2RrQnV0dG9uXCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgbWVzc2FnZTogU3RyaW5nLFxuICAgIGFjdGlvbjogU3RyaW5nXG4gIH1cblxuICAvLyBEZWNsYXJlIHRhcmdldHMgYW5kIHZhbHVlc1xuICBkZWNsYXJlIHJlYWRvbmx5IHNka0J1dHRvblRhcmdldDogSFRNTEJ1dHRvbkVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNTZGtCdXR0b25UYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBtZXNzYWdlVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHJlYWRvbmx5IGFjdGlvblZhbHVlOiBzdHJpbmdcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIENoZWNrIFNESyBhdmFpbGFiaWxpdHkgYW5kIHNob3cgU0RLIGJ1dHRvbnMgaWYgYXZhaWxhYmxlXG4gICAgdGhpcy5jaGVja1NES0F2YWlsYWJpbGl0eSgpXG4gIH1cblxuICAvLyBTZW5kIG1lc3NhZ2UgdG8gY2hhdGJveCAoU0RLIGludGVncmF0aW9uKVxuICBzZW5kVG9DaGF0Ym94KCk6IHZvaWQge1xuICAgIGlmICghd2luZG93LnNka1V0aWxzIHx8ICF3aW5kb3cuc2RrVXRpbHMuc2VuZE1lc3NhZ2UpIHtcbiAgICAgIGNvbnNvbGUud2FybignU0RLIG5vdCBhdmFpbGFibGUnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgbWVzc2FnZSA9IHRoaXMubWVzc2FnZVZhbHVlIHx8IHRoaXMuZ2VuZXJhdGVEZWZhdWx0TWVzc2FnZSgpXG4gICAgd2luZG93LnNka1V0aWxzLnNlbmRNZXNzYWdlKG1lc3NhZ2UpXG4gIH1cblxuICAvLyBTZW5kIGVycm9yIHRvIGNoYXRib3ggZm9yIGZpeGluZ1xuICBzZW5kRXJyb3JUb0NoYXRib3goKTogdm9pZCB7XG4gICAgaWYgKCF3aW5kb3cuc2RrVXRpbHMgfHwgIXdpbmRvdy5zZGtVdGlscy5zZW5kRXJyb3JGb3JGaXgpIHtcbiAgICAgIGNvbnNvbGUud2FybignU0RLIG5vdCBhdmFpbGFibGUnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgYWN0aW9uID0gdGhpcy5hY3Rpb25WYWx1ZSB8fCAnc2VuZEVycm9yRm9yRml4J1xuICAgIGlmIChhY3Rpb24gPT09ICdzZW5kRXJyb3JGb3JGaXgnKSB7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0aGlzLm1lc3NhZ2VWYWx1ZSB8fCAnVW5rbm93biBlcnJvcidcbiAgICAgIHdpbmRvdy5zZGtVdGlscy5zZW5kRXJyb3JGb3JGaXgoeyBlcnJvck1lc3NhZ2UgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IHRoaXMubWVzc2FnZVZhbHVlIHx8IHRoaXMuZ2VuZXJhdGVEZWZhdWx0TWVzc2FnZSgpXG4gICAgICB3aW5kb3cuc2RrVXRpbHMuc2VuZE1lc3NhZ2UobWVzc2FnZSlcbiAgICB9XG4gIH1cblxuICAvLyBDaGVjayBTREsgYXZhaWxhYmlsaXR5IGFuZCBzaG93L2hpZGUgU0RLIGJ1dHRvbnNcbiAgcHJpdmF0ZSBjaGVja1NES0F2YWlsYWJpbGl0eSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaGFzU2RrQnV0dG9uVGFyZ2V0KSByZXR1cm5cblxuICAgIGNvbnN0IGNoZWNrQW5kU2hvdyA9ICgpID0+IHtcbiAgICAgIGlmICh3aW5kb3cuaXNTREtBdmFpbGFibGUgJiYgd2luZG93LmlzU0RLQXZhaWxhYmxlKCkpIHtcbiAgICAgICAgdGhpcy5zZGtCdXR0b25UYXJnZXQuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIC8vIEluaXRpYWwgY2hlY2tcbiAgICBpZiAoIWNoZWNrQW5kU2hvdygpKSB7XG4gICAgICAvLyBSZXRyeSBhZnRlciAxIHNlY29uZCAoaW4gY2FzZSBTREsgaXMgbG9hZGluZylcbiAgICAgIHNldFRpbWVvdXQoY2hlY2tBbmRTaG93LCAxMDAwKVxuICAgICAgLy8gRmluYWwgcmV0cnkgYWZ0ZXIgMi44IHNlY29uZHNcbiAgICAgIHNldFRpbWVvdXQoY2hlY2tBbmRTaG93LCAyODAwKVxuICAgIH1cbiAgfVxuXG4gIC8vIEdlbmVyYXRlIGRlZmF1bHQgbWVzc2FnZSBmb3IgU0RLXG4gIHByaXZhdGUgZ2VuZXJhdGVEZWZhdWx0TWVzc2FnZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHVybCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5zdWJzdHJpbmcoMSlcbiAgICByZXR1cm4gYFBsZWFzZSBoZWxwIG1lIHdpdGggdGhpcyBwYWdlOiAke3VybH1cblxuVVJMOiAke3dpbmRvdy5sb2NhdGlvbi5ocmVmfVxuUGF0aDogJHt1cmx9XG5cbkkgbmVlZCBhc3Npc3RhbmNlIHdpdGggdGhpcyBwYWdlLmBcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuLypcbiAqIENsaXBib2FyZCBDb250cm9sbGVyXG4gKlxuICogVXNhZ2U6XG4gKiA8ZGl2IGRhdGEtY29udHJvbGxlcj1cImNsaXBib2FyZFwiPlxuICogICA8aW5wdXQgZGF0YS1jbGlwYm9hcmQtdGFyZ2V0PVwic291cmNlXCIgdmFsdWU9XCJ0ZXh0IHRvIGNvcHlcIj5cbiAqICAgPGJ1dHRvbiBkYXRhLWFjdGlvbj1cImNsaWNrLT5jbGlwYm9hcmQjY29weVwiPkNvcHk8L2J1dHRvbj5cbiAqIDwvZGl2PlxuICovXG4vLyBzdGltdWx1cy12YWxpZGF0b3I6IHN5c3RlbS1jb250cm9sbGVyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJzb3VyY2VcIl1cblxuICAvLyBEZWNsYXJlIHRhcmdldHNcbiAgZGVjbGFyZSByZWFkb25seSBzb3VyY2VUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcblxuICAvLyBDb3B5IGNvbnRlbnQgdG8gY2xpcGJvYXJkXG4gIGNvcHkoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgdGV4dFRvQ29weSA9IHRoaXMuc291cmNlVGFyZ2V0LnZhbHVlXG5cbiAgICBpZiAoIXRleHRUb0NvcHkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ05vIHRleHQgdG8gY29weSBmb3VuZCcpXG4gICAgICB0aGlzLnNob3dGYWlsdXJlKClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmICghd2luZG93LmNvcHlUb0NsaXBib2FyZCkge1xuICAgICAgY29uc29sZS5lcnJvcignd2luZG93LmNvcHlUb0NsaXBib2FyZCBub3QgYXZhaWxhYmxlJylcbiAgICAgIHRoaXMuc2hvd0ZhaWx1cmUoKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ0F0dGVtcHRpbmcgdG8gY29weTonLCB0ZXh0VG9Db3B5KVxuICAgIHdpbmRvdy5jb3B5VG9DbGlwYm9hcmQodGV4dFRvQ29weSkudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLnNob3dTdWNjZXNzKClcbiAgICB9KS5jYXRjaChfZXJyb3IgPT4ge1xuICAgICAgdGhpcy5zaG93RmFpbHVyZSgpXG4gICAgfSlcbiAgfVxuXG4gIC8vIFNob3cgc3VjY2VzcyBmZWVkYmFja1xuICBwcml2YXRlIHNob3dTdWNjZXNzKCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuZ2V0QnV0dG9uKClcbiAgICBjb25zdCBvcmlnaW5hbFRleHQgPSBidXR0b24uaW5uZXJIVE1MXG4gICAgY29uc3Qgb3JpZ2luYWxDbGFzcyA9IGJ1dHRvbi5jbGFzc05hbWVcblxuICAgIC8vIFNob3cgc3VjY2VzcyBzdGF0ZVxuICAgIGJ1dHRvbi5pbm5lckhUTUwgPSAnQ29waWVkISdcbiAgICBidXR0b24uY2xhc3NOYW1lID0gb3JpZ2luYWxDbGFzcy5yZXBsYWNlKC9idG4tXFx3Ky8sICdidG4tc3VjY2VzcycpXG5cbiAgICAvLyBSZXN0b3JlIG9yaWdpbmFsIHN0YXRlIGFmdGVyIDIgc2Vjb25kc1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgYnV0dG9uLmlubmVySFRNTCA9IG9yaWdpbmFsVGV4dFxuICAgICAgYnV0dG9uLmNsYXNzTmFtZSA9IG9yaWdpbmFsQ2xhc3NcbiAgICB9LCAyMDAwKVxuICB9XG5cbiAgLy8gU2hvdyBmYWlsdXJlIGZlZWRiYWNrXG4gIHByaXZhdGUgc2hvd0ZhaWx1cmUoKTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gdGhpcy5nZXRCdXR0b24oKVxuICAgIGNvbnN0IG9yaWdpbmFsVGV4dCA9IGJ1dHRvbi5pbm5lckhUTUxcbiAgICBjb25zdCBvcmlnaW5hbENsYXNzID0gYnV0dG9uLmNsYXNzTmFtZVxuXG4gICAgLy8gU2hvdyBmYWlsdXJlIHN0YXRlXG4gICAgYnV0dG9uLmlubmVySFRNTCA9ICdDb3B5IEZhaWxlZCEnXG4gICAgYnV0dG9uLmNsYXNzTmFtZSA9IG9yaWdpbmFsQ2xhc3MucmVwbGFjZSgvYnRuLVxcdysvLCAnYnRuLWRhbmdlcicpXG5cbiAgICAvLyBSZXN0b3JlIG9yaWdpbmFsIHN0YXRlIGFmdGVyIDIgc2Vjb25kc1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgYnV0dG9uLmlubmVySFRNTCA9IG9yaWdpbmFsVGV4dFxuICAgICAgYnV0dG9uLmNsYXNzTmFtZSA9IG9yaWdpbmFsQ2xhc3NcbiAgICB9LCAyMDAwKVxuICB9XG5cbiAgLy8gR2V0IHRoZSBidXR0b24gdG8gc2hvdyBmZWVkYmFjayBvblxuICBwcml2YXRlIGdldEJ1dHRvbigpOiBIVE1MRWxlbWVudCB7XG4gICAgLy8gTG9vayBmb3IgYSBidXR0b24gd2l0aGluIHRoZSBjb250cm9sbGVyIHNjb3BlXG4gICAgY29uc3QgYnV0dG9uID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpXG4gICAgaWYgKGJ1dHRvbikge1xuICAgICAgcmV0dXJuIGJ1dHRvblxuICAgIH1cblxuICAgIC8vIEZhbGwgYmFjayB0byBjb250cm9sbGVyIGVsZW1lbnQgaWYgaXQncyBhIGJ1dHRvblxuICAgIHJldHVybiB0aGlzLmVsZW1lbnRcbiAgfVxuXG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIFwibW9kYWxcIixcbiAgICBcImRlcGFydHVyZVwiLFxuICAgIFwiZGVzdGluYXRpb25cIixcbiAgICBcImRlcGFydHVyZUNpdHlJbnB1dFwiLFxuICAgIFwiZGVzdGluYXRpb25DaXR5SW5wdXRcIixcbiAgICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gICAgXCJ0YWJEZXBhcnR1cmVcIixcbiAgICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gICAgXCJ0YWJEZXN0aW5hdGlvblwiLFxuICAgIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBcInRhYkRvbWVzdGljXCIsXG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIFwidGFiSW50ZXJuYXRpb25hbFwiLFxuICAgIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBcInNlYXJjaElucHV0XCIsXG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIFwiZG9tZXN0aWNMaXN0XCIsXG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIFwiaW50ZXJuYXRpb25hbExpc3RcIixcbiAgICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gICAgXCJoaXN0b3J5U2VjdGlvblwiLFxuICAgIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBcImN1cnJlbnRDaXR5XCIsXG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIFwibG9jYXRpb25TdGF0dXNcIixcbiAgICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gICAgXCJsb2NhdGlvbkJ1dHRvblwiLFxuICAgIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBcImxvY2F0aW9uVGV4dFwiLFxuICAgIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBcImxvY2F0aW9uU3Bpbm5lclwiLFxuICAgIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBcImxvY2F0ZWRDaXR5XCIsXG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIFwibG9jYXRlZENpdHlCdXR0b25cIixcbiAgICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gICAgXCJjdXJyZW50UmVnaW9uVGFiXCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgZGVwYXJ0dXJlQ2l0eTogU3RyaW5nLFxuICAgIGRlc3RpbmF0aW9uQ2l0eTogU3RyaW5nLFxuICAgIGVuYWJsZU11bHRpU2VsZWN0OiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IHRydWUgfSxcbiAgICBtb2RhbFRpdGxlOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJycgfVxuICB9XG5cbiAgcHJpdmF0ZSBzZWxlY3Rpb25UeXBlOiAnZGVwYXJ0dXJlJyB8ICdkZXN0aW5hdGlvbicgPSAnZGVwYXJ0dXJlJ1xuICBwcml2YXRlIGlzTXVsdGlTZWxlY3RNb2RlOiBib29sZWFuID0gZmFsc2VcbiAgcHJpdmF0ZSBzZWxlY3RlZENpdGllczogc3RyaW5nW10gPSBbXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVwYXJ0dXJlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRlc3RpbmF0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRlcGFydHVyZUNpdHlJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRlc3RpbmF0aW9uQ2l0eUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIC8vIE9wdGlvbmFsIHRhcmdldCBjaGVja2VycyAtIHRoZXNlIG1hcmsgdGFyZ2V0cyBhcyBvcHRpb25hbFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0RlcGFydHVyZVRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0Rlc3RpbmF0aW9uVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzRGVwYXJ0dXJlQ2l0eUlucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzRGVzdGluYXRpb25DaXR5SW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICBkZWNsYXJlIHJlYWRvbmx5IG1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gIGRlY2xhcmUgcmVhZG9ubHkgdGFiRGVwYXJ0dXJlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gIGRlY2xhcmUgcmVhZG9ubHkgdGFiRGVzdGluYXRpb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgZGVjbGFyZSByZWFkb25seSB0YWJEb21lc3RpY1RhcmdldDogSFRNTEVsZW1lbnRcbiAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICBkZWNsYXJlIHJlYWRvbmx5IHRhYkludGVybmF0aW9uYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgZGVjbGFyZSByZWFkb25seSBzZWFyY2hJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gIGRlY2xhcmUgcmVhZG9ubHkgZG9tZXN0aWNMaXN0VGFyZ2V0OiBIVE1MRWxlbWVudFxuICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gIGRlY2xhcmUgcmVhZG9ubHkgaW50ZXJuYXRpb25hbExpc3RUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgZGVjbGFyZSByZWFkb25seSBoaXN0b3J5U2VjdGlvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICBkZWNsYXJlIHJlYWRvbmx5IGN1cnJlbnRDaXR5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gIGRlY2xhcmUgcmVhZG9ubHkgbG9jYXRpb25TdGF0dXNUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgZGVjbGFyZSByZWFkb25seSBsb2NhdGlvbkJ1dHRvblRhcmdldDogSFRNTEJ1dHRvbkVsZW1lbnRcbiAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICBkZWNsYXJlIHJlYWRvbmx5IGxvY2F0aW9uVGV4dFRhcmdldDogSFRNTEVsZW1lbnRcbiAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICBkZWNsYXJlIHJlYWRvbmx5IGxvY2F0aW9uU3Bpbm5lclRhcmdldDogSFRNTEVsZW1lbnRcbiAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICBkZWNsYXJlIHJlYWRvbmx5IGxvY2F0ZWRDaXR5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gIGRlY2xhcmUgcmVhZG9ubHkgbG9jYXRlZENpdHlCdXR0b25UYXJnZXQ6IEhUTUxCdXR0b25FbGVtZW50XG4gIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgZGVjbGFyZSByZWFkb25seSBoYXNDdXJyZW50UmVnaW9uVGFiVGFyZ2V0OiBib29sZWFuXG4gIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgZGVjbGFyZSByZWFkb25seSBjdXJyZW50UmVnaW9uVGFiVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIGRlcGFydHVyZUNpdHlWYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgZGVzdGluYXRpb25DaXR5VmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIGVuYWJsZU11bHRpU2VsZWN0VmFsdWU6IGJvb2xlYW5cbiAgZGVjbGFyZSBtb2RhbFRpdGxlVmFsdWU6IHN0cmluZ1xuXG4gIHByaXZhdGUgY3VycmVudE11bHRpQ2l0eVNlZ21lbnRJZDogc3RyaW5nIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSBjdXJyZW50TXVsdGlDaXR5Q2l0eVR5cGU6IHN0cmluZyB8IG51bGwgPSBudWxsXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkNpdHlTZWxlY3RvciBjb25uZWN0ZWRcIiwgeyBlbmFibGVNdWx0aVNlbGVjdDogdGhpcy5lbmFibGVNdWx0aVNlbGVjdFZhbHVlIH0pXG4gICAgLy8gSW5pdGlhbGl6ZSBkZWZhdWx0IHZhbHVlc1xuICAgIGlmICghdGhpcy5kZXBhcnR1cmVDaXR5VmFsdWUpIHRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlID0gXCJcdTUzMTdcdTRFQUNcIlxuICAgIGlmICghdGhpcy5kZXN0aW5hdGlvbkNpdHlWYWx1ZSkgdGhpcy5kZXN0aW5hdGlvbkNpdHlWYWx1ZSA9IFwiXHU2NzZEXHU1RERFXCJcbiAgICBcbiAgICAvLyBTZXQgaW5pdGlhbCB2YWx1ZXMgdG8gaGlkZGVuIGlucHV0cyAob25seSBpZiB0YXJnZXRzIGV4aXN0KVxuICAgIGlmICh0aGlzLmhhc0RlcGFydHVyZUNpdHlJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5kZXBhcnR1cmVDaXR5SW5wdXRUYXJnZXQudmFsdWUgPSB0aGlzLmRlcGFydHVyZUNpdHlWYWx1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5oYXNEZXN0aW5hdGlvbkNpdHlJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5kZXN0aW5hdGlvbkNpdHlJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuZGVzdGluYXRpb25DaXR5VmFsdWVcbiAgICB9XG4gICAgXG4gICAgLy8gSGlkZSBtdWx0aS1zZWxlY3QgVUkgaWYgZGlzYWJsZWRcbiAgICBpZiAoIXRoaXMuZW5hYmxlTXVsdGlTZWxlY3RWYWx1ZSkge1xuICAgICAgdGhpcy5oaWRlTXVsdGlTZWxlY3RVSSgpXG4gICAgfVxuICAgIFxuICAgIC8vIExpc3RlbiBmb3IgbXVsdGktY2l0eSBldmVudHNcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbXVsdGktY2l0eTpvcGVuLWNpdHktc2VsZWN0b3InLCB0aGlzLmhhbmRsZU11bHRpQ2l0eU9wZW4uYmluZCh0aGlzKSlcbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ211bHRpLWNpdHk6b3Blbi1jaXR5LXNlbGVjdG9yJywgdGhpcy5oYW5kbGVNdWx0aUNpdHlPcGVuLmJpbmQodGhpcykpXG4gIH1cblxuICAvLyBIYW5kbGUgbXVsdGktY2l0eSBjaXR5IHNlbGVjdG9yIHJlcXVlc3RcbiAgcHJpdmF0ZSBoYW5kbGVNdWx0aUNpdHlPcGVuKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnRcbiAgICBjb25zdCB7IHNlZ21lbnRJZCwgY2l0eVR5cGUgfSA9IGN1c3RvbUV2ZW50LmRldGFpbFxuICAgIGNvbnNvbGUubG9nKCdDaXR5IHNlbGVjdG9yOiBSZWNlaXZlZCBtdWx0aS1jaXR5IG9wZW4gcmVxdWVzdCcsIHsgc2VnbWVudElkLCBjaXR5VHlwZSB9KVxuICAgIHRoaXMuY3VycmVudE11bHRpQ2l0eVNlZ21lbnRJZCA9IHNlZ21lbnRJZFxuICAgIHRoaXMuY3VycmVudE11bHRpQ2l0eUNpdHlUeXBlID0gY2l0eVR5cGVcbiAgICB0aGlzLnNlbGVjdGlvblR5cGUgPSBjaXR5VHlwZSA9PT0gJ2RlcGFydHVyZScgPyAnZGVwYXJ0dXJlJyA6ICdkZXN0aW5hdGlvbidcbiAgICB0aGlzLnVwZGF0ZU1vZGFsVGl0bGUoKVxuICAgIHRoaXMuc2hvd01vZGFsKClcbiAgfVxuXG4gIC8vIE9wZW4gbW9kYWwgZm9yIGRlcGFydHVyZSBjaXR5IHNlbGVjdGlvblxuICBvcGVuRGVwYXJ0dXJlKCk6IHZvaWQge1xuICAgIHRoaXMuc2VsZWN0aW9uVHlwZSA9ICdkZXBhcnR1cmUnXG4gICAgdGhpcy5pc011bHRpU2VsZWN0TW9kZSA9IGZhbHNlXG4gICAgdGhpcy5zZWxlY3RlZENpdGllcyA9IFtdXG4gICAgdGhpcy51cGRhdGVNb2RhbFRpdGxlKClcbiAgICB0aGlzLnVwZGF0ZU11bHRpU2VsZWN0VUkoKVxuICAgIHRoaXMuc2hvd01vZGFsKClcbiAgfVxuXG4gIC8vIE9wZW4gbW9kYWwgZm9yIGRlc3RpbmF0aW9uIGNpdHkgc2VsZWN0aW9uXG4gIG9wZW5EZXN0aW5hdGlvbigpOiB2b2lkIHtcbiAgICB0aGlzLnNlbGVjdGlvblR5cGUgPSAnZGVzdGluYXRpb24nXG4gICAgdGhpcy5pc011bHRpU2VsZWN0TW9kZSA9IGZhbHNlXG4gICAgdGhpcy5zZWxlY3RlZENpdGllcyA9IFtdXG4gICAgdGhpcy51cGRhdGVNb2RhbFRpdGxlKClcbiAgICB0aGlzLnVwZGF0ZU11bHRpU2VsZWN0VUkoKVxuICAgIHRoaXMuc2hvd01vZGFsKClcbiAgfVxuXG4gIC8vIFNob3cgbW9kYWxcbiAgc2hvd01vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbidcbiAgfVxuXG4gIC8vIENsb3NlIG1vZGFsXG4gIGNsb3NlTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJ1xuICAgIHRoaXMuY2xlYXJTZWFyY2goKVxuICB9XG5cbiAgLy8gU2VsZWN0IGNpdHlcbiAgc2VsZWN0Q2l0eShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgY2l0eU5hbWUgPSBidXR0b24uZGF0YXNldC5jaXR5TmFtZSB8fCAnJ1xuICAgIGNvbnN0IGlzSW50ZXJuYXRpb25hbCA9IGJ1dHRvbi5kYXRhc2V0LmludGVybmF0aW9uYWwgPT09ICd0cnVlJ1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCdDaXR5IHNlbGVjdG9yOiBDaXR5IHNlbGVjdGVkOicsIGNpdHlOYW1lLCAnaW50ZXJuYXRpb25hbDonLCBpc0ludGVybmF0aW9uYWwpXG4gICAgXG4gICAgLy8gTXVsdGktc2VsZWN0IG1vZGVcbiAgICBpZiAodGhpcy5pc011bHRpU2VsZWN0TW9kZSkge1xuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRDaXRpZXMuaW5jbHVkZXMoY2l0eU5hbWUpKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRDaXRpZXMgPSB0aGlzLnNlbGVjdGVkQ2l0aWVzLmZpbHRlcihjaXR5ID0+IGNpdHkgIT09IGNpdHlOYW1lKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENpdGllcy5wdXNoKGNpdHlOYW1lKVxuICAgICAgfVxuICAgICAgdGhpcy51cGRhdGVTZWxlY3RlZENpdGllc0Rpc3BsYXkoKVxuICAgICAgdGhpcy51cGRhdGVDaXR5QnV0dG9uU3RhdGVzKClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGZvciBtdWx0aS1jaXR5XG4gICAgaWYgKHRoaXMuY3VycmVudE11bHRpQ2l0eVNlZ21lbnRJZCAmJiB0aGlzLmN1cnJlbnRNdWx0aUNpdHlDaXR5VHlwZSkge1xuICAgICAgY29uc29sZS5sb2coJ0NpdHkgc2VsZWN0b3I6IE11bHRpLWNpdHkgbW9kZSwgZGlzcGF0Y2hpbmcgZXZlbnQnLCB7XG4gICAgICAgIHNlZ21lbnRJZDogdGhpcy5jdXJyZW50TXVsdGlDaXR5U2VnbWVudElkLFxuICAgICAgICBjaXR5VHlwZTogdGhpcy5jdXJyZW50TXVsdGlDaXR5Q2l0eVR5cGUsXG4gICAgICAgIGNpdHlOYW1lOiBjaXR5TmFtZVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gVHJpZ2dlciBldmVudCB0byB1cGRhdGUgbXVsdGktY2l0eSBzZWdtZW50IC0gZGlzcGF0Y2ggb24gZG9jdW1lbnQgZm9yIGJldHRlciBwcm9wYWdhdGlvblxuICAgICAgY29uc3QgdXBkYXRlRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2NpdHktc2VsZWN0b3I6Y2l0eS1zZWxlY3RlZCcsIHtcbiAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgc2VnbWVudElkOiB0aGlzLmN1cnJlbnRNdWx0aUNpdHlTZWdtZW50SWQsXG4gICAgICAgICAgY2l0eVR5cGU6IHRoaXMuY3VycmVudE11bHRpQ2l0eUNpdHlUeXBlLFxuICAgICAgICAgIGNpdHlOYW1lOiBjaXR5TmFtZVxuICAgICAgICB9LFxuICAgICAgICBidWJibGVzOiB0cnVlXG4gICAgICB9KVxuICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudCh1cGRhdGVFdmVudClcbiAgICAgIFxuICAgICAgLy8gUmVzZXQgbXVsdGktY2l0eSBzdGF0ZVxuICAgICAgdGhpcy5jdXJyZW50TXVsdGlDaXR5U2VnbWVudElkID0gbnVsbFxuICAgICAgdGhpcy5jdXJyZW50TXVsdGlDaXR5Q2l0eVR5cGUgPSBudWxsXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCdDaXR5IHNlbGVjdG9yOiBSZWd1bGFyIG1vZGUnKVxuICAgICAgLy8gUmVndWxhciBzaW5nbGUvcm91bmQgdHJpcCBzZWxlY3Rpb25cbiAgICAgIGlmICh0aGlzLnNlbGVjdGlvblR5cGUgPT09ICdkZXBhcnR1cmUnKSB7XG4gICAgICAgIHRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlID0gY2l0eU5hbWVcbiAgICAgICAgaWYgKHRoaXMuaGFzRGVwYXJ0dXJlVGFyZ2V0KSB7XG4gICAgICAgICAgdGhpcy5kZXBhcnR1cmVUYXJnZXQudGV4dENvbnRlbnQgPSBjaXR5TmFtZVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhhc0RlcGFydHVyZUNpdHlJbnB1dFRhcmdldCkge1xuICAgICAgICAgIHRoaXMuZGVwYXJ0dXJlQ2l0eUlucHV0VGFyZ2V0LnZhbHVlID0gY2l0eU5hbWVcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gRGlzcGF0Y2ggY2l0eS1jaGFuZ2VkIGV2ZW50IGZvciB0b3VyLWdyb3VwLWZpbHRlciB0byBsaXN0ZW5cbiAgICAgICAgdGhpcy5kaXNwYXRjaENpdHlDaGFuZ2VkRXZlbnQoY2l0eU5hbWUpXG4gICAgICAgIFxuICAgICAgICAvLyBEaXNwYXRjaCBob3RlbC1zcGVjaWZpYyBldmVudCBmb3IgaG90ZWwtc2VhcmNoIGNvbnRyb2xsZXJcbiAgICAgICAgdGhpcy5kaXNwYXRjaEhvdGVsQ2l0eVVwZGF0ZUV2ZW50KGNpdHlOYW1lLCBpc0ludGVybmF0aW9uYWwpXG4gICAgICAgIFxuICAgICAgICAvLyBJZiBpbnRlcm5hdGlvbmFsIGNpdHkgc2VsZWN0ZWQgaW4gaG90ZWxzIGNvbnRleHQsIHN3aXRjaCB0byBpbnRlcm5hdGlvbmFsIHRhYlxuICAgICAgICBpZiAoaXNJbnRlcm5hdGlvbmFsKSB7XG4gICAgICAgICAgdGhpcy5zd2l0Y2hUb0ludGVybmF0aW9uYWxUYWIoKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uQ2l0eVZhbHVlID0gY2l0eU5hbWVcbiAgICAgICAgaWYgKHRoaXMuaGFzRGVzdGluYXRpb25UYXJnZXQpIHtcbiAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uVGFyZ2V0LnRleHRDb250ZW50ID0gY2l0eU5hbWVcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5oYXNEZXN0aW5hdGlvbkNpdHlJbnB1dFRhcmdldCkge1xuICAgICAgICAgIHRoaXMuZGVzdGluYXRpb25DaXR5SW5wdXRUYXJnZXQudmFsdWUgPSBjaXR5TmFtZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMuY2xvc2VNb2RhbCgpXG4gIH1cblxuICAvLyBEaXNwYXRjaCBjaXR5LWNoYW5nZWQgZXZlbnQgZm9yIG90aGVyIGNvbnRyb2xsZXJzIChsaWtlIHRvdXItZ3JvdXAtZmlsdGVyKVxuICBwcml2YXRlIGRpc3BhdGNoQ2l0eUNoYW5nZWRFdmVudChjaXR5TmFtZTogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgY2l0eUNoYW5nZWRFdmVudCA9IG5ldyBDdXN0b21FdmVudCgnY2l0eS1zZWxlY3RvcjpjaXR5LWNoYW5nZWQnLCB7XG4gICAgICBkZXRhaWw6IHsgY2l0eU5hbWUgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICB9KVxuICAgIHRoaXMuZWxlbWVudC5kaXNwYXRjaEV2ZW50KGNpdHlDaGFuZ2VkRXZlbnQpXG4gICAgY29uc29sZS5sb2coJ0NpdHkgc2VsZWN0b3I6IERpc3BhdGNoZWQgY2l0eS1jaGFuZ2VkIGV2ZW50JywgY2l0eU5hbWUpXG4gIH1cblxuICAvLyBEaXNwYXRjaCBob3RlbC1zcGVjaWZpYyBjaXR5IHVwZGF0ZSBldmVudFxuICBwcml2YXRlIGRpc3BhdGNoSG90ZWxDaXR5VXBkYXRlRXZlbnQoY2l0eU5hbWU6IHN0cmluZywgaXNJbnRlcm5hdGlvbmFsOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcbiAgICBjb25zdCBob3RlbENpdHlFdmVudCA9IG5ldyBDdXN0b21FdmVudCgnY2l0eS1zZWxlY3RvcjpjaXR5LXNlbGVjdGVkLWZvci1ob3RlbCcsIHtcbiAgICAgIGRldGFpbDogeyBcbiAgICAgICAgY2l0eU5hbWUsXG4gICAgICAgIGlzSW50ZXJuYXRpb25hbCBcbiAgICAgIH0sXG4gICAgICBidWJibGVzOiB0cnVlXG4gICAgfSlcbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGhvdGVsQ2l0eUV2ZW50KVxuICAgIGNvbnNvbGUubG9nKCdDaXR5IHNlbGVjdG9yOiBEaXNwYXRjaGVkIGhvdGVsIGNpdHkgdXBkYXRlIGV2ZW50JywgeyBjaXR5TmFtZSwgaXNJbnRlcm5hdGlvbmFsIH0pXG4gIH1cblxuICAvLyBTd2l0Y2ggY2l0aWVzXG4gIHN3aXRjaENpdGllcygpOiB2b2lkIHtcbiAgICBjb25zdCB0ZW1wID0gdGhpcy5kZXBhcnR1cmVDaXR5VmFsdWVcbiAgICB0aGlzLmRlcGFydHVyZUNpdHlWYWx1ZSA9IHRoaXMuZGVzdGluYXRpb25DaXR5VmFsdWVcbiAgICB0aGlzLmRlc3RpbmF0aW9uQ2l0eVZhbHVlID0gdGVtcFxuICAgIFxuICAgIGlmICh0aGlzLmhhc0RlcGFydHVyZVRhcmdldCkge1xuICAgICAgdGhpcy5kZXBhcnR1cmVUYXJnZXQudGV4dENvbnRlbnQgPSB0aGlzLmRlcGFydHVyZUNpdHlWYWx1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5oYXNEZXN0aW5hdGlvblRhcmdldCkge1xuICAgICAgdGhpcy5kZXN0aW5hdGlvblRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMuZGVzdGluYXRpb25DaXR5VmFsdWVcbiAgICB9XG4gICAgaWYgKHRoaXMuaGFzRGVwYXJ0dXJlQ2l0eUlucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLmRlcGFydHVyZUNpdHlJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlXG4gICAgfVxuICAgIGlmICh0aGlzLmhhc0Rlc3RpbmF0aW9uQ2l0eUlucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLmRlc3RpbmF0aW9uQ2l0eUlucHV0VGFyZ2V0LnZhbHVlID0gdGhpcy5kZXN0aW5hdGlvbkNpdHlWYWx1ZVxuICAgIH1cbiAgfVxuXG4gIC8vIFN3aXRjaCBiZXR3ZWVuIGRvbWVzdGljIGFuZCBpbnRlcm5hdGlvbmFsIHRhYnNcbiAgc2hvd0RvbWVzdGljKCk6IHZvaWQge1xuICAgIHRoaXMuZG9tZXN0aWNMaXN0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgdGhpcy5kb21lc3RpY0xpc3RUYXJnZXQuY2xhc3NMaXN0LmFkZCgnZmxleCcpXG4gICAgdGhpcy5pbnRlcm5hdGlvbmFsTGlzdFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIHRoaXMuaW50ZXJuYXRpb25hbExpc3RUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZmxleCcpXG4gICAgXG4gICAgLy8gVXBkYXRlIHRhYiBzdHlsZXNcbiAgICB0aGlzLnRhYkRvbWVzdGljVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS05MDAnKVxuICAgIHRoaXMudGFiRG9tZXN0aWNUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTUwMCcpXG4gICAgdGhpcy50YWJJbnRlcm5hdGlvbmFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS05MDAnKVxuICAgIHRoaXMudGFiSW50ZXJuYXRpb25hbFRhcmdldC5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktNTAwJylcbiAgICBcbiAgICAvLyBTaG93L2hpZGUgdW5kZXJsaW5lXG4gICAgY29uc3QgZG9tZXN0aWNVbmRlcmxpbmUgPSB0aGlzLnRhYkRvbWVzdGljVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ2RpdicpXG4gICAgY29uc3QgaW50ZXJuYXRpb25hbFVuZGVybGluZSA9IHRoaXMudGFiSW50ZXJuYXRpb25hbFRhcmdldC5xdWVyeVNlbGVjdG9yKCdkaXYnKVxuICAgIGlmIChkb21lc3RpY1VuZGVybGluZSkgZG9tZXN0aWNVbmRlcmxpbmUuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICBpZiAoaW50ZXJuYXRpb25hbFVuZGVybGluZSkgaW50ZXJuYXRpb25hbFVuZGVybGluZS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICB9XG5cbiAgc2hvd0ludGVybmF0aW9uYWwoKTogdm9pZCB7XG4gICAgdGhpcy5kb21lc3RpY0xpc3RUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICB0aGlzLmRvbWVzdGljTGlzdFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdmbGV4JylcbiAgICB0aGlzLmludGVybmF0aW9uYWxMaXN0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgdGhpcy5pbnRlcm5hdGlvbmFsTGlzdFRhcmdldC5jbGFzc0xpc3QuYWRkKCdmbGV4JylcbiAgICBcbiAgICAvLyBVcGRhdGUgdGFiIHN0eWxlc1xuICAgIHRoaXMudGFiRG9tZXN0aWNUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTkwMCcpXG4gICAgdGhpcy50YWJEb21lc3RpY1RhcmdldC5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktNTAwJylcbiAgICB0aGlzLnRhYkludGVybmF0aW9uYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTkwMCcpXG4gICAgdGhpcy50YWJJbnRlcm5hdGlvbmFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS01MDAnKVxuICAgIFxuICAgIC8vIFNob3cvaGlkZSB1bmRlcmxpbmVcbiAgICBjb25zdCBkb21lc3RpY1VuZGVybGluZSA9IHRoaXMudGFiRG9tZXN0aWNUYXJnZXQucXVlcnlTZWxlY3RvcignZGl2JylcbiAgICBjb25zdCBpbnRlcm5hdGlvbmFsVW5kZXJsaW5lID0gdGhpcy50YWJJbnRlcm5hdGlvbmFsVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ2RpdicpXG4gICAgaWYgKGRvbWVzdGljVW5kZXJsaW5lKSBkb21lc3RpY1VuZGVybGluZS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIGlmIChpbnRlcm5hdGlvbmFsVW5kZXJsaW5lKSBpbnRlcm5hdGlvbmFsVW5kZXJsaW5lLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gIH1cblxuICAvLyBTZWFyY2ggY2l0aWVzXG4gIHNlYXJjaCgpOiB2b2lkIHtcbiAgICBjb25zdCBxdWVyeSA9IHRoaXMuc2VhcmNoSW5wdXRUYXJnZXQudmFsdWUudG9Mb3dlckNhc2UoKS50cmltKClcbiAgICBcbiAgICBpZiAocXVlcnkgPT09ICcnKSB7XG4gICAgICB0aGlzLmNsZWFyU2VhcmNoKClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIEhpZGUgaGlzdG9yeSBzZWN0aW9uIHdoZW4gc2VhcmNoaW5nXG4gICAgdGhpcy5oaXN0b3J5U2VjdGlvblRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIFxuICAgIC8vIEZpbHRlciBjaXRpZXMgaW4gYm90aCBsaXN0c1xuICAgIHRoaXMuZmlsdGVyQ2l0aWVzKHRoaXMuZG9tZXN0aWNMaXN0VGFyZ2V0LCBxdWVyeSlcbiAgICBpZiAoIXRoaXMuaW50ZXJuYXRpb25hbExpc3RUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgICAgdGhpcy5maWx0ZXJDaXRpZXModGhpcy5pbnRlcm5hdGlvbmFsTGlzdFRhcmdldCwgcXVlcnkpXG4gICAgfVxuICB9XG5cbiAgLy8gRmlsdGVyIGNpdGllcyBoZWxwZXJcbiAgcHJpdmF0ZSBmaWx0ZXJDaXRpZXMobGlzdFRhcmdldDogSFRNTEVsZW1lbnQsIHF1ZXJ5OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBjaXR5QnV0dG9ucyA9IGxpc3RUYXJnZXQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtY2l0eS1uYW1lXScpXG4gICAgY2l0eUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgICBjb25zdCBjaXR5TmFtZSA9IChidXR0b24gYXMgSFRNTEVsZW1lbnQpLmRhdGFzZXQuY2l0eU5hbWU/LnRvTG93ZXJDYXNlKCkgfHwgJydcbiAgICAgIGNvbnN0IGNpdHlQaW55aW4gPSAoYnV0dG9uIGFzIEhUTUxFbGVtZW50KS5kYXRhc2V0LmNpdHlQaW55aW4/LnRvTG93ZXJDYXNlKCkgfHwgJydcbiAgICAgIFxuICAgICAgaWYgKGNpdHlOYW1lLmluY2x1ZGVzKHF1ZXJ5KSB8fCBjaXR5UGlueWluLmluY2x1ZGVzKHF1ZXJ5KSkge1xuICAgICAgICAoYnV0dG9uIGFzIEhUTUxFbGVtZW50KS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgKGJ1dHRvbiBhcyBIVE1MRWxlbWVudCkuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgLy8gQ2xlYXIgc2VhcmNoXG4gIGNsZWFyU2VhcmNoKCk6IHZvaWQge1xuICAgIHRoaXMuc2VhcmNoSW5wdXRUYXJnZXQudmFsdWUgPSAnJ1xuICAgIHRoaXMuaGlzdG9yeVNlY3Rpb25UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICBcbiAgICAvLyBTaG93IGFsbCBjaXRpZXNcbiAgICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gICAgY29uc3QgYWxsQnV0dG9ucyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1jaXR5LW5hbWVdJylcbiAgICBhbGxCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgICAgKGJ1dHRvbiBhcyBIVE1MRWxlbWVudCkuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICB9KVxuICB9XG5cbiAgLy8gVXBkYXRlIG1vZGFsIHRpdGxlIGJhc2VkIG9uIHNlbGVjdGlvbiB0eXBlXG4gIHByaXZhdGUgdXBkYXRlTW9kYWxUaXRsZSgpOiB2b2lkIHtcbiAgICBjb25zdCBzaW5nbGVTZWxlY3RUaXRsZSA9IHRoaXMubW9kYWxUYXJnZXQucXVlcnlTZWxlY3RvcignW2RhdGEtc2luZ2xlLXNlbGVjdC10aXRsZV0nKVxuICAgIGNvbnN0IG11bHRpU2VsZWN0VGl0bGUgPSB0aGlzLm1vZGFsVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW11bHRpLXNlbGVjdC10aXRsZV0nKVxuICAgIFxuICAgIC8vIElmIGN1c3RvbSBtb2RhbCB0aXRsZSBpcyBwcm92aWRlZCBhbmQgbXVsdGktc2VsZWN0IGlzIGRpc2FibGVkLCB1c2UgY3VzdG9tIHRpdGxlXG4gICAgaWYgKCF0aGlzLmVuYWJsZU11bHRpU2VsZWN0VmFsdWUgJiYgdGhpcy5tb2RhbFRpdGxlVmFsdWUpIHtcbiAgICAgIGlmIChzaW5nbGVTZWxlY3RUaXRsZSkge1xuICAgICAgICBzaW5nbGVTZWxlY3RUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMubW9kYWxUaXRsZVZhbHVlXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIERlZmF1bHQgYmVoYXZpb3I6IHVwZGF0ZSBiYXNlZCBvbiBzZWxlY3Rpb24gdHlwZVxuICAgICAgaWYgKHNpbmdsZVNlbGVjdFRpdGxlKSB7XG4gICAgICAgIHNpbmdsZVNlbGVjdFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5zZWxlY3Rpb25UeXBlID09PSAnZGVwYXJ0dXJlJyA/ICdcdTUzNTVcdTkwMDlcdTUxRkFcdTUzRDFcdTU3MzAnIDogJ1x1NTM1NVx1OTAwOVx1NzZFRVx1NzY4NFx1NTczMCdcbiAgICAgIH1cbiAgICAgIGlmIChtdWx0aVNlbGVjdFRpdGxlKSB7XG4gICAgICAgIG11bHRpU2VsZWN0VGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLnNlbGVjdGlvblR5cGUgPT09ICdkZXBhcnR1cmUnID8gJ1x1NTkxQVx1OTAwOVx1NTFGQVx1NTNEMVx1NTczMCcgOiAnXHU1OTFBXHU5MDA5XHU3NkVFXHU3Njg0XHU1NzMwJ1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFN3aXRjaCB0byBzaW5nbGUgc2VsZWN0IG1vZGVcbiAgc3dpdGNoVG9TaW5nbGVTZWxlY3QoKTogdm9pZCB7XG4gICAgdGhpcy5pc011bHRpU2VsZWN0TW9kZSA9IGZhbHNlXG4gICAgdGhpcy5zZWxlY3RlZENpdGllcyA9IFtdXG4gICAgdGhpcy51cGRhdGVNb2RhbFRpdGxlKClcbiAgICB0aGlzLnVwZGF0ZU11bHRpU2VsZWN0VUkoKVxuICB9XG5cbiAgLy8gU3dpdGNoIHRvIG11bHRpIHNlbGVjdCBtb2RlXG4gIHN3aXRjaFRvTXVsdGlTZWxlY3QoKTogdm9pZCB7XG4gICAgdGhpcy5pc011bHRpU2VsZWN0TW9kZSA9IHRydWVcbiAgICAvLyBJbml0aWFsaXplIHdpdGggY3VycmVudCBzZWxlY3Rpb24gdHlwZSdzIHZhbHVlXG4gICAgY29uc3QgY3VycmVudFZhbHVlID0gdGhpcy5zZWxlY3Rpb25UeXBlID09PSAnZGVwYXJ0dXJlJyA/IHRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlIDogdGhpcy5kZXN0aW5hdGlvbkNpdHlWYWx1ZVxuICAgIGlmIChjdXJyZW50VmFsdWUgJiYgY3VycmVudFZhbHVlICE9PSAnJykge1xuICAgICAgLy8gU3VwcG9ydCBjb21tYS1zZXBhcmF0ZWQgbXVsdGlwbGUgY2l0aWVzXG4gICAgICB0aGlzLnNlbGVjdGVkQ2l0aWVzID0gY3VycmVudFZhbHVlLnNwbGl0KCcsJykubWFwKGNpdHkgPT4gY2l0eS50cmltKCkpLmZpbHRlcihjaXR5ID0+IGNpdHkgIT09ICcnKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlbGVjdGVkQ2l0aWVzID0gW11cbiAgICB9XG4gICAgdGhpcy51cGRhdGVNb2RhbFRpdGxlKClcbiAgICB0aGlzLnVwZGF0ZU11bHRpU2VsZWN0VUkoKVxuICB9XG5cbiAgLy8gVXBkYXRlIG11bHRpLXNlbGVjdCBVSSBlbGVtZW50c1xuICBwcml2YXRlIHVwZGF0ZU11bHRpU2VsZWN0VUkoKTogdm9pZCB7XG4gICAgY29uc3Qgc2VsZWN0ZWRDaXRpZXNDb250YWluZXIgPSB0aGlzLm1vZGFsVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNlbGVjdGVkLWNpdGllc10nKVxuICAgIGNvbnN0IGNvbmZpcm1CdXR0b24gPSB0aGlzLm1vZGFsVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNvbmZpcm0tYnV0dG9uXScpXG4gICAgY29uc3Qgc2luZ2xlU2VsZWN0VGFiID0gdGhpcy5tb2RhbFRhcmdldC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1zaW5nbGUtc2VsZWN0LXRhYl0nKVxuICAgIGNvbnN0IG11bHRpU2VsZWN0VGFiID0gdGhpcy5tb2RhbFRhcmdldC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1tdWx0aS1zZWxlY3QtdGFiXScpXG4gICAgXG4gICAgaWYgKHRoaXMuaXNNdWx0aVNlbGVjdE1vZGUpIHtcbiAgICAgIHNlbGVjdGVkQ2l0aWVzQ29udGFpbmVyPy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgY29uZmlybUJ1dHRvbj8uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgIHNpbmdsZVNlbGVjdFRhYj8uY2xhc3NMaXN0LnJlbW92ZSgnYmctd2hpdGUnLCAnc2hhZG93LXNtJywgJ3RleHQtZ3JheS05MDAnKVxuICAgICAgc2luZ2xlU2VsZWN0VGFiPy5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktNTAwJylcbiAgICAgIG11bHRpU2VsZWN0VGFiPy5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktNTAwJylcbiAgICAgIG11bHRpU2VsZWN0VGFiPy5jbGFzc0xpc3QuYWRkKCdiZy13aGl0ZScsICdzaGFkb3ctc20nLCAndGV4dC1ncmF5LTkwMCcpXG4gICAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkQ2l0aWVzRGlzcGxheSgpXG4gICAgICB0aGlzLnVwZGF0ZUNpdHlCdXR0b25TdGF0ZXMoKVxuICAgIH0gZWxzZSB7XG4gICAgICBzZWxlY3RlZENpdGllc0NvbnRhaW5lcj8uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgIGNvbmZpcm1CdXR0b24/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICBzaW5nbGVTZWxlY3RUYWI/LmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS01MDAnKVxuICAgICAgc2luZ2xlU2VsZWN0VGFiPy5jbGFzc0xpc3QuYWRkKCdiZy13aGl0ZScsICdzaGFkb3ctc20nLCAndGV4dC1ncmF5LTkwMCcpXG4gICAgICBtdWx0aVNlbGVjdFRhYj8uY2xhc3NMaXN0LnJlbW92ZSgnYmctd2hpdGUnLCAnc2hhZG93LXNtJywgJ3RleHQtZ3JheS05MDAnKVxuICAgICAgbXVsdGlTZWxlY3RUYWI/LmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS01MDAnKVxuICAgICAgdGhpcy5jbGVhckNpdHlCdXR0b25TdGF0ZXMoKVxuICAgIH1cbiAgfVxuXG4gIC8vIFVwZGF0ZSBzZWxlY3RlZCBjaXRpZXMgZGlzcGxheVxuICBwcml2YXRlIHVwZGF0ZVNlbGVjdGVkQ2l0aWVzRGlzcGxheSgpOiB2b2lkIHtcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLm1vZGFsVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNlbGVjdGVkLWNpdGllc10nKVxuICAgIGlmICghY29udGFpbmVyKSByZXR1cm5cbiAgICBcbiAgICBjb250YWluZXIuaW5uZXJIVE1MID0gdGhpcy5zZWxlY3RlZENpdGllcy5tYXAoY2l0eSA9PiBgXG4gICAgICA8ZGl2IGNsYXNzPVwiaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGJnLXllbGxvdy0xMDAgcHgtMyBweS0xLjUgcm91bmRlZC1sZ1wiPlxuICAgICAgICA8c3BhbiBjbGFzcz1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMFwiPiR7Y2l0eX08L3NwYW4+XG4gICAgICAgIDxidXR0b24gXG4gICAgICAgICAgZGF0YS1hY3Rpb249XCJjbGljay0+Y2l0eS1zZWxlY3RvciNyZW1vdmVTZWxlY3RlZENpdHlcIlxuICAgICAgICAgIGRhdGEtY2l0eS1uYW1lPVwiJHtjaXR5fVwiXG4gICAgICAgICAgY2xhc3M9XCJtbC0yIHRleHQtZ3JheS01MDAgaG92ZXI6dGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgIDxzdmcgY2xhc3M9XCJ3LTQgaC00XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gICAgICAgICAgICA8cGF0aCBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBzdHJva2Utd2lkdGg9XCIyXCIgZD1cIk02IDE4TDE4IDZNNiA2bDEyIDEyXCIvPlxuICAgICAgICAgIDwvc3ZnPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIGApLmpvaW4oJycpXG4gIH1cblxuICAvLyBSZW1vdmUgc2VsZWN0ZWQgY2l0eVxuICByZW1vdmVTZWxlY3RlZENpdHkoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgY2l0eU5hbWUgPSBidXR0b24uZGF0YXNldC5jaXR5TmFtZSB8fCAnJ1xuICAgIHRoaXMuc2VsZWN0ZWRDaXRpZXMgPSB0aGlzLnNlbGVjdGVkQ2l0aWVzLmZpbHRlcihjaXR5ID0+IGNpdHkgIT09IGNpdHlOYW1lKVxuICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRDaXRpZXNEaXNwbGF5KClcbiAgICB0aGlzLnVwZGF0ZUNpdHlCdXR0b25TdGF0ZXMoKVxuICB9XG5cbiAgLy8gVXBkYXRlIGNpdHkgYnV0dG9uIHN0YXRlcyAoc2hvdyBjaGVja21hcmtzKVxuICBwcml2YXRlIHVwZGF0ZUNpdHlCdXR0b25TdGF0ZXMoKTogdm9pZCB7XG4gICAgY29uc3QgY2l0eUJ1dHRvbnMgPSB0aGlzLm1vZGFsVGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWNpdHktbmFtZV0nKVxuICAgIGNpdHlCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgIGNvbnN0IGNpdHlOYW1lID0gKGJ1dHRvbiBhcyBIVE1MRWxlbWVudCkuZGF0YXNldC5jaXR5TmFtZSB8fCAnJ1xuICAgICAgY29uc3QgaXNTZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRDaXRpZXMuaW5jbHVkZXMoY2l0eU5hbWUpXG4gICAgICBcbiAgICAgIGlmIChpc1NlbGVjdGVkKSB7XG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdiZy15ZWxsb3ctMTAwJywgJ3JlbGF0aXZlJylcbiAgICAgICAgaWYgKCFidXR0b24ucXVlcnlTZWxlY3RvcignW2RhdGEtY2hlY2ttYXJrXScpKSB7XG4gICAgICAgICAgY29uc3QgY2hlY2ttYXJrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3ZnJylcbiAgICAgICAgICBjaGVja21hcmsuc2V0QXR0cmlidXRlKCdkYXRhLWNoZWNrbWFyaycsICcnKVxuICAgICAgICAgIGNoZWNrbWFyay5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2Fic29sdXRlIHJpZ2h0LTEgdG9wLTEgdy00IGgtNCB0ZXh0LXllbGxvdy02MDAnKVxuICAgICAgICAgIGNoZWNrbWFyay5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnY3VycmVudENvbG9yJylcbiAgICAgICAgICBjaGVja21hcmsuc2V0QXR0cmlidXRlKCd2aWV3Qm94JywgJzAgMCAyMCAyMCcpXG4gICAgICAgICAgY2hlY2ttYXJrLmlubmVySFRNTCA9XG4gICAgICAgICAgICAnPHBhdGggZmlsbC1ydWxlPVwiZXZlbm9kZFwiIGQ9XCJNMTYuNzA3IDUuMjkzYTEgMSAwIDAxMCAxLjQxNGwtOCA4YTEgMSAwIDAxLTEuNDE0IDBsLTQtNGExIDEgMCAwMTEuNDE0LTEuNDE0TDggMTIuNTg2bDcuMjkzLTcuMjkzYTEgMSAwIDAxMS40MTQgMHpcIiBjbGlwLXJ1bGU9XCJldmVub2RkXCIvPidcbiAgICAgICAgICBidXR0b24uYXBwZW5kQ2hpbGQoY2hlY2ttYXJrKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYmcteWVsbG93LTEwMCcsICdyZWxhdGl2ZScpXG4gICAgICAgIGJ1dHRvbi5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jaGVja21hcmtdJyk/LnJlbW92ZSgpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8vIENsZWFyIGNpdHkgYnV0dG9uIHN0YXRlc1xuICBwcml2YXRlIGNsZWFyQ2l0eUJ1dHRvblN0YXRlcygpOiB2b2lkIHtcbiAgICBjb25zdCBjaXR5QnV0dG9ucyA9IHRoaXMubW9kYWxUYXJnZXQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtY2l0eS1uYW1lXScpXG4gICAgY2l0eUJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLXllbGxvdy0xMDAnLCAncmVsYXRpdmUnKVxuICAgICAgYnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNoZWNrbWFya10nKT8ucmVtb3ZlKClcbiAgICB9KVxuICB9XG5cbiAgLy8gQ29uZmlybSBtdWx0aS1zZWxlY3RcbiAgY29uZmlybU11bHRpU2VsZWN0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNlbGVjdGVkQ2l0aWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgYWxlcnQoJ1x1OEJGN1x1ODFGM1x1NUMxMVx1OTAwOVx1NjJFOVx1NEUwMFx1NEUyQVx1NTdDRVx1NUUwMicpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gVXBkYXRlIGNpdHkgdmFsdWUgYmFzZWQgb24gc2VsZWN0aW9uIHR5cGVcbiAgICBpZiAodGhpcy5zZWxlY3Rpb25UeXBlID09PSAnZGVwYXJ0dXJlJykge1xuICAgICAgdGhpcy5kZXBhcnR1cmVDaXR5VmFsdWUgPSB0aGlzLnNlbGVjdGVkQ2l0aWVzLmpvaW4oJywnKVxuICAgICAgdGhpcy5kZXBhcnR1cmVUYXJnZXQudGV4dENvbnRlbnQgPSB0aGlzLnNlbGVjdGVkQ2l0aWVzLmpvaW4oJ1x1MzAwMScpXG4gICAgICB0aGlzLmRlcGFydHVyZUNpdHlJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGVzdGluYXRpb25DaXR5VmFsdWUgPSB0aGlzLnNlbGVjdGVkQ2l0aWVzLmpvaW4oJywnKVxuICAgICAgdGhpcy5kZXN0aW5hdGlvblRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMuc2VsZWN0ZWRDaXRpZXMuam9pbignXHUzMDAxJylcbiAgICAgIHRoaXMuZGVzdGluYXRpb25DaXR5SW5wdXRUYXJnZXQudmFsdWUgPSB0aGlzLmRlc3RpbmF0aW9uQ2l0eVZhbHVlXG4gICAgfVxuICAgIFxuICAgIHRoaXMuY2xvc2VNb2RhbCgpXG4gIH1cblxuICAvLyBKdW1wIHRvIGxldHRlciBzZWN0aW9uXG4gIGp1bXBUb0xldHRlcihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgbGV0dGVyID0gYnV0dG9uLmRhdGFzZXQubGV0dGVyIHx8ICcnXG4gICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuZG9tZXN0aWNMaXN0VGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWxldHRlci1zZWN0aW9uPVwiJHtsZXR0ZXJ9XCJdYClcbiAgICBcbiAgICBpZiAoc2VjdGlvbikge1xuICAgICAgc2VjdGlvbi5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSlcbiAgICB9XG4gIH1cblxuICAvLyBSZXF1ZXN0IHVzZXIgbG9jYXRpb25cbiAgcmVxdWVzdExvY2F0aW9uKCk6IHZvaWQge1xuICAgIGlmICghbmF2aWdhdG9yLmdlb2xvY2F0aW9uKSB7XG4gICAgICB0aGlzLmxvY2F0aW9uVGV4dFRhcmdldC50ZXh0Q29udGVudCA9ICdcdTZENEZcdTg5QzhcdTU2NjhcdTRFMERcdTY1MkZcdTYzMDFcdTVCOUFcdTRGNEQnXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBTaG93IGxvYWRpbmcgc3RhdGVcbiAgICB0aGlzLmxvY2F0aW9uQnV0dG9uVGFyZ2V0LmRpc2FibGVkID0gdHJ1ZVxuICAgIHRoaXMubG9jYXRpb25UZXh0VGFyZ2V0LnRleHRDb250ZW50ID0gJ1x1NUI5QVx1NEY0RFx1NEUyRC4uLidcbiAgICB0aGlzLmxvY2F0aW9uU3Bpbm5lclRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuXG4gICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbihcbiAgICAgIChwb3NpdGlvbikgPT4gdGhpcy5oYW5kbGVMb2NhdGlvblN1Y2Nlc3MocG9zaXRpb24pLFxuICAgICAgKGVycm9yKSA9PiB0aGlzLmhhbmRsZUxvY2F0aW9uRXJyb3IoZXJyb3IpLFxuICAgICAge1xuICAgICAgICBlbmFibGVIaWdoQWNjdXJhY3k6IHRydWUsXG4gICAgICAgIHRpbWVvdXQ6IDEwMDAwLFxuICAgICAgICBtYXhpbXVtQWdlOiAwXG4gICAgICB9XG4gICAgKVxuICB9XG5cbiAgLy8gSGFuZGxlIGxvY2F0aW9uIHN1Y2Nlc3NcbiAgIFxuICBwcml2YXRlIGFzeW5jIGhhbmRsZUxvY2F0aW9uU3VjY2Vzcyhwb3NpdGlvbjogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgeyBsYXRpdHVkZSwgbG9uZ2l0dWRlIH0gPSBwb3NpdGlvbi5jb29yZHNcbiAgICBjb25zb2xlLmxvZygnTG9jYXRpb24gb2J0YWluZWQ6JywgbGF0aXR1ZGUsIGxvbmdpdHVkZSlcblxuICAgIHRyeSB7XG4gICAgICAvLyBDYWxsIHJldmVyc2UgZ2VvY29kaW5nIEFQSVxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9nZW9jb2RpbmcvcmV2ZXJzZScsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICdYLUNTUkYtVG9rZW4nOiB0aGlzLmdldENTUkZUb2tlbigpXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBsYXQ6IGxhdGl0dWRlLFxuICAgICAgICAgIGxuZzogbG9uZ2l0dWRlXG4gICAgICAgIH0pXG4gICAgICB9KVxuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignXHU1QjlBXHU0RjREXHU2NzBEXHU1MkExXHU1OTMxXHU4RDI1JylcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgICAgY29uc29sZS5sb2coJ0NpdHkgZm91bmQ6JywgZGF0YSlcblxuICAgICAgLy8gVXBkYXRlIFVJIHdpdGggbG9jYXRlZCBjaXR5XG4gICAgICB0aGlzLmxvY2F0aW9uVGV4dFRhcmdldC50ZXh0Q29udGVudCA9IGBcdTVGNTNcdTUyNERcdTRGNERcdTdGNkU6ICR7ZGF0YS5jaXR5fWBcbiAgICAgIHRoaXMubG9jYXRpb25CdXR0b25UYXJnZXQuZGlzYWJsZWQgPSBmYWxzZVxuICAgICAgdGhpcy5sb2NhdGlvblNwaW5uZXJUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcblxuICAgICAgLy8gU2hvdyBsb2NhdGVkIGNpdHkgYnV0dG9uXG4gICAgICB0aGlzLmxvY2F0ZWRDaXR5QnV0dG9uVGFyZ2V0LnRleHRDb250ZW50ID0gZGF0YS5jaXR5XG4gICAgICB0aGlzLmxvY2F0ZWRDaXR5QnV0dG9uVGFyZ2V0LmRhdGFzZXQuY2l0eU5hbWUgPSBkYXRhLmNpdHlcbiAgICAgIHRoaXMubG9jYXRlZENpdHlCdXR0b25UYXJnZXQuZGF0YXNldC5jaXR5UGlueWluID0gZGF0YS5waW55aW5cbiAgICAgIHRoaXMubG9jYXRlZENpdHlUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdSZXZlcnNlIGdlb2NvZGluZyBlcnJvcjonLCBlcnJvcilcbiAgICAgICBcbiAgICAgIHRoaXMuaGFuZGxlTG9jYXRpb25FcnJvcihlcnJvciBhcyBhbnkpXG4gICAgfVxuICB9XG5cbiAgLy8gSGFuZGxlIGxvY2F0aW9uIGVycm9yXG4gICBcbiAgcHJpdmF0ZSBoYW5kbGVMb2NhdGlvbkVycm9yKGVycm9yOiBhbnkpOiB2b2lkIHtcbiAgICBsZXQgZXJyb3JNZXNzYWdlID0gJ1x1NUI5QVx1NEY0RFx1NTkzMVx1OEQyNSdcblxuICAgIGlmICgnY29kZScgaW4gZXJyb3IpIHtcbiAgICAgIHN3aXRjaCAoZXJyb3IuY29kZSkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgZXJyb3JNZXNzYWdlID0gJ1x1NzUyOFx1NjIzN1x1NjJEMlx1N0VERFx1NUI5QVx1NEY0RCdcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgZXJyb3JNZXNzYWdlID0gJ1x1NEY0RFx1N0Y2RVx1NEZFMVx1NjA2Rlx1NEUwRFx1NTNFRlx1NzUyOCdcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgZXJyb3JNZXNzYWdlID0gJ1x1NUI5QVx1NEY0RFx1OEQ4NVx1NjVGNidcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnNvbGUuZXJyb3IoJ0xvY2F0aW9uIGVycm9yOicsIGVycm9yKVxuICAgIHRoaXMubG9jYXRpb25UZXh0VGFyZ2V0LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlXG4gICAgdGhpcy5sb2NhdGlvbkJ1dHRvblRhcmdldC5kaXNhYmxlZCA9IGZhbHNlXG4gICAgdGhpcy5sb2NhdGlvblNwaW5uZXJUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgfVxuXG4gIC8vIEdldCBDU1JGIHRva2VuXG4gIHByaXZhdGUgZ2V0Q1NSRlRva2VuKCk6IHN0cmluZyB7XG4gICAgY29uc3QgdG9rZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtZXRhW25hbWU9XCJjc3JmLXRva2VuXCJdJykgYXMgSFRNTE1ldGFFbGVtZW50XG4gICAgcmV0dXJuIHRva2VuID8gdG9rZW4uY29udGVudCA6ICcnXG4gIH1cblxuICAvLyBIaWRlIG11bHRpLXNlbGVjdCBVSSBlbGVtZW50cyAoZm9yIHBhZ2VzIHRoYXQgZG9uJ3QgbmVlZCBtdWx0aS1zZWxlY3QpXG4gIHByaXZhdGUgaGlkZU11bHRpU2VsZWN0VUkoKTogdm9pZCB7XG4gICAgLy8gUmVwbGFjZSB0aGUgdG9nZ2xlIGJ1dHRvbnMgY29udGFpbmVyIHdpdGggYSBmaXhlZCB0aXRsZVxuICAgIGNvbnN0IHNpbmdsZVNlbGVjdFRhYiA9IHRoaXMubW9kYWxUYXJnZXQucXVlcnlTZWxlY3RvcignW2RhdGEtc2luZ2xlLXNlbGVjdC10YWJdJylcbiAgICBjb25zdCBtdWx0aVNlbGVjdFRhYiA9IHRoaXMubW9kYWxUYXJnZXQucXVlcnlTZWxlY3RvcignW2RhdGEtbXVsdGktc2VsZWN0LXRhYl0nKVxuICAgIFxuICAgIGlmIChzaW5nbGVTZWxlY3RUYWIgJiYgbXVsdGlTZWxlY3RUYWIpIHtcbiAgICAgIGNvbnN0IHRvZ2dsZUNvbnRhaW5lciA9IHNpbmdsZVNlbGVjdFRhYi5wYXJlbnRFbGVtZW50XG4gICAgICBpZiAodG9nZ2xlQ29udGFpbmVyKSB7XG4gICAgICAgIC8vIFJlcGxhY2UgdGhlIGVudGlyZSB0b2dnbGUgY29udGFpbmVyIHdpdGggYSBzaW1wbGUgdGl0bGVcbiAgICAgICAgY29uc3QgdGl0bGVUZXh0ID0gdGhpcy5tb2RhbFRpdGxlVmFsdWUgfHwgJ1x1OTAwOVx1NjJFOVx1NzZFRVx1NzY4NFx1NTczMCdcbiAgICAgICAgdG9nZ2xlQ29udGFpbmVyLm91dGVySFRNTCA9IGA8ZGl2IGNsYXNzPVwidGV4dC1sZyBmb250LWJvbGQgdGV4dC1ncmF5LTkwMFwiPiR7dGl0bGVUZXh0fTwvZGl2PmBcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gSGlkZSBzZWxlY3RlZCBjaXRpZXMgY29udGFpbmVyIGFuZCBjb25maXJtIGJ1dHRvblxuICAgIGNvbnN0IHNlbGVjdGVkQ2l0aWVzQ29udGFpbmVyID0gdGhpcy5tb2RhbFRhcmdldC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1zZWxlY3RlZC1jaXRpZXNdJykgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBjb25maXJtQnV0dG9uID0gdGhpcy5tb2RhbFRhcmdldC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jb25maXJtLWJ1dHRvbl0nKSBhcyBIVE1MRWxlbWVudFxuICAgIFxuICAgIGlmIChzZWxlY3RlZENpdGllc0NvbnRhaW5lcikge1xuICAgICAgc2VsZWN0ZWRDaXRpZXNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIH1cbiAgICBpZiAoY29uZmlybUJ1dHRvbikge1xuICAgICAgY29uZmlybUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgfVxuICB9XG5cbiAgLy8gU3dpdGNoIHRvIGludGVybmF0aW9uYWwgdGFiIGluIGhvdGVsIGNvbnRleHRcbiAgcHJpdmF0ZSBzd2l0Y2hUb0ludGVybmF0aW9uYWxUYWIoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ0NpdHkgc2VsZWN0b3I6IFN3aXRjaGluZyB0byBpbnRlcm5hdGlvbmFsIGhvdGVsIHRhYicpXG4gICAgLy8gRGlzcGF0Y2ggZXZlbnQgdG8gaG90ZWwtdGFicyBjb250cm9sbGVyXG4gICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2NpdHktc2VsZWN0b3I6c3dpdGNoLXRvLWludGVybmF0aW9uYWwnLCB7XG4gICAgICBkZXRhaWw6IHt9LFxuICAgICAgYnViYmxlczogdHJ1ZVxuICAgIH0pXG4gICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudClcbiAgfVxuXG4gIC8vIFNjcm9sbCB0byByZWdpb24gaW4gaW50ZXJuYXRpb25hbCB0YWJcbiAgc2Nyb2xsVG9SZWdpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHJlZ2lvbklkID0gYnV0dG9uLmRhdGFzZXQucmVnaW9uXG4gICAgXG4gICAgaWYgKCFyZWdpb25JZCkgcmV0dXJuXG4gICAgXG4gICAgY29uc29sZS5sb2coJ1Njcm9sbGluZyB0byByZWdpb246JywgcmVnaW9uSWQpXG4gICAgXG4gICAgLy8gVXBkYXRlIGFjdGl2ZSB0YWIgc3R5bGluZ1xuICAgIGNvbnN0IGFsbFJlZ2lvblRhYnMgPSB0aGlzLmludGVybmF0aW9uYWxMaXN0VGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXJlZ2lvbl0nKVxuICAgIGFsbFJlZ2lvblRhYnMuZm9yRWFjaCh0YWIgPT4ge1xuICAgICAgdGFiLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLXdoaXRlJywgJ2ZvbnQtYm9sZCcsICd0ZXh0LWdyYXktOTAwJylcbiAgICAgIHRhYi5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktNTAwJylcbiAgICB9KVxuICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdiZy13aGl0ZScsICdmb250LWJvbGQnLCAndGV4dC1ncmF5LTkwMCcpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS01MDAnKVxuICAgIFxuICAgIC8vIEZpbmQgYW5kIHNjcm9sbCB0byB0aGUgY29udGVudCBzZWN0aW9uXG4gICAgY29uc3QgY29udGVudEFyZWEgPSB0aGlzLmludGVybmF0aW9uYWxMaXN0VGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5vdmVyZmxvdy15LWF1dG8nKVxuICAgIGNvbnN0IHRhcmdldFNlY3Rpb24gPSBjb250ZW50QXJlYT8ucXVlcnlTZWxlY3RvcihgW2RhdGEtcmVnaW9uLXNlY3Rpb249XCIke3JlZ2lvbklkfVwiXWApXG4gICAgXG4gICAgaWYgKHRhcmdldFNlY3Rpb24gJiYgY29udGVudEFyZWEpIHtcbiAgICAgIC8vIFNjcm9sbCB0aGUgY29udGVudCBhcmVhIChub3QgdGhlIHdob2xlIHdpbmRvdylcbiAgICAgIGNvbnN0IG9mZnNldFRvcCA9ICh0YXJnZXRTZWN0aW9uIGFzIEhUTUxFbGVtZW50KS5vZmZzZXRUb3AgLSAyMFxuICAgICAgY29udGVudEFyZWEuc2Nyb2xsVG8oe1xuICAgICAgICB0b3A6IG9mZnNldFRvcCxcbiAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnXG4gICAgICB9KVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgZGVwYXJ0dXJlOiBTdHJpbmcsXG4gICAgZGVzdGluYXRpb246IFN0cmluZyxcbiAgICBkYXRlOiBTdHJpbmdcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVwYXJ0dXJlVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHJlYWRvbmx5IGRlc3RpbmF0aW9uVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHJlYWRvbmx5IGRhdGVWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkZsaWdodFNlYXJjaCBjb25uZWN0ZWRcIiwge1xuICAgICAgZGVwYXJ0dXJlOiB0aGlzLmRlcGFydHVyZVZhbHVlLFxuICAgICAgZGVzdGluYXRpb246IHRoaXMuZGVzdGluYXRpb25WYWx1ZSxcbiAgICAgIGRhdGU6IHRoaXMuZGF0ZVZhbHVlXG4gICAgfSlcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwibW9kYWxcIixcbiAgICBcInNlbGVjdGVkRGF0ZVwiLFxuICAgIFwiZGF0ZUlucHV0XCIsXG4gICAgXCJkYXRlQnV0dG9uXCIsXG4gICAgXCJleGFjdFRhYlwiLFxuICAgIFwiZnV6enlUYWJcIixcbiAgICBcImV4YWN0RGF0ZUNvbnRlbnRcIixcbiAgICBcImZ1enp5RGF0ZUNvbnRlbnRcIixcbiAgICBcIm1vbnRoQnV0dG9uXCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgY3VycmVudERhdGU6IFN0cmluZ1xuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNNb2RhbFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IHNlbGVjdGVkRGF0ZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkYXRlSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkYXRlQnV0dG9uVGFyZ2V0czogSFRNTEJ1dHRvbkVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1NlbGVjdGVkRGF0ZVRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0RhdGVJbnB1dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGV4YWN0VGFiVGFyZ2V0OiBIVE1MQnV0dG9uRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGZ1enp5VGFiVGFyZ2V0OiBIVE1MQnV0dG9uRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGV4YWN0RGF0ZUNvbnRlbnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZnV6enlEYXRlQ29udGVudFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBtb250aEJ1dHRvblRhcmdldHM6IEhUTUxCdXR0b25FbGVtZW50W11cbiAgZGVjbGFyZSBjdXJyZW50RGF0ZVZhbHVlOiBzdHJpbmdcblxuICBwcml2YXRlIHNlbGVjdGVkRGF0ZU9iajogRGF0ZSA9IG5ldyBEYXRlKClcbiAgcHJpdmF0ZSBjdXJyZW50TXVsdGlDaXR5U2VnbWVudElkOiBzdHJpbmcgfCBudWxsID0gbnVsbFxuICBwcml2YXRlIHNlbGVjdGVkTW9udGhzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKVxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJEYXRlUGlja2VyIGNvbm5lY3RlZFwiKVxuICAgIC8vIFNlbmQgY2xpZW50J3MgbG9jYWwgZGF0ZSB0byBzZXJ2ZXIgZm9yIHRpbWV6b25lLWF3YXJlIGZpbHRlcmluZ1xuICAgIGNvbnN0IGNsaWVudFRvZGF5ID0gdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKCkpXG4gICAgXG4gICAgLy8gSW5pdGlhbGl6ZSB3aXRoIHRvZGF5J3MgZGF0ZSB1c2luZyBjbGllbnQgdGltZXpvbmVcbiAgICB0aGlzLnNlbGVjdGVkRGF0ZU9iaiA9IG5ldyBEYXRlKClcbiAgICB0aGlzLmN1cnJlbnREYXRlVmFsdWUgPSB0aGlzLmZvcm1hdERhdGUodGhpcy5zZWxlY3RlZERhdGVPYmopXG4gICAgXG4gICAgLy8gVXBkYXRlIGRpc3BsYXllZCBkYXRlIGltbWVkaWF0ZWx5IHdpdGggY2xpZW50IHRpbWV6b25lXG4gICAgaWYgKHRoaXMuaGFzU2VsZWN0ZWREYXRlVGFyZ2V0KSB7XG4gICAgICB0aGlzLnVwZGF0ZURpc3BsYXllZERhdGUoKVxuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgaGlkZGVuIGlucHV0IHdpdGggY2xpZW50IHRpbWV6b25lIGRhdGVcbiAgICBpZiAodGhpcy5oYXNEYXRlSW5wdXRUYXJnZXQpIHtcbiAgICAgIHRoaXMuZGF0ZUlucHV0VGFyZ2V0LnZhbHVlID0gdGhpcy5jdXJyZW50RGF0ZVZhbHVlXG4gICAgfVxuICAgIFxuICAgIC8vIE9ubHkgYWNjZXNzIG1vZGFsIGlmIGl0IGV4aXN0cyBpbiB0aGlzIGNvbnRyb2xsZXIncyBzY29wZVxuICAgIGlmICghdGhpcy5oYXNNb2RhbFRhcmdldCkge1xuICAgICAgY29uc29sZS5sb2coXCJEYXRlUGlja2VyOiBObyBtb2RhbCB0YXJnZXQgZm91bmQsIHNraXBwaW5nIG1vZGFsIHNldHVwXCIpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgY29uc3QgbW9kYWxFbGVtZW50ID0gdGhpcy5tb2RhbFRhcmdldFxuICAgIFxuICAgIC8vIFN0b3JlIGNsaWVudCdzIHRvZGF5IGRhdGUgYXMgZGF0YSBhdHRyaWJ1dGUgZm9yIHNlcnZlciB0byB1c2VcbiAgICBpZiAobW9kYWxFbGVtZW50KSB7XG4gICAgICBtb2RhbEVsZW1lbnQuZGF0YXNldC5jbGllbnRUb2RheSA9IGNsaWVudFRvZGF5XG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSBwYXN0IGRhdGUgYnV0dG9ucyBiYXNlZCBvbiBjbGllbnQgdGltZXpvbmVcbiAgICB0aGlzLnVwZGF0ZVBhc3REYXRlcygpXG4gICAgXG4gICAgLy8gTGlzdGVuIGZvciBtdWx0aS1jaXR5IGV2ZW50c1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtdWx0aS1jaXR5Om9wZW4tZGF0ZS1waWNrZXInLCB0aGlzLmhhbmRsZU11bHRpQ2l0eU9wZW4uYmluZCh0aGlzKSBhcyB1bmtub3duIGFzIEV2ZW50TGlzdGVuZXIpXG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgIHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtdWx0aS1jaXR5Om9wZW4tZGF0ZS1waWNrZXInLCB0aGlzLmhhbmRsZU11bHRpQ2l0eU9wZW4uYmluZCh0aGlzKSBhcyB1bmtub3duIGFzIEV2ZW50TGlzdGVuZXIpXG4gIH1cblxuICAvLyBIYW5kbGUgbXVsdGktY2l0eSBkYXRlIHBpY2tlciByZXF1ZXN0XG4gIHByaXZhdGUgaGFuZGxlTXVsdGlDaXR5T3BlbihldmVudDogQ3VzdG9tRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB7IHNlZ21lbnRJZCB9ID0gZXZlbnQuZGV0YWlsXG4gICAgY29uc29sZS5sb2coJ0RhdGUgcGlja2VyOiBSZWNlaXZlZCBtdWx0aS1jaXR5IG9wZW4gcmVxdWVzdCcsIHsgc2VnbWVudElkIH0pXG4gICAgdGhpcy5jdXJyZW50TXVsdGlDaXR5U2VnbWVudElkID0gc2VnbWVudElkXG4gICAgdGhpcy5vcGVuTW9kYWwoKVxuICB9XG5cbiAgLy8gT3BlbiBjaGVjay1pbiBkYXRlIHBpY2tlclxuICBvcGVuQ2hlY2tJbigpOiB2b2lkIHtcbiAgICBjb25zdCBjaGVja0luRGF0ZSA9IHByb21wdChcIlx1OEJGN1x1OEY5M1x1NTE2NVx1NTE2NVx1NEY0Rlx1NjVFNVx1NjcxRiAoWVlZWS1NTS1ERClcIiwgdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKCkpKVxuICAgIGlmIChjaGVja0luRGF0ZSkge1xuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZilcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdjaGVja19pbicsIGNoZWNrSW5EYXRlKVxuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmwudG9TdHJpbmcoKVxuICAgIH1cbiAgfVxuXG4gIC8vIE9wZW4gY2hlY2stb3V0IGRhdGUgcGlja2VyXG4gIG9wZW5DaGVja091dCgpOiB2b2lkIHtcbiAgICBjb25zdCB0b21vcnJvdyA9IG5ldyBEYXRlKClcbiAgICB0b21vcnJvdy5zZXREYXRlKHRvbW9ycm93LmdldERhdGUoKSArIDEpXG4gICAgY29uc3QgY2hlY2tPdXREYXRlID0gcHJvbXB0KFwiXHU4QkY3XHU4RjkzXHU1MTY1XHU3OUJCXHU1RTk3XHU2NUU1XHU2NzFGIChZWVlZLU1NLUREKVwiLCB0aGlzLmZvcm1hdERhdGUodG9tb3Jyb3cpKVxuICAgIGlmIChjaGVja091dERhdGUpIHtcbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpXG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnY2hlY2tfb3V0JywgY2hlY2tPdXREYXRlKVxuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmwudG9TdHJpbmcoKVxuICAgIH1cbiAgfVxuXG4gIC8vIE9wZW4gZGF0ZSBwaWNrZXIgbW9kYWxcbiAgb3Blbk1vZGFsKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNNb2RhbFRhcmdldCkgcmV0dXJuXG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJ1xuICB9XG5cbiAgLy8gQ2xvc2UgZGF0ZSBwaWNrZXIgbW9kYWxcbiAgY2xvc2VNb2RhbCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaGFzTW9kYWxUYXJnZXQpIHJldHVyblxuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJydcbiAgfVxuXG4gIC8vIFNlbGVjdCBhIGRhdGVcbiAgc2VsZWN0RGF0ZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgZGF0ZVN0ciA9IGJ1dHRvbi5kYXRhc2V0LmRhdGUgfHwgJydcbiAgICBcbiAgICBpZiAoIWRhdGVTdHIpIHJldHVyblxuXG4gICAgLy8gUHJldmVudCBzZWxlY3RpbmcgZGF0ZXMgYmVmb3JlIHRvZGF5ICh1c2luZyBjbGllbnQgdGltZXpvbmUpXG4gICAgY29uc3Qgc2VsZWN0ZWREYXRlID0gbmV3IERhdGUoYCR7ZGF0ZVN0cn1UMDA6MDA6MDBgKVxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxuICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgc2VsZWN0ZWREYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgXG4gICAgaWYgKHNlbGVjdGVkRGF0ZSA8IHRvZGF5KSB7XG4gICAgICBjb25zb2xlLmxvZygnQ2Fubm90IHNlbGVjdCBwYXN0IGRhdGVzIChjbGllbnQgdGltZXpvbmUgY2hlY2spJylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMuc2VsZWN0ZWREYXRlT2JqID0gc2VsZWN0ZWREYXRlXG4gICAgdGhpcy5jdXJyZW50RGF0ZVZhbHVlID0gZGF0ZVN0clxuICAgIFxuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgZm9yIG11bHRpLWNpdHlcbiAgICBpZiAodGhpcy5jdXJyZW50TXVsdGlDaXR5U2VnbWVudElkKSB7XG4gICAgICBjb25zb2xlLmxvZygnRGF0ZSBwaWNrZXI6IE11bHRpLWNpdHkgbW9kZSwgZGlzcGF0Y2hpbmcgZXZlbnQnLCB7XG4gICAgICAgIHNlZ21lbnRJZDogdGhpcy5jdXJyZW50TXVsdGlDaXR5U2VnbWVudElkLFxuICAgICAgICBkYXRlOiBkYXRlU3RyXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBUcmlnZ2VyIGV2ZW50IHRvIHVwZGF0ZSBtdWx0aS1jaXR5IHNlZ21lbnRcbiAgICAgIGNvbnN0IHVwZGF0ZUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdkYXRlLXBpY2tlcjpkYXRlLXNlbGVjdGVkJywge1xuICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICBzZWdtZW50SWQ6IHRoaXMuY3VycmVudE11bHRpQ2l0eVNlZ21lbnRJZCxcbiAgICAgICAgICBkYXRlOiBkYXRlU3RyXG4gICAgICAgIH0sXG4gICAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICAgIH0pXG4gICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KHVwZGF0ZUV2ZW50KVxuICAgICAgXG4gICAgICAvLyBSZXNldCBtdWx0aS1jaXR5IHN0YXRlXG4gICAgICB0aGlzLmN1cnJlbnRNdWx0aUNpdHlTZWdtZW50SWQgPSBudWxsXG4gICAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICAgIH0gZWxzZSBpZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLmluY2x1ZGVzKCcvZmxpZ2h0cy9zZWFyY2gnKSkge1xuICAgICAgLy8gU2VhcmNoIHBhZ2UgbW9kZSAtIHJlbG9hZCB3aXRoIG5ldyBkYXRlXG4gICAgICBjb25zb2xlLmxvZygnRGF0ZSBwaWNrZXI6IFNlYXJjaCBwYWdlIG1vZGUsIHJlbG9hZGluZyB3aXRoIG5ldyBkYXRlJylcbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpXG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnZGF0ZScsIGRhdGVTdHIpXG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybC50b1N0cmluZygpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCdEYXRlIHBpY2tlcjogUmVndWxhciBtb2RlJylcbiAgICAgIC8vIFJlZ3VsYXIgc2luZ2xlL3JvdW5kIHRyaXAgc2VsZWN0aW9uXG4gICAgICBpZiAodGhpcy5oYXNTZWxlY3RlZERhdGVUYXJnZXQpIHtcbiAgICAgICAgdGhpcy51cGRhdGVEaXNwbGF5ZWREYXRlKClcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhhc0RhdGVJbnB1dFRhcmdldCkge1xuICAgICAgICB0aGlzLmRhdGVJbnB1dFRhcmdldC52YWx1ZSA9IGRhdGVTdHJcbiAgICAgIH1cbiAgICAgIHRoaXMuY2xvc2VNb2RhbCgpXG4gICAgfVxuICB9XG5cbiAgLy8gVXBkYXRlIHRoZSBkaXNwbGF5ZWQgZGF0ZSBpbiB0aGUgbWFpbiB2aWV3XG4gIHByaXZhdGUgdXBkYXRlRGlzcGxheWVkRGF0ZSgpOiB2b2lkIHtcbiAgICBjb25zdCBtb250aCA9IHRoaXMuc2VsZWN0ZWREYXRlT2JqLmdldE1vbnRoKCkgKyAxXG4gICAgY29uc3QgZGF5ID0gdGhpcy5zZWxlY3RlZERhdGVPYmouZ2V0RGF0ZSgpXG4gICAgY29uc3QgZGF5TmFtZSA9IHRoaXMuZ2V0RGF5TmFtZSh0aGlzLnNlbGVjdGVkRGF0ZU9iailcbiAgICBcbiAgICB0aGlzLnNlbGVjdGVkRGF0ZVRhcmdldC5pbm5lckhUTUwgPSBgXG4gICAgICAke21vbnRofTxzcGFuIGNsYXNzPVwidGV4dC1sZyBmb250LW1lZGl1bSBteC0wLjVcIj5cdTY3MDg8L3NwYW4+JHtkYXl9PHNwYW4gY2xhc3M9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIG1sLTAuNSBtci0yXCI+XHU2NUU1PC9zcGFuPlxuICAgICAgPHNwYW4gY2xhc3M9XCJ0ZXh0LWJhc2UgdGV4dC1ncmF5LTUwMCBmb250LW1lZGl1bVwiPiR7ZGF5TmFtZX08L3NwYW4+XG4gICAgYFxuICB9XG5cbiAgLy8gR2V0IGRheSBuYW1lIGluIENoaW5lc2VcbiAgcHJpdmF0ZSBnZXREYXlOYW1lKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxuICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgY29uc3QgdGFyZ2V0RGF0ZSA9IG5ldyBEYXRlKGRhdGUpXG4gICAgdGFyZ2V0RGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICAgIFxuICAgIGNvbnN0IGRpZmZUaW1lID0gdGFyZ2V0RGF0ZS5nZXRUaW1lKCkgLSB0b2RheS5nZXRUaW1lKClcbiAgICBjb25zdCBkaWZmRGF5cyA9IE1hdGgucm91bmQoZGlmZlRpbWUgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpXG4gICAgXG4gICAgaWYgKGRpZmZEYXlzID09PSAwKSByZXR1cm4gJ1x1NEVDQVx1NTkyOSdcbiAgICBpZiAoZGlmZkRheXMgPT09IDEpIHJldHVybiAnXHU2NjBFXHU1OTI5J1xuICAgIGlmIChkaWZmRGF5cyA9PT0gMikgcmV0dXJuICdcdTU0MEVcdTU5MjknXG4gICAgXG4gICAgY29uc3Qgd2Vla2RheXMgPSBbJ1x1NTQ2OFx1NjVFNScsICdcdTU0NjhcdTRFMDAnLCAnXHU1NDY4XHU0RThDJywgJ1x1NTQ2OFx1NEUwOScsICdcdTU0NjhcdTU2REInLCAnXHU1NDY4XHU0RTk0JywgJ1x1NTQ2OFx1NTE2RCddXG4gICAgcmV0dXJuIHdlZWtkYXlzW2RhdGUuZ2V0RGF5KCldXG4gIH1cblxuICAvLyBGb3JtYXQgZGF0ZSBhcyBZWVlZLU1NLUREXG4gIHByaXZhdGUgZm9ybWF0RGF0ZShkYXRlOiBEYXRlKTogc3RyaW5nIHtcbiAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpXG4gICAgY29uc3QgbW9udGggPSBTdHJpbmcoZGF0ZS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKVxuICAgIGNvbnN0IGRheSA9IFN0cmluZyhkYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKVxuICAgIHJldHVybiBgJHt5ZWFyfS0ke21vbnRofS0ke2RheX1gXG4gIH1cblxuICAvLyBHZW5lcmF0ZSBjYWxlbmRhciBkYXRhXG4gIGdlbmVyYXRlQ2FsZW5kYXIoKTogQXJyYXk8YW55PiB7XG4gICAgY29uc3QgcmVzdWx0ID0gW11cbiAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZSgpXG4gICAgXG4gICAgLy8gR2VuZXJhdGUgbmV4dCA2MCBkYXlzXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2MDsgaSsrKSB7XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoc3RhcnREYXRlKVxuICAgICAgZGF0ZS5zZXREYXRlKHN0YXJ0RGF0ZS5nZXREYXRlKCkgKyBpKVxuICAgICAgXG4gICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgIGRhdGU6IHRoaXMuZm9ybWF0RGF0ZShkYXRlKSxcbiAgICAgICAgZGF5OiBkYXRlLmdldERhdGUoKSxcbiAgICAgICAgbW9udGg6IGRhdGUuZ2V0TW9udGgoKSArIDEsXG4gICAgICAgIHllYXI6IGRhdGUuZ2V0RnVsbFllYXIoKSxcbiAgICAgICAgd2Vla2RheTogZGF0ZS5nZXREYXkoKSxcbiAgICAgICAgaXNUb2RheTogdGhpcy5pc1RvZGF5KGRhdGUpLFxuICAgICAgICBpc1NlbGVjdGVkOiB0aGlzLmZvcm1hdERhdGUoZGF0ZSkgPT09IHRoaXMuY3VycmVudERhdGVWYWx1ZVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgLy8gQ2hlY2sgaWYgZGF0ZSBpcyB0b2RheVxuICBwcml2YXRlIGlzVG9kYXkoZGF0ZTogRGF0ZSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxuICAgIHJldHVybiBkYXRlLmdldERhdGUoKSA9PT0gdG9kYXkuZ2V0RGF0ZSgpICYmXG4gICAgICAgICAgIGRhdGUuZ2V0TW9udGgoKSA9PT0gdG9kYXkuZ2V0TW9udGgoKSAmJlxuICAgICAgICAgICBkYXRlLmdldEZ1bGxZZWFyKCkgPT09IHRvZGF5LmdldEZ1bGxZZWFyKClcbiAgfVxuXG4gIC8vIFVwZGF0ZSBkYXRlIGJ1dHRvbnMgdG8gZGlzYWJsZSBwYXN0IGRhdGVzIGJhc2VkIG9uIGNsaWVudCB0aW1lem9uZVxuICBwcml2YXRlIHVwZGF0ZVBhc3REYXRlcygpOiB2b2lkIHtcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKClcbiAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICAgIGNvbnN0IHRvZGF5U3RyID0gdGhpcy5mb3JtYXREYXRlKHRvZGF5KVxuICAgIFxuICAgIHRoaXMuZGF0ZUJ1dHRvblRhcmdldHMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgY29uc3QgZGF0ZVN0ciA9IGJ1dHRvbi5kYXRhc2V0LmRhdGVcbiAgICAgIGlmICghZGF0ZVN0cikgcmV0dXJuXG4gICAgICBcbiAgICAgIGNvbnN0IGJ1dHRvbkRhdGUgPSBuZXcgRGF0ZShgJHtkYXRlU3RyfVQwMDowMDowMGApXG4gICAgICBidXR0b25EYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgdG9kYXkgKGNsaWVudCB0aW1lem9uZSlcbiAgICAgIGNvbnN0IHRvZGF5TWFya2VyID0gYnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXRvZGF5LW1hcmtlcl0nKSBhcyBIVE1MRWxlbWVudFxuICAgICAgaWYgKGRhdGVTdHIgPT09IHRvZGF5U3RyICYmIHRvZGF5TWFya2VyKSB7XG4gICAgICAgIHRvZGF5TWFya2VyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChidXR0b25EYXRlIDwgdG9kYXkpIHtcbiAgICAgICAgLy8gRGlzYWJsZSBwYXN0IGRhdGVzXG4gICAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IHRydWVcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktMzAnLCAnY3Vyc29yLW5vdC1hbGxvd2VkJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEVuYWJsZSBjdXJyZW50IGFuZCBmdXR1cmUgZGF0ZXNcbiAgICAgICAgYnV0dG9uLmRpc2FibGVkID0gZmFsc2VcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ29wYWNpdHktMzAnLCAnY3Vyc29yLW5vdC1hbGxvd2VkJylcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIGNvbnNvbGUubG9nKGBEYXRlUGlja2VyOiBVcGRhdGVkICR7dGhpcy5kYXRlQnV0dG9uVGFyZ2V0cy5sZW5ndGh9IGRhdGUgYnV0dG9ucyBiYXNlZCBvbiBjbGllbnQgdGltZXpvbmUgKHRvZGF5OiAke3RvZGF5U3RyfSlgKVxuICB9XG5cbiAgLy8gU3dpdGNoIHRvIGV4YWN0IGRhdGUgdGFiXG4gIHN3aXRjaFRvRXhhY3REYXRlKCk6IHZvaWQge1xuICAgIHRoaXMuZXhhY3RUYWJUYXJnZXQuY2xhc3NMaXN0LmFkZCgnZm9udC1ib2xkJywgJ2JvcmRlci1iLTInLCAnYm9yZGVyLWJsYWNrJylcbiAgICB0aGlzLmV4YWN0VGFiVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS01MDAnKVxuICAgIHRoaXMuZnV6enlUYWJUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZm9udC1ib2xkJywgJ2JvcmRlci1iLTInLCAnYm9yZGVyLWJsYWNrJylcbiAgICB0aGlzLmZ1enp5VGFiVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS01MDAnKVxuICAgIFxuICAgIHRoaXMuZXhhY3REYXRlQ29udGVudFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIHRoaXMuZnV6enlEYXRlQ29udGVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICB9XG5cbiAgLy8gU3dpdGNoIHRvIGZ1enp5IGRhdGUgdGFiXG4gIHN3aXRjaFRvRnV6enlEYXRlKCk6IHZvaWQge1xuICAgIHRoaXMuZnV6enlUYWJUYXJnZXQuY2xhc3NMaXN0LmFkZCgnZm9udC1ib2xkJywgJ2JvcmRlci1iLTInLCAnYm9yZGVyLWJsYWNrJylcbiAgICB0aGlzLmZ1enp5VGFiVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS01MDAnKVxuICAgIHRoaXMuZXhhY3RUYWJUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZm9udC1ib2xkJywgJ2JvcmRlci1iLTInLCAnYm9yZGVyLWJsYWNrJylcbiAgICB0aGlzLmV4YWN0VGFiVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS01MDAnKVxuICAgIFxuICAgIHRoaXMuZnV6enlEYXRlQ29udGVudFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIHRoaXMuZXhhY3REYXRlQ29udGVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICB9XG5cbiAgLy8gVG9nZ2xlIG1vbnRoIHNlbGVjdGlvblxuICB0b2dnbGVNb250aChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50XG4gICAgY29uc3QgbW9udGggPSBidXR0b24uZGF0YXNldC5tb250aFxuICAgIFxuICAgIGlmICghbW9udGgpIHJldHVyblxuXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRNb250aHMuaGFzKG1vbnRoKSkge1xuICAgICAgLy8gRGVzZWxlY3RcbiAgICAgIHRoaXMuc2VsZWN0ZWRNb250aHMuZGVsZXRlKG1vbnRoKVxuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLXllbGxvdy0xMDAnLCAnYm9yZGVyLXllbGxvdy01MDAnKVxuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2JnLWdyYXktNTAnKVxuICAgICAgXG4gICAgICAvLyBIaWRlIGNoZWNrbWFya1xuICAgICAgY29uc3Qgc3ZnID0gYnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpXG4gICAgICBpZiAoc3ZnKSBzdmcuY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTcwMCcpXG4gICAgICBpZiAoc3ZnKSBzdmcuY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTQwMCcpXG4gICAgICBcbiAgICAgIGNvbnN0IHNwYW4gPSBidXR0b24ucXVlcnlTZWxlY3Rvcignc3BhbicpXG4gICAgICBpZiAoc3Bhbikgc3Bhbi5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktODAwJywgJ2ZvbnQtbWVkaXVtJylcbiAgICAgIGlmIChzcGFuKSBzcGFuLmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS01MDAnKVxuICAgICAgXG4gICAgICAvLyBGaW5kIGFuZCBoaWRlIGNoZWNrbWFyayBieSBsb29raW5nIGZvciBhbGwgZGl2cyB3aXRoIHN2ZyBpbnNpZGVcbiAgICAgIGNvbnN0IGNoZWNrbWFya3MgPSBidXR0b24ucXVlcnlTZWxlY3RvckFsbCgnZGl2W2NsYXNzKj1cImFic29sdXRlXCJdJylcbiAgICAgIGNoZWNrbWFya3MuZm9yRWFjaChkaXYgPT4ge1xuICAgICAgICBpZiAoZGl2LnF1ZXJ5U2VsZWN0b3IoJ3N2Z1t3aWR0aD1cIjEyXCJdJykpIHtcbiAgICAgICAgICBkaXYuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2VsZWN0XG4gICAgICB0aGlzLnNlbGVjdGVkTW9udGhzLmFkZChtb250aClcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1ncmF5LTUwJylcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdiZy15ZWxsb3ctMTAwJywgJ2JvcmRlci15ZWxsb3ctNTAwJylcbiAgICAgIFxuICAgICAgLy8gU2hvdyBjaGVja21hcmsgc3R5bGVcbiAgICAgIGNvbnN0IHN2ZyA9IGJ1dHRvbi5xdWVyeVNlbGVjdG9yKCdzdmcnKVxuICAgICAgaWYgKHN2Zykgc3ZnLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS00MDAnKVxuICAgICAgaWYgKHN2Zykgc3ZnLmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS03MDAnKVxuICAgICAgXG4gICAgICBjb25zdCBzcGFuID0gYnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKVxuICAgICAgaWYgKHNwYW4pIHNwYW4uY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTUwMCcpXG4gICAgICBpZiAoc3Bhbikgc3Bhbi5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktODAwJywgJ2ZvbnQtbWVkaXVtJylcbiAgICAgIFxuICAgICAgLy8gRmluZCBhbmQgc2hvdyBjaGVja21hcmtcbiAgICAgIGNvbnN0IGNoZWNrbWFya3MgPSBidXR0b24ucXVlcnlTZWxlY3RvckFsbCgnZGl2W2NsYXNzKj1cImFic29sdXRlXCJdJylcbiAgICAgIGNoZWNrbWFya3MuZm9yRWFjaChkaXYgPT4ge1xuICAgICAgICBpZiAoZGl2LnF1ZXJ5U2VsZWN0b3IoJ3N2Z1t3aWR0aD1cIjEyXCJdJykpIHtcbiAgICAgICAgICBkaXYuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvLyBTZWxlY3QgcXVpY2sgcmFuZ2UgKDEsIDMsIG9yIDYgbW9udGhzKVxuICBzZWxlY3RRdWlja1JhbmdlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBjb25zdCByYW5nZVN0ciA9IGJ1dHRvbi5kYXRhc2V0LnJhbmdlXG4gICAgXG4gICAgaWYgKCFyYW5nZVN0cikgcmV0dXJuXG4gICAgXG4gICAgY29uc3QgcmFuZ2UgPSBwYXJzZUludChyYW5nZVN0ciwgMTApXG4gICAgXG4gICAgLy8gQ2xlYXIgY3VycmVudCBzZWxlY3Rpb25cbiAgICB0aGlzLmNsZWFyTW9udGhTZWxlY3Rpb24oKVxuICAgIFxuICAgIC8vIFNlbGVjdCBuZXh0IE4gbW9udGhzXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXG4gICAgY29uc3QgY3VycmVudE1vbnRoID0gbmV3IERhdGUodG9kYXkuZ2V0RnVsbFllYXIoKSwgdG9kYXkuZ2V0TW9udGgoKSwgMSlcbiAgICBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhbmdlOyBpKyspIHtcbiAgICAgIGNvbnN0IHRhcmdldE1vbnRoID0gbmV3IERhdGUoY3VycmVudE1vbnRoKVxuICAgICAgdGFyZ2V0TW9udGguc2V0TW9udGgoY3VycmVudE1vbnRoLmdldE1vbnRoKCkgKyBpKVxuICAgICAgY29uc3QgbW9udGhWYWx1ZSA9IGAke3RhcmdldE1vbnRoLmdldEZ1bGxZZWFyKCl9LSR7U3RyaW5nKHRhcmdldE1vbnRoLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpfWBcbiAgICAgIFxuICAgICAgLy8gRmluZCBhbmQgc2VsZWN0IHRoZSBidXR0b25cbiAgICAgIGNvbnN0IG1vbnRoQnV0dG9uID0gdGhpcy5tb250aEJ1dHRvblRhcmdldHMuZmluZChidG4gPT4gYnRuLmRhdGFzZXQubW9udGggPT09IG1vbnRoVmFsdWUpXG4gICAgICBpZiAobW9udGhCdXR0b24gJiYgIXRoaXMuc2VsZWN0ZWRNb250aHMuaGFzKG1vbnRoVmFsdWUpKSB7XG4gICAgICAgIG1vbnRoQnV0dG9uLmNsaWNrKClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBDbGVhciBtb250aCBzZWxlY3Rpb25cbiAgcHJpdmF0ZSBjbGVhck1vbnRoU2VsZWN0aW9uKCk6IHZvaWQge1xuICAgIHRoaXMubW9udGhCdXR0b25UYXJnZXRzLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgIGNvbnN0IG1vbnRoID0gYnV0dG9uLmRhdGFzZXQubW9udGhcbiAgICAgIGlmIChtb250aCAmJiB0aGlzLnNlbGVjdGVkTW9udGhzLmhhcyhtb250aCkpIHtcbiAgICAgICAgLy8gRGVzZWxlY3QgcHJvZ3JhbW1hdGljYWxseVxuICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhzLmRlbGV0ZShtb250aClcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLXllbGxvdy0xMDAnLCAnYm9yZGVyLXllbGxvdy01MDAnKVxuICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYmctZ3JheS01MCcpXG4gICAgICAgIFxuICAgICAgICBjb25zdCBzdmcgPSBidXR0b24ucXVlcnlTZWxlY3Rvcignc3ZnJylcbiAgICAgICAgaWYgKHN2Zykgc3ZnLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS03MDAnKVxuICAgICAgICBpZiAoc3ZnKSBzdmcuY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTQwMCcpXG4gICAgICAgIFxuICAgICAgICBjb25zdCBzcGFuID0gYnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKVxuICAgICAgICBpZiAoc3Bhbikgc3Bhbi5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktODAwJywgJ2ZvbnQtbWVkaXVtJylcbiAgICAgICAgaWYgKHNwYW4pIHNwYW4uY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTUwMCcpXG4gICAgICAgIFxuICAgICAgICBjb25zdCBjaGVja21hcmtzID0gYnV0dG9uLnF1ZXJ5U2VsZWN0b3JBbGwoJ2RpdltjbGFzcyo9XCJhYnNvbHV0ZVwiXScpXG4gICAgICAgIGNoZWNrbWFya3MuZm9yRWFjaChkaXYgPT4ge1xuICAgICAgICAgIGlmIChkaXYucXVlcnlTZWxlY3Rvcignc3ZnW3dpZHRoPVwiMTJcIl0nKSkge1xuICAgICAgICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyBDb25maXJtIGZ1enp5IGRhdGUgc2VsZWN0aW9uXG4gIGNvbmZpcm1GdXp6eURhdGUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRNb250aHMuc2l6ZSA9PT0gMCkge1xuICAgICAgYWxlcnQoJ1x1OEJGN1x1ODFGM1x1NUMxMVx1OTAwOVx1NjJFOVx1NEUwMFx1NEUyQVx1NjcwOFx1NEVGRCcpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBDb252ZXJ0IHNlbGVjdGVkIG1vbnRocyB0byBhIGNvbW1hLXNlcGFyYXRlZCBzdHJpbmdcbiAgICBjb25zdCBtb250aHNBcnJheSA9IEFycmF5LmZyb20odGhpcy5zZWxlY3RlZE1vbnRocykuc29ydCgpXG4gICAgY29uc3QgbW9udGhzU3RyaW5nID0gbW9udGhzQXJyYXkuam9pbignLCcpXG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBvbiBzZWFyY2ggcGFnZSAtIHJlbG9hZCB3aXRoIGZpcnN0IGRhdGUgb2YgZmlyc3Qgc2VsZWN0ZWQgbW9udGhcbiAgICBpZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLmluY2x1ZGVzKCcvZmxpZ2h0cy9zZWFyY2gnKSkge1xuICAgICAgY29uc29sZS5sb2coJ0RhdGUgcGlja2VyOiBTZWFyY2ggcGFnZSBmdXp6eSBtb2RlLCByZWxvYWRpbmcgd2l0aCBmaXJzdCBkYXRlIG9mIHNlbGVjdGVkIG1vbnRocycpXG4gICAgICBcbiAgICAgIC8vIEdldCB0aGUgZmlyc3QgZGF5IG9mIHRoZSBmaXJzdCBzZWxlY3RlZCBtb250aFxuICAgICAgY29uc3QgZmlyc3RNb250aCA9IG1vbnRoc0FycmF5WzBdXG4gICAgICBjb25zdCBbeWVhciwgbW9udGhdID0gZmlyc3RNb250aC5zcGxpdCgnLScpXG4gICAgICBjb25zdCBmaXJzdERhdGUgPSBgJHt5ZWFyfS0ke21vbnRofS0wMWBcbiAgICAgIFxuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZilcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdkYXRlJywgZmlyc3REYXRlKVxuICAgICAgLy8gU3RvcmUgZnV6enkgZGF0ZSBpbmZvIGZvciBmdXR1cmUgdXNlIGlmIG5lZWRlZFxuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2Z1enp5X21vbnRocycsIG1vbnRoc1N0cmluZylcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsLnRvU3RyaW5nKClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgdGhlIGRpc3BsYXkgd2l0aCBmdXp6eSBkYXRlIGluZm8gKGZvciBvdGhlciBwYWdlcylcbiAgICBpZiAodGhpcy5oYXNTZWxlY3RlZERhdGVUYXJnZXQpIHtcbiAgICAgIGNvbnN0IGZpcnN0TW9udGggPSBtb250aHNBcnJheVswXVxuICAgICAgY29uc3QgWywgbW9udGhdID0gZmlyc3RNb250aC5zcGxpdCgnLScpXG4gICAgICBjb25zdCBtb250aE51bSA9IHBhcnNlSW50KG1vbnRoLCAxMClcbiAgICAgIFxuICAgICAgaWYgKG1vbnRoc0FycmF5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVRhcmdldC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgJHttb250aE51bX08c3BhbiBjbGFzcz1cInRleHQtbGcgZm9udC1tZWRpdW0gbXgtMC41XCI+XHU2NzA4PC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1iYXNlIHRleHQtZ3JheS01MDAgZm9udC1tZWRpdW1cIj5cdTUxNjhcdTY3MDg8L3NwYW4+XG4gICAgICAgIGBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGxhc3RNb250aCA9IG1vbnRoc0FycmF5W21vbnRoc0FycmF5Lmxlbmd0aCAtIDFdXG4gICAgICAgIGNvbnN0IFssIGxhc3RNb250aFN0cl0gPSBsYXN0TW9udGguc3BsaXQoJy0nKVxuICAgICAgICBjb25zdCBsYXN0TW9udGhOdW0gPSBwYXJzZUludChsYXN0TW9udGhTdHIsIDEwKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVUYXJnZXQuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICR7bW9udGhOdW19PHNwYW4gY2xhc3M9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIG14LTAuNVwiPlx1NjcwODwvc3Bhbj4tJHtsYXN0TW9udGhOdW19PHNwYW4gY2xhc3M9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIG14LTAuNVwiPlx1NjcwODwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInRleHQtYmFzZSB0ZXh0LWdyYXktNTAwIGZvbnQtbWVkaXVtXCI+KCR7bW9udGhzQXJyYXkubGVuZ3RofVx1NEUyQVx1NjcwOCk8L3NwYW4+XG4gICAgICAgIGBcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gU3RvcmUgZnV6enkgZGF0ZSBpbiB0aGUgaGlkZGVuIGlucHV0IHdpdGggYSBzcGVjaWFsIHByZWZpeFxuICAgIGlmICh0aGlzLmhhc0RhdGVJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5kYXRlSW5wdXRUYXJnZXQudmFsdWUgPSBgZnV6enk6JHttb250aHNTdHJpbmd9YFxuICAgIH1cbiAgICBcbiAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJ0ZXJtc01vZGFsXCIsIFwiaW5zdXJhbmNlTW9kYWxcIiwgXCJtZW1iZXJNb2RhbFwiLCBcImNvbmZpcm1Nb2RhbFwiLCBcInRvdGFsUHJpY2VBbW91bnRcIl1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHRlcm1zTW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaW5zdXJhbmNlTW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbWVtYmVyTW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY29uZmlybU1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRvdGFsUHJpY2VBbW91bnRUYXJnZXQ6IEhUTUxFbGVtZW50XG5cbiAgLy8gXHU4RkZEXHU4RTJBXHU0RjFBXHU1NDU4XHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1REYyXHU1QjhDXHU2MjEwXG4gIHByaXZhdGUgbWVtYmVyQ2hlY2tDb21wbGV0ZWQ6IGJvb2xlYW4gPSBmYWxzZVxuICAvLyBcdThGRkRcdThFMkFcdTY2MkZcdTU0MjZcdTRFM0FcdTRGMUFcdTU0NThcdTc4NkVcdThCQTRcdTU0MEVcdTc2ODRcdTdCMkNcdTRFOENcdTZCMjFcdTdCNDlcdTVGODVcbiAgcHJpdmF0ZSBpc1NlY29uZFdhaXQ6IGJvb2xlYW4gPSBmYWxzZVxuICAvLyBcdTVCNThcdTUwQThcdTk3MDBcdTg5ODFcdTZDRThcdTUxOENcdTc2ODRcdTgyMkFcdTdBN0FcdTUxNkNcdTUzRjhcdTUyMTdcdTg4NjhcbiAgcHJpdmF0ZSBtaXNzaW5nQWlybGluZXM6IHN0cmluZ1tdID0gW11cblxuICBzZWxlY3RQYXNzZW5nZXIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgcmFkaW8gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBpZE51bWJlciA9IHJhZGlvLmRhdGFzZXQuaWROdW1iZXIgfHwgJydcbiAgICBjb25zdCBwaG9uZSA9IHJhZGlvLmRhdGFzZXQucGhvbmUgfHwgJydcbiAgICBcbiAgICAvLyBcdTU4NkJcdTUxNDVcdTk2OTBcdTg1Q0ZcdTVCNTdcdTZCQjVcbiAgICBjb25zdCBpZE51bWJlckZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3Nlbmdlcl9pZF9udW1iZXInKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgcGhvbmVGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib29raW5nX2NvbnRhY3RfcGhvbmUnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgXG4gICAgaWYgKGlkTnVtYmVyRmllbGQpIHtcbiAgICAgIGlkTnVtYmVyRmllbGQudmFsdWUgPSBpZE51bWJlclxuICAgIH1cbiAgICBcbiAgICBpZiAocGhvbmVGaWVsZCAmJiBwaG9uZSkge1xuICAgICAgcGhvbmVGaWVsZC52YWx1ZSA9IHBob25lXG4gICAgfVxuICB9XG5cbiAgc2VsZWN0SW5zdXJhbmNlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBjb25zdCBpbnN1cmFuY2VUeXBlID0gYnV0dG9uLmRhdGFzZXQuaW5zdXJhbmNlVHlwZSB8fCAnbm9uZSdcbiAgICBjb25zdCBpbnN1cmFuY2VQcmljZSA9IGJ1dHRvbi5kYXRhc2V0Lmluc3VyYW5jZVByaWNlIHx8ICcwJ1xuICAgIFxuICAgIHRoaXMuc2V0SW5zdXJhbmNlVmFsdWVzKGluc3VyYW5jZVR5cGUsIGluc3VyYW5jZVByaWNlKVxuICAgIHRoaXMuY2xvc2VJbnN1cmFuY2VNb2RhbCgpXG4gIH1cblxuICBzZXRJbnN1cmFuY2VWYWx1ZXMoaW5zdXJhbmNlVHlwZTogc3RyaW5nLCBpbnN1cmFuY2VQcmljZTogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgaW5zdXJhbmNlVHlwZUZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jvb2tpbmdfaW5zdXJhbmNlX3R5cGUnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgaW5zdXJhbmNlUHJpY2VGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib29raW5nX2luc3VyYW5jZV9wcmljZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBcbiAgICBpZiAoaW5zdXJhbmNlVHlwZUZpZWxkKSB7XG4gICAgICBpbnN1cmFuY2VUeXBlRmllbGQudmFsdWUgPSBpbnN1cmFuY2VUeXBlXG4gICAgfVxuICAgIFxuICAgIGlmIChpbnN1cmFuY2VQcmljZUZpZWxkKSB7XG4gICAgICBpbnN1cmFuY2VQcmljZUZpZWxkLnZhbHVlID0gaW5zdXJhbmNlUHJpY2VcbiAgICB9XG4gIH1cblxuICAvLyBcdTU5MDRcdTc0MDZcdTg4NjhcdTUzNTVcdTRFMkRcdTc2ODRcdTRGRERcdTk2NjlcdTkwMDlcdTk4NzlcdTUzNjFcdTkwMDlcdTYyRTlcbiAgc2VsZWN0SW5zdXJhbmNlT3B0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHJhZGlvID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgaW5zdXJhbmNlVHlwZSA9IHJhZGlvLmRhdGFzZXQuaW5zdXJhbmNlVHlwZSB8fCAnbm9uZSdcbiAgICBjb25zdCBpbnN1cmFuY2VQcmljZSA9IHJhZGlvLmRhdGFzZXQuaW5zdXJhbmNlUHJpY2UgfHwgJzAnXG4gICAgXG4gICAgLy8gXHU2NkY0XHU2NUIwXHU5NjkwXHU4NUNGXHU1QjU3XHU2QkI1XG4gICAgdGhpcy5zZXRJbnN1cmFuY2VWYWx1ZXMoaW5zdXJhbmNlVHlwZSwgaW5zdXJhbmNlUHJpY2UpXG4gICAgXG4gICAgLy8gXHU2NkY0XHU2NUIwXHU4OUM2XHU4OUM5XHU2MzA3XHU3OTNBXHU1NjY4XHVGRjA4XHU4RkI5XHU2ODQ2XHU1NDhDXHU1QkY5XHU1M0Y3XHVGRjA5XG4gICAgY29uc3QgYWxsQ2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1pbnN1cmFuY2UtY2FyZF0nKVxuICAgIGFsbENhcmRzLmZvckVhY2goY2FyZCA9PiB7XG4gICAgICBjYXJkLmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci15ZWxsb3ctNDAwJywgJ2JvcmRlci1ibHVlLTQwMCcsICdib3JkZXItZ3JheS00MDAnKVxuICAgICAgY2FyZC5jbGFzc0xpc3QuYWRkKCdib3JkZXItMicsICdib3JkZXItZ3JheS0zMDAnKVxuICAgICAgY29uc3QgY2hlY2ttYXJrID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcuYmcteWVsbG93LTQwMCcpIGFzIEhUTUxFbGVtZW50XG4gICAgICBpZiAoY2hlY2ttYXJrKSB7XG4gICAgICAgIGNoZWNrbWFyay5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICAvLyBcdTRFM0FcdTkwMDlcdTRFMkRcdTc2ODRcdTUzNjFcdTcyNDdcdTZERkJcdTUyQTBcdTY4MzdcdTVGMEZcbiAgICBjb25zdCBzZWxlY3RlZENhcmQgPSByYWRpby5jbG9zZXN0KCdbZGF0YS1pbnN1cmFuY2UtY2FyZF0nKSBhcyBIVE1MRWxlbWVudFxuICAgIGlmIChzZWxlY3RlZENhcmQpIHtcbiAgICAgIHNlbGVjdGVkQ2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItZ3JheS0zMDAnKVxuICAgICAgaWYgKGluc3VyYW5jZVR5cGUgPT09ICdzdGFuZGFyZCcpIHtcbiAgICAgICAgc2VsZWN0ZWRDYXJkLmNsYXNzTGlzdC5hZGQoJ2JvcmRlci15ZWxsb3ctNDAwJylcbiAgICAgIH0gZWxzZSBpZiAoaW5zdXJhbmNlVHlwZSA9PT0gJ3ByZW1pdW0nKSB7XG4gICAgICAgIHNlbGVjdGVkQ2FyZC5jbGFzc0xpc3QuYWRkKCdib3JkZXItYmx1ZS00MDAnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZWN0ZWRDYXJkLmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1ncmF5LTQwMCcpXG4gICAgICB9XG4gICAgICBjb25zdCBjaGVja21hcmsgPSBzZWxlY3RlZENhcmQucXVlcnlTZWxlY3RvcignLmJnLXllbGxvdy00MDAnKSBhcyBIVE1MRWxlbWVudFxuICAgICAgaWYgKGNoZWNrbWFyaykge1xuICAgICAgICBjaGVja21hcmsuc3R5bGUuZGlzcGxheSA9ICdmbGV4J1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1NjZGNFx1NjVCMFx1NUU5NVx1OTBFOFx1NjAzQlx1NEVGN1xuICAgIHRoaXMudXBkYXRlVG90YWxQcmljZSgpXG4gIH1cblxuICAvLyBcdTY2RjRcdTY1QjBcdTYwM0JcdTRFRjdcdTY2M0VcdTc5M0FcbiAgcHJpdmF0ZSB1cGRhdGVUb3RhbFByaWNlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy50b3RhbFByaWNlQW1vdW50VGFyZ2V0KSByZXR1cm5cbiAgICBcbiAgICBjb25zdCBiYXNlUHJpY2UgPSBwYXJzZUludCh0aGlzLnRvdGFsUHJpY2VBbW91bnRUYXJnZXQuZGF0YXNldC5iYXNlUHJpY2UgfHwgJzAnKVxuICAgIGNvbnN0IGluc3VyYW5jZVByaWNlRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9va2luZ19pbnN1cmFuY2VfcHJpY2UnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgaW5zdXJhbmNlUHJpY2UgPSBwYXJzZUludChpbnN1cmFuY2VQcmljZUZpZWxkPy52YWx1ZSB8fCAnMCcpXG4gICAgXG4gICAgLy8gXHU4QkExXHU3Qjk3XHU2MDNCXHU0RUY3XHVGRjFBXHU1N0ZBXHU3ODQwXHU0RUY3XHU2ODNDICsgXHU0RkREXHU5NjY5XHU0RUY3XHU2ODNDIFx1MDBENyBcdTRFQkFcdTY1NzBcdUZGMDhcdTVGNTNcdTUyNERcdTUwNDdcdThCQkVcdTRFM0ExXHU0RUJBXHVGRjA5XG4gICAgY29uc3QgcGFzc2VuZ2VyQ291bnQgPSAxXG4gICAgY29uc3QgdG90YWxQcmljZSA9IGJhc2VQcmljZSArIChpbnN1cmFuY2VQcmljZSAqIHBhc3NlbmdlckNvdW50KVxuICAgIFxuICAgIHRoaXMudG90YWxQcmljZUFtb3VudFRhcmdldC50ZXh0Q29udGVudCA9IHRvdGFsUHJpY2UudG9TdHJpbmcoKVxuICB9XG5cbiAgc2hvd1Rlcm1zTW9kYWwoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIHRoaXMudGVybXNNb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICB9XG5cbiAgY2xvc2VUZXJtc01vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMudGVybXNNb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICB9XG5cbiAgYWNjZXB0VGVybXMoKTogdm9pZCB7XG4gICAgY29uc3QgdGVybXNDaGVja2JveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib29raW5nX2FjY2VwdF90ZXJtcycpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBpZiAodGVybXNDaGVja2JveCkge1xuICAgICAgdGVybXNDaGVja2JveC5jaGVja2VkID0gdHJ1ZVxuICAgIH1cbiAgICB0aGlzLmNsb3NlVGVybXNNb2RhbCgpXG4gICAgXG4gICAgLy8gXHU2OEMwXHU2N0U1XHU3NTI4XHU2MjM3XHU2NjJGXHU1NDI2XHU1REYyXHU5MDA5XHU2MkU5XHU0RkREXHU5NjY5XG4gICAgY29uc3QgaW5zdXJhbmNlVHlwZUZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jvb2tpbmdfaW5zdXJhbmNlX3R5cGUnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgaW5zdXJhbmNlVHlwZSA9IGluc3VyYW5jZVR5cGVGaWVsZD8udmFsdWUgfHwgJ25vbmUnXG4gICAgXG4gICAgaWYgKGluc3VyYW5jZVR5cGUgPT09ICdub25lJykge1xuICAgICAgLy8gXHU3NTI4XHU2MjM3XHU2NzJBXHU5MDA5XHU2MkU5XHU0RkREXHU5NjY5XHVGRjBDXHU2NjNFXHU3OTNBXHU0RkREXHU5NjY5XHU2M0E4XHU4MzUwXHU1RjM5XHU3QTk3XG4gICAgICB0aGlzLnNob3dJbnN1cmFuY2VNb2RhbCgpXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFx1NzUyOFx1NjIzN1x1NURGMlx1OTAwOVx1NjJFOVx1NEZERFx1OTY2OVx1RkYwQ1x1OERGM1x1OEZDN1x1NEZERFx1OTY2OVx1NUYzOVx1N0E5N1x1RkYwQ1x1NzZGNFx1NjNBNVx1OEZEQlx1NTE2NVx1Nzg2RVx1OEJBNFx1NkQ0MVx1N0EwQlxuICAgICAgdGhpcy5zaG93Q29uZmlybU1vZGFsKClcbiAgICB9XG4gIH1cblxuICBzaG93SW5zdXJhbmNlTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5pbnN1cmFuY2VNb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICB9XG5cbiAgY2xvc2VJbnN1cmFuY2VNb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLmluc3VyYW5jZU1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgdGhpcy5zaG93Q29uZmlybU1vZGFsKClcbiAgfVxuXG4gIHNraXBJbnN1cmFuY2UoKTogdm9pZCB7XG4gICAgdGhpcy5zZXRJbnN1cmFuY2VWYWx1ZXMoJ25vbmUnLCAnMCcpXG4gICAgdGhpcy5jbG9zZUluc3VyYW5jZU1vZGFsKClcbiAgfVxuXG4gIHNob3dNZW1iZXJNb2RhbCgpOiB2b2lkIHtcbiAgICAvLyBcdTY2RjRcdTY1QjBcdTVGMzlcdTdBOTdcdTRFMkRcdTc2ODRcdTgyMkFcdTdBN0FcdTUxNkNcdTUzRjhcdTUyMTdcdTg4NjhcdTY2M0VcdTc5M0FcbiAgICB0aGlzLnVwZGF0ZU1lbWJlck1vZGFsQ29udGVudCgpXG4gICAgdGhpcy5tZW1iZXJNb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICB9XG5cbiAgdXBkYXRlTWVtYmVyTW9kYWxDb250ZW50KCk6IHZvaWQge1xuICAgIC8vIFx1NjZGNFx1NjVCMFx1NEYxQVx1NTQ1OFx1NUYzOVx1N0E5N1x1NEUyRFx1NjYzRVx1NzkzQVx1NzY4NFx1ODIyQVx1N0E3QVx1NTE2Q1x1NTNGOFx1NTQwRFx1NzlGMFxuICAgIGNvbnN0IGFpcmxpbmVUZXh0RWxlbWVudCA9IHRoaXMubWVtYmVyTW9kYWxUYXJnZXQucXVlcnlTZWxlY3RvcignW2RhdGEtYWlybGluZS1uYW1lc10nKSBhcyBIVE1MRWxlbWVudFxuICAgIGlmIChhaXJsaW5lVGV4dEVsZW1lbnQgJiYgdGhpcy5taXNzaW5nQWlybGluZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgYWlybGluZXNUZXh0ID0gdGhpcy5taXNzaW5nQWlybGluZXMuam9pbignXHUzMDAxJylcbiAgICAgIGFpcmxpbmVUZXh0RWxlbWVudC50ZXh0Q29udGVudCA9IGFpcmxpbmVzVGV4dFxuICAgIH1cbiAgfVxuXG4gIGNsb3NlTWVtYmVyTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5tZW1iZXJNb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIC8vIFx1NjgwN1x1OEJCMFx1NEYxQVx1NTQ1OFx1NjhDMFx1NjdFNVx1NURGMlx1NUI4Q1x1NjIxMFx1RkYwOFx1NzUyOFx1NjIzN1x1NTQwQ1x1NjEwRlx1NkNFOFx1NTE4Q1x1NEYxQVx1NTQ1OFx1RkYwOVxuICAgIHRoaXMubWVtYmVyQ2hlY2tDb21wbGV0ZWQgPSB0cnVlXG4gICAgLy8gXHU2ODA3XHU4QkIwXHU0RTNBXHU3QjJDXHU0RThDXHU2QjIxXHU3QjQ5XHU1Rjg1XG4gICAgdGhpcy5pc1NlY29uZFdhaXQgPSB0cnVlXG4gICAgLy8gXHU0RjFBXHU1NDU4XHU3ODZFXHU4QkE0XHU1NDBFXHVGRjBDXHU1MThEXHU2QjIxXHU2NjNFXHU3OTNBXHU3QjQ5XHU1Rjg1XHU1RjM5XHU3QTk3XG4gICAgdGhpcy5zaG93Q29uZmlybU1vZGFsKClcbiAgfVxuXG4gIHNob3dDb25maXJtTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5jb25maXJtTW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICBcbiAgICAvLyBcdTU5ODJcdTY3OUNcdTY2MkZcdTdCMkNcdTRFOENcdTZCMjFcdTdCNDlcdTVGODVcdUZGMDhcdTRGMUFcdTU0NThcdTc4NkVcdThCQTRcdTU0MEVcdUZGMDlcdUZGMENcdTdCNDlcdTVGODU1LTEwXHU3OUQyXHU1NDBFXHU2M0QwXHU0RUE0XG4gICAgaWYgKHRoaXMuaXNTZWNvbmRXYWl0KSB7XG4gICAgICBjb25zdCB3YWl0VGltZSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICgxMDAwMCAtIDUwMDAgKyAxKSkgKyA1MDAwXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5zdWJtaXRGb3JtKClcbiAgICAgIH0sIHdhaXRUaW1lKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIFx1N0IyQ1x1NEUwMFx1NkIyMVx1NjYzRVx1NzkzQVx1N0I0OVx1NUY4NVx1NUYzOVx1N0E5N1x1NjVGNlx1RkYwQ1x1N0FDQlx1NTM3M1x1NjhDMFx1NjdFNVx1NEYxQVx1NTQ1OFx1NzJCNlx1NjAwMVx1RkYwOFx1NjVFMFx1OTcwMFx1N0I0OVx1NUY4NVx1RkYwOVxuICAgIHRoaXMuY2hlY2tNZW1iZXJzaGlwU3RhdHVzRnJvbURCKCkudGhlbihuZWVkc01lbWJlclJlZ2lzdHJhdGlvbiA9PiB7XG4gICAgICBpZiAobmVlZHNNZW1iZXJSZWdpc3RyYXRpb24pIHtcbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU5NzAwXHU4OTgxXHU2Q0U4XHU1MThDXHU0RjFBXHU1NDU4XHVGRjBDXHU1MTczXHU5NUVEXHU3ODZFXHU4QkE0XHU1RjM5XHU3QTk3XHU1RTc2XHU2NjNFXHU3OTNBXHU0RjFBXHU1NDU4XHU1RjM5XHU3QTk3XG4gICAgICAgIHRoaXMuY2xvc2VDb25maXJtTW9kYWwoKVxuICAgICAgICB0aGlzLnNob3dNZW1iZXJNb2RhbCgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTVERjJcdTY2MkZcdTRGMUFcdTU0NThcdUZGMENcdTRGRERcdTYzMDFcdTdCNDlcdTVGODVcdTVGMzlcdTdBOTdcdTY2M0VcdTc5M0FcdUZGMENcdTdCNDlcdTVGODU1LTEwXHU3OUQyXHU1NDBFXHU2M0QwXHU0RUE0XG4gICAgICAgIHRoaXMubWVtYmVyQ2hlY2tDb21wbGV0ZWQgPSB0cnVlXG4gICAgICAgIGNvbnN0IHdhaXRUaW1lID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKDEwMDAwIC0gNTAwMCArIDEpKSArIDUwMDBcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5zdWJtaXRGb3JtKClcbiAgICAgICAgfSwgd2FpdFRpbWUpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGNoZWNrTWVtYmVyc2hpcFN0YXR1c0Zyb21EQigpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAvLyBcdTRFQ0VcdTY1NzBcdTYzNkVcdTVFOTNcdTY4QzBcdTY3RTVcdTVGNTNcdTUyNERcdTc1MjhcdTYyMzdcdTY2MkZcdTU0MjZcdTRFM0FcdTYyNDBcdTY3MDlcdTc2RjhcdTUxNzNcdTgyMkFcdTdBN0FcdTUxNkNcdTUzRjhcdTc2ODRcdTRGMUFcdTU0NThcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKVxuICAgICAgY29uc3QgZmxpZ2h0SWQgPSB1cmxQYXJhbXMuZ2V0KCdmbGlnaHRfaWQnKVxuICAgICAgY29uc3QgcmV0dXJuRmxpZ2h0SWQgPSB1cmxQYXJhbXMuZ2V0KCdyZXR1cm5fZmxpZ2h0X2lkJylcbiAgICAgIFxuICAgICAgLy8gXHU2Nzg0XHU1RUZBXHU4QkY3XHU2QzQyIFVSTFx1RkYwQ1x1NTMwNVx1NTQyQlx1NTNCQlx1N0EwQlx1NTQ4Q1x1NTZERVx1N0EwQlx1ODIyQVx1NzNFRCBJRFxuICAgICAgbGV0IHVybCA9IGAvYXBpL2NoZWNrX21lbWJlcnNoaXA/ZmxpZ2h0X2lkPSR7ZmxpZ2h0SWR9YFxuICAgICAgaWYgKHJldHVybkZsaWdodElkKSB7XG4gICAgICAgIHVybCArPSBgJnJldHVybl9mbGlnaHRfaWQ9JHtyZXR1cm5GbGlnaHRJZH1gXG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU4QkY3XHU2QzQyXHU1OTMxXHU4RDI1XHVGRjBDXHU5RUQ4XHU4QkE0XHU1MDQ3XHU4QkJFXHU5NzAwXHU4OTgxXHU2Q0U4XHU1MThDXHU0RjFBXHU1NDU4XG4gICAgICAgIHRoaXMubWlzc2luZ0FpcmxpbmVzID0gW11cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgICAgLy8gXHU1QjU4XHU1MEE4XHU3RjNBXHU1OTMxXHU3Njg0XHU4MjJBXHU3QTdBXHU1MTZDXHU1M0Y4XHU0RjFBXHU1NDU4XHU4RUFCXHU0RUZEXG4gICAgICB0aGlzLm1pc3NpbmdBaXJsaW5lcyA9IGRhdGEubWlzc2luZ19haXJsaW5lcyB8fCBbXVxuICAgICAgXG4gICAgICByZXR1cm4gIWRhdGEuaXNfbWVtYmVyIC8vIFx1OEZENFx1NTZERXRydWVcdTg4NjhcdTc5M0FcdTk3MDBcdTg5ODFcdTZDRThcdTUxOENcdTRGMUFcdTU0NThcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignXHU2OEMwXHU2N0U1XHU0RjFBXHU1NDU4XHU3MkI2XHU2MDAxXHU1OTMxXHU4RDI1OicsIGVycm9yKVxuICAgICAgLy8gXHU1M0QxXHU3NTFGXHU5NTE5XHU4QkVGXHU2NUY2XHVGRjBDXHU5RUQ4XHU4QkE0XHU1MDQ3XHU4QkJFXHU5NzAwXHU4OTgxXHU2Q0U4XHU1MThDXHU0RjFBXHU1NDU4XG4gICAgICB0aGlzLm1pc3NpbmdBaXJsaW5lcyA9IFtdXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIGNsb3NlQ29uZmlybU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMuY29uZmlybU1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gIH1cblxuICBzdWJtaXRGb3JtKCk6IHZvaWQge1xuICAgIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBjb25zdCBmb3JtID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKSBhcyBIVE1MRm9ybUVsZW1lbnRcbiAgICBpZiAoZm9ybSkge1xuICAgICAgZm9ybS5zdWJtaXQoKVxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZVN1Ym1pdChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLy8gXHU5MUNEXHU3RjZFXHU0RjFBXHU1NDU4XHU2OEMwXHU2N0U1XHU2ODA3XHU1RkQ3XG4gICAgdGhpcy5tZW1iZXJDaGVja0NvbXBsZXRlZCA9IGZhbHNlXG4gICAgdGhpcy5pc1NlY29uZFdhaXQgPSBmYWxzZVxuICAgIHRoaXMuc2hvd1Rlcm1zTW9kYWwoZXZlbnQpXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcIm1vZGFsXCJdXG5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIFx1OTg3NVx1OTc2Mlx1NTJBMFx1OEY3RFx1NTQwRVx1ODFFQVx1NTJBOFx1NjYzRVx1NzkzQVx1NEYxOFx1NjBFMFx1NTIzOFx1NUYzOVx1N0E5N1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgfVxuXG4gIGNsYWltQ291cG9ucygpOiB2b2lkIHtcbiAgICAvLyBcdTk4ODZcdTUzRDZcdTRGMThcdTYwRTBcdTUyMzhcbiAgICBhbGVydCgnXHU0RjE4XHU2MEUwXHU1MjM4XHU1REYyXHU5ODg2XHU1M0Q2XHU2MjEwXHU1MjlGXHVGRjAxJylcbiAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICB9XG5cbiAgY2xvc2VNb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcInRhYkNvbnRlbnRcIixcbiAgICBcInRhYnNcIlxuICBdXG5cbiAgZGVjbGFyZSByZWFkb25seSB0YWJDb250ZW50VGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IHRhYnNUYXJnZXQ6IEhUTUxFbGVtZW50XG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkRlc3RpbmF0aW9uIGNvbnRyb2xsZXIgY29ubmVjdGVkXCIpXG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiRGVzdGluYXRpb24gZGlzY29ubmVjdGVkXCIpXG4gIH1cblxuICBzd2l0Y2hUYWIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGNvbnN0IHRhYk5hbWUgPSBidXR0b24uZGF0YXNldC50YWJcbiAgICBcbiAgICBpZiAoIXRhYk5hbWUpIHJldHVyblxuXG4gICAgLy8gVXBkYXRlIGFjdGl2ZSB0YWIgYnV0dG9uXG4gICAgY29uc3QgYWxsVGFiQnV0dG9ucyA9IHRoaXMudGFic1RhcmdldC5xdWVyeVNlbGVjdG9yQWxsKCcudGFiLWJ0bicpXG4gICAgYWxsVGFiQnV0dG9ucy5mb3JFYWNoKGJ0biA9PiB7XG4gICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTkwMCcsICdib3JkZXItZ3JheS05MDAnKVxuICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS01MDAnLCAnYm9yZGVyLXRyYW5zcGFyZW50JylcbiAgICB9KVxuICAgIFxuICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktNTAwJywgJ2JvcmRlci10cmFuc3BhcmVudCcpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS05MDAnLCAnYm9yZGVyLWdyYXktOTAwJylcblxuICAgIC8vIFNob3cgY29ycmVzcG9uZGluZyB0YWIgY29udGVudFxuICAgIHRoaXMudGFiQ29udGVudFRhcmdldHMuZm9yRWFjaChjb250ZW50ID0+IHtcbiAgICAgIGlmIChjb250ZW50LmRhdGFzZXQudGFiID09PSB0YWJOYW1lKSB7XG4gICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG5cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmludGVyZmFjZSBDaXR5RGF0YSB7XG4gIG5hbWU6IHN0cmluZ1xuICBwaW55aW46IHN0cmluZ1xuICBzbHVnOiBzdHJpbmcgfCBudWxsXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcInJlZ2lvbkJ1dHRvblwiLCBcImNpdHlMaXN0XCIsIFwic2VhcmNoSW5wdXRcIiwgXCJzZWFyY2hSZXN1bHRzXCIsIFwic2VhcmNoUmVzdWx0c0xpc3RcIiwgXCJub1Jlc3VsdHNcIiwgXCJub3JtYWxWaWV3XCJdXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgYXZhaWxhYmxlRGVzdGluYXRpb25zOiBBcnJheSxcbiAgICBhbGxDaXRpZXM6IEFycmF5XG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHJlZ2lvbkJ1dHRvblRhcmdldHM6IEhUTUxCdXR0b25FbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBjaXR5TGlzdFRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBzZWFyY2hJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlYXJjaFJlc3VsdHNUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VhcmNoUmVzdWx0c0xpc3RUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbm9SZXN1bHRzVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IG5vcm1hbFZpZXdUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzU2VhcmNoUmVzdWx0c1RhcmdldDogYm9vbGVhblxuICBcbiAgZGVjbGFyZSBhdmFpbGFibGVEZXN0aW5hdGlvbnNWYWx1ZTogc3RyaW5nW11cbiAgZGVjbGFyZSBhbGxDaXRpZXNWYWx1ZTogQ2l0eURhdGFbXVxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJSZWdpb25TZWxlY3RvciBjb25uZWN0ZWRcIilcbiAgICAvLyBcdTlFRDhcdThCQTRcdTY2M0VcdTc5M0FcdTcwRURcdTk1RThcdTc2RUVcdTc2ODRcdTU3MzBcbiAgICB0aGlzLnNob3dSZWdpb24oXCJcdTcwRURcdTk1RThcdTc2RUVcdTc2ODRcdTU3MzBcIilcbiAgfVxuXG4gIHNlYXJjaChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBpbnB1dCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgcXVlcnkgPSBpbnB1dC52YWx1ZS50cmltKCkudG9Mb3dlckNhc2UoKVxuICAgIFxuICAgIGlmIChxdWVyeSA9PT0gJycpIHtcbiAgICAgIC8vIFx1NkUwNVx1N0E3QVx1NjQxQ1x1N0QyMlx1RkYwQ1x1NjYzRVx1NzkzQVx1NkI2M1x1NUUzOFx1ODlDNlx1NTZGRVxuICAgICAgdGhpcy5zaG93Tm9ybWFsVmlldygpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gXHU2NDFDXHU3RDIyXHU1N0NFXHU1RTAyXHVGRjA4XHU2NTJGXHU2MzAxXHU0RTJEXHU2NTg3XHU1NDhDXHU2MkZDXHU5N0YzXHVGRjA5XG4gICAgY29uc3QgcmVzdWx0cyA9IHRoaXMuYWxsQ2l0aWVzVmFsdWUuZmlsdGVyKGNpdHkgPT4gXG4gICAgICBjaXR5Lm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkgfHwgXG4gICAgICBjaXR5LnBpbnlpbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KVxuICAgIClcbiAgICBcbiAgICB0aGlzLmRpc3BsYXlTZWFyY2hSZXN1bHRzKHJlc3VsdHMpXG4gIH1cbiAgXG4gIGNsZWFyU2VhcmNoKCk6IHZvaWQge1xuICAgIHRoaXMuc2VhcmNoSW5wdXRUYXJnZXQudmFsdWUgPSAnJ1xuICAgIHRoaXMuc2hvd05vcm1hbFZpZXcoKVxuICB9XG4gIFxuICBwcml2YXRlIGRpc3BsYXlTZWFyY2hSZXN1bHRzKHJlc3VsdHM6IENpdHlEYXRhW10pOiB2b2lkIHtcbiAgICAvLyBcdTk2OTBcdTg1Q0ZcdTZCNjNcdTVFMzhcdTg5QzZcdTU2RkVcdUZGMENcdTY2M0VcdTc5M0FcdTY0MUNcdTdEMjJcdTdFRDNcdTY3OUNcbiAgICB0aGlzLm5vcm1hbFZpZXdUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBcbiAgICBpZiAodGhpcy5oYXNTZWFyY2hSZXN1bHRzVGFyZ2V0KSB7XG4gICAgICB0aGlzLnNlYXJjaFJlc3VsdHNUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICB9XG4gICAgXG4gICAgaWYgKHJlc3VsdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBcdTY2M0VcdTc5M0FcdTY1RTBcdTdFRDNcdTY3OUNcbiAgICAgIHRoaXMuc2VhcmNoUmVzdWx0c0xpc3RUYXJnZXQuaW5uZXJIVE1MID0gJydcbiAgICAgIHRoaXMubm9SZXN1bHRzVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFx1NjYzRVx1NzkzQVx1NjQxQ1x1N0QyMlx1N0VEM1x1Njc5Q1xuICAgICAgdGhpcy5ub1Jlc3VsdHNUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgIHRoaXMuc2VhcmNoUmVzdWx0c0xpc3RUYXJnZXQuaW5uZXJIVE1MID0gcmVzdWx0cy5tYXAoY2l0eSA9PiBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWNlbnRlciBweS0zIHB4LTIgYmctc3VyZmFjZSByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItYm9yZGVyIGhvdmVyOmJvcmRlci1wcmltYXJ5IGhvdmVyOnNoYWRvdy1zbSB0cmFuc2l0aW9uLWFsbCBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgZGF0YS1hY3Rpb249XCJjbGljay0+cmVnaW9uLXNlbGVjdG9yI3NlbGVjdENpdHlcIlxuICAgICAgICAgICAgIGRhdGEtY2l0eS1uYW1lPVwiJHtjaXR5Lm5hbWV9XCJcbiAgICAgICAgICAgICBkYXRhLWNpdHktc2x1Zz1cIiR7Y2l0eS5zbHVnIHx8ICcnfVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZm9yZWdyb3VuZFwiPiR7Y2l0eS5uYW1lfTwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGApLmpvaW4oJycpXG4gICAgfVxuICB9XG4gIFxuICBwcml2YXRlIHNob3dOb3JtYWxWaWV3KCk6IHZvaWQge1xuICAgIC8vIFx1NjYzRVx1NzkzQVx1NkI2M1x1NUUzOFx1ODlDNlx1NTZGRVx1RkYwQ1x1OTY5MFx1ODVDRlx1NjQxQ1x1N0QyMlx1N0VEM1x1Njc5Q1xuICAgIHRoaXMubm9ybWFsVmlld1RhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIFxuICAgIGlmICh0aGlzLmhhc1NlYXJjaFJlc3VsdHNUYXJnZXQpIHtcbiAgICAgIHRoaXMuc2VhcmNoUmVzdWx0c1RhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIH1cbiAgfVxuXG4gIHNlbGVjdFJlZ2lvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50XG4gICAgY29uc3QgcmVnaW9uTmFtZSA9IGJ1dHRvbi5kYXRhc2V0LnJlZ2lvblxuICAgIFxuICAgIGlmICghcmVnaW9uTmFtZSkgcmV0dXJuXG5cbiAgICAvLyBcdTY2RjRcdTY1QjBcdTYzMDlcdTk0QUVcdTY4MzdcdTVGMEZcbiAgICB0aGlzLnJlZ2lvbkJ1dHRvblRhcmdldHMuZm9yRWFjaChidG4gPT4ge1xuICAgICAgaWYgKGJ0biA9PT0gYnV0dG9uKSB7XG4gICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwidGV4dC1mb3JlZ3JvdW5kXCIsIFwiYmctd2hpdGVcIiwgXCJib3JkZXItbC0yXCIsIFwiYm9yZGVyLXByaW1hcnlcIiwgXCJmb250LW1lZGl1bVwiKVxuICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZShcInRleHQtbXV0ZWRcIilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwidGV4dC1mb3JlZ3JvdW5kXCIsIFwiYmctd2hpdGVcIiwgXCJib3JkZXItbC0yXCIsIFwiYm9yZGVyLXByaW1hcnlcIiwgXCJmb250LW1lZGl1bVwiKVxuICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcInRleHQtbXV0ZWRcIilcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gXHU2NjNFXHU3OTNBXHU1QkY5XHU1RTk0XHU3Njg0XHU1N0NFXHU1RTAyXHU1MjE3XHU4ODY4XG4gICAgdGhpcy5zaG93UmVnaW9uKHJlZ2lvbk5hbWUpXG4gIH1cblxuICBzZWxlY3RDaXR5KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNpdHlDYXJkID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGNpdHlOYW1lID0gY2l0eUNhcmQuZGF0YXNldC5jaXR5TmFtZVxuICAgIFxuICAgIGlmICghY2l0eU5hbWUpIHJldHVyblxuICAgIFxuICAgIC8vIFx1NjhDMFx1NjdFNVx1OEJFNVx1NTdDRVx1NUUwMlx1NjYyRlx1NTQyNlx1NjcwOVx1NUJGOVx1NUU5NFx1NzY4NFx1NzZFRVx1NzY4NFx1NTczMFx1OTg3NVx1OTc2MlxuICAgIGlmICh0aGlzLmF2YWlsYWJsZURlc3RpbmF0aW9uc1ZhbHVlLmluY2x1ZGVzKGNpdHlOYW1lKSkge1xuICAgICAgLy8gXHU4REYzXHU4RjZDXHU1MjMwXHU3NkVFXHU3Njg0XHU1NzMwXHU4QkU2XHU2MEM1XHU5ODc1XG4gICAgICBjb25zdCBzbHVnID0gY2l0eUNhcmQuZGF0YXNldC5jaXR5U2x1Z1xuICAgICAgaWYgKHNsdWcpIHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgL2Rlc3RpbmF0aW9ucy8ke3NsdWd9YFxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBcdTY2M0VcdTc5M0FcdTYzRDBcdTc5M0FcdUZGMUFcdThCRTVcdTU3Q0VcdTVFMDJcdTY2ODJcdTY1RTBcdThCRTZcdTdFQzZcdTRGRTFcdTYwNkZcbiAgICAgIGFsZXJ0KGAke2NpdHlOYW1lfVx1NzY4NFx1OEJFNlx1N0VDNlx1NEZFMVx1NjA2Rlx1NTM3M1x1NUMwNlx1NEUwQVx1N0VCRlx1RkYwQ1x1NjU2Q1x1OEJGN1x1NjcxRlx1NUY4NVx1RkYwMWApXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzaG93UmVnaW9uKHJlZ2lvbk5hbWU6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuY2l0eUxpc3RUYXJnZXRzLmZvckVhY2gobGlzdCA9PiB7XG4gICAgICBpZiAobGlzdC5kYXRhc2V0LnJlZ2lvbiA9PT0gcmVnaW9uTmFtZSkge1xuICAgICAgICBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpc3QuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcInNlYXJjaE1vZGFsXCIsXG4gICAgXCJzZWFyY2hJbnB1dFwiLFxuICAgIFwiaG90U2VhcmNoQ29udGVudFwiLCBcImhvdFNlYXJjaEljb25cIixcbiAgICBcImhvdEJyYW5kQ29udGVudFwiLCBcImhvdEJyYW5kSWNvblwiLFxuICAgIFwiaG90TG9jYXRpb25Db250ZW50XCIsIFwiaG90TG9jYXRpb25JY29uXCIsXG4gICAgXCJtZXRyb0NvbnRlbnRcIiwgXCJtZXRyb0ljb25cIixcbiAgICBcImFpcnBvcnRDb250ZW50XCIsIFwiYWlycG9ydEljb25cIixcbiAgICBcImF0dHJhY3Rpb25Db250ZW50XCIsIFwiYXR0cmFjdGlvbkljb25cIixcbiAgICBcInRoZW1lQ29udGVudFwiLCBcInRoZW1lSWNvblwiLFxuICAgIFwiaG9zcGl0YWxDb250ZW50XCIsIFwiaG9zcGl0YWxJY29uXCIsXG4gICAgXCJ1bml2ZXJzaXR5Q29udGVudFwiLCBcInVuaXZlcnNpdHlJY29uXCIsXG4gICAgXCJjaXR5SW5wdXRcIixcbiAgICBcImNoZWNrSW5JbnB1dFwiLFxuICAgIFwiY2hlY2tPdXRJbnB1dFwiLFxuICAgIFwicm9vbXNJbnB1dFwiLFxuICAgIFwiYWR1bHRzSW5wdXRcIixcbiAgICBcImNoaWxkcmVuSW5wdXRcIlxuICBdXG5cbiAgZGVjbGFyZSByZWFkb25seSBzZWFyY2hNb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzZWFyY2hJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhvdFNlYXJjaENvbnRlbnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaG90U2VhcmNoSWNvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBob3RCcmFuZENvbnRlbnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaG90QnJhbmRJY29uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhvdExvY2F0aW9uQ29udGVudFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBob3RMb2NhdGlvbkljb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbWV0cm9Db250ZW50VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IG1ldHJvSWNvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBhaXJwb3J0Q29udGVudFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBhaXJwb3J0SWNvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBhdHRyYWN0aW9uQ29udGVudFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBhdHRyYWN0aW9uSWNvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0aGVtZUNvbnRlbnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdGhlbWVJY29uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhvc3BpdGFsQ29udGVudFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBob3NwaXRhbEljb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdW5pdmVyc2l0eUNvbnRlbnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdW5pdmVyc2l0eUljb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQ2l0eUlucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2l0eUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQ2hlY2tJbklucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hlY2tJbklucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQ2hlY2tPdXRJbnB1dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGNoZWNrT3V0SW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNSb29tc0lucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgcm9vbXNJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0FkdWx0c0lucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgYWR1bHRzSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNDaGlsZHJlbklucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hpbGRyZW5JbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJIb3RlbFNlYXJjaCBjb25uZWN0ZWRcIilcbiAgICAvLyBMaXN0ZW4gZm9yIGNpdHktc2VsZWN0b3IgdXBkYXRlc1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NpdHktc2VsZWN0b3I6Y2l0eS1zZWxlY3RlZC1mb3ItaG90ZWwnLCB0aGlzLmhhbmRsZUNpdHlVcGRhdGUuYmluZCh0aGlzKSlcbiAgICAvLyBMaXN0ZW4gZm9yIGRhdGUtcGlja2VyIHVwZGF0ZXNcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdob3RlbC1kYXRlLXBpY2tlcjpkYXRlcy1zZWxlY3RlZCcsIHRoaXMuaGFuZGxlRGF0ZVVwZGF0ZS5iaW5kKHRoaXMpKVxuICAgIC8vIExpc3RlbiBmb3IgZ3Vlc3Qtc2VsZWN0b3IgdXBkYXRlc1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2hvdGVsLWd1ZXN0LXNlbGVjdG9yOmd1ZXN0cy11cGRhdGVkJywgdGhpcy5oYW5kbGVHdWVzdFVwZGF0ZS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkhvdGVsU2VhcmNoIGRpc2Nvbm5lY3RlZFwiKVxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NpdHktc2VsZWN0b3I6Y2l0eS1zZWxlY3RlZC1mb3ItaG90ZWwnLCB0aGlzLmhhbmRsZUNpdHlVcGRhdGUuYmluZCh0aGlzKSlcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdob3RlbC1kYXRlLXBpY2tlcjpkYXRlcy1zZWxlY3RlZCcsIHRoaXMuaGFuZGxlRGF0ZVVwZGF0ZS5iaW5kKHRoaXMpKVxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2hvdGVsLWd1ZXN0LXNlbGVjdG9yOmd1ZXN0cy11cGRhdGVkJywgdGhpcy5oYW5kbGVHdWVzdFVwZGF0ZS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgLy8gSGFuZGxlIGNpdHkgc2VsZWN0aW9uIHVwZGF0ZSBmcm9tIGNpdHktc2VsZWN0b3JcbiAgaGFuZGxlQ2l0eVVwZGF0ZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjdXN0b21FdmVudCA9IGV2ZW50IGFzIEN1c3RvbUV2ZW50XG4gICAgY29uc3QgeyBjaXR5TmFtZSB9ID0gY3VzdG9tRXZlbnQuZGV0YWlsXG4gICAgY29uc29sZS5sb2coJ0hvdGVsU2VhcmNoOiBSZWNlaXZlZCBjaXR5IHVwZGF0ZTonLCBjaXR5TmFtZSlcbiAgICBcbiAgICAvLyBVcGRhdGUgVVJMIHdpdGggbmV3IGNpdHkgYW5kIHJlbG9hZCBwYWdlIHRvIGZldGNoIGNpdHktc3BlY2lmaWMgZGF0YVxuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2NpdHknLCBjaXR5TmFtZSlcbiAgICBcbiAgICBjb25zb2xlLmxvZygnSG90ZWxTZWFyY2g6IFJlbG9hZGluZyBwYWdlIHdpdGggbmV3IGNpdHk6JywgY2l0eU5hbWUpXG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmwudG9TdHJpbmcoKVxuICB9XG5cbiAgLy8gSGFuZGxlIGRhdGUgc2VsZWN0aW9uIHVwZGF0ZSBmcm9tIGhvdGVsLWRhdGUtcGlja2VyXG4gIGhhbmRsZURhdGVVcGRhdGUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY3VzdG9tRXZlbnQgPSBldmVudCBhcyBDdXN0b21FdmVudFxuICAgIGNvbnN0IHsgY2hlY2tJbiwgY2hlY2tPdXQgfSA9IGN1c3RvbUV2ZW50LmRldGFpbFxuICAgIGNvbnNvbGUubG9nKCdIb3RlbFNlYXJjaDogUmVjZWl2ZWQgZGF0ZSB1cGRhdGU6JywgeyBjaGVja0luLCBjaGVja091dCB9KVxuICAgIFxuICAgIGlmICh0aGlzLmhhc0NoZWNrSW5JbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5jaGVja0luSW5wdXRUYXJnZXQudmFsdWUgPSBjaGVja0luXG4gICAgICBjb25zb2xlLmxvZygnSG90ZWxTZWFyY2g6IFVwZGF0ZWQgY2hlY2staW4gdG86JywgY2hlY2tJbilcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuaGFzQ2hlY2tPdXRJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5jaGVja091dElucHV0VGFyZ2V0LnZhbHVlID0gY2hlY2tPdXRcbiAgICAgIGNvbnNvbGUubG9nKCdIb3RlbFNlYXJjaDogVXBkYXRlZCBjaGVjay1vdXQgdG86JywgY2hlY2tPdXQpXG4gICAgfVxuICB9XG5cbiAgLy8gSGFuZGxlIGd1ZXN0IHNlbGVjdGlvbiB1cGRhdGUgZnJvbSBob3RlbC1ndWVzdC1zZWxlY3RvclxuICBoYW5kbGVHdWVzdFVwZGF0ZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjdXN0b21FdmVudCA9IGV2ZW50IGFzIEN1c3RvbUV2ZW50XG4gICAgY29uc3QgeyByb29tcywgYWR1bHRzLCBjaGlsZHJlbiB9ID0gY3VzdG9tRXZlbnQuZGV0YWlsXG4gICAgY29uc29sZS5sb2coJ0hvdGVsU2VhcmNoOiBSZWNlaXZlZCBndWVzdCB1cGRhdGU6JywgeyByb29tcywgYWR1bHRzLCBjaGlsZHJlbiB9KVxuICAgIFxuICAgIGlmICh0aGlzLmhhc1Jvb21zSW5wdXRUYXJnZXQpIHtcbiAgICAgIHRoaXMucm9vbXNJbnB1dFRhcmdldC52YWx1ZSA9IHJvb21zLnRvU3RyaW5nKClcbiAgICAgIGNvbnNvbGUubG9nKCdIb3RlbFNlYXJjaDogVXBkYXRlZCByb29tcyB0bzonLCByb29tcylcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuaGFzQWR1bHRzSW5wdXRUYXJnZXQpIHtcbiAgICAgIHRoaXMuYWR1bHRzSW5wdXRUYXJnZXQudmFsdWUgPSBhZHVsdHMudG9TdHJpbmcoKVxuICAgICAgY29uc29sZS5sb2coJ0hvdGVsU2VhcmNoOiBVcGRhdGVkIGFkdWx0cyB0bzonLCBhZHVsdHMpXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLmhhc0NoaWxkcmVuSW5wdXRUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2hpbGRyZW5JbnB1dFRhcmdldC52YWx1ZSA9IGNoaWxkcmVuLnRvU3RyaW5nKClcbiAgICAgIGNvbnNvbGUubG9nKCdIb3RlbFNlYXJjaDogVXBkYXRlZCBjaGlsZHJlbiB0bzonLCBjaGlsZHJlbilcbiAgICB9XG4gIH1cblxuICBvcGVuU2VhcmNoTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5zZWFyY2hNb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnNlYXJjaElucHV0VGFyZ2V0LmZvY3VzKClcbiAgICB9LCAxMDApXG4gIH1cblxuICBjbG9zZVNlYXJjaE1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMuc2VhcmNoTW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICB9XG5cbiAgc3VibWl0U2VhcmNoKCk6IHZvaWQge1xuICAgIGNvbnN0IGZvcm0gPSB0aGlzLnNlYXJjaElucHV0VGFyZ2V0LmNsb3Nlc3QoXCJmb3JtXCIpIGFzIEhUTUxGb3JtRWxlbWVudFxuICAgIGlmIChmb3JtKSB7XG4gICAgICAvLyBBbHdheXMgc3VibWl0IHRoZSBmb3JtLCBldmVuIGlmIGlucHV0IGlzIGVtcHR5XG4gICAgICBmb3JtLnJlcXVlc3RTdWJtaXQoKVxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZVNlYXJjaElucHV0S2V5cHJlc3MoZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgIHRoaXMuc3VibWl0U2VhcmNoKClcbiAgICB9XG4gIH1cblxuICB0b2dnbGVTZWN0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBzZWN0aW9uID0gYnV0dG9uLmRhdGFzZXQuc2VjdGlvblxuICAgIFxuICAgIGlmICghc2VjdGlvbikgcmV0dXJuXG5cbiAgICBjb25zdCBjb250ZW50VGFyZ2V0ID0gYCR7c2VjdGlvbn1Db250ZW50VGFyZ2V0YCBhcyBrZXlvZiB0aGlzXG4gICAgY29uc3QgaWNvblRhcmdldCA9IGAke3NlY3Rpb259SWNvblRhcmdldGAgYXMga2V5b2YgdGhpc1xuXG4gICAgY29uc3QgY29udGVudCA9IHRoaXNbY29udGVudFRhcmdldF0gYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBpY29uID0gdGhpc1tpY29uVGFyZ2V0XSBhcyBIVE1MRWxlbWVudFxuXG4gICAgaWYgKGNvbnRlbnQgJiYgaWNvbikge1xuICAgICAgY29udGVudC5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpXG4gICAgICBpY29uLmNsYXNzTGlzdC50b2dnbGUoXCJyb3RhdGUtMTgwXCIpXG4gICAgfVxuICB9XG5cbiAgb3BlbkNpdHlTZWxlY3RvcigpOiB2b2lkIHtcbiAgICBhbGVydChcIlx1NTdDRVx1NUUwMlx1OTAwOVx1NjJFOVx1NTI5Rlx1ODBGRFx1RkYxQVxcblxcblx1NTcyOFx1NUI4Q1x1NjU3NFx1NzI0OFx1NjcyQ1x1NEUyRFx1RkYwQ1x1OEZEOVx1OTFDQ1x1NEYxQVx1NjI1M1x1NUYwMFx1NTdDRVx1NUUwMlx1OTAwOVx1NjJFOVx1NTY2OFx1MzAwMlxcblxcblx1NUY1M1x1NTI0RFx1NTdDRVx1NUUwMlx1RkYxQVx1NkRGMVx1NTczM1x1NUUwMlwiKVxuICB9XG5cbiAgb3Blbkd1ZXN0U2VsZWN0b3IoKTogdm9pZCB7XG4gICAgY29uc3Qgcm9vbXMgPSBwcm9tcHQoXCJcdThCRjdcdThGOTNcdTUxNjVcdTYyM0ZcdTk1RjRcdTY1NzBcdTkxQ0ZcIiwgXCIxXCIpXG4gICAgY29uc3QgYWR1bHRzID0gcHJvbXB0KFwiXHU4QkY3XHU4RjkzXHU1MTY1XHU2MjEwXHU0RUJBXHU2NTcwXHU5MUNGXCIsIFwiMVwiKVxuICAgIGNvbnN0IGNoaWxkcmVuID0gcHJvbXB0KFwiXHU4QkY3XHU4RjkzXHU1MTY1XHU1MTNGXHU3QUU1XHU2NTcwXHU5MUNGXCIsIFwiMFwiKVxuICAgIFxuICAgIGlmIChyb29tcyAmJiBhZHVsdHMpIHtcbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpXG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgncm9vbXMnLCByb29tcylcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdhZHVsdHMnLCBhZHVsdHMpXG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnY2hpbGRyZW4nLCBjaGlsZHJlbiB8fCAnMCcpXG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybC50b1N0cmluZygpXG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJ0YWJCdXR0b25cIiwgXCJ0YWJDb250ZW50XCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgLy8gQWRkIHlvdXIgdmFsdWVzIGhlcmUsIGUuZy46XG4gICAgLy8gcm9vbUlkOiBTdHJpbmcsXG4gICAgLy8gdXNlcklkOiBTdHJpbmdcbiAgfVxuXG4gIC8vIERlY2xhcmUgeW91ciB0YXJnZXRzIGFuZCB2YWx1ZXNcbiAgZGVjbGFyZSByZWFkb25seSB0YWJCdXR0b25UYXJnZXRzOiBIVE1MQnV0dG9uRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgdGFiQ29udGVudFRhcmdldHM6IEhUTUxEaXZFbGVtZW50W11cbiAgXG4gIHByaXZhdGUgY3VycmVudFRhYiA9ICdjb3ZlcidcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiSG90ZWxEZXRhaWwgY29ubmVjdGVkXCIpXG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiSG90ZWxEZXRhaWwgZGlzY29ubmVjdGVkXCIpXG4gIH1cblxuICAvLyBUYWIgc3dpdGNoaW5nIGZ1bmN0aW9uYWxpdHlcbiAgc3dpdGNoVGFiKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBjb25zdCB0YWJOYW1lID0gYnV0dG9uLmRhdGFzZXQudGFiXG4gICAgaWYgKCF0YWJOYW1lIHx8IHRhYk5hbWUgPT09IHRoaXMuY3VycmVudFRhYikgcmV0dXJuXG4gICAgXG4gICAgLy8gVXBkYXRlIGJ1dHRvbiBzdGF0ZXNcbiAgICB0aGlzLnRhYkJ1dHRvblRhcmdldHMuZm9yRWFjaChidG4gPT4ge1xuICAgICAgaWYgKGJ0bi5kYXRhc2V0LnRhYiA9PT0gdGFiTmFtZSkge1xuICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTUwMCcsICdib3JkZXItdHJhbnNwYXJlbnQnKVxuICAgICAgICBidG4uY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTkwMCcsICdib3JkZXItb3JhbmdlLTUwMCcpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTkwMCcsICdib3JkZXItb3JhbmdlLTUwMCcpXG4gICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktNTAwJywgJ2JvcmRlci10cmFuc3BhcmVudCcpXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICAvLyBVcGRhdGUgY29udGVudCB2aXNpYmlsaXR5XG4gICAgdGhpcy50YWJDb250ZW50VGFyZ2V0cy5mb3JFYWNoKGNvbnRlbnQgPT4ge1xuICAgICAgaWYgKGNvbnRlbnQuZGF0YXNldC50YWIgPT09IHRhYk5hbWUpIHtcbiAgICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5hZGQoJ2Jsb2NrJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnYmxvY2snKVxuICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICB0aGlzLmN1cnJlbnRUYWIgPSB0YWJOYW1lXG4gIH1cblxuICAvLyBGT1JNUzogVHVyYm8gKyBUdXJibyBTdHJlYW1zIGhhbmRsZSBldmVyeXRoaW5nIGF1dG9tYXRpY2FsbHlcbiAgLy8gLSBGb3JtcyBzdWJtaXQgdmlhIEFKQVggKFR1cmJvIERyaXZlKVxuICAvLyAtIFNlcnZlciByZXNwb25kcyB3aXRoIGZvcm1hdC50dXJib19zdHJlYW1cbiAgLy8gLSBUdXJibyBTdHJlYW1zIHVwZGF0ZSBET00gYXV0b21hdGljYWxseVxuICAvLyAtIE5PIG1hbnVhbCBmb3JtIGhhbmRsaW5nIG5lZWRlZCBpbiBTdGltdWx1c1xuICAvL1xuICAvLyBVc2UgU3RpbXVsdXMgZm9yOlxuICAvLyAtIFVJIGludGVyYWN0aW9ucyAodG9nZ2xlLCBzaG93L2hpZGUpXG4gIC8vIC0gSW5wdXQgdmFsaWRhdGlvbi9mb3JtYXR0aW5nXG4gIC8vIC0gRHluYW1pYyBmb3JtIGZpZWxkc1xufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wicGFnZVwiLCBcImRvdFwiXVxuICBcbiAgZGVjbGFyZSByZWFkb25seSBwYWdlVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IGRvdFRhcmdldHM6IEhUTUxFbGVtZW50W11cblxuICBwcml2YXRlIGN1cnJlbnRQYWdlOiBudW1iZXIgPSAwXG4gIHByaXZhdGUgdG91Y2hTdGFydFg6IG51bWJlciA9IDBcbiAgcHJpdmF0ZSB0b3VjaEVuZFg6IG51bWJlciA9IDBcbiAgcHJpdmF0ZSBtaW5Td2lwZURpc3RhbmNlOiBudW1iZXIgPSA1MCAvLyBcdTY3MDBcdTVDMEZcdTZFRDFcdTUyQThcdThERERcdTc5QkJcdUZGMDhcdTUwQ0ZcdTdEMjBcdUZGMDlcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIHRoaXMuc2hvd1BhZ2UoMClcbiAgICAvLyBcdTZERkJcdTUyQTBcdTg5RTZcdTY0NzhcdTRFOEJcdTRFRjZcdTc2RDFcdTU0MkNcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuaGFuZGxlVG91Y2hTdGFydC5iaW5kKHRoaXMpLCB7IHBhc3NpdmU6IHRydWUgfSlcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLmhhbmRsZVRvdWNoRW5kLmJpbmQodGhpcyksIHsgcGFzc2l2ZTogdHJ1ZSB9KVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICAvLyBcdTZFMDVcdTc0MDZcdTRFOEJcdTRFRjZcdTc2RDFcdTU0MkNcbiAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuaGFuZGxlVG91Y2hTdGFydC5iaW5kKHRoaXMpKVxuICAgIHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuaGFuZGxlVG91Y2hFbmQuYmluZCh0aGlzKSlcbiAgfVxuXG4gIC8vIFx1NTkwNFx1NzQwNlx1ODlFNlx1NjQ3OFx1NUYwMFx1NTlDQlxuICBwcml2YXRlIGhhbmRsZVRvdWNoU3RhcnQoZXZlbnQ6IFRvdWNoRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLnRvdWNoU3RhcnRYID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uc2NyZWVuWFxuICB9XG5cbiAgLy8gXHU1OTA0XHU3NDA2XHU4OUU2XHU2NDc4XHU3RUQzXHU2NzVGXG4gIHByaXZhdGUgaGFuZGxlVG91Y2hFbmQoZXZlbnQ6IFRvdWNoRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLnRvdWNoRW5kWCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnNjcmVlblhcbiAgICB0aGlzLmhhbmRsZVN3aXBlKClcbiAgfVxuXG4gIC8vIFx1NTkwNFx1NzQwNlx1NkVEMVx1NTJBOFx1OTAzQlx1OEY5MVxuICBwcml2YXRlIGhhbmRsZVN3aXBlKCk6IHZvaWQge1xuICAgIGNvbnN0IHN3aXBlRGlzdGFuY2UgPSB0aGlzLnRvdWNoRW5kWCAtIHRoaXMudG91Y2hTdGFydFhcbiAgICBcbiAgICAvLyBcdTU0MTFcdTVERTZcdTZFRDFcdTUyQThcdUZGMDhcdTRFMEJcdTRFMDBcdTk4NzVcdUZGMDlcbiAgICBpZiAoc3dpcGVEaXN0YW5jZSA8IC10aGlzLm1pblN3aXBlRGlzdGFuY2UpIHtcbiAgICAgIHRoaXMubmV4dFBhZ2UoKVxuICAgIH1cbiAgICAvLyBcdTU0MTFcdTUzRjNcdTZFRDFcdTUyQThcdUZGMDhcdTRFMEFcdTRFMDBcdTk4NzVcdUZGMDlcbiAgICBlbHNlIGlmIChzd2lwZURpc3RhbmNlID4gdGhpcy5taW5Td2lwZURpc3RhbmNlKSB7XG4gICAgICB0aGlzLnByZXZQYWdlKClcbiAgICB9XG4gIH1cblxuICBnb1RvUGFnZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgcGFnZUluZGV4ID0gcGFyc2VJbnQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1wYWdlJykgfHwgJzAnLCAxMClcbiAgICBpZiAocGFnZUluZGV4ID49IDAgJiYgcGFnZUluZGV4IDwgdGhpcy5wYWdlVGFyZ2V0cy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuc2hvd1BhZ2UocGFnZUluZGV4KVxuICAgIH1cbiAgfVxuXG4gIG5leHRQYWdlKCk6IHZvaWQge1xuICAgIGNvbnN0IG5leHRJbmRleCA9ICh0aGlzLmN1cnJlbnRQYWdlICsgMSkgJSB0aGlzLnBhZ2VUYXJnZXRzLmxlbmd0aFxuICAgIHRoaXMuc2hvd1BhZ2UobmV4dEluZGV4KVxuICB9XG5cbiAgcHJldlBhZ2UoKTogdm9pZCB7XG4gICAgY29uc3QgcHJldkluZGV4ID0gKHRoaXMuY3VycmVudFBhZ2UgLSAxICsgdGhpcy5wYWdlVGFyZ2V0cy5sZW5ndGgpICUgdGhpcy5wYWdlVGFyZ2V0cy5sZW5ndGhcbiAgICB0aGlzLnNob3dQYWdlKHByZXZJbmRleClcbiAgfVxuXG4gIHByaXZhdGUgc2hvd1BhZ2UocGFnZUluZGV4OiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBIaWRlIGFsbCBwYWdlc1xuICAgIHRoaXMucGFnZVRhcmdldHMuZm9yRWFjaCgocGFnZSwgaW5kZXgpID0+IHtcbiAgICAgIGlmIChpbmRleCA9PT0gcGFnZUluZGV4KSB7XG4gICAgICAgIHBhZ2UuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFnZS5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIFVwZGF0ZSBkb3RzXG4gICAgdGhpcy5kb3RUYXJnZXRzLmZvckVhY2goKGRvdCwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvdCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgICAgaWYgKGluZGV4ID09PSBwYWdlSW5kZXgpIHtcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1ncmF5LTMwMFwiLCBcInctMS41XCIsIFwiaC0xLjVcIilcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJ3LTZcIiwgXCJoLTFcIilcbiAgICAgICAgYnV0dG9uLnN0eWxlLmJhY2tncm91bmQgPSBcIiNGRkQ3MDBcIlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJ3LTZcIiwgXCJoLTFcIilcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJiZy1ncmF5LTMwMFwiLCBcInctMS41XCIsIFwiaC0xLjVcIilcbiAgICAgICAgYnV0dG9uLnN0eWxlLmJhY2tncm91bmQgPSBcIlwiXG4gICAgICB9XG4gICAgfSlcblxuICAgIHRoaXMuY3VycmVudFBhZ2UgPSBwYWdlSW5kZXhcbiAgfVxufVxuXG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXIge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcImRpc3BsYXlcIixcbiAgICBcIm1vZGFsXCIsIFxuICAgIFwibmFtZVwiLFxuICAgIFwiaWRUeXBlXCIsXG4gICAgXCJpZE51bWJlclwiLFxuICAgIFwicGhvbmVcIixcbiAgICBcImRyaXZlck5hbWVcIixcbiAgICBcImRyaXZlcklkTnVtYmVyXCIsXG4gICAgXCJjb250YWN0UGhvbmVcIlxuICBdXG5cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBzZWxlY3RlZElkOiBOdW1iZXJcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgZGlzcGxheVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBuYW1lVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGlkVHlwZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBpZE51bWJlclRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBwaG9uZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkcml2ZXJOYW1lVGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZHJpdmVySWROdW1iZXJUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjb250YWN0UGhvbmVUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSBzZWxlY3RlZElkVmFsdWU6IG51bWJlclxuXG4gIHRvZ2dsZUVkaXQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCJcbiAgfVxuXG4gIGNsb3NlTW9kYWwoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiXCJcbiAgfVxuXG4gIHNlbGVjdFBhc3NlbmdlcihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgcGFzc2VuZ2VySWQgPSB0YXJnZXQuZGF0YXNldC5wYXNzZW5nZXJJZFxuICAgIGNvbnN0IG5hbWUgPSB0YXJnZXQuZGF0YXNldC5wYXNzZW5nZXJOYW1lIHx8IFwiXCJcbiAgICBjb25zdCBpZFR5cGUgPSB0YXJnZXQuZGF0YXNldC5wYXNzZW5nZXJJZFR5cGUgfHwgXCJcIlxuICAgIGNvbnN0IGlkTnVtYmVyID0gdGFyZ2V0LmRhdGFzZXQucGFzc2VuZ2VySWROdW1iZXIgfHwgXCJcIlxuICAgIGNvbnN0IHBob25lID0gdGFyZ2V0LmRhdGFzZXQucGFzc2VuZ2VyUGhvbmUgfHwgXCJcdTY3MkFcdTU4NkJcdTUxOTlcIlxuXG4gICAgLy8gVXBkYXRlIGRpc3BsYXlcbiAgICB0aGlzLm5hbWVUYXJnZXQudGV4dENvbnRlbnQgPSBuYW1lXG4gICAgdGhpcy5pZFR5cGVUYXJnZXQudGV4dENvbnRlbnQgPSBpZFR5cGVcbiAgICB0aGlzLmlkTnVtYmVyVGFyZ2V0LnRleHRDb250ZW50ID0gaWROdW1iZXJcbiAgICB0aGlzLnBob25lVGFyZ2V0LnRleHRDb250ZW50ID0gcGhvbmVcblxuICAgIC8vIFVwZGF0ZSBoaWRkZW4gZm9ybSBmaWVsZHNcbiAgICB0aGlzLmRyaXZlck5hbWVUYXJnZXQudmFsdWUgPSBuYW1lXG4gICAgdGhpcy5kcml2ZXJJZE51bWJlclRhcmdldC52YWx1ZSA9IGlkTnVtYmVyXG4gICAgdGhpcy5jb250YWN0UGhvbmVUYXJnZXQudmFsdWUgPSBwaG9uZSA9PT0gXCJcdTY3MkFcdTU4NkJcdTUxOTlcIiA/IFwiXCIgOiBwaG9uZVxuXG4gICAgLy8gVXBkYXRlIHNlbGVjdGVkIHN0YXRlIGluIG1vZGFsXG4gICAgY29uc3QgYWxsSXRlbXMgPSB0aGlzLm1vZGFsVGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXBhc3Nlbmdlci1pZF0nKVxuICAgIGFsbEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICBjb25zdCBpdGVtRWxlbWVudCA9IGl0ZW0gYXMgSFRNTEVsZW1lbnRcbiAgICAgIGlmIChpdGVtRWxlbWVudC5kYXRhc2V0LnBhc3NlbmdlcklkID09PSBwYXNzZW5nZXJJZCkge1xuICAgICAgICBpdGVtRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdib3JkZXItYmx1ZS01MDAnLCAnYmctYmx1ZS01MCcpXG4gICAgICAgIGNvbnN0IGNpcmNsZSA9IGl0ZW1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy53LTUuaC01JykgYXMgSFRNTEVsZW1lbnRcbiAgICAgICAgY2lyY2xlLmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1ncmF5LTMwMCcpXG4gICAgICAgIGNpcmNsZS5jbGFzc0xpc3QuYWRkKCdib3JkZXItYmx1ZS01MDAnLCAnYmctYmx1ZS01MDAnKVxuICAgICAgICBjb25zdCBjaGVja0ljb24gPSAnPHN2ZyBjbGFzcz1cInctMyBoLTMgdGV4dC13aGl0ZVwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCI+JyArXG4gICAgICAgICAgJzxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiAnICtcbiAgICAgICAgICAnZD1cIk0xNi43MDcgNS4yOTNhMSAxIDAgMDEwIDEuNDE0bC04IDhhMSAxIDAgMDEtMS40MTQgMGwtNC00YTEgMSAwIDAxMS40MTQtMS40MTRMOCAxMi41ODZsNy4yOTMtNy4yOTNhMSAxIDAgMDExLjQxNCAwelwiICcgK1xuICAgICAgICAgICdjbGlwLXJ1bGU9XCJldmVub2RkXCI+PC9wYXRoPicgK1xuICAgICAgICAgICc8L3N2Zz4nXG4gICAgICAgIGNpcmNsZS5pbm5lckhUTUwgPSBjaGVja0ljb25cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGl0ZW1FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1ibHVlLTUwMCcsICdiZy1ibHVlLTUwJylcbiAgICAgICAgY29uc3QgY2lyY2xlID0gaXRlbUVsZW1lbnQucXVlcnlTZWxlY3RvcignLnctNS5oLTUnKSBhcyBIVE1MRWxlbWVudFxuICAgICAgICBjaXJjbGUuY2xhc3NMaXN0LnJlbW92ZSgnYm9yZGVyLWJsdWUtNTAwJywgJ2JnLWJsdWUtNTAwJylcbiAgICAgICAgY2lyY2xlLmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1ncmF5LTMwMCcpXG4gICAgICAgIGNpcmNsZS5pbm5lckhUTUwgPSAnJ1xuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBTdG9yZSBzZWxlY3RlZCBJRFxuICAgIHRoaXMuc2VsZWN0ZWRJZFZhbHVlID0gcGFyc2VJbnQocGFzc2VuZ2VySWQgfHwgXCIwXCIpXG5cbiAgICAvLyBDbG9zZSBtb2RhbFxuICAgIHRoaXMuY2xvc2VNb2RhbChldmVudClcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wiYnV0dG9uXCIsIFwiaGlkZGVuSW5wdXRcIl1cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBzZWxlY3RlZDogU3RyaW5nXG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IGJ1dHRvblRhcmdldHM6IEhUTUxCdXR0b25FbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBoaWRkZW5JbnB1dFRhcmdldHM6IEhUTUxJbnB1dEVsZW1lbnRbXVxuICBkZWNsYXJlIHNlbGVjdGVkVmFsdWU6IHN0cmluZ1xuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJDYWJpblNlbGVjdG9yIGNvbm5lY3RlZFwiKVxuICAgIC8vIENoZWNrIGlmIHRoZXJlJ3MgYSBwcmV2aW91c2x5IHNlbGVjdGVkIHZhbHVlIGZyb20gZm9ybVxuICAgIC8vIFVzZSB0aGUgZmlyc3QgaGlkZGVuSW5wdXQgdG8gZ2V0IHRoZSB2YWx1ZSAodGhleSBzaG91bGQgYWxsIGhhdmUgdGhlIHNhbWUgdmFsdWUpXG4gICAgY29uc3QgY3VycmVudFZhbHVlID0gdGhpcy5oaWRkZW5JbnB1dFRhcmdldHNbMF0/LnZhbHVlXG4gICAgaWYgKGN1cnJlbnRWYWx1ZSkge1xuICAgICAgLy8gUmVzdG9yZSBwcmV2aW91cyBzZWxlY3Rpb24gd2hlbiByZXR1cm5pbmcgZnJvbSBzZWFyY2hcbiAgICAgIHRoaXMuc2VsZWN0Q2FiaW4oY3VycmVudFZhbHVlKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBEZWZhdWx0IHRvICdhbGwnIG9uIGZpcnN0IGxvYWRcbiAgICAgIHRoaXMuc2VsZWN0Q2FiaW4oXCJhbGxcIilcbiAgICB9XG4gIH1cblxuICBzZWxlY3RDYWJpbihjYWJpblR5cGU6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZSA9IGNhYmluVHlwZVxuICAgIFxuICAgIC8vIFVwZGF0ZSBBTEwgaGlkZGVuIGlucHV0IHZhbHVlcyBmb3IgZm9ybSBzdWJtaXNzaW9uIChib3RoIHNpbmdsZS9yb3VuZC10cmlwIGFuZCBtdWx0aS1jaXR5IGZvcm1zKVxuICAgIHRoaXMuaGlkZGVuSW5wdXRUYXJnZXRzLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgaW5wdXQudmFsdWUgPSBjYWJpblR5cGVcbiAgICB9KVxuICAgIFxuICAgIC8vIFVwZGF0ZSBidXR0b24gc3R5bGVzXG4gICAgdGhpcy5idXR0b25UYXJnZXRzLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgIGNvbnN0IGJ1dHRvblR5cGUgPSBidXR0b24uZGF0YXNldC5jYWJpblR5cGVcbiAgICAgIFxuICAgICAgaWYgKGJ1dHRvblR5cGUgPT09IGNhYmluVHlwZSkge1xuICAgICAgICAvLyBTZWxlY3RlZCBzdGF0ZSAtIHdoaXRlIGJhY2tncm91bmQgd2l0aCBzdWJ0bGUgc2hhZG93XG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiYmctd2hpdGVcIiwgXCJzaGFkb3ctc21cIiwgXCJ0ZXh0LWdyYXktOTAwXCIpXG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwidGV4dC1ncmF5LTYwMFwiKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVW5zZWxlY3RlZCBzdGF0ZSAtIHRyYW5zcGFyZW50IGJhY2tncm91bmRcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJiZy13aGl0ZVwiLCBcInNoYWRvdy1zbVwiLCBcInRleHQtZ3JheS05MDBcIilcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJ0ZXh0LWdyYXktNjAwXCIpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHNlbGVjdChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50XG4gICAgY29uc3QgY2FiaW5UeXBlID0gYnV0dG9uLmRhdGFzZXQuY2FiaW5UeXBlXG4gICAgXG4gICAgaWYgKGNhYmluVHlwZSkge1xuICAgICAgLy8gSWYgYWxyZWFkeSBzZWxlY3RlZCwgZG8gbm90aGluZyAobXVzdCBrZWVwIG9uZSBzZWxlY3RlZClcbiAgICAgIGlmICh0aGlzLnNlbGVjdGVkVmFsdWUgPT09IGNhYmluVHlwZSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIHRoaXMuc2VsZWN0Q2FiaW4oY2FiaW5UeXBlKVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwidGFiXCIsIFxuICAgIFwicmV0dXJuRGF0ZVNlY3Rpb25cIiwgXG4gICAgXCJ0cmlwVHlwZUlucHV0XCIsIFxuICAgIFwicmV0dXJuRGF0ZUlucHV0XCIsXG4gICAgXCJvbmVXYXlSb3VuZFRyaXBGb3JtXCIsXG4gICAgXCJtdWx0aUNpdHlGb3JtXCIsXG4gICAgXCJwcm9tb3Rpb25CYW5uZXJcIlxuICBdXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgY3VycmVudFR5cGU6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiBcIm9uZV93YXlcIiB9XG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHRhYlRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSByZXR1cm5EYXRlU2VjdGlvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0cmlwVHlwZUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgcmV0dXJuRGF0ZUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgb25lV2F5Um91bmRUcmlwRm9ybVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBtdWx0aUNpdHlGb3JtVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHByb21vdGlvbkJhbm5lclRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNUcmlwVHlwZUlucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUmV0dXJuRGF0ZVNlY3Rpb25UYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNSZXR1cm5EYXRlSW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNPbmVXYXlSb3VuZFRyaXBGb3JtVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzTXVsdGlDaXR5Rm9ybVRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1Byb21vdGlvbkJhbm5lclRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIGN1cnJlbnRUeXBlVmFsdWU6IHN0cmluZ1xuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJUcmlwVHlwZSBjb25uZWN0ZWRcIilcbiAgICB0aGlzLnVwZGF0ZVVJKClcbiAgfVxuXG4gIC8vIFx1NTIwN1x1NjM2Mlx1ODg0Q1x1N0EwQlx1N0M3Qlx1NTc4QlxuICBzZWxlY3RUeXBlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCB0cmlwVHlwZSA9IGJ1dHRvbi5kYXRhc2V0LnRyaXBUeXBlIHx8ICdvbmVfd2F5J1xuICAgIFxuICAgIHRoaXMuY3VycmVudFR5cGVWYWx1ZSA9IHRyaXBUeXBlXG4gICAgdGhpcy51cGRhdGVVSSgpXG4gICAgXG4gICAgLy8gXHU1OTgyXHU2NzlDXHU1MjA3XHU2MzYyXHU1MjMwXHU1RjgwXHU4RkQ0XHU0RTE0XHU4RkQ0XHU3QTBCXHU2NUU1XHU2NzFGXHU0RTNBXHU3QTdBXHVGRjBDXHU4QkJFXHU3RjZFXHU5RUQ4XHU4QkE0XHU4RkQ0XHU3QTBCXHU2NUU1XHU2NzFGXHU0RTNBXHU1M0JCXHU3QTBCKzFcdTU5MjlcbiAgICBpZiAodHJpcFR5cGUgPT09ICdyb3VuZF90cmlwJyAmJiB0aGlzLmhhc1JldHVybkRhdGVJbnB1dFRhcmdldCkge1xuICAgICAgaWYgKCF0aGlzLnJldHVybkRhdGVJbnB1dFRhcmdldC52YWx1ZSkge1xuICAgICAgICBjb25zdCBkZXBhcnR1cmVEYXRlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1kYXRlLXBpY2tlci10YXJnZXQ9XCJkYXRlSW5wdXRcIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgICAgIGlmIChkZXBhcnR1cmVEYXRlSW5wdXQgJiYgZGVwYXJ0dXJlRGF0ZUlucHV0LnZhbHVlKSB7XG4gICAgICAgICAgY29uc3QgZGVwYXJ0dXJlRGF0ZSA9IG5ldyBEYXRlKGRlcGFydHVyZURhdGVJbnB1dC52YWx1ZSlcbiAgICAgICAgICBkZXBhcnR1cmVEYXRlLnNldERhdGUoZGVwYXJ0dXJlRGF0ZS5nZXREYXRlKCkgKyAxKVxuICAgICAgICAgIGNvbnN0IHJldHVybkRhdGVTdHIgPSB0aGlzLmZvcm1hdERhdGUoZGVwYXJ0dXJlRGF0ZSlcbiAgICAgICAgICB0aGlzLnJldHVybkRhdGVJbnB1dFRhcmdldC52YWx1ZSA9IHJldHVybkRhdGVTdHJcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBcdTg5RTZcdTUzRDFcdThGRDRcdTdBMEJcdTY1RTVcdTY3MUZcdTkwMDlcdTYyRTlcdTU2NjhcdTY2RjRcdTY1QjBcdTY2M0VcdTc5M0FcbiAgICAgICAgICBjb25zdCByZXR1cm5EYXRlQ29udHJvbGxlciA9IHRoaXMuYXBwbGljYXRpb24uZ2V0Q29udHJvbGxlckZvckVsZW1lbnRBbmRJZGVudGlmaWVyKFxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LFxuICAgICAgICAgICAgJ3JldHVybi1kYXRlLXBpY2tlcidcbiAgICAgICAgICApXG4gICAgICAgICAgaWYgKHJldHVybkRhdGVDb250cm9sbGVyICYmICdjdXJyZW50RGF0ZVZhbHVlJyBpbiByZXR1cm5EYXRlQ29udHJvbGxlcikge1xuICAgICAgICAgICAgKHJldHVybkRhdGVDb250cm9sbGVyIGFzIGFueSkuY3VycmVudERhdGVWYWx1ZSA9IHJldHVybkRhdGVTdHJcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBcdTY2RjRcdTY1QjBVSVx1NzJCNlx1NjAwMVxuICBwcml2YXRlIHVwZGF0ZVVJKCk6IHZvaWQge1xuICAgIC8vIFx1NjZGNFx1NjVCMFx1NjMwOVx1OTRBRVx1NzJCNlx1NjAwMVxuICAgIHRoaXMudGFiVGFyZ2V0cy5mb3JFYWNoKHRhYiA9PiB7XG4gICAgICBjb25zdCBpc0FjdGl2ZSA9IHRhYi5kYXRhc2V0LnRyaXBUeXBlID09PSB0aGlzLmN1cnJlbnRUeXBlVmFsdWVcbiAgICAgIFxuICAgICAgaWYgKGlzQWN0aXZlKSB7XG4gICAgICAgIHRhYi5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktNTAwJylcbiAgICAgICAgdGFiLmNsYXNzTGlzdC5hZGQoJ2ZvbnQtYm9sZCcsICdib3JkZXItYi0yJywgJ2JvcmRlci1ibGFjaycpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YWIuY2xhc3NMaXN0LnJlbW92ZSgnZm9udC1ib2xkJywgJ2JvcmRlci1iLTInLCAnYm9yZGVyLWJsYWNrJylcbiAgICAgICAgdGFiLmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS01MDAnKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBcdTY2RjRcdTY1QjBcdTk2OTBcdTg1Q0ZcdTg4NjhcdTUzNTVcdTVCNTdcdTZCQjVcbiAgICBpZiAodGhpcy5oYXNUcmlwVHlwZUlucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLnRyaXBUeXBlSW5wdXRUYXJnZXQudmFsdWUgPSB0aGlzLmN1cnJlbnRUeXBlVmFsdWVcbiAgICB9XG5cbiAgICAvLyBcdTVDNTVcdTc5M0EvXHU5NjkwXHU4NUNGXHU4RkQ0XHU3QTBCXHU2NUU1XHU2NzFGXHU5MDA5XHU2MkU5XG4gICAgaWYgKHRoaXMuaGFzUmV0dXJuRGF0ZVNlY3Rpb25UYXJnZXQpIHtcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRUeXBlVmFsdWUgPT09ICdyb3VuZF90cmlwJykge1xuICAgICAgICB0aGlzLnJldHVybkRhdGVTZWN0aW9uVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJldHVybkRhdGVTZWN0aW9uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHU1QzU1XHU3OTNBL1x1OTY5MFx1ODVDRlx1NTM1NVx1N0EwQlx1NUY4MFx1OEZENFx1ODg2OFx1NTM1NSB2cyBcdTU5MUFcdTdBMEJcdTg4NjhcdTUzNTVcbiAgICBpZiAodGhpcy5oYXNPbmVXYXlSb3VuZFRyaXBGb3JtVGFyZ2V0ICYmIHRoaXMuaGFzTXVsdGlDaXR5Rm9ybVRhcmdldCkge1xuICAgICAgaWYgKHRoaXMuY3VycmVudFR5cGVWYWx1ZSA9PT0gJ211bHRpX2NpdHknKSB7XG4gICAgICAgIHRoaXMub25lV2F5Um91bmRUcmlwRm9ybVRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgICAgICB0aGlzLm11bHRpQ2l0eUZvcm1UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgICAgXG4gICAgICAgIC8vIFx1ODlFNlx1NTNEMVx1ODFFQVx1NUI5QVx1NEU0OVx1NEU4Qlx1NEVGNlx1OTAxQVx1NzdFNSBtdWx0aS1jaXR5IFx1NjNBN1x1NTIzNlx1NTY2OFx1NTIxRFx1NTlDQlx1NTMxNlxuICAgICAgICBjb25zdCBtdWx0aUNpdHlFdmVudCA9IG5ldyBDdXN0b21FdmVudCgndHJpcC10eXBlOm11bHRpLWNpdHktc2hvd24nLCB7XG4gICAgICAgICAgYnViYmxlczogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgICB0aGlzLmVsZW1lbnQuZGlzcGF0Y2hFdmVudChtdWx0aUNpdHlFdmVudClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMub25lV2F5Um91bmRUcmlwRm9ybVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgICB0aGlzLm11bHRpQ2l0eUZvcm1UYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdTU5MUFcdTdBMEJcdTZBMjFcdTVGMEZcdTRFMEJcdTk2OTBcdTg1Q0ZcdTRGQzNcdTk1MDBcdTZBMkFcdTVFNDVcbiAgICBpZiAodGhpcy5oYXNQcm9tb3Rpb25CYW5uZXJUYXJnZXQpIHtcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRUeXBlVmFsdWUgPT09ICdtdWx0aV9jaXR5Jykge1xuICAgICAgICB0aGlzLnByb21vdGlvbkJhbm5lclRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wcm9tb3Rpb25CYW5uZXJUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdERhdGUoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKVxuICAgIGNvbnN0IG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJylcbiAgICBjb25zdCBkYXkgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJylcbiAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YFxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJtb2RhbFwiLCBcInNlbGVjdGVkRGF0ZVwiLCBcImRhdGVJbnB1dFwiXVxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIGN1cnJlbnREYXRlOiBTdHJpbmcsXG4gICAgbWluRGF0ZTogU3RyaW5nXG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IG1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlbGVjdGVkRGF0ZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkYXRlSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSBjdXJyZW50RGF0ZVZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBtaW5EYXRlVmFsdWU6IHN0cmluZ1xuXG4gIHByaXZhdGUgc2VsZWN0ZWREYXRlT2JqOiBEYXRlIHwgbnVsbCA9IG51bGxcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiUmV0dXJuRGF0ZVBpY2tlciBjb25uZWN0ZWRcIilcbiAgICAvLyBJbml0aWFsaXplIHdpdGggZGVwYXJ0dXJlIGRhdGUgKyAxIGlmIG5vIHJldHVybiBkYXRlIGlzIHNldFxuICAgIGlmICh0aGlzLmN1cnJlbnREYXRlVmFsdWUpIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWREYXRlT2JqID0gbmV3IERhdGUodGhpcy5jdXJyZW50RGF0ZVZhbHVlKVxuICAgIH0gZWxzZSBpZiAodGhpcy5taW5EYXRlVmFsdWUpIHtcbiAgICAgIGNvbnN0IG1pbkRhdGUgPSBuZXcgRGF0ZSh0aGlzLm1pbkRhdGVWYWx1ZSlcbiAgICAgIG1pbkRhdGUuc2V0RGF0ZShtaW5EYXRlLmdldERhdGUoKSArIDEpXG4gICAgICB0aGlzLnNlbGVjdGVkRGF0ZU9iaiA9IG1pbkRhdGVcbiAgICAgIHRoaXMuY3VycmVudERhdGVWYWx1ZSA9IHRoaXMuZm9ybWF0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZU9iailcbiAgICB9XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWREYXRlT2JqKSB7XG4gICAgICB0aGlzLnVwZGF0ZURpc3BsYXllZERhdGUoKVxuICAgIH1cbiAgfVxuXG4gIG9wZW5Nb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nXG4gIH1cblxuICBjbG9zZU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJydcbiAgfVxuXG4gIHNlbGVjdERhdGUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGRhdGVTdHIgPSBidXR0b24uZGF0YXNldC5kYXRlIHx8ICcnXG4gICAgXG4gICAgaWYgKCFkYXRlU3RyKSByZXR1cm5cblxuICAgIHRoaXMuc2VsZWN0ZWREYXRlT2JqID0gbmV3IERhdGUoZGF0ZVN0cilcbiAgICB0aGlzLmN1cnJlbnREYXRlVmFsdWUgPSBkYXRlU3RyXG4gICAgdGhpcy51cGRhdGVEaXNwbGF5ZWREYXRlKClcbiAgICB0aGlzLmRhdGVJbnB1dFRhcmdldC52YWx1ZSA9IGRhdGVTdHJcbiAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVEaXNwbGF5ZWREYXRlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5zZWxlY3RlZERhdGVPYmopIHJldHVyblxuICAgIFxuICAgIGNvbnN0IG1vbnRoID0gdGhpcy5zZWxlY3RlZERhdGVPYmouZ2V0TW9udGgoKSArIDFcbiAgICBjb25zdCBkYXkgPSB0aGlzLnNlbGVjdGVkRGF0ZU9iai5nZXREYXRlKClcbiAgICBjb25zdCBkYXlOYW1lID0gdGhpcy5nZXREYXlOYW1lKHRoaXMuc2VsZWN0ZWREYXRlT2JqKVxuICAgIFxuICAgIHRoaXMuc2VsZWN0ZWREYXRlVGFyZ2V0LmlubmVySFRNTCA9IGBcbiAgICAgICR7bW9udGh9PHNwYW4gY2xhc3M9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIG14LTAuNVwiPlx1NjcwODwvc3Bhbj4ke2RheX08c3BhbiBjbGFzcz1cInRleHQtbGcgZm9udC1tZWRpdW0gbWwtMC41IG1yLTJcIj5cdTY1RTU8L3NwYW4+XG4gICAgICA8c3BhbiBjbGFzcz1cInRleHQtYmFzZSB0ZXh0LWdyYXktNTAwIGZvbnQtbWVkaXVtXCI+JHtkYXlOYW1lfTwvc3Bhbj5cbiAgICBgXG4gIH1cblxuICBwcml2YXRlIGdldERheU5hbWUoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXG4gICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICBjb25zdCB0YXJnZXREYXRlID0gbmV3IERhdGUoZGF0ZSlcbiAgICB0YXJnZXREYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgXG4gICAgY29uc3QgZGlmZlRpbWUgPSB0YXJnZXREYXRlLmdldFRpbWUoKSAtIHRvZGF5LmdldFRpbWUoKVxuICAgIGNvbnN0IGRpZmZEYXlzID0gTWF0aC5yb3VuZChkaWZmVGltZSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSlcbiAgICBcbiAgICBpZiAoZGlmZkRheXMgPT09IDApIHJldHVybiAnXHU0RUNBXHU1OTI5J1xuICAgIGlmIChkaWZmRGF5cyA9PT0gMSkgcmV0dXJuICdcdTY2MEVcdTU5MjknXG4gICAgaWYgKGRpZmZEYXlzID09PSAyKSByZXR1cm4gJ1x1NTQwRVx1NTkyOSdcbiAgICBcbiAgICBjb25zdCB3ZWVrZGF5cyA9IFsnXHU1NDY4XHU2NUU1JywgJ1x1NTQ2OFx1NEUwMCcsICdcdTU0NjhcdTRFOEMnLCAnXHU1NDY4XHU0RTA5JywgJ1x1NTQ2OFx1NTZEQicsICdcdTU0NjhcdTRFOTQnLCAnXHU1NDY4XHU1MTZEJ11cbiAgICByZXR1cm4gd2Vla2RheXNbZGF0ZS5nZXREYXkoKV1cbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0RGF0ZShkYXRlOiBEYXRlKTogc3RyaW5nIHtcbiAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpXG4gICAgY29uc3QgbW9udGggPSBTdHJpbmcoZGF0ZS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKVxuICAgIGNvbnN0IGRheSA9IFN0cmluZyhkYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKVxuICAgIHJldHVybiBgJHt5ZWFyfS0ke21vbnRofS0ke2RheX1gXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlciB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wib3V0Ym91bmRGbGlnaHRcIiwgXCJyZXR1cm5GbGlnaHRcIiwgXCJzdWJtaXRCdXR0b25cIiwgXCJzZWxlY3RlZE91dGJvdW5kSWRcIiwgXCJzZWxlY3RlZFJldHVybklkXCIsIFwidG90YWxQcmljZVwiXVxuXG4gIHNlbGVjdGVkT3V0Ym91bmRJZFZhbHVlOiBzdHJpbmcgPSBcIlwiXG4gIHNlbGVjdGVkUmV0dXJuSWRWYWx1ZTogc3RyaW5nID0gXCJcIlxuICBvdXRib3VuZFByaWNlOiBudW1iZXIgPSAwXG4gIHJldHVyblByaWNlOiBudW1iZXIgPSAwXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICB0aGlzLnVwZGF0ZVN1Ym1pdEJ1dHRvbigpXG4gIH1cblxuICBzZWxlY3RPdXRib3VuZChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgY2FyZCA9IChldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCdbZGF0YS1mbGlnaHQtaWRdJykgYXMgSFRNTEVsZW1lbnRcbiAgICBpZiAoIWNhcmQpIHJldHVyblxuXG4gICAgY29uc3QgZmxpZ2h0SWQgPSBjYXJkLmRhdGFzZXQuZmxpZ2h0SWQgfHwgXCJcIlxuICAgIGNvbnN0IHByaWNlID0gcGFyc2VGbG9hdChjYXJkLmRhdGFzZXQucHJpY2UgfHwgXCIwXCIpXG5cbiAgICAvLyBSZW1vdmUgcHJldmlvdXMgc2VsZWN0aW9uXG4gICAgdGhpcy5vdXRib3VuZEZsaWdodFRhcmdldHMuZm9yRWFjaChlbCA9PiB7XG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdyaW5nLTInLCAncmluZy1ibHVlLTUwMCcsICdiZy1ibHVlLTUwJylcbiAgICB9KVxuXG4gICAgLy8gQWRkIHNlbGVjdGlvbiB0byBjdXJyZW50XG4gICAgY2FyZC5jbGFzc0xpc3QuYWRkKCdyaW5nLTInLCAncmluZy1ibHVlLTUwMCcsICdiZy1ibHVlLTUwJylcblxuICAgIHRoaXMuc2VsZWN0ZWRPdXRib3VuZElkVmFsdWUgPSBmbGlnaHRJZFxuICAgIHRoaXMub3V0Ym91bmRQcmljZSA9IHByaWNlXG4gICAgXG4gICAgaWYgKHRoaXMuaGFzU2VsZWN0ZWRPdXRib3VuZElkVGFyZ2V0KSB7XG4gICAgICB0aGlzLnNlbGVjdGVkT3V0Ym91bmRJZFRhcmdldC52YWx1ZSA9IGZsaWdodElkXG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVTdWJtaXRCdXR0b24oKVxuICB9XG5cbiAgc2VsZWN0UmV0dXJuKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBjYXJkID0gKGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsb3Nlc3QoJ1tkYXRhLWZsaWdodC1pZF0nKSBhcyBIVE1MRWxlbWVudFxuICAgIGlmICghY2FyZCkgcmV0dXJuXG5cbiAgICBjb25zdCBmbGlnaHRJZCA9IGNhcmQuZGF0YXNldC5mbGlnaHRJZCB8fCBcIlwiXG4gICAgY29uc3QgcHJpY2UgPSBwYXJzZUZsb2F0KGNhcmQuZGF0YXNldC5wcmljZSB8fCBcIjBcIilcblxuICAgIC8vIFJlbW92ZSBwcmV2aW91cyBzZWxlY3Rpb25cbiAgICB0aGlzLnJldHVybkZsaWdodFRhcmdldHMuZm9yRWFjaChlbCA9PiB7XG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdyaW5nLTInLCAncmluZy1ibHVlLTUwMCcsICdiZy1ibHVlLTUwJylcbiAgICB9KVxuXG4gICAgLy8gQWRkIHNlbGVjdGlvbiB0byBjdXJyZW50XG4gICAgY2FyZC5jbGFzc0xpc3QuYWRkKCdyaW5nLTInLCAncmluZy1ibHVlLTUwMCcsICdiZy1ibHVlLTUwJylcblxuICAgIHRoaXMuc2VsZWN0ZWRSZXR1cm5JZFZhbHVlID0gZmxpZ2h0SWRcbiAgICB0aGlzLnJldHVyblByaWNlID0gcHJpY2VcbiAgICBcbiAgICBpZiAodGhpcy5oYXNTZWxlY3RlZFJldHVybklkVGFyZ2V0KSB7XG4gICAgICB0aGlzLnNlbGVjdGVkUmV0dXJuSWRUYXJnZXQudmFsdWUgPSBmbGlnaHRJZFxuICAgIH1cblxuICAgIHRoaXMudXBkYXRlU3VibWl0QnV0dG9uKClcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU3VibWl0QnV0dG9uKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNTdWJtaXRCdXR0b25UYXJnZXQpIHJldHVyblxuXG4gICAgY29uc3QgYm90aFNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZE91dGJvdW5kSWRWYWx1ZSAmJiB0aGlzLnNlbGVjdGVkUmV0dXJuSWRWYWx1ZVxuXG4gICAgaWYgKGJvdGhTZWxlY3RlZCkge1xuICAgICAgdGhpcy5zdWJtaXRCdXR0b25UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnb3BhY2l0eS01MCcsICdjdXJzb3Itbm90LWFsbG93ZWQnKVxuICAgICAgdGhpcy5zdWJtaXRCdXR0b25UYXJnZXQuY2xhc3NMaXN0LmFkZCgnY3Vyc29yLXBvaW50ZXInKVxuICAgICAgdGhpcy5zdWJtaXRCdXR0b25UYXJnZXQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpXG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSB0b3RhbCBwcmljZSBkaXNwbGF5XG4gICAgICBpZiAodGhpcy5oYXNUb3RhbFByaWNlVGFyZ2V0KSB7XG4gICAgICAgIGNvbnN0IHRvdGFsID0gdGhpcy5vdXRib3VuZFByaWNlICsgdGhpcy5yZXR1cm5QcmljZVxuICAgICAgICB0aGlzLnRvdGFsUHJpY2VUYXJnZXQudGV4dENvbnRlbnQgPSBgXHUwMEE1JHt0b3RhbC50b0ZpeGVkKDApfWBcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdWJtaXRCdXR0b25UYXJnZXQuY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS01MCcsICdjdXJzb3Itbm90LWFsbG93ZWQnKVxuICAgICAgdGhpcy5zdWJtaXRCdXR0b25UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnY3Vyc29yLXBvaW50ZXInKVxuICAgICAgdGhpcy5zdWJtaXRCdXR0b25UYXJnZXQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpXG4gICAgICBcbiAgICAgIGlmICh0aGlzLmhhc1RvdGFsUHJpY2VUYXJnZXQpIHtcbiAgICAgICAgdGhpcy50b3RhbFByaWNlVGFyZ2V0LnRleHRDb250ZW50ID0gJ1x1OEJGN1x1OTAwOVx1NjJFOVx1NTNCQlx1N0EwQlx1NTQ4Q1x1OEZENFx1N0EwQlx1ODIyQVx1NzNFRCdcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdWJtaXQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnNlbGVjdGVkT3V0Ym91bmRJZFZhbHVlIHx8ICF0aGlzLnNlbGVjdGVkUmV0dXJuSWRWYWx1ZSkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgYWxlcnQoJ1x1OEJGN1x1OTAwOVx1NjJFOVx1NTNCQlx1N0EwQlx1NTQ4Q1x1OEZENFx1N0EwQlx1ODIyQVx1NzNFRCcpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBGb3JtIHdpbGwgc3VibWl0IG5hdHVyYWxseSB3aXRoIGhpZGRlbiBpbnB1dHNcbiAgfVxuXG4gIGRlY2xhcmUgb3V0Ym91bmRGbGlnaHRUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmV0dXJuRmxpZ2h0VGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHN1Ym1pdEJ1dHRvblRhcmdldDogSFRNTEJ1dHRvbkVsZW1lbnRcbiAgZGVjbGFyZSBzZWxlY3RlZE91dGJvdW5kSWRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSBzZWxlY3RlZFJldHVybklkVGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgdG90YWxQcmljZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSBoYXNTdWJtaXRCdXR0b25UYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSBoYXNTZWxlY3RlZE91dGJvdW5kSWRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSBoYXNTZWxlY3RlZFJldHVybklkVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgaGFzVG90YWxQcmljZVRhcmdldDogYm9vbGVhblxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwiZGVwYXJ0dXJlQ2l0eVwiLFxuICAgIFwiYXJyaXZhbENpdHlcIixcbiAgICBcImRlcGFydHVyZUNpdHlJbnB1dFwiLFxuICAgIFwiYXJyaXZhbENpdHlJbnB1dFwiLFxuICAgIFwic2VsZWN0ZWREYXRlXCIsXG4gICAgXCJkYXRlSW5wdXRcIixcbiAgICBcInN0dWRlbnRUaWNrZXRcIixcbiAgICBcImhpZ2hTcGVlZE9ubHlcIlxuICBdXG5cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBkZXBhcnR1cmVDaXR5OiBTdHJpbmcsXG4gICAgYXJyaXZhbENpdHk6IFN0cmluZyxcbiAgICBkYXRlOiBTdHJpbmdcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVwYXJ0dXJlQ2l0eVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBhcnJpdmFsQ2l0eVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkZXBhcnR1cmVDaXR5SW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBhcnJpdmFsQ2l0eUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VsZWN0ZWREYXRlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRhdGVJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHN0dWRlbnRUaWNrZXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoaWdoU3BlZWRPbmx5VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgZGVwYXJ0dXJlQ2l0eVZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBhcnJpdmFsQ2l0eVZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBkYXRlVmFsdWU6IHN0cmluZ1xuXG4gIHByaXZhdGUgc2VsZWN0ZWREYXRlT2JqOiBEYXRlID0gbmV3IERhdGUoKVxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJUcmFpblNlYXJjaCBjb25uZWN0ZWRcIilcbiAgICAvLyBJbml0aWFsaXplIGRlZmF1bHQgdmFsdWVzXG4gICAgaWYgKCF0aGlzLmRlcGFydHVyZUNpdHlWYWx1ZSkgdGhpcy5kZXBhcnR1cmVDaXR5VmFsdWUgPSBcIlx1NTMxN1x1NEVBQ1x1NUUwMlwiXG4gICAgaWYgKCF0aGlzLmFycml2YWxDaXR5VmFsdWUpIHRoaXMuYXJyaXZhbENpdHlWYWx1ZSA9IFwiXHU2NzZEXHU1RERFXHU1RTAyXCJcbiAgICBpZiAoIXRoaXMuZGF0ZVZhbHVlKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkRGF0ZU9iaiA9IG5ldyBEYXRlKClcbiAgICAgIC8vIFNldCB0byB0b21vcnJvdyBieSBkZWZhdWx0XG4gICAgICB0aGlzLnNlbGVjdGVkRGF0ZU9iai5zZXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlT2JqLmdldERhdGUoKSArIDEpXG4gICAgICB0aGlzLmRhdGVWYWx1ZSA9IHRoaXMuZm9ybWF0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZU9iailcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZWxlY3RlZERhdGVPYmogPSBuZXcgRGF0ZSh0aGlzLmRhdGVWYWx1ZSlcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgaW5pdGlhbCBkaXNwbGF5XG4gICAgdGhpcy51cGRhdGVDaXR5RGlzcGxheSgpXG4gICAgdGhpcy51cGRhdGVEYXRlRGlzcGxheSgpXG4gIH1cblxuICAvLyBTd2l0Y2ggY2l0aWVzXG4gIHN3aXRjaENpdGllcygpOiB2b2lkIHtcbiAgICBjb25zdCB0ZW1wID0gdGhpcy5kZXBhcnR1cmVDaXR5VmFsdWVcbiAgICB0aGlzLmRlcGFydHVyZUNpdHlWYWx1ZSA9IHRoaXMuYXJyaXZhbENpdHlWYWx1ZVxuICAgIHRoaXMuYXJyaXZhbENpdHlWYWx1ZSA9IHRlbXBcbiAgICBcbiAgICB0aGlzLnVwZGF0ZUNpdHlEaXNwbGF5KClcbiAgfVxuXG4gIC8vIFVwZGF0ZSBjaXR5IGRpc3BsYXlcbiAgcHJpdmF0ZSB1cGRhdGVDaXR5RGlzcGxheSgpOiB2b2lkIHtcbiAgICB0aGlzLmRlcGFydHVyZUNpdHlUYXJnZXQudGV4dENvbnRlbnQgPSB0aGlzLmRlcGFydHVyZUNpdHlWYWx1ZVxuICAgIHRoaXMuYXJyaXZhbENpdHlUYXJnZXQudGV4dENvbnRlbnQgPSB0aGlzLmFycml2YWxDaXR5VmFsdWVcbiAgICB0aGlzLmRlcGFydHVyZUNpdHlJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlXG4gICAgdGhpcy5hcnJpdmFsQ2l0eUlucHV0VGFyZ2V0LnZhbHVlID0gdGhpcy5hcnJpdmFsQ2l0eVZhbHVlXG4gIH1cblxuICAvLyBVcGRhdGUgZGF0ZSBkaXNwbGF5XG4gIHByaXZhdGUgdXBkYXRlRGF0ZURpc3BsYXkoKTogdm9pZCB7XG4gICAgY29uc3QgbW9udGggPSB0aGlzLnNlbGVjdGVkRGF0ZU9iai5nZXRNb250aCgpICsgMVxuICAgIGNvbnN0IGRheSA9IHRoaXMuc2VsZWN0ZWREYXRlT2JqLmdldERhdGUoKVxuICAgIGNvbnN0IGRheU5hbWUgPSB0aGlzLmdldERheU5hbWUodGhpcy5zZWxlY3RlZERhdGVPYmopXG4gICAgXG4gICAgdGhpcy5zZWxlY3RlZERhdGVUYXJnZXQuaW5uZXJIVE1MID0gYFxuICAgICAgJHttb250aH08c3BhbiBjbGFzcz1cInRleHQtc21cIj5cdTY3MDg8L3NwYW4+JHtkYXl9PHNwYW4gY2xhc3M9XCJ0ZXh0LXNtXCI+XHU2NUU1PC9zcGFuPiA8c3BhbiBjbGFzcz1cInRleHQtc21cIj4ke2RheU5hbWV9PC9zcGFuPlxuICAgIGBcbiAgICB0aGlzLmRhdGVJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuZGF0ZVZhbHVlXG4gIH1cblxuICAvLyBHZXQgZGF5IG5hbWUgaW4gQ2hpbmVzZVxuICBwcml2YXRlIGdldERheU5hbWUoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXG4gICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICBjb25zdCB0YXJnZXREYXRlID0gbmV3IERhdGUoZGF0ZSlcbiAgICB0YXJnZXREYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgXG4gICAgY29uc3QgZGlmZlRpbWUgPSB0YXJnZXREYXRlLmdldFRpbWUoKSAtIHRvZGF5LmdldFRpbWUoKVxuICAgIGNvbnN0IGRpZmZEYXlzID0gTWF0aC5yb3VuZChkaWZmVGltZSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSlcbiAgICBcbiAgICBpZiAoZGlmZkRheXMgPT09IDApIHJldHVybiAnXHU0RUNBXHU1OTI5J1xuICAgIGlmIChkaWZmRGF5cyA9PT0gMSkgcmV0dXJuICdcdTY2MEVcdTU5MjknXG4gICAgaWYgKGRpZmZEYXlzID09PSAyKSByZXR1cm4gJ1x1NTQwRVx1NTkyOSdcbiAgICBcbiAgICBjb25zdCB3ZWVrZGF5cyA9IFsnXHU1NDY4XHU2NUU1JywgJ1x1NTQ2OFx1NEUwMCcsICdcdTU0NjhcdTRFOEMnLCAnXHU1NDY4XHU0RTA5JywgJ1x1NTQ2OFx1NTZEQicsICdcdTU0NjhcdTRFOTQnLCAnXHU1NDY4XHU1MTZEJ11cbiAgICByZXR1cm4gd2Vla2RheXNbZGF0ZS5nZXREYXkoKV1cbiAgfVxuXG4gIC8vIEZvcm1hdCBkYXRlIGFzIFlZWVktTU0tRERcbiAgcHJpdmF0ZSBmb3JtYXREYXRlKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKClcbiAgICBjb25zdCBtb250aCA9IFN0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpXG4gICAgY29uc3QgZGF5ID0gU3RyaW5nKGRhdGUuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpXG4gICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fWBcbiAgfVxuXG4gIC8vIFRvZ2dsZSBzdHVkZW50IHRpY2tldFxuICB0b2dnbGVTdHVkZW50VGlja2V0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiU3R1ZGVudCB0aWNrZXQgdG9nZ2xlZDpcIiwgdGhpcy5zdHVkZW50VGlja2V0VGFyZ2V0LmNoZWNrZWQpXG4gIH1cblxuICAvLyBUb2dnbGUgaGlnaCBzcGVlZCBvbmx5XG4gIHRvZ2dsZUhpZ2hTcGVlZE9ubHkoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJIaWdoIHNwZWVkIG9ubHkgdG9nZ2xlZDpcIiwgdGhpcy5oaWdoU3BlZWRPbmx5VGFyZ2V0LmNoZWNrZWQpXG4gIH1cblxuICAvLyBIYW5kbGUgc2VhcmNoIGZvcm0gc3VibWlzc2lvbiAoVHVyYm8gaGFuZGxlcyBhY3R1YWwgc3VibWlzc2lvbilcbiAgLy8gVGhpcyBpcyBqdXN0IGZvciBhbnkgcHJlLXN1Ym1pc3Npb24gVUkgZmVlZGJhY2sgaWYgbmVlZGVkXG4gIHNlYXJjaCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlNlYXJjaGluZyB0cmFpbnM6XCIsIHtcbiAgICAgIGZyb206IHRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlLFxuICAgICAgdG86IHRoaXMuYXJyaXZhbENpdHlWYWx1ZSxcbiAgICAgIGRhdGU6IHRoaXMuZGF0ZVZhbHVlXG4gICAgfSlcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwidHJhaW5JdGVtXCJcbiAgXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgdHJhaW5JdGVtVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJUcmFpbkxpc3QgY29ubmVjdGVkXCIpXG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiVHJhaW5MaXN0IGRpc2Nvbm5lY3RlZFwiKVxuICB9XG5cbiAgdG9nZ2xlRmlsdGVyKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBidXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnYmctcHJpbWFyeScpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ3RleHQtcHJpbWFyeS1mb3JlZ3JvdW5kJylcbiAgICBidXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnYmctc3VyZmFjZS1lbGV2YXRlZCcpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ3RleHQtZm9yZWdyb3VuZCcpXG4gIH1cblxuICB0b2dnbGVTdGF0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBidXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnYmctcHJpbWFyeScpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ3RleHQtcHJpbWFyeS1mb3JlZ3JvdW5kJylcbiAgICBidXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnYmctc3VyZmFjZS1lbGV2YXRlZCcpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ3RleHQtZm9yZWdyb3VuZCcpXG4gIH1cblxuICBzaG93QWR2YW5jZWRGaWx0ZXJzKCk6IHZvaWQge1xuICAgIC8vIFNob3cgYWR2YW5jZWQgZmlsdGVycyBtb2RhbCAoZnV0dXJlIGltcGxlbWVudGF0aW9uKVxuICAgIGNvbnNvbGUubG9nKCdTaG93IGFkdmFuY2VkIGZpbHRlcnMnKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJtb2RhbFwiLFxuICAgIFwiZGVwYXJ0dXJlXCIsXG4gICAgXCJkZXN0aW5hdGlvblwiLFxuICAgIFwiZGVwYXJ0dXJlQ2l0eUlucHV0XCIsXG4gICAgXCJkZXN0aW5hdGlvbkNpdHlJbnB1dFwiLFxuICAgIFwidGFiRGVwYXJ0dXJlXCIsXG4gICAgXCJ0YWJEZXN0aW5hdGlvblwiLFxuICAgIFwic2VhcmNoSW5wdXRcIixcbiAgICBcImRvbWVzdGljTGlzdFwiLFxuICAgIFwiaW50ZXJuYXRpb25hbExpc3RcIixcbiAgICBcImhpc3RvcnlTZWN0aW9uXCIsXG4gICAgXCJjdXJyZW50Q2l0eVwiXG4gIF1cblxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIGRlcGFydHVyZUNpdHk6IFN0cmluZyxcbiAgICBkZXN0aW5hdGlvbkNpdHk6IFN0cmluZ1xuICB9XG5cbiAgcHJpdmF0ZSBzZWxlY3Rpb25UeXBlOiAnZGVwYXJ0dXJlJyB8ICdkZXN0aW5hdGlvbicgPSAnZGVwYXJ0dXJlJ1xuXG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVwYXJ0dXJlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRlc3RpbmF0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRlcGFydHVyZUNpdHlJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRlc3RpbmF0aW9uQ2l0eUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzTW9kYWxUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSB0YWJEZXBhcnR1cmVUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdGFiRGVzdGluYXRpb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VhcmNoSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkb21lc3RpY0xpc3RUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaW50ZXJuYXRpb25hbExpc3RUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGlzdG9yeVNlY3Rpb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY3VycmVudENpdHlUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgZGVwYXJ0dXJlQ2l0eVZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBkZXN0aW5hdGlvbkNpdHlWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlRyYWluQ2l0eVNlbGVjdG9yIGNvbm5lY3RlZFwiKVxuICAgIC8vIEluaXRpYWxpemUgZGVmYXVsdCB2YWx1ZXNcbiAgICBpZiAoIXRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlKSB0aGlzLmRlcGFydHVyZUNpdHlWYWx1ZSA9IFwiXHU1MzE3XHU0RUFDXCJcbiAgICBpZiAoIXRoaXMuZGVzdGluYXRpb25DaXR5VmFsdWUpIHRoaXMuZGVzdGluYXRpb25DaXR5VmFsdWUgPSBcIlx1Njc2RFx1NURERVwiXG4gICAgXG4gICAgLy8gU2V0IGluaXRpYWwgdmFsdWVzIHRvIGhpZGRlbiBpbnB1dHNcbiAgICB0aGlzLmRlcGFydHVyZUNpdHlJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlXG4gICAgdGhpcy5kZXN0aW5hdGlvbkNpdHlJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuZGVzdGluYXRpb25DaXR5VmFsdWVcbiAgfVxuXG4gIC8vIE9wZW4gbW9kYWwgZm9yIGRlcGFydHVyZSBjaXR5IHNlbGVjdGlvblxuICBvcGVuRGVwYXJ0dXJlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNNb2RhbFRhcmdldCkge1xuICAgICAgY29uc29sZS5sb2coJ1RyYWluQ2l0eVNlbGVjdG9yOiBObyBtb2RhbCBhdmFpbGFibGUsIHNraXBwaW5nJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0aGlzLnNlbGVjdGlvblR5cGUgPSAnZGVwYXJ0dXJlJ1xuICAgIHRoaXMudXBkYXRlTW9kYWxUaXRsZSgpXG4gICAgdGhpcy5zaG93TW9kYWwoKVxuICB9XG5cbiAgLy8gT3BlbiBtb2RhbCBmb3IgZGVzdGluYXRpb24gY2l0eSBzZWxlY3Rpb25cbiAgb3BlbkRlc3RpbmF0aW9uKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNNb2RhbFRhcmdldCkge1xuICAgICAgY29uc29sZS5sb2coJ1RyYWluQ2l0eVNlbGVjdG9yOiBObyBtb2RhbCBhdmFpbGFibGUsIHNraXBwaW5nJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0aGlzLnNlbGVjdGlvblR5cGUgPSAnZGVzdGluYXRpb24nXG4gICAgdGhpcy51cGRhdGVNb2RhbFRpdGxlKClcbiAgICB0aGlzLnNob3dNb2RhbCgpXG4gIH1cblxuICAvLyBTaG93IG1vZGFsXG4gIHNob3dNb2RhbCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaGFzTW9kYWxUYXJnZXQpIHJldHVyblxuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbidcbiAgfVxuXG4gIC8vIENsb3NlIG1vZGFsXG4gIGNsb3NlTW9kYWwoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc01vZGFsVGFyZ2V0KSByZXR1cm5cbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICcnXG4gICAgdGhpcy5jbGVhclNlYXJjaCgpXG4gIH1cblxuICAvLyBTZWxlY3QgY2l0eVxuICBzZWxlY3RDaXR5KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBjaXR5TmFtZSA9IGJ1dHRvbi5kYXRhc2V0LmNpdHlOYW1lIHx8ICcnXG4gICAgXG4gICAgaWYgKHRoaXMuc2VsZWN0aW9uVHlwZSA9PT0gJ2RlcGFydHVyZScpIHtcbiAgICAgIHRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlID0gY2l0eU5hbWVcbiAgICAgIHRoaXMuZGVwYXJ0dXJlVGFyZ2V0LnRleHRDb250ZW50ID0gY2l0eU5hbWVcbiAgICAgIHRoaXMuZGVwYXJ0dXJlQ2l0eUlucHV0VGFyZ2V0LnZhbHVlID0gY2l0eU5hbWVcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kZXN0aW5hdGlvbkNpdHlWYWx1ZSA9IGNpdHlOYW1lXG4gICAgICB0aGlzLmRlc3RpbmF0aW9uVGFyZ2V0LnRleHRDb250ZW50ID0gY2l0eU5hbWVcbiAgICAgIHRoaXMuZGVzdGluYXRpb25DaXR5SW5wdXRUYXJnZXQudmFsdWUgPSBjaXR5TmFtZVxuICAgIH1cbiAgICBcbiAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICB9XG5cbiAgLy8gU3dpdGNoIGNpdGllc1xuICBzd2l0Y2hDaXRpZXMoKTogdm9pZCB7XG4gICAgY29uc3QgdGVtcCA9IHRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlXG4gICAgdGhpcy5kZXBhcnR1cmVDaXR5VmFsdWUgPSB0aGlzLmRlc3RpbmF0aW9uQ2l0eVZhbHVlXG4gICAgdGhpcy5kZXN0aW5hdGlvbkNpdHlWYWx1ZSA9IHRlbXBcbiAgICBcbiAgICB0aGlzLmRlcGFydHVyZVRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlXG4gICAgdGhpcy5kZXN0aW5hdGlvblRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMuZGVzdGluYXRpb25DaXR5VmFsdWVcbiAgICB0aGlzLmRlcGFydHVyZUNpdHlJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlXG4gICAgdGhpcy5kZXN0aW5hdGlvbkNpdHlJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuZGVzdGluYXRpb25DaXR5VmFsdWVcbiAgfVxuXG4gIC8vIFN3aXRjaCBiZXR3ZWVuIGRvbWVzdGljIGFuZCBpbnRlcm5hdGlvbmFsIHRhYnNcbiAgc2hvd0RvbWVzdGljKCk6IHZvaWQge1xuICAgIHRoaXMuZG9tZXN0aWNMaXN0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgdGhpcy5pbnRlcm5hdGlvbmFsTGlzdFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIHRoaXMudGFiRGVwYXJ0dXJlVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZS10YWInKVxuICAgIHRoaXMudGFiRGVzdGluYXRpb25UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlLXRhYicpXG4gIH1cblxuICBzaG93SW50ZXJuYXRpb25hbCgpOiB2b2lkIHtcbiAgICB0aGlzLmRvbWVzdGljTGlzdFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIHRoaXMuaW50ZXJuYXRpb25hbExpc3RUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICB0aGlzLnRhYkRlcGFydHVyZVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUtdGFiJylcbiAgICB0aGlzLnRhYkRlc3RpbmF0aW9uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZS10YWInKVxuICB9XG5cbiAgLy8gU2VhcmNoIGNpdGllc1xuICBzZWFyY2goKTogdm9pZCB7XG4gICAgY29uc3QgcXVlcnkgPSB0aGlzLnNlYXJjaElucHV0VGFyZ2V0LnZhbHVlLnRvTG93ZXJDYXNlKCkudHJpbSgpXG4gICAgXG4gICAgaWYgKHF1ZXJ5ID09PSAnJykge1xuICAgICAgdGhpcy5jbGVhclNlYXJjaCgpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBIaWRlIGhpc3Rvcnkgc2VjdGlvbiB3aGVuIHNlYXJjaGluZ1xuICAgIHRoaXMuaGlzdG9yeVNlY3Rpb25UYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBcbiAgICAvLyBGaWx0ZXIgY2l0aWVzIGluIGJvdGggbGlzdHNcbiAgICB0aGlzLmZpbHRlckNpdGllcyh0aGlzLmRvbWVzdGljTGlzdFRhcmdldCwgcXVlcnkpXG4gICAgaWYgKCF0aGlzLmludGVybmF0aW9uYWxMaXN0VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHtcbiAgICAgIHRoaXMuZmlsdGVyQ2l0aWVzKHRoaXMuaW50ZXJuYXRpb25hbExpc3RUYXJnZXQsIHF1ZXJ5KVxuICAgIH1cbiAgfVxuXG4gIC8vIEZpbHRlciBjaXRpZXMgaGVscGVyXG4gIHByaXZhdGUgZmlsdGVyQ2l0aWVzKGxpc3RUYXJnZXQ6IEhUTUxFbGVtZW50LCBxdWVyeTogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgY2l0eUJ1dHRvbnMgPSBsaXN0VGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWNpdHktbmFtZV0nKVxuICAgIGNpdHlCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgICAgY29uc3QgY2l0eU5hbWUgPSAoYnV0dG9uIGFzIEhUTUxFbGVtZW50KS5kYXRhc2V0LmNpdHlOYW1lPy50b0xvd2VyQ2FzZSgpIHx8ICcnXG4gICAgICBjb25zdCBjaXR5UGlueWluID0gKGJ1dHRvbiBhcyBIVE1MRWxlbWVudCkuZGF0YXNldC5jaXR5UGlueWluPy50b0xvd2VyQ2FzZSgpIHx8ICcnXG4gICAgICBcbiAgICAgIGlmIChjaXR5TmFtZS5pbmNsdWRlcyhxdWVyeSkgfHwgY2l0eVBpbnlpbi5pbmNsdWRlcyhxdWVyeSkpIHtcbiAgICAgICAgKGJ1dHRvbiBhcyBIVE1MRWxlbWVudCkuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIChidXR0b24gYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8vIENsZWFyIHNlYXJjaFxuICBjbGVhclNlYXJjaCgpOiB2b2lkIHtcbiAgICB0aGlzLnNlYXJjaElucHV0VGFyZ2V0LnZhbHVlID0gJydcbiAgICB0aGlzLmhpc3RvcnlTZWN0aW9uVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgXG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIC8vIFNob3cgYWxsIGNpdGllc1xuICAgIGNvbnN0IGFsbEJ1dHRvbnMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtY2l0eS1uYW1lXScpXG4gICAgYWxsQnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgIChidXR0b24gYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgfSlcbiAgfVxuXG4gIC8vIFVwZGF0ZSBtb2RhbCB0aXRsZSBiYXNlZCBvbiBzZWxlY3Rpb24gdHlwZVxuICBwcml2YXRlIHVwZGF0ZU1vZGFsVGl0bGUoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc01vZGFsVGFyZ2V0KSByZXR1cm5cbiAgICBjb25zdCB0aXRsZUVsZW1lbnQgPSB0aGlzLm1vZGFsVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW1vZGFsLXRpdGxlXScpXG4gICAgaWYgKHRpdGxlRWxlbWVudCkge1xuICAgICAgdGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5zZWxlY3Rpb25UeXBlID09PSAnZGVwYXJ0dXJlJyA/ICdcdTUzNTVcdTkwMDlcdTUxRkFcdTUzRDFcdTU3MzAnIDogJ1x1NTM1NVx1OTAwOVx1NzZFRVx1NzY4NFx1NTczMCdcbiAgICB9XG4gIH1cblxuICAvLyBKdW1wIHRvIGxldHRlciBzZWN0aW9uXG4gIGp1bXBUb0xldHRlcihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgbGV0dGVyID0gYnV0dG9uLmRhdGFzZXQubGV0dGVyIHx8ICcnXG4gICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuZG9tZXN0aWNMaXN0VGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWxldHRlci1zZWN0aW9uPVwiJHtsZXR0ZXJ9XCJdYClcbiAgICBcbiAgICBpZiAoc2VjdGlvbikge1xuICAgICAgc2VjdGlvbi5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSlcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcInRyaWdnZXJcIiwgICAgICAvLyBcdTg5RTZcdTUzRDFcdTUyQTBcdThGN0RcdTc2ODRcdTRFMERcdTUzRUZcdTg5QzFcdTUxNDNcdTdEMjBcbiAgICBcImNvbnRhaW5lclwiLCAgICAvLyBcdTUxODVcdTVCQjlcdTVCQjlcdTU2NjhcbiAgICBcImxvYWRpbmdcIiAgICAgICAvLyBcdTUyQTBcdThGN0RcdTYzMDdcdTc5M0FcdTU2NjhcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgcGFnZTogTnVtYmVyLCAgICAgIC8vIFx1NUY1M1x1NTI0RFx1OTg3NVx1NzgwMVxuICAgIGhhc01vcmU6IEJvb2xlYW4gICAvLyBcdTY2MkZcdTU0MjZcdThGRDhcdTY3MDlcdTY2RjRcdTU5MUFcdTY1NzBcdTYzNkVcbiAgfVxuXG4gIC8vIERlY2xhcmUgdGFyZ2V0cyBhbmQgdmFsdWVzXG4gIGRlY2xhcmUgcmVhZG9ubHkgdHJpZ2dlclRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjb250YWluZXJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbG9hZGluZ1RhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSBwYWdlVmFsdWU6IG51bWJlclxuICBkZWNsYXJlIGhhc01vcmVWYWx1ZTogYm9vbGVhblxuXG4gIHByaXZhdGUgb2JzZXJ2ZXI6IEludGVyc2VjdGlvbk9ic2VydmVyIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSBpc0xvYWRpbmc6IGJvb2xlYW4gPSBmYWxzZVxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJJbmZpbml0ZVNjcm9sbCBjb25uZWN0ZWQsIGluaXRpYWwgcGFnZTpcIiwgdGhpcy5wYWdlVmFsdWUsIFwiaGFzTW9yZTpcIiwgdGhpcy5oYXNNb3JlVmFsdWUpXG4gICAgXG4gICAgLy8gXHU1M0VBXHU2NzA5XHU1NzI4XHU2NzA5XHU2NkY0XHU1OTFBXHU2NTcwXHU2MzZFXHU2NUY2XHU2MjREXHU4QkJFXHU3RjZFb2JzZXJ2ZXJcbiAgICBpZiAodGhpcy5oYXNNb3JlVmFsdWUpIHtcbiAgICAgIHRoaXMuc2V0dXBPYnNlcnZlcigpXG4gICAgfVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkluZmluaXRlU2Nyb2xsIGRpc2Nvbm5lY3RlZFwiKVxuICAgIGlmICh0aGlzLm9ic2VydmVyKSB7XG4gICAgICB0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKVxuICAgICAgdGhpcy5vYnNlcnZlciA9IG51bGxcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNldHVwT2JzZXJ2ZXIoKTogdm9pZCB7XG4gICAgLy8gXHU1MjFCXHU1RUZBSW50ZXJzZWN0aW9uT2JzZXJ2ZXJcdTc2RDFcdTU0MkN0cmlnZ2VyXHU1MTQzXHU3RDIwXG4gICAgdGhpcy5vYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgIChlbnRyaWVzKSA9PiB7XG4gICAgICAgIGVudHJpZXMuZm9yRWFjaCgoZW50cnkpID0+IHtcbiAgICAgICAgICAvLyBcdTVGNTN0cmlnZ2VyXHU1MTQzXHU3RDIwXHU4RkRCXHU1MTY1XHU4OUM2XHU1M0UzXHU2NUY2XHU4OUU2XHU1M0QxXHU1MkEwXHU4RjdEXG4gICAgICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nICYmIHRoaXMuaGFzTW9yZVZhbHVlICYmICF0aGlzLmlzTG9hZGluZykge1xuICAgICAgICAgICAgdGhpcy5sb2FkTW9yZSgpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgcm9vdDogbnVsbCwgICAgICAgICAgIC8vIFx1NEY3Rlx1NzUyOHZpZXdwb3J0XHU0RjVDXHU0RTNBcm9vdFxuICAgICAgICByb290TWFyZ2luOiBcIjEwMHB4XCIsICAvLyBcdTYzRDBcdTUyNEQxMDBweFx1ODlFNlx1NTNEMVxuICAgICAgICB0aHJlc2hvbGQ6IDAuMSAgICAgICAgLy8gMTAlXHU1M0VGXHU4OUMxXHU2NUY2XHU4OUU2XHU1M0QxXG4gICAgICB9XG4gICAgKVxuXG4gICAgLy8gXHU1RjAwXHU1OUNCXHU4OUMyXHU1QkRGdHJpZ2dlclx1NTE0M1x1N0QyMFxuICAgIHRoaXMub2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLnRyaWdnZXJUYXJnZXQpXG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRNb3JlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLmlzTG9hZGluZyB8fCAhdGhpcy5oYXNNb3JlVmFsdWUpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZVxuICAgIHRoaXMuc2hvd0xvYWRpbmcoKVxuXG4gICAgY29uc29sZS5sb2coXCJMb2FkaW5nIG1vcmUgdHJpcHMsIHBhZ2U6XCIsIHRoaXMucGFnZVZhbHVlKVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFx1NEY3Rlx1NzUyOFR1cmJvXHU1M0QxXHU4RDc3XHU4QkY3XHU2QzQyXHVGRjBDXHU4MUVBXHU1MkE4XHU1OTA0XHU3NDA2dHVyYm9fc3RyZWFtXHU1NENEXHU1RTk0XG4gICAgICBjb25zdCB1cmwgPSBgL3RyaXBzL2xvYWRfbW9yZT9wYWdlPSR7dGhpcy5wYWdlVmFsdWV9YFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiQWNjZXB0XCI6IFwidGV4dC92bmQudHVyYm8tc3RyZWFtLmh0bWxcIixcbiAgICAgICAgICBcIlgtUmVxdWVzdGVkLVdpdGhcIjogXCJYTUxIdHRwUmVxdWVzdFwiXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBodG1sID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpXG4gICAgICAgIFxuICAgICAgICAvLyBcdTYyNEJcdTUyQThcdTU5MDRcdTc0MDZUdXJibyBTdHJlYW1cdTU0Q0RcdTVFOTRcbiAgICAgICAgY29uc3Qgc3RyZWFtRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgIHN0cmVhbUVsZW1lbnQuaW5uZXJIVE1MID0gaHRtbFxuICAgICAgICBcbiAgICAgICAgLy8gXHU2MjY3XHU4ODRDdHVyYm8tc3RyZWFtXHU2ODA3XHU3QjdFXG4gICAgICAgIGNvbnN0IHR1cmJvU3RyZWFtcyA9IHN0cmVhbUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgndHVyYm8tc3RyZWFtJylcbiAgICAgICAgdHVyYm9TdHJlYW1zLmZvckVhY2goKHN0cmVhbSkgPT4ge1xuICAgICAgICAgIC8vIFR1cmJvXHU0RjFBXHU4MUVBXHU1MkE4XHU1OTA0XHU3NDA2XHU4RkQ5XHU0RTlCXHU1MTQzXHU3RDIwXG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzdHJlYW0pXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICAvLyBcdTU4OUVcdTUyQTBcdTk4NzVcdTc4MDFcbiAgICAgICAgdGhpcy5wYWdlVmFsdWUrK1xuICAgICAgICBcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU4RkQ4XHU2NzA5XHU2NkY0XHU1OTFBXHU2NTcwXHU2MzZFXHVGRjA4XHU5MDFBXHU4RkM3XHU2OEMwXHU2N0U1XHU1NENEXHU1RTk0XHU0RTJEXHU2NjJGXHU1NDI2XHU1MzA1XHU1NDJCaGFzX21vcmVcdTRGRTFcdTYwNkZcdUZGMDlcbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2Q0ExXHU2NzA5XHU2NkY0XHU1OTFBXHU2NTcwXHU2MzZFXHVGRjBDXHU1MDVDXHU2QjYyb2JzZXJ2ZXJcbiAgICAgICAgaWYgKGh0bWwuaW5jbHVkZXMoJ1x1NURGMlx1NjYzRVx1NzkzQVx1NTE2OFx1OTBFOFx1ODg0Q1x1N0EwQicpKSB7XG4gICAgICAgICAgdGhpcy5oYXNNb3JlVmFsdWUgPSBmYWxzZVxuICAgICAgICAgIGlmICh0aGlzLm9ic2VydmVyKSB7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coXCJMb2FkZWQgbW9yZSB0cmlwcywgbmV3IHBhZ2U6XCIsIHRoaXMucGFnZVZhbHVlLCBcImhhc01vcmU6XCIsIHRoaXMuaGFzTW9yZVZhbHVlKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGxvYWQgbW9yZSB0cmlwczpcIiwgZXJyb3IpXG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2VcbiAgICAgIHRoaXMuaGlkZUxvYWRpbmcoKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2hvd0xvYWRpbmcoKTogdm9pZCB7XG4gICAgdGhpcy5sb2FkaW5nVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gIH1cblxuICBwcml2YXRlIGhpZGVMb2FkaW5nKCk6IHZvaWQge1xuICAgIHRoaXMubG9hZGluZ1RhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG4vLyBDb25uZWN0cyB0byBkYXRhLWNvbnRyb2xsZXI9XCJkZWVwLXRyYXZlbFwiXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXIge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcInZpZGVvXCIsIFwidmlkZW9Db250YWluZXJcIiwgXCJ0YWJcIiwgXCJjb250ZW50XCJdXG5cbiAgZGVjbGFyZSByZWFkb25seSB2aWRlb1RhcmdldDogSFRNTFZpZGVvRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHZpZGVvQ29udGFpbmVyVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRhYlRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBjb250ZW50VGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuXG4gIGNvbm5lY3QoKSB7XG4gICAgY29uc29sZS5sb2coXCJEZWVwIHRyYXZlbCBjb250cm9sbGVyIGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgcGxheVZpZGVvKGV2ZW50OiBFdmVudCkge1xuICAgIGNvbnN0IHZpZGVvID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MVmlkZW9FbGVtZW50XG4gICAgaWYgKHZpZGVvLnBhdXNlZCkge1xuICAgICAgdmlkZW8ucGxheSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIHZpZGVvLnBhdXNlKClcbiAgICB9XG4gIH1cblxuICB0b2dnbGVGdWxsc2NyZWVuKGV2ZW50OiBFdmVudCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IChldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCdbZGF0YS1kZWVwLXRyYXZlbC10YXJnZXQ9XCJ2aWRlb0NvbnRhaW5lclwiXScpIGFzIEhUTUxFbGVtZW50XG4gICAgaWYgKCFkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCkge1xuICAgICAgY29udGFpbmVyLnJlcXVlc3RGdWxsc2NyZWVuKClcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4oKVxuICAgIH1cbiAgfVxuXG4gIHN3aXRjaFRhYihldmVudDogRXZlbnQpIHtcbiAgICBjb25zdCBjbGlja2VkVGFiID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHRhYk5hbWUgPSBjbGlja2VkVGFiLmRhdGFzZXQudGFiXG5cbiAgICAvLyBVcGRhdGUgdGFiIHN0eWxlc1xuICAgIHRoaXMudGFiVGFyZ2V0cy5mb3JFYWNoKHRhYiA9PiB7XG4gICAgICBpZiAodGFiID09PSBjbGlja2VkVGFiKSB7XG4gICAgICAgIHRhYi5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktOTAwJywgJ2JvcmRlci1iLTInLCAnYm9yZGVyLXllbGxvdy00MDAnLCAnYmcteWVsbG93LTUwJylcbiAgICAgICAgdGFiLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS02MDAnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFiLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS05MDAnLCAnYm9yZGVyLWItMicsICdib3JkZXIteWVsbG93LTQwMCcsICdiZy15ZWxsb3ctNTAnKVxuICAgICAgICB0YWIuY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTYwMCcpXG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIFNob3cvaGlkZSBjb250ZW50XG4gICAgdGhpcy5jb250ZW50VGFyZ2V0cy5mb3JFYWNoKGNvbnRlbnQgPT4ge1xuICAgICAgaWYgKGNvbnRlbnQuZGF0YXNldC5jb250ZW50ID09PSB0YWJOYW1lKSB7XG4gICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG4vLyBcdTg4NENcdTdBMEJcdTZCQjVcdTYzQTVcdTUzRTNcbmludGVyZmFjZSBTZWdtZW50IHtcbiAgaWQ6IHN0cmluZ1xuICBkZXBhcnR1cmVDaXR5OiBzdHJpbmdcbiAgZGVzdGluYXRpb25DaXR5OiBzdHJpbmdcbiAgZGF0ZTogc3RyaW5nXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcInNlZ21lbnRzQ29udGFpbmVyXCIsIFwic2VnbWVudFwiLCBcImFkZEJ1dHRvblwiLCBcImhpZGRlblNlZ21lbnRzSW5wdXRcIl1cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBzZWdtZW50czogeyB0eXBlOiBBcnJheSwgZGVmYXVsdDogW10gfSxcbiAgICBzd2l0Y2hJY29uVXJsOiBTdHJpbmdcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VnbWVudHNDb250YWluZXJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VnbWVudFRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBhZGRCdXR0b25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGlkZGVuU2VnbWVudHNJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1NlZ21lbnRzQ29udGFpbmVyVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQWRkQnV0dG9uVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzSGlkZGVuU2VnbWVudHNJbnB1dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHNlZ21lbnRzVmFsdWU6IFNlZ21lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IHN3aXRjaEljb25VcmxWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIk11bHRpQ2l0eSBjb250cm9sbGVyIGNvbm5lY3RlZFwiKVxuICAgIFxuICAgIC8vIE9ubHkgaW5pdGlhbGl6ZSBpZiB0aGUgY29udGFpbmVyIHRhcmdldCBpcyBhdmFpbGFibGVcbiAgICBpZiAoIXRoaXMuaGFzU2VnbWVudHNDb250YWluZXJUYXJnZXQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiTXVsdGlDaXR5IGNvbnRyb2xsZXI6IHNlZ21lbnRzQ29udGFpbmVyIG5vdCBhdmFpbGFibGUgeWV0LCBza2lwcGluZyBpbml0aWFsaXphdGlvblwiKVxuICAgICAgXG4gICAgICAvLyBMaXN0ZW4gZm9yIHRoZSBldmVudCB3aGVuIG11bHRpLWNpdHkgZm9ybSBiZWNvbWVzIHZpc2libGVcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RyaXAtdHlwZTptdWx0aS1jaXR5LXNob3duJywgdGhpcy5oYW5kbGVNdWx0aUNpdHlTaG93bi5iaW5kKHRoaXMpKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIHRoaXMuaW5pdGlhbGl6ZVNlZ21lbnRzKClcbiAgICBcbiAgICAvLyBMaXN0ZW4gZm9yIGNpdHkgc2VsZWN0aW9uIGV2ZW50cyBvbiBkb2N1bWVudCBmb3IgYmV0dGVyIGV2ZW50IGNhcHR1cmVcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjaXR5LXNlbGVjdG9yOmNpdHktc2VsZWN0ZWQnLCB0aGlzLmhhbmRsZUNpdHlTZWxlY3RlZC5iaW5kKHRoaXMpKVxuICAgIGNvbnNvbGUubG9nKCdNdWx0aS1jaXR5OiBBZGRlZCBldmVudCBsaXN0ZW5lciBmb3IgY2l0eS1zZWxlY3RvcjpjaXR5LXNlbGVjdGVkJylcbiAgICBcbiAgICAvLyBMaXN0ZW4gZm9yIGRhdGUgc2VsZWN0aW9uIGV2ZW50c1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RhdGUtcGlja2VyOmRhdGUtc2VsZWN0ZWQnLCB0aGlzLmhhbmRsZURhdGVTZWxlY3RlZC5iaW5kKHRoaXMpIGFzIHVua25vd24gYXMgRXZlbnRMaXN0ZW5lcilcbiAgICBjb25zb2xlLmxvZygnTXVsdGktY2l0eTogQWRkZWQgZXZlbnQgbGlzdGVuZXIgZm9yIGRhdGUtcGlja2VyOmRhdGUtc2VsZWN0ZWQnKVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjaXR5LXNlbGVjdG9yOmNpdHktc2VsZWN0ZWQnLCB0aGlzLmhhbmRsZUNpdHlTZWxlY3RlZC5iaW5kKHRoaXMpKVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RhdGUtcGlja2VyOmRhdGUtc2VsZWN0ZWQnLCB0aGlzLmhhbmRsZURhdGVTZWxlY3RlZC5iaW5kKHRoaXMpIGFzIHVua25vd24gYXMgRXZlbnRMaXN0ZW5lcilcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmlwLXR5cGU6bXVsdGktY2l0eS1zaG93bicsIHRoaXMuaGFuZGxlTXVsdGlDaXR5U2hvd24uYmluZCh0aGlzKSlcbiAgfVxuXG4gIC8vIFN0aW11bHVzIHZhbHVlIGNoYW5nZWQgY2FsbGJhY2sgLSBhdXRvbWF0aWNhbGx5IGNhbGxlZCB3aGVuIHNlZ21lbnRzVmFsdWUgY2hhbmdlc1xuICBzZWdtZW50c1ZhbHVlQ2hhbmdlZCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygnTXVsdGktY2l0eTogc2VnbWVudHNWYWx1ZUNoYW5nZWQgdHJpZ2dlcmVkJylcbiAgICAvLyBPbmx5IHJlbmRlciBpZiB0aGUgY29udGFpbmVyIGlzIGF2YWlsYWJsZVxuICAgIGlmICh0aGlzLmhhc1NlZ21lbnRzQ29udGFpbmVyVGFyZ2V0KSB7XG4gICAgICB0aGlzLnJlbmRlcigpXG4gICAgfVxuICB9XG5cbiAgLy8gSGFuZGxlIHdoZW4gbXVsdGktY2l0eSBmb3JtIGlzIHNob3duXG4gIHByaXZhdGUgaGFuZGxlTXVsdGlDaXR5U2hvd24oKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ011bHRpLWNpdHk6IEZvcm0gaXMgbm93IHZpc2libGUsIGluaXRpYWxpemluZy4uLicpXG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdGFyZ2V0cyBhcmUgbm93IGF2YWlsYWJsZVxuICAgIGlmICh0aGlzLmhhc1NlZ21lbnRzQ29udGFpbmVyVGFyZ2V0KSB7XG4gICAgICB0aGlzLmluaXRpYWxpemVTZWdtZW50cygpXG4gICAgICBcbiAgICAgIC8vIExpc3RlbiBmb3IgY2l0eSBzZWxlY3Rpb24gZXZlbnRzXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjaXR5LXNlbGVjdG9yOmNpdHktc2VsZWN0ZWQnLCB0aGlzLmhhbmRsZUNpdHlTZWxlY3RlZC5iaW5kKHRoaXMpKVxuICAgICAgY29uc29sZS5sb2coJ011bHRpLWNpdHk6IEFkZGVkIGV2ZW50IGxpc3RlbmVyIGZvciBjaXR5LXNlbGVjdG9yOmNpdHktc2VsZWN0ZWQnKVxuICAgICAgXG4gICAgICAvLyBMaXN0ZW4gZm9yIGRhdGUgc2VsZWN0aW9uIGV2ZW50c1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdkYXRlLXBpY2tlcjpkYXRlLXNlbGVjdGVkJywgdGhpcy5oYW5kbGVEYXRlU2VsZWN0ZWQuYmluZCh0aGlzKSBhcyB1bmtub3duIGFzIEV2ZW50TGlzdGVuZXIpXG4gICAgICBjb25zb2xlLmxvZygnTXVsdGktY2l0eTogQWRkZWQgZXZlbnQgbGlzdGVuZXIgZm9yIGRhdGUtcGlja2VyOmRhdGUtc2VsZWN0ZWQnKVxuICAgIH1cbiAgfVxuXG4gIC8vIEluaXRpYWxpemUgdGhlIHNlZ21lbnRzXG4gIHByaXZhdGUgaW5pdGlhbGl6ZVNlZ21lbnRzKCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKCdNdWx0aS1jaXR5OiBJbml0aWFsaXppbmcgc2VnbWVudHMnKVxuICAgIFxuICAgIC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1OUVEOFx1OEJBNFx1ODg0Q1x1N0EwQlx1NkJCNVxuICAgIGlmICh0aGlzLnNlZ21lbnRzVmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLnNlZ21lbnRzVmFsdWUgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogdGhpcy5nZW5lcmF0ZUlkKCksXG4gICAgICAgICAgZGVwYXJ0dXJlQ2l0eTogXCJcdTZCNjZcdTZDNDlcIixcbiAgICAgICAgICBkZXN0aW5hdGlvbkNpdHk6IFwiXHU2REYxXHU1NzMzXCIsXG4gICAgICAgICAgZGF0ZTogdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKCkpXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogdGhpcy5nZW5lcmF0ZUlkKCksXG4gICAgICAgICAgZGVwYXJ0dXJlQ2l0eTogXCJcdTVFN0ZcdTVEREVcIixcbiAgICAgICAgICBkZXN0aW5hdGlvbkNpdHk6IFwiXHU2NzZEXHU1RERFXCIsXG4gICAgICAgICAgZGF0ZTogdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKERhdGUubm93KCkgKyAzICogMjQgKiA2MCAqIDYwICogMTAwMCkpIC8vIDNcdTU5MjlcdTU0MEVcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnJlbmRlcigpXG4gICAgdGhpcy51cGRhdGVBZGRCdXR0b25TdGF0ZSgpXG4gIH1cblxuICAvLyBIYW5kbGUgY2l0eSBzZWxlY3Rpb24gZnJvbSBjaXR5IHNlbGVjdG9yXG4gIHByaXZhdGUgaGFuZGxlQ2l0eVNlbGVjdGVkKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnRcbiAgICBjb25zb2xlLmxvZygnTXVsdGktY2l0eTogUmVjZWl2ZWQgY2l0eS1zZWxlY3RvcjpjaXR5LXNlbGVjdGVkIGV2ZW50JywgY3VzdG9tRXZlbnQuZGV0YWlsKVxuICAgIGNvbnN0IHsgc2VnbWVudElkLCBjaXR5VHlwZSwgY2l0eU5hbWUgfSA9IGN1c3RvbUV2ZW50LmRldGFpbFxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdNdWx0aS1jaXR5OiBDdXJyZW50IHNlZ21lbnRzIGJlZm9yZSB1cGRhdGU6JywgSlNPTi5zdHJpbmdpZnkodGhpcy5zZWdtZW50c1ZhbHVlKSlcbiAgICBcbiAgICBjb25zdCBzZWdtZW50SW5kZXggPSB0aGlzLnNlZ21lbnRzVmFsdWUuZmluZEluZGV4KHNlZyA9PiBzZWcuaWQgPT09IHNlZ21lbnRJZClcbiAgICBcbiAgICBpZiAoc2VnbWVudEluZGV4ICE9PSAtMSkge1xuICAgICAgY29uc29sZS5sb2coYE11bHRpLWNpdHk6IEZvdW5kIHNlZ21lbnQgJHtzZWdtZW50SWR9LCB1cGRhdGluZyAke2NpdHlUeXBlfSB0byAke2NpdHlOYW1lfWApXG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBhIG5ldyBhcnJheSB3aXRoIHVwZGF0ZWQgc2VnbWVudCB0byB0cmlnZ2VyIFN0aW11bHVzIHJlYWN0aXZpdHlcbiAgICAgIHRoaXMuc2VnbWVudHNWYWx1ZSA9IHRoaXMuc2VnbWVudHNWYWx1ZS5tYXAoKHNlZywgaW5kZXgpID0+IHtcbiAgICAgICAgaWYgKGluZGV4ID09PSBzZWdtZW50SW5kZXgpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnTXVsdGktY2l0eTogU2VnbWVudCBiZWZvcmUgdXBkYXRlOicsIEpTT04uc3RyaW5naWZ5KHNlZykpXG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgdXBkYXRlZFNlZ21lbnQgPSB7XG4gICAgICAgICAgICAuLi5zZWcsXG4gICAgICAgICAgICBkZXBhcnR1cmVDaXR5OiBjaXR5VHlwZSA9PT0gJ2RlcGFydHVyZScgPyBjaXR5TmFtZSA6IHNlZy5kZXBhcnR1cmVDaXR5LFxuICAgICAgICAgICAgZGVzdGluYXRpb25DaXR5OiBjaXR5VHlwZSA9PT0gJ2Rlc3RpbmF0aW9uJyA/IGNpdHlOYW1lIDogc2VnLmRlc3RpbmF0aW9uQ2l0eVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBjb25zb2xlLmxvZygnTXVsdGktY2l0eTogU2VnbWVudCBhZnRlciB1cGRhdGU6JywgSlNPTi5zdHJpbmdpZnkodXBkYXRlZFNlZ21lbnQpKVxuICAgICAgICAgIHJldHVybiB1cGRhdGVkU2VnbWVudFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZWdcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdNdWx0aS1jaXR5OiBBbGwgc2VnbWVudHMgYWZ0ZXIgdXBkYXRlOicsIEpTT04uc3RyaW5naWZ5KHRoaXMuc2VnbWVudHNWYWx1ZSkpXG4gICAgICBjb25zb2xlLmxvZygnTXVsdGktY2l0eTogU2VnbWVudCB1cGRhdGVkLCByZW5kZXIgd2lsbCBiZSB0cmlnZ2VyZWQgYnkgdmFsdWVDaGFuZ2VkJylcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKCdNdWx0aS1jaXR5OiBTZWdtZW50IG5vdCBmb3VuZDonLCBzZWdtZW50SWQpXG4gICAgICBjb25zb2xlLndhcm4oJ011bHRpLWNpdHk6IEF2YWlsYWJsZSBzZWdtZW50IElEczonLCB0aGlzLnNlZ21lbnRzVmFsdWUubWFwKHMgPT4gcy5pZCkpXG4gICAgfVxuICB9XG5cbiAgLy8gSGFuZGxlIGRhdGUgc2VsZWN0aW9uIGZyb20gZGF0ZSBwaWNrZXJcbiAgcHJpdmF0ZSBoYW5kbGVEYXRlU2VsZWN0ZWQoZXZlbnQ6IEN1c3RvbUV2ZW50KTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ011bHRpLWNpdHk6IFJlY2VpdmVkIGRhdGUtcGlja2VyOmRhdGUtc2VsZWN0ZWQgZXZlbnQnLCBldmVudC5kZXRhaWwpXG4gICAgY29uc3QgeyBzZWdtZW50SWQsIGRhdGUgfSA9IGV2ZW50LmRldGFpbFxuICAgIFxuICAgIGNvbnN0IHNlZ21lbnRJbmRleCA9IHRoaXMuc2VnbWVudHNWYWx1ZS5maW5kSW5kZXgoc2VnID0+IHNlZy5pZCA9PT0gc2VnbWVudElkKVxuICAgIFxuICAgIGlmIChzZWdtZW50SW5kZXggIT09IC0xKSB7XG4gICAgICBjb25zb2xlLmxvZyhgTXVsdGktY2l0eTogVXBkYXRpbmcgc2VnbWVudCAke3NlZ21lbnRJZH0gZGF0ZSB0byAke2RhdGV9YClcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIGEgbmV3IGFycmF5IHdpdGggdXBkYXRlZCBzZWdtZW50IHRvIHRyaWdnZXIgU3RpbXVsdXMgcmVhY3Rpdml0eVxuICAgICAgdGhpcy5zZWdtZW50c1ZhbHVlID0gdGhpcy5zZWdtZW50c1ZhbHVlLm1hcCgoc2VnLCBpbmRleCkgPT4ge1xuICAgICAgICBpZiAoaW5kZXggPT09IHNlZ21lbnRJbmRleCkge1xuICAgICAgICAgIHJldHVybiB7IC4uLnNlZywgZGF0ZSB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlZ1xuICAgICAgfSlcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ011bHRpLWNpdHk6IFNlZ21lbnQgZGF0ZSB1cGRhdGVkJylcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKCdNdWx0aS1jaXR5OiBTZWdtZW50IG5vdCBmb3VuZDonLCBzZWdtZW50SWQpXG4gICAgfVxuICB9XG5cbiAgLy8gXHU2REZCXHU1MkEwXHU2NUIwXHU3Njg0XHU4ODRDXHU3QTBCXHU2QkI1XG4gIGFkZFNlZ21lbnQoKTogdm9pZCB7XG4gICAgLy8gXHU2NzAwXHU1OTFBXHU2NTJGXHU2MzAxOFx1NEUyQVx1ODg0Q1x1N0EwQlx1NkJCNVxuICAgIGlmICh0aGlzLnNlZ21lbnRzVmFsdWUubGVuZ3RoID49IDgpIHtcbiAgICAgIGFsZXJ0KFwiXHU2NzAwXHU1OTFBXHU2NTJGXHU2MzAxOFx1NEUyQVx1ODg0Q1x1N0EwQlx1NkJCNVwiKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgbGFzdFNlZ21lbnQgPSB0aGlzLnNlZ21lbnRzVmFsdWVbdGhpcy5zZWdtZW50c1ZhbHVlLmxlbmd0aCAtIDFdXG4gICAgXG4gICAgLy8gXHU2NUIwXHU4ODRDXHU3QTBCXHU2QkI1XHU3Njg0XHU1MUZBXHU1M0QxXHU1NzMwXHU5RUQ4XHU4QkE0XHU0RTNBXHU0RTBBXHU0RTAwXHU2QkI1XHU3Njg0XHU3NkVFXHU3Njg0XHU1NzMwXG4gICAgY29uc3QgbmV3U2VnbWVudDogU2VnbWVudCA9IHtcbiAgICAgIGlkOiB0aGlzLmdlbmVyYXRlSWQoKSxcbiAgICAgIGRlcGFydHVyZUNpdHk6IGxhc3RTZWdtZW50ID8gbGFzdFNlZ21lbnQuZGVzdGluYXRpb25DaXR5IDogXCJcdTUzMTdcdTRFQUNcIixcbiAgICAgIGRlc3RpbmF0aW9uQ2l0eTogXCJcdTRFMEFcdTZENzdcIixcbiAgICAgIGRhdGU6IGxhc3RTZWdtZW50IFxuICAgICAgICA/IHRoaXMuZm9ybWF0RGF0ZShuZXcgRGF0ZShuZXcgRGF0ZShsYXN0U2VnbWVudC5kYXRlKS5nZXRUaW1lKCkgKyAyNCAqIDYwICogNjAgKiAxMDAwKSlcbiAgICAgICAgOiB0aGlzLmZvcm1hdERhdGUobmV3IERhdGUoKSlcbiAgICB9XG5cbiAgICB0aGlzLnNlZ21lbnRzVmFsdWUgPSBbLi4udGhpcy5zZWdtZW50c1ZhbHVlLCBuZXdTZWdtZW50XVxuICAgIHRoaXMucmVuZGVyKClcbiAgICB0aGlzLnVwZGF0ZUFkZEJ1dHRvblN0YXRlKClcbiAgfVxuXG4gIC8vIFx1NTIyMFx1OTY2NFx1ODg0Q1x1N0EwQlx1NkJCNVxuICByZW1vdmVTZWdtZW50KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBzZWdtZW50SWQgPSBidXR0b24uZGF0YXNldC5zZWdtZW50SWRcblxuICAgIC8vIFx1ODFGM1x1NUMxMVx1NEZERFx1NzU1OTJcdTRFMkFcdTg4NENcdTdBMEJcdTZCQjVcbiAgICBpZiAodGhpcy5zZWdtZW50c1ZhbHVlLmxlbmd0aCA8PSAyKSB7XG4gICAgICBhbGVydChcIlx1ODFGM1x1NUMxMVx1OTcwMFx1ODk4MVx1NEZERFx1NzU1OTJcdTRFMkFcdTg4NENcdTdBMEJcdTZCQjVcIilcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMuc2VnbWVudHNWYWx1ZSA9IHRoaXMuc2VnbWVudHNWYWx1ZS5maWx0ZXIoc2VnID0+IHNlZy5pZCAhPT0gc2VnbWVudElkKVxuICAgIHRoaXMucmVuZGVyKClcbiAgICB0aGlzLnVwZGF0ZUFkZEJ1dHRvblN0YXRlKClcbiAgfVxuXG4gIC8vIFx1NjZGNFx1NjVCMFx1ODg0Q1x1N0EwQlx1NkJCNVx1NzY4NFx1NTdDRVx1NUUwMlxuICB1cGRhdGVDaXR5KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGlucHV0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3Qgc2VnbWVudElkID0gaW5wdXQuZGF0YXNldC5zZWdtZW50SWRcbiAgICBjb25zdCBjaXR5VHlwZSA9IGlucHV0LmRhdGFzZXQuY2l0eVR5cGUgLy8gJ2RlcGFydHVyZScgb3IgJ2Rlc3RpbmF0aW9uJ1xuXG4gICAgY29uc3Qgc2VnbWVudCA9IHRoaXMuc2VnbWVudHNWYWx1ZS5maW5kKHNlZyA9PiBzZWcuaWQgPT09IHNlZ21lbnRJZClcbiAgICBpZiAoc2VnbWVudCkge1xuICAgICAgaWYgKGNpdHlUeXBlID09PSAnZGVwYXJ0dXJlJykge1xuICAgICAgICBzZWdtZW50LmRlcGFydHVyZUNpdHkgPSBpbnB1dC52YWx1ZVxuICAgICAgfSBlbHNlIGlmIChjaXR5VHlwZSA9PT0gJ2Rlc3RpbmF0aW9uJykge1xuICAgICAgICBzZWdtZW50LmRlc3RpbmF0aW9uQ2l0eSA9IGlucHV0LnZhbHVlXG4gICAgICB9XG4gICAgICB0aGlzLnVwZGF0ZUhpZGRlbklucHV0KClcbiAgICB9XG4gIH1cblxuICAvLyBcdTY2RjRcdTY1QjBcdTg4NENcdTdBMEJcdTZCQjVcdTc2ODRcdTY1RTVcdTY3MUZcbiAgdXBkYXRlRGF0ZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBpbnB1dCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IHNlZ21lbnRJZCA9IGlucHV0LmRhdGFzZXQuc2VnbWVudElkXG5cbiAgICBjb25zdCBzZWdtZW50ID0gdGhpcy5zZWdtZW50c1ZhbHVlLmZpbmQoc2VnID0+IHNlZy5pZCA9PT0gc2VnbWVudElkKVxuICAgIGlmIChzZWdtZW50KSB7XG4gICAgICBzZWdtZW50LmRhdGUgPSBpbnB1dC52YWx1ZVxuICAgICAgdGhpcy51cGRhdGVIaWRkZW5JbnB1dCgpXG4gICAgfVxuICB9XG5cbiAgLy8gXHU2MjUzXHU1RjAwXHU1N0NFXHU1RTAyXHU5MDA5XHU2MkU5XHU1NjY4XG4gIG9wZW5DaXR5U2VsZWN0b3IoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHNlZ21lbnRJZCA9IGJ1dHRvbi5kYXRhc2V0LnNlZ21lbnRJZFxuICAgIGNvbnN0IGNpdHlUeXBlID0gYnV0dG9uLmRhdGFzZXQuY2l0eVR5cGVcblxuICAgIGNvbnNvbGUubG9nKGBNdWx0aS1jaXR5OiBPcGVuaW5nIGNpdHkgc2VsZWN0b3IgZm9yIHNlZ21lbnQgJHtzZWdtZW50SWR9LCBjaXR5VHlwZSAke2NpdHlUeXBlfWApXG4gICAgXG4gICAgLy8gXHU4OUU2XHU1M0QxXHU1N0NFXHU1RTAyXHU5MDA5XHU2MkU5XHU1NjY4XHU3Njg0XHU4MUVBXHU1QjlBXHU0RTQ5XHU0RThCXHU0RUY2XG4gICAgY29uc3QgY3VzdG9tRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ211bHRpLWNpdHk6b3Blbi1jaXR5LXNlbGVjdG9yJywge1xuICAgICAgZGV0YWlsOiB7IHNlZ21lbnRJZCwgY2l0eVR5cGUgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICB9KVxuICAgIHRoaXMuZWxlbWVudC5kaXNwYXRjaEV2ZW50KGN1c3RvbUV2ZW50KVxuICB9XG5cbiAgLy8gXHU2MjUzXHU1RjAwXHU2NUU1XHU2NzFGXHU5MDA5XHU2MkU5XHU1NjY4XG4gIG9wZW5EYXRlUGlja2VyKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBzZWdtZW50SWQgPSBidXR0b24uZGF0YXNldC5zZWdtZW50SWRcblxuICAgIC8vIFx1ODlFNlx1NTNEMVx1NjVFNVx1NjcxRlx1OTAwOVx1NjJFOVx1NTY2OFx1NzY4NFx1ODFFQVx1NUI5QVx1NEU0OVx1NEU4Qlx1NEVGNlxuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdtdWx0aS1jaXR5Om9wZW4tZGF0ZS1waWNrZXInLCB7XG4gICAgICBkZXRhaWw6IHsgc2VnbWVudElkIH0sXG4gICAgICBidWJibGVzOiB0cnVlXG4gICAgfSlcbiAgICB0aGlzLmVsZW1lbnQuZGlzcGF0Y2hFdmVudChjdXN0b21FdmVudClcbiAgfVxuXG4gIC8vIFx1NkUzMlx1NjdEM1x1NjI0MFx1NjcwOVx1ODg0Q1x1N0EwQlx1NkJCNVxuICBwcml2YXRlIHJlbmRlcigpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaGFzU2VnbWVudHNDb250YWluZXJUYXJnZXQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiTXVsdGlDaXR5OiBDYW5ub3QgcmVuZGVyLCBzZWdtZW50c0NvbnRhaW5lciBub3QgYXZhaWxhYmxlXCIpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ011bHRpLWNpdHk6IHJlbmRlcigpIGNhbGxlZCB3aXRoIHNlZ21lbnRzOicsIEpTT04uc3RyaW5naWZ5KHRoaXMuc2VnbWVudHNWYWx1ZSkpXG4gICAgXG4gICAgdGhpcy5zZWdtZW50c0NvbnRhaW5lclRhcmdldC5pbm5lckhUTUwgPSBcIlwiXG5cbiAgICB0aGlzLnNlZ21lbnRzVmFsdWUuZm9yRWFjaCgoc2VnbWVudCwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGBNdWx0aS1jaXR5OiBDcmVhdGluZyBlbGVtZW50IGZvciBzZWdtZW50ICR7aW5kZXh9OmAsIEpTT04uc3RyaW5naWZ5KHNlZ21lbnQpKVxuICAgICAgY29uc3Qgc2VnbWVudEVsZW1lbnQgPSB0aGlzLmNyZWF0ZVNlZ21lbnRFbGVtZW50KHNlZ21lbnQsIGluZGV4KVxuICAgICAgdGhpcy5zZWdtZW50c0NvbnRhaW5lclRhcmdldC5hcHBlbmRDaGlsZChzZWdtZW50RWxlbWVudClcbiAgICB9KVxuXG4gICAgdGhpcy51cGRhdGVIaWRkZW5JbnB1dCgpXG4gIH1cblxuICAvLyBcdTUyMUJcdTVFRkFcdTUzNTVcdTRFMkFcdTg4NENcdTdBMEJcdTZCQjVcdTUxNDNcdTdEMjBcbiAgcHJpdmF0ZSBjcmVhdGVTZWdtZW50RWxlbWVudChzZWdtZW50OiBTZWdtZW50LCBpbmRleDogbnVtYmVyKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnNvbGUubG9nKGBNdWx0aS1jaXR5OiBjcmVhdGVTZWdtZW50RWxlbWVudCBjYWxsZWQgZm9yIHNlZ21lbnQgJHtzZWdtZW50LmlkfTpgLCB7XG4gICAgICBkZXBhcnR1cmVDaXR5OiBzZWdtZW50LmRlcGFydHVyZUNpdHksXG4gICAgICBkZXN0aW5hdGlvbkNpdHk6IHNlZ21lbnQuZGVzdGluYXRpb25DaXR5LFxuICAgICAgZGF0ZTogc2VnbWVudC5kYXRlXG4gICAgfSlcbiAgICBcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXG4gICAgZGl2LmNsYXNzTmFtZSA9IFwiYm9yZGVyLWIgYm9yZGVyLWdyYXktMTAwIHB5LTRcIlxuICAgIGRpdi5kYXRhc2V0Lm11bHRpQ2l0eVRhcmdldCA9IFwic2VnbWVudFwiXG5cbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoc2VnbWVudC5kYXRlKVxuICAgIGNvbnN0IHdlZWtkYXkgPSB0aGlzLmdldFdlZWtkYXkoZGF0ZSlcblxuICAgIGRpdi5pbm5lckhUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTNcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdy01IGgtNSByb3VuZGVkLWZ1bGwgYmctYmx1ZS01MDAgdGV4dC13aGl0ZSB0ZXh0LXhzIGZvbnQtYm9sZFwiPlxuICAgICAgICAgICAgJHtpbmRleCArIDF9XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1zbSB0ZXh0LWdyYXktNTAwXCI+XHU3QjJDJHt0aGlzLm51bWJlclRvQ2hpbmVzZShpbmRleCArIDEpfVx1N0EwQjwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgICR7dGhpcy5zZWdtZW50c1ZhbHVlLmxlbmd0aCA+IDIgPyBgXG4gICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgZGF0YS1hY3Rpb249XCJjbGljay0+bXVsdGktY2l0eSNyZW1vdmVTZWdtZW50XCJcbiAgICAgICAgICAgIGRhdGEtc2VnbWVudC1pZD1cIiR7c2VnbWVudC5pZH1cIlxuICAgICAgICAgICAgY2xhc3M9XCJ0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtcmVkLTUwMFwiPlxuICAgICAgICAgICAgPHN2ZyBjbGFzcz1cInctNSBoLTVcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyMCAyMFwiPlxuICAgICAgICAgICAgICA8cGF0aCBmaWxsLXJ1bGU9XCJldmVub2RkXCJcbiAgICAgICAgICAgICAgICBkPVwiTTQuMjkzIDQuMjkzYTEgMSAwIDAxMS40MTQgMEwxMCA4LjU4Nmw0LjI5My00LjI5M2ExIDEgMCAxMTEuNDE0IDEuNDE0TDExLjQxNCAxMGw0LjI5MyA0LjI5M2ExIDEgMFxuICAgICAgICAgICAgICAgICAgLTEuNDE0IDEuNDE0TDEwIDExLjQxNGwtNC4yOTMgNC4yOTNhMSAxIDAgMDEtMS40MTQtMS40MTRMOC41ODYgMTAgNC4yOTMgNS43MDdhMSAxIDAgMDEwLTEuNDE0elwiXG4gICAgICAgICAgICAgICAgY2xpcC1ydWxlPVwiZXZlbm9kZFwiLz5cbiAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICBgIDogJyd9XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGRpdiBjbGFzcz1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxuICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgIGRhdGEtYWN0aW9uPVwiY2xpY2stPm11bHRpLWNpdHkjb3BlbkNpdHlTZWxlY3RvclwiXG4gICAgICAgICAgZGF0YS1zZWdtZW50LWlkPVwiJHtzZWdtZW50LmlkfVwiXG4gICAgICAgICAgZGF0YS1jaXR5LXR5cGU9XCJkZXBhcnR1cmVcIlxuICAgICAgICAgIGNsYXNzPVwiZmxleC0xIHRleHQtbGVmdFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LVszMnB4XSBmb250LWJvbGQgbGVhZGluZy10aWdodFwiPiR7c2VnbWVudC5kZXBhcnR1cmVDaXR5fTwvZGl2PlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJteC00IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgPGltZyBzcmM9XCIke3RoaXMuc3dpdGNoSWNvblVybFZhbHVlfVwiIGNsYXNzPVwidy0xMiBoLTEyXCIgYWx0PVwiXHU1MjA3XHU2MzYyXCIgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIFxuICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgIGRhdGEtYWN0aW9uPVwiY2xpY2stPm11bHRpLWNpdHkjb3BlbkNpdHlTZWxlY3RvclwiXG4gICAgICAgICAgZGF0YS1zZWdtZW50LWlkPVwiJHtzZWdtZW50LmlkfVwiXG4gICAgICAgICAgZGF0YS1jaXR5LXR5cGU9XCJkZXN0aW5hdGlvblwiXG4gICAgICAgICAgY2xhc3M9XCJmbGV4LTEgdGV4dC1yaWdodFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LVszMnB4XSBmb250LWJvbGQgbGVhZGluZy10aWdodFwiPiR7c2VnbWVudC5kZXN0aW5hdGlvbkNpdHl9PC9kaXY+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxidXR0b24gXG4gICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICBkYXRhLWFjdGlvbj1cImNsaWNrLT5tdWx0aS1jaXR5I29wZW5EYXRlUGlja2VyXCJcbiAgICAgICAgZGF0YS1zZWdtZW50LWlkPVwiJHtzZWdtZW50LmlkfVwiXG4gICAgICAgIGNsYXNzPVwibXQtMiB0ZXh0LWxlZnRcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtbGcgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgICR7ZGF0ZS5nZXRNb250aCgpICsgMX1cdTY3MDgke2RhdGUuZ2V0RGF0ZSgpfVx1NjVFNSAke3dlZWtkYXl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9idXR0b24+XG4gICAgYFxuICAgIFxuICAgIGNvbnNvbGUubG9nKGBNdWx0aS1jaXR5OiBDcmVhdGVkIEhUTUwgZm9yIHNlZ21lbnQgJHtzZWdtZW50LmlkfSwgZGVwYXJ0dXJlOiAke3NlZ21lbnQuZGVwYXJ0dXJlQ2l0eX0sIGRlc3RpbmF0aW9uOiAke3NlZ21lbnQuZGVzdGluYXRpb25DaXR5fWApXG5cbiAgICByZXR1cm4gZGl2XG4gIH1cblxuICAvLyBcdTY2RjRcdTY1QjBcdTZERkJcdTUyQTBcdTYzMDlcdTk0QUVcdTcyQjZcdTYwMDFcbiAgcHJpdmF0ZSB1cGRhdGVBZGRCdXR0b25TdGF0ZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaGFzQWRkQnV0dG9uVGFyZ2V0KSB7XG4gICAgICBjb25zb2xlLmxvZyhcIk11bHRpQ2l0eTogQ2Fubm90IHVwZGF0ZSBhZGQgYnV0dG9uIHN0YXRlLCBidXR0b24gbm90IGF2YWlsYWJsZVwiKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLnNlZ21lbnRzVmFsdWUubGVuZ3RoID49IDgpIHtcbiAgICAgIHRoaXMuYWRkQnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJvcGFjaXR5LTUwXCIsIFwiY3Vyc29yLW5vdC1hbGxvd2VkXCIpXG4gICAgICB0aGlzLmFkZEJ1dHRvblRhcmdldC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hZGRCdXR0b25UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcIm9wYWNpdHktNTBcIiwgXCJjdXJzb3Itbm90LWFsbG93ZWRcIilcbiAgICAgIHRoaXMuYWRkQnV0dG9uVGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpXG4gICAgfVxuICB9XG5cbiAgLy8gXHU2NkY0XHU2NUIwXHU5NjkwXHU4NUNGXHU3Njg0XHU4ODY4XHU1MzU1XHU4RjkzXHU1MTY1XG4gIHByaXZhdGUgdXBkYXRlSGlkZGVuSW5wdXQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaGFzSGlkZGVuU2VnbWVudHNJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5oaWRkZW5TZWdtZW50c0lucHV0VGFyZ2V0LnZhbHVlID0gSlNPTi5zdHJpbmdpZnkodGhpcy5zZWdtZW50c1ZhbHVlKVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1NzUxRlx1NjIxMFx1NTUyRlx1NEUwMElEXG4gIHByaXZhdGUgZ2VuZXJhdGVJZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgc2VnbWVudC0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDExKX1gXG4gIH1cblxuICAvLyBcdTY4M0NcdTVGMEZcdTUzMTZcdTY1RTVcdTY3MUZcbiAgcHJpdmF0ZSBmb3JtYXREYXRlKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKClcbiAgICBjb25zdCBtb250aCA9IFN0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpXG4gICAgY29uc3QgZGF5ID0gU3RyaW5nKGRhdGUuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpXG4gICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fWBcbiAgfVxuXG4gIC8vIFx1ODNCN1x1NTNENlx1NjYxRlx1NjcxRlx1NTFFMFxuICBwcml2YXRlIGdldFdlZWtkYXkoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gICAgY29uc3Qgd2Vla2RheXMgPSBbJ1x1NTQ2OFx1NjVFNScsICdcdTU0NjhcdTRFMDAnLCAnXHU1NDY4XHU0RThDJywgJ1x1NTQ2OFx1NEUwOScsICdcdTU0NjhcdTU2REInLCAnXHU1NDY4XHU0RTk0JywgJ1x1NTQ2OFx1NTE2RCddXG4gICAgcmV0dXJuIHdlZWtkYXlzW2RhdGUuZ2V0RGF5KCldXG4gIH1cblxuICAvLyBcdTY1NzBcdTVCNTdcdThGNkNcdTRFMkRcdTY1ODdcbiAgcHJpdmF0ZSBudW1iZXJUb0NoaW5lc2UobnVtOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGNvbnN0IGNoaW5lc2UgPSBbJ1x1NEUwMCcsICdcdTRFOEMnLCAnXHU0RTA5JywgJ1x1NTZEQicsICdcdTRFOTQnLCAnXHU1MTZEJywgJ1x1NEUwMycsICdcdTUxNkInXVxuICAgIHJldHVybiBjaGluZXNlW251bSAtIDFdIHx8IG51bS50b1N0cmluZygpXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcIm1vZGFsXCIsXG4gICAgXCJvdmVybGF5XCIsXG4gICAgXCJmbGlnaHRQcmVmZXJlbmNlVGFiXCIsXG4gICAgXCJhaXJsaW5lQ29tcGFueVRhYlwiLFxuICAgIFwiYWlycG9ydFRhYlwiLFxuICAgIFwiZGVwYXJ0dXJlVGltZVRhYlwiLFxuICAgIFwidHJhbnNmZXJDaXR5VGFiXCIsXG4gICAgXCJ0cmFuc2ZlclRpbWVzVGFiXCIsXG4gICAgXCJ0cmFuc2ZlckR1cmF0aW9uVGFiXCIsXG4gICAgXCJ0b3RhbER1cmF0aW9uVGFiXCIsXG4gICAgXCJzZWF0Q2xhc3NUYWJcIixcbiAgICBcImFpcmNyYWZ0TW9kZWxUYWJcIixcbiAgICBcInRpY2tldENhbmNlbGxhdGlvblRhYlwiLFxuICAgIFwiZmxpZ2h0UHJlZmVyZW5jZVNlY3Rpb25cIixcbiAgICBcImFpcmxpbmVDb21wYW55U2VjdGlvblwiLFxuICAgIFwiYWlycG9ydFNlY3Rpb25cIixcbiAgICBcImRlcGFydHVyZVRpbWVTZWN0aW9uXCIsXG4gICAgXCJ0cmFuc2ZlckNpdHlTZWN0aW9uXCIsXG4gICAgXCJ0cmFuc2ZlclRpbWVzU2VjdGlvblwiLFxuICAgIFwidHJhbnNmZXJEdXJhdGlvblNlY3Rpb25cIixcbiAgICBcInRvdGFsRHVyYXRpb25TZWN0aW9uXCIsXG4gICAgXCJzZWF0Q2xhc3NTZWN0aW9uXCIsXG4gICAgXCJhaXJjcmFmdE1vZGVsU2VjdGlvblwiLFxuICAgIFwidGlja2V0Q2FuY2VsbGF0aW9uU2VjdGlvblwiLFxuICAgIFwicmVzdWx0Q291bnRcIixcbiAgICBcImRpcmVjdEZsaWdodENoZWNrYm94XCIsXG4gICAgXCJub1RyYW5zaXRDaGVja2JveFwiLFxuICAgIFwiaW5jbHVkZUNoZWNrZWRMdWdnYWdlQ2hlY2tib3hcIixcbiAgICBcIm5vU2hhcmVkRmxpZ2h0Q2hlY2tib3hcIixcbiAgICBcImRpc2NvdW50UHJpY2VDaGVja2JveFwiLFxuICAgIFwicmVzZXRCdXR0b25cIixcbiAgICBcImNvbmZpcm1CdXR0b25cIixcbiAgICBcImZpbHRlckJhZGdlXCIsXG4gICAgXCJzZWxlY3RlZEZpbHRlcnNDb250YWluZXJcIixcbiAgICBcInNlbGVjdGVkRmlsdGVyc0xpc3RcIixcbiAgICAvLyBDYXJkIHRhcmdldHMgZm9yIGdyaWQgbGF5b3V0XG4gICAgXCJkaXJlY3RGbGlnaHRDYXJkXCIsXG4gICAgXCJjaGVja2VkTHVnZ2FnZUNhcmRcIixcbiAgICBcIm5vU2hhcmVkRmxpZ2h0Q2FyZFwiLFxuICAgIFwibm9UcmFuc2l0Q2FyZFwiLFxuICAgIFwiZGlzY291bnRQcmljZUNhcmRcIixcbiAgICAvLyBRdWljayBmaWx0ZXIgYnV0dG9uIHRhcmdldHNcbiAgICBcInF1aWNrRGlyZWN0RmxpZ2h0XCIsXG4gICAgXCJxdWlja05vU2hhcmVkRmxpZ2h0XCIsXG4gICAgXCJxdWlja0NoZWNrZWRMdWdnYWdlXCIsXG4gICAgXCJxdWlja05vVHJhbnNpdFwiLFxuICAgIFwicXVpY2tEaXNjb3VudFByaWNlXCJcbiAgXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgb3ZlcmxheVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBmbGlnaHRQcmVmZXJlbmNlVGFiVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGFpcmxpbmVDb21wYW55VGFiVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGFpcnBvcnRUYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVwYXJ0dXJlVGltZVRhYlRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0cmFuc2ZlckNpdHlUYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdHJhbnNmZXJUaW1lc1RhYlRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0cmFuc2ZlckR1cmF0aW9uVGFiVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRvdGFsRHVyYXRpb25UYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VhdENsYXNzVGFiVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGFpcmNyYWZ0TW9kZWxUYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdGlja2V0Q2FuY2VsbGF0aW9uVGFiVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGZsaWdodFByZWZlcmVuY2VTZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGFpcmxpbmVDb21wYW55U2VjdGlvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBhaXJwb3J0U2VjdGlvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkZXBhcnR1cmVUaW1lU2VjdGlvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0cmFuc2ZlckNpdHlTZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRyYW5zZmVyVGltZXNTZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRyYW5zZmVyRHVyYXRpb25TZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRvdGFsRHVyYXRpb25TZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlYXRDbGFzc1NlY3Rpb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgYWlyY3JhZnRNb2RlbFNlY3Rpb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdGlja2V0Q2FuY2VsbGF0aW9uU2VjdGlvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSByZXN1bHRDb3VudFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkaXJlY3RGbGlnaHRDaGVja2JveFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IG5vVHJhbnNpdENoZWNrYm94VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaW5jbHVkZUNoZWNrZWRMdWdnYWdlQ2hlY2tib3hUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBub1NoYXJlZEZsaWdodENoZWNrYm94VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGlzY291bnRQcmljZUNoZWNrYm94VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgcmVzZXRCdXR0b25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY29uZmlybUJ1dHRvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBmaWx0ZXJCYWRnZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzZWxlY3RlZEZpbHRlcnNDb250YWluZXJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VsZWN0ZWRGaWx0ZXJzTGlzdFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkaXJlY3RGbGlnaHRDYXJkVGFyZ2V0PzogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjaGVja2VkTHVnZ2FnZUNhcmRUYXJnZXQ/OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IG5vU2hhcmVkRmxpZ2h0Q2FyZFRhcmdldD86IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbm9UcmFuc2l0Q2FyZFRhcmdldD86IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGlzY291bnRQcmljZUNhcmRUYXJnZXQ/OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHF1aWNrRGlyZWN0RmxpZ2h0VGFyZ2V0PzogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBxdWlja05vU2hhcmVkRmxpZ2h0VGFyZ2V0PzogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBxdWlja0NoZWNrZWRMdWdnYWdlVGFyZ2V0PzogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBxdWlja05vVHJhbnNpdFRhcmdldD86IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgcXVpY2tEaXNjb3VudFByaWNlVGFyZ2V0PzogSFRNTEVsZW1lbnRcblxuICBkZWNsYXJlIGN1cnJlbnRUYWI6IHN0cmluZ1xuICBkZWNsYXJlIGZpbHRlcnM6IHtcbiAgICBkaXJlY3RGbGlnaHQ6IGJvb2xlYW5cbiAgICBub1RyYW5zaXQ6IGJvb2xlYW5cbiAgICBpbmNsdWRlQ2hlY2tlZEx1Z2dhZ2U6IGJvb2xlYW5cbiAgICBub1NoYXJlZEZsaWdodDogYm9vbGVhblxuICAgIGRpc2NvdW50UHJpY2U6IGJvb2xlYW5cbiAgICBhaXJsaW5lczogU2V0PHN0cmluZz5cbiAgICBkZXBhcnR1cmVBaXJwb3J0czogU2V0PHN0cmluZz5cbiAgICBhcnJpdmFsQWlycG9ydHM6IFNldDxzdHJpbmc+XG4gICAgZGVwYXJ0dXJlVGltZVJhbmdlczogU2V0PHN0cmluZz5cbiAgICBhaXJjcmFmdE1vZGVsczogU2V0PHN0cmluZz5cbiAgfVxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJGbGlnaHRGaWx0ZXIgY29udHJvbGxlciBjb25uZWN0ZWRcIilcbiAgICB0aGlzLmN1cnJlbnRUYWIgPSBcImZsaWdodFByZWZlcmVuY2VcIlxuICAgIHRoaXMuaW5pdGlhbGl6ZUZpbHRlcnMoKVxuICB9XG5cbiAgaW5pdGlhbGl6ZUZpbHRlcnMoKTogdm9pZCB7XG4gICAgdGhpcy5maWx0ZXJzID0ge1xuICAgICAgZGlyZWN0RmxpZ2h0OiBmYWxzZSxcbiAgICAgIG5vVHJhbnNpdDogZmFsc2UsXG4gICAgICBpbmNsdWRlQ2hlY2tlZEx1Z2dhZ2U6IGZhbHNlLFxuICAgICAgbm9TaGFyZWRGbGlnaHQ6IGZhbHNlLFxuICAgICAgZGlzY291bnRQcmljZTogZmFsc2UsXG4gICAgICBhaXJsaW5lczogbmV3IFNldCgpLFxuICAgICAgZGVwYXJ0dXJlQWlycG9ydHM6IG5ldyBTZXQoKSxcbiAgICAgIGFycml2YWxBaXJwb3J0czogbmV3IFNldCgpLFxuICAgICAgZGVwYXJ0dXJlVGltZVJhbmdlczogbmV3IFNldCgpLFxuICAgICAgYWlyY3JhZnRNb2RlbHM6IG5ldyBTZXQoKVxuICAgIH1cbiAgfVxuXG4gIG9wZW5Nb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICB0aGlzLm92ZXJsYXlUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiXG4gIH1cblxuICBjbG9zZU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgIHRoaXMub3ZlcmxheVRhcmdldC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiXCJcbiAgfVxuXG4gIHNlbGVjdFRhYihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgdGFiTmFtZSA9IGJ1dHRvbi5kYXRhc2V0LnRhYlxuICAgIGlmICghdGFiTmFtZSkgcmV0dXJuXG5cbiAgICB0aGlzLmN1cnJlbnRUYWIgPSB0YWJOYW1lXG5cbiAgICAvLyBVcGRhdGUgdGFiIGJ1dHRvbnNcbiAgICBjb25zdCBhbGxUYWJzID0gW1xuICAgICAgdGhpcy5mbGlnaHRQcmVmZXJlbmNlVGFiVGFyZ2V0LFxuICAgICAgdGhpcy5haXJsaW5lQ29tcGFueVRhYlRhcmdldCxcbiAgICAgIHRoaXMuYWlycG9ydFRhYlRhcmdldCxcbiAgICAgIHRoaXMuZGVwYXJ0dXJlVGltZVRhYlRhcmdldCxcbiAgICAgIHRoaXMudHJhbnNmZXJDaXR5VGFiVGFyZ2V0LFxuICAgICAgdGhpcy50cmFuc2ZlclRpbWVzVGFiVGFyZ2V0LFxuICAgICAgdGhpcy50cmFuc2ZlckR1cmF0aW9uVGFiVGFyZ2V0LFxuICAgICAgdGhpcy50b3RhbER1cmF0aW9uVGFiVGFyZ2V0LFxuICAgICAgdGhpcy5zZWF0Q2xhc3NUYWJUYXJnZXQsXG4gICAgICB0aGlzLmFpcmNyYWZ0TW9kZWxUYWJUYXJnZXQsXG4gICAgICB0aGlzLnRpY2tldENhbmNlbGxhdGlvblRhYlRhcmdldFxuICAgIF1cblxuICAgIGFsbFRhYnMuZm9yRWFjaCh0YWIgPT4ge1xuICAgICAgdGFiLmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItYmx1ZS01MDBcIiwgXCJ0ZXh0LWJsdWUtNjAwXCIsIFwiZm9udC1ib2xkXCIpXG4gICAgICB0YWIuY2xhc3NMaXN0LmFkZChcInRleHQtZ3JheS02MDBcIilcbiAgICB9KVxuXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJib3JkZXItYmx1ZS01MDBcIiwgXCJ0ZXh0LWJsdWUtNjAwXCIsIFwiZm9udC1ib2xkXCIpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJ0ZXh0LWdyYXktNjAwXCIpXG5cbiAgICAvLyBVcGRhdGUgc2VjdGlvbnNcbiAgICBjb25zdCBhbGxTZWN0aW9ucyA9IFtcbiAgICAgIHRoaXMuZmxpZ2h0UHJlZmVyZW5jZVNlY3Rpb25UYXJnZXQsXG4gICAgICB0aGlzLmFpcmxpbmVDb21wYW55U2VjdGlvblRhcmdldCxcbiAgICAgIHRoaXMuYWlycG9ydFNlY3Rpb25UYXJnZXQsXG4gICAgICB0aGlzLmRlcGFydHVyZVRpbWVTZWN0aW9uVGFyZ2V0LFxuICAgICAgdGhpcy50cmFuc2ZlckNpdHlTZWN0aW9uVGFyZ2V0LFxuICAgICAgdGhpcy50cmFuc2ZlclRpbWVzU2VjdGlvblRhcmdldCxcbiAgICAgIHRoaXMudHJhbnNmZXJEdXJhdGlvblNlY3Rpb25UYXJnZXQsXG4gICAgICB0aGlzLnRvdGFsRHVyYXRpb25TZWN0aW9uVGFyZ2V0LFxuICAgICAgdGhpcy5zZWF0Q2xhc3NTZWN0aW9uVGFyZ2V0LFxuICAgICAgdGhpcy5haXJjcmFmdE1vZGVsU2VjdGlvblRhcmdldCxcbiAgICAgIHRoaXMudGlja2V0Q2FuY2VsbGF0aW9uU2VjdGlvblRhcmdldFxuICAgIF1cblxuICAgIGFsbFNlY3Rpb25zLmZvckVhY2goc2VjdGlvbiA9PiBzZWN0aW9uLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIikpXG5cbiAgICBjb25zdCBzZWN0aW9uTWFwOiB7IFtrZXk6IHN0cmluZ106IEhUTUxFbGVtZW50IH0gPSB7XG4gICAgICBmbGlnaHRQcmVmZXJlbmNlOiB0aGlzLmZsaWdodFByZWZlcmVuY2VTZWN0aW9uVGFyZ2V0LFxuICAgICAgYWlybGluZUNvbXBhbnk6IHRoaXMuYWlybGluZUNvbXBhbnlTZWN0aW9uVGFyZ2V0LFxuICAgICAgYWlycG9ydDogdGhpcy5haXJwb3J0U2VjdGlvblRhcmdldCxcbiAgICAgIGRlcGFydHVyZVRpbWU6IHRoaXMuZGVwYXJ0dXJlVGltZVNlY3Rpb25UYXJnZXQsXG4gICAgICB0cmFuc2ZlckNpdHk6IHRoaXMudHJhbnNmZXJDaXR5U2VjdGlvblRhcmdldCxcbiAgICAgIHRyYW5zZmVyVGltZXM6IHRoaXMudHJhbnNmZXJUaW1lc1NlY3Rpb25UYXJnZXQsXG4gICAgICB0cmFuc2ZlckR1cmF0aW9uOiB0aGlzLnRyYW5zZmVyRHVyYXRpb25TZWN0aW9uVGFyZ2V0LFxuICAgICAgdG90YWxEdXJhdGlvbjogdGhpcy50b3RhbER1cmF0aW9uU2VjdGlvblRhcmdldCxcbiAgICAgIHNlYXRDbGFzczogdGhpcy5zZWF0Q2xhc3NTZWN0aW9uVGFyZ2V0LFxuICAgICAgYWlyY3JhZnRNb2RlbDogdGhpcy5haXJjcmFmdE1vZGVsU2VjdGlvblRhcmdldCxcbiAgICAgIHRpY2tldENhbmNlbGxhdGlvbjogdGhpcy50aWNrZXRDYW5jZWxsYXRpb25TZWN0aW9uVGFyZ2V0XG4gICAgfVxuXG4gICAgY29uc3QgdGFyZ2V0U2VjdGlvbiA9IHNlY3Rpb25NYXBbdGFiTmFtZV1cbiAgICBpZiAodGFyZ2V0U2VjdGlvbikge1xuICAgICAgdGFyZ2V0U2VjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgfVxuICB9XG5cbiAgLy8gRmxpZ2h0IHByZWZlcmVuY2UgdG9nZ2xlc1xuICB0b2dnbGVEaXJlY3RGbGlnaHQoKTogdm9pZCB7XG4gICAgLy8gVG9nZ2xlIGNoZWNrYm94IHN0YXRlXG4gICAgdGhpcy5kaXJlY3RGbGlnaHRDaGVja2JveFRhcmdldC5jaGVja2VkID0gIXRoaXMuZGlyZWN0RmxpZ2h0Q2hlY2tib3hUYXJnZXQuY2hlY2tlZFxuICAgIHRoaXMuZmlsdGVycy5kaXJlY3RGbGlnaHQgPSB0aGlzLmRpcmVjdEZsaWdodENoZWNrYm94VGFyZ2V0LmNoZWNrZWRcbiAgICBcbiAgICAvLyBVcGRhdGUgY2FyZCBzdHlsZVxuICAgIGlmICh0aGlzLmRpcmVjdEZsaWdodENhcmRUYXJnZXQpIHtcbiAgICAgIGlmICh0aGlzLmZpbHRlcnMuZGlyZWN0RmxpZ2h0KSB7XG4gICAgICAgIHRoaXMuZGlyZWN0RmxpZ2h0Q2FyZFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNmNmY3ZjldXCIpXG4gICAgICAgIHRoaXMuZGlyZWN0RmxpZ2h0Q2FyZFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNmZmY5ZTZdXCIsIFwiYm9yZGVyLVswLjVweF1cIiwgXCJib3JkZXItWyNmZmRhODBdXCIpXG4gICAgICAgIC8vIEFkZCBjaGVja21hcmtcbiAgICAgICAgaWYgKCF0aGlzLmRpcmVjdEZsaWdodENhcmRUYXJnZXQucXVlcnlTZWxlY3RvcihcIi5jaGVja21hcmtcIikpIHtcbiAgICAgICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLmNyZWF0ZUNoZWNrbWFyaygpXG4gICAgICAgICAgdGhpcy5kaXJlY3RGbGlnaHRDYXJkVGFyZ2V0LmFwcGVuZENoaWxkKGNoZWNrbWFyaylcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kaXJlY3RGbGlnaHRDYXJkVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy1bI2Y2ZjdmOV1cIilcbiAgICAgICAgdGhpcy5kaXJlY3RGbGlnaHRDYXJkVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI2ZmZjllNl1cIiwgXCJib3JkZXItWzAuNXB4XVwiLCBcImJvcmRlci1bI2ZmZGE4MF1cIilcbiAgICAgICAgLy8gUmVtb3ZlIGNoZWNrbWFya1xuICAgICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLmRpcmVjdEZsaWdodENhcmRUYXJnZXQucXVlcnlTZWxlY3RvcihcIi5jaGVja21hcmtcIilcbiAgICAgICAgaWYgKGNoZWNrbWFyaykgY2hlY2ttYXJrLnJlbW92ZSgpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFN5bmMgd2l0aCBxdWljayBmaWx0ZXIgYnV0dG9uIGlmIGV4aXN0c1xuICAgIGlmICh0aGlzLnF1aWNrRGlyZWN0RmxpZ2h0VGFyZ2V0KSB7XG4gICAgICBpZiAodGhpcy5maWx0ZXJzLmRpcmVjdEZsaWdodCkge1xuICAgICAgICB0aGlzLnF1aWNrRGlyZWN0RmxpZ2h0VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgICAgdGhpcy5xdWlja0RpcmVjdEZsaWdodFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnF1aWNrRGlyZWN0RmxpZ2h0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgICAgdGhpcy5xdWlja0RpcmVjdEZsaWdodFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMudXBkYXRlUmVzdWx0Q291bnQoKVxuICB9XG5cbiAgdG9nZ2xlTm9UcmFuc2l0KCk6IHZvaWQge1xuICAgIC8vIFRvZ2dsZSBjaGVja2JveCBzdGF0ZVxuICAgIHRoaXMubm9UcmFuc2l0Q2hlY2tib3hUYXJnZXQuY2hlY2tlZCA9ICF0aGlzLm5vVHJhbnNpdENoZWNrYm94VGFyZ2V0LmNoZWNrZWRcbiAgICB0aGlzLmZpbHRlcnMubm9UcmFuc2l0ID0gdGhpcy5ub1RyYW5zaXRDaGVja2JveFRhcmdldC5jaGVja2VkXG4gICAgXG4gICAgLy8gVXBkYXRlIGNhcmQgc3R5bGVcbiAgICBpZiAodGhpcy5ub1RyYW5zaXRDYXJkVGFyZ2V0KSB7XG4gICAgICBpZiAodGhpcy5maWx0ZXJzLm5vVHJhbnNpdCkge1xuICAgICAgICB0aGlzLm5vVHJhbnNpdENhcmRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLVsjZjZmN2Y5XVwiKVxuICAgICAgICB0aGlzLm5vVHJhbnNpdENhcmRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLVsjZmZmOWU2XVwiLCBcImJvcmRlci1bMC41cHhdXCIsIFwiYm9yZGVyLVsjZmZkYTgwXVwiKVxuICAgICAgICAvLyBBZGQgY2hlY2ttYXJrXG4gICAgICAgIGlmICghdGhpcy5ub1RyYW5zaXRDYXJkVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrXCIpKSB7XG4gICAgICAgICAgY29uc3QgY2hlY2ttYXJrID0gdGhpcy5jcmVhdGVDaGVja21hcmsoKVxuICAgICAgICAgIHRoaXMubm9UcmFuc2l0Q2FyZFRhcmdldC5hcHBlbmRDaGlsZChjaGVja21hcmspXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubm9UcmFuc2l0Q2FyZFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNmNmY3ZjldXCIpXG4gICAgICAgIHRoaXMubm9UcmFuc2l0Q2FyZFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNmZmY5ZTZdXCIsIFwiYm9yZGVyLVswLjVweF1cIiwgXCJib3JkZXItWyNmZmRhODBdXCIpXG4gICAgICAgIC8vIFJlbW92ZSBjaGVja21hcmtcbiAgICAgICAgY29uc3QgY2hlY2ttYXJrID0gdGhpcy5ub1RyYW5zaXRDYXJkVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrXCIpXG4gICAgICAgIGlmIChjaGVja21hcmspIGNoZWNrbWFyay5yZW1vdmUoKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBTeW5jIHdpdGggcXVpY2sgZmlsdGVyIGJ1dHRvbiBpZiBleGlzdHNcbiAgICBpZiAodGhpcy5xdWlja05vVHJhbnNpdFRhcmdldCkge1xuICAgICAgaWYgKHRoaXMuZmlsdGVycy5ub1RyYW5zaXQpIHtcbiAgICAgICAgdGhpcy5xdWlja05vVHJhbnNpdFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgIHRoaXMucXVpY2tOb1RyYW5zaXRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5xdWlja05vVHJhbnNpdFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgIHRoaXMucXVpY2tOb1RyYW5zaXRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnVwZGF0ZVJlc3VsdENvdW50KClcbiAgfVxuXG4gIHRvZ2dsZUNoZWNrZWRMdWdnYWdlKCk6IHZvaWQge1xuICAgIC8vIFRvZ2dsZSBjaGVja2JveCBzdGF0ZVxuICAgIHRoaXMuaW5jbHVkZUNoZWNrZWRMdWdnYWdlQ2hlY2tib3hUYXJnZXQuY2hlY2tlZCA9ICF0aGlzLmluY2x1ZGVDaGVja2VkTHVnZ2FnZUNoZWNrYm94VGFyZ2V0LmNoZWNrZWRcbiAgICB0aGlzLmZpbHRlcnMuaW5jbHVkZUNoZWNrZWRMdWdnYWdlID0gdGhpcy5pbmNsdWRlQ2hlY2tlZEx1Z2dhZ2VDaGVja2JveFRhcmdldC5jaGVja2VkXG4gICAgXG4gICAgLy8gVXBkYXRlIGNhcmQgc3R5bGVcbiAgICBpZiAodGhpcy5jaGVja2VkTHVnZ2FnZUNhcmRUYXJnZXQpIHtcbiAgICAgIGlmICh0aGlzLmZpbHRlcnMuaW5jbHVkZUNoZWNrZWRMdWdnYWdlKSB7XG4gICAgICAgIHRoaXMuY2hlY2tlZEx1Z2dhZ2VDYXJkVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI2Y2ZjdmOV1cIilcbiAgICAgICAgdGhpcy5jaGVja2VkTHVnZ2FnZUNhcmRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLVsjZmZmOWU2XVwiLCBcImJvcmRlci1bMC41cHhdXCIsIFwiYm9yZGVyLVsjZmZkYTgwXVwiKVxuICAgICAgICAvLyBBZGQgY2hlY2ttYXJrXG4gICAgICAgIGlmICghdGhpcy5jaGVja2VkTHVnZ2FnZUNhcmRUYXJnZXQucXVlcnlTZWxlY3RvcihcIi5jaGVja21hcmtcIikpIHtcbiAgICAgICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLmNyZWF0ZUNoZWNrbWFyaygpXG4gICAgICAgICAgdGhpcy5jaGVja2VkTHVnZ2FnZUNhcmRUYXJnZXQuYXBwZW5kQ2hpbGQoY2hlY2ttYXJrKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNoZWNrZWRMdWdnYWdlQ2FyZFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNmNmY3ZjldXCIpXG4gICAgICAgIHRoaXMuY2hlY2tlZEx1Z2dhZ2VDYXJkVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI2ZmZjllNl1cIiwgXCJib3JkZXItWzAuNXB4XVwiLCBcImJvcmRlci1bI2ZmZGE4MF1cIilcbiAgICAgICAgLy8gUmVtb3ZlIGNoZWNrbWFya1xuICAgICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLmNoZWNrZWRMdWdnYWdlQ2FyZFRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbWFya1wiKVxuICAgICAgICBpZiAoY2hlY2ttYXJrKSBjaGVja21hcmsucmVtb3ZlKClcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gU3luYyB3aXRoIHF1aWNrIGZpbHRlciBidXR0b24gaWYgZXhpc3RzXG4gICAgaWYgKHRoaXMucXVpY2tDaGVja2VkTHVnZ2FnZVRhcmdldCkge1xuICAgICAgaWYgKHRoaXMuZmlsdGVycy5pbmNsdWRlQ2hlY2tlZEx1Z2dhZ2UpIHtcbiAgICAgICAgdGhpcy5xdWlja0NoZWNrZWRMdWdnYWdlVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgICAgdGhpcy5xdWlja0NoZWNrZWRMdWdnYWdlVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucXVpY2tDaGVja2VkTHVnZ2FnZVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgIHRoaXMucXVpY2tDaGVja2VkTHVnZ2FnZVRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMudXBkYXRlUmVzdWx0Q291bnQoKVxuICB9XG5cbiAgdG9nZ2xlTm9TaGFyZWRGbGlnaHQoKTogdm9pZCB7XG4gICAgLy8gVG9nZ2xlIGNoZWNrYm94IHN0YXRlXG4gICAgdGhpcy5ub1NoYXJlZEZsaWdodENoZWNrYm94VGFyZ2V0LmNoZWNrZWQgPSAhdGhpcy5ub1NoYXJlZEZsaWdodENoZWNrYm94VGFyZ2V0LmNoZWNrZWRcbiAgICB0aGlzLmZpbHRlcnMubm9TaGFyZWRGbGlnaHQgPSB0aGlzLm5vU2hhcmVkRmxpZ2h0Q2hlY2tib3hUYXJnZXQuY2hlY2tlZFxuICAgIFxuICAgIC8vIFVwZGF0ZSBjYXJkIHN0eWxlXG4gICAgaWYgKHRoaXMubm9TaGFyZWRGbGlnaHRDYXJkVGFyZ2V0KSB7XG4gICAgICBpZiAodGhpcy5maWx0ZXJzLm5vU2hhcmVkRmxpZ2h0KSB7XG4gICAgICAgIHRoaXMubm9TaGFyZWRGbGlnaHRDYXJkVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI2Y2ZjdmOV1cIilcbiAgICAgICAgdGhpcy5ub1NoYXJlZEZsaWdodENhcmRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLVsjZmZmOWU2XVwiLCBcImJvcmRlci1bMC41cHhdXCIsIFwiYm9yZGVyLVsjZmZkYTgwXVwiKVxuICAgICAgICAvLyBBZGQgY2hlY2ttYXJrXG4gICAgICAgIGlmICghdGhpcy5ub1NoYXJlZEZsaWdodENhcmRUYXJnZXQucXVlcnlTZWxlY3RvcihcIi5jaGVja21hcmtcIikpIHtcbiAgICAgICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLmNyZWF0ZUNoZWNrbWFyaygpXG4gICAgICAgICAgdGhpcy5ub1NoYXJlZEZsaWdodENhcmRUYXJnZXQuYXBwZW5kQ2hpbGQoY2hlY2ttYXJrKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm5vU2hhcmVkRmxpZ2h0Q2FyZFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNmNmY3ZjldXCIpXG4gICAgICAgIHRoaXMubm9TaGFyZWRGbGlnaHRDYXJkVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI2ZmZjllNl1cIiwgXCJib3JkZXItWzAuNXB4XVwiLCBcImJvcmRlci1bI2ZmZGE4MF1cIilcbiAgICAgICAgLy8gUmVtb3ZlIGNoZWNrbWFya1xuICAgICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLm5vU2hhcmVkRmxpZ2h0Q2FyZFRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbWFya1wiKVxuICAgICAgICBpZiAoY2hlY2ttYXJrKSBjaGVja21hcmsucmVtb3ZlKClcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gU3luYyB3aXRoIHF1aWNrIGZpbHRlciBidXR0b24gaWYgZXhpc3RzXG4gICAgaWYgKHRoaXMucXVpY2tOb1NoYXJlZEZsaWdodFRhcmdldCkge1xuICAgICAgaWYgKHRoaXMuZmlsdGVycy5ub1NoYXJlZEZsaWdodCkge1xuICAgICAgICB0aGlzLnF1aWNrTm9TaGFyZWRGbGlnaHRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgICB0aGlzLnF1aWNrTm9TaGFyZWRGbGlnaHRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5xdWlja05vU2hhcmVkRmxpZ2h0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgICAgdGhpcy5xdWlja05vU2hhcmVkRmxpZ2h0VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy51cGRhdGVSZXN1bHRDb3VudCgpXG4gIH1cblxuICB0b2dnbGVEaXNjb3VudFByaWNlKCk6IHZvaWQge1xuICAgIC8vIFRvZ2dsZSBjaGVja2JveCBzdGF0ZVxuICAgIHRoaXMuZGlzY291bnRQcmljZUNoZWNrYm94VGFyZ2V0LmNoZWNrZWQgPSAhdGhpcy5kaXNjb3VudFByaWNlQ2hlY2tib3hUYXJnZXQuY2hlY2tlZFxuICAgIHRoaXMuZmlsdGVycy5kaXNjb3VudFByaWNlID0gdGhpcy5kaXNjb3VudFByaWNlQ2hlY2tib3hUYXJnZXQuY2hlY2tlZFxuICAgIFxuICAgIC8vIFVwZGF0ZSBjYXJkIHN0eWxlXG4gICAgaWYgKHRoaXMuZGlzY291bnRQcmljZUNhcmRUYXJnZXQpIHtcbiAgICAgIGlmICh0aGlzLmZpbHRlcnMuZGlzY291bnRQcmljZSkge1xuICAgICAgICB0aGlzLmRpc2NvdW50UHJpY2VDYXJkVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI2Y2ZjdmOV1cIilcbiAgICAgICAgdGhpcy5kaXNjb3VudFByaWNlQ2FyZFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNmZmY5ZTZdXCIsIFwiYm9yZGVyLVswLjVweF1cIiwgXCJib3JkZXItWyNmZmRhODBdXCIpXG4gICAgICAgIC8vIEFkZCBjaGVja21hcmtcbiAgICAgICAgaWYgKCF0aGlzLmRpc2NvdW50UHJpY2VDYXJkVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrXCIpKSB7XG4gICAgICAgICAgY29uc3QgY2hlY2ttYXJrID0gdGhpcy5jcmVhdGVDaGVja21hcmsoKVxuICAgICAgICAgIHRoaXMuZGlzY291bnRQcmljZUNhcmRUYXJnZXQuYXBwZW5kQ2hpbGQoY2hlY2ttYXJrKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRpc2NvdW50UHJpY2VDYXJkVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy1bI2Y2ZjdmOV1cIilcbiAgICAgICAgdGhpcy5kaXNjb3VudFByaWNlQ2FyZFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNmZmY5ZTZdXCIsIFwiYm9yZGVyLVswLjVweF1cIiwgXCJib3JkZXItWyNmZmRhODBdXCIpXG4gICAgICAgIC8vIFJlbW92ZSBjaGVja21hcmtcbiAgICAgICAgY29uc3QgY2hlY2ttYXJrID0gdGhpcy5kaXNjb3VudFByaWNlQ2FyZFRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbWFya1wiKVxuICAgICAgICBpZiAoY2hlY2ttYXJrKSBjaGVja21hcmsucmVtb3ZlKClcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gU3luYyB3aXRoIHF1aWNrIGZpbHRlciBidXR0b24gaWYgZXhpc3RzXG4gICAgaWYgKHRoaXMucXVpY2tEaXNjb3VudFByaWNlVGFyZ2V0KSB7XG4gICAgICBpZiAodGhpcy5maWx0ZXJzLmRpc2NvdW50UHJpY2UpIHtcbiAgICAgICAgdGhpcy5xdWlja0Rpc2NvdW50UHJpY2VUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgICB0aGlzLnF1aWNrRGlzY291bnRQcmljZVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnF1aWNrRGlzY291bnRQcmljZVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgIHRoaXMucXVpY2tEaXNjb3VudFByaWNlVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy51cGRhdGVSZXN1bHRDb3VudCgpXG4gIH1cblxuICAvLyBRdWljayBmaWx0ZXIgYnV0dG9uIGFjdGlvbnNcbiAgdG9nZ2xlUXVpY2tEaXJlY3RGbGlnaHQoKTogdm9pZCB7XG4gICAgdGhpcy5maWx0ZXJzLmRpcmVjdEZsaWdodCA9ICF0aGlzLmZpbHRlcnMuZGlyZWN0RmxpZ2h0XG4gICAgdGhpcy5kaXJlY3RGbGlnaHRDaGVja2JveFRhcmdldC5jaGVja2VkID0gdGhpcy5maWx0ZXJzLmRpcmVjdEZsaWdodFxuICAgIFxuICAgIC8vIFVwZGF0ZSBxdWljayBidXR0b24gc3R5bGVcbiAgICBpZiAodGhpcy5xdWlja0RpcmVjdEZsaWdodFRhcmdldCkge1xuICAgICAgaWYgKHRoaXMuZmlsdGVycy5kaXJlY3RGbGlnaHQpIHtcbiAgICAgICAgdGhpcy5xdWlja0RpcmVjdEZsaWdodFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgIHRoaXMucXVpY2tEaXJlY3RGbGlnaHRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5xdWlja0RpcmVjdEZsaWdodFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgIHRoaXMucXVpY2tEaXJlY3RGbGlnaHRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnVwZGF0ZVJlc3VsdENvdW50KClcbiAgfVxuXG4gIHRvZ2dsZVF1aWNrTm9TaGFyZWRGbGlnaHQoKTogdm9pZCB7XG4gICAgdGhpcy5maWx0ZXJzLm5vU2hhcmVkRmxpZ2h0ID0gIXRoaXMuZmlsdGVycy5ub1NoYXJlZEZsaWdodFxuICAgIHRoaXMubm9TaGFyZWRGbGlnaHRDaGVja2JveFRhcmdldC5jaGVja2VkID0gdGhpcy5maWx0ZXJzLm5vU2hhcmVkRmxpZ2h0XG4gICAgXG4gICAgLy8gVXBkYXRlIHF1aWNrIGJ1dHRvbiBzdHlsZVxuICAgIGlmICh0aGlzLnF1aWNrTm9TaGFyZWRGbGlnaHRUYXJnZXQpIHtcbiAgICAgIGlmICh0aGlzLmZpbHRlcnMubm9TaGFyZWRGbGlnaHQpIHtcbiAgICAgICAgdGhpcy5xdWlja05vU2hhcmVkRmxpZ2h0VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgICAgdGhpcy5xdWlja05vU2hhcmVkRmxpZ2h0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucXVpY2tOb1NoYXJlZEZsaWdodFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgIHRoaXMucXVpY2tOb1NoYXJlZEZsaWdodFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMudXBkYXRlUmVzdWx0Q291bnQoKVxuICB9XG5cbiAgdG9nZ2xlUXVpY2tDaGVja2VkTHVnZ2FnZSgpOiB2b2lkIHtcbiAgICB0aGlzLmZpbHRlcnMuaW5jbHVkZUNoZWNrZWRMdWdnYWdlID0gIXRoaXMuZmlsdGVycy5pbmNsdWRlQ2hlY2tlZEx1Z2dhZ2VcbiAgICB0aGlzLmluY2x1ZGVDaGVja2VkTHVnZ2FnZUNoZWNrYm94VGFyZ2V0LmNoZWNrZWQgPSB0aGlzLmZpbHRlcnMuaW5jbHVkZUNoZWNrZWRMdWdnYWdlXG4gICAgXG4gICAgLy8gVXBkYXRlIHF1aWNrIGJ1dHRvbiBzdHlsZVxuICAgIGlmICh0aGlzLnF1aWNrQ2hlY2tlZEx1Z2dhZ2VUYXJnZXQpIHtcbiAgICAgIGlmICh0aGlzLmZpbHRlcnMuaW5jbHVkZUNoZWNrZWRMdWdnYWdlKSB7XG4gICAgICAgIHRoaXMucXVpY2tDaGVja2VkTHVnZ2FnZVRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgIHRoaXMucXVpY2tDaGVja2VkTHVnZ2FnZVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnF1aWNrQ2hlY2tlZEx1Z2dhZ2VUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgICB0aGlzLnF1aWNrQ2hlY2tlZEx1Z2dhZ2VUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnVwZGF0ZVJlc3VsdENvdW50KClcbiAgfVxuXG4gIHRvZ2dsZVF1aWNrTm9UcmFuc2l0KCk6IHZvaWQge1xuICAgIHRoaXMuZmlsdGVycy5ub1RyYW5zaXQgPSAhdGhpcy5maWx0ZXJzLm5vVHJhbnNpdFxuICAgIHRoaXMubm9UcmFuc2l0Q2hlY2tib3hUYXJnZXQuY2hlY2tlZCA9IHRoaXMuZmlsdGVycy5ub1RyYW5zaXRcbiAgICBcbiAgICAvLyBVcGRhdGUgcXVpY2sgYnV0dG9uIHN0eWxlXG4gICAgaWYgKHRoaXMucXVpY2tOb1RyYW5zaXRUYXJnZXQpIHtcbiAgICAgIGlmICh0aGlzLmZpbHRlcnMubm9UcmFuc2l0KSB7XG4gICAgICAgIHRoaXMucXVpY2tOb1RyYW5zaXRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgICB0aGlzLnF1aWNrTm9UcmFuc2l0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucXVpY2tOb1RyYW5zaXRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgICB0aGlzLnF1aWNrTm9UcmFuc2l0VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy51cGRhdGVSZXN1bHRDb3VudCgpXG4gIH1cblxuICB0b2dnbGVRdWlja0Rpc2NvdW50UHJpY2UoKTogdm9pZCB7XG4gICAgdGhpcy5maWx0ZXJzLmRpc2NvdW50UHJpY2UgPSAhdGhpcy5maWx0ZXJzLmRpc2NvdW50UHJpY2VcbiAgICB0aGlzLmRpc2NvdW50UHJpY2VDaGVja2JveFRhcmdldC5jaGVja2VkID0gdGhpcy5maWx0ZXJzLmRpc2NvdW50UHJpY2VcbiAgICBcbiAgICAvLyBVcGRhdGUgcXVpY2sgYnV0dG9uIHN0eWxlXG4gICAgaWYgKHRoaXMucXVpY2tEaXNjb3VudFByaWNlVGFyZ2V0KSB7XG4gICAgICBpZiAodGhpcy5maWx0ZXJzLmRpc2NvdW50UHJpY2UpIHtcbiAgICAgICAgdGhpcy5xdWlja0Rpc2NvdW50UHJpY2VUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgICB0aGlzLnF1aWNrRGlzY291bnRQcmljZVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnF1aWNrRGlzY291bnRQcmljZVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgIHRoaXMucXVpY2tEaXNjb3VudFByaWNlVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy51cGRhdGVSZXN1bHRDb3VudCgpXG4gIH1cblxuICAvLyBBaXJsaW5lIHNlbGVjdGlvblxuICB0b2dnbGVBaXJsaW5lKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNoZWNrYm94ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBhaXJsaW5lID0gY2hlY2tib3gudmFsdWVcbiAgICBcbiAgICBpZiAoY2hlY2tib3guY2hlY2tlZCkge1xuICAgICAgdGhpcy5maWx0ZXJzLmFpcmxpbmVzLmFkZChhaXJsaW5lKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZpbHRlcnMuYWlybGluZXMuZGVsZXRlKGFpcmxpbmUpXG4gICAgfVxuICAgIFxuICAgIHRoaXMudXBkYXRlUmVzdWx0Q291bnQoKVxuICB9XG5cbiAgLy8gQWlycG9ydCBzZWxlY3Rpb25cbiAgdG9nZ2xlRGVwYXJ0dXJlQWlycG9ydChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjaGVja2JveCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgYWlycG9ydCA9IGNoZWNrYm94LnZhbHVlXG4gICAgXG4gICAgaWYgKGNoZWNrYm94LmNoZWNrZWQpIHtcbiAgICAgIHRoaXMuZmlsdGVycy5kZXBhcnR1cmVBaXJwb3J0cy5hZGQoYWlycG9ydClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5maWx0ZXJzLmRlcGFydHVyZUFpcnBvcnRzLmRlbGV0ZShhaXJwb3J0KVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnVwZGF0ZVJlc3VsdENvdW50KClcbiAgfVxuXG4gIHRvZ2dsZUFycml2YWxBaXJwb3J0KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNoZWNrYm94ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBhaXJwb3J0ID0gY2hlY2tib3gudmFsdWVcbiAgICBcbiAgICBpZiAoY2hlY2tib3guY2hlY2tlZCkge1xuICAgICAgdGhpcy5maWx0ZXJzLmFycml2YWxBaXJwb3J0cy5hZGQoYWlycG9ydClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5maWx0ZXJzLmFycml2YWxBaXJwb3J0cy5kZWxldGUoYWlycG9ydClcbiAgICB9XG4gICAgXG4gICAgdGhpcy51cGRhdGVSZXN1bHRDb3VudCgpXG4gIH1cblxuICAvLyBEZXBhcnR1cmUgdGltZSBzZWxlY3Rpb25cbiAgdG9nZ2xlRGVwYXJ0dXJlVGltZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjaGVja2JveCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgdGltZVJhbmdlID0gY2hlY2tib3gudmFsdWVcbiAgICBcbiAgICBpZiAoY2hlY2tib3guY2hlY2tlZCkge1xuICAgICAgdGhpcy5maWx0ZXJzLmRlcGFydHVyZVRpbWVSYW5nZXMuYWRkKHRpbWVSYW5nZSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5maWx0ZXJzLmRlcGFydHVyZVRpbWVSYW5nZXMuZGVsZXRlKHRpbWVSYW5nZSlcbiAgICB9XG4gICAgXG4gICAgdGhpcy51cGRhdGVSZXN1bHRDb3VudCgpXG4gIH1cblxuICAvLyBBaXJjcmFmdCBtb2RlbCBzZWxlY3Rpb25cbiAgdG9nZ2xlQWlyY3JhZnRNb2RlbChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjaGVja2JveCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgbW9kZWwgPSBjaGVja2JveC52YWx1ZVxuICAgIFxuICAgIGlmIChjaGVja2JveC5jaGVja2VkKSB7XG4gICAgICB0aGlzLmZpbHRlcnMuYWlyY3JhZnRNb2RlbHMuYWRkKG1vZGVsKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZpbHRlcnMuYWlyY3JhZnRNb2RlbHMuZGVsZXRlKG1vZGVsKVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnVwZGF0ZVJlc3VsdENvdW50KClcbiAgfVxuXG4gIC8vIFJlc2V0IGFsbCBmaWx0ZXJzXG4gIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuaW5pdGlhbGl6ZUZpbHRlcnMoKVxuICAgIFxuICAgIC8vIFJlc2V0IGFsbCBjaGVja2JveGVzXG4gICAgdGhpcy5kaXJlY3RGbGlnaHRDaGVja2JveFRhcmdldC5jaGVja2VkID0gZmFsc2VcbiAgICB0aGlzLm5vVHJhbnNpdENoZWNrYm94VGFyZ2V0LmNoZWNrZWQgPSBmYWxzZVxuICAgIHRoaXMuaW5jbHVkZUNoZWNrZWRMdWdnYWdlQ2hlY2tib3hUYXJnZXQuY2hlY2tlZCA9IGZhbHNlXG4gICAgdGhpcy5ub1NoYXJlZEZsaWdodENoZWNrYm94VGFyZ2V0LmNoZWNrZWQgPSBmYWxzZVxuICAgIHRoaXMuZGlzY291bnRQcmljZUNoZWNrYm94VGFyZ2V0LmNoZWNrZWQgPSBmYWxzZVxuICAgIFxuICAgIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBjb25zdCBhaXJsaW5lQ2hlY2tib3hlcyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxJbnB1dEVsZW1lbnQ+KCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl1bZGF0YS1maWx0ZXItdHlwZT1cImFpcmxpbmVcIl0nKVxuICAgIGFpcmxpbmVDaGVja2JveGVzLmZvckVhY2goY2IgPT4gY2IuY2hlY2tlZCA9IGZhbHNlKVxuICAgIFxuICAgIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBjb25zdCBhaXJwb3J0Q2hlY2tib3hlcyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxJbnB1dEVsZW1lbnQ+KCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl1bZGF0YS1maWx0ZXItdHlwZT1cImFpcnBvcnRcIl0nKVxuICAgIGFpcnBvcnRDaGVja2JveGVzLmZvckVhY2goY2IgPT4gY2IuY2hlY2tlZCA9IGZhbHNlKVxuICAgIFxuICAgIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBjb25zdCB0aW1lQ2hlY2tib3hlcyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxJbnB1dEVsZW1lbnQ+KCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl1bZGF0YS1maWx0ZXItdHlwZT1cImRlcGFydHVyZS10aW1lXCJdJylcbiAgICB0aW1lQ2hlY2tib3hlcy5mb3JFYWNoKGNiID0+IGNiLmNoZWNrZWQgPSBmYWxzZSlcbiAgICBcbiAgICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gICAgY29uc3QgbW9kZWxDaGVja2JveGVzID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTElucHV0RWxlbWVudD4oJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXVtkYXRhLWZpbHRlci10eXBlPVwiYWlyY3JhZnQtbW9kZWxcIl0nKVxuICAgIG1vZGVsQ2hlY2tib3hlcy5mb3JFYWNoKGNiID0+IGNiLmNoZWNrZWQgPSBmYWxzZSlcbiAgICBcbiAgICAvLyBSZXNldCBxdWljayBmaWx0ZXIgYnV0dG9uc1xuICAgIGlmICh0aGlzLnF1aWNrRGlyZWN0RmxpZ2h0VGFyZ2V0KSB7XG4gICAgICB0aGlzLnF1aWNrRGlyZWN0RmxpZ2h0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgIHRoaXMucXVpY2tEaXJlY3RGbGlnaHRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5xdWlja05vU2hhcmVkRmxpZ2h0VGFyZ2V0KSB7XG4gICAgICB0aGlzLnF1aWNrTm9TaGFyZWRGbGlnaHRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgdGhpcy5xdWlja05vU2hhcmVkRmxpZ2h0VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMucXVpY2tDaGVja2VkTHVnZ2FnZVRhcmdldCkge1xuICAgICAgdGhpcy5xdWlja0NoZWNrZWRMdWdnYWdlVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgIHRoaXMucXVpY2tDaGVja2VkTHVnZ2FnZVRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLnF1aWNrTm9UcmFuc2l0VGFyZ2V0KSB7XG4gICAgICB0aGlzLnF1aWNrTm9UcmFuc2l0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgIHRoaXMucXVpY2tOb1RyYW5zaXRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5xdWlja0Rpc2NvdW50UHJpY2VUYXJnZXQpIHtcbiAgICAgIHRoaXMucXVpY2tEaXNjb3VudFByaWNlVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgIHRoaXMucXVpY2tEaXNjb3VudFByaWNlVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICB9XG4gICAgXG4gICAgLy8gUmVzZXQgY2FyZCB2aXN1YWwgc3RhdGVzXG4gICAgaWYgKHRoaXMuZGlyZWN0RmxpZ2h0Q2FyZFRhcmdldCkge1xuICAgICAgdGhpcy5kaXJlY3RGbGlnaHRDYXJkVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy1bI2Y2ZjdmOV1cIilcbiAgICAgIHRoaXMuZGlyZWN0RmxpZ2h0Q2FyZFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNmZmY5ZTZdXCIsIFwiYm9yZGVyLVswLjVweF1cIiwgXCJib3JkZXItWyNmZmRhODBdXCIpXG4gICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLmRpcmVjdEZsaWdodENhcmRUYXJnZXQucXVlcnlTZWxlY3RvcihcIi5jaGVja21hcmtcIilcbiAgICAgIGlmIChjaGVja21hcmspIGNoZWNrbWFyay5yZW1vdmUoKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5ub1NoYXJlZEZsaWdodENhcmRUYXJnZXQpIHtcbiAgICAgIHRoaXMubm9TaGFyZWRGbGlnaHRDYXJkVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy1bI2Y2ZjdmOV1cIilcbiAgICAgIHRoaXMubm9TaGFyZWRGbGlnaHRDYXJkVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI2ZmZjllNl1cIiwgXCJib3JkZXItWzAuNXB4XVwiLCBcImJvcmRlci1bI2ZmZGE4MF1cIilcbiAgICAgIGNvbnN0IGNoZWNrbWFyayA9IHRoaXMubm9TaGFyZWRGbGlnaHRDYXJkVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrXCIpXG4gICAgICBpZiAoY2hlY2ttYXJrKSBjaGVja21hcmsucmVtb3ZlKClcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuY2hlY2tlZEx1Z2dhZ2VDYXJkVGFyZ2V0KSB7XG4gICAgICB0aGlzLmNoZWNrZWRMdWdnYWdlQ2FyZFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNmNmY3ZjldXCIpXG4gICAgICB0aGlzLmNoZWNrZWRMdWdnYWdlQ2FyZFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNmZmY5ZTZdXCIsIFwiYm9yZGVyLVswLjVweF1cIiwgXCJib3JkZXItWyNmZmRhODBdXCIpXG4gICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLmNoZWNrZWRMdWdnYWdlQ2FyZFRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbWFya1wiKVxuICAgICAgaWYgKGNoZWNrbWFyaykgY2hlY2ttYXJrLnJlbW92ZSgpXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLm5vVHJhbnNpdENhcmRUYXJnZXQpIHtcbiAgICAgIHRoaXMubm9UcmFuc2l0Q2FyZFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNmNmY3ZjldXCIpXG4gICAgICB0aGlzLm5vVHJhbnNpdENhcmRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLVsjZmZmOWU2XVwiLCBcImJvcmRlci1bMC41cHhdXCIsIFwiYm9yZGVyLVsjZmZkYTgwXVwiKVxuICAgICAgY29uc3QgY2hlY2ttYXJrID0gdGhpcy5ub1RyYW5zaXRDYXJkVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrXCIpXG4gICAgICBpZiAoY2hlY2ttYXJrKSBjaGVja21hcmsucmVtb3ZlKClcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuZGlzY291bnRQcmljZUNhcmRUYXJnZXQpIHtcbiAgICAgIHRoaXMuZGlzY291bnRQcmljZUNhcmRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLVsjZjZmN2Y5XVwiKVxuICAgICAgdGhpcy5kaXNjb3VudFByaWNlQ2FyZFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNmZmY5ZTZdXCIsIFwiYm9yZGVyLVswLjVweF1cIiwgXCJib3JkZXItWyNmZmRhODBdXCIpXG4gICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLmRpc2NvdW50UHJpY2VDYXJkVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrXCIpXG4gICAgICBpZiAoY2hlY2ttYXJrKSBjaGVja21hcmsucmVtb3ZlKClcbiAgICB9XG4gICAgXG4gICAgdGhpcy51cGRhdGVSZXN1bHRDb3VudCgpXG4gIH1cblxuICAvLyBBcHBseSBmaWx0ZXJzIGFuZCBjbG9zZSBtb2RhbFxuICBjb25maXJtKCk6IHZvaWQge1xuICAgIC8vIEluIGEgcmVhbCBhcHBsaWNhdGlvbiwgdGhpcyB3b3VsZCB0cmlnZ2VyIGZpbHRlcmluZyBvZiB0aGUgZmxpZ2h0IGxpc3RcbiAgICAvLyBGb3Igbm93LCB3ZSBqdXN0IGNsb3NlIHRoZSBtb2RhbFxuICAgIHRoaXMuY2xvc2VNb2RhbCgpXG4gICAgXG4gICAgLy8gRGlzcGF0Y2ggY3VzdG9tIGV2ZW50IGZvciBvdGhlciBjb250cm9sbGVycyB0byBsaXN0ZW4gdG9cbiAgICB0aGlzLmVsZW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2ZpbHRlcnMtYXBwbGllZCcsIHtcbiAgICAgIGRldGFpbDogeyBmaWx0ZXJzOiB0aGlzLmZpbHRlcnMgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICB9KSlcbiAgfVxuXG4gIC8vIFVwZGF0ZSByZXN1bHQgY291bnQgKHBsYWNlaG9sZGVyIC0gaW4gcmVhbCBhcHAgd291bGQgY291bnQgZmlsdGVyZWQgZmxpZ2h0cylcbiAgdXBkYXRlUmVzdWx0Q291bnQoKTogdm9pZCB7XG4gICAgLy8gTW9jayBjYWxjdWxhdGlvbiAtIGluIHJlYWwgYXBwIHdvdWxkIGZpbHRlciBhY3R1YWwgZmxpZ2h0IGRhdGFcbiAgICBsZXQgY291bnQgPSA2NiAvLyBCYXNlIGNvdW50IGZyb20gc2NyZWVuc2hvdFxuICAgIFxuICAgIGlmICh0aGlzLmZpbHRlcnMuZGlyZWN0RmxpZ2h0KSBjb3VudCA9IE1hdGguZmxvb3IoY291bnQgKiAwLjcpXG4gICAgaWYgKHRoaXMuZmlsdGVycy5ub1RyYW5zaXQpIGNvdW50ID0gTWF0aC5mbG9vcihjb3VudCAqIDAuOClcbiAgICBpZiAodGhpcy5maWx0ZXJzLmFpcmxpbmVzLnNpemUgPiAwKSBjb3VudCA9IE1hdGguZmxvb3IoY291bnQgKiAwLjYpXG4gICAgaWYgKHRoaXMuZmlsdGVycy5kZXBhcnR1cmVBaXJwb3J0cy5zaXplID4gMCkgY291bnQgPSBNYXRoLmZsb29yKGNvdW50ICogMC43KVxuICAgIGlmICh0aGlzLmZpbHRlcnMuYXJyaXZhbEFpcnBvcnRzLnNpemUgPiAwKSBjb3VudCA9IE1hdGguZmxvb3IoY291bnQgKiAwLjcpXG4gICAgaWYgKHRoaXMuZmlsdGVycy5kZXBhcnR1cmVUaW1lUmFuZ2VzLnNpemUgPiAwKSBjb3VudCA9IE1hdGguZmxvb3IoY291bnQgKiAwLjUpXG4gICAgaWYgKHRoaXMuZmlsdGVycy5haXJjcmFmdE1vZGVscy5zaXplID4gMCkgY291bnQgPSBNYXRoLmZsb29yKGNvdW50ICogMC42KVxuICAgIFxuICAgIHRoaXMucmVzdWx0Q291bnRUYXJnZXQudGV4dENvbnRlbnQgPSBjb3VudC50b1N0cmluZygpXG4gICAgXG4gICAgLy8gVXBkYXRlIGZpbHRlciBiYWRnZVxuICAgIHRoaXMudXBkYXRlRmlsdGVyQmFkZ2UoKVxuICAgIFxuICAgIC8vIFVwZGF0ZSBzZWxlY3RlZCBmaWx0ZXJzIGRpc3BsYXlcbiAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkRmlsdGVyc0Rpc3BsYXkoKVxuICB9XG5cbiAgLy8gVXBkYXRlIGZpbHRlciBiYWRnZSBjb3VudFxuICB1cGRhdGVGaWx0ZXJCYWRnZSgpOiB2b2lkIHtcbiAgICBsZXQgYWN0aXZlRmlsdGVyQ291bnQgPSAwXG4gICAgXG4gICAgLy8gQ291bnQgYm9vbGVhbiBmaWx0ZXJzXG4gICAgaWYgKHRoaXMuZmlsdGVycy5kaXJlY3RGbGlnaHQpIGFjdGl2ZUZpbHRlckNvdW50KytcbiAgICBpZiAodGhpcy5maWx0ZXJzLm5vVHJhbnNpdCkgYWN0aXZlRmlsdGVyQ291bnQrK1xuICAgIGlmICh0aGlzLmZpbHRlcnMuaW5jbHVkZUNoZWNrZWRMdWdnYWdlKSBhY3RpdmVGaWx0ZXJDb3VudCsrXG4gICAgaWYgKHRoaXMuZmlsdGVycy5ub1NoYXJlZEZsaWdodCkgYWN0aXZlRmlsdGVyQ291bnQrK1xuICAgIGlmICh0aGlzLmZpbHRlcnMuZGlzY291bnRQcmljZSkgYWN0aXZlRmlsdGVyQ291bnQrK1xuICAgIFxuICAgIC8vIENvdW50IFNldC1iYXNlZCBmaWx0ZXJzXG4gICAgYWN0aXZlRmlsdGVyQ291bnQgKz0gdGhpcy5maWx0ZXJzLmFpcmxpbmVzLnNpemVcbiAgICBhY3RpdmVGaWx0ZXJDb3VudCArPSB0aGlzLmZpbHRlcnMuZGVwYXJ0dXJlQWlycG9ydHMuc2l6ZVxuICAgIGFjdGl2ZUZpbHRlckNvdW50ICs9IHRoaXMuZmlsdGVycy5hcnJpdmFsQWlycG9ydHMuc2l6ZVxuICAgIGFjdGl2ZUZpbHRlckNvdW50ICs9IHRoaXMuZmlsdGVycy5kZXBhcnR1cmVUaW1lUmFuZ2VzLnNpemVcbiAgICBhY3RpdmVGaWx0ZXJDb3VudCArPSB0aGlzLmZpbHRlcnMuYWlyY3JhZnRNb2RlbHMuc2l6ZVxuICAgIFxuICAgIC8vIFVwZGF0ZSBiYWRnZSBkaXNwbGF5XG4gICAgaWYgKGFjdGl2ZUZpbHRlckNvdW50ID4gMCkge1xuICAgICAgdGhpcy5maWx0ZXJCYWRnZVRhcmdldC50ZXh0Q29udGVudCA9IGFjdGl2ZUZpbHRlckNvdW50LnRvU3RyaW5nKClcbiAgICAgIHRoaXMuZmlsdGVyQmFkZ2VUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZpbHRlckJhZGdlVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgICB9XG4gIH1cblxuICAvLyBVcGRhdGUgc2VsZWN0ZWQgZmlsdGVycyBkaXNwbGF5XG4gIHVwZGF0ZVNlbGVjdGVkRmlsdGVyc0Rpc3BsYXkoKTogdm9pZCB7XG4gICAgY29uc3QgZmlsdGVyTGFiZWxzOiB7IHRleHQ6IHN0cmluZzsgdHlwZTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH1bXSA9IFtdXG4gICAgXG4gICAgLy8gQWRkIGJvb2xlYW4gZmlsdGVyc1xuICAgIGNvbnN0IGZpbHRlck5hbWVNYXA6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7XG4gICAgICBkaXJlY3RGbGlnaHQ6IFwiXHU1M0VBXHU3NzBCXHU3NkY0XHU5OERFXCIsXG4gICAgICBub1NoYXJlZEZsaWdodDogXCJcdTRFMERcdTc3MEJcdTUxNzFcdTRFQUJcdTgyMkFcdTczRURcIixcbiAgICAgIGluY2x1ZGVDaGVja2VkTHVnZ2FnZTogXCJcdTU0MkJcdTYyNThcdThGRDBcdTg4NENcdTY3NEVcdTk4OURcIixcbiAgICAgIG5vVHJhbnNpdDogXCJcdTY1RTBcdTk3MDBcdThGQzdcdTU4ODNcdTdCN0VcIixcbiAgICAgIGRpc2NvdW50UHJpY2U6IFwiXHU3NzBCXHU0RjE4XHU2MEUwXHU1MjREXHU0RUY3XHU2ODNDXCJcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuZmlsdGVycy5kaXJlY3RGbGlnaHQpIHtcbiAgICAgIGZpbHRlckxhYmVscy5wdXNoKHsgdGV4dDogZmlsdGVyTmFtZU1hcC5kaXJlY3RGbGlnaHQsIHR5cGU6IFwiZGlyZWN0RmxpZ2h0XCIsIHZhbHVlOiBcIlwiIH0pXG4gICAgfVxuICAgIGlmICh0aGlzLmZpbHRlcnMubm9TaGFyZWRGbGlnaHQpIHtcbiAgICAgIGZpbHRlckxhYmVscy5wdXNoKHsgdGV4dDogZmlsdGVyTmFtZU1hcC5ub1NoYXJlZEZsaWdodCwgdHlwZTogXCJub1NoYXJlZEZsaWdodFwiLCB2YWx1ZTogXCJcIiB9KVxuICAgIH1cbiAgICBpZiAodGhpcy5maWx0ZXJzLmluY2x1ZGVDaGVja2VkTHVnZ2FnZSkge1xuICAgICAgZmlsdGVyTGFiZWxzLnB1c2goeyB0ZXh0OiBmaWx0ZXJOYW1lTWFwLmluY2x1ZGVDaGVja2VkTHVnZ2FnZSwgdHlwZTogXCJpbmNsdWRlQ2hlY2tlZEx1Z2dhZ2VcIiwgdmFsdWU6IFwiXCIgfSlcbiAgICB9XG4gICAgaWYgKHRoaXMuZmlsdGVycy5ub1RyYW5zaXQpIHtcbiAgICAgIGZpbHRlckxhYmVscy5wdXNoKHsgdGV4dDogZmlsdGVyTmFtZU1hcC5ub1RyYW5zaXQsIHR5cGU6IFwibm9UcmFuc2l0XCIsIHZhbHVlOiBcIlwiIH0pXG4gICAgfVxuICAgIGlmICh0aGlzLmZpbHRlcnMuZGlzY291bnRQcmljZSkge1xuICAgICAgZmlsdGVyTGFiZWxzLnB1c2goeyB0ZXh0OiBmaWx0ZXJOYW1lTWFwLmRpc2NvdW50UHJpY2UsIHR5cGU6IFwiZGlzY291bnRQcmljZVwiLCB2YWx1ZTogXCJcIiB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBBZGQgU2V0LWJhc2VkIGZpbHRlcnNcbiAgICB0aGlzLmZpbHRlcnMuYWlybGluZXMuZm9yRWFjaChhaXJsaW5lID0+IHtcbiAgICAgIGZpbHRlckxhYmVscy5wdXNoKHsgdGV4dDogYWlybGluZSwgdHlwZTogXCJhaXJsaW5lXCIsIHZhbHVlOiBhaXJsaW5lIH0pXG4gICAgfSlcbiAgICBcbiAgICB0aGlzLmZpbHRlcnMuZGVwYXJ0dXJlQWlycG9ydHMuZm9yRWFjaChhaXJwb3J0ID0+IHtcbiAgICAgIGZpbHRlckxhYmVscy5wdXNoKHsgdGV4dDogYWlycG9ydCwgdHlwZTogXCJkZXBhcnR1cmVBaXJwb3J0XCIsIHZhbHVlOiBhaXJwb3J0IH0pXG4gICAgfSlcbiAgICBcbiAgICB0aGlzLmZpbHRlcnMuYXJyaXZhbEFpcnBvcnRzLmZvckVhY2goYWlycG9ydCA9PiB7XG4gICAgICBmaWx0ZXJMYWJlbHMucHVzaCh7IHRleHQ6IGFpcnBvcnQsIHR5cGU6IFwiYXJyaXZhbEFpcnBvcnRcIiwgdmFsdWU6IGFpcnBvcnQgfSlcbiAgICB9KVxuICAgIFxuICAgIHRoaXMuZmlsdGVycy5kZXBhcnR1cmVUaW1lUmFuZ2VzLmZvckVhY2gocmFuZ2UgPT4ge1xuICAgICAgZmlsdGVyTGFiZWxzLnB1c2goeyB0ZXh0OiByYW5nZSwgdHlwZTogXCJkZXBhcnR1cmVUaW1lXCIsIHZhbHVlOiByYW5nZSB9KVxuICAgIH0pXG4gICAgXG4gICAgdGhpcy5maWx0ZXJzLmFpcmNyYWZ0TW9kZWxzLmZvckVhY2gobW9kZWwgPT4ge1xuICAgICAgZmlsdGVyTGFiZWxzLnB1c2goeyB0ZXh0OiBtb2RlbCwgdHlwZTogXCJhaXJjcmFmdE1vZGVsXCIsIHZhbHVlOiBtb2RlbCB9KVxuICAgIH0pXG4gICAgXG4gICAgLy8gQ2xlYXIgZXhpc3RpbmcgZmlsdGVyIHRhZ3NcbiAgICB0aGlzLnNlbGVjdGVkRmlsdGVyc0xpc3RUYXJnZXQuaW5uZXJIVE1MID0gXCJcIlxuICAgIFxuICAgIC8vIFNob3cvaGlkZSBjb250YWluZXIgYmFzZWQgb24gd2hldGhlciB0aGVyZSBhcmUgZmlsdGVyc1xuICAgIGlmIChmaWx0ZXJMYWJlbHMubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5zZWxlY3RlZEZpbHRlcnNDb250YWluZXJUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgICAgXG4gICAgICAvLyBDcmVhdGUgYW5kIGFwcGVuZCBmaWx0ZXIgdGFnc1xuICAgICAgZmlsdGVyTGFiZWxzLmZvckVhY2goZmlsdGVyID0+IHtcbiAgICAgICAgY29uc3QgdGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKVxuICAgICAgICB0YWcuY2xhc3NOYW1lID0gXCJpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgcHgtMiBweS0xIGJnLXllbGxvdy0xMDAgdGV4dC15ZWxsb3ctODAwIHRleHQteHMgcm91bmRlZC1mdWxsIGJvcmRlciBib3JkZXIteWVsbG93LTMwMCBob3ZlcjpiZy15ZWxsb3ctMjAwXCJcbiAgICAgICAgdGFnLmRhdGFzZXQuZmlsdGVyVHlwZSA9IGZpbHRlci50eXBlXG4gICAgICAgIHRhZy5kYXRhc2V0LmZpbHRlclZhbHVlID0gZmlsdGVyLnZhbHVlXG4gICAgICAgIHRhZy5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgJHtmaWx0ZXIudGV4dH1cbiAgICAgICAgICA8c3ZnIGNsYXNzPVwidy0zIGgtM1wiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCI+XG4gICAgICAgICAgICA8cGF0aCBmaWxsLXJ1bGU9XCJldmVub2RkXCJcbiAgICAgICAgICAgICAgZD1cIk00LjI5MyA0LjI5M2ExIDEgMCAwMTEuNDE0IDBMMTAgOC41ODZsNC4yOTMtNC4yOTNhMSAxIDAgMTExLjQxNCAxLjQxNEwxMS40MTQgMTBsNC4yOTMgNC4yOTNhMSAxIDBcbiAgICAgICAgICAgICAgICAtMS40MTQgMS40MTRMMTAgMTEuNDE0bC00LjI5MyA0LjI5M2ExIDEgMCAwMS0xLjQxNC0xLjQxNEw4LjU4NiAxMCA0LjI5MyA1LjcwN2ExIDEgMCAwMTAtMS40MTR6XCJcbiAgICAgICAgICAgICAgY2xpcC1ydWxlPVwiZXZlbm9kZFwiLz5cbiAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgYFxuICAgICAgICB0YWcuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMucmVtb3ZlRmlsdGVyKGZpbHRlci50eXBlLCBmaWx0ZXIudmFsdWUpKVxuICAgICAgICB0aGlzLnNlbGVjdGVkRmlsdGVyc0xpc3RUYXJnZXQuYXBwZW5kQ2hpbGQodGFnKVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZWxlY3RlZEZpbHRlcnNDb250YWluZXJUYXJnZXQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgIH1cbiAgfVxuXG4gIC8vIFJlbW92ZSBhIHNpbmdsZSBmaWx0ZXJcbiAgcmVtb3ZlRmlsdGVyKHR5cGU6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IHZvaWQge1xuICAgIHN3aXRjaCh0eXBlKSB7XG4gICAgICBjYXNlIFwiZGlyZWN0RmxpZ2h0XCI6XG4gICAgICAgIHRoaXMuZmlsdGVycy5kaXJlY3RGbGlnaHQgPSBmYWxzZVxuICAgICAgICB0aGlzLmRpcmVjdEZsaWdodENoZWNrYm94VGFyZ2V0LmNoZWNrZWQgPSBmYWxzZVxuICAgICAgICBpZiAodGhpcy5xdWlja0RpcmVjdEZsaWdodFRhcmdldCkge1xuICAgICAgICAgIHRoaXMucXVpY2tEaXJlY3RGbGlnaHRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgICAgIHRoaXMucXVpY2tEaXJlY3RGbGlnaHRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRpcmVjdEZsaWdodENhcmRUYXJnZXQpIHtcbiAgICAgICAgICB0aGlzLmRpcmVjdEZsaWdodENhcmRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLVsjZjZmN2Y5XVwiKVxuICAgICAgICAgIHRoaXMuZGlyZWN0RmxpZ2h0Q2FyZFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNmZmY5ZTZdXCIsIFwiYm9yZGVyLVswLjVweF1cIiwgXCJib3JkZXItWyNmZmRhODBdXCIpXG4gICAgICAgICAgY29uc3QgY2hlY2ttYXJrID0gdGhpcy5kaXJlY3RGbGlnaHRDYXJkVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrXCIpXG4gICAgICAgICAgaWYgKGNoZWNrbWFyaykgY2hlY2ttYXJrLnJlbW92ZSgpXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgXCJub1NoYXJlZEZsaWdodFwiOlxuICAgICAgICB0aGlzLmZpbHRlcnMubm9TaGFyZWRGbGlnaHQgPSBmYWxzZVxuICAgICAgICB0aGlzLm5vU2hhcmVkRmxpZ2h0Q2hlY2tib3hUYXJnZXQuY2hlY2tlZCA9IGZhbHNlXG4gICAgICAgIGlmICh0aGlzLnF1aWNrTm9TaGFyZWRGbGlnaHRUYXJnZXQpIHtcbiAgICAgICAgICB0aGlzLnF1aWNrTm9TaGFyZWRGbGlnaHRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgICAgIHRoaXMucXVpY2tOb1NoYXJlZEZsaWdodFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubm9TaGFyZWRGbGlnaHRDYXJkVGFyZ2V0KSB7XG4gICAgICAgICAgdGhpcy5ub1NoYXJlZEZsaWdodENhcmRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLVsjZjZmN2Y5XVwiKVxuICAgICAgICAgIHRoaXMubm9TaGFyZWRGbGlnaHRDYXJkVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI2ZmZjllNl1cIiwgXCJib3JkZXItWzAuNXB4XVwiLCBcImJvcmRlci1bI2ZmZGE4MF1cIilcbiAgICAgICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLm5vU2hhcmVkRmxpZ2h0Q2FyZFRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbWFya1wiKVxuICAgICAgICAgIGlmIChjaGVja21hcmspIGNoZWNrbWFyay5yZW1vdmUoKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIFwiaW5jbHVkZUNoZWNrZWRMdWdnYWdlXCI6XG4gICAgICAgIHRoaXMuZmlsdGVycy5pbmNsdWRlQ2hlY2tlZEx1Z2dhZ2UgPSBmYWxzZVxuICAgICAgICB0aGlzLmluY2x1ZGVDaGVja2VkTHVnZ2FnZUNoZWNrYm94VGFyZ2V0LmNoZWNrZWQgPSBmYWxzZVxuICAgICAgICBpZiAodGhpcy5xdWlja0NoZWNrZWRMdWdnYWdlVGFyZ2V0KSB7XG4gICAgICAgICAgdGhpcy5xdWlja0NoZWNrZWRMdWdnYWdlVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgICAgICB0aGlzLnF1aWNrQ2hlY2tlZEx1Z2dhZ2VUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNoZWNrZWRMdWdnYWdlQ2FyZFRhcmdldCkge1xuICAgICAgICAgIHRoaXMuY2hlY2tlZEx1Z2dhZ2VDYXJkVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy1bI2Y2ZjdmOV1cIilcbiAgICAgICAgICB0aGlzLmNoZWNrZWRMdWdnYWdlQ2FyZFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNmZmY5ZTZdXCIsIFwiYm9yZGVyLVswLjVweF1cIiwgXCJib3JkZXItWyNmZmRhODBdXCIpXG4gICAgICAgICAgY29uc3QgY2hlY2ttYXJrID0gdGhpcy5jaGVja2VkTHVnZ2FnZUNhcmRUYXJnZXQucXVlcnlTZWxlY3RvcihcIi5jaGVja21hcmtcIilcbiAgICAgICAgICBpZiAoY2hlY2ttYXJrKSBjaGVja21hcmsucmVtb3ZlKClcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBcIm5vVHJhbnNpdFwiOlxuICAgICAgICB0aGlzLmZpbHRlcnMubm9UcmFuc2l0ID0gZmFsc2VcbiAgICAgICAgdGhpcy5ub1RyYW5zaXRDaGVja2JveFRhcmdldC5jaGVja2VkID0gZmFsc2VcbiAgICAgICAgaWYgKHRoaXMucXVpY2tOb1RyYW5zaXRUYXJnZXQpIHtcbiAgICAgICAgICB0aGlzLnF1aWNrTm9UcmFuc2l0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgICAgICB0aGlzLnF1aWNrTm9UcmFuc2l0VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5ub1RyYW5zaXRDYXJkVGFyZ2V0KSB7XG4gICAgICAgICAgdGhpcy5ub1RyYW5zaXRDYXJkVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy1bI2Y2ZjdmOV1cIilcbiAgICAgICAgICB0aGlzLm5vVHJhbnNpdENhcmRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLVsjZmZmOWU2XVwiLCBcImJvcmRlci1bMC41cHhdXCIsIFwiYm9yZGVyLVsjZmZkYTgwXVwiKVxuICAgICAgICAgIGNvbnN0IGNoZWNrbWFyayA9IHRoaXMubm9UcmFuc2l0Q2FyZFRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbWFya1wiKVxuICAgICAgICAgIGlmIChjaGVja21hcmspIGNoZWNrbWFyay5yZW1vdmUoKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIFwiZGlzY291bnRQcmljZVwiOlxuICAgICAgICB0aGlzLmZpbHRlcnMuZGlzY291bnRQcmljZSA9IGZhbHNlXG4gICAgICAgIHRoaXMuZGlzY291bnRQcmljZUNoZWNrYm94VGFyZ2V0LmNoZWNrZWQgPSBmYWxzZVxuICAgICAgICBpZiAodGhpcy5xdWlja0Rpc2NvdW50UHJpY2VUYXJnZXQpIHtcbiAgICAgICAgICB0aGlzLnF1aWNrRGlzY291bnRQcmljZVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgICAgdGhpcy5xdWlja0Rpc2NvdW50UHJpY2VUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRpc2NvdW50UHJpY2VDYXJkVGFyZ2V0KSB7XG4gICAgICAgICAgdGhpcy5kaXNjb3VudFByaWNlQ2FyZFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNmNmY3ZjldXCIpXG4gICAgICAgICAgdGhpcy5kaXNjb3VudFByaWNlQ2FyZFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNmZmY5ZTZdXCIsIFwiYm9yZGVyLVswLjVweF1cIiwgXCJib3JkZXItWyNmZmRhODBdXCIpXG4gICAgICAgICAgY29uc3QgY2hlY2ttYXJrID0gdGhpcy5kaXNjb3VudFByaWNlQ2FyZFRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbWFya1wiKVxuICAgICAgICAgIGlmIChjaGVja21hcmspIGNoZWNrbWFyay5yZW1vdmUoKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIFwiYWlybGluZVwiOiB7XG4gICAgICAgIHRoaXMuZmlsdGVycy5haXJsaW5lcy5kZWxldGUodmFsdWUpXG4gICAgICAgIGNvbnN0IGFpcmxpbmVDaGVja2JveCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KGBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl1bZGF0YS1maWx0ZXItdHlwZT1cImFpcmxpbmVcIl1bdmFsdWU9XCIke3ZhbHVlfVwiXWApXG4gICAgICAgIGlmIChhaXJsaW5lQ2hlY2tib3gpIGFpcmxpbmVDaGVja2JveC5jaGVja2VkID0gZmFsc2VcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJkZXBhcnR1cmVBaXJwb3J0XCI6IHtcbiAgICAgICAgdGhpcy5maWx0ZXJzLmRlcGFydHVyZUFpcnBvcnRzLmRlbGV0ZSh2YWx1ZSlcbiAgICAgICAgY29uc3QgZGVwQWlycG9ydENoZWNrYm94ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oYGlucHV0W3R5cGU9XCJjaGVja2JveFwiXVtkYXRhLWZpbHRlci10eXBlPVwiYWlycG9ydFwiXVt2YWx1ZT1cIiR7dmFsdWV9XCJdYClcbiAgICAgICAgaWYgKGRlcEFpcnBvcnRDaGVja2JveCkgZGVwQWlycG9ydENoZWNrYm94LmNoZWNrZWQgPSBmYWxzZVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSBcImFycml2YWxBaXJwb3J0XCI6IHtcbiAgICAgICAgdGhpcy5maWx0ZXJzLmFycml2YWxBaXJwb3J0cy5kZWxldGUodmFsdWUpXG4gICAgICAgIGNvbnN0IGFyckFpcnBvcnRDaGVja2JveCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KGBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl1bZGF0YS1maWx0ZXItdHlwZT1cImFpcnBvcnRcIl1bdmFsdWU9XCIke3ZhbHVlfVwiXWApXG4gICAgICAgIGlmIChhcnJBaXJwb3J0Q2hlY2tib3gpIGFyckFpcnBvcnRDaGVja2JveC5jaGVja2VkID0gZmFsc2VcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJkZXBhcnR1cmVUaW1lXCI6IHtcbiAgICAgICAgdGhpcy5maWx0ZXJzLmRlcGFydHVyZVRpbWVSYW5nZXMuZGVsZXRlKHZhbHVlKVxuICAgICAgICBjb25zdCB0aW1lQ2hlY2tib3ggPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PihgaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdW2RhdGEtZmlsdGVyLXR5cGU9XCJkZXBhcnR1cmUtdGltZVwiXVt2YWx1ZT1cIiR7dmFsdWV9XCJdYClcbiAgICAgICAgaWYgKHRpbWVDaGVja2JveCkgdGltZUNoZWNrYm94LmNoZWNrZWQgPSBmYWxzZVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSBcImFpcmNyYWZ0TW9kZWxcIjoge1xuICAgICAgICB0aGlzLmZpbHRlcnMuYWlyY3JhZnRNb2RlbHMuZGVsZXRlKHZhbHVlKVxuICAgICAgICBjb25zdCBtb2RlbENoZWNrYm94ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oYGlucHV0W3R5cGU9XCJjaGVja2JveFwiXVtkYXRhLWZpbHRlci10eXBlPVwiYWlyY3JhZnQtbW9kZWxcIl1bdmFsdWU9XCIke3ZhbHVlfVwiXWApXG4gICAgICAgIGlmIChtb2RlbENoZWNrYm94KSBtb2RlbENoZWNrYm94LmNoZWNrZWQgPSBmYWxzZVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnVwZGF0ZVJlc3VsdENvdW50KClcbiAgfVxuXG4gIC8vIEhlbHBlciBtZXRob2QgdG8gY3JlYXRlIGNoZWNrbWFyayBTVkdcbiAgcHJpdmF0ZSBjcmVhdGVDaGVja21hcmsoKTogU1ZHRWxlbWVudCB7XG4gICAgY29uc3Qgc3ZnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJzdmdcIilcbiAgICBzdmcuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJjaGVja21hcmsgYWJzb2x1dGUgYm90dG9tLTAgcmlnaHQtMFwiKVxuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCBcIjE2XCIpXG4gICAgc3ZnLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCBcIjE2XCIpXG4gICAgc3ZnLnNldEF0dHJpYnV0ZShcInZpZXdCb3hcIiwgXCIwIDAgMjQgMjRcIilcbiAgICBcbiAgICAvLyBCYWNrZ3JvdW5kIHRyaWFuZ2xlXG4gICAgY29uc3QgYmdQYXRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJwYXRoXCIpXG4gICAgYmdQYXRoLnNldEF0dHJpYnV0ZShcImRcIiwgXCJNMjQgMjRIMEwyNCAwVjI0WlwiKVxuICAgIGJnUGF0aC5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsIFwiI2ZjYzMyYVwiKVxuICAgIHN2Zy5hcHBlbmRDaGlsZChiZ1BhdGgpXG4gICAgXG4gICAgLy8gQ2hlY2ttYXJrIHBhdGhcbiAgICBjb25zdCBjaGVja1BhdGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInBhdGhcIilcbiAgICBjaGVja1BhdGguc2V0QXR0cmlidXRlKFwiZFwiLCBcIk0xNCAxOGwyIDIgNC00XCIpXG4gICAgY2hlY2tQYXRoLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLCBcIndoaXRlXCIpXG4gICAgY2hlY2tQYXRoLnNldEF0dHJpYnV0ZShcInN0cm9rZS13aWR0aFwiLCBcIjJcIilcbiAgICBjaGVja1BhdGguc2V0QXR0cmlidXRlKFwic3Ryb2tlLWxpbmVjYXBcIiwgXCJyb3VuZFwiKVxuICAgIGNoZWNrUGF0aC5zZXRBdHRyaWJ1dGUoXCJzdHJva2UtbGluZWpvaW5cIiwgXCJyb3VuZFwiKVxuICAgIGNoZWNrUGF0aC5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsIFwibm9uZVwiKVxuICAgIHN2Zy5hcHBlbmRDaGlsZChjaGVja1BhdGgpXG4gICAgXG4gICAgcmV0dXJuIHN2Z1xuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJtb2RhbFwiLFxuICAgIFwib3ZlcmxheVwiLFxuICAgIFwiZGlyZWN0UHJpb3JpdHlCdXR0b25cIixcbiAgICBcInByaWNlUHJpb3JpdHlCdXR0b25cIixcbiAgICBcInRpbWVTb3J0QnV0dG9uXCIsXG4gICAgXCJmbGlnaHRMaXN0XCJcbiAgXVxuICBcbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBpbml0aWFsU29ydDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IFwiZGVmYXVsdFwiIH1cbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgb3ZlcmxheVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkaXJlY3RQcmlvcml0eUJ1dHRvblRhcmdldDogSFRNTEJ1dHRvbkVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBwcmljZVByaW9yaXR5QnV0dG9uVGFyZ2V0OiBIVE1MQnV0dG9uRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRpbWVTb3J0QnV0dG9uVGFyZ2V0OiBIVE1MQnV0dG9uRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGZsaWdodExpc3RUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaW5pdGlhbFNvcnRWYWx1ZTogc3RyaW5nXG5cbiAgLy8gU29ydCBzdGF0ZVxuICBwcml2YXRlIGN1cnJlbnRTb3J0OiBzdHJpbmcgPSBcImRlZmF1bHRcIiAvLyBkZWZhdWx0LCBkaXJlY3RfcHJpb3JpdHksIHByaWNlX2FzYywgZGVwYXJ0dXJlX2Vhcmx5LCBkZXBhcnR1cmVfbGF0ZSwgYXJyaXZhbF9lYXJseSwgYXJyaXZhbF9sYXRlLCBkdXJhdGlvbl9zaG9ydFxuICBwcml2YXRlIGRpcmVjdFByaW9yaXR5QWN0aXZlOiBib29sZWFuID0gZmFsc2VcbiAgcHJpdmF0ZSBwcmljZVByaW9yaXR5QWN0aXZlOiBib29sZWFuID0gZmFsc2VcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiRmxpZ2h0U29ydCBjb250cm9sbGVyIGNvbm5lY3RlZFwiKVxuICAgIFxuICAgIC8vIEluaXRpYWxpemUgc29ydCBzdGF0ZSBiYXNlZCBvbiBpbml0aWFsU29ydCB2YWx1ZVxuICAgIGlmICh0aGlzLmluaXRpYWxTb3J0VmFsdWUgPT09IFwicHJpY2VfYXNjXCIpIHtcbiAgICAgIHRoaXMuY3VycmVudFNvcnQgPSBcInByaWNlX2FzY1wiXG4gICAgICB0aGlzLnByaWNlUHJpb3JpdHlBY3RpdmUgPSB0cnVlXG4gICAgICB0aGlzLnByaWNlUHJpb3JpdHlCdXR0b25UYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1iLTJcIiwgXCJib3JkZXItYmxhY2tcIilcbiAgICAgIHRoaXMucHJpY2VQcmlvcml0eUJ1dHRvblRhcmdldC5xdWVyeVNlbGVjdG9yKFwic3BhblwiKT8uY2xhc3NMaXN0LmFkZChcImZvbnQtYm9sZFwiKVxuICAgICAgdGhpcy5wcmljZVByaW9yaXR5QnV0dG9uVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCJzcGFuXCIpPy5jbGFzc0xpc3QucmVtb3ZlKFwidGV4dC1ncmF5LTYwMFwiKVxuICAgIH1cbiAgfVxuXG4gIC8vIFRvZ2dsZSBkaXJlY3QgZmxpZ2h0IHByaW9yaXR5XG4gIHRvZ2dsZURpcmVjdFByaW9yaXR5KCk6IHZvaWQge1xuICAgIHRoaXMuZGlyZWN0UHJpb3JpdHlBY3RpdmUgPSAhdGhpcy5kaXJlY3RQcmlvcml0eUFjdGl2ZVxuICAgIFxuICAgIGlmICh0aGlzLmRpcmVjdFByaW9yaXR5QWN0aXZlKSB7XG4gICAgICB0aGlzLmN1cnJlbnRTb3J0ID0gXCJkaXJlY3RfcHJpb3JpdHlcIlxuICAgICAgdGhpcy5kaXJlY3RQcmlvcml0eUJ1dHRvblRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWItMlwiLCBcImJvcmRlci1ibGFja1wiKVxuICAgICAgdGhpcy5kaXJlY3RQcmlvcml0eUJ1dHRvblRhcmdldC5xdWVyeVNlbGVjdG9yKFwic3BhblwiKT8uY2xhc3NMaXN0LmFkZChcImZvbnQtYm9sZFwiKVxuICAgICAgdGhpcy5kaXJlY3RQcmlvcml0eUJ1dHRvblRhcmdldC5xdWVyeVNlbGVjdG9yKFwic3BhblwiKT8uY2xhc3NMaXN0LnJlbW92ZShcInRleHQtZ3JheS02MDBcIilcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdXJyZW50U29ydCA9IFwiZGVmYXVsdFwiXG4gICAgICB0aGlzLmRpcmVjdFByaW9yaXR5QnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItYi0yXCIsIFwiYm9yZGVyLWJsYWNrXCIpXG4gICAgICB0aGlzLmRpcmVjdFByaW9yaXR5QnV0dG9uVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCJzcGFuXCIpPy5jbGFzc0xpc3QucmVtb3ZlKFwiZm9udC1ib2xkXCIpXG4gICAgICB0aGlzLmRpcmVjdFByaW9yaXR5QnV0dG9uVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCJzcGFuXCIpPy5jbGFzc0xpc3QuYWRkKFwidGV4dC1ncmF5LTYwMFwiKVxuICAgIH1cbiAgICBcbiAgICB0aGlzLmFwcGx5U29ydCgpXG4gIH1cblxuICAvLyBUb2dnbGUgcHJpY2UgcHJpb3JpdHkgKGxvdyBwcmljZSBmaXJzdClcbiAgdG9nZ2xlUHJpY2VQcmlvcml0eSgpOiB2b2lkIHtcbiAgICB0aGlzLnByaWNlUHJpb3JpdHlBY3RpdmUgPSAhdGhpcy5wcmljZVByaW9yaXR5QWN0aXZlXG4gICAgXG4gICAgaWYgKHRoaXMucHJpY2VQcmlvcml0eUFjdGl2ZSkge1xuICAgICAgdGhpcy5jdXJyZW50U29ydCA9IFwicHJpY2VfYXNjXCJcbiAgICAgIHRoaXMucHJpY2VQcmlvcml0eUJ1dHRvblRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWItMlwiLCBcImJvcmRlci1ibGFja1wiKVxuICAgICAgdGhpcy5wcmljZVByaW9yaXR5QnV0dG9uVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCJzcGFuXCIpPy5jbGFzc0xpc3QuYWRkKFwiZm9udC1ib2xkXCIpXG4gICAgICB0aGlzLnByaWNlUHJpb3JpdHlCdXR0b25UYXJnZXQucXVlcnlTZWxlY3RvcihcInNwYW5cIik/LmNsYXNzTGlzdC5yZW1vdmUoXCJ0ZXh0LWdyYXktNjAwXCIpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY3VycmVudFNvcnQgPSBcImRlZmF1bHRcIlxuICAgICAgdGhpcy5wcmljZVByaW9yaXR5QnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItYi0yXCIsIFwiYm9yZGVyLWJsYWNrXCIpXG4gICAgICB0aGlzLnByaWNlUHJpb3JpdHlCdXR0b25UYXJnZXQucXVlcnlTZWxlY3RvcihcInNwYW5cIik/LmNsYXNzTGlzdC5yZW1vdmUoXCJmb250LWJvbGRcIilcbiAgICAgIHRoaXMucHJpY2VQcmlvcml0eUJ1dHRvblRhcmdldC5xdWVyeVNlbGVjdG9yKFwic3BhblwiKT8uY2xhc3NMaXN0LmFkZChcInRleHQtZ3JheS02MDBcIilcbiAgICB9XG4gICAgXG4gICAgdGhpcy5hcHBseVNvcnQoKVxuICB9XG5cbiAgLy8gT3BlbiB0aW1lIHNvcnQgbW9kYWxcbiAgb3BlblRpbWVTb3J0TW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgdGhpcy5vdmVybGF5VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICBcbiAgICAvLyBBbmltYXRlIG1vZGFsXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJ0cmFuc2xhdGUteS1mdWxsXCIpXG4gICAgICB0aGlzLm92ZXJsYXlUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcIm9wYWNpdHktMFwiKVxuICAgIH0sIDEwKVxuICB9XG5cbiAgLy8gQ2xvc2UgbW9kYWxcbiAgY2xvc2VNb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJ0cmFuc2xhdGUteS1mdWxsXCIpXG4gICAgdGhpcy5vdmVybGF5VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJvcGFjaXR5LTBcIilcbiAgICBcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgICAgdGhpcy5vdmVybGF5VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgICB9LCAzMDApXG4gIH1cblxuICAvLyBBcHBseSBzb3J0IG9wdGlvbiBmcm9tIHRpbWUgc29ydCBtb2RhbFxuICBhcHBseVNvcnRPcHRpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGNvbnN0IHNvcnRUeXBlID0gYnV0dG9uLmRhdGFzZXQuc29ydFR5cGVcbiAgICBcbiAgICBpZiAoIXNvcnRUeXBlKSByZXR1cm5cbiAgICBcbiAgICB0aGlzLmN1cnJlbnRTb3J0ID0gc29ydFR5cGVcbiAgICBcbiAgICAvLyBVcGRhdGUgdGltZSBzb3J0IGJ1dHRvbiB0ZXh0IGFuZCBzdGF0ZVxuICAgIHRoaXMudXBkYXRlVGltZVNvcnRCdXR0b25UZXh0KHNvcnRUeXBlKVxuICAgIFxuICAgIHRoaXMuYXBwbHlTb3J0KClcbiAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICB9XG5cbiAgLy8gVXBkYXRlIHRpbWUgc29ydCBidXR0b24gdGV4dCBiYXNlZCBvbiBzZWxlY3RlZCBzb3J0XG4gIHByaXZhdGUgdXBkYXRlVGltZVNvcnRCdXR0b25UZXh0KHNvcnRUeXBlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCB0ZXh0TWFwOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICAgICAgXCJkZXBhcnR1cmVfZWFybHlcIjogXCJcdThENzdcdTk4REVcdTY1RTktXHU2NjVBXCIsXG4gICAgICBcImRlcGFydHVyZV9sYXRlXCI6IFwiXHU4RDc3XHU5OERFXHU2NjVBLVx1NjVFOVwiLFxuICAgICAgXCJhcnJpdmFsX2Vhcmx5XCI6IFwiXHU1MjMwXHU4RkJFXHU2NUU5LVx1NjY1QVwiLFxuICAgICAgXCJhcnJpdmFsX2xhdGVcIjogXCJcdTUyMzBcdThGQkVcdTY2NUEtXHU2NUU5XCIsXG4gICAgICBcImR1cmF0aW9uX3Nob3J0XCI6IFwiXHU4MDE3XHU2NUY2XHU3N0VELVx1OTU3RlwiXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGJ1dHRvblRleHQgPSB0ZXh0TWFwW3NvcnRUeXBlXVxuICAgIGlmIChidXR0b25UZXh0KSB7XG4gICAgICBjb25zdCBzcGFuID0gdGhpcy50aW1lU29ydEJ1dHRvblRhcmdldC5xdWVyeVNlbGVjdG9yKFwic3BhblwiKVxuICAgICAgaWYgKHNwYW4pIHtcbiAgICAgICAgc3Bhbi50ZXh0Q29udGVudCA9IGJ1dHRvblRleHRcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIGJ1dHRvbiBhY3RpdmUgc3RhdGVcbiAgICAgIHRoaXMudGltZVNvcnRCdXR0b25UYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1iLTJcIiwgXCJib3JkZXItYmxhY2tcIilcbiAgICAgIHRoaXMudGltZVNvcnRCdXR0b25UYXJnZXQucXVlcnlTZWxlY3RvcihcInNwYW5cIik/LmNsYXNzTGlzdC5hZGQoXCJmb250LWJvbGRcIilcbiAgICAgIHRoaXMudGltZVNvcnRCdXR0b25UYXJnZXQucXVlcnlTZWxlY3RvcihcInNwYW5cIik/LmNsYXNzTGlzdC5yZW1vdmUoXCJ0ZXh0LWdyYXktNjAwXCIpXG4gICAgfVxuICB9XG5cbiAgLy8gQXBwbHkgdGhlIGN1cnJlbnQgc29ydCB0byBmbGlnaHQgbGlzdFxuICBwcml2YXRlIGFwcGx5U29ydCgpOiB2b2lkIHtcbiAgICBjb25zdCBmbGlnaHRDYXJkcyA9IEFycmF5LmZyb20odGhpcy5mbGlnaHRMaXN0VGFyZ2V0LmNoaWxkcmVuKSBhcyBIVE1MRWxlbWVudFtdXG4gICAgXG4gICAgaWYgKGZsaWdodENhcmRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuXG4gICAgXG4gICAgbGV0IHNvcnRlZENhcmRzOiBIVE1MRWxlbWVudFtdID0gW11cbiAgICBcbiAgICBzd2l0Y2ggKHRoaXMuY3VycmVudFNvcnQpIHtcbiAgICAgIGNhc2UgXCJkaXJlY3RfcHJpb3JpdHlcIjpcbiAgICAgICAgLy8gU29ydCBieSBkaXJlY3QgZmxpZ2h0cyBmaXJzdCAobm8gdHJhbnNmZXIgaW5kaWNhdG9yKVxuICAgICAgICBzb3J0ZWRDYXJkcyA9IGZsaWdodENhcmRzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICBjb25zdCBhRGlyZWN0ID0gIWEudGV4dENvbnRlbnQ/LmluY2x1ZGVzKFwiXHU0RTJEXHU1NkZEXHU5OTk5XHU2RTJGXCIpICYmICFhLnRleHRDb250ZW50Py5pbmNsdWRlcyhcIlx1Njc2RFx1NURERVwiKVxuICAgICAgICAgIGNvbnN0IGJEaXJlY3QgPSAhYi50ZXh0Q29udGVudD8uaW5jbHVkZXMoXCJcdTRFMkRcdTU2RkRcdTk5OTlcdTZFMkZcIikgJiYgIWIudGV4dENvbnRlbnQ/LmluY2x1ZGVzKFwiXHU2NzZEXHU1RERFXCIpXG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGFEaXJlY3QgJiYgIWJEaXJlY3QpIHJldHVybiAtMVxuICAgICAgICAgIGlmICghYURpcmVjdCAmJiBiRGlyZWN0KSByZXR1cm4gMVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFRoZW4gc29ydCBieSBwcmljZVxuICAgICAgICAgIGNvbnN0IGFQcmljZSA9IHRoaXMuZXh0cmFjdFByaWNlKGEpXG4gICAgICAgICAgY29uc3QgYlByaWNlID0gdGhpcy5leHRyYWN0UHJpY2UoYilcbiAgICAgICAgICByZXR1cm4gYVByaWNlIC0gYlByaWNlXG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICAgIFxuICAgICAgY2FzZSBcInByaWNlX2FzY1wiOlxuICAgICAgICAvLyBTb3J0IGJ5IHByaWNlIGFzY2VuZGluZ1xuICAgICAgICBzb3J0ZWRDYXJkcyA9IGZsaWdodENhcmRzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5leHRyYWN0UHJpY2UoYSkgLSB0aGlzLmV4dHJhY3RQcmljZShiKVxuICAgICAgICB9KVxuICAgICAgICBicmVha1xuICAgICAgICBcbiAgICAgIFxuICAgICAgY2FzZSBcImRlcGFydHVyZV9lYXJseVwiOlxuICAgICAgICAvLyBTb3J0IGJ5IGRlcGFydHVyZSB0aW1lIGVhcmx5IHRvIGxhdGVcbiAgICAgICAgc29ydGVkQ2FyZHMgPSBmbGlnaHRDYXJkcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZXh0cmFjdERlcGFydHVyZVRpbWUoYSkgLSB0aGlzLmV4dHJhY3REZXBhcnR1cmVUaW1lKGIpXG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICAgIFxuICAgICAgY2FzZSBcImRlcGFydHVyZV9sYXRlXCI6XG4gICAgICAgIC8vIFNvcnQgYnkgZGVwYXJ0dXJlIHRpbWUgbGF0ZSB0byBlYXJseVxuICAgICAgICBzb3J0ZWRDYXJkcyA9IGZsaWdodENhcmRzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5leHRyYWN0RGVwYXJ0dXJlVGltZShiKSAtIHRoaXMuZXh0cmFjdERlcGFydHVyZVRpbWUoYSlcbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgICAgXG4gICAgICBjYXNlIFwiYXJyaXZhbF9lYXJseVwiOlxuICAgICAgICAvLyBTb3J0IGJ5IGFycml2YWwgdGltZSBlYXJseSB0byBsYXRlXG4gICAgICAgIHNvcnRlZENhcmRzID0gZmxpZ2h0Q2FyZHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLmV4dHJhY3RBcnJpdmFsVGltZShhKSAtIHRoaXMuZXh0cmFjdEFycml2YWxUaW1lKGIpXG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICAgIFxuICAgICAgY2FzZSBcImFycml2YWxfbGF0ZVwiOlxuICAgICAgICAvLyBTb3J0IGJ5IGFycml2YWwgdGltZSBsYXRlIHRvIGVhcmx5XG4gICAgICAgIHNvcnRlZENhcmRzID0gZmxpZ2h0Q2FyZHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLmV4dHJhY3RBcnJpdmFsVGltZShiKSAtIHRoaXMuZXh0cmFjdEFycml2YWxUaW1lKGEpXG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICAgIFxuICAgICAgY2FzZSBcImR1cmF0aW9uX3Nob3J0XCI6XG4gICAgICAgIC8vIFNvcnQgYnkgZHVyYXRpb24gc2hvcnQgdG8gbG9uZ1xuICAgICAgICBzb3J0ZWRDYXJkcyA9IGZsaWdodENhcmRzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5leHRyYWN0RHVyYXRpb24oYSkgLSB0aGlzLmV4dHJhY3REdXJhdGlvbihiKVxuICAgICAgICB9KVxuICAgICAgICBicmVha1xuICAgICAgICBcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHNvcnRlZENhcmRzID0gZmxpZ2h0Q2FyZHNcbiAgICB9XG4gICAgXG4gICAgLy8gUmUtYXBwZW5kIGNhcmRzIGluIHNvcnRlZCBvcmRlclxuICAgIHNvcnRlZENhcmRzLmZvckVhY2goY2FyZCA9PiB7XG4gICAgICB0aGlzLmZsaWdodExpc3RUYXJnZXQuYXBwZW5kQ2hpbGQoY2FyZClcbiAgICB9KVxuICAgIFxuICAgIC8vIEFkZCBhbmltYXRpb25cbiAgICB0aGlzLmZsaWdodExpc3RUYXJnZXQuY2xhc3NMaXN0LmFkZChcIm9wYWNpdHktNTBcIilcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuZmxpZ2h0TGlzdFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwib3BhY2l0eS01MFwiKVxuICAgIH0sIDE1MClcbiAgfVxuXG4gIC8vIEV4dHJhY3QgcHJpY2UgZnJvbSBmbGlnaHQgY2FyZFxuICBwcml2YXRlIGV4dHJhY3RQcmljZShjYXJkOiBIVE1MRWxlbWVudCk6IG51bWJlciB7XG4gICAgY29uc3QgcHJpY2VUZXh0ID0gY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnRleHQtcmVkLTUwMC5mb250LWJvbGRcIik/LnRleHRDb250ZW50XG4gICAgaWYgKCFwcmljZVRleHQpIHJldHVybiAwXG4gICAgXG4gICAgY29uc3QgbWF0Y2ggPSBwcmljZVRleHQubWF0Y2goL1x1MDBBNShcXGQrKS8pXG4gICAgcmV0dXJuIG1hdGNoID8gcGFyc2VJbnQobWF0Y2hbMV0pIDogMFxuICB9XG5cbiAgLy8gRXh0cmFjdCBkZXBhcnR1cmUgdGltZSBmcm9tIGZsaWdodCBjYXJkIChjb252ZXJ0IHRvIG1pbnV0ZXMgc2luY2UgbWlkbmlnaHQpXG4gIHByaXZhdGUgZXh0cmFjdERlcGFydHVyZVRpbWUoY2FyZDogSFRNTEVsZW1lbnQpOiBudW1iZXIge1xuICAgIGNvbnN0IHRpbWVUZXh0ID0gY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnRleHQtM3hsLmZvbnQtYm9sZFwiKT8udGV4dENvbnRlbnRcbiAgICBpZiAoIXRpbWVUZXh0KSByZXR1cm4gMFxuICAgIFxuICAgIGNvbnN0IG1hdGNoID0gdGltZVRleHQubWF0Y2goLyhcXGQrKTooXFxkKykvKVxuICAgIGlmICghbWF0Y2gpIHJldHVybiAwXG4gICAgXG4gICAgY29uc3QgaG91cnMgPSBwYXJzZUludChtYXRjaFsxXSlcbiAgICBjb25zdCBtaW51dGVzID0gcGFyc2VJbnQobWF0Y2hbMl0pXG4gICAgcmV0dXJuIGhvdXJzICogNjAgKyBtaW51dGVzXG4gIH1cblxuICAvLyBFeHRyYWN0IGFycml2YWwgdGltZSBmcm9tIGZsaWdodCBjYXJkXG4gIHByaXZhdGUgZXh0cmFjdEFycml2YWxUaW1lKGNhcmQ6IEhUTUxFbGVtZW50KTogbnVtYmVyIHtcbiAgICBjb25zdCB0aW1lRWxlbWVudHMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGV4dC0zeGwuZm9udC1ib2xkXCIpXG4gICAgaWYgKHRpbWVFbGVtZW50cy5sZW5ndGggPCAyKSByZXR1cm4gMFxuICAgIFxuICAgIGNvbnN0IHRpbWVUZXh0ID0gdGltZUVsZW1lbnRzWzFdLnRleHRDb250ZW50XG4gICAgaWYgKCF0aW1lVGV4dCkgcmV0dXJuIDBcbiAgICBcbiAgICBjb25zdCBtYXRjaCA9IHRpbWVUZXh0Lm1hdGNoKC8oXFxkKyk6KFxcZCspLylcbiAgICBpZiAoIW1hdGNoKSByZXR1cm4gMFxuICAgIFxuICAgIGNvbnN0IGhvdXJzID0gcGFyc2VJbnQobWF0Y2hbMV0pXG4gICAgY29uc3QgbWludXRlcyA9IHBhcnNlSW50KG1hdGNoWzJdKVxuICAgIFxuICAgIC8vIEhhbmRsZSBuZXh0IGRheSBhcnJpdmFscyAoaWYgdGltZSBpcyBlYXJsaWVyIHRoYW4gZGVwYXJ0dXJlKVxuICAgIGNvbnN0IGRlcGFydHVyZVRpbWUgPSB0aGlzLmV4dHJhY3REZXBhcnR1cmVUaW1lKGNhcmQpXG4gICAgY29uc3QgYXJyaXZhbFRpbWUgPSBob3VycyAqIDYwICsgbWludXRlc1xuICAgIFxuICAgIHJldHVybiBhcnJpdmFsVGltZSA8IGRlcGFydHVyZVRpbWUgPyBhcnJpdmFsVGltZSArIDI0ICogNjAgOiBhcnJpdmFsVGltZVxuICB9XG5cbiAgLy8gRXh0cmFjdCBkdXJhdGlvbiBmcm9tIGZsaWdodCBjYXJkXG4gIHByaXZhdGUgZXh0cmFjdER1cmF0aW9uKGNhcmQ6IEhUTUxFbGVtZW50KTogbnVtYmVyIHtcbiAgICBjb25zdCBkdXJhdGlvblRleHQgPSBjYXJkLnRleHRDb250ZW50XG4gICAgaWYgKCFkdXJhdGlvblRleHQpIHJldHVybiAwXG4gICAgXG4gICAgLy8gTG9vayBmb3IgcGF0dGVybnMgbGlrZSBcIlx1NjAzQjRoXCIsIFwiXHU2MDNCMThoNDBtXCIsIGV0Yy5cbiAgICBjb25zdCBtYXRjaCA9IGR1cmF0aW9uVGV4dC5tYXRjaCgvXHU2MDNCKFxcZCspaCg/OihcXGQrKW0pPy8pXG4gICAgaWYgKCFtYXRjaCkgcmV0dXJuIDBcbiAgICBcbiAgICBjb25zdCBob3VycyA9IHBhcnNlSW50KG1hdGNoWzFdKVxuICAgIGNvbnN0IG1pbnV0ZXMgPSBtYXRjaFsyXSA/IHBhcnNlSW50KG1hdGNoWzJdKSA6IDBcbiAgICByZXR1cm4gaG91cnMgKiA2MCArIG1pbnV0ZXNcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcbmltcG9ydCAqIGFzIFR1cmJvIGZyb20gXCJAaG90d2lyZWQvdHVyYm9cIlxuXG4vLyBIYW5kbGVzIGRhdGUgbGluayBjbGlja3MgZm9yIG11bHRpLWNpdHkgZmxpZ2h0IGRhdGUgc2VsZWN0aW9uIHdpdGggY29tcHJlaGVuc2l2ZSB2YWxpZGF0aW9uXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXIge1xuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIHVybDogU3RyaW5nLFxuICAgIHNlbGVjdGVkRGF0ZTogU3RyaW5nLFxuICAgIGFsbFNlZ21lbnREYXRlczogQXJyYXksXG4gICAgc2VsZWN0ZWRGbGlnaHREYXRlczogQXJyYXksXG4gICAgY3VycmVudFNlZ21lbnRJbmRleDogTnVtYmVyXG4gIH1cblxuICBkZWNsYXJlIHVybFZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBzZWxlY3RlZERhdGVWYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgYWxsU2VnbWVudERhdGVzVmFsdWU6IHN0cmluZ1tdXG4gIGRlY2xhcmUgc2VsZWN0ZWRGbGlnaHREYXRlc1ZhbHVlOiBzdHJpbmdbXVxuICBkZWNsYXJlIGN1cnJlbnRTZWdtZW50SW5kZXhWYWx1ZTogbnVtYmVyXG5cbiAgYXN5bmMgbmF2aWdhdGUoZXZlbnQ6IEV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIFxuICAgIC8vIEZyb250ZW5kIHZhbGlkYXRpb246IGNoZWNrIGRhdGUgY29uc3RyYWludHNcbiAgICBpZiAodGhpcy5zZWxlY3RlZERhdGVWYWx1ZSAmJiB0aGlzLmFsbFNlZ21lbnREYXRlc1ZhbHVlICYmIHRoaXMuYWxsU2VnbWVudERhdGVzVmFsdWUubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3Qgc2VsZWN0ZWREYXRlID0gbmV3IERhdGUodGhpcy5zZWxlY3RlZERhdGVWYWx1ZSlcbiAgICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IHRoaXMuY3VycmVudFNlZ21lbnRJbmRleFZhbHVlXG4gICAgICBjb25zdCBzZWdtZW50TnVtYmVyID0gY3VycmVudEluZGV4ICsgMVxuICAgICAgXG4gICAgICAvLyBcdTgzQjdcdTUzRDZcdTUyNERcdTRFMDBcdTdBMEJcdTc2ODRcdTY1RTVcdTY3MUZcdUZGMDhcdTU5ODJcdTY3OUNcdTY3MDlcdTVERjJcdTkwMDlcdTgyMkFcdTczRURcdUZGMENcdTc1MjhcdTVERjJcdTkwMDlcdTgyMkFcdTczRURcdTc2ODRcdTY1RTVcdTY3MUZcdUZGMUJcdTU0MjZcdTUyMTlcdTc1MjhcdTUzOUZcdTU5Q0JzZWdtZW50XHU2NUU1XHU2NzFGXHVGRjA5XG4gICAgICBsZXQgcHJldmlvdXNEYXRlOiBEYXRlIHwgbnVsbCA9IG51bGxcbiAgICAgIGlmIChjdXJyZW50SW5kZXggPiAwKSB7XG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjcwOVx1NURGMlx1OTAwOVx1ODIyQVx1NzNFRFx1RkYwQ1x1NEY3Rlx1NzUyOFx1NURGMlx1OTAwOVx1ODIyQVx1NzNFRFx1NzY4NFx1NjVFNVx1NjcxRlxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEZsaWdodERhdGVzVmFsdWUgJiYgdGhpcy5zZWxlY3RlZEZsaWdodERhdGVzVmFsdWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IGxhc3RTZWxlY3RlZEZsaWdodERhdGUgPSB0aGlzLnNlbGVjdGVkRmxpZ2h0RGF0ZXNWYWx1ZVt0aGlzLnNlbGVjdGVkRmxpZ2h0RGF0ZXNWYWx1ZS5sZW5ndGggLSAxXVxuICAgICAgICAgIGlmIChsYXN0U2VsZWN0ZWRGbGlnaHREYXRlKSB7XG4gICAgICAgICAgICBwcmV2aW91c0RhdGUgPSBuZXcgRGF0ZShsYXN0U2VsZWN0ZWRGbGlnaHREYXRlKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDlcdTVERjJcdTkwMDlcdTgyMkFcdTczRURcdUZGMENcdTRGN0ZcdTc1MjhcdTUzOUZcdTU5Q0JzZWdtZW50XHU2NUU1XHU2NzFGXG4gICAgICAgIGlmICghcHJldmlvdXNEYXRlICYmIHRoaXMuYWxsU2VnbWVudERhdGVzVmFsdWVbY3VycmVudEluZGV4IC0gMV0pIHtcbiAgICAgICAgICBwcmV2aW91c0RhdGUgPSBuZXcgRGF0ZSh0aGlzLmFsbFNlZ21lbnREYXRlc1ZhbHVlW2N1cnJlbnRJbmRleCAtIDFdKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFx1ODNCN1x1NTNENlx1NEUwQlx1NEUwMFx1N0EwQlx1NzY4NFx1NjVFNVx1NjcxRlx1RkYwOFx1NEY3Rlx1NzUyOFx1NTM5Rlx1NTlDQnNlZ21lbnRcdTY1RTVcdTY3MUZcdUZGMDlcbiAgICAgIGxldCBuZXh0RGF0ZTogRGF0ZSB8IG51bGwgPSBudWxsXG4gICAgICBpZiAoY3VycmVudEluZGV4ICsgMSA8IHRoaXMuYWxsU2VnbWVudERhdGVzVmFsdWUubGVuZ3RoKSB7XG4gICAgICAgIG5leHREYXRlID0gbmV3IERhdGUodGhpcy5hbGxTZWdtZW50RGF0ZXNWYWx1ZVtjdXJyZW50SW5kZXggKyAxXSlcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gXHU2ODIxXHU5QThDXHVGRjFBXHU0RTBEXHU4MEZEXHU2NUU5XHU0RThFXHU1MjREXHU0RTAwXHU3QTBCXG4gICAgICBpZiAocHJldmlvdXNEYXRlICYmIHNlbGVjdGVkRGF0ZSA8IHByZXZpb3VzRGF0ZSkge1xuICAgICAgICBpZiAod2luZG93LnNob3dUb2FzdCkge1xuICAgICAgICAgIHdpbmRvdy5zaG93VG9hc3QoYFx1N0IyQyR7c2VnbWVudE51bWJlcn1cdTdBMEJcdTY1RTVcdTY3MUZcdTRFMERcdTgwRkRcdTY1RTlcdTRFOEVcdTdCMkMke2N1cnJlbnRJbmRleH1cdTdBMEJcdUZGMENcdThCRjdcdThGRDRcdTU2REVcdTgyMkFcdTczRURcdTk5OTZcdTk4NzVcdTRGRUVcdTY1MzlgKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAvLyBQcmV2ZW50IG5hdmlnYXRpb25cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gXHU2ODIxXHU5QThDXHVGRjFBXHU0RTBEXHU4MEZEXHU2NjVBXHU0RThFXHU0RTBCXHU0RTAwXHU3QTBCXG4gICAgICBpZiAobmV4dERhdGUgJiYgc2VsZWN0ZWREYXRlID4gbmV4dERhdGUpIHtcbiAgICAgICAgaWYgKHdpbmRvdy5zaG93VG9hc3QpIHtcbiAgICAgICAgICB3aW5kb3cuc2hvd1RvYXN0KGBcdTdCMkMke3NlZ21lbnROdW1iZXJ9XHU3QTBCXHU2NUU1XHU2NzFGXHU0RTBEXHU4MEZEXHU2NjVBXHU0RThFXHU3QjJDJHtjdXJyZW50SW5kZXggKyAyfVx1N0EwQlx1RkYwQ1x1OEJGN1x1OEZENFx1NTZERVx1ODIyQVx1NzNFRFx1OTk5Nlx1OTg3NVx1NEZFRVx1NjUzOWApXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC8vIFByZXZlbnQgbmF2aWdhdGlvblxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBJZiB2YWxpZGF0aW9uIHBhc3NlcywgcHJvY2VlZCB3aXRoIG5hdmlnYXRpb25cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLnVybFZhbHVlLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQWNjZXB0JzogJ3RleHQvdm5kLnR1cmJvLXN0cmVhbS5odG1sLCB0ZXh0L2h0bWwnLFxuICAgICAgICAgICdUdXJiby1GcmFtZSc6ICdfdG9wJ1xuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICBjb25zdCBjb250ZW50VHlwZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdDb250ZW50LVR5cGUnKVxuICAgICAgXG4gICAgICBpZiAoY29udGVudFR5cGU/LmluY2x1ZGVzKCd0dXJiby1zdHJlYW0nKSkge1xuICAgICAgICAvLyBJdCdzIGEgVHVyYm8gU3RyZWFtIHJlc3BvbnNlICh2YWxpZGF0aW9uIGVycm9yIHdpdGggVG9hc3QpXG4gICAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZXNwb25zZS50ZXh0KClcbiAgICAgICAgVHVyYm8ucmVuZGVyU3RyZWFtTWVzc2FnZShodG1sKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSXQncyBhIHJlZ3VsYXIgSFRNTCByZXNwb25zZSAoc3VjY2VzcyAtIG5hdmlnYXRlIHRvIG5ldyBwYWdlKVxuICAgICAgICBUdXJiby52aXNpdCh0aGlzLnVybFZhbHVlKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdOYXZpZ2F0aW9uIGVycm9yOicsIGVycm9yKVxuICAgICAgLy8gRmFsbGJhY2sgdG8gcmVndWxhciBuYXZpZ2F0aW9uXG4gICAgICBUdXJiby52aXNpdCh0aGlzLnVybFZhbHVlKVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwibW9kYWxcIixcbiAgICBcInJvb21zQ291bnRcIixcbiAgICBcImFkdWx0c0NvdW50XCIsXG4gICAgXCJjaGlsZHJlbkNvdW50XCIsXG4gICAgXCJyb29tc0lucHV0XCIsXG4gICAgXCJhZHVsdHNJbnB1dFwiLFxuICAgIFwiY2hpbGRyZW5JbnB1dFwiLFxuICAgIFwiZGlzcGxheVRleHRcIlxuICBdXG5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNSb29tc0lucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQWR1bHRzSW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNDaGlsZHJlbklucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzRGlzcGxheVRleHRUYXJnZXQ6IGJvb2xlYW5cblxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIHJvb21zOiBOdW1iZXIsXG4gICAgYWR1bHRzOiBOdW1iZXIsXG4gICAgY2hpbGRyZW46IE51bWJlclxuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSByb29tc0NvdW50VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGFkdWx0c0NvdW50VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNoaWxkcmVuQ291bnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgcm9vbXNJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGFkdWx0c0lucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hpbGRyZW5JbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRpc3BsYXlUZXh0VGFyZ2V0OiBIVE1MRWxlbWVudFxuXG4gIGRlY2xhcmUgcm9vbXNWYWx1ZTogbnVtYmVyXG4gIGRlY2xhcmUgYWR1bHRzVmFsdWU6IG51bWJlclxuICBkZWNsYXJlIGNoaWxkcmVuVmFsdWU6IG51bWJlclxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJIb3RlbEd1ZXN0U2VsZWN0b3IgY29ubmVjdGVkXCIpXG4gICAgLy8gT25seSBpbml0aWFsaXplIGlmIGlucHV0IHRhcmdldHMgZXhpc3QgKG1vZGFsIHZpZXcpXG4gICAgaWYgKHRoaXMuaGFzUm9vbXNJbnB1dFRhcmdldCAmJiB0aGlzLmhhc0FkdWx0c0lucHV0VGFyZ2V0ICYmIHRoaXMuaGFzQ2hpbGRyZW5JbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5yb29tc1ZhbHVlID0gcGFyc2VJbnQodGhpcy5yb29tc0lucHV0VGFyZ2V0LnZhbHVlKSB8fCAxXG4gICAgICB0aGlzLmFkdWx0c1ZhbHVlID0gcGFyc2VJbnQodGhpcy5hZHVsdHNJbnB1dFRhcmdldC52YWx1ZSkgfHwgMVxuICAgICAgdGhpcy5jaGlsZHJlblZhbHVlID0gcGFyc2VJbnQodGhpcy5jaGlsZHJlbklucHV0VGFyZ2V0LnZhbHVlKSB8fCAwXG4gICAgICB0aGlzLnVwZGF0ZURpc3BsYXkoKVxuICAgIH1cbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJIb3RlbEd1ZXN0U2VsZWN0b3IgZGlzY29ubmVjdGVkXCIpXG4gIH1cblxuICAvLyBPcGVuIG1vZGFsXG4gIG9wZW5Nb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nXG4gIH1cblxuICAvLyBDbG9zZSBtb2RhbFxuICBjbG9zZU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJydcbiAgfVxuXG4gIC8vIEluY3JlbWVudCByb29tc1xuICBpbmNyZW1lbnRSb29tcygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5yb29tc1ZhbHVlIDwgMTApIHtcbiAgICAgIHRoaXMucm9vbXNWYWx1ZSsrXG4gICAgICB0aGlzLnVwZGF0ZUNvdW50cygpXG4gICAgfVxuICB9XG5cbiAgLy8gRGVjcmVtZW50IHJvb21zXG4gIGRlY3JlbWVudFJvb21zKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnJvb21zVmFsdWUgPiAxKSB7XG4gICAgICB0aGlzLnJvb21zVmFsdWUtLVxuICAgICAgdGhpcy51cGRhdGVDb3VudHMoKVxuICAgIH1cbiAgfVxuXG4gIC8vIEluY3JlbWVudCBhZHVsdHNcbiAgaW5jcmVtZW50QWR1bHRzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmFkdWx0c1ZhbHVlIDwgMjApIHtcbiAgICAgIHRoaXMuYWR1bHRzVmFsdWUrK1xuICAgICAgdGhpcy51cGRhdGVDb3VudHMoKVxuICAgIH1cbiAgfVxuXG4gIC8vIERlY3JlbWVudCBhZHVsdHNcbiAgZGVjcmVtZW50QWR1bHRzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmFkdWx0c1ZhbHVlID4gMSkge1xuICAgICAgdGhpcy5hZHVsdHNWYWx1ZS0tXG4gICAgICB0aGlzLnVwZGF0ZUNvdW50cygpXG4gICAgfVxuICB9XG5cbiAgLy8gSW5jcmVtZW50IGNoaWxkcmVuXG4gIGluY3JlbWVudENoaWxkcmVuKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNoaWxkcmVuVmFsdWUgPCAxMCkge1xuICAgICAgdGhpcy5jaGlsZHJlblZhbHVlKytcbiAgICAgIHRoaXMudXBkYXRlQ291bnRzKClcbiAgICB9XG4gIH1cblxuICAvLyBEZWNyZW1lbnQgY2hpbGRyZW5cbiAgZGVjcmVtZW50Q2hpbGRyZW4oKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY2hpbGRyZW5WYWx1ZSA+IDApIHtcbiAgICAgIHRoaXMuY2hpbGRyZW5WYWx1ZS0tXG4gICAgICB0aGlzLnVwZGF0ZUNvdW50cygpXG4gICAgfVxuICB9XG5cbiAgLy8gUmVzZXQgdG8gZGVmYXVsdHNcbiAgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5yb29tc1ZhbHVlID0gMVxuICAgIHRoaXMuYWR1bHRzVmFsdWUgPSAxXG4gICAgdGhpcy5jaGlsZHJlblZhbHVlID0gMFxuICAgIHRoaXMudXBkYXRlQ291bnRzKClcbiAgfVxuXG4gIC8vIENvbmZpcm0gYW5kIGNsb3NlXG4gIGNvbmZpcm0oKTogdm9pZCB7XG4gICAgdGhpcy51cGRhdGVEaXNwbGF5KClcbiAgICAvLyBEaXNwYXRjaCBldmVudCB0byBub3RpZnkgaG90ZWwtc2VhcmNoIGNvbnRyb2xsZXJcbiAgICB0aGlzLmRpc3BhdGNoR3Vlc3RVcGRhdGVFdmVudCgpXG4gICAgdGhpcy5jbG9zZU1vZGFsKClcbiAgfVxuXG4gIC8vIFVwZGF0ZSBjb3VudCBkaXNwbGF5cyBhbmQgaGlkZGVuIGlucHV0c1xuICBwcml2YXRlIHVwZGF0ZUNvdW50cygpOiB2b2lkIHtcbiAgICB0aGlzLnJvb21zQ291bnRUYXJnZXQudGV4dENvbnRlbnQgPSB0aGlzLnJvb21zVmFsdWUudG9TdHJpbmcoKVxuICAgIHRoaXMuYWR1bHRzQ291bnRUYXJnZXQudGV4dENvbnRlbnQgPSB0aGlzLmFkdWx0c1ZhbHVlLnRvU3RyaW5nKClcbiAgICB0aGlzLmNoaWxkcmVuQ291bnRUYXJnZXQudGV4dENvbnRlbnQgPSB0aGlzLmNoaWxkcmVuVmFsdWUudG9TdHJpbmcoKVxuICAgIFxuICAgIHRoaXMucm9vbXNJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMucm9vbXNWYWx1ZS50b1N0cmluZygpXG4gICAgdGhpcy5hZHVsdHNJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuYWR1bHRzVmFsdWUudG9TdHJpbmcoKVxuICAgIHRoaXMuY2hpbGRyZW5JbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuY2hpbGRyZW5WYWx1ZS50b1N0cmluZygpXG4gIH1cblxuICAvLyBVcGRhdGUgZGlzcGxheSB0ZXh0XG4gIHByaXZhdGUgdXBkYXRlRGlzcGxheSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5oYXNEaXNwbGF5VGV4dFRhcmdldCkge1xuICAgICAgdGhpcy5kaXNwbGF5VGV4dFRhcmdldC50ZXh0Q29udGVudCA9IGAke3RoaXMucm9vbXNWYWx1ZX1cdTk1RjRcdTYyM0YgJHt0aGlzLmFkdWx0c1ZhbHVlfVx1NjIxMFx1NEVCQSAke3RoaXMuY2hpbGRyZW5WYWx1ZX1cdTUxM0ZcdTdBRTVgXG4gICAgfVxuICB9XG5cbiAgLy8gRGlzcGF0Y2ggZXZlbnQgdG8gbm90aWZ5IGhvdGVsLXNlYXJjaCBjb250cm9sbGVyXG4gIHByaXZhdGUgZGlzcGF0Y2hHdWVzdFVwZGF0ZUV2ZW50KCk6IHZvaWQge1xuICAgIGNvbnN0IGd1ZXN0VXBkYXRlRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2hvdGVsLWd1ZXN0LXNlbGVjdG9yOmd1ZXN0cy11cGRhdGVkJywge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIHJvb21zOiB0aGlzLnJvb21zVmFsdWUsXG4gICAgICAgIGFkdWx0czogdGhpcy5hZHVsdHNWYWx1ZSxcbiAgICAgICAgY2hpbGRyZW46IHRoaXMuY2hpbGRyZW5WYWx1ZVxuICAgICAgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICB9KVxuICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZ3Vlc3RVcGRhdGVFdmVudClcbiAgICBjb25zb2xlLmxvZygnSG90ZWwgZ3Vlc3Qgc2VsZWN0b3I6IERpc3BhdGNoZWQgZ3Vlc3QgdXBkYXRlIGV2ZW50Jywge1xuICAgICAgcm9vbXM6IHRoaXMucm9vbXNWYWx1ZSxcbiAgICAgIGFkdWx0czogdGhpcy5hZHVsdHNWYWx1ZSxcbiAgICAgIGNoaWxkcmVuOiB0aGlzLmNoaWxkcmVuVmFsdWVcbiAgICB9KVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5pbnRlcmZhY2UgQ2FsZW5kYXJEYXkge1xuICBkYXRlOiBEYXRlXG4gIGRheU9mTW9udGg6IG51bWJlclxuICBpc0N1cnJlbnRNb250aDogYm9vbGVhblxuICBpc1RvZGF5OiBib29sZWFuXG4gIGlzU2VsZWN0ZWQ6IGJvb2xlYW5cbiAgaXNJblJhbmdlOiBib29sZWFuXG4gIGlzRGlzYWJsZWQ6IGJvb2xlYW5cbiAgbGFiZWw/OiBzdHJpbmdcbiAgaG9saWRheT86IHN0cmluZ1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJtb2RhbFwiLCBcImNhbGVuZGFyXCIsIFwibW9udGhMYWJlbFwiLCBcInByb21wdFRleHRcIixcbiAgICBcImNoZWNrSW5JbnB1dFwiLCBcImNoZWNrT3V0SW5wdXRcIiwgXCJjaGVja0luRGlzcGxheVwiLCBcImNoZWNrT3V0RGlzcGxheVwiLFxuICAgIFwibmlnaHRzRGlzcGxheVwiXG4gIF1cblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0NoZWNrSW5JbnB1dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0NoZWNrT3V0SW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgY2hlY2tJbjogU3RyaW5nLFxuICAgIGNoZWNrT3V0OiBTdHJpbmcsXG4gICAgc2VsZWN0aW5nQ2hlY2tJbjogQm9vbGVhblxuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjYWxlbmRhclRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBtb250aExhYmVsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHByb21wdFRleHRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hlY2tJbklucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hlY2tPdXRJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNoZWNrSW5EaXNwbGF5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNoZWNrT3V0RGlzcGxheVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBuaWdodHNEaXNwbGF5VGFyZ2V0OiBIVE1MRWxlbWVudFxuXG4gIGRlY2xhcmUgY2hlY2tJblZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBjaGVja091dFZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBzZWxlY3RpbmdDaGVja0luVmFsdWU6IGJvb2xlYW5cblxuICBwcml2YXRlIGN1cnJlbnRNb250aDogRGF0ZSA9IG5ldyBEYXRlKClcbiAgcHJpdmF0ZSBjaGVja0luRGF0ZTogRGF0ZSB8IG51bGwgPSBudWxsXG4gIHByaXZhdGUgY2hlY2tPdXREYXRlOiBEYXRlIHwgbnVsbCA9IG51bGxcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIE9ubHkgaW5pdGlhbGl6ZSBpZiBpbnB1dCB0YXJnZXRzIGV4aXN0IChtb2RhbCB2aWV3KVxuICAgIGlmICh0aGlzLmhhc0NoZWNrSW5JbnB1dFRhcmdldCAmJiB0aGlzLmhhc0NoZWNrT3V0SW5wdXRUYXJnZXQpIHtcbiAgICAgIGlmICh0aGlzLmNoZWNrSW5JbnB1dFRhcmdldC52YWx1ZSkge1xuICAgICAgICB0aGlzLmNoZWNrSW5EYXRlID0gdGhpcy5wYXJzZUxvY2FsRGF0ZSh0aGlzLmNoZWNrSW5JbnB1dFRhcmdldC52YWx1ZSlcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmNoZWNrT3V0SW5wdXRUYXJnZXQudmFsdWUpIHtcbiAgICAgICAgdGhpcy5jaGVja091dERhdGUgPSB0aGlzLnBhcnNlTG9jYWxEYXRlKHRoaXMuY2hlY2tPdXRJbnB1dFRhcmdldC52YWx1ZSlcbiAgICAgIH1cbiAgICAgIHRoaXMudXBkYXRlRGlzcGxheSgpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBwYXJzZUxvY2FsRGF0ZShkYXRlU3RyOiBzdHJpbmcpOiBEYXRlIHtcbiAgICAvLyBQYXJzZSBkYXRlIHN0cmluZyBhcyBsb2NhbCBkYXRlIChZWVlZLU1NLUREKVxuICAgIGNvbnN0IHBhcnRzID0gZGF0ZVN0ci5zcGxpdCgnLScpXG4gICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMykge1xuICAgICAgY29uc3QgeWVhciA9IHBhcnNlSW50KHBhcnRzWzBdLCAxMClcbiAgICAgIGNvbnN0IG1vbnRoID0gcGFyc2VJbnQocGFydHNbMV0sIDEwKSAtIDEgLy8gTW9udGggaXMgMC1pbmRleGVkXG4gICAgICBjb25zdCBkYXkgPSBwYXJzZUludChwYXJ0c1syXSwgMTApXG4gICAgICByZXR1cm4gbmV3IERhdGUoeWVhciwgbW9udGgsIGRheSlcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBEYXRlKClcbiAgfVxuXG4gIG9wZW5Nb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLnNlbGVjdGluZ0NoZWNrSW5WYWx1ZSA9IHRydWVcbiAgICB0aGlzLnByb21wdFRleHRUYXJnZXQudGV4dENvbnRlbnQgPSBcIlx1OEJGN1x1OTAwOVx1NjJFOVx1NTE2NVx1NEY0Rlx1NjVFNVx1NjcxRlwiXG4gICAgdGhpcy5jdXJyZW50TW9udGggPSBuZXcgRGF0ZSgpXG4gICAgdGhpcy5yZW5kZXJNdWx0aU1vbnRoQ2FsZW5kYXIoKVxuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbidcbiAgfVxuXG4gIGNsb3NlTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJ1xuICB9XG5cbiAgc2VsZWN0RGF0ZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50XG4gICAgY29uc3QgZGF0ZVN0ciA9IGJ1dHRvbi5kYXRhc2V0LmRhdGVcbiAgICBpZiAoIWRhdGVTdHIpIHJldHVyblxuXG4gICAgY29uc3Qgc2VsZWN0ZWREYXRlID0gdGhpcy5wYXJzZUxvY2FsRGF0ZShkYXRlU3RyKVxuICAgIFxuICAgIGlmICh0aGlzLnNlbGVjdGluZ0NoZWNrSW5WYWx1ZSkge1xuICAgICAgLy8gU2VsZWN0aW5nIGNoZWNrLWluIGRhdGVcbiAgICAgIHRoaXMuY2hlY2tJbkRhdGUgPSBzZWxlY3RlZERhdGVcbiAgICAgIHRoaXMuY2hlY2tPdXREYXRlID0gbnVsbCAvLyBSZXNldCBjaGVjay1vdXQgd2hlbiBjaGFuZ2luZyBjaGVjay1pblxuICAgICAgdGhpcy5zZWxlY3RpbmdDaGVja0luVmFsdWUgPSBmYWxzZVxuICAgICAgdGhpcy5wcm9tcHRUZXh0VGFyZ2V0LnRleHRDb250ZW50ID0gXCJcdThCRjdcdTkwMDlcdTYyRTlcdTc5QkJcdTVFOTdcdTY1RTVcdTY3MUZcIlxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTZWxlY3RpbmcgY2hlY2stb3V0IGRhdGVcbiAgICAgIGlmICh0aGlzLmNoZWNrSW5EYXRlICYmIHNlbGVjdGVkRGF0ZSA8PSB0aGlzLmNoZWNrSW5EYXRlKSB7XG4gICAgICAgIC8vIElmIHNlbGVjdGVkIGRhdGUgaXMgYmVmb3JlIG9yIHNhbWUgYXMgY2hlY2staW4sIG1ha2UgaXQgdGhlIG5ldyBjaGVjay1pblxuICAgICAgICB0aGlzLmNoZWNrSW5EYXRlID0gc2VsZWN0ZWREYXRlXG4gICAgICAgIHRoaXMuY2hlY2tPdXREYXRlID0gbnVsbFxuICAgICAgICB0aGlzLnByb21wdFRleHRUYXJnZXQudGV4dENvbnRlbnQgPSBcIlx1OEJGN1x1OTAwOVx1NjJFOVx1NzlCQlx1NUU5N1x1NjVFNVx1NjcxRlwiXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNoZWNrT3V0RGF0ZSA9IHNlbGVjdGVkRGF0ZVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMucmVuZGVyTXVsdGlNb250aENhbGVuZGFyKClcbiAgfVxuXG4gIGNvbmZpcm0oKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY2hlY2tJbkRhdGUgJiYgdGhpcy5jaGVja091dERhdGUpIHtcbiAgICAgIHRoaXMuY2hlY2tJbklucHV0VGFyZ2V0LnZhbHVlID0gdGhpcy5mb3JtYXREYXRlKHRoaXMuY2hlY2tJbkRhdGUpXG4gICAgICB0aGlzLmNoZWNrT3V0SW5wdXRUYXJnZXQudmFsdWUgPSB0aGlzLmZvcm1hdERhdGUodGhpcy5jaGVja091dERhdGUpXG4gICAgICB0aGlzLnVwZGF0ZURpc3BsYXkoKVxuICAgICAgXG4gICAgICAvLyBEaXNwYXRjaCBldmVudCB0byBub3RpZnkgaG90ZWwtc2VhcmNoIGNvbnRyb2xsZXJcbiAgICAgIHRoaXMuZGlzcGF0Y2hEYXRlVXBkYXRlRXZlbnQoKVxuICAgICAgXG4gICAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICAgIH1cbiAgfVxuXG4gIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuY2hlY2tJbkRhdGUgPSBudWxsXG4gICAgdGhpcy5jaGVja091dERhdGUgPSBudWxsXG4gICAgdGhpcy5zZWxlY3RpbmdDaGVja0luVmFsdWUgPSB0cnVlXG4gICAgdGhpcy5wcm9tcHRUZXh0VGFyZ2V0LnRleHRDb250ZW50ID0gXCJcdThCRjdcdTkwMDlcdTYyRTlcdTUxNjVcdTRGNEZcdTY1RTVcdTY3MUZcIlxuICAgIHRoaXMucmVuZGVyTXVsdGlNb250aENhbGVuZGFyKClcbiAgfVxuXG4gIHByZXZpb3VzTW9udGgoKTogdm9pZCB7XG4gICAgdGhpcy5jdXJyZW50TW9udGggPSBuZXcgRGF0ZSh0aGlzLmN1cnJlbnRNb250aC5nZXRGdWxsWWVhcigpLCB0aGlzLmN1cnJlbnRNb250aC5nZXRNb250aCgpIC0gMSwgMSlcbiAgICB0aGlzLnJlbmRlck11bHRpTW9udGhDYWxlbmRhcigpXG4gIH1cblxuICBuZXh0TW9udGgoKTogdm9pZCB7XG4gICAgdGhpcy5jdXJyZW50TW9udGggPSBuZXcgRGF0ZSh0aGlzLmN1cnJlbnRNb250aC5nZXRGdWxsWWVhcigpLCB0aGlzLmN1cnJlbnRNb250aC5nZXRNb250aCgpICsgMSwgMSlcbiAgICB0aGlzLnJlbmRlck11bHRpTW9udGhDYWxlbmRhcigpXG4gIH1cblxuICBwcml2YXRlIHJlbmRlck11bHRpTW9udGhDYWxlbmRhcigpOiB2b2lkIHtcbiAgICAvLyBSZW5kZXIgMyBjb25zZWN1dGl2ZSBtb250aHNcbiAgICBsZXQgaHRtbCA9ICcnXG4gICAgXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgIGNvbnN0IGRpc3BsYXlNb250aCA9IG5ldyBEYXRlKHRoaXMuY3VycmVudE1vbnRoLmdldEZ1bGxZZWFyKCksIHRoaXMuY3VycmVudE1vbnRoLmdldE1vbnRoKCkgKyBpLCAxKVxuICAgICAgaHRtbCArPSB0aGlzLnJlbmRlclNpbmdsZU1vbnRoKGRpc3BsYXlNb250aClcbiAgICB9XG4gICAgXG4gICAgdGhpcy5jYWxlbmRhclRhcmdldC5pbm5lckhUTUwgPSBodG1sXG4gICAgXG4gICAgLy8gVXBkYXRlIG1vbnRoIGxhYmVsIHRvIHNob3cgZmlyc3QgbW9udGhcbiAgICBjb25zdCB5ZWFyID0gdGhpcy5jdXJyZW50TW9udGguZ2V0RnVsbFllYXIoKVxuICAgIGNvbnN0IG1vbnRoID0gdGhpcy5jdXJyZW50TW9udGguZ2V0TW9udGgoKVxuICAgIHRoaXMubW9udGhMYWJlbFRhcmdldC50ZXh0Q29udGVudCA9IGAke3llYXJ9XHU1RTc0JHttb250aCArIDF9XHU2NzA4YFxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJTaW5nbGVNb250aChkaXNwbGF5TW9udGg6IERhdGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IHllYXIgPSBkaXNwbGF5TW9udGguZ2V0RnVsbFllYXIoKVxuICAgIGNvbnN0IG1vbnRoID0gZGlzcGxheU1vbnRoLmdldE1vbnRoKClcbiAgICBcbiAgICAvLyBNb250aCBoZWFkZXJcbiAgICBsZXQgaHRtbCA9IGA8ZGl2IGNsYXNzPVwibWItNlwiPlxuICAgICAgPGRpdiBjbGFzcz1cInRleHQtbGcgZm9udC1ib2xkIHRleHQtZ3JheS05MDAgbWItM1wiPiR7eWVhcn1cdTVFNzQke21vbnRoICsgMX1cdTY3MDg8L2Rpdj5cbiAgICBgXG4gICAgXG4gICAgY29uc3QgZmlyc3REYXkgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgMSlcbiAgICBjb25zdCBsYXN0RGF5ID0gbmV3IERhdGUoeWVhciwgbW9udGggKyAxLCAwKVxuICAgIGNvbnN0IGRheXNJbk1vbnRoID0gbGFzdERheS5nZXREYXRlKClcbiAgICBjb25zdCBzdGFydGluZ0RheU9mV2VlayA9IGZpcnN0RGF5LmdldERheSgpXG4gICAgXG4gICAgY29uc3QgZGF5czogQ2FsZW5kYXJEYXlbXSA9IFtdXG4gICAgXG4gICAgLy8gUHJldmlvdXMgbW9udGggZGF5c1xuICAgIGNvbnN0IHByZXZNb250aExhc3REYXkgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgMCkuZ2V0RGF0ZSgpXG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0aW5nRGF5T2ZXZWVrIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGNvbnN0IGRheSA9IHByZXZNb250aExhc3REYXkgLSBpXG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoeWVhciwgbW9udGggLSAxLCBkYXkpXG4gICAgICBkYXlzLnB1c2goe1xuICAgICAgICBkYXRlLFxuICAgICAgICBkYXlPZk1vbnRoOiBkYXksXG4gICAgICAgIGlzQ3VycmVudE1vbnRoOiBmYWxzZSxcbiAgICAgICAgaXNUb2RheTogZmFsc2UsXG4gICAgICAgIGlzU2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICBpc0luUmFuZ2U6IGZhbHNlLFxuICAgICAgICBpc0Rpc2FibGVkOiB0aGlzLmlzRGF0ZURpc2FibGVkKGRhdGUpXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBDdXJyZW50IG1vbnRoIGRheXNcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKClcbiAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICAgIFxuICAgIGZvciAobGV0IGRheSA9IDE7IGRheSA8PSBkYXlzSW5Nb250aDsgZGF5KyspIHtcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5KVxuICAgICAgY29uc3QgaXNUb2RheSA9IGRhdGUuZ2V0VGltZSgpID09PSB0b2RheS5nZXRUaW1lKClcbiAgICAgIGNvbnN0IGlzU2VsZWN0ZWQgPSB0aGlzLmlzRGF0ZVNlbGVjdGVkKGRhdGUpXG4gICAgICBjb25zdCBpc0luUmFuZ2UgPSB0aGlzLmlzRGF0ZUluUmFuZ2UoZGF0ZSlcbiAgICAgIFxuICAgICAgZGF5cy5wdXNoKHtcbiAgICAgICAgZGF0ZSxcbiAgICAgICAgZGF5T2ZNb250aDogZGF5LFxuICAgICAgICBpc0N1cnJlbnRNb250aDogdHJ1ZSxcbiAgICAgICAgaXNUb2RheSxcbiAgICAgICAgaXNTZWxlY3RlZCxcbiAgICAgICAgaXNJblJhbmdlLFxuICAgICAgICBpc0Rpc2FibGVkOiB0aGlzLmlzRGF0ZURpc2FibGVkKGRhdGUpLFxuICAgICAgICBsYWJlbDogdGhpcy5nZXREYXRlTGFiZWwoZGF0ZSksXG4gICAgICAgIGhvbGlkYXk6IHRoaXMuZ2V0SG9saWRheShkYXRlKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gTmV4dCBtb250aCBkYXlzXG4gICAgY29uc3QgcmVtYWluaW5nRGF5cyA9IDQyIC0gZGF5cy5sZW5ndGggLy8gNiByb3dzICogNyBkYXlzXG4gICAgZm9yIChsZXQgZGF5ID0gMTsgZGF5IDw9IHJlbWFpbmluZ0RheXM7IGRheSsrKSB7XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoeWVhciwgbW9udGggKyAxLCBkYXkpXG4gICAgICBkYXlzLnB1c2goe1xuICAgICAgICBkYXRlLFxuICAgICAgICBkYXlPZk1vbnRoOiBkYXksXG4gICAgICAgIGlzQ3VycmVudE1vbnRoOiBmYWxzZSxcbiAgICAgICAgaXNUb2RheTogZmFsc2UsXG4gICAgICAgIGlzU2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICBpc0luUmFuZ2U6IGZhbHNlLFxuICAgICAgICBpc0Rpc2FibGVkOiB0aGlzLmlzRGF0ZURpc2FibGVkKGRhdGUpXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICBodG1sICs9IHRoaXMucmVuZGVyRGF5cyhkYXlzKVxuICAgIGh0bWwgKz0gJzwvZGl2PicgLy8gQ2xvc2UgbW9udGggY29udGFpbmVyXG4gICAgXG4gICAgcmV0dXJuIGh0bWxcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyRGF5cyhkYXlzOiBDYWxlbmRhckRheVtdKTogc3RyaW5nIHtcbiAgICBjb25zdCB3ZWVrZGF5cyA9IFsnXHU2NUU1JywgJ1x1NEUwMCcsICdcdTRFOEMnLCAnXHU0RTA5JywgJ1x1NTZEQicsICdcdTRFOTQnLCAnXHU1MTZEJ11cbiAgICBcbiAgICBsZXQgaHRtbCA9ICc8ZGl2IGNsYXNzPVwiZ3JpZCBncmlkLWNvbHMtNyBnYXAtMSBtYi0yXCI+J1xuICAgIHdlZWtkYXlzLmZvckVhY2goZGF5ID0+IHtcbiAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9XCJ0ZXh0LWNlbnRlciB0ZXh0LXNtIHRleHQtZ3JheS01MDAgcHktMlwiPiR7ZGF5fTwvZGl2PmBcbiAgICB9KVxuICAgIGh0bWwgKz0gJzwvZGl2PidcbiAgICBcbiAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwiZ3JpZCBncmlkLWNvbHMtNyBnYXAtMVwiPidcbiAgICBcbiAgICBkYXlzLmZvckVhY2goZGF5ID0+IHtcbiAgICAgIGNvbnN0IGRhdGVTdHIgPSB0aGlzLmZvcm1hdERhdGUoZGF5LmRhdGUpXG4gICAgICBjb25zdCBiYXNlQ2xhc3NlcyA9IFwicmVsYXRpdmUgaC0xMiBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXNtIHJvdW5kZWQtbGdcIlxuICAgICAgXG4gICAgICBsZXQgY2xhc3NlcyA9IGJhc2VDbGFzc2VzXG4gICAgICBsZXQgdGV4dENvbG9yID0gZGF5LmlzQ3VycmVudE1vbnRoID8gJ3RleHQtZ3JheS05MDAnIDogJ3RleHQtZ3JheS0zMDAnXG4gICAgICBsZXQgYmdDb2xvciA9ICcnXG4gICAgICBcbiAgICAgIGlmIChkYXkuaXNEaXNhYmxlZCkge1xuICAgICAgICBjbGFzc2VzICs9ICcgb3BhY2l0eS00MCBjdXJzb3Itbm90LWFsbG93ZWQnXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbGFzc2VzICs9ICcgY3Vyc29yLXBvaW50ZXIgaG92ZXI6YmctZ3JheS0xMDAnXG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChkYXkuaXNTZWxlY3RlZCkge1xuICAgICAgICBiZ0NvbG9yID0gJ2JnLXllbGxvdy00MDAnXG4gICAgICAgIHRleHRDb2xvciA9ICd0ZXh0LXdoaXRlIGZvbnQtYm9sZCdcbiAgICAgIH0gZWxzZSBpZiAoZGF5LmlzSW5SYW5nZSkge1xuICAgICAgICBiZ0NvbG9yID0gJ2JnLXllbGxvdy01MCdcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGRheS5pc1RvZGF5ICYmICFkYXkuaXNTZWxlY3RlZCkge1xuICAgICAgICBjbGFzc2VzICs9ICcgYm9yZGVyLTIgYm9yZGVyLWJsdWUtNTAwJ1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBsYWJlbCA9IGRheS5sYWJlbCB8fCBkYXkuaG9saWRheSB8fCAnJ1xuICAgICAgY29uc3QgbGFiZWxDbGFzcyA9IGRheS5ob2xpZGF5ID8gJ3RleHQtcmVkLTUwMCcgOiAndGV4dC1ibHVlLTUwMCdcbiAgICAgIFxuICAgICAgaHRtbCArPSBgXG4gICAgICAgIDxidXR0b24gXG4gICAgICAgICAgZGF0YS1kYXRlPVwiJHtkYXRlU3RyfVwiXG4gICAgICAgICAgZGF0YS1hY3Rpb249XCJjbGljay0+aG90ZWwtZGF0ZS1waWNrZXIjc2VsZWN0RGF0ZVwiXG4gICAgICAgICAgY2xhc3M9XCIke2NsYXNzZXN9ICR7YmdDb2xvcn0gJHt0ZXh0Q29sb3J9XCJcbiAgICAgICAgICAke2RheS5pc0Rpc2FibGVkID8gJ2Rpc2FibGVkJyA6ICcnfVxuICAgICAgICA+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJmb250LW1lZGl1bVwiPiR7ZGF5LmRheU9mTW9udGh9PC9zcGFuPlxuICAgICAgICAgICR7bGFiZWwgPyBgPHNwYW4gY2xhc3M9XCJ0ZXh0LXhzICR7bGFiZWxDbGFzc30gYWJzb2x1dGUgYm90dG9tLTBcIj4ke2xhYmVsfTwvc3Bhbj5gIDogJyd9XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgYFxuICAgIH0pXG4gICAgXG4gICAgaHRtbCArPSAnPC9kaXY+J1xuICAgIHJldHVybiBodG1sXG4gIH1cblxuICBwcml2YXRlIGlzRGF0ZURpc2FibGVkKGRhdGU6IERhdGUpOiBib29sZWFuIHtcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKClcbiAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICAgIHJldHVybiBkYXRlIDwgdG9kYXlcbiAgfVxuXG4gIHByaXZhdGUgaXNEYXRlU2VsZWN0ZWQoZGF0ZTogRGF0ZSk6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLmNoZWNrSW5EYXRlICYmIHRoaXMuaXNTYW1lRGF5KGRhdGUsIHRoaXMuY2hlY2tJbkRhdGUpKSByZXR1cm4gdHJ1ZVxuICAgIGlmICh0aGlzLmNoZWNrT3V0RGF0ZSAmJiB0aGlzLmlzU2FtZURheShkYXRlLCB0aGlzLmNoZWNrT3V0RGF0ZSkpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBwcml2YXRlIGlzRGF0ZUluUmFuZ2UoZGF0ZTogRGF0ZSk6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5jaGVja0luRGF0ZSB8fCAhdGhpcy5jaGVja091dERhdGUpIHJldHVybiBmYWxzZVxuICAgIHJldHVybiBkYXRlID4gdGhpcy5jaGVja0luRGF0ZSAmJiBkYXRlIDwgdGhpcy5jaGVja091dERhdGVcbiAgfVxuXG4gIHByaXZhdGUgaXNTYW1lRGF5KGRhdGUxOiBEYXRlLCBkYXRlMjogRGF0ZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBkYXRlMS5nZXRGdWxsWWVhcigpID09PSBkYXRlMi5nZXRGdWxsWWVhcigpICYmXG4gICAgICAgICAgIGRhdGUxLmdldE1vbnRoKCkgPT09IGRhdGUyLmdldE1vbnRoKCkgJiZcbiAgICAgICAgICAgZGF0ZTEuZ2V0RGF0ZSgpID09PSBkYXRlMi5nZXREYXRlKClcbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0RGF0ZShkYXRlOiBEYXRlKTogc3RyaW5nIHtcbiAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpXG4gICAgY29uc3QgbW9udGggPSBTdHJpbmcoZGF0ZS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKVxuICAgIGNvbnN0IGRheSA9IFN0cmluZyhkYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKVxuICAgIHJldHVybiBgJHt5ZWFyfS0ke21vbnRofS0ke2RheX1gXG4gIH1cblxuICBwcml2YXRlIGdldERhdGVMYWJlbChkYXRlOiBEYXRlKTogc3RyaW5nIHtcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKClcbiAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICAgIGNvbnN0IHRhcmdldERhdGUgPSBuZXcgRGF0ZShkYXRlKVxuICAgIHRhcmdldERhdGUuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICBcbiAgICBjb25zdCBkaWZmVGltZSA9IHRhcmdldERhdGUuZ2V0VGltZSgpIC0gdG9kYXkuZ2V0VGltZSgpXG4gICAgY29uc3QgZGlmZkRheXMgPSBNYXRoLnJvdW5kKGRpZmZUaW1lIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKVxuICAgIFxuICAgIGlmIChkaWZmRGF5cyA9PT0gMCkgcmV0dXJuICdcdTRFQ0FcdTU5MjknXG4gICAgaWYgKGRpZmZEYXlzID09PSAxKSByZXR1cm4gJ1x1NjYwRVx1NTkyOSdcbiAgICBpZiAoZGlmZkRheXMgPT09IDIpIHJldHVybiAnXHU1NDBFXHU1OTI5J1xuICAgIFxuICAgIGNvbnN0IHdlZWtkYXlzID0gWydcdTU0NjhcdTY1RTUnLCAnXHU1NDY4XHU0RTAwJywgJ1x1NTQ2OFx1NEU4QycsICdcdTU0NjhcdTRFMDknLCAnXHU1NDY4XHU1NkRCJywgJ1x1NTQ2OFx1NEU5NCcsICdcdTU0NjhcdTUxNkQnXVxuICAgIHJldHVybiB3ZWVrZGF5c1tkYXRlLmdldERheSgpXVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRIb2xpZGF5KGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAgIC8vIFNpbXBsZSBob2xpZGF5IG1hcHBpbmcgLSBjYW4gYmUgZXhwYW5kZWRcbiAgICBjb25zdCBtb250aCA9IGRhdGUuZ2V0TW9udGgoKSArIDFcbiAgICBjb25zdCBkYXkgPSBkYXRlLmdldERhdGUoKVxuICAgIFxuICAgIGlmIChtb250aCA9PT0gMSAmJiBkYXkgPT09IDEpIHJldHVybiAnXHU1MTQzXHU2NUU2J1xuICAgIGlmIChtb250aCA9PT0gMiAmJiBkYXkgPT09IDE0KSByZXR1cm4gJ1x1NjBDNVx1NEVCQVx1ODI4MidcbiAgICBpZiAobW9udGggPT09IDUgJiYgZGF5ID09PSAxKSByZXR1cm4gJ1x1NTJCM1x1NTJBOFx1ODI4MidcbiAgICBpZiAobW9udGggPT09IDYgJiYgZGF5ID09PSAxKSByZXR1cm4gJ1x1NTEzRlx1N0FFNVx1ODI4MidcbiAgICBpZiAobW9udGggPT09IDEwICYmIGRheSA9PT0gMSkgcmV0dXJuICdcdTU2RkRcdTVFODZcdTgyODInXG4gICAgaWYgKG1vbnRoID09PSAxMiAmJiBkYXkgPT09IDI1KSByZXR1cm4gJ1x1NTcyM1x1OEJERVx1ODI4MidcbiAgICBcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlRGlzcGxheSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jaGVja0luRGF0ZSkge1xuICAgICAgY29uc3QgbW9udGggPSB0aGlzLmNoZWNrSW5EYXRlLmdldE1vbnRoKCkgKyAxXG4gICAgICBjb25zdCBkYXkgPSB0aGlzLmNoZWNrSW5EYXRlLmdldERhdGUoKVxuICAgICAgdGhpcy5jaGVja0luRGlzcGxheVRhcmdldC50ZXh0Q29udGVudCA9IGAke21vbnRofVx1NjcwOCR7ZGF5fVx1NjVFNWBcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIGxhYmVsIGJlbG93IGNoZWNrLWluIGRhdGVcbiAgICAgIGNvbnN0IGNoZWNrSW5MYWJlbCA9IHRoaXMuY2hlY2tJbkRpc3BsYXlUYXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nXG4gICAgICBpZiAoY2hlY2tJbkxhYmVsKSB7XG4gICAgICAgIGNoZWNrSW5MYWJlbC50ZXh0Q29udGVudCA9IHRoaXMuZ2V0RGF0ZUxhYmVsKHRoaXMuY2hlY2tJbkRhdGUpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLmNoZWNrT3V0RGF0ZSkge1xuICAgICAgY29uc3QgbW9udGggPSB0aGlzLmNoZWNrT3V0RGF0ZS5nZXRNb250aCgpICsgMVxuICAgICAgY29uc3QgZGF5ID0gdGhpcy5jaGVja091dERhdGUuZ2V0RGF0ZSgpXG4gICAgICB0aGlzLmNoZWNrT3V0RGlzcGxheVRhcmdldC50ZXh0Q29udGVudCA9IGAke21vbnRofVx1NjcwOCR7ZGF5fVx1NjVFNWBcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIGxhYmVsIGJlbG93IGNoZWNrLW91dCBkYXRlXG4gICAgICBjb25zdCBjaGVja091dExhYmVsID0gdGhpcy5jaGVja091dERpc3BsYXlUYXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nXG4gICAgICBpZiAoY2hlY2tPdXRMYWJlbCkge1xuICAgICAgICBjaGVja091dExhYmVsLnRleHRDb250ZW50ID0gdGhpcy5nZXREYXRlTGFiZWwodGhpcy5jaGVja091dERhdGUpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLmNoZWNrSW5EYXRlICYmIHRoaXMuY2hlY2tPdXREYXRlKSB7XG4gICAgICBjb25zdCBuaWdodHMgPSBNYXRoLmZsb29yKCh0aGlzLmNoZWNrT3V0RGF0ZS5nZXRUaW1lKCkgLSB0aGlzLmNoZWNrSW5EYXRlLmdldFRpbWUoKSkgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpXG4gICAgICB0aGlzLm5pZ2h0c0Rpc3BsYXlUYXJnZXQudGV4dENvbnRlbnQgPSBgJHtuaWdodHN9XHU2NjVBYFxuICAgIH1cbiAgfVxuXG4gIC8vIERpc3BhdGNoIGRhdGUgdXBkYXRlIGV2ZW50IGZvciBob3RlbC1zZWFyY2ggY29udHJvbGxlclxuICBwcml2YXRlIGRpc3BhdGNoRGF0ZVVwZGF0ZUV2ZW50KCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5jaGVja0luRGF0ZSB8fCAhdGhpcy5jaGVja091dERhdGUpIHJldHVyblxuICAgIFxuICAgIGNvbnN0IGRhdGVVcGRhdGVFdmVudCA9IG5ldyBDdXN0b21FdmVudCgnaG90ZWwtZGF0ZS1waWNrZXI6ZGF0ZXMtc2VsZWN0ZWQnLCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgY2hlY2tJbjogdGhpcy5mb3JtYXREYXRlKHRoaXMuY2hlY2tJbkRhdGUpLFxuICAgICAgICBjaGVja091dDogdGhpcy5mb3JtYXREYXRlKHRoaXMuY2hlY2tPdXREYXRlKVxuICAgICAgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICB9KVxuICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZGF0ZVVwZGF0ZUV2ZW50KVxuICAgIGNvbnNvbGUubG9nKCdIb3RlbCBkYXRlIHBpY2tlcjogRGlzcGF0Y2hlZCBkYXRlcyB1cGRhdGUgZXZlbnQnLCB7XG4gICAgICBjaGVja0luOiB0aGlzLmZvcm1hdERhdGUodGhpcy5jaGVja0luRGF0ZSksXG4gICAgICBjaGVja091dDogdGhpcy5mb3JtYXREYXRlKHRoaXMuY2hlY2tPdXREYXRlKVxuICAgIH0pXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcIm1vZGFsXCIsXG4gICAgXCJiYWNrZHJvcFwiLFxuICAgIFwicGF5bWVudE9wdGlvblwiLFxuICAgIFwicGF5bWVudE1ldGhvZElucHV0XCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgdG90YWxQcmljZTogU3RyaW5nXG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IG1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGJhY2tkcm9wVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHBheW1lbnRPcHRpb25UYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgcGF5bWVudE1ldGhvZElucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdG90YWxQcmljZVZhbHVlOiBzdHJpbmdcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiUGF5bWVudE1vZGFsIGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgLy8gXHU2MjUzXHU1RjAwXHU1RjM5XHU3QTk3XG4gIG9wZW4oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgIHRoaXMuYmFja2Ryb3BUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiXG4gIH1cblxuICAvLyBcdTUxNzNcdTk1RURcdTVGMzlcdTdBOTdcbiAgY2xvc2UoZXZlbnQ/OiBFdmVudCk6IHZvaWQge1xuICAgIGlmIChldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIH1cbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgICB0aGlzLmJhY2tkcm9wVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJcIlxuICB9XG5cbiAgLy8gXHU3MEI5XHU1MUZCXHU4MENDXHU2NjZGXHU1MTczXHU5NUVEXG4gIGNsb3NlT25CYWNrZHJvcChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSBldmVudC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICB0aGlzLmNsb3NlKClcbiAgICB9XG4gIH1cblxuICAvLyBcdTkwMDlcdTYyRTlcdTY1MkZcdTRFRDhcdTY1QjlcdTVGMEZcbiAgc2VsZWN0UGF5bWVudChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHRhcmdldC5kYXRhc2V0LnBheW1lbnRNZXRob2RcblxuICAgIC8vIFx1NzlGQlx1OTY2NFx1NjI0MFx1NjcwOVx1OTAwOVx1NEUyRFx1NzJCNlx1NjAwMVxuICAgIHRoaXMucGF5bWVudE9wdGlvblRhcmdldHMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgb3B0aW9uLmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItYmx1ZS01MDBcIiwgXCJiZy1ibHVlLTUwXCIpXG4gICAgICBvcHRpb24uY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTIwMFwiKVxuICAgICAgY29uc3QgY2hlY2ttYXJrID0gb3B0aW9uLnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrXCIpXG4gICAgICBpZiAoY2hlY2ttYXJrKSB7XG4gICAgICAgIGNoZWNrbWFyay5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIFx1NkRGQlx1NTJBMFx1OTAwOVx1NEUyRFx1NzJCNlx1NjAwMVxuICAgIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYm9yZGVyLWdyYXktMjAwXCIpXG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItYmx1ZS01MDBcIiwgXCJiZy1ibHVlLTUwXCIpXG4gICAgY29uc3QgY2hlY2ttYXJrID0gdGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrXCIpXG4gICAgaWYgKGNoZWNrbWFyaykge1xuICAgICAgY2hlY2ttYXJrLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICB9XG5cbiAgICAvLyBcdTY2RjRcdTY1QjBcdTk2OTBcdTg1Q0ZcdTc2ODRcdTg4NjhcdTUzNTVcdTVCNTdcdTZCQjVcbiAgICBpZiAocGF5bWVudE1ldGhvZCkge1xuICAgICAgdGhpcy5wYXltZW50TWV0aG9kSW5wdXRUYXJnZXQudmFsdWUgPSBwYXltZW50TWV0aG9kXG4gICAgfVxuICB9XG5cbiAgLy8gXHU3ODZFXHU4QkE0XHU0RUQ4XHU2QjNFIC0gXHU2M0QwXHU0RUE0XHU4ODY4XHU1MzU1XG4gIGNvbmZpcm1QYXltZW50KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBmb3JtID0gdGhpcy5lbGVtZW50LmNsb3Nlc3QoXCJmb3JtXCIpIGFzIEhUTUxGb3JtRWxlbWVudFxuICAgIGlmIChmb3JtKSB7XG4gICAgICBmb3JtLnJlcXVlc3RTdWJtaXQoKVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyIHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJwYXNzd29yZE1vZGFsXCIsXG4gICAgXCJmaW5nZXJwcmludE1vZGFsXCIsXG4gICAgXCJwcm9jZXNzaW5nTW9kYWxcIixcbiAgICBcInN0YXR1c01vZGFsXCIsXG4gICAgXCJwYXNzd29yZERvdHNcIixcbiAgICBcInBhc3N3b3JkQW1vdW50XCIsXG4gICAgXCJwcm9jZXNzaW5nQW1vdW50XCIsXG4gICAgXCJ1c2VyRW1haWxcIixcbiAgICBcInN0YXR1c0Ftb3VudFwiLFxuICAgIFwic3RhdHVzVXNlckVtYWlsXCIsXG4gICAgXCJzdGF0dXNJY29uXCIsXG4gICAgXCJzdGF0dXNUZXh0XCIsXG4gICAgXCJzdGF0dXNEb3RzXCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgYW1vdW50OiBTdHJpbmcsXG4gICAgdXNlckVtYWlsOiBTdHJpbmcsXG4gICAgcGF5bWVudFVybDogU3RyaW5nLFxuICAgIHN1Y2Nlc3NVcmw6IFN0cmluZ1xuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBwYXNzd29yZE1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1Bhc3N3b3JkTW9kYWxUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNGaW5nZXJwcmludE1vZGFsVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUHJvY2Vzc2luZ01vZGFsVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgc3RhdHVzTW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzU3RhdHVzTW9kYWxUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBwYXNzd29yZERvdHNUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUGFzc3dvcmREb3RzVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgcGFzc3dvcmRBbW91bnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUGFzc3dvcmRBbW91bnRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBzdGF0dXNBbW91bnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzU3RhdHVzQW1vdW50VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgc3RhdHVzVXNlckVtYWlsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1N0YXR1c1VzZXJFbWFpbFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IHN0YXR1c0ljb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzU3RhdHVzSWNvblRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IHN0YXR1c1RleHRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzU3RhdHVzVGV4dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IHN0YXR1c0RvdHNUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzU3RhdHVzRG90c1RhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGFtb3VudFZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSByZWFkb25seSB1c2VyRW1haWxWYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgcmVhZG9ubHkgcGF5bWVudFVybFZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSByZWFkb25seSBzdWNjZXNzVXJsVmFsdWU6IHN0cmluZ1xuXG4gIHByaXZhdGUgcGFzc3dvcmQ6IHN0cmluZyA9IFwiXCJcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIEluaXRpYWxpemUgY29udHJvbGxlclxuICAgIGNvbnNvbGUubG9nKFwiUGF5bWVudCBjb25maXJtYXRpb24gY29udHJvbGxlciBjb25uZWN0ZWRcIilcbiAgfVxuXG4gIHNob3dQYXNzd29yZE1vZGFsKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNQYXNzd29yZE1vZGFsVGFyZ2V0KSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiUGFzc3dvcmQgbW9kYWwgdGFyZ2V0IG5vdCBmb3VuZFwiKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIHRoaXMucGFzc3dvcmQgPSBcIlwiXG4gICAgaWYgKHRoaXMuaGFzUGFzc3dvcmREb3RzVGFyZ2V0KSB7XG4gICAgICB0aGlzLnVwZGF0ZVBhc3N3b3JkRG90cygpXG4gICAgfVxuICAgIGlmICh0aGlzLmhhc1Bhc3N3b3JkQW1vdW50VGFyZ2V0KSB7XG4gICAgICB0aGlzLnBhc3N3b3JkQW1vdW50VGFyZ2V0LnRleHRDb250ZW50ID0gdGhpcy5hbW91bnRWYWx1ZVxuICAgIH1cbiAgICB0aGlzLnBhc3N3b3JkTW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgfVxuXG4gIGNsb3NlUGFzc3dvcmRNb2RhbCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5oYXNQYXNzd29yZE1vZGFsVGFyZ2V0KSB7XG4gICAgICB0aGlzLnBhc3N3b3JkTW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICB9XG4gIH1cblxuICBpbnB1dFBhc3N3b3JkKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBjb25zdCBudW1iZXIgPSBidXR0b24uZGF0YXNldC5udW1iZXJcblxuICAgIGlmICghbnVtYmVyKSByZXR1cm5cblxuICAgIGlmICh0aGlzLnBhc3N3b3JkLmxlbmd0aCA8IDYpIHtcbiAgICAgIHRoaXMucGFzc3dvcmQgKz0gbnVtYmVyXG4gICAgICB0aGlzLnVwZGF0ZVBhc3N3b3JkRG90cygpXG5cbiAgICAgIGlmICh0aGlzLnBhc3N3b3JkLmxlbmd0aCA9PT0gNikge1xuICAgICAgICB0aGlzLnByb2Nlc3NQYXNzd29yZFBheW1lbnQoKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGRlbGV0ZVBhc3N3b3JkKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnBhc3N3b3JkLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMucGFzc3dvcmQgPSB0aGlzLnBhc3N3b3JkLnNsaWNlKDAsIC0xKVxuICAgICAgdGhpcy51cGRhdGVQYXNzd29yZERvdHMoKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlUGFzc3dvcmREb3RzKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNQYXNzd29yZERvdHNUYXJnZXQpIHJldHVyblxuICAgIFxuICAgIGNvbnN0IGRvdHMgPSB0aGlzLnBhc3N3b3JkRG90c1RhcmdldC5xdWVyeVNlbGVjdG9yQWxsKCcucGFzc3dvcmQtZG90JylcbiAgICBkb3RzLmZvckVhY2goKGRvdCwgaW5kZXgpID0+IHtcbiAgICAgIGlmIChpbmRleCA8IHRoaXMucGFzc3dvcmQubGVuZ3RoKSB7XG4gICAgICAgIGRvdC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG90LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHByb2Nlc3NQYXNzd29yZFBheW1lbnQoKTogdm9pZCB7XG4gICAgLy8gRG8gTk9UIGNsb3NlIG1vZGFsIGhlcmUgLSB3YWl0IGZvciB2ZXJpZmljYXRpb24gcmVzdWx0XG4gICAgLy8gRmlyc3QgdmVyaWZ5IHBhc3N3b3JkIGJlZm9yZSBzaG93aW5nIHBheW1lbnQgc3RhdHVzXG4gICAgdGhpcy52ZXJpZnlQYXNzd29yZFRoZW5QYXkoKVxuICB9XG5cbiAgYXN5bmMgdmVyaWZ5UGFzc3dvcmRUaGVuUGF5KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBDYWxsIHZlcmlmeSBBUEkgZmlyc3RcbiAgICAgIGNvbnN0IHZlcmlmeVJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9wcm9maWxlL3ZlcmlmeV9wYXlfcGFzc3dvcmQnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAnWC1DU1JGLVRva2VuJzogZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MTWV0YUVsZW1lbnQ+KCdtZXRhW25hbWU9XCJjc3JmLXRva2VuXCJdJyk/LmNvbnRlbnQgfHwgJydcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHBheV9wYXNzd29yZDogdGhpcy5wYXNzd29yZFxuICAgICAgICB9KVxuICAgICAgfSlcblxuICAgICAgY29uc3QgdmVyaWZ5RGF0YSA9IGF3YWl0IHZlcmlmeVJlc3BvbnNlLmpzb24oKVxuXG4gICAgICBpZiAoIXZlcmlmeVJlc3BvbnNlLm9rIHx8ICF2ZXJpZnlEYXRhLnN1Y2Nlc3MpIHtcbiAgICAgICAgLy8gUGFzc3dvcmQgaXMgd3JvbmcgLSBzaG93IHRvYXN0IGFuZCByZXNldFxuICAgICAgICBjb25zdCBtZXNzYWdlID0gdmVyaWZ5RGF0YS5tZXNzYWdlIHx8ICdcdTY1MkZcdTRFRDhcdTVCQzZcdTc4MDFcdTk1MTlcdThCRUYnXG4gICAgICAgIFxuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTY2MkZcdTk3MDBcdTg5ODFcdThCQkVcdTdGNkVcdTY1MkZcdTRFRDhcdTVCQzZcdTc4MDFcdUZGMENcdTc2RjRcdTYzQTVcdThERjNcdThGNkNcbiAgICAgICAgaWYgKG1lc3NhZ2UuaW5jbHVkZXMoJ1x1OEJGN1x1NTE0OFx1OEJCRVx1N0Y2RVx1NjUyRlx1NEVEOFx1NUJDNlx1NzgwMScpIHx8IG1lc3NhZ2UuaW5jbHVkZXMoJ1x1OEJCRVx1N0Y2RVx1NjUyRlx1NEVEOFx1NUJDNlx1NzgwMScpKSB7XG4gICAgICAgICAgaWYgKHRoaXMuaGFzUGFzc3dvcmRNb2RhbFRhcmdldCkge1xuICAgICAgICAgICAgdGhpcy5wYXNzd29yZE1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICAgICAgfVxuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9wcm9maWxlL2VkaXRfcGF5X3Bhc3N3b3JkJ1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAodHlwZW9mICh3aW5kb3cgYXMgYW55KS5zaG93VG9hc3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAod2luZG93IGFzIGFueSkuc2hvd1RvYXN0KG1lc3NhZ2UpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWxlcnQobWVzc2FnZSlcbiAgICAgICAgfVxuICAgICAgICAvLyBDbGVhciBwYXNzd29yZCBhbmQgc3RheSBvbiBwYXNzd29yZCBpbnB1dCBwYWdlXG4gICAgICAgIHRoaXMucGFzc3dvcmQgPSBcIlwiXG4gICAgICAgIHRoaXMudXBkYXRlUGFzc3dvcmREb3RzKClcbiAgICAgICAgaWYgKHRoaXMuaGFzUGFzc3dvcmRNb2RhbFRhcmdldCkge1xuICAgICAgICAgIHRoaXMucGFzc3dvcmRNb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICAvLyBQYXNzd29yZCBpcyBjb3JyZWN0IC0gcHJvY2VlZCB3aXRoIHBheW1lbnRcbiAgICAgIGlmICh0aGlzLmhhc1Bhc3N3b3JkTW9kYWxUYXJnZXQpIHtcbiAgICAgICAgdGhpcy5wYXNzd29yZE1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICB9XG4gICAgICB0aGlzLnNob3dQYXlpbmdTdGF0dXMoKVxuICAgICAgXG4gICAgICAvLyBQcm9jZXNzIGFjdHVhbCBwYXltZW50XG4gICAgICBhd2FpdCB0aGlzLnByb2Nlc3NBY3R1YWxQYXltZW50KClcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTlBOENcdThCQzFcdTY1MkZcdTRFRDhcdTVCQzZcdTc4MDFcdTU5MzFcdThEMjU6JywgZXJyb3IpXG4gICAgICBpZiAodHlwZW9mICh3aW5kb3cgYXMgYW55KS5zaG93VG9hc3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgKHdpbmRvdyBhcyBhbnkpLnNob3dUb2FzdCgnXHU3RjUxXHU3RURDXHU5NTE5XHU4QkVGXHVGRjBDXHU4QkY3XHU5MUNEXHU4QkQ1JylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KCdcdTdGNTFcdTdFRENcdTk1MTlcdThCRUZcdUZGMENcdThCRjdcdTkxQ0RcdThCRDUnKVxuICAgICAgfVxuICAgICAgdGhpcy5wYXNzd29yZCA9IFwiXCJcbiAgICAgIHRoaXMudXBkYXRlUGFzc3dvcmREb3RzKClcbiAgICAgIGlmICh0aGlzLmhhc1Bhc3N3b3JkTW9kYWxUYXJnZXQpIHtcbiAgICAgICAgdGhpcy5wYXNzd29yZE1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcHJvY2Vzc0FjdHVhbFBheW1lbnQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5wYXltZW50VXJsVmFsdWV9Lmpzb25gLCB7XG4gICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAnWC1DU1JGLVRva2VuJzogZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MTWV0YUVsZW1lbnQ+KCdtZXRhW25hbWU9XCJjc3JmLXRva2VuXCJdJyk/LmNvbnRlbnQgfHwgJydcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe30pIC8vIFBhc3N3b3JkIGFscmVhZHkgdmVyaWZpZWQsIGp1c3QgdHJpZ2dlciBwYXltZW50XG4gICAgICB9KVxuXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG5cbiAgICAgIGlmIChyZXNwb25zZS5vayAmJiBkYXRhLnN1Y2Nlc3MpIHtcbiAgICAgICAgLy8gU2hvdyBzdWNjZXNzIHN0YXR1c1xuICAgICAgICB0aGlzLnNob3dQYXltZW50U3VjY2VzcygpXG4gICAgICAgIC8vIFJlZGlyZWN0IGFmdGVyIHNob3dpbmcgc3VjY2Vzc1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHRoaXMuc3VjY2Vzc1VybFZhbHVlXG4gICAgICAgIH0sIDIwMDApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YS5tZXNzYWdlIHx8ICdcdTY1MkZcdTRFRDhcdTU5MzFcdThEMjUnKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTY1MkZcdTRFRDhcdTU5MzFcdThEMjU6JywgZXJyb3IpXG4gICAgICB0aGlzLmNsb3NlU3RhdHVzTW9kYWwoKVxuICAgICAgY29uc3QgbWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1x1NjUyRlx1NEVEOFx1NTkzMVx1OEQyNVx1RkYwQ1x1OEJGN1x1OTFDRFx1OEJENSdcbiAgICAgIGlmICh0eXBlb2YgKHdpbmRvdyBhcyBhbnkpLnNob3dUb2FzdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAod2luZG93IGFzIGFueSkuc2hvd1RvYXN0KG1lc3NhZ2UpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGVydChtZXNzYWdlKVxuICAgICAgfVxuICAgICAgdGhpcy5wYXNzd29yZCA9IFwiXCJcbiAgICAgIHRoaXMuc2hvd1Bhc3N3b3JkTW9kYWwoKVxuICAgIH1cbiAgfVxuXG4gIHNob3dQYXlpbmdTdGF0dXMoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc1N0YXR1c01vZGFsVGFyZ2V0KSByZXR1cm5cbiAgICBcbiAgICBpZiAodGhpcy5oYXNTdGF0dXNBbW91bnRUYXJnZXQpIHtcbiAgICAgIHRoaXMuc3RhdHVzQW1vdW50VGFyZ2V0LnRleHRDb250ZW50ID0gdGhpcy5hbW91bnRWYWx1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5oYXNTdGF0dXNVc2VyRW1haWxUYXJnZXQpIHtcbiAgICAgIHRoaXMuc3RhdHVzVXNlckVtYWlsVGFyZ2V0LnRleHRDb250ZW50ID0gdGhpcy51c2VyRW1haWxWYWx1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5oYXNTdGF0dXNJY29uVGFyZ2V0KSB7XG4gICAgICB0aGlzLnN0YXR1c0ljb25UYXJnZXQudGV4dENvbnRlbnQgPSAnXHVEODNEXHVEQ0IzJ1xuICAgIH1cbiAgICBpZiAodGhpcy5oYXNTdGF0dXNUZXh0VGFyZ2V0KSB7XG4gICAgICB0aGlzLnN0YXR1c1RleHRUYXJnZXQudGV4dENvbnRlbnQgPSAnXHU2QjYzXHU1NzI4XHU0RUQ4XHU2QjNFJ1xuICAgIH1cbiAgICBpZiAodGhpcy5oYXNTdGF0dXNEb3RzVGFyZ2V0KSB7XG4gICAgICB0aGlzLnN0YXR1c0RvdHNUYXJnZXQuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICB9XG4gICAgdGhpcy5zdGF0dXNNb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICB9XG5cbiAgc2hvd1BheW1lbnRTdWNjZXNzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmhhc1N0YXR1c0ljb25UYXJnZXQpIHtcbiAgICAgIHRoaXMuc3RhdHVzSWNvblRhcmdldC50ZXh0Q29udGVudCA9ICdcdTI3MTMnXG4gICAgfVxuICAgIGlmICh0aGlzLmhhc1N0YXR1c1RleHRUYXJnZXQpIHtcbiAgICAgIHRoaXMuc3RhdHVzVGV4dFRhcmdldC50ZXh0Q29udGVudCA9ICdcdTRFRDhcdTZCM0VcdTYyMTBcdTUyOUYnXG4gICAgfVxuICAgIGlmICh0aGlzLmhhc1N0YXR1c0RvdHNUYXJnZXQpIHtcbiAgICAgIHRoaXMuc3RhdHVzRG90c1RhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgfVxuICB9XG5cbiAgY2xvc2VTdGF0dXNNb2RhbCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5oYXNTdGF0dXNNb2RhbFRhcmdldCkge1xuICAgICAgdGhpcy5zdGF0dXNNb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyIHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJ0YWJcIl1cbiAgXG4gIGRlY2xhcmUgcmVhZG9ubHkgdGFiVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBwcml2YXRlIGFjdGl2ZVRhYlR5cGU6IHN0cmluZyA9ICdkb21lc3RpYydcbiAgXG4gIGNvbm5lY3QoKSB7XG4gICAgLy8gXHU1MjFEXHU1OUNCXHU1MzE2XHU2NUY2XHU4QkZCXHU1M0Q2XHU1RjUzXHU1MjREXHU2RkMwXHU2RDNCXHU3Njg0XHU2ODA3XHU3QjdFXG4gICAgY29uc3QgYWN0aXZlVGFiID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXRhYi10eXBlXS5iZy13aGl0ZScpIGFzIEhUTUxFbGVtZW50XG4gICAgdGhpcy5hY3RpdmVUYWJUeXBlID0gYWN0aXZlVGFiPy5kYXRhc2V0LnRhYlR5cGUgfHwgJ2RvbWVzdGljJ1xuICAgIFxuICAgIC8vIExpc3RlbiBmb3IgY2l0eSBzZWxlY3RvciBpbnRlcm5hdGlvbmFsIHN3aXRjaCBldmVudFxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NpdHktc2VsZWN0b3I6c3dpdGNoLXRvLWludGVybmF0aW9uYWwnLCB0aGlzLmhhbmRsZUludGVybmF0aW9uYWxTd2l0Y2guYmluZCh0aGlzKSlcbiAgfVxuICBcbiAgZGlzY29ubmVjdCgpIHtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjaXR5LXNlbGVjdG9yOnN3aXRjaC10by1pbnRlcm5hdGlvbmFsJywgdGhpcy5oYW5kbGVJbnRlcm5hdGlvbmFsU3dpdGNoLmJpbmQodGhpcykpXG4gIH1cbiAgXG4gIC8vIEhhbmRsZSBpbnRlcm5hdGlvbmFsIHN3aXRjaCBmcm9tIGNpdHkgc2VsZWN0b3JcbiAgcHJpdmF0ZSBoYW5kbGVJbnRlcm5hdGlvbmFsU3dpdGNoKCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKCdIb3RlbCB0YWJzOiBSZWNlaXZlZCBzd2l0Y2ggdG8gaW50ZXJuYXRpb25hbCBldmVudCcpXG4gICAgLy8gRmluZCBhbmQgY2xpY2sgdGhlIGludGVybmF0aW9uYWwgdGFiXG4gICAgY29uc3QgaW50ZXJuYXRpb25hbFRhYiA9IHRoaXMudGFiVGFyZ2V0cy5maW5kKHRhYiA9PiB0YWIuZGF0YXNldC50YWJUeXBlID09PSAnaW50ZXJuYXRpb25hbCcpXG4gICAgaWYgKGludGVybmF0aW9uYWxUYWIgJiYgdGhpcy5hY3RpdmVUYWJUeXBlICE9PSAnaW50ZXJuYXRpb25hbCcpIHtcbiAgICAgIC8vIFNpbXVsYXRlIGNsaWNrIHRvIHRyaWdnZXIgdGFiIHN3aXRjaFxuICAgICAgaW50ZXJuYXRpb25hbFRhYi5jbGljaygpXG4gICAgfVxuICB9XG5cbiAgc3dpdGNoVGFiKGV2ZW50OiBFdmVudCkge1xuICAgIGNvbnN0IGNsaWNrZWRUYWIgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgbmV3VGFiVHlwZSA9IGNsaWNrZWRUYWIuZGF0YXNldC50YWJUeXBlXG4gICAgXG4gICAgaWYgKCFuZXdUYWJUeXBlKSByZXR1cm5cbiAgICBcbiAgICAvLyBcdTU5ODJcdTY3OUNcdTcwQjlcdTUxRkJcdTc2ODRcdTY2MkZcdTVGNTNcdTUyNERcdTZGQzBcdTZEM0JcdTc2ODRcdTY4MDdcdTdCN0VcdUZGMENcdTRFMERcdTUwNUFcdTRFRkJcdTRGNTVcdTY0Q0RcdTRGNUNcbiAgICBpZiAobmV3VGFiVHlwZSA9PT0gdGhpcy5hY3RpdmVUYWJUeXBlKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gXHU2NkY0XHU2NUIwXHU2RkMwXHU2RDNCXHU3MkI2XHU2MDAxXG4gICAgdGhpcy5hY3RpdmVUYWJUeXBlID0gbmV3VGFiVHlwZVxuICAgIFxuICAgIC8vIFx1NzlGQlx1OTY2NFx1NjI0MFx1NjcwOVx1NjgwN1x1N0I3RVx1NzY4NFx1NkZDMFx1NkQzQlx1NjgzN1x1NUYwRlxuICAgIHRoaXMudGFiVGFyZ2V0cy5mb3JFYWNoKCh0YWI6IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgICB0YWIuY2xhc3NMaXN0LnJlbW92ZSgnYmctd2hpdGUnLCAncm91bmRlZC10LVsxMnB4XScsICdweC0zJywgJ3B5LTIuNScsICdyZWxhdGl2ZScpXG4gICAgICB0YWIuY2xhc3NMaXN0LmFkZCgncHgtMicsICdweS0yJylcbiAgICAgIFxuICAgICAgY29uc3Qgc3BhbiA9IHRhYi5xdWVyeVNlbGVjdG9yKCdzcGFuJylcbiAgICAgIGlmIChzcGFuKSB7XG4gICAgICAgIHNwYW4uY2xhc3NOYW1lID0gJ3RleHQtWzEzcHhdIGZvbnQtbWVkaXVtIHRleHQtWyM2NjY2NjZdJ1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBcdTU5ODJcdTY3OUNcdTY2MkYgYnV0dG9uXHVGRjBDXHU3ODZFXHU0RkREXHU2ODM3XHU1RjBGXHU2QjYzXHU3ODZFXG4gICAgICBpZiAodGFiLnRhZ05hbWUgPT09ICdCVVRUT04nKSB7XG4gICAgICAgIHRhYi5jbGFzc0xpc3QuYWRkKCd0ZXh0LVsxM3B4XScsICdmb250LW1lZGl1bScsICd0ZXh0LVsjNjY2NjY2XScsICdjdXJzb3ItcG9pbnRlcicsICd3aGl0ZXNwYWNlLW5vd3JhcCcpXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICAvLyBcdTRFM0FcdTg4QUJcdTcwQjlcdTUxRkJcdTc2ODRcdTY4MDdcdTdCN0VcdTZERkJcdTUyQTBcdTZGQzBcdTZEM0JcdTY4MzdcdTVGMEZcbiAgICBjbGlja2VkVGFiLmNsYXNzTGlzdC5yZW1vdmUoJ3B4LTInLCAncHktMicpXG4gICAgY2xpY2tlZFRhYi5jbGFzc0xpc3QuYWRkKCdyZWxhdGl2ZScsICdiZy13aGl0ZScsICdyb3VuZGVkLXQtWzEycHhdJywgJ3B4LTMnLCAncHktMi41JylcbiAgICBcbiAgICAvLyBcdTU5ODJcdTY3OUNcdTY2MkYgYnV0dG9uXHVGRjBDXHU5NzAwXHU4OTgxXHU1MjFCXHU1RUZBXHU2NUIwXHU3Njg0XHU3RUQzXHU2Nzg0XG4gICAgaWYgKGNsaWNrZWRUYWIudGFnTmFtZSA9PT0gJ0JVVFRPTicpIHtcbiAgICAgIGNvbnN0IGxhYmVsID0gY2xpY2tlZFRhYi50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnXG4gICAgICBjbGlja2VkVGFiLmlubmVySFRNTCA9IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0ZXh0LVsxNXB4XSBmb250LWJvbGQgdGV4dC1bIzFhMWExYV0gbGVhZGluZy10aWdodCB3aGl0ZXNwYWNlLW5vd3JhcFwiPiR7bGFiZWx9PC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGBcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1REYyXHU3RUNGXHU2NjJGIGRpdlx1RkYwQ1x1NTNFQVx1OTcwMFx1ODk4MVx1NjZGNFx1NjVCMCBzcGFuXG4gICAgICBjb25zdCBzcGFuID0gY2xpY2tlZFRhYi5xdWVyeVNlbGVjdG9yKCdzcGFuJylcbiAgICAgIGlmIChzcGFuKSB7XG4gICAgICAgIHNwYW4uY2xhc3NOYW1lID0gJ3RleHQtWzE1cHhdIGZvbnQtYm9sZCB0ZXh0LVsjMWExYTFhXSBsZWFkaW5nLXRpZ2h0IHdoaXRlc3BhY2Utbm93cmFwJ1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBcdTg5RTZcdTUzRDFcdTdDN0JcdTU3OEJcdTUyMDdcdTYzNjJcdTRFOEJcdTRFRjZcdUZGMENcdTRGOUJcdTUxNzZcdTRFRDZcdTYzQTdcdTUyMzZcdTU2NjhcdTc2RDFcdTU0MkNcbiAgICB0aGlzLmRpc3BhdGNoKCd0eXBlQ2hhbmdlZCcsIHsgZGV0YWlsOiB7IHR5cGU6IG5ld1RhYlR5cGUgfSB9KVxuICAgIFxuICAgIC8vIFx1NjgzOVx1NjM2RVx1N0M3Qlx1NTc4Qlx1N0I1Qlx1OTAwOVx1OTE1Mlx1NUU5N1x1NTIxN1x1ODg2OFxuICAgIHRoaXMuZmlsdGVySG90ZWxzKG5ld1RhYlR5cGUpXG4gIH1cbiAgXG4gIGZpbHRlckhvdGVscyh0eXBlOiBzdHJpbmcpIHtcbiAgICAvLyBcdTY4MzlcdTYzNkVcdTdDN0JcdTU3OEJcdTdCNUJcdTkwMDlcdTkxNTJcdTVFOTdcbiAgICAvLyBkb21lc3RpYzogXHU1NkZEXHU1MTg1XHU1N0NFXHU1RTAyXG4gICAgLy8gaW50ZXJuYXRpb25hbDogXHU1NkZEXHU1OTE2XHU1NDhDXHU0RTJEXHU1NkZEXHU2RTJGXHU2RkIzXG4gICAgLy8gaG91cmx5OiBcdTk0OUZcdTcwQjlcdTYyM0ZcdUZGMDhcdTY3RTVcdThCRTJcdTYyNDBcdTY3MDlcdTY3MDlcdTk0OUZcdTcwQjlcdTYyM0ZcdTc2ODRcdTkxNTJcdTVFOTdcdTU0OENcdTZDMTFcdTVCQkZcdUZGMDlcbiAgICAvLyBob21lc3RheTogXHU2QzExXHU1QkJGXG4gICAgXG4gICAgY29uc29sZS5sb2coYFx1NTIwN1x1NjM2Mlx1NTIzMFx1N0M3Qlx1NTc4QjogJHt0eXBlfWApXG4gICAgXG4gICAgLy8gXHU2Nzg0XHU1RUZBIFVSTCBcdTUzQzJcdTY1NzBcbiAgICBjb25zdCBjdXJyZW50UGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKVxuICAgIFxuICAgIC8vIFx1NEVDRSBjaXR5LXNlbGVjdG9yIFx1NjNBN1x1NTIzNlx1NTY2OFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1OTAwOVx1NjJFOVx1NzY4NFx1NTdDRVx1NUUwMlxuICAgIGNvbnN0IGNpdHlTZWxlY3RvckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jb250cm9sbGVyKj1cImNpdHktc2VsZWN0b3JcIl0nKVxuICAgIGlmIChjaXR5U2VsZWN0b3JFbGVtZW50KSB7XG4gICAgICBjb25zdCBkZXBhcnR1cmVDaXR5SW5wdXQgPSBjaXR5U2VsZWN0b3JFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNpdHktc2VsZWN0b3ItdGFyZ2V0PVwiZGVwYXJ0dXJlQ2l0eUlucHV0XCJdJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgICAgaWYgKGRlcGFydHVyZUNpdHlJbnB1dCAmJiBkZXBhcnR1cmVDaXR5SW5wdXQudmFsdWUpIHtcbiAgICAgICAgLy8gXHU1QzA2XHU5MDA5XHU2MkU5XHU3Njg0XHU1N0NFXHU1RTAyXHU2REZCXHU1MkEwXHU1MjMwIFVSTCBcdTUzQzJcdTY1NzBcdTRFMkRcbiAgICAgICAgY3VycmVudFBhcmFtcy5zZXQoJ2NpdHknLCBkZXBhcnR1cmVDaXR5SW5wdXQudmFsdWUpXG4gICAgICAgIGNvbnNvbGUubG9nKGBcdTRGRERcdTc1NTlcdTkwMDlcdTYyRTlcdTc2ODRcdTU3Q0VcdTVFMDI6ICR7ZGVwYXJ0dXJlQ2l0eUlucHV0LnZhbHVlfWApXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFx1NkUwNVx1OTY2NFx1NTNFRlx1ODBGRFx1NTFCMlx1N0E4MVx1NzY4NFx1NTNDMlx1NjU3MFxuICAgIGN1cnJlbnRQYXJhbXMuZGVsZXRlKCd0eXBlJylcbiAgICBjdXJyZW50UGFyYW1zLmRlbGV0ZSgncm9vbV9jYXRlZ29yeScpXG4gICAgXG4gICAgLy8gXHU4QkJFXHU3RjZFIGxvY2F0aW9uX3R5cGUgXHU1NDhDXHU3QjVCXHU5MDA5XHU1M0MyXHU2NTcwXG4gICAgaWYgKHR5cGUgPT09ICdkb21lc3RpYycpIHtcbiAgICAgIGN1cnJlbnRQYXJhbXMuc2V0KCdsb2NhdGlvbl90eXBlJywgJ2RvbWVzdGljJylcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdpbnRlcm5hdGlvbmFsJykge1xuICAgICAgY3VycmVudFBhcmFtcy5zZXQoJ2xvY2F0aW9uX3R5cGUnLCAnaW50ZXJuYXRpb25hbCcpXG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnaG91cmx5Jykge1xuICAgICAgLy8gXHU5NDlGXHU3MEI5XHU2MjNGXHVGRjFBXHU0RjdGXHU3NTI4IHJvb21fY2F0ZWdvcnkgXHU1M0MyXHU2NTcwXHU3QjVCXHU5MDA5XHU2NzA5XHU5NDlGXHU3MEI5XHU2MjNGXHU3Njg0XHU0RjRGXHU1QkJGXHU1NzNBXHU2MjQwXG4gICAgICBjdXJyZW50UGFyYW1zLnNldCgnbG9jYXRpb25fdHlwZScsICdkb21lc3RpYycpXG4gICAgICBjdXJyZW50UGFyYW1zLnNldCgncm9vbV9jYXRlZ29yeScsICdob3VybHknKVxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2hvbWVzdGF5Jykge1xuICAgICAgLy8gXHU2QzExXHU1QkJGXHVGRjFBXHU0RjdGXHU3NTI4IHR5cGUgXHU1M0MyXHU2NTcwXHU3QjVCXHU5MDA5XHU0RjRGXHU1QkJGXHU3QzdCXHU1NzhCXG4gICAgICBjdXJyZW50UGFyYW1zLnNldCgnbG9jYXRpb25fdHlwZScsICdkb21lc3RpYycpXG4gICAgICBjdXJyZW50UGFyYW1zLnNldCgndHlwZScsICdob21lc3RheScpXG4gICAgfVxuICAgIFxuICAgIC8vIFx1OTFDRFx1NjVCMFx1NTJBMFx1OEY3RFx1OTg3NVx1OTc2Mlx1NUUyNlx1NjVCMFx1NTNDMlx1NjU3MFxuICAgIGNvbnN0IG5ld1VybCA9IGAke3dpbmRvdy5sb2NhdGlvbi5wYXRobmFtZX0/JHtjdXJyZW50UGFyYW1zLnRvU3RyaW5nKCl9YFxuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gbmV3VXJsXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcIm1vZGFsXCIsXG4gICAgXCJndWVzdE5hbWVJbnB1dFwiLFxuICAgIFwiZ3Vlc3RQaG9uZUlucHV0XCIsXG4gICAgXCJzZWxlY3RlZFBhc3NlbmdlclwiXG4gIF1cblxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIHNlbGVjdGVkUGFzc2VuZ2VySWQ6IFN0cmluZyxcbiAgICBzZWxlY3RlZFBhc3Nlbmdlck5hbWU6IFN0cmluZyxcbiAgICBzZWxlY3RlZFBhc3NlbmdlclBob25lOiBTdHJpbmdcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZ3Vlc3ROYW1lSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBndWVzdFBob25lSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzZWxlY3RlZFBhc3NlbmdlclRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNTZWxlY3RlZFBhc3NlbmdlclRhcmdldDogYm9vbGVhblxuXG4gIGRlY2xhcmUgc2VsZWN0ZWRQYXNzZW5nZXJJZFZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBzZWxlY3RlZFBhc3Nlbmdlck5hbWVWYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgc2VsZWN0ZWRQYXNzZW5nZXJQaG9uZVZhbHVlOiBzdHJpbmdcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiSG90ZWxUcmF2ZWxlclNlbGVjdG9yIGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgLy8gT3BlbiBtb2RhbFxuICBvcGVuTW9kYWwoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJPcGVuaW5nIHRyYXZlbGVyIHNlbGVjdG9yIG1vZGFsXCIpXG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJ1xuICB9XG5cbiAgLy8gQ2xvc2UgbW9kYWxcbiAgY2xvc2VNb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICcnXG4gIH1cblxuICAvLyBTZWxlY3QgYSBwYXNzZW5nZXIgZnJvbSB0aGUgbGlzdFxuICBzZWxlY3RQYXNzZW5nZXIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHBhc3NlbmdlcklkID0gdGFyZ2V0LmRhdGFzZXQucGFzc2VuZ2VySWQgfHwgJydcbiAgICBjb25zdCBwYXNzZW5nZXJOYW1lID0gdGFyZ2V0LmRhdGFzZXQucGFzc2VuZ2VyTmFtZSB8fCAnJ1xuICAgIGNvbnN0IHBhc3NlbmdlclBob25lID0gdGFyZ2V0LmRhdGFzZXQucGFzc2VuZ2VyUGhvbmUgfHwgJydcblxuICAgIGNvbnNvbGUubG9nKFwiU2VsZWN0ZWQgcGFzc2VuZ2VyOlwiLCB7IHBhc3NlbmdlcklkLCBwYXNzZW5nZXJOYW1lLCBwYXNzZW5nZXJQaG9uZSB9KVxuXG4gICAgLy8gU3RvcmUgc2VsZWN0ZWQgdmFsdWVzXG4gICAgdGhpcy5zZWxlY3RlZFBhc3NlbmdlcklkVmFsdWUgPSBwYXNzZW5nZXJJZFxuICAgIHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJOYW1lVmFsdWUgPSBwYXNzZW5nZXJOYW1lXG4gICAgdGhpcy5zZWxlY3RlZFBhc3NlbmdlclBob25lVmFsdWUgPSBwYXNzZW5nZXJQaG9uZVxuXG4gICAgLy8gVXBkYXRlIGZvcm0gaW5wdXRzXG4gICAgdGhpcy5ndWVzdE5hbWVJbnB1dFRhcmdldC52YWx1ZSA9IHBhc3Nlbmdlck5hbWVcbiAgICB0aGlzLmd1ZXN0UGhvbmVJbnB1dFRhcmdldC52YWx1ZSA9IHBhc3NlbmdlclBob25lXG5cbiAgICAvLyBVcGRhdGUgc2VsZWN0ZWQgZGlzcGxheSBpZiBleGlzdHNcbiAgICBpZiAodGhpcy5oYXNTZWxlY3RlZFBhc3NlbmdlclRhcmdldCkge1xuICAgICAgdGhpcy5zZWxlY3RlZFBhc3NlbmdlclRhcmdldC50ZXh0Q29udGVudCA9IHBhc3Nlbmdlck5hbWVcbiAgICB9XG5cbiAgICAvLyBDbG9zZSBtb2RhbFxuICAgIHRoaXMuY2xvc2VNb2RhbCgpXG4gIH1cblxuICAvLyBNYW51YWwgaW5wdXQgLSBjbGVhciBzZWxlY3Rpb25cbiAgY2xlYXJTZWxlY3Rpb24oKTogdm9pZCB7XG4gICAgdGhpcy5zZWxlY3RlZFBhc3NlbmdlcklkVmFsdWUgPSAnJ1xuICAgIHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJOYW1lVmFsdWUgPSAnJ1xuICAgIHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJQaG9uZVZhbHVlID0gJydcbiAgfVxuXG4gIC8vIFN0b3AgcHJvcGFnYXRpb24gZm9yIGlubmVyIGNsaWNrc1xuICBzdG9wUHJvcGFnYXRpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgLy8gQXV0by1kaXNtaXNzIGFmdGVyIDIgc2Vjb25kc1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGUtZmFkZS1vdXQnKVxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnQucGFyZW50Tm9kZSkge1xuICAgICAgICAgIHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudClcbiAgICAgICAgfVxuICAgICAgfSwgMzAwKVxuICAgIH0sIDIwMDApXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbi8vIEF1dG9tYXRpY2FsbHkgZGlzcGxheXMgYSB0b2FzdCBtZXNzYWdlIHdoZW4gdGhlIGNvbnRyb2xsZXIgY29ubmVjdHNcbi8vIFVzZWQgd2l0aCBUdXJibyBTdHJlYW0gcmVzcG9uc2VzIHRvIHNob3cgdmFsaWRhdGlvbiBlcnJvcnNcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlciB7XG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgbWVzc2FnZTogU3RyaW5nXG4gIH1cblxuICBkZWNsYXJlIG1lc3NhZ2VWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpIHtcbiAgICAvLyBTaG93IHRoZSB0b2FzdCBpbW1lZGlhdGVseSB3aGVuIGVsZW1lbnQgaXMgaW5zZXJ0ZWRcbiAgICBpZiAodGhpcy5tZXNzYWdlVmFsdWUgJiYgd2luZG93LnNob3dUb2FzdCkge1xuICAgICAgd2luZG93LnNob3dUb2FzdCh0aGlzLm1lc3NhZ2VWYWx1ZSlcbiAgICB9XG4gICAgXG4gICAgLy8gUmVtb3ZlIHRoZSB0cmlnZ2VyIGVsZW1lbnQgZnJvbSBET01cbiAgICB0aGlzLmVsZW1lbnQucmVtb3ZlKClcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wiaW5zdXJhbmNlTW9kYWxcIiwgXCJjb25maXJtTW9kYWxcIiwgXCJmb3JtXCIsIFwidG90YWxQcmljZUFtb3VudFwiXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaW5zdXJhbmNlTW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY29uZmlybU1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGZvcm1UYXJnZXQ6IEhUTUxGb3JtRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRvdGFsUHJpY2VBbW91bnRUYXJnZXQ6IEhUTUxFbGVtZW50XG5cbiAgLy8gSGFuZGxlIGluc3VyYW5jZSBvcHRpb24gc2VsZWN0aW9uIGluIGZvcm1cbiAgc2VsZWN0SW5zdXJhbmNlT3B0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHJhZGlvID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgaW5zdXJhbmNlVHlwZSA9IHJhZGlvLmRhdGFzZXQuaW5zdXJhbmNlVHlwZSB8fCAnbm9uZSdcbiAgICBjb25zdCBpbnN1cmFuY2VQcmljZSA9IHJhZGlvLmRhdGFzZXQuaW5zdXJhbmNlUHJpY2UgfHwgJzAnXG4gICAgXG4gICAgLy8gVXBkYXRlIGhpZGRlbiBmaWVsZHNcbiAgICB0aGlzLnNldEluc3VyYW5jZVZhbHVlcyhpbnN1cmFuY2VUeXBlLCBpbnN1cmFuY2VQcmljZSlcbiAgICBcbiAgICAvLyBVcGRhdGUgdmlzdWFsIGluZGljYXRvcnMgKGJvcmRlciBhbmQgY2hlY2ttYXJrKVxuICAgIGNvbnN0IGFsbENhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtaW5zdXJhbmNlLWNhcmRdJylcbiAgICBhbGxDYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xuICAgICAgY2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItb3JhbmdlLTQwMCcsICdib3JkZXItZ3JheS00MDAnKVxuICAgICAgY2FyZC5jbGFzc0xpc3QuYWRkKCdib3JkZXItMicsICdib3JkZXItZ3JheS0zMDAnKVxuICAgIH0pXG4gICAgXG4gICAgLy8gQWRkIHN0eWxlIHRvIHNlbGVjdGVkIGNhcmRcbiAgICBjb25zdCBzZWxlY3RlZENhcmQgPSByYWRpby5jbG9zZXN0KCdbZGF0YS1pbnN1cmFuY2UtY2FyZF0nKSBhcyBIVE1MRWxlbWVudFxuICAgIGlmIChzZWxlY3RlZENhcmQpIHtcbiAgICAgIHNlbGVjdGVkQ2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItZ3JheS0zMDAnKVxuICAgICAgaWYgKGluc3VyYW5jZVR5cGUgPT09ICdub25lJykge1xuICAgICAgICBzZWxlY3RlZENhcmQuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLWdyYXktNDAwJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGVjdGVkQ2FyZC5jbGFzc0xpc3QuYWRkKCdib3JkZXItb3JhbmdlLTQwMCcpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHRvdGFsIHByaWNlXG4gICAgdGhpcy51cGRhdGVUb3RhbFByaWNlKClcbiAgfVxuXG4gIC8vIFVwZGF0ZSB0b3RhbCBwcmljZSBkaXNwbGF5XG4gIHByaXZhdGUgdXBkYXRlVG90YWxQcmljZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMudG90YWxQcmljZUFtb3VudFRhcmdldCkgcmV0dXJuXG4gICAgXG4gICAgY29uc3QgYmFzZVByaWNlID0gcGFyc2VGbG9hdCh0aGlzLnRvdGFsUHJpY2VBbW91bnRUYXJnZXQuZGF0YXNldC5iYXNlUHJpY2UgfHwgJzAnKVxuICAgIGNvbnN0IGluc3VyYW5jZVByaWNlRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaG90ZWxfYm9va2luZ19pbnN1cmFuY2VfcHJpY2UnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgaW5zdXJhbmNlUHJpY2UgPSBwYXJzZUZsb2F0KGluc3VyYW5jZVByaWNlRmllbGQ/LnZhbHVlIHx8ICcwJylcbiAgICBcbiAgICAvLyBDYWxjdWxhdGUgdG90YWwgcHJpY2U6IGJhc2UgcHJpY2UgKyBpbnN1cmFuY2UgcHJpY2VcbiAgICBjb25zdCB0b3RhbFByaWNlID0gYmFzZVByaWNlICsgaW5zdXJhbmNlUHJpY2VcbiAgICBcbiAgICB0aGlzLnRvdGFsUHJpY2VBbW91bnRUYXJnZXQudGV4dENvbnRlbnQgPSB0b3RhbFByaWNlLnRvRml4ZWQoMilcbiAgfVxuXG4gIHNldEluc3VyYW5jZVZhbHVlcyhpbnN1cmFuY2VUeXBlOiBzdHJpbmcsIGluc3VyYW5jZVByaWNlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBpbnN1cmFuY2VUeXBlRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaG90ZWxfYm9va2luZ19pbnN1cmFuY2VfdHlwZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBpbnN1cmFuY2VQcmljZUZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvdGVsX2Jvb2tpbmdfaW5zdXJhbmNlX3ByaWNlJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIFxuICAgIGlmIChpbnN1cmFuY2VUeXBlRmllbGQpIHtcbiAgICAgIGluc3VyYW5jZVR5cGVGaWVsZC52YWx1ZSA9IGluc3VyYW5jZVR5cGVcbiAgICB9XG4gICAgXG4gICAgaWYgKGluc3VyYW5jZVByaWNlRmllbGQpIHtcbiAgICAgIGluc3VyYW5jZVByaWNlRmllbGQudmFsdWUgPSBpbnN1cmFuY2VQcmljZVxuICAgIH1cbiAgfVxuXG4gIC8vIEhhbmRsZSBzdWJtaXQgYnV0dG9uIGNsaWNrXG4gIGhhbmRsZVN1Ym1pdChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgXG4gICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzXG4gICAgY29uc3QgZ3Vlc3ROYW1lRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaG90ZWxfYm9va2luZ19ndWVzdF9uYW1lJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IGd1ZXN0UGhvbmVGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdob3RlbF9ib29raW5nX2d1ZXN0X3Bob25lJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIFxuICAgIGNvbnN0IGd1ZXN0TmFtZSA9IGd1ZXN0TmFtZUZpZWxkPy52YWx1ZT8udHJpbSgpIHx8ICcnXG4gICAgY29uc3QgZ3Vlc3RQaG9uZSA9IGd1ZXN0UGhvbmVGaWVsZD8udmFsdWU/LnRyaW0oKSB8fCAnJ1xuICAgIFxuICAgIGlmICghZ3Vlc3ROYW1lKSB7XG4gICAgICBhbGVydCgnXHU4QkY3XHU1ODZCXHU1MTk5XHU1MTY1XHU0RjRGXHU0RUJBXHU1OUQzXHU1NDBEJylcbiAgICAgIGd1ZXN0TmFtZUZpZWxkPy5mb2N1cygpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgaWYgKCFndWVzdFBob25lKSB7XG4gICAgICBhbGVydCgnXHU4QkY3XHU1ODZCXHU1MTk5XHU4MDU0XHU3Q0ZCXHU2MjRCXHU2NzNBJylcbiAgICAgIGd1ZXN0UGhvbmVGaWVsZD8uZm9jdXMoKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIFZhbGlkYXRlIHBob25lIG51bWJlciBmb3JtYXQgKHNpbXBsZSB2YWxpZGF0aW9uKVxuICAgIGNvbnN0IHBob25lUmVnZXggPSAvXjFbMy05XVxcZHs5fSQvXG4gICAgaWYgKCFwaG9uZVJlZ2V4LnRlc3QoZ3Vlc3RQaG9uZSkpIHtcbiAgICAgIGFsZXJ0KCdcdThCRjdcdTU4NkJcdTUxOTlcdTZCNjNcdTc4NkVcdTc2ODRcdTYyNEJcdTY3M0FcdTUzRjdcdTc4MDEnKVxuICAgICAgZ3Vlc3RQaG9uZUZpZWxkPy5mb2N1cygpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdXNlciBoYXMgc2VsZWN0ZWQgaW5zdXJhbmNlXG4gICAgY29uc3QgaW5zdXJhbmNlVHlwZUZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvdGVsX2Jvb2tpbmdfaW5zdXJhbmNlX3R5cGUnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgaW5zdXJhbmNlVHlwZSA9IGluc3VyYW5jZVR5cGVGaWVsZD8udmFsdWUgfHwgJ25vbmUnXG4gICAgXG4gICAgaWYgKGluc3VyYW5jZVR5cGUgPT09ICdub25lJykge1xuICAgICAgLy8gVXNlciBoYXNuJ3Qgc2VsZWN0ZWQgaW5zdXJhbmNlLCBzaG93IGluc3VyYW5jZSByZWNvbW1lbmRhdGlvbiBtb2RhbFxuICAgICAgdGhpcy5zaG93SW5zdXJhbmNlTW9kYWwoKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBVc2VyIGhhcyBzZWxlY3RlZCBpbnN1cmFuY2UsIHByb2NlZWQgdG8gY29uZmlybWF0aW9uXG4gICAgICB0aGlzLnNob3dDb25maXJtTW9kYWwoKVxuICAgIH1cbiAgfVxuXG4gIHNob3dJbnN1cmFuY2VNb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLmluc3VyYW5jZU1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gIH1cblxuICBjbG9zZUluc3VyYW5jZU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMuaW5zdXJhbmNlTW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgfVxuXG4gIC8vIFNlbGVjdCByZWNvbW1lbmRlZCBpbnN1cmFuY2UgZnJvbSBtb2RhbFxuICBzZWxlY3RSZWNvbW1lbmRlZEluc3VyYW5jZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50XG4gICAgY29uc3QgaW5zdXJhbmNlVHlwZSA9IGJ1dHRvbi5kYXRhc2V0Lmluc3VyYW5jZVR5cGUgfHwgJ2hvdGVsX2NhbmNlbGxhdGlvbidcbiAgICBjb25zdCBpbnN1cmFuY2VQcmljZSA9IGJ1dHRvbi5kYXRhc2V0Lmluc3VyYW5jZVByaWNlIHx8ICcxNidcbiAgICBcbiAgICAvLyBVcGRhdGUgaW5zdXJhbmNlIHZhbHVlc1xuICAgIHRoaXMuc2V0SW5zdXJhbmNlVmFsdWVzKGluc3VyYW5jZVR5cGUsIGluc3VyYW5jZVByaWNlKVxuICAgIFxuICAgIC8vIFVwZGF0ZSBVSSB0byBzaG93IHNlbGVjdGVkIGluc3VyYW5jZVxuICAgIGNvbnN0IHRhcmdldFJhZGlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgaW5wdXRbbmFtZT1cImluc3VyYW5jZV9zZWxlY3Rpb25cIl1bdmFsdWU9XCIke2luc3VyYW5jZVR5cGV9XCJdYCkgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGlmICh0YXJnZXRSYWRpbykge1xuICAgICAgdGFyZ2V0UmFkaW8uY2hlY2tlZCA9IHRydWVcbiAgICAgIC8vIFRyaWdnZXIgY2hhbmdlIGV2ZW50IHRvIHVwZGF0ZSB2aXN1YWwgaW5kaWNhdG9yc1xuICAgICAgdGFyZ2V0UmFkaW8uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2NoYW5nZScsIHsgYnViYmxlczogdHJ1ZSB9KSlcbiAgICB9XG4gICAgXG4gICAgLy8gQ2xvc2UgaW5zdXJhbmNlIG1vZGFsIGFuZCBzaG93IGNvbmZpcm1hdGlvblxuICAgIHRoaXMuY2xvc2VJbnN1cmFuY2VNb2RhbCgpXG4gICAgdGhpcy5zaG93Q29uZmlybU1vZGFsKClcbiAgfVxuXG4gIC8vIFNraXAgaW5zdXJhbmNlIHNlbGVjdGlvblxuICBza2lwSW5zdXJhbmNlKCk6IHZvaWQge1xuICAgIHRoaXMuc2V0SW5zdXJhbmNlVmFsdWVzKCdub25lJywgJzAnKVxuICAgIHRoaXMuY2xvc2VJbnN1cmFuY2VNb2RhbCgpXG4gICAgdGhpcy5zaG93Q29uZmlybU1vZGFsKClcbiAgfVxuXG4gIHNob3dDb25maXJtTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5jb25maXJtTW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICBcbiAgICAvLyBXYWl0IDEwIHNlY29uZHMgdGhlbiBzdWJtaXQgZm9ybSAoc2ltdWxhdGluZyByb29tIGxvY2tpbmcgcHJvY2VzcylcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuc3VibWl0Rm9ybSgpXG4gICAgfSwgMTAwMDApXG4gIH1cblxuICBjbG9zZUNvbmZpcm1Nb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLmNvbmZpcm1Nb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICB9XG5cbiAgc3VibWl0Rm9ybSgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygnU3VibWl0dGluZyBmb3JtOicsIHRoaXMuZm9ybVRhcmdldClcbiAgICBcbiAgICAvLyBTdWJtaXQgZm9ybSBub3JtYWxseSAtIGxldCBSYWlscyBoYW5kbGUgdGhlIHJlZGlyZWN0XG4gICAgdGhpcy5mb3JtVGFyZ2V0LnN1Ym1pdCgpXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcInBhY2thZ2VTZWxlY3RvclwiLFxuICAgIFwicHJpY2VEaXNwbGF5XCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgc2VsZWN0ZWRQYWNrYWdlSWQ6IE51bWJlclxuICB9XG5cbiAgLy8gRGVjbGFyZSB5b3VyIHRhcmdldHMgYW5kIHZhbHVlc1xuICBkZWNsYXJlIHJlYWRvbmx5IHBhY2thZ2VTZWxlY3RvclRhcmdldD86IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgcHJpY2VEaXNwbGF5VGFyZ2V0PzogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSBzZWxlY3RlZFBhY2thZ2VJZFZhbHVlOiBudW1iZXJcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiVG91ckRldGFpbCBjb250cm9sbGVyIGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlRvdXJEZXRhaWwgY29udHJvbGxlciBkaXNjb25uZWN0ZWRcIilcbiAgfVxuXG4gIC8vIE5hdmlnYXRlIHRvIHBhY2thZ2VzIHRhYlxuICBzZWxlY3RQYWNrYWdlKCk6IHZvaWQge1xuICAgIGNvbnN0IGN1cnJlbnRVcmwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKVxuICAgIGN1cnJlbnRVcmwuc2VhcmNoUGFyYW1zLnNldCgndGFiJywgJ3BhY2thZ2VzJylcbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGN1cnJlbnRVcmwudG9TdHJpbmcoKVxuICB9XG5cbiAgLy8gU2VsZWN0IGEgc3BlY2lmaWMgcGFja2FnZVxuICBzZWxlY3RUaGlzUGFja2FnZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgcGFja2FnZUlkID0gdGFyZ2V0LmRhdGFzZXQucGFja2FnZUlkXG4gICAgXG4gICAgaWYgKHBhY2thZ2VJZCkge1xuICAgICAgdGhpcy5zZWxlY3RlZFBhY2thZ2VJZFZhbHVlID0gcGFyc2VJbnQocGFja2FnZUlkKVxuICAgICAgXG4gICAgICAvLyBOYXZpZ2F0ZSBiYWNrIHRvIG92ZXJ2aWV3IHRhYiB3aXRoIHNlbGVjdGVkIHBhY2thZ2VcbiAgICAgIGNvbnN0IGN1cnJlbnRVcmwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKVxuICAgICAgY3VycmVudFVybC5zZWFyY2hQYXJhbXMuc2V0KCd0YWInLCAnb3ZlcnZpZXcnKVxuICAgICAgY3VycmVudFVybC5zZWFyY2hQYXJhbXMuc2V0KCdwYWNrYWdlX2lkJywgcGFja2FnZUlkKVxuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBjdXJyZW50VXJsLnRvU3RyaW5nKClcbiAgICB9XG4gIH1cblxuICAvLyBTY3JvbGwgdG8gc3BlY2lmaWMgc2VjdGlvbiAoZm9yIHNtb290aCBuYXZpZ2F0aW9uKVxuICBzY3JvbGxUb1NlY3Rpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHNlY3Rpb25JZCA9IHRhcmdldC5kYXRhc2V0LnNlY3Rpb25cbiAgICBcbiAgICBpZiAoc2VjdGlvbklkKSB7XG4gICAgICBjb25zdCBzZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VjdGlvbklkKVxuICAgICAgaWYgKHNlY3Rpb24pIHtcbiAgICAgICAgc2VjdGlvbi5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcInNsaWRlXCIsIFwiaW5kaWNhdG9yXCJdXG4gIFxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIGluZGV4OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxuICAgIGF1dG9wbGF5OiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH0sXG4gICAgaW50ZXJ2YWw6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiA1MDAwIH1cbiAgfVxuXG4gIC8vIERlY2xhcmUgeW91ciB0YXJnZXRzIGFuZCB2YWx1ZXNcbiAgZGVjbGFyZSByZWFkb25seSBzbGlkZVRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBpbmRpY2F0b3JUYXJnZXRzPzogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0luZGljYXRvclRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIGluZGV4VmFsdWU6IG51bWJlclxuICBkZWNsYXJlIHJlYWRvbmx5IGF1dG9wbGF5VmFsdWU6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBpbnRlcnZhbFZhbHVlOiBudW1iZXJcbiAgXG4gIHByaXZhdGUgYXV0b3BsYXlUaW1lcj86IG51bWJlclxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJDYXJvdXNlbCBjb250cm9sbGVyIGNvbm5lY3RlZFwiKVxuICAgIHRoaXMuc2hvd1NsaWRlKHRoaXMuaW5kZXhWYWx1ZSlcbiAgICBcbiAgICBpZiAodGhpcy5hdXRvcGxheVZhbHVlKSB7XG4gICAgICB0aGlzLnN0YXJ0QXV0b3BsYXkoKVxuICAgIH1cbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJDYXJvdXNlbCBjb250cm9sbGVyIGRpc2Nvbm5lY3RlZFwiKVxuICAgIHRoaXMuc3RvcEF1dG9wbGF5KClcbiAgfVxuXG4gIC8vIE5hdmlnYXRlIHRvIHByZXZpb3VzIHNsaWRlXG4gIHByZXZpb3VzKCk6IHZvaWQge1xuICAgIHRoaXMuc3RvcEF1dG9wbGF5KClcbiAgICBjb25zdCBuZXdJbmRleCA9IHRoaXMuaW5kZXhWYWx1ZSA+IDAgPyB0aGlzLmluZGV4VmFsdWUgLSAxIDogdGhpcy5zbGlkZVRhcmdldHMubGVuZ3RoIC0gMVxuICAgIHRoaXMuaW5kZXhWYWx1ZSA9IG5ld0luZGV4XG4gICAgdGhpcy5zaG93U2xpZGUobmV3SW5kZXgpXG4gIH1cblxuICAvLyBOYXZpZ2F0ZSB0byBuZXh0IHNsaWRlXG4gIG5leHQoKTogdm9pZCB7XG4gICAgdGhpcy5zdG9wQXV0b3BsYXkoKVxuICAgIGNvbnN0IG5ld0luZGV4ID0gdGhpcy5pbmRleFZhbHVlIDwgdGhpcy5zbGlkZVRhcmdldHMubGVuZ3RoIC0gMSA/IHRoaXMuaW5kZXhWYWx1ZSArIDEgOiAwXG4gICAgdGhpcy5pbmRleFZhbHVlID0gbmV3SW5kZXhcbiAgICB0aGlzLnNob3dTbGlkZShuZXdJbmRleClcbiAgfVxuXG4gIC8vIEdvIHRvIHNwZWNpZmljIHNsaWRlXG4gIGdvVG8oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5zdG9wQXV0b3BsYXkoKVxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KHRhcmdldC5kYXRhc2V0LmluZGV4IHx8IFwiMFwiKVxuICAgIHRoaXMuaW5kZXhWYWx1ZSA9IGluZGV4XG4gICAgdGhpcy5zaG93U2xpZGUoaW5kZXgpXG4gIH1cblxuICAvLyBTaG93IHNwZWNpZmljIHNsaWRlXG4gIHByaXZhdGUgc2hvd1NsaWRlKGluZGV4OiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBIaWRlIGFsbCBzbGlkZXNcbiAgICB0aGlzLnNsaWRlVGFyZ2V0cy5mb3JFYWNoKChzbGlkZSwgaSkgPT4ge1xuICAgICAgaWYgKGkgPT09IGluZGV4KSB7XG4gICAgICAgIHNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzbGlkZS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBVcGRhdGUgaW5kaWNhdG9ycyBpZiB0aGV5IGV4aXN0XG4gICAgaWYgKHRoaXMuaGFzSW5kaWNhdG9yVGFyZ2V0KSB7XG4gICAgICB0aGlzLmluZGljYXRvclRhcmdldHM/LmZvckVhY2goKGluZGljYXRvciwgaSkgPT4ge1xuICAgICAgICBpZiAoaSA9PT0gaW5kZXgpIHtcbiAgICAgICAgICBpbmRpY2F0b3IuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpbmRpY2F0b3IuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvLyBBdXRvcGxheSBmdW5jdGlvbmFsaXR5XG4gIHByaXZhdGUgc3RhcnRBdXRvcGxheSgpOiB2b2lkIHtcbiAgICB0aGlzLmF1dG9wbGF5VGltZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgdGhpcy5uZXh0KClcbiAgICB9LCB0aGlzLmludGVydmFsVmFsdWUpXG4gIH1cblxuICBwcml2YXRlIHN0b3BBdXRvcGxheSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5hdXRvcGxheVRpbWVyKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuYXV0b3BsYXlUaW1lcilcbiAgICAgIHRoaXMuYXV0b3BsYXlUaW1lciA9IHVuZGVmaW5lZFxuICAgIH1cbiAgfVxuXG4gIC8vIEhhbmRsZSB0b3VjaC9zd2lwZSBnZXN0dXJlc1xuICBwcml2YXRlIHRvdWNoU3RhcnRYID0gMFxuICBwcml2YXRlIHRvdWNoRW5kWCA9IDBcblxuICBoYW5kbGVUb3VjaFN0YXJ0KGV2ZW50OiBUb3VjaEV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy50b3VjaFN0YXJ0WCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnNjcmVlblhcbiAgfVxuXG4gIGhhbmRsZVRvdWNoRW5kKGV2ZW50OiBUb3VjaEV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy50b3VjaEVuZFggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5zY3JlZW5YXG4gICAgdGhpcy5oYW5kbGVTd2lwZSgpXG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVN3aXBlKCk6IHZvaWQge1xuICAgIGNvbnN0IHN3aXBlVGhyZXNob2xkID0gNTBcbiAgICBjb25zdCBkaWZmID0gdGhpcy50b3VjaFN0YXJ0WCAtIHRoaXMudG91Y2hFbmRYXG5cbiAgICBpZiAoTWF0aC5hYnMoZGlmZikgPiBzd2lwZVRocmVzaG9sZCkge1xuICAgICAgaWYgKGRpZmYgPiAwKSB7XG4gICAgICAgIC8vIFN3aXBlZCBsZWZ0IC0gbmV4dCBzbGlkZVxuICAgICAgICB0aGlzLm5leHQoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gU3dpcGVkIHJpZ2h0IC0gcHJldmlvdXMgc2xpZGVcbiAgICAgICAgdGhpcy5wcmV2aW91cygpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJ0YWJcIiwgXCJzZWN0aW9uXCJdXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgb2Zmc2V0OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMTIwIH0gLy8gVG9wIG9mZnNldCBmb3IgbmF2IGJhcnMgKHRvcCBuYXYgNTZweCArIHRhYiBuYXYgNTZweCArIGV4dHJhIDhweClcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgdGFiVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IHNlY3Rpb25UYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgb2Zmc2V0VmFsdWU6IG51bWJlclxuXG4gIHByaXZhdGUgb2JzZXJ2ZXI6IEludGVyc2VjdGlvbk9ic2VydmVyIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSBpc1Njcm9sbGluZyA9IGZhbHNlXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlNjcm9sbFNweSBjb250cm9sbGVyIGNvbm5lY3RlZFwiKVxuICAgIHRoaXMuc2V0dXBJbnRlcnNlY3Rpb25PYnNlcnZlcigpXG4gICAgXG4gICAgLy8gSW5pdGlhbCBhY3RpdmUgdGFiIG9uIHBhZ2UgbG9hZFxuICAgIHRoaXMudXBkYXRlQWN0aXZlVGFiKClcbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMub2JzZXJ2ZXIpIHtcbiAgICAgIHRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCgpXG4gICAgfVxuICB9XG5cbiAgc2V0dXBJbnRlcnNlY3Rpb25PYnNlcnZlcigpOiB2b2lkIHtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgcm9vdDogbnVsbCxcbiAgICAgIHJvb3RNYXJnaW46IGAtJHt0aGlzLm9mZnNldFZhbHVlfXB4IDBweCAtNTAlIDBweGAsIC8vIEFjdGl2ZSB3aGVuIHNlY3Rpb24gaXMgbmVhciB0b3BcbiAgICAgIHRocmVzaG9sZDogMFxuICAgIH1cblxuICAgIHRoaXMub2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoKGVudHJpZXMpID0+IHtcbiAgICAgIC8vIE9ubHkgdXBkYXRlIGlmIHdlJ3JlIG5vdCBjdXJyZW50bHkgYXV0by1zY3JvbGxpbmdcbiAgICAgIGlmICh0aGlzLmlzU2Nyb2xsaW5nKSByZXR1cm5cblxuICAgICAgZW50cmllcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xuICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICBjb25zdCBzZWN0aW9uSWQgPSBlbnRyeS50YXJnZXQuaWRcbiAgICAgICAgICB0aGlzLnNldEFjdGl2ZVRhYihzZWN0aW9uSWQpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSwgb3B0aW9ucylcblxuICAgIC8vIE9ic2VydmUgYWxsIHNlY3Rpb25zXG4gICAgdGhpcy5zZWN0aW9uVGFyZ2V0cy5mb3JFYWNoKChzZWN0aW9uKSA9PiB7XG4gICAgICB0aGlzLm9ic2VydmVyPy5vYnNlcnZlKHNlY3Rpb24pXG4gICAgfSlcbiAgfVxuXG4gIHNjcm9sbFRvU2VjdGlvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3Qgc2VjdGlvbklkID0gdGFyZ2V0LmRhdGFzZXQuc2VjdGlvblxuICAgIFxuICAgIGlmICghc2VjdGlvbklkKSByZXR1cm5cblxuICAgIGNvbnN0IHNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWN0aW9uSWQpXG4gICAgaWYgKCFzZWN0aW9uKSByZXR1cm5cblxuICAgIC8vIFNldCBmbGFnIHRvIHByZXZlbnQgb2JzZXJ2ZXIgZnJvbSB0cmlnZ2VyaW5nIGR1cmluZyBhdXRvLXNjcm9sbFxuICAgIHRoaXMuaXNTY3JvbGxpbmcgPSB0cnVlXG5cbiAgICAvLyBDYWxjdWxhdGUgc2Nyb2xsIHBvc2l0aW9uIGFjY291bnRpbmcgZm9yIHN0aWNreSBoZWFkZXJzXG4gICAgY29uc3Qgc2VjdGlvblRvcCA9IHNlY3Rpb24uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgd2luZG93LnNjcm9sbFlcbiAgICBjb25zdCBzY3JvbGxUbyA9IHNlY3Rpb25Ub3AgLSB0aGlzLm9mZnNldFZhbHVlXG5cbiAgICAvLyBTbW9vdGggc2Nyb2xsIHRvIHNlY3Rpb25cbiAgICB3aW5kb3cuc2Nyb2xsVG8oe1xuICAgICAgdG9wOiBzY3JvbGxUbyxcbiAgICAgIGJlaGF2aW9yOiBcInNtb290aFwiXG4gICAgfSlcblxuICAgIC8vIEltbWVkaWF0ZWx5IHVwZGF0ZSBhY3RpdmUgdGFiXG4gICAgdGhpcy5zZXRBY3RpdmVUYWIoc2VjdGlvbklkKVxuXG4gICAgLy8gUmVzZXQgZmxhZyBhZnRlciBzY3JvbGwgY29tcGxldGVzXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmlzU2Nyb2xsaW5nID0gZmFsc2VcbiAgICB9LCAxMDAwKSAvLyBJbmNyZWFzZWQgdGltZW91dCB0byBlbnN1cmUgc21vb3RoIHNjcm9sbCBjb21wbGV0ZXNcbiAgfVxuXG4gIHNldEFjdGl2ZVRhYihzZWN0aW9uSWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIC8vIFJlbW92ZSBhY3RpdmUgY2xhc3MgZnJvbSBhbGwgdGFic1xuICAgIHRoaXMudGFiVGFyZ2V0cy5mb3JFYWNoKCh0YWIpID0+IHtcbiAgICAgIHRhYi5jbGFzc0xpc3QucmVtb3ZlKFwiYm9yZGVyLXByaW1hcnlcIiwgXCJ0ZXh0LXByaW1hcnlcIilcbiAgICAgIHRhYi5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLXRyYW5zcGFyZW50XCIsIFwidGV4dC1mb3JlZ3JvdW5kLW11dGVkXCIpXG4gICAgfSlcblxuICAgIC8vIEFkZCBhY3RpdmUgY2xhc3MgdG8gbWF0Y2hpbmcgdGFiXG4gICAgY29uc3QgYWN0aXZlVGFiID0gdGhpcy50YWJUYXJnZXRzLmZpbmQoKHRhYikgPT4gdGFiLmRhdGFzZXQuc2VjdGlvbiA9PT0gc2VjdGlvbklkKVxuICAgIGlmIChhY3RpdmVUYWIpIHtcbiAgICAgIGFjdGl2ZVRhYi5jbGFzc0xpc3QucmVtb3ZlKFwiYm9yZGVyLXRyYW5zcGFyZW50XCIsIFwidGV4dC1mb3JlZ3JvdW5kLW11dGVkXCIpXG4gICAgICBhY3RpdmVUYWIuY2xhc3NMaXN0LmFkZChcImJvcmRlci1wcmltYXJ5XCIsIFwidGV4dC1wcmltYXJ5XCIpXG4gICAgICBcbiAgICAgIC8vIFNjcm9sbCB0YWIgaW50byB2aWV3IGlmIG5lZWRlZCAoaG9yaXpvbnRhbCBzY3JvbGwpXG4gICAgICBhY3RpdmVUYWIuc2Nyb2xsSW50b1ZpZXcoe1xuICAgICAgICBiZWhhdmlvcjogXCJzbW9vdGhcIixcbiAgICAgICAgYmxvY2s6IFwibmVhcmVzdFwiLFxuICAgICAgICBpbmxpbmU6IFwiY2VudGVyXCJcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgdXBkYXRlQWN0aXZlVGFiKCk6IHZvaWQge1xuICAgIC8vIEZpbmQgdGhlIGZpcnN0IHZpc2libGUgc2VjdGlvblxuICAgIGNvbnN0IHNjcm9sbFBvc2l0aW9uID0gd2luZG93LnBhZ2VZT2Zmc2V0ICsgdGhpcy5vZmZzZXRWYWx1ZSArIDEwXG5cbiAgICBmb3IgKGxldCBpID0gdGhpcy5zZWN0aW9uVGFyZ2V0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuc2VjdGlvblRhcmdldHNbaV1cbiAgICAgIGNvbnN0IHNlY3Rpb25Ub3AgPSBzZWN0aW9uLm9mZnNldFRvcFxuXG4gICAgICBpZiAoc2Nyb2xsUG9zaXRpb24gPj0gc2VjdGlvblRvcCkge1xuICAgICAgICB0aGlzLnNldEFjdGl2ZVRhYihzZWN0aW9uLmlkKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wiY2FyZFwiLCBcImRldGFpbHNcIl1cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBzZWxlY3RlZElkOiBOdW1iZXJcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2FyZFRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBkZXRhaWxzVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHNlbGVjdGVkSWRWYWx1ZTogbnVtYmVyXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlBhY2thZ2VTd2l0Y2hlciBjb25uZWN0ZWRcIilcbiAgICBcbiAgICAvLyBMaXN0ZW4gZm9yIHBhY2thZ2Ugc2VsZWN0aW9uIGNoYW5nZXMgZnJvbSBib29raW5nIG1vZGFsXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJib29raW5nLW1vZGFsOnBhY2thZ2UtY2hhbmdlZFwiLCAoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgICBjb25zdCBjdXN0b21FdmVudCA9IGV2ZW50IGFzIEN1c3RvbUV2ZW50XG4gICAgICBjb25zdCBwYWNrYWdlSWQgPSBjdXN0b21FdmVudC5kZXRhaWwucGFja2FnZUlkXG4gICAgICBpZiAocGFja2FnZUlkICYmIHBhY2thZ2VJZCAhPT0gdGhpcy5zZWxlY3RlZElkVmFsdWUpIHtcbiAgICAgICAgdGhpcy5zeW5jUGFja2FnZVNlbGVjdGlvbihwYWNrYWdlSWQpXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICAvLyBMaXN0ZW4gZm9yIHN5bmMgcmVxdWVzdHMgZnJvbSBib29raW5nIG1vZGFsXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJib29raW5nLW1vZGFsOnJlcXVlc3Qtc3luY1wiLCAoKSA9PiB7XG4gICAgICBjb25zdCBzeW5jRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoXCJwYWNrYWdlOnNlbGVjdGVkXCIsIHtcbiAgICAgICAgZGV0YWlsOiB7IHBhY2thZ2VJZDogdGhpcy5zZWxlY3RlZElkVmFsdWUgfVxuICAgICAgfSlcbiAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KHN5bmNFdmVudClcbiAgICB9KVxuICB9XG5cbiAgc2VsZWN0UGFja2FnZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHBhY2thZ2VJZCA9IHBhcnNlSW50KGNhcmQuZGF0YXNldC5wYWNrYWdlSWQgfHwgXCIwXCIpXG4gICAgXG4gICAgaWYgKHBhY2thZ2VJZCA9PT0gdGhpcy5zZWxlY3RlZElkVmFsdWUpIHtcbiAgICAgIHJldHVybiAvLyBBbHJlYWR5IHNlbGVjdGVkXG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHNlbGVjdGVkIElEXG4gICAgdGhpcy5zZWxlY3RlZElkVmFsdWUgPSBwYWNrYWdlSWRcbiAgICB0aGlzLnVwZGF0ZVBhY2thZ2VVSShwYWNrYWdlSWQpXG4gICAgXG4gICAgLy8gTm90aWZ5IGJvb2tpbmcgbW9kYWxcbiAgICBjb25zdCBjdXN0b21FdmVudCA9IG5ldyBDdXN0b21FdmVudChcInBhY2thZ2U6c2VsZWN0ZWRcIiwge1xuICAgICAgZGV0YWlsOiB7IHBhY2thZ2VJZCB9XG4gICAgfSlcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChjdXN0b21FdmVudClcbiAgfVxuXG4gIHByaXZhdGUgc3luY1BhY2thZ2VTZWxlY3Rpb24ocGFja2FnZUlkOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLnNlbGVjdGVkSWRWYWx1ZSA9IHBhY2thZ2VJZFxuICAgIHRoaXMudXBkYXRlUGFja2FnZVVJKHBhY2thZ2VJZClcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlUGFja2FnZVVJKHBhY2thZ2VJZDogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gVXBkYXRlIGNhcmQgc3R5bGVzXG4gICAgdGhpcy5jYXJkVGFyZ2V0cy5mb3JFYWNoKGNhcmRFbCA9PiB7XG4gICAgICBjb25zdCBjYXJkUGFja2FnZUlkID0gcGFyc2VJbnQoY2FyZEVsLmRhdGFzZXQucGFja2FnZUlkIHx8IFwiMFwiKVxuICAgICAgXG4gICAgICBpZiAoY2FyZFBhY2thZ2VJZCA9PT0gcGFja2FnZUlkKSB7XG4gICAgICAgIC8vIFNlbGVjdGVkIHN0YXRlXG4gICAgICAgIGNhcmRFbC5jbGFzc0xpc3QucmVtb3ZlKCdiZy13aGl0ZScsICdib3JkZXItZ3JheS0xMDAnLCAnYm9yZGVyJylcbiAgICAgICAgY2FyZEVsLmNsYXNzTGlzdC5hZGQoJ2JnLVsjRkZGOUU2XScsICdib3JkZXItMicsICdib3JkZXItWyNGRkQ3MDBdJylcbiAgICAgICAgXG4gICAgICAgIC8vIFNob3cgY2hlY2ttYXJrLCBoaWRlIHNlbGVjdCB0ZXh0XG4gICAgICAgIGNvbnN0IGNoZWNrbWFyayA9IGNhcmRFbC5xdWVyeVNlbGVjdG9yKCdzdmdbdmlld0JveD1cIjAgMCAyMCAyMFwiXScpXG4gICAgICAgIGlmIChjaGVja21hcmspIHtcbiAgICAgICAgICBjaGVja21hcmsuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVW5zZWxlY3RlZCBzdGF0ZVxuICAgICAgICBjYXJkRWwuY2xhc3NMaXN0LnJlbW92ZSgnYmctWyNGRkY5RTZdJywgJ2JvcmRlci0yJywgJ2JvcmRlci1bI0ZGRDcwMF0nKVxuICAgICAgICBjYXJkRWwuY2xhc3NMaXN0LmFkZCgnYmctd2hpdGUnLCAnYm9yZGVyJywgJ2JvcmRlci1ncmF5LTEwMCcpXG4gICAgICAgIFxuICAgICAgICAvLyBIaWRlIGNoZWNrbWFya1xuICAgICAgICBjb25zdCBjaGVja21hcmsgPSBjYXJkRWwucXVlcnlTZWxlY3Rvcignc3ZnW3ZpZXdCb3g9XCIwIDAgMjAgMjBcIl0nKVxuICAgICAgICBpZiAoY2hlY2ttYXJrKSB7XG4gICAgICAgICAgY2hlY2ttYXJrLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gVXBkYXRlIGRldGFpbHMgc2VjdGlvblxuICAgIGNvbnN0IGRldGFpbHNDb250YWluZXIgPSB0aGlzLmRldGFpbHNUYXJnZXRcbiAgICBjb25zdCBhbGxEZXRhaWxzID0gZGV0YWlsc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1wYWNrYWdlLWlkXScpXG4gICAgXG4gICAgYWxsRGV0YWlscy5mb3JFYWNoKGRldGFpbCA9PiB7XG4gICAgICBjb25zdCBkZXRhaWxFbGVtZW50ID0gZGV0YWlsIGFzIEhUTUxFbGVtZW50XG4gICAgICBjb25zdCBkZXRhaWxQYWNrYWdlSWQgPSBwYXJzZUludChkZXRhaWxFbGVtZW50LmRhdGFzZXQucGFja2FnZUlkIHx8IFwiMFwiKVxuICAgICAgXG4gICAgICBpZiAoZGV0YWlsUGFja2FnZUlkID09PSBwYWNrYWdlSWQpIHtcbiAgICAgICAgZGV0YWlsRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGV0YWlsRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlciB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwibW9kYWxcIixcbiAgICBcInBhY2thZ2VCdG5cIixcbiAgICBcIm1vbnRoVGFiXCIsXG4gICAgXCJjYWxlbmRhclwiLFxuICAgIFwiZGF0ZUJ0blwiLFxuICAgIFwiYWR1bHRDb3VudFwiLFxuICAgIFwiY2hpbGRDb3VudFwiXG4gIF1cblxuICBkZWNsYXJlIHJlYWRvbmx5IG1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHBhY2thZ2VCdG5UYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgbW9udGhUYWJUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2FsZW5kYXJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGF0ZUJ0blRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBhZHVsdENvdW50VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNoaWxkQ291bnRUYXJnZXQ6IEhUTUxFbGVtZW50XG5cbiAgcHJpdmF0ZSBzZWxlY3RlZFBhY2thZ2VJZDogbnVtYmVyIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSBzZWxlY3RlZERhdGU6IHN0cmluZyB8IG51bGwgPSBudWxsXG4gIHByaXZhdGUgYWR1bHRRdWFudGl0eTogbnVtYmVyID0gMVxuICBwcml2YXRlIGNoaWxkUXVhbnRpdHk6IG51bWJlciA9IDBcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiQm9va2luZyBtb2RhbCBjb250cm9sbGVyIGNvbm5lY3RlZFwiKVxuICAgIFxuICAgIC8vIExpc3RlbiBmb3IgcGFja2FnZSBzZWxlY3Rpb24gY2hhbmdlcyBmcm9tIG91dHNpZGVcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhY2thZ2U6c2VsZWN0ZWRcIiwgKGV2ZW50OiBFdmVudCkgPT4ge1xuICAgICAgY29uc3QgY3VzdG9tRXZlbnQgPSBldmVudCBhcyBDdXN0b21FdmVudFxuICAgICAgY29uc3QgcGFja2FnZUlkID0gY3VzdG9tRXZlbnQuZGV0YWlsLnBhY2thZ2VJZFxuICAgICAgaWYgKHBhY2thZ2VJZCAmJiBwYWNrYWdlSWQgIT09IHRoaXMuc2VsZWN0ZWRQYWNrYWdlSWQpIHtcbiAgICAgICAgdGhpcy5zeW5jUGFja2FnZVNlbGVjdGlvbihwYWNrYWdlSWQpXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICAvLyBMaXN0ZW4gZm9yIGJvdHRvbSBiYXIgbW9kYWwgb3BlbiByZXF1ZXN0c1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiYm90dG9tLWJhcjpvcGVuLW1vZGFsXCIsICgpID0+IHtcbiAgICAgIHRoaXMub3BlbigpXG4gICAgfSlcbiAgfVxuXG4gIG9wZW4oKTogdm9pZCB7XG4gICAgLy8gU3luYyB3aXRoIGN1cnJlbnQgZXh0ZXJuYWwgc2VsZWN0aW9uIHdoZW4gb3BlbmluZ1xuICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFwiYm9va2luZy1tb2RhbDpyZXF1ZXN0LXN5bmNcIilcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudClcbiAgICBcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIlxuICB9XG5cbiAgY2xvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiXCJcbiAgfVxuXG4gIHNlbGVjdFBhY2thZ2UoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnRuID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHBhY2thZ2VJZCA9IHBhcnNlSW50KGJ0bi5kYXRhc2V0LnBhY2thZ2VJZCB8fCBcIjBcIilcbiAgICBcbiAgICB0aGlzLnNlbGVjdGVkUGFja2FnZUlkID0gcGFja2FnZUlkXG4gICAgdGhpcy51cGRhdGVQYWNrYWdlQnV0dG9ucyhwYWNrYWdlSWQpXG4gICAgXG4gICAgLy8gTm90aWZ5IGV4dGVybmFsIHBhY2thZ2Ugc3dpdGNoZXJcbiAgICBjb25zdCBjdXN0b21FdmVudCA9IG5ldyBDdXN0b21FdmVudChcImJvb2tpbmctbW9kYWw6cGFja2FnZS1jaGFuZ2VkXCIsIHtcbiAgICAgIGRldGFpbDogeyBwYWNrYWdlSWQgfVxuICAgIH0pXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoY3VzdG9tRXZlbnQpXG4gIH1cblxuICBwcml2YXRlIHN5bmNQYWNrYWdlU2VsZWN0aW9uKHBhY2thZ2VJZDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5zZWxlY3RlZFBhY2thZ2VJZCA9IHBhY2thZ2VJZFxuICAgIHRoaXMudXBkYXRlUGFja2FnZUJ1dHRvbnMocGFja2FnZUlkKVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVQYWNrYWdlQnV0dG9ucyhwYWNrYWdlSWQ6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIFVwZGF0ZSBidXR0b24gc3R5bGVzXG4gICAgdGhpcy5wYWNrYWdlQnRuVGFyZ2V0cy5mb3JFYWNoKGJ0bkVsID0+IHtcbiAgICAgIGNvbnN0IGJ0blBhY2thZ2VJZCA9IHBhcnNlSW50KGJ0bkVsLmRhdGFzZXQucGFja2FnZUlkIHx8IFwiMFwiKVxuICAgICAgXG4gICAgICBpZiAoYnRuUGFja2FnZUlkID09PSBwYWNrYWdlSWQpIHtcbiAgICAgICAgYnRuRWwuY2xhc3NMaXN0LnJlbW92ZShcImJnLXdoaXRlXCIsIFwiYm9yZGVyLWdyYXktMjAwXCIpXG4gICAgICAgIGJ0bkVsLmNsYXNzTGlzdC5hZGQoXCJiZy1bI0ZGRjlFNl1cIiwgXCJib3JkZXItWyNGRkQ3MDBdXCIpXG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgY2hlY2ttYXJrIGlmIG5vdCBleGlzdHNcbiAgICAgICAgaWYgKCFidG5FbC5xdWVyeVNlbGVjdG9yKFwic3ZnXCIpKSB7XG4gICAgICAgICAgY29uc3QgY2hlY2ttYXJrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJzdmdcIilcbiAgICAgICAgICBjaGVja21hcmsuY2xhc3NMaXN0LmFkZChcImFic29sdXRlXCIsIFwidG9wLTJcIiwgXCJyaWdodC0yXCIsIFwidy01XCIsIFwiaC01XCIpXG4gICAgICAgICAgY2hlY2ttYXJrLnN0eWxlLmNvbG9yID0gXCIjRkZENzAwXCJcbiAgICAgICAgICBjaGVja21hcmsuc2V0QXR0cmlidXRlKFwiZmlsbFwiLCBcImN1cnJlbnRDb2xvclwiKVxuICAgICAgICAgIGNoZWNrbWFyay5zZXRBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIsIFwiMCAwIDIwIDIwXCIpXG4gICAgICAgICAgY29uc3QgcGF0aEQgPSAnTTEwIDE4YTggOCAwIDEwMC0xNiA4IDggMCAwMDAgMTZ6bTMuNzA3LTkuMjkzYTEgMSAwIDAwLTEuNDE0LTEuNDE0TDkgMTAuNTg2IDcuNzA3IDkuMjkzYTEgMSAwIDAwLTEuNDE0IDEuNDE0bDIgMmExIDEgMCAwMDEuNDE0IDBsNC00eidcbiAgICAgICAgICBjaGVja21hcmsuaW5uZXJIVE1MID0gYDxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiBkPVwiJHtwYXRoRH1cIiBjbGlwLXJ1bGU9XCJldmVub2RkXCI+PC9wYXRoPmBcbiAgICAgICAgICBidG5FbC5hcHBlbmRDaGlsZChjaGVja21hcmspXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJ0bkVsLmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI0ZGRjlFNl1cIiwgXCJib3JkZXItWyNGRkQ3MDBdXCIpXG4gICAgICAgIGJ0bkVsLmNsYXNzTGlzdC5hZGQoXCJiZy13aGl0ZVwiLCBcImJvcmRlci1ncmF5LTIwMFwiKVxuICAgICAgICBcbiAgICAgICAgLy8gUmVtb3ZlIGNoZWNrbWFya1xuICAgICAgICBjb25zdCBjaGVja21hcmsgPSBidG5FbC5xdWVyeVNlbGVjdG9yKFwic3ZnXCIpXG4gICAgICAgIGlmIChjaGVja21hcmspIHtcbiAgICAgICAgICBjaGVja21hcmsucmVtb3ZlKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBzZWxlY3RNb250aChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidG4gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgbW9udGggPSBidG4uZGF0YXNldC5tb250aFxuXG4gICAgLy8gVXBkYXRlIHRhYiBzdHlsZXNcbiAgICB0aGlzLm1vbnRoVGFiVGFyZ2V0cy5mb3JFYWNoKHRhYkVsID0+IHtcbiAgICAgIGlmICh0YWJFbC5kYXRhc2V0Lm1vbnRoID09PSBtb250aCkge1xuICAgICAgICB0YWJFbC5jbGFzc0xpc3QucmVtb3ZlKFwidGV4dC1mb3JlZ3JvdW5kLW11dGVkXCIpXG4gICAgICAgIHRhYkVsLmNsYXNzTGlzdC5hZGQoXCJ0ZXh0LXJlZC01MDBcIiwgXCJib3JkZXItYi0yXCIsIFwiYm9yZGVyLXJlZC01MDBcIilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhYkVsLmNsYXNzTGlzdC5yZW1vdmUoXCJ0ZXh0LXJlZC01MDBcIiwgXCJib3JkZXItYi0yXCIsIFwiYm9yZGVyLXJlZC01MDBcIilcbiAgICAgICAgdGFiRWwuY2xhc3NMaXN0LmFkZChcInRleHQtZm9yZWdyb3VuZC1tdXRlZFwiKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBUT0RPOiBVcGRhdGUgY2FsZW5kYXIgZGlzcGxheSBmb3Igc2VsZWN0ZWQgbW9udGhcbiAgfVxuXG4gIHNlbGVjdERhdGUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnRuID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGNvbnN0IGRhdGUgPSBidG4uZGF0YXNldC5kYXRlXG5cbiAgICBpZiAoIWRhdGUgfHwgYnRuLmRpc2FibGVkKSByZXR1cm5cblxuICAgIHRoaXMuc2VsZWN0ZWREYXRlID0gZGF0ZVxuXG4gICAgLy8gVXBkYXRlIGRhdGUgYnV0dG9uIHN0eWxlc1xuICAgIHRoaXMuZGF0ZUJ0blRhcmdldHMuZm9yRWFjaChkYXRlQnRuID0+IHtcbiAgICAgIGlmIChkYXRlQnRuLmRhdGFzZXQuZGF0ZSA9PT0gZGF0ZSkge1xuICAgICAgICBkYXRlQnRuLnN0eWxlLmJhY2tncm91bmQgPSBcIiNGRkQ3MDBcIlxuICAgICAgICBkYXRlQnRuLnN0eWxlLmNvbG9yID0gXCIjMDAwXCJcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGVCdG4uc3R5bGUuYmFja2dyb3VuZCA9IFwiXCJcbiAgICAgICAgZGF0ZUJ0bi5zdHlsZS5jb2xvciA9IFwiXCJcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgaW5jcmVhc2VBZHVsdCgpOiB2b2lkIHtcbiAgICB0aGlzLmFkdWx0UXVhbnRpdHkrK1xuICAgIHRoaXMuYWR1bHRDb3VudFRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMuYWR1bHRRdWFudGl0eS50b1N0cmluZygpXG4gIH1cblxuICBkZWNyZWFzZUFkdWx0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmFkdWx0UXVhbnRpdHkgPiAxKSB7XG4gICAgICB0aGlzLmFkdWx0UXVhbnRpdHktLVxuICAgICAgdGhpcy5hZHVsdENvdW50VGFyZ2V0LnRleHRDb250ZW50ID0gdGhpcy5hZHVsdFF1YW50aXR5LnRvU3RyaW5nKClcbiAgICB9XG4gIH1cblxuICBpbmNyZWFzZUNoaWxkKCk6IHZvaWQge1xuICAgIHRoaXMuY2hpbGRRdWFudGl0eSsrXG4gICAgdGhpcy5jaGlsZENvdW50VGFyZ2V0LnRleHRDb250ZW50ID0gdGhpcy5jaGlsZFF1YW50aXR5LnRvU3RyaW5nKClcbiAgfVxuXG4gIGRlY3JlYXNlQ2hpbGQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY2hpbGRRdWFudGl0eSA+IDApIHtcbiAgICAgIHRoaXMuY2hpbGRRdWFudGl0eS0tXG4gICAgICB0aGlzLmNoaWxkQ291bnRUYXJnZXQudGV4dENvbnRlbnQgPSB0aGlzLmNoaWxkUXVhbnRpdHkudG9TdHJpbmcoKVxuICAgIH1cbiAgfVxuXG4gIGFkZFRvQ2FydCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMudmFsaWRhdGVTZWxlY3Rpb24oKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXCJBZGRpbmcgdG8gY2FydDpcIiwge1xuICAgICAgcGFja2FnZUlkOiB0aGlzLnNlbGVjdGVkUGFja2FnZUlkLFxuICAgICAgZGF0ZTogdGhpcy5zZWxlY3RlZERhdGUsXG4gICAgICBhZHVsdHM6IHRoaXMuYWR1bHRRdWFudGl0eSxcbiAgICAgIGNoaWxkcmVuOiB0aGlzLmNoaWxkUXVhbnRpdHlcbiAgICB9KVxuXG4gICAgYWxlcnQoXCJcdTVERjJcdTUyQTBcdTUxNjVcdThEMkRcdTcyNjlcdThGNjZcIilcbiAgICB0aGlzLmNsb3NlKClcbiAgfVxuXG4gIGJ1eU5vdygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMudmFsaWRhdGVTZWxlY3Rpb24oKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU5ODc1XHU5NzYyXHU3Njg0IHByb2R1Y3RfaWRcdUZGMDhcdTRFQ0UgVVJMIFx1NEUyRFx1ODNCN1x1NTNENlx1RkYwOVxuICAgIGNvbnN0IHByb2R1Y3RJZCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5zcGxpdCgnLycpLnBvcCgpXG4gICAgXG4gICAgLy8gXHU2Nzg0XHU1RUZBXHU4QkEyXHU1MzU1XHU5ODc1XHU5NzYyIFVSTFxuICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgcHJvZHVjdF9pZDogcHJvZHVjdElkIHx8ICcnLFxuICAgICAgcGFja2FnZV9pZDogKHRoaXMuc2VsZWN0ZWRQYWNrYWdlSWQgfHwgJycpLnRvU3RyaW5nKCksXG4gICAgICB0cmF2ZWxfZGF0ZTogdGhpcy5zZWxlY3RlZERhdGUgfHwgJycsXG4gICAgICBhZHVsdF9jb3VudDogdGhpcy5hZHVsdFF1YW50aXR5LnRvU3RyaW5nKCksXG4gICAgICBjaGlsZF9jb3VudDogdGhpcy5jaGlsZFF1YW50aXR5LnRvU3RyaW5nKClcbiAgICB9KVxuICAgIFxuICAgIC8vIFx1OERGM1x1OEY2Q1x1NTIzMFx1OEJBMlx1NTM1NVx1OTg3NVx1OTc2MlxuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYC90b3VyX2dyb3VwX2Jvb2tpbmdzL25ldz8ke3BhcmFtcy50b1N0cmluZygpfWBcbiAgfVxuXG4gIHByaXZhdGUgdmFsaWRhdGVTZWxlY3Rpb24oKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLnNlbGVjdGVkRGF0ZSkge1xuICAgICAgYWxlcnQoXCJcdThCRjdcdTkwMDlcdTYyRTlcdTUxRkFcdTg4NENcdTY1RTVcdTY3MUZcIilcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGlmICh0aGlzLmFkdWx0UXVhbnRpdHkgPCAxKSB7XG4gICAgICBhbGVydChcIlx1ODFGM1x1NUMxMVx1OTcwMFx1ODk4MTFcdTRGNERcdTYyMTBcdTRFQkFcIilcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlciB7XG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJCb3R0b20gYmFyIGNvbnRyb2xsZXIgY29ubmVjdGVkXCIpXG4gIH1cblxuICBvcGVuTW9kYWwoKTogdm9pZCB7XG4gICAgLy8gVHJpZ2dlciBtb2RhbCBvcGVuIHZpYSBDdXN0b21FdmVudFxuICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFwiYm90dG9tLWJhcjpvcGVuLW1vZGFsXCIpXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcInJhZGlvXCIsIFwidG90YWxQcmljZVwiXVxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIGJhc2VQcmljZTogTnVtYmVyLFxuICAgIGFkdWx0Q291bnQ6IE51bWJlcixcbiAgICBjaGlsZENvdW50OiBOdW1iZXJcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgcmFkaW9UYXJnZXRzOiBIVE1MSW5wdXRFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSB0b3RhbFByaWNlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGJhc2VQcmljZVZhbHVlOiBudW1iZXJcbiAgZGVjbGFyZSByZWFkb25seSBhZHVsdENvdW50VmFsdWU6IG51bWJlclxuICBkZWNsYXJlIHJlYWRvbmx5IGNoaWxkQ291bnRWYWx1ZTogbnVtYmVyXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkluc3VyYW5jZVNlbGVjdG9yIGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkluc3VyYW5jZVNlbGVjdG9yIGRpc2Nvbm5lY3RlZFwiKVxuICB9XG5cbiAgdXBkYXRlUHJpY2UoKTogdm9pZCB7XG4gICAgY29uc3Qgc2VsZWN0ZWRSYWRpbyA9IHRoaXMucmFkaW9UYXJnZXRzLmZpbmQoKHJhZGlvKSA9PiByYWRpby5jaGVja2VkKVxuICAgIGlmICghc2VsZWN0ZWRSYWRpbykgcmV0dXJuXG5cbiAgICBjb25zdCBpbnN1cmFuY2VUeXBlID0gc2VsZWN0ZWRSYWRpby52YWx1ZVxuICAgIGNvbnN0IHRvdGFsUGVvcGxlID0gdGhpcy5hZHVsdENvdW50VmFsdWUgKyB0aGlzLmNoaWxkQ291bnRWYWx1ZVxuICAgIGxldCBpbnN1cmFuY2VQcmljZSA9IDBcblxuICAgIGlmIChpbnN1cmFuY2VUeXBlID09PSBcInN0YW5kYXJkXCIpIHtcbiAgICAgIGluc3VyYW5jZVByaWNlID0gMTUgKiB0b3RhbFBlb3BsZVxuICAgIH0gZWxzZSBpZiAoaW5zdXJhbmNlVHlwZSA9PT0gXCJwcmVtaXVtXCIpIHtcbiAgICAgIGluc3VyYW5jZVByaWNlID0gMzUgKiB0b3RhbFBlb3BsZVxuICAgIH1cblxuICAgIGNvbnN0IHRvdGFsUHJpY2UgPSB0aGlzLmJhc2VQcmljZVZhbHVlICsgaW5zdXJhbmNlUHJpY2VcbiAgICB0aGlzLnRvdGFsUHJpY2VUYXJnZXQudGV4dENvbnRlbnQgPSBgXHUwMEE1JHtNYXRoLnJvdW5kKHRvdGFsUHJpY2UpfWBcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwibW9kYWxcIixcbiAgICBcInRyYXZlbGVyTmFtZUlucHV0XCIsXG4gICAgXCJ0cmF2ZWxlcklkSW5wdXRcIlxuICBdXG5cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBzZWxlY3RlZFBhc3NlbmdlcklkOiBTdHJpbmcsXG4gICAgc2VsZWN0ZWRQYXNzZW5nZXJOYW1lOiBTdHJpbmcsXG4gICAgc2VsZWN0ZWRQYXNzZW5nZXJJZE51bWJlcjogU3RyaW5nLFxuICAgIHRyYXZlbGVySW5kZXg6IE51bWJlclxuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0cmF2ZWxlck5hbWVJbnB1dFRhcmdldHM6IEhUTUxJbnB1dEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IHRyYXZlbGVySWRJbnB1dFRhcmdldHM6IEhUTUxJbnB1dEVsZW1lbnRbXVxuXG4gIGRlY2xhcmUgc2VsZWN0ZWRQYXNzZW5nZXJJZFZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBzZWxlY3RlZFBhc3Nlbmdlck5hbWVWYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgc2VsZWN0ZWRQYXNzZW5nZXJJZE51bWJlclZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSB0cmF2ZWxlckluZGV4VmFsdWU6IG51bWJlclxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJUb3VyVHJhdmVsZXJTZWxlY3RvciBjb25uZWN0ZWRcIilcbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJUb3VyVHJhdmVsZXJTZWxlY3RvciBkaXNjb25uZWN0ZWRcIilcbiAgfVxuXG4gIC8vIE9wZW4gbW9kYWwgZm9yIHNwZWNpZmljIHRyYXZlbGVyXG4gIG9wZW5Nb2RhbChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgdHJhdmVsZXJJbmRleCA9IHBhcnNlSW50KHRhcmdldC5kYXRhc2V0LnRyYXZlbGVySW5kZXggfHwgJzAnKVxuICAgIFxuICAgIGNvbnNvbGUubG9nKFwiT3BlbmluZyB0cmF2ZWxlciBzZWxlY3RvciBtb2RhbCBmb3IgaW5kZXg6XCIsIHRyYXZlbGVySW5kZXgpXG4gICAgXG4gICAgdGhpcy50cmF2ZWxlckluZGV4VmFsdWUgPSB0cmF2ZWxlckluZGV4XG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJ1xuICB9XG5cbiAgLy8gQ2xvc2UgbW9kYWxcbiAgY2xvc2VNb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICcnXG4gIH1cblxuICAvLyBTZWxlY3QgYSBwYXNzZW5nZXIgZnJvbSB0aGUgbGlzdFxuICBzZWxlY3RQYXNzZW5nZXIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHBhc3NlbmdlcklkID0gdGFyZ2V0LmRhdGFzZXQucGFzc2VuZ2VySWQgfHwgJydcbiAgICBjb25zdCBwYXNzZW5nZXJOYW1lID0gdGFyZ2V0LmRhdGFzZXQucGFzc2VuZ2VyTmFtZSB8fCAnJ1xuICAgIGNvbnN0IHBhc3NlbmdlcklkTnVtYmVyID0gdGFyZ2V0LmRhdGFzZXQucGFzc2VuZ2VySWROdW1iZXIgfHwgJydcblxuICAgIGNvbnNvbGUubG9nKFwiU2VsZWN0ZWQgcGFzc2VuZ2VyOlwiLCB7IHBhc3NlbmdlcklkLCBwYXNzZW5nZXJOYW1lLCBwYXNzZW5nZXJJZE51bWJlciwgdHJhdmVsZXJJbmRleDogdGhpcy50cmF2ZWxlckluZGV4VmFsdWUgfSlcblxuICAgIC8vIFN0b3JlIHNlbGVjdGVkIHZhbHVlc1xuICAgIHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJJZFZhbHVlID0gcGFzc2VuZ2VySWRcbiAgICB0aGlzLnNlbGVjdGVkUGFzc2VuZ2VyTmFtZVZhbHVlID0gcGFzc2VuZ2VyTmFtZVxuICAgIHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJJZE51bWJlclZhbHVlID0gcGFzc2VuZ2VySWROdW1iZXJcblxuICAgIC8vIFVwZGF0ZSBmb3JtIGlucHV0cyBmb3Igc3BlY2lmaWMgdHJhdmVsZXJcbiAgICBpZiAodGhpcy50cmF2ZWxlck5hbWVJbnB1dFRhcmdldHNbdGhpcy50cmF2ZWxlckluZGV4VmFsdWVdKSB7XG4gICAgICB0aGlzLnRyYXZlbGVyTmFtZUlucHV0VGFyZ2V0c1t0aGlzLnRyYXZlbGVySW5kZXhWYWx1ZV0udmFsdWUgPSBwYXNzZW5nZXJOYW1lXG4gICAgfVxuICAgIGlmICh0aGlzLnRyYXZlbGVySWRJbnB1dFRhcmdldHNbdGhpcy50cmF2ZWxlckluZGV4VmFsdWVdKSB7XG4gICAgICB0aGlzLnRyYXZlbGVySWRJbnB1dFRhcmdldHNbdGhpcy50cmF2ZWxlckluZGV4VmFsdWVdLnZhbHVlID0gcGFzc2VuZ2VySWROdW1iZXJcbiAgICB9XG5cbiAgICAvLyBDbG9zZSBtb2RhbFxuICAgIHRoaXMuY2xvc2VNb2RhbCgpXG4gIH1cblxuICAvLyBTdG9wIHByb3BhZ2F0aW9uIGZvciBpbm5lciBjbGlja3NcbiAgc3RvcFByb3BhZ2F0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRm9ybUVsZW1lbnQ+IHtcbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlNwZWNpYWxGbGlnaHRzRm9ybSBjb250cm9sbGVyIGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgaGFuZGxlU3VibWl0KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBcbiAgICBjb25zdCBmb3JtID0gdGhpcy5lbGVtZW50IGFzIEhUTUxGb3JtRWxlbWVudFxuICAgIFxuICAgIC8vIEdldCBmb3JtIGRhdGFcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShmb3JtKVxuICAgIGNvbnN0IGRlc3RpbmF0aW9uQ2l0aWVzID0gZm9ybURhdGEuZ2V0KCdkZXN0aW5hdGlvbl9jaXRpZXMnKSBhcyBzdHJpbmdcbiAgICBjb25zdCBkZXBhcnR1cmVDaXR5ID0gZm9ybURhdGEuZ2V0KCdkZXBhcnR1cmVfY2l0eScpIGFzIHN0cmluZ1xuICAgIGNvbnN0IGRhdGUgPSBmb3JtRGF0YS5nZXQoJ2RhdGUnKSBhcyBzdHJpbmdcbiAgICBjb25zdCBzb3J0QnkgPSBmb3JtRGF0YS5nZXQoJ3NvcnRfYnknKSBhcyBzdHJpbmdcbiAgICBjb25zdCB0cmlwVHlwZSA9IGZvcm1EYXRhLmdldCgndHJpcF90eXBlJykgYXMgc3RyaW5nXG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgbXVsdGlwbGUgY2l0aWVzIGFyZSBzZWxlY3RlZFxuICAgIGNvbnN0IGNpdGllcyA9IGRlc3RpbmF0aW9uQ2l0aWVzLnNwbGl0KCcsJykubWFwKGNpdHkgPT4gY2l0eS50cmltKCkpLmZpbHRlcihjaXR5ID0+IGNpdHkgIT09ICcnKVxuICAgIGNvbnN0IGlzTXVsdGlDaXR5ID0gY2l0aWVzLmxlbmd0aCA+IDFcbiAgICBcbiAgICAvLyBCdWlsZCBVUkwgYmFzZWQgb24gZGVzdGluYXRpb24gY291bnRcbiAgICBsZXQgdXJsOiBzdHJpbmdcbiAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKClcbiAgICBcbiAgICBpZiAoaXNNdWx0aUNpdHkpIHtcbiAgICAgIC8vIE11bHRpcGxlIGNpdGllcyAtPiAvZmxpZ2h0cy9jb21iaW5hdGlvbnNcbiAgICAgIHVybCA9ICcvZmxpZ2h0cy9jb21iaW5hdGlvbnMnXG4gICAgICBwYXJhbXMuYXBwZW5kKCdkZXBhcnR1cmVfY2l0eScsIGRlcGFydHVyZUNpdHkpXG4gICAgICBwYXJhbXMuYXBwZW5kKCdkZXN0aW5hdGlvbl9jaXRpZXMnLCBkZXN0aW5hdGlvbkNpdGllcylcbiAgICAgIHBhcmFtcy5hcHBlbmQoJ2RhdGUnLCBkYXRlKVxuICAgICAgcGFyYW1zLmFwcGVuZCgnc29ydF9ieScsIHNvcnRCeSlcbiAgICAgIHBhcmFtcy5hcHBlbmQoJ3RyaXBfdHlwZScsIHRyaXBUeXBlKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTaW5nbGUgY2l0eSAtPiAvZmxpZ2h0cy9zZWFyY2hcbiAgICAgIHVybCA9ICcvZmxpZ2h0cy9zZWFyY2gnXG4gICAgICBwYXJhbXMuYXBwZW5kKCdkZXBhcnR1cmVfY2l0eScsIGRlcGFydHVyZUNpdHkpXG4gICAgICBwYXJhbXMuYXBwZW5kKCdkZXN0aW5hdGlvbl9jaXR5JywgY2l0aWVzWzBdIHx8IGRlc3RpbmF0aW9uQ2l0aWVzKVxuICAgICAgcGFyYW1zLmFwcGVuZCgnZGF0ZScsIGRhdGUpXG4gICAgICBwYXJhbXMuYXBwZW5kKCdzb3J0X2J5Jywgc29ydEJ5KVxuICAgICAgcGFyYW1zLmFwcGVuZCgndHJpcF90eXBlJywgdHJpcFR5cGUpXG4gICAgfVxuICAgIFxuICAgIC8vIE5hdmlnYXRlIHRvIHRoZSBhcHByb3ByaWF0ZSBwYWdlXG4gICAgY29uc3QgZnVsbFVybCA9IGAke3VybH0/JHtwYXJhbXMudG9TdHJpbmcoKX1gXG4gICAgY29uc29sZS5sb2coJ1JlZGlyZWN0aW5nIHRvOicsIGZ1bGxVcmwpXG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBmdWxsVXJsXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcInRvdGFsUHJpY2VcIixcbiAgICBcInNlbGVjdGVkQ2FycmlhZ2VcIixcbiAgICBcImNhcnJpYWdlQnV0dG9uXCIsXG4gICAgXCJzZWF0QnV0dG9uXCIsXG4gICAgXCJzZWxlY3RlZFNlYXRDb3VudFwiXG4gIF1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHRvdGFsUHJpY2VUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VsZWN0ZWRDYXJyaWFnZVRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNhcnJpYWdlQnV0dG9uVGFyZ2V0czogSFRNTEJ1dHRvbkVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IHNlYXRCdXR0b25UYXJnZXRzOiBIVE1MQnV0dG9uRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VsZWN0ZWRTZWF0Q291bnRUYXJnZXQ6IEhUTUxFbGVtZW50XG5cbiAgcHJpdmF0ZSBiYXNlUHJpY2U6IG51bWJlciA9IDBcbiAgcHJpdmF0ZSBpbnN1cmFuY2VQcmljZTogbnVtYmVyID0gMFxuICBwcml2YXRlIGN1cnJlbnRDYXJyaWFnZTogc3RyaW5nID0gJydcbiAgcHJpdmF0ZSBzZWxlY3RlZFNlYXRzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKVxuICBwcml2YXRlIG1heFNlYXRzOiBudW1iZXIgPSAxXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICAvLyBHZXQgYmFzZSBwcmljZSBmcm9tIGhpZGRlbiBmaWVsZFxuICAgIGNvbnN0IHByaWNlRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9va2luZ190b3RhbF9wcmljZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBpZiAocHJpY2VGaWVsZCkge1xuICAgICAgdGhpcy5iYXNlUHJpY2UgPSBwYXJzZUZsb2F0KHByaWNlRmllbGQudmFsdWUgfHwgJzAnKVxuICAgIH1cbiAgICB0aGlzLnVwZGF0ZVRvdGFsUHJpY2UoKVxuICB9XG5cbiAgc2VsZWN0UGFzc2VuZ2VyKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHJhZGlvID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgcGFzc2VuZ2VyTmFtZSA9IHJhZGlvLmRhdGFzZXQucGFzc2VuZ2VyTmFtZSB8fCAnJ1xuICAgIGNvbnN0IGlkTnVtYmVyID0gcmFkaW8uZGF0YXNldC5pZE51bWJlciB8fCAnJ1xuICAgIGNvbnN0IHBob25lID0gcmFkaW8uZGF0YXNldC5waG9uZSB8fCAnJ1xuXG4gICAgLy8gVXBkYXRlIGhpZGRlbiBmaWVsZHNcbiAgICBjb25zdCBuYW1lRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9va2luZ19wYXNzZW5nZXJfbmFtZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBpZEZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jvb2tpbmdfcGFzc2VuZ2VyX2lkX251bWJlcicpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBwaG9uZUZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jvb2tpbmdfY29udGFjdF9waG9uZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcblxuICAgIGlmIChuYW1lRmllbGQpIG5hbWVGaWVsZC52YWx1ZSA9IHBhc3Nlbmdlck5hbWVcbiAgICBpZiAoaWRGaWVsZCkgaWRGaWVsZC52YWx1ZSA9IGlkTnVtYmVyXG4gICAgaWYgKHBob25lRmllbGQpIHBob25lRmllbGQudmFsdWUgPSBwaG9uZVxuICB9XG5cbiAgc2VsZWN0Q2FycmlhZ2UoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGNvbnN0IGNhcnJpYWdlID0gYnV0dG9uLmRhdGFzZXQuY2FycmlhZ2UgfHwgJydcblxuICAgIC8vIENoZWNrIGlmIGNsaWNraW5nIHRoZSBhbHJlYWR5IHNlbGVjdGVkIGNhcnJpYWdlICh0b2dnbGUgb2ZmKVxuICAgIGlmICh0aGlzLmN1cnJlbnRDYXJyaWFnZSA9PT0gY2FycmlhZ2UpIHtcbiAgICAgIC8vIERlc2VsZWN0IGN1cnJlbnQgY2FycmlhZ2VcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1vcmFuZ2UtNTAwJywgJ3RleHQtd2hpdGUnLCAnYm9yZGVyLW9yYW5nZS01MDAnKVxuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2JnLXdoaXRlJywgJ3RleHQtZ3JheS03MDAnLCAnYm9yZGVyLWdyYXktMzAwJylcbiAgICAgIHRoaXMuc2VsZWN0ZWRDYXJyaWFnZVRhcmdldC52YWx1ZSA9ICcnXG4gICAgICB0aGlzLmN1cnJlbnRDYXJyaWFnZSA9ICcnXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIERlc2VsZWN0IGFsbCBidXR0b25zIGZpcnN0XG4gICAgICB0aGlzLmNhcnJpYWdlQnV0dG9uVGFyZ2V0cy5mb3JFYWNoKGJ0biA9PiB7XG4gICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1vcmFuZ2UtNTAwJywgJ3RleHQtd2hpdGUnLCAnYm9yZGVyLW9yYW5nZS01MDAnKVxuICAgICAgICBidG4uY2xhc3NMaXN0LmFkZCgnYmctd2hpdGUnLCAndGV4dC1ncmF5LTcwMCcsICdib3JkZXItZ3JheS0zMDAnKVxuICAgICAgfSlcblxuICAgICAgLy8gU2VsZWN0IG5ldyBjYXJyaWFnZVxuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLXdoaXRlJywgJ3RleHQtZ3JheS03MDAnLCAnYm9yZGVyLWdyYXktMzAwJylcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdiZy1vcmFuZ2UtNTAwJywgJ3RleHQtd2hpdGUnLCAnYm9yZGVyLW9yYW5nZS01MDAnKVxuICAgICAgdGhpcy5zZWxlY3RlZENhcnJpYWdlVGFyZ2V0LnZhbHVlID0gY2FycmlhZ2VcbiAgICAgIHRoaXMuY3VycmVudENhcnJpYWdlID0gY2FycmlhZ2VcbiAgICB9XG4gIH1cblxuICBzZWxlY3RTZWF0KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBjb25zdCBzZWF0TGV0dGVyID0gYnV0dG9uLmRhdGFzZXQuc2VhdExldHRlciB8fCAnJ1xuXG4gICAgaWYgKCFzZWF0TGV0dGVyKSByZXR1cm5cblxuICAgIC8vIFRvZ2dsZSBzZWF0IHNlbGVjdGlvblxuICAgIGlmICh0aGlzLnNlbGVjdGVkU2VhdHMuaGFzKHNlYXRMZXR0ZXIpKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkU2VhdHMuZGVsZXRlKHNlYXRMZXR0ZXIpXG4gICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYmctb3JhbmdlLTUwMCcsICd0ZXh0LXdoaXRlJywgJ2JvcmRlci1vcmFuZ2UtNTAwJylcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdiZy13aGl0ZScsICd0ZXh0LWdyYXktNzAwJywgJ2JvcmRlci1ncmF5LTMwMCcpXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENoZWNrIGlmIG1heCBzZWF0cyByZWFjaGVkXG4gICAgICBpZiAodGhpcy5zZWxlY3RlZFNlYXRzLnNpemUgPj0gdGhpcy5tYXhTZWF0cykge1xuICAgICAgICB3aW5kb3cuc2hvd1RvYXN0KGBcdTY3MDBcdTU5MUFcdTUzRUFcdTgwRkRcdTkwMDlcdTYyRTkke3RoaXMubWF4U2VhdHN9XHU0RTJBXHU1RUE3XHU0RjREYClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICB0aGlzLnNlbGVjdGVkU2VhdHMuYWRkKHNlYXRMZXR0ZXIpXG4gICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYmctd2hpdGUnLCAndGV4dC1ncmF5LTcwMCcsICdib3JkZXItZ3JheS0zMDAnLCAnYmctZ3JheS0xMDAnLCAndGV4dC1ncmF5LTQwMCcpXG4gICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYmctb3JhbmdlLTUwMCcsICd0ZXh0LXdoaXRlJywgJ2JvcmRlci1vcmFuZ2UtNTAwJylcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgc2VsZWN0ZWQgY291bnQgZGlzcGxheVxuICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRTZWF0Q291bnQoKVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVTZWxlY3RlZFNlYXRDb3VudCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zZWxlY3RlZFNlYXRDb3VudFRhcmdldCkge1xuICAgICAgdGhpcy5zZWxlY3RlZFNlYXRDb3VudFRhcmdldC50ZXh0Q29udGVudCA9IGAke3RoaXMuc2VsZWN0ZWRTZWF0cy5zaXplfS8ke3RoaXMubWF4U2VhdHN9YFxuICAgIH1cbiAgfVxuXG4gIHRvZ2dsZU5lYXJEb29yKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNoZWNrYm94ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgLy8gVGhpcyBpcyBqdXN0IGZvciBVSSBpbnRlcmFjdGlvblxuICAgIC8vIFJlYWwgaW1wbGVtZW50YXRpb24gd291bGQgYWRkIFx1MDBBNTEyIHRvIHRoZSBwcmljZVxuICAgIGlmIChjaGVja2JveC5jaGVja2VkKSB7XG4gICAgICBjb25zb2xlLmxvZygnTmVhciBkb29yIG9wdGlvbiBzZWxlY3RlZCcpXG4gICAgfVxuICB9XG5cbiAgaGFuZGxlTm9ybWFsQm9va2luZygpOiB2b2lkIHtcbiAgICAvLyBWYWxpZGF0ZSBhbmQgc3VibWl0IHRoZSBmb3JtIGZvciBub3JtYWwgYm9va2luZ1xuICAgIGNvbnN0IGZvcm0gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignZm9ybScpIGFzIEhUTUxGb3JtRWxlbWVudFxuICAgIGlmICghZm9ybSkgcmV0dXJuXG5cbiAgICAvLyBWYWxpZGF0ZSBwYXNzZW5nZXIgc2VsZWN0aW9uXG4gICAgY29uc3QgcGFzc2VuZ2VyUmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwicGFzc2VuZ2VyXCJdOmNoZWNrZWQnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgaWYgKCFwYXNzZW5nZXJSYWRpbykge1xuICAgICAgd2luZG93LnNob3dUb2FzdCgnXHU4QkY3XHU5MDA5XHU2MkU5XHU0RTU4XHU4RjY2XHU0RUJBJylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIGNvbnRhY3QgcGhvbmVcbiAgICBjb25zdCBwaG9uZUZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jvb2tpbmdfY29udGFjdF9waG9uZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBpZiAoIXBob25lRmllbGQgfHwgIXBob25lRmllbGQudmFsdWUudHJpbSgpKSB7XG4gICAgICB3aW5kb3cuc2hvd1RvYXN0KCdcdThCRjdcdThGOTNcdTUxNjVcdTgwNTRcdTdDRkJcdTYyNEJcdTY3M0EnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gU2V0IGFjY2VwdF90ZXJtcyB0byAxIChcdTY2NkVcdTkwMUFcdTk4ODRcdThCQTJcdTgxRUFcdTUyQThcdTU0MENcdTYxMEZcdTUzNEZcdThCQUUpXG4gICAgY29uc3QgYWNjZXB0VGVybXNGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib29raW5nX2FjY2VwdF90ZXJtcycpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBpZiAoYWNjZXB0VGVybXNGaWVsZCkge1xuICAgICAgYWNjZXB0VGVybXNGaWVsZC52YWx1ZSA9ICcxJ1xuICAgIH1cblxuICAgIC8vIFVzZSBuYXRpdmUgc3VibWl0IHRvIGJ5cGFzcyBoYW5kbGVTdWJtaXQgZXZlbnQgbGlzdGVuZXJcbiAgICBIVE1MRm9ybUVsZW1lbnQucHJvdG90eXBlLnN1Ym1pdC5jYWxsKGZvcm0pXG4gIH1cblxuICBzZWxlY3RJbnN1cmFuY2VPcHRpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgcmFkaW8gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBpbnN1cmFuY2VUeXBlID0gcmFkaW8udmFsdWVcbiAgICBjb25zdCBpbnN1cmFuY2VQcmljZSA9IHBhcnNlRmxvYXQocmFkaW8uZGF0YXNldC5wcmljZSB8fCAnMCcpXG5cbiAgICBjb25zdCBpbnN1cmFuY2VUeXBlRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9va2luZ19pbnN1cmFuY2VfdHlwZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBpbnN1cmFuY2VQcmljZUZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jvb2tpbmdfaW5zdXJhbmNlX3ByaWNlJykgYXMgSFRNTElucHV0RWxlbWVudFxuXG4gICAgaWYgKGluc3VyYW5jZVR5cGVGaWVsZCkgaW5zdXJhbmNlVHlwZUZpZWxkLnZhbHVlID0gaW5zdXJhbmNlVHlwZVxuICAgIGlmIChpbnN1cmFuY2VQcmljZUZpZWxkKSBpbnN1cmFuY2VQcmljZUZpZWxkLnZhbHVlID0gaW5zdXJhbmNlUHJpY2UudG9TdHJpbmcoKVxuXG4gICAgdGhpcy5pbnN1cmFuY2VQcmljZSA9IGluc3VyYW5jZVByaWNlXG4gICAgdGhpcy51cGRhdGVUb3RhbFByaWNlKClcbiAgfVxuXG4gIGhhbmRsZVN1Ym1pdChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICAvLyBWYWxpZGF0ZSBwYXNzZW5nZXIgc2VsZWN0aW9uXG4gICAgY29uc3QgcGFzc2VuZ2VyUmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwicGFzc2VuZ2VyXCJdOmNoZWNrZWQnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgaWYgKCFwYXNzZW5nZXJSYWRpbykge1xuICAgICAgYWxlcnQoJ1x1OEJGN1x1OTAwOVx1NjJFOVx1NEU1OFx1OEY2Nlx1NEVCQScpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBWYWxpZGF0ZSBjb250YWN0IHBob25lXG4gICAgY29uc3QgcGhvbmVGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib29raW5nX2NvbnRhY3RfcGhvbmUnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgaWYgKCFwaG9uZUZpZWxkIHx8ICFwaG9uZUZpZWxkLnZhbHVlLnRyaW0oKSkge1xuICAgICAgYWxlcnQoJ1x1OEJGN1x1OEY5M1x1NTE2NVx1ODA1NFx1N0NGQlx1NjI0Qlx1NjczQScpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBDaGVjayB0ZXJtcyBhY2NlcHRhbmNlXG4gICAgY29uc3QgdmlzdWFsQ2hlY2tib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlzdWFsX2FjY2VwdF90ZXJtcycpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBpZiAoIXZpc3VhbENoZWNrYm94IHx8ICF2aXN1YWxDaGVja2JveC5jaGVja2VkKSB7XG4gICAgICB0aGlzLnNob3dUZXJtc01vZGFsKClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIENoZWNrIGluc3VyYW5jZSBzZWxlY3Rpb25cbiAgICBjb25zdCBpbnN1cmFuY2VUeXBlRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9va2luZ19pbnN1cmFuY2VfdHlwZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBpbnN1cmFuY2VUeXBlID0gaW5zdXJhbmNlVHlwZUZpZWxkPy52YWx1ZSB8fCAnbm9uZSdcblxuICAgIGlmIChpbnN1cmFuY2VUeXBlID09PSAnbm9uZScpIHtcbiAgICAgIHRoaXMuc2hvd0luc3VyYW5jZU1vZGFsKClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdWJtaXRCb29raW5nKClcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNob3dUZXJtc01vZGFsKCk6IHZvaWQge1xuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBtb2RhbC5jbGFzc05hbWUgPSAnZml4ZWQgaW5zZXQtMCBiZy1ibGFjayBiZy1vcGFjaXR5LTUwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHotNTAnXG4gICAgbW9kYWwuaW5uZXJIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cImJnLXdoaXRlIHJvdW5kZWQtbGcgcC02IG1heC13LW1kIG14LTRcIj5cbiAgICAgICAgPGgzIGNsYXNzPVwidGV4dC14bCBmb250LWJvbGQgbWItNFwiPlx1NzUyOFx1NjIzN1x1NTM0Rlx1OEJBRVx1NTQ4Q1x1OTY5MFx1NzlDMVx1NjUzRlx1N0I1NjwvaDM+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtYXgtaC02MCBvdmVyZmxvdy15LWF1dG8gbWItNCB0ZXh0LXNtIHRleHQtZ3JheS02MDBcIj5cbiAgICAgICAgICA8cCBjbGFzcz1cIm1iLTJcIj5cdTZCMjJcdThGQ0VcdTRGN0ZcdTc1MjhcdTYyMTFcdTRFRUNcdTc2ODRcdTY3MERcdTUyQTFcdTMwMDJcdThCRjdcdTRFRDRcdTdFQzZcdTk2MDVcdThCRkJcdTRFRTVcdTRFMEJcdTY3NjFcdTZCM0VcdUZGMUE8L3A+XG4gICAgICAgICAgPHAgY2xhc3M9XCJtYi0yXCI+MS4gXHU2NzBEXHU1MkExXHU2NzYxXHU2QjNFLi4uPC9wPlxuICAgICAgICAgIDxwIGNsYXNzPVwibWItMlwiPjIuIFx1OTY5MFx1NzlDMVx1NjUzRlx1N0I1Ni4uLjwvcD5cbiAgICAgICAgICA8cCBjbGFzcz1cIm1iLTJcIj4zLiBcdTkwMDBcdTY1MzlcdTg5QzRcdTUyMTkuLi48L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBzcGFjZS14LTNcIj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZmxleC0xIHB5LTMgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkXCIgZGF0YS1hY3Rpb249XCJkZWNsaW5lXCI+XG4gICAgICAgICAgICBcdTRFMERcdTU0MENcdTYxMEZcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZmxleC0xIHB5LTMgYmctb3JhbmdlLTUwMCB0ZXh0LXdoaXRlIHJvdW5kZWRcIiBkYXRhLWFjdGlvbj1cImFjY2VwdFwiPlxuICAgICAgICAgICAgXHU1NDBDXHU2MTBGXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYFxuXG4gICAgY29uc3QgZGVjbGluZUJ0biA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWFjdGlvbj1cImRlY2xpbmVcIl0nKVxuICAgIGNvbnN0IGFjY2VwdEJ0biA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWFjdGlvbj1cImFjY2VwdFwiXScpXG5cbiAgICBkZWNsaW5lQnRuPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobW9kYWwpXG4gICAgfSlcblxuICAgIGFjY2VwdEJ0bj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmFjY2VwdFRlcm1zKClcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobW9kYWwpXG4gICAgfSlcblxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobW9kYWwpXG4gIH1cblxuICBwcml2YXRlIGFjY2VwdFRlcm1zKCk6IHZvaWQge1xuICAgIGNvbnN0IHZpc3VhbENoZWNrYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Zpc3VhbF9hY2NlcHRfdGVybXMnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgaGlkZGVuRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9va2luZ19hY2NlcHRfdGVybXMnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgXG4gICAgaWYgKHZpc3VhbENoZWNrYm94KSB2aXN1YWxDaGVja2JveC5jaGVja2VkID0gdHJ1ZVxuICAgIGlmIChoaWRkZW5GaWVsZCkgaGlkZGVuRmllbGQudmFsdWUgPSAnMSdcblxuICAgIC8vIENoZWNrIGluc3VyYW5jZSBhZ2FpblxuICAgIGNvbnN0IGluc3VyYW5jZVR5cGVGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib29raW5nX2luc3VyYW5jZV90eXBlJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IGluc3VyYW5jZVR5cGUgPSBpbnN1cmFuY2VUeXBlRmllbGQ/LnZhbHVlIHx8ICdub25lJ1xuXG4gICAgaWYgKGluc3VyYW5jZVR5cGUgPT09ICdub25lJykge1xuICAgICAgdGhpcy5zaG93SW5zdXJhbmNlTW9kYWwoKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN1Ym1pdEJvb2tpbmcoKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2hvd0luc3VyYW5jZU1vZGFsKCk6IHZvaWQge1xuICAgIGNvbnN0IGV4aXN0aW5nTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zdXJhbmNlX3JlY29tbWVuZGF0aW9uX21vZGFsJylcbiAgICBpZiAoZXhpc3RpbmdNb2RhbCkge1xuICAgICAgZXhpc3RpbmdNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIG1vZGFsLmlkID0gJ2luc3VyYW5jZV9yZWNvbW1lbmRhdGlvbl9tb2RhbCdcbiAgICBtb2RhbC5jbGFzc05hbWUgPSAnZml4ZWQgaW5zZXQtMCBiZy1ibGFjayBiZy1vcGFjaXR5LTUwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHotNTAnXG4gICAgbW9kYWwuaW5uZXJIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cImJnLXdoaXRlIHJvdW5kZWQtbGcgcC02IG1heC13LW1kIG14LTRcIj5cbiAgICAgICAgPGgzIGNsYXNzPVwidGV4dC14bCBmb250LWJvbGQgbWItNFwiPlx1NUVGQVx1OEJBRVx1OEQyRFx1NEU3MFx1NEZERFx1OTY2OTwvaDM+XG4gICAgICAgIDxwIGNsYXNzPVwidGV4dC1ncmF5LTYwMCBtYi02XCI+XHU0RTNBXHU0RTg2XHU2MEE4XHU3Njg0XHU1MUZBXHU4ODRDXHU1Qjg5XHU1MTY4XHVGRjBDXHU1RUZBXHU4QkFFXHU4RDJEXHU0RTcwXHU1MUZBXHU4ODRDXHU0RkREXHU5NjY5PC9wPlxuICAgICAgICBcbiAgICAgICAgPGRpdiBjbGFzcz1cInNwYWNlLXktMyBtYi02XCI+XG4gICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHAtMyBib3JkZXIgcm91bmRlZCBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvbnQtbWVkaXVtXCI+XHU2ODA3XHU1MUM2XHU0RkREXHU5NjY5PC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj5cdTAwQTUzMDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cImluc3VyYW5jZV9tb2RhbFwiIHZhbHVlPVwic3RhbmRhcmRcIiBkYXRhLXByaWNlPVwiMzBcIiBjbGFzcz1cInctNSBoLTVcIiAvPlxuICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgXG4gICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHAtMyBib3JkZXIgcm91bmRlZCBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvbnQtbWVkaXVtXCI+XHU5QUQ4XHU3RUE3XHU0RkREXHU5NjY5PC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj5cdTAwQTU1MDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cImluc3VyYW5jZV9tb2RhbFwiIHZhbHVlPVwicHJlbWl1bVwiIGRhdGEtcHJpY2U9XCI1MFwiIGNsYXNzPVwidy01IGgtNVwiIC8+XG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIFxuICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBzcGFjZS14LTNcIj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZmxleC0xIHB5LTMgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkXCIgZGF0YS1hY3Rpb249XCJza2lwLWluc3VyYW5jZVwiPlxuICAgICAgICAgICAgXHU2NTNFXHU1RjAzXHU0RkREXHU5NjY5XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImZsZXgtMSBweS0zIGJnLW9yYW5nZS01MDAgdGV4dC13aGl0ZSByb3VuZGVkXCIgZGF0YS1hY3Rpb249XCJzZWxlY3QtaW5zdXJhbmNlXCI+XG4gICAgICAgICAgICBcdTc4NkVcdThCQTRcdTkwMDlcdTYyRTlcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgXG5cbiAgICBjb25zdCBza2lwQnRuID0gbW9kYWwucXVlcnlTZWxlY3RvcignW2RhdGEtYWN0aW9uPVwic2tpcC1pbnN1cmFuY2VcIl0nKVxuICAgIGNvbnN0IHNlbGVjdEJ0biA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWFjdGlvbj1cInNlbGVjdC1pbnN1cmFuY2VcIl0nKVxuXG4gICAgc2tpcEJ0bj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG1vZGFsKVxuICAgICAgdGhpcy5zdWJtaXRCb29raW5nKClcbiAgICB9KVxuXG4gICAgc2VsZWN0QnRuPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGNvbnN0IHNlbGVjdGVkUmFkaW8gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwiaW5zdXJhbmNlX21vZGFsXCJdOmNoZWNrZWQnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgICBpZiAoc2VsZWN0ZWRSYWRpbykge1xuICAgICAgICBjb25zdCBpbnN1cmFuY2VUeXBlID0gc2VsZWN0ZWRSYWRpby52YWx1ZVxuICAgICAgICBjb25zdCBpbnN1cmFuY2VQcmljZSA9IHBhcnNlRmxvYXQoc2VsZWN0ZWRSYWRpby5kYXRhc2V0LnByaWNlIHx8ICcwJylcblxuICAgICAgICBjb25zdCBpbnN1cmFuY2VUeXBlRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9va2luZ19pbnN1cmFuY2VfdHlwZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICAgICAgY29uc3QgaW5zdXJhbmNlUHJpY2VGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib29raW5nX2luc3VyYW5jZV9wcmljZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcblxuICAgICAgICBpZiAoaW5zdXJhbmNlVHlwZUZpZWxkKSBpbnN1cmFuY2VUeXBlRmllbGQudmFsdWUgPSBpbnN1cmFuY2VUeXBlXG4gICAgICAgIGlmIChpbnN1cmFuY2VQcmljZUZpZWxkKSBpbnN1cmFuY2VQcmljZUZpZWxkLnZhbHVlID0gaW5zdXJhbmNlUHJpY2UudG9TdHJpbmcoKVxuXG4gICAgICAgIHRoaXMuaW5zdXJhbmNlUHJpY2UgPSBpbnN1cmFuY2VQcmljZVxuICAgICAgICB0aGlzLnVwZGF0ZVRvdGFsUHJpY2UoKVxuICAgICAgfVxuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChtb2RhbClcbiAgICAgIHRoaXMuc3VibWl0Qm9va2luZygpXG4gICAgfSlcblxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobW9kYWwpXG4gIH1cblxuICBwcml2YXRlIHN1Ym1pdEJvb2tpbmcoKTogdm9pZCB7XG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIGNvbnN0IGZvcm0gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignZm9ybScpIGFzIEhUTUxGb3JtRWxlbWVudFxuICAgIGlmIChmb3JtKSB7XG4gICAgICBmb3JtLnN1Ym1pdCgpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVUb3RhbFByaWNlKCk6IHZvaWQge1xuICAgIGNvbnN0IHRvdGFsID0gdGhpcy5iYXNlUHJpY2UgKyB0aGlzLmluc3VyYW5jZVByaWNlXG4gICAgaWYgKHRoaXMudG90YWxQcmljZVRhcmdldCkge1xuICAgICAgdGhpcy50b3RhbFByaWNlVGFyZ2V0LnRleHRDb250ZW50ID0gYFx1MDBBNSR7TWF0aC5yb3VuZCh0b3RhbCl9YFxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwic3RhdHVzVGl0bGVcIixcbiAgICBcInN0YXR1c01lc3NhZ2VcIixcbiAgICBcInByb2dyZXNzUGVyY2VudFwiLFxuICAgIFwicHJvZ3Jlc3NDaXJjbGVcIixcbiAgICBcInNlYXRJY29uXCIsXG4gICAgXCJzZWF0RGlzcGxheVwiLFxuICAgIFwic2VhdEJhZGdlXCIsXG4gICAgXCJwYXltZW50QmFyXCIsXG4gICAgXCJjYW5jZWxCYXJcIlxuICBdXG5cbiAgZGVjbGFyZSByZWFkb25seSBzdGF0dXNUaXRsZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzdGF0dXNNZXNzYWdlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHByb2dyZXNzUGVyY2VudFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBwcm9ncmVzc0NpcmNsZVRhcmdldDogU1ZHQ2lyY2xlRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlYXRJY29uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlYXREaXNwbGF5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlYXRCYWRnZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBwYXltZW50QmFyVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNhbmNlbEJhclRhcmdldDogSFRNTEVsZW1lbnRcblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1N0YXR1c1RpdGxlVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzU3RhdHVzTWVzc2FnZVRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1Byb2dyZXNzUGVyY2VudFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1Byb2dyZXNzQ2lyY2xlVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzU2VhdEljb25UYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNTZWF0RGlzcGxheVRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1NlYXRCYWRnZVRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1BheW1lbnRCYXJUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNDYW5jZWxCYXJUYXJnZXQ6IGJvb2xlYW5cblxuICBwcml2YXRlIGxvY2tpbmdJbnRlcnZhbDogbnVtYmVyIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSBjdXJyZW50UHJvZ3Jlc3M6IG51bWJlciA9IDBcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIFN0YXJ0IHRoZSBsb2NraW5nIGFuaW1hdGlvblxuICAgIHRoaXMuc3RhcnRMb2NraW5nQW5pbWF0aW9uKClcbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubG9ja2luZ0ludGVydmFsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMubG9ja2luZ0ludGVydmFsKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc3RhcnRMb2NraW5nQW5pbWF0aW9uKCk6IHZvaWQge1xuICAgIGNvbnN0IHRvdGFsRHVyYXRpb24gPSA1MDAwIC8vIDUgc2Vjb25kc1xuICAgIGNvbnN0IHVwZGF0ZUludGVydmFsID0gNTAgLy8gVXBkYXRlIGV2ZXJ5IDUwbXNcbiAgICBjb25zdCB0b3RhbFN0ZXBzID0gdG90YWxEdXJhdGlvbiAvIHVwZGF0ZUludGVydmFsXG4gICAgY29uc3QgcHJvZ3Jlc3NTdGVwID0gMTAwIC8gdG90YWxTdGVwc1xuXG4gICAgdGhpcy5sb2NraW5nSW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgdGhpcy5jdXJyZW50UHJvZ3Jlc3MgKz0gcHJvZ3Jlc3NTdGVwXG5cbiAgICAgIGlmICh0aGlzLmN1cnJlbnRQcm9ncmVzcyA+PSAxMDApIHtcbiAgICAgICAgdGhpcy5jdXJyZW50UHJvZ3Jlc3MgPSAxMDBcbiAgICAgICAgdGhpcy5jb21wbGV0ZUxvY2tpbmcoKVxuICAgICAgICBpZiAodGhpcy5sb2NraW5nSW50ZXJ2YWwpIHtcbiAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMubG9ja2luZ0ludGVydmFsKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMudXBkYXRlUHJvZ3Jlc3ModGhpcy5jdXJyZW50UHJvZ3Jlc3MpXG4gICAgfSwgdXBkYXRlSW50ZXJ2YWwpXG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVByb2dyZXNzKHByb2dyZXNzOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBVcGRhdGUgcGVyY2VudGFnZSB0ZXh0XG4gICAgaWYgKHRoaXMuaGFzUHJvZ3Jlc3NQZXJjZW50VGFyZ2V0KSB7XG4gICAgICB0aGlzLnByb2dyZXNzUGVyY2VudFRhcmdldC50ZXh0Q29udGVudCA9IE1hdGguZmxvb3IocHJvZ3Jlc3MpLnRvU3RyaW5nKClcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgY2lyY3VsYXIgcHJvZ3Jlc3NcbiAgICBpZiAodGhpcy5oYXNQcm9ncmVzc0NpcmNsZVRhcmdldCkge1xuICAgICAgY29uc3QgY2lyY3VtZmVyZW5jZSA9IDUzNCAvLyAyICogUEkgKiA4NVxuICAgICAgY29uc3Qgb2Zmc2V0ID0gY2lyY3VtZmVyZW5jZSAtIChwcm9ncmVzcyAvIDEwMCkgKiBjaXJjdW1mZXJlbmNlXG4gICAgICB0aGlzLnByb2dyZXNzQ2lyY2xlVGFyZ2V0LnN0eWxlLnN0cm9rZURhc2hvZmZzZXQgPSBvZmZzZXQudG9TdHJpbmcoKVxuICAgIH1cblxuICAgIC8vIEFuaW1hdGUgc2VhdCBpY29uXG4gICAgaWYgKHRoaXMuaGFzU2VhdEljb25UYXJnZXQpIHtcbiAgICAgIC8vIFB1bHNlIGFuaW1hdGlvbiBhdCBjZXJ0YWluIHByb2dyZXNzIHBvaW50c1xuICAgICAgaWYgKHByb2dyZXNzICUgMjAgPCAyKSB7XG4gICAgICAgIHRoaXMuc2VhdEljb25UYXJnZXQuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDEuMiknXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLmhhc1NlYXRJY29uVGFyZ2V0KSB7XG4gICAgICAgICAgICB0aGlzLnNlYXRJY29uVGFyZ2V0LnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZSgxKSdcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDIwMClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNvbXBsZXRlTG9ja2luZygpOiB2b2lkIHtcbiAgICAvLyBVcGRhdGUgc3RhdHVzIHRpdGxlXG4gICAgaWYgKHRoaXMuaGFzU3RhdHVzVGl0bGVUYXJnZXQpIHtcbiAgICAgIHRoaXMuc3RhdHVzVGl0bGVUYXJnZXQudGV4dENvbnRlbnQgPSAnXHU1MzYwXHU1RUE3XHU2MjEwXHU1MjlGJ1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBzdGF0dXMgbWVzc2FnZSB3aXRoIGNvdW50ZG93blxuICAgIGlmICh0aGlzLmhhc1N0YXR1c01lc3NhZ2VUYXJnZXQpIHtcbiAgICAgIGNvbnN0IGV4cGlyeVRpbWUgPSBuZXcgRGF0ZSgpXG4gICAgICBleHBpcnlUaW1lLnNldE1pbnV0ZXMoZXhwaXJ5VGltZS5nZXRNaW51dGVzKCkgKyAxNSlcbiAgICAgIGNvbnN0IGhvdXJzID0gZXhwaXJ5VGltZS5nZXRIb3VycygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKVxuICAgICAgY29uc3QgbWludXRlcyA9IGV4cGlyeVRpbWUuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKVxuICAgICAgY29uc3QgdGltZVN0cmluZyA9IGAke2hvdXJzfToke21pbnV0ZXN9YFxuICAgICAgdGhpcy5zdGF0dXNNZXNzYWdlVGFyZ2V0LmlubmVySFRNTCA9IGBcdThCRjdcdTU3Mjg8c3BhbiBjbGFzcz1cInRleHQtcmVkLTYwMFwiPiR7dGltZVN0cmluZ308L3NwYW4+XHU1MTg1XHU1QjhDXHU2MjEwXHU2NTJGXHU0RUQ4XHVGRjBDXHU4RDg1XHU2NUY2XHU4QkEyXHU1MzU1XHU1QzA2XHU1MTczXHU5NUVEYFxuICAgIH1cblxuICAgIC8vIFNob3cgc2VhdCBpbmZvcm1hdGlvblxuICAgIGlmICh0aGlzLmhhc1NlYXREaXNwbGF5VGFyZ2V0KSB7XG4gICAgICB0aGlzLnNlYXREaXNwbGF5VGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJ1xuICAgIH1cblxuICAgIGlmICh0aGlzLmhhc1NlYXRCYWRnZVRhcmdldCkge1xuICAgICAgdGhpcy5zZWF0QmFkZ2VUYXJnZXQuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snXG4gICAgfVxuXG4gICAgLy8gQ2hhbmdlIHNlYXQgaWNvbiB0byBpbmRpY2F0ZSBzdWNjZXNzXG4gICAgaWYgKHRoaXMuaGFzU2VhdEljb25UYXJnZXQpIHtcbiAgICAgIHRoaXMuc2VhdEljb25UYXJnZXQudGV4dENvbnRlbnQgPSAnXHVEODNFXHVERTkxJ1xuICAgICAgdGhpcy5zZWF0SWNvblRhcmdldC5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGUoMS4zKSdcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5oYXNTZWF0SWNvblRhcmdldCkge1xuICAgICAgICAgIHRoaXMuc2VhdEljb25UYXJnZXQuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDEpJ1xuICAgICAgICB9XG4gICAgICB9LCAzMDApXG4gICAgfVxuXG4gICAgLy8gSGlkZSBjYW5jZWwgYnV0dG9uLCBzaG93IHBheW1lbnQgYnV0dG9uXG4gICAgaWYgKHRoaXMuaGFzQ2FuY2VsQmFyVGFyZ2V0KSB7XG4gICAgICB0aGlzLmNhbmNlbEJhclRhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaGFzUGF5bWVudEJhclRhcmdldCkge1xuICAgICAgdGhpcy5wYXltZW50QmFyVGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJzZWF0VGFiXCIsIFwib3B0aW9uc0NvbnRhaW5lclwiXVxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIHRyYWluSWQ6IFN0cmluZyxcbiAgICBzZWxlY3RlZFNlYXRUeXBlOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCJzZWNvbmRfY2xhc3NcIiB9XG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHNlYXRUYWJUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgb3B0aW9uc0NvbnRhaW5lclRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0cmFpbklkVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHNlbGVjdGVkU2VhdFR5cGVWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlRyYWluU2VhdFNlbGVjdG9yIGNvbm5lY3RlZFwiKVxuICAgIC8vIFx1OUVEOFx1OEJBNFx1OTAwOVx1NEUyRFx1N0IyQ1x1NEUwMFx1NEUyQVx1NUVBN1x1NEY0RFx1N0M3Qlx1NTc4QlxuICAgIGlmICh0aGlzLnNlYXRUYWJUYXJnZXRzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuc2VsZWN0U2VhdCh0aGlzLnNlYXRUYWJUYXJnZXRzWzBdKVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1OTAwOVx1NjJFOVx1NUVBN1x1NEY0RFx1N0M3Qlx1NTc4QlxuICBzZWxlY3RTZWF0KGV2ZW50OiBFdmVudCB8IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQgaW5zdGFuY2VvZiBFdmVudCA/IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQgOiBldmVudFxuICAgIGNvbnN0IHNlYXRUeXBlID0gdGFyZ2V0LmRhdGFzZXQuc2VhdFR5cGVcbiAgICBjb25zdCBzZWF0UHJpY2UgPSBwYXJzZUZsb2F0KHRhcmdldC5kYXRhc2V0LnNlYXRQcmljZSB8fCAnMCcpXG4gICAgXG4gICAgaWYgKCFzZWF0VHlwZSkgcmV0dXJuXG5cbiAgICAvLyBcdTY2RjRcdTY1QjBcdTkwMDlcdTRFMkRcdTcyQjZcdTYwMDFcbiAgICB0aGlzLnNlYXRUYWJUYXJnZXRzLmZvckVhY2godGFiID0+IHtcbiAgICAgIHRhYi5jbGFzc0xpc3QucmVtb3ZlKCdiZy13aGl0ZScsICdzaGFkb3cnKVxuICAgIH0pXG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2JnLXdoaXRlJywgJ3NoYWRvdycpXG5cbiAgICAvLyBcdTY2M0VcdTc5M0EvXHU5NjkwXHU4NUNGXHU1QzBGXHU0RTA5XHU4OUQyXHU1RjYyXG4gICAgdGhpcy5zZWF0VGFiVGFyZ2V0cy5mb3JFYWNoKHRhYiA9PiB7XG4gICAgICBjb25zdCBhcnJvdyA9IHRhYi5xdWVyeVNlbGVjdG9yKCcuc2VhdC1hcnJvdycpXG4gICAgICBpZiAoYXJyb3cpIHtcbiAgICAgICAgaWYgKHRhYiA9PT0gdGFyZ2V0KSB7XG4gICAgICAgICAgYXJyb3cuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcnJvdy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIFx1NjZGNFx1NjVCMFx1NUY1M1x1NTI0RFx1OTAwOVx1NEUyRFx1NzY4NFx1NUVBN1x1NEY0RFx1N0M3Qlx1NTc4QlxuICAgIHRoaXMuc2VsZWN0ZWRTZWF0VHlwZVZhbHVlID0gc2VhdFR5cGVcblxuICAgIC8vIFx1NjZGNFx1NjVCMFx1OEJBMlx1Nzk2OFx1OTAwOVx1OTg3OVx1NEUyRFx1NzY4NFx1NEVGN1x1NjgzQ1x1NTQ4Q1x1OTRGRVx1NjNBNVxuICAgIHRoaXMudXBkYXRlQm9va2luZ09wdGlvbnMoc2VhdFByaWNlKVxuICB9XG5cbiAgLy8gXHU2NkY0XHU2NUIwXHU2MjQwXHU2NzA5XHU4QkEyXHU3OTY4XHU5MDA5XHU5ODc5XHU3Njg0XHU0RUY3XHU2ODNDXHU1NDhDXHU5NEZFXHU2M0E1XG4gIHVwZGF0ZUJvb2tpbmdPcHRpb25zKGJhc2VQcmljZTogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gXHU2NkY0XHU2NUIwXHU5NEZFXHU2M0E1XHU3Njg0c2VhdF90eXBlXHU1M0MyXHU2NTcwXG4gICAgY29uc3QgbGlua3MgPSB0aGlzLm9wdGlvbnNDb250YWluZXJUYXJnZXQucXVlcnlTZWxlY3RvckFsbCgnYVtocmVmKj1cInRyYWluX2Jvb2tpbmdzL25ld1wiXScpXG4gICAgbGlua3MuZm9yRWFjaCgobGluazogRWxlbWVudCkgPT4ge1xuICAgICAgaWYgKGxpbmsgaW5zdGFuY2VvZiBIVE1MQW5jaG9yRWxlbWVudCkge1xuICAgICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGxpbmsuaHJlZiwgd2luZG93LmxvY2F0aW9uLm9yaWdpbilcbiAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3NlYXRfdHlwZScsIHRoaXMuc2VsZWN0ZWRTZWF0VHlwZVZhbHVlKVxuICAgICAgICBsaW5rLmhyZWYgPSB1cmwudG9TdHJpbmcoKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBcdTY2RjRcdTY1QjBcdTRFRjdcdTY4M0NcdTY2M0VcdTc5M0FcbiAgICBjb25zdCBwcmljZUVsZW1lbnRzID0gdGhpcy5vcHRpb25zQ29udGFpbmVyVGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ib29raW5nLW9wdGlvbi1wcmljZScpXG4gICAgcHJpY2VFbGVtZW50cy5mb3JFYWNoKChwcmljZUVsOiBFbGVtZW50KSA9PiB7XG4gICAgICBpZiAocHJpY2VFbCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGV4dHJhRmVlID0gcGFyc2VGbG9hdChwcmljZUVsLmRhdGFzZXQuZXh0cmFGZWUgfHwgJzAnKVxuICAgICAgICBjb25zdCB0b3RhbFByaWNlID0gTWF0aC5mbG9vcihiYXNlUHJpY2UgKyBleHRyYUZlZSlcbiAgICAgICAgcHJpY2VFbC50ZXh0Q29udGVudCA9IHRvdGFsUHJpY2UudG9TdHJpbmcoKVxuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcImRlc3RpbmF0aW9uSW5wdXRcIixcbiAgICBcImR1cmF0aW9uSW5wdXRcIixcbiAgICBcImdyb3VwU2l6ZUlucHV0XCIsXG4gICAgXCJkZXN0aW5hdGlvbkJ1dHRvblwiLFxuICAgIFwiZHVyYXRpb25CdXR0b25cIixcbiAgICBcImdyb3VwU2l6ZUJ1dHRvblwiLFxuICAgIFwiZGVwYXJ0dXJlRGlzcGxheVwiXG4gIF1cblxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIGRlc3RpbmF0aW9uOiBTdHJpbmcsXG4gICAgZHVyYXRpb246IFN0cmluZyxcbiAgICBncm91cFNpemU6IFN0cmluZ1xuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBkZXN0aW5hdGlvbklucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZHVyYXRpb25JbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGdyb3VwU2l6ZUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVzdGluYXRpb25CdXR0b25UYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgZHVyYXRpb25CdXR0b25UYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgZ3JvdXBTaXplQnV0dG9uVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IGRlcGFydHVyZURpc3BsYXlUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIFxuICBkZWNsYXJlIGRlc3RpbmF0aW9uVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIGR1cmF0aW9uVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIGdyb3VwU2l6ZVZhbHVlOiBzdHJpbmdcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIExpc3RlbiBmb3IgY2l0eSBzZWxlY3Rpb24gY2hhbmdlcyBmcm9tIGNpdHktc2VsZWN0b3JcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2l0eS1zZWxlY3RvcjpjaXR5LWNoYW5nZWQnLCB0aGlzLmhhbmRsZUNpdHlDaGFuZ2VkLmJpbmQodGhpcykpXG4gICAgXG4gICAgLy8gQXV0by1zZWxlY3QgZ3JvdXAgc2l6ZSBpZiBwcm92aWRlZCB2aWEgVVJMIHBhcmFtZXRlclxuICAgIGlmICh0aGlzLmdyb3VwU2l6ZVZhbHVlKSB7XG4gICAgICB0aGlzLmF1dG9TZWxlY3RHcm91cFNpemUodGhpcy5ncm91cFNpemVWYWx1ZSlcbiAgICB9XG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjaXR5LXNlbGVjdG9yOmNpdHktY2hhbmdlZCcsIHRoaXMuaGFuZGxlQ2l0eUNoYW5nZWQuYmluZCh0aGlzKSlcbiAgfVxuXG4gIC8vIEhhbmRsZSBjaXR5IGNoYW5nZSBmcm9tIGNpdHktc2VsZWN0b3IgbW9kYWxcbiAgcHJpdmF0ZSBoYW5kbGVDaXR5Q2hhbmdlZChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjdXN0b21FdmVudCA9IGV2ZW50IGFzIEN1c3RvbUV2ZW50XG4gICAgY29uc3QgeyBjaXR5TmFtZSB9ID0gY3VzdG9tRXZlbnQuZGV0YWlsXG4gICAgY29uc29sZS5sb2coJ1RvdXJHcm91cEZpbHRlcjogQ2l0eSBjaGFuZ2VkIHRvJywgY2l0eU5hbWUpXG4gICAgXG4gICAgLy8gVXBkYXRlIGRlc3RpbmF0aW9uIHZhbHVlXG4gICAgdGhpcy5kZXN0aW5hdGlvblZhbHVlID0gY2l0eU5hbWVcbiAgICB0aGlzLmRlc3RpbmF0aW9uSW5wdXRUYXJnZXQudmFsdWUgPSBjaXR5TmFtZVxuICAgIFxuICAgIC8vIFVwZGF0ZSBob3QgZGVzdGluYXRpb24gYnV0dG9ucyAtIG9ubHkgaGlnaGxpZ2h0IGlmIGNpdHkgaXMgaW4gdGhlIGxpc3RcbiAgICB0aGlzLnVwZGF0ZUhvdERlc3RpbmF0aW9uQnV0dG9ucyhjaXR5TmFtZSlcbiAgfVxuXG4gIC8vIFVwZGF0ZSBob3QgZGVzdGluYXRpb24gYnV0dG9ucyBiYXNlZCBvbiBzZWxlY3RlZCBjaXR5XG4gIHByaXZhdGUgdXBkYXRlSG90RGVzdGluYXRpb25CdXR0b25zKGNpdHlOYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBsZXQgY2l0eUluSG90TGlzdCA9IGZhbHNlXG4gICAgXG4gICAgdGhpcy5kZXN0aW5hdGlvbkJ1dHRvblRhcmdldHMuZm9yRWFjaChidG4gPT4ge1xuICAgICAgaWYgKGJ0bi5kYXRhc2V0LmRlc3RpbmF0aW9uID09PSBjaXR5TmFtZSkge1xuICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYmctZ3JheS01MCcpXG4gICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdiZy1bI0ZGRThDQ10nKVxuICAgICAgICBjaXR5SW5Ib3RMaXN0ID0gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ2JnLWdyYXktNTAnKVxuICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYmctWyNGRkU4Q0NdJylcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIGNvbnNvbGUubG9nKGBDaXR5IFwiJHtjaXR5TmFtZX1cIiAke2NpdHlJbkhvdExpc3QgPyAnaXMnIDogJ2lzIG5vdCd9IGluIGhvdCBkZXN0aW5hdGlvbiBsaXN0YClcbiAgfVxuXG4gIC8vIFx1OTAwOVx1NjJFOVx1NzZFRVx1NzY4NFx1NTczMFxuICBzZWxlY3REZXN0aW5hdGlvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgZGVzdGluYXRpb24gPSBidXR0b24uZGF0YXNldC5kZXN0aW5hdGlvbiB8fCAnJ1xuICAgIFxuICAgIHRoaXMuZGVzdGluYXRpb25WYWx1ZSA9IGRlc3RpbmF0aW9uXG4gICAgdGhpcy5kZXN0aW5hdGlvbklucHV0VGFyZ2V0LnZhbHVlID0gZGVzdGluYXRpb25cbiAgICBcbiAgICAvLyBVcGRhdGUgXCJcdTYyMTFcdTYwRjNcdTUzQkJcIiBkaXNwbGF5IHRleHRcbiAgICB0aGlzLmRlcGFydHVyZURpc3BsYXlUYXJnZXQudGV4dENvbnRlbnQgPSBkZXN0aW5hdGlvblxuICAgIFxuICAgIC8vIFx1NjZGNFx1NjVCMFx1NjMwOVx1OTRBRVx1NjgzN1x1NUYwRlxuICAgIHRoaXMudXBkYXRlSG90RGVzdGluYXRpb25CdXR0b25zKGRlc3RpbmF0aW9uKVxuICB9XG5cbiAgLy8gXHU5MDA5XHU2MkU5XHU1OTI5XHU2NTcwXG4gIHNlbGVjdER1cmF0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBkdXJhdGlvbiA9IGJ1dHRvbi5kYXRhc2V0LmR1cmF0aW9uIHx8ICcnXG4gICAgXG4gICAgdGhpcy5kdXJhdGlvblZhbHVlID0gZHVyYXRpb25cbiAgICB0aGlzLmR1cmF0aW9uSW5wdXRUYXJnZXQudmFsdWUgPSBkdXJhdGlvblxuICAgIFxuICAgIC8vIFx1NjZGNFx1NjVCMFx1NjMwOVx1OTRBRVx1NjgzN1x1NUYwRlxuICAgIHRoaXMuZHVyYXRpb25CdXR0b25UYXJnZXRzLmZvckVhY2goYnRuID0+IHtcbiAgICAgIGlmIChidG4uZGF0YXNldC5kdXJhdGlvbiA9PT0gZHVyYXRpb24pIHtcbiAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLWdyYXktNTAnKVxuICAgICAgICBidG4uY2xhc3NMaXN0LmFkZCgnYmctWyNGRkU4Q0NdJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdiZy1ncmF5LTUwJylcbiAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLVsjRkZFOENDXScpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8vIFx1OTAwOVx1NjJFOVx1NTZFMlx1OTYxRlx1NTkyN1x1NUMwRlxuICBzZWxlY3RHcm91cFNpemUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGdyb3VwU2l6ZSA9IGJ1dHRvbi5kYXRhc2V0Lmdyb3VwU2l6ZSB8fCAnJ1xuICAgIFxuICAgIHRoaXMuZ3JvdXBTaXplVmFsdWUgPSBncm91cFNpemVcbiAgICB0aGlzLmdyb3VwU2l6ZUlucHV0VGFyZ2V0LnZhbHVlID0gZ3JvdXBTaXplXG4gICAgXG4gICAgLy8gXHU2NkY0XHU2NUIwXHU1MzU1XHU5MDA5XHU2MzA5XHU5NEFFXHU2ODM3XHU1RjBGXG4gICAgdGhpcy51cGRhdGVHcm91cFNpemVCdXR0b25zKGdyb3VwU2l6ZSlcbiAgfVxuICBcbiAgLy8gQXV0by1zZWxlY3QgZ3JvdXAgc2l6ZSBvbiBwYWdlIGxvYWRcbiAgcHJpdmF0ZSBhdXRvU2VsZWN0R3JvdXBTaXplKGdyb3VwU2l6ZTogc3RyaW5nKTogdm9pZCB7XG4gICAgLy8gU2V0IHRoZSBoaWRkZW4gaW5wdXQgdmFsdWVcbiAgICBpZiAodGhpcy5ncm91cFNpemVJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5ncm91cFNpemVJbnB1dFRhcmdldC52YWx1ZSA9IGdyb3VwU2l6ZVxuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgYnV0dG9uIHN0eWxlc1xuICAgIHRoaXMudXBkYXRlR3JvdXBTaXplQnV0dG9ucyhncm91cFNpemUpXG4gIH1cbiAgXG4gIC8vIFVwZGF0ZSBncm91cCBzaXplIGJ1dHRvbiBzdHlsZXNcbiAgcHJpdmF0ZSB1cGRhdGVHcm91cFNpemVCdXR0b25zKGdyb3VwU2l6ZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5ncm91cFNpemVCdXR0b25UYXJnZXRzLmZvckVhY2goYnRuID0+IHtcbiAgICAgIGNvbnN0IHJhZGlvID0gYnRuLnF1ZXJ5U2VsZWN0b3IoJy5yYWRpby1jaXJjbGUnKSBhcyBIVE1MRWxlbWVudFxuICAgICAgaWYgKGJ0bi5kYXRhc2V0Lmdyb3VwU2l6ZSA9PT0gZ3JvdXBTaXplKSB7XG4gICAgICAgIHJhZGlvPy5jbGFzc0xpc3QuYWRkKCdiZy1bI0ZGRDcwMF0nKVxuICAgICAgICByYWRpbz8uY2xhc3NMaXN0LnJlbW92ZSgnYmctdHJhbnNwYXJlbnQnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmFkaW8/LmNsYXNzTGlzdC5hZGQoJ2JnLXRyYW5zcGFyZW50JylcbiAgICAgICAgcmFkaW8/LmNsYXNzTGlzdC5yZW1vdmUoJ2JnLVsjRkZENzAwXScpXG4gICAgICB9XG4gICAgfSlcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyIHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJkb21lc3RpY0J1dHRvblwiLCBcImludGVybmF0aW9uYWxCdXR0b25cIiwgXCJzd2FwVG9nZ2xlXCIsIFwic3dhcEluZGljYXRvclwiXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgZG9tZXN0aWNCdXR0b25UYXJnZXQ6IEhUTUxCdXR0b25FbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaW50ZXJuYXRpb25hbEJ1dHRvblRhcmdldDogSFRNTEJ1dHRvbkVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzd2FwVG9nZ2xlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHN3YXBJbmRpY2F0b3JUYXJnZXQ6IEhUTUxFbGVtZW50XG5cbiAgcHJpdmF0ZSBpc0RvbWVzdGljOiBib29sZWFuID0gdHJ1ZVxuICBwcml2YXRlIGlzU3dhcEVuYWJsZWQ6IGJvb2xlYW4gPSBmYWxzZVxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgdGhpcy51cGRhdGVEb21lc3RpY1ZpZXcoKVxuICB9XG5cbiAgc2VsZWN0RG9tZXN0aWMoKTogdm9pZCB7XG4gICAgdGhpcy5pc0RvbWVzdGljID0gdHJ1ZVxuICAgIHRoaXMudXBkYXRlRG9tZXN0aWNWaWV3KClcbiAgfVxuXG4gIHNlbGVjdEludGVybmF0aW9uYWwoKTogdm9pZCB7XG4gICAgdGhpcy5pc0RvbWVzdGljID0gZmFsc2VcbiAgICB0aGlzLnVwZGF0ZUludGVybmF0aW9uYWxWaWV3KClcbiAgfVxuXG4gIHRvZ2dsZVN3YXAoKTogdm9pZCB7XG4gICAgdGhpcy5pc1N3YXBFbmFibGVkID0gIXRoaXMuaXNTd2FwRW5hYmxlZFxuICAgIHRoaXMudXBkYXRlU3dhcFRvZ2dsZSgpXG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZURvbWVzdGljVmlldygpOiB2b2lkIHtcbiAgICB0aGlzLmRvbWVzdGljQnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy13aGl0ZVwiLCBcInNoYWRvdy1zbVwiLCBcImZvbnQtYm9sZFwiKVxuICAgIHRoaXMuZG9tZXN0aWNCdXR0b25UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcInRleHQtZ3JheS01MDBcIilcbiAgICBcbiAgICB0aGlzLmludGVybmF0aW9uYWxCdXR0b25UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLXdoaXRlXCIsIFwic2hhZG93LXNtXCIsIFwiZm9udC1ib2xkXCIpXG4gICAgdGhpcy5pbnRlcm5hdGlvbmFsQnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJ0ZXh0LWdyYXktNTAwXCIpXG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUludGVybmF0aW9uYWxWaWV3KCk6IHZvaWQge1xuICAgIHRoaXMuaW50ZXJuYXRpb25hbEJ1dHRvblRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctd2hpdGVcIiwgXCJzaGFkb3ctc21cIiwgXCJmb250LWJvbGRcIilcbiAgICB0aGlzLmludGVybmF0aW9uYWxCdXR0b25UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcInRleHQtZ3JheS01MDBcIilcbiAgICBcbiAgICB0aGlzLmRvbWVzdGljQnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy13aGl0ZVwiLCBcInNoYWRvdy1zbVwiLCBcImZvbnQtYm9sZFwiKVxuICAgIHRoaXMuZG9tZXN0aWNCdXR0b25UYXJnZXQuY2xhc3NMaXN0LmFkZChcInRleHQtZ3JheS01MDBcIilcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU3dhcFRvZ2dsZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc1N3YXBFbmFibGVkKSB7XG4gICAgICB0aGlzLnN3YXBJbmRpY2F0b3JUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImxlZnQtMVwiKVxuICAgICAgdGhpcy5zd2FwSW5kaWNhdG9yVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJsZWZ0LTVcIilcbiAgICAgIHRoaXMuc3dhcFRvZ2dsZVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctZ3JheS0yMDBcIilcbiAgICAgIHRoaXMuc3dhcFRvZ2dsZVRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctYmx1ZS01MDBcIilcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zd2FwSW5kaWNhdG9yVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJsZWZ0LTFcIilcbiAgICAgIHRoaXMuc3dhcEluZGljYXRvclRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwibGVmdC01XCIpXG4gICAgICB0aGlzLnN3YXBUb2dnbGVUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLWdyYXktMjAwXCIpXG4gICAgICB0aGlzLnN3YXBUb2dnbGVUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLWJsdWUtNTAwXCIpXG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgLy8gQWRkIHlvdXIgdGFyZ2V0cyBoZXJlLCBlLmcuOlxuICAgIC8vIFwibWVzc2FnZUlucHV0XCIsIFwibWVzc2FnZXNDb250YWluZXJcIiwgXCJzZW5kQnV0dG9uXCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgLy8gQWRkIHlvdXIgdmFsdWVzIGhlcmUsIGUuZy46XG4gICAgLy8gcm9vbUlkOiBTdHJpbmcsXG4gICAgLy8gdXNlcklkOiBTdHJpbmdcbiAgfVxuXG4gIC8vIERlY2xhcmUgeW91ciB0YXJnZXRzIGFuZCB2YWx1ZXNcbiAgLy8gZGVjbGFyZSByZWFkb25seSBtZXNzYWdlSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgLy8gZGVjbGFyZSByZWFkb25seSBtZXNzYWdlc0NvbnRhaW5lclRhcmdldDogSFRNTEVsZW1lbnRcbiAgLy8gZGVjbGFyZSByZWFkb25seSByb29tSWRWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkhvdGVsUGFja2FnZVNlYXJjaCBjb25uZWN0ZWRcIilcbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJIb3RlbFBhY2thZ2VTZWFyY2ggZGlzY29ubmVjdGVkXCIpXG4gIH1cblxuICAvLyBBZGQgeW91ciBhY3Rpb24gbWV0aG9kcyBoZXJlXG4gIC8vIEV4YW1wbGU6XG4gIC8vIGNsaWNrKCk6IHZvaWQge1xuICAvLyAgIGNvbnNvbGUubG9nKFwiQnV0dG9uIGNsaWNrZWRcIilcbiAgLy8gfVxuXG4gIC8vIEZPUk1TOiBUdXJibyArIFR1cmJvIFN0cmVhbXMgaGFuZGxlIGV2ZXJ5dGhpbmcgYXV0b21hdGljYWxseVxuICAvLyAtIEZvcm1zIHN1Ym1pdCB2aWEgQUpBWCAoVHVyYm8gRHJpdmUpXG4gIC8vIC0gU2VydmVyIHJlc3BvbmRzIHdpdGggZm9ybWF0LnR1cmJvX3N0cmVhbVxuICAvLyAtIFR1cmJvIFN0cmVhbXMgdXBkYXRlIERPTSBhdXRvbWF0aWNhbGx5XG4gIC8vIC0gTk8gbWFudWFsIGZvcm0gaGFuZGxpbmcgbmVlZGVkIGluIFN0aW11bHVzXG4gIC8vXG4gIC8vIFVzZSBTdGltdWx1cyBmb3I6XG4gIC8vIC0gVUkgaW50ZXJhY3Rpb25zICh0b2dnbGUsIHNob3cvaGlkZSlcbiAgLy8gLSBJbnB1dCB2YWxpZGF0aW9uL2Zvcm1hdHRpbmdcbiAgLy8gLSBEeW5hbWljIGZvcm0gZmllbGRzXG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJxdWFudGl0eUlucHV0XCIsXG4gICAgXCJ0b3RhbFByaWNlXCIsXG4gICAgXCJib3R0b21QcmljZVwiLFxuICAgIFwiZGVjcmVhc2VCdG5cIixcbiAgICBcImluY3JlYXNlQnRuXCIsXG4gICAgXCJzdG9ja3VwVGFiXCIsXG4gICAgXCJpbnN0YW50VGFiXCIsXG4gICAgXCJib29raW5nVHlwZUlucHV0XCIsXG4gICAgXCJjb250YWN0TmFtZUlucHV0XCIsXG4gICAgXCJjb250YWN0UGhvbmVJbnB1dFwiLFxuICAgIFwiY29uZmlybU1vZGFsXCIsXG4gICAgXCJjb25maXJtUXVhbnRpdHlcIixcbiAgICBcImNvbmZpcm1Db250YWN0XCIsXG4gICAgXCJjb25maXJtQm9va2luZ1R5cGVcIixcbiAgICBcImNvbmZpcm1Ub3RhbFByaWNlXCJcbiAgXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgcXVhbnRpdHlJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRvdGFsUHJpY2VUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgYm90dG9tUHJpY2VUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVjcmVhc2VCdG5UYXJnZXQ6IEhUTUxCdXR0b25FbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaW5jcmVhc2VCdG5UYXJnZXQ6IEhUTUxCdXR0b25FbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc3RvY2t1cFRhYlRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBpbnN0YW50VGFiVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGJvb2tpbmdUeXBlSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjb250YWN0TmFtZUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY29udGFjdFBob25lSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjb25maXJtTW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY29uZmlybVF1YW50aXR5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNvbmZpcm1Db250YWN0VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNvbmZpcm1Cb29raW5nVHlwZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjb25maXJtVG90YWxQcmljZVRhcmdldDogSFRNTEVsZW1lbnRcblxuICBwcml2YXRlIHBlbmRpbmdGb3JtRGF0YTogRm9ybURhdGEgfCBudWxsID0gbnVsbFxuICBwcml2YXRlIGFsbG93U3VibWlzc2lvbjogYm9vbGVhbiA9IGZhbHNlXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkhvdGVsUGFja2FnZU9yZGVyIGNvbm5lY3RlZFwiKVxuICAgIHRoaXMudXBkYXRlQnV0dG9uU3RhdGVzKClcbiAgfVxuXG4gIGluY3JlYXNlUXVhbnRpdHkoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGN1cnJlbnRRdWFudGl0eSA9IHBhcnNlSW50KHRoaXMucXVhbnRpdHlJbnB1dFRhcmdldC52YWx1ZSkgfHwgMVxuICAgIGNvbnN0IG5ld1F1YW50aXR5ID0gY3VycmVudFF1YW50aXR5ICsgMVxuICAgIFxuICAgIGlmIChuZXdRdWFudGl0eSA8PSA5OSkge1xuICAgICAgdGhpcy5xdWFudGl0eUlucHV0VGFyZ2V0LnZhbHVlID0gbmV3UXVhbnRpdHkudG9TdHJpbmcoKVxuICAgICAgdGhpcy51cGRhdGVQcmljZSgpXG4gICAgICB0aGlzLnVwZGF0ZUJ1dHRvblN0YXRlcygpXG4gICAgfVxuICB9XG5cbiAgZGVjcmVhc2VRdWFudGl0eShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgY3VycmVudFF1YW50aXR5ID0gcGFyc2VJbnQodGhpcy5xdWFudGl0eUlucHV0VGFyZ2V0LnZhbHVlKSB8fCAxXG4gICAgY29uc3QgbmV3UXVhbnRpdHkgPSBjdXJyZW50UXVhbnRpdHkgLSAxXG4gICAgXG4gICAgaWYgKG5ld1F1YW50aXR5ID49IDEpIHtcbiAgICAgIHRoaXMucXVhbnRpdHlJbnB1dFRhcmdldC52YWx1ZSA9IG5ld1F1YW50aXR5LnRvU3RyaW5nKClcbiAgICAgIHRoaXMudXBkYXRlUHJpY2UoKVxuICAgICAgdGhpcy51cGRhdGVCdXR0b25TdGF0ZXMoKVxuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZVByaWNlKCk6IHZvaWQge1xuICAgIGNvbnN0IHF1YW50aXR5ID0gcGFyc2VJbnQodGhpcy5xdWFudGl0eUlucHV0VGFyZ2V0LnZhbHVlKSB8fCAxXG4gICAgY29uc3QgdW5pdFByaWNlID0gcGFyc2VGbG9hdCh0aGlzLmluY3JlYXNlQnRuVGFyZ2V0LmRhdGFzZXQucHJpY2UgfHwgXCIwXCIpXG4gICAgY29uc3QgdG90YWxQcmljZSA9IHF1YW50aXR5ICogdW5pdFByaWNlXG5cbiAgICAvLyBVcGRhdGUgdG9wIHByaWNlICh3aXRoIDIgZGVjaW1hbHMpXG4gICAgdGhpcy50b3RhbFByaWNlVGFyZ2V0LnRleHRDb250ZW50ID0gYFx1MDBBNSR7dG90YWxQcmljZS50b0ZpeGVkKDIpfWBcbiAgICBcbiAgICAvLyBVcGRhdGUgYm90dG9tIHByaWNlIChpbnRlZ2VyIG9ubHkpXG4gICAgdGhpcy5ib3R0b21QcmljZVRhcmdldC50ZXh0Q29udGVudCA9IE1hdGgucm91bmQodG90YWxQcmljZSkudG9TdHJpbmcoKVxuICAgIFxuICAgIC8vIFVwZGF0ZSBwYXltZW50IGNvbmZpcm1hdGlvbiBhbW91bnRcbiAgICB0aGlzLnVwZGF0ZVBheW1lbnRDb25maXJtYXRpb25BbW91bnQoTWF0aC5yb3VuZCh0b3RhbFByaWNlKSlcbiAgfVxuXG4gIHVwZGF0ZUJ1dHRvblN0YXRlcygpOiB2b2lkIHtcbiAgICBjb25zdCBxdWFudGl0eSA9IHBhcnNlSW50KHRoaXMucXVhbnRpdHlJbnB1dFRhcmdldC52YWx1ZSkgfHwgMVxuICAgIFxuICAgIC8vIFVwZGF0ZSBkZWNyZWFzZSBidXR0b25cbiAgICBpZiAocXVhbnRpdHkgPD0gMSkge1xuICAgICAgdGhpcy5kZWNyZWFzZUJ0blRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYm9yZGVyLWJsdWUtNTAwXCIsIFwiYmctYmx1ZS01MFwiLCBcInRleHQtYmx1ZS02MDBcIilcbiAgICAgIHRoaXMuZGVjcmVhc2VCdG5UYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTIwMFwiLCBcInRleHQtZ3JheS0zMDBcIilcbiAgICAgIHRoaXMuZGVjcmVhc2VCdG5UYXJnZXQuZGlzYWJsZWQgPSB0cnVlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGVjcmVhc2VCdG5UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJvcmRlci1ncmF5LTIwMFwiLCBcInRleHQtZ3JheS0zMDBcIilcbiAgICAgIHRoaXMuZGVjcmVhc2VCdG5UYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ibHVlLTUwMFwiLCBcImJnLWJsdWUtNTBcIiwgXCJ0ZXh0LWJsdWUtNjAwXCIpXG4gICAgICB0aGlzLmRlY3JlYXNlQnRuVGFyZ2V0LmRpc2FibGVkID0gZmFsc2VcbiAgICB9XG4gIH1cblxuICBzZWxlY3RUYWIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCB0YWJUeXBlID0gdGFyZ2V0LmRhdGFzZXQudGFiXG4gICAgXG4gICAgaWYgKHRhYlR5cGUgPT09IFwic3RvY2t1cFwiKSB7XG4gICAgICAvLyBBY3RpdmF0ZSBzdG9ja3VwIHRhYlxuICAgICAgdGhpcy5zdG9ja3VwVGFiVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI0ZDRUVBOF1cIiwgXCJiZy1vcGFjaXR5LTYwXCIsIFwidGV4dC1ncmF5LTcwMFwiKVxuICAgICAgdGhpcy5zdG9ja3VwVGFiVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy1bI0Y1RjhGQV1cIiwgXCJ6LTEwXCIpXG4gICAgICB0aGlzLnN0b2NrdXBUYWJUYXJnZXQucXVlcnlTZWxlY3RvcihcInNwYW46Zmlyc3QtY2hpbGRcIik/LmNsYXNzTGlzdC5yZW1vdmUoXCJmb250LW1lZGl1bVwiKVxuICAgICAgdGhpcy5zdG9ja3VwVGFiVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCJzcGFuOmZpcnN0LWNoaWxkXCIpPy5jbGFzc0xpc3QuYWRkKFwiZm9udC1ib2xkXCIsIFwidGV4dC1ibGFja1wiKVxuICAgICAgXG4gICAgICAvLyBEZWFjdGl2YXRlIGluc3RhbnQgdGFiXG4gICAgICB0aGlzLmluc3RhbnRUYWJUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLVsjRjVGOEZBXVwiLCBcInotMTBcIilcbiAgICAgIHRoaXMuaW5zdGFudFRhYlRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNGQ0VFQThdXCIsIFwiYmctb3BhY2l0eS02MFwiLCBcInRleHQtZ3JheS03MDBcIilcbiAgICAgIHRoaXMuaW5zdGFudFRhYlRhcmdldC5xdWVyeVNlbGVjdG9yKFwic3BhbjpmaXJzdC1jaGlsZFwiKT8uY2xhc3NMaXN0LnJlbW92ZShcImZvbnQtYm9sZFwiLCBcInRleHQtYmxhY2tcIilcbiAgICAgIHRoaXMuaW5zdGFudFRhYlRhcmdldC5xdWVyeVNlbGVjdG9yKFwic3BhbjpmaXJzdC1jaGlsZFwiKT8uY2xhc3NMaXN0LmFkZChcImZvbnQtbWVkaXVtXCIpXG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBoaWRkZW4gZmllbGRcbiAgICAgIHRoaXMuYm9va2luZ1R5cGVJbnB1dFRhcmdldC52YWx1ZSA9IFwic3RvY2t1cFwiXG4gICAgfSBlbHNlIGlmICh0YWJUeXBlID09PSBcImluc3RhbnRcIikge1xuICAgICAgLy8gQWN0aXZhdGUgaW5zdGFudCB0YWJcbiAgICAgIHRoaXMuaW5zdGFudFRhYlRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNGQ0VFQThdXCIsIFwiYmctb3BhY2l0eS02MFwiLCBcInRleHQtZ3JheS03MDBcIilcbiAgICAgIHRoaXMuaW5zdGFudFRhYlRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNGNUY4RkFdXCIsIFwiei0xMFwiKVxuICAgICAgdGhpcy5pbnN0YW50VGFiVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCJzcGFuOmZpcnN0LWNoaWxkXCIpPy5jbGFzc0xpc3QucmVtb3ZlKFwiZm9udC1tZWRpdW1cIilcbiAgICAgIHRoaXMuaW5zdGFudFRhYlRhcmdldC5xdWVyeVNlbGVjdG9yKFwic3BhbjpmaXJzdC1jaGlsZFwiKT8uY2xhc3NMaXN0LmFkZChcImZvbnQtYm9sZFwiLCBcInRleHQtYmxhY2tcIilcbiAgICAgIFxuICAgICAgLy8gRGVhY3RpdmF0ZSBzdG9ja3VwIHRhYlxuICAgICAgdGhpcy5zdG9ja3VwVGFiVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI0Y1RjhGQV1cIiwgXCJ6LTEwXCIpXG4gICAgICB0aGlzLnN0b2NrdXBUYWJUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLVsjRkNFRUE4XVwiLCBcImJnLW9wYWNpdHktNjBcIiwgXCJ0ZXh0LWdyYXktNzAwXCIpXG4gICAgICB0aGlzLnN0b2NrdXBUYWJUYXJnZXQucXVlcnlTZWxlY3RvcihcInNwYW46Zmlyc3QtY2hpbGRcIik/LmNsYXNzTGlzdC5yZW1vdmUoXCJmb250LWJvbGRcIiwgXCJ0ZXh0LWJsYWNrXCIpXG4gICAgICB0aGlzLnN0b2NrdXBUYWJUYXJnZXQucXVlcnlTZWxlY3RvcihcInNwYW46Zmlyc3QtY2hpbGRcIik/LmNsYXNzTGlzdC5hZGQoXCJmb250LW1lZGl1bVwiKVxuICAgICAgXG4gICAgICAvLyBVcGRhdGUgaGlkZGVuIGZpZWxkXG4gICAgICB0aGlzLmJvb2tpbmdUeXBlSW5wdXRUYXJnZXQudmFsdWUgPSBcImluc3RhbnRcIlxuICAgIH1cbiAgfVxuXG4gIHNlbGVjdFBhc3NlbmdlcihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBsYWJlbCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBuYW1lID0gbGFiZWwuZGF0YXNldC5wYXNzZW5nZXJOYW1lIHx8IFwiXCJcbiAgICBjb25zdCBwaG9uZSA9IGxhYmVsLmRhdGFzZXQucGFzc2VuZ2VyUGhvbmUgfHwgXCJcIlxuICAgIFxuICAgIC8vIFVwZGF0ZSBoaWRkZW4gZmllbGRzXG4gICAgdGhpcy5jb250YWN0TmFtZUlucHV0VGFyZ2V0LnZhbHVlID0gbmFtZVxuICAgIHRoaXMuY29udGFjdFBob25lSW5wdXRUYXJnZXQudmFsdWUgPSBwaG9uZVxuICB9XG5cbiAgaGFuZGxlU3VibWl0KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIC8vIEFsbG93IHN1Ym1pc3Npb24gaWYgZmxhZyBpcyBzZXRcbiAgICBpZiAodGhpcy5hbGxvd1N1Ym1pc3Npb24pIHtcbiAgICAgIGNvbnNvbGUubG9nKCdBbGxvd2luZyBmb3JtIHN1Ym1pc3Npb24nKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBcbiAgICAvLyBWYWxpZGF0ZSBjb250YWN0IGluZm9cbiAgICBpZiAoIXRoaXMuY29udGFjdE5hbWVJbnB1dFRhcmdldC52YWx1ZSB8fCAhdGhpcy5jb250YWN0UGhvbmVJbnB1dFRhcmdldC52YWx1ZSkge1xuICAgICAgYWxlcnQoJ1x1OEJGN1x1OTAwOVx1NjJFOVx1ODA1NFx1N0NGQlx1NEVCQScpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gU3RvcmUgZm9ybSBkYXRhIGZvciBsYXRlciBzdWJtaXNzaW9uXG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIGNvbnN0IGZvcm0gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignZm9ybScpIGFzIEhUTUxGb3JtRWxlbWVudFxuICAgIGlmIChmb3JtKSB7XG4gICAgICB0aGlzLnBlbmRpbmdGb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShmb3JtKVxuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgbW9kYWwgd2l0aCBjdXJyZW50IGZvcm0gdmFsdWVzXG4gICAgdGhpcy51cGRhdGVDb25maXJtTW9kYWwoKVxuICAgIFxuICAgIC8vIFNob3cgbW9kYWxcbiAgICB0aGlzLnNob3dDb25maXJtTW9kYWwoKVxuICB9XG5cbiAgdXBkYXRlQ29uZmlybU1vZGFsKCk6IHZvaWQge1xuICAgIC8vIFVwZGF0ZSBxdWFudGl0eVxuICAgIGNvbnN0IHF1YW50aXR5ID0gdGhpcy5xdWFudGl0eUlucHV0VGFyZ2V0LnZhbHVlXG4gICAgdGhpcy5jb25maXJtUXVhbnRpdHlUYXJnZXQudGV4dENvbnRlbnQgPSBxdWFudGl0eVxuICAgIFxuICAgIC8vIFVwZGF0ZSBjb250YWN0XG4gICAgY29uc3QgY29udGFjdE5hbWUgPSB0aGlzLmNvbnRhY3ROYW1lSW5wdXRUYXJnZXQudmFsdWVcbiAgICBjb25zdCBjb250YWN0UGhvbmUgPSB0aGlzLmNvbnRhY3RQaG9uZUlucHV0VGFyZ2V0LnZhbHVlXG4gICAgdGhpcy5jb25maXJtQ29udGFjdFRhcmdldC50ZXh0Q29udGVudCA9IGAke2NvbnRhY3ROYW1lfSAke2NvbnRhY3RQaG9uZX1gXG4gICAgXG4gICAgLy8gVXBkYXRlIGJvb2tpbmcgdHlwZVxuICAgIGNvbnN0IGJvb2tpbmdUeXBlID0gdGhpcy5ib29raW5nVHlwZUlucHV0VGFyZ2V0LnZhbHVlXG4gICAgdGhpcy5jb25maXJtQm9va2luZ1R5cGVUYXJnZXQudGV4dENvbnRlbnQgPSBib29raW5nVHlwZSA9PT0gJ3N0b2NrdXAnID8gJ1x1NTE0OFx1NTZFNFx1NTQwRVx1N0VBNicgOiAnXHU3QUNCXHU1MzczXHU5ODg0XHU3RUE2J1xuICAgIFxuICAgIC8vIFVwZGF0ZSB0b3RhbCBwcmljZVxuICAgIGNvbnN0IHRvdGFsUHJpY2UgPSB0aGlzLmJvdHRvbVByaWNlVGFyZ2V0LnRleHRDb250ZW50XG4gICAgdGhpcy5jb25maXJtVG90YWxQcmljZVRhcmdldC50ZXh0Q29udGVudCA9IHRvdGFsUHJpY2UgfHwgJzAnXG4gIH1cblxuICBzaG93Q29uZmlybU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMuY29uZmlybU1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgXG4gICAgLy8gQXV0by1jbG9zZSBhbmQgc2hvdyBwYXNzd29yZCBtb2RhbCBhZnRlciAyLTMgc2Vjb25kc1xuICAgIGNvbnN0IHdhaXRUaW1lID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKDMwMDAgLSAyMDAwICsgMSkpICsgMjAwMFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZUNvbmZpcm1Nb2RhbCgpXG4gICAgICB0aGlzLnNob3dQYXltZW50UGFzc3dvcmRNb2RhbCgpXG4gICAgfSwgd2FpdFRpbWUpXG4gIH1cblxuICBjbG9zZUNvbmZpcm1Nb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLmNvbmZpcm1Nb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICB9XG5cbiAgc2hvd1BheW1lbnRQYXNzd29yZE1vZGFsKCk6IHZvaWQge1xuICAgIC8vIEdldCBwYXltZW50IGNvbmZpcm1hdGlvbiBjb250cm9sbGVyIGFuZCBzaG93IHBhc3N3b3JkIG1vZGFsXG4gICAgY29uc3QgcGF5bWVudENvbnRyb2xsZXIgPSB0aGlzLmFwcGxpY2F0aW9uLmdldENvbnRyb2xsZXJGb3JFbGVtZW50QW5kSWRlbnRpZmllcihcbiAgICAgIHRoaXMuZWxlbWVudCxcbiAgICAgICdwYXltZW50LWNvbmZpcm1hdGlvbidcbiAgICApIGFzIGFueVxuICAgIFxuICAgIGlmIChwYXltZW50Q29udHJvbGxlciAmJiB0eXBlb2YgcGF5bWVudENvbnRyb2xsZXIuc2hvd1Bhc3N3b3JkTW9kYWwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHBheW1lbnRDb250cm9sbGVyLnNob3dQYXNzd29yZE1vZGFsKClcbiAgICAgIFxuICAgICAgLy8gTGlzdGVuIGZvciBwYXltZW50IHN1Y2Nlc3MgdG8gc3VibWl0IGZvcm1cbiAgICAgIHRoaXMuc2V0dXBQYXltZW50U3VjY2Vzc0xpc3RlbmVyKClcbiAgICB9XG4gIH1cblxuICBzZXR1cFBheW1lbnRTdWNjZXNzTGlzdGVuZXIoKTogdm9pZCB7XG4gICAgLy8gT3ZlcnJpZGUgdGhlIHBheW1lbnQgY29uZmlybWF0aW9uJ3MgcHJvY2Vzc0FjdHVhbFBheW1lbnQgdG8gc3VibWl0IG91ciBmb3JtXG4gICAgY29uc3QgcGF5bWVudENvbnRyb2xsZXIgPSB0aGlzLmFwcGxpY2F0aW9uLmdldENvbnRyb2xsZXJGb3JFbGVtZW50QW5kSWRlbnRpZmllcihcbiAgICAgIHRoaXMuZWxlbWVudCxcbiAgICAgICdwYXltZW50LWNvbmZpcm1hdGlvbidcbiAgICApIGFzIGFueVxuICAgIFxuICAgIGlmIChwYXltZW50Q29udHJvbGxlcikge1xuICAgICAgLy8gQ29tcGxldGVseSBvdmVycmlkZSB0aGUgcHJvY2Vzc0FjdHVhbFBheW1lbnQgbWV0aG9kXG4gICAgICBwYXltZW50Q29udHJvbGxlci5wcm9jZXNzQWN0dWFsUGF5bWVudCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgLy8gU3VibWl0IHRoZSBmb3JtIGltbWVkaWF0ZWx5IC0gbm8gQVBJIGNhbGwgbmVlZGVkXG4gICAgICAgIHRoaXMuc3VibWl0Rm9ybVdpdGhEYXRhKClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdWJtaXRGb3JtV2l0aERhdGEoKTogdm9pZCB7XG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIGNvbnN0IGZvcm0gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignZm9ybScpIGFzIEhUTUxGb3JtRWxlbWVudFxuICAgIGlmIChmb3JtKSB7XG4gICAgICBjb25zb2xlLmxvZygnU2V0dGluZyBhbGxvd1N1Ym1pc3Npb24gZmxhZyBhbmQgc3VibWl0dGluZyBmb3JtLi4uJylcbiAgICAgIC8vIFNldCBmbGFnIHRvIGFsbG93IHN1Ym1pc3Npb25cbiAgICAgIHRoaXMuYWxsb3dTdWJtaXNzaW9uID0gdHJ1ZVxuICAgICAgLy8gU3VibWl0IHRoZSBmb3JtIHVzaW5nIFR1cmJvXG4gICAgICBmb3JtLnJlcXVlc3RTdWJtaXQoKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGb3JtIG5vdCBmb3VuZCcpXG4gICAgfVxuICB9XG5cbiAgdXBkYXRlUGF5bWVudENvbmZpcm1hdGlvbkFtb3VudChhbW91bnQ6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIFVwZGF0ZSB0aGUgcGF5bWVudCBjb25maXJtYXRpb24gY29udHJvbGxlcidzIGFtb3VudCB2YWx1ZVxuICAgIGNvbnN0IHBheW1lbnRDb250cm9sbGVyID0gdGhpcy5hcHBsaWNhdGlvbi5nZXRDb250cm9sbGVyRm9yRWxlbWVudEFuZElkZW50aWZpZXIoXG4gICAgICB0aGlzLmVsZW1lbnQsXG4gICAgICAncGF5bWVudC1jb25maXJtYXRpb24nXG4gICAgKSBhcyBhbnlcbiAgICBcbiAgICBpZiAocGF5bWVudENvbnRyb2xsZXIpIHtcbiAgICAgIHBheW1lbnRDb250cm9sbGVyLmFtb3VudFZhbHVlID0gYW1vdW50LnRvU3RyaW5nKClcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmludGVyZmFjZSBCZWZvcmVJbnN0YWxsUHJvbXB0RXZlbnQgZXh0ZW5kcyBFdmVudCB7XG4gIHJlYWRvbmx5IHBsYXRmb3Jtczogc3RyaW5nW11cbiAgcmVhZG9ubHkgdXNlckNob2ljZTogUHJvbWlzZTx7XG4gICAgb3V0Y29tZTogJ2FjY2VwdGVkJyB8ICdkaXNtaXNzZWQnXG4gICAgcGxhdGZvcm06IHN0cmluZ1xuICB9PlxuICBwcm9tcHQoKTogUHJvbWlzZTx2b2lkPlxufVxuXG4vKipcbiAqIFBXQSBJbnN0YWxsIENvbnRyb2xsZXJcbiAqXG4gKiBIYW5kbGVzIFByb2dyZXNzaXZlIFdlYiBBcHAgaW5zdGFsbGF0aW9uIHByb21wdFxuICpcbiAqIFVzYWdlOlxuICogICA8ZGl2IGRhdGEtY29udHJvbGxlcj1cInB3YS1pbnN0YWxsXCI+XG4gKiAgICAgPGJ1dHRvblxuICogICAgICAgZGF0YS1wd2EtaW5zdGFsbC10YXJnZXQ9XCJpbnN0YWxsQnV0dG9uXCJcbiAqICAgICAgIGRhdGEtYWN0aW9uPVwiY2xpY2stPnB3YS1pbnN0YWxsI2luc3RhbGxcIlxuICogICAgICAgY2xhc3M9XCJoaWRkZW5cIj5cbiAqICAgICAgIEluc3RhbGwgQXBwXG4gKiAgICAgPC9idXR0b24+XG4gKiAgIDwvZGl2PlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXIge1xuICBkZWNsYXJlIHJlYWRvbmx5IGluc3RhbGxCdXR0b25UYXJnZXQ6IEhUTUxCdXR0b25FbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzSW5zdGFsbEJ1dHRvblRhcmdldDogYm9vbGVhblxuXG4gIHByaXZhdGUgZGVmZXJyZWRQcm9tcHQ6IEJlZm9yZUluc3RhbGxQcm9tcHRFdmVudCB8IG51bGwgPSBudWxsXG5cbiAgY29ubmVjdCgpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JlaW5zdGFsbHByb21wdCcsIHRoaXMuaGFuZGxlQmVmb3JlSW5zdGFsbFByb21wdC5iaW5kKHRoaXMpKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdhcHBpbnN0YWxsZWQnLCB0aGlzLmhhbmRsZUFwcEluc3RhbGxlZC5iaW5kKHRoaXMpKVxuXG4gICAgaWYgKHRoaXMuaXNTdGFuZGFsb25lKCkpIHtcbiAgICAgIHRoaXMuaGlkZUluc3RhbGxCdXR0b24oKVxuICAgIH1cbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKSB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JlZm9yZWluc3RhbGxwcm9tcHQnLCB0aGlzLmhhbmRsZUJlZm9yZUluc3RhbGxQcm9tcHQuYmluZCh0aGlzKSlcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignYXBwaW5zdGFsbGVkJywgdGhpcy5oYW5kbGVBcHBJbnN0YWxsZWQuYmluZCh0aGlzKSlcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlQmVmb3JlSW5zdGFsbFByb21wdChlOiBFdmVudCkge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIHRoaXMuZGVmZXJyZWRQcm9tcHQgPSBlIGFzIEJlZm9yZUluc3RhbGxQcm9tcHRFdmVudFxuXG4gICAgaWYgKHRoaXMuaGFzSW5zdGFsbEJ1dHRvblRhcmdldCkge1xuICAgICAgdGhpcy5pbnN0YWxsQnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVBcHBJbnN0YWxsZWQoKSB7XG4gICAgdGhpcy5kZWZlcnJlZFByb21wdCA9IG51bGxcbiAgICB0aGlzLmhpZGVJbnN0YWxsQnV0dG9uKClcbiAgfVxuXG4gIGFzeW5jIGluc3RhbGwoKSB7XG4gICAgaWYgKCF0aGlzLmRlZmVycmVkUHJvbXB0KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB0aGlzLmRlZmVycmVkUHJvbXB0LnByb21wdCgpXG5cbiAgICBjb25zdCB7IG91dGNvbWUgfSA9IGF3YWl0IHRoaXMuZGVmZXJyZWRQcm9tcHQudXNlckNob2ljZVxuXG4gICAgaWYgKG91dGNvbWUgPT09ICdhY2NlcHRlZCcpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdQV0EgaW5zdGFsbGF0aW9uIGFjY2VwdGVkJylcbiAgICB9XG5cbiAgICB0aGlzLmRlZmVycmVkUHJvbXB0ID0gbnVsbFxuICAgIHRoaXMuaGlkZUluc3RhbGxCdXR0b24oKVxuICB9XG5cbiAgcHJpdmF0ZSBpc1N0YW5kYWxvbmUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHdpbmRvdy5tYXRjaE1lZGlhKCcoZGlzcGxheS1tb2RlOiBzdGFuZGFsb25lKScpLm1hdGNoZXMgfHxcbiAgICAgICAgICAgKHdpbmRvdy5uYXZpZ2F0b3IgYXMgYW55KS5zdGFuZGFsb25lID09PSB0cnVlXG4gIH1cblxuICBwcml2YXRlIGhpZGVJbnN0YWxsQnV0dG9uKCkge1xuICAgIGlmICh0aGlzLmhhc0luc3RhbGxCdXR0b25UYXJnZXQpIHtcbiAgICAgIHRoaXMuaW5zdGFsbEJ1dHRvblRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyB0YXJnZXRzID0gW1wiaW5zdGFsbEJ1dHRvblwiXVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwibW9kYWxcIixcbiAgICBcInNlbGVjdGVkRGF0ZVwiLFxuICAgIFwiZGF0ZUlucHV0XCIsXG4gICAgXCJkYXRlQnV0dG9uXCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgY3VycmVudERhdGU6IFN0cmluZ1xuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNNb2RhbFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IHNlbGVjdGVkRGF0ZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkYXRlSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkYXRlQnV0dG9uVGFyZ2V0czogSFRNTEJ1dHRvbkVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1NlbGVjdGVkRGF0ZVRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0RhdGVJbnB1dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIGN1cnJlbnREYXRlVmFsdWU6IHN0cmluZ1xuXG4gIHByaXZhdGUgc2VsZWN0ZWREYXRlT2JqOiBEYXRlID0gbmV3IERhdGUoKVxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJCdXNEYXRlUGlja2VyIGNvbm5lY3RlZFwiKVxuICAgIC8vIEluaXRpYWxpemUgd2l0aCB0b2RheSdzIGRhdGUgdXNpbmcgY2xpZW50IHRpbWV6b25lXG4gICAgdGhpcy5zZWxlY3RlZERhdGVPYmogPSBuZXcgRGF0ZSgpXG4gICAgdGhpcy5jdXJyZW50RGF0ZVZhbHVlID0gdGhpcy5mb3JtYXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlT2JqKVxuICAgIFxuICAgIC8vIFVwZGF0ZSBkaXNwbGF5ZWQgZGF0ZSBpbW1lZGlhdGVseSB3aXRoIGNsaWVudCB0aW1lem9uZVxuICAgIGlmICh0aGlzLmhhc1NlbGVjdGVkRGF0ZVRhcmdldCkge1xuICAgICAgdGhpcy51cGRhdGVEaXNwbGF5ZWREYXRlKClcbiAgICB9XG4gICAgXG4gICAgLy8gVXBkYXRlIGhpZGRlbiBpbnB1dCB3aXRoIGNsaWVudCB0aW1lem9uZSBkYXRlXG4gICAgaWYgKHRoaXMuaGFzRGF0ZUlucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLmRhdGVJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuY3VycmVudERhdGVWYWx1ZVxuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgcGFzdCBkYXRlIGJ1dHRvbnMgYmFzZWQgb24gY2xpZW50IHRpbWV6b25lXG4gICAgdGhpcy51cGRhdGVQYXN0RGF0ZXMoKVxuICB9XG5cbiAgLy8gT3BlbiBkYXRlIHBpY2tlciBtb2RhbFxuICBvcGVuTW9kYWwoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc01vZGFsVGFyZ2V0KSByZXR1cm5cbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nXG4gIH1cblxuICAvLyBDbG9zZSBkYXRlIHBpY2tlciBtb2RhbFxuICBjbG9zZU1vZGFsKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNNb2RhbFRhcmdldCkgcmV0dXJuXG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJ1xuICB9XG5cbiAgLy8gU2VsZWN0IGEgZGF0ZVxuICBzZWxlY3REYXRlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBkYXRlU3RyID0gYnV0dG9uLmRhdGFzZXQuZGF0ZSB8fCAnJ1xuICAgIFxuICAgIGlmICghZGF0ZVN0cikgcmV0dXJuXG5cbiAgICAvLyBQcmV2ZW50IHNlbGVjdGluZyBkYXRlcyBiZWZvcmUgdG9kYXkgKHVzaW5nIGNsaWVudCB0aW1lem9uZSlcbiAgICBjb25zdCBzZWxlY3RlZERhdGUgPSBuZXcgRGF0ZShgJHtkYXRlU3RyfVQwMDowMDowMGApXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXG4gICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICBzZWxlY3RlZERhdGUuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICBcbiAgICBpZiAoc2VsZWN0ZWREYXRlIDwgdG9kYXkpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdDYW5ub3Qgc2VsZWN0IHBhc3QgZGF0ZXMgKGNsaWVudCB0aW1lem9uZSBjaGVjayknKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdGhpcy5zZWxlY3RlZERhdGVPYmogPSBzZWxlY3RlZERhdGVcbiAgICB0aGlzLmN1cnJlbnREYXRlVmFsdWUgPSBkYXRlU3RyXG4gICAgXG4gICAgLy8gVXBkYXRlIGRpc3BsYXllZCBkYXRlXG4gICAgaWYgKHRoaXMuaGFzU2VsZWN0ZWREYXRlVGFyZ2V0KSB7XG4gICAgICB0aGlzLnVwZGF0ZURpc3BsYXllZERhdGUoKVxuICAgIH1cbiAgICBpZiAodGhpcy5oYXNEYXRlSW5wdXRUYXJnZXQpIHtcbiAgICAgIHRoaXMuZGF0ZUlucHV0VGFyZ2V0LnZhbHVlID0gZGF0ZVN0clxuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpZiB3ZSdyZSBvbiB0aGUgc2VhcmNoIHBhZ2UgYnkgY2hlY2tpbmcgVVJMIHBhdGhcbiAgICBjb25zdCBjdXJyZW50UGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZVxuICAgIGlmIChjdXJyZW50UGF0aC5pbmNsdWRlcygnL2J1c190aWNrZXRzL3NlYXJjaCcpKSB7XG4gICAgICAvLyBPbiBzZWFyY2ggcGFnZTogY2xvc2UgbW9kYWwgYW5kIHJlZnJlc2ggd2l0aCBuZXcgZGF0ZVxuICAgICAgdGhpcy5jbG9zZU1vZGFsKClcbiAgICAgIHRoaXMucmVmcmVzaFNlYXJjaFJlc3VsdHMoZGF0ZVN0cilcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gT24gaW5kZXggcGFnZToganVzdCBjbG9zZSBtb2RhbFxuICAgICAgdGhpcy5jbG9zZU1vZGFsKClcbiAgICB9XG4gIH1cblxuICAvLyBSZWZyZXNoIHNlYXJjaCByZXN1bHRzIHdpdGggbmV3IGRhdGUgKHNlYXJjaCBwYWdlIG9ubHkpXG4gIHByaXZhdGUgcmVmcmVzaFNlYXJjaFJlc3VsdHMoZGF0ZVN0cjogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKVxuICAgIHBhcmFtcy5zZXQoJ2RhdGUnLCBkYXRlU3RyKVxuICAgIFxuICAgIC8vIFVzZSBUdXJibyB0byBuYXZpZ2F0ZSB3aXRoIG5ldyBkYXRlIHBhcmFtZXRlclxuICAgIGNvbnN0IG5ld1VybCA9IGAke3dpbmRvdy5sb2NhdGlvbi5wYXRobmFtZX0/JHtwYXJhbXMudG9TdHJpbmcoKX1gXG4gICAgLy8gQHRzLWlnbm9yZSAtIFR1cmJvIGlzIGF2YWlsYWJsZSBnbG9iYWxseVxuICAgIGlmICh0eXBlb2YgVHVyYm8gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgICAgIFR1cmJvLnZpc2l0KG5ld1VybClcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRmFsbGJhY2sgdG8gcmVndWxhciBwYWdlIHJlbG9hZFxuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBuZXdVcmxcbiAgICB9XG4gIH1cblxuICAvLyBVcGRhdGUgdGhlIGRpc3BsYXllZCBkYXRlIGluIHRoZSBtYWluIHZpZXdcbiAgcHJpdmF0ZSB1cGRhdGVEaXNwbGF5ZWREYXRlKCk6IHZvaWQge1xuICAgIGNvbnN0IG1vbnRoID0gdGhpcy5zZWxlY3RlZERhdGVPYmouZ2V0TW9udGgoKSArIDFcbiAgICBjb25zdCBkYXkgPSB0aGlzLnNlbGVjdGVkRGF0ZU9iai5nZXREYXRlKClcbiAgICBjb25zdCBkYXlOYW1lID0gdGhpcy5nZXREYXlOYW1lKHRoaXMuc2VsZWN0ZWREYXRlT2JqKVxuICAgIFxuICAgIHRoaXMuc2VsZWN0ZWREYXRlVGFyZ2V0LmlubmVySFRNTCA9IGBcbiAgICAgICR7bW9udGh9PHNwYW4gY2xhc3M9XCJ0ZXh0LWJhc2UgbXgtMC41XCI+XHU2NzA4PC9zcGFuPiR7ZGF5fTxzcGFuIGNsYXNzPVwidGV4dC1iYXNlIG1sLTAuNSBtci0yXCI+XHU2NUU1PC9zcGFuPlxuICAgIGBcbiAgICBcbiAgICAvLyBVcGRhdGUgdGhlIFwiXHU0RUNBXHU1OTI5XCIgdGV4dCBhZnRlciB0aGUgZGF0ZVxuICAgIGNvbnN0IGRheUxhYmVsID0gdGhpcy5zZWxlY3RlZERhdGVUYXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nXG4gICAgaWYgKGRheUxhYmVsKSB7XG4gICAgICBkYXlMYWJlbC50ZXh0Q29udGVudCA9IGRheU5hbWVcbiAgICB9XG4gIH1cblxuICAvLyBHZXQgZGF5IG5hbWUgaW4gQ2hpbmVzZVxuICBwcml2YXRlIGdldERheU5hbWUoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXG4gICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICBjb25zdCB0YXJnZXREYXRlID0gbmV3IERhdGUoZGF0ZSlcbiAgICB0YXJnZXREYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgXG4gICAgY29uc3QgZGlmZlRpbWUgPSB0YXJnZXREYXRlLmdldFRpbWUoKSAtIHRvZGF5LmdldFRpbWUoKVxuICAgIGNvbnN0IGRpZmZEYXlzID0gTWF0aC5yb3VuZChkaWZmVGltZSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSlcbiAgICBcbiAgICBpZiAoZGlmZkRheXMgPT09IDApIHJldHVybiAnXHU0RUNBXHU1OTI5J1xuICAgIGlmIChkaWZmRGF5cyA9PT0gMSkgcmV0dXJuICdcdTY2MEVcdTU5MjknXG4gICAgaWYgKGRpZmZEYXlzID09PSAyKSByZXR1cm4gJ1x1NTQwRVx1NTkyOSdcbiAgICBcbiAgICBjb25zdCB3ZWVrZGF5cyA9IFsnXHU1NDY4XHU2NUU1JywgJ1x1NTQ2OFx1NEUwMCcsICdcdTU0NjhcdTRFOEMnLCAnXHU1NDY4XHU0RTA5JywgJ1x1NTQ2OFx1NTZEQicsICdcdTU0NjhcdTRFOTQnLCAnXHU1NDY4XHU1MTZEJ11cbiAgICByZXR1cm4gd2Vla2RheXNbZGF0ZS5nZXREYXkoKV1cbiAgfVxuXG4gIC8vIEZvcm1hdCBkYXRlIGFzIFlZWVktTU0tRERcbiAgcHJpdmF0ZSBmb3JtYXREYXRlKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKClcbiAgICBjb25zdCBtb250aCA9IFN0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpXG4gICAgY29uc3QgZGF5ID0gU3RyaW5nKGRhdGUuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpXG4gICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fWBcbiAgfVxuXG4gIC8vIFVwZGF0ZSBwYXN0IGRhdGVzIHRvIGJlIGRpc2FibGVkXG4gIHByaXZhdGUgdXBkYXRlUGFzdERhdGVzKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5kYXRlQnV0dG9uVGFyZ2V0cykgcmV0dXJuXG4gICAgXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXG4gICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICBcbiAgICB0aGlzLmRhdGVCdXR0b25UYXJnZXRzLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgIGNvbnN0IGRhdGVTdHIgPSBidXR0b24uZGF0YXNldC5kYXRlXG4gICAgICBpZiAoIWRhdGVTdHIpIHJldHVyblxuICAgICAgXG4gICAgICBjb25zdCBidXR0b25EYXRlID0gbmV3IERhdGUoYCR7ZGF0ZVN0cn1UMDA6MDA6MDBgKVxuICAgICAgYnV0dG9uRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICAgICAgXG4gICAgICBpZiAoYnV0dG9uRGF0ZSA8IHRvZGF5KSB7XG4gICAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IHRydWVcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktNDAnLCAnY3Vyc29yLW5vdC1hbGxvd2VkJylcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2hvdmVyOmJnLWJsdWUtNTAnKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyBDaGVjayBpZiBkYXRlIGlzIHRvZGF5XG4gIHByaXZhdGUgaXNUb2RheShkYXRlOiBEYXRlKTogYm9vbGVhbiB7XG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXG4gICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICBjb25zdCBjb21wYXJlRGF0ZSA9IG5ldyBEYXRlKGRhdGUpXG4gICAgY29tcGFyZURhdGUuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICByZXR1cm4gY29tcGFyZURhdGUuZ2V0VGltZSgpID09PSB0b2RheS5nZXRUaW1lKClcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcbmltcG9ydCAqIGFzIFR1cmJvIGZyb20gXCJAaG90d2lyZWQvdHVyYm9cIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXIge1xuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIG9yaWdpbjogU3RyaW5nLFxuICAgIGRlc3RpbmF0aW9uOiBTdHJpbmcsXG4gICAgZGF0ZTogU3RyaW5nXG4gIH1cblxuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcIm92ZXJsYXlcIixcbiAgICBcIm1vZGFsXCIsXG4gICAgXCJkZXBhcnR1cmVUaW1lVGFiXCIsXG4gICAgXCJzZWF0VHlwZVRhYlwiLFxuICAgIFwiZGVwYXJ0dXJlU3RhdGlvblRhYlwiLFxuICAgIFwiYXJyaXZhbFN0YXRpb25UYWJcIixcbiAgICBcImRlcGFydHVyZVRpbWVTZWN0aW9uXCIsXG4gICAgXCJzZWF0VHlwZVNlY3Rpb25cIixcbiAgICBcImRlcGFydHVyZVN0YXRpb25TZWN0aW9uXCIsXG4gICAgXCJhcnJpdmFsU3RhdGlvblNlY3Rpb25cIixcbiAgICBcImRlcGFydHVyZVRpbWVDYXJkXCIsXG4gICAgXCJzZWF0VHlwZUNhcmRcIixcbiAgICBcImRlcGFydHVyZVN0YXRpb25DYXJkXCIsXG4gICAgXCJhcnJpdmFsU3RhdGlvbkNhcmRcIixcbiAgICBcImFwcGx5QnV0dG9uXCIsXG4gICAgXCJmaWx0ZXJCYWRnZVwiLFxuICAgIFwic2VsZWN0ZWRUYWdzQ29udGFpbmVyXCIsXG4gICAgXCJzZWxlY3RlZFRhZ3NMaXN0XCIsXG4gICAgXCJzb3J0TW9kYWxcIixcbiAgICBcInNvcnRPcHRpb25cIixcbiAgICBcInRpbWVCdXR0b25cIixcbiAgICBcInByaWNlQnV0dG9uXCJcbiAgXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgb3ZlcmxheVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkZXBhcnR1cmVUaW1lVGFiVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlYXRUeXBlVGFiVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRlcGFydHVyZVN0YXRpb25UYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgYXJyaXZhbFN0YXRpb25UYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVwYXJ0dXJlVGltZVNlY3Rpb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VhdFR5cGVTZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRlcGFydHVyZVN0YXRpb25TZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGFycml2YWxTdGF0aW9uU2VjdGlvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkZXBhcnR1cmVUaW1lQ2FyZFRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBzZWF0VHlwZUNhcmRUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVwYXJ0dXJlU3RhdGlvbkNhcmRUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgYXJyaXZhbFN0YXRpb25DYXJkVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IGFwcGx5QnV0dG9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGZpbHRlckJhZGdlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlbGVjdGVkVGFnc0NvbnRhaW5lclRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzZWxlY3RlZFRhZ3NMaXN0VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNvcnRNb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzb3J0T3B0aW9uVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IHRpbWVCdXR0b25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgcHJpY2VCdXR0b25UYXJnZXQ6IEhUTUxFbGVtZW50XG5cbiAgZGVjbGFyZSByZWFkb25seSBvcmlnaW5WYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVzdGluYXRpb25WYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgcmVhZG9ubHkgZGF0ZVZhbHVlOiBzdHJpbmdcblxuICBzZWxlY3RlZERlcGFydHVyZVRpbWVzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKVxuICBzZWxlY3RlZFNlYXRUeXBlczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KClcbiAgc2VsZWN0ZWREZXBhcnR1cmVTdGF0aW9uczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KClcbiAgc2VsZWN0ZWRBcnJpdmFsU3RhdGlvbnM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpXG4gIGN1cnJlbnRTb3J0RmllbGQ6IHN0cmluZyA9ICdkZWZhdWx0J1xuICBjdXJyZW50U29ydERpcmVjdGlvbjogc3RyaW5nID0gJydcblxuICAvLyBcdTY2MjBcdTVDMDRcdTUxNzNcdTdDRkJcdUZGMUFcdTY4MDdcdThCQzZcdTdCMjYgLT4gXHU2NjNFXHU3OTNBXHU2NTg3XHU1QjU3XG4gIHRpbWVTbG90TGFiZWxzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICAgIG1vcm5pbmc6ICdcdTUxQ0NcdTY2NjggMDA6MDAtMDU6NTknLFxuICAgIG1vcm5pbmcyOiAnXHU0RTBBXHU1MzQ4IDA2OjAwLTExOjU5JyxcbiAgICBhZnRlcm5vb246ICdcdTRFMEJcdTUzNDggMTI6MDAtMTc6NTknLFxuICAgIGV2ZW5pbmc6ICdcdTY2NUFcdTRFMEEgMTg6MDAtMjM6NTknXG4gIH1cblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIFx1OTg3NVx1OTc2Mlx1NTJBMFx1OEY3RFx1NjVGNlx1NEVDRSBVUkwgXHU1M0MyXHU2NTcwXHU2MDYyXHU1OTBEXHU3QjVCXHU5MDA5XHU3MkI2XHU2MDAxXG4gICAgdGhpcy5yZXN0b3JlRmlsdGVyc0Zyb21VcmwoKVxuICAgIHRoaXMucmVzdG9yZVNvcnRGcm9tVXJsKClcbiAgfVxuXG4gIC8vIFx1NEVDRSBVUkwgXHU1M0MyXHU2NTcwXHU2MDYyXHU1OTBEXHU3QjVCXHU5MDA5XHU3MkI2XHU2MDAxXG4gIHJlc3RvcmVGaWx0ZXJzRnJvbVVybCgpOiB2b2lkIHtcbiAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpXG4gICAgXG4gICAgLy8gXHU2MDYyXHU1OTBEXHU1M0QxXHU4RjY2XHU2NUY2XHU2QkI1XG4gICAgY29uc3QgdGltZVNsb3RzID0gdXJsUGFyYW1zLmdldCgndGltZV9zbG90cycpXG4gICAgaWYgKHRpbWVTbG90cykge1xuICAgICAgdGltZVNsb3RzLnNwbGl0KCcsJykuZm9yRWFjaCh0aW1lID0+IHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZERlcGFydHVyZVRpbWVzLmFkZCh0aW1lKVxuICAgICAgICAvLyBcdTYyN0VcdTUyMzBcdTVCRjlcdTVFOTRcdTc2ODRcdTUzNjFcdTcyNDdcdTVFNzZcdTZERkJcdTUyQTBcdTkwMDlcdTRFMkRcdTY4MzdcdTVGMEZcbiAgICAgICAgY29uc3QgdGltZUNhcmQgPSB0aGlzLmRlcGFydHVyZVRpbWVDYXJkVGFyZ2V0cy5maW5kKFxuICAgICAgICAgIGNhcmQgPT4gY2FyZC5kYXRhc2V0LnRpbWUgPT09IHRpbWVcbiAgICAgICAgKVxuICAgICAgICBpZiAodGltZUNhcmQpIHRoaXMuYWRkU2VsZWN0ZWRTdHlsZSh0aW1lQ2FyZClcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIFx1NjA2Mlx1NTkwRFx1NUVBN1x1NEY0RFx1N0M3Qlx1NTc4QlxuICAgIGNvbnN0IHNlYXRUeXBlcyA9IHVybFBhcmFtcy5nZXQoJ3NlYXRfdHlwZXMnKVxuICAgIGlmIChzZWF0VHlwZXMpIHtcbiAgICAgIHNlYXRUeXBlcy5zcGxpdCgnLCcpLmZvckVhY2goc2VhdFR5cGUgPT4ge1xuICAgICAgICB0aGlzLnNlbGVjdGVkU2VhdFR5cGVzLmFkZChzZWF0VHlwZSlcbiAgICAgICAgY29uc3Qgc2VhdENhcmQgPSB0aGlzLnNlYXRUeXBlQ2FyZFRhcmdldHMuZmluZChcbiAgICAgICAgICBjYXJkID0+IGNhcmQuZGF0YXNldC5zZWF0VHlwZSA9PT0gc2VhdFR5cGVcbiAgICAgICAgKVxuICAgICAgICBpZiAoc2VhdENhcmQpIHRoaXMuYWRkU2VsZWN0ZWRTdHlsZShzZWF0Q2FyZClcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIFx1NjA2Mlx1NTkwRFx1NTFGQVx1NTNEMVx1OEY2Nlx1N0FEOVxuICAgIGNvbnN0IGRlcGFydHVyZVN0YXRpb25zID0gdXJsUGFyYW1zLmdldCgnZGVwYXJ0dXJlX3N0YXRpb25zJylcbiAgICBpZiAoZGVwYXJ0dXJlU3RhdGlvbnMpIHtcbiAgICAgIGRlcGFydHVyZVN0YXRpb25zLnNwbGl0KCcsJykuZm9yRWFjaChzdGF0aW9uID0+IHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZERlcGFydHVyZVN0YXRpb25zLmFkZChzdGF0aW9uKVxuICAgICAgICBjb25zdCBkZXBDYXJkID0gdGhpcy5kZXBhcnR1cmVTdGF0aW9uQ2FyZFRhcmdldHMuZmluZChcbiAgICAgICAgICBjYXJkID0+IGNhcmQuZGF0YXNldC5zdGF0aW9uID09PSBzdGF0aW9uXG4gICAgICAgIClcbiAgICAgICAgaWYgKGRlcENhcmQpIHRoaXMuYWRkU2VsZWN0ZWRTdHlsZShkZXBDYXJkKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gXHU2MDYyXHU1OTBEXHU1MjMwXHU4RkJFXHU4RjY2XHU3QUQ5XG4gICAgY29uc3QgYXJyaXZhbFN0YXRpb25zID0gdXJsUGFyYW1zLmdldCgnYXJyaXZhbF9zdGF0aW9ucycpXG4gICAgaWYgKGFycml2YWxTdGF0aW9ucykge1xuICAgICAgYXJyaXZhbFN0YXRpb25zLnNwbGl0KCcsJykuZm9yRWFjaChzdGF0aW9uID0+IHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZEFycml2YWxTdGF0aW9ucy5hZGQoc3RhdGlvbilcbiAgICAgICAgY29uc3QgYXJyQ2FyZCA9IHRoaXMuYXJyaXZhbFN0YXRpb25DYXJkVGFyZ2V0cy5maW5kKFxuICAgICAgICAgIGNhcmQgPT4gY2FyZC5kYXRhc2V0LnN0YXRpb24gPT09IHN0YXRpb25cbiAgICAgICAgKVxuICAgICAgICBpZiAoYXJyQ2FyZCkgdGhpcy5hZGRTZWxlY3RlZFN0eWxlKGFyckNhcmQpXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBcdTY2RjRcdTY1QjBcdTc1NENcdTk3NjJcdTcyQjZcdTYwMDFcbiAgICB0aGlzLnVwZGF0ZUZpbHRlckJhZGdlKClcbiAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkVGFncygpXG4gIH1cblxuICBvcGVuRmlsdGVyKCk6IHZvaWQge1xuICAgIHRoaXMub3ZlcmxheVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gIH1cblxuICBjbG9zZU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMub3ZlcmxheVRhcmdldC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gIH1cblxuICBzZWxlY3RUYWIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHRhYiA9IGJ1dHRvbi5kYXRhc2V0LnRhYlxuXG4gICAgaWYgKCF0YWIpIHJldHVyblxuXG4gICAgLy8gXHU3OUZCXHU5NjY0XHU2MjQwXHU2NzA5dGFiXHU3Njg0XHU5MDA5XHU0RTJEXHU2ODM3XHU1RjBGXG4gICAgY29uc3QgdGFicyA9IFtcbiAgICAgIHRoaXMuZGVwYXJ0dXJlVGltZVRhYlRhcmdldCxcbiAgICAgIHRoaXMuc2VhdFR5cGVUYWJUYXJnZXQsXG4gICAgICB0aGlzLmRlcGFydHVyZVN0YXRpb25UYWJUYXJnZXQsXG4gICAgICB0aGlzLmFycml2YWxTdGF0aW9uVGFiVGFyZ2V0XG4gICAgXVxuICAgIHRhYnMuZm9yRWFjaCgodCkgPT4ge1xuICAgICAgdC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctd2hpdGVcIiwgXCJib3JkZXItWyNGRkQ5MDBdXCIsIFwidGV4dC1ncmF5LTkwMFwiLCBcImZvbnQtbWVkaXVtXCIpXG4gICAgICB0LmNsYXNzTGlzdC5hZGQoXCJ0ZXh0LWdyYXktNjAwXCIpXG4gICAgICB0LmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItbC00XCIpXG4gICAgICB0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItbC0yXCIsIFwiYm9yZGVyLXRyYW5zcGFyZW50XCIpXG4gICAgfSlcblxuICAgIC8vIFx1NkRGQlx1NTJBMFx1NUY1M1x1NTI0RHRhYlx1NzY4NFx1OTAwOVx1NEUyRFx1NjgzN1x1NUYwRlxuICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiYmctd2hpdGVcIiwgXCJib3JkZXItbC00XCIsIFwiYm9yZGVyLVsjRkZEOTAwXVwiLCBcInRleHQtZ3JheS05MDBcIiwgXCJmb250LW1lZGl1bVwiKVxuICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwidGV4dC1ncmF5LTYwMFwiLCBcImJvcmRlci1sLTJcIiwgXCJib3JkZXItdHJhbnNwYXJlbnRcIilcblxuICAgIC8vIFx1OTY5MFx1ODVDRlx1NjI0MFx1NjcwOXNlY3Rpb25cbiAgICBjb25zdCBzZWN0aW9ucyA9IFtcbiAgICAgIHRoaXMuZGVwYXJ0dXJlVGltZVNlY3Rpb25UYXJnZXQsXG4gICAgICB0aGlzLnNlYXRUeXBlU2VjdGlvblRhcmdldCxcbiAgICAgIHRoaXMuZGVwYXJ0dXJlU3RhdGlvblNlY3Rpb25UYXJnZXQsXG4gICAgICB0aGlzLmFycml2YWxTdGF0aW9uU2VjdGlvblRhcmdldFxuICAgIF1cbiAgICBzZWN0aW9ucy5mb3JFYWNoKChzKSA9PiBzLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIikpXG5cbiAgICAvLyBcdTY2M0VcdTc5M0FcdTVCRjlcdTVFOTRcdTc2ODRzZWN0aW9uXG4gICAgY29uc3Qgc2VjdGlvbk1hcDogeyBba2V5OiBzdHJpbmddOiBIVE1MRWxlbWVudCB9ID0ge1xuICAgICAgZGVwYXJ0dXJlVGltZTogdGhpcy5kZXBhcnR1cmVUaW1lU2VjdGlvblRhcmdldCxcbiAgICAgIHNlYXRUeXBlOiB0aGlzLnNlYXRUeXBlU2VjdGlvblRhcmdldCxcbiAgICAgIGRlcGFydHVyZVN0YXRpb246IHRoaXMuZGVwYXJ0dXJlU3RhdGlvblNlY3Rpb25UYXJnZXQsXG4gICAgICBhcnJpdmFsU3RhdGlvbjogdGhpcy5hcnJpdmFsU3RhdGlvblNlY3Rpb25UYXJnZXRcbiAgICB9XG5cbiAgICBjb25zdCB0YXJnZXRTZWN0aW9uID0gc2VjdGlvbk1hcFt0YWJdXG4gICAgaWYgKHRhcmdldFNlY3Rpb24pIHtcbiAgICAgIHRhcmdldFNlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgIH1cbiAgfVxuXG4gIHRvZ2dsZURlcGFydHVyZVRpbWUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCB0aW1lID0gY2FyZC5kYXRhc2V0LnRpbWVcblxuICAgIGlmICghdGltZSkgcmV0dXJuXG5cbiAgICBpZiAodGhpcy5zZWxlY3RlZERlcGFydHVyZVRpbWVzLmhhcyh0aW1lKSkge1xuICAgICAgdGhpcy5zZWxlY3RlZERlcGFydHVyZVRpbWVzLmRlbGV0ZSh0aW1lKVxuICAgICAgdGhpcy5yZW1vdmVTZWxlY3RlZFN0eWxlKGNhcmQpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWREZXBhcnR1cmVUaW1lcy5hZGQodGltZSlcbiAgICAgIHRoaXMuYWRkU2VsZWN0ZWRTdHlsZShjYXJkKVxuICAgIH1cblxuICAgIHRoaXMudXBkYXRlRmlsdGVyQmFkZ2UoKVxuICAgIHRoaXMudXBkYXRlQXBwbHlCdXR0b24oKVxuICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRUYWdzKClcbiAgfVxuXG4gIHRvZ2dsZVNlYXRUeXBlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3Qgc2VhdFR5cGUgPSBjYXJkLmRhdGFzZXQuc2VhdFR5cGVcblxuICAgIGlmICghc2VhdFR5cGUpIHJldHVyblxuXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRTZWF0VHlwZXMuaGFzKHNlYXRUeXBlKSkge1xuICAgICAgdGhpcy5zZWxlY3RlZFNlYXRUeXBlcy5kZWxldGUoc2VhdFR5cGUpXG4gICAgICB0aGlzLnJlbW92ZVNlbGVjdGVkU3R5bGUoY2FyZClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZWxlY3RlZFNlYXRUeXBlcy5hZGQoc2VhdFR5cGUpXG4gICAgICB0aGlzLmFkZFNlbGVjdGVkU3R5bGUoY2FyZClcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZUZpbHRlckJhZGdlKClcbiAgICB0aGlzLnVwZGF0ZUFwcGx5QnV0dG9uKClcbiAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkVGFncygpXG4gIH1cblxuICB0b2dnbGVEZXBhcnR1cmVTdGF0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3Qgc3RhdGlvbiA9IGNhcmQuZGF0YXNldC5zdGF0aW9uXG5cbiAgICBpZiAoIXN0YXRpb24pIHJldHVyblxuXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWREZXBhcnR1cmVTdGF0aW9ucy5oYXMoc3RhdGlvbikpIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWREZXBhcnR1cmVTdGF0aW9ucy5kZWxldGUoc3RhdGlvbilcbiAgICAgIHRoaXMucmVtb3ZlU2VsZWN0ZWRTdHlsZShjYXJkKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlbGVjdGVkRGVwYXJ0dXJlU3RhdGlvbnMuYWRkKHN0YXRpb24pXG4gICAgICB0aGlzLmFkZFNlbGVjdGVkU3R5bGUoY2FyZClcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZUZpbHRlckJhZGdlKClcbiAgICB0aGlzLnVwZGF0ZUFwcGx5QnV0dG9uKClcbiAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkVGFncygpXG4gIH1cblxuICB0b2dnbGVBcnJpdmFsU3RhdGlvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHN0YXRpb24gPSBjYXJkLmRhdGFzZXQuc3RhdGlvblxuXG4gICAgaWYgKCFzdGF0aW9uKSByZXR1cm5cblxuICAgIGlmICh0aGlzLnNlbGVjdGVkQXJyaXZhbFN0YXRpb25zLmhhcyhzdGF0aW9uKSkge1xuICAgICAgdGhpcy5zZWxlY3RlZEFycml2YWxTdGF0aW9ucy5kZWxldGUoc3RhdGlvbilcbiAgICAgIHRoaXMucmVtb3ZlU2VsZWN0ZWRTdHlsZShjYXJkKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlbGVjdGVkQXJyaXZhbFN0YXRpb25zLmFkZChzdGF0aW9uKVxuICAgICAgdGhpcy5hZGRTZWxlY3RlZFN0eWxlKGNhcmQpXG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVGaWx0ZXJCYWRnZSgpXG4gICAgdGhpcy51cGRhdGVBcHBseUJ1dHRvbigpXG4gICAgdGhpcy51cGRhdGVTZWxlY3RlZFRhZ3MoKVxuICB9XG5cbiAgYWRkU2VsZWN0ZWRTdHlsZShjYXJkOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIC8vIFx1NkRGQlx1NTJBMFx1OUVDNFx1ODI3Mlx1ODBDQ1x1NjY2RlxuICAgIGNhcmQuY2xhc3NMaXN0LnJlbW92ZShcImJnLVsjRjdGOEZBXVwiKVxuICAgIGNhcmQuY2xhc3NMaXN0LmFkZChcImJnLVsjRkZEOTAwXVwiKVxuICAgIFxuICAgIC8vIFx1NkRGQlx1NTJBMFx1NUJGOVx1NTJGRVx1NTZGRVx1NjgwN1x1RkYwOFx1NTk4Mlx1Njc5Q1x1NEUwRFx1NUI1OFx1NTcyOFx1RkYwOVxuICAgIGlmICghY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbWFyay1pY29uXCIpKSB7XG4gICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLmNyZWF0ZUNoZWNrbWFyaygpXG4gICAgICBjYXJkLmFwcGVuZENoaWxkKGNoZWNrbWFyaylcbiAgICB9XG4gIH1cblxuICByZW1vdmVTZWxlY3RlZFN0eWxlKGNhcmQ6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgLy8gXHU3OUZCXHU5NjY0XHU5RUM0XHU4MjcyXHU4MENDXHU2NjZGXG4gICAgY2FyZC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNGRkQ5MDBdXCIpXG4gICAgY2FyZC5jbGFzc0xpc3QuYWRkKFwiYmctWyNGN0Y4RkFdXCIpXG4gICAgXG4gICAgLy8gXHU3OUZCXHU5NjY0XHU1QkY5XHU1MkZFXHU1NkZFXHU2ODA3XG4gICAgY29uc3QgY2hlY2ttYXJrID0gY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbWFyay1pY29uXCIpXG4gICAgaWYgKGNoZWNrbWFyaykge1xuICAgICAgY2hlY2ttYXJrLnJlbW92ZSgpXG4gICAgfVxuICB9XG5cbiAgY3JlYXRlQ2hlY2ttYXJrKCk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBjaGVja21hcmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXG4gICAgY2hlY2ttYXJrLmNsYXNzTmFtZSA9IFwiY2hlY2ttYXJrLWljb24gYWJzb2x1dGUgdG9wLTIgcmlnaHQtMlwiXG4gICAgY2hlY2ttYXJrLmlubmVySFRNTCA9IGBcbiAgICAgIDxzdmcgY2xhc3M9XCJ3LTUgaC01IHRleHQtZ3JheS05MDBcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyMCAyMFwiPlxuICAgICAgICA8cGF0aCBmaWxsLXJ1bGU9XCJldmVub2RkXCIgZD1cIk0xNi43MDcgNS4yOTNhMSAxIDAgMDEwIDEuNDE0bC04IDhhMSAxIDAgMDEtMS40MTQgMGwtNC00YTEgMSAwIDAxMS40MTQtMS40MTRMOCAxMi41ODZsNy4yOTMtNy4yOTNhMSAxIDAgMDExLjQxNCAwelwiIGNsaXAtcnVsZT1cImV2ZW5vZGRcIj48L3BhdGg+XG4gICAgICA8L3N2Zz5cbiAgICBgXG4gICAgcmV0dXJuIGNoZWNrbWFya1xuICB9XG5cbiAgdXBkYXRlRmlsdGVyQmFkZ2UoKTogdm9pZCB7XG4gICAgY29uc3QgdG90YWxGaWx0ZXJzID0gXG4gICAgICB0aGlzLnNlbGVjdGVkRGVwYXJ0dXJlVGltZXMuc2l6ZSArXG4gICAgICB0aGlzLnNlbGVjdGVkU2VhdFR5cGVzLnNpemUgK1xuICAgICAgdGhpcy5zZWxlY3RlZERlcGFydHVyZVN0YXRpb25zLnNpemUgK1xuICAgICAgdGhpcy5zZWxlY3RlZEFycml2YWxTdGF0aW9ucy5zaXplXG5cbiAgICBpZiAodG90YWxGaWx0ZXJzID4gMCkge1xuICAgICAgdGhpcy5maWx0ZXJCYWRnZVRhcmdldC50ZXh0Q29udGVudCA9IHRvdGFsRmlsdGVycy50b1N0cmluZygpXG4gICAgICB0aGlzLmZpbHRlckJhZGdlVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5maWx0ZXJCYWRnZVRhcmdldC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgfVxuICB9XG5cbiAgdXBkYXRlQXBwbHlCdXR0b24oKTogdm9pZCB7XG4gICAgLy8gXHU1QjlFXHU2NUY2XHU4QkExXHU3Qjk3XHU3QjVCXHU5MDA5XHU3RUQzXHU2NzlDXHU2NTcwXHU5MUNGXG4gICAgdGhpcy5mZXRjaEZpbHRlcmVkQ291bnQoKVxuICB9XG5cbiAgcmVzZXRGaWx0ZXJzKCk6IHZvaWQge1xuICAgIC8vIFx1NkUwNVx1N0E3QVx1NjI0MFx1NjcwOVx1OTAwOVx1NEUyRFxuICAgIHRoaXMuc2VsZWN0ZWREZXBhcnR1cmVUaW1lcy5jbGVhcigpXG4gICAgdGhpcy5zZWxlY3RlZFNlYXRUeXBlcy5jbGVhcigpXG4gICAgdGhpcy5zZWxlY3RlZERlcGFydHVyZVN0YXRpb25zLmNsZWFyKClcbiAgICB0aGlzLnNlbGVjdGVkQXJyaXZhbFN0YXRpb25zLmNsZWFyKClcblxuICAgIC8vIFx1NzlGQlx1OTY2NFx1NjI0MFx1NjcwOVx1NTM2MVx1NzI0N1x1NzY4NFx1OTAwOVx1NEUyRFx1NjgzN1x1NUYwRlxuICAgIGNvbnN0IGFsbENhcmRzID0gW1xuICAgICAgLi4udGhpcy5kZXBhcnR1cmVUaW1lQ2FyZFRhcmdldHMsXG4gICAgICAuLi50aGlzLnNlYXRUeXBlQ2FyZFRhcmdldHMsXG4gICAgICAuLi50aGlzLmRlcGFydHVyZVN0YXRpb25DYXJkVGFyZ2V0cyxcbiAgICAgIC4uLnRoaXMuYXJyaXZhbFN0YXRpb25DYXJkVGFyZ2V0c1xuICAgIF1cblxuICAgIGFsbENhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgIHRoaXMucmVtb3ZlU2VsZWN0ZWRTdHlsZShjYXJkKVxuICAgIH0pXG5cbiAgICAvLyBcdTY2RjRcdTY1QjBcdTg5RDJcdTY4MDdcdTU0OENcdTYzMDlcdTk0QUVcbiAgICB0aGlzLnVwZGF0ZUZpbHRlckJhZGdlKClcbiAgICB0aGlzLnVwZGF0ZUFwcGx5QnV0dG9uKClcbiAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkVGFncygpXG4gIH1cblxuICBhcHBseUZpbHRlcnMoKTogdm9pZCB7XG4gICAgLy8gXHU2Nzg0XHU1RUZBXHU3QjVCXHU5MDA5XHU1M0MyXHU2NTcwXG4gICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpXG4gICAgcGFyYW1zLnNldCgnb3JpZ2luJywgdGhpcy5vcmlnaW5WYWx1ZSlcbiAgICBwYXJhbXMuc2V0KCdkZXN0aW5hdGlvbicsIHRoaXMuZGVzdGluYXRpb25WYWx1ZSlcbiAgICBwYXJhbXMuc2V0KCdkYXRlJywgdGhpcy5kYXRlVmFsdWUpXG4gICAgXG4gICAgLy8gXHU2REZCXHU1MkEwXHU3QjVCXHU5MDA5XHU2NzYxXHU0RUY2XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWREZXBhcnR1cmVUaW1lcy5zaXplID4gMCkge1xuICAgICAgcGFyYW1zLnNldCgndGltZV9zbG90cycsIEFycmF5LmZyb20odGhpcy5zZWxlY3RlZERlcGFydHVyZVRpbWVzKS5qb2luKCcsJykpXG4gICAgfVxuICAgIGlmICh0aGlzLnNlbGVjdGVkU2VhdFR5cGVzLnNpemUgPiAwKSB7XG4gICAgICBwYXJhbXMuc2V0KCdzZWF0X3R5cGVzJywgQXJyYXkuZnJvbSh0aGlzLnNlbGVjdGVkU2VhdFR5cGVzKS5qb2luKCcsJykpXG4gICAgfVxuICAgIGlmICh0aGlzLnNlbGVjdGVkRGVwYXJ0dXJlU3RhdGlvbnMuc2l6ZSA+IDApIHtcbiAgICAgIHBhcmFtcy5zZXQoJ2RlcGFydHVyZV9zdGF0aW9ucycsIEFycmF5LmZyb20odGhpcy5zZWxlY3RlZERlcGFydHVyZVN0YXRpb25zKS5qb2luKCcsJykpXG4gICAgfVxuICAgIGlmICh0aGlzLnNlbGVjdGVkQXJyaXZhbFN0YXRpb25zLnNpemUgPiAwKSB7XG4gICAgICBwYXJhbXMuc2V0KCdhcnJpdmFsX3N0YXRpb25zJywgQXJyYXkuZnJvbSh0aGlzLnNlbGVjdGVkQXJyaXZhbFN0YXRpb25zKS5qb2luKCcsJykpXG4gICAgfVxuICAgIFxuICAgIC8vIFx1NTE3M1x1OTVFRFx1NUYzOVx1N0E5N1xuICAgIHRoaXMuY2xvc2VNb2RhbCgpXG4gICAgXG4gICAgLy8gXHU0RjdGXHU3NTI4VHVyYm8udmlzaXRcdTUyMzdcdTY1QjBcdTk4NzVcdTk3NjJcbiAgICBUdXJiby52aXNpdChgL2J1c190aWNrZXRzL3NlYXJjaD8ke3BhcmFtcy50b1N0cmluZygpfWApXG4gIH1cblxuICAvLyBcdTY2RjRcdTY1QjBcdTVERjJcdTkwMDlcdTdCNUJcdTkwMDlcdTk4NzlcdTY4MDdcdTdCN0VcdTY2M0VcdTc5M0FcbiAgdXBkYXRlU2VsZWN0ZWRUYWdzKCk6IHZvaWQge1xuICAgIGNvbnN0IHRhZ3M6IEFycmF5PHt0eXBlOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIGxhYmVsOiBzdHJpbmd9PiA9IFtdXG5cbiAgICAvLyBcdTUzRDFcdThGNjZcdTY1RjZcdTZCQjVcbiAgICB0aGlzLnNlbGVjdGVkRGVwYXJ0dXJlVGltZXMuZm9yRWFjaCh0aW1lID0+IHtcbiAgICAgIHRhZ3MucHVzaCh7XG4gICAgICAgIHR5cGU6ICdkZXBhcnR1cmVUaW1lJyxcbiAgICAgICAgdmFsdWU6IHRpbWUsXG4gICAgICAgIGxhYmVsOiB0aGlzLnRpbWVTbG90TGFiZWxzW3RpbWVdIHx8IHRpbWVcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIC8vIFx1OEY2Nlx1NTc4QlxuICAgIHRoaXMuc2VsZWN0ZWRTZWF0VHlwZXMuZm9yRWFjaChzZWF0VHlwZSA9PiB7XG4gICAgICB0YWdzLnB1c2goe1xuICAgICAgICB0eXBlOiAnc2VhdFR5cGUnLFxuICAgICAgICB2YWx1ZTogc2VhdFR5cGUsXG4gICAgICAgIGxhYmVsOiBzZWF0VHlwZVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgLy8gXHU1MUZBXHU1M0QxXHU4RjY2XHU3QUQ5XG4gICAgdGhpcy5zZWxlY3RlZERlcGFydHVyZVN0YXRpb25zLmZvckVhY2goc3RhdGlvbiA9PiB7XG4gICAgICB0YWdzLnB1c2goe1xuICAgICAgICB0eXBlOiAnZGVwYXJ0dXJlU3RhdGlvbicsXG4gICAgICAgIHZhbHVlOiBzdGF0aW9uLFxuICAgICAgICBsYWJlbDogc3RhdGlvblxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgLy8gXHU1MjMwXHU4RkJFXHU4RjY2XHU3QUQ5XG4gICAgdGhpcy5zZWxlY3RlZEFycml2YWxTdGF0aW9ucy5mb3JFYWNoKHN0YXRpb24gPT4ge1xuICAgICAgdGFncy5wdXNoKHtcbiAgICAgICAgdHlwZTogJ2Fycml2YWxTdGF0aW9uJyxcbiAgICAgICAgdmFsdWU6IHN0YXRpb24sXG4gICAgICAgIGxhYmVsOiBzdGF0aW9uXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICAvLyBcdTZFMDVcdTdBN0FcdTY4MDdcdTdCN0VcdTUyMTdcdTg4NjhcbiAgICB0aGlzLnNlbGVjdGVkVGFnc0xpc3RUYXJnZXQuaW5uZXJIVE1MID0gJydcblxuICAgIGlmICh0YWdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gXHU5NjkwXHU4NUNGXHU1QkI5XHU1NjY4XG4gICAgICB0aGlzLnNlbGVjdGVkVGFnc0NvbnRhaW5lclRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBcdTY2M0VcdTc5M0FcdTVCQjlcdTU2NjhcbiAgICAgIHRoaXMuc2VsZWN0ZWRUYWdzQ29udGFpbmVyVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG5cbiAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NkJDRlx1NEUyQVx1NjgwN1x1N0I3RVxuICAgICAgdGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgIGNvbnN0IHRhZ0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICB0YWdFbGVtZW50LmNsYXNzTmFtZSA9ICdiZy1bI0ZGRDkwMF0gdGV4dC1ncmF5LTkwMCB0ZXh0LVsxM3B4XSBweC0zIHB5LTEgcm91bmRlZC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGdhcC0xJ1xuICAgICAgICB0YWdFbGVtZW50LmlubmVySFRNTCA9IGBcbiAgICAgICAgICA8c3Bhbj4ke3RhZy5sYWJlbH08L3NwYW4+XG4gICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgXG4gICAgICAgICAgICBkYXRhLWFjdGlvbj1cImNsaWNrLT5idXMtdGlja2V0LXNlYXJjaCNyZW1vdmVUYWdcIlxuICAgICAgICAgICAgZGF0YS10YWctdHlwZT1cIiR7dGFnLnR5cGV9XCJcbiAgICAgICAgICAgIGRhdGEtdGFnLXZhbHVlPVwiJHt0YWcudmFsdWV9XCJcbiAgICAgICAgICAgIGNsYXNzPVwidGV4dC1ncmF5LTkwMCBob3Zlcjp0ZXh0LWdyYXktNzAwIGZvbnQtYm9sZFwiPlxuICAgICAgICAgICAgXHUyNzE1XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIGBcbiAgICAgICAgdGhpcy5zZWxlY3RlZFRhZ3NMaXN0VGFyZ2V0LmFwcGVuZENoaWxkKHRhZ0VsZW1lbnQpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1NzlGQlx1OTY2NFx1NTM1NVx1NEUyQVx1NjgwN1x1N0I3RVxuICByZW1vdmVUYWcoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHRhZ1R5cGUgPSBidXR0b24uZGF0YXNldC50YWdUeXBlXG4gICAgY29uc3QgdGFnVmFsdWUgPSBidXR0b24uZGF0YXNldC50YWdWYWx1ZVxuXG4gICAgaWYgKCF0YWdUeXBlIHx8ICF0YWdWYWx1ZSkgcmV0dXJuXG5cbiAgICAvLyBcdTY4MzlcdTYzNkVcdTdDN0JcdTU3OEJcdTc5RkJcdTk2NjRcdTVCRjlcdTVFOTRcdTc2ODRcdTkwMDlcdTRFMkRcdTk4NzlcbiAgICBzd2l0Y2ggKHRhZ1R5cGUpIHtcbiAgICAgIGNhc2UgJ2RlcGFydHVyZVRpbWUnOiB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWREZXBhcnR1cmVUaW1lcy5kZWxldGUodGFnVmFsdWUpXG4gICAgICAgIC8vIFx1NzlGQlx1OTY2NFx1NUJGOVx1NUU5NFx1NTM2MVx1NzI0N1x1NzY4NFx1OTAwOVx1NEUyRFx1NjgzN1x1NUYwRlxuICAgICAgICBjb25zdCB0aW1lQ2FyZCA9IHRoaXMuZGVwYXJ0dXJlVGltZUNhcmRUYXJnZXRzLmZpbmQoXG4gICAgICAgICAgY2FyZCA9PiBjYXJkLmRhdGFzZXQudGltZSA9PT0gdGFnVmFsdWVcbiAgICAgICAgKVxuICAgICAgICBpZiAodGltZUNhcmQpIHRoaXMucmVtb3ZlU2VsZWN0ZWRTdHlsZSh0aW1lQ2FyZClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnc2VhdFR5cGUnOiB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRTZWF0VHlwZXMuZGVsZXRlKHRhZ1ZhbHVlKVxuICAgICAgICBjb25zdCBzZWF0Q2FyZCA9IHRoaXMuc2VhdFR5cGVDYXJkVGFyZ2V0cy5maW5kKFxuICAgICAgICAgIGNhcmQgPT4gY2FyZC5kYXRhc2V0LnNlYXRUeXBlID09PSB0YWdWYWx1ZVxuICAgICAgICApXG4gICAgICAgIGlmIChzZWF0Q2FyZCkgdGhpcy5yZW1vdmVTZWxlY3RlZFN0eWxlKHNlYXRDYXJkKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdkZXBhcnR1cmVTdGF0aW9uJzoge1xuICAgICAgICB0aGlzLnNlbGVjdGVkRGVwYXJ0dXJlU3RhdGlvbnMuZGVsZXRlKHRhZ1ZhbHVlKVxuICAgICAgICBjb25zdCBkZXBDYXJkID0gdGhpcy5kZXBhcnR1cmVTdGF0aW9uQ2FyZFRhcmdldHMuZmluZChcbiAgICAgICAgICBjYXJkID0+IGNhcmQuZGF0YXNldC5zdGF0aW9uID09PSB0YWdWYWx1ZVxuICAgICAgICApXG4gICAgICAgIGlmIChkZXBDYXJkKSB0aGlzLnJlbW92ZVNlbGVjdGVkU3R5bGUoZGVwQ2FyZClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnYXJyaXZhbFN0YXRpb24nOiB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRBcnJpdmFsU3RhdGlvbnMuZGVsZXRlKHRhZ1ZhbHVlKVxuICAgICAgICBjb25zdCBhcnJDYXJkID0gdGhpcy5hcnJpdmFsU3RhdGlvbkNhcmRUYXJnZXRzLmZpbmQoXG4gICAgICAgICAgY2FyZCA9PiBjYXJkLmRhdGFzZXQuc3RhdGlvbiA9PT0gdGFnVmFsdWVcbiAgICAgICAgKVxuICAgICAgICBpZiAoYXJyQ2FyZCkgdGhpcy5yZW1vdmVTZWxlY3RlZFN0eWxlKGFyckNhcmQpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHU2NkY0XHU2NUIwXHU3NTRDXHU5NzYyXG4gICAgdGhpcy51cGRhdGVGaWx0ZXJCYWRnZSgpXG4gICAgdGhpcy51cGRhdGVBcHBseUJ1dHRvbigpXG4gICAgdGhpcy51cGRhdGVTZWxlY3RlZFRhZ3MoKVxuICB9XG5cbiAgLy8gXHU1QjlFXHU2NUY2XHU4M0I3XHU1M0Q2XHU3QjVCXHU5MDA5XHU3RUQzXHU2NzlDXHU2NTcwXHU5MUNGXG4gIGFzeW5jIGZldGNoRmlsdGVyZWRDb3VudCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gXHU2Nzg0XHU1RUZBXHU2N0U1XHU4QkUyXHU1M0MyXHU2NTcwXG4gICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKClcbiAgICAgIHBhcmFtcy5zZXQoJ29yaWdpbicsIHRoaXMub3JpZ2luVmFsdWUpXG4gICAgICBwYXJhbXMuc2V0KCdkZXN0aW5hdGlvbicsIHRoaXMuZGVzdGluYXRpb25WYWx1ZSlcbiAgICAgIHBhcmFtcy5zZXQoJ2RhdGUnLCB0aGlzLmRhdGVWYWx1ZSlcbiAgICAgIFxuICAgICAgLy8gXHU2REZCXHU1MkEwXHU3QjVCXHU5MDA5XHU2NzYxXHU0RUY2XG4gICAgICBpZiAodGhpcy5zZWxlY3RlZERlcGFydHVyZVRpbWVzLnNpemUgPiAwKSB7XG4gICAgICAgIHBhcmFtcy5zZXQoJ3RpbWVfc2xvdHMnLCBBcnJheS5mcm9tKHRoaXMuc2VsZWN0ZWREZXBhcnR1cmVUaW1lcykuam9pbignLCcpKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTZWF0VHlwZXMuc2l6ZSA+IDApIHtcbiAgICAgICAgcGFyYW1zLnNldCgnc2VhdF90eXBlcycsIEFycmF5LmZyb20odGhpcy5zZWxlY3RlZFNlYXRUeXBlcykuam9pbignLCcpKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWREZXBhcnR1cmVTdGF0aW9ucy5zaXplID4gMCkge1xuICAgICAgICBwYXJhbXMuc2V0KCdkZXBhcnR1cmVfc3RhdGlvbnMnLCBBcnJheS5mcm9tKHRoaXMuc2VsZWN0ZWREZXBhcnR1cmVTdGF0aW9ucykuam9pbignLCcpKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRBcnJpdmFsU3RhdGlvbnMuc2l6ZSA+IDApIHtcbiAgICAgICAgcGFyYW1zLnNldCgnYXJyaXZhbF9zdGF0aW9ucycsIEFycmF5LmZyb20odGhpcy5zZWxlY3RlZEFycml2YWxTdGF0aW9ucykuam9pbignLCcpKVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBcdTUzRDFcdThENzdBSkFYXHU4QkY3XHU2QzQyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYnVzX3RpY2tldHMvY291bnRfZmlsdGVyZWRfcmVzdWx0cz8ke3BhcmFtcy50b1N0cmluZygpfWApXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgICBcbiAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NjMwOVx1OTRBRVx1NjU4N1x1NUI1N1xuICAgICAgdGhpcy5hcHBseUJ1dHRvblRhcmdldC50ZXh0Q29udGVudCA9IGBcdTY3RTVcdTc3MEIke2RhdGEuY291bnR9XHU2NzYxXHU3RUQzXHU2NzlDYFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTgzQjdcdTUzRDZcdTdCNUJcdTkwMDlcdTdFRDNcdTY3OUNcdTY1NzBcdTkxQ0ZcdTU5MzFcdThEMjU6JywgZXJyb3IpXG4gICAgICAvLyBcdTk1MTlcdThCRUZcdTY1RjZcdTY2M0VcdTc5M0FcdTlFRDhcdThCQTRcdTY1ODdcdTVCNTdcbiAgICAgIHRoaXMuYXBwbHlCdXR0b25UYXJnZXQudGV4dENvbnRlbnQgPSAnXHU2N0U1XHU3NzBCXHU3RUQzXHU2NzlDJ1xuICAgIH1cbiAgfVxuXG4gIC8vID09PT09IFx1NjM5Mlx1NUU4Rlx1NTI5Rlx1ODBGRCA9PT09PVxuXG4gIC8vIFx1NEVDRSBVUkwgXHU1M0MyXHU2NTcwXHU2MDYyXHU1OTBEXHU2MzkyXHU1RThGXHU3MkI2XHU2MDAxXG4gIHJlc3RvcmVTb3J0RnJvbVVybCgpOiB2b2lkIHtcbiAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpXG4gICAgY29uc3Qgc29ydEJ5ID0gdXJsUGFyYW1zLmdldCgnc29ydF9ieScpXG4gICAgY29uc3Qgc29ydERpcmVjdGlvbiA9IHVybFBhcmFtcy5nZXQoJ3NvcnRfZGlyZWN0aW9uJylcblxuICAgIGlmIChzb3J0QnkpIHtcbiAgICAgIHRoaXMuY3VycmVudFNvcnRGaWVsZCA9IHNvcnRCeVxuICAgICAgdGhpcy5jdXJyZW50U29ydERpcmVjdGlvbiA9IHNvcnREaXJlY3Rpb24gfHwgJydcbiAgICAgIHRoaXMudXBkYXRlU29ydEJ1dHRvbnNEaXNwbGF5KClcbiAgICB9XG4gIH1cblxuICAvLyBcdTYyNTNcdTVGMDBcdTYzOTJcdTVFOEZcdTVGMzlcdTdBOTdcbiAgb3BlblNvcnRNb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLnNvcnRNb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIC8vIFx1OUFEOFx1NEVBRVx1NUY1M1x1NTI0RFx1OTAwOVx1NEUyRFx1NzY4NFx1NjM5Mlx1NUU4Rlx1OTAwOVx1OTg3OVxuICAgIHRoaXMuaGlnaGxpZ2h0Q3VycmVudFNvcnQoKVxuICB9XG5cbiAgLy8gXHU1MTczXHU5NUVEXHU2MzkyXHU1RThGXHU1RjM5XHU3QTk3XG4gIGNsb3NlU29ydE1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMuc29ydE1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gIH1cblxuICAvLyBcdTk2M0JcdTZCNjJcdTRFOEJcdTRFRjZcdTUxOTJcdTZDRTFcbiAgc3RvcFByb3BhZ2F0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gIH1cblxuICAvLyBcdTkwMDlcdTYyRTlcdTYzOTJcdTVFOEZcdTkwMDlcdTk4NzlcbiAgc2VsZWN0U29ydChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3Qgc29ydEZpZWxkID0gYnV0dG9uLmRhdGFzZXQuc29ydEZpZWxkXG4gICAgY29uc3Qgc29ydERpcmVjdGlvbiA9IGJ1dHRvbi5kYXRhc2V0LnNvcnREaXJlY3Rpb25cblxuICAgIGlmICghc29ydEZpZWxkKSByZXR1cm5cblxuICAgIC8vIFx1NTNENlx1NkQ4OFx1NjI0MFx1NjcwOVx1OTAwOVx1OTg3OVx1NzY4NFx1OUFEOFx1NEVBRVxuICAgIHRoaXMuc29ydE9wdGlvblRhcmdldHMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgb3B0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLVsjRkZEOTAwXScsICdib3JkZXItMicsICdib3JkZXItWyNGRjZBMDBdJylcbiAgICAgIG9wdGlvbi5jbGFzc0xpc3QuYWRkKCdiZy1bI0Y3RjhGQV0nKVxuICAgIH0pXG5cbiAgICAvLyBcdTlBRDhcdTRFQUVcdTVGNTNcdTUyNERcdTkwMDlcdTk4NzlcbiAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYmctWyNGN0Y4RkFdJylcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYmctWyNGRkQ5MDBdJywgJ2JvcmRlci0yJywgJ2JvcmRlci1bI0ZGNkEwMF0nKVxuXG4gICAgLy8gXHU0RkREXHU1QjU4XHU1RjUzXHU1MjREXHU5MDA5XHU2MkU5XG4gICAgdGhpcy5jdXJyZW50U29ydEZpZWxkID0gc29ydEZpZWxkXG4gICAgdGhpcy5jdXJyZW50U29ydERpcmVjdGlvbiA9IHNvcnREaXJlY3Rpb24gfHwgJydcbiAgfVxuXG4gIC8vIFx1NUU5NFx1NzUyOFx1NjM5Mlx1NUU4Rlx1NUU3Nlx1NTE3M1x1OTVFRFx1NUYzOVx1N0E5N1xuICBhcHBseVNvcnRBbmRDbG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLmNsb3NlU29ydE1vZGFsKClcbiAgICB0aGlzLmFwcGx5U29ydCgpXG4gIH1cblxuICAvLyBcdTVFOTRcdTc1MjhcdTYzOTJcdTVFOEZcbiAgYXBwbHlTb3J0KCk6IHZvaWQge1xuICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaClcblxuICAgIC8vIFx1NzlGQlx1OTY2NFx1NjVFN1x1NzY4NFx1NjM5Mlx1NUU4Rlx1NTNDMlx1NjU3MFxuICAgIHBhcmFtcy5kZWxldGUoJ3NvcnRfYnknKVxuICAgIHBhcmFtcy5kZWxldGUoJ3NvcnRfZGlyZWN0aW9uJylcblxuICAgIC8vIFx1NkRGQlx1NTJBMFx1NjVCMFx1NzY4NFx1NjM5Mlx1NUU4Rlx1NTNDMlx1NjU3MFx1RkYwOFx1NTk4Mlx1Njc5Q1x1NEUwRFx1NjYyRlx1OUVEOFx1OEJBNFx1NjM5Mlx1NUU4Rlx1RkYwOVxuICAgIGlmICh0aGlzLmN1cnJlbnRTb3J0RmllbGQgIT09ICdkZWZhdWx0Jykge1xuICAgICAgcGFyYW1zLnNldCgnc29ydF9ieScsIHRoaXMuY3VycmVudFNvcnRGaWVsZClcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRTb3J0RGlyZWN0aW9uKSB7XG4gICAgICAgIHBhcmFtcy5zZXQoJ3NvcnRfZGlyZWN0aW9uJywgdGhpcy5jdXJyZW50U29ydERpcmVjdGlvbilcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdTY2RjRcdTY1QjBcdTYzMDlcdTk0QUVcdTY2M0VcdTc5M0FcbiAgICB0aGlzLnVwZGF0ZVNvcnRCdXR0b25zRGlzcGxheSgpXG5cbiAgICAvLyBcdTRGN0ZcdTc1MjggVHVyYm8gXHU1MjM3XHU2NUIwXHU5ODc1XHU5NzYyXG4gICAgVHVyYm8udmlzaXQoYC9idXNfdGlja2V0cy9zZWFyY2g/JHtwYXJhbXMudG9TdHJpbmcoKX1gKVxuICB9XG5cbiAgLy8gXHU5QUQ4XHU0RUFFXHU1RjUzXHU1MjREXHU2MzkyXHU1RThGXHU5MDA5XHU5ODc5XG4gIGhpZ2hsaWdodEN1cnJlbnRTb3J0KCk6IHZvaWQge1xuICAgIHRoaXMuc29ydE9wdGlvblRhcmdldHMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgY29uc3Qgc29ydEZpZWxkID0gb3B0aW9uLmRhdGFzZXQuc29ydEZpZWxkXG4gICAgICBjb25zdCBzb3J0RGlyZWN0aW9uID0gb3B0aW9uLmRhdGFzZXQuc29ydERpcmVjdGlvbiB8fCAnJ1xuXG4gICAgICBpZiAoc29ydEZpZWxkID09PSB0aGlzLmN1cnJlbnRTb3J0RmllbGQgJiYgc29ydERpcmVjdGlvbiA9PT0gdGhpcy5jdXJyZW50U29ydERpcmVjdGlvbikge1xuICAgICAgICBvcHRpb24uY2xhc3NMaXN0LnJlbW92ZSgnYmctWyNGN0Y4RkFdJylcbiAgICAgICAgb3B0aW9uLmNsYXNzTGlzdC5hZGQoJ2JnLVsjRkZEOTAwXScsICdib3JkZXItMicsICdib3JkZXItWyNGRjZBMDBdJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1bI0ZGRDkwMF0nLCAnYm9yZGVyLTInLCAnYm9yZGVyLVsjRkY2QTAwXScpXG4gICAgICAgIG9wdGlvbi5jbGFzc0xpc3QuYWRkKCdiZy1bI0Y3RjhGQV0nKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyBcdTY2RjRcdTY1QjBcdTVFOTVcdTkwRThcdTYzOTJcdTVFOEZcdTYzMDlcdTk0QUVcdTY2M0VcdTc5M0FcbiAgdXBkYXRlU29ydEJ1dHRvbnNEaXNwbGF5KCk6IHZvaWQge1xuICAgIC8vIFx1OTFDRFx1N0Y2RVx1NjI0MFx1NjcwOVx1NjMwOVx1OTRBRVx1NjgzN1x1NUYwRlxuICAgIGlmICh0aGlzLnRpbWVCdXR0b25UYXJnZXQpIHtcbiAgICAgIHRoaXMucmVzZXRCdXR0b25TdHlsZSh0aGlzLnRpbWVCdXR0b25UYXJnZXQpXG4gICAgfVxuICAgIGlmICh0aGlzLnByaWNlQnV0dG9uVGFyZ2V0KSB7XG4gICAgICB0aGlzLnJlc2V0QnV0dG9uU3R5bGUodGhpcy5wcmljZUJ1dHRvblRhcmdldClcbiAgICB9XG5cbiAgICAvLyBcdTY4MzlcdTYzNkVcdTVGNTNcdTUyNERcdTYzOTJcdTVFOEZcdTlBRDhcdTRFQUVcdTVCRjlcdTVFOTRcdTYzMDlcdTk0QUVcbiAgICBpZiAodGhpcy5jdXJyZW50U29ydEZpZWxkID09PSAndGltZScgJiYgdGhpcy50aW1lQnV0dG9uVGFyZ2V0KSB7XG4gICAgICB0aGlzLmhpZ2hsaWdodEJ1dHRvbih0aGlzLnRpbWVCdXR0b25UYXJnZXQsIHRoaXMuY3VycmVudFNvcnREaXJlY3Rpb24gPT09ICdhc2MnID8gJ1x1NjVFOVx1MjE5Mlx1NjY1QScgOiAnXHU2NjVBXHUyMTkyXHU2NUU5JylcbiAgICB9IGVsc2UgaWYgKHRoaXMuY3VycmVudFNvcnRGaWVsZCA9PT0gJ3ByaWNlJyAmJiB0aGlzLnByaWNlQnV0dG9uVGFyZ2V0KSB7XG4gICAgICB0aGlzLmhpZ2hsaWdodEJ1dHRvbih0aGlzLnByaWNlQnV0dG9uVGFyZ2V0LCB0aGlzLmN1cnJlbnRTb3J0RGlyZWN0aW9uID09PSAnYXNjJyA/ICdcdTRGNEVcdTIxOTJcdTlBRDgnIDogJ1x1OUFEOFx1MjE5Mlx1NEY0RScpXG4gICAgfVxuICB9XG5cbiAgLy8gXHU5MUNEXHU3RjZFXHU2MzA5XHU5NEFFXHU2ODM3XHU1RjBGXG4gIHJlc2V0QnV0dG9uU3R5bGUoYnV0dG9uOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIGNvbnN0IGljb24gPSBidXR0b24ucXVlcnlTZWxlY3RvcignLnctNi5oLTYnKVxuICAgIGNvbnN0IHRleHQgPSBidXR0b24ucXVlcnlTZWxlY3RvcignLnRleHQtXFxcXFsxMXB4XFxcXF0nKVxuICAgIFxuICAgIGlmIChpY29uKSB7XG4gICAgICBpY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLVsjRkZEOTAwXScsICdib3JkZXItWyNGRjZBMDBdJylcbiAgICAgIGljb24uY2xhc3NMaXN0LmFkZCgnYm9yZGVyLWdyYXktNjAwJylcbiAgICB9XG4gICAgXG4gICAgaWYgKHRleHQpIHtcbiAgICAgIHRleHQuY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1bI0ZGNkEwMF0nLCAnZm9udC1zZW1pYm9sZCcpXG4gICAgICB0ZXh0LmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS03MDAnKVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1OUFEOFx1NEVBRVx1NjMwOVx1OTRBRVxuICBoaWdobGlnaHRCdXR0b24oYnV0dG9uOiBIVE1MRWxlbWVudCwgbGFiZWw6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IGljb24gPSBidXR0b24ucXVlcnlTZWxlY3RvcignLnctNi5oLTYnKVxuICAgIGNvbnN0IHRleHQgPSBidXR0b24ucXVlcnlTZWxlY3RvcignLnRleHQtXFxcXFsxMXB4XFxcXF0nKVxuICAgIFxuICAgIGlmIChpY29uKSB7XG4gICAgICBpY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1ncmF5LTYwMCcpXG4gICAgICBpY29uLmNsYXNzTGlzdC5hZGQoJ2JnLVsjRkZEOTAwXScsICdib3JkZXItWyNGRjZBMDBdJylcbiAgICB9XG4gICAgXG4gICAgaWYgKHRleHQpIHtcbiAgICAgIHRleHQuY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTcwMCcpXG4gICAgICB0ZXh0LmNsYXNzTGlzdC5hZGQoJ3RleHQtWyNGRjZBMDBdJywgJ2ZvbnQtc2VtaWJvbGQnKVxuICAgICAgdGV4dC50ZXh0Q29udGVudCA9IGxhYmVsXG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJjaGVja0ljb25cIixcbiAgICBcInBhc3NlbmdlckNvdW50XCIsXG4gICAgXCJ0b3RhbFByaWNlXCIsXG4gICAgXCJjb250YWN0UGhvbmVcIixcbiAgICBcImZvcm1EYXRhXCJcbiAgXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hlY2tJY29uVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IHBhc3NlbmdlckNvdW50VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRvdGFsUHJpY2VUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY29udGFjdFBob25lVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGZvcm1EYXRhVGFyZ2V0OiBIVE1MRWxlbWVudFxuXG4gIHByaXZhdGUgc2VsZWN0ZWRQYXNzZW5nZXJzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKVxuICBwcml2YXRlIGJhc2VQcmljZTogbnVtYmVyID0gMFxuICBwcml2YXRlIGluc3VyYW5jZVByaWNlOiBudW1iZXIgPSAwXG4gIHByaXZhdGUgaW5zdXJhbmNlVHlwZTogc3RyaW5nID0gJ25vbmUnXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkJ1c1RpY2tldE9yZGVyIGNvbm5lY3RlZFwiKVxuICAgIFxuICAgIC8vIFJlYWQgaW5pdGlhbCBpbnN1cmFuY2UgZGF0YSBmcm9tIGZvcm0gZGF0YSBlbGVtZW50XG4gICAgdGhpcy5pbnN1cmFuY2VUeXBlID0gdGhpcy5mb3JtRGF0YVRhcmdldC5kYXRhc2V0Lmluc3VyYW5jZVR5cGUgfHwgJ25vbmUnXG4gICAgdGhpcy5pbnN1cmFuY2VQcmljZSA9IHBhcnNlSW50KHRoaXMuZm9ybURhdGFUYXJnZXQuZGF0YXNldC5pbnN1cmFuY2VQcmljZSB8fCAnMCcpXG4gICAgXG4gICAgLy8gQXV0by1zZWxlY3QgZmlyc3QgcGFzc2VuZ2VyIGlmIGV4aXN0c1xuICAgIGNvbnN0IGZpcnN0UGFzc2VuZ2VyID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXBhc3Nlbmdlci1pZF0nKSBhcyBIVE1MRWxlbWVudFxuICAgIGlmIChmaXJzdFBhc3Nlbmdlcikge1xuICAgICAgY29uc3QgcGFzc2VuZ2VySWQgPSBmaXJzdFBhc3Nlbmdlci5kYXRhc2V0LnBhc3NlbmdlcklkXG4gICAgICBpZiAocGFzc2VuZ2VySWQpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFBhc3NlbmdlcnMuYWRkKHBhc3NlbmdlcklkKVxuICAgICAgICB0aGlzLnVwZGF0ZVBhc3NlbmdlclVJKGZpcnN0UGFzc2VuZ2VyLCB0cnVlKVxuICAgICAgICBcbiAgICAgICAgLy8gVXBkYXRlIGNvbnRhY3QgcGhvbmUgd2l0aCBmaXJzdCBwYXNzZW5nZXIncyBwaG9uZVxuICAgICAgICBjb25zdCBwaG9uZSA9IGZpcnN0UGFzc2VuZ2VyLmRhdGFzZXQucGFzc2VuZ2VyUGhvbmVcbiAgICAgICAgaWYgKHBob25lKSB7XG4gICAgICAgICAgdGhpcy5jb250YWN0UGhvbmVUYXJnZXQudGV4dENvbnRlbnQgPSBwaG9uZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMudXBkYXRlVG90YWwoKVxuICB9XG5cbiAgdG9nZ2xlUGFzc2VuZ2VyKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBwYXNzZW5nZXJJZCA9IHRhcmdldC5kYXRhc2V0LnBhc3NlbmdlcklkXG4gICAgXG4gICAgaWYgKCFwYXNzZW5nZXJJZCkgcmV0dXJuXG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgYWxyZWFkeSBzZWxlY3RlZFxuICAgIGlmICh0aGlzLnNlbGVjdGVkUGFzc2VuZ2Vycy5oYXMocGFzc2VuZ2VySWQpKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkUGFzc2VuZ2Vycy5kZWxldGUocGFzc2VuZ2VySWQpXG4gICAgICB0aGlzLnVwZGF0ZVBhc3NlbmdlclVJKHRhcmdldCwgZmFsc2UpXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENoZWNrIG1heCBsaW1pdCAoNSBwYXNzZW5nZXJzKVxuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJzLnNpemUgPj0gNSkge1xuICAgICAgICBhbGVydCgnXHU2NzAwXHU1OTFBXHU1M0VBXHU4MEZEXHU5MDA5XHU2MkU5NVx1NEY0RFx1NEU1OFx1OEY2Nlx1NEVCQScpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgXG4gICAgICB0aGlzLnNlbGVjdGVkUGFzc2VuZ2Vycy5hZGQocGFzc2VuZ2VySWQpXG4gICAgICB0aGlzLnVwZGF0ZVBhc3NlbmdlclVJKHRhcmdldCwgdHJ1ZSlcbiAgICAgIFxuICAgICAgLy8gSWYgdGhpcyBpcyB0aGUgZmlyc3Qgc2VsZWN0aW9uLCB1cGRhdGUgY29udGFjdCBwaG9uZVxuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJzLnNpemUgPT09IDEpIHtcbiAgICAgICAgY29uc3QgcGhvbmUgPSB0YXJnZXQuZGF0YXNldC5wYXNzZW5nZXJQaG9uZVxuICAgICAgICBpZiAocGhvbmUpIHtcbiAgICAgICAgICB0aGlzLmNvbnRhY3RQaG9uZVRhcmdldC50ZXh0Q29udGVudCA9IHBob25lXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy51cGRhdGVUb3RhbCgpXG4gIH1cblxuICBzZWxlY3RJbnN1cmFuY2UoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIHRoaXMuaW5zdXJhbmNlVHlwZSA9IHRhcmdldC5kYXRhc2V0Lmluc3VyYW5jZVR5cGUgfHwgJ25vbmUnXG4gICAgdGhpcy5pbnN1cmFuY2VQcmljZSA9IHBhcnNlSW50KHRhcmdldC5kYXRhc2V0Lmluc3VyYW5jZVByaWNlIHx8ICcwJylcbiAgICBcbiAgICAvLyBVcGRhdGUgVUk6IGhpZ2hsaWdodCBzZWxlY3RlZCBpbnN1cmFuY2UgY2FyZFxuICAgIGNvbnN0IGFsbEluc3VyYW5jZUNhcmRzID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWluc3VyYW5jZS10eXBlXScpXG4gICAgYWxsSW5zdXJhbmNlQ2FyZHMuZm9yRWFjaChjYXJkID0+IHtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZCBhcyBIVE1MRWxlbWVudFxuICAgICAgY29uc3QgY2FyZFR5cGUgPSBjYXJkRWxlbWVudC5kYXRhc2V0Lmluc3VyYW5jZVR5cGVcbiAgICAgIGNvbnN0IGNoZWNrSWNvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3N2ZzpsYXN0LWNoaWxkJylcbiAgICAgIFxuICAgICAgaWYgKGNhcmRUeXBlID09PSB0aGlzLmluc3VyYW5jZVR5cGUpIHtcbiAgICAgICAgLy8gU2VsZWN0ZWQgY2FyZCBzdHlsaW5nXG4gICAgICAgIGlmIChjYXJkVHlwZSA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgY2FyZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLVsjRkZEOTQ0XScpXG4gICAgICAgICAgY2FyZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYm9yZGVyLWdyYXktMTAwJylcbiAgICAgICAgICBpZiAoY2hlY2tJY29uKSBjaGVja0ljb24uY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTMwMCcpXG4gICAgICAgICAgaWYgKGNoZWNrSWNvbikgY2hlY2tJY29uLmNsYXNzTGlzdC5hZGQoJ3RleHQtWyNGRkQ5NDRdJylcbiAgICAgICAgfSBlbHNlIGlmIChjYXJkVHlwZSA9PT0gJ3ByZW1pdW0nKSB7XG4gICAgICAgICAgY2FyZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYmctWyNGRkZBRURdJywgJ2JvcmRlci1bI0ZGRDk0NF0nKVxuICAgICAgICAgIGNhcmRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2JnLWdyYXktNTAnLCAnYm9yZGVyLWdyYXktMTAwJylcbiAgICAgICAgICBpZiAoY2hlY2tJY29uKSBjaGVja0ljb24uY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTMwMCcpXG4gICAgICAgICAgaWYgKGNoZWNrSWNvbikgY2hlY2tJY29uLmNsYXNzTGlzdC5hZGQoJ3RleHQtWyNGRkQ5NDRdJylcbiAgICAgICAgfSBlbHNlIGlmIChjYXJkVHlwZSA9PT0gJ3JlZnVuZCcpIHtcbiAgICAgICAgICBjYXJkRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdiZy1bI0YwRjdGRl0nLCAnYm9yZGVyLVsjNUQ5Q0VDXScpXG4gICAgICAgICAgY2FyZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYmctZ3JheS01MCcsICdib3JkZXItZ3JheS0xMDAnKVxuICAgICAgICAgIGlmIChjaGVja0ljb24pIGNoZWNrSWNvbi5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktMzAwJylcbiAgICAgICAgICBpZiAoY2hlY2tJY29uKSBjaGVja0ljb24uY2xhc3NMaXN0LmFkZCgndGV4dC1bIzVEOUNFQ10nKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBVbnNlbGVjdGVkIGNhcmQgc3R5bGluZ1xuICAgICAgICBpZiAoY2FyZFR5cGUgPT09ICdub25lJykge1xuICAgICAgICAgIGNhcmRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1bI0ZGRDk0NF0nKVxuICAgICAgICAgIGNhcmRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1ncmF5LTEwMCcpXG4gICAgICAgICAgaWYgKGNoZWNrSWNvbikgY2hlY2tJY29uLmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS0zMDAnKVxuICAgICAgICAgIGlmIChjaGVja0ljb24pIGNoZWNrSWNvbi5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LVsjRkZEOTQ0XScpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FyZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYmctWyNGRkZBRURdJywgJ2JnLVsjRjBGN0ZGXScsICdib3JkZXItWyNGRkQ5NDRdJywgJ2JvcmRlci1bIzVEOUNFQ10nKVxuICAgICAgICAgIGNhcmRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2JnLWdyYXktNTAnLCAnYm9yZGVyLWdyYXktMTAwJylcbiAgICAgICAgICBpZiAoY2hlY2tJY29uKSBjaGVja0ljb24uY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTMwMCcpXG4gICAgICAgICAgaWYgKGNoZWNrSWNvbikgY2hlY2tJY29uLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtWyNGRkQ5NDRdJywgJ3RleHQtWyM1RDlDRUNdJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgdGhpcy51cGRhdGVUb3RhbCgpXG4gIH1cblxuICBhc3luYyBzdWJtaXRPcmRlcihldmVudDogRXZlbnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgXG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGNvbnN0IGJ1c1RpY2tldElkID0gYnV0dG9uLmRhdGFzZXQuYnVzVGlja2V0SWRcbiAgICBjb25zdCBiYXNlUHJpY2UgPSBwYXJzZUludChidXR0b24uZGF0YXNldC5iYXNlUHJpY2UgfHwgJzAnKVxuICAgIFxuICAgIC8vIFN0b3JlIGJhc2UgcHJpY2UgZm9yIGNhbGN1bGF0aW9uc1xuICAgIHRoaXMuYmFzZVByaWNlID0gYmFzZVByaWNlXG4gICAgXG4gICAgLy8gVmFsaWRhdGUgcGFzc2VuZ2VyIHNlbGVjdGlvblxuICAgIGlmICh0aGlzLnNlbGVjdGVkUGFzc2VuZ2Vycy5zaXplID09PSAwKSB7XG4gICAgICBhbGVydCgnXHU4QkY3XHU4MUYzXHU1QzExXHU5MDA5XHU2MkU5XHU0RTAwXHU0RjREXHU0RTU4XHU4RjY2XHU0RUJBJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBHZXQgcGFzc2VuZ2VyIGRldGFpbHMgZm9yIHN1Ym1pc3Npb25cbiAgICBjb25zdCBwYXNzZW5nZXJJZHMgPSBBcnJheS5mcm9tKHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJzKVxuICAgIGNvbnN0IHRvdGFsUHJpY2UgPSB0aGlzLmNhbGN1bGF0ZVRvdGFsKClcbiAgICBjb25zdCB0b3RhbEluc3VyYW5jZVByaWNlID0gdGhpcy5pbnN1cmFuY2VQcmljZSAqIHBhc3Nlbmdlcklkcy5sZW5ndGhcbiAgICBcbiAgICAvLyBQcmVwYXJlIG9yZGVyIGRhdGFcbiAgICBjb25zdCBvcmRlckRhdGEgPSB7XG4gICAgICBidXNfdGlja2V0X29yZGVyOiB7XG4gICAgICAgIGJ1c190aWNrZXRfaWQ6IGJ1c1RpY2tldElkLFxuICAgICAgICBwYXNzZW5nZXJfaWRzOiBwYXNzZW5nZXJJZHMsXG4gICAgICAgIGluc3VyYW5jZV90eXBlOiB0aGlzLmluc3VyYW5jZVR5cGUsXG4gICAgICAgIGluc3VyYW5jZV9wcmljZTogdG90YWxJbnN1cmFuY2VQcmljZSxcbiAgICAgICAgdG90YWxfcHJpY2U6IHRvdGFsUHJpY2VcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gRGlzYWJsZSBidXR0b24gZHVyaW5nIHN1Ym1pc3Npb25cbiAgICBidXR0b24uZGlzYWJsZWQgPSB0cnVlXG4gICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ1x1NTIxQlx1NUVGQVx1NEUyRC4uLidcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gQ3JlYXRlIG9yZGVyIHZpYSBBSkFYXG4gICAgICBjb25zdCBjc3JmVG9rZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxNZXRhRWxlbWVudD4oJ21ldGFbbmFtZT1cImNzcmYtdG9rZW5cIl0nKT8uY29udGVudCB8fCAnJ1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2J1c190aWNrZXRfb3JkZXJzJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ1gtQ1NSRi1Ub2tlbic6IGNzcmZUb2tlblxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShvcmRlckRhdGEpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5vayAmJiBkYXRhLnN1Y2Nlc3MpIHtcbiAgICAgICAgLy8gT3JkZXIgY3JlYXRlZCBzdWNjZXNzZnVsbHksIHRyaWdnZXIgcGF5bWVudCBtb2RhbFxuICAgICAgICB0aGlzLnRyaWdnZXJQYXltZW50TW9kYWwodG90YWxQcmljZS50b1N0cmluZygpLCBkYXRhLnBheW1lbnRfdXJsLCBkYXRhLnN1Y2Nlc3NfdXJsKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEubWVzc2FnZSB8fCAnXHU1MjFCXHU1RUZBXHU4QkEyXHU1MzU1XHU1OTMxXHU4RDI1JylcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgb3JkZXI6JywgZXJyb3IpXG4gICAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnXHU1MjFCXHU1RUZBXHU4QkEyXHU1MzU1XHU1OTMxXHU4RDI1XHVGRjBDXHU4QkY3XHU5MUNEXHU4QkQ1J1xuICAgICAgYWxlcnQobWVzc2FnZSlcbiAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlXG4gICAgICBidXR0b24udGV4dENvbnRlbnQgPSAnXHU1M0JCXHU2NTJGXHU0RUQ4J1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdHJpZ2dlclBheW1lbnRNb2RhbChhbW91bnQ6IHN0cmluZywgcGF5bWVudFVybDogc3RyaW5nLCBzdWNjZXNzVXJsOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyBGaW5kIHBheW1lbnQtY29uZmlybWF0aW9uIGNvbnRyb2xsZXIgYW5kIHRyaWdnZXIgaXRcbiAgICBjb25zdCBwYXltZW50RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNvbnRyb2xsZXIqPVwicGF5bWVudC1jb25maXJtYXRpb25cIl0nKSBhcyBIVE1MRWxlbWVudFxuICAgIFxuICAgIGlmICghcGF5bWVudEVsZW1lbnQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1BheW1lbnQgY29uZmlybWF0aW9uIGNvbnRyb2xsZXIgbm90IGZvdW5kJylcbiAgICAgIGFsZXJ0KCdcdTY1MkZcdTRFRDhcdTdDRkJcdTdFREZcdTY3MkFcdTUyQTBcdThGN0RcdUZGMENcdThCRjdcdTUyMzdcdTY1QjBcdTk4NzVcdTk3NjJcdTkxQ0RcdThCRDUnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIEdldCB0aGUgU3RpbXVsdXMgY29udHJvbGxlciBpbnN0YW5jZVxuICAgIGNvbnN0IGFwcCA9ICh3aW5kb3cgYXMgYW55KS5TdGltdWx1c1xuICAgIGlmICghYXBwKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdGltdWx1cyBub3QgZm91bmQnKVxuICAgICAgYWxlcnQoJ1x1N0NGQlx1N0VERlx1OTUxOVx1OEJFRlx1RkYwQ1x1OEJGN1x1NTIzN1x1NjVCMFx1OTg3NVx1OTc2Mlx1OTFDRFx1OEJENScpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgY29uc3QgcGF5bWVudENvbnRyb2xsZXIgPSBhcHAuZ2V0Q29udHJvbGxlckZvckVsZW1lbnRBbmRJZGVudGlmaWVyKHBheW1lbnRFbGVtZW50LCAncGF5bWVudC1jb25maXJtYXRpb24nKVxuICAgIFxuICAgIGlmIChwYXltZW50Q29udHJvbGxlcikge1xuICAgICAgLy8gU2V0IHZhbHVlc1xuICAgICAgcGF5bWVudENvbnRyb2xsZXIuYW1vdW50VmFsdWUgPSBhbW91bnRcbiAgICAgIC8vIEdldCBjdXJyZW50IHVzZXIgZW1haWwgZnJvbSBtZXRhIHRhZyBvciBlbGVtZW50XG4gICAgICBjb25zdCB1c2VyRW1haWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxNZXRhRWxlbWVudD4oJ21ldGFbbmFtZT1cInVzZXItZW1haWxcIl0nKT8uY29udGVudCB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtdXNlci1lbWFpbF0nKT8uZ2V0QXR0cmlidXRlKCdkYXRhLXVzZXItZW1haWwnKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAnZGVtb0BleGFtcGxlLmNvbSdcbiAgICAgIHBheW1lbnRDb250cm9sbGVyLnVzZXJFbWFpbFZhbHVlID0gdXNlckVtYWlsXG4gICAgICBwYXltZW50Q29udHJvbGxlci5wYXltZW50VXJsVmFsdWUgPSBwYXltZW50VXJsXG4gICAgICBwYXltZW50Q29udHJvbGxlci5zdWNjZXNzVXJsVmFsdWUgPSBzdWNjZXNzVXJsXG4gICAgICBcbiAgICAgIC8vIFNob3cgcGFzc3dvcmQgbW9kYWxcbiAgICAgIHBheW1lbnRDb250cm9sbGVyLnNob3dQYXNzd29yZE1vZGFsKClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcignUGF5bWVudCBjb250cm9sbGVyIG5vdCBpbml0aWFsaXplZCcpXG4gICAgICBhbGVydCgnXHU2NTJGXHU0RUQ4XHU3Q0ZCXHU3RURGXHU2NzJBXHU1MjFEXHU1OUNCXHU1MzE2XHVGRjBDXHU4QkY3XHU1MjM3XHU2NUIwXHU5ODc1XHU5NzYyXHU5MUNEXHU4QkQ1JylcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVBhc3NlbmdlclVJKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBzZWxlY3RlZDogYm9vbGVhbik6IHZvaWQge1xuICAgIGNvbnN0IGNoZWNrSWNvbiA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtYnVzLXRpY2tldC1vcmRlci10YXJnZXQ9XCJjaGVja0ljb25cIl0nKSBhcyBIVE1MRWxlbWVudFxuICAgIGlmIChjaGVja0ljb24pIHtcbiAgICAgIGlmIChzZWxlY3RlZCkge1xuICAgICAgICBjaGVja0ljb24uY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTMwMCcpXG4gICAgICAgIGNoZWNrSWNvbi5jbGFzc0xpc3QuYWRkKCd0ZXh0LVsjRkZEOTQ0XScpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGVja0ljb24uY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTMwMCcpXG4gICAgICAgIGNoZWNrSWNvbi5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LVsjRkZEOTQ0XScpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVUb3RhbCgpOiB2b2lkIHtcbiAgICBjb25zdCBwYXNzZW5nZXJDb3VudCA9IHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJzLnNpemVcbiAgICB0aGlzLnBhc3NlbmdlckNvdW50VGFyZ2V0LnRleHRDb250ZW50ID0gYFx1NTE3MSR7cGFzc2VuZ2VyQ291bnR9XHU0RUJBYFxuICAgIFxuICAgIGNvbnN0IHRvdGFsID0gdGhpcy5jYWxjdWxhdGVUb3RhbCgpXG4gICAgdGhpcy50b3RhbFByaWNlVGFyZ2V0LnRleHRDb250ZW50ID0gdG90YWwudG9TdHJpbmcoKVxuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVUb3RhbCgpOiBudW1iZXIge1xuICAgIGNvbnN0IHBhc3NlbmdlckNvdW50ID0gdGhpcy5zZWxlY3RlZFBhc3NlbmdlcnMuc2l6ZVxuICAgIGlmIChwYXNzZW5nZXJDb3VudCA9PT0gMCkgcmV0dXJuIDBcbiAgICBcbiAgICAvLyBHZXQgYmFzZSBwcmljZSBmcm9tIGJ1dHRvbiBvciBmb3JtRGF0YVxuICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1iYXNlLXByaWNlXScpIGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgYmFzZVByaWNlID0gcGFyc2VJbnQoYnV0dG9uPy5kYXRhc2V0LmJhc2VQcmljZSB8fCAnMCcpXG4gICAgXG4gICAgcmV0dXJuIChiYXNlUHJpY2UgKyB0aGlzLmluc3VyYW5jZVByaWNlKSAqIHBhc3NlbmdlckNvdW50XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcInByb2R1Y3RDYXJkXCIsXG4gICAgXCJkYXRlTW9kYWxcIixcbiAgICBcImNvdW50TW9kYWxcIixcbiAgICBcImFkdWx0Q291bnRcIixcbiAgICBcImNoaWxkQ291bnRcIixcbiAgICBcInNlbGVjdGVkRGF0ZVwiLFxuICAgIFwidG90YWxQcmljZVwiXG4gIF1cblxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIGd1aWRlSWQ6IFN0cmluZyxcbiAgICBzZWxlY3RlZERhdGU6IFN0cmluZyxcbiAgICBhZHVsdENvdW50OiBOdW1iZXIsXG4gICAgY2hpbGRDb3VudDogTnVtYmVyLFxuICAgIHByaWNlUGVyUGVyc29uOiBOdW1iZXJcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgcHJvZHVjdENhcmRUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgZGF0ZU1vZGFsVGFyZ2V0PzogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjb3VudE1vZGFsVGFyZ2V0PzogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBhZHVsdENvdW50VGFyZ2V0PzogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjaGlsZENvdW50VGFyZ2V0PzogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzZWxlY3RlZERhdGVUYXJnZXQ/OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRvdGFsUHJpY2VUYXJnZXQ/OiBIVE1MRWxlbWVudFxuICBcbiAgZGVjbGFyZSBndWlkZUlkVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHNlbGVjdGVkRGF0ZVZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBhZHVsdENvdW50VmFsdWU6IG51bWJlclxuICBkZWNsYXJlIGNoaWxkQ291bnRWYWx1ZTogbnVtYmVyXG4gIGRlY2xhcmUgcHJpY2VQZXJQZXJzb25WYWx1ZTogbnVtYmVyXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkRlZXBCb29raW5nIGNvbnRyb2xsZXIgY29ubmVjdGVkXCIpXG4gICAgLy8gSW5pdGlhbGl6ZSBkZWZhdWx0IHZhbHVlc1xuICAgIHRoaXMuYWR1bHRDb3VudFZhbHVlID0gMVxuICAgIHRoaXMuY2hpbGRDb3VudFZhbHVlID0gMFxuICAgIFxuICAgIC8vIEdldCBwcmljZSBmcm9tIGZpcnN0IHByb2R1Y3QgY2FyZCBpZiBhdmFpbGFibGVcbiAgICBpZiAodGhpcy5wcm9kdWN0Q2FyZFRhcmdldHMgJiYgdGhpcy5wcm9kdWN0Q2FyZFRhcmdldHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgcHJpY2VFbGVtZW50ID0gdGhpcy5wcm9kdWN0Q2FyZFRhcmdldHNbMF0ucXVlcnlTZWxlY3RvcignLnRleHQteGwuZm9udC1ib2xkLnRleHQtXFxcXFtcXFxcI2ZmNTMzNlxcXFxdJylcbiAgICAgIGlmIChwcmljZUVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5wcmljZVBlclBlcnNvblZhbHVlID0gcGFyc2VJbnQocHJpY2VFbGVtZW50LnRleHRDb250ZW50IHx8IFwiMTkyXCIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnByaWNlUGVyUGVyc29uVmFsdWUgPSAxOTJcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wcmljZVBlclBlcnNvblZhbHVlID0gMTkyXG4gICAgfVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkRlZXBCb29raW5nIGRpc2Nvbm5lY3RlZFwiKVxuICB9XG5cbiAgLy8gXHU5MDA5XHU2MkU5XHU2NUU1XHU2NzFGXG4gIHNlbGVjdERhdGUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGNvbnN0IGRhdGUgPSBidXR0b24uZGF0YXNldC5kYXRlXG4gICAgXG4gICAgaWYgKCFkYXRlKSByZXR1cm5cbiAgICBcbiAgICB0aGlzLnNlbGVjdGVkRGF0ZVZhbHVlID0gZGF0ZVxuICAgIGNvbnNvbGUubG9nKFwiU2VsZWN0ZWQgZGF0ZTpcIiwgZGF0ZSlcbiAgICBcbiAgICAvLyBVcGRhdGUgVUkgdG8gc2hvdyBzZWxlY3RlZCBkYXRlXG4gICAgY29uc3QgZGF0ZUJ1dHRvbnMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtYWN0aW9uKj1cInNlbGVjdERhdGVcIl0nKVxuICAgIGRhdGVCdXR0b25zLmZvckVhY2goKGJ0bikgPT4ge1xuICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLVsjZmZlZWI4XScsICdib3JkZXItWyNmZmVlYjhdJylcbiAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdiZy1bI2Y1ZjdmYV0nKVxuICAgIH0pXG4gICAgXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLVsjZjVmN2ZhXScpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2JnLVsjZmZlZWI4XScsICdib3JkZXItWyNmZmVlYjhdJylcbiAgfVxuXG4gIC8vIFx1NjI1M1x1NUYwMFx1NjVFNVx1NTM4Nlx1NUYzOVx1N0E5N1xuICBvcGVuQ2FsZW5kYXIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnNvbGUubG9nKFwiT3BlbmluZyBjYWxlbmRhciBtb2RhbFwiKVxuICAgIC8vIFRPRE86IEltcGxlbWVudCBjYWxlbmRhciBtb2RhbFxuICAgIC8vIEZvciBub3csIGp1c3Qgc2hvdyBhIHRvYXN0IG1lc3NhZ2VcbiAgICB0aGlzLnNob3dUb2FzdChcIlx1NjVFNVx1NTM4Nlx1OTAwOVx1NjJFOVx1NTI5Rlx1ODBGRFx1NTM3M1x1NUMwNlx1NEUwQVx1N0VCRlwiKVxuICB9XG5cbiAgLy8gXHU2MjUzXHU1RjAwXHU0RUJBXHU2NTcwXHU5MDA5XHU2MkU5XHU1RjM5XHU3QTk3XG4gIG9wZW5Db3VudE1vZGFsKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBcbiAgICBpZiAoIXRoaXMuc2VsZWN0ZWREYXRlVmFsdWUpIHtcbiAgICAgIHRoaXMuc2hvd1RvYXN0KFwiXHU4QkY3XHU1MTQ4XHU5MDA5XHU2MkU5XHU1MUZBXHU4ODRDXHU2NUU1XHU2NzFGXCIpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coXCJPcGVuaW5nIGNvdW50IG1vZGFsXCIpXG4gICAgXG4gICAgLy8gQ3JlYXRlIG1vZGFsIEhUTUxcbiAgICAgXG4gICAgY29uc3QgbW9kYWxIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cImZpeGVkIGluc2V0LTAgYmctYmxhY2svNjAgei00MFwiIFxuICAgICAgICAgICBkYXRhLWFjdGlvbj1cImNsaWNrLT5kZWVwLWJvb2tpbmcjY2xvc2VDb3VudE1vZGFsXCIgXG4gICAgICAgICAgIGRhdGEtZGVlcC1ib29raW5nLXRhcmdldD1cImNvdW50TW9kYWxcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImFic29sdXRlIGJvdHRvbS0wIHctZnVsbCBtYXgtdy1bNDE0cHhdIGxlZnQtMS8yIC10cmFuc2xhdGUteC0xLzIgYmctd2hpdGUgei01MCByb3VuZGVkLXQtMnhsIHB4LTUgcHQtNSBwYi04IGFuaW1hdGUtc2xpZGUtdXBcIiBcbiAgICAgICAgICAgICBkYXRhLWFjdGlvbj1cImNsaWNrLT5kZWVwLWJvb2tpbmcjc3RvcFByb3BhZ2F0aW9uXCI+XG4gICAgICAgICAgXG4gICAgICAgICAgPCEtLSBcdTVGMzlcdTdBOTdcdTY4MDdcdTk4OThcdTY4MEYgLS0+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtYi04IHJlbGF0aXZlXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidy1mdWxsIHRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICAgIDxoMyBjbGFzcz1cInRleHQtbGcgZm9udC1ib2xkIHRleHQtZ3JheS05MDBcIj5cdTk4ODRcdTdFQTZcdTRFQkFcdTY1NzA8L2gzPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYWJzb2x1dGUgcmlnaHQtMCB0b3AtMCBwLTFcIiBkYXRhLWFjdGlvbj1cImNsaWNrLT5kZWVwLWJvb2tpbmcjY2xvc2VDb3VudE1vZGFsXCI+XG4gICAgICAgICAgICAgIDxzdmcgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIGNsYXNzPVwidGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTggNkw2IDE4TTYgNmwxMiAxMlwiIC8+XG4gICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8IS0tIFx1NTIxN1x1ODg2OFx1OTg3OVx1RkYxQVx1NjIxMFx1NEVCQSAtLT5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG1iLThcIj5cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDBcIj5cdTYyMTBcdTRFQkE8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtc20gdGV4dC1ncmF5LTQwMCBtdC0xXCI+XHU1MzU1XHU0RUY3OiBcdTAwQTUke3RoaXMucHJpY2VQZXJQZXJzb25WYWx1ZX08L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggaXRlbXMtY2VudGVyIGdhcC00XCI+XG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ3LTcgaC03IHJvdW5kZWQtZnVsbCBib3JkZXIgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdHJhbnNpdGlvbi1jb2xvcnMgJHtcbiAgdGhpcy5hZHVsdENvdW50VmFsdWUgPD0gMVxuICAgID8gJ2JvcmRlci1ncmF5LTMwMCB0ZXh0LWdyYXktMzAwIGN1cnNvci1ub3QtYWxsb3dlZCdcbiAgICA6ICdib3JkZXItYmx1ZS1jdXN0b20gdGV4dC1ibHVlLWN1c3RvbSBob3ZlcjpiZy1ibHVlLTUwJ1xufVwiXG4gICAgICAgICAgICAgICAgICAgICAgZGF0YS1hY3Rpb249XCJjbGljay0+ZGVlcC1ib29raW5nI2RlY3JlbWVudEFkdWx0XCJcbiAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuYWR1bHRDb3VudFZhbHVlIDw9IDEgPyAnZGlzYWJsZWQnIDogJyd9PlxuICAgICAgICAgICAgICAgIDxzdmcgd2lkdGg9XCIxMlwiIGhlaWdodD1cIjJcIiB2aWV3Qm94PVwiMCAwIDEyIDJcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgICA8cmVjdCB3aWR0aD1cIjEyXCIgaGVpZ2h0PVwiMlwiIHJ4PVwiMVwiLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRleHQtbGcgZm9udC1tZWRpdW0gdy00IHRleHQtY2VudGVyXCIgZGF0YS1kZWVwLWJvb2tpbmctdGFyZ2V0PVwiYWR1bHRDb3VudFwiPiR7dGhpcy5hZHVsdENvdW50VmFsdWV9PC9zcGFuPlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInctNyBoLTcgcm91bmRlZC1mdWxsIGJvcmRlciBib3JkZXItYmx1ZS1jdXN0b20gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC1ibHVlLWN1c3RvbSBob3ZlcjpiZy1ibHVlLTUwXCJcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhLWFjdGlvbj1cImNsaWNrLT5kZWVwLWJvb2tpbmcjaW5jcmVtZW50QWR1bHRcIj5cbiAgICAgICAgICAgICAgICA8c3ZnIHdpZHRoPVwiMTJcIiBoZWlnaHQ9XCIxMlwiIHZpZXdCb3g9XCIwIDAgMTIgMTJcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgICA8cmVjdCB5PVwiNVwiIHdpZHRoPVwiMTJcIiBoZWlnaHQ9XCIyXCIgcng9XCIxXCIvPlxuICAgICAgICAgICAgICAgICAgPHJlY3QgeD1cIjVcIiB3aWR0aD1cIjJcIiBoZWlnaHQ9XCIxMlwiIHJ4PVwiMVwiLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDwhLS0gXHU1MjE3XHU4ODY4XHU5ODc5XHVGRjFBXHU1MTNGXHU3QUU1IC0tPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbWItMTBcIj5cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDBcIj5cdTUxM0ZcdTdBRTU8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtc20gdGV4dC1ncmF5LTQwMCBtdC0xXCI+XHU1MzU1XHU0RUY3OiBcdTAwQTUke01hdGgucm91bmQodGhpcy5wcmljZVBlclBlcnNvblZhbHVlICogMC44KX08L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggaXRlbXMtY2VudGVyIGdhcC00XCI+XG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ3LTcgaC03IHJvdW5kZWQtZnVsbCBib3JkZXIgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdHJhbnNpdGlvbi1jb2xvcnMgJHtcbiAgdGhpcy5jaGlsZENvdW50VmFsdWUgPD0gMFxuICAgID8gJ2JvcmRlci1ncmF5LTMwMCB0ZXh0LWdyYXktMzAwIGN1cnNvci1ub3QtYWxsb3dlZCdcbiAgICA6ICdib3JkZXItYmx1ZS1jdXN0b20gdGV4dC1ibHVlLWN1c3RvbSBob3ZlcjpiZy1ibHVlLTUwJ1xufVwiXG4gICAgICAgICAgICAgICAgICAgICAgZGF0YS1hY3Rpb249XCJjbGljay0+ZGVlcC1ib29raW5nI2RlY3JlbWVudENoaWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuY2hpbGRDb3VudFZhbHVlIDw9IDAgPyAnZGlzYWJsZWQnIDogJyd9PlxuICAgICAgICAgICAgICAgIDxzdmcgd2lkdGg9XCIxMlwiIGhlaWdodD1cIjJcIiB2aWV3Qm94PVwiMCAwIDEyIDJcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgICA8cmVjdCB3aWR0aD1cIjEyXCIgaGVpZ2h0PVwiMlwiIHJ4PVwiMVwiLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRleHQtbGcgZm9udC1tZWRpdW0gdy00IHRleHQtY2VudGVyXCIgZGF0YS1kZWVwLWJvb2tpbmctdGFyZ2V0PVwiY2hpbGRDb3VudFwiPiR7dGhpcy5jaGlsZENvdW50VmFsdWV9PC9zcGFuPlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInctNyBoLTcgcm91bmRlZC1mdWxsIGJvcmRlciBib3JkZXItYmx1ZS1jdXN0b20gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC1ibHVlLWN1c3RvbSBob3ZlcjpiZy1ibHVlLTUwXCJcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhLWFjdGlvbj1cImNsaWNrLT5kZWVwLWJvb2tpbmcjaW5jcmVtZW50Q2hpbGRcIj5cbiAgICAgICAgICAgICAgICA8c3ZnIHdpZHRoPVwiMTJcIiBoZWlnaHQ9XCIxMlwiIHZpZXdCb3g9XCIwIDAgMTIgMTJcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgICA8cmVjdCB5PVwiNVwiIHdpZHRoPVwiMTJcIiBoZWlnaHQ9XCIyXCIgcng9XCIxXCIvPlxuICAgICAgICAgICAgICAgICAgPHJlY3QgeD1cIjVcIiB3aWR0aD1cIjJcIiBoZWlnaHQ9XCIxMlwiIHJ4PVwiMVwiLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDwhLS0gXHU1RTk1XHU5MEU4XHU2MzA5XHU5NEFFIC0tPlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ3LWZ1bGwgYmctWyNGRjVBNDNdIHRleHQtd2hpdGUgdGV4dC1sZyBmb250LWJvbGQgcHktMy41IHJvdW5kZWQtZnVsbCBzaGFkb3ctbGcgYWN0aXZlOm9wYWNpdHktOTAgdHJhbnNpdGlvbi1vcGFjaXR5XCJcbiAgICAgICAgICAgICAgICAgIGRhdGEtYWN0aW9uPVwiY2xpY2stPmRlZXAtYm9va2luZyNjb25maXJtQm9va2luZ1wiPlxuICAgICAgICAgICAgXHU3QUNCXHU1MzczXHU5ODg0XHU3RUE2XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgXG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYFxuICAgICBcbiAgICBcbiAgICB0aGlzLmVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBtb2RhbEhUTUwpXG4gIH1cblxuICAvLyBcdTUxNzNcdTk1RURcdTRFQkFcdTY1NzBcdTkwMDlcdTYyRTlcdTVGMzlcdTdBOTdcbiAgY2xvc2VDb3VudE1vZGFsKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWRlZXAtYm9va2luZy10YXJnZXQ9XCJjb3VudE1vZGFsXCJdJylcbiAgICBpZiAobW9kYWwpIHtcbiAgICAgIG1vZGFsLnJlbW92ZSgpXG4gICAgfVxuICB9XG5cbiAgLy8gXHU5NjNCXHU2QjYyXHU0RThCXHU0RUY2XHU1MTkyXHU2Q0UxXG4gIHN0b3BQcm9wYWdhdGlvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICB9XG5cbiAgLy8gXHU1ODlFXHU1MkEwXHU2MjEwXHU0RUJBXHU2NTcwXHU5MUNGXG4gIGluY3JlbWVudEFkdWx0KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICB0aGlzLmFkdWx0Q291bnRWYWx1ZSsrXG4gICAgdGhpcy51cGRhdGVDb3VudERpc3BsYXkoKVxuICB9XG5cbiAgLy8gXHU1MUNGXHU1QzExXHU2MjEwXHU0RUJBXHU2NTcwXHU5MUNGXG4gIGRlY3JlbWVudEFkdWx0KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBpZiAodGhpcy5hZHVsdENvdW50VmFsdWUgPiAxKSB7XG4gICAgICB0aGlzLmFkdWx0Q291bnRWYWx1ZS0tXG4gICAgICB0aGlzLnVwZGF0ZUNvdW50RGlzcGxheSgpXG4gICAgfVxuICB9XG5cbiAgLy8gXHU1ODlFXHU1MkEwXHU1MTNGXHU3QUU1XHU2NTcwXHU5MUNGXG4gIGluY3JlbWVudENoaWxkKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICB0aGlzLmNoaWxkQ291bnRWYWx1ZSsrXG4gICAgdGhpcy51cGRhdGVDb3VudERpc3BsYXkoKVxuICB9XG5cbiAgLy8gXHU1MUNGXHU1QzExXHU1MTNGXHU3QUU1XHU2NTcwXHU5MUNGXG4gIGRlY3JlbWVudENoaWxkKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBpZiAodGhpcy5jaGlsZENvdW50VmFsdWUgPiAwKSB7XG4gICAgICB0aGlzLmNoaWxkQ291bnRWYWx1ZS0tXG4gICAgICB0aGlzLnVwZGF0ZUNvdW50RGlzcGxheSgpXG4gICAgfVxuICB9XG5cbiAgLy8gXHU2NkY0XHU2NUIwXHU2NTcwXHU5MUNGXHU2NjNFXHU3OTNBXG4gIHVwZGF0ZUNvdW50RGlzcGxheSgpOiB2b2lkIHtcbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWRlZXAtYm9va2luZy10YXJnZXQ9XCJjb3VudE1vZGFsXCJdJylcbiAgICBpZiAoIW1vZGFsKSByZXR1cm5cblxuICAgIC8vIFVwZGF0ZSBhZHVsdCBjb3VudFxuICAgIGNvbnN0IGFkdWx0Q291bnRFbCA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWRlZXAtYm9va2luZy10YXJnZXQ9XCJhZHVsdENvdW50XCJdJylcbiAgICBpZiAoYWR1bHRDb3VudEVsKSB7XG4gICAgICBhZHVsdENvdW50RWwudGV4dENvbnRlbnQgPSB0aGlzLmFkdWx0Q291bnRWYWx1ZS50b1N0cmluZygpXG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGNoaWxkIGNvdW50XG4gICAgY29uc3QgY2hpbGRDb3VudEVsID0gbW9kYWwucXVlcnlTZWxlY3RvcignW2RhdGEtZGVlcC1ib29raW5nLXRhcmdldD1cImNoaWxkQ291bnRcIl0nKVxuICAgIGlmIChjaGlsZENvdW50RWwpIHtcbiAgICAgIGNoaWxkQ291bnRFbC50ZXh0Q29udGVudCA9IHRoaXMuY2hpbGRDb3VudFZhbHVlLnRvU3RyaW5nKClcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgYnV0dG9uIHN0YXRlc1xuICAgIGNvbnN0IGRlY3JlbWVudEFkdWx0QnRuID0gbW9kYWwucXVlcnlTZWxlY3RvcignW2RhdGEtYWN0aW9uKj1cImRlY3JlbWVudEFkdWx0XCJdJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBpZiAoZGVjcmVtZW50QWR1bHRCdG4pIHtcbiAgICAgIGlmICh0aGlzLmFkdWx0Q291bnRWYWx1ZSA8PSAxKSB7XG4gICAgICAgIGRlY3JlbWVudEFkdWx0QnRuLmRpc2FibGVkID0gdHJ1ZVxuICAgICAgICBkZWNyZW1lbnRBZHVsdEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItYmx1ZS1jdXN0b20nLCAndGV4dC1ibHVlLWN1c3RvbScsICdob3ZlcjpiZy1ibHVlLTUwJylcbiAgICAgICAgZGVjcmVtZW50QWR1bHRCdG4uY2xhc3NMaXN0LmFkZCgnYm9yZGVyLWdyYXktMzAwJywgJ3RleHQtZ3JheS0zMDAnLCAnY3Vyc29yLW5vdC1hbGxvd2VkJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlY3JlbWVudEFkdWx0QnRuLmRpc2FibGVkID0gZmFsc2VcbiAgICAgICAgZGVjcmVtZW50QWR1bHRCdG4uY2xhc3NMaXN0LnJlbW92ZSgnYm9yZGVyLWdyYXktMzAwJywgJ3RleHQtZ3JheS0zMDAnLCAnY3Vyc29yLW5vdC1hbGxvd2VkJylcbiAgICAgICAgZGVjcmVtZW50QWR1bHRCdG4uY2xhc3NMaXN0LmFkZCgnYm9yZGVyLWJsdWUtY3VzdG9tJywgJ3RleHQtYmx1ZS1jdXN0b20nLCAnaG92ZXI6YmctYmx1ZS01MCcpXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZGVjcmVtZW50Q2hpbGRCdG4gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hY3Rpb24qPVwiZGVjcmVtZW50Q2hpbGRcIl0nKSBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGlmIChkZWNyZW1lbnRDaGlsZEJ0bikge1xuICAgICAgaWYgKHRoaXMuY2hpbGRDb3VudFZhbHVlIDw9IDApIHtcbiAgICAgICAgZGVjcmVtZW50Q2hpbGRCdG4uZGlzYWJsZWQgPSB0cnVlXG4gICAgICAgIGRlY3JlbWVudENoaWxkQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1ibHVlLWN1c3RvbScsICd0ZXh0LWJsdWUtY3VzdG9tJywgJ2hvdmVyOmJnLWJsdWUtNTAnKVxuICAgICAgICBkZWNyZW1lbnRDaGlsZEJ0bi5jbGFzc0xpc3QuYWRkKCdib3JkZXItZ3JheS0zMDAnLCAndGV4dC1ncmF5LTMwMCcsICdjdXJzb3Itbm90LWFsbG93ZWQnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVjcmVtZW50Q2hpbGRCdG4uZGlzYWJsZWQgPSBmYWxzZVxuICAgICAgICBkZWNyZW1lbnRDaGlsZEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItZ3JheS0zMDAnLCAndGV4dC1ncmF5LTMwMCcsICdjdXJzb3Itbm90LWFsbG93ZWQnKVxuICAgICAgICBkZWNyZW1lbnRDaGlsZEJ0bi5jbGFzc0xpc3QuYWRkKCdib3JkZXItYmx1ZS1jdXN0b20nLCAndGV4dC1ibHVlLWN1c3RvbScsICdob3ZlcjpiZy1ibHVlLTUwJylcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBcdTc4NkVcdThCQTRcdTk4ODRcdTdFQTYgLSBcdThERjNcdThGNkNcdTUyMzBcdTU4NkJcdTUxOTlcdThCQTJcdTUzNTVcdTk4NzVcbiAgY29uZmlybUJvb2tpbmcoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIFxuICAgIC8vIFx1Njc4NFx1NUVGQVx1OERGM1x1OEY2Q1VSTFxuICAgIGNvbnN0IHVybCA9IGAvZGVlcF90cmF2ZWxfYm9va2luZ3MvbmV3P2d1aWRlX2lkPSR7dGhpcy5ndWlkZUlkVmFsdWV9JmRhdGU9JHt0aGlzLnNlbGVjdGVkRGF0ZVZhbHVlfSZhZHVsdF9jb3VudD0ke3RoaXMuYWR1bHRDb3VudFZhbHVlfSZjaGlsZF9jb3VudD0ke3RoaXMuY2hpbGRDb3VudFZhbHVlfWBcbiAgICBcbiAgICBjb25zb2xlLmxvZyhcIkNvbmZpcm1pbmcgYm9va2luZzpcIiwge1xuICAgICAgZ3VpZGVJZDogdGhpcy5ndWlkZUlkVmFsdWUsXG4gICAgICBkYXRlOiB0aGlzLnNlbGVjdGVkRGF0ZVZhbHVlLFxuICAgICAgYWR1bHRDb3VudDogdGhpcy5hZHVsdENvdW50VmFsdWUsXG4gICAgICBjaGlsZENvdW50OiB0aGlzLmNoaWxkQ291bnRWYWx1ZSxcbiAgICAgIHVybFxuICAgIH0pXG4gICAgXG4gICAgLy8gTmF2aWdhdGUgdG8gYm9va2luZyBmb3JtIHBhZ2VcbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybFxuICB9XG5cbiAgLy8gXHU2NjNFXHU3OTNBXHU2M0QwXHU3OTNBXHU2RDg4XHU2MDZGXG4gIHNob3dUb2FzdChtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyBVc2UgZXhpc3RpbmcgdG9hc3QgZnVuY3Rpb25hbGl0eSBpZiBhdmFpbGFibGVcbiAgICBpZiAodHlwZW9mICh3aW5kb3cgYXMgYW55KS5zaG93VG9hc3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICh3aW5kb3cgYXMgYW55KS5zaG93VG9hc3QobWVzc2FnZSlcbiAgICB9IGVsc2Uge1xuICAgICAgYWxlcnQobWVzc2FnZSlcbiAgICB9XG4gIH1cbn1cblxuLy8gQWRkIGN1c3RvbSBzdHlsZXNcbmNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKVxuc3R5bGUudGV4dENvbnRlbnQgPSBgXG4gIC5ib3JkZXItYmx1ZS1jdXN0b20ge1xuICAgIGJvcmRlci1jb2xvcjogIzRFNkVGMjtcbiAgfVxuICAudGV4dC1ibHVlLWN1c3RvbSB7XG4gICAgY29sb3I6ICM0RTZFRjI7XG4gIH1cbiAgQGtleWZyYW1lcyBzbGlkZS11cCB7XG4gICAgZnJvbSB7XG4gICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMTAwJSk7XG4gICAgfVxuICAgIHRvIHtcbiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTtcbiAgICB9XG4gIH1cbiAgLmFuaW1hdGUtc2xpZGUtdXAge1xuICAgIGFuaW1hdGlvbjogc2xpZGUtdXAgMC4zcyBlYXNlLW91dDtcbiAgfVxuYFxuZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSlcbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcInRvdGFsUHJpY2VcIiwgXCJkZWxpdmVyeUFkZHJlc3NcIl1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHRvdGFsUHJpY2VUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVsaXZlcnlBZGRyZXNzVGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlZpc2FPcmRlciBjb250cm9sbGVyIGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgYXN5bmMgc3VibWl0T3JkZXIoZXZlbnQ6IEV2ZW50KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIFxuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBcbiAgICAvLyBHZXQgb3JkZXIgZGF0YSBmcm9tIGJ1dHRvbiBkYXRhc2V0XG4gICAgY29uc3QgdmlzYVByb2R1Y3RJZCA9IGJ1dHRvbi5kYXRhc2V0LnZpc2FQcm9kdWN0SWQgfHwgJydcbiAgICBjb25zdCB0cmF2ZWxlckNvdW50ID0gcGFyc2VJbnQoYnV0dG9uLmRhdGFzZXQudHJhdmVsZXJDb3VudCB8fCAnMScpXG4gICAgY29uc3QgdG90YWxQcmljZSA9IHBhcnNlRmxvYXQoYnV0dG9uLmRhdGFzZXQudG90YWxQcmljZSB8fCAnMCcpXG4gICAgY29uc3QgaW5zdXJhbmNlVHlwZSA9IGJ1dHRvbi5kYXRhc2V0Lmluc3VyYW5jZVR5cGUgfHwgJ25vbmUnXG4gICAgY29uc3QgaW5zdXJhbmNlUHJpY2UgPSBwYXJzZUZsb2F0KGJ1dHRvbi5kYXRhc2V0Lmluc3VyYW5jZVByaWNlIHx8ICcwJylcbiAgICBjb25zdCBjb250YWN0TmFtZSA9IGJ1dHRvbi5kYXRhc2V0LmNvbnRhY3ROYW1lIHx8ICcnXG4gICAgY29uc3QgY29udGFjdFBob25lID0gYnV0dG9uLmRhdGFzZXQuY29udGFjdFBob25lIHx8ICcnXG4gICAgY29uc3QgZGVsaXZlcnlBZGRyZXNzID0gYnV0dG9uLmRhdGFzZXQuZGVsaXZlcnlBZGRyZXNzIHx8ICcnXG5cbiAgICAvLyBCYXNpYyB2YWxpZGF0aW9uXG4gICAgaWYgKCFjb250YWN0TmFtZSB8fCBjb250YWN0TmFtZS50cmltKCkgPT09ICcnKSB7XG4gICAgICBhbGVydCgnXHU4QkY3XHU1ODZCXHU1MTk5XHU4MDU0XHU3Q0ZCXHU0RUJBXHU1OUQzXHU1NDBEJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICBpZiAoIWNvbnRhY3RQaG9uZSB8fCBjb250YWN0UGhvbmUudHJpbSgpID09PSAnJykge1xuICAgICAgYWxlcnQoJ1x1OEJGN1x1NTg2Qlx1NTE5OVx1ODA1NFx1N0NGQlx1NEVCQVx1NzUzNVx1OEJERCcpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgaWYgKCFkZWxpdmVyeUFkZHJlc3MgfHwgZGVsaXZlcnlBZGRyZXNzLnRyaW0oKSA9PT0gJycpIHtcbiAgICAgIGFsZXJ0KCdcdThCRjdcdTU4NkJcdTUxOTlcdTkwQUVcdTVCQzRcdTU3MzBcdTU3NDAnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gUHJlcGFyZSBvcmRlciBkYXRhIChzaW1wbGlmaWVkIC0gbm8gdHJhdmVsZXJzIGZvciBub3cpXG4gICAgY29uc3Qgb3JkZXJEYXRhID0ge1xuICAgICAgdmlzYV9vcmRlcjoge1xuICAgICAgICB2aXNhX3Byb2R1Y3RfaWQ6IHZpc2FQcm9kdWN0SWQsXG4gICAgICAgIHRyYXZlbGVyX2NvdW50OiB0cmF2ZWxlckNvdW50LFxuICAgICAgICBpbnN1cmFuY2VfdHlwZTogaW5zdXJhbmNlVHlwZSxcbiAgICAgICAgaW5zdXJhbmNlX3ByaWNlOiBpbnN1cmFuY2VQcmljZSxcbiAgICAgICAgdG90YWxfcHJpY2U6IHRvdGFsUHJpY2UsXG4gICAgICAgIGNvbnRhY3RfbmFtZTogY29udGFjdE5hbWUudHJpbSgpLFxuICAgICAgICBjb250YWN0X3Bob25lOiBjb250YWN0UGhvbmUudHJpbSgpLFxuICAgICAgICBkZWxpdmVyeV9hZGRyZXNzOiBkZWxpdmVyeUFkZHJlc3MudHJpbSgpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRGlzYWJsZSBidXR0b24gZHVyaW5nIHN1Ym1pc3Npb25cbiAgICBidXR0b24uZGlzYWJsZWQgPSB0cnVlXG4gICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ1x1NTIxQlx1NUVGQVx1NEUyRC4uLidcblxuICAgIHRyeSB7XG4gICAgICAvLyBDcmVhdGUgb3JkZXIgdmlhIEFKQVhcbiAgICAgIGNvbnN0IGNzcmZUb2tlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTE1ldGFFbGVtZW50PignbWV0YVtuYW1lPVwiY3NyZi10b2tlblwiXScpPy5jb250ZW50IHx8ICcnXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvdmlzYV9vcmRlcnMnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAnWC1DU1JGLVRva2VuJzogY3NyZlRva2VuXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG9yZGVyRGF0YSlcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcblxuICAgICAgaWYgKHJlc3BvbnNlLm9rICYmIGRhdGEuc3VjY2Vzcykge1xuICAgICAgICAvLyBPcmRlciBjcmVhdGVkIHN1Y2Nlc3NmdWxseSwgdHJpZ2dlciBwYXltZW50IG1vZGFsXG4gICAgICAgIHRoaXMudHJpZ2dlclBheW1lbnRNb2RhbCh0b3RhbFByaWNlLnRvU3RyaW5nKCksIGRhdGEucGF5bWVudF91cmwsIGRhdGEuc3VjY2Vzc191cmwpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YS5tZXNzYWdlIHx8ICdcdTUyMUJcdTVFRkFcdThCQTJcdTUzNTVcdTU5MzFcdThEMjUnKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBvcmRlcjonLCBlcnJvcilcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdcdTUyMUJcdTVFRkFcdThCQTJcdTUzNTVcdTU5MzFcdThEMjVcdUZGMENcdThCRjdcdTkxQ0RcdThCRDUnXG4gICAgICBhbGVydChtZXNzYWdlKVxuICAgICAgYnV0dG9uLmRpc2FibGVkID0gZmFsc2VcbiAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdcdTdBQ0JcdTUyM0JcdTY1MkZcdTRFRDgnXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB0cmlnZ2VyUGF5bWVudE1vZGFsKGFtb3VudDogc3RyaW5nLCBwYXltZW50VXJsOiBzdHJpbmcsIHN1Y2Nlc3NVcmw6IHN0cmluZyk6IHZvaWQge1xuICAgIC8vIEZpbmQgcGF5bWVudC1jb25maXJtYXRpb24gY29udHJvbGxlciBhbmQgdHJpZ2dlciBpdFxuICAgIGNvbnN0IHBheW1lbnRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtY29udHJvbGxlcio9XCJwYXltZW50LWNvbmZpcm1hdGlvblwiXScpIGFzIEhUTUxFbGVtZW50XG5cbiAgICBpZiAoIXBheW1lbnRFbGVtZW50KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdQYXltZW50IGNvbmZpcm1hdGlvbiBjb250cm9sbGVyIG5vdCBmb3VuZCcpXG4gICAgICBhbGVydCgnXHU2NTJGXHU0RUQ4XHU3Q0ZCXHU3RURGXHU2NzJBXHU1MkEwXHU4RjdEXHVGRjBDXHU4QkY3XHU1MjM3XHU2NUIwXHU5ODc1XHU5NzYyXHU5MUNEXHU4QkQ1JylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIEdldCB0aGUgU3RpbXVsdXMgY29udHJvbGxlciBpbnN0YW5jZVxuICAgIGNvbnN0IGFwcCA9ICh3aW5kb3cgYXMgYW55KS5TdGltdWx1c1xuICAgIGlmICghYXBwKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdGltdWx1cyBub3QgZm91bmQnKVxuICAgICAgYWxlcnQoJ1x1N0NGQlx1N0VERlx1OTUxOVx1OEJFRlx1RkYwQ1x1OEJGN1x1NTIzN1x1NjVCMFx1OTg3NVx1OTc2Mlx1OTFDRFx1OEJENScpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBwYXltZW50Q29udHJvbGxlciA9IGFwcC5nZXRDb250cm9sbGVyRm9yRWxlbWVudEFuZElkZW50aWZpZXIocGF5bWVudEVsZW1lbnQsICdwYXltZW50LWNvbmZpcm1hdGlvbicpXG5cbiAgICBpZiAocGF5bWVudENvbnRyb2xsZXIpIHtcbiAgICAgIC8vIFNldCB2YWx1ZXNcbiAgICAgIHBheW1lbnRDb250cm9sbGVyLmFtb3VudFZhbHVlID0gYW1vdW50XG4gICAgICAvLyBHZXQgY3VycmVudCB1c2VyIGVtYWlsIGZyb20gbWV0YSB0YWcgb3IgZWxlbWVudFxuICAgICAgY29uc3QgdXNlckVtYWlsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MTWV0YUVsZW1lbnQ+KCdtZXRhW25hbWU9XCJ1c2VyLWVtYWlsXCJdJyk/LmNvbnRlbnQgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXVzZXItZW1haWxdJyk/LmdldEF0dHJpYnV0ZSgnZGF0YS11c2VyLWVtYWlsJykgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgJ2RlbW9AZXhhbXBsZS5jb20nXG4gICAgICBwYXltZW50Q29udHJvbGxlci51c2VyRW1haWxWYWx1ZSA9IHVzZXJFbWFpbFxuICAgICAgcGF5bWVudENvbnRyb2xsZXIucGF5bWVudFVybFZhbHVlID0gcGF5bWVudFVybFxuICAgICAgcGF5bWVudENvbnRyb2xsZXIuc3VjY2Vzc1VybFZhbHVlID0gc3VjY2Vzc1VybFxuXG4gICAgICAvLyBTaG93IHBhc3N3b3JkIG1vZGFsXG4gICAgICBwYXltZW50Q29udHJvbGxlci5zaG93UGFzc3dvcmRNb2RhbCgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1BheW1lbnQgY29udHJvbGxlciBub3QgaW5pdGlhbGl6ZWQnKVxuICAgICAgYWxlcnQoJ1x1NjUyRlx1NEVEOFx1N0NGQlx1N0VERlx1NjcyQVx1NTIxRFx1NTlDQlx1NTMxNlx1RkYwQ1x1OEJGN1x1NTIzN1x1NjVCMFx1OTg3NVx1OTc2Mlx1OTFDRFx1OEJENScpXG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJyZWdpb25CdXR0b25cIiwgXCJyZWdpb25Db250ZW50XCIsIFwidGlja2V0VHlwZUJ1dHRvblwiLCBcInRpY2tldFR5cGVDb250ZW50XCJdXG5cbiAgZGVjbGFyZSByZWFkb25seSByZWdpb25CdXR0b25UYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgcmVnaW9uQ29udGVudFRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSB0aWNrZXRUeXBlQnV0dG9uVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IHRpY2tldFR5cGVDb250ZW50VGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1JlZ2lvbkJ1dHRvblRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1RpY2tldFR5cGVCdXR0b25UYXJnZXQ6IGJvb2xlYW5cblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiQWJyb2FkUmVnaW9uU2VsZWN0b3IgY29ubmVjdGVkXCIpXG4gIH1cblxuICBzZWxlY3RSZWdpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY2xpY2tlZEJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCByZWdpb24gPSBjbGlja2VkQnV0dG9uLmRhdGFzZXQucmVnaW9uXG5cbiAgICAvLyBVcGRhdGUgYnV0dG9uIHN0YXRlc1xuICAgIGlmICh0aGlzLmhhc1JlZ2lvbkJ1dHRvblRhcmdldCkge1xuICAgICAgdGhpcy5yZWdpb25CdXR0b25UYXJnZXRzLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcInRleHQteWVsbG93LTYwMFwiLCBcImZvbnQtYm9sZFwiLCBcImJvcmRlci1iLTJcIiwgXCJib3JkZXIteWVsbG93LTYwMFwiKVxuICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZChcInRleHQtZ3JheS01MDBcIilcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgY2xpY2tlZEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwidGV4dC1ncmF5LTUwMFwiKVxuICAgIGNsaWNrZWRCdXR0b24uY2xhc3NMaXN0LmFkZChcInRleHQteWVsbG93LTYwMFwiLCBcImZvbnQtYm9sZFwiLCBcImJvcmRlci1iLTJcIiwgXCJib3JkZXIteWVsbG93LTYwMFwiKVxuXG4gICAgLy8gVXBkYXRlIGNvbnRlbnQgdmlzaWJpbGl0eVxuICAgIHRoaXMucmVnaW9uQ29udGVudFRhcmdldHMuZm9yRWFjaCgoY29udGVudCkgPT4ge1xuICAgICAgaWYgKGNvbnRlbnQuZGF0YXNldC5yZWdpb24gPT09IHJlZ2lvbikge1xuICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBzZWxlY3RUaWNrZXRUeXBlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNsaWNrZWRCdXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgdGlja2V0VHlwZSA9IGNsaWNrZWRCdXR0b24uZGF0YXNldC50aWNrZXRUeXBlXG5cbiAgICAvLyBVcGRhdGUgYnV0dG9uIHN0YXRlc1xuICAgIGlmICh0aGlzLmhhc1RpY2tldFR5cGVCdXR0b25UYXJnZXQpIHtcbiAgICAgIHRoaXMudGlja2V0VHlwZUJ1dHRvblRhcmdldHMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiYmcteWVsbG93LTUwMFwiLCBcInRleHQtd2hpdGVcIilcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJiZy1ncmF5LTEwMFwiLCBcInRleHQtZ3JheS03MDBcIilcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgY2xpY2tlZEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiYmctZ3JheS0xMDBcIiwgXCJ0ZXh0LWdyYXktNzAwXCIpXG4gICAgY2xpY2tlZEJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiYmcteWVsbG93LTUwMFwiLCBcInRleHQtd2hpdGVcIilcblxuICAgIC8vIFVwZGF0ZSBjb250ZW50IHZpc2liaWxpdHlcbiAgICB0aGlzLnRpY2tldFR5cGVDb250ZW50VGFyZ2V0cy5mb3JFYWNoKChjb250ZW50KSA9PiB7XG4gICAgICBpZiAoY29udGVudC5kYXRhc2V0LnRpY2tldFR5cGUgPT09IHRpY2tldFR5cGUpIHtcbiAgICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgc3dhcFN0YXRpb25zKCk6IHZvaWQge1xuICAgIGNvbnN0IG9yaWdpblNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPVwib3JpZ2luXCJdJykgYXMgSFRNTFNlbGVjdEVsZW1lbnRcbiAgICBjb25zdCBkZXN0aW5hdGlvblNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPVwiZGVzdGluYXRpb25cIl0nKSBhcyBIVE1MU2VsZWN0RWxlbWVudFxuXG4gICAgaWYgKG9yaWdpblNlbGVjdCAmJiBkZXN0aW5hdGlvblNlbGVjdCkge1xuICAgICAgY29uc3QgdGVtcCA9IG9yaWdpblNlbGVjdC52YWx1ZVxuICAgICAgb3JpZ2luU2VsZWN0LnZhbHVlID0gZGVzdGluYXRpb25TZWxlY3QudmFsdWVcbiAgICAgIGRlc3RpbmF0aW9uU2VsZWN0LnZhbHVlID0gdGVtcFxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wibW9kYWxcIiwgXCJkYXRlQnV0dG9uXCJdXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgY3VycmVudERhdGU6IFN0cmluZ1xuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkYXRlQnV0dG9uVGFyZ2V0czogSFRNTEJ1dHRvbkVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IGN1cnJlbnREYXRlVmFsdWU6IHN0cmluZ1xuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJBYnJvYWREYXRlUGlja2VyIGNvbm5lY3RlZFwiKVxuICAgIFxuICAgIC8vIExpc3RlbiBmb3Igb3BlbiBkYXRlIHBpY2tlciBldmVudFxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdhYnJvYWQtdGlja2V0LXNlYXJjaDpvcGVuLWRhdGUtcGlja2VyJywgKCkgPT4ge1xuICAgICAgdGhpcy5vcGVuTW9kYWwoKVxuICAgIH0pXG4gICAgXG4gICAgLy8gVXBkYXRlIHBhc3QgZGF0ZXMgYmFzZWQgb24gY2xpZW50IHRpbWV6b25lXG4gICAgdGhpcy51cGRhdGVQYXN0RGF0ZXMoKVxuICB9XG5cbiAgb3Blbk1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJ1xuICB9XG5cbiAgY2xvc2VNb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJydcbiAgfVxuXG4gIHNlbGVjdERhdGUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGRhdGVTdHIgPSB0YXJnZXQuZGF0YXNldC5kYXRlXG5cbiAgICBpZiAoZGF0ZVN0cikge1xuICAgICAgLy8gQ2hlY2sgaWYgZGF0ZSBpcyBub3QgaW4gdGhlIHBhc3RcbiAgICAgIGNvbnN0IHNlbGVjdGVkRGF0ZSA9IG5ldyBEYXRlKGAke2RhdGVTdHJ9VDAwOjAwOjAwYClcbiAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxuICAgICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICAgIHNlbGVjdGVkRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICAgICAgXG4gICAgICBpZiAoc2VsZWN0ZWREYXRlIDwgdG9kYXkpIHtcbiAgICAgICAgcmV0dXJuIC8vIERvbid0IHNlbGVjdCBwYXN0IGRhdGVzXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEZpbmQgdGhlIGFicm9hZC10aWNrZXQtc2VhcmNoIGNvbnRyb2xsZXIgYW5kIGNhbGwgaXRzIHVwZGF0ZURhdGUgbWV0aG9kXG4gICAgICBjb25zdCBzZWFyY2hDb250cm9sbGVyID0gdGhpcy5hcHBsaWNhdGlvbi5nZXRDb250cm9sbGVyRm9yRWxlbWVudEFuZElkZW50aWZpZXIoXG4gICAgICAgIHRoaXMuZWxlbWVudCxcbiAgICAgICAgJ2Ficm9hZC10aWNrZXQtc2VhcmNoJ1xuICAgICAgKVxuICAgICAgXG4gICAgICBpZiAoc2VhcmNoQ29udHJvbGxlciAmJiAndXBkYXRlRGF0ZScgaW4gc2VhcmNoQ29udHJvbGxlcikge1xuICAgICAgICAoc2VhcmNoQ29udHJvbGxlciBhcyBhbnkpLnVwZGF0ZURhdGUoZGF0ZVN0cilcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGhpcy5jbG9zZU1vZGFsKClcbiAgICB9XG4gIH1cbiAgXG4gIC8vIFVwZGF0ZSBwYXN0IGRhdGVzIHRvIGJlIGRpc2FibGVkXG4gIHByaXZhdGUgdXBkYXRlUGFzdERhdGVzKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5kYXRlQnV0dG9uVGFyZ2V0cykgcmV0dXJuXG4gICAgXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXG4gICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICBcbiAgICB0aGlzLmRhdGVCdXR0b25UYXJnZXRzLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgIGNvbnN0IGRhdGVTdHIgPSBidXR0b24uZGF0YXNldC5kYXRlXG4gICAgICBpZiAoIWRhdGVTdHIpIHJldHVyblxuICAgICAgXG4gICAgICBjb25zdCBidXR0b25EYXRlID0gbmV3IERhdGUoYCR7ZGF0ZVN0cn1UMDA6MDA6MDBgKVxuICAgICAgYnV0dG9uRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICAgICAgXG4gICAgICBpZiAoYnV0dG9uRGF0ZSA8IHRvZGF5KSB7XG4gICAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IHRydWVcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktNDAnLCAnY3Vyc29yLW5vdC1hbGxvd2VkJylcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2hvdmVyOmJnLWJsdWUtNTAnKVxuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcInR5cGVcIl1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHR5cGVUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzVHlwZVRhcmdldDogYm9vbGVhblxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJBYnJvYWRQYXNzZW5nZXJTZWxlY3RvciBjb25uZWN0ZWRcIilcbiAgfVxuXG4gIHNlbGVjdChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjbGlja2VkRWxlbWVudCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBzZWxlY3RlZFR5cGUgPSBjbGlja2VkRWxlbWVudC5kYXRhc2V0LmFicm9hZFBhc3NlbmdlclNlbGVjdG9yVHlwZVBhcmFtXG5cbiAgICAvLyBSZW1vdmUgc2VsZWN0ZWQgc3RhdGUgZnJvbSBhbGwgdHlwZSBlbGVtZW50c1xuICAgIGlmICh0aGlzLmhhc1R5cGVUYXJnZXQpIHtcbiAgICAgIHRoaXMudHlwZVRhcmdldHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI0ZGRkJGMF1cIiwgXCJib3JkZXJcIiwgXCJib3JkZXItWyNGRkU1QjVdXCIpXG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImJnLWdyYXktMTAwXCIpXG4gICAgICAgIFxuICAgICAgICAvLyBSZW1vdmUgY2hlY2ttYXJrXG4gICAgICAgIGNvbnN0IGNoZWNrbWFyayA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5hYnNvbHV0ZVwiKVxuICAgICAgICBpZiAoY2hlY2ttYXJrKSB7XG4gICAgICAgICAgY2hlY2ttYXJrLnJlbW92ZSgpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gQWRkIHNlbGVjdGVkIHN0YXRlIHRvIGNsaWNrZWQgZWxlbWVudFxuICAgIGNsaWNrZWRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1ncmF5LTEwMFwiKVxuICAgIGNsaWNrZWRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJiZy1bI0ZGRkJGMF1cIiwgXCJib3JkZXJcIiwgXCJib3JkZXItWyNGRkU1QjVdXCIpXG4gICAgXG4gICAgLy8gQWRkIGNoZWNrbWFya1xuICAgIGNvbnN0IGNoZWNrbWFya0hUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwiYWJzb2x1dGUgYm90dG9tLTAgcmlnaHQtMCB3LTMgaC0zIGJnLVsjRkZDQzAwXSByb3VuZGVkLXRsLWxnIHJvdW5kZWQtYnItbGcgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgPHN2ZyBjbGFzcz1cInctMiBoLTIgdGV4dC13aGl0ZVwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICAgICAgICAgIDxwYXRoIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZS13aWR0aD1cIjRcIiBkPVwiTTUgMTNsNCA0TDE5IDdcIj48L3BhdGg+XG4gICAgICAgIDwvc3ZnPlxuICAgICAgPC9kaXY+XG4gICAgYFxuICAgIGNsaWNrZWRFbGVtZW50Lmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBjaGVja21hcmtIVE1MKVxuXG4gICAgLy8gVXBkYXRlIHRoZSBVUkwgcGFyYW1ldGVycyB0byBpbmNsdWRlIHRoZSBzZWxlY3RlZCBwYXNzZW5nZXIgdHlwZVxuICAgIGlmIChzZWxlY3RlZFR5cGUpIHtcbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpXG4gICAgICBjb25zdCB0aWNrZXRJZCA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwiYWJyb2FkX3RpY2tldF9pZFwiKVxuICAgICAgY29uc3Qgc2VhdENhdGVnb3J5ID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJzZWF0X2NhdGVnb3J5XCIpXG4gICAgICBcbiAgICAgIGlmICh0aWNrZXRJZCAmJiBzZWF0Q2F0ZWdvcnkpIHtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBib29raW5nIGJ1dHRvbiBsaW5rc1xuICAgICAgICBjb25zdCBib29raW5nQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2FbaHJlZio9XCJuZXdfYWJyb2FkX3RpY2tldF9vcmRlclwiXScpXG4gICAgICAgIGJvb2tpbmdCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgICAgICAgIGNvbnN0IGhyZWYgPSBidXR0b24uZ2V0QXR0cmlidXRlKFwiaHJlZlwiKVxuICAgICAgICAgIGlmIChocmVmKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdVcmwgPSBuZXcgVVJMKGhyZWYsIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4pXG4gICAgICAgICAgICBuZXdVcmwuc2VhcmNoUGFyYW1zLnNldChcInBhc3Nlbmdlcl90eXBlXCIsIHNlbGVjdGVkVHlwZSlcbiAgICAgICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIG5ld1VybC50b1N0cmluZygpKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcIm1vZGFsXCIsIFwibmFtZUlucHV0XCIsIFwicGhvbmVJbnB1dFwiLCBcImVtYWlsSW5wdXRcIl1cblxuICBkZWNsYXJlIHJlYWRvbmx5IG1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IG5hbWVJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHBob25lSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBlbWFpbElucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzTmFtZUlucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUGhvbmVJbnB1dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0VtYWlsSW5wdXRUYXJnZXQ6IGJvb2xlYW5cblxuICBhc3luYyBzdWJtaXRPcmRlcihldmVudDogRXZlbnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgXG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGNvbnN0IGFicm9hZFRpY2tldElkID0gYnV0dG9uLmRhdGFzZXQuYWJyb2FkVGlja2V0SWRcbiAgICBjb25zdCB0b3RhbFByaWNlID0gYnV0dG9uLmRhdGFzZXQudG90YWxQcmljZVxuICAgIFxuICAgIC8vIFZhbGlkYXRlIGZvcm0gaW5wdXRzXG4gICAgaWYgKCF0aGlzLnZhbGlkYXRlRm9ybSgpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gR2V0IGZvcm0gZGF0YSBmcm9tIGlucHV0IGZpZWxkc1xuICAgIGNvbnN0IHBhc3NlbmdlclR5cGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXNzZW5nZXJfdHlwZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBzZWF0Q2F0ZWdvcnlJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWF0X2NhdGVnb3J5JykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IG5vdGVzSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbm90ZXMnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgXG4gICAgY29uc3QgZm9ybURhdGEgPSB7XG4gICAgICBhYnJvYWRfdGlja2V0X29yZGVyOiB7XG4gICAgICAgIGFicm9hZF90aWNrZXRfaWQ6IGFicm9hZFRpY2tldElkLFxuICAgICAgICBwYXNzZW5nZXJfbmFtZTogdGhpcy5uYW1lSW5wdXRUYXJnZXQudmFsdWUsXG4gICAgICAgIGNvbnRhY3RfcGhvbmU6IHRoaXMucGhvbmVJbnB1dFRhcmdldC52YWx1ZSxcbiAgICAgICAgY29udGFjdF9lbWFpbDogdGhpcy5lbWFpbElucHV0VGFyZ2V0LnZhbHVlLFxuICAgICAgICBwYXNzZW5nZXJfdHlwZTogcGFzc2VuZ2VyVHlwZUlucHV0Py52YWx1ZSB8fCAnJyxcbiAgICAgICAgc2VhdF9jYXRlZ29yeTogc2VhdENhdGVnb3J5SW5wdXQ/LnZhbHVlIHx8ICcnLFxuICAgICAgICB0b3RhbF9wcmljZTogdG90YWxQcmljZSxcbiAgICAgICAgbm90ZXM6IG5vdGVzSW5wdXQ/LnZhbHVlIHx8ICcnXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIERpc2FibGUgYnV0dG9uIGR1cmluZyBzdWJtaXNzaW9uXG4gICAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZVxuICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdcdTUyMUJcdTVFRkFcdTRFMkQuLi4nXG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNzcmZUb2tlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTE1ldGFFbGVtZW50PignbWV0YVtuYW1lPVwiY3NyZi10b2tlblwiXScpPy5jb250ZW50IHx8ICcnXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYWJyb2FkX3RpY2tldF9vcmRlcnMuanNvbicsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ1gtQ1NSRi1Ub2tlbic6IGNzcmZUb2tlblxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShmb3JtRGF0YSlcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLm9rICYmIGRhdGEuc3VjY2Vzcykge1xuICAgICAgICAvLyBPcmRlciBjcmVhdGVkIHN1Y2Nlc3NmdWxseSwgdHJpZ2dlciBwYXltZW50IG1vZGFsXG4gICAgICAgIHRoaXMudHJpZ2dlclBheW1lbnRNb2RhbCh0b3RhbFByaWNlIHx8ICcwJywgZGF0YS5wYXltZW50X3VybCwgZGF0YS5zdWNjZXNzX3VybClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLm1lc3NhZ2UgfHwgJ1x1NTIxQlx1NUVGQVx1OEJBMlx1NTM1NVx1NTkzMVx1OEQyNScpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIG9yZGVyOicsIGVycm9yKVxuICAgICAgY29uc3QgbWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1x1NTIxQlx1NUVGQVx1OEJBMlx1NTM1NVx1NTkzMVx1OEQyNVx1RkYwQ1x1OEJGN1x1OTFDRFx1OEJENSdcbiAgICAgIGFsZXJ0KG1lc3NhZ2UpXG4gICAgICBidXR0b24uZGlzYWJsZWQgPSBmYWxzZVxuICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ1x1N0FDQlx1NTM3M1x1OTg4NFx1OEJBMidcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHZhbGlkYXRlRm9ybSgpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuaGFzTmFtZUlucHV0VGFyZ2V0IHx8ICF0aGlzLm5hbWVJbnB1dFRhcmdldC52YWx1ZS50cmltKCkpIHtcbiAgICAgIGFsZXJ0KCdcdThCRjdcdThGOTNcdTUxNjVcdTU5RDNcdTU0MEQnKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIFxuICAgIGlmICghdGhpcy5oYXNQaG9uZUlucHV0VGFyZ2V0IHx8ICF0aGlzLnBob25lSW5wdXRUYXJnZXQudmFsdWUudHJpbSgpKSB7XG4gICAgICBhbGVydCgnXHU4QkY3XHU4RjkzXHU1MTY1XHU2MjRCXHU2NzNBXHU1M0Y3JylcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBcbiAgICBpZiAoIXRoaXMuaGFzRW1haWxJbnB1dFRhcmdldCB8fCAhdGhpcy5lbWFpbElucHV0VGFyZ2V0LnZhbHVlLnRyaW0oKSkge1xuICAgICAgYWxlcnQoJ1x1OEJGN1x1OEY5M1x1NTE2NVx1OTBBRVx1N0JCMScpXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgXG4gICAgLy8gRW1haWwgZm9ybWF0IHZhbGlkYXRpb25cbiAgICBjb25zdCBlbWFpbFJlZ2V4ID0gL15bXlxcc0BdK0BbXlxcc0BdK1xcLlteXFxzQF0rJC9cbiAgICBpZiAoIWVtYWlsUmVnZXgudGVzdCh0aGlzLmVtYWlsSW5wdXRUYXJnZXQudmFsdWUpKSB7XG4gICAgICBhbGVydCgnXHU4QkY3XHU4RjkzXHU1MTY1XHU2NzA5XHU2NTQ4XHU3Njg0XHU5MEFFXHU3QkIxXHU1NzMwXHU1NzQwJylcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgcHJpdmF0ZSB0cmlnZ2VyUGF5bWVudE1vZGFsKGFtb3VudDogc3RyaW5nLCBwYXltZW50VXJsOiBzdHJpbmcsIHN1Y2Nlc3NVcmw6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IHBheW1lbnRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtY29udHJvbGxlcio9XCJwYXltZW50LWNvbmZpcm1hdGlvblwiXScpIGFzIEhUTUxFbGVtZW50XG4gICAgXG4gICAgaWYgKCFwYXltZW50RWxlbWVudCkge1xuICAgICAgY29uc29sZS5lcnJvcignUGF5bWVudCBjb25maXJtYXRpb24gY29udHJvbGxlciBub3QgZm91bmQnKVxuICAgICAgYWxlcnQoJ1x1NjUyRlx1NEVEOFx1N0NGQlx1N0VERlx1NjcyQVx1NTJBMFx1OEY3RFx1RkYwQ1x1OEJGN1x1NTIzN1x1NjVCMFx1OTg3NVx1OTc2Mlx1OTFDRFx1OEJENScpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgY29uc3QgYXBwID0gKHdpbmRvdyBhcyBhbnkpLlN0aW11bHVzXG4gICAgaWYgKCFhcHApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N0aW11bHVzIG5vdCBmb3VuZCcpXG4gICAgICBhbGVydCgnXHU3Q0ZCXHU3RURGXHU5NTE5XHU4QkVGXHVGRjBDXHU4QkY3XHU1MjM3XHU2NUIwXHU5ODc1XHU5NzYyXHU5MUNEXHU4QkQ1JylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICBjb25zdCBwYXltZW50Q29udHJvbGxlciA9IGFwcC5nZXRDb250cm9sbGVyRm9yRWxlbWVudEFuZElkZW50aWZpZXIocGF5bWVudEVsZW1lbnQsICdwYXltZW50LWNvbmZpcm1hdGlvbicpXG4gICAgXG4gICAgaWYgKHBheW1lbnRDb250cm9sbGVyKSB7XG4gICAgICBwYXltZW50Q29udHJvbGxlci5hbW91bnRWYWx1ZSA9IGFtb3VudFxuICAgICAgcGF5bWVudENvbnRyb2xsZXIudXNlckVtYWlsVmFsdWUgPSB0aGlzLmVtYWlsSW5wdXRUYXJnZXQudmFsdWVcbiAgICAgIHBheW1lbnRDb250cm9sbGVyLnBheW1lbnRVcmxWYWx1ZSA9IHBheW1lbnRVcmxcbiAgICAgIHBheW1lbnRDb250cm9sbGVyLnN1Y2Nlc3NVcmxWYWx1ZSA9IHN1Y2Nlc3NVcmxcbiAgICAgIFxuICAgICAgcGF5bWVudENvbnRyb2xsZXIuc2hvd1Bhc3N3b3JkTW9kYWwoKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdQYXltZW50IGNvbnRyb2xsZXIgbm90IGluaXRpYWxpemVkJylcbiAgICAgIGFsZXJ0KCdcdTY1MkZcdTRFRDhcdTdDRkJcdTdFREZcdTY3MkFcdTUyMURcdTU5Q0JcdTUzMTZcdUZGMENcdThCRjdcdTUyMzdcdTY1QjBcdTk4NzVcdTk3NjJcdTkxQ0RcdThCRDUnKVxuICAgIH1cbiAgfVxuXG4gIG9wZW5QYXNzZW5nZXJTZWxlY3RvcigpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gIH1cblxuICBjbG9zZVBhc3NlbmdlclNlbGVjdG9yKCk6IHZvaWQge1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgfVxuXG4gIHNlbGVjdFBhc3NlbmdlcihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBlbGVtZW50ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IG5hbWUgPSBlbGVtZW50LmRhdGFzZXQuYWJyb2FkT3JkZXJGb3JtTmFtZVBhcmFtIHx8ICcnXG4gICAgY29uc3QgcGhvbmUgPSBlbGVtZW50LmRhdGFzZXQuYWJyb2FkT3JkZXJGb3JtUGhvbmVQYXJhbSB8fCAnJ1xuICAgIFxuICAgIGlmICh0aGlzLmhhc05hbWVJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5uYW1lSW5wdXRUYXJnZXQudmFsdWUgPSBuYW1lXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLmhhc1Bob25lSW5wdXRUYXJnZXQpIHtcbiAgICAgIHRoaXMucGhvbmVJbnB1dFRhcmdldC52YWx1ZSA9IHBob25lXG4gICAgfVxuICAgIFxuICAgIHRoaXMuY2xvc2VQYXNzZW5nZXJTZWxlY3RvcigpXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbi8vIFN0YXRpb24gZGF0YSBpbnRlcmZhY2VcbmludGVyZmFjZSBTdGF0aW9uIHtcbiAgbmFtZTogc3RyaW5nXG4gIG5hbWVFbjogc3RyaW5nXG4gIGNpdHk6IHN0cmluZ1xufVxuXG4vLyBTdGF0aW9uIHNlbGVjdGlvbiBjb250cm9sbGVyIGZvciBhYnJvYWQgdGlja2V0c1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwiZm9ybVwiLFxuICAgIFwicmVnaW9uSW5wdXRcIixcbiAgICBcIm9yaWdpbklucHV0XCIsXG4gICAgXCJkZXN0aW5hdGlvbklucHV0XCIsXG4gICAgXCJvcmlnaW5UZXh0XCIsXG4gICAgXCJkZXN0aW5hdGlvblRleHRcIixcbiAgICBcImRhdGVJbnB1dFwiLFxuICAgIFwiZGF0ZVRleHRcIixcbiAgICBcInN0YXRpb25Nb2RhbFwiLFxuICAgIFwic3RhdGlvbkxpc3RcIixcbiAgICBcInNlYXJjaElucHV0XCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgY3VycmVudERhdGU6IFN0cmluZ1xuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBmb3JtVGFyZ2V0OiBIVE1MRm9ybUVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSByZWdpb25JbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IG9yaWdpbklucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVzdGluYXRpb25JbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IG9yaWdpblRleHRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVzdGluYXRpb25UZXh0VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRhdGVJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRhdGVUZXh0VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHN0YXRpb25Nb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzdGF0aW9uTGlzdFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzZWFyY2hJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIGN1cnJlbnREYXRlVmFsdWU6IHN0cmluZ1xuXG4gIHByaXZhdGUgY3VycmVudFNlbGVjdGlvblR5cGU6ICdvcmlnaW4nIHwgJ2Rlc3RpbmF0aW9uJyA9ICdvcmlnaW4nXG4gIHByaXZhdGUgY3VycmVudFJlZ2lvbjogc3RyaW5nID0gJ2phcGFuJ1xuXG4gIC8vIFx1NjVFNVx1NjcyQ1x1N0FEOVx1NzBCOVx1NjU3MFx1NjM2RVxuICBwcml2YXRlIGphcGFuU3RhdGlvbnM6IFJlY29yZDxzdHJpbmcsIFN0YXRpb25bXT4gPSB7XG4gICAgJ1x1NEUxQ1x1NEVBQyc6IFtcbiAgICAgIHsgbmFtZTogJ1x1NEUxQ1x1NEVBQ1x1N0FEOScsIG5hbWVFbjogJ1Rva3lvIFN0YXRpb24nLCBjaXR5OiAnXHU0RTFDXHU0RUFDJyB9LFxuICAgICAgeyBuYW1lOiAnXHU2NUIwXHU1QkJGXHU3QUQ5JywgbmFtZUVuOiAnU2hpbmp1a3UgU3RhdGlvbicsIGNpdHk6ICdcdTRFMUNcdTRFQUMnIH0sXG4gICAgICB7IG5hbWU6ICdcdTZEQTlcdThDMzdcdTdBRDknLCBuYW1lRW46ICdTaGlidXlhIFN0YXRpb24nLCBjaXR5OiAnXHU0RTFDXHU0RUFDJyB9LFxuICAgICAgeyBuYW1lOiAnXHU2QzYwXHU4ODhCXHU3QUQ5JywgbmFtZUVuOiAnSWtlYnVrdXJvIFN0YXRpb24nLCBjaXR5OiAnXHU0RTFDXHU0RUFDJyB9LFxuICAgICAgeyBuYW1lOiAnXHU1NEMxXHU1REREXHU3QUQ5JywgbmFtZUVuOiAnU2hpbmFnYXdhIFN0YXRpb24nLCBjaXR5OiAnXHU0RTFDXHU0RUFDJyB9XG4gICAgXSxcbiAgICAnXHU1OTI3XHU5NjJBJzogW1xuICAgICAgeyBuYW1lOiAnXHU2NUIwXHU1OTI3XHU5NjJBXHU3QUQ5JywgbmFtZUVuOiAnU2hpbi1Pc2FrYSBTdGF0aW9uJywgY2l0eTogJ1x1NTkyN1x1OTYyQScgfSxcbiAgICAgIHsgbmFtZTogJ1x1NTkyN1x1OTYyQVx1N0FEOScsIG5hbWVFbjogJ09zYWthIFN0YXRpb24nLCBjaXR5OiAnXHU1OTI3XHU5NjJBJyB9LFxuICAgICAgeyBuYW1lOiAnXHU5NkJFXHU2Q0UyXHU3QUQ5JywgbmFtZUVuOiAnTmFtYmEgU3RhdGlvbicsIGNpdHk6ICdcdTU5MjdcdTk2MkEnIH0sXG4gICAgICB7IG5hbWU6ICdcdTU5MjlcdTczOEJcdTVCRkFcdTdBRDknLCBuYW1lRW46ICdUZW5ub2ppIFN0YXRpb24nLCBjaXR5OiAnXHU1OTI3XHU5NjJBJyB9XG4gICAgXSxcbiAgICAnXHU0RUFDXHU5MEZEJzogW1xuICAgICAgeyBuYW1lOiAnXHU0RUFDXHU5MEZEXHU3QUQ5JywgbmFtZUVuOiAnS3lvdG8gU3RhdGlvbicsIGNpdHk6ICdcdTRFQUNcdTkwRkQnIH0sXG4gICAgICB7IG5hbWU6ICdcdTU0QzFcdTVERERcdTdBRDknLCBuYW1lRW46ICdTaGluYWdhd2EgU3RhdGlvbicsIGNpdHk6ICdcdTRFQUNcdTkwRkQnIH1cbiAgICBdLFxuICAgICdcdTU0MERcdTUzRTRcdTVDNEInOiBbXG4gICAgICB7IG5hbWU6ICdcdTU0MERcdTUzRTRcdTVDNEJcdTdBRDknLCBuYW1lRW46ICdOYWdveWEgU3RhdGlvbicsIGNpdHk6ICdcdTU0MERcdTUzRTRcdTVDNEInIH1cbiAgICBdLFxuICAgICdcdTRFRDlcdTUzRjAnOiBbXG4gICAgICB7IG5hbWU6ICdcdTRFRDlcdTUzRjBcdTdBRDknLCBuYW1lRW46ICdTZW5kYWkgU3RhdGlvbicsIGNpdHk6ICdcdTRFRDlcdTUzRjAnIH1cbiAgICBdLFxuICAgICdcdTk3NTJcdTY4RUUnOiBbXG4gICAgICB7IG5hbWU6ICdcdTk3NTJcdTY4RUVcdTdBRDknLCBuYW1lRW46ICdBb21vcmkgU3RhdGlvbicsIGNpdHk6ICdcdTk3NTJcdTY4RUUnIH1cbiAgICBdLFxuICAgICdcdTY1QjBcdTZGNUYnOiBbXG4gICAgICB7IG5hbWU6ICdcdTY1QjBcdTZGNUZcdTdBRDknLCBuYW1lRW46ICdOaWlnYXRhIFN0YXRpb24nLCBjaXR5OiAnXHU2NUIwXHU2RjVGJyB9XG4gICAgXSxcbiAgICAnXHU1RTdGXHU1QzlCJzogW1xuICAgICAgeyBuYW1lOiAnXHU1RTdGXHU1QzlCXHU3QUQ5JywgbmFtZUVuOiAnSGlyb3NoaW1hIFN0YXRpb24nLCBjaXR5OiAnXHU1RTdGXHU1QzlCJyB9XG4gICAgXSxcbiAgICAnXHU3OThGXHU1MTg4JzogW1xuICAgICAgeyBuYW1lOiAnXHU1MzVBXHU1OTFBXHU3QUQ5JywgbmFtZUVuOiAnSGFrYXRhIFN0YXRpb24nLCBjaXR5OiAnXHU3OThGXHU1MTg4JyB9XG4gICAgXSxcbiAgICAnXHU5RTdGXHU1MTNGXHU1QzlCJzogW1xuICAgICAgeyBuYW1lOiAnXHU5RTdGXHU1MTNGXHU1QzlCXHU0RTJEXHU1OTJFXHU3QUQ5JywgbmFtZUVuOiAnS2Fnb3NoaW1hLUNodW8gU3RhdGlvbicsIGNpdHk6ICdcdTlFN0ZcdTUxM0ZcdTVDOUInIH1cbiAgICBdLFxuICAgICdcdTUzMTdcdTZENzdcdTkwNTMnOiBbXG4gICAgICB7IG5hbWU6ICdcdTY3MkRcdTVFNENcdTdBRDknLCBuYW1lRW46ICdTYXBwb3JvIFN0YXRpb24nLCBjaXR5OiAnXHU1MzE3XHU2RDc3XHU5MDUzJyB9XG4gICAgXVxuICB9XG5cbiAgLy8gXHU2QjI3XHU2RDMyXHU3QUQ5XHU3MEI5XHU2NTcwXHU2MzZFXG4gIHByaXZhdGUgZXVyb3BlU3RhdGlvbnM6IFJlY29yZDxzdHJpbmcsIFN0YXRpb25bXT4gPSB7XG4gICAgJ1x1NkNENVx1NTZGRCc6IFtcbiAgICAgIHsgbmFtZTogJ1x1NURGNFx1OUVDRVx1NTMxN1x1N0FEOScsIG5hbWVFbjogJ1BhcmlzIE5vcmQnLCBjaXR5OiAnXHU2Q0Q1XHU1NkZEJyB9LFxuICAgICAgeyBuYW1lOiAnXHU1REY0XHU5RUNFXHU5MUNDXHU2NjAyXHU3QUQ5JywgbmFtZUVuOiAnUGFyaXMgR2FyZSBkZSBMeW9uJywgY2l0eTogJ1x1NkNENVx1NTZGRCcgfSxcbiAgICAgIHsgbmFtZTogJ1x1OTFDQ1x1NjYwMlx1N0FEOScsIG5hbWVFbjogJ0x5b24gU3RhdGlvbicsIGNpdHk6ICdcdTZDRDVcdTU2RkQnIH0sXG4gICAgICB7IG5hbWU6ICdcdTlBNkNcdThENUJcdTdBRDknLCBuYW1lRW46ICdNYXJzZWlsbGUgU3RhdGlvbicsIGNpdHk6ICdcdTZDRDVcdTU2RkQnIH1cbiAgICBdLFxuICAgICdcdTgzNzdcdTUxNzAnOiBbXG4gICAgICB7IG5hbWU6ICdcdTk2M0ZcdTU5QzZcdTY1QUZcdTcyNzlcdTRFMzlcdTRFMkRcdTU5MkVcdThGNjZcdTdBRDknLCBuYW1lRW46ICdBbXN0ZXJkYW0gQ2VudHJhYWwnLCBjaXR5OiAnXHU4Mzc3XHU1MTcwJyB9LFxuICAgICAgeyBuYW1lOiAnXHU5RTdGXHU3Mjc5XHU0RTM5XHU0RTJEXHU1OTJFXHU4RjY2XHU3QUQ5JywgbmFtZUVuOiAnUm90dGVyZGFtIENlbnRyYWFsJywgY2l0eTogJ1x1ODM3N1x1NTE3MCcgfVxuICAgIF0sXG4gICAgJ1x1NUZCN1x1NTZGRCc6IFtcbiAgICAgIHsgbmFtZTogJ1x1NjdDRlx1Njc5N1x1NEUyRFx1NTkyRVx1OEY2Nlx1N0FEOScsIG5hbWVFbjogJ0JlcmxpbiBIYXVwdGJhaG5ob2YnLCBjaXR5OiAnXHU1RkI3XHU1NkZEJyB9LFxuICAgICAgeyBuYW1lOiAnXHU2MTU1XHU1QzNDXHU5RUQxXHU0RTJEXHU1OTJFXHU4RjY2XHU3QUQ5JywgbmFtZUVuOiAnTVx1MDBGQ25jaGVuIEhhdXB0YmFobmhvZicsIGNpdHk6ICdcdTVGQjdcdTU2RkQnIH0sXG4gICAgICB7IG5hbWU6ICdcdTZDRDVcdTUxNzBcdTUxNEJcdTc5OEZcdTRFMkRcdTU5MkVcdThGNjZcdTdBRDknLCBuYW1lRW46ICdGcmFua2Z1cnQgSGF1cHRiYWhuaG9mJywgY2l0eTogJ1x1NUZCN1x1NTZGRCcgfVxuICAgIF0sXG4gICAgJ1x1NjEwRlx1NTkyN1x1NTIyOSc6IFtcbiAgICAgIHsgbmFtZTogJ1x1N0Y1N1x1OUE2Q1x1NzI3OVx1N0M3M1x1NUMzQ1x1N0FEOScsIG5hbWVFbjogJ1JvbWEgVGVybWluaScsIGNpdHk6ICdcdTYxMEZcdTU5MjdcdTUyMjknIH0sXG4gICAgICB7IG5hbWU6ICdcdTdDNzNcdTUxNzBcdTRFMkRcdTU5MkVcdThGNjZcdTdBRDknLCBuYW1lRW46ICdNaWxhbm8gQ2VudHJhbGUnLCBjaXR5OiAnXHU2MTBGXHU1OTI3XHU1MjI5JyB9LFxuICAgICAgeyBuYW1lOiAnXHU0RjVCXHU3RjU3XHU0RjI2XHU4NDI4XHU1NzIzXHU2QkNEXHU3MzlCXHU1MjI5XHU0RTlBXHU4RjY2XHU3QUQ5JywgbmFtZUVuOiAnRmlyZW56ZSBTYW50YSBNYXJpYSBOb3ZlbGxhJywgY2l0eTogJ1x1NjEwRlx1NTkyN1x1NTIyOScgfVxuICAgIF0sXG4gICAgJ1x1ODk3Rlx1NzNFRFx1NzI1OSc6IFtcbiAgICAgIHsgbmFtZTogJ1x1OUE2Q1x1NUZCN1x1OTFDQ1x1OTYzRlx1NjI1OFx1NjdFNVx1N0FEOScsIG5hbWVFbjogJ01hZHJpZCBBdG9jaGEnLCBjaXR5OiAnXHU4OTdGXHU3M0VEXHU3MjU5JyB9LFxuICAgICAgeyBuYW1lOiAnXHU1REY0XHU1ODVFXHU3RjU3XHU5MEEzXHU2ODUxXHU2NUFGXHU3QUQ5JywgbmFtZUVuOiAnQmFyY2Vsb25hIFNhbnRzJywgY2l0eTogJ1x1ODk3Rlx1NzNFRFx1NzI1OScgfVxuICAgIF1cbiAgfVxuXG4gIC8vIFx1NzBFRFx1OTVFOFx1N0VCRlx1OERFRlxuICBwcml2YXRlIHBvcHVsYXJSb3V0ZXMgPSB7XG4gICAgamFwYW46IFtcbiAgICAgIHsgb3JpZ2luOiAnXHU0RTFDXHU0RUFDXHU3QUQ5JywgZGVzdGluYXRpb246ICdcdTRFQUNcdTkwRkRcdTdBRDknIH0sXG4gICAgICB7IG9yaWdpbjogJ1x1NEUxQ1x1NEVBQ1x1N0FEOScsIGRlc3RpbmF0aW9uOiAnXHU2NUIwXHU1OTI3XHU5NjJBXHU3QUQ5JyB9XG4gICAgXSxcbiAgICBldXJvcGU6IFtcbiAgICAgIHsgb3JpZ2luOiAnXHU1REY0XHU5RUNFXHU1MzE3XHU3QUQ5JywgZGVzdGluYXRpb246ICdcdTk2M0ZcdTU5QzZcdTY1QUZcdTcyNzlcdTRFMzlcdTRFMkRcdTU5MkVcdThGNjZcdTdBRDknIH0sXG4gICAgICB7IG9yaWdpbjogJ1x1NURGNFx1OUVDRVx1OTFDQ1x1NjYwMlx1N0FEOScsIGRlc3RpbmF0aW9uOiAnXHU3RjU3XHU5QTZDXHU3Mjc5XHU3QzczXHU1QzNDXHU3QUQ5JyB9XG4gICAgXVxuICB9XG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICB0aGlzLmN1cnJlbnRSZWdpb24gPSB0aGlzLnJlZ2lvbklucHV0VGFyZ2V0LnZhbHVlXG4gICAgY29uc29sZS5sb2coJ0Ficm9hZCB0aWNrZXQgc2VhcmNoIGNvbnRyb2xsZXIgY29ubmVjdGVkJylcbiAgfVxuXG4gIHNlbGVjdFJlZ2lvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgcmVnaW9uID0gYnV0dG9uLmRhdGFzZXQuYWJyb2FkVGlja2V0U2VhcmNoUmVnaW9uUGFyYW1cbiAgICBcbiAgICBpZiAocmVnaW9uICYmIHJlZ2lvbiAhPT0gdGhpcy5jdXJyZW50UmVnaW9uKSB7XG4gICAgICAvLyBVc2UgVHVyYm8udmlzaXQgdG8gcmVsb2FkIHRoZSBwYWdlIHdpdGggbmV3IHJlZ2lvbiBwYXJhbWV0ZXJcbiAgICAgIC8vIFRoaXMga2VlcHMgdXMgb24gdGhlIGluZGV4IHBhZ2UgaW5zdGVhZCBvZiBuYXZpZ2F0aW5nIHRvIHNlYXJjaFxuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZilcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdyZWdpb24nLCByZWdpb24pXG4gICAgICB3aW5kb3cuVHVyYm8udmlzaXQodXJsLnRvU3RyaW5nKCkpXG4gICAgfVxuICB9XG5cbiAgc2VsZWN0VGlja2V0VHlwZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGNvbnN0IHRpY2tldFR5cGUgPSBidXR0b24uZGF0YXNldC5hYnJvYWRUaWNrZXRTZWFyY2hUaWNrZXRUeXBlUGFyYW1cbiAgICBcbiAgICAvLyBVcGRhdGUgYnV0dG9uIHN0eWxlc1xuICAgIGNvbnN0IGFsbEJ1dHRvbnMgPSBidXR0b24ucGFyZW50RWxlbWVudD8ucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uJykgfHwgW11cbiAgICBhbGxCdXR0b25zLmZvckVhY2goYnRuID0+IHtcbiAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdiZy13aGl0ZScsICdzaGFkb3ctc20nLCAnZm9udC1ib2xkJylcbiAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdmb250LW1lZGl1bScsICd0ZXh0LWdyYXktNTAwJylcbiAgICB9KVxuICAgIFxuICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdmb250LW1lZGl1bScsICd0ZXh0LWdyYXktNTAwJylcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYmctd2hpdGUnLCAnc2hhZG93LXNtJywgJ2ZvbnQtYm9sZCcpXG4gICAgXG4gICAgLy8gVE9ETzogSGFuZGxlIHRpY2tldCB0eXBlIGNoYW5nZSAodHJhaW4gdnMgcGFzcylcbiAgICBjb25zb2xlLmxvZygnU2VsZWN0ZWQgdGlja2V0IHR5cGU6JywgdGlja2V0VHlwZSlcbiAgfVxuXG4gIHNlbGVjdE9yaWdpbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgdGhpcy5jdXJyZW50U2VsZWN0aW9uVHlwZSA9ICdvcmlnaW4nXG4gICAgdGhpcy5vcGVuU3RhdGlvbk1vZGFsKClcbiAgfVxuXG4gIHNlbGVjdERlc3RpbmF0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICB0aGlzLmN1cnJlbnRTZWxlY3Rpb25UeXBlID0gJ2Rlc3RpbmF0aW9uJ1xuICAgIHRoaXMub3BlblN0YXRpb25Nb2RhbCgpXG4gIH1cblxuICBzd2FwU3RhdGlvbnMoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIFxuICAgIGNvbnN0IG9yaWdpblZhbHVlID0gdGhpcy5vcmlnaW5JbnB1dFRhcmdldC52YWx1ZVxuICAgIGNvbnN0IGRlc3RpbmF0aW9uVmFsdWUgPSB0aGlzLmRlc3RpbmF0aW9uSW5wdXRUYXJnZXQudmFsdWVcbiAgICBcbiAgICB0aGlzLm9yaWdpbklucHV0VGFyZ2V0LnZhbHVlID0gZGVzdGluYXRpb25WYWx1ZVxuICAgIHRoaXMuZGVzdGluYXRpb25JbnB1dFRhcmdldC52YWx1ZSA9IG9yaWdpblZhbHVlXG4gICAgXG4gICAgdGhpcy5vcmlnaW5UZXh0VGFyZ2V0LnRleHRDb250ZW50ID0gZGVzdGluYXRpb25WYWx1ZVxuICAgIHRoaXMuZGVzdGluYXRpb25UZXh0VGFyZ2V0LnRleHRDb250ZW50ID0gb3JpZ2luVmFsdWVcbiAgfVxuXG4gIG9wZW5EYXRlUGlja2VyKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAvLyBEaXNwYXRjaCBldmVudCB0byBhYnJvYWQtZGF0ZS1waWNrZXIgY29udHJvbGxlclxuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdhYnJvYWQtdGlja2V0LXNlYXJjaDpvcGVuLWRhdGUtcGlja2VyJywge1xuICAgICAgYnViYmxlczogdHJ1ZVxuICAgIH0pXG4gICAgdGhpcy5lbGVtZW50LmRpc3BhdGNoRXZlbnQoY3VzdG9tRXZlbnQpXG4gIH1cblxuICB1cGRhdGVEYXRlKGRhdGVTdHI6IHN0cmluZyk6IHZvaWQge1xuICAgIC8vIFVwZGF0ZSB0aGUgZGF0ZSBpbnB1dCBhbmQgdGV4dCBkaXNwbGF5XG4gICAgdGhpcy5kYXRlSW5wdXRUYXJnZXQudmFsdWUgPSBkYXRlU3RyXG4gICAgdGhpcy5jdXJyZW50RGF0ZVZhbHVlID0gZGF0ZVN0clxuICAgIFxuICAgIC8vIFVwZGF0ZSB0aGUgZGF0ZSBkaXNwbGF5IHRleHRcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoYCR7ZGF0ZVN0cn1UMDA6MDA6MDBgKVxuICAgIGNvbnN0IG1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMVxuICAgIGNvbnN0IGRheSA9IGRhdGUuZ2V0RGF0ZSgpXG4gICAgY29uc3Qgd2Vla2RheXMgPSBbJ1x1NTQ2OFx1NjVFNScsICdcdTU0NjhcdTRFMDAnLCAnXHU1NDY4XHU0RThDJywgJ1x1NTQ2OFx1NEUwOScsICdcdTU0NjhcdTU2REInLCAnXHU1NDY4XHU0RTk0JywgJ1x1NTQ2OFx1NTE2RCddXG4gICAgY29uc3Qgd2Vla2RheSA9IHdlZWtkYXlzW2RhdGUuZ2V0RGF5KCldXG4gICAgXG4gICAgdGhpcy5kYXRlVGV4dFRhcmdldC50ZXh0Q29udGVudCA9IGAke21vbnRofVx1NjcwOCR7ZGF5fVx1NjVFNWBcbiAgICBcbiAgICAvLyBVcGRhdGUgd2Vla2RheSBpZiB0aGVyZSdzIGEgc2libGluZyBlbGVtZW50XG4gICAgY29uc3Qgd2Vla2RheUVsZW1lbnQgPSB0aGlzLmRhdGVUZXh0VGFyZ2V0Lm5leHRFbGVtZW50U2libGluZ1xuICAgIGlmICh3ZWVrZGF5RWxlbWVudCkge1xuICAgICAgd2Vla2RheUVsZW1lbnQudGV4dENvbnRlbnQgPSB3ZWVrZGF5XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBvcGVuU3RhdGlvbk1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMuc3RhdGlvbk1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgdGhpcy5yZW5kZXJTdGF0aW9uTGlzdCgpXG4gICAgdGhpcy5zZWFyY2hJbnB1dFRhcmdldC52YWx1ZSA9ICcnXG4gICAgdGhpcy5zZWFyY2hJbnB1dFRhcmdldC5mb2N1cygpXG4gIH1cblxuICBjbG9zZVN0YXRpb25Nb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLnN0YXRpb25Nb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICB9XG5cbiAgc2VsZWN0U3RhdGlvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBlbGVtZW50ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHN0YXRpb25OYW1lID0gZWxlbWVudC5kYXRhc2V0LnN0YXRpb25OYW1lXG4gICAgY29uc3Qgc3RhdGlvbk5hbWVFbiA9IGVsZW1lbnQuZGF0YXNldC5zdGF0aW9uTmFtZUVuXG4gICAgXG4gICAgaWYgKCFzdGF0aW9uTmFtZSkgcmV0dXJuXG4gICAgXG4gICAgaWYgKHRoaXMuY3VycmVudFNlbGVjdGlvblR5cGUgPT09ICdvcmlnaW4nKSB7XG4gICAgICB0aGlzLm9yaWdpbklucHV0VGFyZ2V0LnZhbHVlID0gc3RhdGlvbk5hbWVcbiAgICAgIHRoaXMub3JpZ2luVGV4dFRhcmdldC50ZXh0Q29udGVudCA9IHN0YXRpb25OYW1lXG4gICAgICAvLyBVcGRhdGUgRW5nbGlzaCBuYW1lIGluIHRoZSBzdWJ0aXRsZVxuICAgICAgY29uc3Qgc3VidGl0bGUgPSB0aGlzLm9yaWdpblRleHRUYXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nXG4gICAgICBpZiAoc3VidGl0bGUpIHtcbiAgICAgICAgc3VidGl0bGUudGV4dENvbnRlbnQgPSBzdGF0aW9uTmFtZUVuIHx8ICcnXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGVzdGluYXRpb25JbnB1dFRhcmdldC52YWx1ZSA9IHN0YXRpb25OYW1lXG4gICAgICB0aGlzLmRlc3RpbmF0aW9uVGV4dFRhcmdldC50ZXh0Q29udGVudCA9IHN0YXRpb25OYW1lXG4gICAgICAvLyBVcGRhdGUgRW5nbGlzaCBuYW1lIGluIHRoZSBzdWJ0aXRsZVxuICAgICAgY29uc3Qgc3VidGl0bGUgPSB0aGlzLmRlc3RpbmF0aW9uVGV4dFRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmdcbiAgICAgIGlmIChzdWJ0aXRsZSkge1xuICAgICAgICBzdWJ0aXRsZS50ZXh0Q29udGVudCA9IHN0YXRpb25OYW1lRW4gfHwgJydcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy5jbG9zZVN0YXRpb25Nb2RhbCgpXG4gIH1cblxuICBzZWFyY2hTdGF0aW9ucyhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBpbnB1dCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IHF1ZXJ5ID0gaW5wdXQudmFsdWUudHJpbSgpLnRvTG93ZXJDYXNlKClcbiAgICBcbiAgICB0aGlzLnJlbmRlclN0YXRpb25MaXN0KHF1ZXJ5KVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJTdGF0aW9uTGlzdChzZWFyY2hRdWVyeTogc3RyaW5nID0gJycpOiB2b2lkIHtcbiAgICBjb25zdCBzdGF0aW9ucyA9IHRoaXMuY3VycmVudFJlZ2lvbiA9PT0gJ2phcGFuJyA/IHRoaXMuamFwYW5TdGF0aW9ucyA6IHRoaXMuZXVyb3BlU3RhdGlvbnNcbiAgICBjb25zdCBwb3B1bGFyUm91dGVzID0gdGhpcy5jdXJyZW50UmVnaW9uID09PSAnamFwYW4nID8gdGhpcy5wb3B1bGFyUm91dGVzLmphcGFuIDogdGhpcy5wb3B1bGFyUm91dGVzLmV1cm9wZVxuICAgIFxuICAgIC8qIGVzbGludC1kaXNhYmxlIGluZGVudCAqL1xuICAgIGxldCBodG1sID0gJydcbiAgICBcbiAgICAvLyBQb3B1bGFyIHJvdXRlcyAob25seSBzaG93IHdoZW4gbm8gc2VhcmNoIHF1ZXJ5KVxuICAgIGlmICghc2VhcmNoUXVlcnkgJiYgcG9wdWxhclJvdXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICBodG1sICs9IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cIm1iLTZcIj5cbiAgICAgICAgICA8aDMgY2xhc3M9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS01MDAgbWItMyBweC00XCI+XHU3MEVEXHU5NUU4XHU4REVGXHU3RUJGPC9oMz5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBnYXAtMyBweC00IG92ZXJmbG93LXgtYXV0b1wiPlxuICAgICAgICAgICAgJHtwb3B1bGFyUm91dGVzLm1hcChyb3V0ZSA9PiBgXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJiZy1ncmF5LTUwIHJvdW5kZWQtbGcgcHgtNCBweS0yIHdoaXRlc3BhY2Utbm93cmFwIGN1cnNvci1wb2ludGVyIGhvdmVyOmJnLWdyYXktMTAwXCJcbiAgICAgICAgICAgICAgICAgICBkYXRhLWFjdGlvbj1cImNsaWNrLT5hYnJvYWQtdGlja2V0LXNlYXJjaCNzZWxlY3RQb3B1bGFyUm91dGVcIlxuICAgICAgICAgICAgICAgICAgIGRhdGEtb3JpZ2luPVwiJHtyb3V0ZS5vcmlnaW59XCJcbiAgICAgICAgICAgICAgICAgICBkYXRhLWRlc3RpbmF0aW9uPVwiJHtyb3V0ZS5kZXN0aW5hdGlvbn1cIj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRleHQtc20gZm9udC1tZWRpdW1cIj4ke3JvdXRlLm9yaWdpbn0gLSAke3JvdXRlLmRlc3RpbmF0aW9ufTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgKS5qb2luKCcnKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICBgXG4gICAgfVxuICAgIFxuICAgIC8vIFN0YXRpb24gbGlzdCBncm91cGVkIGJ5IGNpdHkvcmVnaW9uXG4gICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cIm1iLTRcIj48aDMgY2xhc3M9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS01MDAgbWItMyBweC00XCI+XHU3QUQ5XHU3MEI5XHU5MDA5XHU2MkU5PC9oMz48L2Rpdj4nXG4gICAgXG4gICAgT2JqZWN0LmVudHJpZXMoc3RhdGlvbnMpLmZvckVhY2goKFtjaXR5LCBzdGF0aW9uTGlzdF0pID0+IHtcbiAgICAgIGNvbnN0IGZpbHRlcmVkU3RhdGlvbnMgPSBzdGF0aW9uTGlzdC5maWx0ZXIoc3RhdGlvbiA9PiBcbiAgICAgICAgIXNlYXJjaFF1ZXJ5IHx8IFxuICAgICAgICBzdGF0aW9uLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hRdWVyeSkgfHwgXG4gICAgICAgIHN0YXRpb24ubmFtZUVuLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoUXVlcnkpIHx8XG4gICAgICAgIGNpdHkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hRdWVyeSlcbiAgICAgIClcbiAgICAgIFxuICAgICAgaWYgKGZpbHRlcmVkU3RhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICBodG1sICs9IGBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwibWItNFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggaXRlbXMtY2VudGVyIHB4LTQgcHktMiBiZy1ncmF5LTUwXCI+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1zbSBmb250LWJvbGQgdGV4dC1ncmF5LTcwMFwiPiR7Y2l0eX08L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICR7ZmlsdGVyZWRTdGF0aW9ucy5tYXAoc3RhdGlvbiA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGlzU2VsZWN0ZWQgPSAoXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VsZWN0aW9uVHlwZSA9PT0gJ29yaWdpbicgJiZcbiAgICAgICAgICAgICAgICB0aGlzLm9yaWdpbklucHV0VGFyZ2V0LnZhbHVlID09PSBzdGF0aW9uLm5hbWVcbiAgICAgICAgICAgICAgKSB8fCAoXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VsZWN0aW9uVHlwZSA9PT0gJ2Rlc3RpbmF0aW9uJyAmJlxuICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb25JbnB1dFRhcmdldC52YWx1ZSA9PT0gc3RhdGlvbi5uYW1lXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBweC00IHB5LTMgYm9yZGVyLWIgYm9yZGVyLWdyYXktMTAwIGN1cnNvci1wb2ludGVyIGhvdmVyOmJnLWdyYXktNTBcIlxuICAgICAgICAgICAgICAgICAgICAgZGF0YS1hY3Rpb249XCJjbGljay0+YWJyb2FkLXRpY2tldC1zZWFyY2gjc2VsZWN0U3RhdGlvblwiXG4gICAgICAgICAgICAgICAgICAgICBkYXRhLXN0YXRpb24tbmFtZT1cIiR7c3RhdGlvbi5uYW1lfVwiXG4gICAgICAgICAgICAgICAgICAgICBkYXRhLXN0YXRpb24tbmFtZS1lbj1cIiR7c3RhdGlvbi5uYW1lRW59XCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleC0xXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWJhc2UgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMFwiPiR7c3RhdGlvbi5uYW1lfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC14cyB0ZXh0LWdyYXktNDAwIG10LTAuNVwiPiR7c3RhdGlvbi5uYW1lRW59PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICR7aXNTZWxlY3RlZCA/IGBcbiAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz1cInctNSBoLTUgdGV4dC15ZWxsb3ctNDAwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsLXJ1bGU9XCJldmVub2RkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkPVwiTTE2LjcwNyA1LjI5M2ExIDEgMCAwMTAgMS40MTRsLTggOGExIDEgMCAwMS0xLjQxNCAwbC00LTRhMSAxIDAgMDExLjQxNC0xLjQxNEw4IDEyLjU4Nmw3LjI5My03LjI5M2ExIDEgMCAwMTEuNDE0IDB6XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGlwLXJ1bGU9XCJldmVub2RkXCIvPlxuICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICAgIGAgOiAnJ31cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgfSkuam9pbignJyl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIGBcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIGNvbnN0IG5vUmVzdWx0c0hlYWRlciA9ICc8ZGl2IGNsYXNzPVwibWItNFwiPjxoMyBjbGFzcz1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTUwMCBtYi0zIHB4LTRcIj5cdTdBRDlcdTcwQjlcdTkwMDlcdTYyRTk8L2gzPjwvZGl2PidcbiAgICBpZiAoaHRtbCA9PT0gbm9SZXN1bHRzSGVhZGVyKSB7XG4gICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwidGV4dC1jZW50ZXIgcHktOCB0ZXh0LWdyYXktNDAwXCI+XHU2NzJBXHU2MjdFXHU1MjMwXHU1MzM5XHU5MTREXHU3Njg0XHU3QUQ5XHU3MEI5PC9kaXY+J1xuICAgIH1cbiAgICAvKiBlc2xpbnQtZW5hYmxlIGluZGVudCwgbWF4LWxlbiAqL1xuICAgIFxuICAgIHRoaXMuc3RhdGlvbkxpc3RUYXJnZXQuaW5uZXJIVE1MID0gaHRtbFxuICB9XG5cbiAgc2VsZWN0UG9wdWxhclJvdXRlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3Qgb3JpZ2luID0gZWxlbWVudC5kYXRhc2V0Lm9yaWdpblxuICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gZWxlbWVudC5kYXRhc2V0LmRlc3RpbmF0aW9uXG4gICAgXG4gICAgaWYgKG9yaWdpbiAmJiBkZXN0aW5hdGlvbikge1xuICAgICAgLy8gRmluZCBzdGF0aW9uIGRldGFpbHNcbiAgICAgIGNvbnN0IHN0YXRpb25zID0gdGhpcy5jdXJyZW50UmVnaW9uID09PSAnamFwYW4nID8gdGhpcy5qYXBhblN0YXRpb25zIDogdGhpcy5ldXJvcGVTdGF0aW9uc1xuICAgICAgbGV0IG9yaWdpblN0YXRpb246IFN0YXRpb24gfCB1bmRlZmluZWRcbiAgICAgIGxldCBkZXN0aW5hdGlvblN0YXRpb246IFN0YXRpb24gfCB1bmRlZmluZWRcbiAgICAgIFxuICAgICAgT2JqZWN0LnZhbHVlcyhzdGF0aW9ucykuZm9yRWFjaCgoc3RhdGlvbkxpc3Q6IFN0YXRpb25bXSkgPT4ge1xuICAgICAgICBzdGF0aW9uTGlzdC5mb3JFYWNoKChzdGF0aW9uOiBTdGF0aW9uKSA9PiB7XG4gICAgICAgICAgaWYgKHN0YXRpb24ubmFtZSA9PT0gb3JpZ2luKSBvcmlnaW5TdGF0aW9uID0gc3RhdGlvblxuICAgICAgICAgIGlmIChzdGF0aW9uLm5hbWUgPT09IGRlc3RpbmF0aW9uKSBkZXN0aW5hdGlvblN0YXRpb24gPSBzdGF0aW9uXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgICAgXG4gICAgICBpZiAob3JpZ2luU3RhdGlvbikge1xuICAgICAgICB0aGlzLm9yaWdpbklucHV0VGFyZ2V0LnZhbHVlID0gb3JpZ2luU3RhdGlvbi5uYW1lXG4gICAgICAgIHRoaXMub3JpZ2luVGV4dFRhcmdldC50ZXh0Q29udGVudCA9IG9yaWdpblN0YXRpb24ubmFtZVxuICAgICAgICBjb25zdCBzdWJ0aXRsZSA9IHRoaXMub3JpZ2luVGV4dFRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmdcbiAgICAgICAgaWYgKHN1YnRpdGxlKSBzdWJ0aXRsZS50ZXh0Q29udGVudCA9IG9yaWdpblN0YXRpb24ubmFtZUVuXG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChkZXN0aW5hdGlvblN0YXRpb24pIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbklucHV0VGFyZ2V0LnZhbHVlID0gZGVzdGluYXRpb25TdGF0aW9uLm5hbWVcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvblRleHRUYXJnZXQudGV4dENvbnRlbnQgPSBkZXN0aW5hdGlvblN0YXRpb24ubmFtZVxuICAgICAgICBjb25zdCBzdWJ0aXRsZSA9IHRoaXMuZGVzdGluYXRpb25UZXh0VGFyZ2V0Lm5leHRFbGVtZW50U2libGluZ1xuICAgICAgICBpZiAoc3VidGl0bGUpIHN1YnRpdGxlLnRleHRDb250ZW50ID0gZGVzdGluYXRpb25TdGF0aW9uLm5hbWVFblxuICAgICAgfVxuICAgICAgXG4gICAgICB0aGlzLmNsb3NlU3RhdGlvbk1vZGFsKClcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcInNlYXJjaEZvcm1cIixcbiAgICBcImNpdHlJbnB1dFwiLFxuICAgIFwiY2l0eURpc3BsYXlcIixcbiAgICBcImNoZWNrSW5JbnB1dFwiLFxuICAgIFwiY2hlY2tPdXRJbnB1dFwiLFxuICAgIFwicm9vbXNJbnB1dFwiLFxuICAgIFwiYWR1bHRzSW5wdXRcIixcbiAgICBcImNoaWxkcmVuSW5wdXRcIixcbiAgICBcInF1ZXJ5SW5wdXRcIixcbiAgICBcImRvbWVzdGljVGFiXCIsXG4gICAgXCJpbnRlcm5hdGlvbmFsVGFiXCIsXG4gICAgXCJkb21lc3RpY0luZGljYXRvclwiLFxuICAgIFwiaW50ZXJuYXRpb25hbEluZGljYXRvclwiXG4gIF1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHNlYXJjaEZvcm1UYXJnZXQ6IEhUTUxGb3JtRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0NpdHlJbnB1dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGNpdHlJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0NpdHlEaXNwbGF5VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2l0eURpc3BsYXlUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQ2hlY2tJbklucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hlY2tJbklucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQ2hlY2tPdXRJbnB1dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGNoZWNrT3V0SW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNSb29tc0lucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgcm9vbXNJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0FkdWx0c0lucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgYWR1bHRzSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNDaGlsZHJlbklucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hpbGRyZW5JbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1F1ZXJ5SW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBxdWVyeUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZG9tZXN0aWNUYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaW50ZXJuYXRpb25hbFRhYlRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkb21lc3RpY0luZGljYXRvclRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBpbnRlcm5hdGlvbmFsSW5kaWNhdG9yVGFyZ2V0OiBIVE1MRWxlbWVudFxuXG4gIHByaXZhdGUgY3VycmVudExvY2F0aW9uVHlwZTogJ2RvbWVzdGljJyB8ICdpbnRlcm5hdGlvbmFsJyA9ICdkb21lc3RpYydcbiAgcHJpdmF0ZSBsYXN0RG9tZXN0aWNDaXR5OiBzdHJpbmcgPSAnXHU1MzE3XHU0RUFDJ1xuICBwcml2YXRlIGxhc3RJbnRlcm5hdGlvbmFsQ2l0eTogc3RyaW5nID0gJ1x1OTk5OVx1NkUyRidcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiSG9tZXN0YXlTZWFyY2ggY29ubmVjdGVkXCIpXG4gICAgXG4gICAgLy8gSW5pdGlhbGl6ZTogUmVhZCBjdXJyZW50IGNpdHkgYW5kIHN0b3JlIGl0IGFzIGRvbWVzdGljIGNpdHkgKGRlZmF1bHQgc3RhdGUpXG4gICAgaWYgKHRoaXMuaGFzQ2l0eUlucHV0VGFyZ2V0KSB7XG4gICAgICBjb25zdCBjdXJyZW50Q2l0eSA9IHRoaXMuY2l0eUlucHV0VGFyZ2V0LnZhbHVlXG4gICAgICBpZiAoY3VycmVudENpdHkpIHtcbiAgICAgICAgdGhpcy5sYXN0RG9tZXN0aWNDaXR5ID0gY3VycmVudENpdHlcbiAgICAgICAgY29uc29sZS5sb2coJ0hvbWVzdGF5U2VhcmNoOiBJbml0aWFsaXplZCBsYXN0RG9tZXN0aWNDaXR5IHRvOicsIGN1cnJlbnRDaXR5KVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBMaXN0ZW4gZm9yIGNpdHktc2VsZWN0b3IgdXBkYXRlc1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NpdHktc2VsZWN0b3I6Y2l0eS1zZWxlY3RlZC1mb3ItaG90ZWwnLCB0aGlzLmhhbmRsZUNpdHlVcGRhdGUuYmluZCh0aGlzKSlcbiAgICAvLyBMaXN0ZW4gZm9yIGRhdGUtcGlja2VyIHVwZGF0ZXNcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdob3RlbC1kYXRlLXBpY2tlcjpkYXRlcy1zZWxlY3RlZCcsIHRoaXMuaGFuZGxlRGF0ZVVwZGF0ZS5iaW5kKHRoaXMpKVxuICAgIC8vIExpc3RlbiBmb3IgZ3Vlc3Qtc2VsZWN0b3IgdXBkYXRlc1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2hvdGVsLWd1ZXN0LXNlbGVjdG9yOmd1ZXN0cy11cGRhdGVkJywgdGhpcy5oYW5kbGVHdWVzdFVwZGF0ZS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkhvbWVzdGF5U2VhcmNoIGRpc2Nvbm5lY3RlZFwiKVxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NpdHktc2VsZWN0b3I6Y2l0eS1zZWxlY3RlZC1mb3ItaG90ZWwnLCB0aGlzLmhhbmRsZUNpdHlVcGRhdGUuYmluZCh0aGlzKSlcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdob3RlbC1kYXRlLXBpY2tlcjpkYXRlcy1zZWxlY3RlZCcsIHRoaXMuaGFuZGxlRGF0ZVVwZGF0ZS5iaW5kKHRoaXMpKVxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2hvdGVsLWd1ZXN0LXNlbGVjdG9yOmd1ZXN0cy11cGRhdGVkJywgdGhpcy5oYW5kbGVHdWVzdFVwZGF0ZS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgLy8gSGFuZGxlIGNpdHkgc2VsZWN0aW9uIHVwZGF0ZSBmcm9tIGNpdHktc2VsZWN0b3JcbiAgaGFuZGxlQ2l0eVVwZGF0ZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjdXN0b21FdmVudCA9IGV2ZW50IGFzIEN1c3RvbUV2ZW50XG4gICAgY29uc3QgeyBjaXR5TmFtZSwgaXNJbnRlcm5hdGlvbmFsIH0gPSBjdXN0b21FdmVudC5kZXRhaWxcbiAgICBjb25zb2xlLmxvZygnSG9tZXN0YXlTZWFyY2g6IFJlY2VpdmVkIGNpdHkgdXBkYXRlOicsIGNpdHlOYW1lLCAnaXNJbnRlcm5hdGlvbmFsOicsIGlzSW50ZXJuYXRpb25hbClcbiAgICBcbiAgICAvLyBSZW1lbWJlciB0aGUgY2l0eSBmb3IgdGhpcyBsb2NhdGlvbiB0eXBlXG4gICAgaWYgKGlzSW50ZXJuYXRpb25hbCkge1xuICAgICAgdGhpcy5sYXN0SW50ZXJuYXRpb25hbENpdHkgPSBjaXR5TmFtZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxhc3REb21lc3RpY0NpdHkgPSBjaXR5TmFtZVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5oYXNDaXR5SW5wdXRUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2l0eUlucHV0VGFyZ2V0LnZhbHVlID0gY2l0eU5hbWVcbiAgICAgIGNvbnNvbGUubG9nKCdIb21lc3RheVNlYXJjaDogVXBkYXRlZCBjaXR5IGlucHV0IHRvOicsIGNpdHlOYW1lKVxuICAgIH1cblxuICAgIC8vIEF1dG8tc3dpdGNoIHRhYiBiYXNlZCBvbiBjaXR5IHR5cGVcbiAgICBpZiAoaXNJbnRlcm5hdGlvbmFsKSB7XG4gICAgICB0aGlzLnN3aXRjaFRvSW50ZXJuYXRpb25hbChmYWxzZSkgLy8gZmFsc2UgPSBkb24ndCB1cGRhdGUgY2l0eVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN3aXRjaFRvRG9tZXN0aWMoZmFsc2UpIC8vIGZhbHNlID0gZG9uJ3QgdXBkYXRlIGNpdHlcbiAgICB9XG4gIH1cblxuICAvLyBIYW5kbGUgZGF0ZSBzZWxlY3Rpb24gdXBkYXRlIGZyb20gaG90ZWwtZGF0ZS1waWNrZXJcbiAgaGFuZGxlRGF0ZVVwZGF0ZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjdXN0b21FdmVudCA9IGV2ZW50IGFzIEN1c3RvbUV2ZW50XG4gICAgY29uc3QgeyBjaGVja0luLCBjaGVja091dCB9ID0gY3VzdG9tRXZlbnQuZGV0YWlsXG4gICAgY29uc29sZS5sb2coJ0hvbWVzdGF5U2VhcmNoOiBSZWNlaXZlZCBkYXRlIHVwZGF0ZTonLCB7IGNoZWNrSW4sIGNoZWNrT3V0IH0pXG4gICAgXG4gICAgaWYgKHRoaXMuaGFzQ2hlY2tJbklucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLmNoZWNrSW5JbnB1dFRhcmdldC52YWx1ZSA9IGNoZWNrSW5cbiAgICAgIGNvbnNvbGUubG9nKCdIb21lc3RheVNlYXJjaDogVXBkYXRlZCBjaGVjay1pbiB0bzonLCBjaGVja0luKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5oYXNDaGVja091dElucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLmNoZWNrT3V0SW5wdXRUYXJnZXQudmFsdWUgPSBjaGVja091dFxuICAgICAgY29uc29sZS5sb2coJ0hvbWVzdGF5U2VhcmNoOiBVcGRhdGVkIGNoZWNrLW91dCB0bzonLCBjaGVja091dClcbiAgICB9XG4gIH1cblxuICAvLyBIYW5kbGUgZ3Vlc3Qgc2VsZWN0aW9uIHVwZGF0ZSBmcm9tIGhvdGVsLWd1ZXN0LXNlbGVjdG9yXG4gIGhhbmRsZUd1ZXN0VXBkYXRlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnRcbiAgICBjb25zdCB7IHJvb21zLCBhZHVsdHMsIGNoaWxkcmVuIH0gPSBjdXN0b21FdmVudC5kZXRhaWxcbiAgICBjb25zb2xlLmxvZygnSG9tZXN0YXlTZWFyY2g6IFJlY2VpdmVkIGd1ZXN0IHVwZGF0ZTonLCB7IHJvb21zLCBhZHVsdHMsIGNoaWxkcmVuIH0pXG4gICAgXG4gICAgaWYgKHRoaXMuaGFzUm9vbXNJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5yb29tc0lucHV0VGFyZ2V0LnZhbHVlID0gcm9vbXMudG9TdHJpbmcoKVxuICAgICAgY29uc29sZS5sb2coJ0hvbWVzdGF5U2VhcmNoOiBVcGRhdGVkIHJvb21zIHRvOicsIHJvb21zKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5oYXNBZHVsdHNJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5hZHVsdHNJbnB1dFRhcmdldC52YWx1ZSA9IGFkdWx0cy50b1N0cmluZygpXG4gICAgICBjb25zb2xlLmxvZygnSG9tZXN0YXlTZWFyY2g6IFVwZGF0ZWQgYWR1bHRzIHRvOicsIGFkdWx0cylcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuaGFzQ2hpbGRyZW5JbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5jaGlsZHJlbklucHV0VGFyZ2V0LnZhbHVlID0gY2hpbGRyZW4udG9TdHJpbmcoKVxuICAgICAgY29uc29sZS5sb2coJ0hvbWVzdGF5U2VhcmNoOiBVcGRhdGVkIGNoaWxkcmVuIHRvOicsIGNoaWxkcmVuKVxuICAgIH1cbiAgfVxuXG4gIG9wZW5TZWFyY2hNb2RhbCgpOiB2b2lkIHtcbiAgICAvLyBTaG93IGEgcHJvbXB0IGZvciBzZWFyY2gga2V5d29yZFxuICAgIGNvbnN0IGtleXdvcmQgPSBwcm9tcHQoJ1x1OEJGN1x1OEY5M1x1NTE2NVx1NkMxMVx1NUJCRlx1NTQwRFx1NzlGMFx1MzAwMVx1NTczMFx1NTQwRFx1NjIxNlx1NTE3M1x1OTUyRVx1OEJDRFx1RkYxQScpXG4gICAgXG4gICAgaWYgKGtleXdvcmQgIT09IG51bGwgJiYgdGhpcy5oYXNRdWVyeUlucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLnF1ZXJ5SW5wdXRUYXJnZXQudmFsdWUgPSBrZXl3b3JkXG4gICAgICBcbiAgICAgIC8vIFN1Ym1pdCB0aGUgZm9ybVxuICAgICAgaWYgKHRoaXMuc2VhcmNoRm9ybVRhcmdldCkge1xuICAgICAgICB0aGlzLnNlYXJjaEZvcm1UYXJnZXQucmVxdWVzdFN1Ym1pdCgpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gU3dpdGNoIHRvIGRvbWVzdGljIHRhYlxuICBzd2l0Y2hUb0RvbWVzdGljKHVwZGF0ZUNpdHk6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY3VycmVudExvY2F0aW9uVHlwZSA9PT0gJ2RvbWVzdGljJykgcmV0dXJuXG5cbiAgICBjb25zb2xlLmxvZygnSG9tZXN0YXlTZWFyY2g6IFN3aXRjaGluZyB0byBkb21lc3RpYycpXG4gICAgdGhpcy5jdXJyZW50TG9jYXRpb25UeXBlID0gJ2RvbWVzdGljJ1xuXG4gICAgLy8gVXBkYXRlIGNpdHkgaW5wdXQgdG8gbGFzdCBkb21lc3RpYyBjaXR5IHdoZW4gbWFudWFsbHkgc3dpdGNoaW5nXG4gICAgaWYgKHVwZGF0ZUNpdHkpIHtcbiAgICAgIGlmICh0aGlzLmhhc0NpdHlJbnB1dFRhcmdldCkge1xuICAgICAgICB0aGlzLmNpdHlJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMubGFzdERvbWVzdGljQ2l0eVxuICAgICAgICBjb25zb2xlLmxvZygnSG9tZXN0YXlTZWFyY2g6IFJlc3RvcmVkIGRvbWVzdGljIGNpdHkgdG86JywgdGhpcy5sYXN0RG9tZXN0aWNDaXR5KVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaGFzQ2l0eURpc3BsYXlUYXJnZXQpIHtcbiAgICAgICAgdGhpcy5jaXR5RGlzcGxheVRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMubGFzdERvbWVzdGljQ2l0eVxuICAgICAgICBjb25zb2xlLmxvZygnSG9tZXN0YXlTZWFyY2g6IFVwZGF0ZWQgY2l0eSBkaXNwbGF5IHRvOicsIHRoaXMubGFzdERvbWVzdGljQ2l0eSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgZG9tZXN0aWMgdGFiIHN0eWxlc1xuICAgIGNvbnN0IGRvbWVzdGljU3BhbiA9IHRoaXMuZG9tZXN0aWNUYWJUYXJnZXQucXVlcnlTZWxlY3Rvcignc3BhbicpXG4gICAgaWYgKGRvbWVzdGljU3Bhbikge1xuICAgICAgZG9tZXN0aWNTcGFuLmNsYXNzTGlzdC5yZW1vdmUoJ2ZvbnQtbWVkaXVtJylcbiAgICAgIGRvbWVzdGljU3Bhbi5jbGFzc0xpc3QuYWRkKCdmb250LWJvbGQnKVxuICAgIH1cbiAgICB0aGlzLmRvbWVzdGljVGFiVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS01MDAnKVxuICAgIHRoaXMuZG9tZXN0aWNUYWJUYXJnZXQuY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTgwMCcpXG4gICAgdGhpcy5kb21lc3RpY0luZGljYXRvclRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuXG4gICAgLy8gVXBkYXRlIGludGVybmF0aW9uYWwgdGFiIHN0eWxlc1xuICAgIGNvbnN0IGludGVybmF0aW9uYWxTcGFuID0gdGhpcy5pbnRlcm5hdGlvbmFsVGFiVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKVxuICAgIGlmIChpbnRlcm5hdGlvbmFsU3Bhbikge1xuICAgICAgaW50ZXJuYXRpb25hbFNwYW4uY2xhc3NMaXN0LnJlbW92ZSgnZm9udC1ib2xkJylcbiAgICAgIGludGVybmF0aW9uYWxTcGFuLmNsYXNzTGlzdC5hZGQoJ2ZvbnQtbWVkaXVtJylcbiAgICB9XG4gICAgdGhpcy5pbnRlcm5hdGlvbmFsVGFiVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS04MDAnKVxuICAgIHRoaXMuaW50ZXJuYXRpb25hbFRhYlRhcmdldC5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktNTAwJylcbiAgICB0aGlzLmludGVybmF0aW9uYWxJbmRpY2F0b3JUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgfVxuXG4gIC8vIFN3aXRjaCB0byBpbnRlcm5hdGlvbmFsIHRhYlxuICBzd2l0Y2hUb0ludGVybmF0aW9uYWwodXBkYXRlQ2l0eTogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jdXJyZW50TG9jYXRpb25UeXBlID09PSAnaW50ZXJuYXRpb25hbCcpIHJldHVyblxuXG4gICAgY29uc29sZS5sb2coJ0hvbWVzdGF5U2VhcmNoOiBTd2l0Y2hpbmcgdG8gaW50ZXJuYXRpb25hbCcpXG4gICAgdGhpcy5jdXJyZW50TG9jYXRpb25UeXBlID0gJ2ludGVybmF0aW9uYWwnXG5cbiAgICAvLyBVcGRhdGUgY2l0eSBpbnB1dCB0byBsYXN0IGludGVybmF0aW9uYWwgY2l0eSB3aGVuIG1hbnVhbGx5IHN3aXRjaGluZ1xuICAgIGlmICh1cGRhdGVDaXR5KSB7XG4gICAgICBpZiAodGhpcy5oYXNDaXR5SW5wdXRUYXJnZXQpIHtcbiAgICAgICAgdGhpcy5jaXR5SW5wdXRUYXJnZXQudmFsdWUgPSB0aGlzLmxhc3RJbnRlcm5hdGlvbmFsQ2l0eVxuICAgICAgICBjb25zb2xlLmxvZygnSG9tZXN0YXlTZWFyY2g6IFJlc3RvcmVkIGludGVybmF0aW9uYWwgY2l0eSB0bzonLCB0aGlzLmxhc3RJbnRlcm5hdGlvbmFsQ2l0eSlcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhhc0NpdHlEaXNwbGF5VGFyZ2V0KSB7XG4gICAgICAgIHRoaXMuY2l0eURpc3BsYXlUYXJnZXQudGV4dENvbnRlbnQgPSB0aGlzLmxhc3RJbnRlcm5hdGlvbmFsQ2l0eVxuICAgICAgICBjb25zb2xlLmxvZygnSG9tZXN0YXlTZWFyY2g6IFVwZGF0ZWQgY2l0eSBkaXNwbGF5IHRvOicsIHRoaXMubGFzdEludGVybmF0aW9uYWxDaXR5KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBpbnRlcm5hdGlvbmFsIHRhYiBzdHlsZXNcbiAgICBjb25zdCBpbnRlcm5hdGlvbmFsU3BhbiA9IHRoaXMuaW50ZXJuYXRpb25hbFRhYlRhcmdldC5xdWVyeVNlbGVjdG9yKCdzcGFuJylcbiAgICBpZiAoaW50ZXJuYXRpb25hbFNwYW4pIHtcbiAgICAgIGludGVybmF0aW9uYWxTcGFuLmNsYXNzTGlzdC5yZW1vdmUoJ2ZvbnQtbWVkaXVtJylcbiAgICAgIGludGVybmF0aW9uYWxTcGFuLmNsYXNzTGlzdC5hZGQoJ2ZvbnQtYm9sZCcpXG4gICAgfVxuICAgIHRoaXMuaW50ZXJuYXRpb25hbFRhYlRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktNTAwJylcbiAgICB0aGlzLmludGVybmF0aW9uYWxUYWJUYXJnZXQuY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTgwMCcpXG4gICAgdGhpcy5pbnRlcm5hdGlvbmFsSW5kaWNhdG9yVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG5cbiAgICAvLyBVcGRhdGUgZG9tZXN0aWMgdGFiIHN0eWxlc1xuICAgIGNvbnN0IGRvbWVzdGljU3BhbiA9IHRoaXMuZG9tZXN0aWNUYWJUYXJnZXQucXVlcnlTZWxlY3Rvcignc3BhbicpXG4gICAgaWYgKGRvbWVzdGljU3Bhbikge1xuICAgICAgZG9tZXN0aWNTcGFuLmNsYXNzTGlzdC5yZW1vdmUoJ2ZvbnQtYm9sZCcpXG4gICAgICBkb21lc3RpY1NwYW4uY2xhc3NMaXN0LmFkZCgnZm9udC1tZWRpdW0nKVxuICAgIH1cbiAgICB0aGlzLmRvbWVzdGljVGFiVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS04MDAnKVxuICAgIHRoaXMuZG9tZXN0aWNUYWJUYXJnZXQuY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTUwMCcpXG4gICAgdGhpcy5kb21lc3RpY0luZGljYXRvclRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkludGVybmV0U2VydmljZXMgY29ubmVjdGVkXCIpXG4gIH1cblxuICBzd2l0Y2hUYWIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgLy8gVHVyYm8gRHJpdmUgd2lsbCBoYW5kbGUgbmF2aWdhdGlvbiBhdXRvbWF0aWNhbGx5XG4gICAgLy8gVGhpcyBpcyBqdXN0IGZvciBhZGRpdGlvbmFsIFVJIGZlZWRiYWNrIGlmIG5lZWRlZFxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlNpbUNhcmRGaWx0ZXIgY29ubmVjdGVkXCIpXG4gIH1cblxuICBzZWxlY3REZWxpdmVyeShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgbWV0aG9kID0gYnV0dG9uLmRhdGFzZXQubWV0aG9kXG4gICAgXG4gICAgY29uc3QgYWxsQnV0dG9ucyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1tZXRob2RdJylcbiAgICBhbGxCdXR0b25zLmZvckVhY2goYiA9PiB7XG4gICAgICBiLmNsYXNzTGlzdC5yZW1vdmUoJ2ZvbnQtbWVkaXVtJylcbiAgICAgIGIuY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTcwMCcpXG4gICAgfSlcbiAgICBcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnZm9udC1tZWRpdW0nKVxuICB9XG5cbiAgc2VsZWN0RGF5cyhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgXG4gICAgY29uc3QgYWxsQnV0dG9ucyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1kYXlzXScpXG4gICAgYWxsQnV0dG9ucy5mb3JFYWNoKGIgPT4ge1xuICAgICAgYi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1bI0ZGRjhEOF0nLCAnYm9yZGVyLVsjRkZDQzAwXScsICdmb250LW1lZGl1bScpXG4gICAgICBiLmNsYXNzTGlzdC5hZGQoJ2JnLWdyYXktNTAnLCAndGV4dC1ncmF5LTcwMCcpXG4gICAgICAvLyBSZW1vdmUgY2hlY2ttYXJrXG4gICAgICBiLnF1ZXJ5U2VsZWN0b3JBbGwoJy5hYnNvbHV0ZScpLmZvckVhY2goZWwgPT4gZWwucmVtb3ZlKCkpXG4gICAgfSlcbiAgICBcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYmctWyNGRkY4RDhdJywgJ2JvcmRlci1bI0ZGQ0MwMF0nLCAnZm9udC1tZWRpdW0nKVxuICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1ncmF5LTUwJywgJ3RleHQtZ3JheS03MDAnKVxuICAgIFxuICAgIC8vIEFkZCBjaGVja21hcmtcbiAgICBjb25zdCBjaGVja21hcmtIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cImFic29sdXRlIGJvdHRvbS0wIHJpZ2h0LTAgdy0zIGgtMyBiZy1bI0ZGQ0MwMF0gcm91bmRlZC10bC1sZ1wiPjwvZGl2PlxuICAgICAgPHN2ZyBjbGFzcz1cImFic29sdXRlIGJvdHRvbS0wLjUgcmlnaHQtMC41IHctMS41IGgtMS41IHRleHQtYmxhY2sgei0xMFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICAgICAgICA8cGF0aCBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBzdHJva2Utd2lkdGg9XCI0XCIgZD1cIk01IDEzbDQgNEwxOSA3XCI+PC9wYXRoPlxuICAgICAgPC9zdmc+XG4gICAgYFxuICAgIGJ1dHRvbi5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGNoZWNrbWFya0hUTUwpXG4gIH1cblxuICBzZWxlY3REYXRhKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBcbiAgICBjb25zdCBhbGxCdXR0b25zID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWRhdGFdJylcbiAgICBhbGxCdXR0b25zLmZvckVhY2goYiA9PiB7XG4gICAgICBiLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLVsjRkZGOEQ4XScsICdib3JkZXItWyNGRkNDMDBdJywgJ2ZvbnQtbWVkaXVtJylcbiAgICAgIGIuY2xhc3NMaXN0LmFkZCgnYmctZ3JheS01MCcsICd0ZXh0LWdyYXktNzAwJylcbiAgICAgIC8vIFJlbW92ZSBjaGVja21hcmtcbiAgICAgIGIucXVlcnlTZWxlY3RvckFsbCgnLmFic29sdXRlJykuZm9yRWFjaChlbCA9PiBlbC5yZW1vdmUoKSlcbiAgICB9KVxuICAgIFxuICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdiZy1bI0ZGRjhEOF0nLCAnYm9yZGVyLVsjRkZDQzAwXScsICdmb250LW1lZGl1bScpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLWdyYXktNTAnLCAndGV4dC1ncmF5LTcwMCcpXG4gICAgXG4gICAgLy8gQWRkIGNoZWNrbWFya1xuICAgIGNvbnN0IGNoZWNrbWFya0hUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwiYWJzb2x1dGUgYm90dG9tLTAgcmlnaHQtMCB3LTMgaC0zIGJnLVsjRkZDQzAwXSByb3VuZGVkLXRsLWxnXCI+PC9kaXY+XG4gICAgICA8c3ZnIGNsYXNzPVwiYWJzb2x1dGUgYm90dG9tLTAuNSByaWdodC0wLjUgdy0xLjUgaC0xLjUgdGV4dC1ibGFjayB6LTEwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gICAgICAgIDxwYXRoIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZS13aWR0aD1cIjRcIiBkPVwiTTUgMTNsNCA0TDE5IDdcIj48L3BhdGg+XG4gICAgICA8L3N2Zz5cbiAgICBgXG4gICAgYnV0dG9uLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgY2hlY2ttYXJrSFRNTClcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1widG90YWxQcmljZVwiLCBcInBheW1lbnRCdXR0b25cIl1cbiAgZGVjbGFyZSByZWFkb25seSB0b3RhbFByaWNlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1RvdGFsUHJpY2VUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBwYXltZW50QnV0dG9uVGFyZ2V0OiBIVE1MQW5jaG9yRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1BheW1lbnRCdXR0b25UYXJnZXQ6IGJvb2xlYW5cblxuICBwcml2YXRlIHNlbGVjdGVkUGxhbklkOiBzdHJpbmcgPSBcIlwiXG4gIHByaXZhdGUgc2VsZWN0ZWRQcmljZTogbnVtYmVyID0gMzVcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiRGF0YVBsYW4gY29ubmVjdGVkXCIpXG4gIH1cblxuICBzZWxlY3RQbGFuKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgcGxhbklkID0gY2FyZC5kYXRhc2V0LnBsYW5JZCB8fCBcIlwiXG4gICAgY29uc3QgcHJpY2UgPSBwYXJzZUZsb2F0KGNhcmQuZGF0YXNldC5wbGFuUHJpY2UgfHwgXCIzNVwiKVxuICAgIFxuICAgIHRoaXMuc2VsZWN0ZWRQbGFuSWQgPSBwbGFuSWRcbiAgICB0aGlzLnNlbGVjdGVkUHJpY2UgPSBwcmljZVxuICAgIFxuICAgIC8vIFVwZGF0ZSB0b3RhbCBwcmljZVxuICAgIGlmICh0aGlzLmhhc1RvdGFsUHJpY2VUYXJnZXQpIHtcbiAgICAgIHRoaXMudG90YWxQcmljZVRhcmdldC50ZXh0Q29udGVudCA9IHByaWNlLnRvRml4ZWQoMClcbiAgICB9XG4gICAgXG4gICAgLy8gVXBkYXRlIHBheW1lbnQgYnV0dG9uIFVSTFxuICAgIGlmICh0aGlzLmhhc1BheW1lbnRCdXR0b25UYXJnZXQpIHtcbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwodGhpcy5wYXltZW50QnV0dG9uVGFyZ2V0LmhyZWYpXG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnb3JkZXJhYmxlX2lkJywgcGxhbklkKVxuICAgICAgdGhpcy5wYXltZW50QnV0dG9uVGFyZ2V0LmhyZWYgPSB1cmwudG9TdHJpbmcoKVxuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgVUkgLSByZW1vdmUgYWxsIHNlbGVjdGlvbnMgZmlyc3RcbiAgICBjb25zdCBhbGxDYXJkcyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1wbGFuLWlkXScpXG4gICAgYWxsQ2FyZHMuZm9yRWFjaChjID0+IHtcbiAgICAgIGMuY2xhc3NMaXN0LnJlbW92ZSgnYmctWyNGRkY5RTZdJywgJ2JvcmRlci1bI0ZGRDIwMF0nKVxuICAgICAgYy5jbGFzc0xpc3QuYWRkKCdiZy1bI0Y3RjhGQV0nKVxuICAgICAgLy8gUmVtb3ZlIGNoZWNrbWFyayBpZiBleGlzdHNcbiAgICAgIGNvbnN0IGNoZWNrbWFyayA9IGMucXVlcnlTZWxlY3RvcignLmFic29sdXRlJylcbiAgICAgIGlmIChjaGVja21hcmspIGNoZWNrbWFyay5yZW1vdmUoKVxuICAgIH0pXG4gICAgXG4gICAgLy8gQWRkIHNlbGVjdGlvbiB0byBjbGlja2VkIGNhcmRcbiAgICBjYXJkLmNsYXNzTGlzdC5hZGQoJ2JnLVsjRkZGOUU2XScsICdib3JkZXItWyNGRkQyMDBdJylcbiAgICBjYXJkLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLVsjRjdGOEZBXScpXG4gICAgXG4gICAgLy8gQWRkIGNoZWNrbWFya1xuICAgIGNvbnN0IGNoZWNrbWFya0hUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwiYWJzb2x1dGUgYm90dG9tLTAgcmlnaHQtMCB3LTAgaC0wIGJvcmRlci1zb2xpZCBib3JkZXItWzBfMF8yMHB4XzI0cHhdIGJvcmRlci10cmFuc3BhcmVudCBib3JkZXItYi1bI0ZGRDIwMF0gcm91bmRlZC1ici1sZ1wiPlxuICAgICAgICA8c3ZnIGNsYXNzPVwiYWJzb2x1dGUgYm90dG9tLVstMTZweF0gcmlnaHQtWzJweF0gdy0yIGgtMiB0ZXh0LWJsYWNrXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlLXdpZHRoPVwiNFwiPlxuICAgICAgICAgIDxwYXRoIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGQ9XCJNNSAxM2w0IDRMMTkgN1wiPjwvcGF0aD5cbiAgICAgICAgPC9zdmc+XG4gICAgICA8L2Rpdj5cbiAgICBgXG4gICAgY2FyZC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGNoZWNrbWFya0hUTUwpXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcInF1YW50aXR5XCIsIFwidG90YWxQcmljZVwiLCBcImNvbnRhY3ROYW1lXCIsIFwiY29udGFjdFBob25lXCIsIFwiZGF0ZVJhbmdlXCIsXG4gICAgXCJtYWlsVGFiXCIsIFwicGlja3VwVGFiXCIsIFwiYWRkcmVzc1NlY3Rpb25cIiwgXCJtYWlsQWRkcmVzc1wiXVxuICBcbiAgZGVjbGFyZSByZWFkb25seSBxdWFudGl0eVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0b3RhbFByaWNlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNvbnRhY3ROYW1lVGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY29udGFjdFBob25lVGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGF0ZVJhbmdlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IG1haWxUYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgcGlja3VwVGFiVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGFkZHJlc3NTZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IG1haWxBZGRyZXNzVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1RvdGFsUHJpY2VUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNNYWlsVGFiVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUGlja3VwVGFiVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQWRkcmVzc1NlY3Rpb25UYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNNYWlsQWRkcmVzc1RhcmdldDogYm9vbGVhblxuXG4gIHByaXZhdGUgc2VsZWN0ZWRQbGFuSWQ6IHN0cmluZyA9IFwiXCJcbiAgcHJpdmF0ZSBkYWlseVByaWNlOiBudW1iZXIgPSAxN1xuICBwcml2YXRlIGRheXM6IG51bWJlciA9IDdcbiAgcHJpdmF0ZSBjdXJyZW50RGVsaXZlcnlNZXRob2Q6IHN0cmluZyA9ICdwaWNrdXAnXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICAvLyBcdTUyMURcdTU5Q0JcdTUzMTZcdTlFRDhcdThCQTRcdTkwMDlcdTRFMkRcdTc2ODRcdTU5NTdcdTk5MTBcdTRFRjdcdTY4M0NcbiAgICBjb25zdCBmaXJzdFBsYW4gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtd2lmaS1pZF0nKVxuICAgIGlmIChmaXJzdFBsYW4pIHtcbiAgICAgIGNvbnN0IGlkID0gZmlyc3RQbGFuLmdldEF0dHJpYnV0ZSgnZGF0YS13aWZpLWlkJylcbiAgICAgIGNvbnN0IHByaWNlID0gZmlyc3RQbGFuLmdldEF0dHJpYnV0ZSgnZGF0YS13aWZpLXByaWNlJylcbiAgICAgIGlmIChpZCkgdGhpcy5zZWxlY3RlZFBsYW5JZCA9IGlkXG4gICAgICBpZiAocHJpY2UpIHRoaXMuZGFpbHlQcmljZSA9IHBhcnNlRmxvYXQocHJpY2UpXG4gICAgfVxuICAgIHRoaXMudXBkYXRlVG90YWxQcmljZSgpXG4gICAgdGhpcy51cGRhdGVQYXltZW50QnV0dG9uKClcbiAgfVxuXG4gIHNlbGVjdFBsYW4oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBwbGFuSWQgPSBjYXJkLmRhdGFzZXQud2lmaUlkIHx8IFwiXCJcbiAgICBjb25zdCBwcmljZSA9IHBhcnNlRmxvYXQoY2FyZC5kYXRhc2V0LndpZmlQcmljZSB8fCBcIjE3XCIpXG4gICAgXG4gICAgdGhpcy5zZWxlY3RlZFBsYW5JZCA9IHBsYW5JZFxuICAgIHRoaXMuZGFpbHlQcmljZSA9IHByaWNlXG4gICAgdGhpcy51cGRhdGVUb3RhbFByaWNlKClcbiAgICBcbiAgICAvLyBcdTY2RjRcdTY1QjBcdTY1MkZcdTRFRDhcdTYzMDlcdTk0QUVcdTc2ODRvcmRlcmFibGVJZFxuICAgIHRoaXMudXBkYXRlUGF5bWVudEJ1dHRvbigpXG4gICAgXG4gICAgLy8gVXBkYXRlIFVJIC0gcmVtb3ZlIGFsbCBzZWxlY3Rpb25zIGZpcnN0XG4gICAgY29uc3QgYWxsQ2FyZHMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtd2lmaS1pZF0nKVxuICAgIGFsbENhcmRzLmZvckVhY2goYyA9PiB7XG4gICAgICBjLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLVsjRkZGREYyXScsICdib3JkZXItWyNGRkREMDBdJylcbiAgICAgIGMuY2xhc3NMaXN0LmFkZCgnYmctd2hpdGUnKVxuICAgICAgY29uc3QgY2hlY2ttYXJrID0gYy5xdWVyeVNlbGVjdG9yKCcuYmctWyNGRkREMDBdJylcbiAgICAgIGlmIChjaGVja21hcmspIHtcbiAgICAgICAgY2hlY2ttYXJrLm91dGVySFRNTCA9ICc8ZGl2IGNsYXNzPVwidy01IGgtNSBtbC0yIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1mdWxsXCI+PC9kaXY+J1xuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgLy8gQWRkIHNlbGVjdGlvbiB0byBjbGlja2VkIGNhcmRcbiAgICBjYXJkLmNsYXNzTGlzdC5hZGQoJ2JnLVsjRkZGREYyXScsICdib3JkZXItWyNGRkREMDBdJylcbiAgICBjYXJkLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLXdoaXRlJylcbiAgICBjb25zdCBjaXJjbGUgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5ib3JkZXItZ3JheS0zMDAnKVxuICAgIGlmIChjaXJjbGUpIHtcbiAgICAgIGNvbnN0IGNoZWNrbWFya1NWRyA9ICc8c3ZnIGNsYXNzPVwidy0zLjUgaC0zLjUgdGV4dC1ibGFja1wiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPidcbiAgICAgICAgKyAnPHBhdGggc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlLXdpZHRoPVwiM1wiIGQ9XCJNNSAxM2w0IDRMMTkgN1wiPjwvcGF0aD48L3N2Zz4nXG4gICAgICBjb25zdCBjaGVja21hcmtIVE1MID0gYDxkaXYgY2xhc3M9XCJ3LTUgaC01IG1sLTIgYmctWyNGRkREMDBdIHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPiR7XG4gICAgICAgIGNoZWNrbWFya1NWRyAgfTwvZGl2PmBcbiAgICAgIGNpcmNsZS5vdXRlckhUTUwgPSBjaGVja21hcmtIVE1MXG4gICAgfVxuICB9XG5cbiAgc2VsZWN0RGVsaXZlcnkoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBtZXRob2QgPSBidXR0b24uZGF0YXNldC5tZXRob2RcbiAgICBcbiAgICBpZiAoIW1ldGhvZCkgcmV0dXJuXG4gICAgXG4gICAgdGhpcy5jdXJyZW50RGVsaXZlcnlNZXRob2QgPSBtZXRob2RcbiAgICBcbiAgICAvLyBcdTY2RjRcdTY1QjBUYWJcdTY4MzdcdTVGMEZcbiAgICBpZiAodGhpcy5oYXNNYWlsVGFiVGFyZ2V0ICYmIHRoaXMuaGFzUGlja3VwVGFiVGFyZ2V0KSB7XG4gICAgICB0aGlzLm1haWxUYWJUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZm9udC1ib2xkJywgJ2JnLXdoaXRlJywgJ3NoYWRvdy1zbScsICd0ZXh0LWdyYXktODAwJylcbiAgICAgIHRoaXMubWFpbFRhYlRhcmdldC5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktNTAwJylcbiAgICAgIHRoaXMucGlja3VwVGFiVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2ZvbnQtYm9sZCcsICdiZy13aGl0ZScsICdzaGFkb3ctc20nLCAndGV4dC1ncmF5LTgwMCcpXG4gICAgICB0aGlzLnBpY2t1cFRhYlRhcmdldC5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktNTAwJylcbiAgICAgIFxuICAgICAgaWYgKG1ldGhvZCA9PT0gJ21haWwnKSB7XG4gICAgICAgIHRoaXMubWFpbFRhYlRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktNTAwJylcbiAgICAgICAgdGhpcy5tYWlsVGFiVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2ZvbnQtYm9sZCcsICdiZy13aGl0ZScsICdzaGFkb3ctc20nLCAndGV4dC1ncmF5LTgwMCcpXG4gICAgICAgIC8vIFx1NjYzRVx1NzkzQVx1OTBBRVx1NUJDNFx1NTczMFx1NTc0MFx1RkYwQ1x1OTY5MFx1ODVDRlx1ODFFQVx1NTNENlx1NTczMFx1NTc0MFxuICAgICAgICBpZiAodGhpcy5oYXNBZGRyZXNzU2VjdGlvblRhcmdldCkgdGhpcy5hZGRyZXNzU2VjdGlvblRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgICAgICBpZiAodGhpcy5oYXNNYWlsQWRkcmVzc1RhcmdldCkgdGhpcy5tYWlsQWRkcmVzc1RhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5waWNrdXBUYWJUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTUwMCcpXG4gICAgICAgIHRoaXMucGlja3VwVGFiVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2ZvbnQtYm9sZCcsICdiZy13aGl0ZScsICdzaGFkb3ctc20nLCAndGV4dC1ncmF5LTgwMCcpXG4gICAgICAgIC8vIFx1NjYzRVx1NzkzQVx1ODFFQVx1NTNENlx1NTczMFx1NTc0MFx1RkYwQ1x1OTY5MFx1ODVDRlx1OTBBRVx1NUJDNFx1NTczMFx1NTc0MFxuICAgICAgICBpZiAodGhpcy5oYXNBZGRyZXNzU2VjdGlvblRhcmdldCkgdGhpcy5hZGRyZXNzU2VjdGlvblRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgICBpZiAodGhpcy5oYXNNYWlsQWRkcmVzc1RhcmdldCkgdGhpcy5tYWlsQWRkcmVzc1RhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGluY3JlYXNlKCk6IHZvaWQge1xuICAgIGNvbnN0IGN1cnJlbnRRdHkgPSBwYXJzZUludCh0aGlzLnF1YW50aXR5VGFyZ2V0LnRleHRDb250ZW50IHx8IFwiMVwiKVxuICAgIHRoaXMucXVhbnRpdHlUYXJnZXQudGV4dENvbnRlbnQgPSAoY3VycmVudFF0eSArIDEpLnRvU3RyaW5nKClcbiAgICB0aGlzLnVwZGF0ZVRvdGFsUHJpY2UoKVxuICB9XG5cbiAgZGVjcmVhc2UoKTogdm9pZCB7XG4gICAgY29uc3QgY3VycmVudFF0eSA9IHBhcnNlSW50KHRoaXMucXVhbnRpdHlUYXJnZXQudGV4dENvbnRlbnQgfHwgXCIxXCIpXG4gICAgaWYgKGN1cnJlbnRRdHkgPiAxKSB7XG4gICAgICB0aGlzLnF1YW50aXR5VGFyZ2V0LnRleHRDb250ZW50ID0gKGN1cnJlbnRRdHkgLSAxKS50b1N0cmluZygpXG4gICAgICB0aGlzLnVwZGF0ZVRvdGFsUHJpY2UoKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlVG90YWxQcmljZSgpOiB2b2lkIHtcbiAgICBjb25zdCBxdWFudGl0eSA9IHBhcnNlSW50KHRoaXMucXVhbnRpdHlUYXJnZXQudGV4dENvbnRlbnQgfHwgXCIxXCIpXG4gICAgY29uc3QgdG90YWwgPSB0aGlzLmRhaWx5UHJpY2UgKiB0aGlzLmRheXMgKiBxdWFudGl0eVxuICAgIGlmICh0aGlzLmhhc1RvdGFsUHJpY2VUYXJnZXQpIHtcbiAgICAgIHRoaXMudG90YWxQcmljZVRhcmdldC50ZXh0Q29udGVudCA9IHRvdGFsLnRvRml4ZWQoMClcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVBheW1lbnRCdXR0b24oKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ1tXaUZpXSB1cGRhdGVQYXltZW50QnV0dG9uIGNhbGxlZCwgc2VsZWN0ZWRQbGFuSWQ6JywgdGhpcy5zZWxlY3RlZFBsYW5JZClcbiAgICBjb25zdCBwYXltZW50TGluayA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdhI3dpZmktcGF5bWVudC1saW5rJykgYXMgSFRNTEFuY2hvckVsZW1lbnRcbiAgICBjb25zb2xlLmxvZygnW1dpRmldIEZvdW5kIHBheW1lbnRMaW5rOicsIHBheW1lbnRMaW5rKVxuICAgIGlmIChwYXltZW50TGluayAmJiB0aGlzLnNlbGVjdGVkUGxhbklkKSB7XG4gICAgICAvLyBcdTY2RjRcdTY1QjBsaW5rXHU3Njg0aHJlZlx1RkYwQ1x1NEZFRVx1NjUzOW9yZGVyYWJsZV9pZFx1NTNDMlx1NjU3MFxuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChwYXltZW50TGluay5ocmVmKVxuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ29yZGVyYWJsZV9pZCcsIHRoaXMuc2VsZWN0ZWRQbGFuSWQpXG4gICAgICBwYXltZW50TGluay5ocmVmID0gdXJsLnRvU3RyaW5nKClcbiAgICAgIGNvbnNvbGUubG9nKCdbV2lGaV0gVXBkYXRlZCBwYXltZW50TGluayBocmVmIHRvOicsIHBheW1lbnRMaW5rLmhyZWYpXG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJxdWFudGl0eVwiLCBcInRvdGFsUHJpY2VcIl1cbiAgZGVjbGFyZSByZWFkb25seSBxdWFudGl0eVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0b3RhbFByaWNlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1RvdGFsUHJpY2VUYXJnZXQ6IGJvb2xlYW5cblxuICBwcml2YXRlIGJhc2VQcmljZTogbnVtYmVyID0gMFxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJJbnRlcm5ldE9yZGVyRm9ybSBjb25uZWN0ZWRcIilcbiAgICBjb25zdCB0b3RhbFByaWNlRmllbGQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaW50ZXJuZXQtb3JkZXItZm9ybS10YXJnZXQ9XCJ0b3RhbFByaWNlRmllbGRcIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgaWYgKHRvdGFsUHJpY2VGaWVsZCkge1xuICAgICAgdGhpcy5iYXNlUHJpY2UgPSBwYXJzZUZsb2F0KHRvdGFsUHJpY2VGaWVsZC52YWx1ZSkgfHwgMFxuICAgIH1cbiAgfVxuXG4gIHNlbGVjdEFkZHJlc3MoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgcmFkaW8gPSBldmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IHNlbGVjdGVkSW5kZXggPSBwYXJzZUludChyYWRpby52YWx1ZSlcbiAgICBcbiAgICAvLyBcdTYyN0VcdTUyMzBcdTYyNDBcdTY3MDlcdTU3MzBcdTU3NDBcdTc2ODRsYWJlbFxuICAgIGNvbnN0IGxhYmVscyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1pbnRlcm5ldC1vcmRlci1mb3JtLXRhcmdldD1cIm1haWxTZWN0aW9uXCJdIGxhYmVsJylcbiAgICBcbiAgICBsYWJlbHMuZm9yRWFjaCgobGFiZWwsIGluZGV4KSA9PiB7XG4gICAgICAvLyBcdTY2RjRcdTY1QjBcdTY4MzdcdTVGMEZcbiAgICAgIGlmIChpbmRleCA9PT0gc2VsZWN0ZWRJbmRleCkge1xuICAgICAgICBsYWJlbC5jbGFzc0xpc3QuYWRkKCdib3JkZXItWyNGRkREMDBdJywgJ2JnLVsjRkZGRUY4XScpXG4gICAgICAgIGxhYmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1ncmF5LTIwMCcpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsYWJlbC5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItWyNGRkREMDBdJywgJ2JnLVsjRkZGRUY4XScpXG4gICAgICAgIGxhYmVsLmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1ncmF5LTIwMCcpXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEVuYWJsZS9kaXNhYmxlXHU1QkY5XHU1RTk0XHU3Njg0aGlkZGVuIGZpZWxkc1xuICAgICAgY29uc3QgaGlkZGVuRmllbGRzID0gbGFiZWwucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImhpZGRlblwiXScpXG4gICAgICBoaWRkZW5GaWVsZHMuZm9yRWFjaCgoZmllbGQpID0+IHtcbiAgICAgICAgKGZpZWxkIGFzIEhUTUxJbnB1dEVsZW1lbnQpLmRpc2FibGVkID0gKGluZGV4ICE9PSBzZWxlY3RlZEluZGV4KVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgc2VsZWN0UGFzc2VuZ2VyKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHJhZGlvID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBzZWxlY3RlZEluZGV4ID0gcGFyc2VJbnQocmFkaW8udmFsdWUpXG4gICAgXG4gICAgLy8gXHU2MjdFXHU1MjMwXHU2MjQwXHU2NzA5XHU0RTU4XHU1QkEyXHU3Njg0bGFiZWxcbiAgICBjb25zdCBsYWJlbHMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtaW50ZXJuZXQtb3JkZXItZm9ybS10YXJnZXQ9XCJwaWNrdXBTZWN0aW9uXCJdIGxhYmVsJylcbiAgICBcbiAgICBsYWJlbHMuZm9yRWFjaCgobGFiZWwsIGluZGV4KSA9PiB7XG4gICAgICAvLyBcdTY2RjRcdTY1QjBcdTY4MzdcdTVGMEZcbiAgICAgIGlmIChpbmRleCA9PT0gc2VsZWN0ZWRJbmRleCkge1xuICAgICAgICBsYWJlbC5jbGFzc0xpc3QuYWRkKCdib3JkZXItWyNGRkREMDBdJywgJ2JnLVsjRkZGRUY4XScpXG4gICAgICAgIGxhYmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1ncmF5LTIwMCcpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsYWJlbC5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItWyNGRkREMDBdJywgJ2JnLVsjRkZGRUY4XScpXG4gICAgICAgIGxhYmVsLmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1ncmF5LTIwMCcpXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEVuYWJsZS9kaXNhYmxlXHU1QkY5XHU1RTk0XHU3Njg0aGlkZGVuIGZpZWxkc1xuICAgICAgY29uc3QgaGlkZGVuRmllbGRzID0gbGFiZWwucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImhpZGRlblwiXScpXG4gICAgICBoaWRkZW5GaWVsZHMuZm9yRWFjaCgoZmllbGQpID0+IHtcbiAgICAgICAgKGZpZWxkIGFzIEhUTUxJbnB1dEVsZW1lbnQpLmRpc2FibGVkID0gKGluZGV4ICE9PSBzZWxlY3RlZEluZGV4KVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgaW5jcmVhc2UoKTogdm9pZCB7XG4gICAgY29uc3QgY3VycmVudFF0eSA9IHBhcnNlSW50KHRoaXMucXVhbnRpdHlUYXJnZXQudGV4dENvbnRlbnQgfHwgXCIxXCIpXG4gICAgY29uc3QgbmV3UXR5ID0gY3VycmVudFF0eSArIDFcbiAgICB0aGlzLnF1YW50aXR5VGFyZ2V0LnRleHRDb250ZW50ID0gbmV3UXR5LnRvU3RyaW5nKClcbiAgICB0aGlzLnVwZGF0ZVF1YW50aXR5RmllbGQobmV3UXR5KVxuICAgIHRoaXMudXBkYXRlVG90YWxQcmljZShuZXdRdHkpXG4gIH1cblxuICBkZWNyZWFzZSgpOiB2b2lkIHtcbiAgICBjb25zdCBjdXJyZW50UXR5ID0gcGFyc2VJbnQodGhpcy5xdWFudGl0eVRhcmdldC50ZXh0Q29udGVudCB8fCBcIjFcIilcbiAgICBpZiAoY3VycmVudFF0eSA+IDEpIHtcbiAgICAgIGNvbnN0IG5ld1F0eSA9IGN1cnJlbnRRdHkgLSAxXG4gICAgICB0aGlzLnF1YW50aXR5VGFyZ2V0LnRleHRDb250ZW50ID0gbmV3UXR5LnRvU3RyaW5nKClcbiAgICAgIHRoaXMudXBkYXRlUXVhbnRpdHlGaWVsZChuZXdRdHkpXG4gICAgICB0aGlzLnVwZGF0ZVRvdGFsUHJpY2UobmV3UXR5KVxuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZVJlbnRhbERheXMoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgaW5wdXQgPSBldmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IGRheXMgPSBwYXJzZUludChpbnB1dC52YWx1ZSkgfHwgMVxuICAgIHRoaXMudXBkYXRlVG90YWxQcmljZShkYXlzKVxuICAgIFxuICAgIC8vIFx1NjZGNFx1NjVCMHJlbnRhbF9pbmZvXHU3Njg0aGlkZGVuIGZpZWxkc1xuICAgIGNvbnN0IHJlbnRhbERheXNGaWVsZCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pbnRlcm5ldC1vcmRlci1mb3JtLXRhcmdldD1cInJlbnRhbERheXNGaWVsZFwiXScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBpZiAocmVudGFsRGF5c0ZpZWxkKSB7XG4gICAgICByZW50YWxEYXlzRmllbGQudmFsdWUgPSBkYXlzLnRvU3RyaW5nKClcbiAgICAgIFxuICAgICAgLy8gXHU4QkExXHU3Qjk3cmV0dXJuX2RhdGVcbiAgICAgIGNvbnN0IHBpY2t1cERhdGVGaWVsZCA9IHJlbnRhbERheXNGaWVsZC5jbG9zZXN0KCdkaXYnKT8ucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZSo9XCJbcGlja3VwX2RhdGVdXCJdJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgICAgY29uc3QgcmV0dXJuRGF0ZUZpZWxkID0gcmVudGFsRGF5c0ZpZWxkLmNsb3Nlc3QoJ2RpdicpPy5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lKj1cIltyZXR1cm5fZGF0ZV1cIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgICBcbiAgICAgIGlmIChwaWNrdXBEYXRlRmllbGQgJiYgcmV0dXJuRGF0ZUZpZWxkKSB7XG4gICAgICAgIGNvbnN0IHBpY2t1cERhdGUgPSBuZXcgRGF0ZShwaWNrdXBEYXRlRmllbGQudmFsdWUpXG4gICAgICAgIGNvbnN0IHJldHVybkRhdGUgPSBuZXcgRGF0ZShwaWNrdXBEYXRlKVxuICAgICAgICByZXR1cm5EYXRlLnNldERhdGUocmV0dXJuRGF0ZS5nZXREYXRlKCkgKyBkYXlzKVxuICAgICAgICByZXR1cm5EYXRlRmllbGQudmFsdWUgPSByZXR1cm5EYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNlbGVjdERlbGl2ZXJ5TWV0aG9kKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHJhZGlvID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBtYWlsU2VjdGlvbiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pbnRlcm5ldC1vcmRlci1mb3JtLXRhcmdldD1cIm1haWxTZWN0aW9uXCJdJylcbiAgICBjb25zdCBwaWNrdXBTZWN0aW9uID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWludGVybmV0LW9yZGVyLWZvcm0tdGFyZ2V0PVwicGlja3VwU2VjdGlvblwiXScpXG4gICAgY29uc3QgbWFpbExhYmVsID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWludGVybmV0LW9yZGVyLWZvcm0tdGFyZ2V0PVwibWFpbExhYmVsXCJdJylcbiAgICBjb25zdCBwaWNrdXBMYWJlbCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pbnRlcm5ldC1vcmRlci1mb3JtLXRhcmdldD1cInBpY2t1cExhYmVsXCJdJylcblxuICAgIGlmIChyYWRpby52YWx1ZSA9PT0gJ21haWwnKSB7XG4gICAgICBtYWlsU2VjdGlvbj8uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgIHBpY2t1cFNlY3Rpb24/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICBtYWlsTGFiZWw/LmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1bI0ZGREQwMF0nLCAnYmctWyNGRkZFRjhdJylcbiAgICAgIHBpY2t1cExhYmVsPy5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItWyNGRkREMDBdJywgJ2JnLVsjRkZGRUY4XScpXG4gICAgfSBlbHNlIHtcbiAgICAgIG1haWxTZWN0aW9uPy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgICAgcGlja3VwU2VjdGlvbj8uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgIHBpY2t1cExhYmVsPy5jbGFzc0xpc3QuYWRkKCdib3JkZXItWyNGRkREMDBdJywgJ2JnLVsjRkZGRUY4XScpXG4gICAgICBtYWlsTGFiZWw/LmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1bI0ZGREQwMF0nLCAnYmctWyNGRkZFRjhdJylcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVF1YW50aXR5RmllbGQocXVhbnRpdHk6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IHF1YW50aXR5RmllbGQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaW50ZXJuZXQtb3JkZXItZm9ybS10YXJnZXQ9XCJxdWFudGl0eUZpZWxkXCJdJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGlmIChxdWFudGl0eUZpZWxkKSB7XG4gICAgICBxdWFudGl0eUZpZWxkLnZhbHVlID0gcXVhbnRpdHkudG9TdHJpbmcoKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlVG90YWxQcmljZShtdWx0aXBsaWVyOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCB0b3RhbCA9IHRoaXMuYmFzZVByaWNlICogbXVsdGlwbGllclxuICAgIGlmICh0aGlzLmhhc1RvdGFsUHJpY2VUYXJnZXQpIHtcbiAgICAgIHRoaXMudG90YWxQcmljZVRhcmdldC50ZXh0Q29udGVudCA9IHRvdGFsLnRvRml4ZWQoMClcbiAgICB9XG4gICAgY29uc3QgdG90YWxQcmljZUZpZWxkID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWludGVybmV0LW9yZGVyLWZvcm0tdGFyZ2V0PVwidG90YWxQcmljZUZpZWxkXCJdJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGlmICh0b3RhbFByaWNlRmllbGQpIHtcbiAgICAgIHRvdGFsUHJpY2VGaWVsZC52YWx1ZSA9IHRvdGFsLnRvU3RyaW5nKClcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzZWxlY3QoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIC8vIFVwZGF0ZSBVSSB0byBzaG93IHRoaXMgY2FyZCBpcyBzZWxlY3RlZFxuICAgIGNvbnN0IGNhcmQgPSB0aGlzLmVsZW1lbnRcbiAgICAvLyBSZW1vdmUgc2VsZWN0aW9uIGZyb20gYWxsIG90aGVyIGNhcmRzXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtY29udHJvbGxlcj1cInByb2R1Y3QtY2FyZFwiXScpLmZvckVhY2goZWwgPT4ge1xuICAgICAgY29uc3QgY2hlY2tib3ggPSBlbC5xdWVyeVNlbGVjdG9yKCcudy01LmgtNS5yb3VuZGVkLWZ1bGwnKVxuICAgICAgaWYgKGNoZWNrYm94ICYmICFjaGVja2JveC5jbGFzc0xpc3QuY29udGFpbnMoJ2JvcmRlcicpKSB7XG4gICAgICAgIC8vIEFscmVhZHkgc2VsZWN0ZWQsIGNvbnZlcnQgdG8gdW5zZWxlY3RlZFxuICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItWyNGRkNDMDBdJywgJ2JnLVsjRkZGRUY4XScpXG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1ncmF5LTEwMCcsICdiZy13aGl0ZScpXG4gICAgICB9XG4gICAgfSlcbiAgICAvLyBBZGQgc2VsZWN0aW9uIHRvIHRoaXMgY2FyZFxuICAgIGNhcmQuY2xhc3NMaXN0LnJlbW92ZSgnYm9yZGVyLWdyYXktMTAwJywgJ2JnLXdoaXRlJylcbiAgICBjYXJkLmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1bI0ZGQ0MwMF0nLCAnYmctWyNGRkZFRjhdJylcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wicXVhbnRpdHlcIiwgXCJ0b3RhbFByaWNlXCJdXG4gIHN0YXRpYyB2YWx1ZXMgPSB7IG9yZGVyYWJsZVR5cGU6IFN0cmluZyB9XG4gIGRlY2xhcmUgcmVhZG9ubHkgcXVhbnRpdHlUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdG90YWxQcmljZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBvcmRlcmFibGVUeXBlVmFsdWU6IHN0cmluZ1xuXG4gIHByaXZhdGUgYmFzZVByaWNlOiBudW1iZXIgPSA5LjlcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIEdldCBiYXNlIHByaWNlIGZyb20gZmlyc3QgcHJvZHVjdFxuICAgIGNvbnN0IGZpcnN0UHJvZHVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNvbnRyb2xsZXI9XCJwcm9kdWN0LWNhcmRcIl0nKVxuICAgIGlmIChmaXJzdFByb2R1Y3QpIHtcbiAgICAgIGNvbnN0IHByaWNlRWwgPSBmaXJzdFByb2R1Y3QucXVlcnlTZWxlY3RvcignLnRleHQteGwuZm9udC1ib2xkLnRleHQtXFxcXFtcXFxcI0ZGNDQwMFxcXFxdJylcbiAgICAgIGlmIChwcmljZUVsKSB7XG4gICAgICAgIHRoaXMuYmFzZVByaWNlID0gcGFyc2VGbG9hdChwcmljZUVsLnRleHRDb250ZW50IHx8ICc5LjknKVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnVwZGF0ZVRvdGFsUHJpY2UoKVxuICB9XG5cbiAgZGVjcmVhc2UoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGN1cnJlbnRRdHkgPSBwYXJzZUludCh0aGlzLnF1YW50aXR5VGFyZ2V0LnRleHRDb250ZW50IHx8ICcxJylcbiAgICBpZiAoY3VycmVudFF0eSA+IDEpIHtcbiAgICAgIHRoaXMucXVhbnRpdHlUYXJnZXQudGV4dENvbnRlbnQgPSAoY3VycmVudFF0eSAtIDEpLnRvU3RyaW5nKClcbiAgICAgIHRoaXMudXBkYXRlVG90YWxQcmljZSgpXG4gICAgfVxuICB9XG5cbiAgaW5jcmVhc2UoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGN1cnJlbnRRdHkgPSBwYXJzZUludCh0aGlzLnF1YW50aXR5VGFyZ2V0LnRleHRDb250ZW50IHx8ICcxJylcbiAgICB0aGlzLnF1YW50aXR5VGFyZ2V0LnRleHRDb250ZW50ID0gKGN1cnJlbnRRdHkgKyAxKS50b1N0cmluZygpXG4gICAgdGhpcy51cGRhdGVUb3RhbFByaWNlKClcbiAgfVxuXG4gIGNoZWNrb3V0KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBcbiAgICAvLyBGaW5kIHNlbGVjdGVkIHByb2R1Y3QgYnkgY2hlY2tpbmcgYWxsIHByb2R1Y3QgY2FyZHNcbiAgICBjb25zdCBhbGxDYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWNvbnRyb2xsZXI9XCJwcm9kdWN0LWNhcmRcIl0nKVxuICAgIGxldCBzZWxlY3RlZENhcmQ6IEVsZW1lbnQgfCBudWxsID0gbnVsbFxuICAgIFxuICAgIC8vIEZpbmQgdGhlIGNhcmQgd2l0aCB5ZWxsb3cgYm9yZGVyIChGRkNDMDApXG4gICAgYWxsQ2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgICAgY29uc3QgY2xhc3NlcyA9IGNhcmQuY2xhc3NOYW1lXG4gICAgICBpZiAoY2xhc3Nlcy5pbmNsdWRlcygnRkZDQzAwJykgfHwgY2xhc3Nlcy5pbmNsdWRlcygnYm9yZGVyLVsjRkZDQzAwXScpKSB7XG4gICAgICAgIHNlbGVjdGVkQ2FyZCA9IGNhcmRcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIC8vIEZhbGxiYWNrOiBpZiBubyBjYXJkIHNlbGVjdGVkLCB1c2UgdGhlIGZpcnN0IGNhcmQgKGRlZmF1bHQgc2VsZWN0ZWQpXG4gICAgaWYgKCFzZWxlY3RlZENhcmQgJiYgYWxsQ2FyZHMubGVuZ3RoID4gMCkge1xuICAgICAgc2VsZWN0ZWRDYXJkID0gYWxsQ2FyZHNbMF1cbiAgICB9XG4gICAgXG4gICAgaWYgKCFzZWxlY3RlZENhcmQpIHtcbiAgICAgIGFsZXJ0KCdcdThCRjdcdTkwMDlcdTYyRTlcdTRFMDBcdTRFMkFTSU1cdTUzNjFcdTRFQTdcdTU0QzEnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3Qgb3JkZXJhYmxlSWQgPSAoc2VsZWN0ZWRDYXJkIGFzIEhUTUxFbGVtZW50KS5kYXRhc2V0LnByb2R1Y3RJZFxuICAgIGNvbnN0IG9yZGVyYWJsZVR5cGUgPSB0aGlzLm9yZGVyYWJsZVR5cGVWYWx1ZVxuICAgIGNvbnN0IHF1YW50aXR5ID0gdGhpcy5xdWFudGl0eVRhcmdldC50ZXh0Q29udGVudFxuXG4gICAgLy8gTmF2aWdhdGUgdG8gb3JkZXIgcGFnZSB3aXRoIHBhcmFtc1xuICAgIGNvbnN0IHVybCA9IGAvaW50ZXJuZXRfb3JkZXJzL25ldz9vcmRlcmFibGVfdHlwZT0ke29yZGVyYWJsZVR5cGV9Jm9yZGVyYWJsZV9pZD0ke29yZGVyYWJsZUlkfSZxdWFudGl0eT0ke3F1YW50aXR5fWBcbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybFxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVUb3RhbFByaWNlKCk6IHZvaWQge1xuICAgIGNvbnN0IHF1YW50aXR5ID0gcGFyc2VJbnQodGhpcy5xdWFudGl0eVRhcmdldC50ZXh0Q29udGVudCB8fCAnMScpXG4gICAgY29uc3QgdG90YWwgPSB0aGlzLmJhc2VQcmljZSAqIHF1YW50aXR5XG4gICAgdGhpcy50b3RhbFByaWNlVGFyZ2V0LnRleHRDb250ZW50ID0gdG90YWwudG9GaXhlZCgxKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJtb2RhbFwiLCBcImNvbnRlbnRcIl1cblxuICBkZWNsYXJlIHJlYWRvbmx5IG1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNvbnRlbnRUYXJnZXQ6IEhUTUxFbGVtZW50XG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlFyY29kZU1vZGFsIGNvbnRyb2xsZXIgY29ubmVjdGVkXCIpXG4gIH1cblxuICAvLyBcdTY2M0VcdTc5M0FcdTRFOENcdTdFRjRcdTc4MDFcdTVGMzlcdTdBOTdcbiAgc2hvdyhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgLy8gXHU2REZCXHU1MkEwXHU2REUxXHU1MTY1XHU1MkE4XHU3NTNCXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmNvbnRlbnRUYXJnZXQuY2xhc3NMaXN0LmFkZChcInNjYWxlLTEwMFwiLCBcIm9wYWNpdHktMTAwXCIpXG4gICAgfSwgMTApXG4gIH1cblxuICAvLyBcdTk2OTBcdTg1Q0ZcdTRFOENcdTdFRjRcdTc4MDFcdTVGMzlcdTdBOTdcbiAgaGlkZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLy8gXHU2REZCXHU1MkEwXHU2REUxXHU1MUZBXHU1MkE4XHU3NTNCXG4gICAgdGhpcy5jb250ZW50VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJzY2FsZS0xMDBcIiwgXCJvcGFjaXR5LTEwMFwiKVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgfSwgMjAwKVxuICB9XG5cbiAgLy8gXHU3MEI5XHU1MUZCXHU4MENDXHU2NjZGXHU1MTczXHU5NUVEXHU1RjM5XHU3QTk3XG4gIGJhY2tkcm9wQ2xpY2soZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gdGhpcy5tb2RhbFRhcmdldCkge1xuICAgICAgdGhpcy5oaWRlKGV2ZW50KVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwibW9kYWxcIixcbiAgICBcInNlYXJjaElucHV0XCIsXG4gICAgXCJsb2NhdGlvbkxpc3RcIixcbiAgICBcImxvY2F0aW9uSW5wdXRcIixcbiAgICBcImxvY2F0aW9uRGlzcGxheVwiLFxuICAgIFwicmVjZW50U2VjdGlvblwiLFxuICAgIFwicmVjZW50TGlzdFwiXG4gIF1cblxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIGxvY2F0aW9uVHlwZTogU3RyaW5nLCAvLyBcImZyb21cIiBvciBcInRvXCJcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VhcmNoSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBsb2NhdGlvbkxpc3RUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbG9jYXRpb25JbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGxvY2F0aW9uRGlzcGxheVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSByZWNlbnRTZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHJlY2VudExpc3RUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzTG9jYXRpb25JbnB1dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0xvY2F0aW9uRGlzcGxheVRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGxvY2F0aW9uVHlwZVZhbHVlOiBzdHJpbmdcblxuICBwcml2YXRlIHNlbGVjdGVkTG9jYXRpb246IHsgbmFtZTogc3RyaW5nOyBhZGRyZXNzOiBzdHJpbmcgfSB8IG51bGwgPSBudWxsXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkxvY2F0aW9uU2VsZWN0b3IgY29ubmVjdGVkXCIpXG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiTG9jYXRpb25TZWxlY3RvciBkaXNjb25uZWN0ZWRcIilcbiAgfVxuXG4gIG9wZW5Nb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICB0aGlzLnNlYXJjaElucHV0VGFyZ2V0LnZhbHVlID0gXCJcIlxuICAgIHRoaXMuc2VhcmNoSW5wdXRUYXJnZXQuZm9jdXMoKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiXG4gIH1cblxuICBjbG9zZU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcIlwiXG4gIH1cblxuICBzdG9wUHJvcGFnYXRpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgfVxuXG4gIHNlbGVjdExvY2F0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBuYW1lID0gYnV0dG9uLmRhdGFzZXQubG9jYXRpb25OYW1lIHx8IFwiXCJcbiAgICBjb25zdCBhZGRyZXNzID0gYnV0dG9uLmRhdGFzZXQubG9jYXRpb25BZGRyZXNzIHx8IFwiXCJcbiAgICBcbiAgICB0aGlzLnNlbGVjdGVkTG9jYXRpb24gPSB7IG5hbWUsIGFkZHJlc3MgfVxuXG4gICAgLy8gVXBkYXRlIFVJIHRvIHNob3cgc2VsZWN0ZWQgc3RhdGVcbiAgICB0aGlzLmxvY2F0aW9uTGlzdFRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKFwiYnV0dG9uXCIpLmZvckVhY2goYnRuID0+IHtcbiAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiYmctcHJpbWFyeS1saWdodFwiLCBcImJvcmRlci1wcmltYXJ5XCIpXG4gICAgfSlcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZChcImJnLXByaW1hcnktbGlnaHRcIiwgXCJib3JkZXJcIiwgXCJib3JkZXItcHJpbWFyeVwiKVxuICB9XG5cbiAgY29uZmlybSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuc2VsZWN0ZWRMb2NhdGlvbikge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGhpZGRlbiBpbnB1dCBmaWVsZCBpZiBleGlzdHNcbiAgICBpZiAodGhpcy5oYXNMb2NhdGlvbklucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLmxvY2F0aW9uSW5wdXRUYXJnZXQudmFsdWUgPSB0aGlzLnNlbGVjdGVkTG9jYXRpb24ubmFtZVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBkaXNwbGF5IGVsZW1lbnQgaWYgZXhpc3RzXG4gICAgaWYgKHRoaXMuaGFzTG9jYXRpb25EaXNwbGF5VGFyZ2V0KSB7XG4gICAgICB0aGlzLmxvY2F0aW9uRGlzcGxheVRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMuc2VsZWN0ZWRMb2NhdGlvbi5uYW1lXG4gICAgICB0aGlzLmxvY2F0aW9uRGlzcGxheVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwidGV4dC10ZXh0LW11dGVkXCIpXG4gICAgICB0aGlzLmxvY2F0aW9uRGlzcGxheVRhcmdldC5jbGFzc0xpc3QuYWRkKFwidGV4dC10ZXh0LXByaW1hcnlcIilcbiAgICB9XG5cbiAgICAvLyBTYXZlIHRvIHJlY2VudCBsb2NhdGlvbnNcbiAgICB0aGlzLnNhdmVUb1JlY2VudCh0aGlzLnNlbGVjdGVkTG9jYXRpb24pXG5cbiAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICB9XG5cbiAgc2VhcmNoKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGlucHV0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBxdWVyeSA9IGlucHV0LnZhbHVlLnRvTG93ZXJDYXNlKCkudHJpbSgpXG5cbiAgICBjb25zdCBidXR0b25zID0gdGhpcy5sb2NhdGlvbkxpc3RUYXJnZXQucXVlcnlTZWxlY3RvckFsbChcImJ1dHRvbltkYXRhLWxvY2F0aW9uLW5hbWVdXCIpXG4gICAgXG4gICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gYnV0dG9uIGFzIEhUTUxFbGVtZW50XG4gICAgICBjb25zdCBuYW1lID0gZWxlbWVudC5kYXRhc2V0LmxvY2F0aW9uTmFtZT8udG9Mb3dlckNhc2UoKSB8fCBcIlwiXG4gICAgICBjb25zdCBhZGRyZXNzID0gZWxlbWVudC5kYXRhc2V0LmxvY2F0aW9uQWRkcmVzcz8udG9Mb3dlckNhc2UoKSB8fCBcIlwiXG4gICAgICBcbiAgICAgIGlmIChuYW1lLmluY2x1ZGVzKHF1ZXJ5KSB8fCBhZGRyZXNzLmluY2x1ZGVzKHF1ZXJ5KSkge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBwcml2YXRlIHNhdmVUb1JlY2VudChsb2NhdGlvbjogeyBuYW1lOiBzdHJpbmc7IGFkZHJlc3M6IHN0cmluZyB9KTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGtleSA9IFwicmVjZW50X3RyYW5zZmVyX2xvY2F0aW9uc1wiXG4gICAgICBjb25zdCBzdG9yZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpXG4gICAgICBsZXQgcmVjZW50OiBBcnJheTx7IG5hbWU6IHN0cmluZzsgYWRkcmVzczogc3RyaW5nIH0+ID0gc3RvcmVkID8gSlNPTi5wYXJzZShzdG9yZWQpIDogW11cblxuICAgICAgLy8gUmVtb3ZlIGlmIGFscmVhZHkgZXhpc3RzXG4gICAgICByZWNlbnQgPSByZWNlbnQuZmlsdGVyKGxvYyA9PiBsb2MubmFtZSAhPT0gbG9jYXRpb24ubmFtZSlcblxuICAgICAgLy8gQWRkIHRvIGZyb250XG4gICAgICByZWNlbnQudW5zaGlmdChsb2NhdGlvbilcblxuICAgICAgLy8gS2VlcCBvbmx5IGxhc3QgNVxuICAgICAgcmVjZW50ID0gcmVjZW50LnNsaWNlKDAsIDUpXG5cbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkocmVjZW50KSlcblxuICAgICAgLy8gVXBkYXRlIFVJXG4gICAgICB0aGlzLnVwZGF0ZVJlY2VudExpc3QocmVjZW50KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHNhdmUgcmVjZW50IGxvY2F0aW9uOlwiLCBlcnJvcilcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVJlY2VudExpc3QobG9jYXRpb25zOiBBcnJheTx7IG5hbWU6IHN0cmluZzsgYWRkcmVzczogc3RyaW5nIH0+KTogdm9pZCB7XG4gICAgaWYgKGxvY2F0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMucmVjZW50U2VjdGlvblRhcmdldC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB0aGlzLnJlY2VudFNlY3Rpb25UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgIFxuICAgIGNvbnN0IGh0bWwgPSBsb2NhdGlvbnMubWFwKGxvYyA9PiBgXG4gICAgICA8YnV0dG9uXG4gICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICBkYXRhLWFjdGlvbj1cImNsaWNrLT5sb2NhdGlvbi1zZWxlY3RvciNzZWxlY3RMb2NhdGlvblwiXG4gICAgICAgIGRhdGEtbG9jYXRpb24tbmFtZT1cIiR7bG9jLm5hbWV9XCJcbiAgICAgICAgZGF0YS1sb2NhdGlvbi1hZGRyZXNzPVwiJHtsb2MuYWRkcmVzc31cIlxuICAgICAgICBjbGFzcz1cInctZnVsbCB0ZXh0LWxlZnQgcC0zIHJvdW5kZWQtbGcgaG92ZXI6Ymctc3VyZmFjZS1ob3ZlciB0cmFuc2l0aW9uLWNvbG9yc1wiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBpdGVtcy1zdGFydFwiPlxuICAgICAgICAgIDxzdmcgY2xhc3M9XCJ3LTUgaC01IHRleHQtdGV4dC1tdXRlZCBtdC0wLjUgbXItMyBmbGV4LXNocmluay0wXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIj5cbiAgICAgICAgICAgIDxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiBkPVwiTTUuMDUgNC4wNWE3IDcgMCAxMTkuOSA5LjlMMTAgMTguOWwtNC45NS00Ljk1YTcgNyAwIDAxMC05Ljl6TTEwIDExYTIgMiAwIDEwMC00IDIgMiAwIDAwMCA0elwiIGNsaXAtcnVsZT1cImV2ZW5vZGRcIi8+XG4gICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgtMVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtdGV4dC1wcmltYXJ5IGZvbnQtbWVkaXVtXCI+JHtsb2MubmFtZX08L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LXhzIHRleHQtdGV4dC1tdXRlZCBtdC0wLjVcIj4ke2xvYy5hZGRyZXNzfTwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvYnV0dG9uPlxuICAgIGApLmpvaW4oXCJcIilcblxuICAgIHRoaXMucmVjZW50TGlzdFRhcmdldC5pbm5lckhUTUwgPSBodG1sXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIHRyYW5zZmVyVHlwZTogU3RyaW5nLFxuICAgIHNlcnZpY2VUeXBlOiBTdHJpbmcsXG4gICAgZmxpZ2h0SWQ6IFN0cmluZyxcbiAgICB0cmFpbklkOiBTdHJpbmdcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgdHJhbnNmZXJUeXBlVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHJlYWRvbmx5IHNlcnZpY2VUeXBlVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHJlYWRvbmx5IGZsaWdodElkVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHJlYWRvbmx5IHRyYWluSWRWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlRyYW5zZmVyU2VhcmNoIGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgaGFuZGxlU2VhcmNoKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBcbiAgICAvLyBHZXQgbG9jYXRpb25fdG8gZnJvbSB0aGUgaGlkZGVuIGlucHV0XG4gICAgY29uc3QgbG9jYXRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWxvY2F0aW9uLXNlbGVjdG9yLXRhcmdldD1cImxvY2F0aW9uSW5wdXRcIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgbG9jYXRpb25UbyA9IGxvY2F0aW9uSW5wdXQ/LnZhbHVlXG4gICAgXG4gICAgaWYgKCFsb2NhdGlvblRvIHx8IGxvY2F0aW9uVG8udHJpbSgpID09PSAnJykge1xuICAgICAgLy8gU2hvdyBhbGVydCBpZiBsb2NhdGlvbiBub3Qgc2VsZWN0ZWRcbiAgICAgIGFsZXJ0KCdcdThCRjdcdTUxNDhcdTkwMDlcdTYyRTlcdTRFMEJcdThGNjZcdTcwQjknKVxuICAgICAgXG4gICAgICAvLyBUcmlnZ2VyIG1vZGFsIG9wZW5cbiAgICAgIGNvbnN0IG1vZGFsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtYWN0aW9uPVwiY2xpY2stPmxvY2F0aW9uLXNlbGVjdG9yI29wZW5Nb2RhbFwiXScpIGFzIEhUTUxCdXR0b25FbGVtZW50XG4gICAgICBpZiAobW9kYWxCdXR0b24pIHtcbiAgICAgICAgbW9kYWxCdXR0b24uY2xpY2soKVxuICAgICAgfVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIEdldCBsb2NhdGlvbl9mcm9tIGJhc2VkIG9uIGZsaWdodCBvciB0cmFpblxuICAgIGxldCBsb2NhdGlvbkZyb20gPSAnJ1xuICAgIGlmICh0aGlzLmZsaWdodElkVmFsdWUpIHtcbiAgICAgIC8vIEZvciBmbGlnaHRzLCBnZXQgYWlycG9ydCBmcm9tIHRoZSBwYWdlXG4gICAgICBjb25zdCBmbGlnaHRMb2NhdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGV4dC14bC5mb250LWJvbGQudGV4dC10ZXh0LXByaW1hcnknKSBhcyBIVE1MRWxlbWVudFxuICAgICAgbG9jYXRpb25Gcm9tID0gZmxpZ2h0TG9jYXRpb25FbGVtZW50Py50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnXG4gICAgfSBlbHNlIGlmICh0aGlzLnRyYWluSWRWYWx1ZSkge1xuICAgICAgLy8gRm9yIHRyYWlucywgZ2V0IHN0YXRpb24gZnJvbSB0aGUgcGFnZVxuICAgICAgY29uc3QgdHJhaW5Mb2NhdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGV4dC14bC5mb250LWJvbGQudGV4dC10ZXh0LXByaW1hcnknKSBhcyBIVE1MRWxlbWVudFxuICAgICAgbG9jYXRpb25Gcm9tID0gdHJhaW5Mb2NhdGlvbkVsZW1lbnQ/LnRleHRDb250ZW50Py50cmltKCkgfHwgJydcbiAgICB9XG4gICAgXG4gICAgLy8gQnVpbGQgVVJMIHdpdGggYWxsIHBhcmFtZXRlcnNcbiAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKClcbiAgICBwYXJhbXMuYXBwZW5kKCd0cmFuc2Zlcl90eXBlJywgdGhpcy50cmFuc2ZlclR5cGVWYWx1ZSlcbiAgICBwYXJhbXMuYXBwZW5kKCdzZXJ2aWNlX3R5cGUnLCB0aGlzLnNlcnZpY2VUeXBlVmFsdWUpXG4gICAgcGFyYW1zLmFwcGVuZCgnbG9jYXRpb25fdG8nLCBsb2NhdGlvblRvKVxuICAgIFxuICAgIGlmIChsb2NhdGlvbkZyb20pIHtcbiAgICAgIHBhcmFtcy5hcHBlbmQoJ2xvY2F0aW9uX2Zyb20nLCBsb2NhdGlvbkZyb20pXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLmZsaWdodElkVmFsdWUpIHtcbiAgICAgIHBhcmFtcy5hcHBlbmQoJ2ZsaWdodF9pZCcsIHRoaXMuZmxpZ2h0SWRWYWx1ZSlcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMudHJhaW5JZFZhbHVlKSB7XG4gICAgICBwYXJhbXMuYXBwZW5kKCd0cmFpbl9pZCcsIHRoaXMudHJhaW5JZFZhbHVlKVxuICAgIH1cbiAgICBcbiAgICAvLyBOYXZpZ2F0ZSB0byBwYWNrYWdlcyBwYWdlXG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgL3RyYW5zZmVycy9wYWNrYWdlcz8ke3BhcmFtcy50b1N0cmluZygpfWBcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wibW9kYWxcIiwgXCJuYW1lXCIsIFwicGhvbmVcIiwgXCJhZGRyZXNzXCIsIFwic2VsZWN0ZWRJbmZvXCJdXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgYWRkcmVzc0lkOiBTdHJpbmdcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbmFtZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBwaG9uZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBhZGRyZXNzVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlbGVjdGVkSW5mb1RhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSBhZGRyZXNzSWRWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkFkZHJlc3NTZWxlY3RvciBjb25uZWN0ZWRcIilcbiAgfVxuXG4gIG9wZW5Nb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gIH1cblxuICBjbG9zZU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgfVxuXG4gIHNlbGVjdEFkZHJlc3MoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGFkZHJlc3NJZCA9IHRhcmdldC5kYXRhc2V0LmFkZHJlc3NJZCB8fCAnJ1xuICAgIGNvbnN0IG5hbWUgPSB0YXJnZXQuZGF0YXNldC5uYW1lIHx8ICcnXG4gICAgY29uc3QgcGhvbmUgPSB0YXJnZXQuZGF0YXNldC5waG9uZSB8fCAnJ1xuICAgIGNvbnN0IGFkZHJlc3MgPSB0YXJnZXQuZGF0YXNldC5hZGRyZXNzIHx8ICcnXG5cbiAgICAvLyBVcGRhdGUgaGlkZGVuIGZpZWxkXG4gICAgdGhpcy5hZGRyZXNzSWRWYWx1ZSA9IGFkZHJlc3NJZFxuICAgIFxuICAgIC8vIFVwZGF0ZSBkaXNwbGF5XG4gICAgdGhpcy5uYW1lVGFyZ2V0LnRleHRDb250ZW50ID0gbmFtZVxuICAgIHRoaXMucGhvbmVUYXJnZXQudGV4dENvbnRlbnQgPSBwaG9uZVxuICAgIHRoaXMuYWRkcmVzc1RhcmdldC50ZXh0Q29udGVudCA9IGFkZHJlc3NcbiAgICBcbiAgICAvLyBVcGRhdGUgb3JkZXIgY29udHJvbGxlcidzIGRlbGl2ZXJ5IGFkZHJlc3NcbiAgICBjb25zdCB2aXNhT3JkZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtY29udHJvbGxlcio9XCJ2aXNhLW9yZGVyXCJdJylcbiAgICBpZiAodmlzYU9yZGVyRWxlbWVudCkge1xuICAgICAgY29uc3QgaW5wdXQgPSB2aXNhT3JkZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXZpc2Etb3JkZXItdGFyZ2V0PVwiZGVsaXZlcnlBZGRyZXNzXCJdJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgICAgaWYgKGlucHV0KSB7XG4gICAgICAgIGlucHV0LnZhbHVlID0gYWRkcmVzc1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXIge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcImlucHV0XCJdXG5cbiAgZGVjbGFyZSByZWFkb25seSBpbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuXG4gIHNlYXJjaChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgbGV0IHF1ZXJ5ID0gdGhpcy5pbnB1dFRhcmdldC52YWx1ZS50cmltKClcbiAgICBcbiAgICAvLyBcdTU5ODJcdTY3OUNcdThGOTNcdTUxNjVcdTY4NDZcdTRFM0FcdTdBN0FcdUZGMENcdTRGN0ZcdTc1MjggcGxhY2Vob2xkZXIgXHU3Njg0XHU1MDNDXG4gICAgaWYgKHF1ZXJ5ID09PSBcIlwiKSB7XG4gICAgICBxdWVyeSA9IHRoaXMuaW5wdXRUYXJnZXQucGxhY2Vob2xkZXJcbiAgICB9XG4gICAgXG4gICAgLy8gVE9ETzogSW1wbGVtZW50IGFjdHVhbCBzZWFyY2ggZnVuY3Rpb25hbGl0eVxuICAgIHdpbmRvdy5zaG93VG9hc3QoYFx1NjQxQ1x1N0QyMlwiJHtxdWVyeX1cIlx1NTI5Rlx1ODBGRFx1NTM3M1x1NUMwNlx1NEUwQVx1N0VCRlx1RkYwQ1x1NjU2Q1x1OEJGN1x1NjcxRlx1NUY4NWApXG4gIH1cblxuICBjbGVhcigpOiB2b2lkIHtcbiAgICB0aGlzLmlucHV0VGFyZ2V0LnZhbHVlID0gXCJcIlxuICAgIHRoaXMuaW5wdXRUYXJnZXQuZm9jdXMoKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBmYWxsYmFjazogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IFwiL1wiIH1cbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgZmFsbGJhY2tWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICAvLyBObyBjb25zb2xlLmxvZyBuZWVkZWRcbiAgfVxuXG4gIC8qKlxuICAgKiBTbWFydCBiYWNrIG5hdmlnYXRpb24gYmFzZWQgb24gcmVmZXJyZXJcbiAgICogLSBJZiB1c2VyIGNhbWUgZnJvbSBzYW1lIHNpdGU6IGdvIGJhY2tcbiAgICogLSBJZiB1c2VyIGNhbWUgZnJvbSBleHRlcm5hbCBzaXRlIG9yIGRpcmVjdCBhY2Nlc3M6IGdvIHRvIGZhbGxiYWNrXG4gICAqL1xuICBnb0JhY2soZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIFxuICAgIGNvbnN0IHJlZmVycmVyID0gZG9jdW1lbnQucmVmZXJyZXJcbiAgICBjb25zdCBjdXJyZW50SG9zdCA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgcmVmZXJyZXIgaXMgZnJvbSBzYW1lIHNpdGVcbiAgICBpZiAocmVmZXJyZXIgJiYgcmVmZXJyZXIuaW5jbHVkZXMoY3VycmVudEhvc3QpKSB7XG4gICAgICAvLyBDaGVjayBpZiB0aGVyZSdzIGFjdHVhbCBoaXN0b3J5XG4gICAgICBpZiAod2luZG93Lmhpc3RvcnkubGVuZ3RoID4gMSkge1xuICAgICAgICB3aW5kb3cuaGlzdG9yeS5iYWNrKClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEZhbGxiYWNrOiBnbyB0byBzcGVjaWZpZWQgcGF0aCBvciByb290XG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB0aGlzLmZhbGxiYWNrVmFsdWVcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIC8vIEFkZCB5b3VyIHRhcmdldHMgaGVyZSwgZS5nLjpcbiAgICAvLyBcIm1lc3NhZ2VJbnB1dFwiLCBcIm1lc3NhZ2VzQ29udGFpbmVyXCIsIFwic2VuZEJ1dHRvblwiXG4gIF1cblxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIC8vIEFkZCB5b3VyIHZhbHVlcyBoZXJlLCBlLmcuOlxuICAgIC8vIHJvb21JZDogU3RyaW5nLFxuICAgIC8vIHVzZXJJZDogU3RyaW5nXG4gIH1cblxuICAvLyBEZWNsYXJlIHlvdXIgdGFyZ2V0cyBhbmQgdmFsdWVzXG4gIC8vIGRlY2xhcmUgcmVhZG9ubHkgbWVzc2FnZUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIC8vIGRlY2xhcmUgcmVhZG9ubHkgbWVzc2FnZXNDb250YWluZXJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIC8vIGRlY2xhcmUgcmVhZG9ubHkgcm9vbUlkVmFsdWU6IHN0cmluZ1xuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJUb3VyR3JvdXBUYWJzIGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlRvdXJHcm91cFRhYnMgZGlzY29ubmVjdGVkXCIpXG4gIH1cblxuICAvLyBBZGQgeW91ciBhY3Rpb24gbWV0aG9kcyBoZXJlXG4gIC8vIEV4YW1wbGU6XG4gIC8vIGNsaWNrKCk6IHZvaWQge1xuICAvLyAgIGNvbnNvbGUubG9nKFwiQnV0dG9uIGNsaWNrZWRcIilcbiAgLy8gfVxuXG4gIC8vIEZPUk1TOiBUdXJibyArIFR1cmJvIFN0cmVhbXMgaGFuZGxlIGV2ZXJ5dGhpbmcgYXV0b21hdGljYWxseVxuICAvLyAtIEZvcm1zIHN1Ym1pdCB2aWEgQUpBWCAoVHVyYm8gRHJpdmUpXG4gIC8vIC0gU2VydmVyIHJlc3BvbmRzIHdpdGggZm9ybWF0LnR1cmJvX3N0cmVhbVxuICAvLyAtIFR1cmJvIFN0cmVhbXMgdXBkYXRlIERPTSBhdXRvbWF0aWNhbGx5XG4gIC8vIC0gTk8gbWFudWFsIGZvcm0gaGFuZGxpbmcgbmVlZGVkIGluIFN0aW11bHVzXG4gIC8vXG4gIC8vIFVzZSBTdGltdWx1cyBmb3I6XG4gIC8vIC0gVUkgaW50ZXJhY3Rpb25zICh0b2dnbGUsIHNob3cvaGlkZSlcbiAgLy8gLSBJbnB1dCB2YWxpZGF0aW9uL2Zvcm1hdHRpbmdcbiAgLy8gLSBEeW5hbWljIGZvcm0gZmllbGRzXG59XG4iLCAiaW1wb3J0IHsgQXBwbGljYXRpb24gfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuaW1wb3J0IFRoZW1lQ29udHJvbGxlciBmcm9tIFwiLi90aGVtZV9jb250cm9sbGVyXCJcbmltcG9ydCBEcm9wZG93bkNvbnRyb2xsZXIgZnJvbSBcIi4vZHJvcGRvd25fY29udHJvbGxlclwiXG5pbXBvcnQgU2RrSW50ZWdyYXRpb25Db250cm9sbGVyIGZyb20gXCIuL3Nka19pbnRlZ3JhdGlvbl9jb250cm9sbGVyXCJcbmltcG9ydCBDbGlwYm9hcmRDb250cm9sbGVyIGZyb20gXCIuL2NsaXBib2FyZF9jb250cm9sbGVyXCJcbmltcG9ydCBDaXR5U2VsZWN0b3JDb250cm9sbGVyIGZyb20gXCIuL2NpdHlfc2VsZWN0b3JfY29udHJvbGxlclwiXG5pbXBvcnQgRmxpZ2h0U2VhcmNoQ29udHJvbGxlciBmcm9tIFwiLi9mbGlnaHRfc2VhcmNoX2NvbnRyb2xsZXJcIlxuaW1wb3J0IERhdGVQaWNrZXJDb250cm9sbGVyIGZyb20gXCIuL2RhdGVfcGlja2VyX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEJvb2tpbmdDb250cm9sbGVyIGZyb20gXCIuL2Jvb2tpbmdfY29udHJvbGxlclwiXG5pbXBvcnQgQ291cG9uQ29udHJvbGxlciBmcm9tIFwiLi9jb3Vwb25fY29udHJvbGxlclwiXG4vLyBDb21pbmdTb29uQ29udHJvbGxlciByZW1vdmVkIC0gdXNpbmcgd2luZG93LnNob3dUb2FzdCgpIGluc3RlYWRcbmltcG9ydCBEZXN0aW5hdGlvbkNvbnRyb2xsZXIgZnJvbSBcIi4vZGVzdGluYXRpb25fY29udHJvbGxlclwiXG5pbXBvcnQgUmVnaW9uU2VsZWN0b3JDb250cm9sbGVyIGZyb20gXCIuL3JlZ2lvbl9zZWxlY3Rvcl9jb250cm9sbGVyXCJcbmltcG9ydCBIb3RlbFNlYXJjaENvbnRyb2xsZXIgZnJvbSBcIi4vaG90ZWxfc2VhcmNoX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEhvdGVsRGV0YWlsQ29udHJvbGxlciBmcm9tIFwiLi9ob3RlbF9kZXRhaWxfY29udHJvbGxlclwiXG5pbXBvcnQgU2VydmljZUdyaWRDb250cm9sbGVyIGZyb20gXCIuL3NlcnZpY2VfZ3JpZF9jb250cm9sbGVyXCJcbmltcG9ydCBQYXNzZW5nZXJTZWxlY3RvckNvbnRyb2xsZXIgZnJvbSBcIi4vcGFzc2VuZ2VyX3NlbGVjdG9yX2NvbnRyb2xsZXJcIlxuaW1wb3J0IENhYmluU2VsZWN0b3JDb250cm9sbGVyIGZyb20gXCIuL2NhYmluX3NlbGVjdG9yX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFRyaXBUeXBlQ29udHJvbGxlciBmcm9tIFwiLi90cmlwX3R5cGVfY29udHJvbGxlclwiXG5pbXBvcnQgUmV0dXJuRGF0ZVBpY2tlckNvbnRyb2xsZXIgZnJvbSBcIi4vcmV0dXJuX2RhdGVfcGlja2VyX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFJvdW5kVHJpcFNlbGVjdG9yQ29udHJvbGxlciBmcm9tIFwiLi9yb3VuZF90cmlwX3NlbGVjdG9yX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFRyYWluU2VhcmNoQ29udHJvbGxlciBmcm9tIFwiLi90cmFpbl9zZWFyY2hfY29udHJvbGxlclwiXG5pbXBvcnQgVHJhaW5MaXN0Q29udHJvbGxlciBmcm9tIFwiLi90cmFpbl9saXN0X2NvbnRyb2xsZXJcIlxuaW1wb3J0IFRyYWluQ2l0eVNlbGVjdG9yQ29udHJvbGxlciBmcm9tIFwiLi90cmFpbl9jaXR5X3NlbGVjdG9yX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEluZmluaXRlU2Nyb2xsQ29udHJvbGxlciBmcm9tIFwiLi9pbmZpbml0ZV9zY3JvbGxfY29udHJvbGxlclwiXG5pbXBvcnQgRGVlcFRyYXZlbENvbnRyb2xsZXIgZnJvbSBcIi4vZGVlcF90cmF2ZWxfY29udHJvbGxlclwiXG5pbXBvcnQgTXVsdGlDaXR5Q29udHJvbGxlciBmcm9tIFwiLi9tdWx0aV9jaXR5X2NvbnRyb2xsZXJcIlxuaW1wb3J0IEZsaWdodEZpbHRlckNvbnRyb2xsZXIgZnJvbSBcIi4vZmxpZ2h0X2ZpbHRlcl9jb250cm9sbGVyXCJcbmltcG9ydCBGbGlnaHRTb3J0Q29udHJvbGxlciBmcm9tIFwiLi9mbGlnaHRfc29ydF9jb250cm9sbGVyXCJcbmltcG9ydCBEYXRlTGlua0NvbnRyb2xsZXIgZnJvbSBcIi4vZGF0ZV9saW5rX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEhvdGVsR3Vlc3RTZWxlY3RvckNvbnRyb2xsZXIgZnJvbSBcIi4vaG90ZWxfZ3Vlc3Rfc2VsZWN0b3JfY29udHJvbGxlclwiXG5pbXBvcnQgSG90ZWxEYXRlUGlja2VyQ29udHJvbGxlciBmcm9tIFwiLi9ob3RlbF9kYXRlX3BpY2tlcl9jb250cm9sbGVyXCJcbmltcG9ydCBQYXltZW50TW9kYWxDb250cm9sbGVyIGZyb20gXCIuL3BheW1lbnRfbW9kYWxfY29udHJvbGxlclwiXG5pbXBvcnQgUGF5bWVudENvbmZpcm1hdGlvbkNvbnRyb2xsZXIgZnJvbSBcIi4vcGF5bWVudF9jb25maXJtYXRpb25fY29udHJvbGxlclwiXG5pbXBvcnQgSG90ZWxUYWJzQ29udHJvbGxlciBmcm9tIFwiLi9ob3RlbF90YWJzX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEhvdGVsVHJhdmVsZXJTZWxlY3RvckNvbnRyb2xsZXIgZnJvbSBcIi4vaG90ZWxfdHJhdmVsZXJfc2VsZWN0b3JfY29udHJvbGxlclwiXG5pbXBvcnQgVG9hc3RDb250cm9sbGVyIGZyb20gXCIuL3RvYXN0X2NvbnRyb2xsZXJcIlxuaW1wb3J0IFRvYXN0VHJpZ2dlckNvbnRyb2xsZXIgZnJvbSBcIi4vdG9hc3RfdHJpZ2dlcl9jb250cm9sbGVyXCJcbmltcG9ydCBIb3RlbEJvb2tpbmdDb250cm9sbGVyIGZyb20gXCIuL2hvdGVsX2Jvb2tpbmdfY29udHJvbGxlclwiXG5pbXBvcnQgVG91ckRldGFpbENvbnRyb2xsZXIgZnJvbSBcIi4vdG91cl9kZXRhaWxfY29udHJvbGxlclwiXG5pbXBvcnQgQ2Fyb3VzZWxDb250cm9sbGVyIGZyb20gXCIuL2Nhcm91c2VsX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFNjcm9sbFNweUNvbnRyb2xsZXIgZnJvbSBcIi4vc2Nyb2xsX3NweV9jb250cm9sbGVyXCJcbmltcG9ydCBQYWNrYWdlU3dpdGNoZXJDb250cm9sbGVyIGZyb20gXCIuL3BhY2thZ2Vfc3dpdGNoZXJfY29udHJvbGxlclwiXG5pbXBvcnQgQm9va2luZ01vZGFsQ29udHJvbGxlciBmcm9tIFwiLi9ib29raW5nX21vZGFsX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEJvdHRvbUJhckNvbnRyb2xsZXIgZnJvbSBcIi4vYm90dG9tX2Jhcl9jb250cm9sbGVyXCJcbmltcG9ydCBJbnN1cmFuY2VTZWxlY3RvckNvbnRyb2xsZXIgZnJvbSBcIi4vaW5zdXJhbmNlX3NlbGVjdG9yX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFRvdXJUcmF2ZWxlclNlbGVjdG9yQ29udHJvbGxlciBmcm9tIFwiLi90b3VyX3RyYXZlbGVyX3NlbGVjdG9yX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFNwZWNpYWxGbGlnaHRzRm9ybUNvbnRyb2xsZXIgZnJvbSBcIi4vc3BlY2lhbF9mbGlnaHRzX2Zvcm1fY29udHJvbGxlclwiXG5pbXBvcnQgVHJhaW5Cb29raW5nQ29udHJvbGxlciBmcm9tIFwiLi90cmFpbl9ib29raW5nX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFRyYWluQm9va2luZ0xvY2tDb250cm9sbGVyIGZyb20gXCIuL3RyYWluX2Jvb2tpbmdfbG9ja19jb250cm9sbGVyXCJcbmltcG9ydCBUcmFpblNlYXRTZWxlY3RvckNvbnRyb2xsZXIgZnJvbSBcIi4vdHJhaW5fc2VhdF9zZWxlY3Rvcl9jb250cm9sbGVyXCJcbmltcG9ydCBUb3VyR3JvdXBGaWx0ZXJDb250cm9sbGVyIGZyb20gXCIuL3RvdXJfZ3JvdXBfZmlsdGVyX2NvbnRyb2xsZXJcIlxuaW1wb3J0IENhclJlbnRhbFRhYnNDb250cm9sbGVyIGZyb20gXCIuL2Nhcl9yZW50YWxfdGFic19jb250cm9sbGVyXCJcbmltcG9ydCBIb3RlbFBhY2thZ2VTZWFyY2hDb250cm9sbGVyIGZyb20gXCIuL2hvdGVsX3BhY2thZ2Vfc2VhcmNoX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEhvdGVsUGFja2FnZU9yZGVyQ29udHJvbGxlciBmcm9tIFwiLi9ob3RlbF9wYWNrYWdlX29yZGVyX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFB3YUluc3RhbGxDb250cm9sbGVyIGZyb20gXCIuL3B3YV9pbnN0YWxsX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEJ1c0RhdGVQaWNrZXJDb250cm9sbGVyIGZyb20gXCIuL2J1c19kYXRlX3BpY2tlcl9jb250cm9sbGVyXCJcbmltcG9ydCBCdXNUaWNrZXRTZWFyY2hDb250cm9sbGVyIGZyb20gXCIuL2J1c190aWNrZXRfc2VhcmNoX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEJ1c1RpY2tldE9yZGVyQ29udHJvbGxlciBmcm9tIFwiLi9idXNfdGlja2V0X29yZGVyX2NvbnRyb2xsZXJcIlxuaW1wb3J0IERlZXBCb29raW5nQ29udHJvbGxlciBmcm9tIFwiLi9kZWVwX2Jvb2tpbmdfY29udHJvbGxlclwiXG5pbXBvcnQgVmlzYU9yZGVyQ29udHJvbGxlciBmcm9tIFwiLi92aXNhX29yZGVyX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEFicm9hZFJlZ2lvblNlbGVjdG9yQ29udHJvbGxlciBmcm9tIFwiLi9hYnJvYWRfcmVnaW9uX3NlbGVjdG9yX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEFicm9hZERhdGVQaWNrZXJDb250cm9sbGVyIGZyb20gXCIuL2Ficm9hZF9kYXRlX3BpY2tlcl9jb250cm9sbGVyXCJcbmltcG9ydCBBYnJvYWRQYXNzZW5nZXJTZWxlY3RvckNvbnRyb2xsZXIgZnJvbSBcIi4vYWJyb2FkX3Bhc3Nlbmdlcl9zZWxlY3Rvcl9jb250cm9sbGVyXCJcbmltcG9ydCBBYnJvYWRPcmRlckZvcm1Db250cm9sbGVyIGZyb20gXCIuL2Ficm9hZF9vcmRlcl9mb3JtX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEFicm9hZFRpY2tldFNlYXJjaENvbnRyb2xsZXIgZnJvbSBcIi4vYWJyb2FkX3RpY2tldF9zZWFyY2hfY29udHJvbGxlclwiXG5pbXBvcnQgSG9tZXN0YXlTZWFyY2hDb250cm9sbGVyIGZyb20gXCIuL2hvbWVzdGF5X3NlYXJjaF9jb250cm9sbGVyXCJcbmltcG9ydCBJbnRlcm5ldFNlcnZpY2VzQ29udHJvbGxlciBmcm9tIFwiLi9pbnRlcm5ldF9zZXJ2aWNlc19jb250cm9sbGVyXCJcbmltcG9ydCBTaW1DYXJkRmlsdGVyQ29udHJvbGxlciBmcm9tIFwiLi9zaW1fY2FyZF9maWx0ZXJfY29udHJvbGxlclwiXG5pbXBvcnQgRGF0YVBsYW5Db250cm9sbGVyIGZyb20gXCIuL2RhdGFfcGxhbl9jb250cm9sbGVyXCJcbmltcG9ydCBXaWZpQm9va2luZ0NvbnRyb2xsZXIgZnJvbSBcIi4vd2lmaV9ib29raW5nX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEludGVybmV0T3JkZXJGb3JtQ29udHJvbGxlciBmcm9tIFwiLi9pbnRlcm5ldF9vcmRlcl9mb3JtX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFByb2R1Y3RDYXJkQ29udHJvbGxlciBmcm9tIFwiLi9wcm9kdWN0X2NhcmRfY29udHJvbGxlclwiXG5pbXBvcnQgU2ltQ2FyZEJvb2tpbmdDb250cm9sbGVyIGZyb20gXCIuL3NpbV9jYXJkX2Jvb2tpbmdfY29udHJvbGxlclwiXG5pbXBvcnQgUXJjb2RlTW9kYWxDb250cm9sbGVyIGZyb20gXCIuL3FyY29kZV9tb2RhbF9jb250cm9sbGVyXCJcbmltcG9ydCBMb2NhdGlvblNlbGVjdG9yQ29udHJvbGxlciBmcm9tIFwiLi9sb2NhdGlvbl9zZWxlY3Rvcl9jb250cm9sbGVyXCJcbmltcG9ydCBUcmFuc2ZlclNlYXJjaENvbnRyb2xsZXIgZnJvbSBcIi4vdHJhbnNmZXJfc2VhcmNoX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEFkZHJlc3NTZWxlY3RvckNvbnRyb2xsZXIgZnJvbSBcIi4vYWRkcmVzc19zZWxlY3Rvcl9jb250cm9sbGVyXCJcbmltcG9ydCBTZWFyY2hDb250cm9sbGVyIGZyb20gXCIuL3NlYXJjaF9jb250cm9sbGVyXCJcbmltcG9ydCBTbWFydEJhY2tDb250cm9sbGVyIGZyb20gXCIuL3NtYXJ0X2JhY2tfY29udHJvbGxlclwiXG5pbXBvcnQgVG91ckdyb3VwVGFic0NvbnRyb2xsZXIgZnJvbSBcIi4vdG91cl9ncm91cF90YWJzX2NvbnRyb2xsZXJcIlxuXG5jb25zdCBhcHBsaWNhdGlvbiA9IEFwcGxpY2F0aW9uLnN0YXJ0KClcblxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJ0aGVtZVwiLCBUaGVtZUNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImRyb3Bkb3duXCIsIERyb3Bkb3duQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwic2RrLWludGVncmF0aW9uXCIsIFNka0ludGVncmF0aW9uQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiY2xpcGJvYXJkXCIsIENsaXBib2FyZENvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImNpdHktc2VsZWN0b3JcIiwgQ2l0eVNlbGVjdG9yQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiZmxpZ2h0LXNlYXJjaFwiLCBGbGlnaHRTZWFyY2hDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJkYXRlLXBpY2tlclwiLCBEYXRlUGlja2VyQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiYm9va2luZ1wiLCBCb29raW5nQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiY291cG9uXCIsIENvdXBvbkNvbnRyb2xsZXIpXG4vLyBDb21pbmdTb29uQ29udHJvbGxlciByZW1vdmVkIC0gdXNpbmcgd2luZG93LnNob3dUb2FzdCgpIGluc3RlYWRcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiZGVzdGluYXRpb25cIiwgRGVzdGluYXRpb25Db250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJyZWdpb24tc2VsZWN0b3JcIiwgUmVnaW9uU2VsZWN0b3JDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJob3RlbC1zZWFyY2hcIiwgSG90ZWxTZWFyY2hDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJob3RlbC1kZXRhaWxcIiwgSG90ZWxEZXRhaWxDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJzZXJ2aWNlLWdyaWRcIiwgU2VydmljZUdyaWRDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJwYXNzZW5nZXItc2VsZWN0b3JcIiwgUGFzc2VuZ2VyU2VsZWN0b3JDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJjYWJpbi1zZWxlY3RvclwiLCBDYWJpblNlbGVjdG9yQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwidHJpcC10eXBlXCIsIFRyaXBUeXBlQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwicmV0dXJuLWRhdGUtcGlja2VyXCIsIFJldHVybkRhdGVQaWNrZXJDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJyb3VuZC10cmlwLXNlbGVjdG9yXCIsIFJvdW5kVHJpcFNlbGVjdG9yQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwidHJhaW4tc2VhcmNoXCIsIFRyYWluU2VhcmNoQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwidHJhaW4tbGlzdFwiLCBUcmFpbkxpc3RDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJ0cmFpbi1jaXR5LXNlbGVjdG9yXCIsIFRyYWluQ2l0eVNlbGVjdG9yQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiaW5maW5pdGUtc2Nyb2xsXCIsIEluZmluaXRlU2Nyb2xsQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiZGVlcC10cmF2ZWxcIiwgRGVlcFRyYXZlbENvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcIm11bHRpLWNpdHlcIiwgTXVsdGlDaXR5Q29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiZmxpZ2h0LWZpbHRlclwiLCBGbGlnaHRGaWx0ZXJDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJmbGlnaHQtc29ydFwiLCBGbGlnaHRTb3J0Q29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiZGF0ZS1saW5rXCIsIERhdGVMaW5rQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiaG90ZWwtZ3Vlc3Qtc2VsZWN0b3JcIiwgSG90ZWxHdWVzdFNlbGVjdG9yQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiaG90ZWwtZGF0ZS1waWNrZXJcIiwgSG90ZWxEYXRlUGlja2VyQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwicGF5bWVudC1tb2RhbFwiLCBQYXltZW50TW9kYWxDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJwYXltZW50LWNvbmZpcm1hdGlvblwiLCBQYXltZW50Q29uZmlybWF0aW9uQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiaG90ZWwtdGFic1wiLCBIb3RlbFRhYnNDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJob3RlbC10cmF2ZWxlci1zZWxlY3RvclwiLCBIb3RlbFRyYXZlbGVyU2VsZWN0b3JDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJ0b2FzdFwiLCBUb2FzdENvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInRvYXN0LXRyaWdnZXJcIiwgVG9hc3RUcmlnZ2VyQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiaG90ZWwtYm9va2luZ1wiLCBIb3RlbEJvb2tpbmdDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJ0b3VyLWRldGFpbFwiLCBUb3VyRGV0YWlsQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiY2Fyb3VzZWxcIiwgQ2Fyb3VzZWxDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJzY3JvbGwtc3B5XCIsIFNjcm9sbFNweUNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInBhY2thZ2Utc3dpdGNoZXJcIiwgUGFja2FnZVN3aXRjaGVyQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiYm9va2luZy1tb2RhbFwiLCBCb29raW5nTW9kYWxDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJib3R0b20tYmFyXCIsIEJvdHRvbUJhckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImluc3VyYW5jZS1zZWxlY3RvclwiLCBJbnN1cmFuY2VTZWxlY3RvckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInRvdXItdHJhdmVsZXItc2VsZWN0b3JcIiwgVG91clRyYXZlbGVyU2VsZWN0b3JDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJzcGVjaWFsLWZsaWdodHMtZm9ybVwiLCBTcGVjaWFsRmxpZ2h0c0Zvcm1Db250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJ0cmFpbi1ib29raW5nXCIsIFRyYWluQm9va2luZ0NvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInRyYWluLWJvb2tpbmctbG9ja1wiLCBUcmFpbkJvb2tpbmdMb2NrQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwidHJhaW4tc2VhdC1zZWxlY3RvclwiLCBUcmFpblNlYXRTZWxlY3RvckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInRvdXItZ3JvdXAtZmlsdGVyXCIsIFRvdXJHcm91cEZpbHRlckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImNhci1yZW50YWwtdGFic1wiLCBDYXJSZW50YWxUYWJzQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiaG90ZWwtcGFja2FnZS1zZWFyY2hcIiwgSG90ZWxQYWNrYWdlU2VhcmNoQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiaG90ZWwtcGFja2FnZS1vcmRlclwiLCBIb3RlbFBhY2thZ2VPcmRlckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInB3YS1pbnN0YWxsXCIsIFB3YUluc3RhbGxDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJidXMtZGF0ZS1waWNrZXJcIiwgQnVzRGF0ZVBpY2tlckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImJ1cy10aWNrZXQtc2VhcmNoXCIsIEJ1c1RpY2tldFNlYXJjaENvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImJ1cy10aWNrZXQtb3JkZXJcIiwgQnVzVGlja2V0T3JkZXJDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJkZWVwLWJvb2tpbmdcIiwgRGVlcEJvb2tpbmdDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJ2aXNhLW9yZGVyXCIsIFZpc2FPcmRlckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImFicm9hZC1yZWdpb24tc2VsZWN0b3JcIiwgQWJyb2FkUmVnaW9uU2VsZWN0b3JDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJhYnJvYWQtZGF0ZS1waWNrZXJcIiwgQWJyb2FkRGF0ZVBpY2tlckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImFicm9hZC1wYXNzZW5nZXItc2VsZWN0b3JcIiwgQWJyb2FkUGFzc2VuZ2VyU2VsZWN0b3JDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJhYnJvYWQtb3JkZXItZm9ybVwiLCBBYnJvYWRPcmRlckZvcm1Db250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJhYnJvYWQtdGlja2V0LXNlYXJjaFwiLCBBYnJvYWRUaWNrZXRTZWFyY2hDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJob21lc3RheS1zZWFyY2hcIiwgSG9tZXN0YXlTZWFyY2hDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJpbnRlcm5ldC1zZXJ2aWNlc1wiLCBJbnRlcm5ldFNlcnZpY2VzQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwic2ltLWNhcmQtZmlsdGVyXCIsIFNpbUNhcmRGaWx0ZXJDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJkYXRhLXBsYW5cIiwgRGF0YVBsYW5Db250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJ3aWZpLWJvb2tpbmdcIiwgV2lmaUJvb2tpbmdDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJpbnRlcm5ldC1vcmRlci1mb3JtXCIsIEludGVybmV0T3JkZXJGb3JtQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwicHJvZHVjdC1jYXJkXCIsIFByb2R1Y3RDYXJkQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwic2ltLWNhcmQtYm9va2luZ1wiLCBTaW1DYXJkQm9va2luZ0NvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInFyY29kZS1tb2RhbFwiLCBRcmNvZGVNb2RhbENvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImxvY2F0aW9uLXNlbGVjdG9yXCIsIExvY2F0aW9uU2VsZWN0b3JDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJ0cmFuc2Zlci1zZWFyY2hcIiwgVHJhbnNmZXJTZWFyY2hDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJhZGRyZXNzLXNlbGVjdG9yXCIsIEFkZHJlc3NTZWxlY3RvckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInNlYXJjaFwiLCBTZWFyY2hDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJzbWFydC1iYWNrXCIsIFNtYXJ0QmFja0NvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInRvdXItZ3JvdXAtdGFic1wiLCBUb3VyR3JvdXBUYWJzQ29udHJvbGxlcilcblxud2luZG93LlN0aW11bHVzID0gYXBwbGljYXRpb25cbiIsICIvLyBTaW1wbGUgQ2xpcGJvYXJkIFV0aWxpdHlcbi8vIENvcHkgdG8gY2xpcGJvYXJkIHdpdGggZmFsbGJhY2sgc3VwcG9ydCBmb3IgaWZyYW1lIGFuZCBvbGRlciBicm93c2Vyc1xuXG5mdW5jdGlvbiBjb3B5VG9DbGlwYm9hcmQodGV4dDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZTxib29sZWFuPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgLy8gVHJ5IG1vZGVybiBDbGlwYm9hcmQgQVBJIGZpcnN0XG4gICAgaWYgKG5hdmlnYXRvci5jbGlwYm9hcmQgJiYgd2luZG93LmlzU2VjdXJlQ29udGV4dCkge1xuICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGV4dClcbiAgICAgICAgLnRoZW4oKCkgPT4gcmVzb2x2ZSh0cnVlKSlcbiAgICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICBpZiAoZmFsbGJhY2tDb3B5KHRleHQpKSB7XG4gICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdDb3B5IGZhaWxlZCcpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZmFsbGJhY2tDb3B5KHRleHQpKSB7XG4gICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWplY3QobmV3IEVycm9yKCdDb3B5IGZhaWxlZCcpKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBmYWxsYmFja0NvcHkodGV4dDogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IHRleHRBcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcbiAgdGV4dEFyZWEudmFsdWUgPSB0ZXh0O1xuICB0ZXh0QXJlYS5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XG4gIHRleHRBcmVhLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGV4dEFyZWEpO1xuICB0ZXh0QXJlYS5zZWxlY3QoKTtcblxuICB0cnkge1xuICAgIGNvbnN0IHN1Y2Nlc3MgPSBkb2N1bWVudC5leGVjQ29tbWFuZCgnY29weScpO1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGV4dEFyZWEpO1xuICAgIHJldHVybiBzdWNjZXNzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGV4dEFyZWEpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vLyBFeHBvcnQgZ2xvYmFsbHlcbndpbmRvdy5jb3B5VG9DbGlwYm9hcmQgPSBjb3B5VG9DbGlwYm9hcmQ7XG4iLCAiLy8gU0RLIFV0aWxpdHkgZm9yIGNoYXRib3ggaW50ZWdyYXRpb25cbi8vIEhhbmRsZXMgY2hhdGJveCBTREsgZGV0ZWN0aW9uIGFuZCBtZXNzYWdlIHNlbmRpbmdcblxuY2xhc3MgU0RLVXRpbHMge1xuICBwcml2YXRlIGlzQXZhaWxhYmxlOiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuaXNBdmFpbGFibGUgPSB0aGlzLmNoZWNrU0RLQXZhaWxhYmlsaXR5KCk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgU0RLIGlzIGF2YWlsYWJsZSBpbiBjdXJyZW50IGNvbnRleHRcbiAgICovXG4gIGNoZWNrU0RLQXZhaWxhYmlsaXR5KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0eXBlb2Ygd2luZG93LnNkayAhPT0gJ3VuZGVmaW5lZCcgJiYgXG4gICAgICAgICAgIHdpbmRvdy5zZGsgJiYgXG4gICAgICAgICAgIHR5cGVvZiB3aW5kb3cuc2RrLnNlbmQgPT09ICdmdW5jdGlvbic7XG4gIH1cblxuICAvKipcbiAgICogU2VuZCBtZXNzYWdlIHRvIGNoYXRib3ggaWYgU0RLIGlzIGF2YWlsYWJsZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSAtIE1lc3NhZ2UgdG8gc2VuZFxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gLSBXaGV0aGVyIG1lc3NhZ2Ugd2FzIHNlbnQgc3VjY2Vzc2Z1bGx5XG4gICAqL1xuICBzZW5kTWVzc2FnZShtZXNzYWdlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5pc0F2YWlsYWJsZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgd2luZG93LnNkayEuc2VuZChtZXNzYWdlKTtcbiAgICAgICAgY29uc29sZS5sb2coJ01lc3NhZ2Ugc2VudCB0byBjaGF0Ym94OicsIG1lc3NhZ2UpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzZW5kIG1lc3NhZ2UgdG8gU0RLOicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygnU0RLIG5vdCBhdmFpbGFibGUuIFdvdWxkIHNlbmQgbWVzc2FnZTonLCBtZXNzYWdlKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2VuZCBlcnJvciBkZXRhaWxzIHRvIGNoYXRib3ggZm9yIGZpeGluZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gZXJyb3JJbmZvIC0gRXJyb3IgaW5mb3JtYXRpb24gb2JqZWN0XG4gICAqL1xuICBzZW5kRXJyb3JGb3JGaXgoZXJyb3JJbmZvOiBhbnkgPSB7fSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHtcbiAgICAgIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLFxuICAgICAgcGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5zdWJzdHJpbmcoMSksXG4gICAgICBlcnJvck1lc3NhZ2UgPSAnVW5rbm93biBlcnJvcicsXG4gICAgICBhZGRpdGlvbmFsQ29udGV4dCA9ICcnXG4gICAgfSA9IGVycm9ySW5mbztcblxuICAgIGNvbnN0IG1lc3NhZ2UgPSBgRml4IHRoaXMgZXJyb3I6XG5VUkw6ICR7dXJsfVxuRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfVxuUGF0aDogJHtwYXRofSR7YWRkaXRpb25hbENvbnRleHQgPyBgXFxuXFxuQWRkaXRpb25hbCBDb250ZXh0OlxcbiR7ICBhZGRpdGlvbmFsQ29udGV4dH1gIDogJyd9XG5cblBsZWFzZSBoZWxwIG1lIGZpeCB0aGlzIGlzc3VlLmA7XG5cbiAgICByZXR1cm4gdGhpcy5zZW5kTWVzc2FnZShtZXNzYWdlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWZyZXNoIFNESyBhdmFpbGFiaWxpdHkgc3RhdHVzXG4gICAqL1xuICByZWZyZXNoKCk6IGJvb2xlYW4ge1xuICAgIHRoaXMuaXNBdmFpbGFibGUgPSB0aGlzLmNoZWNrU0RLQXZhaWxhYmlsaXR5KCk7XG4gICAgcmV0dXJuIHRoaXMuaXNBdmFpbGFibGU7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGN1cnJlbnQgU0RLIHN0YXR1c1xuICAgKi9cbiAgZ2V0U3RhdHVzKCk6IHsgaXNBdmFpbGFibGU6IGJvb2xlYW47IGhhc1NESzogYm9vbGVhbjsgaGFzU2VuZE1ldGhvZDogYm9vbGVhbiB9IHtcbiAgICByZXR1cm4ge1xuICAgICAgaXNBdmFpbGFibGU6IHRoaXMuaXNBdmFpbGFibGUsXG4gICAgICBoYXNTREs6IHR5cGVvZiB3aW5kb3cuc2RrICE9PSAndW5kZWZpbmVkJyxcbiAgICAgIGhhc1NlbmRNZXRob2Q6IHR5cGVvZiB3aW5kb3cuc2RrPy5zZW5kID09PSAnZnVuY3Rpb24nXG4gICAgfTtcbiAgfVxufVxuXG4vLyBDcmVhdGUgc2luZ2xldG9uIGluc3RhbmNlXG5jb25zdCBzZGtVdGlscyA9IG5ldyBTREtVdGlscygpO1xuXG4vLyBHbG9iYWwgZnVuY3Rpb24gZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbndpbmRvdy5zZW5kVG9TREsgPSAobWVzc2FnZSkgPT4gc2RrVXRpbHMuc2VuZE1lc3NhZ2UobWVzc2FnZSk7XG53aW5kb3cuc2VuZEVycm9yVG9TREsgPSAoZXJyb3JJbmZvKSA9PiBzZGtVdGlscy5zZW5kRXJyb3JGb3JGaXgoZXJyb3JJbmZvKTtcbndpbmRvdy5pc1NES0F2YWlsYWJsZSA9ICgpID0+IHNka1V0aWxzLmdldFN0YXR1cygpLmlzQXZhaWxhYmxlO1xuXG4vLyBFeHBvcnQgZ2xvYmFsbHlcbndpbmRvdy5zZGtVdGlscyA9IHNka1V0aWxzO1xuXG5leHBvcnQgZGVmYXVsdCBzZGtVdGlscztcbiIsICIvLyBTdGltdWx1cyBDb250cm9sbGVyIFZhbGlkYXRvclxuLy8gQ2hlY2tzIGZvciBtaXNzaW5nIHN0aW11bHVzIGNvbnRyb2xsZXJzIHJlZmVyZW5jZWQgaW4gdmlld3NcblxuY2xhc3MgU3RpbXVsdXNWYWxpZGF0b3Ige1xuICBwcml2YXRlIHJlZ2lzdGVyZWRDb250cm9sbGVyczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7XG4gIHByaXZhdGUgbWlzc2luZ0NvbnRyb2xsZXJzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcbiAgcHJpdmF0ZSBoYXNSZXBvcnRlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIGVsZW1lbnRJc3N1ZXM6IE1hcDxzdHJpbmcsIHN0cmluZ1tdPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBzdGltdWx1cyA9IHdpbmRvdy5TdGltdWx1cztcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmluaXRWYWxpZGF0b3IoKTtcbiAgfVxuXG4gIHByaXZhdGUgaW5pdFZhbGlkYXRvcigpOiB2b2lkIHtcbiAgICAvLyBPbmx5IHJ1biBpbiBkZXZlbG9wbWVudCBlbnZpcm9ubWVudFxuICAgIC8vXG4gICAgaWYgKCF0aGlzLmlzRGV2ZWxvcG1lbnQoKSkge1xuICAgICAgY29uc29sZS5sb2coJ1N0aW11bHVzVmFsaWRhdG9yIG5vdCBlbmFibGUgaW4gbm9uLWRldmVsb3AgZW52aXJvbm1lbnQuJylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmICghd2luZG93LlN0aW11bHVzKSB7XG4gICAgICBjb25zb2xlLmxvZygnU3RpbXVsdXNWYWxpZGF0b3Igbm90IGVuYWJsZSB3aGlsZSBTdGltdWx1cyBub3QgZm91bmQnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdGhpcy5zZXR1cFN0aW11bHVzRXJyb3JIYW5kbGVyKCk7XG4gICAgdGhpcy5jb2xsZWN0UmVnaXN0ZXJlZENvbnRyb2xsZXJzKCk7XG4gICAgdGhpcy52YWxpZGF0ZU9uRE9NUmVhZHkoKTtcbiAgICB0aGlzLmludGVyY2VwdEFjdGlvbkNsaWNrcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBpc0RldmVsb3BtZW50KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhIXdpbmRvdy5lcnJvckhhbmRsZXJcbiAgfVxuXG4gIHByaXZhdGUgc2V0dXBTdGltdWx1c0Vycm9ySGFuZGxlcigpOiB2b2lkIHtcbiAgICAvLyBTZXR1cCBTdGltdWx1cyBhcHBsaWNhdGlvbiBlcnJvciBoYW5kbGluZyB1c2luZyBhcHBsaWNhdGlvbi5oYW5kbGVFcnJvclxuICAgIGNvbnN0IHNldHVwSGFuZGxlciA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHN0aW11bHVzID0gd2luZG93LlN0aW11bHVzIGFzIGFueTtcbiAgICAgIGlmIChzdGltdWx1cyAmJiB0eXBlb2Ygc3RpbXVsdXMuaGFuZGxlRXJyb3IgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHN0aW11bHVzLmhhbmRsZUVycm9yID0gKGVycm9yOiBFcnJvciwgbWVzc2FnZTogc3RyaW5nLCBkZXRhaWw6IGFueSkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1N0aW11bHVzIEVycm9yOicsIHsgZXJyb3IsIG1lc3NhZ2UsIGRldGFpbCB9KTtcblxuICAgICAgICAgIC8vIFVzZSB0aGUgZ2xvYmFsIGVycm9yIGhhbmRsZXIgdG8gY2FwdHVyZSBTdGltdWx1cyBlcnJvcnNcbiAgICAgICAgICBpZiAod2luZG93LmVycm9ySGFuZGxlcikge1xuICAgICAgICAgICAgbGV0IGVycm9yTWVzc2FnZSA9IG1lc3NhZ2UgfHwgZXJyb3IubWVzc2FnZSB8fCAnU3RpbXVsdXMgZXJyb3Igb2NjdXJyZWQnO1xuICAgICAgICAgICAgbGV0IGNvbnRyb2xsZXJOYW1lID0gJyc7XG4gICAgICAgICAgICBsZXQgYWN0aW9uID0gJyc7XG4gICAgICAgICAgICBsZXQgc3ViVHlwZTogJ21pc3NpbmctY29udHJvbGxlcicgfCAnc2NvcGUtZXJyb3InIHwgJ3Bvc2l0aW9uaW5nLWlzc3VlcycgfCAnYWN0aW9uLWNsaWNrJyB8ICdtaXNzaW5nLXRhcmdldCcgfCAnbWlzc2luZy1hY3Rpb24nIHwgJ21ldGhvZC1ub3QtZm91bmQnID0gJ3Njb3BlLWVycm9yJztcbiAgICAgICAgICAgIGxldCBzdWdnZXN0aW9uID0gJyc7XG4gICAgICAgICAgICBsZXQgZWxlbWVudEluZm8gPSBudWxsO1xuXG4gICAgICAgICAgICAvLyBFeHRyYWN0IGNvbnRyb2xsZXIgYW5kIGFjdGlvbiBpbmZvcm1hdGlvbiBmcm9tIGRldGFpbCBvciBlcnJvciBjb250ZXh0XG4gICAgICAgICAgICBpZiAoZGV0YWlsKSB7XG4gICAgICAgICAgICAgIGlmIChkZXRhaWwuaWRlbnRpZmllcikge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJOYW1lID0gZGV0YWlsLmlkZW50aWZpZXI7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGRldGFpbC5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBhY3Rpb24gPSBkZXRhaWwuYWN0aW9uO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChkZXRhaWwuZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnRJbmZvID0ge1xuICAgICAgICAgICAgICAgICAgdGFnTmFtZTogZGV0YWlsLmVsZW1lbnQudGFnTmFtZSxcbiAgICAgICAgICAgICAgICAgIGlkOiBkZXRhaWwuZWxlbWVudC5pZCxcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogZGV0YWlsLmVsZW1lbnQuY2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgICAgb3V0ZXJIVE1MOiBgJHtkZXRhaWwuZWxlbWVudC5vdXRlckhUTUw/LnN1YnN0cmluZygwLCAyMDApICB9Li4uYFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQW5hbHl6ZSBlcnJvciB0eXBlIGFuZCBwcm92aWRlIHNwZWNpZmljIHN1Z2dlc3Rpb25zXG4gICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnQ29udHJvbGxlcicpICYmIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ2lzIG5vdCBkZWZpbmVkJykpIHtcbiAgICAgICAgICAgICAgc3ViVHlwZSA9ICdtaXNzaW5nLWNvbnRyb2xsZXInO1xuICAgICAgICAgICAgICBjb25zdCBjb250cm9sbGVyTWF0Y2ggPSBlcnJvci5tZXNzYWdlLm1hdGNoKC8oXFx3KylDb250cm9sbGVyIGlzIG5vdCBkZWZpbmVkLyk7XG4gICAgICAgICAgICAgIGlmIChjb250cm9sbGVyTWF0Y2gpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyTmFtZSA9IGNvbnRyb2xsZXJNYXRjaFsxXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGBTdGltdWx1cyBjb250cm9sbGVyIFwiJHtjb250cm9sbGVyTmFtZX1cIiBpcyBub3QgZGVmaW5lZCBvciBub3QgcmVnaXN0ZXJlZGA7XG4gICAgICAgICAgICAgICAgc3VnZ2VzdGlvbiA9IGBNYWtlIHN1cmUgdG8gaW1wb3J0IGFuZCByZWdpc3RlciB0aGUgXCIke2NvbnRyb2xsZXJOYW1lfVwiIGNvbnRyb2xsZXIgaW4gYXBwL2phdmFzY3JpcHQvY29udHJvbGxlcnMvaW5kZXgudHMuIGAgK1xuICAgICAgICAgICAgICAgICAgYENoZWNrIGlmIHRoZSBjb250cm9sbGVyIGZpbGUgZXhpc3RzIGF0IGFwcC9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzLyR7Y29udHJvbGxlck5hbWV9X2NvbnRyb2xsZXIudHNgO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ01pc3NpbmcgdGFyZ2V0IGVsZW1lbnQnKSkge1xuICAgICAgICAgICAgICBzdWJUeXBlID0gJ21pc3NpbmctdGFyZ2V0JztcbiAgICAgICAgICAgICAgc3VnZ2VzdGlvbiA9ICdDaGVjayB0aGF0IHRoZSB0YXJnZXQgZWxlbWVudCBleGlzdHMgaW4gdGhlIERPTSBhbmQgaGFzIHRoZSBjb3JyZWN0IGRhdGEtW2NvbnRyb2xsZXJdLXRhcmdldCBhdHRyaWJ1dGUnO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdNaXNzaW5nIGFjdGlvbicpKSB7XG4gICAgICAgICAgICAgIHN1YlR5cGUgPSAnbWlzc2luZy1hY3Rpb24nO1xuICAgICAgICAgICAgICBzdWdnZXN0aW9uID0gJ1ZlcmlmeSB0aGF0IHRoZSBhY3Rpb24gbWV0aG9kIGV4aXN0cyBpbiB0aGUgY29udHJvbGxlciBjbGFzcyBhbmQgaXMgcHJvcGVybHkgZGVmaW5lZCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UgJiYgbWVzc2FnZS5pbmNsdWRlcygnY2xpY2snKSkge1xuICAgICAgICAgICAgICBzdWJUeXBlID0gJ2FjdGlvbi1jbGljayc7XG4gICAgICAgICAgICAgIHN1Z2dlc3Rpb24gPSAnQ2hlY2sgaWYgdGhlIGNsaWNrIGFjdGlvbiBoYW5kbGVyIGV4aXN0cyBhbmQgdGhlIGVsZW1lbnQgaGFzIHRoZSBjb3JyZWN0IGRhdGEtYWN0aW9uIGF0dHJpYnV0ZSc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFJlcG9ydCB0aGUgZXJyb3IgdG8gdGhlIGVycm9yIGhhbmRsZXJcbiAgICAgICAgICAgIHdpbmRvdy5lcnJvckhhbmRsZXIuaGFuZGxlRXJyb3Ioe1xuICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgICAgICAgIHR5cGU6ICdzdGltdWx1cycsXG4gICAgICAgICAgICAgIHN1YlR5cGU6IHN1YlR5cGUsXG4gICAgICAgICAgICAgIGNvbnRyb2xsZXJOYW1lOiBjb250cm9sbGVyTmFtZSxcbiAgICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb24sXG4gICAgICAgICAgICAgIHN1Z2dlc3Rpb246IHN1Z2dlc3Rpb24sXG4gICAgICAgICAgICAgIGVsZW1lbnRJbmZvOiBlbGVtZW50SW5mbyxcbiAgICAgICAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgICAgICAgIG9yaWdpbmFsTWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgICAgICAgbmFtZTogZXJyb3IubmFtZSxcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICBzdGFjazogZXJyb3Iuc3RhY2tcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRldGFpbDogZGV0YWlsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICBmaWxlbmFtZTogJ3N0aW11bHVzLWFwcGxpY2F0aW9uJyxcbiAgICAgICAgICAgICAgZXJyb3I6IGVycm9yXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1N0aW11bHVzIGVycm9yIGhhbmRsaW5nIGNvbmZpZ3VyZWQgdmlhIHN0aW11bHVzX3ZhbGlkYXRvcicpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBUcnkgdG8gc2V0dXAgaW1tZWRpYXRlbHkgaWYgU3RpbXVsdXMgaXMgYWxyZWFkeSBhdmFpbGFibGVcbiAgICBpZiAod2luZG93LlN0aW11bHVzKSB7XG4gICAgICBzZXR1cEhhbmRsZXIoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gV2FpdCBmb3IgU3RpbXVsdXMgdG8gYmUgYXZhaWxhYmxlXG4gICAgICBjb25zdCBjaGVja1N0aW11bHVzID0gKCkgPT4ge1xuICAgICAgICBpZiAod2luZG93LlN0aW11bHVzKSB7XG4gICAgICAgICAgc2V0dXBIYW5kbGVyKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0VGltZW91dChjaGVja1N0aW11bHVzLCAxMDApO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgY2hlY2tTdGltdWx1cygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY29sbGVjdFJlZ2lzdGVyZWRDb250cm9sbGVycygpOiB2b2lkIHtcbiAgICAvLyBHZXQgcmVnaXN0ZXJlZCBjb250cm9sbGVycyBmcm9tIFN0aW11bHVzIGFwcGxpY2F0aW9uXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0aW11bHVzID0gd2luZG93LlN0aW11bHVzIGFzIGFueTtcbiAgICAgIGlmIChzdGltdWx1cz8ucm91dGVyPy5tb2R1bGVzQnlJZGVudGlmaWVyKSB7XG4gICAgICAgIGNvbnN0IG1vZHVsZXMgPSBzdGltdWx1cy5yb3V0ZXIubW9kdWxlc0J5SWRlbnRpZmllcjtcbiAgICAgICAgZm9yIChjb25zdCBbaWRlbnRpZmllcl0gb2YgbW9kdWxlcykge1xuICAgICAgICAgIHRoaXMucmVnaXN0ZXJlZENvbnRyb2xsZXJzLmFkZChpZGVudGlmaWVyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0NvdWxkIG5vdCBhY2Nlc3MgU3RpbXVsdXMgY29udHJvbGxlcnM6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdmFsaWRhdGVPbkRPTVJlYWR5KCk6IHZvaWQge1xuICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnbG9hZGluZycpIHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB0aGlzLnZhbGlkYXRlQ29udHJvbGxlcnMoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudmFsaWRhdGVDb250cm9sbGVycygpO1xuICAgIH1cblxuICAgIC8vIEFsc28gdmFsaWRhdGUgd2hlbiBuZXcgY29udGVudCBpcyBhZGRlZCBkeW5hbWljYWxseVxuICAgIHRoaXMub2JzZXJ2ZU5ld0NvbnRlbnQoKTtcbiAgfVxuXG4gIHByaXZhdGUgdmFsaWRhdGVDb250cm9sbGVycygpOiB2b2lkIHtcbiAgICBjb25zdCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWNvbnRyb2xsZXJdJyk7XG5cbiAgICBlbGVtZW50cy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgY29uc3QgY29udHJvbGxlcnMgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1jb250cm9sbGVyJyk/LnNwbGl0KCcgJykgfHwgW107XG5cbiAgICAgIGNvbnRyb2xsZXJzLmZvckVhY2goY29udHJvbGxlciA9PiB7XG4gICAgICAgIGNvbnN0IHRyaW1tZWRDb250cm9sbGVyID0gY29udHJvbGxlci50cmltKCk7XG4gICAgICAgIGlmICh0cmltbWVkQ29udHJvbGxlciAmJiAhdGhpcy5yZWdpc3RlcmVkQ29udHJvbGxlcnMuaGFzKHRyaW1tZWRDb250cm9sbGVyKSkge1xuICAgICAgICAgIHRoaXMubWlzc2luZ0NvbnRyb2xsZXJzLmFkZCh0cmltbWVkQ29udHJvbGxlcik7XG4gICAgICAgIH0gZWxzZSBpZiAodHJpbW1lZENvbnRyb2xsZXIgJiYgdGhpcy5yZWdpc3RlcmVkQ29udHJvbGxlcnMuaGFzKHRyaW1tZWRDb250cm9sbGVyKSkge1xuICAgICAgICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIHRhcmdldHMgZm9yIHJlZ2lzdGVyZWQgY29udHJvbGxlcnNcbiAgICAgICAgICB0aGlzLnZhbGlkYXRlUmVxdWlyZWRUYXJnZXRzKGVsZW1lbnQsIHRyaW1tZWRDb250cm9sbGVyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFZhbGlkYXRlIGVsZW1lbnQgcG9zaXRpb25pbmcgaXNzdWVzXG4gICAgICB0aGlzLnZhbGlkYXRlRWxlbWVudFBvc2l0aW9uaW5nKGVsZW1lbnQpO1xuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMubWlzc2luZ0NvbnRyb2xsZXJzLnNpemUgPiAwKSB7XG4gICAgICB0aGlzLnJlcG9ydE1pc3NpbmdDb250cm9sbGVycygpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmVsZW1lbnRJc3N1ZXMuc2l6ZSA+IDApIHtcbiAgICAgIHRoaXMucmVwb3J0RWxlbWVudElzc3VlcygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgb2JzZXJ2ZU5ld0NvbnRlbnQoKTogdm9pZCB7XG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihtdXRhdGlvbnMgPT4ge1xuICAgICAgbGV0IGhhc05ld0VsZW1lbnRzID0gZmFsc2U7XG5cbiAgICAgIG11dGF0aW9ucy5mb3JFYWNoKG11dGF0aW9uID0+IHtcbiAgICAgICAgaWYgKG11dGF0aW9uLnR5cGUgPT09ICdjaGlsZExpc3QnICYmIG11dGF0aW9uLmFkZGVkTm9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIC8vIElnbm9yZSBlcnJvciBoYW5kbGVyIFVJIGNoYW5nZXMgdG8gcHJldmVudCBpbmZpbml0ZSBsb29wc1xuICAgICAgICAgIGNvbnN0IGhhc1JlbGV2YW50Q2hhbmdlcyA9IEFycmF5LmZyb20obXV0YXRpb24uYWRkZWROb2Rlcykuc29tZShub2RlID0+IHtcbiAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gbm9kZSBhcyBFbGVtZW50O1xuICAgICAgICAgICAgICAvLyBTa2lwIGVycm9yIGhhbmRsZXIgZWxlbWVudHNcbiAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuaWQgPT09ICdqcy1lcnJvci1zdGF0dXMtYmFyJyB8fFxuICAgICAgICAgICAgICAgICAgZWxlbWVudC5jbG9zZXN0KCcjanMtZXJyb3Itc3RhdHVzLWJhcicpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8vIE9ubHkgY2FyZSBhYm91dCBlbGVtZW50cyB3aXRoIGRhdGEtY29udHJvbGxlciBhdHRyaWJ1dGVzXG4gICAgICAgICAgICAgIHJldHVybiBlbGVtZW50Lmhhc0F0dHJpYnV0ZSgnZGF0YS1jb250cm9sbGVyJykgfHxcbiAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtY29udHJvbGxlcl0nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChoYXNSZWxldmFudENoYW5nZXMpIHtcbiAgICAgICAgICAgIGhhc05ld0VsZW1lbnRzID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoaGFzTmV3RWxlbWVudHMpIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnZhbGlkYXRlQ29udHJvbGxlcnMoKSwgMTAwKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuYm9keSwge1xuICAgICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgICAgc3VidHJlZTogdHJ1ZVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZXBvcnRNaXNzaW5nQ29udHJvbGxlcnMoKTogdm9pZCB7XG4gICAgLy8gUHJldmVudCBkdXBsaWNhdGUgcmVwb3J0c1xuICAgIGlmICh0aGlzLmhhc1JlcG9ydGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbWlzc2luZ0xpc3QgPSBBcnJheS5mcm9tKHRoaXMubWlzc2luZ0NvbnRyb2xsZXJzKTtcbiAgICB0aGlzLmhhc1JlcG9ydGVkID0gdHJ1ZTtcblxuICAgIC8vIFJlcG9ydCB0byBlcnJvciBoYW5kbGVyIGlmIGF2YWlsYWJsZVxuICAgIGlmICh3aW5kb3cuZXJyb3JIYW5kbGVyKSB7XG4gICAgICB3aW5kb3cuZXJyb3JIYW5kbGVyLmhhbmRsZUVycm9yKHtcbiAgICAgICAgbWVzc2FnZTogYE1pc3NpbmcgU3RpbXVsdXMgY29udHJvbGxlcnM6ICR7bWlzc2luZ0xpc3Quam9pbignLCAnKX1gLFxuICAgICAgICB0eXBlOiAnc3RpbXVsdXMnLFxuICAgICAgICBzdWJUeXBlOiAnbWlzc2luZy1jb250cm9sbGVyJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIG1pc3NpbmdDb250cm9sbGVyczogbWlzc2luZ0xpc3QsXG4gICAgICAgIHN1Z2dlc3Rpb246IGBSdW46IHJhaWxzIGdlbmVyYXRlIHN0aW11bHVzX2NvbnRyb2xsZXIgJHttaXNzaW5nTGlzdFswXX1gLFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgY29udHJvbGxlcnM6IG1pc3NpbmdMaXN0LFxuICAgICAgICAgIGdlbmVyYXRvckNvbW1hbmRzOiBtaXNzaW5nTGlzdC5tYXAobmFtZSA9PiBgcmFpbHMgZ2VuZXJhdGUgc3RpbXVsdXNfY29udHJvbGxlciAke25hbWV9YClcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZhbGxiYWNrIHRvIGNvbnNvbGVcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1RDgzRFx1REQzNCBNaXNzaW5nIFN0aW11bHVzIENvbnRyb2xsZXJzOicsIG1pc3NpbmdMaXN0KTtcbiAgICAgIGNvbnNvbGUuaW5mbygnXHVEODNEXHVEQ0ExIEdlbmVyYXRlIG1pc3NpbmcgY29udHJvbGxlcnM6JywgbWlzc2luZ0xpc3QubWFwKG5hbWUgPT5cbiAgICAgICAgYHJhaWxzIGdlbmVyYXRlIHN0aW11bHVzX2NvbnRyb2xsZXIgJHtuYW1lfWBcbiAgICAgICkuam9pbignXFxuJykpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdmFsaWRhdGVSZXF1aXJlZFRhcmdldHMoY29udHJvbGxlckVsZW1lbnQ6IEVsZW1lbnQsIGNvbnRyb2xsZXJOYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3RpbXVsdXMgPSB3aW5kb3cuU3RpbXVsdXMgYXMgYW55O1xuICAgICAgaWYgKHN0aW11bHVzPy5yb3V0ZXI/Lm1vZHVsZXNCeUlkZW50aWZpZXIpIHtcbiAgICAgICAgY29uc3QgbW9kdWxlID0gc3RpbXVsdXMucm91dGVyLm1vZHVsZXNCeUlkZW50aWZpZXIuZ2V0KGNvbnRyb2xsZXJOYW1lKTtcbiAgICAgICAgaWYgKG1vZHVsZSkge1xuICAgICAgICAgIGNvbnN0IGNvbnRyb2xsZXJDbGFzcyA9IG1vZHVsZS5kZWZpbml0aW9uLmNvbnRyb2xsZXJDb25zdHJ1Y3RvcjtcblxuICAgICAgICAgIGNvbnN0IGRlZmluZWRUYXJnZXRzID0gY29udHJvbGxlckNsYXNzLnRhcmdldHMgfHwgW107XG4gICAgICAgICAgY29uc3QgbWlzc2luZ1RhcmdldHM6IHN0cmluZ1tdID0gW107XG4gICAgICAgICAgY29uc3Qgb3V0T2ZTY29wZVRhcmdldHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgICAgICAvLyBHZXQgb3B0aW9uYWwgdGFyZ2V0cyBieSBjaGVja2luZyBmb3IgaGFzWFhYVGFyZ2V0IHByb3BlcnRpZXNcbiAgICAgICAgICBjb25zdCBvcHRpb25hbFRhcmdldHMgPSB0aGlzLmdldE9wdGlvbmFsVGFyZ2V0cyhjb250cm9sbGVyQ2xhc3MpO1xuXG4gICAgICAgICAgZGVmaW5lZFRhcmdldHMuZm9yRWFjaCgodGFyZ2V0TmFtZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAvLyBTa2lwIHZhbGlkYXRpb24gZm9yIG9wdGlvbmFsIHRhcmdldHNcbiAgICAgICAgICAgIGlmIChvcHRpb25hbFRhcmdldHMuaGFzKHRhcmdldE5hbWUpKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0U2VsZWN0b3IgPSBgW2RhdGEtJHtjb250cm9sbGVyTmFtZX0tdGFyZ2V0PVwiJHt0YXJnZXROYW1lfVwiXWA7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXRFbGVtZW50ID0gY29udHJvbGxlckVsZW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXRTZWxlY3Rvcik7XG5cbiAgICAgICAgICAgIGlmICghdGFyZ2V0RWxlbWVudCkge1xuICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0YXJnZXQgZXhpc3RzIGdsb2JhbGx5IGJ1dCBvdXRzaWRlIGNvbnRyb2xsZXIgc2NvcGVcbiAgICAgICAgICAgICAgY29uc3QgZ2xvYmFsVGFyZ2V0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0U2VsZWN0b3IpO1xuICAgICAgICAgICAgICBpZiAoZ2xvYmFsVGFyZ2V0RWxlbWVudCkge1xuICAgICAgICAgICAgICAgIG91dE9mU2NvcGVUYXJnZXRzLnB1c2godGFyZ2V0TmFtZSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbWlzc2luZ1RhcmdldHMucHVzaCh0YXJnZXROYW1lKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKG1pc3NpbmdUYXJnZXRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMucmVwb3J0TWlzc2luZ1RhcmdldHMoY29udHJvbGxlck5hbWUsIG1pc3NpbmdUYXJnZXRzLCBjb250cm9sbGVyRWxlbWVudCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKG91dE9mU2NvcGVUYXJnZXRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMucmVwb3J0T3V0T2ZTY29wZVRhcmdldHMoY29udHJvbGxlck5hbWUsIG91dE9mU2NvcGVUYXJnZXRzLCBjb250cm9sbGVyRWxlbWVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihgQ291bGQgbm90IHZhbGlkYXRlIHRhcmdldHMgZm9yIGNvbnRyb2xsZXIgJHtjb250cm9sbGVyTmFtZX06YCwgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0T3B0aW9uYWxUYXJnZXRzKGNvbnRyb2xsZXJDbGFzczogYW55KTogU2V0PHN0cmluZz4ge1xuICAgIGNvbnN0IG9wdGlvbmFsVGFyZ2V0cyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCBkZWZpbmVkIHRhcmdldHNcbiAgICAgIGNvbnN0IGRlZmluZWRUYXJnZXRzID0gY29udHJvbGxlckNsYXNzLnRhcmdldHMgfHwgW107XG5cbiAgICAgIGRlZmluZWRUYXJnZXRzLmZvckVhY2goKHRhcmdldE5hbWU6IHN0cmluZykgPT4ge1xuICAgICAgICAvLyBDb252ZXJ0IHRhcmdldCBuYW1lIHRvIGhhc1hYWFRhcmdldCBwcm9wZXJ0eSBuYW1lXG4gICAgICAgIGNvbnN0IGNhcGl0YWxpemVkVGFyZ2V0ID0gdGFyZ2V0TmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHRhcmdldE5hbWUuc2xpY2UoMSk7XG4gICAgICAgIGNvbnN0IGhhc1RhcmdldFByb3BlcnR5ID0gYGhhcyR7Y2FwaXRhbGl6ZWRUYXJnZXR9VGFyZ2V0YDtcblxuICAgICAgICAvLyBDaGVjayBpZiBoYXNYWFhUYXJnZXQgaXMgZGVjbGFyZWQgYXMgYSBwcm9wZXJ0eSBvbiB0aGUgY2xhc3NcbiAgICAgICAgLy8gVGhpcyBpbmRpY2F0ZXMgdGhlIHRhcmdldCBpcyBvcHRpb25hbFxuICAgICAgICBpZiAoaGFzVGFyZ2V0UHJvcGVydHkgaW4gY29udHJvbGxlckNsYXNzLnByb3RvdHlwZSB8fFxuICAgICAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihjb250cm9sbGVyQ2xhc3MucHJvdG90eXBlLCBoYXNUYXJnZXRQcm9wZXJ0eSkgfHxcbiAgICAgICAgICAgIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbnRyb2xsZXJDbGFzcy5wcm90b3R5cGUsIGhhc1RhcmdldFByb3BlcnR5KSkge1xuICAgICAgICAgIG9wdGlvbmFsVGFyZ2V0cy5hZGQodGFyZ2V0TmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0NvdWxkIG5vdCBhbmFseXplIGNvbnRyb2xsZXIgZm9yIG9wdGlvbmFsIHRhcmdldHM6JywgZXJyb3IpO1xuICAgIH1cblxuICAgIHJldHVybiBvcHRpb25hbFRhcmdldHM7XG4gIH1cblxuICBwcml2YXRlIHZhbGlkYXRlRWxlbWVudFBvc2l0aW9uaW5nKGNvbnRyb2xsZXJFbGVtZW50OiBFbGVtZW50KTogdm9pZCB7XG4gICAgY29uc3QgY29udHJvbGxlck5hbWUgPSBjb250cm9sbGVyRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29udHJvbGxlcicpPy5zcGxpdCgnICcpWzBdO1xuICAgIGlmICghY29udHJvbGxlck5hbWUpIHJldHVybjtcblxuICAgIGNvbnN0IGlzc3Vlczogc3RyaW5nW10gPSBbXTtcblxuICAgIHRoaXMuY2hlY2tDb21tb25TZWxlY3RvcnMoY29udHJvbGxlckVsZW1lbnQsIGNvbnRyb2xsZXJOYW1lLCBpc3N1ZXMpO1xuXG4gICAgaWYgKGlzc3Vlcy5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLmVsZW1lbnRJc3N1ZXMuc2V0KGNvbnRyb2xsZXJOYW1lLCBpc3N1ZXMpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY2hlY2tDb21tb25TZWxlY3RvcnMoZWxlbWVudDogRWxlbWVudCwgY29udHJvbGxlck5hbWU6IHN0cmluZywgaXNzdWVzOiBzdHJpbmdbXSk6IHZvaWQge1xuICAgIGNvbnN0IHJlbGV2YW50SWRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgcmVsZXZhbnRJZHMucHVzaChgJHtjb250cm9sbGVyTmFtZX0taW5wdXRgLCBgJHtjb250cm9sbGVyTmFtZX0tYnV0dG9uYCwgYCR7Y29udHJvbGxlck5hbWV9LWZvcm1gKTtcblxuICAgIHJlbGV2YW50SWRzLmZvckVhY2goaWQgPT4ge1xuICAgICAgY29uc3QgZ2xvYmFsRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICAgIGlmIChnbG9iYWxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGlzSW5TY29wZSA9IGdsb2JhbEVsZW1lbnQgPT09IGVsZW1lbnQgfHwgZWxlbWVudC5jb250YWlucyhnbG9iYWxFbGVtZW50KTtcblxuICAgICAgICBpZiAoIWlzSW5TY29wZSkge1xuICAgICAgICAgIGlzc3Vlcy5wdXNoKGBFbGVtZW50ICMke2lkfSBleGlzdHMgYnV0IG91dHNpZGUgY29udHJvbGxlciBzY29wZWApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGludGVyY2VwdEFjdGlvbkNsaWNrcygpOiB2b2lkIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEVsZW1lbnQ7XG4gICAgICBpZiAoIXRhcmdldCkgcmV0dXJuO1xuXG4gICAgICBjb25zdCBhY3Rpb25FbGVtZW50ID0gdGFyZ2V0LmNsb3Nlc3QoJ1tkYXRhLWFjdGlvbl0nKTtcbiAgICAgIGlmICghYWN0aW9uRWxlbWVudCkgcmV0dXJuO1xuXG4gICAgICBjb25zdCBhY3Rpb25zID0gYWN0aW9uRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYWN0aW9uJyk/LnNwbGl0KCcgJykgfHwgW107XG5cbiAgICAgIGFjdGlvbnMuZm9yRWFjaChhY3Rpb24gPT4ge1xuICAgICAgICBjb25zdCBjb250cm9sbGVyTWF0Y2ggPSBhY3Rpb24ubWF0Y2goLyhbXFx3LV0rKSMoW1xcdy1dKykvKTtcbiAgICAgICAgaWYgKGNvbnRyb2xsZXJNYXRjaCkge1xuICAgICAgICAgIGNvbnN0IGNvbnRyb2xsZXJOYW1lID0gY29udHJvbGxlck1hdGNoWzFdO1xuICAgICAgICAgIGNvbnN0IG1ldGhvZE5hbWUgPSBjb250cm9sbGVyTWF0Y2hbMl07XG5cbiAgICAgICAgICBpZiAoIXRoaXMucmVnaXN0ZXJlZENvbnRyb2xsZXJzLmhhcyhjb250cm9sbGVyTmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXMucmVwb3J0TWlzc2luZ0FjdGlvbkNvbnRyb2xsZXIoY29udHJvbGxlck5hbWUsIGFjdGlvbiwgYWN0aW9uRWxlbWVudCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgY29udHJvbGxlckVsZW1lbnQgPSBhY3Rpb25FbGVtZW50LmNsb3Nlc3QoYFtkYXRhLWNvbnRyb2xsZXIqPVwiJHtjb250cm9sbGVyTmFtZX1cIl1gKTtcbiAgICAgICAgICBpZiAoIWNvbnRyb2xsZXJFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnJlcG9ydE1pc3NpbmdDb250cm9sbGVyU2NvcGUoY29udHJvbGxlck5hbWUsIGFjdGlvbiwgYWN0aW9uRWxlbWVudCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5jaGVja01ldGhvZEV4aXN0cyhjb250cm9sbGVyTmFtZSwgbWV0aG9kTmFtZSwgYWN0aW9uLCBhY3Rpb25FbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSwgdHJ1ZSk7XG4gIH1cblxuICBwcml2YXRlIHJlcG9ydE1pc3NpbmdUYXJnZXRzKGNvbnRyb2xsZXJOYW1lOiBzdHJpbmcsIG1pc3NpbmdUYXJnZXRzOiBzdHJpbmdbXSwgY29udHJvbGxlckVsZW1lbnQ6IEVsZW1lbnQpOiB2b2lkIHtcbiAgICBpZiAod2luZG93LmVycm9ySGFuZGxlcikge1xuICAgICAgY29uc3QgdGFyZ2V0TGlzdCA9IG1pc3NpbmdUYXJnZXRzLmpvaW4oJywgJyk7XG4gICAgICBjb25zdCB0YXJnZXRFeGFtcGxlcyA9IG1pc3NpbmdUYXJnZXRzLm1hcCh0YXJnZXQgPT5cbiAgICAgICAgYDxkaXYgZGF0YS0ke2NvbnRyb2xsZXJOYW1lfS10YXJnZXQ9XCIke3RhcmdldH1cIj4uLi48L2Rpdj5gXG4gICAgICApLmpvaW4oJ1xcbicpO1xuXG4gICAgICB3aW5kb3cuZXJyb3JIYW5kbGVyLmhhbmRsZUVycm9yKHtcbiAgICAgICAgbWVzc2FnZTogYFN0aW11bHVzIGNvbnRyb2xsZXIgXCIke2NvbnRyb2xsZXJOYW1lfVwiIHJlcXVpcmVzIG1pc3NpbmcgdGFyZ2V0IGVsZW1lbnRzOiAke3RhcmdldExpc3R9YCxcbiAgICAgICAgdHlwZTogJ3N0aW11bHVzJyxcbiAgICAgICAgc3ViVHlwZTogJ21pc3NpbmctdGFyZ2V0JyxcbiAgICAgICAgY29udHJvbGxlck5hbWUsXG4gICAgICAgIG1pc3NpbmdUYXJnZXRzLFxuICAgICAgICBlbGVtZW50SW5mbzogdGhpcy5nZXRFbGVtZW50SW5mbyhjb250cm9sbGVyRWxlbWVudCksXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBzdWdnZXN0aW9uOiBgQWRkIHRoZSByZXF1aXJlZCB0YXJnZXQgZWxlbWVudHMgdG8gdGhlIERPTSB3aXRoaW4gdGhlIGNvbnRyb2xsZXIgc2NvcGUsIG9yIG1ha2UgdGhlbSBvcHRpb25hbCBieSBhZGRpbmcgYCArXG4gICAgICAgICAgYCdkZWNsYXJlIHJlYWRvbmx5IGhhcyR7bWlzc2luZ1RhcmdldHMubWFwKHQgPT4gdC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHQuc2xpY2UoMSkpLmpvaW4oJ1RhcmdldDogYm9vbGVhbiwgZGVjbGFyZSByZWFkb25seSBoYXMnKX1UYXJnZXQ6IGJvb2xlYW4nIHRvIHRoZSBjb250cm9sbGVyYCxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIGVycm9yVHlwZTogJ01pc3NpbmcgUmVxdWlyZWQgVGFyZ2V0cycsXG4gICAgICAgICAgY29udHJvbGxlck5hbWUsXG4gICAgICAgICAgbWlzc2luZ1RhcmdldHMsXG4gICAgICAgICAgcmVxdWlyZWRFbGVtZW50czogdGFyZ2V0RXhhbXBsZXMsXG4gICAgICAgICAgZWxlbWVudEluZm86IHRoaXMuZ2V0RWxlbWVudEluZm8oY29udHJvbGxlckVsZW1lbnQpLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBgVGhlIGNvbnRyb2xsZXIgXCIke2NvbnRyb2xsZXJOYW1lfVwiIGRlZmluZXMgdGFyZ2V0cyBbJHt0YXJnZXRMaXN0fV0gYnV0IHRoZXNlIGVsZW1lbnRzIGFyZSBub3QgZm91bmQgaW4gdGhlIERPTSB3aXRoaW4gdGhlIGNvbnRyb2xsZXIgc2NvcGVgXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVwb3J0T3V0T2ZTY29wZVRhcmdldHMoY29udHJvbGxlck5hbWU6IHN0cmluZywgb3V0T2ZTY29wZVRhcmdldHM6IHN0cmluZ1tdLCBjb250cm9sbGVyRWxlbWVudDogRWxlbWVudCk6IHZvaWQge1xuICAgIGlmICh3aW5kb3cuZXJyb3JIYW5kbGVyKSB7XG4gICAgICBjb25zdCB0YXJnZXRMaXN0ID0gb3V0T2ZTY29wZVRhcmdldHMuam9pbignLCAnKTtcblxuICAgICAgd2luZG93LmVycm9ySGFuZGxlci5oYW5kbGVFcnJvcih7XG4gICAgICAgIG1lc3NhZ2U6IGBTdGltdWx1cyBjb250cm9sbGVyIFwiJHtjb250cm9sbGVyTmFtZX1cIiB0YXJnZXRzIGV4aXN0IGJ1dCBhcmUgb3V0c2lkZSBjb250cm9sbGVyIHNjb3BlOiAke3RhcmdldExpc3R9YCxcbiAgICAgICAgdHlwZTogJ3N0aW11bHVzJyxcbiAgICAgICAgc3ViVHlwZTogJ3RhcmdldC1zY29wZS1lcnJvcicsXG4gICAgICAgIGNvbnRyb2xsZXJOYW1lLFxuICAgICAgICBvdXRPZlNjb3BlVGFyZ2V0cyxcbiAgICAgICAgZWxlbWVudEluZm86IHRoaXMuZ2V0RWxlbWVudEluZm8oY29udHJvbGxlckVsZW1lbnQpLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgc3VnZ2VzdGlvbjogYE1vdmUgdGFyZ2V0IGVsZW1lbnRzIGluc2lkZSBjb250cm9sbGVyIHNjb3BlIG9yIGV4cGFuZCBjb250cm9sbGVyIHNjb3BlIHRvIGluY2x1ZGUgdGFyZ2V0c2AsXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICBlcnJvclR5cGU6ICdUYXJnZXRzIE91dHNpZGUgQ29udHJvbGxlciBTY29wZScsXG4gICAgICAgICAgY29udHJvbGxlck5hbWUsXG4gICAgICAgICAgb3V0T2ZTY29wZVRhcmdldHMsXG4gICAgICAgICAgZWxlbWVudEluZm86IHRoaXMuZ2V0RWxlbWVudEluZm8oY29udHJvbGxlckVsZW1lbnQpLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBgVGhlIGNvbnRyb2xsZXIgXCIke2NvbnRyb2xsZXJOYW1lfVwiIGRlZmluZXMgdGFyZ2V0cyBbJHt0YXJnZXRMaXN0fV0gYW5kIHRoZXNlIGVsZW1lbnRzIGV4aXN0IGluIHRoZSBET00gYnV0IGFyZSBvdXRzaWRlIHRoZSBjb250cm9sbGVyIHNjb3BlYCxcbiAgICAgICAgICBzb2x1dGlvbjogYEVpdGhlciBtb3ZlIHRoZSB0YXJnZXQgZWxlbWVudHMgaW5zaWRlIHRoZSBjb250cm9sbGVyIHNjb3BlLCBvciBleHBhbmQgdGhlIGNvbnRyb2xsZXIgc2NvcGUgdG8gaW5jbHVkZSBgICtcbiAgICAgICAgICAgIGB0aGUgdGFyZ2V0cyBieSBtb3ZpbmcgdGhlIGRhdGEtY29udHJvbGxlciBhdHRyaWJ1dGUgdG8gYSBwYXJlbnQgZWxlbWVudCB0aGF0IGNvbnRhaW5zIGJvdGggdGhlIGNvbnRyb2xsZXIgbG9naWMgYW5kIHRoZSB0YXJnZXQgZWxlbWVudHMuYFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlcG9ydE1pc3NpbmdBY3Rpb25Db250cm9sbGVyKGNvbnRyb2xsZXJOYW1lOiBzdHJpbmcsIGFjdGlvbjogc3RyaW5nLCBlbGVtZW50OiBFbGVtZW50KTogdm9pZCB7XG4gICAgaWYgKHdpbmRvdy5lcnJvckhhbmRsZXIpIHtcbiAgICAgIHdpbmRvdy5lcnJvckhhbmRsZXIuaGFuZGxlRXJyb3Ioe1xuICAgICAgICBtZXNzYWdlOiBgVXNlciBjbGlja2VkIGFjdGlvbiBcIiR7YWN0aW9ufVwiIGJ1dCBjb250cm9sbGVyIFwiJHtjb250cm9sbGVyTmFtZX1cIiBpcyBub3QgcmVnaXN0ZXJlZGAsXG4gICAgICAgIHR5cGU6ICdzdGltdWx1cycsXG4gICAgICAgIHN1YlR5cGU6ICdhY3Rpb24tY2xpY2snLFxuICAgICAgICBjb250cm9sbGVyTmFtZSxcbiAgICAgICAgYWN0aW9uLFxuICAgICAgICBlbGVtZW50SW5mbzogdGhpcy5nZXRFbGVtZW50SW5mbyhlbGVtZW50KSxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHN1Z2dlc3Rpb246IGBSdW46IHJhaWxzIGdlbmVyYXRlIHN0aW11bHVzX2NvbnRyb2xsZXIgJHtjb250cm9sbGVyTmFtZX1gLFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgZXJyb3JUeXBlOiAnTWlzc2luZyBDb250cm9sbGVyIG9uIEFjdGlvbiBDbGljaycsXG4gICAgICAgICAgY29udHJvbGxlck5hbWUsXG4gICAgICAgICAgYWN0aW9uLFxuICAgICAgICAgIGVsZW1lbnRJbmZvOiB0aGlzLmdldEVsZW1lbnRJbmZvKGVsZW1lbnQpLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVXNlciBhdHRlbXB0ZWQgdG8gdHJpZ2dlciBhbiBhY3Rpb24gYnV0IHRoZSByZXF1aXJlZCBjb250cm9sbGVyIGlzIG5vdCByZWdpc3RlcmVkJ1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlcG9ydE1pc3NpbmdDb250cm9sbGVyU2NvcGUoY29udHJvbGxlck5hbWU6IHN0cmluZywgYWN0aW9uOiBzdHJpbmcsIGVsZW1lbnQ6IEVsZW1lbnQpOiB2b2lkIHtcbiAgICBpZiAod2luZG93LmVycm9ySGFuZGxlcikge1xuICAgICAgd2luZG93LmVycm9ySGFuZGxlci5oYW5kbGVFcnJvcih7XG4gICAgICAgIG1lc3NhZ2U6IGBVc2VyIGNsaWNrZWQgYWN0aW9uIFwiJHthY3Rpb259XCIgYnV0IG5vIFwiJHtjb250cm9sbGVyTmFtZX1cIiBjb250cm9sbGVyIGZvdW5kIGluIHBhcmVudCBzY29wZWAsXG4gICAgICAgIHR5cGU6ICdzdGltdWx1cycsXG4gICAgICAgIHN1YlR5cGU6ICdzY29wZS1lcnJvcicsXG4gICAgICAgIGNvbnRyb2xsZXJOYW1lLFxuICAgICAgICBhY3Rpb24sXG4gICAgICAgIGVsZW1lbnRJbmZvOiB0aGlzLmdldEVsZW1lbnRJbmZvKGVsZW1lbnQpLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgc3VnZ2VzdGlvbjogYEFkZCBkYXRhLWNvbnRyb2xsZXI9XCIke2NvbnRyb2xsZXJOYW1lfVwiIHRvIGEgcGFyZW50IGVsZW1lbnQgb3IgbW92ZSB0aGlzIGVsZW1lbnQgaW5zaWRlIHRoZSBjb250cm9sbGVyIHNjb3BlYCxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIGVycm9yVHlwZTogJ0NvbnRyb2xsZXIgU2NvcGUgTWlzc2luZycsXG4gICAgICAgICAgY29udHJvbGxlck5hbWUsXG4gICAgICAgICAgYWN0aW9uLFxuICAgICAgICAgIGVsZW1lbnRJbmZvOiB0aGlzLmdldEVsZW1lbnRJbmZvKGVsZW1lbnQpLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQWN0aW9uIGVsZW1lbnQgaXMgbm90IHdpdGhpbiB0aGUgc2NvcGUgb2YgaXRzIHRhcmdldCBjb250cm9sbGVyJyxcbiAgICAgICAgICBzb2x1dGlvbjogYFdyYXAgdGhlIGVsZW1lbnQgd2l0aCA8ZGl2IGRhdGEtY29udHJvbGxlcj1cIiR7Y29udHJvbGxlck5hbWV9XCI+Li4uPC9kaXY+YFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNoZWNrTWV0aG9kRXhpc3RzKGNvbnRyb2xsZXJOYW1lOiBzdHJpbmcsIG1ldGhvZE5hbWU6IHN0cmluZywgYWN0aW9uOiBzdHJpbmcsIGVsZW1lbnQ6IEVsZW1lbnQpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgLy8gR2V0IHRoZSBhY3R1YWwgY29udHJvbGxlciBpbnN0YW5jZSBmcm9tIFN0aW11bHVzXG4gICAgICBjb25zdCBzdGltdWx1cyA9IHdpbmRvdy5TdGltdWx1cyBhcyBhbnk7XG4gICAgICBpZiAoc3RpbXVsdXM/LnJvdXRlcj8ubW9kdWxlc0J5SWRlbnRpZmllcikge1xuICAgICAgICBjb25zdCBtb2R1bGUgPSBzdGltdWx1cy5yb3V0ZXIubW9kdWxlc0J5SWRlbnRpZmllci5nZXQoY29udHJvbGxlck5hbWUpO1xuICAgICAgICBpZiAobW9kdWxlKSB7XG4gICAgICAgICAgY29uc3QgY29udHJvbGxlckNsYXNzID0gbW9kdWxlLmRlZmluaXRpb24uY29udHJvbGxlckNvbnN0cnVjdG9yO1xuICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gbmV3IGNvbnRyb2xsZXJDbGFzcygpO1xuXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgbWV0aG9kIGV4aXN0cyBhbmQgaXMgY2FsbGFibGVcbiAgICAgICAgICBpZiAodHlwZW9mIGluc3RhbmNlW21ldGhvZE5hbWVdICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLnJlcG9ydE1pc3NpbmdNZXRob2QoY29udHJvbGxlck5hbWUsIG1ldGhvZE5hbWUsIGFjdGlvbiwgZWxlbWVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICAvLyBJZiB3ZSBjYW4ndCBpbnN0YW50aWF0ZSB0aGUgY29udHJvbGxlciwgdHJ5IGFsdGVybmF0aXZlIGFwcHJvYWNoXG4gICAgICB0aGlzLmNoZWNrTWV0aG9kRXhpc3RzQWx0ZXJuYXRpdmUoY29udHJvbGxlck5hbWUsIG1ldGhvZE5hbWUsIGFjdGlvbiwgZWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjaGVja01ldGhvZEV4aXN0c0FsdGVybmF0aXZlKGNvbnRyb2xsZXJOYW1lOiBzdHJpbmcsIG1ldGhvZE5hbWU6IHN0cmluZywgYWN0aW9uOiBzdHJpbmcsIGVsZW1lbnQ6IEVsZW1lbnQpOiB2b2lkIHtcbiAgICAvLyBUcnkgdG8gZ2V0IGNvbnRyb2xsZXIgY29uc3RydWN0b3IgZGlyZWN0bHlcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3RpbXVsdXMgPSB3aW5kb3cuU3RpbXVsdXMgYXMgYW55O1xuICAgICAgaWYgKHN0aW11bHVzPy5yb3V0ZXI/Lm1vZHVsZXNCeUlkZW50aWZpZXIpIHtcbiAgICAgICAgY29uc3QgbW9kdWxlID0gc3RpbXVsdXMucm91dGVyLm1vZHVsZXNCeUlkZW50aWZpZXIuZ2V0KGNvbnRyb2xsZXJOYW1lKTtcbiAgICAgICAgaWYgKG1vZHVsZSkge1xuICAgICAgICAgIGNvbnN0IGNvbnRyb2xsZXJDbGFzcyA9IG1vZHVsZS5kZWZpbml0aW9uLmNvbnRyb2xsZXJDb25zdHJ1Y3RvcjtcblxuICAgICAgICAgIC8vIENoZWNrIHByb3RvdHlwZSBmb3IgbWV0aG9kXG4gICAgICAgICAgaWYgKCFjb250cm9sbGVyQ2xhc3MucHJvdG90eXBlW21ldGhvZE5hbWVdIHx8IHR5cGVvZiBjb250cm9sbGVyQ2xhc3MucHJvdG90eXBlW21ldGhvZE5hbWVdICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLnJlcG9ydE1pc3NpbmdNZXRob2QoY29udHJvbGxlck5hbWUsIG1ldGhvZE5hbWUsIGFjdGlvbiwgZWxlbWVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihgQ291bGQgbm90IHZhbGlkYXRlIG1ldGhvZCBleGlzdGVuY2UgZm9yICR7Y29udHJvbGxlck5hbWV9IyR7bWV0aG9kTmFtZX06YCwgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVwb3J0TWlzc2luZ01ldGhvZChjb250cm9sbGVyTmFtZTogc3RyaW5nLCBtZXRob2ROYW1lOiBzdHJpbmcsIGFjdGlvbjogc3RyaW5nLCBlbGVtZW50OiBFbGVtZW50KTogdm9pZCB7XG4gICAgaWYgKHdpbmRvdy5lcnJvckhhbmRsZXIpIHtcbiAgICAgIHdpbmRvdy5lcnJvckhhbmRsZXIuaGFuZGxlRXJyb3Ioe1xuICAgICAgICBtZXNzYWdlOiBgVXNlciBjbGlja2VkIGFjdGlvbiBcIiR7YWN0aW9ufVwiIGJ1dCBtZXRob2QgXCIke21ldGhvZE5hbWV9XCIgZG9lcyBub3QgZXhpc3QgaW4gY29udHJvbGxlciBcIiR7Y29udHJvbGxlck5hbWV9XCJgLFxuICAgICAgICB0eXBlOiAnc3RpbXVsdXMnLFxuICAgICAgICBzdWJUeXBlOiAnbWV0aG9kLW5vdC1mb3VuZCcsXG4gICAgICAgIGNvbnRyb2xsZXJOYW1lLFxuICAgICAgICBtZXRob2ROYW1lLFxuICAgICAgICBhY3Rpb24sXG4gICAgICAgIGVsZW1lbnRJbmZvOiB0aGlzLmdldEVsZW1lbnRJbmZvKGVsZW1lbnQpLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgc3VnZ2VzdGlvbjogYEFkZCBtZXRob2QgXCIke21ldGhvZE5hbWV9XCIgdG8gdGhlICR7Y29udHJvbGxlck5hbWV9IGNvbnRyb2xsZXIgb3IgZml4IHRoZSBhY3Rpb24gbmFtZWAsXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICBlcnJvclR5cGU6ICdNZXRob2QgTm90IEZvdW5kJyxcbiAgICAgICAgICBjb250cm9sbGVyTmFtZSxcbiAgICAgICAgICBtZXRob2ROYW1lLFxuICAgICAgICAgIGFjdGlvbixcbiAgICAgICAgICBlbGVtZW50SW5mbzogdGhpcy5nZXRFbGVtZW50SW5mbyhlbGVtZW50KSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogYFRoZSBtZXRob2QgXCIke21ldGhvZE5hbWV9XCIgd2FzIGNhbGxlZCBidXQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIGNvbnRyb2xsZXJgLFxuICAgICAgICAgIHNvbHV0aW9uOiBgQWRkIHRoZSBtZXRob2QgdG8geW91ciBjb250cm9sbGVyOlxcblxcbiR7bWV0aG9kTmFtZX0oKTogdm9pZCB7XFxuICAvLyBZb3VyIGltcGxlbWVudGF0aW9uIGhlcmVcXG59YFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlcG9ydEVsZW1lbnRJc3N1ZXMoKTogdm9pZCB7XG4gICAgY29uc3QgYWxsSXNzdWVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IGRldGFpbGVkSXNzdWVzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZ1tdIH0gPSB7fTtcblxuICAgIHRoaXMuZWxlbWVudElzc3Vlcy5mb3JFYWNoKChpc3N1ZXMsIGNvbnRyb2xsZXJOYW1lKSA9PiB7XG4gICAgICBhbGxJc3N1ZXMucHVzaChgJHtjb250cm9sbGVyTmFtZX06ICR7aXNzdWVzLmpvaW4oJywgJyl9YCk7XG4gICAgICBkZXRhaWxlZElzc3Vlc1tjb250cm9sbGVyTmFtZV0gPSBpc3N1ZXM7XG4gICAgfSk7XG5cbiAgICBpZiAod2luZG93LmVycm9ySGFuZGxlcikge1xuICAgICAgd2luZG93LmVycm9ySGFuZGxlci5oYW5kbGVFcnJvcih7XG4gICAgICAgIG1lc3NhZ2U6IGBTdGltdWx1cyBlbGVtZW50IHBvc2l0aW9uaW5nIGlzc3VlcyBkZXRlY3RlZGAsXG4gICAgICAgIHR5cGU6ICdzdGltdWx1cycsXG4gICAgICAgIHN1YlR5cGU6ICdwb3NpdGlvbmluZy1pc3N1ZXMnLFxuICAgICAgICBwb3NpdGlvbmluZ0lzc3VlczogYWxsSXNzdWVzLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgc3VnZ2VzdGlvbjogJ0NvbnNpZGVyIHVzaW5nIGRhdGEtdGFyZ2V0cyBvciBtb3ZpbmcgZWxlbWVudHMgaW5zaWRlIGNvbnRyb2xsZXIgc2NvcGUnLFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgZXJyb3JUeXBlOiAnRWxlbWVudCBQb3NpdGlvbmluZyBJc3N1ZXMnLFxuICAgICAgICAgIGNvbnRyb2xsZXJzOiBPYmplY3Qua2V5cyhkZXRhaWxlZElzc3VlcyksXG4gICAgICAgICAgaXNzdWVzQnlDb250cm9sbGVyOiBkZXRhaWxlZElzc3VlcyxcbiAgICAgICAgICB0b3RhbElzc3VlczogYWxsSXNzdWVzLmxlbmd0aCxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1NvbWUgZWxlbWVudHMgYXJlIHJlZmVyZW5jZWQgYnkgY29udHJvbGxlcnMgYnV0IGV4aXN0IG91dHNpZGUgdGhlaXIgc2NvcGUnLFxuICAgICAgICAgIHBvc3NpYmxlU29sdXRpb25zOiBbXG4gICAgICAgICAgICAnTW92ZSBlbGVtZW50cyBpbnNpZGUgY29udHJvbGxlciBzY29wZScsXG4gICAgICAgICAgICAnVXNlIGRhdGEtdGFyZ2V0cyBmb3IgZXh0ZXJuYWwgZWxlbWVudHMnLFxuICAgICAgICAgICAgJ0NoZWNrIGNvbnRyb2xsZXIgZGF0YS1jb250cm9sbGVyIGF0dHJpYnV0ZSBwbGFjZW1lbnQnXG4gICAgICAgICAgXVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmVsZW1lbnRJc3N1ZXMuY2xlYXIoKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0RWxlbWVudEluZm8oZWxlbWVudDogRWxlbWVudCk6IG9iamVjdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRhZ05hbWU6IGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpLFxuICAgICAgaWQ6IGVsZW1lbnQuaWQgfHwgJ25vLWlkJyxcbiAgICAgIGNsYXNzTmFtZTogZWxlbWVudC5jbGFzc05hbWUgfHwgJ25vLWNsYXNzJyxcbiAgICAgIHRleHRDb250ZW50OiAoZWxlbWVudC50ZXh0Q29udGVudCB8fCAnJykuc3Vic3RyaW5nKDAsIDUwKVxuICAgIH07XG4gIH1cblxuICAvLyBQdWJsaWMgQVBJXG4gIHB1YmxpYyBnZXRSZWdpc3RlcmVkQ29udHJvbGxlcnMoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucmVnaXN0ZXJlZENvbnRyb2xsZXJzKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRNaXNzaW5nQ29udHJvbGxlcnMoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMubWlzc2luZ0NvbnRyb2xsZXJzKTtcbiAgfVxuXG4gIHB1YmxpYyBmb3JjZVZhbGlkYXRpb24oKTogdm9pZCB7XG4gICAgdGhpcy5taXNzaW5nQ29udHJvbGxlcnMuY2xlYXIoKTtcbiAgICB0aGlzLmVsZW1lbnRJc3N1ZXMuY2xlYXIoKTtcbiAgICB0aGlzLmhhc1JlcG9ydGVkID0gZmFsc2U7XG4gICAgdGhpcy52YWxpZGF0ZUNvbnRyb2xsZXJzKCk7XG4gIH1cbn1cblxuLy8gTm90ZTogR2xvYmFsIHR5cGVzIGFyZSBkZWNsYXJlZCBpbiB0eXBlcy9nbG9iYWwuZC50c1xuXG4vLyBJbml0aWFsaXplIHZhbGlkYXRvclxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gIHdpbmRvdy5zdGltdWx1c1ZhbGlkYXRvciA9IG5ldyBTdGltdWx1c1ZhbGlkYXRvcigpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBTdGltdWx1c1ZhbGlkYXRvcjtcbiIsICIvLyBBY3Rpb24gQ2FibGUgcHJvdmlkZXMgdGhlIGZyYW1ld29yayB0byBkZWFsIHdpdGggV2ViU29ja2V0cyBpbiBSYWlscy5cbi8vIFlvdSBjYW4gZ2VuZXJhdGUgbmV3IGNoYW5uZWxzIHdoZXJlIFdlYlNvY2tldCBmZWF0dXJlcyBsaXZlIHVzaW5nIHRoZSBgYmluL3JhaWxzIGdlbmVyYXRlIGNoYW5uZWxgIGNvbW1hbmQuXG5cbmltcG9ydCB7IGNyZWF0ZUNvbnN1bWVyIH0gZnJvbSAnQHJhaWxzL2FjdGlvbmNhYmxlJ1xuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVDb25zdW1lcigpXG4iLCAiLy8gYmFzZSBkZXBlbmRlbmN5IGxpYnJhcnksIGl0IHNob3VsZCBiZSBvbmx5IGltcG9ydGVkIGJ5IGBhZG1pbi50c2AgYW5kIGBhcHBsaWNhdGlvbi50c2AuXG4vL1xuLy8gR2xvYmFsIHBhdGNoZXMgKG11c3QgYmUgZmlyc3QpXG5pbXBvcnQgJy4vZm9ybV9kYXRhX3BhdGNoJ1xuXG5pbXBvcnQgKiBhcyBBY3RpdmVTdG9yYWdlIGZyb20gJ0ByYWlscy9hY3RpdmVzdG9yYWdlJ1xuaW1wb3J0IEFscGluZSBmcm9tICdhbHBpbmVqcydcbmltcG9ydCAqIGFzIEFjdGlvbkNhYmxlIGZyb20gXCJAcmFpbHMvYWN0aW9uY2FibGVcIlxuLy8gQHRzLWlnbm9yZSAtIEBob3R3aXJlZC90dXJiby1yYWlscyBoYXMgbm8gdHlwZSBkZWZpbml0aW9ucywgdXNlcyBAaG90d2lyZWQvdHVyYm8gdHlwZXNcbmltcG9ydCB7IFR1cmJvIH0gZnJvbSBcIkBob3R3aXJlZC90dXJiby1yYWlsc1wiXG5pbXBvcnQgeyBTdHJlYW1BY3Rpb25zIH0gZnJvbSBcIkBob3R3aXJlZC90dXJib1wiXG5pbXBvcnQgJy4vY29udHJvbGxlcnMnXG5pbXBvcnQgJy4vY2xpcGJvYXJkX3V0aWxzJ1xuaW1wb3J0ICcuL3Nka191dGlscydcbmltcG9ydCAnLi9zdGltdWx1c192YWxpZGF0b3InXG5pbXBvcnQgJy4vY2hhbm5lbHMnXG5cbkFjdGl2ZVN0b3JhZ2Uuc3RhcnQoKVxud2luZG93LkFjdGlvbkNhYmxlID0gQWN0aW9uQ2FibGVcblxuQWxwaW5lLnN0YXJ0KClcbndpbmRvdy5BbHBpbmUgPSBBbHBpbmVcblxuLy8gVHVyYm8gY29uZmlndXJhdGlvbjogRW5hYmxlIERyaXZlIGZvciBmdWxsIFNQQSBleHBlcmllbmNlXG4vLyBUdXJibyBEcml2ZSBpcyBub3cgZW5hYmxlZCBieSBkZWZhdWx0IChyZXBsYWNlZCBSYWlscy1VSlMpXG53aW5kb3cuVHVyYm8gPSBUdXJib1xuXG4vLyBHbG9iYWwgZnVuY3Rpb24gdG8gcmVzdG9yZSBkaXNhYmxlZCBidXR0b25zIChmb3IgQWN0aW9uQ2FibGUgY2FsbGJhY2tzKVxud2luZG93LnJlc3RvcmVCdXR0b25TdGF0ZXMgPSBmdW5jdGlvbigpOiB2b2lkIHtcbiAgY29uc3QgZGlzYWJsZWRCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbDxIVE1MSW5wdXRFbGVtZW50IHwgSFRNTEJ1dHRvbkVsZW1lbnQ+KFxuICAgICdpbnB1dFt0eXBlPVwic3VibWl0XCJdW2Rpc2FibGVkXSwgYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl1bZGlzYWJsZWRdLCBidXR0b246bm90KFt0eXBlXSlbZGlzYWJsZWRdJ1xuICApXG5cbiAgZGlzYWJsZWRCdXR0b25zLmZvckVhY2goKGJ1dHRvbjogSFRNTElucHV0RWxlbWVudCB8IEhUTUxCdXR0b25FbGVtZW50KSA9PiB7XG4gICAgYnV0dG9uLmRpc2FibGVkID0gZmFsc2VcbiAgICAvLyBSZXN0b3JlIG9yaWdpbmFsIHRleHQgaWYgZGF0YS1kaXNhYmxlLXdpdGggd2FzIHVzZWRcbiAgICBjb25zdCBvcmlnaW5hbFRleHQgPSBidXR0b24uZGF0YXNldC5vcmlnaW5hbFRleHRcbiAgICBpZiAob3JpZ2luYWxUZXh0KSB7XG4gICAgICBidXR0b24udGV4dENvbnRlbnQgPSBvcmlnaW5hbFRleHRcbiAgICAgIGRlbGV0ZSBidXR0b24uZGF0YXNldC5vcmlnaW5hbFRleHRcbiAgICB9XG4gICAgLy8gUmVtb3ZlIGxvYWRpbmcgY2xhc3MgaWYgcHJlc2VudFxuICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdsb2FkaW5nJylcbiAgfSlcbn1cblxuLy8gTGVnYWN5IFJhaWxzLVVKUyBjb21wYXRpYmlsaXR5OiBhdXRvLWNvbnZlcnQgYXR0cmlidXRlcyB0byBUdXJibyBlcXVpdmFsZW50c1xuZnVuY3Rpb24gY29udmVydExlZ2FjeUF0dHJpYnV0ZXMoKTogdm9pZCB7XG4gIC8vIGRhdGEtbWV0aG9kIFx1MjE5MiBkYXRhLXR1cmJvLW1ldGhvZFxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxFbGVtZW50PignW2RhdGEtbWV0aG9kXTpub3QoW2RhdGEtdHVyYm8tbWV0aG9kXSknKS5mb3JFYWNoKGVsID0+IHtcbiAgICBjb25zdCBtZXRob2QgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbWV0aG9kJylcbiAgICBpZiAobWV0aG9kICYmIG1ldGhvZCAhPT0gJ2dldCcpIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGF0YS10dXJiby1tZXRob2QnLCBtZXRob2QpXG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtbWV0aG9kJylcbiAgICB9XG4gIH0pXG5cbiAgLy8gZGF0YS1jb25maXJtIFx1MjE5MiBkYXRhLXR1cmJvLWNvbmZpcm1cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbDxIVE1MRWxlbWVudD4oJ1tkYXRhLWNvbmZpcm1dOm5vdChbZGF0YS10dXJiby1jb25maXJtXSknKS5mb3JFYWNoKGVsID0+IHtcbiAgICBjb25zdCBjb25maXJtID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbmZpcm0nKVxuICAgIGlmIChjb25maXJtKSB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdHVyYm8tY29uZmlybScsIGNvbmZpcm0pXG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtY29uZmlybScpXG4gICAgfVxuICB9KVxuXG4gIC8vIFJlbW92ZSBkYXRhLXJlbW90ZT1cInRydWVcIiAoVHVyYm8gaGFuZGxlcyBieSBkZWZhdWx0KVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxFbGVtZW50PignW2RhdGEtcmVtb3RlPVwidHJ1ZVwiXScpLmZvckVhY2goZWwgPT4ge1xuICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1yZW1vdGUnKVxuICB9KVxuXG4gIC8vIGRhdGEtZGlzYWJsZS13aXRoIFx1MjE5MiBkYXRhLXR1cmJvLXN1Ym1pdHMtd2l0aCAoc2tpcCBpZiB0dXJibyBpcyBkaXNhYmxlZClcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbDxIVE1MRWxlbWVudD4oJ1tkYXRhLWRpc2FibGUtd2l0aF06bm90KFtkYXRhLXR1cmJvLXN1Ym1pdHMtd2l0aF0pJykuZm9yRWFjaChlbCA9PiB7XG4gICAgLy8gU2tpcCBpZiBlbGVtZW50IG9yIGl0cyBwYXJlbnQgZm9ybSBoYXMgZGF0YS10dXJibz1cImZhbHNlXCJcbiAgICBpZiAoZWwuZGF0YXNldC50dXJibyA9PT0gJ2ZhbHNlJykgcmV0dXJuXG4gICAgY29uc3QgcGFyZW50Rm9ybSA9IGVsLmNsb3Nlc3QoJ2Zvcm0nKVxuICAgIGlmIChwYXJlbnRGb3JtPy5kYXRhc2V0LnR1cmJvID09PSAnZmFsc2UnKSByZXR1cm5cblxuICAgIGNvbnN0IHRleHQgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZGlzYWJsZS13aXRoJylcbiAgICBpZiAodGV4dCkge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdkYXRhLXR1cmJvLXN1Ym1pdHMtd2l0aCcsIHRleHQpXG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtZGlzYWJsZS13aXRoJylcbiAgICB9XG4gIH0pXG59XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBjb252ZXJ0TGVnYWN5QXR0cmlidXRlcylcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3R1cmJvOmxvYWQnLCBjb252ZXJ0TGVnYWN5QXR0cmlidXRlcylcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3R1cmJvOmZyYW1lLWxvYWQnLCBjb252ZXJ0TGVnYWN5QXR0cmlidXRlcylcblxuLy8gSGFuZGxlIGRhdGEtZGlzYWJsZS13aXRoIGZvciBmb3JtcyB3aXRoIGRhdGEtdHVyYm89XCJmYWxzZVwiIChsaWtlIE9BdXRoKVxuLy8gU2luY2UgVHVyYm8gaXMgZGlzYWJsZWQsIHdlIG5lZWQgdG8gbWFudWFsbHkgaGFuZGxlIHN1Ym1pdCBlbGVtZW50IGRpc2FibGUvZW5hYmxlXG5mdW5jdGlvbiBoYW5kbGVOb25UdXJib0Zvcm1TdWJtaXQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gIGNvbnN0IGZvcm0gPSBldmVudC50YXJnZXQgYXMgSFRNTEZvcm1FbGVtZW50XG4gIGNvbnN0IHN1Ym1pdCA9IGZvcm0ucXVlcnlTZWxlY3RvcjxIVE1MQnV0dG9uRWxlbWVudCB8IEhUTUxJbnB1dEVsZW1lbnQ+KFxuICAgICdidXR0b25bdHlwZT1cInN1Ym1pdFwiXSwgYnV0dG9uOm5vdChbdHlwZV0pLCBpbnB1dFt0eXBlPVwic3VibWl0XCJdJ1xuICApXG5cbiAgLy8gQ2hlY2sgaWYgdHVyYm8gaXMgZGlzYWJsZWRcbiAgY29uc3QgaXNUdXJib0Rpc2FibGVkID0gZm9ybS5kYXRhc2V0LnR1cmJvID09PSAnZmFsc2UnIHx8IHN1Ym1pdD8uZGF0YXNldC50dXJibyA9PT0gJ2ZhbHNlJ1xuXG4gIGlmIChpc1R1cmJvRGlzYWJsZWQgJiYgc3VibWl0Py5kYXRhc2V0LmRpc2FibGVXaXRoKSB7XG4gICAgY29uc3QgaXNCdXR0b24gPSBzdWJtaXQgaW5zdGFuY2VvZiBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGNvbnN0IGtleSA9IGlzQnV0dG9uID8gJ3RleHRDb250ZW50JyA6ICd2YWx1ZSdcbiAgICBzdWJtaXQuZGF0YXNldC5vcmlnaW5hbFRleHQgPSBzdWJtaXRba2V5XSB8fCAnJ1xuICAgIHN1Ym1pdFtrZXldID0gc3VibWl0LmRhdGFzZXQuZGlzYWJsZVdpdGhcbiAgICBzdWJtaXQuZGlzYWJsZWQgPSB0cnVlXG4gIH1cbn1cblxuLy8gUmUtZW5hYmxlIHN1Ym1pdCBlbGVtZW50cyB3aGVuIHBhZ2UgYmVjb21lcyB2aXNpYmxlIChlLmcuLCBzd2l0Y2hpbmcgYmFjayBmcm9tIHBheW1lbnQgd2luZG93KVxuZnVuY3Rpb24gaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSgpOiB2b2lkIHtcbiAgaWYgKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gJ3Zpc2libGUnKSB7XG4gICAgY29uc3Qgc2VsZWN0b3IgPSAnZm9ybVtkYXRhLXR1cmJvPVwiZmFsc2VcIl0gW2Rpc2FibGVkXVtkYXRhLW9yaWdpbmFsLXRleHRdLCBbZGF0YS10dXJibz1cImZhbHNlXCJdW2Rpc2FibGVkXVtkYXRhLW9yaWdpbmFsLXRleHRdJ1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTEJ1dHRvbkVsZW1lbnQgfCBIVE1MSW5wdXRFbGVtZW50PihzZWxlY3RvcikuZm9yRWFjaChzdWJtaXQgPT4ge1xuICAgICAgc3VibWl0LmRpc2FibGVkID0gZmFsc2VcbiAgICAgIGNvbnN0IG9yaWdpbmFsVGV4dCA9IHN1Ym1pdC5kYXRhc2V0Lm9yaWdpbmFsVGV4dFxuICAgICAgaWYgKG9yaWdpbmFsVGV4dCkge1xuICAgICAgICBjb25zdCBrZXkgPSBzdWJtaXQgaW5zdGFuY2VvZiBIVE1MQnV0dG9uRWxlbWVudCA/ICd0ZXh0Q29udGVudCcgOiAndmFsdWUnXG4gICAgICAgIHN1Ym1pdFtrZXldID0gb3JpZ2luYWxUZXh0XG4gICAgICAgIGRlbGV0ZSBzdWJtaXQuZGF0YXNldC5vcmlnaW5hbFRleHRcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGhhbmRsZU5vblR1cmJvRm9ybVN1Ym1pdClcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCBoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlKVxuXG4vLyBSZWdpc3RlciBjdXN0b20gVHVyYm8gU3RyZWFtIGFjdGlvbiBmb3IgYXN5bmMgam9iIGVycm9yc1xuU3RyZWFtQWN0aW9ucy5yZXBvcnRfYXN5bmNfZXJyb3IgPSBmdW5jdGlvbih0aGlzOiBhbnkpIHtcbiAgY29uc3QgZXJyb3JEYXRhID0gSlNPTi5wYXJzZSh0aGlzLmdldEF0dHJpYnV0ZSgnZGF0YS1lcnJvcicpIHx8ICd7fScpXG5cbiAgaWYgKHdpbmRvdy5lcnJvckhhbmRsZXIpIHtcbiAgICB3aW5kb3cuZXJyb3JIYW5kbGVyLmhhbmRsZUVycm9yKHtcbiAgICAgIHR5cGU6ICdhc3luY2pvYicsXG4gICAgICBtZXNzYWdlOiBlcnJvckRhdGEubWVzc2FnZSB8fCAnQXN5bmMgam9iIGVycm9yIG9jY3VycmVkJyxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgam9iX2NsYXNzOiBlcnJvckRhdGEuam9iX2NsYXNzLFxuICAgICAgam9iX2lkOiBlcnJvckRhdGEuam9iX2lkLFxuICAgICAgcXVldWU6IGVycm9yRGF0YS5xdWV1ZSxcbiAgICAgIGV4Y2VwdGlvbl9jbGFzczogZXJyb3JEYXRhLmV4Y2VwdGlvbl9jbGFzcyxcbiAgICAgIGJhY2t0cmFjZTogZXJyb3JEYXRhLmJhY2t0cmFjZSxcbiAgICAgIGRldGFpbHM6IGVycm9yRGF0YVxuICAgIH0pXG4gIH1cbn1cblxuLy8gUmVnaXN0ZXIgY3VzdG9tIFR1cmJvIFN0cmVhbSBhY3Rpb24gZm9yIHJlZGlyZWN0IHdpdGggdHVyYm86IGZhbHNlXG5TdHJlYW1BY3Rpb25zLnJlZGlyZWN0ID0gZnVuY3Rpb24odGhpczogYW55KSB7XG4gIGNvbnN0IHVybCA9IHRoaXMuZ2V0QXR0cmlidXRlKCd1cmwnKVxuICBjb25zdCB0dXJibyA9IHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLXR1cmJvJylcblxuICBpZiAodXJsKSB7XG4gICAgaWYgKHR1cmJvID09PSAnZmFsc2UnKSB7XG4gICAgICAvLyBGdWxsIHBhZ2UgcmVkaXJlY3QgKHR1cmJvOiBmYWxzZSlcbiAgICAgIC8vIENoZWNrIGlmIGluIGlmcmFtZSBhbmQgb3BlbiBpbiBuZXcgd2luZG93IHRvIGF2b2lkIFgtRnJhbWUtT3B0aW9ucyBlcnJvcnNcbiAgICAgIGlmICh3aW5kb3cuc2VsZiAhPT0gd2luZG93LnBhcmVudCkge1xuICAgICAgICAvLyBJbiBpZnJhbWUsIG9wZW4gaW4gbmV3IHdpbmRvd1xuICAgICAgICB3aW5kb3cub3Blbih1cmwsICdfYmxhbmsnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTm9ybWFsIHJlZGlyZWN0XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFR1cmJvIG5hdmlnYXRpb25cbiAgICAgIFR1cmJvLnZpc2l0KHVybClcbiAgICB9XG4gIH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7O0FBQUEsSUFBTztBQUFQO0FBQUE7QUFBQSxJQUFPLG1CQUFRO0FBQUEsTUFDYixRQUFRLE9BQU8sWUFBWSxjQUFj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QUssS0FBSyxNQUFNLE1BQU0sSUFBSTtBQUMvQixZQUFNLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxFQUFFLEVBQUUsSUFBSSxhQUFhO0FBQzdDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLFlBQVk7QUFDM0MsV0FBSyxLQUFLLElBQUksTUFBTSxNQUFNLElBQUk7QUFDOUIsWUFBTSxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLElBQUksYUFBYTtBQUM1QyxXQUFLLEtBQUssSUFBSSxNQUFNLE1BQU0sSUFBSTtBQUM5QixZQUFNLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFLEVBQUUsSUFBSSxZQUFZO0FBQzVDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLFlBQVk7QUFDM0MsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLElBQUksWUFBWTtBQUMzQyxXQUFLLEtBQUssSUFBSSxNQUFNLE1BQU0sSUFBSTtBQUM5QixZQUFNLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFLEVBQUUsSUFBSSxXQUFXO0FBQzNDLFdBQUssS0FBSyxJQUFJLE1BQU0sTUFBTSxJQUFJO0FBQzlCLFlBQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRSxJQUFJLFlBQVk7QUFDNUMsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLElBQUksWUFBWTtBQUMzQyxXQUFLLEtBQUssS0FBSyxNQUFNLE1BQU0sSUFBSTtBQUMvQixZQUFNLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsSUFBSSxZQUFZO0FBQzNDLFdBQUssS0FBSyxJQUFJLE1BQU0sTUFBTSxJQUFJO0FBQzlCLFlBQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRSxJQUFJLGFBQWE7QUFDN0MsV0FBSyxLQUFLLElBQUksTUFBTSxNQUFNLElBQUk7QUFDOUIsWUFBTSxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLElBQUksWUFBWTtBQUMzQyxXQUFLLEtBQUssS0FBSyxNQUFNLE1BQU0sSUFBSTtBQUMvQixZQUFNLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsSUFBSSxhQUFhO0FBQzVDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRSxJQUFJLGFBQWE7QUFDN0MsV0FBSyxLQUFLLElBQUksTUFBTSxNQUFNLElBQUk7QUFDOUIsWUFBTSxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLElBQUksV0FBVztBQUMxQyxXQUFLLEtBQUssSUFBSSxNQUFNLE1BQU0sSUFBSTtBQUM5QixZQUFNLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsSUFBSSxhQUFhO0FBQzVDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRSxJQUFJLGFBQWE7QUFDN0MsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxJQUFJLElBQUksS0FBSyxFQUFFLENBQUMsSUFBSSxTQUFTO0FBQ25DLFdBQUssS0FBSyxJQUFJLE1BQU0sTUFBTSxJQUFJO0FBQzlCLFlBQU0sSUFBSSxJQUFJLEtBQUssRUFBRSxDQUFDLElBQUksYUFBYTtBQUN2QyxXQUFLLEtBQUssS0FBSyxNQUFNLE1BQU0sSUFBSTtBQUMvQixZQUFNLElBQUksSUFBSSxLQUFLLEVBQUUsRUFBRSxJQUFJLGFBQWE7QUFDeEMsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxJQUFJLElBQUksS0FBSyxFQUFFLEVBQUUsSUFBSSxXQUFXO0FBQ3RDLFdBQUssS0FBSyxLQUFLLE1BQU0sS0FBSyxJQUFJO0FBQzlCLFlBQU0sSUFBSSxJQUFJLEtBQUssRUFBRSxDQUFDLElBQUksYUFBYTtBQUN2QyxXQUFLLEtBQUssSUFBSSxNQUFNLE1BQU0sSUFBSTtBQUM5QixZQUFNLElBQUksSUFBSSxLQUFLLEVBQUUsQ0FBQyxJQUFJLGFBQWE7QUFDdkMsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxJQUFJLElBQUksS0FBSyxFQUFFLENBQUMsSUFBSSxZQUFZO0FBQ3RDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sSUFBSSxJQUFJLEtBQUssRUFBRSxFQUFFLElBQUksYUFBYTtBQUN4QyxXQUFLLEtBQUssS0FBSyxNQUFNLEtBQUssSUFBSTtBQUM5QixZQUFNLElBQUksSUFBSSxLQUFLLEVBQUUsRUFBRSxJQUFJLFlBQVk7QUFDdkMsV0FBSyxLQUFLLElBQUksTUFBTSxNQUFNLElBQUk7QUFDOUIsWUFBTSxJQUFJLElBQUksS0FBSyxFQUFFLENBQUMsSUFBSSxZQUFZO0FBQ3RDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sSUFBSSxJQUFJLEtBQUssRUFBRSxDQUFDLElBQUksWUFBWTtBQUN0QyxXQUFLLEtBQUssS0FBSyxNQUFNLE1BQU0sSUFBSTtBQUMvQixZQUFNLElBQUksSUFBSSxLQUFLLEVBQUUsQ0FBQyxJQUFJLFdBQVc7QUFDckMsV0FBSyxLQUFLLEtBQUssTUFBTSxLQUFLLElBQUk7QUFDOUIsWUFBTSxJQUFJLElBQUksS0FBSyxFQUFFLENBQUMsSUFBSSxZQUFZO0FBQ3RDLFdBQUssS0FBSyxJQUFJLE1BQU0sTUFBTSxJQUFJO0FBQzlCLFlBQU0sSUFBSSxJQUFJLEtBQUssRUFBRSxFQUFFLElBQUksWUFBWTtBQUN2QyxXQUFLLEtBQUssS0FBSyxNQUFNLE1BQU0sSUFBSTtBQUMvQixZQUFNLElBQUksSUFBSSxLQUFLLEVBQUUsRUFBRSxJQUFJLFlBQVk7QUFDdkMsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxJQUFJLElBQUksS0FBSyxFQUFFLENBQUMsSUFBSSxZQUFZO0FBQ3RDLFdBQUssS0FBSyxLQUFLLE1BQU0sS0FBSyxJQUFJO0FBQzlCLFlBQU0sS0FBSyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsSUFBSSxZQUFZO0FBQ3pDLFdBQUssS0FBSyxJQUFJLE1BQU0sTUFBTSxJQUFJO0FBQzlCLFlBQU0sS0FBSyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsSUFBSSxhQUFhO0FBQzFDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sS0FBSyxJQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsSUFBSSxhQUFhO0FBQzNDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sS0FBSyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsSUFBSSxXQUFXO0FBQ3hDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sS0FBSyxJQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsSUFBSSxhQUFhO0FBQzNDLFdBQUssS0FBSyxJQUFJLE1BQU0sTUFBTSxJQUFJO0FBQzlCLFlBQU0sS0FBSyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsSUFBSSxhQUFhO0FBQzFDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sS0FBSyxJQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsSUFBSSxVQUFVO0FBQ3hDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sS0FBSyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsSUFBSSxhQUFhO0FBQzFDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9C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QUEsTUFDOUIsWUFBVyxvQkFBSSxLQUFLLEdBQUUsWUFBWTtBQUFBLE1BQ2xDLFdBQVcsVUFBVTtBQUFBLE1BQ3JCLFFBQVEsVUFBVTtBQUFBLE1BQ2xCLE9BQU8sVUFBVTtBQUFBLE1BQ2pCLGlCQUFpQixVQUFVO0FBQUEsTUFDM0IsV0FBVyxVQUFVO0FBQUEsTUFDckIsU0FBUztBQUFBLElBQ1gsQ0FBQztBQUFBLEVBQ0g7QUFDRjtBQUdBLGNBQWMsV0FBVyxXQUFvQjtBQUMzQyxRQUFNLE1BQU0sS0FBSyxhQUFhLEtBQUs7QUFDbkMsUUFBTSxRQUFRLEtBQUssYUFBYSxZQUFZO0FBRTVDLE1BQUksS0FBSztBQUNQLFFBQUksVUFBVSxTQUFTO0FBR3JCLFVBQUksT0FBTyxTQUFTLE9BQU8sUUFBUTtBQUVqQyxlQUFPLEtBQUssS0FBSyxRQUFRO0FBQUEsTUFDM0IsT0FBTztBQUVMLGVBQU8sU0FBUyxPQUFPO0FBQUEsTUFDekI7QUFBQSxJQUNGLE9BQU87QUFFTCwrQkFBTSxNQUFNLEdBQUc7QUFBQSxJQUNqQjtBQUFBLEVBQ0Y7QUFDRjsiLAogICJuYW1lcyI6IFsibm93IiwgInNlY29uZHNTaW5jZSIsICJDb25uZWN0aW9uTW9uaXRvciIsICJtZXNzYWdlX3R5cGVzIiwgInByb3RvY29scyIsICJzdXBwb3J0ZWRQcm90b2NvbHMiLCAiaW5kZXhPZiIsICJDb25uZWN0aW9uIiwgImNvbnN1bWVyIiwgImRhdGEiLCAiZXJyb3IiLCAiaGFuZGxlciIsICJleHRlbmQiLCAiU3Vic2NyaXB0aW9uIiwgImNvbnN1bWVyIiwgImRhdGEiLCAiU3Vic2NyaXB0aW9uR3VhcmFudG9yIiwgIlN1YnNjcmlwdGlvbnMiLCAiY29uc3VtZXIiLCAiU3Vic2NyaXB0aW9uIiwgInN1YnNjcmlwdGlvbiIsICJjcmVhdGVXZWJTb2NrZXRVUkwiLCAiQ29uc3VtZXIiLCAiU3Vic2NyaXB0aW9ucyIsICJkYXRhIiwgIkNvbnN1bWVyIiwgIlN1YnNjcmlwdGlvbiIsICJTdWJzY3JpcHRpb25zIiwgImNyZWF0ZUNvbnN1bWVyIiwgImNyZWF0ZVdlYlNvY2tldFVSTCIsICJnZXRDb25maWciLCAiaGV4IiwgIlNwYXJrTUQ1IiwgInJhdyIsICJzdGFydCIsICJkaXNwYXRjaEV2ZW50IiwgImVycm9yIiwgImFkZDIiLCAiZXJyb3IyIiwgImNhY2hlIiwgInN0YXJ0ZWQiLCAic3RhcnQiLCAic3RhcnQyIiwgImlkIiwgImNvbnN1bWVyIiwgImRhdGEiLCAiZXJyb3IiLCAiaGFuZGxlciIsICJzdWJzY3JpcHRpb24iLCAic3RhcnQiLCAic3VibWl0dGVyIiwgInN0eWxlIiwgImRpc3BhdGNoIiwgImRlYm91bmNlIiwgImNvbmZpZyIsICJwcmVmaXgiLCAibG9jYXRpb24iLCAiZXJyb3IiLCAiY29va2llIiwgImlkIiwgImNsb25lIiwgImN0eCIsICJtb3JwaENoaWxkcmVuIiwgImZpbmRCZXN0TWF0Y2giLCAibW9ycGhOb2RlIiwgImNyZWF0ZU1vcnBoQ29udGV4dCIsICJub3JtYWxpemVFbGVtZW50IiwgIm5vcm1hbGl6ZVBhcmVudCIsICJzZXNzaW9uIiwgInZpc2l0IiwgInNpemUiLCAicmVjZW50UmVxdWVzdHMiLCAiVHVyYm8iLCAiZG9jdW1lbnQiLCAiY3JlYXRlQ29uc3VtZXIiLCAid2FsayIsICJkYXRhIiwgIndhbGsiLCAic3VibWl0dGVyIiwgImFwcGxpY2F0aW9uIiwgImVycm9yIiwgImNhbWVsaXplIiwgImNhcGl0YWxpemUiLCAiYWRkIiwgImZldGNoIiwgInNldCIsICJzaXplIiwgIm1hdGNoIiwgIm9sZFZhbHVlIiwgImVycm9yIiwgImNhcGl0YWxpemUiLCAiY29uc3RydWN0b3IiLCAib2JzZXJ2ZXIiLCAic2NvcGUiLCAiZXh0ZW5kIiwgImFwcGxpY2F0aW9uIiwgImxvZ2dlciIsICJlbGVtZW50IiwgImNhbWVsaXplIiwgInByZWZpeCIsICJlcnJvciIsICJkYXRhIiwgImRhdGEiLCAiZXJyb3IiLCAiZXJyb3IiLCAiZXJyb3IiLCAiY2hlY2ttYXJrIiwgImVycm9yIiwgImRhdGEiLCAiZGF0YSIsICJlcnJvciIsICJkYXRhIiwgImVycm9yIiwgImRhdGEiLCAiZXJyb3IiLCAiZGF0YSIsICJlcnJvciIsICJpZCIsICJsb2NhdGlvbiIsICJlcnJvciIsICJlcnJvciIsICJlcnJvciIsICJlcnJvciIsICJvYnNlcnZlciIsICJpZCIsICJjb25maXJtIl0KfQo=
