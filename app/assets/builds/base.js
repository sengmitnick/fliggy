var __defProp = Object.defineProperty;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};

// node_modules/@rails/actioncable/src/adapters.js
var adapters_default;
var init_adapters = __esm({
  "node_modules/@rails/actioncable/src/adapters.js"() {
    adapters_default = {
      logger: typeof console !== "undefined" ? console : void 0,
      WebSocket: typeof WebSocket !== "undefined" ? WebSocket : void 0
    };
  }
});

// node_modules/@rails/actioncable/src/logger.js
var logger_default;
var init_logger = __esm({
  "node_modules/@rails/actioncable/src/logger.js"() {
    init_adapters();
    logger_default = {
      log(...messages) {
        if (this.enabled) {
          messages.push(Date.now());
          adapters_default.logger.log("[ActionCable]", ...messages);
        }
      }
    };
  }
});

// node_modules/@rails/actioncable/src/connection_monitor.js
var now2, secondsSince2, ConnectionMonitor2, connection_monitor_default;
var init_connection_monitor = __esm({
  "node_modules/@rails/actioncable/src/connection_monitor.js"() {
    init_logger();
    now2 = () => (/* @__PURE__ */ new Date()).getTime();
    secondsSince2 = (time) => (now2() - time) / 1e3;
    ConnectionMonitor2 = class {
      constructor(connection) {
        this.visibilityDidChange = this.visibilityDidChange.bind(this);
        this.connection = connection;
        this.reconnectAttempts = 0;
      }
      start() {
        if (!this.isRunning()) {
          this.startedAt = now2();
          delete this.stoppedAt;
          this.startPolling();
          addEventListener("visibilitychange", this.visibilityDidChange);
          logger_default.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`);
        }
      }
      stop() {
        if (this.isRunning()) {
          this.stoppedAt = now2();
          this.stopPolling();
          removeEventListener("visibilitychange", this.visibilityDidChange);
          logger_default.log("ConnectionMonitor stopped");
        }
      }
      isRunning() {
        return this.startedAt && !this.stoppedAt;
      }
      recordMessage() {
        this.pingedAt = now2();
      }
      recordConnect() {
        this.reconnectAttempts = 0;
        delete this.disconnectedAt;
        logger_default.log("ConnectionMonitor recorded connect");
      }
      recordDisconnect() {
        this.disconnectedAt = now2();
        logger_default.log("ConnectionMonitor recorded disconnect");
      }
      // Private
      startPolling() {
        this.stopPolling();
        this.poll();
      }
      stopPolling() {
        clearTimeout(this.pollTimeout);
      }
      poll() {
        this.pollTimeout = setTimeout(
          () => {
            this.reconnectIfStale();
            this.poll();
          },
          this.getPollInterval()
        );
      }
      getPollInterval() {
        const { staleThreshold, reconnectionBackoffRate } = this.constructor;
        const backoff = Math.pow(1 + reconnectionBackoffRate, Math.min(this.reconnectAttempts, 10));
        const jitterMax = this.reconnectAttempts === 0 ? 1 : reconnectionBackoffRate;
        const jitter = jitterMax * Math.random();
        return staleThreshold * 1e3 * backoff * (1 + jitter);
      }
      reconnectIfStale() {
        if (this.connectionIsStale()) {
          logger_default.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${secondsSince2(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`);
          this.reconnectAttempts++;
          if (this.disconnectedRecently()) {
            logger_default.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${secondsSince2(this.disconnectedAt)} s`);
          } else {
            logger_default.log("ConnectionMonitor reopening");
            this.connection.reopen();
          }
        }
      }
      get refreshedAt() {
        return this.pingedAt ? this.pingedAt : this.startedAt;
      }
      connectionIsStale() {
        return secondsSince2(this.refreshedAt) > this.constructor.staleThreshold;
      }
      disconnectedRecently() {
        return this.disconnectedAt && secondsSince2(this.disconnectedAt) < this.constructor.staleThreshold;
      }
      visibilityDidChange() {
        if (document.visibilityState === "visible") {
          setTimeout(
            () => {
              if (this.connectionIsStale() || !this.connection.isOpen()) {
                logger_default.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`);
                this.connection.reopen();
              }
            },
            200
          );
        }
      }
    };
    ConnectionMonitor2.staleThreshold = 6;
    ConnectionMonitor2.reconnectionBackoffRate = 0.15;
    connection_monitor_default = ConnectionMonitor2;
  }
});

// node_modules/@rails/actioncable/src/internal.js
var internal_default;
var init_internal = __esm({
  "node_modules/@rails/actioncable/src/internal.js"() {
    internal_default = {
      "message_types": {
        "welcome": "welcome",
        "disconnect": "disconnect",
        "ping": "ping",
        "confirmation": "confirm_subscription",
        "rejection": "reject_subscription"
      },
      "disconnect_reasons": {
        "unauthorized": "unauthorized",
        "invalid_request": "invalid_request",
        "server_restart": "server_restart",
        "remote": "remote"
      },
      "default_mount_path": "/cable",
      "protocols": [
        "actioncable-v1-json",
        "actioncable-unsupported"
      ]
    };
  }
});

// node_modules/@rails/actioncable/src/connection.js
var message_types2, protocols2, supportedProtocols2, indexOf2, Connection2, connection_default;
var init_connection = __esm({
  "node_modules/@rails/actioncable/src/connection.js"() {
    init_adapters();
    init_connection_monitor();
    init_internal();
    init_logger();
    ({ message_types: message_types2, protocols: protocols2 } = internal_default);
    supportedProtocols2 = protocols2.slice(0, protocols2.length - 1);
    indexOf2 = [].indexOf;
    Connection2 = class {
      constructor(consumer2) {
        this.open = this.open.bind(this);
        this.consumer = consumer2;
        this.subscriptions = this.consumer.subscriptions;
        this.monitor = new connection_monitor_default(this);
        this.disconnected = true;
      }
      send(data2) {
        if (this.isOpen()) {
          this.webSocket.send(JSON.stringify(data2));
          return true;
        } else {
          return false;
        }
      }
      open() {
        if (this.isActive()) {
          logger_default.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`);
          return false;
        } else {
          const socketProtocols = [...protocols2, ...this.consumer.subprotocols || []];
          logger_default.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${socketProtocols}`);
          if (this.webSocket) {
            this.uninstallEventHandlers();
          }
          this.webSocket = new adapters_default.WebSocket(this.consumer.url, socketProtocols);
          this.installEventHandlers();
          this.monitor.start();
          return true;
        }
      }
      close({ allowReconnect } = { allowReconnect: true }) {
        if (!allowReconnect) {
          this.monitor.stop();
        }
        if (this.isOpen()) {
          return this.webSocket.close();
        }
      }
      reopen() {
        logger_default.log(`Reopening WebSocket, current state is ${this.getState()}`);
        if (this.isActive()) {
          try {
            return this.close();
          } catch (error3) {
            logger_default.log("Failed to reopen WebSocket", error3);
          } finally {
            logger_default.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`);
            setTimeout(this.open, this.constructor.reopenDelay);
          }
        } else {
          return this.open();
        }
      }
      getProtocol() {
        if (this.webSocket) {
          return this.webSocket.protocol;
        }
      }
      isOpen() {
        return this.isState("open");
      }
      isActive() {
        return this.isState("open", "connecting");
      }
      triedToReconnect() {
        return this.monitor.reconnectAttempts > 0;
      }
      // Private
      isProtocolSupported() {
        return indexOf2.call(supportedProtocols2, this.getProtocol()) >= 0;
      }
      isState(...states) {
        return indexOf2.call(states, this.getState()) >= 0;
      }
      getState() {
        if (this.webSocket) {
          for (let state in adapters_default.WebSocket) {
            if (adapters_default.WebSocket[state] === this.webSocket.readyState) {
              return state.toLowerCase();
            }
          }
        }
        return null;
      }
      installEventHandlers() {
        for (let eventName in this.events) {
          const handler4 = this.events[eventName].bind(this);
          this.webSocket[`on${eventName}`] = handler4;
        }
      }
      uninstallEventHandlers() {
        for (let eventName in this.events) {
          this.webSocket[`on${eventName}`] = function() {
          };
        }
      }
    };
    Connection2.reopenDelay = 500;
    Connection2.prototype.events = {
      message(event2) {
        if (!this.isProtocolSupported()) {
          return;
        }
        const { identifier, message, reason, reconnect, type } = JSON.parse(event2.data);
        this.monitor.recordMessage();
        switch (type) {
          case message_types2.welcome:
            if (this.triedToReconnect()) {
              this.reconnectAttempted = true;
            }
            this.monitor.recordConnect();
            return this.subscriptions.reload();
          case message_types2.disconnect:
            logger_default.log(`Disconnecting. Reason: ${reason}`);
            return this.close({ allowReconnect: reconnect });
          case message_types2.ping:
            return null;
          case message_types2.confirmation:
            this.subscriptions.confirmSubscription(identifier);
            if (this.reconnectAttempted) {
              this.reconnectAttempted = false;
              return this.subscriptions.notify(identifier, "connected", { reconnected: true });
            } else {
              return this.subscriptions.notify(identifier, "connected", { reconnected: false });
            }
          case message_types2.rejection:
            return this.subscriptions.reject(identifier);
          default:
            return this.subscriptions.notify(identifier, "received", message);
        }
      },
      open() {
        logger_default.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`);
        this.disconnected = false;
        if (!this.isProtocolSupported()) {
          logger_default.log("Protocol is unsupported. Stopping monitor and disconnecting.");
          return this.close({ allowReconnect: false });
        }
      },
      close(event2) {
        logger_default.log("WebSocket onclose event");
        if (this.disconnected) {
          return;
        }
        this.disconnected = true;
        this.monitor.recordDisconnect();
        return this.subscriptions.notifyAll("disconnected", { willAttemptReconnect: this.monitor.isRunning() });
      },
      error() {
        logger_default.log("WebSocket onerror event");
      }
    };
    connection_default = Connection2;
  }
});

// node_modules/@rails/actioncable/src/subscription.js
var extend2, Subscription2;
var init_subscription = __esm({
  "node_modules/@rails/actioncable/src/subscription.js"() {
    extend2 = function(object, properties) {
      if (properties != null) {
        for (let key in properties) {
          const value = properties[key];
          object[key] = value;
        }
      }
      return object;
    };
    Subscription2 = class {
      constructor(consumer2, params = {}, mixin) {
        this.consumer = consumer2;
        this.identifier = JSON.stringify(params);
        extend2(this, mixin);
      }
      // Perform a channel action with the optional data passed as an attribute
      perform(action, data2 = {}) {
        data2.action = action;
        return this.send(data2);
      }
      send(data2) {
        return this.consumer.send({ command: "message", identifier: this.identifier, data: JSON.stringify(data2) });
      }
      unsubscribe() {
        return this.consumer.subscriptions.remove(this);
      }
    };
  }
});

// node_modules/@rails/actioncable/src/subscription_guarantor.js
var SubscriptionGuarantor2, subscription_guarantor_default;
var init_subscription_guarantor = __esm({
  "node_modules/@rails/actioncable/src/subscription_guarantor.js"() {
    init_logger();
    SubscriptionGuarantor2 = class {
      constructor(subscriptions) {
        this.subscriptions = subscriptions;
        this.pendingSubscriptions = [];
      }
      guarantee(subscription) {
        if (this.pendingSubscriptions.indexOf(subscription) == -1) {
          logger_default.log(`SubscriptionGuarantor guaranteeing ${subscription.identifier}`);
          this.pendingSubscriptions.push(subscription);
        } else {
          logger_default.log(`SubscriptionGuarantor already guaranteeing ${subscription.identifier}`);
        }
        this.startGuaranteeing();
      }
      forget(subscription) {
        logger_default.log(`SubscriptionGuarantor forgetting ${subscription.identifier}`);
        this.pendingSubscriptions = this.pendingSubscriptions.filter((s) => s !== subscription);
      }
      startGuaranteeing() {
        this.stopGuaranteeing();
        this.retrySubscribing();
      }
      stopGuaranteeing() {
        clearTimeout(this.retryTimeout);
      }
      retrySubscribing() {
        this.retryTimeout = setTimeout(
          () => {
            if (this.subscriptions && typeof this.subscriptions.subscribe === "function") {
              this.pendingSubscriptions.map((subscription) => {
                logger_default.log(`SubscriptionGuarantor resubscribing ${subscription.identifier}`);
                this.subscriptions.subscribe(subscription);
              });
            }
          },
          500
        );
      }
    };
    subscription_guarantor_default = SubscriptionGuarantor2;
  }
});

// node_modules/@rails/actioncable/src/subscriptions.js
var Subscriptions2;
var init_subscriptions = __esm({
  "node_modules/@rails/actioncable/src/subscriptions.js"() {
    init_subscription();
    init_subscription_guarantor();
    init_logger();
    Subscriptions2 = class {
      constructor(consumer2) {
        this.consumer = consumer2;
        this.guarantor = new subscription_guarantor_default(this);
        this.subscriptions = [];
      }
      create(channelName, mixin) {
        const channel = channelName;
        const params = typeof channel === "object" ? channel : { channel };
        const subscription = new Subscription2(this.consumer, params, mixin);
        return this.add(subscription);
      }
      // Private
      add(subscription) {
        this.subscriptions.push(subscription);
        this.consumer.ensureActiveConnection();
        this.notify(subscription, "initialized");
        this.subscribe(subscription);
        return subscription;
      }
      remove(subscription) {
        this.forget(subscription);
        if (!this.findAll(subscription.identifier).length) {
          this.sendCommand(subscription, "unsubscribe");
        }
        return subscription;
      }
      reject(identifier) {
        return this.findAll(identifier).map((subscription) => {
          this.forget(subscription);
          this.notify(subscription, "rejected");
          return subscription;
        });
      }
      forget(subscription) {
        this.guarantor.forget(subscription);
        this.subscriptions = this.subscriptions.filter((s) => s !== subscription);
        return subscription;
      }
      findAll(identifier) {
        return this.subscriptions.filter((s) => s.identifier === identifier);
      }
      reload() {
        return this.subscriptions.map((subscription) => this.subscribe(subscription));
      }
      notifyAll(callbackName, ...args) {
        return this.subscriptions.map((subscription) => this.notify(subscription, callbackName, ...args));
      }
      notify(subscription, callbackName, ...args) {
        let subscriptions;
        if (typeof subscription === "string") {
          subscriptions = this.findAll(subscription);
        } else {
          subscriptions = [subscription];
        }
        return subscriptions.map((subscription2) => typeof subscription2[callbackName] === "function" ? subscription2[callbackName](...args) : void 0);
      }
      subscribe(subscription) {
        if (this.sendCommand(subscription, "subscribe")) {
          this.guarantor.guarantee(subscription);
        }
      }
      confirmSubscription(identifier) {
        logger_default.log(`Subscription confirmed ${identifier}`);
        this.findAll(identifier).map((subscription) => this.guarantor.forget(subscription));
      }
      sendCommand(subscription, command) {
        const { identifier } = subscription;
        return this.consumer.send({ command, identifier });
      }
    };
  }
});

// node_modules/@rails/actioncable/src/consumer.js
function createWebSocketURL2(url) {
  if (typeof url === "function") {
    url = url();
  }
  if (url && !/^wss?:/i.test(url)) {
    const a = document.createElement("a");
    a.href = url;
    a.href = a.href;
    a.protocol = a.protocol.replace("http", "ws");
    return a.href;
  } else {
    return url;
  }
}
var Consumer2;
var init_consumer = __esm({
  "node_modules/@rails/actioncable/src/consumer.js"() {
    init_connection();
    init_subscriptions();
    Consumer2 = class {
      constructor(url) {
        this._url = url;
        this.subscriptions = new Subscriptions2(this);
        this.connection = new connection_default(this);
        this.subprotocols = [];
      }
      get url() {
        return createWebSocketURL2(this._url);
      }
      send(data2) {
        return this.connection.send(data2);
      }
      connect() {
        return this.connection.open();
      }
      disconnect() {
        return this.connection.close({ allowReconnect: false });
      }
      ensureActiveConnection() {
        if (!this.connection.isActive()) {
          return this.connection.open();
        }
      }
      addSubProtocol(subprotocol) {
        this.subprotocols = [...this.subprotocols, subprotocol];
      }
    };
  }
});

// node_modules/@rails/actioncable/src/index.js
var src_exports = {};
__export(src_exports, {
  Connection: () => connection_default,
  ConnectionMonitor: () => connection_monitor_default,
  Consumer: () => Consumer2,
  INTERNAL: () => internal_default,
  Subscription: () => Subscription2,
  SubscriptionGuarantor: () => subscription_guarantor_default,
  Subscriptions: () => Subscriptions2,
  adapters: () => adapters_default,
  createConsumer: () => createConsumer2,
  createWebSocketURL: () => createWebSocketURL2,
  getConfig: () => getConfig2,
  logger: () => logger_default
});
function createConsumer2(url = getConfig2("url") || internal_default.default_mount_path) {
  return new Consumer2(url);
}
function getConfig2(name) {
  const element = document.head.querySelector(`meta[name='action-cable-${name}']`);
  if (element) {
    return element.getAttribute("content");
  }
}
var init_src = __esm({
  "node_modules/@rails/actioncable/src/index.js"() {
    init_connection();
    init_connection_monitor();
    init_consumer();
    init_internal();
    init_subscription();
    init_subscriptions();
    init_subscription_guarantor();
    init_adapters();
    init_logger();
  }
});

// app/javascript/form_data_patch.ts
(function() {
  const OriginalFormData = window.FormData;
  window.FormData = class PatchedFormData extends OriginalFormData {
    constructor(form) {
      super(form);
      if (form) {
        const disabledFields = form.querySelectorAll(
          "input[disabled][name], textarea[disabled][name], select[disabled][name]"
        );
        disabledFields.forEach((field) => {
          if (field.name && !this.has(field.name)) {
            if (field instanceof HTMLInputElement) {
              if ((field.type === "checkbox" || field.type === "radio") && !field.checked) {
                return;
              }
              if (field.type === "file" && field.files) {
                Array.from(field.files).forEach((file) => {
                  this.append(field.name, file);
                });
                return;
              }
            }
            this.append(field.name, field.value);
          }
        });
      }
    }
  };
  Object.setPrototypeOf(window.FormData, OriginalFormData);
  Object.setPrototypeOf(window.FormData.prototype, OriginalFormData.prototype);
})();

// node_modules/@rails/activestorage/app/assets/javascripts/activestorage.esm.js
var sparkMd5 = {
  exports: {}
};
(function(module, exports) {
  (function(factory) {
    {
      module.exports = factory();
    }
  })(function(undefined$1) {
    var hex_chr = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "a", "b", "c", "d", "e", "f"];
    function md5cycle(x, k) {
      var a = x[0], b = x[1], c = x[2], d = x[3];
      a += (b & c | ~b & d) + k[0] - 680876936 | 0;
      a = (a << 7 | a >>> 25) + b | 0;
      d += (a & b | ~a & c) + k[1] - 389564586 | 0;
      d = (d << 12 | d >>> 20) + a | 0;
      c += (d & a | ~d & b) + k[2] + 606105819 | 0;
      c = (c << 17 | c >>> 15) + d | 0;
      b += (c & d | ~c & a) + k[3] - 1044525330 | 0;
      b = (b << 22 | b >>> 10) + c | 0;
      a += (b & c | ~b & d) + k[4] - 176418897 | 0;
      a = (a << 7 | a >>> 25) + b | 0;
      d += (a & b | ~a & c) + k[5] + 1200080426 | 0;
      d = (d << 12 | d >>> 20) + a | 0;
      c += (d & a | ~d & b) + k[6] - 1473231341 | 0;
      c = (c << 17 | c >>> 15) + d | 0;
      b += (c & d | ~c & a) + k[7] - 45705983 | 0;
      b = (b << 22 | b >>> 10) + c | 0;
      a += (b & c | ~b & d) + k[8] + 1770035416 | 0;
      a = (a << 7 | a >>> 25) + b | 0;
      d += (a & b | ~a & c) + k[9] - 1958414417 | 0;
      d = (d << 12 | d >>> 20) + a | 0;
      c += (d & a | ~d & b) + k[10] - 42063 | 0;
      c = (c << 17 | c >>> 15) + d | 0;
      b += (c & d | ~c & a) + k[11] - 1990404162 | 0;
      b = (b << 22 | b >>> 10) + c | 0;
      a += (b & c | ~b & d) + k[12] + 1804603682 | 0;
      a = (a << 7 | a >>> 25) + b | 0;
      d += (a & b | ~a & c) + k[13] - 40341101 | 0;
      d = (d << 12 | d >>> 20) + a | 0;
      c += (d & a | ~d & b) + k[14] - 1502002290 | 0;
      c = (c << 17 | c >>> 15) + d | 0;
      b += (c & d | ~c & a) + k[15] + 1236535329 | 0;
      b = (b << 22 | b >>> 10) + c | 0;
      a += (b & d | c & ~d) + k[1] - 165796510 | 0;
      a = (a << 5 | a >>> 27) + b | 0;
      d += (a & c | b & ~c) + k[6] - 1069501632 | 0;
      d = (d << 9 | d >>> 23) + a | 0;
      c += (d & b | a & ~b) + k[11] + 643717713 | 0;
      c = (c << 14 | c >>> 18) + d | 0;
      b += (c & a | d & ~a) + k[0] - 373897302 | 0;
      b = (b << 20 | b >>> 12) + c | 0;
      a += (b & d | c & ~d) + k[5] - 701558691 | 0;
      a = (a << 5 | a >>> 27) + b | 0;
      d += (a & c | b & ~c) + k[10] + 38016083 | 0;
      d = (d << 9 | d >>> 23) + a | 0;
      c += (d & b | a & ~b) + k[15] - 660478335 | 0;
      c = (c << 14 | c >>> 18) + d | 0;
      b += (c & a | d & ~a) + k[4] - 405537848 | 0;
      b = (b << 20 | b >>> 12) + c | 0;
      a += (b & d | c & ~d) + k[9] + 568446438 | 0;
      a = (a << 5 | a >>> 27) + b | 0;
      d += (a & c | b & ~c) + k[14] - 1019803690 | 0;
      d = (d << 9 | d >>> 23) + a | 0;
      c += (d & b | a & ~b) + k[3] - 187363961 | 0;
      c = (c << 14 | c >>> 18) + d | 0;
      b += (c & a | d & ~a) + k[8] + 1163531501 | 0;
      b = (b << 20 | b >>> 12) + c | 0;
      a += (b & d | c & ~d) + k[13] - 1444681467 | 0;
      a = (a << 5 | a >>> 27) + b | 0;
      d += (a & c | b & ~c) + k[2] - 51403784 | 0;
      d = (d << 9 | d >>> 23) + a | 0;
      c += (d & b | a & ~b) + k[7] + 1735328473 | 0;
      c = (c << 14 | c >>> 18) + d | 0;
      b += (c & a | d & ~a) + k[12] - 1926607734 | 0;
      b = (b << 20 | b >>> 12) + c | 0;
      a += (b ^ c ^ d) + k[5] - 378558 | 0;
      a = (a << 4 | a >>> 28) + b | 0;
      d += (a ^ b ^ c) + k[8] - 2022574463 | 0;
      d = (d << 11 | d >>> 21) + a | 0;
      c += (d ^ a ^ b) + k[11] + 1839030562 | 0;
      c = (c << 16 | c >>> 16) + d | 0;
      b += (c ^ d ^ a) + k[14] - 35309556 | 0;
      b = (b << 23 | b >>> 9) + c | 0;
      a += (b ^ c ^ d) + k[1] - 1530992060 | 0;
      a = (a << 4 | a >>> 28) + b | 0;
      d += (a ^ b ^ c) + k[4] + 1272893353 | 0;
      d = (d << 11 | d >>> 21) + a | 0;
      c += (d ^ a ^ b) + k[7] - 155497632 | 0;
      c = (c << 16 | c >>> 16) + d | 0;
      b += (c ^ d ^ a) + k[10] - 1094730640 | 0;
      b = (b << 23 | b >>> 9) + c | 0;
      a += (b ^ c ^ d) + k[13] + 681279174 | 0;
      a = (a << 4 | a >>> 28) + b | 0;
      d += (a ^ b ^ c) + k[0] - 358537222 | 0;
      d = (d << 11 | d >>> 21) + a | 0;
      c += (d ^ a ^ b) + k[3] - 722521979 | 0;
      c = (c << 16 | c >>> 16) + d | 0;
      b += (c ^ d ^ a) + k[6] + 76029189 | 0;
      b = (b << 23 | b >>> 9) + c | 0;
      a += (b ^ c ^ d) + k[9] - 640364487 | 0;
      a = (a << 4 | a >>> 28) + b | 0;
      d += (a ^ b ^ c) + k[12] - 421815835 | 0;
      d = (d << 11 | d >>> 21) + a | 0;
      c += (d ^ a ^ b) + k[15] + 530742520 | 0;
      c = (c << 16 | c >>> 16) + d | 0;
      b += (c ^ d ^ a) + k[2] - 995338651 | 0;
      b = (b << 23 | b >>> 9) + c | 0;
      a += (c ^ (b | ~d)) + k[0] - 198630844 | 0;
      a = (a << 6 | a >>> 26) + b | 0;
      d += (b ^ (a | ~c)) + k[7] + 1126891415 | 0;
      d = (d << 10 | d >>> 22) + a | 0;
      c += (a ^ (d | ~b)) + k[14] - 1416354905 | 0;
      c = (c << 15 | c >>> 17) + d | 0;
      b += (d ^ (c | ~a)) + k[5] - 57434055 | 0;
      b = (b << 21 | b >>> 11) + c | 0;
      a += (c ^ (b | ~d)) + k[12] + 1700485571 | 0;
      a = (a << 6 | a >>> 26) + b | 0;
      d += (b ^ (a | ~c)) + k[3] - 1894986606 | 0;
      d = (d << 10 | d >>> 22) + a | 0;
      c += (a ^ (d | ~b)) + k[10] - 1051523 | 0;
      c = (c << 15 | c >>> 17) + d | 0;
      b += (d ^ (c | ~a)) + k[1] - 2054922799 | 0;
      b = (b << 21 | b >>> 11) + c | 0;
      a += (c ^ (b | ~d)) + k[8] + 1873313359 | 0;
      a = (a << 6 | a >>> 26) + b | 0;
      d += (b ^ (a | ~c)) + k[15] - 30611744 | 0;
      d = (d << 10 | d >>> 22) + a | 0;
      c += (a ^ (d | ~b)) + k[6] - 1560198380 | 0;
      c = (c << 15 | c >>> 17) + d | 0;
      b += (d ^ (c | ~a)) + k[13] + 1309151649 | 0;
      b = (b << 21 | b >>> 11) + c | 0;
      a += (c ^ (b | ~d)) + k[4] - 145523070 | 0;
      a = (a << 6 | a >>> 26) + b | 0;
      d += (b ^ (a | ~c)) + k[11] - 1120210379 | 0;
      d = (d << 10 | d >>> 22) + a | 0;
      c += (a ^ (d | ~b)) + k[2] + 718787259 | 0;
      c = (c << 15 | c >>> 17) + d | 0;
      b += (d ^ (c | ~a)) + k[9] - 343485551 | 0;
      b = (b << 21 | b >>> 11) + c | 0;
      x[0] = a + x[0] | 0;
      x[1] = b + x[1] | 0;
      x[2] = c + x[2] | 0;
      x[3] = d + x[3] | 0;
    }
    function md5blk(s) {
      var md5blks = [], i;
      for (i = 0; i < 64; i += 4) {
        md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);
      }
      return md5blks;
    }
    function md5blk_array(a) {
      var md5blks = [], i;
      for (i = 0; i < 64; i += 4) {
        md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);
      }
      return md5blks;
    }
    function md51(s) {
      var n = s.length, state = [1732584193, -271733879, -1732584194, 271733878], i, length, tail, tmp, lo, hi;
      for (i = 64; i <= n; i += 64) {
        md5cycle(state, md5blk(s.substring(i - 64, i)));
      }
      s = s.substring(i - 64);
      length = s.length;
      tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
      for (i = 0; i < length; i += 1) {
        tail[i >> 2] |= s.charCodeAt(i) << (i % 4 << 3);
      }
      tail[i >> 2] |= 128 << (i % 4 << 3);
      if (i > 55) {
        md5cycle(state, tail);
        for (i = 0; i < 16; i += 1) {
          tail[i] = 0;
        }
      }
      tmp = n * 8;
      tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);
      lo = parseInt(tmp[2], 16);
      hi = parseInt(tmp[1], 16) || 0;
      tail[14] = lo;
      tail[15] = hi;
      md5cycle(state, tail);
      return state;
    }
    function md51_array(a) {
      var n = a.length, state = [1732584193, -271733879, -1732584194, 271733878], i, length, tail, tmp, lo, hi;
      for (i = 64; i <= n; i += 64) {
        md5cycle(state, md5blk_array(a.subarray(i - 64, i)));
      }
      a = i - 64 < n ? a.subarray(i - 64) : new Uint8Array(0);
      length = a.length;
      tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
      for (i = 0; i < length; i += 1) {
        tail[i >> 2] |= a[i] << (i % 4 << 3);
      }
      tail[i >> 2] |= 128 << (i % 4 << 3);
      if (i > 55) {
        md5cycle(state, tail);
        for (i = 0; i < 16; i += 1) {
          tail[i] = 0;
        }
      }
      tmp = n * 8;
      tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);
      lo = parseInt(tmp[2], 16);
      hi = parseInt(tmp[1], 16) || 0;
      tail[14] = lo;
      tail[15] = hi;
      md5cycle(state, tail);
      return state;
    }
    function rhex(n) {
      var s = "", j;
      for (j = 0; j < 4; j += 1) {
        s += hex_chr[n >> j * 8 + 4 & 15] + hex_chr[n >> j * 8 & 15];
      }
      return s;
    }
    function hex(x) {
      var i;
      for (i = 0; i < x.length; i += 1) {
        x[i] = rhex(x[i]);
      }
      return x.join("");
    }
    if (hex(md51("hello")) !== "5d41402abc4b2a76b9719d911017c592") ;
    if (typeof ArrayBuffer !== "undefined" && !ArrayBuffer.prototype.slice) {
      (function() {
        function clamp(val, length) {
          val = val | 0 || 0;
          if (val < 0) {
            return Math.max(val + length, 0);
          }
          return Math.min(val, length);
        }
        ArrayBuffer.prototype.slice = function(from, to) {
          var length = this.byteLength, begin = clamp(from, length), end = length, num, target, targetArray, sourceArray;
          if (to !== undefined$1) {
            end = clamp(to, length);
          }
          if (begin > end) {
            return new ArrayBuffer(0);
          }
          num = end - begin;
          target = new ArrayBuffer(num);
          targetArray = new Uint8Array(target);
          sourceArray = new Uint8Array(this, begin, num);
          targetArray.set(sourceArray);
          return target;
        };
      })();
    }
    function toUtf8(str) {
      if (/[\u0080-\uFFFF]/.test(str)) {
        str = unescape(encodeURIComponent(str));
      }
      return str;
    }
    function utf8Str2ArrayBuffer(str, returnUInt8Array) {
      var length = str.length, buff = new ArrayBuffer(length), arr = new Uint8Array(buff), i;
      for (i = 0; i < length; i += 1) {
        arr[i] = str.charCodeAt(i);
      }
      return returnUInt8Array ? arr : buff;
    }
    function arrayBuffer2Utf8Str(buff) {
      return String.fromCharCode.apply(null, new Uint8Array(buff));
    }
    function concatenateArrayBuffers(first, second, returnUInt8Array) {
      var result = new Uint8Array(first.byteLength + second.byteLength);
      result.set(new Uint8Array(first));
      result.set(new Uint8Array(second), first.byteLength);
      return returnUInt8Array ? result : result.buffer;
    }
    function hexToBinaryString(hex2) {
      var bytes = [], length = hex2.length, x;
      for (x = 0; x < length - 1; x += 2) {
        bytes.push(parseInt(hex2.substr(x, 2), 16));
      }
      return String.fromCharCode.apply(String, bytes);
    }
    function SparkMD52() {
      this.reset();
    }
    SparkMD52.prototype.append = function(str) {
      this.appendBinary(toUtf8(str));
      return this;
    };
    SparkMD52.prototype.appendBinary = function(contents) {
      this._buff += contents;
      this._length += contents.length;
      var length = this._buff.length, i;
      for (i = 64; i <= length; i += 64) {
        md5cycle(this._hash, md5blk(this._buff.substring(i - 64, i)));
      }
      this._buff = this._buff.substring(i - 64);
      return this;
    };
    SparkMD52.prototype.end = function(raw2) {
      var buff = this._buff, length = buff.length, i, tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], ret;
      for (i = 0; i < length; i += 1) {
        tail[i >> 2] |= buff.charCodeAt(i) << (i % 4 << 3);
      }
      this._finish(tail, length);
      ret = hex(this._hash);
      if (raw2) {
        ret = hexToBinaryString(ret);
      }
      this.reset();
      return ret;
    };
    SparkMD52.prototype.reset = function() {
      this._buff = "";
      this._length = 0;
      this._hash = [1732584193, -271733879, -1732584194, 271733878];
      return this;
    };
    SparkMD52.prototype.getState = function() {
      return {
        buff: this._buff,
        length: this._length,
        hash: this._hash.slice()
      };
    };
    SparkMD52.prototype.setState = function(state) {
      this._buff = state.buff;
      this._length = state.length;
      this._hash = state.hash;
      return this;
    };
    SparkMD52.prototype.destroy = function() {
      delete this._hash;
      delete this._buff;
      delete this._length;
    };
    SparkMD52.prototype._finish = function(tail, length) {
      var i = length, tmp, lo, hi;
      tail[i >> 2] |= 128 << (i % 4 << 3);
      if (i > 55) {
        md5cycle(this._hash, tail);
        for (i = 0; i < 16; i += 1) {
          tail[i] = 0;
        }
      }
      tmp = this._length * 8;
      tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);
      lo = parseInt(tmp[2], 16);
      hi = parseInt(tmp[1], 16) || 0;
      tail[14] = lo;
      tail[15] = hi;
      md5cycle(this._hash, tail);
    };
    SparkMD52.hash = function(str, raw2) {
      return SparkMD52.hashBinary(toUtf8(str), raw2);
    };
    SparkMD52.hashBinary = function(content, raw2) {
      var hash = md51(content), ret = hex(hash);
      return raw2 ? hexToBinaryString(ret) : ret;
    };
    SparkMD52.ArrayBuffer = function() {
      this.reset();
    };
    SparkMD52.ArrayBuffer.prototype.append = function(arr) {
      var buff = concatenateArrayBuffers(this._buff.buffer, arr, true), length = buff.length, i;
      this._length += arr.byteLength;
      for (i = 64; i <= length; i += 64) {
        md5cycle(this._hash, md5blk_array(buff.subarray(i - 64, i)));
      }
      this._buff = i - 64 < length ? new Uint8Array(buff.buffer.slice(i - 64)) : new Uint8Array(0);
      return this;
    };
    SparkMD52.ArrayBuffer.prototype.end = function(raw2) {
      var buff = this._buff, length = buff.length, tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], i, ret;
      for (i = 0; i < length; i += 1) {
        tail[i >> 2] |= buff[i] << (i % 4 << 3);
      }
      this._finish(tail, length);
      ret = hex(this._hash);
      if (raw2) {
        ret = hexToBinaryString(ret);
      }
      this.reset();
      return ret;
    };
    SparkMD52.ArrayBuffer.prototype.reset = function() {
      this._buff = new Uint8Array(0);
      this._length = 0;
      this._hash = [1732584193, -271733879, -1732584194, 271733878];
      return this;
    };
    SparkMD52.ArrayBuffer.prototype.getState = function() {
      var state = SparkMD52.prototype.getState.call(this);
      state.buff = arrayBuffer2Utf8Str(state.buff);
      return state;
    };
    SparkMD52.ArrayBuffer.prototype.setState = function(state) {
      state.buff = utf8Str2ArrayBuffer(state.buff, true);
      return SparkMD52.prototype.setState.call(this, state);
    };
    SparkMD52.ArrayBuffer.prototype.destroy = SparkMD52.prototype.destroy;
    SparkMD52.ArrayBuffer.prototype._finish = SparkMD52.prototype._finish;
    SparkMD52.ArrayBuffer.hash = function(arr, raw2) {
      var hash = md51_array(new Uint8Array(arr)), ret = hex(hash);
      return raw2 ? hexToBinaryString(ret) : ret;
    };
    return SparkMD52;
  });
})(sparkMd5);
var SparkMD5 = sparkMd5.exports;
var fileSlice = File.prototype.slice || File.prototype.mozSlice || File.prototype.webkitSlice;
var FileChecksum = class _FileChecksum {
  static create(file, callback) {
    const instance = new _FileChecksum(file);
    instance.create(callback);
  }
  constructor(file) {
    this.file = file;
    this.chunkSize = 2097152;
    this.chunkCount = Math.ceil(this.file.size / this.chunkSize);
    this.chunkIndex = 0;
  }
  create(callback) {
    this.callback = callback;
    this.md5Buffer = new SparkMD5.ArrayBuffer();
    this.fileReader = new FileReader();
    this.fileReader.addEventListener("load", (event2) => this.fileReaderDidLoad(event2));
    this.fileReader.addEventListener("error", (event2) => this.fileReaderDidError(event2));
    this.readNextChunk();
  }
  fileReaderDidLoad(event2) {
    this.md5Buffer.append(event2.target.result);
    if (!this.readNextChunk()) {
      const binaryDigest = this.md5Buffer.end(true);
      const base64digest = btoa(binaryDigest);
      this.callback(null, base64digest);
    }
  }
  fileReaderDidError(event2) {
    this.callback(`Error reading ${this.file.name}`);
  }
  readNextChunk() {
    if (this.chunkIndex < this.chunkCount || this.chunkIndex == 0 && this.chunkCount == 0) {
      const start4 = this.chunkIndex * this.chunkSize;
      const end = Math.min(start4 + this.chunkSize, this.file.size);
      const bytes = fileSlice.call(this.file, start4, end);
      this.fileReader.readAsArrayBuffer(bytes);
      this.chunkIndex++;
      return true;
    } else {
      return false;
    }
  }
};
function getMetaValue(name) {
  const element = findElement(document.head, `meta[name="${name}"]`);
  if (element) {
    return element.getAttribute("content");
  }
}
function findElements(root, selector) {
  if (typeof root == "string") {
    selector = root;
    root = document;
  }
  const elements = root.querySelectorAll(selector);
  return toArray(elements);
}
function findElement(root, selector) {
  if (typeof root == "string") {
    selector = root;
    root = document;
  }
  return root.querySelector(selector);
}
function dispatchEvent2(element, type, eventInit = {}) {
  const { disabled } = element;
  const { bubbles, cancelable, detail } = eventInit;
  const event2 = document.createEvent("Event");
  event2.initEvent(type, bubbles || true, cancelable || true);
  event2.detail = detail || {};
  try {
    element.disabled = false;
    element.dispatchEvent(event2);
  } finally {
    element.disabled = disabled;
  }
  return event2;
}
function toArray(value) {
  if (Array.isArray(value)) {
    return value;
  } else if (Array.from) {
    return Array.from(value);
  } else {
    return [].slice.call(value);
  }
}
var BlobRecord = class {
  constructor(file, checksum, url, customHeaders = {}) {
    this.file = file;
    this.attributes = {
      filename: file.name,
      content_type: file.type || "application/octet-stream",
      byte_size: file.size,
      checksum
    };
    this.xhr = new XMLHttpRequest();
    this.xhr.open("POST", url, true);
    this.xhr.responseType = "json";
    this.xhr.setRequestHeader("Content-Type", "application/json");
    this.xhr.setRequestHeader("Accept", "application/json");
    this.xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
    Object.keys(customHeaders).forEach((headerKey) => {
      this.xhr.setRequestHeader(headerKey, customHeaders[headerKey]);
    });
    const csrfToken = getMetaValue("csrf-token");
    if (csrfToken != void 0) {
      this.xhr.setRequestHeader("X-CSRF-Token", csrfToken);
    }
    this.xhr.addEventListener("load", (event2) => this.requestDidLoad(event2));
    this.xhr.addEventListener("error", (event2) => this.requestDidError(event2));
  }
  get status() {
    return this.xhr.status;
  }
  get response() {
    const { responseType, response } = this.xhr;
    if (responseType == "json") {
      return response;
    } else {
      return JSON.parse(response);
    }
  }
  create(callback) {
    this.callback = callback;
    this.xhr.send(JSON.stringify({
      blob: this.attributes
    }));
  }
  requestDidLoad(event2) {
    if (this.status >= 200 && this.status < 300) {
      const { response } = this;
      const { direct_upload } = response;
      delete response.direct_upload;
      this.attributes = response;
      this.directUploadData = direct_upload;
      this.callback(null, this.toJSON());
    } else {
      this.requestDidError(event2);
    }
  }
  requestDidError(event2) {
    this.callback(`Error creating Blob for "${this.file.name}". Status: ${this.status}`);
  }
  toJSON() {
    const result = {};
    for (const key in this.attributes) {
      result[key] = this.attributes[key];
    }
    return result;
  }
};
var BlobUpload = class {
  constructor(blob) {
    this.blob = blob;
    this.file = blob.file;
    const { url, headers } = blob.directUploadData;
    this.xhr = new XMLHttpRequest();
    this.xhr.open("PUT", url, true);
    this.xhr.responseType = "text";
    for (const key in headers) {
      this.xhr.setRequestHeader(key, headers[key]);
    }
    this.xhr.addEventListener("load", (event2) => this.requestDidLoad(event2));
    this.xhr.addEventListener("error", (event2) => this.requestDidError(event2));
  }
  create(callback) {
    this.callback = callback;
    this.xhr.send(this.file.slice());
  }
  requestDidLoad(event2) {
    const { status, response } = this.xhr;
    if (status >= 200 && status < 300) {
      this.callback(null, response);
    } else {
      this.requestDidError(event2);
    }
  }
  requestDidError(event2) {
    this.callback(`Error storing "${this.file.name}". Status: ${this.xhr.status}`);
  }
};
var id = 0;
var DirectUpload = class {
  constructor(file, url, delegate, customHeaders = {}) {
    this.id = ++id;
    this.file = file;
    this.url = url;
    this.delegate = delegate;
    this.customHeaders = customHeaders;
  }
  create(callback) {
    FileChecksum.create(this.file, (error3, checksum) => {
      if (error3) {
        callback(error3);
        return;
      }
      const blob = new BlobRecord(this.file, checksum, this.url, this.customHeaders);
      notify(this.delegate, "directUploadWillCreateBlobWithXHR", blob.xhr);
      blob.create((error4) => {
        if (error4) {
          callback(error4);
        } else {
          const upload = new BlobUpload(blob);
          notify(this.delegate, "directUploadWillStoreFileWithXHR", upload.xhr);
          upload.create((error5) => {
            if (error5) {
              callback(error5);
            } else {
              callback(null, blob.toJSON());
            }
          });
        }
      });
    });
  }
};
function notify(object, methodName, ...messages) {
  if (object && typeof object[methodName] == "function") {
    return object[methodName](...messages);
  }
}
var DirectUploadController = class {
  constructor(input, file) {
    this.input = input;
    this.file = file;
    this.directUpload = new DirectUpload(this.file, this.url, this);
    this.dispatch("initialize");
  }
  start(callback) {
    const hiddenInput = document.createElement("input");
    hiddenInput.type = "hidden";
    hiddenInput.name = this.input.name;
    this.input.insertAdjacentElement("beforebegin", hiddenInput);
    this.dispatch("start");
    this.directUpload.create((error3, attributes) => {
      if (error3) {
        hiddenInput.parentNode.removeChild(hiddenInput);
        this.dispatchError(error3);
      } else {
        hiddenInput.value = attributes.signed_id;
      }
      this.dispatch("end");
      callback(error3);
    });
  }
  uploadRequestDidProgress(event2) {
    const progress = event2.loaded / event2.total * 100;
    if (progress) {
      this.dispatch("progress", {
        progress
      });
    }
  }
  get url() {
    return this.input.getAttribute("data-direct-upload-url");
  }
  dispatch(name, detail = {}) {
    detail.file = this.file;
    detail.id = this.directUpload.id;
    return dispatchEvent2(this.input, `direct-upload:${name}`, {
      detail
    });
  }
  dispatchError(error3) {
    const event2 = this.dispatch("error", {
      error: error3
    });
    if (!event2.defaultPrevented) {
      alert(error3);
    }
  }
  directUploadWillCreateBlobWithXHR(xhr) {
    this.dispatch("before-blob-request", {
      xhr
    });
  }
  directUploadWillStoreFileWithXHR(xhr) {
    this.dispatch("before-storage-request", {
      xhr
    });
    xhr.upload.addEventListener("progress", (event2) => this.uploadRequestDidProgress(event2));
  }
};
var inputSelector = "input[type=file][data-direct-upload-url]:not([disabled])";
var DirectUploadsController = class {
  constructor(form) {
    this.form = form;
    this.inputs = findElements(form, inputSelector).filter((input) => input.files.length);
  }
  start(callback) {
    const controllers = this.createDirectUploadControllers();
    const startNextController = () => {
      const controller = controllers.shift();
      if (controller) {
        controller.start((error3) => {
          if (error3) {
            callback(error3);
            this.dispatch("end");
          } else {
            startNextController();
          }
        });
      } else {
        callback();
        this.dispatch("end");
      }
    };
    this.dispatch("start");
    startNextController();
  }
  createDirectUploadControllers() {
    const controllers = [];
    this.inputs.forEach((input) => {
      toArray(input.files).forEach((file) => {
        const controller = new DirectUploadController(input, file);
        controllers.push(controller);
      });
    });
    return controllers;
  }
  dispatch(name, detail = {}) {
    return dispatchEvent2(this.form, `direct-uploads:${name}`, {
      detail
    });
  }
};
var processingAttribute = "data-direct-uploads-processing";
var submitButtonsByForm = /* @__PURE__ */ new WeakMap();
var started = false;
function start() {
  if (!started) {
    started = true;
    document.addEventListener("click", didClick, true);
    document.addEventListener("submit", didSubmitForm, true);
    document.addEventListener("ajax:before", didSubmitRemoteElement);
  }
}
function didClick(event2) {
  const button = event2.target.closest("button, input");
  if (button && button.type === "submit" && button.form) {
    submitButtonsByForm.set(button.form, button);
  }
}
function didSubmitForm(event2) {
  handleFormSubmissionEvent(event2);
}
function didSubmitRemoteElement(event2) {
  if (event2.target.tagName == "FORM") {
    handleFormSubmissionEvent(event2);
  }
}
function handleFormSubmissionEvent(event2) {
  const form = event2.target;
  if (form.hasAttribute(processingAttribute)) {
    event2.preventDefault();
    return;
  }
  const controller = new DirectUploadsController(form);
  const { inputs } = controller;
  if (inputs.length) {
    event2.preventDefault();
    form.setAttribute(processingAttribute, "");
    inputs.forEach(disable);
    controller.start((error3) => {
      form.removeAttribute(processingAttribute);
      if (error3) {
        inputs.forEach(enable);
      } else {
        submitForm(form);
      }
    });
  }
}
function submitForm(form) {
  let button = submitButtonsByForm.get(form) || findElement(form, "input[type=submit], button[type=submit]");
  if (button) {
    const { disabled } = button;
    button.disabled = false;
    button.focus();
    button.click();
    button.disabled = disabled;
  } else {
    button = document.createElement("input");
    button.type = "submit";
    button.style.display = "none";
    form.appendChild(button);
    button.click();
    form.removeChild(button);
  }
  submitButtonsByForm.delete(form);
}
function disable(input) {
  input.disabled = true;
}
function enable(input) {
  input.disabled = false;
}
function autostart() {
  if (window.ActiveStorage) {
    start();
  }
}
setTimeout(autostart, 1);

// node_modules/alpinejs/dist/module.esm.js
var flushPending = false;
var flushing = false;
var queue = [];
var lastFlushedIndex = -1;
function scheduler(callback) {
  queueJob(callback);
}
function queueJob(job) {
  if (!queue.includes(job))
    queue.push(job);
  queueFlush();
}
function dequeueJob(job) {
  let index = queue.indexOf(job);
  if (index !== -1 && index > lastFlushedIndex)
    queue.splice(index, 1);
}
function queueFlush() {
  if (!flushing && !flushPending) {
    flushPending = true;
    queueMicrotask(flushJobs);
  }
}
function flushJobs() {
  flushPending = false;
  flushing = true;
  for (let i = 0; i < queue.length; i++) {
    queue[i]();
    lastFlushedIndex = i;
  }
  queue.length = 0;
  lastFlushedIndex = -1;
  flushing = false;
}
var reactive;
var effect;
var release;
var raw;
var shouldSchedule = true;
function disableEffectScheduling(callback) {
  shouldSchedule = false;
  callback();
  shouldSchedule = true;
}
function setReactivityEngine(engine) {
  reactive = engine.reactive;
  release = engine.release;
  effect = (callback) => engine.effect(callback, { scheduler: (task) => {
    if (shouldSchedule) {
      scheduler(task);
    } else {
      task();
    }
  } });
  raw = engine.raw;
}
function overrideEffect(override) {
  effect = override;
}
function elementBoundEffect(el) {
  let cleanup2 = () => {
  };
  let wrappedEffect = (callback) => {
    let effectReference = effect(callback);
    if (!el._x_effects) {
      el._x_effects = /* @__PURE__ */ new Set();
      el._x_runEffects = () => {
        el._x_effects.forEach((i) => i());
      };
    }
    el._x_effects.add(effectReference);
    cleanup2 = () => {
      if (effectReference === void 0)
        return;
      el._x_effects.delete(effectReference);
      release(effectReference);
    };
    return effectReference;
  };
  return [wrappedEffect, () => {
    cleanup2();
  }];
}
function watch(getter, callback) {
  let firstTime = true;
  let oldValue;
  let effectReference = effect(() => {
    let value = getter();
    JSON.stringify(value);
    if (!firstTime) {
      queueMicrotask(() => {
        callback(value, oldValue);
        oldValue = value;
      });
    } else {
      oldValue = value;
    }
    firstTime = false;
  });
  return () => release(effectReference);
}
var onAttributeAddeds = [];
var onElRemoveds = [];
var onElAddeds = [];
function onElAdded(callback) {
  onElAddeds.push(callback);
}
function onElRemoved(el, callback) {
  if (typeof callback === "function") {
    if (!el._x_cleanups)
      el._x_cleanups = [];
    el._x_cleanups.push(callback);
  } else {
    callback = el;
    onElRemoveds.push(callback);
  }
}
function onAttributesAdded(callback) {
  onAttributeAddeds.push(callback);
}
function onAttributeRemoved(el, name, callback) {
  if (!el._x_attributeCleanups)
    el._x_attributeCleanups = {};
  if (!el._x_attributeCleanups[name])
    el._x_attributeCleanups[name] = [];
  el._x_attributeCleanups[name].push(callback);
}
function cleanupAttributes(el, names) {
  if (!el._x_attributeCleanups)
    return;
  Object.entries(el._x_attributeCleanups).forEach(([name, value]) => {
    if (names === void 0 || names.includes(name)) {
      value.forEach((i) => i());
      delete el._x_attributeCleanups[name];
    }
  });
}
function cleanupElement(el) {
  el._x_effects?.forEach(dequeueJob);
  while (el._x_cleanups?.length)
    el._x_cleanups.pop()();
}
var observer = new MutationObserver(onMutate);
var currentlyObserving = false;
function startObservingMutations() {
  observer.observe(document, { subtree: true, childList: true, attributes: true, attributeOldValue: true });
  currentlyObserving = true;
}
function stopObservingMutations() {
  flushObserver();
  observer.disconnect();
  currentlyObserving = false;
}
var queuedMutations = [];
function flushObserver() {
  let records = observer.takeRecords();
  queuedMutations.push(() => records.length > 0 && onMutate(records));
  let queueLengthWhenTriggered = queuedMutations.length;
  queueMicrotask(() => {
    if (queuedMutations.length === queueLengthWhenTriggered) {
      while (queuedMutations.length > 0)
        queuedMutations.shift()();
    }
  });
}
function mutateDom(callback) {
  if (!currentlyObserving)
    return callback();
  stopObservingMutations();
  let result = callback();
  startObservingMutations();
  return result;
}
var isCollecting = false;
var deferredMutations = [];
function deferMutations() {
  isCollecting = true;
}
function flushAndStopDeferringMutations() {
  isCollecting = false;
  onMutate(deferredMutations);
  deferredMutations = [];
}
function onMutate(mutations) {
  if (isCollecting) {
    deferredMutations = deferredMutations.concat(mutations);
    return;
  }
  let addedNodes = [];
  let removedNodes = /* @__PURE__ */ new Set();
  let addedAttributes = /* @__PURE__ */ new Map();
  let removedAttributes = /* @__PURE__ */ new Map();
  for (let i = 0; i < mutations.length; i++) {
    if (mutations[i].target._x_ignoreMutationObserver)
      continue;
    if (mutations[i].type === "childList") {
      mutations[i].removedNodes.forEach((node) => {
        if (node.nodeType !== 1)
          return;
        if (!node._x_marker)
          return;
        removedNodes.add(node);
      });
      mutations[i].addedNodes.forEach((node) => {
        if (node.nodeType !== 1)
          return;
        if (removedNodes.has(node)) {
          removedNodes.delete(node);
          return;
        }
        if (node._x_marker)
          return;
        addedNodes.push(node);
      });
    }
    if (mutations[i].type === "attributes") {
      let el = mutations[i].target;
      let name = mutations[i].attributeName;
      let oldValue = mutations[i].oldValue;
      let add22 = () => {
        if (!addedAttributes.has(el))
          addedAttributes.set(el, []);
        addedAttributes.get(el).push({ name, value: el.getAttribute(name) });
      };
      let remove = () => {
        if (!removedAttributes.has(el))
          removedAttributes.set(el, []);
        removedAttributes.get(el).push(name);
      };
      if (el.hasAttribute(name) && oldValue === null) {
        add22();
      } else if (el.hasAttribute(name)) {
        remove();
        add22();
      } else {
        remove();
      }
    }
  }
  removedAttributes.forEach((attrs, el) => {
    cleanupAttributes(el, attrs);
  });
  addedAttributes.forEach((attrs, el) => {
    onAttributeAddeds.forEach((i) => i(el, attrs));
  });
  for (let node of removedNodes) {
    if (addedNodes.some((i) => i.contains(node)))
      continue;
    onElRemoveds.forEach((i) => i(node));
  }
  for (let node of addedNodes) {
    if (!node.isConnected)
      continue;
    onElAddeds.forEach((i) => i(node));
  }
  addedNodes = null;
  removedNodes = null;
  addedAttributes = null;
  removedAttributes = null;
}
function scope(node) {
  return mergeProxies(closestDataStack(node));
}
function addScopeToNode(node, data2, referenceNode) {
  node._x_dataStack = [data2, ...closestDataStack(referenceNode || node)];
  return () => {
    node._x_dataStack = node._x_dataStack.filter((i) => i !== data2);
  };
}
function closestDataStack(node) {
  if (node._x_dataStack)
    return node._x_dataStack;
  if (typeof ShadowRoot === "function" && node instanceof ShadowRoot) {
    return closestDataStack(node.host);
  }
  if (!node.parentNode) {
    return [];
  }
  return closestDataStack(node.parentNode);
}
function mergeProxies(objects) {
  return new Proxy({ objects }, mergeProxyTrap);
}
var mergeProxyTrap = {
  ownKeys({ objects }) {
    return Array.from(
      new Set(objects.flatMap((i) => Object.keys(i)))
    );
  },
  has({ objects }, name) {
    if (name == Symbol.unscopables)
      return false;
    return objects.some(
      (obj) => Object.prototype.hasOwnProperty.call(obj, name) || Reflect.has(obj, name)
    );
  },
  get({ objects }, name, thisProxy) {
    if (name == "toJSON")
      return collapseProxies;
    return Reflect.get(
      objects.find(
        (obj) => Reflect.has(obj, name)
      ) || {},
      name,
      thisProxy
    );
  },
  set({ objects }, name, value, thisProxy) {
    const target = objects.find(
      (obj) => Object.prototype.hasOwnProperty.call(obj, name)
    ) || objects[objects.length - 1];
    const descriptor = Object.getOwnPropertyDescriptor(target, name);
    if (descriptor?.set && descriptor?.get)
      return descriptor.set.call(thisProxy, value) || true;
    return Reflect.set(target, name, value);
  }
};
function collapseProxies() {
  let keys = Reflect.ownKeys(this);
  return keys.reduce((acc, key) => {
    acc[key] = Reflect.get(this, key);
    return acc;
  }, {});
}
function initInterceptors(data2) {
  let isObject2 = (val) => typeof val === "object" && !Array.isArray(val) && val !== null;
  let recurse = (obj, basePath = "") => {
    Object.entries(Object.getOwnPropertyDescriptors(obj)).forEach(([key, { value, enumerable }]) => {
      if (enumerable === false || value === void 0)
        return;
      if (typeof value === "object" && value !== null && value.__v_skip)
        return;
      let path = basePath === "" ? key : `${basePath}.${key}`;
      if (typeof value === "object" && value !== null && value._x_interceptor) {
        obj[key] = value.initialize(data2, path, key);
      } else {
        if (isObject2(value) && value !== obj && !(value instanceof Element)) {
          recurse(value, path);
        }
      }
    });
  };
  return recurse(data2);
}
function interceptor(callback, mutateObj = () => {
}) {
  let obj = {
    initialValue: void 0,
    _x_interceptor: true,
    initialize(data2, path, key) {
      return callback(this.initialValue, () => get(data2, path), (value) => set(data2, path, value), path, key);
    }
  };
  mutateObj(obj);
  return (initialValue) => {
    if (typeof initialValue === "object" && initialValue !== null && initialValue._x_interceptor) {
      let initialize = obj.initialize.bind(obj);
      obj.initialize = (data2, path, key) => {
        let innerValue = initialValue.initialize(data2, path, key);
        obj.initialValue = innerValue;
        return initialize(data2, path, key);
      };
    } else {
      obj.initialValue = initialValue;
    }
    return obj;
  };
}
function get(obj, path) {
  return path.split(".").reduce((carry, segment) => carry[segment], obj);
}
function set(obj, path, value) {
  if (typeof path === "string")
    path = path.split(".");
  if (path.length === 1)
    obj[path[0]] = value;
  else if (path.length === 0)
    throw error;
  else {
    if (obj[path[0]])
      return set(obj[path[0]], path.slice(1), value);
    else {
      obj[path[0]] = {};
      return set(obj[path[0]], path.slice(1), value);
    }
  }
}
var magics = {};
function magic(name, callback) {
  magics[name] = callback;
}
function injectMagics(obj, el) {
  let memoizedUtilities = getUtilities(el);
  Object.entries(magics).forEach(([name, callback]) => {
    Object.defineProperty(obj, `$${name}`, {
      get() {
        return callback(el, memoizedUtilities);
      },
      enumerable: false
    });
  });
  return obj;
}
function getUtilities(el) {
  let [utilities, cleanup2] = getElementBoundUtilities(el);
  let utils = { interceptor, ...utilities };
  onElRemoved(el, cleanup2);
  return utils;
}
function tryCatch(el, expression, callback, ...args) {
  try {
    return callback(...args);
  } catch (e) {
    handleError(e, el, expression);
  }
}
function handleError(error22, el, expression = void 0) {
  error22 = Object.assign(
    error22 ?? { message: "No error message given." },
    { el, expression }
  );
  console.warn(`Alpine Expression Error: ${error22.message}

${expression ? 'Expression: "' + expression + '"\n\n' : ""}`, el);
  setTimeout(() => {
    throw error22;
  }, 0);
}
var shouldAutoEvaluateFunctions = true;
function dontAutoEvaluateFunctions(callback) {
  let cache2 = shouldAutoEvaluateFunctions;
  shouldAutoEvaluateFunctions = false;
  let result = callback();
  shouldAutoEvaluateFunctions = cache2;
  return result;
}
function evaluate(el, expression, extras = {}) {
  let result;
  evaluateLater(el, expression)((value) => result = value, extras);
  return result;
}
function evaluateLater(...args) {
  return theEvaluatorFunction(...args);
}
var theEvaluatorFunction = normalEvaluator;
function setEvaluator(newEvaluator) {
  theEvaluatorFunction = newEvaluator;
}
function normalEvaluator(el, expression) {
  let overriddenMagics = {};
  injectMagics(overriddenMagics, el);
  let dataStack = [overriddenMagics, ...closestDataStack(el)];
  let evaluator = typeof expression === "function" ? generateEvaluatorFromFunction(dataStack, expression) : generateEvaluatorFromString(dataStack, expression, el);
  return tryCatch.bind(null, el, expression, evaluator);
}
function generateEvaluatorFromFunction(dataStack, func) {
  return (receiver = () => {
  }, { scope: scope2 = {}, params = [] } = {}) => {
    let result = func.apply(mergeProxies([scope2, ...dataStack]), params);
    runIfTypeOfFunction(receiver, result);
  };
}
var evaluatorMemo = {};
function generateFunctionFromString(expression, el) {
  if (evaluatorMemo[expression]) {
    return evaluatorMemo[expression];
  }
  let AsyncFunction = Object.getPrototypeOf(async function() {
  }).constructor;
  let rightSideSafeExpression = /^[\n\s]*if.*\(.*\)/.test(expression.trim()) || /^(let|const)\s/.test(expression.trim()) ? `(async()=>{ ${expression} })()` : expression;
  const safeAsyncFunction = () => {
    try {
      let func2 = new AsyncFunction(
        ["__self", "scope"],
        `with (scope) { __self.result = ${rightSideSafeExpression} }; __self.finished = true; return __self.result;`
      );
      Object.defineProperty(func2, "name", {
        value: `[Alpine] ${expression}`
      });
      return func2;
    } catch (error22) {
      handleError(error22, el, expression);
      return Promise.resolve();
    }
  };
  let func = safeAsyncFunction();
  evaluatorMemo[expression] = func;
  return func;
}
function generateEvaluatorFromString(dataStack, expression, el) {
  let func = generateFunctionFromString(expression, el);
  return (receiver = () => {
  }, { scope: scope2 = {}, params = [] } = {}) => {
    func.result = void 0;
    func.finished = false;
    let completeScope = mergeProxies([scope2, ...dataStack]);
    if (typeof func === "function") {
      let promise = func(func, completeScope).catch((error22) => handleError(error22, el, expression));
      if (func.finished) {
        runIfTypeOfFunction(receiver, func.result, completeScope, params, el);
        func.result = void 0;
      } else {
        promise.then((result) => {
          runIfTypeOfFunction(receiver, result, completeScope, params, el);
        }).catch((error22) => handleError(error22, el, expression)).finally(() => func.result = void 0);
      }
    }
  };
}
function runIfTypeOfFunction(receiver, value, scope2, params, el) {
  if (shouldAutoEvaluateFunctions && typeof value === "function") {
    let result = value.apply(scope2, params);
    if (result instanceof Promise) {
      result.then((i) => runIfTypeOfFunction(receiver, i, scope2, params)).catch((error22) => handleError(error22, el, value));
    } else {
      receiver(result);
    }
  } else if (typeof value === "object" && value instanceof Promise) {
    value.then((i) => receiver(i));
  } else {
    receiver(value);
  }
}
var prefixAsString = "x-";
function prefix(subject = "") {
  return prefixAsString + subject;
}
function setPrefix(newPrefix) {
  prefixAsString = newPrefix;
}
var directiveHandlers = {};
function directive(name, callback) {
  directiveHandlers[name] = callback;
  return {
    before(directive2) {
      if (!directiveHandlers[directive2]) {
        console.warn(String.raw`Cannot find directive \`${directive2}\`. \`${name}\` will use the default order of execution`);
        return;
      }
      const pos = directiveOrder.indexOf(directive2);
      directiveOrder.splice(pos >= 0 ? pos : directiveOrder.indexOf("DEFAULT"), 0, name);
    }
  };
}
function directiveExists(name) {
  return Object.keys(directiveHandlers).includes(name);
}
function directives(el, attributes, originalAttributeOverride) {
  attributes = Array.from(attributes);
  if (el._x_virtualDirectives) {
    let vAttributes = Object.entries(el._x_virtualDirectives).map(([name, value]) => ({ name, value }));
    let staticAttributes = attributesOnly(vAttributes);
    vAttributes = vAttributes.map((attribute) => {
      if (staticAttributes.find((attr) => attr.name === attribute.name)) {
        return {
          name: `x-bind:${attribute.name}`,
          value: `"${attribute.value}"`
        };
      }
      return attribute;
    });
    attributes = attributes.concat(vAttributes);
  }
  let transformedAttributeMap = {};
  let directives2 = attributes.map(toTransformedAttributes((newName, oldName) => transformedAttributeMap[newName] = oldName)).filter(outNonAlpineAttributes).map(toParsedDirectives(transformedAttributeMap, originalAttributeOverride)).sort(byPriority);
  return directives2.map((directive2) => {
    return getDirectiveHandler(el, directive2);
  });
}
function attributesOnly(attributes) {
  return Array.from(attributes).map(toTransformedAttributes()).filter((attr) => !outNonAlpineAttributes(attr));
}
var isDeferringHandlers = false;
var directiveHandlerStacks = /* @__PURE__ */ new Map();
var currentHandlerStackKey = Symbol();
function deferHandlingDirectives(callback) {
  isDeferringHandlers = true;
  let key = Symbol();
  currentHandlerStackKey = key;
  directiveHandlerStacks.set(key, []);
  let flushHandlers = () => {
    while (directiveHandlerStacks.get(key).length)
      directiveHandlerStacks.get(key).shift()();
    directiveHandlerStacks.delete(key);
  };
  let stopDeferring = () => {
    isDeferringHandlers = false;
    flushHandlers();
  };
  callback(flushHandlers);
  stopDeferring();
}
function getElementBoundUtilities(el) {
  let cleanups = [];
  let cleanup2 = (callback) => cleanups.push(callback);
  let [effect3, cleanupEffect] = elementBoundEffect(el);
  cleanups.push(cleanupEffect);
  let utilities = {
    Alpine: alpine_default,
    effect: effect3,
    cleanup: cleanup2,
    evaluateLater: evaluateLater.bind(evaluateLater, el),
    evaluate: evaluate.bind(evaluate, el)
  };
  let doCleanup = () => cleanups.forEach((i) => i());
  return [utilities, doCleanup];
}
function getDirectiveHandler(el, directive2) {
  let noop = () => {
  };
  let handler4 = directiveHandlers[directive2.type] || noop;
  let [utilities, cleanup2] = getElementBoundUtilities(el);
  onAttributeRemoved(el, directive2.original, cleanup2);
  let fullHandler = () => {
    if (el._x_ignore || el._x_ignoreSelf)
      return;
    handler4.inline && handler4.inline(el, directive2, utilities);
    handler4 = handler4.bind(handler4, el, directive2, utilities);
    isDeferringHandlers ? directiveHandlerStacks.get(currentHandlerStackKey).push(handler4) : handler4();
  };
  fullHandler.runCleanups = cleanup2;
  return fullHandler;
}
var startingWith = (subject, replacement) => ({ name, value }) => {
  if (name.startsWith(subject))
    name = name.replace(subject, replacement);
  return { name, value };
};
var into = (i) => i;
function toTransformedAttributes(callback = () => {
}) {
  return ({ name, value }) => {
    let { name: newName, value: newValue } = attributeTransformers.reduce((carry, transform) => {
      return transform(carry);
    }, { name, value });
    if (newName !== name)
      callback(newName, name);
    return { name: newName, value: newValue };
  };
}
var attributeTransformers = [];
function mapAttributes(callback) {
  attributeTransformers.push(callback);
}
function outNonAlpineAttributes({ name }) {
  return alpineAttributeRegex().test(name);
}
var alpineAttributeRegex = () => new RegExp(`^${prefixAsString}([^:^.]+)\\b`);
function toParsedDirectives(transformedAttributeMap, originalAttributeOverride) {
  return ({ name, value }) => {
    let typeMatch = name.match(alpineAttributeRegex());
    let valueMatch = name.match(/:([a-zA-Z0-9\-_:]+)/);
    let modifiers = name.match(/\.[^.\]]+(?=[^\]]*$)/g) || [];
    let original = originalAttributeOverride || transformedAttributeMap[name] || name;
    return {
      type: typeMatch ? typeMatch[1] : null,
      value: valueMatch ? valueMatch[1] : null,
      modifiers: modifiers.map((i) => i.replace(".", "")),
      expression: value,
      original
    };
  };
}
var DEFAULT = "DEFAULT";
var directiveOrder = [
  "ignore",
  "ref",
  "data",
  "id",
  "anchor",
  "bind",
  "init",
  "for",
  "model",
  "modelable",
  "transition",
  "show",
  "if",
  DEFAULT,
  "teleport"
];
function byPriority(a, b) {
  let typeA = directiveOrder.indexOf(a.type) === -1 ? DEFAULT : a.type;
  let typeB = directiveOrder.indexOf(b.type) === -1 ? DEFAULT : b.type;
  return directiveOrder.indexOf(typeA) - directiveOrder.indexOf(typeB);
}
function dispatch(el, name, detail = {}) {
  el.dispatchEvent(
    new CustomEvent(name, {
      detail,
      bubbles: true,
      // Allows events to pass the shadow DOM barrier.
      composed: true,
      cancelable: true
    })
  );
}
function walk(el, callback) {
  if (typeof ShadowRoot === "function" && el instanceof ShadowRoot) {
    Array.from(el.children).forEach((el2) => walk(el2, callback));
    return;
  }
  let skip = false;
  callback(el, () => skip = true);
  if (skip)
    return;
  let node = el.firstElementChild;
  while (node) {
    walk(node, callback, false);
    node = node.nextElementSibling;
  }
}
function warn(message, ...args) {
  console.warn(`Alpine Warning: ${message}`, ...args);
}
var started2 = false;
function start2() {
  if (started2)
    warn("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems.");
  started2 = true;
  if (!document.body)
    warn("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?");
  dispatch(document, "alpine:init");
  dispatch(document, "alpine:initializing");
  startObservingMutations();
  onElAdded((el) => initTree(el, walk));
  onElRemoved((el) => destroyTree(el));
  onAttributesAdded((el, attrs) => {
    directives(el, attrs).forEach((handle) => handle());
  });
  let outNestedComponents = (el) => !closestRoot(el.parentElement, true);
  Array.from(document.querySelectorAll(allSelectors().join(","))).filter(outNestedComponents).forEach((el) => {
    initTree(el);
  });
  dispatch(document, "alpine:initialized");
  setTimeout(() => {
    warnAboutMissingPlugins();
  });
}
var rootSelectorCallbacks = [];
var initSelectorCallbacks = [];
function rootSelectors() {
  return rootSelectorCallbacks.map((fn) => fn());
}
function allSelectors() {
  return rootSelectorCallbacks.concat(initSelectorCallbacks).map((fn) => fn());
}
function addRootSelector(selectorCallback) {
  rootSelectorCallbacks.push(selectorCallback);
}
function addInitSelector(selectorCallback) {
  initSelectorCallbacks.push(selectorCallback);
}
function closestRoot(el, includeInitSelectors = false) {
  return findClosest(el, (element) => {
    const selectors = includeInitSelectors ? allSelectors() : rootSelectors();
    if (selectors.some((selector) => element.matches(selector)))
      return true;
  });
}
function findClosest(el, callback) {
  if (!el)
    return;
  if (callback(el))
    return el;
  if (el._x_teleportBack)
    el = el._x_teleportBack;
  if (!el.parentElement)
    return;
  return findClosest(el.parentElement, callback);
}
function isRoot(el) {
  return rootSelectors().some((selector) => el.matches(selector));
}
var initInterceptors2 = [];
function interceptInit(callback) {
  initInterceptors2.push(callback);
}
var markerDispenser = 1;
function initTree(el, walker = walk, intercept = () => {
}) {
  if (findClosest(el, (i) => i._x_ignore))
    return;
  deferHandlingDirectives(() => {
    walker(el, (el2, skip) => {
      if (el2._x_marker)
        return;
      intercept(el2, skip);
      initInterceptors2.forEach((i) => i(el2, skip));
      directives(el2, el2.attributes).forEach((handle) => handle());
      if (!el2._x_ignore)
        el2._x_marker = markerDispenser++;
      el2._x_ignore && skip();
    });
  });
}
function destroyTree(root, walker = walk) {
  walker(root, (el) => {
    cleanupElement(el);
    cleanupAttributes(el);
    delete el._x_marker;
  });
}
function warnAboutMissingPlugins() {
  let pluginDirectives = [
    ["ui", "dialog", ["[x-dialog], [x-popover]"]],
    ["anchor", "anchor", ["[x-anchor]"]],
    ["sort", "sort", ["[x-sort]"]]
  ];
  pluginDirectives.forEach(([plugin2, directive2, selectors]) => {
    if (directiveExists(directive2))
      return;
    selectors.some((selector) => {
      if (document.querySelector(selector)) {
        warn(`found "${selector}", but missing ${plugin2} plugin`);
        return true;
      }
    });
  });
}
var tickStack = [];
var isHolding = false;
function nextTick(callback = () => {
}) {
  queueMicrotask(() => {
    isHolding || setTimeout(() => {
      releaseNextTicks();
    });
  });
  return new Promise((res) => {
    tickStack.push(() => {
      callback();
      res();
    });
  });
}
function releaseNextTicks() {
  isHolding = false;
  while (tickStack.length)
    tickStack.shift()();
}
function holdNextTicks() {
  isHolding = true;
}
function setClasses(el, value) {
  if (Array.isArray(value)) {
    return setClassesFromString(el, value.join(" "));
  } else if (typeof value === "object" && value !== null) {
    return setClassesFromObject(el, value);
  } else if (typeof value === "function") {
    return setClasses(el, value());
  }
  return setClassesFromString(el, value);
}
function setClassesFromString(el, classString) {
  let split = (classString2) => classString2.split(" ").filter(Boolean);
  let missingClasses = (classString2) => classString2.split(" ").filter((i) => !el.classList.contains(i)).filter(Boolean);
  let addClassesAndReturnUndo = (classes) => {
    el.classList.add(...classes);
    return () => {
      el.classList.remove(...classes);
    };
  };
  classString = classString === true ? classString = "" : classString || "";
  return addClassesAndReturnUndo(missingClasses(classString));
}
function setClassesFromObject(el, classObject) {
  let split = (classString) => classString.split(" ").filter(Boolean);
  let forAdd = Object.entries(classObject).flatMap(([classString, bool]) => bool ? split(classString) : false).filter(Boolean);
  let forRemove = Object.entries(classObject).flatMap(([classString, bool]) => !bool ? split(classString) : false).filter(Boolean);
  let added = [];
  let removed = [];
  forRemove.forEach((i) => {
    if (el.classList.contains(i)) {
      el.classList.remove(i);
      removed.push(i);
    }
  });
  forAdd.forEach((i) => {
    if (!el.classList.contains(i)) {
      el.classList.add(i);
      added.push(i);
    }
  });
  return () => {
    removed.forEach((i) => el.classList.add(i));
    added.forEach((i) => el.classList.remove(i));
  };
}
function setStyles(el, value) {
  if (typeof value === "object" && value !== null) {
    return setStylesFromObject(el, value);
  }
  return setStylesFromString(el, value);
}
function setStylesFromObject(el, value) {
  let previousStyles = {};
  Object.entries(value).forEach(([key, value2]) => {
    previousStyles[key] = el.style[key];
    if (!key.startsWith("--")) {
      key = kebabCase(key);
    }
    el.style.setProperty(key, value2);
  });
  setTimeout(() => {
    if (el.style.length === 0) {
      el.removeAttribute("style");
    }
  });
  return () => {
    setStyles(el, previousStyles);
  };
}
function setStylesFromString(el, value) {
  let cache2 = el.getAttribute("style", value);
  el.setAttribute("style", value);
  return () => {
    el.setAttribute("style", cache2 || "");
  };
}
function kebabCase(subject) {
  return subject.replace(/([a-z])([A-Z])/g, "$1-$2").toLowerCase();
}
function once(callback, fallback = () => {
}) {
  let called = false;
  return function() {
    if (!called) {
      called = true;
      callback.apply(this, arguments);
    } else {
      fallback.apply(this, arguments);
    }
  };
}
directive("transition", (el, { value, modifiers, expression }, { evaluate: evaluate2 }) => {
  if (typeof expression === "function")
    expression = evaluate2(expression);
  if (expression === false)
    return;
  if (!expression || typeof expression === "boolean") {
    registerTransitionsFromHelper(el, modifiers, value);
  } else {
    registerTransitionsFromClassString(el, expression, value);
  }
});
function registerTransitionsFromClassString(el, classString, stage) {
  registerTransitionObject(el, setClasses, "");
  let directiveStorageMap = {
    "enter": (classes) => {
      el._x_transition.enter.during = classes;
    },
    "enter-start": (classes) => {
      el._x_transition.enter.start = classes;
    },
    "enter-end": (classes) => {
      el._x_transition.enter.end = classes;
    },
    "leave": (classes) => {
      el._x_transition.leave.during = classes;
    },
    "leave-start": (classes) => {
      el._x_transition.leave.start = classes;
    },
    "leave-end": (classes) => {
      el._x_transition.leave.end = classes;
    }
  };
  directiveStorageMap[stage](classString);
}
function registerTransitionsFromHelper(el, modifiers, stage) {
  registerTransitionObject(el, setStyles);
  let doesntSpecify = !modifiers.includes("in") && !modifiers.includes("out") && !stage;
  let transitioningIn = doesntSpecify || modifiers.includes("in") || ["enter"].includes(stage);
  let transitioningOut = doesntSpecify || modifiers.includes("out") || ["leave"].includes(stage);
  if (modifiers.includes("in") && !doesntSpecify) {
    modifiers = modifiers.filter((i, index) => index < modifiers.indexOf("out"));
  }
  if (modifiers.includes("out") && !doesntSpecify) {
    modifiers = modifiers.filter((i, index) => index > modifiers.indexOf("out"));
  }
  let wantsAll = !modifiers.includes("opacity") && !modifiers.includes("scale");
  let wantsOpacity = wantsAll || modifiers.includes("opacity");
  let wantsScale = wantsAll || modifiers.includes("scale");
  let opacityValue = wantsOpacity ? 0 : 1;
  let scaleValue = wantsScale ? modifierValue(modifiers, "scale", 95) / 100 : 1;
  let delay = modifierValue(modifiers, "delay", 0) / 1e3;
  let origin = modifierValue(modifiers, "origin", "center");
  let property = "opacity, transform";
  let durationIn = modifierValue(modifiers, "duration", 150) / 1e3;
  let durationOut = modifierValue(modifiers, "duration", 75) / 1e3;
  let easing = `cubic-bezier(0.4, 0.0, 0.2, 1)`;
  if (transitioningIn) {
    el._x_transition.enter.during = {
      transformOrigin: origin,
      transitionDelay: `${delay}s`,
      transitionProperty: property,
      transitionDuration: `${durationIn}s`,
      transitionTimingFunction: easing
    };
    el._x_transition.enter.start = {
      opacity: opacityValue,
      transform: `scale(${scaleValue})`
    };
    el._x_transition.enter.end = {
      opacity: 1,
      transform: `scale(1)`
    };
  }
  if (transitioningOut) {
    el._x_transition.leave.during = {
      transformOrigin: origin,
      transitionDelay: `${delay}s`,
      transitionProperty: property,
      transitionDuration: `${durationOut}s`,
      transitionTimingFunction: easing
    };
    el._x_transition.leave.start = {
      opacity: 1,
      transform: `scale(1)`
    };
    el._x_transition.leave.end = {
      opacity: opacityValue,
      transform: `scale(${scaleValue})`
    };
  }
}
function registerTransitionObject(el, setFunction, defaultValue = {}) {
  if (!el._x_transition)
    el._x_transition = {
      enter: { during: defaultValue, start: defaultValue, end: defaultValue },
      leave: { during: defaultValue, start: defaultValue, end: defaultValue },
      in(before = () => {
      }, after = () => {
      }) {
        transition(el, setFunction, {
          during: this.enter.during,
          start: this.enter.start,
          end: this.enter.end
        }, before, after);
      },
      out(before = () => {
      }, after = () => {
      }) {
        transition(el, setFunction, {
          during: this.leave.during,
          start: this.leave.start,
          end: this.leave.end
        }, before, after);
      }
    };
}
window.Element.prototype._x_toggleAndCascadeWithTransitions = function(el, value, show, hide) {
  const nextTick2 = document.visibilityState === "visible" ? requestAnimationFrame : setTimeout;
  let clickAwayCompatibleShow = () => nextTick2(show);
  if (value) {
    if (el._x_transition && (el._x_transition.enter || el._x_transition.leave)) {
      el._x_transition.enter && (Object.entries(el._x_transition.enter.during).length || Object.entries(el._x_transition.enter.start).length || Object.entries(el._x_transition.enter.end).length) ? el._x_transition.in(show) : clickAwayCompatibleShow();
    } else {
      el._x_transition ? el._x_transition.in(show) : clickAwayCompatibleShow();
    }
    return;
  }
  el._x_hidePromise = el._x_transition ? new Promise((resolve, reject) => {
    el._x_transition.out(() => {
    }, () => resolve(hide));
    el._x_transitioning && el._x_transitioning.beforeCancel(() => reject({ isFromCancelledTransition: true }));
  }) : Promise.resolve(hide);
  queueMicrotask(() => {
    let closest = closestHide(el);
    if (closest) {
      if (!closest._x_hideChildren)
        closest._x_hideChildren = [];
      closest._x_hideChildren.push(el);
    } else {
      nextTick2(() => {
        let hideAfterChildren = (el2) => {
          let carry = Promise.all([
            el2._x_hidePromise,
            ...(el2._x_hideChildren || []).map(hideAfterChildren)
          ]).then(([i]) => i?.());
          delete el2._x_hidePromise;
          delete el2._x_hideChildren;
          return carry;
        };
        hideAfterChildren(el).catch((e) => {
          if (!e.isFromCancelledTransition)
            throw e;
        });
      });
    }
  });
};
function closestHide(el) {
  let parent = el.parentNode;
  if (!parent)
    return;
  return parent._x_hidePromise ? parent : closestHide(parent);
}
function transition(el, setFunction, { during, start: start22, end } = {}, before = () => {
}, after = () => {
}) {
  if (el._x_transitioning)
    el._x_transitioning.cancel();
  if (Object.keys(during).length === 0 && Object.keys(start22).length === 0 && Object.keys(end).length === 0) {
    before();
    after();
    return;
  }
  let undoStart, undoDuring, undoEnd;
  performTransition(el, {
    start() {
      undoStart = setFunction(el, start22);
    },
    during() {
      undoDuring = setFunction(el, during);
    },
    before,
    end() {
      undoStart();
      undoEnd = setFunction(el, end);
    },
    after,
    cleanup() {
      undoDuring();
      undoEnd();
    }
  });
}
function performTransition(el, stages) {
  let interrupted, reachedBefore, reachedEnd;
  let finish = once(() => {
    mutateDom(() => {
      interrupted = true;
      if (!reachedBefore)
        stages.before();
      if (!reachedEnd) {
        stages.end();
        releaseNextTicks();
      }
      stages.after();
      if (el.isConnected)
        stages.cleanup();
      delete el._x_transitioning;
    });
  });
  el._x_transitioning = {
    beforeCancels: [],
    beforeCancel(callback) {
      this.beforeCancels.push(callback);
    },
    cancel: once(function() {
      while (this.beforeCancels.length) {
        this.beforeCancels.shift()();
      }
      ;
      finish();
    }),
    finish
  };
  mutateDom(() => {
    stages.start();
    stages.during();
  });
  holdNextTicks();
  requestAnimationFrame(() => {
    if (interrupted)
      return;
    let duration = Number(getComputedStyle(el).transitionDuration.replace(/,.*/, "").replace("s", "")) * 1e3;
    let delay = Number(getComputedStyle(el).transitionDelay.replace(/,.*/, "").replace("s", "")) * 1e3;
    if (duration === 0)
      duration = Number(getComputedStyle(el).animationDuration.replace("s", "")) * 1e3;
    mutateDom(() => {
      stages.before();
    });
    reachedBefore = true;
    requestAnimationFrame(() => {
      if (interrupted)
        return;
      mutateDom(() => {
        stages.end();
      });
      releaseNextTicks();
      setTimeout(el._x_transitioning.finish, duration + delay);
      reachedEnd = true;
    });
  });
}
function modifierValue(modifiers, key, fallback) {
  if (modifiers.indexOf(key) === -1)
    return fallback;
  const rawValue = modifiers[modifiers.indexOf(key) + 1];
  if (!rawValue)
    return fallback;
  if (key === "scale") {
    if (isNaN(rawValue))
      return fallback;
  }
  if (key === "duration" || key === "delay") {
    let match = rawValue.match(/([0-9]+)ms/);
    if (match)
      return match[1];
  }
  if (key === "origin") {
    if (["top", "right", "left", "center", "bottom"].includes(modifiers[modifiers.indexOf(key) + 2])) {
      return [rawValue, modifiers[modifiers.indexOf(key) + 2]].join(" ");
    }
  }
  return rawValue;
}
var isCloning = false;
function skipDuringClone(callback, fallback = () => {
}) {
  return (...args) => isCloning ? fallback(...args) : callback(...args);
}
function onlyDuringClone(callback) {
  return (...args) => isCloning && callback(...args);
}
var interceptors = [];
function interceptClone(callback) {
  interceptors.push(callback);
}
function cloneNode(from, to) {
  interceptors.forEach((i) => i(from, to));
  isCloning = true;
  dontRegisterReactiveSideEffects(() => {
    initTree(to, (el, callback) => {
      callback(el, () => {
      });
    });
  });
  isCloning = false;
}
var isCloningLegacy = false;
function clone(oldEl, newEl) {
  if (!newEl._x_dataStack)
    newEl._x_dataStack = oldEl._x_dataStack;
  isCloning = true;
  isCloningLegacy = true;
  dontRegisterReactiveSideEffects(() => {
    cloneTree(newEl);
  });
  isCloning = false;
  isCloningLegacy = false;
}
function cloneTree(el) {
  let hasRunThroughFirstEl = false;
  let shallowWalker = (el2, callback) => {
    walk(el2, (el3, skip) => {
      if (hasRunThroughFirstEl && isRoot(el3))
        return skip();
      hasRunThroughFirstEl = true;
      callback(el3, skip);
    });
  };
  initTree(el, shallowWalker);
}
function dontRegisterReactiveSideEffects(callback) {
  let cache2 = effect;
  overrideEffect((callback2, el) => {
    let storedEffect = cache2(callback2);
    release(storedEffect);
    return () => {
    };
  });
  callback();
  overrideEffect(cache2);
}
function bind(el, name, value, modifiers = []) {
  if (!el._x_bindings)
    el._x_bindings = reactive({});
  el._x_bindings[name] = value;
  name = modifiers.includes("camel") ? camelCase(name) : name;
  switch (name) {
    case "value":
      bindInputValue(el, value);
      break;
    case "style":
      bindStyles(el, value);
      break;
    case "class":
      bindClasses(el, value);
      break;
    case "selected":
    case "checked":
      bindAttributeAndProperty(el, name, value);
      break;
    default:
      bindAttribute(el, name, value);
      break;
  }
}
function bindInputValue(el, value) {
  if (isRadio(el)) {
    if (el.attributes.value === void 0) {
      el.value = value;
    }
    if (window.fromModel) {
      if (typeof value === "boolean") {
        el.checked = safeParseBoolean(el.value) === value;
      } else {
        el.checked = checkedAttrLooseCompare(el.value, value);
      }
    }
  } else if (isCheckbox(el)) {
    if (Number.isInteger(value)) {
      el.value = value;
    } else if (!Array.isArray(value) && typeof value !== "boolean" && ![null, void 0].includes(value)) {
      el.value = String(value);
    } else {
      if (Array.isArray(value)) {
        el.checked = value.some((val) => checkedAttrLooseCompare(val, el.value));
      } else {
        el.checked = !!value;
      }
    }
  } else if (el.tagName === "SELECT") {
    updateSelect(el, value);
  } else {
    if (el.value === value)
      return;
    el.value = value === void 0 ? "" : value;
  }
}
function bindClasses(el, value) {
  if (el._x_undoAddedClasses)
    el._x_undoAddedClasses();
  el._x_undoAddedClasses = setClasses(el, value);
}
function bindStyles(el, value) {
  if (el._x_undoAddedStyles)
    el._x_undoAddedStyles();
  el._x_undoAddedStyles = setStyles(el, value);
}
function bindAttributeAndProperty(el, name, value) {
  bindAttribute(el, name, value);
  setPropertyIfChanged(el, name, value);
}
function bindAttribute(el, name, value) {
  if ([null, void 0, false].includes(value) && attributeShouldntBePreservedIfFalsy(name)) {
    el.removeAttribute(name);
  } else {
    if (isBooleanAttr(name))
      value = name;
    setIfChanged(el, name, value);
  }
}
function setIfChanged(el, attrName, value) {
  if (el.getAttribute(attrName) != value) {
    el.setAttribute(attrName, value);
  }
}
function setPropertyIfChanged(el, propName, value) {
  if (el[propName] !== value) {
    el[propName] = value;
  }
}
function updateSelect(el, value) {
  const arrayWrappedValue = [].concat(value).map((value2) => {
    return value2 + "";
  });
  Array.from(el.options).forEach((option) => {
    option.selected = arrayWrappedValue.includes(option.value);
  });
}
function camelCase(subject) {
  return subject.toLowerCase().replace(/-(\w)/g, (match, char) => char.toUpperCase());
}
function checkedAttrLooseCompare(valueA, valueB) {
  return valueA == valueB;
}
function safeParseBoolean(rawValue) {
  if ([1, "1", "true", "on", "yes", true].includes(rawValue)) {
    return true;
  }
  if ([0, "0", "false", "off", "no", false].includes(rawValue)) {
    return false;
  }
  return rawValue ? Boolean(rawValue) : null;
}
var booleanAttributes = /* @__PURE__ */ new Set([
  "allowfullscreen",
  "async",
  "autofocus",
  "autoplay",
  "checked",
  "controls",
  "default",
  "defer",
  "disabled",
  "formnovalidate",
  "inert",
  "ismap",
  "itemscope",
  "loop",
  "multiple",
  "muted",
  "nomodule",
  "novalidate",
  "open",
  "playsinline",
  "readonly",
  "required",
  "reversed",
  "selected",
  "shadowrootclonable",
  "shadowrootdelegatesfocus",
  "shadowrootserializable"
]);
function isBooleanAttr(attrName) {
  return booleanAttributes.has(attrName);
}
function attributeShouldntBePreservedIfFalsy(name) {
  return !["aria-pressed", "aria-checked", "aria-expanded", "aria-selected"].includes(name);
}
function getBinding(el, name, fallback) {
  if (el._x_bindings && el._x_bindings[name] !== void 0)
    return el._x_bindings[name];
  return getAttributeBinding(el, name, fallback);
}
function extractProp(el, name, fallback, extract = true) {
  if (el._x_bindings && el._x_bindings[name] !== void 0)
    return el._x_bindings[name];
  if (el._x_inlineBindings && el._x_inlineBindings[name] !== void 0) {
    let binding = el._x_inlineBindings[name];
    binding.extract = extract;
    return dontAutoEvaluateFunctions(() => {
      return evaluate(el, binding.expression);
    });
  }
  return getAttributeBinding(el, name, fallback);
}
function getAttributeBinding(el, name, fallback) {
  let attr = el.getAttribute(name);
  if (attr === null)
    return typeof fallback === "function" ? fallback() : fallback;
  if (attr === "")
    return true;
  if (isBooleanAttr(name)) {
    return !![name, "true"].includes(attr);
  }
  return attr;
}
function isCheckbox(el) {
  return el.type === "checkbox" || el.localName === "ui-checkbox" || el.localName === "ui-switch";
}
function isRadio(el) {
  return el.type === "radio" || el.localName === "ui-radio";
}
function debounce(func, wait) {
  var timeout;
  return function() {
    var context = this, args = arguments;
    var later = function() {
      timeout = null;
      func.apply(context, args);
    };
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
  };
}
function throttle(func, limit) {
  let inThrottle;
  return function() {
    let context = this, args = arguments;
    if (!inThrottle) {
      func.apply(context, args);
      inThrottle = true;
      setTimeout(() => inThrottle = false, limit);
    }
  };
}
function entangle({ get: outerGet, set: outerSet }, { get: innerGet, set: innerSet }) {
  let firstRun = true;
  let outerHash;
  let innerHash;
  let reference = effect(() => {
    let outer = outerGet();
    let inner = innerGet();
    if (firstRun) {
      innerSet(cloneIfObject(outer));
      firstRun = false;
    } else {
      let outerHashLatest = JSON.stringify(outer);
      let innerHashLatest = JSON.stringify(inner);
      if (outerHashLatest !== outerHash) {
        innerSet(cloneIfObject(outer));
      } else if (outerHashLatest !== innerHashLatest) {
        outerSet(cloneIfObject(inner));
      } else {
      }
    }
    outerHash = JSON.stringify(outerGet());
    innerHash = JSON.stringify(innerGet());
  });
  return () => {
    release(reference);
  };
}
function cloneIfObject(value) {
  return typeof value === "object" ? JSON.parse(JSON.stringify(value)) : value;
}
function plugin(callback) {
  let callbacks = Array.isArray(callback) ? callback : [callback];
  callbacks.forEach((i) => i(alpine_default));
}
var stores = {};
var isReactive = false;
function store(name, value) {
  if (!isReactive) {
    stores = reactive(stores);
    isReactive = true;
  }
  if (value === void 0) {
    return stores[name];
  }
  stores[name] = value;
  initInterceptors(stores[name]);
  if (typeof value === "object" && value !== null && value.hasOwnProperty("init") && typeof value.init === "function") {
    stores[name].init();
  }
}
function getStores() {
  return stores;
}
var binds = {};
function bind2(name, bindings) {
  let getBindings = typeof bindings !== "function" ? () => bindings : bindings;
  if (name instanceof Element) {
    return applyBindingsObject(name, getBindings());
  } else {
    binds[name] = getBindings;
  }
  return () => {
  };
}
function injectBindingProviders(obj) {
  Object.entries(binds).forEach(([name, callback]) => {
    Object.defineProperty(obj, name, {
      get() {
        return (...args) => {
          return callback(...args);
        };
      }
    });
  });
  return obj;
}
function applyBindingsObject(el, obj, original) {
  let cleanupRunners = [];
  while (cleanupRunners.length)
    cleanupRunners.pop()();
  let attributes = Object.entries(obj).map(([name, value]) => ({ name, value }));
  let staticAttributes = attributesOnly(attributes);
  attributes = attributes.map((attribute) => {
    if (staticAttributes.find((attr) => attr.name === attribute.name)) {
      return {
        name: `x-bind:${attribute.name}`,
        value: `"${attribute.value}"`
      };
    }
    return attribute;
  });
  directives(el, attributes, original).map((handle) => {
    cleanupRunners.push(handle.runCleanups);
    handle();
  });
  return () => {
    while (cleanupRunners.length)
      cleanupRunners.pop()();
  };
}
var datas = {};
function data(name, callback) {
  datas[name] = callback;
}
function injectDataProviders(obj, context) {
  Object.entries(datas).forEach(([name, callback]) => {
    Object.defineProperty(obj, name, {
      get() {
        return (...args) => {
          return callback.bind(context)(...args);
        };
      },
      enumerable: false
    });
  });
  return obj;
}
var Alpine = {
  get reactive() {
    return reactive;
  },
  get release() {
    return release;
  },
  get effect() {
    return effect;
  },
  get raw() {
    return raw;
  },
  version: "3.14.9",
  flushAndStopDeferringMutations,
  dontAutoEvaluateFunctions,
  disableEffectScheduling,
  startObservingMutations,
  stopObservingMutations,
  setReactivityEngine,
  onAttributeRemoved,
  onAttributesAdded,
  closestDataStack,
  skipDuringClone,
  onlyDuringClone,
  addRootSelector,
  addInitSelector,
  interceptClone,
  addScopeToNode,
  deferMutations,
  mapAttributes,
  evaluateLater,
  interceptInit,
  setEvaluator,
  mergeProxies,
  extractProp,
  findClosest,
  onElRemoved,
  closestRoot,
  destroyTree,
  interceptor,
  // INTERNAL: not public API and is subject to change without major release.
  transition,
  // INTERNAL
  setStyles,
  // INTERNAL
  mutateDom,
  directive,
  entangle,
  throttle,
  debounce,
  evaluate,
  initTree,
  nextTick,
  prefixed: prefix,
  prefix: setPrefix,
  plugin,
  magic,
  store,
  start: start2,
  clone,
  // INTERNAL
  cloneNode,
  // INTERNAL
  bound: getBinding,
  $data: scope,
  watch,
  walk,
  data,
  bind: bind2
};
var alpine_default = Alpine;
function makeMap(str, expectsLowerCase) {
  const map = /* @__PURE__ */ Object.create(null);
  const list = str.split(",");
  for (let i = 0; i < list.length; i++) {
    map[list[i]] = true;
  }
  return expectsLowerCase ? (val) => !!map[val.toLowerCase()] : (val) => !!map[val];
}
var specialBooleanAttrs = `itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`;
var isBooleanAttr2 = /* @__PURE__ */ makeMap(specialBooleanAttrs + `,async,autofocus,autoplay,controls,default,defer,disabled,hidden,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected`);
var EMPTY_OBJ = true ? Object.freeze({}) : {};
var EMPTY_ARR = true ? Object.freeze([]) : [];
var hasOwnProperty = Object.prototype.hasOwnProperty;
var hasOwn = (val, key) => hasOwnProperty.call(val, key);
var isArray = Array.isArray;
var isMap = (val) => toTypeString(val) === "[object Map]";
var isString = (val) => typeof val === "string";
var isSymbol = (val) => typeof val === "symbol";
var isObject = (val) => val !== null && typeof val === "object";
var objectToString = Object.prototype.toString;
var toTypeString = (value) => objectToString.call(value);
var toRawType = (value) => {
  return toTypeString(value).slice(8, -1);
};
var isIntegerKey = (key) => isString(key) && key !== "NaN" && key[0] !== "-" && "" + parseInt(key, 10) === key;
var cacheStringFunction = (fn) => {
  const cache2 = /* @__PURE__ */ Object.create(null);
  return (str) => {
    const hit = cache2[str];
    return hit || (cache2[str] = fn(str));
  };
};
var camelizeRE = /-(\w)/g;
var camelize = cacheStringFunction((str) => {
  return str.replace(camelizeRE, (_, c) => c ? c.toUpperCase() : "");
});
var hyphenateRE = /\B([A-Z])/g;
var hyphenate = cacheStringFunction((str) => str.replace(hyphenateRE, "-$1").toLowerCase());
var capitalize = cacheStringFunction((str) => str.charAt(0).toUpperCase() + str.slice(1));
var toHandlerKey = cacheStringFunction((str) => str ? `on${capitalize(str)}` : ``);
var hasChanged = (value, oldValue) => value !== oldValue && (value === value || oldValue === oldValue);
var targetMap = /* @__PURE__ */ new WeakMap();
var effectStack = [];
var activeEffect;
var ITERATE_KEY = Symbol(true ? "iterate" : "");
var MAP_KEY_ITERATE_KEY = Symbol(true ? "Map key iterate" : "");
function isEffect(fn) {
  return fn && fn._isEffect === true;
}
function effect2(fn, options = EMPTY_OBJ) {
  if (isEffect(fn)) {
    fn = fn.raw;
  }
  const effect3 = createReactiveEffect(fn, options);
  if (!options.lazy) {
    effect3();
  }
  return effect3;
}
function stop(effect3) {
  if (effect3.active) {
    cleanup(effect3);
    if (effect3.options.onStop) {
      effect3.options.onStop();
    }
    effect3.active = false;
  }
}
var uid = 0;
function createReactiveEffect(fn, options) {
  const effect3 = function reactiveEffect() {
    if (!effect3.active) {
      return fn();
    }
    if (!effectStack.includes(effect3)) {
      cleanup(effect3);
      try {
        enableTracking();
        effectStack.push(effect3);
        activeEffect = effect3;
        return fn();
      } finally {
        effectStack.pop();
        resetTracking();
        activeEffect = effectStack[effectStack.length - 1];
      }
    }
  };
  effect3.id = uid++;
  effect3.allowRecurse = !!options.allowRecurse;
  effect3._isEffect = true;
  effect3.active = true;
  effect3.raw = fn;
  effect3.deps = [];
  effect3.options = options;
  return effect3;
}
function cleanup(effect3) {
  const { deps } = effect3;
  if (deps.length) {
    for (let i = 0; i < deps.length; i++) {
      deps[i].delete(effect3);
    }
    deps.length = 0;
  }
}
var shouldTrack = true;
var trackStack = [];
function pauseTracking() {
  trackStack.push(shouldTrack);
  shouldTrack = false;
}
function enableTracking() {
  trackStack.push(shouldTrack);
  shouldTrack = true;
}
function resetTracking() {
  const last = trackStack.pop();
  shouldTrack = last === void 0 ? true : last;
}
function track(target, type, key) {
  if (!shouldTrack || activeEffect === void 0) {
    return;
  }
  let depsMap = targetMap.get(target);
  if (!depsMap) {
    targetMap.set(target, depsMap = /* @__PURE__ */ new Map());
  }
  let dep = depsMap.get(key);
  if (!dep) {
    depsMap.set(key, dep = /* @__PURE__ */ new Set());
  }
  if (!dep.has(activeEffect)) {
    dep.add(activeEffect);
    activeEffect.deps.push(dep);
    if (activeEffect.options.onTrack) {
      activeEffect.options.onTrack({
        effect: activeEffect,
        target,
        type,
        key
      });
    }
  }
}
function trigger(target, type, key, newValue, oldValue, oldTarget) {
  const depsMap = targetMap.get(target);
  if (!depsMap) {
    return;
  }
  const effects = /* @__PURE__ */ new Set();
  const add22 = (effectsToAdd) => {
    if (effectsToAdd) {
      effectsToAdd.forEach((effect3) => {
        if (effect3 !== activeEffect || effect3.allowRecurse) {
          effects.add(effect3);
        }
      });
    }
  };
  if (type === "clear") {
    depsMap.forEach(add22);
  } else if (key === "length" && isArray(target)) {
    depsMap.forEach((dep, key2) => {
      if (key2 === "length" || key2 >= newValue) {
        add22(dep);
      }
    });
  } else {
    if (key !== void 0) {
      add22(depsMap.get(key));
    }
    switch (type) {
      case "add":
        if (!isArray(target)) {
          add22(depsMap.get(ITERATE_KEY));
          if (isMap(target)) {
            add22(depsMap.get(MAP_KEY_ITERATE_KEY));
          }
        } else if (isIntegerKey(key)) {
          add22(depsMap.get("length"));
        }
        break;
      case "delete":
        if (!isArray(target)) {
          add22(depsMap.get(ITERATE_KEY));
          if (isMap(target)) {
            add22(depsMap.get(MAP_KEY_ITERATE_KEY));
          }
        }
        break;
      case "set":
        if (isMap(target)) {
          add22(depsMap.get(ITERATE_KEY));
        }
        break;
    }
  }
  const run = (effect3) => {
    if (effect3.options.onTrigger) {
      effect3.options.onTrigger({
        effect: effect3,
        target,
        key,
        type,
        newValue,
        oldValue,
        oldTarget
      });
    }
    if (effect3.options.scheduler) {
      effect3.options.scheduler(effect3);
    } else {
      effect3();
    }
  };
  effects.forEach(run);
}
var isNonTrackableKeys = /* @__PURE__ */ makeMap(`__proto__,__v_isRef,__isVue`);
var builtInSymbols = new Set(Object.getOwnPropertyNames(Symbol).map((key) => Symbol[key]).filter(isSymbol));
var get2 = /* @__PURE__ */ createGetter();
var readonlyGet = /* @__PURE__ */ createGetter(true);
var arrayInstrumentations = /* @__PURE__ */ createArrayInstrumentations();
function createArrayInstrumentations() {
  const instrumentations = {};
  ["includes", "indexOf", "lastIndexOf"].forEach((key) => {
    instrumentations[key] = function(...args) {
      const arr = toRaw(this);
      for (let i = 0, l = this.length; i < l; i++) {
        track(arr, "get", i + "");
      }
      const res = arr[key](...args);
      if (res === -1 || res === false) {
        return arr[key](...args.map(toRaw));
      } else {
        return res;
      }
    };
  });
  ["push", "pop", "shift", "unshift", "splice"].forEach((key) => {
    instrumentations[key] = function(...args) {
      pauseTracking();
      const res = toRaw(this)[key].apply(this, args);
      resetTracking();
      return res;
    };
  });
  return instrumentations;
}
function createGetter(isReadonly = false, shallow = false) {
  return function get3(target, key, receiver) {
    if (key === "__v_isReactive") {
      return !isReadonly;
    } else if (key === "__v_isReadonly") {
      return isReadonly;
    } else if (key === "__v_raw" && receiver === (isReadonly ? shallow ? shallowReadonlyMap : readonlyMap : shallow ? shallowReactiveMap : reactiveMap).get(target)) {
      return target;
    }
    const targetIsArray = isArray(target);
    if (!isReadonly && targetIsArray && hasOwn(arrayInstrumentations, key)) {
      return Reflect.get(arrayInstrumentations, key, receiver);
    }
    const res = Reflect.get(target, key, receiver);
    if (isSymbol(key) ? builtInSymbols.has(key) : isNonTrackableKeys(key)) {
      return res;
    }
    if (!isReadonly) {
      track(target, "get", key);
    }
    if (shallow) {
      return res;
    }
    if (isRef(res)) {
      const shouldUnwrap = !targetIsArray || !isIntegerKey(key);
      return shouldUnwrap ? res.value : res;
    }
    if (isObject(res)) {
      return isReadonly ? readonly(res) : reactive2(res);
    }
    return res;
  };
}
var set2 = /* @__PURE__ */ createSetter();
function createSetter(shallow = false) {
  return function set3(target, key, value, receiver) {
    let oldValue = target[key];
    if (!shallow) {
      value = toRaw(value);
      oldValue = toRaw(oldValue);
      if (!isArray(target) && isRef(oldValue) && !isRef(value)) {
        oldValue.value = value;
        return true;
      }
    }
    const hadKey = isArray(target) && isIntegerKey(key) ? Number(key) < target.length : hasOwn(target, key);
    const result = Reflect.set(target, key, value, receiver);
    if (target === toRaw(receiver)) {
      if (!hadKey) {
        trigger(target, "add", key, value);
      } else if (hasChanged(value, oldValue)) {
        trigger(target, "set", key, value, oldValue);
      }
    }
    return result;
  };
}
function deleteProperty(target, key) {
  const hadKey = hasOwn(target, key);
  const oldValue = target[key];
  const result = Reflect.deleteProperty(target, key);
  if (result && hadKey) {
    trigger(target, "delete", key, void 0, oldValue);
  }
  return result;
}
function has(target, key) {
  const result = Reflect.has(target, key);
  if (!isSymbol(key) || !builtInSymbols.has(key)) {
    track(target, "has", key);
  }
  return result;
}
function ownKeys(target) {
  track(target, "iterate", isArray(target) ? "length" : ITERATE_KEY);
  return Reflect.ownKeys(target);
}
var mutableHandlers = {
  get: get2,
  set: set2,
  deleteProperty,
  has,
  ownKeys
};
var readonlyHandlers = {
  get: readonlyGet,
  set(target, key) {
    if (true) {
      console.warn(`Set operation on key "${String(key)}" failed: target is readonly.`, target);
    }
    return true;
  },
  deleteProperty(target, key) {
    if (true) {
      console.warn(`Delete operation on key "${String(key)}" failed: target is readonly.`, target);
    }
    return true;
  }
};
var toReactive = (value) => isObject(value) ? reactive2(value) : value;
var toReadonly = (value) => isObject(value) ? readonly(value) : value;
var toShallow = (value) => value;
var getProto = (v) => Reflect.getPrototypeOf(v);
function get$1(target, key, isReadonly = false, isShallow = false) {
  target = target[
    "__v_raw"
    /* RAW */
  ];
  const rawTarget = toRaw(target);
  const rawKey = toRaw(key);
  if (key !== rawKey) {
    !isReadonly && track(rawTarget, "get", key);
  }
  !isReadonly && track(rawTarget, "get", rawKey);
  const { has: has2 } = getProto(rawTarget);
  const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;
  if (has2.call(rawTarget, key)) {
    return wrap(target.get(key));
  } else if (has2.call(rawTarget, rawKey)) {
    return wrap(target.get(rawKey));
  } else if (target !== rawTarget) {
    target.get(key);
  }
}
function has$1(key, isReadonly = false) {
  const target = this[
    "__v_raw"
    /* RAW */
  ];
  const rawTarget = toRaw(target);
  const rawKey = toRaw(key);
  if (key !== rawKey) {
    !isReadonly && track(rawTarget, "has", key);
  }
  !isReadonly && track(rawTarget, "has", rawKey);
  return key === rawKey ? target.has(key) : target.has(key) || target.has(rawKey);
}
function size(target, isReadonly = false) {
  target = target[
    "__v_raw"
    /* RAW */
  ];
  !isReadonly && track(toRaw(target), "iterate", ITERATE_KEY);
  return Reflect.get(target, "size", target);
}
function add(value) {
  value = toRaw(value);
  const target = toRaw(this);
  const proto = getProto(target);
  const hadKey = proto.has.call(target, value);
  if (!hadKey) {
    target.add(value);
    trigger(target, "add", value, value);
  }
  return this;
}
function set$1(key, value) {
  value = toRaw(value);
  const target = toRaw(this);
  const { has: has2, get: get3 } = getProto(target);
  let hadKey = has2.call(target, key);
  if (!hadKey) {
    key = toRaw(key);
    hadKey = has2.call(target, key);
  } else if (true) {
    checkIdentityKeys(target, has2, key);
  }
  const oldValue = get3.call(target, key);
  target.set(key, value);
  if (!hadKey) {
    trigger(target, "add", key, value);
  } else if (hasChanged(value, oldValue)) {
    trigger(target, "set", key, value, oldValue);
  }
  return this;
}
function deleteEntry(key) {
  const target = toRaw(this);
  const { has: has2, get: get3 } = getProto(target);
  let hadKey = has2.call(target, key);
  if (!hadKey) {
    key = toRaw(key);
    hadKey = has2.call(target, key);
  } else if (true) {
    checkIdentityKeys(target, has2, key);
  }
  const oldValue = get3 ? get3.call(target, key) : void 0;
  const result = target.delete(key);
  if (hadKey) {
    trigger(target, "delete", key, void 0, oldValue);
  }
  return result;
}
function clear() {
  const target = toRaw(this);
  const hadItems = target.size !== 0;
  const oldTarget = true ? isMap(target) ? new Map(target) : new Set(target) : void 0;
  const result = target.clear();
  if (hadItems) {
    trigger(target, "clear", void 0, void 0, oldTarget);
  }
  return result;
}
function createForEach(isReadonly, isShallow) {
  return function forEach(callback, thisArg) {
    const observed = this;
    const target = observed[
      "__v_raw"
      /* RAW */
    ];
    const rawTarget = toRaw(target);
    const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;
    !isReadonly && track(rawTarget, "iterate", ITERATE_KEY);
    return target.forEach((value, key) => {
      return callback.call(thisArg, wrap(value), wrap(key), observed);
    });
  };
}
function createIterableMethod(method, isReadonly, isShallow) {
  return function(...args) {
    const target = this[
      "__v_raw"
      /* RAW */
    ];
    const rawTarget = toRaw(target);
    const targetIsMap = isMap(rawTarget);
    const isPair = method === "entries" || method === Symbol.iterator && targetIsMap;
    const isKeyOnly = method === "keys" && targetIsMap;
    const innerIterator = target[method](...args);
    const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;
    !isReadonly && track(rawTarget, "iterate", isKeyOnly ? MAP_KEY_ITERATE_KEY : ITERATE_KEY);
    return {
      // iterator protocol
      next() {
        const { value, done } = innerIterator.next();
        return done ? { value, done } : {
          value: isPair ? [wrap(value[0]), wrap(value[1])] : wrap(value),
          done
        };
      },
      // iterable protocol
      [Symbol.iterator]() {
        return this;
      }
    };
  };
}
function createReadonlyMethod(type) {
  return function(...args) {
    if (true) {
      const key = args[0] ? `on key "${args[0]}" ` : ``;
      console.warn(`${capitalize(type)} operation ${key}failed: target is readonly.`, toRaw(this));
    }
    return type === "delete" ? false : this;
  };
}
function createInstrumentations() {
  const mutableInstrumentations2 = {
    get(key) {
      return get$1(this, key);
    },
    get size() {
      return size(this);
    },
    has: has$1,
    add,
    set: set$1,
    delete: deleteEntry,
    clear,
    forEach: createForEach(false, false)
  };
  const shallowInstrumentations2 = {
    get(key) {
      return get$1(this, key, false, true);
    },
    get size() {
      return size(this);
    },
    has: has$1,
    add,
    set: set$1,
    delete: deleteEntry,
    clear,
    forEach: createForEach(false, true)
  };
  const readonlyInstrumentations2 = {
    get(key) {
      return get$1(this, key, true);
    },
    get size() {
      return size(this, true);
    },
    has(key) {
      return has$1.call(this, key, true);
    },
    add: createReadonlyMethod(
      "add"
      /* ADD */
    ),
    set: createReadonlyMethod(
      "set"
      /* SET */
    ),
    delete: createReadonlyMethod(
      "delete"
      /* DELETE */
    ),
    clear: createReadonlyMethod(
      "clear"
      /* CLEAR */
    ),
    forEach: createForEach(true, false)
  };
  const shallowReadonlyInstrumentations2 = {
    get(key) {
      return get$1(this, key, true, true);
    },
    get size() {
      return size(this, true);
    },
    has(key) {
      return has$1.call(this, key, true);
    },
    add: createReadonlyMethod(
      "add"
      /* ADD */
    ),
    set: createReadonlyMethod(
      "set"
      /* SET */
    ),
    delete: createReadonlyMethod(
      "delete"
      /* DELETE */
    ),
    clear: createReadonlyMethod(
      "clear"
      /* CLEAR */
    ),
    forEach: createForEach(true, true)
  };
  const iteratorMethods = ["keys", "values", "entries", Symbol.iterator];
  iteratorMethods.forEach((method) => {
    mutableInstrumentations2[method] = createIterableMethod(method, false, false);
    readonlyInstrumentations2[method] = createIterableMethod(method, true, false);
    shallowInstrumentations2[method] = createIterableMethod(method, false, true);
    shallowReadonlyInstrumentations2[method] = createIterableMethod(method, true, true);
  });
  return [
    mutableInstrumentations2,
    readonlyInstrumentations2,
    shallowInstrumentations2,
    shallowReadonlyInstrumentations2
  ];
}
var [mutableInstrumentations, readonlyInstrumentations, shallowInstrumentations, shallowReadonlyInstrumentations] = /* @__PURE__ */ createInstrumentations();
function createInstrumentationGetter(isReadonly, shallow) {
  const instrumentations = shallow ? isReadonly ? shallowReadonlyInstrumentations : shallowInstrumentations : isReadonly ? readonlyInstrumentations : mutableInstrumentations;
  return (target, key, receiver) => {
    if (key === "__v_isReactive") {
      return !isReadonly;
    } else if (key === "__v_isReadonly") {
      return isReadonly;
    } else if (key === "__v_raw") {
      return target;
    }
    return Reflect.get(hasOwn(instrumentations, key) && key in target ? instrumentations : target, key, receiver);
  };
}
var mutableCollectionHandlers = {
  get: /* @__PURE__ */ createInstrumentationGetter(false, false)
};
var readonlyCollectionHandlers = {
  get: /* @__PURE__ */ createInstrumentationGetter(true, false)
};
function checkIdentityKeys(target, has2, key) {
  const rawKey = toRaw(key);
  if (rawKey !== key && has2.call(target, rawKey)) {
    const type = toRawType(target);
    console.warn(`Reactive ${type} contains both the raw and reactive versions of the same object${type === `Map` ? ` as keys` : ``}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`);
  }
}
var reactiveMap = /* @__PURE__ */ new WeakMap();
var shallowReactiveMap = /* @__PURE__ */ new WeakMap();
var readonlyMap = /* @__PURE__ */ new WeakMap();
var shallowReadonlyMap = /* @__PURE__ */ new WeakMap();
function targetTypeMap(rawType) {
  switch (rawType) {
    case "Object":
    case "Array":
      return 1;
    case "Map":
    case "Set":
    case "WeakMap":
    case "WeakSet":
      return 2;
    default:
      return 0;
  }
}
function getTargetType(value) {
  return value[
    "__v_skip"
    /* SKIP */
  ] || !Object.isExtensible(value) ? 0 : targetTypeMap(toRawType(value));
}
function reactive2(target) {
  if (target && target[
    "__v_isReadonly"
    /* IS_READONLY */
  ]) {
    return target;
  }
  return createReactiveObject(target, false, mutableHandlers, mutableCollectionHandlers, reactiveMap);
}
function readonly(target) {
  return createReactiveObject(target, true, readonlyHandlers, readonlyCollectionHandlers, readonlyMap);
}
function createReactiveObject(target, isReadonly, baseHandlers, collectionHandlers, proxyMap) {
  if (!isObject(target)) {
    if (true) {
      console.warn(`value cannot be made reactive: ${String(target)}`);
    }
    return target;
  }
  if (target[
    "__v_raw"
    /* RAW */
  ] && !(isReadonly && target[
    "__v_isReactive"
    /* IS_REACTIVE */
  ])) {
    return target;
  }
  const existingProxy = proxyMap.get(target);
  if (existingProxy) {
    return existingProxy;
  }
  const targetType = getTargetType(target);
  if (targetType === 0) {
    return target;
  }
  const proxy = new Proxy(target, targetType === 2 ? collectionHandlers : baseHandlers);
  proxyMap.set(target, proxy);
  return proxy;
}
function toRaw(observed) {
  return observed && toRaw(observed[
    "__v_raw"
    /* RAW */
  ]) || observed;
}
function isRef(r) {
  return Boolean(r && r.__v_isRef === true);
}
magic("nextTick", () => nextTick);
magic("dispatch", (el) => dispatch.bind(dispatch, el));
magic("watch", (el, { evaluateLater: evaluateLater2, cleanup: cleanup2 }) => (key, callback) => {
  let evaluate2 = evaluateLater2(key);
  let getter = () => {
    let value;
    evaluate2((i) => value = i);
    return value;
  };
  let unwatch = watch(getter, callback);
  cleanup2(unwatch);
});
magic("store", getStores);
magic("data", (el) => scope(el));
magic("root", (el) => closestRoot(el));
magic("refs", (el) => {
  if (el._x_refs_proxy)
    return el._x_refs_proxy;
  el._x_refs_proxy = mergeProxies(getArrayOfRefObject(el));
  return el._x_refs_proxy;
});
function getArrayOfRefObject(el) {
  let refObjects = [];
  findClosest(el, (i) => {
    if (i._x_refs)
      refObjects.push(i._x_refs);
  });
  return refObjects;
}
var globalIdMemo = {};
function findAndIncrementId(name) {
  if (!globalIdMemo[name])
    globalIdMemo[name] = 0;
  return ++globalIdMemo[name];
}
function closestIdRoot(el, name) {
  return findClosest(el, (element) => {
    if (element._x_ids && element._x_ids[name])
      return true;
  });
}
function setIdRoot(el, name) {
  if (!el._x_ids)
    el._x_ids = {};
  if (!el._x_ids[name])
    el._x_ids[name] = findAndIncrementId(name);
}
magic("id", (el, { cleanup: cleanup2 }) => (name, key = null) => {
  let cacheKey = `${name}${key ? `-${key}` : ""}`;
  return cacheIdByNameOnElement(el, cacheKey, cleanup2, () => {
    let root = closestIdRoot(el, name);
    let id2 = root ? root._x_ids[name] : findAndIncrementId(name);
    return key ? `${name}-${id2}-${key}` : `${name}-${id2}`;
  });
});
interceptClone((from, to) => {
  if (from._x_id) {
    to._x_id = from._x_id;
  }
});
function cacheIdByNameOnElement(el, cacheKey, cleanup2, callback) {
  if (!el._x_id)
    el._x_id = {};
  if (el._x_id[cacheKey])
    return el._x_id[cacheKey];
  let output = callback();
  el._x_id[cacheKey] = output;
  cleanup2(() => {
    delete el._x_id[cacheKey];
  });
  return output;
}
magic("el", (el) => el);
warnMissingPluginMagic("Focus", "focus", "focus");
warnMissingPluginMagic("Persist", "persist", "persist");
function warnMissingPluginMagic(name, magicName, slug) {
  magic(magicName, (el) => warn(`You can't use [$${magicName}] without first installing the "${name}" plugin here: https://alpinejs.dev/plugins/${slug}`, el));
}
directive("modelable", (el, { expression }, { effect: effect3, evaluateLater: evaluateLater2, cleanup: cleanup2 }) => {
  let func = evaluateLater2(expression);
  let innerGet = () => {
    let result;
    func((i) => result = i);
    return result;
  };
  let evaluateInnerSet = evaluateLater2(`${expression} = __placeholder`);
  let innerSet = (val) => evaluateInnerSet(() => {
  }, { scope: { "__placeholder": val } });
  let initialValue = innerGet();
  innerSet(initialValue);
  queueMicrotask(() => {
    if (!el._x_model)
      return;
    el._x_removeModelListeners["default"]();
    let outerGet = el._x_model.get;
    let outerSet = el._x_model.set;
    let releaseEntanglement = entangle(
      {
        get() {
          return outerGet();
        },
        set(value) {
          outerSet(value);
        }
      },
      {
        get() {
          return innerGet();
        },
        set(value) {
          innerSet(value);
        }
      }
    );
    cleanup2(releaseEntanglement);
  });
});
directive("teleport", (el, { modifiers, expression }, { cleanup: cleanup2 }) => {
  if (el.tagName.toLowerCase() !== "template")
    warn("x-teleport can only be used on a <template> tag", el);
  let target = getTarget(expression);
  let clone2 = el.content.cloneNode(true).firstElementChild;
  el._x_teleport = clone2;
  clone2._x_teleportBack = el;
  el.setAttribute("data-teleport-template", true);
  clone2.setAttribute("data-teleport-target", true);
  if (el._x_forwardEvents) {
    el._x_forwardEvents.forEach((eventName) => {
      clone2.addEventListener(eventName, (e) => {
        e.stopPropagation();
        el.dispatchEvent(new e.constructor(e.type, e));
      });
    });
  }
  addScopeToNode(clone2, {}, el);
  let placeInDom = (clone3, target2, modifiers2) => {
    if (modifiers2.includes("prepend")) {
      target2.parentNode.insertBefore(clone3, target2);
    } else if (modifiers2.includes("append")) {
      target2.parentNode.insertBefore(clone3, target2.nextSibling);
    } else {
      target2.appendChild(clone3);
    }
  };
  mutateDom(() => {
    placeInDom(clone2, target, modifiers);
    skipDuringClone(() => {
      initTree(clone2);
    })();
  });
  el._x_teleportPutBack = () => {
    let target2 = getTarget(expression);
    mutateDom(() => {
      placeInDom(el._x_teleport, target2, modifiers);
    });
  };
  cleanup2(
    () => mutateDom(() => {
      clone2.remove();
      destroyTree(clone2);
    })
  );
});
var teleportContainerDuringClone = document.createElement("div");
function getTarget(expression) {
  let target = skipDuringClone(() => {
    return document.querySelector(expression);
  }, () => {
    return teleportContainerDuringClone;
  })();
  if (!target)
    warn(`Cannot find x-teleport element for selector: "${expression}"`);
  return target;
}
var handler = () => {
};
handler.inline = (el, { modifiers }, { cleanup: cleanup2 }) => {
  modifiers.includes("self") ? el._x_ignoreSelf = true : el._x_ignore = true;
  cleanup2(() => {
    modifiers.includes("self") ? delete el._x_ignoreSelf : delete el._x_ignore;
  });
};
directive("ignore", handler);
directive("effect", skipDuringClone((el, { expression }, { effect: effect3 }) => {
  effect3(evaluateLater(el, expression));
}));
function on(el, event2, modifiers, callback) {
  let listenerTarget = el;
  let handler4 = (e) => callback(e);
  let options = {};
  let wrapHandler = (callback2, wrapper) => (e) => wrapper(callback2, e);
  if (modifiers.includes("dot"))
    event2 = dotSyntax(event2);
  if (modifiers.includes("camel"))
    event2 = camelCase2(event2);
  if (modifiers.includes("passive"))
    options.passive = true;
  if (modifiers.includes("capture"))
    options.capture = true;
  if (modifiers.includes("window"))
    listenerTarget = window;
  if (modifiers.includes("document"))
    listenerTarget = document;
  if (modifiers.includes("debounce")) {
    let nextModifier = modifiers[modifiers.indexOf("debounce") + 1] || "invalid-wait";
    let wait = isNumeric(nextModifier.split("ms")[0]) ? Number(nextModifier.split("ms")[0]) : 250;
    handler4 = debounce(handler4, wait);
  }
  if (modifiers.includes("throttle")) {
    let nextModifier = modifiers[modifiers.indexOf("throttle") + 1] || "invalid-wait";
    let wait = isNumeric(nextModifier.split("ms")[0]) ? Number(nextModifier.split("ms")[0]) : 250;
    handler4 = throttle(handler4, wait);
  }
  if (modifiers.includes("prevent"))
    handler4 = wrapHandler(handler4, (next, e) => {
      e.preventDefault();
      next(e);
    });
  if (modifiers.includes("stop"))
    handler4 = wrapHandler(handler4, (next, e) => {
      e.stopPropagation();
      next(e);
    });
  if (modifiers.includes("once")) {
    handler4 = wrapHandler(handler4, (next, e) => {
      next(e);
      listenerTarget.removeEventListener(event2, handler4, options);
    });
  }
  if (modifiers.includes("away") || modifiers.includes("outside")) {
    listenerTarget = document;
    handler4 = wrapHandler(handler4, (next, e) => {
      if (el.contains(e.target))
        return;
      if (e.target.isConnected === false)
        return;
      if (el.offsetWidth < 1 && el.offsetHeight < 1)
        return;
      if (el._x_isShown === false)
        return;
      next(e);
    });
  }
  if (modifiers.includes("self"))
    handler4 = wrapHandler(handler4, (next, e) => {
      e.target === el && next(e);
    });
  if (isKeyEvent(event2) || isClickEvent(event2)) {
    handler4 = wrapHandler(handler4, (next, e) => {
      if (isListeningForASpecificKeyThatHasntBeenPressed(e, modifiers)) {
        return;
      }
      next(e);
    });
  }
  listenerTarget.addEventListener(event2, handler4, options);
  return () => {
    listenerTarget.removeEventListener(event2, handler4, options);
  };
}
function dotSyntax(subject) {
  return subject.replace(/-/g, ".");
}
function camelCase2(subject) {
  return subject.toLowerCase().replace(/-(\w)/g, (match, char) => char.toUpperCase());
}
function isNumeric(subject) {
  return !Array.isArray(subject) && !isNaN(subject);
}
function kebabCase2(subject) {
  if ([" ", "_"].includes(
    subject
  ))
    return subject;
  return subject.replace(/([a-z])([A-Z])/g, "$1-$2").replace(/[_\s]/, "-").toLowerCase();
}
function isKeyEvent(event2) {
  return ["keydown", "keyup"].includes(event2);
}
function isClickEvent(event2) {
  return ["contextmenu", "click", "mouse"].some((i) => event2.includes(i));
}
function isListeningForASpecificKeyThatHasntBeenPressed(e, modifiers) {
  let keyModifiers = modifiers.filter((i) => {
    return !["window", "document", "prevent", "stop", "once", "capture", "self", "away", "outside", "passive"].includes(i);
  });
  if (keyModifiers.includes("debounce")) {
    let debounceIndex = keyModifiers.indexOf("debounce");
    keyModifiers.splice(debounceIndex, isNumeric((keyModifiers[debounceIndex + 1] || "invalid-wait").split("ms")[0]) ? 2 : 1);
  }
  if (keyModifiers.includes("throttle")) {
    let debounceIndex = keyModifiers.indexOf("throttle");
    keyModifiers.splice(debounceIndex, isNumeric((keyModifiers[debounceIndex + 1] || "invalid-wait").split("ms")[0]) ? 2 : 1);
  }
  if (keyModifiers.length === 0)
    return false;
  if (keyModifiers.length === 1 && keyToModifiers(e.key).includes(keyModifiers[0]))
    return false;
  const systemKeyModifiers = ["ctrl", "shift", "alt", "meta", "cmd", "super"];
  const selectedSystemKeyModifiers = systemKeyModifiers.filter((modifier) => keyModifiers.includes(modifier));
  keyModifiers = keyModifiers.filter((i) => !selectedSystemKeyModifiers.includes(i));
  if (selectedSystemKeyModifiers.length > 0) {
    const activelyPressedKeyModifiers = selectedSystemKeyModifiers.filter((modifier) => {
      if (modifier === "cmd" || modifier === "super")
        modifier = "meta";
      return e[`${modifier}Key`];
    });
    if (activelyPressedKeyModifiers.length === selectedSystemKeyModifiers.length) {
      if (isClickEvent(e.type))
        return false;
      if (keyToModifiers(e.key).includes(keyModifiers[0]))
        return false;
    }
  }
  return true;
}
function keyToModifiers(key) {
  if (!key)
    return [];
  key = kebabCase2(key);
  let modifierToKeyMap = {
    "ctrl": "control",
    "slash": "/",
    "space": " ",
    "spacebar": " ",
    "cmd": "meta",
    "esc": "escape",
    "up": "arrow-up",
    "down": "arrow-down",
    "left": "arrow-left",
    "right": "arrow-right",
    "period": ".",
    "comma": ",",
    "equal": "=",
    "minus": "-",
    "underscore": "_"
  };
  modifierToKeyMap[key] = key;
  return Object.keys(modifierToKeyMap).map((modifier) => {
    if (modifierToKeyMap[modifier] === key)
      return modifier;
  }).filter((modifier) => modifier);
}
directive("model", (el, { modifiers, expression }, { effect: effect3, cleanup: cleanup2 }) => {
  let scopeTarget = el;
  if (modifiers.includes("parent")) {
    scopeTarget = el.parentNode;
  }
  let evaluateGet = evaluateLater(scopeTarget, expression);
  let evaluateSet;
  if (typeof expression === "string") {
    evaluateSet = evaluateLater(scopeTarget, `${expression} = __placeholder`);
  } else if (typeof expression === "function" && typeof expression() === "string") {
    evaluateSet = evaluateLater(scopeTarget, `${expression()} = __placeholder`);
  } else {
    evaluateSet = () => {
    };
  }
  let getValue = () => {
    let result;
    evaluateGet((value) => result = value);
    return isGetterSetter(result) ? result.get() : result;
  };
  let setValue = (value) => {
    let result;
    evaluateGet((value2) => result = value2);
    if (isGetterSetter(result)) {
      result.set(value);
    } else {
      evaluateSet(() => {
      }, {
        scope: { "__placeholder": value }
      });
    }
  };
  if (typeof expression === "string" && el.type === "radio") {
    mutateDom(() => {
      if (!el.hasAttribute("name"))
        el.setAttribute("name", expression);
    });
  }
  var event2 = el.tagName.toLowerCase() === "select" || ["checkbox", "radio"].includes(el.type) || modifiers.includes("lazy") ? "change" : "input";
  let removeListener = isCloning ? () => {
  } : on(el, event2, modifiers, (e) => {
    setValue(getInputValue(el, modifiers, e, getValue()));
  });
  if (modifiers.includes("fill")) {
    if ([void 0, null, ""].includes(getValue()) || isCheckbox(el) && Array.isArray(getValue()) || el.tagName.toLowerCase() === "select" && el.multiple) {
      setValue(
        getInputValue(el, modifiers, { target: el }, getValue())
      );
    }
  }
  if (!el._x_removeModelListeners)
    el._x_removeModelListeners = {};
  el._x_removeModelListeners["default"] = removeListener;
  cleanup2(() => el._x_removeModelListeners["default"]());
  if (el.form) {
    let removeResetListener = on(el.form, "reset", [], (e) => {
      nextTick(() => el._x_model && el._x_model.set(getInputValue(el, modifiers, { target: el }, getValue())));
    });
    cleanup2(() => removeResetListener());
  }
  el._x_model = {
    get() {
      return getValue();
    },
    set(value) {
      setValue(value);
    }
  };
  el._x_forceModelUpdate = (value) => {
    if (value === void 0 && typeof expression === "string" && expression.match(/\./))
      value = "";
    window.fromModel = true;
    mutateDom(() => bind(el, "value", value));
    delete window.fromModel;
  };
  effect3(() => {
    let value = getValue();
    if (modifiers.includes("unintrusive") && document.activeElement.isSameNode(el))
      return;
    el._x_forceModelUpdate(value);
  });
});
function getInputValue(el, modifiers, event2, currentValue) {
  return mutateDom(() => {
    if (event2 instanceof CustomEvent && event2.detail !== void 0)
      return event2.detail !== null && event2.detail !== void 0 ? event2.detail : event2.target.value;
    else if (isCheckbox(el)) {
      if (Array.isArray(currentValue)) {
        let newValue = null;
        if (modifiers.includes("number")) {
          newValue = safeParseNumber(event2.target.value);
        } else if (modifiers.includes("boolean")) {
          newValue = safeParseBoolean(event2.target.value);
        } else {
          newValue = event2.target.value;
        }
        return event2.target.checked ? currentValue.includes(newValue) ? currentValue : currentValue.concat([newValue]) : currentValue.filter((el2) => !checkedAttrLooseCompare2(el2, newValue));
      } else {
        return event2.target.checked;
      }
    } else if (el.tagName.toLowerCase() === "select" && el.multiple) {
      if (modifiers.includes("number")) {
        return Array.from(event2.target.selectedOptions).map((option) => {
          let rawValue = option.value || option.text;
          return safeParseNumber(rawValue);
        });
      } else if (modifiers.includes("boolean")) {
        return Array.from(event2.target.selectedOptions).map((option) => {
          let rawValue = option.value || option.text;
          return safeParseBoolean(rawValue);
        });
      }
      return Array.from(event2.target.selectedOptions).map((option) => {
        return option.value || option.text;
      });
    } else {
      let newValue;
      if (isRadio(el)) {
        if (event2.target.checked) {
          newValue = event2.target.value;
        } else {
          newValue = currentValue;
        }
      } else {
        newValue = event2.target.value;
      }
      if (modifiers.includes("number")) {
        return safeParseNumber(newValue);
      } else if (modifiers.includes("boolean")) {
        return safeParseBoolean(newValue);
      } else if (modifiers.includes("trim")) {
        return newValue.trim();
      } else {
        return newValue;
      }
    }
  });
}
function safeParseNumber(rawValue) {
  let number = rawValue ? parseFloat(rawValue) : null;
  return isNumeric2(number) ? number : rawValue;
}
function checkedAttrLooseCompare2(valueA, valueB) {
  return valueA == valueB;
}
function isNumeric2(subject) {
  return !Array.isArray(subject) && !isNaN(subject);
}
function isGetterSetter(value) {
  return value !== null && typeof value === "object" && typeof value.get === "function" && typeof value.set === "function";
}
directive("cloak", (el) => queueMicrotask(() => mutateDom(() => el.removeAttribute(prefix("cloak")))));
addInitSelector(() => `[${prefix("init")}]`);
directive("init", skipDuringClone((el, { expression }, { evaluate: evaluate2 }) => {
  if (typeof expression === "string") {
    return !!expression.trim() && evaluate2(expression, {}, false);
  }
  return evaluate2(expression, {}, false);
}));
directive("text", (el, { expression }, { effect: effect3, evaluateLater: evaluateLater2 }) => {
  let evaluate2 = evaluateLater2(expression);
  effect3(() => {
    evaluate2((value) => {
      mutateDom(() => {
        el.textContent = value;
      });
    });
  });
});
directive("html", (el, { expression }, { effect: effect3, evaluateLater: evaluateLater2 }) => {
  let evaluate2 = evaluateLater2(expression);
  effect3(() => {
    evaluate2((value) => {
      mutateDom(() => {
        el.innerHTML = value;
        el._x_ignoreSelf = true;
        initTree(el);
        delete el._x_ignoreSelf;
      });
    });
  });
});
mapAttributes(startingWith(":", into(prefix("bind:"))));
var handler2 = (el, { value, modifiers, expression, original }, { effect: effect3, cleanup: cleanup2 }) => {
  if (!value) {
    let bindingProviders = {};
    injectBindingProviders(bindingProviders);
    let getBindings = evaluateLater(el, expression);
    getBindings((bindings) => {
      applyBindingsObject(el, bindings, original);
    }, { scope: bindingProviders });
    return;
  }
  if (value === "key")
    return storeKeyForXFor(el, expression);
  if (el._x_inlineBindings && el._x_inlineBindings[value] && el._x_inlineBindings[value].extract) {
    return;
  }
  let evaluate2 = evaluateLater(el, expression);
  effect3(() => evaluate2((result) => {
    if (result === void 0 && typeof expression === "string" && expression.match(/\./)) {
      result = "";
    }
    mutateDom(() => bind(el, value, result, modifiers));
  }));
  cleanup2(() => {
    el._x_undoAddedClasses && el._x_undoAddedClasses();
    el._x_undoAddedStyles && el._x_undoAddedStyles();
  });
};
handler2.inline = (el, { value, modifiers, expression }) => {
  if (!value)
    return;
  if (!el._x_inlineBindings)
    el._x_inlineBindings = {};
  el._x_inlineBindings[value] = { expression, extract: false };
};
directive("bind", handler2);
function storeKeyForXFor(el, expression) {
  el._x_keyExpression = expression;
}
addRootSelector(() => `[${prefix("data")}]`);
directive("data", (el, { expression }, { cleanup: cleanup2 }) => {
  if (shouldSkipRegisteringDataDuringClone(el))
    return;
  expression = expression === "" ? "{}" : expression;
  let magicContext = {};
  injectMagics(magicContext, el);
  let dataProviderContext = {};
  injectDataProviders(dataProviderContext, magicContext);
  let data2 = evaluate(el, expression, { scope: dataProviderContext });
  if (data2 === void 0 || data2 === true)
    data2 = {};
  injectMagics(data2, el);
  let reactiveData = reactive(data2);
  initInterceptors(reactiveData);
  let undo = addScopeToNode(el, reactiveData);
  reactiveData["init"] && evaluate(el, reactiveData["init"]);
  cleanup2(() => {
    reactiveData["destroy"] && evaluate(el, reactiveData["destroy"]);
    undo();
  });
});
interceptClone((from, to) => {
  if (from._x_dataStack) {
    to._x_dataStack = from._x_dataStack;
    to.setAttribute("data-has-alpine-state", true);
  }
});
function shouldSkipRegisteringDataDuringClone(el) {
  if (!isCloning)
    return false;
  if (isCloningLegacy)
    return true;
  return el.hasAttribute("data-has-alpine-state");
}
directive("show", (el, { modifiers, expression }, { effect: effect3 }) => {
  let evaluate2 = evaluateLater(el, expression);
  if (!el._x_doHide)
    el._x_doHide = () => {
      mutateDom(() => {
        el.style.setProperty("display", "none", modifiers.includes("important") ? "important" : void 0);
      });
    };
  if (!el._x_doShow)
    el._x_doShow = () => {
      mutateDom(() => {
        if (el.style.length === 1 && el.style.display === "none") {
          el.removeAttribute("style");
        } else {
          el.style.removeProperty("display");
        }
      });
    };
  let hide = () => {
    el._x_doHide();
    el._x_isShown = false;
  };
  let show = () => {
    el._x_doShow();
    el._x_isShown = true;
  };
  let clickAwayCompatibleShow = () => setTimeout(show);
  let toggle = once(
    (value) => value ? show() : hide(),
    (value) => {
      if (typeof el._x_toggleAndCascadeWithTransitions === "function") {
        el._x_toggleAndCascadeWithTransitions(el, value, show, hide);
      } else {
        value ? clickAwayCompatibleShow() : hide();
      }
    }
  );
  let oldValue;
  let firstTime = true;
  effect3(() => evaluate2((value) => {
    if (!firstTime && value === oldValue)
      return;
    if (modifiers.includes("immediate"))
      value ? clickAwayCompatibleShow() : hide();
    toggle(value);
    oldValue = value;
    firstTime = false;
  }));
});
directive("for", (el, { expression }, { effect: effect3, cleanup: cleanup2 }) => {
  let iteratorNames = parseForExpression(expression);
  let evaluateItems = evaluateLater(el, iteratorNames.items);
  let evaluateKey = evaluateLater(
    el,
    // the x-bind:key expression is stored for our use instead of evaluated.
    el._x_keyExpression || "index"
  );
  el._x_prevKeys = [];
  el._x_lookup = {};
  effect3(() => loop(el, iteratorNames, evaluateItems, evaluateKey));
  cleanup2(() => {
    Object.values(el._x_lookup).forEach((el2) => mutateDom(
      () => {
        destroyTree(el2);
        el2.remove();
      }
    ));
    delete el._x_prevKeys;
    delete el._x_lookup;
  });
});
function loop(el, iteratorNames, evaluateItems, evaluateKey) {
  let isObject2 = (i) => typeof i === "object" && !Array.isArray(i);
  let templateEl = el;
  evaluateItems((items) => {
    if (isNumeric3(items) && items >= 0) {
      items = Array.from(Array(items).keys(), (i) => i + 1);
    }
    if (items === void 0)
      items = [];
    let lookup = el._x_lookup;
    let prevKeys = el._x_prevKeys;
    let scopes = [];
    let keys = [];
    if (isObject2(items)) {
      items = Object.entries(items).map(([key, value]) => {
        let scope2 = getIterationScopeVariables(iteratorNames, value, key, items);
        evaluateKey((value2) => {
          if (keys.includes(value2))
            warn("Duplicate key on x-for", el);
          keys.push(value2);
        }, { scope: { index: key, ...scope2 } });
        scopes.push(scope2);
      });
    } else {
      for (let i = 0; i < items.length; i++) {
        let scope2 = getIterationScopeVariables(iteratorNames, items[i], i, items);
        evaluateKey((value) => {
          if (keys.includes(value))
            warn("Duplicate key on x-for", el);
          keys.push(value);
        }, { scope: { index: i, ...scope2 } });
        scopes.push(scope2);
      }
    }
    let adds = [];
    let moves = [];
    let removes = [];
    let sames = [];
    for (let i = 0; i < prevKeys.length; i++) {
      let key = prevKeys[i];
      if (keys.indexOf(key) === -1)
        removes.push(key);
    }
    prevKeys = prevKeys.filter((key) => !removes.includes(key));
    let lastKey = "template";
    for (let i = 0; i < keys.length; i++) {
      let key = keys[i];
      let prevIndex = prevKeys.indexOf(key);
      if (prevIndex === -1) {
        prevKeys.splice(i, 0, key);
        adds.push([lastKey, i]);
      } else if (prevIndex !== i) {
        let keyInSpot = prevKeys.splice(i, 1)[0];
        let keyForSpot = prevKeys.splice(prevIndex - 1, 1)[0];
        prevKeys.splice(i, 0, keyForSpot);
        prevKeys.splice(prevIndex, 0, keyInSpot);
        moves.push([keyInSpot, keyForSpot]);
      } else {
        sames.push(key);
      }
      lastKey = key;
    }
    for (let i = 0; i < removes.length; i++) {
      let key = removes[i];
      if (!(key in lookup))
        continue;
      mutateDom(() => {
        destroyTree(lookup[key]);
        lookup[key].remove();
      });
      delete lookup[key];
    }
    for (let i = 0; i < moves.length; i++) {
      let [keyInSpot, keyForSpot] = moves[i];
      let elInSpot = lookup[keyInSpot];
      let elForSpot = lookup[keyForSpot];
      let marker = document.createElement("div");
      mutateDom(() => {
        if (!elForSpot)
          warn(`x-for ":key" is undefined or invalid`, templateEl, keyForSpot, lookup);
        elForSpot.after(marker);
        elInSpot.after(elForSpot);
        elForSpot._x_currentIfEl && elForSpot.after(elForSpot._x_currentIfEl);
        marker.before(elInSpot);
        elInSpot._x_currentIfEl && elInSpot.after(elInSpot._x_currentIfEl);
        marker.remove();
      });
      elForSpot._x_refreshXForScope(scopes[keys.indexOf(keyForSpot)]);
    }
    for (let i = 0; i < adds.length; i++) {
      let [lastKey2, index] = adds[i];
      let lastEl = lastKey2 === "template" ? templateEl : lookup[lastKey2];
      if (lastEl._x_currentIfEl)
        lastEl = lastEl._x_currentIfEl;
      let scope2 = scopes[index];
      let key = keys[index];
      let clone2 = document.importNode(templateEl.content, true).firstElementChild;
      let reactiveScope = reactive(scope2);
      addScopeToNode(clone2, reactiveScope, templateEl);
      clone2._x_refreshXForScope = (newScope) => {
        Object.entries(newScope).forEach(([key2, value]) => {
          reactiveScope[key2] = value;
        });
      };
      mutateDom(() => {
        lastEl.after(clone2);
        skipDuringClone(() => initTree(clone2))();
      });
      if (typeof key === "object") {
        warn("x-for key cannot be an object, it must be a string or an integer", templateEl);
      }
      lookup[key] = clone2;
    }
    for (let i = 0; i < sames.length; i++) {
      lookup[sames[i]]._x_refreshXForScope(scopes[keys.indexOf(sames[i])]);
    }
    templateEl._x_prevKeys = keys;
  });
}
function parseForExpression(expression) {
  let forIteratorRE = /,([^,\}\]]*)(?:,([^,\}\]]*))?$/;
  let stripParensRE = /^\s*\(|\)\s*$/g;
  let forAliasRE = /([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/;
  let inMatch = expression.match(forAliasRE);
  if (!inMatch)
    return;
  let res = {};
  res.items = inMatch[2].trim();
  let item = inMatch[1].replace(stripParensRE, "").trim();
  let iteratorMatch = item.match(forIteratorRE);
  if (iteratorMatch) {
    res.item = item.replace(forIteratorRE, "").trim();
    res.index = iteratorMatch[1].trim();
    if (iteratorMatch[2]) {
      res.collection = iteratorMatch[2].trim();
    }
  } else {
    res.item = item;
  }
  return res;
}
function getIterationScopeVariables(iteratorNames, item, index, items) {
  let scopeVariables = {};
  if (/^\[.*\]$/.test(iteratorNames.item) && Array.isArray(item)) {
    let names = iteratorNames.item.replace("[", "").replace("]", "").split(",").map((i) => i.trim());
    names.forEach((name, i) => {
      scopeVariables[name] = item[i];
    });
  } else if (/^\{.*\}$/.test(iteratorNames.item) && !Array.isArray(item) && typeof item === "object") {
    let names = iteratorNames.item.replace("{", "").replace("}", "").split(",").map((i) => i.trim());
    names.forEach((name) => {
      scopeVariables[name] = item[name];
    });
  } else {
    scopeVariables[iteratorNames.item] = item;
  }
  if (iteratorNames.index)
    scopeVariables[iteratorNames.index] = index;
  if (iteratorNames.collection)
    scopeVariables[iteratorNames.collection] = items;
  return scopeVariables;
}
function isNumeric3(subject) {
  return !Array.isArray(subject) && !isNaN(subject);
}
function handler3() {
}
handler3.inline = (el, { expression }, { cleanup: cleanup2 }) => {
  let root = closestRoot(el);
  if (!root._x_refs)
    root._x_refs = {};
  root._x_refs[expression] = el;
  cleanup2(() => delete root._x_refs[expression]);
};
directive("ref", handler3);
directive("if", (el, { expression }, { effect: effect3, cleanup: cleanup2 }) => {
  if (el.tagName.toLowerCase() !== "template")
    warn("x-if can only be used on a <template> tag", el);
  let evaluate2 = evaluateLater(el, expression);
  let show = () => {
    if (el._x_currentIfEl)
      return el._x_currentIfEl;
    let clone2 = el.content.cloneNode(true).firstElementChild;
    addScopeToNode(clone2, {}, el);
    mutateDom(() => {
      el.after(clone2);
      skipDuringClone(() => initTree(clone2))();
    });
    el._x_currentIfEl = clone2;
    el._x_undoIf = () => {
      mutateDom(() => {
        destroyTree(clone2);
        clone2.remove();
      });
      delete el._x_currentIfEl;
    };
    return clone2;
  };
  let hide = () => {
    if (!el._x_undoIf)
      return;
    el._x_undoIf();
    delete el._x_undoIf;
  };
  effect3(() => evaluate2((value) => {
    value ? show() : hide();
  }));
  cleanup2(() => el._x_undoIf && el._x_undoIf());
});
directive("id", (el, { expression }, { evaluate: evaluate2 }) => {
  let names = evaluate2(expression);
  names.forEach((name) => setIdRoot(el, name));
});
interceptClone((from, to) => {
  if (from._x_ids) {
    to._x_ids = from._x_ids;
  }
});
mapAttributes(startingWith("@", into(prefix("on:"))));
directive("on", skipDuringClone((el, { value, modifiers, expression }, { cleanup: cleanup2 }) => {
  let evaluate2 = expression ? evaluateLater(el, expression) : () => {
  };
  if (el.tagName.toLowerCase() === "template") {
    if (!el._x_forwardEvents)
      el._x_forwardEvents = [];
    if (!el._x_forwardEvents.includes(value))
      el._x_forwardEvents.push(value);
  }
  let removeListener = on(el, value, modifiers, (e) => {
    evaluate2(() => {
    }, { scope: { "$event": e }, params: [e] });
  });
  cleanup2(() => removeListener());
}));
warnMissingPluginDirective("Collapse", "collapse", "collapse");
warnMissingPluginDirective("Intersect", "intersect", "intersect");
warnMissingPluginDirective("Focus", "trap", "focus");
warnMissingPluginDirective("Mask", "mask", "mask");
function warnMissingPluginDirective(name, directiveName, slug) {
  directive(directiveName, (el) => warn(`You can't use [x-${directiveName}] without first installing the "${name}" plugin here: https://alpinejs.dev/plugins/${slug}`, el));
}
alpine_default.setEvaluator(normalEvaluator);
alpine_default.setReactivityEngine({ reactive: reactive2, effect: effect2, release: stop, raw: toRaw });
var src_default = alpine_default;
var module_default = src_default;

// node_modules/@rails/actioncable/app/assets/javascripts/actioncable.esm.js
var actioncable_esm_exports = {};
__export(actioncable_esm_exports, {
  Connection: () => Connection,
  ConnectionMonitor: () => ConnectionMonitor,
  Consumer: () => Consumer,
  INTERNAL: () => INTERNAL,
  Subscription: () => Subscription,
  SubscriptionGuarantor: () => SubscriptionGuarantor,
  Subscriptions: () => Subscriptions,
  adapters: () => adapters,
  createConsumer: () => createConsumer,
  createWebSocketURL: () => createWebSocketURL,
  getConfig: () => getConfig,
  logger: () => logger
});
var adapters = {
  logger: typeof console !== "undefined" ? console : void 0,
  WebSocket: typeof WebSocket !== "undefined" ? WebSocket : void 0
};
var logger = {
  log(...messages) {
    if (this.enabled) {
      messages.push(Date.now());
      adapters.logger.log("[ActionCable]", ...messages);
    }
  }
};
var now = () => (/* @__PURE__ */ new Date()).getTime();
var secondsSince = (time) => (now() - time) / 1e3;
var ConnectionMonitor = class {
  constructor(connection) {
    this.visibilityDidChange = this.visibilityDidChange.bind(this);
    this.connection = connection;
    this.reconnectAttempts = 0;
  }
  start() {
    if (!this.isRunning()) {
      this.startedAt = now();
      delete this.stoppedAt;
      this.startPolling();
      addEventListener("visibilitychange", this.visibilityDidChange);
      logger.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`);
    }
  }
  stop() {
    if (this.isRunning()) {
      this.stoppedAt = now();
      this.stopPolling();
      removeEventListener("visibilitychange", this.visibilityDidChange);
      logger.log("ConnectionMonitor stopped");
    }
  }
  isRunning() {
    return this.startedAt && !this.stoppedAt;
  }
  recordMessage() {
    this.pingedAt = now();
  }
  recordConnect() {
    this.reconnectAttempts = 0;
    delete this.disconnectedAt;
    logger.log("ConnectionMonitor recorded connect");
  }
  recordDisconnect() {
    this.disconnectedAt = now();
    logger.log("ConnectionMonitor recorded disconnect");
  }
  startPolling() {
    this.stopPolling();
    this.poll();
  }
  stopPolling() {
    clearTimeout(this.pollTimeout);
  }
  poll() {
    this.pollTimeout = setTimeout(() => {
      this.reconnectIfStale();
      this.poll();
    }, this.getPollInterval());
  }
  getPollInterval() {
    const { staleThreshold, reconnectionBackoffRate } = this.constructor;
    const backoff = Math.pow(1 + reconnectionBackoffRate, Math.min(this.reconnectAttempts, 10));
    const jitterMax = this.reconnectAttempts === 0 ? 1 : reconnectionBackoffRate;
    const jitter = jitterMax * Math.random();
    return staleThreshold * 1e3 * backoff * (1 + jitter);
  }
  reconnectIfStale() {
    if (this.connectionIsStale()) {
      logger.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${secondsSince(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`);
      this.reconnectAttempts++;
      if (this.disconnectedRecently()) {
        logger.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${secondsSince(this.disconnectedAt)} s`);
      } else {
        logger.log("ConnectionMonitor reopening");
        this.connection.reopen();
      }
    }
  }
  get refreshedAt() {
    return this.pingedAt ? this.pingedAt : this.startedAt;
  }
  connectionIsStale() {
    return secondsSince(this.refreshedAt) > this.constructor.staleThreshold;
  }
  disconnectedRecently() {
    return this.disconnectedAt && secondsSince(this.disconnectedAt) < this.constructor.staleThreshold;
  }
  visibilityDidChange() {
    if (document.visibilityState === "visible") {
      setTimeout(() => {
        if (this.connectionIsStale() || !this.connection.isOpen()) {
          logger.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`);
          this.connection.reopen();
        }
      }, 200);
    }
  }
};
ConnectionMonitor.staleThreshold = 6;
ConnectionMonitor.reconnectionBackoffRate = 0.15;
var INTERNAL = {
  message_types: {
    welcome: "welcome",
    disconnect: "disconnect",
    ping: "ping",
    confirmation: "confirm_subscription",
    rejection: "reject_subscription"
  },
  disconnect_reasons: {
    unauthorized: "unauthorized",
    invalid_request: "invalid_request",
    server_restart: "server_restart",
    remote: "remote"
  },
  default_mount_path: "/cable",
  protocols: ["actioncable-v1-json", "actioncable-unsupported"]
};
var { message_types, protocols } = INTERNAL;
var supportedProtocols = protocols.slice(0, protocols.length - 1);
var indexOf = [].indexOf;
var Connection = class {
  constructor(consumer2) {
    this.open = this.open.bind(this);
    this.consumer = consumer2;
    this.subscriptions = this.consumer.subscriptions;
    this.monitor = new ConnectionMonitor(this);
    this.disconnected = true;
  }
  send(data2) {
    if (this.isOpen()) {
      this.webSocket.send(JSON.stringify(data2));
      return true;
    } else {
      return false;
    }
  }
  open() {
    if (this.isActive()) {
      logger.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`);
      return false;
    } else {
      const socketProtocols = [...protocols, ...this.consumer.subprotocols || []];
      logger.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${socketProtocols}`);
      if (this.webSocket) {
        this.uninstallEventHandlers();
      }
      this.webSocket = new adapters.WebSocket(this.consumer.url, socketProtocols);
      this.installEventHandlers();
      this.monitor.start();
      return true;
    }
  }
  close({ allowReconnect } = {
    allowReconnect: true
  }) {
    if (!allowReconnect) {
      this.monitor.stop();
    }
    if (this.isOpen()) {
      return this.webSocket.close();
    }
  }
  reopen() {
    logger.log(`Reopening WebSocket, current state is ${this.getState()}`);
    if (this.isActive()) {
      try {
        return this.close();
      } catch (error3) {
        logger.log("Failed to reopen WebSocket", error3);
      } finally {
        logger.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`);
        setTimeout(this.open, this.constructor.reopenDelay);
      }
    } else {
      return this.open();
    }
  }
  getProtocol() {
    if (this.webSocket) {
      return this.webSocket.protocol;
    }
  }
  isOpen() {
    return this.isState("open");
  }
  isActive() {
    return this.isState("open", "connecting");
  }
  triedToReconnect() {
    return this.monitor.reconnectAttempts > 0;
  }
  isProtocolSupported() {
    return indexOf.call(supportedProtocols, this.getProtocol()) >= 0;
  }
  isState(...states) {
    return indexOf.call(states, this.getState()) >= 0;
  }
  getState() {
    if (this.webSocket) {
      for (let state in adapters.WebSocket) {
        if (adapters.WebSocket[state] === this.webSocket.readyState) {
          return state.toLowerCase();
        }
      }
    }
    return null;
  }
  installEventHandlers() {
    for (let eventName in this.events) {
      const handler4 = this.events[eventName].bind(this);
      this.webSocket[`on${eventName}`] = handler4;
    }
  }
  uninstallEventHandlers() {
    for (let eventName in this.events) {
      this.webSocket[`on${eventName}`] = function() {
      };
    }
  }
};
Connection.reopenDelay = 500;
Connection.prototype.events = {
  message(event2) {
    if (!this.isProtocolSupported()) {
      return;
    }
    const { identifier, message, reason, reconnect, type } = JSON.parse(event2.data);
    this.monitor.recordMessage();
    switch (type) {
      case message_types.welcome:
        if (this.triedToReconnect()) {
          this.reconnectAttempted = true;
        }
        this.monitor.recordConnect();
        return this.subscriptions.reload();
      case message_types.disconnect:
        logger.log(`Disconnecting. Reason: ${reason}`);
        return this.close({
          allowReconnect: reconnect
        });
      case message_types.ping:
        return null;
      case message_types.confirmation:
        this.subscriptions.confirmSubscription(identifier);
        if (this.reconnectAttempted) {
          this.reconnectAttempted = false;
          return this.subscriptions.notify(identifier, "connected", {
            reconnected: true
          });
        } else {
          return this.subscriptions.notify(identifier, "connected", {
            reconnected: false
          });
        }
      case message_types.rejection:
        return this.subscriptions.reject(identifier);
      default:
        return this.subscriptions.notify(identifier, "received", message);
    }
  },
  open() {
    logger.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`);
    this.disconnected = false;
    if (!this.isProtocolSupported()) {
      logger.log("Protocol is unsupported. Stopping monitor and disconnecting.");
      return this.close({
        allowReconnect: false
      });
    }
  },
  close(event2) {
    logger.log("WebSocket onclose event");
    if (this.disconnected) {
      return;
    }
    this.disconnected = true;
    this.monitor.recordDisconnect();
    return this.subscriptions.notifyAll("disconnected", {
      willAttemptReconnect: this.monitor.isRunning()
    });
  },
  error() {
    logger.log("WebSocket onerror event");
  }
};
var extend = function(object, properties) {
  if (properties != null) {
    for (let key in properties) {
      const value = properties[key];
      object[key] = value;
    }
  }
  return object;
};
var Subscription = class {
  constructor(consumer2, params = {}, mixin) {
    this.consumer = consumer2;
    this.identifier = JSON.stringify(params);
    extend(this, mixin);
  }
  perform(action, data2 = {}) {
    data2.action = action;
    return this.send(data2);
  }
  send(data2) {
    return this.consumer.send({
      command: "message",
      identifier: this.identifier,
      data: JSON.stringify(data2)
    });
  }
  unsubscribe() {
    return this.consumer.subscriptions.remove(this);
  }
};
var SubscriptionGuarantor = class {
  constructor(subscriptions) {
    this.subscriptions = subscriptions;
    this.pendingSubscriptions = [];
  }
  guarantee(subscription) {
    if (this.pendingSubscriptions.indexOf(subscription) == -1) {
      logger.log(`SubscriptionGuarantor guaranteeing ${subscription.identifier}`);
      this.pendingSubscriptions.push(subscription);
    } else {
      logger.log(`SubscriptionGuarantor already guaranteeing ${subscription.identifier}`);
    }
    this.startGuaranteeing();
  }
  forget(subscription) {
    logger.log(`SubscriptionGuarantor forgetting ${subscription.identifier}`);
    this.pendingSubscriptions = this.pendingSubscriptions.filter((s) => s !== subscription);
  }
  startGuaranteeing() {
    this.stopGuaranteeing();
    this.retrySubscribing();
  }
  stopGuaranteeing() {
    clearTimeout(this.retryTimeout);
  }
  retrySubscribing() {
    this.retryTimeout = setTimeout(() => {
      if (this.subscriptions && typeof this.subscriptions.subscribe === "function") {
        this.pendingSubscriptions.map((subscription) => {
          logger.log(`SubscriptionGuarantor resubscribing ${subscription.identifier}`);
          this.subscriptions.subscribe(subscription);
        });
      }
    }, 500);
  }
};
var Subscriptions = class {
  constructor(consumer2) {
    this.consumer = consumer2;
    this.guarantor = new SubscriptionGuarantor(this);
    this.subscriptions = [];
  }
  create(channelName, mixin) {
    const channel = channelName;
    const params = typeof channel === "object" ? channel : {
      channel
    };
    const subscription = new Subscription(this.consumer, params, mixin);
    return this.add(subscription);
  }
  add(subscription) {
    this.subscriptions.push(subscription);
    this.consumer.ensureActiveConnection();
    this.notify(subscription, "initialized");
    this.subscribe(subscription);
    return subscription;
  }
  remove(subscription) {
    this.forget(subscription);
    if (!this.findAll(subscription.identifier).length) {
      this.sendCommand(subscription, "unsubscribe");
    }
    return subscription;
  }
  reject(identifier) {
    return this.findAll(identifier).map((subscription) => {
      this.forget(subscription);
      this.notify(subscription, "rejected");
      return subscription;
    });
  }
  forget(subscription) {
    this.guarantor.forget(subscription);
    this.subscriptions = this.subscriptions.filter((s) => s !== subscription);
    return subscription;
  }
  findAll(identifier) {
    return this.subscriptions.filter((s) => s.identifier === identifier);
  }
  reload() {
    return this.subscriptions.map((subscription) => this.subscribe(subscription));
  }
  notifyAll(callbackName, ...args) {
    return this.subscriptions.map((subscription) => this.notify(subscription, callbackName, ...args));
  }
  notify(subscription, callbackName, ...args) {
    let subscriptions;
    if (typeof subscription === "string") {
      subscriptions = this.findAll(subscription);
    } else {
      subscriptions = [subscription];
    }
    return subscriptions.map((subscription2) => typeof subscription2[callbackName] === "function" ? subscription2[callbackName](...args) : void 0);
  }
  subscribe(subscription) {
    if (this.sendCommand(subscription, "subscribe")) {
      this.guarantor.guarantee(subscription);
    }
  }
  confirmSubscription(identifier) {
    logger.log(`Subscription confirmed ${identifier}`);
    this.findAll(identifier).map((subscription) => this.guarantor.forget(subscription));
  }
  sendCommand(subscription, command) {
    const { identifier } = subscription;
    return this.consumer.send({
      command,
      identifier
    });
  }
};
var Consumer = class {
  constructor(url) {
    this._url = url;
    this.subscriptions = new Subscriptions(this);
    this.connection = new Connection(this);
    this.subprotocols = [];
  }
  get url() {
    return createWebSocketURL(this._url);
  }
  send(data2) {
    return this.connection.send(data2);
  }
  connect() {
    return this.connection.open();
  }
  disconnect() {
    return this.connection.close({
      allowReconnect: false
    });
  }
  ensureActiveConnection() {
    if (!this.connection.isActive()) {
      return this.connection.open();
    }
  }
  addSubProtocol(subprotocol) {
    this.subprotocols = [...this.subprotocols, subprotocol];
  }
};
function createWebSocketURL(url) {
  if (typeof url === "function") {
    url = url();
  }
  if (url && !/^wss?:/i.test(url)) {
    const a = document.createElement("a");
    a.href = url;
    a.href = a.href;
    a.protocol = a.protocol.replace("http", "ws");
    return a.href;
  } else {
    return url;
  }
}
function createConsumer(url = getConfig("url") || INTERNAL.default_mount_path) {
  return new Consumer(url);
}
function getConfig(name) {
  const element = document.head.querySelector(`meta[name='action-cable-${name}']`);
  if (element) {
    return element.getAttribute("content");
  }
}

// node_modules/@hotwired/turbo/dist/turbo.es2017-esm.js
var turbo_es2017_esm_exports = {};
__export(turbo_es2017_esm_exports, {
  FetchEnctype: () => FetchEnctype,
  FetchMethod: () => FetchMethod,
  FetchRequest: () => FetchRequest,
  FetchResponse: () => FetchResponse,
  FrameElement: () => FrameElement,
  FrameLoadingStyle: () => FrameLoadingStyle,
  FrameRenderer: () => FrameRenderer,
  PageRenderer: () => PageRenderer,
  PageSnapshot: () => PageSnapshot,
  StreamActions: () => StreamActions,
  StreamElement: () => StreamElement,
  StreamSourceElement: () => StreamSourceElement,
  cache: () => cache,
  clearCache: () => clearCache,
  config: () => config,
  connectStreamSource: () => connectStreamSource,
  disconnectStreamSource: () => disconnectStreamSource,
  fetch: () => fetchWithTurboHeaders,
  fetchEnctypeFromString: () => fetchEnctypeFromString,
  fetchMethodFromString: () => fetchMethodFromString,
  isSafe: () => isSafe,
  morphBodyElements: () => morphBodyElements,
  morphChildren: () => morphChildren,
  morphElements: () => morphElements,
  morphTurboFrameElements: () => morphTurboFrameElements,
  navigator: () => navigator$1,
  registerAdapter: () => registerAdapter,
  renderStreamMessage: () => renderStreamMessage,
  session: () => session,
  setConfirmMethod: () => setConfirmMethod,
  setFormMode: () => setFormMode,
  setProgressBarDelay: () => setProgressBarDelay,
  start: () => start3,
  visit: () => visit
});
(function(prototype) {
  if (typeof prototype.requestSubmit == "function") return;
  prototype.requestSubmit = function(submitter2) {
    if (submitter2) {
      validateSubmitter(submitter2, this);
      submitter2.click();
    } else {
      submitter2 = document.createElement("input");
      submitter2.type = "submit";
      submitter2.hidden = true;
      this.appendChild(submitter2);
      submitter2.click();
      this.removeChild(submitter2);
    }
  };
  function validateSubmitter(submitter2, form) {
    submitter2 instanceof HTMLElement || raise(TypeError, "parameter 1 is not of type 'HTMLElement'");
    submitter2.type == "submit" || raise(TypeError, "The specified element is not a submit button");
    submitter2.form == form || raise(DOMException, "The specified element is not owned by this form element", "NotFoundError");
  }
  function raise(errorConstructor, message, name) {
    throw new errorConstructor("Failed to execute 'requestSubmit' on 'HTMLFormElement': " + message + ".", name);
  }
})(HTMLFormElement.prototype);
var submittersByForm = /* @__PURE__ */ new WeakMap();
function findSubmitterFromClickTarget(target) {
  const element = target instanceof Element ? target : target instanceof Node ? target.parentElement : null;
  const candidate = element ? element.closest("input, button") : null;
  return candidate?.type == "submit" ? candidate : null;
}
function clickCaptured(event2) {
  const submitter2 = findSubmitterFromClickTarget(event2.target);
  if (submitter2 && submitter2.form) {
    submittersByForm.set(submitter2.form, submitter2);
  }
}
(function() {
  if ("submitter" in Event.prototype) return;
  let prototype = window.Event.prototype;
  if ("SubmitEvent" in window) {
    const prototypeOfSubmitEvent = window.SubmitEvent.prototype;
    if (/Apple Computer/.test(navigator.vendor) && !("submitter" in prototypeOfSubmitEvent)) {
      prototype = prototypeOfSubmitEvent;
    } else {
      return;
    }
  }
  addEventListener("click", clickCaptured, true);
  Object.defineProperty(prototype, "submitter", {
    get() {
      if (this.type == "submit" && this.target instanceof HTMLFormElement) {
        return submittersByForm.get(this.target);
      }
    }
  });
})();
var FrameLoadingStyle = {
  eager: "eager",
  lazy: "lazy"
};
var FrameElement = class _FrameElement extends HTMLElement {
  static delegateConstructor = void 0;
  loaded = Promise.resolve();
  static get observedAttributes() {
    return ["disabled", "loading", "src"];
  }
  constructor() {
    super();
    this.delegate = new _FrameElement.delegateConstructor(this);
  }
  connectedCallback() {
    this.delegate.connect();
  }
  disconnectedCallback() {
    this.delegate.disconnect();
  }
  reload() {
    return this.delegate.sourceURLReloaded();
  }
  attributeChangedCallback(name) {
    if (name == "loading") {
      this.delegate.loadingStyleChanged();
    } else if (name == "src") {
      this.delegate.sourceURLChanged();
    } else if (name == "disabled") {
      this.delegate.disabledChanged();
    }
  }
  /**
   * Gets the URL to lazily load source HTML from
   */
  get src() {
    return this.getAttribute("src");
  }
  /**
   * Sets the URL to lazily load source HTML from
   */
  set src(value) {
    if (value) {
      this.setAttribute("src", value);
    } else {
      this.removeAttribute("src");
    }
  }
  /**
   * Gets the refresh mode for the frame.
   */
  get refresh() {
    return this.getAttribute("refresh");
  }
  /**
   * Sets the refresh mode for the frame.
   */
  set refresh(value) {
    if (value) {
      this.setAttribute("refresh", value);
    } else {
      this.removeAttribute("refresh");
    }
  }
  get shouldReloadWithMorph() {
    return this.src && this.refresh === "morph";
  }
  /**
   * Determines if the element is loading
   */
  get loading() {
    return frameLoadingStyleFromString(this.getAttribute("loading") || "");
  }
  /**
   * Sets the value of if the element is loading
   */
  set loading(value) {
    if (value) {
      this.setAttribute("loading", value);
    } else {
      this.removeAttribute("loading");
    }
  }
  /**
   * Gets the disabled state of the frame.
   *
   * If disabled, no requests will be intercepted by the frame.
   */
  get disabled() {
    return this.hasAttribute("disabled");
  }
  /**
   * Sets the disabled state of the frame.
   *
   * If disabled, no requests will be intercepted by the frame.
   */
  set disabled(value) {
    if (value) {
      this.setAttribute("disabled", "");
    } else {
      this.removeAttribute("disabled");
    }
  }
  /**
   * Gets the autoscroll state of the frame.
   *
   * If true, the frame will be scrolled into view automatically on update.
   */
  get autoscroll() {
    return this.hasAttribute("autoscroll");
  }
  /**
   * Sets the autoscroll state of the frame.
   *
   * If true, the frame will be scrolled into view automatically on update.
   */
  set autoscroll(value) {
    if (value) {
      this.setAttribute("autoscroll", "");
    } else {
      this.removeAttribute("autoscroll");
    }
  }
  /**
   * Determines if the element has finished loading
   */
  get complete() {
    return !this.delegate.isLoading;
  }
  /**
   * Gets the active state of the frame.
   *
   * If inactive, source changes will not be observed.
   */
  get isActive() {
    return this.ownerDocument === document && !this.isPreview;
  }
  /**
   * Sets the active state of the frame.
   *
   * If inactive, source changes will not be observed.
   */
  get isPreview() {
    return this.ownerDocument?.documentElement?.hasAttribute("data-turbo-preview");
  }
};
function frameLoadingStyleFromString(style2) {
  switch (style2.toLowerCase()) {
    case "lazy":
      return FrameLoadingStyle.lazy;
    default:
      return FrameLoadingStyle.eager;
  }
}
var drive = {
  enabled: true,
  progressBarDelay: 500,
  unvisitableExtensions: /* @__PURE__ */ new Set(
    [
      ".7z",
      ".aac",
      ".apk",
      ".avi",
      ".bmp",
      ".bz2",
      ".css",
      ".csv",
      ".deb",
      ".dmg",
      ".doc",
      ".docx",
      ".exe",
      ".gif",
      ".gz",
      ".heic",
      ".heif",
      ".ico",
      ".iso",
      ".jpeg",
      ".jpg",
      ".js",
      ".json",
      ".m4a",
      ".mkv",
      ".mov",
      ".mp3",
      ".mp4",
      ".mpeg",
      ".mpg",
      ".msi",
      ".ogg",
      ".ogv",
      ".pdf",
      ".pkg",
      ".png",
      ".ppt",
      ".pptx",
      ".rar",
      ".rtf",
      ".svg",
      ".tar",
      ".tif",
      ".tiff",
      ".txt",
      ".wav",
      ".webm",
      ".webp",
      ".wma",
      ".wmv",
      ".xls",
      ".xlsx",
      ".xml",
      ".zip"
    ]
  )
};
function activateScriptElement(element) {
  if (element.getAttribute("data-turbo-eval") == "false") {
    return element;
  } else {
    const createdScriptElement = document.createElement("script");
    const cspNonce = getCspNonce();
    if (cspNonce) {
      createdScriptElement.nonce = cspNonce;
    }
    createdScriptElement.textContent = element.textContent;
    createdScriptElement.async = false;
    copyElementAttributes(createdScriptElement, element);
    return createdScriptElement;
  }
}
function copyElementAttributes(destinationElement, sourceElement) {
  for (const { name, value } of sourceElement.attributes) {
    destinationElement.setAttribute(name, value);
  }
}
function createDocumentFragment(html) {
  const template = document.createElement("template");
  template.innerHTML = html;
  return template.content;
}
function dispatch2(eventName, { target, cancelable, detail } = {}) {
  const event2 = new CustomEvent(eventName, {
    cancelable,
    bubbles: true,
    composed: true,
    detail
  });
  if (target && target.isConnected) {
    target.dispatchEvent(event2);
  } else {
    document.documentElement.dispatchEvent(event2);
  }
  return event2;
}
function cancelEvent(event2) {
  event2.preventDefault();
  event2.stopImmediatePropagation();
}
function nextRepaint() {
  if (document.visibilityState === "hidden") {
    return nextEventLoopTick();
  } else {
    return nextAnimationFrame();
  }
}
function nextAnimationFrame() {
  return new Promise((resolve) => requestAnimationFrame(() => resolve()));
}
function nextEventLoopTick() {
  return new Promise((resolve) => setTimeout(() => resolve(), 0));
}
function nextMicrotask() {
  return Promise.resolve();
}
function parseHTMLDocument(html = "") {
  return new DOMParser().parseFromString(html, "text/html");
}
function unindent(strings, ...values) {
  const lines = interpolate(strings, values).replace(/^\n/, "").split("\n");
  const match = lines[0].match(/^\s+/);
  const indent = match ? match[0].length : 0;
  return lines.map((line) => line.slice(indent)).join("\n");
}
function interpolate(strings, values) {
  return strings.reduce((result, string, i) => {
    const value = values[i] == void 0 ? "" : values[i];
    return result + string + value;
  }, "");
}
function uuid() {
  return Array.from({ length: 36 }).map((_, i) => {
    if (i == 8 || i == 13 || i == 18 || i == 23) {
      return "-";
    } else if (i == 14) {
      return "4";
    } else if (i == 19) {
      return (Math.floor(Math.random() * 4) + 8).toString(16);
    } else {
      return Math.floor(Math.random() * 15).toString(16);
    }
  }).join("");
}
function getAttribute(attributeName, ...elements) {
  for (const value of elements.map((element) => element?.getAttribute(attributeName))) {
    if (typeof value == "string") return value;
  }
  return null;
}
function hasAttribute(attributeName, ...elements) {
  return elements.some((element) => element && element.hasAttribute(attributeName));
}
function markAsBusy(...elements) {
  for (const element of elements) {
    if (element.localName == "turbo-frame") {
      element.setAttribute("busy", "");
    }
    element.setAttribute("aria-busy", "true");
  }
}
function clearBusyState(...elements) {
  for (const element of elements) {
    if (element.localName == "turbo-frame") {
      element.removeAttribute("busy");
    }
    element.removeAttribute("aria-busy");
  }
}
function waitForLoad(element, timeoutInMilliseconds = 2e3) {
  return new Promise((resolve) => {
    const onComplete = () => {
      element.removeEventListener("error", onComplete);
      element.removeEventListener("load", onComplete);
      resolve();
    };
    element.addEventListener("load", onComplete, { once: true });
    element.addEventListener("error", onComplete, { once: true });
    setTimeout(resolve, timeoutInMilliseconds);
  });
}
function getHistoryMethodForAction(action) {
  switch (action) {
    case "replace":
      return history.replaceState;
    case "advance":
    case "restore":
      return history.pushState;
  }
}
function isAction(action) {
  return action == "advance" || action == "replace" || action == "restore";
}
function getVisitAction(...elements) {
  const action = getAttribute("data-turbo-action", ...elements);
  return isAction(action) ? action : null;
}
function getMetaElement(name) {
  return document.querySelector(`meta[name="${name}"]`);
}
function getMetaContent(name) {
  const element = getMetaElement(name);
  return element && element.content;
}
function getCspNonce() {
  const element = getMetaElement("csp-nonce");
  if (element) {
    const { nonce, content } = element;
    return nonce == "" ? content : nonce;
  }
}
function setMetaContent(name, content) {
  let element = getMetaElement(name);
  if (!element) {
    element = document.createElement("meta");
    element.setAttribute("name", name);
    document.head.appendChild(element);
  }
  element.setAttribute("content", content);
  return element;
}
function findClosestRecursively(element, selector) {
  if (element instanceof Element) {
    return element.closest(selector) || findClosestRecursively(element.assignedSlot || element.getRootNode()?.host, selector);
  }
}
function elementIsFocusable(element) {
  const inertDisabledOrHidden = "[inert], :disabled, [hidden], details:not([open]), dialog:not([open])";
  return !!element && element.closest(inertDisabledOrHidden) == null && typeof element.focus == "function";
}
function queryAutofocusableElement(elementOrDocumentFragment) {
  return Array.from(elementOrDocumentFragment.querySelectorAll("[autofocus]")).find(elementIsFocusable);
}
async function around(callback, reader) {
  const before = reader();
  callback();
  await nextAnimationFrame();
  const after = reader();
  return [before, after];
}
function doesNotTargetIFrame(name) {
  if (name === "_blank") {
    return false;
  } else if (name) {
    for (const element of document.getElementsByName(name)) {
      if (element instanceof HTMLIFrameElement) return false;
    }
    return true;
  } else {
    return true;
  }
}
function findLinkFromClickTarget(target) {
  const link = findClosestRecursively(target, "a[href], a[xlink\\:href]");
  if (!link) return null;
  if (link.hasAttribute("download")) return null;
  if (link.hasAttribute("target") && link.target !== "_self") return null;
  return link;
}
function getLocationForLink(link) {
  return expandURL(link.getAttribute("href") || "");
}
function debounce2(fn, delay) {
  let timeoutId = null;
  return (...args) => {
    const callback = () => fn.apply(this, args);
    clearTimeout(timeoutId);
    timeoutId = setTimeout(callback, delay);
  };
}
var submitter = {
  "aria-disabled": {
    beforeSubmit: (submitter2) => {
      submitter2.setAttribute("aria-disabled", "true");
      submitter2.addEventListener("click", cancelEvent);
    },
    afterSubmit: (submitter2) => {
      submitter2.removeAttribute("aria-disabled");
      submitter2.removeEventListener("click", cancelEvent);
    }
  },
  "disabled": {
    beforeSubmit: (submitter2) => submitter2.disabled = true,
    afterSubmit: (submitter2) => submitter2.disabled = false
  }
};
var Config = class {
  #submitter = null;
  constructor(config2) {
    Object.assign(this, config2);
  }
  get submitter() {
    return this.#submitter;
  }
  set submitter(value) {
    this.#submitter = submitter[value] || value;
  }
};
var forms = new Config({
  mode: "on",
  submitter: "disabled"
});
var config = {
  drive,
  forms
};
function expandURL(locatable) {
  return new URL(locatable.toString(), document.baseURI);
}
function getAnchor(url) {
  let anchorMatch;
  if (url.hash) {
    return url.hash.slice(1);
  } else if (anchorMatch = url.href.match(/#(.*)$/)) {
    return anchorMatch[1];
  }
}
function getAction$1(form, submitter2) {
  const action = submitter2?.getAttribute("formaction") || form.getAttribute("action") || form.action;
  return expandURL(action);
}
function getExtension(url) {
  return (getLastPathComponent(url).match(/\.[^.]*$/) || [])[0] || "";
}
function isPrefixedBy(baseURL, url) {
  const prefix2 = addTrailingSlash(url.origin + url.pathname);
  return addTrailingSlash(baseURL.href) === prefix2 || baseURL.href.startsWith(prefix2);
}
function locationIsVisitable(location2, rootLocation) {
  return isPrefixedBy(location2, rootLocation) && !config.drive.unvisitableExtensions.has(getExtension(location2));
}
function getRequestURL(url) {
  const anchor = getAnchor(url);
  return anchor != null ? url.href.slice(0, -(anchor.length + 1)) : url.href;
}
function toCacheKey(url) {
  return getRequestURL(url);
}
function urlsAreEqual(left, right) {
  return expandURL(left).href == expandURL(right).href;
}
function getPathComponents(url) {
  return url.pathname.split("/").slice(1);
}
function getLastPathComponent(url) {
  return getPathComponents(url).slice(-1)[0];
}
function addTrailingSlash(value) {
  return value.endsWith("/") ? value : value + "/";
}
var FetchResponse = class {
  constructor(response) {
    this.response = response;
  }
  get succeeded() {
    return this.response.ok;
  }
  get failed() {
    return !this.succeeded;
  }
  get clientError() {
    return this.statusCode >= 400 && this.statusCode <= 499;
  }
  get serverError() {
    return this.statusCode >= 500 && this.statusCode <= 599;
  }
  get redirected() {
    return this.response.redirected;
  }
  get location() {
    return expandURL(this.response.url);
  }
  get isHTML() {
    return this.contentType && this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/);
  }
  get statusCode() {
    return this.response.status;
  }
  get contentType() {
    return this.header("Content-Type");
  }
  get responseText() {
    return this.response.clone().text();
  }
  get responseHTML() {
    if (this.isHTML) {
      return this.response.clone().text();
    } else {
      return Promise.resolve(void 0);
    }
  }
  header(name) {
    return this.response.headers.get(name);
  }
};
var LimitedSet = class extends Set {
  constructor(maxSize) {
    super();
    this.maxSize = maxSize;
  }
  add(value) {
    if (this.size >= this.maxSize) {
      const iterator = this.values();
      const oldestValue = iterator.next().value;
      this.delete(oldestValue);
    }
    super.add(value);
  }
};
var recentRequests = new LimitedSet(20);
function fetchWithTurboHeaders(url, options = {}) {
  const modifiedHeaders = new Headers(options.headers || {});
  const requestUID = uuid();
  recentRequests.add(requestUID);
  modifiedHeaders.append("X-Turbo-Request-Id", requestUID);
  return window.fetch(url, {
    ...options,
    headers: modifiedHeaders
  });
}
function fetchMethodFromString(method) {
  switch (method.toLowerCase()) {
    case "get":
      return FetchMethod.get;
    case "post":
      return FetchMethod.post;
    case "put":
      return FetchMethod.put;
    case "patch":
      return FetchMethod.patch;
    case "delete":
      return FetchMethod.delete;
  }
}
var FetchMethod = {
  get: "get",
  post: "post",
  put: "put",
  patch: "patch",
  delete: "delete"
};
function fetchEnctypeFromString(encoding) {
  switch (encoding.toLowerCase()) {
    case FetchEnctype.multipart:
      return FetchEnctype.multipart;
    case FetchEnctype.plain:
      return FetchEnctype.plain;
    default:
      return FetchEnctype.urlEncoded;
  }
}
var FetchEnctype = {
  urlEncoded: "application/x-www-form-urlencoded",
  multipart: "multipart/form-data",
  plain: "text/plain"
};
var FetchRequest = class {
  abortController = new AbortController();
  #resolveRequestPromise = (_value) => {
  };
  constructor(delegate, method, location2, requestBody = new URLSearchParams(), target = null, enctype = FetchEnctype.urlEncoded) {
    const [url, body] = buildResourceAndBody(expandURL(location2), method, requestBody, enctype);
    this.delegate = delegate;
    this.url = url;
    this.target = target;
    this.fetchOptions = {
      credentials: "same-origin",
      redirect: "follow",
      method: method.toUpperCase(),
      headers: { ...this.defaultHeaders },
      body,
      signal: this.abortSignal,
      referrer: this.delegate.referrer?.href
    };
    this.enctype = enctype;
  }
  get method() {
    return this.fetchOptions.method;
  }
  set method(value) {
    const fetchBody = this.isSafe ? this.url.searchParams : this.fetchOptions.body || new FormData();
    const fetchMethod = fetchMethodFromString(value) || FetchMethod.get;
    this.url.search = "";
    const [url, body] = buildResourceAndBody(this.url, fetchMethod, fetchBody, this.enctype);
    this.url = url;
    this.fetchOptions.body = body;
    this.fetchOptions.method = fetchMethod.toUpperCase();
  }
  get headers() {
    return this.fetchOptions.headers;
  }
  set headers(value) {
    this.fetchOptions.headers = value;
  }
  get body() {
    if (this.isSafe) {
      return this.url.searchParams;
    } else {
      return this.fetchOptions.body;
    }
  }
  set body(value) {
    this.fetchOptions.body = value;
  }
  get location() {
    return this.url;
  }
  get params() {
    return this.url.searchParams;
  }
  get entries() {
    return this.body ? Array.from(this.body.entries()) : [];
  }
  cancel() {
    this.abortController.abort();
  }
  async perform() {
    const { fetchOptions } = this;
    this.delegate.prepareRequest(this);
    const event2 = await this.#allowRequestToBeIntercepted(fetchOptions);
    try {
      this.delegate.requestStarted(this);
      if (event2.detail.fetchRequest) {
        this.response = event2.detail.fetchRequest.response;
      } else {
        this.response = fetchWithTurboHeaders(this.url.href, fetchOptions);
      }
      const response = await this.response;
      return await this.receive(response);
    } catch (error3) {
      if (error3.name !== "AbortError") {
        if (this.#willDelegateErrorHandling(error3)) {
          this.delegate.requestErrored(this, error3);
        }
        throw error3;
      }
    } finally {
      this.delegate.requestFinished(this);
    }
  }
  async receive(response) {
    const fetchResponse = new FetchResponse(response);
    const event2 = dispatch2("turbo:before-fetch-response", {
      cancelable: true,
      detail: { fetchResponse },
      target: this.target
    });
    if (event2.defaultPrevented) {
      this.delegate.requestPreventedHandlingResponse(this, fetchResponse);
    } else if (fetchResponse.succeeded) {
      this.delegate.requestSucceededWithResponse(this, fetchResponse);
    } else {
      this.delegate.requestFailedWithResponse(this, fetchResponse);
    }
    return fetchResponse;
  }
  get defaultHeaders() {
    return {
      Accept: "text/html, application/xhtml+xml"
    };
  }
  get isSafe() {
    return isSafe(this.method);
  }
  get abortSignal() {
    return this.abortController.signal;
  }
  acceptResponseType(mimeType) {
    this.headers["Accept"] = [mimeType, this.headers["Accept"]].join(", ");
  }
  async #allowRequestToBeIntercepted(fetchOptions) {
    const requestInterception = new Promise((resolve) => this.#resolveRequestPromise = resolve);
    const event2 = dispatch2("turbo:before-fetch-request", {
      cancelable: true,
      detail: {
        fetchOptions,
        url: this.url,
        resume: this.#resolveRequestPromise
      },
      target: this.target
    });
    this.url = event2.detail.url;
    if (event2.defaultPrevented) await requestInterception;
    return event2;
  }
  #willDelegateErrorHandling(error3) {
    const event2 = dispatch2("turbo:fetch-request-error", {
      target: this.target,
      cancelable: true,
      detail: { request: this, error: error3 }
    });
    return !event2.defaultPrevented;
  }
};
function isSafe(fetchMethod) {
  return fetchMethodFromString(fetchMethod) == FetchMethod.get;
}
function buildResourceAndBody(resource, method, requestBody, enctype) {
  const searchParams = Array.from(requestBody).length > 0 ? new URLSearchParams(entriesExcludingFiles(requestBody)) : resource.searchParams;
  if (isSafe(method)) {
    return [mergeIntoURLSearchParams(resource, searchParams), null];
  } else if (enctype == FetchEnctype.urlEncoded) {
    return [resource, searchParams];
  } else {
    return [resource, requestBody];
  }
}
function entriesExcludingFiles(requestBody) {
  const entries = [];
  for (const [name, value] of requestBody) {
    if (value instanceof File) continue;
    else entries.push([name, value]);
  }
  return entries;
}
function mergeIntoURLSearchParams(url, requestBody) {
  const searchParams = new URLSearchParams(entriesExcludingFiles(requestBody));
  url.search = searchParams.toString();
  return url;
}
var AppearanceObserver = class {
  started = false;
  constructor(delegate, element) {
    this.delegate = delegate;
    this.element = element;
    this.intersectionObserver = new IntersectionObserver(this.intersect);
  }
  start() {
    if (!this.started) {
      this.started = true;
      this.intersectionObserver.observe(this.element);
    }
  }
  stop() {
    if (this.started) {
      this.started = false;
      this.intersectionObserver.unobserve(this.element);
    }
  }
  intersect = (entries) => {
    const lastEntry = entries.slice(-1)[0];
    if (lastEntry?.isIntersecting) {
      this.delegate.elementAppearedInViewport(this.element);
    }
  };
};
var StreamMessage = class {
  static contentType = "text/vnd.turbo-stream.html";
  static wrap(message) {
    if (typeof message == "string") {
      return new this(createDocumentFragment(message));
    } else {
      return message;
    }
  }
  constructor(fragment) {
    this.fragment = importStreamElements(fragment);
  }
};
function importStreamElements(fragment) {
  for (const element of fragment.querySelectorAll("turbo-stream")) {
    const streamElement = document.importNode(element, true);
    for (const inertScriptElement of streamElement.templateElement.content.querySelectorAll("script")) {
      inertScriptElement.replaceWith(activateScriptElement(inertScriptElement));
    }
    element.replaceWith(streamElement);
  }
  return fragment;
}
var PREFETCH_DELAY = 100;
var PrefetchCache = class {
  #prefetchTimeout = null;
  #prefetched = null;
  get(url) {
    if (this.#prefetched && this.#prefetched.url === url && this.#prefetched.expire > Date.now()) {
      return this.#prefetched.request;
    }
  }
  setLater(url, request, ttl) {
    this.clear();
    this.#prefetchTimeout = setTimeout(() => {
      request.perform();
      this.set(url, request, ttl);
      this.#prefetchTimeout = null;
    }, PREFETCH_DELAY);
  }
  set(url, request, ttl) {
    this.#prefetched = { url, request, expire: new Date((/* @__PURE__ */ new Date()).getTime() + ttl) };
  }
  clear() {
    if (this.#prefetchTimeout) clearTimeout(this.#prefetchTimeout);
    this.#prefetched = null;
  }
};
var cacheTtl = 10 * 1e3;
var prefetchCache = new PrefetchCache();
var FormSubmissionState = {
  initialized: "initialized",
  requesting: "requesting",
  waiting: "waiting",
  receiving: "receiving",
  stopping: "stopping",
  stopped: "stopped"
};
var FormSubmission = class _FormSubmission {
  state = FormSubmissionState.initialized;
  static confirmMethod(message) {
    return Promise.resolve(confirm(message));
  }
  constructor(delegate, formElement, submitter2, mustRedirect = false) {
    const method = getMethod(formElement, submitter2);
    const action = getAction(getFormAction(formElement, submitter2), method);
    const body = buildFormData(formElement, submitter2);
    const enctype = getEnctype(formElement, submitter2);
    this.delegate = delegate;
    this.formElement = formElement;
    this.submitter = submitter2;
    this.fetchRequest = new FetchRequest(this, method, action, body, formElement, enctype);
    this.mustRedirect = mustRedirect;
  }
  get method() {
    return this.fetchRequest.method;
  }
  set method(value) {
    this.fetchRequest.method = value;
  }
  get action() {
    return this.fetchRequest.url.toString();
  }
  set action(value) {
    this.fetchRequest.url = expandURL(value);
  }
  get body() {
    return this.fetchRequest.body;
  }
  get enctype() {
    return this.fetchRequest.enctype;
  }
  get isSafe() {
    return this.fetchRequest.isSafe;
  }
  get location() {
    return this.fetchRequest.url;
  }
  // The submission process
  async start() {
    const { initialized, requesting } = FormSubmissionState;
    const confirmationMessage = getAttribute("data-turbo-confirm", this.submitter, this.formElement);
    if (typeof confirmationMessage === "string") {
      const confirmMethod = typeof config.forms.confirm === "function" ? config.forms.confirm : _FormSubmission.confirmMethod;
      const answer = await confirmMethod(confirmationMessage, this.formElement, this.submitter);
      if (!answer) {
        return;
      }
    }
    if (this.state == initialized) {
      this.state = requesting;
      return this.fetchRequest.perform();
    }
  }
  stop() {
    const { stopping, stopped } = FormSubmissionState;
    if (this.state != stopping && this.state != stopped) {
      this.state = stopping;
      this.fetchRequest.cancel();
      return true;
    }
  }
  // Fetch request delegate
  prepareRequest(request) {
    if (!request.isSafe) {
      const token = getCookieValue(getMetaContent("csrf-param")) || getMetaContent("csrf-token");
      if (token) {
        request.headers["X-CSRF-Token"] = token;
      }
    }
    if (this.requestAcceptsTurboStreamResponse(request)) {
      request.acceptResponseType(StreamMessage.contentType);
    }
  }
  requestStarted(_request) {
    this.state = FormSubmissionState.waiting;
    if (this.submitter) config.forms.submitter.beforeSubmit(this.submitter);
    this.setSubmitsWith();
    markAsBusy(this.formElement);
    dispatch2("turbo:submit-start", {
      target: this.formElement,
      detail: { formSubmission: this }
    });
    this.delegate.formSubmissionStarted(this);
  }
  requestPreventedHandlingResponse(request, response) {
    prefetchCache.clear();
    this.result = { success: response.succeeded, fetchResponse: response };
  }
  requestSucceededWithResponse(request, response) {
    if (response.clientError || response.serverError) {
      this.delegate.formSubmissionFailedWithResponse(this, response);
      return;
    }
    prefetchCache.clear();
    if (this.requestMustRedirect(request) && responseSucceededWithoutRedirect(response)) {
      const error3 = new Error("Form responses must redirect to another location");
      this.delegate.formSubmissionErrored(this, error3);
    } else {
      this.state = FormSubmissionState.receiving;
      this.result = { success: true, fetchResponse: response };
      this.delegate.formSubmissionSucceededWithResponse(this, response);
    }
  }
  requestFailedWithResponse(request, response) {
    this.result = { success: false, fetchResponse: response };
    this.delegate.formSubmissionFailedWithResponse(this, response);
  }
  requestErrored(request, error3) {
    this.result = { success: false, error: error3 };
    this.delegate.formSubmissionErrored(this, error3);
  }
  requestFinished(_request) {
    this.state = FormSubmissionState.stopped;
    if (this.submitter) config.forms.submitter.afterSubmit(this.submitter);
    this.resetSubmitterText();
    clearBusyState(this.formElement);
    dispatch2("turbo:submit-end", {
      target: this.formElement,
      detail: { formSubmission: this, ...this.result }
    });
    this.delegate.formSubmissionFinished(this);
  }
  // Private
  setSubmitsWith() {
    if (!this.submitter || !this.submitsWith) return;
    if (this.submitter.matches("button")) {
      this.originalSubmitText = this.submitter.innerHTML;
      this.submitter.innerHTML = this.submitsWith;
    } else if (this.submitter.matches("input")) {
      const input = this.submitter;
      this.originalSubmitText = input.value;
      input.value = this.submitsWith;
    }
  }
  resetSubmitterText() {
    if (!this.submitter || !this.originalSubmitText) return;
    if (this.submitter.matches("button")) {
      this.submitter.innerHTML = this.originalSubmitText;
    } else if (this.submitter.matches("input")) {
      const input = this.submitter;
      input.value = this.originalSubmitText;
    }
  }
  requestMustRedirect(request) {
    return !request.isSafe && this.mustRedirect;
  }
  requestAcceptsTurboStreamResponse(request) {
    return !request.isSafe || hasAttribute("data-turbo-stream", this.submitter, this.formElement);
  }
  get submitsWith() {
    return this.submitter?.getAttribute("data-turbo-submits-with");
  }
};
function buildFormData(formElement, submitter2) {
  const formData = new FormData(formElement);
  const name = submitter2?.getAttribute("name");
  const value = submitter2?.getAttribute("value");
  if (name) {
    formData.append(name, value || "");
  }
  return formData;
}
function getCookieValue(cookieName) {
  if (cookieName != null) {
    const cookies = document.cookie ? document.cookie.split("; ") : [];
    const cookie = cookies.find((cookie2) => cookie2.startsWith(cookieName));
    if (cookie) {
      const value = cookie.split("=").slice(1).join("=");
      return value ? decodeURIComponent(value) : void 0;
    }
  }
}
function responseSucceededWithoutRedirect(response) {
  return response.statusCode == 200 && !response.redirected;
}
function getFormAction(formElement, submitter2) {
  const formElementAction = typeof formElement.action === "string" ? formElement.action : null;
  if (submitter2?.hasAttribute("formaction")) {
    return submitter2.getAttribute("formaction") || "";
  } else {
    return formElement.getAttribute("action") || formElementAction || "";
  }
}
function getAction(formAction, fetchMethod) {
  const action = expandURL(formAction);
  if (isSafe(fetchMethod)) {
    action.search = "";
  }
  return action;
}
function getMethod(formElement, submitter2) {
  const method = submitter2?.getAttribute("formmethod") || formElement.getAttribute("method") || "";
  return fetchMethodFromString(method.toLowerCase()) || FetchMethod.get;
}
function getEnctype(formElement, submitter2) {
  return fetchEnctypeFromString(submitter2?.getAttribute("formenctype") || formElement.enctype);
}
var Snapshot = class {
  constructor(element) {
    this.element = element;
  }
  get activeElement() {
    return this.element.ownerDocument.activeElement;
  }
  get children() {
    return [...this.element.children];
  }
  hasAnchor(anchor) {
    return this.getElementForAnchor(anchor) != null;
  }
  getElementForAnchor(anchor) {
    return anchor ? this.element.querySelector(`[id='${anchor}'], a[name='${anchor}']`) : null;
  }
  get isConnected() {
    return this.element.isConnected;
  }
  get firstAutofocusableElement() {
    return queryAutofocusableElement(this.element);
  }
  get permanentElements() {
    return queryPermanentElementsAll(this.element);
  }
  getPermanentElementById(id2) {
    return getPermanentElementById(this.element, id2);
  }
  getPermanentElementMapForSnapshot(snapshot) {
    const permanentElementMap = {};
    for (const currentPermanentElement of this.permanentElements) {
      const { id: id2 } = currentPermanentElement;
      const newPermanentElement = snapshot.getPermanentElementById(id2);
      if (newPermanentElement) {
        permanentElementMap[id2] = [currentPermanentElement, newPermanentElement];
      }
    }
    return permanentElementMap;
  }
};
function getPermanentElementById(node, id2) {
  return node.querySelector(`#${id2}[data-turbo-permanent]`);
}
function queryPermanentElementsAll(node) {
  return node.querySelectorAll("[id][data-turbo-permanent]");
}
var FormSubmitObserver = class {
  started = false;
  constructor(delegate, eventTarget) {
    this.delegate = delegate;
    this.eventTarget = eventTarget;
  }
  start() {
    if (!this.started) {
      this.eventTarget.addEventListener("submit", this.submitCaptured, true);
      this.started = true;
    }
  }
  stop() {
    if (this.started) {
      this.eventTarget.removeEventListener("submit", this.submitCaptured, true);
      this.started = false;
    }
  }
  submitCaptured = () => {
    this.eventTarget.removeEventListener("submit", this.submitBubbled, false);
    this.eventTarget.addEventListener("submit", this.submitBubbled, false);
  };
  submitBubbled = (event2) => {
    if (!event2.defaultPrevented) {
      const form = event2.target instanceof HTMLFormElement ? event2.target : void 0;
      const submitter2 = event2.submitter || void 0;
      if (form && submissionDoesNotDismissDialog(form, submitter2) && submissionDoesNotTargetIFrame(form, submitter2) && this.delegate.willSubmitForm(form, submitter2)) {
        event2.preventDefault();
        event2.stopImmediatePropagation();
        this.delegate.formSubmitted(form, submitter2);
      }
    }
  };
};
function submissionDoesNotDismissDialog(form, submitter2) {
  const method = submitter2?.getAttribute("formmethod") || form.getAttribute("method");
  return method != "dialog";
}
function submissionDoesNotTargetIFrame(form, submitter2) {
  const target = submitter2?.getAttribute("formtarget") || form.getAttribute("target");
  return doesNotTargetIFrame(target);
}
var View = class {
  #resolveRenderPromise = (_value) => {
  };
  #resolveInterceptionPromise = (_value) => {
  };
  constructor(delegate, element) {
    this.delegate = delegate;
    this.element = element;
  }
  // Scrolling
  scrollToAnchor(anchor) {
    const element = this.snapshot.getElementForAnchor(anchor);
    if (element) {
      this.focusElement(element);
      this.scrollToElement(element);
    } else {
      this.scrollToPosition({ x: 0, y: 0 });
    }
  }
  scrollToAnchorFromLocation(location2) {
    this.scrollToAnchor(getAnchor(location2));
  }
  scrollToElement(element) {
    element.scrollIntoView();
  }
  focusElement(element) {
    if (element instanceof HTMLElement) {
      if (element.hasAttribute("tabindex")) {
        element.focus();
      } else {
        element.setAttribute("tabindex", "-1");
        element.focus();
        element.removeAttribute("tabindex");
      }
    }
  }
  scrollToPosition({ x, y }) {
    this.scrollRoot.scrollTo(x, y);
  }
  scrollToTop() {
    this.scrollToPosition({ x: 0, y: 0 });
  }
  get scrollRoot() {
    return window;
  }
  // Rendering
  async render(renderer) {
    const { isPreview, shouldRender, willRender, newSnapshot: snapshot } = renderer;
    const shouldInvalidate = willRender;
    if (shouldRender) {
      try {
        this.renderPromise = new Promise((resolve) => this.#resolveRenderPromise = resolve);
        this.renderer = renderer;
        await this.prepareToRenderSnapshot(renderer);
        const renderInterception = new Promise((resolve) => this.#resolveInterceptionPromise = resolve);
        const options = { resume: this.#resolveInterceptionPromise, render: this.renderer.renderElement, renderMethod: this.renderer.renderMethod };
        const immediateRender = this.delegate.allowsImmediateRender(snapshot, options);
        if (!immediateRender) await renderInterception;
        await this.renderSnapshot(renderer);
        this.delegate.viewRenderedSnapshot(snapshot, isPreview, this.renderer.renderMethod);
        this.delegate.preloadOnLoadLinksForView(this.element);
        this.finishRenderingSnapshot(renderer);
      } finally {
        delete this.renderer;
        this.#resolveRenderPromise(void 0);
        delete this.renderPromise;
      }
    } else if (shouldInvalidate) {
      this.invalidate(renderer.reloadReason);
    }
  }
  invalidate(reason) {
    this.delegate.viewInvalidated(reason);
  }
  async prepareToRenderSnapshot(renderer) {
    this.markAsPreview(renderer.isPreview);
    await renderer.prepareToRender();
  }
  markAsPreview(isPreview) {
    if (isPreview) {
      this.element.setAttribute("data-turbo-preview", "");
    } else {
      this.element.removeAttribute("data-turbo-preview");
    }
  }
  markVisitDirection(direction) {
    this.element.setAttribute("data-turbo-visit-direction", direction);
  }
  unmarkVisitDirection() {
    this.element.removeAttribute("data-turbo-visit-direction");
  }
  async renderSnapshot(renderer) {
    await renderer.render();
  }
  finishRenderingSnapshot(renderer) {
    renderer.finishRendering();
  }
};
var FrameView = class extends View {
  missing() {
    this.element.innerHTML = `<strong class="turbo-frame-error">Content missing</strong>`;
  }
  get snapshot() {
    return new Snapshot(this.element);
  }
};
var LinkInterceptor = class {
  constructor(delegate, element) {
    this.delegate = delegate;
    this.element = element;
  }
  start() {
    this.element.addEventListener("click", this.clickBubbled);
    document.addEventListener("turbo:click", this.linkClicked);
    document.addEventListener("turbo:before-visit", this.willVisit);
  }
  stop() {
    this.element.removeEventListener("click", this.clickBubbled);
    document.removeEventListener("turbo:click", this.linkClicked);
    document.removeEventListener("turbo:before-visit", this.willVisit);
  }
  clickBubbled = (event2) => {
    if (this.clickEventIsSignificant(event2)) {
      this.clickEvent = event2;
    } else {
      delete this.clickEvent;
    }
  };
  linkClicked = (event2) => {
    if (this.clickEvent && this.clickEventIsSignificant(event2)) {
      if (this.delegate.shouldInterceptLinkClick(event2.target, event2.detail.url, event2.detail.originalEvent)) {
        this.clickEvent.preventDefault();
        event2.preventDefault();
        this.delegate.linkClickIntercepted(event2.target, event2.detail.url, event2.detail.originalEvent);
      }
    }
    delete this.clickEvent;
  };
  willVisit = (_event) => {
    delete this.clickEvent;
  };
  clickEventIsSignificant(event2) {
    const target = event2.composed ? event2.target?.parentElement : event2.target;
    const element = findLinkFromClickTarget(target) || target;
    return element instanceof Element && element.closest("turbo-frame, html") == this.element;
  }
};
var LinkClickObserver = class {
  started = false;
  constructor(delegate, eventTarget) {
    this.delegate = delegate;
    this.eventTarget = eventTarget;
  }
  start() {
    if (!this.started) {
      this.eventTarget.addEventListener("click", this.clickCaptured, true);
      this.started = true;
    }
  }
  stop() {
    if (this.started) {
      this.eventTarget.removeEventListener("click", this.clickCaptured, true);
      this.started = false;
    }
  }
  clickCaptured = () => {
    this.eventTarget.removeEventListener("click", this.clickBubbled, false);
    this.eventTarget.addEventListener("click", this.clickBubbled, false);
  };
  clickBubbled = (event2) => {
    if (event2 instanceof MouseEvent && this.clickEventIsSignificant(event2)) {
      const target = event2.composedPath && event2.composedPath()[0] || event2.target;
      const link = findLinkFromClickTarget(target);
      if (link && doesNotTargetIFrame(link.target)) {
        const location2 = getLocationForLink(link);
        if (this.delegate.willFollowLinkToLocation(link, location2, event2)) {
          event2.preventDefault();
          this.delegate.followedLinkToLocation(link, location2);
        }
      }
    }
  };
  clickEventIsSignificant(event2) {
    return !(event2.target && event2.target.isContentEditable || event2.defaultPrevented || event2.which > 1 || event2.altKey || event2.ctrlKey || event2.metaKey || event2.shiftKey);
  }
};
var FormLinkClickObserver = class {
  constructor(delegate, element) {
    this.delegate = delegate;
    this.linkInterceptor = new LinkClickObserver(this, element);
  }
  start() {
    this.linkInterceptor.start();
  }
  stop() {
    this.linkInterceptor.stop();
  }
  // Link hover observer delegate
  canPrefetchRequestToLocation(link, location2) {
    return false;
  }
  prefetchAndCacheRequestToLocation(link, location2) {
    return;
  }
  // Link click observer delegate
  willFollowLinkToLocation(link, location2, originalEvent) {
    return this.delegate.willSubmitFormLinkToLocation(link, location2, originalEvent) && (link.hasAttribute("data-turbo-method") || link.hasAttribute("data-turbo-stream"));
  }
  followedLinkToLocation(link, location2) {
    const form = document.createElement("form");
    const type = "hidden";
    for (const [name, value] of location2.searchParams) {
      form.append(Object.assign(document.createElement("input"), { type, name, value }));
    }
    const action = Object.assign(location2, { search: "" });
    form.setAttribute("data-turbo", "true");
    form.setAttribute("action", action.href);
    form.setAttribute("hidden", "");
    const method = link.getAttribute("data-turbo-method");
    if (method) form.setAttribute("method", method);
    const turboFrame = link.getAttribute("data-turbo-frame");
    if (turboFrame) form.setAttribute("data-turbo-frame", turboFrame);
    const turboAction = getVisitAction(link);
    if (turboAction) form.setAttribute("data-turbo-action", turboAction);
    const turboConfirm = link.getAttribute("data-turbo-confirm");
    if (turboConfirm) form.setAttribute("data-turbo-confirm", turboConfirm);
    const turboStream = link.hasAttribute("data-turbo-stream");
    if (turboStream) form.setAttribute("data-turbo-stream", "");
    this.delegate.submittedFormLinkToLocation(link, location2, form);
    document.body.appendChild(form);
    form.addEventListener("turbo:submit-end", () => form.remove(), { once: true });
    requestAnimationFrame(() => form.requestSubmit());
  }
};
var Bardo = class {
  static async preservingPermanentElements(delegate, permanentElementMap, callback) {
    const bardo = new this(delegate, permanentElementMap);
    bardo.enter();
    await callback();
    bardo.leave();
  }
  constructor(delegate, permanentElementMap) {
    this.delegate = delegate;
    this.permanentElementMap = permanentElementMap;
  }
  enter() {
    for (const id2 in this.permanentElementMap) {
      const [currentPermanentElement, newPermanentElement] = this.permanentElementMap[id2];
      this.delegate.enteringBardo(currentPermanentElement, newPermanentElement);
      this.replaceNewPermanentElementWithPlaceholder(newPermanentElement);
    }
  }
  leave() {
    for (const id2 in this.permanentElementMap) {
      const [currentPermanentElement] = this.permanentElementMap[id2];
      this.replaceCurrentPermanentElementWithClone(currentPermanentElement);
      this.replacePlaceholderWithPermanentElement(currentPermanentElement);
      this.delegate.leavingBardo(currentPermanentElement);
    }
  }
  replaceNewPermanentElementWithPlaceholder(permanentElement) {
    const placeholder = createPlaceholderForPermanentElement(permanentElement);
    permanentElement.replaceWith(placeholder);
  }
  replaceCurrentPermanentElementWithClone(permanentElement) {
    const clone2 = permanentElement.cloneNode(true);
    permanentElement.replaceWith(clone2);
  }
  replacePlaceholderWithPermanentElement(permanentElement) {
    const placeholder = this.getPlaceholderById(permanentElement.id);
    placeholder?.replaceWith(permanentElement);
  }
  getPlaceholderById(id2) {
    return this.placeholders.find((element) => element.content == id2);
  }
  get placeholders() {
    return [...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")];
  }
};
function createPlaceholderForPermanentElement(permanentElement) {
  const element = document.createElement("meta");
  element.setAttribute("name", "turbo-permanent-placeholder");
  element.setAttribute("content", permanentElement.id);
  return element;
}
var Renderer = class {
  #activeElement = null;
  static renderElement(currentElement, newElement) {
  }
  constructor(currentSnapshot, newSnapshot, isPreview, willRender = true) {
    this.currentSnapshot = currentSnapshot;
    this.newSnapshot = newSnapshot;
    this.isPreview = isPreview;
    this.willRender = willRender;
    this.renderElement = this.constructor.renderElement;
    this.promise = new Promise((resolve, reject) => this.resolvingFunctions = { resolve, reject });
  }
  get shouldRender() {
    return true;
  }
  get shouldAutofocus() {
    return true;
  }
  get reloadReason() {
    return;
  }
  prepareToRender() {
    return;
  }
  render() {
  }
  finishRendering() {
    if (this.resolvingFunctions) {
      this.resolvingFunctions.resolve();
      delete this.resolvingFunctions;
    }
  }
  async preservingPermanentElements(callback) {
    await Bardo.preservingPermanentElements(this, this.permanentElementMap, callback);
  }
  focusFirstAutofocusableElement() {
    if (this.shouldAutofocus) {
      const element = this.connectedSnapshot.firstAutofocusableElement;
      if (element) {
        element.focus();
      }
    }
  }
  // Bardo delegate
  enteringBardo(currentPermanentElement) {
    if (this.#activeElement) return;
    if (currentPermanentElement.contains(this.currentSnapshot.activeElement)) {
      this.#activeElement = this.currentSnapshot.activeElement;
    }
  }
  leavingBardo(currentPermanentElement) {
    if (currentPermanentElement.contains(this.#activeElement) && this.#activeElement instanceof HTMLElement) {
      this.#activeElement.focus();
      this.#activeElement = null;
    }
  }
  get connectedSnapshot() {
    return this.newSnapshot.isConnected ? this.newSnapshot : this.currentSnapshot;
  }
  get currentElement() {
    return this.currentSnapshot.element;
  }
  get newElement() {
    return this.newSnapshot.element;
  }
  get permanentElementMap() {
    return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot);
  }
  get renderMethod() {
    return "replace";
  }
};
var FrameRenderer = class extends Renderer {
  static renderElement(currentElement, newElement) {
    const destinationRange = document.createRange();
    destinationRange.selectNodeContents(currentElement);
    destinationRange.deleteContents();
    const frameElement = newElement;
    const sourceRange = frameElement.ownerDocument?.createRange();
    if (sourceRange) {
      sourceRange.selectNodeContents(frameElement);
      currentElement.appendChild(sourceRange.extractContents());
    }
  }
  constructor(delegate, currentSnapshot, newSnapshot, renderElement, isPreview, willRender = true) {
    super(currentSnapshot, newSnapshot, renderElement, isPreview, willRender);
    this.delegate = delegate;
  }
  get shouldRender() {
    return true;
  }
  async render() {
    await nextRepaint();
    this.preservingPermanentElements(() => {
      this.loadFrameElement();
    });
    this.scrollFrameIntoView();
    await nextRepaint();
    this.focusFirstAutofocusableElement();
    await nextRepaint();
    this.activateScriptElements();
  }
  loadFrameElement() {
    this.delegate.willRenderFrame(this.currentElement, this.newElement);
    this.renderElement(this.currentElement, this.newElement);
  }
  scrollFrameIntoView() {
    if (this.currentElement.autoscroll || this.newElement.autoscroll) {
      const element = this.currentElement.firstElementChild;
      const block = readScrollLogicalPosition(this.currentElement.getAttribute("data-autoscroll-block"), "end");
      const behavior = readScrollBehavior(this.currentElement.getAttribute("data-autoscroll-behavior"), "auto");
      if (element) {
        element.scrollIntoView({ block, behavior });
        return true;
      }
    }
    return false;
  }
  activateScriptElements() {
    for (const inertScriptElement of this.newScriptElements) {
      const activatedScriptElement = activateScriptElement(inertScriptElement);
      inertScriptElement.replaceWith(activatedScriptElement);
    }
  }
  get newScriptElements() {
    return this.currentElement.querySelectorAll("script");
  }
};
function readScrollLogicalPosition(value, defaultValue) {
  if (value == "end" || value == "start" || value == "center" || value == "nearest") {
    return value;
  } else {
    return defaultValue;
  }
}
function readScrollBehavior(value, defaultValue) {
  if (value == "auto" || value == "smooth") {
    return value;
  } else {
    return defaultValue;
  }
}
var Idiomorph = function() {
  const noOp = () => {
  };
  const defaults = {
    morphStyle: "outerHTML",
    callbacks: {
      beforeNodeAdded: noOp,
      afterNodeAdded: noOp,
      beforeNodeMorphed: noOp,
      afterNodeMorphed: noOp,
      beforeNodeRemoved: noOp,
      afterNodeRemoved: noOp,
      beforeAttributeUpdated: noOp
    },
    head: {
      style: "merge",
      shouldPreserve: (elt) => elt.getAttribute("im-preserve") === "true",
      shouldReAppend: (elt) => elt.getAttribute("im-re-append") === "true",
      shouldRemove: noOp,
      afterHeadMorphed: noOp
    },
    restoreFocus: true
  };
  function morph(oldNode, newContent, config2 = {}) {
    oldNode = normalizeElement(oldNode);
    const newNode = normalizeParent(newContent);
    const ctx = createMorphContext(oldNode, newNode, config2);
    const morphedNodes = saveAndRestoreFocus(ctx, () => {
      return withHeadBlocking(
        ctx,
        oldNode,
        newNode,
        /** @param {MorphContext} ctx */
        (ctx2) => {
          if (ctx2.morphStyle === "innerHTML") {
            morphChildren2(ctx2, oldNode, newNode);
            return Array.from(oldNode.childNodes);
          } else {
            return morphOuterHTML(ctx2, oldNode, newNode);
          }
        }
      );
    });
    ctx.pantry.remove();
    return morphedNodes;
  }
  function morphOuterHTML(ctx, oldNode, newNode) {
    const oldParent = normalizeParent(oldNode);
    let childNodes = Array.from(oldParent.childNodes);
    const index = childNodes.indexOf(oldNode);
    const rightMargin = childNodes.length - (index + 1);
    morphChildren2(
      ctx,
      oldParent,
      newNode,
      // these two optional params are the secret sauce
      oldNode,
      // start point for iteration
      oldNode.nextSibling
      // end point for iteration
    );
    childNodes = Array.from(oldParent.childNodes);
    return childNodes.slice(index, childNodes.length - rightMargin);
  }
  function saveAndRestoreFocus(ctx, fn) {
    if (!ctx.config.restoreFocus) return fn();
    let activeElement = (
      /** @type {HTMLInputElement|HTMLTextAreaElement|null} */
      document.activeElement
    );
    if (!(activeElement instanceof HTMLInputElement || activeElement instanceof HTMLTextAreaElement)) {
      return fn();
    }
    const { id: activeElementId, selectionStart, selectionEnd } = activeElement;
    const results = fn();
    if (activeElementId && activeElementId !== document.activeElement?.id) {
      activeElement = ctx.target.querySelector(`#${activeElementId}`);
      activeElement?.focus();
    }
    if (activeElement && !activeElement.selectionEnd && selectionEnd) {
      activeElement.setSelectionRange(selectionStart, selectionEnd);
    }
    return results;
  }
  const morphChildren2 = /* @__PURE__ */ function() {
    function morphChildren3(ctx, oldParent, newParent, insertionPoint = null, endPoint = null) {
      if (oldParent instanceof HTMLTemplateElement && newParent instanceof HTMLTemplateElement) {
        oldParent = oldParent.content;
        newParent = newParent.content;
      }
      insertionPoint ||= oldParent.firstChild;
      for (const newChild of newParent.childNodes) {
        if (insertionPoint && insertionPoint != endPoint) {
          const bestMatch = findBestMatch(
            ctx,
            newChild,
            insertionPoint,
            endPoint
          );
          if (bestMatch) {
            if (bestMatch !== insertionPoint) {
              removeNodesBetween(ctx, insertionPoint, bestMatch);
            }
            morphNode(bestMatch, newChild, ctx);
            insertionPoint = bestMatch.nextSibling;
            continue;
          }
        }
        if (newChild instanceof Element && ctx.persistentIds.has(newChild.id)) {
          const movedChild = moveBeforeById(
            oldParent,
            newChild.id,
            insertionPoint,
            ctx
          );
          morphNode(movedChild, newChild, ctx);
          insertionPoint = movedChild.nextSibling;
          continue;
        }
        const insertedNode = createNode(
          oldParent,
          newChild,
          insertionPoint,
          ctx
        );
        if (insertedNode) {
          insertionPoint = insertedNode.nextSibling;
        }
      }
      while (insertionPoint && insertionPoint != endPoint) {
        const tempNode = insertionPoint;
        insertionPoint = insertionPoint.nextSibling;
        removeNode(ctx, tempNode);
      }
    }
    function createNode(oldParent, newChild, insertionPoint, ctx) {
      if (ctx.callbacks.beforeNodeAdded(newChild) === false) return null;
      if (ctx.idMap.has(newChild)) {
        const newEmptyChild = document.createElement(
          /** @type {Element} */
          newChild.tagName
        );
        oldParent.insertBefore(newEmptyChild, insertionPoint);
        morphNode(newEmptyChild, newChild, ctx);
        ctx.callbacks.afterNodeAdded(newEmptyChild);
        return newEmptyChild;
      } else {
        const newClonedChild = document.importNode(newChild, true);
        oldParent.insertBefore(newClonedChild, insertionPoint);
        ctx.callbacks.afterNodeAdded(newClonedChild);
        return newClonedChild;
      }
    }
    const findBestMatch = /* @__PURE__ */ function() {
      function findBestMatch2(ctx, node, startPoint, endPoint) {
        let softMatch = null;
        let nextSibling = node.nextSibling;
        let siblingSoftMatchCount = 0;
        let cursor = startPoint;
        while (cursor && cursor != endPoint) {
          if (isSoftMatch(cursor, node)) {
            if (isIdSetMatch(ctx, cursor, node)) {
              return cursor;
            }
            if (softMatch === null) {
              if (!ctx.idMap.has(cursor)) {
                softMatch = cursor;
              }
            }
          }
          if (softMatch === null && nextSibling && isSoftMatch(cursor, nextSibling)) {
            siblingSoftMatchCount++;
            nextSibling = nextSibling.nextSibling;
            if (siblingSoftMatchCount >= 2) {
              softMatch = void 0;
            }
          }
          if (cursor.contains(document.activeElement)) break;
          cursor = cursor.nextSibling;
        }
        return softMatch || null;
      }
      function isIdSetMatch(ctx, oldNode, newNode) {
        let oldSet = ctx.idMap.get(oldNode);
        let newSet = ctx.idMap.get(newNode);
        if (!newSet || !oldSet) return false;
        for (const id2 of oldSet) {
          if (newSet.has(id2)) {
            return true;
          }
        }
        return false;
      }
      function isSoftMatch(oldNode, newNode) {
        const oldElt = (
          /** @type {Element} */
          oldNode
        );
        const newElt = (
          /** @type {Element} */
          newNode
        );
        return oldElt.nodeType === newElt.nodeType && oldElt.tagName === newElt.tagName && // If oldElt has an `id` with possible state and it doesn't match newElt.id then avoid morphing.
        // We'll still match an anonymous node with an IDed newElt, though, because if it got this far,
        // its not persistent, and new nodes can't have any hidden state.
        (!oldElt.id || oldElt.id === newElt.id);
      }
      return findBestMatch2;
    }();
    function removeNode(ctx, node) {
      if (ctx.idMap.has(node)) {
        moveBefore(ctx.pantry, node, null);
      } else {
        if (ctx.callbacks.beforeNodeRemoved(node) === false) return;
        node.parentNode?.removeChild(node);
        ctx.callbacks.afterNodeRemoved(node);
      }
    }
    function removeNodesBetween(ctx, startInclusive, endExclusive) {
      let cursor = startInclusive;
      while (cursor && cursor !== endExclusive) {
        let tempNode = (
          /** @type {Node} */
          cursor
        );
        cursor = cursor.nextSibling;
        removeNode(ctx, tempNode);
      }
      return cursor;
    }
    function moveBeforeById(parentNode, id2, after, ctx) {
      const target = (
        /** @type {Element} - will always be found */
        ctx.target.querySelector(`#${id2}`) || ctx.pantry.querySelector(`#${id2}`)
      );
      removeElementFromAncestorsIdMaps(target, ctx);
      moveBefore(parentNode, target, after);
      return target;
    }
    function removeElementFromAncestorsIdMaps(element, ctx) {
      const id2 = element.id;
      while (element = element.parentNode) {
        let idSet = ctx.idMap.get(element);
        if (idSet) {
          idSet.delete(id2);
          if (!idSet.size) {
            ctx.idMap.delete(element);
          }
        }
      }
    }
    function moveBefore(parentNode, element, after) {
      if (parentNode.moveBefore) {
        try {
          parentNode.moveBefore(element, after);
        } catch (e) {
          parentNode.insertBefore(element, after);
        }
      } else {
        parentNode.insertBefore(element, after);
      }
    }
    return morphChildren3;
  }();
  const morphNode = /* @__PURE__ */ function() {
    function morphNode2(oldNode, newContent, ctx) {
      if (ctx.ignoreActive && oldNode === document.activeElement) {
        return null;
      }
      if (ctx.callbacks.beforeNodeMorphed(oldNode, newContent) === false) {
        return oldNode;
      }
      if (oldNode instanceof HTMLHeadElement && ctx.head.ignore) ;
      else if (oldNode instanceof HTMLHeadElement && ctx.head.style !== "morph") {
        handleHeadElement(
          oldNode,
          /** @type {HTMLHeadElement} */
          newContent,
          ctx
        );
      } else {
        morphAttributes(oldNode, newContent, ctx);
        if (!ignoreValueOfActiveElement(oldNode, ctx)) {
          morphChildren2(ctx, oldNode, newContent);
        }
      }
      ctx.callbacks.afterNodeMorphed(oldNode, newContent);
      return oldNode;
    }
    function morphAttributes(oldNode, newNode, ctx) {
      let type = newNode.nodeType;
      if (type === 1) {
        const oldElt = (
          /** @type {Element} */
          oldNode
        );
        const newElt = (
          /** @type {Element} */
          newNode
        );
        const oldAttributes = oldElt.attributes;
        const newAttributes = newElt.attributes;
        for (const newAttribute of newAttributes) {
          if (ignoreAttribute(newAttribute.name, oldElt, "update", ctx)) {
            continue;
          }
          if (oldElt.getAttribute(newAttribute.name) !== newAttribute.value) {
            oldElt.setAttribute(newAttribute.name, newAttribute.value);
          }
        }
        for (let i = oldAttributes.length - 1; 0 <= i; i--) {
          const oldAttribute = oldAttributes[i];
          if (!oldAttribute) continue;
          if (!newElt.hasAttribute(oldAttribute.name)) {
            if (ignoreAttribute(oldAttribute.name, oldElt, "remove", ctx)) {
              continue;
            }
            oldElt.removeAttribute(oldAttribute.name);
          }
        }
        if (!ignoreValueOfActiveElement(oldElt, ctx)) {
          syncInputValue(oldElt, newElt, ctx);
        }
      }
      if (type === 8 || type === 3) {
        if (oldNode.nodeValue !== newNode.nodeValue) {
          oldNode.nodeValue = newNode.nodeValue;
        }
      }
    }
    function syncInputValue(oldElement, newElement, ctx) {
      if (oldElement instanceof HTMLInputElement && newElement instanceof HTMLInputElement && newElement.type !== "file") {
        let newValue = newElement.value;
        let oldValue = oldElement.value;
        syncBooleanAttribute(oldElement, newElement, "checked", ctx);
        syncBooleanAttribute(oldElement, newElement, "disabled", ctx);
        if (!newElement.hasAttribute("value")) {
          if (!ignoreAttribute("value", oldElement, "remove", ctx)) {
            oldElement.value = "";
            oldElement.removeAttribute("value");
          }
        } else if (oldValue !== newValue) {
          if (!ignoreAttribute("value", oldElement, "update", ctx)) {
            oldElement.setAttribute("value", newValue);
            oldElement.value = newValue;
          }
        }
      } else if (oldElement instanceof HTMLOptionElement && newElement instanceof HTMLOptionElement) {
        syncBooleanAttribute(oldElement, newElement, "selected", ctx);
      } else if (oldElement instanceof HTMLTextAreaElement && newElement instanceof HTMLTextAreaElement) {
        let newValue = newElement.value;
        let oldValue = oldElement.value;
        if (ignoreAttribute("value", oldElement, "update", ctx)) {
          return;
        }
        if (newValue !== oldValue) {
          oldElement.value = newValue;
        }
        if (oldElement.firstChild && oldElement.firstChild.nodeValue !== newValue) {
          oldElement.firstChild.nodeValue = newValue;
        }
      }
    }
    function syncBooleanAttribute(oldElement, newElement, attributeName, ctx) {
      const newLiveValue = newElement[attributeName], oldLiveValue = oldElement[attributeName];
      if (newLiveValue !== oldLiveValue) {
        const ignoreUpdate = ignoreAttribute(
          attributeName,
          oldElement,
          "update",
          ctx
        );
        if (!ignoreUpdate) {
          oldElement[attributeName] = newElement[attributeName];
        }
        if (newLiveValue) {
          if (!ignoreUpdate) {
            oldElement.setAttribute(attributeName, "");
          }
        } else {
          if (!ignoreAttribute(attributeName, oldElement, "remove", ctx)) {
            oldElement.removeAttribute(attributeName);
          }
        }
      }
    }
    function ignoreAttribute(attr, element, updateType, ctx) {
      if (attr === "value" && ctx.ignoreActiveValue && element === document.activeElement) {
        return true;
      }
      return ctx.callbacks.beforeAttributeUpdated(attr, element, updateType) === false;
    }
    function ignoreValueOfActiveElement(possibleActiveElement, ctx) {
      return !!ctx.ignoreActiveValue && possibleActiveElement === document.activeElement && possibleActiveElement !== document.body;
    }
    return morphNode2;
  }();
  function withHeadBlocking(ctx, oldNode, newNode, callback) {
    if (ctx.head.block) {
      const oldHead = oldNode.querySelector("head");
      const newHead = newNode.querySelector("head");
      if (oldHead && newHead) {
        const promises = handleHeadElement(oldHead, newHead, ctx);
        return Promise.all(promises).then(() => {
          const newCtx = Object.assign(ctx, {
            head: {
              block: false,
              ignore: true
            }
          });
          return callback(newCtx);
        });
      }
    }
    return callback(ctx);
  }
  function handleHeadElement(oldHead, newHead, ctx) {
    let added = [];
    let removed = [];
    let preserved = [];
    let nodesToAppend = [];
    let srcToNewHeadNodes = /* @__PURE__ */ new Map();
    for (const newHeadChild of newHead.children) {
      srcToNewHeadNodes.set(newHeadChild.outerHTML, newHeadChild);
    }
    for (const currentHeadElt of oldHead.children) {
      let inNewContent = srcToNewHeadNodes.has(currentHeadElt.outerHTML);
      let isReAppended = ctx.head.shouldReAppend(currentHeadElt);
      let isPreserved = ctx.head.shouldPreserve(currentHeadElt);
      if (inNewContent || isPreserved) {
        if (isReAppended) {
          removed.push(currentHeadElt);
        } else {
          srcToNewHeadNodes.delete(currentHeadElt.outerHTML);
          preserved.push(currentHeadElt);
        }
      } else {
        if (ctx.head.style === "append") {
          if (isReAppended) {
            removed.push(currentHeadElt);
            nodesToAppend.push(currentHeadElt);
          }
        } else {
          if (ctx.head.shouldRemove(currentHeadElt) !== false) {
            removed.push(currentHeadElt);
          }
        }
      }
    }
    nodesToAppend.push(...srcToNewHeadNodes.values());
    let promises = [];
    for (const newNode of nodesToAppend) {
      let newElt = (
        /** @type {ChildNode} */
        document.createRange().createContextualFragment(newNode.outerHTML).firstChild
      );
      if (ctx.callbacks.beforeNodeAdded(newElt) !== false) {
        if ("href" in newElt && newElt.href || "src" in newElt && newElt.src) {
          let resolve;
          let promise = new Promise(function(_resolve) {
            resolve = _resolve;
          });
          newElt.addEventListener("load", function() {
            resolve();
          });
          promises.push(promise);
        }
        oldHead.appendChild(newElt);
        ctx.callbacks.afterNodeAdded(newElt);
        added.push(newElt);
      }
    }
    for (const removedElement of removed) {
      if (ctx.callbacks.beforeNodeRemoved(removedElement) !== false) {
        oldHead.removeChild(removedElement);
        ctx.callbacks.afterNodeRemoved(removedElement);
      }
    }
    ctx.head.afterHeadMorphed(oldHead, {
      added,
      kept: preserved,
      removed
    });
    return promises;
  }
  const createMorphContext = /* @__PURE__ */ function() {
    function createMorphContext2(oldNode, newContent, config2) {
      const { persistentIds, idMap } = createIdMaps(oldNode, newContent);
      const mergedConfig = mergeDefaults(config2);
      const morphStyle = mergedConfig.morphStyle || "outerHTML";
      if (!["innerHTML", "outerHTML"].includes(morphStyle)) {
        throw `Do not understand how to morph style ${morphStyle}`;
      }
      return {
        target: oldNode,
        newContent,
        config: mergedConfig,
        morphStyle,
        ignoreActive: mergedConfig.ignoreActive,
        ignoreActiveValue: mergedConfig.ignoreActiveValue,
        restoreFocus: mergedConfig.restoreFocus,
        idMap,
        persistentIds,
        pantry: createPantry(),
        callbacks: mergedConfig.callbacks,
        head: mergedConfig.head
      };
    }
    function mergeDefaults(config2) {
      let finalConfig = Object.assign({}, defaults);
      Object.assign(finalConfig, config2);
      finalConfig.callbacks = Object.assign(
        {},
        defaults.callbacks,
        config2.callbacks
      );
      finalConfig.head = Object.assign({}, defaults.head, config2.head);
      return finalConfig;
    }
    function createPantry() {
      const pantry = document.createElement("div");
      pantry.hidden = true;
      document.body.insertAdjacentElement("afterend", pantry);
      return pantry;
    }
    function findIdElements(root) {
      let elements = Array.from(root.querySelectorAll("[id]"));
      if (root.id) {
        elements.push(root);
      }
      return elements;
    }
    function populateIdMapWithTree(idMap, persistentIds, root, elements) {
      for (const elt of elements) {
        if (persistentIds.has(elt.id)) {
          let current = elt;
          while (current) {
            let idSet = idMap.get(current);
            if (idSet == null) {
              idSet = /* @__PURE__ */ new Set();
              idMap.set(current, idSet);
            }
            idSet.add(elt.id);
            if (current === root) break;
            current = current.parentElement;
          }
        }
      }
    }
    function createIdMaps(oldContent, newContent) {
      const oldIdElements = findIdElements(oldContent);
      const newIdElements = findIdElements(newContent);
      const persistentIds = createPersistentIds(oldIdElements, newIdElements);
      let idMap = /* @__PURE__ */ new Map();
      populateIdMapWithTree(idMap, persistentIds, oldContent, oldIdElements);
      const newRoot = newContent.__idiomorphRoot || newContent;
      populateIdMapWithTree(idMap, persistentIds, newRoot, newIdElements);
      return { persistentIds, idMap };
    }
    function createPersistentIds(oldIdElements, newIdElements) {
      let duplicateIds = /* @__PURE__ */ new Set();
      let oldIdTagNameMap = /* @__PURE__ */ new Map();
      for (const { id: id2, tagName } of oldIdElements) {
        if (oldIdTagNameMap.has(id2)) {
          duplicateIds.add(id2);
        } else {
          oldIdTagNameMap.set(id2, tagName);
        }
      }
      let persistentIds = /* @__PURE__ */ new Set();
      for (const { id: id2, tagName } of newIdElements) {
        if (persistentIds.has(id2)) {
          duplicateIds.add(id2);
        } else if (oldIdTagNameMap.get(id2) === tagName) {
          persistentIds.add(id2);
        }
      }
      for (const id2 of duplicateIds) {
        persistentIds.delete(id2);
      }
      return persistentIds;
    }
    return createMorphContext2;
  }();
  const { normalizeElement, normalizeParent } = /* @__PURE__ */ function() {
    const generatedByIdiomorph = /* @__PURE__ */ new WeakSet();
    function normalizeElement2(content) {
      if (content instanceof Document) {
        return content.documentElement;
      } else {
        return content;
      }
    }
    function normalizeParent2(newContent) {
      if (newContent == null) {
        return document.createElement("div");
      } else if (typeof newContent === "string") {
        return normalizeParent2(parseContent(newContent));
      } else if (generatedByIdiomorph.has(
        /** @type {Element} */
        newContent
      )) {
        return (
          /** @type {Element} */
          newContent
        );
      } else if (newContent instanceof Node) {
        if (newContent.parentNode) {
          return createDuckTypedParent(newContent);
        } else {
          const dummyParent = document.createElement("div");
          dummyParent.append(newContent);
          return dummyParent;
        }
      } else {
        const dummyParent = document.createElement("div");
        for (const elt of [...newContent]) {
          dummyParent.append(elt);
        }
        return dummyParent;
      }
    }
    function createDuckTypedParent(newContent) {
      return (
        /** @type {Element} */
        /** @type {unknown} */
        {
          childNodes: [newContent],
          /** @ts-ignore - cover your eyes for a minute, tsc */
          querySelectorAll: (s) => {
            const elements = newContent.querySelectorAll(s);
            return newContent.matches(s) ? [newContent, ...elements] : elements;
          },
          /** @ts-ignore */
          insertBefore: (n, r) => newContent.parentNode.insertBefore(n, r),
          /** @ts-ignore */
          moveBefore: (n, r) => newContent.parentNode.moveBefore(n, r),
          // for later use with populateIdMapWithTree to halt upwards iteration
          get __idiomorphRoot() {
            return newContent;
          }
        }
      );
    }
    function parseContent(newContent) {
      let parser = new DOMParser();
      let contentWithSvgsRemoved = newContent.replace(
        /<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,
        ""
      );
      if (contentWithSvgsRemoved.match(/<\/html>/) || contentWithSvgsRemoved.match(/<\/head>/) || contentWithSvgsRemoved.match(/<\/body>/)) {
        let content = parser.parseFromString(newContent, "text/html");
        if (contentWithSvgsRemoved.match(/<\/html>/)) {
          generatedByIdiomorph.add(content);
          return content;
        } else {
          let htmlElement = content.firstChild;
          if (htmlElement) {
            generatedByIdiomorph.add(htmlElement);
          }
          return htmlElement;
        }
      } else {
        let responseDoc = parser.parseFromString(
          "<body><template>" + newContent + "</template></body>",
          "text/html"
        );
        let content = (
          /** @type {HTMLTemplateElement} */
          responseDoc.body.querySelector("template").content
        );
        generatedByIdiomorph.add(content);
        return content;
      }
    }
    return { normalizeElement: normalizeElement2, normalizeParent: normalizeParent2 };
  }();
  return {
    morph,
    defaults
  };
}();
function morphElements(currentElement, newElement, { callbacks, ...options } = {}) {
  Idiomorph.morph(currentElement, newElement, {
    ...options,
    callbacks: new DefaultIdiomorphCallbacks(callbacks)
  });
}
function morphChildren(currentElement, newElement, options = {}) {
  morphElements(currentElement, newElement.childNodes, {
    ...options,
    morphStyle: "innerHTML"
  });
}
function shouldRefreshFrameWithMorphing(currentFrame, newFrame) {
  return currentFrame instanceof FrameElement && // newFrame cannot yet be an instance of FrameElement because custom
  // elements don't get initialized until they're attached to the DOM, so
  // test its Element#nodeName instead
  newFrame instanceof Element && newFrame.nodeName === "TURBO-FRAME" && currentFrame.shouldReloadWithMorph && currentFrame.id === newFrame.id && (!newFrame.getAttribute("src") || urlsAreEqual(currentFrame.src, newFrame.getAttribute("src"))) && !currentFrame.closest("[data-turbo-permanent]");
}
function closestFrameReloadableWithMorphing(node) {
  return node.parentElement.closest("turbo-frame[src][refresh=morph]");
}
var DefaultIdiomorphCallbacks = class {
  #beforeNodeMorphed;
  constructor({ beforeNodeMorphed } = {}) {
    this.#beforeNodeMorphed = beforeNodeMorphed || (() => true);
  }
  beforeNodeAdded = (node) => {
    return !(node.id && node.hasAttribute("data-turbo-permanent") && document.getElementById(node.id));
  };
  beforeNodeMorphed = (currentElement, newElement) => {
    if (currentElement instanceof Element) {
      if (!currentElement.hasAttribute("data-turbo-permanent") && this.#beforeNodeMorphed(currentElement, newElement)) {
        const event2 = dispatch2("turbo:before-morph-element", {
          cancelable: true,
          target: currentElement,
          detail: { currentElement, newElement }
        });
        return !event2.defaultPrevented;
      } else {
        return false;
      }
    }
  };
  beforeAttributeUpdated = (attributeName, target, mutationType) => {
    const event2 = dispatch2("turbo:before-morph-attribute", {
      cancelable: true,
      target,
      detail: { attributeName, mutationType }
    });
    return !event2.defaultPrevented;
  };
  beforeNodeRemoved = (node) => {
    return this.beforeNodeMorphed(node);
  };
  afterNodeMorphed = (currentElement, newElement) => {
    if (currentElement instanceof Element) {
      dispatch2("turbo:morph-element", {
        target: currentElement,
        detail: { currentElement, newElement }
      });
    }
  };
};
var MorphingFrameRenderer = class extends FrameRenderer {
  static renderElement(currentElement, newElement) {
    dispatch2("turbo:before-frame-morph", {
      target: currentElement,
      detail: { currentElement, newElement }
    });
    morphChildren(currentElement, newElement, {
      callbacks: {
        beforeNodeMorphed: (node, newNode) => {
          if (shouldRefreshFrameWithMorphing(node, newNode) && closestFrameReloadableWithMorphing(node) === currentElement) {
            node.reload();
            return false;
          }
          return true;
        }
      }
    });
  }
  async preservingPermanentElements(callback) {
    return await callback();
  }
};
var ProgressBar = class _ProgressBar {
  static animationDuration = 300;
  /*ms*/
  static get defaultCSS() {
    return unindent`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${_ProgressBar.animationDuration}ms ease-out,
          opacity ${_ProgressBar.animationDuration / 2}ms ${_ProgressBar.animationDuration / 2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `;
  }
  hiding = false;
  value = 0;
  visible = false;
  constructor() {
    this.stylesheetElement = this.createStylesheetElement();
    this.progressElement = this.createProgressElement();
    this.installStylesheetElement();
    this.setValue(0);
  }
  show() {
    if (!this.visible) {
      this.visible = true;
      this.installProgressElement();
      this.startTrickling();
    }
  }
  hide() {
    if (this.visible && !this.hiding) {
      this.hiding = true;
      this.fadeProgressElement(() => {
        this.uninstallProgressElement();
        this.stopTrickling();
        this.visible = false;
        this.hiding = false;
      });
    }
  }
  setValue(value) {
    this.value = value;
    this.refresh();
  }
  // Private
  installStylesheetElement() {
    document.head.insertBefore(this.stylesheetElement, document.head.firstChild);
  }
  installProgressElement() {
    this.progressElement.style.width = "0";
    this.progressElement.style.opacity = "1";
    document.documentElement.insertBefore(this.progressElement, document.body);
    this.refresh();
  }
  fadeProgressElement(callback) {
    this.progressElement.style.opacity = "0";
    setTimeout(callback, _ProgressBar.animationDuration * 1.5);
  }
  uninstallProgressElement() {
    if (this.progressElement.parentNode) {
      document.documentElement.removeChild(this.progressElement);
    }
  }
  startTrickling() {
    if (!this.trickleInterval) {
      this.trickleInterval = window.setInterval(this.trickle, _ProgressBar.animationDuration);
    }
  }
  stopTrickling() {
    window.clearInterval(this.trickleInterval);
    delete this.trickleInterval;
  }
  trickle = () => {
    this.setValue(this.value + Math.random() / 100);
  };
  refresh() {
    requestAnimationFrame(() => {
      this.progressElement.style.width = `${10 + this.value * 90}%`;
    });
  }
  createStylesheetElement() {
    const element = document.createElement("style");
    element.type = "text/css";
    element.textContent = _ProgressBar.defaultCSS;
    const cspNonce = getCspNonce();
    if (cspNonce) {
      element.nonce = cspNonce;
    }
    return element;
  }
  createProgressElement() {
    const element = document.createElement("div");
    element.className = "turbo-progress-bar";
    return element;
  }
};
var HeadSnapshot = class extends Snapshot {
  detailsByOuterHTML = this.children.filter((element) => !elementIsNoscript(element)).map((element) => elementWithoutNonce(element)).reduce((result, element) => {
    const { outerHTML } = element;
    const details = outerHTML in result ? result[outerHTML] : {
      type: elementType(element),
      tracked: elementIsTracked(element),
      elements: []
    };
    return {
      ...result,
      [outerHTML]: {
        ...details,
        elements: [...details.elements, element]
      }
    };
  }, {});
  get trackedElementSignature() {
    return Object.keys(this.detailsByOuterHTML).filter((outerHTML) => this.detailsByOuterHTML[outerHTML].tracked).join("");
  }
  getScriptElementsNotInSnapshot(snapshot) {
    return this.getElementsMatchingTypeNotInSnapshot("script", snapshot);
  }
  getStylesheetElementsNotInSnapshot(snapshot) {
    return this.getElementsMatchingTypeNotInSnapshot("stylesheet", snapshot);
  }
  getElementsMatchingTypeNotInSnapshot(matchedType, snapshot) {
    return Object.keys(this.detailsByOuterHTML).filter((outerHTML) => !(outerHTML in snapshot.detailsByOuterHTML)).map((outerHTML) => this.detailsByOuterHTML[outerHTML]).filter(({ type }) => type == matchedType).map(({ elements: [element] }) => element);
  }
  get provisionalElements() {
    return Object.keys(this.detailsByOuterHTML).reduce((result, outerHTML) => {
      const { type, tracked, elements } = this.detailsByOuterHTML[outerHTML];
      if (type == null && !tracked) {
        return [...result, ...elements];
      } else if (elements.length > 1) {
        return [...result, ...elements.slice(1)];
      } else {
        return result;
      }
    }, []);
  }
  getMetaValue(name) {
    const element = this.findMetaElementByName(name);
    return element ? element.getAttribute("content") : null;
  }
  findMetaElementByName(name) {
    return Object.keys(this.detailsByOuterHTML).reduce((result, outerHTML) => {
      const {
        elements: [element]
      } = this.detailsByOuterHTML[outerHTML];
      return elementIsMetaElementWithName(element, name) ? element : result;
    }, void 0 | void 0);
  }
};
function elementType(element) {
  if (elementIsScript(element)) {
    return "script";
  } else if (elementIsStylesheet(element)) {
    return "stylesheet";
  }
}
function elementIsTracked(element) {
  return element.getAttribute("data-turbo-track") == "reload";
}
function elementIsScript(element) {
  const tagName = element.localName;
  return tagName == "script";
}
function elementIsNoscript(element) {
  const tagName = element.localName;
  return tagName == "noscript";
}
function elementIsStylesheet(element) {
  const tagName = element.localName;
  return tagName == "style" || tagName == "link" && element.getAttribute("rel") == "stylesheet";
}
function elementIsMetaElementWithName(element, name) {
  const tagName = element.localName;
  return tagName == "meta" && element.getAttribute("name") == name;
}
function elementWithoutNonce(element) {
  if (element.hasAttribute("nonce")) {
    element.setAttribute("nonce", "");
  }
  return element;
}
var PageSnapshot = class _PageSnapshot extends Snapshot {
  static fromHTMLString(html = "") {
    return this.fromDocument(parseHTMLDocument(html));
  }
  static fromElement(element) {
    return this.fromDocument(element.ownerDocument);
  }
  static fromDocument({ documentElement, body, head }) {
    return new this(documentElement, body, new HeadSnapshot(head));
  }
  constructor(documentElement, body, headSnapshot) {
    super(body);
    this.documentElement = documentElement;
    this.headSnapshot = headSnapshot;
  }
  clone() {
    const clonedElement = this.element.cloneNode(true);
    const selectElements = this.element.querySelectorAll("select");
    const clonedSelectElements = clonedElement.querySelectorAll("select");
    for (const [index, source] of selectElements.entries()) {
      const clone2 = clonedSelectElements[index];
      for (const option of clone2.selectedOptions) option.selected = false;
      for (const option of source.selectedOptions) clone2.options[option.index].selected = true;
    }
    for (const clonedPasswordInput of clonedElement.querySelectorAll('input[type="password"]')) {
      clonedPasswordInput.value = "";
    }
    return new _PageSnapshot(this.documentElement, clonedElement, this.headSnapshot);
  }
  get lang() {
    return this.documentElement.getAttribute("lang");
  }
  get headElement() {
    return this.headSnapshot.element;
  }
  get rootLocation() {
    const root = this.getSetting("root") ?? "/";
    return expandURL(root);
  }
  get cacheControlValue() {
    return this.getSetting("cache-control");
  }
  get isPreviewable() {
    return this.cacheControlValue != "no-preview";
  }
  get isCacheable() {
    return this.cacheControlValue != "no-cache";
  }
  get isVisitable() {
    return this.getSetting("visit-control") != "reload";
  }
  get prefersViewTransitions() {
    const viewTransitionEnabled = this.getSetting("view-transition") === "true" || this.headSnapshot.getMetaValue("view-transition") === "same-origin";
    return viewTransitionEnabled && !window.matchMedia("(prefers-reduced-motion: reduce)").matches;
  }
  get shouldMorphPage() {
    return this.getSetting("refresh-method") === "morph";
  }
  get shouldPreserveScrollPosition() {
    return this.getSetting("refresh-scroll") === "preserve";
  }
  // Private
  getSetting(name) {
    return this.headSnapshot.getMetaValue(`turbo-${name}`);
  }
};
var ViewTransitioner = class {
  #viewTransitionStarted = false;
  #lastOperation = Promise.resolve();
  renderChange(useViewTransition, render) {
    if (useViewTransition && this.viewTransitionsAvailable && !this.#viewTransitionStarted) {
      this.#viewTransitionStarted = true;
      this.#lastOperation = this.#lastOperation.then(async () => {
        await document.startViewTransition(render).finished;
      });
    } else {
      this.#lastOperation = this.#lastOperation.then(render);
    }
    return this.#lastOperation;
  }
  get viewTransitionsAvailable() {
    return document.startViewTransition;
  }
};
var defaultOptions = {
  action: "advance",
  historyChanged: false,
  visitCachedSnapshot: () => {
  },
  willRender: true,
  updateHistory: true,
  shouldCacheSnapshot: true,
  acceptsStreamResponse: false
};
var TimingMetric = {
  visitStart: "visitStart",
  requestStart: "requestStart",
  requestEnd: "requestEnd",
  visitEnd: "visitEnd"
};
var VisitState = {
  initialized: "initialized",
  started: "started",
  canceled: "canceled",
  failed: "failed",
  completed: "completed"
};
var SystemStatusCode = {
  networkFailure: 0,
  timeoutFailure: -1,
  contentTypeMismatch: -2
};
var Direction = {
  advance: "forward",
  restore: "back",
  replace: "none"
};
var Visit = class {
  identifier = uuid();
  // Required by turbo-ios
  timingMetrics = {};
  followedRedirect = false;
  historyChanged = false;
  scrolled = false;
  shouldCacheSnapshot = true;
  acceptsStreamResponse = false;
  snapshotCached = false;
  state = VisitState.initialized;
  viewTransitioner = new ViewTransitioner();
  constructor(delegate, location2, restorationIdentifier, options = {}) {
    this.delegate = delegate;
    this.location = location2;
    this.restorationIdentifier = restorationIdentifier || uuid();
    const {
      action,
      historyChanged,
      referrer,
      snapshot,
      snapshotHTML,
      response,
      visitCachedSnapshot,
      willRender,
      updateHistory,
      shouldCacheSnapshot,
      acceptsStreamResponse,
      direction
    } = {
      ...defaultOptions,
      ...options
    };
    this.action = action;
    this.historyChanged = historyChanged;
    this.referrer = referrer;
    this.snapshot = snapshot;
    this.snapshotHTML = snapshotHTML;
    this.response = response;
    this.isSamePage = this.delegate.locationWithActionIsSamePage(this.location, this.action);
    this.isPageRefresh = this.view.isPageRefresh(this);
    this.visitCachedSnapshot = visitCachedSnapshot;
    this.willRender = willRender;
    this.updateHistory = updateHistory;
    this.scrolled = !willRender;
    this.shouldCacheSnapshot = shouldCacheSnapshot;
    this.acceptsStreamResponse = acceptsStreamResponse;
    this.direction = direction || Direction[action];
  }
  get adapter() {
    return this.delegate.adapter;
  }
  get view() {
    return this.delegate.view;
  }
  get history() {
    return this.delegate.history;
  }
  get restorationData() {
    return this.history.getRestorationDataForIdentifier(this.restorationIdentifier);
  }
  get silent() {
    return this.isSamePage;
  }
  start() {
    if (this.state == VisitState.initialized) {
      this.recordTimingMetric(TimingMetric.visitStart);
      this.state = VisitState.started;
      this.adapter.visitStarted(this);
      this.delegate.visitStarted(this);
    }
  }
  cancel() {
    if (this.state == VisitState.started) {
      if (this.request) {
        this.request.cancel();
      }
      this.cancelRender();
      this.state = VisitState.canceled;
    }
  }
  complete() {
    if (this.state == VisitState.started) {
      this.recordTimingMetric(TimingMetric.visitEnd);
      this.adapter.visitCompleted(this);
      this.state = VisitState.completed;
      this.followRedirect();
      if (!this.followedRedirect) {
        this.delegate.visitCompleted(this);
      }
    }
  }
  fail() {
    if (this.state == VisitState.started) {
      this.state = VisitState.failed;
      this.adapter.visitFailed(this);
      this.delegate.visitCompleted(this);
    }
  }
  changeHistory() {
    if (!this.historyChanged && this.updateHistory) {
      const actionForHistory = this.location.href === this.referrer?.href ? "replace" : this.action;
      const method = getHistoryMethodForAction(actionForHistory);
      this.history.update(method, this.location, this.restorationIdentifier);
      this.historyChanged = true;
    }
  }
  issueRequest() {
    if (this.hasPreloadedResponse()) {
      this.simulateRequest();
    } else if (this.shouldIssueRequest() && !this.request) {
      this.request = new FetchRequest(this, FetchMethod.get, this.location);
      this.request.perform();
    }
  }
  simulateRequest() {
    if (this.response) {
      this.startRequest();
      this.recordResponse();
      this.finishRequest();
    }
  }
  startRequest() {
    this.recordTimingMetric(TimingMetric.requestStart);
    this.adapter.visitRequestStarted(this);
  }
  recordResponse(response = this.response) {
    this.response = response;
    if (response) {
      const { statusCode } = response;
      if (isSuccessful(statusCode)) {
        this.adapter.visitRequestCompleted(this);
      } else {
        this.adapter.visitRequestFailedWithStatusCode(this, statusCode);
      }
    }
  }
  finishRequest() {
    this.recordTimingMetric(TimingMetric.requestEnd);
    this.adapter.visitRequestFinished(this);
  }
  loadResponse() {
    if (this.response) {
      const { statusCode, responseHTML } = this.response;
      this.render(async () => {
        if (this.shouldCacheSnapshot) this.cacheSnapshot();
        if (this.view.renderPromise) await this.view.renderPromise;
        if (isSuccessful(statusCode) && responseHTML != null) {
          const snapshot = PageSnapshot.fromHTMLString(responseHTML);
          await this.renderPageSnapshot(snapshot, false);
          this.adapter.visitRendered(this);
          this.complete();
        } else {
          await this.view.renderError(PageSnapshot.fromHTMLString(responseHTML), this);
          this.adapter.visitRendered(this);
          this.fail();
        }
      });
    }
  }
  getCachedSnapshot() {
    const snapshot = this.view.getCachedSnapshotForLocation(this.location) || this.getPreloadedSnapshot();
    if (snapshot && (!getAnchor(this.location) || snapshot.hasAnchor(getAnchor(this.location)))) {
      if (this.action == "restore" || snapshot.isPreviewable) {
        return snapshot;
      }
    }
  }
  getPreloadedSnapshot() {
    if (this.snapshotHTML) {
      return PageSnapshot.fromHTMLString(this.snapshotHTML);
    }
  }
  hasCachedSnapshot() {
    return this.getCachedSnapshot() != null;
  }
  loadCachedSnapshot() {
    const snapshot = this.getCachedSnapshot();
    if (snapshot) {
      const isPreview = this.shouldIssueRequest();
      this.render(async () => {
        this.cacheSnapshot();
        if (this.isSamePage || this.isPageRefresh) {
          this.adapter.visitRendered(this);
        } else {
          if (this.view.renderPromise) await this.view.renderPromise;
          await this.renderPageSnapshot(snapshot, isPreview);
          this.adapter.visitRendered(this);
          if (!isPreview) {
            this.complete();
          }
        }
      });
    }
  }
  followRedirect() {
    if (this.redirectedToLocation && !this.followedRedirect && this.response?.redirected) {
      this.adapter.visitProposedToLocation(this.redirectedToLocation, {
        action: "replace",
        response: this.response,
        shouldCacheSnapshot: false,
        willRender: false
      });
      this.followedRedirect = true;
    }
  }
  goToSamePageAnchor() {
    if (this.isSamePage) {
      this.render(async () => {
        this.cacheSnapshot();
        this.performScroll();
        this.changeHistory();
        this.adapter.visitRendered(this);
      });
    }
  }
  // Fetch request delegate
  prepareRequest(request) {
    if (this.acceptsStreamResponse) {
      request.acceptResponseType(StreamMessage.contentType);
    }
  }
  requestStarted() {
    this.startRequest();
  }
  requestPreventedHandlingResponse(_request, _response) {
  }
  async requestSucceededWithResponse(request, response) {
    const responseHTML = await response.responseHTML;
    const { redirected, statusCode } = response;
    if (responseHTML == void 0) {
      this.recordResponse({
        statusCode: SystemStatusCode.contentTypeMismatch,
        redirected
      });
    } else {
      this.redirectedToLocation = response.redirected ? response.location : void 0;
      this.recordResponse({ statusCode, responseHTML, redirected });
    }
  }
  async requestFailedWithResponse(request, response) {
    const responseHTML = await response.responseHTML;
    const { redirected, statusCode } = response;
    if (responseHTML == void 0) {
      this.recordResponse({
        statusCode: SystemStatusCode.contentTypeMismatch,
        redirected
      });
    } else {
      this.recordResponse({ statusCode, responseHTML, redirected });
    }
  }
  requestErrored(_request, _error) {
    this.recordResponse({
      statusCode: SystemStatusCode.networkFailure,
      redirected: false
    });
  }
  requestFinished() {
    this.finishRequest();
  }
  // Scrolling
  performScroll() {
    if (!this.scrolled && !this.view.forceReloaded && !this.view.shouldPreserveScrollPosition(this)) {
      if (this.action == "restore") {
        this.scrollToRestoredPosition() || this.scrollToAnchor() || this.view.scrollToTop();
      } else {
        this.scrollToAnchor() || this.view.scrollToTop();
      }
      if (this.isSamePage) {
        this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation, this.location);
      }
      this.scrolled = true;
    }
  }
  scrollToRestoredPosition() {
    const { scrollPosition } = this.restorationData;
    if (scrollPosition) {
      this.view.scrollToPosition(scrollPosition);
      return true;
    }
  }
  scrollToAnchor() {
    const anchor = getAnchor(this.location);
    if (anchor != null) {
      this.view.scrollToAnchor(anchor);
      return true;
    }
  }
  // Instrumentation
  recordTimingMetric(metric) {
    this.timingMetrics[metric] = (/* @__PURE__ */ new Date()).getTime();
  }
  getTimingMetrics() {
    return { ...this.timingMetrics };
  }
  // Private
  hasPreloadedResponse() {
    return typeof this.response == "object";
  }
  shouldIssueRequest() {
    if (this.isSamePage) {
      return false;
    } else if (this.action == "restore") {
      return !this.hasCachedSnapshot();
    } else {
      return this.willRender;
    }
  }
  cacheSnapshot() {
    if (!this.snapshotCached) {
      this.view.cacheSnapshot(this.snapshot).then((snapshot) => snapshot && this.visitCachedSnapshot(snapshot));
      this.snapshotCached = true;
    }
  }
  async render(callback) {
    this.cancelRender();
    await new Promise((resolve) => {
      this.frame = document.visibilityState === "hidden" ? setTimeout(() => resolve(), 0) : requestAnimationFrame(() => resolve());
    });
    await callback();
    delete this.frame;
  }
  async renderPageSnapshot(snapshot, isPreview) {
    await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(snapshot), async () => {
      await this.view.renderPage(snapshot, isPreview, this.willRender, this);
      this.performScroll();
    });
  }
  cancelRender() {
    if (this.frame) {
      cancelAnimationFrame(this.frame);
      delete this.frame;
    }
  }
};
function isSuccessful(statusCode) {
  return statusCode >= 200 && statusCode < 300;
}
var BrowserAdapter = class {
  progressBar = new ProgressBar();
  constructor(session2) {
    this.session = session2;
  }
  visitProposedToLocation(location2, options) {
    if (locationIsVisitable(location2, this.navigator.rootLocation)) {
      this.navigator.startVisit(location2, options?.restorationIdentifier || uuid(), options);
    } else {
      window.location.href = location2.toString();
    }
  }
  visitStarted(visit2) {
    this.location = visit2.location;
    this.redirectedToLocation = null;
    visit2.loadCachedSnapshot();
    visit2.issueRequest();
    visit2.goToSamePageAnchor();
  }
  visitRequestStarted(visit2) {
    this.progressBar.setValue(0);
    if (visit2.hasCachedSnapshot() || visit2.action != "restore") {
      this.showVisitProgressBarAfterDelay();
    } else {
      this.showProgressBar();
    }
  }
  visitRequestCompleted(visit2) {
    visit2.loadResponse();
    if (visit2.response.redirected) {
      this.redirectedToLocation = visit2.redirectedToLocation;
    }
  }
  visitRequestFailedWithStatusCode(visit2, statusCode) {
    switch (statusCode) {
      case SystemStatusCode.networkFailure:
      case SystemStatusCode.timeoutFailure:
      case SystemStatusCode.contentTypeMismatch:
        return this.reload({
          reason: "request_failed",
          context: {
            statusCode
          }
        });
      default:
        return visit2.loadResponse();
    }
  }
  visitRequestFinished(_visit) {
  }
  visitCompleted(_visit) {
    this.progressBar.setValue(1);
    this.hideVisitProgressBar();
  }
  pageInvalidated(reason) {
    this.reload(reason);
  }
  visitFailed(_visit) {
    this.progressBar.setValue(1);
    this.hideVisitProgressBar();
  }
  visitRendered(_visit) {
  }
  // Link prefetching
  linkPrefetchingIsEnabledForLocation(location2) {
    return true;
  }
  // Form Submission Delegate
  formSubmissionStarted(_formSubmission) {
    this.progressBar.setValue(0);
    this.showFormProgressBarAfterDelay();
  }
  formSubmissionFinished(_formSubmission) {
    this.progressBar.setValue(1);
    this.hideFormProgressBar();
  }
  // Private
  showVisitProgressBarAfterDelay() {
    this.visitProgressBarTimeout = window.setTimeout(this.showProgressBar, this.session.progressBarDelay);
  }
  hideVisitProgressBar() {
    this.progressBar.hide();
    if (this.visitProgressBarTimeout != null) {
      window.clearTimeout(this.visitProgressBarTimeout);
      delete this.visitProgressBarTimeout;
    }
  }
  showFormProgressBarAfterDelay() {
    if (this.formProgressBarTimeout == null) {
      this.formProgressBarTimeout = window.setTimeout(this.showProgressBar, this.session.progressBarDelay);
    }
  }
  hideFormProgressBar() {
    this.progressBar.hide();
    if (this.formProgressBarTimeout != null) {
      window.clearTimeout(this.formProgressBarTimeout);
      delete this.formProgressBarTimeout;
    }
  }
  showProgressBar = () => {
    this.progressBar.show();
  };
  reload(reason) {
    dispatch2("turbo:reload", { detail: reason });
    window.location.href = (this.redirectedToLocation || this.location)?.toString() || window.location.href;
  }
  get navigator() {
    return this.session.navigator;
  }
};
var CacheObserver = class {
  selector = "[data-turbo-temporary]";
  deprecatedSelector = "[data-turbo-cache=false]";
  started = false;
  start() {
    if (!this.started) {
      this.started = true;
      addEventListener("turbo:before-cache", this.removeTemporaryElements, false);
    }
  }
  stop() {
    if (this.started) {
      this.started = false;
      removeEventListener("turbo:before-cache", this.removeTemporaryElements, false);
    }
  }
  removeTemporaryElements = (_event) => {
    for (const element of this.temporaryElements) {
      element.remove();
    }
  };
  get temporaryElements() {
    return [...document.querySelectorAll(this.selector), ...this.temporaryElementsWithDeprecation];
  }
  get temporaryElementsWithDeprecation() {
    const elements = document.querySelectorAll(this.deprecatedSelector);
    if (elements.length) {
      console.warn(
        `The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`
      );
    }
    return [...elements];
  }
};
var FrameRedirector = class {
  constructor(session2, element) {
    this.session = session2;
    this.element = element;
    this.linkInterceptor = new LinkInterceptor(this, element);
    this.formSubmitObserver = new FormSubmitObserver(this, element);
  }
  start() {
    this.linkInterceptor.start();
    this.formSubmitObserver.start();
  }
  stop() {
    this.linkInterceptor.stop();
    this.formSubmitObserver.stop();
  }
  // Link interceptor delegate
  shouldInterceptLinkClick(element, _location, _event) {
    return this.#shouldRedirect(element);
  }
  linkClickIntercepted(element, url, event2) {
    const frame = this.#findFrameElement(element);
    if (frame) {
      frame.delegate.linkClickIntercepted(element, url, event2);
    }
  }
  // Form submit observer delegate
  willSubmitForm(element, submitter2) {
    return element.closest("turbo-frame") == null && this.#shouldSubmit(element, submitter2) && this.#shouldRedirect(element, submitter2);
  }
  formSubmitted(element, submitter2) {
    const frame = this.#findFrameElement(element, submitter2);
    if (frame) {
      frame.delegate.formSubmitted(element, submitter2);
    }
  }
  #shouldSubmit(form, submitter2) {
    const action = getAction$1(form, submitter2);
    const meta = this.element.ownerDocument.querySelector(`meta[name="turbo-root"]`);
    const rootLocation = expandURL(meta?.content ?? "/");
    return this.#shouldRedirect(form, submitter2) && locationIsVisitable(action, rootLocation);
  }
  #shouldRedirect(element, submitter2) {
    const isNavigatable = element instanceof HTMLFormElement ? this.session.submissionIsNavigatable(element, submitter2) : this.session.elementIsNavigatable(element);
    if (isNavigatable) {
      const frame = this.#findFrameElement(element, submitter2);
      return frame ? frame != element.closest("turbo-frame") : false;
    } else {
      return false;
    }
  }
  #findFrameElement(element, submitter2) {
    const id2 = submitter2?.getAttribute("data-turbo-frame") || element.getAttribute("data-turbo-frame");
    if (id2 && id2 != "_top") {
      const frame = this.element.querySelector(`#${id2}:not([disabled])`);
      if (frame instanceof FrameElement) {
        return frame;
      }
    }
  }
};
var History = class {
  location;
  restorationIdentifier = uuid();
  restorationData = {};
  started = false;
  pageLoaded = false;
  currentIndex = 0;
  constructor(delegate) {
    this.delegate = delegate;
  }
  start() {
    if (!this.started) {
      addEventListener("popstate", this.onPopState, false);
      addEventListener("load", this.onPageLoad, false);
      this.currentIndex = history.state?.turbo?.restorationIndex || 0;
      this.started = true;
      this.replace(new URL(window.location.href));
    }
  }
  stop() {
    if (this.started) {
      removeEventListener("popstate", this.onPopState, false);
      removeEventListener("load", this.onPageLoad, false);
      this.started = false;
    }
  }
  push(location2, restorationIdentifier) {
    this.update(history.pushState, location2, restorationIdentifier);
  }
  replace(location2, restorationIdentifier) {
    this.update(history.replaceState, location2, restorationIdentifier);
  }
  update(method, location2, restorationIdentifier = uuid()) {
    if (method === history.pushState) ++this.currentIndex;
    const state = { turbo: { restorationIdentifier, restorationIndex: this.currentIndex } };
    method.call(history, state, "", location2.href);
    this.location = location2;
    this.restorationIdentifier = restorationIdentifier;
  }
  // Restoration data
  getRestorationDataForIdentifier(restorationIdentifier) {
    return this.restorationData[restorationIdentifier] || {};
  }
  updateRestorationData(additionalData) {
    const { restorationIdentifier } = this;
    const restorationData = this.restorationData[restorationIdentifier];
    this.restorationData[restorationIdentifier] = {
      ...restorationData,
      ...additionalData
    };
  }
  // Scroll restoration
  assumeControlOfScrollRestoration() {
    if (!this.previousScrollRestoration) {
      this.previousScrollRestoration = history.scrollRestoration ?? "auto";
      history.scrollRestoration = "manual";
    }
  }
  relinquishControlOfScrollRestoration() {
    if (this.previousScrollRestoration) {
      history.scrollRestoration = this.previousScrollRestoration;
      delete this.previousScrollRestoration;
    }
  }
  // Event handlers
  onPopState = (event2) => {
    if (this.shouldHandlePopState()) {
      const { turbo } = event2.state || {};
      if (turbo) {
        this.location = new URL(window.location.href);
        const { restorationIdentifier, restorationIndex } = turbo;
        this.restorationIdentifier = restorationIdentifier;
        const direction = restorationIndex > this.currentIndex ? "forward" : "back";
        this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location, restorationIdentifier, direction);
        this.currentIndex = restorationIndex;
      }
    }
  };
  onPageLoad = async (_event) => {
    await nextMicrotask();
    this.pageLoaded = true;
  };
  // Private
  shouldHandlePopState() {
    return this.pageIsLoaded();
  }
  pageIsLoaded() {
    return this.pageLoaded || document.readyState == "complete";
  }
};
var LinkPrefetchObserver = class {
  started = false;
  #prefetchedLink = null;
  constructor(delegate, eventTarget) {
    this.delegate = delegate;
    this.eventTarget = eventTarget;
  }
  start() {
    if (this.started) return;
    if (this.eventTarget.readyState === "loading") {
      this.eventTarget.addEventListener("DOMContentLoaded", this.#enable, { once: true });
    } else {
      this.#enable();
    }
  }
  stop() {
    if (!this.started) return;
    this.eventTarget.removeEventListener("mouseenter", this.#tryToPrefetchRequest, {
      capture: true,
      passive: true
    });
    this.eventTarget.removeEventListener("mouseleave", this.#cancelRequestIfObsolete, {
      capture: true,
      passive: true
    });
    this.eventTarget.removeEventListener("turbo:before-fetch-request", this.#tryToUsePrefetchedRequest, true);
    this.started = false;
  }
  #enable = () => {
    this.eventTarget.addEventListener("mouseenter", this.#tryToPrefetchRequest, {
      capture: true,
      passive: true
    });
    this.eventTarget.addEventListener("mouseleave", this.#cancelRequestIfObsolete, {
      capture: true,
      passive: true
    });
    this.eventTarget.addEventListener("turbo:before-fetch-request", this.#tryToUsePrefetchedRequest, true);
    this.started = true;
  };
  #tryToPrefetchRequest = (event2) => {
    if (getMetaContent("turbo-prefetch") === "false") return;
    const target = event2.target;
    const isLink = target.matches && target.matches("a[href]:not([target^=_]):not([download])");
    if (isLink && this.#isPrefetchable(target)) {
      const link = target;
      const location2 = getLocationForLink(link);
      if (this.delegate.canPrefetchRequestToLocation(link, location2)) {
        this.#prefetchedLink = link;
        const fetchRequest = new FetchRequest(
          this,
          FetchMethod.get,
          location2,
          new URLSearchParams(),
          target
        );
        fetchRequest.fetchOptions.priority = "low";
        prefetchCache.setLater(location2.toString(), fetchRequest, this.#cacheTtl);
      }
    }
  };
  #cancelRequestIfObsolete = (event2) => {
    if (event2.target === this.#prefetchedLink) this.#cancelPrefetchRequest();
  };
  #cancelPrefetchRequest = () => {
    prefetchCache.clear();
    this.#prefetchedLink = null;
  };
  #tryToUsePrefetchedRequest = (event2) => {
    if (event2.target.tagName !== "FORM" && event2.detail.fetchOptions.method === "GET") {
      const cached = prefetchCache.get(event2.detail.url.toString());
      if (cached) {
        event2.detail.fetchRequest = cached;
      }
      prefetchCache.clear();
    }
  };
  prepareRequest(request) {
    const link = request.target;
    request.headers["X-Sec-Purpose"] = "prefetch";
    const turboFrame = link.closest("turbo-frame");
    const turboFrameTarget = link.getAttribute("data-turbo-frame") || turboFrame?.getAttribute("target") || turboFrame?.id;
    if (turboFrameTarget && turboFrameTarget !== "_top") {
      request.headers["Turbo-Frame"] = turboFrameTarget;
    }
  }
  // Fetch request interface
  requestSucceededWithResponse() {
  }
  requestStarted(fetchRequest) {
  }
  requestErrored(fetchRequest) {
  }
  requestFinished(fetchRequest) {
  }
  requestPreventedHandlingResponse(fetchRequest, fetchResponse) {
  }
  requestFailedWithResponse(fetchRequest, fetchResponse) {
  }
  get #cacheTtl() {
    return Number(getMetaContent("turbo-prefetch-cache-time")) || cacheTtl;
  }
  #isPrefetchable(link) {
    const href = link.getAttribute("href");
    if (!href) return false;
    if (unfetchableLink(link)) return false;
    if (linkToTheSamePage(link)) return false;
    if (linkOptsOut(link)) return false;
    if (nonSafeLink(link)) return false;
    if (eventPrevented(link)) return false;
    return true;
  }
};
var unfetchableLink = (link) => {
  return link.origin !== document.location.origin || !["http:", "https:"].includes(link.protocol) || link.hasAttribute("target");
};
var linkToTheSamePage = (link) => {
  return link.pathname + link.search === document.location.pathname + document.location.search || link.href.startsWith("#");
};
var linkOptsOut = (link) => {
  if (link.getAttribute("data-turbo-prefetch") === "false") return true;
  if (link.getAttribute("data-turbo") === "false") return true;
  const turboPrefetchParent = findClosestRecursively(link, "[data-turbo-prefetch]");
  if (turboPrefetchParent && turboPrefetchParent.getAttribute("data-turbo-prefetch") === "false") return true;
  return false;
};
var nonSafeLink = (link) => {
  const turboMethod = link.getAttribute("data-turbo-method");
  if (turboMethod && turboMethod.toLowerCase() !== "get") return true;
  if (isUJS(link)) return true;
  if (link.hasAttribute("data-turbo-confirm")) return true;
  if (link.hasAttribute("data-turbo-stream")) return true;
  return false;
};
var isUJS = (link) => {
  return link.hasAttribute("data-remote") || link.hasAttribute("data-behavior") || link.hasAttribute("data-confirm") || link.hasAttribute("data-method");
};
var eventPrevented = (link) => {
  const event2 = dispatch2("turbo:before-prefetch", { target: link, cancelable: true });
  return event2.defaultPrevented;
};
var Navigator = class {
  constructor(delegate) {
    this.delegate = delegate;
  }
  proposeVisit(location2, options = {}) {
    if (this.delegate.allowsVisitingLocationWithAction(location2, options.action)) {
      this.delegate.visitProposedToLocation(location2, options);
    }
  }
  startVisit(locatable, restorationIdentifier, options = {}) {
    this.stop();
    this.currentVisit = new Visit(this, expandURL(locatable), restorationIdentifier, {
      referrer: this.location,
      ...options
    });
    this.currentVisit.start();
  }
  submitForm(form, submitter2) {
    this.stop();
    this.formSubmission = new FormSubmission(this, form, submitter2, true);
    this.formSubmission.start();
  }
  stop() {
    if (this.formSubmission) {
      this.formSubmission.stop();
      delete this.formSubmission;
    }
    if (this.currentVisit) {
      this.currentVisit.cancel();
      delete this.currentVisit;
    }
  }
  get adapter() {
    return this.delegate.adapter;
  }
  get view() {
    return this.delegate.view;
  }
  get rootLocation() {
    return this.view.snapshot.rootLocation;
  }
  get history() {
    return this.delegate.history;
  }
  // Form submission delegate
  formSubmissionStarted(formSubmission) {
    if (typeof this.adapter.formSubmissionStarted === "function") {
      this.adapter.formSubmissionStarted(formSubmission);
    }
  }
  async formSubmissionSucceededWithResponse(formSubmission, fetchResponse) {
    if (formSubmission == this.formSubmission) {
      const responseHTML = await fetchResponse.responseHTML;
      if (responseHTML) {
        const shouldCacheSnapshot = formSubmission.isSafe;
        if (!shouldCacheSnapshot) {
          this.view.clearSnapshotCache();
        }
        const { statusCode, redirected } = fetchResponse;
        const action = this.#getActionForFormSubmission(formSubmission, fetchResponse);
        const visitOptions = {
          action,
          shouldCacheSnapshot,
          response: { statusCode, responseHTML, redirected }
        };
        this.proposeVisit(fetchResponse.location, visitOptions);
      }
    }
  }
  async formSubmissionFailedWithResponse(formSubmission, fetchResponse) {
    const responseHTML = await fetchResponse.responseHTML;
    if (responseHTML) {
      const snapshot = PageSnapshot.fromHTMLString(responseHTML);
      if (fetchResponse.serverError) {
        await this.view.renderError(snapshot, this.currentVisit);
      } else {
        await this.view.renderPage(snapshot, false, true, this.currentVisit);
      }
      if (!snapshot.shouldPreserveScrollPosition) {
        this.view.scrollToTop();
      }
      this.view.clearSnapshotCache();
    }
  }
  formSubmissionErrored(formSubmission, error3) {
    console.error(error3);
  }
  formSubmissionFinished(formSubmission) {
    if (typeof this.adapter.formSubmissionFinished === "function") {
      this.adapter.formSubmissionFinished(formSubmission);
    }
  }
  // Link prefetching
  linkPrefetchingIsEnabledForLocation(location2) {
    if (typeof this.adapter.linkPrefetchingIsEnabledForLocation === "function") {
      return this.adapter.linkPrefetchingIsEnabledForLocation(location2);
    }
    return true;
  }
  // Visit delegate
  visitStarted(visit2) {
    this.delegate.visitStarted(visit2);
  }
  visitCompleted(visit2) {
    this.delegate.visitCompleted(visit2);
    delete this.currentVisit;
  }
  locationWithActionIsSamePage(location2, action) {
    const anchor = getAnchor(location2);
    const currentAnchor = getAnchor(this.view.lastRenderedLocation);
    const isRestorationToTop = action === "restore" && typeof anchor === "undefined";
    return action !== "replace" && getRequestURL(location2) === getRequestURL(this.view.lastRenderedLocation) && (isRestorationToTop || anchor != null && anchor !== currentAnchor);
  }
  visitScrolledToSamePageLocation(oldURL, newURL) {
    this.delegate.visitScrolledToSamePageLocation(oldURL, newURL);
  }
  // Visits
  get location() {
    return this.history.location;
  }
  get restorationIdentifier() {
    return this.history.restorationIdentifier;
  }
  #getActionForFormSubmission(formSubmission, fetchResponse) {
    const { submitter: submitter2, formElement } = formSubmission;
    return getVisitAction(submitter2, formElement) || this.#getDefaultAction(fetchResponse);
  }
  #getDefaultAction(fetchResponse) {
    const sameLocationRedirect = fetchResponse.redirected && fetchResponse.location.href === this.location?.href;
    return sameLocationRedirect ? "replace" : "advance";
  }
};
var PageStage = {
  initial: 0,
  loading: 1,
  interactive: 2,
  complete: 3
};
var PageObserver = class {
  stage = PageStage.initial;
  started = false;
  constructor(delegate) {
    this.delegate = delegate;
  }
  start() {
    if (!this.started) {
      if (this.stage == PageStage.initial) {
        this.stage = PageStage.loading;
      }
      document.addEventListener("readystatechange", this.interpretReadyState, false);
      addEventListener("pagehide", this.pageWillUnload, false);
      this.started = true;
    }
  }
  stop() {
    if (this.started) {
      document.removeEventListener("readystatechange", this.interpretReadyState, false);
      removeEventListener("pagehide", this.pageWillUnload, false);
      this.started = false;
    }
  }
  interpretReadyState = () => {
    const { readyState } = this;
    if (readyState == "interactive") {
      this.pageIsInteractive();
    } else if (readyState == "complete") {
      this.pageIsComplete();
    }
  };
  pageIsInteractive() {
    if (this.stage == PageStage.loading) {
      this.stage = PageStage.interactive;
      this.delegate.pageBecameInteractive();
    }
  }
  pageIsComplete() {
    this.pageIsInteractive();
    if (this.stage == PageStage.interactive) {
      this.stage = PageStage.complete;
      this.delegate.pageLoaded();
    }
  }
  pageWillUnload = () => {
    this.delegate.pageWillUnload();
  };
  get readyState() {
    return document.readyState;
  }
};
var ScrollObserver = class {
  started = false;
  constructor(delegate) {
    this.delegate = delegate;
  }
  start() {
    if (!this.started) {
      addEventListener("scroll", this.onScroll, false);
      this.onScroll();
      this.started = true;
    }
  }
  stop() {
    if (this.started) {
      removeEventListener("scroll", this.onScroll, false);
      this.started = false;
    }
  }
  onScroll = () => {
    this.updatePosition({ x: window.pageXOffset, y: window.pageYOffset });
  };
  // Private
  updatePosition(position) {
    this.delegate.scrollPositionChanged(position);
  }
};
var StreamMessageRenderer = class {
  render({ fragment }) {
    Bardo.preservingPermanentElements(this, getPermanentElementMapForFragment(fragment), () => {
      withAutofocusFromFragment(fragment, () => {
        withPreservedFocus(() => {
          document.documentElement.appendChild(fragment);
        });
      });
    });
  }
  // Bardo delegate
  enteringBardo(currentPermanentElement, newPermanentElement) {
    newPermanentElement.replaceWith(currentPermanentElement.cloneNode(true));
  }
  leavingBardo() {
  }
};
function getPermanentElementMapForFragment(fragment) {
  const permanentElementsInDocument = queryPermanentElementsAll(document.documentElement);
  const permanentElementMap = {};
  for (const permanentElementInDocument of permanentElementsInDocument) {
    const { id: id2 } = permanentElementInDocument;
    for (const streamElement of fragment.querySelectorAll("turbo-stream")) {
      const elementInStream = getPermanentElementById(streamElement.templateElement.content, id2);
      if (elementInStream) {
        permanentElementMap[id2] = [permanentElementInDocument, elementInStream];
      }
    }
  }
  return permanentElementMap;
}
async function withAutofocusFromFragment(fragment, callback) {
  const generatedID = `turbo-stream-autofocus-${uuid()}`;
  const turboStreams = fragment.querySelectorAll("turbo-stream");
  const elementWithAutofocus = firstAutofocusableElementInStreams(turboStreams);
  let willAutofocusId = null;
  if (elementWithAutofocus) {
    if (elementWithAutofocus.id) {
      willAutofocusId = elementWithAutofocus.id;
    } else {
      willAutofocusId = generatedID;
    }
    elementWithAutofocus.id = willAutofocusId;
  }
  callback();
  await nextRepaint();
  const hasNoActiveElement = document.activeElement == null || document.activeElement == document.body;
  if (hasNoActiveElement && willAutofocusId) {
    const elementToAutofocus = document.getElementById(willAutofocusId);
    if (elementIsFocusable(elementToAutofocus)) {
      elementToAutofocus.focus();
    }
    if (elementToAutofocus && elementToAutofocus.id == generatedID) {
      elementToAutofocus.removeAttribute("id");
    }
  }
}
async function withPreservedFocus(callback) {
  const [activeElementBeforeRender, activeElementAfterRender] = await around(callback, () => document.activeElement);
  const restoreFocusTo = activeElementBeforeRender && activeElementBeforeRender.id;
  if (restoreFocusTo) {
    const elementToFocus = document.getElementById(restoreFocusTo);
    if (elementIsFocusable(elementToFocus) && elementToFocus != activeElementAfterRender) {
      elementToFocus.focus();
    }
  }
}
function firstAutofocusableElementInStreams(nodeListOfStreamElements) {
  for (const streamElement of nodeListOfStreamElements) {
    const elementWithAutofocus = queryAutofocusableElement(streamElement.templateElement.content);
    if (elementWithAutofocus) return elementWithAutofocus;
  }
  return null;
}
var StreamObserver = class {
  sources = /* @__PURE__ */ new Set();
  #started = false;
  constructor(delegate) {
    this.delegate = delegate;
  }
  start() {
    if (!this.#started) {
      this.#started = true;
      addEventListener("turbo:before-fetch-response", this.inspectFetchResponse, false);
    }
  }
  stop() {
    if (this.#started) {
      this.#started = false;
      removeEventListener("turbo:before-fetch-response", this.inspectFetchResponse, false);
    }
  }
  connectStreamSource(source) {
    if (!this.streamSourceIsConnected(source)) {
      this.sources.add(source);
      source.addEventListener("message", this.receiveMessageEvent, false);
    }
  }
  disconnectStreamSource(source) {
    if (this.streamSourceIsConnected(source)) {
      this.sources.delete(source);
      source.removeEventListener("message", this.receiveMessageEvent, false);
    }
  }
  streamSourceIsConnected(source) {
    return this.sources.has(source);
  }
  inspectFetchResponse = (event2) => {
    const response = fetchResponseFromEvent(event2);
    if (response && fetchResponseIsStream(response)) {
      event2.preventDefault();
      this.receiveMessageResponse(response);
    }
  };
  receiveMessageEvent = (event2) => {
    if (this.#started && typeof event2.data == "string") {
      this.receiveMessageHTML(event2.data);
    }
  };
  async receiveMessageResponse(response) {
    const html = await response.responseHTML;
    if (html) {
      this.receiveMessageHTML(html);
    }
  }
  receiveMessageHTML(html) {
    this.delegate.receivedMessageFromStream(StreamMessage.wrap(html));
  }
};
function fetchResponseFromEvent(event2) {
  const fetchResponse = event2.detail?.fetchResponse;
  if (fetchResponse instanceof FetchResponse) {
    return fetchResponse;
  }
}
function fetchResponseIsStream(response) {
  const contentType = response.contentType ?? "";
  return contentType.startsWith(StreamMessage.contentType);
}
var ErrorRenderer = class extends Renderer {
  static renderElement(currentElement, newElement) {
    const { documentElement, body } = document;
    documentElement.replaceChild(newElement, body);
  }
  async render() {
    this.replaceHeadAndBody();
    this.activateScriptElements();
  }
  replaceHeadAndBody() {
    const { documentElement, head } = document;
    documentElement.replaceChild(this.newHead, head);
    this.renderElement(this.currentElement, this.newElement);
  }
  activateScriptElements() {
    for (const replaceableElement of this.scriptElements) {
      const parentNode = replaceableElement.parentNode;
      if (parentNode) {
        const element = activateScriptElement(replaceableElement);
        parentNode.replaceChild(element, replaceableElement);
      }
    }
  }
  get newHead() {
    return this.newSnapshot.headSnapshot.element;
  }
  get scriptElements() {
    return document.documentElement.querySelectorAll("script");
  }
};
var PageRenderer = class extends Renderer {
  static renderElement(currentElement, newElement) {
    if (document.body && newElement instanceof HTMLBodyElement) {
      document.body.replaceWith(newElement);
    } else {
      document.documentElement.appendChild(newElement);
    }
  }
  get shouldRender() {
    return this.newSnapshot.isVisitable && this.trackedElementsAreIdentical;
  }
  get reloadReason() {
    if (!this.newSnapshot.isVisitable) {
      return {
        reason: "turbo_visit_control_is_reload"
      };
    }
    if (!this.trackedElementsAreIdentical) {
      return {
        reason: "tracked_element_mismatch"
      };
    }
  }
  async prepareToRender() {
    this.#setLanguage();
    await this.mergeHead();
  }
  async render() {
    if (this.willRender) {
      await this.replaceBody();
    }
  }
  finishRendering() {
    super.finishRendering();
    if (!this.isPreview) {
      this.focusFirstAutofocusableElement();
    }
  }
  get currentHeadSnapshot() {
    return this.currentSnapshot.headSnapshot;
  }
  get newHeadSnapshot() {
    return this.newSnapshot.headSnapshot;
  }
  get newElement() {
    return this.newSnapshot.element;
  }
  #setLanguage() {
    const { documentElement } = this.currentSnapshot;
    const { lang } = this.newSnapshot;
    if (lang) {
      documentElement.setAttribute("lang", lang);
    } else {
      documentElement.removeAttribute("lang");
    }
  }
  async mergeHead() {
    const mergedHeadElements = this.mergeProvisionalElements();
    const newStylesheetElements = this.copyNewHeadStylesheetElements();
    this.copyNewHeadScriptElements();
    await mergedHeadElements;
    await newStylesheetElements;
    if (this.willRender) {
      this.removeUnusedDynamicStylesheetElements();
    }
  }
  async replaceBody() {
    await this.preservingPermanentElements(async () => {
      this.activateNewBody();
      await this.assignNewBody();
    });
  }
  get trackedElementsAreIdentical() {
    return this.currentHeadSnapshot.trackedElementSignature == this.newHeadSnapshot.trackedElementSignature;
  }
  async copyNewHeadStylesheetElements() {
    const loadingElements = [];
    for (const element of this.newHeadStylesheetElements) {
      loadingElements.push(waitForLoad(element));
      document.head.appendChild(element);
    }
    await Promise.all(loadingElements);
  }
  copyNewHeadScriptElements() {
    for (const element of this.newHeadScriptElements) {
      document.head.appendChild(activateScriptElement(element));
    }
  }
  removeUnusedDynamicStylesheetElements() {
    for (const element of this.unusedDynamicStylesheetElements) {
      document.head.removeChild(element);
    }
  }
  async mergeProvisionalElements() {
    const newHeadElements = [...this.newHeadProvisionalElements];
    for (const element of this.currentHeadProvisionalElements) {
      if (!this.isCurrentElementInElementList(element, newHeadElements)) {
        document.head.removeChild(element);
      }
    }
    for (const element of newHeadElements) {
      document.head.appendChild(element);
    }
  }
  isCurrentElementInElementList(element, elementList) {
    for (const [index, newElement] of elementList.entries()) {
      if (element.tagName == "TITLE") {
        if (newElement.tagName != "TITLE") {
          continue;
        }
        if (element.innerHTML == newElement.innerHTML) {
          elementList.splice(index, 1);
          return true;
        }
      }
      if (newElement.isEqualNode(element)) {
        elementList.splice(index, 1);
        return true;
      }
    }
    return false;
  }
  removeCurrentHeadProvisionalElements() {
    for (const element of this.currentHeadProvisionalElements) {
      document.head.removeChild(element);
    }
  }
  copyNewHeadProvisionalElements() {
    for (const element of this.newHeadProvisionalElements) {
      document.head.appendChild(element);
    }
  }
  activateNewBody() {
    document.adoptNode(this.newElement);
    this.activateNewBodyScriptElements();
  }
  activateNewBodyScriptElements() {
    for (const inertScriptElement of this.newBodyScriptElements) {
      const activatedScriptElement = activateScriptElement(inertScriptElement);
      inertScriptElement.replaceWith(activatedScriptElement);
    }
  }
  async assignNewBody() {
    await this.renderElement(this.currentElement, this.newElement);
  }
  get unusedDynamicStylesheetElements() {
    return this.oldHeadStylesheetElements.filter((element) => {
      return element.getAttribute("data-turbo-track") === "dynamic";
    });
  }
  get oldHeadStylesheetElements() {
    return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot);
  }
  get newHeadStylesheetElements() {
    return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot);
  }
  get newHeadScriptElements() {
    return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot);
  }
  get currentHeadProvisionalElements() {
    return this.currentHeadSnapshot.provisionalElements;
  }
  get newHeadProvisionalElements() {
    return this.newHeadSnapshot.provisionalElements;
  }
  get newBodyScriptElements() {
    return this.newElement.querySelectorAll("script");
  }
};
var MorphingPageRenderer = class extends PageRenderer {
  static renderElement(currentElement, newElement) {
    morphElements(currentElement, newElement, {
      callbacks: {
        beforeNodeMorphed: (node, newNode) => {
          if (shouldRefreshFrameWithMorphing(node, newNode) && !closestFrameReloadableWithMorphing(node)) {
            node.reload();
            return false;
          }
          return true;
        }
      }
    });
    dispatch2("turbo:morph", { detail: { currentElement, newElement } });
  }
  async preservingPermanentElements(callback) {
    return await callback();
  }
  get renderMethod() {
    return "morph";
  }
  get shouldAutofocus() {
    return false;
  }
};
var SnapshotCache = class {
  keys = [];
  snapshots = {};
  constructor(size2) {
    this.size = size2;
  }
  has(location2) {
    return toCacheKey(location2) in this.snapshots;
  }
  get(location2) {
    if (this.has(location2)) {
      const snapshot = this.read(location2);
      this.touch(location2);
      return snapshot;
    }
  }
  put(location2, snapshot) {
    this.write(location2, snapshot);
    this.touch(location2);
    return snapshot;
  }
  clear() {
    this.snapshots = {};
  }
  // Private
  read(location2) {
    return this.snapshots[toCacheKey(location2)];
  }
  write(location2, snapshot) {
    this.snapshots[toCacheKey(location2)] = snapshot;
  }
  touch(location2) {
    const key = toCacheKey(location2);
    const index = this.keys.indexOf(key);
    if (index > -1) this.keys.splice(index, 1);
    this.keys.unshift(key);
    this.trim();
  }
  trim() {
    for (const key of this.keys.splice(this.size)) {
      delete this.snapshots[key];
    }
  }
};
var PageView = class extends View {
  snapshotCache = new SnapshotCache(10);
  lastRenderedLocation = new URL(location.href);
  forceReloaded = false;
  shouldTransitionTo(newSnapshot) {
    return this.snapshot.prefersViewTransitions && newSnapshot.prefersViewTransitions;
  }
  renderPage(snapshot, isPreview = false, willRender = true, visit2) {
    const shouldMorphPage = this.isPageRefresh(visit2) && this.snapshot.shouldMorphPage;
    const rendererClass = shouldMorphPage ? MorphingPageRenderer : PageRenderer;
    const renderer = new rendererClass(this.snapshot, snapshot, isPreview, willRender);
    if (!renderer.shouldRender) {
      this.forceReloaded = true;
    } else {
      visit2?.changeHistory();
    }
    return this.render(renderer);
  }
  renderError(snapshot, visit2) {
    visit2?.changeHistory();
    const renderer = new ErrorRenderer(this.snapshot, snapshot, false);
    return this.render(renderer);
  }
  clearSnapshotCache() {
    this.snapshotCache.clear();
  }
  async cacheSnapshot(snapshot = this.snapshot) {
    if (snapshot.isCacheable) {
      this.delegate.viewWillCacheSnapshot();
      const { lastRenderedLocation: location2 } = this;
      await nextEventLoopTick();
      const cachedSnapshot = snapshot.clone();
      this.snapshotCache.put(location2, cachedSnapshot);
      return cachedSnapshot;
    }
  }
  getCachedSnapshotForLocation(location2) {
    return this.snapshotCache.get(location2);
  }
  isPageRefresh(visit2) {
    return !visit2 || this.lastRenderedLocation.pathname === visit2.location.pathname && visit2.action === "replace";
  }
  shouldPreserveScrollPosition(visit2) {
    return this.isPageRefresh(visit2) && this.snapshot.shouldPreserveScrollPosition;
  }
  get snapshot() {
    return PageSnapshot.fromElement(this.element);
  }
};
var Preloader = class {
  selector = "a[data-turbo-preload]";
  constructor(delegate, snapshotCache) {
    this.delegate = delegate;
    this.snapshotCache = snapshotCache;
  }
  start() {
    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", this.#preloadAll);
    } else {
      this.preloadOnLoadLinksForView(document.body);
    }
  }
  stop() {
    document.removeEventListener("DOMContentLoaded", this.#preloadAll);
  }
  preloadOnLoadLinksForView(element) {
    for (const link of element.querySelectorAll(this.selector)) {
      if (this.delegate.shouldPreloadLink(link)) {
        this.preloadURL(link);
      }
    }
  }
  async preloadURL(link) {
    const location2 = new URL(link.href);
    if (this.snapshotCache.has(location2)) {
      return;
    }
    const fetchRequest = new FetchRequest(this, FetchMethod.get, location2, new URLSearchParams(), link);
    await fetchRequest.perform();
  }
  // Fetch request delegate
  prepareRequest(fetchRequest) {
    fetchRequest.headers["X-Sec-Purpose"] = "prefetch";
  }
  async requestSucceededWithResponse(fetchRequest, fetchResponse) {
    try {
      const responseHTML = await fetchResponse.responseHTML;
      const snapshot = PageSnapshot.fromHTMLString(responseHTML);
      this.snapshotCache.put(fetchRequest.url, snapshot);
    } catch (_) {
    }
  }
  requestStarted(fetchRequest) {
  }
  requestErrored(fetchRequest) {
  }
  requestFinished(fetchRequest) {
  }
  requestPreventedHandlingResponse(fetchRequest, fetchResponse) {
  }
  requestFailedWithResponse(fetchRequest, fetchResponse) {
  }
  #preloadAll = () => {
    this.preloadOnLoadLinksForView(document.body);
  };
};
var Cache = class {
  constructor(session2) {
    this.session = session2;
  }
  clear() {
    this.session.clearCache();
  }
  resetCacheControl() {
    this.#setCacheControl("");
  }
  exemptPageFromCache() {
    this.#setCacheControl("no-cache");
  }
  exemptPageFromPreview() {
    this.#setCacheControl("no-preview");
  }
  #setCacheControl(value) {
    setMetaContent("turbo-cache-control", value);
  }
};
var Session = class {
  navigator = new Navigator(this);
  history = new History(this);
  view = new PageView(this, document.documentElement);
  adapter = new BrowserAdapter(this);
  pageObserver = new PageObserver(this);
  cacheObserver = new CacheObserver();
  linkPrefetchObserver = new LinkPrefetchObserver(this, document);
  linkClickObserver = new LinkClickObserver(this, window);
  formSubmitObserver = new FormSubmitObserver(this, document);
  scrollObserver = new ScrollObserver(this);
  streamObserver = new StreamObserver(this);
  formLinkClickObserver = new FormLinkClickObserver(this, document.documentElement);
  frameRedirector = new FrameRedirector(this, document.documentElement);
  streamMessageRenderer = new StreamMessageRenderer();
  cache = new Cache(this);
  enabled = true;
  started = false;
  #pageRefreshDebouncePeriod = 150;
  constructor(recentRequests2) {
    this.recentRequests = recentRequests2;
    this.preloader = new Preloader(this, this.view.snapshotCache);
    this.debouncedRefresh = this.refresh;
    this.pageRefreshDebouncePeriod = this.pageRefreshDebouncePeriod;
  }
  start() {
    if (!this.started) {
      this.pageObserver.start();
      this.cacheObserver.start();
      this.linkPrefetchObserver.start();
      this.formLinkClickObserver.start();
      this.linkClickObserver.start();
      this.formSubmitObserver.start();
      this.scrollObserver.start();
      this.streamObserver.start();
      this.frameRedirector.start();
      this.history.start();
      this.preloader.start();
      this.started = true;
      this.enabled = true;
    }
  }
  disable() {
    this.enabled = false;
  }
  stop() {
    if (this.started) {
      this.pageObserver.stop();
      this.cacheObserver.stop();
      this.linkPrefetchObserver.stop();
      this.formLinkClickObserver.stop();
      this.linkClickObserver.stop();
      this.formSubmitObserver.stop();
      this.scrollObserver.stop();
      this.streamObserver.stop();
      this.frameRedirector.stop();
      this.history.stop();
      this.preloader.stop();
      this.started = false;
    }
  }
  registerAdapter(adapter) {
    this.adapter = adapter;
  }
  visit(location2, options = {}) {
    const frameElement = options.frame ? document.getElementById(options.frame) : null;
    if (frameElement instanceof FrameElement) {
      const action = options.action || getVisitAction(frameElement);
      frameElement.delegate.proposeVisitIfNavigatedWithAction(frameElement, action);
      frameElement.src = location2.toString();
    } else {
      this.navigator.proposeVisit(expandURL(location2), options);
    }
  }
  refresh(url, requestId) {
    const isRecentRequest = requestId && this.recentRequests.has(requestId);
    const isCurrentUrl = url === document.baseURI;
    if (!isRecentRequest && !this.navigator.currentVisit && isCurrentUrl) {
      this.visit(url, { action: "replace", shouldCacheSnapshot: false });
    }
  }
  connectStreamSource(source) {
    this.streamObserver.connectStreamSource(source);
  }
  disconnectStreamSource(source) {
    this.streamObserver.disconnectStreamSource(source);
  }
  renderStreamMessage(message) {
    this.streamMessageRenderer.render(StreamMessage.wrap(message));
  }
  clearCache() {
    this.view.clearSnapshotCache();
  }
  setProgressBarDelay(delay) {
    console.warn(
      "Please replace `session.setProgressBarDelay(delay)` with `session.progressBarDelay = delay`. The function is deprecated and will be removed in a future version of Turbo.`"
    );
    this.progressBarDelay = delay;
  }
  set progressBarDelay(delay) {
    config.drive.progressBarDelay = delay;
  }
  get progressBarDelay() {
    return config.drive.progressBarDelay;
  }
  set drive(value) {
    config.drive.enabled = value;
  }
  get drive() {
    return config.drive.enabled;
  }
  set formMode(value) {
    config.forms.mode = value;
  }
  get formMode() {
    return config.forms.mode;
  }
  get location() {
    return this.history.location;
  }
  get restorationIdentifier() {
    return this.history.restorationIdentifier;
  }
  get pageRefreshDebouncePeriod() {
    return this.#pageRefreshDebouncePeriod;
  }
  set pageRefreshDebouncePeriod(value) {
    this.refresh = debounce2(this.debouncedRefresh.bind(this), value);
    this.#pageRefreshDebouncePeriod = value;
  }
  // Preloader delegate
  shouldPreloadLink(element) {
    const isUnsafe = element.hasAttribute("data-turbo-method");
    const isStream = element.hasAttribute("data-turbo-stream");
    const frameTarget = element.getAttribute("data-turbo-frame");
    const frame = frameTarget == "_top" ? null : document.getElementById(frameTarget) || findClosestRecursively(element, "turbo-frame:not([disabled])");
    if (isUnsafe || isStream || frame instanceof FrameElement) {
      return false;
    } else {
      const location2 = new URL(element.href);
      return this.elementIsNavigatable(element) && locationIsVisitable(location2, this.snapshot.rootLocation);
    }
  }
  // History delegate
  historyPoppedToLocationWithRestorationIdentifierAndDirection(location2, restorationIdentifier, direction) {
    if (this.enabled) {
      this.navigator.startVisit(location2, restorationIdentifier, {
        action: "restore",
        historyChanged: true,
        direction
      });
    } else {
      this.adapter.pageInvalidated({
        reason: "turbo_disabled"
      });
    }
  }
  // Scroll observer delegate
  scrollPositionChanged(position) {
    this.history.updateRestorationData({ scrollPosition: position });
  }
  // Form click observer delegate
  willSubmitFormLinkToLocation(link, location2) {
    return this.elementIsNavigatable(link) && locationIsVisitable(location2, this.snapshot.rootLocation);
  }
  submittedFormLinkToLocation() {
  }
  // Link hover observer delegate
  canPrefetchRequestToLocation(link, location2) {
    return this.elementIsNavigatable(link) && locationIsVisitable(location2, this.snapshot.rootLocation) && this.navigator.linkPrefetchingIsEnabledForLocation(location2);
  }
  // Link click observer delegate
  willFollowLinkToLocation(link, location2, event2) {
    return this.elementIsNavigatable(link) && locationIsVisitable(location2, this.snapshot.rootLocation) && this.applicationAllowsFollowingLinkToLocation(link, location2, event2);
  }
  followedLinkToLocation(link, location2) {
    const action = this.getActionForLink(link);
    const acceptsStreamResponse = link.hasAttribute("data-turbo-stream");
    this.visit(location2.href, { action, acceptsStreamResponse });
  }
  // Navigator delegate
  allowsVisitingLocationWithAction(location2, action) {
    return this.locationWithActionIsSamePage(location2, action) || this.applicationAllowsVisitingLocation(location2);
  }
  visitProposedToLocation(location2, options) {
    extendURLWithDeprecatedProperties(location2);
    this.adapter.visitProposedToLocation(location2, options);
  }
  // Visit delegate
  visitStarted(visit2) {
    if (!visit2.acceptsStreamResponse) {
      markAsBusy(document.documentElement);
      this.view.markVisitDirection(visit2.direction);
    }
    extendURLWithDeprecatedProperties(visit2.location);
    if (!visit2.silent) {
      this.notifyApplicationAfterVisitingLocation(visit2.location, visit2.action);
    }
  }
  visitCompleted(visit2) {
    this.view.unmarkVisitDirection();
    clearBusyState(document.documentElement);
    this.notifyApplicationAfterPageLoad(visit2.getTimingMetrics());
  }
  locationWithActionIsSamePage(location2, action) {
    return this.navigator.locationWithActionIsSamePage(location2, action);
  }
  visitScrolledToSamePageLocation(oldURL, newURL) {
    this.notifyApplicationAfterVisitingSamePageLocation(oldURL, newURL);
  }
  // Form submit observer delegate
  willSubmitForm(form, submitter2) {
    const action = getAction$1(form, submitter2);
    return this.submissionIsNavigatable(form, submitter2) && locationIsVisitable(expandURL(action), this.snapshot.rootLocation);
  }
  formSubmitted(form, submitter2) {
    this.navigator.submitForm(form, submitter2);
  }
  // Page observer delegate
  pageBecameInteractive() {
    this.view.lastRenderedLocation = this.location;
    this.notifyApplicationAfterPageLoad();
  }
  pageLoaded() {
    this.history.assumeControlOfScrollRestoration();
  }
  pageWillUnload() {
    this.history.relinquishControlOfScrollRestoration();
  }
  // Stream observer delegate
  receivedMessageFromStream(message) {
    this.renderStreamMessage(message);
  }
  // Page view delegate
  viewWillCacheSnapshot() {
    if (!this.navigator.currentVisit?.silent) {
      this.notifyApplicationBeforeCachingSnapshot();
    }
  }
  allowsImmediateRender({ element }, options) {
    const event2 = this.notifyApplicationBeforeRender(element, options);
    const {
      defaultPrevented,
      detail: { render }
    } = event2;
    if (this.view.renderer && render) {
      this.view.renderer.renderElement = render;
    }
    return !defaultPrevented;
  }
  viewRenderedSnapshot(_snapshot, _isPreview, renderMethod) {
    this.view.lastRenderedLocation = this.history.location;
    this.notifyApplicationAfterRender(renderMethod);
  }
  preloadOnLoadLinksForView(element) {
    this.preloader.preloadOnLoadLinksForView(element);
  }
  viewInvalidated(reason) {
    this.adapter.pageInvalidated(reason);
  }
  // Frame element
  frameLoaded(frame) {
    this.notifyApplicationAfterFrameLoad(frame);
  }
  frameRendered(fetchResponse, frame) {
    this.notifyApplicationAfterFrameRender(fetchResponse, frame);
  }
  // Application events
  applicationAllowsFollowingLinkToLocation(link, location2, ev) {
    const event2 = this.notifyApplicationAfterClickingLinkToLocation(link, location2, ev);
    return !event2.defaultPrevented;
  }
  applicationAllowsVisitingLocation(location2) {
    const event2 = this.notifyApplicationBeforeVisitingLocation(location2);
    return !event2.defaultPrevented;
  }
  notifyApplicationAfterClickingLinkToLocation(link, location2, event2) {
    return dispatch2("turbo:click", {
      target: link,
      detail: { url: location2.href, originalEvent: event2 },
      cancelable: true
    });
  }
  notifyApplicationBeforeVisitingLocation(location2) {
    return dispatch2("turbo:before-visit", {
      detail: { url: location2.href },
      cancelable: true
    });
  }
  notifyApplicationAfterVisitingLocation(location2, action) {
    return dispatch2("turbo:visit", { detail: { url: location2.href, action } });
  }
  notifyApplicationBeforeCachingSnapshot() {
    return dispatch2("turbo:before-cache");
  }
  notifyApplicationBeforeRender(newBody, options) {
    return dispatch2("turbo:before-render", {
      detail: { newBody, ...options },
      cancelable: true
    });
  }
  notifyApplicationAfterRender(renderMethod) {
    return dispatch2("turbo:render", { detail: { renderMethod } });
  }
  notifyApplicationAfterPageLoad(timing = {}) {
    return dispatch2("turbo:load", {
      detail: { url: this.location.href, timing }
    });
  }
  notifyApplicationAfterVisitingSamePageLocation(oldURL, newURL) {
    dispatchEvent(
      new HashChangeEvent("hashchange", {
        oldURL: oldURL.toString(),
        newURL: newURL.toString()
      })
    );
  }
  notifyApplicationAfterFrameLoad(frame) {
    return dispatch2("turbo:frame-load", { target: frame });
  }
  notifyApplicationAfterFrameRender(fetchResponse, frame) {
    return dispatch2("turbo:frame-render", {
      detail: { fetchResponse },
      target: frame,
      cancelable: true
    });
  }
  // Helpers
  submissionIsNavigatable(form, submitter2) {
    if (config.forms.mode == "off") {
      return false;
    } else {
      const submitterIsNavigatable = submitter2 ? this.elementIsNavigatable(submitter2) : true;
      if (config.forms.mode == "optin") {
        return submitterIsNavigatable && form.closest('[data-turbo="true"]') != null;
      } else {
        return submitterIsNavigatable && this.elementIsNavigatable(form);
      }
    }
  }
  elementIsNavigatable(element) {
    const container = findClosestRecursively(element, "[data-turbo]");
    const withinFrame = findClosestRecursively(element, "turbo-frame");
    if (config.drive.enabled || withinFrame) {
      if (container) {
        return container.getAttribute("data-turbo") != "false";
      } else {
        return true;
      }
    } else {
      if (container) {
        return container.getAttribute("data-turbo") == "true";
      } else {
        return false;
      }
    }
  }
  // Private
  getActionForLink(link) {
    return getVisitAction(link) || "advance";
  }
  get snapshot() {
    return this.view.snapshot;
  }
};
function extendURLWithDeprecatedProperties(url) {
  Object.defineProperties(url, deprecatedLocationPropertyDescriptors);
}
var deprecatedLocationPropertyDescriptors = {
  absoluteURL: {
    get() {
      return this.toString();
    }
  }
};
var session = new Session(recentRequests);
var { cache, navigator: navigator$1 } = session;
function start3() {
  session.start();
}
function registerAdapter(adapter) {
  session.registerAdapter(adapter);
}
function visit(location2, options) {
  session.visit(location2, options);
}
function connectStreamSource(source) {
  session.connectStreamSource(source);
}
function disconnectStreamSource(source) {
  session.disconnectStreamSource(source);
}
function renderStreamMessage(message) {
  session.renderStreamMessage(message);
}
function clearCache() {
  console.warn(
    "Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"
  );
  session.clearCache();
}
function setProgressBarDelay(delay) {
  console.warn(
    "Please replace `Turbo.setProgressBarDelay(delay)` with `Turbo.config.drive.progressBarDelay = delay`. The top-level function is deprecated and will be removed in a future version of Turbo.`"
  );
  config.drive.progressBarDelay = delay;
}
function setConfirmMethod(confirmMethod) {
  console.warn(
    "Please replace `Turbo.setConfirmMethod(confirmMethod)` with `Turbo.config.forms.confirm = confirmMethod`. The top-level function is deprecated and will be removed in a future version of Turbo.`"
  );
  config.forms.confirm = confirmMethod;
}
function setFormMode(mode) {
  console.warn(
    "Please replace `Turbo.setFormMode(mode)` with `Turbo.config.forms.mode = mode`. The top-level function is deprecated and will be removed in a future version of Turbo.`"
  );
  config.forms.mode = mode;
}
function morphBodyElements(currentBody, newBody) {
  MorphingPageRenderer.renderElement(currentBody, newBody);
}
function morphTurboFrameElements(currentFrame, newFrame) {
  MorphingFrameRenderer.renderElement(currentFrame, newFrame);
}
var Turbo2 = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  navigator: navigator$1,
  session,
  cache,
  PageRenderer,
  PageSnapshot,
  FrameRenderer,
  fetch: fetchWithTurboHeaders,
  config,
  start: start3,
  registerAdapter,
  visit,
  connectStreamSource,
  disconnectStreamSource,
  renderStreamMessage,
  clearCache,
  setProgressBarDelay,
  setConfirmMethod,
  setFormMode,
  morphBodyElements,
  morphTurboFrameElements,
  morphChildren,
  morphElements
});
var TurboFrameMissingError = class extends Error {
};
var FrameController = class {
  fetchResponseLoaded = (_fetchResponse) => Promise.resolve();
  #currentFetchRequest = null;
  #resolveVisitPromise = () => {
  };
  #connected = false;
  #hasBeenLoaded = false;
  #ignoredAttributes = /* @__PURE__ */ new Set();
  #shouldMorphFrame = false;
  action = null;
  constructor(element) {
    this.element = element;
    this.view = new FrameView(this, this.element);
    this.appearanceObserver = new AppearanceObserver(this, this.element);
    this.formLinkClickObserver = new FormLinkClickObserver(this, this.element);
    this.linkInterceptor = new LinkInterceptor(this, this.element);
    this.restorationIdentifier = uuid();
    this.formSubmitObserver = new FormSubmitObserver(this, this.element);
  }
  // Frame delegate
  connect() {
    if (!this.#connected) {
      this.#connected = true;
      if (this.loadingStyle == FrameLoadingStyle.lazy) {
        this.appearanceObserver.start();
      } else {
        this.#loadSourceURL();
      }
      this.formLinkClickObserver.start();
      this.linkInterceptor.start();
      this.formSubmitObserver.start();
    }
  }
  disconnect() {
    if (this.#connected) {
      this.#connected = false;
      this.appearanceObserver.stop();
      this.formLinkClickObserver.stop();
      this.linkInterceptor.stop();
      this.formSubmitObserver.stop();
    }
  }
  disabledChanged() {
    if (this.loadingStyle == FrameLoadingStyle.eager) {
      this.#loadSourceURL();
    }
  }
  sourceURLChanged() {
    if (this.#isIgnoringChangesTo("src")) return;
    if (this.element.isConnected) {
      this.complete = false;
    }
    if (this.loadingStyle == FrameLoadingStyle.eager || this.#hasBeenLoaded) {
      this.#loadSourceURL();
    }
  }
  sourceURLReloaded() {
    const { refresh, src } = this.element;
    this.#shouldMorphFrame = src && refresh === "morph";
    this.element.removeAttribute("complete");
    this.element.src = null;
    this.element.src = src;
    return this.element.loaded;
  }
  loadingStyleChanged() {
    if (this.loadingStyle == FrameLoadingStyle.lazy) {
      this.appearanceObserver.start();
    } else {
      this.appearanceObserver.stop();
      this.#loadSourceURL();
    }
  }
  async #loadSourceURL() {
    if (this.enabled && this.isActive && !this.complete && this.sourceURL) {
      this.element.loaded = this.#visit(expandURL(this.sourceURL));
      this.appearanceObserver.stop();
      await this.element.loaded;
      this.#hasBeenLoaded = true;
    }
  }
  async loadResponse(fetchResponse) {
    if (fetchResponse.redirected || fetchResponse.succeeded && fetchResponse.isHTML) {
      this.sourceURL = fetchResponse.response.url;
    }
    try {
      const html = await fetchResponse.responseHTML;
      if (html) {
        const document2 = parseHTMLDocument(html);
        const pageSnapshot = PageSnapshot.fromDocument(document2);
        if (pageSnapshot.isVisitable) {
          await this.#loadFrameResponse(fetchResponse, document2);
        } else {
          await this.#handleUnvisitableFrameResponse(fetchResponse);
        }
      }
    } finally {
      this.#shouldMorphFrame = false;
      this.fetchResponseLoaded = () => Promise.resolve();
    }
  }
  // Appearance observer delegate
  elementAppearedInViewport(element) {
    this.proposeVisitIfNavigatedWithAction(element, getVisitAction(element));
    this.#loadSourceURL();
  }
  // Form link click observer delegate
  willSubmitFormLinkToLocation(link) {
    return this.#shouldInterceptNavigation(link);
  }
  submittedFormLinkToLocation(link, _location, form) {
    const frame = this.#findFrameElement(link);
    if (frame) form.setAttribute("data-turbo-frame", frame.id);
  }
  // Link interceptor delegate
  shouldInterceptLinkClick(element, _location, _event) {
    return this.#shouldInterceptNavigation(element);
  }
  linkClickIntercepted(element, location2) {
    this.#navigateFrame(element, location2);
  }
  // Form submit observer delegate
  willSubmitForm(element, submitter2) {
    return element.closest("turbo-frame") == this.element && this.#shouldInterceptNavigation(element, submitter2);
  }
  formSubmitted(element, submitter2) {
    if (this.formSubmission) {
      this.formSubmission.stop();
    }
    this.formSubmission = new FormSubmission(this, element, submitter2);
    const { fetchRequest } = this.formSubmission;
    this.prepareRequest(fetchRequest);
    this.formSubmission.start();
  }
  // Fetch request delegate
  prepareRequest(request) {
    request.headers["Turbo-Frame"] = this.id;
    if (this.currentNavigationElement?.hasAttribute("data-turbo-stream")) {
      request.acceptResponseType(StreamMessage.contentType);
    }
  }
  requestStarted(_request) {
    markAsBusy(this.element);
  }
  requestPreventedHandlingResponse(_request, _response) {
    this.#resolveVisitPromise();
  }
  async requestSucceededWithResponse(request, response) {
    await this.loadResponse(response);
    this.#resolveVisitPromise();
  }
  async requestFailedWithResponse(request, response) {
    await this.loadResponse(response);
    this.#resolveVisitPromise();
  }
  requestErrored(request, error3) {
    console.error(error3);
    this.#resolveVisitPromise();
  }
  requestFinished(_request) {
    clearBusyState(this.element);
  }
  // Form submission delegate
  formSubmissionStarted({ formElement }) {
    markAsBusy(formElement, this.#findFrameElement(formElement));
  }
  formSubmissionSucceededWithResponse(formSubmission, response) {
    const frame = this.#findFrameElement(formSubmission.formElement, formSubmission.submitter);
    frame.delegate.proposeVisitIfNavigatedWithAction(frame, getVisitAction(formSubmission.submitter, formSubmission.formElement, frame));
    frame.delegate.loadResponse(response);
    if (!formSubmission.isSafe) {
      session.clearCache();
    }
  }
  formSubmissionFailedWithResponse(formSubmission, fetchResponse) {
    this.element.delegate.loadResponse(fetchResponse);
    session.clearCache();
  }
  formSubmissionErrored(formSubmission, error3) {
    console.error(error3);
  }
  formSubmissionFinished({ formElement }) {
    clearBusyState(formElement, this.#findFrameElement(formElement));
  }
  // View delegate
  allowsImmediateRender({ element: newFrame }, options) {
    const event2 = dispatch2("turbo:before-frame-render", {
      target: this.element,
      detail: { newFrame, ...options },
      cancelable: true
    });
    const {
      defaultPrevented,
      detail: { render }
    } = event2;
    if (this.view.renderer && render) {
      this.view.renderer.renderElement = render;
    }
    return !defaultPrevented;
  }
  viewRenderedSnapshot(_snapshot, _isPreview, _renderMethod) {
  }
  preloadOnLoadLinksForView(element) {
    session.preloadOnLoadLinksForView(element);
  }
  viewInvalidated() {
  }
  // Frame renderer delegate
  willRenderFrame(currentElement, _newElement) {
    this.previousFrameElement = currentElement.cloneNode(true);
  }
  visitCachedSnapshot = ({ element }) => {
    const frame = element.querySelector("#" + this.element.id);
    if (frame && this.previousFrameElement) {
      frame.replaceChildren(...this.previousFrameElement.children);
    }
    delete this.previousFrameElement;
  };
  // Private
  async #loadFrameResponse(fetchResponse, document2) {
    const newFrameElement = await this.extractForeignFrameElement(document2.body);
    const rendererClass = this.#shouldMorphFrame ? MorphingFrameRenderer : FrameRenderer;
    if (newFrameElement) {
      const snapshot = new Snapshot(newFrameElement);
      const renderer = new rendererClass(this, this.view.snapshot, snapshot, false, false);
      if (this.view.renderPromise) await this.view.renderPromise;
      this.changeHistory();
      await this.view.render(renderer);
      this.complete = true;
      session.frameRendered(fetchResponse, this.element);
      session.frameLoaded(this.element);
      await this.fetchResponseLoaded(fetchResponse);
    } else if (this.#willHandleFrameMissingFromResponse(fetchResponse)) {
      this.#handleFrameMissingFromResponse(fetchResponse);
    }
  }
  async #visit(url) {
    const request = new FetchRequest(this, FetchMethod.get, url, new URLSearchParams(), this.element);
    this.#currentFetchRequest?.cancel();
    this.#currentFetchRequest = request;
    return new Promise((resolve) => {
      this.#resolveVisitPromise = () => {
        this.#resolveVisitPromise = () => {
        };
        this.#currentFetchRequest = null;
        resolve();
      };
      request.perform();
    });
  }
  #navigateFrame(element, url, submitter2) {
    const frame = this.#findFrameElement(element, submitter2);
    frame.delegate.proposeVisitIfNavigatedWithAction(frame, getVisitAction(submitter2, element, frame));
    this.#withCurrentNavigationElement(element, () => {
      frame.src = url;
    });
  }
  proposeVisitIfNavigatedWithAction(frame, action = null) {
    this.action = action;
    if (this.action) {
      const pageSnapshot = PageSnapshot.fromElement(frame).clone();
      const { visitCachedSnapshot } = frame.delegate;
      frame.delegate.fetchResponseLoaded = async (fetchResponse) => {
        if (frame.src) {
          const { statusCode, redirected } = fetchResponse;
          const responseHTML = await fetchResponse.responseHTML;
          const response = { statusCode, redirected, responseHTML };
          const options = {
            response,
            visitCachedSnapshot,
            willRender: false,
            updateHistory: false,
            restorationIdentifier: this.restorationIdentifier,
            snapshot: pageSnapshot
          };
          if (this.action) options.action = this.action;
          session.visit(frame.src, options);
        }
      };
    }
  }
  changeHistory() {
    if (this.action) {
      const method = getHistoryMethodForAction(this.action);
      session.history.update(method, expandURL(this.element.src || ""), this.restorationIdentifier);
    }
  }
  async #handleUnvisitableFrameResponse(fetchResponse) {
    console.warn(
      `The response (${fetchResponse.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`
    );
    await this.#visitResponse(fetchResponse.response);
  }
  #willHandleFrameMissingFromResponse(fetchResponse) {
    this.element.setAttribute("complete", "");
    const response = fetchResponse.response;
    const visit2 = async (url, options) => {
      if (url instanceof Response) {
        this.#visitResponse(url);
      } else {
        session.visit(url, options);
      }
    };
    const event2 = dispatch2("turbo:frame-missing", {
      target: this.element,
      detail: { response, visit: visit2 },
      cancelable: true
    });
    return !event2.defaultPrevented;
  }
  #handleFrameMissingFromResponse(fetchResponse) {
    this.view.missing();
    this.#throwFrameMissingError(fetchResponse);
  }
  #throwFrameMissingError(fetchResponse) {
    const message = `The response (${fetchResponse.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;
    throw new TurboFrameMissingError(message);
  }
  async #visitResponse(response) {
    const wrapped = new FetchResponse(response);
    const responseHTML = await wrapped.responseHTML;
    const { location: location2, redirected, statusCode } = wrapped;
    return session.visit(location2, { response: { redirected, statusCode, responseHTML } });
  }
  #findFrameElement(element, submitter2) {
    const id2 = getAttribute("data-turbo-frame", submitter2, element) || this.element.getAttribute("target");
    return getFrameElementById(id2) ?? this.element;
  }
  async extractForeignFrameElement(container) {
    let element;
    const id2 = CSS.escape(this.id);
    try {
      element = activateElement(container.querySelector(`turbo-frame#${id2}`), this.sourceURL);
      if (element) {
        return element;
      }
      element = activateElement(container.querySelector(`turbo-frame[src][recurse~=${id2}]`), this.sourceURL);
      if (element) {
        await element.loaded;
        return await this.extractForeignFrameElement(element);
      }
    } catch (error3) {
      console.error(error3);
      return new FrameElement();
    }
    return null;
  }
  #formActionIsVisitable(form, submitter2) {
    const action = getAction$1(form, submitter2);
    return locationIsVisitable(expandURL(action), this.rootLocation);
  }
  #shouldInterceptNavigation(element, submitter2) {
    const id2 = getAttribute("data-turbo-frame", submitter2, element) || this.element.getAttribute("target");
    if (element instanceof HTMLFormElement && !this.#formActionIsVisitable(element, submitter2)) {
      return false;
    }
    if (!this.enabled || id2 == "_top") {
      return false;
    }
    if (id2) {
      const frameElement = getFrameElementById(id2);
      if (frameElement) {
        return !frameElement.disabled;
      }
    }
    if (!session.elementIsNavigatable(element)) {
      return false;
    }
    if (submitter2 && !session.elementIsNavigatable(submitter2)) {
      return false;
    }
    return true;
  }
  // Computed properties
  get id() {
    return this.element.id;
  }
  get enabled() {
    return !this.element.disabled;
  }
  get sourceURL() {
    if (this.element.src) {
      return this.element.src;
    }
  }
  set sourceURL(sourceURL) {
    this.#ignoringChangesToAttribute("src", () => {
      this.element.src = sourceURL ?? null;
    });
  }
  get loadingStyle() {
    return this.element.loading;
  }
  get isLoading() {
    return this.formSubmission !== void 0 || this.#resolveVisitPromise() !== void 0;
  }
  get complete() {
    return this.element.hasAttribute("complete");
  }
  set complete(value) {
    if (value) {
      this.element.setAttribute("complete", "");
    } else {
      this.element.removeAttribute("complete");
    }
  }
  get isActive() {
    return this.element.isActive && this.#connected;
  }
  get rootLocation() {
    const meta = this.element.ownerDocument.querySelector(`meta[name="turbo-root"]`);
    const root = meta?.content ?? "/";
    return expandURL(root);
  }
  #isIgnoringChangesTo(attributeName) {
    return this.#ignoredAttributes.has(attributeName);
  }
  #ignoringChangesToAttribute(attributeName, callback) {
    this.#ignoredAttributes.add(attributeName);
    callback();
    this.#ignoredAttributes.delete(attributeName);
  }
  #withCurrentNavigationElement(element, callback) {
    this.currentNavigationElement = element;
    callback();
    delete this.currentNavigationElement;
  }
};
function getFrameElementById(id2) {
  if (id2 != null) {
    const element = document.getElementById(id2);
    if (element instanceof FrameElement) {
      return element;
    }
  }
}
function activateElement(element, currentURL) {
  if (element) {
    const src = element.getAttribute("src");
    if (src != null && currentURL != null && urlsAreEqual(src, currentURL)) {
      throw new Error(`Matching <turbo-frame id="${element.id}"> element has a source URL which references itself`);
    }
    if (element.ownerDocument !== document) {
      element = document.importNode(element, true);
    }
    if (element instanceof FrameElement) {
      element.connectedCallback();
      element.disconnectedCallback();
      return element;
    }
  }
}
var StreamActions = {
  after() {
    this.targetElements.forEach((e) => e.parentElement?.insertBefore(this.templateContent, e.nextSibling));
  },
  append() {
    this.removeDuplicateTargetChildren();
    this.targetElements.forEach((e) => e.append(this.templateContent));
  },
  before() {
    this.targetElements.forEach((e) => e.parentElement?.insertBefore(this.templateContent, e));
  },
  prepend() {
    this.removeDuplicateTargetChildren();
    this.targetElements.forEach((e) => e.prepend(this.templateContent));
  },
  remove() {
    this.targetElements.forEach((e) => e.remove());
  },
  replace() {
    const method = this.getAttribute("method");
    this.targetElements.forEach((targetElement) => {
      if (method === "morph") {
        morphElements(targetElement, this.templateContent);
      } else {
        targetElement.replaceWith(this.templateContent);
      }
    });
  },
  update() {
    const method = this.getAttribute("method");
    this.targetElements.forEach((targetElement) => {
      if (method === "morph") {
        morphChildren(targetElement, this.templateContent);
      } else {
        targetElement.innerHTML = "";
        targetElement.append(this.templateContent);
      }
    });
  },
  refresh() {
    session.refresh(this.baseURI, this.requestId);
  }
};
var StreamElement = class _StreamElement extends HTMLElement {
  static async renderElement(newElement) {
    await newElement.performAction();
  }
  async connectedCallback() {
    try {
      await this.render();
    } catch (error3) {
      console.error(error3);
    } finally {
      this.disconnect();
    }
  }
  async render() {
    return this.renderPromise ??= (async () => {
      const event2 = this.beforeRenderEvent;
      if (this.dispatchEvent(event2)) {
        await nextRepaint();
        await event2.detail.render(this);
      }
    })();
  }
  disconnect() {
    try {
      this.remove();
    } catch {
    }
  }
  /**
   * Removes duplicate children (by ID)
   */
  removeDuplicateTargetChildren() {
    this.duplicateChildren.forEach((c) => c.remove());
  }
  /**
   * Gets the list of duplicate children (i.e. those with the same ID)
   */
  get duplicateChildren() {
    const existingChildren = this.targetElements.flatMap((e) => [...e.children]).filter((c) => !!c.getAttribute("id"));
    const newChildrenIds = [...this.templateContent?.children || []].filter((c) => !!c.getAttribute("id")).map((c) => c.getAttribute("id"));
    return existingChildren.filter((c) => newChildrenIds.includes(c.getAttribute("id")));
  }
  /**
   * Gets the action function to be performed.
   */
  get performAction() {
    if (this.action) {
      const actionFunction = StreamActions[this.action];
      if (actionFunction) {
        return actionFunction;
      }
      this.#raise("unknown action");
    }
    this.#raise("action attribute is missing");
  }
  /**
   * Gets the target elements which the template will be rendered to.
   */
  get targetElements() {
    if (this.target) {
      return this.targetElementsById;
    } else if (this.targets) {
      return this.targetElementsByQuery;
    } else {
      this.#raise("target or targets attribute is missing");
    }
  }
  /**
   * Gets the contents of the main `<template>`.
   */
  get templateContent() {
    return this.templateElement.content.cloneNode(true);
  }
  /**
   * Gets the main `<template>` used for rendering
   */
  get templateElement() {
    if (this.firstElementChild === null) {
      const template = this.ownerDocument.createElement("template");
      this.appendChild(template);
      return template;
    } else if (this.firstElementChild instanceof HTMLTemplateElement) {
      return this.firstElementChild;
    }
    this.#raise("first child element must be a <template> element");
  }
  /**
   * Gets the current action.
   */
  get action() {
    return this.getAttribute("action");
  }
  /**
   * Gets the current target (an element ID) to which the result will
   * be rendered.
   */
  get target() {
    return this.getAttribute("target");
  }
  /**
   * Gets the current "targets" selector (a CSS selector)
   */
  get targets() {
    return this.getAttribute("targets");
  }
  /**
   * Reads the request-id attribute
   */
  get requestId() {
    return this.getAttribute("request-id");
  }
  #raise(message) {
    throw new Error(`${this.description}: ${message}`);
  }
  get description() {
    return (this.outerHTML.match(/<[^>]+>/) ?? [])[0] ?? "<turbo-stream>";
  }
  get beforeRenderEvent() {
    return new CustomEvent("turbo:before-stream-render", {
      bubbles: true,
      cancelable: true,
      detail: { newStream: this, render: _StreamElement.renderElement }
    });
  }
  get targetElementsById() {
    const element = this.ownerDocument?.getElementById(this.target);
    if (element !== null) {
      return [element];
    } else {
      return [];
    }
  }
  get targetElementsByQuery() {
    const elements = this.ownerDocument?.querySelectorAll(this.targets);
    if (elements.length !== 0) {
      return Array.prototype.slice.call(elements);
    } else {
      return [];
    }
  }
};
var StreamSourceElement = class extends HTMLElement {
  streamSource = null;
  connectedCallback() {
    this.streamSource = this.src.match(/^ws{1,2}:/) ? new WebSocket(this.src) : new EventSource(this.src);
    connectStreamSource(this.streamSource);
  }
  disconnectedCallback() {
    if (this.streamSource) {
      this.streamSource.close();
      disconnectStreamSource(this.streamSource);
    }
  }
  get src() {
    return this.getAttribute("src") || "";
  }
};
FrameElement.delegateConstructor = FrameController;
if (customElements.get("turbo-frame") === void 0) {
  customElements.define("turbo-frame", FrameElement);
}
if (customElements.get("turbo-stream") === void 0) {
  customElements.define("turbo-stream", StreamElement);
}
if (customElements.get("turbo-stream-source") === void 0) {
  customElements.define("turbo-stream-source", StreamSourceElement);
}
(() => {
  let element = document.currentScript;
  if (!element) return;
  if (element.hasAttribute("data-turbo-suppress-warning")) return;
  element = element.parentElement;
  while (element) {
    if (element == document.body) {
      return console.warn(
        unindent`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,
        element.outerHTML
      );
    }
    element = element.parentElement;
  }
})();
window.Turbo = { ...Turbo2, StreamActions };
start3();

// node_modules/@hotwired/turbo-rails/app/javascript/turbo/cable.js
var consumer;
async function getConsumer() {
  return consumer || setConsumer(createConsumer3().then(setConsumer));
}
function setConsumer(newConsumer) {
  return consumer = newConsumer;
}
async function createConsumer3() {
  const { createConsumer: createConsumer4 } = await Promise.resolve().then(() => (init_src(), src_exports));
  return createConsumer4();
}
async function subscribeTo(channel, mixin) {
  const { subscriptions } = await getConsumer();
  return subscriptions.create(channel, mixin);
}

// node_modules/@hotwired/turbo-rails/app/javascript/turbo/snakeize.js
function walk2(obj) {
  if (!obj || typeof obj !== "object") return obj;
  if (obj instanceof Date || obj instanceof RegExp) return obj;
  if (Array.isArray(obj)) return obj.map(walk2);
  return Object.keys(obj).reduce(function(acc, key) {
    var camel = key[0].toLowerCase() + key.slice(1).replace(/([A-Z]+)/g, function(m, x) {
      return "_" + x.toLowerCase();
    });
    acc[camel] = walk2(obj[key]);
    return acc;
  }, {});
}

// node_modules/@hotwired/turbo-rails/app/javascript/turbo/cable_stream_source_element.js
var TurboCableStreamSourceElement = class extends HTMLElement {
  static observedAttributes = ["channel", "signed-stream-name"];
  async connectedCallback() {
    connectStreamSource(this);
    this.subscription = await subscribeTo(this.channel, {
      received: this.dispatchMessageEvent.bind(this),
      connected: this.subscriptionConnected.bind(this),
      disconnected: this.subscriptionDisconnected.bind(this)
    });
  }
  disconnectedCallback() {
    disconnectStreamSource(this);
    if (this.subscription) this.subscription.unsubscribe();
    this.subscriptionDisconnected();
  }
  attributeChangedCallback() {
    if (this.subscription) {
      this.disconnectedCallback();
      this.connectedCallback();
    }
  }
  dispatchMessageEvent(data2) {
    const event2 = new MessageEvent("message", { data: data2 });
    return this.dispatchEvent(event2);
  }
  subscriptionConnected() {
    this.setAttribute("connected", "");
  }
  subscriptionDisconnected() {
    this.removeAttribute("connected");
  }
  get channel() {
    const channel = this.getAttribute("channel");
    const signed_stream_name = this.getAttribute("signed-stream-name");
    return { channel, signed_stream_name, ...walk2({ ...this.dataset }) };
  }
};
if (customElements.get("turbo-cable-stream-source") === void 0) {
  customElements.define("turbo-cable-stream-source", TurboCableStreamSourceElement);
}

// node_modules/@hotwired/turbo-rails/app/javascript/turbo/fetch_requests.js
function encodeMethodIntoRequestBody(event2) {
  if (event2.target instanceof HTMLFormElement) {
    const { target: form, detail: { fetchOptions } } = event2;
    form.addEventListener("turbo:submit-start", ({ detail: { formSubmission: { submitter: submitter2 } } }) => {
      const body = isBodyInit(fetchOptions.body) ? fetchOptions.body : new URLSearchParams();
      const method = determineFetchMethod(submitter2, body, form);
      if (!/get/i.test(method)) {
        if (/post/i.test(method)) {
          body.delete("_method");
        } else {
          body.set("_method", method);
        }
        fetchOptions.method = "post";
      }
    }, { once: true });
  }
}
function determineFetchMethod(submitter2, body, form) {
  const formMethod = determineFormMethod(submitter2);
  const overrideMethod = body.get("_method");
  const method = form.getAttribute("method") || "get";
  if (typeof formMethod == "string") {
    return formMethod;
  } else if (typeof overrideMethod == "string") {
    return overrideMethod;
  } else {
    return method;
  }
}
function determineFormMethod(submitter2) {
  if (submitter2 instanceof HTMLButtonElement || submitter2 instanceof HTMLInputElement) {
    if (submitter2.name === "_method") {
      return submitter2.value;
    } else if (submitter2.hasAttribute("formmethod")) {
      return submitter2.formMethod;
    } else {
      return null;
    }
  } else {
    return null;
  }
}
function isBodyInit(body) {
  return body instanceof FormData || body instanceof URLSearchParams;
}

// node_modules/@hotwired/turbo-rails/app/javascript/turbo/index.js
window.Turbo = turbo_es2017_esm_exports;
addEventListener("turbo:before-fetch-request", encodeMethodIntoRequestBody);

// node_modules/@hotwired/stimulus/dist/stimulus.js
var EventListener = class {
  constructor(eventTarget, eventName, eventOptions) {
    this.eventTarget = eventTarget;
    this.eventName = eventName;
    this.eventOptions = eventOptions;
    this.unorderedBindings = /* @__PURE__ */ new Set();
  }
  connect() {
    this.eventTarget.addEventListener(this.eventName, this, this.eventOptions);
  }
  disconnect() {
    this.eventTarget.removeEventListener(this.eventName, this, this.eventOptions);
  }
  bindingConnected(binding) {
    this.unorderedBindings.add(binding);
  }
  bindingDisconnected(binding) {
    this.unorderedBindings.delete(binding);
  }
  handleEvent(event2) {
    const extendedEvent = extendEvent(event2);
    for (const binding of this.bindings) {
      if (extendedEvent.immediatePropagationStopped) {
        break;
      } else {
        binding.handleEvent(extendedEvent);
      }
    }
  }
  hasBindings() {
    return this.unorderedBindings.size > 0;
  }
  get bindings() {
    return Array.from(this.unorderedBindings).sort((left, right) => {
      const leftIndex = left.index, rightIndex = right.index;
      return leftIndex < rightIndex ? -1 : leftIndex > rightIndex ? 1 : 0;
    });
  }
};
function extendEvent(event2) {
  if ("immediatePropagationStopped" in event2) {
    return event2;
  } else {
    const { stopImmediatePropagation } = event2;
    return Object.assign(event2, {
      immediatePropagationStopped: false,
      stopImmediatePropagation() {
        this.immediatePropagationStopped = true;
        stopImmediatePropagation.call(this);
      }
    });
  }
}
var Dispatcher = class {
  constructor(application2) {
    this.application = application2;
    this.eventListenerMaps = /* @__PURE__ */ new Map();
    this.started = false;
  }
  start() {
    if (!this.started) {
      this.started = true;
      this.eventListeners.forEach((eventListener) => eventListener.connect());
    }
  }
  stop() {
    if (this.started) {
      this.started = false;
      this.eventListeners.forEach((eventListener) => eventListener.disconnect());
    }
  }
  get eventListeners() {
    return Array.from(this.eventListenerMaps.values()).reduce((listeners, map) => listeners.concat(Array.from(map.values())), []);
  }
  bindingConnected(binding) {
    this.fetchEventListenerForBinding(binding).bindingConnected(binding);
  }
  bindingDisconnected(binding, clearEventListeners = false) {
    this.fetchEventListenerForBinding(binding).bindingDisconnected(binding);
    if (clearEventListeners)
      this.clearEventListenersForBinding(binding);
  }
  handleError(error3, message, detail = {}) {
    this.application.handleError(error3, `Error ${message}`, detail);
  }
  clearEventListenersForBinding(binding) {
    const eventListener = this.fetchEventListenerForBinding(binding);
    if (!eventListener.hasBindings()) {
      eventListener.disconnect();
      this.removeMappedEventListenerFor(binding);
    }
  }
  removeMappedEventListenerFor(binding) {
    const { eventTarget, eventName, eventOptions } = binding;
    const eventListenerMap = this.fetchEventListenerMapForEventTarget(eventTarget);
    const cacheKey = this.cacheKey(eventName, eventOptions);
    eventListenerMap.delete(cacheKey);
    if (eventListenerMap.size == 0)
      this.eventListenerMaps.delete(eventTarget);
  }
  fetchEventListenerForBinding(binding) {
    const { eventTarget, eventName, eventOptions } = binding;
    return this.fetchEventListener(eventTarget, eventName, eventOptions);
  }
  fetchEventListener(eventTarget, eventName, eventOptions) {
    const eventListenerMap = this.fetchEventListenerMapForEventTarget(eventTarget);
    const cacheKey = this.cacheKey(eventName, eventOptions);
    let eventListener = eventListenerMap.get(cacheKey);
    if (!eventListener) {
      eventListener = this.createEventListener(eventTarget, eventName, eventOptions);
      eventListenerMap.set(cacheKey, eventListener);
    }
    return eventListener;
  }
  createEventListener(eventTarget, eventName, eventOptions) {
    const eventListener = new EventListener(eventTarget, eventName, eventOptions);
    if (this.started) {
      eventListener.connect();
    }
    return eventListener;
  }
  fetchEventListenerMapForEventTarget(eventTarget) {
    let eventListenerMap = this.eventListenerMaps.get(eventTarget);
    if (!eventListenerMap) {
      eventListenerMap = /* @__PURE__ */ new Map();
      this.eventListenerMaps.set(eventTarget, eventListenerMap);
    }
    return eventListenerMap;
  }
  cacheKey(eventName, eventOptions) {
    const parts = [eventName];
    Object.keys(eventOptions).sort().forEach((key) => {
      parts.push(`${eventOptions[key] ? "" : "!"}${key}`);
    });
    return parts.join(":");
  }
};
var defaultActionDescriptorFilters = {
  stop({ event: event2, value }) {
    if (value)
      event2.stopPropagation();
    return true;
  },
  prevent({ event: event2, value }) {
    if (value)
      event2.preventDefault();
    return true;
  },
  self({ event: event2, value, element }) {
    if (value) {
      return element === event2.target;
    } else {
      return true;
    }
  }
};
var descriptorPattern = /^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;
function parseActionDescriptorString(descriptorString) {
  const source = descriptorString.trim();
  const matches = source.match(descriptorPattern) || [];
  let eventName = matches[2];
  let keyFilter = matches[3];
  if (keyFilter && !["keydown", "keyup", "keypress"].includes(eventName)) {
    eventName += `.${keyFilter}`;
    keyFilter = "";
  }
  return {
    eventTarget: parseEventTarget(matches[4]),
    eventName,
    eventOptions: matches[7] ? parseEventOptions(matches[7]) : {},
    identifier: matches[5],
    methodName: matches[6],
    keyFilter: matches[1] || keyFilter
  };
}
function parseEventTarget(eventTargetName) {
  if (eventTargetName == "window") {
    return window;
  } else if (eventTargetName == "document") {
    return document;
  }
}
function parseEventOptions(eventOptions) {
  return eventOptions.split(":").reduce((options, token) => Object.assign(options, { [token.replace(/^!/, "")]: !/^!/.test(token) }), {});
}
function stringifyEventTarget(eventTarget) {
  if (eventTarget == window) {
    return "window";
  } else if (eventTarget == document) {
    return "document";
  }
}
function camelize2(value) {
  return value.replace(/(?:[_-])([a-z0-9])/g, (_, char) => char.toUpperCase());
}
function namespaceCamelize(value) {
  return camelize2(value.replace(/--/g, "-").replace(/__/g, "_"));
}
function capitalize2(value) {
  return value.charAt(0).toUpperCase() + value.slice(1);
}
function dasherize(value) {
  return value.replace(/([A-Z])/g, (_, char) => `-${char.toLowerCase()}`);
}
function tokenize(value) {
  return value.match(/[^\s]+/g) || [];
}
function isSomething(object) {
  return object !== null && object !== void 0;
}
function hasProperty(object, property) {
  return Object.prototype.hasOwnProperty.call(object, property);
}
var allModifiers = ["meta", "ctrl", "alt", "shift"];
var Action = class {
  constructor(element, index, descriptor, schema) {
    this.element = element;
    this.index = index;
    this.eventTarget = descriptor.eventTarget || element;
    this.eventName = descriptor.eventName || getDefaultEventNameForElement(element) || error2("missing event name");
    this.eventOptions = descriptor.eventOptions || {};
    this.identifier = descriptor.identifier || error2("missing identifier");
    this.methodName = descriptor.methodName || error2("missing method name");
    this.keyFilter = descriptor.keyFilter || "";
    this.schema = schema;
  }
  static forToken(token, schema) {
    return new this(token.element, token.index, parseActionDescriptorString(token.content), schema);
  }
  toString() {
    const eventFilter = this.keyFilter ? `.${this.keyFilter}` : "";
    const eventTarget = this.eventTargetName ? `@${this.eventTargetName}` : "";
    return `${this.eventName}${eventFilter}${eventTarget}->${this.identifier}#${this.methodName}`;
  }
  shouldIgnoreKeyboardEvent(event2) {
    if (!this.keyFilter) {
      return false;
    }
    const filters = this.keyFilter.split("+");
    if (this.keyFilterDissatisfied(event2, filters)) {
      return true;
    }
    const standardFilter = filters.filter((key) => !allModifiers.includes(key))[0];
    if (!standardFilter) {
      return false;
    }
    if (!hasProperty(this.keyMappings, standardFilter)) {
      error2(`contains unknown key filter: ${this.keyFilter}`);
    }
    return this.keyMappings[standardFilter].toLowerCase() !== event2.key.toLowerCase();
  }
  shouldIgnoreMouseEvent(event2) {
    if (!this.keyFilter) {
      return false;
    }
    const filters = [this.keyFilter];
    if (this.keyFilterDissatisfied(event2, filters)) {
      return true;
    }
    return false;
  }
  get params() {
    const params = {};
    const pattern = new RegExp(`^data-${this.identifier}-(.+)-param$`, "i");
    for (const { name, value } of Array.from(this.element.attributes)) {
      const match = name.match(pattern);
      const key = match && match[1];
      if (key) {
        params[camelize2(key)] = typecast(value);
      }
    }
    return params;
  }
  get eventTargetName() {
    return stringifyEventTarget(this.eventTarget);
  }
  get keyMappings() {
    return this.schema.keyMappings;
  }
  keyFilterDissatisfied(event2, filters) {
    const [meta, ctrl, alt, shift] = allModifiers.map((modifier) => filters.includes(modifier));
    return event2.metaKey !== meta || event2.ctrlKey !== ctrl || event2.altKey !== alt || event2.shiftKey !== shift;
  }
};
var defaultEventNames = {
  a: () => "click",
  button: () => "click",
  form: () => "submit",
  details: () => "toggle",
  input: (e) => e.getAttribute("type") == "submit" ? "click" : "input",
  select: () => "change",
  textarea: () => "input"
};
function getDefaultEventNameForElement(element) {
  const tagName = element.tagName.toLowerCase();
  if (tagName in defaultEventNames) {
    return defaultEventNames[tagName](element);
  }
}
function error2(message) {
  throw new Error(message);
}
function typecast(value) {
  try {
    return JSON.parse(value);
  } catch (o_O) {
    return value;
  }
}
var Binding = class {
  constructor(context, action) {
    this.context = context;
    this.action = action;
  }
  get index() {
    return this.action.index;
  }
  get eventTarget() {
    return this.action.eventTarget;
  }
  get eventOptions() {
    return this.action.eventOptions;
  }
  get identifier() {
    return this.context.identifier;
  }
  handleEvent(event2) {
    const actionEvent = this.prepareActionEvent(event2);
    if (this.willBeInvokedByEvent(event2) && this.applyEventModifiers(actionEvent)) {
      this.invokeWithEvent(actionEvent);
    }
  }
  get eventName() {
    return this.action.eventName;
  }
  get method() {
    const method = this.controller[this.methodName];
    if (typeof method == "function") {
      return method;
    }
    throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`);
  }
  applyEventModifiers(event2) {
    const { element } = this.action;
    const { actionDescriptorFilters } = this.context.application;
    const { controller } = this.context;
    let passes = true;
    for (const [name, value] of Object.entries(this.eventOptions)) {
      if (name in actionDescriptorFilters) {
        const filter = actionDescriptorFilters[name];
        passes = passes && filter({ name, value, event: event2, element, controller });
      } else {
        continue;
      }
    }
    return passes;
  }
  prepareActionEvent(event2) {
    return Object.assign(event2, { params: this.action.params });
  }
  invokeWithEvent(event2) {
    const { target, currentTarget } = event2;
    try {
      this.method.call(this.controller, event2);
      this.context.logDebugActivity(this.methodName, { event: event2, target, currentTarget, action: this.methodName });
    } catch (error3) {
      const { identifier, controller, element, index } = this;
      const detail = { identifier, controller, element, index, event: event2 };
      this.context.handleError(error3, `invoking action "${this.action}"`, detail);
    }
  }
  willBeInvokedByEvent(event2) {
    const eventTarget = event2.target;
    if (event2 instanceof KeyboardEvent && this.action.shouldIgnoreKeyboardEvent(event2)) {
      return false;
    }
    if (event2 instanceof MouseEvent && this.action.shouldIgnoreMouseEvent(event2)) {
      return false;
    }
    if (this.element === eventTarget) {
      return true;
    } else if (eventTarget instanceof Element && this.element.contains(eventTarget)) {
      return this.scope.containsElement(eventTarget);
    } else {
      return this.scope.containsElement(this.action.element);
    }
  }
  get controller() {
    return this.context.controller;
  }
  get methodName() {
    return this.action.methodName;
  }
  get element() {
    return this.scope.element;
  }
  get scope() {
    return this.context.scope;
  }
};
var ElementObserver = class {
  constructor(element, delegate) {
    this.mutationObserverInit = { attributes: true, childList: true, subtree: true };
    this.element = element;
    this.started = false;
    this.delegate = delegate;
    this.elements = /* @__PURE__ */ new Set();
    this.mutationObserver = new MutationObserver((mutations) => this.processMutations(mutations));
  }
  start() {
    if (!this.started) {
      this.started = true;
      this.mutationObserver.observe(this.element, this.mutationObserverInit);
      this.refresh();
    }
  }
  pause(callback) {
    if (this.started) {
      this.mutationObserver.disconnect();
      this.started = false;
    }
    callback();
    if (!this.started) {
      this.mutationObserver.observe(this.element, this.mutationObserverInit);
      this.started = true;
    }
  }
  stop() {
    if (this.started) {
      this.mutationObserver.takeRecords();
      this.mutationObserver.disconnect();
      this.started = false;
    }
  }
  refresh() {
    if (this.started) {
      const matches = new Set(this.matchElementsInTree());
      for (const element of Array.from(this.elements)) {
        if (!matches.has(element)) {
          this.removeElement(element);
        }
      }
      for (const element of Array.from(matches)) {
        this.addElement(element);
      }
    }
  }
  processMutations(mutations) {
    if (this.started) {
      for (const mutation of mutations) {
        this.processMutation(mutation);
      }
    }
  }
  processMutation(mutation) {
    if (mutation.type == "attributes") {
      this.processAttributeChange(mutation.target, mutation.attributeName);
    } else if (mutation.type == "childList") {
      this.processRemovedNodes(mutation.removedNodes);
      this.processAddedNodes(mutation.addedNodes);
    }
  }
  processAttributeChange(element, attributeName) {
    if (this.elements.has(element)) {
      if (this.delegate.elementAttributeChanged && this.matchElement(element)) {
        this.delegate.elementAttributeChanged(element, attributeName);
      } else {
        this.removeElement(element);
      }
    } else if (this.matchElement(element)) {
      this.addElement(element);
    }
  }
  processRemovedNodes(nodes) {
    for (const node of Array.from(nodes)) {
      const element = this.elementFromNode(node);
      if (element) {
        this.processTree(element, this.removeElement);
      }
    }
  }
  processAddedNodes(nodes) {
    for (const node of Array.from(nodes)) {
      const element = this.elementFromNode(node);
      if (element && this.elementIsActive(element)) {
        this.processTree(element, this.addElement);
      }
    }
  }
  matchElement(element) {
    return this.delegate.matchElement(element);
  }
  matchElementsInTree(tree = this.element) {
    return this.delegate.matchElementsInTree(tree);
  }
  processTree(tree, processor) {
    for (const element of this.matchElementsInTree(tree)) {
      processor.call(this, element);
    }
  }
  elementFromNode(node) {
    if (node.nodeType == Node.ELEMENT_NODE) {
      return node;
    }
  }
  elementIsActive(element) {
    if (element.isConnected != this.element.isConnected) {
      return false;
    } else {
      return this.element.contains(element);
    }
  }
  addElement(element) {
    if (!this.elements.has(element)) {
      if (this.elementIsActive(element)) {
        this.elements.add(element);
        if (this.delegate.elementMatched) {
          this.delegate.elementMatched(element);
        }
      }
    }
  }
  removeElement(element) {
    if (this.elements.has(element)) {
      this.elements.delete(element);
      if (this.delegate.elementUnmatched) {
        this.delegate.elementUnmatched(element);
      }
    }
  }
};
var AttributeObserver = class {
  constructor(element, attributeName, delegate) {
    this.attributeName = attributeName;
    this.delegate = delegate;
    this.elementObserver = new ElementObserver(element, this);
  }
  get element() {
    return this.elementObserver.element;
  }
  get selector() {
    return `[${this.attributeName}]`;
  }
  start() {
    this.elementObserver.start();
  }
  pause(callback) {
    this.elementObserver.pause(callback);
  }
  stop() {
    this.elementObserver.stop();
  }
  refresh() {
    this.elementObserver.refresh();
  }
  get started() {
    return this.elementObserver.started;
  }
  matchElement(element) {
    return element.hasAttribute(this.attributeName);
  }
  matchElementsInTree(tree) {
    const match = this.matchElement(tree) ? [tree] : [];
    const matches = Array.from(tree.querySelectorAll(this.selector));
    return match.concat(matches);
  }
  elementMatched(element) {
    if (this.delegate.elementMatchedAttribute) {
      this.delegate.elementMatchedAttribute(element, this.attributeName);
    }
  }
  elementUnmatched(element) {
    if (this.delegate.elementUnmatchedAttribute) {
      this.delegate.elementUnmatchedAttribute(element, this.attributeName);
    }
  }
  elementAttributeChanged(element, attributeName) {
    if (this.delegate.elementAttributeValueChanged && this.attributeName == attributeName) {
      this.delegate.elementAttributeValueChanged(element, attributeName);
    }
  }
};
function add2(map, key, value) {
  fetch2(map, key).add(value);
}
function del(map, key, value) {
  fetch2(map, key).delete(value);
  prune(map, key);
}
function fetch2(map, key) {
  let values = map.get(key);
  if (!values) {
    values = /* @__PURE__ */ new Set();
    map.set(key, values);
  }
  return values;
}
function prune(map, key) {
  const values = map.get(key);
  if (values != null && values.size == 0) {
    map.delete(key);
  }
}
var Multimap = class {
  constructor() {
    this.valuesByKey = /* @__PURE__ */ new Map();
  }
  get keys() {
    return Array.from(this.valuesByKey.keys());
  }
  get values() {
    const sets = Array.from(this.valuesByKey.values());
    return sets.reduce((values, set3) => values.concat(Array.from(set3)), []);
  }
  get size() {
    const sets = Array.from(this.valuesByKey.values());
    return sets.reduce((size2, set3) => size2 + set3.size, 0);
  }
  add(key, value) {
    add2(this.valuesByKey, key, value);
  }
  delete(key, value) {
    del(this.valuesByKey, key, value);
  }
  has(key, value) {
    const values = this.valuesByKey.get(key);
    return values != null && values.has(value);
  }
  hasKey(key) {
    return this.valuesByKey.has(key);
  }
  hasValue(value) {
    const sets = Array.from(this.valuesByKey.values());
    return sets.some((set3) => set3.has(value));
  }
  getValuesForKey(key) {
    const values = this.valuesByKey.get(key);
    return values ? Array.from(values) : [];
  }
  getKeysForValue(value) {
    return Array.from(this.valuesByKey).filter(([_key, values]) => values.has(value)).map(([key, _values]) => key);
  }
};
var SelectorObserver = class {
  constructor(element, selector, delegate, details) {
    this._selector = selector;
    this.details = details;
    this.elementObserver = new ElementObserver(element, this);
    this.delegate = delegate;
    this.matchesByElement = new Multimap();
  }
  get started() {
    return this.elementObserver.started;
  }
  get selector() {
    return this._selector;
  }
  set selector(selector) {
    this._selector = selector;
    this.refresh();
  }
  start() {
    this.elementObserver.start();
  }
  pause(callback) {
    this.elementObserver.pause(callback);
  }
  stop() {
    this.elementObserver.stop();
  }
  refresh() {
    this.elementObserver.refresh();
  }
  get element() {
    return this.elementObserver.element;
  }
  matchElement(element) {
    const { selector } = this;
    if (selector) {
      const matches = element.matches(selector);
      if (this.delegate.selectorMatchElement) {
        return matches && this.delegate.selectorMatchElement(element, this.details);
      }
      return matches;
    } else {
      return false;
    }
  }
  matchElementsInTree(tree) {
    const { selector } = this;
    if (selector) {
      const match = this.matchElement(tree) ? [tree] : [];
      const matches = Array.from(tree.querySelectorAll(selector)).filter((match2) => this.matchElement(match2));
      return match.concat(matches);
    } else {
      return [];
    }
  }
  elementMatched(element) {
    const { selector } = this;
    if (selector) {
      this.selectorMatched(element, selector);
    }
  }
  elementUnmatched(element) {
    const selectors = this.matchesByElement.getKeysForValue(element);
    for (const selector of selectors) {
      this.selectorUnmatched(element, selector);
    }
  }
  elementAttributeChanged(element, _attributeName) {
    const { selector } = this;
    if (selector) {
      const matches = this.matchElement(element);
      const matchedBefore = this.matchesByElement.has(selector, element);
      if (matches && !matchedBefore) {
        this.selectorMatched(element, selector);
      } else if (!matches && matchedBefore) {
        this.selectorUnmatched(element, selector);
      }
    }
  }
  selectorMatched(element, selector) {
    this.delegate.selectorMatched(element, selector, this.details);
    this.matchesByElement.add(selector, element);
  }
  selectorUnmatched(element, selector) {
    this.delegate.selectorUnmatched(element, selector, this.details);
    this.matchesByElement.delete(selector, element);
  }
};
var StringMapObserver = class {
  constructor(element, delegate) {
    this.element = element;
    this.delegate = delegate;
    this.started = false;
    this.stringMap = /* @__PURE__ */ new Map();
    this.mutationObserver = new MutationObserver((mutations) => this.processMutations(mutations));
  }
  start() {
    if (!this.started) {
      this.started = true;
      this.mutationObserver.observe(this.element, { attributes: true, attributeOldValue: true });
      this.refresh();
    }
  }
  stop() {
    if (this.started) {
      this.mutationObserver.takeRecords();
      this.mutationObserver.disconnect();
      this.started = false;
    }
  }
  refresh() {
    if (this.started) {
      for (const attributeName of this.knownAttributeNames) {
        this.refreshAttribute(attributeName, null);
      }
    }
  }
  processMutations(mutations) {
    if (this.started) {
      for (const mutation of mutations) {
        this.processMutation(mutation);
      }
    }
  }
  processMutation(mutation) {
    const attributeName = mutation.attributeName;
    if (attributeName) {
      this.refreshAttribute(attributeName, mutation.oldValue);
    }
  }
  refreshAttribute(attributeName, oldValue) {
    const key = this.delegate.getStringMapKeyForAttribute(attributeName);
    if (key != null) {
      if (!this.stringMap.has(attributeName)) {
        this.stringMapKeyAdded(key, attributeName);
      }
      const value = this.element.getAttribute(attributeName);
      if (this.stringMap.get(attributeName) != value) {
        this.stringMapValueChanged(value, key, oldValue);
      }
      if (value == null) {
        const oldValue2 = this.stringMap.get(attributeName);
        this.stringMap.delete(attributeName);
        if (oldValue2)
          this.stringMapKeyRemoved(key, attributeName, oldValue2);
      } else {
        this.stringMap.set(attributeName, value);
      }
    }
  }
  stringMapKeyAdded(key, attributeName) {
    if (this.delegate.stringMapKeyAdded) {
      this.delegate.stringMapKeyAdded(key, attributeName);
    }
  }
  stringMapValueChanged(value, key, oldValue) {
    if (this.delegate.stringMapValueChanged) {
      this.delegate.stringMapValueChanged(value, key, oldValue);
    }
  }
  stringMapKeyRemoved(key, attributeName, oldValue) {
    if (this.delegate.stringMapKeyRemoved) {
      this.delegate.stringMapKeyRemoved(key, attributeName, oldValue);
    }
  }
  get knownAttributeNames() {
    return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)));
  }
  get currentAttributeNames() {
    return Array.from(this.element.attributes).map((attribute) => attribute.name);
  }
  get recordedAttributeNames() {
    return Array.from(this.stringMap.keys());
  }
};
var TokenListObserver = class {
  constructor(element, attributeName, delegate) {
    this.attributeObserver = new AttributeObserver(element, attributeName, this);
    this.delegate = delegate;
    this.tokensByElement = new Multimap();
  }
  get started() {
    return this.attributeObserver.started;
  }
  start() {
    this.attributeObserver.start();
  }
  pause(callback) {
    this.attributeObserver.pause(callback);
  }
  stop() {
    this.attributeObserver.stop();
  }
  refresh() {
    this.attributeObserver.refresh();
  }
  get element() {
    return this.attributeObserver.element;
  }
  get attributeName() {
    return this.attributeObserver.attributeName;
  }
  elementMatchedAttribute(element) {
    this.tokensMatched(this.readTokensForElement(element));
  }
  elementAttributeValueChanged(element) {
    const [unmatchedTokens, matchedTokens] = this.refreshTokensForElement(element);
    this.tokensUnmatched(unmatchedTokens);
    this.tokensMatched(matchedTokens);
  }
  elementUnmatchedAttribute(element) {
    this.tokensUnmatched(this.tokensByElement.getValuesForKey(element));
  }
  tokensMatched(tokens) {
    tokens.forEach((token) => this.tokenMatched(token));
  }
  tokensUnmatched(tokens) {
    tokens.forEach((token) => this.tokenUnmatched(token));
  }
  tokenMatched(token) {
    this.delegate.tokenMatched(token);
    this.tokensByElement.add(token.element, token);
  }
  tokenUnmatched(token) {
    this.delegate.tokenUnmatched(token);
    this.tokensByElement.delete(token.element, token);
  }
  refreshTokensForElement(element) {
    const previousTokens = this.tokensByElement.getValuesForKey(element);
    const currentTokens = this.readTokensForElement(element);
    const firstDifferingIndex = zip(previousTokens, currentTokens).findIndex(([previousToken, currentToken]) => !tokensAreEqual(previousToken, currentToken));
    if (firstDifferingIndex == -1) {
      return [[], []];
    } else {
      return [previousTokens.slice(firstDifferingIndex), currentTokens.slice(firstDifferingIndex)];
    }
  }
  readTokensForElement(element) {
    const attributeName = this.attributeName;
    const tokenString = element.getAttribute(attributeName) || "";
    return parseTokenString(tokenString, element, attributeName);
  }
};
function parseTokenString(tokenString, element, attributeName) {
  return tokenString.trim().split(/\s+/).filter((content) => content.length).map((content, index) => ({ element, attributeName, content, index }));
}
function zip(left, right) {
  const length = Math.max(left.length, right.length);
  return Array.from({ length }, (_, index) => [left[index], right[index]]);
}
function tokensAreEqual(left, right) {
  return left && right && left.index == right.index && left.content == right.content;
}
var ValueListObserver = class {
  constructor(element, attributeName, delegate) {
    this.tokenListObserver = new TokenListObserver(element, attributeName, this);
    this.delegate = delegate;
    this.parseResultsByToken = /* @__PURE__ */ new WeakMap();
    this.valuesByTokenByElement = /* @__PURE__ */ new WeakMap();
  }
  get started() {
    return this.tokenListObserver.started;
  }
  start() {
    this.tokenListObserver.start();
  }
  stop() {
    this.tokenListObserver.stop();
  }
  refresh() {
    this.tokenListObserver.refresh();
  }
  get element() {
    return this.tokenListObserver.element;
  }
  get attributeName() {
    return this.tokenListObserver.attributeName;
  }
  tokenMatched(token) {
    const { element } = token;
    const { value } = this.fetchParseResultForToken(token);
    if (value) {
      this.fetchValuesByTokenForElement(element).set(token, value);
      this.delegate.elementMatchedValue(element, value);
    }
  }
  tokenUnmatched(token) {
    const { element } = token;
    const { value } = this.fetchParseResultForToken(token);
    if (value) {
      this.fetchValuesByTokenForElement(element).delete(token);
      this.delegate.elementUnmatchedValue(element, value);
    }
  }
  fetchParseResultForToken(token) {
    let parseResult = this.parseResultsByToken.get(token);
    if (!parseResult) {
      parseResult = this.parseToken(token);
      this.parseResultsByToken.set(token, parseResult);
    }
    return parseResult;
  }
  fetchValuesByTokenForElement(element) {
    let valuesByToken = this.valuesByTokenByElement.get(element);
    if (!valuesByToken) {
      valuesByToken = /* @__PURE__ */ new Map();
      this.valuesByTokenByElement.set(element, valuesByToken);
    }
    return valuesByToken;
  }
  parseToken(token) {
    try {
      const value = this.delegate.parseValueForToken(token);
      return { value };
    } catch (error3) {
      return { error: error3 };
    }
  }
};
var BindingObserver = class {
  constructor(context, delegate) {
    this.context = context;
    this.delegate = delegate;
    this.bindingsByAction = /* @__PURE__ */ new Map();
  }
  start() {
    if (!this.valueListObserver) {
      this.valueListObserver = new ValueListObserver(this.element, this.actionAttribute, this);
      this.valueListObserver.start();
    }
  }
  stop() {
    if (this.valueListObserver) {
      this.valueListObserver.stop();
      delete this.valueListObserver;
      this.disconnectAllActions();
    }
  }
  get element() {
    return this.context.element;
  }
  get identifier() {
    return this.context.identifier;
  }
  get actionAttribute() {
    return this.schema.actionAttribute;
  }
  get schema() {
    return this.context.schema;
  }
  get bindings() {
    return Array.from(this.bindingsByAction.values());
  }
  connectAction(action) {
    const binding = new Binding(this.context, action);
    this.bindingsByAction.set(action, binding);
    this.delegate.bindingConnected(binding);
  }
  disconnectAction(action) {
    const binding = this.bindingsByAction.get(action);
    if (binding) {
      this.bindingsByAction.delete(action);
      this.delegate.bindingDisconnected(binding);
    }
  }
  disconnectAllActions() {
    this.bindings.forEach((binding) => this.delegate.bindingDisconnected(binding, true));
    this.bindingsByAction.clear();
  }
  parseValueForToken(token) {
    const action = Action.forToken(token, this.schema);
    if (action.identifier == this.identifier) {
      return action;
    }
  }
  elementMatchedValue(element, action) {
    this.connectAction(action);
  }
  elementUnmatchedValue(element, action) {
    this.disconnectAction(action);
  }
};
var ValueObserver = class {
  constructor(context, receiver) {
    this.context = context;
    this.receiver = receiver;
    this.stringMapObserver = new StringMapObserver(this.element, this);
    this.valueDescriptorMap = this.controller.valueDescriptorMap;
  }
  start() {
    this.stringMapObserver.start();
    this.invokeChangedCallbacksForDefaultValues();
  }
  stop() {
    this.stringMapObserver.stop();
  }
  get element() {
    return this.context.element;
  }
  get controller() {
    return this.context.controller;
  }
  getStringMapKeyForAttribute(attributeName) {
    if (attributeName in this.valueDescriptorMap) {
      return this.valueDescriptorMap[attributeName].name;
    }
  }
  stringMapKeyAdded(key, attributeName) {
    const descriptor = this.valueDescriptorMap[attributeName];
    if (!this.hasValue(key)) {
      this.invokeChangedCallback(key, descriptor.writer(this.receiver[key]), descriptor.writer(descriptor.defaultValue));
    }
  }
  stringMapValueChanged(value, name, oldValue) {
    const descriptor = this.valueDescriptorNameMap[name];
    if (value === null)
      return;
    if (oldValue === null) {
      oldValue = descriptor.writer(descriptor.defaultValue);
    }
    this.invokeChangedCallback(name, value, oldValue);
  }
  stringMapKeyRemoved(key, attributeName, oldValue) {
    const descriptor = this.valueDescriptorNameMap[key];
    if (this.hasValue(key)) {
      this.invokeChangedCallback(key, descriptor.writer(this.receiver[key]), oldValue);
    } else {
      this.invokeChangedCallback(key, descriptor.writer(descriptor.defaultValue), oldValue);
    }
  }
  invokeChangedCallbacksForDefaultValues() {
    for (const { key, name, defaultValue, writer } of this.valueDescriptors) {
      if (defaultValue != void 0 && !this.controller.data.has(key)) {
        this.invokeChangedCallback(name, writer(defaultValue), void 0);
      }
    }
  }
  invokeChangedCallback(name, rawValue, rawOldValue) {
    const changedMethodName = `${name}Changed`;
    const changedMethod = this.receiver[changedMethodName];
    if (typeof changedMethod == "function") {
      const descriptor = this.valueDescriptorNameMap[name];
      try {
        const value = descriptor.reader(rawValue);
        let oldValue = rawOldValue;
        if (rawOldValue) {
          oldValue = descriptor.reader(rawOldValue);
        }
        changedMethod.call(this.receiver, value, oldValue);
      } catch (error3) {
        if (error3 instanceof TypeError) {
          error3.message = `Stimulus Value "${this.context.identifier}.${descriptor.name}" - ${error3.message}`;
        }
        throw error3;
      }
    }
  }
  get valueDescriptors() {
    const { valueDescriptorMap } = this;
    return Object.keys(valueDescriptorMap).map((key) => valueDescriptorMap[key]);
  }
  get valueDescriptorNameMap() {
    const descriptors = {};
    Object.keys(this.valueDescriptorMap).forEach((key) => {
      const descriptor = this.valueDescriptorMap[key];
      descriptors[descriptor.name] = descriptor;
    });
    return descriptors;
  }
  hasValue(attributeName) {
    const descriptor = this.valueDescriptorNameMap[attributeName];
    const hasMethodName = `has${capitalize2(descriptor.name)}`;
    return this.receiver[hasMethodName];
  }
};
var TargetObserver = class {
  constructor(context, delegate) {
    this.context = context;
    this.delegate = delegate;
    this.targetsByName = new Multimap();
  }
  start() {
    if (!this.tokenListObserver) {
      this.tokenListObserver = new TokenListObserver(this.element, this.attributeName, this);
      this.tokenListObserver.start();
    }
  }
  stop() {
    if (this.tokenListObserver) {
      this.disconnectAllTargets();
      this.tokenListObserver.stop();
      delete this.tokenListObserver;
    }
  }
  tokenMatched({ element, content: name }) {
    if (this.scope.containsElement(element)) {
      this.connectTarget(element, name);
    }
  }
  tokenUnmatched({ element, content: name }) {
    this.disconnectTarget(element, name);
  }
  connectTarget(element, name) {
    var _a;
    if (!this.targetsByName.has(name, element)) {
      this.targetsByName.add(name, element);
      (_a = this.tokenListObserver) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.targetConnected(element, name));
    }
  }
  disconnectTarget(element, name) {
    var _a;
    if (this.targetsByName.has(name, element)) {
      this.targetsByName.delete(name, element);
      (_a = this.tokenListObserver) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.targetDisconnected(element, name));
    }
  }
  disconnectAllTargets() {
    for (const name of this.targetsByName.keys) {
      for (const element of this.targetsByName.getValuesForKey(name)) {
        this.disconnectTarget(element, name);
      }
    }
  }
  get attributeName() {
    return `data-${this.context.identifier}-target`;
  }
  get element() {
    return this.context.element;
  }
  get scope() {
    return this.context.scope;
  }
};
function readInheritableStaticArrayValues(constructor, propertyName) {
  const ancestors = getAncestorsForConstructor(constructor);
  return Array.from(ancestors.reduce((values, constructor2) => {
    getOwnStaticArrayValues(constructor2, propertyName).forEach((name) => values.add(name));
    return values;
  }, /* @__PURE__ */ new Set()));
}
function readInheritableStaticObjectPairs(constructor, propertyName) {
  const ancestors = getAncestorsForConstructor(constructor);
  return ancestors.reduce((pairs, constructor2) => {
    pairs.push(...getOwnStaticObjectPairs(constructor2, propertyName));
    return pairs;
  }, []);
}
function getAncestorsForConstructor(constructor) {
  const ancestors = [];
  while (constructor) {
    ancestors.push(constructor);
    constructor = Object.getPrototypeOf(constructor);
  }
  return ancestors.reverse();
}
function getOwnStaticArrayValues(constructor, propertyName) {
  const definition = constructor[propertyName];
  return Array.isArray(definition) ? definition : [];
}
function getOwnStaticObjectPairs(constructor, propertyName) {
  const definition = constructor[propertyName];
  return definition ? Object.keys(definition).map((key) => [key, definition[key]]) : [];
}
var OutletObserver = class {
  constructor(context, delegate) {
    this.started = false;
    this.context = context;
    this.delegate = delegate;
    this.outletsByName = new Multimap();
    this.outletElementsByName = new Multimap();
    this.selectorObserverMap = /* @__PURE__ */ new Map();
    this.attributeObserverMap = /* @__PURE__ */ new Map();
  }
  start() {
    if (!this.started) {
      this.outletDefinitions.forEach((outletName) => {
        this.setupSelectorObserverForOutlet(outletName);
        this.setupAttributeObserverForOutlet(outletName);
      });
      this.started = true;
      this.dependentContexts.forEach((context) => context.refresh());
    }
  }
  refresh() {
    this.selectorObserverMap.forEach((observer2) => observer2.refresh());
    this.attributeObserverMap.forEach((observer2) => observer2.refresh());
  }
  stop() {
    if (this.started) {
      this.started = false;
      this.disconnectAllOutlets();
      this.stopSelectorObservers();
      this.stopAttributeObservers();
    }
  }
  stopSelectorObservers() {
    if (this.selectorObserverMap.size > 0) {
      this.selectorObserverMap.forEach((observer2) => observer2.stop());
      this.selectorObserverMap.clear();
    }
  }
  stopAttributeObservers() {
    if (this.attributeObserverMap.size > 0) {
      this.attributeObserverMap.forEach((observer2) => observer2.stop());
      this.attributeObserverMap.clear();
    }
  }
  selectorMatched(element, _selector, { outletName }) {
    const outlet = this.getOutlet(element, outletName);
    if (outlet) {
      this.connectOutlet(outlet, element, outletName);
    }
  }
  selectorUnmatched(element, _selector, { outletName }) {
    const outlet = this.getOutletFromMap(element, outletName);
    if (outlet) {
      this.disconnectOutlet(outlet, element, outletName);
    }
  }
  selectorMatchElement(element, { outletName }) {
    const selector = this.selector(outletName);
    const hasOutlet = this.hasOutlet(element, outletName);
    const hasOutletController = element.matches(`[${this.schema.controllerAttribute}~=${outletName}]`);
    if (selector) {
      return hasOutlet && hasOutletController && element.matches(selector);
    } else {
      return false;
    }
  }
  elementMatchedAttribute(_element, attributeName) {
    const outletName = this.getOutletNameFromOutletAttributeName(attributeName);
    if (outletName) {
      this.updateSelectorObserverForOutlet(outletName);
    }
  }
  elementAttributeValueChanged(_element, attributeName) {
    const outletName = this.getOutletNameFromOutletAttributeName(attributeName);
    if (outletName) {
      this.updateSelectorObserverForOutlet(outletName);
    }
  }
  elementUnmatchedAttribute(_element, attributeName) {
    const outletName = this.getOutletNameFromOutletAttributeName(attributeName);
    if (outletName) {
      this.updateSelectorObserverForOutlet(outletName);
    }
  }
  connectOutlet(outlet, element, outletName) {
    var _a;
    if (!this.outletElementsByName.has(outletName, element)) {
      this.outletsByName.add(outletName, outlet);
      this.outletElementsByName.add(outletName, element);
      (_a = this.selectorObserverMap.get(outletName)) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.outletConnected(outlet, element, outletName));
    }
  }
  disconnectOutlet(outlet, element, outletName) {
    var _a;
    if (this.outletElementsByName.has(outletName, element)) {
      this.outletsByName.delete(outletName, outlet);
      this.outletElementsByName.delete(outletName, element);
      (_a = this.selectorObserverMap.get(outletName)) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.outletDisconnected(outlet, element, outletName));
    }
  }
  disconnectAllOutlets() {
    for (const outletName of this.outletElementsByName.keys) {
      for (const element of this.outletElementsByName.getValuesForKey(outletName)) {
        for (const outlet of this.outletsByName.getValuesForKey(outletName)) {
          this.disconnectOutlet(outlet, element, outletName);
        }
      }
    }
  }
  updateSelectorObserverForOutlet(outletName) {
    const observer2 = this.selectorObserverMap.get(outletName);
    if (observer2) {
      observer2.selector = this.selector(outletName);
    }
  }
  setupSelectorObserverForOutlet(outletName) {
    const selector = this.selector(outletName);
    const selectorObserver = new SelectorObserver(document.body, selector, this, { outletName });
    this.selectorObserverMap.set(outletName, selectorObserver);
    selectorObserver.start();
  }
  setupAttributeObserverForOutlet(outletName) {
    const attributeName = this.attributeNameForOutletName(outletName);
    const attributeObserver = new AttributeObserver(this.scope.element, attributeName, this);
    this.attributeObserverMap.set(outletName, attributeObserver);
    attributeObserver.start();
  }
  selector(outletName) {
    return this.scope.outlets.getSelectorForOutletName(outletName);
  }
  attributeNameForOutletName(outletName) {
    return this.scope.schema.outletAttributeForScope(this.identifier, outletName);
  }
  getOutletNameFromOutletAttributeName(attributeName) {
    return this.outletDefinitions.find((outletName) => this.attributeNameForOutletName(outletName) === attributeName);
  }
  get outletDependencies() {
    const dependencies = new Multimap();
    this.router.modules.forEach((module) => {
      const constructor = module.definition.controllerConstructor;
      const outlets = readInheritableStaticArrayValues(constructor, "outlets");
      outlets.forEach((outlet) => dependencies.add(outlet, module.identifier));
    });
    return dependencies;
  }
  get outletDefinitions() {
    return this.outletDependencies.getKeysForValue(this.identifier);
  }
  get dependentControllerIdentifiers() {
    return this.outletDependencies.getValuesForKey(this.identifier);
  }
  get dependentContexts() {
    const identifiers = this.dependentControllerIdentifiers;
    return this.router.contexts.filter((context) => identifiers.includes(context.identifier));
  }
  hasOutlet(element, outletName) {
    return !!this.getOutlet(element, outletName) || !!this.getOutletFromMap(element, outletName);
  }
  getOutlet(element, outletName) {
    return this.application.getControllerForElementAndIdentifier(element, outletName);
  }
  getOutletFromMap(element, outletName) {
    return this.outletsByName.getValuesForKey(outletName).find((outlet) => outlet.element === element);
  }
  get scope() {
    return this.context.scope;
  }
  get schema() {
    return this.context.schema;
  }
  get identifier() {
    return this.context.identifier;
  }
  get application() {
    return this.context.application;
  }
  get router() {
    return this.application.router;
  }
};
var Context = class {
  constructor(module, scope2) {
    this.logDebugActivity = (functionName, detail = {}) => {
      const { identifier, controller, element } = this;
      detail = Object.assign({ identifier, controller, element }, detail);
      this.application.logDebugActivity(this.identifier, functionName, detail);
    };
    this.module = module;
    this.scope = scope2;
    this.controller = new module.controllerConstructor(this);
    this.bindingObserver = new BindingObserver(this, this.dispatcher);
    this.valueObserver = new ValueObserver(this, this.controller);
    this.targetObserver = new TargetObserver(this, this);
    this.outletObserver = new OutletObserver(this, this);
    try {
      this.controller.initialize();
      this.logDebugActivity("initialize");
    } catch (error3) {
      this.handleError(error3, "initializing controller");
    }
  }
  connect() {
    this.bindingObserver.start();
    this.valueObserver.start();
    this.targetObserver.start();
    this.outletObserver.start();
    try {
      this.controller.connect();
      this.logDebugActivity("connect");
    } catch (error3) {
      this.handleError(error3, "connecting controller");
    }
  }
  refresh() {
    this.outletObserver.refresh();
  }
  disconnect() {
    try {
      this.controller.disconnect();
      this.logDebugActivity("disconnect");
    } catch (error3) {
      this.handleError(error3, "disconnecting controller");
    }
    this.outletObserver.stop();
    this.targetObserver.stop();
    this.valueObserver.stop();
    this.bindingObserver.stop();
  }
  get application() {
    return this.module.application;
  }
  get identifier() {
    return this.module.identifier;
  }
  get schema() {
    return this.application.schema;
  }
  get dispatcher() {
    return this.application.dispatcher;
  }
  get element() {
    return this.scope.element;
  }
  get parentElement() {
    return this.element.parentElement;
  }
  handleError(error3, message, detail = {}) {
    const { identifier, controller, element } = this;
    detail = Object.assign({ identifier, controller, element }, detail);
    this.application.handleError(error3, `Error ${message}`, detail);
  }
  targetConnected(element, name) {
    this.invokeControllerMethod(`${name}TargetConnected`, element);
  }
  targetDisconnected(element, name) {
    this.invokeControllerMethod(`${name}TargetDisconnected`, element);
  }
  outletConnected(outlet, element, name) {
    this.invokeControllerMethod(`${namespaceCamelize(name)}OutletConnected`, outlet, element);
  }
  outletDisconnected(outlet, element, name) {
    this.invokeControllerMethod(`${namespaceCamelize(name)}OutletDisconnected`, outlet, element);
  }
  invokeControllerMethod(methodName, ...args) {
    const controller = this.controller;
    if (typeof controller[methodName] == "function") {
      controller[methodName](...args);
    }
  }
};
function bless(constructor) {
  return shadow(constructor, getBlessedProperties(constructor));
}
function shadow(constructor, properties) {
  const shadowConstructor = extend3(constructor);
  const shadowProperties = getShadowProperties(constructor.prototype, properties);
  Object.defineProperties(shadowConstructor.prototype, shadowProperties);
  return shadowConstructor;
}
function getBlessedProperties(constructor) {
  const blessings = readInheritableStaticArrayValues(constructor, "blessings");
  return blessings.reduce((blessedProperties, blessing) => {
    const properties = blessing(constructor);
    for (const key in properties) {
      const descriptor = blessedProperties[key] || {};
      blessedProperties[key] = Object.assign(descriptor, properties[key]);
    }
    return blessedProperties;
  }, {});
}
function getShadowProperties(prototype, properties) {
  return getOwnKeys(properties).reduce((shadowProperties, key) => {
    const descriptor = getShadowedDescriptor(prototype, properties, key);
    if (descriptor) {
      Object.assign(shadowProperties, { [key]: descriptor });
    }
    return shadowProperties;
  }, {});
}
function getShadowedDescriptor(prototype, properties, key) {
  const shadowingDescriptor = Object.getOwnPropertyDescriptor(prototype, key);
  const shadowedByValue = shadowingDescriptor && "value" in shadowingDescriptor;
  if (!shadowedByValue) {
    const descriptor = Object.getOwnPropertyDescriptor(properties, key).value;
    if (shadowingDescriptor) {
      descriptor.get = shadowingDescriptor.get || descriptor.get;
      descriptor.set = shadowingDescriptor.set || descriptor.set;
    }
    return descriptor;
  }
}
var getOwnKeys = (() => {
  if (typeof Object.getOwnPropertySymbols == "function") {
    return (object) => [...Object.getOwnPropertyNames(object), ...Object.getOwnPropertySymbols(object)];
  } else {
    return Object.getOwnPropertyNames;
  }
})();
var extend3 = (() => {
  function extendWithReflect(constructor) {
    function extended() {
      return Reflect.construct(constructor, arguments, new.target);
    }
    extended.prototype = Object.create(constructor.prototype, {
      constructor: { value: extended }
    });
    Reflect.setPrototypeOf(extended, constructor);
    return extended;
  }
  function testReflectExtension() {
    const a = function() {
      this.a.call(this);
    };
    const b = extendWithReflect(a);
    b.prototype.a = function() {
    };
    return new b();
  }
  try {
    testReflectExtension();
    return extendWithReflect;
  } catch (error3) {
    return (constructor) => class extended extends constructor {
    };
  }
})();
function blessDefinition(definition) {
  return {
    identifier: definition.identifier,
    controllerConstructor: bless(definition.controllerConstructor)
  };
}
var Module = class {
  constructor(application2, definition) {
    this.application = application2;
    this.definition = blessDefinition(definition);
    this.contextsByScope = /* @__PURE__ */ new WeakMap();
    this.connectedContexts = /* @__PURE__ */ new Set();
  }
  get identifier() {
    return this.definition.identifier;
  }
  get controllerConstructor() {
    return this.definition.controllerConstructor;
  }
  get contexts() {
    return Array.from(this.connectedContexts);
  }
  connectContextForScope(scope2) {
    const context = this.fetchContextForScope(scope2);
    this.connectedContexts.add(context);
    context.connect();
  }
  disconnectContextForScope(scope2) {
    const context = this.contextsByScope.get(scope2);
    if (context) {
      this.connectedContexts.delete(context);
      context.disconnect();
    }
  }
  fetchContextForScope(scope2) {
    let context = this.contextsByScope.get(scope2);
    if (!context) {
      context = new Context(this, scope2);
      this.contextsByScope.set(scope2, context);
    }
    return context;
  }
};
var ClassMap = class {
  constructor(scope2) {
    this.scope = scope2;
  }
  has(name) {
    return this.data.has(this.getDataKey(name));
  }
  get(name) {
    return this.getAll(name)[0];
  }
  getAll(name) {
    const tokenString = this.data.get(this.getDataKey(name)) || "";
    return tokenize(tokenString);
  }
  getAttributeName(name) {
    return this.data.getAttributeNameForKey(this.getDataKey(name));
  }
  getDataKey(name) {
    return `${name}-class`;
  }
  get data() {
    return this.scope.data;
  }
};
var DataMap = class {
  constructor(scope2) {
    this.scope = scope2;
  }
  get element() {
    return this.scope.element;
  }
  get identifier() {
    return this.scope.identifier;
  }
  get(key) {
    const name = this.getAttributeNameForKey(key);
    return this.element.getAttribute(name);
  }
  set(key, value) {
    const name = this.getAttributeNameForKey(key);
    this.element.setAttribute(name, value);
    return this.get(key);
  }
  has(key) {
    const name = this.getAttributeNameForKey(key);
    return this.element.hasAttribute(name);
  }
  delete(key) {
    if (this.has(key)) {
      const name = this.getAttributeNameForKey(key);
      this.element.removeAttribute(name);
      return true;
    } else {
      return false;
    }
  }
  getAttributeNameForKey(key) {
    return `data-${this.identifier}-${dasherize(key)}`;
  }
};
var Guide = class {
  constructor(logger2) {
    this.warnedKeysByObject = /* @__PURE__ */ new WeakMap();
    this.logger = logger2;
  }
  warn(object, key, message) {
    let warnedKeys = this.warnedKeysByObject.get(object);
    if (!warnedKeys) {
      warnedKeys = /* @__PURE__ */ new Set();
      this.warnedKeysByObject.set(object, warnedKeys);
    }
    if (!warnedKeys.has(key)) {
      warnedKeys.add(key);
      this.logger.warn(message, object);
    }
  }
};
function attributeValueContainsToken(attributeName, token) {
  return `[${attributeName}~="${token}"]`;
}
var TargetSet = class {
  constructor(scope2) {
    this.scope = scope2;
  }
  get element() {
    return this.scope.element;
  }
  get identifier() {
    return this.scope.identifier;
  }
  get schema() {
    return this.scope.schema;
  }
  has(targetName) {
    return this.find(targetName) != null;
  }
  find(...targetNames) {
    return targetNames.reduce((target, targetName) => target || this.findTarget(targetName) || this.findLegacyTarget(targetName), void 0);
  }
  findAll(...targetNames) {
    return targetNames.reduce((targets, targetName) => [
      ...targets,
      ...this.findAllTargets(targetName),
      ...this.findAllLegacyTargets(targetName)
    ], []);
  }
  findTarget(targetName) {
    const selector = this.getSelectorForTargetName(targetName);
    return this.scope.findElement(selector);
  }
  findAllTargets(targetName) {
    const selector = this.getSelectorForTargetName(targetName);
    return this.scope.findAllElements(selector);
  }
  getSelectorForTargetName(targetName) {
    const attributeName = this.schema.targetAttributeForScope(this.identifier);
    return attributeValueContainsToken(attributeName, targetName);
  }
  findLegacyTarget(targetName) {
    const selector = this.getLegacySelectorForTargetName(targetName);
    return this.deprecate(this.scope.findElement(selector), targetName);
  }
  findAllLegacyTargets(targetName) {
    const selector = this.getLegacySelectorForTargetName(targetName);
    return this.scope.findAllElements(selector).map((element) => this.deprecate(element, targetName));
  }
  getLegacySelectorForTargetName(targetName) {
    const targetDescriptor = `${this.identifier}.${targetName}`;
    return attributeValueContainsToken(this.schema.targetAttribute, targetDescriptor);
  }
  deprecate(element, targetName) {
    if (element) {
      const { identifier } = this;
      const attributeName = this.schema.targetAttribute;
      const revisedAttributeName = this.schema.targetAttributeForScope(identifier);
      this.guide.warn(element, `target:${targetName}`, `Please replace ${attributeName}="${identifier}.${targetName}" with ${revisedAttributeName}="${targetName}". The ${attributeName} attribute is deprecated and will be removed in a future version of Stimulus.`);
    }
    return element;
  }
  get guide() {
    return this.scope.guide;
  }
};
var OutletSet = class {
  constructor(scope2, controllerElement) {
    this.scope = scope2;
    this.controllerElement = controllerElement;
  }
  get element() {
    return this.scope.element;
  }
  get identifier() {
    return this.scope.identifier;
  }
  get schema() {
    return this.scope.schema;
  }
  has(outletName) {
    return this.find(outletName) != null;
  }
  find(...outletNames) {
    return outletNames.reduce((outlet, outletName) => outlet || this.findOutlet(outletName), void 0);
  }
  findAll(...outletNames) {
    return outletNames.reduce((outlets, outletName) => [...outlets, ...this.findAllOutlets(outletName)], []);
  }
  getSelectorForOutletName(outletName) {
    const attributeName = this.schema.outletAttributeForScope(this.identifier, outletName);
    return this.controllerElement.getAttribute(attributeName);
  }
  findOutlet(outletName) {
    const selector = this.getSelectorForOutletName(outletName);
    if (selector)
      return this.findElement(selector, outletName);
  }
  findAllOutlets(outletName) {
    const selector = this.getSelectorForOutletName(outletName);
    return selector ? this.findAllElements(selector, outletName) : [];
  }
  findElement(selector, outletName) {
    const elements = this.scope.queryElements(selector);
    return elements.filter((element) => this.matchesElement(element, selector, outletName))[0];
  }
  findAllElements(selector, outletName) {
    const elements = this.scope.queryElements(selector);
    return elements.filter((element) => this.matchesElement(element, selector, outletName));
  }
  matchesElement(element, selector, outletName) {
    const controllerAttribute = element.getAttribute(this.scope.schema.controllerAttribute) || "";
    return element.matches(selector) && controllerAttribute.split(" ").includes(outletName);
  }
};
var Scope = class _Scope {
  constructor(schema, element, identifier, logger2) {
    this.targets = new TargetSet(this);
    this.classes = new ClassMap(this);
    this.data = new DataMap(this);
    this.containsElement = (element2) => {
      return element2.closest(this.controllerSelector) === this.element;
    };
    this.schema = schema;
    this.element = element;
    this.identifier = identifier;
    this.guide = new Guide(logger2);
    this.outlets = new OutletSet(this.documentScope, element);
  }
  findElement(selector) {
    return this.element.matches(selector) ? this.element : this.queryElements(selector).find(this.containsElement);
  }
  findAllElements(selector) {
    return [
      ...this.element.matches(selector) ? [this.element] : [],
      ...this.queryElements(selector).filter(this.containsElement)
    ];
  }
  queryElements(selector) {
    return Array.from(this.element.querySelectorAll(selector));
  }
  get controllerSelector() {
    return attributeValueContainsToken(this.schema.controllerAttribute, this.identifier);
  }
  get isDocumentScope() {
    return this.element === document.documentElement;
  }
  get documentScope() {
    return this.isDocumentScope ? this : new _Scope(this.schema, document.documentElement, this.identifier, this.guide.logger);
  }
};
var ScopeObserver = class {
  constructor(element, schema, delegate) {
    this.element = element;
    this.schema = schema;
    this.delegate = delegate;
    this.valueListObserver = new ValueListObserver(this.element, this.controllerAttribute, this);
    this.scopesByIdentifierByElement = /* @__PURE__ */ new WeakMap();
    this.scopeReferenceCounts = /* @__PURE__ */ new WeakMap();
  }
  start() {
    this.valueListObserver.start();
  }
  stop() {
    this.valueListObserver.stop();
  }
  get controllerAttribute() {
    return this.schema.controllerAttribute;
  }
  parseValueForToken(token) {
    const { element, content: identifier } = token;
    return this.parseValueForElementAndIdentifier(element, identifier);
  }
  parseValueForElementAndIdentifier(element, identifier) {
    const scopesByIdentifier = this.fetchScopesByIdentifierForElement(element);
    let scope2 = scopesByIdentifier.get(identifier);
    if (!scope2) {
      scope2 = this.delegate.createScopeForElementAndIdentifier(element, identifier);
      scopesByIdentifier.set(identifier, scope2);
    }
    return scope2;
  }
  elementMatchedValue(element, value) {
    const referenceCount = (this.scopeReferenceCounts.get(value) || 0) + 1;
    this.scopeReferenceCounts.set(value, referenceCount);
    if (referenceCount == 1) {
      this.delegate.scopeConnected(value);
    }
  }
  elementUnmatchedValue(element, value) {
    const referenceCount = this.scopeReferenceCounts.get(value);
    if (referenceCount) {
      this.scopeReferenceCounts.set(value, referenceCount - 1);
      if (referenceCount == 1) {
        this.delegate.scopeDisconnected(value);
      }
    }
  }
  fetchScopesByIdentifierForElement(element) {
    let scopesByIdentifier = this.scopesByIdentifierByElement.get(element);
    if (!scopesByIdentifier) {
      scopesByIdentifier = /* @__PURE__ */ new Map();
      this.scopesByIdentifierByElement.set(element, scopesByIdentifier);
    }
    return scopesByIdentifier;
  }
};
var Router = class {
  constructor(application2) {
    this.application = application2;
    this.scopeObserver = new ScopeObserver(this.element, this.schema, this);
    this.scopesByIdentifier = new Multimap();
    this.modulesByIdentifier = /* @__PURE__ */ new Map();
  }
  get element() {
    return this.application.element;
  }
  get schema() {
    return this.application.schema;
  }
  get logger() {
    return this.application.logger;
  }
  get controllerAttribute() {
    return this.schema.controllerAttribute;
  }
  get modules() {
    return Array.from(this.modulesByIdentifier.values());
  }
  get contexts() {
    return this.modules.reduce((contexts, module) => contexts.concat(module.contexts), []);
  }
  start() {
    this.scopeObserver.start();
  }
  stop() {
    this.scopeObserver.stop();
  }
  loadDefinition(definition) {
    this.unloadIdentifier(definition.identifier);
    const module = new Module(this.application, definition);
    this.connectModule(module);
    const afterLoad = definition.controllerConstructor.afterLoad;
    if (afterLoad) {
      afterLoad.call(definition.controllerConstructor, definition.identifier, this.application);
    }
  }
  unloadIdentifier(identifier) {
    const module = this.modulesByIdentifier.get(identifier);
    if (module) {
      this.disconnectModule(module);
    }
  }
  getContextForElementAndIdentifier(element, identifier) {
    const module = this.modulesByIdentifier.get(identifier);
    if (module) {
      return module.contexts.find((context) => context.element == element);
    }
  }
  proposeToConnectScopeForElementAndIdentifier(element, identifier) {
    const scope2 = this.scopeObserver.parseValueForElementAndIdentifier(element, identifier);
    if (scope2) {
      this.scopeObserver.elementMatchedValue(scope2.element, scope2);
    } else {
      console.error(`Couldn't find or create scope for identifier: "${identifier}" and element:`, element);
    }
  }
  handleError(error3, message, detail) {
    this.application.handleError(error3, message, detail);
  }
  createScopeForElementAndIdentifier(element, identifier) {
    return new Scope(this.schema, element, identifier, this.logger);
  }
  scopeConnected(scope2) {
    this.scopesByIdentifier.add(scope2.identifier, scope2);
    const module = this.modulesByIdentifier.get(scope2.identifier);
    if (module) {
      module.connectContextForScope(scope2);
    }
  }
  scopeDisconnected(scope2) {
    this.scopesByIdentifier.delete(scope2.identifier, scope2);
    const module = this.modulesByIdentifier.get(scope2.identifier);
    if (module) {
      module.disconnectContextForScope(scope2);
    }
  }
  connectModule(module) {
    this.modulesByIdentifier.set(module.identifier, module);
    const scopes = this.scopesByIdentifier.getValuesForKey(module.identifier);
    scopes.forEach((scope2) => module.connectContextForScope(scope2));
  }
  disconnectModule(module) {
    this.modulesByIdentifier.delete(module.identifier);
    const scopes = this.scopesByIdentifier.getValuesForKey(module.identifier);
    scopes.forEach((scope2) => module.disconnectContextForScope(scope2));
  }
};
var defaultSchema = {
  controllerAttribute: "data-controller",
  actionAttribute: "data-action",
  targetAttribute: "data-target",
  targetAttributeForScope: (identifier) => `data-${identifier}-target`,
  outletAttributeForScope: (identifier, outlet) => `data-${identifier}-${outlet}-outlet`,
  keyMappings: Object.assign(Object.assign({ enter: "Enter", tab: "Tab", esc: "Escape", space: " ", up: "ArrowUp", down: "ArrowDown", left: "ArrowLeft", right: "ArrowRight", home: "Home", end: "End", page_up: "PageUp", page_down: "PageDown" }, objectFromEntries("abcdefghijklmnopqrstuvwxyz".split("").map((c) => [c, c]))), objectFromEntries("0123456789".split("").map((n) => [n, n])))
};
function objectFromEntries(array) {
  return array.reduce((memo, [k, v]) => Object.assign(Object.assign({}, memo), { [k]: v }), {});
}
var Application = class {
  constructor(element = document.documentElement, schema = defaultSchema) {
    this.logger = console;
    this.debug = false;
    this.logDebugActivity = (identifier, functionName, detail = {}) => {
      if (this.debug) {
        this.logFormattedMessage(identifier, functionName, detail);
      }
    };
    this.element = element;
    this.schema = schema;
    this.dispatcher = new Dispatcher(this);
    this.router = new Router(this);
    this.actionDescriptorFilters = Object.assign({}, defaultActionDescriptorFilters);
  }
  static start(element, schema) {
    const application2 = new this(element, schema);
    application2.start();
    return application2;
  }
  async start() {
    await domReady();
    this.logDebugActivity("application", "starting");
    this.dispatcher.start();
    this.router.start();
    this.logDebugActivity("application", "start");
  }
  stop() {
    this.logDebugActivity("application", "stopping");
    this.dispatcher.stop();
    this.router.stop();
    this.logDebugActivity("application", "stop");
  }
  register(identifier, controllerConstructor) {
    this.load({ identifier, controllerConstructor });
  }
  registerActionOption(name, filter) {
    this.actionDescriptorFilters[name] = filter;
  }
  load(head, ...rest) {
    const definitions = Array.isArray(head) ? head : [head, ...rest];
    definitions.forEach((definition) => {
      if (definition.controllerConstructor.shouldLoad) {
        this.router.loadDefinition(definition);
      }
    });
  }
  unload(head, ...rest) {
    const identifiers = Array.isArray(head) ? head : [head, ...rest];
    identifiers.forEach((identifier) => this.router.unloadIdentifier(identifier));
  }
  get controllers() {
    return this.router.contexts.map((context) => context.controller);
  }
  getControllerForElementAndIdentifier(element, identifier) {
    const context = this.router.getContextForElementAndIdentifier(element, identifier);
    return context ? context.controller : null;
  }
  handleError(error3, message, detail) {
    var _a;
    this.logger.error(`%s

%o

%o`, message, error3, detail);
    (_a = window.onerror) === null || _a === void 0 ? void 0 : _a.call(window, message, "", 0, 0, error3);
  }
  logFormattedMessage(identifier, functionName, detail = {}) {
    detail = Object.assign({ application: this }, detail);
    this.logger.groupCollapsed(`${identifier} #${functionName}`);
    this.logger.log("details:", Object.assign({}, detail));
    this.logger.groupEnd();
  }
};
function domReady() {
  return new Promise((resolve) => {
    if (document.readyState == "loading") {
      document.addEventListener("DOMContentLoaded", () => resolve());
    } else {
      resolve();
    }
  });
}
function ClassPropertiesBlessing(constructor) {
  const classes = readInheritableStaticArrayValues(constructor, "classes");
  return classes.reduce((properties, classDefinition) => {
    return Object.assign(properties, propertiesForClassDefinition(classDefinition));
  }, {});
}
function propertiesForClassDefinition(key) {
  return {
    [`${key}Class`]: {
      get() {
        const { classes } = this;
        if (classes.has(key)) {
          return classes.get(key);
        } else {
          const attribute = classes.getAttributeName(key);
          throw new Error(`Missing attribute "${attribute}"`);
        }
      }
    },
    [`${key}Classes`]: {
      get() {
        return this.classes.getAll(key);
      }
    },
    [`has${capitalize2(key)}Class`]: {
      get() {
        return this.classes.has(key);
      }
    }
  };
}
function OutletPropertiesBlessing(constructor) {
  const outlets = readInheritableStaticArrayValues(constructor, "outlets");
  return outlets.reduce((properties, outletDefinition) => {
    return Object.assign(properties, propertiesForOutletDefinition(outletDefinition));
  }, {});
}
function getOutletController(controller, element, identifier) {
  return controller.application.getControllerForElementAndIdentifier(element, identifier);
}
function getControllerAndEnsureConnectedScope(controller, element, outletName) {
  let outletController = getOutletController(controller, element, outletName);
  if (outletController)
    return outletController;
  controller.application.router.proposeToConnectScopeForElementAndIdentifier(element, outletName);
  outletController = getOutletController(controller, element, outletName);
  if (outletController)
    return outletController;
}
function propertiesForOutletDefinition(name) {
  const camelizedName = namespaceCamelize(name);
  return {
    [`${camelizedName}Outlet`]: {
      get() {
        const outletElement = this.outlets.find(name);
        const selector = this.outlets.getSelectorForOutletName(name);
        if (outletElement) {
          const outletController = getControllerAndEnsureConnectedScope(this, outletElement, name);
          if (outletController)
            return outletController;
          throw new Error(`The provided outlet element is missing an outlet controller "${name}" instance for host controller "${this.identifier}"`);
        }
        throw new Error(`Missing outlet element "${name}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${selector}".`);
      }
    },
    [`${camelizedName}Outlets`]: {
      get() {
        const outlets = this.outlets.findAll(name);
        if (outlets.length > 0) {
          return outlets.map((outletElement) => {
            const outletController = getControllerAndEnsureConnectedScope(this, outletElement, name);
            if (outletController)
              return outletController;
            console.warn(`The provided outlet element is missing an outlet controller "${name}" instance for host controller "${this.identifier}"`, outletElement);
          }).filter((controller) => controller);
        }
        return [];
      }
    },
    [`${camelizedName}OutletElement`]: {
      get() {
        const outletElement = this.outlets.find(name);
        const selector = this.outlets.getSelectorForOutletName(name);
        if (outletElement) {
          return outletElement;
        } else {
          throw new Error(`Missing outlet element "${name}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${selector}".`);
        }
      }
    },
    [`${camelizedName}OutletElements`]: {
      get() {
        return this.outlets.findAll(name);
      }
    },
    [`has${capitalize2(camelizedName)}Outlet`]: {
      get() {
        return this.outlets.has(name);
      }
    }
  };
}
function TargetPropertiesBlessing(constructor) {
  const targets = readInheritableStaticArrayValues(constructor, "targets");
  return targets.reduce((properties, targetDefinition) => {
    return Object.assign(properties, propertiesForTargetDefinition(targetDefinition));
  }, {});
}
function propertiesForTargetDefinition(name) {
  return {
    [`${name}Target`]: {
      get() {
        const target = this.targets.find(name);
        if (target) {
          return target;
        } else {
          throw new Error(`Missing target element "${name}" for "${this.identifier}" controller`);
        }
      }
    },
    [`${name}Targets`]: {
      get() {
        return this.targets.findAll(name);
      }
    },
    [`has${capitalize2(name)}Target`]: {
      get() {
        return this.targets.has(name);
      }
    }
  };
}
function ValuePropertiesBlessing(constructor) {
  const valueDefinitionPairs = readInheritableStaticObjectPairs(constructor, "values");
  const propertyDescriptorMap = {
    valueDescriptorMap: {
      get() {
        return valueDefinitionPairs.reduce((result, valueDefinitionPair) => {
          const valueDescriptor = parseValueDefinitionPair(valueDefinitionPair, this.identifier);
          const attributeName = this.data.getAttributeNameForKey(valueDescriptor.key);
          return Object.assign(result, { [attributeName]: valueDescriptor });
        }, {});
      }
    }
  };
  return valueDefinitionPairs.reduce((properties, valueDefinitionPair) => {
    return Object.assign(properties, propertiesForValueDefinitionPair(valueDefinitionPair));
  }, propertyDescriptorMap);
}
function propertiesForValueDefinitionPair(valueDefinitionPair, controller) {
  const definition = parseValueDefinitionPair(valueDefinitionPair, controller);
  const { key, name, reader: read, writer: write } = definition;
  return {
    [name]: {
      get() {
        const value = this.data.get(key);
        if (value !== null) {
          return read(value);
        } else {
          return definition.defaultValue;
        }
      },
      set(value) {
        if (value === void 0) {
          this.data.delete(key);
        } else {
          this.data.set(key, write(value));
        }
      }
    },
    [`has${capitalize2(name)}`]: {
      get() {
        return this.data.has(key) || definition.hasCustomDefaultValue;
      }
    }
  };
}
function parseValueDefinitionPair([token, typeDefinition], controller) {
  return valueDescriptorForTokenAndTypeDefinition({
    controller,
    token,
    typeDefinition
  });
}
function parseValueTypeConstant(constant) {
  switch (constant) {
    case Array:
      return "array";
    case Boolean:
      return "boolean";
    case Number:
      return "number";
    case Object:
      return "object";
    case String:
      return "string";
  }
}
function parseValueTypeDefault(defaultValue) {
  switch (typeof defaultValue) {
    case "boolean":
      return "boolean";
    case "number":
      return "number";
    case "string":
      return "string";
  }
  if (Array.isArray(defaultValue))
    return "array";
  if (Object.prototype.toString.call(defaultValue) === "[object Object]")
    return "object";
}
function parseValueTypeObject(payload) {
  const { controller, token, typeObject } = payload;
  const hasType = isSomething(typeObject.type);
  const hasDefault = isSomething(typeObject.default);
  const fullObject = hasType && hasDefault;
  const onlyType = hasType && !hasDefault;
  const onlyDefault = !hasType && hasDefault;
  const typeFromObject = parseValueTypeConstant(typeObject.type);
  const typeFromDefaultValue = parseValueTypeDefault(payload.typeObject.default);
  if (onlyType)
    return typeFromObject;
  if (onlyDefault)
    return typeFromDefaultValue;
  if (typeFromObject !== typeFromDefaultValue) {
    const propertyPath = controller ? `${controller}.${token}` : token;
    throw new Error(`The specified default value for the Stimulus Value "${propertyPath}" must match the defined type "${typeFromObject}". The provided default value of "${typeObject.default}" is of type "${typeFromDefaultValue}".`);
  }
  if (fullObject)
    return typeFromObject;
}
function parseValueTypeDefinition(payload) {
  const { controller, token, typeDefinition } = payload;
  const typeObject = { controller, token, typeObject: typeDefinition };
  const typeFromObject = parseValueTypeObject(typeObject);
  const typeFromDefaultValue = parseValueTypeDefault(typeDefinition);
  const typeFromConstant = parseValueTypeConstant(typeDefinition);
  const type = typeFromObject || typeFromDefaultValue || typeFromConstant;
  if (type)
    return type;
  const propertyPath = controller ? `${controller}.${typeDefinition}` : token;
  throw new Error(`Unknown value type "${propertyPath}" for "${token}" value`);
}
function defaultValueForDefinition(typeDefinition) {
  const constant = parseValueTypeConstant(typeDefinition);
  if (constant)
    return defaultValuesByType[constant];
  const hasDefault = hasProperty(typeDefinition, "default");
  const hasType = hasProperty(typeDefinition, "type");
  const typeObject = typeDefinition;
  if (hasDefault)
    return typeObject.default;
  if (hasType) {
    const { type } = typeObject;
    const constantFromType = parseValueTypeConstant(type);
    if (constantFromType)
      return defaultValuesByType[constantFromType];
  }
  return typeDefinition;
}
function valueDescriptorForTokenAndTypeDefinition(payload) {
  const { token, typeDefinition } = payload;
  const key = `${dasherize(token)}-value`;
  const type = parseValueTypeDefinition(payload);
  return {
    type,
    key,
    name: camelize2(key),
    get defaultValue() {
      return defaultValueForDefinition(typeDefinition);
    },
    get hasCustomDefaultValue() {
      return parseValueTypeDefault(typeDefinition) !== void 0;
    },
    reader: readers[type],
    writer: writers[type] || writers.default
  };
}
var defaultValuesByType = {
  get array() {
    return [];
  },
  boolean: false,
  number: 0,
  get object() {
    return {};
  },
  string: ""
};
var readers = {
  array(value) {
    const array = JSON.parse(value);
    if (!Array.isArray(array)) {
      throw new TypeError(`expected value of type "array" but instead got value "${value}" of type "${parseValueTypeDefault(array)}"`);
    }
    return array;
  },
  boolean(value) {
    return !(value == "0" || String(value).toLowerCase() == "false");
  },
  number(value) {
    return Number(value.replace(/_/g, ""));
  },
  object(value) {
    const object = JSON.parse(value);
    if (object === null || typeof object != "object" || Array.isArray(object)) {
      throw new TypeError(`expected value of type "object" but instead got value "${value}" of type "${parseValueTypeDefault(object)}"`);
    }
    return object;
  },
  string(value) {
    return value;
  }
};
var writers = {
  default: writeString,
  array: writeJSON,
  object: writeJSON
};
function writeJSON(value) {
  return JSON.stringify(value);
}
function writeString(value) {
  return `${value}`;
}
var Controller = class {
  constructor(context) {
    this.context = context;
  }
  static get shouldLoad() {
    return true;
  }
  static afterLoad(_identifier, _application) {
    return;
  }
  get application() {
    return this.context.application;
  }
  get scope() {
    return this.context.scope;
  }
  get element() {
    return this.scope.element;
  }
  get identifier() {
    return this.scope.identifier;
  }
  get targets() {
    return this.scope.targets;
  }
  get outlets() {
    return this.scope.outlets;
  }
  get classes() {
    return this.scope.classes;
  }
  get data() {
    return this.scope.data;
  }
  initialize() {
  }
  connect() {
  }
  disconnect() {
  }
  dispatch(eventName, { target = this.element, detail = {}, prefix: prefix2 = this.identifier, bubbles = true, cancelable = true } = {}) {
    const type = prefix2 ? `${prefix2}:${eventName}` : eventName;
    const event2 = new CustomEvent(type, { detail, bubbles, cancelable });
    target.dispatchEvent(event2);
    return event2;
  }
};
Controller.blessings = [
  ClassPropertiesBlessing,
  TargetPropertiesBlessing,
  ValuePropertiesBlessing,
  OutletPropertiesBlessing
];
Controller.targets = [];
Controller.outlets = [];
Controller.values = {};

// app/javascript/controllers/theme_controller.ts
var theme_controller_default = class extends Controller {
  static {
    this.targets = ["lightIcon", "darkIcon"];
  }
  static {
    this.values = { storageKey: String };
  }
  connect() {
    this.initializeTheme();
  }
  toggle() {
    const isDark = document.documentElement.classList.contains("dark");
    const newIsDark = !isDark;
    localStorage.setItem(this.storageKeyValue, JSON.stringify(newIsDark));
    this.updateTheme(newIsDark);
  }
  initializeTheme() {
    const savedIsDark = this.getSavedTheme();
    this.updateTheme(savedIsDark);
  }
  getSavedTheme() {
    return JSON.parse(localStorage.getItem(this.storageKeyValue) || "false");
  }
  updateTheme(isDark) {
    if (isDark) {
      document.documentElement.classList.add("dark");
      this.lightIconTarget.classList.add("hidden");
      this.darkIconTarget.classList.remove("hidden");
    } else {
      document.documentElement.classList.remove("dark");
      this.lightIconTarget.classList.remove("hidden");
      this.darkIconTarget.classList.add("hidden");
    }
  }
};

// app/javascript/controllers/dropdown_controller.ts
var dropdown_controller_default = class extends Controller {
  static {
    this.targets = ["menu", "trigger"];
  }
  static {
    this.values = {
      closeOnClickOutside: { type: Boolean, default: true }
    };
  }
  connect() {
    if (this.closeOnClickOutsideValue) {
      document.addEventListener("click", this.clickOutside.bind(this));
    }
  }
  disconnect() {
    if (this.closeOnClickOutsideValue) {
      document.removeEventListener("click", this.clickOutside.bind(this));
    }
  }
  toggle(event2) {
    const isHidden = this.menuTarget.classList.contains("hidden");
    if (isHidden) {
      this.open(event2);
    } else {
      this.close(event2);
    }
  }
  open(event2) {
    this.menuTarget.classList.remove("hidden");
    if (this.hasTriggerTarget) {
      this.triggerTarget.setAttribute("aria-expanded", "true");
    }
  }
  close(event2) {
    this.menuTarget.classList.add("hidden");
    if (this.hasTriggerTarget) {
      this.triggerTarget.setAttribute("aria-expanded", "false");
    }
  }
  clickOutside(event2) {
    if (!this.element.contains(event2.target)) {
      this.close(event2);
    }
  }
};

// app/javascript/controllers/sdk_integration_controller.ts
var sdk_integration_controller_default = class extends Controller {
  static {
    this.targets = [
      "sdkButton"
    ];
  }
  static {
    this.values = {
      message: String,
      action: String
    };
  }
  connect() {
    this.checkSDKAvailability();
  }
  // Send message to chatbox (SDK integration)
  sendToChatbox() {
    if (!window.sdkUtils || !window.sdkUtils.sendMessage) {
      console.warn("SDK not available");
      return;
    }
    const message = this.messageValue || this.generateDefaultMessage();
    window.sdkUtils.sendMessage(message);
  }
  // Send error to chatbox for fixing
  sendErrorToChatbox() {
    if (!window.sdkUtils || !window.sdkUtils.sendErrorForFix) {
      console.warn("SDK not available");
      return;
    }
    const action = this.actionValue || "sendErrorForFix";
    if (action === "sendErrorForFix") {
      const errorMessage = this.messageValue || "Unknown error";
      window.sdkUtils.sendErrorForFix({ errorMessage });
    } else {
      const message = this.messageValue || this.generateDefaultMessage();
      window.sdkUtils.sendMessage(message);
    }
  }
  // Check SDK availability and show/hide SDK buttons
  checkSDKAvailability() {
    if (!this.hasSdkButtonTarget) return;
    const checkAndShow = () => {
      if (window.isSDKAvailable && window.isSDKAvailable()) {
        this.sdkButtonTarget.style.display = "block";
        return true;
      }
      return false;
    };
    if (!checkAndShow()) {
      setTimeout(checkAndShow, 1e3);
      setTimeout(checkAndShow, 2800);
    }
  }
  // Generate default message for SDK
  generateDefaultMessage() {
    const url = window.location.pathname.substring(1);
    return `Please help me with this page: ${url}

URL: ${window.location.href}
Path: ${url}

I need assistance with this page.`;
  }
};

// app/javascript/controllers/clipboard_controller.ts
var clipboard_controller_default = class extends Controller {
  static {
    this.targets = ["source"];
  }
  // Copy content to clipboard
  copy(event2) {
    event2.preventDefault();
    const textToCopy = this.sourceTarget.value;
    if (!textToCopy) {
      console.error("No text to copy found");
      this.showFailure();
      return;
    }
    if (!window.copyToClipboard) {
      console.error("window.copyToClipboard not available");
      this.showFailure();
      return;
    }
    console.log("Attempting to copy:", textToCopy);
    window.copyToClipboard(textToCopy).then(() => {
      this.showSuccess();
    }).catch((_error) => {
      this.showFailure();
    });
  }
  // Show success feedback
  showSuccess() {
    const button = this.getButton();
    const originalText = button.innerHTML;
    const originalClass = button.className;
    button.innerHTML = "Copied!";
    button.className = originalClass.replace(/btn-\w+/, "btn-success");
    setTimeout(() => {
      button.innerHTML = originalText;
      button.className = originalClass;
    }, 2e3);
  }
  // Show failure feedback
  showFailure() {
    const button = this.getButton();
    const originalText = button.innerHTML;
    const originalClass = button.className;
    button.innerHTML = "Copy Failed!";
    button.className = originalClass.replace(/btn-\w+/, "btn-danger");
    setTimeout(() => {
      button.innerHTML = originalText;
      button.className = originalClass;
    }, 2e3);
  }
  // Get the button to show feedback on
  getButton() {
    const button = this.element.querySelector("button");
    if (button) {
      return button;
    }
    return this.element;
  }
};

// app/javascript/controllers/city_selector_controller.ts
var city_selector_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectionType = "departure";
    this.isMultiSelectMode = false;
    this.selectedCities = [];
    this.currentMultiCitySegmentId = null;
    this.currentMultiCityCityType = null;
    this.currentRegionType = "domestic";
  }
  static {
    this.targets = [
      // stimulus-validator: disable-next-line
      "modal",
      "departure",
      "destination",
      "departureCityInput",
      "destinationCityInput",
      // stimulus-validator: disable-next-line
      "tabDeparture",
      // stimulus-validator: disable-next-line
      "tabDestination",
      // stimulus-validator: disable-next-line
      "tabDomestic",
      // stimulus-validator: disable-next-line
      "tabInternational",
      // stimulus-validator: disable-next-line
      "searchInput",
      // stimulus-validator: disable-next-line
      "domesticList",
      // stimulus-validator: disable-next-line
      "internationalList",
      // stimulus-validator: disable-next-line
      "historySection",
      // stimulus-validator: disable-next-line
      "currentCity",
      // stimulus-validator: disable-next-line
      "locationStatus",
      // stimulus-validator: disable-next-line
      "locationButton",
      // stimulus-validator: disable-next-line
      "locationText",
      // stimulus-validator: disable-next-line
      "locationSpinner",
      // stimulus-validator: disable-next-line
      "locatedCity",
      // stimulus-validator: disable-next-line
      "locatedCityButton",
      // stimulus-validator: disable-next-line
      "currentRegionTab"
    ];
  }
  static {
    this.values = {
      departureCity: String,
      destinationCity: String,
      enableMultiSelect: { type: Boolean, default: true },
      modalTitle: { type: String, default: "" }
    };
  }
  connect() {
    console.log("CitySelector connected", { enableMultiSelect: this.enableMultiSelectValue });
    if (!this.departureCityValue) this.departureCityValue = "\u5317\u4EAC";
    if (!this.destinationCityValue) this.destinationCityValue = "\u676D\u5DDE";
    if (this.hasDepartureCityInputTarget) {
      this.departureCityInputTarget.value = this.departureCityValue;
    }
    if (this.hasDestinationCityInputTarget) {
      this.destinationCityInputTarget.value = this.destinationCityValue;
    }
    if (!this.enableMultiSelectValue) {
      this.hideMultiSelectUI();
    }
    this.element.addEventListener("multi-city:open-city-selector", this.handleMultiCityOpen.bind(this));
  }
  disconnect() {
    this.element.removeEventListener("multi-city:open-city-selector", this.handleMultiCityOpen.bind(this));
  }
  // Handle multi-city city selector request
  handleMultiCityOpen(event2) {
    const customEvent = event2;
    const { segmentId, cityType } = customEvent.detail;
    console.log("City selector: Received multi-city open request", { segmentId, cityType });
    this.currentMultiCitySegmentId = segmentId;
    this.currentMultiCityCityType = cityType;
    this.selectionType = cityType === "departure" ? "departure" : "destination";
    this.updateModalTitle();
    this.showModal();
  }
  // Open modal for departure city selection
  openDeparture() {
    this.selectionType = "departure";
    this.isMultiSelectMode = false;
    this.selectedCities = [];
    this.updateModalTitle();
    this.updateMultiSelectUI();
    this.showModal();
  }
  // Open modal for destination city selection
  openDestination() {
    this.selectionType = "destination";
    this.isMultiSelectMode = false;
    this.selectedCities = [];
    this.updateModalTitle();
    this.updateMultiSelectUI();
    this.showModal();
  }
  // Open modal for hotel search city selection
  openHotelCitySelector() {
    this.selectionType = "departure";
    this.isMultiSelectMode = false;
    this.selectedCities = [];
    this.updateModalTitle();
    this.showModal();
  }
  // Show modal
  showModal() {
    if (!this.hasModalTarget) return;
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // Close modal
  closeModal() {
    if (!this.hasModalTarget) return;
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
    this.clearSearch();
  }
  // Select city
  selectCity(event2) {
    const button = event2.currentTarget;
    const cityName = button.dataset.cityName || "";
    const isInternational = button.dataset.international === "true";
    console.log("City selector: City selected:", cityName, "international:", isInternational);
    if (this.isMultiSelectMode) {
      if (this.selectedCities.includes(cityName)) {
        this.selectedCities = this.selectedCities.filter((city) => city !== cityName);
      } else {
        this.selectedCities.push(cityName);
      }
      this.updateSelectedCitiesDisplay();
      this.updateCityButtonStates();
      return;
    }
    if (this.currentMultiCitySegmentId && this.currentMultiCityCityType) {
      console.log("City selector: Multi-city mode, dispatching event", {
        segmentId: this.currentMultiCitySegmentId,
        cityType: this.currentMultiCityCityType,
        cityName
      });
      const updateEvent = new CustomEvent("city-selector:city-selected", {
        detail: {
          segmentId: this.currentMultiCitySegmentId,
          cityType: this.currentMultiCityCityType,
          cityName
        },
        bubbles: true
      });
      document.dispatchEvent(updateEvent);
      this.currentMultiCitySegmentId = null;
      this.currentMultiCityCityType = null;
    } else {
      console.log("City selector: Regular mode");
      if (this.selectionType === "departure") {
        this.departureCityValue = cityName;
        if (this.hasDepartureTarget) {
          this.departureTarget.textContent = cityName;
        }
        if (this.hasDepartureCityInputTarget) {
          this.departureCityInputTarget.value = cityName;
        }
        if (window.location.pathname === "/special_hotels") {
          Turbo.visit(`/special_hotels?city=${encodeURIComponent(cityName)}`);
          return;
        }
        if (window.location.pathname === "/hotels/search") {
          const url = new URL(window.location.href);
          url.searchParams.set("city", cityName);
          Turbo.visit(url.toString());
          return;
        }
        this.dispatchCityChangedEvent(cityName);
        this.dispatchHotelCityUpdateEvent(cityName, isInternational);
        this.dispatchTripCityChangeEvent("departure", cityName);
        const carCityEvent = new CustomEvent("city-selector:city-selected", {
          detail: { cityName },
          bubbles: true
        });
        document.dispatchEvent(carCityEvent);
        console.log("City selector: Dispatched city-selected event for cars", cityName);
      } else {
        this.destinationCityValue = cityName;
        if (this.hasDestinationTarget) {
          this.destinationTarget.textContent = cityName;
        }
        if (this.hasDestinationCityInputTarget) {
          this.destinationCityInputTarget.value = cityName;
        }
        this.dispatchCityChangedEvent(cityName);
        this.dispatchTripCityChangeEvent("destination", cityName);
      }
    }
    this.closeModal();
    this.saveToHistory(cityName);
  }
  // Toggle region tab (domestic/international)
  toggleRegion(event2) {
    const button = event2.currentTarget;
    const region = button.dataset.region;
    this.currentRegionType = region;
    if (this.hasTabDomesticTarget && this.hasTabInternationalTarget) {
      if (region === "domestic") {
        this.tabDomesticTarget.classList.add("border-b-2", "border-primary", "text-primary", "font-bold");
        this.tabDomesticTarget.classList.remove("text-gray-500");
        this.tabInternationalTarget.classList.remove("border-b-2", "border-primary", "text-primary", "font-bold");
        this.tabInternationalTarget.classList.add("text-gray-500");
      } else {
        this.tabInternationalTarget.classList.add("border-b-2", "border-primary", "text-primary", "font-bold");
        this.tabInternationalTarget.classList.remove("text-gray-500");
        this.tabDomesticTarget.classList.remove("border-b-2", "border-primary", "text-primary", "font-bold");
        this.tabDomesticTarget.classList.add("text-gray-500");
      }
    }
    if (this.hasDomesticListTarget && this.hasInternationalListTarget) {
      if (region === "domestic") {
        this.domesticListTarget.classList.remove("hidden");
        this.internationalListTarget.classList.add("hidden");
      } else {
        this.domesticListTarget.classList.add("hidden");
        this.internationalListTarget.classList.remove("hidden");
      }
    }
  }
  // Dispatch city-changed event for other controllers (like tour-group-filter)
  dispatchCityChangedEvent(cityName) {
    const cityChangedEvent = new CustomEvent("city-selector:city-changed", {
      detail: { cityName },
      bubbles: true
    });
    this.element.dispatchEvent(cityChangedEvent);
    console.log("City selector: Dispatched city-changed event", cityName);
  }
  // Dispatch hotel-specific city update event
  dispatchHotelCityUpdateEvent(cityName, isInternational = false) {
    const hotelCityEvent = new CustomEvent("city-selector:city-selected-for-hotel", {
      detail: {
        cityName,
        isInternational
      },
      bubbles: true
    });
    document.dispatchEvent(hotelCityEvent);
    console.log("City selector: Dispatched hotel city update event", { cityName, isInternational });
  }
  // Switch cities
  switchCities() {
    const temp = this.departureCityValue;
    this.departureCityValue = this.destinationCityValue;
    this.destinationCityValue = temp;
    if (this.hasDepartureTarget) {
      this.departureTarget.textContent = this.departureCityValue;
    }
    if (this.hasDestinationTarget) {
      this.destinationTarget.textContent = this.destinationCityValue;
    }
    if (this.hasDepartureCityInputTarget) {
      this.departureCityInputTarget.value = this.departureCityValue;
    }
    if (this.hasDestinationCityInputTarget) {
      this.destinationCityInputTarget.value = this.destinationCityValue;
    }
    this.element.dispatchEvent(new CustomEvent("cities-switched", {
      detail: {
        departure: this.departureCityValue,
        destination: this.destinationCityValue
      },
      bubbles: true
    }));
  }
  // Search cities
  searchCities() {
    if (!this.hasSearchInputTarget) return;
    const query = this.searchInputTarget.value.toLowerCase().trim();
    const cityButtons = this.element.querySelectorAll("[data-city-name]");
    cityButtons.forEach((button) => {
      const cityName = button.dataset.cityName?.toLowerCase() || "";
      const cityElement = button;
      if (!query || cityName.includes(query)) {
        cityElement.classList.remove("hidden");
      } else {
        cityElement.classList.add("hidden");
      }
    });
  }
  // Clear search
  clearSearch() {
    if (!this.hasSearchInputTarget) return;
    this.searchInputTarget.value = "";
    this.searchCities();
  }
  // Request location
  requestLocation() {
    if (!this.hasLocationButtonTarget || !this.hasLocationTextTarget || !this.hasLocationSpinnerTarget) return;
    this.locationTextTarget.textContent = "\u5B9A\u4F4D\u4E2D...";
    this.locationSpinnerTarget.classList.remove("hidden");
    this.locationButtonTarget.disabled = true;
    if (this.hasLocationStatusTarget) {
      const statusSpan = this.locationStatusTarget.querySelector("span");
      if (statusSpan) statusSpan.textContent = "\u6B63\u5728\u83B7\u53D6\u4F4D\u7F6E\u4FE1\u606F...";
    }
    this.getCityFromIP();
  }
  // Get city from IP address using ipapi.co (free, no key needed)
  getCityFromIP() {
    fetch("https://ipapi.co/json/").then((response) => {
      if (!response.ok) throw new Error("ipapi.co failed");
      return response.json();
    }).then((data2) => {
      console.log("Location data:", data2);
      let cityName = "";
      if (data2.city) {
        cityName = data2.city;
        const cityMap = {
          "Beijing": "\u5317\u4EAC",
          "Shanghai": "\u4E0A\u6D77",
          "Guangzhou": "\u5E7F\u5DDE",
          "Shenzhen": "\u6DF1\u5733",
          "Chengdu": "\u6210\u90FD",
          "Hangzhou": "\u676D\u5DDE",
          "Wuhan": "\u6B66\u6C49",
          "Chongqing": "\u91CD\u5E86",
          "Nanjing": "\u5357\u4EAC",
          "Xi'an": "\u897F\u5B89",
          "Tianjin": "\u5929\u6D25",
          "Suzhou": "\u82CF\u5DDE",
          "Changsha": "\u957F\u6C99",
          "Zhengzhou": "\u90D1\u5DDE",
          "Harbin": "\u54C8\u5C14\u6EE8",
          "Qingdao": "\u9752\u5C9B",
          "Kunming": "\u6606\u660E",
          "Xiamen": "\u53A6\u95E8",
          "Dalian": "\u5927\u8FDE"
        };
        if (cityMap[data2.city]) {
          cityName = cityMap[data2.city];
        }
        cityName = cityName.replace(/\s+Shi$/, "").replace(/\s+City$/, "").replace("\u5E02", "");
        this.handleLocationSuccess(cityName);
      } else {
        this.getCityFromIPFallback();
      }
    }).catch((error3) => {
      console.error("IP location error:", error3);
      this.getCityFromIPFallback();
    });
  }
  // Fallback: Use ip-api.com (free, no key, better for China)
  getCityFromIPFallback() {
    fetch("http://ip-api.com/json/?lang=zh-CN").then((response) => response.json()).then((data2) => {
      console.log("Fallback location data:", data2);
      if (data2.status === "success" && data2.city) {
        const cityName = data2.city.replace("\u5E02", "");
        this.handleLocationSuccess(cityName);
      } else {
        this.handleLocationError("\u65E0\u6CD5\u81EA\u52A8\u5B9A\u4F4D\uFF0C\u8BF7\u624B\u52A8\u9009\u62E9\u57CE\u5E02");
      }
    }).catch((error3) => {
      console.error("Fallback IP location error:", error3);
      this.handleLocationError("\u5B9A\u4F4D\u670D\u52A1\u6682\u65F6\u4E0D\u53EF\u7528\uFF0C\u8BF7\u624B\u52A8\u9009\u62E9\u57CE\u5E02");
    });
  }
  // Handle location success
  handleLocationSuccess(cityName) {
    if (!this.hasLocationTextTarget || !this.hasLocationSpinnerTarget || !this.hasLocationButtonTarget || !this.hasLocatedCityTarget || !this.hasLocatedCityButtonTarget) return;
    this.locationTextTarget.textContent = "\u91CD\u65B0\u5B9A\u4F4D";
    this.locationSpinnerTarget.classList.add("hidden");
    this.locationButtonTarget.disabled = false;
    if (this.hasLocationStatusTarget) {
      const statusSpan = this.locationStatusTarget.querySelector("span");
      if (statusSpan) statusSpan.textContent = `\u5B9A\u4F4D\u6210\u529F\uFF1A${cityName}`;
    }
    this.locatedCityTarget.classList.remove("hidden");
    this.locatedCityButtonTarget.textContent = cityName;
    this.locatedCityButtonTarget.dataset.cityName = cityName;
  }
  // Handle location error
  handleLocationError(errorMessage) {
    if (!this.hasLocationTextTarget || !this.hasLocationSpinnerTarget || !this.hasLocationButtonTarget) return;
    this.locationTextTarget.textContent = "\u91CD\u8BD5\u5B9A\u4F4D";
    this.locationSpinnerTarget.classList.add("hidden");
    this.locationButtonTarget.disabled = false;
    if (this.hasLocationStatusTarget) {
      const statusSpan = this.locationStatusTarget.querySelector("span");
      if (statusSpan) statusSpan.textContent = errorMessage || "\u5B9A\u4F4D\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\u6216\u624B\u52A8\u9009\u62E9\u57CE\u5E02";
    }
    setTimeout(() => {
      if (this.hasLocationTextTarget) {
        this.locationTextTarget.textContent = "\u5F00\u542F\u5B9A\u4F4D\u6743\u9650";
      }
    }, 3e3);
  }
  // Save to history
  saveToHistory(cityName) {
    const storageKey = "city_history";
    let history2 = [];
    try {
      const stored = localStorage.getItem(storageKey);
      if (stored) {
        history2 = JSON.parse(stored);
      }
    } catch (e) {
      console.error("Failed to load city history:", e);
    }
    history2 = history2.filter((city) => city !== cityName);
    history2.unshift(cityName);
    history2 = history2.slice(0, 5);
    try {
      localStorage.setItem(storageKey, JSON.stringify(history2));
    } catch (e) {
      console.error("Failed to save city history:", e);
    }
  }
  // Update modal title
  updateModalTitle() {
  }
  // Hide multi-select UI
  hideMultiSelectUI() {
  }
  // Update multi-select UI
  updateMultiSelectUI() {
  }
  // Update selected cities display
  updateSelectedCitiesDisplay() {
  }
  // Update city button states
  updateCityButtonStates() {
  }
  // Dispatch trip planner city change event
  dispatchTripCityChangeEvent(type, cityName) {
    const event2 = new CustomEvent("trip-planner:city-changed", {
      detail: { type, city: cityName },
      bubbles: true
    });
    document.dispatchEvent(event2);
  }
  // Stop event propagation
  stopPropagation(event2) {
    event2.stopPropagation();
  }
  switchToSingleSelect() {
    this.isMultiSelectMode = false;
    this.selectedCities = [];
    this.updateMultiSelectUI();
  }
  switchToMultiSelect() {
    this.isMultiSelectMode = true;
    this.updateMultiSelectUI();
  }
  confirmMultiSelect() {
    if (this.selectedCities.length > 0) {
      const event2 = new CustomEvent("city-selector:multi-cities-selected", {
        detail: { cities: this.selectedCities },
        bubbles: true
      });
      document.dispatchEvent(event2);
    }
    this.closeModal();
  }
  showDomestic() {
    if (this.hasTabDomesticTarget && this.hasTabInternationalTarget) {
      this.tabDomesticTarget.classList.add("text-gray-900");
      this.tabDomesticTarget.classList.remove("text-gray-500");
      this.tabInternationalTarget.classList.add("text-gray-500");
      this.tabInternationalTarget.classList.remove("text-gray-900");
      const domesticLine = this.tabDomesticTarget.querySelector("div");
      const internationalLine = this.tabInternationalTarget.querySelector("div");
      if (domesticLine) domesticLine.classList.remove("hidden");
      if (internationalLine) internationalLine.classList.add("hidden");
    }
    if (this.hasDomesticListTarget) {
      this.domesticListTarget.classList.remove("hidden");
    }
    if (this.hasInternationalListTarget) {
      this.internationalListTarget.classList.add("hidden");
    }
    this.currentRegionType = "domestic";
  }
  showInternational() {
    if (this.hasTabInternationalTarget && this.hasTabDomesticTarget) {
      this.tabInternationalTarget.classList.add("text-gray-900");
      this.tabInternationalTarget.classList.remove("text-gray-500");
      this.tabDomesticTarget.classList.add("text-gray-500");
      this.tabDomesticTarget.classList.remove("text-gray-900");
      const internationalLine = this.tabInternationalTarget.querySelector("div");
      const domesticLine = this.tabDomesticTarget.querySelector("div");
      if (internationalLine) internationalLine.classList.remove("hidden");
      if (domesticLine) domesticLine.classList.add("hidden");
    }
    if (this.hasInternationalListTarget) {
      this.internationalListTarget.classList.remove("hidden");
    }
    if (this.hasDomesticListTarget) {
      this.domesticListTarget.classList.add("hidden");
    }
    this.currentRegionType = "international";
  }
  jumpToLetter(event2) {
    const button = event2.currentTarget;
    const letter = button.dataset.letter;
    if (letter) {
      const targetElement = this.element.querySelector(`[data-letter-section="${letter}"]`);
      if (targetElement) {
        targetElement.scrollIntoView({ behavior: "smooth", block: "start" });
      }
    }
  }
  scrollToRegion(event2) {
    const button = event2.currentTarget;
    const region = button.dataset.region;
    if (region) {
      const targetElement = this.element.querySelector(`[data-region-section="${region}"]`);
      if (targetElement) {
        targetElement.scrollIntoView({ behavior: "smooth", block: "start" });
      }
    }
  }
  expandHotCities() {
    const hotCitiesSection = this.element.querySelector("[data-hot-cities]");
    if (hotCitiesSection) {
      hotCitiesSection.classList.toggle("expanded");
    }
  }
  search() {
    this.searchCities();
  }
};

// app/javascript/controllers/flight_search_controller.ts
var flight_search_controller_default = class extends Controller {
  static {
    this.targets = ["departureInput", "destinationInput"];
  }
  // Validate form before submission
  validateForm(event2) {
    if (!this.hasDepartureInputTarget || !this.hasDestinationInputTarget) {
      return;
    }
    const departureCity = this.departureInputTarget.value.trim();
    const destinationCity = this.destinationInputTarget.value.trim();
    if (departureCity && destinationCity && departureCity === destinationCity) {
      event2.preventDefault();
      alert("\u51FA\u53D1\u5730\u4E0E\u76EE\u7684\u5730\u4E0D\u80FD\u76F8\u540C");
      return;
    }
  }
};

// app/javascript/controllers/flight_history_controller.ts
var flight_history_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.maxHistoryItems = 5;
  }
  static {
    this.targets = ["container", "list"];
  }
  connect() {
    if (this.hasContainerTarget && this.hasListTarget) {
      this.renderHistory();
    }
  }
  // Save current search to history when form is submitted
  saveSearch(event2) {
    const form = event2.target;
    const formData = new FormData(form);
    const searchData = {
      departure_city: formData.get("departure_city"),
      destination_city: formData.get("destination_city"),
      date: formData.get("date"),
      return_date: formData.get("return_date") || void 0,
      trip_type: formData.get("trip_type"),
      cabin_class: formData.get("cabin_class") || void 0,
      timestamp: Date.now()
    };
    this.addToHistory(searchData);
  }
  addToHistory(searchData) {
    let history2 = this.getHistory();
    history2 = history2.filter(
      (item) => !(item.departure_city === searchData.departure_city && item.destination_city === searchData.destination_city && item.date === searchData.date)
    );
    history2.unshift(searchData);
    history2 = history2.slice(0, this.maxHistoryItems);
    localStorage.setItem("flight_search_history", JSON.stringify(history2));
  }
  getHistory() {
    const historyStr = localStorage.getItem("flight_search_history");
    if (!historyStr) return [];
    try {
      return JSON.parse(historyStr);
    } catch {
      return [];
    }
  }
  renderHistory() {
    if (!this.hasContainerTarget || !this.hasListTarget) {
      return;
    }
    const history2 = this.getHistory();
    if (history2.length === 0) {
      this.containerTarget.classList.add("hidden");
      return;
    }
    this.containerTarget.classList.remove("hidden");
    const historyHTML = history2.map((item) => {
      const date = new Date(item.date);
      const dateStr = `${date.getMonth() + 1}/${date.getDate()}`;
      const tripTypeText = item.trip_type === "round_trip" ? "\u5F80\u8FD4" : "\u5355\u7A0B";
      const params = new URLSearchParams({
        departure_city: item.departure_city,
        destination_city: item.destination_city,
        date: item.date,
        trip_type: item.trip_type
      });
      if (item.return_date) {
        params.append("return_date", item.return_date);
      }
      if (item.cabin_class) {
        params.append("cabin_class", item.cabin_class);
      }
      const url = `/flights/search?${params.toString()}`;
      return `
        <a href="${url}" 
           class="inline-block whitespace-nowrap px-3 py-1.5 rounded-full bg-gray-100 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 transition-colors">
          ${item.departure_city} \u2192 ${item.destination_city}  ${dateStr}  ${tripTypeText}
        </a>
      `;
    }).join("");
    this.listTarget.innerHTML = historyHTML;
  }
  clearHistory(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    localStorage.removeItem("flight_search_history");
    if (this.hasContainerTarget && this.hasListTarget) {
      this.containerTarget.classList.add("hidden");
      this.listTarget.innerHTML = "";
    }
  }
};

// app/javascript/controllers/date_picker_controller.ts
var date_picker_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedDateObj = /* @__PURE__ */ new Date();
    this.currentMultiCitySegmentId = null;
    this.selectedMonths = /* @__PURE__ */ new Set();
  }
  static {
    this.targets = [
      "modal",
      "selectedDate",
      "dateInput",
      "dateButton",
      "exactTab",
      "fuzzyTab",
      "exactDateContent",
      "fuzzyDateContent",
      "monthButton"
    ];
  }
  static {
    this.values = {
      currentDate: String
    };
  }
  connect() {
    console.log("DatePicker connected");
    const clientToday = this.formatDate(/* @__PURE__ */ new Date());
    this.selectedDateObj = /* @__PURE__ */ new Date();
    this.currentDateValue = this.formatDate(this.selectedDateObj);
    if (this.hasSelectedDateTarget) {
      this.updateDisplayedDate();
    }
    if (this.hasDateInputTarget) {
      this.dateInputTarget.value = this.currentDateValue;
    }
    if (!this.hasModalTarget) {
      console.log("DatePicker: No modal target found, skipping modal setup");
      return;
    }
    const modalElement = this.modalTarget;
    if (modalElement) {
      modalElement.dataset.clientToday = clientToday;
    }
    this.updatePastDates();
    this.element.addEventListener("multi-city:open-date-picker", this.handleMultiCityOpen.bind(this));
  }
  disconnect() {
    this.element.removeEventListener("multi-city:open-date-picker", this.handleMultiCityOpen.bind(this));
  }
  // Handle multi-city date picker request
  handleMultiCityOpen(event2) {
    const { segmentId } = event2.detail;
    console.log("Date picker: Received multi-city open request", { segmentId });
    this.currentMultiCitySegmentId = segmentId;
    this.openModal();
  }
  // Open check-in date picker
  openCheckIn() {
    const checkInDate = prompt("\u8BF7\u8F93\u5165\u5165\u4F4F\u65E5\u671F (YYYY-MM-DD)", this.formatDate(/* @__PURE__ */ new Date()));
    if (checkInDate) {
      const url = new URL(window.location.href);
      url.searchParams.set("check_in", checkInDate);
      window.location.href = url.toString();
    }
  }
  // Open check-out date picker
  openCheckOut() {
    const tomorrow = /* @__PURE__ */ new Date();
    tomorrow.setDate(tomorrow.getDate() + 1);
    const checkOutDate = prompt("\u8BF7\u8F93\u5165\u79BB\u5E97\u65E5\u671F (YYYY-MM-DD)", this.formatDate(tomorrow));
    if (checkOutDate) {
      const url = new URL(window.location.href);
      url.searchParams.set("check_out", checkOutDate);
      window.location.href = url.toString();
    }
  }
  // Open date picker modal
  openModal() {
    if (!this.hasModalTarget) return;
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // Close date picker modal
  closeModal() {
    if (!this.hasModalTarget) return;
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  // Select a date
  selectDate(event2) {
    const button = event2.currentTarget;
    const dateStr = button.dataset.date || "";
    if (!dateStr) return;
    const selectedDate = /* @__PURE__ */ new Date(`${dateStr}T00:00:00`);
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    selectedDate.setHours(0, 0, 0, 0);
    if (selectedDate < today) {
      console.log("Cannot select past dates (client timezone check)");
      return;
    }
    this.selectedDateObj = selectedDate;
    this.currentDateValue = dateStr;
    if (this.currentMultiCitySegmentId) {
      console.log("Date picker: Multi-city mode, dispatching event", {
        segmentId: this.currentMultiCitySegmentId,
        date: dateStr
      });
      const updateEvent = new CustomEvent("date-picker:date-selected", {
        detail: {
          segmentId: this.currentMultiCitySegmentId,
          date: dateStr
        },
        bubbles: true
      });
      document.dispatchEvent(updateEvent);
      this.currentMultiCitySegmentId = null;
      this.closeModal();
    } else if (window.location.pathname.includes("/flights/search")) {
      console.log("Date picker: Search page mode, reloading with new date");
      const url = new URL(window.location.href);
      url.searchParams.set("date", dateStr);
      window.location.href = url.toString();
    } else {
      console.log("Date picker: Regular mode");
      if (this.hasSelectedDateTarget) {
        this.updateDisplayedDate();
      }
      if (this.hasDateInputTarget) {
        this.dateInputTarget.value = dateStr;
      }
      this.closeModal();
    }
  }
  // Update the displayed date in the main view
  updateDisplayedDate() {
    const month = this.selectedDateObj.getMonth() + 1;
    const day = this.selectedDateObj.getDate();
    const dayName = this.getDayName(this.selectedDateObj);
    this.selectedDateTarget.innerHTML = `
      ${month}<span class="text-lg font-medium mx-0.5">\u6708</span>${day}<span class="text-lg font-medium ml-0.5 mr-2">\u65E5</span>
      <span class="text-base text-gray-500 font-medium">${dayName}</span>
    `;
  }
  // Get day name in Chinese
  getDayName(date) {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    const targetDate = new Date(date);
    targetDate.setHours(0, 0, 0, 0);
    const diffTime = targetDate.getTime() - today.getTime();
    const diffDays = Math.round(diffTime / (1e3 * 60 * 60 * 24));
    if (diffDays === 0) return "\u4ECA\u5929";
    if (diffDays === 1) return "\u660E\u5929";
    if (diffDays === 2) return "\u540E\u5929";
    const weekdays = ["\u5468\u65E5", "\u5468\u4E00", "\u5468\u4E8C", "\u5468\u4E09", "\u5468\u56DB", "\u5468\u4E94", "\u5468\u516D"];
    return weekdays[date.getDay()];
  }
  // Format date as YYYY-MM-DD
  formatDate(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    return `${year}-${month}-${day}`;
  }
  // Generate calendar data
  generateCalendar() {
    const result = [];
    const startDate = /* @__PURE__ */ new Date();
    for (let i = 0; i < 60; i++) {
      const date = new Date(startDate);
      date.setDate(startDate.getDate() + i);
      result.push({
        date: this.formatDate(date),
        day: date.getDate(),
        month: date.getMonth() + 1,
        year: date.getFullYear(),
        weekday: date.getDay(),
        isToday: this.isToday(date),
        isSelected: this.formatDate(date) === this.currentDateValue
      });
    }
    return result;
  }
  // Check if date is today
  isToday(date) {
    const today = /* @__PURE__ */ new Date();
    return date.getDate() === today.getDate() && date.getMonth() === today.getMonth() && date.getFullYear() === today.getFullYear();
  }
  // Update date buttons to disable past dates based on client timezone
  updatePastDates() {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    const todayStr = this.formatDate(today);
    this.dateButtonTargets.forEach((button) => {
      const dateStr = button.dataset.date;
      if (!dateStr) return;
      const buttonDate = /* @__PURE__ */ new Date(`${dateStr}T00:00:00`);
      buttonDate.setHours(0, 0, 0, 0);
      const todayMarker = button.querySelector("[data-today-marker]");
      if (dateStr === todayStr && todayMarker) {
        todayMarker.classList.remove("hidden");
      }
      if (buttonDate < today) {
        button.disabled = true;
        button.classList.add("opacity-30", "cursor-not-allowed");
      } else {
        button.disabled = false;
        button.classList.remove("opacity-30", "cursor-not-allowed");
      }
    });
    console.log(`DatePicker: Updated ${this.dateButtonTargets.length} date buttons based on client timezone (today: ${todayStr})`);
  }
  // Switch to exact date tab
  switchToExactDate() {
    this.exactTabTarget.classList.add("font-bold", "border-b-2", "border-black");
    this.exactTabTarget.classList.remove("text-gray-500");
    this.fuzzyTabTarget.classList.remove("font-bold", "border-b-2", "border-black");
    this.fuzzyTabTarget.classList.add("text-gray-500");
    this.exactDateContentTarget.classList.remove("hidden");
    this.fuzzyDateContentTarget.classList.add("hidden");
  }
  // Switch to fuzzy date tab
  switchToFuzzyDate() {
    this.fuzzyTabTarget.classList.add("font-bold", "border-b-2", "border-black");
    this.fuzzyTabTarget.classList.remove("text-gray-500");
    this.exactTabTarget.classList.remove("font-bold", "border-b-2", "border-black");
    this.exactTabTarget.classList.add("text-gray-500");
    this.fuzzyDateContentTarget.classList.remove("hidden");
    this.exactDateContentTarget.classList.add("hidden");
  }
  // Toggle month selection
  toggleMonth(event2) {
    const button = event2.currentTarget;
    const month = button.dataset.month;
    if (!month) return;
    if (this.selectedMonths.has(month)) {
      this.selectedMonths.delete(month);
      button.classList.remove("bg-yellow-100", "border-yellow-500");
      button.classList.add("bg-gray-50");
      const svg = button.querySelector("svg");
      if (svg) svg.classList.remove("text-gray-700");
      if (svg) svg.classList.add("text-gray-400");
      const span = button.querySelector("span");
      if (span) span.classList.remove("text-gray-800", "font-medium");
      if (span) span.classList.add("text-gray-500");
      const checkmarks = button.querySelectorAll('div[class*="absolute"]');
      checkmarks.forEach((div) => {
        if (div.querySelector('svg[width="12"]')) {
          div.classList.add("hidden");
        }
      });
    } else {
      this.selectedMonths.add(month);
      button.classList.remove("bg-gray-50");
      button.classList.add("bg-yellow-100", "border-yellow-500");
      const svg = button.querySelector("svg");
      if (svg) svg.classList.remove("text-gray-400");
      if (svg) svg.classList.add("text-gray-700");
      const span = button.querySelector("span");
      if (span) span.classList.remove("text-gray-500");
      if (span) span.classList.add("text-gray-800", "font-medium");
      const checkmarks = button.querySelectorAll('div[class*="absolute"]');
      checkmarks.forEach((div) => {
        if (div.querySelector('svg[width="12"]')) {
          div.classList.remove("hidden");
        }
      });
    }
  }
  // Select quick range (1, 3, or 6 months)
  selectQuickRange(event2) {
    const button = event2.currentTarget;
    const rangeStr = button.dataset.range;
    if (!rangeStr) return;
    const range = parseInt(rangeStr, 10);
    this.clearMonthSelection();
    const today = /* @__PURE__ */ new Date();
    const currentMonth = new Date(today.getFullYear(), today.getMonth(), 1);
    for (let i = 0; i < range; i++) {
      const targetMonth = new Date(currentMonth);
      targetMonth.setMonth(currentMonth.getMonth() + i);
      const monthValue = `${targetMonth.getFullYear()}-${String(targetMonth.getMonth() + 1).padStart(2, "0")}`;
      const monthButton = this.monthButtonTargets.find((btn) => btn.dataset.month === monthValue);
      if (monthButton && !this.selectedMonths.has(monthValue)) {
        monthButton.click();
      }
    }
  }
  // Clear month selection
  clearMonthSelection() {
    this.monthButtonTargets.forEach((button) => {
      const month = button.dataset.month;
      if (month && this.selectedMonths.has(month)) {
        this.selectedMonths.delete(month);
        button.classList.remove("bg-yellow-100", "border-yellow-500");
        button.classList.add("bg-gray-50");
        const svg = button.querySelector("svg");
        if (svg) svg.classList.remove("text-gray-700");
        if (svg) svg.classList.add("text-gray-400");
        const span = button.querySelector("span");
        if (span) span.classList.remove("text-gray-800", "font-medium");
        if (span) span.classList.add("text-gray-500");
        const checkmarks = button.querySelectorAll('div[class*="absolute"]');
        checkmarks.forEach((div) => {
          if (div.querySelector('svg[width="12"]')) {
            div.classList.add("hidden");
          }
        });
      }
    });
  }
  // Confirm fuzzy date selection
  confirmFuzzyDate() {
    if (this.selectedMonths.size === 0) {
      alert("\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u4E2A\u6708\u4EFD");
      return;
    }
    const monthsArray = Array.from(this.selectedMonths).sort();
    const monthsString = monthsArray.join(",");
    if (window.location.pathname.includes("/flights/search")) {
      console.log("Date picker: Search page fuzzy mode, reloading with first date of selected months");
      const firstMonth = monthsArray[0];
      const [year, month] = firstMonth.split("-");
      const firstDate = `${year}-${month}-01`;
      const url = new URL(window.location.href);
      url.searchParams.set("date", firstDate);
      url.searchParams.set("fuzzy_months", monthsString);
      window.location.href = url.toString();
      return;
    }
    if (this.hasSelectedDateTarget) {
      const firstMonth = monthsArray[0];
      const [, month] = firstMonth.split("-");
      const monthNum = parseInt(month, 10);
      if (monthsArray.length === 1) {
        this.selectedDateTarget.innerHTML = `
          ${monthNum}<span class="text-lg font-medium mx-0.5">\u6708</span>
          <span class="text-base text-gray-500 font-medium">\u5168\u6708</span>
        `;
      } else {
        const lastMonth = monthsArray[monthsArray.length - 1];
        const [, lastMonthStr] = lastMonth.split("-");
        const lastMonthNum = parseInt(lastMonthStr, 10);
        this.selectedDateTarget.innerHTML = `
          ${monthNum}<span class="text-lg font-medium mx-0.5">\u6708</span>-${lastMonthNum}<span class="text-lg font-medium mx-0.5">\u6708</span>
          <span class="text-base text-gray-500 font-medium">(${monthsArray.length}\u4E2A\u6708)</span>
        `;
      }
    }
    if (this.hasDateInputTarget) {
      this.dateInputTarget.value = `fuzzy:${monthsString}`;
    }
    this.closeModal();
  }
};

// app/javascript/controllers/booking_controller.ts
var booking_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    // 
    this.memberCheckCompleted = false;
    // 
    this.isSecondWait = false;
    // 
    this.missingAirlines = [];
  }
  static {
    this.targets = ["termsModal", "insuranceModal", "memberModal", "confirmModal", "totalPriceAmount"];
  }
  selectPassenger(event2) {
    const radio = event2.currentTarget;
    const idNumber = radio.dataset.idNumber || "";
    const phone = radio.dataset.phone || "";
    const idNumberField = document.getElementById("passenger_id_number");
    if (idNumberField) {
      idNumberField.value = idNumber;
    }
    const contactPhoneField = document.getElementById("booking_contact_phone");
    if (contactPhoneField && phone) {
      contactPhoneField.value = phone;
    }
  }
  selectInsurance(event2) {
    const button = event2.currentTarget;
    const insuranceType = button.dataset.insuranceType || "none";
    const insurancePrice = button.dataset.insurancePrice || "0";
    this.setInsuranceValues(insuranceType, insurancePrice);
    this.closeInsuranceModal();
  }
  setInsuranceValues(insuranceType, insurancePrice) {
    const insuranceTypeField = document.getElementById("booking_insurance_type");
    const insurancePriceField = document.getElementById("booking_insurance_price");
    if (insuranceTypeField) {
      insuranceTypeField.value = insuranceType;
    }
    if (insurancePriceField) {
      insurancePriceField.value = insurancePrice;
    }
  }
  // 
  selectInsuranceOption(event2) {
    const radio = event2.currentTarget;
    const insuranceType = radio.dataset.insuranceType || "none";
    const insurancePrice = radio.dataset.insurancePrice || "0";
    this.setInsuranceValues(insuranceType, insurancePrice);
    const allCards = document.querySelectorAll("[data-insurance-card]");
    allCards.forEach((card) => {
      card.classList.remove("border-yellow-400", "border-blue-400", "border-gray-400");
      card.classList.add("border-2", "border-gray-300");
      const checkmark = card.querySelector(".bg-yellow-400");
      if (checkmark) {
        checkmark.style.display = "none";
      }
    });
    const selectedCard = radio.closest("[data-insurance-card]");
    if (selectedCard) {
      selectedCard.classList.remove("border-gray-300");
      if (insuranceType === "standard") {
        selectedCard.classList.add("border-yellow-400");
      } else if (insuranceType === "premium") {
        selectedCard.classList.add("border-blue-400");
      } else {
        selectedCard.classList.add("border-gray-400");
      }
      const checkmark = selectedCard.querySelector(".bg-yellow-400");
      if (checkmark) {
        checkmark.style.display = "flex";
      }
    }
    this.updateTotalPrice();
  }
  // 
  updateTotalPrice() {
    if (!this.totalPriceAmountTarget) return;
    const basePrice = parseInt(this.totalPriceAmountTarget.dataset.basePrice || "0");
    const insurancePriceField = document.getElementById("booking_insurance_price");
    const insurancePrice = parseInt(insurancePriceField?.value || "0");
    const passengerCount = 1;
    const totalPrice = basePrice + insurancePrice * passengerCount;
    this.totalPriceAmountTarget.textContent = totalPrice.toString();
  }
  showTermsModal(event2) {
    event2.preventDefault();
    this.termsModalTarget.classList.remove("hidden");
  }
  closeTermsModal() {
    this.termsModalTarget.classList.add("hidden");
  }
  acceptTerms() {
    const termsCheckbox = document.getElementById("booking_accept_terms");
    if (termsCheckbox) {
      termsCheckbox.checked = true;
    }
    this.closeTermsModal();
    const insuranceTypeField = document.getElementById("booking_insurance_type");
    const insuranceType = insuranceTypeField?.value || "none";
    if (insuranceType === "none") {
      this.showInsuranceModal();
    } else {
      this.showConfirmModal();
    }
  }
  showInsuranceModal() {
    this.insuranceModalTarget.classList.remove("hidden");
  }
  closeInsuranceModal() {
    this.insuranceModalTarget.classList.add("hidden");
    this.showConfirmModal();
  }
  skipInsurance() {
    this.setInsuranceValues("none", "0");
    this.closeInsuranceModal();
  }
  showMemberModal() {
    this.updateMemberModalContent();
    this.memberModalTarget.classList.remove("hidden");
  }
  updateMemberModalContent() {
    const airlineTextElement = this.memberModalTarget.querySelector("[data-airline-names]");
    if (airlineTextElement && this.missingAirlines.length > 0) {
      const airlinesText = this.missingAirlines.join("\u3001");
      airlineTextElement.textContent = airlinesText;
    }
  }
  closeMemberModal() {
    this.memberModalTarget.classList.add("hidden");
    this.memberCheckCompleted = true;
    this.isSecondWait = true;
    this.showConfirmModal();
  }
  showConfirmModal() {
    this.confirmModalTarget.classList.remove("hidden");
    if (this.isSecondWait) {
      const waitTime = Math.floor(Math.random() * (1e4 - 5e3 + 1)) + 5e3;
      setTimeout(() => {
        this.submitForm();
      }, waitTime);
      return;
    }
    this.checkMembershipStatusFromDB().then((needsMemberRegistration) => {
      if (needsMemberRegistration) {
        this.closeConfirmModal();
        this.showMemberModal();
      } else {
        this.memberCheckCompleted = true;
        const waitTime = Math.floor(Math.random() * (1e4 - 5e3 + 1)) + 5e3;
        setTimeout(() => {
          this.submitForm();
        }, waitTime);
      }
    });
  }
  async checkMembershipStatusFromDB() {
    try {
      const urlParams = new URLSearchParams(window.location.search);
      const flightId = urlParams.get("flight_id");
      const returnFlightId = urlParams.get("return_flight_id");
      let url = `/api/check_membership?flight_id=${flightId}`;
      if (returnFlightId) {
        url += `&return_flight_id=${returnFlightId}`;
      }
      const response = await fetch(url, {
        headers: {
          "Accept": "application/json"
        }
      });
      if (!response.ok) {
        this.missingAirlines = [];
        return true;
      }
      const data2 = await response.json();
      this.missingAirlines = data2.missing_airlines || [];
      return !data2.is_member;
    } catch (error3) {
      console.error("\u68C0\u67E5\u4F1A\u5458\u72B6\u6001\u5931\u8D25:", error3);
      this.missingAirlines = [];
      return true;
    }
  }
  closeConfirmModal() {
    this.confirmModalTarget.classList.add("hidden");
  }
  submitForm() {
    const form = this.element.querySelector("form");
    if (form) {
      form.submit();
    }
  }
  handleSubmit(event2) {
    event2.preventDefault();
    const selectedPassenger = document.querySelector('input[name="booking[passenger_name]"]:checked');
    if (!selectedPassenger) {
      if (window.showToast) {
        window.showToast("\u8BF7\u5148\u9009\u62E9\u4E58\u673A\u4EBA");
      } else {
        alert("\u8BF7\u5148\u9009\u62E9\u4E58\u673A\u4EBA");
      }
      return;
    }
    this.memberCheckCompleted = false;
    this.isSecondWait = false;
    this.showTermsModal(event2);
  }
};

// app/javascript/controllers/coupon_controller.ts
var coupon_controller_default = class extends Controller {
  static {
    this.targets = ["modal"];
  }
  connect() {
    this.modalTarget.classList.remove("hidden");
  }
  claimCoupons() {
    alert("\u4F18\u60E0\u5238\u5DF2\u9886\u53D6\u6210\u529F\uFF01");
    this.closeModal();
  }
  closeModal() {
    this.modalTarget.classList.add("hidden");
  }
};

// app/javascript/controllers/destination_controller.ts
var destination_controller_default = class extends Controller {
  static {
    this.targets = [
      "tabContent",
      "tabs"
    ];
  }
  connect() {
    console.log("Destination controller connected");
  }
  disconnect() {
    console.log("Destination disconnected");
  }
  switchTab(event2) {
    const button = event2.currentTarget;
    const tabName = button.dataset.tab;
    if (!tabName) return;
    const allTabButtons = this.tabsTarget.querySelectorAll(".tab-btn");
    allTabButtons.forEach((btn) => {
      btn.classList.remove("text-gray-900", "border-gray-900");
      btn.classList.add("text-gray-500", "border-transparent");
    });
    button.classList.remove("text-gray-500", "border-transparent");
    button.classList.add("text-gray-900", "border-gray-900");
    this.tabContentTargets.forEach((content) => {
      if (content.dataset.tab === tabName) {
        content.classList.remove("hidden");
      } else {
        content.classList.add("hidden");
      }
    });
  }
};

// app/javascript/controllers/region_selector_controller.ts
var region_selector_controller_default = class extends Controller {
  static {
    this.targets = ["regionButton", "cityList", "searchInput", "searchResults", "searchResultsList", "noResults", "normalView"];
  }
  static {
    this.values = {
      availableDestinations: Array,
      allCities: Array
    };
  }
  connect() {
    console.log("RegionSelector connected");
    this.showRegion("\u70ED\u95E8\u76EE\u7684\u5730");
  }
  search(event2) {
    const input = event2.target;
    const query = input.value.trim().toLowerCase();
    if (query === "") {
      this.showNormalView();
      return;
    }
    const results = this.allCitiesValue.filter(
      (city) => city.name.toLowerCase().includes(query) || city.pinyin.toLowerCase().includes(query)
    );
    this.displaySearchResults(results);
  }
  clearSearch() {
    this.searchInputTarget.value = "";
    this.showNormalView();
  }
  displaySearchResults(results) {
    this.normalViewTarget.classList.add("hidden");
    if (this.hasSearchResultsTarget) {
      this.searchResultsTarget.classList.remove("hidden");
    }
    if (results.length === 0) {
      this.searchResultsListTarget.innerHTML = "";
      this.noResultsTarget.classList.remove("hidden");
    } else {
      this.noResultsTarget.classList.add("hidden");
      this.searchResultsListTarget.innerHTML = results.map((city) => `
        <div class="text-center py-3 px-2 bg-surface rounded-lg border border-border hover:border-primary hover:shadow-sm transition-all cursor-pointer"
             data-action="click->region-selector#selectCity"
             data-city-name="${city.name}"
             data-city-slug="${city.slug || ""}">
          <div class="text-sm font-medium text-foreground">${city.name}</div>
        </div>
      `).join("");
    }
  }
  showNormalView() {
    this.normalViewTarget.classList.remove("hidden");
    if (this.hasSearchResultsTarget) {
      this.searchResultsTarget.classList.add("hidden");
    }
  }
  selectRegion(event2) {
    const button = event2.currentTarget;
    const regionName = button.dataset.region;
    if (!regionName) return;
    this.regionButtonTargets.forEach((btn) => {
      if (btn === button) {
        btn.classList.add("text-foreground", "bg-white", "border-l-2", "border-primary", "font-medium");
        btn.classList.remove("text-muted");
      } else {
        btn.classList.remove("text-foreground", "bg-white", "border-l-2", "border-primary", "font-medium");
        btn.classList.add("text-muted");
      }
    });
    this.showRegion(regionName);
  }
  selectCity(event2) {
    const cityCard = event2.currentTarget;
    const cityName = cityCard.dataset.cityName;
    if (!cityName) return;
    if (this.availableDestinationsValue.includes(cityName)) {
      const slug = cityCard.dataset.citySlug;
      if (slug) {
        window.location.href = `/destinations/${slug}`;
      }
    } else {
      alert(`${cityName}\u7684\u8BE6\u7EC6\u4FE1\u606F\u5373\u5C06\u4E0A\u7EBF\uFF0C\u656C\u8BF7\u671F\u5F85\uFF01`);
    }
  }
  showRegion(regionName) {
    this.cityListTargets.forEach((list) => {
      if (list.dataset.region === regionName) {
        list.classList.remove("hidden");
      } else {
        list.classList.add("hidden");
      }
    });
  }
};

// app/javascript/controllers/hotel_search_controller.ts
var hotel_search_controller_default = class extends Controller {
  static {
    this.targets = [
      "searchModal",
      "searchInput",
      "searchDisplay",
      "hotSearchContent",
      "hotSearchIcon",
      "hotBrandContent",
      "hotBrandIcon",
      "hotLocationContent",
      "hotLocationIcon",
      "metroContent",
      "metroIcon",
      "airportContent",
      "airportIcon",
      "attractionContent",
      "attractionIcon",
      "themeContent",
      "themeIcon",
      "hospitalContent",
      "hospitalIcon",
      "universityContent",
      "universityIcon",
      "cityInput",
      "checkInInput",
      "checkOutInput",
      "roomsInput",
      "adultsInput",
      "childrenInput",
      "minPriceInput",
      "maxPriceInput",
      "starsInput"
    ];
  }
  connect() {
    console.log("HotelSearch connected");
    document.addEventListener("city-selector:city-selected-for-hotel", this.handleCityUpdate.bind(this));
    document.addEventListener("hotel-date-picker:dates-selected", this.handleDateUpdate.bind(this));
    document.addEventListener("hotel-guest-selector:guests-updated", this.handleGuestUpdate.bind(this));
    document.addEventListener("hotel-price-filter:filter-updated", this.handlePriceFilterUpdate.bind(this));
  }
  disconnect() {
    console.log("HotelSearch disconnected");
    document.removeEventListener("city-selector:city-selected-for-hotel", this.handleCityUpdate.bind(this));
    document.removeEventListener("hotel-date-picker:dates-selected", this.handleDateUpdate.bind(this));
    document.removeEventListener("hotel-guest-selector:guests-updated", this.handleGuestUpdate.bind(this));
    document.removeEventListener("hotel-price-filter:filter-updated", this.handlePriceFilterUpdate.bind(this));
  }
  // Handle city selection update from city-selector
  handleCityUpdate(event2) {
    const customEvent = event2;
    const { cityName } = customEvent.detail;
    console.log("HotelSearch: Received city update:", cityName);
    const url = new URL(window.location.href);
    url.searchParams.set("city", cityName);
    console.log("HotelSearch: Reloading page with new city:", cityName);
    window.location.href = url.toString();
  }
  // Handle date selection update from hotel-date-picker
  handleDateUpdate(event2) {
    const customEvent = event2;
    const { checkIn, checkOut } = customEvent.detail;
    console.log("HotelSearch: Received date update:", { checkIn, checkOut });
    if (this.hasCheckInInputTarget) {
      this.checkInInputTarget.value = checkIn;
      console.log("HotelSearch: Updated check-in to:", checkIn);
    }
    if (this.hasCheckOutInputTarget) {
      this.checkOutInputTarget.value = checkOut;
      console.log("HotelSearch: Updated check-out to:", checkOut);
    }
  }
  // Handle guest selection update from hotel-guest-selector
  handleGuestUpdate(event2) {
    const customEvent = event2;
    const { rooms, adults, children } = customEvent.detail;
    console.log("HotelSearch: Received guest update:", { rooms, adults, children });
    if (this.hasRoomsInputTarget) {
      this.roomsInputTarget.value = rooms.toString();
      console.log("HotelSearch: Updated rooms to:", rooms);
    }
    if (this.hasAdultsInputTarget) {
      this.adultsInputTarget.value = adults.toString();
      console.log("HotelSearch: Updated adults to:", adults);
    }
    if (this.hasChildrenInputTarget) {
      this.childrenInputTarget.value = children.toString();
      console.log("HotelSearch: Updated children to:", children);
    }
  }
  // Handle price/star filter update from hotel-price-filter
  handlePriceFilterUpdate(event2) {
    const customEvent = event2;
    const { minPrice, maxPrice, stars } = customEvent.detail;
    console.log("HotelSearch: Received price filter update:", { minPrice, maxPrice, stars });
    if (this.hasMinPriceInputTarget) {
      this.minPriceInputTarget.value = minPrice > 0 ? minPrice.toString() : "";
      console.log("HotelSearch: Updated minPrice to:", minPrice);
    }
    if (this.hasMaxPriceInputTarget) {
      this.maxPriceInputTarget.value = maxPrice > 0 && maxPrice < 3e3 ? maxPrice.toString() : "";
      console.log("HotelSearch: Updated maxPrice to:", maxPrice < 3e3 ? maxPrice : "empty (no limit)");
    }
    if (this.hasStarsInputTarget) {
      this.starsInputTarget.value = stars > 0 ? stars.toString() : "";
      console.log("HotelSearch: Updated stars to:", stars);
    }
  }
  openSearchModal() {
    this.searchModalTarget.classList.remove("hidden");
    setTimeout(() => {
      this.searchInputTarget.focus();
    }, 100);
  }
  closeSearchModal() {
    this.searchModalTarget.classList.add("hidden");
  }
  submitSearch() {
    const form = this.searchInputTarget.closest("form");
    if (form) {
      form.requestSubmit();
    }
  }
  handleSearchInputKeypress(event2) {
    if (event2.key === "Enter") {
      event2.preventDefault();
      this.submitSearch();
    }
  }
  toggleSection(event2) {
    const button = event2.currentTarget;
    const section = button.dataset.section;
    if (!section) return;
    const contentTarget = `${section}ContentTarget`;
    const iconTarget = `${section}IconTarget`;
    const content = this[contentTarget];
    const icon = this[iconTarget];
    if (content && icon) {
      content.classList.toggle("hidden");
      icon.classList.toggle("rotate-180");
    }
  }
  openCitySelector() {
    alert("\u57CE\u5E02\u9009\u62E9\u529F\u80FD\uFF1A\n\n\u5728\u5B8C\u6574\u7248\u672C\u4E2D\uFF0C\u8FD9\u91CC\u4F1A\u6253\u5F00\u57CE\u5E02\u9009\u62E9\u5668\u3002\n\n\u5F53\u524D\u57CE\u5E02\uFF1A\u6DF1\u5733\u5E02");
  }
  openGuestSelector() {
    const rooms = prompt("\u8BF7\u8F93\u5165\u623F\u95F4\u6570\u91CF", "1");
    const adults = prompt("\u8BF7\u8F93\u5165\u6210\u4EBA\u6570\u91CF", "1");
    const children = prompt("\u8BF7\u8F93\u5165\u513F\u7AE5\u6570\u91CF", "0");
    if (rooms && adults) {
      const url = new URL(window.location.href);
      url.searchParams.set("rooms", rooms);
      url.searchParams.set("adults", adults);
      url.searchParams.set("children", children || "0");
      window.location.href = url.toString();
    }
  }
  getCurrentLocation() {
    if (!navigator.geolocation) {
      alert("\u60A8\u7684\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u5730\u7406\u5B9A\u4F4D\u529F\u80FD");
      return;
    }
    const button = event?.currentTarget;
    if (button) {
      button.disabled = true;
      button.classList.add("opacity-50");
    }
    navigator.geolocation.getCurrentPosition(
      (position) => {
        const { latitude, longitude } = position.coords;
        console.log("Got location:", { latitude, longitude });
        alert(`\u83B7\u53D6\u5230\u60A8\u7684\u4F4D\u7F6E\uFF1A
\u7EAC\u5EA6: ${latitude.toFixed(6)}
\u7ECF\u5EA6: ${longitude.toFixed(6)}

\u5728\u5B8C\u6574\u7248\u672C\u4E2D\uFF0C\u8FD9\u91CC\u4F1A\u81EA\u52A8\u9009\u62E9\u6700\u8FD1\u7684\u57CE\u5E02`);
        if (button) {
          button.disabled = false;
          button.classList.remove("opacity-50");
        }
      },
      (error3) => {
        console.error("Geolocation error:", error3);
        let message = "\u65E0\u6CD5\u83B7\u53D6\u60A8\u7684\u4F4D\u7F6E";
        switch (error3.code) {
          case error3.PERMISSION_DENIED:
            message = "\u60A8\u62D2\u7EDD\u4E86\u4F4D\u7F6E\u6743\u9650\u8BF7\u6C42\u3002\u8BF7\u5728\u6D4F\u89C8\u5668\u8BBE\u7F6E\u4E2D\u5141\u8BB8\u8BBF\u95EE\u4F4D\u7F6E\u4FE1\u606F\u3002";
            break;
          case error3.POSITION_UNAVAILABLE:
            message = "\u4F4D\u7F6E\u4FE1\u606F\u4E0D\u53EF\u7528\uFF0C\u8BF7\u68C0\u67E5\u60A8\u7684\u7F51\u7EDC\u8FDE\u63A5\u3002";
            break;
          case error3.TIMEOUT:
            message = "\u83B7\u53D6\u4F4D\u7F6E\u4FE1\u606F\u8D85\u65F6\uFF0C\u8BF7\u91CD\u8BD5\u3002";
            break;
        }
        alert(message);
        if (button) {
          button.disabled = false;
          button.classList.remove("opacity-50");
        }
      },
      {
        enableHighAccuracy: true,
        timeout: 1e4,
        maximumAge: 0
      }
    );
  }
  selectOption(event2) {
    const button = event2.currentTarget;
    const searchTerm = button.dataset.searchTerm;
    if (!searchTerm) return;
    console.log("HotelSearch: Selected option:", searchTerm);
    this.searchInputTarget.value = searchTerm;
    if (this.hasSearchDisplayTarget) {
      this.searchDisplayTarget.value = searchTerm;
      console.log("HotelSearch: Updated search display to:", searchTerm);
    }
    this.closeSearchModal();
    this.submitSearch();
  }
};

// app/javascript/controllers/hotel_detail_controller.ts
var hotel_detail_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.currentTab = "cover";
  }
  static {
    this.targets = [
      "tabButton",
      "tabContent"
    ];
  }
  static {
    this.values = {
      // Add your values here, e.g.:
      // roomId: String,
      // userId: String
    };
  }
  connect() {
    console.log("HotelDetail connected");
  }
  disconnect() {
    console.log("HotelDetail disconnected");
  }
  // Tab switching functionality
  switchTab(event2) {
    const button = event2.currentTarget;
    const tabName = button.dataset.tab;
    if (!tabName || tabName === this.currentTab) return;
    this.tabButtonTargets.forEach((btn) => {
      if (btn.dataset.tab === tabName) {
        btn.classList.remove("text-gray-500", "border-transparent");
        btn.classList.add("text-gray-900", "border-orange-500");
      } else {
        btn.classList.remove("text-gray-900", "border-orange-500");
        btn.classList.add("text-gray-500", "border-transparent");
      }
    });
    this.tabContentTargets.forEach((content) => {
      if (content.dataset.tab === tabName) {
        content.classList.remove("hidden");
        content.classList.add("block");
      } else {
        content.classList.remove("block");
        content.classList.add("hidden");
      }
    });
    this.currentTab = tabName;
  }
  // FORMS: Turbo + Turbo Streams handle everything automatically
  // - Forms submit via AJAX (Turbo Drive)
  // - Server responds with format.turbo_stream
  // - Turbo Streams update DOM automatically
  // - NO manual form handling needed in Stimulus
  //
  // Use Stimulus for:
  // - UI interactions (toggle, show/hide)
  // - Input validation/formatting
  // - Dynamic form fields
};

// app/javascript/controllers/service_grid_controller.ts
var service_grid_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.currentPage = 0;
    this.touchStartX = 0;
    this.touchEndX = 0;
    this.minSwipeDistance = 50;
  }
  static {
    this.targets = ["page", "dot"];
  }
  // 
  connect() {
    this.showPage(0);
    this.element.addEventListener("touchstart", this.handleTouchStart.bind(this), { passive: true });
    this.element.addEventListener("touchend", this.handleTouchEnd.bind(this), { passive: true });
  }
  disconnect() {
    this.element.removeEventListener("touchstart", this.handleTouchStart.bind(this));
    this.element.removeEventListener("touchend", this.handleTouchEnd.bind(this));
  }
  // 
  handleTouchStart(event2) {
    this.touchStartX = event2.changedTouches[0].screenX;
  }
  // 
  handleTouchEnd(event2) {
    this.touchEndX = event2.changedTouches[0].screenX;
    this.handleSwipe();
  }
  // 
  handleSwipe() {
    const swipeDistance = this.touchEndX - this.touchStartX;
    if (swipeDistance < -this.minSwipeDistance) {
      this.nextPage();
    } else if (swipeDistance > this.minSwipeDistance) {
      this.prevPage();
    }
  }
  goToPage(event2) {
    const target = event2.currentTarget;
    const pageIndex = parseInt(target.getAttribute("data-page") || "0", 10);
    if (pageIndex >= 0 && pageIndex < this.pageTargets.length) {
      this.showPage(pageIndex);
    }
  }
  nextPage() {
    const nextIndex = (this.currentPage + 1) % this.pageTargets.length;
    this.showPage(nextIndex);
  }
  prevPage() {
    const prevIndex = (this.currentPage - 1 + this.pageTargets.length) % this.pageTargets.length;
    this.showPage(prevIndex);
  }
  showPage(pageIndex) {
    this.pageTargets.forEach((page, index) => {
      if (index === pageIndex) {
        page.classList.remove("hidden");
      } else {
        page.classList.add("hidden");
      }
    });
    this.dotTargets.forEach((dot, index) => {
      const button = dot;
      if (index === pageIndex) {
        button.classList.remove("bg-gray-300", "w-1.5", "h-1.5");
        button.classList.add("w-6", "h-1");
        button.style.background = "#FFD700";
      } else {
        button.classList.remove("w-6", "h-1");
        button.classList.add("bg-gray-300", "w-1.5", "h-1.5");
        button.style.background = "";
      }
    });
    this.currentPage = pageIndex;
  }
};

// app/javascript/controllers/passenger_selector_controller.ts
var passenger_selector_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.adults = 0;
    this.children = 0;
    this.infants = 0;
    this.selectedPassengerIds = /* @__PURE__ */ new Set();
    this.selectedPassengerNames = /* @__PURE__ */ new Map();
    this.hasSelection = false;
    // Backup of confirmed state
    this.confirmedAdults = 0;
    this.confirmedChildren = 0;
    this.confirmedInfants = 0;
    this.confirmedPassengerIds = /* @__PURE__ */ new Set();
    this.confirmedPassengerNames = /* @__PURE__ */ new Map();
  }
  static {
    this.targets = [
      "modal",
      "modalTitle",
      "selectedDisplay",
      "passengerTab",
      "countTab",
      "passengerListPanel",
      "countPanel",
      "adultsCount",
      "childrenCount",
      "infantsCount",
      "count",
      "name",
      "idType",
      "idNumber",
      "phone",
      "driverName",
      "driverIdNumber",
      "contactPhone"
    ];
  }
  static {
    this.values = {
      selectedId: Number
    };
  }
  connect() {
    this.loadFromLocalStorage();
    if (this.hasSelection) {
      this.updateDisplay();
    }
  }
  openModal(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    if (!this.hasModalTarget) return;
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
    if (this.hasPassengerTabTarget && this.hasCountTabTarget) {
      this.switchToPassengerTab(event2);
    }
    this.highlightSelectedPassenger();
  }
  closeModal(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    if (!this.hasModalTarget) return;
    if (this.hasPassengerListPanelTarget) {
      this.adults = this.confirmedAdults;
      this.children = this.confirmedChildren;
      this.infants = this.confirmedInfants;
      this.selectedPassengerIds = new Set(this.confirmedPassengerIds);
      this.selectedPassengerNames = new Map(this.confirmedPassengerNames);
      const checkboxes = this.passengerListPanelTarget.querySelectorAll('input[type="checkbox"]');
      checkboxes.forEach((checkbox) => {
        const cb = checkbox;
        const passengerId = parseInt(cb.value);
        cb.checked = this.confirmedPassengerIds.has(passengerId);
      });
      this.updateCounters();
    }
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  stopPropagation(event2) {
    event2.stopPropagation();
  }
  switchToPassengerTab(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    if (this.hasPassengerTabTarget && this.hasCountTabTarget) {
      this.passengerTabTarget.classList.add("border-blue-500");
      this.passengerTabTarget.classList.remove("border-transparent");
      this.countTabTarget.classList.remove("border-blue-500");
      this.countTabTarget.classList.add("border-transparent");
    }
    if (this.hasPassengerListPanelTarget && this.hasCountPanelTarget) {
      this.passengerListPanelTarget.classList.remove("hidden");
      this.countPanelTarget.classList.add("hidden");
    }
  }
  switchToCountTab(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    if (this.hasPassengerTabTarget && this.hasCountTabTarget) {
      this.countTabTarget.classList.add("border-blue-500");
      this.countTabTarget.classList.remove("border-transparent");
      this.passengerTabTarget.classList.remove("border-blue-500");
      this.passengerTabTarget.classList.add("border-transparent");
    }
    if (this.hasPassengerListPanelTarget && this.hasCountPanelTarget) {
      this.countPanelTarget.classList.remove("hidden");
      this.passengerListPanelTarget.classList.add("hidden");
    }
  }
  togglePassenger(event2) {
    const checkbox = event2.target;
    const passengerId = parseInt(checkbox.value);
    const passengerName = checkbox.dataset.passengerName || "";
    if (checkbox.checked) {
      this.selectedPassengerIds.add(passengerId);
      this.selectedPassengerNames.set(passengerId, passengerName);
    } else {
      this.selectedPassengerIds.delete(passengerId);
      this.selectedPassengerNames.delete(passengerId);
    }
    const selectedCount = this.selectedPassengerNames.size;
    this.adults = selectedCount;
    this.updateCounters();
  }
  incrementAdults(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    if (this.adults < 9) {
      this.adults++;
      this.updateCounters();
    }
  }
  decrementAdults(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    if (this.adults > 0) {
      this.adults--;
      this.updateCounters();
    }
  }
  incrementChildren(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    if (this.children < 8) {
      this.children++;
      this.updateCounters();
    }
  }
  decrementChildren(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    if (this.children > 0) {
      this.children--;
      this.updateCounters();
    }
  }
  incrementInfants(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    if (this.infants < this.adults) {
      this.infants++;
      this.updateCounters();
    }
  }
  decrementInfants(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    if (this.infants > 0) {
      this.infants--;
      this.updateCounters();
    }
  }
  reset(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    this.adults = 0;
    this.children = 0;
    this.infants = 0;
    this.selectedPassengerIds.clear();
    this.selectedPassengerNames.clear();
    this.hasSelection = false;
    this.confirmedAdults = 0;
    this.confirmedChildren = 0;
    this.confirmedInfants = 0;
    this.confirmedPassengerIds.clear();
    this.confirmedPassengerNames.clear();
    localStorage.removeItem("passenger_selection");
    if (this.hasPassengerListPanelTarget) {
      const checkboxes = this.passengerListPanelTarget.querySelectorAll('input[type="checkbox"]');
      checkboxes.forEach((checkbox) => {
        checkbox.checked = false;
      });
    }
    this.updateCounters();
    this.updateDisplay();
  }
  confirm(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    if (this.hasCountPanelTarget) {
      const isCountPanelActive = !this.countPanelTarget.classList.contains("hidden");
      if (isCountPanelActive) {
        this.selectedPassengerIds.clear();
        this.selectedPassengerNames.clear();
        if (this.hasPassengerListPanelTarget) {
          const checkboxes = this.passengerListPanelTarget.querySelectorAll('input[type="checkbox"]');
          checkboxes.forEach((checkbox) => {
            checkbox.checked = false;
          });
        }
      } else {
        this.adults = 0;
        this.children = 0;
        this.infants = 0;
      }
    }
    this.confirmedAdults = this.adults;
    this.confirmedChildren = this.children;
    this.confirmedInfants = this.infants;
    this.confirmedPassengerIds = new Set(this.selectedPassengerIds);
    this.confirmedPassengerNames = new Map(this.selectedPassengerNames);
    this.hasSelection = true;
    this.saveToLocalStorage();
    this.updateDisplay();
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  toggleEdit() {
    const event2 = new Event("click");
    this.openModal(event2);
  }
  selectPassenger(event2) {
    const target = event2.currentTarget;
    if (target.tagName === "DIV" && target.hasAttribute("data-passenger-id")) {
      const passengerId = target.getAttribute("data-passenger-id");
      const passengerName = target.getAttribute("data-passenger-name") || "";
      const passengerIdType = target.getAttribute("data-passenger-id-type") || "";
      const passengerIdNumber = target.getAttribute("data-passenger-id-number") || "";
      const passengerPhone = target.getAttribute("data-passenger-phone") || "";
      if (this.hasNameTarget) {
        this.nameTarget.textContent = passengerName;
      }
      if (this.hasIdTypeTarget) {
        this.idTypeTarget.textContent = passengerIdType;
      }
      if (this.hasIdNumberTarget) {
        this.idNumberTarget.textContent = passengerIdNumber;
      }
      if (this.hasPhoneTarget) {
        this.phoneTarget.textContent = passengerPhone || "\u672A\u586B\u5199";
      }
      if (this.hasDriverNameTarget) {
        const driverNameField = this.driverNameTarget;
        driverNameField.value = passengerName;
      }
      if (this.hasDriverIdNumberTarget) {
        const driverIdNumberField = this.driverIdNumberTarget;
        driverIdNumberField.value = passengerIdNumber;
      }
      if (this.hasContactPhoneTarget) {
        const contactPhoneField = this.contactPhoneTarget;
        contactPhoneField.value = passengerPhone;
      }
      if (this.hasSelectedIdValue && passengerId) {
        this.selectedIdValue = parseInt(passengerId);
      }
      this.modalTarget.classList.add("hidden");
      document.body.style.overflow = "";
      return;
    }
    this.togglePassenger(event2);
  }
  decrease(event2) {
    this.decrementAdults(event2);
  }
  increase(event2) {
    this.incrementAdults(event2);
  }
  updateCounters() {
    if (this.hasAdultsCountTarget) {
      this.adultsCountTarget.textContent = this.adults.toString();
    }
    if (this.hasChildrenCountTarget) {
      this.childrenCountTarget.textContent = this.children.toString();
    }
    if (this.hasInfantsCountTarget) {
      this.infantsCountTarget.textContent = this.infants.toString();
    }
    if (this.hasCountTarget) {
      this.countTarget.textContent = this.adults.toString();
    }
    this.updateModalTitle();
  }
  updateModalTitle() {
    if (this.hasModalTitleTarget) {
      this.modalTitleTarget.textContent = `\u5F53\u524D\u5DF2\u9009: ${this.adults}\u6210\u4EBA ${this.children}\u513F\u7AE5 ${this.infants}\u5A74\u513F`;
    }
  }
  updateDisplay() {
    if (!this.hasSelectedDisplayTarget) return;
    const total = this.confirmedAdults + this.confirmedChildren + this.confirmedInfants;
    this.selectedDisplayTargets.forEach((displayContainer) => {
      const mainDiv = displayContainer.querySelector(".text-base");
      const subtitleDiv = displayContainer.querySelector(".text-sm");
      if (mainDiv && subtitleDiv) {
        if (this.confirmedPassengerNames.size > 0) {
          const names = Array.from(this.confirmedPassengerNames.values());
          mainDiv.textContent = names.join("\u3001");
          subtitleDiv.textContent = `${names.length}\u4F4D\u4E58\u673A\u4EBA`;
        } else if (this.hasSelection && total > 0) {
          mainDiv.textContent = `${this.confirmedAdults}\u6210\u4EBA ${this.confirmedChildren}\u513F\u7AE5 ${this.confirmedInfants}\u5A74\u513F`;
          subtitleDiv.textContent = `\u5171${total}\u4F4D\u4E58\u673A\u4EBA`;
        } else {
          mainDiv.textContent = "\u9009\u62E9\u4E58\u673A\u4EBA";
          subtitleDiv.textContent = "\u5FEB\u901F\u627E\u5230\u4F4E\u4EF7\u7968";
        }
      }
    });
    this.updateModalTitle();
  }
  saveToLocalStorage() {
    const state = {
      adults: this.confirmedAdults,
      children: this.confirmedChildren,
      infants: this.confirmedInfants,
      passengerIds: Array.from(this.confirmedPassengerIds),
      passengerNames: Array.from(this.confirmedPassengerNames.entries()),
      hasSelection: this.hasSelection
    };
    localStorage.setItem("passenger_selection", JSON.stringify(state));
  }
  loadFromLocalStorage() {
    const savedState = localStorage.getItem("passenger_selection");
    if (savedState) {
      try {
        const state = JSON.parse(savedState);
        this.adults = state.adults || 0;
        this.children = state.children || 0;
        this.infants = state.infants || 0;
        this.confirmedAdults = state.adults || 0;
        this.confirmedChildren = state.children || 0;
        this.confirmedInfants = state.infants || 0;
        this.selectedPassengerIds = new Set(state.passengerIds || []);
        this.confirmedPassengerIds = new Set(state.passengerIds || []);
        this.selectedPassengerNames = new Map(state.passengerNames || []);
        this.confirmedPassengerNames = new Map(state.passengerNames || []);
        this.hasSelection = state.hasSelection || false;
      } catch (e) {
        console.error("Failed to load passenger selection from localStorage:", e);
      }
    }
  }
  highlightSelectedPassenger() {
    if (!this.hasSelectedIdValue) return;
    const passengerDivs = this.element.querySelectorAll("[data-passenger-id]");
    passengerDivs.forEach((div) => {
      const passengerId = parseInt(div.getAttribute("data-passenger-id") || "0");
      const isSelected = passengerId === this.selectedIdValue;
      if (isSelected) {
        div.classList.add("border-blue-500", "bg-blue-50");
        div.classList.remove("border-gray-200");
      } else {
        div.classList.remove("border-blue-500", "bg-blue-50");
        if (!div.classList.contains("border")) {
        }
      }
      const indicatorCircle = div.querySelector(".w-5.h-5.rounded-full");
      if (indicatorCircle) {
        if (isSelected) {
          indicatorCircle.classList.add("border-blue-500", "bg-blue-500");
          indicatorCircle.classList.remove("border-gray-300");
          let checkmark = indicatorCircle.querySelector("svg");
          if (!checkmark) {
            checkmark = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            checkmark.setAttribute("class", "w-3 h-3 text-white");
            checkmark.setAttribute("fill", "currentColor");
            checkmark.setAttribute("viewBox", "0 0 20 20");
            const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
            path.setAttribute("fill-rule", "evenodd");
            path.setAttribute("d", "M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z");
            path.setAttribute("clip-rule", "evenodd");
            checkmark.appendChild(path);
            indicatorCircle.appendChild(checkmark);
          }
        } else {
          indicatorCircle.classList.remove("border-blue-500", "bg-blue-500");
          indicatorCircle.classList.add("border-gray-300");
          const checkmark = indicatorCircle.querySelector("svg");
          if (checkmark) {
            checkmark.remove();
          }
        }
      }
    });
  }
};

// app/javascript/controllers/cabin_selector_controller.ts
var cabin_selector_controller_default = class extends Controller {
  static {
    this.targets = ["button", "hiddenInput"];
  }
  static {
    this.values = {
      selected: String
    };
  }
  connect() {
    console.log("CabinSelector connected");
    const currentValue = this.hiddenInputTargets[0]?.value;
    const cabinValue = currentValue && currentValue !== "" ? currentValue : "all";
    this.selectCabin(cabinValue);
  }
  selectCabin(cabinType) {
    this.selectedValue = cabinType;
    this.hiddenInputTargets.forEach((input) => {
      input.value = cabinType;
    });
    this.buttonTargets.forEach((button) => {
      const buttonType = button.dataset.cabinType;
      if (buttonType === cabinType) {
        button.classList.add("bg-white", "shadow-sm", "text-gray-900");
        button.classList.remove("text-gray-600");
      } else {
        button.classList.remove("bg-white", "shadow-sm", "text-gray-900");
        button.classList.add("text-gray-600");
      }
    });
  }
  select(event2) {
    const button = event2.currentTarget;
    const cabinType = button.dataset.cabinType;
    if (cabinType) {
      if (this.selectedValue === cabinType) {
        return;
      }
      this.selectCabin(cabinType);
    }
  }
};

// app/javascript/controllers/trip_type_controller.ts
var trip_type_controller_default = class extends Controller {
  static {
    this.targets = [
      "tab",
      "returnDateSection",
      "tripTypeInput",
      "returnDateInput",
      "oneWayRoundTripForm",
      "multiCityForm",
      "promotionBanner"
    ];
  }
  static {
    this.values = {
      currentType: { type: String, default: "one_way" }
    };
  }
  connect() {
    console.log("TripType connected");
    this.updateUI();
  }
  // 
  selectType(event2) {
    const button = event2.currentTarget;
    const tripType = button.dataset.tripType || "one_way";
    this.currentTypeValue = tripType;
    this.updateUI();
    if (tripType === "round_trip" && this.hasReturnDateInputTarget) {
      if (!this.returnDateInputTarget.value) {
        const departureDateInput = document.querySelector('[data-date-picker-target="dateInput"]');
        if (departureDateInput && departureDateInput.value) {
          const departureDate = new Date(departureDateInput.value);
          departureDate.setDate(departureDate.getDate() + 1);
          const returnDateStr = this.formatDate(departureDate);
          this.returnDateInputTarget.value = returnDateStr;
          const returnDateController = this.application.getControllerForElementAndIdentifier(
            this.element,
            "return-date-picker"
          );
          if (returnDateController && "currentDateValue" in returnDateController) {
            returnDateController.currentDateValue = returnDateStr;
          }
        }
      }
    }
  }
  // UI
  updateUI() {
    this.tabTargets.forEach((tab) => {
      const isActive = tab.dataset.tripType === this.currentTypeValue;
      if (isActive) {
        tab.classList.remove("text-gray-500");
        tab.classList.add("font-bold", "border-b-2", "border-black");
      } else {
        tab.classList.remove("font-bold", "border-b-2", "border-black");
        tab.classList.add("text-gray-500");
      }
    });
    if (this.hasTripTypeInputTarget) {
      this.tripTypeInputTarget.value = this.currentTypeValue;
    }
    if (this.hasReturnDateSectionTarget) {
      if (this.currentTypeValue === "round_trip") {
        this.returnDateSectionTarget.classList.remove("hidden");
      } else {
        this.returnDateSectionTarget.classList.add("hidden");
      }
    }
    if (this.hasOneWayRoundTripFormTarget && this.hasMultiCityFormTarget) {
      if (this.currentTypeValue === "multi_city") {
        this.oneWayRoundTripFormTarget.classList.add("hidden");
        this.multiCityFormTarget.classList.remove("hidden");
        const multiCityEvent = new CustomEvent("trip-type:multi-city-shown", {
          bubbles: true
        });
        this.element.dispatchEvent(multiCityEvent);
      } else {
        this.oneWayRoundTripFormTarget.classList.remove("hidden");
        this.multiCityFormTarget.classList.add("hidden");
      }
    }
    if (this.hasPromotionBannerTarget) {
      if (this.currentTypeValue === "multi_city") {
        this.promotionBannerTarget.classList.add("hidden");
      } else {
        this.promotionBannerTarget.classList.remove("hidden");
      }
    }
  }
  formatDate(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    return `${year}-${month}-${day}`;
  }
};

// app/javascript/controllers/return_date_picker_controller.ts
var return_date_picker_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedDateObj = null;
  }
  static {
    this.targets = ["modal", "selectedDate", "dateInput"];
  }
  static {
    this.values = {
      currentDate: String,
      minDate: String
    };
  }
  connect() {
    console.log("ReturnDatePicker connected");
    if (this.currentDateValue) {
      this.selectedDateObj = new Date(this.currentDateValue);
    } else if (this.minDateValue) {
      const minDate = new Date(this.minDateValue);
      minDate.setDate(minDate.getDate() + 1);
      this.selectedDateObj = minDate;
      this.currentDateValue = this.formatDate(this.selectedDateObj);
    }
    if (this.selectedDateObj) {
      this.updateDisplayedDate();
    }
  }
  openModal() {
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  closeModal() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  selectDate(event2) {
    const button = event2.currentTarget;
    const dateStr = button.dataset.date || "";
    if (!dateStr) return;
    this.selectedDateObj = new Date(dateStr);
    this.currentDateValue = dateStr;
    this.updateDisplayedDate();
    this.dateInputTarget.value = dateStr;
    this.closeModal();
  }
  updateDisplayedDate() {
    if (!this.selectedDateObj) return;
    const month = this.selectedDateObj.getMonth() + 1;
    const day = this.selectedDateObj.getDate();
    const dayName = this.getDayName(this.selectedDateObj);
    this.selectedDateTarget.innerHTML = `
      ${month}<span class="text-lg font-medium mx-0.5">\u6708</span>${day}<span class="text-lg font-medium ml-0.5 mr-2">\u65E5</span>
      <span class="text-base text-gray-500 font-medium">${dayName}</span>
    `;
  }
  getDayName(date) {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    const targetDate = new Date(date);
    targetDate.setHours(0, 0, 0, 0);
    const diffTime = targetDate.getTime() - today.getTime();
    const diffDays = Math.round(diffTime / (1e3 * 60 * 60 * 24));
    if (diffDays === 0) return "\u4ECA\u5929";
    if (diffDays === 1) return "\u660E\u5929";
    if (diffDays === 2) return "\u540E\u5929";
    const weekdays = ["\u5468\u65E5", "\u5468\u4E00", "\u5468\u4E8C", "\u5468\u4E09", "\u5468\u56DB", "\u5468\u4E94", "\u5468\u516D"];
    return weekdays[date.getDay()];
  }
  formatDate(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    return `${year}-${month}-${day}`;
  }
};

// app/javascript/controllers/round_trip_selector_controller.ts
var round_trip_selector_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedOutboundIdValue = "";
    this.selectedReturnIdValue = "";
    this.outboundPrice = 0;
    this.returnPrice = 0;
  }
  static {
    this.targets = ["outboundFlight", "returnFlight", "submitButton", "selectedOutboundId", "selectedReturnId", "totalPrice"];
  }
  connect() {
    this.updateSubmitButton();
  }
  selectOutbound(event2) {
    event2.preventDefault();
    const card = event2.currentTarget.closest("[data-flight-id]");
    if (!card) return;
    const flightId = card.dataset.flightId || "";
    const price = parseFloat(card.dataset.price || "0");
    this.outboundFlightTargets.forEach((el) => {
      el.classList.remove("ring-2", "ring-blue-500", "bg-blue-50");
    });
    card.classList.add("ring-2", "ring-blue-500", "bg-blue-50");
    this.selectedOutboundIdValue = flightId;
    this.outboundPrice = price;
    if (this.hasSelectedOutboundIdTarget) {
      this.selectedOutboundIdTarget.value = flightId;
    }
    this.updateSubmitButton();
  }
  selectReturn(event2) {
    event2.preventDefault();
    const card = event2.currentTarget.closest("[data-flight-id]");
    if (!card) return;
    const flightId = card.dataset.flightId || "";
    const price = parseFloat(card.dataset.price || "0");
    this.returnFlightTargets.forEach((el) => {
      el.classList.remove("ring-2", "ring-blue-500", "bg-blue-50");
    });
    card.classList.add("ring-2", "ring-blue-500", "bg-blue-50");
    this.selectedReturnIdValue = flightId;
    this.returnPrice = price;
    if (this.hasSelectedReturnIdTarget) {
      this.selectedReturnIdTarget.value = flightId;
    }
    this.updateSubmitButton();
  }
  updateSubmitButton() {
    if (!this.hasSubmitButtonTarget) return;
    const bothSelected = this.selectedOutboundIdValue && this.selectedReturnIdValue;
    if (bothSelected) {
      this.submitButtonTarget.classList.remove("opacity-50", "cursor-not-allowed");
      this.submitButtonTarget.classList.add("cursor-pointer");
      this.submitButtonTarget.removeAttribute("disabled");
      if (this.hasTotalPriceTarget) {
        const total = this.outboundPrice + this.returnPrice;
        this.totalPriceTarget.textContent = `\xA5${total.toFixed(0)}`;
      }
    } else {
      this.submitButtonTarget.classList.add("opacity-50", "cursor-not-allowed");
      this.submitButtonTarget.classList.remove("cursor-pointer");
      this.submitButtonTarget.setAttribute("disabled", "disabled");
      if (this.hasTotalPriceTarget) {
        this.totalPriceTarget.textContent = "\u8BF7\u9009\u62E9\u53BB\u7A0B\u548C\u8FD4\u7A0B\u822A\u73ED";
      }
    }
  }
  submit(event2) {
    if (!this.selectedOutboundIdValue || !this.selectedReturnIdValue) {
      event2.preventDefault();
      alert("\u8BF7\u9009\u62E9\u53BB\u7A0B\u548C\u8FD4\u7A0B\u822A\u73ED");
      return;
    }
  }
};

// app/javascript/controllers/train_search_controller.ts
var train_search_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedDateObj = /* @__PURE__ */ new Date();
  }
  static {
    this.targets = [
      "departureCity",
      "arrivalCity",
      "departureCityInput",
      "arrivalCityInput",
      "selectedDate",
      "dateInput",
      "studentTicket",
      "highSpeedOnly"
    ];
  }
  static {
    this.values = {
      departureCity: String,
      arrivalCity: String,
      date: String
    };
  }
  connect() {
    console.log("TrainSearch connected");
    if (!this.departureCityValue) this.departureCityValue = "\u5317\u4EAC\u5E02";
    if (!this.arrivalCityValue) this.arrivalCityValue = "\u676D\u5DDE\u5E02";
    if (!this.dateValue) {
      this.selectedDateObj = /* @__PURE__ */ new Date();
      this.selectedDateObj.setDate(this.selectedDateObj.getDate() + 1);
      this.dateValue = this.formatDate(this.selectedDateObj);
    } else {
      this.selectedDateObj = new Date(this.dateValue);
    }
    this.updateCityDisplay();
    this.updateDateDisplay();
  }
  // Switch cities
  switchCities() {
    const temp = this.departureCityValue;
    this.departureCityValue = this.arrivalCityValue;
    this.arrivalCityValue = temp;
    this.updateCityDisplay();
  }
  // Update city display
  updateCityDisplay() {
    this.departureCityTarget.textContent = this.departureCityValue;
    this.arrivalCityTarget.textContent = this.arrivalCityValue;
    this.departureCityInputTarget.value = this.departureCityValue;
    this.arrivalCityInputTarget.value = this.arrivalCityValue;
  }
  // Update date display
  updateDateDisplay() {
    const month = this.selectedDateObj.getMonth() + 1;
    const day = this.selectedDateObj.getDate();
    const dayName = this.getDayName(this.selectedDateObj);
    this.selectedDateTarget.innerHTML = `
      ${month}<span class="text-sm">\u6708</span>${day}<span class="text-sm">\u65E5</span> <span class="text-sm">${dayName}</span>
    `;
    this.dateInputTarget.value = this.dateValue;
  }
  // Get day name in Chinese
  getDayName(date) {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    const targetDate = new Date(date);
    targetDate.setHours(0, 0, 0, 0);
    const diffTime = targetDate.getTime() - today.getTime();
    const diffDays = Math.round(diffTime / (1e3 * 60 * 60 * 24));
    if (diffDays === 0) return "\u4ECA\u5929";
    if (diffDays === 1) return "\u660E\u5929";
    if (diffDays === 2) return "\u540E\u5929";
    const weekdays = ["\u5468\u65E5", "\u5468\u4E00", "\u5468\u4E8C", "\u5468\u4E09", "\u5468\u56DB", "\u5468\u4E94", "\u5468\u516D"];
    return weekdays[date.getDay()];
  }
  // Format date as YYYY-MM-DD
  formatDate(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    return `${year}-${month}-${day}`;
  }
  // Toggle student ticket
  toggleStudentTicket() {
    console.log("Student ticket toggled:", this.studentTicketTarget.checked);
  }
  // Toggle high speed only
  toggleHighSpeedOnly() {
    console.log("High speed only toggled:", this.highSpeedOnlyTarget.checked);
  }
  // Handle search form submission (Turbo handles actual submission)
  // This is just for any pre-submission UI feedback if needed
  search() {
    console.log("Searching trains:", {
      from: this.departureCityValue,
      to: this.arrivalCityValue,
      date: this.dateValue
    });
  }
};

// app/javascript/controllers/train_list_controller.ts
var train_list_controller_default = class extends Controller {
  static {
    this.targets = [
      "trainItem"
    ];
  }
  connect() {
    console.log("TrainList connected");
  }
  disconnect() {
    console.log("TrainList disconnected");
  }
  toggleFilter(event2) {
    const button = event2.currentTarget;
    button.classList.toggle("bg-primary");
    button.classList.toggle("text-primary-foreground");
    button.classList.toggle("bg-surface-elevated");
    button.classList.toggle("text-foreground");
  }
  toggleStation(event2) {
    const button = event2.currentTarget;
    button.classList.toggle("bg-primary");
    button.classList.toggle("text-primary-foreground");
    button.classList.toggle("bg-surface-elevated");
    button.classList.toggle("text-foreground");
  }
  showAdvancedFilters() {
    console.log("Show advanced filters");
  }
};

// app/javascript/controllers/train_city_selector_controller.ts
var train_city_selector_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectionType = "departure";
  }
  static {
    this.targets = [
      "modal",
      "departure",
      "destination",
      "departureCityInput",
      "destinationCityInput",
      "tabDeparture",
      "tabDestination",
      "searchInput",
      "domesticList",
      "internationalList",
      "historySection",
      "currentCity"
    ];
  }
  static {
    this.values = {
      departureCity: String,
      destinationCity: String
    };
  }
  connect() {
    console.log("TrainCitySelector connected");
    if (!this.departureCityValue) this.departureCityValue = "\u5317\u4EAC";
    if (!this.destinationCityValue) this.destinationCityValue = "\u676D\u5DDE";
    this.departureCityInputTarget.value = this.departureCityValue;
    this.destinationCityInputTarget.value = this.destinationCityValue;
  }
  // Open modal for departure city selection
  openDeparture() {
    if (!this.hasModalTarget) {
      console.log("TrainCitySelector: No modal available, skipping");
      return;
    }
    this.selectionType = "departure";
    this.updateModalTitle();
    this.showModal();
  }
  // Open modal for destination city selection
  openDestination() {
    if (!this.hasModalTarget) {
      console.log("TrainCitySelector: No modal available, skipping");
      return;
    }
    this.selectionType = "destination";
    this.updateModalTitle();
    this.showModal();
  }
  // Show modal
  showModal() {
    if (!this.hasModalTarget) return;
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // Close modal
  closeModal() {
    if (!this.hasModalTarget) return;
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
    this.clearSearch();
  }
  // Select city
  selectCity(event2) {
    const button = event2.currentTarget;
    const cityName = button.dataset.cityName || "";
    if (this.selectionType === "departure") {
      this.departureCityValue = cityName;
      this.departureTarget.textContent = cityName;
      this.departureCityInputTarget.value = cityName;
    } else {
      this.destinationCityValue = cityName;
      this.destinationTarget.textContent = cityName;
      this.destinationCityInputTarget.value = cityName;
    }
    this.closeModal();
  }
  // Switch cities
  switchCities() {
    const temp = this.departureCityValue;
    this.departureCityValue = this.destinationCityValue;
    this.destinationCityValue = temp;
    this.departureTarget.textContent = this.departureCityValue;
    this.destinationTarget.textContent = this.destinationCityValue;
    this.departureCityInputTarget.value = this.departureCityValue;
    this.destinationCityInputTarget.value = this.destinationCityValue;
  }
  // Switch between domestic and international tabs
  showDomestic() {
    this.domesticListTarget.classList.remove("hidden");
    this.internationalListTarget.classList.add("hidden");
    this.tabDepartureTarget.classList.add("active-tab");
    this.tabDestinationTarget.classList.remove("active-tab");
  }
  showInternational() {
    this.domesticListTarget.classList.add("hidden");
    this.internationalListTarget.classList.remove("hidden");
    this.tabDepartureTarget.classList.remove("active-tab");
    this.tabDestinationTarget.classList.add("active-tab");
  }
  // Search cities
  search() {
    const query = this.searchInputTarget.value.toLowerCase().trim();
    if (query === "") {
      this.clearSearch();
      return;
    }
    this.historySectionTarget.classList.add("hidden");
    this.filterCities(this.domesticListTarget, query);
    if (!this.internationalListTarget.classList.contains("hidden")) {
      this.filterCities(this.internationalListTarget, query);
    }
  }
  // Filter cities helper
  filterCities(listTarget, query) {
    const cityButtons = listTarget.querySelectorAll("[data-city-name]");
    cityButtons.forEach((button) => {
      const cityName = button.dataset.cityName?.toLowerCase() || "";
      const cityPinyin = button.dataset.cityPinyin?.toLowerCase() || "";
      if (cityName.includes(query) || cityPinyin.includes(query)) {
        button.classList.remove("hidden");
      } else {
        button.classList.add("hidden");
      }
    });
  }
  // Clear search
  clearSearch() {
    this.searchInputTarget.value = "";
    this.historySectionTarget.classList.remove("hidden");
    const allButtons = this.element.querySelectorAll("[data-city-name]");
    allButtons.forEach((button) => {
      button.classList.remove("hidden");
    });
  }
  // Update modal title based on selection type
  updateModalTitle() {
    if (!this.hasModalTarget) return;
    const titleElement = this.modalTarget.querySelector("[data-modal-title]");
    if (titleElement) {
      titleElement.textContent = this.selectionType === "departure" ? "\u5355\u9009\u51FA\u53D1\u5730" : "\u5355\u9009\u76EE\u7684\u5730";
    }
  }
  // Jump to letter section
  jumpToLetter(event2) {
    const button = event2.currentTarget;
    const letter = button.dataset.letter || "";
    const section = this.domesticListTarget.querySelector(`[data-letter-section="${letter}"]`);
    if (section) {
      section.scrollIntoView({ behavior: "smooth", block: "start" });
    }
  }
};

// app/javascript/controllers/infinite_scroll_controller.ts
var infinite_scroll_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.observer = null;
    this.isLoading = false;
  }
  static {
    this.targets = [
      "trigger",
      // 
      "container",
      // 
      "loading"
      // 
    ];
  }
  static {
    this.values = {
      page: Number,
      // 
      hasMore: Boolean
      // 
    };
  }
  connect() {
    console.log("InfiniteScroll connected, initial page:", this.pageValue, "hasMore:", this.hasMoreValue);
    if (this.hasMoreValue) {
      this.setupObserver();
    }
  }
  disconnect() {
    console.log("InfiniteScroll disconnected");
    if (this.observer) {
      this.observer.disconnect();
      this.observer = null;
    }
  }
  setupObserver() {
    this.observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting && this.hasMoreValue && !this.isLoading) {
            this.loadMore();
          }
        });
      },
      {
        root: null,
        // viewportroot
        rootMargin: "100px",
        // 100px
        threshold: 0.1
        // 10%
      }
    );
    this.observer.observe(this.triggerTarget);
  }
  async loadMore() {
    if (this.isLoading || !this.hasMoreValue) {
      return;
    }
    this.isLoading = true;
    this.showLoading();
    console.log("Loading more trips, page:", this.pageValue);
    try {
      const url = `/trips/load_more?page=${this.pageValue}`;
      const response = await fetch(url, {
        headers: {
          "Accept": "text/vnd.turbo-stream.html",
          "X-Requested-With": "XMLHttpRequest"
        }
      });
      if (response.ok) {
        const html = await response.text();
        const streamElement = document.createElement("div");
        streamElement.innerHTML = html;
        const turboStreams = streamElement.querySelectorAll("turbo-stream");
        turboStreams.forEach((stream) => {
          document.body.appendChild(stream);
        });
        this.pageValue++;
        if (html.includes("\u5DF2\u663E\u793A\u5168\u90E8\u884C\u7A0B")) {
          this.hasMoreValue = false;
          if (this.observer) {
            this.observer.disconnect();
          }
        }
        console.log("Loaded more trips, new page:", this.pageValue, "hasMore:", this.hasMoreValue);
      }
    } catch (error3) {
      console.error("Failed to load more trips:", error3);
    } finally {
      this.isLoading = false;
      this.hideLoading();
    }
  }
  showLoading() {
    this.loadingTarget.classList.remove("hidden");
  }
  hideLoading() {
    this.loadingTarget.classList.add("hidden");
  }
};

// app/javascript/controllers/deep_travel_controller.ts
var deep_travel_controller_default = class extends Controller {
  static {
    this.targets = ["video", "videoContainer", "tab", "content"];
  }
  connect() {
    console.log("Deep travel controller connected");
  }
  playVideo(event2) {
    const video = event2.currentTarget;
    if (video.paused) {
      video.play();
    } else {
      video.pause();
    }
  }
  toggleFullscreen(event2) {
    const container = event2.currentTarget.closest('[data-deep-travel-target="videoContainer"]');
    if (!document.fullscreenElement) {
      container.requestFullscreen();
    } else {
      document.exitFullscreen();
    }
  }
  switchTab(event2) {
    const clickedTab = event2.currentTarget;
    const tabName = clickedTab.dataset.tab;
    this.tabTargets.forEach((tab) => {
      if (tab === clickedTab) {
        tab.classList.add("text-gray-900", "border-b-2", "border-yellow-400", "bg-yellow-50");
        tab.classList.remove("text-gray-600");
      } else {
        tab.classList.remove("text-gray-900", "border-b-2", "border-yellow-400", "bg-yellow-50");
        tab.classList.add("text-gray-600");
      }
    });
    this.contentTargets.forEach((content) => {
      if (content.dataset.content === tabName) {
        content.classList.remove("hidden");
      } else {
        content.classList.add("hidden");
      }
    });
  }
};

// app/javascript/controllers/multi_city_controller.ts
var multi_city_controller_default = class extends Controller {
  static {
    this.targets = ["segmentsContainer", "segment", "addButton", "hiddenSegmentsInput"];
  }
  static {
    this.values = {
      segments: { type: Array, default: [] },
      switchIconUrl: String
    };
  }
  connect() {
    console.log("MultiCity controller connected");
    if (!this.hasSegmentsContainerTarget) {
      console.log("MultiCity controller: segmentsContainer not available yet, skipping initialization");
      document.addEventListener("trip-type:multi-city-shown", this.handleMultiCityShown.bind(this));
      return;
    }
    this.initializeSegments();
    document.addEventListener("city-selector:city-selected", this.handleCitySelected.bind(this));
    console.log("Multi-city: Added event listener for city-selector:city-selected");
    document.addEventListener("date-picker:date-selected", this.handleDateSelected.bind(this));
    console.log("Multi-city: Added event listener for date-picker:date-selected");
  }
  disconnect() {
    document.removeEventListener("city-selector:city-selected", this.handleCitySelected.bind(this));
    document.removeEventListener("date-picker:date-selected", this.handleDateSelected.bind(this));
    document.removeEventListener("trip-type:multi-city-shown", this.handleMultiCityShown.bind(this));
  }
  // Stimulus value changed callback - automatically called when segmentsValue changes
  segmentsValueChanged() {
    console.log("Multi-city: segmentsValueChanged triggered");
    if (this.hasSegmentsContainerTarget) {
      this.render();
    }
  }
  // Handle when multi-city form is shown
  handleMultiCityShown() {
    console.log("Multi-city: Form is now visible, initializing...");
    if (this.hasSegmentsContainerTarget) {
      this.initializeSegments();
      document.addEventListener("city-selector:city-selected", this.handleCitySelected.bind(this));
      console.log("Multi-city: Added event listener for city-selector:city-selected");
      document.addEventListener("date-picker:date-selected", this.handleDateSelected.bind(this));
      console.log("Multi-city: Added event listener for date-picker:date-selected");
    }
  }
  // Initialize the segments
  initializeSegments() {
    console.log("Multi-city: Initializing segments");
    if (this.segmentsValue.length === 0) {
      this.segmentsValue = [
        {
          id: this.generateId(),
          departureCity: "\u6B66\u6C49",
          destinationCity: "\u6DF1\u5733",
          date: this.formatDate(/* @__PURE__ */ new Date())
        },
        {
          id: this.generateId(),
          departureCity: "\u5E7F\u5DDE",
          destinationCity: "\u676D\u5DDE",
          date: this.formatDate(new Date(Date.now() + 3 * 24 * 60 * 60 * 1e3))
          // 3
        }
      ];
    }
    this.render();
    this.updateAddButtonState();
  }
  // Handle city selection from city selector
  handleCitySelected(event2) {
    const customEvent = event2;
    console.log("Multi-city: Received city-selector:city-selected event", customEvent.detail);
    const { segmentId, cityType, cityName } = customEvent.detail;
    console.log("Multi-city: Current segments before update:", JSON.stringify(this.segmentsValue));
    const segmentIndex = this.segmentsValue.findIndex((seg) => seg.id === segmentId);
    if (segmentIndex !== -1) {
      console.log(`Multi-city: Found segment ${segmentId}, updating ${cityType} to ${cityName}`);
      this.segmentsValue = this.segmentsValue.map((seg, index) => {
        if (index === segmentIndex) {
          console.log("Multi-city: Segment before update:", JSON.stringify(seg));
          const updatedSegment = {
            ...seg,
            departureCity: cityType === "departure" ? cityName : seg.departureCity,
            destinationCity: cityType === "destination" ? cityName : seg.destinationCity
          };
          console.log("Multi-city: Segment after update:", JSON.stringify(updatedSegment));
          return updatedSegment;
        }
        return seg;
      });
      console.log("Multi-city: All segments after update:", JSON.stringify(this.segmentsValue));
      console.log("Multi-city: Segment updated, render will be triggered by valueChanged");
    } else {
      console.warn("Multi-city: Segment not found:", segmentId);
      console.warn("Multi-city: Available segment IDs:", this.segmentsValue.map((s) => s.id));
    }
  }
  // Handle date selection from date picker
  handleDateSelected(event2) {
    console.log("Multi-city: Received date-picker:date-selected event", event2.detail);
    const { segmentId, date } = event2.detail;
    const segmentIndex = this.segmentsValue.findIndex((seg) => seg.id === segmentId);
    if (segmentIndex !== -1) {
      console.log(`Multi-city: Updating segment ${segmentId} date to ${date}`);
      this.segmentsValue = this.segmentsValue.map((seg, index) => {
        if (index === segmentIndex) {
          return { ...seg, date };
        }
        return seg;
      });
      console.log("Multi-city: Segment date updated");
    } else {
      console.warn("Multi-city: Segment not found:", segmentId);
    }
  }
  // 
  addSegment() {
    if (this.segmentsValue.length >= 8) {
      alert("\u6700\u591A\u652F\u63018\u4E2A\u884C\u7A0B\u6BB5");
      return;
    }
    const lastSegment = this.segmentsValue[this.segmentsValue.length - 1];
    const newSegment = {
      id: this.generateId(),
      departureCity: lastSegment ? lastSegment.destinationCity : "\u5317\u4EAC",
      destinationCity: "\u4E0A\u6D77",
      date: lastSegment ? this.formatDate(new Date(new Date(lastSegment.date).getTime() + 24 * 60 * 60 * 1e3)) : this.formatDate(/* @__PURE__ */ new Date())
    };
    this.segmentsValue = [...this.segmentsValue, newSegment];
    this.render();
    this.updateAddButtonState();
  }
  // 
  removeSegment(event2) {
    const button = event2.currentTarget;
    const segmentId = button.dataset.segmentId;
    if (this.segmentsValue.length <= 2) {
      alert("\u81F3\u5C11\u9700\u8981\u4FDD\u75592\u4E2A\u884C\u7A0B\u6BB5");
      return;
    }
    this.segmentsValue = this.segmentsValue.filter((seg) => seg.id !== segmentId);
    this.render();
    this.updateAddButtonState();
  }
  // 
  updateCity(event2) {
    const input = event2.currentTarget;
    const segmentId = input.dataset.segmentId;
    const cityType = input.dataset.cityType;
    const segment = this.segmentsValue.find((seg) => seg.id === segmentId);
    if (segment) {
      if (cityType === "departure") {
        segment.departureCity = input.value;
      } else if (cityType === "destination") {
        segment.destinationCity = input.value;
      }
      this.updateHiddenInput();
    }
  }
  // 
  updateDate(event2) {
    const input = event2.currentTarget;
    const segmentId = input.dataset.segmentId;
    const segment = this.segmentsValue.find((seg) => seg.id === segmentId);
    if (segment) {
      segment.date = input.value;
      this.updateHiddenInput();
    }
  }
  // 
  openCitySelector(event2) {
    const button = event2.currentTarget;
    const segmentId = button.dataset.segmentId;
    const cityType = button.dataset.cityType;
    console.log(`Multi-city: Opening city selector for segment ${segmentId}, cityType ${cityType}`);
    const customEvent = new CustomEvent("multi-city:open-city-selector", {
      detail: { segmentId, cityType },
      bubbles: true
    });
    this.element.dispatchEvent(customEvent);
  }
  // 
  openDatePicker(event2) {
    const button = event2.currentTarget;
    const segmentId = button.dataset.segmentId;
    const customEvent = new CustomEvent("multi-city:open-date-picker", {
      detail: { segmentId },
      bubbles: true
    });
    this.element.dispatchEvent(customEvent);
  }
  // 
  render() {
    if (!this.hasSegmentsContainerTarget) {
      console.log("MultiCity: Cannot render, segmentsContainer not available");
      return;
    }
    console.log("Multi-city: render() called with segments:", JSON.stringify(this.segmentsValue));
    this.segmentsContainerTarget.innerHTML = "";
    this.segmentsValue.forEach((segment, index) => {
      console.log(`Multi-city: Creating element for segment ${index}:`, JSON.stringify(segment));
      const segmentElement = this.createSegmentElement(segment, index);
      this.segmentsContainerTarget.appendChild(segmentElement);
    });
    this.updateHiddenInput();
  }
  // 
  createSegmentElement(segment, index) {
    console.log(`Multi-city: createSegmentElement called for segment ${segment.id}:`, {
      departureCity: segment.departureCity,
      destinationCity: segment.destinationCity,
      date: segment.date
    });
    const div = document.createElement("div");
    div.className = "border-b border-gray-100 py-4";
    div.dataset.multiCityTarget = "segment";
    const date = new Date(segment.date);
    const weekday = this.getWeekday(date);
    div.innerHTML = `
      <div class="flex items-center justify-between mb-3">
        <div class="flex items-center gap-2">
          <span class="inline-flex items-center justify-center w-5 h-5 rounded-full bg-blue-500 text-white text-xs font-bold">
            ${index + 1}
          </span>
          <span class="text-sm text-gray-500">\u7B2C${this.numberToChinese(index + 1)}\u7A0B</span>
        </div>
        ${this.segmentsValue.length > 2 ? `
          <button 
            type="button"
            data-action="click->multi-city#removeSegment"
            data-segment-id="${segment.id}"
            class="text-gray-400 hover:text-red-500">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd"
                d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0
                  -1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                clip-rule="evenodd"/>
            </svg>
          </button>
        ` : ""}
      </div>

      <div class="flex items-center justify-between">
        <button 
          type="button"
          data-action="click->multi-city#openCitySelector"
          data-segment-id="${segment.id}"
          data-city-type="departure"
          class="flex-1 text-left">
          <div class="text-[32px] font-bold leading-tight">${segment.departureCity}</div>
        </button>
        
        <div class="mx-4 flex items-center justify-center">
          <img src="${this.switchIconUrlValue}" class="w-12 h-12" alt="\u5207\u6362" />
        </div>
        
        <button 
          type="button"
          data-action="click->multi-city#openCitySelector"
          data-segment-id="${segment.id}"
          data-city-type="destination"
          class="flex-1 text-right">
          <div class="text-[32px] font-bold leading-tight">${segment.destinationCity}</div>
        </button>
      </div>

      <button 
        type="button"
        data-action="click->multi-city#openDatePicker"
        data-segment-id="${segment.id}"
        class="mt-2 text-left">
        <div class="text-lg font-medium text-gray-700">
          ${date.getMonth() + 1}\u6708${date.getDate()}\u65E5 ${weekday}
        </div>
      </button>
    `;
    console.log(`Multi-city: Created HTML for segment ${segment.id}, departure: ${segment.departureCity}, destination: ${segment.destinationCity}`);
    return div;
  }
  // 
  updateAddButtonState() {
    if (!this.hasAddButtonTarget) {
      console.log("MultiCity: Cannot update add button state, button not available");
      return;
    }
    if (this.segmentsValue.length >= 8) {
      this.addButtonTarget.classList.add("opacity-50", "cursor-not-allowed");
      this.addButtonTarget.setAttribute("disabled", "true");
    } else {
      this.addButtonTarget.classList.remove("opacity-50", "cursor-not-allowed");
      this.addButtonTarget.removeAttribute("disabled");
    }
  }
  // 
  updateHiddenInput() {
    if (this.hasHiddenSegmentsInputTarget) {
      this.hiddenSegmentsInputTarget.value = JSON.stringify(this.segmentsValue);
    }
  }
  // ID
  generateId() {
    return `segment-${Date.now()}-${Math.random().toString(36).substring(2, 11)}`;
  }
  // 
  formatDate(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    return `${year}-${month}-${day}`;
  }
  // 
  getWeekday(date) {
    const weekdays = ["\u5468\u65E5", "\u5468\u4E00", "\u5468\u4E8C", "\u5468\u4E09", "\u5468\u56DB", "\u5468\u4E94", "\u5468\u516D"];
    return weekdays[date.getDay()];
  }
  // 
  numberToChinese(num) {
    const chinese = ["\u4E00", "\u4E8C", "\u4E09", "\u56DB", "\u4E94", "\u516D", "\u4E03", "\u516B"];
    return chinese[num - 1] || num.toString();
  }
};

// app/javascript/controllers/flight_filter_controller.ts
var flight_filter_controller_default = class extends Controller {
  static {
    this.targets = [
      "modal",
      "overlay",
      "flightPreferenceTab",
      "airlineCompanyTab",
      "airportTab",
      "departureTimeTab",
      "transferCityTab",
      "transferTimesTab",
      "transferDurationTab",
      "totalDurationTab",
      "seatClassTab",
      "aircraftModelTab",
      "ticketCancellationTab",
      "flightPreferenceSection",
      "airlineCompanySection",
      "airportSection",
      "departureTimeSection",
      "transferCitySection",
      "transferTimesSection",
      "transferDurationSection",
      "totalDurationSection",
      "seatClassSection",
      "aircraftModelSection",
      "ticketCancellationSection",
      "resultCount",
      "directFlightCheckbox",
      "noTransitCheckbox",
      "includeCheckedLuggageCheckbox",
      "noSharedFlightCheckbox",
      "discountPriceCheckbox",
      "resetButton",
      "confirmButton",
      "filterBadge",
      "selectedFiltersContainer",
      "selectedFiltersList",
      // Card targets for grid layout
      "directFlightCard",
      "checkedLuggageCard",
      "noSharedFlightCard",
      "noTransitCard",
      "discountPriceCard",
      // Quick filter button targets
      "quickDirectFlight",
      "quickNoSharedFlight",
      "quickCheckedLuggage",
      "quickNoTransit",
      "quickDiscountPrice"
    ];
  }
  connect() {
    console.log("FlightFilter controller connected");
    this.currentTab = "flightPreference";
    this.initializeFilters();
  }
  initializeFilters() {
    this.filters = {
      directFlight: false,
      noTransit: false,
      includeCheckedLuggage: false,
      noSharedFlight: false,
      discountPrice: false,
      airlines: /* @__PURE__ */ new Set(),
      departureAirports: /* @__PURE__ */ new Set(),
      arrivalAirports: /* @__PURE__ */ new Set(),
      departureTimeRanges: /* @__PURE__ */ new Set(),
      aircraftModels: /* @__PURE__ */ new Set()
    };
  }
  openModal() {
    this.modalTarget.classList.remove("hidden");
    this.overlayTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  closeModal() {
    this.modalTarget.classList.add("hidden");
    this.overlayTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  selectTab(event2) {
    const button = event2.currentTarget;
    const tabName = button.dataset.tab;
    if (!tabName) return;
    this.currentTab = tabName;
    const allTabs = [
      this.flightPreferenceTabTarget,
      this.airlineCompanyTabTarget,
      this.airportTabTarget,
      this.departureTimeTabTarget,
      this.transferCityTabTarget,
      this.transferTimesTabTarget,
      this.transferDurationTabTarget,
      this.totalDurationTabTarget,
      this.seatClassTabTarget,
      this.aircraftModelTabTarget,
      this.ticketCancellationTabTarget
    ];
    allTabs.forEach((tab) => {
      tab.classList.remove("border-blue-500", "text-blue-600", "font-bold");
      tab.classList.add("text-gray-600");
    });
    button.classList.add("border-blue-500", "text-blue-600", "font-bold");
    button.classList.remove("text-gray-600");
    const allSections = [
      this.flightPreferenceSectionTarget,
      this.airlineCompanySectionTarget,
      this.airportSectionTarget,
      this.departureTimeSectionTarget,
      this.transferCitySectionTarget,
      this.transferTimesSectionTarget,
      this.transferDurationSectionTarget,
      this.totalDurationSectionTarget,
      this.seatClassSectionTarget,
      this.aircraftModelSectionTarget,
      this.ticketCancellationSectionTarget
    ];
    allSections.forEach((section) => section.classList.add("hidden"));
    const sectionMap = {
      flightPreference: this.flightPreferenceSectionTarget,
      airlineCompany: this.airlineCompanySectionTarget,
      airport: this.airportSectionTarget,
      departureTime: this.departureTimeSectionTarget,
      transferCity: this.transferCitySectionTarget,
      transferTimes: this.transferTimesSectionTarget,
      transferDuration: this.transferDurationSectionTarget,
      totalDuration: this.totalDurationSectionTarget,
      seatClass: this.seatClassSectionTarget,
      aircraftModel: this.aircraftModelSectionTarget,
      ticketCancellation: this.ticketCancellationSectionTarget
    };
    const targetSection = sectionMap[tabName];
    if (targetSection) {
      targetSection.classList.remove("hidden");
    }
  }
  // Flight preference toggles
  toggleDirectFlight() {
    this.directFlightCheckboxTarget.checked = !this.directFlightCheckboxTarget.checked;
    this.filters.directFlight = this.directFlightCheckboxTarget.checked;
    if (this.directFlightCardTarget) {
      if (this.filters.directFlight) {
        this.directFlightCardTarget.classList.remove("bg-[#f6f7f9]");
        this.directFlightCardTarget.classList.add("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        if (!this.directFlightCardTarget.querySelector(".checkmark")) {
          const checkmark = this.createCheckmark();
          this.directFlightCardTarget.appendChild(checkmark);
        }
      } else {
        this.directFlightCardTarget.classList.add("bg-[#f6f7f9]");
        this.directFlightCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        const checkmark = this.directFlightCardTarget.querySelector(".checkmark");
        if (checkmark) checkmark.remove();
      }
    }
    if (this.quickDirectFlightTarget) {
      if (this.filters.directFlight) {
        this.quickDirectFlightTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickDirectFlightTarget.classList.remove("border-gray-300");
      } else {
        this.quickDirectFlightTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickDirectFlightTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  toggleNoTransit() {
    this.noTransitCheckboxTarget.checked = !this.noTransitCheckboxTarget.checked;
    this.filters.noTransit = this.noTransitCheckboxTarget.checked;
    if (this.noTransitCardTarget) {
      if (this.filters.noTransit) {
        this.noTransitCardTarget.classList.remove("bg-[#f6f7f9]");
        this.noTransitCardTarget.classList.add("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        if (!this.noTransitCardTarget.querySelector(".checkmark")) {
          const checkmark = this.createCheckmark();
          this.noTransitCardTarget.appendChild(checkmark);
        }
      } else {
        this.noTransitCardTarget.classList.add("bg-[#f6f7f9]");
        this.noTransitCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        const checkmark = this.noTransitCardTarget.querySelector(".checkmark");
        if (checkmark) checkmark.remove();
      }
    }
    if (this.quickNoTransitTarget) {
      if (this.filters.noTransit) {
        this.quickNoTransitTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickNoTransitTarget.classList.remove("border-gray-300");
      } else {
        this.quickNoTransitTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickNoTransitTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  toggleCheckedLuggage() {
    this.includeCheckedLuggageCheckboxTarget.checked = !this.includeCheckedLuggageCheckboxTarget.checked;
    this.filters.includeCheckedLuggage = this.includeCheckedLuggageCheckboxTarget.checked;
    if (this.checkedLuggageCardTarget) {
      if (this.filters.includeCheckedLuggage) {
        this.checkedLuggageCardTarget.classList.remove("bg-[#f6f7f9]");
        this.checkedLuggageCardTarget.classList.add("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        if (!this.checkedLuggageCardTarget.querySelector(".checkmark")) {
          const checkmark = this.createCheckmark();
          this.checkedLuggageCardTarget.appendChild(checkmark);
        }
      } else {
        this.checkedLuggageCardTarget.classList.add("bg-[#f6f7f9]");
        this.checkedLuggageCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        const checkmark = this.checkedLuggageCardTarget.querySelector(".checkmark");
        if (checkmark) checkmark.remove();
      }
    }
    if (this.quickCheckedLuggageTarget) {
      if (this.filters.includeCheckedLuggage) {
        this.quickCheckedLuggageTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickCheckedLuggageTarget.classList.remove("border-gray-300");
      } else {
        this.quickCheckedLuggageTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickCheckedLuggageTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  toggleNoSharedFlight() {
    this.noSharedFlightCheckboxTarget.checked = !this.noSharedFlightCheckboxTarget.checked;
    this.filters.noSharedFlight = this.noSharedFlightCheckboxTarget.checked;
    if (this.noSharedFlightCardTarget) {
      if (this.filters.noSharedFlight) {
        this.noSharedFlightCardTarget.classList.remove("bg-[#f6f7f9]");
        this.noSharedFlightCardTarget.classList.add("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        if (!this.noSharedFlightCardTarget.querySelector(".checkmark")) {
          const checkmark = this.createCheckmark();
          this.noSharedFlightCardTarget.appendChild(checkmark);
        }
      } else {
        this.noSharedFlightCardTarget.classList.add("bg-[#f6f7f9]");
        this.noSharedFlightCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        const checkmark = this.noSharedFlightCardTarget.querySelector(".checkmark");
        if (checkmark) checkmark.remove();
      }
    }
    if (this.quickNoSharedFlightTarget) {
      if (this.filters.noSharedFlight) {
        this.quickNoSharedFlightTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickNoSharedFlightTarget.classList.remove("border-gray-300");
      } else {
        this.quickNoSharedFlightTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickNoSharedFlightTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  toggleDiscountPrice() {
    this.discountPriceCheckboxTarget.checked = !this.discountPriceCheckboxTarget.checked;
    this.filters.discountPrice = this.discountPriceCheckboxTarget.checked;
    if (this.discountPriceCardTarget) {
      if (this.filters.discountPrice) {
        this.discountPriceCardTarget.classList.remove("bg-[#f6f7f9]");
        this.discountPriceCardTarget.classList.add("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        if (!this.discountPriceCardTarget.querySelector(".checkmark")) {
          const checkmark = this.createCheckmark();
          this.discountPriceCardTarget.appendChild(checkmark);
        }
      } else {
        this.discountPriceCardTarget.classList.add("bg-[#f6f7f9]");
        this.discountPriceCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        const checkmark = this.discountPriceCardTarget.querySelector(".checkmark");
        if (checkmark) checkmark.remove();
      }
    }
    if (this.quickDiscountPriceTarget) {
      if (this.filters.discountPrice) {
        this.quickDiscountPriceTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickDiscountPriceTarget.classList.remove("border-gray-300");
      } else {
        this.quickDiscountPriceTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickDiscountPriceTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  // Quick filter button actions
  toggleQuickDirectFlight() {
    this.filters.directFlight = !this.filters.directFlight;
    this.directFlightCheckboxTarget.checked = this.filters.directFlight;
    if (this.quickDirectFlightTarget) {
      if (this.filters.directFlight) {
        this.quickDirectFlightTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickDirectFlightTarget.classList.remove("border-gray-300");
      } else {
        this.quickDirectFlightTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickDirectFlightTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  toggleQuickNoSharedFlight() {
    this.filters.noSharedFlight = !this.filters.noSharedFlight;
    this.noSharedFlightCheckboxTarget.checked = this.filters.noSharedFlight;
    if (this.quickNoSharedFlightTarget) {
      if (this.filters.noSharedFlight) {
        this.quickNoSharedFlightTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickNoSharedFlightTarget.classList.remove("border-gray-300");
      } else {
        this.quickNoSharedFlightTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickNoSharedFlightTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  toggleQuickCheckedLuggage() {
    this.filters.includeCheckedLuggage = !this.filters.includeCheckedLuggage;
    this.includeCheckedLuggageCheckboxTarget.checked = this.filters.includeCheckedLuggage;
    if (this.quickCheckedLuggageTarget) {
      if (this.filters.includeCheckedLuggage) {
        this.quickCheckedLuggageTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickCheckedLuggageTarget.classList.remove("border-gray-300");
      } else {
        this.quickCheckedLuggageTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickCheckedLuggageTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  toggleQuickNoTransit() {
    this.filters.noTransit = !this.filters.noTransit;
    this.noTransitCheckboxTarget.checked = this.filters.noTransit;
    if (this.quickNoTransitTarget) {
      if (this.filters.noTransit) {
        this.quickNoTransitTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickNoTransitTarget.classList.remove("border-gray-300");
      } else {
        this.quickNoTransitTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickNoTransitTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  toggleQuickDiscountPrice() {
    this.filters.discountPrice = !this.filters.discountPrice;
    this.discountPriceCheckboxTarget.checked = this.filters.discountPrice;
    if (this.quickDiscountPriceTarget) {
      if (this.filters.discountPrice) {
        this.quickDiscountPriceTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickDiscountPriceTarget.classList.remove("border-gray-300");
      } else {
        this.quickDiscountPriceTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickDiscountPriceTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  // Airline selection
  toggleAirline(event2) {
    const checkbox = event2.target;
    const airline = checkbox.value;
    if (checkbox.checked) {
      this.filters.airlines.add(airline);
    } else {
      this.filters.airlines.delete(airline);
    }
    this.updateResultCount();
  }
  // Airport selection
  toggleDepartureAirport(event2) {
    const checkbox = event2.target;
    const airport = checkbox.value;
    if (checkbox.checked) {
      this.filters.departureAirports.add(airport);
    } else {
      this.filters.departureAirports.delete(airport);
    }
    this.updateResultCount();
  }
  toggleArrivalAirport(event2) {
    const checkbox = event2.target;
    const airport = checkbox.value;
    if (checkbox.checked) {
      this.filters.arrivalAirports.add(airport);
    } else {
      this.filters.arrivalAirports.delete(airport);
    }
    this.updateResultCount();
  }
  // Departure time selection
  toggleDepartureTime(event2) {
    const checkbox = event2.target;
    const timeRange = checkbox.value;
    if (checkbox.checked) {
      this.filters.departureTimeRanges.add(timeRange);
    } else {
      this.filters.departureTimeRanges.delete(timeRange);
    }
    this.updateResultCount();
  }
  // Aircraft model selection
  toggleAircraftModel(event2) {
    const checkbox = event2.target;
    const model = checkbox.value;
    if (checkbox.checked) {
      this.filters.aircraftModels.add(model);
    } else {
      this.filters.aircraftModels.delete(model);
    }
    this.updateResultCount();
  }
  // Reset all filters
  reset() {
    this.initializeFilters();
    this.directFlightCheckboxTarget.checked = false;
    this.noTransitCheckboxTarget.checked = false;
    this.includeCheckedLuggageCheckboxTarget.checked = false;
    this.noSharedFlightCheckboxTarget.checked = false;
    this.discountPriceCheckboxTarget.checked = false;
    const airlineCheckboxes = this.element.querySelectorAll('input[type="checkbox"][data-filter-type="airline"]');
    airlineCheckboxes.forEach((cb) => cb.checked = false);
    const airportCheckboxes = this.element.querySelectorAll('input[type="checkbox"][data-filter-type="airport"]');
    airportCheckboxes.forEach((cb) => cb.checked = false);
    const timeCheckboxes = this.element.querySelectorAll('input[type="checkbox"][data-filter-type="departure-time"]');
    timeCheckboxes.forEach((cb) => cb.checked = false);
    const modelCheckboxes = this.element.querySelectorAll('input[type="checkbox"][data-filter-type="aircraft-model"]');
    modelCheckboxes.forEach((cb) => cb.checked = false);
    if (this.quickDirectFlightTarget) {
      this.quickDirectFlightTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
      this.quickDirectFlightTarget.classList.add("border-gray-300");
    }
    if (this.quickNoSharedFlightTarget) {
      this.quickNoSharedFlightTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
      this.quickNoSharedFlightTarget.classList.add("border-gray-300");
    }
    if (this.quickCheckedLuggageTarget) {
      this.quickCheckedLuggageTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
      this.quickCheckedLuggageTarget.classList.add("border-gray-300");
    }
    if (this.quickNoTransitTarget) {
      this.quickNoTransitTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
      this.quickNoTransitTarget.classList.add("border-gray-300");
    }
    if (this.quickDiscountPriceTarget) {
      this.quickDiscountPriceTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
      this.quickDiscountPriceTarget.classList.add("border-gray-300");
    }
    if (this.directFlightCardTarget) {
      this.directFlightCardTarget.classList.add("bg-[#f6f7f9]");
      this.directFlightCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
      const checkmark = this.directFlightCardTarget.querySelector(".checkmark");
      if (checkmark) checkmark.remove();
    }
    if (this.noSharedFlightCardTarget) {
      this.noSharedFlightCardTarget.classList.add("bg-[#f6f7f9]");
      this.noSharedFlightCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
      const checkmark = this.noSharedFlightCardTarget.querySelector(".checkmark");
      if (checkmark) checkmark.remove();
    }
    if (this.checkedLuggageCardTarget) {
      this.checkedLuggageCardTarget.classList.add("bg-[#f6f7f9]");
      this.checkedLuggageCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
      const checkmark = this.checkedLuggageCardTarget.querySelector(".checkmark");
      if (checkmark) checkmark.remove();
    }
    if (this.noTransitCardTarget) {
      this.noTransitCardTarget.classList.add("bg-[#f6f7f9]");
      this.noTransitCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
      const checkmark = this.noTransitCardTarget.querySelector(".checkmark");
      if (checkmark) checkmark.remove();
    }
    if (this.discountPriceCardTarget) {
      this.discountPriceCardTarget.classList.add("bg-[#f6f7f9]");
      this.discountPriceCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
      const checkmark = this.discountPriceCardTarget.querySelector(".checkmark");
      if (checkmark) checkmark.remove();
    }
    this.updateResultCount();
  }
  // Apply filters and close modal
  confirm() {
    this.closeModal();
    this.element.dispatchEvent(new CustomEvent("filters-applied", {
      detail: { filters: this.filters },
      bubbles: true
    }));
  }
  // Update result count (placeholder - in real app would count filtered flights)
  updateResultCount() {
    let count = 66;
    if (this.filters.directFlight) count = Math.floor(count * 0.7);
    if (this.filters.noTransit) count = Math.floor(count * 0.8);
    if (this.filters.airlines.size > 0) count = Math.floor(count * 0.6);
    if (this.filters.departureAirports.size > 0) count = Math.floor(count * 0.7);
    if (this.filters.arrivalAirports.size > 0) count = Math.floor(count * 0.7);
    if (this.filters.departureTimeRanges.size > 0) count = Math.floor(count * 0.5);
    if (this.filters.aircraftModels.size > 0) count = Math.floor(count * 0.6);
    this.resultCountTarget.textContent = count.toString();
    this.updateFilterBadge();
    this.updateSelectedFiltersDisplay();
  }
  // Update filter badge count
  updateFilterBadge() {
    let activeFilterCount = 0;
    if (this.filters.directFlight) activeFilterCount++;
    if (this.filters.noTransit) activeFilterCount++;
    if (this.filters.includeCheckedLuggage) activeFilterCount++;
    if (this.filters.noSharedFlight) activeFilterCount++;
    if (this.filters.discountPrice) activeFilterCount++;
    activeFilterCount += this.filters.airlines.size;
    activeFilterCount += this.filters.departureAirports.size;
    activeFilterCount += this.filters.arrivalAirports.size;
    activeFilterCount += this.filters.departureTimeRanges.size;
    activeFilterCount += this.filters.aircraftModels.size;
    if (activeFilterCount > 0) {
      this.filterBadgeTarget.textContent = activeFilterCount.toString();
      this.filterBadgeTarget.classList.remove("hidden");
    } else {
      this.filterBadgeTarget.classList.add("hidden");
    }
  }
  // Update selected filters display
  updateSelectedFiltersDisplay() {
    const filterLabels = [];
    const filterNameMap = {
      directFlight: "\u53EA\u770B\u76F4\u98DE",
      noSharedFlight: "\u4E0D\u770B\u5171\u4EAB\u822A\u73ED",
      includeCheckedLuggage: "\u542B\u6258\u8FD0\u884C\u674E\u989D",
      noTransit: "\u65E0\u9700\u8FC7\u5883\u7B7E",
      discountPrice: "\u770B\u4F18\u60E0\u524D\u4EF7\u683C"
    };
    if (this.filters.directFlight) {
      filterLabels.push({ text: filterNameMap.directFlight, type: "directFlight", value: "" });
    }
    if (this.filters.noSharedFlight) {
      filterLabels.push({ text: filterNameMap.noSharedFlight, type: "noSharedFlight", value: "" });
    }
    if (this.filters.includeCheckedLuggage) {
      filterLabels.push({ text: filterNameMap.includeCheckedLuggage, type: "includeCheckedLuggage", value: "" });
    }
    if (this.filters.noTransit) {
      filterLabels.push({ text: filterNameMap.noTransit, type: "noTransit", value: "" });
    }
    if (this.filters.discountPrice) {
      filterLabels.push({ text: filterNameMap.discountPrice, type: "discountPrice", value: "" });
    }
    this.filters.airlines.forEach((airline) => {
      filterLabels.push({ text: airline, type: "airline", value: airline });
    });
    this.filters.departureAirports.forEach((airport) => {
      filterLabels.push({ text: airport, type: "departureAirport", value: airport });
    });
    this.filters.arrivalAirports.forEach((airport) => {
      filterLabels.push({ text: airport, type: "arrivalAirport", value: airport });
    });
    this.filters.departureTimeRanges.forEach((range) => {
      filterLabels.push({ text: range, type: "departureTime", value: range });
    });
    this.filters.aircraftModels.forEach((model) => {
      filterLabels.push({ text: model, type: "aircraftModel", value: model });
    });
    this.selectedFiltersListTarget.innerHTML = "";
    if (filterLabels.length > 0) {
      this.selectedFiltersContainerTarget.classList.remove("hidden");
      filterLabels.forEach((filter) => {
        const tag = document.createElement("button");
        tag.className = "inline-flex items-center gap-1 px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full border border-yellow-300 hover:bg-yellow-200";
        tag.dataset.filterType = filter.type;
        tag.dataset.filterValue = filter.value;
        tag.innerHTML = `
          ${filter.text}
          <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd"
              d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0
                -1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
              clip-rule="evenodd"/>
          </svg>
        `;
        tag.addEventListener("click", () => this.removeFilter(filter.type, filter.value));
        this.selectedFiltersListTarget.appendChild(tag);
      });
    } else {
      this.selectedFiltersContainerTarget.classList.add("hidden");
    }
  }
  // Remove a single filter
  removeFilter(type, value) {
    switch (type) {
      case "directFlight":
        this.filters.directFlight = false;
        this.directFlightCheckboxTarget.checked = false;
        if (this.quickDirectFlightTarget) {
          this.quickDirectFlightTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
          this.quickDirectFlightTarget.classList.add("border-gray-300");
        }
        if (this.directFlightCardTarget) {
          this.directFlightCardTarget.classList.add("bg-[#f6f7f9]");
          this.directFlightCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
          const checkmark = this.directFlightCardTarget.querySelector(".checkmark");
          if (checkmark) checkmark.remove();
        }
        break;
      case "noSharedFlight":
        this.filters.noSharedFlight = false;
        this.noSharedFlightCheckboxTarget.checked = false;
        if (this.quickNoSharedFlightTarget) {
          this.quickNoSharedFlightTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
          this.quickNoSharedFlightTarget.classList.add("border-gray-300");
        }
        if (this.noSharedFlightCardTarget) {
          this.noSharedFlightCardTarget.classList.add("bg-[#f6f7f9]");
          this.noSharedFlightCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
          const checkmark = this.noSharedFlightCardTarget.querySelector(".checkmark");
          if (checkmark) checkmark.remove();
        }
        break;
      case "includeCheckedLuggage":
        this.filters.includeCheckedLuggage = false;
        this.includeCheckedLuggageCheckboxTarget.checked = false;
        if (this.quickCheckedLuggageTarget) {
          this.quickCheckedLuggageTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
          this.quickCheckedLuggageTarget.classList.add("border-gray-300");
        }
        if (this.checkedLuggageCardTarget) {
          this.checkedLuggageCardTarget.classList.add("bg-[#f6f7f9]");
          this.checkedLuggageCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
          const checkmark = this.checkedLuggageCardTarget.querySelector(".checkmark");
          if (checkmark) checkmark.remove();
        }
        break;
      case "noTransit":
        this.filters.noTransit = false;
        this.noTransitCheckboxTarget.checked = false;
        if (this.quickNoTransitTarget) {
          this.quickNoTransitTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
          this.quickNoTransitTarget.classList.add("border-gray-300");
        }
        if (this.noTransitCardTarget) {
          this.noTransitCardTarget.classList.add("bg-[#f6f7f9]");
          this.noTransitCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
          const checkmark = this.noTransitCardTarget.querySelector(".checkmark");
          if (checkmark) checkmark.remove();
        }
        break;
      case "discountPrice":
        this.filters.discountPrice = false;
        this.discountPriceCheckboxTarget.checked = false;
        if (this.quickDiscountPriceTarget) {
          this.quickDiscountPriceTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
          this.quickDiscountPriceTarget.classList.add("border-gray-300");
        }
        if (this.discountPriceCardTarget) {
          this.discountPriceCardTarget.classList.add("bg-[#f6f7f9]");
          this.discountPriceCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
          const checkmark = this.discountPriceCardTarget.querySelector(".checkmark");
          if (checkmark) checkmark.remove();
        }
        break;
      case "airline": {
        this.filters.airlines.delete(value);
        const airlineCheckbox = this.element.querySelector(`input[type="checkbox"][data-filter-type="airline"][value="${value}"]`);
        if (airlineCheckbox) airlineCheckbox.checked = false;
        break;
      }
      case "departureAirport": {
        this.filters.departureAirports.delete(value);
        const depAirportCheckbox = this.element.querySelector(`input[type="checkbox"][data-filter-type="airport"][value="${value}"]`);
        if (depAirportCheckbox) depAirportCheckbox.checked = false;
        break;
      }
      case "arrivalAirport": {
        this.filters.arrivalAirports.delete(value);
        const arrAirportCheckbox = this.element.querySelector(`input[type="checkbox"][data-filter-type="airport"][value="${value}"]`);
        if (arrAirportCheckbox) arrAirportCheckbox.checked = false;
        break;
      }
      case "departureTime": {
        this.filters.departureTimeRanges.delete(value);
        const timeCheckbox = this.element.querySelector(`input[type="checkbox"][data-filter-type="departure-time"][value="${value}"]`);
        if (timeCheckbox) timeCheckbox.checked = false;
        break;
      }
      case "aircraftModel": {
        this.filters.aircraftModels.delete(value);
        const modelCheckbox = this.element.querySelector(`input[type="checkbox"][data-filter-type="aircraft-model"][value="${value}"]`);
        if (modelCheckbox) modelCheckbox.checked = false;
        break;
      }
    }
    this.updateResultCount();
  }
  // Helper method to create checkmark SVG
  createCheckmark() {
    const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    svg.setAttribute("class", "checkmark absolute bottom-0 right-0");
    svg.setAttribute("width", "16");
    svg.setAttribute("height", "16");
    svg.setAttribute("viewBox", "0 0 24 24");
    const bgPath = document.createElementNS("http://www.w3.org/2000/svg", "path");
    bgPath.setAttribute("d", "M24 24H0L24 0V24Z");
    bgPath.setAttribute("fill", "#fcc32a");
    svg.appendChild(bgPath);
    const checkPath = document.createElementNS("http://www.w3.org/2000/svg", "path");
    checkPath.setAttribute("d", "M14 18l2 2 4-4");
    checkPath.setAttribute("stroke", "white");
    checkPath.setAttribute("stroke-width", "2");
    checkPath.setAttribute("stroke-linecap", "round");
    checkPath.setAttribute("stroke-linejoin", "round");
    checkPath.setAttribute("fill", "none");
    svg.appendChild(checkPath);
    return svg;
  }
};

// app/javascript/controllers/flight_sort_controller.ts
var flight_sort_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    // Sort state
    this.currentSort = "default";
    // default, direct_priority, price_asc, departure_early, departure_late, arrival_early, arrival_late, duration_short
    this.directPriorityActive = false;
    this.pricePriorityActive = false;
  }
  static {
    this.targets = [
      "modal",
      "overlay",
      "directPriorityButton",
      "pricePriorityButton",
      "timeSortButton",
      "flightList"
    ];
  }
  static {
    this.values = {
      initialSort: { type: String, default: "default" }
    };
  }
  connect() {
    console.log("FlightSort controller connected");
    if (this.initialSortValue === "price_asc") {
      this.currentSort = "price_asc";
      this.pricePriorityActive = true;
      this.pricePriorityButtonTarget.classList.add("border-b-2", "border-black");
      this.pricePriorityButtonTarget.querySelector("span")?.classList.add("font-bold");
      this.pricePriorityButtonTarget.querySelector("span")?.classList.remove("text-gray-600");
    }
  }
  // Toggle direct flight priority
  toggleDirectPriority() {
    this.directPriorityActive = !this.directPriorityActive;
    if (this.directPriorityActive) {
      this.currentSort = "direct_priority";
      this.directPriorityButtonTarget.classList.add("border-b-2", "border-black");
      this.directPriorityButtonTarget.querySelector("span")?.classList.add("font-bold");
      this.directPriorityButtonTarget.querySelector("span")?.classList.remove("text-gray-600");
    } else {
      this.currentSort = "default";
      this.directPriorityButtonTarget.classList.remove("border-b-2", "border-black");
      this.directPriorityButtonTarget.querySelector("span")?.classList.remove("font-bold");
      this.directPriorityButtonTarget.querySelector("span")?.classList.add("text-gray-600");
    }
    this.applySort();
  }
  // Toggle price priority (low price first)
  togglePricePriority() {
    this.pricePriorityActive = !this.pricePriorityActive;
    if (this.pricePriorityActive) {
      this.currentSort = "price_asc";
      this.pricePriorityButtonTarget.classList.add("border-b-2", "border-black");
      this.pricePriorityButtonTarget.querySelector("span")?.classList.add("font-bold");
      this.pricePriorityButtonTarget.querySelector("span")?.classList.remove("text-gray-600");
    } else {
      this.currentSort = "default";
      this.pricePriorityButtonTarget.classList.remove("border-b-2", "border-black");
      this.pricePriorityButtonTarget.querySelector("span")?.classList.remove("font-bold");
      this.pricePriorityButtonTarget.querySelector("span")?.classList.add("text-gray-600");
    }
    this.applySort();
  }
  // Open time sort modal
  openTimeSortModal() {
    this.modalTarget.classList.remove("hidden");
    this.overlayTarget.classList.remove("hidden");
    setTimeout(() => {
      this.modalTarget.classList.remove("translate-y-full");
      this.overlayTarget.classList.remove("opacity-0");
    }, 10);
  }
  // Close modal
  closeModal() {
    this.modalTarget.classList.add("translate-y-full");
    this.overlayTarget.classList.add("opacity-0");
    setTimeout(() => {
      this.modalTarget.classList.add("hidden");
      this.overlayTarget.classList.add("hidden");
    }, 300);
  }
  // Apply sort option from time sort modal
  applySortOption(event2) {
    const button = event2.currentTarget;
    const sortType = button.dataset.sortType;
    if (!sortType) return;
    this.currentSort = sortType;
    this.updateTimeSortButtonText(sortType);
    this.applySort();
    this.closeModal();
  }
  // Update time sort button text based on selected sort
  updateTimeSortButtonText(sortType) {
    const textMap = {
      "departure_early": "\u8D77\u98DE\u65E9-\u665A",
      "departure_late": "\u8D77\u98DE\u665A-\u65E9",
      "arrival_early": "\u5230\u8FBE\u65E9-\u665A",
      "arrival_late": "\u5230\u8FBE\u665A-\u65E9",
      "duration_short": "\u8017\u65F6\u77ED-\u957F"
    };
    const buttonText = textMap[sortType];
    if (buttonText) {
      const span = this.timeSortButtonTarget.querySelector("span");
      if (span) {
        span.textContent = buttonText;
      }
      this.timeSortButtonTarget.classList.add("border-b-2", "border-black");
      this.timeSortButtonTarget.querySelector("span")?.classList.add("font-bold");
      this.timeSortButtonTarget.querySelector("span")?.classList.remove("text-gray-600");
    }
  }
  // Apply the current sort to flight list
  applySort() {
    const flightCards = Array.from(this.flightListTarget.children);
    if (flightCards.length === 0) return;
    let sortedCards = [];
    switch (this.currentSort) {
      case "direct_priority":
        sortedCards = flightCards.sort((a, b) => {
          const aDirect = !a.textContent?.includes("\u4E2D\u56FD\u9999\u6E2F") && !a.textContent?.includes("\u676D\u5DDE");
          const bDirect = !b.textContent?.includes("\u4E2D\u56FD\u9999\u6E2F") && !b.textContent?.includes("\u676D\u5DDE");
          if (aDirect && !bDirect) return -1;
          if (!aDirect && bDirect) return 1;
          const aPrice = this.extractPrice(a);
          const bPrice = this.extractPrice(b);
          return aPrice - bPrice;
        });
        break;
      case "price_asc":
        sortedCards = flightCards.sort((a, b) => {
          return this.extractPrice(a) - this.extractPrice(b);
        });
        break;
      case "departure_early":
        sortedCards = flightCards.sort((a, b) => {
          return this.extractDepartureTime(a) - this.extractDepartureTime(b);
        });
        break;
      case "departure_late":
        sortedCards = flightCards.sort((a, b) => {
          return this.extractDepartureTime(b) - this.extractDepartureTime(a);
        });
        break;
      case "arrival_early":
        sortedCards = flightCards.sort((a, b) => {
          return this.extractArrivalTime(a) - this.extractArrivalTime(b);
        });
        break;
      case "arrival_late":
        sortedCards = flightCards.sort((a, b) => {
          return this.extractArrivalTime(b) - this.extractArrivalTime(a);
        });
        break;
      case "duration_short":
        sortedCards = flightCards.sort((a, b) => {
          return this.extractDuration(a) - this.extractDuration(b);
        });
        break;
      default:
        sortedCards = flightCards;
    }
    sortedCards.forEach((card) => {
      this.flightListTarget.appendChild(card);
    });
    this.flightListTarget.classList.add("opacity-50");
    setTimeout(() => {
      this.flightListTarget.classList.remove("opacity-50");
    }, 150);
  }
  // Extract price from flight card
  extractPrice(card) {
    const priceText = card.querySelector(".text-red-500.font-bold")?.textContent;
    if (!priceText) return 0;
    const match = priceText.match(/(\d+)/);
    return match ? parseInt(match[1]) : 0;
  }
  // Extract departure time from flight card (convert to minutes since midnight)
  extractDepartureTime(card) {
    const timeText = card.querySelector(".text-3xl.font-bold")?.textContent;
    if (!timeText) return 0;
    const match = timeText.match(/(\d+):(\d+)/);
    if (!match) return 0;
    const hours = parseInt(match[1]);
    const minutes = parseInt(match[2]);
    return hours * 60 + minutes;
  }
  // Extract arrival time from flight card
  extractArrivalTime(card) {
    const timeElements = card.querySelectorAll(".text-3xl.font-bold");
    if (timeElements.length < 2) return 0;
    const timeText = timeElements[1].textContent;
    if (!timeText) return 0;
    const match = timeText.match(/(\d+):(\d+)/);
    if (!match) return 0;
    const hours = parseInt(match[1]);
    const minutes = parseInt(match[2]);
    const departureTime = this.extractDepartureTime(card);
    const arrivalTime = hours * 60 + minutes;
    return arrivalTime < departureTime ? arrivalTime + 24 * 60 : arrivalTime;
  }
  // Extract duration from flight card
  extractDuration(card) {
    const durationText = card.textContent;
    if (!durationText) return 0;
    const match = durationText.match(/(\d+)h(?:(\d+)m)?/);
    if (!match) return 0;
    const hours = parseInt(match[1]);
    const minutes = match[2] ? parseInt(match[2]) : 0;
    return hours * 60 + minutes;
  }
};

// app/javascript/controllers/flight_info_display_controller.ts
var flight_info_display_controller_default = class extends Controller {
  static {
    this.targets = ["info"];
  }
  static {
    this.values = { cabinClass: String };
  }
  connect() {
    this.updateDisplay();
  }
  updateDisplay() {
    const savedState = localStorage.getItem("passenger_selection");
    let displayText = "1\u6210\u4EBA";
    if (savedState) {
      try {
        const state = JSON.parse(savedState);
        const passengerNames = state.passengerNames || [];
        if (passengerNames.length > 0) {
          displayText = `${passengerNames.length}\u4F4D\u4E58\u673A\u4EBA`;
        } else {
          const adults = state.adults || 1;
          const children = state.children || 0;
          displayText = `${adults}\u6210\u4EBA`;
          if (children > 0) {
            displayText += ` ${children}\u513F\u7AE5`;
          }
        }
      } catch (e) {
        console.error("Failed to load passenger selection from localStorage:", e);
      }
    }
    if (this.cabinClassValue === "business") {
      displayText += " \xB7 \u516C\u52A1\u8231";
    } else if (this.cabinClassValue === "first_class") {
      displayText += " \xB7 \u5934\u7B49\u8231";
    }
    this.infoTarget.textContent = displayText;
  }
};

// app/javascript/controllers/date_link_controller.ts
var date_link_controller_default = class extends Controller {
  static {
    this.values = {
      url: String,
      selectedDate: String,
      allSegmentDates: Array,
      selectedFlightDates: Array,
      currentSegmentIndex: Number
    };
  }
  async navigate(event2) {
    event2.preventDefault();
    if (this.selectedDateValue && this.allSegmentDatesValue && this.allSegmentDatesValue.length > 0) {
      const selectedDate = new Date(this.selectedDateValue);
      const currentIndex = this.currentSegmentIndexValue;
      const segmentNumber = currentIndex + 1;
      let previousDate = null;
      if (currentIndex > 0) {
        if (this.selectedFlightDatesValue && this.selectedFlightDatesValue.length > 0) {
          const lastSelectedFlightDate = this.selectedFlightDatesValue[this.selectedFlightDatesValue.length - 1];
          if (lastSelectedFlightDate) {
            previousDate = new Date(lastSelectedFlightDate);
          }
        }
        if (!previousDate && this.allSegmentDatesValue[currentIndex - 1]) {
          previousDate = new Date(this.allSegmentDatesValue[currentIndex - 1]);
        }
      }
      let nextDate = null;
      if (currentIndex + 1 < this.allSegmentDatesValue.length) {
        nextDate = new Date(this.allSegmentDatesValue[currentIndex + 1]);
      }
      if (previousDate && selectedDate < previousDate) {
        if (window.showToast) {
          window.showToast(`\u7B2C${segmentNumber}\u7A0B\u65E5\u671F\u4E0D\u80FD\u65E9\u4E8E\u7B2C${currentIndex}\u7A0B\uFF0C\u8BF7\u8FD4\u56DE\u822A\u73ED\u9996\u9875\u4FEE\u6539`);
        }
        return;
      }
      if (nextDate && selectedDate > nextDate) {
        if (window.showToast) {
          window.showToast(`\u7B2C${segmentNumber}\u7A0B\u65E5\u671F\u4E0D\u80FD\u665A\u4E8E\u7B2C${currentIndex + 2}\u7A0B\uFF0C\u8BF7\u8FD4\u56DE\u822A\u73ED\u9996\u9875\u4FEE\u6539`);
        }
        return;
      }
    }
    try {
      const response = await fetch(this.urlValue, {
        headers: {
          "Accept": "text/vnd.turbo-stream.html, text/html",
          "Turbo-Frame": "_top"
        }
      });
      const contentType = response.headers.get("Content-Type");
      if (contentType?.includes("turbo-stream")) {
        const html = await response.text();
        renderStreamMessage(html);
      } else {
        visit(this.urlValue);
      }
    } catch (error3) {
      console.error("Navigation error:", error3);
      visit(this.urlValue);
    }
  }
};

// app/javascript/controllers/hotel_guest_selector_controller.ts
var hotel_guest_selector_controller_default = class extends Controller {
  static {
    this.targets = [
      "modal",
      "roomsCount",
      "adultsCount",
      "childrenCount",
      "roomsInput",
      "adultsInput",
      "childrenInput",
      "displayText"
    ];
  }
  static {
    this.values = {
      rooms: Number,
      adults: Number,
      children: Number
    };
  }
  connect() {
    console.log("HotelGuestSelector connected");
    const urlParams = new URLSearchParams(window.location.search);
    const roomsParam = urlParams.get("rooms");
    const adultsParam = urlParams.get("adults");
    const childrenParam = urlParams.get("children");
    if (this.hasRoomsInputTarget && this.hasAdultsInputTarget && this.hasChildrenInputTarget) {
      this.roomsValue = roomsParam && roomsParam !== "" ? parseInt(roomsParam) : parseInt(this.roomsInputTarget.value) || 1;
      this.adultsValue = adultsParam && adultsParam !== "" ? parseInt(adultsParam) : parseInt(this.adultsInputTarget.value) || 1;
      this.childrenValue = childrenParam && childrenParam !== "" ? parseInt(childrenParam) : parseInt(this.childrenInputTarget.value) || 0;
      this.updateCounts();
      this.updateDisplay();
    }
  }
  disconnect() {
    console.log("HotelGuestSelector disconnected");
  }
  // Open modal
  openModal() {
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // Close modal
  closeModal() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  // Increment rooms
  incrementRooms() {
    if (this.roomsValue < 10) {
      this.roomsValue++;
      this.updateCounts();
    }
  }
  // Decrement rooms
  decrementRooms() {
    if (this.roomsValue > 1) {
      this.roomsValue--;
      this.updateCounts();
    }
  }
  // Increment adults
  incrementAdults() {
    if (this.adultsValue < 20) {
      this.adultsValue++;
      this.updateCounts();
    }
  }
  // Decrement adults
  decrementAdults() {
    if (this.adultsValue > 1) {
      this.adultsValue--;
      this.updateCounts();
    }
  }
  // Increment children
  incrementChildren() {
    if (this.childrenValue < 10) {
      this.childrenValue++;
      this.updateCounts();
    }
  }
  // Decrement children
  decrementChildren() {
    if (this.childrenValue > 0) {
      this.childrenValue--;
      this.updateCounts();
    }
  }
  // Reset to defaults
  reset() {
    this.roomsValue = 1;
    this.adultsValue = 1;
    this.childrenValue = 0;
    this.updateCounts();
  }
  // Confirm and close
  confirm() {
    this.updateDisplay();
    this.dispatchGuestUpdateEvent();
    this.closeModal();
  }
  // Update count displays and hidden inputs
  updateCounts() {
    this.roomsCountTarget.textContent = this.roomsValue.toString();
    this.adultsCountTarget.textContent = this.adultsValue.toString();
    this.childrenCountTarget.textContent = this.childrenValue.toString();
    this.roomsInputTarget.value = this.roomsValue.toString();
    this.adultsInputTarget.value = this.adultsValue.toString();
    this.childrenInputTarget.value = this.childrenValue.toString();
  }
  // Update display text
  updateDisplay() {
    if (this.hasDisplayTextTarget) {
      this.displayTextTarget.textContent = `${this.roomsValue}\u95F4\u623F ${this.adultsValue}\u6210\u4EBA ${this.childrenValue}\u513F\u7AE5`;
    }
  }
  // Dispatch event to notify hotel-search controller
  dispatchGuestUpdateEvent() {
    const guestUpdateEvent = new CustomEvent("hotel-guest-selector:guests-updated", {
      detail: {
        rooms: this.roomsValue,
        adults: this.adultsValue,
        children: this.childrenValue
      },
      bubbles: true
    });
    document.dispatchEvent(guestUpdateEvent);
    console.log("Hotel guest selector: Dispatched guest update event", {
      rooms: this.roomsValue,
      adults: this.adultsValue,
      children: this.childrenValue
    });
  }
};

// app/javascript/controllers/hotel_date_picker_controller.ts
var hotel_date_picker_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.currentMonth = /* @__PURE__ */ new Date();
    this.checkInDate = null;
    this.checkOutDate = null;
  }
  static {
    this.targets = [
      "modal",
      "calendar",
      "monthLabel",
      "promptText",
      "checkInInput",
      "checkOutInput",
      "checkInDisplay",
      "checkOutDisplay",
      "nightsDisplay"
    ];
  }
  static {
    this.values = {
      checkIn: String,
      checkOut: String,
      selectingCheckIn: Boolean
    };
  }
  connect() {
    if (this.hasCheckInInputTarget && this.hasCheckOutInputTarget) {
      if (this.checkInInputTarget.value) {
        this.checkInDate = this.parseLocalDate(this.checkInInputTarget.value);
      }
      if (this.checkOutInputTarget.value) {
        this.checkOutDate = this.parseLocalDate(this.checkOutInputTarget.value);
      }
      this.updateDisplay();
    }
  }
  parseLocalDate(dateStr) {
    const parts = dateStr.split("-");
    if (parts.length === 3) {
      const year = parseInt(parts[0], 10);
      const month = parseInt(parts[1], 10) - 1;
      const day = parseInt(parts[2], 10);
      return new Date(year, month, day);
    }
    return /* @__PURE__ */ new Date();
  }
  openModal() {
    this.selectingCheckInValue = true;
    this.promptTextTarget.textContent = "\u8BF7\u9009\u62E9\u5165\u4F4F\u65E5\u671F";
    this.currentMonth = /* @__PURE__ */ new Date();
    this.renderMultiMonthCalendar();
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  closeModal() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  selectDate(event2) {
    const button = event2.currentTarget;
    const dateStr = button.dataset.date;
    if (!dateStr) return;
    const selectedDate = this.parseLocalDate(dateStr);
    if (this.selectingCheckInValue) {
      this.checkInDate = selectedDate;
      this.checkOutDate = null;
      this.selectingCheckInValue = false;
      this.promptTextTarget.textContent = "\u8BF7\u9009\u62E9\u79BB\u5E97\u65E5\u671F";
    } else {
      if (this.checkInDate && selectedDate <= this.checkInDate) {
        this.checkInDate = selectedDate;
        this.checkOutDate = null;
        this.promptTextTarget.textContent = "\u8BF7\u9009\u62E9\u79BB\u5E97\u65E5\u671F";
      } else {
        this.checkOutDate = selectedDate;
      }
    }
    this.renderMultiMonthCalendar();
  }
  confirm() {
    if (this.checkInDate && this.checkOutDate) {
      this.checkInInputTarget.value = this.formatDate(this.checkInDate);
      this.checkOutInputTarget.value = this.formatDate(this.checkOutDate);
      this.updateDisplay();
      this.dispatchDateUpdateEvent();
    } else {
      if (this.hasCheckInInputTarget) {
        this.checkInInputTarget.value = "";
      }
      if (this.hasCheckOutInputTarget) {
        this.checkOutInputTarget.value = "";
      }
      const dateUpdateEvent = new CustomEvent("hotel-date-picker:dates-selected", {
        detail: {
          checkIn: "",
          checkOut: ""
        },
        bubbles: true
      });
      document.dispatchEvent(dateUpdateEvent);
    }
    this.closeModal();
  }
  reset() {
    this.checkInDate = null;
    this.checkOutDate = null;
    this.selectingCheckInValue = true;
    this.promptTextTarget.textContent = "\u8BF7\u9009\u62E9\u5165\u4F4F\u65E5\u671F";
    if (this.hasCheckInInputTarget) {
      this.checkInInputTarget.value = "";
    }
    if (this.hasCheckOutInputTarget) {
      this.checkOutInputTarget.value = "";
    }
    this.renderMultiMonthCalendar();
    this.updateDisplay();
  }
  previousMonth() {
    this.currentMonth = new Date(this.currentMonth.getFullYear(), this.currentMonth.getMonth() - 1, 1);
    this.renderMultiMonthCalendar();
  }
  nextMonth() {
    this.currentMonth = new Date(this.currentMonth.getFullYear(), this.currentMonth.getMonth() + 1, 1);
    this.renderMultiMonthCalendar();
  }
  renderMultiMonthCalendar() {
    let html = "";
    for (let i = 0; i < 3; i++) {
      const displayMonth = new Date(this.currentMonth.getFullYear(), this.currentMonth.getMonth() + i, 1);
      html += this.renderSingleMonth(displayMonth);
    }
    this.calendarTarget.innerHTML = html;
    const year = this.currentMonth.getFullYear();
    const month = this.currentMonth.getMonth();
    this.monthLabelTarget.textContent = `${year}\u5E74${month + 1}\u6708`;
  }
  renderSingleMonth(displayMonth) {
    const year = displayMonth.getFullYear();
    const month = displayMonth.getMonth();
    let html = `<div class="mb-6">
      <div class="text-lg font-bold text-gray-900 mb-3">${year}\u5E74${month + 1}\u6708</div>
    `;
    const firstDay = new Date(year, month, 1);
    const lastDay = new Date(year, month + 1, 0);
    const daysInMonth = lastDay.getDate();
    const startingDayOfWeek = firstDay.getDay();
    const days = [];
    const prevMonthLastDay = new Date(year, month, 0).getDate();
    for (let i = startingDayOfWeek - 1; i >= 0; i--) {
      const day = prevMonthLastDay - i;
      const date = new Date(year, month - 1, day);
      days.push({
        date,
        dayOfMonth: day,
        isCurrentMonth: false,
        isToday: false,
        isSelected: false,
        isInRange: false,
        isDisabled: this.isDateDisabled(date)
      });
    }
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    for (let day = 1; day <= daysInMonth; day++) {
      const date = new Date(year, month, day);
      const isToday = date.getTime() === today.getTime();
      const isSelected = this.isDateSelected(date);
      const isInRange = this.isDateInRange(date);
      days.push({
        date,
        dayOfMonth: day,
        isCurrentMonth: true,
        isToday,
        isSelected,
        isInRange,
        isDisabled: this.isDateDisabled(date),
        label: this.getDateLabel(date),
        holiday: this.getHoliday(date)
      });
    }
    const remainingDays = 42 - days.length;
    for (let day = 1; day <= remainingDays; day++) {
      const date = new Date(year, month + 1, day);
      days.push({
        date,
        dayOfMonth: day,
        isCurrentMonth: false,
        isToday: false,
        isSelected: false,
        isInRange: false,
        isDisabled: this.isDateDisabled(date)
      });
    }
    html += this.renderDays(days);
    html += "</div>";
    return html;
  }
  renderDays(days) {
    const weekdays = ["\u65E5", "\u4E00", "\u4E8C", "\u4E09", "\u56DB", "\u4E94", "\u516D"];
    let html = '<div class="grid grid-cols-7 gap-1 mb-2">';
    weekdays.forEach((day) => {
      html += `<div class="text-center text-sm text-gray-500 py-2">${day}</div>`;
    });
    html += "</div>";
    html += '<div class="grid grid-cols-7 gap-1">';
    days.forEach((day) => {
      const dateStr = this.formatDate(day.date);
      const baseClasses = "relative h-12 flex flex-col items-center justify-center text-sm rounded-lg";
      let classes = baseClasses;
      let textColor = day.isCurrentMonth ? "text-gray-900" : "text-gray-300";
      let bgColor = "";
      if (day.isDisabled) {
        classes += " opacity-40 cursor-not-allowed";
      } else {
        classes += " cursor-pointer hover:bg-gray-100";
      }
      if (day.isSelected) {
        bgColor = "bg-yellow-400";
        textColor = "text-white font-bold";
      } else if (day.isInRange) {
        bgColor = "bg-yellow-50";
      }
      if (day.isToday && !day.isSelected) {
        classes += " border-2 border-blue-500";
      }
      const label = day.label || day.holiday || "";
      const labelClass = day.holiday ? "text-red-500" : "text-blue-500";
      html += `
        <button 
          data-date="${dateStr}"
          data-action="click->hotel-date-picker#selectDate"
          class="${classes} ${bgColor} ${textColor}"
          ${day.isDisabled ? "disabled" : ""}
        >
          <span class="font-medium">${day.dayOfMonth}</span>
          ${label ? `<span class="text-xs ${labelClass} absolute bottom-0">${label}</span>` : ""}
        </button>
      `;
    });
    html += "</div>";
    return html;
  }
  isDateDisabled(date) {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    return date < today;
  }
  isDateSelected(date) {
    if (this.checkInDate && this.isSameDay(date, this.checkInDate)) return true;
    if (this.checkOutDate && this.isSameDay(date, this.checkOutDate)) return true;
    return false;
  }
  isDateInRange(date) {
    if (!this.checkInDate || !this.checkOutDate) return false;
    return date > this.checkInDate && date < this.checkOutDate;
  }
  isSameDay(date1, date2) {
    return date1.getFullYear() === date2.getFullYear() && date1.getMonth() === date2.getMonth() && date1.getDate() === date2.getDate();
  }
  formatDate(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    return `${year}-${month}-${day}`;
  }
  getDateLabel(date) {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    const targetDate = new Date(date);
    targetDate.setHours(0, 0, 0, 0);
    const diffTime = targetDate.getTime() - today.getTime();
    const diffDays = Math.round(diffTime / (1e3 * 60 * 60 * 24));
    if (diffDays === 0) return "\u4ECA\u5929";
    if (diffDays === 1) return "\u660E\u5929";
    if (diffDays === 2) return "\u540E\u5929";
    const weekdays = ["\u5468\u65E5", "\u5468\u4E00", "\u5468\u4E8C", "\u5468\u4E09", "\u5468\u56DB", "\u5468\u4E94", "\u5468\u516D"];
    return weekdays[date.getDay()];
  }
  getHoliday(date) {
    const month = date.getMonth() + 1;
    const day = date.getDate();
    if (month === 1 && day === 1) return "\u5143\u65E6";
    if (month === 2 && day === 14) return "\u60C5\u4EBA\u8282";
    if (month === 5 && day === 1) return "\u52B3\u52A8\u8282";
    if (month === 6 && day === 1) return "\u513F\u7AE5\u8282";
    if (month === 10 && day === 1) return "\u56FD\u5E86\u8282";
    if (month === 12 && day === 25) return "\u5723\u8BDE\u8282";
    return "";
  }
  updateDisplay() {
    if (this.checkInDate) {
      const month = this.checkInDate.getMonth() + 1;
      const day = this.checkInDate.getDate();
      this.checkInDisplayTarget.textContent = `${month}\u6708${day}\u65E5`;
      const checkInLabel = this.checkInDisplayTarget.nextElementSibling;
      if (checkInLabel) {
        checkInLabel.textContent = this.getDateLabel(this.checkInDate);
      }
    }
    if (this.checkOutDate) {
      const month = this.checkOutDate.getMonth() + 1;
      const day = this.checkOutDate.getDate();
      this.checkOutDisplayTarget.textContent = `${month}\u6708${day}\u65E5`;
      const checkOutLabel = this.checkOutDisplayTarget.nextElementSibling;
      if (checkOutLabel) {
        checkOutLabel.textContent = this.getDateLabel(this.checkOutDate);
      }
    }
    if (this.checkInDate && this.checkOutDate && this.hasNightsDisplayTarget) {
      const nights = Math.floor((this.checkOutDate.getTime() - this.checkInDate.getTime()) / (1e3 * 60 * 60 * 24));
      this.nightsDisplayTarget.textContent = `${nights}\u665A`;
    }
  }
  // Dispatch date update event for hotel-search controller
  dispatchDateUpdateEvent() {
    if (!this.checkInDate || !this.checkOutDate) return;
    const dateUpdateEvent = new CustomEvent("hotel-date-picker:dates-selected", {
      detail: {
        checkIn: this.formatDate(this.checkInDate),
        checkOut: this.formatDate(this.checkOutDate)
      },
      bubbles: true
    });
    document.dispatchEvent(dateUpdateEvent);
    console.log("Hotel date picker: Dispatched dates update event", {
      checkIn: this.formatDate(this.checkInDate),
      checkOut: this.formatDate(this.checkOutDate)
    });
  }
};

// app/javascript/controllers/payment_modal_controller.ts
var payment_modal_controller_default = class extends Controller {
  static {
    this.targets = [
      "modal",
      "backdrop",
      "paymentOption",
      "paymentMethodInput"
    ];
  }
  static {
    this.values = {
      totalPrice: String
    };
  }
  connect() {
    console.log("PaymentModal connected");
  }
  // 
  open(event2) {
    event2.preventDefault();
    this.modalTarget.classList.remove("hidden");
    this.backdropTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // 
  close(event2) {
    if (event2) {
      event2.preventDefault();
    }
    this.modalTarget.classList.add("hidden");
    this.backdropTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  // 
  closeOnBackdrop(event2) {
    if (event2.target === event2.currentTarget) {
      this.close();
    }
  }
  // 
  selectPayment(event2) {
    const target = event2.currentTarget;
    const paymentMethod = target.dataset.paymentMethod;
    this.paymentOptionTargets.forEach((option) => {
      option.classList.remove("border-blue-500", "bg-blue-50");
      option.classList.add("border-gray-200");
      const checkmark2 = option.querySelector(".checkmark");
      if (checkmark2) {
        checkmark2.classList.add("hidden");
      }
    });
    target.classList.remove("border-gray-200");
    target.classList.add("border-blue-500", "bg-blue-50");
    const checkmark = target.querySelector(".checkmark");
    if (checkmark) {
      checkmark.classList.remove("hidden");
    }
    if (paymentMethod) {
      this.paymentMethodInputTarget.value = paymentMethod;
    }
  }
  //  - 
  confirmPayment(event2) {
    event2.preventDefault();
    const form = this.element.closest("form");
    if (form) {
      form.requestSubmit();
    }
  }
};

// app/javascript/controllers/payment_confirmation_controller.ts
var payment_confirmation_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.password = "";
  }
  static {
    this.targets = [
      "passwordModal",
      "fingerprintModal",
      "processingModal",
      "statusModal",
      "passwordDots",
      "passwordAmount",
      "processingAmount",
      "userEmail",
      "statusAmount",
      "statusUserEmail",
      "statusIcon",
      "statusText",
      "statusDots"
    ];
  }
  static {
    this.values = {
      amount: String,
      userEmail: String,
      paymentUrl: String,
      successUrl: String
    };
  }
  connect() {
    console.log("Payment confirmation controller connected");
  }
  showPasswordModal() {
    if (!this.hasPasswordModalTarget) {
      console.error("Password modal target not found");
      return;
    }
    this.password = "";
    if (this.hasPasswordDotsTarget) {
      this.updatePasswordDots();
    }
    if (this.hasPasswordAmountTarget) {
      this.passwordAmountTarget.textContent = this.amountValue;
    }
    this.passwordModalTarget.classList.remove("hidden");
  }
  closePasswordModal() {
    if (this.hasPasswordModalTarget) {
      this.passwordModalTarget.classList.add("hidden");
    }
  }
  inputPassword(event2) {
    const button = event2.currentTarget;
    const number = button.dataset.number;
    if (!number) return;
    if (this.password.length < 6) {
      this.password += number;
      this.updatePasswordDots();
      if (this.password.length === 6) {
        this.processPasswordPayment();
      }
    }
  }
  deletePassword() {
    if (this.password.length > 0) {
      this.password = this.password.slice(0, -1);
      this.updatePasswordDots();
    }
  }
  updatePasswordDots() {
    if (!this.hasPasswordDotsTarget) return;
    const dots = this.passwordDotsTarget.querySelectorAll(".password-dot");
    dots.forEach((dot, index) => {
      if (index < this.password.length) {
        dot.classList.add("active");
      } else {
        dot.classList.remove("active");
      }
    });
  }
  processPasswordPayment() {
    this.verifyPasswordThenPay();
  }
  async verifyPasswordThenPay() {
    try {
      const verifyResponse = await fetch("/profile/verify_pay_password", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "X-CSRF-Token": document.querySelector('meta[name="csrf-token"]')?.content || ""
        },
        body: JSON.stringify({
          pay_password: this.password
        })
      });
      const verifyData = await verifyResponse.json();
      if (!verifyResponse.ok || !verifyData.success) {
        const message = verifyData.message || "\u652F\u4ED8\u5BC6\u7801\u9519\u8BEF";
        if (message.includes("\u8BF7\u5148\u8BBE\u7F6E\u652F\u4ED8\u5BC6\u7801") || message.includes("\u8BBE\u7F6E\u652F\u4ED8\u5BC6\u7801")) {
          if (this.hasPasswordModalTarget) {
            this.passwordModalTarget.classList.add("hidden");
          }
          window.location.href = "/profile/edit_pay_password";
          return;
        }
        if (typeof window.showToast === "function") {
          window.showToast(message);
        } else {
          alert(message);
        }
        this.password = "";
        this.updatePasswordDots();
        if (this.hasPasswordModalTarget) {
          this.passwordModalTarget.classList.remove("hidden");
        }
        return;
      }
      if (this.hasPasswordModalTarget) {
        this.passwordModalTarget.classList.add("hidden");
      }
      this.showPayingStatus();
      await this.processActualPayment();
    } catch (error3) {
      console.error("\u9A8C\u8BC1\u652F\u4ED8\u5BC6\u7801\u5931\u8D25:", error3);
      if (typeof window.showToast === "function") {
        window.showToast("\u7F51\u7EDC\u9519\u8BEF\uFF0C\u8BF7\u91CD\u8BD5");
      } else {
        alert("\u7F51\u7EDC\u9519\u8BEF\uFF0C\u8BF7\u91CD\u8BD5");
      }
      this.password = "";
      this.updatePasswordDots();
      if (this.hasPasswordModalTarget) {
        this.passwordModalTarget.classList.remove("hidden");
      }
    }
  }
  async processActualPayment() {
    try {
      const response = await fetch(`${this.paymentUrlValue}.json`, {
        method: "PATCH",
        headers: {
          "Content-Type": "application/json",
          "Accept": "application/json",
          "X-CSRF-Token": document.querySelector('meta[name="csrf-token"]')?.content || ""
        },
        body: JSON.stringify({})
        // Password already verified, just trigger payment
      });
      const data2 = await response.json();
      if (response.ok && data2.success) {
        this.showPaymentSuccess();
        setTimeout(() => {
          window.location.href = this.successUrlValue;
        }, 2e3);
      } else {
        throw new Error(data2.message || "\u652F\u4ED8\u5931\u8D25");
      }
    } catch (error3) {
      console.error("\u652F\u4ED8\u5931\u8D25:", error3);
      this.closeStatusModal();
      const message = error3 instanceof Error ? error3.message : "\u652F\u4ED8\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5";
      if (typeof window.showToast === "function") {
        window.showToast(message);
      } else {
        alert(message);
      }
      this.password = "";
      this.showPasswordModal();
    }
  }
  showPayingStatus() {
    if (!this.hasStatusModalTarget) return;
    if (this.hasStatusAmountTarget) {
      this.statusAmountTarget.textContent = this.amountValue;
    }
    if (this.hasStatusUserEmailTarget) {
      this.statusUserEmailTarget.textContent = this.userEmailValue;
    }
    if (this.hasStatusIconTarget) {
      this.statusIconTarget.textContent = "\u{1F4B3}";
    }
    if (this.hasStatusTextTarget) {
      this.statusTextTarget.textContent = "\u6B63\u5728\u4ED8\u6B3E";
    }
    if (this.hasStatusDotsTarget) {
      this.statusDotsTarget.style.display = "block";
    }
    this.statusModalTarget.classList.remove("hidden");
  }
  closeProcessingModal() {
    if (this.hasStatusModalTarget) {
      this.statusModalTarget.classList.add("hidden");
    }
  }
  switchToPasswordPay() {
    this.closeStatusModal();
    this.showPasswordModal();
  }
  showPaymentSuccess() {
    if (this.hasStatusIconTarget) {
      this.statusIconTarget.textContent = "\u2713";
    }
    if (this.hasStatusTextTarget) {
      this.statusTextTarget.textContent = "\u4ED8\u6B3E\u6210\u529F";
    }
    if (this.hasStatusDotsTarget) {
      this.statusDotsTarget.style.display = "none";
    }
  }
  closeStatusModal() {
    if (this.hasStatusModalTarget) {
      this.statusModalTarget.classList.add("hidden");
    }
  }
};

// app/javascript/controllers/hotel_tabs_controller.ts
var hotel_tabs_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.activeTabType = "domestic";
  }
  static {
    this.targets = ["tab"];
  }
  connect() {
    const activeTab = this.element.querySelector("[data-tab-type].bg-white");
    this.activeTabType = activeTab?.dataset.tabType || "domestic";
    document.addEventListener("city-selector:switch-to-international", this.handleInternationalSwitch.bind(this));
  }
  disconnect() {
    document.removeEventListener("city-selector:switch-to-international", this.handleInternationalSwitch.bind(this));
  }
  // Handle international switch from city selector
  handleInternationalSwitch() {
    console.log("Hotel tabs: Received switch to international event");
    const internationalTab = this.tabTargets.find((tab) => tab.dataset.tabType === "international");
    if (internationalTab && this.activeTabType !== "international") {
      internationalTab.click();
    }
  }
  switchTab(event2) {
    const clickedTab = event2.currentTarget;
    const newTabType = clickedTab.dataset.tabType;
    if (!newTabType) return;
    if (newTabType === this.activeTabType) {
      return;
    }
    this.activeTabType = newTabType;
    this.tabTargets.forEach((tab) => {
      tab.classList.remove("bg-white", "rounded-t-[12px]", "px-3", "py-2.5", "relative");
      tab.classList.add("px-2", "py-2");
      const span = tab.querySelector("span");
      if (span) {
        span.className = "text-[13px] font-medium text-[#666666]";
      }
      if (tab.tagName === "BUTTON") {
        tab.classList.add("text-[13px]", "font-medium", "text-[#666666]", "cursor-pointer", "whitespace-nowrap");
      }
    });
    clickedTab.classList.remove("px-2", "py-2");
    clickedTab.classList.add("relative", "bg-white", "rounded-t-[12px]", "px-3", "py-2.5");
    if (clickedTab.tagName === "BUTTON") {
      const label = clickedTab.textContent?.trim() || "";
      clickedTab.innerHTML = `
        <div class="flex flex-col items-center">
          <span class="text-[15px] font-bold text-[#1a1a1a] leading-tight whitespace-nowrap">${label}</span>
        </div>
      `;
    } else {
      const span = clickedTab.querySelector("span");
      if (span) {
        span.className = "text-[15px] font-bold text-[#1a1a1a] leading-tight whitespace-nowrap";
      }
    }
    this.dispatch("typeChanged", { detail: { type: newTabType } });
    this.filterHotels(newTabType);
  }
  filterHotels(type) {
    console.log(`\u5207\u6362\u5230\u7C7B\u578B: ${type}`);
    const currentParams = new URLSearchParams(window.location.search);
    const citySelectorElement = document.querySelector('[data-controller*="city-selector"]');
    if (citySelectorElement) {
      const departureCityInput = citySelectorElement.querySelector('[data-city-selector-target="departureCityInput"]');
      if (departureCityInput && departureCityInput.value) {
        currentParams.set("city", departureCityInput.value);
        console.log(`\u4FDD\u7559\u9009\u62E9\u7684\u57CE\u5E02: ${departureCityInput.value}`);
      }
    }
    currentParams.delete("type");
    currentParams.delete("room_category");
    if (type === "domestic") {
      currentParams.set("location_type", "domestic");
    } else if (type === "international") {
      currentParams.set("location_type", "international");
    } else if (type === "hourly") {
      currentParams.set("location_type", "domestic");
      currentParams.set("room_category", "hourly");
    } else if (type === "homestay") {
      currentParams.set("location_type", "domestic");
      currentParams.set("type", "homestay");
    }
    const newUrl = `${window.location.pathname}?${currentParams.toString()}`;
    window.location.href = newUrl;
  }
};

// app/javascript/controllers/hotel_traveler_selector_controller.ts
var hotel_traveler_selector_controller_default = class extends Controller {
  static {
    this.targets = [
      "modal",
      "guestNameInput",
      "guestPhoneInput",
      "selectedPassenger",
      "checkbox"
    ];
  }
  static {
    this.values = {
      selectedPassengerId: String,
      selectedPassengerName: String,
      selectedPassengerPhone: String
    };
  }
  connect() {
    console.log("HotelTravelerSelector connected");
  }
  // Open modal
  openModal() {
    console.log("Opening traveler selector modal");
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // Close modal
  closeModal() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  // Toggle passenger selection via checkbox
  togglePassenger(event2) {
    const checkbox = event2.currentTarget;
    const passengerId = checkbox.dataset.passengerId || "";
    const passengerName = checkbox.dataset.passengerName || "";
    const passengerPhone = checkbox.dataset.passengerPhone || "";
    if (checkbox.checked) {
      this.checkboxTargets.forEach((cb) => {
        if (cb !== checkbox) {
          cb.checked = false;
        }
      });
      console.log("Selected passenger:", { passengerId, passengerName, passengerPhone });
      this.selectedPassengerIdValue = passengerId;
      this.selectedPassengerNameValue = passengerName;
      this.selectedPassengerPhoneValue = passengerPhone;
      this.guestNameInputTarget.value = passengerName;
      this.guestPhoneInputTarget.value = passengerPhone;
      if (this.hasSelectedPassengerTarget) {
        this.selectedPassengerTarget.textContent = passengerName;
      }
      this.closeModal();
    } else {
      console.log("Unselected passenger");
      this.selectedPassengerIdValue = "";
      this.selectedPassengerNameValue = "";
      this.selectedPassengerPhoneValue = "";
      this.guestNameInputTarget.value = "";
      this.guestPhoneInputTarget.value = "";
      if (this.hasSelectedPassengerTarget) {
        this.selectedPassengerTarget.textContent = "";
      }
    }
  }
  // Manual input - clear selection
  clearSelection() {
    this.selectedPassengerIdValue = "";
    this.selectedPassengerNameValue = "";
    this.selectedPassengerPhoneValue = "";
  }
  // Stop propagation for inner clicks
  stopPropagation(event2) {
    event2.stopPropagation();
  }
};

// app/javascript/controllers/toast_controller.ts
var toast_controller_default = class extends Controller {
  connect() {
    setTimeout(() => {
      this.element.classList.add("animate-fade-out");
      setTimeout(() => {
        if (this.element.parentNode) {
          this.element.parentNode.removeChild(this.element);
        }
      }, 300);
    }, 2e3);
  }
};

// app/javascript/controllers/toast_trigger_controller.ts
var toast_trigger_controller_default = class extends Controller {
  static {
    this.values = {
      message: String
    };
  }
  connect() {
    if (this.messageValue && window.showToast) {
      window.showToast(this.messageValue);
    }
    this.element.remove();
  }
};

// app/javascript/controllers/hotel_booking_controller.ts
var hotel_booking_controller_default = class extends Controller {
  static {
    this.targets = ["insuranceModal", "confirmModal", "form", "totalPriceAmount", "roomsCount", "roomsInput"];
  }
  // Handle insurance option selection in form
  selectInsuranceOption(event2) {
    const radio = event2.currentTarget;
    const insuranceType = radio.dataset.insuranceType || "none";
    const insurancePrice = radio.dataset.insurancePrice || "0";
    this.setInsuranceValues(insuranceType, insurancePrice);
    const allCards = document.querySelectorAll("[data-insurance-card]");
    allCards.forEach((card) => {
      card.classList.remove("border-orange-400", "border-gray-400");
      card.classList.add("border-2", "border-gray-300");
    });
    const selectedCard = radio.closest("[data-insurance-card]");
    if (selectedCard) {
      selectedCard.classList.remove("border-gray-300");
      if (insuranceType === "none") {
        selectedCard.classList.add("border-gray-400");
      } else {
        selectedCard.classList.add("border-orange-400");
      }
    }
    this.updateTotalPrice();
  }
  // Update total price display
  updateTotalPrice() {
    this.updateTotalPriceWithRooms();
  }
  setInsuranceValues(insuranceType, insurancePrice) {
    const insuranceTypeField = document.getElementById("hotel_booking_insurance_type");
    const insurancePriceField = document.getElementById("hotel_booking_insurance_price");
    if (insuranceTypeField) {
      insuranceTypeField.value = insuranceType;
    }
    if (insurancePriceField) {
      insurancePriceField.value = insurancePrice;
    }
  }
  // Handle submit button click
  handleSubmit(event2) {
    event2.preventDefault();
    const guestNameField = document.getElementById("hotel_booking_guest_name");
    const guestPhoneField = document.getElementById("hotel_booking_guest_phone");
    const guestName = guestNameField?.value?.trim() || "";
    const guestPhone = guestPhoneField?.value?.trim() || "";
    if (!guestName) {
      alert("\u8BF7\u586B\u5199\u5165\u4F4F\u4EBA\u59D3\u540D");
      guestNameField?.focus();
      return;
    }
    if (!guestPhone) {
      alert("\u8BF7\u586B\u5199\u8054\u7CFB\u624B\u673A");
      guestPhoneField?.focus();
      return;
    }
    const phoneRegex = /^1[3-9]\d{9}$/;
    if (!phoneRegex.test(guestPhone)) {
      alert("\u8BF7\u586B\u5199\u6B63\u786E\u7684\u624B\u673A\u53F7\u7801");
      guestPhoneField?.focus();
      return;
    }
    const insuranceTypeField = document.getElementById("hotel_booking_insurance_type");
    const insuranceType = insuranceTypeField?.value || "none";
    if (insuranceType === "none") {
      this.showInsuranceModal();
    } else {
      this.showConfirmModal();
    }
  }
  showInsuranceModal() {
    this.insuranceModalTarget.classList.remove("hidden");
  }
  closeInsuranceModal() {
    this.insuranceModalTarget.classList.add("hidden");
  }
  // Select recommended insurance from modal
  selectRecommendedInsurance(event2) {
    const button = event2.currentTarget;
    const insuranceType = button.dataset.insuranceType || "hotel_cancellation";
    const insurancePrice = button.dataset.insurancePrice || "16";
    this.setInsuranceValues(insuranceType, insurancePrice);
    const targetRadio = document.querySelector(`input[name="insurance_selection"][value="${insuranceType}"]`);
    if (targetRadio) {
      targetRadio.checked = true;
      targetRadio.dispatchEvent(new Event("change", { bubbles: true }));
    }
    this.closeInsuranceModal();
    this.showConfirmModal();
  }
  // Skip insurance selection
  skipInsurance() {
    this.setInsuranceValues("none", "0");
    this.closeInsuranceModal();
    this.showConfirmModal();
  }
  showConfirmModal() {
    this.confirmModalTarget.classList.remove("hidden");
    setTimeout(() => {
      this.submitForm();
    }, 1e4);
  }
  closeConfirmModal() {
    this.confirmModalTarget.classList.add("hidden");
  }
  submitForm() {
    console.log("Submitting form:", this.formTarget);
    this.formTarget.submit();
  }
  // Increase room count
  increaseRooms(event2) {
    event2.preventDefault();
    const currentCount = parseInt(this.roomsInputTarget.value || "1");
    const newCount = currentCount + 1;
    this.roomsInputTarget.value = newCount.toString();
    this.roomsCountTarget.textContent = `${newCount}\u95F4`;
    this.updateTotalPriceWithRooms();
  }
  // Decrease room count
  decreaseRooms(event2) {
    event2.preventDefault();
    const currentCount = parseInt(this.roomsInputTarget.value || "1");
    if (currentCount <= 1) return;
    const newCount = currentCount - 1;
    this.roomsInputTarget.value = newCount.toString();
    this.roomsCountTarget.textContent = `${newCount}\u95F4`;
    this.updateTotalPriceWithRooms();
  }
  // Update total price considering rooms count
  updateTotalPriceWithRooms() {
    if (!this.totalPriceAmountTarget) return;
    const roomPrice = parseFloat(this.totalPriceAmountTarget.dataset.roomPrice || "0");
    const nights = parseInt(this.totalPriceAmountTarget.dataset.nights || "1");
    const roomsCount = parseInt(this.roomsInputTarget.value || "1");
    const insurancePriceField = document.getElementById("hotel_booking_insurance_price");
    const insurancePrice = parseFloat(insurancePriceField?.value || "0");
    const basePrice = roomPrice * nights * roomsCount;
    const totalPrice = basePrice + insurancePrice;
    this.totalPriceAmountTarget.textContent = totalPrice.toFixed(2);
    this.totalPriceAmountTarget.dataset.basePrice = basePrice.toFixed(2);
  }
};

// app/javascript/controllers/tour_detail_controller.ts
var tour_detail_controller_default = class extends Controller {
  static {
    this.targets = [
      "packageSelector",
      "priceDisplay"
    ];
  }
  static {
    this.values = {
      selectedPackageId: Number
    };
  }
  connect() {
    console.log("TourDetail controller connected");
  }
  disconnect() {
    console.log("TourDetail controller disconnected");
  }
  // Navigate to packages tab
  selectPackage() {
    const currentUrl = new URL(window.location.href);
    currentUrl.searchParams.set("tab", "packages");
    window.location.href = currentUrl.toString();
  }
  // Select a specific package
  selectThisPackage(event2) {
    const target = event2.currentTarget;
    const packageId = target.dataset.packageId;
    if (packageId) {
      this.selectedPackageIdValue = parseInt(packageId);
      const currentUrl = new URL(window.location.href);
      currentUrl.searchParams.set("tab", "overview");
      currentUrl.searchParams.set("package_id", packageId);
      window.location.href = currentUrl.toString();
    }
  }
  // Scroll to specific section (for smooth navigation)
  scrollToSection(event2) {
    const target = event2.currentTarget;
    const sectionId = target.dataset.section;
    if (sectionId) {
      const section = document.getElementById(sectionId);
      if (section) {
        section.scrollIntoView({ behavior: "smooth", block: "start" });
      }
    }
  }
};

// app/javascript/controllers/carousel_controller.ts
var carousel_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    // Handle touch/swipe gestures
    this.touchStartX = 0;
    this.touchEndX = 0;
  }
  static {
    this.targets = ["slide", "indicator"];
  }
  static {
    this.values = {
      index: { type: Number, default: 0 },
      autoplay: { type: Boolean, default: false },
      interval: { type: Number, default: 5e3 }
    };
  }
  connect() {
    console.log("Carousel controller connected");
    this.showSlide(this.indexValue);
    if (this.autoplayValue) {
      this.startAutoplay();
    }
  }
  disconnect() {
    console.log("Carousel controller disconnected");
    this.stopAutoplay();
  }
  // Navigate to previous slide
  previous() {
    this.stopAutoplay();
    const newIndex = this.indexValue > 0 ? this.indexValue - 1 : this.slideTargets.length - 1;
    this.indexValue = newIndex;
    this.showSlide(newIndex);
  }
  // Navigate to next slide
  next() {
    this.stopAutoplay();
    const newIndex = this.indexValue < this.slideTargets.length - 1 ? this.indexValue + 1 : 0;
    this.indexValue = newIndex;
    this.showSlide(newIndex);
  }
  // Go to specific slide
  goTo(event2) {
    this.stopAutoplay();
    const target = event2.currentTarget;
    const index = parseInt(target.dataset.index || "0");
    this.indexValue = index;
    this.showSlide(index);
  }
  // Show specific slide
  showSlide(index) {
    this.slideTargets.forEach((slide, i) => {
      if (i === index) {
        slide.classList.remove("hidden");
      } else {
        slide.classList.add("hidden");
      }
    });
    if (this.hasIndicatorTarget) {
      this.indicatorTargets?.forEach((indicator, i) => {
        if (i === index) {
          indicator.classList.add("active");
        } else {
          indicator.classList.remove("active");
        }
      });
    }
  }
  // Autoplay functionality
  startAutoplay() {
    this.autoplayTimer = window.setInterval(() => {
      this.next();
    }, this.intervalValue);
  }
  stopAutoplay() {
    if (this.autoplayTimer) {
      clearInterval(this.autoplayTimer);
      this.autoplayTimer = void 0;
    }
  }
  handleTouchStart(event2) {
    this.touchStartX = event2.changedTouches[0].screenX;
  }
  handleTouchEnd(event2) {
    this.touchEndX = event2.changedTouches[0].screenX;
    this.handleSwipe();
  }
  handleSwipe() {
    const swipeThreshold = 50;
    const diff = this.touchStartX - this.touchEndX;
    if (Math.abs(diff) > swipeThreshold) {
      if (diff > 0) {
        this.next();
      } else {
        this.previous();
      }
    }
  }
};

// app/javascript/controllers/scroll_spy_controller.ts
var scroll_spy_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.observer = null;
    this.isScrolling = false;
  }
  static {
    this.targets = ["tab", "section"];
  }
  static {
    this.values = {
      offset: { type: Number, default: 120 }
      // Top offset for nav bars (top nav 56px + tab nav 56px + extra 8px)
    };
  }
  connect() {
    console.log("ScrollSpy controller connected");
    this.setupIntersectionObserver();
    this.updateActiveTab();
  }
  disconnect() {
    if (this.observer) {
      this.observer.disconnect();
    }
  }
  setupIntersectionObserver() {
    const options = {
      root: null,
      rootMargin: `-${this.offsetValue}px 0px -50% 0px`,
      // Active when section is near top
      threshold: 0
    };
    this.observer = new IntersectionObserver((entries) => {
      if (this.isScrolling) return;
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          const sectionId = entry.target.id;
          this.setActiveTab(sectionId);
        }
      });
    }, options);
    this.sectionTargets.forEach((section) => {
      this.observer?.observe(section);
    });
  }
  scrollToSection(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    const target = event2.currentTarget;
    const sectionId = target.dataset.section;
    if (!sectionId) return;
    const section = document.getElementById(sectionId);
    if (!section) return;
    this.isScrolling = true;
    const sectionTop = section.getBoundingClientRect().top + window.scrollY;
    const scrollTo = sectionTop - this.offsetValue;
    window.scrollTo({
      top: scrollTo,
      behavior: "smooth"
    });
    this.setActiveTab(sectionId);
    setTimeout(() => {
      this.isScrolling = false;
    }, 1e3);
  }
  setActiveTab(sectionId) {
    this.tabTargets.forEach((tab) => {
      tab.classList.remove("border-primary", "text-primary");
      tab.classList.add("border-transparent", "text-foreground-muted");
    });
    const activeTab = this.tabTargets.find((tab) => tab.dataset.section === sectionId);
    if (activeTab) {
      activeTab.classList.remove("border-transparent", "text-foreground-muted");
      activeTab.classList.add("border-primary", "text-primary");
      activeTab.scrollIntoView({
        behavior: "smooth",
        block: "nearest",
        inline: "center"
      });
    }
  }
  updateActiveTab() {
    const scrollPosition = window.pageYOffset + this.offsetValue + 10;
    for (let i = this.sectionTargets.length - 1; i >= 0; i--) {
      const section = this.sectionTargets[i];
      const sectionTop = section.offsetTop;
      if (scrollPosition >= sectionTop) {
        this.setActiveTab(section.id);
        break;
      }
    }
  }
};

// app/javascript/controllers/package_switcher_controller.ts
var package_switcher_controller_default = class extends Controller {
  static {
    this.targets = ["card", "details"];
  }
  static {
    this.values = {
      selectedId: Number
    };
  }
  connect() {
    console.log("PackageSwitcher connected");
    window.addEventListener("booking-modal:package-changed", (event2) => {
      const customEvent = event2;
      const packageId = customEvent.detail.packageId;
      if (packageId && packageId !== this.selectedIdValue) {
        this.syncPackageSelection(packageId);
      }
    });
    window.addEventListener("booking-modal:request-sync", () => {
      const syncEvent = new CustomEvent("package:selected", {
        detail: { packageId: this.selectedIdValue }
      });
      window.dispatchEvent(syncEvent);
    });
  }
  selectPackage(event2) {
    const card = event2.currentTarget;
    const packageId = parseInt(card.dataset.packageId || "0");
    if (packageId === this.selectedIdValue) {
      return;
    }
    this.selectedIdValue = packageId;
    this.updatePackageUI(packageId);
    const customEvent = new CustomEvent("package:selected", {
      detail: { packageId }
    });
    window.dispatchEvent(customEvent);
  }
  syncPackageSelection(packageId) {
    this.selectedIdValue = packageId;
    this.updatePackageUI(packageId);
  }
  updatePackageUI(packageId) {
    this.cardTargets.forEach((cardEl) => {
      const cardPackageId = parseInt(cardEl.dataset.packageId || "0");
      if (cardPackageId === packageId) {
        cardEl.classList.remove("bg-white", "border-gray-100", "border");
        cardEl.classList.add("bg-[#FFF9E6]", "border-2", "border-[#FFD700]");
        const checkmark = cardEl.querySelector('svg[viewBox="0 0 20 20"]');
        if (checkmark) {
          checkmark.classList.remove("hidden");
        }
      } else {
        cardEl.classList.remove("bg-[#FFF9E6]", "border-2", "border-[#FFD700]");
        cardEl.classList.add("bg-white", "border", "border-gray-100");
        const checkmark = cardEl.querySelector('svg[viewBox="0 0 20 20"]');
        if (checkmark) {
          checkmark.classList.add("hidden");
        }
      }
    });
    const detailsContainer = this.detailsTarget;
    const allDetails = detailsContainer.querySelectorAll("[data-package-id]");
    allDetails.forEach((detail) => {
      const detailElement = detail;
      const detailPackageId = parseInt(detailElement.dataset.packageId || "0");
      if (detailPackageId === packageId) {
        detailElement.classList.remove("hidden");
      } else {
        detailElement.classList.add("hidden");
      }
    });
  }
};

// app/javascript/controllers/booking_modal_controller.ts
var booking_modal_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedPackageId = null;
    this.selectedDate = null;
    this.adultQuantity = 1;
    this.childQuantity = 0;
  }
  static {
    this.targets = [
      "modal",
      "packageBtn",
      "monthTab",
      "calendar",
      "dateBtn",
      "adultCount",
      "childCount"
    ];
  }
  connect() {
    console.log("Booking modal controller connected");
    window.addEventListener("package:selected", (event2) => {
      const customEvent = event2;
      const packageId = customEvent.detail.packageId;
      if (packageId && packageId !== this.selectedPackageId) {
        this.syncPackageSelection(packageId);
      }
    });
    window.addEventListener("bottom-bar:open-modal", () => {
      this.open();
    });
  }
  open() {
    const event2 = new CustomEvent("booking-modal:request-sync");
    window.dispatchEvent(event2);
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  close() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  selectPackage(event2) {
    const btn = event2.currentTarget;
    const packageId = parseInt(btn.dataset.packageId || "0");
    this.selectedPackageId = packageId;
    this.updatePackageButtons(packageId);
    const customEvent = new CustomEvent("booking-modal:package-changed", {
      detail: { packageId }
    });
    window.dispatchEvent(customEvent);
  }
  syncPackageSelection(packageId) {
    this.selectedPackageId = packageId;
    this.updatePackageButtons(packageId);
  }
  updatePackageButtons(packageId) {
    this.packageBtnTargets.forEach((btnEl) => {
      const btnPackageId = parseInt(btnEl.dataset.packageId || "0");
      if (btnPackageId === packageId) {
        btnEl.classList.remove("bg-white", "border-gray-200");
        btnEl.classList.add("bg-[#FFF9E6]", "border-[#FFD700]");
        if (!btnEl.querySelector("svg")) {
          const checkmark = document.createElementNS("http://www.w3.org/2000/svg", "svg");
          checkmark.classList.add("absolute", "top-2", "right-2", "w-5", "h-5");
          checkmark.style.color = "#FFD700";
          checkmark.setAttribute("fill", "currentColor");
          checkmark.setAttribute("viewBox", "0 0 20 20");
          const pathD = "M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z";
          checkmark.innerHTML = `<path fill-rule="evenodd" d="${pathD}" clip-rule="evenodd"></path>`;
          btnEl.appendChild(checkmark);
        }
      } else {
        btnEl.classList.remove("bg-[#FFF9E6]", "border-[#FFD700]");
        btnEl.classList.add("bg-white", "border-gray-200");
        const checkmark = btnEl.querySelector("svg");
        if (checkmark) {
          checkmark.remove();
        }
      }
    });
  }
  selectMonth(event2) {
    const btn = event2.currentTarget;
    const month = btn.dataset.month;
    this.monthTabTargets.forEach((tabEl) => {
      if (tabEl.dataset.month === month) {
        tabEl.classList.remove("text-foreground-muted");
        tabEl.classList.add("text-red-500", "border-b-2", "border-red-500");
      } else {
        tabEl.classList.remove("text-red-500", "border-b-2", "border-red-500");
        tabEl.classList.add("text-foreground-muted");
      }
    });
  }
  selectDate(event2) {
    const btn = event2.currentTarget;
    const date = btn.dataset.date;
    if (!date || btn.disabled) return;
    this.selectedDate = date;
    this.dateBtnTargets.forEach((dateBtn) => {
      if (dateBtn.dataset.date === date) {
        dateBtn.style.background = "#FFD700";
        dateBtn.style.color = "#000";
      } else {
        dateBtn.style.background = "";
        dateBtn.style.color = "";
      }
    });
  }
  increaseAdult() {
    this.adultQuantity++;
    this.adultCountTarget.textContent = this.adultQuantity.toString();
  }
  decreaseAdult() {
    if (this.adultQuantity > 1) {
      this.adultQuantity--;
      this.adultCountTarget.textContent = this.adultQuantity.toString();
    }
  }
  increaseChild() {
    this.childQuantity++;
    this.childCountTarget.textContent = this.childQuantity.toString();
  }
  decreaseChild() {
    if (this.childQuantity > 0) {
      this.childQuantity--;
      this.childCountTarget.textContent = this.childQuantity.toString();
    }
  }
  addToCart() {
    if (!this.validateSelection()) {
      return;
    }
    console.log("Adding to cart:", {
      packageId: this.selectedPackageId,
      date: this.selectedDate,
      adults: this.adultQuantity,
      children: this.childQuantity
    });
    alert("\u5DF2\u52A0\u5165\u8D2D\u7269\u8F66");
    this.close();
  }
  buyNow() {
    if (!this.validateSelection()) {
      return;
    }
    const productId = window.location.pathname.split("/").pop();
    const params = new URLSearchParams({
      product_id: productId || "",
      package_id: (this.selectedPackageId || "").toString(),
      travel_date: this.selectedDate || "",
      adult_count: this.adultQuantity.toString(),
      child_count: this.childQuantity.toString()
    });
    window.location.href = `/tour_group_bookings/new?${params.toString()}`;
  }
  validateSelection() {
    if (!this.selectedDate) {
      alert("\u8BF7\u9009\u62E9\u51FA\u884C\u65E5\u671F");
      return false;
    }
    if (this.adultQuantity < 1) {
      alert("\u81F3\u5C11\u9700\u89811\u4F4D\u6210\u4EBA");
      return false;
    }
    return true;
  }
};

// app/javascript/controllers/bottom_bar_controller.ts
var bottom_bar_controller_default = class extends Controller {
  connect() {
    console.log("Bottom bar controller connected");
  }
  openModal() {
    const event2 = new CustomEvent("bottom-bar:open-modal");
    window.dispatchEvent(event2);
  }
};

// app/javascript/controllers/insurance_selector_controller.ts
var insurance_selector_controller_default = class extends Controller {
  static {
    this.targets = ["radio", "totalPrice"];
  }
  static {
    this.values = {
      basePrice: Number,
      adultCount: Number,
      childCount: Number
    };
  }
  connect() {
    console.log("InsuranceSelector connected");
  }
  disconnect() {
    console.log("InsuranceSelector disconnected");
  }
  updatePrice() {
    const selectedRadio = this.radioTargets.find((radio) => radio.checked);
    if (!selectedRadio) return;
    const insuranceType = selectedRadio.value;
    const totalPeople = this.adultCountValue + this.childCountValue;
    let insurancePrice = 0;
    if (insuranceType === "standard") {
      insurancePrice = 15 * totalPeople;
    } else if (insuranceType === "premium") {
      insurancePrice = 35 * totalPeople;
    }
    const totalPrice = this.basePriceValue + insurancePrice;
    this.totalPriceTarget.textContent = `\xA5${Math.round(totalPrice)}`;
  }
};

// app/javascript/controllers/tour_traveler_selector_controller.ts
var tour_traveler_selector_controller_default = class extends Controller {
  static {
    this.targets = [
      "modal",
      "travelerNameInput",
      "travelerIdInput"
    ];
  }
  static {
    this.values = {
      selectedPassengerId: String,
      selectedPassengerName: String,
      selectedPassengerIdNumber: String,
      travelerIndex: Number
    };
  }
  connect() {
    console.log("TourTravelerSelector connected");
  }
  disconnect() {
    console.log("TourTravelerSelector disconnected");
  }
  // Open modal for specific traveler
  openModal(event2) {
    const target = event2.currentTarget;
    const travelerIndex = parseInt(target.dataset.travelerIndex || "0");
    console.log("Opening traveler selector modal for index:", travelerIndex);
    this.travelerIndexValue = travelerIndex;
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // Close modal
  closeModal() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  // Select a passenger from the list
  selectPassenger(event2) {
    const target = event2.currentTarget;
    const passengerId = target.dataset.passengerId || "";
    const passengerName = target.dataset.passengerName || "";
    const passengerIdNumber = target.dataset.passengerIdNumber || "";
    console.log("Selected passenger:", { passengerId, passengerName, passengerIdNumber, travelerIndex: this.travelerIndexValue });
    this.selectedPassengerIdValue = passengerId;
    this.selectedPassengerNameValue = passengerName;
    this.selectedPassengerIdNumberValue = passengerIdNumber;
    if (this.travelerNameInputTargets[this.travelerIndexValue]) {
      this.travelerNameInputTargets[this.travelerIndexValue].value = passengerName;
    }
    if (this.travelerIdInputTargets[this.travelerIndexValue]) {
      this.travelerIdInputTargets[this.travelerIndexValue].value = passengerIdNumber;
    }
    this.closeModal();
  }
  // Stop propagation for inner clicks
  stopPropagation(event2) {
    event2.stopPropagation();
  }
};

// app/javascript/controllers/special_flights_form_controller.ts
var special_flights_form_controller_default = class extends Controller {
  connect() {
    console.log("SpecialFlightsForm controller connected");
  }
  handleSubmit(event2) {
    event2.preventDefault();
    const form = this.element;
    const formData = new FormData(form);
    const destinationCities = formData.get("destination_cities");
    const departureCity = formData.get("departure_city");
    const date = formData.get("date");
    const sortBy = formData.get("sort_by");
    const tripType = formData.get("trip_type");
    const cities = destinationCities.split(",").map((city) => city.trim()).filter((city) => city !== "");
    const isMultiCity = cities.length > 1;
    let url;
    const params = new URLSearchParams();
    if (isMultiCity) {
      url = "/flights/combinations";
      params.append("departure_city", departureCity);
      params.append("destination_cities", destinationCities);
      params.append("date", date);
      params.append("sort_by", sortBy);
      params.append("trip_type", tripType);
    } else {
      url = "/flights/search";
      params.append("departure_city", departureCity);
      params.append("destination_city", cities[0] || destinationCities);
      params.append("date", date);
      params.append("sort_by", sortBy);
      params.append("trip_type", tripType);
    }
    const fullUrl = `${url}?${params.toString()}`;
    console.log("Redirecting to:", fullUrl);
    window.location.href = fullUrl;
  }
};

// app/javascript/controllers/train_booking_controller.ts
var train_booking_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.basePrice = 0;
    this.insurancePrice = 0;
    this.currentCarriage = "";
    this.selectedSeats = /* @__PURE__ */ new Set();
    this.maxSeats = 1;
  }
  static {
    this.targets = [
      "totalPrice",
      "selectedCarriage",
      "carriageButton",
      "seatButton",
      "selectedSeatCount"
    ];
  }
  connect() {
    const priceField = document.getElementById("booking_total_price");
    if (priceField) {
      this.basePrice = parseFloat(priceField.value || "0");
    }
    this.updateTotalPrice();
  }
  selectPassenger(event2) {
    const radio = event2.currentTarget;
    const passengerName = radio.dataset.passengerName || "";
    const idNumber = radio.dataset.idNumber || "";
    const phone = radio.dataset.phone || "";
    const nameField = document.getElementById("booking_passenger_name");
    const idField = document.getElementById("booking_passenger_id_number");
    const phoneField = document.getElementById("booking_contact_phone");
    if (nameField) nameField.value = passengerName;
    if (idField) idField.value = idNumber;
    if (phoneField) phoneField.value = phone;
  }
  selectCarriage(event2) {
    const button = event2.currentTarget;
    const carriage = button.dataset.carriage || "";
    if (this.currentCarriage === carriage) {
      button.classList.remove("bg-orange-500", "text-white", "border-orange-500");
      button.classList.add("bg-white", "text-gray-700", "border-gray-300");
      this.selectedCarriageTarget.value = "";
      this.currentCarriage = "";
    } else {
      this.carriageButtonTargets.forEach((btn) => {
        btn.classList.remove("bg-orange-500", "text-white", "border-orange-500");
        btn.classList.add("bg-white", "text-gray-700", "border-gray-300");
      });
      button.classList.remove("bg-white", "text-gray-700", "border-gray-300");
      button.classList.add("bg-orange-500", "text-white", "border-orange-500");
      this.selectedCarriageTarget.value = carriage;
      this.currentCarriage = carriage;
    }
  }
  selectSeat(event2) {
    const button = event2.currentTarget;
    const seatLetter = button.dataset.seatLetter || "";
    if (!seatLetter) return;
    if (this.selectedSeats.has(seatLetter)) {
      this.selectedSeats.delete(seatLetter);
      button.classList.remove("bg-orange-500", "text-white", "border-orange-500");
      button.classList.add("bg-white", "text-gray-700", "border-gray-300");
    } else {
      if (this.selectedSeats.size >= this.maxSeats) {
        window.showToast(`\u6700\u591A\u53EA\u80FD\u9009\u62E9${this.maxSeats}\u4E2A\u5EA7\u4F4D`);
        return;
      }
      this.selectedSeats.add(seatLetter);
      button.classList.remove("bg-white", "text-gray-700", "border-gray-300", "bg-gray-100", "text-gray-400");
      button.classList.add("bg-orange-500", "text-white", "border-orange-500");
    }
    this.updateSelectedSeatCount();
  }
  updateSelectedSeatCount() {
    if (this.selectedSeatCountTarget) {
      this.selectedSeatCountTarget.textContent = `${this.selectedSeats.size}/${this.maxSeats}`;
    }
  }
  toggleNearDoor(event2) {
    const checkbox = event2.currentTarget;
    if (checkbox.checked) {
      console.log("Near door option selected");
    }
  }
  handleNormalBooking() {
    const form = this.element.querySelector("form");
    if (!form) return;
    const passengerRadio = document.querySelector('input[name="passenger"]:checked');
    if (!passengerRadio) {
      window.showToast("\u8BF7\u9009\u62E9\u4E58\u8F66\u4EBA");
      return;
    }
    const phoneField = document.getElementById("booking_contact_phone");
    if (!phoneField || !phoneField.value.trim()) {
      window.showToast("\u8BF7\u8F93\u5165\u8054\u7CFB\u624B\u673A");
      return;
    }
    const acceptTermsField = document.getElementById("booking_accept_terms");
    if (acceptTermsField) {
      acceptTermsField.value = "1";
    }
    HTMLFormElement.prototype.submit.call(form);
  }
  selectInsuranceOption(event2) {
    const radio = event2.currentTarget;
    const insuranceType = radio.value;
    const insurancePrice = parseFloat(radio.dataset.price || "0");
    const insuranceTypeField = document.getElementById("booking_insurance_type");
    const insurancePriceField = document.getElementById("booking_insurance_price");
    if (insuranceTypeField) insuranceTypeField.value = insuranceType;
    if (insurancePriceField) insurancePriceField.value = insurancePrice.toString();
    this.insurancePrice = insurancePrice;
    this.updateTotalPrice();
  }
  handleSubmit(event2) {
    event2.preventDefault();
    const passengerRadio = document.querySelector('input[name="passenger"]:checked');
    if (!passengerRadio) {
      alert("\u8BF7\u9009\u62E9\u4E58\u8F66\u4EBA");
      return;
    }
    const phoneField = document.getElementById("booking_contact_phone");
    if (!phoneField || !phoneField.value.trim()) {
      alert("\u8BF7\u8F93\u5165\u8054\u7CFB\u624B\u673A");
      return;
    }
    const visualCheckbox = document.getElementById("visual_accept_terms");
    if (!visualCheckbox || !visualCheckbox.checked) {
      this.showTermsModal();
      return;
    }
    const insuranceTypeField = document.getElementById("booking_insurance_type");
    const insuranceType = insuranceTypeField?.value || "none";
    if (insuranceType === "none") {
      this.showInsuranceModal();
    } else {
      this.submitBooking();
    }
  }
  showTermsModal() {
    const modal = document.createElement("div");
    modal.className = "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50";
    modal.innerHTML = `
      <div class="bg-white rounded-lg p-6 max-w-md mx-4">
        <h3 class="text-xl font-bold mb-4">\u7528\u6237\u534F\u8BAE\u548C\u9690\u79C1\u653F\u7B56</h3>
        <div class="max-h-60 overflow-y-auto mb-4 text-sm text-gray-600">
          <p class="mb-2">\u6B22\u8FCE\u4F7F\u7528\u6211\u4EEC\u7684\u670D\u52A1\u3002\u8BF7\u4ED4\u7EC6\u9605\u8BFB\u4EE5\u4E0B\u6761\u6B3E\uFF1A</p>
          <p class="mb-2">1. \u670D\u52A1\u6761\u6B3E...</p>
          <p class="mb-2">2. \u9690\u79C1\u653F\u7B56...</p>
          <p class="mb-2">3. \u9000\u6539\u89C4\u5219...</p>
        </div>
        <div class="flex space-x-3">
          <button class="flex-1 py-3 border border-gray-300 rounded" data-action="decline">
            \u4E0D\u540C\u610F
          </button>
          <button class="flex-1 py-3 bg-orange-500 text-white rounded" data-action="accept">
            \u540C\u610F
          </button>
        </div>
      </div>
    `;
    const declineBtn = modal.querySelector('[data-action="decline"]');
    const acceptBtn = modal.querySelector('[data-action="accept"]');
    declineBtn?.addEventListener("click", () => {
      document.body.removeChild(modal);
    });
    acceptBtn?.addEventListener("click", () => {
      this.acceptTerms();
      document.body.removeChild(modal);
    });
    document.body.appendChild(modal);
  }
  acceptTerms() {
    const visualCheckbox = document.getElementById("visual_accept_terms");
    const hiddenField = document.getElementById("booking_accept_terms");
    if (visualCheckbox) visualCheckbox.checked = true;
    if (hiddenField) hiddenField.value = "1";
    const insuranceTypeField = document.getElementById("booking_insurance_type");
    const insuranceType = insuranceTypeField?.value || "none";
    if (insuranceType === "none") {
      this.showInsuranceModal();
    } else {
      this.submitBooking();
    }
  }
  showInsuranceModal() {
    const existingModal = document.getElementById("insurance_recommendation_modal");
    if (existingModal) {
      existingModal.classList.remove("hidden");
      return;
    }
    const modal = document.createElement("div");
    modal.id = "insurance_recommendation_modal";
    modal.className = "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50";
    modal.innerHTML = `
      <div class="bg-white rounded-lg p-6 max-w-md mx-4">
        <h3 class="text-xl font-bold mb-4">\u5EFA\u8BAE\u8D2D\u4E70\u4FDD\u9669</h3>
        <p class="text-gray-600 mb-6">\u4E3A\u4E86\u60A8\u7684\u51FA\u884C\u5B89\u5168\uFF0C\u5EFA\u8BAE\u8D2D\u4E70\u51FA\u884C\u4FDD\u9669</p>
        
        <div class="space-y-3 mb-6">
          <label class="flex items-center justify-between p-3 border rounded cursor-pointer">
            <div>
              <div class="font-medium">\u6807\u51C6\u4FDD\u9669</div>
              <div class="text-sm text-gray-500">\xA530</div>
            </div>
            <input type="radio" name="insurance_modal" value="standard" data-price="30" class="w-5 h-5" />
          </label>
          
          <label class="flex items-center justify-between p-3 border rounded cursor-pointer">
            <div>
              <div class="font-medium">\u9AD8\u7EA7\u4FDD\u9669</div>
              <div class="text-sm text-gray-500">\xA550</div>
            </div>
            <input type="radio" name="insurance_modal" value="premium" data-price="50" class="w-5 h-5" />
          </label>
        </div>
        
        <div class="flex space-x-3">
          <button class="flex-1 py-3 border border-gray-300 rounded" data-action="skip-insurance">
            \u653E\u5F03\u4FDD\u9669
          </button>
          <button class="flex-1 py-3 bg-orange-500 text-white rounded" data-action="select-insurance">
            \u786E\u8BA4\u9009\u62E9
          </button>
        </div>
      </div>
    `;
    const skipBtn = modal.querySelector('[data-action="skip-insurance"]');
    const selectBtn = modal.querySelector('[data-action="select-insurance"]');
    skipBtn?.addEventListener("click", () => {
      document.body.removeChild(modal);
      this.submitBooking();
    });
    selectBtn?.addEventListener("click", () => {
      const selectedRadio = modal.querySelector('input[name="insurance_modal"]:checked');
      if (selectedRadio) {
        const insuranceType = selectedRadio.value;
        const insurancePrice = parseFloat(selectedRadio.dataset.price || "0");
        const insuranceTypeField = document.getElementById("booking_insurance_type");
        const insurancePriceField = document.getElementById("booking_insurance_price");
        if (insuranceTypeField) insuranceTypeField.value = insuranceType;
        if (insurancePriceField) insurancePriceField.value = insurancePrice.toString();
        this.insurancePrice = insurancePrice;
        this.updateTotalPrice();
      }
      document.body.removeChild(modal);
      this.submitBooking();
    });
    document.body.appendChild(modal);
  }
  submitBooking() {
    const form = this.element.querySelector("form");
    if (form) {
      form.submit();
    }
  }
  updateTotalPrice() {
    const total = this.basePrice + this.insurancePrice;
    if (this.totalPriceTarget) {
      this.totalPriceTarget.textContent = `\xA5${Math.round(total)}`;
    }
  }
};

// app/javascript/controllers/train_booking_lock_controller.ts
var train_booking_lock_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.lockingInterval = null;
    this.currentProgress = 0;
  }
  static {
    this.targets = [
      "statusTitle",
      "statusMessage",
      "progressPercent",
      "progressCircle",
      "seatIcon",
      "seatDisplay",
      "seatBadge",
      "paymentBar",
      "cancelBar"
    ];
  }
  connect() {
    this.startLockingAnimation();
  }
  disconnect() {
    if (this.lockingInterval) {
      clearInterval(this.lockingInterval);
    }
  }
  startLockingAnimation() {
    const totalDuration = 5e3;
    const updateInterval = 50;
    const totalSteps = totalDuration / updateInterval;
    const progressStep = 100 / totalSteps;
    this.lockingInterval = window.setInterval(() => {
      this.currentProgress += progressStep;
      if (this.currentProgress >= 100) {
        this.currentProgress = 100;
        this.completeLocking();
        if (this.lockingInterval) {
          clearInterval(this.lockingInterval);
        }
      }
      this.updateProgress(this.currentProgress);
    }, updateInterval);
  }
  updateProgress(progress) {
    if (this.hasProgressPercentTarget) {
      this.progressPercentTarget.textContent = Math.floor(progress).toString();
    }
    if (this.hasProgressCircleTarget) {
      const circumference = 534;
      const offset = circumference - progress / 100 * circumference;
      this.progressCircleTarget.style.strokeDashoffset = offset.toString();
    }
    if (this.hasSeatIconTarget) {
      if (progress % 20 < 2) {
        this.seatIconTarget.style.transform = "scale(1.2)";
        setTimeout(() => {
          if (this.hasSeatIconTarget) {
            this.seatIconTarget.style.transform = "scale(1)";
          }
        }, 200);
      }
    }
  }
  completeLocking() {
    if (this.hasStatusTitleTarget) {
      this.statusTitleTarget.textContent = "\u5360\u5EA7\u6210\u529F";
    }
    if (this.hasStatusMessageTarget) {
      const expiryTime = /* @__PURE__ */ new Date();
      expiryTime.setMinutes(expiryTime.getMinutes() + 15);
      const hours = expiryTime.getHours().toString().padStart(2, "0");
      const minutes = expiryTime.getMinutes().toString().padStart(2, "0");
      const timeString = `${hours}:${minutes}`;
      this.statusMessageTarget.innerHTML = `\u8BF7\u5728<span class="text-red-600">${timeString}</span>\u5185\u5B8C\u6210\u652F\u4ED8\uFF0C\u8D85\u65F6\u8BA2\u5355\u5C06\u5173\u95ED`;
    }
    if (this.hasSeatDisplayTarget) {
      this.seatDisplayTarget.style.display = "inline";
    }
    if (this.hasSeatBadgeTarget) {
      this.seatBadgeTarget.style.display = "inline-block";
    }
    if (this.hasSeatIconTarget) {
      this.seatIconTarget.textContent = "\u{1FA91}";
      this.seatIconTarget.style.transform = "scale(1.3)";
      setTimeout(() => {
        if (this.hasSeatIconTarget) {
          this.seatIconTarget.style.transform = "scale(1)";
        }
      }, 300);
    }
    if (this.hasCancelBarTarget) {
      this.cancelBarTarget.style.display = "none";
    }
    if (this.hasPaymentBarTarget) {
      this.paymentBarTarget.style.display = "block";
    }
  }
};

// app/javascript/controllers/train_seat_selector_controller.ts
var train_seat_selector_controller_default = class extends Controller {
  static {
    this.targets = ["seatTab", "optionsContainer"];
  }
  static {
    this.values = {
      trainId: String,
      selectedSeatType: { type: String, default: "second_class" }
    };
  }
  connect() {
    console.log("TrainSeatSelector connected");
    if (this.seatTabTargets.length > 0) {
      this.selectSeat(this.seatTabTargets[0]);
    }
  }
  // 
  selectSeat(event2) {
    const target = event2 instanceof Event ? event2.currentTarget : event2;
    const seatType = target.dataset.seatType;
    const seatPrice = parseFloat(target.dataset.seatPrice || "0");
    if (!seatType) return;
    this.seatTabTargets.forEach((tab) => {
      tab.classList.remove("bg-white", "shadow");
    });
    target.classList.add("bg-white", "shadow");
    this.seatTabTargets.forEach((tab) => {
      const arrow = tab.querySelector(".seat-arrow");
      if (arrow) {
        if (tab === target) {
          arrow.classList.remove("hidden");
        } else {
          arrow.classList.add("hidden");
        }
      }
    });
    this.selectedSeatTypeValue = seatType;
    this.updateBookingOptions(seatPrice);
  }
  // 
  updateBookingOptions(basePrice) {
    const links = this.optionsContainerTarget.querySelectorAll('a[href*="train_bookings/new"]');
    links.forEach((link) => {
      if (link instanceof HTMLAnchorElement) {
        const url = new URL(link.href, window.location.origin);
        url.searchParams.set("seat_type", this.selectedSeatTypeValue);
        link.href = url.toString();
      }
    });
    const priceElements = this.optionsContainerTarget.querySelectorAll(".booking-option-price");
    priceElements.forEach((priceEl) => {
      if (priceEl instanceof HTMLElement) {
        const extraFee = parseFloat(priceEl.dataset.extraFee || "0");
        const totalPrice = Math.floor(basePrice + extraFee);
        priceEl.textContent = totalPrice.toString();
      }
    });
  }
};

// app/javascript/controllers/tour_group_filter_controller.ts
var tour_group_filter_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.tempSelectedDuration = "";
  }
  static {
    this.targets = [
      "destinationInput",
      "durationInput",
      "groupSizeInput",
      "destinationButton",
      "durationButton",
      "groupSizeButton",
      "departureDisplay",
      "durationModal",
      "durationOption",
      "durationLabel",
      "clearDurationButton",
      "quickDurationButtons"
    ];
  }
  static {
    this.values = {
      destination: String,
      duration: String,
      groupSize: String
    };
  }
  connect() {
    this.element.addEventListener("city-selector:city-changed", this.handleCityChanged.bind(this));
    if (this.groupSizeValue) {
      this.autoSelectGroupSize(this.groupSizeValue);
    }
  }
  disconnect() {
    this.element.removeEventListener("city-selector:city-changed", this.handleCityChanged.bind(this));
  }
  // Handle city change from city-selector modal
  handleCityChanged(event2) {
    const customEvent = event2;
    const { cityName } = customEvent.detail;
    console.log("TourGroupFilter: City changed to", cityName);
    this.destinationValue = cityName;
    this.destinationInputTarget.value = cityName;
    this.updateHotDestinationButtons(cityName);
  }
  // Update hot destination buttons based on selected city
  updateHotDestinationButtons(cityName) {
    let cityInHotList = false;
    this.destinationButtonTargets.forEach((btn) => {
      const textSpan = btn.querySelector("span:last-child");
      if (btn.dataset.destination === cityName) {
        btn.classList.remove("bg-gray-50", "border-transparent");
        btn.classList.add("bg-[#FFE8CC]", "border-[#FFD700]", "shadow-md");
        if (textSpan) {
          textSpan.classList.remove("font-medium");
          textSpan.classList.add("font-bold");
        }
        cityInHotList = true;
      } else {
        btn.classList.add("bg-gray-50", "border-transparent");
        btn.classList.remove("bg-[#FFE8CC]", "border-[#FFD700]", "shadow-md");
        if (textSpan) {
          textSpan.classList.add("font-medium");
          textSpan.classList.remove("font-bold");
        }
      }
    });
    console.log(`City "${cityName}" ${cityInHotList ? "is" : "is not"} in hot destination list`);
  }
  // 
  selectDestination(event2) {
    const button = event2.currentTarget;
    const destination = button.dataset.destination || "";
    this.destinationValue = destination;
    this.destinationInputTarget.value = destination;
    this.departureDisplayTarget.textContent = destination;
    this.updateHotDestinationButtons(destination);
  }
  // 
  selectDuration(event2) {
    const button = event2.currentTarget;
    const duration = button.dataset.duration || "";
    this.durationValue = duration;
    this.durationInputTarget.value = duration;
    this.durationButtonTargets.forEach((btn) => {
      const textSpan = btn.querySelector("span:first-child");
      if (btn.dataset.duration === duration) {
        btn.classList.remove("bg-gray-50", "border-transparent");
        btn.classList.add("bg-[#FFE8CC]", "border-[#FFD700]", "shadow-md");
        if (textSpan) {
          textSpan.classList.remove("font-medium");
          textSpan.classList.add("font-bold");
        }
      } else {
        btn.classList.add("bg-gray-50", "border-transparent");
        btn.classList.remove("bg-[#FFE8CC]", "border-[#FFD700]", "shadow-md");
        if (textSpan) {
          textSpan.classList.add("font-medium");
          textSpan.classList.remove("font-bold");
        }
      }
    });
  }
  // Open duration modal
  openDurationModal() {
    this.tempSelectedDuration = this.durationValue;
    this.updateModalOptionStyles(this.tempSelectedDuration);
    this.durationModalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // Cancel modal (close button) - restore original selection
  cancelDurationModal() {
    this.durationModalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  // Close modal when clicking on backdrop - restore original selection
  closeDurationModalOnBackdrop(event2) {
    if (event2.target === event2.currentTarget) {
      this.cancelDurationModal();
    }
  }
  // Select duration in modal (temporary selection)
  selectDurationInModal(event2) {
    const button = event2.currentTarget;
    const duration = button.dataset.duration || "";
    this.tempSelectedDuration = duration;
    this.updateModalOptionStyles(duration);
  }
  // Update modal option button styles
  updateModalOptionStyles(selectedDuration) {
    this.durationOptionTargets.forEach((btn) => {
      if (btn.dataset.duration === selectedDuration) {
        btn.classList.remove("bg-gray-100", "text-gray-700");
        btn.classList.add("bg-[#FFE8CC]", "text-[#B8860B]", "font-bold");
      } else {
        btn.classList.add("bg-gray-100", "text-gray-700");
        btn.classList.remove("bg-[#FFE8CC]", "text-[#B8860B]", "font-bold");
      }
    });
  }
  // Clear duration in modal (temporary clear)
  clearDurationInModal() {
    this.tempSelectedDuration = "";
    this.updateModalOptionStyles("");
  }
  // Confirm duration selection
  confirmDurationSelection() {
    this.durationValue = this.tempSelectedDuration;
    this.durationInputTarget.value = this.tempSelectedDuration;
    this.updateDurationButtonStyles(this.tempSelectedDuration);
    this.updateDurationLabel(this.tempSelectedDuration);
    const durationNum = parseInt(this.tempSelectedDuration);
    if (this.tempSelectedDuration && durationNum > 3) {
      this.clearDurationButtonTarget.classList.remove("hidden");
      this.quickDurationButtonsTarget.classList.add("hidden");
      this.quickDurationButtonsTarget.classList.remove("flex", "gap-3");
    } else {
      this.clearDurationButtonTarget.classList.add("hidden");
      this.quickDurationButtonsTarget.classList.remove("hidden");
      this.quickDurationButtonsTarget.classList.add("flex", "gap-3");
    }
    this.durationModalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  // Update duration label text
  updateDurationLabel(duration) {
    const durationNum = parseInt(duration);
    if (duration && durationNum > 3) {
      this.durationLabelTarget.textContent = `\u73A9${duration}\u5929`;
    } else {
      this.durationLabelTarget.textContent = "\u5929\u6570";
    }
  }
  // Clear duration selection (restore to quick selection state)
  clearDuration() {
    this.durationValue = "";
    this.durationInputTarget.value = "";
    this.durationLabelTarget.textContent = "\u5929\u6570";
    this.clearDurationButtonTarget.classList.add("hidden");
    this.quickDurationButtonsTarget.classList.remove("hidden");
    this.quickDurationButtonsTarget.classList.add("flex", "gap-3");
    this.updateDurationButtonStyles("");
  }
  // Update main duration button styles
  updateDurationButtonStyles(duration) {
    this.durationButtonTargets.forEach((btn) => {
      const textSpan = btn.querySelector("span:first-child");
      if (btn.dataset.duration === duration) {
        btn.classList.remove("bg-gray-50", "border-transparent");
        btn.classList.add("bg-[#FFE8CC]", "border-[#FFD700]", "shadow-md");
        if (textSpan) {
          textSpan.classList.remove("font-medium");
          textSpan.classList.add("font-bold");
        }
      } else {
        btn.classList.add("bg-gray-50", "border-transparent");
        btn.classList.remove("bg-[#FFE8CC]", "border-[#FFD700]", "shadow-md");
        if (textSpan) {
          textSpan.classList.add("font-medium");
          textSpan.classList.remove("font-bold");
        }
      }
    });
  }
  // 
  selectGroupSize(event2) {
    const button = event2.currentTarget;
    const groupSize = button.dataset.groupSize || "";
    this.groupSizeValue = groupSize;
    this.groupSizeInputTarget.value = groupSize;
    this.updateGroupSizeButtons(groupSize);
  }
  // Auto-select group size on page load
  autoSelectGroupSize(groupSize) {
    if (this.groupSizeInputTarget) {
      this.groupSizeInputTarget.value = groupSize;
    }
    this.updateGroupSizeButtons(groupSize);
  }
  // Update group size button styles
  updateGroupSizeButtons(groupSize) {
    this.groupSizeButtonTargets.forEach((btn) => {
      const radio = btn.querySelector(".radio-circle");
      if (btn.dataset.groupSize === groupSize) {
        radio?.classList.add("bg-[#FFD700]");
        radio?.classList.remove("bg-transparent");
      } else {
        radio?.classList.add("bg-transparent");
        radio?.classList.remove("bg-[#FFD700]");
      }
    });
  }
};

// app/javascript/controllers/car_rental_tabs_controller.ts
var car_rental_tabs_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.isDomestic = true;
    this.isSwapEnabled = false;
    this.currentSelectionType = null;
  }
  static {
    this.targets = [
      "domesticButton",
      "internationalButton",
      "swapToggle",
      "swapIndicator",
      "returnLocationSection",
      "cityDisplay",
      "pickupLocationDisplay",
      "returnLocationDisplay",
      "pickupDateDisplay",
      "returnDateDisplay",
      "durationDisplay",
      "cityInput",
      "pickupLocationInput",
      "returnLocationInput",
      "pickupDateInput",
      "returnDateInput"
    ];
  }
  static {
    this.values = {
      city: String,
      pickupLocation: String,
      returnLocation: String,
      pickupDate: String,
      returnDate: String
    };
  }
  connect() {
    console.log("CarRentalTabs connected");
    this.updateDomesticView();
    this.initializeDefaults();
    document.addEventListener("city-selector:city-selected", this.handleCitySelected.bind(this));
    document.addEventListener("location-selector:location-selected", this.handleLocationSelected.bind(this));
    document.addEventListener("car-datetime-picker:datetime-selected", this.handleDateTimeSelected.bind(this));
  }
  disconnect() {
    document.removeEventListener("city-selector:city-selected", this.handleCitySelected.bind(this));
    document.removeEventListener("location-selector:location-selected", this.handleLocationSelected.bind(this));
    document.removeEventListener("car-datetime-picker:datetime-selected", this.handleDateTimeSelected.bind(this));
  }
  // Initialize default values
  initializeDefaults() {
    const cityDisplay = this.cityDisplayTarget.textContent?.trim();
    if (cityDisplay && cityDisplay !== "") {
      this.updateCity(cityDisplay);
    }
    if (!this.pickupDateValue || !this.returnDateValue) {
      const today = /* @__PURE__ */ new Date();
      today.setHours(13, 55, 0, 0);
      const returnDate = new Date(today);
      returnDate.setDate(returnDate.getDate() + 2);
      this.updatePickupDate(today);
      this.updateReturnDate(returnDate);
    }
  }
  selectDomestic() {
    this.isDomestic = true;
    this.updateDomesticView();
  }
  selectInternational() {
    this.isDomestic = false;
    this.updateInternationalView();
  }
  toggleSwap() {
    this.isSwapEnabled = !this.isSwapEnabled;
    this.updateSwapToggle();
    if (this.isSwapEnabled) {
      this.returnLocationSectionTarget.classList.remove("hidden");
    } else {
      this.returnLocationSectionTarget.classList.add("hidden");
      this.returnLocationValue = "";
      this.returnLocationDisplayTarget.textContent = "\u540C\u53D6\u8F66\u5730\u70B9";
      this.returnLocationInputTarget.value = "";
    }
  }
  // Open city selector
  openCitySelector() {
    this.currentSelectionType = "city";
    const modal = document.querySelector('[data-city-selector-target="modal"]');
    if (modal) {
      modal.classList.remove("hidden");
      document.body.style.overflow = "hidden";
    }
  }
  // Open pickup location selector
  openPickupLocationSelector() {
    console.log("[CarRentalTabs] openPickupLocationSelector called");
    this.currentSelectionType = "pickup";
    const controller = this.application.getControllerForElementAndIdentifier(
      document.querySelector('[data-controller="location-selector"]'),
      "location-selector"
    );
    console.log("[CarRentalTabs] location-selector controller:", controller);
    if (controller && controller.openModal) {
      console.log("[CarRentalTabs] Calling controller.openModal()");
      controller.openModal();
    } else {
      console.error("[CarRentalTabs] location-selector controller or openModal method not found");
    }
  }
  // Open return location selector
  openReturnLocationSelector() {
    if (!this.isSwapEnabled) {
      if (window.showToast) {
        window.showToast("\u8BF7\u5148\u5F00\u542F\u5F02\u5730\u8FD8\u8F66");
      }
      return;
    }
    console.log("[CarRentalTabs] openReturnLocationSelector called");
    this.currentSelectionType = "return";
    const controller = this.application.getControllerForElementAndIdentifier(
      document.querySelector('[data-controller="location-selector"]'),
      "location-selector"
    );
    console.log("[CarRentalTabs] location-selector controller:", controller);
    if (controller && controller.openModal) {
      console.log("[CarRentalTabs] Calling controller.openModal()");
      controller.openModal();
    } else {
      console.error("[CarRentalTabs] location-selector controller or openModal method not found");
    }
  }
  // Open pickup date selector
  openPickupDateSelector() {
    const controller = this.application.getControllerForElementAndIdentifier(
      document.querySelector('[data-controller="car-datetime-picker"]'),
      "car-datetime-picker"
    );
    if (controller && controller.openModal) {
      controller.openModal("pickup");
    }
  }
  // Open return date selector
  openReturnDateSelector() {
    const controller = this.application.getControllerForElementAndIdentifier(
      document.querySelector('[data-controller="car-datetime-picker"]'),
      "car-datetime-picker"
    );
    if (controller && controller.openModal) {
      controller.openModal("return");
    }
  }
  // Handle city selection from city selector
  handleCitySelected(event2) {
    const customEvent = event2;
    const { cityName } = customEvent.detail;
    if (this.currentSelectionType === "city") {
      this.updateCity(cityName);
      this.clearPickupLocation();
      if (this.isSwapEnabled) {
        this.clearReturnLocation();
      }
      this.currentSelectionType = null;
    }
  }
  // Handle location selection from location selector
  handleLocationSelected(event2) {
    const customEvent = event2;
    const { locationName } = customEvent.detail;
    if (this.currentSelectionType === "pickup") {
      this.updatePickupLocation(locationName);
      this.currentSelectionType = null;
    } else if (this.currentSelectionType === "return") {
      this.updateReturnLocation(locationName);
      this.currentSelectionType = null;
    }
  }
  // Handle datetime selection from car-datetime-picker
  handleDateTimeSelected(event2) {
    const customEvent = event2;
    const { pickerType, dateTime } = customEvent.detail;
    if (pickerType === "pickup") {
      this.updatePickupDate(new Date(dateTime));
      this.ensureReturnDateValid();
    } else if (pickerType === "return") {
      this.updateReturnDate(new Date(dateTime));
      this.ensureReturnDateValid();
    }
  }
  // Update city
  updateCity(cityName) {
    this.cityValue = cityName;
    this.cityDisplayTarget.textContent = cityName;
    this.cityInputTarget.value = cityName;
  }
  // Update pickup location
  updatePickupLocation(location2) {
    this.pickupLocationValue = location2;
    this.pickupLocationDisplayTarget.textContent = location2;
    this.pickupLocationDisplayTarget.classList.remove("text-gray-400");
    this.pickupLocationInputTarget.value = location2;
  }
  // Clear pickup location
  clearPickupLocation() {
    this.pickupLocationValue = "";
    this.pickupLocationDisplayTarget.textContent = "\u8BF7\u9009\u62E9\u5730\u70B9";
    this.pickupLocationDisplayTarget.classList.add("text-gray-400");
    this.pickupLocationInputTarget.value = "";
  }
  // Update return location
  updateReturnLocation(location2) {
    this.returnLocationValue = location2;
    this.returnLocationDisplayTarget.textContent = location2;
    this.returnLocationDisplayTarget.classList.remove("text-gray-400");
    this.returnLocationInputTarget.value = location2;
  }
  // Clear return location
  clearReturnLocation() {
    this.returnLocationValue = "";
    this.returnLocationDisplayTarget.textContent = "\u540C\u53D6\u8F66\u5730\u70B9";
    this.returnLocationDisplayTarget.classList.add("text-gray-400");
    this.returnLocationInputTarget.value = "";
  }
  // Update pickup date
  updatePickupDate(date) {
    this.pickupDateValue = date.toISOString();
    this.pickupDateInputTarget.value = this.formatDateForInput(date);
    this.pickupDateDisplayTarget.innerHTML = this.formatDateDisplay(date);
    this.updateDuration();
  }
  // Update return date
  updateReturnDate(date) {
    this.returnDateValue = date.toISOString();
    this.returnDateInputTarget.value = this.formatDateForInput(date);
    this.returnDateDisplayTarget.innerHTML = this.formatDateDisplay(date);
    this.updateDuration();
  }
  // Ensure return date is after pickup date
  ensureReturnDateValid() {
    if (!this.pickupDateValue || !this.returnDateValue) return;
    const pickupDate = new Date(this.pickupDateValue);
    const returnDate = new Date(this.returnDateValue);
    if (returnDate <= pickupDate) {
      const newReturnDate = new Date(pickupDate);
      newReturnDate.setDate(newReturnDate.getDate() + 1);
      this.updateReturnDate(newReturnDate);
    }
  }
  // Update duration display
  updateDuration() {
    if (!this.pickupDateValue || !this.returnDateValue) return;
    const pickupDate = new Date(this.pickupDateValue);
    const returnDate = new Date(this.returnDateValue);
    const diffTime = Math.abs(returnDate.getTime() - pickupDate.getTime());
    const diffDays = Math.ceil(diffTime / (1e3 * 60 * 60 * 24));
    this.durationDisplayTarget.textContent = `${diffDays}\u5929`;
  }
  // Format date for input (YYYY-MM-DD)
  formatDateForInput(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    return `${year}-${month}-${day}`;
  }
  // Format date for display
  formatDateDisplay(date) {
    const weekdays = ["\u5468\u65E5", "\u5468\u4E00", "\u5468\u4E8C", "\u5468\u4E09", "\u5468\u56DB", "\u5468\u4E94", "\u5468\u516D"];
    const weekday = weekdays[date.getDay()];
    const month = date.getMonth() + 1;
    const day = date.getDate();
    const hours = String(date.getHours()).padStart(2, "0");
    const minutes = String(date.getMinutes()).padStart(2, "0");
    return `${month}\u6708${day}\u65E5 <span class="text-sm">${hours}:${minutes}</span>`;
  }
  updateDomesticView() {
    this.domesticButtonTarget.classList.add("bg-white", "shadow-sm", "font-bold");
    this.domesticButtonTarget.classList.remove("text-gray-500");
    this.internationalButtonTarget.classList.remove("bg-white", "shadow-sm", "font-bold");
    this.internationalButtonTarget.classList.add("text-gray-500");
  }
  updateInternationalView() {
    this.internationalButtonTarget.classList.add("bg-white", "shadow-sm", "font-bold");
    this.internationalButtonTarget.classList.remove("text-gray-500");
    this.domesticButtonTarget.classList.remove("bg-white", "shadow-sm", "font-bold");
    this.domesticButtonTarget.classList.add("text-gray-500");
  }
  updateSwapToggle() {
    if (this.isSwapEnabled) {
      this.swapIndicatorTarget.classList.remove("left-1");
      this.swapIndicatorTarget.classList.add("left-5");
      this.swapToggleTarget.classList.remove("bg-gray-200");
      this.swapToggleTarget.classList.add("bg-blue-500");
    } else {
      this.swapIndicatorTarget.classList.add("left-1");
      this.swapIndicatorTarget.classList.remove("left-5");
      this.swapToggleTarget.classList.add("bg-gray-200");
      this.swapToggleTarget.classList.remove("bg-blue-500");
    }
  }
};

// app/javascript/controllers/hotel_package_search_controller.ts
var hotel_package_search_controller_default = class extends Controller {
  static {
    this.targets = [
      // Add your targets here, e.g.:
      // "messageInput", "messagesContainer", "sendButton"
    ];
  }
  static {
    this.values = {
      // Add your values here, e.g.:
      // roomId: String,
      // userId: String
    };
  }
  // Declare your targets and values
  // declare readonly messageInputTarget: HTMLInputElement
  // declare readonly messagesContainerTarget: HTMLElement
  // declare readonly roomIdValue: string
  connect() {
    console.log("HotelPackageSearch connected");
  }
  disconnect() {
    console.log("HotelPackageSearch disconnected");
  }
  // Add your action methods here
  // Example:
  // click(): void {
  //   console.log("Button clicked")
  // }
  // FORMS: Turbo + Turbo Streams handle everything automatically
  // - Forms submit via AJAX (Turbo Drive)
  // - Server responds with format.turbo_stream
  // - Turbo Streams update DOM automatically
  // - NO manual form handling needed in Stimulus
  //
  // Use Stimulus for:
  // - UI interactions (toggle, show/hide)
  // - Input validation/formatting
  // - Dynamic form fields
};

// app/javascript/controllers/hotel_package_order_controller.ts
var hotel_package_order_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.pendingFormData = null;
    this.allowSubmission = false;
  }
  static {
    this.targets = [
      "quantityInput",
      "totalPrice",
      "bottomPrice",
      "decreaseBtn",
      "increaseBtn",
      "stockupTab",
      "instantTab",
      "bookingTypeInput",
      "contactNameInput",
      "contactPhoneInput",
      "confirmModal",
      "confirmQuantity",
      "confirmContact",
      "confirmBookingType",
      "confirmTotalPrice"
    ];
  }
  connect() {
    console.log("HotelPackageOrder connected");
    this.updateButtonStates();
  }
  increaseQuantity(event2) {
    event2.preventDefault();
    const currentQuantity = parseInt(this.quantityInputTarget.value) || 1;
    const newQuantity = currentQuantity + 1;
    if (newQuantity <= 99) {
      this.quantityInputTarget.value = newQuantity.toString();
      this.updatePrice();
      this.updateButtonStates();
    }
  }
  decreaseQuantity(event2) {
    event2.preventDefault();
    const currentQuantity = parseInt(this.quantityInputTarget.value) || 1;
    const newQuantity = currentQuantity - 1;
    if (newQuantity >= 1) {
      this.quantityInputTarget.value = newQuantity.toString();
      this.updatePrice();
      this.updateButtonStates();
    }
  }
  updatePrice() {
    const quantity = parseInt(this.quantityInputTarget.value) || 1;
    const unitPrice = parseFloat(this.increaseBtnTarget.dataset.price || "0");
    const totalPrice = quantity * unitPrice;
    this.totalPriceTarget.textContent = `\xA5${totalPrice.toFixed(2)}`;
    this.bottomPriceTarget.textContent = Math.round(totalPrice).toString();
    this.updatePaymentConfirmationAmount(Math.round(totalPrice));
  }
  updateButtonStates() {
    const quantity = parseInt(this.quantityInputTarget.value) || 1;
    if (quantity <= 1) {
      this.decreaseBtnTarget.classList.remove("border-blue-500", "bg-blue-50", "text-blue-600");
      this.decreaseBtnTarget.classList.add("border-gray-200", "text-gray-300");
      this.decreaseBtnTarget.disabled = true;
    } else {
      this.decreaseBtnTarget.classList.remove("border-gray-200", "text-gray-300");
      this.decreaseBtnTarget.classList.add("border-blue-500", "bg-blue-50", "text-blue-600");
      this.decreaseBtnTarget.disabled = false;
    }
  }
  selectTab(event2) {
    event2.preventDefault();
    const target = event2.currentTarget;
    const tabType = target.dataset.tab;
    if (tabType === "stockup") {
      this.stockupTabTarget.classList.remove("bg-[#FCEEA8]", "bg-opacity-60", "text-gray-700");
      this.stockupTabTarget.classList.add("bg-[#F5F8FA]", "z-10");
      this.stockupTabTarget.querySelector("span:first-child")?.classList.remove("font-medium");
      this.stockupTabTarget.querySelector("span:first-child")?.classList.add("font-bold", "text-black");
      this.instantTabTarget.classList.remove("bg-[#F5F8FA]", "z-10");
      this.instantTabTarget.classList.add("bg-[#FCEEA8]", "bg-opacity-60", "text-gray-700");
      this.instantTabTarget.querySelector("span:first-child")?.classList.remove("font-bold", "text-black");
      this.instantTabTarget.querySelector("span:first-child")?.classList.add("font-medium");
      this.bookingTypeInputTarget.value = "stockup";
    } else if (tabType === "instant") {
      this.instantTabTarget.classList.remove("bg-[#FCEEA8]", "bg-opacity-60", "text-gray-700");
      this.instantTabTarget.classList.add("bg-[#F5F8FA]", "z-10");
      this.instantTabTarget.querySelector("span:first-child")?.classList.remove("font-medium");
      this.instantTabTarget.querySelector("span:first-child")?.classList.add("font-bold", "text-black");
      this.stockupTabTarget.classList.remove("bg-[#F5F8FA]", "z-10");
      this.stockupTabTarget.classList.add("bg-[#FCEEA8]", "bg-opacity-60", "text-gray-700");
      this.stockupTabTarget.querySelector("span:first-child")?.classList.remove("font-bold", "text-black");
      this.stockupTabTarget.querySelector("span:first-child")?.classList.add("font-medium");
      this.bookingTypeInputTarget.value = "instant";
    }
  }
  selectPassenger(event2) {
    const label = event2.currentTarget;
    const name = label.dataset.passengerName || "";
    const phone = label.dataset.passengerPhone || "";
    this.contactNameInputTarget.value = name;
    this.contactPhoneInputTarget.value = phone;
  }
  handleSubmit(event2) {
    if (this.allowSubmission) {
      console.log("Allowing form submission");
      return;
    }
    event2.preventDefault();
    if (!this.contactNameInputTarget.value || !this.contactPhoneInputTarget.value) {
      alert("\u8BF7\u9009\u62E9\u8054\u7CFB\u4EBA");
      return;
    }
    const form = this.element.querySelector("form");
    if (form) {
      this.pendingFormData = new FormData(form);
    }
    this.updateConfirmModal();
    this.showConfirmModal();
  }
  updateConfirmModal() {
    const quantity = this.quantityInputTarget.value;
    this.confirmQuantityTarget.textContent = quantity;
    const contactName = this.contactNameInputTarget.value;
    const contactPhone = this.contactPhoneInputTarget.value;
    this.confirmContactTarget.textContent = `${contactName} ${contactPhone}`;
    const bookingType = this.bookingTypeInputTarget.value;
    this.confirmBookingTypeTarget.textContent = bookingType === "stockup" ? "\u5148\u56E4\u540E\u7EA6" : "\u7ACB\u5373\u9884\u7EA6";
    const totalPrice = this.bottomPriceTarget.textContent;
    this.confirmTotalPriceTarget.textContent = totalPrice || "0";
  }
  showConfirmModal() {
    this.confirmModalTarget.classList.remove("hidden");
    const waitTime = Math.floor(Math.random() * (3e3 - 2e3 + 1)) + 2e3;
    setTimeout(() => {
      this.closeConfirmModal();
      this.showPaymentPasswordModal();
    }, waitTime);
  }
  closeConfirmModal() {
    this.confirmModalTarget.classList.add("hidden");
  }
  showPaymentPasswordModal() {
    const paymentController = this.application.getControllerForElementAndIdentifier(
      this.element,
      "payment-confirmation"
    );
    if (paymentController && typeof paymentController.showPasswordModal === "function") {
      paymentController.showPasswordModal();
      this.setupPaymentSuccessListener();
    }
  }
  setupPaymentSuccessListener() {
    const paymentController = this.application.getControllerForElementAndIdentifier(
      this.element,
      "payment-confirmation"
    );
    if (paymentController) {
      paymentController.processActualPayment = async () => {
        this.submitFormWithData();
      };
    }
  }
  submitFormWithData() {
    const form = this.element.querySelector("form");
    if (form) {
      console.log("Setting allowSubmission flag and submitting form...");
      this.allowSubmission = true;
      form.requestSubmit();
    } else {
      console.error("Form not found");
    }
  }
  updatePaymentConfirmationAmount(amount) {
    const paymentController = this.application.getControllerForElementAndIdentifier(
      this.element,
      "payment-confirmation"
    );
    if (paymentController) {
      paymentController.amountValue = amount.toString();
    }
  }
};

// app/javascript/controllers/pwa_install_controller.ts
var pwa_install_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.deferredPrompt = null;
  }
  connect() {
    window.addEventListener("beforeinstallprompt", this.handleBeforeInstallPrompt.bind(this));
    window.addEventListener("appinstalled", this.handleAppInstalled.bind(this));
    if (this.isStandalone()) {
      this.hideInstallButton();
    }
  }
  disconnect() {
    window.removeEventListener("beforeinstallprompt", this.handleBeforeInstallPrompt.bind(this));
    window.removeEventListener("appinstalled", this.handleAppInstalled.bind(this));
  }
  handleBeforeInstallPrompt(e) {
    e.preventDefault();
    this.deferredPrompt = e;
    if (this.hasInstallButtonTarget) {
      this.installButtonTarget.classList.remove("hidden");
    }
  }
  handleAppInstalled() {
    this.deferredPrompt = null;
    this.hideInstallButton();
  }
  async install() {
    if (!this.deferredPrompt) {
      return;
    }
    this.deferredPrompt.prompt();
    const { outcome } = await this.deferredPrompt.userChoice;
    if (outcome === "accepted") {
      console.log("PWA installation accepted");
    }
    this.deferredPrompt = null;
    this.hideInstallButton();
  }
  isStandalone() {
    return window.matchMedia("(display-mode: standalone)").matches || window.navigator.standalone === true;
  }
  hideInstallButton() {
    if (this.hasInstallButtonTarget) {
      this.installButtonTarget.classList.add("hidden");
    }
  }
  static {
    this.targets = ["installButton"];
  }
};

// app/javascript/controllers/bus_date_picker_controller.ts
var bus_date_picker_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedDateObj = /* @__PURE__ */ new Date();
  }
  static {
    this.targets = [
      "modal",
      "selectedDate",
      "dateInput",
      "dateButton"
    ];
  }
  static {
    this.values = {
      currentDate: String
    };
  }
  connect() {
    console.log("BusDatePicker connected");
    this.selectedDateObj = /* @__PURE__ */ new Date();
    this.currentDateValue = this.formatDate(this.selectedDateObj);
    if (this.hasSelectedDateTarget) {
      this.updateDisplayedDate();
    }
    if (this.hasDateInputTarget) {
      this.dateInputTarget.value = this.currentDateValue;
    }
    this.updatePastDates();
  }
  // Open date picker modal
  openModal() {
    if (!this.hasModalTarget) return;
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // Close date picker modal
  closeModal() {
    if (!this.hasModalTarget) return;
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  // Select a date
  selectDate(event2) {
    const button = event2.currentTarget;
    const dateStr = button.dataset.date || "";
    if (!dateStr) return;
    const selectedDate = /* @__PURE__ */ new Date(`${dateStr}T00:00:00`);
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    selectedDate.setHours(0, 0, 0, 0);
    if (selectedDate < today) {
      console.log("Cannot select past dates (client timezone check)");
      return;
    }
    this.selectedDateObj = selectedDate;
    this.currentDateValue = dateStr;
    if (this.hasSelectedDateTarget) {
      this.updateDisplayedDate();
    }
    if (this.hasDateInputTarget) {
      this.dateInputTarget.value = dateStr;
    }
    const currentPath = window.location.pathname;
    if (currentPath.includes("/bus_tickets/search")) {
      this.closeModal();
      this.refreshSearchResults(dateStr);
    } else {
      this.closeModal();
    }
  }
  // Refresh search results with new date (search page only)
  refreshSearchResults(dateStr) {
    const params = new URLSearchParams(window.location.search);
    params.set("date", dateStr);
    const newUrl = `${window.location.pathname}?${params.toString()}`;
    if (typeof Turbo !== "undefined") {
      Turbo.visit(newUrl);
    } else {
      window.location.href = newUrl;
    }
  }
  // Update the displayed date in the main view
  updateDisplayedDate() {
    const month = this.selectedDateObj.getMonth() + 1;
    const day = this.selectedDateObj.getDate();
    const dayName = this.getDayName(this.selectedDateObj);
    this.selectedDateTarget.innerHTML = `
      ${month}<span class="text-base mx-0.5">\u6708</span>${day}<span class="text-base ml-0.5 mr-2">\u65E5</span>
    `;
    const dayLabel = this.selectedDateTarget.nextElementSibling;
    if (dayLabel) {
      dayLabel.textContent = dayName;
    }
  }
  // Get day name in Chinese
  getDayName(date) {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    const targetDate = new Date(date);
    targetDate.setHours(0, 0, 0, 0);
    const diffTime = targetDate.getTime() - today.getTime();
    const diffDays = Math.round(diffTime / (1e3 * 60 * 60 * 24));
    if (diffDays === 0) return "\u4ECA\u5929";
    if (diffDays === 1) return "\u660E\u5929";
    if (diffDays === 2) return "\u540E\u5929";
    const weekdays = ["\u5468\u65E5", "\u5468\u4E00", "\u5468\u4E8C", "\u5468\u4E09", "\u5468\u56DB", "\u5468\u4E94", "\u5468\u516D"];
    return weekdays[date.getDay()];
  }
  // Format date as YYYY-MM-DD
  formatDate(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    return `${year}-${month}-${day}`;
  }
  // Update past dates to be disabled
  updatePastDates() {
    if (!this.dateButtonTargets) return;
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    this.dateButtonTargets.forEach((button) => {
      const dateStr = button.dataset.date;
      if (!dateStr) return;
      const buttonDate = /* @__PURE__ */ new Date(`${dateStr}T00:00:00`);
      buttonDate.setHours(0, 0, 0, 0);
      if (buttonDate < today) {
        button.disabled = true;
        button.classList.add("opacity-40", "cursor-not-allowed");
        button.classList.remove("hover:bg-blue-50");
      }
    });
  }
  // Check if date is today
  isToday(date) {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    const compareDate = new Date(date);
    compareDate.setHours(0, 0, 0, 0);
    return compareDate.getTime() === today.getTime();
  }
};

// app/javascript/controllers/bus_ticket_search_controller.ts
var bus_ticket_search_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedDepartureTimes = /* @__PURE__ */ new Set();
    this.selectedSeatTypes = /* @__PURE__ */ new Set();
    this.selectedDepartureStations = /* @__PURE__ */ new Set();
    this.selectedArrivalStations = /* @__PURE__ */ new Set();
    this.currentSortField = "default";
    this.currentSortDirection = "";
    //  -> 
    this.timeSlotLabels = {
      morning: "\u51CC\u6668 00:00-05:59",
      morning2: "\u4E0A\u5348 06:00-11:59",
      afternoon: "\u4E0B\u5348 12:00-17:59",
      evening: "\u665A\u4E0A 18:00-23:59"
    };
  }
  static {
    this.values = {
      origin: String,
      destination: String,
      date: String
    };
  }
  static {
    this.targets = [
      "overlay",
      "modal",
      "departureTimeTab",
      "seatTypeTab",
      "departureStationTab",
      "arrivalStationTab",
      "departureTimeSection",
      "seatTypeSection",
      "departureStationSection",
      "arrivalStationSection",
      "departureTimeCard",
      "seatTypeCard",
      "departureStationCard",
      "arrivalStationCard",
      "applyButton",
      "filterBadge",
      "selectedTagsContainer",
      "selectedTagsList",
      "sortModal",
      "sortOption",
      "timeButton",
      "priceButton"
    ];
  }
  connect() {
    this.restoreFiltersFromUrl();
    this.restoreSortFromUrl();
  }
  //  URL 
  restoreFiltersFromUrl() {
    const urlParams = new URLSearchParams(window.location.search);
    const timeSlots = urlParams.get("time_slots");
    if (timeSlots) {
      timeSlots.split(",").forEach((time) => {
        this.selectedDepartureTimes.add(time);
        const timeCard = this.departureTimeCardTargets.find(
          (card) => card.dataset.time === time
        );
        if (timeCard) this.addSelectedStyle(timeCard);
      });
    }
    const seatTypes = urlParams.get("seat_types");
    if (seatTypes) {
      seatTypes.split(",").forEach((seatType) => {
        this.selectedSeatTypes.add(seatType);
        const seatCard = this.seatTypeCardTargets.find(
          (card) => card.dataset.seatType === seatType
        );
        if (seatCard) this.addSelectedStyle(seatCard);
      });
    }
    const departureStations = urlParams.get("departure_stations");
    if (departureStations) {
      departureStations.split(",").forEach((station) => {
        this.selectedDepartureStations.add(station);
        const depCard = this.departureStationCardTargets.find(
          (card) => card.dataset.station === station
        );
        if (depCard) this.addSelectedStyle(depCard);
      });
    }
    const arrivalStations = urlParams.get("arrival_stations");
    if (arrivalStations) {
      arrivalStations.split(",").forEach((station) => {
        this.selectedArrivalStations.add(station);
        const arrCard = this.arrivalStationCardTargets.find(
          (card) => card.dataset.station === station
        );
        if (arrCard) this.addSelectedStyle(arrCard);
      });
    }
    this.updateFilterBadge();
    this.updateSelectedTags();
  }
  openFilter() {
    this.overlayTarget.classList.remove("hidden");
    this.modalTarget.classList.remove("hidden");
  }
  closeModal() {
    this.overlayTarget.classList.add("hidden");
    this.modalTarget.classList.add("hidden");
  }
  selectTab(event2) {
    const button = event2.currentTarget;
    const tab = button.dataset.tab;
    if (!tab) return;
    const tabs = [
      this.departureTimeTabTarget,
      this.seatTypeTabTarget,
      this.departureStationTabTarget,
      this.arrivalStationTabTarget
    ];
    tabs.forEach((t) => {
      t.classList.remove("bg-white", "border-[#FFD900]", "text-gray-900", "font-medium");
      t.classList.add("text-gray-600");
      t.classList.remove("border-l-4");
      t.classList.add("border-l-2", "border-transparent");
    });
    button.classList.add("bg-white", "border-l-4", "border-[#FFD900]", "text-gray-900", "font-medium");
    button.classList.remove("text-gray-600", "border-l-2", "border-transparent");
    const sections = [
      this.departureTimeSectionTarget,
      this.seatTypeSectionTarget,
      this.departureStationSectionTarget,
      this.arrivalStationSectionTarget
    ];
    sections.forEach((s) => s.classList.add("hidden"));
    const sectionMap = {
      departureTime: this.departureTimeSectionTarget,
      seatType: this.seatTypeSectionTarget,
      departureStation: this.departureStationSectionTarget,
      arrivalStation: this.arrivalStationSectionTarget
    };
    const targetSection = sectionMap[tab];
    if (targetSection) {
      targetSection.classList.remove("hidden");
    }
  }
  toggleDepartureTime(event2) {
    const card = event2.currentTarget;
    const time = card.dataset.time;
    if (!time) return;
    if (this.selectedDepartureTimes.has(time)) {
      this.selectedDepartureTimes.delete(time);
      this.removeSelectedStyle(card);
    } else {
      this.selectedDepartureTimes.add(time);
      this.addSelectedStyle(card);
    }
    this.updateFilterBadge();
    this.updateApplyButton();
    this.updateSelectedTags();
  }
  toggleSeatType(event2) {
    const card = event2.currentTarget;
    const seatType = card.dataset.seatType;
    if (!seatType) return;
    if (this.selectedSeatTypes.has(seatType)) {
      this.selectedSeatTypes.delete(seatType);
      this.removeSelectedStyle(card);
    } else {
      this.selectedSeatTypes.add(seatType);
      this.addSelectedStyle(card);
    }
    this.updateFilterBadge();
    this.updateApplyButton();
    this.updateSelectedTags();
  }
  toggleDepartureStation(event2) {
    const card = event2.currentTarget;
    const station = card.dataset.station;
    if (!station) return;
    if (this.selectedDepartureStations.has(station)) {
      this.selectedDepartureStations.delete(station);
      this.removeSelectedStyle(card);
    } else {
      this.selectedDepartureStations.add(station);
      this.addSelectedStyle(card);
    }
    this.updateFilterBadge();
    this.updateApplyButton();
    this.updateSelectedTags();
  }
  toggleArrivalStation(event2) {
    const card = event2.currentTarget;
    const station = card.dataset.station;
    if (!station) return;
    if (this.selectedArrivalStations.has(station)) {
      this.selectedArrivalStations.delete(station);
      this.removeSelectedStyle(card);
    } else {
      this.selectedArrivalStations.add(station);
      this.addSelectedStyle(card);
    }
    this.updateFilterBadge();
    this.updateApplyButton();
    this.updateSelectedTags();
  }
  addSelectedStyle(card) {
    card.classList.remove("bg-[#F7F8FA]");
    card.classList.add("bg-[#FFD900]");
    if (!card.querySelector(".checkmark-icon")) {
      const checkmark = this.createCheckmark();
      card.appendChild(checkmark);
    }
  }
  removeSelectedStyle(card) {
    card.classList.remove("bg-[#FFD900]");
    card.classList.add("bg-[#F7F8FA]");
    const checkmark = card.querySelector(".checkmark-icon");
    if (checkmark) {
      checkmark.remove();
    }
  }
  createCheckmark() {
    const checkmark = document.createElement("div");
    checkmark.className = "checkmark-icon absolute top-2 right-2";
    checkmark.innerHTML = `
      <svg class="w-5 h-5 text-gray-900" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
      </svg>
    `;
    return checkmark;
  }
  updateFilterBadge() {
    const totalFilters = this.selectedDepartureTimes.size + this.selectedSeatTypes.size + this.selectedDepartureStations.size + this.selectedArrivalStations.size;
    if (totalFilters > 0) {
      this.filterBadgeTarget.textContent = totalFilters.toString();
      this.filterBadgeTarget.classList.remove("hidden");
    } else {
      this.filterBadgeTarget.classList.add("hidden");
    }
  }
  updateApplyButton() {
    this.fetchFilteredCount();
  }
  resetFilters() {
    this.selectedDepartureTimes.clear();
    this.selectedSeatTypes.clear();
    this.selectedDepartureStations.clear();
    this.selectedArrivalStations.clear();
    const allCards = [
      ...this.departureTimeCardTargets,
      ...this.seatTypeCardTargets,
      ...this.departureStationCardTargets,
      ...this.arrivalStationCardTargets
    ];
    allCards.forEach((card) => {
      this.removeSelectedStyle(card);
    });
    this.updateFilterBadge();
    this.updateApplyButton();
    this.updateSelectedTags();
  }
  applyFilters() {
    const params = new URLSearchParams();
    params.set("origin", this.originValue);
    params.set("destination", this.destinationValue);
    params.set("date", this.dateValue);
    if (this.selectedDepartureTimes.size > 0) {
      params.set("time_slots", Array.from(this.selectedDepartureTimes).join(","));
    }
    if (this.selectedSeatTypes.size > 0) {
      params.set("seat_types", Array.from(this.selectedSeatTypes).join(","));
    }
    if (this.selectedDepartureStations.size > 0) {
      params.set("departure_stations", Array.from(this.selectedDepartureStations).join(","));
    }
    if (this.selectedArrivalStations.size > 0) {
      params.set("arrival_stations", Array.from(this.selectedArrivalStations).join(","));
    }
    this.closeModal();
    visit(`/bus_tickets/search?${params.toString()}`);
  }
  // 
  updateSelectedTags() {
    const tags = [];
    this.selectedDepartureTimes.forEach((time) => {
      tags.push({
        type: "departureTime",
        value: time,
        label: this.timeSlotLabels[time] || time
      });
    });
    this.selectedSeatTypes.forEach((seatType) => {
      tags.push({
        type: "seatType",
        value: seatType,
        label: seatType
      });
    });
    this.selectedDepartureStations.forEach((station) => {
      tags.push({
        type: "departureStation",
        value: station,
        label: station
      });
    });
    this.selectedArrivalStations.forEach((station) => {
      tags.push({
        type: "arrivalStation",
        value: station,
        label: station
      });
    });
    this.selectedTagsListTarget.innerHTML = "";
    if (tags.length === 0) {
      this.selectedTagsContainerTarget.classList.add("hidden");
    } else {
      this.selectedTagsContainerTarget.classList.remove("hidden");
      tags.forEach((tag) => {
        const tagElement = document.createElement("div");
        tagElement.className = "bg-[#FFD900] text-gray-900 text-[13px] px-3 py-1 rounded-full flex items-center gap-1";
        tagElement.innerHTML = `
          <span>${tag.label}</span>
          <button type="button" 
            data-action="click->bus-ticket-search#removeTag"
            data-tag-type="${tag.type}"
            data-tag-value="${tag.value}"
            class="text-gray-900 hover:text-gray-700 font-bold">
            \u2715
          </button>
        `;
        this.selectedTagsListTarget.appendChild(tagElement);
      });
    }
  }
  // 
  removeTag(event2) {
    const button = event2.currentTarget;
    const tagType = button.dataset.tagType;
    const tagValue = button.dataset.tagValue;
    if (!tagType || !tagValue) return;
    switch (tagType) {
      case "departureTime": {
        this.selectedDepartureTimes.delete(tagValue);
        const timeCard = this.departureTimeCardTargets.find(
          (card) => card.dataset.time === tagValue
        );
        if (timeCard) this.removeSelectedStyle(timeCard);
        break;
      }
      case "seatType": {
        this.selectedSeatTypes.delete(tagValue);
        const seatCard = this.seatTypeCardTargets.find(
          (card) => card.dataset.seatType === tagValue
        );
        if (seatCard) this.removeSelectedStyle(seatCard);
        break;
      }
      case "departureStation": {
        this.selectedDepartureStations.delete(tagValue);
        const depCard = this.departureStationCardTargets.find(
          (card) => card.dataset.station === tagValue
        );
        if (depCard) this.removeSelectedStyle(depCard);
        break;
      }
      case "arrivalStation": {
        this.selectedArrivalStations.delete(tagValue);
        const arrCard = this.arrivalStationCardTargets.find(
          (card) => card.dataset.station === tagValue
        );
        if (arrCard) this.removeSelectedStyle(arrCard);
        break;
      }
    }
    this.updateFilterBadge();
    this.updateApplyButton();
    this.updateSelectedTags();
  }
  // 
  async fetchFilteredCount() {
    try {
      const params = new URLSearchParams();
      params.set("origin", this.originValue);
      params.set("destination", this.destinationValue);
      params.set("date", this.dateValue);
      if (this.selectedDepartureTimes.size > 0) {
        params.set("time_slots", Array.from(this.selectedDepartureTimes).join(","));
      }
      if (this.selectedSeatTypes.size > 0) {
        params.set("seat_types", Array.from(this.selectedSeatTypes).join(","));
      }
      if (this.selectedDepartureStations.size > 0) {
        params.set("departure_stations", Array.from(this.selectedDepartureStations).join(","));
      }
      if (this.selectedArrivalStations.size > 0) {
        params.set("arrival_stations", Array.from(this.selectedArrivalStations).join(","));
      }
      const response = await fetch(`/bus_tickets/count_filtered_results?${params.toString()}`);
      const data2 = await response.json();
      this.applyButtonTarget.textContent = `\u67E5\u770B${data2.count}\u6761\u7ED3\u679C`;
    } catch (error3) {
      console.error("\u83B7\u53D6\u7B5B\u9009\u7ED3\u679C\u6570\u91CF\u5931\u8D25:", error3);
      this.applyButtonTarget.textContent = "\u67E5\u770B\u7ED3\u679C";
    }
  }
  // =====  =====
  //  URL 
  restoreSortFromUrl() {
    const urlParams = new URLSearchParams(window.location.search);
    const sortBy = urlParams.get("sort_by");
    const sortDirection = urlParams.get("sort_direction");
    if (sortBy) {
      this.currentSortField = sortBy;
      this.currentSortDirection = sortDirection || "";
      this.updateSortButtonsDisplay();
    }
  }
  // 
  openSortModal() {
    this.sortModalTarget.classList.remove("hidden");
    this.highlightCurrentSort();
  }
  // 
  closeSortModal() {
    this.sortModalTarget.classList.add("hidden");
  }
  // 
  stopPropagation(event2) {
    event2.stopPropagation();
  }
  // 
  selectSort(event2) {
    const button = event2.currentTarget;
    const sortField = button.dataset.sortField;
    const sortDirection = button.dataset.sortDirection;
    if (!sortField) return;
    this.sortOptionTargets.forEach((option) => {
      option.classList.remove("bg-[#FFD900]", "border-2", "border-[#FF6A00]");
      option.classList.add("bg-[#F7F8FA]");
    });
    button.classList.remove("bg-[#F7F8FA]");
    button.classList.add("bg-[#FFD900]", "border-2", "border-[#FF6A00]");
    this.currentSortField = sortField;
    this.currentSortDirection = sortDirection || "";
  }
  // 
  applySortAndClose() {
    this.closeSortModal();
    this.applySort();
  }
  // 
  applySort() {
    const params = new URLSearchParams(window.location.search);
    params.delete("sort_by");
    params.delete("sort_direction");
    if (this.currentSortField !== "default") {
      params.set("sort_by", this.currentSortField);
      if (this.currentSortDirection) {
        params.set("sort_direction", this.currentSortDirection);
      }
    }
    this.updateSortButtonsDisplay();
    visit(`/bus_tickets/search?${params.toString()}`);
  }
  // 
  highlightCurrentSort() {
    this.sortOptionTargets.forEach((option) => {
      const sortField = option.dataset.sortField;
      const sortDirection = option.dataset.sortDirection || "";
      if (sortField === this.currentSortField && sortDirection === this.currentSortDirection) {
        option.classList.remove("bg-[#F7F8FA]");
        option.classList.add("bg-[#FFD900]", "border-2", "border-[#FF6A00]");
      } else {
        option.classList.remove("bg-[#FFD900]", "border-2", "border-[#FF6A00]");
        option.classList.add("bg-[#F7F8FA]");
      }
    });
  }
  // 
  updateSortButtonsDisplay() {
    if (this.timeButtonTarget) {
      this.resetButtonStyle(this.timeButtonTarget);
    }
    if (this.priceButtonTarget) {
      this.resetButtonStyle(this.priceButtonTarget);
    }
    if (this.currentSortField === "time" && this.timeButtonTarget) {
      this.highlightButton(this.timeButtonTarget, this.currentSortDirection === "asc" ? "\u65E9\u2192\u665A" : "\u665A\u2192\u65E9");
    } else if (this.currentSortField === "price" && this.priceButtonTarget) {
      this.highlightButton(this.priceButtonTarget, this.currentSortDirection === "asc" ? "\u4F4E\u2192\u9AD8" : "\u9AD8\u2192\u4F4E");
    }
  }
  // 
  resetButtonStyle(button) {
    const icon = button.querySelector(".w-6.h-6");
    const text = button.querySelector(".text-\\[11px\\]");
    if (icon) {
      icon.classList.remove("bg-[#FFD900]", "border-[#FF6A00]");
      icon.classList.add("border-gray-600");
    }
    if (text) {
      text.classList.remove("text-[#FF6A00]", "font-semibold");
      text.classList.add("text-gray-700");
    }
  }
  // 
  highlightButton(button, label) {
    const icon = button.querySelector(".w-6.h-6");
    const text = button.querySelector(".text-\\[11px\\]");
    if (icon) {
      icon.classList.remove("border-gray-600");
      icon.classList.add("bg-[#FFD900]", "border-[#FF6A00]");
    }
    if (text) {
      text.classList.remove("text-gray-700");
      text.classList.add("text-[#FF6A00]", "font-semibold");
      text.textContent = label;
    }
  }
};

// app/javascript/controllers/bus_ticket_order_controller.ts
var bus_ticket_order_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedPassengers = /* @__PURE__ */ new Set();
    this.basePrice = 0;
    this.insurancePrice = 0;
    this.insuranceType = "none";
  }
  static {
    this.targets = [
      "checkIcon",
      "passengerCount",
      "totalPrice",
      "contactPhone",
      "formData"
    ];
  }
  connect() {
    console.log("BusTicketOrder connected");
    this.insuranceType = this.formDataTarget.dataset.insuranceType || "none";
    this.insurancePrice = parseInt(this.formDataTarget.dataset.insurancePrice || "0");
    const firstPassenger = this.element.querySelector("[data-passenger-id]");
    if (firstPassenger) {
      const passengerId = firstPassenger.dataset.passengerId;
      if (passengerId) {
        this.selectedPassengers.add(passengerId);
        this.updatePassengerUI(firstPassenger, true);
        const phone = firstPassenger.dataset.passengerPhone;
        if (phone) {
          this.contactPhoneTarget.textContent = phone;
        }
      }
    }
    this.updateTotal();
  }
  togglePassenger(event2) {
    const target = event2.currentTarget;
    const passengerId = target.dataset.passengerId;
    if (!passengerId) return;
    if (this.selectedPassengers.has(passengerId)) {
      this.selectedPassengers.delete(passengerId);
      this.updatePassengerUI(target, false);
    } else {
      if (this.selectedPassengers.size >= 5) {
        alert("\u6700\u591A\u53EA\u80FD\u9009\u62E95\u4F4D\u4E58\u8F66\u4EBA");
        return;
      }
      this.selectedPassengers.add(passengerId);
      this.updatePassengerUI(target, true);
      if (this.selectedPassengers.size === 1) {
        const phone = target.dataset.passengerPhone;
        if (phone) {
          this.contactPhoneTarget.textContent = phone;
        }
      }
    }
    this.updateTotal();
  }
  selectInsurance(event2) {
    const target = event2.currentTarget;
    this.insuranceType = target.dataset.insuranceType || "none";
    this.insurancePrice = parseInt(target.dataset.insurancePrice || "0");
    const allInsuranceCards = this.element.querySelectorAll("[data-insurance-type]");
    allInsuranceCards.forEach((card) => {
      const cardElement = card;
      const cardType = cardElement.dataset.insuranceType;
      const checkIcon = cardElement.querySelector("svg:last-child");
      if (cardType === this.insuranceType) {
        if (cardType === "none") {
          cardElement.classList.add("border-[#FFD944]");
          cardElement.classList.remove("border-gray-100");
          if (checkIcon) checkIcon.classList.remove("text-gray-300");
          if (checkIcon) checkIcon.classList.add("text-[#FFD944]");
        } else if (cardType === "premium") {
          cardElement.classList.add("bg-[#FFFAED]", "border-[#FFD944]");
          cardElement.classList.remove("bg-gray-50", "border-gray-100");
          if (checkIcon) checkIcon.classList.remove("text-gray-300");
          if (checkIcon) checkIcon.classList.add("text-[#FFD944]");
        } else if (cardType === "refund") {
          cardElement.classList.add("bg-[#F0F7FF]", "border-[#5D9CEC]");
          cardElement.classList.remove("bg-gray-50", "border-gray-100");
          if (checkIcon) checkIcon.classList.remove("text-gray-300");
          if (checkIcon) checkIcon.classList.add("text-[#5D9CEC]");
        }
      } else {
        if (cardType === "none") {
          cardElement.classList.remove("border-[#FFD944]");
          cardElement.classList.add("border-gray-100");
          if (checkIcon) checkIcon.classList.add("text-gray-300");
          if (checkIcon) checkIcon.classList.remove("text-[#FFD944]");
        } else {
          cardElement.classList.remove("bg-[#FFFAED]", "bg-[#F0F7FF]", "border-[#FFD944]", "border-[#5D9CEC]");
          cardElement.classList.add("bg-gray-50", "border-gray-100");
          if (checkIcon) checkIcon.classList.add("text-gray-300");
          if (checkIcon) checkIcon.classList.remove("text-[#FFD944]", "text-[#5D9CEC]");
        }
      }
    });
    this.updateTotal();
  }
  async submitOrder(event2) {
    event2.preventDefault();
    const button = event2.currentTarget;
    const busTicketId = button.dataset.busTicketId;
    const basePrice = parseInt(button.dataset.basePrice || "0");
    this.basePrice = basePrice;
    if (this.selectedPassengers.size === 0) {
      alert("\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u4F4D\u4E58\u8F66\u4EBA");
      return;
    }
    const passengerIds = Array.from(this.selectedPassengers);
    const totalPrice = this.calculateTotal();
    const totalInsurancePrice = this.insurancePrice * passengerIds.length;
    const orderData = {
      bus_ticket_order: {
        bus_ticket_id: busTicketId,
        passenger_ids: passengerIds,
        insurance_type: this.insuranceType,
        insurance_price: totalInsurancePrice,
        total_price: totalPrice
      }
    };
    button.disabled = true;
    button.textContent = "\u521B\u5EFA\u4E2D...";
    try {
      const csrfToken = document.querySelector('meta[name="csrf-token"]')?.content || "";
      const response = await fetch("/bus_ticket_orders", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "X-CSRF-Token": csrfToken
        },
        body: JSON.stringify(orderData)
      });
      const data2 = await response.json();
      if (response.ok && data2.success) {
        this.triggerPaymentModal(totalPrice.toString(), data2.payment_url, data2.success_url);
      } else {
        throw new Error(data2.message || "\u521B\u5EFA\u8BA2\u5355\u5931\u8D25");
      }
    } catch (error3) {
      console.error("Error creating order:", error3);
      const message = error3 instanceof Error ? error3.message : "\u521B\u5EFA\u8BA2\u5355\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5";
      alert(message);
      button.disabled = false;
      button.textContent = "\u53BB\u652F\u4ED8";
    }
  }
  triggerPaymentModal(amount, paymentUrl, successUrl) {
    const paymentElement = document.querySelector('[data-controller*="payment-confirmation"]');
    if (!paymentElement) {
      console.error("Payment confirmation controller not found");
      alert("\u652F\u4ED8\u7CFB\u7EDF\u672A\u52A0\u8F7D\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
      return;
    }
    const app = window.Stimulus;
    if (!app) {
      console.error("Stimulus not found");
      alert("\u7CFB\u7EDF\u9519\u8BEF\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
      return;
    }
    const paymentController = app.getControllerForElementAndIdentifier(paymentElement, "payment-confirmation");
    if (paymentController) {
      paymentController.amountValue = amount;
      const userEmail = document.querySelector('meta[name="user-email"]')?.content || document.querySelector("[data-user-email]")?.getAttribute("data-user-email") || "demo@example.com";
      paymentController.userEmailValue = userEmail;
      paymentController.paymentUrlValue = paymentUrl;
      paymentController.successUrlValue = successUrl;
      paymentController.showPasswordModal();
    } else {
      console.error("Payment controller not initialized");
      alert("\u652F\u4ED8\u7CFB\u7EDF\u672A\u521D\u59CB\u5316\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
    }
  }
  updatePassengerUI(element, selected) {
    const checkIcon = element.querySelector('[data-bus-ticket-order-target="checkIcon"]');
    if (checkIcon) {
      if (selected) {
        checkIcon.classList.remove("text-gray-300");
        checkIcon.classList.add("text-[#FFD944]");
      } else {
        checkIcon.classList.add("text-gray-300");
        checkIcon.classList.remove("text-[#FFD944]");
      }
    }
  }
  updateTotal() {
    const passengerCount = this.selectedPassengers.size;
    this.passengerCountTarget.textContent = `\u5171${passengerCount}\u4EBA`;
    const total = this.calculateTotal();
    this.totalPriceTarget.textContent = total.toString();
  }
  calculateTotal() {
    const passengerCount = this.selectedPassengers.size;
    if (passengerCount === 0) return 0;
    const button = this.element.querySelector("[data-base-price]");
    const basePrice = parseInt(button?.dataset.basePrice || "0");
    return (basePrice + this.insurancePrice) * passengerCount;
  }
};

// app/javascript/controllers/deep_booking_controller.ts
var deep_booking_controller_default = class extends Controller {
  static {
    this.targets = [
      "productCard",
      "dateModal",
      "countModal",
      "adultCount",
      "childCount",
      "selectedDate",
      "totalPrice"
    ];
  }
  static {
    this.values = {
      guideId: String,
      selectedDate: String,
      adultCount: Number,
      childCount: Number,
      pricePerPerson: Number
    };
  }
  connect() {
    console.log("DeepBooking controller connected");
    this.adultCountValue = 1;
    this.childCountValue = 0;
    if (this.productCardTargets && this.productCardTargets.length > 0) {
      const priceElement = this.productCardTargets[0].querySelector(".text-xl.font-bold.text-\\[\\#ff5336\\]");
      if (priceElement) {
        this.pricePerPersonValue = parseInt(priceElement.textContent || "192");
      } else {
        this.pricePerPersonValue = 192;
      }
    } else {
      this.pricePerPersonValue = 192;
    }
  }
  disconnect() {
    console.log("DeepBooking disconnected");
  }
  // 
  selectDate(event2) {
    const button = event2.currentTarget;
    const date = button.dataset.date;
    if (!date) return;
    this.selectedDateValue = date;
    console.log("Selected date:", date);
    const dateButtons = this.element.querySelectorAll('[data-action*="selectDate"]');
    dateButtons.forEach((btn) => {
      btn.classList.remove("bg-[#ffeeb8]", "border-[#ffeeb8]");
      btn.classList.add("bg-[#f5f7fa]");
    });
    button.classList.remove("bg-[#f5f7fa]");
    button.classList.add("bg-[#ffeeb8]", "border-[#ffeeb8]");
  }
  // 
  openCalendar(event2) {
    event2.preventDefault();
    console.log("Opening calendar modal");
    this.showToast("\u65E5\u5386\u9009\u62E9\u529F\u80FD\u5373\u5C06\u4E0A\u7EBF");
  }
  // 
  openCountModal(event2) {
    event2.preventDefault();
    if (!this.selectedDateValue) {
      this.showToast("\u8BF7\u5148\u9009\u62E9\u51FA\u884C\u65E5\u671F");
      return;
    }
    console.log("Opening count modal");
    const modalHTML = `
      <div class="fixed inset-0 bg-black/60 z-40" 
           data-action="click->deep-booking#closeCountModal" 
           data-deep-booking-target="countModal">
        <div class="absolute bottom-0 w-full max-w-[414px] left-1/2 -translate-x-1/2 bg-white z-50 rounded-t-2xl px-5 pt-5 pb-8 animate-slide-up" 
             data-action="click->deep-booking#stopPropagation">
          
          <!-- \u5F39\u7A97\u6807\u9898\u680F -->
          <div class="flex justify-between items-center mb-8 relative">
            <div class="w-full text-center">
              <h3 class="text-lg font-bold text-gray-900">\u9884\u7EA6\u4EBA\u6570</h3>
            </div>
            <button class="absolute right-0 top-0 p-1" data-action="click->deep-booking#closeCountModal">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-500">
                <path d="M18 6L6 18M6 6l12 12" />
              </svg>
            </button>
          </div>

          <!-- \u5217\u8868\u9879\uFF1A\u6210\u4EBA -->
          <div class="flex justify-between items-center mb-8">
            <div>
              <div class="text-lg font-medium text-gray-900">\u6210\u4EBA</div>
              <div class="text-sm text-gray-400 mt-1">\u5355\u4EF7: \xA5${this.pricePerPersonValue}</div>
            </div>
            <div class="flex items-center gap-4">
              <button class="w-7 h-7 rounded-full border flex items-center justify-center transition-colors ${this.adultCountValue <= 1 ? "border-gray-300 text-gray-300 cursor-not-allowed" : "border-blue-custom text-blue-custom hover:bg-blue-50"}"
                      data-action="click->deep-booking#decrementAdult"
                      ${this.adultCountValue <= 1 ? "disabled" : ""}>
                <svg width="12" height="2" viewBox="0 0 12 2" fill="currentColor">
                  <rect width="12" height="2" rx="1"/>
                </svg>
              </button>
              
              <span class="text-lg font-medium w-4 text-center" data-deep-booking-target="adultCount">${this.adultCountValue}</span>
              
              <button class="w-7 h-7 rounded-full border border-blue-custom flex items-center justify-center text-blue-custom hover:bg-blue-50"
                      data-action="click->deep-booking#incrementAdult">
                <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                  <rect y="5" width="12" height="2" rx="1"/>
                  <rect x="5" width="2" height="12" rx="1"/>
                </svg>
              </button>
            </div>
          </div>

          <!-- \u5217\u8868\u9879\uFF1A\u513F\u7AE5 -->
          <div class="flex justify-between items-center mb-10">
            <div>
              <div class="text-lg font-medium text-gray-900">\u513F\u7AE5</div>
              <div class="text-sm text-gray-400 mt-1">\u5355\u4EF7: \xA5${Math.round(this.pricePerPersonValue * 0.8)}</div>
            </div>
            <div class="flex items-center gap-4">
              <button class="w-7 h-7 rounded-full border flex items-center justify-center transition-colors ${this.childCountValue <= 0 ? "border-gray-300 text-gray-300 cursor-not-allowed" : "border-blue-custom text-blue-custom hover:bg-blue-50"}"
                      data-action="click->deep-booking#decrementChild"
                      ${this.childCountValue <= 0 ? "disabled" : ""}>
                <svg width="12" height="2" viewBox="0 0 12 2" fill="currentColor">
                  <rect width="12" height="2" rx="1"/>
                </svg>
              </button>
              
              <span class="text-lg font-medium w-4 text-center" data-deep-booking-target="childCount">${this.childCountValue}</span>
              
              <button class="w-7 h-7 rounded-full border border-blue-custom flex items-center justify-center text-blue-custom hover:bg-blue-50"
                      data-action="click->deep-booking#incrementChild">
                <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                  <rect y="5" width="12" height="2" rx="1"/>
                  <rect x="5" width="2" height="12" rx="1"/>
                </svg>
              </button>
            </div>
          </div>

          <!-- \u5E95\u90E8\u6309\u94AE -->
          <button class="w-full bg-[#FF5A43] text-white text-lg font-bold py-3.5 rounded-full shadow-lg active:opacity-90 transition-opacity"
                  data-action="click->deep-booking#confirmBooking">
            \u7ACB\u5373\u9884\u7EA6
          </button>
          
        </div>
      </div>
    `;
    this.element.insertAdjacentHTML("beforeend", modalHTML);
  }
  // 
  closeCountModal(event2) {
    event2.preventDefault();
    const modal = document.querySelector('[data-deep-booking-target="countModal"]');
    if (modal) {
      modal.remove();
    }
  }
  // 
  stopPropagation(event2) {
    event2.stopPropagation();
  }
  // 
  incrementAdult(event2) {
    event2.preventDefault();
    this.adultCountValue++;
    this.updateCountDisplay();
  }
  // 
  decrementAdult(event2) {
    event2.preventDefault();
    if (this.adultCountValue > 1) {
      this.adultCountValue--;
      this.updateCountDisplay();
    }
  }
  // 
  incrementChild(event2) {
    event2.preventDefault();
    this.childCountValue++;
    this.updateCountDisplay();
  }
  // 
  decrementChild(event2) {
    event2.preventDefault();
    if (this.childCountValue > 0) {
      this.childCountValue--;
      this.updateCountDisplay();
    }
  }
  // 
  updateCountDisplay() {
    const modal = document.querySelector('[data-deep-booking-target="countModal"]');
    if (!modal) return;
    const adultCountEl = modal.querySelector('[data-deep-booking-target="adultCount"]');
    if (adultCountEl) {
      adultCountEl.textContent = this.adultCountValue.toString();
    }
    const childCountEl = modal.querySelector('[data-deep-booking-target="childCount"]');
    if (childCountEl) {
      childCountEl.textContent = this.childCountValue.toString();
    }
    const decrementAdultBtn = modal.querySelector('[data-action*="decrementAdult"]');
    if (decrementAdultBtn) {
      if (this.adultCountValue <= 1) {
        decrementAdultBtn.disabled = true;
        decrementAdultBtn.classList.remove("border-blue-custom", "text-blue-custom", "hover:bg-blue-50");
        decrementAdultBtn.classList.add("border-gray-300", "text-gray-300", "cursor-not-allowed");
      } else {
        decrementAdultBtn.disabled = false;
        decrementAdultBtn.classList.remove("border-gray-300", "text-gray-300", "cursor-not-allowed");
        decrementAdultBtn.classList.add("border-blue-custom", "text-blue-custom", "hover:bg-blue-50");
      }
    }
    const decrementChildBtn = modal.querySelector('[data-action*="decrementChild"]');
    if (decrementChildBtn) {
      if (this.childCountValue <= 0) {
        decrementChildBtn.disabled = true;
        decrementChildBtn.classList.remove("border-blue-custom", "text-blue-custom", "hover:bg-blue-50");
        decrementChildBtn.classList.add("border-gray-300", "text-gray-300", "cursor-not-allowed");
      } else {
        decrementChildBtn.disabled = false;
        decrementChildBtn.classList.remove("border-gray-300", "text-gray-300", "cursor-not-allowed");
        decrementChildBtn.classList.add("border-blue-custom", "text-blue-custom", "hover:bg-blue-50");
      }
    }
  }
  //  - 
  confirmBooking(event2) {
    event2.preventDefault();
    const url = `/deep_travel_bookings/new?guide_id=${this.guideIdValue}&date=${this.selectedDateValue}&adult_count=${this.adultCountValue}&child_count=${this.childCountValue}`;
    console.log("Confirming booking:", {
      guideId: this.guideIdValue,
      date: this.selectedDateValue,
      adultCount: this.adultCountValue,
      childCount: this.childCountValue,
      url
    });
    window.location.href = url;
  }
  // 
  showToast(message) {
    if (typeof window.showToast === "function") {
      window.showToast(message);
    } else {
      alert(message);
    }
  }
};
var style = document.createElement("style");
style.textContent = `
  .border-blue-custom {
    border-color: #4E6EF2;
  }
  .text-blue-custom {
    color: #4E6EF2;
  }
  @keyframes slide-up {
    from {
      transform: translateY(100%);
    }
    to {
      transform: translateY(0);
    }
  }
  .animate-slide-up {
    animation: slide-up 0.3s ease-out;
  }
`;
document.head.appendChild(style);

// app/javascript/controllers/visa_order_controller.ts
var visa_order_controller_default = class extends Controller {
  static {
    this.targets = ["totalPrice", "deliveryAddress"];
  }
  connect() {
    console.log("VisaOrder controller connected");
  }
  async submitOrder(event2) {
    event2.preventDefault();
    const button = event2.currentTarget;
    const visaProductId = button.dataset.visaProductId || "";
    const travelerCount = parseInt(button.dataset.travelerCount || "1");
    const totalPrice = parseFloat(button.dataset.totalPrice || "0");
    const insuranceType = button.dataset.insuranceType || "none";
    const insurancePrice = parseFloat(button.dataset.insurancePrice || "0");
    const contactName = button.dataset.contactName || "";
    const contactPhone = button.dataset.contactPhone || "";
    const deliveryAddress = button.dataset.deliveryAddress || "";
    if (!contactName || contactName.trim() === "") {
      alert("\u8BF7\u586B\u5199\u8054\u7CFB\u4EBA\u59D3\u540D");
      return;
    }
    if (!contactPhone || contactPhone.trim() === "") {
      alert("\u8BF7\u586B\u5199\u8054\u7CFB\u4EBA\u7535\u8BDD");
      return;
    }
    if (!deliveryAddress || deliveryAddress.trim() === "") {
      alert("\u8BF7\u586B\u5199\u90AE\u5BC4\u5730\u5740");
      return;
    }
    const orderData = {
      visa_order: {
        visa_product_id: visaProductId,
        traveler_count: travelerCount,
        insurance_type: insuranceType,
        insurance_price: insurancePrice,
        total_price: totalPrice,
        contact_name: contactName.trim(),
        contact_phone: contactPhone.trim(),
        delivery_address: deliveryAddress.trim()
      }
    };
    button.disabled = true;
    button.textContent = "\u521B\u5EFA\u4E2D...";
    try {
      const csrfToken = document.querySelector('meta[name="csrf-token"]')?.content || "";
      const response = await fetch("/visa_orders", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "X-CSRF-Token": csrfToken
        },
        body: JSON.stringify(orderData)
      });
      const data2 = await response.json();
      if (response.ok && data2.success) {
        this.triggerPaymentModal(totalPrice.toString(), data2.payment_url, data2.success_url);
      } else {
        throw new Error(data2.message || "\u521B\u5EFA\u8BA2\u5355\u5931\u8D25");
      }
    } catch (error3) {
      console.error("Error creating order:", error3);
      const message = error3 instanceof Error ? error3.message : "\u521B\u5EFA\u8BA2\u5355\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5";
      alert(message);
      button.disabled = false;
      button.textContent = "\u7ACB\u523B\u652F\u4ED8";
    }
  }
  triggerPaymentModal(amount, paymentUrl, successUrl) {
    const paymentElement = document.querySelector('[data-controller*="payment-confirmation"]');
    if (!paymentElement) {
      console.error("Payment confirmation controller not found");
      alert("\u652F\u4ED8\u7CFB\u7EDF\u672A\u52A0\u8F7D\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
      return;
    }
    const app = window.Stimulus;
    if (!app) {
      console.error("Stimulus not found");
      alert("\u7CFB\u7EDF\u9519\u8BEF\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
      return;
    }
    const paymentController = app.getControllerForElementAndIdentifier(paymentElement, "payment-confirmation");
    if (paymentController) {
      paymentController.amountValue = amount;
      const userEmail = document.querySelector('meta[name="user-email"]')?.content || document.querySelector("[data-user-email]")?.getAttribute("data-user-email") || "demo@example.com";
      paymentController.userEmailValue = userEmail;
      paymentController.paymentUrlValue = paymentUrl;
      paymentController.successUrlValue = successUrl;
      paymentController.showPasswordModal();
    } else {
      console.error("Payment controller not initialized");
      alert("\u652F\u4ED8\u7CFB\u7EDF\u672A\u521D\u59CB\u5316\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
    }
  }
};

// app/javascript/controllers/abroad_region_selector_controller.ts
var abroad_region_selector_controller_default = class extends Controller {
  static {
    this.targets = ["regionButton", "regionContent", "ticketTypeButton", "ticketTypeContent"];
  }
  connect() {
    console.log("AbroadRegionSelector connected");
  }
  selectRegion(event2) {
    const clickedButton = event2.currentTarget;
    const region = clickedButton.dataset.region;
    if (this.hasRegionButtonTarget) {
      this.regionButtonTargets.forEach((button) => {
        button.classList.remove("text-yellow-600", "font-bold", "border-b-2", "border-yellow-600");
        button.classList.add("text-gray-500");
      });
    }
    clickedButton.classList.remove("text-gray-500");
    clickedButton.classList.add("text-yellow-600", "font-bold", "border-b-2", "border-yellow-600");
    this.regionContentTargets.forEach((content) => {
      if (content.dataset.region === region) {
        content.classList.remove("hidden");
      } else {
        content.classList.add("hidden");
      }
    });
  }
  selectTicketType(event2) {
    const clickedButton = event2.currentTarget;
    const ticketType = clickedButton.dataset.ticketType;
    if (this.hasTicketTypeButtonTarget) {
      this.ticketTypeButtonTargets.forEach((button) => {
        button.classList.remove("bg-yellow-500", "text-white");
        button.classList.add("bg-gray-100", "text-gray-700");
      });
    }
    clickedButton.classList.remove("bg-gray-100", "text-gray-700");
    clickedButton.classList.add("bg-yellow-500", "text-white");
    this.ticketTypeContentTargets.forEach((content) => {
      if (content.dataset.ticketType === ticketType) {
        content.classList.remove("hidden");
      } else {
        content.classList.add("hidden");
      }
    });
  }
  swapStations() {
    const originSelect = document.querySelector('[name="origin"]');
    const destinationSelect = document.querySelector('[name="destination"]');
    if (originSelect && destinationSelect) {
      const temp = originSelect.value;
      originSelect.value = destinationSelect.value;
      destinationSelect.value = temp;
    }
  }
};

// app/javascript/controllers/abroad_date_picker_controller.ts
var abroad_date_picker_controller_default = class extends Controller {
  static {
    this.targets = ["modal", "dateButton"];
  }
  static {
    this.values = {
      currentDate: String
    };
  }
  connect() {
    console.log("AbroadDatePicker connected");
    this.element.addEventListener("abroad-ticket-search:open-date-picker", () => {
      this.openModal();
    });
    this.updatePastDates();
  }
  openModal() {
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  closeModal() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  selectDate(event2) {
    const target = event2.currentTarget;
    const dateStr = target.dataset.date;
    if (dateStr) {
      const selectedDate = /* @__PURE__ */ new Date(`${dateStr}T00:00:00`);
      const today = /* @__PURE__ */ new Date();
      today.setHours(0, 0, 0, 0);
      selectedDate.setHours(0, 0, 0, 0);
      if (selectedDate < today) {
        return;
      }
      const searchController = this.application.getControllerForElementAndIdentifier(
        this.element,
        "abroad-ticket-search"
      );
      if (searchController && "updateDate" in searchController) {
        searchController.updateDate(dateStr);
      }
      this.closeModal();
    }
  }
  openCalendar() {
    this.openModal();
  }
  // Update past dates to be disabled
  updatePastDates() {
    if (!this.dateButtonTargets) return;
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    this.dateButtonTargets.forEach((button) => {
      const dateStr = button.dataset.date;
      if (!dateStr) return;
      const buttonDate = /* @__PURE__ */ new Date(`${dateStr}T00:00:00`);
      buttonDate.setHours(0, 0, 0, 0);
      if (buttonDate < today) {
        button.disabled = true;
        button.classList.add("opacity-40", "cursor-not-allowed");
        button.classList.remove("hover:bg-blue-50");
      }
    });
  }
};

// app/javascript/controllers/abroad_passenger_selector_controller.ts
var abroad_passenger_selector_controller_default = class extends Controller {
  static {
    this.targets = ["type"];
  }
  connect() {
    console.log("AbroadPassengerSelector connected");
  }
  select(event2) {
    const clickedElement = event2.currentTarget;
    const selectedType = clickedElement.dataset.abroadPassengerSelectorTypeParam;
    if (this.hasTypeTarget) {
      this.typeTargets.forEach((element) => {
        element.classList.remove("bg-[#FFFBF0]", "border", "border-[#FFE5B5]");
        element.classList.add("bg-gray-100");
        const checkmark = element.querySelector(".absolute");
        if (checkmark) {
          checkmark.remove();
        }
      });
    }
    clickedElement.classList.remove("bg-gray-100");
    clickedElement.classList.add("bg-[#FFFBF0]", "border", "border-[#FFE5B5]");
    const checkmarkHTML = `
      <div class="absolute bottom-0 right-0 w-3 h-3 bg-[#FFCC00] rounded-tl-lg rounded-br-lg flex items-center justify-center">
        <svg class="w-2 h-2 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path>
        </svg>
      </div>
    `;
    clickedElement.insertAdjacentHTML("beforeend", checkmarkHTML);
    if (selectedType) {
      const url = new URL(window.location.href);
      const ticketId = url.searchParams.get("abroad_ticket_id");
      const seatCategory = url.searchParams.get("seat_category");
      if (ticketId && seatCategory) {
        const bookingButtons = document.querySelectorAll('a[href*="new_abroad_ticket_order"]');
        bookingButtons.forEach((button) => {
          const href = button.getAttribute("href");
          if (href) {
            const newUrl = new URL(href, window.location.origin);
            newUrl.searchParams.set("passenger_type", selectedType);
            button.setAttribute("href", newUrl.toString());
          }
        });
      }
    }
  }
};

// app/javascript/controllers/abroad_order_form_controller.ts
var abroad_order_form_controller_default = class extends Controller {
  static {
    this.targets = ["modal", "nameInput", "phoneInput", "emailInput"];
  }
  async submitOrder(event2) {
    event2.preventDefault();
    const button = event2.currentTarget;
    const abroadTicketId = button.dataset.abroadTicketId;
    const totalPrice = button.dataset.totalPrice;
    if (!this.validateForm()) {
      return;
    }
    const passengerTypeInput = document.getElementById("passenger_type");
    const seatCategoryInput = document.getElementById("seat_category");
    const notesInput = document.getElementById("notes");
    const formData = {
      abroad_ticket_order: {
        abroad_ticket_id: abroadTicketId,
        passenger_name: this.nameInputTarget.value,
        contact_phone: this.phoneInputTarget.value,
        contact_email: this.emailInputTarget.value,
        passenger_type: passengerTypeInput?.value || "",
        seat_category: seatCategoryInput?.value || "",
        total_price: totalPrice,
        notes: notesInput?.value || ""
      }
    };
    button.disabled = true;
    button.textContent = "\u521B\u5EFA\u4E2D...";
    try {
      const csrfToken = document.querySelector('meta[name="csrf-token"]')?.content || "";
      const response = await fetch("/abroad_ticket_orders.json", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Accept": "application/json",
          "X-CSRF-Token": csrfToken
        },
        body: JSON.stringify(formData)
      });
      const data2 = await response.json();
      if (response.ok && data2.success) {
        this.triggerPaymentModal(totalPrice || "0", data2.payment_url, data2.success_url);
      } else {
        throw new Error(data2.message || "\u521B\u5EFA\u8BA2\u5355\u5931\u8D25");
      }
    } catch (error3) {
      console.error("Error creating order:", error3);
      const message = error3 instanceof Error ? error3.message : "\u521B\u5EFA\u8BA2\u5355\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5";
      alert(message);
      button.disabled = false;
      button.textContent = "\u7ACB\u5373\u9884\u8BA2";
    }
  }
  validateForm() {
    if (!this.hasNameInputTarget || !this.nameInputTarget.value.trim()) {
      alert("\u8BF7\u8F93\u5165\u59D3\u540D");
      return false;
    }
    if (!this.hasPhoneInputTarget || !this.phoneInputTarget.value.trim()) {
      alert("\u8BF7\u8F93\u5165\u624B\u673A\u53F7");
      return false;
    }
    if (!this.hasEmailInputTarget || !this.emailInputTarget.value.trim()) {
      alert("\u8BF7\u8F93\u5165\u90AE\u7BB1");
      return false;
    }
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(this.emailInputTarget.value)) {
      alert("\u8BF7\u8F93\u5165\u6709\u6548\u7684\u90AE\u7BB1\u5730\u5740");
      return false;
    }
    return true;
  }
  triggerPaymentModal(amount, paymentUrl, successUrl) {
    const paymentElement = document.querySelector('[data-controller*="payment-confirmation"]');
    if (!paymentElement) {
      console.error("Payment confirmation controller not found");
      alert("\u652F\u4ED8\u7CFB\u7EDF\u672A\u52A0\u8F7D\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
      return;
    }
    const app = window.Stimulus;
    if (!app) {
      console.error("Stimulus not found");
      alert("\u7CFB\u7EDF\u9519\u8BEF\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
      return;
    }
    const paymentController = app.getControllerForElementAndIdentifier(paymentElement, "payment-confirmation");
    if (paymentController) {
      paymentController.amountValue = amount;
      paymentController.userEmailValue = this.emailInputTarget.value;
      paymentController.paymentUrlValue = paymentUrl;
      paymentController.successUrlValue = successUrl;
      paymentController.showPasswordModal();
    } else {
      console.error("Payment controller not initialized");
      alert("\u652F\u4ED8\u7CFB\u7EDF\u672A\u521D\u59CB\u5316\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
    }
  }
  openPassengerSelector() {
    this.modalTarget.classList.remove("hidden");
  }
  closePassengerSelector() {
    this.modalTarget.classList.add("hidden");
  }
  selectPassenger(event2) {
    const element = event2.currentTarget;
    const name = element.dataset.abroadOrderFormNameParam || "";
    const phone = element.dataset.abroadOrderFormPhoneParam || "";
    const email = element.dataset.abroadOrderFormEmailParam || "";
    if (this.hasNameInputTarget) {
      this.nameInputTarget.value = name;
    }
    if (this.hasPhoneInputTarget) {
      this.phoneInputTarget.value = phone;
    }
    if (this.hasEmailInputTarget && email) {
      this.emailInputTarget.value = email;
    }
    this.closePassengerSelector();
  }
};

// app/javascript/controllers/abroad_ticket_search_controller.ts
var abroad_ticket_search_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.currentSelectionType = "origin";
    this.currentRegion = "japan";
    // 
    this.japanStations = {
      "\u4E1C\u4EAC": [
        { name: "\u4E1C\u4EAC\u7AD9", nameEn: "Tokyo Station", city: "\u4E1C\u4EAC" },
        { name: "\u65B0\u5BBF\u7AD9", nameEn: "Shinjuku Station", city: "\u4E1C\u4EAC" },
        { name: "\u6DA9\u8C37\u7AD9", nameEn: "Shibuya Station", city: "\u4E1C\u4EAC" },
        { name: "\u6C60\u888B\u7AD9", nameEn: "Ikebukuro Station", city: "\u4E1C\u4EAC" },
        { name: "\u54C1\u5DDD\u7AD9", nameEn: "Shinagawa Station", city: "\u4E1C\u4EAC" }
      ],
      "\u5927\u962A": [
        { name: "\u65B0\u5927\u962A\u7AD9", nameEn: "Shin-Osaka Station", city: "\u5927\u962A" },
        { name: "\u5927\u962A\u7AD9", nameEn: "Osaka Station", city: "\u5927\u962A" },
        { name: "\u96BE\u6CE2\u7AD9", nameEn: "Namba Station", city: "\u5927\u962A" },
        { name: "\u5929\u738B\u5BFA\u7AD9", nameEn: "Tennoji Station", city: "\u5927\u962A" }
      ],
      "\u4EAC\u90FD": [
        { name: "\u4EAC\u90FD\u7AD9", nameEn: "Kyoto Station", city: "\u4EAC\u90FD" },
        { name: "\u54C1\u5DDD\u7AD9", nameEn: "Shinagawa Station", city: "\u4EAC\u90FD" }
      ],
      "\u540D\u53E4\u5C4B": [
        { name: "\u540D\u53E4\u5C4B\u7AD9", nameEn: "Nagoya Station", city: "\u540D\u53E4\u5C4B" }
      ],
      "\u4ED9\u53F0": [
        { name: "\u4ED9\u53F0\u7AD9", nameEn: "Sendai Station", city: "\u4ED9\u53F0" }
      ],
      "\u9752\u68EE": [
        { name: "\u9752\u68EE\u7AD9", nameEn: "Aomori Station", city: "\u9752\u68EE" }
      ],
      "\u65B0\u6F5F": [
        { name: "\u65B0\u6F5F\u7AD9", nameEn: "Niigata Station", city: "\u65B0\u6F5F" }
      ],
      "\u5E7F\u5C9B": [
        { name: "\u5E7F\u5C9B\u7AD9", nameEn: "Hiroshima Station", city: "\u5E7F\u5C9B" }
      ],
      "\u798F\u5188": [
        { name: "\u535A\u591A\u7AD9", nameEn: "Hakata Station", city: "\u798F\u5188" }
      ],
      "\u9E7F\u513F\u5C9B": [
        { name: "\u9E7F\u513F\u5C9B\u4E2D\u592E\u7AD9", nameEn: "Kagoshima-Chuo Station", city: "\u9E7F\u513F\u5C9B" }
      ],
      "\u5317\u6D77\u9053": [
        { name: "\u672D\u5E4C\u7AD9", nameEn: "Sapporo Station", city: "\u5317\u6D77\u9053" }
      ]
    };
    // 
    this.europeStations = {
      "\u6CD5\u56FD": [
        { name: "\u5DF4\u9ECE\u5317\u7AD9", nameEn: "Paris Nord", city: "\u6CD5\u56FD" },
        { name: "\u5DF4\u9ECE\u91CC\u6602\u7AD9", nameEn: "Paris Gare de Lyon", city: "\u6CD5\u56FD" },
        { name: "\u91CC\u6602\u7AD9", nameEn: "Lyon Station", city: "\u6CD5\u56FD" },
        { name: "\u9A6C\u8D5B\u7AD9", nameEn: "Marseille Station", city: "\u6CD5\u56FD" }
      ],
      "\u8377\u5170": [
        { name: "\u963F\u59C6\u65AF\u7279\u4E39\u4E2D\u592E\u8F66\u7AD9", nameEn: "Amsterdam Centraal", city: "\u8377\u5170" },
        { name: "\u9E7F\u7279\u4E39\u4E2D\u592E\u8F66\u7AD9", nameEn: "Rotterdam Centraal", city: "\u8377\u5170" }
      ],
      "\u5FB7\u56FD": [
        { name: "\u67CF\u6797\u4E2D\u592E\u8F66\u7AD9", nameEn: "Berlin Hauptbahnhof", city: "\u5FB7\u56FD" },
        { name: "\u6155\u5C3C\u9ED1\u4E2D\u592E\u8F66\u7AD9", nameEn: "M\xFCnchen Hauptbahnhof", city: "\u5FB7\u56FD" },
        { name: "\u6CD5\u5170\u514B\u798F\u4E2D\u592E\u8F66\u7AD9", nameEn: "Frankfurt Hauptbahnhof", city: "\u5FB7\u56FD" }
      ],
      "\u610F\u5927\u5229": [
        { name: "\u7F57\u9A6C\u7279\u7C73\u5C3C\u7AD9", nameEn: "Roma Termini", city: "\u610F\u5927\u5229" },
        { name: "\u7C73\u5170\u4E2D\u592E\u8F66\u7AD9", nameEn: "Milano Centrale", city: "\u610F\u5927\u5229" },
        { name: "\u4F5B\u7F57\u4F26\u8428\u5723\u6BCD\u739B\u5229\u4E9A\u8F66\u7AD9", nameEn: "Firenze Santa Maria Novella", city: "\u610F\u5927\u5229" }
      ],
      "\u897F\u73ED\u7259": [
        { name: "\u9A6C\u5FB7\u91CC\u963F\u6258\u67E5\u7AD9", nameEn: "Madrid Atocha", city: "\u897F\u73ED\u7259" },
        { name: "\u5DF4\u585E\u7F57\u90A3\u6851\u65AF\u7AD9", nameEn: "Barcelona Sants", city: "\u897F\u73ED\u7259" }
      ]
    };
    // 
    this.popularRoutes = {
      japan: [
        { origin: "\u4E1C\u4EAC\u7AD9", destination: "\u4EAC\u90FD\u7AD9" },
        { origin: "\u4E1C\u4EAC\u7AD9", destination: "\u65B0\u5927\u962A\u7AD9" }
      ],
      europe: [
        { origin: "\u5DF4\u9ECE\u5317\u7AD9", destination: "\u963F\u59C6\u65AF\u7279\u4E39\u4E2D\u592E\u8F66\u7AD9" },
        { origin: "\u5DF4\u9ECE\u91CC\u6602\u7AD9", destination: "\u7F57\u9A6C\u7279\u7C73\u5C3C\u7AD9" }
      ]
    };
  }
  static {
    this.targets = [
      "form",
      "regionInput",
      "originInput",
      "destinationInput",
      "originText",
      "destinationText",
      "dateInput",
      "dateText",
      "stationModal",
      "stationList",
      "searchInput"
    ];
  }
  static {
    this.values = {
      currentDate: String
    };
  }
  connect() {
    this.currentRegion = this.regionInputTarget.value;
    console.log("Abroad ticket search controller connected");
  }
  selectRegion(event2) {
    const button = event2.currentTarget;
    const region = button.dataset.abroadTicketSearchRegionParam;
    if (region && region !== this.currentRegion) {
      const url = new URL(window.location.href);
      url.searchParams.set("region", region);
      window.Turbo.visit(url.toString());
    }
  }
  selectTicketType(event2) {
    event2.preventDefault();
    const button = event2.currentTarget;
    const ticketType = button.dataset.abroadTicketSearchTicketTypeParam;
    const allButtons = button.parentElement?.querySelectorAll("button") || [];
    allButtons.forEach((btn) => {
      btn.classList.remove("bg-white", "shadow-sm", "font-bold");
      btn.classList.add("font-medium", "text-gray-500");
    });
    button.classList.remove("font-medium", "text-gray-500");
    button.classList.add("bg-white", "shadow-sm", "font-bold");
    console.log("Selected ticket type:", ticketType);
  }
  selectOrigin(event2) {
    event2.preventDefault();
    this.currentSelectionType = "origin";
    this.openStationModal();
  }
  selectDestination(event2) {
    event2.preventDefault();
    this.currentSelectionType = "destination";
    this.openStationModal();
  }
  swapStations(event2) {
    event2.preventDefault();
    const originValue = this.originInputTarget.value;
    const destinationValue = this.destinationInputTarget.value;
    this.originInputTarget.value = destinationValue;
    this.destinationInputTarget.value = originValue;
    this.originTextTarget.textContent = destinationValue;
    this.destinationTextTarget.textContent = originValue;
  }
  openDatePicker(event2) {
    event2.preventDefault();
    const customEvent = new CustomEvent("abroad-ticket-search:open-date-picker", {
      bubbles: true
    });
    this.element.dispatchEvent(customEvent);
  }
  updateDate(dateStr) {
    this.dateInputTarget.value = dateStr;
    this.currentDateValue = dateStr;
    const date = /* @__PURE__ */ new Date(`${dateStr}T00:00:00`);
    const month = date.getMonth() + 1;
    const day = date.getDate();
    const weekdays = ["\u5468\u65E5", "\u5468\u4E00", "\u5468\u4E8C", "\u5468\u4E09", "\u5468\u56DB", "\u5468\u4E94", "\u5468\u516D"];
    const weekday = weekdays[date.getDay()];
    this.dateTextTarget.textContent = `${month}\u6708${day}\u65E5`;
    const weekdayElement = this.dateTextTarget.nextElementSibling;
    if (weekdayElement) {
      weekdayElement.textContent = weekday;
    }
  }
  openStationModal() {
    this.stationModalTarget.classList.remove("hidden");
    this.renderStationList();
    this.searchInputTarget.value = "";
    this.searchInputTarget.focus();
  }
  closeStationModal() {
    this.stationModalTarget.classList.add("hidden");
  }
  selectStation(event2) {
    const element = event2.currentTarget;
    const stationName = element.dataset.stationName;
    const stationNameEn = element.dataset.stationNameEn;
    if (!stationName) return;
    if (this.currentSelectionType === "origin") {
      this.originInputTarget.value = stationName;
      this.originTextTarget.textContent = stationName;
      const subtitle = this.originTextTarget.nextElementSibling;
      if (subtitle) {
        subtitle.textContent = stationNameEn || "";
      }
    } else {
      this.destinationInputTarget.value = stationName;
      this.destinationTextTarget.textContent = stationName;
      const subtitle = this.destinationTextTarget.nextElementSibling;
      if (subtitle) {
        subtitle.textContent = stationNameEn || "";
      }
    }
    this.closeStationModal();
  }
  searchStations(event2) {
    const input = event2.currentTarget;
    const query = input.value.trim().toLowerCase();
    this.renderStationList(query);
  }
  renderStationList(searchQuery = "") {
    const stations = this.currentRegion === "japan" ? this.japanStations : this.europeStations;
    const popularRoutes = this.currentRegion === "japan" ? this.popularRoutes.japan : this.popularRoutes.europe;
    let html = "";
    if (!searchQuery && popularRoutes.length > 0) {
      html += `
        <div class="mb-6">
          <h3 class="text-sm font-medium text-gray-500 mb-3 px-4">\u70ED\u95E8\u8DEF\u7EBF</h3>
          <div class="flex gap-3 px-4 overflow-x-auto">
            ${popularRoutes.map((route) => `
              <div class="bg-gray-50 rounded-lg px-4 py-2 whitespace-nowrap cursor-pointer hover:bg-gray-100"
                   data-action="click->abroad-ticket-search#selectPopularRoute"
                   data-origin="${route.origin}"
                   data-destination="${route.destination}">
                <span class="text-sm font-medium">${route.origin} - ${route.destination}</span>
              </div>
            `).join("")}
          </div>
        </div>
      `;
    }
    html += '<div class="mb-4"><h3 class="text-sm font-medium text-gray-500 mb-3 px-4">\u7AD9\u70B9\u9009\u62E9</h3></div>';
    Object.entries(stations).forEach(([city, stationList]) => {
      const filteredStations = stationList.filter(
        (station) => !searchQuery || station.name.toLowerCase().includes(searchQuery) || station.nameEn.toLowerCase().includes(searchQuery) || city.toLowerCase().includes(searchQuery)
      );
      if (filteredStations.length > 0) {
        html += `
          <div class="mb-4">
            <div class="flex items-center px-4 py-2 bg-gray-50">
              <span class="text-sm font-bold text-gray-700">${city}</span>
            </div>
            ${filteredStations.map((station) => {
          const isSelected = this.currentSelectionType === "origin" && this.originInputTarget.value === station.name || this.currentSelectionType === "destination" && this.destinationInputTarget.value === station.name;
          return `
                <div class="flex items-center justify-between px-4 py-3 border-b border-gray-100 cursor-pointer hover:bg-gray-50"
                     data-action="click->abroad-ticket-search#selectStation"
                     data-station-name="${station.name}"
                     data-station-name-en="${station.nameEn}">
                  <div class="flex-1">
                    <div class="text-base font-medium text-gray-900">${station.name}</div>
                    <div class="text-xs text-gray-400 mt-0.5">${station.nameEn}</div>
                  </div>
                  ${isSelected ? `
                    <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd"
                            d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                            clip-rule="evenodd"/>
                    </svg>
                  ` : ""}
                </div>
              `;
        }).join("")}
          </div>
        `;
      }
    });
    const noResultsHeader = '<div class="mb-4"><h3 class="text-sm font-medium text-gray-500 mb-3 px-4">\u7AD9\u70B9\u9009\u62E9</h3></div>';
    if (html === noResultsHeader) {
      html += '<div class="text-center py-8 text-gray-400">\u672A\u627E\u5230\u5339\u914D\u7684\u7AD9\u70B9</div>';
    }
    this.stationListTarget.innerHTML = html;
  }
  selectPopularRoute(event2) {
    const element = event2.currentTarget;
    const origin = element.dataset.origin;
    const destination = element.dataset.destination;
    if (origin && destination) {
      const stations = this.currentRegion === "japan" ? this.japanStations : this.europeStations;
      let originStation;
      let destinationStation;
      Object.values(stations).forEach((stationList) => {
        stationList.forEach((station) => {
          if (station.name === origin) originStation = station;
          if (station.name === destination) destinationStation = station;
        });
      });
      if (originStation) {
        this.originInputTarget.value = originStation.name;
        this.originTextTarget.textContent = originStation.name;
        const subtitle = this.originTextTarget.nextElementSibling;
        if (subtitle) subtitle.textContent = originStation.nameEn;
      }
      if (destinationStation) {
        this.destinationInputTarget.value = destinationStation.name;
        this.destinationTextTarget.textContent = destinationStation.name;
        const subtitle = this.destinationTextTarget.nextElementSibling;
        if (subtitle) subtitle.textContent = destinationStation.nameEn;
      }
      this.closeStationModal();
    }
  }
};

// app/javascript/controllers/homestay_search_controller.ts
var homestay_search_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.currentLocationType = "domestic";
    this.lastDomesticCity = "\u5317\u4EAC";
    this.lastInternationalCity = "\u9999\u6E2F";
  }
  static {
    this.targets = [
      "searchForm",
      "cityInput",
      "cityDisplay",
      "checkInInput",
      "checkOutInput",
      "roomsInput",
      "adultsInput",
      "childrenInput",
      "queryInput",
      "domesticTab",
      "internationalTab",
      "domesticIndicator",
      "internationalIndicator"
    ];
  }
  connect() {
    console.log("HomestaySearch connected");
    if (this.hasCityInputTarget) {
      const currentCity = this.cityInputTarget.value;
      if (currentCity) {
        this.lastDomesticCity = currentCity;
        console.log("HomestaySearch: Initialized lastDomesticCity to:", currentCity);
      }
    }
    document.addEventListener("city-selector:city-selected-for-hotel", this.handleCityUpdate.bind(this));
    document.addEventListener("hotel-date-picker:dates-selected", this.handleDateUpdate.bind(this));
    document.addEventListener("hotel-guest-selector:guests-updated", this.handleGuestUpdate.bind(this));
  }
  disconnect() {
    console.log("HomestaySearch disconnected");
    document.removeEventListener("city-selector:city-selected-for-hotel", this.handleCityUpdate.bind(this));
    document.removeEventListener("hotel-date-picker:dates-selected", this.handleDateUpdate.bind(this));
    document.removeEventListener("hotel-guest-selector:guests-updated", this.handleGuestUpdate.bind(this));
  }
  // Handle city selection update from city-selector
  handleCityUpdate(event2) {
    const customEvent = event2;
    const { cityName, isInternational } = customEvent.detail;
    console.log("HomestaySearch: Received city update:", cityName, "isInternational:", isInternational);
    if (isInternational) {
      this.lastInternationalCity = cityName;
    } else {
      this.lastDomesticCity = cityName;
    }
    if (this.hasCityInputTarget) {
      this.cityInputTarget.value = cityName;
      console.log("HomestaySearch: Updated city input to:", cityName);
    }
    if (isInternational) {
      this.switchToInternational(false);
    } else {
      this.switchToDomestic(false);
    }
  }
  // Handle date selection update from hotel-date-picker
  handleDateUpdate(event2) {
    const customEvent = event2;
    const { checkIn, checkOut } = customEvent.detail;
    console.log("HomestaySearch: Received date update:", { checkIn, checkOut });
    if (this.hasCheckInInputTarget) {
      this.checkInInputTarget.value = checkIn;
      console.log("HomestaySearch: Updated check-in to:", checkIn);
    }
    if (this.hasCheckOutInputTarget) {
      this.checkOutInputTarget.value = checkOut;
      console.log("HomestaySearch: Updated check-out to:", checkOut);
    }
  }
  // Handle guest selection update from hotel-guest-selector
  handleGuestUpdate(event2) {
    const customEvent = event2;
    const { rooms, adults, children } = customEvent.detail;
    console.log("HomestaySearch: Received guest update:", { rooms, adults, children });
    if (this.hasRoomsInputTarget) {
      this.roomsInputTarget.value = rooms.toString();
      console.log("HomestaySearch: Updated rooms to:", rooms);
    }
    if (this.hasAdultsInputTarget) {
      this.adultsInputTarget.value = adults.toString();
      console.log("HomestaySearch: Updated adults to:", adults);
    }
    if (this.hasChildrenInputTarget) {
      this.childrenInputTarget.value = children.toString();
      console.log("HomestaySearch: Updated children to:", children);
    }
  }
  openSearchModal() {
    const keyword = prompt("\u8BF7\u8F93\u5165\u6C11\u5BBF\u540D\u79F0\u3001\u5730\u540D\u6216\u5173\u952E\u8BCD\uFF1A");
    if (keyword !== null && this.hasQueryInputTarget) {
      this.queryInputTarget.value = keyword;
      if (this.searchFormTarget) {
        this.searchFormTarget.requestSubmit();
      }
    }
  }
  // Switch to domestic tab
  switchToDomestic(updateCity = true) {
    if (this.currentLocationType === "domestic") return;
    console.log("HomestaySearch: Switching to domestic");
    this.currentLocationType = "domestic";
    if (updateCity) {
      if (this.hasCityInputTarget) {
        this.cityInputTarget.value = this.lastDomesticCity;
        console.log("HomestaySearch: Restored domestic city to:", this.lastDomesticCity);
      }
      if (this.hasCityDisplayTarget) {
        this.cityDisplayTarget.textContent = this.lastDomesticCity;
        console.log("HomestaySearch: Updated city display to:", this.lastDomesticCity);
      }
    }
    const domesticSpan = this.domesticTabTarget.querySelector("span");
    if (domesticSpan) {
      domesticSpan.classList.remove("font-medium");
      domesticSpan.classList.add("font-bold");
    }
    this.domesticTabTarget.classList.remove("text-gray-500");
    this.domesticTabTarget.classList.add("text-gray-800");
    this.domesticIndicatorTarget.classList.remove("hidden");
    const internationalSpan = this.internationalTabTarget.querySelector("span");
    if (internationalSpan) {
      internationalSpan.classList.remove("font-bold");
      internationalSpan.classList.add("font-medium");
    }
    this.internationalTabTarget.classList.remove("text-gray-800");
    this.internationalTabTarget.classList.add("text-gray-500");
    this.internationalIndicatorTarget.classList.add("hidden");
  }
  // Switch to international tab
  switchToInternational(updateCity = true) {
    if (this.currentLocationType === "international") return;
    console.log("HomestaySearch: Switching to international");
    this.currentLocationType = "international";
    if (updateCity) {
      if (this.hasCityInputTarget) {
        this.cityInputTarget.value = this.lastInternationalCity;
        console.log("HomestaySearch: Restored international city to:", this.lastInternationalCity);
      }
      if (this.hasCityDisplayTarget) {
        this.cityDisplayTarget.textContent = this.lastInternationalCity;
        console.log("HomestaySearch: Updated city display to:", this.lastInternationalCity);
      }
    }
    const internationalSpan = this.internationalTabTarget.querySelector("span");
    if (internationalSpan) {
      internationalSpan.classList.remove("font-medium");
      internationalSpan.classList.add("font-bold");
    }
    this.internationalTabTarget.classList.remove("text-gray-500");
    this.internationalTabTarget.classList.add("text-gray-800");
    this.internationalIndicatorTarget.classList.remove("hidden");
    const domesticSpan = this.domesticTabTarget.querySelector("span");
    if (domesticSpan) {
      domesticSpan.classList.remove("font-bold");
      domesticSpan.classList.add("font-medium");
    }
    this.domesticTabTarget.classList.remove("text-gray-800");
    this.domesticTabTarget.classList.add("text-gray-500");
    this.domesticIndicatorTarget.classList.add("hidden");
  }
};

// app/javascript/controllers/internet_services_controller.ts
var internet_services_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.currentContinent = "asia";
    this.currentTab = "popular";
    this.destinationHistory = [];
  }
  static {
    this.targets = [
      "regionModal",
      "regionDisplay",
      "searchInput",
      "searchResults",
      "selectorTab",
      "popularSection",
      "historySection",
      "continentBtn",
      "continentSection"
    ];
  }
  connect() {
    console.log("InternetServices connected");
    this.loadHistory();
  }
  openRegionModal(event2) {
    event2.preventDefault();
    this.regionModalTarget.classList.remove("hidden");
    this.showContinent("asia");
    this.switchSelectorTab({ currentTarget: this.selectorTabTargets[0] });
  }
  closeRegionModal() {
    this.regionModalTarget.classList.add("hidden");
    this.searchInputTarget.value = "";
    this.searchResultsTarget.classList.add("hidden");
  }
  selectDestination(event2) {
    const target = event2.currentTarget;
    const destination = target.dataset.destination;
    if (destination) {
      this.saveToHistory(destination);
      this.closeRegionModal();
    }
  }
  selectRegion(event2) {
    this.selectDestination(event2);
  }
  switchTab(event2) {
  }
  switchSelectorTab(event2) {
    const button = event2.currentTarget;
    const tab = button.dataset.tab || "popular";
    this.selectorTabTargets.forEach((tabBtn) => {
      if (tabBtn === button) {
        tabBtn.classList.add("border-black", "text-black");
        tabBtn.classList.remove("text-gray-500");
      } else {
        tabBtn.classList.remove("border-black", "text-black");
        tabBtn.classList.add("text-gray-500");
      }
    });
    if (tab === "popular") {
      this.popularSectionTarget.classList.remove("hidden");
      this.historySectionTarget.classList.add("hidden");
      this.searchResultsTarget.classList.add("hidden");
    } else {
      this.popularSectionTarget.classList.add("hidden");
      this.historySectionTarget.classList.remove("hidden");
      this.searchResultsTarget.classList.add("hidden");
      this.renderHistory();
    }
    this.currentTab = tab;
  }
  selectContinent(event2) {
    const button = event2.currentTarget;
    const continent = button.dataset.continent || "asia";
    this.showContinent(continent);
  }
  showContinent(continent) {
    this.continentBtnTargets.forEach((btn) => {
      if (btn.dataset.continent === continent) {
        btn.classList.add("bg-white", "font-bold", "border-l-2", "border-yellow-500");
        btn.classList.remove("text-gray-600");
      } else {
        btn.classList.remove("bg-white", "font-bold", "border-l-2", "border-yellow-500");
        btn.classList.add("text-gray-600");
      }
    });
    this.continentSectionTargets.forEach((section) => {
      const sectionContinent = section.dataset.continent;
      if (sectionContinent === continent) {
        section.classList.remove("hidden");
      } else {
        section.classList.add("hidden");
      }
    });
    this.currentContinent = continent;
  }
  searchDestinations(event2) {
    const query = this.searchInputTarget.value.trim().toLowerCase();
    if (query === "") {
      this.searchResultsTarget.classList.add("hidden");
      if (this.currentTab === "popular") {
        this.popularSectionTarget.classList.remove("hidden");
      } else {
        this.historySectionTarget.classList.remove("hidden");
      }
      return;
    }
    this.popularSectionTarget.classList.add("hidden");
    this.historySectionTarget.classList.add("hidden");
    this.searchResultsTarget.classList.remove("hidden");
    const allDestLinks = this.popularSectionTarget.querySelectorAll("[data-destination]");
    const matchingDests = [];
    allDestLinks.forEach((link) => {
      const htmlLink = link;
      const dest = htmlLink.dataset.destination || "";
      if (dest.toLowerCase().includes(query)) {
        matchingDests.push(htmlLink);
      }
    });
    if (matchingDests.length > 0) {
      const resultsHtml = `
        <h3 class="text-sm font-bold text-gray-500 mb-3">\u641C\u7D22\u7ED3\u679C (${matchingDests.length})</h3>
        <div class="grid grid-cols-3 gap-3">
          ${matchingDests.map((link) => link.outerHTML).join("")}
        </div>
      `;
      this.searchResultsTarget.innerHTML = resultsHtml;
    } else {
      this.searchResultsTarget.innerHTML = `
        <div class="text-center text-gray-400 py-12">
          <p>\u672A\u627E\u5230\u5339\u914D\u7684\u76EE\u7684\u5730</p>
        </div>
      `;
    }
  }
  clearHistory(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    if (confirm("\u786E\u5B9A\u8981\u6E05\u7A7A\u5386\u53F2\u9009\u62E9\u8BB0\u5F55\u5417?")) {
      this.destinationHistory = [];
      localStorage.removeItem("internet_services_destination_history");
      this.renderHistory();
    }
  }
  saveToHistory(destination) {
    this.destinationHistory = this.destinationHistory.filter((d) => d !== destination);
    this.destinationHistory.unshift(destination);
    if (this.destinationHistory.length > 20) {
      this.destinationHistory = this.destinationHistory.slice(0, 20);
    }
    localStorage.setItem("internet_services_destination_history", JSON.stringify(this.destinationHistory));
  }
  loadHistory() {
    const stored = localStorage.getItem("internet_services_destination_history");
    if (stored) {
      try {
        this.destinationHistory = JSON.parse(stored);
      } catch (e) {
        this.destinationHistory = [];
      }
    }
  }
  renderHistory() {
    if (this.destinationHistory.length === 0) {
      this.historySectionTarget.innerHTML = `
        <div class="text-center text-gray-400 py-12">
          <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
          <p>\u6682\u65E0\u5386\u53F2\u9009\u62E9\u8BB0\u5F55</p>
        </div>
      `;
      return;
    }
    const urlParams = new URLSearchParams(window.location.search);
    const currentRegion = urlParams.get("region") || "\u4E2D\u56FD\u9999\u6E2F";
    const currentTab = urlParams.get("tab") || "sim_card";
    const historyHtml = `
      <h3 class="text-sm font-bold text-gray-500 mb-3">\u6700\u8FD1\u9009\u62E9</h3>
      <div class="grid grid-cols-3 gap-3">
        ${this.destinationHistory.map((dest) => {
      const isSelected = dest === currentRegion;
      return `
            <a href="/internet_services?region=${encodeURIComponent(dest)}&tab=${currentTab}" 
               data-action="click->internet-services#selectDestination" 
               data-destination="${dest}"
               class="p-3 text-center rounded-lg border-2 transition-all ${isSelected ? "border-yellow-500 bg-yellow-50 font-bold text-yellow-600" : "border-gray-200 hover:border-yellow-300"}">
              <div class="flex items-center justify-center">
                <span class="text-sm">${dest}</span>
                ${isSelected ? `
                  <svg class="w-4 h-4 ml-1 text-yellow-500" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd"
                          d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                          clip-rule="evenodd"/>
                  </svg>
                ` : ""}
              </div>
            </a>
          `;
    }).join("")}
      </div>
    `;
    this.historySectionTarget.innerHTML = historyHtml;
  }
};

// app/javascript/controllers/sim_card_filter_controller.ts
var sim_card_filter_controller_default = class extends Controller {
  connect() {
    console.log("SimCardFilter connected");
  }
  selectDelivery(event2) {
    const button = event2.currentTarget;
    const method = button.dataset.method;
    const allButtons = this.element.querySelectorAll("[data-method]");
    allButtons.forEach((b) => {
      b.classList.remove("font-medium");
      b.classList.add("text-gray-700");
    });
    button.classList.add("font-medium");
  }
  selectDays(event2) {
    const button = event2.currentTarget;
    const allButtons = this.element.querySelectorAll("[data-days]");
    allButtons.forEach((b) => {
      b.classList.remove("bg-[#FFF8D8]", "border-[#FFCC00]", "font-medium");
      b.classList.add("bg-gray-50", "text-gray-700");
      b.querySelectorAll(".absolute").forEach((el) => el.remove());
    });
    button.classList.add("bg-[#FFF8D8]", "border-[#FFCC00]", "font-medium");
    button.classList.remove("bg-gray-50", "text-gray-700");
    const checkmarkHTML = `
      <div class="absolute bottom-0 right-0 w-3 h-3 bg-[#FFCC00] rounded-tl-lg"></div>
      <svg class="absolute bottom-0.5 right-0.5 w-1.5 h-1.5 text-black z-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path>
      </svg>
    `;
    button.insertAdjacentHTML("beforeend", checkmarkHTML);
  }
  selectData(event2) {
    const button = event2.currentTarget;
    const allButtons = this.element.querySelectorAll("[data-data]");
    allButtons.forEach((b) => {
      b.classList.remove("bg-[#FFF8D8]", "border-[#FFCC00]", "font-medium");
      b.classList.add("bg-gray-50", "text-gray-700");
      b.querySelectorAll(".absolute").forEach((el) => el.remove());
    });
    button.classList.add("bg-[#FFF8D8]", "border-[#FFCC00]", "font-medium");
    button.classList.remove("bg-gray-50", "text-gray-700");
    const checkmarkHTML = `
      <div class="absolute bottom-0 right-0 w-3 h-3 bg-[#FFCC00] rounded-tl-lg"></div>
      <svg class="absolute bottom-0.5 right-0.5 w-1.5 h-1.5 text-black z-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path>
      </svg>
    `;
    button.insertAdjacentHTML("beforeend", checkmarkHTML);
  }
};

// app/javascript/controllers/data_plan_controller.ts
var data_plan_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedPlanId = "";
    this.selectedPrice = 35;
  }
  static {
    this.targets = ["totalPrice", "paymentButton"];
  }
  connect() {
    console.log("DataPlan connected");
  }
  selectPlan(event2) {
    const card = event2.currentTarget;
    const planId = card.dataset.planId || "";
    const price = parseFloat(card.dataset.planPrice || "35");
    this.selectedPlanId = planId;
    this.selectedPrice = price;
    if (this.hasTotalPriceTarget) {
      this.totalPriceTarget.textContent = price.toFixed(0);
    }
    if (this.hasPaymentButtonTarget) {
      const url = new URL(this.paymentButtonTarget.href);
      url.searchParams.set("orderable_id", planId);
      this.paymentButtonTarget.href = url.toString();
    }
    const allCards = this.element.querySelectorAll("[data-plan-id]");
    allCards.forEach((c) => {
      c.classList.remove("bg-[#FFF9E6]", "border-[#FFD200]");
      c.classList.add("bg-[#F7F8FA]");
      const checkmark = c.querySelector(".absolute");
      if (checkmark) checkmark.remove();
    });
    card.classList.add("bg-[#FFF9E6]", "border-[#FFD200]");
    card.classList.remove("bg-[#F7F8FA]");
    const checkmarkHTML = `
      <div class="absolute bottom-0 right-0 w-0 h-0 border-solid border-[0_0_20px_24px] border-transparent border-b-[#FFD200] rounded-br-lg">
        <svg class="absolute bottom-[-16px] right-[2px] w-2 h-2 text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="4">
          <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path>
        </svg>
      </div>
    `;
    card.insertAdjacentHTML("beforeend", checkmarkHTML);
  }
};

// app/javascript/controllers/wifi_booking_controller.ts
var wifi_booking_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedPlanId = "";
    this.dailyPrice = 17;
    this.days = 7;
    this.currentDeliveryMethod = "pickup";
  }
  static {
    this.targets = [
      "quantity",
      "totalPrice",
      "contactName",
      "contactPhone",
      "dateRange",
      "mailTab",
      "pickupTab",
      "addressSection",
      "mailAddress"
    ];
  }
  connect() {
    const firstPlan = this.element.querySelector("[data-wifi-id]");
    if (firstPlan) {
      const id2 = firstPlan.getAttribute("data-wifi-id");
      const price = firstPlan.getAttribute("data-wifi-price");
      if (id2) this.selectedPlanId = id2;
      if (price) this.dailyPrice = parseFloat(price);
    }
    this.updateTotalPrice();
    this.updatePaymentButton();
  }
  selectPlan(event2) {
    const card = event2.currentTarget;
    const planId = card.dataset.wifiId || "";
    const price = parseFloat(card.dataset.wifiPrice || "17");
    this.selectedPlanId = planId;
    this.dailyPrice = price;
    this.updateTotalPrice();
    this.updatePaymentButton();
    const allCards = this.element.querySelectorAll("[data-wifi-id]");
    allCards.forEach((c) => {
      c.classList.remove("bg-[#FFFDF2]", "border-[#FFDD00]");
      c.classList.add("bg-white");
      const checkmark = c.querySelector(".bg-[#FFDD00]");
      if (checkmark) {
        checkmark.outerHTML = '<div class="w-5 h-5 ml-2 border border-gray-300 rounded-full"></div>';
      }
    });
    card.classList.add("bg-[#FFFDF2]", "border-[#FFDD00]");
    card.classList.remove("bg-white");
    const circle = card.querySelector(".border-gray-300");
    if (circle) {
      const checkmarkSVG = '<svg class="w-3.5 h-3.5 text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>';
      const checkmarkHTML = `<div class="w-5 h-5 ml-2 bg-[#FFDD00] rounded-full flex items-center justify-center">${checkmarkSVG}</div>`;
      circle.outerHTML = checkmarkHTML;
    }
  }
  selectDelivery(event2) {
    event2.preventDefault();
    const button = event2.currentTarget;
    const method = button.dataset.method;
    if (!method) return;
    this.currentDeliveryMethod = method;
    if (this.hasMailTabTarget && this.hasPickupTabTarget) {
      this.mailTabTarget.classList.remove("font-bold", "bg-white", "shadow-sm", "text-gray-800");
      this.mailTabTarget.classList.add("text-gray-500");
      this.pickupTabTarget.classList.remove("font-bold", "bg-white", "shadow-sm", "text-gray-800");
      this.pickupTabTarget.classList.add("text-gray-500");
      if (method === "mail") {
        this.mailTabTarget.classList.remove("text-gray-500");
        this.mailTabTarget.classList.add("font-bold", "bg-white", "shadow-sm", "text-gray-800");
        if (this.hasAddressSectionTarget) this.addressSectionTarget.classList.add("hidden");
        if (this.hasMailAddressTarget) this.mailAddressTarget.classList.remove("hidden");
      } else {
        this.pickupTabTarget.classList.remove("text-gray-500");
        this.pickupTabTarget.classList.add("font-bold", "bg-white", "shadow-sm", "text-gray-800");
        if (this.hasAddressSectionTarget) this.addressSectionTarget.classList.remove("hidden");
        if (this.hasMailAddressTarget) this.mailAddressTarget.classList.add("hidden");
      }
    }
  }
  increase() {
    const currentQty = parseInt(this.quantityTarget.textContent || "1");
    this.quantityTarget.textContent = (currentQty + 1).toString();
    this.updateTotalPrice();
  }
  decrease() {
    const currentQty = parseInt(this.quantityTarget.textContent || "1");
    if (currentQty > 1) {
      this.quantityTarget.textContent = (currentQty - 1).toString();
      this.updateTotalPrice();
    }
  }
  updateTotalPrice() {
    const quantity = parseInt(this.quantityTarget.textContent || "1");
    const total = this.dailyPrice * this.days * quantity;
    if (this.hasTotalPriceTarget) {
      this.totalPriceTarget.textContent = total.toFixed(0);
    }
  }
  updatePaymentButton() {
    console.log("[WiFi] updatePaymentButton called, selectedPlanId:", this.selectedPlanId);
    const paymentLink = this.element.querySelector("a#wifi-payment-link");
    console.log("[WiFi] Found paymentLink:", paymentLink);
    if (paymentLink && this.selectedPlanId) {
      const url = new URL(paymentLink.href);
      url.searchParams.set("orderable_id", this.selectedPlanId);
      paymentLink.href = url.toString();
      console.log("[WiFi] Updated paymentLink href to:", paymentLink.href);
    }
  }
};

// app/javascript/controllers/internet_order_form_controller.ts
var internet_order_form_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.basePrice = 0;
  }
  static {
    this.targets = ["quantity", "totalPrice"];
  }
  connect() {
    console.log("InternetOrderForm connected");
    const totalPriceField = this.element.querySelector('[data-internet-order-form-target="totalPriceField"]');
    if (totalPriceField) {
      this.basePrice = parseFloat(totalPriceField.value) || 0;
    }
  }
  selectAddress(event2) {
    const radio = event2.target;
    const selectedIndex = parseInt(radio.value);
    const labels = this.element.querySelectorAll('[data-internet-order-form-target="mailSection"] label');
    labels.forEach((label, index) => {
      if (index === selectedIndex) {
        label.classList.add("border-[#FFDD00]", "bg-[#FFFEF8]");
        label.classList.remove("border-gray-200");
      } else {
        label.classList.remove("border-[#FFDD00]", "bg-[#FFFEF8]");
        label.classList.add("border-gray-200");
      }
      const hiddenFields = label.querySelectorAll('input[type="hidden"]');
      hiddenFields.forEach((field) => {
        field.disabled = index !== selectedIndex;
      });
    });
  }
  selectPassenger(event2) {
    const radio = event2.target;
    const selectedIndex = parseInt(radio.value);
    const labels = this.element.querySelectorAll('[data-internet-order-form-target="pickupSection"] label');
    labels.forEach((label, index) => {
      if (index === selectedIndex) {
        label.classList.add("border-[#FFDD00]", "bg-[#FFFEF8]");
        label.classList.remove("border-gray-200");
      } else {
        label.classList.remove("border-[#FFDD00]", "bg-[#FFFEF8]");
        label.classList.add("border-gray-200");
      }
      const hiddenFields = label.querySelectorAll('input[type="hidden"]');
      hiddenFields.forEach((field) => {
        field.disabled = index !== selectedIndex;
      });
    });
  }
  increase() {
    const currentQty = parseInt(this.quantityTarget.textContent || "1");
    const newQty = currentQty + 1;
    this.quantityTarget.textContent = newQty.toString();
    this.updateQuantityField(newQty);
    this.updateTotalPrice(newQty);
  }
  decrease() {
    const currentQty = parseInt(this.quantityTarget.textContent || "1");
    if (currentQty > 1) {
      const newQty = currentQty - 1;
      this.quantityTarget.textContent = newQty.toString();
      this.updateQuantityField(newQty);
      this.updateTotalPrice(newQty);
    }
  }
  updateRentalDays(event2) {
    const input = event2.target;
    const days = parseInt(input.value) || 1;
    this.updateTotalPrice(days);
    const rentalDaysField = this.element.querySelector('[data-internet-order-form-target="rentalDaysField"]');
    if (rentalDaysField) {
      rentalDaysField.value = days.toString();
      const pickupDateField = rentalDaysField.closest("div")?.querySelector('input[name*="[pickup_date]"]');
      const returnDateField = rentalDaysField.closest("div")?.querySelector('input[name*="[return_date]"]');
      if (pickupDateField && returnDateField) {
        const pickupDate = new Date(pickupDateField.value);
        const returnDate = new Date(pickupDate);
        returnDate.setDate(returnDate.getDate() + days);
        returnDateField.value = returnDate.toISOString().split("T")[0];
      }
    }
  }
  selectDeliveryMethod(event2) {
    const radio = event2.target;
    const mailSection = this.element.querySelector('[data-internet-order-form-target="mailSection"]');
    const pickupSection = this.element.querySelector('[data-internet-order-form-target="pickupSection"]');
    const mailLabel = this.element.querySelector('[data-internet-order-form-target="mailLabel"]');
    const pickupLabel = this.element.querySelector('[data-internet-order-form-target="pickupLabel"]');
    if (radio.value === "mail") {
      mailSection?.classList.remove("hidden");
      pickupSection?.classList.add("hidden");
      mailLabel?.classList.add("border-[#FFDD00]", "bg-[#FFFEF8]");
      pickupLabel?.classList.remove("border-[#FFDD00]", "bg-[#FFFEF8]");
    } else {
      mailSection?.classList.add("hidden");
      pickupSection?.classList.remove("hidden");
      pickupLabel?.classList.add("border-[#FFDD00]", "bg-[#FFFEF8]");
      mailLabel?.classList.remove("border-[#FFDD00]", "bg-[#FFFEF8]");
    }
  }
  updateQuantityField(quantity) {
    const quantityField = this.element.querySelector('[data-internet-order-form-target="quantityField"]');
    if (quantityField) {
      quantityField.value = quantity.toString();
    }
  }
  updateTotalPrice(multiplier) {
    const total = this.basePrice * multiplier;
    if (this.hasTotalPriceTarget) {
      this.totalPriceTarget.textContent = total.toFixed(0);
    }
    const totalPriceField = this.element.querySelector('[data-internet-order-form-target="totalPriceField"]');
    if (totalPriceField) {
      totalPriceField.value = total.toString();
    }
  }
};

// app/javascript/controllers/product_card_controller.ts
var product_card_controller_default = class extends Controller {
  select(event2) {
    event2.preventDefault();
    const card = this.element;
    document.querySelectorAll('[data-controller="product-card"]').forEach((el) => {
      const checkbox = el.querySelector(".w-5.h-5.rounded-full");
      if (checkbox && !checkbox.classList.contains("border")) {
        el.classList.remove("border-[#FFCC00]", "bg-[#FFFEF8]");
        el.classList.add("border-gray-100", "bg-white");
      }
    });
    card.classList.remove("border-gray-100", "bg-white");
    card.classList.add("border-[#FFCC00]", "bg-[#FFFEF8]");
  }
};

// app/javascript/controllers/sim_card_booking_controller.ts
var sim_card_booking_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.basePrice = 9.9;
  }
  static {
    this.targets = ["quantity", "totalPrice"];
  }
  static {
    this.values = { orderableType: String };
  }
  connect() {
    const firstProduct = document.querySelector('[data-controller="product-card"]');
    if (firstProduct) {
      const priceEl = firstProduct.querySelector(".text-xl.font-bold.text-\\[\\#FF4400\\]");
      if (priceEl) {
        this.basePrice = parseFloat(priceEl.textContent || "9.9");
      }
    }
    this.updateTotalPrice();
  }
  decrease(event2) {
    event2.preventDefault();
    const currentQty = parseInt(this.quantityTarget.textContent || "1");
    if (currentQty > 1) {
      this.quantityTarget.textContent = (currentQty - 1).toString();
      this.updateTotalPrice();
    }
  }
  increase(event2) {
    event2.preventDefault();
    const currentQty = parseInt(this.quantityTarget.textContent || "1");
    this.quantityTarget.textContent = (currentQty + 1).toString();
    this.updateTotalPrice();
  }
  checkout(event2) {
    event2.preventDefault();
    const allCards = document.querySelectorAll('[data-controller="product-card"]');
    let selectedCard = null;
    allCards.forEach((card) => {
      const classes = card.className;
      if (classes.includes("FFCC00") || classes.includes("border-[#FFCC00]")) {
        selectedCard = card;
      }
    });
    if (!selectedCard && allCards.length > 0) {
      selectedCard = allCards[0];
    }
    if (!selectedCard) {
      alert("\u8BF7\u9009\u62E9\u4E00\u4E2ASIM\u5361\u4EA7\u54C1");
      return;
    }
    const orderableId = selectedCard.dataset.productId;
    const orderableType = this.orderableTypeValue;
    const quantity = this.quantityTarget.textContent;
    const url = `/internet_orders/new?orderable_type=${orderableType}&orderable_id=${orderableId}&quantity=${quantity}`;
    window.location.href = url;
  }
  updateTotalPrice() {
    const quantity = parseInt(this.quantityTarget.textContent || "1");
    const total = this.basePrice * quantity;
    this.totalPriceTarget.textContent = total.toFixed(1);
  }
};

// app/javascript/controllers/qrcode_modal_controller.ts
var qrcode_modal_controller_default = class extends Controller {
  static {
    this.targets = ["modal", "content"];
  }
  connect() {
    console.log("QrcodeModal controller connected");
  }
  // 
  show(event2) {
    event2.preventDefault();
    this.modalTarget.classList.remove("hidden");
    setTimeout(() => {
      this.contentTarget.classList.add("scale-100", "opacity-100");
    }, 10);
  }
  // 
  hide(event2) {
    event2.preventDefault();
    this.contentTarget.classList.remove("scale-100", "opacity-100");
    setTimeout(() => {
      this.modalTarget.classList.add("hidden");
    }, 200);
  }
  // 
  backdropClick(event2) {
    if (event2.target === this.modalTarget) {
      this.hide(event2);
    }
  }
};

// app/javascript/controllers/location_selector_controller.ts
var location_selector_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedLocation = null;
  }
  static {
    this.targets = [
      "modal",
      "searchInput",
      "locationList",
      "locationInput",
      "locationDisplay"
    ];
  }
  static {
    this.values = {
      locationType: String,
      // "from" or "to"
      currentCity: String
      // current selected city
    };
  }
  connect() {
    console.log("LocationSelector connected");
    this.initializeCurrentCity();
    document.addEventListener("city-selector:city-selected", this.handleCityChange.bind(this));
  }
  disconnect() {
    console.log("LocationSelector disconnected");
    document.removeEventListener("city-selector:city-selected", this.handleCityChange.bind(this));
  }
  // Initialize current city from the page
  initializeCurrentCity() {
    const cityDisplay = document.querySelector('[data-car-rental-tabs-target="cityDisplay"]');
    if (cityDisplay && cityDisplay.textContent) {
      this.currentCityValue = cityDisplay.textContent.trim();
      console.log("LocationSelector: Initial city from DOM:", this.currentCityValue);
    } else {
      this.currentCityValue = "\u6DF1\u5733";
      console.log("LocationSelector: Using fallback city:", this.currentCityValue);
    }
  }
  // Handle city change event
  handleCityChange(event2) {
    const customEvent = event2;
    const { cityName } = customEvent.detail;
    console.log("LocationSelector: City changed to", cityName);
    this.currentCityValue = cityName;
  }
  openModal() {
    console.log("[LocationSelector] openModal called");
    console.log("[LocationSelector] currentCityValue:", this.currentCityValue);
    this.modalTarget.classList.remove("hidden");
    this.searchInputTarget.value = "";
    this.searchInputTarget.focus();
    document.body.style.overflow = "hidden";
    console.log("[LocationSelector] About to call loadLocations()");
    this.loadLocations();
    console.log("[LocationSelector] loadLocations() called");
  }
  closeModal() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  stopPropagation(event2) {
    event2.stopPropagation();
  }
  selectLocation(event2) {
    const button = event2.currentTarget;
    const name = button.dataset.locationName || "";
    const address = button.dataset.locationAddress || "";
    this.selectedLocation = { name, address };
    this.locationListTarget.querySelectorAll("button").forEach((btn) => {
      btn.classList.remove("bg-primary-light", "border-primary");
    });
    button.classList.add("bg-primary-light", "border", "border-primary");
  }
  confirm() {
    if (!this.selectedLocation) {
      return;
    }
    if (this.hasLocationInputTarget) {
      this.locationInputTarget.value = this.selectedLocation.name;
    }
    if (this.hasLocationDisplayTarget) {
      this.locationDisplayTarget.textContent = this.selectedLocation.name;
      this.locationDisplayTarget.classList.remove("text-text-muted");
      this.locationDisplayTarget.classList.add("text-text-primary");
    }
    const event2 = new CustomEvent("location-selector:location-selected", {
      detail: {
        locationName: this.selectedLocation.name,
        locationAddress: this.selectedLocation.address
      },
      bubbles: true
    });
    document.dispatchEvent(event2);
    this.closeModal();
  }
  search(event2) {
    const input = event2.target;
    const query = input.value.toLowerCase().trim();
    const buttons = this.locationListTarget.querySelectorAll("button[data-location-name]");
    buttons.forEach((button) => {
      const element = button;
      const name = element.dataset.locationName?.toLowerCase() || "";
      const address = element.dataset.locationAddress?.toLowerCase() || "";
      if (name.includes(query) || address.includes(query)) {
        element.classList.remove("hidden");
      } else {
        element.classList.add("hidden");
      }
    });
  }
  async loadLocations() {
    const city = this.currentCityValue || "\u6DF1\u5733";
    console.log("[LocationSelector] loadLocations START - city:", city);
    try {
      console.log("[LocationSelector] Fetching from:", `/cars/locations?city=${encodeURIComponent(city)}`);
      const response = await fetch(`/cars/locations?city=${encodeURIComponent(city)}`);
      console.log("[LocationSelector] Response status:", response.status);
      console.log("[LocationSelector] Response ok:", response.ok);
      if (!response.ok) {
        throw new Error("Failed to load locations");
      }
      const data2 = await response.json();
      console.log("[LocationSelector] Data received:", data2);
      console.log("[LocationSelector] About to call renderLocations");
      this.renderLocations(data2.locations);
      console.log("[LocationSelector] renderLocations completed");
    } catch (error3) {
      console.error("[LocationSelector] Failed to load locations:", error3);
      this.renderDefaultLocations();
    }
  }
  renderLocations(locations) {
    console.log("[LocationSelector] renderLocations START");
    console.log("[LocationSelector] Airports:", locations.airports);
    console.log("[LocationSelector] Train stations:", locations.train_stations);
    console.log("[LocationSelector] Others:", locations.others);
    let html = "";
    if (locations.airports && locations.airports.length > 0) {
      html += `
        <div class="mb-4">
          <h4 class="text-xs text-text-muted mb-2">\u673A\u573A</h4>
          <div class="grid grid-cols-2 gap-2">
            ${locations.airports.map((airport) => `
              <button
                type="button"
                data-action="click->location-selector#selectLocation"
                data-location-name="${airport}"
                data-location-address="\u673A\u573A"
                class="w-full text-center p-2 rounded-lg hover:bg-surface-hover transition-colors text-sm">
                ${airport}
              </button>
            `).join("")}
          </div>
        </div>
      `;
    }
    if (locations.train_stations && locations.train_stations.length > 0) {
      html += `
        <div class="mb-4">
          <h4 class="text-xs text-text-muted mb-2">\u706B\u8F66\u7AD9</h4>
          <div class="grid grid-cols-3 gap-2">
            ${locations.train_stations.map((station) => `
              <button
                type="button"
                data-action="click->location-selector#selectLocation"
                data-location-name="${station}"
                data-location-address="\u706B\u8F66\u7AD9"
                class="w-full text-center p-2 rounded-lg hover:bg-surface-hover transition-colors text-xs">
                ${station}
              </button>
            `).join("")}
          </div>
        </div>
      `;
    }
    if (locations.others && locations.others.length > 0) {
      html += `
        <div class="mb-4">
          <h4 class="text-xs text-text-muted mb-2">\u5176\u4ED6\u5730\u70B9</h4>
          <div class="space-y-2">
            ${locations.others.map((location2) => `
              <button
                type="button"
                data-action="click->location-selector#selectLocation"
                data-location-name="${location2}"
                data-location-address="\u79DF\u8F66\u70B9"
                class="w-full text-left p-3 rounded-lg hover:bg-surface-hover transition-colors">
                <div class="flex items-start">
                  <svg class="w-5 h-5 text-text-muted mt-0.5 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
                  </svg>
                  <div class="flex-1">
                    <div class="text-text-primary font-medium">${location2}</div>
                    <div class="text-xs text-text-muted mt-0.5">\u79DF\u8F66\u70B9</div>
                  </div>
                </div>
              </button>
            `).join("")}
          </div>
        </div>
      `;
    }
    if (!html) {
      console.log("[LocationSelector] No locations found, showing fallback message");
      html = `
        <div class="text-center py-8 text-text-muted">
          <p>\u8BE5\u57CE\u5E02\u6682\u65E0\u79DF\u8F66\u70B9</p>
        </div>
      `;
    }
    console.log("[LocationSelector] Setting innerHTML, html length:", html.length);
    this.locationListTarget.innerHTML = html;
    console.log("[LocationSelector] innerHTML set successfully");
  }
  renderDefaultLocations() {
    this.renderLocations({
      airports: ["\u5929\u6CB3\u56FD\u9645\u673A\u573AT3"],
      train_stations: ["\u6B66\u6C49\u7AD9", "\u6B66\u660C\u7AD9", "\u6C49\u53E3\u7AD9"],
      others: []
    });
  }
};

// app/javascript/controllers/transfer_search_controller.ts
var transfer_search_controller_default = class extends Controller {
  static {
    this.values = {
      transferType: String,
      serviceType: String,
      flightId: String,
      trainId: String
    };
  }
  connect() {
    console.log("TransferSearch connected");
  }
  handleSearch(event2) {
    event2.preventDefault();
    const locationInput = document.querySelector('[data-location-selector-target="locationInput"]');
    const locationTo = locationInput?.value;
    if (!locationTo || locationTo.trim() === "") {
      alert("\u8BF7\u5148\u9009\u62E9\u4E0B\u8F66\u70B9");
      const modalButton = document.querySelector('[data-action="click->location-selector#openModal"]');
      if (modalButton) {
        modalButton.click();
      }
      return;
    }
    let locationFrom = "";
    if (this.flightIdValue) {
      const flightLocationElement = document.querySelector(".text-xl.font-bold.text-text-primary");
      locationFrom = flightLocationElement?.textContent?.trim() || "";
    } else if (this.trainIdValue) {
      const trainLocationElement = document.querySelector(".text-xl.font-bold.text-text-primary");
      locationFrom = trainLocationElement?.textContent?.trim() || "";
    }
    const params = new URLSearchParams();
    params.append("transfer_type", this.transferTypeValue);
    params.append("service_type", this.serviceTypeValue);
    params.append("location_to", locationTo);
    if (locationFrom) {
      params.append("location_from", locationFrom);
    }
    if (this.flightIdValue) {
      params.append("flight_id", this.flightIdValue);
    }
    if (this.trainIdValue) {
      params.append("train_id", this.trainIdValue);
    }
    window.location.href = `/transfers/packages?${params.toString()}`;
  }
};

// app/javascript/controllers/address_selector_controller.ts
var address_selector_controller_default = class extends Controller {
  static {
    this.targets = ["modal", "name", "phone", "address", "selectedInfo"];
  }
  static {
    this.values = {
      addressId: String
    };
  }
  connect() {
    console.log("AddressSelector connected");
  }
  openModal() {
    this.modalTarget.classList.remove("hidden");
  }
  closeModal() {
    this.modalTarget.classList.add("hidden");
  }
  selectAddress(event2) {
    const target = event2.currentTarget;
    const addressId = target.dataset.addressId || "";
    const name = target.dataset.name || "";
    const phone = target.dataset.phone || "";
    const address = target.dataset.address || "";
    this.addressIdValue = addressId;
    this.nameTarget.textContent = name;
    this.phoneTarget.textContent = phone;
    this.addressTarget.textContent = address;
    const visaOrderElement = document.querySelector('[data-controller*="visa-order"]');
    if (visaOrderElement) {
      const input = visaOrderElement.querySelector('[data-visa-order-target="deliveryAddress"]');
      if (input) {
        input.value = address;
      }
    }
    this.closeModal();
  }
};

// app/javascript/controllers/search_controller.ts
var search_controller_default = class extends Controller {
  static {
    this.targets = ["input"];
  }
  search(event2) {
    event2.preventDefault();
    let query = this.inputTarget.value.trim();
    if (query === "") {
      query = this.inputTarget.placeholder;
    }
    window.showToast(`\u641C\u7D22"${query}"\u529F\u80FD\u5373\u5C06\u4E0A\u7EBF\uFF0C\u656C\u8BF7\u671F\u5F85`);
  }
  clear() {
    this.inputTarget.value = "";
    this.inputTarget.focus();
  }
};

// app/javascript/controllers/hotel_filter_persistence_controller.ts
var hotel_filter_persistence_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.STORAGE_KEY = "hotel_filters_state";
    this.EXPIRY_TIME = 24 * 60 * 60 * 1e3;
  }
  // 24 hours
  connect() {
    console.log("HotelFilterPersistence connected");
    this.restoreFilters();
    this.setupSaveOnNavigation();
  }
  disconnect() {
    console.log("HotelFilterPersistence disconnected");
    this.saveFilters();
  }
  /**
   * Setup listeners to save filters on navigation
   */
  setupSaveOnNavigation() {
    window.addEventListener("beforeunload", this.saveFilters.bind(this));
    document.addEventListener("turbo:before-visit", this.saveFilters.bind(this));
    const form = document.querySelector('form[action*="hotels"]');
    if (form) {
      form.addEventListener("submit", this.saveFilters.bind(this));
    }
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.has("check_in") && urlParams.has("check_out")) {
      console.log("Detected filter parameters in URL, saving immediately");
      this.saveFilters();
    }
    this.monitorInputChanges();
  }
  /**
   * Monitor hidden input field changes and save immediately
   */
  monitorInputChanges() {
    const filterInputs = [
      "checkInInput",
      "checkOutInput",
      "roomsInput",
      "adultsInput",
      "childrenInput",
      "minPriceInput",
      "maxPriceInput",
      "starsInput"
    ];
    filterInputs.forEach((targetName) => {
      const selector = [
        `[data-hotel-search-target="${targetName}"]`,
        `[data-hotel-date-picker-target="${targetName}"]`,
        `[data-hotel-guest-selector-target="${targetName}"]`,
        `[data-hotel-price-filter-target="${targetName}"]`
      ].join(", ");
      const input = document.querySelector(selector);
      if (input) {
        const observer2 = new MutationObserver(() => {
          console.log(`Filter input changed: ${targetName}, saving...`);
          this.saveFilters();
        });
        observer2.observe(input, {
          attributes: true,
          attributeFilter: ["value"]
        });
        input.addEventListener("input", () => {
          console.log(`Filter input changed: ${targetName}, saving...`);
          this.saveFilters();
        });
      }
    });
  }
  /**
   * Save current filter state to sessionStorage
   */
  saveFilters() {
    try {
      const urlParams = new URLSearchParams(window.location.search);
      const checkIn = urlParams.get("check_in") || this.getInputValue("checkInInput") || "";
      const checkOut = urlParams.get("check_out") || this.getInputValue("checkOutInput") || "";
      if (!checkIn || !checkOut) {
        console.log("Skipping save - dates not set yet");
        return;
      }
      const filterState = {
        city: urlParams.get("city") || this.getInputValue("cityInput") || "\u6DF1\u5733",
        checkIn,
        checkOut,
        rooms: parseInt(urlParams.get("rooms") || this.getInputValue("roomsInput") || "1"),
        adults: parseInt(urlParams.get("adults") || this.getInputValue("adultsInput") || "1"),
        children: parseInt(urlParams.get("children") || this.getInputValue("childrenInput") || "0"),
        priceMin: urlParams.get("price_min") || this.getInputValue("minPriceInput") || "",
        priceMax: urlParams.get("price_max") || this.getInputValue("maxPriceInput") || "",
        starLevel: urlParams.get("star_level") || this.getInputValue("starsInput") || "",
        query: urlParams.get("q") || "",
        timestamp: Date.now()
      };
      sessionStorage.setItem(this.STORAGE_KEY, JSON.stringify(filterState));
      console.log("Hotel filters saved to sessionStorage:", filterState);
    } catch (error3) {
      console.error("Failed to save hotel filters:", error3);
    }
  }
  /**
   * Restore filter state from sessionStorage and apply to URL
   */
  restoreFilters() {
    try {
      const stored = sessionStorage.getItem(this.STORAGE_KEY);
      if (!stored) {
        console.log("No saved hotel filters found");
        return;
      }
      const filterState = JSON.parse(stored);
      if (!filterState.checkIn || !filterState.checkOut) {
        console.log("Stored filters missing dates, clearing...");
        sessionStorage.removeItem(this.STORAGE_KEY);
        return;
      }
      if (Date.now() - filterState.timestamp > this.EXPIRY_TIME) {
        console.log("Stored hotel filters expired, clearing...");
        sessionStorage.removeItem(this.STORAGE_KEY);
        return;
      }
      const urlParams = new URLSearchParams(window.location.search);
      const hasOtherParams = Array.from(urlParams.keys()).filter((k) => k !== "city").length > 0;
      const shouldRestore = !hasOtherParams;
      if (shouldRestore) {
        console.log("Restoring hotel filters from sessionStorage:", filterState);
        this.applyFiltersToURL(filterState);
      } else {
        console.log("URL has existing filter parameters, skipping restore");
      }
    } catch (error3) {
      console.error("Failed to restore hotel filters:", error3);
      sessionStorage.removeItem(this.STORAGE_KEY);
    }
  }
  /**
   * Apply filter state to URL and reload page
   */
  applyFiltersToURL(filterState) {
    const url = new URL(window.location.href);
    url.searchParams.set("city", filterState.city);
    url.searchParams.set("check_in", filterState.checkIn);
    url.searchParams.set("check_out", filterState.checkOut);
    url.searchParams.set("rooms", filterState.rooms.toString());
    url.searchParams.set("adults", filterState.adults.toString());
    url.searchParams.set("children", filterState.children.toString());
    if (filterState.priceMin) {
      url.searchParams.set("price_min", filterState.priceMin);
    }
    if (filterState.priceMax) {
      url.searchParams.set("price_max", filterState.priceMax);
    }
    if (filterState.starLevel) {
      url.searchParams.set("star_level", filterState.starLevel);
    }
    if (filterState.query) {
      url.searchParams.set("q", filterState.query);
    }
    const newURL = url.toString();
    if (newURL !== window.location.href) {
      console.log("Redirecting with restored filters:", newURL);
      window.location.href = newURL;
    } else {
      console.log("URL already matches stored filters, skipping redirect");
    }
  }
  /**
   * Helper method to get input value by data-target attribute
   */
  getInputValue(targetName) {
    const selector = [
      `[data-hotel-search-target="${targetName}"]`,
      `[data-hotel-date-picker-target="${targetName}"]`,
      `[data-hotel-guest-selector-target="${targetName}"]`,
      `[data-hotel-price-filter-target="${targetName}"]`
    ].join(", ");
    const input = document.querySelector(selector);
    return input ? input.value : "";
  }
  /**
   * Clear saved filters (can be called manually if needed)
   */
  clearSavedFilters() {
    sessionStorage.removeItem(this.STORAGE_KEY);
    console.log("Hotel filters cleared from sessionStorage");
  }
};

// app/javascript/controllers/hotel_services_search_controller.ts
var hotel_services_search_controller_default = class extends Controller {
  static {
    this.targets = ["cityInput", "checkInInput", "checkOutInput"];
  }
  connect() {
    console.log("HotelServicesSearch connected");
    document.addEventListener("city-selector:city-changed", this.handleCityChange.bind(this));
    document.addEventListener("hotel-date-picker:dates-selected", this.handleDateChange.bind(this));
  }
  disconnect() {
    document.removeEventListener("city-selector:city-changed", this.handleCityChange.bind(this));
    document.removeEventListener("hotel-date-picker:dates-selected", this.handleDateChange.bind(this));
  }
  handleCityChange(event2) {
    const customEvent = event2;
    const cityName = customEvent.detail.cityName;
    console.log("HotelServicesSearch: City changed to", cityName);
    this.cityInputTarget.value = cityName;
    this.updateURLAndReload();
  }
  handleDateChange(event2) {
    const customEvent = event2;
    const { checkIn, checkOut } = customEvent.detail;
    console.log("HotelServicesSearch: Dates changed", { checkIn, checkOut });
    this.checkInInputTarget.value = checkIn;
    this.checkOutInputTarget.value = checkOut;
    this.updateURLAndReload();
  }
  updateURLAndReload() {
    const params = new URLSearchParams(window.location.search);
    if (this.cityInputTarget.value) {
      params.set("city", this.cityInputTarget.value);
    } else {
      params.delete("city");
    }
    if (this.checkInInputTarget.value) {
      params.set("check_in", this.checkInInputTarget.value);
    } else {
      params.delete("check_in");
    }
    if (this.checkOutInputTarget.value) {
      params.set("check_out", this.checkOutInputTarget.value);
    } else {
      params.delete("check_out");
    }
    window.location.href = `${window.location.pathname}?${params.toString()}`;
  }
};

// app/javascript/controllers/live_room_controller.ts
var live_room_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.currentIndex = 0;
    this.startY = 0;
    this.startTime = 0;
    this.isDragging = false;
  }
  static {
    this.targets = ["wrapper", "slide"];
  }
  connect() {
    console.log("LiveRoom connected");
    this.element.addEventListener("touchstart", this.handleTouchStart.bind(this), { passive: true });
    this.element.addEventListener("touchmove", this.handleTouchMove.bind(this), { passive: false });
    this.element.addEventListener("touchend", this.handleTouchEnd.bind(this), { passive: true });
    this.showSlide(0);
  }
  disconnect() {
    console.log("LiveRoom disconnected");
    this.element.removeEventListener("touchstart", this.handleTouchStart.bind(this));
    this.element.removeEventListener("touchmove", this.handleTouchMove.bind(this));
    this.element.removeEventListener("touchend", this.handleTouchEnd.bind(this));
  }
  handleTouchStart(e) {
    this.startY = e.touches[0].clientY;
    this.startTime = Date.now();
    this.isDragging = true;
  }
  handleTouchMove(e) {
    if (!this.isDragging) return;
    const currentY = e.touches[0].clientY;
    const diffY = currentY - this.startY;
    if (Math.abs(diffY) > 10) {
      e.preventDefault();
    }
  }
  handleTouchEnd(e) {
    if (!this.isDragging) return;
    const endY = e.changedTouches[0].clientY;
    const diffY = endY - this.startY;
    const diffTime = Date.now() - this.startTime;
    this.isDragging = false;
    const velocity = Math.abs(diffY) / diffTime;
    const isSwipeUp = diffY < -50 || diffY < -30 && velocity > 0.5;
    const isSwipeDown = diffY > 50 || diffY > 30 && velocity > 0.5;
    if (isSwipeUp) {
      this.nextSlide();
    } else if (isSwipeDown) {
      this.prevSlide();
    }
    this.startY = 0;
    this.startTime = 0;
  }
  nextSlide() {
    if (this.currentIndex < this.slideTargets.length - 1) {
      this.showSlide(this.currentIndex + 1);
    }
  }
  prevSlide() {
    if (this.currentIndex > 0) {
      this.showSlide(this.currentIndex - 1);
    }
  }
  showSlide(index) {
    this.slideTargets.forEach((slide, i) => {
      slide.classList.remove("active", "prev");
      if (i === index) {
        slide.classList.add("active");
      } else if (i === index - 1) {
        slide.classList.add("prev");
      }
    });
    this.currentIndex = index;
    if (index > 0) {
      const swipeHint = document.querySelector(".live-swipe-hint");
      if (swipeHint) {
        swipeHint.style.display = "none";
      }
    }
  }
};

// app/javascript/controllers/special_hotel_search_controller.ts
var special_hotel_search_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.searchTimeout = null;
  }
  static {
    this.targets = ["searchInput"];
  }
  static {
    this.values = {
      city: String,
      query: String
    };
  }
  connect() {
    if (this.hasSearchInputTarget && this.queryValue) {
      this.searchInputTarget.value = this.queryValue;
    }
  }
  // Search hotels with debounce
  search() {
    if (this.searchTimeout) {
      clearTimeout(this.searchTimeout);
    }
    this.searchTimeout = window.setTimeout(() => {
      this.performSearch();
    }, 500);
  }
  // Perform the actual search
  performSearch() {
    if (!this.hasSearchInputTarget) return;
    const query = this.searchInputTarget.value.trim();
    const city = this.cityValue || "\u5317\u4EAC\u5E02";
    const url = new URL("/special_hotels", window.location.origin);
    url.searchParams.set("city", city);
    if (query) {
      url.searchParams.set("query", query);
    }
    Turbo.visit(url.toString());
  }
};

// app/javascript/controllers/special_hotel_filter_controller.ts
var special_hotel_filter_controller_default = class extends Controller {
  static {
    this.targets = [
      "sortModal",
      "districtModal",
      "priceModal",
      "filterModal",
      "sortButton",
      "districtButton",
      "priceButton",
      "filterButton",
      "sortOption",
      "districtOption",
      "priceOption",
      "starOption"
    ];
  }
  static {
    this.values = {
      city: String,
      query: String,
      sort: { type: String, default: "price" },
      district: { type: String, default: "" },
      priceRange: { type: String, default: "" },
      stars: { type: String, default: "" }
    };
  }
  connect() {
    this.updateButtonStates();
  }
  // Open modals
  openSortModal() {
    if (this.hasSortModalTarget) {
      this.closeAllModals();
      this.sortModalTarget.classList.remove("hidden");
    }
  }
  openDistrictModal() {
    if (this.hasDistrictModalTarget) {
      this.closeAllModals();
      this.districtModalTarget.classList.remove("hidden");
    }
  }
  openPriceModal() {
    if (this.hasPriceModalTarget) {
      this.closeAllModals();
      this.priceModalTarget.classList.remove("hidden");
    }
  }
  openFilterModal() {
    if (this.hasFilterModalTarget) {
      this.closeAllModals();
      this.filterModalTarget.classList.remove("hidden");
    }
  }
  // Close all modals
  closeAllModals() {
    if (this.hasSortModalTarget) this.sortModalTarget.classList.add("hidden");
    if (this.hasDistrictModalTarget) this.districtModalTarget.classList.add("hidden");
    if (this.hasPriceModalTarget) this.priceModalTarget.classList.add("hidden");
    if (this.hasFilterModalTarget) this.filterModalTarget.classList.add("hidden");
  }
  // Select sort option
  selectSort(event2) {
    const target = event2.currentTarget;
    const sortValue = target.dataset.value || "price";
    this.sortValue = sortValue;
    this.closeAllModals();
    this.applyFilters();
  }
  // Select district option
  selectDistrict(event2) {
    const target = event2.currentTarget;
    const districtValue = target.dataset.value || "";
    this.districtValue = districtValue;
    this.closeAllModals();
    this.applyFilters();
  }
  // Select price range option
  selectPriceRange(event2) {
    const target = event2.currentTarget;
    const priceValue = target.dataset.value || "";
    this.priceRangeValue = priceValue;
    this.closeAllModals();
    this.applyFilters();
  }
  // Toggle star rating
  toggleStar(event2) {
    const target = event2.currentTarget;
    const starValue = target.dataset.value || "";
    if (this.starsValue === starValue) {
      this.starsValue = "";
    } else {
      this.starsValue = starValue;
    }
    this.updateStarStates();
  }
  // Apply all filters
  applyFilters() {
    const url = new URL("/special_hotels", window.location.origin);
    url.searchParams.set("city", this.cityValue || "\u5317\u4EAC\u5E02");
    if (this.queryValue) {
      url.searchParams.set("query", this.queryValue);
    }
    if (this.sortValue && this.sortValue !== "price") {
      url.searchParams.set("sort", this.sortValue);
    }
    if (this.districtValue) {
      url.searchParams.set("district", this.districtValue);
    }
    if (this.priceRangeValue) {
      url.searchParams.set("price_range", this.priceRangeValue);
    }
    if (this.starsValue) {
      url.searchParams.set("stars", this.starsValue);
    }
    this.closeAllModals();
    Turbo.visit(url.toString());
  }
  // Clear all filters
  clearFilters() {
    this.sortValue = "price";
    this.districtValue = "";
    this.priceRangeValue = "";
    this.starsValue = "";
    this.applyFilters();
  }
  // Update button states based on active filters
  updateButtonStates() {
    if (this.sortValue !== "price") {
      this.sortButtonTarget.classList.add("text-primary");
    }
    if (this.districtValue) {
      this.districtButtonTarget.classList.add("text-primary");
    }
    if (this.priceRangeValue) {
      this.priceButtonTarget.classList.add("text-primary");
    }
    if (this.starsValue) {
      this.filterButtonTarget.classList.add("text-primary");
    }
  }
  // Update star rating visual states
  updateStarStates() {
    this.starOptionTargets.forEach((target) => {
      const value = target.dataset.value || "";
      if (value === this.starsValue) {
        target.classList.add("bg-primary", "text-white");
        target.classList.remove("bg-gray-100", "text-gray-700");
      } else {
        target.classList.remove("bg-primary", "text-white");
        target.classList.add("bg-gray-100", "text-gray-700");
      }
    });
  }
  // Stop event propagation
  stopPropagation(event2) {
    event2.stopPropagation();
  }
};

// app/javascript/controllers/hotel_search_filter_controller.ts
var hotel_search_filter_controller_default = class extends Controller {
  static {
    this.targets = [
      "sortModal",
      "districtModal",
      "priceModal",
      "filterModal",
      "sortButton",
      "districtButton",
      "priceButton",
      "filterButton",
      "sortOption",
      "districtOption",
      "priceOption",
      "starOption"
    ];
  }
  static {
    this.values = {
      city: String,
      checkIn: String,
      checkOut: String,
      rooms: Number,
      adults: Number,
      children: Number,
      query: String,
      sort: { type: String, default: "recommend" },
      district: { type: String, default: "" },
      priceRange: { type: String, default: "" },
      stars: { type: String, default: "" }
    };
  }
  connect() {
    this.updateButtonStates();
  }
  // Open modals
  openSortModal() {
    if (this.hasSortModalTarget) {
      this.closeAllModals();
      this.sortModalTarget.classList.remove("hidden");
    }
  }
  openDistrictModal() {
    if (this.hasDistrictModalTarget) {
      this.closeAllModals();
      this.districtModalTarget.classList.remove("hidden");
    }
  }
  openPriceModal() {
    if (this.hasPriceModalTarget) {
      this.closeAllModals();
      this.priceModalTarget.classList.remove("hidden");
    }
  }
  openFilterModal() {
    if (this.hasFilterModalTarget) {
      this.closeAllModals();
      this.filterModalTarget.classList.remove("hidden");
    }
  }
  // Close all modals
  closeAllModals() {
    if (this.hasSortModalTarget) this.sortModalTarget.classList.add("hidden");
    if (this.hasDistrictModalTarget) this.districtModalTarget.classList.add("hidden");
    if (this.hasPriceModalTarget) this.priceModalTarget.classList.add("hidden");
    if (this.hasFilterModalTarget) this.filterModalTarget.classList.add("hidden");
  }
  // Select sort option
  selectSort(event2) {
    const target = event2.currentTarget;
    const sortValue = target.dataset.value || "recommend";
    this.sortValue = sortValue;
    this.closeAllModals();
    this.applyFilters();
  }
  // Select district option
  selectDistrict(event2) {
    const target = event2.currentTarget;
    const districtValue = target.dataset.value || "";
    this.districtValue = districtValue;
    this.closeAllModals();
    this.applyFilters();
  }
  // Select price range option
  selectPriceRange(event2) {
    const target = event2.currentTarget;
    const priceValue = target.dataset.value || "";
    this.priceRangeValue = priceValue;
    this.closeAllModals();
    this.applyFilters();
  }
  // Toggle star rating
  toggleStar(event2) {
    const target = event2.currentTarget;
    const starValue = target.dataset.value || "";
    if (this.starsValue === starValue) {
      this.starsValue = "";
    } else {
      this.starsValue = starValue;
    }
    this.updateStarStates();
  }
  // Apply all filters
  applyFilters() {
    const url = new URL("/hotels/search", window.location.origin);
    url.searchParams.set("city", this.cityValue || "\u6DF1\u5733\u5E02");
    url.searchParams.set("check_in", this.checkInValue);
    url.searchParams.set("check_out", this.checkOutValue);
    url.searchParams.set("rooms", this.roomsValue.toString());
    url.searchParams.set("adults", this.adultsValue.toString());
    url.searchParams.set("children", this.childrenValue.toString());
    if (this.queryValue) {
      url.searchParams.set("q", this.queryValue);
    }
    if (this.sortValue && this.sortValue !== "recommend") {
      url.searchParams.set("sort", this.sortValue);
    }
    if (this.districtValue) {
      url.searchParams.set("district", this.districtValue);
    }
    if (this.priceRangeValue) {
      url.searchParams.set("price_range", this.priceRangeValue);
    }
    if (this.starsValue) {
      url.searchParams.set("star_level", this.starsValue);
    }
    this.closeAllModals();
    Turbo.visit(url.toString());
  }
  // Clear all filters
  clearFilters() {
    this.sortValue = "recommend";
    this.districtValue = "";
    this.priceRangeValue = "";
    this.starsValue = "";
    this.applyFilters();
  }
  // Update button states based on active filters
  updateButtonStates() {
    if (this.sortValue !== "recommend") {
      this.sortButtonTarget.classList.add("text-primary");
    }
    if (this.districtValue) {
      this.districtButtonTarget.classList.add("text-primary");
    }
    if (this.priceRangeValue) {
      this.priceButtonTarget.classList.add("text-primary");
    }
    if (this.starsValue) {
      this.filterButtonTarget.classList.add("text-primary");
    }
  }
  // Update star rating visual states
  updateStarStates() {
    this.starOptionTargets.forEach((target) => {
      const value = target.dataset.value || "";
      if (value === this.starsValue) {
        target.classList.add("bg-primary", "text-white");
        target.classList.remove("bg-gray-100", "text-gray-700");
      } else {
        target.classList.remove("bg-primary", "text-white");
        target.classList.add("bg-gray-100", "text-gray-700");
      }
    });
  }
  // Stop event propagation
  stopPropagation(event2) {
    event2.stopPropagation();
  }
};

// app/javascript/controllers/blind_box_controller.ts
var blind_box_controller_default = class extends Controller {
  static {
    this.targets = [
      // Add your targets here, e.g.:
      // "messageInput", "messagesContainer", "sendButton"
    ];
  }
  static {
    this.values = {
      // Add your values here, e.g.:
      // roomId: String,
      // userId: String
    };
  }
  // Declare your targets and values
  // declare readonly messageInputTarget: HTMLInputElement
  // declare readonly messagesContainerTarget: HTMLElement
  // declare readonly roomIdValue: string
  connect() {
    console.log("BlindBox connected");
  }
  disconnect() {
    console.log("BlindBox disconnected");
  }
  // Add your action methods here
  // Example:
  // click(): void {
  //   console.log("Button clicked")
  // }
  // FORMS: Turbo + Turbo Streams handle everything automatically
  // - Forms submit via AJAX (Turbo Drive)
  // - Server responds with format.turbo_stream
  // - Turbo Streams update DOM automatically
  // - NO manual form handling needed in Stimulus
  //
  // Use Stimulus for:
  // - UI interactions (toggle, show/hide)
  // - Input validation/formatting
  // - Dynamic form fields
};

// app/javascript/controllers/hotel_map_toggle_controller.ts
var hotel_map_toggle_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.isExpanded = false;
  }
  static {
    this.targets = ["mapContainer", "closeButton", "expandButton"];
  }
  connect() {
    console.log("HotelMapToggle connected");
  }
  toggle() {
    this.isExpanded = !this.isExpanded;
    if (this.isExpanded) {
      this.mapContainerTarget.style.height = "600px";
      this.expandButtonTarget.classList.add("hidden");
      this.closeButtonTarget.classList.remove("hidden");
      this.mapContainerTarget.scrollIntoView({ behavior: "smooth", block: "start" });
    } else {
      this.mapContainerTarget.style.height = "128px";
      this.expandButtonTarget.classList.remove("hidden");
      this.closeButtonTarget.classList.add("hidden");
    }
  }
  // 
  toggleAndScroll(event2) {
    event2.preventDefault();
    const mapContainer = document.querySelector('[data-hotel-map-toggle-target="mapContainer"]');
    if (!mapContainer) {
      console.error("\u627E\u4E0D\u5230\u5730\u56FE\u5BB9\u5668");
      return;
    }
    const mapController = this.application.getControllerForElementAndIdentifier(
      mapContainer.closest('[data-controller~="hotel-map-toggle"]'),
      "hotel-map-toggle"
    );
    if (mapController) {
      if (mapController.isExpanded) {
        mapContainer.scrollIntoView({ behavior: "smooth", block: "start" });
      } else {
        mapController.toggle();
      }
    } else {
      console.error("\u627E\u4E0D\u5230\u5730\u56FE\u63A7\u5236\u5668");
    }
  }
};

// app/javascript/controllers/hotel_map_controller.ts
var hotel_map_controller_default = class extends Controller {
  static {
    this.targets = [
      "marker",
      "hotelCard"
    ];
  }
  connect() {
    console.log("HotelMap connected");
  }
  disconnect() {
    console.log("HotelMap disconnected");
  }
  // Show hotel info when marker is clicked
  showHotelInfo(event2) {
    event2.preventDefault();
    const marker = event2.currentTarget;
    const hotelId = marker.dataset.hotelId;
    if (!hotelId) return;
    const hotelCard = this.hotelCardTargets.find(
      (card) => card.dataset.hotelId === hotelId
    );
    if (hotelCard) {
      hotelCard.scrollIntoView({
        behavior: "smooth",
        block: "center"
      });
      hotelCard.classList.add("bg-yellow-50");
      setTimeout(() => {
        hotelCard.classList.remove("bg-yellow-50");
      }, 2e3);
    }
  }
};

// app/javascript/controllers/smart_back_controller.ts
var smart_back_controller_default = class extends Controller {
  static {
    this.values = {
      fallback: { type: String, default: "/" }
    };
  }
  connect() {
  }
  /**
   * Smart back navigation based on referrer
   * - If user came from same site: go back
   * - If user came from external site or direct access: go to fallback
   */
  goBack(event2) {
    event2.preventDefault();
    const referrer = document.referrer;
    const currentHost = window.location.host;
    if (referrer && referrer.includes(currentHost)) {
      if (window.history.length > 1) {
        window.history.back();
        return;
      }
    }
    window.location.href = this.fallbackValue;
  }
};

// app/javascript/controllers/tour_group_tabs_controller.ts
var tour_group_tabs_controller_default = class extends Controller {
  static {
    this.targets = [
      // Add your targets here, e.g.:
      // "messageInput", "messagesContainer", "sendButton"
    ];
  }
  static {
    this.values = {
      // Add your values here, e.g.:
      // roomId: String,
      // userId: String
    };
  }
  // Declare your targets and values
  // declare readonly messageInputTarget: HTMLInputElement
  // declare readonly messagesContainerTarget: HTMLElement
  // declare readonly roomIdValue: string
  connect() {
    console.log("TourGroupTabs connected");
  }
  disconnect() {
    console.log("TourGroupTabs disconnected");
  }
  // Add your action methods here
  // Example:
  // click(): void {
  //   console.log("Button clicked")
  // }
  // FORMS: Turbo + Turbo Streams handle everything automatically
  // - Forms submit via AJAX (Turbo Drive)
  // - Server responds with format.turbo_stream
  // - Turbo Streams update DOM automatically
  // - NO manual form handling needed in Stimulus
  //
  // Use Stimulus for:
  // - UI interactions (toggle, show/hide)
  // - Input validation/formatting
  // - Dynamic form fields
};

// app/javascript/controllers/hotel_price_filter_controller.ts
var hotel_price_filter_controller_default = class extends Controller {
  static {
    this.targets = [
      "modal",
      "minSlider",
      "maxSlider",
      "sliderTrack",
      "minPriceDisplay",
      "maxPriceDisplay",
      "starRating",
      "pricePreset",
      "displayText"
    ];
  }
  static {
    this.values = {
      minPrice: Number,
      maxPrice: Number,
      stars: Number
    };
  }
  connect() {
    console.log("HotelPriceFilter connected");
    const urlParams = new URLSearchParams(window.location.search);
    const minPriceParam = urlParams.get("price_min");
    const maxPriceParam = urlParams.get("price_max");
    const starLevelParam = urlParams.get("star_level");
    this.minPriceValue = minPriceParam && minPriceParam !== "" ? parseInt(minPriceParam) : 0;
    this.maxPriceValue = maxPriceParam && maxPriceParam !== "" ? parseInt(maxPriceParam) : 3e3;
    this.starsValue = starLevelParam && starLevelParam !== "" ? parseInt(starLevelParam) : 0;
    this.minSliderTarget.value = this.minPriceValue.toString();
    this.maxSliderTarget.value = this.maxPriceValue.toString();
    this.minPriceDisplayTarget.textContent = this.minPriceValue.toString();
    this.maxPriceDisplayTarget.textContent = this.maxPriceValue.toString();
    this.updateSliderTrack();
    this.updatePresetSelection();
    this.updateStarSelection();
    this.updateDisplayText();
  }
  openModal() {
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  closeModal() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  updateMinPrice() {
    const minValue = parseInt(this.minSliderTarget.value);
    const maxValue = parseInt(this.maxSliderTarget.value);
    if (minValue > maxValue) {
      this.minSliderTarget.value = maxValue.toString();
      this.minPriceValue = maxValue;
    } else {
      this.minPriceValue = minValue;
    }
    this.minPriceDisplayTarget.textContent = this.minPriceValue.toString();
    this.updateSliderTrack();
  }
  updateMaxPrice() {
    const minValue = parseInt(this.minSliderTarget.value);
    const maxValue = parseInt(this.maxSliderTarget.value);
    if (maxValue < minValue) {
      this.maxSliderTarget.value = minValue.toString();
      this.maxPriceValue = minValue;
    } else {
      this.maxPriceValue = maxValue;
    }
    this.maxPriceDisplayTarget.textContent = this.maxPriceValue.toString();
    this.updateSliderTrack();
  }
  setQuickPrice(event2) {
    const button = event2.currentTarget;
    const min = parseInt(button.dataset.min || "0");
    const max = parseInt(button.dataset.max || "3000");
    this.pricePresetTargets.forEach((el) => {
      el.classList.remove("selected", "border-yellow-500", "bg-yellow-50");
      el.classList.add("border-gray-300");
    });
    button.classList.remove("border-gray-300");
    button.classList.add("selected", "border-yellow-500", "bg-yellow-50");
    this.minSliderTarget.value = min.toString();
    this.maxSliderTarget.value = max.toString();
    this.minPriceValue = min;
    this.maxPriceValue = max;
    this.minPriceDisplayTarget.textContent = min.toString();
    this.maxPriceDisplayTarget.textContent = max.toString();
    this.updateSliderTrack();
  }
  updateSliderTrack() {
    const sliderMax = 3e3;
    const minPercent = this.minPriceValue / sliderMax * 100;
    const maxPercent = this.maxPriceValue / sliderMax * 100;
    this.sliderTrackTarget.style.left = `${minPercent}%`;
    this.sliderTrackTarget.style.right = `${100 - maxPercent}%`;
  }
  selectStarRating(event2) {
    const target = event2.currentTarget;
    const stars = parseInt(target.dataset.stars || "0");
    if (this.starsValue === stars) {
      this.starsValue = 0;
      target.classList.remove("selected", "border-yellow-500", "bg-yellow-50");
      target.classList.add("border-gray-300");
    } else {
      this.starRatingTargets.forEach((el) => {
        el.classList.remove("selected", "border-yellow-500", "bg-yellow-50");
        el.classList.add("border-gray-300");
      });
      target.classList.remove("border-gray-300");
      target.classList.add("selected", "border-yellow-500", "bg-yellow-50");
      this.starsValue = stars;
    }
  }
  reset() {
    this.minPriceValue = 0;
    this.maxPriceValue = 3e3;
    this.minSliderTarget.value = "0";
    this.maxSliderTarget.value = "3000";
    this.minPriceDisplayTarget.textContent = "0";
    this.maxPriceDisplayTarget.textContent = "3000";
    this.updateSliderTrack();
    this.pricePresetTargets.forEach((el) => {
      el.classList.remove("selected", "border-yellow-500", "bg-yellow-50");
      el.classList.add("border-gray-300");
    });
    this.starsValue = 0;
    this.starRatingTargets.forEach((el) => {
      el.classList.remove("selected", "border-yellow-500", "bg-yellow-50");
      el.classList.add("border-gray-300");
    });
    this.updateDisplayText();
  }
  confirm() {
    this.updateDisplayText();
    this.dispatchFilterUpdateEvent();
    this.closeModal();
  }
  updateDisplayText() {
    const parts = [];
    if (this.minPriceValue > 0 || this.maxPriceValue < 3e3) {
      if (this.maxPriceValue >= 3e3) {
        parts.push(`\xA5${this.minPriceValue}+`);
      } else {
        parts.push(`\xA5${this.minPriceValue}-${this.maxPriceValue}`);
      }
    }
    if (this.starsValue > 0) {
      const starLabels = {
        2: "\u4E8C\u661F",
        3: "\u4E09\u661F",
        4: "\u56DB\u661F",
        5: "\u4E94\u661F"
      };
      parts.push(starLabels[this.starsValue] || `${this.starsValue}\u661F`);
    }
    if (parts.length > 0) {
      this.displayTextTarget.textContent = parts.join(" \xB7 ");
    } else {
      this.displayTextTarget.textContent = "\u4EF7\u683C/\u661F\u7EA7";
    }
  }
  dispatchFilterUpdateEvent() {
    const filterUpdateEvent = new CustomEvent("hotel-price-filter:filter-updated", {
      detail: {
        minPrice: this.minPriceValue,
        maxPrice: this.maxPriceValue,
        stars: this.starsValue
      },
      bubbles: true
    });
    document.dispatchEvent(filterUpdateEvent);
    console.log("Hotel price filter: Dispatched filter update event", {
      minPrice: this.minPriceValue,
      maxPrice: this.maxPriceValue,
      stars: this.starsValue
    });
  }
  updatePresetSelection() {
    this.pricePresetTargets.forEach((el) => {
      const min = parseInt(el.dataset.min || "0");
      const max = parseInt(el.dataset.max || "3000");
      if (min === this.minPriceValue && max === this.maxPriceValue) {
        el.classList.remove("border-gray-300");
        el.classList.add("selected", "border-yellow-500", "bg-yellow-50");
      } else {
        el.classList.remove("selected", "border-yellow-500", "bg-yellow-50");
        el.classList.add("border-gray-300");
      }
    });
  }
  updateStarSelection() {
    this.starRatingTargets.forEach((el) => {
      const stars = parseInt(el.dataset.stars || "0");
      if (stars === this.starsValue && this.starsValue > 0) {
        el.classList.remove("border-gray-300");
        el.classList.add("selected", "border-yellow-500", "bg-yellow-50");
      } else {
        el.classList.remove("selected", "border-yellow-500", "bg-yellow-50");
        el.classList.add("border-gray-300");
      }
    });
  }
};

// app/javascript/controllers/hotel_guarantee_controller.ts
var hotel_guarantee_controller_default = class extends Controller {
  static {
    this.targets = ["modal", "content"];
  }
  connect() {
    console.log("HotelGuarantee connected");
  }
  open() {
    this.modalTarget.classList.remove("hidden");
  }
  close(event2) {
    if (event2) {
      event2.stopPropagation();
    }
    this.modalTarget.classList.add("hidden");
  }
  closeOnBackdrop(event2) {
    if (event2.target === this.modalTarget) {
      this.close();
    }
  }
  stopPropagation(event2) {
    event2.stopPropagation();
  }
};

// app/javascript/controllers/filter_dropdown_controller.ts
var filter_dropdown_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.activeDropdown = null;
  }
  static {
    this.targets = ["dropdown", "overlay"];
  }
  connect() {
    console.log("FilterDropdown connected");
  }
  disconnect() {
    this.closeAllDropdowns();
  }
  // 
  toggle(event2) {
    const button = event2.currentTarget;
    const dropdownId = button.dataset.dropdownId;
    if (!dropdownId) return;
    const dropdown = this.dropdownTargets.find((el) => el.dataset.dropdownId === dropdownId);
    if (!dropdown) return;
    if (this.activeDropdown === dropdown) {
      this.closeAllDropdowns();
      return;
    }
    this.closeAllDropdowns();
    this.openDropdown(dropdown);
  }
  // 
  openDropdown(dropdown) {
    this.activeDropdown = dropdown;
    dropdown.classList.remove("hidden");
    if (this.hasOverlayTarget) {
      this.overlayTarget.classList.remove("hidden");
    }
  }
  // 
  closeAllDropdowns() {
    this.dropdownTargets.forEach((dropdown) => {
      dropdown.classList.add("hidden");
    });
    if (this.hasOverlayTarget) {
      this.overlayTarget.classList.add("hidden");
    }
    this.activeDropdown = null;
  }
  // 
  closeOnOverlay() {
    this.closeAllDropdowns();
  }
  // 
  selectOption() {
    setTimeout(() => this.closeAllDropdowns(), 100);
  }
  // /
  toggleGroup(event2) {
    event2.preventDefault();
    const button = event2.currentTarget;
    const groupIndex = button.dataset.groupIndex;
    if (!groupIndex) return;
    const groupElement = this.element.querySelector(`[data-group="${groupIndex}"]`);
    if (!groupElement) return;
    const svg = button.querySelector("svg");
    if (!svg) return;
    if (groupElement.classList.contains("hidden")) {
      groupElement.classList.remove("hidden");
      svg.style.transform = "rotate(0deg)";
    } else {
      groupElement.classList.add("hidden");
      svg.style.transform = "rotate(-90deg)";
    }
  }
};

// app/javascript/controllers/custom_travel_modal_controller.ts
var custom_travel_modal_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.currentDate = /* @__PURE__ */ new Date();
    this.selectedDate = null;
    this.isInitialized = false;
  }
  static {
    this.targets = [
      "modal",
      "overlay",
      "departureCity",
      "destinationCity",
      "adultsCount",
      "childrenCount",
      "eldersCount",
      "daysCount",
      "departureCityInput",
      "destinationCityInput",
      "adultsInput",
      "childrenInput",
      "eldersInput",
      "daysInput",
      "departureDateDisplay",
      "departureDateInput",
      "datePicker",
      "currentMonth",
      "calendarGrid",
      "contactTimeDisplay",
      "contactTimeInput",
      "contactTimePicker",
      "phoneInput"
    ];
  }
  connect() {
    console.log("CustomTravelModal connected");
  }
  // 
  open(event2) {
    const button = event2.currentTarget;
    const destination = button.dataset.destination;
    if (destination) {
      this.destinationCityTarget.textContent = destination;
      this.destinationCityInputTarget.value = destination;
    }
    if (!this.isInitialized) {
      this.renderCalendar();
      this.isInitialized = true;
    }
    this.modalTarget.classList.remove("hidden");
    this.overlayTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // 
  close() {
    this.modalTarget.classList.add("hidden");
    this.overlayTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  // 
  closeOnOverlay(event2) {
    if (event2.target === this.overlayTarget) {
      this.close();
    }
  }
  // 
  increaseAdults() {
    const current = parseInt(this.adultsInputTarget.value) || 0;
    this.adultsInputTarget.value = (current + 1).toString();
    this.adultsCountTarget.textContent = (current + 1).toString();
  }
  // 
  decreaseAdults() {
    const current = parseInt(this.adultsInputTarget.value) || 0;
    if (current > 0) {
      this.adultsInputTarget.value = (current - 1).toString();
      this.adultsCountTarget.textContent = (current - 1).toString();
    }
  }
  // 
  increaseChildren() {
    const current = parseInt(this.childrenInputTarget.value) || 0;
    this.childrenInputTarget.value = (current + 1).toString();
    this.childrenCountTarget.textContent = (current + 1).toString();
  }
  // 
  decreaseChildren() {
    const current = parseInt(this.childrenInputTarget.value) || 0;
    if (current > 0) {
      this.childrenInputTarget.value = (current - 1).toString();
      this.childrenCountTarget.textContent = (current - 1).toString();
    }
  }
  // 
  increaseElders() {
    const current = parseInt(this.eldersInputTarget.value) || 0;
    this.eldersInputTarget.value = (current + 1).toString();
    this.eldersCountTarget.textContent = (current + 1).toString();
  }
  // 
  decreaseElders() {
    const current = parseInt(this.eldersInputTarget.value) || 0;
    if (current > 0) {
      this.eldersInputTarget.value = (current - 1).toString();
      this.eldersCountTarget.textContent = (current - 1).toString();
    }
  }
  // 
  increaseDays() {
    const current = parseInt(this.daysInputTarget.value) || 0;
    this.daysInputTarget.value = (current + 1).toString();
    this.daysCountTarget.textContent = (current + 1).toString();
  }
  // 
  decreaseDays() {
    const current = parseInt(this.daysInputTarget.value) || 0;
    if (current > 1) {
      this.daysInputTarget.value = (current - 1).toString();
      this.daysCountTarget.textContent = (current - 1).toString();
    }
  }
  // 
  selectDepartureCity(event2) {
    const target = event2.currentTarget;
    const city = target.dataset.city || "";
    this.departureCityTarget.textContent = city;
    this.departureCityInputTarget.value = city;
  }
  // 
  selectDestinationCity(event2) {
    const target = event2.currentTarget;
    const city = target.dataset.city || "";
    this.destinationCityTarget.textContent = city;
    this.destinationCityInputTarget.value = city;
  }
  // 
  toggleDatePicker() {
    this.datePickerTarget.classList.toggle("hidden");
  }
  // 
  toggleContactTimePicker() {
    this.contactTimePickerTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // 
  closeContactTimePicker() {
    this.contactTimePickerTarget.classList.add("hidden");
    document.body.style.overflow = "hidden";
  }
  // 
  selectContactTime(event2) {
    const target = event2.currentTarget;
    const time = target.dataset.time || "";
    this.contactTimeDisplayTarget.textContent = time;
    this.contactTimeInputTarget.value = time;
    this.closeContactTimePicker();
  }
  // 
  clearPhone() {
    this.phoneInputTarget.value = "";
    this.phoneInputTarget.focus();
  }
  // 
  previousMonth() {
    this.currentDate.setMonth(this.currentDate.getMonth() - 1);
    this.renderCalendar();
  }
  // 
  nextMonth() {
    this.currentDate.setMonth(this.currentDate.getMonth() + 1);
    this.renderCalendar();
  }
  // 
  renderCalendar() {
    const year = this.currentDate.getFullYear();
    const month = this.currentDate.getMonth();
    this.currentMonthTarget.textContent = `${year}\u5E74${month + 1}\u6708`;
    const firstDay = new Date(year, month, 1);
    const lastDay = new Date(year, month + 1, 0);
    const daysInMonth = lastDay.getDate();
    const startDayOfWeek = firstDay.getDay();
    this.calendarGridTarget.innerHTML = "";
    for (let i = 0; i < startDayOfWeek; i++) {
      const emptyDiv = document.createElement("div");
      this.calendarGridTarget.appendChild(emptyDiv);
    }
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    for (let day = 1; day <= daysInMonth; day++) {
      const dateButton = document.createElement("button");
      dateButton.type = "button";
      dateButton.textContent = day.toString();
      dateButton.className = "w-8 h-8 rounded-full text-xs hover:bg-gray-100 transition-colors";
      const currentDateInLoop = new Date(year, month, day);
      currentDateInLoop.setHours(0, 0, 0, 0);
      if (currentDateInLoop < today) {
        dateButton.disabled = true;
        dateButton.className = "w-8 h-8 rounded-full text-xs text-gray-300 cursor-not-allowed";
      } else {
        if (this.selectedDate && currentDateInLoop.getTime() === this.selectedDate.getTime()) {
          dateButton.className = "w-8 h-8 rounded-full text-xs bg-[#FFD700] text-gray-800 font-bold";
        }
        dateButton.addEventListener("click", () => {
          this.selectDate(currentDateInLoop);
        });
      }
      this.calendarGridTarget.appendChild(dateButton);
    }
  }
  // 
  selectDate(date) {
    this.selectedDate = date;
    const year = date.getFullYear();
    const month = (date.getMonth() + 1).toString().padStart(2, "0");
    const day = date.getDate().toString().padStart(2, "0");
    const formattedDate = `${year}-${month}-${day}`;
    this.departureDateDisplayTarget.textContent = `${month}\u6708${day}\u65E5`;
    this.departureDateDisplayTarget.classList.remove("text-gray-400");
    this.departureDateDisplayTarget.classList.add("text-gray-800", "font-medium");
    this.departureDateInputTarget.value = formattedDate;
    this.datePickerTarget.classList.add("hidden");
    this.renderCalendar();
  }
};

// app/javascript/controllers/communication_timeline_controller.ts
var communication_timeline_controller_default = class extends Controller {
  static {
    this.targets = ["modal", "overlay", "contactModal", "contactOverlay"];
  }
  connect() {
    console.log("CommunicationTimeline connected");
  }
  disconnect() {
    console.log("CommunicationTimeline disconnected");
  }
  open() {
    this.modalTarget.classList.remove("hidden");
    this.overlayTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  close() {
    this.modalTarget.classList.add("hidden");
    this.overlayTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  openContactModal() {
    this.contactModalTarget.classList.remove("hidden");
    this.contactOverlayTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  closeContactModal() {
    this.contactModalTarget.classList.add("hidden");
    this.contactOverlayTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  stopPropagation(event2) {
    event2.stopPropagation();
  }
};

// app/javascript/controllers/abroad_ticket_type_controller.ts
var abroad_ticket_type_controller_default = class extends Controller {
  connect() {
    console.log("AbroadTicketType controller connected");
  }
};

// app/javascript/controllers/landmark_filter_controller.ts
var landmark_filter_controller_default = class extends Controller {
  connect() {
    console.log("LandmarkFilter controller connected");
  }
};

// app/javascript/controllers/car_datetime_picker_controller.ts
var car_datetime_picker_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.currentMonth = /* @__PURE__ */ new Date();
    this.selectedDate = null;
    this.selectedTime = "10:00";
  }
  static {
    this.targets = [
      "modal",
      "titleText",
      "dateSection",
      "timeSection",
      "calendar",
      "monthLabel",
      "timeGrid",
      "selectedDateDisplay",
      "confirmButton"
    ];
  }
  static {
    this.values = {
      pickerType: String
      // 'pickup' or 'return'
    };
  }
  connect() {
    console.log("CarDatetimePicker connected");
  }
  disconnect() {
    console.log("CarDatetimePicker disconnected");
  }
  openModal(pickerType = "pickup") {
    this.pickerTypeValue = pickerType;
    this.titleTextTarget.textContent = pickerType === "pickup" ? "\u9009\u62E9\u53D6\u8F66\u65F6\u95F4" : "\u9009\u62E9\u8FD8\u8F66\u65F6\u95F4";
    this.currentMonth = /* @__PURE__ */ new Date();
    this.selectedDate = null;
    this.selectedTime = "10:00";
    this.dateSectionTarget.classList.remove("hidden");
    this.timeSectionTarget.classList.add("hidden");
    this.renderCalendar();
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  closeModal() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  cancel() {
    this.closeModal();
  }
  previousMonth() {
    this.currentMonth = new Date(this.currentMonth.getFullYear(), this.currentMonth.getMonth() - 1, 1);
    this.renderCalendar();
  }
  nextMonth() {
    this.currentMonth = new Date(this.currentMonth.getFullYear(), this.currentMonth.getMonth() + 1, 1);
    this.renderCalendar();
  }
  selectDate(event2) {
    const button = event2.currentTarget;
    const dateStr = button.dataset.date;
    if (!dateStr) return;
    this.selectedDate = this.parseLocalDate(dateStr);
    this.dateSectionTarget.classList.add("hidden");
    this.timeSectionTarget.classList.remove("hidden");
    this.selectedDateDisplayTarget.textContent = this.formatDateDisplay(this.selectedDate);
    this.timeGridTarget.querySelectorAll("button").forEach((btn) => {
      btn.classList.remove("bg-blue-500", "text-white", "border-blue-500");
      btn.classList.add("border-gray-300");
    });
  }
  selectTime(event2) {
    const button = event2.currentTarget;
    const time = button.dataset.time;
    if (!time) return;
    this.selectedTime = time;
    this.timeGridTarget.querySelectorAll("button").forEach((btn) => {
      btn.classList.remove("bg-blue-500", "text-white", "border-blue-500");
      btn.classList.add("border-gray-300");
    });
    button.classList.add("bg-blue-500", "text-white", "border-blue-500");
    button.classList.remove("border-gray-300");
  }
  confirm() {
    if (!this.selectedDate) {
      alert("\u8BF7\u5148\u9009\u62E9\u65E5\u671F");
      return;
    }
    const [hours, minutes] = this.selectedTime.split(":").map(Number);
    const dateTime = new Date(this.selectedDate);
    dateTime.setHours(hours, minutes, 0, 0);
    const event2 = new CustomEvent("car-datetime-picker:datetime-selected", {
      detail: {
        pickerType: this.pickerTypeValue,
        dateTime,
        dateTimeString: dateTime.toISOString()
      },
      bubbles: true
    });
    document.dispatchEvent(event2);
    this.closeModal();
  }
  renderCalendar() {
    const year = this.currentMonth.getFullYear();
    const month = this.currentMonth.getMonth();
    this.monthLabelTarget.textContent = `${year}\u5E74${month + 1}\u6708`;
    const firstDay = new Date(year, month, 1);
    const lastDay = new Date(year, month + 1, 0);
    const daysInMonth = lastDay.getDate();
    const startingDayOfWeek = firstDay.getDay();
    const days = [];
    const prevMonthLastDay = new Date(year, month, 0).getDate();
    for (let i = startingDayOfWeek - 1; i >= 0; i--) {
      const day = prevMonthLastDay - i;
      const date = new Date(year, month - 1, day);
      days.push({
        date,
        dayOfMonth: day,
        isCurrentMonth: false,
        isToday: false,
        isSelected: false,
        isDisabled: true
      });
    }
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    for (let day = 1; day <= daysInMonth; day++) {
      const date = new Date(year, month, day);
      date.setHours(0, 0, 0, 0);
      const isToday = date.getTime() === today.getTime();
      const isSelected = this.selectedDate && date.getFullYear() === this.selectedDate.getFullYear() && date.getMonth() === this.selectedDate.getMonth() && date.getDate() === this.selectedDate.getDate();
      const isDisabled = date < today;
      days.push({
        date,
        dayOfMonth: day,
        isCurrentMonth: true,
        isToday,
        isSelected: isSelected || false,
        isDisabled
      });
    }
    const remainingDays = 42 - days.length;
    for (let day = 1; day <= remainingDays; day++) {
      const date = new Date(year, month + 1, day);
      days.push({
        date,
        dayOfMonth: day,
        isCurrentMonth: false,
        isToday: false,
        isSelected: false,
        isDisabled: true
      });
    }
    let html = '<div class="grid grid-cols-7 gap-1">';
    days.forEach((day) => {
      const dateStr = this.formatDate(day.date);
      const classes = [
        "py-3",
        "text-center",
        "rounded-lg",
        "transition-colors"
      ];
      if (!day.isCurrentMonth || day.isDisabled) {
        classes.push("text-gray-300", "cursor-not-allowed");
      } else {
        classes.push("hover:bg-blue-50", "cursor-pointer");
        if (day.isToday) {
          classes.push("font-bold", "text-blue-600");
        }
        if (day.isSelected) {
          classes.push("bg-blue-500", "text-white", "font-bold");
        }
      }
      const disabled = !day.isCurrentMonth || day.isDisabled;
      html += `
        <button
          type="button"
          data-action="click->car-datetime-picker#selectDate"
          data-date="${dateStr}"
          class="${classes.join(" ")}"
          ${disabled ? "disabled" : ""}>
          ${day.dayOfMonth}
        </button>
      `;
    });
    html += "</div>";
    this.calendarTarget.innerHTML = html;
  }
  parseLocalDate(dateStr) {
    const parts = dateStr.split("-");
    if (parts.length === 3) {
      const year = parseInt(parts[0], 10);
      const month = parseInt(parts[1], 10) - 1;
      const day = parseInt(parts[2], 10);
      return new Date(year, month, day);
    }
    return /* @__PURE__ */ new Date();
  }
  formatDate(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    return `${year}-${month}-${day}`;
  }
  formatDateDisplay(date) {
    const weekdays = ["\u5468\u65E5", "\u5468\u4E00", "\u5468\u4E8C", "\u5468\u4E09", "\u5468\u56DB", "\u5468\u4E94", "\u5468\u516D"];
    const month = date.getMonth() + 1;
    const day = date.getDate();
    const weekday = weekdays[date.getDay()];
    return `${month}\u6708${day}\u65E5 ${weekday}`;
  }
};

// app/javascript/controllers/car_order_controller.ts
var car_order_controller_default = class extends Controller {
  static {
    this.targets = ["form"];
  }
  connect() {
    console.log("Car order controller connected");
  }
  async createOrder(event2) {
    event2.preventDefault();
    const button = event2.currentTarget;
    if (!this.hasFormTarget) {
      alert("\u8868\u5355\u672A\u627E\u5230");
      return;
    }
    const formData = new FormData(this.formTarget);
    const driverName = formData.get("car_order[driver_name]");
    const driverIdNumber = formData.get("car_order[driver_id_number]");
    const contactPhone = formData.get("car_order[contact_phone]");
    if (!driverName || !driverIdNumber || !contactPhone) {
      alert("\u8BF7\u9009\u62E9\u9A7E\u9A76\u4EBA\u5E76\u586B\u5199\u5B8C\u6574\u4FE1\u606F");
      return;
    }
    const orderData = {
      car_order: {
        car_id: formData.get("car_order[car_id]"),
        driver_name: driverName,
        driver_id_number: driverIdNumber,
        contact_phone: contactPhone,
        pickup_datetime: formData.get("car_order[pickup_datetime]"),
        return_datetime: formData.get("car_order[return_datetime]"),
        pickup_location: formData.get("car_order[pickup_location]"),
        total_price: formData.get("car_order[total_price]")
      }
    };
    button.disabled = true;
    const originalText = button.innerHTML;
    button.innerHTML = '<span class="font-bold text-lg">\u521B\u5EFA\u4E2D...</span>';
    try {
      const csrfToken = document.querySelector('meta[name="csrf-token"]')?.content || "";
      const response = await fetch("/car_orders", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "X-CSRF-Token": csrfToken,
          "Accept": "application/json"
        },
        body: JSON.stringify(orderData)
      });
      const data2 = await response.json();
      if (response.ok && data2.success) {
        this.triggerPaymentModal(
          orderData.car_order.total_price,
          data2.pay_url,
          data2.success_url
        );
      } else {
        throw new Error(data2.errors?.join(", ") || "\u521B\u5EFA\u8BA2\u5355\u5931\u8D25");
      }
    } catch (error3) {
      console.error("Error creating order:", error3);
      const message = error3 instanceof Error ? error3.message : "\u521B\u5EFA\u8BA2\u5355\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5";
      if (typeof window.showToast === "function") {
        window.showToast(message);
      } else {
        alert(message);
      }
      button.disabled = false;
      button.innerHTML = originalText;
    }
  }
  triggerPaymentModal(amount, paymentUrl, successUrl) {
    const paymentElement = document.querySelector('[data-controller*="payment-confirmation"]');
    if (!paymentElement) {
      console.error("Payment confirmation controller not found");
      alert("\u652F\u4ED8\u7CFB\u7EDF\u672A\u52A0\u8F7D\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
      return;
    }
    const app = window.Stimulus;
    if (!app) {
      console.error("Stimulus not found");
      alert("\u7CFB\u7EDF\u9519\u8BEF\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
      return;
    }
    const paymentController = app.getControllerForElementAndIdentifier(paymentElement, "payment-confirmation");
    if (paymentController) {
      paymentController.amountValue = amount;
      const userEmail = document.querySelector('meta[name="user-email"]')?.content || document.querySelector("[data-user-email]")?.getAttribute("data-user-email") || "demo@example.com";
      paymentController.userEmailValue = userEmail;
      paymentController.paymentUrlValue = paymentUrl;
      paymentController.successUrlValue = successUrl;
      paymentController.showPasswordModal();
    } else {
      console.error("Payment controller not initialized");
      alert("\u652F\u4ED8\u7CFB\u7EDF\u672A\u521D\u59CB\u5316\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
    }
  }
};

// app/javascript/controllers/index.ts
var application = Application.start();
application.register("theme", theme_controller_default);
application.register("dropdown", dropdown_controller_default);
application.register("sdk-integration", sdk_integration_controller_default);
application.register("clipboard", clipboard_controller_default);
application.register("city-selector", city_selector_controller_default);
application.register("flight-search", flight_search_controller_default);
application.register("flight-history", flight_history_controller_default);
application.register("date-picker", date_picker_controller_default);
application.register("booking", booking_controller_default);
application.register("coupon", coupon_controller_default);
application.register("destination", destination_controller_default);
application.register("region-selector", region_selector_controller_default);
application.register("hotel-search", hotel_search_controller_default);
application.register("hotel-detail", hotel_detail_controller_default);
application.register("service-grid", service_grid_controller_default);
application.register("passenger-selector", passenger_selector_controller_default);
application.register("cabin-selector", cabin_selector_controller_default);
application.register("trip-type", trip_type_controller_default);
application.register("return-date-picker", return_date_picker_controller_default);
application.register("round-trip-selector", round_trip_selector_controller_default);
application.register("train-search", train_search_controller_default);
application.register("train-list", train_list_controller_default);
application.register("train-city-selector", train_city_selector_controller_default);
application.register("infinite-scroll", infinite_scroll_controller_default);
application.register("deep-travel", deep_travel_controller_default);
application.register("multi-city", multi_city_controller_default);
application.register("flight-filter", flight_filter_controller_default);
application.register("flight-sort", flight_sort_controller_default);
application.register("flight-info-display", flight_info_display_controller_default);
application.register("date-link", date_link_controller_default);
application.register("hotel-guest-selector", hotel_guest_selector_controller_default);
application.register("hotel-date-picker", hotel_date_picker_controller_default);
application.register("payment-modal", payment_modal_controller_default);
application.register("payment-confirmation", payment_confirmation_controller_default);
application.register("hotel-tabs", hotel_tabs_controller_default);
application.register("hotel-traveler-selector", hotel_traveler_selector_controller_default);
application.register("toast", toast_controller_default);
application.register("toast-trigger", toast_trigger_controller_default);
application.register("hotel-booking", hotel_booking_controller_default);
application.register("tour-detail", tour_detail_controller_default);
application.register("carousel", carousel_controller_default);
application.register("scroll-spy", scroll_spy_controller_default);
application.register("package-switcher", package_switcher_controller_default);
application.register("booking-modal", booking_modal_controller_default);
application.register("bottom-bar", bottom_bar_controller_default);
application.register("insurance-selector", insurance_selector_controller_default);
application.register("tour-traveler-selector", tour_traveler_selector_controller_default);
application.register("special-flights-form", special_flights_form_controller_default);
application.register("train-booking", train_booking_controller_default);
application.register("train-booking-lock", train_booking_lock_controller_default);
application.register("train-seat-selector", train_seat_selector_controller_default);
application.register("tour-group-filter", tour_group_filter_controller_default);
application.register("car-rental-tabs", car_rental_tabs_controller_default);
application.register("hotel-package-search", hotel_package_search_controller_default);
application.register("hotel-package-order", hotel_package_order_controller_default);
application.register("pwa-install", pwa_install_controller_default);
application.register("bus-date-picker", bus_date_picker_controller_default);
application.register("bus-ticket-search", bus_ticket_search_controller_default);
application.register("bus-ticket-order", bus_ticket_order_controller_default);
application.register("deep-booking", deep_booking_controller_default);
application.register("visa-order", visa_order_controller_default);
application.register("abroad-region-selector", abroad_region_selector_controller_default);
application.register("abroad-date-picker", abroad_date_picker_controller_default);
application.register("abroad-passenger-selector", abroad_passenger_selector_controller_default);
application.register("abroad-order-form", abroad_order_form_controller_default);
application.register("abroad-ticket-search", abroad_ticket_search_controller_default);
application.register("homestay-search", homestay_search_controller_default);
application.register("internet-services", internet_services_controller_default);
application.register("sim-card-filter", sim_card_filter_controller_default);
application.register("data-plan", data_plan_controller_default);
application.register("wifi-booking", wifi_booking_controller_default);
application.register("internet-order-form", internet_order_form_controller_default);
application.register("product-card", product_card_controller_default);
application.register("sim-card-booking", sim_card_booking_controller_default);
application.register("qrcode-modal", qrcode_modal_controller_default);
application.register("location-selector", location_selector_controller_default);
application.register("transfer-search", transfer_search_controller_default);
application.register("address-selector", address_selector_controller_default);
application.register("search", search_controller_default);
application.register("hotel-filter-persistence", hotel_filter_persistence_controller_default);
application.register("hotel-services-search", hotel_services_search_controller_default);
application.register("live-room", live_room_controller_default);
application.register("special-hotel-search", special_hotel_search_controller_default);
application.register("special-hotel-filter", special_hotel_filter_controller_default);
application.register("hotel-search-filter", hotel_search_filter_controller_default);
application.register("blind-box", blind_box_controller_default);
application.register("hotel-map-toggle", hotel_map_toggle_controller_default);
application.register("hotel-map", hotel_map_controller_default);
application.register("smart-back", smart_back_controller_default);
application.register("tour-group-tabs", tour_group_tabs_controller_default);
application.register("hotel-price-filter", hotel_price_filter_controller_default);
application.register("hotel-guarantee", hotel_guarantee_controller_default);
application.register("filter-dropdown", filter_dropdown_controller_default);
application.register("custom-travel-modal", custom_travel_modal_controller_default);
application.register("communication-timeline", communication_timeline_controller_default);
application.register("abroad-ticket-type", abroad_ticket_type_controller_default);
application.register("landmark-filter", landmark_filter_controller_default);
application.register("car-datetime-picker", car_datetime_picker_controller_default);
application.register("car-order", car_order_controller_default);
window.Stimulus = application;

// app/javascript/clipboard_utils.ts
function copyToClipboard(text) {
  return new Promise((resolve, reject) => {
    if (navigator.clipboard && window.isSecureContext) {
      navigator.clipboard.writeText(text).then(() => resolve(true)).catch(() => {
        if (fallbackCopy(text)) {
          resolve(true);
        } else {
          reject(new Error("Copy failed"));
        }
      });
    } else {
      if (fallbackCopy(text)) {
        resolve(true);
      } else {
        reject(new Error("Copy failed"));
      }
    }
  });
}
function fallbackCopy(text) {
  const textArea = document.createElement("textarea");
  textArea.value = text;
  textArea.style.position = "fixed";
  textArea.style.opacity = "0";
  document.body.appendChild(textArea);
  textArea.select();
  try {
    const success = document.execCommand("copy");
    document.body.removeChild(textArea);
    return success;
  } catch (error3) {
    document.body.removeChild(textArea);
    return false;
  }
}
window.copyToClipboard = copyToClipboard;

// app/javascript/sdk_utils.ts
var SDKUtils = class {
  constructor() {
    this.isAvailable = this.checkSDKAvailability();
  }
  /**
   * Check if SDK is available in current context
   */
  checkSDKAvailability() {
    return typeof window.sdk !== "undefined" && window.sdk && typeof window.sdk.send === "function";
  }
  /**
   * Send message to chatbox if SDK is available
   * @param {string} message - Message to send
   * @returns {boolean} - Whether message was sent successfully
   */
  sendMessage(message) {
    if (this.isAvailable) {
      try {
        window.sdk.send(message);
        console.log("Message sent to chatbox:", message);
        return true;
      } catch (error3) {
        console.error("Failed to send message to SDK:", error3);
        return false;
      }
    } else {
      console.log("SDK not available. Would send message:", message);
      return false;
    }
  }
  /**
   * Send error details to chatbox for fixing
   * @param {Object} errorInfo - Error information object
   */
  sendErrorForFix(errorInfo = {}) {
    const {
      url = window.location.href,
      path = window.location.pathname.substring(1),
      errorMessage = "Unknown error",
      additionalContext = ""
    } = errorInfo;
    const message = `Fix this error:
URL: ${url}
Error: ${errorMessage}
Path: ${path}${additionalContext ? `

Additional Context:
${additionalContext}` : ""}

Please help me fix this issue.`;
    return this.sendMessage(message);
  }
  /**
   * Refresh SDK availability status
   */
  refresh() {
    this.isAvailable = this.checkSDKAvailability();
    return this.isAvailable;
  }
  /**
   * Get current SDK status
   */
  getStatus() {
    return {
      isAvailable: this.isAvailable,
      hasSDK: typeof window.sdk !== "undefined",
      hasSendMethod: typeof window.sdk?.send === "function"
    };
  }
};
var sdkUtils = new SDKUtils();
window.sendToSDK = (message) => sdkUtils.sendMessage(message);
window.sendErrorToSDK = (errorInfo) => sdkUtils.sendErrorForFix(errorInfo);
window.isSDKAvailable = () => sdkUtils.getStatus().isAvailable;
window.sdkUtils = sdkUtils;

// app/javascript/stimulus_validator.ts
var StimulusValidator = class {
  constructor() {
    this.registeredControllers = /* @__PURE__ */ new Set();
    this.missingControllers = /* @__PURE__ */ new Set();
    this.hasReported = false;
    this.elementIssues = /* @__PURE__ */ new Map();
    this.stimulus = window.Stimulus;
    this.initValidator();
  }
  initValidator() {
    if (!this.isDevelopment()) {
      console.log("StimulusValidator not enable in non-develop environment.");
      return;
    }
    if (!window.Stimulus) {
      console.log("StimulusValidator not enable while Stimulus not found");
      return;
    }
    this.setupStimulusErrorHandler();
    this.collectRegisteredControllers();
    this.validateOnDOMReady();
    this.interceptActionClicks();
  }
  isDevelopment() {
    return !!window.errorHandler;
  }
  setupStimulusErrorHandler() {
    const setupHandler = () => {
      const stimulus = window.Stimulus;
      if (stimulus && typeof stimulus.handleError === "undefined") {
        stimulus.handleError = (error3, message, detail) => {
          console.error("Stimulus Error:", { error: error3, message, detail });
          if (window.errorHandler) {
            let errorMessage = message || error3.message || "Stimulus error occurred";
            let controllerName = "";
            let action = "";
            let subType = "scope-error";
            let suggestion = "";
            let elementInfo = null;
            if (detail) {
              if (detail.identifier) {
                controllerName = detail.identifier;
              }
              if (detail.action) {
                action = detail.action;
              }
              if (detail.element) {
                elementInfo = {
                  tagName: detail.element.tagName,
                  id: detail.element.id,
                  className: detail.element.className,
                  outerHTML: `${detail.element.outerHTML?.substring(0, 200)}...`
                };
              }
            }
            if (error3.message.includes("Controller") && error3.message.includes("is not defined")) {
              subType = "missing-controller";
              const controllerMatch = error3.message.match(/(\w+)Controller is not defined/);
              if (controllerMatch) {
                controllerName = controllerMatch[1].toLowerCase();
                errorMessage = `Stimulus controller "${controllerName}" is not defined or not registered`;
                suggestion = `Make sure to import and register the "${controllerName}" controller in app/javascript/controllers/index.ts. Check if the controller file exists at app/javascript/controllers/${controllerName}_controller.ts`;
              }
            } else if (error3.message.includes("Missing target element")) {
              subType = "missing-target";
              suggestion = "Check that the target element exists in the DOM and has the correct data-[controller]-target attribute";
            } else if (error3.message.includes("Missing action")) {
              subType = "missing-action";
              suggestion = "Verify that the action method exists in the controller class and is properly defined";
            } else if (message && message.includes("click")) {
              subType = "action-click";
              suggestion = "Check if the click action handler exists and the element has the correct data-action attribute";
            }
            window.errorHandler.handleError({
              message: errorMessage,
              type: "stimulus",
              subType,
              controllerName,
              action,
              suggestion,
              elementInfo,
              details: {
                originalMessage: message,
                error: {
                  name: error3.name,
                  message: error3.message,
                  stack: error3.stack
                },
                detail
              },
              timestamp: (/* @__PURE__ */ new Date()).toISOString(),
              filename: "stimulus-application",
              error: error3
            });
          }
        };
        console.log("Stimulus error handling configured via stimulus_validator");
      }
    };
    if (window.Stimulus) {
      setupHandler();
    } else {
      const checkStimulus = () => {
        if (window.Stimulus) {
          setupHandler();
        } else {
          setTimeout(checkStimulus, 100);
        }
      };
      checkStimulus();
    }
  }
  collectRegisteredControllers() {
    try {
      const stimulus = window.Stimulus;
      if (stimulus?.router?.modulesByIdentifier) {
        const modules = stimulus.router.modulesByIdentifier;
        for (const [identifier] of modules) {
          this.registeredControllers.add(identifier);
        }
      }
    } catch (error3) {
      console.warn("Could not access Stimulus controllers:", error3);
    }
  }
  validateOnDOMReady() {
    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", () => this.validateControllers());
    } else {
      this.validateControllers();
    }
    this.observeNewContent();
  }
  validateControllers() {
    const elements = document.querySelectorAll("[data-controller]");
    elements.forEach((element) => {
      const controllers = element.getAttribute("data-controller")?.split(" ") || [];
      controllers.forEach((controller) => {
        const trimmedController = controller.trim();
        if (trimmedController && !this.registeredControllers.has(trimmedController)) {
          this.missingControllers.add(trimmedController);
        } else if (trimmedController && this.registeredControllers.has(trimmedController)) {
          this.validateRequiredTargets(element, trimmedController);
        }
      });
      this.validateElementPositioning(element);
    });
    if (this.missingControllers.size > 0) {
      this.reportMissingControllers();
    }
    if (this.elementIssues.size > 0) {
      this.reportElementIssues();
    }
  }
  observeNewContent() {
    const observer2 = new MutationObserver((mutations) => {
      let hasNewElements = false;
      mutations.forEach((mutation) => {
        if (mutation.type === "childList" && mutation.addedNodes.length > 0) {
          const hasRelevantChanges = Array.from(mutation.addedNodes).some((node) => {
            if (node.nodeType === Node.ELEMENT_NODE) {
              const element = node;
              if (element.id === "js-error-status-bar" || element.closest("#js-error-status-bar")) {
                return false;
              }
              return element.hasAttribute("data-controller") || element.querySelector("[data-controller]");
            }
            return false;
          });
          if (hasRelevantChanges) {
            hasNewElements = true;
          }
        }
      });
      if (hasNewElements) {
        setTimeout(() => this.validateControllers(), 100);
      }
    });
    observer2.observe(document.body, {
      childList: true,
      subtree: true
    });
  }
  reportMissingControllers() {
    if (this.hasReported) {
      return;
    }
    const missingList = Array.from(this.missingControllers);
    this.hasReported = true;
    if (window.errorHandler) {
      window.errorHandler.handleError({
        message: `Missing Stimulus controllers: ${missingList.join(", ")}`,
        type: "stimulus",
        subType: "missing-controller",
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        missingControllers: missingList,
        suggestion: `Run: rails generate stimulus_controller ${missingList[0]}`,
        details: {
          controllers: missingList,
          generatorCommands: missingList.map((name) => `rails generate stimulus_controller ${name}`)
        }
      });
    } else {
      console.error("\u{1F534} Missing Stimulus Controllers:", missingList);
      console.info("\u{1F4A1} Generate missing controllers:", missingList.map(
        (name) => `rails generate stimulus_controller ${name}`
      ).join("\n"));
    }
  }
  validateRequiredTargets(controllerElement, controllerName) {
    try {
      const stimulus = window.Stimulus;
      if (stimulus?.router?.modulesByIdentifier) {
        const module = stimulus.router.modulesByIdentifier.get(controllerName);
        if (module) {
          const controllerClass = module.definition.controllerConstructor;
          const definedTargets = controllerClass.targets || [];
          const missingTargets = [];
          const outOfScopeTargets = [];
          const optionalTargets = this.getOptionalTargets(controllerClass);
          definedTargets.forEach((targetName) => {
            if (optionalTargets.has(targetName)) {
              return;
            }
            const targetSelector = `[data-${controllerName}-target="${targetName}"]`;
            const targetElement = controllerElement.querySelector(targetSelector);
            if (!targetElement) {
              const globalTargetElement = document.querySelector(targetSelector);
              if (globalTargetElement) {
                outOfScopeTargets.push(targetName);
              } else {
                missingTargets.push(targetName);
              }
            }
          });
          if (missingTargets.length > 0) {
            this.reportMissingTargets(controllerName, missingTargets, controllerElement);
          }
          if (outOfScopeTargets.length > 0) {
            this.reportOutOfScopeTargets(controllerName, outOfScopeTargets, controllerElement);
          }
        }
      }
    } catch (error3) {
      console.warn(`Could not validate targets for controller ${controllerName}:`, error3);
    }
  }
  getOptionalTargets(controllerClass) {
    const optionalTargets = /* @__PURE__ */ new Set();
    try {
      const definedTargets = controllerClass.targets || [];
      definedTargets.forEach((targetName) => {
        const capitalizedTarget = targetName.charAt(0).toUpperCase() + targetName.slice(1);
        const hasTargetProperty = `has${capitalizedTarget}Target`;
        if (hasTargetProperty in controllerClass.prototype || Object.getOwnPropertyDescriptor(controllerClass.prototype, hasTargetProperty) || Object.hasOwnProperty.call(controllerClass.prototype, hasTargetProperty)) {
          optionalTargets.add(targetName);
        }
      });
    } catch (error3) {
      console.warn("Could not analyze controller for optional targets:", error3);
    }
    return optionalTargets;
  }
  validateElementPositioning(controllerElement) {
    const controllerName = controllerElement.getAttribute("data-controller")?.split(" ")[0];
    if (!controllerName) return;
    const issues = [];
    this.checkCommonSelectors(controllerElement, controllerName, issues);
    if (issues.length > 0) {
      this.elementIssues.set(controllerName, issues);
    }
  }
  checkCommonSelectors(element, controllerName, issues) {
    const relevantIds = [];
    relevantIds.push(`${controllerName}-input`, `${controllerName}-button`, `${controllerName}-form`);
    relevantIds.forEach((id2) => {
      const globalElement = document.getElementById(id2);
      if (globalElement) {
        const isInScope = globalElement === element || element.contains(globalElement);
        if (!isInScope) {
          issues.push(`Element #${id2} exists but outside controller scope`);
        }
      }
    });
  }
  interceptActionClicks() {
    document.addEventListener("click", (event2) => {
      const target = event2.target;
      if (!target) return;
      const actionElement = target.closest("[data-action]");
      if (!actionElement) return;
      const actions = actionElement.getAttribute("data-action")?.split(" ") || [];
      actions.forEach((action) => {
        const controllerMatch = action.match(/([\w-]+)#([\w-]+)/);
        if (controllerMatch) {
          const controllerName = controllerMatch[1];
          const methodName = controllerMatch[2];
          if (!this.registeredControllers.has(controllerName)) {
            this.reportMissingActionController(controllerName, action, actionElement);
            return;
          }
          const controllerElement = actionElement.closest(`[data-controller*="${controllerName}"]`);
          if (!controllerElement) {
            this.reportMissingControllerScope(controllerName, action, actionElement);
            return;
          }
          this.checkMethodExists(controllerName, methodName, action, actionElement);
        }
      });
    }, true);
  }
  reportMissingTargets(controllerName, missingTargets, controllerElement) {
    if (window.errorHandler) {
      const targetList = missingTargets.join(", ");
      const targetExamples = missingTargets.map(
        (target) => `<div data-${controllerName}-target="${target}">...</div>`
      ).join("\n");
      window.errorHandler.handleError({
        message: `Stimulus controller "${controllerName}" requires missing target elements: ${targetList}`,
        type: "stimulus",
        subType: "missing-target",
        controllerName,
        missingTargets,
        elementInfo: this.getElementInfo(controllerElement),
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        suggestion: `Add the required target elements to the DOM within the controller scope, or make them optional by adding 'declare readonly has${missingTargets.map((t) => t.charAt(0).toUpperCase() + t.slice(1)).join("Target: boolean, declare readonly has")}Target: boolean' to the controller`,
        details: {
          errorType: "Missing Required Targets",
          controllerName,
          missingTargets,
          requiredElements: targetExamples,
          elementInfo: this.getElementInfo(controllerElement),
          description: `The controller "${controllerName}" defines targets [${targetList}] but these elements are not found in the DOM within the controller scope`
        }
      });
    }
  }
  reportOutOfScopeTargets(controllerName, outOfScopeTargets, controllerElement) {
    if (window.errorHandler) {
      const targetList = outOfScopeTargets.join(", ");
      window.errorHandler.handleError({
        message: `Stimulus controller "${controllerName}" targets exist but are outside controller scope: ${targetList}`,
        type: "stimulus",
        subType: "target-scope-error",
        controllerName,
        outOfScopeTargets,
        elementInfo: this.getElementInfo(controllerElement),
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        suggestion: `Move target elements inside controller scope or expand controller scope to include targets`,
        details: {
          errorType: "Targets Outside Controller Scope",
          controllerName,
          outOfScopeTargets,
          elementInfo: this.getElementInfo(controllerElement),
          description: `The controller "${controllerName}" defines targets [${targetList}] and these elements exist in the DOM but are outside the controller scope`,
          solution: `Either move the target elements inside the controller scope, or expand the controller scope to include the targets by moving the data-controller attribute to a parent element that contains both the controller logic and the target elements.`
        }
      });
    }
  }
  reportMissingActionController(controllerName, action, element) {
    if (window.errorHandler) {
      window.errorHandler.handleError({
        message: `User clicked action "${action}" but controller "${controllerName}" is not registered`,
        type: "stimulus",
        subType: "action-click",
        controllerName,
        action,
        elementInfo: this.getElementInfo(element),
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        suggestion: `Run: rails generate stimulus_controller ${controllerName}`,
        details: {
          errorType: "Missing Controller on Action Click",
          controllerName,
          action,
          elementInfo: this.getElementInfo(element),
          description: "User attempted to trigger an action but the required controller is not registered"
        }
      });
    }
  }
  reportMissingControllerScope(controllerName, action, element) {
    if (window.errorHandler) {
      window.errorHandler.handleError({
        message: `User clicked action "${action}" but no "${controllerName}" controller found in parent scope`,
        type: "stimulus",
        subType: "scope-error",
        controllerName,
        action,
        elementInfo: this.getElementInfo(element),
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        suggestion: `Add data-controller="${controllerName}" to a parent element or move this element inside the controller scope`,
        details: {
          errorType: "Controller Scope Missing",
          controllerName,
          action,
          elementInfo: this.getElementInfo(element),
          description: "Action element is not within the scope of its target controller",
          solution: `Wrap the element with <div data-controller="${controllerName}">...</div>`
        }
      });
    }
  }
  checkMethodExists(controllerName, methodName, action, element) {
    try {
      const stimulus = window.Stimulus;
      if (stimulus?.router?.modulesByIdentifier) {
        const module = stimulus.router.modulesByIdentifier.get(controllerName);
        if (module) {
          const controllerClass = module.definition.controllerConstructor;
          const instance = new controllerClass();
          if (typeof instance[methodName] !== "function") {
            this.reportMissingMethod(controllerName, methodName, action, element);
          }
        }
      }
    } catch (_error) {
      this.checkMethodExistsAlternative(controllerName, methodName, action, element);
    }
  }
  checkMethodExistsAlternative(controllerName, methodName, action, element) {
    try {
      const stimulus = window.Stimulus;
      if (stimulus?.router?.modulesByIdentifier) {
        const module = stimulus.router.modulesByIdentifier.get(controllerName);
        if (module) {
          const controllerClass = module.definition.controllerConstructor;
          if (!controllerClass.prototype[methodName] || typeof controllerClass.prototype[methodName] !== "function") {
            this.reportMissingMethod(controllerName, methodName, action, element);
          }
        }
      }
    } catch (error3) {
      console.warn(`Could not validate method existence for ${controllerName}#${methodName}:`, error3);
    }
  }
  reportMissingMethod(controllerName, methodName, action, element) {
    if (window.errorHandler) {
      window.errorHandler.handleError({
        message: `User clicked action "${action}" but method "${methodName}" does not exist in controller "${controllerName}"`,
        type: "stimulus",
        subType: "method-not-found",
        controllerName,
        methodName,
        action,
        elementInfo: this.getElementInfo(element),
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        suggestion: `Add method "${methodName}" to the ${controllerName} controller or fix the action name`,
        details: {
          errorType: "Method Not Found",
          controllerName,
          methodName,
          action,
          elementInfo: this.getElementInfo(element),
          description: `The method "${methodName}" was called but does not exist in the controller`,
          solution: `Add the method to your controller:

${methodName}(): void {
  // Your implementation here
}`
        }
      });
    }
  }
  reportElementIssues() {
    const allIssues = [];
    const detailedIssues = {};
    this.elementIssues.forEach((issues, controllerName) => {
      allIssues.push(`${controllerName}: ${issues.join(", ")}`);
      detailedIssues[controllerName] = issues;
    });
    if (window.errorHandler) {
      window.errorHandler.handleError({
        message: `Stimulus element positioning issues detected`,
        type: "stimulus",
        subType: "positioning-issues",
        positioningIssues: allIssues,
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        suggestion: "Consider using data-targets or moving elements inside controller scope",
        details: {
          errorType: "Element Positioning Issues",
          controllers: Object.keys(detailedIssues),
          issuesByController: detailedIssues,
          totalIssues: allIssues.length,
          description: "Some elements are referenced by controllers but exist outside their scope",
          possibleSolutions: [
            "Move elements inside controller scope",
            "Use data-targets for external elements",
            "Check controller data-controller attribute placement"
          ]
        }
      });
    }
    this.elementIssues.clear();
  }
  getElementInfo(element) {
    return {
      tagName: element.tagName.toLowerCase(),
      id: element.id || "no-id",
      className: element.className || "no-class",
      textContent: (element.textContent || "").substring(0, 50)
    };
  }
  // Public API
  getRegisteredControllers() {
    return Array.from(this.registeredControllers);
  }
  getMissingControllers() {
    return Array.from(this.missingControllers);
  }
  forceValidation() {
    this.missingControllers.clear();
    this.elementIssues.clear();
    this.hasReported = false;
    this.validateControllers();
  }
};
if (typeof window !== "undefined") {
  window.stimulusValidator = new StimulusValidator();
}

// app/javascript/channels/consumer.ts
var consumer_default = createConsumer();

// app/javascript/base.ts
start();
window.ActionCable = actioncable_esm_exports;
module_default.start();
window.Alpine = module_default;
window.Turbo = turbo_es2017_esm_exports;
window.restoreButtonStates = function() {
  const disabledButtons = document.querySelectorAll(
    'input[type="submit"][disabled], button[type="submit"][disabled], button:not([type])[disabled]'
  );
  disabledButtons.forEach((button) => {
    button.disabled = false;
    const originalText = button.dataset.originalText;
    if (originalText) {
      button.textContent = originalText;
      delete button.dataset.originalText;
    }
    button.classList.remove("loading");
  });
};
function convertLegacyAttributes() {
  document.querySelectorAll("[data-method]:not([data-turbo-method])").forEach((el) => {
    const method = el.getAttribute("data-method");
    if (method && method !== "get") {
      el.setAttribute("data-turbo-method", method);
      el.removeAttribute("data-method");
    }
  });
  document.querySelectorAll("[data-confirm]:not([data-turbo-confirm])").forEach((el) => {
    const confirm2 = el.getAttribute("data-confirm");
    if (confirm2) {
      el.setAttribute("data-turbo-confirm", confirm2);
      el.removeAttribute("data-confirm");
    }
  });
  document.querySelectorAll('[data-remote="true"]').forEach((el) => {
    el.removeAttribute("data-remote");
  });
  document.querySelectorAll("[data-disable-with]:not([data-turbo-submits-with])").forEach((el) => {
    if (el.dataset.turbo === "false") return;
    const parentForm = el.closest("form");
    if (parentForm?.dataset.turbo === "false") return;
    const text = el.getAttribute("data-disable-with");
    if (text) {
      el.setAttribute("data-turbo-submits-with", text);
      el.removeAttribute("data-disable-with");
    }
  });
}
document.addEventListener("DOMContentLoaded", convertLegacyAttributes);
document.addEventListener("turbo:load", convertLegacyAttributes);
document.addEventListener("turbo:frame-load", convertLegacyAttributes);
function handleNonTurboFormSubmit(event2) {
  const form = event2.target;
  const submit = form.querySelector(
    'button[type="submit"], button:not([type]), input[type="submit"]'
  );
  const isTurboDisabled = form.dataset.turbo === "false" || submit?.dataset.turbo === "false";
  if (isTurboDisabled && submit?.dataset.disableWith) {
    const isButton = submit instanceof HTMLButtonElement;
    const key = isButton ? "textContent" : "value";
    submit.dataset.originalText = submit[key] || "";
    submit[key] = submit.dataset.disableWith;
    submit.disabled = true;
  }
}
function handleVisibilityChange() {
  if (document.visibilityState === "visible") {
    const selector = 'form[data-turbo="false"] [disabled][data-original-text], [data-turbo="false"][disabled][data-original-text]';
    document.querySelectorAll(selector).forEach((submit) => {
      submit.disabled = false;
      const originalText = submit.dataset.originalText;
      if (originalText) {
        const key = submit instanceof HTMLButtonElement ? "textContent" : "value";
        submit[key] = originalText;
        delete submit.dataset.originalText;
      }
    });
  }
}
document.addEventListener("submit", handleNonTurboFormSubmit);
document.addEventListener("visibilitychange", handleVisibilityChange);
StreamActions.report_async_error = function() {
  const errorData = JSON.parse(this.getAttribute("data-error") || "{}");
  if (window.errorHandler) {
    window.errorHandler.handleError({
      type: "asyncjob",
      message: errorData.message || "Async job error occurred",
      timestamp: (/* @__PURE__ */ new Date()).toISOString(),
      job_class: errorData.job_class,
      job_id: errorData.job_id,
      queue: errorData.queue,
      exception_class: errorData.exception_class,
      backtrace: errorData.backtrace,
      details: errorData
    });
  }
};
StreamActions.redirect = function() {
  const url = this.getAttribute("url");
  const turbo = this.getAttribute("data-turbo");
  if (url) {
    if (turbo === "false") {
      if (window.self !== window.parent) {
        window.open(url, "_blank");
      } else {
        window.location.href = url;
      }
    } else {
      turbo_es2017_esm_exports.visit(url);
    }
  }
};
/*! Bundled license information:

@hotwired/turbo/dist/turbo.es2017-esm.js:
  (*!
  Turbo 8.0.17
  Copyright  2025 37signals LLC
   *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0ByYWlscy9hY3Rpb25jYWJsZS9zcmMvYWRhcHRlcnMuanMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0ByYWlscy9hY3Rpb25jYWJsZS9zcmMvbG9nZ2VyLmpzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AcmFpbHMvYWN0aW9uY2FibGUvc3JjL2Nvbm5lY3Rpb25fbW9uaXRvci5qcyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHJhaWxzL2FjdGlvbmNhYmxlL3NyYy9pbnRlcm5hbC5qcyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHJhaWxzL2FjdGlvbmNhYmxlL3NyYy9jb25uZWN0aW9uLmpzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AcmFpbHMvYWN0aW9uY2FibGUvc3JjL3N1YnNjcmlwdGlvbi5qcyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHJhaWxzL2FjdGlvbmNhYmxlL3NyYy9zdWJzY3JpcHRpb25fZ3VhcmFudG9yLmpzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AcmFpbHMvYWN0aW9uY2FibGUvc3JjL3N1YnNjcmlwdGlvbnMuanMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0ByYWlscy9hY3Rpb25jYWJsZS9zcmMvY29uc3VtZXIuanMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0ByYWlscy9hY3Rpb25jYWJsZS9zcmMvaW5kZXguanMiLCAiLi4vLi4vamF2YXNjcmlwdC9mb3JtX2RhdGFfcGF0Y2gudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0ByYWlscy9hY3RpdmVzdG9yYWdlL2FwcC9hc3NldHMvamF2YXNjcmlwdHMvYWN0aXZlc3RvcmFnZS5lc20uanMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2FscGluZWpzL2Rpc3QvbW9kdWxlLmVzbS5qcyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHJhaWxzL2FjdGlvbmNhYmxlL2FwcC9hc3NldHMvamF2YXNjcmlwdHMvYWN0aW9uY2FibGUuZXNtLmpzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AaG90d2lyZWQvdHVyYm8vZGlzdC90dXJiby5lczIwMTctZXNtLmpzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AaG90d2lyZWQvdHVyYm8tcmFpbHMvYXBwL2phdmFzY3JpcHQvdHVyYm8vY2FibGUuanMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0Bob3R3aXJlZC90dXJiby1yYWlscy9hcHAvamF2YXNjcmlwdC90dXJiby9zbmFrZWl6ZS5qcyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGhvdHdpcmVkL3R1cmJvLXJhaWxzL2FwcC9qYXZhc2NyaXB0L3R1cmJvL2NhYmxlX3N0cmVhbV9zb3VyY2VfZWxlbWVudC5qcyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGhvdHdpcmVkL3R1cmJvLXJhaWxzL2FwcC9qYXZhc2NyaXB0L3R1cmJvL2ZldGNoX3JlcXVlc3RzLmpzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AaG90d2lyZWQvdHVyYm8tcmFpbHMvYXBwL2phdmFzY3JpcHQvdHVyYm8vaW5kZXguanMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0Bob3R3aXJlZC9zdGltdWx1cy9kaXN0L3N0aW11bHVzLmpzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvdGhlbWVfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2Ryb3Bkb3duX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9zZGtfaW50ZWdyYXRpb25fY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2NsaXBib2FyZF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvY2l0eV9zZWxlY3Rvcl9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvZmxpZ2h0X3NlYXJjaF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvZmxpZ2h0X2hpc3RvcnlfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2RhdGVfcGlja2VyX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9ib29raW5nX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9jb3Vwb25fY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2Rlc3RpbmF0aW9uX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9yZWdpb25fc2VsZWN0b3JfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2hvdGVsX3NlYXJjaF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvaG90ZWxfZGV0YWlsX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9zZXJ2aWNlX2dyaWRfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3Bhc3Nlbmdlcl9zZWxlY3Rvcl9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvY2FiaW5fc2VsZWN0b3JfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3RyaXBfdHlwZV9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvcmV0dXJuX2RhdGVfcGlja2VyX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9yb3VuZF90cmlwX3NlbGVjdG9yX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy90cmFpbl9zZWFyY2hfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3RyYWluX2xpc3RfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3RyYWluX2NpdHlfc2VsZWN0b3JfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2luZmluaXRlX3Njcm9sbF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvZGVlcF90cmF2ZWxfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL211bHRpX2NpdHlfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2ZsaWdodF9maWx0ZXJfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2ZsaWdodF9zb3J0X2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9mbGlnaHRfaW5mb19kaXNwbGF5X2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9kYXRlX2xpbmtfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2hvdGVsX2d1ZXN0X3NlbGVjdG9yX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9ob3RlbF9kYXRlX3BpY2tlcl9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvcGF5bWVudF9tb2RhbF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvcGF5bWVudF9jb25maXJtYXRpb25fY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2hvdGVsX3RhYnNfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2hvdGVsX3RyYXZlbGVyX3NlbGVjdG9yX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy90b2FzdF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvdG9hc3RfdHJpZ2dlcl9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvaG90ZWxfYm9va2luZ19jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvdG91cl9kZXRhaWxfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2Nhcm91c2VsX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9zY3JvbGxfc3B5X2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9wYWNrYWdlX3N3aXRjaGVyX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9ib29raW5nX21vZGFsX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9ib3R0b21fYmFyX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9pbnN1cmFuY2Vfc2VsZWN0b3JfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3RvdXJfdHJhdmVsZXJfc2VsZWN0b3JfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3NwZWNpYWxfZmxpZ2h0c19mb3JtX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy90cmFpbl9ib29raW5nX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy90cmFpbl9ib29raW5nX2xvY2tfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3RyYWluX3NlYXRfc2VsZWN0b3JfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3RvdXJfZ3JvdXBfZmlsdGVyX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9jYXJfcmVudGFsX3RhYnNfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2hvdGVsX3BhY2thZ2Vfc2VhcmNoX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9ob3RlbF9wYWNrYWdlX29yZGVyX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9wd2FfaW5zdGFsbF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvYnVzX2RhdGVfcGlja2VyX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9idXNfdGlja2V0X3NlYXJjaF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvYnVzX3RpY2tldF9vcmRlcl9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvZGVlcF9ib29raW5nX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy92aXNhX29yZGVyX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9hYnJvYWRfcmVnaW9uX3NlbGVjdG9yX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9hYnJvYWRfZGF0ZV9waWNrZXJfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2Ficm9hZF9wYXNzZW5nZXJfc2VsZWN0b3JfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2Ficm9hZF9vcmRlcl9mb3JtX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9hYnJvYWRfdGlja2V0X3NlYXJjaF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvaG9tZXN0YXlfc2VhcmNoX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9pbnRlcm5ldF9zZXJ2aWNlc19jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvc2ltX2NhcmRfZmlsdGVyX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9kYXRhX3BsYW5fY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3dpZmlfYm9va2luZ19jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvaW50ZXJuZXRfb3JkZXJfZm9ybV9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvcHJvZHVjdF9jYXJkX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9zaW1fY2FyZF9ib29raW5nX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9xcmNvZGVfbW9kYWxfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2xvY2F0aW9uX3NlbGVjdG9yX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy90cmFuc2Zlcl9zZWFyY2hfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2FkZHJlc3Nfc2VsZWN0b3JfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3NlYXJjaF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvaG90ZWxfZmlsdGVyX3BlcnNpc3RlbmNlX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9ob3RlbF9zZXJ2aWNlc19zZWFyY2hfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2xpdmVfcm9vbV9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvc3BlY2lhbF9ob3RlbF9zZWFyY2hfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3NwZWNpYWxfaG90ZWxfZmlsdGVyX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9ob3RlbF9zZWFyY2hfZmlsdGVyX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9ibGluZF9ib3hfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2hvdGVsX21hcF90b2dnbGVfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2hvdGVsX21hcF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvc21hcnRfYmFja19jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvdG91cl9ncm91cF90YWJzX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9ob3RlbF9wcmljZV9maWx0ZXJfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2hvdGVsX2d1YXJhbnRlZV9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvZmlsdGVyX2Ryb3Bkb3duX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9jdXN0b21fdHJhdmVsX21vZGFsX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9jb21tdW5pY2F0aW9uX3RpbWVsaW5lX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9hYnJvYWRfdGlja2V0X3R5cGVfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2xhbmRtYXJrX2ZpbHRlcl9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvY2FyX2RhdGV0aW1lX3BpY2tlcl9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvY2FyX29yZGVyX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9pbmRleC50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NsaXBib2FyZF91dGlscy50cyIsICIuLi8uLi9qYXZhc2NyaXB0L3Nka191dGlscy50cyIsICIuLi8uLi9qYXZhc2NyaXB0L3N0aW11bHVzX3ZhbGlkYXRvci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NoYW5uZWxzL2NvbnN1bWVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvYmFzZS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiZXhwb3J0IGRlZmF1bHQge1xuICBsb2dnZXI6IHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiID8gY29uc29sZSA6IHVuZGVmaW5lZCxcbiAgV2ViU29ja2V0OiB0eXBlb2YgV2ViU29ja2V0ICE9PSBcInVuZGVmaW5lZFwiID8gV2ViU29ja2V0IDogdW5kZWZpbmVkLFxufVxuIiwgImltcG9ydCBhZGFwdGVycyBmcm9tIFwiLi9hZGFwdGVyc1wiXG5cbi8vIFRoZSBsb2dnZXIgaXMgZGlzYWJsZWQgYnkgZGVmYXVsdC4gWW91IGNhbiBlbmFibGUgaXQgd2l0aDpcbi8vXG4vLyAgIEFjdGlvbkNhYmxlLmxvZ2dlci5lbmFibGVkID0gdHJ1ZVxuLy9cbi8vICAgRXhhbXBsZTpcbi8vXG4vLyAgIGltcG9ydCAqIGFzIEFjdGlvbkNhYmxlIGZyb20gJ0ByYWlscy9hY3Rpb25jYWJsZSdcbi8vXG4vLyAgIEFjdGlvbkNhYmxlLmxvZ2dlci5lbmFibGVkID0gdHJ1ZVxuLy8gICBBY3Rpb25DYWJsZS5sb2dnZXIubG9nKCdDb25uZWN0aW9uIEVzdGFibGlzaGVkLicpXG4vL1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGxvZyguLi5tZXNzYWdlcykge1xuICAgIGlmICh0aGlzLmVuYWJsZWQpIHtcbiAgICAgIG1lc3NhZ2VzLnB1c2goRGF0ZS5ub3coKSlcbiAgICAgIGFkYXB0ZXJzLmxvZ2dlci5sb2coXCJbQWN0aW9uQ2FibGVdXCIsIC4uLm1lc3NhZ2VzKVxuICAgIH1cbiAgfSxcbn1cbiIsICJpbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlclwiXG5cbi8vIFJlc3BvbnNpYmxlIGZvciBlbnN1cmluZyB0aGUgY2FibGUgY29ubmVjdGlvbiBpcyBpbiBnb29kIGhlYWx0aCBieSB2YWxpZGF0aW5nIHRoZSBoZWFydGJlYXQgcGluZ3Mgc2VudCBmcm9tIHRoZSBzZXJ2ZXIsIGFuZCBhdHRlbXB0aW5nXG4vLyByZXZpdmFsIHJlY29ubmVjdGlvbnMgaWYgdGhpbmdzIGdvIGFzdHJheS4gSW50ZXJuYWwgY2xhc3MsIG5vdCBpbnRlbmRlZCBmb3IgZGlyZWN0IHVzZXIgbWFuaXB1bGF0aW9uLlxuXG5jb25zdCBub3cgPSAoKSA9PiBuZXcgRGF0ZSgpLmdldFRpbWUoKVxuXG5jb25zdCBzZWNvbmRzU2luY2UgPSB0aW1lID0+IChub3coKSAtIHRpbWUpIC8gMTAwMFxuXG5jbGFzcyBDb25uZWN0aW9uTW9uaXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbm5lY3Rpb24pIHtcbiAgICB0aGlzLnZpc2liaWxpdHlEaWRDaGFuZ2UgPSB0aGlzLnZpc2liaWxpdHlEaWRDaGFuZ2UuYmluZCh0aGlzKVxuICAgIHRoaXMuY29ubmVjdGlvbiA9IGNvbm5lY3Rpb25cbiAgICB0aGlzLnJlY29ubmVjdEF0dGVtcHRzID0gMFxuICB9XG5cbiAgc3RhcnQoKSB7XG4gICAgaWYgKCF0aGlzLmlzUnVubmluZygpKSB7XG4gICAgICB0aGlzLnN0YXJ0ZWRBdCA9IG5vdygpXG4gICAgICBkZWxldGUgdGhpcy5zdG9wcGVkQXRcbiAgICAgIHRoaXMuc3RhcnRQb2xsaW5nKClcbiAgICAgIGFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMudmlzaWJpbGl0eURpZENoYW5nZSlcbiAgICAgIGxvZ2dlci5sb2coYENvbm5lY3Rpb25Nb25pdG9yIHN0YXJ0ZWQuIHN0YWxlIHRocmVzaG9sZCA9ICR7dGhpcy5jb25zdHJ1Y3Rvci5zdGFsZVRocmVzaG9sZH0gc2ApXG4gICAgfVxuICB9XG5cbiAgc3RvcCgpIHtcbiAgICBpZiAodGhpcy5pc1J1bm5pbmcoKSkge1xuICAgICAgdGhpcy5zdG9wcGVkQXQgPSBub3coKVxuICAgICAgdGhpcy5zdG9wUG9sbGluZygpXG4gICAgICByZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLnZpc2liaWxpdHlEaWRDaGFuZ2UpXG4gICAgICBsb2dnZXIubG9nKFwiQ29ubmVjdGlvbk1vbml0b3Igc3RvcHBlZFwiKVxuICAgIH1cbiAgfVxuXG4gIGlzUnVubmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5zdGFydGVkQXQgJiYgIXRoaXMuc3RvcHBlZEF0XG4gIH1cblxuICByZWNvcmRNZXNzYWdlKCkge1xuICAgIHRoaXMucGluZ2VkQXQgPSBub3coKVxuICB9XG5cbiAgcmVjb3JkQ29ubmVjdCgpIHtcbiAgICB0aGlzLnJlY29ubmVjdEF0dGVtcHRzID0gMFxuICAgIGRlbGV0ZSB0aGlzLmRpc2Nvbm5lY3RlZEF0XG4gICAgbG9nZ2VyLmxvZyhcIkNvbm5lY3Rpb25Nb25pdG9yIHJlY29yZGVkIGNvbm5lY3RcIilcbiAgfVxuXG4gIHJlY29yZERpc2Nvbm5lY3QoKSB7XG4gICAgdGhpcy5kaXNjb25uZWN0ZWRBdCA9IG5vdygpXG4gICAgbG9nZ2VyLmxvZyhcIkNvbm5lY3Rpb25Nb25pdG9yIHJlY29yZGVkIGRpc2Nvbm5lY3RcIilcbiAgfVxuXG4gIC8vIFByaXZhdGVcblxuICBzdGFydFBvbGxpbmcoKSB7XG4gICAgdGhpcy5zdG9wUG9sbGluZygpXG4gICAgdGhpcy5wb2xsKClcbiAgfVxuXG4gIHN0b3BQb2xsaW5nKCkge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLnBvbGxUaW1lb3V0KVxuICB9XG5cbiAgcG9sbCgpIHtcbiAgICB0aGlzLnBvbGxUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnJlY29ubmVjdElmU3RhbGUoKVxuICAgICAgdGhpcy5wb2xsKClcbiAgICB9XG4gICAgLCB0aGlzLmdldFBvbGxJbnRlcnZhbCgpKVxuICB9XG5cbiAgZ2V0UG9sbEludGVydmFsKCkge1xuICAgIGNvbnN0IHsgc3RhbGVUaHJlc2hvbGQsIHJlY29ubmVjdGlvbkJhY2tvZmZSYXRlIH0gPSB0aGlzLmNvbnN0cnVjdG9yXG4gICAgY29uc3QgYmFja29mZiA9IE1hdGgucG93KDEgKyByZWNvbm5lY3Rpb25CYWNrb2ZmUmF0ZSwgTWF0aC5taW4odGhpcy5yZWNvbm5lY3RBdHRlbXB0cywgMTApKVxuICAgIGNvbnN0IGppdHRlck1heCA9IHRoaXMucmVjb25uZWN0QXR0ZW1wdHMgPT09IDAgPyAxLjAgOiByZWNvbm5lY3Rpb25CYWNrb2ZmUmF0ZVxuICAgIGNvbnN0IGppdHRlciA9IGppdHRlck1heCAqIE1hdGgucmFuZG9tKClcbiAgICByZXR1cm4gc3RhbGVUaHJlc2hvbGQgKiAxMDAwICogYmFja29mZiAqICgxICsgaml0dGVyKVxuICB9XG5cbiAgcmVjb25uZWN0SWZTdGFsZSgpIHtcbiAgICBpZiAodGhpcy5jb25uZWN0aW9uSXNTdGFsZSgpKSB7XG4gICAgICBsb2dnZXIubG9nKGBDb25uZWN0aW9uTW9uaXRvciBkZXRlY3RlZCBzdGFsZSBjb25uZWN0aW9uLiByZWNvbm5lY3RBdHRlbXB0cyA9ICR7dGhpcy5yZWNvbm5lY3RBdHRlbXB0c30sIHRpbWUgc3RhbGUgPSAke3NlY29uZHNTaW5jZSh0aGlzLnJlZnJlc2hlZEF0KX0gcywgc3RhbGUgdGhyZXNob2xkID0gJHt0aGlzLmNvbnN0cnVjdG9yLnN0YWxlVGhyZXNob2xkfSBzYClcbiAgICAgIHRoaXMucmVjb25uZWN0QXR0ZW1wdHMrK1xuICAgICAgaWYgKHRoaXMuZGlzY29ubmVjdGVkUmVjZW50bHkoKSkge1xuICAgICAgICBsb2dnZXIubG9nKGBDb25uZWN0aW9uTW9uaXRvciBza2lwcGluZyByZW9wZW5pbmcgcmVjZW50IGRpc2Nvbm5lY3QuIHRpbWUgZGlzY29ubmVjdGVkID0gJHtzZWNvbmRzU2luY2UodGhpcy5kaXNjb25uZWN0ZWRBdCl9IHNgKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhcIkNvbm5lY3Rpb25Nb25pdG9yIHJlb3BlbmluZ1wiKVxuICAgICAgICB0aGlzLmNvbm5lY3Rpb24ucmVvcGVuKClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXQgcmVmcmVzaGVkQXQoKSB7XG4gICAgcmV0dXJuIHRoaXMucGluZ2VkQXQgPyB0aGlzLnBpbmdlZEF0IDogdGhpcy5zdGFydGVkQXRcbiAgfVxuXG4gIGNvbm5lY3Rpb25Jc1N0YWxlKCkge1xuICAgIHJldHVybiBzZWNvbmRzU2luY2UodGhpcy5yZWZyZXNoZWRBdCkgPiB0aGlzLmNvbnN0cnVjdG9yLnN0YWxlVGhyZXNob2xkXG4gIH1cblxuICBkaXNjb25uZWN0ZWRSZWNlbnRseSgpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNjb25uZWN0ZWRBdCAmJiAoc2Vjb25kc1NpbmNlKHRoaXMuZGlzY29ubmVjdGVkQXQpIDwgdGhpcy5jb25zdHJ1Y3Rvci5zdGFsZVRocmVzaG9sZClcbiAgfVxuXG4gIHZpc2liaWxpdHlEaWRDaGFuZ2UoKSB7XG4gICAgaWYgKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gXCJ2aXNpYmxlXCIpIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5jb25uZWN0aW9uSXNTdGFsZSgpIHx8ICF0aGlzLmNvbm5lY3Rpb24uaXNPcGVuKCkpIHtcbiAgICAgICAgICBsb2dnZXIubG9nKGBDb25uZWN0aW9uTW9uaXRvciByZW9wZW5pbmcgc3RhbGUgY29ubmVjdGlvbiBvbiB2aXNpYmlsaXR5Y2hhbmdlLiB2aXNpYmlsaXR5U3RhdGUgPSAke2RvY3VtZW50LnZpc2liaWxpdHlTdGF0ZX1gKVxuICAgICAgICAgIHRoaXMuY29ubmVjdGlvbi5yZW9wZW4oKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAsIDIwMClcbiAgICB9XG4gIH1cblxufVxuXG5Db25uZWN0aW9uTW9uaXRvci5zdGFsZVRocmVzaG9sZCA9IDYgLy8gU2VydmVyOjpDb25uZWN0aW9uczo6QkVBVF9JTlRFUlZBTCAqIDIgKG1pc3NlZCB0d28gcGluZ3MpXG5Db25uZWN0aW9uTW9uaXRvci5yZWNvbm5lY3Rpb25CYWNrb2ZmUmF0ZSA9IDAuMTVcblxuZXhwb3J0IGRlZmF1bHQgQ29ubmVjdGlvbk1vbml0b3JcbiIsICJleHBvcnQgZGVmYXVsdCB7XG4gIFwibWVzc2FnZV90eXBlc1wiOiB7XG4gICAgXCJ3ZWxjb21lXCI6IFwid2VsY29tZVwiLFxuICAgIFwiZGlzY29ubmVjdFwiOiBcImRpc2Nvbm5lY3RcIixcbiAgICBcInBpbmdcIjogXCJwaW5nXCIsXG4gICAgXCJjb25maXJtYXRpb25cIjogXCJjb25maXJtX3N1YnNjcmlwdGlvblwiLFxuICAgIFwicmVqZWN0aW9uXCI6IFwicmVqZWN0X3N1YnNjcmlwdGlvblwiXG4gIH0sXG4gIFwiZGlzY29ubmVjdF9yZWFzb25zXCI6IHtcbiAgICBcInVuYXV0aG9yaXplZFwiOiBcInVuYXV0aG9yaXplZFwiLFxuICAgIFwiaW52YWxpZF9yZXF1ZXN0XCI6IFwiaW52YWxpZF9yZXF1ZXN0XCIsXG4gICAgXCJzZXJ2ZXJfcmVzdGFydFwiOiBcInNlcnZlcl9yZXN0YXJ0XCIsXG4gICAgXCJyZW1vdGVcIjogXCJyZW1vdGVcIlxuICB9LFxuICBcImRlZmF1bHRfbW91bnRfcGF0aFwiOiBcIi9jYWJsZVwiLFxuICBcInByb3RvY29sc1wiOiBbXG4gICAgXCJhY3Rpb25jYWJsZS12MS1qc29uXCIsXG4gICAgXCJhY3Rpb25jYWJsZS11bnN1cHBvcnRlZFwiXG4gIF1cbn1cbiIsICJpbXBvcnQgYWRhcHRlcnMgZnJvbSBcIi4vYWRhcHRlcnNcIlxuaW1wb3J0IENvbm5lY3Rpb25Nb25pdG9yIGZyb20gXCIuL2Nvbm5lY3Rpb25fbW9uaXRvclwiXG5pbXBvcnQgSU5URVJOQUwgZnJvbSBcIi4vaW50ZXJuYWxcIlxuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXJcIlxuXG4vLyBFbmNhcHN1bGF0ZSB0aGUgY2FibGUgY29ubmVjdGlvbiBoZWxkIGJ5IHRoZSBjb25zdW1lci4gVGhpcyBpcyBhbiBpbnRlcm5hbCBjbGFzcyBub3QgaW50ZW5kZWQgZm9yIGRpcmVjdCB1c2VyIG1hbmlwdWxhdGlvbi5cblxuY29uc3Qge21lc3NhZ2VfdHlwZXMsIHByb3RvY29sc30gPSBJTlRFUk5BTFxuY29uc3Qgc3VwcG9ydGVkUHJvdG9jb2xzID0gcHJvdG9jb2xzLnNsaWNlKDAsIHByb3RvY29scy5sZW5ndGggLSAxKVxuXG5jb25zdCBpbmRleE9mID0gW10uaW5kZXhPZlxuXG5jbGFzcyBDb25uZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoY29uc3VtZXIpIHtcbiAgICB0aGlzLm9wZW4gPSB0aGlzLm9wZW4uYmluZCh0aGlzKVxuICAgIHRoaXMuY29uc3VtZXIgPSBjb25zdW1lclxuICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IHRoaXMuY29uc3VtZXIuc3Vic2NyaXB0aW9uc1xuICAgIHRoaXMubW9uaXRvciA9IG5ldyBDb25uZWN0aW9uTW9uaXRvcih0aGlzKVxuICAgIHRoaXMuZGlzY29ubmVjdGVkID0gdHJ1ZVxuICB9XG5cbiAgc2VuZChkYXRhKSB7XG4gICAgaWYgKHRoaXMuaXNPcGVuKCkpIHtcbiAgICAgIHRoaXMud2ViU29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICBvcGVuKCkge1xuICAgIGlmICh0aGlzLmlzQWN0aXZlKCkpIHtcbiAgICAgIGxvZ2dlci5sb2coYEF0dGVtcHRlZCB0byBvcGVuIFdlYlNvY2tldCwgYnV0IGV4aXN0aW5nIHNvY2tldCBpcyAke3RoaXMuZ2V0U3RhdGUoKX1gKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNvY2tldFByb3RvY29scyA9IFsuLi5wcm90b2NvbHMsIC4uLnRoaXMuY29uc3VtZXIuc3VicHJvdG9jb2xzIHx8IFtdXVxuICAgICAgbG9nZ2VyLmxvZyhgT3BlbmluZyBXZWJTb2NrZXQsIGN1cnJlbnQgc3RhdGUgaXMgJHt0aGlzLmdldFN0YXRlKCl9LCBzdWJwcm90b2NvbHM6ICR7c29ja2V0UHJvdG9jb2xzfWApXG4gICAgICBpZiAodGhpcy53ZWJTb2NrZXQpIHsgdGhpcy51bmluc3RhbGxFdmVudEhhbmRsZXJzKCkgfVxuICAgICAgdGhpcy53ZWJTb2NrZXQgPSBuZXcgYWRhcHRlcnMuV2ViU29ja2V0KHRoaXMuY29uc3VtZXIudXJsLCBzb2NrZXRQcm90b2NvbHMpXG4gICAgICB0aGlzLmluc3RhbGxFdmVudEhhbmRsZXJzKClcbiAgICAgIHRoaXMubW9uaXRvci5zdGFydCgpXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIGNsb3NlKHthbGxvd1JlY29ubmVjdH0gPSB7YWxsb3dSZWNvbm5lY3Q6IHRydWV9KSB7XG4gICAgaWYgKCFhbGxvd1JlY29ubmVjdCkgeyB0aGlzLm1vbml0b3Iuc3RvcCgpIH1cbiAgICAvLyBBdm9pZCBjbG9zaW5nIHdlYnNvY2tldHMgaW4gYSBcImNvbm5lY3RpbmdcIiBzdGF0ZSBkdWUgdG8gU2FmYXJpIDE1LjErIGJ1Zy4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vcmFpbHMvcmFpbHMvaXNzdWVzLzQzODM1I2lzc3VlY29tbWVudC0xMDAyMjg4NDc4XG4gICAgaWYgKHRoaXMuaXNPcGVuKCkpIHtcbiAgICAgIHJldHVybiB0aGlzLndlYlNvY2tldC5jbG9zZSgpXG4gICAgfVxuICB9XG5cbiAgcmVvcGVuKCkge1xuICAgIGxvZ2dlci5sb2coYFJlb3BlbmluZyBXZWJTb2NrZXQsIGN1cnJlbnQgc3RhdGUgaXMgJHt0aGlzLmdldFN0YXRlKCl9YClcbiAgICBpZiAodGhpcy5pc0FjdGl2ZSgpKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gdGhpcy5jbG9zZSgpXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIubG9nKFwiRmFpbGVkIHRvIHJlb3BlbiBXZWJTb2NrZXRcIiwgZXJyb3IpXG4gICAgICB9XG4gICAgICBmaW5hbGx5IHtcbiAgICAgICAgbG9nZ2VyLmxvZyhgUmVvcGVuaW5nIFdlYlNvY2tldCBpbiAke3RoaXMuY29uc3RydWN0b3IucmVvcGVuRGVsYXl9bXNgKVxuICAgICAgICBzZXRUaW1lb3V0KHRoaXMub3BlbiwgdGhpcy5jb25zdHJ1Y3Rvci5yZW9wZW5EZWxheSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMub3BlbigpXG4gICAgfVxuICB9XG5cbiAgZ2V0UHJvdG9jb2woKSB7XG4gICAgaWYgKHRoaXMud2ViU29ja2V0KSB7XG4gICAgICByZXR1cm4gdGhpcy53ZWJTb2NrZXQucHJvdG9jb2xcbiAgICB9XG4gIH1cblxuICBpc09wZW4oKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNTdGF0ZShcIm9wZW5cIilcbiAgfVxuXG4gIGlzQWN0aXZlKCkge1xuICAgIHJldHVybiB0aGlzLmlzU3RhdGUoXCJvcGVuXCIsIFwiY29ubmVjdGluZ1wiKVxuICB9XG5cbiAgdHJpZWRUb1JlY29ubmVjdCgpIHtcbiAgICByZXR1cm4gdGhpcy5tb25pdG9yLnJlY29ubmVjdEF0dGVtcHRzID4gMFxuICB9XG5cbiAgLy8gUHJpdmF0ZVxuXG4gIGlzUHJvdG9jb2xTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuIGluZGV4T2YuY2FsbChzdXBwb3J0ZWRQcm90b2NvbHMsIHRoaXMuZ2V0UHJvdG9jb2woKSkgPj0gMFxuICB9XG5cbiAgaXNTdGF0ZSguLi5zdGF0ZXMpIHtcbiAgICByZXR1cm4gaW5kZXhPZi5jYWxsKHN0YXRlcywgdGhpcy5nZXRTdGF0ZSgpKSA+PSAwXG4gIH1cblxuICBnZXRTdGF0ZSgpIHtcbiAgICBpZiAodGhpcy53ZWJTb2NrZXQpIHtcbiAgICAgIGZvciAobGV0IHN0YXRlIGluIGFkYXB0ZXJzLldlYlNvY2tldCkge1xuICAgICAgICBpZiAoYWRhcHRlcnMuV2ViU29ja2V0W3N0YXRlXSA9PT0gdGhpcy53ZWJTb2NrZXQucmVhZHlTdGF0ZSkge1xuICAgICAgICAgIHJldHVybiBzdGF0ZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGluc3RhbGxFdmVudEhhbmRsZXJzKCkge1xuICAgIGZvciAobGV0IGV2ZW50TmFtZSBpbiB0aGlzLmV2ZW50cykge1xuICAgICAgY29uc3QgaGFuZGxlciA9IHRoaXMuZXZlbnRzW2V2ZW50TmFtZV0uYmluZCh0aGlzKVxuICAgICAgdGhpcy53ZWJTb2NrZXRbYG9uJHtldmVudE5hbWV9YF0gPSBoYW5kbGVyXG4gICAgfVxuICB9XG5cbiAgdW5pbnN0YWxsRXZlbnRIYW5kbGVycygpIHtcbiAgICBmb3IgKGxldCBldmVudE5hbWUgaW4gdGhpcy5ldmVudHMpIHtcbiAgICAgIHRoaXMud2ViU29ja2V0W2BvbiR7ZXZlbnROYW1lfWBdID0gZnVuY3Rpb24oKSB7fVxuICAgIH1cbiAgfVxuXG59XG5cbkNvbm5lY3Rpb24ucmVvcGVuRGVsYXkgPSA1MDBcblxuQ29ubmVjdGlvbi5wcm90b3R5cGUuZXZlbnRzID0ge1xuICBtZXNzYWdlKGV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLmlzUHJvdG9jb2xTdXBwb3J0ZWQoKSkgeyByZXR1cm4gfVxuICAgIGNvbnN0IHtpZGVudGlmaWVyLCBtZXNzYWdlLCByZWFzb24sIHJlY29ubmVjdCwgdHlwZX0gPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpXG4gICAgdGhpcy5tb25pdG9yLnJlY29yZE1lc3NhZ2UoKVxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBtZXNzYWdlX3R5cGVzLndlbGNvbWU6XG4gICAgICAgIGlmICh0aGlzLnRyaWVkVG9SZWNvbm5lY3QoKSkge1xuICAgICAgICAgIHRoaXMucmVjb25uZWN0QXR0ZW1wdGVkID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIHRoaXMubW9uaXRvci5yZWNvcmRDb25uZWN0KClcbiAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaXB0aW9ucy5yZWxvYWQoKVxuICAgICAgY2FzZSBtZXNzYWdlX3R5cGVzLmRpc2Nvbm5lY3Q6XG4gICAgICAgIGxvZ2dlci5sb2coYERpc2Nvbm5lY3RpbmcuIFJlYXNvbjogJHtyZWFzb259YClcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xvc2Uoe2FsbG93UmVjb25uZWN0OiByZWNvbm5lY3R9KVxuICAgICAgY2FzZSBtZXNzYWdlX3R5cGVzLnBpbmc6XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgICBjYXNlIG1lc3NhZ2VfdHlwZXMuY29uZmlybWF0aW9uOlxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuY29uZmlybVN1YnNjcmlwdGlvbihpZGVudGlmaWVyKVxuICAgICAgICBpZiAodGhpcy5yZWNvbm5lY3RBdHRlbXB0ZWQpIHtcbiAgICAgICAgICB0aGlzLnJlY29ubmVjdEF0dGVtcHRlZCA9IGZhbHNlXG4gICAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaXB0aW9ucy5ub3RpZnkoaWRlbnRpZmllciwgXCJjb25uZWN0ZWRcIiwge3JlY29ubmVjdGVkOiB0cnVlfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25zLm5vdGlmeShpZGVudGlmaWVyLCBcImNvbm5lY3RlZFwiLCB7cmVjb25uZWN0ZWQ6IGZhbHNlfSlcbiAgICAgICAgfVxuICAgICAgY2FzZSBtZXNzYWdlX3R5cGVzLnJlamVjdGlvbjpcbiAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaXB0aW9ucy5yZWplY3QoaWRlbnRpZmllcilcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbnMubm90aWZ5KGlkZW50aWZpZXIsIFwicmVjZWl2ZWRcIiwgbWVzc2FnZSlcbiAgICB9XG4gIH0sXG5cbiAgb3BlbigpIHtcbiAgICBsb2dnZXIubG9nKGBXZWJTb2NrZXQgb25vcGVuIGV2ZW50LCB1c2luZyAnJHt0aGlzLmdldFByb3RvY29sKCl9JyBzdWJwcm90b2NvbGApXG4gICAgdGhpcy5kaXNjb25uZWN0ZWQgPSBmYWxzZVxuICAgIGlmICghdGhpcy5pc1Byb3RvY29sU3VwcG9ydGVkKCkpIHtcbiAgICAgIGxvZ2dlci5sb2coXCJQcm90b2NvbCBpcyB1bnN1cHBvcnRlZC4gU3RvcHBpbmcgbW9uaXRvciBhbmQgZGlzY29ubmVjdGluZy5cIilcbiAgICAgIHJldHVybiB0aGlzLmNsb3NlKHthbGxvd1JlY29ubmVjdDogZmFsc2V9KVxuICAgIH1cbiAgfSxcblxuICBjbG9zZShldmVudCkge1xuICAgIGxvZ2dlci5sb2coXCJXZWJTb2NrZXQgb25jbG9zZSBldmVudFwiKVxuICAgIGlmICh0aGlzLmRpc2Nvbm5lY3RlZCkgeyByZXR1cm4gfVxuICAgIHRoaXMuZGlzY29ubmVjdGVkID0gdHJ1ZVxuICAgIHRoaXMubW9uaXRvci5yZWNvcmREaXNjb25uZWN0KClcbiAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25zLm5vdGlmeUFsbChcImRpc2Nvbm5lY3RlZFwiLCB7d2lsbEF0dGVtcHRSZWNvbm5lY3Q6IHRoaXMubW9uaXRvci5pc1J1bm5pbmcoKX0pXG4gIH0sXG5cbiAgZXJyb3IoKSB7XG4gICAgbG9nZ2VyLmxvZyhcIldlYlNvY2tldCBvbmVycm9yIGV2ZW50XCIpXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29ubmVjdGlvblxuIiwgIi8vIEEgbmV3IHN1YnNjcmlwdGlvbiBpcyBjcmVhdGVkIHRocm91Z2ggdGhlIEFjdGlvbkNhYmxlLlN1YnNjcmlwdGlvbnMgaW5zdGFuY2UgYXZhaWxhYmxlIG9uIHRoZSBjb25zdW1lci5cbi8vIEl0IHByb3ZpZGVzIGEgbnVtYmVyIG9mIGNhbGxiYWNrcyBhbmQgYSBtZXRob2QgZm9yIGNhbGxpbmcgcmVtb3RlIHByb2NlZHVyZSBjYWxscyBvbiB0aGUgY29ycmVzcG9uZGluZ1xuLy8gQ2hhbm5lbCBpbnN0YW5jZSBvbiB0aGUgc2VydmVyIHNpZGUuXG4vL1xuLy8gQW4gZXhhbXBsZSBkZW1vbnN0cmF0ZXMgdGhlIGJhc2ljIGZ1bmN0aW9uYWxpdHk6XG4vL1xuLy8gICBBcHAuYXBwZWFyYW5jZSA9IEFwcC5jYWJsZS5zdWJzY3JpcHRpb25zLmNyZWF0ZShcIkFwcGVhcmFuY2VDaGFubmVsXCIsIHtcbi8vICAgICBjb25uZWN0ZWQoKSB7XG4vLyAgICAgICAvLyBDYWxsZWQgb25jZSB0aGUgc3Vic2NyaXB0aW9uIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBjb21wbGV0ZWRcbi8vICAgICB9LFxuLy9cbi8vICAgICBkaXNjb25uZWN0ZWQoeyB3aWxsQXR0ZW1wdFJlY29ubmVjdDogYm9vbGVhbiB9KSB7XG4vLyAgICAgICAvLyBDYWxsZWQgd2hlbiB0aGUgY2xpZW50IGhhcyBkaXNjb25uZWN0ZWQgd2l0aCB0aGUgc2VydmVyLlxuLy8gICAgICAgLy8gVGhlIG9iamVjdCB3aWxsIGhhdmUgYW4gYHdpbGxBdHRlbXB0UmVjb25uZWN0YCBwcm9wZXJ0eSB3aGljaFxuLy8gICAgICAgLy8gc2F5cyB3aGV0aGVyIHRoZSBjbGllbnQgaGFzIHRoZSBpbnRlbnRpb24gb2YgYXR0ZW1wdGluZ1xuLy8gICAgICAgLy8gdG8gcmVjb25uZWN0LlxuLy8gICAgIH0sXG4vL1xuLy8gICAgIGFwcGVhcigpIHtcbi8vICAgICAgIHRoaXMucGVyZm9ybSgnYXBwZWFyJywge2FwcGVhcmluZ19vbjogdGhpcy5hcHBlYXJpbmdPbigpfSlcbi8vICAgICB9LFxuLy9cbi8vICAgICBhd2F5KCkge1xuLy8gICAgICAgdGhpcy5wZXJmb3JtKCdhd2F5Jylcbi8vICAgICB9LFxuLy9cbi8vICAgICBhcHBlYXJpbmdPbigpIHtcbi8vICAgICAgICQoJ21haW4nKS5kYXRhKCdhcHBlYXJpbmctb24nKVxuLy8gICAgIH1cbi8vICAgfSlcbi8vXG4vLyBUaGUgbWV0aG9kcyAjYXBwZWFyIGFuZCAjYXdheSBmb3J3YXJkIHRoZWlyIGludGVudCB0byB0aGUgcmVtb3RlIEFwcGVhcmFuY2VDaGFubmVsIGluc3RhbmNlIG9uIHRoZSBzZXJ2ZXJcbi8vIGJ5IGNhbGxpbmcgdGhlIGBwZXJmb3JtYCBtZXRob2Qgd2l0aCB0aGUgZmlyc3QgcGFyYW1ldGVyIGJlaW5nIHRoZSBhY3Rpb24gKHdoaWNoIG1hcHMgdG8gQXBwZWFyYW5jZUNoYW5uZWwjYXBwZWFyL2F3YXkpLlxuLy8gVGhlIHNlY29uZCBwYXJhbWV0ZXIgaXMgYSBoYXNoIHRoYXQnbGwgZ2V0IEpTT04gZW5jb2RlZCBhbmQgbWFkZSBhdmFpbGFibGUgb24gdGhlIHNlcnZlciBpbiB0aGUgZGF0YSBwYXJhbWV0ZXIuXG4vL1xuLy8gVGhpcyBpcyBob3cgdGhlIHNlcnZlciBjb21wb25lbnQgd291bGQgbG9vazpcbi8vXG4vLyAgIGNsYXNzIEFwcGVhcmFuY2VDaGFubmVsIDwgQXBwbGljYXRpb25BY3Rpb25DYWJsZTo6Q2hhbm5lbFxuLy8gICAgIGRlZiBzdWJzY3JpYmVkXG4vLyAgICAgICBjdXJyZW50X3VzZXIuYXBwZWFyXG4vLyAgICAgZW5kXG4vL1xuLy8gICAgIGRlZiB1bnN1YnNjcmliZWRcbi8vICAgICAgIGN1cnJlbnRfdXNlci5kaXNhcHBlYXJcbi8vICAgICBlbmRcbi8vXG4vLyAgICAgZGVmIGFwcGVhcihkYXRhKVxuLy8gICAgICAgY3VycmVudF91c2VyLmFwcGVhciBvbjogZGF0YVsnYXBwZWFyaW5nX29uJ11cbi8vICAgICBlbmRcbi8vXG4vLyAgICAgZGVmIGF3YXlcbi8vICAgICAgIGN1cnJlbnRfdXNlci5hd2F5XG4vLyAgICAgZW5kXG4vLyAgIGVuZFxuLy9cbi8vIFRoZSBcIkFwcGVhcmFuY2VDaGFubmVsXCIgbmFtZSBpcyBhdXRvbWF0aWNhbGx5IG1hcHBlZCBiZXR3ZWVuIHRoZSBjbGllbnQtc2lkZSBzdWJzY3JpcHRpb24gY3JlYXRpb24gYW5kIHRoZSBzZXJ2ZXItc2lkZSBSdWJ5IGNsYXNzIG5hbWUuXG4vLyBUaGUgQXBwZWFyYW5jZUNoYW5uZWwjYXBwZWFyL2F3YXkgcHVibGljIG1ldGhvZHMgYXJlIGV4cG9zZWQgYXV0b21hdGljYWxseSB0byBjbGllbnQtc2lkZSBpbnZvY2F0aW9uIHRocm91Z2ggdGhlIHBlcmZvcm0gbWV0aG9kLlxuXG5jb25zdCBleHRlbmQgPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnRpZXMpIHtcbiAgaWYgKHByb3BlcnRpZXMgIT0gbnVsbCkge1xuICAgIGZvciAobGV0IGtleSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHByb3BlcnRpZXNba2V5XVxuICAgICAgb2JqZWN0W2tleV0gPSB2YWx1ZVxuICAgIH1cbiAgfVxuICByZXR1cm4gb2JqZWN0XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN1YnNjcmlwdGlvbiB7XG4gIGNvbnN0cnVjdG9yKGNvbnN1bWVyLCBwYXJhbXMgPSB7fSwgbWl4aW4pIHtcbiAgICB0aGlzLmNvbnN1bWVyID0gY29uc3VtZXJcbiAgICB0aGlzLmlkZW50aWZpZXIgPSBKU09OLnN0cmluZ2lmeShwYXJhbXMpXG4gICAgZXh0ZW5kKHRoaXMsIG1peGluKVxuICB9XG5cbiAgLy8gUGVyZm9ybSBhIGNoYW5uZWwgYWN0aW9uIHdpdGggdGhlIG9wdGlvbmFsIGRhdGEgcGFzc2VkIGFzIGFuIGF0dHJpYnV0ZVxuICBwZXJmb3JtKGFjdGlvbiwgZGF0YSA9IHt9KSB7XG4gICAgZGF0YS5hY3Rpb24gPSBhY3Rpb25cbiAgICByZXR1cm4gdGhpcy5zZW5kKGRhdGEpXG4gIH1cblxuICBzZW5kKGRhdGEpIHtcbiAgICByZXR1cm4gdGhpcy5jb25zdW1lci5zZW5kKHtjb21tYW5kOiBcIm1lc3NhZ2VcIiwgaWRlbnRpZmllcjogdGhpcy5pZGVudGlmaWVyLCBkYXRhOiBKU09OLnN0cmluZ2lmeShkYXRhKX0pXG4gIH1cblxuICB1bnN1YnNjcmliZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb25zdW1lci5zdWJzY3JpcHRpb25zLnJlbW92ZSh0aGlzKVxuICB9XG59XG4iLCAiaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXJcIlxuXG4vLyBSZXNwb25zaWJsZSBmb3IgZW5zdXJpbmcgY2hhbm5lbCBzdWJzY3JpYmUgY29tbWFuZCBpcyBjb25maXJtZWQsIHJldHJ5aW5nIHVudGlsIGNvbmZpcm1hdGlvbiBpcyByZWNlaXZlZC5cbi8vIEludGVybmFsIGNsYXNzLCBub3QgaW50ZW5kZWQgZm9yIGRpcmVjdCB1c2VyIG1hbmlwdWxhdGlvbi5cblxuY2xhc3MgU3Vic2NyaXB0aW9uR3VhcmFudG9yIHtcbiAgY29uc3RydWN0b3Ioc3Vic2NyaXB0aW9ucykge1xuICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IHN1YnNjcmlwdGlvbnNcbiAgICB0aGlzLnBlbmRpbmdTdWJzY3JpcHRpb25zID0gW11cbiAgfVxuXG4gIGd1YXJhbnRlZShzdWJzY3JpcHRpb24pIHtcbiAgICBpZih0aGlzLnBlbmRpbmdTdWJzY3JpcHRpb25zLmluZGV4T2Yoc3Vic2NyaXB0aW9uKSA9PSAtMSl7IFxuICAgICAgbG9nZ2VyLmxvZyhgU3Vic2NyaXB0aW9uR3VhcmFudG9yIGd1YXJhbnRlZWluZyAke3N1YnNjcmlwdGlvbi5pZGVudGlmaWVyfWApXG4gICAgICB0aGlzLnBlbmRpbmdTdWJzY3JpcHRpb25zLnB1c2goc3Vic2NyaXB0aW9uKSBcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBsb2dnZXIubG9nKGBTdWJzY3JpcHRpb25HdWFyYW50b3IgYWxyZWFkeSBndWFyYW50ZWVpbmcgJHtzdWJzY3JpcHRpb24uaWRlbnRpZmllcn1gKVxuICAgIH1cbiAgICB0aGlzLnN0YXJ0R3VhcmFudGVlaW5nKClcbiAgfVxuXG4gIGZvcmdldChzdWJzY3JpcHRpb24pIHtcbiAgICBsb2dnZXIubG9nKGBTdWJzY3JpcHRpb25HdWFyYW50b3IgZm9yZ2V0dGluZyAke3N1YnNjcmlwdGlvbi5pZGVudGlmaWVyfWApXG4gICAgdGhpcy5wZW5kaW5nU3Vic2NyaXB0aW9ucyA9ICh0aGlzLnBlbmRpbmdTdWJzY3JpcHRpb25zLmZpbHRlcigocykgPT4gcyAhPT0gc3Vic2NyaXB0aW9uKSlcbiAgfVxuXG4gIHN0YXJ0R3VhcmFudGVlaW5nKCkge1xuICAgIHRoaXMuc3RvcEd1YXJhbnRlZWluZygpXG4gICAgdGhpcy5yZXRyeVN1YnNjcmliaW5nKClcbiAgfVxuICBcbiAgc3RvcEd1YXJhbnRlZWluZygpIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5yZXRyeVRpbWVvdXQpXG4gIH1cblxuICByZXRyeVN1YnNjcmliaW5nKCkge1xuICAgIHRoaXMucmV0cnlUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAodGhpcy5zdWJzY3JpcHRpb25zICYmIHR5cGVvZih0aGlzLnN1YnNjcmlwdGlvbnMuc3Vic2NyaWJlKSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRoaXMucGVuZGluZ1N1YnNjcmlwdGlvbnMubWFwKChzdWJzY3JpcHRpb24pID0+IHtcbiAgICAgICAgICBsb2dnZXIubG9nKGBTdWJzY3JpcHRpb25HdWFyYW50b3IgcmVzdWJzY3JpYmluZyAke3N1YnNjcmlwdGlvbi5pZGVudGlmaWVyfWApXG4gICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnN1YnNjcmliZShzdWJzY3JpcHRpb24pXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgICwgNTAwKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFN1YnNjcmlwdGlvbkd1YXJhbnRvciIsICJpbXBvcnQgU3Vic2NyaXB0aW9uIGZyb20gXCIuL3N1YnNjcmlwdGlvblwiXG5pbXBvcnQgU3Vic2NyaXB0aW9uR3VhcmFudG9yIGZyb20gXCIuL3N1YnNjcmlwdGlvbl9ndWFyYW50b3JcIlxuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXJcIlxuXG4vLyBDb2xsZWN0aW9uIGNsYXNzIGZvciBjcmVhdGluZyAoYW5kIGludGVybmFsbHkgbWFuYWdpbmcpIGNoYW5uZWwgc3Vic2NyaXB0aW9ucy5cbi8vIFRoZSBvbmx5IG1ldGhvZCBpbnRlbmRlZCB0byBiZSB0cmlnZ2VyZWQgYnkgdGhlIHVzZXIgaXMgQWN0aW9uQ2FibGUuU3Vic2NyaXB0aW9ucyNjcmVhdGUsXG4vLyBhbmQgaXQgc2hvdWxkIGJlIGNhbGxlZCB0aHJvdWdoIHRoZSBjb25zdW1lciBsaWtlIHNvOlxuLy9cbi8vICAgQXBwID0ge31cbi8vICAgQXBwLmNhYmxlID0gQWN0aW9uQ2FibGUuY3JlYXRlQ29uc3VtZXIoXCJ3czovL2V4YW1wbGUuY29tL2FjY291bnRzLzFcIilcbi8vICAgQXBwLmFwcGVhcmFuY2UgPSBBcHAuY2FibGUuc3Vic2NyaXB0aW9ucy5jcmVhdGUoXCJBcHBlYXJhbmNlQ2hhbm5lbFwiKVxuLy9cbi8vIEZvciBtb3JlIGRldGFpbHMgb24gaG93IHlvdSdkIGNvbmZpZ3VyZSBhbiBhY3R1YWwgY2hhbm5lbCBzdWJzY3JpcHRpb24sIHNlZSBBY3Rpb25DYWJsZS5TdWJzY3JpcHRpb24uXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN1YnNjcmlwdGlvbnMge1xuICBjb25zdHJ1Y3Rvcihjb25zdW1lcikge1xuICAgIHRoaXMuY29uc3VtZXIgPSBjb25zdW1lclxuICAgIHRoaXMuZ3VhcmFudG9yID0gbmV3IFN1YnNjcmlwdGlvbkd1YXJhbnRvcih0aGlzKVxuICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtdXG4gIH1cblxuICBjcmVhdGUoY2hhbm5lbE5hbWUsIG1peGluKSB7XG4gICAgY29uc3QgY2hhbm5lbCA9IGNoYW5uZWxOYW1lXG4gICAgY29uc3QgcGFyYW1zID0gdHlwZW9mIGNoYW5uZWwgPT09IFwib2JqZWN0XCIgPyBjaGFubmVsIDoge2NoYW5uZWx9XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbih0aGlzLmNvbnN1bWVyLCBwYXJhbXMsIG1peGluKVxuICAgIHJldHVybiB0aGlzLmFkZChzdWJzY3JpcHRpb24pXG4gIH1cblxuICAvLyBQcml2YXRlXG5cbiAgYWRkKHN1YnNjcmlwdGlvbikge1xuICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKHN1YnNjcmlwdGlvbilcbiAgICB0aGlzLmNvbnN1bWVyLmVuc3VyZUFjdGl2ZUNvbm5lY3Rpb24oKVxuICAgIHRoaXMubm90aWZ5KHN1YnNjcmlwdGlvbiwgXCJpbml0aWFsaXplZFwiKVxuICAgIHRoaXMuc3Vic2NyaWJlKHN1YnNjcmlwdGlvbilcbiAgICByZXR1cm4gc3Vic2NyaXB0aW9uXG4gIH1cblxuICByZW1vdmUoc3Vic2NyaXB0aW9uKSB7XG4gICAgdGhpcy5mb3JnZXQoc3Vic2NyaXB0aW9uKVxuICAgIGlmICghdGhpcy5maW5kQWxsKHN1YnNjcmlwdGlvbi5pZGVudGlmaWVyKS5sZW5ndGgpIHtcbiAgICAgIHRoaXMuc2VuZENvbW1hbmQoc3Vic2NyaXB0aW9uLCBcInVuc3Vic2NyaWJlXCIpXG4gICAgfVxuICAgIHJldHVybiBzdWJzY3JpcHRpb25cbiAgfVxuXG4gIHJlamVjdChpZGVudGlmaWVyKSB7XG4gICAgcmV0dXJuIHRoaXMuZmluZEFsbChpZGVudGlmaWVyKS5tYXAoKHN1YnNjcmlwdGlvbikgPT4ge1xuICAgICAgdGhpcy5mb3JnZXQoc3Vic2NyaXB0aW9uKVxuICAgICAgdGhpcy5ub3RpZnkoc3Vic2NyaXB0aW9uLCBcInJlamVjdGVkXCIpXG4gICAgICByZXR1cm4gc3Vic2NyaXB0aW9uXG4gICAgfSlcbiAgfVxuXG4gIGZvcmdldChzdWJzY3JpcHRpb24pIHtcbiAgICB0aGlzLmd1YXJhbnRvci5mb3JnZXQoc3Vic2NyaXB0aW9uKVxuICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9ICh0aGlzLnN1YnNjcmlwdGlvbnMuZmlsdGVyKChzKSA9PiBzICE9PSBzdWJzY3JpcHRpb24pKVxuICAgIHJldHVybiBzdWJzY3JpcHRpb25cbiAgfVxuXG4gIGZpbmRBbGwoaWRlbnRpZmllcikge1xuICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbnMuZmlsdGVyKChzKSA9PiBzLmlkZW50aWZpZXIgPT09IGlkZW50aWZpZXIpXG4gIH1cblxuICByZWxvYWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3Vic2NyaXB0aW9ucy5tYXAoKHN1YnNjcmlwdGlvbikgPT5cbiAgICAgIHRoaXMuc3Vic2NyaWJlKHN1YnNjcmlwdGlvbikpXG4gIH1cblxuICBub3RpZnlBbGwoY2FsbGJhY2tOYW1lLCAuLi5hcmdzKSB7XG4gICAgcmV0dXJuIHRoaXMuc3Vic2NyaXB0aW9ucy5tYXAoKHN1YnNjcmlwdGlvbikgPT5cbiAgICAgIHRoaXMubm90aWZ5KHN1YnNjcmlwdGlvbiwgY2FsbGJhY2tOYW1lLCAuLi5hcmdzKSlcbiAgfVxuXG4gIG5vdGlmeShzdWJzY3JpcHRpb24sIGNhbGxiYWNrTmFtZSwgLi4uYXJncykge1xuICAgIGxldCBzdWJzY3JpcHRpb25zXG4gICAgaWYgKHR5cGVvZiBzdWJzY3JpcHRpb24gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHN1YnNjcmlwdGlvbnMgPSB0aGlzLmZpbmRBbGwoc3Vic2NyaXB0aW9uKVxuICAgIH0gZWxzZSB7XG4gICAgICBzdWJzY3JpcHRpb25zID0gW3N1YnNjcmlwdGlvbl1cbiAgICB9XG5cbiAgICByZXR1cm4gc3Vic2NyaXB0aW9ucy5tYXAoKHN1YnNjcmlwdGlvbikgPT5cbiAgICAgICh0eXBlb2Ygc3Vic2NyaXB0aW9uW2NhbGxiYWNrTmFtZV0gPT09IFwiZnVuY3Rpb25cIiA/IHN1YnNjcmlwdGlvbltjYWxsYmFja05hbWVdKC4uLmFyZ3MpIDogdW5kZWZpbmVkKSlcbiAgfVxuXG4gIHN1YnNjcmliZShzdWJzY3JpcHRpb24pIHtcbiAgICBpZiAodGhpcy5zZW5kQ29tbWFuZChzdWJzY3JpcHRpb24sIFwic3Vic2NyaWJlXCIpKSB7XG4gICAgICB0aGlzLmd1YXJhbnRvci5ndWFyYW50ZWUoc3Vic2NyaXB0aW9uKVxuICAgIH1cbiAgfVxuXG4gIGNvbmZpcm1TdWJzY3JpcHRpb24oaWRlbnRpZmllcikge1xuICAgIGxvZ2dlci5sb2coYFN1YnNjcmlwdGlvbiBjb25maXJtZWQgJHtpZGVudGlmaWVyfWApXG4gICAgdGhpcy5maW5kQWxsKGlkZW50aWZpZXIpLm1hcCgoc3Vic2NyaXB0aW9uKSA9PlxuICAgICAgdGhpcy5ndWFyYW50b3IuZm9yZ2V0KHN1YnNjcmlwdGlvbikpXG4gIH1cblxuICBzZW5kQ29tbWFuZChzdWJzY3JpcHRpb24sIGNvbW1hbmQpIHtcbiAgICBjb25zdCB7aWRlbnRpZmllcn0gPSBzdWJzY3JpcHRpb25cbiAgICByZXR1cm4gdGhpcy5jb25zdW1lci5zZW5kKHtjb21tYW5kLCBpZGVudGlmaWVyfSlcbiAgfVxufVxuIiwgImltcG9ydCBDb25uZWN0aW9uIGZyb20gXCIuL2Nvbm5lY3Rpb25cIlxuaW1wb3J0IFN1YnNjcmlwdGlvbnMgZnJvbSBcIi4vc3Vic2NyaXB0aW9uc1wiXG5cbi8vIFRoZSBBY3Rpb25DYWJsZS5Db25zdW1lciBlc3RhYmxpc2hlcyB0aGUgY29ubmVjdGlvbiB0byBhIHNlcnZlci1zaWRlIFJ1YnkgQ29ubmVjdGlvbiBvYmplY3QuIE9uY2UgZXN0YWJsaXNoZWQsXG4vLyB0aGUgQWN0aW9uQ2FibGUuQ29ubmVjdGlvbk1vbml0b3Igd2lsbCBlbnN1cmUgdGhhdCBpdHMgcHJvcGVybHkgbWFpbnRhaW5lZCB0aHJvdWdoIGhlYXJ0YmVhdHMgYW5kIGNoZWNraW5nIGZvciBzdGFsZSB1cGRhdGVzLlxuLy8gVGhlIENvbnN1bWVyIGluc3RhbmNlIGlzIGFsc28gdGhlIGdhdGV3YXkgdG8gZXN0YWJsaXNoaW5nIHN1YnNjcmlwdGlvbnMgdG8gZGVzaXJlZCBjaGFubmVscyB0aHJvdWdoIHRoZSAjY3JlYXRlU3Vic2NyaXB0aW9uXG4vLyBtZXRob2QuXG4vL1xuLy8gVGhlIGZvbGxvd2luZyBleGFtcGxlIHNob3dzIGhvdyB0aGlzIGNhbiBiZSBzZXQgdXA6XG4vL1xuLy8gICBBcHAgPSB7fVxuLy8gICBBcHAuY2FibGUgPSBBY3Rpb25DYWJsZS5jcmVhdGVDb25zdW1lcihcIndzOi8vZXhhbXBsZS5jb20vYWNjb3VudHMvMVwiKVxuLy8gICBBcHAuYXBwZWFyYW5jZSA9IEFwcC5jYWJsZS5zdWJzY3JpcHRpb25zLmNyZWF0ZShcIkFwcGVhcmFuY2VDaGFubmVsXCIpXG4vL1xuLy8gRm9yIG1vcmUgZGV0YWlscyBvbiBob3cgeW91J2QgY29uZmlndXJlIGFuIGFjdHVhbCBjaGFubmVsIHN1YnNjcmlwdGlvbiwgc2VlIEFjdGlvbkNhYmxlLlN1YnNjcmlwdGlvbi5cbi8vXG4vLyBXaGVuIGEgY29uc3VtZXIgaXMgY3JlYXRlZCwgaXQgYXV0b21hdGljYWxseSBjb25uZWN0cyB3aXRoIHRoZSBzZXJ2ZXIuXG4vL1xuLy8gVG8gZGlzY29ubmVjdCBmcm9tIHRoZSBzZXJ2ZXIsIGNhbGxcbi8vXG4vLyAgIEFwcC5jYWJsZS5kaXNjb25uZWN0KClcbi8vXG4vLyBhbmQgdG8gcmVzdGFydCB0aGUgY29ubmVjdGlvbjpcbi8vXG4vLyAgIEFwcC5jYWJsZS5jb25uZWN0KClcbi8vXG4vLyBBbnkgY2hhbm5lbCBzdWJzY3JpcHRpb25zIHdoaWNoIGV4aXN0ZWQgcHJpb3IgdG8gZGlzY29ubmVjdGluZyB3aWxsXG4vLyBhdXRvbWF0aWNhbGx5IHJlc3Vic2NyaWJlLlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb25zdW1lciB7XG4gIGNvbnN0cnVjdG9yKHVybCkge1xuICAgIHRoaXMuX3VybCA9IHVybFxuICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IG5ldyBTdWJzY3JpcHRpb25zKHRoaXMpXG4gICAgdGhpcy5jb25uZWN0aW9uID0gbmV3IENvbm5lY3Rpb24odGhpcylcbiAgICB0aGlzLnN1YnByb3RvY29scyA9IFtdXG4gIH1cblxuICBnZXQgdXJsKCkge1xuICAgIHJldHVybiBjcmVhdGVXZWJTb2NrZXRVUkwodGhpcy5fdXJsKVxuICB9XG5cbiAgc2VuZChkYXRhKSB7XG4gICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5zZW5kKGRhdGEpXG4gIH1cblxuICBjb25uZWN0KCkge1xuICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24ub3BlbigpXG4gIH1cblxuICBkaXNjb25uZWN0KCkge1xuICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uY2xvc2Uoe2FsbG93UmVjb25uZWN0OiBmYWxzZX0pXG4gIH1cblxuICBlbnN1cmVBY3RpdmVDb25uZWN0aW9uKCkge1xuICAgIGlmICghdGhpcy5jb25uZWN0aW9uLmlzQWN0aXZlKCkpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24ub3BlbigpXG4gICAgfVxuICB9XG5cbiAgYWRkU3ViUHJvdG9jb2woc3VicHJvdG9jb2wpIHtcbiAgICB0aGlzLnN1YnByb3RvY29scyA9IFsuLi50aGlzLnN1YnByb3RvY29scywgc3VicHJvdG9jb2xdXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVdlYlNvY2tldFVSTCh1cmwpIHtcbiAgaWYgKHR5cGVvZiB1cmwgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHVybCA9IHVybCgpXG4gIH1cblxuICBpZiAodXJsICYmICEvXndzcz86L2kudGVzdCh1cmwpKSB7XG4gICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpXG4gICAgYS5ocmVmID0gdXJsXG4gICAgLy8gRml4IHBvcHVsYXRpbmcgTG9jYXRpb24gcHJvcGVydGllcyBpbiBJRS4gT3RoZXJ3aXNlLCBwcm90b2NvbCB3aWxsIGJlIGJsYW5rLlxuICAgIGEuaHJlZiA9IGEuaHJlZiAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgYS5wcm90b2NvbCA9IGEucHJvdG9jb2wucmVwbGFjZShcImh0dHBcIiwgXCJ3c1wiKVxuICAgIHJldHVybiBhLmhyZWZcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdXJsXG4gIH1cbn1cbiIsICJpbXBvcnQgQ29ubmVjdGlvbiBmcm9tIFwiLi9jb25uZWN0aW9uXCJcbmltcG9ydCBDb25uZWN0aW9uTW9uaXRvciBmcm9tIFwiLi9jb25uZWN0aW9uX21vbml0b3JcIlxuaW1wb3J0IENvbnN1bWVyLCB7IGNyZWF0ZVdlYlNvY2tldFVSTCB9IGZyb20gXCIuL2NvbnN1bWVyXCJcbmltcG9ydCBJTlRFUk5BTCBmcm9tIFwiLi9pbnRlcm5hbFwiXG5pbXBvcnQgU3Vic2NyaXB0aW9uIGZyb20gXCIuL3N1YnNjcmlwdGlvblwiXG5pbXBvcnQgU3Vic2NyaXB0aW9ucyBmcm9tIFwiLi9zdWJzY3JpcHRpb25zXCJcbmltcG9ydCBTdWJzY3JpcHRpb25HdWFyYW50b3IgZnJvbSBcIi4vc3Vic2NyaXB0aW9uX2d1YXJhbnRvclwiXG5pbXBvcnQgYWRhcHRlcnMgZnJvbSBcIi4vYWRhcHRlcnNcIlxuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXJcIlxuXG5leHBvcnQge1xuICBDb25uZWN0aW9uLFxuICBDb25uZWN0aW9uTW9uaXRvcixcbiAgQ29uc3VtZXIsXG4gIElOVEVSTkFMLFxuICBTdWJzY3JpcHRpb24sXG4gIFN1YnNjcmlwdGlvbnMsXG4gIFN1YnNjcmlwdGlvbkd1YXJhbnRvcixcbiAgYWRhcHRlcnMsXG4gIGNyZWF0ZVdlYlNvY2tldFVSTCxcbiAgbG9nZ2VyLFxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ29uc3VtZXIodXJsID0gZ2V0Q29uZmlnKFwidXJsXCIpIHx8IElOVEVSTkFMLmRlZmF1bHRfbW91bnRfcGF0aCkge1xuICByZXR1cm4gbmV3IENvbnN1bWVyKHVybClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbmZpZyhuYW1lKSB7XG4gIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5oZWFkLnF1ZXJ5U2VsZWN0b3IoYG1ldGFbbmFtZT0nYWN0aW9uLWNhYmxlLSR7bmFtZX0nXWApXG4gIGlmIChlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiY29udGVudFwiKVxuICB9XG59XG4iLCAiLyoqXG4gKiBGb3JtRGF0YSBQYXRjaCAtIEluY2x1ZGUgZGlzYWJsZWQgZmllbGRzXG4gKlxuICogQnJvd3NlciBkZWZhdWx0OiBkaXNhYmxlZCBmaWVsZHMgYXJlIE5PVCBzdWJtaXR0ZWRcbiAqIFRoaXMgcGF0Y2g6IGRpc2FibGVkIGZpZWxkcyBBUkUgc3VibWl0dGVkXG4gKlxuICogV2h5OiBBSSBtYXkgZGlzYWJsZSBpbnB1dHMgYmVmb3JlIGZvcm0gc3VibWlzc2lvbiwgYnJlYWtpbmcgZm9ybSBkYXRhIGNvbGxlY3Rpb24uXG4gKiBUaGlzIHBhdGNoIGVuc3VyZXMgZGlzYWJsZWQgZmllbGRzIGFyZSBzdGlsbCBpbmNsdWRlZCBpbiBGb3JtRGF0YS5cbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG4gIGNvbnN0IE9yaWdpbmFsRm9ybURhdGEgPSB3aW5kb3cuRm9ybURhdGE7XG5cbiAgd2luZG93LkZvcm1EYXRhID0gY2xhc3MgUGF0Y2hlZEZvcm1EYXRhIGV4dGVuZHMgT3JpZ2luYWxGb3JtRGF0YSB7XG4gICAgY29uc3RydWN0b3IoZm9ybT86IEhUTUxGb3JtRWxlbWVudCkge1xuICAgICAgc3VwZXIoZm9ybSk7XG5cbiAgICAgIGlmIChmb3JtKSB7XG4gICAgICAgIC8vIENvbGxlY3QgZGlzYWJsZWQgZmllbGRzIHRoYXQgd291bGQgbm9ybWFsbHkgYmUgZXhjbHVkZWRcbiAgICAgICAgY29uc3QgZGlzYWJsZWRGaWVsZHMgPSBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTElucHV0RWxlbWVudCB8IEhUTUxUZXh0QXJlYUVsZW1lbnQgfCBIVE1MU2VsZWN0RWxlbWVudD4oXG4gICAgICAgICAgJ2lucHV0W2Rpc2FibGVkXVtuYW1lXSwgdGV4dGFyZWFbZGlzYWJsZWRdW25hbWVdLCBzZWxlY3RbZGlzYWJsZWRdW25hbWVdJ1xuICAgICAgICApO1xuXG4gICAgICAgIGRpc2FibGVkRmllbGRzLmZvckVhY2goZmllbGQgPT4ge1xuICAgICAgICAgIC8vIE9ubHkgYWRkIGlmIGZpZWxkIGhhcyBhIG5hbWUgYW5kIHdhc24ndCBhbHJlYWR5IGFkZGVkXG4gICAgICAgICAgaWYgKGZpZWxkLm5hbWUgJiYgIXRoaXMuaGFzKGZpZWxkLm5hbWUpKSB7XG4gICAgICAgICAgICBpZiAoZmllbGQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICAgICAgICAgIC8vIEhhbmRsZSBjaGVja2JveGVzIGFuZCByYWRpb3NcbiAgICAgICAgICAgICAgaWYgKChmaWVsZC50eXBlID09PSAnY2hlY2tib3gnIHx8IGZpZWxkLnR5cGUgPT09ICdyYWRpbycpICYmICFmaWVsZC5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBTa2lwIHVuY2hlY2tlZCBjaGVja2JveGVzL3JhZGlvc1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gSGFuZGxlIGZpbGUgaW5wdXRzXG4gICAgICAgICAgICAgIGlmIChmaWVsZC50eXBlID09PSAnZmlsZScgJiYgZmllbGQuZmlsZXMpIHtcbiAgICAgICAgICAgICAgICBBcnJheS5mcm9tKGZpZWxkLmZpbGVzKS5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgICAgICAgICAgICAgdGhpcy5hcHBlbmQoZmllbGQubmFtZSwgZmlsZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFkZCByZWd1bGFyIGZpZWxkIHZhbHVlXG4gICAgICAgICAgICB0aGlzLmFwcGVuZChmaWVsZC5uYW1lLCBmaWVsZC52YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0gYXMgYW55O1xuXG4gIC8vIFByZXNlcnZlIHN0YXRpYyBtZXRob2RzXG4gIE9iamVjdC5zZXRQcm90b3R5cGVPZih3aW5kb3cuRm9ybURhdGEsIE9yaWdpbmFsRm9ybURhdGEpO1xuICBPYmplY3Quc2V0UHJvdG90eXBlT2Yod2luZG93LkZvcm1EYXRhLnByb3RvdHlwZSwgT3JpZ2luYWxGb3JtRGF0YS5wcm90b3R5cGUpO1xufSkoKTtcbiIsICJ2YXIgc3BhcmtNZDUgPSB7XG4gIGV4cG9ydHM6IHt9XG59O1xuXG4oZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG4gIChmdW5jdGlvbihmYWN0b3J5KSB7XG4gICAge1xuICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gICAgfVxuICB9KSgoZnVuY3Rpb24odW5kZWZpbmVkJDEpIHtcbiAgICB2YXIgaGV4X2NociA9IFsgXCIwXCIsIFwiMVwiLCBcIjJcIiwgXCIzXCIsIFwiNFwiLCBcIjVcIiwgXCI2XCIsIFwiN1wiLCBcIjhcIiwgXCI5XCIsIFwiYVwiLCBcImJcIiwgXCJjXCIsIFwiZFwiLCBcImVcIiwgXCJmXCIgXTtcbiAgICBmdW5jdGlvbiBtZDVjeWNsZSh4LCBrKSB7XG4gICAgICB2YXIgYSA9IHhbMF0sIGIgPSB4WzFdLCBjID0geFsyXSwgZCA9IHhbM107XG4gICAgICBhICs9IChiICYgYyB8IH5iICYgZCkgKyBrWzBdIC0gNjgwODc2OTM2IHwgMDtcbiAgICAgIGEgPSAoYSA8PCA3IHwgYSA+Pj4gMjUpICsgYiB8IDA7XG4gICAgICBkICs9IChhICYgYiB8IH5hICYgYykgKyBrWzFdIC0gMzg5NTY0NTg2IHwgMDtcbiAgICAgIGQgPSAoZCA8PCAxMiB8IGQgPj4+IDIwKSArIGEgfCAwO1xuICAgICAgYyArPSAoZCAmIGEgfCB+ZCAmIGIpICsga1syXSArIDYwNjEwNTgxOSB8IDA7XG4gICAgICBjID0gKGMgPDwgMTcgfCBjID4+PiAxNSkgKyBkIHwgMDtcbiAgICAgIGIgKz0gKGMgJiBkIHwgfmMgJiBhKSArIGtbM10gLSAxMDQ0NTI1MzMwIHwgMDtcbiAgICAgIGIgPSAoYiA8PCAyMiB8IGIgPj4+IDEwKSArIGMgfCAwO1xuICAgICAgYSArPSAoYiAmIGMgfCB+YiAmIGQpICsga1s0XSAtIDE3NjQxODg5NyB8IDA7XG4gICAgICBhID0gKGEgPDwgNyB8IGEgPj4+IDI1KSArIGIgfCAwO1xuICAgICAgZCArPSAoYSAmIGIgfCB+YSAmIGMpICsga1s1XSArIDEyMDAwODA0MjYgfCAwO1xuICAgICAgZCA9IChkIDw8IDEyIHwgZCA+Pj4gMjApICsgYSB8IDA7XG4gICAgICBjICs9IChkICYgYSB8IH5kICYgYikgKyBrWzZdIC0gMTQ3MzIzMTM0MSB8IDA7XG4gICAgICBjID0gKGMgPDwgMTcgfCBjID4+PiAxNSkgKyBkIHwgMDtcbiAgICAgIGIgKz0gKGMgJiBkIHwgfmMgJiBhKSArIGtbN10gLSA0NTcwNTk4MyB8IDA7XG4gICAgICBiID0gKGIgPDwgMjIgfCBiID4+PiAxMCkgKyBjIHwgMDtcbiAgICAgIGEgKz0gKGIgJiBjIHwgfmIgJiBkKSArIGtbOF0gKyAxNzcwMDM1NDE2IHwgMDtcbiAgICAgIGEgPSAoYSA8PCA3IHwgYSA+Pj4gMjUpICsgYiB8IDA7XG4gICAgICBkICs9IChhICYgYiB8IH5hICYgYykgKyBrWzldIC0gMTk1ODQxNDQxNyB8IDA7XG4gICAgICBkID0gKGQgPDwgMTIgfCBkID4+PiAyMCkgKyBhIHwgMDtcbiAgICAgIGMgKz0gKGQgJiBhIHwgfmQgJiBiKSArIGtbMTBdIC0gNDIwNjMgfCAwO1xuICAgICAgYyA9IChjIDw8IDE3IHwgYyA+Pj4gMTUpICsgZCB8IDA7XG4gICAgICBiICs9IChjICYgZCB8IH5jICYgYSkgKyBrWzExXSAtIDE5OTA0MDQxNjIgfCAwO1xuICAgICAgYiA9IChiIDw8IDIyIHwgYiA+Pj4gMTApICsgYyB8IDA7XG4gICAgICBhICs9IChiICYgYyB8IH5iICYgZCkgKyBrWzEyXSArIDE4MDQ2MDM2ODIgfCAwO1xuICAgICAgYSA9IChhIDw8IDcgfCBhID4+PiAyNSkgKyBiIHwgMDtcbiAgICAgIGQgKz0gKGEgJiBiIHwgfmEgJiBjKSArIGtbMTNdIC0gNDAzNDExMDEgfCAwO1xuICAgICAgZCA9IChkIDw8IDEyIHwgZCA+Pj4gMjApICsgYSB8IDA7XG4gICAgICBjICs9IChkICYgYSB8IH5kICYgYikgKyBrWzE0XSAtIDE1MDIwMDIyOTAgfCAwO1xuICAgICAgYyA9IChjIDw8IDE3IHwgYyA+Pj4gMTUpICsgZCB8IDA7XG4gICAgICBiICs9IChjICYgZCB8IH5jICYgYSkgKyBrWzE1XSArIDEyMzY1MzUzMjkgfCAwO1xuICAgICAgYiA9IChiIDw8IDIyIHwgYiA+Pj4gMTApICsgYyB8IDA7XG4gICAgICBhICs9IChiICYgZCB8IGMgJiB+ZCkgKyBrWzFdIC0gMTY1Nzk2NTEwIHwgMDtcbiAgICAgIGEgPSAoYSA8PCA1IHwgYSA+Pj4gMjcpICsgYiB8IDA7XG4gICAgICBkICs9IChhICYgYyB8IGIgJiB+YykgKyBrWzZdIC0gMTA2OTUwMTYzMiB8IDA7XG4gICAgICBkID0gKGQgPDwgOSB8IGQgPj4+IDIzKSArIGEgfCAwO1xuICAgICAgYyArPSAoZCAmIGIgfCBhICYgfmIpICsga1sxMV0gKyA2NDM3MTc3MTMgfCAwO1xuICAgICAgYyA9IChjIDw8IDE0IHwgYyA+Pj4gMTgpICsgZCB8IDA7XG4gICAgICBiICs9IChjICYgYSB8IGQgJiB+YSkgKyBrWzBdIC0gMzczODk3MzAyIHwgMDtcbiAgICAgIGIgPSAoYiA8PCAyMCB8IGIgPj4+IDEyKSArIGMgfCAwO1xuICAgICAgYSArPSAoYiAmIGQgfCBjICYgfmQpICsga1s1XSAtIDcwMTU1ODY5MSB8IDA7XG4gICAgICBhID0gKGEgPDwgNSB8IGEgPj4+IDI3KSArIGIgfCAwO1xuICAgICAgZCArPSAoYSAmIGMgfCBiICYgfmMpICsga1sxMF0gKyAzODAxNjA4MyB8IDA7XG4gICAgICBkID0gKGQgPDwgOSB8IGQgPj4+IDIzKSArIGEgfCAwO1xuICAgICAgYyArPSAoZCAmIGIgfCBhICYgfmIpICsga1sxNV0gLSA2NjA0NzgzMzUgfCAwO1xuICAgICAgYyA9IChjIDw8IDE0IHwgYyA+Pj4gMTgpICsgZCB8IDA7XG4gICAgICBiICs9IChjICYgYSB8IGQgJiB+YSkgKyBrWzRdIC0gNDA1NTM3ODQ4IHwgMDtcbiAgICAgIGIgPSAoYiA8PCAyMCB8IGIgPj4+IDEyKSArIGMgfCAwO1xuICAgICAgYSArPSAoYiAmIGQgfCBjICYgfmQpICsga1s5XSArIDU2ODQ0NjQzOCB8IDA7XG4gICAgICBhID0gKGEgPDwgNSB8IGEgPj4+IDI3KSArIGIgfCAwO1xuICAgICAgZCArPSAoYSAmIGMgfCBiICYgfmMpICsga1sxNF0gLSAxMDE5ODAzNjkwIHwgMDtcbiAgICAgIGQgPSAoZCA8PCA5IHwgZCA+Pj4gMjMpICsgYSB8IDA7XG4gICAgICBjICs9IChkICYgYiB8IGEgJiB+YikgKyBrWzNdIC0gMTg3MzYzOTYxIHwgMDtcbiAgICAgIGMgPSAoYyA8PCAxNCB8IGMgPj4+IDE4KSArIGQgfCAwO1xuICAgICAgYiArPSAoYyAmIGEgfCBkICYgfmEpICsga1s4XSArIDExNjM1MzE1MDEgfCAwO1xuICAgICAgYiA9IChiIDw8IDIwIHwgYiA+Pj4gMTIpICsgYyB8IDA7XG4gICAgICBhICs9IChiICYgZCB8IGMgJiB+ZCkgKyBrWzEzXSAtIDE0NDQ2ODE0NjcgfCAwO1xuICAgICAgYSA9IChhIDw8IDUgfCBhID4+PiAyNykgKyBiIHwgMDtcbiAgICAgIGQgKz0gKGEgJiBjIHwgYiAmIH5jKSArIGtbMl0gLSA1MTQwMzc4NCB8IDA7XG4gICAgICBkID0gKGQgPDwgOSB8IGQgPj4+IDIzKSArIGEgfCAwO1xuICAgICAgYyArPSAoZCAmIGIgfCBhICYgfmIpICsga1s3XSArIDE3MzUzMjg0NzMgfCAwO1xuICAgICAgYyA9IChjIDw8IDE0IHwgYyA+Pj4gMTgpICsgZCB8IDA7XG4gICAgICBiICs9IChjICYgYSB8IGQgJiB+YSkgKyBrWzEyXSAtIDE5MjY2MDc3MzQgfCAwO1xuICAgICAgYiA9IChiIDw8IDIwIHwgYiA+Pj4gMTIpICsgYyB8IDA7XG4gICAgICBhICs9IChiIF4gYyBeIGQpICsga1s1XSAtIDM3ODU1OCB8IDA7XG4gICAgICBhID0gKGEgPDwgNCB8IGEgPj4+IDI4KSArIGIgfCAwO1xuICAgICAgZCArPSAoYSBeIGIgXiBjKSArIGtbOF0gLSAyMDIyNTc0NDYzIHwgMDtcbiAgICAgIGQgPSAoZCA8PCAxMSB8IGQgPj4+IDIxKSArIGEgfCAwO1xuICAgICAgYyArPSAoZCBeIGEgXiBiKSArIGtbMTFdICsgMTgzOTAzMDU2MiB8IDA7XG4gICAgICBjID0gKGMgPDwgMTYgfCBjID4+PiAxNikgKyBkIHwgMDtcbiAgICAgIGIgKz0gKGMgXiBkIF4gYSkgKyBrWzE0XSAtIDM1MzA5NTU2IHwgMDtcbiAgICAgIGIgPSAoYiA8PCAyMyB8IGIgPj4+IDkpICsgYyB8IDA7XG4gICAgICBhICs9IChiIF4gYyBeIGQpICsga1sxXSAtIDE1MzA5OTIwNjAgfCAwO1xuICAgICAgYSA9IChhIDw8IDQgfCBhID4+PiAyOCkgKyBiIHwgMDtcbiAgICAgIGQgKz0gKGEgXiBiIF4gYykgKyBrWzRdICsgMTI3Mjg5MzM1MyB8IDA7XG4gICAgICBkID0gKGQgPDwgMTEgfCBkID4+PiAyMSkgKyBhIHwgMDtcbiAgICAgIGMgKz0gKGQgXiBhIF4gYikgKyBrWzddIC0gMTU1NDk3NjMyIHwgMDtcbiAgICAgIGMgPSAoYyA8PCAxNiB8IGMgPj4+IDE2KSArIGQgfCAwO1xuICAgICAgYiArPSAoYyBeIGQgXiBhKSArIGtbMTBdIC0gMTA5NDczMDY0MCB8IDA7XG4gICAgICBiID0gKGIgPDwgMjMgfCBiID4+PiA5KSArIGMgfCAwO1xuICAgICAgYSArPSAoYiBeIGMgXiBkKSArIGtbMTNdICsgNjgxMjc5MTc0IHwgMDtcbiAgICAgIGEgPSAoYSA8PCA0IHwgYSA+Pj4gMjgpICsgYiB8IDA7XG4gICAgICBkICs9IChhIF4gYiBeIGMpICsga1swXSAtIDM1ODUzNzIyMiB8IDA7XG4gICAgICBkID0gKGQgPDwgMTEgfCBkID4+PiAyMSkgKyBhIHwgMDtcbiAgICAgIGMgKz0gKGQgXiBhIF4gYikgKyBrWzNdIC0gNzIyNTIxOTc5IHwgMDtcbiAgICAgIGMgPSAoYyA8PCAxNiB8IGMgPj4+IDE2KSArIGQgfCAwO1xuICAgICAgYiArPSAoYyBeIGQgXiBhKSArIGtbNl0gKyA3NjAyOTE4OSB8IDA7XG4gICAgICBiID0gKGIgPDwgMjMgfCBiID4+PiA5KSArIGMgfCAwO1xuICAgICAgYSArPSAoYiBeIGMgXiBkKSArIGtbOV0gLSA2NDAzNjQ0ODcgfCAwO1xuICAgICAgYSA9IChhIDw8IDQgfCBhID4+PiAyOCkgKyBiIHwgMDtcbiAgICAgIGQgKz0gKGEgXiBiIF4gYykgKyBrWzEyXSAtIDQyMTgxNTgzNSB8IDA7XG4gICAgICBkID0gKGQgPDwgMTEgfCBkID4+PiAyMSkgKyBhIHwgMDtcbiAgICAgIGMgKz0gKGQgXiBhIF4gYikgKyBrWzE1XSArIDUzMDc0MjUyMCB8IDA7XG4gICAgICBjID0gKGMgPDwgMTYgfCBjID4+PiAxNikgKyBkIHwgMDtcbiAgICAgIGIgKz0gKGMgXiBkIF4gYSkgKyBrWzJdIC0gOTk1MzM4NjUxIHwgMDtcbiAgICAgIGIgPSAoYiA8PCAyMyB8IGIgPj4+IDkpICsgYyB8IDA7XG4gICAgICBhICs9IChjIF4gKGIgfCB+ZCkpICsga1swXSAtIDE5ODYzMDg0NCB8IDA7XG4gICAgICBhID0gKGEgPDwgNiB8IGEgPj4+IDI2KSArIGIgfCAwO1xuICAgICAgZCArPSAoYiBeIChhIHwgfmMpKSArIGtbN10gKyAxMTI2ODkxNDE1IHwgMDtcbiAgICAgIGQgPSAoZCA8PCAxMCB8IGQgPj4+IDIyKSArIGEgfCAwO1xuICAgICAgYyArPSAoYSBeIChkIHwgfmIpKSArIGtbMTRdIC0gMTQxNjM1NDkwNSB8IDA7XG4gICAgICBjID0gKGMgPDwgMTUgfCBjID4+PiAxNykgKyBkIHwgMDtcbiAgICAgIGIgKz0gKGQgXiAoYyB8IH5hKSkgKyBrWzVdIC0gNTc0MzQwNTUgfCAwO1xuICAgICAgYiA9IChiIDw8IDIxIHwgYiA+Pj4gMTEpICsgYyB8IDA7XG4gICAgICBhICs9IChjIF4gKGIgfCB+ZCkpICsga1sxMl0gKyAxNzAwNDg1NTcxIHwgMDtcbiAgICAgIGEgPSAoYSA8PCA2IHwgYSA+Pj4gMjYpICsgYiB8IDA7XG4gICAgICBkICs9IChiIF4gKGEgfCB+YykpICsga1szXSAtIDE4OTQ5ODY2MDYgfCAwO1xuICAgICAgZCA9IChkIDw8IDEwIHwgZCA+Pj4gMjIpICsgYSB8IDA7XG4gICAgICBjICs9IChhIF4gKGQgfCB+YikpICsga1sxMF0gLSAxMDUxNTIzIHwgMDtcbiAgICAgIGMgPSAoYyA8PCAxNSB8IGMgPj4+IDE3KSArIGQgfCAwO1xuICAgICAgYiArPSAoZCBeIChjIHwgfmEpKSArIGtbMV0gLSAyMDU0OTIyNzk5IHwgMDtcbiAgICAgIGIgPSAoYiA8PCAyMSB8IGIgPj4+IDExKSArIGMgfCAwO1xuICAgICAgYSArPSAoYyBeIChiIHwgfmQpKSArIGtbOF0gKyAxODczMzEzMzU5IHwgMDtcbiAgICAgIGEgPSAoYSA8PCA2IHwgYSA+Pj4gMjYpICsgYiB8IDA7XG4gICAgICBkICs9IChiIF4gKGEgfCB+YykpICsga1sxNV0gLSAzMDYxMTc0NCB8IDA7XG4gICAgICBkID0gKGQgPDwgMTAgfCBkID4+PiAyMikgKyBhIHwgMDtcbiAgICAgIGMgKz0gKGEgXiAoZCB8IH5iKSkgKyBrWzZdIC0gMTU2MDE5ODM4MCB8IDA7XG4gICAgICBjID0gKGMgPDwgMTUgfCBjID4+PiAxNykgKyBkIHwgMDtcbiAgICAgIGIgKz0gKGQgXiAoYyB8IH5hKSkgKyBrWzEzXSArIDEzMDkxNTE2NDkgfCAwO1xuICAgICAgYiA9IChiIDw8IDIxIHwgYiA+Pj4gMTEpICsgYyB8IDA7XG4gICAgICBhICs9IChjIF4gKGIgfCB+ZCkpICsga1s0XSAtIDE0NTUyMzA3MCB8IDA7XG4gICAgICBhID0gKGEgPDwgNiB8IGEgPj4+IDI2KSArIGIgfCAwO1xuICAgICAgZCArPSAoYiBeIChhIHwgfmMpKSArIGtbMTFdIC0gMTEyMDIxMDM3OSB8IDA7XG4gICAgICBkID0gKGQgPDwgMTAgfCBkID4+PiAyMikgKyBhIHwgMDtcbiAgICAgIGMgKz0gKGEgXiAoZCB8IH5iKSkgKyBrWzJdICsgNzE4Nzg3MjU5IHwgMDtcbiAgICAgIGMgPSAoYyA8PCAxNSB8IGMgPj4+IDE3KSArIGQgfCAwO1xuICAgICAgYiArPSAoZCBeIChjIHwgfmEpKSArIGtbOV0gLSAzNDM0ODU1NTEgfCAwO1xuICAgICAgYiA9IChiIDw8IDIxIHwgYiA+Pj4gMTEpICsgYyB8IDA7XG4gICAgICB4WzBdID0gYSArIHhbMF0gfCAwO1xuICAgICAgeFsxXSA9IGIgKyB4WzFdIHwgMDtcbiAgICAgIHhbMl0gPSBjICsgeFsyXSB8IDA7XG4gICAgICB4WzNdID0gZCArIHhbM10gfCAwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBtZDVibGsocykge1xuICAgICAgdmFyIG1kNWJsa3MgPSBbXSwgaTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCA2NDsgaSArPSA0KSB7XG4gICAgICAgIG1kNWJsa3NbaSA+PiAyXSA9IHMuY2hhckNvZGVBdChpKSArIChzLmNoYXJDb2RlQXQoaSArIDEpIDw8IDgpICsgKHMuY2hhckNvZGVBdChpICsgMikgPDwgMTYpICsgKHMuY2hhckNvZGVBdChpICsgMykgPDwgMjQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1kNWJsa3M7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1kNWJsa19hcnJheShhKSB7XG4gICAgICB2YXIgbWQ1YmxrcyA9IFtdLCBpO1xuICAgICAgZm9yIChpID0gMDsgaSA8IDY0OyBpICs9IDQpIHtcbiAgICAgICAgbWQ1Ymxrc1tpID4+IDJdID0gYVtpXSArIChhW2kgKyAxXSA8PCA4KSArIChhW2kgKyAyXSA8PCAxNikgKyAoYVtpICsgM10gPDwgMjQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1kNWJsa3M7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1kNTEocykge1xuICAgICAgdmFyIG4gPSBzLmxlbmd0aCwgc3RhdGUgPSBbIDE3MzI1ODQxOTMsIC0yNzE3MzM4NzksIC0xNzMyNTg0MTk0LCAyNzE3MzM4NzggXSwgaSwgbGVuZ3RoLCB0YWlsLCB0bXAsIGxvLCBoaTtcbiAgICAgIGZvciAoaSA9IDY0OyBpIDw9IG47IGkgKz0gNjQpIHtcbiAgICAgICAgbWQ1Y3ljbGUoc3RhdGUsIG1kNWJsayhzLnN1YnN0cmluZyhpIC0gNjQsIGkpKSk7XG4gICAgICB9XG4gICAgICBzID0gcy5zdWJzdHJpbmcoaSAtIDY0KTtcbiAgICAgIGxlbmd0aCA9IHMubGVuZ3RoO1xuICAgICAgdGFpbCA9IFsgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCBdO1xuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIHRhaWxbaSA+PiAyXSB8PSBzLmNoYXJDb2RlQXQoaSkgPDwgKGkgJSA0IDw8IDMpO1xuICAgICAgfVxuICAgICAgdGFpbFtpID4+IDJdIHw9IDEyOCA8PCAoaSAlIDQgPDwgMyk7XG4gICAgICBpZiAoaSA+IDU1KSB7XG4gICAgICAgIG1kNWN5Y2xlKHN0YXRlLCB0YWlsKTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IDE2OyBpICs9IDEpIHtcbiAgICAgICAgICB0YWlsW2ldID0gMDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdG1wID0gbiAqIDg7XG4gICAgICB0bXAgPSB0bXAudG9TdHJpbmcoMTYpLm1hdGNoKC8oLio/KSguezAsOH0pJC8pO1xuICAgICAgbG8gPSBwYXJzZUludCh0bXBbMl0sIDE2KTtcbiAgICAgIGhpID0gcGFyc2VJbnQodG1wWzFdLCAxNikgfHwgMDtcbiAgICAgIHRhaWxbMTRdID0gbG87XG4gICAgICB0YWlsWzE1XSA9IGhpO1xuICAgICAgbWQ1Y3ljbGUoc3RhdGUsIHRhaWwpO1xuICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBtZDUxX2FycmF5KGEpIHtcbiAgICAgIHZhciBuID0gYS5sZW5ndGgsIHN0YXRlID0gWyAxNzMyNTg0MTkzLCAtMjcxNzMzODc5LCAtMTczMjU4NDE5NCwgMjcxNzMzODc4IF0sIGksIGxlbmd0aCwgdGFpbCwgdG1wLCBsbywgaGk7XG4gICAgICBmb3IgKGkgPSA2NDsgaSA8PSBuOyBpICs9IDY0KSB7XG4gICAgICAgIG1kNWN5Y2xlKHN0YXRlLCBtZDVibGtfYXJyYXkoYS5zdWJhcnJheShpIC0gNjQsIGkpKSk7XG4gICAgICB9XG4gICAgICBhID0gaSAtIDY0IDwgbiA/IGEuc3ViYXJyYXkoaSAtIDY0KSA6IG5ldyBVaW50OEFycmF5KDApO1xuICAgICAgbGVuZ3RoID0gYS5sZW5ndGg7XG4gICAgICB0YWlsID0gWyAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwIF07XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgdGFpbFtpID4+IDJdIHw9IGFbaV0gPDwgKGkgJSA0IDw8IDMpO1xuICAgICAgfVxuICAgICAgdGFpbFtpID4+IDJdIHw9IDEyOCA8PCAoaSAlIDQgPDwgMyk7XG4gICAgICBpZiAoaSA+IDU1KSB7XG4gICAgICAgIG1kNWN5Y2xlKHN0YXRlLCB0YWlsKTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IDE2OyBpICs9IDEpIHtcbiAgICAgICAgICB0YWlsW2ldID0gMDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdG1wID0gbiAqIDg7XG4gICAgICB0bXAgPSB0bXAudG9TdHJpbmcoMTYpLm1hdGNoKC8oLio/KSguezAsOH0pJC8pO1xuICAgICAgbG8gPSBwYXJzZUludCh0bXBbMl0sIDE2KTtcbiAgICAgIGhpID0gcGFyc2VJbnQodG1wWzFdLCAxNikgfHwgMDtcbiAgICAgIHRhaWxbMTRdID0gbG87XG4gICAgICB0YWlsWzE1XSA9IGhpO1xuICAgICAgbWQ1Y3ljbGUoc3RhdGUsIHRhaWwpO1xuICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cbiAgICBmdW5jdGlvbiByaGV4KG4pIHtcbiAgICAgIHZhciBzID0gXCJcIiwgajtcbiAgICAgIGZvciAoaiA9IDA7IGogPCA0OyBqICs9IDEpIHtcbiAgICAgICAgcyArPSBoZXhfY2hyW24gPj4gaiAqIDggKyA0ICYgMTVdICsgaGV4X2NocltuID4+IGogKiA4ICYgMTVdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHM7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhleCh4KSB7XG4gICAgICB2YXIgaTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIHhbaV0gPSByaGV4KHhbaV0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHguam9pbihcIlwiKTtcbiAgICB9XG4gICAgaWYgKGhleChtZDUxKFwiaGVsbG9cIikpICE9PSBcIjVkNDE0MDJhYmM0YjJhNzZiOTcxOWQ5MTEwMTdjNTkyXCIpIDtcbiAgICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSBcInVuZGVmaW5lZFwiICYmICFBcnJheUJ1ZmZlci5wcm90b3R5cGUuc2xpY2UpIHtcbiAgICAgIChmdW5jdGlvbigpIHtcbiAgICAgICAgZnVuY3Rpb24gY2xhbXAodmFsLCBsZW5ndGgpIHtcbiAgICAgICAgICB2YWwgPSB2YWwgfCAwIHx8IDA7XG4gICAgICAgICAgaWYgKHZhbCA8IDApIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1heCh2YWwgKyBsZW5ndGgsIDApO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gTWF0aC5taW4odmFsLCBsZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIEFycmF5QnVmZmVyLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uKGZyb20sIHRvKSB7XG4gICAgICAgICAgdmFyIGxlbmd0aCA9IHRoaXMuYnl0ZUxlbmd0aCwgYmVnaW4gPSBjbGFtcChmcm9tLCBsZW5ndGgpLCBlbmQgPSBsZW5ndGgsIG51bSwgdGFyZ2V0LCB0YXJnZXRBcnJheSwgc291cmNlQXJyYXk7XG4gICAgICAgICAgaWYgKHRvICE9PSB1bmRlZmluZWQkMSkge1xuICAgICAgICAgICAgZW5kID0gY2xhbXAodG8sIGxlbmd0aCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChiZWdpbiA+IGVuZCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheUJ1ZmZlcigwKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbnVtID0gZW5kIC0gYmVnaW47XG4gICAgICAgICAgdGFyZ2V0ID0gbmV3IEFycmF5QnVmZmVyKG51bSk7XG4gICAgICAgICAgdGFyZ2V0QXJyYXkgPSBuZXcgVWludDhBcnJheSh0YXJnZXQpO1xuICAgICAgICAgIHNvdXJjZUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkodGhpcywgYmVnaW4sIG51bSk7XG4gICAgICAgICAgdGFyZ2V0QXJyYXkuc2V0KHNvdXJjZUFycmF5KTtcbiAgICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgICB9O1xuICAgICAgfSkoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdG9VdGY4KHN0cikge1xuICAgICAgaWYgKC9bXFx1MDA4MC1cXHVGRkZGXS8udGVzdChzdHIpKSB7XG4gICAgICAgIHN0ciA9IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChzdHIpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdHI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHV0ZjhTdHIyQXJyYXlCdWZmZXIoc3RyLCByZXR1cm5VSW50OEFycmF5KSB7XG4gICAgICB2YXIgbGVuZ3RoID0gc3RyLmxlbmd0aCwgYnVmZiA9IG5ldyBBcnJheUJ1ZmZlcihsZW5ndGgpLCBhcnIgPSBuZXcgVWludDhBcnJheShidWZmKSwgaTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBhcnJbaV0gPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXR1cm5VSW50OEFycmF5ID8gYXJyIDogYnVmZjtcbiAgICB9XG4gICAgZnVuY3Rpb24gYXJyYXlCdWZmZXIyVXRmOFN0cihidWZmKSB7XG4gICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBuZXcgVWludDhBcnJheShidWZmKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNvbmNhdGVuYXRlQXJyYXlCdWZmZXJzKGZpcnN0LCBzZWNvbmQsIHJldHVyblVJbnQ4QXJyYXkpIHtcbiAgICAgIHZhciByZXN1bHQgPSBuZXcgVWludDhBcnJheShmaXJzdC5ieXRlTGVuZ3RoICsgc2Vjb25kLmJ5dGVMZW5ndGgpO1xuICAgICAgcmVzdWx0LnNldChuZXcgVWludDhBcnJheShmaXJzdCkpO1xuICAgICAgcmVzdWx0LnNldChuZXcgVWludDhBcnJheShzZWNvbmQpLCBmaXJzdC5ieXRlTGVuZ3RoKTtcbiAgICAgIHJldHVybiByZXR1cm5VSW50OEFycmF5ID8gcmVzdWx0IDogcmVzdWx0LmJ1ZmZlcjtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGV4VG9CaW5hcnlTdHJpbmcoaGV4KSB7XG4gICAgICB2YXIgYnl0ZXMgPSBbXSwgbGVuZ3RoID0gaGV4Lmxlbmd0aCwgeDtcbiAgICAgIGZvciAoeCA9IDA7IHggPCBsZW5ndGggLSAxOyB4ICs9IDIpIHtcbiAgICAgICAgYnl0ZXMucHVzaChwYXJzZUludChoZXguc3Vic3RyKHgsIDIpLCAxNikpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBieXRlcyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFNwYXJrTUQ1KCkge1xuICAgICAgdGhpcy5yZXNldCgpO1xuICAgIH1cbiAgICBTcGFya01ENS5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgICB0aGlzLmFwcGVuZEJpbmFyeSh0b1V0Zjgoc3RyKSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIFNwYXJrTUQ1LnByb3RvdHlwZS5hcHBlbmRCaW5hcnkgPSBmdW5jdGlvbihjb250ZW50cykge1xuICAgICAgdGhpcy5fYnVmZiArPSBjb250ZW50cztcbiAgICAgIHRoaXMuX2xlbmd0aCArPSBjb250ZW50cy5sZW5ndGg7XG4gICAgICB2YXIgbGVuZ3RoID0gdGhpcy5fYnVmZi5sZW5ndGgsIGk7XG4gICAgICBmb3IgKGkgPSA2NDsgaSA8PSBsZW5ndGg7IGkgKz0gNjQpIHtcbiAgICAgICAgbWQ1Y3ljbGUodGhpcy5faGFzaCwgbWQ1YmxrKHRoaXMuX2J1ZmYuc3Vic3RyaW5nKGkgLSA2NCwgaSkpKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2J1ZmYgPSB0aGlzLl9idWZmLnN1YnN0cmluZyhpIC0gNjQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBTcGFya01ENS5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24ocmF3KSB7XG4gICAgICB2YXIgYnVmZiA9IHRoaXMuX2J1ZmYsIGxlbmd0aCA9IGJ1ZmYubGVuZ3RoLCBpLCB0YWlsID0gWyAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwIF0sIHJldDtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICB0YWlsW2kgPj4gMl0gfD0gYnVmZi5jaGFyQ29kZUF0KGkpIDw8IChpICUgNCA8PCAzKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2ZpbmlzaCh0YWlsLCBsZW5ndGgpO1xuICAgICAgcmV0ID0gaGV4KHRoaXMuX2hhc2gpO1xuICAgICAgaWYgKHJhdykge1xuICAgICAgICByZXQgPSBoZXhUb0JpbmFyeVN0cmluZyhyZXQpO1xuICAgICAgfVxuICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xuICAgIFNwYXJrTUQ1LnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5fYnVmZiA9IFwiXCI7XG4gICAgICB0aGlzLl9sZW5ndGggPSAwO1xuICAgICAgdGhpcy5faGFzaCA9IFsgMTczMjU4NDE5MywgLTI3MTczMzg3OSwgLTE3MzI1ODQxOTQsIDI3MTczMzg3OCBdO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBTcGFya01ENS5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGJ1ZmY6IHRoaXMuX2J1ZmYsXG4gICAgICAgIGxlbmd0aDogdGhpcy5fbGVuZ3RoLFxuICAgICAgICBoYXNoOiB0aGlzLl9oYXNoLnNsaWNlKClcbiAgICAgIH07XG4gICAgfTtcbiAgICBTcGFya01ENS5wcm90b3R5cGUuc2V0U3RhdGUgPSBmdW5jdGlvbihzdGF0ZSkge1xuICAgICAgdGhpcy5fYnVmZiA9IHN0YXRlLmJ1ZmY7XG4gICAgICB0aGlzLl9sZW5ndGggPSBzdGF0ZS5sZW5ndGg7XG4gICAgICB0aGlzLl9oYXNoID0gc3RhdGUuaGFzaDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgU3BhcmtNRDUucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLl9oYXNoO1xuICAgICAgZGVsZXRlIHRoaXMuX2J1ZmY7XG4gICAgICBkZWxldGUgdGhpcy5fbGVuZ3RoO1xuICAgIH07XG4gICAgU3BhcmtNRDUucHJvdG90eXBlLl9maW5pc2ggPSBmdW5jdGlvbih0YWlsLCBsZW5ndGgpIHtcbiAgICAgIHZhciBpID0gbGVuZ3RoLCB0bXAsIGxvLCBoaTtcbiAgICAgIHRhaWxbaSA+PiAyXSB8PSAxMjggPDwgKGkgJSA0IDw8IDMpO1xuICAgICAgaWYgKGkgPiA1NSkge1xuICAgICAgICBtZDVjeWNsZSh0aGlzLl9oYXNoLCB0YWlsKTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IDE2OyBpICs9IDEpIHtcbiAgICAgICAgICB0YWlsW2ldID0gMDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdG1wID0gdGhpcy5fbGVuZ3RoICogODtcbiAgICAgIHRtcCA9IHRtcC50b1N0cmluZygxNikubWF0Y2goLyguKj8pKC57MCw4fSkkLyk7XG4gICAgICBsbyA9IHBhcnNlSW50KHRtcFsyXSwgMTYpO1xuICAgICAgaGkgPSBwYXJzZUludCh0bXBbMV0sIDE2KSB8fCAwO1xuICAgICAgdGFpbFsxNF0gPSBsbztcbiAgICAgIHRhaWxbMTVdID0gaGk7XG4gICAgICBtZDVjeWNsZSh0aGlzLl9oYXNoLCB0YWlsKTtcbiAgICB9O1xuICAgIFNwYXJrTUQ1Lmhhc2ggPSBmdW5jdGlvbihzdHIsIHJhdykge1xuICAgICAgcmV0dXJuIFNwYXJrTUQ1Lmhhc2hCaW5hcnkodG9VdGY4KHN0ciksIHJhdyk7XG4gICAgfTtcbiAgICBTcGFya01ENS5oYXNoQmluYXJ5ID0gZnVuY3Rpb24oY29udGVudCwgcmF3KSB7XG4gICAgICB2YXIgaGFzaCA9IG1kNTEoY29udGVudCksIHJldCA9IGhleChoYXNoKTtcbiAgICAgIHJldHVybiByYXcgPyBoZXhUb0JpbmFyeVN0cmluZyhyZXQpIDogcmV0O1xuICAgIH07XG4gICAgU3BhcmtNRDUuQXJyYXlCdWZmZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMucmVzZXQoKTtcbiAgICB9O1xuICAgIFNwYXJrTUQ1LkFycmF5QnVmZmVyLnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbihhcnIpIHtcbiAgICAgIHZhciBidWZmID0gY29uY2F0ZW5hdGVBcnJheUJ1ZmZlcnModGhpcy5fYnVmZi5idWZmZXIsIGFyciwgdHJ1ZSksIGxlbmd0aCA9IGJ1ZmYubGVuZ3RoLCBpO1xuICAgICAgdGhpcy5fbGVuZ3RoICs9IGFyci5ieXRlTGVuZ3RoO1xuICAgICAgZm9yIChpID0gNjQ7IGkgPD0gbGVuZ3RoOyBpICs9IDY0KSB7XG4gICAgICAgIG1kNWN5Y2xlKHRoaXMuX2hhc2gsIG1kNWJsa19hcnJheShidWZmLnN1YmFycmF5KGkgLSA2NCwgaSkpKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2J1ZmYgPSBpIC0gNjQgPCBsZW5ndGggPyBuZXcgVWludDhBcnJheShidWZmLmJ1ZmZlci5zbGljZShpIC0gNjQpKSA6IG5ldyBVaW50OEFycmF5KDApO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBTcGFya01ENS5BcnJheUJ1ZmZlci5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24ocmF3KSB7XG4gICAgICB2YXIgYnVmZiA9IHRoaXMuX2J1ZmYsIGxlbmd0aCA9IGJ1ZmYubGVuZ3RoLCB0YWlsID0gWyAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwIF0sIGksIHJldDtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICB0YWlsW2kgPj4gMl0gfD0gYnVmZltpXSA8PCAoaSAlIDQgPDwgMyk7XG4gICAgICB9XG4gICAgICB0aGlzLl9maW5pc2godGFpbCwgbGVuZ3RoKTtcbiAgICAgIHJldCA9IGhleCh0aGlzLl9oYXNoKTtcbiAgICAgIGlmIChyYXcpIHtcbiAgICAgICAgcmV0ID0gaGV4VG9CaW5hcnlTdHJpbmcocmV0KTtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcbiAgICBTcGFya01ENS5BcnJheUJ1ZmZlci5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuX2J1ZmYgPSBuZXcgVWludDhBcnJheSgwKTtcbiAgICAgIHRoaXMuX2xlbmd0aCA9IDA7XG4gICAgICB0aGlzLl9oYXNoID0gWyAxNzMyNTg0MTkzLCAtMjcxNzMzODc5LCAtMTczMjU4NDE5NCwgMjcxNzMzODc4IF07XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIFNwYXJrTUQ1LkFycmF5QnVmZmVyLnByb3RvdHlwZS5nZXRTdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHN0YXRlID0gU3BhcmtNRDUucHJvdG90eXBlLmdldFN0YXRlLmNhbGwodGhpcyk7XG4gICAgICBzdGF0ZS5idWZmID0gYXJyYXlCdWZmZXIyVXRmOFN0cihzdGF0ZS5idWZmKTtcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9O1xuICAgIFNwYXJrTUQ1LkFycmF5QnVmZmVyLnByb3RvdHlwZS5zZXRTdGF0ZSA9IGZ1bmN0aW9uKHN0YXRlKSB7XG4gICAgICBzdGF0ZS5idWZmID0gdXRmOFN0cjJBcnJheUJ1ZmZlcihzdGF0ZS5idWZmLCB0cnVlKTtcbiAgICAgIHJldHVybiBTcGFya01ENS5wcm90b3R5cGUuc2V0U3RhdGUuY2FsbCh0aGlzLCBzdGF0ZSk7XG4gICAgfTtcbiAgICBTcGFya01ENS5BcnJheUJ1ZmZlci5wcm90b3R5cGUuZGVzdHJveSA9IFNwYXJrTUQ1LnByb3RvdHlwZS5kZXN0cm95O1xuICAgIFNwYXJrTUQ1LkFycmF5QnVmZmVyLnByb3RvdHlwZS5fZmluaXNoID0gU3BhcmtNRDUucHJvdG90eXBlLl9maW5pc2g7XG4gICAgU3BhcmtNRDUuQXJyYXlCdWZmZXIuaGFzaCA9IGZ1bmN0aW9uKGFyciwgcmF3KSB7XG4gICAgICB2YXIgaGFzaCA9IG1kNTFfYXJyYXkobmV3IFVpbnQ4QXJyYXkoYXJyKSksIHJldCA9IGhleChoYXNoKTtcbiAgICAgIHJldHVybiByYXcgPyBoZXhUb0JpbmFyeVN0cmluZyhyZXQpIDogcmV0O1xuICAgIH07XG4gICAgcmV0dXJuIFNwYXJrTUQ1O1xuICB9KSk7XG59KShzcGFya01kNSk7XG5cbnZhciBTcGFya01ENSA9IHNwYXJrTWQ1LmV4cG9ydHM7XG5cbmNvbnN0IGZpbGVTbGljZSA9IEZpbGUucHJvdG90eXBlLnNsaWNlIHx8IEZpbGUucHJvdG90eXBlLm1velNsaWNlIHx8IEZpbGUucHJvdG90eXBlLndlYmtpdFNsaWNlO1xuXG5jbGFzcyBGaWxlQ2hlY2tzdW0ge1xuICBzdGF0aWMgY3JlYXRlKGZpbGUsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBuZXcgRmlsZUNoZWNrc3VtKGZpbGUpO1xuICAgIGluc3RhbmNlLmNyZWF0ZShjYWxsYmFjayk7XG4gIH1cbiAgY29uc3RydWN0b3IoZmlsZSkge1xuICAgIHRoaXMuZmlsZSA9IGZpbGU7XG4gICAgdGhpcy5jaHVua1NpemUgPSAyMDk3MTUyO1xuICAgIHRoaXMuY2h1bmtDb3VudCA9IE1hdGguY2VpbCh0aGlzLmZpbGUuc2l6ZSAvIHRoaXMuY2h1bmtTaXplKTtcbiAgICB0aGlzLmNodW5rSW5kZXggPSAwO1xuICB9XG4gIGNyZWF0ZShjYWxsYmFjaykge1xuICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB0aGlzLm1kNUJ1ZmZlciA9IG5ldyBTcGFya01ENS5BcnJheUJ1ZmZlcjtcbiAgICB0aGlzLmZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcjtcbiAgICB0aGlzLmZpbGVSZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKGV2ZW50ID0+IHRoaXMuZmlsZVJlYWRlckRpZExvYWQoZXZlbnQpKSk7XG4gICAgdGhpcy5maWxlUmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCAoZXZlbnQgPT4gdGhpcy5maWxlUmVhZGVyRGlkRXJyb3IoZXZlbnQpKSk7XG4gICAgdGhpcy5yZWFkTmV4dENodW5rKCk7XG4gIH1cbiAgZmlsZVJlYWRlckRpZExvYWQoZXZlbnQpIHtcbiAgICB0aGlzLm1kNUJ1ZmZlci5hcHBlbmQoZXZlbnQudGFyZ2V0LnJlc3VsdCk7XG4gICAgaWYgKCF0aGlzLnJlYWROZXh0Q2h1bmsoKSkge1xuICAgICAgY29uc3QgYmluYXJ5RGlnZXN0ID0gdGhpcy5tZDVCdWZmZXIuZW5kKHRydWUpO1xuICAgICAgY29uc3QgYmFzZTY0ZGlnZXN0ID0gYnRvYShiaW5hcnlEaWdlc3QpO1xuICAgICAgdGhpcy5jYWxsYmFjayhudWxsLCBiYXNlNjRkaWdlc3QpO1xuICAgIH1cbiAgfVxuICBmaWxlUmVhZGVyRGlkRXJyb3IoZXZlbnQpIHtcbiAgICB0aGlzLmNhbGxiYWNrKGBFcnJvciByZWFkaW5nICR7dGhpcy5maWxlLm5hbWV9YCk7XG4gIH1cbiAgcmVhZE5leHRDaHVuaygpIHtcbiAgICBpZiAodGhpcy5jaHVua0luZGV4IDwgdGhpcy5jaHVua0NvdW50IHx8IHRoaXMuY2h1bmtJbmRleCA9PSAwICYmIHRoaXMuY2h1bmtDb3VudCA9PSAwKSB7XG4gICAgICBjb25zdCBzdGFydCA9IHRoaXMuY2h1bmtJbmRleCAqIHRoaXMuY2h1bmtTaXplO1xuICAgICAgY29uc3QgZW5kID0gTWF0aC5taW4oc3RhcnQgKyB0aGlzLmNodW5rU2l6ZSwgdGhpcy5maWxlLnNpemUpO1xuICAgICAgY29uc3QgYnl0ZXMgPSBmaWxlU2xpY2UuY2FsbCh0aGlzLmZpbGUsIHN0YXJ0LCBlbmQpO1xuICAgICAgdGhpcy5maWxlUmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGJ5dGVzKTtcbiAgICAgIHRoaXMuY2h1bmtJbmRleCsrO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0TWV0YVZhbHVlKG5hbWUpIHtcbiAgY29uc3QgZWxlbWVudCA9IGZpbmRFbGVtZW50KGRvY3VtZW50LmhlYWQsIGBtZXRhW25hbWU9XCIke25hbWV9XCJdYCk7XG4gIGlmIChlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiY29udGVudFwiKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmaW5kRWxlbWVudHMocm9vdCwgc2VsZWN0b3IpIHtcbiAgaWYgKHR5cGVvZiByb290ID09IFwic3RyaW5nXCIpIHtcbiAgICBzZWxlY3RvciA9IHJvb3Q7XG4gICAgcm9vdCA9IGRvY3VtZW50O1xuICB9XG4gIGNvbnN0IGVsZW1lbnRzID0gcm9vdC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgcmV0dXJuIHRvQXJyYXkoZWxlbWVudHMpO1xufVxuXG5mdW5jdGlvbiBmaW5kRWxlbWVudChyb290LCBzZWxlY3Rvcikge1xuICBpZiAodHlwZW9mIHJvb3QgPT0gXCJzdHJpbmdcIikge1xuICAgIHNlbGVjdG9yID0gcm9vdDtcbiAgICByb290ID0gZG9jdW1lbnQ7XG4gIH1cbiAgcmV0dXJuIHJvb3QucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG59XG5cbmZ1bmN0aW9uIGRpc3BhdGNoRXZlbnQoZWxlbWVudCwgdHlwZSwgZXZlbnRJbml0ID0ge30pIHtcbiAgY29uc3Qge2Rpc2FibGVkOiBkaXNhYmxlZH0gPSBlbGVtZW50O1xuICBjb25zdCB7YnViYmxlczogYnViYmxlcywgY2FuY2VsYWJsZTogY2FuY2VsYWJsZSwgZGV0YWlsOiBkZXRhaWx9ID0gZXZlbnRJbml0O1xuICBjb25zdCBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIik7XG4gIGV2ZW50LmluaXRFdmVudCh0eXBlLCBidWJibGVzIHx8IHRydWUsIGNhbmNlbGFibGUgfHwgdHJ1ZSk7XG4gIGV2ZW50LmRldGFpbCA9IGRldGFpbCB8fCB7fTtcbiAgdHJ5IHtcbiAgICBlbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgZWxlbWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgfSBmaW5hbGx5IHtcbiAgICBlbGVtZW50LmRpc2FibGVkID0gZGlzYWJsZWQ7XG4gIH1cbiAgcmV0dXJuIGV2ZW50O1xufVxuXG5mdW5jdGlvbiB0b0FycmF5KHZhbHVlKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSBlbHNlIGlmIChBcnJheS5mcm9tKSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBbXS5zbGljZS5jYWxsKHZhbHVlKTtcbiAgfVxufVxuXG5jbGFzcyBCbG9iUmVjb3JkIHtcbiAgY29uc3RydWN0b3IoZmlsZSwgY2hlY2tzdW0sIHVybCwgY3VzdG9tSGVhZGVycyA9IHt9KSB7XG4gICAgdGhpcy5maWxlID0gZmlsZTtcbiAgICB0aGlzLmF0dHJpYnV0ZXMgPSB7XG4gICAgICBmaWxlbmFtZTogZmlsZS5uYW1lLFxuICAgICAgY29udGVudF90eXBlOiBmaWxlLnR5cGUgfHwgXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIixcbiAgICAgIGJ5dGVfc2l6ZTogZmlsZS5zaXplLFxuICAgICAgY2hlY2tzdW06IGNoZWNrc3VtXG4gICAgfTtcbiAgICB0aGlzLnhociA9IG5ldyBYTUxIdHRwUmVxdWVzdDtcbiAgICB0aGlzLnhoci5vcGVuKFwiUE9TVFwiLCB1cmwsIHRydWUpO1xuICAgIHRoaXMueGhyLnJlc3BvbnNlVHlwZSA9IFwianNvblwiO1xuICAgIHRoaXMueGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgIHRoaXMueGhyLnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgIHRoaXMueGhyLnNldFJlcXVlc3RIZWFkZXIoXCJYLVJlcXVlc3RlZC1XaXRoXCIsIFwiWE1MSHR0cFJlcXVlc3RcIik7XG4gICAgT2JqZWN0LmtleXMoY3VzdG9tSGVhZGVycykuZm9yRWFjaCgoaGVhZGVyS2V5ID0+IHtcbiAgICAgIHRoaXMueGhyLnNldFJlcXVlc3RIZWFkZXIoaGVhZGVyS2V5LCBjdXN0b21IZWFkZXJzW2hlYWRlcktleV0pO1xuICAgIH0pKTtcbiAgICBjb25zdCBjc3JmVG9rZW4gPSBnZXRNZXRhVmFsdWUoXCJjc3JmLXRva2VuXCIpO1xuICAgIGlmIChjc3JmVG9rZW4gIT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiWC1DU1JGLVRva2VuXCIsIGNzcmZUb2tlbik7XG4gICAgfVxuICAgIHRoaXMueGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIChldmVudCA9PiB0aGlzLnJlcXVlc3REaWRMb2FkKGV2ZW50KSkpO1xuICAgIHRoaXMueGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCAoZXZlbnQgPT4gdGhpcy5yZXF1ZXN0RGlkRXJyb3IoZXZlbnQpKSk7XG4gIH1cbiAgZ2V0IHN0YXR1cygpIHtcbiAgICByZXR1cm4gdGhpcy54aHIuc3RhdHVzO1xuICB9XG4gIGdldCByZXNwb25zZSgpIHtcbiAgICBjb25zdCB7cmVzcG9uc2VUeXBlOiByZXNwb25zZVR5cGUsIHJlc3BvbnNlOiByZXNwb25zZX0gPSB0aGlzLnhocjtcbiAgICBpZiAocmVzcG9uc2VUeXBlID09IFwianNvblwiKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKHJlc3BvbnNlKTtcbiAgICB9XG4gIH1cbiAgY3JlYXRlKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIHRoaXMueGhyLnNlbmQoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgYmxvYjogdGhpcy5hdHRyaWJ1dGVzXG4gICAgfSkpO1xuICB9XG4gIHJlcXVlc3REaWRMb2FkKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMuc3RhdHVzID49IDIwMCAmJiB0aGlzLnN0YXR1cyA8IDMwMCkge1xuICAgICAgY29uc3Qge3Jlc3BvbnNlOiByZXNwb25zZX0gPSB0aGlzO1xuICAgICAgY29uc3Qge2RpcmVjdF91cGxvYWQ6IGRpcmVjdF91cGxvYWR9ID0gcmVzcG9uc2U7XG4gICAgICBkZWxldGUgcmVzcG9uc2UuZGlyZWN0X3VwbG9hZDtcbiAgICAgIHRoaXMuYXR0cmlidXRlcyA9IHJlc3BvbnNlO1xuICAgICAgdGhpcy5kaXJlY3RVcGxvYWREYXRhID0gZGlyZWN0X3VwbG9hZDtcbiAgICAgIHRoaXMuY2FsbGJhY2sobnVsbCwgdGhpcy50b0pTT04oKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVxdWVzdERpZEVycm9yKGV2ZW50KTtcbiAgICB9XG4gIH1cbiAgcmVxdWVzdERpZEVycm9yKGV2ZW50KSB7XG4gICAgdGhpcy5jYWxsYmFjayhgRXJyb3IgY3JlYXRpbmcgQmxvYiBmb3IgXCIke3RoaXMuZmlsZS5uYW1lfVwiLiBTdGF0dXM6ICR7dGhpcy5zdGF0dXN9YCk7XG4gIH1cbiAgdG9KU09OKCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuYXR0cmlidXRlcykge1xuICAgICAgcmVzdWx0W2tleV0gPSB0aGlzLmF0dHJpYnV0ZXNba2V5XTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufVxuXG5jbGFzcyBCbG9iVXBsb2FkIHtcbiAgY29uc3RydWN0b3IoYmxvYikge1xuICAgIHRoaXMuYmxvYiA9IGJsb2I7XG4gICAgdGhpcy5maWxlID0gYmxvYi5maWxlO1xuICAgIGNvbnN0IHt1cmw6IHVybCwgaGVhZGVyczogaGVhZGVyc30gPSBibG9iLmRpcmVjdFVwbG9hZERhdGE7XG4gICAgdGhpcy54aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3Q7XG4gICAgdGhpcy54aHIub3BlbihcIlBVVFwiLCB1cmwsIHRydWUpO1xuICAgIHRoaXMueGhyLnJlc3BvbnNlVHlwZSA9IFwidGV4dFwiO1xuICAgIGZvciAoY29uc3Qga2V5IGluIGhlYWRlcnMpIHtcbiAgICAgIHRoaXMueGhyLnNldFJlcXVlc3RIZWFkZXIoa2V5LCBoZWFkZXJzW2tleV0pO1xuICAgIH1cbiAgICB0aGlzLnhoci5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoZXZlbnQgPT4gdGhpcy5yZXF1ZXN0RGlkTG9hZChldmVudCkpKTtcbiAgICB0aGlzLnhoci5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgKGV2ZW50ID0+IHRoaXMucmVxdWVzdERpZEVycm9yKGV2ZW50KSkpO1xuICB9XG4gIGNyZWF0ZShjYWxsYmFjaykge1xuICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB0aGlzLnhoci5zZW5kKHRoaXMuZmlsZS5zbGljZSgpKTtcbiAgfVxuICByZXF1ZXN0RGlkTG9hZChldmVudCkge1xuICAgIGNvbnN0IHtzdGF0dXM6IHN0YXR1cywgcmVzcG9uc2U6IHJlc3BvbnNlfSA9IHRoaXMueGhyO1xuICAgIGlmIChzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMCkge1xuICAgICAgdGhpcy5jYWxsYmFjayhudWxsLCByZXNwb25zZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVxdWVzdERpZEVycm9yKGV2ZW50KTtcbiAgICB9XG4gIH1cbiAgcmVxdWVzdERpZEVycm9yKGV2ZW50KSB7XG4gICAgdGhpcy5jYWxsYmFjayhgRXJyb3Igc3RvcmluZyBcIiR7dGhpcy5maWxlLm5hbWV9XCIuIFN0YXR1czogJHt0aGlzLnhoci5zdGF0dXN9YCk7XG4gIH1cbn1cblxubGV0IGlkID0gMDtcblxuY2xhc3MgRGlyZWN0VXBsb2FkIHtcbiAgY29uc3RydWN0b3IoZmlsZSwgdXJsLCBkZWxlZ2F0ZSwgY3VzdG9tSGVhZGVycyA9IHt9KSB7XG4gICAgdGhpcy5pZCA9ICsraWQ7XG4gICAgdGhpcy5maWxlID0gZmlsZTtcbiAgICB0aGlzLnVybCA9IHVybDtcbiAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gICAgdGhpcy5jdXN0b21IZWFkZXJzID0gY3VzdG9tSGVhZGVycztcbiAgfVxuICBjcmVhdGUoY2FsbGJhY2spIHtcbiAgICBGaWxlQ2hlY2tzdW0uY3JlYXRlKHRoaXMuZmlsZSwgKChlcnJvciwgY2hlY2tzdW0pID0+IHtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjYWxsYmFjayhlcnJvcik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYlJlY29yZCh0aGlzLmZpbGUsIGNoZWNrc3VtLCB0aGlzLnVybCwgdGhpcy5jdXN0b21IZWFkZXJzKTtcbiAgICAgIG5vdGlmeSh0aGlzLmRlbGVnYXRlLCBcImRpcmVjdFVwbG9hZFdpbGxDcmVhdGVCbG9iV2l0aFhIUlwiLCBibG9iLnhocik7XG4gICAgICBibG9iLmNyZWF0ZSgoZXJyb3IgPT4ge1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICBjYWxsYmFjayhlcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgdXBsb2FkID0gbmV3IEJsb2JVcGxvYWQoYmxvYik7XG4gICAgICAgICAgbm90aWZ5KHRoaXMuZGVsZWdhdGUsIFwiZGlyZWN0VXBsb2FkV2lsbFN0b3JlRmlsZVdpdGhYSFJcIiwgdXBsb2FkLnhocik7XG4gICAgICAgICAgdXBsb2FkLmNyZWF0ZSgoZXJyb3IgPT4ge1xuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGJsb2IudG9KU09OKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH0pKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBub3RpZnkob2JqZWN0LCBtZXRob2ROYW1lLCAuLi5tZXNzYWdlcykge1xuICBpZiAob2JqZWN0ICYmIHR5cGVvZiBvYmplY3RbbWV0aG9kTmFtZV0gPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgcmV0dXJuIG9iamVjdFttZXRob2ROYW1lXSguLi5tZXNzYWdlcyk7XG4gIH1cbn1cblxuY2xhc3MgRGlyZWN0VXBsb2FkQ29udHJvbGxlciB7XG4gIGNvbnN0cnVjdG9yKGlucHV0LCBmaWxlKSB7XG4gICAgdGhpcy5pbnB1dCA9IGlucHV0O1xuICAgIHRoaXMuZmlsZSA9IGZpbGU7XG4gICAgdGhpcy5kaXJlY3RVcGxvYWQgPSBuZXcgRGlyZWN0VXBsb2FkKHRoaXMuZmlsZSwgdGhpcy51cmwsIHRoaXMpO1xuICAgIHRoaXMuZGlzcGF0Y2goXCJpbml0aWFsaXplXCIpO1xuICB9XG4gIHN0YXJ0KGNhbGxiYWNrKSB7XG4gICAgY29uc3QgaGlkZGVuSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgaGlkZGVuSW5wdXQudHlwZSA9IFwiaGlkZGVuXCI7XG4gICAgaGlkZGVuSW5wdXQubmFtZSA9IHRoaXMuaW5wdXQubmFtZTtcbiAgICB0aGlzLmlucHV0Lmluc2VydEFkamFjZW50RWxlbWVudChcImJlZm9yZWJlZ2luXCIsIGhpZGRlbklucHV0KTtcbiAgICB0aGlzLmRpc3BhdGNoKFwic3RhcnRcIik7XG4gICAgdGhpcy5kaXJlY3RVcGxvYWQuY3JlYXRlKCgoZXJyb3IsIGF0dHJpYnV0ZXMpID0+IHtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBoaWRkZW5JbnB1dC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGhpZGRlbklucHV0KTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEVycm9yKGVycm9yKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGhpZGRlbklucHV0LnZhbHVlID0gYXR0cmlidXRlcy5zaWduZWRfaWQ7XG4gICAgICB9XG4gICAgICB0aGlzLmRpc3BhdGNoKFwiZW5kXCIpO1xuICAgICAgY2FsbGJhY2soZXJyb3IpO1xuICAgIH0pKTtcbiAgfVxuICB1cGxvYWRSZXF1ZXN0RGlkUHJvZ3Jlc3MoZXZlbnQpIHtcbiAgICBjb25zdCBwcm9ncmVzcyA9IGV2ZW50LmxvYWRlZCAvIGV2ZW50LnRvdGFsICogMTAwO1xuICAgIGlmIChwcm9ncmVzcykge1xuICAgICAgdGhpcy5kaXNwYXRjaChcInByb2dyZXNzXCIsIHtcbiAgICAgICAgcHJvZ3Jlc3M6IHByb2dyZXNzXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgZ2V0IHVybCgpIHtcbiAgICByZXR1cm4gdGhpcy5pbnB1dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWRpcmVjdC11cGxvYWQtdXJsXCIpO1xuICB9XG4gIGRpc3BhdGNoKG5hbWUsIGRldGFpbCA9IHt9KSB7XG4gICAgZGV0YWlsLmZpbGUgPSB0aGlzLmZpbGU7XG4gICAgZGV0YWlsLmlkID0gdGhpcy5kaXJlY3RVcGxvYWQuaWQ7XG4gICAgcmV0dXJuIGRpc3BhdGNoRXZlbnQodGhpcy5pbnB1dCwgYGRpcmVjdC11cGxvYWQ6JHtuYW1lfWAsIHtcbiAgICAgIGRldGFpbDogZGV0YWlsXG4gICAgfSk7XG4gIH1cbiAgZGlzcGF0Y2hFcnJvcihlcnJvcikge1xuICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5kaXNwYXRjaChcImVycm9yXCIsIHtcbiAgICAgIGVycm9yOiBlcnJvclxuICAgIH0pO1xuICAgIGlmICghZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgYWxlcnQoZXJyb3IpO1xuICAgIH1cbiAgfVxuICBkaXJlY3RVcGxvYWRXaWxsQ3JlYXRlQmxvYldpdGhYSFIoeGhyKSB7XG4gICAgdGhpcy5kaXNwYXRjaChcImJlZm9yZS1ibG9iLXJlcXVlc3RcIiwge1xuICAgICAgeGhyOiB4aHJcbiAgICB9KTtcbiAgfVxuICBkaXJlY3RVcGxvYWRXaWxsU3RvcmVGaWxlV2l0aFhIUih4aHIpIHtcbiAgICB0aGlzLmRpc3BhdGNoKFwiYmVmb3JlLXN0b3JhZ2UtcmVxdWVzdFwiLCB7XG4gICAgICB4aHI6IHhoclxuICAgIH0pO1xuICAgIHhoci51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcihcInByb2dyZXNzXCIsIChldmVudCA9PiB0aGlzLnVwbG9hZFJlcXVlc3REaWRQcm9ncmVzcyhldmVudCkpKTtcbiAgfVxufVxuXG5jb25zdCBpbnB1dFNlbGVjdG9yID0gXCJpbnB1dFt0eXBlPWZpbGVdW2RhdGEtZGlyZWN0LXVwbG9hZC11cmxdOm5vdChbZGlzYWJsZWRdKVwiO1xuXG5jbGFzcyBEaXJlY3RVcGxvYWRzQ29udHJvbGxlciB7XG4gIGNvbnN0cnVjdG9yKGZvcm0pIHtcbiAgICB0aGlzLmZvcm0gPSBmb3JtO1xuICAgIHRoaXMuaW5wdXRzID0gZmluZEVsZW1lbnRzKGZvcm0sIGlucHV0U2VsZWN0b3IpLmZpbHRlcigoaW5wdXQgPT4gaW5wdXQuZmlsZXMubGVuZ3RoKSk7XG4gIH1cbiAgc3RhcnQoY2FsbGJhY2spIHtcbiAgICBjb25zdCBjb250cm9sbGVycyA9IHRoaXMuY3JlYXRlRGlyZWN0VXBsb2FkQ29udHJvbGxlcnMoKTtcbiAgICBjb25zdCBzdGFydE5leHRDb250cm9sbGVyID0gKCkgPT4ge1xuICAgICAgY29uc3QgY29udHJvbGxlciA9IGNvbnRyb2xsZXJzLnNoaWZ0KCk7XG4gICAgICBpZiAoY29udHJvbGxlcikge1xuICAgICAgICBjb250cm9sbGVyLnN0YXJ0KChlcnJvciA9PiB7XG4gICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhlcnJvcik7XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoKFwiZW5kXCIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdGFydE5leHRDb250cm9sbGVyKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoKFwiZW5kXCIpO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5kaXNwYXRjaChcInN0YXJ0XCIpO1xuICAgIHN0YXJ0TmV4dENvbnRyb2xsZXIoKTtcbiAgfVxuICBjcmVhdGVEaXJlY3RVcGxvYWRDb250cm9sbGVycygpIHtcbiAgICBjb25zdCBjb250cm9sbGVycyA9IFtdO1xuICAgIHRoaXMuaW5wdXRzLmZvckVhY2goKGlucHV0ID0+IHtcbiAgICAgIHRvQXJyYXkoaW5wdXQuZmlsZXMpLmZvckVhY2goKGZpbGUgPT4ge1xuICAgICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IERpcmVjdFVwbG9hZENvbnRyb2xsZXIoaW5wdXQsIGZpbGUpO1xuICAgICAgICBjb250cm9sbGVycy5wdXNoKGNvbnRyb2xsZXIpO1xuICAgICAgfSkpO1xuICAgIH0pKTtcbiAgICByZXR1cm4gY29udHJvbGxlcnM7XG4gIH1cbiAgZGlzcGF0Y2gobmFtZSwgZGV0YWlsID0ge30pIHtcbiAgICByZXR1cm4gZGlzcGF0Y2hFdmVudCh0aGlzLmZvcm0sIGBkaXJlY3QtdXBsb2Fkczoke25hbWV9YCwge1xuICAgICAgZGV0YWlsOiBkZXRhaWxcbiAgICB9KTtcbiAgfVxufVxuXG5jb25zdCBwcm9jZXNzaW5nQXR0cmlidXRlID0gXCJkYXRhLWRpcmVjdC11cGxvYWRzLXByb2Nlc3NpbmdcIjtcblxuY29uc3Qgc3VibWl0QnV0dG9uc0J5Rm9ybSA9IG5ldyBXZWFrTWFwO1xuXG5sZXQgc3RhcnRlZCA9IGZhbHNlO1xuXG5mdW5jdGlvbiBzdGFydCgpIHtcbiAgaWYgKCFzdGFydGVkKSB7XG4gICAgc3RhcnRlZCA9IHRydWU7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGRpZENsaWNrLCB0cnVlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGRpZFN1Ym1pdEZvcm0sIHRydWUpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJhamF4OmJlZm9yZVwiLCBkaWRTdWJtaXRSZW1vdGVFbGVtZW50KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBkaWRDbGljayhldmVudCkge1xuICBjb25zdCBidXR0b24gPSBldmVudC50YXJnZXQuY2xvc2VzdChcImJ1dHRvbiwgaW5wdXRcIik7XG4gIGlmIChidXR0b24gJiYgYnV0dG9uLnR5cGUgPT09IFwic3VibWl0XCIgJiYgYnV0dG9uLmZvcm0pIHtcbiAgICBzdWJtaXRCdXR0b25zQnlGb3JtLnNldChidXR0b24uZm9ybSwgYnV0dG9uKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBkaWRTdWJtaXRGb3JtKGV2ZW50KSB7XG4gIGhhbmRsZUZvcm1TdWJtaXNzaW9uRXZlbnQoZXZlbnQpO1xufVxuXG5mdW5jdGlvbiBkaWRTdWJtaXRSZW1vdGVFbGVtZW50KGV2ZW50KSB7XG4gIGlmIChldmVudC50YXJnZXQudGFnTmFtZSA9PSBcIkZPUk1cIikge1xuICAgIGhhbmRsZUZvcm1TdWJtaXNzaW9uRXZlbnQoZXZlbnQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUZvcm1TdWJtaXNzaW9uRXZlbnQoZXZlbnQpIHtcbiAgY29uc3QgZm9ybSA9IGV2ZW50LnRhcmdldDtcbiAgaWYgKGZvcm0uaGFzQXR0cmlidXRlKHByb2Nlc3NpbmdBdHRyaWJ1dGUpKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgY29udHJvbGxlciA9IG5ldyBEaXJlY3RVcGxvYWRzQ29udHJvbGxlcihmb3JtKTtcbiAgY29uc3Qge2lucHV0czogaW5wdXRzfSA9IGNvbnRyb2xsZXI7XG4gIGlmIChpbnB1dHMubGVuZ3RoKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBmb3JtLnNldEF0dHJpYnV0ZShwcm9jZXNzaW5nQXR0cmlidXRlLCBcIlwiKTtcbiAgICBpbnB1dHMuZm9yRWFjaChkaXNhYmxlKTtcbiAgICBjb250cm9sbGVyLnN0YXJ0KChlcnJvciA9PiB7XG4gICAgICBmb3JtLnJlbW92ZUF0dHJpYnV0ZShwcm9jZXNzaW5nQXR0cmlidXRlKTtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBpbnB1dHMuZm9yRWFjaChlbmFibGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3VibWl0Rm9ybShmb3JtKTtcbiAgICAgIH1cbiAgICB9KSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc3VibWl0Rm9ybShmb3JtKSB7XG4gIGxldCBidXR0b24gPSBzdWJtaXRCdXR0b25zQnlGb3JtLmdldChmb3JtKSB8fCBmaW5kRWxlbWVudChmb3JtLCBcImlucHV0W3R5cGU9c3VibWl0XSwgYnV0dG9uW3R5cGU9c3VibWl0XVwiKTtcbiAgaWYgKGJ1dHRvbikge1xuICAgIGNvbnN0IHtkaXNhYmxlZDogZGlzYWJsZWR9ID0gYnV0dG9uO1xuICAgIGJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIGJ1dHRvbi5mb2N1cygpO1xuICAgIGJ1dHRvbi5jbGljaygpO1xuICAgIGJ1dHRvbi5kaXNhYmxlZCA9IGRpc2FibGVkO1xuICB9IGVsc2Uge1xuICAgIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBidXR0b24udHlwZSA9IFwic3VibWl0XCI7XG4gICAgYnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICBmb3JtLmFwcGVuZENoaWxkKGJ1dHRvbik7XG4gICAgYnV0dG9uLmNsaWNrKCk7XG4gICAgZm9ybS5yZW1vdmVDaGlsZChidXR0b24pO1xuICB9XG4gIHN1Ym1pdEJ1dHRvbnNCeUZvcm0uZGVsZXRlKGZvcm0pO1xufVxuXG5mdW5jdGlvbiBkaXNhYmxlKGlucHV0KSB7XG4gIGlucHV0LmRpc2FibGVkID0gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gZW5hYmxlKGlucHV0KSB7XG4gIGlucHV0LmRpc2FibGVkID0gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGF1dG9zdGFydCgpIHtcbiAgaWYgKHdpbmRvdy5BY3RpdmVTdG9yYWdlKSB7XG4gICAgc3RhcnQoKTtcbiAgfVxufVxuXG5zZXRUaW1lb3V0KGF1dG9zdGFydCwgMSk7XG5cbmV4cG9ydCB7IERpcmVjdFVwbG9hZCwgRGlyZWN0VXBsb2FkQ29udHJvbGxlciwgRGlyZWN0VXBsb2Fkc0NvbnRyb2xsZXIsIGRpc3BhdGNoRXZlbnQsIHN0YXJ0IH07XG4iLCAiLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL3NjaGVkdWxlci5qc1xudmFyIGZsdXNoUGVuZGluZyA9IGZhbHNlO1xudmFyIGZsdXNoaW5nID0gZmFsc2U7XG52YXIgcXVldWUgPSBbXTtcbnZhciBsYXN0Rmx1c2hlZEluZGV4ID0gLTE7XG5mdW5jdGlvbiBzY2hlZHVsZXIoY2FsbGJhY2spIHtcbiAgcXVldWVKb2IoY2FsbGJhY2spO1xufVxuZnVuY3Rpb24gcXVldWVKb2Ioam9iKSB7XG4gIGlmICghcXVldWUuaW5jbHVkZXMoam9iKSlcbiAgICBxdWV1ZS5wdXNoKGpvYik7XG4gIHF1ZXVlRmx1c2goKTtcbn1cbmZ1bmN0aW9uIGRlcXVldWVKb2Ioam9iKSB7XG4gIGxldCBpbmRleCA9IHF1ZXVlLmluZGV4T2Yoam9iKTtcbiAgaWYgKGluZGV4ICE9PSAtMSAmJiBpbmRleCA+IGxhc3RGbHVzaGVkSW5kZXgpXG4gICAgcXVldWUuc3BsaWNlKGluZGV4LCAxKTtcbn1cbmZ1bmN0aW9uIHF1ZXVlRmx1c2goKSB7XG4gIGlmICghZmx1c2hpbmcgJiYgIWZsdXNoUGVuZGluZykge1xuICAgIGZsdXNoUGVuZGluZyA9IHRydWU7XG4gICAgcXVldWVNaWNyb3Rhc2soZmx1c2hKb2JzKTtcbiAgfVxufVxuZnVuY3Rpb24gZmx1c2hKb2JzKCkge1xuICBmbHVzaFBlbmRpbmcgPSBmYWxzZTtcbiAgZmx1c2hpbmcgPSB0cnVlO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgcXVldWVbaV0oKTtcbiAgICBsYXN0Rmx1c2hlZEluZGV4ID0gaTtcbiAgfVxuICBxdWV1ZS5sZW5ndGggPSAwO1xuICBsYXN0Rmx1c2hlZEluZGV4ID0gLTE7XG4gIGZsdXNoaW5nID0gZmFsc2U7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9yZWFjdGl2aXR5LmpzXG52YXIgcmVhY3RpdmU7XG52YXIgZWZmZWN0O1xudmFyIHJlbGVhc2U7XG52YXIgcmF3O1xudmFyIHNob3VsZFNjaGVkdWxlID0gdHJ1ZTtcbmZ1bmN0aW9uIGRpc2FibGVFZmZlY3RTY2hlZHVsaW5nKGNhbGxiYWNrKSB7XG4gIHNob3VsZFNjaGVkdWxlID0gZmFsc2U7XG4gIGNhbGxiYWNrKCk7XG4gIHNob3VsZFNjaGVkdWxlID0gdHJ1ZTtcbn1cbmZ1bmN0aW9uIHNldFJlYWN0aXZpdHlFbmdpbmUoZW5naW5lKSB7XG4gIHJlYWN0aXZlID0gZW5naW5lLnJlYWN0aXZlO1xuICByZWxlYXNlID0gZW5naW5lLnJlbGVhc2U7XG4gIGVmZmVjdCA9IChjYWxsYmFjaykgPT4gZW5naW5lLmVmZmVjdChjYWxsYmFjaywgeyBzY2hlZHVsZXI6ICh0YXNrKSA9PiB7XG4gICAgaWYgKHNob3VsZFNjaGVkdWxlKSB7XG4gICAgICBzY2hlZHVsZXIodGFzayk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhc2soKTtcbiAgICB9XG4gIH0gfSk7XG4gIHJhdyA9IGVuZ2luZS5yYXc7XG59XG5mdW5jdGlvbiBvdmVycmlkZUVmZmVjdChvdmVycmlkZSkge1xuICBlZmZlY3QgPSBvdmVycmlkZTtcbn1cbmZ1bmN0aW9uIGVsZW1lbnRCb3VuZEVmZmVjdChlbCkge1xuICBsZXQgY2xlYW51cDIgPSAoKSA9PiB7XG4gIH07XG4gIGxldCB3cmFwcGVkRWZmZWN0ID0gKGNhbGxiYWNrKSA9PiB7XG4gICAgbGV0IGVmZmVjdFJlZmVyZW5jZSA9IGVmZmVjdChjYWxsYmFjayk7XG4gICAgaWYgKCFlbC5feF9lZmZlY3RzKSB7XG4gICAgICBlbC5feF9lZmZlY3RzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICAgIGVsLl94X3J1bkVmZmVjdHMgPSAoKSA9PiB7XG4gICAgICAgIGVsLl94X2VmZmVjdHMuZm9yRWFjaCgoaSkgPT4gaSgpKTtcbiAgICAgIH07XG4gICAgfVxuICAgIGVsLl94X2VmZmVjdHMuYWRkKGVmZmVjdFJlZmVyZW5jZSk7XG4gICAgY2xlYW51cDIgPSAoKSA9PiB7XG4gICAgICBpZiAoZWZmZWN0UmVmZXJlbmNlID09PSB2b2lkIDApXG4gICAgICAgIHJldHVybjtcbiAgICAgIGVsLl94X2VmZmVjdHMuZGVsZXRlKGVmZmVjdFJlZmVyZW5jZSk7XG4gICAgICByZWxlYXNlKGVmZmVjdFJlZmVyZW5jZSk7XG4gICAgfTtcbiAgICByZXR1cm4gZWZmZWN0UmVmZXJlbmNlO1xuICB9O1xuICByZXR1cm4gW3dyYXBwZWRFZmZlY3QsICgpID0+IHtcbiAgICBjbGVhbnVwMigpO1xuICB9XTtcbn1cbmZ1bmN0aW9uIHdhdGNoKGdldHRlciwgY2FsbGJhY2spIHtcbiAgbGV0IGZpcnN0VGltZSA9IHRydWU7XG4gIGxldCBvbGRWYWx1ZTtcbiAgbGV0IGVmZmVjdFJlZmVyZW5jZSA9IGVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IHZhbHVlID0gZ2V0dGVyKCk7XG4gICAgSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgIGlmICghZmlyc3RUaW1lKSB7XG4gICAgICBxdWV1ZU1pY3JvdGFzaygoKSA9PiB7XG4gICAgICAgIGNhbGxiYWNrKHZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgICAgIG9sZFZhbHVlID0gdmFsdWU7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgb2xkVmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgZmlyc3RUaW1lID0gZmFsc2U7XG4gIH0pO1xuICByZXR1cm4gKCkgPT4gcmVsZWFzZShlZmZlY3RSZWZlcmVuY2UpO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvbXV0YXRpb24uanNcbnZhciBvbkF0dHJpYnV0ZUFkZGVkcyA9IFtdO1xudmFyIG9uRWxSZW1vdmVkcyA9IFtdO1xudmFyIG9uRWxBZGRlZHMgPSBbXTtcbmZ1bmN0aW9uIG9uRWxBZGRlZChjYWxsYmFjaykge1xuICBvbkVsQWRkZWRzLnB1c2goY2FsbGJhY2spO1xufVxuZnVuY3Rpb24gb25FbFJlbW92ZWQoZWwsIGNhbGxiYWNrKSB7XG4gIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGlmICghZWwuX3hfY2xlYW51cHMpXG4gICAgICBlbC5feF9jbGVhbnVwcyA9IFtdO1xuICAgIGVsLl94X2NsZWFudXBzLnB1c2goY2FsbGJhY2spO1xuICB9IGVsc2Uge1xuICAgIGNhbGxiYWNrID0gZWw7XG4gICAgb25FbFJlbW92ZWRzLnB1c2goY2FsbGJhY2spO1xuICB9XG59XG5mdW5jdGlvbiBvbkF0dHJpYnV0ZXNBZGRlZChjYWxsYmFjaykge1xuICBvbkF0dHJpYnV0ZUFkZGVkcy5wdXNoKGNhbGxiYWNrKTtcbn1cbmZ1bmN0aW9uIG9uQXR0cmlidXRlUmVtb3ZlZChlbCwgbmFtZSwgY2FsbGJhY2spIHtcbiAgaWYgKCFlbC5feF9hdHRyaWJ1dGVDbGVhbnVwcylcbiAgICBlbC5feF9hdHRyaWJ1dGVDbGVhbnVwcyA9IHt9O1xuICBpZiAoIWVsLl94X2F0dHJpYnV0ZUNsZWFudXBzW25hbWVdKVxuICAgIGVsLl94X2F0dHJpYnV0ZUNsZWFudXBzW25hbWVdID0gW107XG4gIGVsLl94X2F0dHJpYnV0ZUNsZWFudXBzW25hbWVdLnB1c2goY2FsbGJhY2spO1xufVxuZnVuY3Rpb24gY2xlYW51cEF0dHJpYnV0ZXMoZWwsIG5hbWVzKSB7XG4gIGlmICghZWwuX3hfYXR0cmlidXRlQ2xlYW51cHMpXG4gICAgcmV0dXJuO1xuICBPYmplY3QuZW50cmllcyhlbC5feF9hdHRyaWJ1dGVDbGVhbnVwcykuZm9yRWFjaCgoW25hbWUsIHZhbHVlXSkgPT4ge1xuICAgIGlmIChuYW1lcyA9PT0gdm9pZCAwIHx8IG5hbWVzLmluY2x1ZGVzKG5hbWUpKSB7XG4gICAgICB2YWx1ZS5mb3JFYWNoKChpKSA9PiBpKCkpO1xuICAgICAgZGVsZXRlIGVsLl94X2F0dHJpYnV0ZUNsZWFudXBzW25hbWVdO1xuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBjbGVhbnVwRWxlbWVudChlbCkge1xuICBlbC5feF9lZmZlY3RzPy5mb3JFYWNoKGRlcXVldWVKb2IpO1xuICB3aGlsZSAoZWwuX3hfY2xlYW51cHM/Lmxlbmd0aClcbiAgICBlbC5feF9jbGVhbnVwcy5wb3AoKSgpO1xufVxudmFyIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIob25NdXRhdGUpO1xudmFyIGN1cnJlbnRseU9ic2VydmluZyA9IGZhbHNlO1xuZnVuY3Rpb24gc3RhcnRPYnNlcnZpbmdNdXRhdGlvbnMoKSB7XG4gIG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQsIHsgc3VidHJlZTogdHJ1ZSwgY2hpbGRMaXN0OiB0cnVlLCBhdHRyaWJ1dGVzOiB0cnVlLCBhdHRyaWJ1dGVPbGRWYWx1ZTogdHJ1ZSB9KTtcbiAgY3VycmVudGx5T2JzZXJ2aW5nID0gdHJ1ZTtcbn1cbmZ1bmN0aW9uIHN0b3BPYnNlcnZpbmdNdXRhdGlvbnMoKSB7XG4gIGZsdXNoT2JzZXJ2ZXIoKTtcbiAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICBjdXJyZW50bHlPYnNlcnZpbmcgPSBmYWxzZTtcbn1cbnZhciBxdWV1ZWRNdXRhdGlvbnMgPSBbXTtcbmZ1bmN0aW9uIGZsdXNoT2JzZXJ2ZXIoKSB7XG4gIGxldCByZWNvcmRzID0gb2JzZXJ2ZXIudGFrZVJlY29yZHMoKTtcbiAgcXVldWVkTXV0YXRpb25zLnB1c2goKCkgPT4gcmVjb3Jkcy5sZW5ndGggPiAwICYmIG9uTXV0YXRlKHJlY29yZHMpKTtcbiAgbGV0IHF1ZXVlTGVuZ3RoV2hlblRyaWdnZXJlZCA9IHF1ZXVlZE11dGF0aW9ucy5sZW5ndGg7XG4gIHF1ZXVlTWljcm90YXNrKCgpID0+IHtcbiAgICBpZiAocXVldWVkTXV0YXRpb25zLmxlbmd0aCA9PT0gcXVldWVMZW5ndGhXaGVuVHJpZ2dlcmVkKSB7XG4gICAgICB3aGlsZSAocXVldWVkTXV0YXRpb25zLmxlbmd0aCA+IDApXG4gICAgICAgIHF1ZXVlZE11dGF0aW9ucy5zaGlmdCgpKCk7XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIG11dGF0ZURvbShjYWxsYmFjaykge1xuICBpZiAoIWN1cnJlbnRseU9ic2VydmluZylcbiAgICByZXR1cm4gY2FsbGJhY2soKTtcbiAgc3RvcE9ic2VydmluZ011dGF0aW9ucygpO1xuICBsZXQgcmVzdWx0ID0gY2FsbGJhY2soKTtcbiAgc3RhcnRPYnNlcnZpbmdNdXRhdGlvbnMoKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cbnZhciBpc0NvbGxlY3RpbmcgPSBmYWxzZTtcbnZhciBkZWZlcnJlZE11dGF0aW9ucyA9IFtdO1xuZnVuY3Rpb24gZGVmZXJNdXRhdGlvbnMoKSB7XG4gIGlzQ29sbGVjdGluZyA9IHRydWU7XG59XG5mdW5jdGlvbiBmbHVzaEFuZFN0b3BEZWZlcnJpbmdNdXRhdGlvbnMoKSB7XG4gIGlzQ29sbGVjdGluZyA9IGZhbHNlO1xuICBvbk11dGF0ZShkZWZlcnJlZE11dGF0aW9ucyk7XG4gIGRlZmVycmVkTXV0YXRpb25zID0gW107XG59XG5mdW5jdGlvbiBvbk11dGF0ZShtdXRhdGlvbnMpIHtcbiAgaWYgKGlzQ29sbGVjdGluZykge1xuICAgIGRlZmVycmVkTXV0YXRpb25zID0gZGVmZXJyZWRNdXRhdGlvbnMuY29uY2F0KG11dGF0aW9ucyk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxldCBhZGRlZE5vZGVzID0gW107XG4gIGxldCByZW1vdmVkTm9kZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICBsZXQgYWRkZWRBdHRyaWJ1dGVzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgbGV0IHJlbW92ZWRBdHRyaWJ1dGVzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBtdXRhdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAobXV0YXRpb25zW2ldLnRhcmdldC5feF9pZ25vcmVNdXRhdGlvbk9ic2VydmVyKVxuICAgICAgY29udGludWU7XG4gICAgaWYgKG11dGF0aW9uc1tpXS50eXBlID09PSBcImNoaWxkTGlzdFwiKSB7XG4gICAgICBtdXRhdGlvbnNbaV0ucmVtb3ZlZE5vZGVzLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgIT09IDEpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoIW5vZGUuX3hfbWFya2VyKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmVtb3ZlZE5vZGVzLmFkZChub2RlKTtcbiAgICAgIH0pO1xuICAgICAgbXV0YXRpb25zW2ldLmFkZGVkTm9kZXMuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSAhPT0gMSlcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChyZW1vdmVkTm9kZXMuaGFzKG5vZGUpKSB7XG4gICAgICAgICAgcmVtb3ZlZE5vZGVzLmRlbGV0ZShub2RlKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGUuX3hfbWFya2VyKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgYWRkZWROb2Rlcy5wdXNoKG5vZGUpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChtdXRhdGlvbnNbaV0udHlwZSA9PT0gXCJhdHRyaWJ1dGVzXCIpIHtcbiAgICAgIGxldCBlbCA9IG11dGF0aW9uc1tpXS50YXJnZXQ7XG4gICAgICBsZXQgbmFtZSA9IG11dGF0aW9uc1tpXS5hdHRyaWJ1dGVOYW1lO1xuICAgICAgbGV0IG9sZFZhbHVlID0gbXV0YXRpb25zW2ldLm9sZFZhbHVlO1xuICAgICAgbGV0IGFkZDIgPSAoKSA9PiB7XG4gICAgICAgIGlmICghYWRkZWRBdHRyaWJ1dGVzLmhhcyhlbCkpXG4gICAgICAgICAgYWRkZWRBdHRyaWJ1dGVzLnNldChlbCwgW10pO1xuICAgICAgICBhZGRlZEF0dHJpYnV0ZXMuZ2V0KGVsKS5wdXNoKHsgbmFtZSwgdmFsdWU6IGVsLmdldEF0dHJpYnV0ZShuYW1lKSB9KTtcbiAgICAgIH07XG4gICAgICBsZXQgcmVtb3ZlID0gKCkgPT4ge1xuICAgICAgICBpZiAoIXJlbW92ZWRBdHRyaWJ1dGVzLmhhcyhlbCkpXG4gICAgICAgICAgcmVtb3ZlZEF0dHJpYnV0ZXMuc2V0KGVsLCBbXSk7XG4gICAgICAgIHJlbW92ZWRBdHRyaWJ1dGVzLmdldChlbCkucHVzaChuYW1lKTtcbiAgICAgIH07XG4gICAgICBpZiAoZWwuaGFzQXR0cmlidXRlKG5hbWUpICYmIG9sZFZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIGFkZDIoKTtcbiAgICAgIH0gZWxzZSBpZiAoZWwuaGFzQXR0cmlidXRlKG5hbWUpKSB7XG4gICAgICAgIHJlbW92ZSgpO1xuICAgICAgICBhZGQyKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmVtb3ZlZEF0dHJpYnV0ZXMuZm9yRWFjaCgoYXR0cnMsIGVsKSA9PiB7XG4gICAgY2xlYW51cEF0dHJpYnV0ZXMoZWwsIGF0dHJzKTtcbiAgfSk7XG4gIGFkZGVkQXR0cmlidXRlcy5mb3JFYWNoKChhdHRycywgZWwpID0+IHtcbiAgICBvbkF0dHJpYnV0ZUFkZGVkcy5mb3JFYWNoKChpKSA9PiBpKGVsLCBhdHRycykpO1xuICB9KTtcbiAgZm9yIChsZXQgbm9kZSBvZiByZW1vdmVkTm9kZXMpIHtcbiAgICBpZiAoYWRkZWROb2Rlcy5zb21lKChpKSA9PiBpLmNvbnRhaW5zKG5vZGUpKSlcbiAgICAgIGNvbnRpbnVlO1xuICAgIG9uRWxSZW1vdmVkcy5mb3JFYWNoKChpKSA9PiBpKG5vZGUpKTtcbiAgfVxuICBmb3IgKGxldCBub2RlIG9mIGFkZGVkTm9kZXMpIHtcbiAgICBpZiAoIW5vZGUuaXNDb25uZWN0ZWQpXG4gICAgICBjb250aW51ZTtcbiAgICBvbkVsQWRkZWRzLmZvckVhY2goKGkpID0+IGkobm9kZSkpO1xuICB9XG4gIGFkZGVkTm9kZXMgPSBudWxsO1xuICByZW1vdmVkTm9kZXMgPSBudWxsO1xuICBhZGRlZEF0dHJpYnV0ZXMgPSBudWxsO1xuICByZW1vdmVkQXR0cmlidXRlcyA9IG51bGw7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9zY29wZS5qc1xuZnVuY3Rpb24gc2NvcGUobm9kZSkge1xuICByZXR1cm4gbWVyZ2VQcm94aWVzKGNsb3Nlc3REYXRhU3RhY2sobm9kZSkpO1xufVxuZnVuY3Rpb24gYWRkU2NvcGVUb05vZGUobm9kZSwgZGF0YTIsIHJlZmVyZW5jZU5vZGUpIHtcbiAgbm9kZS5feF9kYXRhU3RhY2sgPSBbZGF0YTIsIC4uLmNsb3Nlc3REYXRhU3RhY2socmVmZXJlbmNlTm9kZSB8fCBub2RlKV07XG4gIHJldHVybiAoKSA9PiB7XG4gICAgbm9kZS5feF9kYXRhU3RhY2sgPSBub2RlLl94X2RhdGFTdGFjay5maWx0ZXIoKGkpID0+IGkgIT09IGRhdGEyKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGNsb3Nlc3REYXRhU3RhY2sobm9kZSkge1xuICBpZiAobm9kZS5feF9kYXRhU3RhY2spXG4gICAgcmV0dXJuIG5vZGUuX3hfZGF0YVN0YWNrO1xuICBpZiAodHlwZW9mIFNoYWRvd1Jvb3QgPT09IFwiZnVuY3Rpb25cIiAmJiBub2RlIGluc3RhbmNlb2YgU2hhZG93Um9vdCkge1xuICAgIHJldHVybiBjbG9zZXN0RGF0YVN0YWNrKG5vZGUuaG9zdCk7XG4gIH1cbiAgaWYgKCFub2RlLnBhcmVudE5vZGUpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgcmV0dXJuIGNsb3Nlc3REYXRhU3RhY2sobm9kZS5wYXJlbnROb2RlKTtcbn1cbmZ1bmN0aW9uIG1lcmdlUHJveGllcyhvYmplY3RzKSB7XG4gIHJldHVybiBuZXcgUHJveHkoeyBvYmplY3RzIH0sIG1lcmdlUHJveHlUcmFwKTtcbn1cbnZhciBtZXJnZVByb3h5VHJhcCA9IHtcbiAgb3duS2V5cyh7IG9iamVjdHMgfSkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKFxuICAgICAgbmV3IFNldChvYmplY3RzLmZsYXRNYXAoKGkpID0+IE9iamVjdC5rZXlzKGkpKSlcbiAgICApO1xuICB9LFxuICBoYXMoeyBvYmplY3RzIH0sIG5hbWUpIHtcbiAgICBpZiAobmFtZSA9PSBTeW1ib2wudW5zY29wYWJsZXMpXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIG9iamVjdHMuc29tZShcbiAgICAgIChvYmopID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIG5hbWUpIHx8IFJlZmxlY3QuaGFzKG9iaiwgbmFtZSlcbiAgICApO1xuICB9LFxuICBnZXQoeyBvYmplY3RzIH0sIG5hbWUsIHRoaXNQcm94eSkge1xuICAgIGlmIChuYW1lID09IFwidG9KU09OXCIpXG4gICAgICByZXR1cm4gY29sbGFwc2VQcm94aWVzO1xuICAgIHJldHVybiBSZWZsZWN0LmdldChcbiAgICAgIG9iamVjdHMuZmluZChcbiAgICAgICAgKG9iaikgPT4gUmVmbGVjdC5oYXMob2JqLCBuYW1lKVxuICAgICAgKSB8fCB7fSxcbiAgICAgIG5hbWUsXG4gICAgICB0aGlzUHJveHlcbiAgICApO1xuICB9LFxuICBzZXQoeyBvYmplY3RzIH0sIG5hbWUsIHZhbHVlLCB0aGlzUHJveHkpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBvYmplY3RzLmZpbmQoXG4gICAgICAob2JqKSA9PiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBuYW1lKVxuICAgICkgfHwgb2JqZWN0c1tvYmplY3RzLmxlbmd0aCAtIDFdO1xuICAgIGNvbnN0IGRlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwgbmFtZSk7XG4gICAgaWYgKGRlc2NyaXB0b3I/LnNldCAmJiBkZXNjcmlwdG9yPy5nZXQpXG4gICAgICByZXR1cm4gZGVzY3JpcHRvci5zZXQuY2FsbCh0aGlzUHJveHksIHZhbHVlKSB8fCB0cnVlO1xuICAgIHJldHVybiBSZWZsZWN0LnNldCh0YXJnZXQsIG5hbWUsIHZhbHVlKTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNvbGxhcHNlUHJveGllcygpIHtcbiAgbGV0IGtleXMgPSBSZWZsZWN0Lm93bktleXModGhpcyk7XG4gIHJldHVybiBrZXlzLnJlZHVjZSgoYWNjLCBrZXkpID0+IHtcbiAgICBhY2Nba2V5XSA9IFJlZmxlY3QuZ2V0KHRoaXMsIGtleSk7XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvaW50ZXJjZXB0b3IuanNcbmZ1bmN0aW9uIGluaXRJbnRlcmNlcHRvcnMoZGF0YTIpIHtcbiAgbGV0IGlzT2JqZWN0MiA9ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIgJiYgIUFycmF5LmlzQXJyYXkodmFsKSAmJiB2YWwgIT09IG51bGw7XG4gIGxldCByZWN1cnNlID0gKG9iaiwgYmFzZVBhdGggPSBcIlwiKSA9PiB7XG4gICAgT2JqZWN0LmVudHJpZXMoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMob2JqKSkuZm9yRWFjaCgoW2tleSwgeyB2YWx1ZSwgZW51bWVyYWJsZSB9XSkgPT4ge1xuICAgICAgaWYgKGVudW1lcmFibGUgPT09IGZhbHNlIHx8IHZhbHVlID09PSB2b2lkIDApXG4gICAgICAgIHJldHVybjtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgIT09IG51bGwgJiYgdmFsdWUuX192X3NraXApXG4gICAgICAgIHJldHVybjtcbiAgICAgIGxldCBwYXRoID0gYmFzZVBhdGggPT09IFwiXCIgPyBrZXkgOiBgJHtiYXNlUGF0aH0uJHtrZXl9YDtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgIT09IG51bGwgJiYgdmFsdWUuX3hfaW50ZXJjZXB0b3IpIHtcbiAgICAgICAgb2JqW2tleV0gPSB2YWx1ZS5pbml0aWFsaXplKGRhdGEyLCBwYXRoLCBrZXkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGlzT2JqZWN0Mih2YWx1ZSkgJiYgdmFsdWUgIT09IG9iaiAmJiAhKHZhbHVlIGluc3RhbmNlb2YgRWxlbWVudCkpIHtcbiAgICAgICAgICByZWN1cnNlKHZhbHVlLCBwYXRoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9O1xuICByZXR1cm4gcmVjdXJzZShkYXRhMik7XG59XG5mdW5jdGlvbiBpbnRlcmNlcHRvcihjYWxsYmFjaywgbXV0YXRlT2JqID0gKCkgPT4ge1xufSkge1xuICBsZXQgb2JqID0ge1xuICAgIGluaXRpYWxWYWx1ZTogdm9pZCAwLFxuICAgIF94X2ludGVyY2VwdG9yOiB0cnVlLFxuICAgIGluaXRpYWxpemUoZGF0YTIsIHBhdGgsIGtleSkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKHRoaXMuaW5pdGlhbFZhbHVlLCAoKSA9PiBnZXQoZGF0YTIsIHBhdGgpLCAodmFsdWUpID0+IHNldChkYXRhMiwgcGF0aCwgdmFsdWUpLCBwYXRoLCBrZXkpO1xuICAgIH1cbiAgfTtcbiAgbXV0YXRlT2JqKG9iaik7XG4gIHJldHVybiAoaW5pdGlhbFZhbHVlKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBpbml0aWFsVmFsdWUgPT09IFwib2JqZWN0XCIgJiYgaW5pdGlhbFZhbHVlICE9PSBudWxsICYmIGluaXRpYWxWYWx1ZS5feF9pbnRlcmNlcHRvcikge1xuICAgICAgbGV0IGluaXRpYWxpemUgPSBvYmouaW5pdGlhbGl6ZS5iaW5kKG9iaik7XG4gICAgICBvYmouaW5pdGlhbGl6ZSA9IChkYXRhMiwgcGF0aCwga2V5KSA9PiB7XG4gICAgICAgIGxldCBpbm5lclZhbHVlID0gaW5pdGlhbFZhbHVlLmluaXRpYWxpemUoZGF0YTIsIHBhdGgsIGtleSk7XG4gICAgICAgIG9iai5pbml0aWFsVmFsdWUgPSBpbm5lclZhbHVlO1xuICAgICAgICByZXR1cm4gaW5pdGlhbGl6ZShkYXRhMiwgcGF0aCwga2V5KTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIG9iai5pbml0aWFsVmFsdWUgPSBpbml0aWFsVmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH07XG59XG5mdW5jdGlvbiBnZXQob2JqLCBwYXRoKSB7XG4gIHJldHVybiBwYXRoLnNwbGl0KFwiLlwiKS5yZWR1Y2UoKGNhcnJ5LCBzZWdtZW50KSA9PiBjYXJyeVtzZWdtZW50XSwgb2JqKTtcbn1cbmZ1bmN0aW9uIHNldChvYmosIHBhdGgsIHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgcGF0aCA9PT0gXCJzdHJpbmdcIilcbiAgICBwYXRoID0gcGF0aC5zcGxpdChcIi5cIik7XG4gIGlmIChwYXRoLmxlbmd0aCA9PT0gMSlcbiAgICBvYmpbcGF0aFswXV0gPSB2YWx1ZTtcbiAgZWxzZSBpZiAocGF0aC5sZW5ndGggPT09IDApXG4gICAgdGhyb3cgZXJyb3I7XG4gIGVsc2Uge1xuICAgIGlmIChvYmpbcGF0aFswXV0pXG4gICAgICByZXR1cm4gc2V0KG9ialtwYXRoWzBdXSwgcGF0aC5zbGljZSgxKSwgdmFsdWUpO1xuICAgIGVsc2Uge1xuICAgICAgb2JqW3BhdGhbMF1dID0ge307XG4gICAgICByZXR1cm4gc2V0KG9ialtwYXRoWzBdXSwgcGF0aC5zbGljZSgxKSwgdmFsdWUpO1xuICAgIH1cbiAgfVxufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvbWFnaWNzLmpzXG52YXIgbWFnaWNzID0ge307XG5mdW5jdGlvbiBtYWdpYyhuYW1lLCBjYWxsYmFjaykge1xuICBtYWdpY3NbbmFtZV0gPSBjYWxsYmFjaztcbn1cbmZ1bmN0aW9uIGluamVjdE1hZ2ljcyhvYmosIGVsKSB7XG4gIGxldCBtZW1vaXplZFV0aWxpdGllcyA9IGdldFV0aWxpdGllcyhlbCk7XG4gIE9iamVjdC5lbnRyaWVzKG1hZ2ljcykuZm9yRWFjaCgoW25hbWUsIGNhbGxiYWNrXSkgPT4ge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGAkJHtuYW1lfWAsIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVsLCBtZW1vaXplZFV0aWxpdGllcyk7XG4gICAgICB9LFxuICAgICAgZW51bWVyYWJsZTogZmFsc2VcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBvYmo7XG59XG5mdW5jdGlvbiBnZXRVdGlsaXRpZXMoZWwpIHtcbiAgbGV0IFt1dGlsaXRpZXMsIGNsZWFudXAyXSA9IGdldEVsZW1lbnRCb3VuZFV0aWxpdGllcyhlbCk7XG4gIGxldCB1dGlscyA9IHsgaW50ZXJjZXB0b3IsIC4uLnV0aWxpdGllcyB9O1xuICBvbkVsUmVtb3ZlZChlbCwgY2xlYW51cDIpO1xuICByZXR1cm4gdXRpbHM7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy91dGlscy9lcnJvci5qc1xuZnVuY3Rpb24gdHJ5Q2F0Y2goZWwsIGV4cHJlc3Npb24sIGNhbGxiYWNrLCAuLi5hcmdzKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrKC4uLmFyZ3MpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaGFuZGxlRXJyb3IoZSwgZWwsIGV4cHJlc3Npb24pO1xuICB9XG59XG5mdW5jdGlvbiBoYW5kbGVFcnJvcihlcnJvcjIsIGVsLCBleHByZXNzaW9uID0gdm9pZCAwKSB7XG4gIGVycm9yMiA9IE9iamVjdC5hc3NpZ24oXG4gICAgZXJyb3IyID8/IHsgbWVzc2FnZTogXCJObyBlcnJvciBtZXNzYWdlIGdpdmVuLlwiIH0sXG4gICAgeyBlbCwgZXhwcmVzc2lvbiB9XG4gICk7XG4gIGNvbnNvbGUud2FybihgQWxwaW5lIEV4cHJlc3Npb24gRXJyb3I6ICR7ZXJyb3IyLm1lc3NhZ2V9XG5cbiR7ZXhwcmVzc2lvbiA/ICdFeHByZXNzaW9uOiBcIicgKyBleHByZXNzaW9uICsgJ1wiXFxuXFxuJyA6IFwiXCJ9YCwgZWwpO1xuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICB0aHJvdyBlcnJvcjI7XG4gIH0sIDApO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvZXZhbHVhdG9yLmpzXG52YXIgc2hvdWxkQXV0b0V2YWx1YXRlRnVuY3Rpb25zID0gdHJ1ZTtcbmZ1bmN0aW9uIGRvbnRBdXRvRXZhbHVhdGVGdW5jdGlvbnMoY2FsbGJhY2spIHtcbiAgbGV0IGNhY2hlID0gc2hvdWxkQXV0b0V2YWx1YXRlRnVuY3Rpb25zO1xuICBzaG91bGRBdXRvRXZhbHVhdGVGdW5jdGlvbnMgPSBmYWxzZTtcbiAgbGV0IHJlc3VsdCA9IGNhbGxiYWNrKCk7XG4gIHNob3VsZEF1dG9FdmFsdWF0ZUZ1bmN0aW9ucyA9IGNhY2hlO1xuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gZXZhbHVhdGUoZWwsIGV4cHJlc3Npb24sIGV4dHJhcyA9IHt9KSB7XG4gIGxldCByZXN1bHQ7XG4gIGV2YWx1YXRlTGF0ZXIoZWwsIGV4cHJlc3Npb24pKCh2YWx1ZSkgPT4gcmVzdWx0ID0gdmFsdWUsIGV4dHJhcyk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBldmFsdWF0ZUxhdGVyKC4uLmFyZ3MpIHtcbiAgcmV0dXJuIHRoZUV2YWx1YXRvckZ1bmN0aW9uKC4uLmFyZ3MpO1xufVxudmFyIHRoZUV2YWx1YXRvckZ1bmN0aW9uID0gbm9ybWFsRXZhbHVhdG9yO1xuZnVuY3Rpb24gc2V0RXZhbHVhdG9yKG5ld0V2YWx1YXRvcikge1xuICB0aGVFdmFsdWF0b3JGdW5jdGlvbiA9IG5ld0V2YWx1YXRvcjtcbn1cbmZ1bmN0aW9uIG5vcm1hbEV2YWx1YXRvcihlbCwgZXhwcmVzc2lvbikge1xuICBsZXQgb3ZlcnJpZGRlbk1hZ2ljcyA9IHt9O1xuICBpbmplY3RNYWdpY3Mob3ZlcnJpZGRlbk1hZ2ljcywgZWwpO1xuICBsZXQgZGF0YVN0YWNrID0gW292ZXJyaWRkZW5NYWdpY3MsIC4uLmNsb3Nlc3REYXRhU3RhY2soZWwpXTtcbiAgbGV0IGV2YWx1YXRvciA9IHR5cGVvZiBleHByZXNzaW9uID09PSBcImZ1bmN0aW9uXCIgPyBnZW5lcmF0ZUV2YWx1YXRvckZyb21GdW5jdGlvbihkYXRhU3RhY2ssIGV4cHJlc3Npb24pIDogZ2VuZXJhdGVFdmFsdWF0b3JGcm9tU3RyaW5nKGRhdGFTdGFjaywgZXhwcmVzc2lvbiwgZWwpO1xuICByZXR1cm4gdHJ5Q2F0Y2guYmluZChudWxsLCBlbCwgZXhwcmVzc2lvbiwgZXZhbHVhdG9yKTtcbn1cbmZ1bmN0aW9uIGdlbmVyYXRlRXZhbHVhdG9yRnJvbUZ1bmN0aW9uKGRhdGFTdGFjaywgZnVuYykge1xuICByZXR1cm4gKHJlY2VpdmVyID0gKCkgPT4ge1xuICB9LCB7IHNjb3BlOiBzY29wZTIgPSB7fSwgcGFyYW1zID0gW10gfSA9IHt9KSA9PiB7XG4gICAgbGV0IHJlc3VsdCA9IGZ1bmMuYXBwbHkobWVyZ2VQcm94aWVzKFtzY29wZTIsIC4uLmRhdGFTdGFja10pLCBwYXJhbXMpO1xuICAgIHJ1bklmVHlwZU9mRnVuY3Rpb24ocmVjZWl2ZXIsIHJlc3VsdCk7XG4gIH07XG59XG52YXIgZXZhbHVhdG9yTWVtbyA9IHt9O1xuZnVuY3Rpb24gZ2VuZXJhdGVGdW5jdGlvbkZyb21TdHJpbmcoZXhwcmVzc2lvbiwgZWwpIHtcbiAgaWYgKGV2YWx1YXRvck1lbW9bZXhwcmVzc2lvbl0pIHtcbiAgICByZXR1cm4gZXZhbHVhdG9yTWVtb1tleHByZXNzaW9uXTtcbiAgfVxuICBsZXQgQXN5bmNGdW5jdGlvbiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihhc3luYyBmdW5jdGlvbigpIHtcbiAgfSkuY29uc3RydWN0b3I7XG4gIGxldCByaWdodFNpZGVTYWZlRXhwcmVzc2lvbiA9IC9eW1xcblxcc10qaWYuKlxcKC4qXFwpLy50ZXN0KGV4cHJlc3Npb24udHJpbSgpKSB8fCAvXihsZXR8Y29uc3QpXFxzLy50ZXN0KGV4cHJlc3Npb24udHJpbSgpKSA/IGAoYXN5bmMoKT0+eyAke2V4cHJlc3Npb259IH0pKClgIDogZXhwcmVzc2lvbjtcbiAgY29uc3Qgc2FmZUFzeW5jRnVuY3Rpb24gPSAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCBmdW5jMiA9IG5ldyBBc3luY0Z1bmN0aW9uKFxuICAgICAgICBbXCJfX3NlbGZcIiwgXCJzY29wZVwiXSxcbiAgICAgICAgYHdpdGggKHNjb3BlKSB7IF9fc2VsZi5yZXN1bHQgPSAke3JpZ2h0U2lkZVNhZmVFeHByZXNzaW9ufSB9OyBfX3NlbGYuZmluaXNoZWQgPSB0cnVlOyByZXR1cm4gX19zZWxmLnJlc3VsdDtgXG4gICAgICApO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGZ1bmMyLCBcIm5hbWVcIiwge1xuICAgICAgICB2YWx1ZTogYFtBbHBpbmVdICR7ZXhwcmVzc2lvbn1gXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmdW5jMjtcbiAgICB9IGNhdGNoIChlcnJvcjIpIHtcbiAgICAgIGhhbmRsZUVycm9yKGVycm9yMiwgZWwsIGV4cHJlc3Npb24pO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgfTtcbiAgbGV0IGZ1bmMgPSBzYWZlQXN5bmNGdW5jdGlvbigpO1xuICBldmFsdWF0b3JNZW1vW2V4cHJlc3Npb25dID0gZnVuYztcbiAgcmV0dXJuIGZ1bmM7XG59XG5mdW5jdGlvbiBnZW5lcmF0ZUV2YWx1YXRvckZyb21TdHJpbmcoZGF0YVN0YWNrLCBleHByZXNzaW9uLCBlbCkge1xuICBsZXQgZnVuYyA9IGdlbmVyYXRlRnVuY3Rpb25Gcm9tU3RyaW5nKGV4cHJlc3Npb24sIGVsKTtcbiAgcmV0dXJuIChyZWNlaXZlciA9ICgpID0+IHtcbiAgfSwgeyBzY29wZTogc2NvcGUyID0ge30sIHBhcmFtcyA9IFtdIH0gPSB7fSkgPT4ge1xuICAgIGZ1bmMucmVzdWx0ID0gdm9pZCAwO1xuICAgIGZ1bmMuZmluaXNoZWQgPSBmYWxzZTtcbiAgICBsZXQgY29tcGxldGVTY29wZSA9IG1lcmdlUHJveGllcyhbc2NvcGUyLCAuLi5kYXRhU3RhY2tdKTtcbiAgICBpZiAodHlwZW9mIGZ1bmMgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgbGV0IHByb21pc2UgPSBmdW5jKGZ1bmMsIGNvbXBsZXRlU2NvcGUpLmNhdGNoKChlcnJvcjIpID0+IGhhbmRsZUVycm9yKGVycm9yMiwgZWwsIGV4cHJlc3Npb24pKTtcbiAgICAgIGlmIChmdW5jLmZpbmlzaGVkKSB7XG4gICAgICAgIHJ1bklmVHlwZU9mRnVuY3Rpb24ocmVjZWl2ZXIsIGZ1bmMucmVzdWx0LCBjb21wbGV0ZVNjb3BlLCBwYXJhbXMsIGVsKTtcbiAgICAgICAgZnVuYy5yZXN1bHQgPSB2b2lkIDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9taXNlLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJ1bklmVHlwZU9mRnVuY3Rpb24ocmVjZWl2ZXIsIHJlc3VsdCwgY29tcGxldGVTY29wZSwgcGFyYW1zLCBlbCk7XG4gICAgICAgIH0pLmNhdGNoKChlcnJvcjIpID0+IGhhbmRsZUVycm9yKGVycm9yMiwgZWwsIGV4cHJlc3Npb24pKS5maW5hbGx5KCgpID0+IGZ1bmMucmVzdWx0ID0gdm9pZCAwKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBydW5JZlR5cGVPZkZ1bmN0aW9uKHJlY2VpdmVyLCB2YWx1ZSwgc2NvcGUyLCBwYXJhbXMsIGVsKSB7XG4gIGlmIChzaG91bGRBdXRvRXZhbHVhdGVGdW5jdGlvbnMgJiYgdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBsZXQgcmVzdWx0ID0gdmFsdWUuYXBwbHkoc2NvcGUyLCBwYXJhbXMpO1xuICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICByZXN1bHQudGhlbigoaSkgPT4gcnVuSWZUeXBlT2ZGdW5jdGlvbihyZWNlaXZlciwgaSwgc2NvcGUyLCBwYXJhbXMpKS5jYXRjaCgoZXJyb3IyKSA9PiBoYW5kbGVFcnJvcihlcnJvcjIsIGVsLCB2YWx1ZSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZWNlaXZlcihyZXN1bHQpO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgdmFsdWUudGhlbigoaSkgPT4gcmVjZWl2ZXIoaSkpO1xuICB9IGVsc2Uge1xuICAgIHJlY2VpdmVyKHZhbHVlKTtcbiAgfVxufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvZGlyZWN0aXZlcy5qc1xudmFyIHByZWZpeEFzU3RyaW5nID0gXCJ4LVwiO1xuZnVuY3Rpb24gcHJlZml4KHN1YmplY3QgPSBcIlwiKSB7XG4gIHJldHVybiBwcmVmaXhBc1N0cmluZyArIHN1YmplY3Q7XG59XG5mdW5jdGlvbiBzZXRQcmVmaXgobmV3UHJlZml4KSB7XG4gIHByZWZpeEFzU3RyaW5nID0gbmV3UHJlZml4O1xufVxudmFyIGRpcmVjdGl2ZUhhbmRsZXJzID0ge307XG5mdW5jdGlvbiBkaXJlY3RpdmUobmFtZSwgY2FsbGJhY2spIHtcbiAgZGlyZWN0aXZlSGFuZGxlcnNbbmFtZV0gPSBjYWxsYmFjaztcbiAgcmV0dXJuIHtcbiAgICBiZWZvcmUoZGlyZWN0aXZlMikge1xuICAgICAgaWYgKCFkaXJlY3RpdmVIYW5kbGVyc1tkaXJlY3RpdmUyXSkge1xuICAgICAgICBjb25zb2xlLndhcm4oU3RyaW5nLnJhd2BDYW5ub3QgZmluZCBkaXJlY3RpdmUgXFxgJHtkaXJlY3RpdmUyfVxcYC4gXFxgJHtuYW1lfVxcYCB3aWxsIHVzZSB0aGUgZGVmYXVsdCBvcmRlciBvZiBleGVjdXRpb25gKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgcG9zID0gZGlyZWN0aXZlT3JkZXIuaW5kZXhPZihkaXJlY3RpdmUyKTtcbiAgICAgIGRpcmVjdGl2ZU9yZGVyLnNwbGljZShwb3MgPj0gMCA/IHBvcyA6IGRpcmVjdGl2ZU9yZGVyLmluZGV4T2YoXCJERUZBVUxUXCIpLCAwLCBuYW1lKTtcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBkaXJlY3RpdmVFeGlzdHMobmFtZSkge1xuICByZXR1cm4gT2JqZWN0LmtleXMoZGlyZWN0aXZlSGFuZGxlcnMpLmluY2x1ZGVzKG5hbWUpO1xufVxuZnVuY3Rpb24gZGlyZWN0aXZlcyhlbCwgYXR0cmlidXRlcywgb3JpZ2luYWxBdHRyaWJ1dGVPdmVycmlkZSkge1xuICBhdHRyaWJ1dGVzID0gQXJyYXkuZnJvbShhdHRyaWJ1dGVzKTtcbiAgaWYgKGVsLl94X3ZpcnR1YWxEaXJlY3RpdmVzKSB7XG4gICAgbGV0IHZBdHRyaWJ1dGVzID0gT2JqZWN0LmVudHJpZXMoZWwuX3hfdmlydHVhbERpcmVjdGl2ZXMpLm1hcCgoW25hbWUsIHZhbHVlXSkgPT4gKHsgbmFtZSwgdmFsdWUgfSkpO1xuICAgIGxldCBzdGF0aWNBdHRyaWJ1dGVzID0gYXR0cmlidXRlc09ubHkodkF0dHJpYnV0ZXMpO1xuICAgIHZBdHRyaWJ1dGVzID0gdkF0dHJpYnV0ZXMubWFwKChhdHRyaWJ1dGUpID0+IHtcbiAgICAgIGlmIChzdGF0aWNBdHRyaWJ1dGVzLmZpbmQoKGF0dHIpID0+IGF0dHIubmFtZSA9PT0gYXR0cmlidXRlLm5hbWUpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbmFtZTogYHgtYmluZDoke2F0dHJpYnV0ZS5uYW1lfWAsXG4gICAgICAgICAgdmFsdWU6IGBcIiR7YXR0cmlidXRlLnZhbHVlfVwiYFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGF0dHJpYnV0ZTtcbiAgICB9KTtcbiAgICBhdHRyaWJ1dGVzID0gYXR0cmlidXRlcy5jb25jYXQodkF0dHJpYnV0ZXMpO1xuICB9XG4gIGxldCB0cmFuc2Zvcm1lZEF0dHJpYnV0ZU1hcCA9IHt9O1xuICBsZXQgZGlyZWN0aXZlczIgPSBhdHRyaWJ1dGVzLm1hcCh0b1RyYW5zZm9ybWVkQXR0cmlidXRlcygobmV3TmFtZSwgb2xkTmFtZSkgPT4gdHJhbnNmb3JtZWRBdHRyaWJ1dGVNYXBbbmV3TmFtZV0gPSBvbGROYW1lKSkuZmlsdGVyKG91dE5vbkFscGluZUF0dHJpYnV0ZXMpLm1hcCh0b1BhcnNlZERpcmVjdGl2ZXModHJhbnNmb3JtZWRBdHRyaWJ1dGVNYXAsIG9yaWdpbmFsQXR0cmlidXRlT3ZlcnJpZGUpKS5zb3J0KGJ5UHJpb3JpdHkpO1xuICByZXR1cm4gZGlyZWN0aXZlczIubWFwKChkaXJlY3RpdmUyKSA9PiB7XG4gICAgcmV0dXJuIGdldERpcmVjdGl2ZUhhbmRsZXIoZWwsIGRpcmVjdGl2ZTIpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGF0dHJpYnV0ZXNPbmx5KGF0dHJpYnV0ZXMpIHtcbiAgcmV0dXJuIEFycmF5LmZyb20oYXR0cmlidXRlcykubWFwKHRvVHJhbnNmb3JtZWRBdHRyaWJ1dGVzKCkpLmZpbHRlcigoYXR0cikgPT4gIW91dE5vbkFscGluZUF0dHJpYnV0ZXMoYXR0cikpO1xufVxudmFyIGlzRGVmZXJyaW5nSGFuZGxlcnMgPSBmYWxzZTtcbnZhciBkaXJlY3RpdmVIYW5kbGVyU3RhY2tzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbnZhciBjdXJyZW50SGFuZGxlclN0YWNrS2V5ID0gU3ltYm9sKCk7XG5mdW5jdGlvbiBkZWZlckhhbmRsaW5nRGlyZWN0aXZlcyhjYWxsYmFjaykge1xuICBpc0RlZmVycmluZ0hhbmRsZXJzID0gdHJ1ZTtcbiAgbGV0IGtleSA9IFN5bWJvbCgpO1xuICBjdXJyZW50SGFuZGxlclN0YWNrS2V5ID0ga2V5O1xuICBkaXJlY3RpdmVIYW5kbGVyU3RhY2tzLnNldChrZXksIFtdKTtcbiAgbGV0IGZsdXNoSGFuZGxlcnMgPSAoKSA9PiB7XG4gICAgd2hpbGUgKGRpcmVjdGl2ZUhhbmRsZXJTdGFja3MuZ2V0KGtleSkubGVuZ3RoKVxuICAgICAgZGlyZWN0aXZlSGFuZGxlclN0YWNrcy5nZXQoa2V5KS5zaGlmdCgpKCk7XG4gICAgZGlyZWN0aXZlSGFuZGxlclN0YWNrcy5kZWxldGUoa2V5KTtcbiAgfTtcbiAgbGV0IHN0b3BEZWZlcnJpbmcgPSAoKSA9PiB7XG4gICAgaXNEZWZlcnJpbmdIYW5kbGVycyA9IGZhbHNlO1xuICAgIGZsdXNoSGFuZGxlcnMoKTtcbiAgfTtcbiAgY2FsbGJhY2soZmx1c2hIYW5kbGVycyk7XG4gIHN0b3BEZWZlcnJpbmcoKTtcbn1cbmZ1bmN0aW9uIGdldEVsZW1lbnRCb3VuZFV0aWxpdGllcyhlbCkge1xuICBsZXQgY2xlYW51cHMgPSBbXTtcbiAgbGV0IGNsZWFudXAyID0gKGNhbGxiYWNrKSA9PiBjbGVhbnVwcy5wdXNoKGNhbGxiYWNrKTtcbiAgbGV0IFtlZmZlY3QzLCBjbGVhbnVwRWZmZWN0XSA9IGVsZW1lbnRCb3VuZEVmZmVjdChlbCk7XG4gIGNsZWFudXBzLnB1c2goY2xlYW51cEVmZmVjdCk7XG4gIGxldCB1dGlsaXRpZXMgPSB7XG4gICAgQWxwaW5lOiBhbHBpbmVfZGVmYXVsdCxcbiAgICBlZmZlY3Q6IGVmZmVjdDMsXG4gICAgY2xlYW51cDogY2xlYW51cDIsXG4gICAgZXZhbHVhdGVMYXRlcjogZXZhbHVhdGVMYXRlci5iaW5kKGV2YWx1YXRlTGF0ZXIsIGVsKSxcbiAgICBldmFsdWF0ZTogZXZhbHVhdGUuYmluZChldmFsdWF0ZSwgZWwpXG4gIH07XG4gIGxldCBkb0NsZWFudXAgPSAoKSA9PiBjbGVhbnVwcy5mb3JFYWNoKChpKSA9PiBpKCkpO1xuICByZXR1cm4gW3V0aWxpdGllcywgZG9DbGVhbnVwXTtcbn1cbmZ1bmN0aW9uIGdldERpcmVjdGl2ZUhhbmRsZXIoZWwsIGRpcmVjdGl2ZTIpIHtcbiAgbGV0IG5vb3AgPSAoKSA9PiB7XG4gIH07XG4gIGxldCBoYW5kbGVyNCA9IGRpcmVjdGl2ZUhhbmRsZXJzW2RpcmVjdGl2ZTIudHlwZV0gfHwgbm9vcDtcbiAgbGV0IFt1dGlsaXRpZXMsIGNsZWFudXAyXSA9IGdldEVsZW1lbnRCb3VuZFV0aWxpdGllcyhlbCk7XG4gIG9uQXR0cmlidXRlUmVtb3ZlZChlbCwgZGlyZWN0aXZlMi5vcmlnaW5hbCwgY2xlYW51cDIpO1xuICBsZXQgZnVsbEhhbmRsZXIgPSAoKSA9PiB7XG4gICAgaWYgKGVsLl94X2lnbm9yZSB8fCBlbC5feF9pZ25vcmVTZWxmKVxuICAgICAgcmV0dXJuO1xuICAgIGhhbmRsZXI0LmlubGluZSAmJiBoYW5kbGVyNC5pbmxpbmUoZWwsIGRpcmVjdGl2ZTIsIHV0aWxpdGllcyk7XG4gICAgaGFuZGxlcjQgPSBoYW5kbGVyNC5iaW5kKGhhbmRsZXI0LCBlbCwgZGlyZWN0aXZlMiwgdXRpbGl0aWVzKTtcbiAgICBpc0RlZmVycmluZ0hhbmRsZXJzID8gZGlyZWN0aXZlSGFuZGxlclN0YWNrcy5nZXQoY3VycmVudEhhbmRsZXJTdGFja0tleSkucHVzaChoYW5kbGVyNCkgOiBoYW5kbGVyNCgpO1xuICB9O1xuICBmdWxsSGFuZGxlci5ydW5DbGVhbnVwcyA9IGNsZWFudXAyO1xuICByZXR1cm4gZnVsbEhhbmRsZXI7XG59XG52YXIgc3RhcnRpbmdXaXRoID0gKHN1YmplY3QsIHJlcGxhY2VtZW50KSA9PiAoeyBuYW1lLCB2YWx1ZSB9KSA9PiB7XG4gIGlmIChuYW1lLnN0YXJ0c1dpdGgoc3ViamVjdCkpXG4gICAgbmFtZSA9IG5hbWUucmVwbGFjZShzdWJqZWN0LCByZXBsYWNlbWVudCk7XG4gIHJldHVybiB7IG5hbWUsIHZhbHVlIH07XG59O1xudmFyIGludG8gPSAoaSkgPT4gaTtcbmZ1bmN0aW9uIHRvVHJhbnNmb3JtZWRBdHRyaWJ1dGVzKGNhbGxiYWNrID0gKCkgPT4ge1xufSkge1xuICByZXR1cm4gKHsgbmFtZSwgdmFsdWUgfSkgPT4ge1xuICAgIGxldCB7IG5hbWU6IG5ld05hbWUsIHZhbHVlOiBuZXdWYWx1ZSB9ID0gYXR0cmlidXRlVHJhbnNmb3JtZXJzLnJlZHVjZSgoY2FycnksIHRyYW5zZm9ybSkgPT4ge1xuICAgICAgcmV0dXJuIHRyYW5zZm9ybShjYXJyeSk7XG4gICAgfSwgeyBuYW1lLCB2YWx1ZSB9KTtcbiAgICBpZiAobmV3TmFtZSAhPT0gbmFtZSlcbiAgICAgIGNhbGxiYWNrKG5ld05hbWUsIG5hbWUpO1xuICAgIHJldHVybiB7IG5hbWU6IG5ld05hbWUsIHZhbHVlOiBuZXdWYWx1ZSB9O1xuICB9O1xufVxudmFyIGF0dHJpYnV0ZVRyYW5zZm9ybWVycyA9IFtdO1xuZnVuY3Rpb24gbWFwQXR0cmlidXRlcyhjYWxsYmFjaykge1xuICBhdHRyaWJ1dGVUcmFuc2Zvcm1lcnMucHVzaChjYWxsYmFjayk7XG59XG5mdW5jdGlvbiBvdXROb25BbHBpbmVBdHRyaWJ1dGVzKHsgbmFtZSB9KSB7XG4gIHJldHVybiBhbHBpbmVBdHRyaWJ1dGVSZWdleCgpLnRlc3QobmFtZSk7XG59XG52YXIgYWxwaW5lQXR0cmlidXRlUmVnZXggPSAoKSA9PiBuZXcgUmVnRXhwKGBeJHtwcmVmaXhBc1N0cmluZ30oW146Xi5dKylcXFxcYmApO1xuZnVuY3Rpb24gdG9QYXJzZWREaXJlY3RpdmVzKHRyYW5zZm9ybWVkQXR0cmlidXRlTWFwLCBvcmlnaW5hbEF0dHJpYnV0ZU92ZXJyaWRlKSB7XG4gIHJldHVybiAoeyBuYW1lLCB2YWx1ZSB9KSA9PiB7XG4gICAgbGV0IHR5cGVNYXRjaCA9IG5hbWUubWF0Y2goYWxwaW5lQXR0cmlidXRlUmVnZXgoKSk7XG4gICAgbGV0IHZhbHVlTWF0Y2ggPSBuYW1lLm1hdGNoKC86KFthLXpBLVowLTlcXC1fOl0rKS8pO1xuICAgIGxldCBtb2RpZmllcnMgPSBuYW1lLm1hdGNoKC9cXC5bXi5cXF1dKyg/PVteXFxdXSokKS9nKSB8fCBbXTtcbiAgICBsZXQgb3JpZ2luYWwgPSBvcmlnaW5hbEF0dHJpYnV0ZU92ZXJyaWRlIHx8IHRyYW5zZm9ybWVkQXR0cmlidXRlTWFwW25hbWVdIHx8IG5hbWU7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IHR5cGVNYXRjaCA/IHR5cGVNYXRjaFsxXSA6IG51bGwsXG4gICAgICB2YWx1ZTogdmFsdWVNYXRjaCA/IHZhbHVlTWF0Y2hbMV0gOiBudWxsLFxuICAgICAgbW9kaWZpZXJzOiBtb2RpZmllcnMubWFwKChpKSA9PiBpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKSxcbiAgICAgIGV4cHJlc3Npb246IHZhbHVlLFxuICAgICAgb3JpZ2luYWxcbiAgICB9O1xuICB9O1xufVxudmFyIERFRkFVTFQgPSBcIkRFRkFVTFRcIjtcbnZhciBkaXJlY3RpdmVPcmRlciA9IFtcbiAgXCJpZ25vcmVcIixcbiAgXCJyZWZcIixcbiAgXCJkYXRhXCIsXG4gIFwiaWRcIixcbiAgXCJhbmNob3JcIixcbiAgXCJiaW5kXCIsXG4gIFwiaW5pdFwiLFxuICBcImZvclwiLFxuICBcIm1vZGVsXCIsXG4gIFwibW9kZWxhYmxlXCIsXG4gIFwidHJhbnNpdGlvblwiLFxuICBcInNob3dcIixcbiAgXCJpZlwiLFxuICBERUZBVUxULFxuICBcInRlbGVwb3J0XCJcbl07XG5mdW5jdGlvbiBieVByaW9yaXR5KGEsIGIpIHtcbiAgbGV0IHR5cGVBID0gZGlyZWN0aXZlT3JkZXIuaW5kZXhPZihhLnR5cGUpID09PSAtMSA/IERFRkFVTFQgOiBhLnR5cGU7XG4gIGxldCB0eXBlQiA9IGRpcmVjdGl2ZU9yZGVyLmluZGV4T2YoYi50eXBlKSA9PT0gLTEgPyBERUZBVUxUIDogYi50eXBlO1xuICByZXR1cm4gZGlyZWN0aXZlT3JkZXIuaW5kZXhPZih0eXBlQSkgLSBkaXJlY3RpdmVPcmRlci5pbmRleE9mKHR5cGVCKTtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL3V0aWxzL2Rpc3BhdGNoLmpzXG5mdW5jdGlvbiBkaXNwYXRjaChlbCwgbmFtZSwgZGV0YWlsID0ge30pIHtcbiAgZWwuZGlzcGF0Y2hFdmVudChcbiAgICBuZXcgQ3VzdG9tRXZlbnQobmFtZSwge1xuICAgICAgZGV0YWlsLFxuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIC8vIEFsbG93cyBldmVudHMgdG8gcGFzcyB0aGUgc2hhZG93IERPTSBiYXJyaWVyLlxuICAgICAgY29tcG9zZWQ6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSlcbiAgKTtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL3V0aWxzL3dhbGsuanNcbmZ1bmN0aW9uIHdhbGsoZWwsIGNhbGxiYWNrKSB7XG4gIGlmICh0eXBlb2YgU2hhZG93Um9vdCA9PT0gXCJmdW5jdGlvblwiICYmIGVsIGluc3RhbmNlb2YgU2hhZG93Um9vdCkge1xuICAgIEFycmF5LmZyb20oZWwuY2hpbGRyZW4pLmZvckVhY2goKGVsMikgPT4gd2FsayhlbDIsIGNhbGxiYWNrKSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxldCBza2lwID0gZmFsc2U7XG4gIGNhbGxiYWNrKGVsLCAoKSA9PiBza2lwID0gdHJ1ZSk7XG4gIGlmIChza2lwKVxuICAgIHJldHVybjtcbiAgbGV0IG5vZGUgPSBlbC5maXJzdEVsZW1lbnRDaGlsZDtcbiAgd2hpbGUgKG5vZGUpIHtcbiAgICB3YWxrKG5vZGUsIGNhbGxiYWNrLCBmYWxzZSk7XG4gICAgbm9kZSA9IG5vZGUubmV4dEVsZW1lbnRTaWJsaW5nO1xuICB9XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy91dGlscy93YXJuLmpzXG5mdW5jdGlvbiB3YXJuKG1lc3NhZ2UsIC4uLmFyZ3MpIHtcbiAgY29uc29sZS53YXJuKGBBbHBpbmUgV2FybmluZzogJHttZXNzYWdlfWAsIC4uLmFyZ3MpO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvbGlmZWN5Y2xlLmpzXG52YXIgc3RhcnRlZCA9IGZhbHNlO1xuZnVuY3Rpb24gc3RhcnQoKSB7XG4gIGlmIChzdGFydGVkKVxuICAgIHdhcm4oXCJBbHBpbmUgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZCBvbiB0aGlzIHBhZ2UuIENhbGxpbmcgQWxwaW5lLnN0YXJ0KCkgbW9yZSB0aGFuIG9uY2UgY2FuIGNhdXNlIHByb2JsZW1zLlwiKTtcbiAgc3RhcnRlZCA9IHRydWU7XG4gIGlmICghZG9jdW1lbnQuYm9keSlcbiAgICB3YXJuKFwiVW5hYmxlIHRvIGluaXRpYWxpemUuIFRyeWluZyB0byBsb2FkIEFscGluZSBiZWZvcmUgYDxib2R5PmAgaXMgYXZhaWxhYmxlLiBEaWQgeW91IGZvcmdldCB0byBhZGQgYGRlZmVyYCBpbiBBbHBpbmUncyBgPHNjcmlwdD5gIHRhZz9cIik7XG4gIGRpc3BhdGNoKGRvY3VtZW50LCBcImFscGluZTppbml0XCIpO1xuICBkaXNwYXRjaChkb2N1bWVudCwgXCJhbHBpbmU6aW5pdGlhbGl6aW5nXCIpO1xuICBzdGFydE9ic2VydmluZ011dGF0aW9ucygpO1xuICBvbkVsQWRkZWQoKGVsKSA9PiBpbml0VHJlZShlbCwgd2FsaykpO1xuICBvbkVsUmVtb3ZlZCgoZWwpID0+IGRlc3Ryb3lUcmVlKGVsKSk7XG4gIG9uQXR0cmlidXRlc0FkZGVkKChlbCwgYXR0cnMpID0+IHtcbiAgICBkaXJlY3RpdmVzKGVsLCBhdHRycykuZm9yRWFjaCgoaGFuZGxlKSA9PiBoYW5kbGUoKSk7XG4gIH0pO1xuICBsZXQgb3V0TmVzdGVkQ29tcG9uZW50cyA9IChlbCkgPT4gIWNsb3Nlc3RSb290KGVsLnBhcmVudEVsZW1lbnQsIHRydWUpO1xuICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYWxsU2VsZWN0b3JzKCkuam9pbihcIixcIikpKS5maWx0ZXIob3V0TmVzdGVkQ29tcG9uZW50cykuZm9yRWFjaCgoZWwpID0+IHtcbiAgICBpbml0VHJlZShlbCk7XG4gIH0pO1xuICBkaXNwYXRjaChkb2N1bWVudCwgXCJhbHBpbmU6aW5pdGlhbGl6ZWRcIik7XG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIHdhcm5BYm91dE1pc3NpbmdQbHVnaW5zKCk7XG4gIH0pO1xufVxudmFyIHJvb3RTZWxlY3RvckNhbGxiYWNrcyA9IFtdO1xudmFyIGluaXRTZWxlY3RvckNhbGxiYWNrcyA9IFtdO1xuZnVuY3Rpb24gcm9vdFNlbGVjdG9ycygpIHtcbiAgcmV0dXJuIHJvb3RTZWxlY3RvckNhbGxiYWNrcy5tYXAoKGZuKSA9PiBmbigpKTtcbn1cbmZ1bmN0aW9uIGFsbFNlbGVjdG9ycygpIHtcbiAgcmV0dXJuIHJvb3RTZWxlY3RvckNhbGxiYWNrcy5jb25jYXQoaW5pdFNlbGVjdG9yQ2FsbGJhY2tzKS5tYXAoKGZuKSA9PiBmbigpKTtcbn1cbmZ1bmN0aW9uIGFkZFJvb3RTZWxlY3RvcihzZWxlY3RvckNhbGxiYWNrKSB7XG4gIHJvb3RTZWxlY3RvckNhbGxiYWNrcy5wdXNoKHNlbGVjdG9yQ2FsbGJhY2spO1xufVxuZnVuY3Rpb24gYWRkSW5pdFNlbGVjdG9yKHNlbGVjdG9yQ2FsbGJhY2spIHtcbiAgaW5pdFNlbGVjdG9yQ2FsbGJhY2tzLnB1c2goc2VsZWN0b3JDYWxsYmFjayk7XG59XG5mdW5jdGlvbiBjbG9zZXN0Um9vdChlbCwgaW5jbHVkZUluaXRTZWxlY3RvcnMgPSBmYWxzZSkge1xuICByZXR1cm4gZmluZENsb3Nlc3QoZWwsIChlbGVtZW50KSA9PiB7XG4gICAgY29uc3Qgc2VsZWN0b3JzID0gaW5jbHVkZUluaXRTZWxlY3RvcnMgPyBhbGxTZWxlY3RvcnMoKSA6IHJvb3RTZWxlY3RvcnMoKTtcbiAgICBpZiAoc2VsZWN0b3JzLnNvbWUoKHNlbGVjdG9yKSA9PiBlbGVtZW50Lm1hdGNoZXMoc2VsZWN0b3IpKSlcbiAgICAgIHJldHVybiB0cnVlO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGZpbmRDbG9zZXN0KGVsLCBjYWxsYmFjaykge1xuICBpZiAoIWVsKVxuICAgIHJldHVybjtcbiAgaWYgKGNhbGxiYWNrKGVsKSlcbiAgICByZXR1cm4gZWw7XG4gIGlmIChlbC5feF90ZWxlcG9ydEJhY2spXG4gICAgZWwgPSBlbC5feF90ZWxlcG9ydEJhY2s7XG4gIGlmICghZWwucGFyZW50RWxlbWVudClcbiAgICByZXR1cm47XG4gIHJldHVybiBmaW5kQ2xvc2VzdChlbC5wYXJlbnRFbGVtZW50LCBjYWxsYmFjayk7XG59XG5mdW5jdGlvbiBpc1Jvb3QoZWwpIHtcbiAgcmV0dXJuIHJvb3RTZWxlY3RvcnMoKS5zb21lKChzZWxlY3RvcikgPT4gZWwubWF0Y2hlcyhzZWxlY3RvcikpO1xufVxudmFyIGluaXRJbnRlcmNlcHRvcnMyID0gW107XG5mdW5jdGlvbiBpbnRlcmNlcHRJbml0KGNhbGxiYWNrKSB7XG4gIGluaXRJbnRlcmNlcHRvcnMyLnB1c2goY2FsbGJhY2spO1xufVxudmFyIG1hcmtlckRpc3BlbnNlciA9IDE7XG5mdW5jdGlvbiBpbml0VHJlZShlbCwgd2Fsa2VyID0gd2FsaywgaW50ZXJjZXB0ID0gKCkgPT4ge1xufSkge1xuICBpZiAoZmluZENsb3Nlc3QoZWwsIChpKSA9PiBpLl94X2lnbm9yZSkpXG4gICAgcmV0dXJuO1xuICBkZWZlckhhbmRsaW5nRGlyZWN0aXZlcygoKSA9PiB7XG4gICAgd2Fsa2VyKGVsLCAoZWwyLCBza2lwKSA9PiB7XG4gICAgICBpZiAoZWwyLl94X21hcmtlcilcbiAgICAgICAgcmV0dXJuO1xuICAgICAgaW50ZXJjZXB0KGVsMiwgc2tpcCk7XG4gICAgICBpbml0SW50ZXJjZXB0b3JzMi5mb3JFYWNoKChpKSA9PiBpKGVsMiwgc2tpcCkpO1xuICAgICAgZGlyZWN0aXZlcyhlbDIsIGVsMi5hdHRyaWJ1dGVzKS5mb3JFYWNoKChoYW5kbGUpID0+IGhhbmRsZSgpKTtcbiAgICAgIGlmICghZWwyLl94X2lnbm9yZSlcbiAgICAgICAgZWwyLl94X21hcmtlciA9IG1hcmtlckRpc3BlbnNlcisrO1xuICAgICAgZWwyLl94X2lnbm9yZSAmJiBza2lwKCk7XG4gICAgfSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gZGVzdHJveVRyZWUocm9vdCwgd2Fsa2VyID0gd2Fsaykge1xuICB3YWxrZXIocm9vdCwgKGVsKSA9PiB7XG4gICAgY2xlYW51cEVsZW1lbnQoZWwpO1xuICAgIGNsZWFudXBBdHRyaWJ1dGVzKGVsKTtcbiAgICBkZWxldGUgZWwuX3hfbWFya2VyO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHdhcm5BYm91dE1pc3NpbmdQbHVnaW5zKCkge1xuICBsZXQgcGx1Z2luRGlyZWN0aXZlcyA9IFtcbiAgICBbXCJ1aVwiLCBcImRpYWxvZ1wiLCBbXCJbeC1kaWFsb2ddLCBbeC1wb3BvdmVyXVwiXV0sXG4gICAgW1wiYW5jaG9yXCIsIFwiYW5jaG9yXCIsIFtcIlt4LWFuY2hvcl1cIl1dLFxuICAgIFtcInNvcnRcIiwgXCJzb3J0XCIsIFtcIlt4LXNvcnRdXCJdXVxuICBdO1xuICBwbHVnaW5EaXJlY3RpdmVzLmZvckVhY2goKFtwbHVnaW4yLCBkaXJlY3RpdmUyLCBzZWxlY3RvcnNdKSA9PiB7XG4gICAgaWYgKGRpcmVjdGl2ZUV4aXN0cyhkaXJlY3RpdmUyKSlcbiAgICAgIHJldHVybjtcbiAgICBzZWxlY3RvcnMuc29tZSgoc2VsZWN0b3IpID0+IHtcbiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSkge1xuICAgICAgICB3YXJuKGBmb3VuZCBcIiR7c2VsZWN0b3J9XCIsIGJ1dCBtaXNzaW5nICR7cGx1Z2luMn0gcGx1Z2luYCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL25leHRUaWNrLmpzXG52YXIgdGlja1N0YWNrID0gW107XG52YXIgaXNIb2xkaW5nID0gZmFsc2U7XG5mdW5jdGlvbiBuZXh0VGljayhjYWxsYmFjayA9ICgpID0+IHtcbn0pIHtcbiAgcXVldWVNaWNyb3Rhc2soKCkgPT4ge1xuICAgIGlzSG9sZGluZyB8fCBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHJlbGVhc2VOZXh0VGlja3MoKTtcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzKSA9PiB7XG4gICAgdGlja1N0YWNrLnB1c2goKCkgPT4ge1xuICAgICAgY2FsbGJhY2soKTtcbiAgICAgIHJlcygpO1xuICAgIH0pO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHJlbGVhc2VOZXh0VGlja3MoKSB7XG4gIGlzSG9sZGluZyA9IGZhbHNlO1xuICB3aGlsZSAodGlja1N0YWNrLmxlbmd0aClcbiAgICB0aWNrU3RhY2suc2hpZnQoKSgpO1xufVxuZnVuY3Rpb24gaG9sZE5leHRUaWNrcygpIHtcbiAgaXNIb2xkaW5nID0gdHJ1ZTtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL3V0aWxzL2NsYXNzZXMuanNcbmZ1bmN0aW9uIHNldENsYXNzZXMoZWwsIHZhbHVlKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiBzZXRDbGFzc2VzRnJvbVN0cmluZyhlbCwgdmFsdWUuam9pbihcIiBcIikpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAhPT0gbnVsbCkge1xuICAgIHJldHVybiBzZXRDbGFzc2VzRnJvbU9iamVjdChlbCwgdmFsdWUpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgcmV0dXJuIHNldENsYXNzZXMoZWwsIHZhbHVlKCkpO1xuICB9XG4gIHJldHVybiBzZXRDbGFzc2VzRnJvbVN0cmluZyhlbCwgdmFsdWUpO1xufVxuZnVuY3Rpb24gc2V0Q2xhc3Nlc0Zyb21TdHJpbmcoZWwsIGNsYXNzU3RyaW5nKSB7XG4gIGxldCBzcGxpdCA9IChjbGFzc1N0cmluZzIpID0+IGNsYXNzU3RyaW5nMi5zcGxpdChcIiBcIikuZmlsdGVyKEJvb2xlYW4pO1xuICBsZXQgbWlzc2luZ0NsYXNzZXMgPSAoY2xhc3NTdHJpbmcyKSA9PiBjbGFzc1N0cmluZzIuc3BsaXQoXCIgXCIpLmZpbHRlcigoaSkgPT4gIWVsLmNsYXNzTGlzdC5jb250YWlucyhpKSkuZmlsdGVyKEJvb2xlYW4pO1xuICBsZXQgYWRkQ2xhc3Nlc0FuZFJldHVyblVuZG8gPSAoY2xhc3NlcykgPT4ge1xuICAgIGVsLmNsYXNzTGlzdC5hZGQoLi4uY2xhc3Nlcyk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoLi4uY2xhc3Nlcyk7XG4gICAgfTtcbiAgfTtcbiAgY2xhc3NTdHJpbmcgPSBjbGFzc1N0cmluZyA9PT0gdHJ1ZSA/IGNsYXNzU3RyaW5nID0gXCJcIiA6IGNsYXNzU3RyaW5nIHx8IFwiXCI7XG4gIHJldHVybiBhZGRDbGFzc2VzQW5kUmV0dXJuVW5kbyhtaXNzaW5nQ2xhc3NlcyhjbGFzc1N0cmluZykpO1xufVxuZnVuY3Rpb24gc2V0Q2xhc3Nlc0Zyb21PYmplY3QoZWwsIGNsYXNzT2JqZWN0KSB7XG4gIGxldCBzcGxpdCA9IChjbGFzc1N0cmluZykgPT4gY2xhc3NTdHJpbmcuc3BsaXQoXCIgXCIpLmZpbHRlcihCb29sZWFuKTtcbiAgbGV0IGZvckFkZCA9IE9iamVjdC5lbnRyaWVzKGNsYXNzT2JqZWN0KS5mbGF0TWFwKChbY2xhc3NTdHJpbmcsIGJvb2xdKSA9PiBib29sID8gc3BsaXQoY2xhc3NTdHJpbmcpIDogZmFsc2UpLmZpbHRlcihCb29sZWFuKTtcbiAgbGV0IGZvclJlbW92ZSA9IE9iamVjdC5lbnRyaWVzKGNsYXNzT2JqZWN0KS5mbGF0TWFwKChbY2xhc3NTdHJpbmcsIGJvb2xdKSA9PiAhYm9vbCA/IHNwbGl0KGNsYXNzU3RyaW5nKSA6IGZhbHNlKS5maWx0ZXIoQm9vbGVhbik7XG4gIGxldCBhZGRlZCA9IFtdO1xuICBsZXQgcmVtb3ZlZCA9IFtdO1xuICBmb3JSZW1vdmUuZm9yRWFjaCgoaSkgPT4ge1xuICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoaSkpIHtcbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoaSk7XG4gICAgICByZW1vdmVkLnB1c2goaSk7XG4gICAgfVxuICB9KTtcbiAgZm9yQWRkLmZvckVhY2goKGkpID0+IHtcbiAgICBpZiAoIWVsLmNsYXNzTGlzdC5jb250YWlucyhpKSkge1xuICAgICAgZWwuY2xhc3NMaXN0LmFkZChpKTtcbiAgICAgIGFkZGVkLnB1c2goaSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICByZW1vdmVkLmZvckVhY2goKGkpID0+IGVsLmNsYXNzTGlzdC5hZGQoaSkpO1xuICAgIGFkZGVkLmZvckVhY2goKGkpID0+IGVsLmNsYXNzTGlzdC5yZW1vdmUoaSkpO1xuICB9O1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvdXRpbHMvc3R5bGVzLmpzXG5mdW5jdGlvbiBzZXRTdHlsZXMoZWwsIHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgIT09IG51bGwpIHtcbiAgICByZXR1cm4gc2V0U3R5bGVzRnJvbU9iamVjdChlbCwgdmFsdWUpO1xuICB9XG4gIHJldHVybiBzZXRTdHlsZXNGcm9tU3RyaW5nKGVsLCB2YWx1ZSk7XG59XG5mdW5jdGlvbiBzZXRTdHlsZXNGcm9tT2JqZWN0KGVsLCB2YWx1ZSkge1xuICBsZXQgcHJldmlvdXNTdHlsZXMgPSB7fTtcbiAgT2JqZWN0LmVudHJpZXModmFsdWUpLmZvckVhY2goKFtrZXksIHZhbHVlMl0pID0+IHtcbiAgICBwcmV2aW91c1N0eWxlc1trZXldID0gZWwuc3R5bGVba2V5XTtcbiAgICBpZiAoIWtleS5zdGFydHNXaXRoKFwiLS1cIikpIHtcbiAgICAgIGtleSA9IGtlYmFiQ2FzZShrZXkpO1xuICAgIH1cbiAgICBlbC5zdHlsZS5zZXRQcm9wZXJ0eShrZXksIHZhbHVlMik7XG4gIH0pO1xuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBpZiAoZWwuc3R5bGUubGVuZ3RoID09PSAwKSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoXCJzdHlsZVwiKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIHNldFN0eWxlcyhlbCwgcHJldmlvdXNTdHlsZXMpO1xuICB9O1xufVxuZnVuY3Rpb24gc2V0U3R5bGVzRnJvbVN0cmluZyhlbCwgdmFsdWUpIHtcbiAgbGV0IGNhY2hlID0gZWwuZ2V0QXR0cmlidXRlKFwic3R5bGVcIiwgdmFsdWUpO1xuICBlbC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCB2YWx1ZSk7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgZWwuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgY2FjaGUgfHwgXCJcIik7XG4gIH07XG59XG5mdW5jdGlvbiBrZWJhYkNhc2Uoc3ViamVjdCkge1xuICByZXR1cm4gc3ViamVjdC5yZXBsYWNlKC8oW2Etel0pKFtBLVpdKS9nLCBcIiQxLSQyXCIpLnRvTG93ZXJDYXNlKCk7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy91dGlscy9vbmNlLmpzXG5mdW5jdGlvbiBvbmNlKGNhbGxiYWNrLCBmYWxsYmFjayA9ICgpID0+IHtcbn0pIHtcbiAgbGV0IGNhbGxlZCA9IGZhbHNlO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmYWxsYmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfTtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2RpcmVjdGl2ZXMveC10cmFuc2l0aW9uLmpzXG5kaXJlY3RpdmUoXCJ0cmFuc2l0aW9uXCIsIChlbCwgeyB2YWx1ZSwgbW9kaWZpZXJzLCBleHByZXNzaW9uIH0sIHsgZXZhbHVhdGU6IGV2YWx1YXRlMiB9KSA9PiB7XG4gIGlmICh0eXBlb2YgZXhwcmVzc2lvbiA9PT0gXCJmdW5jdGlvblwiKVxuICAgIGV4cHJlc3Npb24gPSBldmFsdWF0ZTIoZXhwcmVzc2lvbik7XG4gIGlmIChleHByZXNzaW9uID09PSBmYWxzZSlcbiAgICByZXR1cm47XG4gIGlmICghZXhwcmVzc2lvbiB8fCB0eXBlb2YgZXhwcmVzc2lvbiA9PT0gXCJib29sZWFuXCIpIHtcbiAgICByZWdpc3RlclRyYW5zaXRpb25zRnJvbUhlbHBlcihlbCwgbW9kaWZpZXJzLCB2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgcmVnaXN0ZXJUcmFuc2l0aW9uc0Zyb21DbGFzc1N0cmluZyhlbCwgZXhwcmVzc2lvbiwgdmFsdWUpO1xuICB9XG59KTtcbmZ1bmN0aW9uIHJlZ2lzdGVyVHJhbnNpdGlvbnNGcm9tQ2xhc3NTdHJpbmcoZWwsIGNsYXNzU3RyaW5nLCBzdGFnZSkge1xuICByZWdpc3RlclRyYW5zaXRpb25PYmplY3QoZWwsIHNldENsYXNzZXMsIFwiXCIpO1xuICBsZXQgZGlyZWN0aXZlU3RvcmFnZU1hcCA9IHtcbiAgICBcImVudGVyXCI6IChjbGFzc2VzKSA9PiB7XG4gICAgICBlbC5feF90cmFuc2l0aW9uLmVudGVyLmR1cmluZyA9IGNsYXNzZXM7XG4gICAgfSxcbiAgICBcImVudGVyLXN0YXJ0XCI6IChjbGFzc2VzKSA9PiB7XG4gICAgICBlbC5feF90cmFuc2l0aW9uLmVudGVyLnN0YXJ0ID0gY2xhc3NlcztcbiAgICB9LFxuICAgIFwiZW50ZXItZW5kXCI6IChjbGFzc2VzKSA9PiB7XG4gICAgICBlbC5feF90cmFuc2l0aW9uLmVudGVyLmVuZCA9IGNsYXNzZXM7XG4gICAgfSxcbiAgICBcImxlYXZlXCI6IChjbGFzc2VzKSA9PiB7XG4gICAgICBlbC5feF90cmFuc2l0aW9uLmxlYXZlLmR1cmluZyA9IGNsYXNzZXM7XG4gICAgfSxcbiAgICBcImxlYXZlLXN0YXJ0XCI6IChjbGFzc2VzKSA9PiB7XG4gICAgICBlbC5feF90cmFuc2l0aW9uLmxlYXZlLnN0YXJ0ID0gY2xhc3NlcztcbiAgICB9LFxuICAgIFwibGVhdmUtZW5kXCI6IChjbGFzc2VzKSA9PiB7XG4gICAgICBlbC5feF90cmFuc2l0aW9uLmxlYXZlLmVuZCA9IGNsYXNzZXM7XG4gICAgfVxuICB9O1xuICBkaXJlY3RpdmVTdG9yYWdlTWFwW3N0YWdlXShjbGFzc1N0cmluZyk7XG59XG5mdW5jdGlvbiByZWdpc3RlclRyYW5zaXRpb25zRnJvbUhlbHBlcihlbCwgbW9kaWZpZXJzLCBzdGFnZSkge1xuICByZWdpc3RlclRyYW5zaXRpb25PYmplY3QoZWwsIHNldFN0eWxlcyk7XG4gIGxldCBkb2VzbnRTcGVjaWZ5ID0gIW1vZGlmaWVycy5pbmNsdWRlcyhcImluXCIpICYmICFtb2RpZmllcnMuaW5jbHVkZXMoXCJvdXRcIikgJiYgIXN0YWdlO1xuICBsZXQgdHJhbnNpdGlvbmluZ0luID0gZG9lc250U3BlY2lmeSB8fCBtb2RpZmllcnMuaW5jbHVkZXMoXCJpblwiKSB8fCBbXCJlbnRlclwiXS5pbmNsdWRlcyhzdGFnZSk7XG4gIGxldCB0cmFuc2l0aW9uaW5nT3V0ID0gZG9lc250U3BlY2lmeSB8fCBtb2RpZmllcnMuaW5jbHVkZXMoXCJvdXRcIikgfHwgW1wibGVhdmVcIl0uaW5jbHVkZXMoc3RhZ2UpO1xuICBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKFwiaW5cIikgJiYgIWRvZXNudFNwZWNpZnkpIHtcbiAgICBtb2RpZmllcnMgPSBtb2RpZmllcnMuZmlsdGVyKChpLCBpbmRleCkgPT4gaW5kZXggPCBtb2RpZmllcnMuaW5kZXhPZihcIm91dFwiKSk7XG4gIH1cbiAgaWYgKG1vZGlmaWVycy5pbmNsdWRlcyhcIm91dFwiKSAmJiAhZG9lc250U3BlY2lmeSkge1xuICAgIG1vZGlmaWVycyA9IG1vZGlmaWVycy5maWx0ZXIoKGksIGluZGV4KSA9PiBpbmRleCA+IG1vZGlmaWVycy5pbmRleE9mKFwib3V0XCIpKTtcbiAgfVxuICBsZXQgd2FudHNBbGwgPSAhbW9kaWZpZXJzLmluY2x1ZGVzKFwib3BhY2l0eVwiKSAmJiAhbW9kaWZpZXJzLmluY2x1ZGVzKFwic2NhbGVcIik7XG4gIGxldCB3YW50c09wYWNpdHkgPSB3YW50c0FsbCB8fCBtb2RpZmllcnMuaW5jbHVkZXMoXCJvcGFjaXR5XCIpO1xuICBsZXQgd2FudHNTY2FsZSA9IHdhbnRzQWxsIHx8IG1vZGlmaWVycy5pbmNsdWRlcyhcInNjYWxlXCIpO1xuICBsZXQgb3BhY2l0eVZhbHVlID0gd2FudHNPcGFjaXR5ID8gMCA6IDE7XG4gIGxldCBzY2FsZVZhbHVlID0gd2FudHNTY2FsZSA/IG1vZGlmaWVyVmFsdWUobW9kaWZpZXJzLCBcInNjYWxlXCIsIDk1KSAvIDEwMCA6IDE7XG4gIGxldCBkZWxheSA9IG1vZGlmaWVyVmFsdWUobW9kaWZpZXJzLCBcImRlbGF5XCIsIDApIC8gMWUzO1xuICBsZXQgb3JpZ2luID0gbW9kaWZpZXJWYWx1ZShtb2RpZmllcnMsIFwib3JpZ2luXCIsIFwiY2VudGVyXCIpO1xuICBsZXQgcHJvcGVydHkgPSBcIm9wYWNpdHksIHRyYW5zZm9ybVwiO1xuICBsZXQgZHVyYXRpb25JbiA9IG1vZGlmaWVyVmFsdWUobW9kaWZpZXJzLCBcImR1cmF0aW9uXCIsIDE1MCkgLyAxZTM7XG4gIGxldCBkdXJhdGlvbk91dCA9IG1vZGlmaWVyVmFsdWUobW9kaWZpZXJzLCBcImR1cmF0aW9uXCIsIDc1KSAvIDFlMztcbiAgbGV0IGVhc2luZyA9IGBjdWJpYy1iZXppZXIoMC40LCAwLjAsIDAuMiwgMSlgO1xuICBpZiAodHJhbnNpdGlvbmluZ0luKSB7XG4gICAgZWwuX3hfdHJhbnNpdGlvbi5lbnRlci5kdXJpbmcgPSB7XG4gICAgICB0cmFuc2Zvcm1PcmlnaW46IG9yaWdpbixcbiAgICAgIHRyYW5zaXRpb25EZWxheTogYCR7ZGVsYXl9c2AsXG4gICAgICB0cmFuc2l0aW9uUHJvcGVydHk6IHByb3BlcnR5LFxuICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uOiBgJHtkdXJhdGlvbklufXNgLFxuICAgICAgdHJhbnNpdGlvblRpbWluZ0Z1bmN0aW9uOiBlYXNpbmdcbiAgICB9O1xuICAgIGVsLl94X3RyYW5zaXRpb24uZW50ZXIuc3RhcnQgPSB7XG4gICAgICBvcGFjaXR5OiBvcGFjaXR5VmFsdWUsXG4gICAgICB0cmFuc2Zvcm06IGBzY2FsZSgke3NjYWxlVmFsdWV9KWBcbiAgICB9O1xuICAgIGVsLl94X3RyYW5zaXRpb24uZW50ZXIuZW5kID0ge1xuICAgICAgb3BhY2l0eTogMSxcbiAgICAgIHRyYW5zZm9ybTogYHNjYWxlKDEpYFxuICAgIH07XG4gIH1cbiAgaWYgKHRyYW5zaXRpb25pbmdPdXQpIHtcbiAgICBlbC5feF90cmFuc2l0aW9uLmxlYXZlLmR1cmluZyA9IHtcbiAgICAgIHRyYW5zZm9ybU9yaWdpbjogb3JpZ2luLFxuICAgICAgdHJhbnNpdGlvbkRlbGF5OiBgJHtkZWxheX1zYCxcbiAgICAgIHRyYW5zaXRpb25Qcm9wZXJ0eTogcHJvcGVydHksXG4gICAgICB0cmFuc2l0aW9uRHVyYXRpb246IGAke2R1cmF0aW9uT3V0fXNgLFxuICAgICAgdHJhbnNpdGlvblRpbWluZ0Z1bmN0aW9uOiBlYXNpbmdcbiAgICB9O1xuICAgIGVsLl94X3RyYW5zaXRpb24ubGVhdmUuc3RhcnQgPSB7XG4gICAgICBvcGFjaXR5OiAxLFxuICAgICAgdHJhbnNmb3JtOiBgc2NhbGUoMSlgXG4gICAgfTtcbiAgICBlbC5feF90cmFuc2l0aW9uLmxlYXZlLmVuZCA9IHtcbiAgICAgIG9wYWNpdHk6IG9wYWNpdHlWYWx1ZSxcbiAgICAgIHRyYW5zZm9ybTogYHNjYWxlKCR7c2NhbGVWYWx1ZX0pYFxuICAgIH07XG4gIH1cbn1cbmZ1bmN0aW9uIHJlZ2lzdGVyVHJhbnNpdGlvbk9iamVjdChlbCwgc2V0RnVuY3Rpb24sIGRlZmF1bHRWYWx1ZSA9IHt9KSB7XG4gIGlmICghZWwuX3hfdHJhbnNpdGlvbilcbiAgICBlbC5feF90cmFuc2l0aW9uID0ge1xuICAgICAgZW50ZXI6IHsgZHVyaW5nOiBkZWZhdWx0VmFsdWUsIHN0YXJ0OiBkZWZhdWx0VmFsdWUsIGVuZDogZGVmYXVsdFZhbHVlIH0sXG4gICAgICBsZWF2ZTogeyBkdXJpbmc6IGRlZmF1bHRWYWx1ZSwgc3RhcnQ6IGRlZmF1bHRWYWx1ZSwgZW5kOiBkZWZhdWx0VmFsdWUgfSxcbiAgICAgIGluKGJlZm9yZSA9ICgpID0+IHtcbiAgICAgIH0sIGFmdGVyID0gKCkgPT4ge1xuICAgICAgfSkge1xuICAgICAgICB0cmFuc2l0aW9uKGVsLCBzZXRGdW5jdGlvbiwge1xuICAgICAgICAgIGR1cmluZzogdGhpcy5lbnRlci5kdXJpbmcsXG4gICAgICAgICAgc3RhcnQ6IHRoaXMuZW50ZXIuc3RhcnQsXG4gICAgICAgICAgZW5kOiB0aGlzLmVudGVyLmVuZFxuICAgICAgICB9LCBiZWZvcmUsIGFmdGVyKTtcbiAgICAgIH0sXG4gICAgICBvdXQoYmVmb3JlID0gKCkgPT4ge1xuICAgICAgfSwgYWZ0ZXIgPSAoKSA9PiB7XG4gICAgICB9KSB7XG4gICAgICAgIHRyYW5zaXRpb24oZWwsIHNldEZ1bmN0aW9uLCB7XG4gICAgICAgICAgZHVyaW5nOiB0aGlzLmxlYXZlLmR1cmluZyxcbiAgICAgICAgICBzdGFydDogdGhpcy5sZWF2ZS5zdGFydCxcbiAgICAgICAgICBlbmQ6IHRoaXMubGVhdmUuZW5kXG4gICAgICAgIH0sIGJlZm9yZSwgYWZ0ZXIpO1xuICAgICAgfVxuICAgIH07XG59XG53aW5kb3cuRWxlbWVudC5wcm90b3R5cGUuX3hfdG9nZ2xlQW5kQ2FzY2FkZVdpdGhUcmFuc2l0aW9ucyA9IGZ1bmN0aW9uKGVsLCB2YWx1ZSwgc2hvdywgaGlkZSkge1xuICBjb25zdCBuZXh0VGljazIgPSBkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09IFwidmlzaWJsZVwiID8gcmVxdWVzdEFuaW1hdGlvbkZyYW1lIDogc2V0VGltZW91dDtcbiAgbGV0IGNsaWNrQXdheUNvbXBhdGlibGVTaG93ID0gKCkgPT4gbmV4dFRpY2syKHNob3cpO1xuICBpZiAodmFsdWUpIHtcbiAgICBpZiAoZWwuX3hfdHJhbnNpdGlvbiAmJiAoZWwuX3hfdHJhbnNpdGlvbi5lbnRlciB8fCBlbC5feF90cmFuc2l0aW9uLmxlYXZlKSkge1xuICAgICAgZWwuX3hfdHJhbnNpdGlvbi5lbnRlciAmJiAoT2JqZWN0LmVudHJpZXMoZWwuX3hfdHJhbnNpdGlvbi5lbnRlci5kdXJpbmcpLmxlbmd0aCB8fCBPYmplY3QuZW50cmllcyhlbC5feF90cmFuc2l0aW9uLmVudGVyLnN0YXJ0KS5sZW5ndGggfHwgT2JqZWN0LmVudHJpZXMoZWwuX3hfdHJhbnNpdGlvbi5lbnRlci5lbmQpLmxlbmd0aCkgPyBlbC5feF90cmFuc2l0aW9uLmluKHNob3cpIDogY2xpY2tBd2F5Q29tcGF0aWJsZVNob3coKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWwuX3hfdHJhbnNpdGlvbiA/IGVsLl94X3RyYW5zaXRpb24uaW4oc2hvdykgOiBjbGlja0F3YXlDb21wYXRpYmxlU2hvdygpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cbiAgZWwuX3hfaGlkZVByb21pc2UgPSBlbC5feF90cmFuc2l0aW9uID8gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGVsLl94X3RyYW5zaXRpb24ub3V0KCgpID0+IHtcbiAgICB9LCAoKSA9PiByZXNvbHZlKGhpZGUpKTtcbiAgICBlbC5feF90cmFuc2l0aW9uaW5nICYmIGVsLl94X3RyYW5zaXRpb25pbmcuYmVmb3JlQ2FuY2VsKCgpID0+IHJlamVjdCh7IGlzRnJvbUNhbmNlbGxlZFRyYW5zaXRpb246IHRydWUgfSkpO1xuICB9KSA6IFByb21pc2UucmVzb2x2ZShoaWRlKTtcbiAgcXVldWVNaWNyb3Rhc2soKCkgPT4ge1xuICAgIGxldCBjbG9zZXN0ID0gY2xvc2VzdEhpZGUoZWwpO1xuICAgIGlmIChjbG9zZXN0KSB7XG4gICAgICBpZiAoIWNsb3Nlc3QuX3hfaGlkZUNoaWxkcmVuKVxuICAgICAgICBjbG9zZXN0Ll94X2hpZGVDaGlsZHJlbiA9IFtdO1xuICAgICAgY2xvc2VzdC5feF9oaWRlQ2hpbGRyZW4ucHVzaChlbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5leHRUaWNrMigoKSA9PiB7XG4gICAgICAgIGxldCBoaWRlQWZ0ZXJDaGlsZHJlbiA9IChlbDIpID0+IHtcbiAgICAgICAgICBsZXQgY2FycnkgPSBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICBlbDIuX3hfaGlkZVByb21pc2UsXG4gICAgICAgICAgICAuLi4oZWwyLl94X2hpZGVDaGlsZHJlbiB8fCBbXSkubWFwKGhpZGVBZnRlckNoaWxkcmVuKVxuICAgICAgICAgIF0pLnRoZW4oKFtpXSkgPT4gaT8uKCkpO1xuICAgICAgICAgIGRlbGV0ZSBlbDIuX3hfaGlkZVByb21pc2U7XG4gICAgICAgICAgZGVsZXRlIGVsMi5feF9oaWRlQ2hpbGRyZW47XG4gICAgICAgICAgcmV0dXJuIGNhcnJ5O1xuICAgICAgICB9O1xuICAgICAgICBoaWRlQWZ0ZXJDaGlsZHJlbihlbCkuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICBpZiAoIWUuaXNGcm9tQ2FuY2VsbGVkVHJhbnNpdGlvbilcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn07XG5mdW5jdGlvbiBjbG9zZXN0SGlkZShlbCkge1xuICBsZXQgcGFyZW50ID0gZWwucGFyZW50Tm9kZTtcbiAgaWYgKCFwYXJlbnQpXG4gICAgcmV0dXJuO1xuICByZXR1cm4gcGFyZW50Ll94X2hpZGVQcm9taXNlID8gcGFyZW50IDogY2xvc2VzdEhpZGUocGFyZW50KTtcbn1cbmZ1bmN0aW9uIHRyYW5zaXRpb24oZWwsIHNldEZ1bmN0aW9uLCB7IGR1cmluZywgc3RhcnQ6IHN0YXJ0MiwgZW5kIH0gPSB7fSwgYmVmb3JlID0gKCkgPT4ge1xufSwgYWZ0ZXIgPSAoKSA9PiB7XG59KSB7XG4gIGlmIChlbC5feF90cmFuc2l0aW9uaW5nKVxuICAgIGVsLl94X3RyYW5zaXRpb25pbmcuY2FuY2VsKCk7XG4gIGlmIChPYmplY3Qua2V5cyhkdXJpbmcpLmxlbmd0aCA9PT0gMCAmJiBPYmplY3Qua2V5cyhzdGFydDIpLmxlbmd0aCA9PT0gMCAmJiBPYmplY3Qua2V5cyhlbmQpLmxlbmd0aCA9PT0gMCkge1xuICAgIGJlZm9yZSgpO1xuICAgIGFmdGVyKCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxldCB1bmRvU3RhcnQsIHVuZG9EdXJpbmcsIHVuZG9FbmQ7XG4gIHBlcmZvcm1UcmFuc2l0aW9uKGVsLCB7XG4gICAgc3RhcnQoKSB7XG4gICAgICB1bmRvU3RhcnQgPSBzZXRGdW5jdGlvbihlbCwgc3RhcnQyKTtcbiAgICB9LFxuICAgIGR1cmluZygpIHtcbiAgICAgIHVuZG9EdXJpbmcgPSBzZXRGdW5jdGlvbihlbCwgZHVyaW5nKTtcbiAgICB9LFxuICAgIGJlZm9yZSxcbiAgICBlbmQoKSB7XG4gICAgICB1bmRvU3RhcnQoKTtcbiAgICAgIHVuZG9FbmQgPSBzZXRGdW5jdGlvbihlbCwgZW5kKTtcbiAgICB9LFxuICAgIGFmdGVyLFxuICAgIGNsZWFudXAoKSB7XG4gICAgICB1bmRvRHVyaW5nKCk7XG4gICAgICB1bmRvRW5kKCk7XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIHBlcmZvcm1UcmFuc2l0aW9uKGVsLCBzdGFnZXMpIHtcbiAgbGV0IGludGVycnVwdGVkLCByZWFjaGVkQmVmb3JlLCByZWFjaGVkRW5kO1xuICBsZXQgZmluaXNoID0gb25jZSgoKSA9PiB7XG4gICAgbXV0YXRlRG9tKCgpID0+IHtcbiAgICAgIGludGVycnVwdGVkID0gdHJ1ZTtcbiAgICAgIGlmICghcmVhY2hlZEJlZm9yZSlcbiAgICAgICAgc3RhZ2VzLmJlZm9yZSgpO1xuICAgICAgaWYgKCFyZWFjaGVkRW5kKSB7XG4gICAgICAgIHN0YWdlcy5lbmQoKTtcbiAgICAgICAgcmVsZWFzZU5leHRUaWNrcygpO1xuICAgICAgfVxuICAgICAgc3RhZ2VzLmFmdGVyKCk7XG4gICAgICBpZiAoZWwuaXNDb25uZWN0ZWQpXG4gICAgICAgIHN0YWdlcy5jbGVhbnVwKCk7XG4gICAgICBkZWxldGUgZWwuX3hfdHJhbnNpdGlvbmluZztcbiAgICB9KTtcbiAgfSk7XG4gIGVsLl94X3RyYW5zaXRpb25pbmcgPSB7XG4gICAgYmVmb3JlQ2FuY2VsczogW10sXG4gICAgYmVmb3JlQ2FuY2VsKGNhbGxiYWNrKSB7XG4gICAgICB0aGlzLmJlZm9yZUNhbmNlbHMucHVzaChjYWxsYmFjayk7XG4gICAgfSxcbiAgICBjYW5jZWw6IG9uY2UoZnVuY3Rpb24oKSB7XG4gICAgICB3aGlsZSAodGhpcy5iZWZvcmVDYW5jZWxzLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmJlZm9yZUNhbmNlbHMuc2hpZnQoKSgpO1xuICAgICAgfVxuICAgICAgO1xuICAgICAgZmluaXNoKCk7XG4gICAgfSksXG4gICAgZmluaXNoXG4gIH07XG4gIG11dGF0ZURvbSgoKSA9PiB7XG4gICAgc3RhZ2VzLnN0YXJ0KCk7XG4gICAgc3RhZ2VzLmR1cmluZygpO1xuICB9KTtcbiAgaG9sZE5leHRUaWNrcygpO1xuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgIGlmIChpbnRlcnJ1cHRlZClcbiAgICAgIHJldHVybjtcbiAgICBsZXQgZHVyYXRpb24gPSBOdW1iZXIoZ2V0Q29tcHV0ZWRTdHlsZShlbCkudHJhbnNpdGlvbkR1cmF0aW9uLnJlcGxhY2UoLywuKi8sIFwiXCIpLnJlcGxhY2UoXCJzXCIsIFwiXCIpKSAqIDFlMztcbiAgICBsZXQgZGVsYXkgPSBOdW1iZXIoZ2V0Q29tcHV0ZWRTdHlsZShlbCkudHJhbnNpdGlvbkRlbGF5LnJlcGxhY2UoLywuKi8sIFwiXCIpLnJlcGxhY2UoXCJzXCIsIFwiXCIpKSAqIDFlMztcbiAgICBpZiAoZHVyYXRpb24gPT09IDApXG4gICAgICBkdXJhdGlvbiA9IE51bWJlcihnZXRDb21wdXRlZFN0eWxlKGVsKS5hbmltYXRpb25EdXJhdGlvbi5yZXBsYWNlKFwic1wiLCBcIlwiKSkgKiAxZTM7XG4gICAgbXV0YXRlRG9tKCgpID0+IHtcbiAgICAgIHN0YWdlcy5iZWZvcmUoKTtcbiAgICB9KTtcbiAgICByZWFjaGVkQmVmb3JlID0gdHJ1ZTtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgaWYgKGludGVycnVwdGVkKVxuICAgICAgICByZXR1cm47XG4gICAgICBtdXRhdGVEb20oKCkgPT4ge1xuICAgICAgICBzdGFnZXMuZW5kKCk7XG4gICAgICB9KTtcbiAgICAgIHJlbGVhc2VOZXh0VGlja3MoKTtcbiAgICAgIHNldFRpbWVvdXQoZWwuX3hfdHJhbnNpdGlvbmluZy5maW5pc2gsIGR1cmF0aW9uICsgZGVsYXkpO1xuICAgICAgcmVhY2hlZEVuZCA9IHRydWU7XG4gICAgfSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gbW9kaWZpZXJWYWx1ZShtb2RpZmllcnMsIGtleSwgZmFsbGJhY2spIHtcbiAgaWYgKG1vZGlmaWVycy5pbmRleE9mKGtleSkgPT09IC0xKVxuICAgIHJldHVybiBmYWxsYmFjaztcbiAgY29uc3QgcmF3VmFsdWUgPSBtb2RpZmllcnNbbW9kaWZpZXJzLmluZGV4T2Yoa2V5KSArIDFdO1xuICBpZiAoIXJhd1ZhbHVlKVxuICAgIHJldHVybiBmYWxsYmFjaztcbiAgaWYgKGtleSA9PT0gXCJzY2FsZVwiKSB7XG4gICAgaWYgKGlzTmFOKHJhd1ZhbHVlKSlcbiAgICAgIHJldHVybiBmYWxsYmFjaztcbiAgfVxuICBpZiAoa2V5ID09PSBcImR1cmF0aW9uXCIgfHwga2V5ID09PSBcImRlbGF5XCIpIHtcbiAgICBsZXQgbWF0Y2ggPSByYXdWYWx1ZS5tYXRjaCgvKFswLTldKyltcy8pO1xuICAgIGlmIChtYXRjaClcbiAgICAgIHJldHVybiBtYXRjaFsxXTtcbiAgfVxuICBpZiAoa2V5ID09PSBcIm9yaWdpblwiKSB7XG4gICAgaWYgKFtcInRvcFwiLCBcInJpZ2h0XCIsIFwibGVmdFwiLCBcImNlbnRlclwiLCBcImJvdHRvbVwiXS5pbmNsdWRlcyhtb2RpZmllcnNbbW9kaWZpZXJzLmluZGV4T2Yoa2V5KSArIDJdKSkge1xuICAgICAgcmV0dXJuIFtyYXdWYWx1ZSwgbW9kaWZpZXJzW21vZGlmaWVycy5pbmRleE9mKGtleSkgKyAyXV0uam9pbihcIiBcIik7XG4gICAgfVxuICB9XG4gIHJldHVybiByYXdWYWx1ZTtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2Nsb25lLmpzXG52YXIgaXNDbG9uaW5nID0gZmFsc2U7XG5mdW5jdGlvbiBza2lwRHVyaW5nQ2xvbmUoY2FsbGJhY2ssIGZhbGxiYWNrID0gKCkgPT4ge1xufSkge1xuICByZXR1cm4gKC4uLmFyZ3MpID0+IGlzQ2xvbmluZyA/IGZhbGxiYWNrKC4uLmFyZ3MpIDogY2FsbGJhY2soLi4uYXJncyk7XG59XG5mdW5jdGlvbiBvbmx5RHVyaW5nQ2xvbmUoY2FsbGJhY2spIHtcbiAgcmV0dXJuICguLi5hcmdzKSA9PiBpc0Nsb25pbmcgJiYgY2FsbGJhY2soLi4uYXJncyk7XG59XG52YXIgaW50ZXJjZXB0b3JzID0gW107XG5mdW5jdGlvbiBpbnRlcmNlcHRDbG9uZShjYWxsYmFjaykge1xuICBpbnRlcmNlcHRvcnMucHVzaChjYWxsYmFjayk7XG59XG5mdW5jdGlvbiBjbG9uZU5vZGUoZnJvbSwgdG8pIHtcbiAgaW50ZXJjZXB0b3JzLmZvckVhY2goKGkpID0+IGkoZnJvbSwgdG8pKTtcbiAgaXNDbG9uaW5nID0gdHJ1ZTtcbiAgZG9udFJlZ2lzdGVyUmVhY3RpdmVTaWRlRWZmZWN0cygoKSA9PiB7XG4gICAgaW5pdFRyZWUodG8sIChlbCwgY2FsbGJhY2spID0+IHtcbiAgICAgIGNhbGxiYWNrKGVsLCAoKSA9PiB7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG4gIGlzQ2xvbmluZyA9IGZhbHNlO1xufVxudmFyIGlzQ2xvbmluZ0xlZ2FjeSA9IGZhbHNlO1xuZnVuY3Rpb24gY2xvbmUob2xkRWwsIG5ld0VsKSB7XG4gIGlmICghbmV3RWwuX3hfZGF0YVN0YWNrKVxuICAgIG5ld0VsLl94X2RhdGFTdGFjayA9IG9sZEVsLl94X2RhdGFTdGFjaztcbiAgaXNDbG9uaW5nID0gdHJ1ZTtcbiAgaXNDbG9uaW5nTGVnYWN5ID0gdHJ1ZTtcbiAgZG9udFJlZ2lzdGVyUmVhY3RpdmVTaWRlRWZmZWN0cygoKSA9PiB7XG4gICAgY2xvbmVUcmVlKG5ld0VsKTtcbiAgfSk7XG4gIGlzQ2xvbmluZyA9IGZhbHNlO1xuICBpc0Nsb25pbmdMZWdhY3kgPSBmYWxzZTtcbn1cbmZ1bmN0aW9uIGNsb25lVHJlZShlbCkge1xuICBsZXQgaGFzUnVuVGhyb3VnaEZpcnN0RWwgPSBmYWxzZTtcbiAgbGV0IHNoYWxsb3dXYWxrZXIgPSAoZWwyLCBjYWxsYmFjaykgPT4ge1xuICAgIHdhbGsoZWwyLCAoZWwzLCBza2lwKSA9PiB7XG4gICAgICBpZiAoaGFzUnVuVGhyb3VnaEZpcnN0RWwgJiYgaXNSb290KGVsMykpXG4gICAgICAgIHJldHVybiBza2lwKCk7XG4gICAgICBoYXNSdW5UaHJvdWdoRmlyc3RFbCA9IHRydWU7XG4gICAgICBjYWxsYmFjayhlbDMsIHNraXApO1xuICAgIH0pO1xuICB9O1xuICBpbml0VHJlZShlbCwgc2hhbGxvd1dhbGtlcik7XG59XG5mdW5jdGlvbiBkb250UmVnaXN0ZXJSZWFjdGl2ZVNpZGVFZmZlY3RzKGNhbGxiYWNrKSB7XG4gIGxldCBjYWNoZSA9IGVmZmVjdDtcbiAgb3ZlcnJpZGVFZmZlY3QoKGNhbGxiYWNrMiwgZWwpID0+IHtcbiAgICBsZXQgc3RvcmVkRWZmZWN0ID0gY2FjaGUoY2FsbGJhY2syKTtcbiAgICByZWxlYXNlKHN0b3JlZEVmZmVjdCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICB9O1xuICB9KTtcbiAgY2FsbGJhY2soKTtcbiAgb3ZlcnJpZGVFZmZlY3QoY2FjaGUpO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvdXRpbHMvYmluZC5qc1xuZnVuY3Rpb24gYmluZChlbCwgbmFtZSwgdmFsdWUsIG1vZGlmaWVycyA9IFtdKSB7XG4gIGlmICghZWwuX3hfYmluZGluZ3MpXG4gICAgZWwuX3hfYmluZGluZ3MgPSByZWFjdGl2ZSh7fSk7XG4gIGVsLl94X2JpbmRpbmdzW25hbWVdID0gdmFsdWU7XG4gIG5hbWUgPSBtb2RpZmllcnMuaW5jbHVkZXMoXCJjYW1lbFwiKSA/IGNhbWVsQ2FzZShuYW1lKSA6IG5hbWU7XG4gIHN3aXRjaCAobmFtZSkge1xuICAgIGNhc2UgXCJ2YWx1ZVwiOlxuICAgICAgYmluZElucHV0VmFsdWUoZWwsIHZhbHVlKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJzdHlsZVwiOlxuICAgICAgYmluZFN0eWxlcyhlbCwgdmFsdWUpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcImNsYXNzXCI6XG4gICAgICBiaW5kQ2xhc3NlcyhlbCwgdmFsdWUpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcInNlbGVjdGVkXCI6XG4gICAgY2FzZSBcImNoZWNrZWRcIjpcbiAgICAgIGJpbmRBdHRyaWJ1dGVBbmRQcm9wZXJ0eShlbCwgbmFtZSwgdmFsdWUpO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIGJpbmRBdHRyaWJ1dGUoZWwsIG5hbWUsIHZhbHVlKTtcbiAgICAgIGJyZWFrO1xuICB9XG59XG5mdW5jdGlvbiBiaW5kSW5wdXRWYWx1ZShlbCwgdmFsdWUpIHtcbiAgaWYgKGlzUmFkaW8oZWwpKSB7XG4gICAgaWYgKGVsLmF0dHJpYnV0ZXMudmFsdWUgPT09IHZvaWQgMCkge1xuICAgICAgZWwudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgaWYgKHdpbmRvdy5mcm9tTW9kZWwpIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgICAgIGVsLmNoZWNrZWQgPSBzYWZlUGFyc2VCb29sZWFuKGVsLnZhbHVlKSA9PT0gdmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbC5jaGVja2VkID0gY2hlY2tlZEF0dHJMb29zZUNvbXBhcmUoZWwudmFsdWUsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNDaGVja2JveChlbCkpIHtcbiAgICBpZiAoTnVtYmVyLmlzSW50ZWdlcih2YWx1ZSkpIHtcbiAgICAgIGVsLnZhbHVlID0gdmFsdWU7XG4gICAgfSBlbHNlIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdHlwZW9mIHZhbHVlICE9PSBcImJvb2xlYW5cIiAmJiAhW251bGwsIHZvaWQgMF0uaW5jbHVkZXModmFsdWUpKSB7XG4gICAgICBlbC52YWx1ZSA9IFN0cmluZyh2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICBlbC5jaGVja2VkID0gdmFsdWUuc29tZSgodmFsKSA9PiBjaGVja2VkQXR0ckxvb3NlQ29tcGFyZSh2YWwsIGVsLnZhbHVlKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbC5jaGVja2VkID0gISF2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoZWwudGFnTmFtZSA9PT0gXCJTRUxFQ1RcIikge1xuICAgIHVwZGF0ZVNlbGVjdChlbCwgdmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIGlmIChlbC52YWx1ZSA9PT0gdmFsdWUpXG4gICAgICByZXR1cm47XG4gICAgZWwudmFsdWUgPSB2YWx1ZSA9PT0gdm9pZCAwID8gXCJcIiA6IHZhbHVlO1xuICB9XG59XG5mdW5jdGlvbiBiaW5kQ2xhc3NlcyhlbCwgdmFsdWUpIHtcbiAgaWYgKGVsLl94X3VuZG9BZGRlZENsYXNzZXMpXG4gICAgZWwuX3hfdW5kb0FkZGVkQ2xhc3NlcygpO1xuICBlbC5feF91bmRvQWRkZWRDbGFzc2VzID0gc2V0Q2xhc3NlcyhlbCwgdmFsdWUpO1xufVxuZnVuY3Rpb24gYmluZFN0eWxlcyhlbCwgdmFsdWUpIHtcbiAgaWYgKGVsLl94X3VuZG9BZGRlZFN0eWxlcylcbiAgICBlbC5feF91bmRvQWRkZWRTdHlsZXMoKTtcbiAgZWwuX3hfdW5kb0FkZGVkU3R5bGVzID0gc2V0U3R5bGVzKGVsLCB2YWx1ZSk7XG59XG5mdW5jdGlvbiBiaW5kQXR0cmlidXRlQW5kUHJvcGVydHkoZWwsIG5hbWUsIHZhbHVlKSB7XG4gIGJpbmRBdHRyaWJ1dGUoZWwsIG5hbWUsIHZhbHVlKTtcbiAgc2V0UHJvcGVydHlJZkNoYW5nZWQoZWwsIG5hbWUsIHZhbHVlKTtcbn1cbmZ1bmN0aW9uIGJpbmRBdHRyaWJ1dGUoZWwsIG5hbWUsIHZhbHVlKSB7XG4gIGlmIChbbnVsbCwgdm9pZCAwLCBmYWxzZV0uaW5jbHVkZXModmFsdWUpICYmIGF0dHJpYnV0ZVNob3VsZG50QmVQcmVzZXJ2ZWRJZkZhbHN5KG5hbWUpKSB7XG4gICAgZWwucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICB9IGVsc2Uge1xuICAgIGlmIChpc0Jvb2xlYW5BdHRyKG5hbWUpKVxuICAgICAgdmFsdWUgPSBuYW1lO1xuICAgIHNldElmQ2hhbmdlZChlbCwgbmFtZSwgdmFsdWUpO1xuICB9XG59XG5mdW5jdGlvbiBzZXRJZkNoYW5nZWQoZWwsIGF0dHJOYW1lLCB2YWx1ZSkge1xuICBpZiAoZWwuZ2V0QXR0cmlidXRlKGF0dHJOYW1lKSAhPSB2YWx1ZSkge1xuICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyTmFtZSwgdmFsdWUpO1xuICB9XG59XG5mdW5jdGlvbiBzZXRQcm9wZXJ0eUlmQ2hhbmdlZChlbCwgcHJvcE5hbWUsIHZhbHVlKSB7XG4gIGlmIChlbFtwcm9wTmFtZV0gIT09IHZhbHVlKSB7XG4gICAgZWxbcHJvcE5hbWVdID0gdmFsdWU7XG4gIH1cbn1cbmZ1bmN0aW9uIHVwZGF0ZVNlbGVjdChlbCwgdmFsdWUpIHtcbiAgY29uc3QgYXJyYXlXcmFwcGVkVmFsdWUgPSBbXS5jb25jYXQodmFsdWUpLm1hcCgodmFsdWUyKSA9PiB7XG4gICAgcmV0dXJuIHZhbHVlMiArIFwiXCI7XG4gIH0pO1xuICBBcnJheS5mcm9tKGVsLm9wdGlvbnMpLmZvckVhY2goKG9wdGlvbikgPT4ge1xuICAgIG9wdGlvbi5zZWxlY3RlZCA9IGFycmF5V3JhcHBlZFZhbHVlLmluY2x1ZGVzKG9wdGlvbi52YWx1ZSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gY2FtZWxDYXNlKHN1YmplY3QpIHtcbiAgcmV0dXJuIHN1YmplY3QudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC8tKFxcdykvZywgKG1hdGNoLCBjaGFyKSA9PiBjaGFyLnRvVXBwZXJDYXNlKCkpO1xufVxuZnVuY3Rpb24gY2hlY2tlZEF0dHJMb29zZUNvbXBhcmUodmFsdWVBLCB2YWx1ZUIpIHtcbiAgcmV0dXJuIHZhbHVlQSA9PSB2YWx1ZUI7XG59XG5mdW5jdGlvbiBzYWZlUGFyc2VCb29sZWFuKHJhd1ZhbHVlKSB7XG4gIGlmIChbMSwgXCIxXCIsIFwidHJ1ZVwiLCBcIm9uXCIsIFwieWVzXCIsIHRydWVdLmluY2x1ZGVzKHJhd1ZhbHVlKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChbMCwgXCIwXCIsIFwiZmFsc2VcIiwgXCJvZmZcIiwgXCJub1wiLCBmYWxzZV0uaW5jbHVkZXMocmF3VmFsdWUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiByYXdWYWx1ZSA/IEJvb2xlYW4ocmF3VmFsdWUpIDogbnVsbDtcbn1cbnZhciBib29sZWFuQXR0cmlidXRlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtcbiAgXCJhbGxvd2Z1bGxzY3JlZW5cIixcbiAgXCJhc3luY1wiLFxuICBcImF1dG9mb2N1c1wiLFxuICBcImF1dG9wbGF5XCIsXG4gIFwiY2hlY2tlZFwiLFxuICBcImNvbnRyb2xzXCIsXG4gIFwiZGVmYXVsdFwiLFxuICBcImRlZmVyXCIsXG4gIFwiZGlzYWJsZWRcIixcbiAgXCJmb3Jtbm92YWxpZGF0ZVwiLFxuICBcImluZXJ0XCIsXG4gIFwiaXNtYXBcIixcbiAgXCJpdGVtc2NvcGVcIixcbiAgXCJsb29wXCIsXG4gIFwibXVsdGlwbGVcIixcbiAgXCJtdXRlZFwiLFxuICBcIm5vbW9kdWxlXCIsXG4gIFwibm92YWxpZGF0ZVwiLFxuICBcIm9wZW5cIixcbiAgXCJwbGF5c2lubGluZVwiLFxuICBcInJlYWRvbmx5XCIsXG4gIFwicmVxdWlyZWRcIixcbiAgXCJyZXZlcnNlZFwiLFxuICBcInNlbGVjdGVkXCIsXG4gIFwic2hhZG93cm9vdGNsb25hYmxlXCIsXG4gIFwic2hhZG93cm9vdGRlbGVnYXRlc2ZvY3VzXCIsXG4gIFwic2hhZG93cm9vdHNlcmlhbGl6YWJsZVwiXG5dKTtcbmZ1bmN0aW9uIGlzQm9vbGVhbkF0dHIoYXR0ck5hbWUpIHtcbiAgcmV0dXJuIGJvb2xlYW5BdHRyaWJ1dGVzLmhhcyhhdHRyTmFtZSk7XG59XG5mdW5jdGlvbiBhdHRyaWJ1dGVTaG91bGRudEJlUHJlc2VydmVkSWZGYWxzeShuYW1lKSB7XG4gIHJldHVybiAhW1wiYXJpYS1wcmVzc2VkXCIsIFwiYXJpYS1jaGVja2VkXCIsIFwiYXJpYS1leHBhbmRlZFwiLCBcImFyaWEtc2VsZWN0ZWRcIl0uaW5jbHVkZXMobmFtZSk7XG59XG5mdW5jdGlvbiBnZXRCaW5kaW5nKGVsLCBuYW1lLCBmYWxsYmFjaykge1xuICBpZiAoZWwuX3hfYmluZGluZ3MgJiYgZWwuX3hfYmluZGluZ3NbbmFtZV0gIT09IHZvaWQgMClcbiAgICByZXR1cm4gZWwuX3hfYmluZGluZ3NbbmFtZV07XG4gIHJldHVybiBnZXRBdHRyaWJ1dGVCaW5kaW5nKGVsLCBuYW1lLCBmYWxsYmFjayk7XG59XG5mdW5jdGlvbiBleHRyYWN0UHJvcChlbCwgbmFtZSwgZmFsbGJhY2ssIGV4dHJhY3QgPSB0cnVlKSB7XG4gIGlmIChlbC5feF9iaW5kaW5ncyAmJiBlbC5feF9iaW5kaW5nc1tuYW1lXSAhPT0gdm9pZCAwKVxuICAgIHJldHVybiBlbC5feF9iaW5kaW5nc1tuYW1lXTtcbiAgaWYgKGVsLl94X2lubGluZUJpbmRpbmdzICYmIGVsLl94X2lubGluZUJpbmRpbmdzW25hbWVdICE9PSB2b2lkIDApIHtcbiAgICBsZXQgYmluZGluZyA9IGVsLl94X2lubGluZUJpbmRpbmdzW25hbWVdO1xuICAgIGJpbmRpbmcuZXh0cmFjdCA9IGV4dHJhY3Q7XG4gICAgcmV0dXJuIGRvbnRBdXRvRXZhbHVhdGVGdW5jdGlvbnMoKCkgPT4ge1xuICAgICAgcmV0dXJuIGV2YWx1YXRlKGVsLCBiaW5kaW5nLmV4cHJlc3Npb24pO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBnZXRBdHRyaWJ1dGVCaW5kaW5nKGVsLCBuYW1lLCBmYWxsYmFjayk7XG59XG5mdW5jdGlvbiBnZXRBdHRyaWJ1dGVCaW5kaW5nKGVsLCBuYW1lLCBmYWxsYmFjaykge1xuICBsZXQgYXR0ciA9IGVsLmdldEF0dHJpYnV0ZShuYW1lKTtcbiAgaWYgKGF0dHIgPT09IG51bGwpXG4gICAgcmV0dXJuIHR5cGVvZiBmYWxsYmFjayA9PT0gXCJmdW5jdGlvblwiID8gZmFsbGJhY2soKSA6IGZhbGxiYWNrO1xuICBpZiAoYXR0ciA9PT0gXCJcIilcbiAgICByZXR1cm4gdHJ1ZTtcbiAgaWYgKGlzQm9vbGVhbkF0dHIobmFtZSkpIHtcbiAgICByZXR1cm4gISFbbmFtZSwgXCJ0cnVlXCJdLmluY2x1ZGVzKGF0dHIpO1xuICB9XG4gIHJldHVybiBhdHRyO1xufVxuZnVuY3Rpb24gaXNDaGVja2JveChlbCkge1xuICByZXR1cm4gZWwudHlwZSA9PT0gXCJjaGVja2JveFwiIHx8IGVsLmxvY2FsTmFtZSA9PT0gXCJ1aS1jaGVja2JveFwiIHx8IGVsLmxvY2FsTmFtZSA9PT0gXCJ1aS1zd2l0Y2hcIjtcbn1cbmZ1bmN0aW9uIGlzUmFkaW8oZWwpIHtcbiAgcmV0dXJuIGVsLnR5cGUgPT09IFwicmFkaW9cIiB8fCBlbC5sb2NhbE5hbWUgPT09IFwidWktcmFkaW9cIjtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL3V0aWxzL2RlYm91bmNlLmpzXG5mdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0KSB7XG4gIHZhciB0aW1lb3V0O1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNvbnRleHQgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzO1xuICAgIHZhciBsYXRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgIH07XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgfTtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL3V0aWxzL3Rocm90dGxlLmpzXG5mdW5jdGlvbiB0aHJvdHRsZShmdW5jLCBsaW1pdCkge1xuICBsZXQgaW5UaHJvdHRsZTtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIGxldCBjb250ZXh0ID0gdGhpcywgYXJncyA9IGFyZ3VtZW50cztcbiAgICBpZiAoIWluVGhyb3R0bGUpIHtcbiAgICAgIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICBpblRocm90dGxlID0gdHJ1ZTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gaW5UaHJvdHRsZSA9IGZhbHNlLCBsaW1pdCk7XG4gICAgfVxuICB9O1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvZW50YW5nbGUuanNcbmZ1bmN0aW9uIGVudGFuZ2xlKHsgZ2V0OiBvdXRlckdldCwgc2V0OiBvdXRlclNldCB9LCB7IGdldDogaW5uZXJHZXQsIHNldDogaW5uZXJTZXQgfSkge1xuICBsZXQgZmlyc3RSdW4gPSB0cnVlO1xuICBsZXQgb3V0ZXJIYXNoO1xuICBsZXQgaW5uZXJIYXNoO1xuICBsZXQgcmVmZXJlbmNlID0gZWZmZWN0KCgpID0+IHtcbiAgICBsZXQgb3V0ZXIgPSBvdXRlckdldCgpO1xuICAgIGxldCBpbm5lciA9IGlubmVyR2V0KCk7XG4gICAgaWYgKGZpcnN0UnVuKSB7XG4gICAgICBpbm5lclNldChjbG9uZUlmT2JqZWN0KG91dGVyKSk7XG4gICAgICBmaXJzdFJ1biA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgb3V0ZXJIYXNoTGF0ZXN0ID0gSlNPTi5zdHJpbmdpZnkob3V0ZXIpO1xuICAgICAgbGV0IGlubmVySGFzaExhdGVzdCA9IEpTT04uc3RyaW5naWZ5KGlubmVyKTtcbiAgICAgIGlmIChvdXRlckhhc2hMYXRlc3QgIT09IG91dGVySGFzaCkge1xuICAgICAgICBpbm5lclNldChjbG9uZUlmT2JqZWN0KG91dGVyKSk7XG4gICAgICB9IGVsc2UgaWYgKG91dGVySGFzaExhdGVzdCAhPT0gaW5uZXJIYXNoTGF0ZXN0KSB7XG4gICAgICAgIG91dGVyU2V0KGNsb25lSWZPYmplY3QoaW5uZXIpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICB9XG4gICAgfVxuICAgIG91dGVySGFzaCA9IEpTT04uc3RyaW5naWZ5KG91dGVyR2V0KCkpO1xuICAgIGlubmVySGFzaCA9IEpTT04uc3RyaW5naWZ5KGlubmVyR2V0KCkpO1xuICB9KTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICByZWxlYXNlKHJlZmVyZW5jZSk7XG4gIH07XG59XG5mdW5jdGlvbiBjbG9uZUlmT2JqZWN0KHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgPyBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHZhbHVlKSkgOiB2YWx1ZTtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL3BsdWdpbi5qc1xuZnVuY3Rpb24gcGx1Z2luKGNhbGxiYWNrKSB7XG4gIGxldCBjYWxsYmFja3MgPSBBcnJheS5pc0FycmF5KGNhbGxiYWNrKSA/IGNhbGxiYWNrIDogW2NhbGxiYWNrXTtcbiAgY2FsbGJhY2tzLmZvckVhY2goKGkpID0+IGkoYWxwaW5lX2RlZmF1bHQpKTtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL3N0b3JlLmpzXG52YXIgc3RvcmVzID0ge307XG52YXIgaXNSZWFjdGl2ZSA9IGZhbHNlO1xuZnVuY3Rpb24gc3RvcmUobmFtZSwgdmFsdWUpIHtcbiAgaWYgKCFpc1JlYWN0aXZlKSB7XG4gICAgc3RvcmVzID0gcmVhY3RpdmUoc3RvcmVzKTtcbiAgICBpc1JlYWN0aXZlID0gdHJ1ZTtcbiAgfVxuICBpZiAodmFsdWUgPT09IHZvaWQgMCkge1xuICAgIHJldHVybiBzdG9yZXNbbmFtZV07XG4gIH1cbiAgc3RvcmVzW25hbWVdID0gdmFsdWU7XG4gIGluaXRJbnRlcmNlcHRvcnMoc3RvcmVzW25hbWVdKTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZS5oYXNPd25Qcm9wZXJ0eShcImluaXRcIikgJiYgdHlwZW9mIHZhbHVlLmluaXQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHN0b3Jlc1tuYW1lXS5pbml0KCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGdldFN0b3JlcygpIHtcbiAgcmV0dXJuIHN0b3Jlcztcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2JpbmRzLmpzXG52YXIgYmluZHMgPSB7fTtcbmZ1bmN0aW9uIGJpbmQyKG5hbWUsIGJpbmRpbmdzKSB7XG4gIGxldCBnZXRCaW5kaW5ncyA9IHR5cGVvZiBiaW5kaW5ncyAhPT0gXCJmdW5jdGlvblwiID8gKCkgPT4gYmluZGluZ3MgOiBiaW5kaW5ncztcbiAgaWYgKG5hbWUgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgcmV0dXJuIGFwcGx5QmluZGluZ3NPYmplY3QobmFtZSwgZ2V0QmluZGluZ3MoKSk7XG4gIH0gZWxzZSB7XG4gICAgYmluZHNbbmFtZV0gPSBnZXRCaW5kaW5ncztcbiAgfVxuICByZXR1cm4gKCkgPT4ge1xuICB9O1xufVxuZnVuY3Rpb24gaW5qZWN0QmluZGluZ1Byb3ZpZGVycyhvYmopIHtcbiAgT2JqZWN0LmVudHJpZXMoYmluZHMpLmZvckVhY2goKFtuYW1lLCBjYWxsYmFja10pID0+IHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBuYW1lLCB7XG4gICAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayguLi5hcmdzKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBvYmo7XG59XG5mdW5jdGlvbiBhcHBseUJpbmRpbmdzT2JqZWN0KGVsLCBvYmosIG9yaWdpbmFsKSB7XG4gIGxldCBjbGVhbnVwUnVubmVycyA9IFtdO1xuICB3aGlsZSAoY2xlYW51cFJ1bm5lcnMubGVuZ3RoKVxuICAgIGNsZWFudXBSdW5uZXJzLnBvcCgpKCk7XG4gIGxldCBhdHRyaWJ1dGVzID0gT2JqZWN0LmVudHJpZXMob2JqKS5tYXAoKFtuYW1lLCB2YWx1ZV0pID0+ICh7IG5hbWUsIHZhbHVlIH0pKTtcbiAgbGV0IHN0YXRpY0F0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzT25seShhdHRyaWJ1dGVzKTtcbiAgYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXMubWFwKChhdHRyaWJ1dGUpID0+IHtcbiAgICBpZiAoc3RhdGljQXR0cmlidXRlcy5maW5kKChhdHRyKSA9PiBhdHRyLm5hbWUgPT09IGF0dHJpYnV0ZS5uYW1lKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogYHgtYmluZDoke2F0dHJpYnV0ZS5uYW1lfWAsXG4gICAgICAgIHZhbHVlOiBgXCIke2F0dHJpYnV0ZS52YWx1ZX1cImBcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBhdHRyaWJ1dGU7XG4gIH0pO1xuICBkaXJlY3RpdmVzKGVsLCBhdHRyaWJ1dGVzLCBvcmlnaW5hbCkubWFwKChoYW5kbGUpID0+IHtcbiAgICBjbGVhbnVwUnVubmVycy5wdXNoKGhhbmRsZS5ydW5DbGVhbnVwcyk7XG4gICAgaGFuZGxlKCk7XG4gIH0pO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIHdoaWxlIChjbGVhbnVwUnVubmVycy5sZW5ndGgpXG4gICAgICBjbGVhbnVwUnVubmVycy5wb3AoKSgpO1xuICB9O1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvZGF0YXMuanNcbnZhciBkYXRhcyA9IHt9O1xuZnVuY3Rpb24gZGF0YShuYW1lLCBjYWxsYmFjaykge1xuICBkYXRhc1tuYW1lXSA9IGNhbGxiYWNrO1xufVxuZnVuY3Rpb24gaW5qZWN0RGF0YVByb3ZpZGVycyhvYmosIGNvbnRleHQpIHtcbiAgT2JqZWN0LmVudHJpZXMoZGF0YXMpLmZvckVhY2goKFtuYW1lLCBjYWxsYmFja10pID0+IHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBuYW1lLCB7XG4gICAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjay5iaW5kKGNvbnRleHQpKC4uLmFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlXG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gb2JqO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvYWxwaW5lLmpzXG52YXIgQWxwaW5lID0ge1xuICBnZXQgcmVhY3RpdmUoKSB7XG4gICAgcmV0dXJuIHJlYWN0aXZlO1xuICB9LFxuICBnZXQgcmVsZWFzZSgpIHtcbiAgICByZXR1cm4gcmVsZWFzZTtcbiAgfSxcbiAgZ2V0IGVmZmVjdCgpIHtcbiAgICByZXR1cm4gZWZmZWN0O1xuICB9LFxuICBnZXQgcmF3KCkge1xuICAgIHJldHVybiByYXc7XG4gIH0sXG4gIHZlcnNpb246IFwiMy4xNC45XCIsXG4gIGZsdXNoQW5kU3RvcERlZmVycmluZ011dGF0aW9ucyxcbiAgZG9udEF1dG9FdmFsdWF0ZUZ1bmN0aW9ucyxcbiAgZGlzYWJsZUVmZmVjdFNjaGVkdWxpbmcsXG4gIHN0YXJ0T2JzZXJ2aW5nTXV0YXRpb25zLFxuICBzdG9wT2JzZXJ2aW5nTXV0YXRpb25zLFxuICBzZXRSZWFjdGl2aXR5RW5naW5lLFxuICBvbkF0dHJpYnV0ZVJlbW92ZWQsXG4gIG9uQXR0cmlidXRlc0FkZGVkLFxuICBjbG9zZXN0RGF0YVN0YWNrLFxuICBza2lwRHVyaW5nQ2xvbmUsXG4gIG9ubHlEdXJpbmdDbG9uZSxcbiAgYWRkUm9vdFNlbGVjdG9yLFxuICBhZGRJbml0U2VsZWN0b3IsXG4gIGludGVyY2VwdENsb25lLFxuICBhZGRTY29wZVRvTm9kZSxcbiAgZGVmZXJNdXRhdGlvbnMsXG4gIG1hcEF0dHJpYnV0ZXMsXG4gIGV2YWx1YXRlTGF0ZXIsXG4gIGludGVyY2VwdEluaXQsXG4gIHNldEV2YWx1YXRvcixcbiAgbWVyZ2VQcm94aWVzLFxuICBleHRyYWN0UHJvcCxcbiAgZmluZENsb3Nlc3QsXG4gIG9uRWxSZW1vdmVkLFxuICBjbG9zZXN0Um9vdCxcbiAgZGVzdHJveVRyZWUsXG4gIGludGVyY2VwdG9yLFxuICAvLyBJTlRFUk5BTDogbm90IHB1YmxpYyBBUEkgYW5kIGlzIHN1YmplY3QgdG8gY2hhbmdlIHdpdGhvdXQgbWFqb3IgcmVsZWFzZS5cbiAgdHJhbnNpdGlvbixcbiAgLy8gSU5URVJOQUxcbiAgc2V0U3R5bGVzLFxuICAvLyBJTlRFUk5BTFxuICBtdXRhdGVEb20sXG4gIGRpcmVjdGl2ZSxcbiAgZW50YW5nbGUsXG4gIHRocm90dGxlLFxuICBkZWJvdW5jZSxcbiAgZXZhbHVhdGUsXG4gIGluaXRUcmVlLFxuICBuZXh0VGljayxcbiAgcHJlZml4ZWQ6IHByZWZpeCxcbiAgcHJlZml4OiBzZXRQcmVmaXgsXG4gIHBsdWdpbixcbiAgbWFnaWMsXG4gIHN0b3JlLFxuICBzdGFydCxcbiAgY2xvbmUsXG4gIC8vIElOVEVSTkFMXG4gIGNsb25lTm9kZSxcbiAgLy8gSU5URVJOQUxcbiAgYm91bmQ6IGdldEJpbmRpbmcsXG4gICRkYXRhOiBzY29wZSxcbiAgd2F0Y2gsXG4gIHdhbGssXG4gIGRhdGEsXG4gIGJpbmQ6IGJpbmQyXG59O1xudmFyIGFscGluZV9kZWZhdWx0ID0gQWxwaW5lO1xuXG4vLyBub2RlX21vZHVsZXMvQHZ1ZS9zaGFyZWQvZGlzdC9zaGFyZWQuZXNtLWJ1bmRsZXIuanNcbmZ1bmN0aW9uIG1ha2VNYXAoc3RyLCBleHBlY3RzTG93ZXJDYXNlKSB7XG4gIGNvbnN0IG1hcCA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBjb25zdCBsaXN0ID0gc3RyLnNwbGl0KFwiLFwiKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgbWFwW2xpc3RbaV1dID0gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZXhwZWN0c0xvd2VyQ2FzZSA/ICh2YWwpID0+ICEhbWFwW3ZhbC50b0xvd2VyQ2FzZSgpXSA6ICh2YWwpID0+ICEhbWFwW3ZhbF07XG59XG52YXIgc3BlY2lhbEJvb2xlYW5BdHRycyA9IGBpdGVtc2NvcGUsYWxsb3dmdWxsc2NyZWVuLGZvcm1ub3ZhbGlkYXRlLGlzbWFwLG5vbW9kdWxlLG5vdmFsaWRhdGUscmVhZG9ubHlgO1xudmFyIGlzQm9vbGVhbkF0dHIyID0gLyogQF9fUFVSRV9fICovIG1ha2VNYXAoc3BlY2lhbEJvb2xlYW5BdHRycyArIGAsYXN5bmMsYXV0b2ZvY3VzLGF1dG9wbGF5LGNvbnRyb2xzLGRlZmF1bHQsZGVmZXIsZGlzYWJsZWQsaGlkZGVuLGxvb3Asb3BlbixyZXF1aXJlZCxyZXZlcnNlZCxzY29wZWQsc2VhbWxlc3MsY2hlY2tlZCxtdXRlZCxtdWx0aXBsZSxzZWxlY3RlZGApO1xudmFyIEVNUFRZX09CSiA9IHRydWUgPyBPYmplY3QuZnJlZXplKHt9KSA6IHt9O1xudmFyIEVNUFRZX0FSUiA9IHRydWUgPyBPYmplY3QuZnJlZXplKFtdKSA6IFtdO1xudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBoYXNPd24gPSAodmFsLCBrZXkpID0+IGhhc093blByb3BlcnR5LmNhbGwodmFsLCBrZXkpO1xudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xudmFyIGlzTWFwID0gKHZhbCkgPT4gdG9UeXBlU3RyaW5nKHZhbCkgPT09IFwiW29iamVjdCBNYXBdXCI7XG52YXIgaXNTdHJpbmcgPSAodmFsKSA9PiB0eXBlb2YgdmFsID09PSBcInN0cmluZ1wiO1xudmFyIGlzU3ltYm9sID0gKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gXCJzeW1ib2xcIjtcbnZhciBpc09iamVjdCA9ICh2YWwpID0+IHZhbCAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiO1xudmFyIG9iamVjdFRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbnZhciB0b1R5cGVTdHJpbmcgPSAodmFsdWUpID0+IG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpO1xudmFyIHRvUmF3VHlwZSA9ICh2YWx1ZSkgPT4ge1xuICByZXR1cm4gdG9UeXBlU3RyaW5nKHZhbHVlKS5zbGljZSg4LCAtMSk7XG59O1xudmFyIGlzSW50ZWdlcktleSA9IChrZXkpID0+IGlzU3RyaW5nKGtleSkgJiYga2V5ICE9PSBcIk5hTlwiICYmIGtleVswXSAhPT0gXCItXCIgJiYgXCJcIiArIHBhcnNlSW50KGtleSwgMTApID09PSBrZXk7XG52YXIgY2FjaGVTdHJpbmdGdW5jdGlvbiA9IChmbikgPT4ge1xuICBjb25zdCBjYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuICByZXR1cm4gKHN0cikgPT4ge1xuICAgIGNvbnN0IGhpdCA9IGNhY2hlW3N0cl07XG4gICAgcmV0dXJuIGhpdCB8fCAoY2FjaGVbc3RyXSA9IGZuKHN0cikpO1xuICB9O1xufTtcbnZhciBjYW1lbGl6ZVJFID0gLy0oXFx3KS9nO1xudmFyIGNhbWVsaXplID0gY2FjaGVTdHJpbmdGdW5jdGlvbigoc3RyKSA9PiB7XG4gIHJldHVybiBzdHIucmVwbGFjZShjYW1lbGl6ZVJFLCAoXywgYykgPT4gYyA/IGMudG9VcHBlckNhc2UoKSA6IFwiXCIpO1xufSk7XG52YXIgaHlwaGVuYXRlUkUgPSAvXFxCKFtBLVpdKS9nO1xudmFyIGh5cGhlbmF0ZSA9IGNhY2hlU3RyaW5nRnVuY3Rpb24oKHN0cikgPT4gc3RyLnJlcGxhY2UoaHlwaGVuYXRlUkUsIFwiLSQxXCIpLnRvTG93ZXJDYXNlKCkpO1xudmFyIGNhcGl0YWxpemUgPSBjYWNoZVN0cmluZ0Z1bmN0aW9uKChzdHIpID0+IHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKSk7XG52YXIgdG9IYW5kbGVyS2V5ID0gY2FjaGVTdHJpbmdGdW5jdGlvbigoc3RyKSA9PiBzdHIgPyBgb24ke2NhcGl0YWxpemUoc3RyKX1gIDogYGApO1xudmFyIGhhc0NoYW5nZWQgPSAodmFsdWUsIG9sZFZhbHVlKSA9PiB2YWx1ZSAhPT0gb2xkVmFsdWUgJiYgKHZhbHVlID09PSB2YWx1ZSB8fCBvbGRWYWx1ZSA9PT0gb2xkVmFsdWUpO1xuXG4vLyBub2RlX21vZHVsZXMvQHZ1ZS9yZWFjdGl2aXR5L2Rpc3QvcmVhY3Rpdml0eS5lc20tYnVuZGxlci5qc1xudmFyIHRhcmdldE1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xudmFyIGVmZmVjdFN0YWNrID0gW107XG52YXIgYWN0aXZlRWZmZWN0O1xudmFyIElURVJBVEVfS0VZID0gU3ltYm9sKHRydWUgPyBcIml0ZXJhdGVcIiA6IFwiXCIpO1xudmFyIE1BUF9LRVlfSVRFUkFURV9LRVkgPSBTeW1ib2wodHJ1ZSA/IFwiTWFwIGtleSBpdGVyYXRlXCIgOiBcIlwiKTtcbmZ1bmN0aW9uIGlzRWZmZWN0KGZuKSB7XG4gIHJldHVybiBmbiAmJiBmbi5faXNFZmZlY3QgPT09IHRydWU7XG59XG5mdW5jdGlvbiBlZmZlY3QyKGZuLCBvcHRpb25zID0gRU1QVFlfT0JKKSB7XG4gIGlmIChpc0VmZmVjdChmbikpIHtcbiAgICBmbiA9IGZuLnJhdztcbiAgfVxuICBjb25zdCBlZmZlY3QzID0gY3JlYXRlUmVhY3RpdmVFZmZlY3QoZm4sIG9wdGlvbnMpO1xuICBpZiAoIW9wdGlvbnMubGF6eSkge1xuICAgIGVmZmVjdDMoKTtcbiAgfVxuICByZXR1cm4gZWZmZWN0Mztcbn1cbmZ1bmN0aW9uIHN0b3AoZWZmZWN0Mykge1xuICBpZiAoZWZmZWN0My5hY3RpdmUpIHtcbiAgICBjbGVhbnVwKGVmZmVjdDMpO1xuICAgIGlmIChlZmZlY3QzLm9wdGlvbnMub25TdG9wKSB7XG4gICAgICBlZmZlY3QzLm9wdGlvbnMub25TdG9wKCk7XG4gICAgfVxuICAgIGVmZmVjdDMuYWN0aXZlID0gZmFsc2U7XG4gIH1cbn1cbnZhciB1aWQgPSAwO1xuZnVuY3Rpb24gY3JlYXRlUmVhY3RpdmVFZmZlY3QoZm4sIG9wdGlvbnMpIHtcbiAgY29uc3QgZWZmZWN0MyA9IGZ1bmN0aW9uIHJlYWN0aXZlRWZmZWN0KCkge1xuICAgIGlmICghZWZmZWN0My5hY3RpdmUpIHtcbiAgICAgIHJldHVybiBmbigpO1xuICAgIH1cbiAgICBpZiAoIWVmZmVjdFN0YWNrLmluY2x1ZGVzKGVmZmVjdDMpKSB7XG4gICAgICBjbGVhbnVwKGVmZmVjdDMpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZW5hYmxlVHJhY2tpbmcoKTtcbiAgICAgICAgZWZmZWN0U3RhY2sucHVzaChlZmZlY3QzKTtcbiAgICAgICAgYWN0aXZlRWZmZWN0ID0gZWZmZWN0MztcbiAgICAgICAgcmV0dXJuIGZuKCk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBlZmZlY3RTdGFjay5wb3AoKTtcbiAgICAgICAgcmVzZXRUcmFja2luZygpO1xuICAgICAgICBhY3RpdmVFZmZlY3QgPSBlZmZlY3RTdGFja1tlZmZlY3RTdGFjay5sZW5ndGggLSAxXTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGVmZmVjdDMuaWQgPSB1aWQrKztcbiAgZWZmZWN0My5hbGxvd1JlY3Vyc2UgPSAhIW9wdGlvbnMuYWxsb3dSZWN1cnNlO1xuICBlZmZlY3QzLl9pc0VmZmVjdCA9IHRydWU7XG4gIGVmZmVjdDMuYWN0aXZlID0gdHJ1ZTtcbiAgZWZmZWN0My5yYXcgPSBmbjtcbiAgZWZmZWN0My5kZXBzID0gW107XG4gIGVmZmVjdDMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIHJldHVybiBlZmZlY3QzO1xufVxuZnVuY3Rpb24gY2xlYW51cChlZmZlY3QzKSB7XG4gIGNvbnN0IHsgZGVwcyB9ID0gZWZmZWN0MztcbiAgaWYgKGRlcHMubGVuZ3RoKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBkZXBzW2ldLmRlbGV0ZShlZmZlY3QzKTtcbiAgICB9XG4gICAgZGVwcy5sZW5ndGggPSAwO1xuICB9XG59XG52YXIgc2hvdWxkVHJhY2sgPSB0cnVlO1xudmFyIHRyYWNrU3RhY2sgPSBbXTtcbmZ1bmN0aW9uIHBhdXNlVHJhY2tpbmcoKSB7XG4gIHRyYWNrU3RhY2sucHVzaChzaG91bGRUcmFjayk7XG4gIHNob3VsZFRyYWNrID0gZmFsc2U7XG59XG5mdW5jdGlvbiBlbmFibGVUcmFja2luZygpIHtcbiAgdHJhY2tTdGFjay5wdXNoKHNob3VsZFRyYWNrKTtcbiAgc2hvdWxkVHJhY2sgPSB0cnVlO1xufVxuZnVuY3Rpb24gcmVzZXRUcmFja2luZygpIHtcbiAgY29uc3QgbGFzdCA9IHRyYWNrU3RhY2sucG9wKCk7XG4gIHNob3VsZFRyYWNrID0gbGFzdCA9PT0gdm9pZCAwID8gdHJ1ZSA6IGxhc3Q7XG59XG5mdW5jdGlvbiB0cmFjayh0YXJnZXQsIHR5cGUsIGtleSkge1xuICBpZiAoIXNob3VsZFRyYWNrIHx8IGFjdGl2ZUVmZmVjdCA9PT0gdm9pZCAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxldCBkZXBzTWFwID0gdGFyZ2V0TWFwLmdldCh0YXJnZXQpO1xuICBpZiAoIWRlcHNNYXApIHtcbiAgICB0YXJnZXRNYXAuc2V0KHRhcmdldCwgZGVwc01hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCkpO1xuICB9XG4gIGxldCBkZXAgPSBkZXBzTWFwLmdldChrZXkpO1xuICBpZiAoIWRlcCkge1xuICAgIGRlcHNNYXAuc2V0KGtleSwgZGVwID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSk7XG4gIH1cbiAgaWYgKCFkZXAuaGFzKGFjdGl2ZUVmZmVjdCkpIHtcbiAgICBkZXAuYWRkKGFjdGl2ZUVmZmVjdCk7XG4gICAgYWN0aXZlRWZmZWN0LmRlcHMucHVzaChkZXApO1xuICAgIGlmIChhY3RpdmVFZmZlY3Qub3B0aW9ucy5vblRyYWNrKSB7XG4gICAgICBhY3RpdmVFZmZlY3Qub3B0aW9ucy5vblRyYWNrKHtcbiAgICAgICAgZWZmZWN0OiBhY3RpdmVFZmZlY3QsXG4gICAgICAgIHRhcmdldCxcbiAgICAgICAgdHlwZSxcbiAgICAgICAga2V5XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIHRyaWdnZXIodGFyZ2V0LCB0eXBlLCBrZXksIG5ld1ZhbHVlLCBvbGRWYWx1ZSwgb2xkVGFyZ2V0KSB7XG4gIGNvbnN0IGRlcHNNYXAgPSB0YXJnZXRNYXAuZ2V0KHRhcmdldCk7XG4gIGlmICghZGVwc01hcCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBlZmZlY3RzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgY29uc3QgYWRkMiA9IChlZmZlY3RzVG9BZGQpID0+IHtcbiAgICBpZiAoZWZmZWN0c1RvQWRkKSB7XG4gICAgICBlZmZlY3RzVG9BZGQuZm9yRWFjaCgoZWZmZWN0MykgPT4ge1xuICAgICAgICBpZiAoZWZmZWN0MyAhPT0gYWN0aXZlRWZmZWN0IHx8IGVmZmVjdDMuYWxsb3dSZWN1cnNlKSB7XG4gICAgICAgICAgZWZmZWN0cy5hZGQoZWZmZWN0Myk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbiAgaWYgKHR5cGUgPT09IFwiY2xlYXJcIikge1xuICAgIGRlcHNNYXAuZm9yRWFjaChhZGQyKTtcbiAgfSBlbHNlIGlmIChrZXkgPT09IFwibGVuZ3RoXCIgJiYgaXNBcnJheSh0YXJnZXQpKSB7XG4gICAgZGVwc01hcC5mb3JFYWNoKChkZXAsIGtleTIpID0+IHtcbiAgICAgIGlmIChrZXkyID09PSBcImxlbmd0aFwiIHx8IGtleTIgPj0gbmV3VmFsdWUpIHtcbiAgICAgICAgYWRkMihkZXApO1xuICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGlmIChrZXkgIT09IHZvaWQgMCkge1xuICAgICAgYWRkMihkZXBzTWFwLmdldChrZXkpKTtcbiAgICB9XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIFwiYWRkXCI6XG4gICAgICAgIGlmICghaXNBcnJheSh0YXJnZXQpKSB7XG4gICAgICAgICAgYWRkMihkZXBzTWFwLmdldChJVEVSQVRFX0tFWSkpO1xuICAgICAgICAgIGlmIChpc01hcCh0YXJnZXQpKSB7XG4gICAgICAgICAgICBhZGQyKGRlcHNNYXAuZ2V0KE1BUF9LRVlfSVRFUkFURV9LRVkpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoaXNJbnRlZ2VyS2V5KGtleSkpIHtcbiAgICAgICAgICBhZGQyKGRlcHNNYXAuZ2V0KFwibGVuZ3RoXCIpKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJkZWxldGVcIjpcbiAgICAgICAgaWYgKCFpc0FycmF5KHRhcmdldCkpIHtcbiAgICAgICAgICBhZGQyKGRlcHNNYXAuZ2V0KElURVJBVEVfS0VZKSk7XG4gICAgICAgICAgaWYgKGlzTWFwKHRhcmdldCkpIHtcbiAgICAgICAgICAgIGFkZDIoZGVwc01hcC5nZXQoTUFQX0tFWV9JVEVSQVRFX0tFWSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJzZXRcIjpcbiAgICAgICAgaWYgKGlzTWFwKHRhcmdldCkpIHtcbiAgICAgICAgICBhZGQyKGRlcHNNYXAuZ2V0KElURVJBVEVfS0VZKSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIGNvbnN0IHJ1biA9IChlZmZlY3QzKSA9PiB7XG4gICAgaWYgKGVmZmVjdDMub3B0aW9ucy5vblRyaWdnZXIpIHtcbiAgICAgIGVmZmVjdDMub3B0aW9ucy5vblRyaWdnZXIoe1xuICAgICAgICBlZmZlY3Q6IGVmZmVjdDMsXG4gICAgICAgIHRhcmdldCxcbiAgICAgICAga2V5LFxuICAgICAgICB0eXBlLFxuICAgICAgICBuZXdWYWx1ZSxcbiAgICAgICAgb2xkVmFsdWUsXG4gICAgICAgIG9sZFRhcmdldFxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChlZmZlY3QzLm9wdGlvbnMuc2NoZWR1bGVyKSB7XG4gICAgICBlZmZlY3QzLm9wdGlvbnMuc2NoZWR1bGVyKGVmZmVjdDMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlZmZlY3QzKCk7XG4gICAgfVxuICB9O1xuICBlZmZlY3RzLmZvckVhY2gocnVuKTtcbn1cbnZhciBpc05vblRyYWNrYWJsZUtleXMgPSAvKiBAX19QVVJFX18gKi8gbWFrZU1hcChgX19wcm90b19fLF9fdl9pc1JlZixfX2lzVnVlYCk7XG52YXIgYnVpbHRJblN5bWJvbHMgPSBuZXcgU2V0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKFN5bWJvbCkubWFwKChrZXkpID0+IFN5bWJvbFtrZXldKS5maWx0ZXIoaXNTeW1ib2wpKTtcbnZhciBnZXQyID0gLyogQF9fUFVSRV9fICovIGNyZWF0ZUdldHRlcigpO1xudmFyIHJlYWRvbmx5R2V0ID0gLyogQF9fUFVSRV9fICovIGNyZWF0ZUdldHRlcih0cnVlKTtcbnZhciBhcnJheUluc3RydW1lbnRhdGlvbnMgPSAvKiBAX19QVVJFX18gKi8gY3JlYXRlQXJyYXlJbnN0cnVtZW50YXRpb25zKCk7XG5mdW5jdGlvbiBjcmVhdGVBcnJheUluc3RydW1lbnRhdGlvbnMoKSB7XG4gIGNvbnN0IGluc3RydW1lbnRhdGlvbnMgPSB7fTtcbiAgW1wiaW5jbHVkZXNcIiwgXCJpbmRleE9mXCIsIFwibGFzdEluZGV4T2ZcIl0uZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgaW5zdHJ1bWVudGF0aW9uc1trZXldID0gZnVuY3Rpb24oLi4uYXJncykge1xuICAgICAgY29uc3QgYXJyID0gdG9SYXcodGhpcyk7XG4gICAgICBmb3IgKGxldCBpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHRyYWNrKGFyciwgXCJnZXRcIiwgaSArIFwiXCIpO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzID0gYXJyW2tleV0oLi4uYXJncyk7XG4gICAgICBpZiAocmVzID09PSAtMSB8fCByZXMgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBhcnJba2V5XSguLi5hcmdzLm1hcCh0b1JhdykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcbiAgW1wicHVzaFwiLCBcInBvcFwiLCBcInNoaWZ0XCIsIFwidW5zaGlmdFwiLCBcInNwbGljZVwiXS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBpbnN0cnVtZW50YXRpb25zW2tleV0gPSBmdW5jdGlvbiguLi5hcmdzKSB7XG4gICAgICBwYXVzZVRyYWNraW5nKCk7XG4gICAgICBjb25zdCByZXMgPSB0b1Jhdyh0aGlzKVtrZXldLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgcmVzZXRUcmFja2luZygpO1xuICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuICB9KTtcbiAgcmV0dXJuIGluc3RydW1lbnRhdGlvbnM7XG59XG5mdW5jdGlvbiBjcmVhdGVHZXR0ZXIoaXNSZWFkb25seSA9IGZhbHNlLCBzaGFsbG93ID0gZmFsc2UpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGdldDModGFyZ2V0LCBrZXksIHJlY2VpdmVyKSB7XG4gICAgaWYgKGtleSA9PT0gXCJfX3ZfaXNSZWFjdGl2ZVwiKSB7XG4gICAgICByZXR1cm4gIWlzUmVhZG9ubHk7XG4gICAgfSBlbHNlIGlmIChrZXkgPT09IFwiX192X2lzUmVhZG9ubHlcIikge1xuICAgICAgcmV0dXJuIGlzUmVhZG9ubHk7XG4gICAgfSBlbHNlIGlmIChrZXkgPT09IFwiX192X3Jhd1wiICYmIHJlY2VpdmVyID09PSAoaXNSZWFkb25seSA/IHNoYWxsb3cgPyBzaGFsbG93UmVhZG9ubHlNYXAgOiByZWFkb25seU1hcCA6IHNoYWxsb3cgPyBzaGFsbG93UmVhY3RpdmVNYXAgOiByZWFjdGl2ZU1hcCkuZ2V0KHRhcmdldCkpIHtcbiAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuICAgIGNvbnN0IHRhcmdldElzQXJyYXkgPSBpc0FycmF5KHRhcmdldCk7XG4gICAgaWYgKCFpc1JlYWRvbmx5ICYmIHRhcmdldElzQXJyYXkgJiYgaGFzT3duKGFycmF5SW5zdHJ1bWVudGF0aW9ucywga2V5KSkge1xuICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KGFycmF5SW5zdHJ1bWVudGF0aW9ucywga2V5LCByZWNlaXZlcik7XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IFJlZmxlY3QuZ2V0KHRhcmdldCwga2V5LCByZWNlaXZlcik7XG4gICAgaWYgKGlzU3ltYm9sKGtleSkgPyBidWlsdEluU3ltYm9scy5oYXMoa2V5KSA6IGlzTm9uVHJhY2thYmxlS2V5cyhrZXkpKSB7XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBpZiAoIWlzUmVhZG9ubHkpIHtcbiAgICAgIHRyYWNrKHRhcmdldCwgXCJnZXRcIiwga2V5KTtcbiAgICB9XG4gICAgaWYgKHNoYWxsb3cpIHtcbiAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIGlmIChpc1JlZihyZXMpKSB7XG4gICAgICBjb25zdCBzaG91bGRVbndyYXAgPSAhdGFyZ2V0SXNBcnJheSB8fCAhaXNJbnRlZ2VyS2V5KGtleSk7XG4gICAgICByZXR1cm4gc2hvdWxkVW53cmFwID8gcmVzLnZhbHVlIDogcmVzO1xuICAgIH1cbiAgICBpZiAoaXNPYmplY3QocmVzKSkge1xuICAgICAgcmV0dXJuIGlzUmVhZG9ubHkgPyByZWFkb25seShyZXMpIDogcmVhY3RpdmUyKHJlcyk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH07XG59XG52YXIgc2V0MiA9IC8qIEBfX1BVUkVfXyAqLyBjcmVhdGVTZXR0ZXIoKTtcbmZ1bmN0aW9uIGNyZWF0ZVNldHRlcihzaGFsbG93ID0gZmFsc2UpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHNldDModGFyZ2V0LCBrZXksIHZhbHVlLCByZWNlaXZlcikge1xuICAgIGxldCBvbGRWYWx1ZSA9IHRhcmdldFtrZXldO1xuICAgIGlmICghc2hhbGxvdykge1xuICAgICAgdmFsdWUgPSB0b1Jhdyh2YWx1ZSk7XG4gICAgICBvbGRWYWx1ZSA9IHRvUmF3KG9sZFZhbHVlKTtcbiAgICAgIGlmICghaXNBcnJheSh0YXJnZXQpICYmIGlzUmVmKG9sZFZhbHVlKSAmJiAhaXNSZWYodmFsdWUpKSB7XG4gICAgICAgIG9sZFZhbHVlLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBoYWRLZXkgPSBpc0FycmF5KHRhcmdldCkgJiYgaXNJbnRlZ2VyS2V5KGtleSkgPyBOdW1iZXIoa2V5KSA8IHRhcmdldC5sZW5ndGggOiBoYXNPd24odGFyZ2V0LCBrZXkpO1xuICAgIGNvbnN0IHJlc3VsdCA9IFJlZmxlY3Quc2V0KHRhcmdldCwga2V5LCB2YWx1ZSwgcmVjZWl2ZXIpO1xuICAgIGlmICh0YXJnZXQgPT09IHRvUmF3KHJlY2VpdmVyKSkge1xuICAgICAgaWYgKCFoYWRLZXkpIHtcbiAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwiYWRkXCIsIGtleSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChoYXNDaGFuZ2VkKHZhbHVlLCBvbGRWYWx1ZSkpIHtcbiAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwic2V0XCIsIGtleSwgdmFsdWUsIG9sZFZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn1cbmZ1bmN0aW9uIGRlbGV0ZVByb3BlcnR5KHRhcmdldCwga2V5KSB7XG4gIGNvbnN0IGhhZEtleSA9IGhhc093bih0YXJnZXQsIGtleSk7XG4gIGNvbnN0IG9sZFZhbHVlID0gdGFyZ2V0W2tleV07XG4gIGNvbnN0IHJlc3VsdCA9IFJlZmxlY3QuZGVsZXRlUHJvcGVydHkodGFyZ2V0LCBrZXkpO1xuICBpZiAocmVzdWx0ICYmIGhhZEtleSkge1xuICAgIHRyaWdnZXIodGFyZ2V0LCBcImRlbGV0ZVwiLCBrZXksIHZvaWQgMCwgb2xkVmFsdWUpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBoYXModGFyZ2V0LCBrZXkpIHtcbiAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5oYXModGFyZ2V0LCBrZXkpO1xuICBpZiAoIWlzU3ltYm9sKGtleSkgfHwgIWJ1aWx0SW5TeW1ib2xzLmhhcyhrZXkpKSB7XG4gICAgdHJhY2sodGFyZ2V0LCBcImhhc1wiLCBrZXkpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBvd25LZXlzKHRhcmdldCkge1xuICB0cmFjayh0YXJnZXQsIFwiaXRlcmF0ZVwiLCBpc0FycmF5KHRhcmdldCkgPyBcImxlbmd0aFwiIDogSVRFUkFURV9LRVkpO1xuICByZXR1cm4gUmVmbGVjdC5vd25LZXlzKHRhcmdldCk7XG59XG52YXIgbXV0YWJsZUhhbmRsZXJzID0ge1xuICBnZXQ6IGdldDIsXG4gIHNldDogc2V0MixcbiAgZGVsZXRlUHJvcGVydHksXG4gIGhhcyxcbiAgb3duS2V5c1xufTtcbnZhciByZWFkb25seUhhbmRsZXJzID0ge1xuICBnZXQ6IHJlYWRvbmx5R2V0LFxuICBzZXQodGFyZ2V0LCBrZXkpIHtcbiAgICBpZiAodHJ1ZSkge1xuICAgICAgY29uc29sZS53YXJuKGBTZXQgb3BlcmF0aW9uIG9uIGtleSBcIiR7U3RyaW5nKGtleSl9XCIgZmFpbGVkOiB0YXJnZXQgaXMgcmVhZG9ubHkuYCwgdGFyZ2V0KTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG4gIGRlbGV0ZVByb3BlcnR5KHRhcmdldCwga2V5KSB7XG4gICAgaWYgKHRydWUpIHtcbiAgICAgIGNvbnNvbGUud2FybihgRGVsZXRlIG9wZXJhdGlvbiBvbiBrZXkgXCIke1N0cmluZyhrZXkpfVwiIGZhaWxlZDogdGFyZ2V0IGlzIHJlYWRvbmx5LmAsIHRhcmdldCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG59O1xudmFyIHRvUmVhY3RpdmUgPSAodmFsdWUpID0+IGlzT2JqZWN0KHZhbHVlKSA/IHJlYWN0aXZlMih2YWx1ZSkgOiB2YWx1ZTtcbnZhciB0b1JlYWRvbmx5ID0gKHZhbHVlKSA9PiBpc09iamVjdCh2YWx1ZSkgPyByZWFkb25seSh2YWx1ZSkgOiB2YWx1ZTtcbnZhciB0b1NoYWxsb3cgPSAodmFsdWUpID0+IHZhbHVlO1xudmFyIGdldFByb3RvID0gKHYpID0+IFJlZmxlY3QuZ2V0UHJvdG90eXBlT2Yodik7XG5mdW5jdGlvbiBnZXQkMSh0YXJnZXQsIGtleSwgaXNSZWFkb25seSA9IGZhbHNlLCBpc1NoYWxsb3cgPSBmYWxzZSkge1xuICB0YXJnZXQgPSB0YXJnZXRbXG4gICAgXCJfX3ZfcmF3XCJcbiAgICAvKiBSQVcgKi9cbiAgXTtcbiAgY29uc3QgcmF3VGFyZ2V0ID0gdG9SYXcodGFyZ2V0KTtcbiAgY29uc3QgcmF3S2V5ID0gdG9SYXcoa2V5KTtcbiAgaWYgKGtleSAhPT0gcmF3S2V5KSB7XG4gICAgIWlzUmVhZG9ubHkgJiYgdHJhY2socmF3VGFyZ2V0LCBcImdldFwiLCBrZXkpO1xuICB9XG4gICFpc1JlYWRvbmx5ICYmIHRyYWNrKHJhd1RhcmdldCwgXCJnZXRcIiwgcmF3S2V5KTtcbiAgY29uc3QgeyBoYXM6IGhhczIgfSA9IGdldFByb3RvKHJhd1RhcmdldCk7XG4gIGNvbnN0IHdyYXAgPSBpc1NoYWxsb3cgPyB0b1NoYWxsb3cgOiBpc1JlYWRvbmx5ID8gdG9SZWFkb25seSA6IHRvUmVhY3RpdmU7XG4gIGlmIChoYXMyLmNhbGwocmF3VGFyZ2V0LCBrZXkpKSB7XG4gICAgcmV0dXJuIHdyYXAodGFyZ2V0LmdldChrZXkpKTtcbiAgfSBlbHNlIGlmIChoYXMyLmNhbGwocmF3VGFyZ2V0LCByYXdLZXkpKSB7XG4gICAgcmV0dXJuIHdyYXAodGFyZ2V0LmdldChyYXdLZXkpKTtcbiAgfSBlbHNlIGlmICh0YXJnZXQgIT09IHJhd1RhcmdldCkge1xuICAgIHRhcmdldC5nZXQoa2V5KTtcbiAgfVxufVxuZnVuY3Rpb24gaGFzJDEoa2V5LCBpc1JlYWRvbmx5ID0gZmFsc2UpIHtcbiAgY29uc3QgdGFyZ2V0ID0gdGhpc1tcbiAgICBcIl9fdl9yYXdcIlxuICAgIC8qIFJBVyAqL1xuICBdO1xuICBjb25zdCByYXdUYXJnZXQgPSB0b1Jhdyh0YXJnZXQpO1xuICBjb25zdCByYXdLZXkgPSB0b1JhdyhrZXkpO1xuICBpZiAoa2V5ICE9PSByYXdLZXkpIHtcbiAgICAhaXNSZWFkb25seSAmJiB0cmFjayhyYXdUYXJnZXQsIFwiaGFzXCIsIGtleSk7XG4gIH1cbiAgIWlzUmVhZG9ubHkgJiYgdHJhY2socmF3VGFyZ2V0LCBcImhhc1wiLCByYXdLZXkpO1xuICByZXR1cm4ga2V5ID09PSByYXdLZXkgPyB0YXJnZXQuaGFzKGtleSkgOiB0YXJnZXQuaGFzKGtleSkgfHwgdGFyZ2V0LmhhcyhyYXdLZXkpO1xufVxuZnVuY3Rpb24gc2l6ZSh0YXJnZXQsIGlzUmVhZG9ubHkgPSBmYWxzZSkge1xuICB0YXJnZXQgPSB0YXJnZXRbXG4gICAgXCJfX3ZfcmF3XCJcbiAgICAvKiBSQVcgKi9cbiAgXTtcbiAgIWlzUmVhZG9ubHkgJiYgdHJhY2sodG9SYXcodGFyZ2V0KSwgXCJpdGVyYXRlXCIsIElURVJBVEVfS0VZKTtcbiAgcmV0dXJuIFJlZmxlY3QuZ2V0KHRhcmdldCwgXCJzaXplXCIsIHRhcmdldCk7XG59XG5mdW5jdGlvbiBhZGQodmFsdWUpIHtcbiAgdmFsdWUgPSB0b1Jhdyh2YWx1ZSk7XG4gIGNvbnN0IHRhcmdldCA9IHRvUmF3KHRoaXMpO1xuICBjb25zdCBwcm90byA9IGdldFByb3RvKHRhcmdldCk7XG4gIGNvbnN0IGhhZEtleSA9IHByb3RvLmhhcy5jYWxsKHRhcmdldCwgdmFsdWUpO1xuICBpZiAoIWhhZEtleSkge1xuICAgIHRhcmdldC5hZGQodmFsdWUpO1xuICAgIHRyaWdnZXIodGFyZ2V0LCBcImFkZFwiLCB2YWx1ZSwgdmFsdWUpO1xuICB9XG4gIHJldHVybiB0aGlzO1xufVxuZnVuY3Rpb24gc2V0JDEoa2V5LCB2YWx1ZSkge1xuICB2YWx1ZSA9IHRvUmF3KHZhbHVlKTtcbiAgY29uc3QgdGFyZ2V0ID0gdG9SYXcodGhpcyk7XG4gIGNvbnN0IHsgaGFzOiBoYXMyLCBnZXQ6IGdldDMgfSA9IGdldFByb3RvKHRhcmdldCk7XG4gIGxldCBoYWRLZXkgPSBoYXMyLmNhbGwodGFyZ2V0LCBrZXkpO1xuICBpZiAoIWhhZEtleSkge1xuICAgIGtleSA9IHRvUmF3KGtleSk7XG4gICAgaGFkS2V5ID0gaGFzMi5jYWxsKHRhcmdldCwga2V5KTtcbiAgfSBlbHNlIGlmICh0cnVlKSB7XG4gICAgY2hlY2tJZGVudGl0eUtleXModGFyZ2V0LCBoYXMyLCBrZXkpO1xuICB9XG4gIGNvbnN0IG9sZFZhbHVlID0gZ2V0My5jYWxsKHRhcmdldCwga2V5KTtcbiAgdGFyZ2V0LnNldChrZXksIHZhbHVlKTtcbiAgaWYgKCFoYWRLZXkpIHtcbiAgICB0cmlnZ2VyKHRhcmdldCwgXCJhZGRcIiwga2V5LCB2YWx1ZSk7XG4gIH0gZWxzZSBpZiAoaGFzQ2hhbmdlZCh2YWx1ZSwgb2xkVmFsdWUpKSB7XG4gICAgdHJpZ2dlcih0YXJnZXQsIFwic2V0XCIsIGtleSwgdmFsdWUsIG9sZFZhbHVlKTtcbiAgfVxuICByZXR1cm4gdGhpcztcbn1cbmZ1bmN0aW9uIGRlbGV0ZUVudHJ5KGtleSkge1xuICBjb25zdCB0YXJnZXQgPSB0b1Jhdyh0aGlzKTtcbiAgY29uc3QgeyBoYXM6IGhhczIsIGdldDogZ2V0MyB9ID0gZ2V0UHJvdG8odGFyZ2V0KTtcbiAgbGV0IGhhZEtleSA9IGhhczIuY2FsbCh0YXJnZXQsIGtleSk7XG4gIGlmICghaGFkS2V5KSB7XG4gICAga2V5ID0gdG9SYXcoa2V5KTtcbiAgICBoYWRLZXkgPSBoYXMyLmNhbGwodGFyZ2V0LCBrZXkpO1xuICB9IGVsc2UgaWYgKHRydWUpIHtcbiAgICBjaGVja0lkZW50aXR5S2V5cyh0YXJnZXQsIGhhczIsIGtleSk7XG4gIH1cbiAgY29uc3Qgb2xkVmFsdWUgPSBnZXQzID8gZ2V0My5jYWxsKHRhcmdldCwga2V5KSA6IHZvaWQgMDtcbiAgY29uc3QgcmVzdWx0ID0gdGFyZ2V0LmRlbGV0ZShrZXkpO1xuICBpZiAoaGFkS2V5KSB7XG4gICAgdHJpZ2dlcih0YXJnZXQsIFwiZGVsZXRlXCIsIGtleSwgdm9pZCAwLCBvbGRWYWx1ZSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGNsZWFyKCkge1xuICBjb25zdCB0YXJnZXQgPSB0b1Jhdyh0aGlzKTtcbiAgY29uc3QgaGFkSXRlbXMgPSB0YXJnZXQuc2l6ZSAhPT0gMDtcbiAgY29uc3Qgb2xkVGFyZ2V0ID0gdHJ1ZSA/IGlzTWFwKHRhcmdldCkgPyBuZXcgTWFwKHRhcmdldCkgOiBuZXcgU2V0KHRhcmdldCkgOiB2b2lkIDA7XG4gIGNvbnN0IHJlc3VsdCA9IHRhcmdldC5jbGVhcigpO1xuICBpZiAoaGFkSXRlbXMpIHtcbiAgICB0cmlnZ2VyKHRhcmdldCwgXCJjbGVhclwiLCB2b2lkIDAsIHZvaWQgMCwgb2xkVGFyZ2V0KTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gY3JlYXRlRm9yRWFjaChpc1JlYWRvbmx5LCBpc1NoYWxsb3cpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGZvckVhY2goY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICBjb25zdCBvYnNlcnZlZCA9IHRoaXM7XG4gICAgY29uc3QgdGFyZ2V0ID0gb2JzZXJ2ZWRbXG4gICAgICBcIl9fdl9yYXdcIlxuICAgICAgLyogUkFXICovXG4gICAgXTtcbiAgICBjb25zdCByYXdUYXJnZXQgPSB0b1Jhdyh0YXJnZXQpO1xuICAgIGNvbnN0IHdyYXAgPSBpc1NoYWxsb3cgPyB0b1NoYWxsb3cgOiBpc1JlYWRvbmx5ID8gdG9SZWFkb25seSA6IHRvUmVhY3RpdmU7XG4gICAgIWlzUmVhZG9ubHkgJiYgdHJhY2socmF3VGFyZ2V0LCBcIml0ZXJhdGVcIiwgSVRFUkFURV9LRVkpO1xuICAgIHJldHVybiB0YXJnZXQuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgd3JhcCh2YWx1ZSksIHdyYXAoa2V5KSwgb2JzZXJ2ZWQpO1xuICAgIH0pO1xuICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlSXRlcmFibGVNZXRob2QobWV0aG9kLCBpc1JlYWRvbmx5LCBpc1NoYWxsb3cpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKC4uLmFyZ3MpIHtcbiAgICBjb25zdCB0YXJnZXQgPSB0aGlzW1xuICAgICAgXCJfX3ZfcmF3XCJcbiAgICAgIC8qIFJBVyAqL1xuICAgIF07XG4gICAgY29uc3QgcmF3VGFyZ2V0ID0gdG9SYXcodGFyZ2V0KTtcbiAgICBjb25zdCB0YXJnZXRJc01hcCA9IGlzTWFwKHJhd1RhcmdldCk7XG4gICAgY29uc3QgaXNQYWlyID0gbWV0aG9kID09PSBcImVudHJpZXNcIiB8fCBtZXRob2QgPT09IFN5bWJvbC5pdGVyYXRvciAmJiB0YXJnZXRJc01hcDtcbiAgICBjb25zdCBpc0tleU9ubHkgPSBtZXRob2QgPT09IFwia2V5c1wiICYmIHRhcmdldElzTWFwO1xuICAgIGNvbnN0IGlubmVySXRlcmF0b3IgPSB0YXJnZXRbbWV0aG9kXSguLi5hcmdzKTtcbiAgICBjb25zdCB3cmFwID0gaXNTaGFsbG93ID8gdG9TaGFsbG93IDogaXNSZWFkb25seSA/IHRvUmVhZG9ubHkgOiB0b1JlYWN0aXZlO1xuICAgICFpc1JlYWRvbmx5ICYmIHRyYWNrKHJhd1RhcmdldCwgXCJpdGVyYXRlXCIsIGlzS2V5T25seSA/IE1BUF9LRVlfSVRFUkFURV9LRVkgOiBJVEVSQVRFX0tFWSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIC8vIGl0ZXJhdG9yIHByb3RvY29sXG4gICAgICBuZXh0KCkge1xuICAgICAgICBjb25zdCB7IHZhbHVlLCBkb25lIH0gPSBpbm5lckl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgcmV0dXJuIGRvbmUgPyB7IHZhbHVlLCBkb25lIH0gOiB7XG4gICAgICAgICAgdmFsdWU6IGlzUGFpciA/IFt3cmFwKHZhbHVlWzBdKSwgd3JhcCh2YWx1ZVsxXSldIDogd3JhcCh2YWx1ZSksXG4gICAgICAgICAgZG9uZVxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIC8vIGl0ZXJhYmxlIHByb3RvY29sXG4gICAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVJlYWRvbmx5TWV0aG9kKHR5cGUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKC4uLmFyZ3MpIHtcbiAgICBpZiAodHJ1ZSkge1xuICAgICAgY29uc3Qga2V5ID0gYXJnc1swXSA/IGBvbiBrZXkgXCIke2FyZ3NbMF19XCIgYCA6IGBgO1xuICAgICAgY29uc29sZS53YXJuKGAke2NhcGl0YWxpemUodHlwZSl9IG9wZXJhdGlvbiAke2tleX1mYWlsZWQ6IHRhcmdldCBpcyByZWFkb25seS5gLCB0b1Jhdyh0aGlzKSk7XG4gICAgfVxuICAgIHJldHVybiB0eXBlID09PSBcImRlbGV0ZVwiID8gZmFsc2UgOiB0aGlzO1xuICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlSW5zdHJ1bWVudGF0aW9ucygpIHtcbiAgY29uc3QgbXV0YWJsZUluc3RydW1lbnRhdGlvbnMyID0ge1xuICAgIGdldChrZXkpIHtcbiAgICAgIHJldHVybiBnZXQkMSh0aGlzLCBrZXkpO1xuICAgIH0sXG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICByZXR1cm4gc2l6ZSh0aGlzKTtcbiAgICB9LFxuICAgIGhhczogaGFzJDEsXG4gICAgYWRkLFxuICAgIHNldDogc2V0JDEsXG4gICAgZGVsZXRlOiBkZWxldGVFbnRyeSxcbiAgICBjbGVhcixcbiAgICBmb3JFYWNoOiBjcmVhdGVGb3JFYWNoKGZhbHNlLCBmYWxzZSlcbiAgfTtcbiAgY29uc3Qgc2hhbGxvd0luc3RydW1lbnRhdGlvbnMyID0ge1xuICAgIGdldChrZXkpIHtcbiAgICAgIHJldHVybiBnZXQkMSh0aGlzLCBrZXksIGZhbHNlLCB0cnVlKTtcbiAgICB9LFxuICAgIGdldCBzaXplKCkge1xuICAgICAgcmV0dXJuIHNpemUodGhpcyk7XG4gICAgfSxcbiAgICBoYXM6IGhhcyQxLFxuICAgIGFkZCxcbiAgICBzZXQ6IHNldCQxLFxuICAgIGRlbGV0ZTogZGVsZXRlRW50cnksXG4gICAgY2xlYXIsXG4gICAgZm9yRWFjaDogY3JlYXRlRm9yRWFjaChmYWxzZSwgdHJ1ZSlcbiAgfTtcbiAgY29uc3QgcmVhZG9ubHlJbnN0cnVtZW50YXRpb25zMiA9IHtcbiAgICBnZXQoa2V5KSB7XG4gICAgICByZXR1cm4gZ2V0JDEodGhpcywga2V5LCB0cnVlKTtcbiAgICB9LFxuICAgIGdldCBzaXplKCkge1xuICAgICAgcmV0dXJuIHNpemUodGhpcywgdHJ1ZSk7XG4gICAgfSxcbiAgICBoYXMoa2V5KSB7XG4gICAgICByZXR1cm4gaGFzJDEuY2FsbCh0aGlzLCBrZXksIHRydWUpO1xuICAgIH0sXG4gICAgYWRkOiBjcmVhdGVSZWFkb25seU1ldGhvZChcbiAgICAgIFwiYWRkXCJcbiAgICAgIC8qIEFERCAqL1xuICAgICksXG4gICAgc2V0OiBjcmVhdGVSZWFkb25seU1ldGhvZChcbiAgICAgIFwic2V0XCJcbiAgICAgIC8qIFNFVCAqL1xuICAgICksXG4gICAgZGVsZXRlOiBjcmVhdGVSZWFkb25seU1ldGhvZChcbiAgICAgIFwiZGVsZXRlXCJcbiAgICAgIC8qIERFTEVURSAqL1xuICAgICksXG4gICAgY2xlYXI6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFxuICAgICAgXCJjbGVhclwiXG4gICAgICAvKiBDTEVBUiAqL1xuICAgICksXG4gICAgZm9yRWFjaDogY3JlYXRlRm9yRWFjaCh0cnVlLCBmYWxzZSlcbiAgfTtcbiAgY29uc3Qgc2hhbGxvd1JlYWRvbmx5SW5zdHJ1bWVudGF0aW9uczIgPSB7XG4gICAgZ2V0KGtleSkge1xuICAgICAgcmV0dXJuIGdldCQxKHRoaXMsIGtleSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgfSxcbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgIHJldHVybiBzaXplKHRoaXMsIHRydWUpO1xuICAgIH0sXG4gICAgaGFzKGtleSkge1xuICAgICAgcmV0dXJuIGhhcyQxLmNhbGwodGhpcywga2V5LCB0cnVlKTtcbiAgICB9LFxuICAgIGFkZDogY3JlYXRlUmVhZG9ubHlNZXRob2QoXG4gICAgICBcImFkZFwiXG4gICAgICAvKiBBREQgKi9cbiAgICApLFxuICAgIHNldDogY3JlYXRlUmVhZG9ubHlNZXRob2QoXG4gICAgICBcInNldFwiXG4gICAgICAvKiBTRVQgKi9cbiAgICApLFxuICAgIGRlbGV0ZTogY3JlYXRlUmVhZG9ubHlNZXRob2QoXG4gICAgICBcImRlbGV0ZVwiXG4gICAgICAvKiBERUxFVEUgKi9cbiAgICApLFxuICAgIGNsZWFyOiBjcmVhdGVSZWFkb25seU1ldGhvZChcbiAgICAgIFwiY2xlYXJcIlxuICAgICAgLyogQ0xFQVIgKi9cbiAgICApLFxuICAgIGZvckVhY2g6IGNyZWF0ZUZvckVhY2godHJ1ZSwgdHJ1ZSlcbiAgfTtcbiAgY29uc3QgaXRlcmF0b3JNZXRob2RzID0gW1wia2V5c1wiLCBcInZhbHVlc1wiLCBcImVudHJpZXNcIiwgU3ltYm9sLml0ZXJhdG9yXTtcbiAgaXRlcmF0b3JNZXRob2RzLmZvckVhY2goKG1ldGhvZCkgPT4ge1xuICAgIG11dGFibGVJbnN0cnVtZW50YXRpb25zMlttZXRob2RdID0gY3JlYXRlSXRlcmFibGVNZXRob2QobWV0aG9kLCBmYWxzZSwgZmFsc2UpO1xuICAgIHJlYWRvbmx5SW5zdHJ1bWVudGF0aW9uczJbbWV0aG9kXSA9IGNyZWF0ZUl0ZXJhYmxlTWV0aG9kKG1ldGhvZCwgdHJ1ZSwgZmFsc2UpO1xuICAgIHNoYWxsb3dJbnN0cnVtZW50YXRpb25zMlttZXRob2RdID0gY3JlYXRlSXRlcmFibGVNZXRob2QobWV0aG9kLCBmYWxzZSwgdHJ1ZSk7XG4gICAgc2hhbGxvd1JlYWRvbmx5SW5zdHJ1bWVudGF0aW9uczJbbWV0aG9kXSA9IGNyZWF0ZUl0ZXJhYmxlTWV0aG9kKG1ldGhvZCwgdHJ1ZSwgdHJ1ZSk7XG4gIH0pO1xuICByZXR1cm4gW1xuICAgIG11dGFibGVJbnN0cnVtZW50YXRpb25zMixcbiAgICByZWFkb25seUluc3RydW1lbnRhdGlvbnMyLFxuICAgIHNoYWxsb3dJbnN0cnVtZW50YXRpb25zMixcbiAgICBzaGFsbG93UmVhZG9ubHlJbnN0cnVtZW50YXRpb25zMlxuICBdO1xufVxudmFyIFttdXRhYmxlSW5zdHJ1bWVudGF0aW9ucywgcmVhZG9ubHlJbnN0cnVtZW50YXRpb25zLCBzaGFsbG93SW5zdHJ1bWVudGF0aW9ucywgc2hhbGxvd1JlYWRvbmx5SW5zdHJ1bWVudGF0aW9uc10gPSAvKiBAX19QVVJFX18gKi8gY3JlYXRlSW5zdHJ1bWVudGF0aW9ucygpO1xuZnVuY3Rpb24gY3JlYXRlSW5zdHJ1bWVudGF0aW9uR2V0dGVyKGlzUmVhZG9ubHksIHNoYWxsb3cpIHtcbiAgY29uc3QgaW5zdHJ1bWVudGF0aW9ucyA9IHNoYWxsb3cgPyBpc1JlYWRvbmx5ID8gc2hhbGxvd1JlYWRvbmx5SW5zdHJ1bWVudGF0aW9ucyA6IHNoYWxsb3dJbnN0cnVtZW50YXRpb25zIDogaXNSZWFkb25seSA/IHJlYWRvbmx5SW5zdHJ1bWVudGF0aW9ucyA6IG11dGFibGVJbnN0cnVtZW50YXRpb25zO1xuICByZXR1cm4gKHRhcmdldCwga2V5LCByZWNlaXZlcikgPT4ge1xuICAgIGlmIChrZXkgPT09IFwiX192X2lzUmVhY3RpdmVcIikge1xuICAgICAgcmV0dXJuICFpc1JlYWRvbmx5O1xuICAgIH0gZWxzZSBpZiAoa2V5ID09PSBcIl9fdl9pc1JlYWRvbmx5XCIpIHtcbiAgICAgIHJldHVybiBpc1JlYWRvbmx5O1xuICAgIH0gZWxzZSBpZiAoa2V5ID09PSBcIl9fdl9yYXdcIikge1xuICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9XG4gICAgcmV0dXJuIFJlZmxlY3QuZ2V0KGhhc093bihpbnN0cnVtZW50YXRpb25zLCBrZXkpICYmIGtleSBpbiB0YXJnZXQgPyBpbnN0cnVtZW50YXRpb25zIDogdGFyZ2V0LCBrZXksIHJlY2VpdmVyKTtcbiAgfTtcbn1cbnZhciBtdXRhYmxlQ29sbGVjdGlvbkhhbmRsZXJzID0ge1xuICBnZXQ6IC8qIEBfX1BVUkVfXyAqLyBjcmVhdGVJbnN0cnVtZW50YXRpb25HZXR0ZXIoZmFsc2UsIGZhbHNlKVxufTtcbnZhciByZWFkb25seUNvbGxlY3Rpb25IYW5kbGVycyA9IHtcbiAgZ2V0OiAvKiBAX19QVVJFX18gKi8gY3JlYXRlSW5zdHJ1bWVudGF0aW9uR2V0dGVyKHRydWUsIGZhbHNlKVxufTtcbmZ1bmN0aW9uIGNoZWNrSWRlbnRpdHlLZXlzKHRhcmdldCwgaGFzMiwga2V5KSB7XG4gIGNvbnN0IHJhd0tleSA9IHRvUmF3KGtleSk7XG4gIGlmIChyYXdLZXkgIT09IGtleSAmJiBoYXMyLmNhbGwodGFyZ2V0LCByYXdLZXkpKSB7XG4gICAgY29uc3QgdHlwZSA9IHRvUmF3VHlwZSh0YXJnZXQpO1xuICAgIGNvbnNvbGUud2FybihgUmVhY3RpdmUgJHt0eXBlfSBjb250YWlucyBib3RoIHRoZSByYXcgYW5kIHJlYWN0aXZlIHZlcnNpb25zIG9mIHRoZSBzYW1lIG9iamVjdCR7dHlwZSA9PT0gYE1hcGAgPyBgIGFzIGtleXNgIDogYGB9LCB3aGljaCBjYW4gbGVhZCB0byBpbmNvbnNpc3RlbmNpZXMuIEF2b2lkIGRpZmZlcmVudGlhdGluZyBiZXR3ZWVuIHRoZSByYXcgYW5kIHJlYWN0aXZlIHZlcnNpb25zIG9mIGFuIG9iamVjdCBhbmQgb25seSB1c2UgdGhlIHJlYWN0aXZlIHZlcnNpb24gaWYgcG9zc2libGUuYCk7XG4gIH1cbn1cbnZhciByZWFjdGl2ZU1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xudmFyIHNoYWxsb3dSZWFjdGl2ZU1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xudmFyIHJlYWRvbmx5TWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG52YXIgc2hhbGxvd1JlYWRvbmx5TWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiB0YXJnZXRUeXBlTWFwKHJhd1R5cGUpIHtcbiAgc3dpdGNoIChyYXdUeXBlKSB7XG4gICAgY2FzZSBcIk9iamVjdFwiOlxuICAgIGNhc2UgXCJBcnJheVwiOlxuICAgICAgcmV0dXJuIDE7XG4gICAgY2FzZSBcIk1hcFwiOlxuICAgIGNhc2UgXCJTZXRcIjpcbiAgICBjYXNlIFwiV2Vha01hcFwiOlxuICAgIGNhc2UgXCJXZWFrU2V0XCI6XG4gICAgICByZXR1cm4gMjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIDA7XG4gIH1cbn1cbmZ1bmN0aW9uIGdldFRhcmdldFR5cGUodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlW1xuICAgIFwiX192X3NraXBcIlxuICAgIC8qIFNLSVAgKi9cbiAgXSB8fCAhT2JqZWN0LmlzRXh0ZW5zaWJsZSh2YWx1ZSkgPyAwIDogdGFyZ2V0VHlwZU1hcCh0b1Jhd1R5cGUodmFsdWUpKTtcbn1cbmZ1bmN0aW9uIHJlYWN0aXZlMih0YXJnZXQpIHtcbiAgaWYgKHRhcmdldCAmJiB0YXJnZXRbXG4gICAgXCJfX3ZfaXNSZWFkb25seVwiXG4gICAgLyogSVNfUkVBRE9OTFkgKi9cbiAgXSkge1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZVJlYWN0aXZlT2JqZWN0KHRhcmdldCwgZmFsc2UsIG11dGFibGVIYW5kbGVycywgbXV0YWJsZUNvbGxlY3Rpb25IYW5kbGVycywgcmVhY3RpdmVNYXApO1xufVxuZnVuY3Rpb24gcmVhZG9ubHkodGFyZ2V0KSB7XG4gIHJldHVybiBjcmVhdGVSZWFjdGl2ZU9iamVjdCh0YXJnZXQsIHRydWUsIHJlYWRvbmx5SGFuZGxlcnMsIHJlYWRvbmx5Q29sbGVjdGlvbkhhbmRsZXJzLCByZWFkb25seU1hcCk7XG59XG5mdW5jdGlvbiBjcmVhdGVSZWFjdGl2ZU9iamVjdCh0YXJnZXQsIGlzUmVhZG9ubHksIGJhc2VIYW5kbGVycywgY29sbGVjdGlvbkhhbmRsZXJzLCBwcm94eU1hcCkge1xuICBpZiAoIWlzT2JqZWN0KHRhcmdldCkpIHtcbiAgICBpZiAodHJ1ZSkge1xuICAgICAgY29uc29sZS53YXJuKGB2YWx1ZSBjYW5ub3QgYmUgbWFkZSByZWFjdGl2ZTogJHtTdHJpbmcodGFyZ2V0KX1gKTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICBpZiAodGFyZ2V0W1xuICAgIFwiX192X3Jhd1wiXG4gICAgLyogUkFXICovXG4gIF0gJiYgIShpc1JlYWRvbmx5ICYmIHRhcmdldFtcbiAgICBcIl9fdl9pc1JlYWN0aXZlXCJcbiAgICAvKiBJU19SRUFDVElWRSAqL1xuICBdKSkge1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgY29uc3QgZXhpc3RpbmdQcm94eSA9IHByb3h5TWFwLmdldCh0YXJnZXQpO1xuICBpZiAoZXhpc3RpbmdQcm94eSkge1xuICAgIHJldHVybiBleGlzdGluZ1Byb3h5O1xuICB9XG4gIGNvbnN0IHRhcmdldFR5cGUgPSBnZXRUYXJnZXRUeXBlKHRhcmdldCk7XG4gIGlmICh0YXJnZXRUeXBlID09PSAwKSB7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICBjb25zdCBwcm94eSA9IG5ldyBQcm94eSh0YXJnZXQsIHRhcmdldFR5cGUgPT09IDIgPyBjb2xsZWN0aW9uSGFuZGxlcnMgOiBiYXNlSGFuZGxlcnMpO1xuICBwcm94eU1hcC5zZXQodGFyZ2V0LCBwcm94eSk7XG4gIHJldHVybiBwcm94eTtcbn1cbmZ1bmN0aW9uIHRvUmF3KG9ic2VydmVkKSB7XG4gIHJldHVybiBvYnNlcnZlZCAmJiB0b1JhdyhvYnNlcnZlZFtcbiAgICBcIl9fdl9yYXdcIlxuICAgIC8qIFJBVyAqL1xuICBdKSB8fCBvYnNlcnZlZDtcbn1cbmZ1bmN0aW9uIGlzUmVmKHIpIHtcbiAgcmV0dXJuIEJvb2xlYW4ociAmJiByLl9fdl9pc1JlZiA9PT0gdHJ1ZSk7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9tYWdpY3MvJG5leHRUaWNrLmpzXG5tYWdpYyhcIm5leHRUaWNrXCIsICgpID0+IG5leHRUaWNrKTtcblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL21hZ2ljcy8kZGlzcGF0Y2guanNcbm1hZ2ljKFwiZGlzcGF0Y2hcIiwgKGVsKSA9PiBkaXNwYXRjaC5iaW5kKGRpc3BhdGNoLCBlbCkpO1xuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvbWFnaWNzLyR3YXRjaC5qc1xubWFnaWMoXCJ3YXRjaFwiLCAoZWwsIHsgZXZhbHVhdGVMYXRlcjogZXZhbHVhdGVMYXRlcjIsIGNsZWFudXA6IGNsZWFudXAyIH0pID0+IChrZXksIGNhbGxiYWNrKSA9PiB7XG4gIGxldCBldmFsdWF0ZTIgPSBldmFsdWF0ZUxhdGVyMihrZXkpO1xuICBsZXQgZ2V0dGVyID0gKCkgPT4ge1xuICAgIGxldCB2YWx1ZTtcbiAgICBldmFsdWF0ZTIoKGkpID0+IHZhbHVlID0gaSk7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9O1xuICBsZXQgdW53YXRjaCA9IHdhdGNoKGdldHRlciwgY2FsbGJhY2spO1xuICBjbGVhbnVwMih1bndhdGNoKTtcbn0pO1xuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvbWFnaWNzLyRzdG9yZS5qc1xubWFnaWMoXCJzdG9yZVwiLCBnZXRTdG9yZXMpO1xuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvbWFnaWNzLyRkYXRhLmpzXG5tYWdpYyhcImRhdGFcIiwgKGVsKSA9PiBzY29wZShlbCkpO1xuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvbWFnaWNzLyRyb290LmpzXG5tYWdpYyhcInJvb3RcIiwgKGVsKSA9PiBjbG9zZXN0Um9vdChlbCkpO1xuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvbWFnaWNzLyRyZWZzLmpzXG5tYWdpYyhcInJlZnNcIiwgKGVsKSA9PiB7XG4gIGlmIChlbC5feF9yZWZzX3Byb3h5KVxuICAgIHJldHVybiBlbC5feF9yZWZzX3Byb3h5O1xuICBlbC5feF9yZWZzX3Byb3h5ID0gbWVyZ2VQcm94aWVzKGdldEFycmF5T2ZSZWZPYmplY3QoZWwpKTtcbiAgcmV0dXJuIGVsLl94X3JlZnNfcHJveHk7XG59KTtcbmZ1bmN0aW9uIGdldEFycmF5T2ZSZWZPYmplY3QoZWwpIHtcbiAgbGV0IHJlZk9iamVjdHMgPSBbXTtcbiAgZmluZENsb3Nlc3QoZWwsIChpKSA9PiB7XG4gICAgaWYgKGkuX3hfcmVmcylcbiAgICAgIHJlZk9iamVjdHMucHVzaChpLl94X3JlZnMpO1xuICB9KTtcbiAgcmV0dXJuIHJlZk9iamVjdHM7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9pZHMuanNcbnZhciBnbG9iYWxJZE1lbW8gPSB7fTtcbmZ1bmN0aW9uIGZpbmRBbmRJbmNyZW1lbnRJZChuYW1lKSB7XG4gIGlmICghZ2xvYmFsSWRNZW1vW25hbWVdKVxuICAgIGdsb2JhbElkTWVtb1tuYW1lXSA9IDA7XG4gIHJldHVybiArK2dsb2JhbElkTWVtb1tuYW1lXTtcbn1cbmZ1bmN0aW9uIGNsb3Nlc3RJZFJvb3QoZWwsIG5hbWUpIHtcbiAgcmV0dXJuIGZpbmRDbG9zZXN0KGVsLCAoZWxlbWVudCkgPT4ge1xuICAgIGlmIChlbGVtZW50Ll94X2lkcyAmJiBlbGVtZW50Ll94X2lkc1tuYW1lXSlcbiAgICAgIHJldHVybiB0cnVlO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHNldElkUm9vdChlbCwgbmFtZSkge1xuICBpZiAoIWVsLl94X2lkcylcbiAgICBlbC5feF9pZHMgPSB7fTtcbiAgaWYgKCFlbC5feF9pZHNbbmFtZV0pXG4gICAgZWwuX3hfaWRzW25hbWVdID0gZmluZEFuZEluY3JlbWVudElkKG5hbWUpO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvbWFnaWNzLyRpZC5qc1xubWFnaWMoXCJpZFwiLCAoZWwsIHsgY2xlYW51cDogY2xlYW51cDIgfSkgPT4gKG5hbWUsIGtleSA9IG51bGwpID0+IHtcbiAgbGV0IGNhY2hlS2V5ID0gYCR7bmFtZX0ke2tleSA/IGAtJHtrZXl9YCA6IFwiXCJ9YDtcbiAgcmV0dXJuIGNhY2hlSWRCeU5hbWVPbkVsZW1lbnQoZWwsIGNhY2hlS2V5LCBjbGVhbnVwMiwgKCkgPT4ge1xuICAgIGxldCByb290ID0gY2xvc2VzdElkUm9vdChlbCwgbmFtZSk7XG4gICAgbGV0IGlkID0gcm9vdCA/IHJvb3QuX3hfaWRzW25hbWVdIDogZmluZEFuZEluY3JlbWVudElkKG5hbWUpO1xuICAgIHJldHVybiBrZXkgPyBgJHtuYW1lfS0ke2lkfS0ke2tleX1gIDogYCR7bmFtZX0tJHtpZH1gO1xuICB9KTtcbn0pO1xuaW50ZXJjZXB0Q2xvbmUoKGZyb20sIHRvKSA9PiB7XG4gIGlmIChmcm9tLl94X2lkKSB7XG4gICAgdG8uX3hfaWQgPSBmcm9tLl94X2lkO1xuICB9XG59KTtcbmZ1bmN0aW9uIGNhY2hlSWRCeU5hbWVPbkVsZW1lbnQoZWwsIGNhY2hlS2V5LCBjbGVhbnVwMiwgY2FsbGJhY2spIHtcbiAgaWYgKCFlbC5feF9pZClcbiAgICBlbC5feF9pZCA9IHt9O1xuICBpZiAoZWwuX3hfaWRbY2FjaGVLZXldKVxuICAgIHJldHVybiBlbC5feF9pZFtjYWNoZUtleV07XG4gIGxldCBvdXRwdXQgPSBjYWxsYmFjaygpO1xuICBlbC5feF9pZFtjYWNoZUtleV0gPSBvdXRwdXQ7XG4gIGNsZWFudXAyKCgpID0+IHtcbiAgICBkZWxldGUgZWwuX3hfaWRbY2FjaGVLZXldO1xuICB9KTtcbiAgcmV0dXJuIG91dHB1dDtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL21hZ2ljcy8kZWwuanNcbm1hZ2ljKFwiZWxcIiwgKGVsKSA9PiBlbCk7XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9tYWdpY3MvaW5kZXguanNcbndhcm5NaXNzaW5nUGx1Z2luTWFnaWMoXCJGb2N1c1wiLCBcImZvY3VzXCIsIFwiZm9jdXNcIik7XG53YXJuTWlzc2luZ1BsdWdpbk1hZ2ljKFwiUGVyc2lzdFwiLCBcInBlcnNpc3RcIiwgXCJwZXJzaXN0XCIpO1xuZnVuY3Rpb24gd2Fybk1pc3NpbmdQbHVnaW5NYWdpYyhuYW1lLCBtYWdpY05hbWUsIHNsdWcpIHtcbiAgbWFnaWMobWFnaWNOYW1lLCAoZWwpID0+IHdhcm4oYFlvdSBjYW4ndCB1c2UgWyQke21hZ2ljTmFtZX1dIHdpdGhvdXQgZmlyc3QgaW5zdGFsbGluZyB0aGUgXCIke25hbWV9XCIgcGx1Z2luIGhlcmU6IGh0dHBzOi8vYWxwaW5lanMuZGV2L3BsdWdpbnMvJHtzbHVnfWAsIGVsKSk7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9kaXJlY3RpdmVzL3gtbW9kZWxhYmxlLmpzXG5kaXJlY3RpdmUoXCJtb2RlbGFibGVcIiwgKGVsLCB7IGV4cHJlc3Npb24gfSwgeyBlZmZlY3Q6IGVmZmVjdDMsIGV2YWx1YXRlTGF0ZXI6IGV2YWx1YXRlTGF0ZXIyLCBjbGVhbnVwOiBjbGVhbnVwMiB9KSA9PiB7XG4gIGxldCBmdW5jID0gZXZhbHVhdGVMYXRlcjIoZXhwcmVzc2lvbik7XG4gIGxldCBpbm5lckdldCA9ICgpID0+IHtcbiAgICBsZXQgcmVzdWx0O1xuICAgIGZ1bmMoKGkpID0+IHJlc3VsdCA9IGkpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG4gIGxldCBldmFsdWF0ZUlubmVyU2V0ID0gZXZhbHVhdGVMYXRlcjIoYCR7ZXhwcmVzc2lvbn0gPSBfX3BsYWNlaG9sZGVyYCk7XG4gIGxldCBpbm5lclNldCA9ICh2YWwpID0+IGV2YWx1YXRlSW5uZXJTZXQoKCkgPT4ge1xuICB9LCB7IHNjb3BlOiB7IFwiX19wbGFjZWhvbGRlclwiOiB2YWwgfSB9KTtcbiAgbGV0IGluaXRpYWxWYWx1ZSA9IGlubmVyR2V0KCk7XG4gIGlubmVyU2V0KGluaXRpYWxWYWx1ZSk7XG4gIHF1ZXVlTWljcm90YXNrKCgpID0+IHtcbiAgICBpZiAoIWVsLl94X21vZGVsKVxuICAgICAgcmV0dXJuO1xuICAgIGVsLl94X3JlbW92ZU1vZGVsTGlzdGVuZXJzW1wiZGVmYXVsdFwiXSgpO1xuICAgIGxldCBvdXRlckdldCA9IGVsLl94X21vZGVsLmdldDtcbiAgICBsZXQgb3V0ZXJTZXQgPSBlbC5feF9tb2RlbC5zZXQ7XG4gICAgbGV0IHJlbGVhc2VFbnRhbmdsZW1lbnQgPSBlbnRhbmdsZShcbiAgICAgIHtcbiAgICAgICAgZ2V0KCkge1xuICAgICAgICAgIHJldHVybiBvdXRlckdldCgpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQodmFsdWUpIHtcbiAgICAgICAgICBvdXRlclNldCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICByZXR1cm4gaW5uZXJHZXQoKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0KHZhbHVlKSB7XG4gICAgICAgICAgaW5uZXJTZXQodmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgICBjbGVhbnVwMihyZWxlYXNlRW50YW5nbGVtZW50KTtcbiAgfSk7XG59KTtcblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2RpcmVjdGl2ZXMveC10ZWxlcG9ydC5qc1xuZGlyZWN0aXZlKFwidGVsZXBvcnRcIiwgKGVsLCB7IG1vZGlmaWVycywgZXhwcmVzc2lvbiB9LCB7IGNsZWFudXA6IGNsZWFudXAyIH0pID0+IHtcbiAgaWYgKGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSAhPT0gXCJ0ZW1wbGF0ZVwiKVxuICAgIHdhcm4oXCJ4LXRlbGVwb3J0IGNhbiBvbmx5IGJlIHVzZWQgb24gYSA8dGVtcGxhdGU+IHRhZ1wiLCBlbCk7XG4gIGxldCB0YXJnZXQgPSBnZXRUYXJnZXQoZXhwcmVzc2lvbik7XG4gIGxldCBjbG9uZTIgPSBlbC5jb250ZW50LmNsb25lTm9kZSh0cnVlKS5maXJzdEVsZW1lbnRDaGlsZDtcbiAgZWwuX3hfdGVsZXBvcnQgPSBjbG9uZTI7XG4gIGNsb25lMi5feF90ZWxlcG9ydEJhY2sgPSBlbDtcbiAgZWwuc2V0QXR0cmlidXRlKFwiZGF0YS10ZWxlcG9ydC10ZW1wbGF0ZVwiLCB0cnVlKTtcbiAgY2xvbmUyLnNldEF0dHJpYnV0ZShcImRhdGEtdGVsZXBvcnQtdGFyZ2V0XCIsIHRydWUpO1xuICBpZiAoZWwuX3hfZm9yd2FyZEV2ZW50cykge1xuICAgIGVsLl94X2ZvcndhcmRFdmVudHMuZm9yRWFjaCgoZXZlbnROYW1lKSA9PiB7XG4gICAgICBjbG9uZTIuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIChlKSA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IGUuY29uc3RydWN0b3IoZS50eXBlLCBlKSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICBhZGRTY29wZVRvTm9kZShjbG9uZTIsIHt9LCBlbCk7XG4gIGxldCBwbGFjZUluRG9tID0gKGNsb25lMywgdGFyZ2V0MiwgbW9kaWZpZXJzMikgPT4ge1xuICAgIGlmIChtb2RpZmllcnMyLmluY2x1ZGVzKFwicHJlcGVuZFwiKSkge1xuICAgICAgdGFyZ2V0Mi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjbG9uZTMsIHRhcmdldDIpO1xuICAgIH0gZWxzZSBpZiAobW9kaWZpZXJzMi5pbmNsdWRlcyhcImFwcGVuZFwiKSkge1xuICAgICAgdGFyZ2V0Mi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjbG9uZTMsIHRhcmdldDIubmV4dFNpYmxpbmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXQyLmFwcGVuZENoaWxkKGNsb25lMyk7XG4gICAgfVxuICB9O1xuICBtdXRhdGVEb20oKCkgPT4ge1xuICAgIHBsYWNlSW5Eb20oY2xvbmUyLCB0YXJnZXQsIG1vZGlmaWVycyk7XG4gICAgc2tpcER1cmluZ0Nsb25lKCgpID0+IHtcbiAgICAgIGluaXRUcmVlKGNsb25lMik7XG4gICAgfSkoKTtcbiAgfSk7XG4gIGVsLl94X3RlbGVwb3J0UHV0QmFjayA9ICgpID0+IHtcbiAgICBsZXQgdGFyZ2V0MiA9IGdldFRhcmdldChleHByZXNzaW9uKTtcbiAgICBtdXRhdGVEb20oKCkgPT4ge1xuICAgICAgcGxhY2VJbkRvbShlbC5feF90ZWxlcG9ydCwgdGFyZ2V0MiwgbW9kaWZpZXJzKTtcbiAgICB9KTtcbiAgfTtcbiAgY2xlYW51cDIoXG4gICAgKCkgPT4gbXV0YXRlRG9tKCgpID0+IHtcbiAgICAgIGNsb25lMi5yZW1vdmUoKTtcbiAgICAgIGRlc3Ryb3lUcmVlKGNsb25lMik7XG4gICAgfSlcbiAgKTtcbn0pO1xudmFyIHRlbGVwb3J0Q29udGFpbmVyRHVyaW5nQ2xvbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuZnVuY3Rpb24gZ2V0VGFyZ2V0KGV4cHJlc3Npb24pIHtcbiAgbGV0IHRhcmdldCA9IHNraXBEdXJpbmdDbG9uZSgoKSA9PiB7XG4gICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZXhwcmVzc2lvbik7XG4gIH0sICgpID0+IHtcbiAgICByZXR1cm4gdGVsZXBvcnRDb250YWluZXJEdXJpbmdDbG9uZTtcbiAgfSkoKTtcbiAgaWYgKCF0YXJnZXQpXG4gICAgd2FybihgQ2Fubm90IGZpbmQgeC10ZWxlcG9ydCBlbGVtZW50IGZvciBzZWxlY3RvcjogXCIke2V4cHJlc3Npb259XCJgKTtcbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2RpcmVjdGl2ZXMveC1pZ25vcmUuanNcbnZhciBoYW5kbGVyID0gKCkgPT4ge1xufTtcbmhhbmRsZXIuaW5saW5lID0gKGVsLCB7IG1vZGlmaWVycyB9LCB7IGNsZWFudXA6IGNsZWFudXAyIH0pID0+IHtcbiAgbW9kaWZpZXJzLmluY2x1ZGVzKFwic2VsZlwiKSA/IGVsLl94X2lnbm9yZVNlbGYgPSB0cnVlIDogZWwuX3hfaWdub3JlID0gdHJ1ZTtcbiAgY2xlYW51cDIoKCkgPT4ge1xuICAgIG1vZGlmaWVycy5pbmNsdWRlcyhcInNlbGZcIikgPyBkZWxldGUgZWwuX3hfaWdub3JlU2VsZiA6IGRlbGV0ZSBlbC5feF9pZ25vcmU7XG4gIH0pO1xufTtcbmRpcmVjdGl2ZShcImlnbm9yZVwiLCBoYW5kbGVyKTtcblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2RpcmVjdGl2ZXMveC1lZmZlY3QuanNcbmRpcmVjdGl2ZShcImVmZmVjdFwiLCBza2lwRHVyaW5nQ2xvbmUoKGVsLCB7IGV4cHJlc3Npb24gfSwgeyBlZmZlY3Q6IGVmZmVjdDMgfSkgPT4ge1xuICBlZmZlY3QzKGV2YWx1YXRlTGF0ZXIoZWwsIGV4cHJlc3Npb24pKTtcbn0pKTtcblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL3V0aWxzL29uLmpzXG5mdW5jdGlvbiBvbihlbCwgZXZlbnQsIG1vZGlmaWVycywgY2FsbGJhY2spIHtcbiAgbGV0IGxpc3RlbmVyVGFyZ2V0ID0gZWw7XG4gIGxldCBoYW5kbGVyNCA9IChlKSA9PiBjYWxsYmFjayhlKTtcbiAgbGV0IG9wdGlvbnMgPSB7fTtcbiAgbGV0IHdyYXBIYW5kbGVyID0gKGNhbGxiYWNrMiwgd3JhcHBlcikgPT4gKGUpID0+IHdyYXBwZXIoY2FsbGJhY2syLCBlKTtcbiAgaWYgKG1vZGlmaWVycy5pbmNsdWRlcyhcImRvdFwiKSlcbiAgICBldmVudCA9IGRvdFN5bnRheChldmVudCk7XG4gIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoXCJjYW1lbFwiKSlcbiAgICBldmVudCA9IGNhbWVsQ2FzZTIoZXZlbnQpO1xuICBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKFwicGFzc2l2ZVwiKSlcbiAgICBvcHRpb25zLnBhc3NpdmUgPSB0cnVlO1xuICBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKFwiY2FwdHVyZVwiKSlcbiAgICBvcHRpb25zLmNhcHR1cmUgPSB0cnVlO1xuICBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKFwid2luZG93XCIpKVxuICAgIGxpc3RlbmVyVGFyZ2V0ID0gd2luZG93O1xuICBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKFwiZG9jdW1lbnRcIikpXG4gICAgbGlzdGVuZXJUYXJnZXQgPSBkb2N1bWVudDtcbiAgaWYgKG1vZGlmaWVycy5pbmNsdWRlcyhcImRlYm91bmNlXCIpKSB7XG4gICAgbGV0IG5leHRNb2RpZmllciA9IG1vZGlmaWVyc1ttb2RpZmllcnMuaW5kZXhPZihcImRlYm91bmNlXCIpICsgMV0gfHwgXCJpbnZhbGlkLXdhaXRcIjtcbiAgICBsZXQgd2FpdCA9IGlzTnVtZXJpYyhuZXh0TW9kaWZpZXIuc3BsaXQoXCJtc1wiKVswXSkgPyBOdW1iZXIobmV4dE1vZGlmaWVyLnNwbGl0KFwibXNcIilbMF0pIDogMjUwO1xuICAgIGhhbmRsZXI0ID0gZGVib3VuY2UoaGFuZGxlcjQsIHdhaXQpO1xuICB9XG4gIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoXCJ0aHJvdHRsZVwiKSkge1xuICAgIGxldCBuZXh0TW9kaWZpZXIgPSBtb2RpZmllcnNbbW9kaWZpZXJzLmluZGV4T2YoXCJ0aHJvdHRsZVwiKSArIDFdIHx8IFwiaW52YWxpZC13YWl0XCI7XG4gICAgbGV0IHdhaXQgPSBpc051bWVyaWMobmV4dE1vZGlmaWVyLnNwbGl0KFwibXNcIilbMF0pID8gTnVtYmVyKG5leHRNb2RpZmllci5zcGxpdChcIm1zXCIpWzBdKSA6IDI1MDtcbiAgICBoYW5kbGVyNCA9IHRocm90dGxlKGhhbmRsZXI0LCB3YWl0KTtcbiAgfVxuICBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKFwicHJldmVudFwiKSlcbiAgICBoYW5kbGVyNCA9IHdyYXBIYW5kbGVyKGhhbmRsZXI0LCAobmV4dCwgZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgbmV4dChlKTtcbiAgICB9KTtcbiAgaWYgKG1vZGlmaWVycy5pbmNsdWRlcyhcInN0b3BcIikpXG4gICAgaGFuZGxlcjQgPSB3cmFwSGFuZGxlcihoYW5kbGVyNCwgKG5leHQsIGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBuZXh0KGUpO1xuICAgIH0pO1xuICBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKFwib25jZVwiKSkge1xuICAgIGhhbmRsZXI0ID0gd3JhcEhhbmRsZXIoaGFuZGxlcjQsIChuZXh0LCBlKSA9PiB7XG4gICAgICBuZXh0KGUpO1xuICAgICAgbGlzdGVuZXJUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlcjQsIG9wdGlvbnMpO1xuICAgIH0pO1xuICB9XG4gIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoXCJhd2F5XCIpIHx8IG1vZGlmaWVycy5pbmNsdWRlcyhcIm91dHNpZGVcIikpIHtcbiAgICBsaXN0ZW5lclRhcmdldCA9IGRvY3VtZW50O1xuICAgIGhhbmRsZXI0ID0gd3JhcEhhbmRsZXIoaGFuZGxlcjQsIChuZXh0LCBlKSA9PiB7XG4gICAgICBpZiAoZWwuY29udGFpbnMoZS50YXJnZXQpKVxuICAgICAgICByZXR1cm47XG4gICAgICBpZiAoZS50YXJnZXQuaXNDb25uZWN0ZWQgPT09IGZhbHNlKVxuICAgICAgICByZXR1cm47XG4gICAgICBpZiAoZWwub2Zmc2V0V2lkdGggPCAxICYmIGVsLm9mZnNldEhlaWdodCA8IDEpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGlmIChlbC5feF9pc1Nob3duID09PSBmYWxzZSlcbiAgICAgICAgcmV0dXJuO1xuICAgICAgbmV4dChlKTtcbiAgICB9KTtcbiAgfVxuICBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKFwic2VsZlwiKSlcbiAgICBoYW5kbGVyNCA9IHdyYXBIYW5kbGVyKGhhbmRsZXI0LCAobmV4dCwgZSkgPT4ge1xuICAgICAgZS50YXJnZXQgPT09IGVsICYmIG5leHQoZSk7XG4gICAgfSk7XG4gIGlmIChpc0tleUV2ZW50KGV2ZW50KSB8fCBpc0NsaWNrRXZlbnQoZXZlbnQpKSB7XG4gICAgaGFuZGxlcjQgPSB3cmFwSGFuZGxlcihoYW5kbGVyNCwgKG5leHQsIGUpID0+IHtcbiAgICAgIGlmIChpc0xpc3RlbmluZ0ZvckFTcGVjaWZpY0tleVRoYXRIYXNudEJlZW5QcmVzc2VkKGUsIG1vZGlmaWVycykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgbmV4dChlKTtcbiAgICB9KTtcbiAgfVxuICBsaXN0ZW5lclRhcmdldC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyNCwgb3B0aW9ucyk7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgbGlzdGVuZXJUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlcjQsIG9wdGlvbnMpO1xuICB9O1xufVxuZnVuY3Rpb24gZG90U3ludGF4KHN1YmplY3QpIHtcbiAgcmV0dXJuIHN1YmplY3QucmVwbGFjZSgvLS9nLCBcIi5cIik7XG59XG5mdW5jdGlvbiBjYW1lbENhc2UyKHN1YmplY3QpIHtcbiAgcmV0dXJuIHN1YmplY3QudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC8tKFxcdykvZywgKG1hdGNoLCBjaGFyKSA9PiBjaGFyLnRvVXBwZXJDYXNlKCkpO1xufVxuZnVuY3Rpb24gaXNOdW1lcmljKHN1YmplY3QpIHtcbiAgcmV0dXJuICFBcnJheS5pc0FycmF5KHN1YmplY3QpICYmICFpc05hTihzdWJqZWN0KTtcbn1cbmZ1bmN0aW9uIGtlYmFiQ2FzZTIoc3ViamVjdCkge1xuICBpZiAoW1wiIFwiLCBcIl9cIl0uaW5jbHVkZXMoXG4gICAgc3ViamVjdFxuICApKVxuICAgIHJldHVybiBzdWJqZWN0O1xuICByZXR1cm4gc3ViamVjdC5yZXBsYWNlKC8oW2Etel0pKFtBLVpdKS9nLCBcIiQxLSQyXCIpLnJlcGxhY2UoL1tfXFxzXS8sIFwiLVwiKS50b0xvd2VyQ2FzZSgpO1xufVxuZnVuY3Rpb24gaXNLZXlFdmVudChldmVudCkge1xuICByZXR1cm4gW1wia2V5ZG93blwiLCBcImtleXVwXCJdLmluY2x1ZGVzKGV2ZW50KTtcbn1cbmZ1bmN0aW9uIGlzQ2xpY2tFdmVudChldmVudCkge1xuICByZXR1cm4gW1wiY29udGV4dG1lbnVcIiwgXCJjbGlja1wiLCBcIm1vdXNlXCJdLnNvbWUoKGkpID0+IGV2ZW50LmluY2x1ZGVzKGkpKTtcbn1cbmZ1bmN0aW9uIGlzTGlzdGVuaW5nRm9yQVNwZWNpZmljS2V5VGhhdEhhc250QmVlblByZXNzZWQoZSwgbW9kaWZpZXJzKSB7XG4gIGxldCBrZXlNb2RpZmllcnMgPSBtb2RpZmllcnMuZmlsdGVyKChpKSA9PiB7XG4gICAgcmV0dXJuICFbXCJ3aW5kb3dcIiwgXCJkb2N1bWVudFwiLCBcInByZXZlbnRcIiwgXCJzdG9wXCIsIFwib25jZVwiLCBcImNhcHR1cmVcIiwgXCJzZWxmXCIsIFwiYXdheVwiLCBcIm91dHNpZGVcIiwgXCJwYXNzaXZlXCJdLmluY2x1ZGVzKGkpO1xuICB9KTtcbiAgaWYgKGtleU1vZGlmaWVycy5pbmNsdWRlcyhcImRlYm91bmNlXCIpKSB7XG4gICAgbGV0IGRlYm91bmNlSW5kZXggPSBrZXlNb2RpZmllcnMuaW5kZXhPZihcImRlYm91bmNlXCIpO1xuICAgIGtleU1vZGlmaWVycy5zcGxpY2UoZGVib3VuY2VJbmRleCwgaXNOdW1lcmljKChrZXlNb2RpZmllcnNbZGVib3VuY2VJbmRleCArIDFdIHx8IFwiaW52YWxpZC13YWl0XCIpLnNwbGl0KFwibXNcIilbMF0pID8gMiA6IDEpO1xuICB9XG4gIGlmIChrZXlNb2RpZmllcnMuaW5jbHVkZXMoXCJ0aHJvdHRsZVwiKSkge1xuICAgIGxldCBkZWJvdW5jZUluZGV4ID0ga2V5TW9kaWZpZXJzLmluZGV4T2YoXCJ0aHJvdHRsZVwiKTtcbiAgICBrZXlNb2RpZmllcnMuc3BsaWNlKGRlYm91bmNlSW5kZXgsIGlzTnVtZXJpYygoa2V5TW9kaWZpZXJzW2RlYm91bmNlSW5kZXggKyAxXSB8fCBcImludmFsaWQtd2FpdFwiKS5zcGxpdChcIm1zXCIpWzBdKSA/IDIgOiAxKTtcbiAgfVxuICBpZiAoa2V5TW9kaWZpZXJzLmxlbmd0aCA9PT0gMClcbiAgICByZXR1cm4gZmFsc2U7XG4gIGlmIChrZXlNb2RpZmllcnMubGVuZ3RoID09PSAxICYmIGtleVRvTW9kaWZpZXJzKGUua2V5KS5pbmNsdWRlcyhrZXlNb2RpZmllcnNbMF0pKVxuICAgIHJldHVybiBmYWxzZTtcbiAgY29uc3Qgc3lzdGVtS2V5TW9kaWZpZXJzID0gW1wiY3RybFwiLCBcInNoaWZ0XCIsIFwiYWx0XCIsIFwibWV0YVwiLCBcImNtZFwiLCBcInN1cGVyXCJdO1xuICBjb25zdCBzZWxlY3RlZFN5c3RlbUtleU1vZGlmaWVycyA9IHN5c3RlbUtleU1vZGlmaWVycy5maWx0ZXIoKG1vZGlmaWVyKSA9PiBrZXlNb2RpZmllcnMuaW5jbHVkZXMobW9kaWZpZXIpKTtcbiAga2V5TW9kaWZpZXJzID0ga2V5TW9kaWZpZXJzLmZpbHRlcigoaSkgPT4gIXNlbGVjdGVkU3lzdGVtS2V5TW9kaWZpZXJzLmluY2x1ZGVzKGkpKTtcbiAgaWYgKHNlbGVjdGVkU3lzdGVtS2V5TW9kaWZpZXJzLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBhY3RpdmVseVByZXNzZWRLZXlNb2RpZmllcnMgPSBzZWxlY3RlZFN5c3RlbUtleU1vZGlmaWVycy5maWx0ZXIoKG1vZGlmaWVyKSA9PiB7XG4gICAgICBpZiAobW9kaWZpZXIgPT09IFwiY21kXCIgfHwgbW9kaWZpZXIgPT09IFwic3VwZXJcIilcbiAgICAgICAgbW9kaWZpZXIgPSBcIm1ldGFcIjtcbiAgICAgIHJldHVybiBlW2Ake21vZGlmaWVyfUtleWBdO1xuICAgIH0pO1xuICAgIGlmIChhY3RpdmVseVByZXNzZWRLZXlNb2RpZmllcnMubGVuZ3RoID09PSBzZWxlY3RlZFN5c3RlbUtleU1vZGlmaWVycy5sZW5ndGgpIHtcbiAgICAgIGlmIChpc0NsaWNrRXZlbnQoZS50eXBlKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgaWYgKGtleVRvTW9kaWZpZXJzKGUua2V5KS5pbmNsdWRlcyhrZXlNb2RpZmllcnNbMF0pKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24ga2V5VG9Nb2RpZmllcnMoa2V5KSB7XG4gIGlmICgha2V5KVxuICAgIHJldHVybiBbXTtcbiAga2V5ID0ga2ViYWJDYXNlMihrZXkpO1xuICBsZXQgbW9kaWZpZXJUb0tleU1hcCA9IHtcbiAgICBcImN0cmxcIjogXCJjb250cm9sXCIsXG4gICAgXCJzbGFzaFwiOiBcIi9cIixcbiAgICBcInNwYWNlXCI6IFwiIFwiLFxuICAgIFwic3BhY2ViYXJcIjogXCIgXCIsXG4gICAgXCJjbWRcIjogXCJtZXRhXCIsXG4gICAgXCJlc2NcIjogXCJlc2NhcGVcIixcbiAgICBcInVwXCI6IFwiYXJyb3ctdXBcIixcbiAgICBcImRvd25cIjogXCJhcnJvdy1kb3duXCIsXG4gICAgXCJsZWZ0XCI6IFwiYXJyb3ctbGVmdFwiLFxuICAgIFwicmlnaHRcIjogXCJhcnJvdy1yaWdodFwiLFxuICAgIFwicGVyaW9kXCI6IFwiLlwiLFxuICAgIFwiY29tbWFcIjogXCIsXCIsXG4gICAgXCJlcXVhbFwiOiBcIj1cIixcbiAgICBcIm1pbnVzXCI6IFwiLVwiLFxuICAgIFwidW5kZXJzY29yZVwiOiBcIl9cIlxuICB9O1xuICBtb2RpZmllclRvS2V5TWFwW2tleV0gPSBrZXk7XG4gIHJldHVybiBPYmplY3Qua2V5cyhtb2RpZmllclRvS2V5TWFwKS5tYXAoKG1vZGlmaWVyKSA9PiB7XG4gICAgaWYgKG1vZGlmaWVyVG9LZXlNYXBbbW9kaWZpZXJdID09PSBrZXkpXG4gICAgICByZXR1cm4gbW9kaWZpZXI7XG4gIH0pLmZpbHRlcigobW9kaWZpZXIpID0+IG1vZGlmaWVyKTtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2RpcmVjdGl2ZXMveC1tb2RlbC5qc1xuZGlyZWN0aXZlKFwibW9kZWxcIiwgKGVsLCB7IG1vZGlmaWVycywgZXhwcmVzc2lvbiB9LCB7IGVmZmVjdDogZWZmZWN0MywgY2xlYW51cDogY2xlYW51cDIgfSkgPT4ge1xuICBsZXQgc2NvcGVUYXJnZXQgPSBlbDtcbiAgaWYgKG1vZGlmaWVycy5pbmNsdWRlcyhcInBhcmVudFwiKSkge1xuICAgIHNjb3BlVGFyZ2V0ID0gZWwucGFyZW50Tm9kZTtcbiAgfVxuICBsZXQgZXZhbHVhdGVHZXQgPSBldmFsdWF0ZUxhdGVyKHNjb3BlVGFyZ2V0LCBleHByZXNzaW9uKTtcbiAgbGV0IGV2YWx1YXRlU2V0O1xuICBpZiAodHlwZW9mIGV4cHJlc3Npb24gPT09IFwic3RyaW5nXCIpIHtcbiAgICBldmFsdWF0ZVNldCA9IGV2YWx1YXRlTGF0ZXIoc2NvcGVUYXJnZXQsIGAke2V4cHJlc3Npb259ID0gX19wbGFjZWhvbGRlcmApO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBleHByZXNzaW9uID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIGV4cHJlc3Npb24oKSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGV2YWx1YXRlU2V0ID0gZXZhbHVhdGVMYXRlcihzY29wZVRhcmdldCwgYCR7ZXhwcmVzc2lvbigpfSA9IF9fcGxhY2Vob2xkZXJgKTtcbiAgfSBlbHNlIHtcbiAgICBldmFsdWF0ZVNldCA9ICgpID0+IHtcbiAgICB9O1xuICB9XG4gIGxldCBnZXRWYWx1ZSA9ICgpID0+IHtcbiAgICBsZXQgcmVzdWx0O1xuICAgIGV2YWx1YXRlR2V0KCh2YWx1ZSkgPT4gcmVzdWx0ID0gdmFsdWUpO1xuICAgIHJldHVybiBpc0dldHRlclNldHRlcihyZXN1bHQpID8gcmVzdWx0LmdldCgpIDogcmVzdWx0O1xuICB9O1xuICBsZXQgc2V0VmFsdWUgPSAodmFsdWUpID0+IHtcbiAgICBsZXQgcmVzdWx0O1xuICAgIGV2YWx1YXRlR2V0KCh2YWx1ZTIpID0+IHJlc3VsdCA9IHZhbHVlMik7XG4gICAgaWYgKGlzR2V0dGVyU2V0dGVyKHJlc3VsdCkpIHtcbiAgICAgIHJlc3VsdC5zZXQodmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBldmFsdWF0ZVNldCgoKSA9PiB7XG4gICAgICB9LCB7XG4gICAgICAgIHNjb3BlOiB7IFwiX19wbGFjZWhvbGRlclwiOiB2YWx1ZSB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG4gIGlmICh0eXBlb2YgZXhwcmVzc2lvbiA9PT0gXCJzdHJpbmdcIiAmJiBlbC50eXBlID09PSBcInJhZGlvXCIpIHtcbiAgICBtdXRhdGVEb20oKCkgPT4ge1xuICAgICAgaWYgKCFlbC5oYXNBdHRyaWJ1dGUoXCJuYW1lXCIpKVxuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIGV4cHJlc3Npb24pO1xuICAgIH0pO1xuICB9XG4gIHZhciBldmVudCA9IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJzZWxlY3RcIiB8fCBbXCJjaGVja2JveFwiLCBcInJhZGlvXCJdLmluY2x1ZGVzKGVsLnR5cGUpIHx8IG1vZGlmaWVycy5pbmNsdWRlcyhcImxhenlcIikgPyBcImNoYW5nZVwiIDogXCJpbnB1dFwiO1xuICBsZXQgcmVtb3ZlTGlzdGVuZXIgPSBpc0Nsb25pbmcgPyAoKSA9PiB7XG4gIH0gOiBvbihlbCwgZXZlbnQsIG1vZGlmaWVycywgKGUpID0+IHtcbiAgICBzZXRWYWx1ZShnZXRJbnB1dFZhbHVlKGVsLCBtb2RpZmllcnMsIGUsIGdldFZhbHVlKCkpKTtcbiAgfSk7XG4gIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoXCJmaWxsXCIpKSB7XG4gICAgaWYgKFt2b2lkIDAsIG51bGwsIFwiXCJdLmluY2x1ZGVzKGdldFZhbHVlKCkpIHx8IGlzQ2hlY2tib3goZWwpICYmIEFycmF5LmlzQXJyYXkoZ2V0VmFsdWUoKSkgfHwgZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcInNlbGVjdFwiICYmIGVsLm11bHRpcGxlKSB7XG4gICAgICBzZXRWYWx1ZShcbiAgICAgICAgZ2V0SW5wdXRWYWx1ZShlbCwgbW9kaWZpZXJzLCB7IHRhcmdldDogZWwgfSwgZ2V0VmFsdWUoKSlcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIGlmICghZWwuX3hfcmVtb3ZlTW9kZWxMaXN0ZW5lcnMpXG4gICAgZWwuX3hfcmVtb3ZlTW9kZWxMaXN0ZW5lcnMgPSB7fTtcbiAgZWwuX3hfcmVtb3ZlTW9kZWxMaXN0ZW5lcnNbXCJkZWZhdWx0XCJdID0gcmVtb3ZlTGlzdGVuZXI7XG4gIGNsZWFudXAyKCgpID0+IGVsLl94X3JlbW92ZU1vZGVsTGlzdGVuZXJzW1wiZGVmYXVsdFwiXSgpKTtcbiAgaWYgKGVsLmZvcm0pIHtcbiAgICBsZXQgcmVtb3ZlUmVzZXRMaXN0ZW5lciA9IG9uKGVsLmZvcm0sIFwicmVzZXRcIiwgW10sIChlKSA9PiB7XG4gICAgICBuZXh0VGljaygoKSA9PiBlbC5feF9tb2RlbCAmJiBlbC5feF9tb2RlbC5zZXQoZ2V0SW5wdXRWYWx1ZShlbCwgbW9kaWZpZXJzLCB7IHRhcmdldDogZWwgfSwgZ2V0VmFsdWUoKSkpKTtcbiAgICB9KTtcbiAgICBjbGVhbnVwMigoKSA9PiByZW1vdmVSZXNldExpc3RlbmVyKCkpO1xuICB9XG4gIGVsLl94X21vZGVsID0ge1xuICAgIGdldCgpIHtcbiAgICAgIHJldHVybiBnZXRWYWx1ZSgpO1xuICAgIH0sXG4gICAgc2V0KHZhbHVlKSB7XG4gICAgICBzZXRWYWx1ZSh2YWx1ZSk7XG4gICAgfVxuICB9O1xuICBlbC5feF9mb3JjZU1vZGVsVXBkYXRlID0gKHZhbHVlKSA9PiB7XG4gICAgaWYgKHZhbHVlID09PSB2b2lkIDAgJiYgdHlwZW9mIGV4cHJlc3Npb24gPT09IFwic3RyaW5nXCIgJiYgZXhwcmVzc2lvbi5tYXRjaCgvXFwuLykpXG4gICAgICB2YWx1ZSA9IFwiXCI7XG4gICAgd2luZG93LmZyb21Nb2RlbCA9IHRydWU7XG4gICAgbXV0YXRlRG9tKCgpID0+IGJpbmQoZWwsIFwidmFsdWVcIiwgdmFsdWUpKTtcbiAgICBkZWxldGUgd2luZG93LmZyb21Nb2RlbDtcbiAgfTtcbiAgZWZmZWN0MygoKSA9PiB7XG4gICAgbGV0IHZhbHVlID0gZ2V0VmFsdWUoKTtcbiAgICBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKFwidW5pbnRydXNpdmVcIikgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5pc1NhbWVOb2RlKGVsKSlcbiAgICAgIHJldHVybjtcbiAgICBlbC5feF9mb3JjZU1vZGVsVXBkYXRlKHZhbHVlKTtcbiAgfSk7XG59KTtcbmZ1bmN0aW9uIGdldElucHV0VmFsdWUoZWwsIG1vZGlmaWVycywgZXZlbnQsIGN1cnJlbnRWYWx1ZSkge1xuICByZXR1cm4gbXV0YXRlRG9tKCgpID0+IHtcbiAgICBpZiAoZXZlbnQgaW5zdGFuY2VvZiBDdXN0b21FdmVudCAmJiBldmVudC5kZXRhaWwgIT09IHZvaWQgMClcbiAgICAgIHJldHVybiBldmVudC5kZXRhaWwgIT09IG51bGwgJiYgZXZlbnQuZGV0YWlsICE9PSB2b2lkIDAgPyBldmVudC5kZXRhaWwgOiBldmVudC50YXJnZXQudmFsdWU7XG4gICAgZWxzZSBpZiAoaXNDaGVja2JveChlbCkpIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGN1cnJlbnRWYWx1ZSkpIHtcbiAgICAgICAgbGV0IG5ld1ZhbHVlID0gbnVsbDtcbiAgICAgICAgaWYgKG1vZGlmaWVycy5pbmNsdWRlcyhcIm51bWJlclwiKSkge1xuICAgICAgICAgIG5ld1ZhbHVlID0gc2FmZVBhcnNlTnVtYmVyKGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKFwiYm9vbGVhblwiKSkge1xuICAgICAgICAgIG5ld1ZhbHVlID0gc2FmZVBhcnNlQm9vbGVhbihldmVudC50YXJnZXQudmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ld1ZhbHVlID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBldmVudC50YXJnZXQuY2hlY2tlZCA/IGN1cnJlbnRWYWx1ZS5pbmNsdWRlcyhuZXdWYWx1ZSkgPyBjdXJyZW50VmFsdWUgOiBjdXJyZW50VmFsdWUuY29uY2F0KFtuZXdWYWx1ZV0pIDogY3VycmVudFZhbHVlLmZpbHRlcigoZWwyKSA9PiAhY2hlY2tlZEF0dHJMb29zZUNvbXBhcmUyKGVsMiwgbmV3VmFsdWUpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBldmVudC50YXJnZXQuY2hlY2tlZDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJzZWxlY3RcIiAmJiBlbC5tdWx0aXBsZSkge1xuICAgICAgaWYgKG1vZGlmaWVycy5pbmNsdWRlcyhcIm51bWJlclwiKSkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShldmVudC50YXJnZXQuc2VsZWN0ZWRPcHRpb25zKS5tYXAoKG9wdGlvbikgPT4ge1xuICAgICAgICAgIGxldCByYXdWYWx1ZSA9IG9wdGlvbi52YWx1ZSB8fCBvcHRpb24udGV4dDtcbiAgICAgICAgICByZXR1cm4gc2FmZVBhcnNlTnVtYmVyKHJhd1ZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKG1vZGlmaWVycy5pbmNsdWRlcyhcImJvb2xlYW5cIikpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oZXZlbnQudGFyZ2V0LnNlbGVjdGVkT3B0aW9ucykubWFwKChvcHRpb24pID0+IHtcbiAgICAgICAgICBsZXQgcmF3VmFsdWUgPSBvcHRpb24udmFsdWUgfHwgb3B0aW9uLnRleHQ7XG4gICAgICAgICAgcmV0dXJuIHNhZmVQYXJzZUJvb2xlYW4ocmF3VmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBBcnJheS5mcm9tKGV2ZW50LnRhcmdldC5zZWxlY3RlZE9wdGlvbnMpLm1hcCgob3B0aW9uKSA9PiB7XG4gICAgICAgIHJldHVybiBvcHRpb24udmFsdWUgfHwgb3B0aW9uLnRleHQ7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IG5ld1ZhbHVlO1xuICAgICAgaWYgKGlzUmFkaW8oZWwpKSB7XG4gICAgICAgIGlmIChldmVudC50YXJnZXQuY2hlY2tlZCkge1xuICAgICAgICAgIG5ld1ZhbHVlID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ld1ZhbHVlID0gY3VycmVudFZhbHVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXdWYWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoXCJudW1iZXJcIikpIHtcbiAgICAgICAgcmV0dXJuIHNhZmVQYXJzZU51bWJlcihuZXdWYWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKG1vZGlmaWVycy5pbmNsdWRlcyhcImJvb2xlYW5cIikpIHtcbiAgICAgICAgcmV0dXJuIHNhZmVQYXJzZUJvb2xlYW4obmV3VmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoXCJ0cmltXCIpKSB7XG4gICAgICAgIHJldHVybiBuZXdWYWx1ZS50cmltKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV3VmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIHNhZmVQYXJzZU51bWJlcihyYXdWYWx1ZSkge1xuICBsZXQgbnVtYmVyID0gcmF3VmFsdWUgPyBwYXJzZUZsb2F0KHJhd1ZhbHVlKSA6IG51bGw7XG4gIHJldHVybiBpc051bWVyaWMyKG51bWJlcikgPyBudW1iZXIgOiByYXdWYWx1ZTtcbn1cbmZ1bmN0aW9uIGNoZWNrZWRBdHRyTG9vc2VDb21wYXJlMih2YWx1ZUEsIHZhbHVlQikge1xuICByZXR1cm4gdmFsdWVBID09IHZhbHVlQjtcbn1cbmZ1bmN0aW9uIGlzTnVtZXJpYzIoc3ViamVjdCkge1xuICByZXR1cm4gIUFycmF5LmlzQXJyYXkoc3ViamVjdCkgJiYgIWlzTmFOKHN1YmplY3QpO1xufVxuZnVuY3Rpb24gaXNHZXR0ZXJTZXR0ZXIodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgdmFsdWUuZ2V0ID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIHZhbHVlLnNldCA9PT0gXCJmdW5jdGlvblwiO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvZGlyZWN0aXZlcy94LWNsb2FrLmpzXG5kaXJlY3RpdmUoXCJjbG9ha1wiLCAoZWwpID0+IHF1ZXVlTWljcm90YXNrKCgpID0+IG11dGF0ZURvbSgoKSA9PiBlbC5yZW1vdmVBdHRyaWJ1dGUocHJlZml4KFwiY2xvYWtcIikpKSkpO1xuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvZGlyZWN0aXZlcy94LWluaXQuanNcbmFkZEluaXRTZWxlY3RvcigoKSA9PiBgWyR7cHJlZml4KFwiaW5pdFwiKX1dYCk7XG5kaXJlY3RpdmUoXCJpbml0XCIsIHNraXBEdXJpbmdDbG9uZSgoZWwsIHsgZXhwcmVzc2lvbiB9LCB7IGV2YWx1YXRlOiBldmFsdWF0ZTIgfSkgPT4ge1xuICBpZiAodHlwZW9mIGV4cHJlc3Npb24gPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gISFleHByZXNzaW9uLnRyaW0oKSAmJiBldmFsdWF0ZTIoZXhwcmVzc2lvbiwge30sIGZhbHNlKTtcbiAgfVxuICByZXR1cm4gZXZhbHVhdGUyKGV4cHJlc3Npb24sIHt9LCBmYWxzZSk7XG59KSk7XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9kaXJlY3RpdmVzL3gtdGV4dC5qc1xuZGlyZWN0aXZlKFwidGV4dFwiLCAoZWwsIHsgZXhwcmVzc2lvbiB9LCB7IGVmZmVjdDogZWZmZWN0MywgZXZhbHVhdGVMYXRlcjogZXZhbHVhdGVMYXRlcjIgfSkgPT4ge1xuICBsZXQgZXZhbHVhdGUyID0gZXZhbHVhdGVMYXRlcjIoZXhwcmVzc2lvbik7XG4gIGVmZmVjdDMoKCkgPT4ge1xuICAgIGV2YWx1YXRlMigodmFsdWUpID0+IHtcbiAgICAgIG11dGF0ZURvbSgoKSA9PiB7XG4gICAgICAgIGVsLnRleHRDb250ZW50ID0gdmFsdWU7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2RpcmVjdGl2ZXMveC1odG1sLmpzXG5kaXJlY3RpdmUoXCJodG1sXCIsIChlbCwgeyBleHByZXNzaW9uIH0sIHsgZWZmZWN0OiBlZmZlY3QzLCBldmFsdWF0ZUxhdGVyOiBldmFsdWF0ZUxhdGVyMiB9KSA9PiB7XG4gIGxldCBldmFsdWF0ZTIgPSBldmFsdWF0ZUxhdGVyMihleHByZXNzaW9uKTtcbiAgZWZmZWN0MygoKSA9PiB7XG4gICAgZXZhbHVhdGUyKCh2YWx1ZSkgPT4ge1xuICAgICAgbXV0YXRlRG9tKCgpID0+IHtcbiAgICAgICAgZWwuaW5uZXJIVE1MID0gdmFsdWU7XG4gICAgICAgIGVsLl94X2lnbm9yZVNlbGYgPSB0cnVlO1xuICAgICAgICBpbml0VHJlZShlbCk7XG4gICAgICAgIGRlbGV0ZSBlbC5feF9pZ25vcmVTZWxmO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9kaXJlY3RpdmVzL3gtYmluZC5qc1xubWFwQXR0cmlidXRlcyhzdGFydGluZ1dpdGgoXCI6XCIsIGludG8ocHJlZml4KFwiYmluZDpcIikpKSk7XG52YXIgaGFuZGxlcjIgPSAoZWwsIHsgdmFsdWUsIG1vZGlmaWVycywgZXhwcmVzc2lvbiwgb3JpZ2luYWwgfSwgeyBlZmZlY3Q6IGVmZmVjdDMsIGNsZWFudXA6IGNsZWFudXAyIH0pID0+IHtcbiAgaWYgKCF2YWx1ZSkge1xuICAgIGxldCBiaW5kaW5nUHJvdmlkZXJzID0ge307XG4gICAgaW5qZWN0QmluZGluZ1Byb3ZpZGVycyhiaW5kaW5nUHJvdmlkZXJzKTtcbiAgICBsZXQgZ2V0QmluZGluZ3MgPSBldmFsdWF0ZUxhdGVyKGVsLCBleHByZXNzaW9uKTtcbiAgICBnZXRCaW5kaW5ncygoYmluZGluZ3MpID0+IHtcbiAgICAgIGFwcGx5QmluZGluZ3NPYmplY3QoZWwsIGJpbmRpbmdzLCBvcmlnaW5hbCk7XG4gICAgfSwgeyBzY29wZTogYmluZGluZ1Byb3ZpZGVycyB9KTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHZhbHVlID09PSBcImtleVwiKVxuICAgIHJldHVybiBzdG9yZUtleUZvclhGb3IoZWwsIGV4cHJlc3Npb24pO1xuICBpZiAoZWwuX3hfaW5saW5lQmluZGluZ3MgJiYgZWwuX3hfaW5saW5lQmluZGluZ3NbdmFsdWVdICYmIGVsLl94X2lubGluZUJpbmRpbmdzW3ZhbHVlXS5leHRyYWN0KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxldCBldmFsdWF0ZTIgPSBldmFsdWF0ZUxhdGVyKGVsLCBleHByZXNzaW9uKTtcbiAgZWZmZWN0MygoKSA9PiBldmFsdWF0ZTIoKHJlc3VsdCkgPT4ge1xuICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCAmJiB0eXBlb2YgZXhwcmVzc2lvbiA9PT0gXCJzdHJpbmdcIiAmJiBleHByZXNzaW9uLm1hdGNoKC9cXC4vKSkge1xuICAgICAgcmVzdWx0ID0gXCJcIjtcbiAgICB9XG4gICAgbXV0YXRlRG9tKCgpID0+IGJpbmQoZWwsIHZhbHVlLCByZXN1bHQsIG1vZGlmaWVycykpO1xuICB9KSk7XG4gIGNsZWFudXAyKCgpID0+IHtcbiAgICBlbC5feF91bmRvQWRkZWRDbGFzc2VzICYmIGVsLl94X3VuZG9BZGRlZENsYXNzZXMoKTtcbiAgICBlbC5feF91bmRvQWRkZWRTdHlsZXMgJiYgZWwuX3hfdW5kb0FkZGVkU3R5bGVzKCk7XG4gIH0pO1xufTtcbmhhbmRsZXIyLmlubGluZSA9IChlbCwgeyB2YWx1ZSwgbW9kaWZpZXJzLCBleHByZXNzaW9uIH0pID0+IHtcbiAgaWYgKCF2YWx1ZSlcbiAgICByZXR1cm47XG4gIGlmICghZWwuX3hfaW5saW5lQmluZGluZ3MpXG4gICAgZWwuX3hfaW5saW5lQmluZGluZ3MgPSB7fTtcbiAgZWwuX3hfaW5saW5lQmluZGluZ3NbdmFsdWVdID0geyBleHByZXNzaW9uLCBleHRyYWN0OiBmYWxzZSB9O1xufTtcbmRpcmVjdGl2ZShcImJpbmRcIiwgaGFuZGxlcjIpO1xuZnVuY3Rpb24gc3RvcmVLZXlGb3JYRm9yKGVsLCBleHByZXNzaW9uKSB7XG4gIGVsLl94X2tleUV4cHJlc3Npb24gPSBleHByZXNzaW9uO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvZGlyZWN0aXZlcy94LWRhdGEuanNcbmFkZFJvb3RTZWxlY3RvcigoKSA9PiBgWyR7cHJlZml4KFwiZGF0YVwiKX1dYCk7XG5kaXJlY3RpdmUoXCJkYXRhXCIsIChlbCwgeyBleHByZXNzaW9uIH0sIHsgY2xlYW51cDogY2xlYW51cDIgfSkgPT4ge1xuICBpZiAoc2hvdWxkU2tpcFJlZ2lzdGVyaW5nRGF0YUR1cmluZ0Nsb25lKGVsKSlcbiAgICByZXR1cm47XG4gIGV4cHJlc3Npb24gPSBleHByZXNzaW9uID09PSBcIlwiID8gXCJ7fVwiIDogZXhwcmVzc2lvbjtcbiAgbGV0IG1hZ2ljQ29udGV4dCA9IHt9O1xuICBpbmplY3RNYWdpY3MobWFnaWNDb250ZXh0LCBlbCk7XG4gIGxldCBkYXRhUHJvdmlkZXJDb250ZXh0ID0ge307XG4gIGluamVjdERhdGFQcm92aWRlcnMoZGF0YVByb3ZpZGVyQ29udGV4dCwgbWFnaWNDb250ZXh0KTtcbiAgbGV0IGRhdGEyID0gZXZhbHVhdGUoZWwsIGV4cHJlc3Npb24sIHsgc2NvcGU6IGRhdGFQcm92aWRlckNvbnRleHQgfSk7XG4gIGlmIChkYXRhMiA9PT0gdm9pZCAwIHx8IGRhdGEyID09PSB0cnVlKVxuICAgIGRhdGEyID0ge307XG4gIGluamVjdE1hZ2ljcyhkYXRhMiwgZWwpO1xuICBsZXQgcmVhY3RpdmVEYXRhID0gcmVhY3RpdmUoZGF0YTIpO1xuICBpbml0SW50ZXJjZXB0b3JzKHJlYWN0aXZlRGF0YSk7XG4gIGxldCB1bmRvID0gYWRkU2NvcGVUb05vZGUoZWwsIHJlYWN0aXZlRGF0YSk7XG4gIHJlYWN0aXZlRGF0YVtcImluaXRcIl0gJiYgZXZhbHVhdGUoZWwsIHJlYWN0aXZlRGF0YVtcImluaXRcIl0pO1xuICBjbGVhbnVwMigoKSA9PiB7XG4gICAgcmVhY3RpdmVEYXRhW1wiZGVzdHJveVwiXSAmJiBldmFsdWF0ZShlbCwgcmVhY3RpdmVEYXRhW1wiZGVzdHJveVwiXSk7XG4gICAgdW5kbygpO1xuICB9KTtcbn0pO1xuaW50ZXJjZXB0Q2xvbmUoKGZyb20sIHRvKSA9PiB7XG4gIGlmIChmcm9tLl94X2RhdGFTdGFjaykge1xuICAgIHRvLl94X2RhdGFTdGFjayA9IGZyb20uX3hfZGF0YVN0YWNrO1xuICAgIHRvLnNldEF0dHJpYnV0ZShcImRhdGEtaGFzLWFscGluZS1zdGF0ZVwiLCB0cnVlKTtcbiAgfVxufSk7XG5mdW5jdGlvbiBzaG91bGRTa2lwUmVnaXN0ZXJpbmdEYXRhRHVyaW5nQ2xvbmUoZWwpIHtcbiAgaWYgKCFpc0Nsb25pbmcpXG4gICAgcmV0dXJuIGZhbHNlO1xuICBpZiAoaXNDbG9uaW5nTGVnYWN5KVxuICAgIHJldHVybiB0cnVlO1xuICByZXR1cm4gZWwuaGFzQXR0cmlidXRlKFwiZGF0YS1oYXMtYWxwaW5lLXN0YXRlXCIpO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvZGlyZWN0aXZlcy94LXNob3cuanNcbmRpcmVjdGl2ZShcInNob3dcIiwgKGVsLCB7IG1vZGlmaWVycywgZXhwcmVzc2lvbiB9LCB7IGVmZmVjdDogZWZmZWN0MyB9KSA9PiB7XG4gIGxldCBldmFsdWF0ZTIgPSBldmFsdWF0ZUxhdGVyKGVsLCBleHByZXNzaW9uKTtcbiAgaWYgKCFlbC5feF9kb0hpZGUpXG4gICAgZWwuX3hfZG9IaWRlID0gKCkgPT4ge1xuICAgICAgbXV0YXRlRG9tKCgpID0+IHtcbiAgICAgICAgZWwuc3R5bGUuc2V0UHJvcGVydHkoXCJkaXNwbGF5XCIsIFwibm9uZVwiLCBtb2RpZmllcnMuaW5jbHVkZXMoXCJpbXBvcnRhbnRcIikgPyBcImltcG9ydGFudFwiIDogdm9pZCAwKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIGlmICghZWwuX3hfZG9TaG93KVxuICAgIGVsLl94X2RvU2hvdyA9ICgpID0+IHtcbiAgICAgIG11dGF0ZURvbSgoKSA9PiB7XG4gICAgICAgIGlmIChlbC5zdHlsZS5sZW5ndGggPT09IDEgJiYgZWwuc3R5bGUuZGlzcGxheSA9PT0gXCJub25lXCIpIHtcbiAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoXCJzdHlsZVwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eShcImRpc3BsYXlcIik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG4gIGxldCBoaWRlID0gKCkgPT4ge1xuICAgIGVsLl94X2RvSGlkZSgpO1xuICAgIGVsLl94X2lzU2hvd24gPSBmYWxzZTtcbiAgfTtcbiAgbGV0IHNob3cgPSAoKSA9PiB7XG4gICAgZWwuX3hfZG9TaG93KCk7XG4gICAgZWwuX3hfaXNTaG93biA9IHRydWU7XG4gIH07XG4gIGxldCBjbGlja0F3YXlDb21wYXRpYmxlU2hvdyA9ICgpID0+IHNldFRpbWVvdXQoc2hvdyk7XG4gIGxldCB0b2dnbGUgPSBvbmNlKFxuICAgICh2YWx1ZSkgPT4gdmFsdWUgPyBzaG93KCkgOiBoaWRlKCksXG4gICAgKHZhbHVlKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGVsLl94X3RvZ2dsZUFuZENhc2NhZGVXaXRoVHJhbnNpdGlvbnMgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBlbC5feF90b2dnbGVBbmRDYXNjYWRlV2l0aFRyYW5zaXRpb25zKGVsLCB2YWx1ZSwgc2hvdywgaGlkZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZSA/IGNsaWNrQXdheUNvbXBhdGlibGVTaG93KCkgOiBoaWRlKCk7XG4gICAgICB9XG4gICAgfVxuICApO1xuICBsZXQgb2xkVmFsdWU7XG4gIGxldCBmaXJzdFRpbWUgPSB0cnVlO1xuICBlZmZlY3QzKCgpID0+IGV2YWx1YXRlMigodmFsdWUpID0+IHtcbiAgICBpZiAoIWZpcnN0VGltZSAmJiB2YWx1ZSA9PT0gb2xkVmFsdWUpXG4gICAgICByZXR1cm47XG4gICAgaWYgKG1vZGlmaWVycy5pbmNsdWRlcyhcImltbWVkaWF0ZVwiKSlcbiAgICAgIHZhbHVlID8gY2xpY2tBd2F5Q29tcGF0aWJsZVNob3coKSA6IGhpZGUoKTtcbiAgICB0b2dnbGUodmFsdWUpO1xuICAgIG9sZFZhbHVlID0gdmFsdWU7XG4gICAgZmlyc3RUaW1lID0gZmFsc2U7XG4gIH0pKTtcbn0pO1xuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvZGlyZWN0aXZlcy94LWZvci5qc1xuZGlyZWN0aXZlKFwiZm9yXCIsIChlbCwgeyBleHByZXNzaW9uIH0sIHsgZWZmZWN0OiBlZmZlY3QzLCBjbGVhbnVwOiBjbGVhbnVwMiB9KSA9PiB7XG4gIGxldCBpdGVyYXRvck5hbWVzID0gcGFyc2VGb3JFeHByZXNzaW9uKGV4cHJlc3Npb24pO1xuICBsZXQgZXZhbHVhdGVJdGVtcyA9IGV2YWx1YXRlTGF0ZXIoZWwsIGl0ZXJhdG9yTmFtZXMuaXRlbXMpO1xuICBsZXQgZXZhbHVhdGVLZXkgPSBldmFsdWF0ZUxhdGVyKFxuICAgIGVsLFxuICAgIC8vIHRoZSB4LWJpbmQ6a2V5IGV4cHJlc3Npb24gaXMgc3RvcmVkIGZvciBvdXIgdXNlIGluc3RlYWQgb2YgZXZhbHVhdGVkLlxuICAgIGVsLl94X2tleUV4cHJlc3Npb24gfHwgXCJpbmRleFwiXG4gICk7XG4gIGVsLl94X3ByZXZLZXlzID0gW107XG4gIGVsLl94X2xvb2t1cCA9IHt9O1xuICBlZmZlY3QzKCgpID0+IGxvb3AoZWwsIGl0ZXJhdG9yTmFtZXMsIGV2YWx1YXRlSXRlbXMsIGV2YWx1YXRlS2V5KSk7XG4gIGNsZWFudXAyKCgpID0+IHtcbiAgICBPYmplY3QudmFsdWVzKGVsLl94X2xvb2t1cCkuZm9yRWFjaCgoZWwyKSA9PiBtdXRhdGVEb20oXG4gICAgICAoKSA9PiB7XG4gICAgICAgIGRlc3Ryb3lUcmVlKGVsMik7XG4gICAgICAgIGVsMi5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICApKTtcbiAgICBkZWxldGUgZWwuX3hfcHJldktleXM7XG4gICAgZGVsZXRlIGVsLl94X2xvb2t1cDtcbiAgfSk7XG59KTtcbmZ1bmN0aW9uIGxvb3AoZWwsIGl0ZXJhdG9yTmFtZXMsIGV2YWx1YXRlSXRlbXMsIGV2YWx1YXRlS2V5KSB7XG4gIGxldCBpc09iamVjdDIgPSAoaSkgPT4gdHlwZW9mIGkgPT09IFwib2JqZWN0XCIgJiYgIUFycmF5LmlzQXJyYXkoaSk7XG4gIGxldCB0ZW1wbGF0ZUVsID0gZWw7XG4gIGV2YWx1YXRlSXRlbXMoKGl0ZW1zKSA9PiB7XG4gICAgaWYgKGlzTnVtZXJpYzMoaXRlbXMpICYmIGl0ZW1zID49IDApIHtcbiAgICAgIGl0ZW1zID0gQXJyYXkuZnJvbShBcnJheShpdGVtcykua2V5cygpLCAoaSkgPT4gaSArIDEpO1xuICAgIH1cbiAgICBpZiAoaXRlbXMgPT09IHZvaWQgMClcbiAgICAgIGl0ZW1zID0gW107XG4gICAgbGV0IGxvb2t1cCA9IGVsLl94X2xvb2t1cDtcbiAgICBsZXQgcHJldktleXMgPSBlbC5feF9wcmV2S2V5cztcbiAgICBsZXQgc2NvcGVzID0gW107XG4gICAgbGV0IGtleXMgPSBbXTtcbiAgICBpZiAoaXNPYmplY3QyKGl0ZW1zKSkge1xuICAgICAgaXRlbXMgPSBPYmplY3QuZW50cmllcyhpdGVtcykubWFwKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgbGV0IHNjb3BlMiA9IGdldEl0ZXJhdGlvblNjb3BlVmFyaWFibGVzKGl0ZXJhdG9yTmFtZXMsIHZhbHVlLCBrZXksIGl0ZW1zKTtcbiAgICAgICAgZXZhbHVhdGVLZXkoKHZhbHVlMikgPT4ge1xuICAgICAgICAgIGlmIChrZXlzLmluY2x1ZGVzKHZhbHVlMikpXG4gICAgICAgICAgICB3YXJuKFwiRHVwbGljYXRlIGtleSBvbiB4LWZvclwiLCBlbCk7XG4gICAgICAgICAga2V5cy5wdXNoKHZhbHVlMik7XG4gICAgICAgIH0sIHsgc2NvcGU6IHsgaW5kZXg6IGtleSwgLi4uc2NvcGUyIH0gfSk7XG4gICAgICAgIHNjb3Blcy5wdXNoKHNjb3BlMik7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgc2NvcGUyID0gZ2V0SXRlcmF0aW9uU2NvcGVWYXJpYWJsZXMoaXRlcmF0b3JOYW1lcywgaXRlbXNbaV0sIGksIGl0ZW1zKTtcbiAgICAgICAgZXZhbHVhdGVLZXkoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgaWYgKGtleXMuaW5jbHVkZXModmFsdWUpKVxuICAgICAgICAgICAgd2FybihcIkR1cGxpY2F0ZSBrZXkgb24geC1mb3JcIiwgZWwpO1xuICAgICAgICAgIGtleXMucHVzaCh2YWx1ZSk7XG4gICAgICAgIH0sIHsgc2NvcGU6IHsgaW5kZXg6IGksIC4uLnNjb3BlMiB9IH0pO1xuICAgICAgICBzY29wZXMucHVzaChzY29wZTIpO1xuICAgICAgfVxuICAgIH1cbiAgICBsZXQgYWRkcyA9IFtdO1xuICAgIGxldCBtb3ZlcyA9IFtdO1xuICAgIGxldCByZW1vdmVzID0gW107XG4gICAgbGV0IHNhbWVzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmV2S2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGtleSA9IHByZXZLZXlzW2ldO1xuICAgICAgaWYgKGtleXMuaW5kZXhPZihrZXkpID09PSAtMSlcbiAgICAgICAgcmVtb3Zlcy5wdXNoKGtleSk7XG4gICAgfVxuICAgIHByZXZLZXlzID0gcHJldktleXMuZmlsdGVyKChrZXkpID0+ICFyZW1vdmVzLmluY2x1ZGVzKGtleSkpO1xuICAgIGxldCBsYXN0S2V5ID0gXCJ0ZW1wbGF0ZVwiO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGtleSA9IGtleXNbaV07XG4gICAgICBsZXQgcHJldkluZGV4ID0gcHJldktleXMuaW5kZXhPZihrZXkpO1xuICAgICAgaWYgKHByZXZJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgcHJldktleXMuc3BsaWNlKGksIDAsIGtleSk7XG4gICAgICAgIGFkZHMucHVzaChbbGFzdEtleSwgaV0pO1xuICAgICAgfSBlbHNlIGlmIChwcmV2SW5kZXggIT09IGkpIHtcbiAgICAgICAgbGV0IGtleUluU3BvdCA9IHByZXZLZXlzLnNwbGljZShpLCAxKVswXTtcbiAgICAgICAgbGV0IGtleUZvclNwb3QgPSBwcmV2S2V5cy5zcGxpY2UocHJldkluZGV4IC0gMSwgMSlbMF07XG4gICAgICAgIHByZXZLZXlzLnNwbGljZShpLCAwLCBrZXlGb3JTcG90KTtcbiAgICAgICAgcHJldktleXMuc3BsaWNlKHByZXZJbmRleCwgMCwga2V5SW5TcG90KTtcbiAgICAgICAgbW92ZXMucHVzaChba2V5SW5TcG90LCBrZXlGb3JTcG90XSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzYW1lcy5wdXNoKGtleSk7XG4gICAgICB9XG4gICAgICBsYXN0S2V5ID0ga2V5O1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlbW92ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBrZXkgPSByZW1vdmVzW2ldO1xuICAgICAgaWYgKCEoa2V5IGluIGxvb2t1cCkpXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgbXV0YXRlRG9tKCgpID0+IHtcbiAgICAgICAgZGVzdHJveVRyZWUobG9va3VwW2tleV0pO1xuICAgICAgICBsb29rdXBba2V5XS5yZW1vdmUoKTtcbiAgICAgIH0pO1xuICAgICAgZGVsZXRlIGxvb2t1cFtrZXldO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1vdmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgW2tleUluU3BvdCwga2V5Rm9yU3BvdF0gPSBtb3Zlc1tpXTtcbiAgICAgIGxldCBlbEluU3BvdCA9IGxvb2t1cFtrZXlJblNwb3RdO1xuICAgICAgbGV0IGVsRm9yU3BvdCA9IGxvb2t1cFtrZXlGb3JTcG90XTtcbiAgICAgIGxldCBtYXJrZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgbXV0YXRlRG9tKCgpID0+IHtcbiAgICAgICAgaWYgKCFlbEZvclNwb3QpXG4gICAgICAgICAgd2FybihgeC1mb3IgXCI6a2V5XCIgaXMgdW5kZWZpbmVkIG9yIGludmFsaWRgLCB0ZW1wbGF0ZUVsLCBrZXlGb3JTcG90LCBsb29rdXApO1xuICAgICAgICBlbEZvclNwb3QuYWZ0ZXIobWFya2VyKTtcbiAgICAgICAgZWxJblNwb3QuYWZ0ZXIoZWxGb3JTcG90KTtcbiAgICAgICAgZWxGb3JTcG90Ll94X2N1cnJlbnRJZkVsICYmIGVsRm9yU3BvdC5hZnRlcihlbEZvclNwb3QuX3hfY3VycmVudElmRWwpO1xuICAgICAgICBtYXJrZXIuYmVmb3JlKGVsSW5TcG90KTtcbiAgICAgICAgZWxJblNwb3QuX3hfY3VycmVudElmRWwgJiYgZWxJblNwb3QuYWZ0ZXIoZWxJblNwb3QuX3hfY3VycmVudElmRWwpO1xuICAgICAgICBtYXJrZXIucmVtb3ZlKCk7XG4gICAgICB9KTtcbiAgICAgIGVsRm9yU3BvdC5feF9yZWZyZXNoWEZvclNjb3BlKHNjb3Blc1trZXlzLmluZGV4T2Yoa2V5Rm9yU3BvdCldKTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhZGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgW2xhc3RLZXkyLCBpbmRleF0gPSBhZGRzW2ldO1xuICAgICAgbGV0IGxhc3RFbCA9IGxhc3RLZXkyID09PSBcInRlbXBsYXRlXCIgPyB0ZW1wbGF0ZUVsIDogbG9va3VwW2xhc3RLZXkyXTtcbiAgICAgIGlmIChsYXN0RWwuX3hfY3VycmVudElmRWwpXG4gICAgICAgIGxhc3RFbCA9IGxhc3RFbC5feF9jdXJyZW50SWZFbDtcbiAgICAgIGxldCBzY29wZTIgPSBzY29wZXNbaW5kZXhdO1xuICAgICAgbGV0IGtleSA9IGtleXNbaW5kZXhdO1xuICAgICAgbGV0IGNsb25lMiA9IGRvY3VtZW50LmltcG9ydE5vZGUodGVtcGxhdGVFbC5jb250ZW50LCB0cnVlKS5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgIGxldCByZWFjdGl2ZVNjb3BlID0gcmVhY3RpdmUoc2NvcGUyKTtcbiAgICAgIGFkZFNjb3BlVG9Ob2RlKGNsb25lMiwgcmVhY3RpdmVTY29wZSwgdGVtcGxhdGVFbCk7XG4gICAgICBjbG9uZTIuX3hfcmVmcmVzaFhGb3JTY29wZSA9IChuZXdTY29wZSkgPT4ge1xuICAgICAgICBPYmplY3QuZW50cmllcyhuZXdTY29wZSkuZm9yRWFjaCgoW2tleTIsIHZhbHVlXSkgPT4ge1xuICAgICAgICAgIHJlYWN0aXZlU2NvcGVba2V5Ml0gPSB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgbXV0YXRlRG9tKCgpID0+IHtcbiAgICAgICAgbGFzdEVsLmFmdGVyKGNsb25lMik7XG4gICAgICAgIHNraXBEdXJpbmdDbG9uZSgoKSA9PiBpbml0VHJlZShjbG9uZTIpKSgpO1xuICAgICAgfSk7XG4gICAgICBpZiAodHlwZW9mIGtleSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICB3YXJuKFwieC1mb3Iga2V5IGNhbm5vdCBiZSBhbiBvYmplY3QsIGl0IG11c3QgYmUgYSBzdHJpbmcgb3IgYW4gaW50ZWdlclwiLCB0ZW1wbGF0ZUVsKTtcbiAgICAgIH1cbiAgICAgIGxvb2t1cFtrZXldID0gY2xvbmUyO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNhbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsb29rdXBbc2FtZXNbaV1dLl94X3JlZnJlc2hYRm9yU2NvcGUoc2NvcGVzW2tleXMuaW5kZXhPZihzYW1lc1tpXSldKTtcbiAgICB9XG4gICAgdGVtcGxhdGVFbC5feF9wcmV2S2V5cyA9IGtleXM7XG4gIH0pO1xufVxuZnVuY3Rpb24gcGFyc2VGb3JFeHByZXNzaW9uKGV4cHJlc3Npb24pIHtcbiAgbGV0IGZvckl0ZXJhdG9yUkUgPSAvLChbXixcXH1cXF1dKikoPzosKFteLFxcfVxcXV0qKSk/JC87XG4gIGxldCBzdHJpcFBhcmVuc1JFID0gL15cXHMqXFwofFxcKVxccyokL2c7XG4gIGxldCBmb3JBbGlhc1JFID0gLyhbXFxzXFxTXSo/KVxccysoPzppbnxvZilcXHMrKFtcXHNcXFNdKikvO1xuICBsZXQgaW5NYXRjaCA9IGV4cHJlc3Npb24ubWF0Y2goZm9yQWxpYXNSRSk7XG4gIGlmICghaW5NYXRjaClcbiAgICByZXR1cm47XG4gIGxldCByZXMgPSB7fTtcbiAgcmVzLml0ZW1zID0gaW5NYXRjaFsyXS50cmltKCk7XG4gIGxldCBpdGVtID0gaW5NYXRjaFsxXS5yZXBsYWNlKHN0cmlwUGFyZW5zUkUsIFwiXCIpLnRyaW0oKTtcbiAgbGV0IGl0ZXJhdG9yTWF0Y2ggPSBpdGVtLm1hdGNoKGZvckl0ZXJhdG9yUkUpO1xuICBpZiAoaXRlcmF0b3JNYXRjaCkge1xuICAgIHJlcy5pdGVtID0gaXRlbS5yZXBsYWNlKGZvckl0ZXJhdG9yUkUsIFwiXCIpLnRyaW0oKTtcbiAgICByZXMuaW5kZXggPSBpdGVyYXRvck1hdGNoWzFdLnRyaW0oKTtcbiAgICBpZiAoaXRlcmF0b3JNYXRjaFsyXSkge1xuICAgICAgcmVzLmNvbGxlY3Rpb24gPSBpdGVyYXRvck1hdGNoWzJdLnRyaW0oKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmVzLml0ZW0gPSBpdGVtO1xuICB9XG4gIHJldHVybiByZXM7XG59XG5mdW5jdGlvbiBnZXRJdGVyYXRpb25TY29wZVZhcmlhYmxlcyhpdGVyYXRvck5hbWVzLCBpdGVtLCBpbmRleCwgaXRlbXMpIHtcbiAgbGV0IHNjb3BlVmFyaWFibGVzID0ge307XG4gIGlmICgvXlxcWy4qXFxdJC8udGVzdChpdGVyYXRvck5hbWVzLml0ZW0pICYmIEFycmF5LmlzQXJyYXkoaXRlbSkpIHtcbiAgICBsZXQgbmFtZXMgPSBpdGVyYXRvck5hbWVzLml0ZW0ucmVwbGFjZShcIltcIiwgXCJcIikucmVwbGFjZShcIl1cIiwgXCJcIikuc3BsaXQoXCIsXCIpLm1hcCgoaSkgPT4gaS50cmltKCkpO1xuICAgIG5hbWVzLmZvckVhY2goKG5hbWUsIGkpID0+IHtcbiAgICAgIHNjb3BlVmFyaWFibGVzW25hbWVdID0gaXRlbVtpXTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmICgvXlxcey4qXFx9JC8udGVzdChpdGVyYXRvck5hbWVzLml0ZW0pICYmICFBcnJheS5pc0FycmF5KGl0ZW0pICYmIHR5cGVvZiBpdGVtID09PSBcIm9iamVjdFwiKSB7XG4gICAgbGV0IG5hbWVzID0gaXRlcmF0b3JOYW1lcy5pdGVtLnJlcGxhY2UoXCJ7XCIsIFwiXCIpLnJlcGxhY2UoXCJ9XCIsIFwiXCIpLnNwbGl0KFwiLFwiKS5tYXAoKGkpID0+IGkudHJpbSgpKTtcbiAgICBuYW1lcy5mb3JFYWNoKChuYW1lKSA9PiB7XG4gICAgICBzY29wZVZhcmlhYmxlc1tuYW1lXSA9IGl0ZW1bbmFtZV07XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgc2NvcGVWYXJpYWJsZXNbaXRlcmF0b3JOYW1lcy5pdGVtXSA9IGl0ZW07XG4gIH1cbiAgaWYgKGl0ZXJhdG9yTmFtZXMuaW5kZXgpXG4gICAgc2NvcGVWYXJpYWJsZXNbaXRlcmF0b3JOYW1lcy5pbmRleF0gPSBpbmRleDtcbiAgaWYgKGl0ZXJhdG9yTmFtZXMuY29sbGVjdGlvbilcbiAgICBzY29wZVZhcmlhYmxlc1tpdGVyYXRvck5hbWVzLmNvbGxlY3Rpb25dID0gaXRlbXM7XG4gIHJldHVybiBzY29wZVZhcmlhYmxlcztcbn1cbmZ1bmN0aW9uIGlzTnVtZXJpYzMoc3ViamVjdCkge1xuICByZXR1cm4gIUFycmF5LmlzQXJyYXkoc3ViamVjdCkgJiYgIWlzTmFOKHN1YmplY3QpO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvZGlyZWN0aXZlcy94LXJlZi5qc1xuZnVuY3Rpb24gaGFuZGxlcjMoKSB7XG59XG5oYW5kbGVyMy5pbmxpbmUgPSAoZWwsIHsgZXhwcmVzc2lvbiB9LCB7IGNsZWFudXA6IGNsZWFudXAyIH0pID0+IHtcbiAgbGV0IHJvb3QgPSBjbG9zZXN0Um9vdChlbCk7XG4gIGlmICghcm9vdC5feF9yZWZzKVxuICAgIHJvb3QuX3hfcmVmcyA9IHt9O1xuICByb290Ll94X3JlZnNbZXhwcmVzc2lvbl0gPSBlbDtcbiAgY2xlYW51cDIoKCkgPT4gZGVsZXRlIHJvb3QuX3hfcmVmc1tleHByZXNzaW9uXSk7XG59O1xuZGlyZWN0aXZlKFwicmVmXCIsIGhhbmRsZXIzKTtcblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2RpcmVjdGl2ZXMveC1pZi5qc1xuZGlyZWN0aXZlKFwiaWZcIiwgKGVsLCB7IGV4cHJlc3Npb24gfSwgeyBlZmZlY3Q6IGVmZmVjdDMsIGNsZWFudXA6IGNsZWFudXAyIH0pID0+IHtcbiAgaWYgKGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSAhPT0gXCJ0ZW1wbGF0ZVwiKVxuICAgIHdhcm4oXCJ4LWlmIGNhbiBvbmx5IGJlIHVzZWQgb24gYSA8dGVtcGxhdGU+IHRhZ1wiLCBlbCk7XG4gIGxldCBldmFsdWF0ZTIgPSBldmFsdWF0ZUxhdGVyKGVsLCBleHByZXNzaW9uKTtcbiAgbGV0IHNob3cgPSAoKSA9PiB7XG4gICAgaWYgKGVsLl94X2N1cnJlbnRJZkVsKVxuICAgICAgcmV0dXJuIGVsLl94X2N1cnJlbnRJZkVsO1xuICAgIGxldCBjbG9uZTIgPSBlbC5jb250ZW50LmNsb25lTm9kZSh0cnVlKS5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICBhZGRTY29wZVRvTm9kZShjbG9uZTIsIHt9LCBlbCk7XG4gICAgbXV0YXRlRG9tKCgpID0+IHtcbiAgICAgIGVsLmFmdGVyKGNsb25lMik7XG4gICAgICBza2lwRHVyaW5nQ2xvbmUoKCkgPT4gaW5pdFRyZWUoY2xvbmUyKSkoKTtcbiAgICB9KTtcbiAgICBlbC5feF9jdXJyZW50SWZFbCA9IGNsb25lMjtcbiAgICBlbC5feF91bmRvSWYgPSAoKSA9PiB7XG4gICAgICBtdXRhdGVEb20oKCkgPT4ge1xuICAgICAgICBkZXN0cm95VHJlZShjbG9uZTIpO1xuICAgICAgICBjbG9uZTIucmVtb3ZlKCk7XG4gICAgICB9KTtcbiAgICAgIGRlbGV0ZSBlbC5feF9jdXJyZW50SWZFbDtcbiAgICB9O1xuICAgIHJldHVybiBjbG9uZTI7XG4gIH07XG4gIGxldCBoaWRlID0gKCkgPT4ge1xuICAgIGlmICghZWwuX3hfdW5kb0lmKVxuICAgICAgcmV0dXJuO1xuICAgIGVsLl94X3VuZG9JZigpO1xuICAgIGRlbGV0ZSBlbC5feF91bmRvSWY7XG4gIH07XG4gIGVmZmVjdDMoKCkgPT4gZXZhbHVhdGUyKCh2YWx1ZSkgPT4ge1xuICAgIHZhbHVlID8gc2hvdygpIDogaGlkZSgpO1xuICB9KSk7XG4gIGNsZWFudXAyKCgpID0+IGVsLl94X3VuZG9JZiAmJiBlbC5feF91bmRvSWYoKSk7XG59KTtcblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2RpcmVjdGl2ZXMveC1pZC5qc1xuZGlyZWN0aXZlKFwiaWRcIiwgKGVsLCB7IGV4cHJlc3Npb24gfSwgeyBldmFsdWF0ZTogZXZhbHVhdGUyIH0pID0+IHtcbiAgbGV0IG5hbWVzID0gZXZhbHVhdGUyKGV4cHJlc3Npb24pO1xuICBuYW1lcy5mb3JFYWNoKChuYW1lKSA9PiBzZXRJZFJvb3QoZWwsIG5hbWUpKTtcbn0pO1xuaW50ZXJjZXB0Q2xvbmUoKGZyb20sIHRvKSA9PiB7XG4gIGlmIChmcm9tLl94X2lkcykge1xuICAgIHRvLl94X2lkcyA9IGZyb20uX3hfaWRzO1xuICB9XG59KTtcblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2RpcmVjdGl2ZXMveC1vbi5qc1xubWFwQXR0cmlidXRlcyhzdGFydGluZ1dpdGgoXCJAXCIsIGludG8ocHJlZml4KFwib246XCIpKSkpO1xuZGlyZWN0aXZlKFwib25cIiwgc2tpcER1cmluZ0Nsb25lKChlbCwgeyB2YWx1ZSwgbW9kaWZpZXJzLCBleHByZXNzaW9uIH0sIHsgY2xlYW51cDogY2xlYW51cDIgfSkgPT4ge1xuICBsZXQgZXZhbHVhdGUyID0gZXhwcmVzc2lvbiA/IGV2YWx1YXRlTGF0ZXIoZWwsIGV4cHJlc3Npb24pIDogKCkgPT4ge1xuICB9O1xuICBpZiAoZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcInRlbXBsYXRlXCIpIHtcbiAgICBpZiAoIWVsLl94X2ZvcndhcmRFdmVudHMpXG4gICAgICBlbC5feF9mb3J3YXJkRXZlbnRzID0gW107XG4gICAgaWYgKCFlbC5feF9mb3J3YXJkRXZlbnRzLmluY2x1ZGVzKHZhbHVlKSlcbiAgICAgIGVsLl94X2ZvcndhcmRFdmVudHMucHVzaCh2YWx1ZSk7XG4gIH1cbiAgbGV0IHJlbW92ZUxpc3RlbmVyID0gb24oZWwsIHZhbHVlLCBtb2RpZmllcnMsIChlKSA9PiB7XG4gICAgZXZhbHVhdGUyKCgpID0+IHtcbiAgICB9LCB7IHNjb3BlOiB7IFwiJGV2ZW50XCI6IGUgfSwgcGFyYW1zOiBbZV0gfSk7XG4gIH0pO1xuICBjbGVhbnVwMigoKSA9PiByZW1vdmVMaXN0ZW5lcigpKTtcbn0pKTtcblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2RpcmVjdGl2ZXMvaW5kZXguanNcbndhcm5NaXNzaW5nUGx1Z2luRGlyZWN0aXZlKFwiQ29sbGFwc2VcIiwgXCJjb2xsYXBzZVwiLCBcImNvbGxhcHNlXCIpO1xud2Fybk1pc3NpbmdQbHVnaW5EaXJlY3RpdmUoXCJJbnRlcnNlY3RcIiwgXCJpbnRlcnNlY3RcIiwgXCJpbnRlcnNlY3RcIik7XG53YXJuTWlzc2luZ1BsdWdpbkRpcmVjdGl2ZShcIkZvY3VzXCIsIFwidHJhcFwiLCBcImZvY3VzXCIpO1xud2Fybk1pc3NpbmdQbHVnaW5EaXJlY3RpdmUoXCJNYXNrXCIsIFwibWFza1wiLCBcIm1hc2tcIik7XG5mdW5jdGlvbiB3YXJuTWlzc2luZ1BsdWdpbkRpcmVjdGl2ZShuYW1lLCBkaXJlY3RpdmVOYW1lLCBzbHVnKSB7XG4gIGRpcmVjdGl2ZShkaXJlY3RpdmVOYW1lLCAoZWwpID0+IHdhcm4oYFlvdSBjYW4ndCB1c2UgW3gtJHtkaXJlY3RpdmVOYW1lfV0gd2l0aG91dCBmaXJzdCBpbnN0YWxsaW5nIHRoZSBcIiR7bmFtZX1cIiBwbHVnaW4gaGVyZTogaHR0cHM6Ly9hbHBpbmVqcy5kZXYvcGx1Z2lucy8ke3NsdWd9YCwgZWwpKTtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2luZGV4LmpzXG5hbHBpbmVfZGVmYXVsdC5zZXRFdmFsdWF0b3Iobm9ybWFsRXZhbHVhdG9yKTtcbmFscGluZV9kZWZhdWx0LnNldFJlYWN0aXZpdHlFbmdpbmUoeyByZWFjdGl2ZTogcmVhY3RpdmUyLCBlZmZlY3Q6IGVmZmVjdDIsIHJlbGVhc2U6IHN0b3AsIHJhdzogdG9SYXcgfSk7XG52YXIgc3JjX2RlZmF1bHQgPSBhbHBpbmVfZGVmYXVsdDtcblxuLy8gcGFja2FnZXMvYWxwaW5lanMvYnVpbGRzL21vZHVsZS5qc1xudmFyIG1vZHVsZV9kZWZhdWx0ID0gc3JjX2RlZmF1bHQ7XG5leHBvcnQge1xuICBzcmNfZGVmYXVsdCBhcyBBbHBpbmUsXG4gIG1vZHVsZV9kZWZhdWx0IGFzIGRlZmF1bHRcbn07XG4iLCAidmFyIGFkYXB0ZXJzID0ge1xuICBsb2dnZXI6IHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiID8gY29uc29sZSA6IHVuZGVmaW5lZCxcbiAgV2ViU29ja2V0OiB0eXBlb2YgV2ViU29ja2V0ICE9PSBcInVuZGVmaW5lZFwiID8gV2ViU29ja2V0IDogdW5kZWZpbmVkXG59O1xuXG52YXIgbG9nZ2VyID0ge1xuICBsb2coLi4ubWVzc2FnZXMpIHtcbiAgICBpZiAodGhpcy5lbmFibGVkKSB7XG4gICAgICBtZXNzYWdlcy5wdXNoKERhdGUubm93KCkpO1xuICAgICAgYWRhcHRlcnMubG9nZ2VyLmxvZyhcIltBY3Rpb25DYWJsZV1cIiwgLi4ubWVzc2FnZXMpO1xuICAgIH1cbiAgfVxufTtcblxuY29uc3Qgbm93ID0gKCkgPT4gKG5ldyBEYXRlKS5nZXRUaW1lKCk7XG5cbmNvbnN0IHNlY29uZHNTaW5jZSA9IHRpbWUgPT4gKG5vdygpIC0gdGltZSkgLyAxZTM7XG5cbmNsYXNzIENvbm5lY3Rpb25Nb25pdG9yIHtcbiAgY29uc3RydWN0b3IoY29ubmVjdGlvbikge1xuICAgIHRoaXMudmlzaWJpbGl0eURpZENoYW5nZSA9IHRoaXMudmlzaWJpbGl0eURpZENoYW5nZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY29ubmVjdGlvbiA9IGNvbm5lY3Rpb247XG4gICAgdGhpcy5yZWNvbm5lY3RBdHRlbXB0cyA9IDA7XG4gIH1cbiAgc3RhcnQoKSB7XG4gICAgaWYgKCF0aGlzLmlzUnVubmluZygpKSB7XG4gICAgICB0aGlzLnN0YXJ0ZWRBdCA9IG5vdygpO1xuICAgICAgZGVsZXRlIHRoaXMuc3RvcHBlZEF0O1xuICAgICAgdGhpcy5zdGFydFBvbGxpbmcoKTtcbiAgICAgIGFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMudmlzaWJpbGl0eURpZENoYW5nZSk7XG4gICAgICBsb2dnZXIubG9nKGBDb25uZWN0aW9uTW9uaXRvciBzdGFydGVkLiBzdGFsZSB0aHJlc2hvbGQgPSAke3RoaXMuY29uc3RydWN0b3Iuc3RhbGVUaHJlc2hvbGR9IHNgKTtcbiAgICB9XG4gIH1cbiAgc3RvcCgpIHtcbiAgICBpZiAodGhpcy5pc1J1bm5pbmcoKSkge1xuICAgICAgdGhpcy5zdG9wcGVkQXQgPSBub3coKTtcbiAgICAgIHRoaXMuc3RvcFBvbGxpbmcoKTtcbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMudmlzaWJpbGl0eURpZENoYW5nZSk7XG4gICAgICBsb2dnZXIubG9nKFwiQ29ubmVjdGlvbk1vbml0b3Igc3RvcHBlZFwiKTtcbiAgICB9XG4gIH1cbiAgaXNSdW5uaW5nKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXJ0ZWRBdCAmJiAhdGhpcy5zdG9wcGVkQXQ7XG4gIH1cbiAgcmVjb3JkTWVzc2FnZSgpIHtcbiAgICB0aGlzLnBpbmdlZEF0ID0gbm93KCk7XG4gIH1cbiAgcmVjb3JkQ29ubmVjdCgpIHtcbiAgICB0aGlzLnJlY29ubmVjdEF0dGVtcHRzID0gMDtcbiAgICBkZWxldGUgdGhpcy5kaXNjb25uZWN0ZWRBdDtcbiAgICBsb2dnZXIubG9nKFwiQ29ubmVjdGlvbk1vbml0b3IgcmVjb3JkZWQgY29ubmVjdFwiKTtcbiAgfVxuICByZWNvcmREaXNjb25uZWN0KCkge1xuICAgIHRoaXMuZGlzY29ubmVjdGVkQXQgPSBub3coKTtcbiAgICBsb2dnZXIubG9nKFwiQ29ubmVjdGlvbk1vbml0b3IgcmVjb3JkZWQgZGlzY29ubmVjdFwiKTtcbiAgfVxuICBzdGFydFBvbGxpbmcoKSB7XG4gICAgdGhpcy5zdG9wUG9sbGluZygpO1xuICAgIHRoaXMucG9sbCgpO1xuICB9XG4gIHN0b3BQb2xsaW5nKCkge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLnBvbGxUaW1lb3V0KTtcbiAgfVxuICBwb2xsKCkge1xuICAgIHRoaXMucG9sbFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICB0aGlzLnJlY29ubmVjdElmU3RhbGUoKTtcbiAgICAgIHRoaXMucG9sbCgpO1xuICAgIH0pLCB0aGlzLmdldFBvbGxJbnRlcnZhbCgpKTtcbiAgfVxuICBnZXRQb2xsSW50ZXJ2YWwoKSB7XG4gICAgY29uc3Qge3N0YWxlVGhyZXNob2xkOiBzdGFsZVRocmVzaG9sZCwgcmVjb25uZWN0aW9uQmFja29mZlJhdGU6IHJlY29ubmVjdGlvbkJhY2tvZmZSYXRlfSA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgY29uc3QgYmFja29mZiA9IE1hdGgucG93KDEgKyByZWNvbm5lY3Rpb25CYWNrb2ZmUmF0ZSwgTWF0aC5taW4odGhpcy5yZWNvbm5lY3RBdHRlbXB0cywgMTApKTtcbiAgICBjb25zdCBqaXR0ZXJNYXggPSB0aGlzLnJlY29ubmVjdEF0dGVtcHRzID09PSAwID8gMSA6IHJlY29ubmVjdGlvbkJhY2tvZmZSYXRlO1xuICAgIGNvbnN0IGppdHRlciA9IGppdHRlck1heCAqIE1hdGgucmFuZG9tKCk7XG4gICAgcmV0dXJuIHN0YWxlVGhyZXNob2xkICogMWUzICogYmFja29mZiAqICgxICsgaml0dGVyKTtcbiAgfVxuICByZWNvbm5lY3RJZlN0YWxlKCkge1xuICAgIGlmICh0aGlzLmNvbm5lY3Rpb25Jc1N0YWxlKCkpIHtcbiAgICAgIGxvZ2dlci5sb2coYENvbm5lY3Rpb25Nb25pdG9yIGRldGVjdGVkIHN0YWxlIGNvbm5lY3Rpb24uIHJlY29ubmVjdEF0dGVtcHRzID0gJHt0aGlzLnJlY29ubmVjdEF0dGVtcHRzfSwgdGltZSBzdGFsZSA9ICR7c2Vjb25kc1NpbmNlKHRoaXMucmVmcmVzaGVkQXQpfSBzLCBzdGFsZSB0aHJlc2hvbGQgPSAke3RoaXMuY29uc3RydWN0b3Iuc3RhbGVUaHJlc2hvbGR9IHNgKTtcbiAgICAgIHRoaXMucmVjb25uZWN0QXR0ZW1wdHMrKztcbiAgICAgIGlmICh0aGlzLmRpc2Nvbm5lY3RlZFJlY2VudGx5KCkpIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhgQ29ubmVjdGlvbk1vbml0b3Igc2tpcHBpbmcgcmVvcGVuaW5nIHJlY2VudCBkaXNjb25uZWN0LiB0aW1lIGRpc2Nvbm5lY3RlZCA9ICR7c2Vjb25kc1NpbmNlKHRoaXMuZGlzY29ubmVjdGVkQXQpfSBzYCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2dnZXIubG9nKFwiQ29ubmVjdGlvbk1vbml0b3IgcmVvcGVuaW5nXCIpO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24ucmVvcGVuKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGdldCByZWZyZXNoZWRBdCgpIHtcbiAgICByZXR1cm4gdGhpcy5waW5nZWRBdCA/IHRoaXMucGluZ2VkQXQgOiB0aGlzLnN0YXJ0ZWRBdDtcbiAgfVxuICBjb25uZWN0aW9uSXNTdGFsZSgpIHtcbiAgICByZXR1cm4gc2Vjb25kc1NpbmNlKHRoaXMucmVmcmVzaGVkQXQpID4gdGhpcy5jb25zdHJ1Y3Rvci5zdGFsZVRocmVzaG9sZDtcbiAgfVxuICBkaXNjb25uZWN0ZWRSZWNlbnRseSgpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNjb25uZWN0ZWRBdCAmJiBzZWNvbmRzU2luY2UodGhpcy5kaXNjb25uZWN0ZWRBdCkgPCB0aGlzLmNvbnN0cnVjdG9yLnN0YWxlVGhyZXNob2xkO1xuICB9XG4gIHZpc2liaWxpdHlEaWRDaGFuZ2UoKSB7XG4gICAgaWYgKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gXCJ2aXNpYmxlXCIpIHtcbiAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGlvbklzU3RhbGUoKSB8fCAhdGhpcy5jb25uZWN0aW9uLmlzT3BlbigpKSB7XG4gICAgICAgICAgbG9nZ2VyLmxvZyhgQ29ubmVjdGlvbk1vbml0b3IgcmVvcGVuaW5nIHN0YWxlIGNvbm5lY3Rpb24gb24gdmlzaWJpbGl0eWNoYW5nZS4gdmlzaWJpbGl0eVN0YXRlID0gJHtkb2N1bWVudC52aXNpYmlsaXR5U3RhdGV9YCk7XG4gICAgICAgICAgdGhpcy5jb25uZWN0aW9uLnJlb3BlbigpO1xuICAgICAgICB9XG4gICAgICB9KSwgMjAwKTtcbiAgICB9XG4gIH1cbn1cblxuQ29ubmVjdGlvbk1vbml0b3Iuc3RhbGVUaHJlc2hvbGQgPSA2O1xuXG5Db25uZWN0aW9uTW9uaXRvci5yZWNvbm5lY3Rpb25CYWNrb2ZmUmF0ZSA9IC4xNTtcblxudmFyIElOVEVSTkFMID0ge1xuICBtZXNzYWdlX3R5cGVzOiB7XG4gICAgd2VsY29tZTogXCJ3ZWxjb21lXCIsXG4gICAgZGlzY29ubmVjdDogXCJkaXNjb25uZWN0XCIsXG4gICAgcGluZzogXCJwaW5nXCIsXG4gICAgY29uZmlybWF0aW9uOiBcImNvbmZpcm1fc3Vic2NyaXB0aW9uXCIsXG4gICAgcmVqZWN0aW9uOiBcInJlamVjdF9zdWJzY3JpcHRpb25cIlxuICB9LFxuICBkaXNjb25uZWN0X3JlYXNvbnM6IHtcbiAgICB1bmF1dGhvcml6ZWQ6IFwidW5hdXRob3JpemVkXCIsXG4gICAgaW52YWxpZF9yZXF1ZXN0OiBcImludmFsaWRfcmVxdWVzdFwiLFxuICAgIHNlcnZlcl9yZXN0YXJ0OiBcInNlcnZlcl9yZXN0YXJ0XCIsXG4gICAgcmVtb3RlOiBcInJlbW90ZVwiXG4gIH0sXG4gIGRlZmF1bHRfbW91bnRfcGF0aDogXCIvY2FibGVcIixcbiAgcHJvdG9jb2xzOiBbIFwiYWN0aW9uY2FibGUtdjEtanNvblwiLCBcImFjdGlvbmNhYmxlLXVuc3VwcG9ydGVkXCIgXVxufTtcblxuY29uc3Qge21lc3NhZ2VfdHlwZXM6IG1lc3NhZ2VfdHlwZXMsIHByb3RvY29sczogcHJvdG9jb2xzfSA9IElOVEVSTkFMO1xuXG5jb25zdCBzdXBwb3J0ZWRQcm90b2NvbHMgPSBwcm90b2NvbHMuc2xpY2UoMCwgcHJvdG9jb2xzLmxlbmd0aCAtIDEpO1xuXG5jb25zdCBpbmRleE9mID0gW10uaW5kZXhPZjtcblxuY2xhc3MgQ29ubmVjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKGNvbnN1bWVyKSB7XG4gICAgdGhpcy5vcGVuID0gdGhpcy5vcGVuLmJpbmQodGhpcyk7XG4gICAgdGhpcy5jb25zdW1lciA9IGNvbnN1bWVyO1xuICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IHRoaXMuY29uc3VtZXIuc3Vic2NyaXB0aW9ucztcbiAgICB0aGlzLm1vbml0b3IgPSBuZXcgQ29ubmVjdGlvbk1vbml0b3IodGhpcyk7XG4gICAgdGhpcy5kaXNjb25uZWN0ZWQgPSB0cnVlO1xuICB9XG4gIHNlbmQoZGF0YSkge1xuICAgIGlmICh0aGlzLmlzT3BlbigpKSB7XG4gICAgICB0aGlzLndlYlNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIG9wZW4oKSB7XG4gICAgaWYgKHRoaXMuaXNBY3RpdmUoKSkge1xuICAgICAgbG9nZ2VyLmxvZyhgQXR0ZW1wdGVkIHRvIG9wZW4gV2ViU29ja2V0LCBidXQgZXhpc3Rpbmcgc29ja2V0IGlzICR7dGhpcy5nZXRTdGF0ZSgpfWApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBzb2NrZXRQcm90b2NvbHMgPSBbIC4uLnByb3RvY29scywgLi4udGhpcy5jb25zdW1lci5zdWJwcm90b2NvbHMgfHwgW10gXTtcbiAgICAgIGxvZ2dlci5sb2coYE9wZW5pbmcgV2ViU29ja2V0LCBjdXJyZW50IHN0YXRlIGlzICR7dGhpcy5nZXRTdGF0ZSgpfSwgc3VicHJvdG9jb2xzOiAke3NvY2tldFByb3RvY29sc31gKTtcbiAgICAgIGlmICh0aGlzLndlYlNvY2tldCkge1xuICAgICAgICB0aGlzLnVuaW5zdGFsbEV2ZW50SGFuZGxlcnMoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMud2ViU29ja2V0ID0gbmV3IGFkYXB0ZXJzLldlYlNvY2tldCh0aGlzLmNvbnN1bWVyLnVybCwgc29ja2V0UHJvdG9jb2xzKTtcbiAgICAgIHRoaXMuaW5zdGFsbEV2ZW50SGFuZGxlcnMoKTtcbiAgICAgIHRoaXMubW9uaXRvci5zdGFydCgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIGNsb3NlKHthbGxvd1JlY29ubmVjdDogYWxsb3dSZWNvbm5lY3R9ID0ge1xuICAgIGFsbG93UmVjb25uZWN0OiB0cnVlXG4gIH0pIHtcbiAgICBpZiAoIWFsbG93UmVjb25uZWN0KSB7XG4gICAgICB0aGlzLm1vbml0b3Iuc3RvcCgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5pc09wZW4oKSkge1xuICAgICAgcmV0dXJuIHRoaXMud2ViU29ja2V0LmNsb3NlKCk7XG4gICAgfVxuICB9XG4gIHJlb3BlbigpIHtcbiAgICBsb2dnZXIubG9nKGBSZW9wZW5pbmcgV2ViU29ja2V0LCBjdXJyZW50IHN0YXRlIGlzICR7dGhpcy5nZXRTdGF0ZSgpfWApO1xuICAgIGlmICh0aGlzLmlzQWN0aXZlKCkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNsb3NlKCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIubG9nKFwiRmFpbGVkIHRvIHJlb3BlbiBXZWJTb2NrZXRcIiwgZXJyb3IpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgbG9nZ2VyLmxvZyhgUmVvcGVuaW5nIFdlYlNvY2tldCBpbiAke3RoaXMuY29uc3RydWN0b3IucmVvcGVuRGVsYXl9bXNgKTtcbiAgICAgICAgc2V0VGltZW91dCh0aGlzLm9wZW4sIHRoaXMuY29uc3RydWN0b3IucmVvcGVuRGVsYXkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5vcGVuKCk7XG4gICAgfVxuICB9XG4gIGdldFByb3RvY29sKCkge1xuICAgIGlmICh0aGlzLndlYlNvY2tldCkge1xuICAgICAgcmV0dXJuIHRoaXMud2ViU29ja2V0LnByb3RvY29sO1xuICAgIH1cbiAgfVxuICBpc09wZW4oKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNTdGF0ZShcIm9wZW5cIik7XG4gIH1cbiAgaXNBY3RpdmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNTdGF0ZShcIm9wZW5cIiwgXCJjb25uZWN0aW5nXCIpO1xuICB9XG4gIHRyaWVkVG9SZWNvbm5lY3QoKSB7XG4gICAgcmV0dXJuIHRoaXMubW9uaXRvci5yZWNvbm5lY3RBdHRlbXB0cyA+IDA7XG4gIH1cbiAgaXNQcm90b2NvbFN1cHBvcnRlZCgpIHtcbiAgICByZXR1cm4gaW5kZXhPZi5jYWxsKHN1cHBvcnRlZFByb3RvY29scywgdGhpcy5nZXRQcm90b2NvbCgpKSA+PSAwO1xuICB9XG4gIGlzU3RhdGUoLi4uc3RhdGVzKSB7XG4gICAgcmV0dXJuIGluZGV4T2YuY2FsbChzdGF0ZXMsIHRoaXMuZ2V0U3RhdGUoKSkgPj0gMDtcbiAgfVxuICBnZXRTdGF0ZSgpIHtcbiAgICBpZiAodGhpcy53ZWJTb2NrZXQpIHtcbiAgICAgIGZvciAobGV0IHN0YXRlIGluIGFkYXB0ZXJzLldlYlNvY2tldCkge1xuICAgICAgICBpZiAoYWRhcHRlcnMuV2ViU29ja2V0W3N0YXRlXSA9PT0gdGhpcy53ZWJTb2NrZXQucmVhZHlTdGF0ZSkge1xuICAgICAgICAgIHJldHVybiBzdGF0ZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGluc3RhbGxFdmVudEhhbmRsZXJzKCkge1xuICAgIGZvciAobGV0IGV2ZW50TmFtZSBpbiB0aGlzLmV2ZW50cykge1xuICAgICAgY29uc3QgaGFuZGxlciA9IHRoaXMuZXZlbnRzW2V2ZW50TmFtZV0uYmluZCh0aGlzKTtcbiAgICAgIHRoaXMud2ViU29ja2V0W2BvbiR7ZXZlbnROYW1lfWBdID0gaGFuZGxlcjtcbiAgICB9XG4gIH1cbiAgdW5pbnN0YWxsRXZlbnRIYW5kbGVycygpIHtcbiAgICBmb3IgKGxldCBldmVudE5hbWUgaW4gdGhpcy5ldmVudHMpIHtcbiAgICAgIHRoaXMud2ViU29ja2V0W2BvbiR7ZXZlbnROYW1lfWBdID0gZnVuY3Rpb24oKSB7fTtcbiAgICB9XG4gIH1cbn1cblxuQ29ubmVjdGlvbi5yZW9wZW5EZWxheSA9IDUwMDtcblxuQ29ubmVjdGlvbi5wcm90b3R5cGUuZXZlbnRzID0ge1xuICBtZXNzYWdlKGV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLmlzUHJvdG9jb2xTdXBwb3J0ZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB7aWRlbnRpZmllcjogaWRlbnRpZmllciwgbWVzc2FnZTogbWVzc2FnZSwgcmVhc29uOiByZWFzb24sIHJlY29ubmVjdDogcmVjb25uZWN0LCB0eXBlOiB0eXBlfSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XG4gICAgdGhpcy5tb25pdG9yLnJlY29yZE1lc3NhZ2UoKTtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgY2FzZSBtZXNzYWdlX3R5cGVzLndlbGNvbWU6XG4gICAgICBpZiAodGhpcy50cmllZFRvUmVjb25uZWN0KCkpIHtcbiAgICAgICAgdGhpcy5yZWNvbm5lY3RBdHRlbXB0ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy5tb25pdG9yLnJlY29yZENvbm5lY3QoKTtcbiAgICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbnMucmVsb2FkKCk7XG5cbiAgICAgY2FzZSBtZXNzYWdlX3R5cGVzLmRpc2Nvbm5lY3Q6XG4gICAgICBsb2dnZXIubG9nKGBEaXNjb25uZWN0aW5nLiBSZWFzb246ICR7cmVhc29ufWApO1xuICAgICAgcmV0dXJuIHRoaXMuY2xvc2Uoe1xuICAgICAgICBhbGxvd1JlY29ubmVjdDogcmVjb25uZWN0XG4gICAgICB9KTtcblxuICAgICBjYXNlIG1lc3NhZ2VfdHlwZXMucGluZzpcbiAgICAgIHJldHVybiBudWxsO1xuXG4gICAgIGNhc2UgbWVzc2FnZV90eXBlcy5jb25maXJtYXRpb246XG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuY29uZmlybVN1YnNjcmlwdGlvbihpZGVudGlmaWVyKTtcbiAgICAgIGlmICh0aGlzLnJlY29ubmVjdEF0dGVtcHRlZCkge1xuICAgICAgICB0aGlzLnJlY29ubmVjdEF0dGVtcHRlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25zLm5vdGlmeShpZGVudGlmaWVyLCBcImNvbm5lY3RlZFwiLCB7XG4gICAgICAgICAgcmVjb25uZWN0ZWQ6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25zLm5vdGlmeShpZGVudGlmaWVyLCBcImNvbm5lY3RlZFwiLCB7XG4gICAgICAgICAgcmVjb25uZWN0ZWQ6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgIGNhc2UgbWVzc2FnZV90eXBlcy5yZWplY3Rpb246XG4gICAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25zLnJlamVjdChpZGVudGlmaWVyKTtcblxuICAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaXB0aW9ucy5ub3RpZnkoaWRlbnRpZmllciwgXCJyZWNlaXZlZFwiLCBtZXNzYWdlKTtcbiAgICB9XG4gIH0sXG4gIG9wZW4oKSB7XG4gICAgbG9nZ2VyLmxvZyhgV2ViU29ja2V0IG9ub3BlbiBldmVudCwgdXNpbmcgJyR7dGhpcy5nZXRQcm90b2NvbCgpfScgc3VicHJvdG9jb2xgKTtcbiAgICB0aGlzLmRpc2Nvbm5lY3RlZCA9IGZhbHNlO1xuICAgIGlmICghdGhpcy5pc1Byb3RvY29sU3VwcG9ydGVkKCkpIHtcbiAgICAgIGxvZ2dlci5sb2coXCJQcm90b2NvbCBpcyB1bnN1cHBvcnRlZC4gU3RvcHBpbmcgbW9uaXRvciBhbmQgZGlzY29ubmVjdGluZy5cIik7XG4gICAgICByZXR1cm4gdGhpcy5jbG9zZSh7XG4gICAgICAgIGFsbG93UmVjb25uZWN0OiBmYWxzZVxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuICBjbG9zZShldmVudCkge1xuICAgIGxvZ2dlci5sb2coXCJXZWJTb2NrZXQgb25jbG9zZSBldmVudFwiKTtcbiAgICBpZiAodGhpcy5kaXNjb25uZWN0ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5kaXNjb25uZWN0ZWQgPSB0cnVlO1xuICAgIHRoaXMubW9uaXRvci5yZWNvcmREaXNjb25uZWN0KCk7XG4gICAgcmV0dXJuIHRoaXMuc3Vic2NyaXB0aW9ucy5ub3RpZnlBbGwoXCJkaXNjb25uZWN0ZWRcIiwge1xuICAgICAgd2lsbEF0dGVtcHRSZWNvbm5lY3Q6IHRoaXMubW9uaXRvci5pc1J1bm5pbmcoKVxuICAgIH0pO1xuICB9LFxuICBlcnJvcigpIHtcbiAgICBsb2dnZXIubG9nKFwiV2ViU29ja2V0IG9uZXJyb3IgZXZlbnRcIik7XG4gIH1cbn07XG5cbmNvbnN0IGV4dGVuZCA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydGllcykge1xuICBpZiAocHJvcGVydGllcyAhPSBudWxsKSB7XG4gICAgZm9yIChsZXQga2V5IGluIHByb3BlcnRpZXMpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gcHJvcGVydGllc1trZXldO1xuICAgICAgb2JqZWN0W2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9iamVjdDtcbn07XG5cbmNsYXNzIFN1YnNjcmlwdGlvbiB7XG4gIGNvbnN0cnVjdG9yKGNvbnN1bWVyLCBwYXJhbXMgPSB7fSwgbWl4aW4pIHtcbiAgICB0aGlzLmNvbnN1bWVyID0gY29uc3VtZXI7XG4gICAgdGhpcy5pZGVudGlmaWVyID0gSlNPTi5zdHJpbmdpZnkocGFyYW1zKTtcbiAgICBleHRlbmQodGhpcywgbWl4aW4pO1xuICB9XG4gIHBlcmZvcm0oYWN0aW9uLCBkYXRhID0ge30pIHtcbiAgICBkYXRhLmFjdGlvbiA9IGFjdGlvbjtcbiAgICByZXR1cm4gdGhpcy5zZW5kKGRhdGEpO1xuICB9XG4gIHNlbmQoZGF0YSkge1xuICAgIHJldHVybiB0aGlzLmNvbnN1bWVyLnNlbmQoe1xuICAgICAgY29tbWFuZDogXCJtZXNzYWdlXCIsXG4gICAgICBpZGVudGlmaWVyOiB0aGlzLmlkZW50aWZpZXIsXG4gICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgIH0pO1xuICB9XG4gIHVuc3Vic2NyaWJlKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnN1bWVyLnN1YnNjcmlwdGlvbnMucmVtb3ZlKHRoaXMpO1xuICB9XG59XG5cbmNsYXNzIFN1YnNjcmlwdGlvbkd1YXJhbnRvciB7XG4gIGNvbnN0cnVjdG9yKHN1YnNjcmlwdGlvbnMpIHtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBzdWJzY3JpcHRpb25zO1xuICAgIHRoaXMucGVuZGluZ1N1YnNjcmlwdGlvbnMgPSBbXTtcbiAgfVxuICBndWFyYW50ZWUoc3Vic2NyaXB0aW9uKSB7XG4gICAgaWYgKHRoaXMucGVuZGluZ1N1YnNjcmlwdGlvbnMuaW5kZXhPZihzdWJzY3JpcHRpb24pID09IC0xKSB7XG4gICAgICBsb2dnZXIubG9nKGBTdWJzY3JpcHRpb25HdWFyYW50b3IgZ3VhcmFudGVlaW5nICR7c3Vic2NyaXB0aW9uLmlkZW50aWZpZXJ9YCk7XG4gICAgICB0aGlzLnBlbmRpbmdTdWJzY3JpcHRpb25zLnB1c2goc3Vic2NyaXB0aW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nZ2VyLmxvZyhgU3Vic2NyaXB0aW9uR3VhcmFudG9yIGFscmVhZHkgZ3VhcmFudGVlaW5nICR7c3Vic2NyaXB0aW9uLmlkZW50aWZpZXJ9YCk7XG4gICAgfVxuICAgIHRoaXMuc3RhcnRHdWFyYW50ZWVpbmcoKTtcbiAgfVxuICBmb3JnZXQoc3Vic2NyaXB0aW9uKSB7XG4gICAgbG9nZ2VyLmxvZyhgU3Vic2NyaXB0aW9uR3VhcmFudG9yIGZvcmdldHRpbmcgJHtzdWJzY3JpcHRpb24uaWRlbnRpZmllcn1gKTtcbiAgICB0aGlzLnBlbmRpbmdTdWJzY3JpcHRpb25zID0gdGhpcy5wZW5kaW5nU3Vic2NyaXB0aW9ucy5maWx0ZXIoKHMgPT4gcyAhPT0gc3Vic2NyaXB0aW9uKSk7XG4gIH1cbiAgc3RhcnRHdWFyYW50ZWVpbmcoKSB7XG4gICAgdGhpcy5zdG9wR3VhcmFudGVlaW5nKCk7XG4gICAgdGhpcy5yZXRyeVN1YnNjcmliaW5nKCk7XG4gIH1cbiAgc3RvcEd1YXJhbnRlZWluZygpIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5yZXRyeVRpbWVvdXQpO1xuICB9XG4gIHJldHJ5U3Vic2NyaWJpbmcoKSB7XG4gICAgdGhpcy5yZXRyeVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICBpZiAodGhpcy5zdWJzY3JpcHRpb25zICYmIHR5cGVvZiB0aGlzLnN1YnNjcmlwdGlvbnMuc3Vic2NyaWJlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhpcy5wZW5kaW5nU3Vic2NyaXB0aW9ucy5tYXAoKHN1YnNjcmlwdGlvbiA9PiB7XG4gICAgICAgICAgbG9nZ2VyLmxvZyhgU3Vic2NyaXB0aW9uR3VhcmFudG9yIHJlc3Vic2NyaWJpbmcgJHtzdWJzY3JpcHRpb24uaWRlbnRpZmllcn1gKTtcbiAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuc3Vic2NyaWJlKHN1YnNjcmlwdGlvbik7XG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9KSwgNTAwKTtcbiAgfVxufVxuXG5jbGFzcyBTdWJzY3JpcHRpb25zIHtcbiAgY29uc3RydWN0b3IoY29uc3VtZXIpIHtcbiAgICB0aGlzLmNvbnN1bWVyID0gY29uc3VtZXI7XG4gICAgdGhpcy5ndWFyYW50b3IgPSBuZXcgU3Vic2NyaXB0aW9uR3VhcmFudG9yKHRoaXMpO1xuICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtdO1xuICB9XG4gIGNyZWF0ZShjaGFubmVsTmFtZSwgbWl4aW4pIHtcbiAgICBjb25zdCBjaGFubmVsID0gY2hhbm5lbE5hbWU7XG4gICAgY29uc3QgcGFyYW1zID0gdHlwZW9mIGNoYW5uZWwgPT09IFwib2JqZWN0XCIgPyBjaGFubmVsIDoge1xuICAgICAgY2hhbm5lbDogY2hhbm5lbFxuICAgIH07XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbih0aGlzLmNvbnN1bWVyLCBwYXJhbXMsIG1peGluKTtcbiAgICByZXR1cm4gdGhpcy5hZGQoc3Vic2NyaXB0aW9uKTtcbiAgfVxuICBhZGQoc3Vic2NyaXB0aW9uKSB7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goc3Vic2NyaXB0aW9uKTtcbiAgICB0aGlzLmNvbnN1bWVyLmVuc3VyZUFjdGl2ZUNvbm5lY3Rpb24oKTtcbiAgICB0aGlzLm5vdGlmeShzdWJzY3JpcHRpb24sIFwiaW5pdGlhbGl6ZWRcIik7XG4gICAgdGhpcy5zdWJzY3JpYmUoc3Vic2NyaXB0aW9uKTtcbiAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICB9XG4gIHJlbW92ZShzdWJzY3JpcHRpb24pIHtcbiAgICB0aGlzLmZvcmdldChzdWJzY3JpcHRpb24pO1xuICAgIGlmICghdGhpcy5maW5kQWxsKHN1YnNjcmlwdGlvbi5pZGVudGlmaWVyKS5sZW5ndGgpIHtcbiAgICAgIHRoaXMuc2VuZENvbW1hbmQoc3Vic2NyaXB0aW9uLCBcInVuc3Vic2NyaWJlXCIpO1xuICAgIH1cbiAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICB9XG4gIHJlamVjdChpZGVudGlmaWVyKSB7XG4gICAgcmV0dXJuIHRoaXMuZmluZEFsbChpZGVudGlmaWVyKS5tYXAoKHN1YnNjcmlwdGlvbiA9PiB7XG4gICAgICB0aGlzLmZvcmdldChzdWJzY3JpcHRpb24pO1xuICAgICAgdGhpcy5ub3RpZnkoc3Vic2NyaXB0aW9uLCBcInJlamVjdGVkXCIpO1xuICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICB9KSk7XG4gIH1cbiAgZm9yZ2V0KHN1YnNjcmlwdGlvbikge1xuICAgIHRoaXMuZ3VhcmFudG9yLmZvcmdldChzdWJzY3JpcHRpb24pO1xuICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IHRoaXMuc3Vic2NyaXB0aW9ucy5maWx0ZXIoKHMgPT4gcyAhPT0gc3Vic2NyaXB0aW9uKSk7XG4gICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgfVxuICBmaW5kQWxsKGlkZW50aWZpZXIpIHtcbiAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25zLmZpbHRlcigocyA9PiBzLmlkZW50aWZpZXIgPT09IGlkZW50aWZpZXIpKTtcbiAgfVxuICByZWxvYWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3Vic2NyaXB0aW9ucy5tYXAoKHN1YnNjcmlwdGlvbiA9PiB0aGlzLnN1YnNjcmliZShzdWJzY3JpcHRpb24pKSk7XG4gIH1cbiAgbm90aWZ5QWxsKGNhbGxiYWNrTmFtZSwgLi4uYXJncykge1xuICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbnMubWFwKChzdWJzY3JpcHRpb24gPT4gdGhpcy5ub3RpZnkoc3Vic2NyaXB0aW9uLCBjYWxsYmFja05hbWUsIC4uLmFyZ3MpKSk7XG4gIH1cbiAgbm90aWZ5KHN1YnNjcmlwdGlvbiwgY2FsbGJhY2tOYW1lLCAuLi5hcmdzKSB7XG4gICAgbGV0IHN1YnNjcmlwdGlvbnM7XG4gICAgaWYgKHR5cGVvZiBzdWJzY3JpcHRpb24gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHN1YnNjcmlwdGlvbnMgPSB0aGlzLmZpbmRBbGwoc3Vic2NyaXB0aW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3Vic2NyaXB0aW9ucyA9IFsgc3Vic2NyaXB0aW9uIF07XG4gICAgfVxuICAgIHJldHVybiBzdWJzY3JpcHRpb25zLm1hcCgoc3Vic2NyaXB0aW9uID0+IHR5cGVvZiBzdWJzY3JpcHRpb25bY2FsbGJhY2tOYW1lXSA9PT0gXCJmdW5jdGlvblwiID8gc3Vic2NyaXB0aW9uW2NhbGxiYWNrTmFtZV0oLi4uYXJncykgOiB1bmRlZmluZWQpKTtcbiAgfVxuICBzdWJzY3JpYmUoc3Vic2NyaXB0aW9uKSB7XG4gICAgaWYgKHRoaXMuc2VuZENvbW1hbmQoc3Vic2NyaXB0aW9uLCBcInN1YnNjcmliZVwiKSkge1xuICAgICAgdGhpcy5ndWFyYW50b3IuZ3VhcmFudGVlKHN1YnNjcmlwdGlvbik7XG4gICAgfVxuICB9XG4gIGNvbmZpcm1TdWJzY3JpcHRpb24oaWRlbnRpZmllcikge1xuICAgIGxvZ2dlci5sb2coYFN1YnNjcmlwdGlvbiBjb25maXJtZWQgJHtpZGVudGlmaWVyfWApO1xuICAgIHRoaXMuZmluZEFsbChpZGVudGlmaWVyKS5tYXAoKHN1YnNjcmlwdGlvbiA9PiB0aGlzLmd1YXJhbnRvci5mb3JnZXQoc3Vic2NyaXB0aW9uKSkpO1xuICB9XG4gIHNlbmRDb21tYW5kKHN1YnNjcmlwdGlvbiwgY29tbWFuZCkge1xuICAgIGNvbnN0IHtpZGVudGlmaWVyOiBpZGVudGlmaWVyfSA9IHN1YnNjcmlwdGlvbjtcbiAgICByZXR1cm4gdGhpcy5jb25zdW1lci5zZW5kKHtcbiAgICAgIGNvbW1hbmQ6IGNvbW1hbmQsXG4gICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyXG4gICAgfSk7XG4gIH1cbn1cblxuY2xhc3MgQ29uc3VtZXIge1xuICBjb25zdHJ1Y3Rvcih1cmwpIHtcbiAgICB0aGlzLl91cmwgPSB1cmw7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zID0gbmV3IFN1YnNjcmlwdGlvbnModGhpcyk7XG4gICAgdGhpcy5jb25uZWN0aW9uID0gbmV3IENvbm5lY3Rpb24odGhpcyk7XG4gICAgdGhpcy5zdWJwcm90b2NvbHMgPSBbXTtcbiAgfVxuICBnZXQgdXJsKCkge1xuICAgIHJldHVybiBjcmVhdGVXZWJTb2NrZXRVUkwodGhpcy5fdXJsKTtcbiAgfVxuICBzZW5kKGRhdGEpIHtcbiAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnNlbmQoZGF0YSk7XG4gIH1cbiAgY29ubmVjdCgpIHtcbiAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLm9wZW4oKTtcbiAgfVxuICBkaXNjb25uZWN0KCkge1xuICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uY2xvc2Uoe1xuICAgICAgYWxsb3dSZWNvbm5lY3Q6IGZhbHNlXG4gICAgfSk7XG4gIH1cbiAgZW5zdXJlQWN0aXZlQ29ubmVjdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuY29ubmVjdGlvbi5pc0FjdGl2ZSgpKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLm9wZW4oKTtcbiAgICB9XG4gIH1cbiAgYWRkU3ViUHJvdG9jb2woc3VicHJvdG9jb2wpIHtcbiAgICB0aGlzLnN1YnByb3RvY29scyA9IFsgLi4udGhpcy5zdWJwcm90b2NvbHMsIHN1YnByb3RvY29sIF07XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlV2ViU29ja2V0VVJMKHVybCkge1xuICBpZiAodHlwZW9mIHVybCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgdXJsID0gdXJsKCk7XG4gIH1cbiAgaWYgKHVybCAmJiAhL153c3M/Oi9pLnRlc3QodXJsKSkge1xuICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICBhLmhyZWYgPSB1cmw7XG4gICAgYS5ocmVmID0gYS5ocmVmO1xuICAgIGEucHJvdG9jb2wgPSBhLnByb3RvY29sLnJlcGxhY2UoXCJodHRwXCIsIFwid3NcIik7XG4gICAgcmV0dXJuIGEuaHJlZjtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNvbnN1bWVyKHVybCA9IGdldENvbmZpZyhcInVybFwiKSB8fCBJTlRFUk5BTC5kZWZhdWx0X21vdW50X3BhdGgpIHtcbiAgcmV0dXJuIG5ldyBDb25zdW1lcih1cmwpO1xufVxuXG5mdW5jdGlvbiBnZXRDb25maWcobmFtZSkge1xuICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuaGVhZC5xdWVyeVNlbGVjdG9yKGBtZXRhW25hbWU9J2FjdGlvbi1jYWJsZS0ke25hbWV9J11gKTtcbiAgaWYgKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJjb250ZW50XCIpO1xuICB9XG59XG5cbmV4cG9ydCB7IENvbm5lY3Rpb24sIENvbm5lY3Rpb25Nb25pdG9yLCBDb25zdW1lciwgSU5URVJOQUwsIFN1YnNjcmlwdGlvbiwgU3Vic2NyaXB0aW9uR3VhcmFudG9yLCBTdWJzY3JpcHRpb25zLCBhZGFwdGVycywgY3JlYXRlQ29uc3VtZXIsIGNyZWF0ZVdlYlNvY2tldFVSTCwgZ2V0Q29uZmlnLCBsb2dnZXIgfTtcbiIsICIvKiFcblR1cmJvIDguMC4xN1xuQ29weXJpZ2h0IFx1MDBBOSAyMDI1IDM3c2lnbmFscyBMTENcbiAqL1xuLyoqXG4gKiBUaGUgTUlUIExpY2Vuc2UgKE1JVClcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgSmF2YW4gTWFraG1hbGlcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4gKiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4gKiBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4gKiB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4gKiBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbiAqIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4gKiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4gKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuICogT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuICogVEhFIFNPRlRXQVJFLlxuICovXG5cbihmdW5jdGlvbiAocHJvdG90eXBlKSB7XG4gIGlmICh0eXBlb2YgcHJvdG90eXBlLnJlcXVlc3RTdWJtaXQgPT0gXCJmdW5jdGlvblwiKSByZXR1cm5cblxuICBwcm90b3R5cGUucmVxdWVzdFN1Ym1pdCA9IGZ1bmN0aW9uIChzdWJtaXR0ZXIpIHtcbiAgICBpZiAoc3VibWl0dGVyKSB7XG4gICAgICB2YWxpZGF0ZVN1Ym1pdHRlcihzdWJtaXR0ZXIsIHRoaXMpO1xuICAgICAgc3VibWl0dGVyLmNsaWNrKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN1Ym1pdHRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgIHN1Ym1pdHRlci50eXBlID0gXCJzdWJtaXRcIjtcbiAgICAgIHN1Ym1pdHRlci5oaWRkZW4gPSB0cnVlO1xuICAgICAgdGhpcy5hcHBlbmRDaGlsZChzdWJtaXR0ZXIpO1xuICAgICAgc3VibWl0dGVyLmNsaWNrKCk7XG4gICAgICB0aGlzLnJlbW92ZUNoaWxkKHN1Ym1pdHRlcik7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIHZhbGlkYXRlU3VibWl0dGVyKHN1Ym1pdHRlciwgZm9ybSkge1xuICAgIHN1Ym1pdHRlciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50IHx8IHJhaXNlKFR5cGVFcnJvciwgXCJwYXJhbWV0ZXIgMSBpcyBub3Qgb2YgdHlwZSAnSFRNTEVsZW1lbnQnXCIpO1xuICAgIHN1Ym1pdHRlci50eXBlID09IFwic3VibWl0XCIgfHwgcmFpc2UoVHlwZUVycm9yLCBcIlRoZSBzcGVjaWZpZWQgZWxlbWVudCBpcyBub3QgYSBzdWJtaXQgYnV0dG9uXCIpO1xuICAgIHN1Ym1pdHRlci5mb3JtID09IGZvcm0gfHxcbiAgICAgIHJhaXNlKERPTUV4Y2VwdGlvbiwgXCJUaGUgc3BlY2lmaWVkIGVsZW1lbnQgaXMgbm90IG93bmVkIGJ5IHRoaXMgZm9ybSBlbGVtZW50XCIsIFwiTm90Rm91bmRFcnJvclwiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJhaXNlKGVycm9yQ29uc3RydWN0b3IsIG1lc3NhZ2UsIG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JDb25zdHJ1Y3RvcihcIkZhaWxlZCB0byBleGVjdXRlICdyZXF1ZXN0U3VibWl0JyBvbiAnSFRNTEZvcm1FbGVtZW50JzogXCIgKyBtZXNzYWdlICsgXCIuXCIsIG5hbWUpXG4gIH1cbn0pKEhUTUxGb3JtRWxlbWVudC5wcm90b3R5cGUpO1xuXG5jb25zdCBzdWJtaXR0ZXJzQnlGb3JtID0gbmV3IFdlYWtNYXAoKTtcblxuZnVuY3Rpb24gZmluZFN1Ym1pdHRlckZyb21DbGlja1RhcmdldCh0YXJnZXQpIHtcbiAgY29uc3QgZWxlbWVudCA9IHRhcmdldCBpbnN0YW5jZW9mIEVsZW1lbnQgPyB0YXJnZXQgOiB0YXJnZXQgaW5zdGFuY2VvZiBOb2RlID8gdGFyZ2V0LnBhcmVudEVsZW1lbnQgOiBudWxsO1xuICBjb25zdCBjYW5kaWRhdGUgPSBlbGVtZW50ID8gZWxlbWVudC5jbG9zZXN0KFwiaW5wdXQsIGJ1dHRvblwiKSA6IG51bGw7XG4gIHJldHVybiBjYW5kaWRhdGU/LnR5cGUgPT0gXCJzdWJtaXRcIiA/IGNhbmRpZGF0ZSA6IG51bGxcbn1cblxuZnVuY3Rpb24gY2xpY2tDYXB0dXJlZChldmVudCkge1xuICBjb25zdCBzdWJtaXR0ZXIgPSBmaW5kU3VibWl0dGVyRnJvbUNsaWNrVGFyZ2V0KGV2ZW50LnRhcmdldCk7XG5cbiAgaWYgKHN1Ym1pdHRlciAmJiBzdWJtaXR0ZXIuZm9ybSkge1xuICAgIHN1Ym1pdHRlcnNCeUZvcm0uc2V0KHN1Ym1pdHRlci5mb3JtLCBzdWJtaXR0ZXIpO1xuICB9XG59XG5cbihmdW5jdGlvbiAoKSB7XG4gIGlmIChcInN1Ym1pdHRlclwiIGluIEV2ZW50LnByb3RvdHlwZSkgcmV0dXJuXG5cbiAgbGV0IHByb3RvdHlwZSA9IHdpbmRvdy5FdmVudC5wcm90b3R5cGU7XG4gIC8vIENlcnRhaW4gdmVyc2lvbnMgb2YgU2FmYXJpIDE1IGhhdmUgYSBidWcgd2hlcmUgdGhleSB3b24ndFxuICAvLyBwb3B1bGF0ZSB0aGUgc3VibWl0dGVyLiBUaGlzIGh1cnRzIFR1cmJvRHJpdmUncyBlbmFibGUvZGlzYWJsZSBkZXRlY3Rpb24uXG4gIC8vIFNlZSBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjI5NjYwXG4gIGlmIChcIlN1Ym1pdEV2ZW50XCIgaW4gd2luZG93KSB7XG4gICAgY29uc3QgcHJvdG90eXBlT2ZTdWJtaXRFdmVudCA9IHdpbmRvdy5TdWJtaXRFdmVudC5wcm90b3R5cGU7XG5cbiAgICBpZiAoL0FwcGxlIENvbXB1dGVyLy50ZXN0KG5hdmlnYXRvci52ZW5kb3IpICYmICEoXCJzdWJtaXR0ZXJcIiBpbiBwcm90b3R5cGVPZlN1Ym1pdEV2ZW50KSkge1xuICAgICAgcHJvdG90eXBlID0gcHJvdG90eXBlT2ZTdWJtaXRFdmVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIC8vIHBvbHlmaWxsIG5vdCBuZWVkZWRcbiAgICB9XG4gIH1cblxuICBhZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xpY2tDYXB0dXJlZCwgdHJ1ZSk7XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3RvdHlwZSwgXCJzdWJtaXR0ZXJcIiwge1xuICAgIGdldCgpIHtcbiAgICAgIGlmICh0aGlzLnR5cGUgPT0gXCJzdWJtaXRcIiAmJiB0aGlzLnRhcmdldCBpbnN0YW5jZW9mIEhUTUxGb3JtRWxlbWVudCkge1xuICAgICAgICByZXR1cm4gc3VibWl0dGVyc0J5Rm9ybS5nZXQodGhpcy50YXJnZXQpXG4gICAgICB9XG4gICAgfVxuICB9KTtcbn0pKCk7XG5cbmNvbnN0IEZyYW1lTG9hZGluZ1N0eWxlID0ge1xuICBlYWdlcjogXCJlYWdlclwiLFxuICBsYXp5OiBcImxhenlcIlxufTtcblxuLyoqXG4gKiBDb250YWlucyBhIGZyYWdtZW50IG9mIEhUTUwgd2hpY2ggaXMgdXBkYXRlZCBiYXNlZCBvbiBuYXZpZ2F0aW9uIHdpdGhpblxuICogaXQgKGUuZy4gdmlhIGxpbmtzIG9yIGZvcm0gc3VibWlzc2lvbnMpLlxuICpcbiAqIEBjdXN0b21FbGVtZW50IHR1cmJvLWZyYW1lXG4gKiBAZXhhbXBsZVxuICogICA8dHVyYm8tZnJhbWUgaWQ9XCJtZXNzYWdlc1wiPlxuICogICAgIDxhIGhyZWY9XCIvbWVzc2FnZXMvZXhwYW5kZWRcIj5cbiAqICAgICAgIFNob3cgYWxsIGV4cGFuZGVkIG1lc3NhZ2VzIGluIHRoaXMgZnJhbWUuXG4gKiAgICAgPC9hPlxuICpcbiAqICAgICA8Zm9ybSBhY3Rpb249XCIvbWVzc2FnZXNcIj5cbiAqICAgICAgIFNob3cgcmVzcG9uc2UgZnJvbSB0aGlzIGZvcm0gd2l0aGluIHRoaXMgZnJhbWUuXG4gKiAgICAgPC9mb3JtPlxuICogICA8L3R1cmJvLWZyYW1lPlxuICovXG5jbGFzcyBGcmFtZUVsZW1lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIHN0YXRpYyBkZWxlZ2F0ZUNvbnN0cnVjdG9yID0gdW5kZWZpbmVkXG5cbiAgbG9hZGVkID0gUHJvbWlzZS5yZXNvbHZlKClcblxuICBzdGF0aWMgZ2V0IG9ic2VydmVkQXR0cmlidXRlcygpIHtcbiAgICByZXR1cm4gW1wiZGlzYWJsZWRcIiwgXCJsb2FkaW5nXCIsIFwic3JjXCJdXG4gIH1cblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuZGVsZWdhdGUgPSBuZXcgRnJhbWVFbGVtZW50LmRlbGVnYXRlQ29uc3RydWN0b3IodGhpcyk7XG4gIH1cblxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICB0aGlzLmRlbGVnYXRlLmNvbm5lY3QoKTtcbiAgfVxuXG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHRoaXMuZGVsZWdhdGUuZGlzY29ubmVjdCgpO1xuICB9XG5cbiAgcmVsb2FkKCkge1xuICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLnNvdXJjZVVSTFJlbG9hZGVkKClcbiAgfVxuXG4gIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhuYW1lKSB7XG4gICAgaWYgKG5hbWUgPT0gXCJsb2FkaW5nXCIpIHtcbiAgICAgIHRoaXMuZGVsZWdhdGUubG9hZGluZ1N0eWxlQ2hhbmdlZCgpO1xuICAgIH0gZWxzZSBpZiAobmFtZSA9PSBcInNyY1wiKSB7XG4gICAgICB0aGlzLmRlbGVnYXRlLnNvdXJjZVVSTENoYW5nZWQoKTtcbiAgICB9IGVsc2UgaWYgKG5hbWUgPT0gXCJkaXNhYmxlZFwiKSB7XG4gICAgICB0aGlzLmRlbGVnYXRlLmRpc2FibGVkQ2hhbmdlZCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBVUkwgdG8gbGF6aWx5IGxvYWQgc291cmNlIEhUTUwgZnJvbVxuICAgKi9cbiAgZ2V0IHNyYygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoXCJzcmNcIilcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBVUkwgdG8gbGF6aWx5IGxvYWQgc291cmNlIEhUTUwgZnJvbVxuICAgKi9cbiAgc2V0IHNyYyh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShcInNyY1wiKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgcmVmcmVzaCBtb2RlIGZvciB0aGUgZnJhbWUuXG4gICAqL1xuICBnZXQgcmVmcmVzaCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoXCJyZWZyZXNoXCIpXG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgcmVmcmVzaCBtb2RlIGZvciB0aGUgZnJhbWUuXG4gICAqL1xuICBzZXQgcmVmcmVzaCh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyZWZyZXNoXCIsIHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoXCJyZWZyZXNoXCIpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBzaG91bGRSZWxvYWRXaXRoTW9ycGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3JjICYmIHRoaXMucmVmcmVzaCA9PT0gXCJtb3JwaFwiXG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiB0aGUgZWxlbWVudCBpcyBsb2FkaW5nXG4gICAqL1xuICBnZXQgbG9hZGluZygpIHtcbiAgICByZXR1cm4gZnJhbWVMb2FkaW5nU3R5bGVGcm9tU3RyaW5nKHRoaXMuZ2V0QXR0cmlidXRlKFwibG9hZGluZ1wiKSB8fCBcIlwiKVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHZhbHVlIG9mIGlmIHRoZSBlbGVtZW50IGlzIGxvYWRpbmdcbiAgICovXG4gIHNldCBsb2FkaW5nKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZShcImxvYWRpbmdcIiwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShcImxvYWRpbmdcIik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGRpc2FibGVkIHN0YXRlIG9mIHRoZSBmcmFtZS5cbiAgICpcbiAgICogSWYgZGlzYWJsZWQsIG5vIHJlcXVlc3RzIHdpbGwgYmUgaW50ZXJjZXB0ZWQgYnkgdGhlIGZyYW1lLlxuICAgKi9cbiAgZ2V0IGRpc2FibGVkKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShcImRpc2FibGVkXCIpXG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgZGlzYWJsZWQgc3RhdGUgb2YgdGhlIGZyYW1lLlxuICAgKlxuICAgKiBJZiBkaXNhYmxlZCwgbm8gcmVxdWVzdHMgd2lsbCBiZSBpbnRlcmNlcHRlZCBieSB0aGUgZnJhbWUuXG4gICAqL1xuICBzZXQgZGlzYWJsZWQodmFsdWUpIHtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGF1dG9zY3JvbGwgc3RhdGUgb2YgdGhlIGZyYW1lLlxuICAgKlxuICAgKiBJZiB0cnVlLCB0aGUgZnJhbWUgd2lsbCBiZSBzY3JvbGxlZCBpbnRvIHZpZXcgYXV0b21hdGljYWxseSBvbiB1cGRhdGUuXG4gICAqL1xuICBnZXQgYXV0b3Njcm9sbCgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJhdXRvc2Nyb2xsXCIpXG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgYXV0b3Njcm9sbCBzdGF0ZSBvZiB0aGUgZnJhbWUuXG4gICAqXG4gICAqIElmIHRydWUsIHRoZSBmcmFtZSB3aWxsIGJlIHNjcm9sbGVkIGludG8gdmlldyBhdXRvbWF0aWNhbGx5IG9uIHVwZGF0ZS5cbiAgICovXG4gIHNldCBhdXRvc2Nyb2xsKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZShcImF1dG9zY3JvbGxcIiwgXCJcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKFwiYXV0b3Njcm9sbFwiKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiB0aGUgZWxlbWVudCBoYXMgZmluaXNoZWQgbG9hZGluZ1xuICAgKi9cbiAgZ2V0IGNvbXBsZXRlKCkge1xuICAgIHJldHVybiAhdGhpcy5kZWxlZ2F0ZS5pc0xvYWRpbmdcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBhY3RpdmUgc3RhdGUgb2YgdGhlIGZyYW1lLlxuICAgKlxuICAgKiBJZiBpbmFjdGl2ZSwgc291cmNlIGNoYW5nZXMgd2lsbCBub3QgYmUgb2JzZXJ2ZWQuXG4gICAqL1xuICBnZXQgaXNBY3RpdmUoKSB7XG4gICAgcmV0dXJuIHRoaXMub3duZXJEb2N1bWVudCA9PT0gZG9jdW1lbnQgJiYgIXRoaXMuaXNQcmV2aWV3XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgYWN0aXZlIHN0YXRlIG9mIHRoZSBmcmFtZS5cbiAgICpcbiAgICogSWYgaW5hY3RpdmUsIHNvdXJjZSBjaGFuZ2VzIHdpbGwgbm90IGJlIG9ic2VydmVkLlxuICAgKi9cbiAgZ2V0IGlzUHJldmlldygpIHtcbiAgICByZXR1cm4gdGhpcy5vd25lckRvY3VtZW50Py5kb2N1bWVudEVsZW1lbnQ/Lmhhc0F0dHJpYnV0ZShcImRhdGEtdHVyYm8tcHJldmlld1wiKVxuICB9XG59XG5cbmZ1bmN0aW9uIGZyYW1lTG9hZGluZ1N0eWxlRnJvbVN0cmluZyhzdHlsZSkge1xuICBzd2l0Y2ggKHN0eWxlLnRvTG93ZXJDYXNlKCkpIHtcbiAgICBjYXNlIFwibGF6eVwiOlxuICAgICAgcmV0dXJuIEZyYW1lTG9hZGluZ1N0eWxlLmxhenlcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIEZyYW1lTG9hZGluZ1N0eWxlLmVhZ2VyXG4gIH1cbn1cblxuY29uc3QgZHJpdmUgPSB7XG4gIGVuYWJsZWQ6IHRydWUsXG4gIHByb2dyZXNzQmFyRGVsYXk6IDUwMCxcbiAgdW52aXNpdGFibGVFeHRlbnNpb25zOiBuZXcgU2V0KFxuICAgIFtcbiAgICAgIFwiLjd6XCIsIFwiLmFhY1wiLCBcIi5hcGtcIiwgXCIuYXZpXCIsIFwiLmJtcFwiLCBcIi5iejJcIiwgXCIuY3NzXCIsIFwiLmNzdlwiLCBcIi5kZWJcIiwgXCIuZG1nXCIsIFwiLmRvY1wiLFxuICAgICAgXCIuZG9jeFwiLCBcIi5leGVcIiwgXCIuZ2lmXCIsIFwiLmd6XCIsIFwiLmhlaWNcIiwgXCIuaGVpZlwiLCBcIi5pY29cIiwgXCIuaXNvXCIsIFwiLmpwZWdcIiwgXCIuanBnXCIsXG4gICAgICBcIi5qc1wiLCBcIi5qc29uXCIsIFwiLm00YVwiLCBcIi5ta3ZcIiwgXCIubW92XCIsIFwiLm1wM1wiLCBcIi5tcDRcIiwgXCIubXBlZ1wiLCBcIi5tcGdcIiwgXCIubXNpXCIsXG4gICAgICBcIi5vZ2dcIiwgXCIub2d2XCIsIFwiLnBkZlwiLCBcIi5wa2dcIiwgXCIucG5nXCIsIFwiLnBwdFwiLCBcIi5wcHR4XCIsIFwiLnJhclwiLCBcIi5ydGZcIixcbiAgICAgIFwiLnN2Z1wiLCBcIi50YXJcIiwgXCIudGlmXCIsIFwiLnRpZmZcIiwgXCIudHh0XCIsIFwiLndhdlwiLCBcIi53ZWJtXCIsIFwiLndlYnBcIiwgXCIud21hXCIsIFwiLndtdlwiLFxuICAgICAgXCIueGxzXCIsIFwiLnhsc3hcIiwgXCIueG1sXCIsIFwiLnppcFwiXG4gICAgXVxuICApXG59O1xuXG5mdW5jdGlvbiBhY3RpdmF0ZVNjcmlwdEVsZW1lbnQoZWxlbWVudCkge1xuICBpZiAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLWV2YWxcIikgPT0gXCJmYWxzZVwiKSB7XG4gICAgcmV0dXJuIGVsZW1lbnRcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBjcmVhdGVkU2NyaXB0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgY29uc3QgY3NwTm9uY2UgPSBnZXRDc3BOb25jZSgpO1xuICAgIGlmIChjc3BOb25jZSkge1xuICAgICAgY3JlYXRlZFNjcmlwdEVsZW1lbnQubm9uY2UgPSBjc3BOb25jZTtcbiAgICB9XG4gICAgY3JlYXRlZFNjcmlwdEVsZW1lbnQudGV4dENvbnRlbnQgPSBlbGVtZW50LnRleHRDb250ZW50O1xuICAgIGNyZWF0ZWRTY3JpcHRFbGVtZW50LmFzeW5jID0gZmFsc2U7XG4gICAgY29weUVsZW1lbnRBdHRyaWJ1dGVzKGNyZWF0ZWRTY3JpcHRFbGVtZW50LCBlbGVtZW50KTtcbiAgICByZXR1cm4gY3JlYXRlZFNjcmlwdEVsZW1lbnRcbiAgfVxufVxuXG5mdW5jdGlvbiBjb3B5RWxlbWVudEF0dHJpYnV0ZXMoZGVzdGluYXRpb25FbGVtZW50LCBzb3VyY2VFbGVtZW50KSB7XG4gIGZvciAoY29uc3QgeyBuYW1lLCB2YWx1ZSB9IG9mIHNvdXJjZUVsZW1lbnQuYXR0cmlidXRlcykge1xuICAgIGRlc3RpbmF0aW9uRWxlbWVudC5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZURvY3VtZW50RnJhZ21lbnQoaHRtbCkge1xuICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcbiAgdGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbDtcbiAgcmV0dXJuIHRlbXBsYXRlLmNvbnRlbnRcbn1cblxuZnVuY3Rpb24gZGlzcGF0Y2goZXZlbnROYW1lLCB7IHRhcmdldCwgY2FuY2VsYWJsZSwgZGV0YWlsIH0gPSB7fSkge1xuICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudChldmVudE5hbWUsIHtcbiAgICBjYW5jZWxhYmxlLFxuICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgY29tcG9zZWQ6IHRydWUsXG4gICAgZGV0YWlsXG4gIH0pO1xuXG4gIGlmICh0YXJnZXQgJiYgdGFyZ2V0LmlzQ29ubmVjdGVkKSB7XG4gICAgdGFyZ2V0LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICB9IGVsc2Uge1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgfVxuXG4gIHJldHVybiBldmVudFxufVxuXG5mdW5jdGlvbiBjYW5jZWxFdmVudChldmVudCkge1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbn1cblxuZnVuY3Rpb24gbmV4dFJlcGFpbnQoKSB7XG4gIGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09IFwiaGlkZGVuXCIpIHtcbiAgICByZXR1cm4gbmV4dEV2ZW50TG9vcFRpY2soKVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXh0QW5pbWF0aW9uRnJhbWUoKVxuICB9XG59XG5cbmZ1bmN0aW9uIG5leHRBbmltYXRpb25GcmFtZSgpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gcmVzb2x2ZSgpKSlcbn1cblxuZnVuY3Rpb24gbmV4dEV2ZW50TG9vcFRpY2soKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dCgoKSA9PiByZXNvbHZlKCksIDApKVxufVxuXG5mdW5jdGlvbiBuZXh0TWljcm90YXNrKCkge1xuICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcbn1cblxuZnVuY3Rpb24gcGFyc2VIVE1MRG9jdW1lbnQoaHRtbCA9IFwiXCIpIHtcbiAgcmV0dXJuIG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoaHRtbCwgXCJ0ZXh0L2h0bWxcIilcbn1cblxuZnVuY3Rpb24gdW5pbmRlbnQoc3RyaW5ncywgLi4udmFsdWVzKSB7XG4gIGNvbnN0IGxpbmVzID0gaW50ZXJwb2xhdGUoc3RyaW5ncywgdmFsdWVzKS5yZXBsYWNlKC9eXFxuLywgXCJcIikuc3BsaXQoXCJcXG5cIik7XG4gIGNvbnN0IG1hdGNoID0gbGluZXNbMF0ubWF0Y2goL15cXHMrLyk7XG4gIGNvbnN0IGluZGVudCA9IG1hdGNoID8gbWF0Y2hbMF0ubGVuZ3RoIDogMDtcbiAgcmV0dXJuIGxpbmVzLm1hcCgobGluZSkgPT4gbGluZS5zbGljZShpbmRlbnQpKS5qb2luKFwiXFxuXCIpXG59XG5cbmZ1bmN0aW9uIGludGVycG9sYXRlKHN0cmluZ3MsIHZhbHVlcykge1xuICByZXR1cm4gc3RyaW5ncy5yZWR1Y2UoKHJlc3VsdCwgc3RyaW5nLCBpKSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSB2YWx1ZXNbaV0gPT0gdW5kZWZpbmVkID8gXCJcIiA6IHZhbHVlc1tpXTtcbiAgICByZXR1cm4gcmVzdWx0ICsgc3RyaW5nICsgdmFsdWVcbiAgfSwgXCJcIilcbn1cblxuZnVuY3Rpb24gdXVpZCgpIHtcbiAgcmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGg6IDM2IH0pXG4gICAgLm1hcCgoXywgaSkgPT4ge1xuICAgICAgaWYgKGkgPT0gOCB8fCBpID09IDEzIHx8IGkgPT0gMTggfHwgaSA9PSAyMykge1xuICAgICAgICByZXR1cm4gXCItXCJcbiAgICAgIH0gZWxzZSBpZiAoaSA9PSAxNCkge1xuICAgICAgICByZXR1cm4gXCI0XCJcbiAgICAgIH0gZWxzZSBpZiAoaSA9PSAxOSkge1xuICAgICAgICByZXR1cm4gKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDQpICsgOCkudG9TdHJpbmcoMTYpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTUpLnRvU3RyaW5nKDE2KVxuICAgICAgfVxuICAgIH0pXG4gICAgLmpvaW4oXCJcIilcbn1cblxuZnVuY3Rpb24gZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUsIC4uLmVsZW1lbnRzKSB7XG4gIGZvciAoY29uc3QgdmFsdWUgb2YgZWxlbWVudHMubWFwKChlbGVtZW50KSA9PiBlbGVtZW50Py5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSkpKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSBcInN0cmluZ1wiKSByZXR1cm4gdmFsdWVcbiAgfVxuXG4gIHJldHVybiBudWxsXG59XG5cbmZ1bmN0aW9uIGhhc0F0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lLCAuLi5lbGVtZW50cykge1xuICByZXR1cm4gZWxlbWVudHMuc29tZSgoZWxlbWVudCkgPT4gZWxlbWVudCAmJiBlbGVtZW50Lmhhc0F0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lKSlcbn1cblxuZnVuY3Rpb24gbWFya0FzQnVzeSguLi5lbGVtZW50cykge1xuICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudHMpIHtcbiAgICBpZiAoZWxlbWVudC5sb2NhbE5hbWUgPT0gXCJ0dXJiby1mcmFtZVwiKSB7XG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShcImJ1c3lcIiwgXCJcIik7XG4gICAgfVxuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1idXN5XCIsIFwidHJ1ZVwiKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjbGVhckJ1c3lTdGF0ZSguLi5lbGVtZW50cykge1xuICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudHMpIHtcbiAgICBpZiAoZWxlbWVudC5sb2NhbE5hbWUgPT0gXCJ0dXJiby1mcmFtZVwiKSB7XG4gICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImJ1c3lcIik7XG4gICAgfVxuXG4gICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLWJ1c3lcIik7XG4gIH1cbn1cblxuZnVuY3Rpb24gd2FpdEZvckxvYWQoZWxlbWVudCwgdGltZW91dEluTWlsbGlzZWNvbmRzID0gMjAwMCkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBjb25zdCBvbkNvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgb25Db21wbGV0ZSk7XG4gICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIG9uQ29tcGxldGUpO1xuICAgICAgcmVzb2x2ZSgpO1xuICAgIH07XG5cbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIG9uQ29tcGxldGUsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBvbkNvbXBsZXRlLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgc2V0VGltZW91dChyZXNvbHZlLCB0aW1lb3V0SW5NaWxsaXNlY29uZHMpO1xuICB9KVxufVxuXG5mdW5jdGlvbiBnZXRIaXN0b3J5TWV0aG9kRm9yQWN0aW9uKGFjdGlvbikge1xuICBzd2l0Y2ggKGFjdGlvbikge1xuICAgIGNhc2UgXCJyZXBsYWNlXCI6XG4gICAgICByZXR1cm4gaGlzdG9yeS5yZXBsYWNlU3RhdGVcbiAgICBjYXNlIFwiYWR2YW5jZVwiOlxuICAgIGNhc2UgXCJyZXN0b3JlXCI6XG4gICAgICByZXR1cm4gaGlzdG9yeS5wdXNoU3RhdGVcbiAgfVxufVxuXG5mdW5jdGlvbiBpc0FjdGlvbihhY3Rpb24pIHtcbiAgcmV0dXJuIGFjdGlvbiA9PSBcImFkdmFuY2VcIiB8fCBhY3Rpb24gPT0gXCJyZXBsYWNlXCIgfHwgYWN0aW9uID09IFwicmVzdG9yZVwiXG59XG5cbmZ1bmN0aW9uIGdldFZpc2l0QWN0aW9uKC4uLmVsZW1lbnRzKSB7XG4gIGNvbnN0IGFjdGlvbiA9IGdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm8tYWN0aW9uXCIsIC4uLmVsZW1lbnRzKTtcblxuICByZXR1cm4gaXNBY3Rpb24oYWN0aW9uKSA/IGFjdGlvbiA6IG51bGxcbn1cblxuZnVuY3Rpb24gZ2V0TWV0YUVsZW1lbnQobmFtZSkge1xuICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgbWV0YVtuYW1lPVwiJHtuYW1lfVwiXWApXG59XG5cbmZ1bmN0aW9uIGdldE1ldGFDb250ZW50KG5hbWUpIHtcbiAgY29uc3QgZWxlbWVudCA9IGdldE1ldGFFbGVtZW50KG5hbWUpO1xuICByZXR1cm4gZWxlbWVudCAmJiBlbGVtZW50LmNvbnRlbnRcbn1cblxuZnVuY3Rpb24gZ2V0Q3NwTm9uY2UoKSB7XG4gIGNvbnN0IGVsZW1lbnQgPSBnZXRNZXRhRWxlbWVudChcImNzcC1ub25jZVwiKTtcblxuICBpZiAoZWxlbWVudCkge1xuICAgIGNvbnN0IHsgbm9uY2UsIGNvbnRlbnQgfSA9IGVsZW1lbnQ7XG4gICAgcmV0dXJuIG5vbmNlID09IFwiXCIgPyBjb250ZW50IDogbm9uY2VcbiAgfVxufVxuXG5mdW5jdGlvbiBzZXRNZXRhQ29udGVudChuYW1lLCBjb250ZW50KSB7XG4gIGxldCBlbGVtZW50ID0gZ2V0TWV0YUVsZW1lbnQobmFtZSk7XG5cbiAgaWYgKCFlbGVtZW50KSB7XG4gICAgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJtZXRhXCIpO1xuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwibmFtZVwiLCBuYW1lKTtcblxuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gIH1cblxuICBlbGVtZW50LnNldEF0dHJpYnV0ZShcImNvbnRlbnRcIiwgY29udGVudCk7XG5cbiAgcmV0dXJuIGVsZW1lbnRcbn1cblxuZnVuY3Rpb24gZmluZENsb3Nlc3RSZWN1cnNpdmVseShlbGVtZW50LCBzZWxlY3Rvcikge1xuICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcbiAgICByZXR1cm4gKFxuICAgICAgZWxlbWVudC5jbG9zZXN0KHNlbGVjdG9yKSB8fCBmaW5kQ2xvc2VzdFJlY3Vyc2l2ZWx5KGVsZW1lbnQuYXNzaWduZWRTbG90IHx8IGVsZW1lbnQuZ2V0Um9vdE5vZGUoKT8uaG9zdCwgc2VsZWN0b3IpXG4gICAgKVxuICB9XG59XG5cbmZ1bmN0aW9uIGVsZW1lbnRJc0ZvY3VzYWJsZShlbGVtZW50KSB7XG4gIGNvbnN0IGluZXJ0RGlzYWJsZWRPckhpZGRlbiA9IFwiW2luZXJ0XSwgOmRpc2FibGVkLCBbaGlkZGVuXSwgZGV0YWlsczpub3QoW29wZW5dKSwgZGlhbG9nOm5vdChbb3Blbl0pXCI7XG5cbiAgcmV0dXJuICEhZWxlbWVudCAmJiBlbGVtZW50LmNsb3Nlc3QoaW5lcnREaXNhYmxlZE9ySGlkZGVuKSA9PSBudWxsICYmIHR5cGVvZiBlbGVtZW50LmZvY3VzID09IFwiZnVuY3Rpb25cIlxufVxuXG5mdW5jdGlvbiBxdWVyeUF1dG9mb2N1c2FibGVFbGVtZW50KGVsZW1lbnRPckRvY3VtZW50RnJhZ21lbnQpIHtcbiAgcmV0dXJuIEFycmF5LmZyb20oZWxlbWVudE9yRG9jdW1lbnRGcmFnbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2F1dG9mb2N1c11cIikpLmZpbmQoZWxlbWVudElzRm9jdXNhYmxlKVxufVxuXG5hc3luYyBmdW5jdGlvbiBhcm91bmQoY2FsbGJhY2ssIHJlYWRlcikge1xuICBjb25zdCBiZWZvcmUgPSByZWFkZXIoKTtcblxuICBjYWxsYmFjaygpO1xuXG4gIGF3YWl0IG5leHRBbmltYXRpb25GcmFtZSgpO1xuXG4gIGNvbnN0IGFmdGVyID0gcmVhZGVyKCk7XG5cbiAgcmV0dXJuIFtiZWZvcmUsIGFmdGVyXVxufVxuXG5mdW5jdGlvbiBkb2VzTm90VGFyZ2V0SUZyYW1lKG5hbWUpIHtcbiAgaWYgKG5hbWUgPT09IFwiX2JsYW5rXCIpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfSBlbHNlIGlmIChuYW1lKSB7XG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKG5hbWUpKSB7XG4gICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxJRnJhbWVFbGVtZW50KSByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9IGVsc2Uge1xuICAgIHJldHVybiB0cnVlXG4gIH1cbn1cblxuZnVuY3Rpb24gZmluZExpbmtGcm9tQ2xpY2tUYXJnZXQodGFyZ2V0KSB7XG4gIGNvbnN0IGxpbmsgPSBmaW5kQ2xvc2VzdFJlY3Vyc2l2ZWx5KHRhcmdldCwgXCJhW2hyZWZdLCBhW3hsaW5rXFxcXDpocmVmXVwiKTtcblxuICBpZiAoIWxpbmspIHJldHVybiBudWxsXG4gIGlmIChsaW5rLmhhc0F0dHJpYnV0ZShcImRvd25sb2FkXCIpKSByZXR1cm4gbnVsbFxuICBpZiAobGluay5oYXNBdHRyaWJ1dGUoXCJ0YXJnZXRcIikgJiYgbGluay50YXJnZXQgIT09IFwiX3NlbGZcIikgcmV0dXJuIG51bGxcblxuICByZXR1cm4gbGlua1xufVxuXG5mdW5jdGlvbiBnZXRMb2NhdGlvbkZvckxpbmsobGluaykge1xuICByZXR1cm4gZXhwYW5kVVJMKGxpbmsuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSB8fCBcIlwiKVxufVxuXG5mdW5jdGlvbiBkZWJvdW5jZShmbiwgZGVsYXkpIHtcbiAgbGV0IHRpbWVvdXRJZCA9IG51bGw7XG5cbiAgcmV0dXJuICguLi5hcmdzKSA9PiB7XG4gICAgY29uc3QgY2FsbGJhY2sgPSAoKSA9PiBmbi5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGNhbGxiYWNrLCBkZWxheSk7XG4gIH1cbn1cblxuY29uc3Qgc3VibWl0dGVyID0ge1xuICBcImFyaWEtZGlzYWJsZWRcIjoge1xuICAgIGJlZm9yZVN1Ym1pdDogc3VibWl0dGVyID0+IHtcbiAgICAgIHN1Ym1pdHRlci5zZXRBdHRyaWJ1dGUoXCJhcmlhLWRpc2FibGVkXCIsIFwidHJ1ZVwiKTtcbiAgICAgIHN1Ym1pdHRlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2FuY2VsRXZlbnQpO1xuICAgIH0sXG5cbiAgICBhZnRlclN1Ym1pdDogc3VibWl0dGVyID0+IHtcbiAgICAgIHN1Ym1pdHRlci5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLWRpc2FibGVkXCIpO1xuICAgICAgc3VibWl0dGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjYW5jZWxFdmVudCk7XG4gICAgfVxuICB9LFxuXG4gIFwiZGlzYWJsZWRcIjoge1xuICAgIGJlZm9yZVN1Ym1pdDogc3VibWl0dGVyID0+IHN1Ym1pdHRlci5kaXNhYmxlZCA9IHRydWUsXG4gICAgYWZ0ZXJTdWJtaXQ6IHN1Ym1pdHRlciA9PiBzdWJtaXR0ZXIuZGlzYWJsZWQgPSBmYWxzZVxuICB9XG59O1xuXG5jbGFzcyBDb25maWcge1xuICAjc3VibWl0dGVyID0gbnVsbFxuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIE9iamVjdC5hc3NpZ24odGhpcywgY29uZmlnKTtcbiAgfVxuXG4gIGdldCBzdWJtaXR0ZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuI3N1Ym1pdHRlclxuICB9XG5cbiAgc2V0IHN1Ym1pdHRlcih2YWx1ZSkge1xuICAgIHRoaXMuI3N1Ym1pdHRlciA9IHN1Ym1pdHRlclt2YWx1ZV0gfHwgdmFsdWU7XG4gIH1cbn1cblxuY29uc3QgZm9ybXMgPSBuZXcgQ29uZmlnKHtcbiAgbW9kZTogXCJvblwiLFxuICBzdWJtaXR0ZXI6IFwiZGlzYWJsZWRcIlxufSk7XG5cbmNvbnN0IGNvbmZpZyA9IHtcbiAgZHJpdmUsXG4gIGZvcm1zXG59O1xuXG5mdW5jdGlvbiBleHBhbmRVUkwobG9jYXRhYmxlKSB7XG4gIHJldHVybiBuZXcgVVJMKGxvY2F0YWJsZS50b1N0cmluZygpLCBkb2N1bWVudC5iYXNlVVJJKVxufVxuXG5mdW5jdGlvbiBnZXRBbmNob3IodXJsKSB7XG4gIGxldCBhbmNob3JNYXRjaDtcbiAgaWYgKHVybC5oYXNoKSB7XG4gICAgcmV0dXJuIHVybC5oYXNoLnNsaWNlKDEpXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbmQtYXNzaWduXG4gIH0gZWxzZSBpZiAoKGFuY2hvck1hdGNoID0gdXJsLmhyZWYubWF0Y2goLyMoLiopJC8pKSkge1xuICAgIHJldHVybiBhbmNob3JNYXRjaFsxXVxuICB9XG59XG5cbmZ1bmN0aW9uIGdldEFjdGlvbiQxKGZvcm0sIHN1Ym1pdHRlcikge1xuICBjb25zdCBhY3Rpb24gPSBzdWJtaXR0ZXI/LmdldEF0dHJpYnV0ZShcImZvcm1hY3Rpb25cIikgfHwgZm9ybS5nZXRBdHRyaWJ1dGUoXCJhY3Rpb25cIikgfHwgZm9ybS5hY3Rpb247XG5cbiAgcmV0dXJuIGV4cGFuZFVSTChhY3Rpb24pXG59XG5cbmZ1bmN0aW9uIGdldEV4dGVuc2lvbih1cmwpIHtcbiAgcmV0dXJuIChnZXRMYXN0UGF0aENvbXBvbmVudCh1cmwpLm1hdGNoKC9cXC5bXi5dKiQvKSB8fCBbXSlbMF0gfHwgXCJcIlxufVxuXG5mdW5jdGlvbiBpc1ByZWZpeGVkQnkoYmFzZVVSTCwgdXJsKSB7XG4gIGNvbnN0IHByZWZpeCA9IGFkZFRyYWlsaW5nU2xhc2godXJsLm9yaWdpbiArIHVybC5wYXRobmFtZSk7XG4gIHJldHVybiBhZGRUcmFpbGluZ1NsYXNoKGJhc2VVUkwuaHJlZikgPT09IHByZWZpeCB8fCBiYXNlVVJMLmhyZWYuc3RhcnRzV2l0aChwcmVmaXgpXG59XG5cbmZ1bmN0aW9uIGxvY2F0aW9uSXNWaXNpdGFibGUobG9jYXRpb24sIHJvb3RMb2NhdGlvbikge1xuICByZXR1cm4gaXNQcmVmaXhlZEJ5KGxvY2F0aW9uLCByb290TG9jYXRpb24pICYmICFjb25maWcuZHJpdmUudW52aXNpdGFibGVFeHRlbnNpb25zLmhhcyhnZXRFeHRlbnNpb24obG9jYXRpb24pKVxufVxuXG5mdW5jdGlvbiBnZXRSZXF1ZXN0VVJMKHVybCkge1xuICBjb25zdCBhbmNob3IgPSBnZXRBbmNob3IodXJsKTtcbiAgcmV0dXJuIGFuY2hvciAhPSBudWxsID8gdXJsLmhyZWYuc2xpY2UoMCwgLShhbmNob3IubGVuZ3RoICsgMSkpIDogdXJsLmhyZWZcbn1cblxuZnVuY3Rpb24gdG9DYWNoZUtleSh1cmwpIHtcbiAgcmV0dXJuIGdldFJlcXVlc3RVUkwodXJsKVxufVxuXG5mdW5jdGlvbiB1cmxzQXJlRXF1YWwobGVmdCwgcmlnaHQpIHtcbiAgcmV0dXJuIGV4cGFuZFVSTChsZWZ0KS5ocmVmID09IGV4cGFuZFVSTChyaWdodCkuaHJlZlxufVxuXG5mdW5jdGlvbiBnZXRQYXRoQ29tcG9uZW50cyh1cmwpIHtcbiAgcmV0dXJuIHVybC5wYXRobmFtZS5zcGxpdChcIi9cIikuc2xpY2UoMSlcbn1cblxuZnVuY3Rpb24gZ2V0TGFzdFBhdGhDb21wb25lbnQodXJsKSB7XG4gIHJldHVybiBnZXRQYXRoQ29tcG9uZW50cyh1cmwpLnNsaWNlKC0xKVswXVxufVxuXG5mdW5jdGlvbiBhZGRUcmFpbGluZ1NsYXNoKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZS5lbmRzV2l0aChcIi9cIikgPyB2YWx1ZSA6IHZhbHVlICsgXCIvXCJcbn1cblxuY2xhc3MgRmV0Y2hSZXNwb25zZSB7XG4gIGNvbnN0cnVjdG9yKHJlc3BvbnNlKSB7XG4gICAgdGhpcy5yZXNwb25zZSA9IHJlc3BvbnNlO1xuICB9XG5cbiAgZ2V0IHN1Y2NlZWRlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5yZXNwb25zZS5va1xuICB9XG5cbiAgZ2V0IGZhaWxlZCgpIHtcbiAgICByZXR1cm4gIXRoaXMuc3VjY2VlZGVkXG4gIH1cblxuICBnZXQgY2xpZW50RXJyb3IoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdHVzQ29kZSA+PSA0MDAgJiYgdGhpcy5zdGF0dXNDb2RlIDw9IDQ5OVxuICB9XG5cbiAgZ2V0IHNlcnZlckVycm9yKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXR1c0NvZGUgPj0gNTAwICYmIHRoaXMuc3RhdHVzQ29kZSA8PSA1OTlcbiAgfVxuXG4gIGdldCByZWRpcmVjdGVkKCkge1xuICAgIHJldHVybiB0aGlzLnJlc3BvbnNlLnJlZGlyZWN0ZWRcbiAgfVxuXG4gIGdldCBsb2NhdGlvbigpIHtcbiAgICByZXR1cm4gZXhwYW5kVVJMKHRoaXMucmVzcG9uc2UudXJsKVxuICB9XG5cbiAgZ2V0IGlzSFRNTCgpIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZW50VHlwZSAmJiB0aGlzLmNvbnRlbnRUeXBlLm1hdGNoKC9eKD86dGV4dFxcLyhbXlxcczssXStcXGIpP2h0bWx8YXBwbGljYXRpb25cXC94aHRtbFxcK3htbClcXGIvKVxuICB9XG5cbiAgZ2V0IHN0YXR1c0NvZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVzcG9uc2Uuc3RhdHVzXG4gIH1cblxuICBnZXQgY29udGVudFR5cGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGVhZGVyKFwiQ29udGVudC1UeXBlXCIpXG4gIH1cblxuICBnZXQgcmVzcG9uc2VUZXh0KCkge1xuICAgIHJldHVybiB0aGlzLnJlc3BvbnNlLmNsb25lKCkudGV4dCgpXG4gIH1cblxuICBnZXQgcmVzcG9uc2VIVE1MKCkge1xuICAgIGlmICh0aGlzLmlzSFRNTCkge1xuICAgICAgcmV0dXJuIHRoaXMucmVzcG9uc2UuY2xvbmUoKS50ZXh0KClcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh1bmRlZmluZWQpXG4gICAgfVxuICB9XG5cbiAgaGVhZGVyKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5yZXNwb25zZS5oZWFkZXJzLmdldChuYW1lKVxuICB9XG59XG5cbmNsYXNzIExpbWl0ZWRTZXQgZXh0ZW5kcyBTZXQge1xuICBjb25zdHJ1Y3RvcihtYXhTaXplKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLm1heFNpemUgPSBtYXhTaXplO1xuICB9XG5cbiAgYWRkKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuc2l6ZSA+PSB0aGlzLm1heFNpemUpIHtcbiAgICAgIGNvbnN0IGl0ZXJhdG9yID0gdGhpcy52YWx1ZXMoKTtcbiAgICAgIGNvbnN0IG9sZGVzdFZhbHVlID0gaXRlcmF0b3IubmV4dCgpLnZhbHVlO1xuICAgICAgdGhpcy5kZWxldGUob2xkZXN0VmFsdWUpO1xuICAgIH1cbiAgICBzdXBlci5hZGQodmFsdWUpO1xuICB9XG59XG5cbmNvbnN0IHJlY2VudFJlcXVlc3RzID0gbmV3IExpbWl0ZWRTZXQoMjApO1xuXG5mdW5jdGlvbiBmZXRjaFdpdGhUdXJib0hlYWRlcnModXJsLCBvcHRpb25zID0ge30pIHtcbiAgY29uc3QgbW9kaWZpZWRIZWFkZXJzID0gbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzIHx8IHt9KTtcbiAgY29uc3QgcmVxdWVzdFVJRCA9IHV1aWQoKTtcbiAgcmVjZW50UmVxdWVzdHMuYWRkKHJlcXVlc3RVSUQpO1xuICBtb2RpZmllZEhlYWRlcnMuYXBwZW5kKFwiWC1UdXJiby1SZXF1ZXN0LUlkXCIsIHJlcXVlc3RVSUQpO1xuXG4gIHJldHVybiB3aW5kb3cuZmV0Y2godXJsLCB7XG4gICAgLi4ub3B0aW9ucyxcbiAgICBoZWFkZXJzOiBtb2RpZmllZEhlYWRlcnNcbiAgfSlcbn1cblxuZnVuY3Rpb24gZmV0Y2hNZXRob2RGcm9tU3RyaW5nKG1ldGhvZCkge1xuICBzd2l0Y2ggKG1ldGhvZC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgY2FzZSBcImdldFwiOlxuICAgICAgcmV0dXJuIEZldGNoTWV0aG9kLmdldFxuICAgIGNhc2UgXCJwb3N0XCI6XG4gICAgICByZXR1cm4gRmV0Y2hNZXRob2QucG9zdFxuICAgIGNhc2UgXCJwdXRcIjpcbiAgICAgIHJldHVybiBGZXRjaE1ldGhvZC5wdXRcbiAgICBjYXNlIFwicGF0Y2hcIjpcbiAgICAgIHJldHVybiBGZXRjaE1ldGhvZC5wYXRjaFxuICAgIGNhc2UgXCJkZWxldGVcIjpcbiAgICAgIHJldHVybiBGZXRjaE1ldGhvZC5kZWxldGVcbiAgfVxufVxuXG5jb25zdCBGZXRjaE1ldGhvZCA9IHtcbiAgZ2V0OiBcImdldFwiLFxuICBwb3N0OiBcInBvc3RcIixcbiAgcHV0OiBcInB1dFwiLFxuICBwYXRjaDogXCJwYXRjaFwiLFxuICBkZWxldGU6IFwiZGVsZXRlXCJcbn07XG5cbmZ1bmN0aW9uIGZldGNoRW5jdHlwZUZyb21TdHJpbmcoZW5jb2RpbmcpIHtcbiAgc3dpdGNoIChlbmNvZGluZy50b0xvd2VyQ2FzZSgpKSB7XG4gICAgY2FzZSBGZXRjaEVuY3R5cGUubXVsdGlwYXJ0OlxuICAgICAgcmV0dXJuIEZldGNoRW5jdHlwZS5tdWx0aXBhcnRcbiAgICBjYXNlIEZldGNoRW5jdHlwZS5wbGFpbjpcbiAgICAgIHJldHVybiBGZXRjaEVuY3R5cGUucGxhaW5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIEZldGNoRW5jdHlwZS51cmxFbmNvZGVkXG4gIH1cbn1cblxuY29uc3QgRmV0Y2hFbmN0eXBlID0ge1xuICB1cmxFbmNvZGVkOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLFxuICBtdWx0aXBhcnQ6IFwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiLFxuICBwbGFpbjogXCJ0ZXh0L3BsYWluXCJcbn07XG5cbmNsYXNzIEZldGNoUmVxdWVzdCB7XG4gIGFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKVxuICAjcmVzb2x2ZVJlcXVlc3RQcm9taXNlID0gKF92YWx1ZSkgPT4ge31cblxuICBjb25zdHJ1Y3RvcihkZWxlZ2F0ZSwgbWV0aG9kLCBsb2NhdGlvbiwgcmVxdWVzdEJvZHkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCksIHRhcmdldCA9IG51bGwsIGVuY3R5cGUgPSBGZXRjaEVuY3R5cGUudXJsRW5jb2RlZCkge1xuICAgIGNvbnN0IFt1cmwsIGJvZHldID0gYnVpbGRSZXNvdXJjZUFuZEJvZHkoZXhwYW5kVVJMKGxvY2F0aW9uKSwgbWV0aG9kLCByZXF1ZXN0Qm9keSwgZW5jdHlwZSk7XG5cbiAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gICAgdGhpcy51cmwgPSB1cmw7XG4gICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgdGhpcy5mZXRjaE9wdGlvbnMgPSB7XG4gICAgICBjcmVkZW50aWFsczogXCJzYW1lLW9yaWdpblwiLFxuICAgICAgcmVkaXJlY3Q6IFwiZm9sbG93XCIsXG4gICAgICBtZXRob2Q6IG1ldGhvZC50b1VwcGVyQ2FzZSgpLFxuICAgICAgaGVhZGVyczogeyAuLi50aGlzLmRlZmF1bHRIZWFkZXJzIH0sXG4gICAgICBib2R5OiBib2R5LFxuICAgICAgc2lnbmFsOiB0aGlzLmFib3J0U2lnbmFsLFxuICAgICAgcmVmZXJyZXI6IHRoaXMuZGVsZWdhdGUucmVmZXJyZXI/LmhyZWZcbiAgICB9O1xuICAgIHRoaXMuZW5jdHlwZSA9IGVuY3R5cGU7XG4gIH1cblxuICBnZXQgbWV0aG9kKCkge1xuICAgIHJldHVybiB0aGlzLmZldGNoT3B0aW9ucy5tZXRob2RcbiAgfVxuXG4gIHNldCBtZXRob2QodmFsdWUpIHtcbiAgICBjb25zdCBmZXRjaEJvZHkgPSB0aGlzLmlzU2FmZSA/IHRoaXMudXJsLnNlYXJjaFBhcmFtcyA6IHRoaXMuZmV0Y2hPcHRpb25zLmJvZHkgfHwgbmV3IEZvcm1EYXRhKCk7XG4gICAgY29uc3QgZmV0Y2hNZXRob2QgPSBmZXRjaE1ldGhvZEZyb21TdHJpbmcodmFsdWUpIHx8IEZldGNoTWV0aG9kLmdldDtcblxuICAgIHRoaXMudXJsLnNlYXJjaCA9IFwiXCI7XG5cbiAgICBjb25zdCBbdXJsLCBib2R5XSA9IGJ1aWxkUmVzb3VyY2VBbmRCb2R5KHRoaXMudXJsLCBmZXRjaE1ldGhvZCwgZmV0Y2hCb2R5LCB0aGlzLmVuY3R5cGUpO1xuXG4gICAgdGhpcy51cmwgPSB1cmw7XG4gICAgdGhpcy5mZXRjaE9wdGlvbnMuYm9keSA9IGJvZHk7XG4gICAgdGhpcy5mZXRjaE9wdGlvbnMubWV0aG9kID0gZmV0Y2hNZXRob2QudG9VcHBlckNhc2UoKTtcbiAgfVxuXG4gIGdldCBoZWFkZXJzKCkge1xuICAgIHJldHVybiB0aGlzLmZldGNoT3B0aW9ucy5oZWFkZXJzXG4gIH1cblxuICBzZXQgaGVhZGVycyh2YWx1ZSkge1xuICAgIHRoaXMuZmV0Y2hPcHRpb25zLmhlYWRlcnMgPSB2YWx1ZTtcbiAgfVxuXG4gIGdldCBib2R5KCkge1xuICAgIGlmICh0aGlzLmlzU2FmZSkge1xuICAgICAgcmV0dXJuIHRoaXMudXJsLnNlYXJjaFBhcmFtc1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5mZXRjaE9wdGlvbnMuYm9keVxuICAgIH1cbiAgfVxuXG4gIHNldCBib2R5KHZhbHVlKSB7XG4gICAgdGhpcy5mZXRjaE9wdGlvbnMuYm9keSA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IGxvY2F0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnVybFxuICB9XG5cbiAgZ2V0IHBhcmFtcygpIHtcbiAgICByZXR1cm4gdGhpcy51cmwuc2VhcmNoUGFyYW1zXG4gIH1cblxuICBnZXQgZW50cmllcygpIHtcbiAgICByZXR1cm4gdGhpcy5ib2R5ID8gQXJyYXkuZnJvbSh0aGlzLmJvZHkuZW50cmllcygpKSA6IFtdXG4gIH1cblxuICBjYW5jZWwoKSB7XG4gICAgdGhpcy5hYm9ydENvbnRyb2xsZXIuYWJvcnQoKTtcbiAgfVxuXG4gIGFzeW5jIHBlcmZvcm0oKSB7XG4gICAgY29uc3QgeyBmZXRjaE9wdGlvbnMgfSA9IHRoaXM7XG4gICAgdGhpcy5kZWxlZ2F0ZS5wcmVwYXJlUmVxdWVzdCh0aGlzKTtcbiAgICBjb25zdCBldmVudCA9IGF3YWl0IHRoaXMuI2FsbG93UmVxdWVzdFRvQmVJbnRlcmNlcHRlZChmZXRjaE9wdGlvbnMpO1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmRlbGVnYXRlLnJlcXVlc3RTdGFydGVkKHRoaXMpO1xuXG4gICAgICBpZiAoZXZlbnQuZGV0YWlsLmZldGNoUmVxdWVzdCkge1xuICAgICAgICB0aGlzLnJlc3BvbnNlID0gZXZlbnQuZGV0YWlsLmZldGNoUmVxdWVzdC5yZXNwb25zZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVzcG9uc2UgPSBmZXRjaFdpdGhUdXJib0hlYWRlcnModGhpcy51cmwuaHJlZiwgZmV0Y2hPcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlc3BvbnNlO1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucmVjZWl2ZShyZXNwb25zZSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yLm5hbWUgIT09IFwiQWJvcnRFcnJvclwiKSB7XG4gICAgICAgIGlmICh0aGlzLiN3aWxsRGVsZWdhdGVFcnJvckhhbmRsaW5nKGVycm9yKSkge1xuICAgICAgICAgIHRoaXMuZGVsZWdhdGUucmVxdWVzdEVycm9yZWQodGhpcywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IGVycm9yXG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuZGVsZWdhdGUucmVxdWVzdEZpbmlzaGVkKHRoaXMpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlY2VpdmUocmVzcG9uc2UpIHtcbiAgICBjb25zdCBmZXRjaFJlc3BvbnNlID0gbmV3IEZldGNoUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgIGNvbnN0IGV2ZW50ID0gZGlzcGF0Y2goXCJ0dXJibzpiZWZvcmUtZmV0Y2gtcmVzcG9uc2VcIiwge1xuICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICAgIGRldGFpbDogeyBmZXRjaFJlc3BvbnNlIH0sXG4gICAgICB0YXJnZXQ6IHRoaXMudGFyZ2V0XG4gICAgfSk7XG4gICAgaWYgKGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgIHRoaXMuZGVsZWdhdGUucmVxdWVzdFByZXZlbnRlZEhhbmRsaW5nUmVzcG9uc2UodGhpcywgZmV0Y2hSZXNwb25zZSk7XG4gICAgfSBlbHNlIGlmIChmZXRjaFJlc3BvbnNlLnN1Y2NlZWRlZCkge1xuICAgICAgdGhpcy5kZWxlZ2F0ZS5yZXF1ZXN0U3VjY2VlZGVkV2l0aFJlc3BvbnNlKHRoaXMsIGZldGNoUmVzcG9uc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRlbGVnYXRlLnJlcXVlc3RGYWlsZWRXaXRoUmVzcG9uc2UodGhpcywgZmV0Y2hSZXNwb25zZSk7XG4gICAgfVxuICAgIHJldHVybiBmZXRjaFJlc3BvbnNlXG4gIH1cblxuICBnZXQgZGVmYXVsdEhlYWRlcnMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIEFjY2VwdDogXCJ0ZXh0L2h0bWwsIGFwcGxpY2F0aW9uL3hodG1sK3htbFwiXG4gICAgfVxuICB9XG5cbiAgZ2V0IGlzU2FmZSgpIHtcbiAgICByZXR1cm4gaXNTYWZlKHRoaXMubWV0aG9kKVxuICB9XG5cbiAgZ2V0IGFib3J0U2lnbmFsKCkge1xuICAgIHJldHVybiB0aGlzLmFib3J0Q29udHJvbGxlci5zaWduYWxcbiAgfVxuXG4gIGFjY2VwdFJlc3BvbnNlVHlwZShtaW1lVHlwZSkge1xuICAgIHRoaXMuaGVhZGVyc1tcIkFjY2VwdFwiXSA9IFttaW1lVHlwZSwgdGhpcy5oZWFkZXJzW1wiQWNjZXB0XCJdXS5qb2luKFwiLCBcIik7XG4gIH1cblxuICBhc3luYyAjYWxsb3dSZXF1ZXN0VG9CZUludGVyY2VwdGVkKGZldGNoT3B0aW9ucykge1xuICAgIGNvbnN0IHJlcXVlc3RJbnRlcmNlcHRpb24gPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gKHRoaXMuI3Jlc29sdmVSZXF1ZXN0UHJvbWlzZSA9IHJlc29sdmUpKTtcbiAgICBjb25zdCBldmVudCA9IGRpc3BhdGNoKFwidHVyYm86YmVmb3JlLWZldGNoLXJlcXVlc3RcIiwge1xuICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICAgIGRldGFpbDoge1xuICAgICAgICBmZXRjaE9wdGlvbnMsXG4gICAgICAgIHVybDogdGhpcy51cmwsXG4gICAgICAgIHJlc3VtZTogdGhpcy4jcmVzb2x2ZVJlcXVlc3RQcm9taXNlXG4gICAgICB9LFxuICAgICAgdGFyZ2V0OiB0aGlzLnRhcmdldFxuICAgIH0pO1xuICAgIHRoaXMudXJsID0gZXZlbnQuZGV0YWlsLnVybDtcbiAgICBpZiAoZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgYXdhaXQgcmVxdWVzdEludGVyY2VwdGlvbjtcblxuICAgIHJldHVybiBldmVudFxuICB9XG5cbiAgI3dpbGxEZWxlZ2F0ZUVycm9ySGFuZGxpbmcoZXJyb3IpIHtcbiAgICBjb25zdCBldmVudCA9IGRpc3BhdGNoKFwidHVyYm86ZmV0Y2gtcmVxdWVzdC1lcnJvclwiLCB7XG4gICAgICB0YXJnZXQ6IHRoaXMudGFyZ2V0LFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICAgIGRldGFpbDogeyByZXF1ZXN0OiB0aGlzLCBlcnJvcjogZXJyb3IgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuICFldmVudC5kZWZhdWx0UHJldmVudGVkXG4gIH1cbn1cblxuZnVuY3Rpb24gaXNTYWZlKGZldGNoTWV0aG9kKSB7XG4gIHJldHVybiBmZXRjaE1ldGhvZEZyb21TdHJpbmcoZmV0Y2hNZXRob2QpID09IEZldGNoTWV0aG9kLmdldFxufVxuXG5mdW5jdGlvbiBidWlsZFJlc291cmNlQW5kQm9keShyZXNvdXJjZSwgbWV0aG9kLCByZXF1ZXN0Qm9keSwgZW5jdHlwZSkge1xuICBjb25zdCBzZWFyY2hQYXJhbXMgPVxuICAgIEFycmF5LmZyb20ocmVxdWVzdEJvZHkpLmxlbmd0aCA+IDAgPyBuZXcgVVJMU2VhcmNoUGFyYW1zKGVudHJpZXNFeGNsdWRpbmdGaWxlcyhyZXF1ZXN0Qm9keSkpIDogcmVzb3VyY2Uuc2VhcmNoUGFyYW1zO1xuXG4gIGlmIChpc1NhZmUobWV0aG9kKSkge1xuICAgIHJldHVybiBbbWVyZ2VJbnRvVVJMU2VhcmNoUGFyYW1zKHJlc291cmNlLCBzZWFyY2hQYXJhbXMpLCBudWxsXVxuICB9IGVsc2UgaWYgKGVuY3R5cGUgPT0gRmV0Y2hFbmN0eXBlLnVybEVuY29kZWQpIHtcbiAgICByZXR1cm4gW3Jlc291cmNlLCBzZWFyY2hQYXJhbXNdXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFtyZXNvdXJjZSwgcmVxdWVzdEJvZHldXG4gIH1cbn1cblxuZnVuY3Rpb24gZW50cmllc0V4Y2x1ZGluZ0ZpbGVzKHJlcXVlc3RCb2R5KSB7XG4gIGNvbnN0IGVudHJpZXMgPSBbXTtcblxuICBmb3IgKGNvbnN0IFtuYW1lLCB2YWx1ZV0gb2YgcmVxdWVzdEJvZHkpIHtcbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBGaWxlKSBjb250aW51ZVxuICAgIGVsc2UgZW50cmllcy5wdXNoKFtuYW1lLCB2YWx1ZV0pO1xuICB9XG5cbiAgcmV0dXJuIGVudHJpZXNcbn1cblxuZnVuY3Rpb24gbWVyZ2VJbnRvVVJMU2VhcmNoUGFyYW1zKHVybCwgcmVxdWVzdEJvZHkpIHtcbiAgY29uc3Qgc2VhcmNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhlbnRyaWVzRXhjbHVkaW5nRmlsZXMocmVxdWVzdEJvZHkpKTtcblxuICB1cmwuc2VhcmNoID0gc2VhcmNoUGFyYW1zLnRvU3RyaW5nKCk7XG5cbiAgcmV0dXJuIHVybFxufVxuXG5jbGFzcyBBcHBlYXJhbmNlT2JzZXJ2ZXIge1xuICBzdGFydGVkID0gZmFsc2VcblxuICBjb25zdHJ1Y3RvcihkZWxlZ2F0ZSwgZWxlbWVudCkge1xuICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIodGhpcy5pbnRlcnNlY3QpO1xuICB9XG5cbiAgc3RhcnQoKSB7XG4gICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XG4gICAgICB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyLm9ic2VydmUodGhpcy5lbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBzdG9wKCkge1xuICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlci51bm9ic2VydmUodGhpcy5lbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBpbnRlcnNlY3QgPSAoZW50cmllcykgPT4ge1xuICAgIGNvbnN0IGxhc3RFbnRyeSA9IGVudHJpZXMuc2xpY2UoLTEpWzBdO1xuICAgIGlmIChsYXN0RW50cnk/LmlzSW50ZXJzZWN0aW5nKSB7XG4gICAgICB0aGlzLmRlbGVnYXRlLmVsZW1lbnRBcHBlYXJlZEluVmlld3BvcnQodGhpcy5lbGVtZW50KTtcbiAgICB9XG4gIH1cbn1cblxuY2xhc3MgU3RyZWFtTWVzc2FnZSB7XG4gIHN0YXRpYyBjb250ZW50VHlwZSA9IFwidGV4dC92bmQudHVyYm8tc3RyZWFtLmh0bWxcIlxuXG4gIHN0YXRpYyB3cmFwKG1lc3NhZ2UpIHtcbiAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIG5ldyB0aGlzKGNyZWF0ZURvY3VtZW50RnJhZ21lbnQobWVzc2FnZSkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBtZXNzYWdlXG4gICAgfVxuICB9XG5cbiAgY29uc3RydWN0b3IoZnJhZ21lbnQpIHtcbiAgICB0aGlzLmZyYWdtZW50ID0gaW1wb3J0U3RyZWFtRWxlbWVudHMoZnJhZ21lbnQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGltcG9ydFN0cmVhbUVsZW1lbnRzKGZyYWdtZW50KSB7XG4gIGZvciAoY29uc3QgZWxlbWVudCBvZiBmcmFnbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwidHVyYm8tc3RyZWFtXCIpKSB7XG4gICAgY29uc3Qgc3RyZWFtRWxlbWVudCA9IGRvY3VtZW50LmltcG9ydE5vZGUoZWxlbWVudCwgdHJ1ZSk7XG5cbiAgICBmb3IgKGNvbnN0IGluZXJ0U2NyaXB0RWxlbWVudCBvZiBzdHJlYW1FbGVtZW50LnRlbXBsYXRlRWxlbWVudC5jb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJzY3JpcHRcIikpIHtcbiAgICAgIGluZXJ0U2NyaXB0RWxlbWVudC5yZXBsYWNlV2l0aChhY3RpdmF0ZVNjcmlwdEVsZW1lbnQoaW5lcnRTY3JpcHRFbGVtZW50KSk7XG4gICAgfVxuXG4gICAgZWxlbWVudC5yZXBsYWNlV2l0aChzdHJlYW1FbGVtZW50KTtcbiAgfVxuXG4gIHJldHVybiBmcmFnbWVudFxufVxuXG5jb25zdCBQUkVGRVRDSF9ERUxBWSA9IDEwMDtcblxuY2xhc3MgUHJlZmV0Y2hDYWNoZSB7XG4gICNwcmVmZXRjaFRpbWVvdXQgPSBudWxsXG4gICNwcmVmZXRjaGVkID0gbnVsbFxuXG4gIGdldCh1cmwpIHtcbiAgICBpZiAodGhpcy4jcHJlZmV0Y2hlZCAmJiB0aGlzLiNwcmVmZXRjaGVkLnVybCA9PT0gdXJsICYmIHRoaXMuI3ByZWZldGNoZWQuZXhwaXJlID4gRGF0ZS5ub3coKSkge1xuICAgICAgcmV0dXJuIHRoaXMuI3ByZWZldGNoZWQucmVxdWVzdFxuICAgIH1cbiAgfVxuXG4gIHNldExhdGVyKHVybCwgcmVxdWVzdCwgdHRsKSB7XG4gICAgdGhpcy5jbGVhcigpO1xuXG4gICAgdGhpcy4jcHJlZmV0Y2hUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICByZXF1ZXN0LnBlcmZvcm0oKTtcbiAgICAgIHRoaXMuc2V0KHVybCwgcmVxdWVzdCwgdHRsKTtcbiAgICAgIHRoaXMuI3ByZWZldGNoVGltZW91dCA9IG51bGw7XG4gICAgfSwgUFJFRkVUQ0hfREVMQVkpO1xuICB9XG5cbiAgc2V0KHVybCwgcmVxdWVzdCwgdHRsKSB7XG4gICAgdGhpcy4jcHJlZmV0Y2hlZCA9IHsgdXJsLCByZXF1ZXN0LCBleHBpcmU6IG5ldyBEYXRlKG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgdHRsKSB9O1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgaWYgKHRoaXMuI3ByZWZldGNoVGltZW91dCkgY2xlYXJUaW1lb3V0KHRoaXMuI3ByZWZldGNoVGltZW91dCk7XG4gICAgdGhpcy4jcHJlZmV0Y2hlZCA9IG51bGw7XG4gIH1cbn1cblxuY29uc3QgY2FjaGVUdGwgPSAxMCAqIDEwMDA7XG5jb25zdCBwcmVmZXRjaENhY2hlID0gbmV3IFByZWZldGNoQ2FjaGUoKTtcblxuY29uc3QgRm9ybVN1Ym1pc3Npb25TdGF0ZSA9IHtcbiAgaW5pdGlhbGl6ZWQ6IFwiaW5pdGlhbGl6ZWRcIixcbiAgcmVxdWVzdGluZzogXCJyZXF1ZXN0aW5nXCIsXG4gIHdhaXRpbmc6IFwid2FpdGluZ1wiLFxuICByZWNlaXZpbmc6IFwicmVjZWl2aW5nXCIsXG4gIHN0b3BwaW5nOiBcInN0b3BwaW5nXCIsXG4gIHN0b3BwZWQ6IFwic3RvcHBlZFwiXG59O1xuXG5jbGFzcyBGb3JtU3VibWlzc2lvbiB7XG4gIHN0YXRlID0gRm9ybVN1Ym1pc3Npb25TdGF0ZS5pbml0aWFsaXplZFxuXG4gIHN0YXRpYyBjb25maXJtTWV0aG9kKG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNvbmZpcm0obWVzc2FnZSkpXG4gIH1cblxuICBjb25zdHJ1Y3RvcihkZWxlZ2F0ZSwgZm9ybUVsZW1lbnQsIHN1Ym1pdHRlciwgbXVzdFJlZGlyZWN0ID0gZmFsc2UpIHtcbiAgICBjb25zdCBtZXRob2QgPSBnZXRNZXRob2QoZm9ybUVsZW1lbnQsIHN1Ym1pdHRlcik7XG4gICAgY29uc3QgYWN0aW9uID0gZ2V0QWN0aW9uKGdldEZvcm1BY3Rpb24oZm9ybUVsZW1lbnQsIHN1Ym1pdHRlciksIG1ldGhvZCk7XG4gICAgY29uc3QgYm9keSA9IGJ1aWxkRm9ybURhdGEoZm9ybUVsZW1lbnQsIHN1Ym1pdHRlcik7XG4gICAgY29uc3QgZW5jdHlwZSA9IGdldEVuY3R5cGUoZm9ybUVsZW1lbnQsIHN1Ym1pdHRlcik7XG5cbiAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gICAgdGhpcy5mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuc3VibWl0dGVyID0gc3VibWl0dGVyO1xuICAgIHRoaXMuZmV0Y2hSZXF1ZXN0ID0gbmV3IEZldGNoUmVxdWVzdCh0aGlzLCBtZXRob2QsIGFjdGlvbiwgYm9keSwgZm9ybUVsZW1lbnQsIGVuY3R5cGUpO1xuICAgIHRoaXMubXVzdFJlZGlyZWN0ID0gbXVzdFJlZGlyZWN0O1xuICB9XG5cbiAgZ2V0IG1ldGhvZCgpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaFJlcXVlc3QubWV0aG9kXG4gIH1cblxuICBzZXQgbWV0aG9kKHZhbHVlKSB7XG4gICAgdGhpcy5mZXRjaFJlcXVlc3QubWV0aG9kID0gdmFsdWU7XG4gIH1cblxuICBnZXQgYWN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmZldGNoUmVxdWVzdC51cmwudG9TdHJpbmcoKVxuICB9XG5cbiAgc2V0IGFjdGlvbih2YWx1ZSkge1xuICAgIHRoaXMuZmV0Y2hSZXF1ZXN0LnVybCA9IGV4cGFuZFVSTCh2YWx1ZSk7XG4gIH1cblxuICBnZXQgYm9keSgpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaFJlcXVlc3QuYm9keVxuICB9XG5cbiAgZ2V0IGVuY3R5cGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hSZXF1ZXN0LmVuY3R5cGVcbiAgfVxuXG4gIGdldCBpc1NhZmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hSZXF1ZXN0LmlzU2FmZVxuICB9XG5cbiAgZ2V0IGxvY2F0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmZldGNoUmVxdWVzdC51cmxcbiAgfVxuXG4gIC8vIFRoZSBzdWJtaXNzaW9uIHByb2Nlc3NcblxuICBhc3luYyBzdGFydCgpIHtcbiAgICBjb25zdCB7IGluaXRpYWxpemVkLCByZXF1ZXN0aW5nIH0gPSBGb3JtU3VibWlzc2lvblN0YXRlO1xuICAgIGNvbnN0IGNvbmZpcm1hdGlvbk1lc3NhZ2UgPSBnZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLWNvbmZpcm1cIiwgdGhpcy5zdWJtaXR0ZXIsIHRoaXMuZm9ybUVsZW1lbnQpO1xuXG4gICAgaWYgKHR5cGVvZiBjb25maXJtYXRpb25NZXNzYWdlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBjb25zdCBjb25maXJtTWV0aG9kID0gdHlwZW9mIGNvbmZpZy5mb3Jtcy5jb25maXJtID09PSBcImZ1bmN0aW9uXCIgP1xuICAgICAgICBjb25maWcuZm9ybXMuY29uZmlybSA6XG4gICAgICAgIEZvcm1TdWJtaXNzaW9uLmNvbmZpcm1NZXRob2Q7XG5cbiAgICAgIGNvbnN0IGFuc3dlciA9IGF3YWl0IGNvbmZpcm1NZXRob2QoY29uZmlybWF0aW9uTWVzc2FnZSwgdGhpcy5mb3JtRWxlbWVudCwgdGhpcy5zdWJtaXR0ZXIpO1xuICAgICAgaWYgKCFhbnN3ZXIpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdGUgPT0gaW5pdGlhbGl6ZWQpIHtcbiAgICAgIHRoaXMuc3RhdGUgPSByZXF1ZXN0aW5nO1xuICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hSZXF1ZXN0LnBlcmZvcm0oKVxuICAgIH1cbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgY29uc3QgeyBzdG9wcGluZywgc3RvcHBlZCB9ID0gRm9ybVN1Ym1pc3Npb25TdGF0ZTtcbiAgICBpZiAodGhpcy5zdGF0ZSAhPSBzdG9wcGluZyAmJiB0aGlzLnN0YXRlICE9IHN0b3BwZWQpIHtcbiAgICAgIHRoaXMuc3RhdGUgPSBzdG9wcGluZztcbiAgICAgIHRoaXMuZmV0Y2hSZXF1ZXN0LmNhbmNlbCgpO1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cblxuICAvLyBGZXRjaCByZXF1ZXN0IGRlbGVnYXRlXG5cbiAgcHJlcGFyZVJlcXVlc3QocmVxdWVzdCkge1xuICAgIGlmICghcmVxdWVzdC5pc1NhZmUpIHtcbiAgICAgIGNvbnN0IHRva2VuID0gZ2V0Q29va2llVmFsdWUoZ2V0TWV0YUNvbnRlbnQoXCJjc3JmLXBhcmFtXCIpKSB8fCBnZXRNZXRhQ29udGVudChcImNzcmYtdG9rZW5cIik7XG4gICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgcmVxdWVzdC5oZWFkZXJzW1wiWC1DU1JGLVRva2VuXCJdID0gdG9rZW47XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucmVxdWVzdEFjY2VwdHNUdXJib1N0cmVhbVJlc3BvbnNlKHJlcXVlc3QpKSB7XG4gICAgICByZXF1ZXN0LmFjY2VwdFJlc3BvbnNlVHlwZShTdHJlYW1NZXNzYWdlLmNvbnRlbnRUeXBlKTtcbiAgICB9XG4gIH1cblxuICByZXF1ZXN0U3RhcnRlZChfcmVxdWVzdCkge1xuICAgIHRoaXMuc3RhdGUgPSBGb3JtU3VibWlzc2lvblN0YXRlLndhaXRpbmc7XG4gICAgaWYgKHRoaXMuc3VibWl0dGVyKSBjb25maWcuZm9ybXMuc3VibWl0dGVyLmJlZm9yZVN1Ym1pdCh0aGlzLnN1Ym1pdHRlcik7XG4gICAgdGhpcy5zZXRTdWJtaXRzV2l0aCgpO1xuICAgIG1hcmtBc0J1c3kodGhpcy5mb3JtRWxlbWVudCk7XG4gICAgZGlzcGF0Y2goXCJ0dXJibzpzdWJtaXQtc3RhcnRcIiwge1xuICAgICAgdGFyZ2V0OiB0aGlzLmZvcm1FbGVtZW50LFxuICAgICAgZGV0YWlsOiB7IGZvcm1TdWJtaXNzaW9uOiB0aGlzIH1cbiAgICB9KTtcbiAgICB0aGlzLmRlbGVnYXRlLmZvcm1TdWJtaXNzaW9uU3RhcnRlZCh0aGlzKTtcbiAgfVxuXG4gIHJlcXVlc3RQcmV2ZW50ZWRIYW5kbGluZ1Jlc3BvbnNlKHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gICAgcHJlZmV0Y2hDYWNoZS5jbGVhcigpO1xuXG4gICAgdGhpcy5yZXN1bHQgPSB7IHN1Y2Nlc3M6IHJlc3BvbnNlLnN1Y2NlZWRlZCwgZmV0Y2hSZXNwb25zZTogcmVzcG9uc2UgfTtcbiAgfVxuXG4gIHJlcXVlc3RTdWNjZWVkZWRXaXRoUmVzcG9uc2UocmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgICBpZiAocmVzcG9uc2UuY2xpZW50RXJyb3IgfHwgcmVzcG9uc2Uuc2VydmVyRXJyb3IpIHtcbiAgICAgIHRoaXMuZGVsZWdhdGUuZm9ybVN1Ym1pc3Npb25GYWlsZWRXaXRoUmVzcG9uc2UodGhpcywgcmVzcG9uc2UpO1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgcHJlZmV0Y2hDYWNoZS5jbGVhcigpO1xuXG4gICAgaWYgKHRoaXMucmVxdWVzdE11c3RSZWRpcmVjdChyZXF1ZXN0KSAmJiByZXNwb25zZVN1Y2NlZWRlZFdpdGhvdXRSZWRpcmVjdChyZXNwb25zZSkpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFwiRm9ybSByZXNwb25zZXMgbXVzdCByZWRpcmVjdCB0byBhbm90aGVyIGxvY2F0aW9uXCIpO1xuICAgICAgdGhpcy5kZWxlZ2F0ZS5mb3JtU3VibWlzc2lvbkVycm9yZWQodGhpcywgZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0YXRlID0gRm9ybVN1Ym1pc3Npb25TdGF0ZS5yZWNlaXZpbmc7XG4gICAgICB0aGlzLnJlc3VsdCA9IHsgc3VjY2VzczogdHJ1ZSwgZmV0Y2hSZXNwb25zZTogcmVzcG9uc2UgfTtcbiAgICAgIHRoaXMuZGVsZWdhdGUuZm9ybVN1Ym1pc3Npb25TdWNjZWVkZWRXaXRoUmVzcG9uc2UodGhpcywgcmVzcG9uc2UpO1xuICAgIH1cbiAgfVxuXG4gIHJlcXVlc3RGYWlsZWRXaXRoUmVzcG9uc2UocmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgICB0aGlzLnJlc3VsdCA9IHsgc3VjY2VzczogZmFsc2UsIGZldGNoUmVzcG9uc2U6IHJlc3BvbnNlIH07XG4gICAgdGhpcy5kZWxlZ2F0ZS5mb3JtU3VibWlzc2lvbkZhaWxlZFdpdGhSZXNwb25zZSh0aGlzLCByZXNwb25zZSk7XG4gIH1cblxuICByZXF1ZXN0RXJyb3JlZChyZXF1ZXN0LCBlcnJvcikge1xuICAgIHRoaXMucmVzdWx0ID0geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3IgfTtcbiAgICB0aGlzLmRlbGVnYXRlLmZvcm1TdWJtaXNzaW9uRXJyb3JlZCh0aGlzLCBlcnJvcik7XG4gIH1cblxuICByZXF1ZXN0RmluaXNoZWQoX3JlcXVlc3QpIHtcbiAgICB0aGlzLnN0YXRlID0gRm9ybVN1Ym1pc3Npb25TdGF0ZS5zdG9wcGVkO1xuICAgIGlmICh0aGlzLnN1Ym1pdHRlcikgY29uZmlnLmZvcm1zLnN1Ym1pdHRlci5hZnRlclN1Ym1pdCh0aGlzLnN1Ym1pdHRlcik7XG4gICAgdGhpcy5yZXNldFN1Ym1pdHRlclRleHQoKTtcbiAgICBjbGVhckJ1c3lTdGF0ZSh0aGlzLmZvcm1FbGVtZW50KTtcbiAgICBkaXNwYXRjaChcInR1cmJvOnN1Ym1pdC1lbmRcIiwge1xuICAgICAgdGFyZ2V0OiB0aGlzLmZvcm1FbGVtZW50LFxuICAgICAgZGV0YWlsOiB7IGZvcm1TdWJtaXNzaW9uOiB0aGlzLCAuLi50aGlzLnJlc3VsdCB9XG4gICAgfSk7XG4gICAgdGhpcy5kZWxlZ2F0ZS5mb3JtU3VibWlzc2lvbkZpbmlzaGVkKHRoaXMpO1xuICB9XG5cbiAgLy8gUHJpdmF0ZVxuXG4gIHNldFN1Ym1pdHNXaXRoKCkge1xuICAgIGlmICghdGhpcy5zdWJtaXR0ZXIgfHwgIXRoaXMuc3VibWl0c1dpdGgpIHJldHVyblxuXG4gICAgaWYgKHRoaXMuc3VibWl0dGVyLm1hdGNoZXMoXCJidXR0b25cIikpIHtcbiAgICAgIHRoaXMub3JpZ2luYWxTdWJtaXRUZXh0ID0gdGhpcy5zdWJtaXR0ZXIuaW5uZXJIVE1MO1xuICAgICAgdGhpcy5zdWJtaXR0ZXIuaW5uZXJIVE1MID0gdGhpcy5zdWJtaXRzV2l0aDtcbiAgICB9IGVsc2UgaWYgKHRoaXMuc3VibWl0dGVyLm1hdGNoZXMoXCJpbnB1dFwiKSkge1xuICAgICAgY29uc3QgaW5wdXQgPSB0aGlzLnN1Ym1pdHRlcjtcbiAgICAgIHRoaXMub3JpZ2luYWxTdWJtaXRUZXh0ID0gaW5wdXQudmFsdWU7XG4gICAgICBpbnB1dC52YWx1ZSA9IHRoaXMuc3VibWl0c1dpdGg7XG4gICAgfVxuICB9XG5cbiAgcmVzZXRTdWJtaXR0ZXJUZXh0KCkge1xuICAgIGlmICghdGhpcy5zdWJtaXR0ZXIgfHwgIXRoaXMub3JpZ2luYWxTdWJtaXRUZXh0KSByZXR1cm5cblxuICAgIGlmICh0aGlzLnN1Ym1pdHRlci5tYXRjaGVzKFwiYnV0dG9uXCIpKSB7XG4gICAgICB0aGlzLnN1Ym1pdHRlci5pbm5lckhUTUwgPSB0aGlzLm9yaWdpbmFsU3VibWl0VGV4dDtcbiAgICB9IGVsc2UgaWYgKHRoaXMuc3VibWl0dGVyLm1hdGNoZXMoXCJpbnB1dFwiKSkge1xuICAgICAgY29uc3QgaW5wdXQgPSB0aGlzLnN1Ym1pdHRlcjtcbiAgICAgIGlucHV0LnZhbHVlID0gdGhpcy5vcmlnaW5hbFN1Ym1pdFRleHQ7XG4gICAgfVxuICB9XG5cbiAgcmVxdWVzdE11c3RSZWRpcmVjdChyZXF1ZXN0KSB7XG4gICAgcmV0dXJuICFyZXF1ZXN0LmlzU2FmZSAmJiB0aGlzLm11c3RSZWRpcmVjdFxuICB9XG5cbiAgcmVxdWVzdEFjY2VwdHNUdXJib1N0cmVhbVJlc3BvbnNlKHJlcXVlc3QpIHtcbiAgICByZXR1cm4gIXJlcXVlc3QuaXNTYWZlIHx8IGhhc0F0dHJpYnV0ZShcImRhdGEtdHVyYm8tc3RyZWFtXCIsIHRoaXMuc3VibWl0dGVyLCB0aGlzLmZvcm1FbGVtZW50KVxuICB9XG5cbiAgZ2V0IHN1Ym1pdHNXaXRoKCkge1xuICAgIHJldHVybiB0aGlzLnN1Ym1pdHRlcj8uZ2V0QXR0cmlidXRlKFwiZGF0YS10dXJiby1zdWJtaXRzLXdpdGhcIilcbiAgfVxufVxuXG5mdW5jdGlvbiBidWlsZEZvcm1EYXRhKGZvcm1FbGVtZW50LCBzdWJtaXR0ZXIpIHtcbiAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoZm9ybUVsZW1lbnQpO1xuICBjb25zdCBuYW1lID0gc3VibWl0dGVyPy5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xuICBjb25zdCB2YWx1ZSA9IHN1Ym1pdHRlcj8uZ2V0QXR0cmlidXRlKFwidmFsdWVcIik7XG5cbiAgaWYgKG5hbWUpIHtcbiAgICBmb3JtRGF0YS5hcHBlbmQobmFtZSwgdmFsdWUgfHwgXCJcIik7XG4gIH1cblxuICByZXR1cm4gZm9ybURhdGFcbn1cblxuZnVuY3Rpb24gZ2V0Q29va2llVmFsdWUoY29va2llTmFtZSkge1xuICBpZiAoY29va2llTmFtZSAhPSBudWxsKSB7XG4gICAgY29uc3QgY29va2llcyA9IGRvY3VtZW50LmNvb2tpZSA/IGRvY3VtZW50LmNvb2tpZS5zcGxpdChcIjsgXCIpIDogW107XG4gICAgY29uc3QgY29va2llID0gY29va2llcy5maW5kKChjb29raWUpID0+IGNvb2tpZS5zdGFydHNXaXRoKGNvb2tpZU5hbWUpKTtcbiAgICBpZiAoY29va2llKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGNvb2tpZS5zcGxpdChcIj1cIikuc2xpY2UoMSkuam9pbihcIj1cIik7XG4gICAgICByZXR1cm4gdmFsdWUgPyBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpIDogdW5kZWZpbmVkXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHJlc3BvbnNlU3VjY2VlZGVkV2l0aG91dFJlZGlyZWN0KHJlc3BvbnNlKSB7XG4gIHJldHVybiByZXNwb25zZS5zdGF0dXNDb2RlID09IDIwMCAmJiAhcmVzcG9uc2UucmVkaXJlY3RlZFxufVxuXG5mdW5jdGlvbiBnZXRGb3JtQWN0aW9uKGZvcm1FbGVtZW50LCBzdWJtaXR0ZXIpIHtcbiAgY29uc3QgZm9ybUVsZW1lbnRBY3Rpb24gPSB0eXBlb2YgZm9ybUVsZW1lbnQuYWN0aW9uID09PSBcInN0cmluZ1wiID8gZm9ybUVsZW1lbnQuYWN0aW9uIDogbnVsbDtcblxuICBpZiAoc3VibWl0dGVyPy5oYXNBdHRyaWJ1dGUoXCJmb3JtYWN0aW9uXCIpKSB7XG4gICAgcmV0dXJuIHN1Ym1pdHRlci5nZXRBdHRyaWJ1dGUoXCJmb3JtYWN0aW9uXCIpIHx8IFwiXCJcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiYWN0aW9uXCIpIHx8IGZvcm1FbGVtZW50QWN0aW9uIHx8IFwiXCJcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRBY3Rpb24oZm9ybUFjdGlvbiwgZmV0Y2hNZXRob2QpIHtcbiAgY29uc3QgYWN0aW9uID0gZXhwYW5kVVJMKGZvcm1BY3Rpb24pO1xuXG4gIGlmIChpc1NhZmUoZmV0Y2hNZXRob2QpKSB7XG4gICAgYWN0aW9uLnNlYXJjaCA9IFwiXCI7XG4gIH1cblxuICByZXR1cm4gYWN0aW9uXG59XG5cbmZ1bmN0aW9uIGdldE1ldGhvZChmb3JtRWxlbWVudCwgc3VibWl0dGVyKSB7XG4gIGNvbnN0IG1ldGhvZCA9IHN1Ym1pdHRlcj8uZ2V0QXR0cmlidXRlKFwiZm9ybW1ldGhvZFwiKSB8fCBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJtZXRob2RcIikgfHwgXCJcIjtcbiAgcmV0dXJuIGZldGNoTWV0aG9kRnJvbVN0cmluZyhtZXRob2QudG9Mb3dlckNhc2UoKSkgfHwgRmV0Y2hNZXRob2QuZ2V0XG59XG5cbmZ1bmN0aW9uIGdldEVuY3R5cGUoZm9ybUVsZW1lbnQsIHN1Ym1pdHRlcikge1xuICByZXR1cm4gZmV0Y2hFbmN0eXBlRnJvbVN0cmluZyhzdWJtaXR0ZXI/LmdldEF0dHJpYnV0ZShcImZvcm1lbmN0eXBlXCIpIHx8IGZvcm1FbGVtZW50LmVuY3R5cGUpXG59XG5cbmNsYXNzIFNuYXBzaG90IHtcbiAgY29uc3RydWN0b3IoZWxlbWVudCkge1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gIH1cblxuICBnZXQgYWN0aXZlRWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50Lm93bmVyRG9jdW1lbnQuYWN0aXZlRWxlbWVudFxuICB9XG5cbiAgZ2V0IGNoaWxkcmVuKCkge1xuICAgIHJldHVybiBbLi4udGhpcy5lbGVtZW50LmNoaWxkcmVuXVxuICB9XG5cbiAgaGFzQW5jaG9yKGFuY2hvcikge1xuICAgIHJldHVybiB0aGlzLmdldEVsZW1lbnRGb3JBbmNob3IoYW5jaG9yKSAhPSBudWxsXG4gIH1cblxuICBnZXRFbGVtZW50Rm9yQW5jaG9yKGFuY2hvcikge1xuICAgIHJldHVybiBhbmNob3IgPyB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihgW2lkPScke2FuY2hvcn0nXSwgYVtuYW1lPScke2FuY2hvcn0nXWApIDogbnVsbFxuICB9XG5cbiAgZ2V0IGlzQ29ubmVjdGVkKCkge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnQuaXNDb25uZWN0ZWRcbiAgfVxuXG4gIGdldCBmaXJzdEF1dG9mb2N1c2FibGVFbGVtZW50KCkge1xuICAgIHJldHVybiBxdWVyeUF1dG9mb2N1c2FibGVFbGVtZW50KHRoaXMuZWxlbWVudClcbiAgfVxuXG4gIGdldCBwZXJtYW5lbnRFbGVtZW50cygpIHtcbiAgICByZXR1cm4gcXVlcnlQZXJtYW5lbnRFbGVtZW50c0FsbCh0aGlzLmVsZW1lbnQpXG4gIH1cblxuICBnZXRQZXJtYW5lbnRFbGVtZW50QnlJZChpZCkge1xuICAgIHJldHVybiBnZXRQZXJtYW5lbnRFbGVtZW50QnlJZCh0aGlzLmVsZW1lbnQsIGlkKVxuICB9XG5cbiAgZ2V0UGVybWFuZW50RWxlbWVudE1hcEZvclNuYXBzaG90KHNuYXBzaG90KSB7XG4gICAgY29uc3QgcGVybWFuZW50RWxlbWVudE1hcCA9IHt9O1xuXG4gICAgZm9yIChjb25zdCBjdXJyZW50UGVybWFuZW50RWxlbWVudCBvZiB0aGlzLnBlcm1hbmVudEVsZW1lbnRzKSB7XG4gICAgICBjb25zdCB7IGlkIH0gPSBjdXJyZW50UGVybWFuZW50RWxlbWVudDtcbiAgICAgIGNvbnN0IG5ld1Blcm1hbmVudEVsZW1lbnQgPSBzbmFwc2hvdC5nZXRQZXJtYW5lbnRFbGVtZW50QnlJZChpZCk7XG4gICAgICBpZiAobmV3UGVybWFuZW50RWxlbWVudCkge1xuICAgICAgICBwZXJtYW5lbnRFbGVtZW50TWFwW2lkXSA9IFtjdXJyZW50UGVybWFuZW50RWxlbWVudCwgbmV3UGVybWFuZW50RWxlbWVudF07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHBlcm1hbmVudEVsZW1lbnRNYXBcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRQZXJtYW5lbnRFbGVtZW50QnlJZChub2RlLCBpZCkge1xuICByZXR1cm4gbm9kZS5xdWVyeVNlbGVjdG9yKGAjJHtpZH1bZGF0YS10dXJiby1wZXJtYW5lbnRdYClcbn1cblxuZnVuY3Rpb24gcXVlcnlQZXJtYW5lbnRFbGVtZW50c0FsbChub2RlKSB7XG4gIHJldHVybiBub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbaWRdW2RhdGEtdHVyYm8tcGVybWFuZW50XVwiKVxufVxuXG5jbGFzcyBGb3JtU3VibWl0T2JzZXJ2ZXIge1xuICBzdGFydGVkID0gZmFsc2VcblxuICBjb25zdHJ1Y3RvcihkZWxlZ2F0ZSwgZXZlbnRUYXJnZXQpIHtcbiAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gICAgdGhpcy5ldmVudFRhcmdldCA9IGV2ZW50VGFyZ2V0O1xuICB9XG5cbiAgc3RhcnQoKSB7XG4gICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgIHRoaXMuZXZlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLnN1Ym1pdENhcHR1cmVkLCB0cnVlKTtcbiAgICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgc3RvcCgpIHtcbiAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICB0aGlzLmV2ZW50VGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5zdWJtaXRDYXB0dXJlZCwgdHJ1ZSk7XG4gICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBzdWJtaXRDYXB0dXJlZCA9ICgpID0+IHtcbiAgICB0aGlzLmV2ZW50VGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5zdWJtaXRCdWJibGVkLCBmYWxzZSk7XG4gICAgdGhpcy5ldmVudFRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuc3VibWl0QnViYmxlZCwgZmFsc2UpO1xuICB9XG5cbiAgc3VibWl0QnViYmxlZCA9IChldmVudCkgPT4ge1xuICAgIGlmICghZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgY29uc3QgZm9ybSA9IGV2ZW50LnRhcmdldCBpbnN0YW5jZW9mIEhUTUxGb3JtRWxlbWVudCA/IGV2ZW50LnRhcmdldCA6IHVuZGVmaW5lZDtcbiAgICAgIGNvbnN0IHN1Ym1pdHRlciA9IGV2ZW50LnN1Ym1pdHRlciB8fCB1bmRlZmluZWQ7XG5cbiAgICAgIGlmIChcbiAgICAgICAgZm9ybSAmJlxuICAgICAgICBzdWJtaXNzaW9uRG9lc05vdERpc21pc3NEaWFsb2coZm9ybSwgc3VibWl0dGVyKSAmJlxuICAgICAgICBzdWJtaXNzaW9uRG9lc05vdFRhcmdldElGcmFtZShmb3JtLCBzdWJtaXR0ZXIpICYmXG4gICAgICAgIHRoaXMuZGVsZWdhdGUud2lsbFN1Ym1pdEZvcm0oZm9ybSwgc3VibWl0dGVyKVxuICAgICAgKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLmRlbGVnYXRlLmZvcm1TdWJtaXR0ZWQoZm9ybSwgc3VibWl0dGVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gc3VibWlzc2lvbkRvZXNOb3REaXNtaXNzRGlhbG9nKGZvcm0sIHN1Ym1pdHRlcikge1xuICBjb25zdCBtZXRob2QgPSBzdWJtaXR0ZXI/LmdldEF0dHJpYnV0ZShcImZvcm1tZXRob2RcIikgfHwgZm9ybS5nZXRBdHRyaWJ1dGUoXCJtZXRob2RcIik7XG5cbiAgcmV0dXJuIG1ldGhvZCAhPSBcImRpYWxvZ1wiXG59XG5cbmZ1bmN0aW9uIHN1Ym1pc3Npb25Eb2VzTm90VGFyZ2V0SUZyYW1lKGZvcm0sIHN1Ym1pdHRlcikge1xuICBjb25zdCB0YXJnZXQgPSBzdWJtaXR0ZXI/LmdldEF0dHJpYnV0ZShcImZvcm10YXJnZXRcIikgfHwgZm9ybS5nZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIik7XG5cbiAgcmV0dXJuIGRvZXNOb3RUYXJnZXRJRnJhbWUodGFyZ2V0KVxufVxuXG5jbGFzcyBWaWV3IHtcbiAgI3Jlc29sdmVSZW5kZXJQcm9taXNlID0gKF92YWx1ZSkgPT4ge31cbiAgI3Jlc29sdmVJbnRlcmNlcHRpb25Qcm9taXNlID0gKF92YWx1ZSkgPT4ge31cblxuICBjb25zdHJ1Y3RvcihkZWxlZ2F0ZSwgZWxlbWVudCkge1xuICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICB9XG5cbiAgLy8gU2Nyb2xsaW5nXG5cbiAgc2Nyb2xsVG9BbmNob3IoYW5jaG9yKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IHRoaXMuc25hcHNob3QuZ2V0RWxlbWVudEZvckFuY2hvcihhbmNob3IpO1xuICAgIGlmIChlbGVtZW50KSB7XG4gICAgICB0aGlzLmZvY3VzRWxlbWVudChlbGVtZW50KTtcbiAgICAgIHRoaXMuc2Nyb2xsVG9FbGVtZW50KGVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNjcm9sbFRvUG9zaXRpb24oeyB4OiAwLCB5OiAwIH0pO1xuICAgIH1cbiAgfVxuXG4gIHNjcm9sbFRvQW5jaG9yRnJvbUxvY2F0aW9uKGxvY2F0aW9uKSB7XG4gICAgdGhpcy5zY3JvbGxUb0FuY2hvcihnZXRBbmNob3IobG9jYXRpb24pKTtcbiAgfVxuXG4gIHNjcm9sbFRvRWxlbWVudChlbGVtZW50KSB7XG4gICAgZWxlbWVudC5zY3JvbGxJbnRvVmlldygpO1xuICB9XG5cbiAgZm9jdXNFbGVtZW50KGVsZW1lbnQpIHtcbiAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICBpZiAoZWxlbWVudC5oYXNBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKSkge1xuICAgICAgICBlbGVtZW50LmZvY3VzKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIFwiLTFcIik7XG4gICAgICAgIGVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzY3JvbGxUb1Bvc2l0aW9uKHsgeCwgeSB9KSB7XG4gICAgdGhpcy5zY3JvbGxSb290LnNjcm9sbFRvKHgsIHkpO1xuICB9XG5cbiAgc2Nyb2xsVG9Ub3AoKSB7XG4gICAgdGhpcy5zY3JvbGxUb1Bvc2l0aW9uKHsgeDogMCwgeTogMCB9KTtcbiAgfVxuXG4gIGdldCBzY3JvbGxSb290KCkge1xuICAgIHJldHVybiB3aW5kb3dcbiAgfVxuXG4gIC8vIFJlbmRlcmluZ1xuXG4gIGFzeW5jIHJlbmRlcihyZW5kZXJlcikge1xuICAgIGNvbnN0IHsgaXNQcmV2aWV3LCBzaG91bGRSZW5kZXIsIHdpbGxSZW5kZXIsIG5ld1NuYXBzaG90OiBzbmFwc2hvdCB9ID0gcmVuZGVyZXI7XG5cbiAgICAvLyBBIHdvcmthcm91bmQgdG8gaWdub3JlIHRyYWNrZWQgZWxlbWVudCBtaXNtYXRjaCByZWxvYWRzIHdoZW4gcGVyZm9ybWluZ1xuICAgIC8vIGEgcHJvbW90ZWQgVmlzaXQgZnJvbSBhIGZyYW1lIG5hdmlnYXRpb25cbiAgICBjb25zdCBzaG91bGRJbnZhbGlkYXRlID0gd2lsbFJlbmRlcjtcblxuICAgIGlmIChzaG91bGRSZW5kZXIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiAodGhpcy4jcmVzb2x2ZVJlbmRlclByb21pc2UgPSByZXNvbHZlKSk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgYXdhaXQgdGhpcy5wcmVwYXJlVG9SZW5kZXJTbmFwc2hvdChyZW5kZXJlcik7XG5cbiAgICAgICAgY29uc3QgcmVuZGVySW50ZXJjZXB0aW9uID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+ICh0aGlzLiNyZXNvbHZlSW50ZXJjZXB0aW9uUHJvbWlzZSA9IHJlc29sdmUpKTtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHsgcmVzdW1lOiB0aGlzLiNyZXNvbHZlSW50ZXJjZXB0aW9uUHJvbWlzZSwgcmVuZGVyOiB0aGlzLnJlbmRlcmVyLnJlbmRlckVsZW1lbnQsIHJlbmRlck1ldGhvZDogdGhpcy5yZW5kZXJlci5yZW5kZXJNZXRob2QgfTtcbiAgICAgICAgY29uc3QgaW1tZWRpYXRlUmVuZGVyID0gdGhpcy5kZWxlZ2F0ZS5hbGxvd3NJbW1lZGlhdGVSZW5kZXIoc25hcHNob3QsIG9wdGlvbnMpO1xuICAgICAgICBpZiAoIWltbWVkaWF0ZVJlbmRlcikgYXdhaXQgcmVuZGVySW50ZXJjZXB0aW9uO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucmVuZGVyU25hcHNob3QocmVuZGVyZXIpO1xuICAgICAgICB0aGlzLmRlbGVnYXRlLnZpZXdSZW5kZXJlZFNuYXBzaG90KHNuYXBzaG90LCBpc1ByZXZpZXcsIHRoaXMucmVuZGVyZXIucmVuZGVyTWV0aG9kKTtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZS5wcmVsb2FkT25Mb2FkTGlua3NGb3JWaWV3KHRoaXMuZWxlbWVudCk7XG4gICAgICAgIHRoaXMuZmluaXNoUmVuZGVyaW5nU25hcHNob3QocmVuZGVyZXIpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgZGVsZXRlIHRoaXMucmVuZGVyZXI7XG4gICAgICAgIHRoaXMuI3Jlc29sdmVSZW5kZXJQcm9taXNlKHVuZGVmaW5lZCk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnJlbmRlclByb21pc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChzaG91bGRJbnZhbGlkYXRlKSB7XG4gICAgICB0aGlzLmludmFsaWRhdGUocmVuZGVyZXIucmVsb2FkUmVhc29uKTtcbiAgICB9XG4gIH1cblxuICBpbnZhbGlkYXRlKHJlYXNvbikge1xuICAgIHRoaXMuZGVsZWdhdGUudmlld0ludmFsaWRhdGVkKHJlYXNvbik7XG4gIH1cblxuICBhc3luYyBwcmVwYXJlVG9SZW5kZXJTbmFwc2hvdChyZW5kZXJlcikge1xuICAgIHRoaXMubWFya0FzUHJldmlldyhyZW5kZXJlci5pc1ByZXZpZXcpO1xuICAgIGF3YWl0IHJlbmRlcmVyLnByZXBhcmVUb1JlbmRlcigpO1xuICB9XG5cbiAgbWFya0FzUHJldmlldyhpc1ByZXZpZXcpIHtcbiAgICBpZiAoaXNQcmV2aWV3KSB7XG4gICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS10dXJiby1wcmV2aWV3XCIsIFwiXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS10dXJiby1wcmV2aWV3XCIpO1xuICAgIH1cbiAgfVxuXG4gIG1hcmtWaXNpdERpcmVjdGlvbihkaXJlY3Rpb24pIHtcbiAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS10dXJiby12aXNpdC1kaXJlY3Rpb25cIiwgZGlyZWN0aW9uKTtcbiAgfVxuXG4gIHVubWFya1Zpc2l0RGlyZWN0aW9uKCkge1xuICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLXZpc2l0LWRpcmVjdGlvblwiKTtcbiAgfVxuXG4gIGFzeW5jIHJlbmRlclNuYXBzaG90KHJlbmRlcmVyKSB7XG4gICAgYXdhaXQgcmVuZGVyZXIucmVuZGVyKCk7XG4gIH1cblxuICBmaW5pc2hSZW5kZXJpbmdTbmFwc2hvdChyZW5kZXJlcikge1xuICAgIHJlbmRlcmVyLmZpbmlzaFJlbmRlcmluZygpO1xuICB9XG59XG5cbmNsYXNzIEZyYW1lVmlldyBleHRlbmRzIFZpZXcge1xuICBtaXNzaW5nKCkge1xuICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSBgPHN0cm9uZyBjbGFzcz1cInR1cmJvLWZyYW1lLWVycm9yXCI+Q29udGVudCBtaXNzaW5nPC9zdHJvbmc+YDtcbiAgfVxuXG4gIGdldCBzbmFwc2hvdCgpIHtcbiAgICByZXR1cm4gbmV3IFNuYXBzaG90KHRoaXMuZWxlbWVudClcbiAgfVxufVxuXG5jbGFzcyBMaW5rSW50ZXJjZXB0b3Ige1xuICBjb25zdHJ1Y3RvcihkZWxlZ2F0ZSwgZWxlbWVudCkge1xuICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICB9XG5cbiAgc3RhcnQoKSB7XG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsaWNrQnViYmxlZCk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInR1cmJvOmNsaWNrXCIsIHRoaXMubGlua0NsaWNrZWQpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0dXJibzpiZWZvcmUtdmlzaXRcIiwgdGhpcy53aWxsVmlzaXQpO1xuICB9XG5cbiAgc3RvcCgpIHtcbiAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xpY2tCdWJibGVkKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidHVyYm86Y2xpY2tcIiwgdGhpcy5saW5rQ2xpY2tlZCk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInR1cmJvOmJlZm9yZS12aXNpdFwiLCB0aGlzLndpbGxWaXNpdCk7XG4gIH1cblxuICBjbGlja0J1YmJsZWQgPSAoZXZlbnQpID0+IHtcbiAgICBpZiAodGhpcy5jbGlja0V2ZW50SXNTaWduaWZpY2FudChldmVudCkpIHtcbiAgICAgIHRoaXMuY2xpY2tFdmVudCA9IGV2ZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWxldGUgdGhpcy5jbGlja0V2ZW50O1xuICAgIH1cbiAgfVxuXG4gIGxpbmtDbGlja2VkID0gKGV2ZW50KSA9PiB7XG4gICAgaWYgKHRoaXMuY2xpY2tFdmVudCAmJiB0aGlzLmNsaWNrRXZlbnRJc1NpZ25pZmljYW50KGV2ZW50KSkge1xuICAgICAgaWYgKHRoaXMuZGVsZWdhdGUuc2hvdWxkSW50ZXJjZXB0TGlua0NsaWNrKGV2ZW50LnRhcmdldCwgZXZlbnQuZGV0YWlsLnVybCwgZXZlbnQuZGV0YWlsLm9yaWdpbmFsRXZlbnQpKSB7XG4gICAgICAgIHRoaXMuY2xpY2tFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLmRlbGVnYXRlLmxpbmtDbGlja0ludGVyY2VwdGVkKGV2ZW50LnRhcmdldCwgZXZlbnQuZGV0YWlsLnVybCwgZXZlbnQuZGV0YWlsLm9yaWdpbmFsRXZlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgICBkZWxldGUgdGhpcy5jbGlja0V2ZW50O1xuICB9XG5cbiAgd2lsbFZpc2l0ID0gKF9ldmVudCkgPT4ge1xuICAgIGRlbGV0ZSB0aGlzLmNsaWNrRXZlbnQ7XG4gIH1cblxuICBjbGlja0V2ZW50SXNTaWduaWZpY2FudChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmNvbXBvc2VkID8gZXZlbnQudGFyZ2V0Py5wYXJlbnRFbGVtZW50IDogZXZlbnQudGFyZ2V0O1xuICAgIGNvbnN0IGVsZW1lbnQgPSBmaW5kTGlua0Zyb21DbGlja1RhcmdldCh0YXJnZXQpIHx8IHRhcmdldDtcblxuICAgIHJldHVybiBlbGVtZW50IGluc3RhbmNlb2YgRWxlbWVudCAmJiBlbGVtZW50LmNsb3Nlc3QoXCJ0dXJiby1mcmFtZSwgaHRtbFwiKSA9PSB0aGlzLmVsZW1lbnRcbiAgfVxufVxuXG5jbGFzcyBMaW5rQ2xpY2tPYnNlcnZlciB7XG4gIHN0YXJ0ZWQgPSBmYWxzZVxuXG4gIGNvbnN0cnVjdG9yKGRlbGVnYXRlLCBldmVudFRhcmdldCkge1xuICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICB0aGlzLmV2ZW50VGFyZ2V0ID0gZXZlbnRUYXJnZXQ7XG4gIH1cblxuICBzdGFydCgpIHtcbiAgICBpZiAoIXRoaXMuc3RhcnRlZCkge1xuICAgICAgdGhpcy5ldmVudFRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jbGlja0NhcHR1cmVkLCB0cnVlKTtcbiAgICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgc3RvcCgpIHtcbiAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICB0aGlzLmV2ZW50VGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsaWNrQ2FwdHVyZWQsIHRydWUpO1xuICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgY2xpY2tDYXB0dXJlZCA9ICgpID0+IHtcbiAgICB0aGlzLmV2ZW50VGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsaWNrQnViYmxlZCwgZmFsc2UpO1xuICAgIHRoaXMuZXZlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xpY2tCdWJibGVkLCBmYWxzZSk7XG4gIH1cblxuICBjbGlja0J1YmJsZWQgPSAoZXZlbnQpID0+IHtcbiAgICBpZiAoZXZlbnQgaW5zdGFuY2VvZiBNb3VzZUV2ZW50ICYmIHRoaXMuY2xpY2tFdmVudElzU2lnbmlmaWNhbnQoZXZlbnQpKSB7XG4gICAgICBjb25zdCB0YXJnZXQgPSAoZXZlbnQuY29tcG9zZWRQYXRoICYmIGV2ZW50LmNvbXBvc2VkUGF0aCgpWzBdKSB8fCBldmVudC50YXJnZXQ7XG4gICAgICBjb25zdCBsaW5rID0gZmluZExpbmtGcm9tQ2xpY2tUYXJnZXQodGFyZ2V0KTtcbiAgICAgIGlmIChsaW5rICYmIGRvZXNOb3RUYXJnZXRJRnJhbWUobGluay50YXJnZXQpKSB7XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uID0gZ2V0TG9jYXRpb25Gb3JMaW5rKGxpbmspO1xuICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZS53aWxsRm9sbG93TGlua1RvTG9jYXRpb24obGluaywgbG9jYXRpb24sIGV2ZW50KSkge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5mb2xsb3dlZExpbmtUb0xvY2F0aW9uKGxpbmssIGxvY2F0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNsaWNrRXZlbnRJc1NpZ25pZmljYW50KGV2ZW50KSB7XG4gICAgcmV0dXJuICEoXG4gICAgICAoZXZlbnQudGFyZ2V0ICYmIGV2ZW50LnRhcmdldC5pc0NvbnRlbnRFZGl0YWJsZSkgfHxcbiAgICAgIGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgfHxcbiAgICAgIGV2ZW50LndoaWNoID4gMSB8fFxuICAgICAgZXZlbnQuYWx0S2V5IHx8XG4gICAgICBldmVudC5jdHJsS2V5IHx8XG4gICAgICBldmVudC5tZXRhS2V5IHx8XG4gICAgICBldmVudC5zaGlmdEtleVxuICAgIClcbiAgfVxufVxuXG5jbGFzcyBGb3JtTGlua0NsaWNrT2JzZXJ2ZXIge1xuICBjb25zdHJ1Y3RvcihkZWxlZ2F0ZSwgZWxlbWVudCkge1xuICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICB0aGlzLmxpbmtJbnRlcmNlcHRvciA9IG5ldyBMaW5rQ2xpY2tPYnNlcnZlcih0aGlzLCBlbGVtZW50KTtcbiAgfVxuXG4gIHN0YXJ0KCkge1xuICAgIHRoaXMubGlua0ludGVyY2VwdG9yLnN0YXJ0KCk7XG4gIH1cblxuICBzdG9wKCkge1xuICAgIHRoaXMubGlua0ludGVyY2VwdG9yLnN0b3AoKTtcbiAgfVxuXG4gIC8vIExpbmsgaG92ZXIgb2JzZXJ2ZXIgZGVsZWdhdGVcblxuICBjYW5QcmVmZXRjaFJlcXVlc3RUb0xvY2F0aW9uKGxpbmssIGxvY2F0aW9uKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBwcmVmZXRjaEFuZENhY2hlUmVxdWVzdFRvTG9jYXRpb24obGluaywgbG9jYXRpb24pIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIC8vIExpbmsgY2xpY2sgb2JzZXJ2ZXIgZGVsZWdhdGVcblxuICB3aWxsRm9sbG93TGlua1RvTG9jYXRpb24obGluaywgbG9jYXRpb24sIG9yaWdpbmFsRXZlbnQpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5kZWxlZ2F0ZS53aWxsU3VibWl0Rm9ybUxpbmtUb0xvY2F0aW9uKGxpbmssIGxvY2F0aW9uLCBvcmlnaW5hbEV2ZW50KSAmJlxuICAgICAgKGxpbmsuaGFzQXR0cmlidXRlKFwiZGF0YS10dXJiby1tZXRob2RcIikgfHwgbGluay5oYXNBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLXN0cmVhbVwiKSlcbiAgICApXG4gIH1cblxuICBmb2xsb3dlZExpbmtUb0xvY2F0aW9uKGxpbmssIGxvY2F0aW9uKSB7XG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpO1xuXG4gICAgY29uc3QgdHlwZSA9IFwiaGlkZGVuXCI7XG4gICAgZm9yIChjb25zdCBbbmFtZSwgdmFsdWVdIG9mIGxvY2F0aW9uLnNlYXJjaFBhcmFtcykge1xuICAgICAgZm9ybS5hcHBlbmQoT2JqZWN0LmFzc2lnbihkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksIHsgdHlwZSwgbmFtZSwgdmFsdWUgfSkpO1xuICAgIH1cblxuICAgIGNvbnN0IGFjdGlvbiA9IE9iamVjdC5hc3NpZ24obG9jYXRpb24sIHsgc2VhcmNoOiBcIlwiIH0pO1xuICAgIGZvcm0uc2V0QXR0cmlidXRlKFwiZGF0YS10dXJib1wiLCBcInRydWVcIik7XG4gICAgZm9ybS5zZXRBdHRyaWJ1dGUoXCJhY3Rpb25cIiwgYWN0aW9uLmhyZWYpO1xuICAgIGZvcm0uc2V0QXR0cmlidXRlKFwiaGlkZGVuXCIsIFwiXCIpO1xuXG4gICAgY29uc3QgbWV0aG9kID0gbGluay5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLW1ldGhvZFwiKTtcbiAgICBpZiAobWV0aG9kKSBmb3JtLnNldEF0dHJpYnV0ZShcIm1ldGhvZFwiLCBtZXRob2QpO1xuXG4gICAgY29uc3QgdHVyYm9GcmFtZSA9IGxpbmsuZ2V0QXR0cmlidXRlKFwiZGF0YS10dXJiby1mcmFtZVwiKTtcbiAgICBpZiAodHVyYm9GcmFtZSkgZm9ybS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLWZyYW1lXCIsIHR1cmJvRnJhbWUpO1xuXG4gICAgY29uc3QgdHVyYm9BY3Rpb24gPSBnZXRWaXNpdEFjdGlvbihsaW5rKTtcbiAgICBpZiAodHVyYm9BY3Rpb24pIGZvcm0uc2V0QXR0cmlidXRlKFwiZGF0YS10dXJiby1hY3Rpb25cIiwgdHVyYm9BY3Rpb24pO1xuXG4gICAgY29uc3QgdHVyYm9Db25maXJtID0gbGluay5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLWNvbmZpcm1cIik7XG4gICAgaWYgKHR1cmJvQ29uZmlybSkgZm9ybS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLWNvbmZpcm1cIiwgdHVyYm9Db25maXJtKTtcblxuICAgIGNvbnN0IHR1cmJvU3RyZWFtID0gbGluay5oYXNBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLXN0cmVhbVwiKTtcbiAgICBpZiAodHVyYm9TdHJlYW0pIGZvcm0uc2V0QXR0cmlidXRlKFwiZGF0YS10dXJiby1zdHJlYW1cIiwgXCJcIik7XG5cbiAgICB0aGlzLmRlbGVnYXRlLnN1Ym1pdHRlZEZvcm1MaW5rVG9Mb2NhdGlvbihsaW5rLCBsb2NhdGlvbiwgZm9ybSk7XG5cbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZvcm0pO1xuICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInR1cmJvOnN1Ym1pdC1lbmRcIiwgKCkgPT4gZm9ybS5yZW1vdmUoKSwgeyBvbmNlOiB0cnVlIH0pO1xuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiBmb3JtLnJlcXVlc3RTdWJtaXQoKSk7XG4gIH1cbn1cblxuY2xhc3MgQmFyZG8ge1xuICBzdGF0aWMgYXN5bmMgcHJlc2VydmluZ1Blcm1hbmVudEVsZW1lbnRzKGRlbGVnYXRlLCBwZXJtYW5lbnRFbGVtZW50TWFwLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGJhcmRvID0gbmV3IHRoaXMoZGVsZWdhdGUsIHBlcm1hbmVudEVsZW1lbnRNYXApO1xuICAgIGJhcmRvLmVudGVyKCk7XG4gICAgYXdhaXQgY2FsbGJhY2soKTtcbiAgICBiYXJkby5sZWF2ZSgpO1xuICB9XG5cbiAgY29uc3RydWN0b3IoZGVsZWdhdGUsIHBlcm1hbmVudEVsZW1lbnRNYXApIHtcbiAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gICAgdGhpcy5wZXJtYW5lbnRFbGVtZW50TWFwID0gcGVybWFuZW50RWxlbWVudE1hcDtcbiAgfVxuXG4gIGVudGVyKCkge1xuICAgIGZvciAoY29uc3QgaWQgaW4gdGhpcy5wZXJtYW5lbnRFbGVtZW50TWFwKSB7XG4gICAgICBjb25zdCBbY3VycmVudFBlcm1hbmVudEVsZW1lbnQsIG5ld1Blcm1hbmVudEVsZW1lbnRdID0gdGhpcy5wZXJtYW5lbnRFbGVtZW50TWFwW2lkXTtcbiAgICAgIHRoaXMuZGVsZWdhdGUuZW50ZXJpbmdCYXJkbyhjdXJyZW50UGVybWFuZW50RWxlbWVudCwgbmV3UGVybWFuZW50RWxlbWVudCk7XG4gICAgICB0aGlzLnJlcGxhY2VOZXdQZXJtYW5lbnRFbGVtZW50V2l0aFBsYWNlaG9sZGVyKG5ld1Blcm1hbmVudEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIGxlYXZlKCkge1xuICAgIGZvciAoY29uc3QgaWQgaW4gdGhpcy5wZXJtYW5lbnRFbGVtZW50TWFwKSB7XG4gICAgICBjb25zdCBbY3VycmVudFBlcm1hbmVudEVsZW1lbnRdID0gdGhpcy5wZXJtYW5lbnRFbGVtZW50TWFwW2lkXTtcbiAgICAgIHRoaXMucmVwbGFjZUN1cnJlbnRQZXJtYW5lbnRFbGVtZW50V2l0aENsb25lKGN1cnJlbnRQZXJtYW5lbnRFbGVtZW50KTtcbiAgICAgIHRoaXMucmVwbGFjZVBsYWNlaG9sZGVyV2l0aFBlcm1hbmVudEVsZW1lbnQoY3VycmVudFBlcm1hbmVudEVsZW1lbnQpO1xuICAgICAgdGhpcy5kZWxlZ2F0ZS5sZWF2aW5nQmFyZG8oY3VycmVudFBlcm1hbmVudEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIHJlcGxhY2VOZXdQZXJtYW5lbnRFbGVtZW50V2l0aFBsYWNlaG9sZGVyKHBlcm1hbmVudEVsZW1lbnQpIHtcbiAgICBjb25zdCBwbGFjZWhvbGRlciA9IGNyZWF0ZVBsYWNlaG9sZGVyRm9yUGVybWFuZW50RWxlbWVudChwZXJtYW5lbnRFbGVtZW50KTtcbiAgICBwZXJtYW5lbnRFbGVtZW50LnJlcGxhY2VXaXRoKHBsYWNlaG9sZGVyKTtcbiAgfVxuXG4gIHJlcGxhY2VDdXJyZW50UGVybWFuZW50RWxlbWVudFdpdGhDbG9uZShwZXJtYW5lbnRFbGVtZW50KSB7XG4gICAgY29uc3QgY2xvbmUgPSBwZXJtYW5lbnRFbGVtZW50LmNsb25lTm9kZSh0cnVlKTtcbiAgICBwZXJtYW5lbnRFbGVtZW50LnJlcGxhY2VXaXRoKGNsb25lKTtcbiAgfVxuXG4gIHJlcGxhY2VQbGFjZWhvbGRlcldpdGhQZXJtYW5lbnRFbGVtZW50KHBlcm1hbmVudEVsZW1lbnQpIHtcbiAgICBjb25zdCBwbGFjZWhvbGRlciA9IHRoaXMuZ2V0UGxhY2Vob2xkZXJCeUlkKHBlcm1hbmVudEVsZW1lbnQuaWQpO1xuICAgIHBsYWNlaG9sZGVyPy5yZXBsYWNlV2l0aChwZXJtYW5lbnRFbGVtZW50KTtcbiAgfVxuXG4gIGdldFBsYWNlaG9sZGVyQnlJZChpZCkge1xuICAgIHJldHVybiB0aGlzLnBsYWNlaG9sZGVycy5maW5kKChlbGVtZW50KSA9PiBlbGVtZW50LmNvbnRlbnQgPT0gaWQpXG4gIH1cblxuICBnZXQgcGxhY2Vob2xkZXJzKCkge1xuICAgIHJldHVybiBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIm1ldGFbbmFtZT10dXJiby1wZXJtYW5lbnQtcGxhY2Vob2xkZXJdW2NvbnRlbnRdXCIpXVxuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVBsYWNlaG9sZGVyRm9yUGVybWFuZW50RWxlbWVudChwZXJtYW5lbnRFbGVtZW50KSB7XG4gIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibWV0YVwiKTtcbiAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwidHVyYm8tcGVybWFuZW50LXBsYWNlaG9sZGVyXCIpO1xuICBlbGVtZW50LnNldEF0dHJpYnV0ZShcImNvbnRlbnRcIiwgcGVybWFuZW50RWxlbWVudC5pZCk7XG4gIHJldHVybiBlbGVtZW50XG59XG5cbmNsYXNzIFJlbmRlcmVyIHtcbiAgI2FjdGl2ZUVsZW1lbnQgPSBudWxsXG5cbiAgc3RhdGljIHJlbmRlckVsZW1lbnQoY3VycmVudEVsZW1lbnQsIG5ld0VsZW1lbnQpIHtcbiAgICAvLyBBYnN0cmFjdCBtZXRob2RcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGN1cnJlbnRTbmFwc2hvdCwgbmV3U25hcHNob3QsIGlzUHJldmlldywgd2lsbFJlbmRlciA9IHRydWUpIHtcbiAgICB0aGlzLmN1cnJlbnRTbmFwc2hvdCA9IGN1cnJlbnRTbmFwc2hvdDtcbiAgICB0aGlzLm5ld1NuYXBzaG90ID0gbmV3U25hcHNob3Q7XG4gICAgdGhpcy5pc1ByZXZpZXcgPSBpc1ByZXZpZXc7XG4gICAgdGhpcy53aWxsUmVuZGVyID0gd2lsbFJlbmRlcjtcbiAgICB0aGlzLnJlbmRlckVsZW1lbnQgPSB0aGlzLmNvbnN0cnVjdG9yLnJlbmRlckVsZW1lbnQ7XG4gICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gKHRoaXMucmVzb2x2aW5nRnVuY3Rpb25zID0geyByZXNvbHZlLCByZWplY3QgfSkpO1xuICB9XG5cbiAgZ2V0IHNob3VsZFJlbmRlcigpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgZ2V0IHNob3VsZEF1dG9mb2N1cygpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgZ2V0IHJlbG9hZFJlYXNvbigpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIHByZXBhcmVUb1JlbmRlcigpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICAvLyBBYnN0cmFjdCBtZXRob2RcbiAgfVxuXG4gIGZpbmlzaFJlbmRlcmluZygpIHtcbiAgICBpZiAodGhpcy5yZXNvbHZpbmdGdW5jdGlvbnMpIHtcbiAgICAgIHRoaXMucmVzb2x2aW5nRnVuY3Rpb25zLnJlc29sdmUoKTtcbiAgICAgIGRlbGV0ZSB0aGlzLnJlc29sdmluZ0Z1bmN0aW9ucztcbiAgICB9XG4gIH1cblxuICBhc3luYyBwcmVzZXJ2aW5nUGVybWFuZW50RWxlbWVudHMoY2FsbGJhY2spIHtcbiAgICBhd2FpdCBCYXJkby5wcmVzZXJ2aW5nUGVybWFuZW50RWxlbWVudHModGhpcywgdGhpcy5wZXJtYW5lbnRFbGVtZW50TWFwLCBjYWxsYmFjayk7XG4gIH1cblxuICBmb2N1c0ZpcnN0QXV0b2ZvY3VzYWJsZUVsZW1lbnQoKSB7XG4gICAgaWYgKHRoaXMuc2hvdWxkQXV0b2ZvY3VzKSB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5jb25uZWN0ZWRTbmFwc2hvdC5maXJzdEF1dG9mb2N1c2FibGVFbGVtZW50O1xuICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgZWxlbWVudC5mb2N1cygpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEJhcmRvIGRlbGVnYXRlXG5cbiAgZW50ZXJpbmdCYXJkbyhjdXJyZW50UGVybWFuZW50RWxlbWVudCkge1xuICAgIGlmICh0aGlzLiNhY3RpdmVFbGVtZW50KSByZXR1cm5cblxuICAgIGlmIChjdXJyZW50UGVybWFuZW50RWxlbWVudC5jb250YWlucyh0aGlzLmN1cnJlbnRTbmFwc2hvdC5hY3RpdmVFbGVtZW50KSkge1xuICAgICAgdGhpcy4jYWN0aXZlRWxlbWVudCA9IHRoaXMuY3VycmVudFNuYXBzaG90LmFjdGl2ZUVsZW1lbnQ7XG4gICAgfVxuICB9XG5cbiAgbGVhdmluZ0JhcmRvKGN1cnJlbnRQZXJtYW5lbnRFbGVtZW50KSB7XG4gICAgaWYgKGN1cnJlbnRQZXJtYW5lbnRFbGVtZW50LmNvbnRhaW5zKHRoaXMuI2FjdGl2ZUVsZW1lbnQpICYmIHRoaXMuI2FjdGl2ZUVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgdGhpcy4jYWN0aXZlRWxlbWVudC5mb2N1cygpO1xuXG4gICAgICB0aGlzLiNhY3RpdmVFbGVtZW50ID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBnZXQgY29ubmVjdGVkU25hcHNob3QoKSB7XG4gICAgcmV0dXJuIHRoaXMubmV3U25hcHNob3QuaXNDb25uZWN0ZWQgPyB0aGlzLm5ld1NuYXBzaG90IDogdGhpcy5jdXJyZW50U25hcHNob3RcbiAgfVxuXG4gIGdldCBjdXJyZW50RWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50U25hcHNob3QuZWxlbWVudFxuICB9XG5cbiAgZ2V0IG5ld0VsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMubmV3U25hcHNob3QuZWxlbWVudFxuICB9XG5cbiAgZ2V0IHBlcm1hbmVudEVsZW1lbnRNYXAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudFNuYXBzaG90LmdldFBlcm1hbmVudEVsZW1lbnRNYXBGb3JTbmFwc2hvdCh0aGlzLm5ld1NuYXBzaG90KVxuICB9XG5cbiAgZ2V0IHJlbmRlck1ldGhvZCgpIHtcbiAgICByZXR1cm4gXCJyZXBsYWNlXCJcbiAgfVxufVxuXG5jbGFzcyBGcmFtZVJlbmRlcmVyIGV4dGVuZHMgUmVuZGVyZXIge1xuICBzdGF0aWMgcmVuZGVyRWxlbWVudChjdXJyZW50RWxlbWVudCwgbmV3RWxlbWVudCkge1xuICAgIGNvbnN0IGRlc3RpbmF0aW9uUmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgIGRlc3RpbmF0aW9uUmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKGN1cnJlbnRFbGVtZW50KTtcbiAgICBkZXN0aW5hdGlvblJhbmdlLmRlbGV0ZUNvbnRlbnRzKCk7XG5cbiAgICBjb25zdCBmcmFtZUVsZW1lbnQgPSBuZXdFbGVtZW50O1xuICAgIGNvbnN0IHNvdXJjZVJhbmdlID0gZnJhbWVFbGVtZW50Lm93bmVyRG9jdW1lbnQ/LmNyZWF0ZVJhbmdlKCk7XG4gICAgaWYgKHNvdXJjZVJhbmdlKSB7XG4gICAgICBzb3VyY2VSYW5nZS5zZWxlY3ROb2RlQ29udGVudHMoZnJhbWVFbGVtZW50KTtcbiAgICAgIGN1cnJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHNvdXJjZVJhbmdlLmV4dHJhY3RDb250ZW50cygpKTtcbiAgICB9XG4gIH1cblxuICBjb25zdHJ1Y3RvcihkZWxlZ2F0ZSwgY3VycmVudFNuYXBzaG90LCBuZXdTbmFwc2hvdCwgcmVuZGVyRWxlbWVudCwgaXNQcmV2aWV3LCB3aWxsUmVuZGVyID0gdHJ1ZSkge1xuICAgIHN1cGVyKGN1cnJlbnRTbmFwc2hvdCwgbmV3U25hcHNob3QsIHJlbmRlckVsZW1lbnQsIGlzUHJldmlldywgd2lsbFJlbmRlcik7XG4gICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICB9XG5cbiAgZ2V0IHNob3VsZFJlbmRlcigpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgcmVuZGVyKCkge1xuICAgIGF3YWl0IG5leHRSZXBhaW50KCk7XG4gICAgdGhpcy5wcmVzZXJ2aW5nUGVybWFuZW50RWxlbWVudHMoKCkgPT4ge1xuICAgICAgdGhpcy5sb2FkRnJhbWVFbGVtZW50KCk7XG4gICAgfSk7XG4gICAgdGhpcy5zY3JvbGxGcmFtZUludG9WaWV3KCk7XG4gICAgYXdhaXQgbmV4dFJlcGFpbnQoKTtcbiAgICB0aGlzLmZvY3VzRmlyc3RBdXRvZm9jdXNhYmxlRWxlbWVudCgpO1xuICAgIGF3YWl0IG5leHRSZXBhaW50KCk7XG4gICAgdGhpcy5hY3RpdmF0ZVNjcmlwdEVsZW1lbnRzKCk7XG4gIH1cblxuICBsb2FkRnJhbWVFbGVtZW50KCkge1xuICAgIHRoaXMuZGVsZWdhdGUud2lsbFJlbmRlckZyYW1lKHRoaXMuY3VycmVudEVsZW1lbnQsIHRoaXMubmV3RWxlbWVudCk7XG4gICAgdGhpcy5yZW5kZXJFbGVtZW50KHRoaXMuY3VycmVudEVsZW1lbnQsIHRoaXMubmV3RWxlbWVudCk7XG4gIH1cblxuICBzY3JvbGxGcmFtZUludG9WaWV3KCkge1xuICAgIGlmICh0aGlzLmN1cnJlbnRFbGVtZW50LmF1dG9zY3JvbGwgfHwgdGhpcy5uZXdFbGVtZW50LmF1dG9zY3JvbGwpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmN1cnJlbnRFbGVtZW50LmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgY29uc3QgYmxvY2sgPSByZWFkU2Nyb2xsTG9naWNhbFBvc2l0aW9uKHRoaXMuY3VycmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1hdXRvc2Nyb2xsLWJsb2NrXCIpLCBcImVuZFwiKTtcbiAgICAgIGNvbnN0IGJlaGF2aW9yID0gcmVhZFNjcm9sbEJlaGF2aW9yKHRoaXMuY3VycmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1hdXRvc2Nyb2xsLWJlaGF2aW9yXCIpLCBcImF1dG9cIik7XG5cbiAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgIGVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcoeyBibG9jaywgYmVoYXZpb3IgfSk7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgYWN0aXZhdGVTY3JpcHRFbGVtZW50cygpIHtcbiAgICBmb3IgKGNvbnN0IGluZXJ0U2NyaXB0RWxlbWVudCBvZiB0aGlzLm5ld1NjcmlwdEVsZW1lbnRzKSB7XG4gICAgICBjb25zdCBhY3RpdmF0ZWRTY3JpcHRFbGVtZW50ID0gYWN0aXZhdGVTY3JpcHRFbGVtZW50KGluZXJ0U2NyaXB0RWxlbWVudCk7XG4gICAgICBpbmVydFNjcmlwdEVsZW1lbnQucmVwbGFjZVdpdGgoYWN0aXZhdGVkU2NyaXB0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IG5ld1NjcmlwdEVsZW1lbnRzKCkge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJzY3JpcHRcIilcbiAgfVxufVxuXG5mdW5jdGlvbiByZWFkU2Nyb2xsTG9naWNhbFBvc2l0aW9uKHZhbHVlLCBkZWZhdWx0VmFsdWUpIHtcbiAgaWYgKHZhbHVlID09IFwiZW5kXCIgfHwgdmFsdWUgPT0gXCJzdGFydFwiIHx8IHZhbHVlID09IFwiY2VudGVyXCIgfHwgdmFsdWUgPT0gXCJuZWFyZXN0XCIpIHtcbiAgICByZXR1cm4gdmFsdWVcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZGVmYXVsdFZhbHVlXG4gIH1cbn1cblxuZnVuY3Rpb24gcmVhZFNjcm9sbEJlaGF2aW9yKHZhbHVlLCBkZWZhdWx0VmFsdWUpIHtcbiAgaWYgKHZhbHVlID09IFwiYXV0b1wiIHx8IHZhbHVlID09IFwic21vb3RoXCIpIHtcbiAgICByZXR1cm4gdmFsdWVcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZGVmYXVsdFZhbHVlXG4gIH1cbn1cblxuLyoqXG4gKiBAdHlwZWRlZiB7b2JqZWN0fSBDb25maWdIZWFkXG4gKlxuICogQHByb3BlcnR5IHsnbWVyZ2UnIHwgJ2FwcGVuZCcgfCAnbW9ycGgnIHwgJ25vbmUnfSBbc3R5bGVdXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtibG9ja11cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2lnbm9yZV1cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oRWxlbWVudCk6IGJvb2xlYW59IFtzaG91bGRQcmVzZXJ2ZV1cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oRWxlbWVudCk6IGJvb2xlYW59IFtzaG91bGRSZUFwcGVuZF1cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oRWxlbWVudCk6IGJvb2xlYW59IFtzaG91bGRSZW1vdmVdXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKEVsZW1lbnQsIHthZGRlZDogTm9kZVtdLCBrZXB0OiBFbGVtZW50W10sIHJlbW92ZWQ6IEVsZW1lbnRbXX0pOiB2b2lkfSBbYWZ0ZXJIZWFkTW9ycGhlZF1cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtvYmplY3R9IENvbmZpZ0NhbGxiYWNrc1xuICpcbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oTm9kZSk6IGJvb2xlYW59IFtiZWZvcmVOb2RlQWRkZWRdXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKE5vZGUpOiB2b2lkfSBbYWZ0ZXJOb2RlQWRkZWRdXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKEVsZW1lbnQsIE5vZGUpOiBib29sZWFufSBbYmVmb3JlTm9kZU1vcnBoZWRdXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKEVsZW1lbnQsIE5vZGUpOiB2b2lkfSBbYWZ0ZXJOb2RlTW9ycGhlZF1cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oRWxlbWVudCk6IGJvb2xlYW59IFtiZWZvcmVOb2RlUmVtb3ZlZF1cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oRWxlbWVudCk6IHZvaWR9IFthZnRlck5vZGVSZW1vdmVkXVxuICogQHByb3BlcnR5IHtmdW5jdGlvbihzdHJpbmcsIEVsZW1lbnQsIFwidXBkYXRlXCIgfCBcInJlbW92ZVwiKTogYm9vbGVhbn0gW2JlZm9yZUF0dHJpYnV0ZVVwZGF0ZWRdXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7b2JqZWN0fSBDb25maWdcbiAqXG4gKiBAcHJvcGVydHkgeydvdXRlckhUTUwnIHwgJ2lubmVySFRNTCd9IFttb3JwaFN0eWxlXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbaWdub3JlQWN0aXZlXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbaWdub3JlQWN0aXZlVmFsdWVdXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtyZXN0b3JlRm9jdXNdXG4gKiBAcHJvcGVydHkge0NvbmZpZ0NhbGxiYWNrc30gW2NhbGxiYWNrc11cbiAqIEBwcm9wZXJ0eSB7Q29uZmlnSGVhZH0gW2hlYWRdXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb259IE5vT3BcbiAqXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtvYmplY3R9IENvbmZpZ0hlYWRJbnRlcm5hbFxuICpcbiAqIEBwcm9wZXJ0eSB7J21lcmdlJyB8ICdhcHBlbmQnIHwgJ21vcnBoJyB8ICdub25lJ30gc3R5bGVcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2Jsb2NrXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbaWdub3JlXVxuICogQHByb3BlcnR5IHsoZnVuY3Rpb24oRWxlbWVudCk6IGJvb2xlYW4pIHwgTm9PcH0gc2hvdWxkUHJlc2VydmVcbiAqIEBwcm9wZXJ0eSB7KGZ1bmN0aW9uKEVsZW1lbnQpOiBib29sZWFuKSB8IE5vT3B9IHNob3VsZFJlQXBwZW5kXG4gKiBAcHJvcGVydHkgeyhmdW5jdGlvbihFbGVtZW50KTogYm9vbGVhbikgfCBOb09wfSBzaG91bGRSZW1vdmVcbiAqIEBwcm9wZXJ0eSB7KGZ1bmN0aW9uKEVsZW1lbnQsIHthZGRlZDogTm9kZVtdLCBrZXB0OiBFbGVtZW50W10sIHJlbW92ZWQ6IEVsZW1lbnRbXX0pOiB2b2lkKSB8IE5vT3B9IGFmdGVySGVhZE1vcnBoZWRcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtvYmplY3R9IENvbmZpZ0NhbGxiYWNrc0ludGVybmFsXG4gKlxuICogQHByb3BlcnR5IHsoZnVuY3Rpb24oTm9kZSk6IGJvb2xlYW4pIHwgTm9PcH0gYmVmb3JlTm9kZUFkZGVkXG4gKiBAcHJvcGVydHkgeyhmdW5jdGlvbihOb2RlKTogdm9pZCkgfCBOb09wfSBhZnRlck5vZGVBZGRlZFxuICogQHByb3BlcnR5IHsoZnVuY3Rpb24oTm9kZSwgTm9kZSk6IGJvb2xlYW4pIHwgTm9PcH0gYmVmb3JlTm9kZU1vcnBoZWRcbiAqIEBwcm9wZXJ0eSB7KGZ1bmN0aW9uKE5vZGUsIE5vZGUpOiB2b2lkKSB8IE5vT3B9IGFmdGVyTm9kZU1vcnBoZWRcbiAqIEBwcm9wZXJ0eSB7KGZ1bmN0aW9uKE5vZGUpOiBib29sZWFuKSB8IE5vT3B9IGJlZm9yZU5vZGVSZW1vdmVkXG4gKiBAcHJvcGVydHkgeyhmdW5jdGlvbihOb2RlKTogdm9pZCkgfCBOb09wfSBhZnRlck5vZGVSZW1vdmVkXG4gKiBAcHJvcGVydHkgeyhmdW5jdGlvbihzdHJpbmcsIEVsZW1lbnQsIFwidXBkYXRlXCIgfCBcInJlbW92ZVwiKTogYm9vbGVhbikgfCBOb09wfSBiZWZvcmVBdHRyaWJ1dGVVcGRhdGVkXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7b2JqZWN0fSBDb25maWdJbnRlcm5hbFxuICpcbiAqIEBwcm9wZXJ0eSB7J291dGVySFRNTCcgfCAnaW5uZXJIVE1MJ30gbW9ycGhTdHlsZVxuICogQHByb3BlcnR5IHtib29sZWFufSBbaWdub3JlQWN0aXZlXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbaWdub3JlQWN0aXZlVmFsdWVdXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtyZXN0b3JlRm9jdXNdXG4gKiBAcHJvcGVydHkge0NvbmZpZ0NhbGxiYWNrc0ludGVybmFsfSBjYWxsYmFja3NcbiAqIEBwcm9wZXJ0eSB7Q29uZmlnSGVhZEludGVybmFsfSBoZWFkXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBJZFNldHNcbiAqIEBwcm9wZXJ0eSB7U2V0PHN0cmluZz59IHBlcnNpc3RlbnRJZHNcbiAqIEBwcm9wZXJ0eSB7TWFwPE5vZGUsIFNldDxzdHJpbmc+Pn0gaWRNYXBcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtGdW5jdGlvbn0gTW9ycGhcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnQgfCBEb2N1bWVudH0gb2xkTm9kZVxuICogQHBhcmFtIHtFbGVtZW50IHwgTm9kZSB8IEhUTUxDb2xsZWN0aW9uIHwgTm9kZVtdIHwgc3RyaW5nIHwgbnVsbH0gbmV3Q29udGVudFxuICogQHBhcmFtIHtDb25maWd9IFtjb25maWddXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkIHwgTm9kZVtdfVxuICovXG5cbi8vIGJhc2UgSUlGRSB0byBkZWZpbmUgaWRpb21vcnBoXG4vKipcbiAqXG4gKiBAdHlwZSB7e2RlZmF1bHRzOiBDb25maWdJbnRlcm5hbCwgbW9ycGg6IE1vcnBofX1cbiAqL1xudmFyIElkaW9tb3JwaCA9IChmdW5jdGlvbiAoKSB7XG5cbiAgLyoqXG4gICAqIEB0eXBlZGVmIHtvYmplY3R9IE1vcnBoQ29udGV4dFxuICAgKlxuICAgKiBAcHJvcGVydHkge0VsZW1lbnR9IHRhcmdldFxuICAgKiBAcHJvcGVydHkge0VsZW1lbnR9IG5ld0NvbnRlbnRcbiAgICogQHByb3BlcnR5IHtDb25maWdJbnRlcm5hbH0gY29uZmlnXG4gICAqIEBwcm9wZXJ0eSB7Q29uZmlnSW50ZXJuYWxbJ21vcnBoU3R5bGUnXX0gbW9ycGhTdHlsZVxuICAgKiBAcHJvcGVydHkge0NvbmZpZ0ludGVybmFsWydpZ25vcmVBY3RpdmUnXX0gaWdub3JlQWN0aXZlXG4gICAqIEBwcm9wZXJ0eSB7Q29uZmlnSW50ZXJuYWxbJ2lnbm9yZUFjdGl2ZVZhbHVlJ119IGlnbm9yZUFjdGl2ZVZhbHVlXG4gICAqIEBwcm9wZXJ0eSB7Q29uZmlnSW50ZXJuYWxbJ3Jlc3RvcmVGb2N1cyddfSByZXN0b3JlRm9jdXNcbiAgICogQHByb3BlcnR5IHtNYXA8Tm9kZSwgU2V0PHN0cmluZz4+fSBpZE1hcFxuICAgKiBAcHJvcGVydHkge1NldDxzdHJpbmc+fSBwZXJzaXN0ZW50SWRzXG4gICAqIEBwcm9wZXJ0eSB7Q29uZmlnSW50ZXJuYWxbJ2NhbGxiYWNrcyddfSBjYWxsYmFja3NcbiAgICogQHByb3BlcnR5IHtDb25maWdJbnRlcm5hbFsnaGVhZCddfSBoZWFkXG4gICAqIEBwcm9wZXJ0eSB7SFRNTERpdkVsZW1lbnR9IHBhbnRyeVxuICAgKi9cblxuICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIEFORCBOT1cgSVQgQkVHSU5TLi4uXG4gIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBjb25zdCBub09wID0gKCkgPT4ge307XG4gIC8qKlxuICAgKiBEZWZhdWx0IGNvbmZpZ3VyYXRpb24gdmFsdWVzLCB1cGRhdGFibGUgYnkgdXNlcnMgbm93XG4gICAqIEB0eXBlIHtDb25maWdJbnRlcm5hbH1cbiAgICovXG4gIGNvbnN0IGRlZmF1bHRzID0ge1xuICAgIG1vcnBoU3R5bGU6IFwib3V0ZXJIVE1MXCIsXG4gICAgY2FsbGJhY2tzOiB7XG4gICAgICBiZWZvcmVOb2RlQWRkZWQ6IG5vT3AsXG4gICAgICBhZnRlck5vZGVBZGRlZDogbm9PcCxcbiAgICAgIGJlZm9yZU5vZGVNb3JwaGVkOiBub09wLFxuICAgICAgYWZ0ZXJOb2RlTW9ycGhlZDogbm9PcCxcbiAgICAgIGJlZm9yZU5vZGVSZW1vdmVkOiBub09wLFxuICAgICAgYWZ0ZXJOb2RlUmVtb3ZlZDogbm9PcCxcbiAgICAgIGJlZm9yZUF0dHJpYnV0ZVVwZGF0ZWQ6IG5vT3AsXG4gICAgfSxcbiAgICBoZWFkOiB7XG4gICAgICBzdHlsZTogXCJtZXJnZVwiLFxuICAgICAgc2hvdWxkUHJlc2VydmU6IChlbHQpID0+IGVsdC5nZXRBdHRyaWJ1dGUoXCJpbS1wcmVzZXJ2ZVwiKSA9PT0gXCJ0cnVlXCIsXG4gICAgICBzaG91bGRSZUFwcGVuZDogKGVsdCkgPT4gZWx0LmdldEF0dHJpYnV0ZShcImltLXJlLWFwcGVuZFwiKSA9PT0gXCJ0cnVlXCIsXG4gICAgICBzaG91bGRSZW1vdmU6IG5vT3AsXG4gICAgICBhZnRlckhlYWRNb3JwaGVkOiBub09wLFxuICAgIH0sXG4gICAgcmVzdG9yZUZvY3VzOiB0cnVlLFxuICB9O1xuXG4gIC8qKlxuICAgKiBDb3JlIGlkaW9tb3JwaCBmdW5jdGlvbiBmb3IgbW9ycGhpbmcgb25lIERPTSB0cmVlIHRvIGFub3RoZXJcbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50IHwgRG9jdW1lbnR9IG9sZE5vZGVcbiAgICogQHBhcmFtIHtFbGVtZW50IHwgTm9kZSB8IEhUTUxDb2xsZWN0aW9uIHwgTm9kZVtdIHwgc3RyaW5nIHwgbnVsbH0gbmV3Q29udGVudFxuICAgKiBAcGFyYW0ge0NvbmZpZ30gW2NvbmZpZ11cbiAgICogQHJldHVybnMge1Byb21pc2U8Tm9kZVtdPiB8IE5vZGVbXX1cbiAgICovXG4gIGZ1bmN0aW9uIG1vcnBoKG9sZE5vZGUsIG5ld0NvbnRlbnQsIGNvbmZpZyA9IHt9KSB7XG4gICAgb2xkTm9kZSA9IG5vcm1hbGl6ZUVsZW1lbnQob2xkTm9kZSk7XG4gICAgY29uc3QgbmV3Tm9kZSA9IG5vcm1hbGl6ZVBhcmVudChuZXdDb250ZW50KTtcbiAgICBjb25zdCBjdHggPSBjcmVhdGVNb3JwaENvbnRleHQob2xkTm9kZSwgbmV3Tm9kZSwgY29uZmlnKTtcblxuICAgIGNvbnN0IG1vcnBoZWROb2RlcyA9IHNhdmVBbmRSZXN0b3JlRm9jdXMoY3R4LCAoKSA9PiB7XG4gICAgICByZXR1cm4gd2l0aEhlYWRCbG9ja2luZyhcbiAgICAgICAgY3R4LFxuICAgICAgICBvbGROb2RlLFxuICAgICAgICBuZXdOb2RlLFxuICAgICAgICAvKiogQHBhcmFtIHtNb3JwaENvbnRleHR9IGN0eCAqLyAoY3R4KSA9PiB7XG4gICAgICAgICAgaWYgKGN0eC5tb3JwaFN0eWxlID09PSBcImlubmVySFRNTFwiKSB7XG4gICAgICAgICAgICBtb3JwaENoaWxkcmVuKGN0eCwgb2xkTm9kZSwgbmV3Tm9kZSk7XG4gICAgICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShvbGROb2RlLmNoaWxkTm9kZXMpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbW9ycGhPdXRlckhUTUwoY3R4LCBvbGROb2RlLCBuZXdOb2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgY3R4LnBhbnRyeS5yZW1vdmUoKTtcbiAgICByZXR1cm4gbW9ycGhlZE5vZGVzO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vcnBoIGp1c3QgdGhlIG91dGVySFRNTCBvZiB0aGUgb2xkTm9kZSB0byB0aGUgbmV3Q29udGVudFxuICAgKiBXZSBoYXZlIHRvIGJlIGNhcmVmdWwgYmVjYXVzZSB0aGUgb2xkTm9kZSBjb3VsZCBoYXZlIHNpYmxpbmdzIHdoaWNoIG5lZWQgdG8gYmUgdW50b3VjaGVkXG4gICAqIEBwYXJhbSB7TW9ycGhDb250ZXh0fSBjdHhcbiAgICogQHBhcmFtIHtFbGVtZW50fSBvbGROb2RlXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gbmV3Tm9kZVxuICAgKiBAcmV0dXJucyB7Tm9kZVtdfVxuICAgKi9cbiAgZnVuY3Rpb24gbW9ycGhPdXRlckhUTUwoY3R4LCBvbGROb2RlLCBuZXdOb2RlKSB7XG4gICAgY29uc3Qgb2xkUGFyZW50ID0gbm9ybWFsaXplUGFyZW50KG9sZE5vZGUpO1xuXG4gICAgLy8gYmFzaXMgZm9yIGNhbHVsYXRpbmcgd2hpY2ggbm9kZXMgd2VyZSBtb3JwaGVkXG4gICAgLy8gc2luY2UgdGhlcmUgbWF5IGJlIHVubW9ycGhlZCBzaWJsaW5nIG5vZGVzXG4gICAgbGV0IGNoaWxkTm9kZXMgPSBBcnJheS5mcm9tKG9sZFBhcmVudC5jaGlsZE5vZGVzKTtcbiAgICBjb25zdCBpbmRleCA9IGNoaWxkTm9kZXMuaW5kZXhPZihvbGROb2RlKTtcbiAgICAvLyBob3cgbWFueSBlbGVtZW50cyBhcmUgdG8gdGhlIHJpZ2h0IG9mIHRoZSBvbGROb2RlXG4gICAgY29uc3QgcmlnaHRNYXJnaW4gPSBjaGlsZE5vZGVzLmxlbmd0aCAtIChpbmRleCArIDEpO1xuXG4gICAgbW9ycGhDaGlsZHJlbihcbiAgICAgIGN0eCxcbiAgICAgIG9sZFBhcmVudCxcbiAgICAgIG5ld05vZGUsXG4gICAgICAvLyB0aGVzZSB0d28gb3B0aW9uYWwgcGFyYW1zIGFyZSB0aGUgc2VjcmV0IHNhdWNlXG4gICAgICBvbGROb2RlLCAvLyBzdGFydCBwb2ludCBmb3IgaXRlcmF0aW9uXG4gICAgICBvbGROb2RlLm5leHRTaWJsaW5nLCAvLyBlbmQgcG9pbnQgZm9yIGl0ZXJhdGlvblxuICAgICk7XG5cbiAgICAvLyByZXR1cm4ganVzdCB0aGUgbW9ycGhlZCBub2Rlc1xuICAgIGNoaWxkTm9kZXMgPSBBcnJheS5mcm9tKG9sZFBhcmVudC5jaGlsZE5vZGVzKTtcbiAgICByZXR1cm4gY2hpbGROb2Rlcy5zbGljZShpbmRleCwgY2hpbGROb2Rlcy5sZW5ndGggLSByaWdodE1hcmdpbik7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtNb3JwaENvbnRleHR9IGN0eFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxOb2RlW10+IHwgTm9kZVtdfVxuICAgKi9cbiAgZnVuY3Rpb24gc2F2ZUFuZFJlc3RvcmVGb2N1cyhjdHgsIGZuKSB7XG4gICAgaWYgKCFjdHguY29uZmlnLnJlc3RvcmVGb2N1cykgcmV0dXJuIGZuKCk7XG4gICAgbGV0IGFjdGl2ZUVsZW1lbnQgPVxuICAgICAgLyoqIEB0eXBlIHtIVE1MSW5wdXRFbGVtZW50fEhUTUxUZXh0QXJlYUVsZW1lbnR8bnVsbH0gKi8gKFxuICAgICAgICBkb2N1bWVudC5hY3RpdmVFbGVtZW50XG4gICAgICApO1xuXG4gICAgLy8gZG9uJ3QgYm90aGVyIGlmIHRoZSBhY3RpdmUgZWxlbWVudCBpcyBub3QgYW4gaW5wdXQgb3IgdGV4dGFyZWFcbiAgICBpZiAoXG4gICAgICAhKFxuICAgICAgICBhY3RpdmVFbGVtZW50IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCB8fFxuICAgICAgICBhY3RpdmVFbGVtZW50IGluc3RhbmNlb2YgSFRNTFRleHRBcmVhRWxlbWVudFxuICAgICAgKVxuICAgICkge1xuICAgICAgcmV0dXJuIGZuKCk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBpZDogYWN0aXZlRWxlbWVudElkLCBzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kIH0gPSBhY3RpdmVFbGVtZW50O1xuXG4gICAgY29uc3QgcmVzdWx0cyA9IGZuKCk7XG5cbiAgICBpZiAoYWN0aXZlRWxlbWVudElkICYmIGFjdGl2ZUVsZW1lbnRJZCAhPT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudD8uaWQpIHtcbiAgICAgIGFjdGl2ZUVsZW1lbnQgPSBjdHgudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoYCMke2FjdGl2ZUVsZW1lbnRJZH1gKTtcbiAgICAgIGFjdGl2ZUVsZW1lbnQ/LmZvY3VzKCk7XG4gICAgfVxuICAgIGlmIChhY3RpdmVFbGVtZW50ICYmICFhY3RpdmVFbGVtZW50LnNlbGVjdGlvbkVuZCAmJiBzZWxlY3Rpb25FbmQpIHtcbiAgICAgIGFjdGl2ZUVsZW1lbnQuc2V0U2VsZWN0aW9uUmFuZ2Uoc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cblxuICBjb25zdCBtb3JwaENoaWxkcmVuID0gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBUaGlzIGlzIHRoZSBjb3JlIGFsZ29yaXRobSBmb3IgbWF0Y2hpbmcgdXAgY2hpbGRyZW4uICBUaGUgaWRlYSBpcyB0byB1c2UgaWQgc2V0cyB0byB0cnkgdG8gbWF0Y2ggdXBcbiAgICAgKiBub2RlcyBhcyBmYWl0aGZ1bGx5IGFzIHBvc3NpYmxlLiAgV2UgZ3JlZWRpbHkgbWF0Y2gsIHdoaWNoIGFsbG93cyB1cyB0byBrZWVwIHRoZSBhbGdvcml0aG0gZmFzdCwgYnV0XG4gICAgICogYnkgdXNpbmcgaWQgc2V0cywgd2UgYXJlIGFibGUgdG8gYmV0dGVyIG1hdGNoIHVwIHdpdGggY29udGVudCBkZWVwZXIgaW4gdGhlIERPTS5cbiAgICAgKlxuICAgICAqIEJhc2ljIGFsZ29yaXRobTpcbiAgICAgKiAtIGZvciBlYWNoIG5vZGUgaW4gdGhlIG5ldyBjb250ZW50OlxuICAgICAqICAgLSBzZWFyY2ggc2VsZiBhbmQgc2libGluZ3MgZm9yIGFuIGlkIHNldCBtYXRjaCwgZmFsbGluZyBiYWNrIHRvIGEgc29mdCBtYXRjaFxuICAgICAqICAgLSBpZiBtYXRjaCBmb3VuZFxuICAgICAqICAgICAtIHJlbW92ZSBhbnkgbm9kZXMgdXAgdG8gdGhlIG1hdGNoOlxuICAgICAqICAgICAgIC0gcGFudHJ5IHBlcnNpc3RlbnQgbm9kZXNcbiAgICAgKiAgICAgICAtIGRlbGV0ZSB0aGUgcmVzdFxuICAgICAqICAgICAtIG1vcnBoIHRoZSBtYXRjaFxuICAgICAqICAgLSBlbHNpZiBubyBtYXRjaCBmb3VuZCwgYW5kIG5vZGUgaXMgcGVyc2lzdGVudFxuICAgICAqICAgICAtIGZpbmQgaXRzIG1hdGNoIGJ5IHF1ZXJ5aW5nIHRoZSBvbGQgcm9vdCAoZnV0dXJlKSBhbmQgcGFudHJ5IChwYXN0KVxuICAgICAqICAgICAtIG1vdmUgaXQgYW5kIGl0cyBjaGlsZHJlbiBoZXJlXG4gICAgICogICAgIC0gbW9ycGggaXRcbiAgICAgKiAgIC0gZWxzZVxuICAgICAqICAgICAtIGNyZWF0ZSBhIG5ldyBub2RlIGZyb20gc2NyYXRjaCBhcyBhIGxhc3QgcmVzdWx0XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge01vcnBoQ29udGV4dH0gY3R4IHRoZSBtZXJnZSBjb250ZXh0XG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBvbGRQYXJlbnQgdGhlIG9sZCBjb250ZW50IHRoYXQgd2UgYXJlIG1lcmdpbmcgdGhlIG5ldyBjb250ZW50IGludG9cbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG5ld1BhcmVudCB0aGUgcGFyZW50IGVsZW1lbnQgb2YgdGhlIG5ldyBjb250ZW50XG4gICAgICogQHBhcmFtIHtOb2RlfG51bGx9IFtpbnNlcnRpb25Qb2ludF0gdGhlIHBvaW50IGluIHRoZSBET00gd2Ugc3RhcnQgbW9ycGhpbmcgYXQgKGRlZmF1bHRzIHRvIGZpcnN0IGNoaWxkKVxuICAgICAqIEBwYXJhbSB7Tm9kZXxudWxsfSBbZW5kUG9pbnRdIHRoZSBwb2ludCBpbiB0aGUgRE9NIHdlIHN0b3AgbW9ycGhpbmcgYXQgKGRlZmF1bHRzIHRvIGFmdGVyIGxhc3QgY2hpbGQpXG4gICAgICovXG4gICAgZnVuY3Rpb24gbW9ycGhDaGlsZHJlbihcbiAgICAgIGN0eCxcbiAgICAgIG9sZFBhcmVudCxcbiAgICAgIG5ld1BhcmVudCxcbiAgICAgIGluc2VydGlvblBvaW50ID0gbnVsbCxcbiAgICAgIGVuZFBvaW50ID0gbnVsbCxcbiAgICApIHtcbiAgICAgIC8vIG5vcm1hbGl6ZVxuICAgICAgaWYgKFxuICAgICAgICBvbGRQYXJlbnQgaW5zdGFuY2VvZiBIVE1MVGVtcGxhdGVFbGVtZW50ICYmXG4gICAgICAgIG5ld1BhcmVudCBpbnN0YW5jZW9mIEhUTUxUZW1wbGF0ZUVsZW1lbnRcbiAgICAgICkge1xuICAgICAgICAvLyBAdHMtaWdub3JlIHdlIGNhbiBwcmV0ZW5kIHRoZSBEb2N1bWVudEZyYWdtZW50IGlzIGFuIEVsZW1lbnRcbiAgICAgICAgb2xkUGFyZW50ID0gb2xkUGFyZW50LmNvbnRlbnQ7XG4gICAgICAgIC8vIEB0cy1pZ25vcmUgZGl0dG9cbiAgICAgICAgbmV3UGFyZW50ID0gbmV3UGFyZW50LmNvbnRlbnQ7XG4gICAgICB9XG4gICAgICBpbnNlcnRpb25Qb2ludCB8fD0gb2xkUGFyZW50LmZpcnN0Q2hpbGQ7XG5cbiAgICAgIC8vIHJ1biB0aHJvdWdoIGFsbCB0aGUgbmV3IGNvbnRlbnRcbiAgICAgIGZvciAoY29uc3QgbmV3Q2hpbGQgb2YgbmV3UGFyZW50LmNoaWxkTm9kZXMpIHtcbiAgICAgICAgLy8gb25jZSB3ZSByZWFjaCB0aGUgZW5kIG9mIHRoZSBvbGQgcGFyZW50IGNvbnRlbnQgc2tpcCB0byB0aGUgZW5kIGFuZCBpbnNlcnQgdGhlIHJlc3RcbiAgICAgICAgaWYgKGluc2VydGlvblBvaW50ICYmIGluc2VydGlvblBvaW50ICE9IGVuZFBvaW50KSB7XG4gICAgICAgICAgY29uc3QgYmVzdE1hdGNoID0gZmluZEJlc3RNYXRjaChcbiAgICAgICAgICAgIGN0eCxcbiAgICAgICAgICAgIG5ld0NoaWxkLFxuICAgICAgICAgICAgaW5zZXJ0aW9uUG9pbnQsXG4gICAgICAgICAgICBlbmRQb2ludCxcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmIChiZXN0TWF0Y2gpIHtcbiAgICAgICAgICAgIC8vIGlmIHRoZSBub2RlIHRvIG1vcnBoIGlzIG5vdCBhdCB0aGUgaW5zZXJ0aW9uIHBvaW50IHRoZW4gcmVtb3ZlL21vdmUgdXAgdG8gaXRcbiAgICAgICAgICAgIGlmIChiZXN0TWF0Y2ggIT09IGluc2VydGlvblBvaW50KSB7XG4gICAgICAgICAgICAgIHJlbW92ZU5vZGVzQmV0d2VlbihjdHgsIGluc2VydGlvblBvaW50LCBiZXN0TWF0Y2gpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbW9ycGhOb2RlKGJlc3RNYXRjaCwgbmV3Q2hpbGQsIGN0eCk7XG4gICAgICAgICAgICBpbnNlcnRpb25Qb2ludCA9IGJlc3RNYXRjaC5uZXh0U2libGluZztcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHRoZSBtYXRjaGluZyBub2RlIGlzIGVsc2V3aGVyZSBpbiB0aGUgb3JpZ2luYWwgY29udGVudFxuICAgICAgICBpZiAobmV3Q2hpbGQgaW5zdGFuY2VvZiBFbGVtZW50ICYmIGN0eC5wZXJzaXN0ZW50SWRzLmhhcyhuZXdDaGlsZC5pZCkpIHtcbiAgICAgICAgICAvLyBtb3ZlIGl0IGFuZCBhbGwgaXRzIGNoaWxkcmVuIGhlcmUgYW5kIG1vcnBoXG4gICAgICAgICAgY29uc3QgbW92ZWRDaGlsZCA9IG1vdmVCZWZvcmVCeUlkKFxuICAgICAgICAgICAgb2xkUGFyZW50LFxuICAgICAgICAgICAgbmV3Q2hpbGQuaWQsXG4gICAgICAgICAgICBpbnNlcnRpb25Qb2ludCxcbiAgICAgICAgICAgIGN0eCxcbiAgICAgICAgICApO1xuICAgICAgICAgIG1vcnBoTm9kZShtb3ZlZENoaWxkLCBuZXdDaGlsZCwgY3R4KTtcbiAgICAgICAgICBpbnNlcnRpb25Qb2ludCA9IG1vdmVkQ2hpbGQubmV4dFNpYmxpbmc7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBsYXN0IHJlc29ydDogaW5zZXJ0IHRoZSBuZXcgbm9kZSBmcm9tIHNjcmF0Y2hcbiAgICAgICAgY29uc3QgaW5zZXJ0ZWROb2RlID0gY3JlYXRlTm9kZShcbiAgICAgICAgICBvbGRQYXJlbnQsXG4gICAgICAgICAgbmV3Q2hpbGQsXG4gICAgICAgICAgaW5zZXJ0aW9uUG9pbnQsXG4gICAgICAgICAgY3R4LFxuICAgICAgICApO1xuICAgICAgICAvLyBjb3VsZCBiZSBudWxsIGlmIGJlZm9yZU5vZGVBZGRlZCBwcmV2ZW50ZWQgaW5zZXJ0aW9uXG4gICAgICAgIGlmIChpbnNlcnRlZE5vZGUpIHtcbiAgICAgICAgICBpbnNlcnRpb25Qb2ludCA9IGluc2VydGVkTm9kZS5uZXh0U2libGluZztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyByZW1vdmUgYW55IHJlbWFpbmluZyBvbGQgbm9kZXMgdGhhdCBkaWRuJ3QgbWF0Y2ggdXAgd2l0aCBuZXcgY29udGVudFxuICAgICAgd2hpbGUgKGluc2VydGlvblBvaW50ICYmIGluc2VydGlvblBvaW50ICE9IGVuZFBvaW50KSB7XG4gICAgICAgIGNvbnN0IHRlbXBOb2RlID0gaW5zZXJ0aW9uUG9pbnQ7XG4gICAgICAgIGluc2VydGlvblBvaW50ID0gaW5zZXJ0aW9uUG9pbnQubmV4dFNpYmxpbmc7XG4gICAgICAgIHJlbW92ZU5vZGUoY3R4LCB0ZW1wTm9kZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBwZXJmb3JtcyB0aGUgYWN0aW9uIG9mIGluc2VydGluZyBhIG5ldyBub2RlIHdoaWxlIGhhbmRsaW5nIHNpdHVhdGlvbnMgd2hlcmUgdGhlIG5vZGUgY29udGFpbnNcbiAgICAgKiBlbGVtZW50cyB3aXRoIHBlcnNpc3RlbnQgaWRzIGFuZCBwb3NzaWJsZSBzdGF0ZSBpbmZvIHdlIGNhbiBzdGlsbCBwcmVzZXJ2ZSBieSBtb3ZpbmcgaW4gYW5kIHRoZW4gbW9ycGhpbmdcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gb2xkUGFyZW50XG4gICAgICogQHBhcmFtIHtOb2RlfSBuZXdDaGlsZFxuICAgICAqIEBwYXJhbSB7Tm9kZXxudWxsfSBpbnNlcnRpb25Qb2ludFxuICAgICAqIEBwYXJhbSB7TW9ycGhDb250ZXh0fSBjdHhcbiAgICAgKiBAcmV0dXJucyB7Tm9kZXxudWxsfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZU5vZGUob2xkUGFyZW50LCBuZXdDaGlsZCwgaW5zZXJ0aW9uUG9pbnQsIGN0eCkge1xuICAgICAgaWYgKGN0eC5jYWxsYmFja3MuYmVmb3JlTm9kZUFkZGVkKG5ld0NoaWxkKSA9PT0gZmFsc2UpIHJldHVybiBudWxsO1xuICAgICAgaWYgKGN0eC5pZE1hcC5oYXMobmV3Q2hpbGQpKSB7XG4gICAgICAgIC8vIG5vZGUgaGFzIGNoaWxkcmVuIHdpdGggaWRzIHdpdGggcG9zc2libGUgc3RhdGUgc28gY3JlYXRlIGEgZHVtbXkgZWx0IG9mIHNhbWUgdHlwZSBhbmQgYXBwbHkgZnVsbCBtb3JwaCBhbGdvcml0aG1cbiAgICAgICAgY29uc3QgbmV3RW1wdHlDaGlsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgLyoqIEB0eXBlIHtFbGVtZW50fSAqLyAobmV3Q2hpbGQpLnRhZ05hbWUsXG4gICAgICAgICk7XG4gICAgICAgIG9sZFBhcmVudC5pbnNlcnRCZWZvcmUobmV3RW1wdHlDaGlsZCwgaW5zZXJ0aW9uUG9pbnQpO1xuICAgICAgICBtb3JwaE5vZGUobmV3RW1wdHlDaGlsZCwgbmV3Q2hpbGQsIGN0eCk7XG4gICAgICAgIGN0eC5jYWxsYmFja3MuYWZ0ZXJOb2RlQWRkZWQobmV3RW1wdHlDaGlsZCk7XG4gICAgICAgIHJldHVybiBuZXdFbXB0eUNoaWxkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gb3B0aW1pc2F0aW9uOiBubyBpZCBzdGF0ZSB0byBwcmVzZXJ2ZSBzbyB3ZSBjYW4ganVzdCBpbnNlcnQgYSBjbG9uZSBvZiB0aGUgbmV3Q2hpbGQgYW5kIGl0cyBkZXNjZW5kYW50c1xuICAgICAgICBjb25zdCBuZXdDbG9uZWRDaGlsZCA9IGRvY3VtZW50LmltcG9ydE5vZGUobmV3Q2hpbGQsIHRydWUpOyAvLyBpbXBvcnROb2RlIHRvIG5vdCBtdXRhdGUgbmV3UGFyZW50XG4gICAgICAgIG9sZFBhcmVudC5pbnNlcnRCZWZvcmUobmV3Q2xvbmVkQ2hpbGQsIGluc2VydGlvblBvaW50KTtcbiAgICAgICAgY3R4LmNhbGxiYWNrcy5hZnRlck5vZGVBZGRlZChuZXdDbG9uZWRDaGlsZCk7XG4gICAgICAgIHJldHVybiBuZXdDbG9uZWRDaGlsZDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gTWF0Y2hpbmcgRnVuY3Rpb25zXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIGNvbnN0IGZpbmRCZXN0TWF0Y2ggPSAoZnVuY3Rpb24gKCkge1xuICAgICAgLyoqXG4gICAgICAgKiBTY2FucyBmb3J3YXJkIGZyb20gdGhlIHN0YXJ0UG9pbnQgdG8gdGhlIGVuZFBvaW50IGxvb2tpbmcgZm9yIGEgbWF0Y2hcbiAgICAgICAqIGZvciB0aGUgbm9kZS4gSXQgbG9va3MgZm9yIGFuIGlkIHNldCBtYXRjaCBmaXJzdCwgdGhlbiBhIHNvZnQgbWF0Y2guXG4gICAgICAgKiBXZSBhYm9ydCBzb2Z0bWF0Y2hpbmcgaWYgd2UgZmluZCB0d28gZnV0dXJlIHNvZnQgbWF0Y2hlcywgdG8gcmVkdWNlIGNodXJuLlxuICAgICAgICogQHBhcmFtIHtOb2RlfSBub2RlXG4gICAgICAgKiBAcGFyYW0ge01vcnBoQ29udGV4dH0gY3R4XG4gICAgICAgKiBAcGFyYW0ge05vZGUgfCBudWxsfSBzdGFydFBvaW50XG4gICAgICAgKiBAcGFyYW0ge05vZGUgfCBudWxsfSBlbmRQb2ludFxuICAgICAgICogQHJldHVybnMge05vZGUgfCBudWxsfVxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBmaW5kQmVzdE1hdGNoKGN0eCwgbm9kZSwgc3RhcnRQb2ludCwgZW5kUG9pbnQpIHtcbiAgICAgICAgbGV0IHNvZnRNYXRjaCA9IG51bGw7XG4gICAgICAgIGxldCBuZXh0U2libGluZyA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAgIGxldCBzaWJsaW5nU29mdE1hdGNoQ291bnQgPSAwO1xuXG4gICAgICAgIGxldCBjdXJzb3IgPSBzdGFydFBvaW50O1xuICAgICAgICB3aGlsZSAoY3Vyc29yICYmIGN1cnNvciAhPSBlbmRQb2ludCkge1xuICAgICAgICAgIC8vIHNvZnQgbWF0Y2hpbmcgaXMgYSBwcmVyZXF1aXNpdGUgZm9yIGlkIHNldCBtYXRjaGluZ1xuICAgICAgICAgIGlmIChpc1NvZnRNYXRjaChjdXJzb3IsIG5vZGUpKSB7XG4gICAgICAgICAgICBpZiAoaXNJZFNldE1hdGNoKGN0eCwgY3Vyc29yLCBub2RlKSkge1xuICAgICAgICAgICAgICByZXR1cm4gY3Vyc29yOyAvLyBmb3VuZCBhbiBpZCBzZXQgbWF0Y2gsIHdlJ3JlIGRvbmUhXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHdlIGhhdmVuJ3QgeWV0IHNhdmVkIGEgc29mdCBtYXRjaCBmYWxsYmFja1xuICAgICAgICAgICAgaWYgKHNvZnRNYXRjaCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAvLyB0aGUgY3VycmVudCBzb2Z0IG1hdGNoIHdpbGwgaGFyZCBtYXRjaCBzb21ldGhpbmcgZWxzZSBpbiB0aGUgZnV0dXJlLCBsZWF2ZSBpdFxuICAgICAgICAgICAgICBpZiAoIWN0eC5pZE1hcC5oYXMoY3Vyc29yKSkge1xuICAgICAgICAgICAgICAgIC8vIHNhdmUgdGhpcyBhcyB0aGUgZmFsbGJhY2sgaWYgd2UgZ2V0IHRocm91Z2ggdGhlIGxvb3Agd2l0aG91dCBmaW5kaW5nIGEgaGFyZCBtYXRjaFxuICAgICAgICAgICAgICAgIHNvZnRNYXRjaCA9IGN1cnNvcjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBzb2Z0TWF0Y2ggPT09IG51bGwgJiZcbiAgICAgICAgICAgIG5leHRTaWJsaW5nICYmXG4gICAgICAgICAgICBpc1NvZnRNYXRjaChjdXJzb3IsIG5leHRTaWJsaW5nKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgLy8gVGhlIG5leHQgbmV3IG5vZGUgaGFzIGEgc29mdCBtYXRjaCB3aXRoIHRoaXMgbm9kZSwgc29cbiAgICAgICAgICAgIC8vIGluY3JlbWVudCB0aGUgY291bnQgb2YgZnV0dXJlIHNvZnQgbWF0Y2hlc1xuICAgICAgICAgICAgc2libGluZ1NvZnRNYXRjaENvdW50Kys7XG4gICAgICAgICAgICBuZXh0U2libGluZyA9IG5leHRTaWJsaW5nLm5leHRTaWJsaW5nO1xuXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBhcmUgdHdvIGZ1dHVyZSBzb2Z0IG1hdGNoZXMsIGJsb2NrIHNvZnQgbWF0Y2hpbmcgZm9yIHRoaXMgbm9kZSB0byBhbGxvd1xuICAgICAgICAgICAgLy8gZnV0dXJlIHNpYmxpbmdzIHRvIHNvZnQgbWF0Y2guIFRoaXMgaXMgdG8gcmVkdWNlIGNodXJuIGluIHRoZSBET00gd2hlbiBhbiBlbGVtZW50XG4gICAgICAgICAgICAvLyBpcyBwcmVwZW5kZWQuXG4gICAgICAgICAgICBpZiAoc2libGluZ1NvZnRNYXRjaENvdW50ID49IDIpIHtcbiAgICAgICAgICAgICAgc29mdE1hdGNoID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGlmIHRoZSBjdXJyZW50IG5vZGUgY29udGFpbnMgYWN0aXZlIGVsZW1lbnQsIHN0b3AgbG9va2luZyBmb3IgYmV0dGVyIGZ1dHVyZSBtYXRjaGVzLFxuICAgICAgICAgIC8vIGJlY2F1c2UgaWYgb25lIGlzIGZvdW5kLCB0aGlzIG5vZGUgd2lsbCBiZSBtb3ZlZCB0byB0aGUgcGFudHJ5LCByZXBhcmVudGluZyBpdCBhbmQgdGh1cyBsb3NpbmcgZm9jdXNcbiAgICAgICAgICBpZiAoY3Vyc29yLmNvbnRhaW5zKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpKSBicmVhaztcblxuICAgICAgICAgIGN1cnNvciA9IGN1cnNvci5uZXh0U2libGluZztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzb2Z0TWF0Y2ggfHwgbnVsbDtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtNb3JwaENvbnRleHR9IGN0eFxuICAgICAgICogQHBhcmFtIHtOb2RlfSBvbGROb2RlXG4gICAgICAgKiBAcGFyYW0ge05vZGV9IG5ld05vZGVcbiAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBpc0lkU2V0TWF0Y2goY3R4LCBvbGROb2RlLCBuZXdOb2RlKSB7XG4gICAgICAgIGxldCBvbGRTZXQgPSBjdHguaWRNYXAuZ2V0KG9sZE5vZGUpO1xuICAgICAgICBsZXQgbmV3U2V0ID0gY3R4LmlkTWFwLmdldChuZXdOb2RlKTtcblxuICAgICAgICBpZiAoIW5ld1NldCB8fCAhb2xkU2V0KSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgZm9yIChjb25zdCBpZCBvZiBvbGRTZXQpIHtcbiAgICAgICAgICAvLyBhIHBvdGVudGlhbCBtYXRjaCBpcyBhbiBpZCBpbiB0aGUgbmV3IGFuZCBvbGQgbm9kZXMgdGhhdFxuICAgICAgICAgIC8vIGhhcyBub3QgYWxyZWFkeSBiZWVuIG1lcmdlZCBpbnRvIHRoZSBET01cbiAgICAgICAgICAvLyBCdXQgdGhlIG5ld05vZGUgY29udGVudCB3ZSBjYWxsIHRoaXMgb24gaGFzIG5vdCBiZWVuXG4gICAgICAgICAgLy8gbWVyZ2VkIHlldCBhbmQgd2UgZG9uJ3QgYWxsb3cgZHVwbGljYXRlIElEcyBzbyBpdCBpcyBzaW1wbGVcbiAgICAgICAgICBpZiAobmV3U2V0LmhhcyhpZCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7Tm9kZX0gb2xkTm9kZVxuICAgICAgICogQHBhcmFtIHtOb2RlfSBuZXdOb2RlXG4gICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gaXNTb2Z0TWF0Y2gob2xkTm9kZSwgbmV3Tm9kZSkge1xuICAgICAgICAvLyBvayB0byBjYXN0OiBpZiBvbmUgaXMgbm90IGVsZW1lbnQsIGBpZGAgYW5kIGB0YWdOYW1lYCB3aWxsIGJlIHVuZGVmaW5lZCBhbmQgd2UnbGwganVzdCBjb21wYXJlIHRoYXQuXG4gICAgICAgIGNvbnN0IG9sZEVsdCA9IC8qKiBAdHlwZSB7RWxlbWVudH0gKi8gKG9sZE5vZGUpO1xuICAgICAgICBjb25zdCBuZXdFbHQgPSAvKiogQHR5cGUge0VsZW1lbnR9ICovIChuZXdOb2RlKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIG9sZEVsdC5ub2RlVHlwZSA9PT0gbmV3RWx0Lm5vZGVUeXBlICYmXG4gICAgICAgICAgb2xkRWx0LnRhZ05hbWUgPT09IG5ld0VsdC50YWdOYW1lICYmXG4gICAgICAgICAgLy8gSWYgb2xkRWx0IGhhcyBhbiBgaWRgIHdpdGggcG9zc2libGUgc3RhdGUgYW5kIGl0IGRvZXNuJ3QgbWF0Y2ggbmV3RWx0LmlkIHRoZW4gYXZvaWQgbW9ycGhpbmcuXG4gICAgICAgICAgLy8gV2UnbGwgc3RpbGwgbWF0Y2ggYW4gYW5vbnltb3VzIG5vZGUgd2l0aCBhbiBJRGVkIG5ld0VsdCwgdGhvdWdoLCBiZWNhdXNlIGlmIGl0IGdvdCB0aGlzIGZhcixcbiAgICAgICAgICAvLyBpdHMgbm90IHBlcnNpc3RlbnQsIGFuZCBuZXcgbm9kZXMgY2FuJ3QgaGF2ZSBhbnkgaGlkZGVuIHN0YXRlLlxuICAgICAgICAgICghb2xkRWx0LmlkIHx8IG9sZEVsdC5pZCA9PT0gbmV3RWx0LmlkKVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmluZEJlc3RNYXRjaDtcbiAgICB9KSgpO1xuXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIERPTSBNYW5pcHVsYXRpb24gRnVuY3Rpb25zXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgLyoqXG4gICAgICogR2V0cyByaWQgb2YgYW4gdW53YW50ZWQgRE9NIG5vZGU7IHN0cmF0ZWd5IGRlcGVuZHMgb24gbmF0dXJlIG9mIGl0cyByZXVzZTpcbiAgICAgKiAtIFBlcnNpc3RlbnQgbm9kZXMgd2lsbCBiZSBtb3ZlZCB0byB0aGUgcGFudHJ5IGZvciBsYXRlciByZXVzZVxuICAgICAqIC0gT3RoZXIgbm9kZXMgd2lsbCBoYXZlIHRoZWlyIGhvb2tzIGNhbGxlZCwgYW5kIHRoZW4gYXJlIHJlbW92ZWRcbiAgICAgKiBAcGFyYW0ge01vcnBoQ29udGV4dH0gY3R4XG4gICAgICogQHBhcmFtIHtOb2RlfSBub2RlXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVtb3ZlTm9kZShjdHgsIG5vZGUpIHtcbiAgICAgIC8vIGFyZSB3ZSBnb2luZyB0byBpZCBzZXQgbWF0Y2ggdGhpcyBsYXRlcj9cbiAgICAgIGlmIChjdHguaWRNYXAuaGFzKG5vZGUpKSB7XG4gICAgICAgIC8vIHNraXAgY2FsbGJhY2tzIGFuZCBtb3ZlIHRvIHBhbnRyeVxuICAgICAgICBtb3ZlQmVmb3JlKGN0eC5wYW50cnksIG5vZGUsIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gcmVtb3ZlIGZvciByZWFsc2llc1xuICAgICAgICBpZiAoY3R4LmNhbGxiYWNrcy5iZWZvcmVOb2RlUmVtb3ZlZChub2RlKSA9PT0gZmFsc2UpIHJldHVybjtcbiAgICAgICAgbm9kZS5wYXJlbnROb2RlPy5yZW1vdmVDaGlsZChub2RlKTtcbiAgICAgICAgY3R4LmNhbGxiYWNrcy5hZnRlck5vZGVSZW1vdmVkKG5vZGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBub2RlcyBiZXR3ZWVuIHRoZSBzdGFydCBhbmQgZW5kIG5vZGVzXG4gICAgICogQHBhcmFtIHtNb3JwaENvbnRleHR9IGN0eFxuICAgICAqIEBwYXJhbSB7Tm9kZX0gc3RhcnRJbmNsdXNpdmVcbiAgICAgKiBAcGFyYW0ge05vZGV9IGVuZEV4Y2x1c2l2ZVxuICAgICAqIEByZXR1cm5zIHtOb2RlfG51bGx9XG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVtb3ZlTm9kZXNCZXR3ZWVuKGN0eCwgc3RhcnRJbmNsdXNpdmUsIGVuZEV4Y2x1c2l2ZSkge1xuICAgICAgLyoqIEB0eXBlIHtOb2RlIHwgbnVsbH0gKi9cbiAgICAgIGxldCBjdXJzb3IgPSBzdGFydEluY2x1c2l2ZTtcbiAgICAgIC8vIHJlbW92ZSBub2RlcyB1bnRpbCB0aGUgZW5kRXhjbHVzaXZlIG5vZGVcbiAgICAgIHdoaWxlIChjdXJzb3IgJiYgY3Vyc29yICE9PSBlbmRFeGNsdXNpdmUpIHtcbiAgICAgICAgbGV0IHRlbXBOb2RlID0gLyoqIEB0eXBlIHtOb2RlfSAqLyAoY3Vyc29yKTtcbiAgICAgICAgY3Vyc29yID0gY3Vyc29yLm5leHRTaWJsaW5nO1xuICAgICAgICByZW1vdmVOb2RlKGN0eCwgdGVtcE5vZGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGN1cnNvcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZWFyY2ggZm9yIGFuIGVsZW1lbnQgYnkgaWQgd2l0aGluIHRoZSBkb2N1bWVudCBhbmQgcGFudHJ5LCBhbmQgbW92ZSBpdCB1c2luZyBtb3ZlQmVmb3JlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBwYXJlbnROb2RlIC0gVGhlIHBhcmVudCBub2RlIHRvIHdoaWNoIHRoZSBlbGVtZW50IHdpbGwgYmUgbW92ZWQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gVGhlIElEIG9mIHRoZSBlbGVtZW50IHRvIGJlIG1vdmVkLlxuICAgICAqIEBwYXJhbSB7Tm9kZSB8IG51bGx9IGFmdGVyIC0gVGhlIHJlZmVyZW5jZSBub2RlIHRvIGluc2VydCB0aGUgZWxlbWVudCBiZWZvcmUuXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBgbnVsbGAsIHRoZSBlbGVtZW50IGlzIGFwcGVuZGVkIGFzIHRoZSBsYXN0IGNoaWxkLlxuICAgICAqIEBwYXJhbSB7TW9ycGhDb250ZXh0fSBjdHhcbiAgICAgKiBAcmV0dXJucyB7RWxlbWVudH0gVGhlIGZvdW5kIGVsZW1lbnRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtb3ZlQmVmb3JlQnlJZChwYXJlbnROb2RlLCBpZCwgYWZ0ZXIsIGN0eCkge1xuICAgICAgY29uc3QgdGFyZ2V0ID1cbiAgICAgICAgLyoqIEB0eXBlIHtFbGVtZW50fSAtIHdpbGwgYWx3YXlzIGJlIGZvdW5kICovXG4gICAgICAgIChcbiAgICAgICAgICBjdHgudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoYCMke2lkfWApIHx8XG4gICAgICAgICAgICBjdHgucGFudHJ5LnF1ZXJ5U2VsZWN0b3IoYCMke2lkfWApXG4gICAgICAgICk7XG4gICAgICByZW1vdmVFbGVtZW50RnJvbUFuY2VzdG9yc0lkTWFwcyh0YXJnZXQsIGN0eCk7XG4gICAgICBtb3ZlQmVmb3JlKHBhcmVudE5vZGUsIHRhcmdldCwgYWZ0ZXIpO1xuICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFuIGVsZW1lbnQgZnJvbSBpdHMgYW5jZXN0b3JzJyBpZCBtYXBzLiBUaGlzIGlzIG5lZWRlZCB3aGVuIGFuIGVsZW1lbnQgaXMgbW92ZWQgZnJvbSB0aGVcbiAgICAgKiBcImZ1dHVyZVwiIHZpYSBgbW92ZUJlZm9yZUlkYC4gT3RoZXJ3aXNlLCBpdHMgZXJzdHdoaWxlIGFuY2VzdG9ycyBjb3VsZCBiZSBtaXN0YWtlbmx5IG1vdmVkIHRvIHRoZVxuICAgICAqIHBhbnRyeSByYXRoZXIgdGhhbiBiZWluZyBkZWxldGVkLCBwcmV2ZW50aW5nIHRoZWlyIHJlbW92YWwgaG9va3MgZnJvbSBiZWluZyBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgLSBlbGVtZW50IHRvIHJlbW92ZSBmcm9tIGl0cyBhbmNlc3RvcnMnIGlkIG1hcHNcbiAgICAgKiBAcGFyYW0ge01vcnBoQ29udGV4dH0gY3R4XG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVtb3ZlRWxlbWVudEZyb21BbmNlc3RvcnNJZE1hcHMoZWxlbWVudCwgY3R4KSB7XG4gICAgICBjb25zdCBpZCA9IGVsZW1lbnQuaWQ7XG4gICAgICAvKiogQHRzLWlnbm9yZSAtIHNhZmUgdG8gbG9vcCBpbiB0aGlzIHdheSAqKi9cbiAgICAgIHdoaWxlICgoZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZSkpIHtcbiAgICAgICAgbGV0IGlkU2V0ID0gY3R4LmlkTWFwLmdldChlbGVtZW50KTtcbiAgICAgICAgaWYgKGlkU2V0KSB7XG4gICAgICAgICAgaWRTZXQuZGVsZXRlKGlkKTtcbiAgICAgICAgICBpZiAoIWlkU2V0LnNpemUpIHtcbiAgICAgICAgICAgIGN0eC5pZE1hcC5kZWxldGUoZWxlbWVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW92ZXMgYW4gZWxlbWVudCBiZWZvcmUgYW5vdGhlciBlbGVtZW50IHdpdGhpbiB0aGUgc2FtZSBwYXJlbnQuXG4gICAgICogVXNlcyB0aGUgcHJvcG9zZWQgYG1vdmVCZWZvcmVgIEFQSSBpZiBhdmFpbGFibGUgKGFuZCB3b3JraW5nKSwgb3RoZXJ3aXNlIGZhbGxzIGJhY2sgdG8gYGluc2VydEJlZm9yZWAuXG4gICAgICogVGhpcyBpcyBlc3NlbnRpYWx5IGEgZm9yd2FyZC1jb21wYXQgd3JhcHBlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gcGFyZW50Tm9kZSAtIFRoZSBwYXJlbnQgbm9kZSBjb250YWluaW5nIHRoZSBhZnRlciBlbGVtZW50LlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gZWxlbWVudCAtIFRoZSBlbGVtZW50IHRvIGJlIG1vdmVkLlxuICAgICAqIEBwYXJhbSB7Tm9kZSB8IG51bGx9IGFmdGVyIC0gVGhlIHJlZmVyZW5jZSBub2RlIHRvIGluc2VydCBgZWxlbWVudGAgYmVmb3JlLlxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgYG51bGxgLCBgZWxlbWVudGAgaXMgYXBwZW5kZWQgYXMgdGhlIGxhc3QgY2hpbGQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbW92ZUJlZm9yZShwYXJlbnROb2RlLCBlbGVtZW50LCBhZnRlcikge1xuICAgICAgLy8gQHRzLWlnbm9yZSAtIHVzZSBwcm9wb3NlZCBtb3ZlQmVmb3JlIGZlYXR1cmVcbiAgICAgIGlmIChwYXJlbnROb2RlLm1vdmVCZWZvcmUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBAdHMtaWdub3JlIC0gdXNlIHByb3Bvc2VkIG1vdmVCZWZvcmUgZmVhdHVyZVxuICAgICAgICAgIHBhcmVudE5vZGUubW92ZUJlZm9yZShlbGVtZW50LCBhZnRlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBmYWxsIGJhY2sgdG8gaW5zZXJ0QmVmb3JlIGFzIHNvbWUgYnJvd3NlcnMgbWF5IGZhaWwgb24gbW92ZUJlZm9yZSB3aGVuIHRyeWluZyB0byBtb3ZlIERvbSBkaXNjb25uZWN0ZWQgbm9kZXMgdG8gcGFudHJ5XG4gICAgICAgICAgcGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZWxlbWVudCwgYWZ0ZXIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJlbnROb2RlLmluc2VydEJlZm9yZShlbGVtZW50LCBhZnRlcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG1vcnBoQ2hpbGRyZW47XG4gIH0pKCk7XG5cbiAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBTaW5nbGUgTm9kZSBNb3JwaGluZyBDb2RlXG4gIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgY29uc3QgbW9ycGhOb2RlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge05vZGV9IG9sZE5vZGUgcm9vdCBub2RlIHRvIG1lcmdlIGNvbnRlbnQgaW50b1xuICAgICAqIEBwYXJhbSB7Tm9kZX0gbmV3Q29udGVudCBuZXcgY29udGVudCB0byBtZXJnZVxuICAgICAqIEBwYXJhbSB7TW9ycGhDb250ZXh0fSBjdHggdGhlIG1lcmdlIGNvbnRleHRcbiAgICAgKiBAcmV0dXJucyB7Tm9kZSB8IG51bGx9IHRoZSBlbGVtZW50IHRoYXQgZW5kZWQgdXAgaW4gdGhlIERPTVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1vcnBoTm9kZShvbGROb2RlLCBuZXdDb250ZW50LCBjdHgpIHtcbiAgICAgIGlmIChjdHguaWdub3JlQWN0aXZlICYmIG9sZE5vZGUgPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpIHtcbiAgICAgICAgLy8gZG9uJ3QgbW9ycGggZm9jdXNlZCBlbGVtZW50XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAoY3R4LmNhbGxiYWNrcy5iZWZvcmVOb2RlTW9ycGhlZChvbGROb2RlLCBuZXdDb250ZW50KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIG9sZE5vZGU7XG4gICAgICB9XG5cbiAgICAgIGlmIChvbGROb2RlIGluc3RhbmNlb2YgSFRNTEhlYWRFbGVtZW50ICYmIGN0eC5oZWFkLmlnbm9yZSkgOyBlbHNlIGlmIChcbiAgICAgICAgb2xkTm9kZSBpbnN0YW5jZW9mIEhUTUxIZWFkRWxlbWVudCAmJlxuICAgICAgICBjdHguaGVhZC5zdHlsZSAhPT0gXCJtb3JwaFwiXG4gICAgICApIHtcbiAgICAgICAgLy8gb2sgdG8gY2FzdDogaWYgbmV3Q29udGVudCB3YXNuJ3QgYWxzbyBhIDxoZWFkPiwgaXQgd291bGQndmUgZ290IGNhdWdodCBpbiB0aGUgYCFpc1NvZnRNYXRjaGAgYnJhbmNoIGFib3ZlXG4gICAgICAgIGhhbmRsZUhlYWRFbGVtZW50KFxuICAgICAgICAgIG9sZE5vZGUsXG4gICAgICAgICAgLyoqIEB0eXBlIHtIVE1MSGVhZEVsZW1lbnR9ICovIChuZXdDb250ZW50KSxcbiAgICAgICAgICBjdHgsXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtb3JwaEF0dHJpYnV0ZXMob2xkTm9kZSwgbmV3Q29udGVudCwgY3R4KTtcbiAgICAgICAgaWYgKCFpZ25vcmVWYWx1ZU9mQWN0aXZlRWxlbWVudChvbGROb2RlLCBjdHgpKSB7XG4gICAgICAgICAgLy8gQHRzLWlnbm9yZSBuZXdDb250ZW50IGNhbiBiZSBhIG5vZGUgaGVyZSBiZWNhdXNlIC5maXJzdENoaWxkIHdpbGwgYmUgbnVsbFxuICAgICAgICAgIG1vcnBoQ2hpbGRyZW4oY3R4LCBvbGROb2RlLCBuZXdDb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY3R4LmNhbGxiYWNrcy5hZnRlck5vZGVNb3JwaGVkKG9sZE5vZGUsIG5ld0NvbnRlbnQpO1xuICAgICAgcmV0dXJuIG9sZE5vZGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc3luY3MgdGhlIG9sZE5vZGUgdG8gdGhlIG5ld05vZGUsIGNvcHlpbmcgb3ZlciBhbGwgYXR0cmlidXRlcyBhbmRcbiAgICAgKiBpbm5lciBlbGVtZW50IHN0YXRlIGZyb20gdGhlIG5ld05vZGUgdG8gdGhlIG9sZE5vZGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gb2xkTm9kZSB0aGUgbm9kZSB0byBjb3B5IGF0dHJpYnV0ZXMgJiBzdGF0ZSB0b1xuICAgICAqIEBwYXJhbSB7Tm9kZX0gbmV3Tm9kZSB0aGUgbm9kZSB0byBjb3B5IGF0dHJpYnV0ZXMgJiBzdGF0ZSBmcm9tXG4gICAgICogQHBhcmFtIHtNb3JwaENvbnRleHR9IGN0eCB0aGUgbWVyZ2UgY29udGV4dFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1vcnBoQXR0cmlidXRlcyhvbGROb2RlLCBuZXdOb2RlLCBjdHgpIHtcbiAgICAgIGxldCB0eXBlID0gbmV3Tm9kZS5ub2RlVHlwZTtcblxuICAgICAgLy8gaWYgaXMgYW4gZWxlbWVudCB0eXBlLCBzeW5jIHRoZSBhdHRyaWJ1dGVzIGZyb20gdGhlXG4gICAgICAvLyBuZXcgbm9kZSBpbnRvIHRoZSBuZXcgbm9kZVxuICAgICAgaWYgKHR5cGUgPT09IDEgLyogZWxlbWVudCB0eXBlICovKSB7XG4gICAgICAgIGNvbnN0IG9sZEVsdCA9IC8qKiBAdHlwZSB7RWxlbWVudH0gKi8gKG9sZE5vZGUpO1xuICAgICAgICBjb25zdCBuZXdFbHQgPSAvKiogQHR5cGUge0VsZW1lbnR9ICovIChuZXdOb2RlKTtcblxuICAgICAgICBjb25zdCBvbGRBdHRyaWJ1dGVzID0gb2xkRWx0LmF0dHJpYnV0ZXM7XG4gICAgICAgIGNvbnN0IG5ld0F0dHJpYnV0ZXMgPSBuZXdFbHQuYXR0cmlidXRlcztcbiAgICAgICAgZm9yIChjb25zdCBuZXdBdHRyaWJ1dGUgb2YgbmV3QXR0cmlidXRlcykge1xuICAgICAgICAgIGlmIChpZ25vcmVBdHRyaWJ1dGUobmV3QXR0cmlidXRlLm5hbWUsIG9sZEVsdCwgXCJ1cGRhdGVcIiwgY3R4KSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChvbGRFbHQuZ2V0QXR0cmlidXRlKG5ld0F0dHJpYnV0ZS5uYW1lKSAhPT0gbmV3QXR0cmlidXRlLnZhbHVlKSB7XG4gICAgICAgICAgICBvbGRFbHQuc2V0QXR0cmlidXRlKG5ld0F0dHJpYnV0ZS5uYW1lLCBuZXdBdHRyaWJ1dGUudmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBpdGVyYXRlIGJhY2t3YXJkcyB0byBhdm9pZCBza2lwcGluZyBvdmVyIGl0ZW1zIHdoZW4gYSBkZWxldGUgb2NjdXJzXG4gICAgICAgIGZvciAobGV0IGkgPSBvbGRBdHRyaWJ1dGVzLmxlbmd0aCAtIDE7IDAgPD0gaTsgaS0tKSB7XG4gICAgICAgICAgY29uc3Qgb2xkQXR0cmlidXRlID0gb2xkQXR0cmlidXRlc1tpXTtcblxuICAgICAgICAgIC8vIHRvQXR0cmlidXRlcyBpcyBhIGxpdmUgTmFtZWROb2RlTWFwLCBzbyBpdGVyYXRpb24rbXV0YXRpb24gaXMgdW5zYWZlXG4gICAgICAgICAgLy8gZS5nLiBjdXN0b20gZWxlbWVudCBhdHRyaWJ1dGUgY2FsbGJhY2tzIGNhbiByZW1vdmUgb3RoZXIgYXR0cmlidXRlc1xuICAgICAgICAgIGlmICghb2xkQXR0cmlidXRlKSBjb250aW51ZTtcblxuICAgICAgICAgIGlmICghbmV3RWx0Lmhhc0F0dHJpYnV0ZShvbGRBdHRyaWJ1dGUubmFtZSkpIHtcbiAgICAgICAgICAgIGlmIChpZ25vcmVBdHRyaWJ1dGUob2xkQXR0cmlidXRlLm5hbWUsIG9sZEVsdCwgXCJyZW1vdmVcIiwgY3R4KSkge1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9sZEVsdC5yZW1vdmVBdHRyaWJ1dGUob2xkQXR0cmlidXRlLm5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaWdub3JlVmFsdWVPZkFjdGl2ZUVsZW1lbnQob2xkRWx0LCBjdHgpKSB7XG4gICAgICAgICAgc3luY0lucHV0VmFsdWUob2xkRWx0LCBuZXdFbHQsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gc3luYyB0ZXh0IG5vZGVzXG4gICAgICBpZiAodHlwZSA9PT0gOCAvKiBjb21tZW50ICovIHx8IHR5cGUgPT09IDMgLyogdGV4dCAqLykge1xuICAgICAgICBpZiAob2xkTm9kZS5ub2RlVmFsdWUgIT09IG5ld05vZGUubm9kZVZhbHVlKSB7XG4gICAgICAgICAgb2xkTm9kZS5ub2RlVmFsdWUgPSBuZXdOb2RlLm5vZGVWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE5COiBtYW55IGJvdGhhbnMgZGllZCB0byBicmluZyB1cyBpbmZvcm1hdGlvbjpcbiAgICAgKlxuICAgICAqICBodHRwczovL2dpdGh1Yi5jb20vcGF0cmljay1zdGVlbGUtaWRlbS9tb3JwaGRvbS9ibG9iL21hc3Rlci9zcmMvc3BlY2lhbEVsSGFuZGxlcnMuanNcbiAgICAgKiAgaHR0cHM6Ly9naXRodWIuY29tL2Nob29qcy9uYW5vbW9ycGgvYmxvYi9tYXN0ZXIvbGliL21vcnBoLmpzTDExM1xuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBvbGRFbGVtZW50IHRoZSBlbGVtZW50IHRvIHN5bmMgdGhlIGlucHV0IHZhbHVlIHRvXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBuZXdFbGVtZW50IHRoZSBlbGVtZW50IHRvIHN5bmMgdGhlIGlucHV0IHZhbHVlIGZyb21cbiAgICAgKiBAcGFyYW0ge01vcnBoQ29udGV4dH0gY3R4IHRoZSBtZXJnZSBjb250ZXh0XG4gICAgICovXG4gICAgZnVuY3Rpb24gc3luY0lucHV0VmFsdWUob2xkRWxlbWVudCwgbmV3RWxlbWVudCwgY3R4KSB7XG4gICAgICBpZiAoXG4gICAgICAgIG9sZEVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50ICYmXG4gICAgICAgIG5ld0VsZW1lbnQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50ICYmXG4gICAgICAgIG5ld0VsZW1lbnQudHlwZSAhPT0gXCJmaWxlXCJcbiAgICAgICkge1xuICAgICAgICBsZXQgbmV3VmFsdWUgPSBuZXdFbGVtZW50LnZhbHVlO1xuICAgICAgICBsZXQgb2xkVmFsdWUgPSBvbGRFbGVtZW50LnZhbHVlO1xuXG4gICAgICAgIC8vIHN5bmMgYm9vbGVhbiBhdHRyaWJ1dGVzXG4gICAgICAgIHN5bmNCb29sZWFuQXR0cmlidXRlKG9sZEVsZW1lbnQsIG5ld0VsZW1lbnQsIFwiY2hlY2tlZFwiLCBjdHgpO1xuICAgICAgICBzeW5jQm9vbGVhbkF0dHJpYnV0ZShvbGRFbGVtZW50LCBuZXdFbGVtZW50LCBcImRpc2FibGVkXCIsIGN0eCk7XG5cbiAgICAgICAgaWYgKCFuZXdFbGVtZW50Lmhhc0F0dHJpYnV0ZShcInZhbHVlXCIpKSB7XG4gICAgICAgICAgaWYgKCFpZ25vcmVBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBvbGRFbGVtZW50LCBcInJlbW92ZVwiLCBjdHgpKSB7XG4gICAgICAgICAgICBvbGRFbGVtZW50LnZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgIG9sZEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwidmFsdWVcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKG9sZFZhbHVlICE9PSBuZXdWYWx1ZSkge1xuICAgICAgICAgIGlmICghaWdub3JlQXR0cmlidXRlKFwidmFsdWVcIiwgb2xkRWxlbWVudCwgXCJ1cGRhdGVcIiwgY3R4KSkge1xuICAgICAgICAgICAgb2xkRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBuZXdWYWx1ZSk7XG4gICAgICAgICAgICBvbGRFbGVtZW50LnZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE86IFFVRVNUSU9OKDFjZyk6IHRoaXMgdXNlZCB0byBvbmx5IGNoZWNrIGBuZXdFbGVtZW50YCB1bmxpa2UgdGhlIG90aGVyIGJyYW5jaGVzIC0tIHdoeT9cbiAgICAgICAgLy8gZGlkIEkgYnJlYWsgc29tZXRoaW5nP1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgb2xkRWxlbWVudCBpbnN0YW5jZW9mIEhUTUxPcHRpb25FbGVtZW50ICYmXG4gICAgICAgIG5ld0VsZW1lbnQgaW5zdGFuY2VvZiBIVE1MT3B0aW9uRWxlbWVudFxuICAgICAgKSB7XG4gICAgICAgIHN5bmNCb29sZWFuQXR0cmlidXRlKG9sZEVsZW1lbnQsIG5ld0VsZW1lbnQsIFwic2VsZWN0ZWRcIiwgY3R4KTtcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIG9sZEVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MVGV4dEFyZWFFbGVtZW50ICYmXG4gICAgICAgIG5ld0VsZW1lbnQgaW5zdGFuY2VvZiBIVE1MVGV4dEFyZWFFbGVtZW50XG4gICAgICApIHtcbiAgICAgICAgbGV0IG5ld1ZhbHVlID0gbmV3RWxlbWVudC52YWx1ZTtcbiAgICAgICAgbGV0IG9sZFZhbHVlID0gb2xkRWxlbWVudC52YWx1ZTtcbiAgICAgICAgaWYgKGlnbm9yZUF0dHJpYnV0ZShcInZhbHVlXCIsIG9sZEVsZW1lbnQsIFwidXBkYXRlXCIsIGN0eCkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5ld1ZhbHVlICE9PSBvbGRWYWx1ZSkge1xuICAgICAgICAgIG9sZEVsZW1lbnQudmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgb2xkRWxlbWVudC5maXJzdENoaWxkICYmXG4gICAgICAgICAgb2xkRWxlbWVudC5maXJzdENoaWxkLm5vZGVWYWx1ZSAhPT0gbmV3VmFsdWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgb2xkRWxlbWVudC5maXJzdENoaWxkLm5vZGVWYWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBvbGRFbGVtZW50IGVsZW1lbnQgdG8gd3JpdGUgdGhlIHZhbHVlIHRvXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBuZXdFbGVtZW50IGVsZW1lbnQgdG8gcmVhZCB0aGUgdmFsdWUgZnJvbVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGVOYW1lIHRoZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSB7TW9ycGhDb250ZXh0fSBjdHggdGhlIG1lcmdlIGNvbnRleHRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzeW5jQm9vbGVhbkF0dHJpYnV0ZShvbGRFbGVtZW50LCBuZXdFbGVtZW50LCBhdHRyaWJ1dGVOYW1lLCBjdHgpIHtcbiAgICAgIC8vIEB0cy1pZ25vcmUgdGhpcyBmdW5jdGlvbiBpcyBvbmx5IHVzZWQgb24gYm9vbGVhbiBhdHRycyB0aGF0IGFyZSByZWZsZWN0ZWQgYXMgZG9tIHByb3BlcnRpZXNcbiAgICAgIGNvbnN0IG5ld0xpdmVWYWx1ZSA9IG5ld0VsZW1lbnRbYXR0cmlidXRlTmFtZV0sXG4gICAgICAgIC8vIEB0cy1pZ25vcmUgZGl0dG9cbiAgICAgICAgb2xkTGl2ZVZhbHVlID0gb2xkRWxlbWVudFthdHRyaWJ1dGVOYW1lXTtcbiAgICAgIGlmIChuZXdMaXZlVmFsdWUgIT09IG9sZExpdmVWYWx1ZSkge1xuICAgICAgICBjb25zdCBpZ25vcmVVcGRhdGUgPSBpZ25vcmVBdHRyaWJ1dGUoXG4gICAgICAgICAgYXR0cmlidXRlTmFtZSxcbiAgICAgICAgICBvbGRFbGVtZW50LFxuICAgICAgICAgIFwidXBkYXRlXCIsXG4gICAgICAgICAgY3R4LFxuICAgICAgICApO1xuICAgICAgICBpZiAoIWlnbm9yZVVwZGF0ZSkge1xuICAgICAgICAgIC8vIHVwZGF0ZSBhdHRyaWJ1dGUncyBhc3NvY2lhdGVkIERPTSBwcm9wZXJ0eVxuICAgICAgICAgIC8vIEB0cy1pZ25vcmUgdGhpcyBmdW5jdGlvbiBpcyBvbmx5IHVzZWQgb24gYm9vbGVhbiBhdHRycyB0aGF0IGFyZSByZWZsZWN0ZWQgYXMgZG9tIHByb3BlcnRpZXNcbiAgICAgICAgICBvbGRFbGVtZW50W2F0dHJpYnV0ZU5hbWVdID0gbmV3RWxlbWVudFthdHRyaWJ1dGVOYW1lXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3TGl2ZVZhbHVlKSB7XG4gICAgICAgICAgaWYgKCFpZ25vcmVVcGRhdGUpIHtcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvR2xvc3NhcnkvQm9vbGVhbi9IVE1MXG4gICAgICAgICAgICAvLyB0aGlzIGlzIHRoZSBjb3JyZWN0IHdheSB0byBzZXQgYSBib29sZWFuIGF0dHJpYnV0ZSB0byBcInRydWVcIlxuICAgICAgICAgICAgb2xkRWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSwgXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICghaWdub3JlQXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUsIG9sZEVsZW1lbnQsIFwicmVtb3ZlXCIsIGN0eCkpIHtcbiAgICAgICAgICAgIG9sZEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyIHRoZSBhdHRyaWJ1dGUgdG8gYmUgbXV0YXRlZFxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB0aGF0IGlzIGdvaW5nIHRvIGJlIHVwZGF0ZWRcbiAgICAgKiBAcGFyYW0ge1widXBkYXRlXCIgfCBcInJlbW92ZVwifSB1cGRhdGVUeXBlXG4gICAgICogQHBhcmFtIHtNb3JwaENvbnRleHR9IGN0eCB0aGUgbWVyZ2UgY29udGV4dFxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIHRoZSBhdHRyaWJ1dGUgc2hvdWxkIGJlIGlnbm9yZWQsIGZhbHNlIG90aGVyd2lzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlnbm9yZUF0dHJpYnV0ZShhdHRyLCBlbGVtZW50LCB1cGRhdGVUeXBlLCBjdHgpIHtcbiAgICAgIGlmIChcbiAgICAgICAgYXR0ciA9PT0gXCJ2YWx1ZVwiICYmXG4gICAgICAgIGN0eC5pZ25vcmVBY3RpdmVWYWx1ZSAmJlxuICAgICAgICBlbGVtZW50ID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50XG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gKFxuICAgICAgICBjdHguY2FsbGJhY2tzLmJlZm9yZUF0dHJpYnV0ZVVwZGF0ZWQoYXR0ciwgZWxlbWVudCwgdXBkYXRlVHlwZSkgPT09XG4gICAgICAgIGZhbHNlXG4gICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gcG9zc2libGVBY3RpdmVFbGVtZW50XG4gICAgICogQHBhcmFtIHtNb3JwaENvbnRleHR9IGN0eFxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlnbm9yZVZhbHVlT2ZBY3RpdmVFbGVtZW50KHBvc3NpYmxlQWN0aXZlRWxlbWVudCwgY3R4KSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICAhIWN0eC5pZ25vcmVBY3RpdmVWYWx1ZSAmJlxuICAgICAgICBwb3NzaWJsZUFjdGl2ZUVsZW1lbnQgPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiZcbiAgICAgICAgcG9zc2libGVBY3RpdmVFbGVtZW50ICE9PSBkb2N1bWVudC5ib2R5XG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBtb3JwaE5vZGU7XG4gIH0pKCk7XG5cbiAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBIZWFkIE1hbmFnZW1lbnQgRnVuY3Rpb25zXG4gIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLyoqXG4gICAqIEBwYXJhbSB7TW9ycGhDb250ZXh0fSBjdHhcbiAgICogQHBhcmFtIHtFbGVtZW50fSBvbGROb2RlXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gbmV3Tm9kZVxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKiBAcmV0dXJucyB7Tm9kZVtdIHwgUHJvbWlzZTxOb2RlW10+fVxuICAgKi9cbiAgZnVuY3Rpb24gd2l0aEhlYWRCbG9ja2luZyhjdHgsIG9sZE5vZGUsIG5ld05vZGUsIGNhbGxiYWNrKSB7XG4gICAgaWYgKGN0eC5oZWFkLmJsb2NrKSB7XG4gICAgICBjb25zdCBvbGRIZWFkID0gb2xkTm9kZS5xdWVyeVNlbGVjdG9yKFwiaGVhZFwiKTtcbiAgICAgIGNvbnN0IG5ld0hlYWQgPSBuZXdOb2RlLnF1ZXJ5U2VsZWN0b3IoXCJoZWFkXCIpO1xuICAgICAgaWYgKG9sZEhlYWQgJiYgbmV3SGVhZCkge1xuICAgICAgICBjb25zdCBwcm9taXNlcyA9IGhhbmRsZUhlYWRFbGVtZW50KG9sZEhlYWQsIG5ld0hlYWQsIGN0eCk7XG4gICAgICAgIC8vIHdoZW4gaGVhZCBwcm9taXNlcyByZXNvbHZlLCBwcm9jZWVkIGlnbm9yaW5nIHRoZSBoZWFkIHRhZ1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IG5ld0N0eCA9IE9iamVjdC5hc3NpZ24oY3R4LCB7XG4gICAgICAgICAgICBoZWFkOiB7XG4gICAgICAgICAgICAgIGJsb2NrOiBmYWxzZSxcbiAgICAgICAgICAgICAgaWdub3JlOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3Q3R4KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIGp1c3QgcHJvY2VlZCBpZiB3ZSBub3QgaGVhZCBibG9ja2luZ1xuICAgIHJldHVybiBjYWxsYmFjayhjdHgpO1xuICB9XG5cbiAgLyoqXG4gICAqICBUaGUgSEVBRCB0YWcgY2FuIGJlIGhhbmRsZWQgc3BlY2lhbGx5LCBlaXRoZXIgdy8gYSAnbWVyZ2UnIG9yICdhcHBlbmQnIHN0eWxlXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gb2xkSGVhZFxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IG5ld0hlYWRcbiAgICogQHBhcmFtIHtNb3JwaENvbnRleHR9IGN0eFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPltdfVxuICAgKi9cbiAgZnVuY3Rpb24gaGFuZGxlSGVhZEVsZW1lbnQob2xkSGVhZCwgbmV3SGVhZCwgY3R4KSB7XG4gICAgbGV0IGFkZGVkID0gW107XG4gICAgbGV0IHJlbW92ZWQgPSBbXTtcbiAgICBsZXQgcHJlc2VydmVkID0gW107XG4gICAgbGV0IG5vZGVzVG9BcHBlbmQgPSBbXTtcblxuICAgIC8vIHB1dCBhbGwgbmV3IGhlYWQgZWxlbWVudHMgaW50byBhIE1hcCwgYnkgdGhlaXIgb3V0ZXJIVE1MXG4gICAgbGV0IHNyY1RvTmV3SGVhZE5vZGVzID0gbmV3IE1hcCgpO1xuICAgIGZvciAoY29uc3QgbmV3SGVhZENoaWxkIG9mIG5ld0hlYWQuY2hpbGRyZW4pIHtcbiAgICAgIHNyY1RvTmV3SGVhZE5vZGVzLnNldChuZXdIZWFkQ2hpbGQub3V0ZXJIVE1MLCBuZXdIZWFkQ2hpbGQpO1xuICAgIH1cblxuICAgIC8vIGZvciBlYWNoIGVsdCBpbiB0aGUgY3VycmVudCBoZWFkXG4gICAgZm9yIChjb25zdCBjdXJyZW50SGVhZEVsdCBvZiBvbGRIZWFkLmNoaWxkcmVuKSB7XG4gICAgICAvLyBJZiB0aGUgY3VycmVudCBoZWFkIGVsZW1lbnQgaXMgaW4gdGhlIG1hcFxuICAgICAgbGV0IGluTmV3Q29udGVudCA9IHNyY1RvTmV3SGVhZE5vZGVzLmhhcyhjdXJyZW50SGVhZEVsdC5vdXRlckhUTUwpO1xuICAgICAgbGV0IGlzUmVBcHBlbmRlZCA9IGN0eC5oZWFkLnNob3VsZFJlQXBwZW5kKGN1cnJlbnRIZWFkRWx0KTtcbiAgICAgIGxldCBpc1ByZXNlcnZlZCA9IGN0eC5oZWFkLnNob3VsZFByZXNlcnZlKGN1cnJlbnRIZWFkRWx0KTtcbiAgICAgIGlmIChpbk5ld0NvbnRlbnQgfHwgaXNQcmVzZXJ2ZWQpIHtcbiAgICAgICAgaWYgKGlzUmVBcHBlbmRlZCkge1xuICAgICAgICAgIC8vIHJlbW92ZSB0aGUgY3VycmVudCB2ZXJzaW9uIGFuZCBsZXQgdGhlIG5ldyB2ZXJzaW9uIHJlcGxhY2UgaXQgYW5kIHJlLWV4ZWN1dGVcbiAgICAgICAgICByZW1vdmVkLnB1c2goY3VycmVudEhlYWRFbHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHRoaXMgZWxlbWVudCBhbHJlYWR5IGV4aXN0cyBhbmQgc2hvdWxkIG5vdCBiZSByZS1hcHBlbmRlZCwgc28gcmVtb3ZlIGl0IGZyb21cbiAgICAgICAgICAvLyB0aGUgbmV3IGNvbnRlbnQgbWFwLCBwcmVzZXJ2aW5nIGl0IGluIHRoZSBET01cbiAgICAgICAgICBzcmNUb05ld0hlYWROb2Rlcy5kZWxldGUoY3VycmVudEhlYWRFbHQub3V0ZXJIVE1MKTtcbiAgICAgICAgICBwcmVzZXJ2ZWQucHVzaChjdXJyZW50SGVhZEVsdCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChjdHguaGVhZC5zdHlsZSA9PT0gXCJhcHBlbmRcIikge1xuICAgICAgICAgIC8vIHdlIGFyZSBhcHBlbmRpbmcgYW5kIHRoaXMgZXhpc3RpbmcgZWxlbWVudCBpcyBub3QgbmV3IGNvbnRlbnRcbiAgICAgICAgICAvLyBzbyBpZiBhbmQgb25seSBpZiBpdCBpcyBtYXJrZWQgZm9yIHJlLWFwcGVuZCBkbyB3ZSBkbyBhbnl0aGluZ1xuICAgICAgICAgIGlmIChpc1JlQXBwZW5kZWQpIHtcbiAgICAgICAgICAgIHJlbW92ZWQucHVzaChjdXJyZW50SGVhZEVsdCk7XG4gICAgICAgICAgICBub2Rlc1RvQXBwZW5kLnB1c2goY3VycmVudEhlYWRFbHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBpZiB0aGlzIGlzIGEgbWVyZ2UsIHdlIHJlbW92ZSB0aGlzIGNvbnRlbnQgc2luY2UgaXQgaXMgbm90IGluIHRoZSBuZXcgaGVhZFxuICAgICAgICAgIGlmIChjdHguaGVhZC5zaG91bGRSZW1vdmUoY3VycmVudEhlYWRFbHQpICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgcmVtb3ZlZC5wdXNoKGN1cnJlbnRIZWFkRWx0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQdXNoIHRoZSByZW1haW5pbmcgbmV3IGhlYWQgZWxlbWVudHMgaW4gdGhlIE1hcCBpbnRvIHRoZVxuICAgIC8vIG5vZGVzIHRvIGFwcGVuZCB0byB0aGUgaGVhZCB0YWdcbiAgICBub2Rlc1RvQXBwZW5kLnB1c2goLi4uc3JjVG9OZXdIZWFkTm9kZXMudmFsdWVzKCkpO1xuXG4gICAgbGV0IHByb21pc2VzID0gW107XG4gICAgZm9yIChjb25zdCBuZXdOb2RlIG9mIG5vZGVzVG9BcHBlbmQpIHtcbiAgICAgIC8vIFRPRE86IFRoaXMgY291bGQgdGhlb3JldGljYWxseSBiZSBudWxsLCBiYXNlZCBvbiB0eXBlXG4gICAgICBsZXQgbmV3RWx0ID0gLyoqIEB0eXBlIHtDaGlsZE5vZGV9ICovIChcbiAgICAgICAgZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQobmV3Tm9kZS5vdXRlckhUTUwpXG4gICAgICAgICAgLmZpcnN0Q2hpbGRcbiAgICAgICk7XG4gICAgICBpZiAoY3R4LmNhbGxiYWNrcy5iZWZvcmVOb2RlQWRkZWQobmV3RWx0KSAhPT0gZmFsc2UpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIChcImhyZWZcIiBpbiBuZXdFbHQgJiYgbmV3RWx0LmhyZWYpIHx8XG4gICAgICAgICAgKFwic3JjXCIgaW4gbmV3RWx0ICYmIG5ld0VsdC5zcmMpXG4gICAgICAgICkge1xuICAgICAgICAgIC8qKiBAdHlwZSB7KHJlc3VsdD86IGFueSkgPT4gdm9pZH0gKi8gbGV0IHJlc29sdmU7XG4gICAgICAgICAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAoX3Jlc29sdmUpIHtcbiAgICAgICAgICAgIHJlc29sdmUgPSBfcmVzb2x2ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBuZXdFbHQuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHByb21pc2VzLnB1c2gocHJvbWlzZSk7XG4gICAgICAgIH1cbiAgICAgICAgb2xkSGVhZC5hcHBlbmRDaGlsZChuZXdFbHQpO1xuICAgICAgICBjdHguY2FsbGJhY2tzLmFmdGVyTm9kZUFkZGVkKG5ld0VsdCk7XG4gICAgICAgIGFkZGVkLnB1c2gobmV3RWx0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZW1vdmUgYWxsIHJlbW92ZWQgZWxlbWVudHMsIGFmdGVyIHdlIGhhdmUgYXBwZW5kZWQgdGhlIG5ldyBlbGVtZW50cyB0byBhdm9pZFxuICAgIC8vIGFkZGl0aW9uYWwgbmV0d29yayByZXF1ZXN0cyBmb3IgdGhpbmdzIGxpa2Ugc3R5bGUgc2hlZXRzXG4gICAgZm9yIChjb25zdCByZW1vdmVkRWxlbWVudCBvZiByZW1vdmVkKSB7XG4gICAgICBpZiAoY3R4LmNhbGxiYWNrcy5iZWZvcmVOb2RlUmVtb3ZlZChyZW1vdmVkRWxlbWVudCkgIT09IGZhbHNlKSB7XG4gICAgICAgIG9sZEhlYWQucmVtb3ZlQ2hpbGQocmVtb3ZlZEVsZW1lbnQpO1xuICAgICAgICBjdHguY2FsbGJhY2tzLmFmdGVyTm9kZVJlbW92ZWQocmVtb3ZlZEVsZW1lbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGN0eC5oZWFkLmFmdGVySGVhZE1vcnBoZWQob2xkSGVhZCwge1xuICAgICAgYWRkZWQ6IGFkZGVkLFxuICAgICAga2VwdDogcHJlc2VydmVkLFxuICAgICAgcmVtb3ZlZDogcmVtb3ZlZCxcbiAgICB9KTtcbiAgICByZXR1cm4gcHJvbWlzZXM7XG4gIH1cblxuICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIENyZWF0ZSBNb3JwaCBDb250ZXh0IEZ1bmN0aW9uc1xuICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIGNvbnN0IGNyZWF0ZU1vcnBoQ29udGV4dCA9IChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG9sZE5vZGVcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG5ld0NvbnRlbnRcbiAgICAgKiBAcGFyYW0ge0NvbmZpZ30gY29uZmlnXG4gICAgICogQHJldHVybnMge01vcnBoQ29udGV4dH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVNb3JwaENvbnRleHQob2xkTm9kZSwgbmV3Q29udGVudCwgY29uZmlnKSB7XG4gICAgICBjb25zdCB7IHBlcnNpc3RlbnRJZHMsIGlkTWFwIH0gPSBjcmVhdGVJZE1hcHMob2xkTm9kZSwgbmV3Q29udGVudCk7XG5cbiAgICAgIGNvbnN0IG1lcmdlZENvbmZpZyA9IG1lcmdlRGVmYXVsdHMoY29uZmlnKTtcbiAgICAgIGNvbnN0IG1vcnBoU3R5bGUgPSBtZXJnZWRDb25maWcubW9ycGhTdHlsZSB8fCBcIm91dGVySFRNTFwiO1xuICAgICAgaWYgKCFbXCJpbm5lckhUTUxcIiwgXCJvdXRlckhUTUxcIl0uaW5jbHVkZXMobW9ycGhTdHlsZSkpIHtcbiAgICAgICAgdGhyb3cgYERvIG5vdCB1bmRlcnN0YW5kIGhvdyB0byBtb3JwaCBzdHlsZSAke21vcnBoU3R5bGV9YDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGFyZ2V0OiBvbGROb2RlLFxuICAgICAgICBuZXdDb250ZW50OiBuZXdDb250ZW50LFxuICAgICAgICBjb25maWc6IG1lcmdlZENvbmZpZyxcbiAgICAgICAgbW9ycGhTdHlsZTogbW9ycGhTdHlsZSxcbiAgICAgICAgaWdub3JlQWN0aXZlOiBtZXJnZWRDb25maWcuaWdub3JlQWN0aXZlLFxuICAgICAgICBpZ25vcmVBY3RpdmVWYWx1ZTogbWVyZ2VkQ29uZmlnLmlnbm9yZUFjdGl2ZVZhbHVlLFxuICAgICAgICByZXN0b3JlRm9jdXM6IG1lcmdlZENvbmZpZy5yZXN0b3JlRm9jdXMsXG4gICAgICAgIGlkTWFwOiBpZE1hcCxcbiAgICAgICAgcGVyc2lzdGVudElkczogcGVyc2lzdGVudElkcyxcbiAgICAgICAgcGFudHJ5OiBjcmVhdGVQYW50cnkoKSxcbiAgICAgICAgY2FsbGJhY2tzOiBtZXJnZWRDb25maWcuY2FsbGJhY2tzLFxuICAgICAgICBoZWFkOiBtZXJnZWRDb25maWcuaGVhZCxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVlcCBtZXJnZXMgdGhlIGNvbmZpZyBvYmplY3QgYW5kIHRoZSBJZGlvbW9ycGguZGVmYXVsdHMgb2JqZWN0IHRvXG4gICAgICogcHJvZHVjZSBhIGZpbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0XG4gICAgICogQHBhcmFtIHtDb25maWd9IGNvbmZpZ1xuICAgICAqIEByZXR1cm5zIHtDb25maWdJbnRlcm5hbH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtZXJnZURlZmF1bHRzKGNvbmZpZykge1xuICAgICAgbGV0IGZpbmFsQ29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdHMpO1xuXG4gICAgICAvLyBjb3B5IHRvcCBsZXZlbCBzdHVmZiBpbnRvIGZpbmFsIGNvbmZpZ1xuICAgICAgT2JqZWN0LmFzc2lnbihmaW5hbENvbmZpZywgY29uZmlnKTtcblxuICAgICAgLy8gY29weSBjYWxsYmFja3MgaW50byBmaW5hbCBjb25maWcgKGRvIHRoaXMgdG8gZGVlcCBtZXJnZSB0aGUgY2FsbGJhY2tzKVxuICAgICAgZmluYWxDb25maWcuY2FsbGJhY2tzID0gT2JqZWN0LmFzc2lnbihcbiAgICAgICAge30sXG4gICAgICAgIGRlZmF1bHRzLmNhbGxiYWNrcyxcbiAgICAgICAgY29uZmlnLmNhbGxiYWNrcyxcbiAgICAgICk7XG5cbiAgICAgIC8vIGNvcHkgaGVhZCBjb25maWcgaW50byBmaW5hbCBjb25maWcgIChkbyB0aGlzIHRvIGRlZXAgbWVyZ2UgdGhlIGhlYWQpXG4gICAgICBmaW5hbENvbmZpZy5oZWFkID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdHMuaGVhZCwgY29uZmlnLmhlYWQpO1xuXG4gICAgICByZXR1cm4gZmluYWxDb25maWc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMge0hUTUxEaXZFbGVtZW50fVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZVBhbnRyeSgpIHtcbiAgICAgIGNvbnN0IHBhbnRyeSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBwYW50cnkuaGlkZGVuID0gdHJ1ZTtcbiAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJlbmRcIiwgcGFudHJ5KTtcbiAgICAgIHJldHVybiBwYW50cnk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbGwgZWxlbWVudHMgd2l0aCBhbiBJRCBjb250YWluZWQgd2l0aGluIHRoZSByb290IGVsZW1lbnQgYW5kIGl0cyBkZXNjZW5kYW50c1xuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSByb290XG4gICAgICogQHJldHVybnMge0VsZW1lbnRbXX1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmaW5kSWRFbGVtZW50cyhyb290KSB7XG4gICAgICBsZXQgZWxlbWVudHMgPSBBcnJheS5mcm9tKHJvb3QucXVlcnlTZWxlY3RvckFsbChcIltpZF1cIikpO1xuICAgICAgaWYgKHJvb3QuaWQpIHtcbiAgICAgICAgZWxlbWVudHMucHVzaChyb290KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBlbGVtZW50cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIGJvdHRvbS11cCBhbGdvcml0aG0gdGhhdCBwb3B1bGF0ZXMgYSBtYXAgb2YgRWxlbWVudCAtPiBJZFNldC5cbiAgICAgKiBUaGUgaWRTZXQgZm9yIGEgZ2l2ZW4gZWxlbWVudCBpcyB0aGUgc2V0IG9mIGFsbCBJRHMgY29udGFpbmVkIHdpdGhpbiBpdHMgc3VidHJlZS5cbiAgICAgKiBBcyBhbiBvcHRpbXphdGlvbiwgd2UgZmlsdGVyIHRoZXNlIElEcyB0aHJvdWdoIHRoZSBnaXZlbiBsaXN0IG9mIHBlcnNpc3RlbnQgSURzLFxuICAgICAqIGJlY2F1c2Ugd2UgZG9uJ3QgbmVlZCB0byBib3RoZXIgY29uc2lkZXJpbmcgSURlZCBlbGVtZW50cyB0aGF0IHdvbid0IGJlIGluIHRoZSBuZXcgY29udGVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7TWFwPE5vZGUsIFNldDxzdHJpbmc+Pn0gaWRNYXBcbiAgICAgKiBAcGFyYW0ge1NldDxzdHJpbmc+fSBwZXJzaXN0ZW50SWRzXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSByb290XG4gICAgICogQHBhcmFtIHtFbGVtZW50W119IGVsZW1lbnRzXG4gICAgICovXG4gICAgZnVuY3Rpb24gcG9wdWxhdGVJZE1hcFdpdGhUcmVlKGlkTWFwLCBwZXJzaXN0ZW50SWRzLCByb290LCBlbGVtZW50cykge1xuICAgICAgZm9yIChjb25zdCBlbHQgb2YgZWxlbWVudHMpIHtcbiAgICAgICAgaWYgKHBlcnNpc3RlbnRJZHMuaGFzKGVsdC5pZCkpIHtcbiAgICAgICAgICAvKiogQHR5cGUge0VsZW1lbnR8bnVsbH0gKi9cbiAgICAgICAgICBsZXQgY3VycmVudCA9IGVsdDtcbiAgICAgICAgICAvLyB3YWxrIHVwIHRoZSBwYXJlbnQgaGllcmFyY2h5IG9mIHRoYXQgZWxlbWVudCwgYWRkaW5nIHRoZSBpZFxuICAgICAgICAgIC8vIG9mIGVsZW1lbnQgdG8gdGhlIHBhcmVudCdzIGlkIHNldFxuICAgICAgICAgIHdoaWxlIChjdXJyZW50KSB7XG4gICAgICAgICAgICBsZXQgaWRTZXQgPSBpZE1hcC5nZXQoY3VycmVudCk7XG4gICAgICAgICAgICAvLyBpZiB0aGUgaWQgc2V0IGRvZXNuJ3QgZXhpc3QsIGNyZWF0ZSBpdCBhbmQgaW5zZXJ0IGl0IGluIHRoZSBtYXBcbiAgICAgICAgICAgIGlmIChpZFNldCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgIGlkU2V0ID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgICBpZE1hcC5zZXQoY3VycmVudCwgaWRTZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWRTZXQuYWRkKGVsdC5pZCk7XG5cbiAgICAgICAgICAgIGlmIChjdXJyZW50ID09PSByb290KSBicmVhaztcbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBjb21wdXRlcyBhIG1hcCBvZiBub2RlcyB0byBhbGwgaWRzIGNvbnRhaW5lZCB3aXRoaW4gdGhhdCBub2RlIChpbmNsdXNpdmUgb2YgdGhlXG4gICAgICogbm9kZSkuICBUaGlzIG1hcCBjYW4gYmUgdXNlZCB0byBhc2sgaWYgdHdvIG5vZGVzIGhhdmUgaW50ZXJzZWN0aW5nIHNldHMgb2YgaWRzLCB3aGljaCBhbGxvd3NcbiAgICAgKiBmb3IgYSBsb29zZXIgZGVmaW5pdGlvbiBvZiBcIm1hdGNoaW5nXCIgdGhhbiB0cmFkaXRpb24gaWQgbWF0Y2hpbmcsIGFuZCBhbGxvd3MgY2hpbGQgbm9kZXNcbiAgICAgKiB0byBjb250cmlidXRlIHRvIGEgcGFyZW50IG5vZGVzIG1hdGNoaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBvbGRDb250ZW50ICB0aGUgb2xkIGNvbnRlbnQgdGhhdCB3aWxsIGJlIG1vcnBoZWRcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG5ld0NvbnRlbnQgIHRoZSBuZXcgY29udGVudCB0byBtb3JwaCB0b1xuICAgICAqIEByZXR1cm5zIHtJZFNldHN9XG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlSWRNYXBzKG9sZENvbnRlbnQsIG5ld0NvbnRlbnQpIHtcbiAgICAgIGNvbnN0IG9sZElkRWxlbWVudHMgPSBmaW5kSWRFbGVtZW50cyhvbGRDb250ZW50KTtcbiAgICAgIGNvbnN0IG5ld0lkRWxlbWVudHMgPSBmaW5kSWRFbGVtZW50cyhuZXdDb250ZW50KTtcblxuICAgICAgY29uc3QgcGVyc2lzdGVudElkcyA9IGNyZWF0ZVBlcnNpc3RlbnRJZHMob2xkSWRFbGVtZW50cywgbmV3SWRFbGVtZW50cyk7XG5cbiAgICAgIC8qKiBAdHlwZSB7TWFwPE5vZGUsIFNldDxzdHJpbmc+Pn0gKi9cbiAgICAgIGxldCBpZE1hcCA9IG5ldyBNYXAoKTtcbiAgICAgIHBvcHVsYXRlSWRNYXBXaXRoVHJlZShpZE1hcCwgcGVyc2lzdGVudElkcywgb2xkQ29udGVudCwgb2xkSWRFbGVtZW50cyk7XG5cbiAgICAgIC8qKiBAdHMtaWdub3JlIC0gaWYgbmV3Q29udGVudCBpcyBhIGR1Y2stdHlwZWQgcGFyZW50LCBwYXNzIGl0cyBzaW5nbGUgY2hpbGQgbm9kZSBhcyB0aGUgcm9vdCB0byBoYWx0IHVwd2FyZHMgaXRlcmF0aW9uICovXG4gICAgICBjb25zdCBuZXdSb290ID0gbmV3Q29udGVudC5fX2lkaW9tb3JwaFJvb3QgfHwgbmV3Q29udGVudDtcbiAgICAgIHBvcHVsYXRlSWRNYXBXaXRoVHJlZShpZE1hcCwgcGVyc2lzdGVudElkcywgbmV3Um9vdCwgbmV3SWRFbGVtZW50cyk7XG5cbiAgICAgIHJldHVybiB7IHBlcnNpc3RlbnRJZHMsIGlkTWFwIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBjb21wdXRlcyB0aGUgc2V0IG9mIGlkcyB0aGF0IHBlcnNpc3QgYmV0d2VlbiB0aGUgdHdvIGNvbnRlbnRzIGV4Y2x1ZGluZyBkdXBsaWNhdGVzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnRbXX0gb2xkSWRFbGVtZW50c1xuICAgICAqIEBwYXJhbSB7RWxlbWVudFtdfSBuZXdJZEVsZW1lbnRzXG4gICAgICogQHJldHVybnMge1NldDxzdHJpbmc+fVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZVBlcnNpc3RlbnRJZHMob2xkSWRFbGVtZW50cywgbmV3SWRFbGVtZW50cykge1xuICAgICAgbGV0IGR1cGxpY2F0ZUlkcyA9IG5ldyBTZXQoKTtcblxuICAgICAgLyoqIEB0eXBlIHtNYXA8c3RyaW5nLCBzdHJpbmc+fSAqL1xuICAgICAgbGV0IG9sZElkVGFnTmFtZU1hcCA9IG5ldyBNYXAoKTtcbiAgICAgIGZvciAoY29uc3QgeyBpZCwgdGFnTmFtZSB9IG9mIG9sZElkRWxlbWVudHMpIHtcbiAgICAgICAgaWYgKG9sZElkVGFnTmFtZU1hcC5oYXMoaWQpKSB7XG4gICAgICAgICAgZHVwbGljYXRlSWRzLmFkZChpZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb2xkSWRUYWdOYW1lTWFwLnNldChpZCwgdGFnTmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGV0IHBlcnNpc3RlbnRJZHMgPSBuZXcgU2V0KCk7XG4gICAgICBmb3IgKGNvbnN0IHsgaWQsIHRhZ05hbWUgfSBvZiBuZXdJZEVsZW1lbnRzKSB7XG4gICAgICAgIGlmIChwZXJzaXN0ZW50SWRzLmhhcyhpZCkpIHtcbiAgICAgICAgICBkdXBsaWNhdGVJZHMuYWRkKGlkKTtcbiAgICAgICAgfSBlbHNlIGlmIChvbGRJZFRhZ05hbWVNYXAuZ2V0KGlkKSA9PT0gdGFnTmFtZSkge1xuICAgICAgICAgIHBlcnNpc3RlbnRJZHMuYWRkKGlkKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBza2lwIGlmIHRhZyB0eXBlcyBtaXNtYXRjaCBiZWNhdXNlIGl0cyBub3QgcG9zc2libGUgdG8gbW9ycGggb25lIHRhZyBpbnRvIGFub3RoZXJcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBpZCBvZiBkdXBsaWNhdGVJZHMpIHtcbiAgICAgICAgcGVyc2lzdGVudElkcy5kZWxldGUoaWQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBlcnNpc3RlbnRJZHM7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNyZWF0ZU1vcnBoQ29udGV4dDtcbiAgfSkoKTtcblxuICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIEhUTUwgTm9ybWFsaXphdGlvbiBGdW5jdGlvbnNcbiAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBjb25zdCB7IG5vcm1hbGl6ZUVsZW1lbnQsIG5vcm1hbGl6ZVBhcmVudCB9ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAvKiogQHR5cGUge1dlYWtTZXQ8Tm9kZT59ICovXG4gICAgY29uc3QgZ2VuZXJhdGVkQnlJZGlvbW9ycGggPSBuZXcgV2Vha1NldCgpO1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnQgfCBEb2N1bWVudH0gY29udGVudFxuICAgICAqIEByZXR1cm5zIHtFbGVtZW50fVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZUVsZW1lbnQoY29udGVudCkge1xuICAgICAgaWYgKGNvbnRlbnQgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xuICAgICAgICByZXR1cm4gY29udGVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVsbCB8IHN0cmluZyB8IE5vZGUgfCBIVE1MQ29sbGVjdGlvbiB8IE5vZGVbXSB8IERvY3VtZW50ICYge2dlbmVyYXRlZEJ5SWRpb21vcnBoOmJvb2xlYW59fSBuZXdDb250ZW50XG4gICAgICogQHJldHVybnMge0VsZW1lbnR9XG4gICAgICovXG4gICAgZnVuY3Rpb24gbm9ybWFsaXplUGFyZW50KG5ld0NvbnRlbnQpIHtcbiAgICAgIGlmIChuZXdDb250ZW50ID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7IC8vIGR1bW15IHBhcmVudCBlbGVtZW50XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBuZXdDb250ZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiBub3JtYWxpemVQYXJlbnQocGFyc2VDb250ZW50KG5ld0NvbnRlbnQpKTtcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIGdlbmVyYXRlZEJ5SWRpb21vcnBoLmhhcygvKiogQHR5cGUge0VsZW1lbnR9ICovIChuZXdDb250ZW50KSlcbiAgICAgICkge1xuICAgICAgICAvLyB0aGUgdGVtcGxhdGUgdGFnIGNyZWF0ZWQgYnkgaWRpb21vcnBoIHBhcnNpbmcgY2FuIHNlcnZlIGFzIGEgZHVtbXkgcGFyZW50XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge0VsZW1lbnR9ICovIChuZXdDb250ZW50KTtcbiAgICAgIH0gZWxzZSBpZiAobmV3Q29udGVudCBpbnN0YW5jZW9mIE5vZGUpIHtcbiAgICAgICAgaWYgKG5ld0NvbnRlbnQucGFyZW50Tm9kZSkge1xuICAgICAgICAgIC8vIHdlIGNhbid0IHVzZSB0aGUgcGFyZW50IGRpcmVjdGx5IGJlY2F1c2UgbmV3Q29udGVudCBtYXkgaGF2ZSBzaWJsaW5nc1xuICAgICAgICAgIC8vIHRoYXQgd2UgZG9uJ3Qgd2FudCBpbiB0aGUgbW9ycGgsIGFuZCByZXBhcmVudGluZyBtaWdodCBiZSBleHBlbnNpdmUgKFRPRE8gaXMgaXQ/KSxcbiAgICAgICAgICAvLyBzbyB3ZSBjcmVhdGUgYSBkdWNrLXR5cGVkIHBhcmVudCBub2RlIGluc3RlYWQuXG4gICAgICAgICAgcmV0dXJuIGNyZWF0ZUR1Y2tUeXBlZFBhcmVudChuZXdDb250ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBhIHNpbmdsZSBub2RlIGlzIGFkZGVkIGFzIGEgY2hpbGQgdG8gYSBkdW1teSBwYXJlbnRcbiAgICAgICAgICBjb25zdCBkdW1teVBhcmVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgZHVtbXlQYXJlbnQuYXBwZW5kKG5ld0NvbnRlbnQpO1xuICAgICAgICAgIHJldHVybiBkdW1teVBhcmVudDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gYWxsIG5vZGVzIGluIHRoZSBhcnJheSBvciBIVE1MRWxlbWVudCBjb2xsZWN0aW9uIGFyZSBjb25zb2xpZGF0ZWQgdW5kZXJcbiAgICAgICAgLy8gYSBzaW5nbGUgZHVtbXkgcGFyZW50IGVsZW1lbnRcbiAgICAgICAgY29uc3QgZHVtbXlQYXJlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBmb3IgKGNvbnN0IGVsdCBvZiBbLi4ubmV3Q29udGVudF0pIHtcbiAgICAgICAgICBkdW1teVBhcmVudC5hcHBlbmQoZWx0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZHVtbXlQYXJlbnQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZha2UgZHVjay10eXBlZCBwYXJlbnQgZWxlbWVudCB0byB3cmFwIGEgc2luZ2xlIG5vZGUsIHdpdGhvdXQgYWN0dWFsbHkgcmVwYXJlbnRpbmcgaXQuXG4gICAgICogXCJJZiBpdCB3YWxrcyBsaWtlIGEgZHVjaywgYW5kIHF1YWNrcyBsaWtlIGEgZHVjaywgdGhlbiBpdCBtdXN0IGJlIGEgZHVjayFcIiAtLSBKYW1lcyBXaGl0Y29tYiBSaWxleSAoMTg0OVx1MjAxMzE5MTYpXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge05vZGV9IG5ld0NvbnRlbnRcbiAgICAgKiBAcmV0dXJucyB7RWxlbWVudH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVEdWNrVHlwZWRQYXJlbnQobmV3Q29udGVudCkge1xuICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7RWxlbWVudH0gKi8gKFxuICAgICAgICAvKiogQHR5cGUge3Vua25vd259ICovICh7XG4gICAgICAgICAgY2hpbGROb2RlczogW25ld0NvbnRlbnRdLFxuICAgICAgICAgIC8qKiBAdHMtaWdub3JlIC0gY292ZXIgeW91ciBleWVzIGZvciBhIG1pbnV0ZSwgdHNjICovXG4gICAgICAgICAgcXVlcnlTZWxlY3RvckFsbDogKHMpID0+IHtcbiAgICAgICAgICAgIC8qKiBAdHMtaWdub3JlICovXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50cyA9IG5ld0NvbnRlbnQucXVlcnlTZWxlY3RvckFsbChzKTtcbiAgICAgICAgICAgIC8qKiBAdHMtaWdub3JlICovXG4gICAgICAgICAgICByZXR1cm4gbmV3Q29udGVudC5tYXRjaGVzKHMpID8gW25ld0NvbnRlbnQsIC4uLmVsZW1lbnRzXSA6IGVsZW1lbnRzO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgLyoqIEB0cy1pZ25vcmUgKi9cbiAgICAgICAgICBpbnNlcnRCZWZvcmU6IChuLCByKSA9PiBuZXdDb250ZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG4sIHIpLFxuICAgICAgICAgIC8qKiBAdHMtaWdub3JlICovXG4gICAgICAgICAgbW92ZUJlZm9yZTogKG4sIHIpID0+IG5ld0NvbnRlbnQucGFyZW50Tm9kZS5tb3ZlQmVmb3JlKG4sIHIpLFxuICAgICAgICAgIC8vIGZvciBsYXRlciB1c2Ugd2l0aCBwb3B1bGF0ZUlkTWFwV2l0aFRyZWUgdG8gaGFsdCB1cHdhcmRzIGl0ZXJhdGlvblxuICAgICAgICAgIGdldCBfX2lkaW9tb3JwaFJvb3QoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3Q29udGVudDtcbiAgICAgICAgICB9LFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuZXdDb250ZW50XG4gICAgICogQHJldHVybnMge05vZGUgfCBudWxsIHwgRG9jdW1lbnRGcmFnbWVudH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwYXJzZUNvbnRlbnQobmV3Q29udGVudCkge1xuICAgICAgbGV0IHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcblxuICAgICAgLy8gcmVtb3ZlIHN2Z3MgdG8gYXZvaWQgZmFsc2UtcG9zaXRpdmUgbWF0Y2hlcyBvbiBoZWFkLCBldGMuXG4gICAgICBsZXQgY29udGVudFdpdGhTdmdzUmVtb3ZlZCA9IG5ld0NvbnRlbnQucmVwbGFjZShcbiAgICAgICAgLzxzdmcoXFxzW14+XSo+fD4pKFtcXHNcXFNdKj8pPFxcL3N2Zz4vZ2ltLFxuICAgICAgICBcIlwiLFxuICAgICAgKTtcblxuICAgICAgLy8gaWYgdGhlIG5ld0NvbnRlbnQgY29udGFpbnMgYSBodG1sLCBoZWFkIG9yIGJvZHkgdGFnLCB3ZSBjYW4gc2ltcGx5IHBhcnNlIGl0IHcvbyB3cmFwcGluZ1xuICAgICAgaWYgKFxuICAgICAgICBjb250ZW50V2l0aFN2Z3NSZW1vdmVkLm1hdGNoKC88XFwvaHRtbD4vKSB8fFxuICAgICAgICBjb250ZW50V2l0aFN2Z3NSZW1vdmVkLm1hdGNoKC88XFwvaGVhZD4vKSB8fFxuICAgICAgICBjb250ZW50V2l0aFN2Z3NSZW1vdmVkLm1hdGNoKC88XFwvYm9keT4vKVxuICAgICAgKSB7XG4gICAgICAgIGxldCBjb250ZW50ID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyhuZXdDb250ZW50LCBcInRleHQvaHRtbFwiKTtcbiAgICAgICAgLy8gaWYgaXQgaXMgYSBmdWxsIEhUTUwgZG9jdW1lbnQsIHJldHVybiB0aGUgZG9jdW1lbnQgaXRzZWxmIGFzIHRoZSBwYXJlbnQgY29udGFpbmVyXG4gICAgICAgIGlmIChjb250ZW50V2l0aFN2Z3NSZW1vdmVkLm1hdGNoKC88XFwvaHRtbD4vKSkge1xuICAgICAgICAgIGdlbmVyYXRlZEJ5SWRpb21vcnBoLmFkZChjb250ZW50KTtcbiAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBvdGhlcndpc2UgcmV0dXJuIHRoZSBodG1sIGVsZW1lbnQgYXMgdGhlIHBhcmVudCBjb250YWluZXJcbiAgICAgICAgICBsZXQgaHRtbEVsZW1lbnQgPSBjb250ZW50LmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgaWYgKGh0bWxFbGVtZW50KSB7XG4gICAgICAgICAgICBnZW5lcmF0ZWRCeUlkaW9tb3JwaC5hZGQoaHRtbEVsZW1lbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gaHRtbEVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGlmIGl0IGlzIHBhcnRpYWwgSFRNTCwgd3JhcCBpdCBpbiBhIHRlbXBsYXRlIHRhZyB0byBwcm92aWRlIGEgcGFyZW50IGVsZW1lbnQgYW5kIGFsc28gdG8gaGVscFxuICAgICAgICAvLyBkZWFsIHdpdGggdG91Y2h5IHRhZ3MgbGlrZSB0ciwgdGJvZHksIGV0Yy5cbiAgICAgICAgbGV0IHJlc3BvbnNlRG9jID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyhcbiAgICAgICAgICBcIjxib2R5Pjx0ZW1wbGF0ZT5cIiArIG5ld0NvbnRlbnQgKyBcIjwvdGVtcGxhdGU+PC9ib2R5PlwiLFxuICAgICAgICAgIFwidGV4dC9odG1sXCIsXG4gICAgICAgICk7XG4gICAgICAgIGxldCBjb250ZW50ID0gLyoqIEB0eXBlIHtIVE1MVGVtcGxhdGVFbGVtZW50fSAqLyAoXG4gICAgICAgICAgcmVzcG9uc2VEb2MuYm9keS5xdWVyeVNlbGVjdG9yKFwidGVtcGxhdGVcIilcbiAgICAgICAgKS5jb250ZW50O1xuICAgICAgICBnZW5lcmF0ZWRCeUlkaW9tb3JwaC5hZGQoY29udGVudCk7XG4gICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IG5vcm1hbGl6ZUVsZW1lbnQsIG5vcm1hbGl6ZVBhcmVudCB9O1xuICB9KSgpO1xuXG4gIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gVGhpcyBpcyB3aGF0IGVuZHMgdXAgYmVjb21pbmcgdGhlIElkaW9tb3JwaCBnbG9iYWwgb2JqZWN0XG4gIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgcmV0dXJuIHtcbiAgICBtb3JwaCxcbiAgICBkZWZhdWx0cyxcbiAgfTtcbn0pKCk7XG5cbi8qKlxuICogTW9ycGggdGhlIHN0YXRlIG9mIHRoZSBjdXJyZW50RWxlbWVudCBiYXNlZCBvbiB0aGUgYXR0cmlidXRlcyBhbmQgY29udGVudHMgb2ZcbiAqIHRoZSBuZXdFbGVtZW50LiBNb3JwaGluZyBtYXkgZGlzcGF0Y2ggdHVyYm86YmVmb3JlLW1vcnBoLWVsZW1lbnQsXG4gKiB0dXJibzpiZWZvcmUtbW9ycGgtYXR0cmlidXRlLCBhbmQgdHVyYm86bW9ycGgtZWxlbWVudCBldmVudHMuXG4gKlxuICogQHBhcmFtIGN1cnJlbnRFbGVtZW50IEVsZW1lbnQgZGVzdGluYXRpb24gb2YgbW9ycGhpbmcgY2hhbmdlc1xuICogQHBhcmFtIG5ld0VsZW1lbnQgRWxlbWVudCBzb3VyY2Ugb2YgbW9ycGhpbmcgY2hhbmdlc1xuICovXG5mdW5jdGlvbiBtb3JwaEVsZW1lbnRzKGN1cnJlbnRFbGVtZW50LCBuZXdFbGVtZW50LCB7IGNhbGxiYWNrcywgLi4ub3B0aW9ucyB9ID0ge30pIHtcbiAgSWRpb21vcnBoLm1vcnBoKGN1cnJlbnRFbGVtZW50LCBuZXdFbGVtZW50LCB7XG4gICAgLi4ub3B0aW9ucyxcbiAgICBjYWxsYmFja3M6IG5ldyBEZWZhdWx0SWRpb21vcnBoQ2FsbGJhY2tzKGNhbGxiYWNrcylcbiAgfSk7XG59XG5cbi8qKlxuICogTW9ycGggdGhlIGNoaWxkIGVsZW1lbnRzIG9mIHRoZSBjdXJyZW50RWxlbWVudCBiYXNlZCBvbiB0aGUgY2hpbGQgZWxlbWVudHMgb2ZcbiAqIHRoZSBuZXdFbGVtZW50LiBNb3JwaGluZyBjaGlsZHJlbiBtYXkgZGlzcGF0Y2ggdHVyYm86YmVmb3JlLW1vcnBoLWVsZW1lbnQsXG4gKiB0dXJibzpiZWZvcmUtbW9ycGgtYXR0cmlidXRlLCBhbmQgdHVyYm86bW9ycGgtZWxlbWVudCBldmVudHMuXG4gKlxuICogQHBhcmFtIGN1cnJlbnRFbGVtZW50IEVsZW1lbnQgZGVzdGluYXRpb24gb2YgbW9ycGhpbmcgY2hpbGRyZW4gY2hhbmdlc1xuICogQHBhcmFtIG5ld0VsZW1lbnQgRWxlbWVudCBzb3VyY2Ugb2YgbW9ycGhpbmcgY2hpbGRyZW4gY2hhbmdlc1xuICovXG5mdW5jdGlvbiBtb3JwaENoaWxkcmVuKGN1cnJlbnRFbGVtZW50LCBuZXdFbGVtZW50LCBvcHRpb25zID0ge30pIHtcbiAgbW9ycGhFbGVtZW50cyhjdXJyZW50RWxlbWVudCwgbmV3RWxlbWVudC5jaGlsZE5vZGVzLCB7XG4gICAgLi4ub3B0aW9ucyxcbiAgICBtb3JwaFN0eWxlOiBcImlubmVySFRNTFwiXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBzaG91bGRSZWZyZXNoRnJhbWVXaXRoTW9ycGhpbmcoY3VycmVudEZyYW1lLCBuZXdGcmFtZSkge1xuICByZXR1cm4gY3VycmVudEZyYW1lIGluc3RhbmNlb2YgRnJhbWVFbGVtZW50ICYmXG4gICAgLy8gbmV3RnJhbWUgY2Fubm90IHlldCBiZSBhbiBpbnN0YW5jZSBvZiBGcmFtZUVsZW1lbnQgYmVjYXVzZSBjdXN0b21cbiAgICAvLyBlbGVtZW50cyBkb24ndCBnZXQgaW5pdGlhbGl6ZWQgdW50aWwgdGhleSdyZSBhdHRhY2hlZCB0byB0aGUgRE9NLCBzb1xuICAgIC8vIHRlc3QgaXRzIEVsZW1lbnQjbm9kZU5hbWUgaW5zdGVhZFxuICAgIG5ld0ZyYW1lIGluc3RhbmNlb2YgRWxlbWVudCAmJiBuZXdGcmFtZS5ub2RlTmFtZSA9PT0gXCJUVVJCTy1GUkFNRVwiICYmXG4gICAgY3VycmVudEZyYW1lLnNob3VsZFJlbG9hZFdpdGhNb3JwaCAmJlxuICAgIGN1cnJlbnRGcmFtZS5pZCA9PT0gbmV3RnJhbWUuaWQgJiZcbiAgICAoIW5ld0ZyYW1lLmdldEF0dHJpYnV0ZShcInNyY1wiKSB8fCB1cmxzQXJlRXF1YWwoY3VycmVudEZyYW1lLnNyYywgbmV3RnJhbWUuZ2V0QXR0cmlidXRlKFwic3JjXCIpKSkgJiZcbiAgICAhY3VycmVudEZyYW1lLmNsb3Nlc3QoXCJbZGF0YS10dXJiby1wZXJtYW5lbnRdXCIpXG59XG5cbmZ1bmN0aW9uIGNsb3Nlc3RGcmFtZVJlbG9hZGFibGVXaXRoTW9ycGhpbmcobm9kZSkge1xuICByZXR1cm4gbm9kZS5wYXJlbnRFbGVtZW50LmNsb3Nlc3QoXCJ0dXJiby1mcmFtZVtzcmNdW3JlZnJlc2g9bW9ycGhdXCIpXG59XG5cbmNsYXNzIERlZmF1bHRJZGlvbW9ycGhDYWxsYmFja3Mge1xuICAjYmVmb3JlTm9kZU1vcnBoZWRcblxuICBjb25zdHJ1Y3Rvcih7IGJlZm9yZU5vZGVNb3JwaGVkIH0gPSB7fSkge1xuICAgIHRoaXMuI2JlZm9yZU5vZGVNb3JwaGVkID0gYmVmb3JlTm9kZU1vcnBoZWQgfHwgKCgpID0+IHRydWUpO1xuICB9XG5cbiAgYmVmb3JlTm9kZUFkZGVkID0gKG5vZGUpID0+IHtcbiAgICByZXR1cm4gIShub2RlLmlkICYmIG5vZGUuaGFzQXR0cmlidXRlKFwiZGF0YS10dXJiby1wZXJtYW5lbnRcIikgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobm9kZS5pZCkpXG4gIH1cblxuICBiZWZvcmVOb2RlTW9ycGhlZCA9IChjdXJyZW50RWxlbWVudCwgbmV3RWxlbWVudCkgPT4ge1xuICAgIGlmIChjdXJyZW50RWxlbWVudCBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcbiAgICAgIGlmICghY3VycmVudEVsZW1lbnQuaGFzQXR0cmlidXRlKFwiZGF0YS10dXJiby1wZXJtYW5lbnRcIikgJiYgdGhpcy4jYmVmb3JlTm9kZU1vcnBoZWQoY3VycmVudEVsZW1lbnQsIG5ld0VsZW1lbnQpKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0gZGlzcGF0Y2goXCJ0dXJibzpiZWZvcmUtbW9ycGgtZWxlbWVudFwiLCB7XG4gICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICAgICAgICB0YXJnZXQ6IGN1cnJlbnRFbGVtZW50LFxuICAgICAgICAgIGRldGFpbDogeyBjdXJyZW50RWxlbWVudCwgbmV3RWxlbWVudCB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiAhZXZlbnQuZGVmYXVsdFByZXZlbnRlZFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYmVmb3JlQXR0cmlidXRlVXBkYXRlZCA9IChhdHRyaWJ1dGVOYW1lLCB0YXJnZXQsIG11dGF0aW9uVHlwZSkgPT4ge1xuICAgIGNvbnN0IGV2ZW50ID0gZGlzcGF0Y2goXCJ0dXJibzpiZWZvcmUtbW9ycGgtYXR0cmlidXRlXCIsIHtcbiAgICAgIGNhbmNlbGFibGU6IHRydWUsXG4gICAgICB0YXJnZXQsXG4gICAgICBkZXRhaWw6IHsgYXR0cmlidXRlTmFtZSwgbXV0YXRpb25UeXBlIH1cbiAgICB9KTtcblxuICAgIHJldHVybiAhZXZlbnQuZGVmYXVsdFByZXZlbnRlZFxuICB9XG5cbiAgYmVmb3JlTm9kZVJlbW92ZWQgPSAobm9kZSkgPT4ge1xuICAgIHJldHVybiB0aGlzLmJlZm9yZU5vZGVNb3JwaGVkKG5vZGUpXG4gIH1cblxuICBhZnRlck5vZGVNb3JwaGVkID0gKGN1cnJlbnRFbGVtZW50LCBuZXdFbGVtZW50KSA9PiB7XG4gICAgaWYgKGN1cnJlbnRFbGVtZW50IGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgZGlzcGF0Y2goXCJ0dXJibzptb3JwaC1lbGVtZW50XCIsIHtcbiAgICAgICAgdGFyZ2V0OiBjdXJyZW50RWxlbWVudCxcbiAgICAgICAgZGV0YWlsOiB7IGN1cnJlbnRFbGVtZW50LCBuZXdFbGVtZW50IH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBNb3JwaGluZ0ZyYW1lUmVuZGVyZXIgZXh0ZW5kcyBGcmFtZVJlbmRlcmVyIHtcbiAgc3RhdGljIHJlbmRlckVsZW1lbnQoY3VycmVudEVsZW1lbnQsIG5ld0VsZW1lbnQpIHtcbiAgICBkaXNwYXRjaChcInR1cmJvOmJlZm9yZS1mcmFtZS1tb3JwaFwiLCB7XG4gICAgICB0YXJnZXQ6IGN1cnJlbnRFbGVtZW50LFxuICAgICAgZGV0YWlsOiB7IGN1cnJlbnRFbGVtZW50LCBuZXdFbGVtZW50IH1cbiAgICB9KTtcblxuICAgIG1vcnBoQ2hpbGRyZW4oY3VycmVudEVsZW1lbnQsIG5ld0VsZW1lbnQsIHtcbiAgICAgIGNhbGxiYWNrczoge1xuICAgICAgICBiZWZvcmVOb2RlTW9ycGhlZDogKG5vZGUsIG5ld05vZGUpID0+IHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBzaG91bGRSZWZyZXNoRnJhbWVXaXRoTW9ycGhpbmcobm9kZSwgbmV3Tm9kZSkgJiZcbiAgICAgICAgICAgICAgY2xvc2VzdEZyYW1lUmVsb2FkYWJsZVdpdGhNb3JwaGluZyhub2RlKSA9PT0gY3VycmVudEVsZW1lbnRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIG5vZGUucmVsb2FkKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgcHJlc2VydmluZ1Blcm1hbmVudEVsZW1lbnRzKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIGF3YWl0IGNhbGxiYWNrKClcbiAgfVxufVxuXG5jbGFzcyBQcm9ncmVzc0JhciB7XG4gIHN0YXRpYyBhbmltYXRpb25EdXJhdGlvbiA9IDMwMCAvKm1zKi9cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRDU1MoKSB7XG4gICAgcmV0dXJuIHVuaW5kZW50YFxuICAgICAgLnR1cmJvLXByb2dyZXNzLWJhciB7XG4gICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgICAgaGVpZ2h0OiAzcHg7XG4gICAgICAgIGJhY2tncm91bmQ6ICMwMDc2ZmY7XG4gICAgICAgIHotaW5kZXg6IDIxNDc0ODM2NDc7XG4gICAgICAgIHRyYW5zaXRpb246XG4gICAgICAgICAgd2lkdGggJHtQcm9ncmVzc0Jhci5hbmltYXRpb25EdXJhdGlvbn1tcyBlYXNlLW91dCxcbiAgICAgICAgICBvcGFjaXR5ICR7UHJvZ3Jlc3NCYXIuYW5pbWF0aW9uRHVyYXRpb24gLyAyfW1zICR7UHJvZ3Jlc3NCYXIuYW5pbWF0aW9uRHVyYXRpb24gLyAyfW1zIGVhc2UtaW47XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgMCwgMCk7XG4gICAgICB9XG4gICAgYFxuICB9XG5cbiAgaGlkaW5nID0gZmFsc2VcbiAgdmFsdWUgPSAwXG4gIHZpc2libGUgPSBmYWxzZVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuc3R5bGVzaGVldEVsZW1lbnQgPSB0aGlzLmNyZWF0ZVN0eWxlc2hlZXRFbGVtZW50KCk7XG4gICAgdGhpcy5wcm9ncmVzc0VsZW1lbnQgPSB0aGlzLmNyZWF0ZVByb2dyZXNzRWxlbWVudCgpO1xuICAgIHRoaXMuaW5zdGFsbFN0eWxlc2hlZXRFbGVtZW50KCk7XG4gICAgdGhpcy5zZXRWYWx1ZSgwKTtcbiAgfVxuXG4gIHNob3coKSB7XG4gICAgaWYgKCF0aGlzLnZpc2libGUpIHtcbiAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XG4gICAgICB0aGlzLmluc3RhbGxQcm9ncmVzc0VsZW1lbnQoKTtcbiAgICAgIHRoaXMuc3RhcnRUcmlja2xpbmcoKTtcbiAgICB9XG4gIH1cblxuICBoaWRlKCkge1xuICAgIGlmICh0aGlzLnZpc2libGUgJiYgIXRoaXMuaGlkaW5nKSB7XG4gICAgICB0aGlzLmhpZGluZyA9IHRydWU7XG4gICAgICB0aGlzLmZhZGVQcm9ncmVzc0VsZW1lbnQoKCkgPT4ge1xuICAgICAgICB0aGlzLnVuaW5zdGFsbFByb2dyZXNzRWxlbWVudCgpO1xuICAgICAgICB0aGlzLnN0b3BUcmlja2xpbmcoKTtcbiAgICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaGlkaW5nID0gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBzZXRWYWx1ZSh2YWx1ZSkge1xuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB0aGlzLnJlZnJlc2goKTtcbiAgfVxuXG4gIC8vIFByaXZhdGVcblxuICBpbnN0YWxsU3R5bGVzaGVldEVsZW1lbnQoKSB7XG4gICAgZG9jdW1lbnQuaGVhZC5pbnNlcnRCZWZvcmUodGhpcy5zdHlsZXNoZWV0RWxlbWVudCwgZG9jdW1lbnQuaGVhZC5maXJzdENoaWxkKTtcbiAgfVxuXG4gIGluc3RhbGxQcm9ncmVzc0VsZW1lbnQoKSB7XG4gICAgdGhpcy5wcm9ncmVzc0VsZW1lbnQuc3R5bGUud2lkdGggPSBcIjBcIjtcbiAgICB0aGlzLnByb2dyZXNzRWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gXCIxXCI7XG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lmluc2VydEJlZm9yZSh0aGlzLnByb2dyZXNzRWxlbWVudCwgZG9jdW1lbnQuYm9keSk7XG4gICAgdGhpcy5yZWZyZXNoKCk7XG4gIH1cblxuICBmYWRlUHJvZ3Jlc3NFbGVtZW50KGNhbGxiYWNrKSB7XG4gICAgdGhpcy5wcm9ncmVzc0VsZW1lbnQuc3R5bGUub3BhY2l0eSA9IFwiMFwiO1xuICAgIHNldFRpbWVvdXQoY2FsbGJhY2ssIFByb2dyZXNzQmFyLmFuaW1hdGlvbkR1cmF0aW9uICogMS41KTtcbiAgfVxuXG4gIHVuaW5zdGFsbFByb2dyZXNzRWxlbWVudCgpIHtcbiAgICBpZiAodGhpcy5wcm9ncmVzc0VsZW1lbnQucGFyZW50Tm9kZSkge1xuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMucHJvZ3Jlc3NFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBzdGFydFRyaWNrbGluZygpIHtcbiAgICBpZiAoIXRoaXMudHJpY2tsZUludGVydmFsKSB7XG4gICAgICB0aGlzLnRyaWNrbGVJbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCh0aGlzLnRyaWNrbGUsIFByb2dyZXNzQmFyLmFuaW1hdGlvbkR1cmF0aW9uKTtcbiAgICB9XG4gIH1cblxuICBzdG9wVHJpY2tsaW5nKCkge1xuICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMudHJpY2tsZUludGVydmFsKTtcbiAgICBkZWxldGUgdGhpcy50cmlja2xlSW50ZXJ2YWw7XG4gIH1cblxuICB0cmlja2xlID0gKCkgPT4ge1xuICAgIHRoaXMuc2V0VmFsdWUodGhpcy52YWx1ZSArIE1hdGgucmFuZG9tKCkgLyAxMDApO1xuICB9XG5cbiAgcmVmcmVzaCgpIHtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgdGhpcy5wcm9ncmVzc0VsZW1lbnQuc3R5bGUud2lkdGggPSBgJHsxMCArIHRoaXMudmFsdWUgKiA5MH0lYDtcbiAgICB9KTtcbiAgfVxuXG4gIGNyZWF0ZVN0eWxlc2hlZXRFbGVtZW50KCkge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgZWxlbWVudC50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSBQcm9ncmVzc0Jhci5kZWZhdWx0Q1NTO1xuICAgIGNvbnN0IGNzcE5vbmNlID0gZ2V0Q3NwTm9uY2UoKTtcbiAgICBpZiAoY3NwTm9uY2UpIHtcbiAgICAgIGVsZW1lbnQubm9uY2UgPSBjc3BOb25jZTtcbiAgICB9XG4gICAgcmV0dXJuIGVsZW1lbnRcbiAgfVxuXG4gIGNyZWF0ZVByb2dyZXNzRWxlbWVudCgpIHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBlbGVtZW50LmNsYXNzTmFtZSA9IFwidHVyYm8tcHJvZ3Jlc3MtYmFyXCI7XG4gICAgcmV0dXJuIGVsZW1lbnRcbiAgfVxufVxuXG5jbGFzcyBIZWFkU25hcHNob3QgZXh0ZW5kcyBTbmFwc2hvdCB7XG4gIGRldGFpbHNCeU91dGVySFRNTCA9IHRoaXMuY2hpbGRyZW5cbiAgICAuZmlsdGVyKChlbGVtZW50KSA9PiAhZWxlbWVudElzTm9zY3JpcHQoZWxlbWVudCkpXG4gICAgLm1hcCgoZWxlbWVudCkgPT4gZWxlbWVudFdpdGhvdXROb25jZShlbGVtZW50KSlcbiAgICAucmVkdWNlKChyZXN1bHQsIGVsZW1lbnQpID0+IHtcbiAgICAgIGNvbnN0IHsgb3V0ZXJIVE1MIH0gPSBlbGVtZW50O1xuICAgICAgY29uc3QgZGV0YWlscyA9XG4gICAgICAgIG91dGVySFRNTCBpbiByZXN1bHRcbiAgICAgICAgICA/IHJlc3VsdFtvdXRlckhUTUxdXG4gICAgICAgICAgOiB7XG4gICAgICAgICAgICAgIHR5cGU6IGVsZW1lbnRUeXBlKGVsZW1lbnQpLFxuICAgICAgICAgICAgICB0cmFja2VkOiBlbGVtZW50SXNUcmFja2VkKGVsZW1lbnQpLFxuICAgICAgICAgICAgICBlbGVtZW50czogW11cbiAgICAgICAgICAgIH07XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5yZXN1bHQsXG4gICAgICAgIFtvdXRlckhUTUxdOiB7XG4gICAgICAgICAgLi4uZGV0YWlscyxcbiAgICAgICAgICBlbGVtZW50czogWy4uLmRldGFpbHMuZWxlbWVudHMsIGVsZW1lbnRdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7fSlcblxuICBnZXQgdHJhY2tlZEVsZW1lbnRTaWduYXR1cmUoKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuZGV0YWlsc0J5T3V0ZXJIVE1MKVxuICAgICAgLmZpbHRlcigob3V0ZXJIVE1MKSA9PiB0aGlzLmRldGFpbHNCeU91dGVySFRNTFtvdXRlckhUTUxdLnRyYWNrZWQpXG4gICAgICAuam9pbihcIlwiKVxuICB9XG5cbiAgZ2V0U2NyaXB0RWxlbWVudHNOb3RJblNuYXBzaG90KHNuYXBzaG90KSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0RWxlbWVudHNNYXRjaGluZ1R5cGVOb3RJblNuYXBzaG90KFwic2NyaXB0XCIsIHNuYXBzaG90KVxuICB9XG5cbiAgZ2V0U3R5bGVzaGVldEVsZW1lbnRzTm90SW5TbmFwc2hvdChzbmFwc2hvdCkge1xuICAgIHJldHVybiB0aGlzLmdldEVsZW1lbnRzTWF0Y2hpbmdUeXBlTm90SW5TbmFwc2hvdChcInN0eWxlc2hlZXRcIiwgc25hcHNob3QpXG4gIH1cblxuICBnZXRFbGVtZW50c01hdGNoaW5nVHlwZU5vdEluU25hcHNob3QobWF0Y2hlZFR5cGUsIHNuYXBzaG90KSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuZGV0YWlsc0J5T3V0ZXJIVE1MKVxuICAgICAgLmZpbHRlcigob3V0ZXJIVE1MKSA9PiAhKG91dGVySFRNTCBpbiBzbmFwc2hvdC5kZXRhaWxzQnlPdXRlckhUTUwpKVxuICAgICAgLm1hcCgob3V0ZXJIVE1MKSA9PiB0aGlzLmRldGFpbHNCeU91dGVySFRNTFtvdXRlckhUTUxdKVxuICAgICAgLmZpbHRlcigoeyB0eXBlIH0pID0+IHR5cGUgPT0gbWF0Y2hlZFR5cGUpXG4gICAgICAubWFwKCh7IGVsZW1lbnRzOiBbZWxlbWVudF0gfSkgPT4gZWxlbWVudClcbiAgfVxuXG4gIGdldCBwcm92aXNpb25hbEVsZW1lbnRzKCkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmRldGFpbHNCeU91dGVySFRNTCkucmVkdWNlKChyZXN1bHQsIG91dGVySFRNTCkgPT4ge1xuICAgICAgY29uc3QgeyB0eXBlLCB0cmFja2VkLCBlbGVtZW50cyB9ID0gdGhpcy5kZXRhaWxzQnlPdXRlckhUTUxbb3V0ZXJIVE1MXTtcbiAgICAgIGlmICh0eXBlID09IG51bGwgJiYgIXRyYWNrZWQpIHtcbiAgICAgICAgcmV0dXJuIFsuLi5yZXN1bHQsIC4uLmVsZW1lbnRzXVxuICAgICAgfSBlbHNlIGlmIChlbGVtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHJldHVybiBbLi4ucmVzdWx0LCAuLi5lbGVtZW50cy5zbGljZSgxKV1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgIH1cbiAgICB9LCBbXSlcbiAgfVxuXG4gIGdldE1ldGFWYWx1ZShuYW1lKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IHRoaXMuZmluZE1ldGFFbGVtZW50QnlOYW1lKG5hbWUpO1xuICAgIHJldHVybiBlbGVtZW50ID8gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJjb250ZW50XCIpIDogbnVsbFxuICB9XG5cbiAgZmluZE1ldGFFbGVtZW50QnlOYW1lKG5hbWUpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5kZXRhaWxzQnlPdXRlckhUTUwpLnJlZHVjZSgocmVzdWx0LCBvdXRlckhUTUwpID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZWxlbWVudHM6IFtlbGVtZW50XVxuICAgICAgfSA9IHRoaXMuZGV0YWlsc0J5T3V0ZXJIVE1MW291dGVySFRNTF07XG4gICAgICByZXR1cm4gZWxlbWVudElzTWV0YUVsZW1lbnRXaXRoTmFtZShlbGVtZW50LCBuYW1lKSA/IGVsZW1lbnQgOiByZXN1bHRcbiAgICB9LCB1bmRlZmluZWQgfCB1bmRlZmluZWQpXG4gIH1cbn1cblxuZnVuY3Rpb24gZWxlbWVudFR5cGUoZWxlbWVudCkge1xuICBpZiAoZWxlbWVudElzU2NyaXB0KGVsZW1lbnQpKSB7XG4gICAgcmV0dXJuIFwic2NyaXB0XCJcbiAgfSBlbHNlIGlmIChlbGVtZW50SXNTdHlsZXNoZWV0KGVsZW1lbnQpKSB7XG4gICAgcmV0dXJuIFwic3R5bGVzaGVldFwiXG4gIH1cbn1cblxuZnVuY3Rpb24gZWxlbWVudElzVHJhY2tlZChlbGVtZW50KSB7XG4gIHJldHVybiBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm8tdHJhY2tcIikgPT0gXCJyZWxvYWRcIlxufVxuXG5mdW5jdGlvbiBlbGVtZW50SXNTY3JpcHQoZWxlbWVudCkge1xuICBjb25zdCB0YWdOYW1lID0gZWxlbWVudC5sb2NhbE5hbWU7XG4gIHJldHVybiB0YWdOYW1lID09IFwic2NyaXB0XCJcbn1cblxuZnVuY3Rpb24gZWxlbWVudElzTm9zY3JpcHQoZWxlbWVudCkge1xuICBjb25zdCB0YWdOYW1lID0gZWxlbWVudC5sb2NhbE5hbWU7XG4gIHJldHVybiB0YWdOYW1lID09IFwibm9zY3JpcHRcIlxufVxuXG5mdW5jdGlvbiBlbGVtZW50SXNTdHlsZXNoZWV0KGVsZW1lbnQpIHtcbiAgY29uc3QgdGFnTmFtZSA9IGVsZW1lbnQubG9jYWxOYW1lO1xuICByZXR1cm4gdGFnTmFtZSA9PSBcInN0eWxlXCIgfHwgKHRhZ05hbWUgPT0gXCJsaW5rXCIgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJyZWxcIikgPT0gXCJzdHlsZXNoZWV0XCIpXG59XG5cbmZ1bmN0aW9uIGVsZW1lbnRJc01ldGFFbGVtZW50V2l0aE5hbWUoZWxlbWVudCwgbmFtZSkge1xuICBjb25zdCB0YWdOYW1lID0gZWxlbWVudC5sb2NhbE5hbWU7XG4gIHJldHVybiB0YWdOYW1lID09IFwibWV0YVwiICYmIGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKSA9PSBuYW1lXG59XG5cbmZ1bmN0aW9uIGVsZW1lbnRXaXRob3V0Tm9uY2UoZWxlbWVudCkge1xuICBpZiAoZWxlbWVudC5oYXNBdHRyaWJ1dGUoXCJub25jZVwiKSkge1xuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwibm9uY2VcIiwgXCJcIik7XG4gIH1cblxuICByZXR1cm4gZWxlbWVudFxufVxuXG5jbGFzcyBQYWdlU25hcHNob3QgZXh0ZW5kcyBTbmFwc2hvdCB7XG4gIHN0YXRpYyBmcm9tSFRNTFN0cmluZyhodG1sID0gXCJcIikge1xuICAgIHJldHVybiB0aGlzLmZyb21Eb2N1bWVudChwYXJzZUhUTUxEb2N1bWVudChodG1sKSlcbiAgfVxuXG4gIHN0YXRpYyBmcm9tRWxlbWVudChlbGVtZW50KSB7XG4gICAgcmV0dXJuIHRoaXMuZnJvbURvY3VtZW50KGVsZW1lbnQub3duZXJEb2N1bWVudClcbiAgfVxuXG4gIHN0YXRpYyBmcm9tRG9jdW1lbnQoeyBkb2N1bWVudEVsZW1lbnQsIGJvZHksIGhlYWQgfSkge1xuICAgIHJldHVybiBuZXcgdGhpcyhkb2N1bWVudEVsZW1lbnQsIGJvZHksIG5ldyBIZWFkU25hcHNob3QoaGVhZCkpXG4gIH1cblxuICBjb25zdHJ1Y3Rvcihkb2N1bWVudEVsZW1lbnQsIGJvZHksIGhlYWRTbmFwc2hvdCkge1xuICAgIHN1cGVyKGJvZHkpO1xuICAgIHRoaXMuZG9jdW1lbnRFbGVtZW50ID0gZG9jdW1lbnRFbGVtZW50O1xuICAgIHRoaXMuaGVhZFNuYXBzaG90ID0gaGVhZFNuYXBzaG90O1xuICB9XG5cbiAgY2xvbmUoKSB7XG4gICAgY29uc3QgY2xvbmVkRWxlbWVudCA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICBjb25zdCBzZWxlY3RFbGVtZW50cyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwic2VsZWN0XCIpO1xuICAgIGNvbnN0IGNsb25lZFNlbGVjdEVsZW1lbnRzID0gY2xvbmVkRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwic2VsZWN0XCIpO1xuXG4gICAgZm9yIChjb25zdCBbaW5kZXgsIHNvdXJjZV0gb2Ygc2VsZWN0RWxlbWVudHMuZW50cmllcygpKSB7XG4gICAgICBjb25zdCBjbG9uZSA9IGNsb25lZFNlbGVjdEVsZW1lbnRzW2luZGV4XTtcbiAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIGNsb25lLnNlbGVjdGVkT3B0aW9ucykgb3B0aW9uLnNlbGVjdGVkID0gZmFsc2U7XG4gICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBzb3VyY2Uuc2VsZWN0ZWRPcHRpb25zKSBjbG9uZS5vcHRpb25zW29wdGlvbi5pbmRleF0uc2VsZWN0ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgY2xvbmVkUGFzc3dvcmRJbnB1dCBvZiBjbG9uZWRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJwYXNzd29yZFwiXScpKSB7XG4gICAgICBjbG9uZWRQYXNzd29yZElucHV0LnZhbHVlID0gXCJcIjtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFBhZ2VTbmFwc2hvdCh0aGlzLmRvY3VtZW50RWxlbWVudCwgY2xvbmVkRWxlbWVudCwgdGhpcy5oZWFkU25hcHNob3QpXG4gIH1cblxuICBnZXQgbGFuZygpIHtcbiAgICByZXR1cm4gdGhpcy5kb2N1bWVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibGFuZ1wiKVxuICB9XG5cbiAgZ2V0IGhlYWRFbGVtZW50KCkge1xuICAgIHJldHVybiB0aGlzLmhlYWRTbmFwc2hvdC5lbGVtZW50XG4gIH1cblxuICBnZXQgcm9vdExvY2F0aW9uKCkge1xuICAgIGNvbnN0IHJvb3QgPSB0aGlzLmdldFNldHRpbmcoXCJyb290XCIpID8/IFwiL1wiO1xuICAgIHJldHVybiBleHBhbmRVUkwocm9vdClcbiAgfVxuXG4gIGdldCBjYWNoZUNvbnRyb2xWYWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRTZXR0aW5nKFwiY2FjaGUtY29udHJvbFwiKVxuICB9XG5cbiAgZ2V0IGlzUHJldmlld2FibGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FjaGVDb250cm9sVmFsdWUgIT0gXCJuby1wcmV2aWV3XCJcbiAgfVxuXG4gIGdldCBpc0NhY2hlYWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jYWNoZUNvbnRyb2xWYWx1ZSAhPSBcIm5vLWNhY2hlXCJcbiAgfVxuXG4gIGdldCBpc1Zpc2l0YWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRTZXR0aW5nKFwidmlzaXQtY29udHJvbFwiKSAhPSBcInJlbG9hZFwiXG4gIH1cblxuICBnZXQgcHJlZmVyc1ZpZXdUcmFuc2l0aW9ucygpIHtcbiAgICBjb25zdCB2aWV3VHJhbnNpdGlvbkVuYWJsZWQgPSB0aGlzLmdldFNldHRpbmcoXCJ2aWV3LXRyYW5zaXRpb25cIikgPT09IFwidHJ1ZVwiIHx8IHRoaXMuaGVhZFNuYXBzaG90LmdldE1ldGFWYWx1ZShcInZpZXctdHJhbnNpdGlvblwiKSA9PT0gXCJzYW1lLW9yaWdpblwiO1xuICAgIHJldHVybiB2aWV3VHJhbnNpdGlvbkVuYWJsZWQgJiYgIXdpbmRvdy5tYXRjaE1lZGlhKFwiKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246IHJlZHVjZSlcIikubWF0Y2hlc1xuICB9XG5cbiAgZ2V0IHNob3VsZE1vcnBoUGFnZSgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRTZXR0aW5nKFwicmVmcmVzaC1tZXRob2RcIikgPT09IFwibW9ycGhcIlxuICB9XG5cbiAgZ2V0IHNob3VsZFByZXNlcnZlU2Nyb2xsUG9zaXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U2V0dGluZyhcInJlZnJlc2gtc2Nyb2xsXCIpID09PSBcInByZXNlcnZlXCJcbiAgfVxuXG4gIC8vIFByaXZhdGVcblxuICBnZXRTZXR0aW5nKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5oZWFkU25hcHNob3QuZ2V0TWV0YVZhbHVlKGB0dXJiby0ke25hbWV9YClcbiAgfVxufVxuXG5jbGFzcyBWaWV3VHJhbnNpdGlvbmVyIHtcbiAgI3ZpZXdUcmFuc2l0aW9uU3RhcnRlZCA9IGZhbHNlXG4gICNsYXN0T3BlcmF0aW9uID0gUHJvbWlzZS5yZXNvbHZlKClcblxuICByZW5kZXJDaGFuZ2UodXNlVmlld1RyYW5zaXRpb24sIHJlbmRlcikge1xuICAgIGlmICh1c2VWaWV3VHJhbnNpdGlvbiAmJiB0aGlzLnZpZXdUcmFuc2l0aW9uc0F2YWlsYWJsZSAmJiAhdGhpcy4jdmlld1RyYW5zaXRpb25TdGFydGVkKSB7XG4gICAgICB0aGlzLiN2aWV3VHJhbnNpdGlvblN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgdGhpcy4jbGFzdE9wZXJhdGlvbiA9IHRoaXMuI2xhc3RPcGVyYXRpb24udGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IGRvY3VtZW50LnN0YXJ0Vmlld1RyYW5zaXRpb24ocmVuZGVyKS5maW5pc2hlZDtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiNsYXN0T3BlcmF0aW9uID0gdGhpcy4jbGFzdE9wZXJhdGlvbi50aGVuKHJlbmRlcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuI2xhc3RPcGVyYXRpb25cbiAgfVxuXG4gIGdldCB2aWV3VHJhbnNpdGlvbnNBdmFpbGFibGUoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LnN0YXJ0Vmlld1RyYW5zaXRpb25cbiAgfVxufVxuXG5jb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgYWN0aW9uOiBcImFkdmFuY2VcIixcbiAgaGlzdG9yeUNoYW5nZWQ6IGZhbHNlLFxuICB2aXNpdENhY2hlZFNuYXBzaG90OiAoKSA9PiB7fSxcbiAgd2lsbFJlbmRlcjogdHJ1ZSxcbiAgdXBkYXRlSGlzdG9yeTogdHJ1ZSxcbiAgc2hvdWxkQ2FjaGVTbmFwc2hvdDogdHJ1ZSxcbiAgYWNjZXB0c1N0cmVhbVJlc3BvbnNlOiBmYWxzZVxufTtcblxuY29uc3QgVGltaW5nTWV0cmljID0ge1xuICB2aXNpdFN0YXJ0OiBcInZpc2l0U3RhcnRcIixcbiAgcmVxdWVzdFN0YXJ0OiBcInJlcXVlc3RTdGFydFwiLFxuICByZXF1ZXN0RW5kOiBcInJlcXVlc3RFbmRcIixcbiAgdmlzaXRFbmQ6IFwidmlzaXRFbmRcIlxufTtcblxuY29uc3QgVmlzaXRTdGF0ZSA9IHtcbiAgaW5pdGlhbGl6ZWQ6IFwiaW5pdGlhbGl6ZWRcIixcbiAgc3RhcnRlZDogXCJzdGFydGVkXCIsXG4gIGNhbmNlbGVkOiBcImNhbmNlbGVkXCIsXG4gIGZhaWxlZDogXCJmYWlsZWRcIixcbiAgY29tcGxldGVkOiBcImNvbXBsZXRlZFwiXG59O1xuXG5jb25zdCBTeXN0ZW1TdGF0dXNDb2RlID0ge1xuICBuZXR3b3JrRmFpbHVyZTogMCxcbiAgdGltZW91dEZhaWx1cmU6IC0xLFxuICBjb250ZW50VHlwZU1pc21hdGNoOiAtMlxufTtcblxuY29uc3QgRGlyZWN0aW9uID0ge1xuICBhZHZhbmNlOiBcImZvcndhcmRcIixcbiAgcmVzdG9yZTogXCJiYWNrXCIsXG4gIHJlcGxhY2U6IFwibm9uZVwiXG59O1xuXG5jbGFzcyBWaXNpdCB7XG4gIGlkZW50aWZpZXIgPSB1dWlkKCkgLy8gUmVxdWlyZWQgYnkgdHVyYm8taW9zXG4gIHRpbWluZ01ldHJpY3MgPSB7fVxuXG4gIGZvbGxvd2VkUmVkaXJlY3QgPSBmYWxzZVxuICBoaXN0b3J5Q2hhbmdlZCA9IGZhbHNlXG4gIHNjcm9sbGVkID0gZmFsc2VcbiAgc2hvdWxkQ2FjaGVTbmFwc2hvdCA9IHRydWVcbiAgYWNjZXB0c1N0cmVhbVJlc3BvbnNlID0gZmFsc2VcbiAgc25hcHNob3RDYWNoZWQgPSBmYWxzZVxuICBzdGF0ZSA9IFZpc2l0U3RhdGUuaW5pdGlhbGl6ZWRcbiAgdmlld1RyYW5zaXRpb25lciA9IG5ldyBWaWV3VHJhbnNpdGlvbmVyKClcblxuICBjb25zdHJ1Y3RvcihkZWxlZ2F0ZSwgbG9jYXRpb24sIHJlc3RvcmF0aW9uSWRlbnRpZmllciwgb3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgIHRoaXMubG9jYXRpb24gPSBsb2NhdGlvbjtcbiAgICB0aGlzLnJlc3RvcmF0aW9uSWRlbnRpZmllciA9IHJlc3RvcmF0aW9uSWRlbnRpZmllciB8fCB1dWlkKCk7XG5cbiAgICBjb25zdCB7XG4gICAgICBhY3Rpb24sXG4gICAgICBoaXN0b3J5Q2hhbmdlZCxcbiAgICAgIHJlZmVycmVyLFxuICAgICAgc25hcHNob3QsXG4gICAgICBzbmFwc2hvdEhUTUwsXG4gICAgICByZXNwb25zZSxcbiAgICAgIHZpc2l0Q2FjaGVkU25hcHNob3QsXG4gICAgICB3aWxsUmVuZGVyLFxuICAgICAgdXBkYXRlSGlzdG9yeSxcbiAgICAgIHNob3VsZENhY2hlU25hcHNob3QsXG4gICAgICBhY2NlcHRzU3RyZWFtUmVzcG9uc2UsXG4gICAgICBkaXJlY3Rpb25cbiAgICB9ID0ge1xuICAgICAgLi4uZGVmYXVsdE9wdGlvbnMsXG4gICAgICAuLi5vcHRpb25zXG4gICAgfTtcbiAgICB0aGlzLmFjdGlvbiA9IGFjdGlvbjtcbiAgICB0aGlzLmhpc3RvcnlDaGFuZ2VkID0gaGlzdG9yeUNoYW5nZWQ7XG4gICAgdGhpcy5yZWZlcnJlciA9IHJlZmVycmVyO1xuICAgIHRoaXMuc25hcHNob3QgPSBzbmFwc2hvdDtcbiAgICB0aGlzLnNuYXBzaG90SFRNTCA9IHNuYXBzaG90SFRNTDtcbiAgICB0aGlzLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgdGhpcy5pc1NhbWVQYWdlID0gdGhpcy5kZWxlZ2F0ZS5sb2NhdGlvbldpdGhBY3Rpb25Jc1NhbWVQYWdlKHRoaXMubG9jYXRpb24sIHRoaXMuYWN0aW9uKTtcbiAgICB0aGlzLmlzUGFnZVJlZnJlc2ggPSB0aGlzLnZpZXcuaXNQYWdlUmVmcmVzaCh0aGlzKTtcbiAgICB0aGlzLnZpc2l0Q2FjaGVkU25hcHNob3QgPSB2aXNpdENhY2hlZFNuYXBzaG90O1xuICAgIHRoaXMud2lsbFJlbmRlciA9IHdpbGxSZW5kZXI7XG4gICAgdGhpcy51cGRhdGVIaXN0b3J5ID0gdXBkYXRlSGlzdG9yeTtcbiAgICB0aGlzLnNjcm9sbGVkID0gIXdpbGxSZW5kZXI7XG4gICAgdGhpcy5zaG91bGRDYWNoZVNuYXBzaG90ID0gc2hvdWxkQ2FjaGVTbmFwc2hvdDtcbiAgICB0aGlzLmFjY2VwdHNTdHJlYW1SZXNwb25zZSA9IGFjY2VwdHNTdHJlYW1SZXNwb25zZTtcbiAgICB0aGlzLmRpcmVjdGlvbiA9IGRpcmVjdGlvbiB8fCBEaXJlY3Rpb25bYWN0aW9uXTtcbiAgfVxuXG4gIGdldCBhZGFwdGVyKCkge1xuICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmFkYXB0ZXJcbiAgfVxuXG4gIGdldCB2aWV3KCkge1xuICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLnZpZXdcbiAgfVxuXG4gIGdldCBoaXN0b3J5KCkge1xuICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmhpc3RvcnlcbiAgfVxuXG4gIGdldCByZXN0b3JhdGlvbkRhdGEoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGlzdG9yeS5nZXRSZXN0b3JhdGlvbkRhdGFGb3JJZGVudGlmaWVyKHRoaXMucmVzdG9yYXRpb25JZGVudGlmaWVyKVxuICB9XG5cbiAgZ2V0IHNpbGVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1NhbWVQYWdlXG4gIH1cblxuICBzdGFydCgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZSA9PSBWaXNpdFN0YXRlLmluaXRpYWxpemVkKSB7XG4gICAgICB0aGlzLnJlY29yZFRpbWluZ01ldHJpYyhUaW1pbmdNZXRyaWMudmlzaXRTdGFydCk7XG4gICAgICB0aGlzLnN0YXRlID0gVmlzaXRTdGF0ZS5zdGFydGVkO1xuICAgICAgdGhpcy5hZGFwdGVyLnZpc2l0U3RhcnRlZCh0aGlzKTtcbiAgICAgIHRoaXMuZGVsZWdhdGUudmlzaXRTdGFydGVkKHRoaXMpO1xuICAgIH1cbiAgfVxuXG4gIGNhbmNlbCgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZSA9PSBWaXNpdFN0YXRlLnN0YXJ0ZWQpIHtcbiAgICAgIGlmICh0aGlzLnJlcXVlc3QpIHtcbiAgICAgICAgdGhpcy5yZXF1ZXN0LmNhbmNlbCgpO1xuICAgICAgfVxuICAgICAgdGhpcy5jYW5jZWxSZW5kZXIoKTtcbiAgICAgIHRoaXMuc3RhdGUgPSBWaXNpdFN0YXRlLmNhbmNlbGVkO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBsZXRlKCkge1xuICAgIGlmICh0aGlzLnN0YXRlID09IFZpc2l0U3RhdGUuc3RhcnRlZCkge1xuICAgICAgdGhpcy5yZWNvcmRUaW1pbmdNZXRyaWMoVGltaW5nTWV0cmljLnZpc2l0RW5kKTtcbiAgICAgIHRoaXMuYWRhcHRlci52aXNpdENvbXBsZXRlZCh0aGlzKTtcbiAgICAgIHRoaXMuc3RhdGUgPSBWaXNpdFN0YXRlLmNvbXBsZXRlZDtcbiAgICAgIHRoaXMuZm9sbG93UmVkaXJlY3QoKTtcblxuICAgICAgaWYgKCF0aGlzLmZvbGxvd2VkUmVkaXJlY3QpIHtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZS52aXNpdENvbXBsZXRlZCh0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmYWlsKCkge1xuICAgIGlmICh0aGlzLnN0YXRlID09IFZpc2l0U3RhdGUuc3RhcnRlZCkge1xuICAgICAgdGhpcy5zdGF0ZSA9IFZpc2l0U3RhdGUuZmFpbGVkO1xuICAgICAgdGhpcy5hZGFwdGVyLnZpc2l0RmFpbGVkKHRoaXMpO1xuICAgICAgdGhpcy5kZWxlZ2F0ZS52aXNpdENvbXBsZXRlZCh0aGlzKTtcbiAgICB9XG4gIH1cblxuICBjaGFuZ2VIaXN0b3J5KCkge1xuICAgIGlmICghdGhpcy5oaXN0b3J5Q2hhbmdlZCAmJiB0aGlzLnVwZGF0ZUhpc3RvcnkpIHtcbiAgICAgIGNvbnN0IGFjdGlvbkZvckhpc3RvcnkgPSB0aGlzLmxvY2F0aW9uLmhyZWYgPT09IHRoaXMucmVmZXJyZXI/LmhyZWYgPyBcInJlcGxhY2VcIiA6IHRoaXMuYWN0aW9uO1xuICAgICAgY29uc3QgbWV0aG9kID0gZ2V0SGlzdG9yeU1ldGhvZEZvckFjdGlvbihhY3Rpb25Gb3JIaXN0b3J5KTtcbiAgICAgIHRoaXMuaGlzdG9yeS51cGRhdGUobWV0aG9kLCB0aGlzLmxvY2F0aW9uLCB0aGlzLnJlc3RvcmF0aW9uSWRlbnRpZmllcik7XG4gICAgICB0aGlzLmhpc3RvcnlDaGFuZ2VkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBpc3N1ZVJlcXVlc3QoKSB7XG4gICAgaWYgKHRoaXMuaGFzUHJlbG9hZGVkUmVzcG9uc2UoKSkge1xuICAgICAgdGhpcy5zaW11bGF0ZVJlcXVlc3QoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuc2hvdWxkSXNzdWVSZXF1ZXN0KCkgJiYgIXRoaXMucmVxdWVzdCkge1xuICAgICAgdGhpcy5yZXF1ZXN0ID0gbmV3IEZldGNoUmVxdWVzdCh0aGlzLCBGZXRjaE1ldGhvZC5nZXQsIHRoaXMubG9jYXRpb24pO1xuICAgICAgdGhpcy5yZXF1ZXN0LnBlcmZvcm0oKTtcbiAgICB9XG4gIH1cblxuICBzaW11bGF0ZVJlcXVlc3QoKSB7XG4gICAgaWYgKHRoaXMucmVzcG9uc2UpIHtcbiAgICAgIHRoaXMuc3RhcnRSZXF1ZXN0KCk7XG4gICAgICB0aGlzLnJlY29yZFJlc3BvbnNlKCk7XG4gICAgICB0aGlzLmZpbmlzaFJlcXVlc3QoKTtcbiAgICB9XG4gIH1cblxuICBzdGFydFJlcXVlc3QoKSB7XG4gICAgdGhpcy5yZWNvcmRUaW1pbmdNZXRyaWMoVGltaW5nTWV0cmljLnJlcXVlc3RTdGFydCk7XG4gICAgdGhpcy5hZGFwdGVyLnZpc2l0UmVxdWVzdFN0YXJ0ZWQodGhpcyk7XG4gIH1cblxuICByZWNvcmRSZXNwb25zZShyZXNwb25zZSA9IHRoaXMucmVzcG9uc2UpIHtcbiAgICB0aGlzLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgaWYgKHJlc3BvbnNlKSB7XG4gICAgICBjb25zdCB7IHN0YXR1c0NvZGUgfSA9IHJlc3BvbnNlO1xuICAgICAgaWYgKGlzU3VjY2Vzc2Z1bChzdGF0dXNDb2RlKSkge1xuICAgICAgICB0aGlzLmFkYXB0ZXIudmlzaXRSZXF1ZXN0Q29tcGxldGVkKHRoaXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5hZGFwdGVyLnZpc2l0UmVxdWVzdEZhaWxlZFdpdGhTdGF0dXNDb2RlKHRoaXMsIHN0YXR1c0NvZGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZpbmlzaFJlcXVlc3QoKSB7XG4gICAgdGhpcy5yZWNvcmRUaW1pbmdNZXRyaWMoVGltaW5nTWV0cmljLnJlcXVlc3RFbmQpO1xuICAgIHRoaXMuYWRhcHRlci52aXNpdFJlcXVlc3RGaW5pc2hlZCh0aGlzKTtcbiAgfVxuXG4gIGxvYWRSZXNwb25zZSgpIHtcbiAgICBpZiAodGhpcy5yZXNwb25zZSkge1xuICAgICAgY29uc3QgeyBzdGF0dXNDb2RlLCByZXNwb25zZUhUTUwgfSA9IHRoaXMucmVzcG9uc2U7XG4gICAgICB0aGlzLnJlbmRlcihhc3luYyAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnNob3VsZENhY2hlU25hcHNob3QpIHRoaXMuY2FjaGVTbmFwc2hvdCgpO1xuICAgICAgICBpZiAodGhpcy52aWV3LnJlbmRlclByb21pc2UpIGF3YWl0IHRoaXMudmlldy5yZW5kZXJQcm9taXNlO1xuXG4gICAgICAgIGlmIChpc1N1Y2Nlc3NmdWwoc3RhdHVzQ29kZSkgJiYgcmVzcG9uc2VIVE1MICE9IG51bGwpIHtcbiAgICAgICAgICBjb25zdCBzbmFwc2hvdCA9IFBhZ2VTbmFwc2hvdC5mcm9tSFRNTFN0cmluZyhyZXNwb25zZUhUTUwpO1xuICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyUGFnZVNuYXBzaG90KHNuYXBzaG90LCBmYWxzZSk7XG5cbiAgICAgICAgICB0aGlzLmFkYXB0ZXIudmlzaXRSZW5kZXJlZCh0aGlzKTtcbiAgICAgICAgICB0aGlzLmNvbXBsZXRlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy52aWV3LnJlbmRlckVycm9yKFBhZ2VTbmFwc2hvdC5mcm9tSFRNTFN0cmluZyhyZXNwb25zZUhUTUwpLCB0aGlzKTtcbiAgICAgICAgICB0aGlzLmFkYXB0ZXIudmlzaXRSZW5kZXJlZCh0aGlzKTtcbiAgICAgICAgICB0aGlzLmZhaWwoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0Q2FjaGVkU25hcHNob3QoKSB7XG4gICAgY29uc3Qgc25hcHNob3QgPSB0aGlzLnZpZXcuZ2V0Q2FjaGVkU25hcHNob3RGb3JMb2NhdGlvbih0aGlzLmxvY2F0aW9uKSB8fCB0aGlzLmdldFByZWxvYWRlZFNuYXBzaG90KCk7XG5cbiAgICBpZiAoc25hcHNob3QgJiYgKCFnZXRBbmNob3IodGhpcy5sb2NhdGlvbikgfHwgc25hcHNob3QuaGFzQW5jaG9yKGdldEFuY2hvcih0aGlzLmxvY2F0aW9uKSkpKSB7XG4gICAgICBpZiAodGhpcy5hY3Rpb24gPT0gXCJyZXN0b3JlXCIgfHwgc25hcHNob3QuaXNQcmV2aWV3YWJsZSkge1xuICAgICAgICByZXR1cm4gc25hcHNob3RcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXRQcmVsb2FkZWRTbmFwc2hvdCgpIHtcbiAgICBpZiAodGhpcy5zbmFwc2hvdEhUTUwpIHtcbiAgICAgIHJldHVybiBQYWdlU25hcHNob3QuZnJvbUhUTUxTdHJpbmcodGhpcy5zbmFwc2hvdEhUTUwpXG4gICAgfVxuICB9XG5cbiAgaGFzQ2FjaGVkU25hcHNob3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q2FjaGVkU25hcHNob3QoKSAhPSBudWxsXG4gIH1cblxuICBsb2FkQ2FjaGVkU25hcHNob3QoKSB7XG4gICAgY29uc3Qgc25hcHNob3QgPSB0aGlzLmdldENhY2hlZFNuYXBzaG90KCk7XG4gICAgaWYgKHNuYXBzaG90KSB7XG4gICAgICBjb25zdCBpc1ByZXZpZXcgPSB0aGlzLnNob3VsZElzc3VlUmVxdWVzdCgpO1xuICAgICAgdGhpcy5yZW5kZXIoYXN5bmMgKCkgPT4ge1xuICAgICAgICB0aGlzLmNhY2hlU25hcHNob3QoKTtcbiAgICAgICAgaWYgKHRoaXMuaXNTYW1lUGFnZSB8fCB0aGlzLmlzUGFnZVJlZnJlc2gpIHtcbiAgICAgICAgICB0aGlzLmFkYXB0ZXIudmlzaXRSZW5kZXJlZCh0aGlzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodGhpcy52aWV3LnJlbmRlclByb21pc2UpIGF3YWl0IHRoaXMudmlldy5yZW5kZXJQcm9taXNlO1xuXG4gICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJQYWdlU25hcHNob3Qoc25hcHNob3QsIGlzUHJldmlldyk7XG5cbiAgICAgICAgICB0aGlzLmFkYXB0ZXIudmlzaXRSZW5kZXJlZCh0aGlzKTtcbiAgICAgICAgICBpZiAoIWlzUHJldmlldykge1xuICAgICAgICAgICAgdGhpcy5jb21wbGV0ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZm9sbG93UmVkaXJlY3QoKSB7XG4gICAgaWYgKHRoaXMucmVkaXJlY3RlZFRvTG9jYXRpb24gJiYgIXRoaXMuZm9sbG93ZWRSZWRpcmVjdCAmJiB0aGlzLnJlc3BvbnNlPy5yZWRpcmVjdGVkKSB7XG4gICAgICB0aGlzLmFkYXB0ZXIudmlzaXRQcm9wb3NlZFRvTG9jYXRpb24odGhpcy5yZWRpcmVjdGVkVG9Mb2NhdGlvbiwge1xuICAgICAgICBhY3Rpb246IFwicmVwbGFjZVwiLFxuICAgICAgICByZXNwb25zZTogdGhpcy5yZXNwb25zZSxcbiAgICAgICAgc2hvdWxkQ2FjaGVTbmFwc2hvdDogZmFsc2UsXG4gICAgICAgIHdpbGxSZW5kZXI6IGZhbHNlXG4gICAgICB9KTtcbiAgICAgIHRoaXMuZm9sbG93ZWRSZWRpcmVjdCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgZ29Ub1NhbWVQYWdlQW5jaG9yKCkge1xuICAgIGlmICh0aGlzLmlzU2FtZVBhZ2UpIHtcbiAgICAgIHRoaXMucmVuZGVyKGFzeW5jICgpID0+IHtcbiAgICAgICAgdGhpcy5jYWNoZVNuYXBzaG90KCk7XG4gICAgICAgIHRoaXMucGVyZm9ybVNjcm9sbCgpO1xuICAgICAgICB0aGlzLmNoYW5nZUhpc3RvcnkoKTtcbiAgICAgICAgdGhpcy5hZGFwdGVyLnZpc2l0UmVuZGVyZWQodGhpcyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBGZXRjaCByZXF1ZXN0IGRlbGVnYXRlXG5cbiAgcHJlcGFyZVJlcXVlc3QocmVxdWVzdCkge1xuICAgIGlmICh0aGlzLmFjY2VwdHNTdHJlYW1SZXNwb25zZSkge1xuICAgICAgcmVxdWVzdC5hY2NlcHRSZXNwb25zZVR5cGUoU3RyZWFtTWVzc2FnZS5jb250ZW50VHlwZSk7XG4gICAgfVxuICB9XG5cbiAgcmVxdWVzdFN0YXJ0ZWQoKSB7XG4gICAgdGhpcy5zdGFydFJlcXVlc3QoKTtcbiAgfVxuXG4gIHJlcXVlc3RQcmV2ZW50ZWRIYW5kbGluZ1Jlc3BvbnNlKF9yZXF1ZXN0LCBfcmVzcG9uc2UpIHt9XG5cbiAgYXN5bmMgcmVxdWVzdFN1Y2NlZWRlZFdpdGhSZXNwb25zZShyZXF1ZXN0LCByZXNwb25zZSkge1xuICAgIGNvbnN0IHJlc3BvbnNlSFRNTCA9IGF3YWl0IHJlc3BvbnNlLnJlc3BvbnNlSFRNTDtcbiAgICBjb25zdCB7IHJlZGlyZWN0ZWQsIHN0YXR1c0NvZGUgfSA9IHJlc3BvbnNlO1xuICAgIGlmIChyZXNwb25zZUhUTUwgPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnJlY29yZFJlc3BvbnNlKHtcbiAgICAgICAgc3RhdHVzQ29kZTogU3lzdGVtU3RhdHVzQ29kZS5jb250ZW50VHlwZU1pc21hdGNoLFxuICAgICAgICByZWRpcmVjdGVkXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZWRpcmVjdGVkVG9Mb2NhdGlvbiA9IHJlc3BvbnNlLnJlZGlyZWN0ZWQgPyByZXNwb25zZS5sb2NhdGlvbiA6IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMucmVjb3JkUmVzcG9uc2UoeyBzdGF0dXNDb2RlOiBzdGF0dXNDb2RlLCByZXNwb25zZUhUTUwsIHJlZGlyZWN0ZWQgfSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmVxdWVzdEZhaWxlZFdpdGhSZXNwb25zZShyZXF1ZXN0LCByZXNwb25zZSkge1xuICAgIGNvbnN0IHJlc3BvbnNlSFRNTCA9IGF3YWl0IHJlc3BvbnNlLnJlc3BvbnNlSFRNTDtcbiAgICBjb25zdCB7IHJlZGlyZWN0ZWQsIHN0YXR1c0NvZGUgfSA9IHJlc3BvbnNlO1xuICAgIGlmIChyZXNwb25zZUhUTUwgPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnJlY29yZFJlc3BvbnNlKHtcbiAgICAgICAgc3RhdHVzQ29kZTogU3lzdGVtU3RhdHVzQ29kZS5jb250ZW50VHlwZU1pc21hdGNoLFxuICAgICAgICByZWRpcmVjdGVkXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZWNvcmRSZXNwb25zZSh7IHN0YXR1c0NvZGU6IHN0YXR1c0NvZGUsIHJlc3BvbnNlSFRNTCwgcmVkaXJlY3RlZCB9KTtcbiAgICB9XG4gIH1cblxuICByZXF1ZXN0RXJyb3JlZChfcmVxdWVzdCwgX2Vycm9yKSB7XG4gICAgdGhpcy5yZWNvcmRSZXNwb25zZSh7XG4gICAgICBzdGF0dXNDb2RlOiBTeXN0ZW1TdGF0dXNDb2RlLm5ldHdvcmtGYWlsdXJlLFxuICAgICAgcmVkaXJlY3RlZDogZmFsc2VcbiAgICB9KTtcbiAgfVxuXG4gIHJlcXVlc3RGaW5pc2hlZCgpIHtcbiAgICB0aGlzLmZpbmlzaFJlcXVlc3QoKTtcbiAgfVxuXG4gIC8vIFNjcm9sbGluZ1xuXG4gIHBlcmZvcm1TY3JvbGwoKSB7XG4gICAgaWYgKCF0aGlzLnNjcm9sbGVkICYmICF0aGlzLnZpZXcuZm9yY2VSZWxvYWRlZCAmJiAhdGhpcy52aWV3LnNob3VsZFByZXNlcnZlU2Nyb2xsUG9zaXRpb24odGhpcykpIHtcbiAgICAgIGlmICh0aGlzLmFjdGlvbiA9PSBcInJlc3RvcmVcIikge1xuICAgICAgICB0aGlzLnNjcm9sbFRvUmVzdG9yZWRQb3NpdGlvbigpIHx8IHRoaXMuc2Nyb2xsVG9BbmNob3IoKSB8fCB0aGlzLnZpZXcuc2Nyb2xsVG9Ub3AoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsVG9BbmNob3IoKSB8fCB0aGlzLnZpZXcuc2Nyb2xsVG9Ub3AoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmlzU2FtZVBhZ2UpIHtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZS52aXNpdFNjcm9sbGVkVG9TYW1lUGFnZUxvY2F0aW9uKHRoaXMudmlldy5sYXN0UmVuZGVyZWRMb2NhdGlvbiwgdGhpcy5sb2NhdGlvbik7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2Nyb2xsZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHNjcm9sbFRvUmVzdG9yZWRQb3NpdGlvbigpIHtcbiAgICBjb25zdCB7IHNjcm9sbFBvc2l0aW9uIH0gPSB0aGlzLnJlc3RvcmF0aW9uRGF0YTtcbiAgICBpZiAoc2Nyb2xsUG9zaXRpb24pIHtcbiAgICAgIHRoaXMudmlldy5zY3JvbGxUb1Bvc2l0aW9uKHNjcm9sbFBvc2l0aW9uKTtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgc2Nyb2xsVG9BbmNob3IoKSB7XG4gICAgY29uc3QgYW5jaG9yID0gZ2V0QW5jaG9yKHRoaXMubG9jYXRpb24pO1xuICAgIGlmIChhbmNob3IgIT0gbnVsbCkge1xuICAgICAgdGhpcy52aWV3LnNjcm9sbFRvQW5jaG9yKGFuY2hvcik7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIC8vIEluc3RydW1lbnRhdGlvblxuXG4gIHJlY29yZFRpbWluZ01ldHJpYyhtZXRyaWMpIHtcbiAgICB0aGlzLnRpbWluZ01ldHJpY3NbbWV0cmljXSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICB9XG5cbiAgZ2V0VGltaW5nTWV0cmljcygpIHtcbiAgICByZXR1cm4geyAuLi50aGlzLnRpbWluZ01ldHJpY3MgfVxuICB9XG5cbiAgLy8gUHJpdmF0ZVxuXG4gIGhhc1ByZWxvYWRlZFJlc3BvbnNlKCkge1xuICAgIHJldHVybiB0eXBlb2YgdGhpcy5yZXNwb25zZSA9PSBcIm9iamVjdFwiXG4gIH1cblxuICBzaG91bGRJc3N1ZVJlcXVlc3QoKSB7XG4gICAgaWYgKHRoaXMuaXNTYW1lUGFnZSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSBlbHNlIGlmICh0aGlzLmFjdGlvbiA9PSBcInJlc3RvcmVcIikge1xuICAgICAgcmV0dXJuICF0aGlzLmhhc0NhY2hlZFNuYXBzaG90KClcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMud2lsbFJlbmRlclxuICAgIH1cbiAgfVxuXG4gIGNhY2hlU25hcHNob3QoKSB7XG4gICAgaWYgKCF0aGlzLnNuYXBzaG90Q2FjaGVkKSB7XG4gICAgICB0aGlzLnZpZXcuY2FjaGVTbmFwc2hvdCh0aGlzLnNuYXBzaG90KS50aGVuKChzbmFwc2hvdCkgPT4gc25hcHNob3QgJiYgdGhpcy52aXNpdENhY2hlZFNuYXBzaG90KHNuYXBzaG90KSk7XG4gICAgICB0aGlzLnNuYXBzaG90Q2FjaGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBhc3luYyByZW5kZXIoY2FsbGJhY2spIHtcbiAgICB0aGlzLmNhbmNlbFJlbmRlcigpO1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICB0aGlzLmZyYW1lID1cbiAgICAgICAgZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSBcImhpZGRlblwiID8gc2V0VGltZW91dCgoKSA9PiByZXNvbHZlKCksIDApIDogcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHJlc29sdmUoKSk7XG4gICAgfSk7XG4gICAgYXdhaXQgY2FsbGJhY2soKTtcbiAgICBkZWxldGUgdGhpcy5mcmFtZTtcbiAgfVxuXG4gIGFzeW5jIHJlbmRlclBhZ2VTbmFwc2hvdChzbmFwc2hvdCwgaXNQcmV2aWV3KSB7XG4gICAgYXdhaXQgdGhpcy52aWV3VHJhbnNpdGlvbmVyLnJlbmRlckNoYW5nZSh0aGlzLnZpZXcuc2hvdWxkVHJhbnNpdGlvblRvKHNuYXBzaG90KSwgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdGhpcy52aWV3LnJlbmRlclBhZ2Uoc25hcHNob3QsIGlzUHJldmlldywgdGhpcy53aWxsUmVuZGVyLCB0aGlzKTtcbiAgICAgIHRoaXMucGVyZm9ybVNjcm9sbCgpO1xuICAgIH0pO1xuICB9XG5cbiAgY2FuY2VsUmVuZGVyKCkge1xuICAgIGlmICh0aGlzLmZyYW1lKSB7XG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmZyYW1lKTtcbiAgICAgIGRlbGV0ZSB0aGlzLmZyYW1lO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBpc1N1Y2Nlc3NmdWwoc3RhdHVzQ29kZSkge1xuICByZXR1cm4gc3RhdHVzQ29kZSA+PSAyMDAgJiYgc3RhdHVzQ29kZSA8IDMwMFxufVxuXG5jbGFzcyBCcm93c2VyQWRhcHRlciB7XG4gIHByb2dyZXNzQmFyID0gbmV3IFByb2dyZXNzQmFyKClcblxuICBjb25zdHJ1Y3RvcihzZXNzaW9uKSB7XG4gICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcbiAgfVxuXG4gIHZpc2l0UHJvcG9zZWRUb0xvY2F0aW9uKGxvY2F0aW9uLCBvcHRpb25zKSB7XG4gICAgaWYgKGxvY2F0aW9uSXNWaXNpdGFibGUobG9jYXRpb24sIHRoaXMubmF2aWdhdG9yLnJvb3RMb2NhdGlvbikpIHtcbiAgICAgIHRoaXMubmF2aWdhdG9yLnN0YXJ0VmlzaXQobG9jYXRpb24sIG9wdGlvbnM/LnJlc3RvcmF0aW9uSWRlbnRpZmllciB8fCB1dWlkKCksIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGxvY2F0aW9uLnRvU3RyaW5nKCk7XG4gICAgfVxuICB9XG5cbiAgdmlzaXRTdGFydGVkKHZpc2l0KSB7XG4gICAgdGhpcy5sb2NhdGlvbiA9IHZpc2l0LmxvY2F0aW9uO1xuICAgIHRoaXMucmVkaXJlY3RlZFRvTG9jYXRpb24gPSBudWxsO1xuXG4gICAgdmlzaXQubG9hZENhY2hlZFNuYXBzaG90KCk7XG4gICAgdmlzaXQuaXNzdWVSZXF1ZXN0KCk7XG4gICAgdmlzaXQuZ29Ub1NhbWVQYWdlQW5jaG9yKCk7XG4gIH1cblxuICB2aXNpdFJlcXVlc3RTdGFydGVkKHZpc2l0KSB7XG4gICAgdGhpcy5wcm9ncmVzc0Jhci5zZXRWYWx1ZSgwKTtcbiAgICBpZiAodmlzaXQuaGFzQ2FjaGVkU25hcHNob3QoKSB8fCB2aXNpdC5hY3Rpb24gIT0gXCJyZXN0b3JlXCIpIHtcbiAgICAgIHRoaXMuc2hvd1Zpc2l0UHJvZ3Jlc3NCYXJBZnRlckRlbGF5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2hvd1Byb2dyZXNzQmFyKCk7XG4gICAgfVxuICB9XG5cbiAgdmlzaXRSZXF1ZXN0Q29tcGxldGVkKHZpc2l0KSB7XG4gICAgdmlzaXQubG9hZFJlc3BvbnNlKCk7XG5cbiAgICBpZiAodmlzaXQucmVzcG9uc2UucmVkaXJlY3RlZCkge1xuICAgICAgdGhpcy5yZWRpcmVjdGVkVG9Mb2NhdGlvbiA9IHZpc2l0LnJlZGlyZWN0ZWRUb0xvY2F0aW9uO1xuICAgIH1cbiAgfVxuXG4gIHZpc2l0UmVxdWVzdEZhaWxlZFdpdGhTdGF0dXNDb2RlKHZpc2l0LCBzdGF0dXNDb2RlKSB7XG4gICAgc3dpdGNoIChzdGF0dXNDb2RlKSB7XG4gICAgICBjYXNlIFN5c3RlbVN0YXR1c0NvZGUubmV0d29ya0ZhaWx1cmU6XG4gICAgICBjYXNlIFN5c3RlbVN0YXR1c0NvZGUudGltZW91dEZhaWx1cmU6XG4gICAgICBjYXNlIFN5c3RlbVN0YXR1c0NvZGUuY29udGVudFR5cGVNaXNtYXRjaDpcbiAgICAgICAgcmV0dXJuIHRoaXMucmVsb2FkKHtcbiAgICAgICAgICByZWFzb246IFwicmVxdWVzdF9mYWlsZWRcIixcbiAgICAgICAgICBjb250ZXh0OiB7XG4gICAgICAgICAgICBzdGF0dXNDb2RlXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHZpc2l0LmxvYWRSZXNwb25zZSgpXG4gICAgfVxuICB9XG5cbiAgdmlzaXRSZXF1ZXN0RmluaXNoZWQoX3Zpc2l0KSB7fVxuXG4gIHZpc2l0Q29tcGxldGVkKF92aXNpdCkge1xuICAgIHRoaXMucHJvZ3Jlc3NCYXIuc2V0VmFsdWUoMSk7XG4gICAgdGhpcy5oaWRlVmlzaXRQcm9ncmVzc0JhcigpO1xuICB9XG5cbiAgcGFnZUludmFsaWRhdGVkKHJlYXNvbikge1xuICAgIHRoaXMucmVsb2FkKHJlYXNvbik7XG4gIH1cblxuICB2aXNpdEZhaWxlZChfdmlzaXQpIHtcbiAgICB0aGlzLnByb2dyZXNzQmFyLnNldFZhbHVlKDEpO1xuICAgIHRoaXMuaGlkZVZpc2l0UHJvZ3Jlc3NCYXIoKTtcbiAgfVxuXG4gIHZpc2l0UmVuZGVyZWQoX3Zpc2l0KSB7fVxuXG4gIC8vIExpbmsgcHJlZmV0Y2hpbmdcblxuICBsaW5rUHJlZmV0Y2hpbmdJc0VuYWJsZWRGb3JMb2NhdGlvbihsb2NhdGlvbikge1xuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICAvLyBGb3JtIFN1Ym1pc3Npb24gRGVsZWdhdGVcblxuICBmb3JtU3VibWlzc2lvblN0YXJ0ZWQoX2Zvcm1TdWJtaXNzaW9uKSB7XG4gICAgdGhpcy5wcm9ncmVzc0Jhci5zZXRWYWx1ZSgwKTtcbiAgICB0aGlzLnNob3dGb3JtUHJvZ3Jlc3NCYXJBZnRlckRlbGF5KCk7XG4gIH1cblxuICBmb3JtU3VibWlzc2lvbkZpbmlzaGVkKF9mb3JtU3VibWlzc2lvbikge1xuICAgIHRoaXMucHJvZ3Jlc3NCYXIuc2V0VmFsdWUoMSk7XG4gICAgdGhpcy5oaWRlRm9ybVByb2dyZXNzQmFyKCk7XG4gIH1cblxuICAvLyBQcml2YXRlXG5cbiAgc2hvd1Zpc2l0UHJvZ3Jlc3NCYXJBZnRlckRlbGF5KCkge1xuICAgIHRoaXMudmlzaXRQcm9ncmVzc0JhclRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCh0aGlzLnNob3dQcm9ncmVzc0JhciwgdGhpcy5zZXNzaW9uLnByb2dyZXNzQmFyRGVsYXkpO1xuICB9XG5cbiAgaGlkZVZpc2l0UHJvZ3Jlc3NCYXIoKSB7XG4gICAgdGhpcy5wcm9ncmVzc0Jhci5oaWRlKCk7XG4gICAgaWYgKHRoaXMudmlzaXRQcm9ncmVzc0JhclRpbWVvdXQgIT0gbnVsbCkge1xuICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnZpc2l0UHJvZ3Jlc3NCYXJUaW1lb3V0KTtcbiAgICAgIGRlbGV0ZSB0aGlzLnZpc2l0UHJvZ3Jlc3NCYXJUaW1lb3V0O1xuICAgIH1cbiAgfVxuXG4gIHNob3dGb3JtUHJvZ3Jlc3NCYXJBZnRlckRlbGF5KCkge1xuICAgIGlmICh0aGlzLmZvcm1Qcm9ncmVzc0JhclRpbWVvdXQgPT0gbnVsbCkge1xuICAgICAgdGhpcy5mb3JtUHJvZ3Jlc3NCYXJUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQodGhpcy5zaG93UHJvZ3Jlc3NCYXIsIHRoaXMuc2Vzc2lvbi5wcm9ncmVzc0JhckRlbGF5KTtcbiAgICB9XG4gIH1cblxuICBoaWRlRm9ybVByb2dyZXNzQmFyKCkge1xuICAgIHRoaXMucHJvZ3Jlc3NCYXIuaGlkZSgpO1xuICAgIGlmICh0aGlzLmZvcm1Qcm9ncmVzc0JhclRpbWVvdXQgIT0gbnVsbCkge1xuICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLmZvcm1Qcm9ncmVzc0JhclRpbWVvdXQpO1xuICAgICAgZGVsZXRlIHRoaXMuZm9ybVByb2dyZXNzQmFyVGltZW91dDtcbiAgICB9XG4gIH1cblxuICBzaG93UHJvZ3Jlc3NCYXIgPSAoKSA9PiB7XG4gICAgdGhpcy5wcm9ncmVzc0Jhci5zaG93KCk7XG4gIH1cblxuICByZWxvYWQocmVhc29uKSB7XG4gICAgZGlzcGF0Y2goXCJ0dXJibzpyZWxvYWRcIiwgeyBkZXRhaWw6IHJlYXNvbiB9KTtcblxuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gKHRoaXMucmVkaXJlY3RlZFRvTG9jYXRpb24gfHwgdGhpcy5sb2NhdGlvbik/LnRvU3RyaW5nKCkgfHwgd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gIH1cblxuICBnZXQgbmF2aWdhdG9yKCkge1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubmF2aWdhdG9yXG4gIH1cbn1cblxuY2xhc3MgQ2FjaGVPYnNlcnZlciB7XG4gIHNlbGVjdG9yID0gXCJbZGF0YS10dXJiby10ZW1wb3JhcnldXCJcbiAgZGVwcmVjYXRlZFNlbGVjdG9yID0gXCJbZGF0YS10dXJiby1jYWNoZT1mYWxzZV1cIlxuXG4gIHN0YXJ0ZWQgPSBmYWxzZVxuXG4gIHN0YXJ0KCkge1xuICAgIGlmICghdGhpcy5zdGFydGVkKSB7XG4gICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgYWRkRXZlbnRMaXN0ZW5lcihcInR1cmJvOmJlZm9yZS1jYWNoZVwiLCB0aGlzLnJlbW92ZVRlbXBvcmFyeUVsZW1lbnRzLCBmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgc3RvcCgpIHtcbiAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0dXJibzpiZWZvcmUtY2FjaGVcIiwgdGhpcy5yZW1vdmVUZW1wb3JhcnlFbGVtZW50cywgZmFsc2UpO1xuICAgIH1cbiAgfVxuXG4gIHJlbW92ZVRlbXBvcmFyeUVsZW1lbnRzID0gKF9ldmVudCkgPT4ge1xuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLnRlbXBvcmFyeUVsZW1lbnRzKSB7XG4gICAgICBlbGVtZW50LnJlbW92ZSgpO1xuICAgIH1cbiAgfVxuXG4gIGdldCB0ZW1wb3JhcnlFbGVtZW50cygpIHtcbiAgICByZXR1cm4gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5zZWxlY3RvciksIC4uLnRoaXMudGVtcG9yYXJ5RWxlbWVudHNXaXRoRGVwcmVjYXRpb25dXG4gIH1cblxuICBnZXQgdGVtcG9yYXJ5RWxlbWVudHNXaXRoRGVwcmVjYXRpb24oKSB7XG4gICAgY29uc3QgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuZGVwcmVjYXRlZFNlbGVjdG9yKTtcblxuICAgIGlmIChlbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYFRoZSAke3RoaXMuZGVwcmVjYXRlZFNlbGVjdG9yfSBzZWxlY3RvciBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbi4gVXNlICR7dGhpcy5zZWxlY3Rvcn0gaW5zdGVhZC5gXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBbLi4uZWxlbWVudHNdXG4gIH1cbn1cblxuY2xhc3MgRnJhbWVSZWRpcmVjdG9yIHtcbiAgY29uc3RydWN0b3Ioc2Vzc2lvbiwgZWxlbWVudCkge1xuICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICB0aGlzLmxpbmtJbnRlcmNlcHRvciA9IG5ldyBMaW5rSW50ZXJjZXB0b3IodGhpcywgZWxlbWVudCk7XG4gICAgdGhpcy5mb3JtU3VibWl0T2JzZXJ2ZXIgPSBuZXcgRm9ybVN1Ym1pdE9ic2VydmVyKHRoaXMsIGVsZW1lbnQpO1xuICB9XG5cbiAgc3RhcnQoKSB7XG4gICAgdGhpcy5saW5rSW50ZXJjZXB0b3Iuc3RhcnQoKTtcbiAgICB0aGlzLmZvcm1TdWJtaXRPYnNlcnZlci5zdGFydCgpO1xuICB9XG5cbiAgc3RvcCgpIHtcbiAgICB0aGlzLmxpbmtJbnRlcmNlcHRvci5zdG9wKCk7XG4gICAgdGhpcy5mb3JtU3VibWl0T2JzZXJ2ZXIuc3RvcCgpO1xuICB9XG5cbiAgLy8gTGluayBpbnRlcmNlcHRvciBkZWxlZ2F0ZVxuXG4gIHNob3VsZEludGVyY2VwdExpbmtDbGljayhlbGVtZW50LCBfbG9jYXRpb24sIF9ldmVudCkge1xuICAgIHJldHVybiB0aGlzLiNzaG91bGRSZWRpcmVjdChlbGVtZW50KVxuICB9XG5cbiAgbGlua0NsaWNrSW50ZXJjZXB0ZWQoZWxlbWVudCwgdXJsLCBldmVudCkge1xuICAgIGNvbnN0IGZyYW1lID0gdGhpcy4jZmluZEZyYW1lRWxlbWVudChlbGVtZW50KTtcbiAgICBpZiAoZnJhbWUpIHtcbiAgICAgIGZyYW1lLmRlbGVnYXRlLmxpbmtDbGlja0ludGVyY2VwdGVkKGVsZW1lbnQsIHVybCwgZXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIC8vIEZvcm0gc3VibWl0IG9ic2VydmVyIGRlbGVnYXRlXG5cbiAgd2lsbFN1Ym1pdEZvcm0oZWxlbWVudCwgc3VibWl0dGVyKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIGVsZW1lbnQuY2xvc2VzdChcInR1cmJvLWZyYW1lXCIpID09IG51bGwgJiZcbiAgICAgIHRoaXMuI3Nob3VsZFN1Ym1pdChlbGVtZW50LCBzdWJtaXR0ZXIpICYmXG4gICAgICB0aGlzLiNzaG91bGRSZWRpcmVjdChlbGVtZW50LCBzdWJtaXR0ZXIpXG4gICAgKVxuICB9XG5cbiAgZm9ybVN1Ym1pdHRlZChlbGVtZW50LCBzdWJtaXR0ZXIpIHtcbiAgICBjb25zdCBmcmFtZSA9IHRoaXMuI2ZpbmRGcmFtZUVsZW1lbnQoZWxlbWVudCwgc3VibWl0dGVyKTtcbiAgICBpZiAoZnJhbWUpIHtcbiAgICAgIGZyYW1lLmRlbGVnYXRlLmZvcm1TdWJtaXR0ZWQoZWxlbWVudCwgc3VibWl0dGVyKTtcbiAgICB9XG4gIH1cblxuICAjc2hvdWxkU3VibWl0KGZvcm0sIHN1Ym1pdHRlcikge1xuICAgIGNvbnN0IGFjdGlvbiA9IGdldEFjdGlvbiQxKGZvcm0sIHN1Ym1pdHRlcik7XG4gICAgY29uc3QgbWV0YSA9IHRoaXMuZWxlbWVudC5vd25lckRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYG1ldGFbbmFtZT1cInR1cmJvLXJvb3RcIl1gKTtcbiAgICBjb25zdCByb290TG9jYXRpb24gPSBleHBhbmRVUkwobWV0YT8uY29udGVudCA/PyBcIi9cIik7XG5cbiAgICByZXR1cm4gdGhpcy4jc2hvdWxkUmVkaXJlY3QoZm9ybSwgc3VibWl0dGVyKSAmJiBsb2NhdGlvbklzVmlzaXRhYmxlKGFjdGlvbiwgcm9vdExvY2F0aW9uKVxuICB9XG5cbiAgI3Nob3VsZFJlZGlyZWN0KGVsZW1lbnQsIHN1Ym1pdHRlcikge1xuICAgIGNvbnN0IGlzTmF2aWdhdGFibGUgPVxuICAgICAgZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxGb3JtRWxlbWVudFxuICAgICAgICA/IHRoaXMuc2Vzc2lvbi5zdWJtaXNzaW9uSXNOYXZpZ2F0YWJsZShlbGVtZW50LCBzdWJtaXR0ZXIpXG4gICAgICAgIDogdGhpcy5zZXNzaW9uLmVsZW1lbnRJc05hdmlnYXRhYmxlKGVsZW1lbnQpO1xuXG4gICAgaWYgKGlzTmF2aWdhdGFibGUpIHtcbiAgICAgIGNvbnN0IGZyYW1lID0gdGhpcy4jZmluZEZyYW1lRWxlbWVudChlbGVtZW50LCBzdWJtaXR0ZXIpO1xuICAgICAgcmV0dXJuIGZyYW1lID8gZnJhbWUgIT0gZWxlbWVudC5jbG9zZXN0KFwidHVyYm8tZnJhbWVcIikgOiBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICAjZmluZEZyYW1lRWxlbWVudChlbGVtZW50LCBzdWJtaXR0ZXIpIHtcbiAgICBjb25zdCBpZCA9IHN1Ym1pdHRlcj8uZ2V0QXR0cmlidXRlKFwiZGF0YS10dXJiby1mcmFtZVwiKSB8fCBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm8tZnJhbWVcIik7XG4gICAgaWYgKGlkICYmIGlkICE9IFwiX3RvcFwiKSB7XG4gICAgICBjb25zdCBmcmFtZSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpZH06bm90KFtkaXNhYmxlZF0pYCk7XG4gICAgICBpZiAoZnJhbWUgaW5zdGFuY2VvZiBGcmFtZUVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGZyYW1lXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmNsYXNzIEhpc3Rvcnkge1xuICBsb2NhdGlvblxuICByZXN0b3JhdGlvbklkZW50aWZpZXIgPSB1dWlkKClcbiAgcmVzdG9yYXRpb25EYXRhID0ge31cbiAgc3RhcnRlZCA9IGZhbHNlXG4gIHBhZ2VMb2FkZWQgPSBmYWxzZVxuICBjdXJyZW50SW5kZXggPSAwXG5cbiAgY29uc3RydWN0b3IoZGVsZWdhdGUpIHtcbiAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gIH1cblxuICBzdGFydCgpIHtcbiAgICBpZiAoIXRoaXMuc3RhcnRlZCkge1xuICAgICAgYWRkRXZlbnRMaXN0ZW5lcihcInBvcHN0YXRlXCIsIHRoaXMub25Qb3BTdGF0ZSwgZmFsc2UpO1xuICAgICAgYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgdGhpcy5vblBhZ2VMb2FkLCBmYWxzZSk7XG4gICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IGhpc3Rvcnkuc3RhdGU/LnR1cmJvPy5yZXN0b3JhdGlvbkluZGV4IHx8IDA7XG4gICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgdGhpcy5yZXBsYWNlKG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpKTtcbiAgICB9XG4gIH1cblxuICBzdG9wKCkge1xuICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb3BzdGF0ZVwiLCB0aGlzLm9uUG9wU3RhdGUsIGZhbHNlKTtcbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIHRoaXMub25QYWdlTG9hZCwgZmFsc2UpO1xuICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcHVzaChsb2NhdGlvbiwgcmVzdG9yYXRpb25JZGVudGlmaWVyKSB7XG4gICAgdGhpcy51cGRhdGUoaGlzdG9yeS5wdXNoU3RhdGUsIGxvY2F0aW9uLCByZXN0b3JhdGlvbklkZW50aWZpZXIpO1xuICB9XG5cbiAgcmVwbGFjZShsb2NhdGlvbiwgcmVzdG9yYXRpb25JZGVudGlmaWVyKSB7XG4gICAgdGhpcy51cGRhdGUoaGlzdG9yeS5yZXBsYWNlU3RhdGUsIGxvY2F0aW9uLCByZXN0b3JhdGlvbklkZW50aWZpZXIpO1xuICB9XG5cbiAgdXBkYXRlKG1ldGhvZCwgbG9jYXRpb24sIHJlc3RvcmF0aW9uSWRlbnRpZmllciA9IHV1aWQoKSkge1xuICAgIGlmIChtZXRob2QgPT09IGhpc3RvcnkucHVzaFN0YXRlKSArK3RoaXMuY3VycmVudEluZGV4O1xuXG4gICAgY29uc3Qgc3RhdGUgPSB7IHR1cmJvOiB7IHJlc3RvcmF0aW9uSWRlbnRpZmllciwgcmVzdG9yYXRpb25JbmRleDogdGhpcy5jdXJyZW50SW5kZXggfSB9O1xuICAgIG1ldGhvZC5jYWxsKGhpc3RvcnksIHN0YXRlLCBcIlwiLCBsb2NhdGlvbi5ocmVmKTtcbiAgICB0aGlzLmxvY2F0aW9uID0gbG9jYXRpb247XG4gICAgdGhpcy5yZXN0b3JhdGlvbklkZW50aWZpZXIgPSByZXN0b3JhdGlvbklkZW50aWZpZXI7XG4gIH1cblxuICAvLyBSZXN0b3JhdGlvbiBkYXRhXG5cbiAgZ2V0UmVzdG9yYXRpb25EYXRhRm9ySWRlbnRpZmllcihyZXN0b3JhdGlvbklkZW50aWZpZXIpIHtcbiAgICByZXR1cm4gdGhpcy5yZXN0b3JhdGlvbkRhdGFbcmVzdG9yYXRpb25JZGVudGlmaWVyXSB8fCB7fVxuICB9XG5cbiAgdXBkYXRlUmVzdG9yYXRpb25EYXRhKGFkZGl0aW9uYWxEYXRhKSB7XG4gICAgY29uc3QgeyByZXN0b3JhdGlvbklkZW50aWZpZXIgfSA9IHRoaXM7XG4gICAgY29uc3QgcmVzdG9yYXRpb25EYXRhID0gdGhpcy5yZXN0b3JhdGlvbkRhdGFbcmVzdG9yYXRpb25JZGVudGlmaWVyXTtcbiAgICB0aGlzLnJlc3RvcmF0aW9uRGF0YVtyZXN0b3JhdGlvbklkZW50aWZpZXJdID0ge1xuICAgICAgLi4ucmVzdG9yYXRpb25EYXRhLFxuICAgICAgLi4uYWRkaXRpb25hbERhdGFcbiAgICB9O1xuICB9XG5cbiAgLy8gU2Nyb2xsIHJlc3RvcmF0aW9uXG5cbiAgYXNzdW1lQ29udHJvbE9mU2Nyb2xsUmVzdG9yYXRpb24oKSB7XG4gICAgaWYgKCF0aGlzLnByZXZpb3VzU2Nyb2xsUmVzdG9yYXRpb24pIHtcbiAgICAgIHRoaXMucHJldmlvdXNTY3JvbGxSZXN0b3JhdGlvbiA9IGhpc3Rvcnkuc2Nyb2xsUmVzdG9yYXRpb24gPz8gXCJhdXRvXCI7XG4gICAgICBoaXN0b3J5LnNjcm9sbFJlc3RvcmF0aW9uID0gXCJtYW51YWxcIjtcbiAgICB9XG4gIH1cblxuICByZWxpbnF1aXNoQ29udHJvbE9mU2Nyb2xsUmVzdG9yYXRpb24oKSB7XG4gICAgaWYgKHRoaXMucHJldmlvdXNTY3JvbGxSZXN0b3JhdGlvbikge1xuICAgICAgaGlzdG9yeS5zY3JvbGxSZXN0b3JhdGlvbiA9IHRoaXMucHJldmlvdXNTY3JvbGxSZXN0b3JhdGlvbjtcbiAgICAgIGRlbGV0ZSB0aGlzLnByZXZpb3VzU2Nyb2xsUmVzdG9yYXRpb247XG4gICAgfVxuICB9XG5cbiAgLy8gRXZlbnQgaGFuZGxlcnNcblxuICBvblBvcFN0YXRlID0gKGV2ZW50KSA9PiB7XG4gICAgaWYgKHRoaXMuc2hvdWxkSGFuZGxlUG9wU3RhdGUoKSkge1xuICAgICAgY29uc3QgeyB0dXJibyB9ID0gZXZlbnQuc3RhdGUgfHwge307XG4gICAgICBpZiAodHVyYm8pIHtcbiAgICAgICAgdGhpcy5sb2NhdGlvbiA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuICAgICAgICBjb25zdCB7IHJlc3RvcmF0aW9uSWRlbnRpZmllciwgcmVzdG9yYXRpb25JbmRleCB9ID0gdHVyYm87XG4gICAgICAgIHRoaXMucmVzdG9yYXRpb25JZGVudGlmaWVyID0gcmVzdG9yYXRpb25JZGVudGlmaWVyO1xuICAgICAgICBjb25zdCBkaXJlY3Rpb24gPSByZXN0b3JhdGlvbkluZGV4ID4gdGhpcy5jdXJyZW50SW5kZXggPyBcImZvcndhcmRcIiA6IFwiYmFja1wiO1xuICAgICAgICB0aGlzLmRlbGVnYXRlLmhpc3RvcnlQb3BwZWRUb0xvY2F0aW9uV2l0aFJlc3RvcmF0aW9uSWRlbnRpZmllckFuZERpcmVjdGlvbih0aGlzLmxvY2F0aW9uLCByZXN0b3JhdGlvbklkZW50aWZpZXIsIGRpcmVjdGlvbik7XG4gICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gcmVzdG9yYXRpb25JbmRleDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBvblBhZ2VMb2FkID0gYXN5bmMgKF9ldmVudCkgPT4ge1xuICAgIGF3YWl0IG5leHRNaWNyb3Rhc2soKTtcbiAgICB0aGlzLnBhZ2VMb2FkZWQgPSB0cnVlO1xuICB9XG5cbiAgLy8gUHJpdmF0ZVxuXG4gIHNob3VsZEhhbmRsZVBvcFN0YXRlKCkge1xuICAgIC8vIFNhZmFyaSBkaXNwYXRjaGVzIGEgcG9wc3RhdGUgZXZlbnQgYWZ0ZXIgd2luZG93J3MgbG9hZCBldmVudCwgaWdub3JlIGl0XG4gICAgcmV0dXJuIHRoaXMucGFnZUlzTG9hZGVkKClcbiAgfVxuXG4gIHBhZ2VJc0xvYWRlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5wYWdlTG9hZGVkIHx8IGRvY3VtZW50LnJlYWR5U3RhdGUgPT0gXCJjb21wbGV0ZVwiXG4gIH1cbn1cblxuY2xhc3MgTGlua1ByZWZldGNoT2JzZXJ2ZXIge1xuICBzdGFydGVkID0gZmFsc2VcbiAgI3ByZWZldGNoZWRMaW5rID0gbnVsbFxuXG4gIGNvbnN0cnVjdG9yKGRlbGVnYXRlLCBldmVudFRhcmdldCkge1xuICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICB0aGlzLmV2ZW50VGFyZ2V0ID0gZXZlbnRUYXJnZXQ7XG4gIH1cblxuICBzdGFydCgpIHtcbiAgICBpZiAodGhpcy5zdGFydGVkKSByZXR1cm5cblxuICAgIGlmICh0aGlzLmV2ZW50VGFyZ2V0LnJlYWR5U3RhdGUgPT09IFwibG9hZGluZ1wiKSB7XG4gICAgICB0aGlzLmV2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIHRoaXMuI2VuYWJsZSwgeyBvbmNlOiB0cnVlIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiNlbmFibGUoKTtcbiAgICB9XG4gIH1cblxuICBzdG9wKCkge1xuICAgIGlmICghdGhpcy5zdGFydGVkKSByZXR1cm5cblxuICAgIHRoaXMuZXZlbnRUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIiwgdGhpcy4jdHJ5VG9QcmVmZXRjaFJlcXVlc3QsIHtcbiAgICAgIGNhcHR1cmU6IHRydWUsXG4gICAgICBwYXNzaXZlOiB0cnVlXG4gICAgfSk7XG4gICAgdGhpcy5ldmVudFRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCB0aGlzLiNjYW5jZWxSZXF1ZXN0SWZPYnNvbGV0ZSwge1xuICAgICAgY2FwdHVyZTogdHJ1ZSxcbiAgICAgIHBhc3NpdmU6IHRydWVcbiAgICB9KTtcblxuICAgIHRoaXMuZXZlbnRUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInR1cmJvOmJlZm9yZS1mZXRjaC1yZXF1ZXN0XCIsIHRoaXMuI3RyeVRvVXNlUHJlZmV0Y2hlZFJlcXVlc3QsIHRydWUpO1xuICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICB9XG5cbiAgI2VuYWJsZSA9ICgpID0+IHtcbiAgICB0aGlzLmV2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsIHRoaXMuI3RyeVRvUHJlZmV0Y2hSZXF1ZXN0LCB7XG4gICAgICBjYXB0dXJlOiB0cnVlLFxuICAgICAgcGFzc2l2ZTogdHJ1ZVxuICAgIH0pO1xuICAgIHRoaXMuZXZlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgdGhpcy4jY2FuY2VsUmVxdWVzdElmT2Jzb2xldGUsIHtcbiAgICAgIGNhcHR1cmU6IHRydWUsXG4gICAgICBwYXNzaXZlOiB0cnVlXG4gICAgfSk7XG5cbiAgICB0aGlzLmV2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJ0dXJibzpiZWZvcmUtZmV0Y2gtcmVxdWVzdFwiLCB0aGlzLiN0cnlUb1VzZVByZWZldGNoZWRSZXF1ZXN0LCB0cnVlKTtcbiAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuICB9XG5cbiAgI3RyeVRvUHJlZmV0Y2hSZXF1ZXN0ID0gKGV2ZW50KSA9PiB7XG4gICAgaWYgKGdldE1ldGFDb250ZW50KFwidHVyYm8tcHJlZmV0Y2hcIikgPT09IFwiZmFsc2VcIikgcmV0dXJuXG5cbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgY29uc3QgaXNMaW5rID0gdGFyZ2V0Lm1hdGNoZXMgJiYgdGFyZ2V0Lm1hdGNoZXMoXCJhW2hyZWZdOm5vdChbdGFyZ2V0Xj1fXSk6bm90KFtkb3dubG9hZF0pXCIpO1xuXG4gICAgaWYgKGlzTGluayAmJiB0aGlzLiNpc1ByZWZldGNoYWJsZSh0YXJnZXQpKSB7XG4gICAgICBjb25zdCBsaW5rID0gdGFyZ2V0O1xuICAgICAgY29uc3QgbG9jYXRpb24gPSBnZXRMb2NhdGlvbkZvckxpbmsobGluayk7XG5cbiAgICAgIGlmICh0aGlzLmRlbGVnYXRlLmNhblByZWZldGNoUmVxdWVzdFRvTG9jYXRpb24obGluaywgbG9jYXRpb24pKSB7XG4gICAgICAgIHRoaXMuI3ByZWZldGNoZWRMaW5rID0gbGluaztcblxuICAgICAgICBjb25zdCBmZXRjaFJlcXVlc3QgPSBuZXcgRmV0Y2hSZXF1ZXN0KFxuICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgRmV0Y2hNZXRob2QuZ2V0LFxuICAgICAgICAgIGxvY2F0aW9uLFxuICAgICAgICAgIG5ldyBVUkxTZWFyY2hQYXJhbXMoKSxcbiAgICAgICAgICB0YXJnZXRcbiAgICAgICAgKTtcblxuICAgICAgICBmZXRjaFJlcXVlc3QuZmV0Y2hPcHRpb25zLnByaW9yaXR5ID0gXCJsb3dcIjtcblxuICAgICAgICBwcmVmZXRjaENhY2hlLnNldExhdGVyKGxvY2F0aW9uLnRvU3RyaW5nKCksIGZldGNoUmVxdWVzdCwgdGhpcy4jY2FjaGVUdGwpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gICNjYW5jZWxSZXF1ZXN0SWZPYnNvbGV0ZSA9IChldmVudCkgPT4ge1xuICAgIGlmIChldmVudC50YXJnZXQgPT09IHRoaXMuI3ByZWZldGNoZWRMaW5rKSB0aGlzLiNjYW5jZWxQcmVmZXRjaFJlcXVlc3QoKTtcbiAgfVxuXG4gICNjYW5jZWxQcmVmZXRjaFJlcXVlc3QgPSAoKSA9PiB7XG4gICAgcHJlZmV0Y2hDYWNoZS5jbGVhcigpO1xuICAgIHRoaXMuI3ByZWZldGNoZWRMaW5rID0gbnVsbDtcbiAgfVxuXG4gICN0cnlUb1VzZVByZWZldGNoZWRSZXF1ZXN0ID0gKGV2ZW50KSA9PiB7XG4gICAgaWYgKGV2ZW50LnRhcmdldC50YWdOYW1lICE9PSBcIkZPUk1cIiAmJiBldmVudC5kZXRhaWwuZmV0Y2hPcHRpb25zLm1ldGhvZCA9PT0gXCJHRVRcIikge1xuICAgICAgY29uc3QgY2FjaGVkID0gcHJlZmV0Y2hDYWNoZS5nZXQoZXZlbnQuZGV0YWlsLnVybC50b1N0cmluZygpKTtcblxuICAgICAgaWYgKGNhY2hlZCkge1xuICAgICAgICAvLyBVc2VyIGNsaWNrZWQgbGluaywgdXNlIGNhY2hlIHJlc3BvbnNlXG4gICAgICAgIGV2ZW50LmRldGFpbC5mZXRjaFJlcXVlc3QgPSBjYWNoZWQ7XG4gICAgICB9XG5cbiAgICAgIHByZWZldGNoQ2FjaGUuY2xlYXIoKTtcbiAgICB9XG4gIH1cblxuICBwcmVwYXJlUmVxdWVzdChyZXF1ZXN0KSB7XG4gICAgY29uc3QgbGluayA9IHJlcXVlc3QudGFyZ2V0O1xuXG4gICAgcmVxdWVzdC5oZWFkZXJzW1wiWC1TZWMtUHVycG9zZVwiXSA9IFwicHJlZmV0Y2hcIjtcblxuICAgIGNvbnN0IHR1cmJvRnJhbWUgPSBsaW5rLmNsb3Nlc3QoXCJ0dXJiby1mcmFtZVwiKTtcbiAgICBjb25zdCB0dXJib0ZyYW1lVGFyZ2V0ID0gbGluay5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLWZyYW1lXCIpIHx8IHR1cmJvRnJhbWU/LmdldEF0dHJpYnV0ZShcInRhcmdldFwiKSB8fCB0dXJib0ZyYW1lPy5pZDtcblxuICAgIGlmICh0dXJib0ZyYW1lVGFyZ2V0ICYmIHR1cmJvRnJhbWVUYXJnZXQgIT09IFwiX3RvcFwiKSB7XG4gICAgICByZXF1ZXN0LmhlYWRlcnNbXCJUdXJiby1GcmFtZVwiXSA9IHR1cmJvRnJhbWVUYXJnZXQ7XG4gICAgfVxuICB9XG5cbiAgLy8gRmV0Y2ggcmVxdWVzdCBpbnRlcmZhY2VcblxuICByZXF1ZXN0U3VjY2VlZGVkV2l0aFJlc3BvbnNlKCkge31cblxuICByZXF1ZXN0U3RhcnRlZChmZXRjaFJlcXVlc3QpIHt9XG5cbiAgcmVxdWVzdEVycm9yZWQoZmV0Y2hSZXF1ZXN0KSB7fVxuXG4gIHJlcXVlc3RGaW5pc2hlZChmZXRjaFJlcXVlc3QpIHt9XG5cbiAgcmVxdWVzdFByZXZlbnRlZEhhbmRsaW5nUmVzcG9uc2UoZmV0Y2hSZXF1ZXN0LCBmZXRjaFJlc3BvbnNlKSB7fVxuXG4gIHJlcXVlc3RGYWlsZWRXaXRoUmVzcG9uc2UoZmV0Y2hSZXF1ZXN0LCBmZXRjaFJlc3BvbnNlKSB7fVxuXG4gIGdldCAjY2FjaGVUdGwoKSB7XG4gICAgcmV0dXJuIE51bWJlcihnZXRNZXRhQ29udGVudChcInR1cmJvLXByZWZldGNoLWNhY2hlLXRpbWVcIikpIHx8IGNhY2hlVHRsXG4gIH1cblxuICAjaXNQcmVmZXRjaGFibGUobGluaykge1xuICAgIGNvbnN0IGhyZWYgPSBsaW5rLmdldEF0dHJpYnV0ZShcImhyZWZcIik7XG5cbiAgICBpZiAoIWhyZWYpIHJldHVybiBmYWxzZVxuXG4gICAgaWYgKHVuZmV0Y2hhYmxlTGluayhsaW5rKSkgcmV0dXJuIGZhbHNlXG4gICAgaWYgKGxpbmtUb1RoZVNhbWVQYWdlKGxpbmspKSByZXR1cm4gZmFsc2VcbiAgICBpZiAobGlua09wdHNPdXQobGluaykpIHJldHVybiBmYWxzZVxuICAgIGlmIChub25TYWZlTGluayhsaW5rKSkgcmV0dXJuIGZhbHNlXG4gICAgaWYgKGV2ZW50UHJldmVudGVkKGxpbmspKSByZXR1cm4gZmFsc2VcblxuICAgIHJldHVybiB0cnVlXG4gIH1cbn1cblxuY29uc3QgdW5mZXRjaGFibGVMaW5rID0gKGxpbmspID0+IHtcbiAgcmV0dXJuIGxpbmsub3JpZ2luICE9PSBkb2N1bWVudC5sb2NhdGlvbi5vcmlnaW4gfHwgIVtcImh0dHA6XCIsIFwiaHR0cHM6XCJdLmluY2x1ZGVzKGxpbmsucHJvdG9jb2wpIHx8IGxpbmsuaGFzQXR0cmlidXRlKFwidGFyZ2V0XCIpXG59O1xuXG5jb25zdCBsaW5rVG9UaGVTYW1lUGFnZSA9IChsaW5rKSA9PiB7XG4gIHJldHVybiAobGluay5wYXRobmFtZSArIGxpbmsuc2VhcmNoID09PSBkb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZSArIGRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaCkgfHwgbGluay5ocmVmLnN0YXJ0c1dpdGgoXCIjXCIpXG59O1xuXG5jb25zdCBsaW5rT3B0c091dCA9IChsaW5rKSA9PiB7XG4gIGlmIChsaW5rLmdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm8tcHJlZmV0Y2hcIikgPT09IFwiZmFsc2VcIikgcmV0dXJuIHRydWVcbiAgaWYgKGxpbmsuZ2V0QXR0cmlidXRlKFwiZGF0YS10dXJib1wiKSA9PT0gXCJmYWxzZVwiKSByZXR1cm4gdHJ1ZVxuXG4gIGNvbnN0IHR1cmJvUHJlZmV0Y2hQYXJlbnQgPSBmaW5kQ2xvc2VzdFJlY3Vyc2l2ZWx5KGxpbmssIFwiW2RhdGEtdHVyYm8tcHJlZmV0Y2hdXCIpO1xuICBpZiAodHVyYm9QcmVmZXRjaFBhcmVudCAmJiB0dXJib1ByZWZldGNoUGFyZW50LmdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm8tcHJlZmV0Y2hcIikgPT09IFwiZmFsc2VcIikgcmV0dXJuIHRydWVcblxuICByZXR1cm4gZmFsc2Vcbn07XG5cbmNvbnN0IG5vblNhZmVMaW5rID0gKGxpbmspID0+IHtcbiAgY29uc3QgdHVyYm9NZXRob2QgPSBsaW5rLmdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm8tbWV0aG9kXCIpO1xuICBpZiAodHVyYm9NZXRob2QgJiYgdHVyYm9NZXRob2QudG9Mb3dlckNhc2UoKSAhPT0gXCJnZXRcIikgcmV0dXJuIHRydWVcblxuICBpZiAoaXNVSlMobGluaykpIHJldHVybiB0cnVlXG4gIGlmIChsaW5rLmhhc0F0dHJpYnV0ZShcImRhdGEtdHVyYm8tY29uZmlybVwiKSkgcmV0dXJuIHRydWVcbiAgaWYgKGxpbmsuaGFzQXR0cmlidXRlKFwiZGF0YS10dXJiby1zdHJlYW1cIikpIHJldHVybiB0cnVlXG5cbiAgcmV0dXJuIGZhbHNlXG59O1xuXG5jb25zdCBpc1VKUyA9IChsaW5rKSA9PiB7XG4gIHJldHVybiBsaW5rLmhhc0F0dHJpYnV0ZShcImRhdGEtcmVtb3RlXCIpIHx8IGxpbmsuaGFzQXR0cmlidXRlKFwiZGF0YS1iZWhhdmlvclwiKSB8fCBsaW5rLmhhc0F0dHJpYnV0ZShcImRhdGEtY29uZmlybVwiKSB8fCBsaW5rLmhhc0F0dHJpYnV0ZShcImRhdGEtbWV0aG9kXCIpXG59O1xuXG5jb25zdCBldmVudFByZXZlbnRlZCA9IChsaW5rKSA9PiB7XG4gIGNvbnN0IGV2ZW50ID0gZGlzcGF0Y2goXCJ0dXJibzpiZWZvcmUtcHJlZmV0Y2hcIiwgeyB0YXJnZXQ6IGxpbmssIGNhbmNlbGFibGU6IHRydWUgfSk7XG4gIHJldHVybiBldmVudC5kZWZhdWx0UHJldmVudGVkXG59O1xuXG5jbGFzcyBOYXZpZ2F0b3Ige1xuICBjb25zdHJ1Y3RvcihkZWxlZ2F0ZSkge1xuICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgfVxuXG4gIHByb3Bvc2VWaXNpdChsb2NhdGlvbiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKHRoaXMuZGVsZWdhdGUuYWxsb3dzVmlzaXRpbmdMb2NhdGlvbldpdGhBY3Rpb24obG9jYXRpb24sIG9wdGlvbnMuYWN0aW9uKSkge1xuICAgICAgdGhpcy5kZWxlZ2F0ZS52aXNpdFByb3Bvc2VkVG9Mb2NhdGlvbihsb2NhdGlvbiwgb3B0aW9ucyk7XG4gICAgfVxuICB9XG5cbiAgc3RhcnRWaXNpdChsb2NhdGFibGUsIHJlc3RvcmF0aW9uSWRlbnRpZmllciwgb3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5zdG9wKCk7XG4gICAgdGhpcy5jdXJyZW50VmlzaXQgPSBuZXcgVmlzaXQodGhpcywgZXhwYW5kVVJMKGxvY2F0YWJsZSksIHJlc3RvcmF0aW9uSWRlbnRpZmllciwge1xuICAgICAgcmVmZXJyZXI6IHRoaXMubG9jYXRpb24sXG4gICAgICAuLi5vcHRpb25zXG4gICAgfSk7XG4gICAgdGhpcy5jdXJyZW50VmlzaXQuc3RhcnQoKTtcbiAgfVxuXG4gIHN1Ym1pdEZvcm0oZm9ybSwgc3VibWl0dGVyKSB7XG4gICAgdGhpcy5zdG9wKCk7XG4gICAgdGhpcy5mb3JtU3VibWlzc2lvbiA9IG5ldyBGb3JtU3VibWlzc2lvbih0aGlzLCBmb3JtLCBzdWJtaXR0ZXIsIHRydWUpO1xuXG4gICAgdGhpcy5mb3JtU3VibWlzc2lvbi5zdGFydCgpO1xuICB9XG5cbiAgc3RvcCgpIHtcbiAgICBpZiAodGhpcy5mb3JtU3VibWlzc2lvbikge1xuICAgICAgdGhpcy5mb3JtU3VibWlzc2lvbi5zdG9wKCk7XG4gICAgICBkZWxldGUgdGhpcy5mb3JtU3VibWlzc2lvbjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jdXJyZW50VmlzaXQpIHtcbiAgICAgIHRoaXMuY3VycmVudFZpc2l0LmNhbmNlbCgpO1xuICAgICAgZGVsZXRlIHRoaXMuY3VycmVudFZpc2l0O1xuICAgIH1cbiAgfVxuXG4gIGdldCBhZGFwdGVyKCkge1xuICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmFkYXB0ZXJcbiAgfVxuXG4gIGdldCB2aWV3KCkge1xuICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLnZpZXdcbiAgfVxuXG4gIGdldCByb290TG9jYXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudmlldy5zbmFwc2hvdC5yb290TG9jYXRpb25cbiAgfVxuXG4gIGdldCBoaXN0b3J5KCkge1xuICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmhpc3RvcnlcbiAgfVxuXG4gIC8vIEZvcm0gc3VibWlzc2lvbiBkZWxlZ2F0ZVxuXG4gIGZvcm1TdWJtaXNzaW9uU3RhcnRlZChmb3JtU3VibWlzc2lvbikge1xuICAgIC8vIE5vdCBhbGwgYWRhcHRlcnMgaW1wbGVtZW50IGZvcm1TdWJtaXNzaW9uU3RhcnRlZFxuICAgIGlmICh0eXBlb2YgdGhpcy5hZGFwdGVyLmZvcm1TdWJtaXNzaW9uU3RhcnRlZCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICB0aGlzLmFkYXB0ZXIuZm9ybVN1Ym1pc3Npb25TdGFydGVkKGZvcm1TdWJtaXNzaW9uKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBmb3JtU3VibWlzc2lvblN1Y2NlZWRlZFdpdGhSZXNwb25zZShmb3JtU3VibWlzc2lvbiwgZmV0Y2hSZXNwb25zZSkge1xuICAgIGlmIChmb3JtU3VibWlzc2lvbiA9PSB0aGlzLmZvcm1TdWJtaXNzaW9uKSB7XG4gICAgICBjb25zdCByZXNwb25zZUhUTUwgPSBhd2FpdCBmZXRjaFJlc3BvbnNlLnJlc3BvbnNlSFRNTDtcbiAgICAgIGlmIChyZXNwb25zZUhUTUwpIHtcbiAgICAgICAgY29uc3Qgc2hvdWxkQ2FjaGVTbmFwc2hvdCA9IGZvcm1TdWJtaXNzaW9uLmlzU2FmZTtcbiAgICAgICAgaWYgKCFzaG91bGRDYWNoZVNuYXBzaG90KSB7XG4gICAgICAgICAgdGhpcy52aWV3LmNsZWFyU25hcHNob3RDYWNoZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBzdGF0dXNDb2RlLCByZWRpcmVjdGVkIH0gPSBmZXRjaFJlc3BvbnNlO1xuICAgICAgICBjb25zdCBhY3Rpb24gPSB0aGlzLiNnZXRBY3Rpb25Gb3JGb3JtU3VibWlzc2lvbihmb3JtU3VibWlzc2lvbiwgZmV0Y2hSZXNwb25zZSk7XG4gICAgICAgIGNvbnN0IHZpc2l0T3B0aW9ucyA9IHtcbiAgICAgICAgICBhY3Rpb24sXG4gICAgICAgICAgc2hvdWxkQ2FjaGVTbmFwc2hvdCxcbiAgICAgICAgICByZXNwb25zZTogeyBzdGF0dXNDb2RlLCByZXNwb25zZUhUTUwsIHJlZGlyZWN0ZWQgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnByb3Bvc2VWaXNpdChmZXRjaFJlc3BvbnNlLmxvY2F0aW9uLCB2aXNpdE9wdGlvbnMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGZvcm1TdWJtaXNzaW9uRmFpbGVkV2l0aFJlc3BvbnNlKGZvcm1TdWJtaXNzaW9uLCBmZXRjaFJlc3BvbnNlKSB7XG4gICAgY29uc3QgcmVzcG9uc2VIVE1MID0gYXdhaXQgZmV0Y2hSZXNwb25zZS5yZXNwb25zZUhUTUw7XG5cbiAgICBpZiAocmVzcG9uc2VIVE1MKSB7XG4gICAgICBjb25zdCBzbmFwc2hvdCA9IFBhZ2VTbmFwc2hvdC5mcm9tSFRNTFN0cmluZyhyZXNwb25zZUhUTUwpO1xuICAgICAgaWYgKGZldGNoUmVzcG9uc2Uuc2VydmVyRXJyb3IpIHtcbiAgICAgICAgYXdhaXQgdGhpcy52aWV3LnJlbmRlckVycm9yKHNuYXBzaG90LCB0aGlzLmN1cnJlbnRWaXNpdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCB0aGlzLnZpZXcucmVuZGVyUGFnZShzbmFwc2hvdCwgZmFsc2UsIHRydWUsIHRoaXMuY3VycmVudFZpc2l0KTtcbiAgICAgIH1cbiAgICAgIGlmKCFzbmFwc2hvdC5zaG91bGRQcmVzZXJ2ZVNjcm9sbFBvc2l0aW9uKSB7XG4gICAgICAgIHRoaXMudmlldy5zY3JvbGxUb1RvcCgpO1xuICAgICAgfVxuICAgICAgdGhpcy52aWV3LmNsZWFyU25hcHNob3RDYWNoZSgpO1xuICAgIH1cbiAgfVxuXG4gIGZvcm1TdWJtaXNzaW9uRXJyb3JlZChmb3JtU3VibWlzc2lvbiwgZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgfVxuXG4gIGZvcm1TdWJtaXNzaW9uRmluaXNoZWQoZm9ybVN1Ym1pc3Npb24pIHtcbiAgICAvLyBOb3QgYWxsIGFkYXB0ZXJzIGltcGxlbWVudCBmb3JtU3VibWlzc2lvbkZpbmlzaGVkXG4gICAgaWYgKHR5cGVvZiB0aGlzLmFkYXB0ZXIuZm9ybVN1Ym1pc3Npb25GaW5pc2hlZCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICB0aGlzLmFkYXB0ZXIuZm9ybVN1Ym1pc3Npb25GaW5pc2hlZChmb3JtU3VibWlzc2lvbik7XG4gICAgfVxuICB9XG5cbiAgLy8gTGluayBwcmVmZXRjaGluZ1xuXG4gIGxpbmtQcmVmZXRjaGluZ0lzRW5hYmxlZEZvckxvY2F0aW9uKGxvY2F0aW9uKSB7XG4gICAgLy8gTm90IGFsbCBhZGFwdGVycyBpbXBsZW1lbnQgbGlua1ByZWZldGNoaW5nSXNFbmFibGVkRm9yTG9jYXRpb25cbiAgICBpZiAodHlwZW9mIHRoaXMuYWRhcHRlci5saW5rUHJlZmV0Y2hpbmdJc0VuYWJsZWRGb3JMb2NhdGlvbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm4gdGhpcy5hZGFwdGVyLmxpbmtQcmVmZXRjaGluZ0lzRW5hYmxlZEZvckxvY2F0aW9uKGxvY2F0aW9uKVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICAvLyBWaXNpdCBkZWxlZ2F0ZVxuXG4gIHZpc2l0U3RhcnRlZCh2aXNpdCkge1xuICAgIHRoaXMuZGVsZWdhdGUudmlzaXRTdGFydGVkKHZpc2l0KTtcbiAgfVxuXG4gIHZpc2l0Q29tcGxldGVkKHZpc2l0KSB7XG4gICAgdGhpcy5kZWxlZ2F0ZS52aXNpdENvbXBsZXRlZCh2aXNpdCk7XG4gICAgZGVsZXRlIHRoaXMuY3VycmVudFZpc2l0O1xuICB9XG5cbiAgbG9jYXRpb25XaXRoQWN0aW9uSXNTYW1lUGFnZShsb2NhdGlvbiwgYWN0aW9uKSB7XG4gICAgY29uc3QgYW5jaG9yID0gZ2V0QW5jaG9yKGxvY2F0aW9uKTtcbiAgICBjb25zdCBjdXJyZW50QW5jaG9yID0gZ2V0QW5jaG9yKHRoaXMudmlldy5sYXN0UmVuZGVyZWRMb2NhdGlvbik7XG4gICAgY29uc3QgaXNSZXN0b3JhdGlvblRvVG9wID0gYWN0aW9uID09PSBcInJlc3RvcmVcIiAmJiB0eXBlb2YgYW5jaG9yID09PSBcInVuZGVmaW5lZFwiO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIGFjdGlvbiAhPT0gXCJyZXBsYWNlXCIgJiZcbiAgICAgIGdldFJlcXVlc3RVUkwobG9jYXRpb24pID09PSBnZXRSZXF1ZXN0VVJMKHRoaXMudmlldy5sYXN0UmVuZGVyZWRMb2NhdGlvbikgJiZcbiAgICAgIChpc1Jlc3RvcmF0aW9uVG9Ub3AgfHwgKGFuY2hvciAhPSBudWxsICYmIGFuY2hvciAhPT0gY3VycmVudEFuY2hvcikpXG4gICAgKVxuICB9XG5cbiAgdmlzaXRTY3JvbGxlZFRvU2FtZVBhZ2VMb2NhdGlvbihvbGRVUkwsIG5ld1VSTCkge1xuICAgIHRoaXMuZGVsZWdhdGUudmlzaXRTY3JvbGxlZFRvU2FtZVBhZ2VMb2NhdGlvbihvbGRVUkwsIG5ld1VSTCk7XG4gIH1cblxuICAvLyBWaXNpdHNcblxuICBnZXQgbG9jYXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaGlzdG9yeS5sb2NhdGlvblxuICB9XG5cbiAgZ2V0IHJlc3RvcmF0aW9uSWRlbnRpZmllcigpIHtcbiAgICByZXR1cm4gdGhpcy5oaXN0b3J5LnJlc3RvcmF0aW9uSWRlbnRpZmllclxuICB9XG5cbiAgI2dldEFjdGlvbkZvckZvcm1TdWJtaXNzaW9uKGZvcm1TdWJtaXNzaW9uLCBmZXRjaFJlc3BvbnNlKSB7XG4gICAgY29uc3QgeyBzdWJtaXR0ZXIsIGZvcm1FbGVtZW50IH0gPSBmb3JtU3VibWlzc2lvbjtcbiAgICByZXR1cm4gZ2V0VmlzaXRBY3Rpb24oc3VibWl0dGVyLCBmb3JtRWxlbWVudCkgfHwgdGhpcy4jZ2V0RGVmYXVsdEFjdGlvbihmZXRjaFJlc3BvbnNlKVxuICB9XG5cbiAgI2dldERlZmF1bHRBY3Rpb24oZmV0Y2hSZXNwb25zZSkge1xuICAgIGNvbnN0IHNhbWVMb2NhdGlvblJlZGlyZWN0ID0gZmV0Y2hSZXNwb25zZS5yZWRpcmVjdGVkICYmIGZldGNoUmVzcG9uc2UubG9jYXRpb24uaHJlZiA9PT0gdGhpcy5sb2NhdGlvbj8uaHJlZjtcbiAgICByZXR1cm4gc2FtZUxvY2F0aW9uUmVkaXJlY3QgPyBcInJlcGxhY2VcIiA6IFwiYWR2YW5jZVwiXG4gIH1cbn1cblxuY29uc3QgUGFnZVN0YWdlID0ge1xuICBpbml0aWFsOiAwLFxuICBsb2FkaW5nOiAxLFxuICBpbnRlcmFjdGl2ZTogMixcbiAgY29tcGxldGU6IDNcbn07XG5cbmNsYXNzIFBhZ2VPYnNlcnZlciB7XG4gIHN0YWdlID0gUGFnZVN0YWdlLmluaXRpYWxcbiAgc3RhcnRlZCA9IGZhbHNlXG5cbiAgY29uc3RydWN0b3IoZGVsZWdhdGUpIHtcbiAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gIH1cblxuICBzdGFydCgpIHtcbiAgICBpZiAoIXRoaXMuc3RhcnRlZCkge1xuICAgICAgaWYgKHRoaXMuc3RhZ2UgPT0gUGFnZVN0YWdlLmluaXRpYWwpIHtcbiAgICAgICAgdGhpcy5zdGFnZSA9IFBhZ2VTdGFnZS5sb2FkaW5nO1xuICAgICAgfVxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlYWR5c3RhdGVjaGFuZ2VcIiwgdGhpcy5pbnRlcnByZXRSZWFkeVN0YXRlLCBmYWxzZSk7XG4gICAgICBhZGRFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgdGhpcy5wYWdlV2lsbFVubG9hZCwgZmFsc2UpO1xuICAgICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBzdG9wKCkge1xuICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZWFkeXN0YXRlY2hhbmdlXCIsIHRoaXMuaW50ZXJwcmV0UmVhZHlTdGF0ZSwgZmFsc2UpO1xuICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsIHRoaXMucGFnZVdpbGxVbmxvYWQsIGZhbHNlKTtcbiAgICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGludGVycHJldFJlYWR5U3RhdGUgPSAoKSA9PiB7XG4gICAgY29uc3QgeyByZWFkeVN0YXRlIH0gPSB0aGlzO1xuICAgIGlmIChyZWFkeVN0YXRlID09IFwiaW50ZXJhY3RpdmVcIikge1xuICAgICAgdGhpcy5wYWdlSXNJbnRlcmFjdGl2ZSgpO1xuICAgIH0gZWxzZSBpZiAocmVhZHlTdGF0ZSA9PSBcImNvbXBsZXRlXCIpIHtcbiAgICAgIHRoaXMucGFnZUlzQ29tcGxldGUoKTtcbiAgICB9XG4gIH1cblxuICBwYWdlSXNJbnRlcmFjdGl2ZSgpIHtcbiAgICBpZiAodGhpcy5zdGFnZSA9PSBQYWdlU3RhZ2UubG9hZGluZykge1xuICAgICAgdGhpcy5zdGFnZSA9IFBhZ2VTdGFnZS5pbnRlcmFjdGl2ZTtcbiAgICAgIHRoaXMuZGVsZWdhdGUucGFnZUJlY2FtZUludGVyYWN0aXZlKCk7XG4gICAgfVxuICB9XG5cbiAgcGFnZUlzQ29tcGxldGUoKSB7XG4gICAgdGhpcy5wYWdlSXNJbnRlcmFjdGl2ZSgpO1xuICAgIGlmICh0aGlzLnN0YWdlID09IFBhZ2VTdGFnZS5pbnRlcmFjdGl2ZSkge1xuICAgICAgdGhpcy5zdGFnZSA9IFBhZ2VTdGFnZS5jb21wbGV0ZTtcbiAgICAgIHRoaXMuZGVsZWdhdGUucGFnZUxvYWRlZCgpO1xuICAgIH1cbiAgfVxuXG4gIHBhZ2VXaWxsVW5sb2FkID0gKCkgPT4ge1xuICAgIHRoaXMuZGVsZWdhdGUucGFnZVdpbGxVbmxvYWQoKTtcbiAgfVxuXG4gIGdldCByZWFkeVN0YXRlKCkge1xuICAgIHJldHVybiBkb2N1bWVudC5yZWFkeVN0YXRlXG4gIH1cbn1cblxuY2xhc3MgU2Nyb2xsT2JzZXJ2ZXIge1xuICBzdGFydGVkID0gZmFsc2VcblxuICBjb25zdHJ1Y3RvcihkZWxlZ2F0ZSkge1xuICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgfVxuXG4gIHN0YXJ0KCkge1xuICAgIGlmICghdGhpcy5zdGFydGVkKSB7XG4gICAgICBhZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHRoaXMub25TY3JvbGwsIGZhbHNlKTtcbiAgICAgIHRoaXMub25TY3JvbGwoKTtcbiAgICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgc3RvcCgpIHtcbiAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICByZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHRoaXMub25TY3JvbGwsIGZhbHNlKTtcbiAgICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIG9uU2Nyb2xsID0gKCkgPT4ge1xuICAgIHRoaXMudXBkYXRlUG9zaXRpb24oeyB4OiB3aW5kb3cucGFnZVhPZmZzZXQsIHk6IHdpbmRvdy5wYWdlWU9mZnNldCB9KTtcbiAgfVxuXG4gIC8vIFByaXZhdGVcblxuICB1cGRhdGVQb3NpdGlvbihwb3NpdGlvbikge1xuICAgIHRoaXMuZGVsZWdhdGUuc2Nyb2xsUG9zaXRpb25DaGFuZ2VkKHBvc2l0aW9uKTtcbiAgfVxufVxuXG5jbGFzcyBTdHJlYW1NZXNzYWdlUmVuZGVyZXIge1xuICByZW5kZXIoeyBmcmFnbWVudCB9KSB7XG4gICAgQmFyZG8ucHJlc2VydmluZ1Blcm1hbmVudEVsZW1lbnRzKHRoaXMsIGdldFBlcm1hbmVudEVsZW1lbnRNYXBGb3JGcmFnbWVudChmcmFnbWVudCksICgpID0+IHtcbiAgICAgIHdpdGhBdXRvZm9jdXNGcm9tRnJhZ21lbnQoZnJhZ21lbnQsICgpID0+IHtcbiAgICAgICAgd2l0aFByZXNlcnZlZEZvY3VzKCgpID0+IHtcbiAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gQmFyZG8gZGVsZWdhdGVcblxuICBlbnRlcmluZ0JhcmRvKGN1cnJlbnRQZXJtYW5lbnRFbGVtZW50LCBuZXdQZXJtYW5lbnRFbGVtZW50KSB7XG4gICAgbmV3UGVybWFuZW50RWxlbWVudC5yZXBsYWNlV2l0aChjdXJyZW50UGVybWFuZW50RWxlbWVudC5jbG9uZU5vZGUodHJ1ZSkpO1xuICB9XG5cbiAgbGVhdmluZ0JhcmRvKCkge31cbn1cblxuZnVuY3Rpb24gZ2V0UGVybWFuZW50RWxlbWVudE1hcEZvckZyYWdtZW50KGZyYWdtZW50KSB7XG4gIGNvbnN0IHBlcm1hbmVudEVsZW1lbnRzSW5Eb2N1bWVudCA9IHF1ZXJ5UGVybWFuZW50RWxlbWVudHNBbGwoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTtcbiAgY29uc3QgcGVybWFuZW50RWxlbWVudE1hcCA9IHt9O1xuICBmb3IgKGNvbnN0IHBlcm1hbmVudEVsZW1lbnRJbkRvY3VtZW50IG9mIHBlcm1hbmVudEVsZW1lbnRzSW5Eb2N1bWVudCkge1xuICAgIGNvbnN0IHsgaWQgfSA9IHBlcm1hbmVudEVsZW1lbnRJbkRvY3VtZW50O1xuXG4gICAgZm9yIChjb25zdCBzdHJlYW1FbGVtZW50IG9mIGZyYWdtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJ0dXJiby1zdHJlYW1cIikpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnRJblN0cmVhbSA9IGdldFBlcm1hbmVudEVsZW1lbnRCeUlkKHN0cmVhbUVsZW1lbnQudGVtcGxhdGVFbGVtZW50LmNvbnRlbnQsIGlkKTtcblxuICAgICAgaWYgKGVsZW1lbnRJblN0cmVhbSkge1xuICAgICAgICBwZXJtYW5lbnRFbGVtZW50TWFwW2lkXSA9IFtwZXJtYW5lbnRFbGVtZW50SW5Eb2N1bWVudCwgZWxlbWVudEluU3RyZWFtXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcGVybWFuZW50RWxlbWVudE1hcFxufVxuXG5hc3luYyBmdW5jdGlvbiB3aXRoQXV0b2ZvY3VzRnJvbUZyYWdtZW50KGZyYWdtZW50LCBjYWxsYmFjaykge1xuICBjb25zdCBnZW5lcmF0ZWRJRCA9IGB0dXJiby1zdHJlYW0tYXV0b2ZvY3VzLSR7dXVpZCgpfWA7XG4gIGNvbnN0IHR1cmJvU3RyZWFtcyA9IGZyYWdtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJ0dXJiby1zdHJlYW1cIik7XG4gIGNvbnN0IGVsZW1lbnRXaXRoQXV0b2ZvY3VzID0gZmlyc3RBdXRvZm9jdXNhYmxlRWxlbWVudEluU3RyZWFtcyh0dXJib1N0cmVhbXMpO1xuICBsZXQgd2lsbEF1dG9mb2N1c0lkID0gbnVsbDtcblxuICBpZiAoZWxlbWVudFdpdGhBdXRvZm9jdXMpIHtcbiAgICBpZiAoZWxlbWVudFdpdGhBdXRvZm9jdXMuaWQpIHtcbiAgICAgIHdpbGxBdXRvZm9jdXNJZCA9IGVsZW1lbnRXaXRoQXV0b2ZvY3VzLmlkO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aWxsQXV0b2ZvY3VzSWQgPSBnZW5lcmF0ZWRJRDtcbiAgICB9XG5cbiAgICBlbGVtZW50V2l0aEF1dG9mb2N1cy5pZCA9IHdpbGxBdXRvZm9jdXNJZDtcbiAgfVxuXG4gIGNhbGxiYWNrKCk7XG4gIGF3YWl0IG5leHRSZXBhaW50KCk7XG5cbiAgY29uc3QgaGFzTm9BY3RpdmVFbGVtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PSBudWxsIHx8IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT0gZG9jdW1lbnQuYm9keTtcblxuICBpZiAoaGFzTm9BY3RpdmVFbGVtZW50ICYmIHdpbGxBdXRvZm9jdXNJZCkge1xuICAgIGNvbnN0IGVsZW1lbnRUb0F1dG9mb2N1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHdpbGxBdXRvZm9jdXNJZCk7XG5cbiAgICBpZiAoZWxlbWVudElzRm9jdXNhYmxlKGVsZW1lbnRUb0F1dG9mb2N1cykpIHtcbiAgICAgIGVsZW1lbnRUb0F1dG9mb2N1cy5mb2N1cygpO1xuICAgIH1cbiAgICBpZiAoZWxlbWVudFRvQXV0b2ZvY3VzICYmIGVsZW1lbnRUb0F1dG9mb2N1cy5pZCA9PSBnZW5lcmF0ZWRJRCkge1xuICAgICAgZWxlbWVudFRvQXV0b2ZvY3VzLnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpO1xuICAgIH1cbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiB3aXRoUHJlc2VydmVkRm9jdXMoY2FsbGJhY2spIHtcbiAgY29uc3QgW2FjdGl2ZUVsZW1lbnRCZWZvcmVSZW5kZXIsIGFjdGl2ZUVsZW1lbnRBZnRlclJlbmRlcl0gPSBhd2FpdCBhcm91bmQoY2FsbGJhY2ssICgpID0+IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpO1xuXG4gIGNvbnN0IHJlc3RvcmVGb2N1c1RvID0gYWN0aXZlRWxlbWVudEJlZm9yZVJlbmRlciAmJiBhY3RpdmVFbGVtZW50QmVmb3JlUmVuZGVyLmlkO1xuXG4gIGlmIChyZXN0b3JlRm9jdXNUbykge1xuICAgIGNvbnN0IGVsZW1lbnRUb0ZvY3VzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocmVzdG9yZUZvY3VzVG8pO1xuXG4gICAgaWYgKGVsZW1lbnRJc0ZvY3VzYWJsZShlbGVtZW50VG9Gb2N1cykgJiYgZWxlbWVudFRvRm9jdXMgIT0gYWN0aXZlRWxlbWVudEFmdGVyUmVuZGVyKSB7XG4gICAgICBlbGVtZW50VG9Gb2N1cy5mb2N1cygpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBmaXJzdEF1dG9mb2N1c2FibGVFbGVtZW50SW5TdHJlYW1zKG5vZGVMaXN0T2ZTdHJlYW1FbGVtZW50cykge1xuICBmb3IgKGNvbnN0IHN0cmVhbUVsZW1lbnQgb2Ygbm9kZUxpc3RPZlN0cmVhbUVsZW1lbnRzKSB7XG4gICAgY29uc3QgZWxlbWVudFdpdGhBdXRvZm9jdXMgPSBxdWVyeUF1dG9mb2N1c2FibGVFbGVtZW50KHN0cmVhbUVsZW1lbnQudGVtcGxhdGVFbGVtZW50LmNvbnRlbnQpO1xuXG4gICAgaWYgKGVsZW1lbnRXaXRoQXV0b2ZvY3VzKSByZXR1cm4gZWxlbWVudFdpdGhBdXRvZm9jdXNcbiAgfVxuXG4gIHJldHVybiBudWxsXG59XG5cbmNsYXNzIFN0cmVhbU9ic2VydmVyIHtcbiAgc291cmNlcyA9IG5ldyBTZXQoKVxuICAjc3RhcnRlZCA9IGZhbHNlXG5cbiAgY29uc3RydWN0b3IoZGVsZWdhdGUpIHtcbiAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gIH1cblxuICBzdGFydCgpIHtcbiAgICBpZiAoIXRoaXMuI3N0YXJ0ZWQpIHtcbiAgICAgIHRoaXMuI3N0YXJ0ZWQgPSB0cnVlO1xuICAgICAgYWRkRXZlbnRMaXN0ZW5lcihcInR1cmJvOmJlZm9yZS1mZXRjaC1yZXNwb25zZVwiLCB0aGlzLmluc3BlY3RGZXRjaFJlc3BvbnNlLCBmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgc3RvcCgpIHtcbiAgICBpZiAodGhpcy4jc3RhcnRlZCkge1xuICAgICAgdGhpcy4jc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihcInR1cmJvOmJlZm9yZS1mZXRjaC1yZXNwb25zZVwiLCB0aGlzLmluc3BlY3RGZXRjaFJlc3BvbnNlLCBmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgY29ubmVjdFN0cmVhbVNvdXJjZShzb3VyY2UpIHtcbiAgICBpZiAoIXRoaXMuc3RyZWFtU291cmNlSXNDb25uZWN0ZWQoc291cmNlKSkge1xuICAgICAgdGhpcy5zb3VyY2VzLmFkZChzb3VyY2UpO1xuICAgICAgc291cmNlLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIHRoaXMucmVjZWl2ZU1lc3NhZ2VFdmVudCwgZmFsc2UpO1xuICAgIH1cbiAgfVxuXG4gIGRpc2Nvbm5lY3RTdHJlYW1Tb3VyY2Uoc291cmNlKSB7XG4gICAgaWYgKHRoaXMuc3RyZWFtU291cmNlSXNDb25uZWN0ZWQoc291cmNlKSkge1xuICAgICAgdGhpcy5zb3VyY2VzLmRlbGV0ZShzb3VyY2UpO1xuICAgICAgc291cmNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIHRoaXMucmVjZWl2ZU1lc3NhZ2VFdmVudCwgZmFsc2UpO1xuICAgIH1cbiAgfVxuXG4gIHN0cmVhbVNvdXJjZUlzQ29ubmVjdGVkKHNvdXJjZSkge1xuICAgIHJldHVybiB0aGlzLnNvdXJjZXMuaGFzKHNvdXJjZSlcbiAgfVxuXG4gIGluc3BlY3RGZXRjaFJlc3BvbnNlID0gKGV2ZW50KSA9PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBmZXRjaFJlc3BvbnNlRnJvbUV2ZW50KGV2ZW50KTtcbiAgICBpZiAocmVzcG9uc2UgJiYgZmV0Y2hSZXNwb25zZUlzU3RyZWFtKHJlc3BvbnNlKSkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMucmVjZWl2ZU1lc3NhZ2VSZXNwb25zZShyZXNwb25zZSk7XG4gICAgfVxuICB9XG5cbiAgcmVjZWl2ZU1lc3NhZ2VFdmVudCA9IChldmVudCkgPT4ge1xuICAgIGlmICh0aGlzLiNzdGFydGVkICYmIHR5cGVvZiBldmVudC5kYXRhID09IFwic3RyaW5nXCIpIHtcbiAgICAgIHRoaXMucmVjZWl2ZU1lc3NhZ2VIVE1MKGV2ZW50LmRhdGEpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlY2VpdmVNZXNzYWdlUmVzcG9uc2UocmVzcG9uc2UpIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVzcG9uc2UucmVzcG9uc2VIVE1MO1xuICAgIGlmIChodG1sKSB7XG4gICAgICB0aGlzLnJlY2VpdmVNZXNzYWdlSFRNTChodG1sKTtcbiAgICB9XG4gIH1cblxuICByZWNlaXZlTWVzc2FnZUhUTUwoaHRtbCkge1xuICAgIHRoaXMuZGVsZWdhdGUucmVjZWl2ZWRNZXNzYWdlRnJvbVN0cmVhbShTdHJlYW1NZXNzYWdlLndyYXAoaHRtbCkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZldGNoUmVzcG9uc2VGcm9tRXZlbnQoZXZlbnQpIHtcbiAgY29uc3QgZmV0Y2hSZXNwb25zZSA9IGV2ZW50LmRldGFpbD8uZmV0Y2hSZXNwb25zZTtcbiAgaWYgKGZldGNoUmVzcG9uc2UgaW5zdGFuY2VvZiBGZXRjaFJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIGZldGNoUmVzcG9uc2VcbiAgfVxufVxuXG5mdW5jdGlvbiBmZXRjaFJlc3BvbnNlSXNTdHJlYW0ocmVzcG9uc2UpIHtcbiAgY29uc3QgY29udGVudFR5cGUgPSByZXNwb25zZS5jb250ZW50VHlwZSA/PyBcIlwiO1xuICByZXR1cm4gY29udGVudFR5cGUuc3RhcnRzV2l0aChTdHJlYW1NZXNzYWdlLmNvbnRlbnRUeXBlKVxufVxuXG5jbGFzcyBFcnJvclJlbmRlcmVyIGV4dGVuZHMgUmVuZGVyZXIge1xuICBzdGF0aWMgcmVuZGVyRWxlbWVudChjdXJyZW50RWxlbWVudCwgbmV3RWxlbWVudCkge1xuICAgIGNvbnN0IHsgZG9jdW1lbnRFbGVtZW50LCBib2R5IH0gPSBkb2N1bWVudDtcblxuICAgIGRvY3VtZW50RWxlbWVudC5yZXBsYWNlQ2hpbGQobmV3RWxlbWVudCwgYm9keSk7XG4gIH1cblxuICBhc3luYyByZW5kZXIoKSB7XG4gICAgdGhpcy5yZXBsYWNlSGVhZEFuZEJvZHkoKTtcbiAgICB0aGlzLmFjdGl2YXRlU2NyaXB0RWxlbWVudHMoKTtcbiAgfVxuXG4gIHJlcGxhY2VIZWFkQW5kQm9keSgpIHtcbiAgICBjb25zdCB7IGRvY3VtZW50RWxlbWVudCwgaGVhZCB9ID0gZG9jdW1lbnQ7XG4gICAgZG9jdW1lbnRFbGVtZW50LnJlcGxhY2VDaGlsZCh0aGlzLm5ld0hlYWQsIGhlYWQpO1xuICAgIHRoaXMucmVuZGVyRWxlbWVudCh0aGlzLmN1cnJlbnRFbGVtZW50LCB0aGlzLm5ld0VsZW1lbnQpO1xuICB9XG5cbiAgYWN0aXZhdGVTY3JpcHRFbGVtZW50cygpIHtcbiAgICBmb3IgKGNvbnN0IHJlcGxhY2VhYmxlRWxlbWVudCBvZiB0aGlzLnNjcmlwdEVsZW1lbnRzKSB7XG4gICAgICBjb25zdCBwYXJlbnROb2RlID0gcmVwbGFjZWFibGVFbGVtZW50LnBhcmVudE5vZGU7XG4gICAgICBpZiAocGFyZW50Tm9kZSkge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gYWN0aXZhdGVTY3JpcHRFbGVtZW50KHJlcGxhY2VhYmxlRWxlbWVudCk7XG4gICAgICAgIHBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGVsZW1lbnQsIHJlcGxhY2VhYmxlRWxlbWVudCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0IG5ld0hlYWQoKSB7XG4gICAgcmV0dXJuIHRoaXMubmV3U25hcHNob3QuaGVhZFNuYXBzaG90LmVsZW1lbnRcbiAgfVxuXG4gIGdldCBzY3JpcHRFbGVtZW50cygpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJzY3JpcHRcIilcbiAgfVxufVxuXG5jbGFzcyBQYWdlUmVuZGVyZXIgZXh0ZW5kcyBSZW5kZXJlciB7XG4gIHN0YXRpYyByZW5kZXJFbGVtZW50KGN1cnJlbnRFbGVtZW50LCBuZXdFbGVtZW50KSB7XG4gICAgaWYgKGRvY3VtZW50LmJvZHkgJiYgbmV3RWxlbWVudCBpbnN0YW5jZW9mIEhUTUxCb2R5RWxlbWVudCkge1xuICAgICAgZG9jdW1lbnQuYm9keS5yZXBsYWNlV2l0aChuZXdFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKG5ld0VsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBzaG91bGRSZW5kZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMubmV3U25hcHNob3QuaXNWaXNpdGFibGUgJiYgdGhpcy50cmFja2VkRWxlbWVudHNBcmVJZGVudGljYWxcbiAgfVxuXG4gIGdldCByZWxvYWRSZWFzb24oKSB7XG4gICAgaWYgKCF0aGlzLm5ld1NuYXBzaG90LmlzVmlzaXRhYmxlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZWFzb246IFwidHVyYm9fdmlzaXRfY29udHJvbF9pc19yZWxvYWRcIlxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghdGhpcy50cmFja2VkRWxlbWVudHNBcmVJZGVudGljYWwpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlYXNvbjogXCJ0cmFja2VkX2VsZW1lbnRfbWlzbWF0Y2hcIlxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHByZXBhcmVUb1JlbmRlcigpIHtcbiAgICB0aGlzLiNzZXRMYW5ndWFnZSgpO1xuICAgIGF3YWl0IHRoaXMubWVyZ2VIZWFkKCk7XG4gIH1cblxuICBhc3luYyByZW5kZXIoKSB7XG4gICAgaWYgKHRoaXMud2lsbFJlbmRlcikge1xuICAgICAgYXdhaXQgdGhpcy5yZXBsYWNlQm9keSgpO1xuICAgIH1cbiAgfVxuXG4gIGZpbmlzaFJlbmRlcmluZygpIHtcbiAgICBzdXBlci5maW5pc2hSZW5kZXJpbmcoKTtcbiAgICBpZiAoIXRoaXMuaXNQcmV2aWV3KSB7XG4gICAgICB0aGlzLmZvY3VzRmlyc3RBdXRvZm9jdXNhYmxlRWxlbWVudCgpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBjdXJyZW50SGVhZFNuYXBzaG90KCkge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRTbmFwc2hvdC5oZWFkU25hcHNob3RcbiAgfVxuXG4gIGdldCBuZXdIZWFkU25hcHNob3QoKSB7XG4gICAgcmV0dXJuIHRoaXMubmV3U25hcHNob3QuaGVhZFNuYXBzaG90XG4gIH1cblxuICBnZXQgbmV3RWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5uZXdTbmFwc2hvdC5lbGVtZW50XG4gIH1cblxuICAjc2V0TGFuZ3VhZ2UoKSB7XG4gICAgY29uc3QgeyBkb2N1bWVudEVsZW1lbnQgfSA9IHRoaXMuY3VycmVudFNuYXBzaG90O1xuICAgIGNvbnN0IHsgbGFuZyB9ID0gdGhpcy5uZXdTbmFwc2hvdDtcblxuICAgIGlmIChsYW5nKSB7XG4gICAgICBkb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKFwibGFuZ1wiLCBsYW5nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnRFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImxhbmdcIik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbWVyZ2VIZWFkKCkge1xuICAgIGNvbnN0IG1lcmdlZEhlYWRFbGVtZW50cyA9IHRoaXMubWVyZ2VQcm92aXNpb25hbEVsZW1lbnRzKCk7XG4gICAgY29uc3QgbmV3U3R5bGVzaGVldEVsZW1lbnRzID0gdGhpcy5jb3B5TmV3SGVhZFN0eWxlc2hlZXRFbGVtZW50cygpO1xuICAgIHRoaXMuY29weU5ld0hlYWRTY3JpcHRFbGVtZW50cygpO1xuXG4gICAgYXdhaXQgbWVyZ2VkSGVhZEVsZW1lbnRzO1xuICAgIGF3YWl0IG5ld1N0eWxlc2hlZXRFbGVtZW50cztcblxuICAgIGlmICh0aGlzLndpbGxSZW5kZXIpIHtcbiAgICAgIHRoaXMucmVtb3ZlVW51c2VkRHluYW1pY1N0eWxlc2hlZXRFbGVtZW50cygpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlcGxhY2VCb2R5KCkge1xuICAgIGF3YWl0IHRoaXMucHJlc2VydmluZ1Blcm1hbmVudEVsZW1lbnRzKGFzeW5jICgpID0+IHtcbiAgICAgIHRoaXMuYWN0aXZhdGVOZXdCb2R5KCk7XG4gICAgICBhd2FpdCB0aGlzLmFzc2lnbk5ld0JvZHkoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldCB0cmFja2VkRWxlbWVudHNBcmVJZGVudGljYWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudEhlYWRTbmFwc2hvdC50cmFja2VkRWxlbWVudFNpZ25hdHVyZSA9PSB0aGlzLm5ld0hlYWRTbmFwc2hvdC50cmFja2VkRWxlbWVudFNpZ25hdHVyZVxuICB9XG5cbiAgYXN5bmMgY29weU5ld0hlYWRTdHlsZXNoZWV0RWxlbWVudHMoKSB7XG4gICAgY29uc3QgbG9hZGluZ0VsZW1lbnRzID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgdGhpcy5uZXdIZWFkU3R5bGVzaGVldEVsZW1lbnRzKSB7XG4gICAgICBsb2FkaW5nRWxlbWVudHMucHVzaCh3YWl0Rm9yTG9hZChlbGVtZW50KSk7XG5cbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgfVxuXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwobG9hZGluZ0VsZW1lbnRzKTtcbiAgfVxuXG4gIGNvcHlOZXdIZWFkU2NyaXB0RWxlbWVudHMoKSB7XG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMubmV3SGVhZFNjcmlwdEVsZW1lbnRzKSB7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGFjdGl2YXRlU2NyaXB0RWxlbWVudChlbGVtZW50KSk7XG4gICAgfVxuICB9XG5cbiAgcmVtb3ZlVW51c2VkRHluYW1pY1N0eWxlc2hlZXRFbGVtZW50cygpIHtcbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgdGhpcy51bnVzZWREeW5hbWljU3R5bGVzaGVldEVsZW1lbnRzKSB7XG4gICAgICBkb2N1bWVudC5oZWFkLnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIG1lcmdlUHJvdmlzaW9uYWxFbGVtZW50cygpIHtcbiAgICBjb25zdCBuZXdIZWFkRWxlbWVudHMgPSBbLi4udGhpcy5uZXdIZWFkUHJvdmlzaW9uYWxFbGVtZW50c107XG5cbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgdGhpcy5jdXJyZW50SGVhZFByb3Zpc2lvbmFsRWxlbWVudHMpIHtcbiAgICAgIGlmICghdGhpcy5pc0N1cnJlbnRFbGVtZW50SW5FbGVtZW50TGlzdChlbGVtZW50LCBuZXdIZWFkRWxlbWVudHMpKSB7XG4gICAgICAgIGRvY3VtZW50LmhlYWQucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIG5ld0hlYWRFbGVtZW50cykge1xuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBpc0N1cnJlbnRFbGVtZW50SW5FbGVtZW50TGlzdChlbGVtZW50LCBlbGVtZW50TGlzdCkge1xuICAgIGZvciAoY29uc3QgW2luZGV4LCBuZXdFbGVtZW50XSBvZiBlbGVtZW50TGlzdC5lbnRyaWVzKCkpIHtcbiAgICAgIC8vIGlmIHRpdGxlIGVsZW1lbnQuLi5cbiAgICAgIGlmIChlbGVtZW50LnRhZ05hbWUgPT0gXCJUSVRMRVwiKSB7XG4gICAgICAgIGlmIChuZXdFbGVtZW50LnRhZ05hbWUgIT0gXCJUSVRMRVwiKSB7XG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWxlbWVudC5pbm5lckhUTUwgPT0gbmV3RWxlbWVudC5pbm5lckhUTUwpIHtcbiAgICAgICAgICBlbGVtZW50TGlzdC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gaWYgYW55IG90aGVyIGVsZW1lbnQuLi5cbiAgICAgIGlmIChuZXdFbGVtZW50LmlzRXF1YWxOb2RlKGVsZW1lbnQpKSB7XG4gICAgICAgIGVsZW1lbnRMaXN0LnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICByZW1vdmVDdXJyZW50SGVhZFByb3Zpc2lvbmFsRWxlbWVudHMoKSB7XG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMuY3VycmVudEhlYWRQcm92aXNpb25hbEVsZW1lbnRzKSB7XG4gICAgICBkb2N1bWVudC5oZWFkLnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIGNvcHlOZXdIZWFkUHJvdmlzaW9uYWxFbGVtZW50cygpIHtcbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgdGhpcy5uZXdIZWFkUHJvdmlzaW9uYWxFbGVtZW50cykge1xuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBhY3RpdmF0ZU5ld0JvZHkoKSB7XG4gICAgZG9jdW1lbnQuYWRvcHROb2RlKHRoaXMubmV3RWxlbWVudCk7XG4gICAgdGhpcy5hY3RpdmF0ZU5ld0JvZHlTY3JpcHRFbGVtZW50cygpO1xuICB9XG5cbiAgYWN0aXZhdGVOZXdCb2R5U2NyaXB0RWxlbWVudHMoKSB7XG4gICAgZm9yIChjb25zdCBpbmVydFNjcmlwdEVsZW1lbnQgb2YgdGhpcy5uZXdCb2R5U2NyaXB0RWxlbWVudHMpIHtcbiAgICAgIGNvbnN0IGFjdGl2YXRlZFNjcmlwdEVsZW1lbnQgPSBhY3RpdmF0ZVNjcmlwdEVsZW1lbnQoaW5lcnRTY3JpcHRFbGVtZW50KTtcbiAgICAgIGluZXJ0U2NyaXB0RWxlbWVudC5yZXBsYWNlV2l0aChhY3RpdmF0ZWRTY3JpcHRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBhc3NpZ25OZXdCb2R5KCkge1xuICAgIGF3YWl0IHRoaXMucmVuZGVyRWxlbWVudCh0aGlzLmN1cnJlbnRFbGVtZW50LCB0aGlzLm5ld0VsZW1lbnQpO1xuICB9XG5cbiAgZ2V0IHVudXNlZER5bmFtaWNTdHlsZXNoZWV0RWxlbWVudHMoKSB7XG4gICAgcmV0dXJuIHRoaXMub2xkSGVhZFN0eWxlc2hlZXRFbGVtZW50cy5maWx0ZXIoKGVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm8tdHJhY2tcIikgPT09IFwiZHluYW1pY1wiXG4gICAgfSlcbiAgfVxuXG4gIGdldCBvbGRIZWFkU3R5bGVzaGVldEVsZW1lbnRzKCkge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRIZWFkU25hcHNob3QuZ2V0U3R5bGVzaGVldEVsZW1lbnRzTm90SW5TbmFwc2hvdCh0aGlzLm5ld0hlYWRTbmFwc2hvdClcbiAgfVxuXG4gIGdldCBuZXdIZWFkU3R5bGVzaGVldEVsZW1lbnRzKCkge1xuICAgIHJldHVybiB0aGlzLm5ld0hlYWRTbmFwc2hvdC5nZXRTdHlsZXNoZWV0RWxlbWVudHNOb3RJblNuYXBzaG90KHRoaXMuY3VycmVudEhlYWRTbmFwc2hvdClcbiAgfVxuXG4gIGdldCBuZXdIZWFkU2NyaXB0RWxlbWVudHMoKSB7XG4gICAgcmV0dXJuIHRoaXMubmV3SGVhZFNuYXBzaG90LmdldFNjcmlwdEVsZW1lbnRzTm90SW5TbmFwc2hvdCh0aGlzLmN1cnJlbnRIZWFkU25hcHNob3QpXG4gIH1cblxuICBnZXQgY3VycmVudEhlYWRQcm92aXNpb25hbEVsZW1lbnRzKCkge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRIZWFkU25hcHNob3QucHJvdmlzaW9uYWxFbGVtZW50c1xuICB9XG5cbiAgZ2V0IG5ld0hlYWRQcm92aXNpb25hbEVsZW1lbnRzKCkge1xuICAgIHJldHVybiB0aGlzLm5ld0hlYWRTbmFwc2hvdC5wcm92aXNpb25hbEVsZW1lbnRzXG4gIH1cblxuICBnZXQgbmV3Qm9keVNjcmlwdEVsZW1lbnRzKCkge1xuICAgIHJldHVybiB0aGlzLm5ld0VsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcInNjcmlwdFwiKVxuICB9XG59XG5cbmNsYXNzIE1vcnBoaW5nUGFnZVJlbmRlcmVyIGV4dGVuZHMgUGFnZVJlbmRlcmVyIHtcbiAgc3RhdGljIHJlbmRlckVsZW1lbnQoY3VycmVudEVsZW1lbnQsIG5ld0VsZW1lbnQpIHtcbiAgICBtb3JwaEVsZW1lbnRzKGN1cnJlbnRFbGVtZW50LCBuZXdFbGVtZW50LCB7XG4gICAgICBjYWxsYmFja3M6IHtcbiAgICAgICAgYmVmb3JlTm9kZU1vcnBoZWQ6IChub2RlLCBuZXdOb2RlKSA9PiB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgc2hvdWxkUmVmcmVzaEZyYW1lV2l0aE1vcnBoaW5nKG5vZGUsIG5ld05vZGUpICYmXG4gICAgICAgICAgICAgICFjbG9zZXN0RnJhbWVSZWxvYWRhYmxlV2l0aE1vcnBoaW5nKG5vZGUpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBub2RlLnJlbG9hZCgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGRpc3BhdGNoKFwidHVyYm86bW9ycGhcIiwgeyBkZXRhaWw6IHsgY3VycmVudEVsZW1lbnQsIG5ld0VsZW1lbnQgfSB9KTtcbiAgfVxuXG4gIGFzeW5jIHByZXNlcnZpbmdQZXJtYW5lbnRFbGVtZW50cyhjYWxsYmFjaykge1xuICAgIHJldHVybiBhd2FpdCBjYWxsYmFjaygpXG4gIH1cblxuICBnZXQgcmVuZGVyTWV0aG9kKCkge1xuICAgIHJldHVybiBcIm1vcnBoXCJcbiAgfVxuXG4gIGdldCBzaG91bGRBdXRvZm9jdXMoKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuY2xhc3MgU25hcHNob3RDYWNoZSB7XG4gIGtleXMgPSBbXVxuICBzbmFwc2hvdHMgPSB7fVxuXG4gIGNvbnN0cnVjdG9yKHNpemUpIHtcbiAgICB0aGlzLnNpemUgPSBzaXplO1xuICB9XG5cbiAgaGFzKGxvY2F0aW9uKSB7XG4gICAgcmV0dXJuIHRvQ2FjaGVLZXkobG9jYXRpb24pIGluIHRoaXMuc25hcHNob3RzXG4gIH1cblxuICBnZXQobG9jYXRpb24pIHtcbiAgICBpZiAodGhpcy5oYXMobG9jYXRpb24pKSB7XG4gICAgICBjb25zdCBzbmFwc2hvdCA9IHRoaXMucmVhZChsb2NhdGlvbik7XG4gICAgICB0aGlzLnRvdWNoKGxvY2F0aW9uKTtcbiAgICAgIHJldHVybiBzbmFwc2hvdFxuICAgIH1cbiAgfVxuXG4gIHB1dChsb2NhdGlvbiwgc25hcHNob3QpIHtcbiAgICB0aGlzLndyaXRlKGxvY2F0aW9uLCBzbmFwc2hvdCk7XG4gICAgdGhpcy50b3VjaChsb2NhdGlvbik7XG4gICAgcmV0dXJuIHNuYXBzaG90XG4gIH1cblxuICBjbGVhcigpIHtcbiAgICB0aGlzLnNuYXBzaG90cyA9IHt9O1xuICB9XG5cbiAgLy8gUHJpdmF0ZVxuXG4gIHJlYWQobG9jYXRpb24pIHtcbiAgICByZXR1cm4gdGhpcy5zbmFwc2hvdHNbdG9DYWNoZUtleShsb2NhdGlvbildXG4gIH1cblxuICB3cml0ZShsb2NhdGlvbiwgc25hcHNob3QpIHtcbiAgICB0aGlzLnNuYXBzaG90c1t0b0NhY2hlS2V5KGxvY2F0aW9uKV0gPSBzbmFwc2hvdDtcbiAgfVxuXG4gIHRvdWNoKGxvY2F0aW9uKSB7XG4gICAgY29uc3Qga2V5ID0gdG9DYWNoZUtleShsb2NhdGlvbik7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmtleXMuaW5kZXhPZihrZXkpO1xuICAgIGlmIChpbmRleCA+IC0xKSB0aGlzLmtleXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB0aGlzLmtleXMudW5zaGlmdChrZXkpO1xuICAgIHRoaXMudHJpbSgpO1xuICB9XG5cbiAgdHJpbSgpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiB0aGlzLmtleXMuc3BsaWNlKHRoaXMuc2l6ZSkpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLnNuYXBzaG90c1trZXldO1xuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBQYWdlVmlldyBleHRlbmRzIFZpZXcge1xuICBzbmFwc2hvdENhY2hlID0gbmV3IFNuYXBzaG90Q2FjaGUoMTApXG4gIGxhc3RSZW5kZXJlZExvY2F0aW9uID0gbmV3IFVSTChsb2NhdGlvbi5ocmVmKVxuICBmb3JjZVJlbG9hZGVkID0gZmFsc2VcblxuICBzaG91bGRUcmFuc2l0aW9uVG8obmV3U25hcHNob3QpIHtcbiAgICByZXR1cm4gdGhpcy5zbmFwc2hvdC5wcmVmZXJzVmlld1RyYW5zaXRpb25zICYmIG5ld1NuYXBzaG90LnByZWZlcnNWaWV3VHJhbnNpdGlvbnNcbiAgfVxuXG4gIHJlbmRlclBhZ2Uoc25hcHNob3QsIGlzUHJldmlldyA9IGZhbHNlLCB3aWxsUmVuZGVyID0gdHJ1ZSwgdmlzaXQpIHtcbiAgICBjb25zdCBzaG91bGRNb3JwaFBhZ2UgPSB0aGlzLmlzUGFnZVJlZnJlc2godmlzaXQpICYmIHRoaXMuc25hcHNob3Quc2hvdWxkTW9ycGhQYWdlO1xuICAgIGNvbnN0IHJlbmRlcmVyQ2xhc3MgPSBzaG91bGRNb3JwaFBhZ2UgPyBNb3JwaGluZ1BhZ2VSZW5kZXJlciA6IFBhZ2VSZW5kZXJlcjtcblxuICAgIGNvbnN0IHJlbmRlcmVyID0gbmV3IHJlbmRlcmVyQ2xhc3ModGhpcy5zbmFwc2hvdCwgc25hcHNob3QsIGlzUHJldmlldywgd2lsbFJlbmRlcik7XG5cbiAgICBpZiAoIXJlbmRlcmVyLnNob3VsZFJlbmRlcikge1xuICAgICAgdGhpcy5mb3JjZVJlbG9hZGVkID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmlzaXQ/LmNoYW5nZUhpc3RvcnkoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5yZW5kZXIocmVuZGVyZXIpXG4gIH1cblxuICByZW5kZXJFcnJvcihzbmFwc2hvdCwgdmlzaXQpIHtcbiAgICB2aXNpdD8uY2hhbmdlSGlzdG9yeSgpO1xuICAgIGNvbnN0IHJlbmRlcmVyID0gbmV3IEVycm9yUmVuZGVyZXIodGhpcy5zbmFwc2hvdCwgc25hcHNob3QsIGZhbHNlKTtcbiAgICByZXR1cm4gdGhpcy5yZW5kZXIocmVuZGVyZXIpXG4gIH1cblxuICBjbGVhclNuYXBzaG90Q2FjaGUoKSB7XG4gICAgdGhpcy5zbmFwc2hvdENhY2hlLmNsZWFyKCk7XG4gIH1cblxuICBhc3luYyBjYWNoZVNuYXBzaG90KHNuYXBzaG90ID0gdGhpcy5zbmFwc2hvdCkge1xuICAgIGlmIChzbmFwc2hvdC5pc0NhY2hlYWJsZSkge1xuICAgICAgdGhpcy5kZWxlZ2F0ZS52aWV3V2lsbENhY2hlU25hcHNob3QoKTtcbiAgICAgIGNvbnN0IHsgbGFzdFJlbmRlcmVkTG9jYXRpb246IGxvY2F0aW9uIH0gPSB0aGlzO1xuICAgICAgYXdhaXQgbmV4dEV2ZW50TG9vcFRpY2soKTtcbiAgICAgIGNvbnN0IGNhY2hlZFNuYXBzaG90ID0gc25hcHNob3QuY2xvbmUoKTtcbiAgICAgIHRoaXMuc25hcHNob3RDYWNoZS5wdXQobG9jYXRpb24sIGNhY2hlZFNuYXBzaG90KTtcbiAgICAgIHJldHVybiBjYWNoZWRTbmFwc2hvdFxuICAgIH1cbiAgfVxuXG4gIGdldENhY2hlZFNuYXBzaG90Rm9yTG9jYXRpb24obG9jYXRpb24pIHtcbiAgICByZXR1cm4gdGhpcy5zbmFwc2hvdENhY2hlLmdldChsb2NhdGlvbilcbiAgfVxuXG4gIGlzUGFnZVJlZnJlc2godmlzaXQpIHtcbiAgICByZXR1cm4gIXZpc2l0IHx8ICh0aGlzLmxhc3RSZW5kZXJlZExvY2F0aW9uLnBhdGhuYW1lID09PSB2aXNpdC5sb2NhdGlvbi5wYXRobmFtZSAmJiB2aXNpdC5hY3Rpb24gPT09IFwicmVwbGFjZVwiKVxuICB9XG5cbiAgc2hvdWxkUHJlc2VydmVTY3JvbGxQb3NpdGlvbih2aXNpdCkge1xuICAgIHJldHVybiB0aGlzLmlzUGFnZVJlZnJlc2godmlzaXQpICYmIHRoaXMuc25hcHNob3Quc2hvdWxkUHJlc2VydmVTY3JvbGxQb3NpdGlvblxuICB9XG5cbiAgZ2V0IHNuYXBzaG90KCkge1xuICAgIHJldHVybiBQYWdlU25hcHNob3QuZnJvbUVsZW1lbnQodGhpcy5lbGVtZW50KVxuICB9XG59XG5cbmNsYXNzIFByZWxvYWRlciB7XG4gIHNlbGVjdG9yID0gXCJhW2RhdGEtdHVyYm8tcHJlbG9hZF1cIlxuXG4gIGNvbnN0cnVjdG9yKGRlbGVnYXRlLCBzbmFwc2hvdENhY2hlKSB7XG4gICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgIHRoaXMuc25hcHNob3RDYWNoZSA9IHNuYXBzaG90Q2FjaGU7XG4gIH1cblxuICBzdGFydCgpIHtcbiAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJsb2FkaW5nXCIpIHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIHRoaXMuI3ByZWxvYWRBbGwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnByZWxvYWRPbkxvYWRMaW5rc0ZvclZpZXcoZG9jdW1lbnQuYm9keSk7XG4gICAgfVxuICB9XG5cbiAgc3RvcCgpIHtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCB0aGlzLiNwcmVsb2FkQWxsKTtcbiAgfVxuXG4gIHByZWxvYWRPbkxvYWRMaW5rc0ZvclZpZXcoZWxlbWVudCkge1xuICAgIGZvciAoY29uc3QgbGluayBvZiBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5zZWxlY3RvcikpIHtcbiAgICAgIGlmICh0aGlzLmRlbGVnYXRlLnNob3VsZFByZWxvYWRMaW5rKGxpbmspKSB7XG4gICAgICAgIHRoaXMucHJlbG9hZFVSTChsaW5rKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBwcmVsb2FkVVJMKGxpbmspIHtcbiAgICBjb25zdCBsb2NhdGlvbiA9IG5ldyBVUkwobGluay5ocmVmKTtcblxuICAgIGlmICh0aGlzLnNuYXBzaG90Q2FjaGUuaGFzKGxvY2F0aW9uKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgZmV0Y2hSZXF1ZXN0ID0gbmV3IEZldGNoUmVxdWVzdCh0aGlzLCBGZXRjaE1ldGhvZC5nZXQsIGxvY2F0aW9uLCBuZXcgVVJMU2VhcmNoUGFyYW1zKCksIGxpbmspO1xuICAgIGF3YWl0IGZldGNoUmVxdWVzdC5wZXJmb3JtKCk7XG4gIH1cblxuICAvLyBGZXRjaCByZXF1ZXN0IGRlbGVnYXRlXG5cbiAgcHJlcGFyZVJlcXVlc3QoZmV0Y2hSZXF1ZXN0KSB7XG4gICAgZmV0Y2hSZXF1ZXN0LmhlYWRlcnNbXCJYLVNlYy1QdXJwb3NlXCJdID0gXCJwcmVmZXRjaFwiO1xuICB9XG5cbiAgYXN5bmMgcmVxdWVzdFN1Y2NlZWRlZFdpdGhSZXNwb25zZShmZXRjaFJlcXVlc3QsIGZldGNoUmVzcG9uc2UpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2VIVE1MID0gYXdhaXQgZmV0Y2hSZXNwb25zZS5yZXNwb25zZUhUTUw7XG4gICAgICBjb25zdCBzbmFwc2hvdCA9IFBhZ2VTbmFwc2hvdC5mcm9tSFRNTFN0cmluZyhyZXNwb25zZUhUTUwpO1xuXG4gICAgICB0aGlzLnNuYXBzaG90Q2FjaGUucHV0KGZldGNoUmVxdWVzdC51cmwsIHNuYXBzaG90KTtcbiAgICB9IGNhdGNoIChfKSB7XG4gICAgICAvLyBJZiB3ZSBjYW5ub3QgcHJlbG9hZCB0aGF0IGlzIG9rIVxuICAgIH1cbiAgfVxuXG4gIHJlcXVlc3RTdGFydGVkKGZldGNoUmVxdWVzdCkge31cblxuICByZXF1ZXN0RXJyb3JlZChmZXRjaFJlcXVlc3QpIHt9XG5cbiAgcmVxdWVzdEZpbmlzaGVkKGZldGNoUmVxdWVzdCkge31cblxuICByZXF1ZXN0UHJldmVudGVkSGFuZGxpbmdSZXNwb25zZShmZXRjaFJlcXVlc3QsIGZldGNoUmVzcG9uc2UpIHt9XG5cbiAgcmVxdWVzdEZhaWxlZFdpdGhSZXNwb25zZShmZXRjaFJlcXVlc3QsIGZldGNoUmVzcG9uc2UpIHt9XG5cbiAgI3ByZWxvYWRBbGwgPSAoKSA9PiB7XG4gICAgdGhpcy5wcmVsb2FkT25Mb2FkTGlua3NGb3JWaWV3KGRvY3VtZW50LmJvZHkpO1xuICB9XG59XG5cbmNsYXNzIENhY2hlIHtcbiAgY29uc3RydWN0b3Ioc2Vzc2lvbikge1xuICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG4gIH1cblxuICBjbGVhcigpIHtcbiAgICB0aGlzLnNlc3Npb24uY2xlYXJDYWNoZSgpO1xuICB9XG5cbiAgcmVzZXRDYWNoZUNvbnRyb2woKSB7XG4gICAgdGhpcy4jc2V0Q2FjaGVDb250cm9sKFwiXCIpO1xuICB9XG5cbiAgZXhlbXB0UGFnZUZyb21DYWNoZSgpIHtcbiAgICB0aGlzLiNzZXRDYWNoZUNvbnRyb2woXCJuby1jYWNoZVwiKTtcbiAgfVxuXG4gIGV4ZW1wdFBhZ2VGcm9tUHJldmlldygpIHtcbiAgICB0aGlzLiNzZXRDYWNoZUNvbnRyb2woXCJuby1wcmV2aWV3XCIpO1xuICB9XG5cbiAgI3NldENhY2hlQ29udHJvbCh2YWx1ZSkge1xuICAgIHNldE1ldGFDb250ZW50KFwidHVyYm8tY2FjaGUtY29udHJvbFwiLCB2YWx1ZSk7XG4gIH1cbn1cblxuY2xhc3MgU2Vzc2lvbiB7XG4gIG5hdmlnYXRvciA9IG5ldyBOYXZpZ2F0b3IodGhpcylcbiAgaGlzdG9yeSA9IG5ldyBIaXN0b3J5KHRoaXMpXG4gIHZpZXcgPSBuZXcgUGFnZVZpZXcodGhpcywgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KVxuICBhZGFwdGVyID0gbmV3IEJyb3dzZXJBZGFwdGVyKHRoaXMpXG5cbiAgcGFnZU9ic2VydmVyID0gbmV3IFBhZ2VPYnNlcnZlcih0aGlzKVxuICBjYWNoZU9ic2VydmVyID0gbmV3IENhY2hlT2JzZXJ2ZXIoKVxuICBsaW5rUHJlZmV0Y2hPYnNlcnZlciA9IG5ldyBMaW5rUHJlZmV0Y2hPYnNlcnZlcih0aGlzLCBkb2N1bWVudClcbiAgbGlua0NsaWNrT2JzZXJ2ZXIgPSBuZXcgTGlua0NsaWNrT2JzZXJ2ZXIodGhpcywgd2luZG93KVxuICBmb3JtU3VibWl0T2JzZXJ2ZXIgPSBuZXcgRm9ybVN1Ym1pdE9ic2VydmVyKHRoaXMsIGRvY3VtZW50KVxuICBzY3JvbGxPYnNlcnZlciA9IG5ldyBTY3JvbGxPYnNlcnZlcih0aGlzKVxuICBzdHJlYW1PYnNlcnZlciA9IG5ldyBTdHJlYW1PYnNlcnZlcih0aGlzKVxuICBmb3JtTGlua0NsaWNrT2JzZXJ2ZXIgPSBuZXcgRm9ybUxpbmtDbGlja09ic2VydmVyKHRoaXMsIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudClcbiAgZnJhbWVSZWRpcmVjdG9yID0gbmV3IEZyYW1lUmVkaXJlY3Rvcih0aGlzLCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpXG4gIHN0cmVhbU1lc3NhZ2VSZW5kZXJlciA9IG5ldyBTdHJlYW1NZXNzYWdlUmVuZGVyZXIoKVxuICBjYWNoZSA9IG5ldyBDYWNoZSh0aGlzKVxuXG4gIGVuYWJsZWQgPSB0cnVlXG4gIHN0YXJ0ZWQgPSBmYWxzZVxuICAjcGFnZVJlZnJlc2hEZWJvdW5jZVBlcmlvZCA9IDE1MFxuXG4gIGNvbnN0cnVjdG9yKHJlY2VudFJlcXVlc3RzKSB7XG4gICAgdGhpcy5yZWNlbnRSZXF1ZXN0cyA9IHJlY2VudFJlcXVlc3RzO1xuICAgIHRoaXMucHJlbG9hZGVyID0gbmV3IFByZWxvYWRlcih0aGlzLCB0aGlzLnZpZXcuc25hcHNob3RDYWNoZSk7XG4gICAgdGhpcy5kZWJvdW5jZWRSZWZyZXNoID0gdGhpcy5yZWZyZXNoO1xuICAgIHRoaXMucGFnZVJlZnJlc2hEZWJvdW5jZVBlcmlvZCA9IHRoaXMucGFnZVJlZnJlc2hEZWJvdW5jZVBlcmlvZDtcbiAgfVxuXG4gIHN0YXJ0KCkge1xuICAgIGlmICghdGhpcy5zdGFydGVkKSB7XG4gICAgICB0aGlzLnBhZ2VPYnNlcnZlci5zdGFydCgpO1xuICAgICAgdGhpcy5jYWNoZU9ic2VydmVyLnN0YXJ0KCk7XG4gICAgICB0aGlzLmxpbmtQcmVmZXRjaE9ic2VydmVyLnN0YXJ0KCk7XG4gICAgICB0aGlzLmZvcm1MaW5rQ2xpY2tPYnNlcnZlci5zdGFydCgpO1xuICAgICAgdGhpcy5saW5rQ2xpY2tPYnNlcnZlci5zdGFydCgpO1xuICAgICAgdGhpcy5mb3JtU3VibWl0T2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICAgIHRoaXMuc2Nyb2xsT2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICAgIHRoaXMuc3RyZWFtT2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICAgIHRoaXMuZnJhbWVSZWRpcmVjdG9yLnN0YXJ0KCk7XG4gICAgICB0aGlzLmhpc3Rvcnkuc3RhcnQoKTtcbiAgICAgIHRoaXMucHJlbG9hZGVyLnN0YXJ0KCk7XG4gICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBkaXNhYmxlKCkge1xuICAgIHRoaXMuZW5hYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgc3RvcCgpIHtcbiAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICB0aGlzLnBhZ2VPYnNlcnZlci5zdG9wKCk7XG4gICAgICB0aGlzLmNhY2hlT2JzZXJ2ZXIuc3RvcCgpO1xuICAgICAgdGhpcy5saW5rUHJlZmV0Y2hPYnNlcnZlci5zdG9wKCk7XG4gICAgICB0aGlzLmZvcm1MaW5rQ2xpY2tPYnNlcnZlci5zdG9wKCk7XG4gICAgICB0aGlzLmxpbmtDbGlja09ic2VydmVyLnN0b3AoKTtcbiAgICAgIHRoaXMuZm9ybVN1Ym1pdE9ic2VydmVyLnN0b3AoKTtcbiAgICAgIHRoaXMuc2Nyb2xsT2JzZXJ2ZXIuc3RvcCgpO1xuICAgICAgdGhpcy5zdHJlYW1PYnNlcnZlci5zdG9wKCk7XG4gICAgICB0aGlzLmZyYW1lUmVkaXJlY3Rvci5zdG9wKCk7XG4gICAgICB0aGlzLmhpc3Rvcnkuc3RvcCgpO1xuICAgICAgdGhpcy5wcmVsb2FkZXIuc3RvcCgpO1xuICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcmVnaXN0ZXJBZGFwdGVyKGFkYXB0ZXIpIHtcbiAgICB0aGlzLmFkYXB0ZXIgPSBhZGFwdGVyO1xuICB9XG5cbiAgdmlzaXQobG9jYXRpb24sIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGZyYW1lRWxlbWVudCA9IG9wdGlvbnMuZnJhbWUgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvcHRpb25zLmZyYW1lKSA6IG51bGw7XG5cbiAgICBpZiAoZnJhbWVFbGVtZW50IGluc3RhbmNlb2YgRnJhbWVFbGVtZW50KSB7XG4gICAgICBjb25zdCBhY3Rpb24gPSBvcHRpb25zLmFjdGlvbiB8fCBnZXRWaXNpdEFjdGlvbihmcmFtZUVsZW1lbnQpO1xuXG4gICAgICBmcmFtZUVsZW1lbnQuZGVsZWdhdGUucHJvcG9zZVZpc2l0SWZOYXZpZ2F0ZWRXaXRoQWN0aW9uKGZyYW1lRWxlbWVudCwgYWN0aW9uKTtcbiAgICAgIGZyYW1lRWxlbWVudC5zcmMgPSBsb2NhdGlvbi50b1N0cmluZygpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm5hdmlnYXRvci5wcm9wb3NlVmlzaXQoZXhwYW5kVVJMKGxvY2F0aW9uKSwgb3B0aW9ucyk7XG4gICAgfVxuICB9XG5cbiAgcmVmcmVzaCh1cmwsIHJlcXVlc3RJZCkge1xuICAgIGNvbnN0IGlzUmVjZW50UmVxdWVzdCA9IHJlcXVlc3RJZCAmJiB0aGlzLnJlY2VudFJlcXVlc3RzLmhhcyhyZXF1ZXN0SWQpO1xuICAgIGNvbnN0IGlzQ3VycmVudFVybCA9IHVybCA9PT0gZG9jdW1lbnQuYmFzZVVSSTtcbiAgICBpZiAoIWlzUmVjZW50UmVxdWVzdCAmJiAhdGhpcy5uYXZpZ2F0b3IuY3VycmVudFZpc2l0ICYmIGlzQ3VycmVudFVybCkge1xuICAgICAgdGhpcy52aXNpdCh1cmwsIHsgYWN0aW9uOiBcInJlcGxhY2VcIiwgc2hvdWxkQ2FjaGVTbmFwc2hvdDogZmFsc2UgfSk7XG4gICAgfVxuICB9XG5cbiAgY29ubmVjdFN0cmVhbVNvdXJjZShzb3VyY2UpIHtcbiAgICB0aGlzLnN0cmVhbU9ic2VydmVyLmNvbm5lY3RTdHJlYW1Tb3VyY2Uoc291cmNlKTtcbiAgfVxuXG4gIGRpc2Nvbm5lY3RTdHJlYW1Tb3VyY2Uoc291cmNlKSB7XG4gICAgdGhpcy5zdHJlYW1PYnNlcnZlci5kaXNjb25uZWN0U3RyZWFtU291cmNlKHNvdXJjZSk7XG4gIH1cblxuICByZW5kZXJTdHJlYW1NZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICB0aGlzLnN0cmVhbU1lc3NhZ2VSZW5kZXJlci5yZW5kZXIoU3RyZWFtTWVzc2FnZS53cmFwKG1lc3NhZ2UpKTtcbiAgfVxuXG4gIGNsZWFyQ2FjaGUoKSB7XG4gICAgdGhpcy52aWV3LmNsZWFyU25hcHNob3RDYWNoZSgpO1xuICB9XG5cbiAgc2V0UHJvZ3Jlc3NCYXJEZWxheShkZWxheSkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIFwiUGxlYXNlIHJlcGxhY2UgYHNlc3Npb24uc2V0UHJvZ3Jlc3NCYXJEZWxheShkZWxheSlgIHdpdGggYHNlc3Npb24ucHJvZ3Jlc3NCYXJEZWxheSA9IGRlbGF5YC4gVGhlIGZ1bmN0aW9uIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSB2ZXJzaW9uIG9mIFR1cmJvLmBcIlxuICAgICk7XG5cbiAgICB0aGlzLnByb2dyZXNzQmFyRGVsYXkgPSBkZWxheTtcbiAgfVxuXG4gIHNldCBwcm9ncmVzc0JhckRlbGF5KGRlbGF5KSB7XG4gICAgY29uZmlnLmRyaXZlLnByb2dyZXNzQmFyRGVsYXkgPSBkZWxheTtcbiAgfVxuXG4gIGdldCBwcm9ncmVzc0JhckRlbGF5KCkge1xuICAgIHJldHVybiBjb25maWcuZHJpdmUucHJvZ3Jlc3NCYXJEZWxheVxuICB9XG5cbiAgc2V0IGRyaXZlKHZhbHVlKSB7XG4gICAgY29uZmlnLmRyaXZlLmVuYWJsZWQgPSB2YWx1ZTtcbiAgfVxuXG4gIGdldCBkcml2ZSgpIHtcbiAgICByZXR1cm4gY29uZmlnLmRyaXZlLmVuYWJsZWRcbiAgfVxuXG4gIHNldCBmb3JtTW9kZSh2YWx1ZSkge1xuICAgIGNvbmZpZy5mb3Jtcy5tb2RlID0gdmFsdWU7XG4gIH1cblxuICBnZXQgZm9ybU1vZGUoKSB7XG4gICAgcmV0dXJuIGNvbmZpZy5mb3Jtcy5tb2RlXG4gIH1cblxuICBnZXQgbG9jYXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaGlzdG9yeS5sb2NhdGlvblxuICB9XG5cbiAgZ2V0IHJlc3RvcmF0aW9uSWRlbnRpZmllcigpIHtcbiAgICByZXR1cm4gdGhpcy5oaXN0b3J5LnJlc3RvcmF0aW9uSWRlbnRpZmllclxuICB9XG5cbiAgZ2V0IHBhZ2VSZWZyZXNoRGVib3VuY2VQZXJpb2QoKSB7XG4gICAgcmV0dXJuIHRoaXMuI3BhZ2VSZWZyZXNoRGVib3VuY2VQZXJpb2RcbiAgfVxuXG4gIHNldCBwYWdlUmVmcmVzaERlYm91bmNlUGVyaW9kKHZhbHVlKSB7XG4gICAgdGhpcy5yZWZyZXNoID0gZGVib3VuY2UodGhpcy5kZWJvdW5jZWRSZWZyZXNoLmJpbmQodGhpcyksIHZhbHVlKTtcbiAgICB0aGlzLiNwYWdlUmVmcmVzaERlYm91bmNlUGVyaW9kID0gdmFsdWU7XG4gIH1cblxuICAvLyBQcmVsb2FkZXIgZGVsZWdhdGVcblxuICBzaG91bGRQcmVsb2FkTGluayhlbGVtZW50KSB7XG4gICAgY29uc3QgaXNVbnNhZmUgPSBlbGVtZW50Lmhhc0F0dHJpYnV0ZShcImRhdGEtdHVyYm8tbWV0aG9kXCIpO1xuICAgIGNvbnN0IGlzU3RyZWFtID0gZWxlbWVudC5oYXNBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLXN0cmVhbVwiKTtcbiAgICBjb25zdCBmcmFtZVRhcmdldCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS10dXJiby1mcmFtZVwiKTtcbiAgICBjb25zdCBmcmFtZSA9IGZyYW1lVGFyZ2V0ID09IFwiX3RvcFwiID9cbiAgICAgIG51bGwgOlxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZnJhbWVUYXJnZXQpIHx8IGZpbmRDbG9zZXN0UmVjdXJzaXZlbHkoZWxlbWVudCwgXCJ0dXJiby1mcmFtZTpub3QoW2Rpc2FibGVkXSlcIik7XG5cbiAgICBpZiAoaXNVbnNhZmUgfHwgaXNTdHJlYW0gfHwgZnJhbWUgaW5zdGFuY2VvZiBGcmFtZUVsZW1lbnQpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBsb2NhdGlvbiA9IG5ldyBVUkwoZWxlbWVudC5ocmVmKTtcblxuICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudElzTmF2aWdhdGFibGUoZWxlbWVudCkgJiYgbG9jYXRpb25Jc1Zpc2l0YWJsZShsb2NhdGlvbiwgdGhpcy5zbmFwc2hvdC5yb290TG9jYXRpb24pXG4gICAgfVxuICB9XG5cbiAgLy8gSGlzdG9yeSBkZWxlZ2F0ZVxuXG4gIGhpc3RvcnlQb3BwZWRUb0xvY2F0aW9uV2l0aFJlc3RvcmF0aW9uSWRlbnRpZmllckFuZERpcmVjdGlvbihsb2NhdGlvbiwgcmVzdG9yYXRpb25JZGVudGlmaWVyLCBkaXJlY3Rpb24pIHtcbiAgICBpZiAodGhpcy5lbmFibGVkKSB7XG4gICAgICB0aGlzLm5hdmlnYXRvci5zdGFydFZpc2l0KGxvY2F0aW9uLCByZXN0b3JhdGlvbklkZW50aWZpZXIsIHtcbiAgICAgICAgYWN0aW9uOiBcInJlc3RvcmVcIixcbiAgICAgICAgaGlzdG9yeUNoYW5nZWQ6IHRydWUsXG4gICAgICAgIGRpcmVjdGlvblxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYWRhcHRlci5wYWdlSW52YWxpZGF0ZWQoe1xuICAgICAgICByZWFzb246IFwidHVyYm9fZGlzYWJsZWRcIlxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLy8gU2Nyb2xsIG9ic2VydmVyIGRlbGVnYXRlXG5cbiAgc2Nyb2xsUG9zaXRpb25DaGFuZ2VkKHBvc2l0aW9uKSB7XG4gICAgdGhpcy5oaXN0b3J5LnVwZGF0ZVJlc3RvcmF0aW9uRGF0YSh7IHNjcm9sbFBvc2l0aW9uOiBwb3NpdGlvbiB9KTtcbiAgfVxuXG4gIC8vIEZvcm0gY2xpY2sgb2JzZXJ2ZXIgZGVsZWdhdGVcblxuICB3aWxsU3VibWl0Rm9ybUxpbmtUb0xvY2F0aW9uKGxpbmssIGxvY2F0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudElzTmF2aWdhdGFibGUobGluaykgJiYgbG9jYXRpb25Jc1Zpc2l0YWJsZShsb2NhdGlvbiwgdGhpcy5zbmFwc2hvdC5yb290TG9jYXRpb24pXG4gIH1cblxuICBzdWJtaXR0ZWRGb3JtTGlua1RvTG9jYXRpb24oKSB7fVxuXG4gIC8vIExpbmsgaG92ZXIgb2JzZXJ2ZXIgZGVsZWdhdGVcblxuICBjYW5QcmVmZXRjaFJlcXVlc3RUb0xvY2F0aW9uKGxpbmssIGxvY2F0aW9uKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuZWxlbWVudElzTmF2aWdhdGFibGUobGluaykgJiZcbiAgICAgIGxvY2F0aW9uSXNWaXNpdGFibGUobG9jYXRpb24sIHRoaXMuc25hcHNob3Qucm9vdExvY2F0aW9uKSAmJlxuICAgICAgdGhpcy5uYXZpZ2F0b3IubGlua1ByZWZldGNoaW5nSXNFbmFibGVkRm9yTG9jYXRpb24obG9jYXRpb24pXG4gICAgKVxuICB9XG5cbiAgLy8gTGluayBjbGljayBvYnNlcnZlciBkZWxlZ2F0ZVxuXG4gIHdpbGxGb2xsb3dMaW5rVG9Mb2NhdGlvbihsaW5rLCBsb2NhdGlvbiwgZXZlbnQpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5lbGVtZW50SXNOYXZpZ2F0YWJsZShsaW5rKSAmJlxuICAgICAgbG9jYXRpb25Jc1Zpc2l0YWJsZShsb2NhdGlvbiwgdGhpcy5zbmFwc2hvdC5yb290TG9jYXRpb24pICYmXG4gICAgICB0aGlzLmFwcGxpY2F0aW9uQWxsb3dzRm9sbG93aW5nTGlua1RvTG9jYXRpb24obGluaywgbG9jYXRpb24sIGV2ZW50KVxuICAgIClcbiAgfVxuXG4gIGZvbGxvd2VkTGlua1RvTG9jYXRpb24obGluaywgbG9jYXRpb24pIHtcbiAgICBjb25zdCBhY3Rpb24gPSB0aGlzLmdldEFjdGlvbkZvckxpbmsobGluayk7XG4gICAgY29uc3QgYWNjZXB0c1N0cmVhbVJlc3BvbnNlID0gbGluay5oYXNBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLXN0cmVhbVwiKTtcblxuICAgIHRoaXMudmlzaXQobG9jYXRpb24uaHJlZiwgeyBhY3Rpb24sIGFjY2VwdHNTdHJlYW1SZXNwb25zZSB9KTtcbiAgfVxuXG4gIC8vIE5hdmlnYXRvciBkZWxlZ2F0ZVxuXG4gIGFsbG93c1Zpc2l0aW5nTG9jYXRpb25XaXRoQWN0aW9uKGxvY2F0aW9uLCBhY3Rpb24pIHtcbiAgICByZXR1cm4gdGhpcy5sb2NhdGlvbldpdGhBY3Rpb25Jc1NhbWVQYWdlKGxvY2F0aW9uLCBhY3Rpb24pIHx8IHRoaXMuYXBwbGljYXRpb25BbGxvd3NWaXNpdGluZ0xvY2F0aW9uKGxvY2F0aW9uKVxuICB9XG5cbiAgdmlzaXRQcm9wb3NlZFRvTG9jYXRpb24obG9jYXRpb24sIG9wdGlvbnMpIHtcbiAgICBleHRlbmRVUkxXaXRoRGVwcmVjYXRlZFByb3BlcnRpZXMobG9jYXRpb24pO1xuICAgIHRoaXMuYWRhcHRlci52aXNpdFByb3Bvc2VkVG9Mb2NhdGlvbihsb2NhdGlvbiwgb3B0aW9ucyk7XG4gIH1cblxuICAvLyBWaXNpdCBkZWxlZ2F0ZVxuXG4gIHZpc2l0U3RhcnRlZCh2aXNpdCkge1xuICAgIGlmICghdmlzaXQuYWNjZXB0c1N0cmVhbVJlc3BvbnNlKSB7XG4gICAgICBtYXJrQXNCdXN5KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7XG4gICAgICB0aGlzLnZpZXcubWFya1Zpc2l0RGlyZWN0aW9uKHZpc2l0LmRpcmVjdGlvbik7XG4gICAgfVxuICAgIGV4dGVuZFVSTFdpdGhEZXByZWNhdGVkUHJvcGVydGllcyh2aXNpdC5sb2NhdGlvbik7XG4gICAgaWYgKCF2aXNpdC5zaWxlbnQpIHtcbiAgICAgIHRoaXMubm90aWZ5QXBwbGljYXRpb25BZnRlclZpc2l0aW5nTG9jYXRpb24odmlzaXQubG9jYXRpb24sIHZpc2l0LmFjdGlvbik7XG4gICAgfVxuICB9XG5cbiAgdmlzaXRDb21wbGV0ZWQodmlzaXQpIHtcbiAgICB0aGlzLnZpZXcudW5tYXJrVmlzaXREaXJlY3Rpb24oKTtcbiAgICBjbGVhckJ1c3lTdGF0ZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpO1xuICAgIHRoaXMubm90aWZ5QXBwbGljYXRpb25BZnRlclBhZ2VMb2FkKHZpc2l0LmdldFRpbWluZ01ldHJpY3MoKSk7XG4gIH1cblxuICBsb2NhdGlvbldpdGhBY3Rpb25Jc1NhbWVQYWdlKGxvY2F0aW9uLCBhY3Rpb24pIHtcbiAgICByZXR1cm4gdGhpcy5uYXZpZ2F0b3IubG9jYXRpb25XaXRoQWN0aW9uSXNTYW1lUGFnZShsb2NhdGlvbiwgYWN0aW9uKVxuICB9XG5cbiAgdmlzaXRTY3JvbGxlZFRvU2FtZVBhZ2VMb2NhdGlvbihvbGRVUkwsIG5ld1VSTCkge1xuICAgIHRoaXMubm90aWZ5QXBwbGljYXRpb25BZnRlclZpc2l0aW5nU2FtZVBhZ2VMb2NhdGlvbihvbGRVUkwsIG5ld1VSTCk7XG4gIH1cblxuICAvLyBGb3JtIHN1Ym1pdCBvYnNlcnZlciBkZWxlZ2F0ZVxuXG4gIHdpbGxTdWJtaXRGb3JtKGZvcm0sIHN1Ym1pdHRlcikge1xuICAgIGNvbnN0IGFjdGlvbiA9IGdldEFjdGlvbiQxKGZvcm0sIHN1Ym1pdHRlcik7XG5cbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5zdWJtaXNzaW9uSXNOYXZpZ2F0YWJsZShmb3JtLCBzdWJtaXR0ZXIpICYmXG4gICAgICBsb2NhdGlvbklzVmlzaXRhYmxlKGV4cGFuZFVSTChhY3Rpb24pLCB0aGlzLnNuYXBzaG90LnJvb3RMb2NhdGlvbilcbiAgICApXG4gIH1cblxuICBmb3JtU3VibWl0dGVkKGZvcm0sIHN1Ym1pdHRlcikge1xuICAgIHRoaXMubmF2aWdhdG9yLnN1Ym1pdEZvcm0oZm9ybSwgc3VibWl0dGVyKTtcbiAgfVxuXG4gIC8vIFBhZ2Ugb2JzZXJ2ZXIgZGVsZWdhdGVcblxuICBwYWdlQmVjYW1lSW50ZXJhY3RpdmUoKSB7XG4gICAgdGhpcy52aWV3Lmxhc3RSZW5kZXJlZExvY2F0aW9uID0gdGhpcy5sb2NhdGlvbjtcbiAgICB0aGlzLm5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJQYWdlTG9hZCgpO1xuICB9XG5cbiAgcGFnZUxvYWRlZCgpIHtcbiAgICB0aGlzLmhpc3RvcnkuYXNzdW1lQ29udHJvbE9mU2Nyb2xsUmVzdG9yYXRpb24oKTtcbiAgfVxuXG4gIHBhZ2VXaWxsVW5sb2FkKCkge1xuICAgIHRoaXMuaGlzdG9yeS5yZWxpbnF1aXNoQ29udHJvbE9mU2Nyb2xsUmVzdG9yYXRpb24oKTtcbiAgfVxuXG4gIC8vIFN0cmVhbSBvYnNlcnZlciBkZWxlZ2F0ZVxuXG4gIHJlY2VpdmVkTWVzc2FnZUZyb21TdHJlYW0obWVzc2FnZSkge1xuICAgIHRoaXMucmVuZGVyU3RyZWFtTWVzc2FnZShtZXNzYWdlKTtcbiAgfVxuXG4gIC8vIFBhZ2UgdmlldyBkZWxlZ2F0ZVxuXG4gIHZpZXdXaWxsQ2FjaGVTbmFwc2hvdCgpIHtcbiAgICBpZiAoIXRoaXMubmF2aWdhdG9yLmN1cnJlbnRWaXNpdD8uc2lsZW50KSB7XG4gICAgICB0aGlzLm5vdGlmeUFwcGxpY2F0aW9uQmVmb3JlQ2FjaGluZ1NuYXBzaG90KCk7XG4gICAgfVxuICB9XG5cbiAgYWxsb3dzSW1tZWRpYXRlUmVuZGVyKHsgZWxlbWVudCB9LCBvcHRpb25zKSB7XG4gICAgY29uc3QgZXZlbnQgPSB0aGlzLm5vdGlmeUFwcGxpY2F0aW9uQmVmb3JlUmVuZGVyKGVsZW1lbnQsIG9wdGlvbnMpO1xuICAgIGNvbnN0IHtcbiAgICAgIGRlZmF1bHRQcmV2ZW50ZWQsXG4gICAgICBkZXRhaWw6IHsgcmVuZGVyIH1cbiAgICB9ID0gZXZlbnQ7XG5cbiAgICBpZiAodGhpcy52aWV3LnJlbmRlcmVyICYmIHJlbmRlcikge1xuICAgICAgdGhpcy52aWV3LnJlbmRlcmVyLnJlbmRlckVsZW1lbnQgPSByZW5kZXI7XG4gICAgfVxuXG4gICAgcmV0dXJuICFkZWZhdWx0UHJldmVudGVkXG4gIH1cblxuICB2aWV3UmVuZGVyZWRTbmFwc2hvdChfc25hcHNob3QsIF9pc1ByZXZpZXcsIHJlbmRlck1ldGhvZCkge1xuICAgIHRoaXMudmlldy5sYXN0UmVuZGVyZWRMb2NhdGlvbiA9IHRoaXMuaGlzdG9yeS5sb2NhdGlvbjtcbiAgICB0aGlzLm5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJSZW5kZXIocmVuZGVyTWV0aG9kKTtcbiAgfVxuXG4gIHByZWxvYWRPbkxvYWRMaW5rc0ZvclZpZXcoZWxlbWVudCkge1xuICAgIHRoaXMucHJlbG9hZGVyLnByZWxvYWRPbkxvYWRMaW5rc0ZvclZpZXcoZWxlbWVudCk7XG4gIH1cblxuICB2aWV3SW52YWxpZGF0ZWQocmVhc29uKSB7XG4gICAgdGhpcy5hZGFwdGVyLnBhZ2VJbnZhbGlkYXRlZChyZWFzb24pO1xuICB9XG5cbiAgLy8gRnJhbWUgZWxlbWVudFxuXG4gIGZyYW1lTG9hZGVkKGZyYW1lKSB7XG4gICAgdGhpcy5ub3RpZnlBcHBsaWNhdGlvbkFmdGVyRnJhbWVMb2FkKGZyYW1lKTtcbiAgfVxuXG4gIGZyYW1lUmVuZGVyZWQoZmV0Y2hSZXNwb25zZSwgZnJhbWUpIHtcbiAgICB0aGlzLm5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJGcmFtZVJlbmRlcihmZXRjaFJlc3BvbnNlLCBmcmFtZSk7XG4gIH1cblxuICAvLyBBcHBsaWNhdGlvbiBldmVudHNcblxuICBhcHBsaWNhdGlvbkFsbG93c0ZvbGxvd2luZ0xpbmtUb0xvY2F0aW9uKGxpbmssIGxvY2F0aW9uLCBldikge1xuICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5ub3RpZnlBcHBsaWNhdGlvbkFmdGVyQ2xpY2tpbmdMaW5rVG9Mb2NhdGlvbihsaW5rLCBsb2NhdGlvbiwgZXYpO1xuICAgIHJldHVybiAhZXZlbnQuZGVmYXVsdFByZXZlbnRlZFxuICB9XG5cbiAgYXBwbGljYXRpb25BbGxvd3NWaXNpdGluZ0xvY2F0aW9uKGxvY2F0aW9uKSB7XG4gICAgY29uc3QgZXZlbnQgPSB0aGlzLm5vdGlmeUFwcGxpY2F0aW9uQmVmb3JlVmlzaXRpbmdMb2NhdGlvbihsb2NhdGlvbik7XG4gICAgcmV0dXJuICFldmVudC5kZWZhdWx0UHJldmVudGVkXG4gIH1cblxuICBub3RpZnlBcHBsaWNhdGlvbkFmdGVyQ2xpY2tpbmdMaW5rVG9Mb2NhdGlvbihsaW5rLCBsb2NhdGlvbiwgZXZlbnQpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2goXCJ0dXJibzpjbGlja1wiLCB7XG4gICAgICB0YXJnZXQ6IGxpbmssXG4gICAgICBkZXRhaWw6IHsgdXJsOiBsb2NhdGlvbi5ocmVmLCBvcmlnaW5hbEV2ZW50OiBldmVudCB9LFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgIH0pXG4gIH1cblxuICBub3RpZnlBcHBsaWNhdGlvbkJlZm9yZVZpc2l0aW5nTG9jYXRpb24obG9jYXRpb24pIHtcbiAgICByZXR1cm4gZGlzcGF0Y2goXCJ0dXJibzpiZWZvcmUtdmlzaXRcIiwge1xuICAgICAgZGV0YWlsOiB7IHVybDogbG9jYXRpb24uaHJlZiB9LFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgIH0pXG4gIH1cblxuICBub3RpZnlBcHBsaWNhdGlvbkFmdGVyVmlzaXRpbmdMb2NhdGlvbihsb2NhdGlvbiwgYWN0aW9uKSB7XG4gICAgcmV0dXJuIGRpc3BhdGNoKFwidHVyYm86dmlzaXRcIiwgeyBkZXRhaWw6IHsgdXJsOiBsb2NhdGlvbi5ocmVmLCBhY3Rpb24gfSB9KVxuICB9XG5cbiAgbm90aWZ5QXBwbGljYXRpb25CZWZvcmVDYWNoaW5nU25hcHNob3QoKSB7XG4gICAgcmV0dXJuIGRpc3BhdGNoKFwidHVyYm86YmVmb3JlLWNhY2hlXCIpXG4gIH1cblxuICBub3RpZnlBcHBsaWNhdGlvbkJlZm9yZVJlbmRlcihuZXdCb2R5LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGRpc3BhdGNoKFwidHVyYm86YmVmb3JlLXJlbmRlclwiLCB7XG4gICAgICBkZXRhaWw6IHsgbmV3Qm9keSwgLi4ub3B0aW9ucyB9LFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgIH0pXG4gIH1cblxuICBub3RpZnlBcHBsaWNhdGlvbkFmdGVyUmVuZGVyKHJlbmRlck1ldGhvZCkge1xuICAgIHJldHVybiBkaXNwYXRjaChcInR1cmJvOnJlbmRlclwiLCB7IGRldGFpbDogeyByZW5kZXJNZXRob2QgfSB9KVxuICB9XG5cbiAgbm90aWZ5QXBwbGljYXRpb25BZnRlclBhZ2VMb2FkKHRpbWluZyA9IHt9KSB7XG4gICAgcmV0dXJuIGRpc3BhdGNoKFwidHVyYm86bG9hZFwiLCB7XG4gICAgICBkZXRhaWw6IHsgdXJsOiB0aGlzLmxvY2F0aW9uLmhyZWYsIHRpbWluZyB9XG4gICAgfSlcbiAgfVxuXG4gIG5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJWaXNpdGluZ1NhbWVQYWdlTG9jYXRpb24ob2xkVVJMLCBuZXdVUkwpIHtcbiAgICBkaXNwYXRjaEV2ZW50KFxuICAgICAgbmV3IEhhc2hDaGFuZ2VFdmVudChcImhhc2hjaGFuZ2VcIiwge1xuICAgICAgICBvbGRVUkw6IG9sZFVSTC50b1N0cmluZygpLFxuICAgICAgICBuZXdVUkw6IG5ld1VSTC50b1N0cmluZygpXG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBub3RpZnlBcHBsaWNhdGlvbkFmdGVyRnJhbWVMb2FkKGZyYW1lKSB7XG4gICAgcmV0dXJuIGRpc3BhdGNoKFwidHVyYm86ZnJhbWUtbG9hZFwiLCB7IHRhcmdldDogZnJhbWUgfSlcbiAgfVxuXG4gIG5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJGcmFtZVJlbmRlcihmZXRjaFJlc3BvbnNlLCBmcmFtZSkge1xuICAgIHJldHVybiBkaXNwYXRjaChcInR1cmJvOmZyYW1lLXJlbmRlclwiLCB7XG4gICAgICBkZXRhaWw6IHsgZmV0Y2hSZXNwb25zZSB9LFxuICAgICAgdGFyZ2V0OiBmcmFtZSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICB9KVxuICB9XG5cbiAgLy8gSGVscGVyc1xuXG4gIHN1Ym1pc3Npb25Jc05hdmlnYXRhYmxlKGZvcm0sIHN1Ym1pdHRlcikge1xuICAgIGlmIChjb25maWcuZm9ybXMubW9kZSA9PSBcIm9mZlwiKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc3VibWl0dGVySXNOYXZpZ2F0YWJsZSA9IHN1Ym1pdHRlciA/IHRoaXMuZWxlbWVudElzTmF2aWdhdGFibGUoc3VibWl0dGVyKSA6IHRydWU7XG5cbiAgICAgIGlmIChjb25maWcuZm9ybXMubW9kZSA9PSBcIm9wdGluXCIpIHtcbiAgICAgICAgcmV0dXJuIHN1Ym1pdHRlcklzTmF2aWdhdGFibGUgJiYgZm9ybS5jbG9zZXN0KCdbZGF0YS10dXJibz1cInRydWVcIl0nKSAhPSBudWxsXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc3VibWl0dGVySXNOYXZpZ2F0YWJsZSAmJiB0aGlzLmVsZW1lbnRJc05hdmlnYXRhYmxlKGZvcm0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZWxlbWVudElzTmF2aWdhdGFibGUoZWxlbWVudCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGZpbmRDbG9zZXN0UmVjdXJzaXZlbHkoZWxlbWVudCwgXCJbZGF0YS10dXJib11cIik7XG4gICAgY29uc3Qgd2l0aGluRnJhbWUgPSBmaW5kQ2xvc2VzdFJlY3Vyc2l2ZWx5KGVsZW1lbnQsIFwidHVyYm8tZnJhbWVcIik7XG5cbiAgICAvLyBDaGVjayBpZiBEcml2ZSBpcyBlbmFibGVkIG9uIHRoZSBzZXNzaW9uIG9yIHdlJ3JlIHdpdGhpbiBhIEZyYW1lLlxuICAgIGlmIChjb25maWcuZHJpdmUuZW5hYmxlZCB8fCB3aXRoaW5GcmFtZSkge1xuICAgICAgLy8gRWxlbWVudCBpcyBuYXZpZ2F0YWJsZSBieSBkZWZhdWx0LCB1bmxlc3MgYGRhdGEtdHVyYm89XCJmYWxzZVwiYC5cbiAgICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvXCIpICE9IFwiZmFsc2VcIlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRWxlbWVudCBpc24ndCBuYXZpZ2F0YWJsZSBieSBkZWZhdWx0LCB1bmxlc3MgYGRhdGEtdHVyYm89XCJ0cnVlXCJgLlxuICAgICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICByZXR1cm4gY29udGFpbmVyLmdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm9cIikgPT0gXCJ0cnVlXCJcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFByaXZhdGVcblxuICBnZXRBY3Rpb25Gb3JMaW5rKGxpbmspIHtcbiAgICByZXR1cm4gZ2V0VmlzaXRBY3Rpb24obGluaykgfHwgXCJhZHZhbmNlXCJcbiAgfVxuXG4gIGdldCBzbmFwc2hvdCgpIHtcbiAgICByZXR1cm4gdGhpcy52aWV3LnNuYXBzaG90XG4gIH1cbn1cblxuLy8gT2xkZXIgdmVyc2lvbnMgb2YgdGhlIFR1cmJvIE5hdGl2ZSBhZGFwdGVycyByZWZlcmVuY2VkIHRoZVxuLy8gYExvY2F0aW9uI2Fic29sdXRlVVJMYCBwcm9wZXJ0eSBpbiB0aGVpciBpbXBsZW1lbnRhdGlvbnMgb2Zcbi8vIHRoZSBgQWRhcHRlciN2aXNpdFByb3Bvc2VkVG9Mb2NhdGlvbigpYCBhbmQgYCN2aXNpdFN0YXJ0ZWQoKWBcbi8vIG1ldGhvZHMuIFRoZSBMb2NhdGlvbiBjbGFzcyBoYXMgc2luY2UgYmVlbiByZW1vdmVkIGluIGZhdm9yXG4vLyBvZiB0aGUgRE9NIFVSTCBBUEksIGFuZCBhY2NvcmRpbmdseSBhbGwgQWRhcHRlciBtZXRob2RzIG5vd1xuLy8gcmVjZWl2ZSBVUkwgb2JqZWN0cy5cbi8vXG4vLyBXZSBhbGlhcyAjYWJzb2x1dGVVUkwgdG8gI3RvU3RyaW5nKCkgaGVyZSB0byBhdm9pZCBjcmFzaGluZ1xuLy8gb2xkZXIgYWRhcHRlcnMgd2hpY2ggZG8gbm90IGV4cGVjdCBVUkwgb2JqZWN0cy4gV2Ugc2hvdWxkXG4vLyBjb25zaWRlciByZW1vdmluZyB0aGlzIHN1cHBvcnQgYXQgc29tZSBwb2ludCBpbiB0aGUgZnV0dXJlLlxuXG5mdW5jdGlvbiBleHRlbmRVUkxXaXRoRGVwcmVjYXRlZFByb3BlcnRpZXModXJsKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHVybCwgZGVwcmVjYXRlZExvY2F0aW9uUHJvcGVydHlEZXNjcmlwdG9ycyk7XG59XG5cbmNvbnN0IGRlcHJlY2F0ZWRMb2NhdGlvblByb3BlcnR5RGVzY3JpcHRvcnMgPSB7XG4gIGFic29sdXRlVVJMOiB7XG4gICAgZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMudG9TdHJpbmcoKVxuICAgIH1cbiAgfVxufTtcblxuY29uc3Qgc2Vzc2lvbiA9IG5ldyBTZXNzaW9uKHJlY2VudFJlcXVlc3RzKTtcbmNvbnN0IHsgY2FjaGUsIG5hdmlnYXRvcjogbmF2aWdhdG9yJDEgfSA9IHNlc3Npb247XG5cbi8qKlxuICogU3RhcnRzIHRoZSBtYWluIHNlc3Npb24uXG4gKiBUaGlzIGluaXRpYWxpc2VzIGFueSBuZWNlc3Nhcnkgb2JzZXJ2ZXJzIHN1Y2ggYXMgdGhvc2UgdG8gbW9uaXRvclxuICogbGluayBpbnRlcmFjdGlvbnMuXG4gKi9cbmZ1bmN0aW9uIHN0YXJ0KCkge1xuICBzZXNzaW9uLnN0YXJ0KCk7XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGFuIGFkYXB0ZXIgZm9yIHRoZSBtYWluIHNlc3Npb24uXG4gKlxuICogQHBhcmFtIGFkYXB0ZXIgQWRhcHRlciB0byByZWdpc3RlclxuICovXG5mdW5jdGlvbiByZWdpc3RlckFkYXB0ZXIoYWRhcHRlcikge1xuICBzZXNzaW9uLnJlZ2lzdGVyQWRhcHRlcihhZGFwdGVyKTtcbn1cblxuLyoqXG4gKiBQZXJmb3JtcyBhbiBhcHBsaWNhdGlvbiB2aXNpdCB0byB0aGUgZ2l2ZW4gbG9jYXRpb24uXG4gKlxuICogQHBhcmFtIGxvY2F0aW9uIExvY2F0aW9uIHRvIHZpc2l0IChhIFVSTCBvciBwYXRoKVxuICogQHBhcmFtIG9wdGlvbnMgT3B0aW9ucyB0byBhcHBseVxuICogQHBhcmFtIG9wdGlvbnMuYWN0aW9uIFR5cGUgb2YgaGlzdG9yeSBuYXZpZ2F0aW9uIHRvIGFwcGx5IChcInJlc3RvcmVcIixcbiAqIFwicmVwbGFjZVwiIG9yIFwiYWR2YW5jZVwiKVxuICogQHBhcmFtIG9wdGlvbnMuaGlzdG9yeUNoYW5nZWQgU3BlY2lmaWVzIHdoZXRoZXIgdGhlIGJyb3dzZXIgaGlzdG9yeSBoYXNcbiAqIGFscmVhZHkgYmVlbiBjaGFuZ2VkIGZvciB0aGlzIHZpc2l0IG9yIG5vdFxuICogQHBhcmFtIG9wdGlvbnMucmVmZXJyZXIgU3BlY2lmaWVzIHRoZSByZWZlcnJlciBvZiB0aGlzIHZpc2l0IHN1Y2ggdGhhdFxuICogbmF2aWdhdGlvbnMgdG8gdGhlIHNhbWUgcGFnZSB3aWxsIG5vdCByZXN1bHQgaW4gYSBuZXcgaGlzdG9yeSBlbnRyeS5cbiAqIEBwYXJhbSBvcHRpb25zLnNuYXBzaG90SFRNTCBDYWNoZWQgc25hcHNob3QgdG8gcmVuZGVyXG4gKiBAcGFyYW0gb3B0aW9ucy5yZXNwb25zZSBSZXNwb25zZSBvZiB0aGUgc3BlY2lmaWVkIGxvY2F0aW9uXG4gKi9cbmZ1bmN0aW9uIHZpc2l0KGxvY2F0aW9uLCBvcHRpb25zKSB7XG4gIHNlc3Npb24udmlzaXQobG9jYXRpb24sIG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIENvbm5lY3RzIGEgc3RyZWFtIHNvdXJjZSB0byB0aGUgbWFpbiBzZXNzaW9uLlxuICpcbiAqIEBwYXJhbSBzb3VyY2UgU3RyZWFtIHNvdXJjZSB0byBjb25uZWN0XG4gKi9cbmZ1bmN0aW9uIGNvbm5lY3RTdHJlYW1Tb3VyY2Uoc291cmNlKSB7XG4gIHNlc3Npb24uY29ubmVjdFN0cmVhbVNvdXJjZShzb3VyY2UpO1xufVxuXG4vKipcbiAqIERpc2Nvbm5lY3RzIGEgc3RyZWFtIHNvdXJjZSBmcm9tIHRoZSBtYWluIHNlc3Npb24uXG4gKlxuICogQHBhcmFtIHNvdXJjZSBTdHJlYW0gc291cmNlIHRvIGRpc2Nvbm5lY3RcbiAqL1xuZnVuY3Rpb24gZGlzY29ubmVjdFN0cmVhbVNvdXJjZShzb3VyY2UpIHtcbiAgc2Vzc2lvbi5kaXNjb25uZWN0U3RyZWFtU291cmNlKHNvdXJjZSk7XG59XG5cbi8qKlxuICogUmVuZGVycyBhIHN0cmVhbSBtZXNzYWdlIHRvIHRoZSBtYWluIHNlc3Npb24gYnkgYXBwZW5kaW5nIGl0IHRvIHRoZVxuICogY3VycmVudCBkb2N1bWVudC5cbiAqXG4gKiBAcGFyYW0gbWVzc2FnZSBNZXNzYWdlIHRvIHJlbmRlclxuICovXG5mdW5jdGlvbiByZW5kZXJTdHJlYW1NZXNzYWdlKG1lc3NhZ2UpIHtcbiAgc2Vzc2lvbi5yZW5kZXJTdHJlYW1NZXNzYWdlKG1lc3NhZ2UpO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgYWxsIGVudHJpZXMgZnJvbSB0aGUgVHVyYm8gRHJpdmUgcGFnZSBjYWNoZS5cbiAqIENhbGwgdGhpcyB3aGVuIHN0YXRlIGhhcyBjaGFuZ2VkIG9uIHRoZSBzZXJ2ZXIgdGhhdCBtYXkgYWZmZWN0IGNhY2hlZCBwYWdlcy5cbiAqXG4gKiBAZGVwcmVjYXRlZCBzaW5jZSB2ZXJzaW9uIDcuMi4wIGluIGZhdm9yIG9mIGBUdXJiby5jYWNoZS5jbGVhcigpYFxuICovXG5mdW5jdGlvbiBjbGVhckNhY2hlKCkge1xuICBjb25zb2xlLndhcm4oXG4gICAgXCJQbGVhc2UgcmVwbGFjZSBgVHVyYm8uY2xlYXJDYWNoZSgpYCB3aXRoIGBUdXJiby5jYWNoZS5jbGVhcigpYC4gVGhlIHRvcC1sZXZlbCBmdW5jdGlvbiBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbiBvZiBUdXJiby5gXCJcbiAgKTtcbiAgc2Vzc2lvbi5jbGVhckNhY2hlKCk7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgZGVsYXkgYWZ0ZXIgd2hpY2ggdGhlIHByb2dyZXNzIGJhciB3aWxsIGFwcGVhciBkdXJpbmcgbmF2aWdhdGlvbi5cbiAqXG4gKiBUaGUgcHJvZ3Jlc3MgYmFyIGFwcGVhcnMgYWZ0ZXIgNTAwbXMgYnkgZGVmYXVsdC5cbiAqXG4gKiBOb3RlIHRoYXQgdGhpcyBtZXRob2QgaGFzIG5vIGVmZmVjdCB3aGVuIHVzZWQgd2l0aCB0aGUgaU9TIG9yIEFuZHJvaWRcbiAqIGFkYXB0ZXJzLlxuICpcbiAqIEBwYXJhbSBkZWxheSBUaW1lIHRvIGRlbGF5IGluIG1pbGxpc2Vjb25kc1xuICovXG5mdW5jdGlvbiBzZXRQcm9ncmVzc0JhckRlbGF5KGRlbGF5KSB7XG4gIGNvbnNvbGUud2FybihcbiAgICBcIlBsZWFzZSByZXBsYWNlIGBUdXJiby5zZXRQcm9ncmVzc0JhckRlbGF5KGRlbGF5KWAgd2l0aCBgVHVyYm8uY29uZmlnLmRyaXZlLnByb2dyZXNzQmFyRGVsYXkgPSBkZWxheWAuIFRoZSB0b3AtbGV2ZWwgZnVuY3Rpb24gaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHZlcnNpb24gb2YgVHVyYm8uYFwiXG4gICk7XG4gIGNvbmZpZy5kcml2ZS5wcm9ncmVzc0JhckRlbGF5ID0gZGVsYXk7XG59XG5cbmZ1bmN0aW9uIHNldENvbmZpcm1NZXRob2QoY29uZmlybU1ldGhvZCkge1xuICBjb25zb2xlLndhcm4oXG4gICAgXCJQbGVhc2UgcmVwbGFjZSBgVHVyYm8uc2V0Q29uZmlybU1ldGhvZChjb25maXJtTWV0aG9kKWAgd2l0aCBgVHVyYm8uY29uZmlnLmZvcm1zLmNvbmZpcm0gPSBjb25maXJtTWV0aG9kYC4gVGhlIHRvcC1sZXZlbCBmdW5jdGlvbiBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbiBvZiBUdXJiby5gXCJcbiAgKTtcbiAgY29uZmlnLmZvcm1zLmNvbmZpcm0gPSBjb25maXJtTWV0aG9kO1xufVxuXG5mdW5jdGlvbiBzZXRGb3JtTW9kZShtb2RlKSB7XG4gIGNvbnNvbGUud2FybihcbiAgICBcIlBsZWFzZSByZXBsYWNlIGBUdXJiby5zZXRGb3JtTW9kZShtb2RlKWAgd2l0aCBgVHVyYm8uY29uZmlnLmZvcm1zLm1vZGUgPSBtb2RlYC4gVGhlIHRvcC1sZXZlbCBmdW5jdGlvbiBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbiBvZiBUdXJiby5gXCJcbiAgKTtcbiAgY29uZmlnLmZvcm1zLm1vZGUgPSBtb2RlO1xufVxuXG4vKipcbiAqIE1vcnBoIHRoZSBzdGF0ZSBvZiB0aGUgY3VycmVudEJvZHkgYmFzZWQgb24gdGhlIGF0dHJpYnV0ZXMgYW5kIGNvbnRlbnRzIG9mXG4gKiB0aGUgbmV3Qm9keS4gTW9ycGhpbmcgYm9keSBlbGVtZW50cyBtYXkgZGlzcGF0Y2ggdHVyYm86bW9ycGgsXG4gKiB0dXJibzpiZWZvcmUtbW9ycGgtZWxlbWVudCwgdHVyYm86YmVmb3JlLW1vcnBoLWF0dHJpYnV0ZSwgYW5kXG4gKiB0dXJibzptb3JwaC1lbGVtZW50IGV2ZW50cy5cbiAqXG4gKiBAcGFyYW0gY3VycmVudEJvZHkgSFRNTEJvZHlFbGVtZW50IGRlc3RpbmF0aW9uIG9mIG1vcnBoaW5nIGNoYW5nZXNcbiAqIEBwYXJhbSBuZXdCb2R5IEhUTUxCb2R5RWxlbWVudCBzb3VyY2Ugb2YgbW9ycGhpbmcgY2hhbmdlc1xuICovXG5mdW5jdGlvbiBtb3JwaEJvZHlFbGVtZW50cyhjdXJyZW50Qm9keSwgbmV3Qm9keSkge1xuICBNb3JwaGluZ1BhZ2VSZW5kZXJlci5yZW5kZXJFbGVtZW50KGN1cnJlbnRCb2R5LCBuZXdCb2R5KTtcbn1cblxuLyoqXG4gKiBNb3JwaCB0aGUgY2hpbGQgZWxlbWVudHMgb2YgdGhlIGN1cnJlbnRGcmFtZSBiYXNlZCBvbiB0aGUgY2hpbGQgZWxlbWVudHMgb2ZcbiAqIHRoZSBuZXdGcmFtZS4gTW9ycGhpbmcgdHVyYm8tZnJhbWUgZWxlbWVudHMgbWF5IGRpc3BhdGNoIHR1cmJvOmJlZm9yZS1mcmFtZS1tb3JwaCxcbiAqIHR1cmJvOmJlZm9yZS1tb3JwaC1lbGVtZW50LCB0dXJibzpiZWZvcmUtbW9ycGgtYXR0cmlidXRlLCBhbmRcbiAqIHR1cmJvOm1vcnBoLWVsZW1lbnQgZXZlbnRzLlxuICpcbiAqIEBwYXJhbSBjdXJyZW50RnJhbWUgRnJhbWVFbGVtZW50IGRlc3RpbmF0aW9uIG9mIG1vcnBoaW5nIGNoaWxkcmVuIGNoYW5nZXNcbiAqIEBwYXJhbSBuZXdGcmFtZSBGcmFtZUVsZW1lbnQgc291cmNlIG9mIG1vcnBoaW5nIGNoaWxkcmVuIGNoYW5nZXNcbiAqL1xuZnVuY3Rpb24gbW9ycGhUdXJib0ZyYW1lRWxlbWVudHMoY3VycmVudEZyYW1lLCBuZXdGcmFtZSkge1xuICBNb3JwaGluZ0ZyYW1lUmVuZGVyZXIucmVuZGVyRWxlbWVudChjdXJyZW50RnJhbWUsIG5ld0ZyYW1lKTtcbn1cblxudmFyIFR1cmJvID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIG5hdmlnYXRvcjogbmF2aWdhdG9yJDEsXG4gIHNlc3Npb246IHNlc3Npb24sXG4gIGNhY2hlOiBjYWNoZSxcbiAgUGFnZVJlbmRlcmVyOiBQYWdlUmVuZGVyZXIsXG4gIFBhZ2VTbmFwc2hvdDogUGFnZVNuYXBzaG90LFxuICBGcmFtZVJlbmRlcmVyOiBGcmFtZVJlbmRlcmVyLFxuICBmZXRjaDogZmV0Y2hXaXRoVHVyYm9IZWFkZXJzLFxuICBjb25maWc6IGNvbmZpZyxcbiAgc3RhcnQ6IHN0YXJ0LFxuICByZWdpc3RlckFkYXB0ZXI6IHJlZ2lzdGVyQWRhcHRlcixcbiAgdmlzaXQ6IHZpc2l0LFxuICBjb25uZWN0U3RyZWFtU291cmNlOiBjb25uZWN0U3RyZWFtU291cmNlLFxuICBkaXNjb25uZWN0U3RyZWFtU291cmNlOiBkaXNjb25uZWN0U3RyZWFtU291cmNlLFxuICByZW5kZXJTdHJlYW1NZXNzYWdlOiByZW5kZXJTdHJlYW1NZXNzYWdlLFxuICBjbGVhckNhY2hlOiBjbGVhckNhY2hlLFxuICBzZXRQcm9ncmVzc0JhckRlbGF5OiBzZXRQcm9ncmVzc0JhckRlbGF5LFxuICBzZXRDb25maXJtTWV0aG9kOiBzZXRDb25maXJtTWV0aG9kLFxuICBzZXRGb3JtTW9kZTogc2V0Rm9ybU1vZGUsXG4gIG1vcnBoQm9keUVsZW1lbnRzOiBtb3JwaEJvZHlFbGVtZW50cyxcbiAgbW9ycGhUdXJib0ZyYW1lRWxlbWVudHM6IG1vcnBoVHVyYm9GcmFtZUVsZW1lbnRzLFxuICBtb3JwaENoaWxkcmVuOiBtb3JwaENoaWxkcmVuLFxuICBtb3JwaEVsZW1lbnRzOiBtb3JwaEVsZW1lbnRzXG59KTtcblxuY2xhc3MgVHVyYm9GcmFtZU1pc3NpbmdFcnJvciBleHRlbmRzIEVycm9yIHt9XG5cbmNsYXNzIEZyYW1lQ29udHJvbGxlciB7XG4gIGZldGNoUmVzcG9uc2VMb2FkZWQgPSAoX2ZldGNoUmVzcG9uc2UpID0+IFByb21pc2UucmVzb2x2ZSgpXG4gICNjdXJyZW50RmV0Y2hSZXF1ZXN0ID0gbnVsbFxuICAjcmVzb2x2ZVZpc2l0UHJvbWlzZSA9ICgpID0+IHt9XG4gICNjb25uZWN0ZWQgPSBmYWxzZVxuICAjaGFzQmVlbkxvYWRlZCA9IGZhbHNlXG4gICNpZ25vcmVkQXR0cmlidXRlcyA9IG5ldyBTZXQoKVxuICAjc2hvdWxkTW9ycGhGcmFtZSA9IGZhbHNlXG4gIGFjdGlvbiA9IG51bGxcblxuICBjb25zdHJ1Y3RvcihlbGVtZW50KSB7XG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICB0aGlzLnZpZXcgPSBuZXcgRnJhbWVWaWV3KHRoaXMsIHRoaXMuZWxlbWVudCk7XG4gICAgdGhpcy5hcHBlYXJhbmNlT2JzZXJ2ZXIgPSBuZXcgQXBwZWFyYW5jZU9ic2VydmVyKHRoaXMsIHRoaXMuZWxlbWVudCk7XG4gICAgdGhpcy5mb3JtTGlua0NsaWNrT2JzZXJ2ZXIgPSBuZXcgRm9ybUxpbmtDbGlja09ic2VydmVyKHRoaXMsIHRoaXMuZWxlbWVudCk7XG4gICAgdGhpcy5saW5rSW50ZXJjZXB0b3IgPSBuZXcgTGlua0ludGVyY2VwdG9yKHRoaXMsIHRoaXMuZWxlbWVudCk7XG4gICAgdGhpcy5yZXN0b3JhdGlvbklkZW50aWZpZXIgPSB1dWlkKCk7XG4gICAgdGhpcy5mb3JtU3VibWl0T2JzZXJ2ZXIgPSBuZXcgRm9ybVN1Ym1pdE9ic2VydmVyKHRoaXMsIHRoaXMuZWxlbWVudCk7XG4gIH1cblxuICAvLyBGcmFtZSBkZWxlZ2F0ZVxuXG4gIGNvbm5lY3QoKSB7XG4gICAgaWYgKCF0aGlzLiNjb25uZWN0ZWQpIHtcbiAgICAgIHRoaXMuI2Nvbm5lY3RlZCA9IHRydWU7XG4gICAgICBpZiAodGhpcy5sb2FkaW5nU3R5bGUgPT0gRnJhbWVMb2FkaW5nU3R5bGUubGF6eSkge1xuICAgICAgICB0aGlzLmFwcGVhcmFuY2VPYnNlcnZlci5zdGFydCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy4jbG9hZFNvdXJjZVVSTCgpO1xuICAgICAgfVxuICAgICAgdGhpcy5mb3JtTGlua0NsaWNrT2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICAgIHRoaXMubGlua0ludGVyY2VwdG9yLnN0YXJ0KCk7XG4gICAgICB0aGlzLmZvcm1TdWJtaXRPYnNlcnZlci5zdGFydCgpO1xuICAgIH1cbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKSB7XG4gICAgaWYgKHRoaXMuI2Nvbm5lY3RlZCkge1xuICAgICAgdGhpcy4jY29ubmVjdGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmFwcGVhcmFuY2VPYnNlcnZlci5zdG9wKCk7XG4gICAgICB0aGlzLmZvcm1MaW5rQ2xpY2tPYnNlcnZlci5zdG9wKCk7XG4gICAgICB0aGlzLmxpbmtJbnRlcmNlcHRvci5zdG9wKCk7XG4gICAgICB0aGlzLmZvcm1TdWJtaXRPYnNlcnZlci5zdG9wKCk7XG4gICAgfVxuICB9XG5cbiAgZGlzYWJsZWRDaGFuZ2VkKCkge1xuICAgIGlmICh0aGlzLmxvYWRpbmdTdHlsZSA9PSBGcmFtZUxvYWRpbmdTdHlsZS5lYWdlcikge1xuICAgICAgdGhpcy4jbG9hZFNvdXJjZVVSTCgpO1xuICAgIH1cbiAgfVxuXG4gIHNvdXJjZVVSTENoYW5nZWQoKSB7XG4gICAgaWYgKHRoaXMuI2lzSWdub3JpbmdDaGFuZ2VzVG8oXCJzcmNcIikpIHJldHVyblxuXG4gICAgaWYgKHRoaXMuZWxlbWVudC5pc0Nvbm5lY3RlZCkge1xuICAgICAgdGhpcy5jb21wbGV0ZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmxvYWRpbmdTdHlsZSA9PSBGcmFtZUxvYWRpbmdTdHlsZS5lYWdlciB8fCB0aGlzLiNoYXNCZWVuTG9hZGVkKSB7XG4gICAgICB0aGlzLiNsb2FkU291cmNlVVJMKCk7XG4gICAgfVxuICB9XG5cbiAgc291cmNlVVJMUmVsb2FkZWQoKSB7XG4gICAgY29uc3QgeyByZWZyZXNoLCBzcmMgfSA9IHRoaXMuZWxlbWVudDtcblxuICAgIHRoaXMuI3Nob3VsZE1vcnBoRnJhbWUgPSBzcmMgJiYgcmVmcmVzaCA9PT0gXCJtb3JwaFwiO1xuXG4gICAgdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImNvbXBsZXRlXCIpO1xuICAgIHRoaXMuZWxlbWVudC5zcmMgPSBudWxsO1xuICAgIHRoaXMuZWxlbWVudC5zcmMgPSBzcmM7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudC5sb2FkZWRcbiAgfVxuXG4gIGxvYWRpbmdTdHlsZUNoYW5nZWQoKSB7XG4gICAgaWYgKHRoaXMubG9hZGluZ1N0eWxlID09IEZyYW1lTG9hZGluZ1N0eWxlLmxhenkpIHtcbiAgICAgIHRoaXMuYXBwZWFyYW5jZU9ic2VydmVyLnN0YXJ0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYXBwZWFyYW5jZU9ic2VydmVyLnN0b3AoKTtcbiAgICAgIHRoaXMuI2xvYWRTb3VyY2VVUkwoKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyAjbG9hZFNvdXJjZVVSTCgpIHtcbiAgICBpZiAodGhpcy5lbmFibGVkICYmIHRoaXMuaXNBY3RpdmUgJiYgIXRoaXMuY29tcGxldGUgJiYgdGhpcy5zb3VyY2VVUkwpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5sb2FkZWQgPSB0aGlzLiN2aXNpdChleHBhbmRVUkwodGhpcy5zb3VyY2VVUkwpKTtcbiAgICAgIHRoaXMuYXBwZWFyYW5jZU9ic2VydmVyLnN0b3AoKTtcbiAgICAgIGF3YWl0IHRoaXMuZWxlbWVudC5sb2FkZWQ7XG4gICAgICB0aGlzLiNoYXNCZWVuTG9hZGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBsb2FkUmVzcG9uc2UoZmV0Y2hSZXNwb25zZSkge1xuICAgIGlmIChmZXRjaFJlc3BvbnNlLnJlZGlyZWN0ZWQgfHwgKGZldGNoUmVzcG9uc2Uuc3VjY2VlZGVkICYmIGZldGNoUmVzcG9uc2UuaXNIVE1MKSkge1xuICAgICAgdGhpcy5zb3VyY2VVUkwgPSBmZXRjaFJlc3BvbnNlLnJlc3BvbnNlLnVybDtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgaHRtbCA9IGF3YWl0IGZldGNoUmVzcG9uc2UucmVzcG9uc2VIVE1MO1xuICAgICAgaWYgKGh0bWwpIHtcbiAgICAgICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZUhUTUxEb2N1bWVudChodG1sKTtcbiAgICAgICAgY29uc3QgcGFnZVNuYXBzaG90ID0gUGFnZVNuYXBzaG90LmZyb21Eb2N1bWVudChkb2N1bWVudCk7XG5cbiAgICAgICAgaWYgKHBhZ2VTbmFwc2hvdC5pc1Zpc2l0YWJsZSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuI2xvYWRGcmFtZVJlc3BvbnNlKGZldGNoUmVzcG9uc2UsIGRvY3VtZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLiNoYW5kbGVVbnZpc2l0YWJsZUZyYW1lUmVzcG9uc2UoZmV0Y2hSZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy4jc2hvdWxkTW9ycGhGcmFtZSA9IGZhbHNlO1xuICAgICAgdGhpcy5mZXRjaFJlc3BvbnNlTG9hZGVkID0gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gQXBwZWFyYW5jZSBvYnNlcnZlciBkZWxlZ2F0ZVxuXG4gIGVsZW1lbnRBcHBlYXJlZEluVmlld3BvcnQoZWxlbWVudCkge1xuICAgIHRoaXMucHJvcG9zZVZpc2l0SWZOYXZpZ2F0ZWRXaXRoQWN0aW9uKGVsZW1lbnQsIGdldFZpc2l0QWN0aW9uKGVsZW1lbnQpKTtcbiAgICB0aGlzLiNsb2FkU291cmNlVVJMKCk7XG4gIH1cblxuICAvLyBGb3JtIGxpbmsgY2xpY2sgb2JzZXJ2ZXIgZGVsZWdhdGVcblxuICB3aWxsU3VibWl0Rm9ybUxpbmtUb0xvY2F0aW9uKGxpbmspIHtcbiAgICByZXR1cm4gdGhpcy4jc2hvdWxkSW50ZXJjZXB0TmF2aWdhdGlvbihsaW5rKVxuICB9XG5cbiAgc3VibWl0dGVkRm9ybUxpbmtUb0xvY2F0aW9uKGxpbmssIF9sb2NhdGlvbiwgZm9ybSkge1xuICAgIGNvbnN0IGZyYW1lID0gdGhpcy4jZmluZEZyYW1lRWxlbWVudChsaW5rKTtcbiAgICBpZiAoZnJhbWUpIGZvcm0uc2V0QXR0cmlidXRlKFwiZGF0YS10dXJiby1mcmFtZVwiLCBmcmFtZS5pZCk7XG4gIH1cblxuICAvLyBMaW5rIGludGVyY2VwdG9yIGRlbGVnYXRlXG5cbiAgc2hvdWxkSW50ZXJjZXB0TGlua0NsaWNrKGVsZW1lbnQsIF9sb2NhdGlvbiwgX2V2ZW50KSB7XG4gICAgcmV0dXJuIHRoaXMuI3Nob3VsZEludGVyY2VwdE5hdmlnYXRpb24oZWxlbWVudClcbiAgfVxuXG4gIGxpbmtDbGlja0ludGVyY2VwdGVkKGVsZW1lbnQsIGxvY2F0aW9uKSB7XG4gICAgdGhpcy4jbmF2aWdhdGVGcmFtZShlbGVtZW50LCBsb2NhdGlvbik7XG4gIH1cblxuICAvLyBGb3JtIHN1Ym1pdCBvYnNlcnZlciBkZWxlZ2F0ZVxuXG4gIHdpbGxTdWJtaXRGb3JtKGVsZW1lbnQsIHN1Ym1pdHRlcikge1xuICAgIHJldHVybiBlbGVtZW50LmNsb3Nlc3QoXCJ0dXJiby1mcmFtZVwiKSA9PSB0aGlzLmVsZW1lbnQgJiYgdGhpcy4jc2hvdWxkSW50ZXJjZXB0TmF2aWdhdGlvbihlbGVtZW50LCBzdWJtaXR0ZXIpXG4gIH1cblxuICBmb3JtU3VibWl0dGVkKGVsZW1lbnQsIHN1Ym1pdHRlcikge1xuICAgIGlmICh0aGlzLmZvcm1TdWJtaXNzaW9uKSB7XG4gICAgICB0aGlzLmZvcm1TdWJtaXNzaW9uLnN0b3AoKTtcbiAgICB9XG5cbiAgICB0aGlzLmZvcm1TdWJtaXNzaW9uID0gbmV3IEZvcm1TdWJtaXNzaW9uKHRoaXMsIGVsZW1lbnQsIHN1Ym1pdHRlcik7XG4gICAgY29uc3QgeyBmZXRjaFJlcXVlc3QgfSA9IHRoaXMuZm9ybVN1Ym1pc3Npb247XG4gICAgdGhpcy5wcmVwYXJlUmVxdWVzdChmZXRjaFJlcXVlc3QpO1xuICAgIHRoaXMuZm9ybVN1Ym1pc3Npb24uc3RhcnQoKTtcbiAgfVxuXG4gIC8vIEZldGNoIHJlcXVlc3QgZGVsZWdhdGVcblxuICBwcmVwYXJlUmVxdWVzdChyZXF1ZXN0KSB7XG4gICAgcmVxdWVzdC5oZWFkZXJzW1wiVHVyYm8tRnJhbWVcIl0gPSB0aGlzLmlkO1xuXG4gICAgaWYgKHRoaXMuY3VycmVudE5hdmlnYXRpb25FbGVtZW50Py5oYXNBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLXN0cmVhbVwiKSkge1xuICAgICAgcmVxdWVzdC5hY2NlcHRSZXNwb25zZVR5cGUoU3RyZWFtTWVzc2FnZS5jb250ZW50VHlwZSk7XG4gICAgfVxuICB9XG5cbiAgcmVxdWVzdFN0YXJ0ZWQoX3JlcXVlc3QpIHtcbiAgICBtYXJrQXNCdXN5KHRoaXMuZWxlbWVudCk7XG4gIH1cblxuICByZXF1ZXN0UHJldmVudGVkSGFuZGxpbmdSZXNwb25zZShfcmVxdWVzdCwgX3Jlc3BvbnNlKSB7XG4gICAgdGhpcy4jcmVzb2x2ZVZpc2l0UHJvbWlzZSgpO1xuICB9XG5cbiAgYXN5bmMgcmVxdWVzdFN1Y2NlZWRlZFdpdGhSZXNwb25zZShyZXF1ZXN0LCByZXNwb25zZSkge1xuICAgIGF3YWl0IHRoaXMubG9hZFJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICB0aGlzLiNyZXNvbHZlVmlzaXRQcm9taXNlKCk7XG4gIH1cblxuICBhc3luYyByZXF1ZXN0RmFpbGVkV2l0aFJlc3BvbnNlKHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gICAgYXdhaXQgdGhpcy5sb2FkUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgIHRoaXMuI3Jlc29sdmVWaXNpdFByb21pc2UoKTtcbiAgfVxuXG4gIHJlcXVlc3RFcnJvcmVkKHJlcXVlc3QsIGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgdGhpcy4jcmVzb2x2ZVZpc2l0UHJvbWlzZSgpO1xuICB9XG5cbiAgcmVxdWVzdEZpbmlzaGVkKF9yZXF1ZXN0KSB7XG4gICAgY2xlYXJCdXN5U3RhdGUodGhpcy5lbGVtZW50KTtcbiAgfVxuXG4gIC8vIEZvcm0gc3VibWlzc2lvbiBkZWxlZ2F0ZVxuXG4gIGZvcm1TdWJtaXNzaW9uU3RhcnRlZCh7IGZvcm1FbGVtZW50IH0pIHtcbiAgICBtYXJrQXNCdXN5KGZvcm1FbGVtZW50LCB0aGlzLiNmaW5kRnJhbWVFbGVtZW50KGZvcm1FbGVtZW50KSk7XG4gIH1cblxuICBmb3JtU3VibWlzc2lvblN1Y2NlZWRlZFdpdGhSZXNwb25zZShmb3JtU3VibWlzc2lvbiwgcmVzcG9uc2UpIHtcbiAgICBjb25zdCBmcmFtZSA9IHRoaXMuI2ZpbmRGcmFtZUVsZW1lbnQoZm9ybVN1Ym1pc3Npb24uZm9ybUVsZW1lbnQsIGZvcm1TdWJtaXNzaW9uLnN1Ym1pdHRlcik7XG5cbiAgICBmcmFtZS5kZWxlZ2F0ZS5wcm9wb3NlVmlzaXRJZk5hdmlnYXRlZFdpdGhBY3Rpb24oZnJhbWUsIGdldFZpc2l0QWN0aW9uKGZvcm1TdWJtaXNzaW9uLnN1Ym1pdHRlciwgZm9ybVN1Ym1pc3Npb24uZm9ybUVsZW1lbnQsIGZyYW1lKSk7XG4gICAgZnJhbWUuZGVsZWdhdGUubG9hZFJlc3BvbnNlKHJlc3BvbnNlKTtcblxuICAgIGlmICghZm9ybVN1Ym1pc3Npb24uaXNTYWZlKSB7XG4gICAgICBzZXNzaW9uLmNsZWFyQ2FjaGUoKTtcbiAgICB9XG4gIH1cblxuICBmb3JtU3VibWlzc2lvbkZhaWxlZFdpdGhSZXNwb25zZShmb3JtU3VibWlzc2lvbiwgZmV0Y2hSZXNwb25zZSkge1xuICAgIHRoaXMuZWxlbWVudC5kZWxlZ2F0ZS5sb2FkUmVzcG9uc2UoZmV0Y2hSZXNwb25zZSk7XG4gICAgc2Vzc2lvbi5jbGVhckNhY2hlKCk7XG4gIH1cblxuICBmb3JtU3VibWlzc2lvbkVycm9yZWQoZm9ybVN1Ym1pc3Npb24sIGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gIH1cblxuICBmb3JtU3VibWlzc2lvbkZpbmlzaGVkKHsgZm9ybUVsZW1lbnQgfSkge1xuICAgIGNsZWFyQnVzeVN0YXRlKGZvcm1FbGVtZW50LCB0aGlzLiNmaW5kRnJhbWVFbGVtZW50KGZvcm1FbGVtZW50KSk7XG4gIH1cblxuICAvLyBWaWV3IGRlbGVnYXRlXG5cbiAgYWxsb3dzSW1tZWRpYXRlUmVuZGVyKHsgZWxlbWVudDogbmV3RnJhbWUgfSwgb3B0aW9ucykge1xuICAgIGNvbnN0IGV2ZW50ID0gZGlzcGF0Y2goXCJ0dXJibzpiZWZvcmUtZnJhbWUtcmVuZGVyXCIsIHtcbiAgICAgIHRhcmdldDogdGhpcy5lbGVtZW50LFxuICAgICAgZGV0YWlsOiB7IG5ld0ZyYW1lLCAuLi5vcHRpb25zIH0sXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSk7XG5cbiAgICBjb25zdCB7XG4gICAgICBkZWZhdWx0UHJldmVudGVkLFxuICAgICAgZGV0YWlsOiB7IHJlbmRlciB9XG4gICAgfSA9IGV2ZW50O1xuXG4gICAgaWYgKHRoaXMudmlldy5yZW5kZXJlciAmJiByZW5kZXIpIHtcbiAgICAgIHRoaXMudmlldy5yZW5kZXJlci5yZW5kZXJFbGVtZW50ID0gcmVuZGVyO1xuICAgIH1cblxuICAgIHJldHVybiAhZGVmYXVsdFByZXZlbnRlZFxuICB9XG5cbiAgdmlld1JlbmRlcmVkU25hcHNob3QoX3NuYXBzaG90LCBfaXNQcmV2aWV3LCBfcmVuZGVyTWV0aG9kKSB7fVxuXG4gIHByZWxvYWRPbkxvYWRMaW5rc0ZvclZpZXcoZWxlbWVudCkge1xuICAgIHNlc3Npb24ucHJlbG9hZE9uTG9hZExpbmtzRm9yVmlldyhlbGVtZW50KTtcbiAgfVxuXG4gIHZpZXdJbnZhbGlkYXRlZCgpIHt9XG5cbiAgLy8gRnJhbWUgcmVuZGVyZXIgZGVsZWdhdGVcblxuICB3aWxsUmVuZGVyRnJhbWUoY3VycmVudEVsZW1lbnQsIF9uZXdFbGVtZW50KSB7XG4gICAgdGhpcy5wcmV2aW91c0ZyYW1lRWxlbWVudCA9IGN1cnJlbnRFbGVtZW50LmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuXG4gIHZpc2l0Q2FjaGVkU25hcHNob3QgPSAoeyBlbGVtZW50IH0pID0+IHtcbiAgICBjb25zdCBmcmFtZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNcIiArIHRoaXMuZWxlbWVudC5pZCk7XG5cbiAgICBpZiAoZnJhbWUgJiYgdGhpcy5wcmV2aW91c0ZyYW1lRWxlbWVudCkge1xuICAgICAgZnJhbWUucmVwbGFjZUNoaWxkcmVuKC4uLnRoaXMucHJldmlvdXNGcmFtZUVsZW1lbnQuY2hpbGRyZW4pO1xuICAgIH1cblxuICAgIGRlbGV0ZSB0aGlzLnByZXZpb3VzRnJhbWVFbGVtZW50O1xuICB9XG5cbiAgLy8gUHJpdmF0ZVxuXG4gIGFzeW5jICNsb2FkRnJhbWVSZXNwb25zZShmZXRjaFJlc3BvbnNlLCBkb2N1bWVudCkge1xuICAgIGNvbnN0IG5ld0ZyYW1lRWxlbWVudCA9IGF3YWl0IHRoaXMuZXh0cmFjdEZvcmVpZ25GcmFtZUVsZW1lbnQoZG9jdW1lbnQuYm9keSk7XG4gICAgY29uc3QgcmVuZGVyZXJDbGFzcyA9IHRoaXMuI3Nob3VsZE1vcnBoRnJhbWUgPyBNb3JwaGluZ0ZyYW1lUmVuZGVyZXIgOiBGcmFtZVJlbmRlcmVyO1xuXG4gICAgaWYgKG5ld0ZyYW1lRWxlbWVudCkge1xuICAgICAgY29uc3Qgc25hcHNob3QgPSBuZXcgU25hcHNob3QobmV3RnJhbWVFbGVtZW50KTtcbiAgICAgIGNvbnN0IHJlbmRlcmVyID0gbmV3IHJlbmRlcmVyQ2xhc3ModGhpcywgdGhpcy52aWV3LnNuYXBzaG90LCBzbmFwc2hvdCwgZmFsc2UsIGZhbHNlKTtcbiAgICAgIGlmICh0aGlzLnZpZXcucmVuZGVyUHJvbWlzZSkgYXdhaXQgdGhpcy52aWV3LnJlbmRlclByb21pc2U7XG4gICAgICB0aGlzLmNoYW5nZUhpc3RvcnkoKTtcblxuICAgICAgYXdhaXQgdGhpcy52aWV3LnJlbmRlcihyZW5kZXJlcik7XG4gICAgICB0aGlzLmNvbXBsZXRlID0gdHJ1ZTtcbiAgICAgIHNlc3Npb24uZnJhbWVSZW5kZXJlZChmZXRjaFJlc3BvbnNlLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgc2Vzc2lvbi5mcmFtZUxvYWRlZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgYXdhaXQgdGhpcy5mZXRjaFJlc3BvbnNlTG9hZGVkKGZldGNoUmVzcG9uc2UpO1xuICAgIH0gZWxzZSBpZiAodGhpcy4jd2lsbEhhbmRsZUZyYW1lTWlzc2luZ0Zyb21SZXNwb25zZShmZXRjaFJlc3BvbnNlKSkge1xuICAgICAgdGhpcy4jaGFuZGxlRnJhbWVNaXNzaW5nRnJvbVJlc3BvbnNlKGZldGNoUmVzcG9uc2UpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jICN2aXNpdCh1cmwpIHtcbiAgICBjb25zdCByZXF1ZXN0ID0gbmV3IEZldGNoUmVxdWVzdCh0aGlzLCBGZXRjaE1ldGhvZC5nZXQsIHVybCwgbmV3IFVSTFNlYXJjaFBhcmFtcygpLCB0aGlzLmVsZW1lbnQpO1xuXG4gICAgdGhpcy4jY3VycmVudEZldGNoUmVxdWVzdD8uY2FuY2VsKCk7XG4gICAgdGhpcy4jY3VycmVudEZldGNoUmVxdWVzdCA9IHJlcXVlc3Q7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIHRoaXMuI3Jlc29sdmVWaXNpdFByb21pc2UgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuI3Jlc29sdmVWaXNpdFByb21pc2UgPSAoKSA9PiB7fTtcbiAgICAgICAgdGhpcy4jY3VycmVudEZldGNoUmVxdWVzdCA9IG51bGw7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH07XG4gICAgICByZXF1ZXN0LnBlcmZvcm0oKTtcbiAgICB9KVxuICB9XG5cbiAgI25hdmlnYXRlRnJhbWUoZWxlbWVudCwgdXJsLCBzdWJtaXR0ZXIpIHtcbiAgICBjb25zdCBmcmFtZSA9IHRoaXMuI2ZpbmRGcmFtZUVsZW1lbnQoZWxlbWVudCwgc3VibWl0dGVyKTtcblxuICAgIGZyYW1lLmRlbGVnYXRlLnByb3Bvc2VWaXNpdElmTmF2aWdhdGVkV2l0aEFjdGlvbihmcmFtZSwgZ2V0VmlzaXRBY3Rpb24oc3VibWl0dGVyLCBlbGVtZW50LCBmcmFtZSkpO1xuXG4gICAgdGhpcy4jd2l0aEN1cnJlbnROYXZpZ2F0aW9uRWxlbWVudChlbGVtZW50LCAoKSA9PiB7XG4gICAgICBmcmFtZS5zcmMgPSB1cmw7XG4gICAgfSk7XG4gIH1cblxuICBwcm9wb3NlVmlzaXRJZk5hdmlnYXRlZFdpdGhBY3Rpb24oZnJhbWUsIGFjdGlvbiA9IG51bGwpIHtcbiAgICB0aGlzLmFjdGlvbiA9IGFjdGlvbjtcblxuICAgIGlmICh0aGlzLmFjdGlvbikge1xuICAgICAgY29uc3QgcGFnZVNuYXBzaG90ID0gUGFnZVNuYXBzaG90LmZyb21FbGVtZW50KGZyYW1lKS5jbG9uZSgpO1xuICAgICAgY29uc3QgeyB2aXNpdENhY2hlZFNuYXBzaG90IH0gPSBmcmFtZS5kZWxlZ2F0ZTtcblxuICAgICAgZnJhbWUuZGVsZWdhdGUuZmV0Y2hSZXNwb25zZUxvYWRlZCA9IGFzeW5jIChmZXRjaFJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGlmIChmcmFtZS5zcmMpIHtcbiAgICAgICAgICBjb25zdCB7IHN0YXR1c0NvZGUsIHJlZGlyZWN0ZWQgfSA9IGZldGNoUmVzcG9uc2U7XG4gICAgICAgICAgY29uc3QgcmVzcG9uc2VIVE1MID0gYXdhaXQgZmV0Y2hSZXNwb25zZS5yZXNwb25zZUhUTUw7XG4gICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB7IHN0YXR1c0NvZGUsIHJlZGlyZWN0ZWQsIHJlc3BvbnNlSFRNTCB9O1xuICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICByZXNwb25zZSxcbiAgICAgICAgICAgIHZpc2l0Q2FjaGVkU25hcHNob3QsXG4gICAgICAgICAgICB3aWxsUmVuZGVyOiBmYWxzZSxcbiAgICAgICAgICAgIHVwZGF0ZUhpc3Rvcnk6IGZhbHNlLFxuICAgICAgICAgICAgcmVzdG9yYXRpb25JZGVudGlmaWVyOiB0aGlzLnJlc3RvcmF0aW9uSWRlbnRpZmllcixcbiAgICAgICAgICAgIHNuYXBzaG90OiBwYWdlU25hcHNob3RcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgaWYgKHRoaXMuYWN0aW9uKSBvcHRpb25zLmFjdGlvbiA9IHRoaXMuYWN0aW9uO1xuXG4gICAgICAgICAgc2Vzc2lvbi52aXNpdChmcmFtZS5zcmMsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGNoYW5nZUhpc3RvcnkoKSB7XG4gICAgaWYgKHRoaXMuYWN0aW9uKSB7XG4gICAgICBjb25zdCBtZXRob2QgPSBnZXRIaXN0b3J5TWV0aG9kRm9yQWN0aW9uKHRoaXMuYWN0aW9uKTtcbiAgICAgIHNlc3Npb24uaGlzdG9yeS51cGRhdGUobWV0aG9kLCBleHBhbmRVUkwodGhpcy5lbGVtZW50LnNyYyB8fCBcIlwiKSwgdGhpcy5yZXN0b3JhdGlvbklkZW50aWZpZXIpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jICNoYW5kbGVVbnZpc2l0YWJsZUZyYW1lUmVzcG9uc2UoZmV0Y2hSZXNwb25zZSkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIGBUaGUgcmVzcG9uc2UgKCR7ZmV0Y2hSZXNwb25zZS5zdGF0dXNDb2RlfSkgZnJvbSA8dHVyYm8tZnJhbWUgaWQ9XCIke3RoaXMuZWxlbWVudC5pZH1cIj4gaXMgcGVyZm9ybWluZyBhIGZ1bGwgcGFnZSB2aXNpdCBkdWUgdG8gdHVyYm8tdmlzaXQtY29udHJvbC5gXG4gICAgKTtcblxuICAgIGF3YWl0IHRoaXMuI3Zpc2l0UmVzcG9uc2UoZmV0Y2hSZXNwb25zZS5yZXNwb25zZSk7XG4gIH1cblxuICAjd2lsbEhhbmRsZUZyYW1lTWlzc2luZ0Zyb21SZXNwb25zZShmZXRjaFJlc3BvbnNlKSB7XG4gICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShcImNvbXBsZXRlXCIsIFwiXCIpO1xuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBmZXRjaFJlc3BvbnNlLnJlc3BvbnNlO1xuICAgIGNvbnN0IHZpc2l0ID0gYXN5bmMgKHVybCwgb3B0aW9ucykgPT4ge1xuICAgICAgaWYgKHVybCBpbnN0YW5jZW9mIFJlc3BvbnNlKSB7XG4gICAgICAgIHRoaXMuI3Zpc2l0UmVzcG9uc2UodXJsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlc3Npb24udmlzaXQodXJsLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgZXZlbnQgPSBkaXNwYXRjaChcInR1cmJvOmZyYW1lLW1pc3NpbmdcIiwge1xuICAgICAgdGFyZ2V0OiB0aGlzLmVsZW1lbnQsXG4gICAgICBkZXRhaWw6IHsgcmVzcG9uc2UsIHZpc2l0IH0sXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSk7XG5cbiAgICByZXR1cm4gIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWRcbiAgfVxuXG4gICNoYW5kbGVGcmFtZU1pc3NpbmdGcm9tUmVzcG9uc2UoZmV0Y2hSZXNwb25zZSkge1xuICAgIHRoaXMudmlldy5taXNzaW5nKCk7XG4gICAgdGhpcy4jdGhyb3dGcmFtZU1pc3NpbmdFcnJvcihmZXRjaFJlc3BvbnNlKTtcbiAgfVxuXG4gICN0aHJvd0ZyYW1lTWlzc2luZ0Vycm9yKGZldGNoUmVzcG9uc2UpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gYFRoZSByZXNwb25zZSAoJHtmZXRjaFJlc3BvbnNlLnN0YXR1c0NvZGV9KSBkaWQgbm90IGNvbnRhaW4gdGhlIGV4cGVjdGVkIDx0dXJiby1mcmFtZSBpZD1cIiR7dGhpcy5lbGVtZW50LmlkfVwiPiBhbmQgd2lsbCBiZSBpZ25vcmVkLiBUbyBwZXJmb3JtIGEgZnVsbCBwYWdlIHZpc2l0IGluc3RlYWQsIHNldCB0dXJiby12aXNpdC1jb250cm9sIHRvIHJlbG9hZC5gO1xuICAgIHRocm93IG5ldyBUdXJib0ZyYW1lTWlzc2luZ0Vycm9yKG1lc3NhZ2UpXG4gIH1cblxuICBhc3luYyAjdmlzaXRSZXNwb25zZShyZXNwb25zZSkge1xuICAgIGNvbnN0IHdyYXBwZWQgPSBuZXcgRmV0Y2hSZXNwb25zZShyZXNwb25zZSk7XG4gICAgY29uc3QgcmVzcG9uc2VIVE1MID0gYXdhaXQgd3JhcHBlZC5yZXNwb25zZUhUTUw7XG4gICAgY29uc3QgeyBsb2NhdGlvbiwgcmVkaXJlY3RlZCwgc3RhdHVzQ29kZSB9ID0gd3JhcHBlZDtcblxuICAgIHJldHVybiBzZXNzaW9uLnZpc2l0KGxvY2F0aW9uLCB7IHJlc3BvbnNlOiB7IHJlZGlyZWN0ZWQsIHN0YXR1c0NvZGUsIHJlc3BvbnNlSFRNTCB9IH0pXG4gIH1cblxuICAjZmluZEZyYW1lRWxlbWVudChlbGVtZW50LCBzdWJtaXR0ZXIpIHtcbiAgICBjb25zdCBpZCA9IGdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm8tZnJhbWVcIiwgc3VibWl0dGVyLCBlbGVtZW50KSB8fCB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidGFyZ2V0XCIpO1xuICAgIHJldHVybiBnZXRGcmFtZUVsZW1lbnRCeUlkKGlkKSA/PyB0aGlzLmVsZW1lbnRcbiAgfVxuXG4gIGFzeW5jIGV4dHJhY3RGb3JlaWduRnJhbWVFbGVtZW50KGNvbnRhaW5lcikge1xuICAgIGxldCBlbGVtZW50O1xuICAgIGNvbnN0IGlkID0gQ1NTLmVzY2FwZSh0aGlzLmlkKTtcblxuICAgIHRyeSB7XG4gICAgICBlbGVtZW50ID0gYWN0aXZhdGVFbGVtZW50KGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGB0dXJiby1mcmFtZSMke2lkfWApLCB0aGlzLnNvdXJjZVVSTCk7XG4gICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gZWxlbWVudFxuICAgICAgfVxuXG4gICAgICBlbGVtZW50ID0gYWN0aXZhdGVFbGVtZW50KGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGB0dXJiby1mcmFtZVtzcmNdW3JlY3Vyc2V+PSR7aWR9XWApLCB0aGlzLnNvdXJjZVVSTCk7XG4gICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICBhd2FpdCBlbGVtZW50LmxvYWRlZDtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZXh0cmFjdEZvcmVpZ25GcmFtZUVsZW1lbnQoZWxlbWVudClcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICByZXR1cm4gbmV3IEZyYW1lRWxlbWVudCgpXG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gICNmb3JtQWN0aW9uSXNWaXNpdGFibGUoZm9ybSwgc3VibWl0dGVyKSB7XG4gICAgY29uc3QgYWN0aW9uID0gZ2V0QWN0aW9uJDEoZm9ybSwgc3VibWl0dGVyKTtcblxuICAgIHJldHVybiBsb2NhdGlvbklzVmlzaXRhYmxlKGV4cGFuZFVSTChhY3Rpb24pLCB0aGlzLnJvb3RMb2NhdGlvbilcbiAgfVxuXG4gICNzaG91bGRJbnRlcmNlcHROYXZpZ2F0aW9uKGVsZW1lbnQsIHN1Ym1pdHRlcikge1xuICAgIGNvbnN0IGlkID0gZ2V0QXR0cmlidXRlKFwiZGF0YS10dXJiby1mcmFtZVwiLCBzdWJtaXR0ZXIsIGVsZW1lbnQpIHx8IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIik7XG5cbiAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxGb3JtRWxlbWVudCAmJiAhdGhpcy4jZm9ybUFjdGlvbklzVmlzaXRhYmxlKGVsZW1lbnQsIHN1Ym1pdHRlcikpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGlmICghdGhpcy5lbmFibGVkIHx8IGlkID09IFwiX3RvcFwiKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoaWQpIHtcbiAgICAgIGNvbnN0IGZyYW1lRWxlbWVudCA9IGdldEZyYW1lRWxlbWVudEJ5SWQoaWQpO1xuICAgICAgaWYgKGZyYW1lRWxlbWVudCkge1xuICAgICAgICByZXR1cm4gIWZyYW1lRWxlbWVudC5kaXNhYmxlZFxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghc2Vzc2lvbi5lbGVtZW50SXNOYXZpZ2F0YWJsZShlbGVtZW50KSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKHN1Ym1pdHRlciAmJiAhc2Vzc2lvbi5lbGVtZW50SXNOYXZpZ2F0YWJsZShzdWJtaXR0ZXIpKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgLy8gQ29tcHV0ZWQgcHJvcGVydGllc1xuXG4gIGdldCBpZCgpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50LmlkXG4gIH1cblxuICBnZXQgZW5hYmxlZCgpIHtcbiAgICByZXR1cm4gIXRoaXMuZWxlbWVudC5kaXNhYmxlZFxuICB9XG5cbiAgZ2V0IHNvdXJjZVVSTCgpIHtcbiAgICBpZiAodGhpcy5lbGVtZW50LnNyYykge1xuICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5zcmNcbiAgICB9XG4gIH1cblxuICBzZXQgc291cmNlVVJMKHNvdXJjZVVSTCkge1xuICAgIHRoaXMuI2lnbm9yaW5nQ2hhbmdlc1RvQXR0cmlidXRlKFwic3JjXCIsICgpID0+IHtcbiAgICAgIHRoaXMuZWxlbWVudC5zcmMgPSBzb3VyY2VVUkwgPz8gbnVsbDtcbiAgICB9KTtcbiAgfVxuXG4gIGdldCBsb2FkaW5nU3R5bGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudC5sb2FkaW5nXG4gIH1cblxuICBnZXQgaXNMb2FkaW5nKCkge1xuICAgIHJldHVybiB0aGlzLmZvcm1TdWJtaXNzaW9uICE9PSB1bmRlZmluZWQgfHwgdGhpcy4jcmVzb2x2ZVZpc2l0UHJvbWlzZSgpICE9PSB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBjb21wbGV0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50Lmhhc0F0dHJpYnV0ZShcImNvbXBsZXRlXCIpXG4gIH1cblxuICBzZXQgY29tcGxldGUodmFsdWUpIHtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJjb21wbGV0ZVwiLCBcIlwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImNvbXBsZXRlXCIpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBpc0FjdGl2ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50LmlzQWN0aXZlICYmIHRoaXMuI2Nvbm5lY3RlZFxuICB9XG5cbiAgZ2V0IHJvb3RMb2NhdGlvbigpIHtcbiAgICBjb25zdCBtZXRhID0gdGhpcy5lbGVtZW50Lm93bmVyRG9jdW1lbnQucXVlcnlTZWxlY3RvcihgbWV0YVtuYW1lPVwidHVyYm8tcm9vdFwiXWApO1xuICAgIGNvbnN0IHJvb3QgPSBtZXRhPy5jb250ZW50ID8/IFwiL1wiO1xuICAgIHJldHVybiBleHBhbmRVUkwocm9vdClcbiAgfVxuXG4gICNpc0lnbm9yaW5nQ2hhbmdlc1RvKGF0dHJpYnV0ZU5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy4jaWdub3JlZEF0dHJpYnV0ZXMuaGFzKGF0dHJpYnV0ZU5hbWUpXG4gIH1cblxuICAjaWdub3JpbmdDaGFuZ2VzVG9BdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSwgY2FsbGJhY2spIHtcbiAgICB0aGlzLiNpZ25vcmVkQXR0cmlidXRlcy5hZGQoYXR0cmlidXRlTmFtZSk7XG4gICAgY2FsbGJhY2soKTtcbiAgICB0aGlzLiNpZ25vcmVkQXR0cmlidXRlcy5kZWxldGUoYXR0cmlidXRlTmFtZSk7XG4gIH1cblxuICAjd2l0aEN1cnJlbnROYXZpZ2F0aW9uRWxlbWVudChlbGVtZW50LCBjYWxsYmFjaykge1xuICAgIHRoaXMuY3VycmVudE5hdmlnYXRpb25FbGVtZW50ID0gZWxlbWVudDtcbiAgICBjYWxsYmFjaygpO1xuICAgIGRlbGV0ZSB0aGlzLmN1cnJlbnROYXZpZ2F0aW9uRWxlbWVudDtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRGcmFtZUVsZW1lbnRCeUlkKGlkKSB7XG4gIGlmIChpZCAhPSBudWxsKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEZyYW1lRWxlbWVudCkge1xuICAgICAgcmV0dXJuIGVsZW1lbnRcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYWN0aXZhdGVFbGVtZW50KGVsZW1lbnQsIGN1cnJlbnRVUkwpIHtcbiAgaWYgKGVsZW1lbnQpIHtcbiAgICBjb25zdCBzcmMgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcInNyY1wiKTtcbiAgICBpZiAoc3JjICE9IG51bGwgJiYgY3VycmVudFVSTCAhPSBudWxsICYmIHVybHNBcmVFcXVhbChzcmMsIGN1cnJlbnRVUkwpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE1hdGNoaW5nIDx0dXJiby1mcmFtZSBpZD1cIiR7ZWxlbWVudC5pZH1cIj4gZWxlbWVudCBoYXMgYSBzb3VyY2UgVVJMIHdoaWNoIHJlZmVyZW5jZXMgaXRzZWxmYClcbiAgICB9XG4gICAgaWYgKGVsZW1lbnQub3duZXJEb2N1bWVudCAhPT0gZG9jdW1lbnQpIHtcbiAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5pbXBvcnROb2RlKGVsZW1lbnQsIHRydWUpO1xuICAgIH1cblxuICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgRnJhbWVFbGVtZW50KSB7XG4gICAgICBlbGVtZW50LmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICBlbGVtZW50LmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICByZXR1cm4gZWxlbWVudFxuICAgIH1cbiAgfVxufVxuXG5jb25zdCBTdHJlYW1BY3Rpb25zID0ge1xuICBhZnRlcigpIHtcbiAgICB0aGlzLnRhcmdldEVsZW1lbnRzLmZvckVhY2goKGUpID0+IGUucGFyZW50RWxlbWVudD8uaW5zZXJ0QmVmb3JlKHRoaXMudGVtcGxhdGVDb250ZW50LCBlLm5leHRTaWJsaW5nKSk7XG4gIH0sXG5cbiAgYXBwZW5kKCkge1xuICAgIHRoaXMucmVtb3ZlRHVwbGljYXRlVGFyZ2V0Q2hpbGRyZW4oKTtcbiAgICB0aGlzLnRhcmdldEVsZW1lbnRzLmZvckVhY2goKGUpID0+IGUuYXBwZW5kKHRoaXMudGVtcGxhdGVDb250ZW50KSk7XG4gIH0sXG5cbiAgYmVmb3JlKCkge1xuICAgIHRoaXMudGFyZ2V0RWxlbWVudHMuZm9yRWFjaCgoZSkgPT4gZS5wYXJlbnRFbGVtZW50Py5pbnNlcnRCZWZvcmUodGhpcy50ZW1wbGF0ZUNvbnRlbnQsIGUpKTtcbiAgfSxcblxuICBwcmVwZW5kKCkge1xuICAgIHRoaXMucmVtb3ZlRHVwbGljYXRlVGFyZ2V0Q2hpbGRyZW4oKTtcbiAgICB0aGlzLnRhcmdldEVsZW1lbnRzLmZvckVhY2goKGUpID0+IGUucHJlcGVuZCh0aGlzLnRlbXBsYXRlQ29udGVudCkpO1xuICB9LFxuXG4gIHJlbW92ZSgpIHtcbiAgICB0aGlzLnRhcmdldEVsZW1lbnRzLmZvckVhY2goKGUpID0+IGUucmVtb3ZlKCkpO1xuICB9LFxuXG4gIHJlcGxhY2UoKSB7XG4gICAgY29uc3QgbWV0aG9kID0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJtZXRob2RcIik7XG5cbiAgICB0aGlzLnRhcmdldEVsZW1lbnRzLmZvckVhY2goKHRhcmdldEVsZW1lbnQpID0+IHtcbiAgICAgIGlmIChtZXRob2QgPT09IFwibW9ycGhcIikge1xuICAgICAgICBtb3JwaEVsZW1lbnRzKHRhcmdldEVsZW1lbnQsIHRoaXMudGVtcGxhdGVDb250ZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldEVsZW1lbnQucmVwbGFjZVdpdGgodGhpcy50ZW1wbGF0ZUNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIHVwZGF0ZSgpIHtcbiAgICBjb25zdCBtZXRob2QgPSB0aGlzLmdldEF0dHJpYnV0ZShcIm1ldGhvZFwiKTtcblxuICAgIHRoaXMudGFyZ2V0RWxlbWVudHMuZm9yRWFjaCgodGFyZ2V0RWxlbWVudCkgPT4ge1xuICAgICAgaWYgKG1ldGhvZCA9PT0gXCJtb3JwaFwiKSB7XG4gICAgICAgIG1vcnBoQ2hpbGRyZW4odGFyZ2V0RWxlbWVudCwgdGhpcy50ZW1wbGF0ZUNvbnRlbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0RWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICB0YXJnZXRFbGVtZW50LmFwcGVuZCh0aGlzLnRlbXBsYXRlQ29udGVudCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgcmVmcmVzaCgpIHtcbiAgICBzZXNzaW9uLnJlZnJlc2godGhpcy5iYXNlVVJJLCB0aGlzLnJlcXVlc3RJZCk7XG4gIH1cbn07XG5cbi8vIDx0dXJiby1zdHJlYW0gYWN0aW9uPXJlcGxhY2UgdGFyZ2V0PWlkPjx0ZW1wbGF0ZT4uLi5cblxuLyoqXG4gKiBSZW5kZXJzIHVwZGF0ZXMgdG8gdGhlIHBhZ2UgZnJvbSBhIHN0cmVhbSBvZiBtZXNzYWdlcy5cbiAqXG4gKiBVc2luZyB0aGUgYGFjdGlvbmAgYXR0cmlidXRlLCB0aGlzIGNhbiBiZSBjb25maWd1cmVkIG9uZSBvZiBlaWdodCB3YXlzOlxuICpcbiAqIC0gYGFmdGVyYCAtIGluc2VydHMgdGhlIHJlc3VsdCBhZnRlciB0aGUgdGFyZ2V0XG4gKiAtIGBhcHBlbmRgIC0gYXBwZW5kcyB0aGUgcmVzdWx0IHRvIHRoZSB0YXJnZXRcbiAqIC0gYGJlZm9yZWAgLSBpbnNlcnRzIHRoZSByZXN1bHQgYmVmb3JlIHRoZSB0YXJnZXRcbiAqIC0gYHByZXBlbmRgIC0gcHJlcGVuZHMgdGhlIHJlc3VsdCB0byB0aGUgdGFyZ2V0XG4gKiAtIGByZWZyZXNoYCAtIGluaXRpYXRlcyBhIHBhZ2UgcmVmcmVzaFxuICogLSBgcmVtb3ZlYCAtIHJlbW92ZXMgdGhlIHRhcmdldFxuICogLSBgcmVwbGFjZWAgLSByZXBsYWNlcyB0aGUgb3V0ZXIgSFRNTCBvZiB0aGUgdGFyZ2V0XG4gKiAtIGB1cGRhdGVgIC0gcmVwbGFjZXMgdGhlIGlubmVyIEhUTUwgb2YgdGhlIHRhcmdldFxuICpcbiAqIEBjdXN0b21FbGVtZW50IHR1cmJvLXN0cmVhbVxuICogQGV4YW1wbGVcbiAqICAgPHR1cmJvLXN0cmVhbSBhY3Rpb249XCJhcHBlbmRcIiB0YXJnZXQ9XCJkb21faWRcIj5cbiAqICAgICA8dGVtcGxhdGU+XG4gKiAgICAgICBDb250ZW50IHRvIGFwcGVuZCB0byB0YXJnZXQgZGVzaWduYXRlZCB3aXRoIHRoZSBkb21faWQuXG4gKiAgICAgPC90ZW1wbGF0ZT5cbiAqICAgPC90dXJiby1zdHJlYW0+XG4gKi9cbmNsYXNzIFN0cmVhbUVsZW1lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIHN0YXRpYyBhc3luYyByZW5kZXJFbGVtZW50KG5ld0VsZW1lbnQpIHtcbiAgICBhd2FpdCBuZXdFbGVtZW50LnBlcmZvcm1BY3Rpb24oKTtcbiAgfVxuXG4gIGFzeW5jIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnJlbmRlcigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5kaXNjb25uZWN0KCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmVuZGVyKCkge1xuICAgIHJldHVybiAodGhpcy5yZW5kZXJQcm9taXNlID8/PSAoYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZXZlbnQgPSB0aGlzLmJlZm9yZVJlbmRlckV2ZW50O1xuXG4gICAgICBpZiAodGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KSkge1xuICAgICAgICBhd2FpdCBuZXh0UmVwYWludCgpO1xuICAgICAgICBhd2FpdCBldmVudC5kZXRhaWwucmVuZGVyKHRoaXMpO1xuICAgICAgfVxuICAgIH0pKCkpXG4gIH1cblxuICBkaXNjb25uZWN0KCkge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLnJlbW92ZSgpO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVtcHR5XG4gICAgfSBjYXRjaCB7fVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgZHVwbGljYXRlIGNoaWxkcmVuIChieSBJRClcbiAgICovXG4gIHJlbW92ZUR1cGxpY2F0ZVRhcmdldENoaWxkcmVuKCkge1xuICAgIHRoaXMuZHVwbGljYXRlQ2hpbGRyZW4uZm9yRWFjaCgoYykgPT4gYy5yZW1vdmUoKSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgbGlzdCBvZiBkdXBsaWNhdGUgY2hpbGRyZW4gKGkuZS4gdGhvc2Ugd2l0aCB0aGUgc2FtZSBJRClcbiAgICovXG4gIGdldCBkdXBsaWNhdGVDaGlsZHJlbigpIHtcbiAgICBjb25zdCBleGlzdGluZ0NoaWxkcmVuID0gdGhpcy50YXJnZXRFbGVtZW50cy5mbGF0TWFwKChlKSA9PiBbLi4uZS5jaGlsZHJlbl0pLmZpbHRlcigoYykgPT4gISFjLmdldEF0dHJpYnV0ZShcImlkXCIpKTtcbiAgICBjb25zdCBuZXdDaGlsZHJlbklkcyA9IFsuLi4odGhpcy50ZW1wbGF0ZUNvbnRlbnQ/LmNoaWxkcmVuIHx8IFtdKV0uZmlsdGVyKChjKSA9PiAhIWMuZ2V0QXR0cmlidXRlKFwiaWRcIikpLm1hcCgoYykgPT4gYy5nZXRBdHRyaWJ1dGUoXCJpZFwiKSk7XG5cbiAgICByZXR1cm4gZXhpc3RpbmdDaGlsZHJlbi5maWx0ZXIoKGMpID0+IG5ld0NoaWxkcmVuSWRzLmluY2x1ZGVzKGMuZ2V0QXR0cmlidXRlKFwiaWRcIikpKVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGFjdGlvbiBmdW5jdGlvbiB0byBiZSBwZXJmb3JtZWQuXG4gICAqL1xuICBnZXQgcGVyZm9ybUFjdGlvbigpIHtcbiAgICBpZiAodGhpcy5hY3Rpb24pIHtcbiAgICAgIGNvbnN0IGFjdGlvbkZ1bmN0aW9uID0gU3RyZWFtQWN0aW9uc1t0aGlzLmFjdGlvbl07XG4gICAgICBpZiAoYWN0aW9uRnVuY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGFjdGlvbkZ1bmN0aW9uXG4gICAgICB9XG4gICAgICB0aGlzLiNyYWlzZShcInVua25vd24gYWN0aW9uXCIpO1xuICAgIH1cbiAgICB0aGlzLiNyYWlzZShcImFjdGlvbiBhdHRyaWJ1dGUgaXMgbWlzc2luZ1wiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB0YXJnZXQgZWxlbWVudHMgd2hpY2ggdGhlIHRlbXBsYXRlIHdpbGwgYmUgcmVuZGVyZWQgdG8uXG4gICAqL1xuICBnZXQgdGFyZ2V0RWxlbWVudHMoKSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0KSB7XG4gICAgICByZXR1cm4gdGhpcy50YXJnZXRFbGVtZW50c0J5SWRcbiAgICB9IGVsc2UgaWYgKHRoaXMudGFyZ2V0cykge1xuICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0RWxlbWVudHNCeVF1ZXJ5XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuI3JhaXNlKFwidGFyZ2V0IG9yIHRhcmdldHMgYXR0cmlidXRlIGlzIG1pc3NpbmdcIik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGNvbnRlbnRzIG9mIHRoZSBtYWluIGA8dGVtcGxhdGU+YC5cbiAgICovXG4gIGdldCB0ZW1wbGF0ZUNvbnRlbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMudGVtcGxhdGVFbGVtZW50LmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpXG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgbWFpbiBgPHRlbXBsYXRlPmAgdXNlZCBmb3IgcmVuZGVyaW5nXG4gICAqL1xuICBnZXQgdGVtcGxhdGVFbGVtZW50KCkge1xuICAgIGlmICh0aGlzLmZpcnN0RWxlbWVudENoaWxkID09PSBudWxsKSB7XG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IHRoaXMub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XG4gICAgICB0aGlzLmFwcGVuZENoaWxkKHRlbXBsYXRlKTtcbiAgICAgIHJldHVybiB0ZW1wbGF0ZVxuICAgIH0gZWxzZSBpZiAodGhpcy5maXJzdEVsZW1lbnRDaGlsZCBpbnN0YW5jZW9mIEhUTUxUZW1wbGF0ZUVsZW1lbnQpIHtcbiAgICAgIHJldHVybiB0aGlzLmZpcnN0RWxlbWVudENoaWxkXG4gICAgfVxuICAgIHRoaXMuI3JhaXNlKFwiZmlyc3QgY2hpbGQgZWxlbWVudCBtdXN0IGJlIGEgPHRlbXBsYXRlPiBlbGVtZW50XCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1cnJlbnQgYWN0aW9uLlxuICAgKi9cbiAgZ2V0IGFjdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoXCJhY3Rpb25cIilcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IHRhcmdldCAoYW4gZWxlbWVudCBJRCkgdG8gd2hpY2ggdGhlIHJlc3VsdCB3aWxsXG4gICAqIGJlIHJlbmRlcmVkLlxuICAgKi9cbiAgZ2V0IHRhcmdldCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIilcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IFwidGFyZ2V0c1wiIHNlbGVjdG9yIChhIENTUyBzZWxlY3RvcilcbiAgICovXG4gIGdldCB0YXJnZXRzKCkge1xuICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZShcInRhcmdldHNcIilcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWFkcyB0aGUgcmVxdWVzdC1pZCBhdHRyaWJ1dGVcbiAgICovXG4gIGdldCByZXF1ZXN0SWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKFwicmVxdWVzdC1pZFwiKVxuICB9XG5cbiAgI3JhaXNlKG1lc3NhZ2UpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYCR7dGhpcy5kZXNjcmlwdGlvbn06ICR7bWVzc2FnZX1gKVxuICB9XG5cbiAgZ2V0IGRlc2NyaXB0aW9uKCkge1xuICAgIHJldHVybiAodGhpcy5vdXRlckhUTUwubWF0Y2goLzxbXj5dKz4vKSA/PyBbXSlbMF0gPz8gXCI8dHVyYm8tc3RyZWFtPlwiXG4gIH1cblxuICBnZXQgYmVmb3JlUmVuZGVyRXZlbnQoKSB7XG4gICAgcmV0dXJuIG5ldyBDdXN0b21FdmVudChcInR1cmJvOmJlZm9yZS1zdHJlYW0tcmVuZGVyXCIsIHtcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgZGV0YWlsOiB7IG5ld1N0cmVhbTogdGhpcywgcmVuZGVyOiBTdHJlYW1FbGVtZW50LnJlbmRlckVsZW1lbnQgfVxuICAgIH0pXG4gIH1cblxuICBnZXQgdGFyZ2V0RWxlbWVudHNCeUlkKCkge1xuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLm93bmVyRG9jdW1lbnQ/LmdldEVsZW1lbnRCeUlkKHRoaXMudGFyZ2V0KTtcblxuICAgIGlmIChlbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gW2VsZW1lbnRdXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgfVxuXG4gIGdldCB0YXJnZXRFbGVtZW50c0J5UXVlcnkoKSB7XG4gICAgY29uc3QgZWxlbWVudHMgPSB0aGlzLm93bmVyRG9jdW1lbnQ/LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy50YXJnZXRzKTtcblxuICAgIGlmIChlbGVtZW50cy5sZW5ndGggIT09IDApIHtcbiAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlbGVtZW50cylcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICB9XG59XG5cbmNsYXNzIFN0cmVhbVNvdXJjZUVsZW1lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIHN0cmVhbVNvdXJjZSA9IG51bGxcblxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICB0aGlzLnN0cmVhbVNvdXJjZSA9IHRoaXMuc3JjLm1hdGNoKC9ed3N7MSwyfTovKSA/IG5ldyBXZWJTb2NrZXQodGhpcy5zcmMpIDogbmV3IEV2ZW50U291cmNlKHRoaXMuc3JjKTtcblxuICAgIGNvbm5lY3RTdHJlYW1Tb3VyY2UodGhpcy5zdHJlYW1Tb3VyY2UpO1xuICB9XG5cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgaWYgKHRoaXMuc3RyZWFtU291cmNlKSB7XG4gICAgICB0aGlzLnN0cmVhbVNvdXJjZS5jbG9zZSgpO1xuXG4gICAgICBkaXNjb25uZWN0U3RyZWFtU291cmNlKHRoaXMuc3RyZWFtU291cmNlKTtcbiAgICB9XG4gIH1cblxuICBnZXQgc3JjKCkge1xuICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZShcInNyY1wiKSB8fCBcIlwiXG4gIH1cbn1cblxuRnJhbWVFbGVtZW50LmRlbGVnYXRlQ29uc3RydWN0b3IgPSBGcmFtZUNvbnRyb2xsZXI7XG5cbmlmIChjdXN0b21FbGVtZW50cy5nZXQoXCJ0dXJiby1mcmFtZVwiKSA9PT0gdW5kZWZpbmVkKSB7XG4gIGN1c3RvbUVsZW1lbnRzLmRlZmluZShcInR1cmJvLWZyYW1lXCIsIEZyYW1lRWxlbWVudCk7XG59XG5cbmlmIChjdXN0b21FbGVtZW50cy5nZXQoXCJ0dXJiby1zdHJlYW1cIikgPT09IHVuZGVmaW5lZCkge1xuICBjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJ0dXJiby1zdHJlYW1cIiwgU3RyZWFtRWxlbWVudCk7XG59XG5cbmlmIChjdXN0b21FbGVtZW50cy5nZXQoXCJ0dXJiby1zdHJlYW0tc291cmNlXCIpID09PSB1bmRlZmluZWQpIHtcbiAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwidHVyYm8tc3RyZWFtLXNvdXJjZVwiLCBTdHJlYW1Tb3VyY2VFbGVtZW50KTtcbn1cblxuKCgpID0+IHtcbiAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0O1xuICBpZiAoIWVsZW1lbnQpIHJldHVyblxuICBpZiAoZWxlbWVudC5oYXNBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLXN1cHByZXNzLXdhcm5pbmdcIikpIHJldHVyblxuXG4gIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gIHdoaWxlIChlbGVtZW50KSB7XG4gICAgaWYgKGVsZW1lbnQgPT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgcmV0dXJuIGNvbnNvbGUud2FybihcbiAgICAgICAgdW5pbmRlbnRgXG4gICAgICAgIFlvdSBhcmUgbG9hZGluZyBUdXJibyBmcm9tIGEgPHNjcmlwdD4gZWxlbWVudCBpbnNpZGUgdGhlIDxib2R5PiBlbGVtZW50LiBUaGlzIGlzIHByb2JhYmx5IG5vdCB3aGF0IHlvdSBtZWFudCB0byBkbyFcblxuICAgICAgICBMb2FkIHlvdXIgYXBwbGljYXRpb25cdTIwMTlzIEphdmFTY3JpcHQgYnVuZGxlIGluc2lkZSB0aGUgPGhlYWQ+IGVsZW1lbnQgaW5zdGVhZC4gPHNjcmlwdD4gZWxlbWVudHMgaW4gPGJvZHk+IGFyZSBldmFsdWF0ZWQgd2l0aCBlYWNoIHBhZ2UgY2hhbmdlLlxuXG4gICAgICAgIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWU6IGh0dHBzOi8vdHVyYm8uaG90d2lyZWQuZGV2L2hhbmRib29rL2J1aWxkaW5nI3dvcmtpbmctd2l0aC1zY3JpcHQtZWxlbWVudHNcblxuICAgICAgICBcdTIwMTRcdTIwMTRcbiAgICAgICAgU3VwcHJlc3MgdGhpcyB3YXJuaW5nIGJ5IGFkZGluZyBhIFwiZGF0YS10dXJiby1zdXBwcmVzcy13YXJuaW5nXCIgYXR0cmlidXRlIHRvOiAlc1xuICAgICAgYCxcbiAgICAgICAgZWxlbWVudC5vdXRlckhUTUxcbiAgICAgIClcbiAgICB9XG5cbiAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICB9XG59KSgpO1xuXG53aW5kb3cuVHVyYm8gPSB7IC4uLlR1cmJvLCBTdHJlYW1BY3Rpb25zIH07XG5zdGFydCgpO1xuXG5leHBvcnQgeyBGZXRjaEVuY3R5cGUsIEZldGNoTWV0aG9kLCBGZXRjaFJlcXVlc3QsIEZldGNoUmVzcG9uc2UsIEZyYW1lRWxlbWVudCwgRnJhbWVMb2FkaW5nU3R5bGUsIEZyYW1lUmVuZGVyZXIsIFBhZ2VSZW5kZXJlciwgUGFnZVNuYXBzaG90LCBTdHJlYW1BY3Rpb25zLCBTdHJlYW1FbGVtZW50LCBTdHJlYW1Tb3VyY2VFbGVtZW50LCBjYWNoZSwgY2xlYXJDYWNoZSwgY29uZmlnLCBjb25uZWN0U3RyZWFtU291cmNlLCBkaXNjb25uZWN0U3RyZWFtU291cmNlLCBmZXRjaFdpdGhUdXJib0hlYWRlcnMgYXMgZmV0Y2gsIGZldGNoRW5jdHlwZUZyb21TdHJpbmcsIGZldGNoTWV0aG9kRnJvbVN0cmluZywgaXNTYWZlLCBtb3JwaEJvZHlFbGVtZW50cywgbW9ycGhDaGlsZHJlbiwgbW9ycGhFbGVtZW50cywgbW9ycGhUdXJib0ZyYW1lRWxlbWVudHMsIG5hdmlnYXRvciQxIGFzIG5hdmlnYXRvciwgcmVnaXN0ZXJBZGFwdGVyLCByZW5kZXJTdHJlYW1NZXNzYWdlLCBzZXNzaW9uLCBzZXRDb25maXJtTWV0aG9kLCBzZXRGb3JtTW9kZSwgc2V0UHJvZ3Jlc3NCYXJEZWxheSwgc3RhcnQsIHZpc2l0IH07XG4iLCAibGV0IGNvbnN1bWVyXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDb25zdW1lcigpIHtcbiAgcmV0dXJuIGNvbnN1bWVyIHx8IHNldENvbnN1bWVyKGNyZWF0ZUNvbnN1bWVyKCkudGhlbihzZXRDb25zdW1lcikpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRDb25zdW1lcihuZXdDb25zdW1lcikge1xuICByZXR1cm4gY29uc3VtZXIgPSBuZXdDb25zdW1lclxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlQ29uc3VtZXIoKSB7XG4gIGNvbnN0IHsgY3JlYXRlQ29uc3VtZXIgfSA9IGF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImFjdGlvbmNhYmxlXCIgKi8gXCJAcmFpbHMvYWN0aW9uY2FibGUvc3JjXCIpXG4gIHJldHVybiBjcmVhdGVDb25zdW1lcigpXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzdWJzY3JpYmVUbyhjaGFubmVsLCBtaXhpbikge1xuICBjb25zdCB7IHN1YnNjcmlwdGlvbnMgfSA9IGF3YWl0IGdldENvbnN1bWVyKClcbiAgcmV0dXJuIHN1YnNjcmlwdGlvbnMuY3JlYXRlKGNoYW5uZWwsIG1peGluKVxufVxuIiwgIi8vIEJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS9uYXRoYW43L3NuYWtlaXplXG4vL1xuLy8gVGhpcyBzb2Z0d2FyZSBpcyByZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2U6XG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mXG4vLyB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluXG4vLyB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvXG4vLyB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZlxuLy8gdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLFxuLy8gc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbFxuLy8gY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuLy8gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1Ncbi8vIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUlxuLy8gQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSXG4vLyBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTlxuLy8gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHdhbGsgKG9iaikge1xuICAgIGlmICghb2JqIHx8IHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSByZXR1cm4gb2JqO1xuICAgIGlmIChvYmogaW5zdGFuY2VvZiBEYXRlIHx8IG9iaiBpbnN0YW5jZW9mIFJlZ0V4cCkgcmV0dXJuIG9iajtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSByZXR1cm4gb2JqLm1hcCh3YWxrKTtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7XG4gICAgICAgIHZhciBjYW1lbCA9IGtleVswXS50b0xvd2VyQ2FzZSgpICsga2V5LnNsaWNlKDEpLnJlcGxhY2UoLyhbQS1aXSspL2csIGZ1bmN0aW9uIChtLCB4KSB7XG4gICAgICAgICAgICByZXR1cm4gJ18nICsgeC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgYWNjW2NhbWVsXSA9IHdhbGsob2JqW2tleV0pO1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9KTtcbn07IiwgImltcG9ydCB7IGNvbm5lY3RTdHJlYW1Tb3VyY2UsIGRpc2Nvbm5lY3RTdHJlYW1Tb3VyY2UgfSBmcm9tIFwiQGhvdHdpcmVkL3R1cmJvXCJcbmltcG9ydCB7IHN1YnNjcmliZVRvIH0gZnJvbSBcIi4vY2FibGVcIlxuaW1wb3J0IHNuYWtlaXplIGZyb20gXCIuL3NuYWtlaXplXCJcblxuY2xhc3MgVHVyYm9DYWJsZVN0cmVhbVNvdXJjZUVsZW1lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIHN0YXRpYyBvYnNlcnZlZEF0dHJpYnV0ZXMgPSBbXCJjaGFubmVsXCIsIFwic2lnbmVkLXN0cmVhbS1uYW1lXCJdXG5cbiAgYXN5bmMgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgY29ubmVjdFN0cmVhbVNvdXJjZSh0aGlzKVxuICAgIHRoaXMuc3Vic2NyaXB0aW9uID0gYXdhaXQgc3Vic2NyaWJlVG8odGhpcy5jaGFubmVsLCB7XG4gICAgICByZWNlaXZlZDogdGhpcy5kaXNwYXRjaE1lc3NhZ2VFdmVudC5iaW5kKHRoaXMpLFxuICAgICAgY29ubmVjdGVkOiB0aGlzLnN1YnNjcmlwdGlvbkNvbm5lY3RlZC5iaW5kKHRoaXMpLFxuICAgICAgZGlzY29ubmVjdGVkOiB0aGlzLnN1YnNjcmlwdGlvbkRpc2Nvbm5lY3RlZC5iaW5kKHRoaXMpXG4gICAgfSlcbiAgfVxuXG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGRpc2Nvbm5lY3RTdHJlYW1Tb3VyY2UodGhpcylcbiAgICBpZiAodGhpcy5zdWJzY3JpcHRpb24pIHRoaXMuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKClcbiAgICB0aGlzLnN1YnNjcmlwdGlvbkRpc2Nvbm5lY3RlZCgpXG4gIH1cblxuICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soKSB7XG4gICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9uKSB7XG4gICAgICB0aGlzLmRpc2Nvbm5lY3RlZENhbGxiYWNrKClcbiAgICAgIHRoaXMuY29ubmVjdGVkQ2FsbGJhY2soKVxuICAgIH1cbiAgfVxuXG4gIGRpc3BhdGNoTWVzc2FnZUV2ZW50KGRhdGEpIHtcbiAgICBjb25zdCBldmVudCA9IG5ldyBNZXNzYWdlRXZlbnQoXCJtZXNzYWdlXCIsIHsgZGF0YSB9KVxuICAgIHJldHVybiB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpXG4gIH1cblxuICBzdWJzY3JpcHRpb25Db25uZWN0ZWQoKSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJjb25uZWN0ZWRcIiwgXCJcIilcbiAgfVxuXG4gIHN1YnNjcmlwdGlvbkRpc2Nvbm5lY3RlZCgpIHtcbiAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShcImNvbm5lY3RlZFwiKVxuICB9XG5cbiAgZ2V0IGNoYW5uZWwoKSB7XG4gICAgY29uc3QgY2hhbm5lbCA9IHRoaXMuZ2V0QXR0cmlidXRlKFwiY2hhbm5lbFwiKVxuICAgIGNvbnN0IHNpZ25lZF9zdHJlYW1fbmFtZSA9IHRoaXMuZ2V0QXR0cmlidXRlKFwic2lnbmVkLXN0cmVhbS1uYW1lXCIpXG4gICAgcmV0dXJuIHsgY2hhbm5lbCwgc2lnbmVkX3N0cmVhbV9uYW1lLCAuLi5zbmFrZWl6ZSh7IC4uLnRoaXMuZGF0YXNldCB9KSB9XG4gIH1cbn1cblxuXG5pZiAoY3VzdG9tRWxlbWVudHMuZ2V0KFwidHVyYm8tY2FibGUtc3RyZWFtLXNvdXJjZVwiKSA9PT0gdW5kZWZpbmVkKSB7XG4gIGN1c3RvbUVsZW1lbnRzLmRlZmluZShcInR1cmJvLWNhYmxlLXN0cmVhbS1zb3VyY2VcIiwgVHVyYm9DYWJsZVN0cmVhbVNvdXJjZUVsZW1lbnQpXG59XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIGVuY29kZU1ldGhvZEludG9SZXF1ZXN0Qm9keShldmVudCkge1xuICBpZiAoZXZlbnQudGFyZ2V0IGluc3RhbmNlb2YgSFRNTEZvcm1FbGVtZW50KSB7XG4gICAgY29uc3QgeyB0YXJnZXQ6IGZvcm0sIGRldGFpbDogeyBmZXRjaE9wdGlvbnMgfSB9ID0gZXZlbnRcblxuICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInR1cmJvOnN1Ym1pdC1zdGFydFwiLCAoeyBkZXRhaWw6IHsgZm9ybVN1Ym1pc3Npb246IHsgc3VibWl0dGVyIH0gfSB9KSA9PiB7XG4gICAgICBjb25zdCBib2R5ID0gaXNCb2R5SW5pdChmZXRjaE9wdGlvbnMuYm9keSkgPyBmZXRjaE9wdGlvbnMuYm9keSA6IG5ldyBVUkxTZWFyY2hQYXJhbXMoKVxuICAgICAgY29uc3QgbWV0aG9kID0gZGV0ZXJtaW5lRmV0Y2hNZXRob2Qoc3VibWl0dGVyLCBib2R5LCBmb3JtKVxuXG4gICAgICBpZiAoIS9nZXQvaS50ZXN0KG1ldGhvZCkpIHtcbiAgICAgICAgaWYgKC9wb3N0L2kudGVzdChtZXRob2QpKSB7XG4gICAgICAgICAgYm9keS5kZWxldGUoXCJfbWV0aG9kXCIpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYm9keS5zZXQoXCJfbWV0aG9kXCIsIG1ldGhvZClcbiAgICAgICAgfVxuXG4gICAgICAgIGZldGNoT3B0aW9ucy5tZXRob2QgPSBcInBvc3RcIlxuICAgICAgfVxuICAgIH0sIHsgb25jZTogdHJ1ZSB9KVxuICB9XG59XG5cbmZ1bmN0aW9uIGRldGVybWluZUZldGNoTWV0aG9kKHN1Ym1pdHRlciwgYm9keSwgZm9ybSkge1xuICBjb25zdCBmb3JtTWV0aG9kID0gZGV0ZXJtaW5lRm9ybU1ldGhvZChzdWJtaXR0ZXIpXG4gIGNvbnN0IG92ZXJyaWRlTWV0aG9kID0gYm9keS5nZXQoXCJfbWV0aG9kXCIpXG4gIGNvbnN0IG1ldGhvZCA9IGZvcm0uZ2V0QXR0cmlidXRlKFwibWV0aG9kXCIpIHx8IFwiZ2V0XCJcblxuICBpZiAodHlwZW9mIGZvcm1NZXRob2QgPT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiBmb3JtTWV0aG9kXG4gIH0gZWxzZSBpZiAodHlwZW9mIG92ZXJyaWRlTWV0aG9kID09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gb3ZlcnJpZGVNZXRob2RcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbWV0aG9kXG4gIH1cbn1cblxuZnVuY3Rpb24gZGV0ZXJtaW5lRm9ybU1ldGhvZChzdWJtaXR0ZXIpIHtcbiAgaWYgKHN1Ym1pdHRlciBpbnN0YW5jZW9mIEhUTUxCdXR0b25FbGVtZW50IHx8IHN1Ym1pdHRlciBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAvLyBSYWlscyA3IEFjdGlvblZpZXc6OkhlbHBlcnM6OkZvcm1CdWlsZGVyI2J1dHRvbiBtZXRob2QgaGFzIGFuIG92ZXJyaWRlXG4gICAgLy8gZm9yIGZvcm1tZXRob2QgaWYgdGhlIGJ1dHRvbiBkb2VzIG5vdCBoYXZlIG5hbWUgb3IgdmFsdWUgYXR0cmlidXRlc1xuICAgIC8vIHNldCwgd2hpY2ggaXMgdGhlIGRlZmF1bHQuIFRoaXMgbWVhbnMgdGhhdCBpZiB5b3UgdXNlIDwlPSBmLmJ1dHRvblxuICAgIC8vIGZvcm1tZXRob2Q6IDpkZWxldGUgJT4sIGl0IHdpbGwgZ2VuZXJhdGUgYSA8YnV0dG9uIG5hbWU9XCJfbWV0aG9kXCJcbiAgICAvLyB2YWx1ZT1cImRlbGV0ZVwiIGZvcm1tZXRob2Q9XCJwb3N0XCI+LiBUaGVyZWZvcmUsIGlmIHRoZSBzdWJtaXR0ZXIncyBuYW1lXG4gICAgLy8gaXMgYWxyZWFkeSBfbWV0aG9kLCBpdCdzIHZhbHVlIGF0dHJpYnV0ZSBhbHJlYWR5IGNvbnRhaW5zIHRoZSBkZXNpcmVkXG4gICAgLy8gbWV0aG9kLlxuICAgIGlmIChzdWJtaXR0ZXIubmFtZSA9PT0gJ19tZXRob2QnKSB7XG4gICAgICByZXR1cm4gc3VibWl0dGVyLnZhbHVlXG4gICAgfSBlbHNlIGlmIChzdWJtaXR0ZXIuaGFzQXR0cmlidXRlKFwiZm9ybW1ldGhvZFwiKSkge1xuICAgICAgcmV0dXJuIHN1Ym1pdHRlci5mb3JtTWV0aG9kXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBudWxsXG4gIH1cbn1cblxuZnVuY3Rpb24gaXNCb2R5SW5pdChib2R5KSB7XG4gIHJldHVybiBib2R5IGluc3RhbmNlb2YgRm9ybURhdGEgfHwgYm9keSBpbnN0YW5jZW9mIFVSTFNlYXJjaFBhcmFtc1xufVxuIiwgImltcG9ydCBcIi4vY2FibGVfc3RyZWFtX3NvdXJjZV9lbGVtZW50XCJcblxuaW1wb3J0ICogYXMgVHVyYm8gZnJvbSBcIkBob3R3aXJlZC90dXJib1wiXG5leHBvcnQgeyBUdXJibyB9XG5cbmltcG9ydCAqIGFzIGNhYmxlIGZyb20gXCIuL2NhYmxlXCJcbmV4cG9ydCB7IGNhYmxlIH1cblxuaW1wb3J0IHsgZW5jb2RlTWV0aG9kSW50b1JlcXVlc3RCb2R5IH0gZnJvbSBcIi4vZmV0Y2hfcmVxdWVzdHNcIlxuXG53aW5kb3cuVHVyYm8gPSBUdXJib1xuXG5hZGRFdmVudExpc3RlbmVyKFwidHVyYm86YmVmb3JlLWZldGNoLXJlcXVlc3RcIiwgZW5jb2RlTWV0aG9kSW50b1JlcXVlc3RCb2R5KVxuIiwgIi8qXG5TdGltdWx1cyAzLjIuMVxuQ29weXJpZ2h0IFx1MDBBOSAyMDIzIEJhc2VjYW1wLCBMTENcbiAqL1xuY2xhc3MgRXZlbnRMaXN0ZW5lciB7XG4gICAgY29uc3RydWN0b3IoZXZlbnRUYXJnZXQsIGV2ZW50TmFtZSwgZXZlbnRPcHRpb25zKSB7XG4gICAgICAgIHRoaXMuZXZlbnRUYXJnZXQgPSBldmVudFRhcmdldDtcbiAgICAgICAgdGhpcy5ldmVudE5hbWUgPSBldmVudE5hbWU7XG4gICAgICAgIHRoaXMuZXZlbnRPcHRpb25zID0gZXZlbnRPcHRpb25zO1xuICAgICAgICB0aGlzLnVub3JkZXJlZEJpbmRpbmdzID0gbmV3IFNldCgpO1xuICAgIH1cbiAgICBjb25uZWN0KCkge1xuICAgICAgICB0aGlzLmV2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIodGhpcy5ldmVudE5hbWUsIHRoaXMsIHRoaXMuZXZlbnRPcHRpb25zKTtcbiAgICB9XG4gICAgZGlzY29ubmVjdCgpIHtcbiAgICAgICAgdGhpcy5ldmVudFRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuZXZlbnROYW1lLCB0aGlzLCB0aGlzLmV2ZW50T3B0aW9ucyk7XG4gICAgfVxuICAgIGJpbmRpbmdDb25uZWN0ZWQoYmluZGluZykge1xuICAgICAgICB0aGlzLnVub3JkZXJlZEJpbmRpbmdzLmFkZChiaW5kaW5nKTtcbiAgICB9XG4gICAgYmluZGluZ0Rpc2Nvbm5lY3RlZChiaW5kaW5nKSB7XG4gICAgICAgIHRoaXMudW5vcmRlcmVkQmluZGluZ3MuZGVsZXRlKGJpbmRpbmcpO1xuICAgIH1cbiAgICBoYW5kbGVFdmVudChldmVudCkge1xuICAgICAgICBjb25zdCBleHRlbmRlZEV2ZW50ID0gZXh0ZW5kRXZlbnQoZXZlbnQpO1xuICAgICAgICBmb3IgKGNvbnN0IGJpbmRpbmcgb2YgdGhpcy5iaW5kaW5ncykge1xuICAgICAgICAgICAgaWYgKGV4dGVuZGVkRXZlbnQuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBiaW5kaW5nLmhhbmRsZUV2ZW50KGV4dGVuZGVkRXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGhhc0JpbmRpbmdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bm9yZGVyZWRCaW5kaW5ncy5zaXplID4gMDtcbiAgICB9XG4gICAgZ2V0IGJpbmRpbmdzKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnVub3JkZXJlZEJpbmRpbmdzKS5zb3J0KChsZWZ0LCByaWdodCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbGVmdEluZGV4ID0gbGVmdC5pbmRleCwgcmlnaHRJbmRleCA9IHJpZ2h0LmluZGV4O1xuICAgICAgICAgICAgcmV0dXJuIGxlZnRJbmRleCA8IHJpZ2h0SW5kZXggPyAtMSA6IGxlZnRJbmRleCA+IHJpZ2h0SW5kZXggPyAxIDogMDtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZnVuY3Rpb24gZXh0ZW5kRXZlbnQoZXZlbnQpIHtcbiAgICBpZiAoXCJpbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWRcIiBpbiBldmVudCkge1xuICAgICAgICByZXR1cm4gZXZlbnQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCB7IHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiB9ID0gZXZlbnQ7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKGV2ZW50LCB7XG4gICAgICAgICAgICBpbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6IGZhbHNlLFxuICAgICAgICAgICAgc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24uY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuY2xhc3MgRGlzcGF0Y2hlciB7XG4gICAgY29uc3RydWN0b3IoYXBwbGljYXRpb24pIHtcbiAgICAgICAgdGhpcy5hcHBsaWNhdGlvbiA9IGFwcGxpY2F0aW9uO1xuICAgICAgICB0aGlzLmV2ZW50TGlzdGVuZXJNYXBzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5ldmVudExpc3RlbmVycy5mb3JFYWNoKChldmVudExpc3RlbmVyKSA9PiBldmVudExpc3RlbmVyLmNvbm5lY3QoKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzLmZvckVhY2goKGV2ZW50TGlzdGVuZXIpID0+IGV2ZW50TGlzdGVuZXIuZGlzY29ubmVjdCgpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZXZlbnRMaXN0ZW5lck1hcHMudmFsdWVzKCkpLnJlZHVjZSgobGlzdGVuZXJzLCBtYXApID0+IGxpc3RlbmVycy5jb25jYXQoQXJyYXkuZnJvbShtYXAudmFsdWVzKCkpKSwgW10pO1xuICAgIH1cbiAgICBiaW5kaW5nQ29ubmVjdGVkKGJpbmRpbmcpIHtcbiAgICAgICAgdGhpcy5mZXRjaEV2ZW50TGlzdGVuZXJGb3JCaW5kaW5nKGJpbmRpbmcpLmJpbmRpbmdDb25uZWN0ZWQoYmluZGluZyk7XG4gICAgfVxuICAgIGJpbmRpbmdEaXNjb25uZWN0ZWQoYmluZGluZywgY2xlYXJFdmVudExpc3RlbmVycyA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuZmV0Y2hFdmVudExpc3RlbmVyRm9yQmluZGluZyhiaW5kaW5nKS5iaW5kaW5nRGlzY29ubmVjdGVkKGJpbmRpbmcpO1xuICAgICAgICBpZiAoY2xlYXJFdmVudExpc3RlbmVycylcbiAgICAgICAgICAgIHRoaXMuY2xlYXJFdmVudExpc3RlbmVyc0ZvckJpbmRpbmcoYmluZGluZyk7XG4gICAgfVxuICAgIGhhbmRsZUVycm9yKGVycm9yLCBtZXNzYWdlLCBkZXRhaWwgPSB7fSkge1xuICAgICAgICB0aGlzLmFwcGxpY2F0aW9uLmhhbmRsZUVycm9yKGVycm9yLCBgRXJyb3IgJHttZXNzYWdlfWAsIGRldGFpbCk7XG4gICAgfVxuICAgIGNsZWFyRXZlbnRMaXN0ZW5lcnNGb3JCaW5kaW5nKGJpbmRpbmcpIHtcbiAgICAgICAgY29uc3QgZXZlbnRMaXN0ZW5lciA9IHRoaXMuZmV0Y2hFdmVudExpc3RlbmVyRm9yQmluZGluZyhiaW5kaW5nKTtcbiAgICAgICAgaWYgKCFldmVudExpc3RlbmVyLmhhc0JpbmRpbmdzKCkpIHtcbiAgICAgICAgICAgIGV2ZW50TGlzdGVuZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVNYXBwZWRFdmVudExpc3RlbmVyRm9yKGJpbmRpbmcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZU1hcHBlZEV2ZW50TGlzdGVuZXJGb3IoYmluZGluZykge1xuICAgICAgICBjb25zdCB7IGV2ZW50VGFyZ2V0LCBldmVudE5hbWUsIGV2ZW50T3B0aW9ucyB9ID0gYmluZGluZztcbiAgICAgICAgY29uc3QgZXZlbnRMaXN0ZW5lck1hcCA9IHRoaXMuZmV0Y2hFdmVudExpc3RlbmVyTWFwRm9yRXZlbnRUYXJnZXQoZXZlbnRUYXJnZXQpO1xuICAgICAgICBjb25zdCBjYWNoZUtleSA9IHRoaXMuY2FjaGVLZXkoZXZlbnROYW1lLCBldmVudE9wdGlvbnMpO1xuICAgICAgICBldmVudExpc3RlbmVyTWFwLmRlbGV0ZShjYWNoZUtleSk7XG4gICAgICAgIGlmIChldmVudExpc3RlbmVyTWFwLnNpemUgPT0gMClcbiAgICAgICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lck1hcHMuZGVsZXRlKGV2ZW50VGFyZ2V0KTtcbiAgICB9XG4gICAgZmV0Y2hFdmVudExpc3RlbmVyRm9yQmluZGluZyhiaW5kaW5nKSB7XG4gICAgICAgIGNvbnN0IHsgZXZlbnRUYXJnZXQsIGV2ZW50TmFtZSwgZXZlbnRPcHRpb25zIH0gPSBiaW5kaW5nO1xuICAgICAgICByZXR1cm4gdGhpcy5mZXRjaEV2ZW50TGlzdGVuZXIoZXZlbnRUYXJnZXQsIGV2ZW50TmFtZSwgZXZlbnRPcHRpb25zKTtcbiAgICB9XG4gICAgZmV0Y2hFdmVudExpc3RlbmVyKGV2ZW50VGFyZ2V0LCBldmVudE5hbWUsIGV2ZW50T3B0aW9ucykge1xuICAgICAgICBjb25zdCBldmVudExpc3RlbmVyTWFwID0gdGhpcy5mZXRjaEV2ZW50TGlzdGVuZXJNYXBGb3JFdmVudFRhcmdldChldmVudFRhcmdldCk7XG4gICAgICAgIGNvbnN0IGNhY2hlS2V5ID0gdGhpcy5jYWNoZUtleShldmVudE5hbWUsIGV2ZW50T3B0aW9ucyk7XG4gICAgICAgIGxldCBldmVudExpc3RlbmVyID0gZXZlbnRMaXN0ZW5lck1hcC5nZXQoY2FjaGVLZXkpO1xuICAgICAgICBpZiAoIWV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICAgIGV2ZW50TGlzdGVuZXIgPSB0aGlzLmNyZWF0ZUV2ZW50TGlzdGVuZXIoZXZlbnRUYXJnZXQsIGV2ZW50TmFtZSwgZXZlbnRPcHRpb25zKTtcbiAgICAgICAgICAgIGV2ZW50TGlzdGVuZXJNYXAuc2V0KGNhY2hlS2V5LCBldmVudExpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXZlbnRMaXN0ZW5lcjtcbiAgICB9XG4gICAgY3JlYXRlRXZlbnRMaXN0ZW5lcihldmVudFRhcmdldCwgZXZlbnROYW1lLCBldmVudE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgZXZlbnRMaXN0ZW5lciA9IG5ldyBFdmVudExpc3RlbmVyKGV2ZW50VGFyZ2V0LCBldmVudE5hbWUsIGV2ZW50T3B0aW9ucyk7XG4gICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIGV2ZW50TGlzdGVuZXIuY29ubmVjdCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBldmVudExpc3RlbmVyO1xuICAgIH1cbiAgICBmZXRjaEV2ZW50TGlzdGVuZXJNYXBGb3JFdmVudFRhcmdldChldmVudFRhcmdldCkge1xuICAgICAgICBsZXQgZXZlbnRMaXN0ZW5lck1hcCA9IHRoaXMuZXZlbnRMaXN0ZW5lck1hcHMuZ2V0KGV2ZW50VGFyZ2V0KTtcbiAgICAgICAgaWYgKCFldmVudExpc3RlbmVyTWFwKSB7XG4gICAgICAgICAgICBldmVudExpc3RlbmVyTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgdGhpcy5ldmVudExpc3RlbmVyTWFwcy5zZXQoZXZlbnRUYXJnZXQsIGV2ZW50TGlzdGVuZXJNYXApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBldmVudExpc3RlbmVyTWFwO1xuICAgIH1cbiAgICBjYWNoZUtleShldmVudE5hbWUsIGV2ZW50T3B0aW9ucykge1xuICAgICAgICBjb25zdCBwYXJ0cyA9IFtldmVudE5hbWVdO1xuICAgICAgICBPYmplY3Qua2V5cyhldmVudE9wdGlvbnMpXG4gICAgICAgICAgICAuc29ydCgpXG4gICAgICAgICAgICAuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBwYXJ0cy5wdXNoKGAke2V2ZW50T3B0aW9uc1trZXldID8gXCJcIiA6IFwiIVwifSR7a2V5fWApO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHBhcnRzLmpvaW4oXCI6XCIpO1xuICAgIH1cbn1cblxuY29uc3QgZGVmYXVsdEFjdGlvbkRlc2NyaXB0b3JGaWx0ZXJzID0ge1xuICAgIHN0b3AoeyBldmVudCwgdmFsdWUgfSkge1xuICAgICAgICBpZiAodmFsdWUpXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBwcmV2ZW50KHsgZXZlbnQsIHZhbHVlIH0pIHtcbiAgICAgICAgaWYgKHZhbHVlKVxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBzZWxmKHsgZXZlbnQsIHZhbHVlLCBlbGVtZW50IH0pIHtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudCA9PT0gZXZlbnQudGFyZ2V0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9LFxufTtcbmNvbnN0IGRlc2NyaXB0b3JQYXR0ZXJuID0gL14oPzooPzooW14uXSs/KVxcKyk/KC4rPykoPzpcXC4oLis/KSk/KD86QCh3aW5kb3d8ZG9jdW1lbnQpKT8tPik/KC4rPykoPzojKFteOl0rPykpKD86OiguKykpPyQvO1xuZnVuY3Rpb24gcGFyc2VBY3Rpb25EZXNjcmlwdG9yU3RyaW5nKGRlc2NyaXB0b3JTdHJpbmcpIHtcbiAgICBjb25zdCBzb3VyY2UgPSBkZXNjcmlwdG9yU3RyaW5nLnRyaW0oKTtcbiAgICBjb25zdCBtYXRjaGVzID0gc291cmNlLm1hdGNoKGRlc2NyaXB0b3JQYXR0ZXJuKSB8fCBbXTtcbiAgICBsZXQgZXZlbnROYW1lID0gbWF0Y2hlc1syXTtcbiAgICBsZXQga2V5RmlsdGVyID0gbWF0Y2hlc1szXTtcbiAgICBpZiAoa2V5RmlsdGVyICYmICFbXCJrZXlkb3duXCIsIFwia2V5dXBcIiwgXCJrZXlwcmVzc1wiXS5pbmNsdWRlcyhldmVudE5hbWUpKSB7XG4gICAgICAgIGV2ZW50TmFtZSArPSBgLiR7a2V5RmlsdGVyfWA7XG4gICAgICAgIGtleUZpbHRlciA9IFwiXCI7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGV2ZW50VGFyZ2V0OiBwYXJzZUV2ZW50VGFyZ2V0KG1hdGNoZXNbNF0pLFxuICAgICAgICBldmVudE5hbWUsXG4gICAgICAgIGV2ZW50T3B0aW9uczogbWF0Y2hlc1s3XSA/IHBhcnNlRXZlbnRPcHRpb25zKG1hdGNoZXNbN10pIDoge30sXG4gICAgICAgIGlkZW50aWZpZXI6IG1hdGNoZXNbNV0sXG4gICAgICAgIG1ldGhvZE5hbWU6IG1hdGNoZXNbNl0sXG4gICAgICAgIGtleUZpbHRlcjogbWF0Y2hlc1sxXSB8fCBrZXlGaWx0ZXIsXG4gICAgfTtcbn1cbmZ1bmN0aW9uIHBhcnNlRXZlbnRUYXJnZXQoZXZlbnRUYXJnZXROYW1lKSB7XG4gICAgaWYgKGV2ZW50VGFyZ2V0TmFtZSA9PSBcIndpbmRvd1wiKSB7XG4gICAgICAgIHJldHVybiB3aW5kb3c7XG4gICAgfVxuICAgIGVsc2UgaWYgKGV2ZW50VGFyZ2V0TmFtZSA9PSBcImRvY3VtZW50XCIpIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50O1xuICAgIH1cbn1cbmZ1bmN0aW9uIHBhcnNlRXZlbnRPcHRpb25zKGV2ZW50T3B0aW9ucykge1xuICAgIHJldHVybiBldmVudE9wdGlvbnNcbiAgICAgICAgLnNwbGl0KFwiOlwiKVxuICAgICAgICAucmVkdWNlKChvcHRpb25zLCB0b2tlbikgPT4gT2JqZWN0LmFzc2lnbihvcHRpb25zLCB7IFt0b2tlbi5yZXBsYWNlKC9eIS8sIFwiXCIpXTogIS9eIS8udGVzdCh0b2tlbikgfSksIHt9KTtcbn1cbmZ1bmN0aW9uIHN0cmluZ2lmeUV2ZW50VGFyZ2V0KGV2ZW50VGFyZ2V0KSB7XG4gICAgaWYgKGV2ZW50VGFyZ2V0ID09IHdpbmRvdykge1xuICAgICAgICByZXR1cm4gXCJ3aW5kb3dcIjtcbiAgICB9XG4gICAgZWxzZSBpZiAoZXZlbnRUYXJnZXQgPT0gZG9jdW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIFwiZG9jdW1lbnRcIjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNhbWVsaXplKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoLyg/OltfLV0pKFthLXowLTldKS9nLCAoXywgY2hhcikgPT4gY2hhci50b1VwcGVyQ2FzZSgpKTtcbn1cbmZ1bmN0aW9uIG5hbWVzcGFjZUNhbWVsaXplKHZhbHVlKSB7XG4gICAgcmV0dXJuIGNhbWVsaXplKHZhbHVlLnJlcGxhY2UoLy0tL2csIFwiLVwiKS5yZXBsYWNlKC9fXy9nLCBcIl9cIikpO1xufVxuZnVuY3Rpb24gY2FwaXRhbGl6ZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHZhbHVlLnNsaWNlKDEpO1xufVxuZnVuY3Rpb24gZGFzaGVyaXplKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoLyhbQS1aXSkvZywgKF8sIGNoYXIpID0+IGAtJHtjaGFyLnRvTG93ZXJDYXNlKCl9YCk7XG59XG5mdW5jdGlvbiB0b2tlbml6ZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZS5tYXRjaCgvW15cXHNdKy9nKSB8fCBbXTtcbn1cblxuZnVuY3Rpb24gaXNTb21ldGhpbmcob2JqZWN0KSB7XG4gICAgcmV0dXJuIG9iamVjdCAhPT0gbnVsbCAmJiBvYmplY3QgIT09IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGhhc1Byb3BlcnR5KG9iamVjdCwgcHJvcGVydHkpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpO1xufVxuXG5jb25zdCBhbGxNb2RpZmllcnMgPSBbXCJtZXRhXCIsIFwiY3RybFwiLCBcImFsdFwiLCBcInNoaWZ0XCJdO1xuY2xhc3MgQWN0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBpbmRleCwgZGVzY3JpcHRvciwgc2NoZW1hKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgICAgICAgdGhpcy5ldmVudFRhcmdldCA9IGRlc2NyaXB0b3IuZXZlbnRUYXJnZXQgfHwgZWxlbWVudDtcbiAgICAgICAgdGhpcy5ldmVudE5hbWUgPSBkZXNjcmlwdG9yLmV2ZW50TmFtZSB8fCBnZXREZWZhdWx0RXZlbnROYW1lRm9yRWxlbWVudChlbGVtZW50KSB8fCBlcnJvcihcIm1pc3NpbmcgZXZlbnQgbmFtZVwiKTtcbiAgICAgICAgdGhpcy5ldmVudE9wdGlvbnMgPSBkZXNjcmlwdG9yLmV2ZW50T3B0aW9ucyB8fCB7fTtcbiAgICAgICAgdGhpcy5pZGVudGlmaWVyID0gZGVzY3JpcHRvci5pZGVudGlmaWVyIHx8IGVycm9yKFwibWlzc2luZyBpZGVudGlmaWVyXCIpO1xuICAgICAgICB0aGlzLm1ldGhvZE5hbWUgPSBkZXNjcmlwdG9yLm1ldGhvZE5hbWUgfHwgZXJyb3IoXCJtaXNzaW5nIG1ldGhvZCBuYW1lXCIpO1xuICAgICAgICB0aGlzLmtleUZpbHRlciA9IGRlc2NyaXB0b3Iua2V5RmlsdGVyIHx8IFwiXCI7XG4gICAgICAgIHRoaXMuc2NoZW1hID0gc2NoZW1hO1xuICAgIH1cbiAgICBzdGF0aWMgZm9yVG9rZW4odG9rZW4sIHNjaGVtYSkge1xuICAgICAgICByZXR1cm4gbmV3IHRoaXModG9rZW4uZWxlbWVudCwgdG9rZW4uaW5kZXgsIHBhcnNlQWN0aW9uRGVzY3JpcHRvclN0cmluZyh0b2tlbi5jb250ZW50KSwgc2NoZW1hKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50RmlsdGVyID0gdGhpcy5rZXlGaWx0ZXIgPyBgLiR7dGhpcy5rZXlGaWx0ZXJ9YCA6IFwiXCI7XG4gICAgICAgIGNvbnN0IGV2ZW50VGFyZ2V0ID0gdGhpcy5ldmVudFRhcmdldE5hbWUgPyBgQCR7dGhpcy5ldmVudFRhcmdldE5hbWV9YCA6IFwiXCI7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmV2ZW50TmFtZX0ke2V2ZW50RmlsdGVyfSR7ZXZlbnRUYXJnZXR9LT4ke3RoaXMuaWRlbnRpZmllcn0jJHt0aGlzLm1ldGhvZE5hbWV9YDtcbiAgICB9XG4gICAgc2hvdWxkSWdub3JlS2V5Ym9hcmRFdmVudChldmVudCkge1xuICAgICAgICBpZiAoIXRoaXMua2V5RmlsdGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmlsdGVycyA9IHRoaXMua2V5RmlsdGVyLnNwbGl0KFwiK1wiKTtcbiAgICAgICAgaWYgKHRoaXMua2V5RmlsdGVyRGlzc2F0aXNmaWVkKGV2ZW50LCBmaWx0ZXJzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhbmRhcmRGaWx0ZXIgPSBmaWx0ZXJzLmZpbHRlcigoa2V5KSA9PiAhYWxsTW9kaWZpZXJzLmluY2x1ZGVzKGtleSkpWzBdO1xuICAgICAgICBpZiAoIXN0YW5kYXJkRmlsdGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFoYXNQcm9wZXJ0eSh0aGlzLmtleU1hcHBpbmdzLCBzdGFuZGFyZEZpbHRlcikpIHtcbiAgICAgICAgICAgIGVycm9yKGBjb250YWlucyB1bmtub3duIGtleSBmaWx0ZXI6ICR7dGhpcy5rZXlGaWx0ZXJ9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMua2V5TWFwcGluZ3Nbc3RhbmRhcmRGaWx0ZXJdLnRvTG93ZXJDYXNlKCkgIT09IGV2ZW50LmtleS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cbiAgICBzaG91bGRJZ25vcmVNb3VzZUV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGlmICghdGhpcy5rZXlGaWx0ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaWx0ZXJzID0gW3RoaXMua2V5RmlsdGVyXTtcbiAgICAgICAgaWYgKHRoaXMua2V5RmlsdGVyRGlzc2F0aXNmaWVkKGV2ZW50LCBmaWx0ZXJzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgcGFyYW1zKCkge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSB7fTtcbiAgICAgICAgY29uc3QgcGF0dGVybiA9IG5ldyBSZWdFeHAoYF5kYXRhLSR7dGhpcy5pZGVudGlmaWVyfS0oLispLXBhcmFtJGAsIFwiaVwiKTtcbiAgICAgICAgZm9yIChjb25zdCB7IG5hbWUsIHZhbHVlIH0gb2YgQXJyYXkuZnJvbSh0aGlzLmVsZW1lbnQuYXR0cmlidXRlcykpIHtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gbmFtZS5tYXRjaChwYXR0ZXJuKTtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IG1hdGNoICYmIG1hdGNoWzFdO1xuICAgICAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgICAgICAgIHBhcmFtc1tjYW1lbGl6ZShrZXkpXSA9IHR5cGVjYXN0KHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyYW1zO1xuICAgIH1cbiAgICBnZXQgZXZlbnRUYXJnZXROYW1lKCkge1xuICAgICAgICByZXR1cm4gc3RyaW5naWZ5RXZlbnRUYXJnZXQodGhpcy5ldmVudFRhcmdldCk7XG4gICAgfVxuICAgIGdldCBrZXlNYXBwaW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NoZW1hLmtleU1hcHBpbmdzO1xuICAgIH1cbiAgICBrZXlGaWx0ZXJEaXNzYXRpc2ZpZWQoZXZlbnQsIGZpbHRlcnMpIHtcbiAgICAgICAgY29uc3QgW21ldGEsIGN0cmwsIGFsdCwgc2hpZnRdID0gYWxsTW9kaWZpZXJzLm1hcCgobW9kaWZpZXIpID0+IGZpbHRlcnMuaW5jbHVkZXMobW9kaWZpZXIpKTtcbiAgICAgICAgcmV0dXJuIGV2ZW50Lm1ldGFLZXkgIT09IG1ldGEgfHwgZXZlbnQuY3RybEtleSAhPT0gY3RybCB8fCBldmVudC5hbHRLZXkgIT09IGFsdCB8fCBldmVudC5zaGlmdEtleSAhPT0gc2hpZnQ7XG4gICAgfVxufVxuY29uc3QgZGVmYXVsdEV2ZW50TmFtZXMgPSB7XG4gICAgYTogKCkgPT4gXCJjbGlja1wiLFxuICAgIGJ1dHRvbjogKCkgPT4gXCJjbGlja1wiLFxuICAgIGZvcm06ICgpID0+IFwic3VibWl0XCIsXG4gICAgZGV0YWlsczogKCkgPT4gXCJ0b2dnbGVcIixcbiAgICBpbnB1dDogKGUpID0+IChlLmdldEF0dHJpYnV0ZShcInR5cGVcIikgPT0gXCJzdWJtaXRcIiA/IFwiY2xpY2tcIiA6IFwiaW5wdXRcIiksXG4gICAgc2VsZWN0OiAoKSA9PiBcImNoYW5nZVwiLFxuICAgIHRleHRhcmVhOiAoKSA9PiBcImlucHV0XCIsXG59O1xuZnVuY3Rpb24gZ2V0RGVmYXVsdEV2ZW50TmFtZUZvckVsZW1lbnQoZWxlbWVudCkge1xuICAgIGNvbnN0IHRhZ05hbWUgPSBlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAodGFnTmFtZSBpbiBkZWZhdWx0RXZlbnROYW1lcykge1xuICAgICAgICByZXR1cm4gZGVmYXVsdEV2ZW50TmFtZXNbdGFnTmFtZV0oZWxlbWVudCk7XG4gICAgfVxufVxuZnVuY3Rpb24gZXJyb3IobWVzc2FnZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbn1cbmZ1bmN0aW9uIHR5cGVjYXN0KHZhbHVlKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpO1xuICAgIH1cbiAgICBjYXRjaCAob19PKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG59XG5cbmNsYXNzIEJpbmRpbmcge1xuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQsIGFjdGlvbikge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLmFjdGlvbiA9IGFjdGlvbjtcbiAgICB9XG4gICAgZ2V0IGluZGV4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hY3Rpb24uaW5kZXg7XG4gICAgfVxuICAgIGdldCBldmVudFRhcmdldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWN0aW9uLmV2ZW50VGFyZ2V0O1xuICAgIH1cbiAgICBnZXQgZXZlbnRPcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hY3Rpb24uZXZlbnRPcHRpb25zO1xuICAgIH1cbiAgICBnZXQgaWRlbnRpZmllcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5pZGVudGlmaWVyO1xuICAgIH1cbiAgICBoYW5kbGVFdmVudChldmVudCkge1xuICAgICAgICBjb25zdCBhY3Rpb25FdmVudCA9IHRoaXMucHJlcGFyZUFjdGlvbkV2ZW50KGV2ZW50KTtcbiAgICAgICAgaWYgKHRoaXMud2lsbEJlSW52b2tlZEJ5RXZlbnQoZXZlbnQpICYmIHRoaXMuYXBwbHlFdmVudE1vZGlmaWVycyhhY3Rpb25FdmVudCkpIHtcbiAgICAgICAgICAgIHRoaXMuaW52b2tlV2l0aEV2ZW50KGFjdGlvbkV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZXZlbnROYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hY3Rpb24uZXZlbnROYW1lO1xuICAgIH1cbiAgICBnZXQgbWV0aG9kKCkge1xuICAgICAgICBjb25zdCBtZXRob2QgPSB0aGlzLmNvbnRyb2xsZXJbdGhpcy5tZXRob2ROYW1lXTtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXRob2QgPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICByZXR1cm4gbWV0aG9kO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQWN0aW9uIFwiJHt0aGlzLmFjdGlvbn1cIiByZWZlcmVuY2VzIHVuZGVmaW5lZCBtZXRob2QgXCIke3RoaXMubWV0aG9kTmFtZX1cImApO1xuICAgIH1cbiAgICBhcHBseUV2ZW50TW9kaWZpZXJzKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHsgZWxlbWVudCB9ID0gdGhpcy5hY3Rpb247XG4gICAgICAgIGNvbnN0IHsgYWN0aW9uRGVzY3JpcHRvckZpbHRlcnMgfSA9IHRoaXMuY29udGV4dC5hcHBsaWNhdGlvbjtcbiAgICAgICAgY29uc3QgeyBjb250cm9sbGVyIH0gPSB0aGlzLmNvbnRleHQ7XG4gICAgICAgIGxldCBwYXNzZXMgPSB0cnVlO1xuICAgICAgICBmb3IgKGNvbnN0IFtuYW1lLCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5ldmVudE9wdGlvbnMpKSB7XG4gICAgICAgICAgICBpZiAobmFtZSBpbiBhY3Rpb25EZXNjcmlwdG9yRmlsdGVycykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlciA9IGFjdGlvbkRlc2NyaXB0b3JGaWx0ZXJzW25hbWVdO1xuICAgICAgICAgICAgICAgIHBhc3NlcyA9IHBhc3NlcyAmJiBmaWx0ZXIoeyBuYW1lLCB2YWx1ZSwgZXZlbnQsIGVsZW1lbnQsIGNvbnRyb2xsZXIgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFzc2VzO1xuICAgIH1cbiAgICBwcmVwYXJlQWN0aW9uRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oZXZlbnQsIHsgcGFyYW1zOiB0aGlzLmFjdGlvbi5wYXJhbXMgfSk7XG4gICAgfVxuICAgIGludm9rZVdpdGhFdmVudChldmVudCkge1xuICAgICAgICBjb25zdCB7IHRhcmdldCwgY3VycmVudFRhcmdldCB9ID0gZXZlbnQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLm1ldGhvZC5jYWxsKHRoaXMuY29udHJvbGxlciwgZXZlbnQpO1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmxvZ0RlYnVnQWN0aXZpdHkodGhpcy5tZXRob2ROYW1lLCB7IGV2ZW50LCB0YXJnZXQsIGN1cnJlbnRUYXJnZXQsIGFjdGlvbjogdGhpcy5tZXRob2ROYW1lIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc3QgeyBpZGVudGlmaWVyLCBjb250cm9sbGVyLCBlbGVtZW50LCBpbmRleCB9ID0gdGhpcztcbiAgICAgICAgICAgIGNvbnN0IGRldGFpbCA9IHsgaWRlbnRpZmllciwgY29udHJvbGxlciwgZWxlbWVudCwgaW5kZXgsIGV2ZW50IH07XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuaGFuZGxlRXJyb3IoZXJyb3IsIGBpbnZva2luZyBhY3Rpb24gXCIke3RoaXMuYWN0aW9ufVwiYCwgZGV0YWlsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3aWxsQmVJbnZva2VkQnlFdmVudChldmVudCkge1xuICAgICAgICBjb25zdCBldmVudFRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgaWYgKGV2ZW50IGluc3RhbmNlb2YgS2V5Ym9hcmRFdmVudCAmJiB0aGlzLmFjdGlvbi5zaG91bGRJZ25vcmVLZXlib2FyZEV2ZW50KGV2ZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudCBpbnN0YW5jZW9mIE1vdXNlRXZlbnQgJiYgdGhpcy5hY3Rpb24uc2hvdWxkSWdub3JlTW91c2VFdmVudChldmVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5lbGVtZW50ID09PSBldmVudFRhcmdldCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXZlbnRUYXJnZXQgaW5zdGFuY2VvZiBFbGVtZW50ICYmIHRoaXMuZWxlbWVudC5jb250YWlucyhldmVudFRhcmdldCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNjb3BlLmNvbnRhaW5zRWxlbWVudChldmVudFRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zY29wZS5jb250YWluc0VsZW1lbnQodGhpcy5hY3Rpb24uZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGNvbnRyb2xsZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQuY29udHJvbGxlcjtcbiAgICB9XG4gICAgZ2V0IG1ldGhvZE5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjdGlvbi5tZXRob2ROYW1lO1xuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGUuZWxlbWVudDtcbiAgICB9XG4gICAgZ2V0IHNjb3BlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0LnNjb3BlO1xuICAgIH1cbn1cblxuY2xhc3MgRWxlbWVudE9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBkZWxlZ2F0ZSkge1xuICAgICAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXJJbml0ID0geyBhdHRyaWJ1dGVzOiB0cnVlLCBjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IHRydWUgfTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICAgICAgdGhpcy5lbGVtZW50cyA9IG5ldyBTZXQoKTtcbiAgICAgICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9ucykgPT4gdGhpcy5wcm9jZXNzTXV0YXRpb25zKG11dGF0aW9ucykpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmVsZW1lbnQsIHRoaXMubXV0YXRpb25PYnNlcnZlckluaXQpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcGF1c2UoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgICAgICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIGlmICghdGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmVsZW1lbnQsIHRoaXMubXV0YXRpb25PYnNlcnZlckluaXQpO1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXIudGFrZVJlY29yZHMoKTtcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25PYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWZyZXNoKCkge1xuICAgICAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICBjb25zdCBtYXRjaGVzID0gbmV3IFNldCh0aGlzLm1hdGNoRWxlbWVudHNJblRyZWUoKSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgQXJyYXkuZnJvbSh0aGlzLmVsZW1lbnRzKSkge1xuICAgICAgICAgICAgICAgIGlmICghbWF0Y2hlcy5oYXMoZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVFbGVtZW50KGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBBcnJheS5mcm9tKG1hdGNoZXMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRFbGVtZW50KGVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHByb2Nlc3NNdXRhdGlvbnMobXV0YXRpb25zKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbXV0YXRpb24gb2YgbXV0YXRpb25zKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzTXV0YXRpb24obXV0YXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHByb2Nlc3NNdXRhdGlvbihtdXRhdGlvbikge1xuICAgICAgICBpZiAobXV0YXRpb24udHlwZSA9PSBcImF0dHJpYnV0ZXNcIikge1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzQXR0cmlidXRlQ2hhbmdlKG11dGF0aW9uLnRhcmdldCwgbXV0YXRpb24uYXR0cmlidXRlTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobXV0YXRpb24udHlwZSA9PSBcImNoaWxkTGlzdFwiKSB7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NSZW1vdmVkTm9kZXMobXV0YXRpb24ucmVtb3ZlZE5vZGVzKTtcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc0FkZGVkTm9kZXMobXV0YXRpb24uYWRkZWROb2Rlcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJvY2Vzc0F0dHJpYnV0ZUNoYW5nZShlbGVtZW50LCBhdHRyaWJ1dGVOYW1lKSB7XG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnRzLmhhcyhlbGVtZW50KSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUuZWxlbWVudEF0dHJpYnV0ZUNoYW5nZWQgJiYgdGhpcy5tYXRjaEVsZW1lbnQoZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlbGVnYXRlLmVsZW1lbnRBdHRyaWJ1dGVDaGFuZ2VkKGVsZW1lbnQsIGF0dHJpYnV0ZU5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVFbGVtZW50KGVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMubWF0Y2hFbGVtZW50KGVsZW1lbnQpKSB7XG4gICAgICAgICAgICB0aGlzLmFkZEVsZW1lbnQoZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJvY2Vzc1JlbW92ZWROb2Rlcyhub2Rlcykge1xuICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2YgQXJyYXkuZnJvbShub2RlcykpIHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmVsZW1lbnRGcm9tTm9kZShub2RlKTtcbiAgICAgICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzVHJlZShlbGVtZW50LCB0aGlzLnJlbW92ZUVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHByb2Nlc3NBZGRlZE5vZGVzKG5vZGVzKSB7XG4gICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiBBcnJheS5mcm9tKG5vZGVzKSkge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuZWxlbWVudEZyb21Ob2RlKG5vZGUpO1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQgJiYgdGhpcy5lbGVtZW50SXNBY3RpdmUoZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NUcmVlKGVsZW1lbnQsIHRoaXMuYWRkRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWF0Y2hFbGVtZW50KGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVsZWdhdGUubWF0Y2hFbGVtZW50KGVsZW1lbnQpO1xuICAgIH1cbiAgICBtYXRjaEVsZW1lbnRzSW5UcmVlKHRyZWUgPSB0aGlzLmVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVsZWdhdGUubWF0Y2hFbGVtZW50c0luVHJlZSh0cmVlKTtcbiAgICB9XG4gICAgcHJvY2Vzc1RyZWUodHJlZSwgcHJvY2Vzc29yKSB7XG4gICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLm1hdGNoRWxlbWVudHNJblRyZWUodHJlZSkpIHtcbiAgICAgICAgICAgIHByb2Nlc3Nvci5jYWxsKHRoaXMsIGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsZW1lbnRGcm9tTm9kZShub2RlKSB7XG4gICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbGVtZW50SXNBY3RpdmUoZWxlbWVudCkge1xuICAgICAgICBpZiAoZWxlbWVudC5pc0Nvbm5lY3RlZCAhPSB0aGlzLmVsZW1lbnQuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuY29udGFpbnMoZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkRWxlbWVudChlbGVtZW50KSB7XG4gICAgICAgIGlmICghdGhpcy5lbGVtZW50cy5oYXMoZWxlbWVudCkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnRJc0FjdGl2ZShlbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHMuYWRkKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlbGVnYXRlLmVsZW1lbnRNYXRjaGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUuZWxlbWVudE1hdGNoZWQoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZUVsZW1lbnQoZWxlbWVudCkge1xuICAgICAgICBpZiAodGhpcy5lbGVtZW50cy5oYXMoZWxlbWVudCkpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMuZGVsZXRlKGVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUuZWxlbWVudFVubWF0Y2hlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUuZWxlbWVudFVubWF0Y2hlZChlbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuY2xhc3MgQXR0cmlidXRlT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIGF0dHJpYnV0ZU5hbWUsIGRlbGVnYXRlKSB7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlTmFtZSA9IGF0dHJpYnV0ZU5hbWU7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICAgICAgdGhpcy5lbGVtZW50T2JzZXJ2ZXIgPSBuZXcgRWxlbWVudE9ic2VydmVyKGVsZW1lbnQsIHRoaXMpO1xuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudE9ic2VydmVyLmVsZW1lbnQ7XG4gICAgfVxuICAgIGdldCBzZWxlY3RvcigpIHtcbiAgICAgICAgcmV0dXJuIGBbJHt0aGlzLmF0dHJpYnV0ZU5hbWV9XWA7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLmVsZW1lbnRPYnNlcnZlci5zdGFydCgpO1xuICAgIH1cbiAgICBwYXVzZShjYWxsYmFjaykge1xuICAgICAgICB0aGlzLmVsZW1lbnRPYnNlcnZlci5wYXVzZShjYWxsYmFjayk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudE9ic2VydmVyLnN0b3AoKTtcbiAgICB9XG4gICAgcmVmcmVzaCgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50T2JzZXJ2ZXIucmVmcmVzaCgpO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudE9ic2VydmVyLnN0YXJ0ZWQ7XG4gICAgfVxuICAgIG1hdGNoRWxlbWVudChlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBlbGVtZW50Lmhhc0F0dHJpYnV0ZSh0aGlzLmF0dHJpYnV0ZU5hbWUpO1xuICAgIH1cbiAgICBtYXRjaEVsZW1lbnRzSW5UcmVlKHRyZWUpIHtcbiAgICAgICAgY29uc3QgbWF0Y2ggPSB0aGlzLm1hdGNoRWxlbWVudCh0cmVlKSA/IFt0cmVlXSA6IFtdO1xuICAgICAgICBjb25zdCBtYXRjaGVzID0gQXJyYXkuZnJvbSh0cmVlLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5zZWxlY3RvcikpO1xuICAgICAgICByZXR1cm4gbWF0Y2guY29uY2F0KG1hdGNoZXMpO1xuICAgIH1cbiAgICBlbGVtZW50TWF0Y2hlZChlbGVtZW50KSB7XG4gICAgICAgIGlmICh0aGlzLmRlbGVnYXRlLmVsZW1lbnRNYXRjaGVkQXR0cmlidXRlKSB7XG4gICAgICAgICAgICB0aGlzLmRlbGVnYXRlLmVsZW1lbnRNYXRjaGVkQXR0cmlidXRlKGVsZW1lbnQsIHRoaXMuYXR0cmlidXRlTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxlbWVudFVubWF0Y2hlZChlbGVtZW50KSB7XG4gICAgICAgIGlmICh0aGlzLmRlbGVnYXRlLmVsZW1lbnRVbm1hdGNoZWRBdHRyaWJ1dGUpIHtcbiAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUuZWxlbWVudFVubWF0Y2hlZEF0dHJpYnV0ZShlbGVtZW50LCB0aGlzLmF0dHJpYnV0ZU5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsZW1lbnRBdHRyaWJ1dGVDaGFuZ2VkKGVsZW1lbnQsIGF0dHJpYnV0ZU5hbWUpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUuZWxlbWVudEF0dHJpYnV0ZVZhbHVlQ2hhbmdlZCAmJiB0aGlzLmF0dHJpYnV0ZU5hbWUgPT0gYXR0cmlidXRlTmFtZSkge1xuICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5lbGVtZW50QXR0cmlidXRlVmFsdWVDaGFuZ2VkKGVsZW1lbnQsIGF0dHJpYnV0ZU5hbWUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhZGQobWFwLCBrZXksIHZhbHVlKSB7XG4gICAgZmV0Y2gobWFwLCBrZXkpLmFkZCh2YWx1ZSk7XG59XG5mdW5jdGlvbiBkZWwobWFwLCBrZXksIHZhbHVlKSB7XG4gICAgZmV0Y2gobWFwLCBrZXkpLmRlbGV0ZSh2YWx1ZSk7XG4gICAgcHJ1bmUobWFwLCBrZXkpO1xufVxuZnVuY3Rpb24gZmV0Y2gobWFwLCBrZXkpIHtcbiAgICBsZXQgdmFsdWVzID0gbWFwLmdldChrZXkpO1xuICAgIGlmICghdmFsdWVzKSB7XG4gICAgICAgIHZhbHVlcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgbWFwLnNldChrZXksIHZhbHVlcyk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZXM7XG59XG5mdW5jdGlvbiBwcnVuZShtYXAsIGtleSkge1xuICAgIGNvbnN0IHZhbHVlcyA9IG1hcC5nZXQoa2V5KTtcbiAgICBpZiAodmFsdWVzICE9IG51bGwgJiYgdmFsdWVzLnNpemUgPT0gMCkge1xuICAgICAgICBtYXAuZGVsZXRlKGtleSk7XG4gICAgfVxufVxuXG5jbGFzcyBNdWx0aW1hcCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudmFsdWVzQnlLZXkgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIGdldCBrZXlzKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnZhbHVlc0J5S2V5LmtleXMoKSk7XG4gICAgfVxuICAgIGdldCB2YWx1ZXMoKSB7XG4gICAgICAgIGNvbnN0IHNldHMgPSBBcnJheS5mcm9tKHRoaXMudmFsdWVzQnlLZXkudmFsdWVzKCkpO1xuICAgICAgICByZXR1cm4gc2V0cy5yZWR1Y2UoKHZhbHVlcywgc2V0KSA9PiB2YWx1ZXMuY29uY2F0KEFycmF5LmZyb20oc2V0KSksIFtdKTtcbiAgICB9XG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIGNvbnN0IHNldHMgPSBBcnJheS5mcm9tKHRoaXMudmFsdWVzQnlLZXkudmFsdWVzKCkpO1xuICAgICAgICByZXR1cm4gc2V0cy5yZWR1Y2UoKHNpemUsIHNldCkgPT4gc2l6ZSArIHNldC5zaXplLCAwKTtcbiAgICB9XG4gICAgYWRkKGtleSwgdmFsdWUpIHtcbiAgICAgICAgYWRkKHRoaXMudmFsdWVzQnlLZXksIGtleSwgdmFsdWUpO1xuICAgIH1cbiAgICBkZWxldGUoa2V5LCB2YWx1ZSkge1xuICAgICAgICBkZWwodGhpcy52YWx1ZXNCeUtleSwga2V5LCB2YWx1ZSk7XG4gICAgfVxuICAgIGhhcyhrZXksIHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IHRoaXMudmFsdWVzQnlLZXkuZ2V0KGtleSk7XG4gICAgICAgIHJldHVybiB2YWx1ZXMgIT0gbnVsbCAmJiB2YWx1ZXMuaGFzKHZhbHVlKTtcbiAgICB9XG4gICAgaGFzS2V5KGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNCeUtleS5oYXMoa2V5KTtcbiAgICB9XG4gICAgaGFzVmFsdWUodmFsdWUpIHtcbiAgICAgICAgY29uc3Qgc2V0cyA9IEFycmF5LmZyb20odGhpcy52YWx1ZXNCeUtleS52YWx1ZXMoKSk7XG4gICAgICAgIHJldHVybiBzZXRzLnNvbWUoKHNldCkgPT4gc2V0Lmhhcyh2YWx1ZSkpO1xuICAgIH1cbiAgICBnZXRWYWx1ZXNGb3JLZXkoa2V5KSB7XG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IHRoaXMudmFsdWVzQnlLZXkuZ2V0KGtleSk7XG4gICAgICAgIHJldHVybiB2YWx1ZXMgPyBBcnJheS5mcm9tKHZhbHVlcykgOiBbXTtcbiAgICB9XG4gICAgZ2V0S2V5c0ZvclZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMudmFsdWVzQnlLZXkpXG4gICAgICAgICAgICAuZmlsdGVyKChbX2tleSwgdmFsdWVzXSkgPT4gdmFsdWVzLmhhcyh2YWx1ZSkpXG4gICAgICAgICAgICAubWFwKChba2V5LCBfdmFsdWVzXSkgPT4ga2V5KTtcbiAgICB9XG59XG5cbmNsYXNzIEluZGV4ZWRNdWx0aW1hcCBleHRlbmRzIE11bHRpbWFwIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5rZXlzQnlWYWx1ZSA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlcygpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5rZXlzQnlWYWx1ZS5rZXlzKCkpO1xuICAgIH1cbiAgICBhZGQoa2V5LCB2YWx1ZSkge1xuICAgICAgICBzdXBlci5hZGQoa2V5LCB2YWx1ZSk7XG4gICAgICAgIGFkZCh0aGlzLmtleXNCeVZhbHVlLCB2YWx1ZSwga2V5KTtcbiAgICB9XG4gICAgZGVsZXRlKGtleSwgdmFsdWUpIHtcbiAgICAgICAgc3VwZXIuZGVsZXRlKGtleSwgdmFsdWUpO1xuICAgICAgICBkZWwodGhpcy5rZXlzQnlWYWx1ZSwgdmFsdWUsIGtleSk7XG4gICAgfVxuICAgIGhhc1ZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtleXNCeVZhbHVlLmhhcyh2YWx1ZSk7XG4gICAgfVxuICAgIGdldEtleXNGb3JWYWx1ZSh2YWx1ZSkge1xuICAgICAgICBjb25zdCBzZXQgPSB0aGlzLmtleXNCeVZhbHVlLmdldCh2YWx1ZSk7XG4gICAgICAgIHJldHVybiBzZXQgPyBBcnJheS5mcm9tKHNldCkgOiBbXTtcbiAgICB9XG59XG5cbmNsYXNzIFNlbGVjdG9yT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIHNlbGVjdG9yLCBkZWxlZ2F0ZSwgZGV0YWlscykge1xuICAgICAgICB0aGlzLl9zZWxlY3RvciA9IHNlbGVjdG9yO1xuICAgICAgICB0aGlzLmRldGFpbHMgPSBkZXRhaWxzO1xuICAgICAgICB0aGlzLmVsZW1lbnRPYnNlcnZlciA9IG5ldyBFbGVtZW50T2JzZXJ2ZXIoZWxlbWVudCwgdGhpcyk7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICAgICAgdGhpcy5tYXRjaGVzQnlFbGVtZW50ID0gbmV3IE11bHRpbWFwKCk7XG4gICAgfVxuICAgIGdldCBzdGFydGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50T2JzZXJ2ZXIuc3RhcnRlZDtcbiAgICB9XG4gICAgZ2V0IHNlbGVjdG9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VsZWN0b3I7XG4gICAgfVxuICAgIHNldCBzZWxlY3RvcihzZWxlY3Rvcikge1xuICAgICAgICB0aGlzLl9zZWxlY3RvciA9IHNlbGVjdG9yO1xuICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudE9ic2VydmVyLnN0YXJ0KCk7XG4gICAgfVxuICAgIHBhdXNlKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudE9ic2VydmVyLnBhdXNlKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50T2JzZXJ2ZXIuc3RvcCgpO1xuICAgIH1cbiAgICByZWZyZXNoKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnRPYnNlcnZlci5yZWZyZXNoKCk7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50T2JzZXJ2ZXIuZWxlbWVudDtcbiAgICB9XG4gICAgbWF0Y2hFbGVtZW50KGVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgeyBzZWxlY3RvciB9ID0gdGhpcztcbiAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICBjb25zdCBtYXRjaGVzID0gZWxlbWVudC5tYXRjaGVzKHNlbGVjdG9yKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmRlbGVnYXRlLnNlbGVjdG9yTWF0Y2hFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoZXMgJiYgdGhpcy5kZWxlZ2F0ZS5zZWxlY3Rvck1hdGNoRWxlbWVudChlbGVtZW50LCB0aGlzLmRldGFpbHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1hdGNoZXM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWF0Y2hFbGVtZW50c0luVHJlZSh0cmVlKSB7XG4gICAgICAgIGNvbnN0IHsgc2VsZWN0b3IgfSA9IHRoaXM7XG4gICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSB0aGlzLm1hdGNoRWxlbWVudCh0cmVlKSA/IFt0cmVlXSA6IFtdO1xuICAgICAgICAgICAgY29uc3QgbWF0Y2hlcyA9IEFycmF5LmZyb20odHJlZS5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSkuZmlsdGVyKChtYXRjaCkgPT4gdGhpcy5tYXRjaEVsZW1lbnQobWF0Y2gpKTtcbiAgICAgICAgICAgIHJldHVybiBtYXRjaC5jb25jYXQobWF0Y2hlcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxlbWVudE1hdGNoZWQoZWxlbWVudCkge1xuICAgICAgICBjb25zdCB7IHNlbGVjdG9yIH0gPSB0aGlzO1xuICAgICAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0b3JNYXRjaGVkKGVsZW1lbnQsIHNlbGVjdG9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbGVtZW50VW5tYXRjaGVkKGVsZW1lbnQpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0b3JzID0gdGhpcy5tYXRjaGVzQnlFbGVtZW50LmdldEtleXNGb3JWYWx1ZShlbGVtZW50KTtcbiAgICAgICAgZm9yIChjb25zdCBzZWxlY3RvciBvZiBzZWxlY3RvcnMpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0b3JVbm1hdGNoZWQoZWxlbWVudCwgc2VsZWN0b3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsZW1lbnRBdHRyaWJ1dGVDaGFuZ2VkKGVsZW1lbnQsIF9hdHRyaWJ1dGVOYW1lKSB7XG4gICAgICAgIGNvbnN0IHsgc2VsZWN0b3IgfSA9IHRoaXM7XG4gICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgY29uc3QgbWF0Y2hlcyA9IHRoaXMubWF0Y2hFbGVtZW50KGVsZW1lbnQpO1xuICAgICAgICAgICAgY29uc3QgbWF0Y2hlZEJlZm9yZSA9IHRoaXMubWF0Y2hlc0J5RWxlbWVudC5oYXMoc2VsZWN0b3IsIGVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKG1hdGNoZXMgJiYgIW1hdGNoZWRCZWZvcmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdG9yTWF0Y2hlZChlbGVtZW50LCBzZWxlY3Rvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghbWF0Y2hlcyAmJiBtYXRjaGVkQmVmb3JlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RvclVubWF0Y2hlZChlbGVtZW50LCBzZWxlY3Rvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VsZWN0b3JNYXRjaGVkKGVsZW1lbnQsIHNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUuc2VsZWN0b3JNYXRjaGVkKGVsZW1lbnQsIHNlbGVjdG9yLCB0aGlzLmRldGFpbHMpO1xuICAgICAgICB0aGlzLm1hdGNoZXNCeUVsZW1lbnQuYWRkKHNlbGVjdG9yLCBlbGVtZW50KTtcbiAgICB9XG4gICAgc2VsZWN0b3JVbm1hdGNoZWQoZWxlbWVudCwgc2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZS5zZWxlY3RvclVubWF0Y2hlZChlbGVtZW50LCBzZWxlY3RvciwgdGhpcy5kZXRhaWxzKTtcbiAgICAgICAgdGhpcy5tYXRjaGVzQnlFbGVtZW50LmRlbGV0ZShzZWxlY3RvciwgZWxlbWVudCk7XG4gICAgfVxufVxuXG5jbGFzcyBTdHJpbmdNYXBPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgZGVsZWdhdGUpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zdHJpbmdNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMubXV0YXRpb25PYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMpID0+IHRoaXMucHJvY2Vzc011dGF0aW9ucyhtdXRhdGlvbnMpKTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyLm9ic2VydmUodGhpcy5lbGVtZW50LCB7IGF0dHJpYnV0ZXM6IHRydWUsIGF0dHJpYnV0ZU9sZFZhbHVlOiB0cnVlIH0pO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgICAgICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyLnRha2VSZWNvcmRzKCk7XG4gICAgICAgICAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVmcmVzaCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBhdHRyaWJ1dGVOYW1lIG9mIHRoaXMua25vd25BdHRyaWJ1dGVOYW1lcykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lLCBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBwcm9jZXNzTXV0YXRpb25zKG11dGF0aW9ucykge1xuICAgICAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG11dGF0aW9uIG9mIG11dGF0aW9ucykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc011dGF0aW9uKG11dGF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBwcm9jZXNzTXV0YXRpb24obXV0YXRpb24pIHtcbiAgICAgICAgY29uc3QgYXR0cmlidXRlTmFtZSA9IG11dGF0aW9uLmF0dHJpYnV0ZU5hbWU7XG4gICAgICAgIGlmIChhdHRyaWJ1dGVOYW1lKSB7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSwgbXV0YXRpb24ub2xkVmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlZnJlc2hBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gdGhpcy5kZWxlZ2F0ZS5nZXRTdHJpbmdNYXBLZXlGb3JBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSk7XG4gICAgICAgIGlmIChrZXkgIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnN0cmluZ01hcC5oYXMoYXR0cmlidXRlTmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0cmluZ01hcEtleUFkZGVkKGtleSwgYXR0cmlidXRlTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5zdHJpbmdNYXAuZ2V0KGF0dHJpYnV0ZU5hbWUpICE9IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdHJpbmdNYXBWYWx1ZUNoYW5nZWQodmFsdWUsIGtleSwgb2xkVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXMuc3RyaW5nTWFwLmdldChhdHRyaWJ1dGVOYW1lKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0cmluZ01hcC5kZWxldGUoYXR0cmlidXRlTmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKG9sZFZhbHVlKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0cmluZ01hcEtleVJlbW92ZWQoa2V5LCBhdHRyaWJ1dGVOYW1lLCBvbGRWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0cmluZ01hcC5zZXQoYXR0cmlidXRlTmFtZSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHN0cmluZ01hcEtleUFkZGVkKGtleSwgYXR0cmlidXRlTmFtZSkge1xuICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZS5zdHJpbmdNYXBLZXlBZGRlZCkge1xuICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5zdHJpbmdNYXBLZXlBZGRlZChrZXksIGF0dHJpYnV0ZU5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0cmluZ01hcFZhbHVlQ2hhbmdlZCh2YWx1ZSwga2V5LCBvbGRWYWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZS5zdHJpbmdNYXBWYWx1ZUNoYW5nZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUuc3RyaW5nTWFwVmFsdWVDaGFuZ2VkKHZhbHVlLCBrZXksIG9sZFZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdHJpbmdNYXBLZXlSZW1vdmVkKGtleSwgYXR0cmlidXRlTmFtZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUuc3RyaW5nTWFwS2V5UmVtb3ZlZCkge1xuICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5zdHJpbmdNYXBLZXlSZW1vdmVkKGtleSwgYXR0cmlidXRlTmFtZSwgb2xkVmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBrbm93bkF0dHJpYnV0ZU5hbWVzKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShuZXcgU2V0KHRoaXMuY3VycmVudEF0dHJpYnV0ZU5hbWVzLmNvbmNhdCh0aGlzLnJlY29yZGVkQXR0cmlidXRlTmFtZXMpKSk7XG4gICAgfVxuICAgIGdldCBjdXJyZW50QXR0cmlidXRlTmFtZXMoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZWxlbWVudC5hdHRyaWJ1dGVzKS5tYXAoKGF0dHJpYnV0ZSkgPT4gYXR0cmlidXRlLm5hbWUpO1xuICAgIH1cbiAgICBnZXQgcmVjb3JkZWRBdHRyaWJ1dGVOYW1lcygpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5zdHJpbmdNYXAua2V5cygpKTtcbiAgICB9XG59XG5cbmNsYXNzIFRva2VuTGlzdE9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBhdHRyaWJ1dGVOYW1lLCBkZWxlZ2F0ZSkge1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZU9ic2VydmVyID0gbmV3IEF0dHJpYnV0ZU9ic2VydmVyKGVsZW1lbnQsIGF0dHJpYnV0ZU5hbWUsIHRoaXMpO1xuICAgICAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gICAgICAgIHRoaXMudG9rZW5zQnlFbGVtZW50ID0gbmV3IE11bHRpbWFwKCk7XG4gICAgfVxuICAgIGdldCBzdGFydGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGVPYnNlcnZlci5zdGFydGVkO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVPYnNlcnZlci5zdGFydCgpO1xuICAgIH1cbiAgICBwYXVzZShjYWxsYmFjaykge1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZU9ic2VydmVyLnBhdXNlKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVPYnNlcnZlci5zdG9wKCk7XG4gICAgfVxuICAgIHJlZnJlc2goKSB7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlT2JzZXJ2ZXIucmVmcmVzaCgpO1xuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlT2JzZXJ2ZXIuZWxlbWVudDtcbiAgICB9XG4gICAgZ2V0IGF0dHJpYnV0ZU5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZU9ic2VydmVyLmF0dHJpYnV0ZU5hbWU7XG4gICAgfVxuICAgIGVsZW1lbnRNYXRjaGVkQXR0cmlidXRlKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy50b2tlbnNNYXRjaGVkKHRoaXMucmVhZFRva2Vuc0ZvckVsZW1lbnQoZWxlbWVudCkpO1xuICAgIH1cbiAgICBlbGVtZW50QXR0cmlidXRlVmFsdWVDaGFuZ2VkKGVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgW3VubWF0Y2hlZFRva2VucywgbWF0Y2hlZFRva2Vuc10gPSB0aGlzLnJlZnJlc2hUb2tlbnNGb3JFbGVtZW50KGVsZW1lbnQpO1xuICAgICAgICB0aGlzLnRva2Vuc1VubWF0Y2hlZCh1bm1hdGNoZWRUb2tlbnMpO1xuICAgICAgICB0aGlzLnRva2Vuc01hdGNoZWQobWF0Y2hlZFRva2Vucyk7XG4gICAgfVxuICAgIGVsZW1lbnRVbm1hdGNoZWRBdHRyaWJ1dGUoZWxlbWVudCkge1xuICAgICAgICB0aGlzLnRva2Vuc1VubWF0Y2hlZCh0aGlzLnRva2Vuc0J5RWxlbWVudC5nZXRWYWx1ZXNGb3JLZXkoZWxlbWVudCkpO1xuICAgIH1cbiAgICB0b2tlbnNNYXRjaGVkKHRva2Vucykge1xuICAgICAgICB0b2tlbnMuZm9yRWFjaCgodG9rZW4pID0+IHRoaXMudG9rZW5NYXRjaGVkKHRva2VuKSk7XG4gICAgfVxuICAgIHRva2Vuc1VubWF0Y2hlZCh0b2tlbnMpIHtcbiAgICAgICAgdG9rZW5zLmZvckVhY2goKHRva2VuKSA9PiB0aGlzLnRva2VuVW5tYXRjaGVkKHRva2VuKSk7XG4gICAgfVxuICAgIHRva2VuTWF0Y2hlZCh0b2tlbikge1xuICAgICAgICB0aGlzLmRlbGVnYXRlLnRva2VuTWF0Y2hlZCh0b2tlbik7XG4gICAgICAgIHRoaXMudG9rZW5zQnlFbGVtZW50LmFkZCh0b2tlbi5lbGVtZW50LCB0b2tlbik7XG4gICAgfVxuICAgIHRva2VuVW5tYXRjaGVkKHRva2VuKSB7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUudG9rZW5Vbm1hdGNoZWQodG9rZW4pO1xuICAgICAgICB0aGlzLnRva2Vuc0J5RWxlbWVudC5kZWxldGUodG9rZW4uZWxlbWVudCwgdG9rZW4pO1xuICAgIH1cbiAgICByZWZyZXNoVG9rZW5zRm9yRWxlbWVudChlbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzVG9rZW5zID0gdGhpcy50b2tlbnNCeUVsZW1lbnQuZ2V0VmFsdWVzRm9yS2V5KGVsZW1lbnQpO1xuICAgICAgICBjb25zdCBjdXJyZW50VG9rZW5zID0gdGhpcy5yZWFkVG9rZW5zRm9yRWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgY29uc3QgZmlyc3REaWZmZXJpbmdJbmRleCA9IHppcChwcmV2aW91c1Rva2VucywgY3VycmVudFRva2VucykuZmluZEluZGV4KChbcHJldmlvdXNUb2tlbiwgY3VycmVudFRva2VuXSkgPT4gIXRva2Vuc0FyZUVxdWFsKHByZXZpb3VzVG9rZW4sIGN1cnJlbnRUb2tlbikpO1xuICAgICAgICBpZiAoZmlyc3REaWZmZXJpbmdJbmRleCA9PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIFtbXSwgW11dO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFtwcmV2aW91c1Rva2Vucy5zbGljZShmaXJzdERpZmZlcmluZ0luZGV4KSwgY3VycmVudFRva2Vucy5zbGljZShmaXJzdERpZmZlcmluZ0luZGV4KV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVhZFRva2Vuc0ZvckVsZW1lbnQoZWxlbWVudCkge1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGVOYW1lID0gdGhpcy5hdHRyaWJ1dGVOYW1lO1xuICAgICAgICBjb25zdCB0b2tlblN0cmluZyA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpIHx8IFwiXCI7XG4gICAgICAgIHJldHVybiBwYXJzZVRva2VuU3RyaW5nKHRva2VuU3RyaW5nLCBlbGVtZW50LCBhdHRyaWJ1dGVOYW1lKTtcbiAgICB9XG59XG5mdW5jdGlvbiBwYXJzZVRva2VuU3RyaW5nKHRva2VuU3RyaW5nLCBlbGVtZW50LCBhdHRyaWJ1dGVOYW1lKSB7XG4gICAgcmV0dXJuIHRva2VuU3RyaW5nXG4gICAgICAgIC50cmltKClcbiAgICAgICAgLnNwbGl0KC9cXHMrLylcbiAgICAgICAgLmZpbHRlcigoY29udGVudCkgPT4gY29udGVudC5sZW5ndGgpXG4gICAgICAgIC5tYXAoKGNvbnRlbnQsIGluZGV4KSA9PiAoeyBlbGVtZW50LCBhdHRyaWJ1dGVOYW1lLCBjb250ZW50LCBpbmRleCB9KSk7XG59XG5mdW5jdGlvbiB6aXAobGVmdCwgcmlnaHQpIHtcbiAgICBjb25zdCBsZW5ndGggPSBNYXRoLm1heChsZWZ0Lmxlbmd0aCwgcmlnaHQubGVuZ3RoKTtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aCB9LCAoXywgaW5kZXgpID0+IFtsZWZ0W2luZGV4XSwgcmlnaHRbaW5kZXhdXSk7XG59XG5mdW5jdGlvbiB0b2tlbnNBcmVFcXVhbChsZWZ0LCByaWdodCkge1xuICAgIHJldHVybiBsZWZ0ICYmIHJpZ2h0ICYmIGxlZnQuaW5kZXggPT0gcmlnaHQuaW5kZXggJiYgbGVmdC5jb250ZW50ID09IHJpZ2h0LmNvbnRlbnQ7XG59XG5cbmNsYXNzIFZhbHVlTGlzdE9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBhdHRyaWJ1dGVOYW1lLCBkZWxlZ2F0ZSkge1xuICAgICAgICB0aGlzLnRva2VuTGlzdE9ic2VydmVyID0gbmV3IFRva2VuTGlzdE9ic2VydmVyKGVsZW1lbnQsIGF0dHJpYnV0ZU5hbWUsIHRoaXMpO1xuICAgICAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gICAgICAgIHRoaXMucGFyc2VSZXN1bHRzQnlUb2tlbiA9IG5ldyBXZWFrTWFwKCk7XG4gICAgICAgIHRoaXMudmFsdWVzQnlUb2tlbkJ5RWxlbWVudCA9IG5ldyBXZWFrTWFwKCk7XG4gICAgfVxuICAgIGdldCBzdGFydGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b2tlbkxpc3RPYnNlcnZlci5zdGFydGVkO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy50b2tlbkxpc3RPYnNlcnZlci5zdGFydCgpO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICB0aGlzLnRva2VuTGlzdE9ic2VydmVyLnN0b3AoKTtcbiAgICB9XG4gICAgcmVmcmVzaCgpIHtcbiAgICAgICAgdGhpcy50b2tlbkxpc3RPYnNlcnZlci5yZWZyZXNoKCk7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b2tlbkxpc3RPYnNlcnZlci5lbGVtZW50O1xuICAgIH1cbiAgICBnZXQgYXR0cmlidXRlTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9rZW5MaXN0T2JzZXJ2ZXIuYXR0cmlidXRlTmFtZTtcbiAgICB9XG4gICAgdG9rZW5NYXRjaGVkKHRva2VuKSB7XG4gICAgICAgIGNvbnN0IHsgZWxlbWVudCB9ID0gdG9rZW47XG4gICAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IHRoaXMuZmV0Y2hQYXJzZVJlc3VsdEZvclRva2VuKHRva2VuKTtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmZldGNoVmFsdWVzQnlUb2tlbkZvckVsZW1lbnQoZWxlbWVudCkuc2V0KHRva2VuLCB2YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLmRlbGVnYXRlLmVsZW1lbnRNYXRjaGVkVmFsdWUoZWxlbWVudCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRva2VuVW5tYXRjaGVkKHRva2VuKSB7XG4gICAgICAgIGNvbnN0IHsgZWxlbWVudCB9ID0gdG9rZW47XG4gICAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IHRoaXMuZmV0Y2hQYXJzZVJlc3VsdEZvclRva2VuKHRva2VuKTtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmZldGNoVmFsdWVzQnlUb2tlbkZvckVsZW1lbnQoZWxlbWVudCkuZGVsZXRlKHRva2VuKTtcbiAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUuZWxlbWVudFVubWF0Y2hlZFZhbHVlKGVsZW1lbnQsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmZXRjaFBhcnNlUmVzdWx0Rm9yVG9rZW4odG9rZW4pIHtcbiAgICAgICAgbGV0IHBhcnNlUmVzdWx0ID0gdGhpcy5wYXJzZVJlc3VsdHNCeVRva2VuLmdldCh0b2tlbik7XG4gICAgICAgIGlmICghcGFyc2VSZXN1bHQpIHtcbiAgICAgICAgICAgIHBhcnNlUmVzdWx0ID0gdGhpcy5wYXJzZVRva2VuKHRva2VuKTtcbiAgICAgICAgICAgIHRoaXMucGFyc2VSZXN1bHRzQnlUb2tlbi5zZXQodG9rZW4sIHBhcnNlUmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyc2VSZXN1bHQ7XG4gICAgfVxuICAgIGZldGNoVmFsdWVzQnlUb2tlbkZvckVsZW1lbnQoZWxlbWVudCkge1xuICAgICAgICBsZXQgdmFsdWVzQnlUb2tlbiA9IHRoaXMudmFsdWVzQnlUb2tlbkJ5RWxlbWVudC5nZXQoZWxlbWVudCk7XG4gICAgICAgIGlmICghdmFsdWVzQnlUb2tlbikge1xuICAgICAgICAgICAgdmFsdWVzQnlUb2tlbiA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIHRoaXMudmFsdWVzQnlUb2tlbkJ5RWxlbWVudC5zZXQoZWxlbWVudCwgdmFsdWVzQnlUb2tlbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlc0J5VG9rZW47XG4gICAgfVxuICAgIHBhcnNlVG9rZW4odG9rZW4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5kZWxlZ2F0ZS5wYXJzZVZhbHVlRm9yVG9rZW4odG9rZW4pO1xuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWUgfTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGVycm9yIH07XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNsYXNzIEJpbmRpbmdPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IoY29udGV4dCwgZGVsZWdhdGUpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgICAgICB0aGlzLmJpbmRpbmdzQnlBY3Rpb24gPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICBpZiAoIXRoaXMudmFsdWVMaXN0T2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWVMaXN0T2JzZXJ2ZXIgPSBuZXcgVmFsdWVMaXN0T2JzZXJ2ZXIodGhpcy5lbGVtZW50LCB0aGlzLmFjdGlvbkF0dHJpYnV0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnZhbHVlTGlzdE9ic2VydmVyLnN0YXJ0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWVMaXN0T2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWVMaXN0T2JzZXJ2ZXIuc3RvcCgpO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMudmFsdWVMaXN0T2JzZXJ2ZXI7XG4gICAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3RBbGxBY3Rpb25zKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGVsZW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQuZWxlbWVudDtcbiAgICB9XG4gICAgZ2V0IGlkZW50aWZpZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQuaWRlbnRpZmllcjtcbiAgICB9XG4gICAgZ2V0IGFjdGlvbkF0dHJpYnV0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NoZW1hLmFjdGlvbkF0dHJpYnV0ZTtcbiAgICB9XG4gICAgZ2V0IHNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5zY2hlbWE7XG4gICAgfVxuICAgIGdldCBiaW5kaW5ncygpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5iaW5kaW5nc0J5QWN0aW9uLnZhbHVlcygpKTtcbiAgICB9XG4gICAgY29ubmVjdEFjdGlvbihhY3Rpb24pIHtcbiAgICAgICAgY29uc3QgYmluZGluZyA9IG5ldyBCaW5kaW5nKHRoaXMuY29udGV4dCwgYWN0aW9uKTtcbiAgICAgICAgdGhpcy5iaW5kaW5nc0J5QWN0aW9uLnNldChhY3Rpb24sIGJpbmRpbmcpO1xuICAgICAgICB0aGlzLmRlbGVnYXRlLmJpbmRpbmdDb25uZWN0ZWQoYmluZGluZyk7XG4gICAgfVxuICAgIGRpc2Nvbm5lY3RBY3Rpb24oYWN0aW9uKSB7XG4gICAgICAgIGNvbnN0IGJpbmRpbmcgPSB0aGlzLmJpbmRpbmdzQnlBY3Rpb24uZ2V0KGFjdGlvbik7XG4gICAgICAgIGlmIChiaW5kaW5nKSB7XG4gICAgICAgICAgICB0aGlzLmJpbmRpbmdzQnlBY3Rpb24uZGVsZXRlKGFjdGlvbik7XG4gICAgICAgICAgICB0aGlzLmRlbGVnYXRlLmJpbmRpbmdEaXNjb25uZWN0ZWQoYmluZGluZyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGlzY29ubmVjdEFsbEFjdGlvbnMoKSB7XG4gICAgICAgIHRoaXMuYmluZGluZ3MuZm9yRWFjaCgoYmluZGluZykgPT4gdGhpcy5kZWxlZ2F0ZS5iaW5kaW5nRGlzY29ubmVjdGVkKGJpbmRpbmcsIHRydWUpKTtcbiAgICAgICAgdGhpcy5iaW5kaW5nc0J5QWN0aW9uLmNsZWFyKCk7XG4gICAgfVxuICAgIHBhcnNlVmFsdWVGb3JUb2tlbih0b2tlbikge1xuICAgICAgICBjb25zdCBhY3Rpb24gPSBBY3Rpb24uZm9yVG9rZW4odG9rZW4sIHRoaXMuc2NoZW1hKTtcbiAgICAgICAgaWYgKGFjdGlvbi5pZGVudGlmaWVyID09IHRoaXMuaWRlbnRpZmllcikge1xuICAgICAgICAgICAgcmV0dXJuIGFjdGlvbjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbGVtZW50TWF0Y2hlZFZhbHVlKGVsZW1lbnQsIGFjdGlvbikge1xuICAgICAgICB0aGlzLmNvbm5lY3RBY3Rpb24oYWN0aW9uKTtcbiAgICB9XG4gICAgZWxlbWVudFVubWF0Y2hlZFZhbHVlKGVsZW1lbnQsIGFjdGlvbikge1xuICAgICAgICB0aGlzLmRpc2Nvbm5lY3RBY3Rpb24oYWN0aW9uKTtcbiAgICB9XG59XG5cbmNsYXNzIFZhbHVlT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQsIHJlY2VpdmVyKSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMucmVjZWl2ZXIgPSByZWNlaXZlcjtcbiAgICAgICAgdGhpcy5zdHJpbmdNYXBPYnNlcnZlciA9IG5ldyBTdHJpbmdNYXBPYnNlcnZlcih0aGlzLmVsZW1lbnQsIHRoaXMpO1xuICAgICAgICB0aGlzLnZhbHVlRGVzY3JpcHRvck1hcCA9IHRoaXMuY29udHJvbGxlci52YWx1ZURlc2NyaXB0b3JNYXA7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLnN0cmluZ01hcE9ic2VydmVyLnN0YXJ0KCk7XG4gICAgICAgIHRoaXMuaW52b2tlQ2hhbmdlZENhbGxiYWNrc0ZvckRlZmF1bHRWYWx1ZXMoKTtcbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5zdHJpbmdNYXBPYnNlcnZlci5zdG9wKCk7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0LmVsZW1lbnQ7XG4gICAgfVxuICAgIGdldCBjb250cm9sbGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0LmNvbnRyb2xsZXI7XG4gICAgfVxuICAgIGdldFN0cmluZ01hcEtleUZvckF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lKSB7XG4gICAgICAgIGlmIChhdHRyaWJ1dGVOYW1lIGluIHRoaXMudmFsdWVEZXNjcmlwdG9yTWFwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZURlc2NyaXB0b3JNYXBbYXR0cmlidXRlTmFtZV0ubmFtZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdHJpbmdNYXBLZXlBZGRlZChrZXksIGF0dHJpYnV0ZU5hbWUpIHtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRvciA9IHRoaXMudmFsdWVEZXNjcmlwdG9yTWFwW2F0dHJpYnV0ZU5hbWVdO1xuICAgICAgICBpZiAoIXRoaXMuaGFzVmFsdWUoa2V5KSkge1xuICAgICAgICAgICAgdGhpcy5pbnZva2VDaGFuZ2VkQ2FsbGJhY2soa2V5LCBkZXNjcmlwdG9yLndyaXRlcih0aGlzLnJlY2VpdmVyW2tleV0pLCBkZXNjcmlwdG9yLndyaXRlcihkZXNjcmlwdG9yLmRlZmF1bHRWYWx1ZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0cmluZ01hcFZhbHVlQ2hhbmdlZCh2YWx1ZSwgbmFtZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRvciA9IHRoaXMudmFsdWVEZXNjcmlwdG9yTmFtZU1hcFtuYW1lXTtcbiAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAob2xkVmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIG9sZFZhbHVlID0gZGVzY3JpcHRvci53cml0ZXIoZGVzY3JpcHRvci5kZWZhdWx0VmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW52b2tlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIHZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgfVxuICAgIHN0cmluZ01hcEtleVJlbW92ZWQoa2V5LCBhdHRyaWJ1dGVOYW1lLCBvbGRWYWx1ZSkge1xuICAgICAgICBjb25zdCBkZXNjcmlwdG9yID0gdGhpcy52YWx1ZURlc2NyaXB0b3JOYW1lTWFwW2tleV07XG4gICAgICAgIGlmICh0aGlzLmhhc1ZhbHVlKGtleSkpIHtcbiAgICAgICAgICAgIHRoaXMuaW52b2tlQ2hhbmdlZENhbGxiYWNrKGtleSwgZGVzY3JpcHRvci53cml0ZXIodGhpcy5yZWNlaXZlcltrZXldKSwgb2xkVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pbnZva2VDaGFuZ2VkQ2FsbGJhY2soa2V5LCBkZXNjcmlwdG9yLndyaXRlcihkZXNjcmlwdG9yLmRlZmF1bHRWYWx1ZSksIG9sZFZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpbnZva2VDaGFuZ2VkQ2FsbGJhY2tzRm9yRGVmYXVsdFZhbHVlcygpIHtcbiAgICAgICAgZm9yIChjb25zdCB7IGtleSwgbmFtZSwgZGVmYXVsdFZhbHVlLCB3cml0ZXIgfSBvZiB0aGlzLnZhbHVlRGVzY3JpcHRvcnMpIHtcbiAgICAgICAgICAgIGlmIChkZWZhdWx0VmFsdWUgIT0gdW5kZWZpbmVkICYmICF0aGlzLmNvbnRyb2xsZXIuZGF0YS5oYXMoa2V5KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW52b2tlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIHdyaXRlcihkZWZhdWx0VmFsdWUpLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGludm9rZUNoYW5nZWRDYWxsYmFjayhuYW1lLCByYXdWYWx1ZSwgcmF3T2xkVmFsdWUpIHtcbiAgICAgICAgY29uc3QgY2hhbmdlZE1ldGhvZE5hbWUgPSBgJHtuYW1lfUNoYW5nZWRgO1xuICAgICAgICBjb25zdCBjaGFuZ2VkTWV0aG9kID0gdGhpcy5yZWNlaXZlcltjaGFuZ2VkTWV0aG9kTmFtZV07XG4gICAgICAgIGlmICh0eXBlb2YgY2hhbmdlZE1ldGhvZCA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSB0aGlzLnZhbHVlRGVzY3JpcHRvck5hbWVNYXBbbmFtZV07XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZGVzY3JpcHRvci5yZWFkZXIocmF3VmFsdWUpO1xuICAgICAgICAgICAgICAgIGxldCBvbGRWYWx1ZSA9IHJhd09sZFZhbHVlO1xuICAgICAgICAgICAgICAgIGlmIChyYXdPbGRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZSA9IGRlc2NyaXB0b3IucmVhZGVyKHJhd09sZFZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2hhbmdlZE1ldGhvZC5jYWxsKHRoaXMucmVjZWl2ZXIsIHZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBUeXBlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IubWVzc2FnZSA9IGBTdGltdWx1cyBWYWx1ZSBcIiR7dGhpcy5jb250ZXh0LmlkZW50aWZpZXJ9LiR7ZGVzY3JpcHRvci5uYW1lfVwiIC0gJHtlcnJvci5tZXNzYWdlfWA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGdldCB2YWx1ZURlc2NyaXB0b3JzKCkge1xuICAgICAgICBjb25zdCB7IHZhbHVlRGVzY3JpcHRvck1hcCB9ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHZhbHVlRGVzY3JpcHRvck1hcCkubWFwKChrZXkpID0+IHZhbHVlRGVzY3JpcHRvck1hcFtrZXldKTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlRGVzY3JpcHRvck5hbWVNYXAoKSB7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0b3JzID0ge307XG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXMudmFsdWVEZXNjcmlwdG9yTWFwKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSB0aGlzLnZhbHVlRGVzY3JpcHRvck1hcFtrZXldO1xuICAgICAgICAgICAgZGVzY3JpcHRvcnNbZGVzY3JpcHRvci5uYW1lXSA9IGRlc2NyaXB0b3I7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGVzY3JpcHRvcnM7XG4gICAgfVxuICAgIGhhc1ZhbHVlKGF0dHJpYnV0ZU5hbWUpIHtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRvciA9IHRoaXMudmFsdWVEZXNjcmlwdG9yTmFtZU1hcFthdHRyaWJ1dGVOYW1lXTtcbiAgICAgICAgY29uc3QgaGFzTWV0aG9kTmFtZSA9IGBoYXMke2NhcGl0YWxpemUoZGVzY3JpcHRvci5uYW1lKX1gO1xuICAgICAgICByZXR1cm4gdGhpcy5yZWNlaXZlcltoYXNNZXRob2ROYW1lXTtcbiAgICB9XG59XG5cbmNsYXNzIFRhcmdldE9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0LCBkZWxlZ2F0ZSkge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gICAgICAgIHRoaXMudGFyZ2V0c0J5TmFtZSA9IG5ldyBNdWx0aW1hcCgpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRva2VuTGlzdE9ic2VydmVyKSB7XG4gICAgICAgICAgICB0aGlzLnRva2VuTGlzdE9ic2VydmVyID0gbmV3IFRva2VuTGlzdE9ic2VydmVyKHRoaXMuZWxlbWVudCwgdGhpcy5hdHRyaWJ1dGVOYW1lLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudG9rZW5MaXN0T2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICBpZiAodGhpcy50b2tlbkxpc3RPYnNlcnZlcikge1xuICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0QWxsVGFyZ2V0cygpO1xuICAgICAgICAgICAgdGhpcy50b2tlbkxpc3RPYnNlcnZlci5zdG9wKCk7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy50b2tlbkxpc3RPYnNlcnZlcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b2tlbk1hdGNoZWQoeyBlbGVtZW50LCBjb250ZW50OiBuYW1lIH0pIHtcbiAgICAgICAgaWYgKHRoaXMuc2NvcGUuY29udGFpbnNFbGVtZW50KGVsZW1lbnQpKSB7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RUYXJnZXQoZWxlbWVudCwgbmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9rZW5Vbm1hdGNoZWQoeyBlbGVtZW50LCBjb250ZW50OiBuYW1lIH0pIHtcbiAgICAgICAgdGhpcy5kaXNjb25uZWN0VGFyZ2V0KGVsZW1lbnQsIG5hbWUpO1xuICAgIH1cbiAgICBjb25uZWN0VGFyZ2V0KGVsZW1lbnQsIG5hbWUpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAoIXRoaXMudGFyZ2V0c0J5TmFtZS5oYXMobmFtZSwgZWxlbWVudCkpIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0c0J5TmFtZS5hZGQobmFtZSwgZWxlbWVudCk7XG4gICAgICAgICAgICAoX2EgPSB0aGlzLnRva2VuTGlzdE9ic2VydmVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucGF1c2UoKCkgPT4gdGhpcy5kZWxlZ2F0ZS50YXJnZXRDb25uZWN0ZWQoZWxlbWVudCwgbmFtZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRpc2Nvbm5lY3RUYXJnZXQoZWxlbWVudCwgbmFtZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICh0aGlzLnRhcmdldHNCeU5hbWUuaGFzKG5hbWUsIGVsZW1lbnQpKSB7XG4gICAgICAgICAgICB0aGlzLnRhcmdldHNCeU5hbWUuZGVsZXRlKG5hbWUsIGVsZW1lbnQpO1xuICAgICAgICAgICAgKF9hID0gdGhpcy50b2tlbkxpc3RPYnNlcnZlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnBhdXNlKCgpID0+IHRoaXMuZGVsZWdhdGUudGFyZ2V0RGlzY29ubmVjdGVkKGVsZW1lbnQsIG5hbWUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkaXNjb25uZWN0QWxsVGFyZ2V0cygpIHtcbiAgICAgICAgZm9yIChjb25zdCBuYW1lIG9mIHRoaXMudGFyZ2V0c0J5TmFtZS5rZXlzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgdGhpcy50YXJnZXRzQnlOYW1lLmdldFZhbHVlc0ZvcktleShuYW1lKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzY29ubmVjdFRhcmdldChlbGVtZW50LCBuYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgYXR0cmlidXRlTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIGBkYXRhLSR7dGhpcy5jb250ZXh0LmlkZW50aWZpZXJ9LXRhcmdldGA7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0LmVsZW1lbnQ7XG4gICAgfVxuICAgIGdldCBzY29wZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5zY29wZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlYWRJbmhlcml0YWJsZVN0YXRpY0FycmF5VmFsdWVzKGNvbnN0cnVjdG9yLCBwcm9wZXJ0eU5hbWUpIHtcbiAgICBjb25zdCBhbmNlc3RvcnMgPSBnZXRBbmNlc3RvcnNGb3JDb25zdHJ1Y3Rvcihjb25zdHJ1Y3Rvcik7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oYW5jZXN0b3JzLnJlZHVjZSgodmFsdWVzLCBjb25zdHJ1Y3RvcikgPT4ge1xuICAgICAgICBnZXRPd25TdGF0aWNBcnJheVZhbHVlcyhjb25zdHJ1Y3RvciwgcHJvcGVydHlOYW1lKS5mb3JFYWNoKChuYW1lKSA9PiB2YWx1ZXMuYWRkKG5hbWUpKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICB9LCBuZXcgU2V0KCkpKTtcbn1cbmZ1bmN0aW9uIHJlYWRJbmhlcml0YWJsZVN0YXRpY09iamVjdFBhaXJzKGNvbnN0cnVjdG9yLCBwcm9wZXJ0eU5hbWUpIHtcbiAgICBjb25zdCBhbmNlc3RvcnMgPSBnZXRBbmNlc3RvcnNGb3JDb25zdHJ1Y3Rvcihjb25zdHJ1Y3Rvcik7XG4gICAgcmV0dXJuIGFuY2VzdG9ycy5yZWR1Y2UoKHBhaXJzLCBjb25zdHJ1Y3RvcikgPT4ge1xuICAgICAgICBwYWlycy5wdXNoKC4uLmdldE93blN0YXRpY09iamVjdFBhaXJzKGNvbnN0cnVjdG9yLCBwcm9wZXJ0eU5hbWUpKTtcbiAgICAgICAgcmV0dXJuIHBhaXJzO1xuICAgIH0sIFtdKTtcbn1cbmZ1bmN0aW9uIGdldEFuY2VzdG9yc0ZvckNvbnN0cnVjdG9yKGNvbnN0cnVjdG9yKSB7XG4gICAgY29uc3QgYW5jZXN0b3JzID0gW107XG4gICAgd2hpbGUgKGNvbnN0cnVjdG9yKSB7XG4gICAgICAgIGFuY2VzdG9ycy5wdXNoKGNvbnN0cnVjdG9yKTtcbiAgICAgICAgY29uc3RydWN0b3IgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoY29uc3RydWN0b3IpO1xuICAgIH1cbiAgICByZXR1cm4gYW5jZXN0b3JzLnJldmVyc2UoKTtcbn1cbmZ1bmN0aW9uIGdldE93blN0YXRpY0FycmF5VmFsdWVzKGNvbnN0cnVjdG9yLCBwcm9wZXJ0eU5hbWUpIHtcbiAgICBjb25zdCBkZWZpbml0aW9uID0gY29uc3RydWN0b3JbcHJvcGVydHlOYW1lXTtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShkZWZpbml0aW9uKSA/IGRlZmluaXRpb24gOiBbXTtcbn1cbmZ1bmN0aW9uIGdldE93blN0YXRpY09iamVjdFBhaXJzKGNvbnN0cnVjdG9yLCBwcm9wZXJ0eU5hbWUpIHtcbiAgICBjb25zdCBkZWZpbml0aW9uID0gY29uc3RydWN0b3JbcHJvcGVydHlOYW1lXTtcbiAgICByZXR1cm4gZGVmaW5pdGlvbiA/IE9iamVjdC5rZXlzKGRlZmluaXRpb24pLm1hcCgoa2V5KSA9PiBba2V5LCBkZWZpbml0aW9uW2tleV1dKSA6IFtdO1xufVxuXG5jbGFzcyBPdXRsZXRPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IoY29udGV4dCwgZGVsZWdhdGUpIHtcbiAgICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICAgICAgdGhpcy5vdXRsZXRzQnlOYW1lID0gbmV3IE11bHRpbWFwKCk7XG4gICAgICAgIHRoaXMub3V0bGV0RWxlbWVudHNCeU5hbWUgPSBuZXcgTXVsdGltYXAoKTtcbiAgICAgICAgdGhpcy5zZWxlY3Rvck9ic2VydmVyTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZU9ic2VydmVyTWFwID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMub3V0bGV0RGVmaW5pdGlvbnMuZm9yRWFjaCgob3V0bGV0TmFtZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0dXBTZWxlY3Rvck9ic2VydmVyRm9yT3V0bGV0KG91dGxldE5hbWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0dXBBdHRyaWJ1dGVPYnNlcnZlckZvck91dGxldChvdXRsZXROYW1lKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZGVwZW5kZW50Q29udGV4dHMuZm9yRWFjaCgoY29udGV4dCkgPT4gY29udGV4dC5yZWZyZXNoKCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlZnJlc2goKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0b3JPYnNlcnZlck1hcC5mb3JFYWNoKChvYnNlcnZlcikgPT4gb2JzZXJ2ZXIucmVmcmVzaCgpKTtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVPYnNlcnZlck1hcC5mb3JFYWNoKChvYnNlcnZlcikgPT4gb2JzZXJ2ZXIucmVmcmVzaCgpKTtcbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3RBbGxPdXRsZXRzKCk7XG4gICAgICAgICAgICB0aGlzLnN0b3BTZWxlY3Rvck9ic2VydmVycygpO1xuICAgICAgICAgICAgdGhpcy5zdG9wQXR0cmlidXRlT2JzZXJ2ZXJzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RvcFNlbGVjdG9yT2JzZXJ2ZXJzKCkge1xuICAgICAgICBpZiAodGhpcy5zZWxlY3Rvck9ic2VydmVyTWFwLnNpemUgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdG9yT2JzZXJ2ZXJNYXAuZm9yRWFjaCgob2JzZXJ2ZXIpID0+IG9ic2VydmVyLnN0b3AoKSk7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdG9yT2JzZXJ2ZXJNYXAuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdG9wQXR0cmlidXRlT2JzZXJ2ZXJzKCkge1xuICAgICAgICBpZiAodGhpcy5hdHRyaWJ1dGVPYnNlcnZlck1hcC5zaXplID4gMCkge1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVPYnNlcnZlck1hcC5mb3JFYWNoKChvYnNlcnZlcikgPT4gb2JzZXJ2ZXIuc3RvcCgpKTtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlT2JzZXJ2ZXJNYXAuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZWxlY3Rvck1hdGNoZWQoZWxlbWVudCwgX3NlbGVjdG9yLCB7IG91dGxldE5hbWUgfSkge1xuICAgICAgICBjb25zdCBvdXRsZXQgPSB0aGlzLmdldE91dGxldChlbGVtZW50LCBvdXRsZXROYW1lKTtcbiAgICAgICAgaWYgKG91dGxldCkge1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0T3V0bGV0KG91dGxldCwgZWxlbWVudCwgb3V0bGV0TmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VsZWN0b3JVbm1hdGNoZWQoZWxlbWVudCwgX3NlbGVjdG9yLCB7IG91dGxldE5hbWUgfSkge1xuICAgICAgICBjb25zdCBvdXRsZXQgPSB0aGlzLmdldE91dGxldEZyb21NYXAoZWxlbWVudCwgb3V0bGV0TmFtZSk7XG4gICAgICAgIGlmIChvdXRsZXQpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzY29ubmVjdE91dGxldChvdXRsZXQsIGVsZW1lbnQsIG91dGxldE5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbGVjdG9yTWF0Y2hFbGVtZW50KGVsZW1lbnQsIHsgb3V0bGV0TmFtZSB9KSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdG9yID0gdGhpcy5zZWxlY3RvcihvdXRsZXROYW1lKTtcbiAgICAgICAgY29uc3QgaGFzT3V0bGV0ID0gdGhpcy5oYXNPdXRsZXQoZWxlbWVudCwgb3V0bGV0TmFtZSk7XG4gICAgICAgIGNvbnN0IGhhc091dGxldENvbnRyb2xsZXIgPSBlbGVtZW50Lm1hdGNoZXMoYFske3RoaXMuc2NoZW1hLmNvbnRyb2xsZXJBdHRyaWJ1dGV9fj0ke291dGxldE5hbWV9XWApO1xuICAgICAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIHJldHVybiBoYXNPdXRsZXQgJiYgaGFzT3V0bGV0Q29udHJvbGxlciAmJiBlbGVtZW50Lm1hdGNoZXMoc2VsZWN0b3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsZW1lbnRNYXRjaGVkQXR0cmlidXRlKF9lbGVtZW50LCBhdHRyaWJ1dGVOYW1lKSB7XG4gICAgICAgIGNvbnN0IG91dGxldE5hbWUgPSB0aGlzLmdldE91dGxldE5hbWVGcm9tT3V0bGV0QXR0cmlidXRlTmFtZShhdHRyaWJ1dGVOYW1lKTtcbiAgICAgICAgaWYgKG91dGxldE5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VsZWN0b3JPYnNlcnZlckZvck91dGxldChvdXRsZXROYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbGVtZW50QXR0cmlidXRlVmFsdWVDaGFuZ2VkKF9lbGVtZW50LCBhdHRyaWJ1dGVOYW1lKSB7XG4gICAgICAgIGNvbnN0IG91dGxldE5hbWUgPSB0aGlzLmdldE91dGxldE5hbWVGcm9tT3V0bGV0QXR0cmlidXRlTmFtZShhdHRyaWJ1dGVOYW1lKTtcbiAgICAgICAgaWYgKG91dGxldE5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VsZWN0b3JPYnNlcnZlckZvck91dGxldChvdXRsZXROYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbGVtZW50VW5tYXRjaGVkQXR0cmlidXRlKF9lbGVtZW50LCBhdHRyaWJ1dGVOYW1lKSB7XG4gICAgICAgIGNvbnN0IG91dGxldE5hbWUgPSB0aGlzLmdldE91dGxldE5hbWVGcm9tT3V0bGV0QXR0cmlidXRlTmFtZShhdHRyaWJ1dGVOYW1lKTtcbiAgICAgICAgaWYgKG91dGxldE5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VsZWN0b3JPYnNlcnZlckZvck91dGxldChvdXRsZXROYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25uZWN0T3V0bGV0KG91dGxldCwgZWxlbWVudCwgb3V0bGV0TmFtZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICghdGhpcy5vdXRsZXRFbGVtZW50c0J5TmFtZS5oYXMob3V0bGV0TmFtZSwgZWxlbWVudCkpIHtcbiAgICAgICAgICAgIHRoaXMub3V0bGV0c0J5TmFtZS5hZGQob3V0bGV0TmFtZSwgb3V0bGV0KTtcbiAgICAgICAgICAgIHRoaXMub3V0bGV0RWxlbWVudHNCeU5hbWUuYWRkKG91dGxldE5hbWUsIGVsZW1lbnQpO1xuICAgICAgICAgICAgKF9hID0gdGhpcy5zZWxlY3Rvck9ic2VydmVyTWFwLmdldChvdXRsZXROYW1lKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnBhdXNlKCgpID0+IHRoaXMuZGVsZWdhdGUub3V0bGV0Q29ubmVjdGVkKG91dGxldCwgZWxlbWVudCwgb3V0bGV0TmFtZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRpc2Nvbm5lY3RPdXRsZXQob3V0bGV0LCBlbGVtZW50LCBvdXRsZXROYW1lKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKHRoaXMub3V0bGV0RWxlbWVudHNCeU5hbWUuaGFzKG91dGxldE5hbWUsIGVsZW1lbnQpKSB7XG4gICAgICAgICAgICB0aGlzLm91dGxldHNCeU5hbWUuZGVsZXRlKG91dGxldE5hbWUsIG91dGxldCk7XG4gICAgICAgICAgICB0aGlzLm91dGxldEVsZW1lbnRzQnlOYW1lLmRlbGV0ZShvdXRsZXROYW1lLCBlbGVtZW50KTtcbiAgICAgICAgICAgIChfYSA9IHRoaXMuc2VsZWN0b3JPYnNlcnZlck1hcFxuICAgICAgICAgICAgICAgIC5nZXQob3V0bGV0TmFtZSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wYXVzZSgoKSA9PiB0aGlzLmRlbGVnYXRlLm91dGxldERpc2Nvbm5lY3RlZChvdXRsZXQsIGVsZW1lbnQsIG91dGxldE5hbWUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkaXNjb25uZWN0QWxsT3V0bGV0cygpIHtcbiAgICAgICAgZm9yIChjb25zdCBvdXRsZXROYW1lIG9mIHRoaXMub3V0bGV0RWxlbWVudHNCeU5hbWUua2V5cykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMub3V0bGV0RWxlbWVudHNCeU5hbWUuZ2V0VmFsdWVzRm9yS2V5KG91dGxldE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBvdXRsZXQgb2YgdGhpcy5vdXRsZXRzQnlOYW1lLmdldFZhbHVlc0ZvcktleShvdXRsZXROYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3RPdXRsZXQob3V0bGV0LCBlbGVtZW50LCBvdXRsZXROYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlU2VsZWN0b3JPYnNlcnZlckZvck91dGxldChvdXRsZXROYW1lKSB7XG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0gdGhpcy5zZWxlY3Rvck9ic2VydmVyTWFwLmdldChvdXRsZXROYW1lKTtcbiAgICAgICAgaWYgKG9ic2VydmVyKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5zZWxlY3RvciA9IHRoaXMuc2VsZWN0b3Iob3V0bGV0TmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0dXBTZWxlY3Rvck9ic2VydmVyRm9yT3V0bGV0KG91dGxldE5hbWUpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0b3IgPSB0aGlzLnNlbGVjdG9yKG91dGxldE5hbWUpO1xuICAgICAgICBjb25zdCBzZWxlY3Rvck9ic2VydmVyID0gbmV3IFNlbGVjdG9yT2JzZXJ2ZXIoZG9jdW1lbnQuYm9keSwgc2VsZWN0b3IsIHRoaXMsIHsgb3V0bGV0TmFtZSB9KTtcbiAgICAgICAgdGhpcy5zZWxlY3Rvck9ic2VydmVyTWFwLnNldChvdXRsZXROYW1lLCBzZWxlY3Rvck9ic2VydmVyKTtcbiAgICAgICAgc2VsZWN0b3JPYnNlcnZlci5zdGFydCgpO1xuICAgIH1cbiAgICBzZXR1cEF0dHJpYnV0ZU9ic2VydmVyRm9yT3V0bGV0KG91dGxldE5hbWUpIHtcbiAgICAgICAgY29uc3QgYXR0cmlidXRlTmFtZSA9IHRoaXMuYXR0cmlidXRlTmFtZUZvck91dGxldE5hbWUob3V0bGV0TmFtZSk7XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZU9ic2VydmVyID0gbmV3IEF0dHJpYnV0ZU9ic2VydmVyKHRoaXMuc2NvcGUuZWxlbWVudCwgYXR0cmlidXRlTmFtZSwgdGhpcyk7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlT2JzZXJ2ZXJNYXAuc2V0KG91dGxldE5hbWUsIGF0dHJpYnV0ZU9ic2VydmVyKTtcbiAgICAgICAgYXR0cmlidXRlT2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICB9XG4gICAgc2VsZWN0b3Iob3V0bGV0TmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY29wZS5vdXRsZXRzLmdldFNlbGVjdG9yRm9yT3V0bGV0TmFtZShvdXRsZXROYW1lKTtcbiAgICB9XG4gICAgYXR0cmlidXRlTmFtZUZvck91dGxldE5hbWUob3V0bGV0TmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY29wZS5zY2hlbWEub3V0bGV0QXR0cmlidXRlRm9yU2NvcGUodGhpcy5pZGVudGlmaWVyLCBvdXRsZXROYW1lKTtcbiAgICB9XG4gICAgZ2V0T3V0bGV0TmFtZUZyb21PdXRsZXRBdHRyaWJ1dGVOYW1lKGF0dHJpYnV0ZU5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3V0bGV0RGVmaW5pdGlvbnMuZmluZCgob3V0bGV0TmFtZSkgPT4gdGhpcy5hdHRyaWJ1dGVOYW1lRm9yT3V0bGV0TmFtZShvdXRsZXROYW1lKSA9PT0gYXR0cmlidXRlTmFtZSk7XG4gICAgfVxuICAgIGdldCBvdXRsZXREZXBlbmRlbmNpZXMoKSB7XG4gICAgICAgIGNvbnN0IGRlcGVuZGVuY2llcyA9IG5ldyBNdWx0aW1hcCgpO1xuICAgICAgICB0aGlzLnJvdXRlci5tb2R1bGVzLmZvckVhY2goKG1vZHVsZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29uc3RydWN0b3IgPSBtb2R1bGUuZGVmaW5pdGlvbi5jb250cm9sbGVyQ29uc3RydWN0b3I7XG4gICAgICAgICAgICBjb25zdCBvdXRsZXRzID0gcmVhZEluaGVyaXRhYmxlU3RhdGljQXJyYXlWYWx1ZXMoY29uc3RydWN0b3IsIFwib3V0bGV0c1wiKTtcbiAgICAgICAgICAgIG91dGxldHMuZm9yRWFjaCgob3V0bGV0KSA9PiBkZXBlbmRlbmNpZXMuYWRkKG91dGxldCwgbW9kdWxlLmlkZW50aWZpZXIpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkZXBlbmRlbmNpZXM7XG4gICAgfVxuICAgIGdldCBvdXRsZXREZWZpbml0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3V0bGV0RGVwZW5kZW5jaWVzLmdldEtleXNGb3JWYWx1ZSh0aGlzLmlkZW50aWZpZXIpO1xuICAgIH1cbiAgICBnZXQgZGVwZW5kZW50Q29udHJvbGxlcklkZW50aWZpZXJzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vdXRsZXREZXBlbmRlbmNpZXMuZ2V0VmFsdWVzRm9yS2V5KHRoaXMuaWRlbnRpZmllcik7XG4gICAgfVxuICAgIGdldCBkZXBlbmRlbnRDb250ZXh0cygpIHtcbiAgICAgICAgY29uc3QgaWRlbnRpZmllcnMgPSB0aGlzLmRlcGVuZGVudENvbnRyb2xsZXJJZGVudGlmaWVycztcbiAgICAgICAgcmV0dXJuIHRoaXMucm91dGVyLmNvbnRleHRzLmZpbHRlcigoY29udGV4dCkgPT4gaWRlbnRpZmllcnMuaW5jbHVkZXMoY29udGV4dC5pZGVudGlmaWVyKSk7XG4gICAgfVxuICAgIGhhc091dGxldChlbGVtZW50LCBvdXRsZXROYW1lKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuZ2V0T3V0bGV0KGVsZW1lbnQsIG91dGxldE5hbWUpIHx8ICEhdGhpcy5nZXRPdXRsZXRGcm9tTWFwKGVsZW1lbnQsIG91dGxldE5hbWUpO1xuICAgIH1cbiAgICBnZXRPdXRsZXQoZWxlbWVudCwgb3V0bGV0TmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBsaWNhdGlvbi5nZXRDb250cm9sbGVyRm9yRWxlbWVudEFuZElkZW50aWZpZXIoZWxlbWVudCwgb3V0bGV0TmFtZSk7XG4gICAgfVxuICAgIGdldE91dGxldEZyb21NYXAoZWxlbWVudCwgb3V0bGV0TmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5vdXRsZXRzQnlOYW1lLmdldFZhbHVlc0ZvcktleShvdXRsZXROYW1lKS5maW5kKChvdXRsZXQpID0+IG91dGxldC5lbGVtZW50ID09PSBlbGVtZW50KTtcbiAgICB9XG4gICAgZ2V0IHNjb3BlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0LnNjb3BlO1xuICAgIH1cbiAgICBnZXQgc2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0LnNjaGVtYTtcbiAgICB9XG4gICAgZ2V0IGlkZW50aWZpZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQuaWRlbnRpZmllcjtcbiAgICB9XG4gICAgZ2V0IGFwcGxpY2F0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0LmFwcGxpY2F0aW9uO1xuICAgIH1cbiAgICBnZXQgcm91dGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBsaWNhdGlvbi5yb3V0ZXI7XG4gICAgfVxufVxuXG5jbGFzcyBDb250ZXh0IHtcbiAgICBjb25zdHJ1Y3Rvcihtb2R1bGUsIHNjb3BlKSB7XG4gICAgICAgIHRoaXMubG9nRGVidWdBY3Rpdml0eSA9IChmdW5jdGlvbk5hbWUsIGRldGFpbCA9IHt9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IGlkZW50aWZpZXIsIGNvbnRyb2xsZXIsIGVsZW1lbnQgfSA9IHRoaXM7XG4gICAgICAgICAgICBkZXRhaWwgPSBPYmplY3QuYXNzaWduKHsgaWRlbnRpZmllciwgY29udHJvbGxlciwgZWxlbWVudCB9LCBkZXRhaWwpO1xuICAgICAgICAgICAgdGhpcy5hcHBsaWNhdGlvbi5sb2dEZWJ1Z0FjdGl2aXR5KHRoaXMuaWRlbnRpZmllciwgZnVuY3Rpb25OYW1lLCBkZXRhaWwpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm1vZHVsZSA9IG1vZHVsZTtcbiAgICAgICAgdGhpcy5zY29wZSA9IHNjb3BlO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIgPSBuZXcgbW9kdWxlLmNvbnRyb2xsZXJDb25zdHJ1Y3Rvcih0aGlzKTtcbiAgICAgICAgdGhpcy5iaW5kaW5nT2JzZXJ2ZXIgPSBuZXcgQmluZGluZ09ic2VydmVyKHRoaXMsIHRoaXMuZGlzcGF0Y2hlcik7XG4gICAgICAgIHRoaXMudmFsdWVPYnNlcnZlciA9IG5ldyBWYWx1ZU9ic2VydmVyKHRoaXMsIHRoaXMuY29udHJvbGxlcik7XG4gICAgICAgIHRoaXMudGFyZ2V0T2JzZXJ2ZXIgPSBuZXcgVGFyZ2V0T2JzZXJ2ZXIodGhpcywgdGhpcyk7XG4gICAgICAgIHRoaXMub3V0bGV0T2JzZXJ2ZXIgPSBuZXcgT3V0bGV0T2JzZXJ2ZXIodGhpcywgdGhpcyk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIuaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgICAgdGhpcy5sb2dEZWJ1Z0FjdGl2aXR5KFwiaW5pdGlhbGl6ZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIFwiaW5pdGlhbGl6aW5nIGNvbnRyb2xsZXJcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29ubmVjdCgpIHtcbiAgICAgICAgdGhpcy5iaW5kaW5nT2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICAgICAgdGhpcy52YWx1ZU9ic2VydmVyLnN0YXJ0KCk7XG4gICAgICAgIHRoaXMudGFyZ2V0T2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICAgICAgdGhpcy5vdXRsZXRPYnNlcnZlci5zdGFydCgpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLmNvbm5lY3QoKTtcbiAgICAgICAgICAgIHRoaXMubG9nRGVidWdBY3Rpdml0eShcImNvbm5lY3RcIik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBcImNvbm5lY3RpbmcgY29udHJvbGxlclwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWZyZXNoKCkge1xuICAgICAgICB0aGlzLm91dGxldE9ic2VydmVyLnJlZnJlc2goKTtcbiAgICB9XG4gICAgZGlzY29ubmVjdCgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICB0aGlzLmxvZ0RlYnVnQWN0aXZpdHkoXCJkaXNjb25uZWN0XCIpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgXCJkaXNjb25uZWN0aW5nIGNvbnRyb2xsZXJcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vdXRsZXRPYnNlcnZlci5zdG9wKCk7XG4gICAgICAgIHRoaXMudGFyZ2V0T2JzZXJ2ZXIuc3RvcCgpO1xuICAgICAgICB0aGlzLnZhbHVlT2JzZXJ2ZXIuc3RvcCgpO1xuICAgICAgICB0aGlzLmJpbmRpbmdPYnNlcnZlci5zdG9wKCk7XG4gICAgfVxuICAgIGdldCBhcHBsaWNhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubW9kdWxlLmFwcGxpY2F0aW9uO1xuICAgIH1cbiAgICBnZXQgaWRlbnRpZmllcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubW9kdWxlLmlkZW50aWZpZXI7XG4gICAgfVxuICAgIGdldCBzY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcGxpY2F0aW9uLnNjaGVtYTtcbiAgICB9XG4gICAgZ2V0IGRpc3BhdGNoZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcGxpY2F0aW9uLmRpc3BhdGNoZXI7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY29wZS5lbGVtZW50O1xuICAgIH1cbiAgICBnZXQgcGFyZW50RWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgIH1cbiAgICBoYW5kbGVFcnJvcihlcnJvciwgbWVzc2FnZSwgZGV0YWlsID0ge30pIHtcbiAgICAgICAgY29uc3QgeyBpZGVudGlmaWVyLCBjb250cm9sbGVyLCBlbGVtZW50IH0gPSB0aGlzO1xuICAgICAgICBkZXRhaWwgPSBPYmplY3QuYXNzaWduKHsgaWRlbnRpZmllciwgY29udHJvbGxlciwgZWxlbWVudCB9LCBkZXRhaWwpO1xuICAgICAgICB0aGlzLmFwcGxpY2F0aW9uLmhhbmRsZUVycm9yKGVycm9yLCBgRXJyb3IgJHttZXNzYWdlfWAsIGRldGFpbCk7XG4gICAgfVxuICAgIHRhcmdldENvbm5lY3RlZChlbGVtZW50LCBuYW1lKSB7XG4gICAgICAgIHRoaXMuaW52b2tlQ29udHJvbGxlck1ldGhvZChgJHtuYW1lfVRhcmdldENvbm5lY3RlZGAsIGVsZW1lbnQpO1xuICAgIH1cbiAgICB0YXJnZXREaXNjb25uZWN0ZWQoZWxlbWVudCwgbmFtZSkge1xuICAgICAgICB0aGlzLmludm9rZUNvbnRyb2xsZXJNZXRob2QoYCR7bmFtZX1UYXJnZXREaXNjb25uZWN0ZWRgLCBlbGVtZW50KTtcbiAgICB9XG4gICAgb3V0bGV0Q29ubmVjdGVkKG91dGxldCwgZWxlbWVudCwgbmFtZSkge1xuICAgICAgICB0aGlzLmludm9rZUNvbnRyb2xsZXJNZXRob2QoYCR7bmFtZXNwYWNlQ2FtZWxpemUobmFtZSl9T3V0bGV0Q29ubmVjdGVkYCwgb3V0bGV0LCBlbGVtZW50KTtcbiAgICB9XG4gICAgb3V0bGV0RGlzY29ubmVjdGVkKG91dGxldCwgZWxlbWVudCwgbmFtZSkge1xuICAgICAgICB0aGlzLmludm9rZUNvbnRyb2xsZXJNZXRob2QoYCR7bmFtZXNwYWNlQ2FtZWxpemUobmFtZSl9T3V0bGV0RGlzY29ubmVjdGVkYCwgb3V0bGV0LCBlbGVtZW50KTtcbiAgICB9XG4gICAgaW52b2tlQ29udHJvbGxlck1ldGhvZChtZXRob2ROYW1lLCAuLi5hcmdzKSB7XG4gICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSB0aGlzLmNvbnRyb2xsZXI7XG4gICAgICAgIGlmICh0eXBlb2YgY29udHJvbGxlclttZXRob2ROYW1lXSA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXJbbWV0aG9kTmFtZV0oLi4uYXJncyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGJsZXNzKGNvbnN0cnVjdG9yKSB7XG4gICAgcmV0dXJuIHNoYWRvdyhjb25zdHJ1Y3RvciwgZ2V0Qmxlc3NlZFByb3BlcnRpZXMoY29uc3RydWN0b3IpKTtcbn1cbmZ1bmN0aW9uIHNoYWRvdyhjb25zdHJ1Y3RvciwgcHJvcGVydGllcykge1xuICAgIGNvbnN0IHNoYWRvd0NvbnN0cnVjdG9yID0gZXh0ZW5kKGNvbnN0cnVjdG9yKTtcbiAgICBjb25zdCBzaGFkb3dQcm9wZXJ0aWVzID0gZ2V0U2hhZG93UHJvcGVydGllcyhjb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3BlcnRpZXMpO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHNoYWRvd0NvbnN0cnVjdG9yLnByb3RvdHlwZSwgc2hhZG93UHJvcGVydGllcyk7XG4gICAgcmV0dXJuIHNoYWRvd0NvbnN0cnVjdG9yO1xufVxuZnVuY3Rpb24gZ2V0Qmxlc3NlZFByb3BlcnRpZXMoY29uc3RydWN0b3IpIHtcbiAgICBjb25zdCBibGVzc2luZ3MgPSByZWFkSW5oZXJpdGFibGVTdGF0aWNBcnJheVZhbHVlcyhjb25zdHJ1Y3RvciwgXCJibGVzc2luZ3NcIik7XG4gICAgcmV0dXJuIGJsZXNzaW5ncy5yZWR1Y2UoKGJsZXNzZWRQcm9wZXJ0aWVzLCBibGVzc2luZykgPT4ge1xuICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0gYmxlc3NpbmcoY29uc3RydWN0b3IpO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwdG9yID0gYmxlc3NlZFByb3BlcnRpZXNba2V5XSB8fCB7fTtcbiAgICAgICAgICAgIGJsZXNzZWRQcm9wZXJ0aWVzW2tleV0gPSBPYmplY3QuYXNzaWduKGRlc2NyaXB0b3IsIHByb3BlcnRpZXNba2V5XSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJsZXNzZWRQcm9wZXJ0aWVzO1xuICAgIH0sIHt9KTtcbn1cbmZ1bmN0aW9uIGdldFNoYWRvd1Byb3BlcnRpZXMocHJvdG90eXBlLCBwcm9wZXJ0aWVzKSB7XG4gICAgcmV0dXJuIGdldE93bktleXMocHJvcGVydGllcykucmVkdWNlKChzaGFkb3dQcm9wZXJ0aWVzLCBrZXkpID0+IHtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRvciA9IGdldFNoYWRvd2VkRGVzY3JpcHRvcihwcm90b3R5cGUsIHByb3BlcnRpZXMsIGtleSk7XG4gICAgICAgIGlmIChkZXNjcmlwdG9yKSB7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHNoYWRvd1Byb3BlcnRpZXMsIHsgW2tleV06IGRlc2NyaXB0b3IgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNoYWRvd1Byb3BlcnRpZXM7XG4gICAgfSwge30pO1xufVxuZnVuY3Rpb24gZ2V0U2hhZG93ZWREZXNjcmlwdG9yKHByb3RvdHlwZSwgcHJvcGVydGllcywga2V5KSB7XG4gICAgY29uc3Qgc2hhZG93aW5nRGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocHJvdG90eXBlLCBrZXkpO1xuICAgIGNvbnN0IHNoYWRvd2VkQnlWYWx1ZSA9IHNoYWRvd2luZ0Rlc2NyaXB0b3IgJiYgXCJ2YWx1ZVwiIGluIHNoYWRvd2luZ0Rlc2NyaXB0b3I7XG4gICAgaWYgKCFzaGFkb3dlZEJ5VmFsdWUpIHtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocHJvcGVydGllcywga2V5KS52YWx1ZTtcbiAgICAgICAgaWYgKHNoYWRvd2luZ0Rlc2NyaXB0b3IpIHtcbiAgICAgICAgICAgIGRlc2NyaXB0b3IuZ2V0ID0gc2hhZG93aW5nRGVzY3JpcHRvci5nZXQgfHwgZGVzY3JpcHRvci5nZXQ7XG4gICAgICAgICAgICBkZXNjcmlwdG9yLnNldCA9IHNoYWRvd2luZ0Rlc2NyaXB0b3Iuc2V0IHx8IGRlc2NyaXB0b3Iuc2V0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZXNjcmlwdG9yO1xuICAgIH1cbn1cbmNvbnN0IGdldE93bktleXMgPSAoKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIChvYmplY3QpID0+IFsuLi5PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhvYmplY3QpLCAuLi5PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCldO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xuICAgIH1cbn0pKCk7XG5jb25zdCBleHRlbmQgPSAoKCkgPT4ge1xuICAgIGZ1bmN0aW9uIGV4dGVuZFdpdGhSZWZsZWN0KGNvbnN0cnVjdG9yKSB7XG4gICAgICAgIGZ1bmN0aW9uIGV4dGVuZGVkKCkge1xuICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3QuY29uc3RydWN0KGNvbnN0cnVjdG9yLCBhcmd1bWVudHMsIG5ldy50YXJnZXQpO1xuICAgICAgICB9XG4gICAgICAgIGV4dGVuZGVkLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoY29uc3RydWN0b3IucHJvdG90eXBlLCB7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogZXh0ZW5kZWQgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIFJlZmxlY3Quc2V0UHJvdG90eXBlT2YoZXh0ZW5kZWQsIGNvbnN0cnVjdG9yKTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZGVkO1xuICAgIH1cbiAgICBmdW5jdGlvbiB0ZXN0UmVmbGVjdEV4dGVuc2lvbigpIHtcbiAgICAgICAgY29uc3QgYSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYS5jYWxsKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBiID0gZXh0ZW5kV2l0aFJlZmxlY3QoYSk7XG4gICAgICAgIGIucHJvdG90eXBlLmEgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgICAgIHJldHVybiBuZXcgYigpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICB0ZXN0UmVmbGVjdEV4dGVuc2lvbigpO1xuICAgICAgICByZXR1cm4gZXh0ZW5kV2l0aFJlZmxlY3Q7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXR1cm4gKGNvbnN0cnVjdG9yKSA9PiBjbGFzcyBleHRlbmRlZCBleHRlbmRzIGNvbnN0cnVjdG9yIHtcbiAgICAgICAgfTtcbiAgICB9XG59KSgpO1xuXG5mdW5jdGlvbiBibGVzc0RlZmluaXRpb24oZGVmaW5pdGlvbikge1xuICAgIHJldHVybiB7XG4gICAgICAgIGlkZW50aWZpZXI6IGRlZmluaXRpb24uaWRlbnRpZmllcixcbiAgICAgICAgY29udHJvbGxlckNvbnN0cnVjdG9yOiBibGVzcyhkZWZpbml0aW9uLmNvbnRyb2xsZXJDb25zdHJ1Y3RvciksXG4gICAgfTtcbn1cblxuY2xhc3MgTW9kdWxlIHtcbiAgICBjb25zdHJ1Y3RvcihhcHBsaWNhdGlvbiwgZGVmaW5pdGlvbikge1xuICAgICAgICB0aGlzLmFwcGxpY2F0aW9uID0gYXBwbGljYXRpb247XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbiA9IGJsZXNzRGVmaW5pdGlvbihkZWZpbml0aW9uKTtcbiAgICAgICAgdGhpcy5jb250ZXh0c0J5U2NvcGUgPSBuZXcgV2Vha01hcCgpO1xuICAgICAgICB0aGlzLmNvbm5lY3RlZENvbnRleHRzID0gbmV3IFNldCgpO1xuICAgIH1cbiAgICBnZXQgaWRlbnRpZmllcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmaW5pdGlvbi5pZGVudGlmaWVyO1xuICAgIH1cbiAgICBnZXQgY29udHJvbGxlckNvbnN0cnVjdG9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZWZpbml0aW9uLmNvbnRyb2xsZXJDb25zdHJ1Y3RvcjtcbiAgICB9XG4gICAgZ2V0IGNvbnRleHRzKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmNvbm5lY3RlZENvbnRleHRzKTtcbiAgICB9XG4gICAgY29ubmVjdENvbnRleHRGb3JTY29wZShzY29wZSkge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5mZXRjaENvbnRleHRGb3JTY29wZShzY29wZSk7XG4gICAgICAgIHRoaXMuY29ubmVjdGVkQ29udGV4dHMuYWRkKGNvbnRleHQpO1xuICAgICAgICBjb250ZXh0LmNvbm5lY3QoKTtcbiAgICB9XG4gICAgZGlzY29ubmVjdENvbnRleHRGb3JTY29wZShzY29wZSkge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5jb250ZXh0c0J5U2NvcGUuZ2V0KHNjb3BlKTtcbiAgICAgICAgaWYgKGNvbnRleHQpIHtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGVkQ29udGV4dHMuZGVsZXRlKGNvbnRleHQpO1xuICAgICAgICAgICAgY29udGV4dC5kaXNjb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmV0Y2hDb250ZXh0Rm9yU2NvcGUoc2NvcGUpIHtcbiAgICAgICAgbGV0IGNvbnRleHQgPSB0aGlzLmNvbnRleHRzQnlTY29wZS5nZXQoc2NvcGUpO1xuICAgICAgICBpZiAoIWNvbnRleHQpIHtcbiAgICAgICAgICAgIGNvbnRleHQgPSBuZXcgQ29udGV4dCh0aGlzLCBzY29wZSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHRzQnlTY29wZS5zZXQoc2NvcGUsIGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250ZXh0O1xuICAgIH1cbn1cblxuY2xhc3MgQ2xhc3NNYXAge1xuICAgIGNvbnN0cnVjdG9yKHNjb3BlKSB7XG4gICAgICAgIHRoaXMuc2NvcGUgPSBzY29wZTtcbiAgICB9XG4gICAgaGFzKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5oYXModGhpcy5nZXREYXRhS2V5KG5hbWUpKTtcbiAgICB9XG4gICAgZ2V0KG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QWxsKG5hbWUpWzBdO1xuICAgIH1cbiAgICBnZXRBbGwobmFtZSkge1xuICAgICAgICBjb25zdCB0b2tlblN0cmluZyA9IHRoaXMuZGF0YS5nZXQodGhpcy5nZXREYXRhS2V5KG5hbWUpKSB8fCBcIlwiO1xuICAgICAgICByZXR1cm4gdG9rZW5pemUodG9rZW5TdHJpbmcpO1xuICAgIH1cbiAgICBnZXRBdHRyaWJ1dGVOYW1lKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5nZXRBdHRyaWJ1dGVOYW1lRm9yS2V5KHRoaXMuZ2V0RGF0YUtleShuYW1lKSk7XG4gICAgfVxuICAgIGdldERhdGFLZXkobmFtZSkge1xuICAgICAgICByZXR1cm4gYCR7bmFtZX0tY2xhc3NgO1xuICAgIH1cbiAgICBnZXQgZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGUuZGF0YTtcbiAgICB9XG59XG5cbmNsYXNzIERhdGFNYXAge1xuICAgIGNvbnN0cnVjdG9yKHNjb3BlKSB7XG4gICAgICAgIHRoaXMuc2NvcGUgPSBzY29wZTtcbiAgICB9XG4gICAgZ2V0IGVsZW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3BlLmVsZW1lbnQ7XG4gICAgfVxuICAgIGdldCBpZGVudGlmaWVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY29wZS5pZGVudGlmaWVyO1xuICAgIH1cbiAgICBnZXQoa2V5KSB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLmdldEF0dHJpYnV0ZU5hbWVGb3JLZXkoa2V5KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUobmFtZSk7XG4gICAgfVxuICAgIHNldChrZXksIHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLmdldEF0dHJpYnV0ZU5hbWVGb3JLZXkoa2V5KTtcbiAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldChrZXkpO1xuICAgIH1cbiAgICBoYXMoa2V5KSB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLmdldEF0dHJpYnV0ZU5hbWVGb3JLZXkoa2V5KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5oYXNBdHRyaWJ1dGUobmFtZSk7XG4gICAgfVxuICAgIGRlbGV0ZShrZXkpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzKGtleSkpIHtcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLmdldEF0dHJpYnV0ZU5hbWVGb3JLZXkoa2V5KTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRBdHRyaWJ1dGVOYW1lRm9yS2V5KGtleSkge1xuICAgICAgICByZXR1cm4gYGRhdGEtJHt0aGlzLmlkZW50aWZpZXJ9LSR7ZGFzaGVyaXplKGtleSl9YDtcbiAgICB9XG59XG5cbmNsYXNzIEd1aWRlIHtcbiAgICBjb25zdHJ1Y3Rvcihsb2dnZXIpIHtcbiAgICAgICAgdGhpcy53YXJuZWRLZXlzQnlPYmplY3QgPSBuZXcgV2Vha01hcCgpO1xuICAgICAgICB0aGlzLmxvZ2dlciA9IGxvZ2dlcjtcbiAgICB9XG4gICAgd2FybihvYmplY3QsIGtleSwgbWVzc2FnZSkge1xuICAgICAgICBsZXQgd2FybmVkS2V5cyA9IHRoaXMud2FybmVkS2V5c0J5T2JqZWN0LmdldChvYmplY3QpO1xuICAgICAgICBpZiAoIXdhcm5lZEtleXMpIHtcbiAgICAgICAgICAgIHdhcm5lZEtleXMgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICB0aGlzLndhcm5lZEtleXNCeU9iamVjdC5zZXQob2JqZWN0LCB3YXJuZWRLZXlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXdhcm5lZEtleXMuaGFzKGtleSkpIHtcbiAgICAgICAgICAgIHdhcm5lZEtleXMuYWRkKGtleSk7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKG1lc3NhZ2UsIG9iamVjdCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGF0dHJpYnV0ZVZhbHVlQ29udGFpbnNUb2tlbihhdHRyaWJ1dGVOYW1lLCB0b2tlbikge1xuICAgIHJldHVybiBgWyR7YXR0cmlidXRlTmFtZX1+PVwiJHt0b2tlbn1cIl1gO1xufVxuXG5jbGFzcyBUYXJnZXRTZXQge1xuICAgIGNvbnN0cnVjdG9yKHNjb3BlKSB7XG4gICAgICAgIHRoaXMuc2NvcGUgPSBzY29wZTtcbiAgICB9XG4gICAgZ2V0IGVsZW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3BlLmVsZW1lbnQ7XG4gICAgfVxuICAgIGdldCBpZGVudGlmaWVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY29wZS5pZGVudGlmaWVyO1xuICAgIH1cbiAgICBnZXQgc2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY29wZS5zY2hlbWE7XG4gICAgfVxuICAgIGhhcyh0YXJnZXROYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmQodGFyZ2V0TmFtZSkgIT0gbnVsbDtcbiAgICB9XG4gICAgZmluZCguLi50YXJnZXROYW1lcykge1xuICAgICAgICByZXR1cm4gdGFyZ2V0TmFtZXMucmVkdWNlKCh0YXJnZXQsIHRhcmdldE5hbWUpID0+IHRhcmdldCB8fCB0aGlzLmZpbmRUYXJnZXQodGFyZ2V0TmFtZSkgfHwgdGhpcy5maW5kTGVnYWN5VGFyZ2V0KHRhcmdldE5hbWUpLCB1bmRlZmluZWQpO1xuICAgIH1cbiAgICBmaW5kQWxsKC4uLnRhcmdldE5hbWVzKSB7XG4gICAgICAgIHJldHVybiB0YXJnZXROYW1lcy5yZWR1Y2UoKHRhcmdldHMsIHRhcmdldE5hbWUpID0+IFtcbiAgICAgICAgICAgIC4uLnRhcmdldHMsXG4gICAgICAgICAgICAuLi50aGlzLmZpbmRBbGxUYXJnZXRzKHRhcmdldE5hbWUpLFxuICAgICAgICAgICAgLi4udGhpcy5maW5kQWxsTGVnYWN5VGFyZ2V0cyh0YXJnZXROYW1lKSxcbiAgICAgICAgXSwgW10pO1xuICAgIH1cbiAgICBmaW5kVGFyZ2V0KHRhcmdldE5hbWUpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0b3IgPSB0aGlzLmdldFNlbGVjdG9yRm9yVGFyZ2V0TmFtZSh0YXJnZXROYW1lKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGUuZmluZEVsZW1lbnQoc2VsZWN0b3IpO1xuICAgIH1cbiAgICBmaW5kQWxsVGFyZ2V0cyh0YXJnZXROYW1lKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdG9yID0gdGhpcy5nZXRTZWxlY3RvckZvclRhcmdldE5hbWUodGFyZ2V0TmFtZSk7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3BlLmZpbmRBbGxFbGVtZW50cyhzZWxlY3Rvcik7XG4gICAgfVxuICAgIGdldFNlbGVjdG9yRm9yVGFyZ2V0TmFtZSh0YXJnZXROYW1lKSB7XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZU5hbWUgPSB0aGlzLnNjaGVtYS50YXJnZXRBdHRyaWJ1dGVGb3JTY29wZSh0aGlzLmlkZW50aWZpZXIpO1xuICAgICAgICByZXR1cm4gYXR0cmlidXRlVmFsdWVDb250YWluc1Rva2VuKGF0dHJpYnV0ZU5hbWUsIHRhcmdldE5hbWUpO1xuICAgIH1cbiAgICBmaW5kTGVnYWN5VGFyZ2V0KHRhcmdldE5hbWUpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0b3IgPSB0aGlzLmdldExlZ2FjeVNlbGVjdG9yRm9yVGFyZ2V0TmFtZSh0YXJnZXROYW1lKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVwcmVjYXRlKHRoaXMuc2NvcGUuZmluZEVsZW1lbnQoc2VsZWN0b3IpLCB0YXJnZXROYW1lKTtcbiAgICB9XG4gICAgZmluZEFsbExlZ2FjeVRhcmdldHModGFyZ2V0TmFtZSkge1xuICAgICAgICBjb25zdCBzZWxlY3RvciA9IHRoaXMuZ2V0TGVnYWN5U2VsZWN0b3JGb3JUYXJnZXROYW1lKHRhcmdldE5hbWUpO1xuICAgICAgICByZXR1cm4gdGhpcy5zY29wZS5maW5kQWxsRWxlbWVudHMoc2VsZWN0b3IpLm1hcCgoZWxlbWVudCkgPT4gdGhpcy5kZXByZWNhdGUoZWxlbWVudCwgdGFyZ2V0TmFtZSkpO1xuICAgIH1cbiAgICBnZXRMZWdhY3lTZWxlY3RvckZvclRhcmdldE5hbWUodGFyZ2V0TmFtZSkge1xuICAgICAgICBjb25zdCB0YXJnZXREZXNjcmlwdG9yID0gYCR7dGhpcy5pZGVudGlmaWVyfS4ke3RhcmdldE5hbWV9YDtcbiAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZVZhbHVlQ29udGFpbnNUb2tlbih0aGlzLnNjaGVtYS50YXJnZXRBdHRyaWJ1dGUsIHRhcmdldERlc2NyaXB0b3IpO1xuICAgIH1cbiAgICBkZXByZWNhdGUoZWxlbWVudCwgdGFyZ2V0TmFtZSkge1xuICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgICAgY29uc3QgeyBpZGVudGlmaWVyIH0gPSB0aGlzO1xuICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlTmFtZSA9IHRoaXMuc2NoZW1hLnRhcmdldEF0dHJpYnV0ZTtcbiAgICAgICAgICAgIGNvbnN0IHJldmlzZWRBdHRyaWJ1dGVOYW1lID0gdGhpcy5zY2hlbWEudGFyZ2V0QXR0cmlidXRlRm9yU2NvcGUoaWRlbnRpZmllcik7XG4gICAgICAgICAgICB0aGlzLmd1aWRlLndhcm4oZWxlbWVudCwgYHRhcmdldDoke3RhcmdldE5hbWV9YCwgYFBsZWFzZSByZXBsYWNlICR7YXR0cmlidXRlTmFtZX09XCIke2lkZW50aWZpZXJ9LiR7dGFyZ2V0TmFtZX1cIiB3aXRoICR7cmV2aXNlZEF0dHJpYnV0ZU5hbWV9PVwiJHt0YXJnZXROYW1lfVwiLiBgICtcbiAgICAgICAgICAgICAgICBgVGhlICR7YXR0cmlidXRlTmFtZX0gYXR0cmlidXRlIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSB2ZXJzaW9uIG9mIFN0aW11bHVzLmApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cbiAgICBnZXQgZ3VpZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3BlLmd1aWRlO1xuICAgIH1cbn1cblxuY2xhc3MgT3V0bGV0U2V0IHtcbiAgICBjb25zdHJ1Y3RvcihzY29wZSwgY29udHJvbGxlckVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5zY29wZSA9IHNjb3BlO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXJFbGVtZW50ID0gY29udHJvbGxlckVsZW1lbnQ7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY29wZS5lbGVtZW50O1xuICAgIH1cbiAgICBnZXQgaWRlbnRpZmllcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGUuaWRlbnRpZmllcjtcbiAgICB9XG4gICAgZ2V0IHNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGUuc2NoZW1hO1xuICAgIH1cbiAgICBoYXMob3V0bGV0TmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kKG91dGxldE5hbWUpICE9IG51bGw7XG4gICAgfVxuICAgIGZpbmQoLi4ub3V0bGV0TmFtZXMpIHtcbiAgICAgICAgcmV0dXJuIG91dGxldE5hbWVzLnJlZHVjZSgob3V0bGV0LCBvdXRsZXROYW1lKSA9PiBvdXRsZXQgfHwgdGhpcy5maW5kT3V0bGV0KG91dGxldE5hbWUpLCB1bmRlZmluZWQpO1xuICAgIH1cbiAgICBmaW5kQWxsKC4uLm91dGxldE5hbWVzKSB7XG4gICAgICAgIHJldHVybiBvdXRsZXROYW1lcy5yZWR1Y2UoKG91dGxldHMsIG91dGxldE5hbWUpID0+IFsuLi5vdXRsZXRzLCAuLi50aGlzLmZpbmRBbGxPdXRsZXRzKG91dGxldE5hbWUpXSwgW10pO1xuICAgIH1cbiAgICBnZXRTZWxlY3RvckZvck91dGxldE5hbWUob3V0bGV0TmFtZSkge1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGVOYW1lID0gdGhpcy5zY2hlbWEub3V0bGV0QXR0cmlidXRlRm9yU2NvcGUodGhpcy5pZGVudGlmaWVyLCBvdXRsZXROYW1lKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udHJvbGxlckVsZW1lbnQuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpO1xuICAgIH1cbiAgICBmaW5kT3V0bGV0KG91dGxldE5hbWUpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0b3IgPSB0aGlzLmdldFNlbGVjdG9yRm9yT3V0bGV0TmFtZShvdXRsZXROYW1lKTtcbiAgICAgICAgaWYgKHNlbGVjdG9yKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluZEVsZW1lbnQoc2VsZWN0b3IsIG91dGxldE5hbWUpO1xuICAgIH1cbiAgICBmaW5kQWxsT3V0bGV0cyhvdXRsZXROYW1lKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdG9yID0gdGhpcy5nZXRTZWxlY3RvckZvck91dGxldE5hbWUob3V0bGV0TmFtZSk7XG4gICAgICAgIHJldHVybiBzZWxlY3RvciA/IHRoaXMuZmluZEFsbEVsZW1lbnRzKHNlbGVjdG9yLCBvdXRsZXROYW1lKSA6IFtdO1xuICAgIH1cbiAgICBmaW5kRWxlbWVudChzZWxlY3Rvciwgb3V0bGV0TmFtZSkge1xuICAgICAgICBjb25zdCBlbGVtZW50cyA9IHRoaXMuc2NvcGUucXVlcnlFbGVtZW50cyhzZWxlY3Rvcik7XG4gICAgICAgIHJldHVybiBlbGVtZW50cy5maWx0ZXIoKGVsZW1lbnQpID0+IHRoaXMubWF0Y2hlc0VsZW1lbnQoZWxlbWVudCwgc2VsZWN0b3IsIG91dGxldE5hbWUpKVswXTtcbiAgICB9XG4gICAgZmluZEFsbEVsZW1lbnRzKHNlbGVjdG9yLCBvdXRsZXROYW1lKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gdGhpcy5zY29wZS5xdWVyeUVsZW1lbnRzKHNlbGVjdG9yKTtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnRzLmZpbHRlcigoZWxlbWVudCkgPT4gdGhpcy5tYXRjaGVzRWxlbWVudChlbGVtZW50LCBzZWxlY3Rvciwgb3V0bGV0TmFtZSkpO1xuICAgIH1cbiAgICBtYXRjaGVzRWxlbWVudChlbGVtZW50LCBzZWxlY3Rvciwgb3V0bGV0TmFtZSkge1xuICAgICAgICBjb25zdCBjb250cm9sbGVyQXR0cmlidXRlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUodGhpcy5zY29wZS5zY2hlbWEuY29udHJvbGxlckF0dHJpYnV0ZSkgfHwgXCJcIjtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQubWF0Y2hlcyhzZWxlY3RvcikgJiYgY29udHJvbGxlckF0dHJpYnV0ZS5zcGxpdChcIiBcIikuaW5jbHVkZXMob3V0bGV0TmFtZSk7XG4gICAgfVxufVxuXG5jbGFzcyBTY29wZSB7XG4gICAgY29uc3RydWN0b3Ioc2NoZW1hLCBlbGVtZW50LCBpZGVudGlmaWVyLCBsb2dnZXIpIHtcbiAgICAgICAgdGhpcy50YXJnZXRzID0gbmV3IFRhcmdldFNldCh0aGlzKTtcbiAgICAgICAgdGhpcy5jbGFzc2VzID0gbmV3IENsYXNzTWFwKHRoaXMpO1xuICAgICAgICB0aGlzLmRhdGEgPSBuZXcgRGF0YU1hcCh0aGlzKTtcbiAgICAgICAgdGhpcy5jb250YWluc0VsZW1lbnQgPSAoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuY2xvc2VzdCh0aGlzLmNvbnRyb2xsZXJTZWxlY3RvcikgPT09IHRoaXMuZWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zY2hlbWEgPSBzY2hlbWE7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMuaWRlbnRpZmllciA9IGlkZW50aWZpZXI7XG4gICAgICAgIHRoaXMuZ3VpZGUgPSBuZXcgR3VpZGUobG9nZ2VyKTtcbiAgICAgICAgdGhpcy5vdXRsZXRzID0gbmV3IE91dGxldFNldCh0aGlzLmRvY3VtZW50U2NvcGUsIGVsZW1lbnQpO1xuICAgIH1cbiAgICBmaW5kRWxlbWVudChzZWxlY3Rvcikge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50Lm1hdGNoZXMoc2VsZWN0b3IpID8gdGhpcy5lbGVtZW50IDogdGhpcy5xdWVyeUVsZW1lbnRzKHNlbGVjdG9yKS5maW5kKHRoaXMuY29udGFpbnNFbGVtZW50KTtcbiAgICB9XG4gICAgZmluZEFsbEVsZW1lbnRzKHNlbGVjdG9yKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAuLi4odGhpcy5lbGVtZW50Lm1hdGNoZXMoc2VsZWN0b3IpID8gW3RoaXMuZWxlbWVudF0gOiBbXSksXG4gICAgICAgICAgICAuLi50aGlzLnF1ZXJ5RWxlbWVudHMoc2VsZWN0b3IpLmZpbHRlcih0aGlzLmNvbnRhaW5zRWxlbWVudCksXG4gICAgICAgIF07XG4gICAgfVxuICAgIHF1ZXJ5RWxlbWVudHMoc2VsZWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKTtcbiAgICB9XG4gICAgZ2V0IGNvbnRyb2xsZXJTZWxlY3RvcigpIHtcbiAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZVZhbHVlQ29udGFpbnNUb2tlbih0aGlzLnNjaGVtYS5jb250cm9sbGVyQXR0cmlidXRlLCB0aGlzLmlkZW50aWZpZXIpO1xuICAgIH1cbiAgICBnZXQgaXNEb2N1bWVudFNjb3BlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50ID09PSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgfVxuICAgIGdldCBkb2N1bWVudFNjb3BlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0RvY3VtZW50U2NvcGVcbiAgICAgICAgICAgID8gdGhpc1xuICAgICAgICAgICAgOiBuZXcgU2NvcGUodGhpcy5zY2hlbWEsIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgdGhpcy5pZGVudGlmaWVyLCB0aGlzLmd1aWRlLmxvZ2dlcik7XG4gICAgfVxufVxuXG5jbGFzcyBTY29wZU9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBzY2hlbWEsIGRlbGVnYXRlKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMuc2NoZW1hID0gc2NoZW1hO1xuICAgICAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gICAgICAgIHRoaXMudmFsdWVMaXN0T2JzZXJ2ZXIgPSBuZXcgVmFsdWVMaXN0T2JzZXJ2ZXIodGhpcy5lbGVtZW50LCB0aGlzLmNvbnRyb2xsZXJBdHRyaWJ1dGUsIHRoaXMpO1xuICAgICAgICB0aGlzLnNjb3Blc0J5SWRlbnRpZmllckJ5RWxlbWVudCA9IG5ldyBXZWFrTWFwKCk7XG4gICAgICAgIHRoaXMuc2NvcGVSZWZlcmVuY2VDb3VudHMgPSBuZXcgV2Vha01hcCgpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy52YWx1ZUxpc3RPYnNlcnZlci5zdGFydCgpO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICB0aGlzLnZhbHVlTGlzdE9ic2VydmVyLnN0b3AoKTtcbiAgICB9XG4gICAgZ2V0IGNvbnRyb2xsZXJBdHRyaWJ1dGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjaGVtYS5jb250cm9sbGVyQXR0cmlidXRlO1xuICAgIH1cbiAgICBwYXJzZVZhbHVlRm9yVG9rZW4odG9rZW4pIHtcbiAgICAgICAgY29uc3QgeyBlbGVtZW50LCBjb250ZW50OiBpZGVudGlmaWVyIH0gPSB0b2tlbjtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VWYWx1ZUZvckVsZW1lbnRBbmRJZGVudGlmaWVyKGVsZW1lbnQsIGlkZW50aWZpZXIpO1xuICAgIH1cbiAgICBwYXJzZVZhbHVlRm9yRWxlbWVudEFuZElkZW50aWZpZXIoZWxlbWVudCwgaWRlbnRpZmllcikge1xuICAgICAgICBjb25zdCBzY29wZXNCeUlkZW50aWZpZXIgPSB0aGlzLmZldGNoU2NvcGVzQnlJZGVudGlmaWVyRm9yRWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgbGV0IHNjb3BlID0gc2NvcGVzQnlJZGVudGlmaWVyLmdldChpZGVudGlmaWVyKTtcbiAgICAgICAgaWYgKCFzY29wZSkge1xuICAgICAgICAgICAgc2NvcGUgPSB0aGlzLmRlbGVnYXRlLmNyZWF0ZVNjb3BlRm9yRWxlbWVudEFuZElkZW50aWZpZXIoZWxlbWVudCwgaWRlbnRpZmllcik7XG4gICAgICAgICAgICBzY29wZXNCeUlkZW50aWZpZXIuc2V0KGlkZW50aWZpZXIsIHNjb3BlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2NvcGU7XG4gICAgfVxuICAgIGVsZW1lbnRNYXRjaGVkVmFsdWUoZWxlbWVudCwgdmFsdWUpIHtcbiAgICAgICAgY29uc3QgcmVmZXJlbmNlQ291bnQgPSAodGhpcy5zY29wZVJlZmVyZW5jZUNvdW50cy5nZXQodmFsdWUpIHx8IDApICsgMTtcbiAgICAgICAgdGhpcy5zY29wZVJlZmVyZW5jZUNvdW50cy5zZXQodmFsdWUsIHJlZmVyZW5jZUNvdW50KTtcbiAgICAgICAgaWYgKHJlZmVyZW5jZUNvdW50ID09IDEpIHtcbiAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUuc2NvcGVDb25uZWN0ZWQodmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsZW1lbnRVbm1hdGNoZWRWYWx1ZShlbGVtZW50LCB2YWx1ZSkge1xuICAgICAgICBjb25zdCByZWZlcmVuY2VDb3VudCA9IHRoaXMuc2NvcGVSZWZlcmVuY2VDb3VudHMuZ2V0KHZhbHVlKTtcbiAgICAgICAgaWYgKHJlZmVyZW5jZUNvdW50KSB7XG4gICAgICAgICAgICB0aGlzLnNjb3BlUmVmZXJlbmNlQ291bnRzLnNldCh2YWx1ZSwgcmVmZXJlbmNlQ291bnQgLSAxKTtcbiAgICAgICAgICAgIGlmIChyZWZlcmVuY2VDb3VudCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5zY29wZURpc2Nvbm5lY3RlZCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmV0Y2hTY29wZXNCeUlkZW50aWZpZXJGb3JFbGVtZW50KGVsZW1lbnQpIHtcbiAgICAgICAgbGV0IHNjb3Blc0J5SWRlbnRpZmllciA9IHRoaXMuc2NvcGVzQnlJZGVudGlmaWVyQnlFbGVtZW50LmdldChlbGVtZW50KTtcbiAgICAgICAgaWYgKCFzY29wZXNCeUlkZW50aWZpZXIpIHtcbiAgICAgICAgICAgIHNjb3Blc0J5SWRlbnRpZmllciA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIHRoaXMuc2NvcGVzQnlJZGVudGlmaWVyQnlFbGVtZW50LnNldChlbGVtZW50LCBzY29wZXNCeUlkZW50aWZpZXIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzY29wZXNCeUlkZW50aWZpZXI7XG4gICAgfVxufVxuXG5jbGFzcyBSb3V0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGFwcGxpY2F0aW9uKSB7XG4gICAgICAgIHRoaXMuYXBwbGljYXRpb24gPSBhcHBsaWNhdGlvbjtcbiAgICAgICAgdGhpcy5zY29wZU9ic2VydmVyID0gbmV3IFNjb3BlT2JzZXJ2ZXIodGhpcy5lbGVtZW50LCB0aGlzLnNjaGVtYSwgdGhpcyk7XG4gICAgICAgIHRoaXMuc2NvcGVzQnlJZGVudGlmaWVyID0gbmV3IE11bHRpbWFwKCk7XG4gICAgICAgIHRoaXMubW9kdWxlc0J5SWRlbnRpZmllciA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgZ2V0IGVsZW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcGxpY2F0aW9uLmVsZW1lbnQ7XG4gICAgfVxuICAgIGdldCBzY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcGxpY2F0aW9uLnNjaGVtYTtcbiAgICB9XG4gICAgZ2V0IGxvZ2dlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbGljYXRpb24ubG9nZ2VyO1xuICAgIH1cbiAgICBnZXQgY29udHJvbGxlckF0dHJpYnV0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NoZW1hLmNvbnRyb2xsZXJBdHRyaWJ1dGU7XG4gICAgfVxuICAgIGdldCBtb2R1bGVzKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLm1vZHVsZXNCeUlkZW50aWZpZXIudmFsdWVzKCkpO1xuICAgIH1cbiAgICBnZXQgY29udGV4dHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1vZHVsZXMucmVkdWNlKChjb250ZXh0cywgbW9kdWxlKSA9PiBjb250ZXh0cy5jb25jYXQobW9kdWxlLmNvbnRleHRzKSwgW10pO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5zY29wZU9ic2VydmVyLnN0YXJ0KCk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMuc2NvcGVPYnNlcnZlci5zdG9wKCk7XG4gICAgfVxuICAgIGxvYWREZWZpbml0aW9uKGRlZmluaXRpb24pIHtcbiAgICAgICAgdGhpcy51bmxvYWRJZGVudGlmaWVyKGRlZmluaXRpb24uaWRlbnRpZmllcik7XG4gICAgICAgIGNvbnN0IG1vZHVsZSA9IG5ldyBNb2R1bGUodGhpcy5hcHBsaWNhdGlvbiwgZGVmaW5pdGlvbik7XG4gICAgICAgIHRoaXMuY29ubmVjdE1vZHVsZShtb2R1bGUpO1xuICAgICAgICBjb25zdCBhZnRlckxvYWQgPSBkZWZpbml0aW9uLmNvbnRyb2xsZXJDb25zdHJ1Y3Rvci5hZnRlckxvYWQ7XG4gICAgICAgIGlmIChhZnRlckxvYWQpIHtcbiAgICAgICAgICAgIGFmdGVyTG9hZC5jYWxsKGRlZmluaXRpb24uY29udHJvbGxlckNvbnN0cnVjdG9yLCBkZWZpbml0aW9uLmlkZW50aWZpZXIsIHRoaXMuYXBwbGljYXRpb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVubG9hZElkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICAgICAgICBjb25zdCBtb2R1bGUgPSB0aGlzLm1vZHVsZXNCeUlkZW50aWZpZXIuZ2V0KGlkZW50aWZpZXIpO1xuICAgICAgICBpZiAobW9kdWxlKSB7XG4gICAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3RNb2R1bGUobW9kdWxlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRDb250ZXh0Rm9yRWxlbWVudEFuZElkZW50aWZpZXIoZWxlbWVudCwgaWRlbnRpZmllcikge1xuICAgICAgICBjb25zdCBtb2R1bGUgPSB0aGlzLm1vZHVsZXNCeUlkZW50aWZpZXIuZ2V0KGlkZW50aWZpZXIpO1xuICAgICAgICBpZiAobW9kdWxlKSB7XG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlLmNvbnRleHRzLmZpbmQoKGNvbnRleHQpID0+IGNvbnRleHQuZWxlbWVudCA9PSBlbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcm9wb3NlVG9Db25uZWN0U2NvcGVGb3JFbGVtZW50QW5kSWRlbnRpZmllcihlbGVtZW50LCBpZGVudGlmaWVyKSB7XG4gICAgICAgIGNvbnN0IHNjb3BlID0gdGhpcy5zY29wZU9ic2VydmVyLnBhcnNlVmFsdWVGb3JFbGVtZW50QW5kSWRlbnRpZmllcihlbGVtZW50LCBpZGVudGlmaWVyKTtcbiAgICAgICAgaWYgKHNjb3BlKSB7XG4gICAgICAgICAgICB0aGlzLnNjb3BlT2JzZXJ2ZXIuZWxlbWVudE1hdGNoZWRWYWx1ZShzY29wZS5lbGVtZW50LCBzY29wZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBDb3VsZG4ndCBmaW5kIG9yIGNyZWF0ZSBzY29wZSBmb3IgaWRlbnRpZmllcjogXCIke2lkZW50aWZpZXJ9XCIgYW5kIGVsZW1lbnQ6YCwgZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlRXJyb3IoZXJyb3IsIG1lc3NhZ2UsIGRldGFpbCkge1xuICAgICAgICB0aGlzLmFwcGxpY2F0aW9uLmhhbmRsZUVycm9yKGVycm9yLCBtZXNzYWdlLCBkZXRhaWwpO1xuICAgIH1cbiAgICBjcmVhdGVTY29wZUZvckVsZW1lbnRBbmRJZGVudGlmaWVyKGVsZW1lbnQsIGlkZW50aWZpZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTY29wZSh0aGlzLnNjaGVtYSwgZWxlbWVudCwgaWRlbnRpZmllciwgdGhpcy5sb2dnZXIpO1xuICAgIH1cbiAgICBzY29wZUNvbm5lY3RlZChzY29wZSkge1xuICAgICAgICB0aGlzLnNjb3Blc0J5SWRlbnRpZmllci5hZGQoc2NvcGUuaWRlbnRpZmllciwgc2NvcGUpO1xuICAgICAgICBjb25zdCBtb2R1bGUgPSB0aGlzLm1vZHVsZXNCeUlkZW50aWZpZXIuZ2V0KHNjb3BlLmlkZW50aWZpZXIpO1xuICAgICAgICBpZiAobW9kdWxlKSB7XG4gICAgICAgICAgICBtb2R1bGUuY29ubmVjdENvbnRleHRGb3JTY29wZShzY29wZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2NvcGVEaXNjb25uZWN0ZWQoc2NvcGUpIHtcbiAgICAgICAgdGhpcy5zY29wZXNCeUlkZW50aWZpZXIuZGVsZXRlKHNjb3BlLmlkZW50aWZpZXIsIHNjb3BlKTtcbiAgICAgICAgY29uc3QgbW9kdWxlID0gdGhpcy5tb2R1bGVzQnlJZGVudGlmaWVyLmdldChzY29wZS5pZGVudGlmaWVyKTtcbiAgICAgICAgaWYgKG1vZHVsZSkge1xuICAgICAgICAgICAgbW9kdWxlLmRpc2Nvbm5lY3RDb250ZXh0Rm9yU2NvcGUoc2NvcGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbm5lY3RNb2R1bGUobW9kdWxlKSB7XG4gICAgICAgIHRoaXMubW9kdWxlc0J5SWRlbnRpZmllci5zZXQobW9kdWxlLmlkZW50aWZpZXIsIG1vZHVsZSk7XG4gICAgICAgIGNvbnN0IHNjb3BlcyA9IHRoaXMuc2NvcGVzQnlJZGVudGlmaWVyLmdldFZhbHVlc0ZvcktleShtb2R1bGUuaWRlbnRpZmllcik7XG4gICAgICAgIHNjb3Blcy5mb3JFYWNoKChzY29wZSkgPT4gbW9kdWxlLmNvbm5lY3RDb250ZXh0Rm9yU2NvcGUoc2NvcGUpKTtcbiAgICB9XG4gICAgZGlzY29ubmVjdE1vZHVsZShtb2R1bGUpIHtcbiAgICAgICAgdGhpcy5tb2R1bGVzQnlJZGVudGlmaWVyLmRlbGV0ZShtb2R1bGUuaWRlbnRpZmllcik7XG4gICAgICAgIGNvbnN0IHNjb3BlcyA9IHRoaXMuc2NvcGVzQnlJZGVudGlmaWVyLmdldFZhbHVlc0ZvcktleShtb2R1bGUuaWRlbnRpZmllcik7XG4gICAgICAgIHNjb3Blcy5mb3JFYWNoKChzY29wZSkgPT4gbW9kdWxlLmRpc2Nvbm5lY3RDb250ZXh0Rm9yU2NvcGUoc2NvcGUpKTtcbiAgICB9XG59XG5cbmNvbnN0IGRlZmF1bHRTY2hlbWEgPSB7XG4gICAgY29udHJvbGxlckF0dHJpYnV0ZTogXCJkYXRhLWNvbnRyb2xsZXJcIixcbiAgICBhY3Rpb25BdHRyaWJ1dGU6IFwiZGF0YS1hY3Rpb25cIixcbiAgICB0YXJnZXRBdHRyaWJ1dGU6IFwiZGF0YS10YXJnZXRcIixcbiAgICB0YXJnZXRBdHRyaWJ1dGVGb3JTY29wZTogKGlkZW50aWZpZXIpID0+IGBkYXRhLSR7aWRlbnRpZmllcn0tdGFyZ2V0YCxcbiAgICBvdXRsZXRBdHRyaWJ1dGVGb3JTY29wZTogKGlkZW50aWZpZXIsIG91dGxldCkgPT4gYGRhdGEtJHtpZGVudGlmaWVyfS0ke291dGxldH0tb3V0bGV0YCxcbiAgICBrZXlNYXBwaW5nczogT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgZW50ZXI6IFwiRW50ZXJcIiwgdGFiOiBcIlRhYlwiLCBlc2M6IFwiRXNjYXBlXCIsIHNwYWNlOiBcIiBcIiwgdXA6IFwiQXJyb3dVcFwiLCBkb3duOiBcIkFycm93RG93blwiLCBsZWZ0OiBcIkFycm93TGVmdFwiLCByaWdodDogXCJBcnJvd1JpZ2h0XCIsIGhvbWU6IFwiSG9tZVwiLCBlbmQ6IFwiRW5kXCIsIHBhZ2VfdXA6IFwiUGFnZVVwXCIsIHBhZ2VfZG93bjogXCJQYWdlRG93blwiIH0sIG9iamVjdEZyb21FbnRyaWVzKFwiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpcIi5zcGxpdChcIlwiKS5tYXAoKGMpID0+IFtjLCBjXSkpKSwgb2JqZWN0RnJvbUVudHJpZXMoXCIwMTIzNDU2Nzg5XCIuc3BsaXQoXCJcIikubWFwKChuKSA9PiBbbiwgbl0pKSksXG59O1xuZnVuY3Rpb24gb2JqZWN0RnJvbUVudHJpZXMoYXJyYXkpIHtcbiAgICByZXR1cm4gYXJyYXkucmVkdWNlKChtZW1vLCBbaywgdl0pID0+IChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG1lbW8pLCB7IFtrXTogdiB9KSksIHt9KTtcbn1cblxuY2xhc3MgQXBwbGljYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIHNjaGVtYSA9IGRlZmF1bHRTY2hlbWEpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIgPSBjb25zb2xlO1xuICAgICAgICB0aGlzLmRlYnVnID0gZmFsc2U7XG4gICAgICAgIHRoaXMubG9nRGVidWdBY3Rpdml0eSA9IChpZGVudGlmaWVyLCBmdW5jdGlvbk5hbWUsIGRldGFpbCA9IHt9KSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5kZWJ1Zykge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nRm9ybWF0dGVkTWVzc2FnZShpZGVudGlmaWVyLCBmdW5jdGlvbk5hbWUsIGRldGFpbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMuc2NoZW1hID0gc2NoZW1hO1xuICAgICAgICB0aGlzLmRpc3BhdGNoZXIgPSBuZXcgRGlzcGF0Y2hlcih0aGlzKTtcbiAgICAgICAgdGhpcy5yb3V0ZXIgPSBuZXcgUm91dGVyKHRoaXMpO1xuICAgICAgICB0aGlzLmFjdGlvbkRlc2NyaXB0b3JGaWx0ZXJzID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdEFjdGlvbkRlc2NyaXB0b3JGaWx0ZXJzKTtcbiAgICB9XG4gICAgc3RhdGljIHN0YXJ0KGVsZW1lbnQsIHNjaGVtYSkge1xuICAgICAgICBjb25zdCBhcHBsaWNhdGlvbiA9IG5ldyB0aGlzKGVsZW1lbnQsIHNjaGVtYSk7XG4gICAgICAgIGFwcGxpY2F0aW9uLnN0YXJ0KCk7XG4gICAgICAgIHJldHVybiBhcHBsaWNhdGlvbjtcbiAgICB9XG4gICAgYXN5bmMgc3RhcnQoKSB7XG4gICAgICAgIGF3YWl0IGRvbVJlYWR5KCk7XG4gICAgICAgIHRoaXMubG9nRGVidWdBY3Rpdml0eShcImFwcGxpY2F0aW9uXCIsIFwic3RhcnRpbmdcIik7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hlci5zdGFydCgpO1xuICAgICAgICB0aGlzLnJvdXRlci5zdGFydCgpO1xuICAgICAgICB0aGlzLmxvZ0RlYnVnQWN0aXZpdHkoXCJhcHBsaWNhdGlvblwiLCBcInN0YXJ0XCIpO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICB0aGlzLmxvZ0RlYnVnQWN0aXZpdHkoXCJhcHBsaWNhdGlvblwiLCBcInN0b3BwaW5nXCIpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoZXIuc3RvcCgpO1xuICAgICAgICB0aGlzLnJvdXRlci5zdG9wKCk7XG4gICAgICAgIHRoaXMubG9nRGVidWdBY3Rpdml0eShcImFwcGxpY2F0aW9uXCIsIFwic3RvcFwiKTtcbiAgICB9XG4gICAgcmVnaXN0ZXIoaWRlbnRpZmllciwgY29udHJvbGxlckNvbnN0cnVjdG9yKSB7XG4gICAgICAgIHRoaXMubG9hZCh7IGlkZW50aWZpZXIsIGNvbnRyb2xsZXJDb25zdHJ1Y3RvciB9KTtcbiAgICB9XG4gICAgcmVnaXN0ZXJBY3Rpb25PcHRpb24obmFtZSwgZmlsdGVyKSB7XG4gICAgICAgIHRoaXMuYWN0aW9uRGVzY3JpcHRvckZpbHRlcnNbbmFtZV0gPSBmaWx0ZXI7XG4gICAgfVxuICAgIGxvYWQoaGVhZCwgLi4ucmVzdCkge1xuICAgICAgICBjb25zdCBkZWZpbml0aW9ucyA9IEFycmF5LmlzQXJyYXkoaGVhZCkgPyBoZWFkIDogW2hlYWQsIC4uLnJlc3RdO1xuICAgICAgICBkZWZpbml0aW9ucy5mb3JFYWNoKChkZWZpbml0aW9uKSA9PiB7XG4gICAgICAgICAgICBpZiAoZGVmaW5pdGlvbi5jb250cm9sbGVyQ29uc3RydWN0b3Iuc2hvdWxkTG9hZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucm91dGVyLmxvYWREZWZpbml0aW9uKGRlZmluaXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdW5sb2FkKGhlYWQsIC4uLnJlc3QpIHtcbiAgICAgICAgY29uc3QgaWRlbnRpZmllcnMgPSBBcnJheS5pc0FycmF5KGhlYWQpID8gaGVhZCA6IFtoZWFkLCAuLi5yZXN0XTtcbiAgICAgICAgaWRlbnRpZmllcnMuZm9yRWFjaCgoaWRlbnRpZmllcikgPT4gdGhpcy5yb3V0ZXIudW5sb2FkSWRlbnRpZmllcihpZGVudGlmaWVyKSk7XG4gICAgfVxuICAgIGdldCBjb250cm9sbGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm91dGVyLmNvbnRleHRzLm1hcCgoY29udGV4dCkgPT4gY29udGV4dC5jb250cm9sbGVyKTtcbiAgICB9XG4gICAgZ2V0Q29udHJvbGxlckZvckVsZW1lbnRBbmRJZGVudGlmaWVyKGVsZW1lbnQsIGlkZW50aWZpZXIpIHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IHRoaXMucm91dGVyLmdldENvbnRleHRGb3JFbGVtZW50QW5kSWRlbnRpZmllcihlbGVtZW50LCBpZGVudGlmaWVyKTtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQgPyBjb250ZXh0LmNvbnRyb2xsZXIgOiBudWxsO1xuICAgIH1cbiAgICBoYW5kbGVFcnJvcihlcnJvciwgbWVzc2FnZSwgZGV0YWlsKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYCVzXFxuXFxuJW9cXG5cXG4lb2AsIG1lc3NhZ2UsIGVycm9yLCBkZXRhaWwpO1xuICAgICAgICAoX2EgPSB3aW5kb3cub25lcnJvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNhbGwod2luZG93LCBtZXNzYWdlLCBcIlwiLCAwLCAwLCBlcnJvcik7XG4gICAgfVxuICAgIGxvZ0Zvcm1hdHRlZE1lc3NhZ2UoaWRlbnRpZmllciwgZnVuY3Rpb25OYW1lLCBkZXRhaWwgPSB7fSkge1xuICAgICAgICBkZXRhaWwgPSBPYmplY3QuYXNzaWduKHsgYXBwbGljYXRpb246IHRoaXMgfSwgZGV0YWlsKTtcbiAgICAgICAgdGhpcy5sb2dnZXIuZ3JvdXBDb2xsYXBzZWQoYCR7aWRlbnRpZmllcn0gIyR7ZnVuY3Rpb25OYW1lfWApO1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coXCJkZXRhaWxzOlwiLCBPYmplY3QuYXNzaWduKHt9LCBkZXRhaWwpKTtcbiAgICAgICAgdGhpcy5sb2dnZXIuZ3JvdXBFbmQoKTtcbiAgICB9XG59XG5mdW5jdGlvbiBkb21SZWFkeSgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT0gXCJsb2FkaW5nXCIpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHJlc29sdmUoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gQ2xhc3NQcm9wZXJ0aWVzQmxlc3NpbmcoY29uc3RydWN0b3IpIHtcbiAgICBjb25zdCBjbGFzc2VzID0gcmVhZEluaGVyaXRhYmxlU3RhdGljQXJyYXlWYWx1ZXMoY29uc3RydWN0b3IsIFwiY2xhc3Nlc1wiKTtcbiAgICByZXR1cm4gY2xhc3Nlcy5yZWR1Y2UoKHByb3BlcnRpZXMsIGNsYXNzRGVmaW5pdGlvbikgPT4ge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihwcm9wZXJ0aWVzLCBwcm9wZXJ0aWVzRm9yQ2xhc3NEZWZpbml0aW9uKGNsYXNzRGVmaW5pdGlvbikpO1xuICAgIH0sIHt9KTtcbn1cbmZ1bmN0aW9uIHByb3BlcnRpZXNGb3JDbGFzc0RlZmluaXRpb24oa2V5KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgW2Ake2tleX1DbGFzc2BdOiB7XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBjbGFzc2VzIH0gPSB0aGlzO1xuICAgICAgICAgICAgICAgIGlmIChjbGFzc2VzLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjbGFzc2VzLmdldChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlID0gY2xhc3Nlcy5nZXRBdHRyaWJ1dGVOYW1lKGtleSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBhdHRyaWJ1dGUgXCIke2F0dHJpYnV0ZX1cImApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIFtgJHtrZXl9Q2xhc3Nlc2BdOiB7XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2xhc3Nlcy5nZXRBbGwoa2V5KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIFtgaGFzJHtjYXBpdGFsaXplKGtleSl9Q2xhc3NgXToge1xuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNsYXNzZXMuaGFzKGtleSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH07XG59XG5cbmZ1bmN0aW9uIE91dGxldFByb3BlcnRpZXNCbGVzc2luZyhjb25zdHJ1Y3Rvcikge1xuICAgIGNvbnN0IG91dGxldHMgPSByZWFkSW5oZXJpdGFibGVTdGF0aWNBcnJheVZhbHVlcyhjb25zdHJ1Y3RvciwgXCJvdXRsZXRzXCIpO1xuICAgIHJldHVybiBvdXRsZXRzLnJlZHVjZSgocHJvcGVydGllcywgb3V0bGV0RGVmaW5pdGlvbikgPT4ge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihwcm9wZXJ0aWVzLCBwcm9wZXJ0aWVzRm9yT3V0bGV0RGVmaW5pdGlvbihvdXRsZXREZWZpbml0aW9uKSk7XG4gICAgfSwge30pO1xufVxuZnVuY3Rpb24gZ2V0T3V0bGV0Q29udHJvbGxlcihjb250cm9sbGVyLCBlbGVtZW50LCBpZGVudGlmaWVyKSB7XG4gICAgcmV0dXJuIGNvbnRyb2xsZXIuYXBwbGljYXRpb24uZ2V0Q29udHJvbGxlckZvckVsZW1lbnRBbmRJZGVudGlmaWVyKGVsZW1lbnQsIGlkZW50aWZpZXIpO1xufVxuZnVuY3Rpb24gZ2V0Q29udHJvbGxlckFuZEVuc3VyZUNvbm5lY3RlZFNjb3BlKGNvbnRyb2xsZXIsIGVsZW1lbnQsIG91dGxldE5hbWUpIHtcbiAgICBsZXQgb3V0bGV0Q29udHJvbGxlciA9IGdldE91dGxldENvbnRyb2xsZXIoY29udHJvbGxlciwgZWxlbWVudCwgb3V0bGV0TmFtZSk7XG4gICAgaWYgKG91dGxldENvbnRyb2xsZXIpXG4gICAgICAgIHJldHVybiBvdXRsZXRDb250cm9sbGVyO1xuICAgIGNvbnRyb2xsZXIuYXBwbGljYXRpb24ucm91dGVyLnByb3Bvc2VUb0Nvbm5lY3RTY29wZUZvckVsZW1lbnRBbmRJZGVudGlmaWVyKGVsZW1lbnQsIG91dGxldE5hbWUpO1xuICAgIG91dGxldENvbnRyb2xsZXIgPSBnZXRPdXRsZXRDb250cm9sbGVyKGNvbnRyb2xsZXIsIGVsZW1lbnQsIG91dGxldE5hbWUpO1xuICAgIGlmIChvdXRsZXRDb250cm9sbGVyKVxuICAgICAgICByZXR1cm4gb3V0bGV0Q29udHJvbGxlcjtcbn1cbmZ1bmN0aW9uIHByb3BlcnRpZXNGb3JPdXRsZXREZWZpbml0aW9uKG5hbWUpIHtcbiAgICBjb25zdCBjYW1lbGl6ZWROYW1lID0gbmFtZXNwYWNlQ2FtZWxpemUobmFtZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgW2Ake2NhbWVsaXplZE5hbWV9T3V0bGV0YF06IHtcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRsZXRFbGVtZW50ID0gdGhpcy5vdXRsZXRzLmZpbmQobmFtZSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0b3IgPSB0aGlzLm91dGxldHMuZ2V0U2VsZWN0b3JGb3JPdXRsZXROYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgIGlmIChvdXRsZXRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG91dGxldENvbnRyb2xsZXIgPSBnZXRDb250cm9sbGVyQW5kRW5zdXJlQ29ubmVjdGVkU2NvcGUodGhpcywgb3V0bGV0RWxlbWVudCwgbmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvdXRsZXRDb250cm9sbGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG91dGxldENvbnRyb2xsZXI7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIHByb3ZpZGVkIG91dGxldCBlbGVtZW50IGlzIG1pc3NpbmcgYW4gb3V0bGV0IGNvbnRyb2xsZXIgXCIke25hbWV9XCIgaW5zdGFuY2UgZm9yIGhvc3QgY29udHJvbGxlciBcIiR7dGhpcy5pZGVudGlmaWVyfVwiYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBvdXRsZXQgZWxlbWVudCBcIiR7bmFtZX1cIiBmb3IgaG9zdCBjb250cm9sbGVyIFwiJHt0aGlzLmlkZW50aWZpZXJ9XCIuIFN0aW11bHVzIGNvdWxkbid0IGZpbmQgYSBtYXRjaGluZyBvdXRsZXQgZWxlbWVudCB1c2luZyBzZWxlY3RvciBcIiR7c2VsZWN0b3J9XCIuYCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBbYCR7Y2FtZWxpemVkTmFtZX1PdXRsZXRzYF06IHtcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRsZXRzID0gdGhpcy5vdXRsZXRzLmZpbmRBbGwobmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKG91dGxldHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3V0bGV0c1xuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgob3V0bGV0RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0bGV0Q29udHJvbGxlciA9IGdldENvbnRyb2xsZXJBbmRFbnN1cmVDb25uZWN0ZWRTY29wZSh0aGlzLCBvdXRsZXRFbGVtZW50LCBuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvdXRsZXRDb250cm9sbGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvdXRsZXRDb250cm9sbGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBUaGUgcHJvdmlkZWQgb3V0bGV0IGVsZW1lbnQgaXMgbWlzc2luZyBhbiBvdXRsZXQgY29udHJvbGxlciBcIiR7bmFtZX1cIiBpbnN0YW5jZSBmb3IgaG9zdCBjb250cm9sbGVyIFwiJHt0aGlzLmlkZW50aWZpZXJ9XCJgLCBvdXRsZXRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoKGNvbnRyb2xsZXIpID0+IGNvbnRyb2xsZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBbYCR7Y2FtZWxpemVkTmFtZX1PdXRsZXRFbGVtZW50YF06IHtcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRsZXRFbGVtZW50ID0gdGhpcy5vdXRsZXRzLmZpbmQobmFtZSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0b3IgPSB0aGlzLm91dGxldHMuZ2V0U2VsZWN0b3JGb3JPdXRsZXROYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgIGlmIChvdXRsZXRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvdXRsZXRFbGVtZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIG91dGxldCBlbGVtZW50IFwiJHtuYW1lfVwiIGZvciBob3N0IGNvbnRyb2xsZXIgXCIke3RoaXMuaWRlbnRpZmllcn1cIi4gU3RpbXVsdXMgY291bGRuJ3QgZmluZCBhIG1hdGNoaW5nIG91dGxldCBlbGVtZW50IHVzaW5nIHNlbGVjdG9yIFwiJHtzZWxlY3Rvcn1cIi5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBbYCR7Y2FtZWxpemVkTmFtZX1PdXRsZXRFbGVtZW50c2BdOiB7XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub3V0bGV0cy5maW5kQWxsKG5hbWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgW2BoYXMke2NhcGl0YWxpemUoY2FtZWxpemVkTmFtZSl9T3V0bGV0YF06IHtcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vdXRsZXRzLmhhcyhuYW1lKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gVGFyZ2V0UHJvcGVydGllc0JsZXNzaW5nKGNvbnN0cnVjdG9yKSB7XG4gICAgY29uc3QgdGFyZ2V0cyA9IHJlYWRJbmhlcml0YWJsZVN0YXRpY0FycmF5VmFsdWVzKGNvbnN0cnVjdG9yLCBcInRhcmdldHNcIik7XG4gICAgcmV0dXJuIHRhcmdldHMucmVkdWNlKChwcm9wZXJ0aWVzLCB0YXJnZXREZWZpbml0aW9uKSA9PiB7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHByb3BlcnRpZXMsIHByb3BlcnRpZXNGb3JUYXJnZXREZWZpbml0aW9uKHRhcmdldERlZmluaXRpb24pKTtcbiAgICB9LCB7fSk7XG59XG5mdW5jdGlvbiBwcm9wZXJ0aWVzRm9yVGFyZ2V0RGVmaW5pdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgW2Ake25hbWV9VGFyZ2V0YF06IHtcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSB0aGlzLnRhcmdldHMuZmluZChuYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgdGFyZ2V0IGVsZW1lbnQgXCIke25hbWV9XCIgZm9yIFwiJHt0aGlzLmlkZW50aWZpZXJ9XCIgY29udHJvbGxlcmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIFtgJHtuYW1lfVRhcmdldHNgXToge1xuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRhcmdldHMuZmluZEFsbChuYW1lKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIFtgaGFzJHtjYXBpdGFsaXplKG5hbWUpfVRhcmdldGBdOiB7XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0cy5oYXMobmFtZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH07XG59XG5cbmZ1bmN0aW9uIFZhbHVlUHJvcGVydGllc0JsZXNzaW5nKGNvbnN0cnVjdG9yKSB7XG4gICAgY29uc3QgdmFsdWVEZWZpbml0aW9uUGFpcnMgPSByZWFkSW5oZXJpdGFibGVTdGF0aWNPYmplY3RQYWlycyhjb25zdHJ1Y3RvciwgXCJ2YWx1ZXNcIik7XG4gICAgY29uc3QgcHJvcGVydHlEZXNjcmlwdG9yTWFwID0ge1xuICAgICAgICB2YWx1ZURlc2NyaXB0b3JNYXA6IHtcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVEZWZpbml0aW9uUGFpcnMucmVkdWNlKChyZXN1bHQsIHZhbHVlRGVmaW5pdGlvblBhaXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWVEZXNjcmlwdG9yID0gcGFyc2VWYWx1ZURlZmluaXRpb25QYWlyKHZhbHVlRGVmaW5pdGlvblBhaXIsIHRoaXMuaWRlbnRpZmllcik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZU5hbWUgPSB0aGlzLmRhdGEuZ2V0QXR0cmlidXRlTmFtZUZvcktleSh2YWx1ZURlc2NyaXB0b3Iua2V5KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ocmVzdWx0LCB7IFthdHRyaWJ1dGVOYW1lXTogdmFsdWVEZXNjcmlwdG9yIH0pO1xuICAgICAgICAgICAgICAgIH0sIHt9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfTtcbiAgICByZXR1cm4gdmFsdWVEZWZpbml0aW9uUGFpcnMucmVkdWNlKChwcm9wZXJ0aWVzLCB2YWx1ZURlZmluaXRpb25QYWlyKSA9PiB7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHByb3BlcnRpZXMsIHByb3BlcnRpZXNGb3JWYWx1ZURlZmluaXRpb25QYWlyKHZhbHVlRGVmaW5pdGlvblBhaXIpKTtcbiAgICB9LCBwcm9wZXJ0eURlc2NyaXB0b3JNYXApO1xufVxuZnVuY3Rpb24gcHJvcGVydGllc0ZvclZhbHVlRGVmaW5pdGlvblBhaXIodmFsdWVEZWZpbml0aW9uUGFpciwgY29udHJvbGxlcikge1xuICAgIGNvbnN0IGRlZmluaXRpb24gPSBwYXJzZVZhbHVlRGVmaW5pdGlvblBhaXIodmFsdWVEZWZpbml0aW9uUGFpciwgY29udHJvbGxlcik7XG4gICAgY29uc3QgeyBrZXksIG5hbWUsIHJlYWRlcjogcmVhZCwgd3JpdGVyOiB3cml0ZSB9ID0gZGVmaW5pdGlvbjtcbiAgICByZXR1cm4ge1xuICAgICAgICBbbmFtZV06IHtcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZGF0YS5nZXQoa2V5KTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWQodmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmluaXRpb24uZGVmYXVsdFZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEuc2V0KGtleSwgd3JpdGUodmFsdWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBbYGhhcyR7Y2FwaXRhbGl6ZShuYW1lKX1gXToge1xuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEuaGFzKGtleSkgfHwgZGVmaW5pdGlvbi5oYXNDdXN0b21EZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH07XG59XG5mdW5jdGlvbiBwYXJzZVZhbHVlRGVmaW5pdGlvblBhaXIoW3Rva2VuLCB0eXBlRGVmaW5pdGlvbl0sIGNvbnRyb2xsZXIpIHtcbiAgICByZXR1cm4gdmFsdWVEZXNjcmlwdG9yRm9yVG9rZW5BbmRUeXBlRGVmaW5pdGlvbih7XG4gICAgICAgIGNvbnRyb2xsZXIsXG4gICAgICAgIHRva2VuLFxuICAgICAgICB0eXBlRGVmaW5pdGlvbixcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIHBhcnNlVmFsdWVUeXBlQ29uc3RhbnQoY29uc3RhbnQpIHtcbiAgICBzd2l0Y2ggKGNvbnN0YW50KSB7XG4gICAgICAgIGNhc2UgQXJyYXk6XG4gICAgICAgICAgICByZXR1cm4gXCJhcnJheVwiO1xuICAgICAgICBjYXNlIEJvb2xlYW46XG4gICAgICAgICAgICByZXR1cm4gXCJib29sZWFuXCI7XG4gICAgICAgIGNhc2UgTnVtYmVyOlxuICAgICAgICAgICAgcmV0dXJuIFwibnVtYmVyXCI7XG4gICAgICAgIGNhc2UgT2JqZWN0OlxuICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0XCI7XG4gICAgICAgIGNhc2UgU3RyaW5nOlxuICAgICAgICAgICAgcmV0dXJuIFwic3RyaW5nXCI7XG4gICAgfVxufVxuZnVuY3Rpb24gcGFyc2VWYWx1ZVR5cGVEZWZhdWx0KGRlZmF1bHRWYWx1ZSkge1xuICAgIHN3aXRjaCAodHlwZW9mIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICBjYXNlIFwiYm9vbGVhblwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiYm9vbGVhblwiO1xuICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJudW1iZXJcIjtcbiAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgcmV0dXJuIFwic3RyaW5nXCI7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGRlZmF1bHRWYWx1ZSkpXG4gICAgICAgIHJldHVybiBcImFycmF5XCI7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChkZWZhdWx0VmFsdWUpID09PSBcIltvYmplY3QgT2JqZWN0XVwiKVxuICAgICAgICByZXR1cm4gXCJvYmplY3RcIjtcbn1cbmZ1bmN0aW9uIHBhcnNlVmFsdWVUeXBlT2JqZWN0KHBheWxvYWQpIHtcbiAgICBjb25zdCB7IGNvbnRyb2xsZXIsIHRva2VuLCB0eXBlT2JqZWN0IH0gPSBwYXlsb2FkO1xuICAgIGNvbnN0IGhhc1R5cGUgPSBpc1NvbWV0aGluZyh0eXBlT2JqZWN0LnR5cGUpO1xuICAgIGNvbnN0IGhhc0RlZmF1bHQgPSBpc1NvbWV0aGluZyh0eXBlT2JqZWN0LmRlZmF1bHQpO1xuICAgIGNvbnN0IGZ1bGxPYmplY3QgPSBoYXNUeXBlICYmIGhhc0RlZmF1bHQ7XG4gICAgY29uc3Qgb25seVR5cGUgPSBoYXNUeXBlICYmICFoYXNEZWZhdWx0O1xuICAgIGNvbnN0IG9ubHlEZWZhdWx0ID0gIWhhc1R5cGUgJiYgaGFzRGVmYXVsdDtcbiAgICBjb25zdCB0eXBlRnJvbU9iamVjdCA9IHBhcnNlVmFsdWVUeXBlQ29uc3RhbnQodHlwZU9iamVjdC50eXBlKTtcbiAgICBjb25zdCB0eXBlRnJvbURlZmF1bHRWYWx1ZSA9IHBhcnNlVmFsdWVUeXBlRGVmYXVsdChwYXlsb2FkLnR5cGVPYmplY3QuZGVmYXVsdCk7XG4gICAgaWYgKG9ubHlUeXBlKVxuICAgICAgICByZXR1cm4gdHlwZUZyb21PYmplY3Q7XG4gICAgaWYgKG9ubHlEZWZhdWx0KVxuICAgICAgICByZXR1cm4gdHlwZUZyb21EZWZhdWx0VmFsdWU7XG4gICAgaWYgKHR5cGVGcm9tT2JqZWN0ICE9PSB0eXBlRnJvbURlZmF1bHRWYWx1ZSkge1xuICAgICAgICBjb25zdCBwcm9wZXJ0eVBhdGggPSBjb250cm9sbGVyID8gYCR7Y29udHJvbGxlcn0uJHt0b2tlbn1gIDogdG9rZW47XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIHNwZWNpZmllZCBkZWZhdWx0IHZhbHVlIGZvciB0aGUgU3RpbXVsdXMgVmFsdWUgXCIke3Byb3BlcnR5UGF0aH1cIiBtdXN0IG1hdGNoIHRoZSBkZWZpbmVkIHR5cGUgXCIke3R5cGVGcm9tT2JqZWN0fVwiLiBUaGUgcHJvdmlkZWQgZGVmYXVsdCB2YWx1ZSBvZiBcIiR7dHlwZU9iamVjdC5kZWZhdWx0fVwiIGlzIG9mIHR5cGUgXCIke3R5cGVGcm9tRGVmYXVsdFZhbHVlfVwiLmApO1xuICAgIH1cbiAgICBpZiAoZnVsbE9iamVjdClcbiAgICAgICAgcmV0dXJuIHR5cGVGcm9tT2JqZWN0O1xufVxuZnVuY3Rpb24gcGFyc2VWYWx1ZVR5cGVEZWZpbml0aW9uKHBheWxvYWQpIHtcbiAgICBjb25zdCB7IGNvbnRyb2xsZXIsIHRva2VuLCB0eXBlRGVmaW5pdGlvbiB9ID0gcGF5bG9hZDtcbiAgICBjb25zdCB0eXBlT2JqZWN0ID0geyBjb250cm9sbGVyLCB0b2tlbiwgdHlwZU9iamVjdDogdHlwZURlZmluaXRpb24gfTtcbiAgICBjb25zdCB0eXBlRnJvbU9iamVjdCA9IHBhcnNlVmFsdWVUeXBlT2JqZWN0KHR5cGVPYmplY3QpO1xuICAgIGNvbnN0IHR5cGVGcm9tRGVmYXVsdFZhbHVlID0gcGFyc2VWYWx1ZVR5cGVEZWZhdWx0KHR5cGVEZWZpbml0aW9uKTtcbiAgICBjb25zdCB0eXBlRnJvbUNvbnN0YW50ID0gcGFyc2VWYWx1ZVR5cGVDb25zdGFudCh0eXBlRGVmaW5pdGlvbik7XG4gICAgY29uc3QgdHlwZSA9IHR5cGVGcm9tT2JqZWN0IHx8IHR5cGVGcm9tRGVmYXVsdFZhbHVlIHx8IHR5cGVGcm9tQ29uc3RhbnQ7XG4gICAgaWYgKHR5cGUpXG4gICAgICAgIHJldHVybiB0eXBlO1xuICAgIGNvbnN0IHByb3BlcnR5UGF0aCA9IGNvbnRyb2xsZXIgPyBgJHtjb250cm9sbGVyfS4ke3R5cGVEZWZpbml0aW9ufWAgOiB0b2tlbjtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gdmFsdWUgdHlwZSBcIiR7cHJvcGVydHlQYXRofVwiIGZvciBcIiR7dG9rZW59XCIgdmFsdWVgKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRWYWx1ZUZvckRlZmluaXRpb24odHlwZURlZmluaXRpb24pIHtcbiAgICBjb25zdCBjb25zdGFudCA9IHBhcnNlVmFsdWVUeXBlQ29uc3RhbnQodHlwZURlZmluaXRpb24pO1xuICAgIGlmIChjb25zdGFudClcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZXNCeVR5cGVbY29uc3RhbnRdO1xuICAgIGNvbnN0IGhhc0RlZmF1bHQgPSBoYXNQcm9wZXJ0eSh0eXBlRGVmaW5pdGlvbiwgXCJkZWZhdWx0XCIpO1xuICAgIGNvbnN0IGhhc1R5cGUgPSBoYXNQcm9wZXJ0eSh0eXBlRGVmaW5pdGlvbiwgXCJ0eXBlXCIpO1xuICAgIGNvbnN0IHR5cGVPYmplY3QgPSB0eXBlRGVmaW5pdGlvbjtcbiAgICBpZiAoaGFzRGVmYXVsdClcbiAgICAgICAgcmV0dXJuIHR5cGVPYmplY3QuZGVmYXVsdDtcbiAgICBpZiAoaGFzVHlwZSkge1xuICAgICAgICBjb25zdCB7IHR5cGUgfSA9IHR5cGVPYmplY3Q7XG4gICAgICAgIGNvbnN0IGNvbnN0YW50RnJvbVR5cGUgPSBwYXJzZVZhbHVlVHlwZUNvbnN0YW50KHR5cGUpO1xuICAgICAgICBpZiAoY29uc3RhbnRGcm9tVHlwZSlcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWVzQnlUeXBlW2NvbnN0YW50RnJvbVR5cGVdO1xuICAgIH1cbiAgICByZXR1cm4gdHlwZURlZmluaXRpb247XG59XG5mdW5jdGlvbiB2YWx1ZURlc2NyaXB0b3JGb3JUb2tlbkFuZFR5cGVEZWZpbml0aW9uKHBheWxvYWQpIHtcbiAgICBjb25zdCB7IHRva2VuLCB0eXBlRGVmaW5pdGlvbiB9ID0gcGF5bG9hZDtcbiAgICBjb25zdCBrZXkgPSBgJHtkYXNoZXJpemUodG9rZW4pfS12YWx1ZWA7XG4gICAgY29uc3QgdHlwZSA9IHBhcnNlVmFsdWVUeXBlRGVmaW5pdGlvbihwYXlsb2FkKTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlLFxuICAgICAgICBrZXksXG4gICAgICAgIG5hbWU6IGNhbWVsaXplKGtleSksXG4gICAgICAgIGdldCBkZWZhdWx0VmFsdWUoKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlRm9yRGVmaW5pdGlvbih0eXBlRGVmaW5pdGlvbik7XG4gICAgICAgIH0sXG4gICAgICAgIGdldCBoYXNDdXN0b21EZWZhdWx0VmFsdWUoKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VWYWx1ZVR5cGVEZWZhdWx0KHR5cGVEZWZpbml0aW9uKSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICB9LFxuICAgICAgICByZWFkZXI6IHJlYWRlcnNbdHlwZV0sXG4gICAgICAgIHdyaXRlcjogd3JpdGVyc1t0eXBlXSB8fCB3cml0ZXJzLmRlZmF1bHQsXG4gICAgfTtcbn1cbmNvbnN0IGRlZmF1bHRWYWx1ZXNCeVR5cGUgPSB7XG4gICAgZ2V0IGFycmF5KCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfSxcbiAgICBib29sZWFuOiBmYWxzZSxcbiAgICBudW1iZXI6IDAsXG4gICAgZ2V0IG9iamVjdCgpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH0sXG4gICAgc3RyaW5nOiBcIlwiLFxufTtcbmNvbnN0IHJlYWRlcnMgPSB7XG4gICAgYXJyYXkodmFsdWUpIHtcbiAgICAgICAgY29uc3QgYXJyYXkgPSBKU09OLnBhcnNlKHZhbHVlKTtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGFycmF5KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgZXhwZWN0ZWQgdmFsdWUgb2YgdHlwZSBcImFycmF5XCIgYnV0IGluc3RlYWQgZ290IHZhbHVlIFwiJHt2YWx1ZX1cIiBvZiB0eXBlIFwiJHtwYXJzZVZhbHVlVHlwZURlZmF1bHQoYXJyYXkpfVwiYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH0sXG4gICAgYm9vbGVhbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gISh2YWx1ZSA9PSBcIjBcIiB8fCBTdHJpbmcodmFsdWUpLnRvTG93ZXJDYXNlKCkgPT0gXCJmYWxzZVwiKTtcbiAgICB9LFxuICAgIG51bWJlcih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gTnVtYmVyKHZhbHVlLnJlcGxhY2UoL18vZywgXCJcIikpO1xuICAgIH0sXG4gICAgb2JqZWN0KHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IG9iamVjdCA9IEpTT04ucGFyc2UodmFsdWUpO1xuICAgICAgICBpZiAob2JqZWN0ID09PSBudWxsIHx8IHR5cGVvZiBvYmplY3QgIT0gXCJvYmplY3RcIiB8fCBBcnJheS5pc0FycmF5KG9iamVjdCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYGV4cGVjdGVkIHZhbHVlIG9mIHR5cGUgXCJvYmplY3RcIiBidXQgaW5zdGVhZCBnb3QgdmFsdWUgXCIke3ZhbHVlfVwiIG9mIHR5cGUgXCIke3BhcnNlVmFsdWVUeXBlRGVmYXVsdChvYmplY3QpfVwiYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9LFxuICAgIHN0cmluZyh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbn07XG5jb25zdCB3cml0ZXJzID0ge1xuICAgIGRlZmF1bHQ6IHdyaXRlU3RyaW5nLFxuICAgIGFycmF5OiB3cml0ZUpTT04sXG4gICAgb2JqZWN0OiB3cml0ZUpTT04sXG59O1xuZnVuY3Rpb24gd3JpdGVKU09OKHZhbHVlKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbn1cbmZ1bmN0aW9uIHdyaXRlU3RyaW5nKHZhbHVlKSB7XG4gICAgcmV0dXJuIGAke3ZhbHVlfWA7XG59XG5cbmNsYXNzIENvbnRyb2xsZXIge1xuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICB9XG4gICAgc3RhdGljIGdldCBzaG91bGRMb2FkKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgc3RhdGljIGFmdGVyTG9hZChfaWRlbnRpZmllciwgX2FwcGxpY2F0aW9uKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZ2V0IGFwcGxpY2F0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0LmFwcGxpY2F0aW9uO1xuICAgIH1cbiAgICBnZXQgc2NvcGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQuc2NvcGU7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY29wZS5lbGVtZW50O1xuICAgIH1cbiAgICBnZXQgaWRlbnRpZmllcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGUuaWRlbnRpZmllcjtcbiAgICB9XG4gICAgZ2V0IHRhcmdldHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3BlLnRhcmdldHM7XG4gICAgfVxuICAgIGdldCBvdXRsZXRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY29wZS5vdXRsZXRzO1xuICAgIH1cbiAgICBnZXQgY2xhc3NlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGUuY2xhc3NlcztcbiAgICB9XG4gICAgZ2V0IGRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3BlLmRhdGE7XG4gICAgfVxuICAgIGluaXRpYWxpemUoKSB7XG4gICAgfVxuICAgIGNvbm5lY3QoKSB7XG4gICAgfVxuICAgIGRpc2Nvbm5lY3QoKSB7XG4gICAgfVxuICAgIGRpc3BhdGNoKGV2ZW50TmFtZSwgeyB0YXJnZXQgPSB0aGlzLmVsZW1lbnQsIGRldGFpbCA9IHt9LCBwcmVmaXggPSB0aGlzLmlkZW50aWZpZXIsIGJ1YmJsZXMgPSB0cnVlLCBjYW5jZWxhYmxlID0gdHJ1ZSwgfSA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHR5cGUgPSBwcmVmaXggPyBgJHtwcmVmaXh9OiR7ZXZlbnROYW1lfWAgOiBldmVudE5hbWU7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KHR5cGUsIHsgZGV0YWlsLCBidWJibGVzLCBjYW5jZWxhYmxlIH0pO1xuICAgICAgICB0YXJnZXQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICAgIHJldHVybiBldmVudDtcbiAgICB9XG59XG5Db250cm9sbGVyLmJsZXNzaW5ncyA9IFtcbiAgICBDbGFzc1Byb3BlcnRpZXNCbGVzc2luZyxcbiAgICBUYXJnZXRQcm9wZXJ0aWVzQmxlc3NpbmcsXG4gICAgVmFsdWVQcm9wZXJ0aWVzQmxlc3NpbmcsXG4gICAgT3V0bGV0UHJvcGVydGllc0JsZXNzaW5nLFxuXTtcbkNvbnRyb2xsZXIudGFyZ2V0cyA9IFtdO1xuQ29udHJvbGxlci5vdXRsZXRzID0gW107XG5Db250cm9sbGVyLnZhbHVlcyA9IHt9O1xuXG5leHBvcnQgeyBBcHBsaWNhdGlvbiwgQXR0cmlidXRlT2JzZXJ2ZXIsIENvbnRleHQsIENvbnRyb2xsZXIsIEVsZW1lbnRPYnNlcnZlciwgSW5kZXhlZE11bHRpbWFwLCBNdWx0aW1hcCwgU2VsZWN0b3JPYnNlcnZlciwgU3RyaW5nTWFwT2JzZXJ2ZXIsIFRva2VuTGlzdE9ic2VydmVyLCBWYWx1ZUxpc3RPYnNlcnZlciwgYWRkLCBkZWZhdWx0U2NoZW1hLCBkZWwsIGZldGNoLCBwcnVuZSB9O1xuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBzeXN0ZW0tY29udHJvbGxlclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wibGlnaHRJY29uXCIsIFwiZGFya0ljb25cIl1cbiAgc3RhdGljIHZhbHVlcyA9IHsgc3RvcmFnZUtleTogU3RyaW5nIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IGxpZ2h0SWNvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkYXJrSWNvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzdG9yYWdlS2V5VmFsdWU6IHN0cmluZ1xuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgdGhpcy5pbml0aWFsaXplVGhlbWUoKVxuICB9XG5cbiAgdG9nZ2xlKCk6IHZvaWQge1xuICAgIGNvbnN0IGlzRGFyayA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2RhcmsnKVxuICAgIGNvbnN0IG5ld0lzRGFyayA9ICFpc0RhcmtcbiAgICBcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLnN0b3JhZ2VLZXlWYWx1ZSwgSlNPTi5zdHJpbmdpZnkobmV3SXNEYXJrKSlcbiAgICB0aGlzLnVwZGF0ZVRoZW1lKG5ld0lzRGFyaylcbiAgfVxuXG4gIHByaXZhdGUgaW5pdGlhbGl6ZVRoZW1lKCk6IHZvaWQge1xuICAgIGNvbnN0IHNhdmVkSXNEYXJrID0gdGhpcy5nZXRTYXZlZFRoZW1lKClcbiAgICB0aGlzLnVwZGF0ZVRoZW1lKHNhdmVkSXNEYXJrKVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRTYXZlZFRoZW1lKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMuc3RvcmFnZUtleVZhbHVlKSB8fCAnZmFsc2UnKVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVUaGVtZShpc0Rhcms6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAoaXNEYXJrKSB7XG4gICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZGFyaycpXG4gICAgICB0aGlzLmxpZ2h0SWNvblRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgICAgdGhpcy5kYXJrSWNvblRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZGFyaycpXG4gICAgICB0aGlzLmxpZ2h0SWNvblRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgdGhpcy5kYXJrSWNvblRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tICdAaG90d2lyZWQvc3RpbXVsdXMnXG5cbi8qKlxuICogRHJvcGRvd24gQ29udHJvbGxlclxuICpcbiAqIEEgdmVyc2F0aWxlIGNvbnRyb2xsZXIgZm9yIHRvZ2dsaW5nIHZpc2liaWxpdHkgb2YgZHJvcGRvd24gbWVudXMsIHNpZGViYXJzLCBhbmQgbW9kYWxzLlxuICpcbiAqIFVzYWdlOlxuICogICA8ZGl2IGRhdGEtY29udHJvbGxlcj1cImRyb3Bkb3duXCI+XG4gKiAgICAgPGJ1dHRvbiBkYXRhLWFjdGlvbj1cImNsaWNrLT5kcm9wZG93biN0b2dnbGVcIj5Ub2dnbGU8L2J1dHRvbj5cbiAqICAgICA8ZGl2IGRhdGEtZHJvcGRvd24tdGFyZ2V0PVwibWVudVwiIGNsYXNzPVwiaGlkZGVuXCI+XG4gKiAgICAgICBNZW51IGNvbnRlbnQuLi5cbiAqICAgICA8L2Rpdj5cbiAqICAgPC9kaXY+XG4gKlxuICogVGFyZ2V0czpcbiAqICAgLSBtZW51IChyZXF1aXJlZCk6IFRoZSBlbGVtZW50IHRvIHNob3cvaGlkZVxuICogICAtIHRyaWdnZXIgKG9wdGlvbmFsKTogVGhlIGJ1dHRvbiB0aGF0IHRyaWdnZXJzIHRoZSBkcm9wZG93biAoZ2V0cyBhcmlhLWV4cGFuZGVkIGF0dHJpYnV0ZSlcbiAqXG4gKiBWYWx1ZXM6XG4gKiAgIC0gY2xvc2VPbkNsaWNrT3V0c2lkZSAoYm9vbGVhbiwgZGVmYXVsdDogdHJ1ZSk6IEF1dG8tY2xvc2Ugd2hlbiBjbGlja2luZyBvdXRzaWRlXG4gKlxuICogQWN0aW9uczpcbiAqICAgLSB0b2dnbGU6IFRvZ2dsZSBtZW51IHZpc2liaWxpdHlcbiAqICAgLSBvcGVuOiBTaG93IG1lbnVcbiAqICAgLSBjbG9zZTogSGlkZSBtZW51XG4gKlxuICogRXhhbXBsZXM6XG4gKiAgIC8vIFVzZXIgZHJvcGRvd24gd2l0aCBhdXRvLWNsb3NlXG4gKiAgIDxkaXYgZGF0YS1jb250cm9sbGVyPVwiZHJvcGRvd25cIj5cbiAqICAgICA8YnV0dG9uIGRhdGEtZHJvcGRvd24tdGFyZ2V0PVwidHJpZ2dlclwiIGRhdGEtYWN0aW9uPVwiY2xpY2stPmRyb3Bkb3duI3RvZ2dsZVwiPk1lbnU8L2J1dHRvbj5cbiAqICAgICA8ZGl2IGRhdGEtZHJvcGRvd24tdGFyZ2V0PVwibWVudVwiIGNsYXNzPVwiaGlkZGVuXCI+Li4uPC9kaXY+XG4gKiAgIDwvZGl2PlxuICpcbiAqICAgLy8gTW9iaWxlIHNpZGViYXIgd2l0aG91dCBhdXRvLWNsb3NlXG4gKiAgIDxkaXYgZGF0YS1jb250cm9sbGVyPVwiZHJvcGRvd25cIiBkYXRhLWRyb3Bkb3duLWNsb3NlLW9uLWNsaWNrLW91dHNpZGUtdmFsdWU9XCJmYWxzZVwiPlxuICogICAgIDxidXR0b24gZGF0YS1hY3Rpb249XCJjbGljay0+ZHJvcGRvd24jdG9nZ2xlXCI+XHUyNjMwPC9idXR0b24+XG4gKiAgICAgPGRpdiBkYXRhLWRyb3Bkb3duLXRhcmdldD1cIm1lbnVcIiBjbGFzcz1cImhpZGRlblwiPi4uLjwvZGl2PlxuICogICA8L2Rpdj5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gWydtZW51JywgJ3RyaWdnZXInXVxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIGNsb3NlT25DbGlja091dHNpZGU6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogdHJ1ZSB9XG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IG1lbnVUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdHJpZ2dlclRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNUcmlnZ2VyVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2xvc2VPbkNsaWNrT3V0c2lkZVZhbHVlOiBib29sZWFuXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jbG9zZU9uQ2xpY2tPdXRzaWRlVmFsdWUpIHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbGlja091dHNpZGUuYmluZCh0aGlzKSlcbiAgICB9XG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNsb3NlT25DbGlja091dHNpZGVWYWx1ZSkge1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsaWNrT3V0c2lkZS5iaW5kKHRoaXMpKVxuICAgIH1cbiAgfVxuXG4gIHRvZ2dsZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBpc0hpZGRlbiA9IHRoaXMubWVudVRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpXG4gICAgaWYgKGlzSGlkZGVuKSB7XG4gICAgICB0aGlzLm9wZW4oZXZlbnQpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY2xvc2UoZXZlbnQpXG4gICAgfVxuICB9XG5cbiAgb3BlbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLm1lbnVUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICBpZiAodGhpcy5oYXNUcmlnZ2VyVGFyZ2V0KSB7XG4gICAgICB0aGlzLnRyaWdnZXJUYXJnZXQuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKVxuICAgIH1cbiAgfVxuXG4gIGNsb3NlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIHRoaXMubWVudVRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIGlmICh0aGlzLmhhc1RyaWdnZXJUYXJnZXQpIHtcbiAgICAgIHRoaXMudHJpZ2dlclRhcmdldC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY2xpY2tPdXRzaWRlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5lbGVtZW50LmNvbnRhaW5zKGV2ZW50LnRhcmdldCBhcyBOb2RlKSkge1xuICAgICAgdGhpcy5jbG9zZShldmVudClcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbi8vIFNESyBJbnRlZ3JhdGlvbiBDb250cm9sbGVyXG4vLyBIYW5kbGVzIFNESyBhdmFpbGFiaWxpdHkgZGV0ZWN0aW9uIGFuZCBjb21tdW5pY2F0aW9uIHdpdGggZXh0ZXJuYWwgZGV2ZWxvcG1lbnQgdG9vbHNcbi8vIHN0aW11bHVzLXZhbGlkYXRvcjogc3lzdGVtLWNvbnRyb2xsZXJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcInNka0J1dHRvblwiXG4gIF1cblxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIG1lc3NhZ2U6IFN0cmluZyxcbiAgICBhY3Rpb246IFN0cmluZ1xuICB9XG5cbiAgLy8gRGVjbGFyZSB0YXJnZXRzIGFuZCB2YWx1ZXNcbiAgZGVjbGFyZSByZWFkb25seSBzZGtCdXR0b25UYXJnZXQ6IEhUTUxCdXR0b25FbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzU2RrQnV0dG9uVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbWVzc2FnZVZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSByZWFkb25seSBhY3Rpb25WYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICAvLyBDaGVjayBTREsgYXZhaWxhYmlsaXR5IGFuZCBzaG93IFNESyBidXR0b25zIGlmIGF2YWlsYWJsZVxuICAgIHRoaXMuY2hlY2tTREtBdmFpbGFiaWxpdHkoKVxuICB9XG5cbiAgLy8gU2VuZCBtZXNzYWdlIHRvIGNoYXRib3ggKFNESyBpbnRlZ3JhdGlvbilcbiAgc2VuZFRvQ2hhdGJveCgpOiB2b2lkIHtcbiAgICBpZiAoIXdpbmRvdy5zZGtVdGlscyB8fCAhd2luZG93LnNka1V0aWxzLnNlbmRNZXNzYWdlKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1NESyBub3QgYXZhaWxhYmxlJylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLm1lc3NhZ2VWYWx1ZSB8fCB0aGlzLmdlbmVyYXRlRGVmYXVsdE1lc3NhZ2UoKVxuICAgIHdpbmRvdy5zZGtVdGlscy5zZW5kTWVzc2FnZShtZXNzYWdlKVxuICB9XG5cbiAgLy8gU2VuZCBlcnJvciB0byBjaGF0Ym94IGZvciBmaXhpbmdcbiAgc2VuZEVycm9yVG9DaGF0Ym94KCk6IHZvaWQge1xuICAgIGlmICghd2luZG93LnNka1V0aWxzIHx8ICF3aW5kb3cuc2RrVXRpbHMuc2VuZEVycm9yRm9yRml4KSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1NESyBub3QgYXZhaWxhYmxlJylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGFjdGlvbiA9IHRoaXMuYWN0aW9uVmFsdWUgfHwgJ3NlbmRFcnJvckZvckZpeCdcbiAgICBpZiAoYWN0aW9uID09PSAnc2VuZEVycm9yRm9yRml4Jykge1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdGhpcy5tZXNzYWdlVmFsdWUgfHwgJ1Vua25vd24gZXJyb3InXG4gICAgICB3aW5kb3cuc2RrVXRpbHMuc2VuZEVycm9yRm9yRml4KHsgZXJyb3JNZXNzYWdlIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLm1lc3NhZ2VWYWx1ZSB8fCB0aGlzLmdlbmVyYXRlRGVmYXVsdE1lc3NhZ2UoKVxuICAgICAgd2luZG93LnNka1V0aWxzLnNlbmRNZXNzYWdlKG1lc3NhZ2UpXG4gICAgfVxuICB9XG5cbiAgLy8gQ2hlY2sgU0RLIGF2YWlsYWJpbGl0eSBhbmQgc2hvdy9oaWRlIFNESyBidXR0b25zXG4gIHByaXZhdGUgY2hlY2tTREtBdmFpbGFiaWxpdHkoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc1Nka0J1dHRvblRhcmdldCkgcmV0dXJuXG5cbiAgICBjb25zdCBjaGVja0FuZFNob3cgPSAoKSA9PiB7XG4gICAgICBpZiAod2luZG93LmlzU0RLQXZhaWxhYmxlICYmIHdpbmRvdy5pc1NES0F2YWlsYWJsZSgpKSB7XG4gICAgICAgIHRoaXMuc2RrQnV0dG9uVGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICAvLyBJbml0aWFsIGNoZWNrXG4gICAgaWYgKCFjaGVja0FuZFNob3coKSkge1xuICAgICAgLy8gUmV0cnkgYWZ0ZXIgMSBzZWNvbmQgKGluIGNhc2UgU0RLIGlzIGxvYWRpbmcpXG4gICAgICBzZXRUaW1lb3V0KGNoZWNrQW5kU2hvdywgMTAwMClcbiAgICAgIC8vIEZpbmFsIHJldHJ5IGFmdGVyIDIuOCBzZWNvbmRzXG4gICAgICBzZXRUaW1lb3V0KGNoZWNrQW5kU2hvdywgMjgwMClcbiAgICB9XG4gIH1cblxuICAvLyBHZW5lcmF0ZSBkZWZhdWx0IG1lc3NhZ2UgZm9yIFNES1xuICBwcml2YXRlIGdlbmVyYXRlRGVmYXVsdE1lc3NhZ2UoKTogc3RyaW5nIHtcbiAgICBjb25zdCB1cmwgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuc3Vic3RyaW5nKDEpXG4gICAgcmV0dXJuIGBQbGVhc2UgaGVscCBtZSB3aXRoIHRoaXMgcGFnZTogJHt1cmx9XG5cblVSTDogJHt3aW5kb3cubG9jYXRpb24uaHJlZn1cblBhdGg6ICR7dXJsfVxuXG5JIG5lZWQgYXNzaXN0YW5jZSB3aXRoIHRoaXMgcGFnZS5gXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbi8qXG4gKiBDbGlwYm9hcmQgQ29udHJvbGxlclxuICpcbiAqIFVzYWdlOlxuICogPGRpdiBkYXRhLWNvbnRyb2xsZXI9XCJjbGlwYm9hcmRcIj5cbiAqICAgPGlucHV0IGRhdGEtY2xpcGJvYXJkLXRhcmdldD1cInNvdXJjZVwiIHZhbHVlPVwidGV4dCB0byBjb3B5XCI+XG4gKiAgIDxidXR0b24gZGF0YS1hY3Rpb249XCJjbGljay0+Y2xpcGJvYXJkI2NvcHlcIj5Db3B5PC9idXR0b24+XG4gKiA8L2Rpdj5cbiAqL1xuLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBzeXN0ZW0tY29udHJvbGxlclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wic291cmNlXCJdXG5cbiAgLy8gRGVjbGFyZSB0YXJnZXRzXG4gIGRlY2xhcmUgcmVhZG9ubHkgc291cmNlVGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG5cbiAgLy8gQ29weSBjb250ZW50IHRvIGNsaXBib2FyZFxuICBjb3B5KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IHRleHRUb0NvcHkgPSB0aGlzLnNvdXJjZVRhcmdldC52YWx1ZVxuXG4gICAgaWYgKCF0ZXh0VG9Db3B5KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdObyB0ZXh0IHRvIGNvcHkgZm91bmQnKVxuICAgICAgdGhpcy5zaG93RmFpbHVyZSgpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoIXdpbmRvdy5jb3B5VG9DbGlwYm9hcmQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ3dpbmRvdy5jb3B5VG9DbGlwYm9hcmQgbm90IGF2YWlsYWJsZScpXG4gICAgICB0aGlzLnNob3dGYWlsdXJlKClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdBdHRlbXB0aW5nIHRvIGNvcHk6JywgdGV4dFRvQ29weSlcbiAgICB3aW5kb3cuY29weVRvQ2xpcGJvYXJkKHRleHRUb0NvcHkpLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5zaG93U3VjY2VzcygpXG4gICAgfSkuY2F0Y2goX2Vycm9yID0+IHtcbiAgICAgIHRoaXMuc2hvd0ZhaWx1cmUoKVxuICAgIH0pXG4gIH1cblxuICAvLyBTaG93IHN1Y2Nlc3MgZmVlZGJhY2tcbiAgcHJpdmF0ZSBzaG93U3VjY2VzcygpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSB0aGlzLmdldEJ1dHRvbigpXG4gICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gYnV0dG9uLmlubmVySFRNTFxuICAgIGNvbnN0IG9yaWdpbmFsQ2xhc3MgPSBidXR0b24uY2xhc3NOYW1lXG5cbiAgICAvLyBTaG93IHN1Y2Nlc3Mgc3RhdGVcbiAgICBidXR0b24uaW5uZXJIVE1MID0gJ0NvcGllZCEnXG4gICAgYnV0dG9uLmNsYXNzTmFtZSA9IG9yaWdpbmFsQ2xhc3MucmVwbGFjZSgvYnRuLVxcdysvLCAnYnRuLXN1Y2Nlc3MnKVxuXG4gICAgLy8gUmVzdG9yZSBvcmlnaW5hbCBzdGF0ZSBhZnRlciAyIHNlY29uZHNcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGJ1dHRvbi5pbm5lckhUTUwgPSBvcmlnaW5hbFRleHRcbiAgICAgIGJ1dHRvbi5jbGFzc05hbWUgPSBvcmlnaW5hbENsYXNzXG4gICAgfSwgMjAwMClcbiAgfVxuXG4gIC8vIFNob3cgZmFpbHVyZSBmZWVkYmFja1xuICBwcml2YXRlIHNob3dGYWlsdXJlKCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuZ2V0QnV0dG9uKClcbiAgICBjb25zdCBvcmlnaW5hbFRleHQgPSBidXR0b24uaW5uZXJIVE1MXG4gICAgY29uc3Qgb3JpZ2luYWxDbGFzcyA9IGJ1dHRvbi5jbGFzc05hbWVcblxuICAgIC8vIFNob3cgZmFpbHVyZSBzdGF0ZVxuICAgIGJ1dHRvbi5pbm5lckhUTUwgPSAnQ29weSBGYWlsZWQhJ1xuICAgIGJ1dHRvbi5jbGFzc05hbWUgPSBvcmlnaW5hbENsYXNzLnJlcGxhY2UoL2J0bi1cXHcrLywgJ2J0bi1kYW5nZXInKVxuXG4gICAgLy8gUmVzdG9yZSBvcmlnaW5hbCBzdGF0ZSBhZnRlciAyIHNlY29uZHNcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGJ1dHRvbi5pbm5lckhUTUwgPSBvcmlnaW5hbFRleHRcbiAgICAgIGJ1dHRvbi5jbGFzc05hbWUgPSBvcmlnaW5hbENsYXNzXG4gICAgfSwgMjAwMClcbiAgfVxuXG4gIC8vIEdldCB0aGUgYnV0dG9uIHRvIHNob3cgZmVlZGJhY2sgb25cbiAgcHJpdmF0ZSBnZXRCdXR0b24oKTogSFRNTEVsZW1lbnQge1xuICAgIC8vIExvb2sgZm9yIGEgYnV0dG9uIHdpdGhpbiB0aGUgY29udHJvbGxlciBzY29wZVxuICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdidXR0b24nKVxuICAgIGlmIChidXR0b24pIHtcbiAgICAgIHJldHVybiBidXR0b25cbiAgICB9XG5cbiAgICAvLyBGYWxsIGJhY2sgdG8gY29udHJvbGxlciBlbGVtZW50IGlmIGl0J3MgYSBidXR0b25cbiAgICByZXR1cm4gdGhpcy5lbGVtZW50XG4gIH1cblxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuLy8gRGVjbGFyZSBUdXJibyBnbG9iYWwgdHlwZVxuZGVjbGFyZSBjb25zdCBUdXJibzogYW55XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gICAgXCJtb2RhbFwiLFxuICAgIFwiZGVwYXJ0dXJlXCIsXG4gICAgXCJkZXN0aW5hdGlvblwiLFxuICAgIFwiZGVwYXJ0dXJlQ2l0eUlucHV0XCIsXG4gICAgXCJkZXN0aW5hdGlvbkNpdHlJbnB1dFwiLFxuICAgIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBcInRhYkRlcGFydHVyZVwiLFxuICAgIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBcInRhYkRlc3RpbmF0aW9uXCIsXG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIFwidGFiRG9tZXN0aWNcIixcbiAgICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gICAgXCJ0YWJJbnRlcm5hdGlvbmFsXCIsXG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIFwic2VhcmNoSW5wdXRcIixcbiAgICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gICAgXCJkb21lc3RpY0xpc3RcIixcbiAgICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gICAgXCJpbnRlcm5hdGlvbmFsTGlzdFwiLFxuICAgIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBcImhpc3RvcnlTZWN0aW9uXCIsXG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIFwiY3VycmVudENpdHlcIixcbiAgICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gICAgXCJsb2NhdGlvblN0YXR1c1wiLFxuICAgIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBcImxvY2F0aW9uQnV0dG9uXCIsXG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIFwibG9jYXRpb25UZXh0XCIsXG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIFwibG9jYXRpb25TcGlubmVyXCIsXG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIFwibG9jYXRlZENpdHlcIixcbiAgICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gICAgXCJsb2NhdGVkQ2l0eUJ1dHRvblwiLFxuICAgIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBcImN1cnJlbnRSZWdpb25UYWJcIlxuICBdXG5cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBkZXBhcnR1cmVDaXR5OiBTdHJpbmcsXG4gICAgZGVzdGluYXRpb25DaXR5OiBTdHJpbmcsXG4gICAgZW5hYmxlTXVsdGlTZWxlY3Q6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogdHJ1ZSB9LFxuICAgIG1vZGFsVGl0bGU6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9XG4gIH1cblxuICBwcml2YXRlIHNlbGVjdGlvblR5cGU6ICdkZXBhcnR1cmUnIHwgJ2Rlc3RpbmF0aW9uJyA9ICdkZXBhcnR1cmUnXG4gIHByaXZhdGUgaXNNdWx0aVNlbGVjdE1vZGU6IGJvb2xlYW4gPSBmYWxzZVxuICBwcml2YXRlIHNlbGVjdGVkQ2l0aWVzOiBzdHJpbmdbXSA9IFtdXG5cbiAgZGVjbGFyZSByZWFkb25seSBkZXBhcnR1cmVUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVzdGluYXRpb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVwYXJ0dXJlQ2l0eUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVzdGluYXRpb25DaXR5SW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgLy8gT3B0aW9uYWwgdGFyZ2V0IGNoZWNrZXJzIC0gdGhlc2UgbWFyayB0YXJnZXRzIGFzIG9wdGlvbmFsXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzRGVwYXJ0dXJlVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzRGVzdGluYXRpb25UYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNEZXBhcnR1cmVDaXR5SW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNEZXN0aW5hdGlvbkNpdHlJbnB1dFRhcmdldDogYm9vbGVhblxuICAvLyBNb2RhbC1yZWxhdGVkIHRhcmdldHMgLSBhbGwgb3B0aW9uYWwgZm9yIHBhZ2VzIHdpdGhvdXQgbW9kYWxcbiAgZGVjbGFyZSByZWFkb25seSBoYXNNb2RhbFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IG1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1RhYkRlcGFydHVyZVRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IHRhYkRlcGFydHVyZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNUYWJEZXN0aW5hdGlvblRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IHRhYkRlc3RpbmF0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1RhYkRvbWVzdGljVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgdGFiRG9tZXN0aWNUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzVGFiSW50ZXJuYXRpb25hbFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IHRhYkludGVybmF0aW9uYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzU2VhcmNoSW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBzZWFyY2hJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0RvbWVzdGljTGlzdFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGRvbWVzdGljTGlzdFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNJbnRlcm5hdGlvbmFsTGlzdFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGludGVybmF0aW9uYWxMaXN0VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0hpc3RvcnlTZWN0aW9uVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGlzdG9yeVNlY3Rpb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQ3VycmVudENpdHlUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBjdXJyZW50Q2l0eVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNMb2NhdGlvblN0YXR1c1RhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGxvY2F0aW9uU3RhdHVzVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0xvY2F0aW9uQnV0dG9uVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbG9jYXRpb25CdXR0b25UYXJnZXQ6IEhUTUxCdXR0b25FbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzTG9jYXRpb25UZXh0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbG9jYXRpb25UZXh0VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0xvY2F0aW9uU3Bpbm5lclRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGxvY2F0aW9uU3Bpbm5lclRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNMb2NhdGVkQ2l0eVRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGxvY2F0ZWRDaXR5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0xvY2F0ZWRDaXR5QnV0dG9uVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbG9jYXRlZENpdHlCdXR0b25UYXJnZXQ6IEhUTUxCdXR0b25FbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQ3VycmVudFJlZ2lvblRhYlRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGN1cnJlbnRSZWdpb25UYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgZGVwYXJ0dXJlQ2l0eVZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBkZXN0aW5hdGlvbkNpdHlWYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgZW5hYmxlTXVsdGlTZWxlY3RWYWx1ZTogYm9vbGVhblxuICBkZWNsYXJlIG1vZGFsVGl0bGVWYWx1ZTogc3RyaW5nXG5cbiAgcHJpdmF0ZSBjdXJyZW50TXVsdGlDaXR5U2VnbWVudElkOiBzdHJpbmcgfCBudWxsID0gbnVsbFxuICBwcml2YXRlIGN1cnJlbnRNdWx0aUNpdHlDaXR5VHlwZTogc3RyaW5nIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSBjdXJyZW50UmVnaW9uVHlwZTogJ2RvbWVzdGljJyB8ICdpbnRlcm5hdGlvbmFsJyA9ICdkb21lc3RpYydcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiQ2l0eVNlbGVjdG9yIGNvbm5lY3RlZFwiLCB7IGVuYWJsZU11bHRpU2VsZWN0OiB0aGlzLmVuYWJsZU11bHRpU2VsZWN0VmFsdWUgfSlcbiAgICAvLyBJbml0aWFsaXplIGRlZmF1bHQgdmFsdWVzXG4gICAgaWYgKCF0aGlzLmRlcGFydHVyZUNpdHlWYWx1ZSkgdGhpcy5kZXBhcnR1cmVDaXR5VmFsdWUgPSBcIlx1NTMxN1x1NEVBQ1wiXG4gICAgaWYgKCF0aGlzLmRlc3RpbmF0aW9uQ2l0eVZhbHVlKSB0aGlzLmRlc3RpbmF0aW9uQ2l0eVZhbHVlID0gXCJcdTY3NkRcdTVEREVcIlxuICAgIFxuICAgIC8vIFNldCBpbml0aWFsIHZhbHVlcyB0byBoaWRkZW4gaW5wdXRzIChvbmx5IGlmIHRhcmdldHMgZXhpc3QpXG4gICAgaWYgKHRoaXMuaGFzRGVwYXJ0dXJlQ2l0eUlucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLmRlcGFydHVyZUNpdHlJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlXG4gICAgfVxuICAgIGlmICh0aGlzLmhhc0Rlc3RpbmF0aW9uQ2l0eUlucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLmRlc3RpbmF0aW9uQ2l0eUlucHV0VGFyZ2V0LnZhbHVlID0gdGhpcy5kZXN0aW5hdGlvbkNpdHlWYWx1ZVxuICAgIH1cbiAgICBcbiAgICAvLyBIaWRlIG11bHRpLXNlbGVjdCBVSSBpZiBkaXNhYmxlZFxuICAgIGlmICghdGhpcy5lbmFibGVNdWx0aVNlbGVjdFZhbHVlKSB7XG4gICAgICB0aGlzLmhpZGVNdWx0aVNlbGVjdFVJKClcbiAgICB9XG4gICAgXG4gICAgLy8gTGlzdGVuIGZvciBtdWx0aS1jaXR5IGV2ZW50c1xuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtdWx0aS1jaXR5Om9wZW4tY2l0eS1zZWxlY3RvcicsIHRoaXMuaGFuZGxlTXVsdGlDaXR5T3Blbi5iaW5kKHRoaXMpKVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbXVsdGktY2l0eTpvcGVuLWNpdHktc2VsZWN0b3InLCB0aGlzLmhhbmRsZU11bHRpQ2l0eU9wZW4uYmluZCh0aGlzKSlcbiAgfVxuXG4gIC8vIEhhbmRsZSBtdWx0aS1jaXR5IGNpdHkgc2VsZWN0b3IgcmVxdWVzdFxuICBwcml2YXRlIGhhbmRsZU11bHRpQ2l0eU9wZW4oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY3VzdG9tRXZlbnQgPSBldmVudCBhcyBDdXN0b21FdmVudFxuICAgIGNvbnN0IHsgc2VnbWVudElkLCBjaXR5VHlwZSB9ID0gY3VzdG9tRXZlbnQuZGV0YWlsXG4gICAgY29uc29sZS5sb2coJ0NpdHkgc2VsZWN0b3I6IFJlY2VpdmVkIG11bHRpLWNpdHkgb3BlbiByZXF1ZXN0JywgeyBzZWdtZW50SWQsIGNpdHlUeXBlIH0pXG4gICAgdGhpcy5jdXJyZW50TXVsdGlDaXR5U2VnbWVudElkID0gc2VnbWVudElkXG4gICAgdGhpcy5jdXJyZW50TXVsdGlDaXR5Q2l0eVR5cGUgPSBjaXR5VHlwZVxuICAgIHRoaXMuc2VsZWN0aW9uVHlwZSA9IGNpdHlUeXBlID09PSAnZGVwYXJ0dXJlJyA/ICdkZXBhcnR1cmUnIDogJ2Rlc3RpbmF0aW9uJ1xuICAgIHRoaXMudXBkYXRlTW9kYWxUaXRsZSgpXG4gICAgdGhpcy5zaG93TW9kYWwoKVxuICB9XG5cbiAgLy8gT3BlbiBtb2RhbCBmb3IgZGVwYXJ0dXJlIGNpdHkgc2VsZWN0aW9uXG4gIG9wZW5EZXBhcnR1cmUoKTogdm9pZCB7XG4gICAgdGhpcy5zZWxlY3Rpb25UeXBlID0gJ2RlcGFydHVyZSdcbiAgICB0aGlzLmlzTXVsdGlTZWxlY3RNb2RlID0gZmFsc2VcbiAgICB0aGlzLnNlbGVjdGVkQ2l0aWVzID0gW11cbiAgICB0aGlzLnVwZGF0ZU1vZGFsVGl0bGUoKVxuICAgIHRoaXMudXBkYXRlTXVsdGlTZWxlY3RVSSgpXG4gICAgdGhpcy5zaG93TW9kYWwoKVxuICB9XG5cbiAgLy8gT3BlbiBtb2RhbCBmb3IgZGVzdGluYXRpb24gY2l0eSBzZWxlY3Rpb25cbiAgb3BlbkRlc3RpbmF0aW9uKCk6IHZvaWQge1xuICAgIHRoaXMuc2VsZWN0aW9uVHlwZSA9ICdkZXN0aW5hdGlvbidcbiAgICB0aGlzLmlzTXVsdGlTZWxlY3RNb2RlID0gZmFsc2VcbiAgICB0aGlzLnNlbGVjdGVkQ2l0aWVzID0gW11cbiAgICB0aGlzLnVwZGF0ZU1vZGFsVGl0bGUoKVxuICAgIHRoaXMudXBkYXRlTXVsdGlTZWxlY3RVSSgpXG4gICAgdGhpcy5zaG93TW9kYWwoKVxuICB9XG5cbiAgLy8gT3BlbiBtb2RhbCBmb3IgaG90ZWwgc2VhcmNoIGNpdHkgc2VsZWN0aW9uXG4gIG9wZW5Ib3RlbENpdHlTZWxlY3RvcigpOiB2b2lkIHtcbiAgICB0aGlzLnNlbGVjdGlvblR5cGUgPSAnZGVwYXJ0dXJlJ1xuICAgIHRoaXMuaXNNdWx0aVNlbGVjdE1vZGUgPSBmYWxzZVxuICAgIHRoaXMuc2VsZWN0ZWRDaXRpZXMgPSBbXVxuICAgIHRoaXMudXBkYXRlTW9kYWxUaXRsZSgpXG4gICAgdGhpcy5zaG93TW9kYWwoKVxuICB9XG5cbiAgLy8gU2hvdyBtb2RhbFxuICBzaG93TW9kYWwoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc01vZGFsVGFyZ2V0KSByZXR1cm5cbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nXG4gIH1cblxuICAvLyBDbG9zZSBtb2RhbFxuICBjbG9zZU1vZGFsKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNNb2RhbFRhcmdldCkgcmV0dXJuXG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJ1xuICAgIHRoaXMuY2xlYXJTZWFyY2goKVxuICB9XG5cbiAgLy8gU2VsZWN0IGNpdHlcbiAgc2VsZWN0Q2l0eShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgY2l0eU5hbWUgPSBidXR0b24uZGF0YXNldC5jaXR5TmFtZSB8fCAnJ1xuICAgIGNvbnN0IGlzSW50ZXJuYXRpb25hbCA9IGJ1dHRvbi5kYXRhc2V0LmludGVybmF0aW9uYWwgPT09ICd0cnVlJ1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCdDaXR5IHNlbGVjdG9yOiBDaXR5IHNlbGVjdGVkOicsIGNpdHlOYW1lLCAnaW50ZXJuYXRpb25hbDonLCBpc0ludGVybmF0aW9uYWwpXG4gICAgXG4gICAgLy8gTXVsdGktc2VsZWN0IG1vZGVcbiAgICBpZiAodGhpcy5pc011bHRpU2VsZWN0TW9kZSkge1xuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRDaXRpZXMuaW5jbHVkZXMoY2l0eU5hbWUpKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRDaXRpZXMgPSB0aGlzLnNlbGVjdGVkQ2l0aWVzLmZpbHRlcihjaXR5ID0+IGNpdHkgIT09IGNpdHlOYW1lKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENpdGllcy5wdXNoKGNpdHlOYW1lKVxuICAgICAgfVxuICAgICAgdGhpcy51cGRhdGVTZWxlY3RlZENpdGllc0Rpc3BsYXkoKVxuICAgICAgdGhpcy51cGRhdGVDaXR5QnV0dG9uU3RhdGVzKClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGZvciBtdWx0aS1jaXR5XG4gICAgaWYgKHRoaXMuY3VycmVudE11bHRpQ2l0eVNlZ21lbnRJZCAmJiB0aGlzLmN1cnJlbnRNdWx0aUNpdHlDaXR5VHlwZSkge1xuICAgICAgY29uc29sZS5sb2coJ0NpdHkgc2VsZWN0b3I6IE11bHRpLWNpdHkgbW9kZSwgZGlzcGF0Y2hpbmcgZXZlbnQnLCB7XG4gICAgICAgIHNlZ21lbnRJZDogdGhpcy5jdXJyZW50TXVsdGlDaXR5U2VnbWVudElkLFxuICAgICAgICBjaXR5VHlwZTogdGhpcy5jdXJyZW50TXVsdGlDaXR5Q2l0eVR5cGUsXG4gICAgICAgIGNpdHlOYW1lOiBjaXR5TmFtZVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gVHJpZ2dlciBldmVudCB0byB1cGRhdGUgbXVsdGktY2l0eSBzZWdtZW50IC0gZGlzcGF0Y2ggb24gZG9jdW1lbnQgZm9yIGJldHRlciBwcm9wYWdhdGlvblxuICAgICAgY29uc3QgdXBkYXRlRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2NpdHktc2VsZWN0b3I6Y2l0eS1zZWxlY3RlZCcsIHtcbiAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgc2VnbWVudElkOiB0aGlzLmN1cnJlbnRNdWx0aUNpdHlTZWdtZW50SWQsXG4gICAgICAgICAgY2l0eVR5cGU6IHRoaXMuY3VycmVudE11bHRpQ2l0eUNpdHlUeXBlLFxuICAgICAgICAgIGNpdHlOYW1lOiBjaXR5TmFtZVxuICAgICAgICB9LFxuICAgICAgICBidWJibGVzOiB0cnVlXG4gICAgICB9KVxuICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudCh1cGRhdGVFdmVudClcbiAgICAgIFxuICAgICAgLy8gUmVzZXQgbXVsdGktY2l0eSBzdGF0ZVxuICAgICAgdGhpcy5jdXJyZW50TXVsdGlDaXR5U2VnbWVudElkID0gbnVsbFxuICAgICAgdGhpcy5jdXJyZW50TXVsdGlDaXR5Q2l0eVR5cGUgPSBudWxsXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCdDaXR5IHNlbGVjdG9yOiBSZWd1bGFyIG1vZGUnKVxuICAgICAgLy8gUmVndWxhciBzaW5nbGUvcm91bmQgdHJpcCBzZWxlY3Rpb25cbiAgICAgIGlmICh0aGlzLnNlbGVjdGlvblR5cGUgPT09ICdkZXBhcnR1cmUnKSB7XG4gICAgICAgIHRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlID0gY2l0eU5hbWVcbiAgICAgICAgaWYgKHRoaXMuaGFzRGVwYXJ0dXJlVGFyZ2V0KSB7XG4gICAgICAgICAgdGhpcy5kZXBhcnR1cmVUYXJnZXQudGV4dENvbnRlbnQgPSBjaXR5TmFtZVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhhc0RlcGFydHVyZUNpdHlJbnB1dFRhcmdldCkge1xuICAgICAgICAgIHRoaXMuZGVwYXJ0dXJlQ2l0eUlucHV0VGFyZ2V0LnZhbHVlID0gY2l0eU5hbWVcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3Igc3BlY2lhbF9ob3RlbHMgcGFnZSAtIHJlbG9hZCB3aXRoIG5ldyBjaXR5IHBhcmFtZXRlclxuICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lID09PSAnL3NwZWNpYWxfaG90ZWxzJykge1xuICAgICAgICAgIFR1cmJvLnZpc2l0KGAvc3BlY2lhbF9ob3RlbHM/Y2l0eT0ke2VuY29kZVVSSUNvbXBvbmVudChjaXR5TmFtZSl9YClcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgaG90ZWxzL3NlYXJjaCBwYWdlIC0gcmVsb2FkIHdpdGggbmV3IGNpdHkgcGFyYW1ldGVyXG4gICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgPT09ICcvaG90ZWxzL3NlYXJjaCcpIHtcbiAgICAgICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKVxuICAgICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdjaXR5JywgY2l0eU5hbWUpXG4gICAgICAgICAgVHVyYm8udmlzaXQodXJsLnRvU3RyaW5nKCkpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIERpc3BhdGNoIGNpdHktY2hhbmdlZCBldmVudCBmb3IgdG91ci1ncm91cC1maWx0ZXIgYW5kIGhvdGVsLXNlcnZpY2VzLXNlYXJjaCB0byBsaXN0ZW5cbiAgICAgICAgdGhpcy5kaXNwYXRjaENpdHlDaGFuZ2VkRXZlbnQoY2l0eU5hbWUpXG4gICAgICAgIFxuICAgICAgICAvLyBEaXNwYXRjaCBob3RlbC1zcGVjaWZpYyBldmVudCBmb3IgaG90ZWwtc2VhcmNoIGNvbnRyb2xsZXJcbiAgICAgICAgdGhpcy5kaXNwYXRjaEhvdGVsQ2l0eVVwZGF0ZUV2ZW50KGNpdHlOYW1lLCBpc0ludGVybmF0aW9uYWwpXG4gICAgICAgIFxuICAgICAgICAvLyBEaXNwYXRjaCB0cmlwLXBsYW5uZXIgY2l0eSBjaGFuZ2UgZXZlbnRcbiAgICAgICAgdGhpcy5kaXNwYXRjaFRyaXBDaXR5Q2hhbmdlRXZlbnQoJ2RlcGFydHVyZScsIGNpdHlOYW1lKVxuICAgICAgICBcbiAgICAgICAgLy8gRGlzcGF0Y2ggY2l0eS1zZWxlY3RvcjpjaXR5LXNlbGVjdGVkIGV2ZW50IGZvciBjYXItcmVudGFsLXRhYnMgdG8gbGlzdGVuXG4gICAgICAgIGNvbnN0IGNhckNpdHlFdmVudCA9IG5ldyBDdXN0b21FdmVudCgnY2l0eS1zZWxlY3RvcjpjaXR5LXNlbGVjdGVkJywge1xuICAgICAgICAgIGRldGFpbDogeyBjaXR5TmFtZSB9LFxuICAgICAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICAgICAgfSlcbiAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChjYXJDaXR5RXZlbnQpXG4gICAgICAgIGNvbnNvbGUubG9nKCdDaXR5IHNlbGVjdG9yOiBEaXNwYXRjaGVkIGNpdHktc2VsZWN0ZWQgZXZlbnQgZm9yIGNhcnMnLCBjaXR5TmFtZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb25DaXR5VmFsdWUgPSBjaXR5TmFtZVxuICAgICAgICBpZiAodGhpcy5oYXNEZXN0aW5hdGlvblRhcmdldCkge1xuICAgICAgICAgIHRoaXMuZGVzdGluYXRpb25UYXJnZXQudGV4dENvbnRlbnQgPSBjaXR5TmFtZVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhhc0Rlc3RpbmF0aW9uQ2l0eUlucHV0VGFyZ2V0KSB7XG4gICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbkNpdHlJbnB1dFRhcmdldC52YWx1ZSA9IGNpdHlOYW1lXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIERpc3BhdGNoIGNpdHktY2hhbmdlZCBldmVudCBmb3IgdG91ci1ncm91cC1maWx0ZXIgdG8gbGlzdGVuXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hDaXR5Q2hhbmdlZEV2ZW50KGNpdHlOYW1lKVxuICAgICAgICBcbiAgICAgICAgLy8gRGlzcGF0Y2ggdHJpcC1wbGFubmVyIGNpdHkgY2hhbmdlIGV2ZW50XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hUcmlwQ2l0eUNoYW5nZUV2ZW50KCdkZXN0aW5hdGlvbicsIGNpdHlOYW1lKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICAgIHRoaXMuc2F2ZVRvSGlzdG9yeShjaXR5TmFtZSlcbiAgfVxuXG4gIC8vIFRvZ2dsZSByZWdpb24gdGFiIChkb21lc3RpYy9pbnRlcm5hdGlvbmFsKVxuICB0b2dnbGVSZWdpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHJlZ2lvbiA9IGJ1dHRvbi5kYXRhc2V0LnJlZ2lvbiBhcyAnZG9tZXN0aWMnIHwgJ2ludGVybmF0aW9uYWwnXG4gICAgXG4gICAgdGhpcy5jdXJyZW50UmVnaW9uVHlwZSA9IHJlZ2lvblxuICAgIFxuICAgIC8vIFVwZGF0ZSB0YWIgc3R5bGVzXG4gICAgaWYgKHRoaXMuaGFzVGFiRG9tZXN0aWNUYXJnZXQgJiYgdGhpcy5oYXNUYWJJbnRlcm5hdGlvbmFsVGFyZ2V0KSB7XG4gICAgICBpZiAocmVnaW9uID09PSAnZG9tZXN0aWMnKSB7XG4gICAgICAgIHRoaXMudGFiRG9tZXN0aWNUYXJnZXQuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLWItMicsICdib3JkZXItcHJpbWFyeScsICd0ZXh0LXByaW1hcnknLCAnZm9udC1ib2xkJylcbiAgICAgICAgdGhpcy50YWJEb21lc3RpY1RhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktNTAwJylcbiAgICAgICAgdGhpcy50YWJJbnRlcm5hdGlvbmFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1iLTInLCAnYm9yZGVyLXByaW1hcnknLCAndGV4dC1wcmltYXJ5JywgJ2ZvbnQtYm9sZCcpXG4gICAgICAgIHRoaXMudGFiSW50ZXJuYXRpb25hbFRhcmdldC5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktNTAwJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudGFiSW50ZXJuYXRpb25hbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdib3JkZXItYi0yJywgJ2JvcmRlci1wcmltYXJ5JywgJ3RleHQtcHJpbWFyeScsICdmb250LWJvbGQnKVxuICAgICAgICB0aGlzLnRhYkludGVybmF0aW9uYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTUwMCcpXG4gICAgICAgIHRoaXMudGFiRG9tZXN0aWNUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnYm9yZGVyLWItMicsICdib3JkZXItcHJpbWFyeScsICd0ZXh0LXByaW1hcnknLCAnZm9udC1ib2xkJylcbiAgICAgICAgdGhpcy50YWJEb21lc3RpY1RhcmdldC5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktNTAwJylcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gVG9nZ2xlIGxpc3QgdmlzaWJpbGl0eVxuICAgIGlmICh0aGlzLmhhc0RvbWVzdGljTGlzdFRhcmdldCAmJiB0aGlzLmhhc0ludGVybmF0aW9uYWxMaXN0VGFyZ2V0KSB7XG4gICAgICBpZiAocmVnaW9uID09PSAnZG9tZXN0aWMnKSB7XG4gICAgICAgIHRoaXMuZG9tZXN0aWNMaXN0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICAgIHRoaXMuaW50ZXJuYXRpb25hbExpc3RUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZG9tZXN0aWNMaXN0VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICAgIHRoaXMuaW50ZXJuYXRpb25hbExpc3RUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBEaXNwYXRjaCBjaXR5LWNoYW5nZWQgZXZlbnQgZm9yIG90aGVyIGNvbnRyb2xsZXJzIChsaWtlIHRvdXItZ3JvdXAtZmlsdGVyKVxuICBwcml2YXRlIGRpc3BhdGNoQ2l0eUNoYW5nZWRFdmVudChjaXR5TmFtZTogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgY2l0eUNoYW5nZWRFdmVudCA9IG5ldyBDdXN0b21FdmVudCgnY2l0eS1zZWxlY3RvcjpjaXR5LWNoYW5nZWQnLCB7XG4gICAgICBkZXRhaWw6IHsgY2l0eU5hbWUgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICB9KVxuICAgIHRoaXMuZWxlbWVudC5kaXNwYXRjaEV2ZW50KGNpdHlDaGFuZ2VkRXZlbnQpXG4gICAgY29uc29sZS5sb2coJ0NpdHkgc2VsZWN0b3I6IERpc3BhdGNoZWQgY2l0eS1jaGFuZ2VkIGV2ZW50JywgY2l0eU5hbWUpXG4gIH1cblxuICAvLyBEaXNwYXRjaCBob3RlbC1zcGVjaWZpYyBjaXR5IHVwZGF0ZSBldmVudFxuICBwcml2YXRlIGRpc3BhdGNoSG90ZWxDaXR5VXBkYXRlRXZlbnQoY2l0eU5hbWU6IHN0cmluZywgaXNJbnRlcm5hdGlvbmFsOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcbiAgICBjb25zdCBob3RlbENpdHlFdmVudCA9IG5ldyBDdXN0b21FdmVudCgnY2l0eS1zZWxlY3RvcjpjaXR5LXNlbGVjdGVkLWZvci1ob3RlbCcsIHtcbiAgICAgIGRldGFpbDogeyBcbiAgICAgICAgY2l0eU5hbWUsXG4gICAgICAgIGlzSW50ZXJuYXRpb25hbCBcbiAgICAgIH0sXG4gICAgICBidWJibGVzOiB0cnVlXG4gICAgfSlcbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGhvdGVsQ2l0eUV2ZW50KVxuICAgIGNvbnNvbGUubG9nKCdDaXR5IHNlbGVjdG9yOiBEaXNwYXRjaGVkIGhvdGVsIGNpdHkgdXBkYXRlIGV2ZW50JywgeyBjaXR5TmFtZSwgaXNJbnRlcm5hdGlvbmFsIH0pXG4gIH1cblxuICAvLyBTd2l0Y2ggY2l0aWVzXG4gIHN3aXRjaENpdGllcygpOiB2b2lkIHtcbiAgICBjb25zdCB0ZW1wID0gdGhpcy5kZXBhcnR1cmVDaXR5VmFsdWVcbiAgICB0aGlzLmRlcGFydHVyZUNpdHlWYWx1ZSA9IHRoaXMuZGVzdGluYXRpb25DaXR5VmFsdWVcbiAgICB0aGlzLmRlc3RpbmF0aW9uQ2l0eVZhbHVlID0gdGVtcFxuXG4gICAgLy8gVXBkYXRlIHZpc2libGUgdGV4dCBlbGVtZW50c1xuICAgIGlmICh0aGlzLmhhc0RlcGFydHVyZVRhcmdldCkge1xuICAgICAgdGhpcy5kZXBhcnR1cmVUYXJnZXQudGV4dENvbnRlbnQgPSB0aGlzLmRlcGFydHVyZUNpdHlWYWx1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5oYXNEZXN0aW5hdGlvblRhcmdldCkge1xuICAgICAgdGhpcy5kZXN0aW5hdGlvblRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMuZGVzdGluYXRpb25DaXR5VmFsdWVcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgaGlkZGVuIGlucHV0IHZhbHVlc1xuICAgIGlmICh0aGlzLmhhc0RlcGFydHVyZUNpdHlJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5kZXBhcnR1cmVDaXR5SW5wdXRUYXJnZXQudmFsdWUgPSB0aGlzLmRlcGFydHVyZUNpdHlWYWx1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5oYXNEZXN0aW5hdGlvbkNpdHlJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5kZXN0aW5hdGlvbkNpdHlJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuZGVzdGluYXRpb25DaXR5VmFsdWVcbiAgICB9XG5cbiAgICAvLyBEaXNwYXRjaCBhIGN1c3RvbSBldmVudCB0byBub3RpZnkgb3RoZXIgY29udHJvbGxlcnNcbiAgICB0aGlzLmVsZW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2NpdGllcy1zd2l0Y2hlZCcsIHtcbiAgICAgIGRldGFpbDoge1xuICAgICAgICBkZXBhcnR1cmU6IHRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlLFxuICAgICAgICBkZXN0aW5hdGlvbjogdGhpcy5kZXN0aW5hdGlvbkNpdHlWYWx1ZVxuICAgICAgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICB9KSlcbiAgfVxuXG4gIC8vIFNlYXJjaCBjaXRpZXNcbiAgc2VhcmNoQ2l0aWVzKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNTZWFyY2hJbnB1dFRhcmdldCkgcmV0dXJuXG4gICAgXG4gICAgY29uc3QgcXVlcnkgPSB0aGlzLnNlYXJjaElucHV0VGFyZ2V0LnZhbHVlLnRvTG93ZXJDYXNlKCkudHJpbSgpXG4gICAgY29uc3QgY2l0eUJ1dHRvbnMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtY2l0eS1uYW1lXScpXG4gICAgXG4gICAgY2l0eUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgICBjb25zdCBjaXR5TmFtZSA9IChidXR0b24gYXMgSFRNTEVsZW1lbnQpLmRhdGFzZXQuY2l0eU5hbWU/LnRvTG93ZXJDYXNlKCkgfHwgJydcbiAgICAgIGNvbnN0IGNpdHlFbGVtZW50ID0gYnV0dG9uIGFzIEhUTUxFbGVtZW50XG4gICAgICBcbiAgICAgIGlmICghcXVlcnkgfHwgY2l0eU5hbWUuaW5jbHVkZXMocXVlcnkpKSB7XG4gICAgICAgIGNpdHlFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaXR5RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyBDbGVhciBzZWFyY2hcbiAgY2xlYXJTZWFyY2goKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc1NlYXJjaElucHV0VGFyZ2V0KSByZXR1cm5cbiAgICBcbiAgICB0aGlzLnNlYXJjaElucHV0VGFyZ2V0LnZhbHVlID0gJydcbiAgICB0aGlzLnNlYXJjaENpdGllcygpXG4gIH1cblxuICAvLyBSZXF1ZXN0IGxvY2F0aW9uXG4gIHJlcXVlc3RMb2NhdGlvbigpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaGFzTG9jYXRpb25CdXR0b25UYXJnZXQgfHwgIXRoaXMuaGFzTG9jYXRpb25UZXh0VGFyZ2V0IHx8ICF0aGlzLmhhc0xvY2F0aW9uU3Bpbm5lclRhcmdldCkgcmV0dXJuXG4gICAgXG4gICAgLy8gU2hvdyBsb2FkaW5nIHN0YXRlXG4gICAgdGhpcy5sb2NhdGlvblRleHRUYXJnZXQudGV4dENvbnRlbnQgPSAnXHU1QjlBXHU0RjREXHU0RTJELi4uJ1xuICAgIHRoaXMubG9jYXRpb25TcGlubmVyVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgdGhpcy5sb2NhdGlvbkJ1dHRvblRhcmdldC5kaXNhYmxlZCA9IHRydWVcbiAgICBcbiAgICAvLyBVcGRhdGUgc3RhdHVzIHRleHRcbiAgICBpZiAodGhpcy5oYXNMb2NhdGlvblN0YXR1c1RhcmdldCkge1xuICAgICAgY29uc3Qgc3RhdHVzU3BhbiA9IHRoaXMubG9jYXRpb25TdGF0dXNUYXJnZXQucXVlcnlTZWxlY3Rvcignc3BhbicpXG4gICAgICBpZiAoc3RhdHVzU3Bhbikgc3RhdHVzU3Bhbi50ZXh0Q29udGVudCA9ICdcdTZCNjNcdTU3MjhcdTgzQjdcdTUzRDZcdTRGNERcdTdGNkVcdTRGRTFcdTYwNkYuLi4nXG4gICAgfVxuICAgIFxuICAgIC8vIERpcmVjdGx5IHVzZSBJUC1iYXNlZCBnZW9sb2NhdGlvbiAobW9zdCByZWxpYWJsZSBmb3IgQ2hpbmEpXG4gICAgdGhpcy5nZXRDaXR5RnJvbUlQKClcbiAgfVxuICBcbiAgLy8gR2V0IGNpdHkgZnJvbSBJUCBhZGRyZXNzIHVzaW5nIGlwYXBpLmNvIChmcmVlLCBubyBrZXkgbmVlZGVkKVxuICBwcml2YXRlIGdldENpdHlGcm9tSVAoKTogdm9pZCB7XG4gICAgLy8gVHJ5IGlwYXBpLmNvIGZpcnN0IChzdXBwb3J0cyBDaGluZXNlIGNpdGllcylcbiAgICBmZXRjaCgnaHR0cHM6Ly9pcGFwaS5jby9qc29uLycpXG4gICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHRocm93IG5ldyBFcnJvcignaXBhcGkuY28gZmFpbGVkJylcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKVxuICAgICAgfSlcbiAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnTG9jYXRpb24gZGF0YTonLCBkYXRhKVxuICAgICAgICBsZXQgY2l0eU5hbWUgPSAnJ1xuICAgICAgICBcbiAgICAgICAgLy8gVHJ5IHRvIGdldCBDaGluZXNlIGNpdHkgbmFtZSBvciB1c2UgRW5nbGlzaCBuYW1lXG4gICAgICAgIGlmIChkYXRhLmNpdHkpIHtcbiAgICAgICAgICBjaXR5TmFtZSA9IGRhdGEuY2l0eVxuICAgICAgICAgIC8vIE1hcCBjb21tb24gRW5nbGlzaCBjaXR5IG5hbWVzIHRvIENoaW5lc2VcbiAgICAgICAgICBjb25zdCBjaXR5TWFwOiB7W2tleTogc3RyaW5nXTogc3RyaW5nfSA9IHtcbiAgICAgICAgICAgICdCZWlqaW5nJzogJ1x1NTMxN1x1NEVBQycsXG4gICAgICAgICAgICAnU2hhbmdoYWknOiAnXHU0RTBBXHU2RDc3JyxcbiAgICAgICAgICAgICdHdWFuZ3pob3UnOiAnXHU1RTdGXHU1RERFJyxcbiAgICAgICAgICAgICdTaGVuemhlbic6ICdcdTZERjFcdTU3MzMnLFxuICAgICAgICAgICAgJ0NoZW5nZHUnOiAnXHU2MjEwXHU5MEZEJyxcbiAgICAgICAgICAgICdIYW5nemhvdSc6ICdcdTY3NkRcdTVEREUnLFxuICAgICAgICAgICAgJ1d1aGFuJzogJ1x1NkI2Nlx1NkM0OScsXG4gICAgICAgICAgICAnQ2hvbmdxaW5nJzogJ1x1OTFDRFx1NUU4NicsXG4gICAgICAgICAgICAnTmFuamluZyc6ICdcdTUzNTdcdTRFQUMnLFxuICAgICAgICAgICAgJ1hpXFwnYW4nOiAnXHU4OTdGXHU1Qjg5JyxcbiAgICAgICAgICAgICdUaWFuamluJzogJ1x1NTkyOVx1NkQyNScsXG4gICAgICAgICAgICAnU3V6aG91JzogJ1x1ODJDRlx1NURERScsXG4gICAgICAgICAgICAnQ2hhbmdzaGEnOiAnXHU5NTdGXHU2Qzk5JyxcbiAgICAgICAgICAgICdaaGVuZ3pob3UnOiAnXHU5MEQxXHU1RERFJyxcbiAgICAgICAgICAgICdIYXJiaW4nOiAnXHU1NEM4XHU1QzE0XHU2RUU4JyxcbiAgICAgICAgICAgICdRaW5nZGFvJzogJ1x1OTc1Mlx1NUM5QicsXG4gICAgICAgICAgICAnS3VubWluZyc6ICdcdTY2MDZcdTY2MEUnLFxuICAgICAgICAgICAgJ1hpYW1lbic6ICdcdTUzQTZcdTk1RTgnLFxuICAgICAgICAgICAgJ0RhbGlhbic6ICdcdTU5MjdcdThGREUnXG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGlmIChjaXR5TWFwW2RhdGEuY2l0eV0pIHtcbiAgICAgICAgICAgIGNpdHlOYW1lID0gY2l0eU1hcFtkYXRhLmNpdHldXG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFJlbW92ZSAnU2hpJyBvciAnQ2l0eScgc3VmZml4XG4gICAgICAgICAgY2l0eU5hbWUgPSBjaXR5TmFtZS5yZXBsYWNlKC9cXHMrU2hpJC8sICcnKS5yZXBsYWNlKC9cXHMrQ2l0eSQvLCAnJykucmVwbGFjZSgnXHU1RTAyJywgJycpXG4gICAgICAgICAgXG4gICAgICAgICAgdGhpcy5oYW5kbGVMb2NhdGlvblN1Y2Nlc3MoY2l0eU5hbWUpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gRmFsbGJhY2sgdG8gYWx0ZXJuYXRpdmUgc2VydmljZVxuICAgICAgICAgIHRoaXMuZ2V0Q2l0eUZyb21JUEZhbGxiYWNrKClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0lQIGxvY2F0aW9uIGVycm9yOicsIGVycm9yKVxuICAgICAgICAvLyBUcnkgZmFsbGJhY2sgc2VydmljZVxuICAgICAgICB0aGlzLmdldENpdHlGcm9tSVBGYWxsYmFjaygpXG4gICAgICB9KVxuICB9XG4gIFxuICAvLyBGYWxsYmFjazogVXNlIGlwLWFwaS5jb20gKGZyZWUsIG5vIGtleSwgYmV0dGVyIGZvciBDaGluYSlcbiAgcHJpdmF0ZSBnZXRDaXR5RnJvbUlQRmFsbGJhY2soKTogdm9pZCB7XG4gICAgZmV0Y2goJ2h0dHA6Ly9pcC1hcGkuY29tL2pzb24vP2xhbmc9emgtQ04nKVxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdGYWxsYmFjayBsb2NhdGlvbiBkYXRhOicsIGRhdGEpXG4gICAgICAgIGlmIChkYXRhLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnICYmIGRhdGEuY2l0eSkge1xuICAgICAgICAgIGNvbnN0IGNpdHlOYW1lID0gZGF0YS5jaXR5LnJlcGxhY2UoJ1x1NUUwMicsICcnKVxuICAgICAgICAgIHRoaXMuaGFuZGxlTG9jYXRpb25TdWNjZXNzKGNpdHlOYW1lKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIExhc3QgcmVzb3J0OiBkZXRlY3QgZnJvbSBicm93c2VyIGxhbmd1YWdlL3RpbWV6b25lXG4gICAgICAgICAgdGhpcy5oYW5kbGVMb2NhdGlvbkVycm9yKCdcdTY1RTBcdTZDRDVcdTgxRUFcdTUyQThcdTVCOUFcdTRGNERcdUZGMENcdThCRjdcdTYyNEJcdTUyQThcdTkwMDlcdTYyRTlcdTU3Q0VcdTVFMDInKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFsbGJhY2sgSVAgbG9jYXRpb24gZXJyb3I6JywgZXJyb3IpXG4gICAgICAgIHRoaXMuaGFuZGxlTG9jYXRpb25FcnJvcignXHU1QjlBXHU0RjREXHU2NzBEXHU1MkExXHU2NjgyXHU2NUY2XHU0RTBEXHU1M0VGXHU3NTI4XHVGRjBDXHU4QkY3XHU2MjRCXHU1MkE4XHU5MDA5XHU2MkU5XHU1N0NFXHU1RTAyJylcbiAgICAgIH0pXG4gIH1cblxuICAvLyBIYW5kbGUgbG9jYXRpb24gc3VjY2Vzc1xuICBwcml2YXRlIGhhbmRsZUxvY2F0aW9uU3VjY2VzcyhjaXR5TmFtZTogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc0xvY2F0aW9uVGV4dFRhcmdldCB8fCAhdGhpcy5oYXNMb2NhdGlvblNwaW5uZXJUYXJnZXQgfHwgXG4gICAgICAgICF0aGlzLmhhc0xvY2F0aW9uQnV0dG9uVGFyZ2V0IHx8ICF0aGlzLmhhc0xvY2F0ZWRDaXR5VGFyZ2V0IHx8IFxuICAgICAgICAhdGhpcy5oYXNMb2NhdGVkQ2l0eUJ1dHRvblRhcmdldCkgcmV0dXJuXG4gICAgXG4gICAgdGhpcy5sb2NhdGlvblRleHRUYXJnZXQudGV4dENvbnRlbnQgPSAnXHU5MUNEXHU2NUIwXHU1QjlBXHU0RjREJ1xuICAgIHRoaXMubG9jYXRpb25TcGlubmVyVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgdGhpcy5sb2NhdGlvbkJ1dHRvblRhcmdldC5kaXNhYmxlZCA9IGZhbHNlXG4gICAgXG4gICAgLy8gVXBkYXRlIHN0YXR1cyB0ZXh0XG4gICAgaWYgKHRoaXMuaGFzTG9jYXRpb25TdGF0dXNUYXJnZXQpIHtcbiAgICAgIGNvbnN0IHN0YXR1c1NwYW4gPSB0aGlzLmxvY2F0aW9uU3RhdHVzVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKVxuICAgICAgaWYgKHN0YXR1c1NwYW4pIHN0YXR1c1NwYW4udGV4dENvbnRlbnQgPSBgXHU1QjlBXHU0RjREXHU2MjEwXHU1MjlGXHVGRjFBJHtjaXR5TmFtZX1gXG4gICAgfVxuICAgIFxuICAgIC8vIFNob3cgbG9jYXRlZCBjaXR5XG4gICAgdGhpcy5sb2NhdGVkQ2l0eVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIHRoaXMubG9jYXRlZENpdHlCdXR0b25UYXJnZXQudGV4dENvbnRlbnQgPSBjaXR5TmFtZVxuICAgIHRoaXMubG9jYXRlZENpdHlCdXR0b25UYXJnZXQuZGF0YXNldC5jaXR5TmFtZSA9IGNpdHlOYW1lXG4gIH1cblxuICAvLyBIYW5kbGUgbG9jYXRpb24gZXJyb3JcbiAgcHJpdmF0ZSBoYW5kbGVMb2NhdGlvbkVycm9yKGVycm9yTWVzc2FnZT86IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNMb2NhdGlvblRleHRUYXJnZXQgfHwgIXRoaXMuaGFzTG9jYXRpb25TcGlubmVyVGFyZ2V0IHx8ICF0aGlzLmhhc0xvY2F0aW9uQnV0dG9uVGFyZ2V0KSByZXR1cm5cbiAgICBcbiAgICB0aGlzLmxvY2F0aW9uVGV4dFRhcmdldC50ZXh0Q29udGVudCA9ICdcdTkxQ0RcdThCRDVcdTVCOUFcdTRGNEQnXG4gICAgdGhpcy5sb2NhdGlvblNwaW5uZXJUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICB0aGlzLmxvY2F0aW9uQnV0dG9uVGFyZ2V0LmRpc2FibGVkID0gZmFsc2VcbiAgICBcbiAgICAvLyBVcGRhdGUgc3RhdHVzIHRleHRcbiAgICBpZiAodGhpcy5oYXNMb2NhdGlvblN0YXR1c1RhcmdldCkge1xuICAgICAgY29uc3Qgc3RhdHVzU3BhbiA9IHRoaXMubG9jYXRpb25TdGF0dXNUYXJnZXQucXVlcnlTZWxlY3Rvcignc3BhbicpXG4gICAgICBpZiAoc3RhdHVzU3Bhbikgc3RhdHVzU3Bhbi50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZSB8fCAnXHU1QjlBXHU0RjREXHU1OTMxXHU4RDI1XHVGRjBDXHU4QkY3XHU5MUNEXHU4QkQ1XHU2MjE2XHU2MjRCXHU1MkE4XHU5MDA5XHU2MkU5XHU1N0NFXHU1RTAyJ1xuICAgIH1cbiAgICBcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICh0aGlzLmhhc0xvY2F0aW9uVGV4dFRhcmdldCkge1xuICAgICAgICB0aGlzLmxvY2F0aW9uVGV4dFRhcmdldC50ZXh0Q29udGVudCA9ICdcdTVGMDBcdTU0MkZcdTVCOUFcdTRGNERcdTY3NDNcdTk2NTAnXG4gICAgICB9XG4gICAgfSwgMzAwMClcbiAgfVxuXG4gIC8vIFNhdmUgdG8gaGlzdG9yeVxuICBwcml2YXRlIHNhdmVUb0hpc3RvcnkoY2l0eU5hbWU6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IHN0b3JhZ2VLZXkgPSAnY2l0eV9oaXN0b3J5J1xuICAgIGxldCBoaXN0b3J5OiBzdHJpbmdbXSA9IFtdXG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0b3JlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHN0b3JhZ2VLZXkpXG4gICAgICBpZiAoc3RvcmVkKSB7XG4gICAgICAgIGhpc3RvcnkgPSBKU09OLnBhcnNlKHN0b3JlZClcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBjaXR5IGhpc3Rvcnk6JywgZSlcbiAgICB9XG4gICAgXG4gICAgLy8gUmVtb3ZlIGlmIGFscmVhZHkgZXhpc3RzXG4gICAgaGlzdG9yeSA9IGhpc3RvcnkuZmlsdGVyKGNpdHkgPT4gY2l0eSAhPT0gY2l0eU5hbWUpXG4gICAgXG4gICAgLy8gQWRkIHRvIGJlZ2lubmluZ1xuICAgIGhpc3RvcnkudW5zaGlmdChjaXR5TmFtZSlcbiAgICBcbiAgICAvLyBLZWVwIG9ubHkgbGFzdCA1XG4gICAgaGlzdG9yeSA9IGhpc3Rvcnkuc2xpY2UoMCwgNSlcbiAgICBcbiAgICB0cnkge1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oc3RvcmFnZUtleSwgSlNPTi5zdHJpbmdpZnkoaGlzdG9yeSkpXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNhdmUgY2l0eSBoaXN0b3J5OicsIGUpXG4gICAgfVxuICB9XG5cbiAgLy8gVXBkYXRlIG1vZGFsIHRpdGxlXG4gIHByaXZhdGUgdXBkYXRlTW9kYWxUaXRsZSgpOiB2b2lkIHtcbiAgICAvLyBNb2RhbCB0aXRsZSBjYW4gYmUgY3VzdG9taXplZCB2aWEgdmFsdWVcbiAgfVxuXG4gIC8vIEhpZGUgbXVsdGktc2VsZWN0IFVJXG4gIHByaXZhdGUgaGlkZU11bHRpU2VsZWN0VUkoKTogdm9pZCB7XG4gICAgLy8gSGlkZSBtdWx0aS1zZWxlY3QgcmVsYXRlZCBVSSBlbGVtZW50c1xuICB9XG5cbiAgLy8gVXBkYXRlIG11bHRpLXNlbGVjdCBVSVxuICBwcml2YXRlIHVwZGF0ZU11bHRpU2VsZWN0VUkoKTogdm9pZCB7XG4gICAgLy8gVXBkYXRlIG11bHRpLXNlbGVjdCBVSSBzdGF0ZVxuICB9XG5cbiAgLy8gVXBkYXRlIHNlbGVjdGVkIGNpdGllcyBkaXNwbGF5XG4gIHByaXZhdGUgdXBkYXRlU2VsZWN0ZWRDaXRpZXNEaXNwbGF5KCk6IHZvaWQge1xuICAgIC8vIFVwZGF0ZSBkaXNwbGF5IG9mIHNlbGVjdGVkIGNpdGllcyBpbiBtdWx0aS1zZWxlY3QgbW9kZVxuICB9XG5cbiAgLy8gVXBkYXRlIGNpdHkgYnV0dG9uIHN0YXRlc1xuICBwcml2YXRlIHVwZGF0ZUNpdHlCdXR0b25TdGF0ZXMoKTogdm9pZCB7XG4gICAgLy8gVXBkYXRlIHZpc3VhbCBzdGF0ZSBvZiBjaXR5IGJ1dHRvbnMgaW4gbXVsdGktc2VsZWN0IG1vZGVcbiAgfVxuXG4gIC8vIERpc3BhdGNoIHRyaXAgcGxhbm5lciBjaXR5IGNoYW5nZSBldmVudFxuICBwcml2YXRlIGRpc3BhdGNoVHJpcENpdHlDaGFuZ2VFdmVudCh0eXBlOiAnZGVwYXJ0dXJlJyB8ICdkZXN0aW5hdGlvbicsIGNpdHlOYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgndHJpcC1wbGFubmVyOmNpdHktY2hhbmdlZCcsIHtcbiAgICAgIGRldGFpbDogeyB0eXBlLCBjaXR5OiBjaXR5TmFtZSB9LFxuICAgICAgYnViYmxlczogdHJ1ZVxuICAgIH0pXG4gICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudClcbiAgfVxuXG4gIC8vIFN0b3AgZXZlbnQgcHJvcGFnYXRpb25cbiAgc3RvcFByb3BhZ2F0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gIH1cblxuICBzd2l0Y2hUb1NpbmdsZVNlbGVjdCgpOiB2b2lkIHtcbiAgICB0aGlzLmlzTXVsdGlTZWxlY3RNb2RlID0gZmFsc2VcbiAgICB0aGlzLnNlbGVjdGVkQ2l0aWVzID0gW11cbiAgICB0aGlzLnVwZGF0ZU11bHRpU2VsZWN0VUkoKVxuICB9XG5cbiAgc3dpdGNoVG9NdWx0aVNlbGVjdCgpOiB2b2lkIHtcbiAgICB0aGlzLmlzTXVsdGlTZWxlY3RNb2RlID0gdHJ1ZVxuICAgIHRoaXMudXBkYXRlTXVsdGlTZWxlY3RVSSgpXG4gIH1cblxuICBjb25maXJtTXVsdGlTZWxlY3QoKTogdm9pZCB7XG4gICAgLy8gQ29uZmlybSBtdWx0aS1zZWxlY3QgYW5kIGNsb3NlIG1vZGFsXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRDaXRpZXMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gVHJpZ2dlciBldmVudCB3aXRoIHNlbGVjdGVkIGNpdGllc1xuICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2NpdHktc2VsZWN0b3I6bXVsdGktY2l0aWVzLXNlbGVjdGVkJywge1xuICAgICAgICBkZXRhaWw6IHsgY2l0aWVzOiB0aGlzLnNlbGVjdGVkQ2l0aWVzIH0sXG4gICAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICAgIH0pXG4gICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KVxuICAgIH1cbiAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICB9XG5cbiAgc2hvd0RvbWVzdGljKCk6IHZvaWQge1xuICAgIC8vIFx1NTIwN1x1NjM2Mlx1NjMwOVx1OTRBRVx1NjU4N1x1NUI1N1x1OTg5Q1x1ODI3MlxuICAgIGlmICh0aGlzLmhhc1RhYkRvbWVzdGljVGFyZ2V0ICYmIHRoaXMuaGFzVGFiSW50ZXJuYXRpb25hbFRhcmdldCkge1xuICAgICAgdGhpcy50YWJEb21lc3RpY1RhcmdldC5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktOTAwJylcbiAgICAgIHRoaXMudGFiRG9tZXN0aWNUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTUwMCcpXG4gICAgICB0aGlzLnRhYkludGVybmF0aW9uYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTUwMCcpXG4gICAgICB0aGlzLnRhYkludGVybmF0aW9uYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTkwMCcpXG4gICAgICBcbiAgICAgIC8vIFx1NTIwN1x1NjM2Mlx1NUU5NVx1OTBFOFx1N0VCRlx1Njc2MVx1NjYzRVx1NzkzQVxuICAgICAgY29uc3QgZG9tZXN0aWNMaW5lID0gdGhpcy50YWJEb21lc3RpY1RhcmdldC5xdWVyeVNlbGVjdG9yKCdkaXYnKVxuICAgICAgY29uc3QgaW50ZXJuYXRpb25hbExpbmUgPSB0aGlzLnRhYkludGVybmF0aW9uYWxUYXJnZXQucXVlcnlTZWxlY3RvcignZGl2JylcbiAgICAgIGlmIChkb21lc3RpY0xpbmUpIGRvbWVzdGljTGluZS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgaWYgKGludGVybmF0aW9uYWxMaW5lKSBpbnRlcm5hdGlvbmFsTGluZS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIH1cbiAgICBcbiAgICAvLyBcdTUyMDdcdTYzNjJcdTUxODVcdTVCQjlcdTUzM0FcdTY2M0VcdTc5M0FcbiAgICBpZiAodGhpcy5oYXNEb21lc3RpY0xpc3RUYXJnZXQpIHtcbiAgICAgIHRoaXMuZG9tZXN0aWNMaXN0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgfVxuICAgIGlmICh0aGlzLmhhc0ludGVybmF0aW9uYWxMaXN0VGFyZ2V0KSB7XG4gICAgICB0aGlzLmludGVybmF0aW9uYWxMaXN0VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgfVxuICAgIHRoaXMuY3VycmVudFJlZ2lvblR5cGUgPSAnZG9tZXN0aWMnXG4gIH1cblxuICBzaG93SW50ZXJuYXRpb25hbCgpOiB2b2lkIHtcbiAgICAvLyBcdTUyMDdcdTYzNjJcdTYzMDlcdTk0QUVcdTY1ODdcdTVCNTdcdTk4OUNcdTgyNzJcbiAgICBpZiAodGhpcy5oYXNUYWJJbnRlcm5hdGlvbmFsVGFyZ2V0ICYmIHRoaXMuaGFzVGFiRG9tZXN0aWNUYXJnZXQpIHtcbiAgICAgIHRoaXMudGFiSW50ZXJuYXRpb25hbFRhcmdldC5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktOTAwJylcbiAgICAgIHRoaXMudGFiSW50ZXJuYXRpb25hbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktNTAwJylcbiAgICAgIHRoaXMudGFiRG9tZXN0aWNUYXJnZXQuY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTUwMCcpXG4gICAgICB0aGlzLnRhYkRvbWVzdGljVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS05MDAnKVxuICAgICAgXG4gICAgICAvLyBcdTUyMDdcdTYzNjJcdTVFOTVcdTkwRThcdTdFQkZcdTY3NjFcdTY2M0VcdTc5M0FcbiAgICAgIGNvbnN0IGludGVybmF0aW9uYWxMaW5lID0gdGhpcy50YWJJbnRlcm5hdGlvbmFsVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ2RpdicpXG4gICAgICBjb25zdCBkb21lc3RpY0xpbmUgPSB0aGlzLnRhYkRvbWVzdGljVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ2RpdicpXG4gICAgICBpZiAoaW50ZXJuYXRpb25hbExpbmUpIGludGVybmF0aW9uYWxMaW5lLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICBpZiAoZG9tZXN0aWNMaW5lKSBkb21lc3RpY0xpbmUuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICB9XG4gICAgXG4gICAgLy8gXHU1MjA3XHU2MzYyXHU1MTg1XHU1QkI5XHU1MzNBXHU2NjNFXHU3OTNBXG4gICAgaWYgKHRoaXMuaGFzSW50ZXJuYXRpb25hbExpc3RUYXJnZXQpIHtcbiAgICAgIHRoaXMuaW50ZXJuYXRpb25hbExpc3RUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICB9XG4gICAgaWYgKHRoaXMuaGFzRG9tZXN0aWNMaXN0VGFyZ2V0KSB7XG4gICAgICB0aGlzLmRvbWVzdGljTGlzdFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIH1cbiAgICB0aGlzLmN1cnJlbnRSZWdpb25UeXBlID0gJ2ludGVybmF0aW9uYWwnXG4gIH1cblxuICBqdW1wVG9MZXR0ZXIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGxldHRlciA9IGJ1dHRvbi5kYXRhc2V0LmxldHRlclxuICAgIGlmIChsZXR0ZXIpIHtcbiAgICAgIGNvbnN0IHRhcmdldEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtbGV0dGVyLXNlY3Rpb249XCIke2xldHRlcn1cIl1gKVxuICAgICAgaWYgKHRhcmdldEVsZW1lbnQpIHtcbiAgICAgICAgdGFyZ2V0RWxlbWVudC5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzY3JvbGxUb1JlZ2lvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgcmVnaW9uID0gYnV0dG9uLmRhdGFzZXQucmVnaW9uXG4gICAgaWYgKHJlZ2lvbikge1xuICAgICAgY29uc3QgdGFyZ2V0RWxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1yZWdpb24tc2VjdGlvbj1cIiR7cmVnaW9ufVwiXWApXG4gICAgICBpZiAodGFyZ2V0RWxlbWVudCkge1xuICAgICAgICB0YXJnZXRFbGVtZW50LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGV4cGFuZEhvdENpdGllcygpOiB2b2lkIHtcbiAgICBjb25zdCBob3RDaXRpZXNTZWN0aW9uID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWhvdC1jaXRpZXNdJylcbiAgICBpZiAoaG90Q2l0aWVzU2VjdGlvbikge1xuICAgICAgaG90Q2l0aWVzU2VjdGlvbi5jbGFzc0xpc3QudG9nZ2xlKCdleHBhbmRlZCcpXG4gICAgfVxuICB9XG5cbiAgc2VhcmNoKCk6IHZvaWQge1xuICAgIHRoaXMuc2VhcmNoQ2l0aWVzKClcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wiZGVwYXJ0dXJlSW5wdXRcIiwgXCJkZXN0aW5hdGlvbklucHV0XCJdXG4gIFxuICBkZWNsYXJlIHJlYWRvbmx5IGRlcGFydHVyZUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVzdGluYXRpb25JbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0RlcGFydHVyZUlucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzRGVzdGluYXRpb25JbnB1dFRhcmdldDogYm9vbGVhblxuXG4gIC8vIFZhbGlkYXRlIGZvcm0gYmVmb3JlIHN1Ym1pc3Npb25cbiAgdmFsaWRhdGVGb3JtKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNEZXBhcnR1cmVJbnB1dFRhcmdldCB8fCAhdGhpcy5oYXNEZXN0aW5hdGlvbklucHV0VGFyZ2V0KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBkZXBhcnR1cmVDaXR5ID0gdGhpcy5kZXBhcnR1cmVJbnB1dFRhcmdldC52YWx1ZS50cmltKClcbiAgICBjb25zdCBkZXN0aW5hdGlvbkNpdHkgPSB0aGlzLmRlc3RpbmF0aW9uSW5wdXRUYXJnZXQudmFsdWUudHJpbSgpXG5cbiAgICAvLyBDaGVjayBpZiBkZXBhcnR1cmUgYW5kIGRlc3RpbmF0aW9uIGFyZSB0aGUgc2FtZVxuICAgIGlmIChkZXBhcnR1cmVDaXR5ICYmIGRlc3RpbmF0aW9uQ2l0eSAmJiBkZXBhcnR1cmVDaXR5ID09PSBkZXN0aW5hdGlvbkNpdHkpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgIGFsZXJ0KCdcdTUxRkFcdTUzRDFcdTU3MzBcdTRFMEVcdTc2RUVcdTc2ODRcdTU3MzBcdTRFMERcdTgwRkRcdTc2RjhcdTU0MEMnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5pbnRlcmZhY2UgU2VhcmNoSGlzdG9yeSB7XG4gIGRlcGFydHVyZV9jaXR5OiBzdHJpbmdcbiAgZGVzdGluYXRpb25fY2l0eTogc3RyaW5nXG4gIGRhdGU6IHN0cmluZ1xuICByZXR1cm5fZGF0ZT86IHN0cmluZ1xuICB0cmlwX3R5cGU6IHN0cmluZ1xuICBjYWJpbl9jbGFzcz86IHN0cmluZ1xuICB0aW1lc3RhbXA6IG51bWJlclxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXIge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcImNvbnRhaW5lclwiLCBcImxpc3RcIl1cblxuICBkZWNsYXJlIHJlYWRvbmx5IGNvbnRhaW5lclRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBsaXN0VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0NvbnRhaW5lclRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0xpc3RUYXJnZXQ6IGJvb2xlYW5cblxuICBwcml2YXRlIG1heEhpc3RvcnlJdGVtczogbnVtYmVyID0gNVxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgLy8gQ2hlY2sgaWYgdGFyZ2V0cyBleGlzdCBiZWZvcmUgcmVuZGVyaW5nXG4gICAgaWYgKHRoaXMuaGFzQ29udGFpbmVyVGFyZ2V0ICYmIHRoaXMuaGFzTGlzdFRhcmdldCkge1xuICAgICAgdGhpcy5yZW5kZXJIaXN0b3J5KClcbiAgICB9XG4gIH1cblxuICAvLyBTYXZlIGN1cnJlbnQgc2VhcmNoIHRvIGhpc3Rvcnkgd2hlbiBmb3JtIGlzIHN1Ym1pdHRlZFxuICBzYXZlU2VhcmNoKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGZvcm0gPSBldmVudC50YXJnZXQgYXMgSFRNTEZvcm1FbGVtZW50XG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoZm9ybSlcbiAgICBcbiAgICBjb25zdCBzZWFyY2hEYXRhOiBTZWFyY2hIaXN0b3J5ID0ge1xuICAgICAgZGVwYXJ0dXJlX2NpdHk6IGZvcm1EYXRhLmdldCgnZGVwYXJ0dXJlX2NpdHknKSBhcyBzdHJpbmcsXG4gICAgICBkZXN0aW5hdGlvbl9jaXR5OiBmb3JtRGF0YS5nZXQoJ2Rlc3RpbmF0aW9uX2NpdHknKSBhcyBzdHJpbmcsXG4gICAgICBkYXRlOiBmb3JtRGF0YS5nZXQoJ2RhdGUnKSBhcyBzdHJpbmcsXG4gICAgICByZXR1cm5fZGF0ZTogZm9ybURhdGEuZ2V0KCdyZXR1cm5fZGF0ZScpIGFzIHN0cmluZyB8fCB1bmRlZmluZWQsXG4gICAgICB0cmlwX3R5cGU6IGZvcm1EYXRhLmdldCgndHJpcF90eXBlJykgYXMgc3RyaW5nLFxuICAgICAgY2FiaW5fY2xhc3M6IGZvcm1EYXRhLmdldCgnY2FiaW5fY2xhc3MnKSBhcyBzdHJpbmcgfHwgdW5kZWZpbmVkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfVxuICAgIFxuICAgIHRoaXMuYWRkVG9IaXN0b3J5KHNlYXJjaERhdGEpXG4gIH1cblxuICBwcml2YXRlIGFkZFRvSGlzdG9yeShzZWFyY2hEYXRhOiBTZWFyY2hIaXN0b3J5KTogdm9pZCB7XG4gICAgbGV0IGhpc3RvcnkgPSB0aGlzLmdldEhpc3RvcnkoKVxuICAgIFxuICAgIC8vIFJlbW92ZSBkdXBsaWNhdGUgaWYgZXhpc3RzIChzYW1lIGRlcGFydHVyZSwgZGVzdGluYXRpb24sIGFuZCBkYXRlKVxuICAgIGhpc3RvcnkgPSBoaXN0b3J5LmZpbHRlcihpdGVtID0+IFxuICAgICAgIShpdGVtLmRlcGFydHVyZV9jaXR5ID09PSBzZWFyY2hEYXRhLmRlcGFydHVyZV9jaXR5ICYmIFxuICAgICAgICBpdGVtLmRlc3RpbmF0aW9uX2NpdHkgPT09IHNlYXJjaERhdGEuZGVzdGluYXRpb25fY2l0eSAmJlxuICAgICAgICBpdGVtLmRhdGUgPT09IHNlYXJjaERhdGEuZGF0ZSlcbiAgICApXG4gICAgXG4gICAgLy8gQWRkIG5ldyBzZWFyY2ggYXQgdGhlIGJlZ2lubmluZ1xuICAgIGhpc3RvcnkudW5zaGlmdChzZWFyY2hEYXRhKVxuICAgIFxuICAgIC8vIEtlZXAgb25seSB0aGUgbW9zdCByZWNlbnQgaXRlbXNcbiAgICBoaXN0b3J5ID0gaGlzdG9yeS5zbGljZSgwLCB0aGlzLm1heEhpc3RvcnlJdGVtcylcbiAgICBcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZmxpZ2h0X3NlYXJjaF9oaXN0b3J5JywgSlNPTi5zdHJpbmdpZnkoaGlzdG9yeSkpXG4gIH1cblxuICBwcml2YXRlIGdldEhpc3RvcnkoKTogU2VhcmNoSGlzdG9yeVtdIHtcbiAgICBjb25zdCBoaXN0b3J5U3RyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2ZsaWdodF9zZWFyY2hfaGlzdG9yeScpXG4gICAgaWYgKCFoaXN0b3J5U3RyKSByZXR1cm4gW11cbiAgICBcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UoaGlzdG9yeVN0cilcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVySGlzdG9yeSgpOiB2b2lkIHtcbiAgICAvLyBDaGVjayBpZiB0YXJnZXRzIGV4aXN0XG4gICAgaWYgKCF0aGlzLmhhc0NvbnRhaW5lclRhcmdldCB8fCAhdGhpcy5oYXNMaXN0VGFyZ2V0KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBoaXN0b3J5ID0gdGhpcy5nZXRIaXN0b3J5KClcbiAgICBcbiAgICBpZiAoaGlzdG9yeS5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuY29udGFpbmVyVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgdGhpcy5jb250YWluZXJUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICBcbiAgICBjb25zdCBoaXN0b3J5SFRNTCA9IGhpc3RvcnkubWFwKGl0ZW0gPT4ge1xuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGl0ZW0uZGF0ZSlcbiAgICAgIGNvbnN0IGRhdGVTdHIgPSBgJHtkYXRlLmdldE1vbnRoKCkgKyAxfS8ke2RhdGUuZ2V0RGF0ZSgpfWBcbiAgICAgIGNvbnN0IHRyaXBUeXBlVGV4dCA9IGl0ZW0udHJpcF90eXBlID09PSAncm91bmRfdHJpcCcgPyAnXHU1RjgwXHU4RkQ0JyA6ICdcdTUzNTVcdTdBMEInXG4gICAgICBcbiAgICAgIC8vIEJ1aWxkIFVSTCB3aXRoIHBhcmFtZXRlcnNcbiAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICBkZXBhcnR1cmVfY2l0eTogaXRlbS5kZXBhcnR1cmVfY2l0eSxcbiAgICAgICAgZGVzdGluYXRpb25fY2l0eTogaXRlbS5kZXN0aW5hdGlvbl9jaXR5LFxuICAgICAgICBkYXRlOiBpdGVtLmRhdGUsXG4gICAgICAgIHRyaXBfdHlwZTogaXRlbS50cmlwX3R5cGVcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmIChpdGVtLnJldHVybl9kYXRlKSB7XG4gICAgICAgIHBhcmFtcy5hcHBlbmQoJ3JldHVybl9kYXRlJywgaXRlbS5yZXR1cm5fZGF0ZSlcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGl0ZW0uY2FiaW5fY2xhc3MpIHtcbiAgICAgICAgcGFyYW1zLmFwcGVuZCgnY2FiaW5fY2xhc3MnLCBpdGVtLmNhYmluX2NsYXNzKVxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCB1cmwgPSBgL2ZsaWdodHMvc2VhcmNoPyR7cGFyYW1zLnRvU3RyaW5nKCl9YFxuICAgICAgXG4gICAgICByZXR1cm4gYFxuICAgICAgICA8YSBocmVmPVwiJHt1cmx9XCIgXG4gICAgICAgICAgIGNsYXNzPVwiaW5saW5lLWJsb2NrIHdoaXRlc3BhY2Utbm93cmFwIHB4LTMgcHktMS41IHJvdW5kZWQtZnVsbCBiZy1ncmF5LTEwMCB0ZXh0LXNtIHRleHQtZ3JheS02MDAgaG92ZXI6YmctYmx1ZS01MCBob3Zlcjp0ZXh0LWJsdWUtNjAwIHRyYW5zaXRpb24tY29sb3JzXCI+XG4gICAgICAgICAgJHtpdGVtLmRlcGFydHVyZV9jaXR5fSBcdTIxOTIgJHtpdGVtLmRlc3RpbmF0aW9uX2NpdHl9ICAke2RhdGVTdHJ9ICAke3RyaXBUeXBlVGV4dH1cbiAgICAgICAgPC9hPlxuICAgICAgYFxuICAgIH0pLmpvaW4oJycpXG4gICAgXG4gICAgdGhpcy5saXN0VGFyZ2V0LmlubmVySFRNTCA9IGhpc3RvcnlIVE1MXG4gIH1cblxuICBjbGVhckhpc3RvcnkoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgXG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2ZsaWdodF9zZWFyY2hfaGlzdG9yeScpXG4gICAgXG4gICAgaWYgKHRoaXMuaGFzQ29udGFpbmVyVGFyZ2V0ICYmIHRoaXMuaGFzTGlzdFRhcmdldCkge1xuICAgICAgdGhpcy5jb250YWluZXJUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgIHRoaXMubGlzdFRhcmdldC5pbm5lckhUTUwgPSAnJ1xuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwibW9kYWxcIixcbiAgICBcInNlbGVjdGVkRGF0ZVwiLFxuICAgIFwiZGF0ZUlucHV0XCIsXG4gICAgXCJkYXRlQnV0dG9uXCIsXG4gICAgXCJleGFjdFRhYlwiLFxuICAgIFwiZnV6enlUYWJcIixcbiAgICBcImV4YWN0RGF0ZUNvbnRlbnRcIixcbiAgICBcImZ1enp5RGF0ZUNvbnRlbnRcIixcbiAgICBcIm1vbnRoQnV0dG9uXCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgY3VycmVudERhdGU6IFN0cmluZ1xuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNNb2RhbFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IHNlbGVjdGVkRGF0ZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkYXRlSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkYXRlQnV0dG9uVGFyZ2V0czogSFRNTEJ1dHRvbkVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1NlbGVjdGVkRGF0ZVRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0RhdGVJbnB1dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGV4YWN0VGFiVGFyZ2V0OiBIVE1MQnV0dG9uRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGZ1enp5VGFiVGFyZ2V0OiBIVE1MQnV0dG9uRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGV4YWN0RGF0ZUNvbnRlbnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZnV6enlEYXRlQ29udGVudFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBtb250aEJ1dHRvblRhcmdldHM6IEhUTUxCdXR0b25FbGVtZW50W11cbiAgZGVjbGFyZSBjdXJyZW50RGF0ZVZhbHVlOiBzdHJpbmdcblxuICBwcml2YXRlIHNlbGVjdGVkRGF0ZU9iajogRGF0ZSA9IG5ldyBEYXRlKClcbiAgcHJpdmF0ZSBjdXJyZW50TXVsdGlDaXR5U2VnbWVudElkOiBzdHJpbmcgfCBudWxsID0gbnVsbFxuICBwcml2YXRlIHNlbGVjdGVkTW9udGhzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKVxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJEYXRlUGlja2VyIGNvbm5lY3RlZFwiKVxuICAgIC8vIFNlbmQgY2xpZW50J3MgbG9jYWwgZGF0ZSB0byBzZXJ2ZXIgZm9yIHRpbWV6b25lLWF3YXJlIGZpbHRlcmluZ1xuICAgIGNvbnN0IGNsaWVudFRvZGF5ID0gdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKCkpXG4gICAgXG4gICAgLy8gSW5pdGlhbGl6ZSB3aXRoIHRvZGF5J3MgZGF0ZSB1c2luZyBjbGllbnQgdGltZXpvbmVcbiAgICB0aGlzLnNlbGVjdGVkRGF0ZU9iaiA9IG5ldyBEYXRlKClcbiAgICB0aGlzLmN1cnJlbnREYXRlVmFsdWUgPSB0aGlzLmZvcm1hdERhdGUodGhpcy5zZWxlY3RlZERhdGVPYmopXG4gICAgXG4gICAgLy8gVXBkYXRlIGRpc3BsYXllZCBkYXRlIGltbWVkaWF0ZWx5IHdpdGggY2xpZW50IHRpbWV6b25lXG4gICAgaWYgKHRoaXMuaGFzU2VsZWN0ZWREYXRlVGFyZ2V0KSB7XG4gICAgICB0aGlzLnVwZGF0ZURpc3BsYXllZERhdGUoKVxuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgaGlkZGVuIGlucHV0IHdpdGggY2xpZW50IHRpbWV6b25lIGRhdGVcbiAgICBpZiAodGhpcy5oYXNEYXRlSW5wdXRUYXJnZXQpIHtcbiAgICAgIHRoaXMuZGF0ZUlucHV0VGFyZ2V0LnZhbHVlID0gdGhpcy5jdXJyZW50RGF0ZVZhbHVlXG4gICAgfVxuICAgIFxuICAgIC8vIE9ubHkgYWNjZXNzIG1vZGFsIGlmIGl0IGV4aXN0cyBpbiB0aGlzIGNvbnRyb2xsZXIncyBzY29wZVxuICAgIGlmICghdGhpcy5oYXNNb2RhbFRhcmdldCkge1xuICAgICAgY29uc29sZS5sb2coXCJEYXRlUGlja2VyOiBObyBtb2RhbCB0YXJnZXQgZm91bmQsIHNraXBwaW5nIG1vZGFsIHNldHVwXCIpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgY29uc3QgbW9kYWxFbGVtZW50ID0gdGhpcy5tb2RhbFRhcmdldFxuICAgIFxuICAgIC8vIFN0b3JlIGNsaWVudCdzIHRvZGF5IGRhdGUgYXMgZGF0YSBhdHRyaWJ1dGUgZm9yIHNlcnZlciB0byB1c2VcbiAgICBpZiAobW9kYWxFbGVtZW50KSB7XG4gICAgICBtb2RhbEVsZW1lbnQuZGF0YXNldC5jbGllbnRUb2RheSA9IGNsaWVudFRvZGF5XG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSBwYXN0IGRhdGUgYnV0dG9ucyBiYXNlZCBvbiBjbGllbnQgdGltZXpvbmVcbiAgICB0aGlzLnVwZGF0ZVBhc3REYXRlcygpXG4gICAgXG4gICAgLy8gTGlzdGVuIGZvciBtdWx0aS1jaXR5IGV2ZW50c1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtdWx0aS1jaXR5Om9wZW4tZGF0ZS1waWNrZXInLCB0aGlzLmhhbmRsZU11bHRpQ2l0eU9wZW4uYmluZCh0aGlzKSBhcyB1bmtub3duIGFzIEV2ZW50TGlzdGVuZXIpXG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgIHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtdWx0aS1jaXR5Om9wZW4tZGF0ZS1waWNrZXInLCB0aGlzLmhhbmRsZU11bHRpQ2l0eU9wZW4uYmluZCh0aGlzKSBhcyB1bmtub3duIGFzIEV2ZW50TGlzdGVuZXIpXG4gIH1cblxuICAvLyBIYW5kbGUgbXVsdGktY2l0eSBkYXRlIHBpY2tlciByZXF1ZXN0XG4gIHByaXZhdGUgaGFuZGxlTXVsdGlDaXR5T3BlbihldmVudDogQ3VzdG9tRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB7IHNlZ21lbnRJZCB9ID0gZXZlbnQuZGV0YWlsXG4gICAgY29uc29sZS5sb2coJ0RhdGUgcGlja2VyOiBSZWNlaXZlZCBtdWx0aS1jaXR5IG9wZW4gcmVxdWVzdCcsIHsgc2VnbWVudElkIH0pXG4gICAgdGhpcy5jdXJyZW50TXVsdGlDaXR5U2VnbWVudElkID0gc2VnbWVudElkXG4gICAgdGhpcy5vcGVuTW9kYWwoKVxuICB9XG5cbiAgLy8gT3BlbiBjaGVjay1pbiBkYXRlIHBpY2tlclxuICBvcGVuQ2hlY2tJbigpOiB2b2lkIHtcbiAgICBjb25zdCBjaGVja0luRGF0ZSA9IHByb21wdChcIlx1OEJGN1x1OEY5M1x1NTE2NVx1NTE2NVx1NEY0Rlx1NjVFNVx1NjcxRiAoWVlZWS1NTS1ERClcIiwgdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKCkpKVxuICAgIGlmIChjaGVja0luRGF0ZSkge1xuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZilcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdjaGVja19pbicsIGNoZWNrSW5EYXRlKVxuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmwudG9TdHJpbmcoKVxuICAgIH1cbiAgfVxuXG4gIC8vIE9wZW4gY2hlY2stb3V0IGRhdGUgcGlja2VyXG4gIG9wZW5DaGVja091dCgpOiB2b2lkIHtcbiAgICBjb25zdCB0b21vcnJvdyA9IG5ldyBEYXRlKClcbiAgICB0b21vcnJvdy5zZXREYXRlKHRvbW9ycm93LmdldERhdGUoKSArIDEpXG4gICAgY29uc3QgY2hlY2tPdXREYXRlID0gcHJvbXB0KFwiXHU4QkY3XHU4RjkzXHU1MTY1XHU3OUJCXHU1RTk3XHU2NUU1XHU2NzFGIChZWVlZLU1NLUREKVwiLCB0aGlzLmZvcm1hdERhdGUodG9tb3Jyb3cpKVxuICAgIGlmIChjaGVja091dERhdGUpIHtcbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpXG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnY2hlY2tfb3V0JywgY2hlY2tPdXREYXRlKVxuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmwudG9TdHJpbmcoKVxuICAgIH1cbiAgfVxuXG4gIC8vIE9wZW4gZGF0ZSBwaWNrZXIgbW9kYWxcbiAgb3Blbk1vZGFsKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNNb2RhbFRhcmdldCkgcmV0dXJuXG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJ1xuICB9XG5cbiAgLy8gQ2xvc2UgZGF0ZSBwaWNrZXIgbW9kYWxcbiAgY2xvc2VNb2RhbCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaGFzTW9kYWxUYXJnZXQpIHJldHVyblxuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJydcbiAgfVxuXG4gIC8vIFNlbGVjdCBhIGRhdGVcbiAgc2VsZWN0RGF0ZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgZGF0ZVN0ciA9IGJ1dHRvbi5kYXRhc2V0LmRhdGUgfHwgJydcbiAgICBcbiAgICBpZiAoIWRhdGVTdHIpIHJldHVyblxuXG4gICAgLy8gUHJldmVudCBzZWxlY3RpbmcgZGF0ZXMgYmVmb3JlIHRvZGF5ICh1c2luZyBjbGllbnQgdGltZXpvbmUpXG4gICAgY29uc3Qgc2VsZWN0ZWREYXRlID0gbmV3IERhdGUoYCR7ZGF0ZVN0cn1UMDA6MDA6MDBgKVxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxuICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgc2VsZWN0ZWREYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgXG4gICAgaWYgKHNlbGVjdGVkRGF0ZSA8IHRvZGF5KSB7XG4gICAgICBjb25zb2xlLmxvZygnQ2Fubm90IHNlbGVjdCBwYXN0IGRhdGVzIChjbGllbnQgdGltZXpvbmUgY2hlY2spJylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMuc2VsZWN0ZWREYXRlT2JqID0gc2VsZWN0ZWREYXRlXG4gICAgdGhpcy5jdXJyZW50RGF0ZVZhbHVlID0gZGF0ZVN0clxuICAgIFxuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgZm9yIG11bHRpLWNpdHlcbiAgICBpZiAodGhpcy5jdXJyZW50TXVsdGlDaXR5U2VnbWVudElkKSB7XG4gICAgICBjb25zb2xlLmxvZygnRGF0ZSBwaWNrZXI6IE11bHRpLWNpdHkgbW9kZSwgZGlzcGF0Y2hpbmcgZXZlbnQnLCB7XG4gICAgICAgIHNlZ21lbnRJZDogdGhpcy5jdXJyZW50TXVsdGlDaXR5U2VnbWVudElkLFxuICAgICAgICBkYXRlOiBkYXRlU3RyXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBUcmlnZ2VyIGV2ZW50IHRvIHVwZGF0ZSBtdWx0aS1jaXR5IHNlZ21lbnRcbiAgICAgIGNvbnN0IHVwZGF0ZUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdkYXRlLXBpY2tlcjpkYXRlLXNlbGVjdGVkJywge1xuICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICBzZWdtZW50SWQ6IHRoaXMuY3VycmVudE11bHRpQ2l0eVNlZ21lbnRJZCxcbiAgICAgICAgICBkYXRlOiBkYXRlU3RyXG4gICAgICAgIH0sXG4gICAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICAgIH0pXG4gICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KHVwZGF0ZUV2ZW50KVxuICAgICAgXG4gICAgICAvLyBSZXNldCBtdWx0aS1jaXR5IHN0YXRlXG4gICAgICB0aGlzLmN1cnJlbnRNdWx0aUNpdHlTZWdtZW50SWQgPSBudWxsXG4gICAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICAgIH0gZWxzZSBpZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLmluY2x1ZGVzKCcvZmxpZ2h0cy9zZWFyY2gnKSkge1xuICAgICAgLy8gU2VhcmNoIHBhZ2UgbW9kZSAtIHJlbG9hZCB3aXRoIG5ldyBkYXRlXG4gICAgICBjb25zb2xlLmxvZygnRGF0ZSBwaWNrZXI6IFNlYXJjaCBwYWdlIG1vZGUsIHJlbG9hZGluZyB3aXRoIG5ldyBkYXRlJylcbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpXG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnZGF0ZScsIGRhdGVTdHIpXG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybC50b1N0cmluZygpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCdEYXRlIHBpY2tlcjogUmVndWxhciBtb2RlJylcbiAgICAgIC8vIFJlZ3VsYXIgc2luZ2xlL3JvdW5kIHRyaXAgc2VsZWN0aW9uXG4gICAgICBpZiAodGhpcy5oYXNTZWxlY3RlZERhdGVUYXJnZXQpIHtcbiAgICAgICAgdGhpcy51cGRhdGVEaXNwbGF5ZWREYXRlKClcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhhc0RhdGVJbnB1dFRhcmdldCkge1xuICAgICAgICB0aGlzLmRhdGVJbnB1dFRhcmdldC52YWx1ZSA9IGRhdGVTdHJcbiAgICAgIH1cbiAgICAgIHRoaXMuY2xvc2VNb2RhbCgpXG4gICAgfVxuICB9XG5cbiAgLy8gVXBkYXRlIHRoZSBkaXNwbGF5ZWQgZGF0ZSBpbiB0aGUgbWFpbiB2aWV3XG4gIHByaXZhdGUgdXBkYXRlRGlzcGxheWVkRGF0ZSgpOiB2b2lkIHtcbiAgICBjb25zdCBtb250aCA9IHRoaXMuc2VsZWN0ZWREYXRlT2JqLmdldE1vbnRoKCkgKyAxXG4gICAgY29uc3QgZGF5ID0gdGhpcy5zZWxlY3RlZERhdGVPYmouZ2V0RGF0ZSgpXG4gICAgY29uc3QgZGF5TmFtZSA9IHRoaXMuZ2V0RGF5TmFtZSh0aGlzLnNlbGVjdGVkRGF0ZU9iailcbiAgICBcbiAgICB0aGlzLnNlbGVjdGVkRGF0ZVRhcmdldC5pbm5lckhUTUwgPSBgXG4gICAgICAke21vbnRofTxzcGFuIGNsYXNzPVwidGV4dC1sZyBmb250LW1lZGl1bSBteC0wLjVcIj5cdTY3MDg8L3NwYW4+JHtkYXl9PHNwYW4gY2xhc3M9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIG1sLTAuNSBtci0yXCI+XHU2NUU1PC9zcGFuPlxuICAgICAgPHNwYW4gY2xhc3M9XCJ0ZXh0LWJhc2UgdGV4dC1ncmF5LTUwMCBmb250LW1lZGl1bVwiPiR7ZGF5TmFtZX08L3NwYW4+XG4gICAgYFxuICB9XG5cbiAgLy8gR2V0IGRheSBuYW1lIGluIENoaW5lc2VcbiAgcHJpdmF0ZSBnZXREYXlOYW1lKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxuICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgY29uc3QgdGFyZ2V0RGF0ZSA9IG5ldyBEYXRlKGRhdGUpXG4gICAgdGFyZ2V0RGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICAgIFxuICAgIGNvbnN0IGRpZmZUaW1lID0gdGFyZ2V0RGF0ZS5nZXRUaW1lKCkgLSB0b2RheS5nZXRUaW1lKClcbiAgICBjb25zdCBkaWZmRGF5cyA9IE1hdGgucm91bmQoZGlmZlRpbWUgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpXG4gICAgXG4gICAgaWYgKGRpZmZEYXlzID09PSAwKSByZXR1cm4gJ1x1NEVDQVx1NTkyOSdcbiAgICBpZiAoZGlmZkRheXMgPT09IDEpIHJldHVybiAnXHU2NjBFXHU1OTI5J1xuICAgIGlmIChkaWZmRGF5cyA9PT0gMikgcmV0dXJuICdcdTU0MEVcdTU5MjknXG4gICAgXG4gICAgY29uc3Qgd2Vla2RheXMgPSBbJ1x1NTQ2OFx1NjVFNScsICdcdTU0NjhcdTRFMDAnLCAnXHU1NDY4XHU0RThDJywgJ1x1NTQ2OFx1NEUwOScsICdcdTU0NjhcdTU2REInLCAnXHU1NDY4XHU0RTk0JywgJ1x1NTQ2OFx1NTE2RCddXG4gICAgcmV0dXJuIHdlZWtkYXlzW2RhdGUuZ2V0RGF5KCldXG4gIH1cblxuICAvLyBGb3JtYXQgZGF0ZSBhcyBZWVlZLU1NLUREXG4gIHByaXZhdGUgZm9ybWF0RGF0ZShkYXRlOiBEYXRlKTogc3RyaW5nIHtcbiAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpXG4gICAgY29uc3QgbW9udGggPSBTdHJpbmcoZGF0ZS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKVxuICAgIGNvbnN0IGRheSA9IFN0cmluZyhkYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKVxuICAgIHJldHVybiBgJHt5ZWFyfS0ke21vbnRofS0ke2RheX1gXG4gIH1cblxuICAvLyBHZW5lcmF0ZSBjYWxlbmRhciBkYXRhXG4gIGdlbmVyYXRlQ2FsZW5kYXIoKTogQXJyYXk8YW55PiB7XG4gICAgY29uc3QgcmVzdWx0ID0gW11cbiAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZSgpXG4gICAgXG4gICAgLy8gR2VuZXJhdGUgbmV4dCA2MCBkYXlzXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2MDsgaSsrKSB7XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoc3RhcnREYXRlKVxuICAgICAgZGF0ZS5zZXREYXRlKHN0YXJ0RGF0ZS5nZXREYXRlKCkgKyBpKVxuICAgICAgXG4gICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgIGRhdGU6IHRoaXMuZm9ybWF0RGF0ZShkYXRlKSxcbiAgICAgICAgZGF5OiBkYXRlLmdldERhdGUoKSxcbiAgICAgICAgbW9udGg6IGRhdGUuZ2V0TW9udGgoKSArIDEsXG4gICAgICAgIHllYXI6IGRhdGUuZ2V0RnVsbFllYXIoKSxcbiAgICAgICAgd2Vla2RheTogZGF0ZS5nZXREYXkoKSxcbiAgICAgICAgaXNUb2RheTogdGhpcy5pc1RvZGF5KGRhdGUpLFxuICAgICAgICBpc1NlbGVjdGVkOiB0aGlzLmZvcm1hdERhdGUoZGF0ZSkgPT09IHRoaXMuY3VycmVudERhdGVWYWx1ZVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgLy8gQ2hlY2sgaWYgZGF0ZSBpcyB0b2RheVxuICBwcml2YXRlIGlzVG9kYXkoZGF0ZTogRGF0ZSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxuICAgIHJldHVybiBkYXRlLmdldERhdGUoKSA9PT0gdG9kYXkuZ2V0RGF0ZSgpICYmXG4gICAgICAgICAgIGRhdGUuZ2V0TW9udGgoKSA9PT0gdG9kYXkuZ2V0TW9udGgoKSAmJlxuICAgICAgICAgICBkYXRlLmdldEZ1bGxZZWFyKCkgPT09IHRvZGF5LmdldEZ1bGxZZWFyKClcbiAgfVxuXG4gIC8vIFVwZGF0ZSBkYXRlIGJ1dHRvbnMgdG8gZGlzYWJsZSBwYXN0IGRhdGVzIGJhc2VkIG9uIGNsaWVudCB0aW1lem9uZVxuICBwcml2YXRlIHVwZGF0ZVBhc3REYXRlcygpOiB2b2lkIHtcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKClcbiAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICAgIGNvbnN0IHRvZGF5U3RyID0gdGhpcy5mb3JtYXREYXRlKHRvZGF5KVxuICAgIFxuICAgIHRoaXMuZGF0ZUJ1dHRvblRhcmdldHMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgY29uc3QgZGF0ZVN0ciA9IGJ1dHRvbi5kYXRhc2V0LmRhdGVcbiAgICAgIGlmICghZGF0ZVN0cikgcmV0dXJuXG4gICAgICBcbiAgICAgIGNvbnN0IGJ1dHRvbkRhdGUgPSBuZXcgRGF0ZShgJHtkYXRlU3RyfVQwMDowMDowMGApXG4gICAgICBidXR0b25EYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgdG9kYXkgKGNsaWVudCB0aW1lem9uZSlcbiAgICAgIGNvbnN0IHRvZGF5TWFya2VyID0gYnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXRvZGF5LW1hcmtlcl0nKSBhcyBIVE1MRWxlbWVudFxuICAgICAgaWYgKGRhdGVTdHIgPT09IHRvZGF5U3RyICYmIHRvZGF5TWFya2VyKSB7XG4gICAgICAgIHRvZGF5TWFya2VyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChidXR0b25EYXRlIDwgdG9kYXkpIHtcbiAgICAgICAgLy8gRGlzYWJsZSBwYXN0IGRhdGVzXG4gICAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IHRydWVcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktMzAnLCAnY3Vyc29yLW5vdC1hbGxvd2VkJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEVuYWJsZSBjdXJyZW50IGFuZCBmdXR1cmUgZGF0ZXNcbiAgICAgICAgYnV0dG9uLmRpc2FibGVkID0gZmFsc2VcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ29wYWNpdHktMzAnLCAnY3Vyc29yLW5vdC1hbGxvd2VkJylcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIGNvbnNvbGUubG9nKGBEYXRlUGlja2VyOiBVcGRhdGVkICR7dGhpcy5kYXRlQnV0dG9uVGFyZ2V0cy5sZW5ndGh9IGRhdGUgYnV0dG9ucyBiYXNlZCBvbiBjbGllbnQgdGltZXpvbmUgKHRvZGF5OiAke3RvZGF5U3RyfSlgKVxuICB9XG5cbiAgLy8gU3dpdGNoIHRvIGV4YWN0IGRhdGUgdGFiXG4gIHN3aXRjaFRvRXhhY3REYXRlKCk6IHZvaWQge1xuICAgIHRoaXMuZXhhY3RUYWJUYXJnZXQuY2xhc3NMaXN0LmFkZCgnZm9udC1ib2xkJywgJ2JvcmRlci1iLTInLCAnYm9yZGVyLWJsYWNrJylcbiAgICB0aGlzLmV4YWN0VGFiVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS01MDAnKVxuICAgIHRoaXMuZnV6enlUYWJUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZm9udC1ib2xkJywgJ2JvcmRlci1iLTInLCAnYm9yZGVyLWJsYWNrJylcbiAgICB0aGlzLmZ1enp5VGFiVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS01MDAnKVxuICAgIFxuICAgIHRoaXMuZXhhY3REYXRlQ29udGVudFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIHRoaXMuZnV6enlEYXRlQ29udGVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICB9XG5cbiAgLy8gU3dpdGNoIHRvIGZ1enp5IGRhdGUgdGFiXG4gIHN3aXRjaFRvRnV6enlEYXRlKCk6IHZvaWQge1xuICAgIHRoaXMuZnV6enlUYWJUYXJnZXQuY2xhc3NMaXN0LmFkZCgnZm9udC1ib2xkJywgJ2JvcmRlci1iLTInLCAnYm9yZGVyLWJsYWNrJylcbiAgICB0aGlzLmZ1enp5VGFiVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS01MDAnKVxuICAgIHRoaXMuZXhhY3RUYWJUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZm9udC1ib2xkJywgJ2JvcmRlci1iLTInLCAnYm9yZGVyLWJsYWNrJylcbiAgICB0aGlzLmV4YWN0VGFiVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS01MDAnKVxuICAgIFxuICAgIHRoaXMuZnV6enlEYXRlQ29udGVudFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIHRoaXMuZXhhY3REYXRlQ29udGVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICB9XG5cbiAgLy8gVG9nZ2xlIG1vbnRoIHNlbGVjdGlvblxuICB0b2dnbGVNb250aChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50XG4gICAgY29uc3QgbW9udGggPSBidXR0b24uZGF0YXNldC5tb250aFxuICAgIFxuICAgIGlmICghbW9udGgpIHJldHVyblxuXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRNb250aHMuaGFzKG1vbnRoKSkge1xuICAgICAgLy8gRGVzZWxlY3RcbiAgICAgIHRoaXMuc2VsZWN0ZWRNb250aHMuZGVsZXRlKG1vbnRoKVxuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLXllbGxvdy0xMDAnLCAnYm9yZGVyLXllbGxvdy01MDAnKVxuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2JnLWdyYXktNTAnKVxuICAgICAgXG4gICAgICAvLyBIaWRlIGNoZWNrbWFya1xuICAgICAgY29uc3Qgc3ZnID0gYnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpXG4gICAgICBpZiAoc3ZnKSBzdmcuY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTcwMCcpXG4gICAgICBpZiAoc3ZnKSBzdmcuY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTQwMCcpXG4gICAgICBcbiAgICAgIGNvbnN0IHNwYW4gPSBidXR0b24ucXVlcnlTZWxlY3Rvcignc3BhbicpXG4gICAgICBpZiAoc3Bhbikgc3Bhbi5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktODAwJywgJ2ZvbnQtbWVkaXVtJylcbiAgICAgIGlmIChzcGFuKSBzcGFuLmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS01MDAnKVxuICAgICAgXG4gICAgICAvLyBGaW5kIGFuZCBoaWRlIGNoZWNrbWFyayBieSBsb29raW5nIGZvciBhbGwgZGl2cyB3aXRoIHN2ZyBpbnNpZGVcbiAgICAgIGNvbnN0IGNoZWNrbWFya3MgPSBidXR0b24ucXVlcnlTZWxlY3RvckFsbCgnZGl2W2NsYXNzKj1cImFic29sdXRlXCJdJylcbiAgICAgIGNoZWNrbWFya3MuZm9yRWFjaChkaXYgPT4ge1xuICAgICAgICBpZiAoZGl2LnF1ZXJ5U2VsZWN0b3IoJ3N2Z1t3aWR0aD1cIjEyXCJdJykpIHtcbiAgICAgICAgICBkaXYuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2VsZWN0XG4gICAgICB0aGlzLnNlbGVjdGVkTW9udGhzLmFkZChtb250aClcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1ncmF5LTUwJylcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdiZy15ZWxsb3ctMTAwJywgJ2JvcmRlci15ZWxsb3ctNTAwJylcbiAgICAgIFxuICAgICAgLy8gU2hvdyBjaGVja21hcmsgc3R5bGVcbiAgICAgIGNvbnN0IHN2ZyA9IGJ1dHRvbi5xdWVyeVNlbGVjdG9yKCdzdmcnKVxuICAgICAgaWYgKHN2Zykgc3ZnLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS00MDAnKVxuICAgICAgaWYgKHN2Zykgc3ZnLmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS03MDAnKVxuICAgICAgXG4gICAgICBjb25zdCBzcGFuID0gYnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKVxuICAgICAgaWYgKHNwYW4pIHNwYW4uY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTUwMCcpXG4gICAgICBpZiAoc3Bhbikgc3Bhbi5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktODAwJywgJ2ZvbnQtbWVkaXVtJylcbiAgICAgIFxuICAgICAgLy8gRmluZCBhbmQgc2hvdyBjaGVja21hcmtcbiAgICAgIGNvbnN0IGNoZWNrbWFya3MgPSBidXR0b24ucXVlcnlTZWxlY3RvckFsbCgnZGl2W2NsYXNzKj1cImFic29sdXRlXCJdJylcbiAgICAgIGNoZWNrbWFya3MuZm9yRWFjaChkaXYgPT4ge1xuICAgICAgICBpZiAoZGl2LnF1ZXJ5U2VsZWN0b3IoJ3N2Z1t3aWR0aD1cIjEyXCJdJykpIHtcbiAgICAgICAgICBkaXYuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvLyBTZWxlY3QgcXVpY2sgcmFuZ2UgKDEsIDMsIG9yIDYgbW9udGhzKVxuICBzZWxlY3RRdWlja1JhbmdlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBjb25zdCByYW5nZVN0ciA9IGJ1dHRvbi5kYXRhc2V0LnJhbmdlXG4gICAgXG4gICAgaWYgKCFyYW5nZVN0cikgcmV0dXJuXG4gICAgXG4gICAgY29uc3QgcmFuZ2UgPSBwYXJzZUludChyYW5nZVN0ciwgMTApXG4gICAgXG4gICAgLy8gQ2xlYXIgY3VycmVudCBzZWxlY3Rpb25cbiAgICB0aGlzLmNsZWFyTW9udGhTZWxlY3Rpb24oKVxuICAgIFxuICAgIC8vIFNlbGVjdCBuZXh0IE4gbW9udGhzXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXG4gICAgY29uc3QgY3VycmVudE1vbnRoID0gbmV3IERhdGUodG9kYXkuZ2V0RnVsbFllYXIoKSwgdG9kYXkuZ2V0TW9udGgoKSwgMSlcbiAgICBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhbmdlOyBpKyspIHtcbiAgICAgIGNvbnN0IHRhcmdldE1vbnRoID0gbmV3IERhdGUoY3VycmVudE1vbnRoKVxuICAgICAgdGFyZ2V0TW9udGguc2V0TW9udGgoY3VycmVudE1vbnRoLmdldE1vbnRoKCkgKyBpKVxuICAgICAgY29uc3QgbW9udGhWYWx1ZSA9IGAke3RhcmdldE1vbnRoLmdldEZ1bGxZZWFyKCl9LSR7U3RyaW5nKHRhcmdldE1vbnRoLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpfWBcbiAgICAgIFxuICAgICAgLy8gRmluZCBhbmQgc2VsZWN0IHRoZSBidXR0b25cbiAgICAgIGNvbnN0IG1vbnRoQnV0dG9uID0gdGhpcy5tb250aEJ1dHRvblRhcmdldHMuZmluZChidG4gPT4gYnRuLmRhdGFzZXQubW9udGggPT09IG1vbnRoVmFsdWUpXG4gICAgICBpZiAobW9udGhCdXR0b24gJiYgIXRoaXMuc2VsZWN0ZWRNb250aHMuaGFzKG1vbnRoVmFsdWUpKSB7XG4gICAgICAgIG1vbnRoQnV0dG9uLmNsaWNrKClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBDbGVhciBtb250aCBzZWxlY3Rpb25cbiAgcHJpdmF0ZSBjbGVhck1vbnRoU2VsZWN0aW9uKCk6IHZvaWQge1xuICAgIHRoaXMubW9udGhCdXR0b25UYXJnZXRzLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgIGNvbnN0IG1vbnRoID0gYnV0dG9uLmRhdGFzZXQubW9udGhcbiAgICAgIGlmIChtb250aCAmJiB0aGlzLnNlbGVjdGVkTW9udGhzLmhhcyhtb250aCkpIHtcbiAgICAgICAgLy8gRGVzZWxlY3QgcHJvZ3JhbW1hdGljYWxseVxuICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhzLmRlbGV0ZShtb250aClcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLXllbGxvdy0xMDAnLCAnYm9yZGVyLXllbGxvdy01MDAnKVxuICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYmctZ3JheS01MCcpXG4gICAgICAgIFxuICAgICAgICBjb25zdCBzdmcgPSBidXR0b24ucXVlcnlTZWxlY3Rvcignc3ZnJylcbiAgICAgICAgaWYgKHN2Zykgc3ZnLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS03MDAnKVxuICAgICAgICBpZiAoc3ZnKSBzdmcuY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTQwMCcpXG4gICAgICAgIFxuICAgICAgICBjb25zdCBzcGFuID0gYnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKVxuICAgICAgICBpZiAoc3Bhbikgc3Bhbi5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktODAwJywgJ2ZvbnQtbWVkaXVtJylcbiAgICAgICAgaWYgKHNwYW4pIHNwYW4uY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTUwMCcpXG4gICAgICAgIFxuICAgICAgICBjb25zdCBjaGVja21hcmtzID0gYnV0dG9uLnF1ZXJ5U2VsZWN0b3JBbGwoJ2RpdltjbGFzcyo9XCJhYnNvbHV0ZVwiXScpXG4gICAgICAgIGNoZWNrbWFya3MuZm9yRWFjaChkaXYgPT4ge1xuICAgICAgICAgIGlmIChkaXYucXVlcnlTZWxlY3Rvcignc3ZnW3dpZHRoPVwiMTJcIl0nKSkge1xuICAgICAgICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyBDb25maXJtIGZ1enp5IGRhdGUgc2VsZWN0aW9uXG4gIGNvbmZpcm1GdXp6eURhdGUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRNb250aHMuc2l6ZSA9PT0gMCkge1xuICAgICAgYWxlcnQoJ1x1OEJGN1x1ODFGM1x1NUMxMVx1OTAwOVx1NjJFOVx1NEUwMFx1NEUyQVx1NjcwOFx1NEVGRCcpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBDb252ZXJ0IHNlbGVjdGVkIG1vbnRocyB0byBhIGNvbW1hLXNlcGFyYXRlZCBzdHJpbmdcbiAgICBjb25zdCBtb250aHNBcnJheSA9IEFycmF5LmZyb20odGhpcy5zZWxlY3RlZE1vbnRocykuc29ydCgpXG4gICAgY29uc3QgbW9udGhzU3RyaW5nID0gbW9udGhzQXJyYXkuam9pbignLCcpXG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBvbiBzZWFyY2ggcGFnZSAtIHJlbG9hZCB3aXRoIGZpcnN0IGRhdGUgb2YgZmlyc3Qgc2VsZWN0ZWQgbW9udGhcbiAgICBpZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLmluY2x1ZGVzKCcvZmxpZ2h0cy9zZWFyY2gnKSkge1xuICAgICAgY29uc29sZS5sb2coJ0RhdGUgcGlja2VyOiBTZWFyY2ggcGFnZSBmdXp6eSBtb2RlLCByZWxvYWRpbmcgd2l0aCBmaXJzdCBkYXRlIG9mIHNlbGVjdGVkIG1vbnRocycpXG4gICAgICBcbiAgICAgIC8vIEdldCB0aGUgZmlyc3QgZGF5IG9mIHRoZSBmaXJzdCBzZWxlY3RlZCBtb250aFxuICAgICAgY29uc3QgZmlyc3RNb250aCA9IG1vbnRoc0FycmF5WzBdXG4gICAgICBjb25zdCBbeWVhciwgbW9udGhdID0gZmlyc3RNb250aC5zcGxpdCgnLScpXG4gICAgICBjb25zdCBmaXJzdERhdGUgPSBgJHt5ZWFyfS0ke21vbnRofS0wMWBcbiAgICAgIFxuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZilcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdkYXRlJywgZmlyc3REYXRlKVxuICAgICAgLy8gU3RvcmUgZnV6enkgZGF0ZSBpbmZvIGZvciBmdXR1cmUgdXNlIGlmIG5lZWRlZFxuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2Z1enp5X21vbnRocycsIG1vbnRoc1N0cmluZylcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsLnRvU3RyaW5nKClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgdGhlIGRpc3BsYXkgd2l0aCBmdXp6eSBkYXRlIGluZm8gKGZvciBvdGhlciBwYWdlcylcbiAgICBpZiAodGhpcy5oYXNTZWxlY3RlZERhdGVUYXJnZXQpIHtcbiAgICAgIGNvbnN0IGZpcnN0TW9udGggPSBtb250aHNBcnJheVswXVxuICAgICAgY29uc3QgWywgbW9udGhdID0gZmlyc3RNb250aC5zcGxpdCgnLScpXG4gICAgICBjb25zdCBtb250aE51bSA9IHBhcnNlSW50KG1vbnRoLCAxMClcbiAgICAgIFxuICAgICAgaWYgKG1vbnRoc0FycmF5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVRhcmdldC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgJHttb250aE51bX08c3BhbiBjbGFzcz1cInRleHQtbGcgZm9udC1tZWRpdW0gbXgtMC41XCI+XHU2NzA4PC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1iYXNlIHRleHQtZ3JheS01MDAgZm9udC1tZWRpdW1cIj5cdTUxNjhcdTY3MDg8L3NwYW4+XG4gICAgICAgIGBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGxhc3RNb250aCA9IG1vbnRoc0FycmF5W21vbnRoc0FycmF5Lmxlbmd0aCAtIDFdXG4gICAgICAgIGNvbnN0IFssIGxhc3RNb250aFN0cl0gPSBsYXN0TW9udGguc3BsaXQoJy0nKVxuICAgICAgICBjb25zdCBsYXN0TW9udGhOdW0gPSBwYXJzZUludChsYXN0TW9udGhTdHIsIDEwKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVUYXJnZXQuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICR7bW9udGhOdW19PHNwYW4gY2xhc3M9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIG14LTAuNVwiPlx1NjcwODwvc3Bhbj4tJHtsYXN0TW9udGhOdW19PHNwYW4gY2xhc3M9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIG14LTAuNVwiPlx1NjcwODwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInRleHQtYmFzZSB0ZXh0LWdyYXktNTAwIGZvbnQtbWVkaXVtXCI+KCR7bW9udGhzQXJyYXkubGVuZ3RofVx1NEUyQVx1NjcwOCk8L3NwYW4+XG4gICAgICAgIGBcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gU3RvcmUgZnV6enkgZGF0ZSBpbiB0aGUgaGlkZGVuIGlucHV0IHdpdGggYSBzcGVjaWFsIHByZWZpeFxuICAgIGlmICh0aGlzLmhhc0RhdGVJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5kYXRlSW5wdXRUYXJnZXQudmFsdWUgPSBgZnV6enk6JHttb250aHNTdHJpbmd9YFxuICAgIH1cbiAgICBcbiAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJ0ZXJtc01vZGFsXCIsIFwiaW5zdXJhbmNlTW9kYWxcIiwgXCJtZW1iZXJNb2RhbFwiLCBcImNvbmZpcm1Nb2RhbFwiLCBcInRvdGFsUHJpY2VBbW91bnRcIl1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHRlcm1zTW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaW5zdXJhbmNlTW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbWVtYmVyTW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY29uZmlybU1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRvdGFsUHJpY2VBbW91bnRUYXJnZXQ6IEhUTUxFbGVtZW50XG5cbiAgLy8gXHU4RkZEXHU4RTJBXHU0RjFBXHU1NDU4XHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1REYyXHU1QjhDXHU2MjEwXG4gIHByaXZhdGUgbWVtYmVyQ2hlY2tDb21wbGV0ZWQ6IGJvb2xlYW4gPSBmYWxzZVxuICAvLyBcdThGRkRcdThFMkFcdTY2MkZcdTU0MjZcdTRFM0FcdTRGMUFcdTU0NThcdTc4NkVcdThCQTRcdTU0MEVcdTc2ODRcdTdCMkNcdTRFOENcdTZCMjFcdTdCNDlcdTVGODVcbiAgcHJpdmF0ZSBpc1NlY29uZFdhaXQ6IGJvb2xlYW4gPSBmYWxzZVxuICAvLyBcdTVCNThcdTUwQThcdTk3MDBcdTg5ODFcdTZDRThcdTUxOENcdTc2ODRcdTgyMkFcdTdBN0FcdTUxNkNcdTUzRjhcdTUyMTdcdTg4NjhcbiAgcHJpdmF0ZSBtaXNzaW5nQWlybGluZXM6IHN0cmluZ1tdID0gW11cblxuICBzZWxlY3RQYXNzZW5nZXIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgcmFkaW8gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBpZE51bWJlciA9IHJhZGlvLmRhdGFzZXQuaWROdW1iZXIgfHwgJydcbiAgICBjb25zdCBwaG9uZSA9IHJhZGlvLmRhdGFzZXQucGhvbmUgfHwgJydcbiAgICBcbiAgICAvLyBcdTU4NkJcdTUxNDVcdTk2OTBcdTg1Q0ZcdTVCNTdcdTZCQjVcbiAgICBjb25zdCBpZE51bWJlckZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3Nlbmdlcl9pZF9udW1iZXInKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgXG4gICAgaWYgKGlkTnVtYmVyRmllbGQpIHtcbiAgICAgIGlkTnVtYmVyRmllbGQudmFsdWUgPSBpZE51bWJlclxuICAgIH1cblxuICAgIC8vIFx1ODFFQVx1NTJBOFx1NTg2Qlx1NTE0NVx1ODA1NFx1N0NGQlx1NzUzNVx1OEJERFxuICAgIGNvbnN0IGNvbnRhY3RQaG9uZUZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jvb2tpbmdfY29udGFjdF9waG9uZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBcbiAgICBpZiAoY29udGFjdFBob25lRmllbGQgJiYgcGhvbmUpIHtcbiAgICAgIGNvbnRhY3RQaG9uZUZpZWxkLnZhbHVlID0gcGhvbmVcbiAgICB9XG4gIH1cblxuICBzZWxlY3RJbnN1cmFuY2UoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGNvbnN0IGluc3VyYW5jZVR5cGUgPSBidXR0b24uZGF0YXNldC5pbnN1cmFuY2VUeXBlIHx8ICdub25lJ1xuICAgIGNvbnN0IGluc3VyYW5jZVByaWNlID0gYnV0dG9uLmRhdGFzZXQuaW5zdXJhbmNlUHJpY2UgfHwgJzAnXG4gICAgXG4gICAgdGhpcy5zZXRJbnN1cmFuY2VWYWx1ZXMoaW5zdXJhbmNlVHlwZSwgaW5zdXJhbmNlUHJpY2UpXG4gICAgdGhpcy5jbG9zZUluc3VyYW5jZU1vZGFsKClcbiAgfVxuXG4gIHNldEluc3VyYW5jZVZhbHVlcyhpbnN1cmFuY2VUeXBlOiBzdHJpbmcsIGluc3VyYW5jZVByaWNlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBpbnN1cmFuY2VUeXBlRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9va2luZ19pbnN1cmFuY2VfdHlwZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBpbnN1cmFuY2VQcmljZUZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jvb2tpbmdfaW5zdXJhbmNlX3ByaWNlJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIFxuICAgIGlmIChpbnN1cmFuY2VUeXBlRmllbGQpIHtcbiAgICAgIGluc3VyYW5jZVR5cGVGaWVsZC52YWx1ZSA9IGluc3VyYW5jZVR5cGVcbiAgICB9XG4gICAgXG4gICAgaWYgKGluc3VyYW5jZVByaWNlRmllbGQpIHtcbiAgICAgIGluc3VyYW5jZVByaWNlRmllbGQudmFsdWUgPSBpbnN1cmFuY2VQcmljZVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1NTkwNFx1NzQwNlx1ODg2OFx1NTM1NVx1NEUyRFx1NzY4NFx1NEZERFx1OTY2OVx1OTAwOVx1OTg3OVx1NTM2MVx1OTAwOVx1NjJFOVxuICBzZWxlY3RJbnN1cmFuY2VPcHRpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgcmFkaW8gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBpbnN1cmFuY2VUeXBlID0gcmFkaW8uZGF0YXNldC5pbnN1cmFuY2VUeXBlIHx8ICdub25lJ1xuICAgIGNvbnN0IGluc3VyYW5jZVByaWNlID0gcmFkaW8uZGF0YXNldC5pbnN1cmFuY2VQcmljZSB8fCAnMCdcbiAgICBcbiAgICAvLyBcdTY2RjRcdTY1QjBcdTk2OTBcdTg1Q0ZcdTVCNTdcdTZCQjVcbiAgICB0aGlzLnNldEluc3VyYW5jZVZhbHVlcyhpbnN1cmFuY2VUeXBlLCBpbnN1cmFuY2VQcmljZSlcbiAgICBcbiAgICAvLyBcdTY2RjRcdTY1QjBcdTg5QzZcdTg5QzlcdTYzMDdcdTc5M0FcdTU2NjhcdUZGMDhcdThGQjlcdTY4NDZcdTU0OENcdTVCRjlcdTUzRjdcdUZGMDlcbiAgICBjb25zdCBhbGxDYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWluc3VyYW5jZS1jYXJkXScpXG4gICAgYWxsQ2FyZHMuZm9yRWFjaChjYXJkID0+IHtcbiAgICAgIGNhcmQuY2xhc3NMaXN0LnJlbW92ZSgnYm9yZGVyLXllbGxvdy00MDAnLCAnYm9yZGVyLWJsdWUtNDAwJywgJ2JvcmRlci1ncmF5LTQwMCcpXG4gICAgICBjYXJkLmNsYXNzTGlzdC5hZGQoJ2JvcmRlci0yJywgJ2JvcmRlci1ncmF5LTMwMCcpXG4gICAgICBjb25zdCBjaGVja21hcmsgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5iZy15ZWxsb3ctNDAwJykgYXMgSFRNTEVsZW1lbnRcbiAgICAgIGlmIChjaGVja21hcmspIHtcbiAgICAgICAgY2hlY2ttYXJrLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIC8vIFx1NEUzQVx1OTAwOVx1NEUyRFx1NzY4NFx1NTM2MVx1NzI0N1x1NkRGQlx1NTJBMFx1NjgzN1x1NUYwRlxuICAgIGNvbnN0IHNlbGVjdGVkQ2FyZCA9IHJhZGlvLmNsb3Nlc3QoJ1tkYXRhLWluc3VyYW5jZS1jYXJkXScpIGFzIEhUTUxFbGVtZW50XG4gICAgaWYgKHNlbGVjdGVkQ2FyZCkge1xuICAgICAgc2VsZWN0ZWRDYXJkLmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1ncmF5LTMwMCcpXG4gICAgICBpZiAoaW5zdXJhbmNlVHlwZSA9PT0gJ3N0YW5kYXJkJykge1xuICAgICAgICBzZWxlY3RlZENhcmQuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLXllbGxvdy00MDAnKVxuICAgICAgfSBlbHNlIGlmIChpbnN1cmFuY2VUeXBlID09PSAncHJlbWl1bScpIHtcbiAgICAgICAgc2VsZWN0ZWRDYXJkLmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1ibHVlLTQwMCcpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxlY3RlZENhcmQuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLWdyYXktNDAwJylcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNoZWNrbWFyayA9IHNlbGVjdGVkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuYmcteWVsbG93LTQwMCcpIGFzIEhUTUxFbGVtZW50XG4gICAgICBpZiAoY2hlY2ttYXJrKSB7XG4gICAgICAgIGNoZWNrbWFyay5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHU2NkY0XHU2NUIwXHU1RTk1XHU5MEU4XHU2MDNCXHU0RUY3XG4gICAgdGhpcy51cGRhdGVUb3RhbFByaWNlKClcbiAgfVxuXG4gIC8vIFx1NjZGNFx1NjVCMFx1NjAzQlx1NEVGN1x1NjYzRVx1NzkzQVxuICBwcml2YXRlIHVwZGF0ZVRvdGFsUHJpY2UoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnRvdGFsUHJpY2VBbW91bnRUYXJnZXQpIHJldHVyblxuICAgIFxuICAgIGNvbnN0IGJhc2VQcmljZSA9IHBhcnNlSW50KHRoaXMudG90YWxQcmljZUFtb3VudFRhcmdldC5kYXRhc2V0LmJhc2VQcmljZSB8fCAnMCcpXG4gICAgY29uc3QgaW5zdXJhbmNlUHJpY2VGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib29raW5nX2luc3VyYW5jZV9wcmljZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBpbnN1cmFuY2VQcmljZSA9IHBhcnNlSW50KGluc3VyYW5jZVByaWNlRmllbGQ/LnZhbHVlIHx8ICcwJylcbiAgICBcbiAgICAvLyBcdThCQTFcdTdCOTdcdTYwM0JcdTRFRjdcdUZGMUFcdTU3RkFcdTc4NDBcdTRFRjdcdTY4M0MgKyBcdTRGRERcdTk2NjlcdTRFRjdcdTY4M0MgXHUwMEQ3IFx1NEVCQVx1NjU3MFx1RkYwOFx1NUY1M1x1NTI0RFx1NTA0N1x1OEJCRVx1NEUzQTFcdTRFQkFcdUZGMDlcbiAgICBjb25zdCBwYXNzZW5nZXJDb3VudCA9IDFcbiAgICBjb25zdCB0b3RhbFByaWNlID0gYmFzZVByaWNlICsgKGluc3VyYW5jZVByaWNlICogcGFzc2VuZ2VyQ291bnQpXG4gICAgXG4gICAgdGhpcy50b3RhbFByaWNlQW1vdW50VGFyZ2V0LnRleHRDb250ZW50ID0gdG90YWxQcmljZS50b1N0cmluZygpXG4gIH1cblxuICBzaG93VGVybXNNb2RhbChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgdGhpcy50ZXJtc01vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gIH1cblxuICBjbG9zZVRlcm1zTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy50ZXJtc01vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gIH1cblxuICBhY2NlcHRUZXJtcygpOiB2b2lkIHtcbiAgICBjb25zdCB0ZXJtc0NoZWNrYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jvb2tpbmdfYWNjZXB0X3Rlcm1zJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGlmICh0ZXJtc0NoZWNrYm94KSB7XG4gICAgICB0ZXJtc0NoZWNrYm94LmNoZWNrZWQgPSB0cnVlXG4gICAgfVxuICAgIHRoaXMuY2xvc2VUZXJtc01vZGFsKClcbiAgICBcbiAgICAvLyBcdTY4QzBcdTY3RTVcdTc1MjhcdTYyMzdcdTY2MkZcdTU0MjZcdTVERjJcdTkwMDlcdTYyRTlcdTRGRERcdTk2NjlcbiAgICBjb25zdCBpbnN1cmFuY2VUeXBlRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9va2luZ19pbnN1cmFuY2VfdHlwZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBpbnN1cmFuY2VUeXBlID0gaW5zdXJhbmNlVHlwZUZpZWxkPy52YWx1ZSB8fCAnbm9uZSdcbiAgICBcbiAgICBpZiAoaW5zdXJhbmNlVHlwZSA9PT0gJ25vbmUnKSB7XG4gICAgICAvLyBcdTc1MjhcdTYyMzdcdTY3MkFcdTkwMDlcdTYyRTlcdTRGRERcdTk2NjlcdUZGMENcdTY2M0VcdTc5M0FcdTRGRERcdTk2NjlcdTYzQThcdTgzNTBcdTVGMzlcdTdBOTdcbiAgICAgIHRoaXMuc2hvd0luc3VyYW5jZU1vZGFsKClcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gXHU3NTI4XHU2MjM3XHU1REYyXHU5MDA5XHU2MkU5XHU0RkREXHU5NjY5XHVGRjBDXHU4REYzXHU4RkM3XHU0RkREXHU5NjY5XHU1RjM5XHU3QTk3XHVGRjBDXHU3NkY0XHU2M0E1XHU4RkRCXHU1MTY1XHU3ODZFXHU4QkE0XHU2RDQxXHU3QTBCXG4gICAgICB0aGlzLnNob3dDb25maXJtTW9kYWwoKVxuICAgIH1cbiAgfVxuXG4gIHNob3dJbnN1cmFuY2VNb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLmluc3VyYW5jZU1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gIH1cblxuICBjbG9zZUluc3VyYW5jZU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMuaW5zdXJhbmNlTW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICB0aGlzLnNob3dDb25maXJtTW9kYWwoKVxuICB9XG5cbiAgc2tpcEluc3VyYW5jZSgpOiB2b2lkIHtcbiAgICB0aGlzLnNldEluc3VyYW5jZVZhbHVlcygnbm9uZScsICcwJylcbiAgICB0aGlzLmNsb3NlSW5zdXJhbmNlTW9kYWwoKVxuICB9XG5cbiAgc2hvd01lbWJlck1vZGFsKCk6IHZvaWQge1xuICAgIC8vIFx1NjZGNFx1NjVCMFx1NUYzOVx1N0E5N1x1NEUyRFx1NzY4NFx1ODIyQVx1N0E3QVx1NTE2Q1x1NTNGOFx1NTIxN1x1ODg2OFx1NjYzRVx1NzkzQVxuICAgIHRoaXMudXBkYXRlTWVtYmVyTW9kYWxDb250ZW50KClcbiAgICB0aGlzLm1lbWJlck1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gIH1cblxuICB1cGRhdGVNZW1iZXJNb2RhbENvbnRlbnQoKTogdm9pZCB7XG4gICAgLy8gXHU2NkY0XHU2NUIwXHU0RjFBXHU1NDU4XHU1RjM5XHU3QTk3XHU0RTJEXHU2NjNFXHU3OTNBXHU3Njg0XHU4MjJBXHU3QTdBXHU1MTZDXHU1M0Y4XHU1NDBEXHU3OUYwXG4gICAgY29uc3QgYWlybGluZVRleHRFbGVtZW50ID0gdGhpcy5tZW1iZXJNb2RhbFRhcmdldC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1haXJsaW5lLW5hbWVzXScpIGFzIEhUTUxFbGVtZW50XG4gICAgaWYgKGFpcmxpbmVUZXh0RWxlbWVudCAmJiB0aGlzLm1pc3NpbmdBaXJsaW5lcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBhaXJsaW5lc1RleHQgPSB0aGlzLm1pc3NpbmdBaXJsaW5lcy5qb2luKCdcdTMwMDEnKVxuICAgICAgYWlybGluZVRleHRFbGVtZW50LnRleHRDb250ZW50ID0gYWlybGluZXNUZXh0XG4gICAgfVxuICB9XG5cbiAgY2xvc2VNZW1iZXJNb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLm1lbWJlck1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgLy8gXHU2ODA3XHU4QkIwXHU0RjFBXHU1NDU4XHU2OEMwXHU2N0U1XHU1REYyXHU1QjhDXHU2MjEwXHVGRjA4XHU3NTI4XHU2MjM3XHU1NDBDXHU2MTBGXHU2Q0U4XHU1MThDXHU0RjFBXHU1NDU4XHVGRjA5XG4gICAgdGhpcy5tZW1iZXJDaGVja0NvbXBsZXRlZCA9IHRydWVcbiAgICAvLyBcdTY4MDdcdThCQjBcdTRFM0FcdTdCMkNcdTRFOENcdTZCMjFcdTdCNDlcdTVGODVcbiAgICB0aGlzLmlzU2Vjb25kV2FpdCA9IHRydWVcbiAgICAvLyBcdTRGMUFcdTU0NThcdTc4NkVcdThCQTRcdTU0MEVcdUZGMENcdTUxOERcdTZCMjFcdTY2M0VcdTc5M0FcdTdCNDlcdTVGODVcdTVGMzlcdTdBOTdcbiAgICB0aGlzLnNob3dDb25maXJtTW9kYWwoKVxuICB9XG5cbiAgc2hvd0NvbmZpcm1Nb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLmNvbmZpcm1Nb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIFxuICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjYyRlx1N0IyQ1x1NEU4Q1x1NkIyMVx1N0I0OVx1NUY4NVx1RkYwOFx1NEYxQVx1NTQ1OFx1Nzg2RVx1OEJBNFx1NTQwRVx1RkYwOVx1RkYwQ1x1N0I0OVx1NUY4NTUtMTBcdTc5RDJcdTU0MEVcdTYzRDBcdTRFQTRcbiAgICBpZiAodGhpcy5pc1NlY29uZFdhaXQpIHtcbiAgICAgIGNvbnN0IHdhaXRUaW1lID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKDEwMDAwIC0gNTAwMCArIDEpKSArIDUwMDBcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnN1Ym1pdEZvcm0oKVxuICAgICAgfSwgd2FpdFRpbWUpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gXHU3QjJDXHU0RTAwXHU2QjIxXHU2NjNFXHU3OTNBXHU3QjQ5XHU1Rjg1XHU1RjM5XHU3QTk3XHU2NUY2XHVGRjBDXHU3QUNCXHU1MzczXHU2OEMwXHU2N0U1XHU0RjFBXHU1NDU4XHU3MkI2XHU2MDAxXHVGRjA4XHU2NUUwXHU5NzAwXHU3QjQ5XHU1Rjg1XHVGRjA5XG4gICAgdGhpcy5jaGVja01lbWJlcnNoaXBTdGF0dXNGcm9tREIoKS50aGVuKG5lZWRzTWVtYmVyUmVnaXN0cmF0aW9uID0+IHtcbiAgICAgIGlmIChuZWVkc01lbWJlclJlZ2lzdHJhdGlvbikge1xuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTk3MDBcdTg5ODFcdTZDRThcdTUxOENcdTRGMUFcdTU0NThcdUZGMENcdTUxNzNcdTk1RURcdTc4NkVcdThCQTRcdTVGMzlcdTdBOTdcdTVFNzZcdTY2M0VcdTc5M0FcdTRGMUFcdTU0NThcdTVGMzlcdTdBOTdcbiAgICAgICAgdGhpcy5jbG9zZUNvbmZpcm1Nb2RhbCgpXG4gICAgICAgIHRoaXMuc2hvd01lbWJlck1vZGFsKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NURGMlx1NjYyRlx1NEYxQVx1NTQ1OFx1RkYwQ1x1NEZERFx1NjMwMVx1N0I0OVx1NUY4NVx1NUYzOVx1N0E5N1x1NjYzRVx1NzkzQVx1RkYwQ1x1N0I0OVx1NUY4NTUtMTBcdTc5RDJcdTU0MEVcdTYzRDBcdTRFQTRcbiAgICAgICAgdGhpcy5tZW1iZXJDaGVja0NvbXBsZXRlZCA9IHRydWVcbiAgICAgICAgY29uc3Qgd2FpdFRpbWUgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoMTAwMDAgLSA1MDAwICsgMSkpICsgNTAwMFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLnN1Ym1pdEZvcm0oKVxuICAgICAgICB9LCB3YWl0VGltZSlcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgY2hlY2tNZW1iZXJzaGlwU3RhdHVzRnJvbURCKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIC8vIFx1NEVDRVx1NjU3MFx1NjM2RVx1NUU5M1x1NjhDMFx1NjdFNVx1NUY1M1x1NTI0RFx1NzUyOFx1NjIzN1x1NjYyRlx1NTQyNlx1NEUzQVx1NjI0MFx1NjcwOVx1NzZGOFx1NTE3M1x1ODIyQVx1N0E3QVx1NTE2Q1x1NTNGOFx1NzY4NFx1NEYxQVx1NTQ1OFxuICAgIHRyeSB7XG4gICAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpXG4gICAgICBjb25zdCBmbGlnaHRJZCA9IHVybFBhcmFtcy5nZXQoJ2ZsaWdodF9pZCcpXG4gICAgICBjb25zdCByZXR1cm5GbGlnaHRJZCA9IHVybFBhcmFtcy5nZXQoJ3JldHVybl9mbGlnaHRfaWQnKVxuICAgICAgXG4gICAgICAvLyBcdTY3ODRcdTVFRkFcdThCRjdcdTZDNDIgVVJMXHVGRjBDXHU1MzA1XHU1NDJCXHU1M0JCXHU3QTBCXHU1NDhDXHU1NkRFXHU3QTBCXHU4MjJBXHU3M0VEIElEXG4gICAgICBsZXQgdXJsID0gYC9hcGkvY2hlY2tfbWVtYmVyc2hpcD9mbGlnaHRfaWQ9JHtmbGlnaHRJZH1gXG4gICAgICBpZiAocmV0dXJuRmxpZ2h0SWQpIHtcbiAgICAgICAgdXJsICs9IGAmcmV0dXJuX2ZsaWdodF9pZD0ke3JldHVybkZsaWdodElkfWBcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdThCRjdcdTZDNDJcdTU5MzFcdThEMjVcdUZGMENcdTlFRDhcdThCQTRcdTUwNDdcdThCQkVcdTk3MDBcdTg5ODFcdTZDRThcdTUxOENcdTRGMUFcdTU0NThcbiAgICAgICAgdGhpcy5taXNzaW5nQWlybGluZXMgPSBbXVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgICAvLyBcdTVCNThcdTUwQThcdTdGM0FcdTU5MzFcdTc2ODRcdTgyMkFcdTdBN0FcdTUxNkNcdTUzRjhcdTRGMUFcdTU0NThcdThFQUJcdTRFRkRcbiAgICAgIHRoaXMubWlzc2luZ0FpcmxpbmVzID0gZGF0YS5taXNzaW5nX2FpcmxpbmVzIHx8IFtdXG4gICAgICBcbiAgICAgIHJldHVybiAhZGF0YS5pc19tZW1iZXIgLy8gXHU4RkQ0XHU1NkRFdHJ1ZVx1ODg2OFx1NzkzQVx1OTcwMFx1ODk4MVx1NkNFOFx1NTE4Q1x1NEYxQVx1NTQ1OFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTY4QzBcdTY3RTVcdTRGMUFcdTU0NThcdTcyQjZcdTYwMDFcdTU5MzFcdThEMjU6JywgZXJyb3IpXG4gICAgICAvLyBcdTUzRDFcdTc1MUZcdTk1MTlcdThCRUZcdTY1RjZcdUZGMENcdTlFRDhcdThCQTRcdTUwNDdcdThCQkVcdTk3MDBcdTg5ODFcdTZDRThcdTUxOENcdTRGMUFcdTU0NThcbiAgICAgIHRoaXMubWlzc2luZ0FpcmxpbmVzID0gW11cbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgY2xvc2VDb25maXJtTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5jb25maXJtTW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgfVxuXG4gIHN1Ym1pdEZvcm0oKTogdm9pZCB7XG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIGNvbnN0IGZvcm0gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignZm9ybScpIGFzIEhUTUxGb3JtRWxlbWVudFxuICAgIGlmIChmb3JtKSB7XG4gICAgICBmb3JtLnN1Ym1pdCgpXG4gICAgfVxuICB9XG5cbiAgaGFuZGxlU3VibWl0KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBcbiAgICAvLyBcdTlBOENcdThCQzFcdTY2MkZcdTU0MjZcdTVERjJcdTkwMDlcdTYyRTlcdTRFNThcdTY3M0FcdTRFQkFcbiAgICBjb25zdCBzZWxlY3RlZFBhc3NlbmdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJib29raW5nW3Bhc3Nlbmdlcl9uYW1lXVwiXTpjaGVja2VkJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIFxuICAgIGlmICghc2VsZWN0ZWRQYXNzZW5nZXIpIHtcbiAgICAgIC8vIFx1NjYzRVx1NzkzQVx1OTUxOVx1OEJFRlx1NjNEMFx1NzkzQVxuICAgICAgaWYgKHdpbmRvdy5zaG93VG9hc3QpIHtcbiAgICAgICAgd2luZG93LnNob3dUb2FzdCgnXHU4QkY3XHU1MTQ4XHU5MDA5XHU2MkU5XHU0RTU4XHU2NzNBXHU0RUJBJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KCdcdThCRjdcdTUxNDhcdTkwMDlcdTYyRTlcdTRFNThcdTY3M0FcdTRFQkEnKVxuICAgICAgfVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIFx1OTFDRFx1N0Y2RVx1NEYxQVx1NTQ1OFx1NjhDMFx1NjdFNVx1NjgwN1x1NUZEN1xuICAgIHRoaXMubWVtYmVyQ2hlY2tDb21wbGV0ZWQgPSBmYWxzZVxuICAgIHRoaXMuaXNTZWNvbmRXYWl0ID0gZmFsc2VcbiAgICB0aGlzLnNob3dUZXJtc01vZGFsKGV2ZW50KVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJtb2RhbFwiXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICAvLyBcdTk4NzVcdTk3NjJcdTUyQTBcdThGN0RcdTU0MEVcdTgxRUFcdTUyQThcdTY2M0VcdTc5M0FcdTRGMThcdTYwRTBcdTUyMzhcdTVGMzlcdTdBOTdcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gIH1cblxuICBjbGFpbUNvdXBvbnMoKTogdm9pZCB7XG4gICAgLy8gXHU5ODg2XHU1M0Q2XHU0RjE4XHU2MEUwXHU1MjM4XG4gICAgYWxlcnQoJ1x1NEYxOFx1NjBFMFx1NTIzOFx1NURGMlx1OTg4Nlx1NTNENlx1NjIxMFx1NTI5Rlx1RkYwMScpXG4gICAgdGhpcy5jbG9zZU1vZGFsKClcbiAgfVxuXG4gIGNsb3NlTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJ0YWJDb250ZW50XCIsXG4gICAgXCJ0YWJzXCJcbiAgXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgdGFiQ29udGVudFRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSB0YWJzVGFyZ2V0OiBIVE1MRWxlbWVudFxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJEZXN0aW5hdGlvbiBjb250cm9sbGVyIGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkRlc3RpbmF0aW9uIGRpc2Nvbm5lY3RlZFwiKVxuICB9XG5cbiAgc3dpdGNoVGFiKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBjb25zdCB0YWJOYW1lID0gYnV0dG9uLmRhdGFzZXQudGFiXG4gICAgXG4gICAgaWYgKCF0YWJOYW1lKSByZXR1cm5cblxuICAgIC8vIFVwZGF0ZSBhY3RpdmUgdGFiIGJ1dHRvblxuICAgIGNvbnN0IGFsbFRhYkJ1dHRvbnMgPSB0aGlzLnRhYnNUYXJnZXQucXVlcnlTZWxlY3RvckFsbCgnLnRhYi1idG4nKVxuICAgIGFsbFRhYkJ1dHRvbnMuZm9yRWFjaChidG4gPT4ge1xuICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS05MDAnLCAnYm9yZGVyLWdyYXktOTAwJylcbiAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktNTAwJywgJ2JvcmRlci10cmFuc3BhcmVudCcpXG4gICAgfSlcbiAgICBcbiAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTUwMCcsICdib3JkZXItdHJhbnNwYXJlbnQnKVxuICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktOTAwJywgJ2JvcmRlci1ncmF5LTkwMCcpXG5cbiAgICAvLyBTaG93IGNvcnJlc3BvbmRpbmcgdGFiIGNvbnRlbnRcbiAgICB0aGlzLnRhYkNvbnRlbnRUYXJnZXRzLmZvckVhY2goY29udGVudCA9PiB7XG4gICAgICBpZiAoY29udGVudC5kYXRhc2V0LnRhYiA9PT0gdGFiTmFtZSkge1xuICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICB9XG4gICAgfSlcbiAgfVxufVxuXG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5pbnRlcmZhY2UgQ2l0eURhdGEge1xuICBuYW1lOiBzdHJpbmdcbiAgcGlueWluOiBzdHJpbmdcbiAgc2x1Zzogc3RyaW5nIHwgbnVsbFxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJyZWdpb25CdXR0b25cIiwgXCJjaXR5TGlzdFwiLCBcInNlYXJjaElucHV0XCIsIFwic2VhcmNoUmVzdWx0c1wiLCBcInNlYXJjaFJlc3VsdHNMaXN0XCIsIFwibm9SZXN1bHRzXCIsIFwibm9ybWFsVmlld1wiXVxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIGF2YWlsYWJsZURlc3RpbmF0aW9uczogQXJyYXksXG4gICAgYWxsQ2l0aWVzOiBBcnJheVxuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSByZWdpb25CdXR0b25UYXJnZXRzOiBIVE1MQnV0dG9uRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2l0eUxpc3RUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VhcmNoSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzZWFyY2hSZXN1bHRzVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlYXJjaFJlc3VsdHNMaXN0VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IG5vUmVzdWx0c1RhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBub3JtYWxWaWV3VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1NlYXJjaFJlc3VsdHNUYXJnZXQ6IGJvb2xlYW5cbiAgXG4gIGRlY2xhcmUgYXZhaWxhYmxlRGVzdGluYXRpb25zVmFsdWU6IHN0cmluZ1tdXG4gIGRlY2xhcmUgYWxsQ2l0aWVzVmFsdWU6IENpdHlEYXRhW11cblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiUmVnaW9uU2VsZWN0b3IgY29ubmVjdGVkXCIpXG4gICAgLy8gXHU5RUQ4XHU4QkE0XHU2NjNFXHU3OTNBXHU3MEVEXHU5NUU4XHU3NkVFXHU3Njg0XHU1NzMwXG4gICAgdGhpcy5zaG93UmVnaW9uKFwiXHU3MEVEXHU5NUU4XHU3NkVFXHU3Njg0XHU1NzMwXCIpXG4gIH1cblxuICBzZWFyY2goZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgaW5wdXQgPSBldmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IHF1ZXJ5ID0gaW5wdXQudmFsdWUudHJpbSgpLnRvTG93ZXJDYXNlKClcbiAgICBcbiAgICBpZiAocXVlcnkgPT09ICcnKSB7XG4gICAgICAvLyBcdTZFMDVcdTdBN0FcdTY0MUNcdTdEMjJcdUZGMENcdTY2M0VcdTc5M0FcdTZCNjNcdTVFMzhcdTg5QzZcdTU2RkVcbiAgICAgIHRoaXMuc2hvd05vcm1hbFZpZXcoKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIFx1NjQxQ1x1N0QyMlx1NTdDRVx1NUUwMlx1RkYwOFx1NjUyRlx1NjMwMVx1NEUyRFx1NjU4N1x1NTQ4Q1x1NjJGQ1x1OTdGM1x1RkYwOVxuICAgIGNvbnN0IHJlc3VsdHMgPSB0aGlzLmFsbENpdGllc1ZhbHVlLmZpbHRlcihjaXR5ID0+IFxuICAgICAgY2l0eS5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpIHx8IFxuICAgICAgY2l0eS5waW55aW4udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSlcbiAgICApXG4gICAgXG4gICAgdGhpcy5kaXNwbGF5U2VhcmNoUmVzdWx0cyhyZXN1bHRzKVxuICB9XG4gIFxuICBjbGVhclNlYXJjaCgpOiB2b2lkIHtcbiAgICB0aGlzLnNlYXJjaElucHV0VGFyZ2V0LnZhbHVlID0gJydcbiAgICB0aGlzLnNob3dOb3JtYWxWaWV3KClcbiAgfVxuICBcbiAgcHJpdmF0ZSBkaXNwbGF5U2VhcmNoUmVzdWx0cyhyZXN1bHRzOiBDaXR5RGF0YVtdKTogdm9pZCB7XG4gICAgLy8gXHU5NjkwXHU4NUNGXHU2QjYzXHU1RTM4XHU4OUM2XHU1NkZFXHVGRjBDXHU2NjNFXHU3OTNBXHU2NDFDXHU3RDIyXHU3RUQzXHU2NzlDXG4gICAgdGhpcy5ub3JtYWxWaWV3VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgXG4gICAgaWYgKHRoaXMuaGFzU2VhcmNoUmVzdWx0c1RhcmdldCkge1xuICAgICAgdGhpcy5zZWFyY2hSZXN1bHRzVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgfVxuICAgIFxuICAgIGlmIChyZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gXHU2NjNFXHU3OTNBXHU2NUUwXHU3RUQzXHU2NzlDXG4gICAgICB0aGlzLnNlYXJjaFJlc3VsdHNMaXN0VGFyZ2V0LmlubmVySFRNTCA9ICcnXG4gICAgICB0aGlzLm5vUmVzdWx0c1RhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBcdTY2M0VcdTc5M0FcdTY0MUNcdTdEMjJcdTdFRDNcdTY3OUNcbiAgICAgIHRoaXMubm9SZXN1bHRzVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICB0aGlzLnNlYXJjaFJlc3VsdHNMaXN0VGFyZ2V0LmlubmVySFRNTCA9IHJlc3VsdHMubWFwKGNpdHkgPT4gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1jZW50ZXIgcHktMyBweC0yIGJnLXN1cmZhY2Ugcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWJvcmRlciBob3Zlcjpib3JkZXItcHJpbWFyeSBob3ZlcjpzaGFkb3ctc20gdHJhbnNpdGlvbi1hbGwgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgIGRhdGEtYWN0aW9uPVwiY2xpY2stPnJlZ2lvbi1zZWxlY3RvciNzZWxlY3RDaXR5XCJcbiAgICAgICAgICAgICBkYXRhLWNpdHktbmFtZT1cIiR7Y2l0eS5uYW1lfVwiXG4gICAgICAgICAgICAgZGF0YS1jaXR5LXNsdWc9XCIke2NpdHkuc2x1ZyB8fCAnJ31cIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWZvcmVncm91bmRcIj4ke2NpdHkubmFtZX08L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICBgKS5qb2luKCcnKVxuICAgIH1cbiAgfVxuICBcbiAgcHJpdmF0ZSBzaG93Tm9ybWFsVmlldygpOiB2b2lkIHtcbiAgICAvLyBcdTY2M0VcdTc5M0FcdTZCNjNcdTVFMzhcdTg5QzZcdTU2RkVcdUZGMENcdTk2OTBcdTg1Q0ZcdTY0MUNcdTdEMjJcdTdFRDNcdTY3OUNcbiAgICB0aGlzLm5vcm1hbFZpZXdUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICBcbiAgICBpZiAodGhpcy5oYXNTZWFyY2hSZXN1bHRzVGFyZ2V0KSB7XG4gICAgICB0aGlzLnNlYXJjaFJlc3VsdHNUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICB9XG4gIH1cblxuICBzZWxlY3RSZWdpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGNvbnN0IHJlZ2lvbk5hbWUgPSBidXR0b24uZGF0YXNldC5yZWdpb25cbiAgICBcbiAgICBpZiAoIXJlZ2lvbk5hbWUpIHJldHVyblxuXG4gICAgLy8gXHU2NkY0XHU2NUIwXHU2MzA5XHU5NEFFXHU2ODM3XHU1RjBGXG4gICAgdGhpcy5yZWdpb25CdXR0b25UYXJnZXRzLmZvckVhY2goYnRuID0+IHtcbiAgICAgIGlmIChidG4gPT09IGJ1dHRvbikge1xuICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcInRleHQtZm9yZWdyb3VuZFwiLCBcImJnLXdoaXRlXCIsIFwiYm9yZGVyLWwtMlwiLCBcImJvcmRlci1wcmltYXJ5XCIsIFwiZm9udC1tZWRpdW1cIilcbiAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJ0ZXh0LW11dGVkXCIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZShcInRleHQtZm9yZWdyb3VuZFwiLCBcImJnLXdoaXRlXCIsIFwiYm9yZGVyLWwtMlwiLCBcImJvcmRlci1wcmltYXJ5XCIsIFwiZm9udC1tZWRpdW1cIilcbiAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJ0ZXh0LW11dGVkXCIpXG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIFx1NjYzRVx1NzkzQVx1NUJGOVx1NUU5NFx1NzY4NFx1NTdDRVx1NUUwMlx1NTIxN1x1ODg2OFxuICAgIHRoaXMuc2hvd1JlZ2lvbihyZWdpb25OYW1lKVxuICB9XG5cbiAgc2VsZWN0Q2l0eShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjaXR5Q2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBjaXR5TmFtZSA9IGNpdHlDYXJkLmRhdGFzZXQuY2l0eU5hbWVcbiAgICBcbiAgICBpZiAoIWNpdHlOYW1lKSByZXR1cm5cbiAgICBcbiAgICAvLyBcdTY4QzBcdTY3RTVcdThCRTVcdTU3Q0VcdTVFMDJcdTY2MkZcdTU0MjZcdTY3MDlcdTVCRjlcdTVFOTRcdTc2ODRcdTc2RUVcdTc2ODRcdTU3MzBcdTk4NzVcdTk3NjJcbiAgICBpZiAodGhpcy5hdmFpbGFibGVEZXN0aW5hdGlvbnNWYWx1ZS5pbmNsdWRlcyhjaXR5TmFtZSkpIHtcbiAgICAgIC8vIFx1OERGM1x1OEY2Q1x1NTIzMFx1NzZFRVx1NzY4NFx1NTczMFx1OEJFNlx1NjBDNVx1OTg3NVxuICAgICAgY29uc3Qgc2x1ZyA9IGNpdHlDYXJkLmRhdGFzZXQuY2l0eVNsdWdcbiAgICAgIGlmIChzbHVnKSB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYC9kZXN0aW5hdGlvbnMvJHtzbHVnfWBcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gXHU2NjNFXHU3OTNBXHU2M0QwXHU3OTNBXHVGRjFBXHU4QkU1XHU1N0NFXHU1RTAyXHU2NjgyXHU2NUUwXHU4QkU2XHU3RUM2XHU0RkUxXHU2MDZGXG4gICAgICBhbGVydChgJHtjaXR5TmFtZX1cdTc2ODRcdThCRTZcdTdFQzZcdTRGRTFcdTYwNkZcdTUzNzNcdTVDMDZcdTRFMEFcdTdFQkZcdUZGMENcdTY1NkNcdThCRjdcdTY3MUZcdTVGODVcdUZGMDFgKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2hvd1JlZ2lvbihyZWdpb25OYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLmNpdHlMaXN0VGFyZ2V0cy5mb3JFYWNoKGxpc3QgPT4ge1xuICAgICAgaWYgKGxpc3QuZGF0YXNldC5yZWdpb24gPT09IHJlZ2lvbk5hbWUpIHtcbiAgICAgICAgbGlzdC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaXN0LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJzZWFyY2hNb2RhbFwiLFxuICAgIFwic2VhcmNoSW5wdXRcIixcbiAgICBcInNlYXJjaERpc3BsYXlcIixcbiAgICBcImhvdFNlYXJjaENvbnRlbnRcIiwgXCJob3RTZWFyY2hJY29uXCIsXG4gICAgXCJob3RCcmFuZENvbnRlbnRcIiwgXCJob3RCcmFuZEljb25cIixcbiAgICBcImhvdExvY2F0aW9uQ29udGVudFwiLCBcImhvdExvY2F0aW9uSWNvblwiLFxuICAgIFwibWV0cm9Db250ZW50XCIsIFwibWV0cm9JY29uXCIsXG4gICAgXCJhaXJwb3J0Q29udGVudFwiLCBcImFpcnBvcnRJY29uXCIsXG4gICAgXCJhdHRyYWN0aW9uQ29udGVudFwiLCBcImF0dHJhY3Rpb25JY29uXCIsXG4gICAgXCJ0aGVtZUNvbnRlbnRcIiwgXCJ0aGVtZUljb25cIixcbiAgICBcImhvc3BpdGFsQ29udGVudFwiLCBcImhvc3BpdGFsSWNvblwiLFxuICAgIFwidW5pdmVyc2l0eUNvbnRlbnRcIiwgXCJ1bml2ZXJzaXR5SWNvblwiLFxuICAgIFwiY2l0eUlucHV0XCIsXG4gICAgXCJjaGVja0luSW5wdXRcIixcbiAgICBcImNoZWNrT3V0SW5wdXRcIixcbiAgICBcInJvb21zSW5wdXRcIixcbiAgICBcImFkdWx0c0lucHV0XCIsXG4gICAgXCJjaGlsZHJlbklucHV0XCIsXG4gICAgXCJtaW5QcmljZUlucHV0XCIsXG4gICAgXCJtYXhQcmljZUlucHV0XCIsXG4gICAgXCJzdGFyc0lucHV0XCJcbiAgXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VhcmNoTW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VhcmNoSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNTZWFyY2hEaXNwbGF5VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VhcmNoRGlzcGxheVRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhvdFNlYXJjaENvbnRlbnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaG90U2VhcmNoSWNvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBob3RCcmFuZENvbnRlbnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaG90QnJhbmRJY29uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhvdExvY2F0aW9uQ29udGVudFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBob3RMb2NhdGlvbkljb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbWV0cm9Db250ZW50VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IG1ldHJvSWNvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBhaXJwb3J0Q29udGVudFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBhaXJwb3J0SWNvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBhdHRyYWN0aW9uQ29udGVudFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBhdHRyYWN0aW9uSWNvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0aGVtZUNvbnRlbnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdGhlbWVJY29uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhvc3BpdGFsQ29udGVudFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBob3NwaXRhbEljb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdW5pdmVyc2l0eUNvbnRlbnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdW5pdmVyc2l0eUljb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQ2l0eUlucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2l0eUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQ2hlY2tJbklucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hlY2tJbklucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQ2hlY2tPdXRJbnB1dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGNoZWNrT3V0SW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNSb29tc0lucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgcm9vbXNJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0FkdWx0c0lucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgYWR1bHRzSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNDaGlsZHJlbklucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hpbGRyZW5JbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc01pblByaWNlSW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBtaW5QcmljZUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzTWF4UHJpY2VJbnB1dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IG1heFByaWNlSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNTdGFyc0lucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgc3RhcnNJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJIb3RlbFNlYXJjaCBjb25uZWN0ZWRcIilcbiAgICAvLyBMaXN0ZW4gZm9yIGNpdHktc2VsZWN0b3IgdXBkYXRlc1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NpdHktc2VsZWN0b3I6Y2l0eS1zZWxlY3RlZC1mb3ItaG90ZWwnLCB0aGlzLmhhbmRsZUNpdHlVcGRhdGUuYmluZCh0aGlzKSlcbiAgICAvLyBMaXN0ZW4gZm9yIGRhdGUtcGlja2VyIHVwZGF0ZXNcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdob3RlbC1kYXRlLXBpY2tlcjpkYXRlcy1zZWxlY3RlZCcsIHRoaXMuaGFuZGxlRGF0ZVVwZGF0ZS5iaW5kKHRoaXMpKVxuICAgIC8vIExpc3RlbiBmb3IgZ3Vlc3Qtc2VsZWN0b3IgdXBkYXRlc1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2hvdGVsLWd1ZXN0LXNlbGVjdG9yOmd1ZXN0cy11cGRhdGVkJywgdGhpcy5oYW5kbGVHdWVzdFVwZGF0ZS5iaW5kKHRoaXMpKVxuICAgIC8vIExpc3RlbiBmb3IgcHJpY2UtZmlsdGVyIHVwZGF0ZXNcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdob3RlbC1wcmljZS1maWx0ZXI6ZmlsdGVyLXVwZGF0ZWQnLCB0aGlzLmhhbmRsZVByaWNlRmlsdGVyVXBkYXRlLmJpbmQodGhpcykpXG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiSG90ZWxTZWFyY2ggZGlzY29ubmVjdGVkXCIpXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2l0eS1zZWxlY3RvcjpjaXR5LXNlbGVjdGVkLWZvci1ob3RlbCcsIHRoaXMuaGFuZGxlQ2l0eVVwZGF0ZS5iaW5kKHRoaXMpKVxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2hvdGVsLWRhdGUtcGlja2VyOmRhdGVzLXNlbGVjdGVkJywgdGhpcy5oYW5kbGVEYXRlVXBkYXRlLmJpbmQodGhpcykpXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignaG90ZWwtZ3Vlc3Qtc2VsZWN0b3I6Z3Vlc3RzLXVwZGF0ZWQnLCB0aGlzLmhhbmRsZUd1ZXN0VXBkYXRlLmJpbmQodGhpcykpXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignaG90ZWwtcHJpY2UtZmlsdGVyOmZpbHRlci11cGRhdGVkJywgdGhpcy5oYW5kbGVQcmljZUZpbHRlclVwZGF0ZS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgLy8gSGFuZGxlIGNpdHkgc2VsZWN0aW9uIHVwZGF0ZSBmcm9tIGNpdHktc2VsZWN0b3JcbiAgaGFuZGxlQ2l0eVVwZGF0ZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjdXN0b21FdmVudCA9IGV2ZW50IGFzIEN1c3RvbUV2ZW50XG4gICAgY29uc3QgeyBjaXR5TmFtZSB9ID0gY3VzdG9tRXZlbnQuZGV0YWlsXG4gICAgY29uc29sZS5sb2coJ0hvdGVsU2VhcmNoOiBSZWNlaXZlZCBjaXR5IHVwZGF0ZTonLCBjaXR5TmFtZSlcbiAgICBcbiAgICAvLyBVcGRhdGUgVVJMIHdpdGggbmV3IGNpdHkgYW5kIHJlbG9hZCBwYWdlIHRvIGZldGNoIGNpdHktc3BlY2lmaWMgZGF0YVxuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2NpdHknLCBjaXR5TmFtZSlcbiAgICBcbiAgICBjb25zb2xlLmxvZygnSG90ZWxTZWFyY2g6IFJlbG9hZGluZyBwYWdlIHdpdGggbmV3IGNpdHk6JywgY2l0eU5hbWUpXG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmwudG9TdHJpbmcoKVxuICB9XG5cbiAgLy8gSGFuZGxlIGRhdGUgc2VsZWN0aW9uIHVwZGF0ZSBmcm9tIGhvdGVsLWRhdGUtcGlja2VyXG4gIGhhbmRsZURhdGVVcGRhdGUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY3VzdG9tRXZlbnQgPSBldmVudCBhcyBDdXN0b21FdmVudFxuICAgIGNvbnN0IHsgY2hlY2tJbiwgY2hlY2tPdXQgfSA9IGN1c3RvbUV2ZW50LmRldGFpbFxuICAgIGNvbnNvbGUubG9nKCdIb3RlbFNlYXJjaDogUmVjZWl2ZWQgZGF0ZSB1cGRhdGU6JywgeyBjaGVja0luLCBjaGVja091dCB9KVxuICAgIFxuICAgIGlmICh0aGlzLmhhc0NoZWNrSW5JbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5jaGVja0luSW5wdXRUYXJnZXQudmFsdWUgPSBjaGVja0luXG4gICAgICBjb25zb2xlLmxvZygnSG90ZWxTZWFyY2g6IFVwZGF0ZWQgY2hlY2staW4gdG86JywgY2hlY2tJbilcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuaGFzQ2hlY2tPdXRJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5jaGVja091dElucHV0VGFyZ2V0LnZhbHVlID0gY2hlY2tPdXRcbiAgICAgIGNvbnNvbGUubG9nKCdIb3RlbFNlYXJjaDogVXBkYXRlZCBjaGVjay1vdXQgdG86JywgY2hlY2tPdXQpXG4gICAgfVxuICB9XG5cbiAgLy8gSGFuZGxlIGd1ZXN0IHNlbGVjdGlvbiB1cGRhdGUgZnJvbSBob3RlbC1ndWVzdC1zZWxlY3RvclxuICBoYW5kbGVHdWVzdFVwZGF0ZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjdXN0b21FdmVudCA9IGV2ZW50IGFzIEN1c3RvbUV2ZW50XG4gICAgY29uc3QgeyByb29tcywgYWR1bHRzLCBjaGlsZHJlbiB9ID0gY3VzdG9tRXZlbnQuZGV0YWlsXG4gICAgY29uc29sZS5sb2coJ0hvdGVsU2VhcmNoOiBSZWNlaXZlZCBndWVzdCB1cGRhdGU6JywgeyByb29tcywgYWR1bHRzLCBjaGlsZHJlbiB9KVxuICAgIFxuICAgIGlmICh0aGlzLmhhc1Jvb21zSW5wdXRUYXJnZXQpIHtcbiAgICAgIHRoaXMucm9vbXNJbnB1dFRhcmdldC52YWx1ZSA9IHJvb21zLnRvU3RyaW5nKClcbiAgICAgIGNvbnNvbGUubG9nKCdIb3RlbFNlYXJjaDogVXBkYXRlZCByb29tcyB0bzonLCByb29tcylcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuaGFzQWR1bHRzSW5wdXRUYXJnZXQpIHtcbiAgICAgIHRoaXMuYWR1bHRzSW5wdXRUYXJnZXQudmFsdWUgPSBhZHVsdHMudG9TdHJpbmcoKVxuICAgICAgY29uc29sZS5sb2coJ0hvdGVsU2VhcmNoOiBVcGRhdGVkIGFkdWx0cyB0bzonLCBhZHVsdHMpXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLmhhc0NoaWxkcmVuSW5wdXRUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2hpbGRyZW5JbnB1dFRhcmdldC52YWx1ZSA9IGNoaWxkcmVuLnRvU3RyaW5nKClcbiAgICAgIGNvbnNvbGUubG9nKCdIb3RlbFNlYXJjaDogVXBkYXRlZCBjaGlsZHJlbiB0bzonLCBjaGlsZHJlbilcbiAgICB9XG4gIH1cblxuICAvLyBIYW5kbGUgcHJpY2Uvc3RhciBmaWx0ZXIgdXBkYXRlIGZyb20gaG90ZWwtcHJpY2UtZmlsdGVyXG4gIGhhbmRsZVByaWNlRmlsdGVyVXBkYXRlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnRcbiAgICBjb25zdCB7IG1pblByaWNlLCBtYXhQcmljZSwgc3RhcnMgfSA9IGN1c3RvbUV2ZW50LmRldGFpbFxuICAgIGNvbnNvbGUubG9nKCdIb3RlbFNlYXJjaDogUmVjZWl2ZWQgcHJpY2UgZmlsdGVyIHVwZGF0ZTonLCB7IG1pblByaWNlLCBtYXhQcmljZSwgc3RhcnMgfSlcbiAgICBcbiAgICBpZiAodGhpcy5oYXNNaW5QcmljZUlucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLm1pblByaWNlSW5wdXRUYXJnZXQudmFsdWUgPSBtaW5QcmljZSA+IDAgPyBtaW5QcmljZS50b1N0cmluZygpIDogJydcbiAgICAgIGNvbnNvbGUubG9nKCdIb3RlbFNlYXJjaDogVXBkYXRlZCBtaW5QcmljZSB0bzonLCBtaW5QcmljZSlcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuaGFzTWF4UHJpY2VJbnB1dFRhcmdldCkge1xuICAgICAgLy8gT25seSBzZXQgbWF4UHJpY2UgaWYgaXQncyBsZXNzIHRoYW4gMzAwMCAobm90IHRoZSBkZWZhdWx0IG1heCB2YWx1ZSlcbiAgICAgIHRoaXMubWF4UHJpY2VJbnB1dFRhcmdldC52YWx1ZSA9IChtYXhQcmljZSA+IDAgJiYgbWF4UHJpY2UgPCAzMDAwKSA/IG1heFByaWNlLnRvU3RyaW5nKCkgOiAnJ1xuICAgICAgY29uc29sZS5sb2coJ0hvdGVsU2VhcmNoOiBVcGRhdGVkIG1heFByaWNlIHRvOicsIG1heFByaWNlIDwgMzAwMCA/IG1heFByaWNlIDogJ2VtcHR5IChubyBsaW1pdCknKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5oYXNTdGFyc0lucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLnN0YXJzSW5wdXRUYXJnZXQudmFsdWUgPSBzdGFycyA+IDAgPyBzdGFycy50b1N0cmluZygpIDogJydcbiAgICAgIGNvbnNvbGUubG9nKCdIb3RlbFNlYXJjaDogVXBkYXRlZCBzdGFycyB0bzonLCBzdGFycylcbiAgICB9XG4gIH1cblxuICBvcGVuU2VhcmNoTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5zZWFyY2hNb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnNlYXJjaElucHV0VGFyZ2V0LmZvY3VzKClcbiAgICB9LCAxMDApXG4gIH1cblxuICBjbG9zZVNlYXJjaE1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMuc2VhcmNoTW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICB9XG5cbiAgc3VibWl0U2VhcmNoKCk6IHZvaWQge1xuICAgIGNvbnN0IGZvcm0gPSB0aGlzLnNlYXJjaElucHV0VGFyZ2V0LmNsb3Nlc3QoXCJmb3JtXCIpIGFzIEhUTUxGb3JtRWxlbWVudFxuICAgIGlmIChmb3JtKSB7XG4gICAgICAvLyBBbHdheXMgc3VibWl0IHRoZSBmb3JtLCBldmVuIGlmIGlucHV0IGlzIGVtcHR5XG4gICAgICBmb3JtLnJlcXVlc3RTdWJtaXQoKVxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZVNlYXJjaElucHV0S2V5cHJlc3MoZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgIHRoaXMuc3VibWl0U2VhcmNoKClcbiAgICB9XG4gIH1cblxuICB0b2dnbGVTZWN0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBzZWN0aW9uID0gYnV0dG9uLmRhdGFzZXQuc2VjdGlvblxuICAgIFxuICAgIGlmICghc2VjdGlvbikgcmV0dXJuXG5cbiAgICBjb25zdCBjb250ZW50VGFyZ2V0ID0gYCR7c2VjdGlvbn1Db250ZW50VGFyZ2V0YCBhcyBrZXlvZiB0aGlzXG4gICAgY29uc3QgaWNvblRhcmdldCA9IGAke3NlY3Rpb259SWNvblRhcmdldGAgYXMga2V5b2YgdGhpc1xuXG4gICAgY29uc3QgY29udGVudCA9IHRoaXNbY29udGVudFRhcmdldF0gYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBpY29uID0gdGhpc1tpY29uVGFyZ2V0XSBhcyBIVE1MRWxlbWVudFxuXG4gICAgaWYgKGNvbnRlbnQgJiYgaWNvbikge1xuICAgICAgY29udGVudC5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpXG4gICAgICBpY29uLmNsYXNzTGlzdC50b2dnbGUoXCJyb3RhdGUtMTgwXCIpXG4gICAgfVxuICB9XG5cbiAgb3BlbkNpdHlTZWxlY3RvcigpOiB2b2lkIHtcbiAgICBhbGVydChcIlx1NTdDRVx1NUUwMlx1OTAwOVx1NjJFOVx1NTI5Rlx1ODBGRFx1RkYxQVxcblxcblx1NTcyOFx1NUI4Q1x1NjU3NFx1NzI0OFx1NjcyQ1x1NEUyRFx1RkYwQ1x1OEZEOVx1OTFDQ1x1NEYxQVx1NjI1M1x1NUYwMFx1NTdDRVx1NUUwMlx1OTAwOVx1NjJFOVx1NTY2OFx1MzAwMlxcblxcblx1NUY1M1x1NTI0RFx1NTdDRVx1NUUwMlx1RkYxQVx1NkRGMVx1NTczM1x1NUUwMlwiKVxuICB9XG5cbiAgb3Blbkd1ZXN0U2VsZWN0b3IoKTogdm9pZCB7XG4gICAgY29uc3Qgcm9vbXMgPSBwcm9tcHQoXCJcdThCRjdcdThGOTNcdTUxNjVcdTYyM0ZcdTk1RjRcdTY1NzBcdTkxQ0ZcIiwgXCIxXCIpXG4gICAgY29uc3QgYWR1bHRzID0gcHJvbXB0KFwiXHU4QkY3XHU4RjkzXHU1MTY1XHU2MjEwXHU0RUJBXHU2NTcwXHU5MUNGXCIsIFwiMVwiKVxuICAgIGNvbnN0IGNoaWxkcmVuID0gcHJvbXB0KFwiXHU4QkY3XHU4RjkzXHU1MTY1XHU1MTNGXHU3QUU1XHU2NTcwXHU5MUNGXCIsIFwiMFwiKVxuICAgIFxuICAgIGlmIChyb29tcyAmJiBhZHVsdHMpIHtcbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpXG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgncm9vbXMnLCByb29tcylcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdhZHVsdHMnLCBhZHVsdHMpXG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnY2hpbGRyZW4nLCBjaGlsZHJlbiB8fCAnMCcpXG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybC50b1N0cmluZygpXG4gICAgfVxuICB9XG5cbiAgZ2V0Q3VycmVudExvY2F0aW9uKCk6IHZvaWQge1xuICAgIGlmICghbmF2aWdhdG9yLmdlb2xvY2F0aW9uKSB7XG4gICAgICBhbGVydCgnXHU2MEE4XHU3Njg0XHU2RDRGXHU4OUM4XHU1NjY4XHU0RTBEXHU2NTJGXHU2MzAxXHU1NzMwXHU3NDA2XHU1QjlBXHU0RjREXHU1MjlGXHU4MEZEJylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50Py5jdXJyZW50VGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50XG4gICAgaWYgKGJ1dHRvbikge1xuICAgICAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZVxuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktNTAnKVxuICAgIH1cblxuICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oXG4gICAgICAocG9zaXRpb24pID0+IHtcbiAgICAgICAgY29uc3QgeyBsYXRpdHVkZSwgbG9uZ2l0dWRlIH0gPSBwb3NpdGlvbi5jb29yZHNcbiAgICAgICAgY29uc29sZS5sb2coJ0dvdCBsb2NhdGlvbjonLCB7IGxhdGl0dWRlLCBsb25naXR1ZGUgfSlcbiAgICAgICAgXG4gICAgICAgIC8vIEluIGEgcmVhbCBhcHAsIHlvdSB3b3VsZCByZXZlcnNlIGdlb2NvZGUgdGhlc2UgY29vcmRpbmF0ZXMgdG8gZ2V0IHRoZSBjaXR5IG5hbWVcbiAgICAgICAgLy8gRm9yIG5vdywgd2UnbGwgc2hvdyB0aGUgY29vcmRpbmF0ZXMgYW5kIGFsZXJ0IHRoZSB1c2VyXG4gICAgICAgIGFsZXJ0KGBcdTgzQjdcdTUzRDZcdTUyMzBcdTYwQThcdTc2ODRcdTRGNERcdTdGNkVcdUZGMUFcXG5cdTdFQUNcdTVFQTY6ICR7bGF0aXR1ZGUudG9GaXhlZCg2KX1cXG5cdTdFQ0ZcdTVFQTY6ICR7bG9uZ2l0dWRlLnRvRml4ZWQoNil9XFxuXFxuXHU1NzI4XHU1QjhDXHU2NTc0XHU3MjQ4XHU2NzJDXHU0RTJEXHVGRjBDXHU4RkQ5XHU5MUNDXHU0RjFBXHU4MUVBXHU1MkE4XHU5MDA5XHU2MkU5XHU2NzAwXHU4RkQxXHU3Njg0XHU1N0NFXHU1RTAyYClcbiAgICAgICAgXG4gICAgICAgIGlmIChidXR0b24pIHtcbiAgICAgICAgICBidXR0b24uZGlzYWJsZWQgPSBmYWxzZVxuICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdvcGFjaXR5LTUwJylcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIChlcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdHZW9sb2NhdGlvbiBlcnJvcjonLCBlcnJvcilcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSAnXHU2NUUwXHU2Q0Q1XHU4M0I3XHU1M0Q2XHU2MEE4XHU3Njg0XHU0RjREXHU3RjZFJ1xuICAgICAgICBcbiAgICAgICAgc3dpdGNoIChlcnJvci5jb2RlKSB7XG4gICAgICAgICAgY2FzZSBlcnJvci5QRVJNSVNTSU9OX0RFTklFRDpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSAnXHU2MEE4XHU2MkQyXHU3RUREXHU0RTg2XHU0RjREXHU3RjZFXHU2NzQzXHU5NjUwXHU4QkY3XHU2QzQyXHUzMDAyXHU4QkY3XHU1NzI4XHU2RDRGXHU4OUM4XHU1NjY4XHU4QkJFXHU3RjZFXHU0RTJEXHU1MTQxXHU4QkI4XHU4QkJGXHU5NUVFXHU0RjREXHU3RjZFXHU0RkUxXHU2MDZGXHUzMDAyJ1xuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlIGVycm9yLlBPU0lUSU9OX1VOQVZBSUxBQkxFOlxuICAgICAgICAgICAgbWVzc2FnZSA9ICdcdTRGNERcdTdGNkVcdTRGRTFcdTYwNkZcdTRFMERcdTUzRUZcdTc1MjhcdUZGMENcdThCRjdcdTY4QzBcdTY3RTVcdTYwQThcdTc2ODRcdTdGNTFcdTdFRENcdThGREVcdTYzQTVcdTMwMDInXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgZXJyb3IuVElNRU9VVDpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSAnXHU4M0I3XHU1M0Q2XHU0RjREXHU3RjZFXHU0RkUxXHU2MDZGXHU4RDg1XHU2NUY2XHVGRjBDXHU4QkY3XHU5MUNEXHU4QkQ1XHUzMDAyJ1xuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgYWxlcnQobWVzc2FnZSlcbiAgICAgICAgXG4gICAgICAgIGlmIChidXR0b24pIHtcbiAgICAgICAgICBidXR0b24uZGlzYWJsZWQgPSBmYWxzZVxuICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdvcGFjaXR5LTUwJylcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgZW5hYmxlSGlnaEFjY3VyYWN5OiB0cnVlLFxuICAgICAgICB0aW1lb3V0OiAxMDAwMCxcbiAgICAgICAgbWF4aW11bUFnZTogMFxuICAgICAgfVxuICAgIClcbiAgfVxuXG4gIHNlbGVjdE9wdGlvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50XG4gICAgY29uc3Qgc2VhcmNoVGVybSA9IGJ1dHRvbi5kYXRhc2V0LnNlYXJjaFRlcm1cbiAgICBcbiAgICBpZiAoIXNlYXJjaFRlcm0pIHJldHVyblxuXG4gICAgY29uc29sZS5sb2coJ0hvdGVsU2VhcmNoOiBTZWxlY3RlZCBvcHRpb246Jywgc2VhcmNoVGVybSlcblxuICAgIC8vIFVwZGF0ZSB0aGUgc2VhcmNoIGlucHV0IHZhbHVlXG4gICAgdGhpcy5zZWFyY2hJbnB1dFRhcmdldC52YWx1ZSA9IHNlYXJjaFRlcm1cblxuICAgIC8vIFVwZGF0ZSB0aGUgc2VhcmNoIGRpc3BsYXkgaW5wdXQgaWYgaXQgZXhpc3RzXG4gICAgaWYgKHRoaXMuaGFzU2VhcmNoRGlzcGxheVRhcmdldCkge1xuICAgICAgdGhpcy5zZWFyY2hEaXNwbGF5VGFyZ2V0LnZhbHVlID0gc2VhcmNoVGVybVxuICAgICAgY29uc29sZS5sb2coJ0hvdGVsU2VhcmNoOiBVcGRhdGVkIHNlYXJjaCBkaXNwbGF5IHRvOicsIHNlYXJjaFRlcm0pXG4gICAgfVxuXG4gICAgLy8gQ2xvc2UgdGhlIHNlYXJjaCBtb2RhbFxuICAgIHRoaXMuY2xvc2VTZWFyY2hNb2RhbCgpXG5cbiAgICAvLyBTdWJtaXQgdGhlIHNlYXJjaCBmb3JtIGRpcmVjdGx5XG4gICAgdGhpcy5zdWJtaXRTZWFyY2goKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJ0YWJCdXR0b25cIiwgXCJ0YWJDb250ZW50XCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgLy8gQWRkIHlvdXIgdmFsdWVzIGhlcmUsIGUuZy46XG4gICAgLy8gcm9vbUlkOiBTdHJpbmcsXG4gICAgLy8gdXNlcklkOiBTdHJpbmdcbiAgfVxuXG4gIC8vIERlY2xhcmUgeW91ciB0YXJnZXRzIGFuZCB2YWx1ZXNcbiAgZGVjbGFyZSByZWFkb25seSB0YWJCdXR0b25UYXJnZXRzOiBIVE1MQnV0dG9uRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgdGFiQ29udGVudFRhcmdldHM6IEhUTUxEaXZFbGVtZW50W11cbiAgXG4gIHByaXZhdGUgY3VycmVudFRhYiA9ICdjb3ZlcidcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiSG90ZWxEZXRhaWwgY29ubmVjdGVkXCIpXG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiSG90ZWxEZXRhaWwgZGlzY29ubmVjdGVkXCIpXG4gIH1cblxuICAvLyBUYWIgc3dpdGNoaW5nIGZ1bmN0aW9uYWxpdHlcbiAgc3dpdGNoVGFiKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBjb25zdCB0YWJOYW1lID0gYnV0dG9uLmRhdGFzZXQudGFiXG4gICAgaWYgKCF0YWJOYW1lIHx8IHRhYk5hbWUgPT09IHRoaXMuY3VycmVudFRhYikgcmV0dXJuXG4gICAgXG4gICAgLy8gVXBkYXRlIGJ1dHRvbiBzdGF0ZXNcbiAgICB0aGlzLnRhYkJ1dHRvblRhcmdldHMuZm9yRWFjaChidG4gPT4ge1xuICAgICAgaWYgKGJ0bi5kYXRhc2V0LnRhYiA9PT0gdGFiTmFtZSkge1xuICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTUwMCcsICdib3JkZXItdHJhbnNwYXJlbnQnKVxuICAgICAgICBidG4uY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTkwMCcsICdib3JkZXItb3JhbmdlLTUwMCcpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTkwMCcsICdib3JkZXItb3JhbmdlLTUwMCcpXG4gICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktNTAwJywgJ2JvcmRlci10cmFuc3BhcmVudCcpXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICAvLyBVcGRhdGUgY29udGVudCB2aXNpYmlsaXR5XG4gICAgdGhpcy50YWJDb250ZW50VGFyZ2V0cy5mb3JFYWNoKGNvbnRlbnQgPT4ge1xuICAgICAgaWYgKGNvbnRlbnQuZGF0YXNldC50YWIgPT09IHRhYk5hbWUpIHtcbiAgICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5hZGQoJ2Jsb2NrJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnYmxvY2snKVxuICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICB0aGlzLmN1cnJlbnRUYWIgPSB0YWJOYW1lXG4gIH1cblxuICAvLyBGT1JNUzogVHVyYm8gKyBUdXJibyBTdHJlYW1zIGhhbmRsZSBldmVyeXRoaW5nIGF1dG9tYXRpY2FsbHlcbiAgLy8gLSBGb3JtcyBzdWJtaXQgdmlhIEFKQVggKFR1cmJvIERyaXZlKVxuICAvLyAtIFNlcnZlciByZXNwb25kcyB3aXRoIGZvcm1hdC50dXJib19zdHJlYW1cbiAgLy8gLSBUdXJibyBTdHJlYW1zIHVwZGF0ZSBET00gYXV0b21hdGljYWxseVxuICAvLyAtIE5PIG1hbnVhbCBmb3JtIGhhbmRsaW5nIG5lZWRlZCBpbiBTdGltdWx1c1xuICAvL1xuICAvLyBVc2UgU3RpbXVsdXMgZm9yOlxuICAvLyAtIFVJIGludGVyYWN0aW9ucyAodG9nZ2xlLCBzaG93L2hpZGUpXG4gIC8vIC0gSW5wdXQgdmFsaWRhdGlvbi9mb3JtYXR0aW5nXG4gIC8vIC0gRHluYW1pYyBmb3JtIGZpZWxkc1xufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wicGFnZVwiLCBcImRvdFwiXVxuICBcbiAgZGVjbGFyZSByZWFkb25seSBwYWdlVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IGRvdFRhcmdldHM6IEhUTUxFbGVtZW50W11cblxuICBwcml2YXRlIGN1cnJlbnRQYWdlOiBudW1iZXIgPSAwXG4gIHByaXZhdGUgdG91Y2hTdGFydFg6IG51bWJlciA9IDBcbiAgcHJpdmF0ZSB0b3VjaEVuZFg6IG51bWJlciA9IDBcbiAgcHJpdmF0ZSBtaW5Td2lwZURpc3RhbmNlOiBudW1iZXIgPSA1MCAvLyBcdTY3MDBcdTVDMEZcdTZFRDFcdTUyQThcdThERERcdTc5QkJcdUZGMDhcdTUwQ0ZcdTdEMjBcdUZGMDlcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIHRoaXMuc2hvd1BhZ2UoMClcbiAgICAvLyBcdTZERkJcdTUyQTBcdTg5RTZcdTY0NzhcdTRFOEJcdTRFRjZcdTc2RDFcdTU0MkNcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuaGFuZGxlVG91Y2hTdGFydC5iaW5kKHRoaXMpLCB7IHBhc3NpdmU6IHRydWUgfSlcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLmhhbmRsZVRvdWNoRW5kLmJpbmQodGhpcyksIHsgcGFzc2l2ZTogdHJ1ZSB9KVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICAvLyBcdTZFMDVcdTc0MDZcdTRFOEJcdTRFRjZcdTc2RDFcdTU0MkNcbiAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuaGFuZGxlVG91Y2hTdGFydC5iaW5kKHRoaXMpKVxuICAgIHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuaGFuZGxlVG91Y2hFbmQuYmluZCh0aGlzKSlcbiAgfVxuXG4gIC8vIFx1NTkwNFx1NzQwNlx1ODlFNlx1NjQ3OFx1NUYwMFx1NTlDQlxuICBwcml2YXRlIGhhbmRsZVRvdWNoU3RhcnQoZXZlbnQ6IFRvdWNoRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLnRvdWNoU3RhcnRYID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uc2NyZWVuWFxuICB9XG5cbiAgLy8gXHU1OTA0XHU3NDA2XHU4OUU2XHU2NDc4XHU3RUQzXHU2NzVGXG4gIHByaXZhdGUgaGFuZGxlVG91Y2hFbmQoZXZlbnQ6IFRvdWNoRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLnRvdWNoRW5kWCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnNjcmVlblhcbiAgICB0aGlzLmhhbmRsZVN3aXBlKClcbiAgfVxuXG4gIC8vIFx1NTkwNFx1NzQwNlx1NkVEMVx1NTJBOFx1OTAzQlx1OEY5MVxuICBwcml2YXRlIGhhbmRsZVN3aXBlKCk6IHZvaWQge1xuICAgIGNvbnN0IHN3aXBlRGlzdGFuY2UgPSB0aGlzLnRvdWNoRW5kWCAtIHRoaXMudG91Y2hTdGFydFhcbiAgICBcbiAgICAvLyBcdTU0MTFcdTVERTZcdTZFRDFcdTUyQThcdUZGMDhcdTRFMEJcdTRFMDBcdTk4NzVcdUZGMDlcbiAgICBpZiAoc3dpcGVEaXN0YW5jZSA8IC10aGlzLm1pblN3aXBlRGlzdGFuY2UpIHtcbiAgICAgIHRoaXMubmV4dFBhZ2UoKVxuICAgIH1cbiAgICAvLyBcdTU0MTFcdTUzRjNcdTZFRDFcdTUyQThcdUZGMDhcdTRFMEFcdTRFMDBcdTk4NzVcdUZGMDlcbiAgICBlbHNlIGlmIChzd2lwZURpc3RhbmNlID4gdGhpcy5taW5Td2lwZURpc3RhbmNlKSB7XG4gICAgICB0aGlzLnByZXZQYWdlKClcbiAgICB9XG4gIH1cblxuICBnb1RvUGFnZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgcGFnZUluZGV4ID0gcGFyc2VJbnQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1wYWdlJykgfHwgJzAnLCAxMClcbiAgICBpZiAocGFnZUluZGV4ID49IDAgJiYgcGFnZUluZGV4IDwgdGhpcy5wYWdlVGFyZ2V0cy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuc2hvd1BhZ2UocGFnZUluZGV4KVxuICAgIH1cbiAgfVxuXG4gIG5leHRQYWdlKCk6IHZvaWQge1xuICAgIGNvbnN0IG5leHRJbmRleCA9ICh0aGlzLmN1cnJlbnRQYWdlICsgMSkgJSB0aGlzLnBhZ2VUYXJnZXRzLmxlbmd0aFxuICAgIHRoaXMuc2hvd1BhZ2UobmV4dEluZGV4KVxuICB9XG5cbiAgcHJldlBhZ2UoKTogdm9pZCB7XG4gICAgY29uc3QgcHJldkluZGV4ID0gKHRoaXMuY3VycmVudFBhZ2UgLSAxICsgdGhpcy5wYWdlVGFyZ2V0cy5sZW5ndGgpICUgdGhpcy5wYWdlVGFyZ2V0cy5sZW5ndGhcbiAgICB0aGlzLnNob3dQYWdlKHByZXZJbmRleClcbiAgfVxuXG4gIHByaXZhdGUgc2hvd1BhZ2UocGFnZUluZGV4OiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBIaWRlIGFsbCBwYWdlc1xuICAgIHRoaXMucGFnZVRhcmdldHMuZm9yRWFjaCgocGFnZSwgaW5kZXgpID0+IHtcbiAgICAgIGlmIChpbmRleCA9PT0gcGFnZUluZGV4KSB7XG4gICAgICAgIHBhZ2UuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFnZS5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIFVwZGF0ZSBkb3RzXG4gICAgdGhpcy5kb3RUYXJnZXRzLmZvckVhY2goKGRvdCwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvdCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgICAgaWYgKGluZGV4ID09PSBwYWdlSW5kZXgpIHtcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1ncmF5LTMwMFwiLCBcInctMS41XCIsIFwiaC0xLjVcIilcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJ3LTZcIiwgXCJoLTFcIilcbiAgICAgICAgYnV0dG9uLnN0eWxlLmJhY2tncm91bmQgPSBcIiNGRkQ3MDBcIlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJ3LTZcIiwgXCJoLTFcIilcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJiZy1ncmF5LTMwMFwiLCBcInctMS41XCIsIFwiaC0xLjVcIilcbiAgICAgICAgYnV0dG9uLnN0eWxlLmJhY2tncm91bmQgPSBcIlwiXG4gICAgICB9XG4gICAgfSlcblxuICAgIHRoaXMuY3VycmVudFBhZ2UgPSBwYWdlSW5kZXhcbiAgfVxufVxuXG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXIge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcIm1vZGFsXCIsXG4gICAgXCJtb2RhbFRpdGxlXCIsXG4gICAgXCJzZWxlY3RlZERpc3BsYXlcIixcbiAgICBcInBhc3NlbmdlclRhYlwiLFxuICAgIFwiY291bnRUYWJcIixcbiAgICBcInBhc3Nlbmdlckxpc3RQYW5lbFwiLFxuICAgIFwiY291bnRQYW5lbFwiLFxuICAgIFwiYWR1bHRzQ291bnRcIixcbiAgICBcImNoaWxkcmVuQ291bnRcIixcbiAgICBcImluZmFudHNDb3VudFwiLFxuICAgIFwiY291bnRcIixcbiAgICBcIm5hbWVcIixcbiAgICBcImlkVHlwZVwiLFxuICAgIFwiaWROdW1iZXJcIixcbiAgICBcInBob25lXCIsXG4gICAgXCJkcml2ZXJOYW1lXCIsXG4gICAgXCJkcml2ZXJJZE51bWJlclwiLFxuICAgIFwiY29udGFjdFBob25lXCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgc2VsZWN0ZWRJZDogTnVtYmVyXG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IG1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc01vZGFsVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbW9kYWxUaXRsZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNNb2RhbFRpdGxlVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VsZWN0ZWREaXNwbGF5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlbGVjdGVkRGlzcGxheVRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBoYXNTZWxlY3RlZERpc3BsYXlUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBwYXNzZW5nZXJUYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUGFzc2VuZ2VyVGFiVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY291bnRUYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQ291bnRUYWJUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBwYXNzZW5nZXJMaXN0UGFuZWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUGFzc2VuZ2VyTGlzdFBhbmVsVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY291bnRQYW5lbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNDb3VudFBhbmVsVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgYWR1bHRzQ291bnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQWR1bHRzQ291bnRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBjaGlsZHJlbkNvdW50VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0NoaWxkcmVuQ291bnRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBpbmZhbnRzQ291bnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzSW5mYW50c0NvdW50VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY291bnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQ291bnRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBuYW1lVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc05hbWVUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBpZFR5cGVUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzSWRUeXBlVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaWROdW1iZXJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzSWROdW1iZXJUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBwaG9uZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNQaG9uZVRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGRyaXZlck5hbWVUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzRHJpdmVyTmFtZVRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGRyaXZlcklkTnVtYmVyVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0RyaXZlcklkTnVtYmVyVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY29udGFjdFBob25lVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0NvbnRhY3RQaG9uZVRhcmdldDogYm9vbGVhblxuXG4gIGRlY2xhcmUgc2VsZWN0ZWRJZFZhbHVlOiBudW1iZXJcbiAgZGVjbGFyZSByZWFkb25seSBoYXNTZWxlY3RlZElkVmFsdWU6IGJvb2xlYW5cblxuICBwcml2YXRlIGFkdWx0czogbnVtYmVyID0gMFxuICBwcml2YXRlIGNoaWxkcmVuOiBudW1iZXIgPSAwXG4gIHByaXZhdGUgaW5mYW50czogbnVtYmVyID0gMFxuICBwcml2YXRlIHNlbGVjdGVkUGFzc2VuZ2VySWRzOiBTZXQ8bnVtYmVyPiA9IG5ldyBTZXQoKVxuICBwcml2YXRlIHNlbGVjdGVkUGFzc2VuZ2VyTmFtZXM6IE1hcDxudW1iZXIsIHN0cmluZz4gPSBuZXcgTWFwKClcbiAgcHJpdmF0ZSBoYXNTZWxlY3Rpb246IGJvb2xlYW4gPSBmYWxzZVxuXG4gIC8vIEJhY2t1cCBvZiBjb25maXJtZWQgc3RhdGVcbiAgcHJpdmF0ZSBjb25maXJtZWRBZHVsdHM6IG51bWJlciA9IDBcbiAgcHJpdmF0ZSBjb25maXJtZWRDaGlsZHJlbjogbnVtYmVyID0gMFxuICBwcml2YXRlIGNvbmZpcm1lZEluZmFudHM6IG51bWJlciA9IDBcbiAgcHJpdmF0ZSBjb25maXJtZWRQYXNzZW5nZXJJZHM6IFNldDxudW1iZXI+ID0gbmV3IFNldCgpXG4gIHByaXZhdGUgY29uZmlybWVkUGFzc2VuZ2VyTmFtZXM6IE1hcDxudW1iZXIsIHN0cmluZz4gPSBuZXcgTWFwKClcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIExvYWQgc2F2ZWQgc3RhdGUgZnJvbSBsb2NhbFN0b3JhZ2VcbiAgICB0aGlzLmxvYWRGcm9tTG9jYWxTdG9yYWdlKClcbiAgICAvLyBVcGRhdGUgZGlzcGxheSBpZiB0aGVyZSdzIGEgc2F2ZWQgc2VsZWN0aW9uXG4gICAgaWYgKHRoaXMuaGFzU2VsZWN0aW9uKSB7XG4gICAgICB0aGlzLnVwZGF0ZURpc3BsYXkoKVxuICAgIH1cbiAgfVxuXG4gIG9wZW5Nb2RhbChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBcbiAgICAvLyBPbmx5IG9wZW4gbW9kYWwgaWYgaXQgZXhpc3RzIChub3QgbmVlZGVkIGZvciB2aXNhIG9yZGVyIHNpbXBsZSArLy0gbW9kZSlcbiAgICBpZiAoIXRoaXMuaGFzTW9kYWxUYXJnZXQpIHJldHVyblxuICAgIFxuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiXG4gICAgXG4gICAgLy8gU2hvdyBwYXNzZW5nZXIgbGlzdCBwYW5lbCBieSBkZWZhdWx0IChvbmx5IGlmIHRhYnMgZXhpc3QgLSBmbGlnaHQgYm9va2luZyBtb2RlKVxuICAgIGlmICh0aGlzLmhhc1Bhc3NlbmdlclRhYlRhcmdldCAmJiB0aGlzLmhhc0NvdW50VGFiVGFyZ2V0KSB7XG4gICAgICB0aGlzLnN3aXRjaFRvUGFzc2VuZ2VyVGFiKGV2ZW50KVxuICAgIH1cbiAgICBcbiAgICAvLyBIaWdobGlnaHQgdGhlIHNlbGVjdGVkIHBhc3NlbmdlciBpbiB0aGUgbW9kYWwgKGNhciByZW50YWwgbW9kZSlcbiAgICB0aGlzLmhpZ2hsaWdodFNlbGVjdGVkUGFzc2VuZ2VyKClcbiAgfVxuXG4gIGNsb3NlTW9kYWwoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgXG4gICAgLy8gT25seSBjbG9zZSBtb2RhbCBpZiBpdCBleGlzdHMgKG5vdCBuZWVkZWQgZm9yIHZpc2Egb3JkZXIgc2ltcGxlICsvLSBtb2RlKVxuICAgIGlmICghdGhpcy5oYXNNb2RhbFRhcmdldCkgcmV0dXJuXG4gICAgXG4gICAgLy8gT25seSByZXN0b3JlIHN0YXRlIGlmIHdlIGhhdmUgdGhlIGZ1bGwgbW9kYWwgd2l0aCBwYXNzZW5nZXIgbGlzdFxuICAgIGlmICh0aGlzLmhhc1Bhc3Nlbmdlckxpc3RQYW5lbFRhcmdldCkge1xuICAgICAgLy8gUmVzdG9yZSB0byBjb25maXJtZWQgc3RhdGUgd2hlbiBjbG9zaW5nIHdpdGhvdXQgY29uZmlybWluZ1xuICAgICAgdGhpcy5hZHVsdHMgPSB0aGlzLmNvbmZpcm1lZEFkdWx0c1xuICAgICAgdGhpcy5jaGlsZHJlbiA9IHRoaXMuY29uZmlybWVkQ2hpbGRyZW5cbiAgICAgIHRoaXMuaW5mYW50cyA9IHRoaXMuY29uZmlybWVkSW5mYW50c1xuICAgICAgdGhpcy5zZWxlY3RlZFBhc3NlbmdlcklkcyA9IG5ldyBTZXQodGhpcy5jb25maXJtZWRQYXNzZW5nZXJJZHMpXG4gICAgICB0aGlzLnNlbGVjdGVkUGFzc2VuZ2VyTmFtZXMgPSBuZXcgTWFwKHRoaXMuY29uZmlybWVkUGFzc2VuZ2VyTmFtZXMpXG4gICAgICBcbiAgICAgIC8vIFJlc3RvcmUgY2hlY2tib3ggc3RhdGVzXG4gICAgICBjb25zdCBjaGVja2JveGVzID0gdGhpcy5wYXNzZW5nZXJMaXN0UGFuZWxUYXJnZXQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJylcbiAgICAgIGNoZWNrYm94ZXMuZm9yRWFjaCgoY2hlY2tib3g6IEVsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgY2IgPSBjaGVja2JveCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgICAgIGNvbnN0IHBhc3NlbmdlcklkID0gcGFyc2VJbnQoY2IudmFsdWUpXG4gICAgICAgIGNiLmNoZWNrZWQgPSB0aGlzLmNvbmZpcm1lZFBhc3Nlbmdlcklkcy5oYXMocGFzc2VuZ2VySWQpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBVcGRhdGUgY291bnRlcnMgdG8gc2hvdyBjb25maXJtZWQgdmFsdWVzXG4gICAgICB0aGlzLnVwZGF0ZUNvdW50ZXJzKClcbiAgICB9XG4gICAgXG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiXCJcbiAgfVxuXG4gIHN0b3BQcm9wYWdhdGlvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICB9XG5cbiAgc3dpdGNoVG9QYXNzZW5nZXJUYWIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgXG4gICAgLy8gT25seSB1cGRhdGUgdGFiIHN0eWxlcyBpZiB0YWJzIGV4aXN0IChmbGlnaHQgYm9va2luZyBtb2RlKVxuICAgIGlmICh0aGlzLmhhc1Bhc3NlbmdlclRhYlRhcmdldCAmJiB0aGlzLmhhc0NvdW50VGFiVGFyZ2V0KSB7XG4gICAgICB0aGlzLnBhc3NlbmdlclRhYlRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWJsdWUtNTAwXCIpXG4gICAgICB0aGlzLnBhc3NlbmdlclRhYlRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYm9yZGVyLXRyYW5zcGFyZW50XCIpXG4gICAgICB0aGlzLmNvdW50VGFiVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItYmx1ZS01MDBcIilcbiAgICAgIHRoaXMuY291bnRUYWJUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci10cmFuc3BhcmVudFwiKVxuICAgIH1cbiAgICBcbiAgICAvLyBTaG93IHBhc3NlbmdlciBsaXN0IHBhbmVsLCBoaWRlIGNvdW50IHBhbmVsIChvbmx5IGlmIGJvdGggcGFuZWxzIGV4aXN0KVxuICAgIGlmICh0aGlzLmhhc1Bhc3Nlbmdlckxpc3RQYW5lbFRhcmdldCAmJiB0aGlzLmhhc0NvdW50UGFuZWxUYXJnZXQpIHtcbiAgICAgIHRoaXMucGFzc2VuZ2VyTGlzdFBhbmVsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICAgIHRoaXMuY291bnRQYW5lbFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgfVxuICB9XG5cbiAgc3dpdGNoVG9Db3VudFRhYihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBcbiAgICAvLyBPbmx5IHVwZGF0ZSB0YWIgc3R5bGVzIGlmIHRhYnMgZXhpc3QgKGZsaWdodCBib29raW5nIG1vZGUpXG4gICAgaWYgKHRoaXMuaGFzUGFzc2VuZ2VyVGFiVGFyZ2V0ICYmIHRoaXMuaGFzQ291bnRUYWJUYXJnZXQpIHtcbiAgICAgIHRoaXMuY291bnRUYWJUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ibHVlLTUwMFwiKVxuICAgICAgdGhpcy5jb3VudFRhYlRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYm9yZGVyLXRyYW5zcGFyZW50XCIpXG4gICAgICB0aGlzLnBhc3NlbmdlclRhYlRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYm9yZGVyLWJsdWUtNTAwXCIpXG4gICAgICB0aGlzLnBhc3NlbmdlclRhYlRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLXRyYW5zcGFyZW50XCIpXG4gICAgfVxuICAgIFxuICAgIC8vIFNob3cgY291bnQgcGFuZWwsIGhpZGUgcGFzc2VuZ2VyIGxpc3QgcGFuZWwgKG9ubHkgaWYgYm90aCBwYW5lbHMgZXhpc3QpXG4gICAgaWYgKHRoaXMuaGFzUGFzc2VuZ2VyTGlzdFBhbmVsVGFyZ2V0ICYmIHRoaXMuaGFzQ291bnRQYW5lbFRhcmdldCkge1xuICAgICAgdGhpcy5jb3VudFBhbmVsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICAgIHRoaXMucGFzc2VuZ2VyTGlzdFBhbmVsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgICB9XG4gIH1cblxuICB0b2dnbGVQYXNzZW5nZXIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY2hlY2tib3ggPSBldmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IHBhc3NlbmdlcklkID0gcGFyc2VJbnQoY2hlY2tib3gudmFsdWUpXG4gICAgY29uc3QgcGFzc2VuZ2VyTmFtZSA9IGNoZWNrYm94LmRhdGFzZXQucGFzc2VuZ2VyTmFtZSB8fCAnJ1xuICAgIFxuICAgIGlmIChjaGVja2JveC5jaGVja2VkKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkUGFzc2VuZ2VySWRzLmFkZChwYXNzZW5nZXJJZClcbiAgICAgIHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJOYW1lcy5zZXQocGFzc2VuZ2VySWQsIHBhc3Nlbmdlck5hbWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJJZHMuZGVsZXRlKHBhc3NlbmdlcklkKVxuICAgICAgdGhpcy5zZWxlY3RlZFBhc3Nlbmdlck5hbWVzLmRlbGV0ZShwYXNzZW5nZXJJZClcbiAgICB9XG4gICAgXG4gICAgLy8gQXV0by11cGRhdGUgYWR1bHRzIGNvdW50IGJhc2VkIG9uIG51bWJlciBvZiBzZWxlY3RlZCBwYXNzZW5nZXJzXG4gICAgY29uc3Qgc2VsZWN0ZWRDb3VudCA9IHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJOYW1lcy5zaXplXG4gICAgdGhpcy5hZHVsdHMgPSBzZWxlY3RlZENvdW50XG4gICAgXG4gICAgLy8gVXBkYXRlIG1vZGFsIHRpdGxlIGFuZCBjb3VudGVycyB0byByZWZsZWN0IGN1cnJlbnQgc2VsZWN0aW9uXG4gICAgdGhpcy51cGRhdGVDb3VudGVycygpXG4gIH1cblxuICBpbmNyZW1lbnRBZHVsdHMoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgXG4gICAgaWYgKHRoaXMuYWR1bHRzIDwgOSkge1xuICAgICAgdGhpcy5hZHVsdHMrK1xuICAgICAgdGhpcy51cGRhdGVDb3VudGVycygpXG4gICAgfVxuICB9XG5cbiAgZGVjcmVtZW50QWR1bHRzKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIFxuICAgIGlmICh0aGlzLmFkdWx0cyA+IDApIHtcbiAgICAgIHRoaXMuYWR1bHRzLS1cbiAgICAgIHRoaXMudXBkYXRlQ291bnRlcnMoKVxuICAgIH1cbiAgfVxuXG4gIGluY3JlbWVudENoaWxkcmVuKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIFxuICAgIGlmICh0aGlzLmNoaWxkcmVuIDwgOCkge1xuICAgICAgdGhpcy5jaGlsZHJlbisrXG4gICAgICB0aGlzLnVwZGF0ZUNvdW50ZXJzKClcbiAgICB9XG4gIH1cblxuICBkZWNyZW1lbnRDaGlsZHJlbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBcbiAgICBpZiAodGhpcy5jaGlsZHJlbiA+IDApIHtcbiAgICAgIHRoaXMuY2hpbGRyZW4tLVxuICAgICAgdGhpcy51cGRhdGVDb3VudGVycygpXG4gICAgfVxuICB9XG5cbiAgaW5jcmVtZW50SW5mYW50cyhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBcbiAgICBpZiAodGhpcy5pbmZhbnRzIDwgdGhpcy5hZHVsdHMpIHtcbiAgICAgIHRoaXMuaW5mYW50cysrXG4gICAgICB0aGlzLnVwZGF0ZUNvdW50ZXJzKClcbiAgICB9XG4gIH1cblxuICBkZWNyZW1lbnRJbmZhbnRzKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIFxuICAgIGlmICh0aGlzLmluZmFudHMgPiAwKSB7XG4gICAgICB0aGlzLmluZmFudHMtLVxuICAgICAgdGhpcy51cGRhdGVDb3VudGVycygpXG4gICAgfVxuICB9XG5cbiAgcmVzZXQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgXG4gICAgdGhpcy5hZHVsdHMgPSAwXG4gICAgdGhpcy5jaGlsZHJlbiA9IDBcbiAgICB0aGlzLmluZmFudHMgPSAwXG4gICAgdGhpcy5zZWxlY3RlZFBhc3Nlbmdlcklkcy5jbGVhcigpXG4gICAgdGhpcy5zZWxlY3RlZFBhc3Nlbmdlck5hbWVzLmNsZWFyKClcbiAgICB0aGlzLmhhc1NlbGVjdGlvbiA9IGZhbHNlXG4gICAgXG4gICAgLy8gQWxzbyByZXNldCBjb25maXJtZWQgc3RhdGVcbiAgICB0aGlzLmNvbmZpcm1lZEFkdWx0cyA9IDBcbiAgICB0aGlzLmNvbmZpcm1lZENoaWxkcmVuID0gMFxuICAgIHRoaXMuY29uZmlybWVkSW5mYW50cyA9IDBcbiAgICB0aGlzLmNvbmZpcm1lZFBhc3Nlbmdlcklkcy5jbGVhcigpXG4gICAgdGhpcy5jb25maXJtZWRQYXNzZW5nZXJOYW1lcy5jbGVhcigpXG4gICAgXG4gICAgLy8gQ2xlYXIgbG9jYWxTdG9yYWdlXG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Bhc3Nlbmdlcl9zZWxlY3Rpb24nKVxuICAgIFxuICAgIC8vIFVuY2hlY2sgYWxsIGNoZWNrYm94ZXMgKG9ubHkgaWYgcGFzc2VuZ2VyTGlzdFBhbmVsIGV4aXN0cylcbiAgICBpZiAodGhpcy5oYXNQYXNzZW5nZXJMaXN0UGFuZWxUYXJnZXQpIHtcbiAgICAgIGNvbnN0IGNoZWNrYm94ZXMgPSB0aGlzLnBhc3Nlbmdlckxpc3RQYW5lbFRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKVxuICAgICAgY2hlY2tib3hlcy5mb3JFYWNoKChjaGVja2JveDogRWxlbWVudCkgPT4ge1xuICAgICAgICAoY2hlY2tib3ggYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZCA9IGZhbHNlXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnVwZGF0ZUNvdW50ZXJzKClcbiAgICB0aGlzLnVwZGF0ZURpc3BsYXkoKVxuICB9XG5cbiAgY29uZmlybShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBcbiAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIHRoZSBmdWxsIG1vZGFsIHdpdGggY291bnQgcGFuZWxcbiAgICBpZiAodGhpcy5oYXNDb3VudFBhbmVsVGFyZ2V0KSB7XG4gICAgICAvLyBDaGVjayBpZiB3ZSdyZSBvbiB0aGUgY291bnQgcGFuZWwgKG5vdCBwYXNzZW5nZXIgbGlzdCBwYW5lbClcbiAgICAgIGNvbnN0IGlzQ291bnRQYW5lbEFjdGl2ZSA9ICF0aGlzLmNvdW50UGFuZWxUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiaGlkZGVuXCIpXG4gICAgICBcbiAgICAgIC8vIE11dHVhbGx5IGV4Y2x1c2l2ZSBtb2RlczogY2xlYXIgb3Bwb3NpdGUgbW9kZSBkYXRhXG4gICAgICBpZiAoaXNDb3VudFBhbmVsQWN0aXZlKSB7XG4gICAgICAgIC8vIENvdW50IG1vZGU6IGNsZWFyIHBhc3NlbmdlciBuYW1lcy9JRHNcbiAgICAgICAgdGhpcy5zZWxlY3RlZFBhc3Nlbmdlcklkcy5jbGVhcigpXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJOYW1lcy5jbGVhcigpXG4gICAgICAgIFxuICAgICAgICAvLyBVbmNoZWNrIGFsbCBjaGVja2JveGVzIGluIHBhc3NlbmdlciBsaXN0IChpZiBpdCBleGlzdHMpXG4gICAgICAgIGlmICh0aGlzLmhhc1Bhc3Nlbmdlckxpc3RQYW5lbFRhcmdldCkge1xuICAgICAgICAgIGNvbnN0IGNoZWNrYm94ZXMgPSB0aGlzLnBhc3Nlbmdlckxpc3RQYW5lbFRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKVxuICAgICAgICAgIGNoZWNrYm94ZXMuZm9yRWFjaCgoY2hlY2tib3g6IEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIChjaGVja2JveCBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkID0gZmFsc2VcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBQYXNzZW5nZXIgbmFtZSBtb2RlOiBjbGVhciBjb3VudHNcbiAgICAgICAgdGhpcy5hZHVsdHMgPSAwXG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSAwXG4gICAgICAgIHRoaXMuaW5mYW50cyA9IDBcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gU2F2ZSBjdXJyZW50IHN0YXRlIGFzIGNvbmZpcm1lZCBzdGF0ZVxuICAgIHRoaXMuY29uZmlybWVkQWR1bHRzID0gdGhpcy5hZHVsdHNcbiAgICB0aGlzLmNvbmZpcm1lZENoaWxkcmVuID0gdGhpcy5jaGlsZHJlblxuICAgIHRoaXMuY29uZmlybWVkSW5mYW50cyA9IHRoaXMuaW5mYW50c1xuICAgIHRoaXMuY29uZmlybWVkUGFzc2VuZ2VySWRzID0gbmV3IFNldCh0aGlzLnNlbGVjdGVkUGFzc2VuZ2VySWRzKVxuICAgIHRoaXMuY29uZmlybWVkUGFzc2VuZ2VyTmFtZXMgPSBuZXcgTWFwKHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJOYW1lcylcbiAgICBcbiAgICB0aGlzLmhhc1NlbGVjdGlvbiA9IHRydWVcbiAgICB0aGlzLnNhdmVUb0xvY2FsU3RvcmFnZSgpXG4gICAgdGhpcy51cGRhdGVEaXNwbGF5KClcbiAgICBcbiAgICAvLyBDbG9zZSBtb2RhbCBkaXJlY3RseSB3aXRob3V0IHRyaWdnZXJpbmcgcmVzdG9yZSBsb2dpY1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcIlwiXG4gIH1cblxuICB0b2dnbGVFZGl0KCk6IHZvaWQge1xuICAgIC8vIFRoaXMgbWV0aG9kIGlzIHVzZWQgaW4gdmlld3MgdG8gdG9nZ2xlIGJldHdlZW4gZWRpdCBhbmQgZGlzcGxheSBtb2Rlc1xuICAgIGNvbnN0IGV2ZW50ID0gbmV3IEV2ZW50KCdjbGljaycpXG4gICAgdGhpcy5vcGVuTW9kYWwoZXZlbnQpXG4gIH1cblxuICBzZWxlY3RQYXNzZW5nZXIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgLy8gRm9yIGNhciByZW50YWw6IHNpbXBsZSBjbGljayBzZWxlY3Rpb24gb24gZGl2IGVsZW1lbnRzXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIFxuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBkaXYtYmFzZWQgc2VsZWN0aW9uIChjYXIgcmVudGFsKSB2cyBjaGVja2JveCAoZmxpZ2h0IGJvb2tpbmcpXG4gICAgaWYgKHRhcmdldC50YWdOYW1lID09PSAnRElWJyAmJiB0YXJnZXQuaGFzQXR0cmlidXRlKCdkYXRhLXBhc3Nlbmdlci1pZCcpKSB7XG4gICAgICAvLyBDYXIgcmVudGFsIG1vZGU6IHVwZGF0ZSBkaXNwbGF5IGZpZWxkcyBhbmQgY2xvc2UgbW9kYWxcbiAgICAgIGNvbnN0IHBhc3NlbmdlcklkID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1wYXNzZW5nZXItaWQnKVxuICAgICAgY29uc3QgcGFzc2VuZ2VyTmFtZSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGFzc2VuZ2VyLW5hbWUnKSB8fCAnJ1xuICAgICAgY29uc3QgcGFzc2VuZ2VySWRUeXBlID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1wYXNzZW5nZXItaWQtdHlwZScpIHx8ICcnXG4gICAgICBjb25zdCBwYXNzZW5nZXJJZE51bWJlciA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGFzc2VuZ2VyLWlkLW51bWJlcicpIHx8ICcnXG4gICAgICBjb25zdCBwYXNzZW5nZXJQaG9uZSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGFzc2VuZ2VyLXBob25lJykgfHwgJydcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIGRpc3BsYXkgZmllbGRzIChuYW1lLCBpZFR5cGUsIGlkTnVtYmVyLCBwaG9uZSB0YXJnZXRzKVxuICAgICAgaWYgKHRoaXMuaGFzTmFtZVRhcmdldCkge1xuICAgICAgICB0aGlzLm5hbWVUYXJnZXQudGV4dENvbnRlbnQgPSBwYXNzZW5nZXJOYW1lXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5oYXNJZFR5cGVUYXJnZXQpIHtcbiAgICAgICAgdGhpcy5pZFR5cGVUYXJnZXQudGV4dENvbnRlbnQgPSBwYXNzZW5nZXJJZFR5cGVcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhhc0lkTnVtYmVyVGFyZ2V0KSB7XG4gICAgICAgIHRoaXMuaWROdW1iZXJUYXJnZXQudGV4dENvbnRlbnQgPSBwYXNzZW5nZXJJZE51bWJlclxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaGFzUGhvbmVUYXJnZXQpIHtcbiAgICAgICAgdGhpcy5waG9uZVRhcmdldC50ZXh0Q29udGVudCA9IHBhc3NlbmdlclBob25lIHx8ICdcdTY3MkFcdTU4NkJcdTUxOTknXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBoaWRkZW4gZm9ybSBmaWVsZHNcbiAgICAgIGlmICh0aGlzLmhhc0RyaXZlck5hbWVUYXJnZXQpIHtcbiAgICAgICAgY29uc3QgZHJpdmVyTmFtZUZpZWxkID0gdGhpcy5kcml2ZXJOYW1lVGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICAgICAgZHJpdmVyTmFtZUZpZWxkLnZhbHVlID0gcGFzc2VuZ2VyTmFtZVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaGFzRHJpdmVySWROdW1iZXJUYXJnZXQpIHtcbiAgICAgICAgY29uc3QgZHJpdmVySWROdW1iZXJGaWVsZCA9IHRoaXMuZHJpdmVySWROdW1iZXJUYXJnZXQgYXMgSFRNTElucHV0RWxlbWVudFxuICAgICAgICBkcml2ZXJJZE51bWJlckZpZWxkLnZhbHVlID0gcGFzc2VuZ2VySWROdW1iZXJcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhhc0NvbnRhY3RQaG9uZVRhcmdldCkge1xuICAgICAgICBjb25zdCBjb250YWN0UGhvbmVGaWVsZCA9IHRoaXMuY29udGFjdFBob25lVGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICAgICAgY29udGFjdFBob25lRmllbGQudmFsdWUgPSBwYXNzZW5nZXJQaG9uZVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTYXZlIHRoZSBzZWxlY3RlZCBwYXNzZW5nZXIgSUQgdG8gdGhlIHZhbHVlXG4gICAgICBpZiAodGhpcy5oYXNTZWxlY3RlZElkVmFsdWUgJiYgcGFzc2VuZ2VySWQpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZElkVmFsdWUgPSBwYXJzZUludChwYXNzZW5nZXJJZClcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2xvc2UgbW9kYWxcbiAgICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJ1xuICAgICAgXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gRmxpZ2h0IGJvb2tpbmcgbW9kZTogZGVsZWdhdGUgdG8gdG9nZ2xlUGFzc2VuZ2VyIGZvciBjaGVja2JveCBoYW5kbGluZ1xuICAgIC8vIFRoaXMgc2hvdWxkIG9ubHkgYmUgcmVhY2hlZCBpZiB0aGUgZXZlbnQgY29tZXMgZnJvbSBhIGNoZWNrYm94XG4gICAgdGhpcy50b2dnbGVQYXNzZW5nZXIoZXZlbnQpXG4gIH1cblxuICBkZWNyZWFzZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICAvLyBHZW5lcmFsIGRlY3JlYXNlIG1ldGhvZCB0aGF0IGNhbiBiZSB1c2VkIGZvciBhbnkgY291bnRcbiAgICB0aGlzLmRlY3JlbWVudEFkdWx0cyhldmVudClcbiAgfVxuXG4gIGluY3JlYXNlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIC8vIEdlbmVyYWwgaW5jcmVhc2UgbWV0aG9kIHRoYXQgY2FuIGJlIHVzZWQgZm9yIGFueSBjb3VudFxuICAgIHRoaXMuaW5jcmVtZW50QWR1bHRzKGV2ZW50KVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVDb3VudGVycygpOiB2b2lkIHtcbiAgICAvLyBPbmx5IHVwZGF0ZSBjb3VudGVyIGRpc3BsYXlzIGlmIHRoZXkgZXhpc3QgKGZsaWdodCBib29raW5nIG1vZGUpXG4gICAgaWYgKHRoaXMuaGFzQWR1bHRzQ291bnRUYXJnZXQpIHtcbiAgICAgIHRoaXMuYWR1bHRzQ291bnRUYXJnZXQudGV4dENvbnRlbnQgPSB0aGlzLmFkdWx0cy50b1N0cmluZygpXG4gICAgfVxuICAgIGlmICh0aGlzLmhhc0NoaWxkcmVuQ291bnRUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2hpbGRyZW5Db3VudFRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMuY2hpbGRyZW4udG9TdHJpbmcoKVxuICAgIH1cbiAgICBpZiAodGhpcy5oYXNJbmZhbnRzQ291bnRUYXJnZXQpIHtcbiAgICAgIHRoaXMuaW5mYW50c0NvdW50VGFyZ2V0LnRleHRDb250ZW50ID0gdGhpcy5pbmZhbnRzLnRvU3RyaW5nKClcbiAgICB9XG4gICAgLy8gVXBkYXRlIHNpbXBsZSBjb3VudCB0YXJnZXQgZm9yIHZpc2Egb3JkZXIgbW9kZVxuICAgIGlmICh0aGlzLmhhc0NvdW50VGFyZ2V0KSB7XG4gICAgICB0aGlzLmNvdW50VGFyZ2V0LnRleHRDb250ZW50ID0gdGhpcy5hZHVsdHMudG9TdHJpbmcoKVxuICAgIH1cbiAgICB0aGlzLnVwZGF0ZU1vZGFsVGl0bGUoKVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVNb2RhbFRpdGxlKCk6IHZvaWQge1xuICAgIC8vIE9ubHkgdXBkYXRlIG1vZGFsIHRpdGxlIGlmIGl0IGV4aXN0cyAoZmxpZ2h0IGJvb2tpbmcgbW9kZSlcbiAgICBpZiAodGhpcy5oYXNNb2RhbFRpdGxlVGFyZ2V0KSB7XG4gICAgICB0aGlzLm1vZGFsVGl0bGVUYXJnZXQudGV4dENvbnRlbnQgPSBgXHU1RjUzXHU1MjREXHU1REYyXHU5MDA5OiAke3RoaXMuYWR1bHRzfVx1NjIxMFx1NEVCQSAke3RoaXMuY2hpbGRyZW59XHU1MTNGXHU3QUU1ICR7dGhpcy5pbmZhbnRzfVx1NUE3NFx1NTEzRmBcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZURpc3BsYXkoKTogdm9pZCB7XG4gICAgLy8gT25seSB1cGRhdGUgZGlzcGxheSBpZiBpdCBleGlzdHMgKGZsaWdodCBib29raW5nIG1vZGUpXG4gICAgaWYgKCF0aGlzLmhhc1NlbGVjdGVkRGlzcGxheVRhcmdldCkgcmV0dXJuXG4gICAgXG4gICAgY29uc3QgdG90YWwgPSB0aGlzLmNvbmZpcm1lZEFkdWx0cyArIHRoaXMuY29uZmlybWVkQ2hpbGRyZW4gKyB0aGlzLmNvbmZpcm1lZEluZmFudHNcbiAgICBcbiAgICAvLyBVcGRhdGUgYWxsIGJ1dHRvbiBkaXNwbGF5cyBvbiB0aGUgcGFnZVxuICAgIHRoaXMuc2VsZWN0ZWREaXNwbGF5VGFyZ2V0cy5mb3JFYWNoKChkaXNwbGF5Q29udGFpbmVyKSA9PiB7XG4gICAgICBjb25zdCBtYWluRGl2ID0gZGlzcGxheUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudGV4dC1iYXNlJykgYXMgSFRNTEVsZW1lbnRcbiAgICAgIGNvbnN0IHN1YnRpdGxlRGl2ID0gZGlzcGxheUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudGV4dC1zbScpIGFzIEhUTUxFbGVtZW50XG4gICAgICBcbiAgICAgIGlmIChtYWluRGl2ICYmIHN1YnRpdGxlRGl2KSB7XG4gICAgICAgIC8vIE1vZGUgMTogUGFzc2VuZ2VyIE5hbWUgTW9kZSAtIHNob3cgbmFtZXMsIGhpZGUgY291bnRcbiAgICAgICAgaWYgKHRoaXMuY29uZmlybWVkUGFzc2VuZ2VyTmFtZXMuc2l6ZSA+IDApIHtcbiAgICAgICAgICBjb25zdCBuYW1lcyA9IEFycmF5LmZyb20odGhpcy5jb25maXJtZWRQYXNzZW5nZXJOYW1lcy52YWx1ZXMoKSlcbiAgICAgICAgICBtYWluRGl2LnRleHRDb250ZW50ID0gbmFtZXMuam9pbignXHUzMDAxJylcbiAgICAgICAgICBzdWJ0aXRsZURpdi50ZXh0Q29udGVudCA9IGAke25hbWVzLmxlbmd0aH1cdTRGNERcdTRFNThcdTY3M0FcdTRFQkFgIC8vIEhpZGUgZGV0YWlsZWQgY291bnQgYnJlYWtkb3duXG4gICAgICAgIH0gXG4gICAgICAgIC8vIE1vZGUgMjogQ291bnQgTW9kZSAtIHNob3cgY291bnQgYnJlYWtkb3duLCBubyBuYW1lc1xuICAgICAgICBlbHNlIGlmICh0aGlzLmhhc1NlbGVjdGlvbiAmJiB0b3RhbCA+IDApIHtcbiAgICAgICAgICBtYWluRGl2LnRleHRDb250ZW50ID0gYCR7dGhpcy5jb25maXJtZWRBZHVsdHN9XHU2MjEwXHU0RUJBICR7dGhpcy5jb25maXJtZWRDaGlsZHJlbn1cdTUxM0ZcdTdBRTUgJHt0aGlzLmNvbmZpcm1lZEluZmFudHN9XHU1QTc0XHU1MTNGYFxuICAgICAgICAgIHN1YnRpdGxlRGl2LnRleHRDb250ZW50ID0gYFx1NTE3MSR7dG90YWx9XHU0RjREXHU0RTU4XHU2NzNBXHU0RUJBYFxuICAgICAgICB9XG4gICAgICAgIC8vIERlZmF1bHQ6IE5vIHNlbGVjdGlvblxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBtYWluRGl2LnRleHRDb250ZW50ID0gJ1x1OTAwOVx1NjJFOVx1NEU1OFx1NjczQVx1NEVCQSdcbiAgICAgICAgICBzdWJ0aXRsZURpdi50ZXh0Q29udGVudCA9ICdcdTVGRUJcdTkwMUZcdTYyN0VcdTUyMzBcdTRGNEVcdTRFRjdcdTc5NjgnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIHRoaXMudXBkYXRlTW9kYWxUaXRsZSgpXG4gIH1cblxuICBwcml2YXRlIHNhdmVUb0xvY2FsU3RvcmFnZSgpOiB2b2lkIHtcbiAgICBjb25zdCBzdGF0ZSA9IHtcbiAgICAgIGFkdWx0czogdGhpcy5jb25maXJtZWRBZHVsdHMsXG4gICAgICBjaGlsZHJlbjogdGhpcy5jb25maXJtZWRDaGlsZHJlbixcbiAgICAgIGluZmFudHM6IHRoaXMuY29uZmlybWVkSW5mYW50cyxcbiAgICAgIHBhc3NlbmdlcklkczogQXJyYXkuZnJvbSh0aGlzLmNvbmZpcm1lZFBhc3NlbmdlcklkcyksXG4gICAgICBwYXNzZW5nZXJOYW1lczogQXJyYXkuZnJvbSh0aGlzLmNvbmZpcm1lZFBhc3Nlbmdlck5hbWVzLmVudHJpZXMoKSksXG4gICAgICBoYXNTZWxlY3Rpb246IHRoaXMuaGFzU2VsZWN0aW9uXG4gICAgfVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwYXNzZW5nZXJfc2VsZWN0aW9uJywgSlNPTi5zdHJpbmdpZnkoc3RhdGUpKVxuICB9XG5cbiAgcHJpdmF0ZSBsb2FkRnJvbUxvY2FsU3RvcmFnZSgpOiB2b2lkIHtcbiAgICBjb25zdCBzYXZlZFN0YXRlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Bhc3Nlbmdlcl9zZWxlY3Rpb24nKVxuICAgIGlmIChzYXZlZFN0YXRlKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IEpTT04ucGFyc2Uoc2F2ZWRTdGF0ZSlcbiAgICAgICAgdGhpcy5hZHVsdHMgPSBzdGF0ZS5hZHVsdHMgfHwgMFxuICAgICAgICB0aGlzLmNoaWxkcmVuID0gc3RhdGUuY2hpbGRyZW4gfHwgMFxuICAgICAgICB0aGlzLmluZmFudHMgPSBzdGF0ZS5pbmZhbnRzIHx8IDBcbiAgICAgICAgdGhpcy5jb25maXJtZWRBZHVsdHMgPSBzdGF0ZS5hZHVsdHMgfHwgMFxuICAgICAgICB0aGlzLmNvbmZpcm1lZENoaWxkcmVuID0gc3RhdGUuY2hpbGRyZW4gfHwgMFxuICAgICAgICB0aGlzLmNvbmZpcm1lZEluZmFudHMgPSBzdGF0ZS5pbmZhbnRzIHx8IDBcbiAgICAgICAgdGhpcy5zZWxlY3RlZFBhc3NlbmdlcklkcyA9IG5ldyBTZXQoc3RhdGUucGFzc2VuZ2VySWRzIHx8IFtdKVxuICAgICAgICB0aGlzLmNvbmZpcm1lZFBhc3NlbmdlcklkcyA9IG5ldyBTZXQoc3RhdGUucGFzc2VuZ2VySWRzIHx8IFtdKVxuICAgICAgICB0aGlzLnNlbGVjdGVkUGFzc2VuZ2VyTmFtZXMgPSBuZXcgTWFwKHN0YXRlLnBhc3Nlbmdlck5hbWVzIHx8IFtdKVxuICAgICAgICB0aGlzLmNvbmZpcm1lZFBhc3Nlbmdlck5hbWVzID0gbmV3IE1hcChzdGF0ZS5wYXNzZW5nZXJOYW1lcyB8fCBbXSlcbiAgICAgICAgdGhpcy5oYXNTZWxlY3Rpb24gPSBzdGF0ZS5oYXNTZWxlY3Rpb24gfHwgZmFsc2VcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgcGFzc2VuZ2VyIHNlbGVjdGlvbiBmcm9tIGxvY2FsU3RvcmFnZTonLCBlKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaGlnaGxpZ2h0U2VsZWN0ZWRQYXNzZW5nZXIoKTogdm9pZCB7XG4gICAgLy8gT25seSBydW4gaW4gY2FyIHJlbnRhbCBtb2RlIHdoZXJlIHNlbGVjdGVkSWRWYWx1ZSBleGlzdHNcbiAgICBpZiAoIXRoaXMuaGFzU2VsZWN0ZWRJZFZhbHVlKSByZXR1cm5cbiAgICBcbiAgICAvLyBGaW5kIGFsbCBwYXNzZW5nZXIgZGl2IGVsZW1lbnRzIGluIHRoZSBtb2RhbFxuICAgIGNvbnN0IHBhc3NlbmdlckRpdnMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtcGFzc2VuZ2VyLWlkXScpXG4gICAgXG4gICAgcGFzc2VuZ2VyRGl2cy5mb3JFYWNoKChkaXY6IEVsZW1lbnQpID0+IHtcbiAgICAgIGNvbnN0IHBhc3NlbmdlcklkID0gcGFyc2VJbnQoKGRpdiBhcyBIVE1MRWxlbWVudCkuZ2V0QXR0cmlidXRlKCdkYXRhLXBhc3Nlbmdlci1pZCcpIHx8ICcwJylcbiAgICAgIGNvbnN0IGlzU2VsZWN0ZWQgPSBwYXNzZW5nZXJJZCA9PT0gdGhpcy5zZWxlY3RlZElkVmFsdWVcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIGRpdiBib3JkZXIgYW5kIGJhY2tncm91bmRcbiAgICAgIGlmIChpc1NlbGVjdGVkKSB7XG4gICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKCdib3JkZXItYmx1ZS01MDAnLCAnYmctYmx1ZS01MCcpXG4gICAgICAgIGRpdi5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItZ3JheS0yMDAnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGl2LmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1ibHVlLTUwMCcsICdiZy1ibHVlLTUwJylcbiAgICAgICAgaWYgKCFkaXYuY2xhc3NMaXN0LmNvbnRhaW5zKCdib3JkZXInKSkge1xuICAgICAgICAgIC8vIEVuc3VyZSBpdCBoYXMgYSBib3JkZXIgY2xhc3MgaWYgaXQgd2FzIG9yaWdpbmFsbHkgYm9yZGVyLWxlc3NcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBVcGRhdGUgdGhlIHJhZGlvLXN0eWxlIGluZGljYXRvciBjaXJjbGVcbiAgICAgIGNvbnN0IGluZGljYXRvckNpcmNsZSA9IGRpdi5xdWVyeVNlbGVjdG9yKCcudy01LmgtNS5yb3VuZGVkLWZ1bGwnKVxuICAgICAgaWYgKGluZGljYXRvckNpcmNsZSkge1xuICAgICAgICBpZiAoaXNTZWxlY3RlZCkge1xuICAgICAgICAgIGluZGljYXRvckNpcmNsZS5jbGFzc0xpc3QuYWRkKCdib3JkZXItYmx1ZS01MDAnLCAnYmctYmx1ZS01MDAnKVxuICAgICAgICAgIGluZGljYXRvckNpcmNsZS5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItZ3JheS0zMDAnKVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEVuc3VyZSBjaGVja21hcmsgaWNvbiBleGlzdHNcbiAgICAgICAgICBsZXQgY2hlY2ttYXJrID0gaW5kaWNhdG9yQ2lyY2xlLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpXG4gICAgICAgICAgaWYgKCFjaGVja21hcmspIHtcbiAgICAgICAgICAgIGNoZWNrbWFyayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnc3ZnJylcbiAgICAgICAgICAgIGNoZWNrbWFyay5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3ctMyBoLTMgdGV4dC13aGl0ZScpXG4gICAgICAgICAgICBjaGVja21hcmsuc2V0QXR0cmlidXRlKCdmaWxsJywgJ2N1cnJlbnRDb2xvcicpXG4gICAgICAgICAgICBjaGVja21hcmsuc2V0QXR0cmlidXRlKCd2aWV3Qm94JywgJzAgMCAyMCAyMCcpXG4gICAgICAgICAgICBjb25zdCBwYXRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdwYXRoJylcbiAgICAgICAgICAgIHBhdGguc2V0QXR0cmlidXRlKCdmaWxsLXJ1bGUnLCAnZXZlbm9kZCcpXG4gICAgICAgICAgICBwYXRoLnNldEF0dHJpYnV0ZSgnZCcsICdNMTYuNzA3IDUuMjkzYTEgMSAwIDAxMCAxLjQxNGwtOCA4YTEgMSAwIDAxLTEuNDE0IDBsLTQtNGExIDEgMCAwMTEuNDE0LTEuNDE0TDggMTIuNTg2bDcuMjkzLTcuMjkzYTEgMSAwIDAxMS40MTQgMHonKVxuICAgICAgICAgICAgcGF0aC5zZXRBdHRyaWJ1dGUoJ2NsaXAtcnVsZScsICdldmVub2RkJylcbiAgICAgICAgICAgIGNoZWNrbWFyay5hcHBlbmRDaGlsZChwYXRoKVxuICAgICAgICAgICAgaW5kaWNhdG9yQ2lyY2xlLmFwcGVuZENoaWxkKGNoZWNrbWFyaylcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW5kaWNhdG9yQ2lyY2xlLmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1ibHVlLTUwMCcsICdiZy1ibHVlLTUwMCcpXG4gICAgICAgICAgaW5kaWNhdG9yQ2lyY2xlLmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1ncmF5LTMwMCcpXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUmVtb3ZlIGNoZWNrbWFyayBpY29uXG4gICAgICAgICAgY29uc3QgY2hlY2ttYXJrID0gaW5kaWNhdG9yQ2lyY2xlLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpXG4gICAgICAgICAgaWYgKGNoZWNrbWFyaykge1xuICAgICAgICAgICAgY2hlY2ttYXJrLnJlbW92ZSgpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wiYnV0dG9uXCIsIFwiaGlkZGVuSW5wdXRcIl1cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBzZWxlY3RlZDogU3RyaW5nXG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IGJ1dHRvblRhcmdldHM6IEhUTUxCdXR0b25FbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBoaWRkZW5JbnB1dFRhcmdldHM6IEhUTUxJbnB1dEVsZW1lbnRbXVxuICBkZWNsYXJlIHNlbGVjdGVkVmFsdWU6IHN0cmluZ1xuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJDYWJpblNlbGVjdG9yIGNvbm5lY3RlZFwiKVxuICAgIC8vIENoZWNrIGlmIHRoZXJlJ3MgYSBwcmV2aW91c2x5IHNlbGVjdGVkIHZhbHVlIGZyb20gZm9ybVxuICAgIC8vIFVzZSB0aGUgZmlyc3QgaGlkZGVuSW5wdXQgdG8gZ2V0IHRoZSB2YWx1ZSAodGhleSBzaG91bGQgYWxsIGhhdmUgdGhlIHNhbWUgdmFsdWUpXG4gICAgY29uc3QgY3VycmVudFZhbHVlID0gdGhpcy5oaWRkZW5JbnB1dFRhcmdldHNbMF0/LnZhbHVlXG4gICAgLy8gSGFuZGxlIGJvdGggZW1wdHkgc3RyaW5nIGFuZCB1bmRlZmluZWQgLSBkZWZhdWx0IHRvICdhbGwnXG4gICAgY29uc3QgY2FiaW5WYWx1ZSA9IGN1cnJlbnRWYWx1ZSAmJiBjdXJyZW50VmFsdWUgIT09ICcnID8gY3VycmVudFZhbHVlIDogJ2FsbCdcbiAgICB0aGlzLnNlbGVjdENhYmluKGNhYmluVmFsdWUpXG4gIH1cblxuICBzZWxlY3RDYWJpbihjYWJpblR5cGU6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZSA9IGNhYmluVHlwZVxuICAgIFxuICAgIC8vIFVwZGF0ZSBBTEwgaGlkZGVuIGlucHV0IHZhbHVlcyBmb3IgZm9ybSBzdWJtaXNzaW9uIChib3RoIHNpbmdsZS9yb3VuZC10cmlwIGFuZCBtdWx0aS1jaXR5IGZvcm1zKVxuICAgIHRoaXMuaGlkZGVuSW5wdXRUYXJnZXRzLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgaW5wdXQudmFsdWUgPSBjYWJpblR5cGVcbiAgICB9KVxuICAgIFxuICAgIC8vIFVwZGF0ZSBidXR0b24gc3R5bGVzXG4gICAgdGhpcy5idXR0b25UYXJnZXRzLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgIGNvbnN0IGJ1dHRvblR5cGUgPSBidXR0b24uZGF0YXNldC5jYWJpblR5cGVcbiAgICAgIFxuICAgICAgaWYgKGJ1dHRvblR5cGUgPT09IGNhYmluVHlwZSkge1xuICAgICAgICAvLyBTZWxlY3RlZCBzdGF0ZSAtIHdoaXRlIGJhY2tncm91bmQgd2l0aCBzdWJ0bGUgc2hhZG93XG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiYmctd2hpdGVcIiwgXCJzaGFkb3ctc21cIiwgXCJ0ZXh0LWdyYXktOTAwXCIpXG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwidGV4dC1ncmF5LTYwMFwiKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVW5zZWxlY3RlZCBzdGF0ZSAtIHRyYW5zcGFyZW50IGJhY2tncm91bmRcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJiZy13aGl0ZVwiLCBcInNoYWRvdy1zbVwiLCBcInRleHQtZ3JheS05MDBcIilcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJ0ZXh0LWdyYXktNjAwXCIpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHNlbGVjdChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50XG4gICAgY29uc3QgY2FiaW5UeXBlID0gYnV0dG9uLmRhdGFzZXQuY2FiaW5UeXBlXG4gICAgXG4gICAgaWYgKGNhYmluVHlwZSkge1xuICAgICAgLy8gSWYgYWxyZWFkeSBzZWxlY3RlZCwgZG8gbm90aGluZyAobXVzdCBrZWVwIG9uZSBzZWxlY3RlZClcbiAgICAgIGlmICh0aGlzLnNlbGVjdGVkVmFsdWUgPT09IGNhYmluVHlwZSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIHRoaXMuc2VsZWN0Q2FiaW4oY2FiaW5UeXBlKVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwidGFiXCIsIFxuICAgIFwicmV0dXJuRGF0ZVNlY3Rpb25cIiwgXG4gICAgXCJ0cmlwVHlwZUlucHV0XCIsIFxuICAgIFwicmV0dXJuRGF0ZUlucHV0XCIsXG4gICAgXCJvbmVXYXlSb3VuZFRyaXBGb3JtXCIsXG4gICAgXCJtdWx0aUNpdHlGb3JtXCIsXG4gICAgXCJwcm9tb3Rpb25CYW5uZXJcIlxuICBdXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgY3VycmVudFR5cGU6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiBcIm9uZV93YXlcIiB9XG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHRhYlRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSByZXR1cm5EYXRlU2VjdGlvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0cmlwVHlwZUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgcmV0dXJuRGF0ZUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgb25lV2F5Um91bmRUcmlwRm9ybVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBtdWx0aUNpdHlGb3JtVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHByb21vdGlvbkJhbm5lclRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNUcmlwVHlwZUlucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUmV0dXJuRGF0ZVNlY3Rpb25UYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNSZXR1cm5EYXRlSW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNPbmVXYXlSb3VuZFRyaXBGb3JtVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzTXVsdGlDaXR5Rm9ybVRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1Byb21vdGlvbkJhbm5lclRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIGN1cnJlbnRUeXBlVmFsdWU6IHN0cmluZ1xuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJUcmlwVHlwZSBjb25uZWN0ZWRcIilcbiAgICB0aGlzLnVwZGF0ZVVJKClcbiAgfVxuXG4gIC8vIFx1NTIwN1x1NjM2Mlx1ODg0Q1x1N0EwQlx1N0M3Qlx1NTc4QlxuICBzZWxlY3RUeXBlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCB0cmlwVHlwZSA9IGJ1dHRvbi5kYXRhc2V0LnRyaXBUeXBlIHx8ICdvbmVfd2F5J1xuICAgIFxuICAgIHRoaXMuY3VycmVudFR5cGVWYWx1ZSA9IHRyaXBUeXBlXG4gICAgdGhpcy51cGRhdGVVSSgpXG4gICAgXG4gICAgLy8gXHU1OTgyXHU2NzlDXHU1MjA3XHU2MzYyXHU1MjMwXHU1RjgwXHU4RkQ0XHU0RTE0XHU4RkQ0XHU3QTBCXHU2NUU1XHU2NzFGXHU0RTNBXHU3QTdBXHVGRjBDXHU4QkJFXHU3RjZFXHU5RUQ4XHU4QkE0XHU4RkQ0XHU3QTBCXHU2NUU1XHU2NzFGXHU0RTNBXHU1M0JCXHU3QTBCKzFcdTU5MjlcbiAgICBpZiAodHJpcFR5cGUgPT09ICdyb3VuZF90cmlwJyAmJiB0aGlzLmhhc1JldHVybkRhdGVJbnB1dFRhcmdldCkge1xuICAgICAgaWYgKCF0aGlzLnJldHVybkRhdGVJbnB1dFRhcmdldC52YWx1ZSkge1xuICAgICAgICBjb25zdCBkZXBhcnR1cmVEYXRlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1kYXRlLXBpY2tlci10YXJnZXQ9XCJkYXRlSW5wdXRcIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgICAgIGlmIChkZXBhcnR1cmVEYXRlSW5wdXQgJiYgZGVwYXJ0dXJlRGF0ZUlucHV0LnZhbHVlKSB7XG4gICAgICAgICAgY29uc3QgZGVwYXJ0dXJlRGF0ZSA9IG5ldyBEYXRlKGRlcGFydHVyZURhdGVJbnB1dC52YWx1ZSlcbiAgICAgICAgICBkZXBhcnR1cmVEYXRlLnNldERhdGUoZGVwYXJ0dXJlRGF0ZS5nZXREYXRlKCkgKyAxKVxuICAgICAgICAgIGNvbnN0IHJldHVybkRhdGVTdHIgPSB0aGlzLmZvcm1hdERhdGUoZGVwYXJ0dXJlRGF0ZSlcbiAgICAgICAgICB0aGlzLnJldHVybkRhdGVJbnB1dFRhcmdldC52YWx1ZSA9IHJldHVybkRhdGVTdHJcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBcdTg5RTZcdTUzRDFcdThGRDRcdTdBMEJcdTY1RTVcdTY3MUZcdTkwMDlcdTYyRTlcdTU2NjhcdTY2RjRcdTY1QjBcdTY2M0VcdTc5M0FcbiAgICAgICAgICBjb25zdCByZXR1cm5EYXRlQ29udHJvbGxlciA9IHRoaXMuYXBwbGljYXRpb24uZ2V0Q29udHJvbGxlckZvckVsZW1lbnRBbmRJZGVudGlmaWVyKFxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LFxuICAgICAgICAgICAgJ3JldHVybi1kYXRlLXBpY2tlcidcbiAgICAgICAgICApXG4gICAgICAgICAgaWYgKHJldHVybkRhdGVDb250cm9sbGVyICYmICdjdXJyZW50RGF0ZVZhbHVlJyBpbiByZXR1cm5EYXRlQ29udHJvbGxlcikge1xuICAgICAgICAgICAgKHJldHVybkRhdGVDb250cm9sbGVyIGFzIGFueSkuY3VycmVudERhdGVWYWx1ZSA9IHJldHVybkRhdGVTdHJcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBcdTY2RjRcdTY1QjBVSVx1NzJCNlx1NjAwMVxuICBwcml2YXRlIHVwZGF0ZVVJKCk6IHZvaWQge1xuICAgIC8vIFx1NjZGNFx1NjVCMFx1NjMwOVx1OTRBRVx1NzJCNlx1NjAwMVxuICAgIHRoaXMudGFiVGFyZ2V0cy5mb3JFYWNoKHRhYiA9PiB7XG4gICAgICBjb25zdCBpc0FjdGl2ZSA9IHRhYi5kYXRhc2V0LnRyaXBUeXBlID09PSB0aGlzLmN1cnJlbnRUeXBlVmFsdWVcbiAgICAgIFxuICAgICAgaWYgKGlzQWN0aXZlKSB7XG4gICAgICAgIHRhYi5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktNTAwJylcbiAgICAgICAgdGFiLmNsYXNzTGlzdC5hZGQoJ2ZvbnQtYm9sZCcsICdib3JkZXItYi0yJywgJ2JvcmRlci1ibGFjaycpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YWIuY2xhc3NMaXN0LnJlbW92ZSgnZm9udC1ib2xkJywgJ2JvcmRlci1iLTInLCAnYm9yZGVyLWJsYWNrJylcbiAgICAgICAgdGFiLmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS01MDAnKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBcdTY2RjRcdTY1QjBcdTk2OTBcdTg1Q0ZcdTg4NjhcdTUzNTVcdTVCNTdcdTZCQjVcbiAgICBpZiAodGhpcy5oYXNUcmlwVHlwZUlucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLnRyaXBUeXBlSW5wdXRUYXJnZXQudmFsdWUgPSB0aGlzLmN1cnJlbnRUeXBlVmFsdWVcbiAgICB9XG5cbiAgICAvLyBcdTVDNTVcdTc5M0EvXHU5NjkwXHU4NUNGXHU4RkQ0XHU3QTBCXHU2NUU1XHU2NzFGXHU5MDA5XHU2MkU5XG4gICAgaWYgKHRoaXMuaGFzUmV0dXJuRGF0ZVNlY3Rpb25UYXJnZXQpIHtcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRUeXBlVmFsdWUgPT09ICdyb3VuZF90cmlwJykge1xuICAgICAgICB0aGlzLnJldHVybkRhdGVTZWN0aW9uVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJldHVybkRhdGVTZWN0aW9uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHU1QzU1XHU3OTNBL1x1OTY5MFx1ODVDRlx1NTM1NVx1N0EwQlx1NUY4MFx1OEZENFx1ODg2OFx1NTM1NSB2cyBcdTU5MUFcdTdBMEJcdTg4NjhcdTUzNTVcbiAgICBpZiAodGhpcy5oYXNPbmVXYXlSb3VuZFRyaXBGb3JtVGFyZ2V0ICYmIHRoaXMuaGFzTXVsdGlDaXR5Rm9ybVRhcmdldCkge1xuICAgICAgaWYgKHRoaXMuY3VycmVudFR5cGVWYWx1ZSA9PT0gJ211bHRpX2NpdHknKSB7XG4gICAgICAgIHRoaXMub25lV2F5Um91bmRUcmlwRm9ybVRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgICAgICB0aGlzLm11bHRpQ2l0eUZvcm1UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgICAgXG4gICAgICAgIC8vIFx1ODlFNlx1NTNEMVx1ODFFQVx1NUI5QVx1NEU0OVx1NEU4Qlx1NEVGNlx1OTAxQVx1NzdFNSBtdWx0aS1jaXR5IFx1NjNBN1x1NTIzNlx1NTY2OFx1NTIxRFx1NTlDQlx1NTMxNlxuICAgICAgICBjb25zdCBtdWx0aUNpdHlFdmVudCA9IG5ldyBDdXN0b21FdmVudCgndHJpcC10eXBlOm11bHRpLWNpdHktc2hvd24nLCB7XG4gICAgICAgICAgYnViYmxlczogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgICB0aGlzLmVsZW1lbnQuZGlzcGF0Y2hFdmVudChtdWx0aUNpdHlFdmVudClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMub25lV2F5Um91bmRUcmlwRm9ybVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgICB0aGlzLm11bHRpQ2l0eUZvcm1UYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdTU5MUFcdTdBMEJcdTZBMjFcdTVGMEZcdTRFMEJcdTk2OTBcdTg1Q0ZcdTRGQzNcdTk1MDBcdTZBMkFcdTVFNDVcbiAgICBpZiAodGhpcy5oYXNQcm9tb3Rpb25CYW5uZXJUYXJnZXQpIHtcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRUeXBlVmFsdWUgPT09ICdtdWx0aV9jaXR5Jykge1xuICAgICAgICB0aGlzLnByb21vdGlvbkJhbm5lclRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wcm9tb3Rpb25CYW5uZXJUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdERhdGUoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKVxuICAgIGNvbnN0IG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJylcbiAgICBjb25zdCBkYXkgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJylcbiAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YFxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJtb2RhbFwiLCBcInNlbGVjdGVkRGF0ZVwiLCBcImRhdGVJbnB1dFwiXVxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIGN1cnJlbnREYXRlOiBTdHJpbmcsXG4gICAgbWluRGF0ZTogU3RyaW5nXG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IG1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlbGVjdGVkRGF0ZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkYXRlSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSBjdXJyZW50RGF0ZVZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBtaW5EYXRlVmFsdWU6IHN0cmluZ1xuXG4gIHByaXZhdGUgc2VsZWN0ZWREYXRlT2JqOiBEYXRlIHwgbnVsbCA9IG51bGxcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiUmV0dXJuRGF0ZVBpY2tlciBjb25uZWN0ZWRcIilcbiAgICAvLyBJbml0aWFsaXplIHdpdGggZGVwYXJ0dXJlIGRhdGUgKyAxIGlmIG5vIHJldHVybiBkYXRlIGlzIHNldFxuICAgIGlmICh0aGlzLmN1cnJlbnREYXRlVmFsdWUpIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWREYXRlT2JqID0gbmV3IERhdGUodGhpcy5jdXJyZW50RGF0ZVZhbHVlKVxuICAgIH0gZWxzZSBpZiAodGhpcy5taW5EYXRlVmFsdWUpIHtcbiAgICAgIGNvbnN0IG1pbkRhdGUgPSBuZXcgRGF0ZSh0aGlzLm1pbkRhdGVWYWx1ZSlcbiAgICAgIG1pbkRhdGUuc2V0RGF0ZShtaW5EYXRlLmdldERhdGUoKSArIDEpXG4gICAgICB0aGlzLnNlbGVjdGVkRGF0ZU9iaiA9IG1pbkRhdGVcbiAgICAgIHRoaXMuY3VycmVudERhdGVWYWx1ZSA9IHRoaXMuZm9ybWF0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZU9iailcbiAgICB9XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWREYXRlT2JqKSB7XG4gICAgICB0aGlzLnVwZGF0ZURpc3BsYXllZERhdGUoKVxuICAgIH1cbiAgfVxuXG4gIG9wZW5Nb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nXG4gIH1cblxuICBjbG9zZU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJydcbiAgfVxuXG4gIHNlbGVjdERhdGUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGRhdGVTdHIgPSBidXR0b24uZGF0YXNldC5kYXRlIHx8ICcnXG4gICAgXG4gICAgaWYgKCFkYXRlU3RyKSByZXR1cm5cblxuICAgIHRoaXMuc2VsZWN0ZWREYXRlT2JqID0gbmV3IERhdGUoZGF0ZVN0cilcbiAgICB0aGlzLmN1cnJlbnREYXRlVmFsdWUgPSBkYXRlU3RyXG4gICAgdGhpcy51cGRhdGVEaXNwbGF5ZWREYXRlKClcbiAgICB0aGlzLmRhdGVJbnB1dFRhcmdldC52YWx1ZSA9IGRhdGVTdHJcbiAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVEaXNwbGF5ZWREYXRlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5zZWxlY3RlZERhdGVPYmopIHJldHVyblxuICAgIFxuICAgIGNvbnN0IG1vbnRoID0gdGhpcy5zZWxlY3RlZERhdGVPYmouZ2V0TW9udGgoKSArIDFcbiAgICBjb25zdCBkYXkgPSB0aGlzLnNlbGVjdGVkRGF0ZU9iai5nZXREYXRlKClcbiAgICBjb25zdCBkYXlOYW1lID0gdGhpcy5nZXREYXlOYW1lKHRoaXMuc2VsZWN0ZWREYXRlT2JqKVxuICAgIFxuICAgIHRoaXMuc2VsZWN0ZWREYXRlVGFyZ2V0LmlubmVySFRNTCA9IGBcbiAgICAgICR7bW9udGh9PHNwYW4gY2xhc3M9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIG14LTAuNVwiPlx1NjcwODwvc3Bhbj4ke2RheX08c3BhbiBjbGFzcz1cInRleHQtbGcgZm9udC1tZWRpdW0gbWwtMC41IG1yLTJcIj5cdTY1RTU8L3NwYW4+XG4gICAgICA8c3BhbiBjbGFzcz1cInRleHQtYmFzZSB0ZXh0LWdyYXktNTAwIGZvbnQtbWVkaXVtXCI+JHtkYXlOYW1lfTwvc3Bhbj5cbiAgICBgXG4gIH1cblxuICBwcml2YXRlIGdldERheU5hbWUoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXG4gICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICBjb25zdCB0YXJnZXREYXRlID0gbmV3IERhdGUoZGF0ZSlcbiAgICB0YXJnZXREYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgXG4gICAgY29uc3QgZGlmZlRpbWUgPSB0YXJnZXREYXRlLmdldFRpbWUoKSAtIHRvZGF5LmdldFRpbWUoKVxuICAgIGNvbnN0IGRpZmZEYXlzID0gTWF0aC5yb3VuZChkaWZmVGltZSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSlcbiAgICBcbiAgICBpZiAoZGlmZkRheXMgPT09IDApIHJldHVybiAnXHU0RUNBXHU1OTI5J1xuICAgIGlmIChkaWZmRGF5cyA9PT0gMSkgcmV0dXJuICdcdTY2MEVcdTU5MjknXG4gICAgaWYgKGRpZmZEYXlzID09PSAyKSByZXR1cm4gJ1x1NTQwRVx1NTkyOSdcbiAgICBcbiAgICBjb25zdCB3ZWVrZGF5cyA9IFsnXHU1NDY4XHU2NUU1JywgJ1x1NTQ2OFx1NEUwMCcsICdcdTU0NjhcdTRFOEMnLCAnXHU1NDY4XHU0RTA5JywgJ1x1NTQ2OFx1NTZEQicsICdcdTU0NjhcdTRFOTQnLCAnXHU1NDY4XHU1MTZEJ11cbiAgICByZXR1cm4gd2Vla2RheXNbZGF0ZS5nZXREYXkoKV1cbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0RGF0ZShkYXRlOiBEYXRlKTogc3RyaW5nIHtcbiAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpXG4gICAgY29uc3QgbW9udGggPSBTdHJpbmcoZGF0ZS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKVxuICAgIGNvbnN0IGRheSA9IFN0cmluZyhkYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKVxuICAgIHJldHVybiBgJHt5ZWFyfS0ke21vbnRofS0ke2RheX1gXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlciB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wib3V0Ym91bmRGbGlnaHRcIiwgXCJyZXR1cm5GbGlnaHRcIiwgXCJzdWJtaXRCdXR0b25cIiwgXCJzZWxlY3RlZE91dGJvdW5kSWRcIiwgXCJzZWxlY3RlZFJldHVybklkXCIsIFwidG90YWxQcmljZVwiXVxuXG4gIHNlbGVjdGVkT3V0Ym91bmRJZFZhbHVlOiBzdHJpbmcgPSBcIlwiXG4gIHNlbGVjdGVkUmV0dXJuSWRWYWx1ZTogc3RyaW5nID0gXCJcIlxuICBvdXRib3VuZFByaWNlOiBudW1iZXIgPSAwXG4gIHJldHVyblByaWNlOiBudW1iZXIgPSAwXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICB0aGlzLnVwZGF0ZVN1Ym1pdEJ1dHRvbigpXG4gIH1cblxuICBzZWxlY3RPdXRib3VuZChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgY2FyZCA9IChldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCdbZGF0YS1mbGlnaHQtaWRdJykgYXMgSFRNTEVsZW1lbnRcbiAgICBpZiAoIWNhcmQpIHJldHVyblxuXG4gICAgY29uc3QgZmxpZ2h0SWQgPSBjYXJkLmRhdGFzZXQuZmxpZ2h0SWQgfHwgXCJcIlxuICAgIGNvbnN0IHByaWNlID0gcGFyc2VGbG9hdChjYXJkLmRhdGFzZXQucHJpY2UgfHwgXCIwXCIpXG5cbiAgICAvLyBSZW1vdmUgcHJldmlvdXMgc2VsZWN0aW9uXG4gICAgdGhpcy5vdXRib3VuZEZsaWdodFRhcmdldHMuZm9yRWFjaChlbCA9PiB7XG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdyaW5nLTInLCAncmluZy1ibHVlLTUwMCcsICdiZy1ibHVlLTUwJylcbiAgICB9KVxuXG4gICAgLy8gQWRkIHNlbGVjdGlvbiB0byBjdXJyZW50XG4gICAgY2FyZC5jbGFzc0xpc3QuYWRkKCdyaW5nLTInLCAncmluZy1ibHVlLTUwMCcsICdiZy1ibHVlLTUwJylcblxuICAgIHRoaXMuc2VsZWN0ZWRPdXRib3VuZElkVmFsdWUgPSBmbGlnaHRJZFxuICAgIHRoaXMub3V0Ym91bmRQcmljZSA9IHByaWNlXG4gICAgXG4gICAgaWYgKHRoaXMuaGFzU2VsZWN0ZWRPdXRib3VuZElkVGFyZ2V0KSB7XG4gICAgICB0aGlzLnNlbGVjdGVkT3V0Ym91bmRJZFRhcmdldC52YWx1ZSA9IGZsaWdodElkXG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVTdWJtaXRCdXR0b24oKVxuICB9XG5cbiAgc2VsZWN0UmV0dXJuKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBjYXJkID0gKGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsb3Nlc3QoJ1tkYXRhLWZsaWdodC1pZF0nKSBhcyBIVE1MRWxlbWVudFxuICAgIGlmICghY2FyZCkgcmV0dXJuXG5cbiAgICBjb25zdCBmbGlnaHRJZCA9IGNhcmQuZGF0YXNldC5mbGlnaHRJZCB8fCBcIlwiXG4gICAgY29uc3QgcHJpY2UgPSBwYXJzZUZsb2F0KGNhcmQuZGF0YXNldC5wcmljZSB8fCBcIjBcIilcblxuICAgIC8vIFJlbW92ZSBwcmV2aW91cyBzZWxlY3Rpb25cbiAgICB0aGlzLnJldHVybkZsaWdodFRhcmdldHMuZm9yRWFjaChlbCA9PiB7XG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdyaW5nLTInLCAncmluZy1ibHVlLTUwMCcsICdiZy1ibHVlLTUwJylcbiAgICB9KVxuXG4gICAgLy8gQWRkIHNlbGVjdGlvbiB0byBjdXJyZW50XG4gICAgY2FyZC5jbGFzc0xpc3QuYWRkKCdyaW5nLTInLCAncmluZy1ibHVlLTUwMCcsICdiZy1ibHVlLTUwJylcblxuICAgIHRoaXMuc2VsZWN0ZWRSZXR1cm5JZFZhbHVlID0gZmxpZ2h0SWRcbiAgICB0aGlzLnJldHVyblByaWNlID0gcHJpY2VcbiAgICBcbiAgICBpZiAodGhpcy5oYXNTZWxlY3RlZFJldHVybklkVGFyZ2V0KSB7XG4gICAgICB0aGlzLnNlbGVjdGVkUmV0dXJuSWRUYXJnZXQudmFsdWUgPSBmbGlnaHRJZFxuICAgIH1cblxuICAgIHRoaXMudXBkYXRlU3VibWl0QnV0dG9uKClcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU3VibWl0QnV0dG9uKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNTdWJtaXRCdXR0b25UYXJnZXQpIHJldHVyblxuXG4gICAgY29uc3QgYm90aFNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZE91dGJvdW5kSWRWYWx1ZSAmJiB0aGlzLnNlbGVjdGVkUmV0dXJuSWRWYWx1ZVxuXG4gICAgaWYgKGJvdGhTZWxlY3RlZCkge1xuICAgICAgdGhpcy5zdWJtaXRCdXR0b25UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnb3BhY2l0eS01MCcsICdjdXJzb3Itbm90LWFsbG93ZWQnKVxuICAgICAgdGhpcy5zdWJtaXRCdXR0b25UYXJnZXQuY2xhc3NMaXN0LmFkZCgnY3Vyc29yLXBvaW50ZXInKVxuICAgICAgdGhpcy5zdWJtaXRCdXR0b25UYXJnZXQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpXG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSB0b3RhbCBwcmljZSBkaXNwbGF5XG4gICAgICBpZiAodGhpcy5oYXNUb3RhbFByaWNlVGFyZ2V0KSB7XG4gICAgICAgIGNvbnN0IHRvdGFsID0gdGhpcy5vdXRib3VuZFByaWNlICsgdGhpcy5yZXR1cm5QcmljZVxuICAgICAgICB0aGlzLnRvdGFsUHJpY2VUYXJnZXQudGV4dENvbnRlbnQgPSBgXHUwMEE1JHt0b3RhbC50b0ZpeGVkKDApfWBcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdWJtaXRCdXR0b25UYXJnZXQuY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS01MCcsICdjdXJzb3Itbm90LWFsbG93ZWQnKVxuICAgICAgdGhpcy5zdWJtaXRCdXR0b25UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnY3Vyc29yLXBvaW50ZXInKVxuICAgICAgdGhpcy5zdWJtaXRCdXR0b25UYXJnZXQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpXG4gICAgICBcbiAgICAgIGlmICh0aGlzLmhhc1RvdGFsUHJpY2VUYXJnZXQpIHtcbiAgICAgICAgdGhpcy50b3RhbFByaWNlVGFyZ2V0LnRleHRDb250ZW50ID0gJ1x1OEJGN1x1OTAwOVx1NjJFOVx1NTNCQlx1N0EwQlx1NTQ4Q1x1OEZENFx1N0EwQlx1ODIyQVx1NzNFRCdcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdWJtaXQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnNlbGVjdGVkT3V0Ym91bmRJZFZhbHVlIHx8ICF0aGlzLnNlbGVjdGVkUmV0dXJuSWRWYWx1ZSkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgYWxlcnQoJ1x1OEJGN1x1OTAwOVx1NjJFOVx1NTNCQlx1N0EwQlx1NTQ4Q1x1OEZENFx1N0EwQlx1ODIyQVx1NzNFRCcpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBGb3JtIHdpbGwgc3VibWl0IG5hdHVyYWxseSB3aXRoIGhpZGRlbiBpbnB1dHNcbiAgfVxuXG4gIGRlY2xhcmUgb3V0Ym91bmRGbGlnaHRUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmV0dXJuRmxpZ2h0VGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHN1Ym1pdEJ1dHRvblRhcmdldDogSFRNTEJ1dHRvbkVsZW1lbnRcbiAgZGVjbGFyZSBzZWxlY3RlZE91dGJvdW5kSWRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSBzZWxlY3RlZFJldHVybklkVGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgdG90YWxQcmljZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSBoYXNTdWJtaXRCdXR0b25UYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSBoYXNTZWxlY3RlZE91dGJvdW5kSWRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSBoYXNTZWxlY3RlZFJldHVybklkVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgaGFzVG90YWxQcmljZVRhcmdldDogYm9vbGVhblxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwiZGVwYXJ0dXJlQ2l0eVwiLFxuICAgIFwiYXJyaXZhbENpdHlcIixcbiAgICBcImRlcGFydHVyZUNpdHlJbnB1dFwiLFxuICAgIFwiYXJyaXZhbENpdHlJbnB1dFwiLFxuICAgIFwic2VsZWN0ZWREYXRlXCIsXG4gICAgXCJkYXRlSW5wdXRcIixcbiAgICBcInN0dWRlbnRUaWNrZXRcIixcbiAgICBcImhpZ2hTcGVlZE9ubHlcIlxuICBdXG5cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBkZXBhcnR1cmVDaXR5OiBTdHJpbmcsXG4gICAgYXJyaXZhbENpdHk6IFN0cmluZyxcbiAgICBkYXRlOiBTdHJpbmdcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVwYXJ0dXJlQ2l0eVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBhcnJpdmFsQ2l0eVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkZXBhcnR1cmVDaXR5SW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBhcnJpdmFsQ2l0eUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VsZWN0ZWREYXRlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRhdGVJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHN0dWRlbnRUaWNrZXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoaWdoU3BlZWRPbmx5VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgZGVwYXJ0dXJlQ2l0eVZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBhcnJpdmFsQ2l0eVZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBkYXRlVmFsdWU6IHN0cmluZ1xuXG4gIHByaXZhdGUgc2VsZWN0ZWREYXRlT2JqOiBEYXRlID0gbmV3IERhdGUoKVxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJUcmFpblNlYXJjaCBjb25uZWN0ZWRcIilcbiAgICAvLyBJbml0aWFsaXplIGRlZmF1bHQgdmFsdWVzXG4gICAgaWYgKCF0aGlzLmRlcGFydHVyZUNpdHlWYWx1ZSkgdGhpcy5kZXBhcnR1cmVDaXR5VmFsdWUgPSBcIlx1NTMxN1x1NEVBQ1x1NUUwMlwiXG4gICAgaWYgKCF0aGlzLmFycml2YWxDaXR5VmFsdWUpIHRoaXMuYXJyaXZhbENpdHlWYWx1ZSA9IFwiXHU2NzZEXHU1RERFXHU1RTAyXCJcbiAgICBpZiAoIXRoaXMuZGF0ZVZhbHVlKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkRGF0ZU9iaiA9IG5ldyBEYXRlKClcbiAgICAgIC8vIFNldCB0byB0b21vcnJvdyBieSBkZWZhdWx0XG4gICAgICB0aGlzLnNlbGVjdGVkRGF0ZU9iai5zZXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlT2JqLmdldERhdGUoKSArIDEpXG4gICAgICB0aGlzLmRhdGVWYWx1ZSA9IHRoaXMuZm9ybWF0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZU9iailcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZWxlY3RlZERhdGVPYmogPSBuZXcgRGF0ZSh0aGlzLmRhdGVWYWx1ZSlcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgaW5pdGlhbCBkaXNwbGF5XG4gICAgdGhpcy51cGRhdGVDaXR5RGlzcGxheSgpXG4gICAgdGhpcy51cGRhdGVEYXRlRGlzcGxheSgpXG4gIH1cblxuICAvLyBTd2l0Y2ggY2l0aWVzXG4gIHN3aXRjaENpdGllcygpOiB2b2lkIHtcbiAgICBjb25zdCB0ZW1wID0gdGhpcy5kZXBhcnR1cmVDaXR5VmFsdWVcbiAgICB0aGlzLmRlcGFydHVyZUNpdHlWYWx1ZSA9IHRoaXMuYXJyaXZhbENpdHlWYWx1ZVxuICAgIHRoaXMuYXJyaXZhbENpdHlWYWx1ZSA9IHRlbXBcbiAgICBcbiAgICB0aGlzLnVwZGF0ZUNpdHlEaXNwbGF5KClcbiAgfVxuXG4gIC8vIFVwZGF0ZSBjaXR5IGRpc3BsYXlcbiAgcHJpdmF0ZSB1cGRhdGVDaXR5RGlzcGxheSgpOiB2b2lkIHtcbiAgICB0aGlzLmRlcGFydHVyZUNpdHlUYXJnZXQudGV4dENvbnRlbnQgPSB0aGlzLmRlcGFydHVyZUNpdHlWYWx1ZVxuICAgIHRoaXMuYXJyaXZhbENpdHlUYXJnZXQudGV4dENvbnRlbnQgPSB0aGlzLmFycml2YWxDaXR5VmFsdWVcbiAgICB0aGlzLmRlcGFydHVyZUNpdHlJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlXG4gICAgdGhpcy5hcnJpdmFsQ2l0eUlucHV0VGFyZ2V0LnZhbHVlID0gdGhpcy5hcnJpdmFsQ2l0eVZhbHVlXG4gIH1cblxuICAvLyBVcGRhdGUgZGF0ZSBkaXNwbGF5XG4gIHByaXZhdGUgdXBkYXRlRGF0ZURpc3BsYXkoKTogdm9pZCB7XG4gICAgY29uc3QgbW9udGggPSB0aGlzLnNlbGVjdGVkRGF0ZU9iai5nZXRNb250aCgpICsgMVxuICAgIGNvbnN0IGRheSA9IHRoaXMuc2VsZWN0ZWREYXRlT2JqLmdldERhdGUoKVxuICAgIGNvbnN0IGRheU5hbWUgPSB0aGlzLmdldERheU5hbWUodGhpcy5zZWxlY3RlZERhdGVPYmopXG4gICAgXG4gICAgdGhpcy5zZWxlY3RlZERhdGVUYXJnZXQuaW5uZXJIVE1MID0gYFxuICAgICAgJHttb250aH08c3BhbiBjbGFzcz1cInRleHQtc21cIj5cdTY3MDg8L3NwYW4+JHtkYXl9PHNwYW4gY2xhc3M9XCJ0ZXh0LXNtXCI+XHU2NUU1PC9zcGFuPiA8c3BhbiBjbGFzcz1cInRleHQtc21cIj4ke2RheU5hbWV9PC9zcGFuPlxuICAgIGBcbiAgICB0aGlzLmRhdGVJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuZGF0ZVZhbHVlXG4gIH1cblxuICAvLyBHZXQgZGF5IG5hbWUgaW4gQ2hpbmVzZVxuICBwcml2YXRlIGdldERheU5hbWUoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXG4gICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICBjb25zdCB0YXJnZXREYXRlID0gbmV3IERhdGUoZGF0ZSlcbiAgICB0YXJnZXREYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgXG4gICAgY29uc3QgZGlmZlRpbWUgPSB0YXJnZXREYXRlLmdldFRpbWUoKSAtIHRvZGF5LmdldFRpbWUoKVxuICAgIGNvbnN0IGRpZmZEYXlzID0gTWF0aC5yb3VuZChkaWZmVGltZSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSlcbiAgICBcbiAgICBpZiAoZGlmZkRheXMgPT09IDApIHJldHVybiAnXHU0RUNBXHU1OTI5J1xuICAgIGlmIChkaWZmRGF5cyA9PT0gMSkgcmV0dXJuICdcdTY2MEVcdTU5MjknXG4gICAgaWYgKGRpZmZEYXlzID09PSAyKSByZXR1cm4gJ1x1NTQwRVx1NTkyOSdcbiAgICBcbiAgICBjb25zdCB3ZWVrZGF5cyA9IFsnXHU1NDY4XHU2NUU1JywgJ1x1NTQ2OFx1NEUwMCcsICdcdTU0NjhcdTRFOEMnLCAnXHU1NDY4XHU0RTA5JywgJ1x1NTQ2OFx1NTZEQicsICdcdTU0NjhcdTRFOTQnLCAnXHU1NDY4XHU1MTZEJ11cbiAgICByZXR1cm4gd2Vla2RheXNbZGF0ZS5nZXREYXkoKV1cbiAgfVxuXG4gIC8vIEZvcm1hdCBkYXRlIGFzIFlZWVktTU0tRERcbiAgcHJpdmF0ZSBmb3JtYXREYXRlKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKClcbiAgICBjb25zdCBtb250aCA9IFN0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpXG4gICAgY29uc3QgZGF5ID0gU3RyaW5nKGRhdGUuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpXG4gICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fWBcbiAgfVxuXG4gIC8vIFRvZ2dsZSBzdHVkZW50IHRpY2tldFxuICB0b2dnbGVTdHVkZW50VGlja2V0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiU3R1ZGVudCB0aWNrZXQgdG9nZ2xlZDpcIiwgdGhpcy5zdHVkZW50VGlja2V0VGFyZ2V0LmNoZWNrZWQpXG4gIH1cblxuICAvLyBUb2dnbGUgaGlnaCBzcGVlZCBvbmx5XG4gIHRvZ2dsZUhpZ2hTcGVlZE9ubHkoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJIaWdoIHNwZWVkIG9ubHkgdG9nZ2xlZDpcIiwgdGhpcy5oaWdoU3BlZWRPbmx5VGFyZ2V0LmNoZWNrZWQpXG4gIH1cblxuICAvLyBIYW5kbGUgc2VhcmNoIGZvcm0gc3VibWlzc2lvbiAoVHVyYm8gaGFuZGxlcyBhY3R1YWwgc3VibWlzc2lvbilcbiAgLy8gVGhpcyBpcyBqdXN0IGZvciBhbnkgcHJlLXN1Ym1pc3Npb24gVUkgZmVlZGJhY2sgaWYgbmVlZGVkXG4gIHNlYXJjaCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlNlYXJjaGluZyB0cmFpbnM6XCIsIHtcbiAgICAgIGZyb206IHRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlLFxuICAgICAgdG86IHRoaXMuYXJyaXZhbENpdHlWYWx1ZSxcbiAgICAgIGRhdGU6IHRoaXMuZGF0ZVZhbHVlXG4gICAgfSlcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwidHJhaW5JdGVtXCJcbiAgXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgdHJhaW5JdGVtVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJUcmFpbkxpc3QgY29ubmVjdGVkXCIpXG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiVHJhaW5MaXN0IGRpc2Nvbm5lY3RlZFwiKVxuICB9XG5cbiAgdG9nZ2xlRmlsdGVyKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBidXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnYmctcHJpbWFyeScpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ3RleHQtcHJpbWFyeS1mb3JlZ3JvdW5kJylcbiAgICBidXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnYmctc3VyZmFjZS1lbGV2YXRlZCcpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ3RleHQtZm9yZWdyb3VuZCcpXG4gIH1cblxuICB0b2dnbGVTdGF0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBidXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnYmctcHJpbWFyeScpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ3RleHQtcHJpbWFyeS1mb3JlZ3JvdW5kJylcbiAgICBidXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnYmctc3VyZmFjZS1lbGV2YXRlZCcpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ3RleHQtZm9yZWdyb3VuZCcpXG4gIH1cblxuICBzaG93QWR2YW5jZWRGaWx0ZXJzKCk6IHZvaWQge1xuICAgIC8vIFNob3cgYWR2YW5jZWQgZmlsdGVycyBtb2RhbCAoZnV0dXJlIGltcGxlbWVudGF0aW9uKVxuICAgIGNvbnNvbGUubG9nKCdTaG93IGFkdmFuY2VkIGZpbHRlcnMnKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJtb2RhbFwiLFxuICAgIFwiZGVwYXJ0dXJlXCIsXG4gICAgXCJkZXN0aW5hdGlvblwiLFxuICAgIFwiZGVwYXJ0dXJlQ2l0eUlucHV0XCIsXG4gICAgXCJkZXN0aW5hdGlvbkNpdHlJbnB1dFwiLFxuICAgIFwidGFiRGVwYXJ0dXJlXCIsXG4gICAgXCJ0YWJEZXN0aW5hdGlvblwiLFxuICAgIFwic2VhcmNoSW5wdXRcIixcbiAgICBcImRvbWVzdGljTGlzdFwiLFxuICAgIFwiaW50ZXJuYXRpb25hbExpc3RcIixcbiAgICBcImhpc3RvcnlTZWN0aW9uXCIsXG4gICAgXCJjdXJyZW50Q2l0eVwiXG4gIF1cblxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIGRlcGFydHVyZUNpdHk6IFN0cmluZyxcbiAgICBkZXN0aW5hdGlvbkNpdHk6IFN0cmluZ1xuICB9XG5cbiAgcHJpdmF0ZSBzZWxlY3Rpb25UeXBlOiAnZGVwYXJ0dXJlJyB8ICdkZXN0aW5hdGlvbicgPSAnZGVwYXJ0dXJlJ1xuXG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVwYXJ0dXJlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRlc3RpbmF0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRlcGFydHVyZUNpdHlJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRlc3RpbmF0aW9uQ2l0eUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzTW9kYWxUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSB0YWJEZXBhcnR1cmVUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdGFiRGVzdGluYXRpb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VhcmNoSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkb21lc3RpY0xpc3RUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaW50ZXJuYXRpb25hbExpc3RUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGlzdG9yeVNlY3Rpb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY3VycmVudENpdHlUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgZGVwYXJ0dXJlQ2l0eVZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBkZXN0aW5hdGlvbkNpdHlWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlRyYWluQ2l0eVNlbGVjdG9yIGNvbm5lY3RlZFwiKVxuICAgIC8vIEluaXRpYWxpemUgZGVmYXVsdCB2YWx1ZXNcbiAgICBpZiAoIXRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlKSB0aGlzLmRlcGFydHVyZUNpdHlWYWx1ZSA9IFwiXHU1MzE3XHU0RUFDXCJcbiAgICBpZiAoIXRoaXMuZGVzdGluYXRpb25DaXR5VmFsdWUpIHRoaXMuZGVzdGluYXRpb25DaXR5VmFsdWUgPSBcIlx1Njc2RFx1NURERVwiXG4gICAgXG4gICAgLy8gU2V0IGluaXRpYWwgdmFsdWVzIHRvIGhpZGRlbiBpbnB1dHNcbiAgICB0aGlzLmRlcGFydHVyZUNpdHlJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlXG4gICAgdGhpcy5kZXN0aW5hdGlvbkNpdHlJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuZGVzdGluYXRpb25DaXR5VmFsdWVcbiAgfVxuXG4gIC8vIE9wZW4gbW9kYWwgZm9yIGRlcGFydHVyZSBjaXR5IHNlbGVjdGlvblxuICBvcGVuRGVwYXJ0dXJlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNNb2RhbFRhcmdldCkge1xuICAgICAgY29uc29sZS5sb2coJ1RyYWluQ2l0eVNlbGVjdG9yOiBObyBtb2RhbCBhdmFpbGFibGUsIHNraXBwaW5nJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0aGlzLnNlbGVjdGlvblR5cGUgPSAnZGVwYXJ0dXJlJ1xuICAgIHRoaXMudXBkYXRlTW9kYWxUaXRsZSgpXG4gICAgdGhpcy5zaG93TW9kYWwoKVxuICB9XG5cbiAgLy8gT3BlbiBtb2RhbCBmb3IgZGVzdGluYXRpb24gY2l0eSBzZWxlY3Rpb25cbiAgb3BlbkRlc3RpbmF0aW9uKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNNb2RhbFRhcmdldCkge1xuICAgICAgY29uc29sZS5sb2coJ1RyYWluQ2l0eVNlbGVjdG9yOiBObyBtb2RhbCBhdmFpbGFibGUsIHNraXBwaW5nJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0aGlzLnNlbGVjdGlvblR5cGUgPSAnZGVzdGluYXRpb24nXG4gICAgdGhpcy51cGRhdGVNb2RhbFRpdGxlKClcbiAgICB0aGlzLnNob3dNb2RhbCgpXG4gIH1cblxuICAvLyBTaG93IG1vZGFsXG4gIHNob3dNb2RhbCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaGFzTW9kYWxUYXJnZXQpIHJldHVyblxuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbidcbiAgfVxuXG4gIC8vIENsb3NlIG1vZGFsXG4gIGNsb3NlTW9kYWwoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc01vZGFsVGFyZ2V0KSByZXR1cm5cbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICcnXG4gICAgdGhpcy5jbGVhclNlYXJjaCgpXG4gIH1cblxuICAvLyBTZWxlY3QgY2l0eVxuICBzZWxlY3RDaXR5KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBjaXR5TmFtZSA9IGJ1dHRvbi5kYXRhc2V0LmNpdHlOYW1lIHx8ICcnXG4gICAgXG4gICAgaWYgKHRoaXMuc2VsZWN0aW9uVHlwZSA9PT0gJ2RlcGFydHVyZScpIHtcbiAgICAgIHRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlID0gY2l0eU5hbWVcbiAgICAgIHRoaXMuZGVwYXJ0dXJlVGFyZ2V0LnRleHRDb250ZW50ID0gY2l0eU5hbWVcbiAgICAgIHRoaXMuZGVwYXJ0dXJlQ2l0eUlucHV0VGFyZ2V0LnZhbHVlID0gY2l0eU5hbWVcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kZXN0aW5hdGlvbkNpdHlWYWx1ZSA9IGNpdHlOYW1lXG4gICAgICB0aGlzLmRlc3RpbmF0aW9uVGFyZ2V0LnRleHRDb250ZW50ID0gY2l0eU5hbWVcbiAgICAgIHRoaXMuZGVzdGluYXRpb25DaXR5SW5wdXRUYXJnZXQudmFsdWUgPSBjaXR5TmFtZVxuICAgIH1cbiAgICBcbiAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICB9XG5cbiAgLy8gU3dpdGNoIGNpdGllc1xuICBzd2l0Y2hDaXRpZXMoKTogdm9pZCB7XG4gICAgY29uc3QgdGVtcCA9IHRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlXG4gICAgdGhpcy5kZXBhcnR1cmVDaXR5VmFsdWUgPSB0aGlzLmRlc3RpbmF0aW9uQ2l0eVZhbHVlXG4gICAgdGhpcy5kZXN0aW5hdGlvbkNpdHlWYWx1ZSA9IHRlbXBcbiAgICBcbiAgICB0aGlzLmRlcGFydHVyZVRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlXG4gICAgdGhpcy5kZXN0aW5hdGlvblRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMuZGVzdGluYXRpb25DaXR5VmFsdWVcbiAgICB0aGlzLmRlcGFydHVyZUNpdHlJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlXG4gICAgdGhpcy5kZXN0aW5hdGlvbkNpdHlJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuZGVzdGluYXRpb25DaXR5VmFsdWVcbiAgfVxuXG4gIC8vIFN3aXRjaCBiZXR3ZWVuIGRvbWVzdGljIGFuZCBpbnRlcm5hdGlvbmFsIHRhYnNcbiAgc2hvd0RvbWVzdGljKCk6IHZvaWQge1xuICAgIHRoaXMuZG9tZXN0aWNMaXN0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgdGhpcy5pbnRlcm5hdGlvbmFsTGlzdFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIHRoaXMudGFiRGVwYXJ0dXJlVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZS10YWInKVxuICAgIHRoaXMudGFiRGVzdGluYXRpb25UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlLXRhYicpXG4gIH1cblxuICBzaG93SW50ZXJuYXRpb25hbCgpOiB2b2lkIHtcbiAgICB0aGlzLmRvbWVzdGljTGlzdFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIHRoaXMuaW50ZXJuYXRpb25hbExpc3RUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICB0aGlzLnRhYkRlcGFydHVyZVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUtdGFiJylcbiAgICB0aGlzLnRhYkRlc3RpbmF0aW9uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZS10YWInKVxuICB9XG5cbiAgLy8gU2VhcmNoIGNpdGllc1xuICBzZWFyY2goKTogdm9pZCB7XG4gICAgY29uc3QgcXVlcnkgPSB0aGlzLnNlYXJjaElucHV0VGFyZ2V0LnZhbHVlLnRvTG93ZXJDYXNlKCkudHJpbSgpXG4gICAgXG4gICAgaWYgKHF1ZXJ5ID09PSAnJykge1xuICAgICAgdGhpcy5jbGVhclNlYXJjaCgpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBIaWRlIGhpc3Rvcnkgc2VjdGlvbiB3aGVuIHNlYXJjaGluZ1xuICAgIHRoaXMuaGlzdG9yeVNlY3Rpb25UYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBcbiAgICAvLyBGaWx0ZXIgY2l0aWVzIGluIGJvdGggbGlzdHNcbiAgICB0aGlzLmZpbHRlckNpdGllcyh0aGlzLmRvbWVzdGljTGlzdFRhcmdldCwgcXVlcnkpXG4gICAgaWYgKCF0aGlzLmludGVybmF0aW9uYWxMaXN0VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHtcbiAgICAgIHRoaXMuZmlsdGVyQ2l0aWVzKHRoaXMuaW50ZXJuYXRpb25hbExpc3RUYXJnZXQsIHF1ZXJ5KVxuICAgIH1cbiAgfVxuXG4gIC8vIEZpbHRlciBjaXRpZXMgaGVscGVyXG4gIHByaXZhdGUgZmlsdGVyQ2l0aWVzKGxpc3RUYXJnZXQ6IEhUTUxFbGVtZW50LCBxdWVyeTogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgY2l0eUJ1dHRvbnMgPSBsaXN0VGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWNpdHktbmFtZV0nKVxuICAgIGNpdHlCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgICAgY29uc3QgY2l0eU5hbWUgPSAoYnV0dG9uIGFzIEhUTUxFbGVtZW50KS5kYXRhc2V0LmNpdHlOYW1lPy50b0xvd2VyQ2FzZSgpIHx8ICcnXG4gICAgICBjb25zdCBjaXR5UGlueWluID0gKGJ1dHRvbiBhcyBIVE1MRWxlbWVudCkuZGF0YXNldC5jaXR5UGlueWluPy50b0xvd2VyQ2FzZSgpIHx8ICcnXG4gICAgICBcbiAgICAgIGlmIChjaXR5TmFtZS5pbmNsdWRlcyhxdWVyeSkgfHwgY2l0eVBpbnlpbi5pbmNsdWRlcyhxdWVyeSkpIHtcbiAgICAgICAgKGJ1dHRvbiBhcyBIVE1MRWxlbWVudCkuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIChidXR0b24gYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8vIENsZWFyIHNlYXJjaFxuICBjbGVhclNlYXJjaCgpOiB2b2lkIHtcbiAgICB0aGlzLnNlYXJjaElucHV0VGFyZ2V0LnZhbHVlID0gJydcbiAgICB0aGlzLmhpc3RvcnlTZWN0aW9uVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgXG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIC8vIFNob3cgYWxsIGNpdGllc1xuICAgIGNvbnN0IGFsbEJ1dHRvbnMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtY2l0eS1uYW1lXScpXG4gICAgYWxsQnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgIChidXR0b24gYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgfSlcbiAgfVxuXG4gIC8vIFVwZGF0ZSBtb2RhbCB0aXRsZSBiYXNlZCBvbiBzZWxlY3Rpb24gdHlwZVxuICBwcml2YXRlIHVwZGF0ZU1vZGFsVGl0bGUoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc01vZGFsVGFyZ2V0KSByZXR1cm5cbiAgICBjb25zdCB0aXRsZUVsZW1lbnQgPSB0aGlzLm1vZGFsVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW1vZGFsLXRpdGxlXScpXG4gICAgaWYgKHRpdGxlRWxlbWVudCkge1xuICAgICAgdGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5zZWxlY3Rpb25UeXBlID09PSAnZGVwYXJ0dXJlJyA/ICdcdTUzNTVcdTkwMDlcdTUxRkFcdTUzRDFcdTU3MzAnIDogJ1x1NTM1NVx1OTAwOVx1NzZFRVx1NzY4NFx1NTczMCdcbiAgICB9XG4gIH1cblxuICAvLyBKdW1wIHRvIGxldHRlciBzZWN0aW9uXG4gIGp1bXBUb0xldHRlcihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgbGV0dGVyID0gYnV0dG9uLmRhdGFzZXQubGV0dGVyIHx8ICcnXG4gICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuZG9tZXN0aWNMaXN0VGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWxldHRlci1zZWN0aW9uPVwiJHtsZXR0ZXJ9XCJdYClcbiAgICBcbiAgICBpZiAoc2VjdGlvbikge1xuICAgICAgc2VjdGlvbi5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSlcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcInRyaWdnZXJcIiwgICAgICAvLyBcdTg5RTZcdTUzRDFcdTUyQTBcdThGN0RcdTc2ODRcdTRFMERcdTUzRUZcdTg5QzFcdTUxNDNcdTdEMjBcbiAgICBcImNvbnRhaW5lclwiLCAgICAvLyBcdTUxODVcdTVCQjlcdTVCQjlcdTU2NjhcbiAgICBcImxvYWRpbmdcIiAgICAgICAvLyBcdTUyQTBcdThGN0RcdTYzMDdcdTc5M0FcdTU2NjhcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgcGFnZTogTnVtYmVyLCAgICAgIC8vIFx1NUY1M1x1NTI0RFx1OTg3NVx1NzgwMVxuICAgIGhhc01vcmU6IEJvb2xlYW4gICAvLyBcdTY2MkZcdTU0MjZcdThGRDhcdTY3MDlcdTY2RjRcdTU5MUFcdTY1NzBcdTYzNkVcbiAgfVxuXG4gIC8vIERlY2xhcmUgdGFyZ2V0cyBhbmQgdmFsdWVzXG4gIGRlY2xhcmUgcmVhZG9ubHkgdHJpZ2dlclRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjb250YWluZXJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbG9hZGluZ1RhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSBwYWdlVmFsdWU6IG51bWJlclxuICBkZWNsYXJlIGhhc01vcmVWYWx1ZTogYm9vbGVhblxuXG4gIHByaXZhdGUgb2JzZXJ2ZXI6IEludGVyc2VjdGlvbk9ic2VydmVyIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSBpc0xvYWRpbmc6IGJvb2xlYW4gPSBmYWxzZVxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJJbmZpbml0ZVNjcm9sbCBjb25uZWN0ZWQsIGluaXRpYWwgcGFnZTpcIiwgdGhpcy5wYWdlVmFsdWUsIFwiaGFzTW9yZTpcIiwgdGhpcy5oYXNNb3JlVmFsdWUpXG4gICAgXG4gICAgLy8gXHU1M0VBXHU2NzA5XHU1NzI4XHU2NzA5XHU2NkY0XHU1OTFBXHU2NTcwXHU2MzZFXHU2NUY2XHU2MjREXHU4QkJFXHU3RjZFb2JzZXJ2ZXJcbiAgICBpZiAodGhpcy5oYXNNb3JlVmFsdWUpIHtcbiAgICAgIHRoaXMuc2V0dXBPYnNlcnZlcigpXG4gICAgfVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkluZmluaXRlU2Nyb2xsIGRpc2Nvbm5lY3RlZFwiKVxuICAgIGlmICh0aGlzLm9ic2VydmVyKSB7XG4gICAgICB0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKVxuICAgICAgdGhpcy5vYnNlcnZlciA9IG51bGxcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNldHVwT2JzZXJ2ZXIoKTogdm9pZCB7XG4gICAgLy8gXHU1MjFCXHU1RUZBSW50ZXJzZWN0aW9uT2JzZXJ2ZXJcdTc2RDFcdTU0MkN0cmlnZ2VyXHU1MTQzXHU3RDIwXG4gICAgdGhpcy5vYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgIChlbnRyaWVzKSA9PiB7XG4gICAgICAgIGVudHJpZXMuZm9yRWFjaCgoZW50cnkpID0+IHtcbiAgICAgICAgICAvLyBcdTVGNTN0cmlnZ2VyXHU1MTQzXHU3RDIwXHU4RkRCXHU1MTY1XHU4OUM2XHU1M0UzXHU2NUY2XHU4OUU2XHU1M0QxXHU1MkEwXHU4RjdEXG4gICAgICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nICYmIHRoaXMuaGFzTW9yZVZhbHVlICYmICF0aGlzLmlzTG9hZGluZykge1xuICAgICAgICAgICAgdGhpcy5sb2FkTW9yZSgpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgcm9vdDogbnVsbCwgICAgICAgICAgIC8vIFx1NEY3Rlx1NzUyOHZpZXdwb3J0XHU0RjVDXHU0RTNBcm9vdFxuICAgICAgICByb290TWFyZ2luOiBcIjEwMHB4XCIsICAvLyBcdTYzRDBcdTUyNEQxMDBweFx1ODlFNlx1NTNEMVxuICAgICAgICB0aHJlc2hvbGQ6IDAuMSAgICAgICAgLy8gMTAlXHU1M0VGXHU4OUMxXHU2NUY2XHU4OUU2XHU1M0QxXG4gICAgICB9XG4gICAgKVxuXG4gICAgLy8gXHU1RjAwXHU1OUNCXHU4OUMyXHU1QkRGdHJpZ2dlclx1NTE0M1x1N0QyMFxuICAgIHRoaXMub2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLnRyaWdnZXJUYXJnZXQpXG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRNb3JlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLmlzTG9hZGluZyB8fCAhdGhpcy5oYXNNb3JlVmFsdWUpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZVxuICAgIHRoaXMuc2hvd0xvYWRpbmcoKVxuXG4gICAgY29uc29sZS5sb2coXCJMb2FkaW5nIG1vcmUgdHJpcHMsIHBhZ2U6XCIsIHRoaXMucGFnZVZhbHVlKVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFx1NEY3Rlx1NzUyOFR1cmJvXHU1M0QxXHU4RDc3XHU4QkY3XHU2QzQyXHVGRjBDXHU4MUVBXHU1MkE4XHU1OTA0XHU3NDA2dHVyYm9fc3RyZWFtXHU1NENEXHU1RTk0XG4gICAgICBjb25zdCB1cmwgPSBgL3RyaXBzL2xvYWRfbW9yZT9wYWdlPSR7dGhpcy5wYWdlVmFsdWV9YFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiQWNjZXB0XCI6IFwidGV4dC92bmQudHVyYm8tc3RyZWFtLmh0bWxcIixcbiAgICAgICAgICBcIlgtUmVxdWVzdGVkLVdpdGhcIjogXCJYTUxIdHRwUmVxdWVzdFwiXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBodG1sID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpXG4gICAgICAgIFxuICAgICAgICAvLyBcdTYyNEJcdTUyQThcdTU5MDRcdTc0MDZUdXJibyBTdHJlYW1cdTU0Q0RcdTVFOTRcbiAgICAgICAgY29uc3Qgc3RyZWFtRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgIHN0cmVhbUVsZW1lbnQuaW5uZXJIVE1MID0gaHRtbFxuICAgICAgICBcbiAgICAgICAgLy8gXHU2MjY3XHU4ODRDdHVyYm8tc3RyZWFtXHU2ODA3XHU3QjdFXG4gICAgICAgIGNvbnN0IHR1cmJvU3RyZWFtcyA9IHN0cmVhbUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgndHVyYm8tc3RyZWFtJylcbiAgICAgICAgdHVyYm9TdHJlYW1zLmZvckVhY2goKHN0cmVhbSkgPT4ge1xuICAgICAgICAgIC8vIFR1cmJvXHU0RjFBXHU4MUVBXHU1MkE4XHU1OTA0XHU3NDA2XHU4RkQ5XHU0RTlCXHU1MTQzXHU3RDIwXG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzdHJlYW0pXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICAvLyBcdTU4OUVcdTUyQTBcdTk4NzVcdTc4MDFcbiAgICAgICAgdGhpcy5wYWdlVmFsdWUrK1xuICAgICAgICBcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU4RkQ4XHU2NzA5XHU2NkY0XHU1OTFBXHU2NTcwXHU2MzZFXHVGRjA4XHU5MDFBXHU4RkM3XHU2OEMwXHU2N0U1XHU1NENEXHU1RTk0XHU0RTJEXHU2NjJGXHU1NDI2XHU1MzA1XHU1NDJCaGFzX21vcmVcdTRGRTFcdTYwNkZcdUZGMDlcbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2Q0ExXHU2NzA5XHU2NkY0XHU1OTFBXHU2NTcwXHU2MzZFXHVGRjBDXHU1MDVDXHU2QjYyb2JzZXJ2ZXJcbiAgICAgICAgaWYgKGh0bWwuaW5jbHVkZXMoJ1x1NURGMlx1NjYzRVx1NzkzQVx1NTE2OFx1OTBFOFx1ODg0Q1x1N0EwQicpKSB7XG4gICAgICAgICAgdGhpcy5oYXNNb3JlVmFsdWUgPSBmYWxzZVxuICAgICAgICAgIGlmICh0aGlzLm9ic2VydmVyKSB7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coXCJMb2FkZWQgbW9yZSB0cmlwcywgbmV3IHBhZ2U6XCIsIHRoaXMucGFnZVZhbHVlLCBcImhhc01vcmU6XCIsIHRoaXMuaGFzTW9yZVZhbHVlKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGxvYWQgbW9yZSB0cmlwczpcIiwgZXJyb3IpXG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2VcbiAgICAgIHRoaXMuaGlkZUxvYWRpbmcoKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2hvd0xvYWRpbmcoKTogdm9pZCB7XG4gICAgdGhpcy5sb2FkaW5nVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gIH1cblxuICBwcml2YXRlIGhpZGVMb2FkaW5nKCk6IHZvaWQge1xuICAgIHRoaXMubG9hZGluZ1RhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG4vLyBDb25uZWN0cyB0byBkYXRhLWNvbnRyb2xsZXI9XCJkZWVwLXRyYXZlbFwiXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXIge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcInZpZGVvXCIsIFwidmlkZW9Db250YWluZXJcIiwgXCJ0YWJcIiwgXCJjb250ZW50XCJdXG5cbiAgZGVjbGFyZSByZWFkb25seSB2aWRlb1RhcmdldDogSFRNTFZpZGVvRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHZpZGVvQ29udGFpbmVyVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRhYlRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBjb250ZW50VGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuXG4gIGNvbm5lY3QoKSB7XG4gICAgY29uc29sZS5sb2coXCJEZWVwIHRyYXZlbCBjb250cm9sbGVyIGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgcGxheVZpZGVvKGV2ZW50OiBFdmVudCkge1xuICAgIGNvbnN0IHZpZGVvID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MVmlkZW9FbGVtZW50XG4gICAgaWYgKHZpZGVvLnBhdXNlZCkge1xuICAgICAgdmlkZW8ucGxheSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIHZpZGVvLnBhdXNlKClcbiAgICB9XG4gIH1cblxuICB0b2dnbGVGdWxsc2NyZWVuKGV2ZW50OiBFdmVudCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IChldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCdbZGF0YS1kZWVwLXRyYXZlbC10YXJnZXQ9XCJ2aWRlb0NvbnRhaW5lclwiXScpIGFzIEhUTUxFbGVtZW50XG4gICAgaWYgKCFkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCkge1xuICAgICAgY29udGFpbmVyLnJlcXVlc3RGdWxsc2NyZWVuKClcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4oKVxuICAgIH1cbiAgfVxuXG4gIHN3aXRjaFRhYihldmVudDogRXZlbnQpIHtcbiAgICBjb25zdCBjbGlja2VkVGFiID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHRhYk5hbWUgPSBjbGlja2VkVGFiLmRhdGFzZXQudGFiXG5cbiAgICAvLyBVcGRhdGUgdGFiIHN0eWxlc1xuICAgIHRoaXMudGFiVGFyZ2V0cy5mb3JFYWNoKHRhYiA9PiB7XG4gICAgICBpZiAodGFiID09PSBjbGlja2VkVGFiKSB7XG4gICAgICAgIHRhYi5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktOTAwJywgJ2JvcmRlci1iLTInLCAnYm9yZGVyLXllbGxvdy00MDAnLCAnYmcteWVsbG93LTUwJylcbiAgICAgICAgdGFiLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS02MDAnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFiLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS05MDAnLCAnYm9yZGVyLWItMicsICdib3JkZXIteWVsbG93LTQwMCcsICdiZy15ZWxsb3ctNTAnKVxuICAgICAgICB0YWIuY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTYwMCcpXG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIFNob3cvaGlkZSBjb250ZW50XG4gICAgdGhpcy5jb250ZW50VGFyZ2V0cy5mb3JFYWNoKGNvbnRlbnQgPT4ge1xuICAgICAgaWYgKGNvbnRlbnQuZGF0YXNldC5jb250ZW50ID09PSB0YWJOYW1lKSB7XG4gICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG4vLyBcdTg4NENcdTdBMEJcdTZCQjVcdTYzQTVcdTUzRTNcbmludGVyZmFjZSBTZWdtZW50IHtcbiAgaWQ6IHN0cmluZ1xuICBkZXBhcnR1cmVDaXR5OiBzdHJpbmdcbiAgZGVzdGluYXRpb25DaXR5OiBzdHJpbmdcbiAgZGF0ZTogc3RyaW5nXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcInNlZ21lbnRzQ29udGFpbmVyXCIsIFwic2VnbWVudFwiLCBcImFkZEJ1dHRvblwiLCBcImhpZGRlblNlZ21lbnRzSW5wdXRcIl1cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBzZWdtZW50czogeyB0eXBlOiBBcnJheSwgZGVmYXVsdDogW10gfSxcbiAgICBzd2l0Y2hJY29uVXJsOiBTdHJpbmdcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VnbWVudHNDb250YWluZXJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VnbWVudFRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBhZGRCdXR0b25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGlkZGVuU2VnbWVudHNJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1NlZ21lbnRzQ29udGFpbmVyVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQWRkQnV0dG9uVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzSGlkZGVuU2VnbWVudHNJbnB1dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHNlZ21lbnRzVmFsdWU6IFNlZ21lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IHN3aXRjaEljb25VcmxWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIk11bHRpQ2l0eSBjb250cm9sbGVyIGNvbm5lY3RlZFwiKVxuICAgIFxuICAgIC8vIE9ubHkgaW5pdGlhbGl6ZSBpZiB0aGUgY29udGFpbmVyIHRhcmdldCBpcyBhdmFpbGFibGVcbiAgICBpZiAoIXRoaXMuaGFzU2VnbWVudHNDb250YWluZXJUYXJnZXQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiTXVsdGlDaXR5IGNvbnRyb2xsZXI6IHNlZ21lbnRzQ29udGFpbmVyIG5vdCBhdmFpbGFibGUgeWV0LCBza2lwcGluZyBpbml0aWFsaXphdGlvblwiKVxuICAgICAgXG4gICAgICAvLyBMaXN0ZW4gZm9yIHRoZSBldmVudCB3aGVuIG11bHRpLWNpdHkgZm9ybSBiZWNvbWVzIHZpc2libGVcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RyaXAtdHlwZTptdWx0aS1jaXR5LXNob3duJywgdGhpcy5oYW5kbGVNdWx0aUNpdHlTaG93bi5iaW5kKHRoaXMpKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIHRoaXMuaW5pdGlhbGl6ZVNlZ21lbnRzKClcbiAgICBcbiAgICAvLyBMaXN0ZW4gZm9yIGNpdHkgc2VsZWN0aW9uIGV2ZW50cyBvbiBkb2N1bWVudCBmb3IgYmV0dGVyIGV2ZW50IGNhcHR1cmVcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjaXR5LXNlbGVjdG9yOmNpdHktc2VsZWN0ZWQnLCB0aGlzLmhhbmRsZUNpdHlTZWxlY3RlZC5iaW5kKHRoaXMpKVxuICAgIGNvbnNvbGUubG9nKCdNdWx0aS1jaXR5OiBBZGRlZCBldmVudCBsaXN0ZW5lciBmb3IgY2l0eS1zZWxlY3RvcjpjaXR5LXNlbGVjdGVkJylcbiAgICBcbiAgICAvLyBMaXN0ZW4gZm9yIGRhdGUgc2VsZWN0aW9uIGV2ZW50c1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RhdGUtcGlja2VyOmRhdGUtc2VsZWN0ZWQnLCB0aGlzLmhhbmRsZURhdGVTZWxlY3RlZC5iaW5kKHRoaXMpIGFzIHVua25vd24gYXMgRXZlbnRMaXN0ZW5lcilcbiAgICBjb25zb2xlLmxvZygnTXVsdGktY2l0eTogQWRkZWQgZXZlbnQgbGlzdGVuZXIgZm9yIGRhdGUtcGlja2VyOmRhdGUtc2VsZWN0ZWQnKVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjaXR5LXNlbGVjdG9yOmNpdHktc2VsZWN0ZWQnLCB0aGlzLmhhbmRsZUNpdHlTZWxlY3RlZC5iaW5kKHRoaXMpKVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RhdGUtcGlja2VyOmRhdGUtc2VsZWN0ZWQnLCB0aGlzLmhhbmRsZURhdGVTZWxlY3RlZC5iaW5kKHRoaXMpIGFzIHVua25vd24gYXMgRXZlbnRMaXN0ZW5lcilcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmlwLXR5cGU6bXVsdGktY2l0eS1zaG93bicsIHRoaXMuaGFuZGxlTXVsdGlDaXR5U2hvd24uYmluZCh0aGlzKSlcbiAgfVxuXG4gIC8vIFN0aW11bHVzIHZhbHVlIGNoYW5nZWQgY2FsbGJhY2sgLSBhdXRvbWF0aWNhbGx5IGNhbGxlZCB3aGVuIHNlZ21lbnRzVmFsdWUgY2hhbmdlc1xuICBzZWdtZW50c1ZhbHVlQ2hhbmdlZCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygnTXVsdGktY2l0eTogc2VnbWVudHNWYWx1ZUNoYW5nZWQgdHJpZ2dlcmVkJylcbiAgICAvLyBPbmx5IHJlbmRlciBpZiB0aGUgY29udGFpbmVyIGlzIGF2YWlsYWJsZVxuICAgIGlmICh0aGlzLmhhc1NlZ21lbnRzQ29udGFpbmVyVGFyZ2V0KSB7XG4gICAgICB0aGlzLnJlbmRlcigpXG4gICAgfVxuICB9XG5cbiAgLy8gSGFuZGxlIHdoZW4gbXVsdGktY2l0eSBmb3JtIGlzIHNob3duXG4gIHByaXZhdGUgaGFuZGxlTXVsdGlDaXR5U2hvd24oKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ011bHRpLWNpdHk6IEZvcm0gaXMgbm93IHZpc2libGUsIGluaXRpYWxpemluZy4uLicpXG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdGFyZ2V0cyBhcmUgbm93IGF2YWlsYWJsZVxuICAgIGlmICh0aGlzLmhhc1NlZ21lbnRzQ29udGFpbmVyVGFyZ2V0KSB7XG4gICAgICB0aGlzLmluaXRpYWxpemVTZWdtZW50cygpXG4gICAgICBcbiAgICAgIC8vIExpc3RlbiBmb3IgY2l0eSBzZWxlY3Rpb24gZXZlbnRzXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjaXR5LXNlbGVjdG9yOmNpdHktc2VsZWN0ZWQnLCB0aGlzLmhhbmRsZUNpdHlTZWxlY3RlZC5iaW5kKHRoaXMpKVxuICAgICAgY29uc29sZS5sb2coJ011bHRpLWNpdHk6IEFkZGVkIGV2ZW50IGxpc3RlbmVyIGZvciBjaXR5LXNlbGVjdG9yOmNpdHktc2VsZWN0ZWQnKVxuICAgICAgXG4gICAgICAvLyBMaXN0ZW4gZm9yIGRhdGUgc2VsZWN0aW9uIGV2ZW50c1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdkYXRlLXBpY2tlcjpkYXRlLXNlbGVjdGVkJywgdGhpcy5oYW5kbGVEYXRlU2VsZWN0ZWQuYmluZCh0aGlzKSBhcyB1bmtub3duIGFzIEV2ZW50TGlzdGVuZXIpXG4gICAgICBjb25zb2xlLmxvZygnTXVsdGktY2l0eTogQWRkZWQgZXZlbnQgbGlzdGVuZXIgZm9yIGRhdGUtcGlja2VyOmRhdGUtc2VsZWN0ZWQnKVxuICAgIH1cbiAgfVxuXG4gIC8vIEluaXRpYWxpemUgdGhlIHNlZ21lbnRzXG4gIHByaXZhdGUgaW5pdGlhbGl6ZVNlZ21lbnRzKCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKCdNdWx0aS1jaXR5OiBJbml0aWFsaXppbmcgc2VnbWVudHMnKVxuICAgIFxuICAgIC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1OUVEOFx1OEJBNFx1ODg0Q1x1N0EwQlx1NkJCNVxuICAgIGlmICh0aGlzLnNlZ21lbnRzVmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLnNlZ21lbnRzVmFsdWUgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogdGhpcy5nZW5lcmF0ZUlkKCksXG4gICAgICAgICAgZGVwYXJ0dXJlQ2l0eTogXCJcdTZCNjZcdTZDNDlcIixcbiAgICAgICAgICBkZXN0aW5hdGlvbkNpdHk6IFwiXHU2REYxXHU1NzMzXCIsXG4gICAgICAgICAgZGF0ZTogdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKCkpXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogdGhpcy5nZW5lcmF0ZUlkKCksXG4gICAgICAgICAgZGVwYXJ0dXJlQ2l0eTogXCJcdTVFN0ZcdTVEREVcIixcbiAgICAgICAgICBkZXN0aW5hdGlvbkNpdHk6IFwiXHU2NzZEXHU1RERFXCIsXG4gICAgICAgICAgZGF0ZTogdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKERhdGUubm93KCkgKyAzICogMjQgKiA2MCAqIDYwICogMTAwMCkpIC8vIDNcdTU5MjlcdTU0MEVcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnJlbmRlcigpXG4gICAgdGhpcy51cGRhdGVBZGRCdXR0b25TdGF0ZSgpXG4gIH1cblxuICAvLyBIYW5kbGUgY2l0eSBzZWxlY3Rpb24gZnJvbSBjaXR5IHNlbGVjdG9yXG4gIHByaXZhdGUgaGFuZGxlQ2l0eVNlbGVjdGVkKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnRcbiAgICBjb25zb2xlLmxvZygnTXVsdGktY2l0eTogUmVjZWl2ZWQgY2l0eS1zZWxlY3RvcjpjaXR5LXNlbGVjdGVkIGV2ZW50JywgY3VzdG9tRXZlbnQuZGV0YWlsKVxuICAgIGNvbnN0IHsgc2VnbWVudElkLCBjaXR5VHlwZSwgY2l0eU5hbWUgfSA9IGN1c3RvbUV2ZW50LmRldGFpbFxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdNdWx0aS1jaXR5OiBDdXJyZW50IHNlZ21lbnRzIGJlZm9yZSB1cGRhdGU6JywgSlNPTi5zdHJpbmdpZnkodGhpcy5zZWdtZW50c1ZhbHVlKSlcbiAgICBcbiAgICBjb25zdCBzZWdtZW50SW5kZXggPSB0aGlzLnNlZ21lbnRzVmFsdWUuZmluZEluZGV4KHNlZyA9PiBzZWcuaWQgPT09IHNlZ21lbnRJZClcbiAgICBcbiAgICBpZiAoc2VnbWVudEluZGV4ICE9PSAtMSkge1xuICAgICAgY29uc29sZS5sb2coYE11bHRpLWNpdHk6IEZvdW5kIHNlZ21lbnQgJHtzZWdtZW50SWR9LCB1cGRhdGluZyAke2NpdHlUeXBlfSB0byAke2NpdHlOYW1lfWApXG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBhIG5ldyBhcnJheSB3aXRoIHVwZGF0ZWQgc2VnbWVudCB0byB0cmlnZ2VyIFN0aW11bHVzIHJlYWN0aXZpdHlcbiAgICAgIHRoaXMuc2VnbWVudHNWYWx1ZSA9IHRoaXMuc2VnbWVudHNWYWx1ZS5tYXAoKHNlZywgaW5kZXgpID0+IHtcbiAgICAgICAgaWYgKGluZGV4ID09PSBzZWdtZW50SW5kZXgpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnTXVsdGktY2l0eTogU2VnbWVudCBiZWZvcmUgdXBkYXRlOicsIEpTT04uc3RyaW5naWZ5KHNlZykpXG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgdXBkYXRlZFNlZ21lbnQgPSB7XG4gICAgICAgICAgICAuLi5zZWcsXG4gICAgICAgICAgICBkZXBhcnR1cmVDaXR5OiBjaXR5VHlwZSA9PT0gJ2RlcGFydHVyZScgPyBjaXR5TmFtZSA6IHNlZy5kZXBhcnR1cmVDaXR5LFxuICAgICAgICAgICAgZGVzdGluYXRpb25DaXR5OiBjaXR5VHlwZSA9PT0gJ2Rlc3RpbmF0aW9uJyA/IGNpdHlOYW1lIDogc2VnLmRlc3RpbmF0aW9uQ2l0eVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBjb25zb2xlLmxvZygnTXVsdGktY2l0eTogU2VnbWVudCBhZnRlciB1cGRhdGU6JywgSlNPTi5zdHJpbmdpZnkodXBkYXRlZFNlZ21lbnQpKVxuICAgICAgICAgIHJldHVybiB1cGRhdGVkU2VnbWVudFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZWdcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdNdWx0aS1jaXR5OiBBbGwgc2VnbWVudHMgYWZ0ZXIgdXBkYXRlOicsIEpTT04uc3RyaW5naWZ5KHRoaXMuc2VnbWVudHNWYWx1ZSkpXG4gICAgICBjb25zb2xlLmxvZygnTXVsdGktY2l0eTogU2VnbWVudCB1cGRhdGVkLCByZW5kZXIgd2lsbCBiZSB0cmlnZ2VyZWQgYnkgdmFsdWVDaGFuZ2VkJylcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKCdNdWx0aS1jaXR5OiBTZWdtZW50IG5vdCBmb3VuZDonLCBzZWdtZW50SWQpXG4gICAgICBjb25zb2xlLndhcm4oJ011bHRpLWNpdHk6IEF2YWlsYWJsZSBzZWdtZW50IElEczonLCB0aGlzLnNlZ21lbnRzVmFsdWUubWFwKHMgPT4gcy5pZCkpXG4gICAgfVxuICB9XG5cbiAgLy8gSGFuZGxlIGRhdGUgc2VsZWN0aW9uIGZyb20gZGF0ZSBwaWNrZXJcbiAgcHJpdmF0ZSBoYW5kbGVEYXRlU2VsZWN0ZWQoZXZlbnQ6IEN1c3RvbUV2ZW50KTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ011bHRpLWNpdHk6IFJlY2VpdmVkIGRhdGUtcGlja2VyOmRhdGUtc2VsZWN0ZWQgZXZlbnQnLCBldmVudC5kZXRhaWwpXG4gICAgY29uc3QgeyBzZWdtZW50SWQsIGRhdGUgfSA9IGV2ZW50LmRldGFpbFxuICAgIFxuICAgIGNvbnN0IHNlZ21lbnRJbmRleCA9IHRoaXMuc2VnbWVudHNWYWx1ZS5maW5kSW5kZXgoc2VnID0+IHNlZy5pZCA9PT0gc2VnbWVudElkKVxuICAgIFxuICAgIGlmIChzZWdtZW50SW5kZXggIT09IC0xKSB7XG4gICAgICBjb25zb2xlLmxvZyhgTXVsdGktY2l0eTogVXBkYXRpbmcgc2VnbWVudCAke3NlZ21lbnRJZH0gZGF0ZSB0byAke2RhdGV9YClcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIGEgbmV3IGFycmF5IHdpdGggdXBkYXRlZCBzZWdtZW50IHRvIHRyaWdnZXIgU3RpbXVsdXMgcmVhY3Rpdml0eVxuICAgICAgdGhpcy5zZWdtZW50c1ZhbHVlID0gdGhpcy5zZWdtZW50c1ZhbHVlLm1hcCgoc2VnLCBpbmRleCkgPT4ge1xuICAgICAgICBpZiAoaW5kZXggPT09IHNlZ21lbnRJbmRleCkge1xuICAgICAgICAgIHJldHVybiB7IC4uLnNlZywgZGF0ZSB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlZ1xuICAgICAgfSlcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ011bHRpLWNpdHk6IFNlZ21lbnQgZGF0ZSB1cGRhdGVkJylcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKCdNdWx0aS1jaXR5OiBTZWdtZW50IG5vdCBmb3VuZDonLCBzZWdtZW50SWQpXG4gICAgfVxuICB9XG5cbiAgLy8gXHU2REZCXHU1MkEwXHU2NUIwXHU3Njg0XHU4ODRDXHU3QTBCXHU2QkI1XG4gIGFkZFNlZ21lbnQoKTogdm9pZCB7XG4gICAgLy8gXHU2NzAwXHU1OTFBXHU2NTJGXHU2MzAxOFx1NEUyQVx1ODg0Q1x1N0EwQlx1NkJCNVxuICAgIGlmICh0aGlzLnNlZ21lbnRzVmFsdWUubGVuZ3RoID49IDgpIHtcbiAgICAgIGFsZXJ0KFwiXHU2NzAwXHU1OTFBXHU2NTJGXHU2MzAxOFx1NEUyQVx1ODg0Q1x1N0EwQlx1NkJCNVwiKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgbGFzdFNlZ21lbnQgPSB0aGlzLnNlZ21lbnRzVmFsdWVbdGhpcy5zZWdtZW50c1ZhbHVlLmxlbmd0aCAtIDFdXG4gICAgXG4gICAgLy8gXHU2NUIwXHU4ODRDXHU3QTBCXHU2QkI1XHU3Njg0XHU1MUZBXHU1M0QxXHU1NzMwXHU5RUQ4XHU4QkE0XHU0RTNBXHU0RTBBXHU0RTAwXHU2QkI1XHU3Njg0XHU3NkVFXHU3Njg0XHU1NzMwXG4gICAgY29uc3QgbmV3U2VnbWVudDogU2VnbWVudCA9IHtcbiAgICAgIGlkOiB0aGlzLmdlbmVyYXRlSWQoKSxcbiAgICAgIGRlcGFydHVyZUNpdHk6IGxhc3RTZWdtZW50ID8gbGFzdFNlZ21lbnQuZGVzdGluYXRpb25DaXR5IDogXCJcdTUzMTdcdTRFQUNcIixcbiAgICAgIGRlc3RpbmF0aW9uQ2l0eTogXCJcdTRFMEFcdTZENzdcIixcbiAgICAgIGRhdGU6IGxhc3RTZWdtZW50IFxuICAgICAgICA/IHRoaXMuZm9ybWF0RGF0ZShuZXcgRGF0ZShuZXcgRGF0ZShsYXN0U2VnbWVudC5kYXRlKS5nZXRUaW1lKCkgKyAyNCAqIDYwICogNjAgKiAxMDAwKSlcbiAgICAgICAgOiB0aGlzLmZvcm1hdERhdGUobmV3IERhdGUoKSlcbiAgICB9XG5cbiAgICB0aGlzLnNlZ21lbnRzVmFsdWUgPSBbLi4udGhpcy5zZWdtZW50c1ZhbHVlLCBuZXdTZWdtZW50XVxuICAgIHRoaXMucmVuZGVyKClcbiAgICB0aGlzLnVwZGF0ZUFkZEJ1dHRvblN0YXRlKClcbiAgfVxuXG4gIC8vIFx1NTIyMFx1OTY2NFx1ODg0Q1x1N0EwQlx1NkJCNVxuICByZW1vdmVTZWdtZW50KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBzZWdtZW50SWQgPSBidXR0b24uZGF0YXNldC5zZWdtZW50SWRcblxuICAgIC8vIFx1ODFGM1x1NUMxMVx1NEZERFx1NzU1OTJcdTRFMkFcdTg4NENcdTdBMEJcdTZCQjVcbiAgICBpZiAodGhpcy5zZWdtZW50c1ZhbHVlLmxlbmd0aCA8PSAyKSB7XG4gICAgICBhbGVydChcIlx1ODFGM1x1NUMxMVx1OTcwMFx1ODk4MVx1NEZERFx1NzU1OTJcdTRFMkFcdTg4NENcdTdBMEJcdTZCQjVcIilcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMuc2VnbWVudHNWYWx1ZSA9IHRoaXMuc2VnbWVudHNWYWx1ZS5maWx0ZXIoc2VnID0+IHNlZy5pZCAhPT0gc2VnbWVudElkKVxuICAgIHRoaXMucmVuZGVyKClcbiAgICB0aGlzLnVwZGF0ZUFkZEJ1dHRvblN0YXRlKClcbiAgfVxuXG4gIC8vIFx1NjZGNFx1NjVCMFx1ODg0Q1x1N0EwQlx1NkJCNVx1NzY4NFx1NTdDRVx1NUUwMlxuICB1cGRhdGVDaXR5KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGlucHV0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3Qgc2VnbWVudElkID0gaW5wdXQuZGF0YXNldC5zZWdtZW50SWRcbiAgICBjb25zdCBjaXR5VHlwZSA9IGlucHV0LmRhdGFzZXQuY2l0eVR5cGUgLy8gJ2RlcGFydHVyZScgb3IgJ2Rlc3RpbmF0aW9uJ1xuXG4gICAgY29uc3Qgc2VnbWVudCA9IHRoaXMuc2VnbWVudHNWYWx1ZS5maW5kKHNlZyA9PiBzZWcuaWQgPT09IHNlZ21lbnRJZClcbiAgICBpZiAoc2VnbWVudCkge1xuICAgICAgaWYgKGNpdHlUeXBlID09PSAnZGVwYXJ0dXJlJykge1xuICAgICAgICBzZWdtZW50LmRlcGFydHVyZUNpdHkgPSBpbnB1dC52YWx1ZVxuICAgICAgfSBlbHNlIGlmIChjaXR5VHlwZSA9PT0gJ2Rlc3RpbmF0aW9uJykge1xuICAgICAgICBzZWdtZW50LmRlc3RpbmF0aW9uQ2l0eSA9IGlucHV0LnZhbHVlXG4gICAgICB9XG4gICAgICB0aGlzLnVwZGF0ZUhpZGRlbklucHV0KClcbiAgICB9XG4gIH1cblxuICAvLyBcdTY2RjRcdTY1QjBcdTg4NENcdTdBMEJcdTZCQjVcdTc2ODRcdTY1RTVcdTY3MUZcbiAgdXBkYXRlRGF0ZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBpbnB1dCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IHNlZ21lbnRJZCA9IGlucHV0LmRhdGFzZXQuc2VnbWVudElkXG5cbiAgICBjb25zdCBzZWdtZW50ID0gdGhpcy5zZWdtZW50c1ZhbHVlLmZpbmQoc2VnID0+IHNlZy5pZCA9PT0gc2VnbWVudElkKVxuICAgIGlmIChzZWdtZW50KSB7XG4gICAgICBzZWdtZW50LmRhdGUgPSBpbnB1dC52YWx1ZVxuICAgICAgdGhpcy51cGRhdGVIaWRkZW5JbnB1dCgpXG4gICAgfVxuICB9XG5cbiAgLy8gXHU2MjUzXHU1RjAwXHU1N0NFXHU1RTAyXHU5MDA5XHU2MkU5XHU1NjY4XG4gIG9wZW5DaXR5U2VsZWN0b3IoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHNlZ21lbnRJZCA9IGJ1dHRvbi5kYXRhc2V0LnNlZ21lbnRJZFxuICAgIGNvbnN0IGNpdHlUeXBlID0gYnV0dG9uLmRhdGFzZXQuY2l0eVR5cGVcblxuICAgIGNvbnNvbGUubG9nKGBNdWx0aS1jaXR5OiBPcGVuaW5nIGNpdHkgc2VsZWN0b3IgZm9yIHNlZ21lbnQgJHtzZWdtZW50SWR9LCBjaXR5VHlwZSAke2NpdHlUeXBlfWApXG4gICAgXG4gICAgLy8gXHU4OUU2XHU1M0QxXHU1N0NFXHU1RTAyXHU5MDA5XHU2MkU5XHU1NjY4XHU3Njg0XHU4MUVBXHU1QjlBXHU0RTQ5XHU0RThCXHU0RUY2XG4gICAgY29uc3QgY3VzdG9tRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ211bHRpLWNpdHk6b3Blbi1jaXR5LXNlbGVjdG9yJywge1xuICAgICAgZGV0YWlsOiB7IHNlZ21lbnRJZCwgY2l0eVR5cGUgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICB9KVxuICAgIHRoaXMuZWxlbWVudC5kaXNwYXRjaEV2ZW50KGN1c3RvbUV2ZW50KVxuICB9XG5cbiAgLy8gXHU2MjUzXHU1RjAwXHU2NUU1XHU2NzFGXHU5MDA5XHU2MkU5XHU1NjY4XG4gIG9wZW5EYXRlUGlja2VyKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBzZWdtZW50SWQgPSBidXR0b24uZGF0YXNldC5zZWdtZW50SWRcblxuICAgIC8vIFx1ODlFNlx1NTNEMVx1NjVFNVx1NjcxRlx1OTAwOVx1NjJFOVx1NTY2OFx1NzY4NFx1ODFFQVx1NUI5QVx1NEU0OVx1NEU4Qlx1NEVGNlxuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdtdWx0aS1jaXR5Om9wZW4tZGF0ZS1waWNrZXInLCB7XG4gICAgICBkZXRhaWw6IHsgc2VnbWVudElkIH0sXG4gICAgICBidWJibGVzOiB0cnVlXG4gICAgfSlcbiAgICB0aGlzLmVsZW1lbnQuZGlzcGF0Y2hFdmVudChjdXN0b21FdmVudClcbiAgfVxuXG4gIC8vIFx1NkUzMlx1NjdEM1x1NjI0MFx1NjcwOVx1ODg0Q1x1N0EwQlx1NkJCNVxuICBwcml2YXRlIHJlbmRlcigpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaGFzU2VnbWVudHNDb250YWluZXJUYXJnZXQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiTXVsdGlDaXR5OiBDYW5ub3QgcmVuZGVyLCBzZWdtZW50c0NvbnRhaW5lciBub3QgYXZhaWxhYmxlXCIpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ011bHRpLWNpdHk6IHJlbmRlcigpIGNhbGxlZCB3aXRoIHNlZ21lbnRzOicsIEpTT04uc3RyaW5naWZ5KHRoaXMuc2VnbWVudHNWYWx1ZSkpXG4gICAgXG4gICAgdGhpcy5zZWdtZW50c0NvbnRhaW5lclRhcmdldC5pbm5lckhUTUwgPSBcIlwiXG5cbiAgICB0aGlzLnNlZ21lbnRzVmFsdWUuZm9yRWFjaCgoc2VnbWVudCwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGBNdWx0aS1jaXR5OiBDcmVhdGluZyBlbGVtZW50IGZvciBzZWdtZW50ICR7aW5kZXh9OmAsIEpTT04uc3RyaW5naWZ5KHNlZ21lbnQpKVxuICAgICAgY29uc3Qgc2VnbWVudEVsZW1lbnQgPSB0aGlzLmNyZWF0ZVNlZ21lbnRFbGVtZW50KHNlZ21lbnQsIGluZGV4KVxuICAgICAgdGhpcy5zZWdtZW50c0NvbnRhaW5lclRhcmdldC5hcHBlbmRDaGlsZChzZWdtZW50RWxlbWVudClcbiAgICB9KVxuXG4gICAgdGhpcy51cGRhdGVIaWRkZW5JbnB1dCgpXG4gIH1cblxuICAvLyBcdTUyMUJcdTVFRkFcdTUzNTVcdTRFMkFcdTg4NENcdTdBMEJcdTZCQjVcdTUxNDNcdTdEMjBcbiAgcHJpdmF0ZSBjcmVhdGVTZWdtZW50RWxlbWVudChzZWdtZW50OiBTZWdtZW50LCBpbmRleDogbnVtYmVyKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnNvbGUubG9nKGBNdWx0aS1jaXR5OiBjcmVhdGVTZWdtZW50RWxlbWVudCBjYWxsZWQgZm9yIHNlZ21lbnQgJHtzZWdtZW50LmlkfTpgLCB7XG4gICAgICBkZXBhcnR1cmVDaXR5OiBzZWdtZW50LmRlcGFydHVyZUNpdHksXG4gICAgICBkZXN0aW5hdGlvbkNpdHk6IHNlZ21lbnQuZGVzdGluYXRpb25DaXR5LFxuICAgICAgZGF0ZTogc2VnbWVudC5kYXRlXG4gICAgfSlcbiAgICBcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXG4gICAgZGl2LmNsYXNzTmFtZSA9IFwiYm9yZGVyLWIgYm9yZGVyLWdyYXktMTAwIHB5LTRcIlxuICAgIGRpdi5kYXRhc2V0Lm11bHRpQ2l0eVRhcmdldCA9IFwic2VnbWVudFwiXG5cbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoc2VnbWVudC5kYXRlKVxuICAgIGNvbnN0IHdlZWtkYXkgPSB0aGlzLmdldFdlZWtkYXkoZGF0ZSlcblxuICAgIGRpdi5pbm5lckhUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTNcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdy01IGgtNSByb3VuZGVkLWZ1bGwgYmctYmx1ZS01MDAgdGV4dC13aGl0ZSB0ZXh0LXhzIGZvbnQtYm9sZFwiPlxuICAgICAgICAgICAgJHtpbmRleCArIDF9XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1zbSB0ZXh0LWdyYXktNTAwXCI+XHU3QjJDJHt0aGlzLm51bWJlclRvQ2hpbmVzZShpbmRleCArIDEpfVx1N0EwQjwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgICR7dGhpcy5zZWdtZW50c1ZhbHVlLmxlbmd0aCA+IDIgPyBgXG4gICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgZGF0YS1hY3Rpb249XCJjbGljay0+bXVsdGktY2l0eSNyZW1vdmVTZWdtZW50XCJcbiAgICAgICAgICAgIGRhdGEtc2VnbWVudC1pZD1cIiR7c2VnbWVudC5pZH1cIlxuICAgICAgICAgICAgY2xhc3M9XCJ0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtcmVkLTUwMFwiPlxuICAgICAgICAgICAgPHN2ZyBjbGFzcz1cInctNSBoLTVcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyMCAyMFwiPlxuICAgICAgICAgICAgICA8cGF0aCBmaWxsLXJ1bGU9XCJldmVub2RkXCJcbiAgICAgICAgICAgICAgICBkPVwiTTQuMjkzIDQuMjkzYTEgMSAwIDAxMS40MTQgMEwxMCA4LjU4Nmw0LjI5My00LjI5M2ExIDEgMCAxMTEuNDE0IDEuNDE0TDExLjQxNCAxMGw0LjI5MyA0LjI5M2ExIDEgMFxuICAgICAgICAgICAgICAgICAgLTEuNDE0IDEuNDE0TDEwIDExLjQxNGwtNC4yOTMgNC4yOTNhMSAxIDAgMDEtMS40MTQtMS40MTRMOC41ODYgMTAgNC4yOTMgNS43MDdhMSAxIDAgMDEwLTEuNDE0elwiXG4gICAgICAgICAgICAgICAgY2xpcC1ydWxlPVwiZXZlbm9kZFwiLz5cbiAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICBgIDogJyd9XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGRpdiBjbGFzcz1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxuICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgIGRhdGEtYWN0aW9uPVwiY2xpY2stPm11bHRpLWNpdHkjb3BlbkNpdHlTZWxlY3RvclwiXG4gICAgICAgICAgZGF0YS1zZWdtZW50LWlkPVwiJHtzZWdtZW50LmlkfVwiXG4gICAgICAgICAgZGF0YS1jaXR5LXR5cGU9XCJkZXBhcnR1cmVcIlxuICAgICAgICAgIGNsYXNzPVwiZmxleC0xIHRleHQtbGVmdFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LVszMnB4XSBmb250LWJvbGQgbGVhZGluZy10aWdodFwiPiR7c2VnbWVudC5kZXBhcnR1cmVDaXR5fTwvZGl2PlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJteC00IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgPGltZyBzcmM9XCIke3RoaXMuc3dpdGNoSWNvblVybFZhbHVlfVwiIGNsYXNzPVwidy0xMiBoLTEyXCIgYWx0PVwiXHU1MjA3XHU2MzYyXCIgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIFxuICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgIGRhdGEtYWN0aW9uPVwiY2xpY2stPm11bHRpLWNpdHkjb3BlbkNpdHlTZWxlY3RvclwiXG4gICAgICAgICAgZGF0YS1zZWdtZW50LWlkPVwiJHtzZWdtZW50LmlkfVwiXG4gICAgICAgICAgZGF0YS1jaXR5LXR5cGU9XCJkZXN0aW5hdGlvblwiXG4gICAgICAgICAgY2xhc3M9XCJmbGV4LTEgdGV4dC1yaWdodFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LVszMnB4XSBmb250LWJvbGQgbGVhZGluZy10aWdodFwiPiR7c2VnbWVudC5kZXN0aW5hdGlvbkNpdHl9PC9kaXY+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxidXR0b24gXG4gICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICBkYXRhLWFjdGlvbj1cImNsaWNrLT5tdWx0aS1jaXR5I29wZW5EYXRlUGlja2VyXCJcbiAgICAgICAgZGF0YS1zZWdtZW50LWlkPVwiJHtzZWdtZW50LmlkfVwiXG4gICAgICAgIGNsYXNzPVwibXQtMiB0ZXh0LWxlZnRcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtbGcgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgICR7ZGF0ZS5nZXRNb250aCgpICsgMX1cdTY3MDgke2RhdGUuZ2V0RGF0ZSgpfVx1NjVFNSAke3dlZWtkYXl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9idXR0b24+XG4gICAgYFxuICAgIFxuICAgIGNvbnNvbGUubG9nKGBNdWx0aS1jaXR5OiBDcmVhdGVkIEhUTUwgZm9yIHNlZ21lbnQgJHtzZWdtZW50LmlkfSwgZGVwYXJ0dXJlOiAke3NlZ21lbnQuZGVwYXJ0dXJlQ2l0eX0sIGRlc3RpbmF0aW9uOiAke3NlZ21lbnQuZGVzdGluYXRpb25DaXR5fWApXG5cbiAgICByZXR1cm4gZGl2XG4gIH1cblxuICAvLyBcdTY2RjRcdTY1QjBcdTZERkJcdTUyQTBcdTYzMDlcdTk0QUVcdTcyQjZcdTYwMDFcbiAgcHJpdmF0ZSB1cGRhdGVBZGRCdXR0b25TdGF0ZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaGFzQWRkQnV0dG9uVGFyZ2V0KSB7XG4gICAgICBjb25zb2xlLmxvZyhcIk11bHRpQ2l0eTogQ2Fubm90IHVwZGF0ZSBhZGQgYnV0dG9uIHN0YXRlLCBidXR0b24gbm90IGF2YWlsYWJsZVwiKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLnNlZ21lbnRzVmFsdWUubGVuZ3RoID49IDgpIHtcbiAgICAgIHRoaXMuYWRkQnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJvcGFjaXR5LTUwXCIsIFwiY3Vyc29yLW5vdC1hbGxvd2VkXCIpXG4gICAgICB0aGlzLmFkZEJ1dHRvblRhcmdldC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hZGRCdXR0b25UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcIm9wYWNpdHktNTBcIiwgXCJjdXJzb3Itbm90LWFsbG93ZWRcIilcbiAgICAgIHRoaXMuYWRkQnV0dG9uVGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpXG4gICAgfVxuICB9XG5cbiAgLy8gXHU2NkY0XHU2NUIwXHU5NjkwXHU4NUNGXHU3Njg0XHU4ODY4XHU1MzU1XHU4RjkzXHU1MTY1XG4gIHByaXZhdGUgdXBkYXRlSGlkZGVuSW5wdXQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaGFzSGlkZGVuU2VnbWVudHNJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5oaWRkZW5TZWdtZW50c0lucHV0VGFyZ2V0LnZhbHVlID0gSlNPTi5zdHJpbmdpZnkodGhpcy5zZWdtZW50c1ZhbHVlKVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1NzUxRlx1NjIxMFx1NTUyRlx1NEUwMElEXG4gIHByaXZhdGUgZ2VuZXJhdGVJZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgc2VnbWVudC0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDExKX1gXG4gIH1cblxuICAvLyBcdTY4M0NcdTVGMEZcdTUzMTZcdTY1RTVcdTY3MUZcbiAgcHJpdmF0ZSBmb3JtYXREYXRlKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKClcbiAgICBjb25zdCBtb250aCA9IFN0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpXG4gICAgY29uc3QgZGF5ID0gU3RyaW5nKGRhdGUuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpXG4gICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fWBcbiAgfVxuXG4gIC8vIFx1ODNCN1x1NTNENlx1NjYxRlx1NjcxRlx1NTFFMFxuICBwcml2YXRlIGdldFdlZWtkYXkoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gICAgY29uc3Qgd2Vla2RheXMgPSBbJ1x1NTQ2OFx1NjVFNScsICdcdTU0NjhcdTRFMDAnLCAnXHU1NDY4XHU0RThDJywgJ1x1NTQ2OFx1NEUwOScsICdcdTU0NjhcdTU2REInLCAnXHU1NDY4XHU0RTk0JywgJ1x1NTQ2OFx1NTE2RCddXG4gICAgcmV0dXJuIHdlZWtkYXlzW2RhdGUuZ2V0RGF5KCldXG4gIH1cblxuICAvLyBcdTY1NzBcdTVCNTdcdThGNkNcdTRFMkRcdTY1ODdcbiAgcHJpdmF0ZSBudW1iZXJUb0NoaW5lc2UobnVtOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGNvbnN0IGNoaW5lc2UgPSBbJ1x1NEUwMCcsICdcdTRFOEMnLCAnXHU0RTA5JywgJ1x1NTZEQicsICdcdTRFOTQnLCAnXHU1MTZEJywgJ1x1NEUwMycsICdcdTUxNkInXVxuICAgIHJldHVybiBjaGluZXNlW251bSAtIDFdIHx8IG51bS50b1N0cmluZygpXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcIm1vZGFsXCIsXG4gICAgXCJvdmVybGF5XCIsXG4gICAgXCJmbGlnaHRQcmVmZXJlbmNlVGFiXCIsXG4gICAgXCJhaXJsaW5lQ29tcGFueVRhYlwiLFxuICAgIFwiYWlycG9ydFRhYlwiLFxuICAgIFwiZGVwYXJ0dXJlVGltZVRhYlwiLFxuICAgIFwidHJhbnNmZXJDaXR5VGFiXCIsXG4gICAgXCJ0cmFuc2ZlclRpbWVzVGFiXCIsXG4gICAgXCJ0cmFuc2ZlckR1cmF0aW9uVGFiXCIsXG4gICAgXCJ0b3RhbER1cmF0aW9uVGFiXCIsXG4gICAgXCJzZWF0Q2xhc3NUYWJcIixcbiAgICBcImFpcmNyYWZ0TW9kZWxUYWJcIixcbiAgICBcInRpY2tldENhbmNlbGxhdGlvblRhYlwiLFxuICAgIFwiZmxpZ2h0UHJlZmVyZW5jZVNlY3Rpb25cIixcbiAgICBcImFpcmxpbmVDb21wYW55U2VjdGlvblwiLFxuICAgIFwiYWlycG9ydFNlY3Rpb25cIixcbiAgICBcImRlcGFydHVyZVRpbWVTZWN0aW9uXCIsXG4gICAgXCJ0cmFuc2ZlckNpdHlTZWN0aW9uXCIsXG4gICAgXCJ0cmFuc2ZlclRpbWVzU2VjdGlvblwiLFxuICAgIFwidHJhbnNmZXJEdXJhdGlvblNlY3Rpb25cIixcbiAgICBcInRvdGFsRHVyYXRpb25TZWN0aW9uXCIsXG4gICAgXCJzZWF0Q2xhc3NTZWN0aW9uXCIsXG4gICAgXCJhaXJjcmFmdE1vZGVsU2VjdGlvblwiLFxuICAgIFwidGlja2V0Q2FuY2VsbGF0aW9uU2VjdGlvblwiLFxuICAgIFwicmVzdWx0Q291bnRcIixcbiAgICBcImRpcmVjdEZsaWdodENoZWNrYm94XCIsXG4gICAgXCJub1RyYW5zaXRDaGVja2JveFwiLFxuICAgIFwiaW5jbHVkZUNoZWNrZWRMdWdnYWdlQ2hlY2tib3hcIixcbiAgICBcIm5vU2hhcmVkRmxpZ2h0Q2hlY2tib3hcIixcbiAgICBcImRpc2NvdW50UHJpY2VDaGVja2JveFwiLFxuICAgIFwicmVzZXRCdXR0b25cIixcbiAgICBcImNvbmZpcm1CdXR0b25cIixcbiAgICBcImZpbHRlckJhZGdlXCIsXG4gICAgXCJzZWxlY3RlZEZpbHRlcnNDb250YWluZXJcIixcbiAgICBcInNlbGVjdGVkRmlsdGVyc0xpc3RcIixcbiAgICAvLyBDYXJkIHRhcmdldHMgZm9yIGdyaWQgbGF5b3V0XG4gICAgXCJkaXJlY3RGbGlnaHRDYXJkXCIsXG4gICAgXCJjaGVja2VkTHVnZ2FnZUNhcmRcIixcbiAgICBcIm5vU2hhcmVkRmxpZ2h0Q2FyZFwiLFxuICAgIFwibm9UcmFuc2l0Q2FyZFwiLFxuICAgIFwiZGlzY291bnRQcmljZUNhcmRcIixcbiAgICAvLyBRdWljayBmaWx0ZXIgYnV0dG9uIHRhcmdldHNcbiAgICBcInF1aWNrRGlyZWN0RmxpZ2h0XCIsXG4gICAgXCJxdWlja05vU2hhcmVkRmxpZ2h0XCIsXG4gICAgXCJxdWlja0NoZWNrZWRMdWdnYWdlXCIsXG4gICAgXCJxdWlja05vVHJhbnNpdFwiLFxuICAgIFwicXVpY2tEaXNjb3VudFByaWNlXCJcbiAgXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgb3ZlcmxheVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBmbGlnaHRQcmVmZXJlbmNlVGFiVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGFpcmxpbmVDb21wYW55VGFiVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGFpcnBvcnRUYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVwYXJ0dXJlVGltZVRhYlRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0cmFuc2ZlckNpdHlUYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdHJhbnNmZXJUaW1lc1RhYlRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0cmFuc2ZlckR1cmF0aW9uVGFiVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRvdGFsRHVyYXRpb25UYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VhdENsYXNzVGFiVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGFpcmNyYWZ0TW9kZWxUYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdGlja2V0Q2FuY2VsbGF0aW9uVGFiVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGZsaWdodFByZWZlcmVuY2VTZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGFpcmxpbmVDb21wYW55U2VjdGlvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBhaXJwb3J0U2VjdGlvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkZXBhcnR1cmVUaW1lU2VjdGlvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0cmFuc2ZlckNpdHlTZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRyYW5zZmVyVGltZXNTZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRyYW5zZmVyRHVyYXRpb25TZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRvdGFsRHVyYXRpb25TZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlYXRDbGFzc1NlY3Rpb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgYWlyY3JhZnRNb2RlbFNlY3Rpb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdGlja2V0Q2FuY2VsbGF0aW9uU2VjdGlvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSByZXN1bHRDb3VudFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkaXJlY3RGbGlnaHRDaGVja2JveFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IG5vVHJhbnNpdENoZWNrYm94VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaW5jbHVkZUNoZWNrZWRMdWdnYWdlQ2hlY2tib3hUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBub1NoYXJlZEZsaWdodENoZWNrYm94VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGlzY291bnRQcmljZUNoZWNrYm94VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgcmVzZXRCdXR0b25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY29uZmlybUJ1dHRvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBmaWx0ZXJCYWRnZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzZWxlY3RlZEZpbHRlcnNDb250YWluZXJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VsZWN0ZWRGaWx0ZXJzTGlzdFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkaXJlY3RGbGlnaHRDYXJkVGFyZ2V0PzogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjaGVja2VkTHVnZ2FnZUNhcmRUYXJnZXQ/OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IG5vU2hhcmVkRmxpZ2h0Q2FyZFRhcmdldD86IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbm9UcmFuc2l0Q2FyZFRhcmdldD86IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGlzY291bnRQcmljZUNhcmRUYXJnZXQ/OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHF1aWNrRGlyZWN0RmxpZ2h0VGFyZ2V0PzogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBxdWlja05vU2hhcmVkRmxpZ2h0VGFyZ2V0PzogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBxdWlja0NoZWNrZWRMdWdnYWdlVGFyZ2V0PzogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBxdWlja05vVHJhbnNpdFRhcmdldD86IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgcXVpY2tEaXNjb3VudFByaWNlVGFyZ2V0PzogSFRNTEVsZW1lbnRcblxuICBkZWNsYXJlIGN1cnJlbnRUYWI6IHN0cmluZ1xuICBkZWNsYXJlIGZpbHRlcnM6IHtcbiAgICBkaXJlY3RGbGlnaHQ6IGJvb2xlYW5cbiAgICBub1RyYW5zaXQ6IGJvb2xlYW5cbiAgICBpbmNsdWRlQ2hlY2tlZEx1Z2dhZ2U6IGJvb2xlYW5cbiAgICBub1NoYXJlZEZsaWdodDogYm9vbGVhblxuICAgIGRpc2NvdW50UHJpY2U6IGJvb2xlYW5cbiAgICBhaXJsaW5lczogU2V0PHN0cmluZz5cbiAgICBkZXBhcnR1cmVBaXJwb3J0czogU2V0PHN0cmluZz5cbiAgICBhcnJpdmFsQWlycG9ydHM6IFNldDxzdHJpbmc+XG4gICAgZGVwYXJ0dXJlVGltZVJhbmdlczogU2V0PHN0cmluZz5cbiAgICBhaXJjcmFmdE1vZGVsczogU2V0PHN0cmluZz5cbiAgfVxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJGbGlnaHRGaWx0ZXIgY29udHJvbGxlciBjb25uZWN0ZWRcIilcbiAgICB0aGlzLmN1cnJlbnRUYWIgPSBcImZsaWdodFByZWZlcmVuY2VcIlxuICAgIHRoaXMuaW5pdGlhbGl6ZUZpbHRlcnMoKVxuICB9XG5cbiAgaW5pdGlhbGl6ZUZpbHRlcnMoKTogdm9pZCB7XG4gICAgdGhpcy5maWx0ZXJzID0ge1xuICAgICAgZGlyZWN0RmxpZ2h0OiBmYWxzZSxcbiAgICAgIG5vVHJhbnNpdDogZmFsc2UsXG4gICAgICBpbmNsdWRlQ2hlY2tlZEx1Z2dhZ2U6IGZhbHNlLFxuICAgICAgbm9TaGFyZWRGbGlnaHQ6IGZhbHNlLFxuICAgICAgZGlzY291bnRQcmljZTogZmFsc2UsXG4gICAgICBhaXJsaW5lczogbmV3IFNldCgpLFxuICAgICAgZGVwYXJ0dXJlQWlycG9ydHM6IG5ldyBTZXQoKSxcbiAgICAgIGFycml2YWxBaXJwb3J0czogbmV3IFNldCgpLFxuICAgICAgZGVwYXJ0dXJlVGltZVJhbmdlczogbmV3IFNldCgpLFxuICAgICAgYWlyY3JhZnRNb2RlbHM6IG5ldyBTZXQoKVxuICAgIH1cbiAgfVxuXG4gIG9wZW5Nb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICB0aGlzLm92ZXJsYXlUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiXG4gIH1cblxuICBjbG9zZU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgIHRoaXMub3ZlcmxheVRhcmdldC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiXCJcbiAgfVxuXG4gIHNlbGVjdFRhYihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgdGFiTmFtZSA9IGJ1dHRvbi5kYXRhc2V0LnRhYlxuICAgIGlmICghdGFiTmFtZSkgcmV0dXJuXG5cbiAgICB0aGlzLmN1cnJlbnRUYWIgPSB0YWJOYW1lXG5cbiAgICAvLyBVcGRhdGUgdGFiIGJ1dHRvbnNcbiAgICBjb25zdCBhbGxUYWJzID0gW1xuICAgICAgdGhpcy5mbGlnaHRQcmVmZXJlbmNlVGFiVGFyZ2V0LFxuICAgICAgdGhpcy5haXJsaW5lQ29tcGFueVRhYlRhcmdldCxcbiAgICAgIHRoaXMuYWlycG9ydFRhYlRhcmdldCxcbiAgICAgIHRoaXMuZGVwYXJ0dXJlVGltZVRhYlRhcmdldCxcbiAgICAgIHRoaXMudHJhbnNmZXJDaXR5VGFiVGFyZ2V0LFxuICAgICAgdGhpcy50cmFuc2ZlclRpbWVzVGFiVGFyZ2V0LFxuICAgICAgdGhpcy50cmFuc2ZlckR1cmF0aW9uVGFiVGFyZ2V0LFxuICAgICAgdGhpcy50b3RhbER1cmF0aW9uVGFiVGFyZ2V0LFxuICAgICAgdGhpcy5zZWF0Q2xhc3NUYWJUYXJnZXQsXG4gICAgICB0aGlzLmFpcmNyYWZ0TW9kZWxUYWJUYXJnZXQsXG4gICAgICB0aGlzLnRpY2tldENhbmNlbGxhdGlvblRhYlRhcmdldFxuICAgIF1cblxuICAgIGFsbFRhYnMuZm9yRWFjaCh0YWIgPT4ge1xuICAgICAgdGFiLmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItYmx1ZS01MDBcIiwgXCJ0ZXh0LWJsdWUtNjAwXCIsIFwiZm9udC1ib2xkXCIpXG4gICAgICB0YWIuY2xhc3NMaXN0LmFkZChcInRleHQtZ3JheS02MDBcIilcbiAgICB9KVxuXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJib3JkZXItYmx1ZS01MDBcIiwgXCJ0ZXh0LWJsdWUtNjAwXCIsIFwiZm9udC1ib2xkXCIpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJ0ZXh0LWdyYXktNjAwXCIpXG5cbiAgICAvLyBVcGRhdGUgc2VjdGlvbnNcbiAgICBjb25zdCBhbGxTZWN0aW9ucyA9IFtcbiAgICAgIHRoaXMuZmxpZ2h0UHJlZmVyZW5jZVNlY3Rpb25UYXJnZXQsXG4gICAgICB0aGlzLmFpcmxpbmVDb21wYW55U2VjdGlvblRhcmdldCxcbiAgICAgIHRoaXMuYWlycG9ydFNlY3Rpb25UYXJnZXQsXG4gICAgICB0aGlzLmRlcGFydHVyZVRpbWVTZWN0aW9uVGFyZ2V0LFxuICAgICAgdGhpcy50cmFuc2ZlckNpdHlTZWN0aW9uVGFyZ2V0LFxuICAgICAgdGhpcy50cmFuc2ZlclRpbWVzU2VjdGlvblRhcmdldCxcbiAgICAgIHRoaXMudHJhbnNmZXJEdXJhdGlvblNlY3Rpb25UYXJnZXQsXG4gICAgICB0aGlzLnRvdGFsRHVyYXRpb25TZWN0aW9uVGFyZ2V0LFxuICAgICAgdGhpcy5zZWF0Q2xhc3NTZWN0aW9uVGFyZ2V0LFxuICAgICAgdGhpcy5haXJjcmFmdE1vZGVsU2VjdGlvblRhcmdldCxcbiAgICAgIHRoaXMudGlja2V0Q2FuY2VsbGF0aW9uU2VjdGlvblRhcmdldFxuICAgIF1cblxuICAgIGFsbFNlY3Rpb25zLmZvckVhY2goc2VjdGlvbiA9PiBzZWN0aW9uLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIikpXG5cbiAgICBjb25zdCBzZWN0aW9uTWFwOiB7IFtrZXk6IHN0cmluZ106IEhUTUxFbGVtZW50IH0gPSB7XG4gICAgICBmbGlnaHRQcmVmZXJlbmNlOiB0aGlzLmZsaWdodFByZWZlcmVuY2VTZWN0aW9uVGFyZ2V0LFxuICAgICAgYWlybGluZUNvbXBhbnk6IHRoaXMuYWlybGluZUNvbXBhbnlTZWN0aW9uVGFyZ2V0LFxuICAgICAgYWlycG9ydDogdGhpcy5haXJwb3J0U2VjdGlvblRhcmdldCxcbiAgICAgIGRlcGFydHVyZVRpbWU6IHRoaXMuZGVwYXJ0dXJlVGltZVNlY3Rpb25UYXJnZXQsXG4gICAgICB0cmFuc2ZlckNpdHk6IHRoaXMudHJhbnNmZXJDaXR5U2VjdGlvblRhcmdldCxcbiAgICAgIHRyYW5zZmVyVGltZXM6IHRoaXMudHJhbnNmZXJUaW1lc1NlY3Rpb25UYXJnZXQsXG4gICAgICB0cmFuc2ZlckR1cmF0aW9uOiB0aGlzLnRyYW5zZmVyRHVyYXRpb25TZWN0aW9uVGFyZ2V0LFxuICAgICAgdG90YWxEdXJhdGlvbjogdGhpcy50b3RhbER1cmF0aW9uU2VjdGlvblRhcmdldCxcbiAgICAgIHNlYXRDbGFzczogdGhpcy5zZWF0Q2xhc3NTZWN0aW9uVGFyZ2V0LFxuICAgICAgYWlyY3JhZnRNb2RlbDogdGhpcy5haXJjcmFmdE1vZGVsU2VjdGlvblRhcmdldCxcbiAgICAgIHRpY2tldENhbmNlbGxhdGlvbjogdGhpcy50aWNrZXRDYW5jZWxsYXRpb25TZWN0aW9uVGFyZ2V0XG4gICAgfVxuXG4gICAgY29uc3QgdGFyZ2V0U2VjdGlvbiA9IHNlY3Rpb25NYXBbdGFiTmFtZV1cbiAgICBpZiAodGFyZ2V0U2VjdGlvbikge1xuICAgICAgdGFyZ2V0U2VjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgfVxuICB9XG5cbiAgLy8gRmxpZ2h0IHByZWZlcmVuY2UgdG9nZ2xlc1xuICB0b2dnbGVEaXJlY3RGbGlnaHQoKTogdm9pZCB7XG4gICAgLy8gVG9nZ2xlIGNoZWNrYm94IHN0YXRlXG4gICAgdGhpcy5kaXJlY3RGbGlnaHRDaGVja2JveFRhcmdldC5jaGVja2VkID0gIXRoaXMuZGlyZWN0RmxpZ2h0Q2hlY2tib3hUYXJnZXQuY2hlY2tlZFxuICAgIHRoaXMuZmlsdGVycy5kaXJlY3RGbGlnaHQgPSB0aGlzLmRpcmVjdEZsaWdodENoZWNrYm94VGFyZ2V0LmNoZWNrZWRcbiAgICBcbiAgICAvLyBVcGRhdGUgY2FyZCBzdHlsZVxuICAgIGlmICh0aGlzLmRpcmVjdEZsaWdodENhcmRUYXJnZXQpIHtcbiAgICAgIGlmICh0aGlzLmZpbHRlcnMuZGlyZWN0RmxpZ2h0KSB7XG4gICAgICAgIHRoaXMuZGlyZWN0RmxpZ2h0Q2FyZFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNmNmY3ZjldXCIpXG4gICAgICAgIHRoaXMuZGlyZWN0RmxpZ2h0Q2FyZFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNmZmY5ZTZdXCIsIFwiYm9yZGVyLVswLjVweF1cIiwgXCJib3JkZXItWyNmZmRhODBdXCIpXG4gICAgICAgIC8vIEFkZCBjaGVja21hcmtcbiAgICAgICAgaWYgKCF0aGlzLmRpcmVjdEZsaWdodENhcmRUYXJnZXQucXVlcnlTZWxlY3RvcihcIi5jaGVja21hcmtcIikpIHtcbiAgICAgICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLmNyZWF0ZUNoZWNrbWFyaygpXG4gICAgICAgICAgdGhpcy5kaXJlY3RGbGlnaHRDYXJkVGFyZ2V0LmFwcGVuZENoaWxkKGNoZWNrbWFyaylcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kaXJlY3RGbGlnaHRDYXJkVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy1bI2Y2ZjdmOV1cIilcbiAgICAgICAgdGhpcy5kaXJlY3RGbGlnaHRDYXJkVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI2ZmZjllNl1cIiwgXCJib3JkZXItWzAuNXB4XVwiLCBcImJvcmRlci1bI2ZmZGE4MF1cIilcbiAgICAgICAgLy8gUmVtb3ZlIGNoZWNrbWFya1xuICAgICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLmRpcmVjdEZsaWdodENhcmRUYXJnZXQucXVlcnlTZWxlY3RvcihcIi5jaGVja21hcmtcIilcbiAgICAgICAgaWYgKGNoZWNrbWFyaykgY2hlY2ttYXJrLnJlbW92ZSgpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFN5bmMgd2l0aCBxdWljayBmaWx0ZXIgYnV0dG9uIGlmIGV4aXN0c1xuICAgIGlmICh0aGlzLnF1aWNrRGlyZWN0RmxpZ2h0VGFyZ2V0KSB7XG4gICAgICBpZiAodGhpcy5maWx0ZXJzLmRpcmVjdEZsaWdodCkge1xuICAgICAgICB0aGlzLnF1aWNrRGlyZWN0RmxpZ2h0VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgICAgdGhpcy5xdWlja0RpcmVjdEZsaWdodFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnF1aWNrRGlyZWN0RmxpZ2h0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgICAgdGhpcy5xdWlja0RpcmVjdEZsaWdodFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMudXBkYXRlUmVzdWx0Q291bnQoKVxuICB9XG5cbiAgdG9nZ2xlTm9UcmFuc2l0KCk6IHZvaWQge1xuICAgIC8vIFRvZ2dsZSBjaGVja2JveCBzdGF0ZVxuICAgIHRoaXMubm9UcmFuc2l0Q2hlY2tib3hUYXJnZXQuY2hlY2tlZCA9ICF0aGlzLm5vVHJhbnNpdENoZWNrYm94VGFyZ2V0LmNoZWNrZWRcbiAgICB0aGlzLmZpbHRlcnMubm9UcmFuc2l0ID0gdGhpcy5ub1RyYW5zaXRDaGVja2JveFRhcmdldC5jaGVja2VkXG4gICAgXG4gICAgLy8gVXBkYXRlIGNhcmQgc3R5bGVcbiAgICBpZiAodGhpcy5ub1RyYW5zaXRDYXJkVGFyZ2V0KSB7XG4gICAgICBpZiAodGhpcy5maWx0ZXJzLm5vVHJhbnNpdCkge1xuICAgICAgICB0aGlzLm5vVHJhbnNpdENhcmRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLVsjZjZmN2Y5XVwiKVxuICAgICAgICB0aGlzLm5vVHJhbnNpdENhcmRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLVsjZmZmOWU2XVwiLCBcImJvcmRlci1bMC41cHhdXCIsIFwiYm9yZGVyLVsjZmZkYTgwXVwiKVxuICAgICAgICAvLyBBZGQgY2hlY2ttYXJrXG4gICAgICAgIGlmICghdGhpcy5ub1RyYW5zaXRDYXJkVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrXCIpKSB7XG4gICAgICAgICAgY29uc3QgY2hlY2ttYXJrID0gdGhpcy5jcmVhdGVDaGVja21hcmsoKVxuICAgICAgICAgIHRoaXMubm9UcmFuc2l0Q2FyZFRhcmdldC5hcHBlbmRDaGlsZChjaGVja21hcmspXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubm9UcmFuc2l0Q2FyZFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNmNmY3ZjldXCIpXG4gICAgICAgIHRoaXMubm9UcmFuc2l0Q2FyZFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNmZmY5ZTZdXCIsIFwiYm9yZGVyLVswLjVweF1cIiwgXCJib3JkZXItWyNmZmRhODBdXCIpXG4gICAgICAgIC8vIFJlbW92ZSBjaGVja21hcmtcbiAgICAgICAgY29uc3QgY2hlY2ttYXJrID0gdGhpcy5ub1RyYW5zaXRDYXJkVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrXCIpXG4gICAgICAgIGlmIChjaGVja21hcmspIGNoZWNrbWFyay5yZW1vdmUoKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBTeW5jIHdpdGggcXVpY2sgZmlsdGVyIGJ1dHRvbiBpZiBleGlzdHNcbiAgICBpZiAodGhpcy5xdWlja05vVHJhbnNpdFRhcmdldCkge1xuICAgICAgaWYgKHRoaXMuZmlsdGVycy5ub1RyYW5zaXQpIHtcbiAgICAgICAgdGhpcy5xdWlja05vVHJhbnNpdFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgIHRoaXMucXVpY2tOb1RyYW5zaXRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5xdWlja05vVHJhbnNpdFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgIHRoaXMucXVpY2tOb1RyYW5zaXRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnVwZGF0ZVJlc3VsdENvdW50KClcbiAgfVxuXG4gIHRvZ2dsZUNoZWNrZWRMdWdnYWdlKCk6IHZvaWQge1xuICAgIC8vIFRvZ2dsZSBjaGVja2JveCBzdGF0ZVxuICAgIHRoaXMuaW5jbHVkZUNoZWNrZWRMdWdnYWdlQ2hlY2tib3hUYXJnZXQuY2hlY2tlZCA9ICF0aGlzLmluY2x1ZGVDaGVja2VkTHVnZ2FnZUNoZWNrYm94VGFyZ2V0LmNoZWNrZWRcbiAgICB0aGlzLmZpbHRlcnMuaW5jbHVkZUNoZWNrZWRMdWdnYWdlID0gdGhpcy5pbmNsdWRlQ2hlY2tlZEx1Z2dhZ2VDaGVja2JveFRhcmdldC5jaGVja2VkXG4gICAgXG4gICAgLy8gVXBkYXRlIGNhcmQgc3R5bGVcbiAgICBpZiAodGhpcy5jaGVja2VkTHVnZ2FnZUNhcmRUYXJnZXQpIHtcbiAgICAgIGlmICh0aGlzLmZpbHRlcnMuaW5jbHVkZUNoZWNrZWRMdWdnYWdlKSB7XG4gICAgICAgIHRoaXMuY2hlY2tlZEx1Z2dhZ2VDYXJkVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI2Y2ZjdmOV1cIilcbiAgICAgICAgdGhpcy5jaGVja2VkTHVnZ2FnZUNhcmRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLVsjZmZmOWU2XVwiLCBcImJvcmRlci1bMC41cHhdXCIsIFwiYm9yZGVyLVsjZmZkYTgwXVwiKVxuICAgICAgICAvLyBBZGQgY2hlY2ttYXJrXG4gICAgICAgIGlmICghdGhpcy5jaGVja2VkTHVnZ2FnZUNhcmRUYXJnZXQucXVlcnlTZWxlY3RvcihcIi5jaGVja21hcmtcIikpIHtcbiAgICAgICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLmNyZWF0ZUNoZWNrbWFyaygpXG4gICAgICAgICAgdGhpcy5jaGVja2VkTHVnZ2FnZUNhcmRUYXJnZXQuYXBwZW5kQ2hpbGQoY2hlY2ttYXJrKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNoZWNrZWRMdWdnYWdlQ2FyZFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNmNmY3ZjldXCIpXG4gICAgICAgIHRoaXMuY2hlY2tlZEx1Z2dhZ2VDYXJkVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI2ZmZjllNl1cIiwgXCJib3JkZXItWzAuNXB4XVwiLCBcImJvcmRlci1bI2ZmZGE4MF1cIilcbiAgICAgICAgLy8gUmVtb3ZlIGNoZWNrbWFya1xuICAgICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLmNoZWNrZWRMdWdnYWdlQ2FyZFRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbWFya1wiKVxuICAgICAgICBpZiAoY2hlY2ttYXJrKSBjaGVja21hcmsucmVtb3ZlKClcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gU3luYyB3aXRoIHF1aWNrIGZpbHRlciBidXR0b24gaWYgZXhpc3RzXG4gICAgaWYgKHRoaXMucXVpY2tDaGVja2VkTHVnZ2FnZVRhcmdldCkge1xuICAgICAgaWYgKHRoaXMuZmlsdGVycy5pbmNsdWRlQ2hlY2tlZEx1Z2dhZ2UpIHtcbiAgICAgICAgdGhpcy5xdWlja0NoZWNrZWRMdWdnYWdlVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgICAgdGhpcy5xdWlja0NoZWNrZWRMdWdnYWdlVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucXVpY2tDaGVja2VkTHVnZ2FnZVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgIHRoaXMucXVpY2tDaGVja2VkTHVnZ2FnZVRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMudXBkYXRlUmVzdWx0Q291bnQoKVxuICB9XG5cbiAgdG9nZ2xlTm9TaGFyZWRGbGlnaHQoKTogdm9pZCB7XG4gICAgLy8gVG9nZ2xlIGNoZWNrYm94IHN0YXRlXG4gICAgdGhpcy5ub1NoYXJlZEZsaWdodENoZWNrYm94VGFyZ2V0LmNoZWNrZWQgPSAhdGhpcy5ub1NoYXJlZEZsaWdodENoZWNrYm94VGFyZ2V0LmNoZWNrZWRcbiAgICB0aGlzLmZpbHRlcnMubm9TaGFyZWRGbGlnaHQgPSB0aGlzLm5vU2hhcmVkRmxpZ2h0Q2hlY2tib3hUYXJnZXQuY2hlY2tlZFxuICAgIFxuICAgIC8vIFVwZGF0ZSBjYXJkIHN0eWxlXG4gICAgaWYgKHRoaXMubm9TaGFyZWRGbGlnaHRDYXJkVGFyZ2V0KSB7XG4gICAgICBpZiAodGhpcy5maWx0ZXJzLm5vU2hhcmVkRmxpZ2h0KSB7XG4gICAgICAgIHRoaXMubm9TaGFyZWRGbGlnaHRDYXJkVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI2Y2ZjdmOV1cIilcbiAgICAgICAgdGhpcy5ub1NoYXJlZEZsaWdodENhcmRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLVsjZmZmOWU2XVwiLCBcImJvcmRlci1bMC41cHhdXCIsIFwiYm9yZGVyLVsjZmZkYTgwXVwiKVxuICAgICAgICAvLyBBZGQgY2hlY2ttYXJrXG4gICAgICAgIGlmICghdGhpcy5ub1NoYXJlZEZsaWdodENhcmRUYXJnZXQucXVlcnlTZWxlY3RvcihcIi5jaGVja21hcmtcIikpIHtcbiAgICAgICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLmNyZWF0ZUNoZWNrbWFyaygpXG4gICAgICAgICAgdGhpcy5ub1NoYXJlZEZsaWdodENhcmRUYXJnZXQuYXBwZW5kQ2hpbGQoY2hlY2ttYXJrKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm5vU2hhcmVkRmxpZ2h0Q2FyZFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNmNmY3ZjldXCIpXG4gICAgICAgIHRoaXMubm9TaGFyZWRGbGlnaHRDYXJkVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI2ZmZjllNl1cIiwgXCJib3JkZXItWzAuNXB4XVwiLCBcImJvcmRlci1bI2ZmZGE4MF1cIilcbiAgICAgICAgLy8gUmVtb3ZlIGNoZWNrbWFya1xuICAgICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLm5vU2hhcmVkRmxpZ2h0Q2FyZFRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbWFya1wiKVxuICAgICAgICBpZiAoY2hlY2ttYXJrKSBjaGVja21hcmsucmVtb3ZlKClcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gU3luYyB3aXRoIHF1aWNrIGZpbHRlciBidXR0b24gaWYgZXhpc3RzXG4gICAgaWYgKHRoaXMucXVpY2tOb1NoYXJlZEZsaWdodFRhcmdldCkge1xuICAgICAgaWYgKHRoaXMuZmlsdGVycy5ub1NoYXJlZEZsaWdodCkge1xuICAgICAgICB0aGlzLnF1aWNrTm9TaGFyZWRGbGlnaHRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgICB0aGlzLnF1aWNrTm9TaGFyZWRGbGlnaHRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5xdWlja05vU2hhcmVkRmxpZ2h0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgICAgdGhpcy5xdWlja05vU2hhcmVkRmxpZ2h0VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy51cGRhdGVSZXN1bHRDb3VudCgpXG4gIH1cblxuICB0b2dnbGVEaXNjb3VudFByaWNlKCk6IHZvaWQge1xuICAgIC8vIFRvZ2dsZSBjaGVja2JveCBzdGF0ZVxuICAgIHRoaXMuZGlzY291bnRQcmljZUNoZWNrYm94VGFyZ2V0LmNoZWNrZWQgPSAhdGhpcy5kaXNjb3VudFByaWNlQ2hlY2tib3hUYXJnZXQuY2hlY2tlZFxuICAgIHRoaXMuZmlsdGVycy5kaXNjb3VudFByaWNlID0gdGhpcy5kaXNjb3VudFByaWNlQ2hlY2tib3hUYXJnZXQuY2hlY2tlZFxuICAgIFxuICAgIC8vIFVwZGF0ZSBjYXJkIHN0eWxlXG4gICAgaWYgKHRoaXMuZGlzY291bnRQcmljZUNhcmRUYXJnZXQpIHtcbiAgICAgIGlmICh0aGlzLmZpbHRlcnMuZGlzY291bnRQcmljZSkge1xuICAgICAgICB0aGlzLmRpc2NvdW50UHJpY2VDYXJkVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI2Y2ZjdmOV1cIilcbiAgICAgICAgdGhpcy5kaXNjb3VudFByaWNlQ2FyZFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNmZmY5ZTZdXCIsIFwiYm9yZGVyLVswLjVweF1cIiwgXCJib3JkZXItWyNmZmRhODBdXCIpXG4gICAgICAgIC8vIEFkZCBjaGVja21hcmtcbiAgICAgICAgaWYgKCF0aGlzLmRpc2NvdW50UHJpY2VDYXJkVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrXCIpKSB7XG4gICAgICAgICAgY29uc3QgY2hlY2ttYXJrID0gdGhpcy5jcmVhdGVDaGVja21hcmsoKVxuICAgICAgICAgIHRoaXMuZGlzY291bnRQcmljZUNhcmRUYXJnZXQuYXBwZW5kQ2hpbGQoY2hlY2ttYXJrKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRpc2NvdW50UHJpY2VDYXJkVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy1bI2Y2ZjdmOV1cIilcbiAgICAgICAgdGhpcy5kaXNjb3VudFByaWNlQ2FyZFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNmZmY5ZTZdXCIsIFwiYm9yZGVyLVswLjVweF1cIiwgXCJib3JkZXItWyNmZmRhODBdXCIpXG4gICAgICAgIC8vIFJlbW92ZSBjaGVja21hcmtcbiAgICAgICAgY29uc3QgY2hlY2ttYXJrID0gdGhpcy5kaXNjb3VudFByaWNlQ2FyZFRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbWFya1wiKVxuICAgICAgICBpZiAoY2hlY2ttYXJrKSBjaGVja21hcmsucmVtb3ZlKClcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gU3luYyB3aXRoIHF1aWNrIGZpbHRlciBidXR0b24gaWYgZXhpc3RzXG4gICAgaWYgKHRoaXMucXVpY2tEaXNjb3VudFByaWNlVGFyZ2V0KSB7XG4gICAgICBpZiAodGhpcy5maWx0ZXJzLmRpc2NvdW50UHJpY2UpIHtcbiAgICAgICAgdGhpcy5xdWlja0Rpc2NvdW50UHJpY2VUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgICB0aGlzLnF1aWNrRGlzY291bnRQcmljZVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnF1aWNrRGlzY291bnRQcmljZVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgIHRoaXMucXVpY2tEaXNjb3VudFByaWNlVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy51cGRhdGVSZXN1bHRDb3VudCgpXG4gIH1cblxuICAvLyBRdWljayBmaWx0ZXIgYnV0dG9uIGFjdGlvbnNcbiAgdG9nZ2xlUXVpY2tEaXJlY3RGbGlnaHQoKTogdm9pZCB7XG4gICAgdGhpcy5maWx0ZXJzLmRpcmVjdEZsaWdodCA9ICF0aGlzLmZpbHRlcnMuZGlyZWN0RmxpZ2h0XG4gICAgdGhpcy5kaXJlY3RGbGlnaHRDaGVja2JveFRhcmdldC5jaGVja2VkID0gdGhpcy5maWx0ZXJzLmRpcmVjdEZsaWdodFxuICAgIFxuICAgIC8vIFVwZGF0ZSBxdWljayBidXR0b24gc3R5bGVcbiAgICBpZiAodGhpcy5xdWlja0RpcmVjdEZsaWdodFRhcmdldCkge1xuICAgICAgaWYgKHRoaXMuZmlsdGVycy5kaXJlY3RGbGlnaHQpIHtcbiAgICAgICAgdGhpcy5xdWlja0RpcmVjdEZsaWdodFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgIHRoaXMucXVpY2tEaXJlY3RGbGlnaHRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5xdWlja0RpcmVjdEZsaWdodFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgIHRoaXMucXVpY2tEaXJlY3RGbGlnaHRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnVwZGF0ZVJlc3VsdENvdW50KClcbiAgfVxuXG4gIHRvZ2dsZVF1aWNrTm9TaGFyZWRGbGlnaHQoKTogdm9pZCB7XG4gICAgdGhpcy5maWx0ZXJzLm5vU2hhcmVkRmxpZ2h0ID0gIXRoaXMuZmlsdGVycy5ub1NoYXJlZEZsaWdodFxuICAgIHRoaXMubm9TaGFyZWRGbGlnaHRDaGVja2JveFRhcmdldC5jaGVja2VkID0gdGhpcy5maWx0ZXJzLm5vU2hhcmVkRmxpZ2h0XG4gICAgXG4gICAgLy8gVXBkYXRlIHF1aWNrIGJ1dHRvbiBzdHlsZVxuICAgIGlmICh0aGlzLnF1aWNrTm9TaGFyZWRGbGlnaHRUYXJnZXQpIHtcbiAgICAgIGlmICh0aGlzLmZpbHRlcnMubm9TaGFyZWRGbGlnaHQpIHtcbiAgICAgICAgdGhpcy5xdWlja05vU2hhcmVkRmxpZ2h0VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgICAgdGhpcy5xdWlja05vU2hhcmVkRmxpZ2h0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucXVpY2tOb1NoYXJlZEZsaWdodFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgIHRoaXMucXVpY2tOb1NoYXJlZEZsaWdodFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMudXBkYXRlUmVzdWx0Q291bnQoKVxuICB9XG5cbiAgdG9nZ2xlUXVpY2tDaGVja2VkTHVnZ2FnZSgpOiB2b2lkIHtcbiAgICB0aGlzLmZpbHRlcnMuaW5jbHVkZUNoZWNrZWRMdWdnYWdlID0gIXRoaXMuZmlsdGVycy5pbmNsdWRlQ2hlY2tlZEx1Z2dhZ2VcbiAgICB0aGlzLmluY2x1ZGVDaGVja2VkTHVnZ2FnZUNoZWNrYm94VGFyZ2V0LmNoZWNrZWQgPSB0aGlzLmZpbHRlcnMuaW5jbHVkZUNoZWNrZWRMdWdnYWdlXG4gICAgXG4gICAgLy8gVXBkYXRlIHF1aWNrIGJ1dHRvbiBzdHlsZVxuICAgIGlmICh0aGlzLnF1aWNrQ2hlY2tlZEx1Z2dhZ2VUYXJnZXQpIHtcbiAgICAgIGlmICh0aGlzLmZpbHRlcnMuaW5jbHVkZUNoZWNrZWRMdWdnYWdlKSB7XG4gICAgICAgIHRoaXMucXVpY2tDaGVja2VkTHVnZ2FnZVRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgIHRoaXMucXVpY2tDaGVja2VkTHVnZ2FnZVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnF1aWNrQ2hlY2tlZEx1Z2dhZ2VUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgICB0aGlzLnF1aWNrQ2hlY2tlZEx1Z2dhZ2VUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnVwZGF0ZVJlc3VsdENvdW50KClcbiAgfVxuXG4gIHRvZ2dsZVF1aWNrTm9UcmFuc2l0KCk6IHZvaWQge1xuICAgIHRoaXMuZmlsdGVycy5ub1RyYW5zaXQgPSAhdGhpcy5maWx0ZXJzLm5vVHJhbnNpdFxuICAgIHRoaXMubm9UcmFuc2l0Q2hlY2tib3hUYXJnZXQuY2hlY2tlZCA9IHRoaXMuZmlsdGVycy5ub1RyYW5zaXRcbiAgICBcbiAgICAvLyBVcGRhdGUgcXVpY2sgYnV0dG9uIHN0eWxlXG4gICAgaWYgKHRoaXMucXVpY2tOb1RyYW5zaXRUYXJnZXQpIHtcbiAgICAgIGlmICh0aGlzLmZpbHRlcnMubm9UcmFuc2l0KSB7XG4gICAgICAgIHRoaXMucXVpY2tOb1RyYW5zaXRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgICB0aGlzLnF1aWNrTm9UcmFuc2l0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucXVpY2tOb1RyYW5zaXRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgICB0aGlzLnF1aWNrTm9UcmFuc2l0VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy51cGRhdGVSZXN1bHRDb3VudCgpXG4gIH1cblxuICB0b2dnbGVRdWlja0Rpc2NvdW50UHJpY2UoKTogdm9pZCB7XG4gICAgdGhpcy5maWx0ZXJzLmRpc2NvdW50UHJpY2UgPSAhdGhpcy5maWx0ZXJzLmRpc2NvdW50UHJpY2VcbiAgICB0aGlzLmRpc2NvdW50UHJpY2VDaGVja2JveFRhcmdldC5jaGVja2VkID0gdGhpcy5maWx0ZXJzLmRpc2NvdW50UHJpY2VcbiAgICBcbiAgICAvLyBVcGRhdGUgcXVpY2sgYnV0dG9uIHN0eWxlXG4gICAgaWYgKHRoaXMucXVpY2tEaXNjb3VudFByaWNlVGFyZ2V0KSB7XG4gICAgICBpZiAodGhpcy5maWx0ZXJzLmRpc2NvdW50UHJpY2UpIHtcbiAgICAgICAgdGhpcy5xdWlja0Rpc2NvdW50UHJpY2VUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgICB0aGlzLnF1aWNrRGlzY291bnRQcmljZVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnF1aWNrRGlzY291bnRQcmljZVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgIHRoaXMucXVpY2tEaXNjb3VudFByaWNlVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy51cGRhdGVSZXN1bHRDb3VudCgpXG4gIH1cblxuICAvLyBBaXJsaW5lIHNlbGVjdGlvblxuICB0b2dnbGVBaXJsaW5lKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNoZWNrYm94ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBhaXJsaW5lID0gY2hlY2tib3gudmFsdWVcbiAgICBcbiAgICBpZiAoY2hlY2tib3guY2hlY2tlZCkge1xuICAgICAgdGhpcy5maWx0ZXJzLmFpcmxpbmVzLmFkZChhaXJsaW5lKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZpbHRlcnMuYWlybGluZXMuZGVsZXRlKGFpcmxpbmUpXG4gICAgfVxuICAgIFxuICAgIHRoaXMudXBkYXRlUmVzdWx0Q291bnQoKVxuICB9XG5cbiAgLy8gQWlycG9ydCBzZWxlY3Rpb25cbiAgdG9nZ2xlRGVwYXJ0dXJlQWlycG9ydChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjaGVja2JveCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgYWlycG9ydCA9IGNoZWNrYm94LnZhbHVlXG4gICAgXG4gICAgaWYgKGNoZWNrYm94LmNoZWNrZWQpIHtcbiAgICAgIHRoaXMuZmlsdGVycy5kZXBhcnR1cmVBaXJwb3J0cy5hZGQoYWlycG9ydClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5maWx0ZXJzLmRlcGFydHVyZUFpcnBvcnRzLmRlbGV0ZShhaXJwb3J0KVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnVwZGF0ZVJlc3VsdENvdW50KClcbiAgfVxuXG4gIHRvZ2dsZUFycml2YWxBaXJwb3J0KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNoZWNrYm94ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBhaXJwb3J0ID0gY2hlY2tib3gudmFsdWVcbiAgICBcbiAgICBpZiAoY2hlY2tib3guY2hlY2tlZCkge1xuICAgICAgdGhpcy5maWx0ZXJzLmFycml2YWxBaXJwb3J0cy5hZGQoYWlycG9ydClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5maWx0ZXJzLmFycml2YWxBaXJwb3J0cy5kZWxldGUoYWlycG9ydClcbiAgICB9XG4gICAgXG4gICAgdGhpcy51cGRhdGVSZXN1bHRDb3VudCgpXG4gIH1cblxuICAvLyBEZXBhcnR1cmUgdGltZSBzZWxlY3Rpb25cbiAgdG9nZ2xlRGVwYXJ0dXJlVGltZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjaGVja2JveCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgdGltZVJhbmdlID0gY2hlY2tib3gudmFsdWVcbiAgICBcbiAgICBpZiAoY2hlY2tib3guY2hlY2tlZCkge1xuICAgICAgdGhpcy5maWx0ZXJzLmRlcGFydHVyZVRpbWVSYW5nZXMuYWRkKHRpbWVSYW5nZSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5maWx0ZXJzLmRlcGFydHVyZVRpbWVSYW5nZXMuZGVsZXRlKHRpbWVSYW5nZSlcbiAgICB9XG4gICAgXG4gICAgdGhpcy51cGRhdGVSZXN1bHRDb3VudCgpXG4gIH1cblxuICAvLyBBaXJjcmFmdCBtb2RlbCBzZWxlY3Rpb25cbiAgdG9nZ2xlQWlyY3JhZnRNb2RlbChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjaGVja2JveCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgbW9kZWwgPSBjaGVja2JveC52YWx1ZVxuICAgIFxuICAgIGlmIChjaGVja2JveC5jaGVja2VkKSB7XG4gICAgICB0aGlzLmZpbHRlcnMuYWlyY3JhZnRNb2RlbHMuYWRkKG1vZGVsKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZpbHRlcnMuYWlyY3JhZnRNb2RlbHMuZGVsZXRlKG1vZGVsKVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnVwZGF0ZVJlc3VsdENvdW50KClcbiAgfVxuXG4gIC8vIFJlc2V0IGFsbCBmaWx0ZXJzXG4gIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuaW5pdGlhbGl6ZUZpbHRlcnMoKVxuICAgIFxuICAgIC8vIFJlc2V0IGFsbCBjaGVja2JveGVzXG4gICAgdGhpcy5kaXJlY3RGbGlnaHRDaGVja2JveFRhcmdldC5jaGVja2VkID0gZmFsc2VcbiAgICB0aGlzLm5vVHJhbnNpdENoZWNrYm94VGFyZ2V0LmNoZWNrZWQgPSBmYWxzZVxuICAgIHRoaXMuaW5jbHVkZUNoZWNrZWRMdWdnYWdlQ2hlY2tib3hUYXJnZXQuY2hlY2tlZCA9IGZhbHNlXG4gICAgdGhpcy5ub1NoYXJlZEZsaWdodENoZWNrYm94VGFyZ2V0LmNoZWNrZWQgPSBmYWxzZVxuICAgIHRoaXMuZGlzY291bnRQcmljZUNoZWNrYm94VGFyZ2V0LmNoZWNrZWQgPSBmYWxzZVxuICAgIFxuICAgIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBjb25zdCBhaXJsaW5lQ2hlY2tib3hlcyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxJbnB1dEVsZW1lbnQ+KCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl1bZGF0YS1maWx0ZXItdHlwZT1cImFpcmxpbmVcIl0nKVxuICAgIGFpcmxpbmVDaGVja2JveGVzLmZvckVhY2goY2IgPT4gY2IuY2hlY2tlZCA9IGZhbHNlKVxuICAgIFxuICAgIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBjb25zdCBhaXJwb3J0Q2hlY2tib3hlcyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxJbnB1dEVsZW1lbnQ+KCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl1bZGF0YS1maWx0ZXItdHlwZT1cImFpcnBvcnRcIl0nKVxuICAgIGFpcnBvcnRDaGVja2JveGVzLmZvckVhY2goY2IgPT4gY2IuY2hlY2tlZCA9IGZhbHNlKVxuICAgIFxuICAgIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBjb25zdCB0aW1lQ2hlY2tib3hlcyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxJbnB1dEVsZW1lbnQ+KCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl1bZGF0YS1maWx0ZXItdHlwZT1cImRlcGFydHVyZS10aW1lXCJdJylcbiAgICB0aW1lQ2hlY2tib3hlcy5mb3JFYWNoKGNiID0+IGNiLmNoZWNrZWQgPSBmYWxzZSlcbiAgICBcbiAgICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gICAgY29uc3QgbW9kZWxDaGVja2JveGVzID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTElucHV0RWxlbWVudD4oJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXVtkYXRhLWZpbHRlci10eXBlPVwiYWlyY3JhZnQtbW9kZWxcIl0nKVxuICAgIG1vZGVsQ2hlY2tib3hlcy5mb3JFYWNoKGNiID0+IGNiLmNoZWNrZWQgPSBmYWxzZSlcbiAgICBcbiAgICAvLyBSZXNldCBxdWljayBmaWx0ZXIgYnV0dG9uc1xuICAgIGlmICh0aGlzLnF1aWNrRGlyZWN0RmxpZ2h0VGFyZ2V0KSB7XG4gICAgICB0aGlzLnF1aWNrRGlyZWN0RmxpZ2h0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgIHRoaXMucXVpY2tEaXJlY3RGbGlnaHRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5xdWlja05vU2hhcmVkRmxpZ2h0VGFyZ2V0KSB7XG4gICAgICB0aGlzLnF1aWNrTm9TaGFyZWRGbGlnaHRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgdGhpcy5xdWlja05vU2hhcmVkRmxpZ2h0VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMucXVpY2tDaGVja2VkTHVnZ2FnZVRhcmdldCkge1xuICAgICAgdGhpcy5xdWlja0NoZWNrZWRMdWdnYWdlVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgIHRoaXMucXVpY2tDaGVja2VkTHVnZ2FnZVRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLnF1aWNrTm9UcmFuc2l0VGFyZ2V0KSB7XG4gICAgICB0aGlzLnF1aWNrTm9UcmFuc2l0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgIHRoaXMucXVpY2tOb1RyYW5zaXRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5xdWlja0Rpc2NvdW50UHJpY2VUYXJnZXQpIHtcbiAgICAgIHRoaXMucXVpY2tEaXNjb3VudFByaWNlVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgIHRoaXMucXVpY2tEaXNjb3VudFByaWNlVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICB9XG4gICAgXG4gICAgLy8gUmVzZXQgY2FyZCB2aXN1YWwgc3RhdGVzXG4gICAgaWYgKHRoaXMuZGlyZWN0RmxpZ2h0Q2FyZFRhcmdldCkge1xuICAgICAgdGhpcy5kaXJlY3RGbGlnaHRDYXJkVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy1bI2Y2ZjdmOV1cIilcbiAgICAgIHRoaXMuZGlyZWN0RmxpZ2h0Q2FyZFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNmZmY5ZTZdXCIsIFwiYm9yZGVyLVswLjVweF1cIiwgXCJib3JkZXItWyNmZmRhODBdXCIpXG4gICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLmRpcmVjdEZsaWdodENhcmRUYXJnZXQucXVlcnlTZWxlY3RvcihcIi5jaGVja21hcmtcIilcbiAgICAgIGlmIChjaGVja21hcmspIGNoZWNrbWFyay5yZW1vdmUoKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5ub1NoYXJlZEZsaWdodENhcmRUYXJnZXQpIHtcbiAgICAgIHRoaXMubm9TaGFyZWRGbGlnaHRDYXJkVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy1bI2Y2ZjdmOV1cIilcbiAgICAgIHRoaXMubm9TaGFyZWRGbGlnaHRDYXJkVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI2ZmZjllNl1cIiwgXCJib3JkZXItWzAuNXB4XVwiLCBcImJvcmRlci1bI2ZmZGE4MF1cIilcbiAgICAgIGNvbnN0IGNoZWNrbWFyayA9IHRoaXMubm9TaGFyZWRGbGlnaHRDYXJkVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrXCIpXG4gICAgICBpZiAoY2hlY2ttYXJrKSBjaGVja21hcmsucmVtb3ZlKClcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuY2hlY2tlZEx1Z2dhZ2VDYXJkVGFyZ2V0KSB7XG4gICAgICB0aGlzLmNoZWNrZWRMdWdnYWdlQ2FyZFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNmNmY3ZjldXCIpXG4gICAgICB0aGlzLmNoZWNrZWRMdWdnYWdlQ2FyZFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNmZmY5ZTZdXCIsIFwiYm9yZGVyLVswLjVweF1cIiwgXCJib3JkZXItWyNmZmRhODBdXCIpXG4gICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLmNoZWNrZWRMdWdnYWdlQ2FyZFRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbWFya1wiKVxuICAgICAgaWYgKGNoZWNrbWFyaykgY2hlY2ttYXJrLnJlbW92ZSgpXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLm5vVHJhbnNpdENhcmRUYXJnZXQpIHtcbiAgICAgIHRoaXMubm9UcmFuc2l0Q2FyZFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNmNmY3ZjldXCIpXG4gICAgICB0aGlzLm5vVHJhbnNpdENhcmRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLVsjZmZmOWU2XVwiLCBcImJvcmRlci1bMC41cHhdXCIsIFwiYm9yZGVyLVsjZmZkYTgwXVwiKVxuICAgICAgY29uc3QgY2hlY2ttYXJrID0gdGhpcy5ub1RyYW5zaXRDYXJkVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrXCIpXG4gICAgICBpZiAoY2hlY2ttYXJrKSBjaGVja21hcmsucmVtb3ZlKClcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuZGlzY291bnRQcmljZUNhcmRUYXJnZXQpIHtcbiAgICAgIHRoaXMuZGlzY291bnRQcmljZUNhcmRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLVsjZjZmN2Y5XVwiKVxuICAgICAgdGhpcy5kaXNjb3VudFByaWNlQ2FyZFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNmZmY5ZTZdXCIsIFwiYm9yZGVyLVswLjVweF1cIiwgXCJib3JkZXItWyNmZmRhODBdXCIpXG4gICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLmRpc2NvdW50UHJpY2VDYXJkVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrXCIpXG4gICAgICBpZiAoY2hlY2ttYXJrKSBjaGVja21hcmsucmVtb3ZlKClcbiAgICB9XG4gICAgXG4gICAgdGhpcy51cGRhdGVSZXN1bHRDb3VudCgpXG4gIH1cblxuICAvLyBBcHBseSBmaWx0ZXJzIGFuZCBjbG9zZSBtb2RhbFxuICBjb25maXJtKCk6IHZvaWQge1xuICAgIC8vIEluIGEgcmVhbCBhcHBsaWNhdGlvbiwgdGhpcyB3b3VsZCB0cmlnZ2VyIGZpbHRlcmluZyBvZiB0aGUgZmxpZ2h0IGxpc3RcbiAgICAvLyBGb3Igbm93LCB3ZSBqdXN0IGNsb3NlIHRoZSBtb2RhbFxuICAgIHRoaXMuY2xvc2VNb2RhbCgpXG4gICAgXG4gICAgLy8gRGlzcGF0Y2ggY3VzdG9tIGV2ZW50IGZvciBvdGhlciBjb250cm9sbGVycyB0byBsaXN0ZW4gdG9cbiAgICB0aGlzLmVsZW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2ZpbHRlcnMtYXBwbGllZCcsIHtcbiAgICAgIGRldGFpbDogeyBmaWx0ZXJzOiB0aGlzLmZpbHRlcnMgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICB9KSlcbiAgfVxuXG4gIC8vIFVwZGF0ZSByZXN1bHQgY291bnQgKHBsYWNlaG9sZGVyIC0gaW4gcmVhbCBhcHAgd291bGQgY291bnQgZmlsdGVyZWQgZmxpZ2h0cylcbiAgdXBkYXRlUmVzdWx0Q291bnQoKTogdm9pZCB7XG4gICAgLy8gTW9jayBjYWxjdWxhdGlvbiAtIGluIHJlYWwgYXBwIHdvdWxkIGZpbHRlciBhY3R1YWwgZmxpZ2h0IGRhdGFcbiAgICBsZXQgY291bnQgPSA2NiAvLyBCYXNlIGNvdW50IGZyb20gc2NyZWVuc2hvdFxuICAgIFxuICAgIGlmICh0aGlzLmZpbHRlcnMuZGlyZWN0RmxpZ2h0KSBjb3VudCA9IE1hdGguZmxvb3IoY291bnQgKiAwLjcpXG4gICAgaWYgKHRoaXMuZmlsdGVycy5ub1RyYW5zaXQpIGNvdW50ID0gTWF0aC5mbG9vcihjb3VudCAqIDAuOClcbiAgICBpZiAodGhpcy5maWx0ZXJzLmFpcmxpbmVzLnNpemUgPiAwKSBjb3VudCA9IE1hdGguZmxvb3IoY291bnQgKiAwLjYpXG4gICAgaWYgKHRoaXMuZmlsdGVycy5kZXBhcnR1cmVBaXJwb3J0cy5zaXplID4gMCkgY291bnQgPSBNYXRoLmZsb29yKGNvdW50ICogMC43KVxuICAgIGlmICh0aGlzLmZpbHRlcnMuYXJyaXZhbEFpcnBvcnRzLnNpemUgPiAwKSBjb3VudCA9IE1hdGguZmxvb3IoY291bnQgKiAwLjcpXG4gICAgaWYgKHRoaXMuZmlsdGVycy5kZXBhcnR1cmVUaW1lUmFuZ2VzLnNpemUgPiAwKSBjb3VudCA9IE1hdGguZmxvb3IoY291bnQgKiAwLjUpXG4gICAgaWYgKHRoaXMuZmlsdGVycy5haXJjcmFmdE1vZGVscy5zaXplID4gMCkgY291bnQgPSBNYXRoLmZsb29yKGNvdW50ICogMC42KVxuICAgIFxuICAgIHRoaXMucmVzdWx0Q291bnRUYXJnZXQudGV4dENvbnRlbnQgPSBjb3VudC50b1N0cmluZygpXG4gICAgXG4gICAgLy8gVXBkYXRlIGZpbHRlciBiYWRnZVxuICAgIHRoaXMudXBkYXRlRmlsdGVyQmFkZ2UoKVxuICAgIFxuICAgIC8vIFVwZGF0ZSBzZWxlY3RlZCBmaWx0ZXJzIGRpc3BsYXlcbiAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkRmlsdGVyc0Rpc3BsYXkoKVxuICB9XG5cbiAgLy8gVXBkYXRlIGZpbHRlciBiYWRnZSBjb3VudFxuICB1cGRhdGVGaWx0ZXJCYWRnZSgpOiB2b2lkIHtcbiAgICBsZXQgYWN0aXZlRmlsdGVyQ291bnQgPSAwXG4gICAgXG4gICAgLy8gQ291bnQgYm9vbGVhbiBmaWx0ZXJzXG4gICAgaWYgKHRoaXMuZmlsdGVycy5kaXJlY3RGbGlnaHQpIGFjdGl2ZUZpbHRlckNvdW50KytcbiAgICBpZiAodGhpcy5maWx0ZXJzLm5vVHJhbnNpdCkgYWN0aXZlRmlsdGVyQ291bnQrK1xuICAgIGlmICh0aGlzLmZpbHRlcnMuaW5jbHVkZUNoZWNrZWRMdWdnYWdlKSBhY3RpdmVGaWx0ZXJDb3VudCsrXG4gICAgaWYgKHRoaXMuZmlsdGVycy5ub1NoYXJlZEZsaWdodCkgYWN0aXZlRmlsdGVyQ291bnQrK1xuICAgIGlmICh0aGlzLmZpbHRlcnMuZGlzY291bnRQcmljZSkgYWN0aXZlRmlsdGVyQ291bnQrK1xuICAgIFxuICAgIC8vIENvdW50IFNldC1iYXNlZCBmaWx0ZXJzXG4gICAgYWN0aXZlRmlsdGVyQ291bnQgKz0gdGhpcy5maWx0ZXJzLmFpcmxpbmVzLnNpemVcbiAgICBhY3RpdmVGaWx0ZXJDb3VudCArPSB0aGlzLmZpbHRlcnMuZGVwYXJ0dXJlQWlycG9ydHMuc2l6ZVxuICAgIGFjdGl2ZUZpbHRlckNvdW50ICs9IHRoaXMuZmlsdGVycy5hcnJpdmFsQWlycG9ydHMuc2l6ZVxuICAgIGFjdGl2ZUZpbHRlckNvdW50ICs9IHRoaXMuZmlsdGVycy5kZXBhcnR1cmVUaW1lUmFuZ2VzLnNpemVcbiAgICBhY3RpdmVGaWx0ZXJDb3VudCArPSB0aGlzLmZpbHRlcnMuYWlyY3JhZnRNb2RlbHMuc2l6ZVxuICAgIFxuICAgIC8vIFVwZGF0ZSBiYWRnZSBkaXNwbGF5XG4gICAgaWYgKGFjdGl2ZUZpbHRlckNvdW50ID4gMCkge1xuICAgICAgdGhpcy5maWx0ZXJCYWRnZVRhcmdldC50ZXh0Q29udGVudCA9IGFjdGl2ZUZpbHRlckNvdW50LnRvU3RyaW5nKClcbiAgICAgIHRoaXMuZmlsdGVyQmFkZ2VUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZpbHRlckJhZGdlVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgICB9XG4gIH1cblxuICAvLyBVcGRhdGUgc2VsZWN0ZWQgZmlsdGVycyBkaXNwbGF5XG4gIHVwZGF0ZVNlbGVjdGVkRmlsdGVyc0Rpc3BsYXkoKTogdm9pZCB7XG4gICAgY29uc3QgZmlsdGVyTGFiZWxzOiB7IHRleHQ6IHN0cmluZzsgdHlwZTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH1bXSA9IFtdXG4gICAgXG4gICAgLy8gQWRkIGJvb2xlYW4gZmlsdGVyc1xuICAgIGNvbnN0IGZpbHRlck5hbWVNYXA6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7XG4gICAgICBkaXJlY3RGbGlnaHQ6IFwiXHU1M0VBXHU3NzBCXHU3NkY0XHU5OERFXCIsXG4gICAgICBub1NoYXJlZEZsaWdodDogXCJcdTRFMERcdTc3MEJcdTUxNzFcdTRFQUJcdTgyMkFcdTczRURcIixcbiAgICAgIGluY2x1ZGVDaGVja2VkTHVnZ2FnZTogXCJcdTU0MkJcdTYyNThcdThGRDBcdTg4NENcdTY3NEVcdTk4OURcIixcbiAgICAgIG5vVHJhbnNpdDogXCJcdTY1RTBcdTk3MDBcdThGQzdcdTU4ODNcdTdCN0VcIixcbiAgICAgIGRpc2NvdW50UHJpY2U6IFwiXHU3NzBCXHU0RjE4XHU2MEUwXHU1MjREXHU0RUY3XHU2ODNDXCJcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuZmlsdGVycy5kaXJlY3RGbGlnaHQpIHtcbiAgICAgIGZpbHRlckxhYmVscy5wdXNoKHsgdGV4dDogZmlsdGVyTmFtZU1hcC5kaXJlY3RGbGlnaHQsIHR5cGU6IFwiZGlyZWN0RmxpZ2h0XCIsIHZhbHVlOiBcIlwiIH0pXG4gICAgfVxuICAgIGlmICh0aGlzLmZpbHRlcnMubm9TaGFyZWRGbGlnaHQpIHtcbiAgICAgIGZpbHRlckxhYmVscy5wdXNoKHsgdGV4dDogZmlsdGVyTmFtZU1hcC5ub1NoYXJlZEZsaWdodCwgdHlwZTogXCJub1NoYXJlZEZsaWdodFwiLCB2YWx1ZTogXCJcIiB9KVxuICAgIH1cbiAgICBpZiAodGhpcy5maWx0ZXJzLmluY2x1ZGVDaGVja2VkTHVnZ2FnZSkge1xuICAgICAgZmlsdGVyTGFiZWxzLnB1c2goeyB0ZXh0OiBmaWx0ZXJOYW1lTWFwLmluY2x1ZGVDaGVja2VkTHVnZ2FnZSwgdHlwZTogXCJpbmNsdWRlQ2hlY2tlZEx1Z2dhZ2VcIiwgdmFsdWU6IFwiXCIgfSlcbiAgICB9XG4gICAgaWYgKHRoaXMuZmlsdGVycy5ub1RyYW5zaXQpIHtcbiAgICAgIGZpbHRlckxhYmVscy5wdXNoKHsgdGV4dDogZmlsdGVyTmFtZU1hcC5ub1RyYW5zaXQsIHR5cGU6IFwibm9UcmFuc2l0XCIsIHZhbHVlOiBcIlwiIH0pXG4gICAgfVxuICAgIGlmICh0aGlzLmZpbHRlcnMuZGlzY291bnRQcmljZSkge1xuICAgICAgZmlsdGVyTGFiZWxzLnB1c2goeyB0ZXh0OiBmaWx0ZXJOYW1lTWFwLmRpc2NvdW50UHJpY2UsIHR5cGU6IFwiZGlzY291bnRQcmljZVwiLCB2YWx1ZTogXCJcIiB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBBZGQgU2V0LWJhc2VkIGZpbHRlcnNcbiAgICB0aGlzLmZpbHRlcnMuYWlybGluZXMuZm9yRWFjaChhaXJsaW5lID0+IHtcbiAgICAgIGZpbHRlckxhYmVscy5wdXNoKHsgdGV4dDogYWlybGluZSwgdHlwZTogXCJhaXJsaW5lXCIsIHZhbHVlOiBhaXJsaW5lIH0pXG4gICAgfSlcbiAgICBcbiAgICB0aGlzLmZpbHRlcnMuZGVwYXJ0dXJlQWlycG9ydHMuZm9yRWFjaChhaXJwb3J0ID0+IHtcbiAgICAgIGZpbHRlckxhYmVscy5wdXNoKHsgdGV4dDogYWlycG9ydCwgdHlwZTogXCJkZXBhcnR1cmVBaXJwb3J0XCIsIHZhbHVlOiBhaXJwb3J0IH0pXG4gICAgfSlcbiAgICBcbiAgICB0aGlzLmZpbHRlcnMuYXJyaXZhbEFpcnBvcnRzLmZvckVhY2goYWlycG9ydCA9PiB7XG4gICAgICBmaWx0ZXJMYWJlbHMucHVzaCh7IHRleHQ6IGFpcnBvcnQsIHR5cGU6IFwiYXJyaXZhbEFpcnBvcnRcIiwgdmFsdWU6IGFpcnBvcnQgfSlcbiAgICB9KVxuICAgIFxuICAgIHRoaXMuZmlsdGVycy5kZXBhcnR1cmVUaW1lUmFuZ2VzLmZvckVhY2gocmFuZ2UgPT4ge1xuICAgICAgZmlsdGVyTGFiZWxzLnB1c2goeyB0ZXh0OiByYW5nZSwgdHlwZTogXCJkZXBhcnR1cmVUaW1lXCIsIHZhbHVlOiByYW5nZSB9KVxuICAgIH0pXG4gICAgXG4gICAgdGhpcy5maWx0ZXJzLmFpcmNyYWZ0TW9kZWxzLmZvckVhY2gobW9kZWwgPT4ge1xuICAgICAgZmlsdGVyTGFiZWxzLnB1c2goeyB0ZXh0OiBtb2RlbCwgdHlwZTogXCJhaXJjcmFmdE1vZGVsXCIsIHZhbHVlOiBtb2RlbCB9KVxuICAgIH0pXG4gICAgXG4gICAgLy8gQ2xlYXIgZXhpc3RpbmcgZmlsdGVyIHRhZ3NcbiAgICB0aGlzLnNlbGVjdGVkRmlsdGVyc0xpc3RUYXJnZXQuaW5uZXJIVE1MID0gXCJcIlxuICAgIFxuICAgIC8vIFNob3cvaGlkZSBjb250YWluZXIgYmFzZWQgb24gd2hldGhlciB0aGVyZSBhcmUgZmlsdGVyc1xuICAgIGlmIChmaWx0ZXJMYWJlbHMubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5zZWxlY3RlZEZpbHRlcnNDb250YWluZXJUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgICAgXG4gICAgICAvLyBDcmVhdGUgYW5kIGFwcGVuZCBmaWx0ZXIgdGFnc1xuICAgICAgZmlsdGVyTGFiZWxzLmZvckVhY2goZmlsdGVyID0+IHtcbiAgICAgICAgY29uc3QgdGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKVxuICAgICAgICB0YWcuY2xhc3NOYW1lID0gXCJpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgcHgtMiBweS0xIGJnLXllbGxvdy0xMDAgdGV4dC15ZWxsb3ctODAwIHRleHQteHMgcm91bmRlZC1mdWxsIGJvcmRlciBib3JkZXIteWVsbG93LTMwMCBob3ZlcjpiZy15ZWxsb3ctMjAwXCJcbiAgICAgICAgdGFnLmRhdGFzZXQuZmlsdGVyVHlwZSA9IGZpbHRlci50eXBlXG4gICAgICAgIHRhZy5kYXRhc2V0LmZpbHRlclZhbHVlID0gZmlsdGVyLnZhbHVlXG4gICAgICAgIHRhZy5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgJHtmaWx0ZXIudGV4dH1cbiAgICAgICAgICA8c3ZnIGNsYXNzPVwidy0zIGgtM1wiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCI+XG4gICAgICAgICAgICA8cGF0aCBmaWxsLXJ1bGU9XCJldmVub2RkXCJcbiAgICAgICAgICAgICAgZD1cIk00LjI5MyA0LjI5M2ExIDEgMCAwMTEuNDE0IDBMMTAgOC41ODZsNC4yOTMtNC4yOTNhMSAxIDAgMTExLjQxNCAxLjQxNEwxMS40MTQgMTBsNC4yOTMgNC4yOTNhMSAxIDBcbiAgICAgICAgICAgICAgICAtMS40MTQgMS40MTRMMTAgMTEuNDE0bC00LjI5MyA0LjI5M2ExIDEgMCAwMS0xLjQxNC0xLjQxNEw4LjU4NiAxMCA0LjI5MyA1LjcwN2ExIDEgMCAwMTAtMS40MTR6XCJcbiAgICAgICAgICAgICAgY2xpcC1ydWxlPVwiZXZlbm9kZFwiLz5cbiAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgYFxuICAgICAgICB0YWcuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMucmVtb3ZlRmlsdGVyKGZpbHRlci50eXBlLCBmaWx0ZXIudmFsdWUpKVxuICAgICAgICB0aGlzLnNlbGVjdGVkRmlsdGVyc0xpc3RUYXJnZXQuYXBwZW5kQ2hpbGQodGFnKVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZWxlY3RlZEZpbHRlcnNDb250YWluZXJUYXJnZXQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgIH1cbiAgfVxuXG4gIC8vIFJlbW92ZSBhIHNpbmdsZSBmaWx0ZXJcbiAgcmVtb3ZlRmlsdGVyKHR5cGU6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IHZvaWQge1xuICAgIHN3aXRjaCh0eXBlKSB7XG4gICAgICBjYXNlIFwiZGlyZWN0RmxpZ2h0XCI6XG4gICAgICAgIHRoaXMuZmlsdGVycy5kaXJlY3RGbGlnaHQgPSBmYWxzZVxuICAgICAgICB0aGlzLmRpcmVjdEZsaWdodENoZWNrYm94VGFyZ2V0LmNoZWNrZWQgPSBmYWxzZVxuICAgICAgICBpZiAodGhpcy5xdWlja0RpcmVjdEZsaWdodFRhcmdldCkge1xuICAgICAgICAgIHRoaXMucXVpY2tEaXJlY3RGbGlnaHRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgICAgIHRoaXMucXVpY2tEaXJlY3RGbGlnaHRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRpcmVjdEZsaWdodENhcmRUYXJnZXQpIHtcbiAgICAgICAgICB0aGlzLmRpcmVjdEZsaWdodENhcmRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLVsjZjZmN2Y5XVwiKVxuICAgICAgICAgIHRoaXMuZGlyZWN0RmxpZ2h0Q2FyZFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNmZmY5ZTZdXCIsIFwiYm9yZGVyLVswLjVweF1cIiwgXCJib3JkZXItWyNmZmRhODBdXCIpXG4gICAgICAgICAgY29uc3QgY2hlY2ttYXJrID0gdGhpcy5kaXJlY3RGbGlnaHRDYXJkVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrXCIpXG4gICAgICAgICAgaWYgKGNoZWNrbWFyaykgY2hlY2ttYXJrLnJlbW92ZSgpXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgXCJub1NoYXJlZEZsaWdodFwiOlxuICAgICAgICB0aGlzLmZpbHRlcnMubm9TaGFyZWRGbGlnaHQgPSBmYWxzZVxuICAgICAgICB0aGlzLm5vU2hhcmVkRmxpZ2h0Q2hlY2tib3hUYXJnZXQuY2hlY2tlZCA9IGZhbHNlXG4gICAgICAgIGlmICh0aGlzLnF1aWNrTm9TaGFyZWRGbGlnaHRUYXJnZXQpIHtcbiAgICAgICAgICB0aGlzLnF1aWNrTm9TaGFyZWRGbGlnaHRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgICAgIHRoaXMucXVpY2tOb1NoYXJlZEZsaWdodFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubm9TaGFyZWRGbGlnaHRDYXJkVGFyZ2V0KSB7XG4gICAgICAgICAgdGhpcy5ub1NoYXJlZEZsaWdodENhcmRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLVsjZjZmN2Y5XVwiKVxuICAgICAgICAgIHRoaXMubm9TaGFyZWRGbGlnaHRDYXJkVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI2ZmZjllNl1cIiwgXCJib3JkZXItWzAuNXB4XVwiLCBcImJvcmRlci1bI2ZmZGE4MF1cIilcbiAgICAgICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLm5vU2hhcmVkRmxpZ2h0Q2FyZFRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbWFya1wiKVxuICAgICAgICAgIGlmIChjaGVja21hcmspIGNoZWNrbWFyay5yZW1vdmUoKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIFwiaW5jbHVkZUNoZWNrZWRMdWdnYWdlXCI6XG4gICAgICAgIHRoaXMuZmlsdGVycy5pbmNsdWRlQ2hlY2tlZEx1Z2dhZ2UgPSBmYWxzZVxuICAgICAgICB0aGlzLmluY2x1ZGVDaGVja2VkTHVnZ2FnZUNoZWNrYm94VGFyZ2V0LmNoZWNrZWQgPSBmYWxzZVxuICAgICAgICBpZiAodGhpcy5xdWlja0NoZWNrZWRMdWdnYWdlVGFyZ2V0KSB7XG4gICAgICAgICAgdGhpcy5xdWlja0NoZWNrZWRMdWdnYWdlVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgICAgICB0aGlzLnF1aWNrQ2hlY2tlZEx1Z2dhZ2VUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNoZWNrZWRMdWdnYWdlQ2FyZFRhcmdldCkge1xuICAgICAgICAgIHRoaXMuY2hlY2tlZEx1Z2dhZ2VDYXJkVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy1bI2Y2ZjdmOV1cIilcbiAgICAgICAgICB0aGlzLmNoZWNrZWRMdWdnYWdlQ2FyZFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNmZmY5ZTZdXCIsIFwiYm9yZGVyLVswLjVweF1cIiwgXCJib3JkZXItWyNmZmRhODBdXCIpXG4gICAgICAgICAgY29uc3QgY2hlY2ttYXJrID0gdGhpcy5jaGVja2VkTHVnZ2FnZUNhcmRUYXJnZXQucXVlcnlTZWxlY3RvcihcIi5jaGVja21hcmtcIilcbiAgICAgICAgICBpZiAoY2hlY2ttYXJrKSBjaGVja21hcmsucmVtb3ZlKClcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBcIm5vVHJhbnNpdFwiOlxuICAgICAgICB0aGlzLmZpbHRlcnMubm9UcmFuc2l0ID0gZmFsc2VcbiAgICAgICAgdGhpcy5ub1RyYW5zaXRDaGVja2JveFRhcmdldC5jaGVja2VkID0gZmFsc2VcbiAgICAgICAgaWYgKHRoaXMucXVpY2tOb1RyYW5zaXRUYXJnZXQpIHtcbiAgICAgICAgICB0aGlzLnF1aWNrTm9UcmFuc2l0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgICAgICB0aGlzLnF1aWNrTm9UcmFuc2l0VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5ub1RyYW5zaXRDYXJkVGFyZ2V0KSB7XG4gICAgICAgICAgdGhpcy5ub1RyYW5zaXRDYXJkVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy1bI2Y2ZjdmOV1cIilcbiAgICAgICAgICB0aGlzLm5vVHJhbnNpdENhcmRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLVsjZmZmOWU2XVwiLCBcImJvcmRlci1bMC41cHhdXCIsIFwiYm9yZGVyLVsjZmZkYTgwXVwiKVxuICAgICAgICAgIGNvbnN0IGNoZWNrbWFyayA9IHRoaXMubm9UcmFuc2l0Q2FyZFRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbWFya1wiKVxuICAgICAgICAgIGlmIChjaGVja21hcmspIGNoZWNrbWFyay5yZW1vdmUoKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIFwiZGlzY291bnRQcmljZVwiOlxuICAgICAgICB0aGlzLmZpbHRlcnMuZGlzY291bnRQcmljZSA9IGZhbHNlXG4gICAgICAgIHRoaXMuZGlzY291bnRQcmljZUNoZWNrYm94VGFyZ2V0LmNoZWNrZWQgPSBmYWxzZVxuICAgICAgICBpZiAodGhpcy5xdWlja0Rpc2NvdW50UHJpY2VUYXJnZXQpIHtcbiAgICAgICAgICB0aGlzLnF1aWNrRGlzY291bnRQcmljZVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgICAgdGhpcy5xdWlja0Rpc2NvdW50UHJpY2VUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRpc2NvdW50UHJpY2VDYXJkVGFyZ2V0KSB7XG4gICAgICAgICAgdGhpcy5kaXNjb3VudFByaWNlQ2FyZFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNmNmY3ZjldXCIpXG4gICAgICAgICAgdGhpcy5kaXNjb3VudFByaWNlQ2FyZFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNmZmY5ZTZdXCIsIFwiYm9yZGVyLVswLjVweF1cIiwgXCJib3JkZXItWyNmZmRhODBdXCIpXG4gICAgICAgICAgY29uc3QgY2hlY2ttYXJrID0gdGhpcy5kaXNjb3VudFByaWNlQ2FyZFRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbWFya1wiKVxuICAgICAgICAgIGlmIChjaGVja21hcmspIGNoZWNrbWFyay5yZW1vdmUoKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIFwiYWlybGluZVwiOiB7XG4gICAgICAgIHRoaXMuZmlsdGVycy5haXJsaW5lcy5kZWxldGUodmFsdWUpXG4gICAgICAgIGNvbnN0IGFpcmxpbmVDaGVja2JveCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KGBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl1bZGF0YS1maWx0ZXItdHlwZT1cImFpcmxpbmVcIl1bdmFsdWU9XCIke3ZhbHVlfVwiXWApXG4gICAgICAgIGlmIChhaXJsaW5lQ2hlY2tib3gpIGFpcmxpbmVDaGVja2JveC5jaGVja2VkID0gZmFsc2VcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJkZXBhcnR1cmVBaXJwb3J0XCI6IHtcbiAgICAgICAgdGhpcy5maWx0ZXJzLmRlcGFydHVyZUFpcnBvcnRzLmRlbGV0ZSh2YWx1ZSlcbiAgICAgICAgY29uc3QgZGVwQWlycG9ydENoZWNrYm94ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oYGlucHV0W3R5cGU9XCJjaGVja2JveFwiXVtkYXRhLWZpbHRlci10eXBlPVwiYWlycG9ydFwiXVt2YWx1ZT1cIiR7dmFsdWV9XCJdYClcbiAgICAgICAgaWYgKGRlcEFpcnBvcnRDaGVja2JveCkgZGVwQWlycG9ydENoZWNrYm94LmNoZWNrZWQgPSBmYWxzZVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSBcImFycml2YWxBaXJwb3J0XCI6IHtcbiAgICAgICAgdGhpcy5maWx0ZXJzLmFycml2YWxBaXJwb3J0cy5kZWxldGUodmFsdWUpXG4gICAgICAgIGNvbnN0IGFyckFpcnBvcnRDaGVja2JveCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KGBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl1bZGF0YS1maWx0ZXItdHlwZT1cImFpcnBvcnRcIl1bdmFsdWU9XCIke3ZhbHVlfVwiXWApXG4gICAgICAgIGlmIChhcnJBaXJwb3J0Q2hlY2tib3gpIGFyckFpcnBvcnRDaGVja2JveC5jaGVja2VkID0gZmFsc2VcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJkZXBhcnR1cmVUaW1lXCI6IHtcbiAgICAgICAgdGhpcy5maWx0ZXJzLmRlcGFydHVyZVRpbWVSYW5nZXMuZGVsZXRlKHZhbHVlKVxuICAgICAgICBjb25zdCB0aW1lQ2hlY2tib3ggPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PihgaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdW2RhdGEtZmlsdGVyLXR5cGU9XCJkZXBhcnR1cmUtdGltZVwiXVt2YWx1ZT1cIiR7dmFsdWV9XCJdYClcbiAgICAgICAgaWYgKHRpbWVDaGVja2JveCkgdGltZUNoZWNrYm94LmNoZWNrZWQgPSBmYWxzZVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSBcImFpcmNyYWZ0TW9kZWxcIjoge1xuICAgICAgICB0aGlzLmZpbHRlcnMuYWlyY3JhZnRNb2RlbHMuZGVsZXRlKHZhbHVlKVxuICAgICAgICBjb25zdCBtb2RlbENoZWNrYm94ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oYGlucHV0W3R5cGU9XCJjaGVja2JveFwiXVtkYXRhLWZpbHRlci10eXBlPVwiYWlyY3JhZnQtbW9kZWxcIl1bdmFsdWU9XCIke3ZhbHVlfVwiXWApXG4gICAgICAgIGlmIChtb2RlbENoZWNrYm94KSBtb2RlbENoZWNrYm94LmNoZWNrZWQgPSBmYWxzZVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnVwZGF0ZVJlc3VsdENvdW50KClcbiAgfVxuXG4gIC8vIEhlbHBlciBtZXRob2QgdG8gY3JlYXRlIGNoZWNrbWFyayBTVkdcbiAgcHJpdmF0ZSBjcmVhdGVDaGVja21hcmsoKTogU1ZHRWxlbWVudCB7XG4gICAgY29uc3Qgc3ZnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJzdmdcIilcbiAgICBzdmcuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJjaGVja21hcmsgYWJzb2x1dGUgYm90dG9tLTAgcmlnaHQtMFwiKVxuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCBcIjE2XCIpXG4gICAgc3ZnLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCBcIjE2XCIpXG4gICAgc3ZnLnNldEF0dHJpYnV0ZShcInZpZXdCb3hcIiwgXCIwIDAgMjQgMjRcIilcbiAgICBcbiAgICAvLyBCYWNrZ3JvdW5kIHRyaWFuZ2xlXG4gICAgY29uc3QgYmdQYXRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJwYXRoXCIpXG4gICAgYmdQYXRoLnNldEF0dHJpYnV0ZShcImRcIiwgXCJNMjQgMjRIMEwyNCAwVjI0WlwiKVxuICAgIGJnUGF0aC5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsIFwiI2ZjYzMyYVwiKVxuICAgIHN2Zy5hcHBlbmRDaGlsZChiZ1BhdGgpXG4gICAgXG4gICAgLy8gQ2hlY2ttYXJrIHBhdGhcbiAgICBjb25zdCBjaGVja1BhdGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInBhdGhcIilcbiAgICBjaGVja1BhdGguc2V0QXR0cmlidXRlKFwiZFwiLCBcIk0xNCAxOGwyIDIgNC00XCIpXG4gICAgY2hlY2tQYXRoLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLCBcIndoaXRlXCIpXG4gICAgY2hlY2tQYXRoLnNldEF0dHJpYnV0ZShcInN0cm9rZS13aWR0aFwiLCBcIjJcIilcbiAgICBjaGVja1BhdGguc2V0QXR0cmlidXRlKFwic3Ryb2tlLWxpbmVjYXBcIiwgXCJyb3VuZFwiKVxuICAgIGNoZWNrUGF0aC5zZXRBdHRyaWJ1dGUoXCJzdHJva2UtbGluZWpvaW5cIiwgXCJyb3VuZFwiKVxuICAgIGNoZWNrUGF0aC5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsIFwibm9uZVwiKVxuICAgIHN2Zy5hcHBlbmRDaGlsZChjaGVja1BhdGgpXG4gICAgXG4gICAgcmV0dXJuIHN2Z1xuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJtb2RhbFwiLFxuICAgIFwib3ZlcmxheVwiLFxuICAgIFwiZGlyZWN0UHJpb3JpdHlCdXR0b25cIixcbiAgICBcInByaWNlUHJpb3JpdHlCdXR0b25cIixcbiAgICBcInRpbWVTb3J0QnV0dG9uXCIsXG4gICAgXCJmbGlnaHRMaXN0XCJcbiAgXVxuICBcbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBpbml0aWFsU29ydDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IFwiZGVmYXVsdFwiIH1cbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgb3ZlcmxheVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkaXJlY3RQcmlvcml0eUJ1dHRvblRhcmdldDogSFRNTEJ1dHRvbkVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBwcmljZVByaW9yaXR5QnV0dG9uVGFyZ2V0OiBIVE1MQnV0dG9uRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRpbWVTb3J0QnV0dG9uVGFyZ2V0OiBIVE1MQnV0dG9uRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGZsaWdodExpc3RUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaW5pdGlhbFNvcnRWYWx1ZTogc3RyaW5nXG5cbiAgLy8gU29ydCBzdGF0ZVxuICBwcml2YXRlIGN1cnJlbnRTb3J0OiBzdHJpbmcgPSBcImRlZmF1bHRcIiAvLyBkZWZhdWx0LCBkaXJlY3RfcHJpb3JpdHksIHByaWNlX2FzYywgZGVwYXJ0dXJlX2Vhcmx5LCBkZXBhcnR1cmVfbGF0ZSwgYXJyaXZhbF9lYXJseSwgYXJyaXZhbF9sYXRlLCBkdXJhdGlvbl9zaG9ydFxuICBwcml2YXRlIGRpcmVjdFByaW9yaXR5QWN0aXZlOiBib29sZWFuID0gZmFsc2VcbiAgcHJpdmF0ZSBwcmljZVByaW9yaXR5QWN0aXZlOiBib29sZWFuID0gZmFsc2VcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiRmxpZ2h0U29ydCBjb250cm9sbGVyIGNvbm5lY3RlZFwiKVxuICAgIFxuICAgIC8vIEluaXRpYWxpemUgc29ydCBzdGF0ZSBiYXNlZCBvbiBpbml0aWFsU29ydCB2YWx1ZVxuICAgIGlmICh0aGlzLmluaXRpYWxTb3J0VmFsdWUgPT09IFwicHJpY2VfYXNjXCIpIHtcbiAgICAgIHRoaXMuY3VycmVudFNvcnQgPSBcInByaWNlX2FzY1wiXG4gICAgICB0aGlzLnByaWNlUHJpb3JpdHlBY3RpdmUgPSB0cnVlXG4gICAgICB0aGlzLnByaWNlUHJpb3JpdHlCdXR0b25UYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1iLTJcIiwgXCJib3JkZXItYmxhY2tcIilcbiAgICAgIHRoaXMucHJpY2VQcmlvcml0eUJ1dHRvblRhcmdldC5xdWVyeVNlbGVjdG9yKFwic3BhblwiKT8uY2xhc3NMaXN0LmFkZChcImZvbnQtYm9sZFwiKVxuICAgICAgdGhpcy5wcmljZVByaW9yaXR5QnV0dG9uVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCJzcGFuXCIpPy5jbGFzc0xpc3QucmVtb3ZlKFwidGV4dC1ncmF5LTYwMFwiKVxuICAgIH1cbiAgfVxuXG4gIC8vIFRvZ2dsZSBkaXJlY3QgZmxpZ2h0IHByaW9yaXR5XG4gIHRvZ2dsZURpcmVjdFByaW9yaXR5KCk6IHZvaWQge1xuICAgIHRoaXMuZGlyZWN0UHJpb3JpdHlBY3RpdmUgPSAhdGhpcy5kaXJlY3RQcmlvcml0eUFjdGl2ZVxuICAgIFxuICAgIGlmICh0aGlzLmRpcmVjdFByaW9yaXR5QWN0aXZlKSB7XG4gICAgICB0aGlzLmN1cnJlbnRTb3J0ID0gXCJkaXJlY3RfcHJpb3JpdHlcIlxuICAgICAgdGhpcy5kaXJlY3RQcmlvcml0eUJ1dHRvblRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWItMlwiLCBcImJvcmRlci1ibGFja1wiKVxuICAgICAgdGhpcy5kaXJlY3RQcmlvcml0eUJ1dHRvblRhcmdldC5xdWVyeVNlbGVjdG9yKFwic3BhblwiKT8uY2xhc3NMaXN0LmFkZChcImZvbnQtYm9sZFwiKVxuICAgICAgdGhpcy5kaXJlY3RQcmlvcml0eUJ1dHRvblRhcmdldC5xdWVyeVNlbGVjdG9yKFwic3BhblwiKT8uY2xhc3NMaXN0LnJlbW92ZShcInRleHQtZ3JheS02MDBcIilcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdXJyZW50U29ydCA9IFwiZGVmYXVsdFwiXG4gICAgICB0aGlzLmRpcmVjdFByaW9yaXR5QnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItYi0yXCIsIFwiYm9yZGVyLWJsYWNrXCIpXG4gICAgICB0aGlzLmRpcmVjdFByaW9yaXR5QnV0dG9uVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCJzcGFuXCIpPy5jbGFzc0xpc3QucmVtb3ZlKFwiZm9udC1ib2xkXCIpXG4gICAgICB0aGlzLmRpcmVjdFByaW9yaXR5QnV0dG9uVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCJzcGFuXCIpPy5jbGFzc0xpc3QuYWRkKFwidGV4dC1ncmF5LTYwMFwiKVxuICAgIH1cbiAgICBcbiAgICB0aGlzLmFwcGx5U29ydCgpXG4gIH1cblxuICAvLyBUb2dnbGUgcHJpY2UgcHJpb3JpdHkgKGxvdyBwcmljZSBmaXJzdClcbiAgdG9nZ2xlUHJpY2VQcmlvcml0eSgpOiB2b2lkIHtcbiAgICB0aGlzLnByaWNlUHJpb3JpdHlBY3RpdmUgPSAhdGhpcy5wcmljZVByaW9yaXR5QWN0aXZlXG4gICAgXG4gICAgaWYgKHRoaXMucHJpY2VQcmlvcml0eUFjdGl2ZSkge1xuICAgICAgdGhpcy5jdXJyZW50U29ydCA9IFwicHJpY2VfYXNjXCJcbiAgICAgIHRoaXMucHJpY2VQcmlvcml0eUJ1dHRvblRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWItMlwiLCBcImJvcmRlci1ibGFja1wiKVxuICAgICAgdGhpcy5wcmljZVByaW9yaXR5QnV0dG9uVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCJzcGFuXCIpPy5jbGFzc0xpc3QuYWRkKFwiZm9udC1ib2xkXCIpXG4gICAgICB0aGlzLnByaWNlUHJpb3JpdHlCdXR0b25UYXJnZXQucXVlcnlTZWxlY3RvcihcInNwYW5cIik/LmNsYXNzTGlzdC5yZW1vdmUoXCJ0ZXh0LWdyYXktNjAwXCIpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY3VycmVudFNvcnQgPSBcImRlZmF1bHRcIlxuICAgICAgdGhpcy5wcmljZVByaW9yaXR5QnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItYi0yXCIsIFwiYm9yZGVyLWJsYWNrXCIpXG4gICAgICB0aGlzLnByaWNlUHJpb3JpdHlCdXR0b25UYXJnZXQucXVlcnlTZWxlY3RvcihcInNwYW5cIik/LmNsYXNzTGlzdC5yZW1vdmUoXCJmb250LWJvbGRcIilcbiAgICAgIHRoaXMucHJpY2VQcmlvcml0eUJ1dHRvblRhcmdldC5xdWVyeVNlbGVjdG9yKFwic3BhblwiKT8uY2xhc3NMaXN0LmFkZChcInRleHQtZ3JheS02MDBcIilcbiAgICB9XG4gICAgXG4gICAgdGhpcy5hcHBseVNvcnQoKVxuICB9XG5cbiAgLy8gT3BlbiB0aW1lIHNvcnQgbW9kYWxcbiAgb3BlblRpbWVTb3J0TW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgdGhpcy5vdmVybGF5VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICBcbiAgICAvLyBBbmltYXRlIG1vZGFsXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJ0cmFuc2xhdGUteS1mdWxsXCIpXG4gICAgICB0aGlzLm92ZXJsYXlUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcIm9wYWNpdHktMFwiKVxuICAgIH0sIDEwKVxuICB9XG5cbiAgLy8gQ2xvc2UgbW9kYWxcbiAgY2xvc2VNb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJ0cmFuc2xhdGUteS1mdWxsXCIpXG4gICAgdGhpcy5vdmVybGF5VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJvcGFjaXR5LTBcIilcbiAgICBcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgICAgdGhpcy5vdmVybGF5VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgICB9LCAzMDApXG4gIH1cblxuICAvLyBBcHBseSBzb3J0IG9wdGlvbiBmcm9tIHRpbWUgc29ydCBtb2RhbFxuICBhcHBseVNvcnRPcHRpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGNvbnN0IHNvcnRUeXBlID0gYnV0dG9uLmRhdGFzZXQuc29ydFR5cGVcbiAgICBcbiAgICBpZiAoIXNvcnRUeXBlKSByZXR1cm5cbiAgICBcbiAgICB0aGlzLmN1cnJlbnRTb3J0ID0gc29ydFR5cGVcbiAgICBcbiAgICAvLyBVcGRhdGUgdGltZSBzb3J0IGJ1dHRvbiB0ZXh0IGFuZCBzdGF0ZVxuICAgIHRoaXMudXBkYXRlVGltZVNvcnRCdXR0b25UZXh0KHNvcnRUeXBlKVxuICAgIFxuICAgIHRoaXMuYXBwbHlTb3J0KClcbiAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICB9XG5cbiAgLy8gVXBkYXRlIHRpbWUgc29ydCBidXR0b24gdGV4dCBiYXNlZCBvbiBzZWxlY3RlZCBzb3J0XG4gIHByaXZhdGUgdXBkYXRlVGltZVNvcnRCdXR0b25UZXh0KHNvcnRUeXBlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCB0ZXh0TWFwOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICAgICAgXCJkZXBhcnR1cmVfZWFybHlcIjogXCJcdThENzdcdTk4REVcdTY1RTktXHU2NjVBXCIsXG4gICAgICBcImRlcGFydHVyZV9sYXRlXCI6IFwiXHU4RDc3XHU5OERFXHU2NjVBLVx1NjVFOVwiLFxuICAgICAgXCJhcnJpdmFsX2Vhcmx5XCI6IFwiXHU1MjMwXHU4RkJFXHU2NUU5LVx1NjY1QVwiLFxuICAgICAgXCJhcnJpdmFsX2xhdGVcIjogXCJcdTUyMzBcdThGQkVcdTY2NUEtXHU2NUU5XCIsXG4gICAgICBcImR1cmF0aW9uX3Nob3J0XCI6IFwiXHU4MDE3XHU2NUY2XHU3N0VELVx1OTU3RlwiXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGJ1dHRvblRleHQgPSB0ZXh0TWFwW3NvcnRUeXBlXVxuICAgIGlmIChidXR0b25UZXh0KSB7XG4gICAgICBjb25zdCBzcGFuID0gdGhpcy50aW1lU29ydEJ1dHRvblRhcmdldC5xdWVyeVNlbGVjdG9yKFwic3BhblwiKVxuICAgICAgaWYgKHNwYW4pIHtcbiAgICAgICAgc3Bhbi50ZXh0Q29udGVudCA9IGJ1dHRvblRleHRcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIGJ1dHRvbiBhY3RpdmUgc3RhdGVcbiAgICAgIHRoaXMudGltZVNvcnRCdXR0b25UYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1iLTJcIiwgXCJib3JkZXItYmxhY2tcIilcbiAgICAgIHRoaXMudGltZVNvcnRCdXR0b25UYXJnZXQucXVlcnlTZWxlY3RvcihcInNwYW5cIik/LmNsYXNzTGlzdC5hZGQoXCJmb250LWJvbGRcIilcbiAgICAgIHRoaXMudGltZVNvcnRCdXR0b25UYXJnZXQucXVlcnlTZWxlY3RvcihcInNwYW5cIik/LmNsYXNzTGlzdC5yZW1vdmUoXCJ0ZXh0LWdyYXktNjAwXCIpXG4gICAgfVxuICB9XG5cbiAgLy8gQXBwbHkgdGhlIGN1cnJlbnQgc29ydCB0byBmbGlnaHQgbGlzdFxuICBwcml2YXRlIGFwcGx5U29ydCgpOiB2b2lkIHtcbiAgICBjb25zdCBmbGlnaHRDYXJkcyA9IEFycmF5LmZyb20odGhpcy5mbGlnaHRMaXN0VGFyZ2V0LmNoaWxkcmVuKSBhcyBIVE1MRWxlbWVudFtdXG4gICAgXG4gICAgaWYgKGZsaWdodENhcmRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuXG4gICAgXG4gICAgbGV0IHNvcnRlZENhcmRzOiBIVE1MRWxlbWVudFtdID0gW11cbiAgICBcbiAgICBzd2l0Y2ggKHRoaXMuY3VycmVudFNvcnQpIHtcbiAgICAgIGNhc2UgXCJkaXJlY3RfcHJpb3JpdHlcIjpcbiAgICAgICAgLy8gU29ydCBieSBkaXJlY3QgZmxpZ2h0cyBmaXJzdCAobm8gdHJhbnNmZXIgaW5kaWNhdG9yKVxuICAgICAgICBzb3J0ZWRDYXJkcyA9IGZsaWdodENhcmRzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICBjb25zdCBhRGlyZWN0ID0gIWEudGV4dENvbnRlbnQ/LmluY2x1ZGVzKFwiXHU0RTJEXHU1NkZEXHU5OTk5XHU2RTJGXCIpICYmICFhLnRleHRDb250ZW50Py5pbmNsdWRlcyhcIlx1Njc2RFx1NURERVwiKVxuICAgICAgICAgIGNvbnN0IGJEaXJlY3QgPSAhYi50ZXh0Q29udGVudD8uaW5jbHVkZXMoXCJcdTRFMkRcdTU2RkRcdTk5OTlcdTZFMkZcIikgJiYgIWIudGV4dENvbnRlbnQ/LmluY2x1ZGVzKFwiXHU2NzZEXHU1RERFXCIpXG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGFEaXJlY3QgJiYgIWJEaXJlY3QpIHJldHVybiAtMVxuICAgICAgICAgIGlmICghYURpcmVjdCAmJiBiRGlyZWN0KSByZXR1cm4gMVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFRoZW4gc29ydCBieSBwcmljZVxuICAgICAgICAgIGNvbnN0IGFQcmljZSA9IHRoaXMuZXh0cmFjdFByaWNlKGEpXG4gICAgICAgICAgY29uc3QgYlByaWNlID0gdGhpcy5leHRyYWN0UHJpY2UoYilcbiAgICAgICAgICByZXR1cm4gYVByaWNlIC0gYlByaWNlXG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICAgIFxuICAgICAgY2FzZSBcInByaWNlX2FzY1wiOlxuICAgICAgICAvLyBTb3J0IGJ5IHByaWNlIGFzY2VuZGluZ1xuICAgICAgICBzb3J0ZWRDYXJkcyA9IGZsaWdodENhcmRzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5leHRyYWN0UHJpY2UoYSkgLSB0aGlzLmV4dHJhY3RQcmljZShiKVxuICAgICAgICB9KVxuICAgICAgICBicmVha1xuICAgICAgICBcbiAgICAgIFxuICAgICAgY2FzZSBcImRlcGFydHVyZV9lYXJseVwiOlxuICAgICAgICAvLyBTb3J0IGJ5IGRlcGFydHVyZSB0aW1lIGVhcmx5IHRvIGxhdGVcbiAgICAgICAgc29ydGVkQ2FyZHMgPSBmbGlnaHRDYXJkcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZXh0cmFjdERlcGFydHVyZVRpbWUoYSkgLSB0aGlzLmV4dHJhY3REZXBhcnR1cmVUaW1lKGIpXG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICAgIFxuICAgICAgY2FzZSBcImRlcGFydHVyZV9sYXRlXCI6XG4gICAgICAgIC8vIFNvcnQgYnkgZGVwYXJ0dXJlIHRpbWUgbGF0ZSB0byBlYXJseVxuICAgICAgICBzb3J0ZWRDYXJkcyA9IGZsaWdodENhcmRzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5leHRyYWN0RGVwYXJ0dXJlVGltZShiKSAtIHRoaXMuZXh0cmFjdERlcGFydHVyZVRpbWUoYSlcbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgICAgXG4gICAgICBjYXNlIFwiYXJyaXZhbF9lYXJseVwiOlxuICAgICAgICAvLyBTb3J0IGJ5IGFycml2YWwgdGltZSBlYXJseSB0byBsYXRlXG4gICAgICAgIHNvcnRlZENhcmRzID0gZmxpZ2h0Q2FyZHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLmV4dHJhY3RBcnJpdmFsVGltZShhKSAtIHRoaXMuZXh0cmFjdEFycml2YWxUaW1lKGIpXG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICAgIFxuICAgICAgY2FzZSBcImFycml2YWxfbGF0ZVwiOlxuICAgICAgICAvLyBTb3J0IGJ5IGFycml2YWwgdGltZSBsYXRlIHRvIGVhcmx5XG4gICAgICAgIHNvcnRlZENhcmRzID0gZmxpZ2h0Q2FyZHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLmV4dHJhY3RBcnJpdmFsVGltZShiKSAtIHRoaXMuZXh0cmFjdEFycml2YWxUaW1lKGEpXG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICAgIFxuICAgICAgY2FzZSBcImR1cmF0aW9uX3Nob3J0XCI6XG4gICAgICAgIC8vIFNvcnQgYnkgZHVyYXRpb24gc2hvcnQgdG8gbG9uZ1xuICAgICAgICBzb3J0ZWRDYXJkcyA9IGZsaWdodENhcmRzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5leHRyYWN0RHVyYXRpb24oYSkgLSB0aGlzLmV4dHJhY3REdXJhdGlvbihiKVxuICAgICAgICB9KVxuICAgICAgICBicmVha1xuICAgICAgICBcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHNvcnRlZENhcmRzID0gZmxpZ2h0Q2FyZHNcbiAgICB9XG4gICAgXG4gICAgLy8gUmUtYXBwZW5kIGNhcmRzIGluIHNvcnRlZCBvcmRlclxuICAgIHNvcnRlZENhcmRzLmZvckVhY2goY2FyZCA9PiB7XG4gICAgICB0aGlzLmZsaWdodExpc3RUYXJnZXQuYXBwZW5kQ2hpbGQoY2FyZClcbiAgICB9KVxuICAgIFxuICAgIC8vIEFkZCBhbmltYXRpb25cbiAgICB0aGlzLmZsaWdodExpc3RUYXJnZXQuY2xhc3NMaXN0LmFkZChcIm9wYWNpdHktNTBcIilcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuZmxpZ2h0TGlzdFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwib3BhY2l0eS01MFwiKVxuICAgIH0sIDE1MClcbiAgfVxuXG4gIC8vIEV4dHJhY3QgcHJpY2UgZnJvbSBmbGlnaHQgY2FyZFxuICBwcml2YXRlIGV4dHJhY3RQcmljZShjYXJkOiBIVE1MRWxlbWVudCk6IG51bWJlciB7XG4gICAgY29uc3QgcHJpY2VUZXh0ID0gY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnRleHQtcmVkLTUwMC5mb250LWJvbGRcIik/LnRleHRDb250ZW50XG4gICAgaWYgKCFwcmljZVRleHQpIHJldHVybiAwXG4gICAgXG4gICAgY29uc3QgbWF0Y2ggPSBwcmljZVRleHQubWF0Y2goL1x1MDBBNShcXGQrKS8pXG4gICAgcmV0dXJuIG1hdGNoID8gcGFyc2VJbnQobWF0Y2hbMV0pIDogMFxuICB9XG5cbiAgLy8gRXh0cmFjdCBkZXBhcnR1cmUgdGltZSBmcm9tIGZsaWdodCBjYXJkIChjb252ZXJ0IHRvIG1pbnV0ZXMgc2luY2UgbWlkbmlnaHQpXG4gIHByaXZhdGUgZXh0cmFjdERlcGFydHVyZVRpbWUoY2FyZDogSFRNTEVsZW1lbnQpOiBudW1iZXIge1xuICAgIGNvbnN0IHRpbWVUZXh0ID0gY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnRleHQtM3hsLmZvbnQtYm9sZFwiKT8udGV4dENvbnRlbnRcbiAgICBpZiAoIXRpbWVUZXh0KSByZXR1cm4gMFxuICAgIFxuICAgIGNvbnN0IG1hdGNoID0gdGltZVRleHQubWF0Y2goLyhcXGQrKTooXFxkKykvKVxuICAgIGlmICghbWF0Y2gpIHJldHVybiAwXG4gICAgXG4gICAgY29uc3QgaG91cnMgPSBwYXJzZUludChtYXRjaFsxXSlcbiAgICBjb25zdCBtaW51dGVzID0gcGFyc2VJbnQobWF0Y2hbMl0pXG4gICAgcmV0dXJuIGhvdXJzICogNjAgKyBtaW51dGVzXG4gIH1cblxuICAvLyBFeHRyYWN0IGFycml2YWwgdGltZSBmcm9tIGZsaWdodCBjYXJkXG4gIHByaXZhdGUgZXh0cmFjdEFycml2YWxUaW1lKGNhcmQ6IEhUTUxFbGVtZW50KTogbnVtYmVyIHtcbiAgICBjb25zdCB0aW1lRWxlbWVudHMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGV4dC0zeGwuZm9udC1ib2xkXCIpXG4gICAgaWYgKHRpbWVFbGVtZW50cy5sZW5ndGggPCAyKSByZXR1cm4gMFxuICAgIFxuICAgIGNvbnN0IHRpbWVUZXh0ID0gdGltZUVsZW1lbnRzWzFdLnRleHRDb250ZW50XG4gICAgaWYgKCF0aW1lVGV4dCkgcmV0dXJuIDBcbiAgICBcbiAgICBjb25zdCBtYXRjaCA9IHRpbWVUZXh0Lm1hdGNoKC8oXFxkKyk6KFxcZCspLylcbiAgICBpZiAoIW1hdGNoKSByZXR1cm4gMFxuICAgIFxuICAgIGNvbnN0IGhvdXJzID0gcGFyc2VJbnQobWF0Y2hbMV0pXG4gICAgY29uc3QgbWludXRlcyA9IHBhcnNlSW50KG1hdGNoWzJdKVxuICAgIFxuICAgIC8vIEhhbmRsZSBuZXh0IGRheSBhcnJpdmFscyAoaWYgdGltZSBpcyBlYXJsaWVyIHRoYW4gZGVwYXJ0dXJlKVxuICAgIGNvbnN0IGRlcGFydHVyZVRpbWUgPSB0aGlzLmV4dHJhY3REZXBhcnR1cmVUaW1lKGNhcmQpXG4gICAgY29uc3QgYXJyaXZhbFRpbWUgPSBob3VycyAqIDYwICsgbWludXRlc1xuICAgIFxuICAgIHJldHVybiBhcnJpdmFsVGltZSA8IGRlcGFydHVyZVRpbWUgPyBhcnJpdmFsVGltZSArIDI0ICogNjAgOiBhcnJpdmFsVGltZVxuICB9XG5cbiAgLy8gRXh0cmFjdCBkdXJhdGlvbiBmcm9tIGZsaWdodCBjYXJkXG4gIHByaXZhdGUgZXh0cmFjdER1cmF0aW9uKGNhcmQ6IEhUTUxFbGVtZW50KTogbnVtYmVyIHtcbiAgICBjb25zdCBkdXJhdGlvblRleHQgPSBjYXJkLnRleHRDb250ZW50XG4gICAgaWYgKCFkdXJhdGlvblRleHQpIHJldHVybiAwXG4gICAgXG4gICAgLy8gTG9vayBmb3IgcGF0dGVybnMgbGlrZSBcIlx1NjAzQjRoXCIsIFwiXHU2MDNCMThoNDBtXCIsIGV0Yy5cbiAgICBjb25zdCBtYXRjaCA9IGR1cmF0aW9uVGV4dC5tYXRjaCgvXHU2MDNCKFxcZCspaCg/OihcXGQrKW0pPy8pXG4gICAgaWYgKCFtYXRjaCkgcmV0dXJuIDBcbiAgICBcbiAgICBjb25zdCBob3VycyA9IHBhcnNlSW50KG1hdGNoWzFdKVxuICAgIGNvbnN0IG1pbnV0ZXMgPSBtYXRjaFsyXSA/IHBhcnNlSW50KG1hdGNoWzJdKSA6IDBcbiAgICByZXR1cm4gaG91cnMgKiA2MCArIG1pbnV0ZXNcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyIHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJpbmZvXCJdXG4gIHN0YXRpYyB2YWx1ZXMgPSB7IGNhYmluQ2xhc3M6IFN0cmluZyB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBpbmZvVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNhYmluQ2xhc3NWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICB0aGlzLnVwZGF0ZURpc3BsYXkoKVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVEaXNwbGF5KCk6IHZvaWQge1xuICAgIGNvbnN0IHNhdmVkU3RhdGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncGFzc2VuZ2VyX3NlbGVjdGlvbicpXG4gICAgbGV0IGRpc3BsYXlUZXh0ID0gJzFcdTYyMTBcdTRFQkEnIC8vIERlZmF1bHRcbiAgICBcbiAgICBpZiAoc2F2ZWRTdGF0ZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSBKU09OLnBhcnNlKHNhdmVkU3RhdGUpXG4gICAgICAgIGNvbnN0IHBhc3Nlbmdlck5hbWVzID0gc3RhdGUucGFzc2VuZ2VyTmFtZXMgfHwgW11cbiAgICAgICAgXG4gICAgICAgIC8vIElmIHVzZXIgc2VsZWN0ZWQgc3BlY2lmaWMgcGFzc2VuZ2VycywgZGlzcGxheSBjb3VudCBiYXNlZCBvbiBwYXNzZW5nZXJOYW1lc1xuICAgICAgICBpZiAocGFzc2VuZ2VyTmFtZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGRpc3BsYXlUZXh0ID0gYCR7cGFzc2VuZ2VyTmFtZXMubGVuZ3RofVx1NEY0RFx1NEU1OFx1NjczQVx1NEVCQWBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJZiB1c2VyIHNlbGVjdGVkIGJ5IGNvdW50IG9ubHlcbiAgICAgICAgICBjb25zdCBhZHVsdHMgPSBzdGF0ZS5hZHVsdHMgfHwgMVxuICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gc3RhdGUuY2hpbGRyZW4gfHwgMFxuICAgICAgICAgIFxuICAgICAgICAgIGRpc3BsYXlUZXh0ID0gYCR7YWR1bHRzfVx1NjIxMFx1NEVCQWBcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgY2hpbGRyZW4gaWYgYW55XG4gICAgICAgICAgaWYgKGNoaWxkcmVuID4gMCkge1xuICAgICAgICAgICAgZGlzcGxheVRleHQgKz0gYCAke2NoaWxkcmVufVx1NTEzRlx1N0FFNWBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgcGFzc2VuZ2VyIHNlbGVjdGlvbiBmcm9tIGxvY2FsU3RvcmFnZTonLCBlKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBBZGQgY2FiaW4gY2xhc3MgaWYgYnVzaW5lc3MvZmlyc3QgY2xhc3NcbiAgICBpZiAodGhpcy5jYWJpbkNsYXNzVmFsdWUgPT09ICdidXNpbmVzcycpIHtcbiAgICAgIGRpc3BsYXlUZXh0ICs9ICcgXHUwMEI3IFx1NTE2Q1x1NTJBMVx1ODIzMSdcbiAgICB9IGVsc2UgaWYgKHRoaXMuY2FiaW5DbGFzc1ZhbHVlID09PSAnZmlyc3RfY2xhc3MnKSB7XG4gICAgICBkaXNwbGF5VGV4dCArPSAnIFx1MDBCNyBcdTU5MzRcdTdCNDlcdTgyMzEnXG4gICAgfVxuICAgIFxuICAgIHRoaXMuaW5mb1RhcmdldC50ZXh0Q29udGVudCA9IGRpc3BsYXlUZXh0XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5pbXBvcnQgKiBhcyBUdXJibyBmcm9tIFwiQGhvdHdpcmVkL3R1cmJvXCJcblxuLy8gSGFuZGxlcyBkYXRlIGxpbmsgY2xpY2tzIGZvciBtdWx0aS1jaXR5IGZsaWdodCBkYXRlIHNlbGVjdGlvbiB3aXRoIGNvbXByZWhlbnNpdmUgdmFsaWRhdGlvblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyIHtcbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICB1cmw6IFN0cmluZyxcbiAgICBzZWxlY3RlZERhdGU6IFN0cmluZyxcbiAgICBhbGxTZWdtZW50RGF0ZXM6IEFycmF5LFxuICAgIHNlbGVjdGVkRmxpZ2h0RGF0ZXM6IEFycmF5LFxuICAgIGN1cnJlbnRTZWdtZW50SW5kZXg6IE51bWJlclxuICB9XG5cbiAgZGVjbGFyZSB1cmxWYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgc2VsZWN0ZWREYXRlVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIGFsbFNlZ21lbnREYXRlc1ZhbHVlOiBzdHJpbmdbXVxuICBkZWNsYXJlIHNlbGVjdGVkRmxpZ2h0RGF0ZXNWYWx1ZTogc3RyaW5nW11cbiAgZGVjbGFyZSBjdXJyZW50U2VnbWVudEluZGV4VmFsdWU6IG51bWJlclxuXG4gIGFzeW5jIG5hdmlnYXRlKGV2ZW50OiBFdmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBcbiAgICAvLyBGcm9udGVuZCB2YWxpZGF0aW9uOiBjaGVjayBkYXRlIGNvbnN0cmFpbnRzXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWREYXRlVmFsdWUgJiYgdGhpcy5hbGxTZWdtZW50RGF0ZXNWYWx1ZSAmJiB0aGlzLmFsbFNlZ21lbnREYXRlc1ZhbHVlLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHNlbGVjdGVkRGF0ZSA9IG5ldyBEYXRlKHRoaXMuc2VsZWN0ZWREYXRlVmFsdWUpXG4gICAgICBjb25zdCBjdXJyZW50SW5kZXggPSB0aGlzLmN1cnJlbnRTZWdtZW50SW5kZXhWYWx1ZVxuICAgICAgY29uc3Qgc2VnbWVudE51bWJlciA9IGN1cnJlbnRJbmRleCArIDFcbiAgICAgIFxuICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU1MjREXHU0RTAwXHU3QTBCXHU3Njg0XHU2NUU1XHU2NzFGXHVGRjA4XHU1OTgyXHU2NzlDXHU2NzA5XHU1REYyXHU5MDA5XHU4MjJBXHU3M0VEXHVGRjBDXHU3NTI4XHU1REYyXHU5MDA5XHU4MjJBXHU3M0VEXHU3Njg0XHU2NUU1XHU2NzFGXHVGRjFCXHU1NDI2XHU1MjE5XHU3NTI4XHU1MzlGXHU1OUNCc2VnbWVudFx1NjVFNVx1NjcxRlx1RkYwOVxuICAgICAgbGV0IHByZXZpb3VzRGF0ZTogRGF0ZSB8IG51bGwgPSBudWxsXG4gICAgICBpZiAoY3VycmVudEluZGV4ID4gMCkge1xuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTY3MDlcdTVERjJcdTkwMDlcdTgyMkFcdTczRURcdUZGMENcdTRGN0ZcdTc1MjhcdTVERjJcdTkwMDlcdTgyMkFcdTczRURcdTc2ODRcdTY1RTVcdTY3MUZcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRGbGlnaHREYXRlc1ZhbHVlICYmIHRoaXMuc2VsZWN0ZWRGbGlnaHREYXRlc1ZhbHVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCBsYXN0U2VsZWN0ZWRGbGlnaHREYXRlID0gdGhpcy5zZWxlY3RlZEZsaWdodERhdGVzVmFsdWVbdGhpcy5zZWxlY3RlZEZsaWdodERhdGVzVmFsdWUubGVuZ3RoIC0gMV1cbiAgICAgICAgICBpZiAobGFzdFNlbGVjdGVkRmxpZ2h0RGF0ZSkge1xuICAgICAgICAgICAgcHJldmlvdXNEYXRlID0gbmV3IERhdGUobGFzdFNlbGVjdGVkRmxpZ2h0RGF0ZSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2Q0ExXHU2NzA5XHU1REYyXHU5MDA5XHU4MjJBXHU3M0VEXHVGRjBDXHU0RjdGXHU3NTI4XHU1MzlGXHU1OUNCc2VnbWVudFx1NjVFNVx1NjcxRlxuICAgICAgICBpZiAoIXByZXZpb3VzRGF0ZSAmJiB0aGlzLmFsbFNlZ21lbnREYXRlc1ZhbHVlW2N1cnJlbnRJbmRleCAtIDFdKSB7XG4gICAgICAgICAgcHJldmlvdXNEYXRlID0gbmV3IERhdGUodGhpcy5hbGxTZWdtZW50RGF0ZXNWYWx1ZVtjdXJyZW50SW5kZXggLSAxXSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBcdTgzQjdcdTUzRDZcdTRFMEJcdTRFMDBcdTdBMEJcdTc2ODRcdTY1RTVcdTY3MUZcdUZGMDhcdTRGN0ZcdTc1MjhcdTUzOUZcdTU5Q0JzZWdtZW50XHU2NUU1XHU2NzFGXHVGRjA5XG4gICAgICBsZXQgbmV4dERhdGU6IERhdGUgfCBudWxsID0gbnVsbFxuICAgICAgaWYgKGN1cnJlbnRJbmRleCArIDEgPCB0aGlzLmFsbFNlZ21lbnREYXRlc1ZhbHVlLmxlbmd0aCkge1xuICAgICAgICBuZXh0RGF0ZSA9IG5ldyBEYXRlKHRoaXMuYWxsU2VnbWVudERhdGVzVmFsdWVbY3VycmVudEluZGV4ICsgMV0pXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFx1NjgyMVx1OUE4Q1x1RkYxQVx1NEUwRFx1ODBGRFx1NjVFOVx1NEU4RVx1NTI0RFx1NEUwMFx1N0EwQlxuICAgICAgaWYgKHByZXZpb3VzRGF0ZSAmJiBzZWxlY3RlZERhdGUgPCBwcmV2aW91c0RhdGUpIHtcbiAgICAgICAgaWYgKHdpbmRvdy5zaG93VG9hc3QpIHtcbiAgICAgICAgICB3aW5kb3cuc2hvd1RvYXN0KGBcdTdCMkMke3NlZ21lbnROdW1iZXJ9XHU3QTBCXHU2NUU1XHU2NzFGXHU0RTBEXHU4MEZEXHU2NUU5XHU0RThFXHU3QjJDJHtjdXJyZW50SW5kZXh9XHU3QTBCXHVGRjBDXHU4QkY3XHU4RkQ0XHU1NkRFXHU4MjJBXHU3M0VEXHU5OTk2XHU5ODc1XHU0RkVFXHU2NTM5YClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLy8gUHJldmVudCBuYXZpZ2F0aW9uXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFx1NjgyMVx1OUE4Q1x1RkYxQVx1NEUwRFx1ODBGRFx1NjY1QVx1NEU4RVx1NEUwQlx1NEUwMFx1N0EwQlxuICAgICAgaWYgKG5leHREYXRlICYmIHNlbGVjdGVkRGF0ZSA+IG5leHREYXRlKSB7XG4gICAgICAgIGlmICh3aW5kb3cuc2hvd1RvYXN0KSB7XG4gICAgICAgICAgd2luZG93LnNob3dUb2FzdChgXHU3QjJDJHtzZWdtZW50TnVtYmVyfVx1N0EwQlx1NjVFNVx1NjcxRlx1NEUwRFx1ODBGRFx1NjY1QVx1NEU4RVx1N0IyQyR7Y3VycmVudEluZGV4ICsgMn1cdTdBMEJcdUZGMENcdThCRjdcdThGRDRcdTU2REVcdTgyMkFcdTczRURcdTk5OTZcdTk4NzVcdTRGRUVcdTY1MzlgKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAvLyBQcmV2ZW50IG5hdmlnYXRpb25cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gSWYgdmFsaWRhdGlvbiBwYXNzZXMsIHByb2NlZWQgd2l0aCBuYXZpZ2F0aW9uXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy51cmxWYWx1ZSwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0FjY2VwdCc6ICd0ZXh0L3ZuZC50dXJiby1zdHJlYW0uaHRtbCwgdGV4dC9odG1sJyxcbiAgICAgICAgICAnVHVyYm8tRnJhbWUnOiAnX3RvcCdcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgY29uc3QgY29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzLmdldCgnQ29udGVudC1UeXBlJylcbiAgICAgIFxuICAgICAgaWYgKGNvbnRlbnRUeXBlPy5pbmNsdWRlcygndHVyYm8tc3RyZWFtJykpIHtcbiAgICAgICAgLy8gSXQncyBhIFR1cmJvIFN0cmVhbSByZXNwb25zZSAodmFsaWRhdGlvbiBlcnJvciB3aXRoIFRvYXN0KVxuICAgICAgICBjb25zdCBodG1sID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpXG4gICAgICAgIFR1cmJvLnJlbmRlclN0cmVhbU1lc3NhZ2UoaHRtbClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEl0J3MgYSByZWd1bGFyIEhUTUwgcmVzcG9uc2UgKHN1Y2Nlc3MgLSBuYXZpZ2F0ZSB0byBuZXcgcGFnZSlcbiAgICAgICAgVHVyYm8udmlzaXQodGhpcy51cmxWYWx1ZSlcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignTmF2aWdhdGlvbiBlcnJvcjonLCBlcnJvcilcbiAgICAgIC8vIEZhbGxiYWNrIHRvIHJlZ3VsYXIgbmF2aWdhdGlvblxuICAgICAgVHVyYm8udmlzaXQodGhpcy51cmxWYWx1ZSlcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcIm1vZGFsXCIsXG4gICAgXCJyb29tc0NvdW50XCIsXG4gICAgXCJhZHVsdHNDb3VudFwiLFxuICAgIFwiY2hpbGRyZW5Db3VudFwiLFxuICAgIFwicm9vbXNJbnB1dFwiLFxuICAgIFwiYWR1bHRzSW5wdXRcIixcbiAgICBcImNoaWxkcmVuSW5wdXRcIixcbiAgICBcImRpc3BsYXlUZXh0XCJcbiAgXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUm9vbXNJbnB1dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0FkdWx0c0lucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQ2hpbGRyZW5JbnB1dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0Rpc3BsYXlUZXh0VGFyZ2V0OiBib29sZWFuXG5cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICByb29tczogTnVtYmVyLFxuICAgIGFkdWx0czogTnVtYmVyLFxuICAgIGNoaWxkcmVuOiBOdW1iZXJcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgcm9vbXNDb3VudFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBhZHVsdHNDb3VudFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjaGlsZHJlbkNvdW50VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHJvb21zSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBhZHVsdHNJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNoaWxkcmVuSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkaXNwbGF5VGV4dFRhcmdldDogSFRNTEVsZW1lbnRcblxuICBkZWNsYXJlIHJvb21zVmFsdWU6IG51bWJlclxuICBkZWNsYXJlIGFkdWx0c1ZhbHVlOiBudW1iZXJcbiAgZGVjbGFyZSBjaGlsZHJlblZhbHVlOiBudW1iZXJcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiSG90ZWxHdWVzdFNlbGVjdG9yIGNvbm5lY3RlZFwiKVxuICAgIFxuICAgIC8vIFRyeSB0byByZWFkIGluaXRpYWwgdmFsdWVzIGZyb20gVVJMIHBhcmFtZXRlcnMgZmlyc3RcbiAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpXG4gICAgY29uc3Qgcm9vbXNQYXJhbSA9IHVybFBhcmFtcy5nZXQoJ3Jvb21zJylcbiAgICBjb25zdCBhZHVsdHNQYXJhbSA9IHVybFBhcmFtcy5nZXQoJ2FkdWx0cycpXG4gICAgY29uc3QgY2hpbGRyZW5QYXJhbSA9IHVybFBhcmFtcy5nZXQoJ2NoaWxkcmVuJylcbiAgICBcbiAgICAvLyBPbmx5IGluaXRpYWxpemUgaWYgaW5wdXQgdGFyZ2V0cyBleGlzdCAobW9kYWwgdmlldylcbiAgICBpZiAodGhpcy5oYXNSb29tc0lucHV0VGFyZ2V0ICYmIHRoaXMuaGFzQWR1bHRzSW5wdXRUYXJnZXQgJiYgdGhpcy5oYXNDaGlsZHJlbklucHV0VGFyZ2V0KSB7XG4gICAgICAvLyBQcmlvcml0aXplIFVSTCBwYXJhbWV0ZXJzLCBmYWxsIGJhY2sgdG8gaGlkZGVuIGlucHV0IHZhbHVlc1xuICAgICAgdGhpcy5yb29tc1ZhbHVlID0gcm9vbXNQYXJhbSAmJiByb29tc1BhcmFtICE9PSAnJyA/IHBhcnNlSW50KHJvb21zUGFyYW0pIDogKHBhcnNlSW50KHRoaXMucm9vbXNJbnB1dFRhcmdldC52YWx1ZSkgfHwgMSlcbiAgICAgIHRoaXMuYWR1bHRzVmFsdWUgPSBhZHVsdHNQYXJhbSAmJiBhZHVsdHNQYXJhbSAhPT0gJycgPyBwYXJzZUludChhZHVsdHNQYXJhbSkgOiAocGFyc2VJbnQodGhpcy5hZHVsdHNJbnB1dFRhcmdldC52YWx1ZSkgfHwgMSlcbiAgICAgIHRoaXMuY2hpbGRyZW5WYWx1ZSA9IGNoaWxkcmVuUGFyYW0gJiYgY2hpbGRyZW5QYXJhbSAhPT0gJycgPyBwYXJzZUludChjaGlsZHJlblBhcmFtKSA6IChwYXJzZUludCh0aGlzLmNoaWxkcmVuSW5wdXRUYXJnZXQudmFsdWUpIHx8IDApXG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBtb2RhbCBkaXNwbGF5IGFuZCBoaWRkZW4gaW5wdXRzXG4gICAgICB0aGlzLnVwZGF0ZUNvdW50cygpXG4gICAgICB0aGlzLnVwZGF0ZURpc3BsYXkoKVxuICAgIH1cbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJIb3RlbEd1ZXN0U2VsZWN0b3IgZGlzY29ubmVjdGVkXCIpXG4gIH1cblxuICAvLyBPcGVuIG1vZGFsXG4gIG9wZW5Nb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nXG4gIH1cblxuICAvLyBDbG9zZSBtb2RhbFxuICBjbG9zZU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJydcbiAgfVxuXG4gIC8vIEluY3JlbWVudCByb29tc1xuICBpbmNyZW1lbnRSb29tcygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5yb29tc1ZhbHVlIDwgMTApIHtcbiAgICAgIHRoaXMucm9vbXNWYWx1ZSsrXG4gICAgICB0aGlzLnVwZGF0ZUNvdW50cygpXG4gICAgfVxuICB9XG5cbiAgLy8gRGVjcmVtZW50IHJvb21zXG4gIGRlY3JlbWVudFJvb21zKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnJvb21zVmFsdWUgPiAxKSB7XG4gICAgICB0aGlzLnJvb21zVmFsdWUtLVxuICAgICAgdGhpcy51cGRhdGVDb3VudHMoKVxuICAgIH1cbiAgfVxuXG4gIC8vIEluY3JlbWVudCBhZHVsdHNcbiAgaW5jcmVtZW50QWR1bHRzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmFkdWx0c1ZhbHVlIDwgMjApIHtcbiAgICAgIHRoaXMuYWR1bHRzVmFsdWUrK1xuICAgICAgdGhpcy51cGRhdGVDb3VudHMoKVxuICAgIH1cbiAgfVxuXG4gIC8vIERlY3JlbWVudCBhZHVsdHNcbiAgZGVjcmVtZW50QWR1bHRzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmFkdWx0c1ZhbHVlID4gMSkge1xuICAgICAgdGhpcy5hZHVsdHNWYWx1ZS0tXG4gICAgICB0aGlzLnVwZGF0ZUNvdW50cygpXG4gICAgfVxuICB9XG5cbiAgLy8gSW5jcmVtZW50IGNoaWxkcmVuXG4gIGluY3JlbWVudENoaWxkcmVuKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNoaWxkcmVuVmFsdWUgPCAxMCkge1xuICAgICAgdGhpcy5jaGlsZHJlblZhbHVlKytcbiAgICAgIHRoaXMudXBkYXRlQ291bnRzKClcbiAgICB9XG4gIH1cblxuICAvLyBEZWNyZW1lbnQgY2hpbGRyZW5cbiAgZGVjcmVtZW50Q2hpbGRyZW4oKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY2hpbGRyZW5WYWx1ZSA+IDApIHtcbiAgICAgIHRoaXMuY2hpbGRyZW5WYWx1ZS0tXG4gICAgICB0aGlzLnVwZGF0ZUNvdW50cygpXG4gICAgfVxuICB9XG5cbiAgLy8gUmVzZXQgdG8gZGVmYXVsdHNcbiAgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5yb29tc1ZhbHVlID0gMVxuICAgIHRoaXMuYWR1bHRzVmFsdWUgPSAxXG4gICAgdGhpcy5jaGlsZHJlblZhbHVlID0gMFxuICAgIHRoaXMudXBkYXRlQ291bnRzKClcbiAgfVxuXG4gIC8vIENvbmZpcm0gYW5kIGNsb3NlXG4gIGNvbmZpcm0oKTogdm9pZCB7XG4gICAgdGhpcy51cGRhdGVEaXNwbGF5KClcbiAgICAvLyBEaXNwYXRjaCBldmVudCB0byBub3RpZnkgaG90ZWwtc2VhcmNoIGNvbnRyb2xsZXJcbiAgICB0aGlzLmRpc3BhdGNoR3Vlc3RVcGRhdGVFdmVudCgpXG4gICAgdGhpcy5jbG9zZU1vZGFsKClcbiAgfVxuXG4gIC8vIFVwZGF0ZSBjb3VudCBkaXNwbGF5cyBhbmQgaGlkZGVuIGlucHV0c1xuICBwcml2YXRlIHVwZGF0ZUNvdW50cygpOiB2b2lkIHtcbiAgICB0aGlzLnJvb21zQ291bnRUYXJnZXQudGV4dENvbnRlbnQgPSB0aGlzLnJvb21zVmFsdWUudG9TdHJpbmcoKVxuICAgIHRoaXMuYWR1bHRzQ291bnRUYXJnZXQudGV4dENvbnRlbnQgPSB0aGlzLmFkdWx0c1ZhbHVlLnRvU3RyaW5nKClcbiAgICB0aGlzLmNoaWxkcmVuQ291bnRUYXJnZXQudGV4dENvbnRlbnQgPSB0aGlzLmNoaWxkcmVuVmFsdWUudG9TdHJpbmcoKVxuICAgIFxuICAgIHRoaXMucm9vbXNJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMucm9vbXNWYWx1ZS50b1N0cmluZygpXG4gICAgdGhpcy5hZHVsdHNJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuYWR1bHRzVmFsdWUudG9TdHJpbmcoKVxuICAgIHRoaXMuY2hpbGRyZW5JbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuY2hpbGRyZW5WYWx1ZS50b1N0cmluZygpXG4gIH1cblxuICAvLyBVcGRhdGUgZGlzcGxheSB0ZXh0XG4gIHByaXZhdGUgdXBkYXRlRGlzcGxheSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5oYXNEaXNwbGF5VGV4dFRhcmdldCkge1xuICAgICAgdGhpcy5kaXNwbGF5VGV4dFRhcmdldC50ZXh0Q29udGVudCA9IGAke3RoaXMucm9vbXNWYWx1ZX1cdTk1RjRcdTYyM0YgJHt0aGlzLmFkdWx0c1ZhbHVlfVx1NjIxMFx1NEVCQSAke3RoaXMuY2hpbGRyZW5WYWx1ZX1cdTUxM0ZcdTdBRTVgXG4gICAgfVxuICB9XG5cbiAgLy8gRGlzcGF0Y2ggZXZlbnQgdG8gbm90aWZ5IGhvdGVsLXNlYXJjaCBjb250cm9sbGVyXG4gIHByaXZhdGUgZGlzcGF0Y2hHdWVzdFVwZGF0ZUV2ZW50KCk6IHZvaWQge1xuICAgIGNvbnN0IGd1ZXN0VXBkYXRlRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2hvdGVsLWd1ZXN0LXNlbGVjdG9yOmd1ZXN0cy11cGRhdGVkJywge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIHJvb21zOiB0aGlzLnJvb21zVmFsdWUsXG4gICAgICAgIGFkdWx0czogdGhpcy5hZHVsdHNWYWx1ZSxcbiAgICAgICAgY2hpbGRyZW46IHRoaXMuY2hpbGRyZW5WYWx1ZVxuICAgICAgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICB9KVxuICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZ3Vlc3RVcGRhdGVFdmVudClcbiAgICBjb25zb2xlLmxvZygnSG90ZWwgZ3Vlc3Qgc2VsZWN0b3I6IERpc3BhdGNoZWQgZ3Vlc3QgdXBkYXRlIGV2ZW50Jywge1xuICAgICAgcm9vbXM6IHRoaXMucm9vbXNWYWx1ZSxcbiAgICAgIGFkdWx0czogdGhpcy5hZHVsdHNWYWx1ZSxcbiAgICAgIGNoaWxkcmVuOiB0aGlzLmNoaWxkcmVuVmFsdWVcbiAgICB9KVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5pbnRlcmZhY2UgQ2FsZW5kYXJEYXkge1xuICBkYXRlOiBEYXRlXG4gIGRheU9mTW9udGg6IG51bWJlclxuICBpc0N1cnJlbnRNb250aDogYm9vbGVhblxuICBpc1RvZGF5OiBib29sZWFuXG4gIGlzU2VsZWN0ZWQ6IGJvb2xlYW5cbiAgaXNJblJhbmdlOiBib29sZWFuXG4gIGlzRGlzYWJsZWQ6IGJvb2xlYW5cbiAgbGFiZWw/OiBzdHJpbmdcbiAgaG9saWRheT86IHN0cmluZ1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJtb2RhbFwiLCBcImNhbGVuZGFyXCIsIFwibW9udGhMYWJlbFwiLCBcInByb21wdFRleHRcIixcbiAgICBcImNoZWNrSW5JbnB1dFwiLCBcImNoZWNrT3V0SW5wdXRcIiwgXCJjaGVja0luRGlzcGxheVwiLCBcImNoZWNrT3V0RGlzcGxheVwiLFxuICAgIFwibmlnaHRzRGlzcGxheVwiXG4gIF1cblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0NoZWNrSW5JbnB1dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0NoZWNrT3V0SW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgY2hlY2tJbjogU3RyaW5nLFxuICAgIGNoZWNrT3V0OiBTdHJpbmcsXG4gICAgc2VsZWN0aW5nQ2hlY2tJbjogQm9vbGVhblxuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjYWxlbmRhclRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBtb250aExhYmVsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHByb21wdFRleHRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hlY2tJbklucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hlY2tPdXRJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNoZWNrSW5EaXNwbGF5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNoZWNrT3V0RGlzcGxheVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNOaWdodHNEaXNwbGF5VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbmlnaHRzRGlzcGxheVRhcmdldDogSFRNTEVsZW1lbnRcblxuICBkZWNsYXJlIGNoZWNrSW5WYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgY2hlY2tPdXRWYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgc2VsZWN0aW5nQ2hlY2tJblZhbHVlOiBib29sZWFuXG5cbiAgcHJpdmF0ZSBjdXJyZW50TW9udGg6IERhdGUgPSBuZXcgRGF0ZSgpXG4gIHByaXZhdGUgY2hlY2tJbkRhdGU6IERhdGUgfCBudWxsID0gbnVsbFxuICBwcml2YXRlIGNoZWNrT3V0RGF0ZTogRGF0ZSB8IG51bGwgPSBudWxsXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICAvLyBPbmx5IGluaXRpYWxpemUgaWYgaW5wdXQgdGFyZ2V0cyBleGlzdCAobW9kYWwgdmlldylcbiAgICBpZiAodGhpcy5oYXNDaGVja0luSW5wdXRUYXJnZXQgJiYgdGhpcy5oYXNDaGVja091dElucHV0VGFyZ2V0KSB7XG4gICAgICBpZiAodGhpcy5jaGVja0luSW5wdXRUYXJnZXQudmFsdWUpIHtcbiAgICAgICAgdGhpcy5jaGVja0luRGF0ZSA9IHRoaXMucGFyc2VMb2NhbERhdGUodGhpcy5jaGVja0luSW5wdXRUYXJnZXQudmFsdWUpXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jaGVja091dElucHV0VGFyZ2V0LnZhbHVlKSB7XG4gICAgICAgIHRoaXMuY2hlY2tPdXREYXRlID0gdGhpcy5wYXJzZUxvY2FsRGF0ZSh0aGlzLmNoZWNrT3V0SW5wdXRUYXJnZXQudmFsdWUpXG4gICAgICB9XG4gICAgICB0aGlzLnVwZGF0ZURpc3BsYXkoKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VMb2NhbERhdGUoZGF0ZVN0cjogc3RyaW5nKTogRGF0ZSB7XG4gICAgLy8gUGFyc2UgZGF0ZSBzdHJpbmcgYXMgbG9jYWwgZGF0ZSAoWVlZWS1NTS1ERClcbiAgICBjb25zdCBwYXJ0cyA9IGRhdGVTdHIuc3BsaXQoJy0nKVxuICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDMpIHtcbiAgICAgIGNvbnN0IHllYXIgPSBwYXJzZUludChwYXJ0c1swXSwgMTApXG4gICAgICBjb25zdCBtb250aCA9IHBhcnNlSW50KHBhcnRzWzFdLCAxMCkgLSAxIC8vIE1vbnRoIGlzIDAtaW5kZXhlZFxuICAgICAgY29uc3QgZGF5ID0gcGFyc2VJbnQocGFydHNbMl0sIDEwKVxuICAgICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIG1vbnRoLCBkYXkpXG4gICAgfVxuICAgIHJldHVybiBuZXcgRGF0ZSgpXG4gIH1cblxuICBvcGVuTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5zZWxlY3RpbmdDaGVja0luVmFsdWUgPSB0cnVlXG4gICAgdGhpcy5wcm9tcHRUZXh0VGFyZ2V0LnRleHRDb250ZW50ID0gXCJcdThCRjdcdTkwMDlcdTYyRTlcdTUxNjVcdTRGNEZcdTY1RTVcdTY3MUZcIlxuICAgIHRoaXMuY3VycmVudE1vbnRoID0gbmV3IERhdGUoKVxuICAgIHRoaXMucmVuZGVyTXVsdGlNb250aENhbGVuZGFyKClcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nXG4gIH1cblxuICBjbG9zZU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJydcbiAgfVxuXG4gIHNlbGVjdERhdGUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGNvbnN0IGRhdGVTdHIgPSBidXR0b24uZGF0YXNldC5kYXRlXG4gICAgaWYgKCFkYXRlU3RyKSByZXR1cm5cblxuICAgIGNvbnN0IHNlbGVjdGVkRGF0ZSA9IHRoaXMucGFyc2VMb2NhbERhdGUoZGF0ZVN0cilcbiAgICBcbiAgICBpZiAodGhpcy5zZWxlY3RpbmdDaGVja0luVmFsdWUpIHtcbiAgICAgIC8vIFNlbGVjdGluZyBjaGVjay1pbiBkYXRlXG4gICAgICB0aGlzLmNoZWNrSW5EYXRlID0gc2VsZWN0ZWREYXRlXG4gICAgICB0aGlzLmNoZWNrT3V0RGF0ZSA9IG51bGwgLy8gUmVzZXQgY2hlY2stb3V0IHdoZW4gY2hhbmdpbmcgY2hlY2staW5cbiAgICAgIHRoaXMuc2VsZWN0aW5nQ2hlY2tJblZhbHVlID0gZmFsc2VcbiAgICAgIHRoaXMucHJvbXB0VGV4dFRhcmdldC50ZXh0Q29udGVudCA9IFwiXHU4QkY3XHU5MDA5XHU2MkU5XHU3OUJCXHU1RTk3XHU2NUU1XHU2NzFGXCJcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2VsZWN0aW5nIGNoZWNrLW91dCBkYXRlXG4gICAgICBpZiAodGhpcy5jaGVja0luRGF0ZSAmJiBzZWxlY3RlZERhdGUgPD0gdGhpcy5jaGVja0luRGF0ZSkge1xuICAgICAgICAvLyBJZiBzZWxlY3RlZCBkYXRlIGlzIGJlZm9yZSBvciBzYW1lIGFzIGNoZWNrLWluLCBtYWtlIGl0IHRoZSBuZXcgY2hlY2staW5cbiAgICAgICAgdGhpcy5jaGVja0luRGF0ZSA9IHNlbGVjdGVkRGF0ZVxuICAgICAgICB0aGlzLmNoZWNrT3V0RGF0ZSA9IG51bGxcbiAgICAgICAgdGhpcy5wcm9tcHRUZXh0VGFyZ2V0LnRleHRDb250ZW50ID0gXCJcdThCRjdcdTkwMDlcdTYyRTlcdTc5QkJcdTVFOTdcdTY1RTVcdTY3MUZcIlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jaGVja091dERhdGUgPSBzZWxlY3RlZERhdGVcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnJlbmRlck11bHRpTW9udGhDYWxlbmRhcigpXG4gIH1cblxuICBjb25maXJtKCk6IHZvaWQge1xuICAgIC8vIEFsd2F5cyBhbGxvdyBjb25maXJtIC0gZXZlbiBpZiBkYXRlcyBhcmUgcmVzZXQvY2xlYXJlZFxuICAgIGlmICh0aGlzLmNoZWNrSW5EYXRlICYmIHRoaXMuY2hlY2tPdXREYXRlKSB7XG4gICAgICB0aGlzLmNoZWNrSW5JbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuZm9ybWF0RGF0ZSh0aGlzLmNoZWNrSW5EYXRlKVxuICAgICAgdGhpcy5jaGVja091dElucHV0VGFyZ2V0LnZhbHVlID0gdGhpcy5mb3JtYXREYXRlKHRoaXMuY2hlY2tPdXREYXRlKVxuICAgICAgdGhpcy51cGRhdGVEaXNwbGF5KClcbiAgICAgIFxuICAgICAgLy8gRGlzcGF0Y2ggZXZlbnQgdG8gbm90aWZ5IGhvdGVsLXNlYXJjaCBjb250cm9sbGVyXG4gICAgICB0aGlzLmRpc3BhdGNoRGF0ZVVwZGF0ZUV2ZW50KClcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgZGF0ZXMgYXJlIGNsZWFyZWQgKGFmdGVyIHJlc2V0KSwgY2xlYXIgdGhlIGlucHV0c1xuICAgICAgaWYgKHRoaXMuaGFzQ2hlY2tJbklucHV0VGFyZ2V0KSB7XG4gICAgICAgIHRoaXMuY2hlY2tJbklucHV0VGFyZ2V0LnZhbHVlID0gJydcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhhc0NoZWNrT3V0SW5wdXRUYXJnZXQpIHtcbiAgICAgICAgdGhpcy5jaGVja091dElucHV0VGFyZ2V0LnZhbHVlID0gJydcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRGlzcGF0Y2ggZXZlbnQgd2l0aCBlbXB0eSBkYXRlcyB0byBjbGVhciBmaWx0ZXJcbiAgICAgIGNvbnN0IGRhdGVVcGRhdGVFdmVudCA9IG5ldyBDdXN0b21FdmVudCgnaG90ZWwtZGF0ZS1waWNrZXI6ZGF0ZXMtc2VsZWN0ZWQnLCB7XG4gICAgICAgIGRldGFpbDoge1xuICAgICAgICAgIGNoZWNrSW46ICcnLFxuICAgICAgICAgIGNoZWNrT3V0OiAnJ1xuICAgICAgICB9LFxuICAgICAgICBidWJibGVzOiB0cnVlXG4gICAgICB9KVxuICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChkYXRlVXBkYXRlRXZlbnQpXG4gICAgfVxuICAgIFxuICAgIHRoaXMuY2xvc2VNb2RhbCgpXG4gIH1cblxuICByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLmNoZWNrSW5EYXRlID0gbnVsbFxuICAgIHRoaXMuY2hlY2tPdXREYXRlID0gbnVsbFxuICAgIHRoaXMuc2VsZWN0aW5nQ2hlY2tJblZhbHVlID0gdHJ1ZVxuICAgIHRoaXMucHJvbXB0VGV4dFRhcmdldC50ZXh0Q29udGVudCA9IFwiXHU4QkY3XHU5MDA5XHU2MkU5XHU1MTY1XHU0RjRGXHU2NUU1XHU2NzFGXCJcbiAgICBcbiAgICAvLyBDbGVhciB0aGUgaW5wdXQgZmllbGRzXG4gICAgaWYgKHRoaXMuaGFzQ2hlY2tJbklucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLmNoZWNrSW5JbnB1dFRhcmdldC52YWx1ZSA9ICcnXG4gICAgfVxuICAgIGlmICh0aGlzLmhhc0NoZWNrT3V0SW5wdXRUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2hlY2tPdXRJbnB1dFRhcmdldC52YWx1ZSA9ICcnXG4gICAgfVxuICAgIFxuICAgIHRoaXMucmVuZGVyTXVsdGlNb250aENhbGVuZGFyKClcbiAgICB0aGlzLnVwZGF0ZURpc3BsYXkoKVxuICB9XG5cbiAgcHJldmlvdXNNb250aCgpOiB2b2lkIHtcbiAgICB0aGlzLmN1cnJlbnRNb250aCA9IG5ldyBEYXRlKHRoaXMuY3VycmVudE1vbnRoLmdldEZ1bGxZZWFyKCksIHRoaXMuY3VycmVudE1vbnRoLmdldE1vbnRoKCkgLSAxLCAxKVxuICAgIHRoaXMucmVuZGVyTXVsdGlNb250aENhbGVuZGFyKClcbiAgfVxuXG4gIG5leHRNb250aCgpOiB2b2lkIHtcbiAgICB0aGlzLmN1cnJlbnRNb250aCA9IG5ldyBEYXRlKHRoaXMuY3VycmVudE1vbnRoLmdldEZ1bGxZZWFyKCksIHRoaXMuY3VycmVudE1vbnRoLmdldE1vbnRoKCkgKyAxLCAxKVxuICAgIHRoaXMucmVuZGVyTXVsdGlNb250aENhbGVuZGFyKClcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyTXVsdGlNb250aENhbGVuZGFyKCk6IHZvaWQge1xuICAgIC8vIFJlbmRlciAzIGNvbnNlY3V0aXZlIG1vbnRoc1xuICAgIGxldCBodG1sID0gJydcbiAgICBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgY29uc3QgZGlzcGxheU1vbnRoID0gbmV3IERhdGUodGhpcy5jdXJyZW50TW9udGguZ2V0RnVsbFllYXIoKSwgdGhpcy5jdXJyZW50TW9udGguZ2V0TW9udGgoKSArIGksIDEpXG4gICAgICBodG1sICs9IHRoaXMucmVuZGVyU2luZ2xlTW9udGgoZGlzcGxheU1vbnRoKVxuICAgIH1cbiAgICBcbiAgICB0aGlzLmNhbGVuZGFyVGFyZ2V0LmlubmVySFRNTCA9IGh0bWxcbiAgICBcbiAgICAvLyBVcGRhdGUgbW9udGggbGFiZWwgdG8gc2hvdyBmaXJzdCBtb250aFxuICAgIGNvbnN0IHllYXIgPSB0aGlzLmN1cnJlbnRNb250aC5nZXRGdWxsWWVhcigpXG4gICAgY29uc3QgbW9udGggPSB0aGlzLmN1cnJlbnRNb250aC5nZXRNb250aCgpXG4gICAgdGhpcy5tb250aExhYmVsVGFyZ2V0LnRleHRDb250ZW50ID0gYCR7eWVhcn1cdTVFNzQke21vbnRoICsgMX1cdTY3MDhgXG4gIH1cblxuICBwcml2YXRlIHJlbmRlclNpbmdsZU1vbnRoKGRpc3BsYXlNb250aDogRGF0ZSk6IHN0cmluZyB7XG4gICAgY29uc3QgeWVhciA9IGRpc3BsYXlNb250aC5nZXRGdWxsWWVhcigpXG4gICAgY29uc3QgbW9udGggPSBkaXNwbGF5TW9udGguZ2V0TW9udGgoKVxuICAgIFxuICAgIC8vIE1vbnRoIGhlYWRlclxuICAgIGxldCBodG1sID0gYDxkaXYgY2xhc3M9XCJtYi02XCI+XG4gICAgICA8ZGl2IGNsYXNzPVwidGV4dC1sZyBmb250LWJvbGQgdGV4dC1ncmF5LTkwMCBtYi0zXCI+JHt5ZWFyfVx1NUU3NCR7bW9udGggKyAxfVx1NjcwODwvZGl2PlxuICAgIGBcbiAgICBcbiAgICBjb25zdCBmaXJzdERheSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAxKVxuICAgIGNvbnN0IGxhc3REYXkgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCArIDEsIDApXG4gICAgY29uc3QgZGF5c0luTW9udGggPSBsYXN0RGF5LmdldERhdGUoKVxuICAgIGNvbnN0IHN0YXJ0aW5nRGF5T2ZXZWVrID0gZmlyc3REYXkuZ2V0RGF5KClcbiAgICBcbiAgICBjb25zdCBkYXlzOiBDYWxlbmRhckRheVtdID0gW11cbiAgICBcbiAgICAvLyBQcmV2aW91cyBtb250aCBkYXlzXG4gICAgY29uc3QgcHJldk1vbnRoTGFzdERheSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAwKS5nZXREYXRlKClcbiAgICBmb3IgKGxldCBpID0gc3RhcnRpbmdEYXlPZldlZWsgLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgY29uc3QgZGF5ID0gcHJldk1vbnRoTGFzdERheSAtIGlcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCAtIDEsIGRheSlcbiAgICAgIGRheXMucHVzaCh7XG4gICAgICAgIGRhdGUsXG4gICAgICAgIGRheU9mTW9udGg6IGRheSxcbiAgICAgICAgaXNDdXJyZW50TW9udGg6IGZhbHNlLFxuICAgICAgICBpc1RvZGF5OiBmYWxzZSxcbiAgICAgICAgaXNTZWxlY3RlZDogZmFsc2UsXG4gICAgICAgIGlzSW5SYW5nZTogZmFsc2UsXG4gICAgICAgIGlzRGlzYWJsZWQ6IHRoaXMuaXNEYXRlRGlzYWJsZWQoZGF0ZSlcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIEN1cnJlbnQgbW9udGggZGF5c1xuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxuICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgXG4gICAgZm9yIChsZXQgZGF5ID0gMTsgZGF5IDw9IGRheXNJbk1vbnRoOyBkYXkrKykge1xuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCBkYXkpXG4gICAgICBjb25zdCBpc1RvZGF5ID0gZGF0ZS5nZXRUaW1lKCkgPT09IHRvZGF5LmdldFRpbWUoKVxuICAgICAgY29uc3QgaXNTZWxlY3RlZCA9IHRoaXMuaXNEYXRlU2VsZWN0ZWQoZGF0ZSlcbiAgICAgIGNvbnN0IGlzSW5SYW5nZSA9IHRoaXMuaXNEYXRlSW5SYW5nZShkYXRlKVxuICAgICAgXG4gICAgICBkYXlzLnB1c2goe1xuICAgICAgICBkYXRlLFxuICAgICAgICBkYXlPZk1vbnRoOiBkYXksXG4gICAgICAgIGlzQ3VycmVudE1vbnRoOiB0cnVlLFxuICAgICAgICBpc1RvZGF5LFxuICAgICAgICBpc1NlbGVjdGVkLFxuICAgICAgICBpc0luUmFuZ2UsXG4gICAgICAgIGlzRGlzYWJsZWQ6IHRoaXMuaXNEYXRlRGlzYWJsZWQoZGF0ZSksXG4gICAgICAgIGxhYmVsOiB0aGlzLmdldERhdGVMYWJlbChkYXRlKSxcbiAgICAgICAgaG9saWRheTogdGhpcy5nZXRIb2xpZGF5KGRhdGUpXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBOZXh0IG1vbnRoIGRheXNcbiAgICBjb25zdCByZW1haW5pbmdEYXlzID0gNDIgLSBkYXlzLmxlbmd0aCAvLyA2IHJvd3MgKiA3IGRheXNcbiAgICBmb3IgKGxldCBkYXkgPSAxOyBkYXkgPD0gcmVtYWluaW5nRGF5czsgZGF5KyspIHtcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCArIDEsIGRheSlcbiAgICAgIGRheXMucHVzaCh7XG4gICAgICAgIGRhdGUsXG4gICAgICAgIGRheU9mTW9udGg6IGRheSxcbiAgICAgICAgaXNDdXJyZW50TW9udGg6IGZhbHNlLFxuICAgICAgICBpc1RvZGF5OiBmYWxzZSxcbiAgICAgICAgaXNTZWxlY3RlZDogZmFsc2UsXG4gICAgICAgIGlzSW5SYW5nZTogZmFsc2UsXG4gICAgICAgIGlzRGlzYWJsZWQ6IHRoaXMuaXNEYXRlRGlzYWJsZWQoZGF0ZSlcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIGh0bWwgKz0gdGhpcy5yZW5kZXJEYXlzKGRheXMpXG4gICAgaHRtbCArPSAnPC9kaXY+JyAvLyBDbG9zZSBtb250aCBjb250YWluZXJcbiAgICBcbiAgICByZXR1cm4gaHRtbFxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJEYXlzKGRheXM6IENhbGVuZGFyRGF5W10pOiBzdHJpbmcge1xuICAgIGNvbnN0IHdlZWtkYXlzID0gWydcdTY1RTUnLCAnXHU0RTAwJywgJ1x1NEU4QycsICdcdTRFMDknLCAnXHU1NkRCJywgJ1x1NEU5NCcsICdcdTUxNkQnXVxuICAgIFxuICAgIGxldCBodG1sID0gJzxkaXYgY2xhc3M9XCJncmlkIGdyaWQtY29scy03IGdhcC0xIG1iLTJcIj4nXG4gICAgd2Vla2RheXMuZm9yRWFjaChkYXkgPT4ge1xuICAgICAgaHRtbCArPSBgPGRpdiBjbGFzcz1cInRleHQtY2VudGVyIHRleHQtc20gdGV4dC1ncmF5LTUwMCBweS0yXCI+JHtkYXl9PC9kaXY+YFxuICAgIH0pXG4gICAgaHRtbCArPSAnPC9kaXY+J1xuICAgIFxuICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJncmlkIGdyaWQtY29scy03IGdhcC0xXCI+J1xuICAgIFxuICAgIGRheXMuZm9yRWFjaChkYXkgPT4ge1xuICAgICAgY29uc3QgZGF0ZVN0ciA9IHRoaXMuZm9ybWF0RGF0ZShkYXkuZGF0ZSlcbiAgICAgIGNvbnN0IGJhc2VDbGFzc2VzID0gXCJyZWxhdGl2ZSBoLTEyIGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtc20gcm91bmRlZC1sZ1wiXG4gICAgICBcbiAgICAgIGxldCBjbGFzc2VzID0gYmFzZUNsYXNzZXNcbiAgICAgIGxldCB0ZXh0Q29sb3IgPSBkYXkuaXNDdXJyZW50TW9udGggPyAndGV4dC1ncmF5LTkwMCcgOiAndGV4dC1ncmF5LTMwMCdcbiAgICAgIGxldCBiZ0NvbG9yID0gJydcbiAgICAgIFxuICAgICAgaWYgKGRheS5pc0Rpc2FibGVkKSB7XG4gICAgICAgIGNsYXNzZXMgKz0gJyBvcGFjaXR5LTQwIGN1cnNvci1ub3QtYWxsb3dlZCdcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNsYXNzZXMgKz0gJyBjdXJzb3ItcG9pbnRlciBob3ZlcjpiZy1ncmF5LTEwMCdcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGRheS5pc1NlbGVjdGVkKSB7XG4gICAgICAgIGJnQ29sb3IgPSAnYmcteWVsbG93LTQwMCdcbiAgICAgICAgdGV4dENvbG9yID0gJ3RleHQtd2hpdGUgZm9udC1ib2xkJ1xuICAgICAgfSBlbHNlIGlmIChkYXkuaXNJblJhbmdlKSB7XG4gICAgICAgIGJnQ29sb3IgPSAnYmcteWVsbG93LTUwJ1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoZGF5LmlzVG9kYXkgJiYgIWRheS5pc1NlbGVjdGVkKSB7XG4gICAgICAgIGNsYXNzZXMgKz0gJyBib3JkZXItMiBib3JkZXItYmx1ZS01MDAnXG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGxhYmVsID0gZGF5LmxhYmVsIHx8IGRheS5ob2xpZGF5IHx8ICcnXG4gICAgICBjb25zdCBsYWJlbENsYXNzID0gZGF5LmhvbGlkYXkgPyAndGV4dC1yZWQtNTAwJyA6ICd0ZXh0LWJsdWUtNTAwJ1xuICAgICAgXG4gICAgICBodG1sICs9IGBcbiAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICBkYXRhLWRhdGU9XCIke2RhdGVTdHJ9XCJcbiAgICAgICAgICBkYXRhLWFjdGlvbj1cImNsaWNrLT5ob3RlbC1kYXRlLXBpY2tlciNzZWxlY3REYXRlXCJcbiAgICAgICAgICBjbGFzcz1cIiR7Y2xhc3Nlc30gJHtiZ0NvbG9yfSAke3RleHRDb2xvcn1cIlxuICAgICAgICAgICR7ZGF5LmlzRGlzYWJsZWQgPyAnZGlzYWJsZWQnIDogJyd9XG4gICAgICAgID5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZvbnQtbWVkaXVtXCI+JHtkYXkuZGF5T2ZNb250aH08L3NwYW4+XG4gICAgICAgICAgJHtsYWJlbCA/IGA8c3BhbiBjbGFzcz1cInRleHQteHMgJHtsYWJlbENsYXNzfSBhYnNvbHV0ZSBib3R0b20tMFwiPiR7bGFiZWx9PC9zcGFuPmAgOiAnJ31cbiAgICAgICAgPC9idXR0b24+XG4gICAgICBgXG4gICAgfSlcbiAgICBcbiAgICBodG1sICs9ICc8L2Rpdj4nXG4gICAgcmV0dXJuIGh0bWxcbiAgfVxuXG4gIHByaXZhdGUgaXNEYXRlRGlzYWJsZWQoZGF0ZTogRGF0ZSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxuICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgcmV0dXJuIGRhdGUgPCB0b2RheVxuICB9XG5cbiAgcHJpdmF0ZSBpc0RhdGVTZWxlY3RlZChkYXRlOiBEYXRlKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMuY2hlY2tJbkRhdGUgJiYgdGhpcy5pc1NhbWVEYXkoZGF0ZSwgdGhpcy5jaGVja0luRGF0ZSkpIHJldHVybiB0cnVlXG4gICAgaWYgKHRoaXMuY2hlY2tPdXREYXRlICYmIHRoaXMuaXNTYW1lRGF5KGRhdGUsIHRoaXMuY2hlY2tPdXREYXRlKSkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHByaXZhdGUgaXNEYXRlSW5SYW5nZShkYXRlOiBEYXRlKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLmNoZWNrSW5EYXRlIHx8ICF0aGlzLmNoZWNrT3V0RGF0ZSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIGRhdGUgPiB0aGlzLmNoZWNrSW5EYXRlICYmIGRhdGUgPCB0aGlzLmNoZWNrT3V0RGF0ZVxuICB9XG5cbiAgcHJpdmF0ZSBpc1NhbWVEYXkoZGF0ZTE6IERhdGUsIGRhdGUyOiBEYXRlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGRhdGUxLmdldEZ1bGxZZWFyKCkgPT09IGRhdGUyLmdldEZ1bGxZZWFyKCkgJiZcbiAgICAgICAgICAgZGF0ZTEuZ2V0TW9udGgoKSA9PT0gZGF0ZTIuZ2V0TW9udGgoKSAmJlxuICAgICAgICAgICBkYXRlMS5nZXREYXRlKCkgPT09IGRhdGUyLmdldERhdGUoKVxuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXREYXRlKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKClcbiAgICBjb25zdCBtb250aCA9IFN0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpXG4gICAgY29uc3QgZGF5ID0gU3RyaW5nKGRhdGUuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpXG4gICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fWBcbiAgfVxuXG4gIHByaXZhdGUgZ2V0RGF0ZUxhYmVsKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxuICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgY29uc3QgdGFyZ2V0RGF0ZSA9IG5ldyBEYXRlKGRhdGUpXG4gICAgdGFyZ2V0RGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICAgIFxuICAgIGNvbnN0IGRpZmZUaW1lID0gdGFyZ2V0RGF0ZS5nZXRUaW1lKCkgLSB0b2RheS5nZXRUaW1lKClcbiAgICBjb25zdCBkaWZmRGF5cyA9IE1hdGgucm91bmQoZGlmZlRpbWUgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpXG4gICAgXG4gICAgaWYgKGRpZmZEYXlzID09PSAwKSByZXR1cm4gJ1x1NEVDQVx1NTkyOSdcbiAgICBpZiAoZGlmZkRheXMgPT09IDEpIHJldHVybiAnXHU2NjBFXHU1OTI5J1xuICAgIGlmIChkaWZmRGF5cyA9PT0gMikgcmV0dXJuICdcdTU0MEVcdTU5MjknXG4gICAgXG4gICAgY29uc3Qgd2Vla2RheXMgPSBbJ1x1NTQ2OFx1NjVFNScsICdcdTU0NjhcdTRFMDAnLCAnXHU1NDY4XHU0RThDJywgJ1x1NTQ2OFx1NEUwOScsICdcdTU0NjhcdTU2REInLCAnXHU1NDY4XHU0RTk0JywgJ1x1NTQ2OFx1NTE2RCddXG4gICAgcmV0dXJuIHdlZWtkYXlzW2RhdGUuZ2V0RGF5KCldXG4gIH1cblxuICBwcml2YXRlIGdldEhvbGlkYXkoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gICAgLy8gU2ltcGxlIGhvbGlkYXkgbWFwcGluZyAtIGNhbiBiZSBleHBhbmRlZFxuICAgIGNvbnN0IG1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMVxuICAgIGNvbnN0IGRheSA9IGRhdGUuZ2V0RGF0ZSgpXG4gICAgXG4gICAgaWYgKG1vbnRoID09PSAxICYmIGRheSA9PT0gMSkgcmV0dXJuICdcdTUxNDNcdTY1RTYnXG4gICAgaWYgKG1vbnRoID09PSAyICYmIGRheSA9PT0gMTQpIHJldHVybiAnXHU2MEM1XHU0RUJBXHU4MjgyJ1xuICAgIGlmIChtb250aCA9PT0gNSAmJiBkYXkgPT09IDEpIHJldHVybiAnXHU1MkIzXHU1MkE4XHU4MjgyJ1xuICAgIGlmIChtb250aCA9PT0gNiAmJiBkYXkgPT09IDEpIHJldHVybiAnXHU1MTNGXHU3QUU1XHU4MjgyJ1xuICAgIGlmIChtb250aCA9PT0gMTAgJiYgZGF5ID09PSAxKSByZXR1cm4gJ1x1NTZGRFx1NUU4Nlx1ODI4MidcbiAgICBpZiAobW9udGggPT09IDEyICYmIGRheSA9PT0gMjUpIHJldHVybiAnXHU1NzIzXHU4QkRFXHU4MjgyJ1xuICAgIFxuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVEaXNwbGF5KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNoZWNrSW5EYXRlKSB7XG4gICAgICBjb25zdCBtb250aCA9IHRoaXMuY2hlY2tJbkRhdGUuZ2V0TW9udGgoKSArIDFcbiAgICAgIGNvbnN0IGRheSA9IHRoaXMuY2hlY2tJbkRhdGUuZ2V0RGF0ZSgpXG4gICAgICB0aGlzLmNoZWNrSW5EaXNwbGF5VGFyZ2V0LnRleHRDb250ZW50ID0gYCR7bW9udGh9XHU2NzA4JHtkYXl9XHU2NUU1YFxuICAgICAgXG4gICAgICAvLyBVcGRhdGUgbGFiZWwgYmVsb3cgY2hlY2staW4gZGF0ZVxuICAgICAgY29uc3QgY2hlY2tJbkxhYmVsID0gdGhpcy5jaGVja0luRGlzcGxheVRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmdcbiAgICAgIGlmIChjaGVja0luTGFiZWwpIHtcbiAgICAgICAgY2hlY2tJbkxhYmVsLnRleHRDb250ZW50ID0gdGhpcy5nZXREYXRlTGFiZWwodGhpcy5jaGVja0luRGF0ZSlcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuY2hlY2tPdXREYXRlKSB7XG4gICAgICBjb25zdCBtb250aCA9IHRoaXMuY2hlY2tPdXREYXRlLmdldE1vbnRoKCkgKyAxXG4gICAgICBjb25zdCBkYXkgPSB0aGlzLmNoZWNrT3V0RGF0ZS5nZXREYXRlKClcbiAgICAgIHRoaXMuY2hlY2tPdXREaXNwbGF5VGFyZ2V0LnRleHRDb250ZW50ID0gYCR7bW9udGh9XHU2NzA4JHtkYXl9XHU2NUU1YFxuICAgICAgXG4gICAgICAvLyBVcGRhdGUgbGFiZWwgYmVsb3cgY2hlY2stb3V0IGRhdGVcbiAgICAgIGNvbnN0IGNoZWNrT3V0TGFiZWwgPSB0aGlzLmNoZWNrT3V0RGlzcGxheVRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmdcbiAgICAgIGlmIChjaGVja091dExhYmVsKSB7XG4gICAgICAgIGNoZWNrT3V0TGFiZWwudGV4dENvbnRlbnQgPSB0aGlzLmdldERhdGVMYWJlbCh0aGlzLmNoZWNrT3V0RGF0ZSlcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuY2hlY2tJbkRhdGUgJiYgdGhpcy5jaGVja091dERhdGUgJiYgdGhpcy5oYXNOaWdodHNEaXNwbGF5VGFyZ2V0KSB7XG4gICAgICBjb25zdCBuaWdodHMgPSBNYXRoLmZsb29yKCh0aGlzLmNoZWNrT3V0RGF0ZS5nZXRUaW1lKCkgLSB0aGlzLmNoZWNrSW5EYXRlLmdldFRpbWUoKSkgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpXG4gICAgICB0aGlzLm5pZ2h0c0Rpc3BsYXlUYXJnZXQudGV4dENvbnRlbnQgPSBgJHtuaWdodHN9XHU2NjVBYFxuICAgIH1cbiAgfVxuXG4gIC8vIERpc3BhdGNoIGRhdGUgdXBkYXRlIGV2ZW50IGZvciBob3RlbC1zZWFyY2ggY29udHJvbGxlclxuICBwcml2YXRlIGRpc3BhdGNoRGF0ZVVwZGF0ZUV2ZW50KCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5jaGVja0luRGF0ZSB8fCAhdGhpcy5jaGVja091dERhdGUpIHJldHVyblxuICAgIFxuICAgIGNvbnN0IGRhdGVVcGRhdGVFdmVudCA9IG5ldyBDdXN0b21FdmVudCgnaG90ZWwtZGF0ZS1waWNrZXI6ZGF0ZXMtc2VsZWN0ZWQnLCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgY2hlY2tJbjogdGhpcy5mb3JtYXREYXRlKHRoaXMuY2hlY2tJbkRhdGUpLFxuICAgICAgICBjaGVja091dDogdGhpcy5mb3JtYXREYXRlKHRoaXMuY2hlY2tPdXREYXRlKVxuICAgICAgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICB9KVxuICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZGF0ZVVwZGF0ZUV2ZW50KVxuICAgIGNvbnNvbGUubG9nKCdIb3RlbCBkYXRlIHBpY2tlcjogRGlzcGF0Y2hlZCBkYXRlcyB1cGRhdGUgZXZlbnQnLCB7XG4gICAgICBjaGVja0luOiB0aGlzLmZvcm1hdERhdGUodGhpcy5jaGVja0luRGF0ZSksXG4gICAgICBjaGVja091dDogdGhpcy5mb3JtYXREYXRlKHRoaXMuY2hlY2tPdXREYXRlKVxuICAgIH0pXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcIm1vZGFsXCIsXG4gICAgXCJiYWNrZHJvcFwiLFxuICAgIFwicGF5bWVudE9wdGlvblwiLFxuICAgIFwicGF5bWVudE1ldGhvZElucHV0XCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgdG90YWxQcmljZTogU3RyaW5nXG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IG1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGJhY2tkcm9wVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHBheW1lbnRPcHRpb25UYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgcGF5bWVudE1ldGhvZElucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdG90YWxQcmljZVZhbHVlOiBzdHJpbmdcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiUGF5bWVudE1vZGFsIGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgLy8gXHU2MjUzXHU1RjAwXHU1RjM5XHU3QTk3XG4gIG9wZW4oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgIHRoaXMuYmFja2Ryb3BUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiXG4gIH1cblxuICAvLyBcdTUxNzNcdTk1RURcdTVGMzlcdTdBOTdcbiAgY2xvc2UoZXZlbnQ/OiBFdmVudCk6IHZvaWQge1xuICAgIGlmIChldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIH1cbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgICB0aGlzLmJhY2tkcm9wVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJcIlxuICB9XG5cbiAgLy8gXHU3MEI5XHU1MUZCXHU4MENDXHU2NjZGXHU1MTczXHU5NUVEXG4gIGNsb3NlT25CYWNrZHJvcChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSBldmVudC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICB0aGlzLmNsb3NlKClcbiAgICB9XG4gIH1cblxuICAvLyBcdTkwMDlcdTYyRTlcdTY1MkZcdTRFRDhcdTY1QjlcdTVGMEZcbiAgc2VsZWN0UGF5bWVudChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHRhcmdldC5kYXRhc2V0LnBheW1lbnRNZXRob2RcblxuICAgIC8vIFx1NzlGQlx1OTY2NFx1NjI0MFx1NjcwOVx1OTAwOVx1NEUyRFx1NzJCNlx1NjAwMVxuICAgIHRoaXMucGF5bWVudE9wdGlvblRhcmdldHMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgb3B0aW9uLmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItYmx1ZS01MDBcIiwgXCJiZy1ibHVlLTUwXCIpXG4gICAgICBvcHRpb24uY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTIwMFwiKVxuICAgICAgY29uc3QgY2hlY2ttYXJrID0gb3B0aW9uLnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrXCIpXG4gICAgICBpZiAoY2hlY2ttYXJrKSB7XG4gICAgICAgIGNoZWNrbWFyay5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIFx1NkRGQlx1NTJBMFx1OTAwOVx1NEUyRFx1NzJCNlx1NjAwMVxuICAgIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYm9yZGVyLWdyYXktMjAwXCIpXG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItYmx1ZS01MDBcIiwgXCJiZy1ibHVlLTUwXCIpXG4gICAgY29uc3QgY2hlY2ttYXJrID0gdGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrXCIpXG4gICAgaWYgKGNoZWNrbWFyaykge1xuICAgICAgY2hlY2ttYXJrLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICB9XG5cbiAgICAvLyBcdTY2RjRcdTY1QjBcdTk2OTBcdTg1Q0ZcdTc2ODRcdTg4NjhcdTUzNTVcdTVCNTdcdTZCQjVcbiAgICBpZiAocGF5bWVudE1ldGhvZCkge1xuICAgICAgdGhpcy5wYXltZW50TWV0aG9kSW5wdXRUYXJnZXQudmFsdWUgPSBwYXltZW50TWV0aG9kXG4gICAgfVxuICB9XG5cbiAgLy8gXHU3ODZFXHU4QkE0XHU0RUQ4XHU2QjNFIC0gXHU2M0QwXHU0RUE0XHU4ODY4XHU1MzU1XG4gIGNvbmZpcm1QYXltZW50KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBmb3JtID0gdGhpcy5lbGVtZW50LmNsb3Nlc3QoXCJmb3JtXCIpIGFzIEhUTUxGb3JtRWxlbWVudFxuICAgIGlmIChmb3JtKSB7XG4gICAgICBmb3JtLnJlcXVlc3RTdWJtaXQoKVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyIHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJwYXNzd29yZE1vZGFsXCIsXG4gICAgXCJmaW5nZXJwcmludE1vZGFsXCIsXG4gICAgXCJwcm9jZXNzaW5nTW9kYWxcIixcbiAgICBcInN0YXR1c01vZGFsXCIsXG4gICAgXCJwYXNzd29yZERvdHNcIixcbiAgICBcInBhc3N3b3JkQW1vdW50XCIsXG4gICAgXCJwcm9jZXNzaW5nQW1vdW50XCIsXG4gICAgXCJ1c2VyRW1haWxcIixcbiAgICBcInN0YXR1c0Ftb3VudFwiLFxuICAgIFwic3RhdHVzVXNlckVtYWlsXCIsXG4gICAgXCJzdGF0dXNJY29uXCIsXG4gICAgXCJzdGF0dXNUZXh0XCIsXG4gICAgXCJzdGF0dXNEb3RzXCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgYW1vdW50OiBTdHJpbmcsXG4gICAgdXNlckVtYWlsOiBTdHJpbmcsXG4gICAgcGF5bWVudFVybDogU3RyaW5nLFxuICAgIHN1Y2Nlc3NVcmw6IFN0cmluZ1xuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBwYXNzd29yZE1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1Bhc3N3b3JkTW9kYWxUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNGaW5nZXJwcmludE1vZGFsVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUHJvY2Vzc2luZ01vZGFsVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgc3RhdHVzTW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzU3RhdHVzTW9kYWxUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBwYXNzd29yZERvdHNUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUGFzc3dvcmREb3RzVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgcGFzc3dvcmRBbW91bnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUGFzc3dvcmRBbW91bnRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBzdGF0dXNBbW91bnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzU3RhdHVzQW1vdW50VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgc3RhdHVzVXNlckVtYWlsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1N0YXR1c1VzZXJFbWFpbFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IHN0YXR1c0ljb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzU3RhdHVzSWNvblRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IHN0YXR1c1RleHRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzU3RhdHVzVGV4dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IHN0YXR1c0RvdHNUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzU3RhdHVzRG90c1RhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGFtb3VudFZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSByZWFkb25seSB1c2VyRW1haWxWYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgcmVhZG9ubHkgcGF5bWVudFVybFZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSByZWFkb25seSBzdWNjZXNzVXJsVmFsdWU6IHN0cmluZ1xuXG4gIHByaXZhdGUgcGFzc3dvcmQ6IHN0cmluZyA9IFwiXCJcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIEluaXRpYWxpemUgY29udHJvbGxlclxuICAgIGNvbnNvbGUubG9nKFwiUGF5bWVudCBjb25maXJtYXRpb24gY29udHJvbGxlciBjb25uZWN0ZWRcIilcbiAgfVxuXG4gIHNob3dQYXNzd29yZE1vZGFsKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNQYXNzd29yZE1vZGFsVGFyZ2V0KSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiUGFzc3dvcmQgbW9kYWwgdGFyZ2V0IG5vdCBmb3VuZFwiKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIHRoaXMucGFzc3dvcmQgPSBcIlwiXG4gICAgaWYgKHRoaXMuaGFzUGFzc3dvcmREb3RzVGFyZ2V0KSB7XG4gICAgICB0aGlzLnVwZGF0ZVBhc3N3b3JkRG90cygpXG4gICAgfVxuICAgIGlmICh0aGlzLmhhc1Bhc3N3b3JkQW1vdW50VGFyZ2V0KSB7XG4gICAgICB0aGlzLnBhc3N3b3JkQW1vdW50VGFyZ2V0LnRleHRDb250ZW50ID0gdGhpcy5hbW91bnRWYWx1ZVxuICAgIH1cbiAgICB0aGlzLnBhc3N3b3JkTW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgfVxuXG4gIGNsb3NlUGFzc3dvcmRNb2RhbCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5oYXNQYXNzd29yZE1vZGFsVGFyZ2V0KSB7XG4gICAgICB0aGlzLnBhc3N3b3JkTW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICB9XG4gIH1cblxuICBpbnB1dFBhc3N3b3JkKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBjb25zdCBudW1iZXIgPSBidXR0b24uZGF0YXNldC5udW1iZXJcblxuICAgIGlmICghbnVtYmVyKSByZXR1cm5cblxuICAgIGlmICh0aGlzLnBhc3N3b3JkLmxlbmd0aCA8IDYpIHtcbiAgICAgIHRoaXMucGFzc3dvcmQgKz0gbnVtYmVyXG4gICAgICB0aGlzLnVwZGF0ZVBhc3N3b3JkRG90cygpXG5cbiAgICAgIGlmICh0aGlzLnBhc3N3b3JkLmxlbmd0aCA9PT0gNikge1xuICAgICAgICB0aGlzLnByb2Nlc3NQYXNzd29yZFBheW1lbnQoKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGRlbGV0ZVBhc3N3b3JkKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnBhc3N3b3JkLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMucGFzc3dvcmQgPSB0aGlzLnBhc3N3b3JkLnNsaWNlKDAsIC0xKVxuICAgICAgdGhpcy51cGRhdGVQYXNzd29yZERvdHMoKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlUGFzc3dvcmREb3RzKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNQYXNzd29yZERvdHNUYXJnZXQpIHJldHVyblxuICAgIFxuICAgIGNvbnN0IGRvdHMgPSB0aGlzLnBhc3N3b3JkRG90c1RhcmdldC5xdWVyeVNlbGVjdG9yQWxsKCcucGFzc3dvcmQtZG90JylcbiAgICBkb3RzLmZvckVhY2goKGRvdCwgaW5kZXgpID0+IHtcbiAgICAgIGlmIChpbmRleCA8IHRoaXMucGFzc3dvcmQubGVuZ3RoKSB7XG4gICAgICAgIGRvdC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG90LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHByb2Nlc3NQYXNzd29yZFBheW1lbnQoKTogdm9pZCB7XG4gICAgLy8gRG8gTk9UIGNsb3NlIG1vZGFsIGhlcmUgLSB3YWl0IGZvciB2ZXJpZmljYXRpb24gcmVzdWx0XG4gICAgLy8gRmlyc3QgdmVyaWZ5IHBhc3N3b3JkIGJlZm9yZSBzaG93aW5nIHBheW1lbnQgc3RhdHVzXG4gICAgdGhpcy52ZXJpZnlQYXNzd29yZFRoZW5QYXkoKVxuICB9XG5cbiAgYXN5bmMgdmVyaWZ5UGFzc3dvcmRUaGVuUGF5KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBDYWxsIHZlcmlmeSBBUEkgZmlyc3RcbiAgICAgIGNvbnN0IHZlcmlmeVJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9wcm9maWxlL3ZlcmlmeV9wYXlfcGFzc3dvcmQnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAnWC1DU1JGLVRva2VuJzogZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MTWV0YUVsZW1lbnQ+KCdtZXRhW25hbWU9XCJjc3JmLXRva2VuXCJdJyk/LmNvbnRlbnQgfHwgJydcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHBheV9wYXNzd29yZDogdGhpcy5wYXNzd29yZFxuICAgICAgICB9KVxuICAgICAgfSlcblxuICAgICAgY29uc3QgdmVyaWZ5RGF0YSA9IGF3YWl0IHZlcmlmeVJlc3BvbnNlLmpzb24oKVxuXG4gICAgICBpZiAoIXZlcmlmeVJlc3BvbnNlLm9rIHx8ICF2ZXJpZnlEYXRhLnN1Y2Nlc3MpIHtcbiAgICAgICAgLy8gUGFzc3dvcmQgaXMgd3JvbmcgLSBzaG93IHRvYXN0IGFuZCByZXNldFxuICAgICAgICBjb25zdCBtZXNzYWdlID0gdmVyaWZ5RGF0YS5tZXNzYWdlIHx8ICdcdTY1MkZcdTRFRDhcdTVCQzZcdTc4MDFcdTk1MTlcdThCRUYnXG4gICAgICAgIFxuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTY2MkZcdTk3MDBcdTg5ODFcdThCQkVcdTdGNkVcdTY1MkZcdTRFRDhcdTVCQzZcdTc4MDFcdUZGMENcdTc2RjRcdTYzQTVcdThERjNcdThGNkNcbiAgICAgICAgaWYgKG1lc3NhZ2UuaW5jbHVkZXMoJ1x1OEJGN1x1NTE0OFx1OEJCRVx1N0Y2RVx1NjUyRlx1NEVEOFx1NUJDNlx1NzgwMScpIHx8IG1lc3NhZ2UuaW5jbHVkZXMoJ1x1OEJCRVx1N0Y2RVx1NjUyRlx1NEVEOFx1NUJDNlx1NzgwMScpKSB7XG4gICAgICAgICAgaWYgKHRoaXMuaGFzUGFzc3dvcmRNb2RhbFRhcmdldCkge1xuICAgICAgICAgICAgdGhpcy5wYXNzd29yZE1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICAgICAgfVxuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9wcm9maWxlL2VkaXRfcGF5X3Bhc3N3b3JkJ1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAodHlwZW9mICh3aW5kb3cgYXMgYW55KS5zaG93VG9hc3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAod2luZG93IGFzIGFueSkuc2hvd1RvYXN0KG1lc3NhZ2UpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWxlcnQobWVzc2FnZSlcbiAgICAgICAgfVxuICAgICAgICAvLyBDbGVhciBwYXNzd29yZCBhbmQgc3RheSBvbiBwYXNzd29yZCBpbnB1dCBwYWdlXG4gICAgICAgIHRoaXMucGFzc3dvcmQgPSBcIlwiXG4gICAgICAgIHRoaXMudXBkYXRlUGFzc3dvcmREb3RzKClcbiAgICAgICAgaWYgKHRoaXMuaGFzUGFzc3dvcmRNb2RhbFRhcmdldCkge1xuICAgICAgICAgIHRoaXMucGFzc3dvcmRNb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICAvLyBQYXNzd29yZCBpcyBjb3JyZWN0IC0gcHJvY2VlZCB3aXRoIHBheW1lbnRcbiAgICAgIGlmICh0aGlzLmhhc1Bhc3N3b3JkTW9kYWxUYXJnZXQpIHtcbiAgICAgICAgdGhpcy5wYXNzd29yZE1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICB9XG4gICAgICB0aGlzLnNob3dQYXlpbmdTdGF0dXMoKVxuICAgICAgXG4gICAgICAvLyBQcm9jZXNzIGFjdHVhbCBwYXltZW50XG4gICAgICBhd2FpdCB0aGlzLnByb2Nlc3NBY3R1YWxQYXltZW50KClcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTlBOENcdThCQzFcdTY1MkZcdTRFRDhcdTVCQzZcdTc4MDFcdTU5MzFcdThEMjU6JywgZXJyb3IpXG4gICAgICBpZiAodHlwZW9mICh3aW5kb3cgYXMgYW55KS5zaG93VG9hc3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgKHdpbmRvdyBhcyBhbnkpLnNob3dUb2FzdCgnXHU3RjUxXHU3RURDXHU5NTE5XHU4QkVGXHVGRjBDXHU4QkY3XHU5MUNEXHU4QkQ1JylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KCdcdTdGNTFcdTdFRENcdTk1MTlcdThCRUZcdUZGMENcdThCRjdcdTkxQ0RcdThCRDUnKVxuICAgICAgfVxuICAgICAgdGhpcy5wYXNzd29yZCA9IFwiXCJcbiAgICAgIHRoaXMudXBkYXRlUGFzc3dvcmREb3RzKClcbiAgICAgIGlmICh0aGlzLmhhc1Bhc3N3b3JkTW9kYWxUYXJnZXQpIHtcbiAgICAgICAgdGhpcy5wYXNzd29yZE1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcHJvY2Vzc0FjdHVhbFBheW1lbnQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5wYXltZW50VXJsVmFsdWV9Lmpzb25gLCB7XG4gICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAnWC1DU1JGLVRva2VuJzogZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MTWV0YUVsZW1lbnQ+KCdtZXRhW25hbWU9XCJjc3JmLXRva2VuXCJdJyk/LmNvbnRlbnQgfHwgJydcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe30pIC8vIFBhc3N3b3JkIGFscmVhZHkgdmVyaWZpZWQsIGp1c3QgdHJpZ2dlciBwYXltZW50XG4gICAgICB9KVxuXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG5cbiAgICAgIGlmIChyZXNwb25zZS5vayAmJiBkYXRhLnN1Y2Nlc3MpIHtcbiAgICAgICAgLy8gU2hvdyBzdWNjZXNzIHN0YXR1c1xuICAgICAgICB0aGlzLnNob3dQYXltZW50U3VjY2VzcygpXG4gICAgICAgIC8vIFJlZGlyZWN0IGFmdGVyIHNob3dpbmcgc3VjY2Vzc1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHRoaXMuc3VjY2Vzc1VybFZhbHVlXG4gICAgICAgIH0sIDIwMDApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YS5tZXNzYWdlIHx8ICdcdTY1MkZcdTRFRDhcdTU5MzFcdThEMjUnKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTY1MkZcdTRFRDhcdTU5MzFcdThEMjU6JywgZXJyb3IpXG4gICAgICB0aGlzLmNsb3NlU3RhdHVzTW9kYWwoKVxuICAgICAgY29uc3QgbWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1x1NjUyRlx1NEVEOFx1NTkzMVx1OEQyNVx1RkYwQ1x1OEJGN1x1OTFDRFx1OEJENSdcbiAgICAgIGlmICh0eXBlb2YgKHdpbmRvdyBhcyBhbnkpLnNob3dUb2FzdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAod2luZG93IGFzIGFueSkuc2hvd1RvYXN0KG1lc3NhZ2UpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGVydChtZXNzYWdlKVxuICAgICAgfVxuICAgICAgdGhpcy5wYXNzd29yZCA9IFwiXCJcbiAgICAgIHRoaXMuc2hvd1Bhc3N3b3JkTW9kYWwoKVxuICAgIH1cbiAgfVxuXG4gIHNob3dQYXlpbmdTdGF0dXMoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc1N0YXR1c01vZGFsVGFyZ2V0KSByZXR1cm5cbiAgICBcbiAgICBpZiAodGhpcy5oYXNTdGF0dXNBbW91bnRUYXJnZXQpIHtcbiAgICAgIHRoaXMuc3RhdHVzQW1vdW50VGFyZ2V0LnRleHRDb250ZW50ID0gdGhpcy5hbW91bnRWYWx1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5oYXNTdGF0dXNVc2VyRW1haWxUYXJnZXQpIHtcbiAgICAgIHRoaXMuc3RhdHVzVXNlckVtYWlsVGFyZ2V0LnRleHRDb250ZW50ID0gdGhpcy51c2VyRW1haWxWYWx1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5oYXNTdGF0dXNJY29uVGFyZ2V0KSB7XG4gICAgICB0aGlzLnN0YXR1c0ljb25UYXJnZXQudGV4dENvbnRlbnQgPSAnXHVEODNEXHVEQ0IzJ1xuICAgIH1cbiAgICBpZiAodGhpcy5oYXNTdGF0dXNUZXh0VGFyZ2V0KSB7XG4gICAgICB0aGlzLnN0YXR1c1RleHRUYXJnZXQudGV4dENvbnRlbnQgPSAnXHU2QjYzXHU1NzI4XHU0RUQ4XHU2QjNFJ1xuICAgIH1cbiAgICBpZiAodGhpcy5oYXNTdGF0dXNEb3RzVGFyZ2V0KSB7XG4gICAgICB0aGlzLnN0YXR1c0RvdHNUYXJnZXQuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICB9XG4gICAgdGhpcy5zdGF0dXNNb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICB9XG5cbiAgY2xvc2VQcm9jZXNzaW5nTW9kYWwoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaGFzU3RhdHVzTW9kYWxUYXJnZXQpIHtcbiAgICAgIHRoaXMuc3RhdHVzTW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICB9XG4gIH1cblxuICBzd2l0Y2hUb1Bhc3N3b3JkUGF5KCk6IHZvaWQge1xuICAgIC8vIENsb3NlIGFueSBvcGVuIG1vZGFscyBhbmQgc2hvdyBwYXNzd29yZCBtb2RhbFxuICAgIHRoaXMuY2xvc2VTdGF0dXNNb2RhbCgpXG4gICAgdGhpcy5zaG93UGFzc3dvcmRNb2RhbCgpXG4gIH1cblxuICBzaG93UGF5bWVudFN1Y2Nlc3MoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaGFzU3RhdHVzSWNvblRhcmdldCkge1xuICAgICAgdGhpcy5zdGF0dXNJY29uVGFyZ2V0LnRleHRDb250ZW50ID0gJ1x1MjcxMydcbiAgICB9XG4gICAgaWYgKHRoaXMuaGFzU3RhdHVzVGV4dFRhcmdldCkge1xuICAgICAgdGhpcy5zdGF0dXNUZXh0VGFyZ2V0LnRleHRDb250ZW50ID0gJ1x1NEVEOFx1NkIzRVx1NjIxMFx1NTI5RidcbiAgICB9XG4gICAgaWYgKHRoaXMuaGFzU3RhdHVzRG90c1RhcmdldCkge1xuICAgICAgdGhpcy5zdGF0dXNEb3RzVGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICB9XG4gIH1cblxuICBjbG9zZVN0YXR1c01vZGFsKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmhhc1N0YXR1c01vZGFsVGFyZ2V0KSB7XG4gICAgICB0aGlzLnN0YXR1c01vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXIge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcInRhYlwiXVxuICBcbiAgZGVjbGFyZSByZWFkb25seSB0YWJUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIHByaXZhdGUgYWN0aXZlVGFiVHlwZTogc3RyaW5nID0gJ2RvbWVzdGljJ1xuICBcbiAgY29ubmVjdCgpIHtcbiAgICAvLyBcdTUyMURcdTU5Q0JcdTUzMTZcdTY1RjZcdThCRkJcdTUzRDZcdTVGNTNcdTUyNERcdTZGQzBcdTZEM0JcdTc2ODRcdTY4MDdcdTdCN0VcbiAgICBjb25zdCBhY3RpdmVUYWIgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtdGFiLXR5cGVdLmJnLXdoaXRlJykgYXMgSFRNTEVsZW1lbnRcbiAgICB0aGlzLmFjdGl2ZVRhYlR5cGUgPSBhY3RpdmVUYWI/LmRhdGFzZXQudGFiVHlwZSB8fCAnZG9tZXN0aWMnXG4gICAgXG4gICAgLy8gTGlzdGVuIGZvciBjaXR5IHNlbGVjdG9yIGludGVybmF0aW9uYWwgc3dpdGNoIGV2ZW50XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2l0eS1zZWxlY3Rvcjpzd2l0Y2gtdG8taW50ZXJuYXRpb25hbCcsIHRoaXMuaGFuZGxlSW50ZXJuYXRpb25hbFN3aXRjaC5iaW5kKHRoaXMpKVxuICB9XG4gIFxuICBkaXNjb25uZWN0KCkge1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NpdHktc2VsZWN0b3I6c3dpdGNoLXRvLWludGVybmF0aW9uYWwnLCB0aGlzLmhhbmRsZUludGVybmF0aW9uYWxTd2l0Y2guYmluZCh0aGlzKSlcbiAgfVxuICBcbiAgLy8gSGFuZGxlIGludGVybmF0aW9uYWwgc3dpdGNoIGZyb20gY2l0eSBzZWxlY3RvclxuICBwcml2YXRlIGhhbmRsZUludGVybmF0aW9uYWxTd2l0Y2goKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ0hvdGVsIHRhYnM6IFJlY2VpdmVkIHN3aXRjaCB0byBpbnRlcm5hdGlvbmFsIGV2ZW50JylcbiAgICAvLyBGaW5kIGFuZCBjbGljayB0aGUgaW50ZXJuYXRpb25hbCB0YWJcbiAgICBjb25zdCBpbnRlcm5hdGlvbmFsVGFiID0gdGhpcy50YWJUYXJnZXRzLmZpbmQodGFiID0+IHRhYi5kYXRhc2V0LnRhYlR5cGUgPT09ICdpbnRlcm5hdGlvbmFsJylcbiAgICBpZiAoaW50ZXJuYXRpb25hbFRhYiAmJiB0aGlzLmFjdGl2ZVRhYlR5cGUgIT09ICdpbnRlcm5hdGlvbmFsJykge1xuICAgICAgLy8gU2ltdWxhdGUgY2xpY2sgdG8gdHJpZ2dlciB0YWIgc3dpdGNoXG4gICAgICBpbnRlcm5hdGlvbmFsVGFiLmNsaWNrKClcbiAgICB9XG4gIH1cblxuICBzd2l0Y2hUYWIoZXZlbnQ6IEV2ZW50KSB7XG4gICAgY29uc3QgY2xpY2tlZFRhYiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBuZXdUYWJUeXBlID0gY2xpY2tlZFRhYi5kYXRhc2V0LnRhYlR5cGVcbiAgICBcbiAgICBpZiAoIW5ld1RhYlR5cGUpIHJldHVyblxuICAgIFxuICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NzBCOVx1NTFGQlx1NzY4NFx1NjYyRlx1NUY1M1x1NTI0RFx1NkZDMFx1NkQzQlx1NzY4NFx1NjgwN1x1N0I3RVx1RkYwQ1x1NEUwRFx1NTA1QVx1NEVGQlx1NEY1NVx1NjRDRFx1NEY1Q1xuICAgIGlmIChuZXdUYWJUeXBlID09PSB0aGlzLmFjdGl2ZVRhYlR5cGUpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBcdTY2RjRcdTY1QjBcdTZGQzBcdTZEM0JcdTcyQjZcdTYwMDFcbiAgICB0aGlzLmFjdGl2ZVRhYlR5cGUgPSBuZXdUYWJUeXBlXG4gICAgXG4gICAgLy8gXHU3OUZCXHU5NjY0XHU2MjQwXHU2NzA5XHU2ODA3XHU3QjdFXHU3Njg0XHU2RkMwXHU2RDNCXHU2ODM3XHU1RjBGXG4gICAgdGhpcy50YWJUYXJnZXRzLmZvckVhY2goKHRhYjogSFRNTEVsZW1lbnQpID0+IHtcbiAgICAgIHRhYi5jbGFzc0xpc3QucmVtb3ZlKCdiZy13aGl0ZScsICdyb3VuZGVkLXQtWzEycHhdJywgJ3B4LTMnLCAncHktMi41JywgJ3JlbGF0aXZlJylcbiAgICAgIHRhYi5jbGFzc0xpc3QuYWRkKCdweC0yJywgJ3B5LTInKVxuICAgICAgXG4gICAgICBjb25zdCBzcGFuID0gdGFiLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKVxuICAgICAgaWYgKHNwYW4pIHtcbiAgICAgICAgc3Bhbi5jbGFzc05hbWUgPSAndGV4dC1bMTNweF0gZm9udC1tZWRpdW0gdGV4dC1bIzY2NjY2Nl0nXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjYyRiBidXR0b25cdUZGMENcdTc4NkVcdTRGRERcdTY4MzdcdTVGMEZcdTZCNjNcdTc4NkVcbiAgICAgIGlmICh0YWIudGFnTmFtZSA9PT0gJ0JVVFRPTicpIHtcbiAgICAgICAgdGFiLmNsYXNzTGlzdC5hZGQoJ3RleHQtWzEzcHhdJywgJ2ZvbnQtbWVkaXVtJywgJ3RleHQtWyM2NjY2NjZdJywgJ2N1cnNvci1wb2ludGVyJywgJ3doaXRlc3BhY2Utbm93cmFwJylcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIC8vIFx1NEUzQVx1ODhBQlx1NzBCOVx1NTFGQlx1NzY4NFx1NjgwN1x1N0I3RVx1NkRGQlx1NTJBMFx1NkZDMFx1NkQzQlx1NjgzN1x1NUYwRlxuICAgIGNsaWNrZWRUYWIuY2xhc3NMaXN0LnJlbW92ZSgncHgtMicsICdweS0yJylcbiAgICBjbGlja2VkVGFiLmNsYXNzTGlzdC5hZGQoJ3JlbGF0aXZlJywgJ2JnLXdoaXRlJywgJ3JvdW5kZWQtdC1bMTJweF0nLCAncHgtMycsICdweS0yLjUnKVxuICAgIFxuICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjYyRiBidXR0b25cdUZGMENcdTk3MDBcdTg5ODFcdTUyMUJcdTVFRkFcdTY1QjBcdTc2ODRcdTdFRDNcdTY3ODRcbiAgICBpZiAoY2xpY2tlZFRhYi50YWdOYW1lID09PSAnQlVUVE9OJykge1xuICAgICAgY29uc3QgbGFiZWwgPSBjbGlja2VkVGFiLnRleHRDb250ZW50Py50cmltKCkgfHwgJydcbiAgICAgIGNsaWNrZWRUYWIuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInRleHQtWzE1cHhdIGZvbnQtYm9sZCB0ZXh0LVsjMWExYTFhXSBsZWFkaW5nLXRpZ2h0IHdoaXRlc3BhY2Utbm93cmFwXCI+JHtsYWJlbH08L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgYFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBcdTU5ODJcdTY3OUNcdTVERjJcdTdFQ0ZcdTY2MkYgZGl2XHVGRjBDXHU1M0VBXHU5NzAwXHU4OTgxXHU2NkY0XHU2NUIwIHNwYW5cbiAgICAgIGNvbnN0IHNwYW4gPSBjbGlja2VkVGFiLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKVxuICAgICAgaWYgKHNwYW4pIHtcbiAgICAgICAgc3Bhbi5jbGFzc05hbWUgPSAndGV4dC1bMTVweF0gZm9udC1ib2xkIHRleHQtWyMxYTFhMWFdIGxlYWRpbmctdGlnaHQgd2hpdGVzcGFjZS1ub3dyYXAnXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFx1ODlFNlx1NTNEMVx1N0M3Qlx1NTc4Qlx1NTIwN1x1NjM2Mlx1NEU4Qlx1NEVGNlx1RkYwQ1x1NEY5Qlx1NTE3Nlx1NEVENlx1NjNBN1x1NTIzNlx1NTY2OFx1NzZEMVx1NTQyQ1xuICAgIHRoaXMuZGlzcGF0Y2goJ3R5cGVDaGFuZ2VkJywgeyBkZXRhaWw6IHsgdHlwZTogbmV3VGFiVHlwZSB9IH0pXG4gICAgXG4gICAgLy8gXHU2ODM5XHU2MzZFXHU3QzdCXHU1NzhCXHU3QjVCXHU5MDA5XHU5MTUyXHU1RTk3XHU1MjE3XHU4ODY4XG4gICAgdGhpcy5maWx0ZXJIb3RlbHMobmV3VGFiVHlwZSlcbiAgfVxuICBcbiAgZmlsdGVySG90ZWxzKHR5cGU6IHN0cmluZykge1xuICAgIC8vIFx1NjgzOVx1NjM2RVx1N0M3Qlx1NTc4Qlx1N0I1Qlx1OTAwOVx1OTE1Mlx1NUU5N1xuICAgIC8vIGRvbWVzdGljOiBcdTU2RkRcdTUxODVcdTU3Q0VcdTVFMDJcbiAgICAvLyBpbnRlcm5hdGlvbmFsOiBcdTU2RkRcdTU5MTZcdTU0OENcdTRFMkRcdTU2RkRcdTZFMkZcdTZGQjNcbiAgICAvLyBob3VybHk6IFx1OTQ5Rlx1NzBCOVx1NjIzRlx1RkYwOFx1NjdFNVx1OEJFMlx1NjI0MFx1NjcwOVx1NjcwOVx1OTQ5Rlx1NzBCOVx1NjIzRlx1NzY4NFx1OTE1Mlx1NUU5N1x1NTQ4Q1x1NkMxMVx1NUJCRlx1RkYwOVxuICAgIC8vIGhvbWVzdGF5OiBcdTZDMTFcdTVCQkZcbiAgICBcbiAgICBjb25zb2xlLmxvZyhgXHU1MjA3XHU2MzYyXHU1MjMwXHU3QzdCXHU1NzhCOiAke3R5cGV9YClcbiAgICBcbiAgICAvLyBcdTY3ODRcdTVFRkEgVVJMIFx1NTNDMlx1NjU3MFxuICAgIGNvbnN0IGN1cnJlbnRQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpXG4gICAgXG4gICAgLy8gXHU0RUNFIGNpdHktc2VsZWN0b3IgXHU2M0E3XHU1MjM2XHU1NjY4XHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU5MDA5XHU2MkU5XHU3Njg0XHU1N0NFXHU1RTAyXG4gICAgY29uc3QgY2l0eVNlbGVjdG9yRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNvbnRyb2xsZXIqPVwiY2l0eS1zZWxlY3RvclwiXScpXG4gICAgaWYgKGNpdHlTZWxlY3RvckVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IGRlcGFydHVyZUNpdHlJbnB1dCA9IGNpdHlTZWxlY3RvckVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtY2l0eS1zZWxlY3Rvci10YXJnZXQ9XCJkZXBhcnR1cmVDaXR5SW5wdXRcIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgICBpZiAoZGVwYXJ0dXJlQ2l0eUlucHV0ICYmIGRlcGFydHVyZUNpdHlJbnB1dC52YWx1ZSkge1xuICAgICAgICAvLyBcdTVDMDZcdTkwMDlcdTYyRTlcdTc2ODRcdTU3Q0VcdTVFMDJcdTZERkJcdTUyQTBcdTUyMzAgVVJMIFx1NTNDMlx1NjU3MFx1NEUyRFxuICAgICAgICBjdXJyZW50UGFyYW1zLnNldCgnY2l0eScsIGRlcGFydHVyZUNpdHlJbnB1dC52YWx1ZSlcbiAgICAgICAgY29uc29sZS5sb2coYFx1NEZERFx1NzU1OVx1OTAwOVx1NjJFOVx1NzY4NFx1NTdDRVx1NUUwMjogJHtkZXBhcnR1cmVDaXR5SW5wdXQudmFsdWV9YClcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gXHU2RTA1XHU5NjY0XHU1M0VGXHU4MEZEXHU1MUIyXHU3QTgxXHU3Njg0XHU1M0MyXHU2NTcwXG4gICAgY3VycmVudFBhcmFtcy5kZWxldGUoJ3R5cGUnKVxuICAgIGN1cnJlbnRQYXJhbXMuZGVsZXRlKCdyb29tX2NhdGVnb3J5JylcbiAgICBcbiAgICAvLyBcdThCQkVcdTdGNkUgbG9jYXRpb25fdHlwZSBcdTU0OENcdTdCNUJcdTkwMDlcdTUzQzJcdTY1NzBcbiAgICBpZiAodHlwZSA9PT0gJ2RvbWVzdGljJykge1xuICAgICAgY3VycmVudFBhcmFtcy5zZXQoJ2xvY2F0aW9uX3R5cGUnLCAnZG9tZXN0aWMnKVxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2ludGVybmF0aW9uYWwnKSB7XG4gICAgICBjdXJyZW50UGFyYW1zLnNldCgnbG9jYXRpb25fdHlwZScsICdpbnRlcm5hdGlvbmFsJylcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdob3VybHknKSB7XG4gICAgICAvLyBcdTk0OUZcdTcwQjlcdTYyM0ZcdUZGMUFcdTRGN0ZcdTc1Mjggcm9vbV9jYXRlZ29yeSBcdTUzQzJcdTY1NzBcdTdCNUJcdTkwMDlcdTY3MDlcdTk0OUZcdTcwQjlcdTYyM0ZcdTc2ODRcdTRGNEZcdTVCQkZcdTU3M0FcdTYyNDBcbiAgICAgIGN1cnJlbnRQYXJhbXMuc2V0KCdsb2NhdGlvbl90eXBlJywgJ2RvbWVzdGljJylcbiAgICAgIGN1cnJlbnRQYXJhbXMuc2V0KCdyb29tX2NhdGVnb3J5JywgJ2hvdXJseScpXG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnaG9tZXN0YXknKSB7XG4gICAgICAvLyBcdTZDMTFcdTVCQkZcdUZGMUFcdTRGN0ZcdTc1MjggdHlwZSBcdTUzQzJcdTY1NzBcdTdCNUJcdTkwMDlcdTRGNEZcdTVCQkZcdTdDN0JcdTU3OEJcbiAgICAgIGN1cnJlbnRQYXJhbXMuc2V0KCdsb2NhdGlvbl90eXBlJywgJ2RvbWVzdGljJylcbiAgICAgIGN1cnJlbnRQYXJhbXMuc2V0KCd0eXBlJywgJ2hvbWVzdGF5JylcbiAgICB9XG4gICAgXG4gICAgLy8gXHU5MUNEXHU2NUIwXHU1MkEwXHU4RjdEXHU5ODc1XHU5NzYyXHU1RTI2XHU2NUIwXHU1M0MyXHU2NTcwXG4gICAgY29uc3QgbmV3VXJsID0gYCR7d2luZG93LmxvY2F0aW9uLnBhdGhuYW1lfT8ke2N1cnJlbnRQYXJhbXMudG9TdHJpbmcoKX1gXG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBuZXdVcmxcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwibW9kYWxcIixcbiAgICBcImd1ZXN0TmFtZUlucHV0XCIsXG4gICAgXCJndWVzdFBob25lSW5wdXRcIixcbiAgICBcInNlbGVjdGVkUGFzc2VuZ2VyXCIsXG4gICAgXCJjaGVja2JveFwiXG4gIF1cblxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIHNlbGVjdGVkUGFzc2VuZ2VySWQ6IFN0cmluZyxcbiAgICBzZWxlY3RlZFBhc3Nlbmdlck5hbWU6IFN0cmluZyxcbiAgICBzZWxlY3RlZFBhc3NlbmdlclBob25lOiBTdHJpbmdcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZ3Vlc3ROYW1lSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBndWVzdFBob25lSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzZWxlY3RlZFBhc3NlbmdlclRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNTZWxlY3RlZFBhc3NlbmdlclRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGNoZWNrYm94VGFyZ2V0czogSFRNTElucHV0RWxlbWVudFtdXG5cbiAgZGVjbGFyZSBzZWxlY3RlZFBhc3NlbmdlcklkVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHNlbGVjdGVkUGFzc2VuZ2VyTmFtZVZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBzZWxlY3RlZFBhc3NlbmdlclBob25lVmFsdWU6IHN0cmluZ1xuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJIb3RlbFRyYXZlbGVyU2VsZWN0b3IgY29ubmVjdGVkXCIpXG4gIH1cblxuICAvLyBPcGVuIG1vZGFsXG4gIG9wZW5Nb2RhbCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIk9wZW5pbmcgdHJhdmVsZXIgc2VsZWN0b3IgbW9kYWxcIilcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nXG4gIH1cblxuICAvLyBDbG9zZSBtb2RhbFxuICBjbG9zZU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJydcbiAgfVxuXG4gIC8vIFRvZ2dsZSBwYXNzZW5nZXIgc2VsZWN0aW9uIHZpYSBjaGVja2JveFxuICB0b2dnbGVQYXNzZW5nZXIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY2hlY2tib3ggPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBwYXNzZW5nZXJJZCA9IGNoZWNrYm94LmRhdGFzZXQucGFzc2VuZ2VySWQgfHwgJydcbiAgICBjb25zdCBwYXNzZW5nZXJOYW1lID0gY2hlY2tib3guZGF0YXNldC5wYXNzZW5nZXJOYW1lIHx8ICcnXG4gICAgY29uc3QgcGFzc2VuZ2VyUGhvbmUgPSBjaGVja2JveC5kYXRhc2V0LnBhc3NlbmdlclBob25lIHx8ICcnXG5cbiAgICBpZiAoY2hlY2tib3guY2hlY2tlZCkge1xuICAgICAgLy8gVW5jaGVjayBhbGwgb3RoZXIgY2hlY2tib3hlcyAob25seSBhbGxvdyBvbmUgc2VsZWN0aW9uKVxuICAgICAgdGhpcy5jaGVja2JveFRhcmdldHMuZm9yRWFjaChjYiA9PiB7XG4gICAgICAgIGlmIChjYiAhPT0gY2hlY2tib3gpIHtcbiAgICAgICAgICBjYi5jaGVja2VkID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgY29uc29sZS5sb2coXCJTZWxlY3RlZCBwYXNzZW5nZXI6XCIsIHsgcGFzc2VuZ2VySWQsIHBhc3Nlbmdlck5hbWUsIHBhc3NlbmdlclBob25lIH0pXG5cbiAgICAgIC8vIFN0b3JlIHNlbGVjdGVkIHZhbHVlc1xuICAgICAgdGhpcy5zZWxlY3RlZFBhc3NlbmdlcklkVmFsdWUgPSBwYXNzZW5nZXJJZFxuICAgICAgdGhpcy5zZWxlY3RlZFBhc3Nlbmdlck5hbWVWYWx1ZSA9IHBhc3Nlbmdlck5hbWVcbiAgICAgIHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJQaG9uZVZhbHVlID0gcGFzc2VuZ2VyUGhvbmVcblxuICAgICAgLy8gVXBkYXRlIGZvcm0gaW5wdXRzXG4gICAgICB0aGlzLmd1ZXN0TmFtZUlucHV0VGFyZ2V0LnZhbHVlID0gcGFzc2VuZ2VyTmFtZVxuICAgICAgdGhpcy5ndWVzdFBob25lSW5wdXRUYXJnZXQudmFsdWUgPSBwYXNzZW5nZXJQaG9uZVxuXG4gICAgICAvLyBVcGRhdGUgc2VsZWN0ZWQgZGlzcGxheSBpZiBleGlzdHNcbiAgICAgIGlmICh0aGlzLmhhc1NlbGVjdGVkUGFzc2VuZ2VyVGFyZ2V0KSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJUYXJnZXQudGV4dENvbnRlbnQgPSBwYXNzZW5nZXJOYW1lXG4gICAgICB9XG5cbiAgICAgIC8vIENsb3NlIG1vZGFsIGFmdGVyIHNlbGVjdGlvblxuICAgICAgdGhpcy5jbG9zZU1vZGFsKClcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVW5jaGVja2VkIC0gY2xlYXIgZm9ybSBpbnB1dHNcbiAgICAgIGNvbnNvbGUubG9nKFwiVW5zZWxlY3RlZCBwYXNzZW5nZXJcIilcbiAgICAgIFxuICAgICAgdGhpcy5zZWxlY3RlZFBhc3NlbmdlcklkVmFsdWUgPSAnJ1xuICAgICAgdGhpcy5zZWxlY3RlZFBhc3Nlbmdlck5hbWVWYWx1ZSA9ICcnXG4gICAgICB0aGlzLnNlbGVjdGVkUGFzc2VuZ2VyUGhvbmVWYWx1ZSA9ICcnXG5cbiAgICAgIC8vIENsZWFyIGZvcm0gaW5wdXRzXG4gICAgICB0aGlzLmd1ZXN0TmFtZUlucHV0VGFyZ2V0LnZhbHVlID0gJydcbiAgICAgIHRoaXMuZ3Vlc3RQaG9uZUlucHV0VGFyZ2V0LnZhbHVlID0gJydcblxuICAgICAgLy8gQ2xlYXIgc2VsZWN0ZWQgZGlzcGxheSBpZiBleGlzdHNcbiAgICAgIGlmICh0aGlzLmhhc1NlbGVjdGVkUGFzc2VuZ2VyVGFyZ2V0KSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJUYXJnZXQudGV4dENvbnRlbnQgPSAnJ1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIE1hbnVhbCBpbnB1dCAtIGNsZWFyIHNlbGVjdGlvblxuICBjbGVhclNlbGVjdGlvbigpOiB2b2lkIHtcbiAgICB0aGlzLnNlbGVjdGVkUGFzc2VuZ2VySWRWYWx1ZSA9ICcnXG4gICAgdGhpcy5zZWxlY3RlZFBhc3Nlbmdlck5hbWVWYWx1ZSA9ICcnXG4gICAgdGhpcy5zZWxlY3RlZFBhc3NlbmdlclBob25lVmFsdWUgPSAnJ1xuICB9XG5cbiAgLy8gU3RvcCBwcm9wYWdhdGlvbiBmb3IgaW5uZXIgY2xpY2tzXG4gIHN0b3BQcm9wYWdhdGlvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICAvLyBBdXRvLWRpc21pc3MgYWZ0ZXIgMiBzZWNvbmRzXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYW5pbWF0ZS1mYWRlLW91dCcpXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KVxuICAgICAgICB9XG4gICAgICB9LCAzMDApXG4gICAgfSwgMjAwMClcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuLy8gQXV0b21hdGljYWxseSBkaXNwbGF5cyBhIHRvYXN0IG1lc3NhZ2Ugd2hlbiB0aGUgY29udHJvbGxlciBjb25uZWN0c1xuLy8gVXNlZCB3aXRoIFR1cmJvIFN0cmVhbSByZXNwb25zZXMgdG8gc2hvdyB2YWxpZGF0aW9uIGVycm9yc1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyIHtcbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBtZXNzYWdlOiBTdHJpbmdcbiAgfVxuXG4gIGRlY2xhcmUgbWVzc2FnZVZhbHVlOiBzdHJpbmdcblxuICBjb25uZWN0KCkge1xuICAgIC8vIFNob3cgdGhlIHRvYXN0IGltbWVkaWF0ZWx5IHdoZW4gZWxlbWVudCBpcyBpbnNlcnRlZFxuICAgIGlmICh0aGlzLm1lc3NhZ2VWYWx1ZSAmJiB3aW5kb3cuc2hvd1RvYXN0KSB7XG4gICAgICB3aW5kb3cuc2hvd1RvYXN0KHRoaXMubWVzc2FnZVZhbHVlKVxuICAgIH1cbiAgICBcbiAgICAvLyBSZW1vdmUgdGhlIHRyaWdnZXIgZWxlbWVudCBmcm9tIERPTVxuICAgIHRoaXMuZWxlbWVudC5yZW1vdmUoKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJpbnN1cmFuY2VNb2RhbFwiLCBcImNvbmZpcm1Nb2RhbFwiLCBcImZvcm1cIiwgXCJ0b3RhbFByaWNlQW1vdW50XCIsIFwicm9vbXNDb3VudFwiLCBcInJvb21zSW5wdXRcIl1cblxuICBkZWNsYXJlIHJlYWRvbmx5IGluc3VyYW5jZU1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNvbmZpcm1Nb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBmb3JtVGFyZ2V0OiBIVE1MRm9ybUVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0b3RhbFByaWNlQW1vdW50VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHJvb21zQ291bnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgcm9vbXNJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuXG4gIC8vIEhhbmRsZSBpbnN1cmFuY2Ugb3B0aW9uIHNlbGVjdGlvbiBpbiBmb3JtXG4gIHNlbGVjdEluc3VyYW5jZU9wdGlvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCByYWRpbyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IGluc3VyYW5jZVR5cGUgPSByYWRpby5kYXRhc2V0Lmluc3VyYW5jZVR5cGUgfHwgJ25vbmUnXG4gICAgY29uc3QgaW5zdXJhbmNlUHJpY2UgPSByYWRpby5kYXRhc2V0Lmluc3VyYW5jZVByaWNlIHx8ICcwJ1xuICAgIFxuICAgIC8vIFVwZGF0ZSBoaWRkZW4gZmllbGRzXG4gICAgdGhpcy5zZXRJbnN1cmFuY2VWYWx1ZXMoaW5zdXJhbmNlVHlwZSwgaW5zdXJhbmNlUHJpY2UpXG4gICAgXG4gICAgLy8gVXBkYXRlIHZpc3VhbCBpbmRpY2F0b3JzIChib3JkZXIgYW5kIGNoZWNrbWFyaylcbiAgICBjb25zdCBhbGxDYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWluc3VyYW5jZS1jYXJkXScpXG4gICAgYWxsQ2FyZHMuZm9yRWFjaChjYXJkID0+IHtcbiAgICAgIGNhcmQuY2xhc3NMaXN0LnJlbW92ZSgnYm9yZGVyLW9yYW5nZS00MDAnLCAnYm9yZGVyLWdyYXktNDAwJylcbiAgICAgIGNhcmQuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLTInLCAnYm9yZGVyLWdyYXktMzAwJylcbiAgICB9KVxuICAgIFxuICAgIC8vIEFkZCBzdHlsZSB0byBzZWxlY3RlZCBjYXJkXG4gICAgY29uc3Qgc2VsZWN0ZWRDYXJkID0gcmFkaW8uY2xvc2VzdCgnW2RhdGEtaW5zdXJhbmNlLWNhcmRdJykgYXMgSFRNTEVsZW1lbnRcbiAgICBpZiAoc2VsZWN0ZWRDYXJkKSB7XG4gICAgICBzZWxlY3RlZENhcmQuY2xhc3NMaXN0LnJlbW92ZSgnYm9yZGVyLWdyYXktMzAwJylcbiAgICAgIGlmIChpbnN1cmFuY2VUeXBlID09PSAnbm9uZScpIHtcbiAgICAgICAgc2VsZWN0ZWRDYXJkLmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1ncmF5LTQwMCcpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxlY3RlZENhcmQuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLW9yYW5nZS00MDAnKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB0b3RhbCBwcmljZVxuICAgIHRoaXMudXBkYXRlVG90YWxQcmljZSgpXG4gIH1cblxuICAvLyBVcGRhdGUgdG90YWwgcHJpY2UgZGlzcGxheVxuICBwcml2YXRlIHVwZGF0ZVRvdGFsUHJpY2UoKTogdm9pZCB7XG4gICAgLy8gUmV1c2UgdGhlIHVwZGF0ZVRvdGFsUHJpY2VXaXRoUm9vbXMgbWV0aG9kIGZvciBjb25zaXN0ZW5jeVxuICAgIHRoaXMudXBkYXRlVG90YWxQcmljZVdpdGhSb29tcygpXG4gIH1cblxuICBzZXRJbnN1cmFuY2VWYWx1ZXMoaW5zdXJhbmNlVHlwZTogc3RyaW5nLCBpbnN1cmFuY2VQcmljZTogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgaW5zdXJhbmNlVHlwZUZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvdGVsX2Jvb2tpbmdfaW5zdXJhbmNlX3R5cGUnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgaW5zdXJhbmNlUHJpY2VGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdob3RlbF9ib29raW5nX2luc3VyYW5jZV9wcmljZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBcbiAgICBpZiAoaW5zdXJhbmNlVHlwZUZpZWxkKSB7XG4gICAgICBpbnN1cmFuY2VUeXBlRmllbGQudmFsdWUgPSBpbnN1cmFuY2VUeXBlXG4gICAgfVxuICAgIFxuICAgIGlmIChpbnN1cmFuY2VQcmljZUZpZWxkKSB7XG4gICAgICBpbnN1cmFuY2VQcmljZUZpZWxkLnZhbHVlID0gaW5zdXJhbmNlUHJpY2VcbiAgICB9XG4gIH1cblxuICAvLyBIYW5kbGUgc3VibWl0IGJ1dHRvbiBjbGlja1xuICBoYW5kbGVTdWJtaXQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIFxuICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIGZpZWxkc1xuICAgIGNvbnN0IGd1ZXN0TmFtZUZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvdGVsX2Jvb2tpbmdfZ3Vlc3RfbmFtZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBndWVzdFBob25lRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaG90ZWxfYm9va2luZ19ndWVzdF9waG9uZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBcbiAgICBjb25zdCBndWVzdE5hbWUgPSBndWVzdE5hbWVGaWVsZD8udmFsdWU/LnRyaW0oKSB8fCAnJ1xuICAgIGNvbnN0IGd1ZXN0UGhvbmUgPSBndWVzdFBob25lRmllbGQ/LnZhbHVlPy50cmltKCkgfHwgJydcbiAgICBcbiAgICBpZiAoIWd1ZXN0TmFtZSkge1xuICAgICAgYWxlcnQoJ1x1OEJGN1x1NTg2Qlx1NTE5OVx1NTE2NVx1NEY0Rlx1NEVCQVx1NTlEM1x1NTQwRCcpXG4gICAgICBndWVzdE5hbWVGaWVsZD8uZm9jdXMoKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIGlmICghZ3Vlc3RQaG9uZSkge1xuICAgICAgYWxlcnQoJ1x1OEJGN1x1NTg2Qlx1NTE5OVx1ODA1NFx1N0NGQlx1NjI0Qlx1NjczQScpXG4gICAgICBndWVzdFBob25lRmllbGQ/LmZvY3VzKClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBWYWxpZGF0ZSBwaG9uZSBudW1iZXIgZm9ybWF0IChzaW1wbGUgdmFsaWRhdGlvbilcbiAgICBjb25zdCBwaG9uZVJlZ2V4ID0gL14xWzMtOV1cXGR7OX0kL1xuICAgIGlmICghcGhvbmVSZWdleC50ZXN0KGd1ZXN0UGhvbmUpKSB7XG4gICAgICBhbGVydCgnXHU4QkY3XHU1ODZCXHU1MTk5XHU2QjYzXHU3ODZFXHU3Njg0XHU2MjRCXHU2NzNBXHU1M0Y3XHU3ODAxJylcbiAgICAgIGd1ZXN0UGhvbmVGaWVsZD8uZm9jdXMoKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGlmIHVzZXIgaGFzIHNlbGVjdGVkIGluc3VyYW5jZVxuICAgIGNvbnN0IGluc3VyYW5jZVR5cGVGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdob3RlbF9ib29raW5nX2luc3VyYW5jZV90eXBlJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IGluc3VyYW5jZVR5cGUgPSBpbnN1cmFuY2VUeXBlRmllbGQ/LnZhbHVlIHx8ICdub25lJ1xuICAgIFxuICAgIGlmIChpbnN1cmFuY2VUeXBlID09PSAnbm9uZScpIHtcbiAgICAgIC8vIFVzZXIgaGFzbid0IHNlbGVjdGVkIGluc3VyYW5jZSwgc2hvdyBpbnN1cmFuY2UgcmVjb21tZW5kYXRpb24gbW9kYWxcbiAgICAgIHRoaXMuc2hvd0luc3VyYW5jZU1vZGFsKClcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVXNlciBoYXMgc2VsZWN0ZWQgaW5zdXJhbmNlLCBwcm9jZWVkIHRvIGNvbmZpcm1hdGlvblxuICAgICAgdGhpcy5zaG93Q29uZmlybU1vZGFsKClcbiAgICB9XG4gIH1cblxuICBzaG93SW5zdXJhbmNlTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5pbnN1cmFuY2VNb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICB9XG5cbiAgY2xvc2VJbnN1cmFuY2VNb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLmluc3VyYW5jZU1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gIH1cblxuICAvLyBTZWxlY3QgcmVjb21tZW5kZWQgaW5zdXJhbmNlIGZyb20gbW9kYWxcbiAgc2VsZWN0UmVjb21tZW5kZWRJbnN1cmFuY2UoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGNvbnN0IGluc3VyYW5jZVR5cGUgPSBidXR0b24uZGF0YXNldC5pbnN1cmFuY2VUeXBlIHx8ICdob3RlbF9jYW5jZWxsYXRpb24nXG4gICAgY29uc3QgaW5zdXJhbmNlUHJpY2UgPSBidXR0b24uZGF0YXNldC5pbnN1cmFuY2VQcmljZSB8fCAnMTYnXG4gICAgXG4gICAgLy8gVXBkYXRlIGluc3VyYW5jZSB2YWx1ZXNcbiAgICB0aGlzLnNldEluc3VyYW5jZVZhbHVlcyhpbnN1cmFuY2VUeXBlLCBpbnN1cmFuY2VQcmljZSlcbiAgICBcbiAgICAvLyBVcGRhdGUgVUkgdG8gc2hvdyBzZWxlY3RlZCBpbnN1cmFuY2VcbiAgICBjb25zdCB0YXJnZXRSYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGlucHV0W25hbWU9XCJpbnN1cmFuY2Vfc2VsZWN0aW9uXCJdW3ZhbHVlPVwiJHtpbnN1cmFuY2VUeXBlfVwiXWApIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBpZiAodGFyZ2V0UmFkaW8pIHtcbiAgICAgIHRhcmdldFJhZGlvLmNoZWNrZWQgPSB0cnVlXG4gICAgICAvLyBUcmlnZ2VyIGNoYW5nZSBldmVudCB0byB1cGRhdGUgdmlzdWFsIGluZGljYXRvcnNcbiAgICAgIHRhcmdldFJhZGlvLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdjaGFuZ2UnLCB7IGJ1YmJsZXM6IHRydWUgfSkpXG4gICAgfVxuICAgIFxuICAgIC8vIENsb3NlIGluc3VyYW5jZSBtb2RhbCBhbmQgc2hvdyBjb25maXJtYXRpb25cbiAgICB0aGlzLmNsb3NlSW5zdXJhbmNlTW9kYWwoKVxuICAgIHRoaXMuc2hvd0NvbmZpcm1Nb2RhbCgpXG4gIH1cblxuICAvLyBTa2lwIGluc3VyYW5jZSBzZWxlY3Rpb25cbiAgc2tpcEluc3VyYW5jZSgpOiB2b2lkIHtcbiAgICB0aGlzLnNldEluc3VyYW5jZVZhbHVlcygnbm9uZScsICcwJylcbiAgICB0aGlzLmNsb3NlSW5zdXJhbmNlTW9kYWwoKVxuICAgIHRoaXMuc2hvd0NvbmZpcm1Nb2RhbCgpXG4gIH1cblxuICBzaG93Q29uZmlybU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMuY29uZmlybU1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgXG4gICAgLy8gV2FpdCAxMCBzZWNvbmRzIHRoZW4gc3VibWl0IGZvcm0gKHNpbXVsYXRpbmcgcm9vbSBsb2NraW5nIHByb2Nlc3MpXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnN1Ym1pdEZvcm0oKVxuICAgIH0sIDEwMDAwKVxuICB9XG5cbiAgY2xvc2VDb25maXJtTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5jb25maXJtTW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgfVxuXG4gIHN1Ym1pdEZvcm0oKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ1N1Ym1pdHRpbmcgZm9ybTonLCB0aGlzLmZvcm1UYXJnZXQpXG4gICAgXG4gICAgLy8gU3VibWl0IGZvcm0gbm9ybWFsbHkgLSBsZXQgUmFpbHMgaGFuZGxlIHRoZSByZWRpcmVjdFxuICAgIHRoaXMuZm9ybVRhcmdldC5zdWJtaXQoKVxuICB9XG5cbiAgLy8gSW5jcmVhc2Ugcm9vbSBjb3VudFxuICBpbmNyZWFzZVJvb21zKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBjdXJyZW50Q291bnQgPSBwYXJzZUludCh0aGlzLnJvb21zSW5wdXRUYXJnZXQudmFsdWUgfHwgJzEnKVxuICAgIGNvbnN0IG5ld0NvdW50ID0gY3VycmVudENvdW50ICsgMVxuICAgIFxuICAgIC8vIFVwZGF0ZSBoaWRkZW4gaW5wdXQgYW5kIGRpc3BsYXlcbiAgICB0aGlzLnJvb21zSW5wdXRUYXJnZXQudmFsdWUgPSBuZXdDb3VudC50b1N0cmluZygpXG4gICAgdGhpcy5yb29tc0NvdW50VGFyZ2V0LnRleHRDb250ZW50ID0gYCR7bmV3Q291bnR9XHU5NUY0YFxuICAgIFxuICAgIC8vIFVwZGF0ZSB0b3RhbCBwcmljZVxuICAgIHRoaXMudXBkYXRlVG90YWxQcmljZVdpdGhSb29tcygpXG4gIH1cblxuICAvLyBEZWNyZWFzZSByb29tIGNvdW50XG4gIGRlY3JlYXNlUm9vbXMoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGN1cnJlbnRDb3VudCA9IHBhcnNlSW50KHRoaXMucm9vbXNJbnB1dFRhcmdldC52YWx1ZSB8fCAnMScpXG4gICAgXG4gICAgLy8gTWluaW11bSAxIHJvb21cbiAgICBpZiAoY3VycmVudENvdW50IDw9IDEpIHJldHVyblxuICAgIFxuICAgIGNvbnN0IG5ld0NvdW50ID0gY3VycmVudENvdW50IC0gMVxuICAgIFxuICAgIC8vIFVwZGF0ZSBoaWRkZW4gaW5wdXQgYW5kIGRpc3BsYXlcbiAgICB0aGlzLnJvb21zSW5wdXRUYXJnZXQudmFsdWUgPSBuZXdDb3VudC50b1N0cmluZygpXG4gICAgdGhpcy5yb29tc0NvdW50VGFyZ2V0LnRleHRDb250ZW50ID0gYCR7bmV3Q291bnR9XHU5NUY0YFxuICAgIFxuICAgIC8vIFVwZGF0ZSB0b3RhbCBwcmljZVxuICAgIHRoaXMudXBkYXRlVG90YWxQcmljZVdpdGhSb29tcygpXG4gIH1cblxuICAvLyBVcGRhdGUgdG90YWwgcHJpY2UgY29uc2lkZXJpbmcgcm9vbXMgY291bnRcbiAgcHJpdmF0ZSB1cGRhdGVUb3RhbFByaWNlV2l0aFJvb21zKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy50b3RhbFByaWNlQW1vdW50VGFyZ2V0KSByZXR1cm5cbiAgICBcbiAgICAvLyBHZXQgcm9vbSBwcmljZSBwZXIgbmlnaHQgZnJvbSBkYXRhIGF0dHJpYnV0ZVxuICAgIGNvbnN0IHJvb21QcmljZSA9IHBhcnNlRmxvYXQodGhpcy50b3RhbFByaWNlQW1vdW50VGFyZ2V0LmRhdGFzZXQucm9vbVByaWNlIHx8ICcwJylcbiAgICBjb25zdCBuaWdodHMgPSBwYXJzZUludCh0aGlzLnRvdGFsUHJpY2VBbW91bnRUYXJnZXQuZGF0YXNldC5uaWdodHMgfHwgJzEnKVxuICAgIFxuICAgIC8vIEdldCByb29tIGNvdW50XG4gICAgY29uc3Qgcm9vbXNDb3VudCA9IHBhcnNlSW50KHRoaXMucm9vbXNJbnB1dFRhcmdldC52YWx1ZSB8fCAnMScpXG4gICAgXG4gICAgLy8gR2V0IGluc3VyYW5jZSBwcmljZVxuICAgIGNvbnN0IGluc3VyYW5jZVByaWNlRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaG90ZWxfYm9va2luZ19pbnN1cmFuY2VfcHJpY2UnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgaW5zdXJhbmNlUHJpY2UgPSBwYXJzZUZsb2F0KGluc3VyYW5jZVByaWNlRmllbGQ/LnZhbHVlIHx8ICcwJylcbiAgICBcbiAgICAvLyBDYWxjdWxhdGU6IChyb29tIHByaWNlICogbmlnaHRzICogcm9vbXMpICsgaW5zdXJhbmNlXG4gICAgY29uc3QgYmFzZVByaWNlID0gcm9vbVByaWNlICogbmlnaHRzICogcm9vbXNDb3VudFxuICAgIGNvbnN0IHRvdGFsUHJpY2UgPSBiYXNlUHJpY2UgKyBpbnN1cmFuY2VQcmljZVxuICAgIFxuICAgIHRoaXMudG90YWxQcmljZUFtb3VudFRhcmdldC50ZXh0Q29udGVudCA9IHRvdGFsUHJpY2UudG9GaXhlZCgyKVxuICAgIFxuICAgIC8vIFVwZGF0ZSBiYXNlIHByaWNlIGRhdGEgYXR0cmlidXRlIGZvciBmdXR1cmUgaW5zdXJhbmNlIGNhbGN1bGF0aW9uc1xuICAgIHRoaXMudG90YWxQcmljZUFtb3VudFRhcmdldC5kYXRhc2V0LmJhc2VQcmljZSA9IGJhc2VQcmljZS50b0ZpeGVkKDIpXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcInBhY2thZ2VTZWxlY3RvclwiLFxuICAgIFwicHJpY2VEaXNwbGF5XCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgc2VsZWN0ZWRQYWNrYWdlSWQ6IE51bWJlclxuICB9XG5cbiAgLy8gRGVjbGFyZSB5b3VyIHRhcmdldHMgYW5kIHZhbHVlc1xuICBkZWNsYXJlIHJlYWRvbmx5IHBhY2thZ2VTZWxlY3RvclRhcmdldD86IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgcHJpY2VEaXNwbGF5VGFyZ2V0PzogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSBzZWxlY3RlZFBhY2thZ2VJZFZhbHVlOiBudW1iZXJcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiVG91ckRldGFpbCBjb250cm9sbGVyIGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlRvdXJEZXRhaWwgY29udHJvbGxlciBkaXNjb25uZWN0ZWRcIilcbiAgfVxuXG4gIC8vIE5hdmlnYXRlIHRvIHBhY2thZ2VzIHRhYlxuICBzZWxlY3RQYWNrYWdlKCk6IHZvaWQge1xuICAgIGNvbnN0IGN1cnJlbnRVcmwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKVxuICAgIGN1cnJlbnRVcmwuc2VhcmNoUGFyYW1zLnNldCgndGFiJywgJ3BhY2thZ2VzJylcbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGN1cnJlbnRVcmwudG9TdHJpbmcoKVxuICB9XG5cbiAgLy8gU2VsZWN0IGEgc3BlY2lmaWMgcGFja2FnZVxuICBzZWxlY3RUaGlzUGFja2FnZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgcGFja2FnZUlkID0gdGFyZ2V0LmRhdGFzZXQucGFja2FnZUlkXG4gICAgXG4gICAgaWYgKHBhY2thZ2VJZCkge1xuICAgICAgdGhpcy5zZWxlY3RlZFBhY2thZ2VJZFZhbHVlID0gcGFyc2VJbnQocGFja2FnZUlkKVxuICAgICAgXG4gICAgICAvLyBOYXZpZ2F0ZSBiYWNrIHRvIG92ZXJ2aWV3IHRhYiB3aXRoIHNlbGVjdGVkIHBhY2thZ2VcbiAgICAgIGNvbnN0IGN1cnJlbnRVcmwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKVxuICAgICAgY3VycmVudFVybC5zZWFyY2hQYXJhbXMuc2V0KCd0YWInLCAnb3ZlcnZpZXcnKVxuICAgICAgY3VycmVudFVybC5zZWFyY2hQYXJhbXMuc2V0KCdwYWNrYWdlX2lkJywgcGFja2FnZUlkKVxuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBjdXJyZW50VXJsLnRvU3RyaW5nKClcbiAgICB9XG4gIH1cblxuICAvLyBTY3JvbGwgdG8gc3BlY2lmaWMgc2VjdGlvbiAoZm9yIHNtb290aCBuYXZpZ2F0aW9uKVxuICBzY3JvbGxUb1NlY3Rpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHNlY3Rpb25JZCA9IHRhcmdldC5kYXRhc2V0LnNlY3Rpb25cbiAgICBcbiAgICBpZiAoc2VjdGlvbklkKSB7XG4gICAgICBjb25zdCBzZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VjdGlvbklkKVxuICAgICAgaWYgKHNlY3Rpb24pIHtcbiAgICAgICAgc2VjdGlvbi5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcInNsaWRlXCIsIFwiaW5kaWNhdG9yXCJdXG4gIFxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIGluZGV4OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxuICAgIGF1dG9wbGF5OiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH0sXG4gICAgaW50ZXJ2YWw6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiA1MDAwIH1cbiAgfVxuXG4gIC8vIERlY2xhcmUgeW91ciB0YXJnZXRzIGFuZCB2YWx1ZXNcbiAgZGVjbGFyZSByZWFkb25seSBzbGlkZVRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBpbmRpY2F0b3JUYXJnZXRzPzogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0luZGljYXRvclRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIGluZGV4VmFsdWU6IG51bWJlclxuICBkZWNsYXJlIHJlYWRvbmx5IGF1dG9wbGF5VmFsdWU6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBpbnRlcnZhbFZhbHVlOiBudW1iZXJcbiAgXG4gIHByaXZhdGUgYXV0b3BsYXlUaW1lcj86IG51bWJlclxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJDYXJvdXNlbCBjb250cm9sbGVyIGNvbm5lY3RlZFwiKVxuICAgIHRoaXMuc2hvd1NsaWRlKHRoaXMuaW5kZXhWYWx1ZSlcbiAgICBcbiAgICBpZiAodGhpcy5hdXRvcGxheVZhbHVlKSB7XG4gICAgICB0aGlzLnN0YXJ0QXV0b3BsYXkoKVxuICAgIH1cbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJDYXJvdXNlbCBjb250cm9sbGVyIGRpc2Nvbm5lY3RlZFwiKVxuICAgIHRoaXMuc3RvcEF1dG9wbGF5KClcbiAgfVxuXG4gIC8vIE5hdmlnYXRlIHRvIHByZXZpb3VzIHNsaWRlXG4gIHByZXZpb3VzKCk6IHZvaWQge1xuICAgIHRoaXMuc3RvcEF1dG9wbGF5KClcbiAgICBjb25zdCBuZXdJbmRleCA9IHRoaXMuaW5kZXhWYWx1ZSA+IDAgPyB0aGlzLmluZGV4VmFsdWUgLSAxIDogdGhpcy5zbGlkZVRhcmdldHMubGVuZ3RoIC0gMVxuICAgIHRoaXMuaW5kZXhWYWx1ZSA9IG5ld0luZGV4XG4gICAgdGhpcy5zaG93U2xpZGUobmV3SW5kZXgpXG4gIH1cblxuICAvLyBOYXZpZ2F0ZSB0byBuZXh0IHNsaWRlXG4gIG5leHQoKTogdm9pZCB7XG4gICAgdGhpcy5zdG9wQXV0b3BsYXkoKVxuICAgIGNvbnN0IG5ld0luZGV4ID0gdGhpcy5pbmRleFZhbHVlIDwgdGhpcy5zbGlkZVRhcmdldHMubGVuZ3RoIC0gMSA/IHRoaXMuaW5kZXhWYWx1ZSArIDEgOiAwXG4gICAgdGhpcy5pbmRleFZhbHVlID0gbmV3SW5kZXhcbiAgICB0aGlzLnNob3dTbGlkZShuZXdJbmRleClcbiAgfVxuXG4gIC8vIEdvIHRvIHNwZWNpZmljIHNsaWRlXG4gIGdvVG8oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5zdG9wQXV0b3BsYXkoKVxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KHRhcmdldC5kYXRhc2V0LmluZGV4IHx8IFwiMFwiKVxuICAgIHRoaXMuaW5kZXhWYWx1ZSA9IGluZGV4XG4gICAgdGhpcy5zaG93U2xpZGUoaW5kZXgpXG4gIH1cblxuICAvLyBTaG93IHNwZWNpZmljIHNsaWRlXG4gIHByaXZhdGUgc2hvd1NsaWRlKGluZGV4OiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBIaWRlIGFsbCBzbGlkZXNcbiAgICB0aGlzLnNsaWRlVGFyZ2V0cy5mb3JFYWNoKChzbGlkZSwgaSkgPT4ge1xuICAgICAgaWYgKGkgPT09IGluZGV4KSB7XG4gICAgICAgIHNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzbGlkZS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBVcGRhdGUgaW5kaWNhdG9ycyBpZiB0aGV5IGV4aXN0XG4gICAgaWYgKHRoaXMuaGFzSW5kaWNhdG9yVGFyZ2V0KSB7XG4gICAgICB0aGlzLmluZGljYXRvclRhcmdldHM/LmZvckVhY2goKGluZGljYXRvciwgaSkgPT4ge1xuICAgICAgICBpZiAoaSA9PT0gaW5kZXgpIHtcbiAgICAgICAgICBpbmRpY2F0b3IuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpbmRpY2F0b3IuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvLyBBdXRvcGxheSBmdW5jdGlvbmFsaXR5XG4gIHByaXZhdGUgc3RhcnRBdXRvcGxheSgpOiB2b2lkIHtcbiAgICB0aGlzLmF1dG9wbGF5VGltZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgdGhpcy5uZXh0KClcbiAgICB9LCB0aGlzLmludGVydmFsVmFsdWUpXG4gIH1cblxuICBwcml2YXRlIHN0b3BBdXRvcGxheSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5hdXRvcGxheVRpbWVyKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuYXV0b3BsYXlUaW1lcilcbiAgICAgIHRoaXMuYXV0b3BsYXlUaW1lciA9IHVuZGVmaW5lZFxuICAgIH1cbiAgfVxuXG4gIC8vIEhhbmRsZSB0b3VjaC9zd2lwZSBnZXN0dXJlc1xuICBwcml2YXRlIHRvdWNoU3RhcnRYID0gMFxuICBwcml2YXRlIHRvdWNoRW5kWCA9IDBcblxuICBoYW5kbGVUb3VjaFN0YXJ0KGV2ZW50OiBUb3VjaEV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy50b3VjaFN0YXJ0WCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnNjcmVlblhcbiAgfVxuXG4gIGhhbmRsZVRvdWNoRW5kKGV2ZW50OiBUb3VjaEV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy50b3VjaEVuZFggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5zY3JlZW5YXG4gICAgdGhpcy5oYW5kbGVTd2lwZSgpXG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVN3aXBlKCk6IHZvaWQge1xuICAgIGNvbnN0IHN3aXBlVGhyZXNob2xkID0gNTBcbiAgICBjb25zdCBkaWZmID0gdGhpcy50b3VjaFN0YXJ0WCAtIHRoaXMudG91Y2hFbmRYXG5cbiAgICBpZiAoTWF0aC5hYnMoZGlmZikgPiBzd2lwZVRocmVzaG9sZCkge1xuICAgICAgaWYgKGRpZmYgPiAwKSB7XG4gICAgICAgIC8vIFN3aXBlZCBsZWZ0IC0gbmV4dCBzbGlkZVxuICAgICAgICB0aGlzLm5leHQoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gU3dpcGVkIHJpZ2h0IC0gcHJldmlvdXMgc2xpZGVcbiAgICAgICAgdGhpcy5wcmV2aW91cygpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJ0YWJcIiwgXCJzZWN0aW9uXCJdXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgb2Zmc2V0OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMTIwIH0gLy8gVG9wIG9mZnNldCBmb3IgbmF2IGJhcnMgKHRvcCBuYXYgNTZweCArIHRhYiBuYXYgNTZweCArIGV4dHJhIDhweClcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgdGFiVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IHNlY3Rpb25UYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgb2Zmc2V0VmFsdWU6IG51bWJlclxuXG4gIHByaXZhdGUgb2JzZXJ2ZXI6IEludGVyc2VjdGlvbk9ic2VydmVyIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSBpc1Njcm9sbGluZyA9IGZhbHNlXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlNjcm9sbFNweSBjb250cm9sbGVyIGNvbm5lY3RlZFwiKVxuICAgIHRoaXMuc2V0dXBJbnRlcnNlY3Rpb25PYnNlcnZlcigpXG4gICAgXG4gICAgLy8gSW5pdGlhbCBhY3RpdmUgdGFiIG9uIHBhZ2UgbG9hZFxuICAgIHRoaXMudXBkYXRlQWN0aXZlVGFiKClcbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMub2JzZXJ2ZXIpIHtcbiAgICAgIHRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCgpXG4gICAgfVxuICB9XG5cbiAgc2V0dXBJbnRlcnNlY3Rpb25PYnNlcnZlcigpOiB2b2lkIHtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgcm9vdDogbnVsbCxcbiAgICAgIHJvb3RNYXJnaW46IGAtJHt0aGlzLm9mZnNldFZhbHVlfXB4IDBweCAtNTAlIDBweGAsIC8vIEFjdGl2ZSB3aGVuIHNlY3Rpb24gaXMgbmVhciB0b3BcbiAgICAgIHRocmVzaG9sZDogMFxuICAgIH1cblxuICAgIHRoaXMub2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoKGVudHJpZXMpID0+IHtcbiAgICAgIC8vIE9ubHkgdXBkYXRlIGlmIHdlJ3JlIG5vdCBjdXJyZW50bHkgYXV0by1zY3JvbGxpbmdcbiAgICAgIGlmICh0aGlzLmlzU2Nyb2xsaW5nKSByZXR1cm5cblxuICAgICAgZW50cmllcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xuICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICBjb25zdCBzZWN0aW9uSWQgPSBlbnRyeS50YXJnZXQuaWRcbiAgICAgICAgICB0aGlzLnNldEFjdGl2ZVRhYihzZWN0aW9uSWQpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSwgb3B0aW9ucylcblxuICAgIC8vIE9ic2VydmUgYWxsIHNlY3Rpb25zXG4gICAgdGhpcy5zZWN0aW9uVGFyZ2V0cy5mb3JFYWNoKChzZWN0aW9uKSA9PiB7XG4gICAgICB0aGlzLm9ic2VydmVyPy5vYnNlcnZlKHNlY3Rpb24pXG4gICAgfSlcbiAgfVxuXG4gIHNjcm9sbFRvU2VjdGlvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3Qgc2VjdGlvbklkID0gdGFyZ2V0LmRhdGFzZXQuc2VjdGlvblxuICAgIFxuICAgIGlmICghc2VjdGlvbklkKSByZXR1cm5cblxuICAgIGNvbnN0IHNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWN0aW9uSWQpXG4gICAgaWYgKCFzZWN0aW9uKSByZXR1cm5cblxuICAgIC8vIFNldCBmbGFnIHRvIHByZXZlbnQgb2JzZXJ2ZXIgZnJvbSB0cmlnZ2VyaW5nIGR1cmluZyBhdXRvLXNjcm9sbFxuICAgIHRoaXMuaXNTY3JvbGxpbmcgPSB0cnVlXG5cbiAgICAvLyBDYWxjdWxhdGUgc2Nyb2xsIHBvc2l0aW9uIGFjY291bnRpbmcgZm9yIHN0aWNreSBoZWFkZXJzXG4gICAgY29uc3Qgc2VjdGlvblRvcCA9IHNlY3Rpb24uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgd2luZG93LnNjcm9sbFlcbiAgICBjb25zdCBzY3JvbGxUbyA9IHNlY3Rpb25Ub3AgLSB0aGlzLm9mZnNldFZhbHVlXG5cbiAgICAvLyBTbW9vdGggc2Nyb2xsIHRvIHNlY3Rpb25cbiAgICB3aW5kb3cuc2Nyb2xsVG8oe1xuICAgICAgdG9wOiBzY3JvbGxUbyxcbiAgICAgIGJlaGF2aW9yOiBcInNtb290aFwiXG4gICAgfSlcblxuICAgIC8vIEltbWVkaWF0ZWx5IHVwZGF0ZSBhY3RpdmUgdGFiXG4gICAgdGhpcy5zZXRBY3RpdmVUYWIoc2VjdGlvbklkKVxuXG4gICAgLy8gUmVzZXQgZmxhZyBhZnRlciBzY3JvbGwgY29tcGxldGVzXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmlzU2Nyb2xsaW5nID0gZmFsc2VcbiAgICB9LCAxMDAwKSAvLyBJbmNyZWFzZWQgdGltZW91dCB0byBlbnN1cmUgc21vb3RoIHNjcm9sbCBjb21wbGV0ZXNcbiAgfVxuXG4gIHNldEFjdGl2ZVRhYihzZWN0aW9uSWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIC8vIFJlbW92ZSBhY3RpdmUgY2xhc3MgZnJvbSBhbGwgdGFic1xuICAgIHRoaXMudGFiVGFyZ2V0cy5mb3JFYWNoKCh0YWIpID0+IHtcbiAgICAgIHRhYi5jbGFzc0xpc3QucmVtb3ZlKFwiYm9yZGVyLXByaW1hcnlcIiwgXCJ0ZXh0LXByaW1hcnlcIilcbiAgICAgIHRhYi5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLXRyYW5zcGFyZW50XCIsIFwidGV4dC1mb3JlZ3JvdW5kLW11dGVkXCIpXG4gICAgfSlcblxuICAgIC8vIEFkZCBhY3RpdmUgY2xhc3MgdG8gbWF0Y2hpbmcgdGFiXG4gICAgY29uc3QgYWN0aXZlVGFiID0gdGhpcy50YWJUYXJnZXRzLmZpbmQoKHRhYikgPT4gdGFiLmRhdGFzZXQuc2VjdGlvbiA9PT0gc2VjdGlvbklkKVxuICAgIGlmIChhY3RpdmVUYWIpIHtcbiAgICAgIGFjdGl2ZVRhYi5jbGFzc0xpc3QucmVtb3ZlKFwiYm9yZGVyLXRyYW5zcGFyZW50XCIsIFwidGV4dC1mb3JlZ3JvdW5kLW11dGVkXCIpXG4gICAgICBhY3RpdmVUYWIuY2xhc3NMaXN0LmFkZChcImJvcmRlci1wcmltYXJ5XCIsIFwidGV4dC1wcmltYXJ5XCIpXG4gICAgICBcbiAgICAgIC8vIFNjcm9sbCB0YWIgaW50byB2aWV3IGlmIG5lZWRlZCAoaG9yaXpvbnRhbCBzY3JvbGwpXG4gICAgICBhY3RpdmVUYWIuc2Nyb2xsSW50b1ZpZXcoe1xuICAgICAgICBiZWhhdmlvcjogXCJzbW9vdGhcIixcbiAgICAgICAgYmxvY2s6IFwibmVhcmVzdFwiLFxuICAgICAgICBpbmxpbmU6IFwiY2VudGVyXCJcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgdXBkYXRlQWN0aXZlVGFiKCk6IHZvaWQge1xuICAgIC8vIEZpbmQgdGhlIGZpcnN0IHZpc2libGUgc2VjdGlvblxuICAgIGNvbnN0IHNjcm9sbFBvc2l0aW9uID0gd2luZG93LnBhZ2VZT2Zmc2V0ICsgdGhpcy5vZmZzZXRWYWx1ZSArIDEwXG5cbiAgICBmb3IgKGxldCBpID0gdGhpcy5zZWN0aW9uVGFyZ2V0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuc2VjdGlvblRhcmdldHNbaV1cbiAgICAgIGNvbnN0IHNlY3Rpb25Ub3AgPSBzZWN0aW9uLm9mZnNldFRvcFxuXG4gICAgICBpZiAoc2Nyb2xsUG9zaXRpb24gPj0gc2VjdGlvblRvcCkge1xuICAgICAgICB0aGlzLnNldEFjdGl2ZVRhYihzZWN0aW9uLmlkKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wiY2FyZFwiLCBcImRldGFpbHNcIl1cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBzZWxlY3RlZElkOiBOdW1iZXJcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2FyZFRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBkZXRhaWxzVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHNlbGVjdGVkSWRWYWx1ZTogbnVtYmVyXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlBhY2thZ2VTd2l0Y2hlciBjb25uZWN0ZWRcIilcbiAgICBcbiAgICAvLyBMaXN0ZW4gZm9yIHBhY2thZ2Ugc2VsZWN0aW9uIGNoYW5nZXMgZnJvbSBib29raW5nIG1vZGFsXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJib29raW5nLW1vZGFsOnBhY2thZ2UtY2hhbmdlZFwiLCAoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgICBjb25zdCBjdXN0b21FdmVudCA9IGV2ZW50IGFzIEN1c3RvbUV2ZW50XG4gICAgICBjb25zdCBwYWNrYWdlSWQgPSBjdXN0b21FdmVudC5kZXRhaWwucGFja2FnZUlkXG4gICAgICBpZiAocGFja2FnZUlkICYmIHBhY2thZ2VJZCAhPT0gdGhpcy5zZWxlY3RlZElkVmFsdWUpIHtcbiAgICAgICAgdGhpcy5zeW5jUGFja2FnZVNlbGVjdGlvbihwYWNrYWdlSWQpXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICAvLyBMaXN0ZW4gZm9yIHN5bmMgcmVxdWVzdHMgZnJvbSBib29raW5nIG1vZGFsXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJib29raW5nLW1vZGFsOnJlcXVlc3Qtc3luY1wiLCAoKSA9PiB7XG4gICAgICBjb25zdCBzeW5jRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoXCJwYWNrYWdlOnNlbGVjdGVkXCIsIHtcbiAgICAgICAgZGV0YWlsOiB7IHBhY2thZ2VJZDogdGhpcy5zZWxlY3RlZElkVmFsdWUgfVxuICAgICAgfSlcbiAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KHN5bmNFdmVudClcbiAgICB9KVxuICB9XG5cbiAgc2VsZWN0UGFja2FnZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHBhY2thZ2VJZCA9IHBhcnNlSW50KGNhcmQuZGF0YXNldC5wYWNrYWdlSWQgfHwgXCIwXCIpXG4gICAgXG4gICAgaWYgKHBhY2thZ2VJZCA9PT0gdGhpcy5zZWxlY3RlZElkVmFsdWUpIHtcbiAgICAgIHJldHVybiAvLyBBbHJlYWR5IHNlbGVjdGVkXG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHNlbGVjdGVkIElEXG4gICAgdGhpcy5zZWxlY3RlZElkVmFsdWUgPSBwYWNrYWdlSWRcbiAgICB0aGlzLnVwZGF0ZVBhY2thZ2VVSShwYWNrYWdlSWQpXG4gICAgXG4gICAgLy8gTm90aWZ5IGJvb2tpbmcgbW9kYWxcbiAgICBjb25zdCBjdXN0b21FdmVudCA9IG5ldyBDdXN0b21FdmVudChcInBhY2thZ2U6c2VsZWN0ZWRcIiwge1xuICAgICAgZGV0YWlsOiB7IHBhY2thZ2VJZCB9XG4gICAgfSlcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChjdXN0b21FdmVudClcbiAgfVxuXG4gIHByaXZhdGUgc3luY1BhY2thZ2VTZWxlY3Rpb24ocGFja2FnZUlkOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLnNlbGVjdGVkSWRWYWx1ZSA9IHBhY2thZ2VJZFxuICAgIHRoaXMudXBkYXRlUGFja2FnZVVJKHBhY2thZ2VJZClcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlUGFja2FnZVVJKHBhY2thZ2VJZDogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gVXBkYXRlIGNhcmQgc3R5bGVzXG4gICAgdGhpcy5jYXJkVGFyZ2V0cy5mb3JFYWNoKGNhcmRFbCA9PiB7XG4gICAgICBjb25zdCBjYXJkUGFja2FnZUlkID0gcGFyc2VJbnQoY2FyZEVsLmRhdGFzZXQucGFja2FnZUlkIHx8IFwiMFwiKVxuICAgICAgXG4gICAgICBpZiAoY2FyZFBhY2thZ2VJZCA9PT0gcGFja2FnZUlkKSB7XG4gICAgICAgIC8vIFNlbGVjdGVkIHN0YXRlXG4gICAgICAgIGNhcmRFbC5jbGFzc0xpc3QucmVtb3ZlKCdiZy13aGl0ZScsICdib3JkZXItZ3JheS0xMDAnLCAnYm9yZGVyJylcbiAgICAgICAgY2FyZEVsLmNsYXNzTGlzdC5hZGQoJ2JnLVsjRkZGOUU2XScsICdib3JkZXItMicsICdib3JkZXItWyNGRkQ3MDBdJylcbiAgICAgICAgXG4gICAgICAgIC8vIFNob3cgY2hlY2ttYXJrLCBoaWRlIHNlbGVjdCB0ZXh0XG4gICAgICAgIGNvbnN0IGNoZWNrbWFyayA9IGNhcmRFbC5xdWVyeVNlbGVjdG9yKCdzdmdbdmlld0JveD1cIjAgMCAyMCAyMFwiXScpXG4gICAgICAgIGlmIChjaGVja21hcmspIHtcbiAgICAgICAgICBjaGVja21hcmsuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVW5zZWxlY3RlZCBzdGF0ZVxuICAgICAgICBjYXJkRWwuY2xhc3NMaXN0LnJlbW92ZSgnYmctWyNGRkY5RTZdJywgJ2JvcmRlci0yJywgJ2JvcmRlci1bI0ZGRDcwMF0nKVxuICAgICAgICBjYXJkRWwuY2xhc3NMaXN0LmFkZCgnYmctd2hpdGUnLCAnYm9yZGVyJywgJ2JvcmRlci1ncmF5LTEwMCcpXG4gICAgICAgIFxuICAgICAgICAvLyBIaWRlIGNoZWNrbWFya1xuICAgICAgICBjb25zdCBjaGVja21hcmsgPSBjYXJkRWwucXVlcnlTZWxlY3Rvcignc3ZnW3ZpZXdCb3g9XCIwIDAgMjAgMjBcIl0nKVxuICAgICAgICBpZiAoY2hlY2ttYXJrKSB7XG4gICAgICAgICAgY2hlY2ttYXJrLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gVXBkYXRlIGRldGFpbHMgc2VjdGlvblxuICAgIGNvbnN0IGRldGFpbHNDb250YWluZXIgPSB0aGlzLmRldGFpbHNUYXJnZXRcbiAgICBjb25zdCBhbGxEZXRhaWxzID0gZGV0YWlsc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1wYWNrYWdlLWlkXScpXG4gICAgXG4gICAgYWxsRGV0YWlscy5mb3JFYWNoKGRldGFpbCA9PiB7XG4gICAgICBjb25zdCBkZXRhaWxFbGVtZW50ID0gZGV0YWlsIGFzIEhUTUxFbGVtZW50XG4gICAgICBjb25zdCBkZXRhaWxQYWNrYWdlSWQgPSBwYXJzZUludChkZXRhaWxFbGVtZW50LmRhdGFzZXQucGFja2FnZUlkIHx8IFwiMFwiKVxuICAgICAgXG4gICAgICBpZiAoZGV0YWlsUGFja2FnZUlkID09PSBwYWNrYWdlSWQpIHtcbiAgICAgICAgZGV0YWlsRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGV0YWlsRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlciB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwibW9kYWxcIixcbiAgICBcInBhY2thZ2VCdG5cIixcbiAgICBcIm1vbnRoVGFiXCIsXG4gICAgXCJjYWxlbmRhclwiLFxuICAgIFwiZGF0ZUJ0blwiLFxuICAgIFwiYWR1bHRDb3VudFwiLFxuICAgIFwiY2hpbGRDb3VudFwiXG4gIF1cblxuICBkZWNsYXJlIHJlYWRvbmx5IG1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHBhY2thZ2VCdG5UYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgbW9udGhUYWJUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2FsZW5kYXJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGF0ZUJ0blRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBhZHVsdENvdW50VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNoaWxkQ291bnRUYXJnZXQ6IEhUTUxFbGVtZW50XG5cbiAgcHJpdmF0ZSBzZWxlY3RlZFBhY2thZ2VJZDogbnVtYmVyIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSBzZWxlY3RlZERhdGU6IHN0cmluZyB8IG51bGwgPSBudWxsXG4gIHByaXZhdGUgYWR1bHRRdWFudGl0eTogbnVtYmVyID0gMVxuICBwcml2YXRlIGNoaWxkUXVhbnRpdHk6IG51bWJlciA9IDBcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiQm9va2luZyBtb2RhbCBjb250cm9sbGVyIGNvbm5lY3RlZFwiKVxuICAgIFxuICAgIC8vIExpc3RlbiBmb3IgcGFja2FnZSBzZWxlY3Rpb24gY2hhbmdlcyBmcm9tIG91dHNpZGVcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhY2thZ2U6c2VsZWN0ZWRcIiwgKGV2ZW50OiBFdmVudCkgPT4ge1xuICAgICAgY29uc3QgY3VzdG9tRXZlbnQgPSBldmVudCBhcyBDdXN0b21FdmVudFxuICAgICAgY29uc3QgcGFja2FnZUlkID0gY3VzdG9tRXZlbnQuZGV0YWlsLnBhY2thZ2VJZFxuICAgICAgaWYgKHBhY2thZ2VJZCAmJiBwYWNrYWdlSWQgIT09IHRoaXMuc2VsZWN0ZWRQYWNrYWdlSWQpIHtcbiAgICAgICAgdGhpcy5zeW5jUGFja2FnZVNlbGVjdGlvbihwYWNrYWdlSWQpXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICAvLyBMaXN0ZW4gZm9yIGJvdHRvbSBiYXIgbW9kYWwgb3BlbiByZXF1ZXN0c1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiYm90dG9tLWJhcjpvcGVuLW1vZGFsXCIsICgpID0+IHtcbiAgICAgIHRoaXMub3BlbigpXG4gICAgfSlcbiAgfVxuXG4gIG9wZW4oKTogdm9pZCB7XG4gICAgLy8gU3luYyB3aXRoIGN1cnJlbnQgZXh0ZXJuYWwgc2VsZWN0aW9uIHdoZW4gb3BlbmluZ1xuICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFwiYm9va2luZy1tb2RhbDpyZXF1ZXN0LXN5bmNcIilcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudClcbiAgICBcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIlxuICB9XG5cbiAgY2xvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiXCJcbiAgfVxuXG4gIHNlbGVjdFBhY2thZ2UoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnRuID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHBhY2thZ2VJZCA9IHBhcnNlSW50KGJ0bi5kYXRhc2V0LnBhY2thZ2VJZCB8fCBcIjBcIilcbiAgICBcbiAgICB0aGlzLnNlbGVjdGVkUGFja2FnZUlkID0gcGFja2FnZUlkXG4gICAgdGhpcy51cGRhdGVQYWNrYWdlQnV0dG9ucyhwYWNrYWdlSWQpXG4gICAgXG4gICAgLy8gTm90aWZ5IGV4dGVybmFsIHBhY2thZ2Ugc3dpdGNoZXJcbiAgICBjb25zdCBjdXN0b21FdmVudCA9IG5ldyBDdXN0b21FdmVudChcImJvb2tpbmctbW9kYWw6cGFja2FnZS1jaGFuZ2VkXCIsIHtcbiAgICAgIGRldGFpbDogeyBwYWNrYWdlSWQgfVxuICAgIH0pXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoY3VzdG9tRXZlbnQpXG4gIH1cblxuICBwcml2YXRlIHN5bmNQYWNrYWdlU2VsZWN0aW9uKHBhY2thZ2VJZDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5zZWxlY3RlZFBhY2thZ2VJZCA9IHBhY2thZ2VJZFxuICAgIHRoaXMudXBkYXRlUGFja2FnZUJ1dHRvbnMocGFja2FnZUlkKVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVQYWNrYWdlQnV0dG9ucyhwYWNrYWdlSWQ6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIFVwZGF0ZSBidXR0b24gc3R5bGVzXG4gICAgdGhpcy5wYWNrYWdlQnRuVGFyZ2V0cy5mb3JFYWNoKGJ0bkVsID0+IHtcbiAgICAgIGNvbnN0IGJ0blBhY2thZ2VJZCA9IHBhcnNlSW50KGJ0bkVsLmRhdGFzZXQucGFja2FnZUlkIHx8IFwiMFwiKVxuICAgICAgXG4gICAgICBpZiAoYnRuUGFja2FnZUlkID09PSBwYWNrYWdlSWQpIHtcbiAgICAgICAgYnRuRWwuY2xhc3NMaXN0LnJlbW92ZShcImJnLXdoaXRlXCIsIFwiYm9yZGVyLWdyYXktMjAwXCIpXG4gICAgICAgIGJ0bkVsLmNsYXNzTGlzdC5hZGQoXCJiZy1bI0ZGRjlFNl1cIiwgXCJib3JkZXItWyNGRkQ3MDBdXCIpXG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgY2hlY2ttYXJrIGlmIG5vdCBleGlzdHNcbiAgICAgICAgaWYgKCFidG5FbC5xdWVyeVNlbGVjdG9yKFwic3ZnXCIpKSB7XG4gICAgICAgICAgY29uc3QgY2hlY2ttYXJrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJzdmdcIilcbiAgICAgICAgICBjaGVja21hcmsuY2xhc3NMaXN0LmFkZChcImFic29sdXRlXCIsIFwidG9wLTJcIiwgXCJyaWdodC0yXCIsIFwidy01XCIsIFwiaC01XCIpXG4gICAgICAgICAgY2hlY2ttYXJrLnN0eWxlLmNvbG9yID0gXCIjRkZENzAwXCJcbiAgICAgICAgICBjaGVja21hcmsuc2V0QXR0cmlidXRlKFwiZmlsbFwiLCBcImN1cnJlbnRDb2xvclwiKVxuICAgICAgICAgIGNoZWNrbWFyay5zZXRBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIsIFwiMCAwIDIwIDIwXCIpXG4gICAgICAgICAgY29uc3QgcGF0aEQgPSAnTTEwIDE4YTggOCAwIDEwMC0xNiA4IDggMCAwMDAgMTZ6bTMuNzA3LTkuMjkzYTEgMSAwIDAwLTEuNDE0LTEuNDE0TDkgMTAuNTg2IDcuNzA3IDkuMjkzYTEgMSAwIDAwLTEuNDE0IDEuNDE0bDIgMmExIDEgMCAwMDEuNDE0IDBsNC00eidcbiAgICAgICAgICBjaGVja21hcmsuaW5uZXJIVE1MID0gYDxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiBkPVwiJHtwYXRoRH1cIiBjbGlwLXJ1bGU9XCJldmVub2RkXCI+PC9wYXRoPmBcbiAgICAgICAgICBidG5FbC5hcHBlbmRDaGlsZChjaGVja21hcmspXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJ0bkVsLmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI0ZGRjlFNl1cIiwgXCJib3JkZXItWyNGRkQ3MDBdXCIpXG4gICAgICAgIGJ0bkVsLmNsYXNzTGlzdC5hZGQoXCJiZy13aGl0ZVwiLCBcImJvcmRlci1ncmF5LTIwMFwiKVxuICAgICAgICBcbiAgICAgICAgLy8gUmVtb3ZlIGNoZWNrbWFya1xuICAgICAgICBjb25zdCBjaGVja21hcmsgPSBidG5FbC5xdWVyeVNlbGVjdG9yKFwic3ZnXCIpXG4gICAgICAgIGlmIChjaGVja21hcmspIHtcbiAgICAgICAgICBjaGVja21hcmsucmVtb3ZlKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBzZWxlY3RNb250aChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidG4gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgbW9udGggPSBidG4uZGF0YXNldC5tb250aFxuXG4gICAgLy8gVXBkYXRlIHRhYiBzdHlsZXNcbiAgICB0aGlzLm1vbnRoVGFiVGFyZ2V0cy5mb3JFYWNoKHRhYkVsID0+IHtcbiAgICAgIGlmICh0YWJFbC5kYXRhc2V0Lm1vbnRoID09PSBtb250aCkge1xuICAgICAgICB0YWJFbC5jbGFzc0xpc3QucmVtb3ZlKFwidGV4dC1mb3JlZ3JvdW5kLW11dGVkXCIpXG4gICAgICAgIHRhYkVsLmNsYXNzTGlzdC5hZGQoXCJ0ZXh0LXJlZC01MDBcIiwgXCJib3JkZXItYi0yXCIsIFwiYm9yZGVyLXJlZC01MDBcIilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhYkVsLmNsYXNzTGlzdC5yZW1vdmUoXCJ0ZXh0LXJlZC01MDBcIiwgXCJib3JkZXItYi0yXCIsIFwiYm9yZGVyLXJlZC01MDBcIilcbiAgICAgICAgdGFiRWwuY2xhc3NMaXN0LmFkZChcInRleHQtZm9yZWdyb3VuZC1tdXRlZFwiKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBUT0RPOiBVcGRhdGUgY2FsZW5kYXIgZGlzcGxheSBmb3Igc2VsZWN0ZWQgbW9udGhcbiAgfVxuXG4gIHNlbGVjdERhdGUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnRuID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGNvbnN0IGRhdGUgPSBidG4uZGF0YXNldC5kYXRlXG5cbiAgICBpZiAoIWRhdGUgfHwgYnRuLmRpc2FibGVkKSByZXR1cm5cblxuICAgIHRoaXMuc2VsZWN0ZWREYXRlID0gZGF0ZVxuXG4gICAgLy8gVXBkYXRlIGRhdGUgYnV0dG9uIHN0eWxlc1xuICAgIHRoaXMuZGF0ZUJ0blRhcmdldHMuZm9yRWFjaChkYXRlQnRuID0+IHtcbiAgICAgIGlmIChkYXRlQnRuLmRhdGFzZXQuZGF0ZSA9PT0gZGF0ZSkge1xuICAgICAgICBkYXRlQnRuLnN0eWxlLmJhY2tncm91bmQgPSBcIiNGRkQ3MDBcIlxuICAgICAgICBkYXRlQnRuLnN0eWxlLmNvbG9yID0gXCIjMDAwXCJcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGVCdG4uc3R5bGUuYmFja2dyb3VuZCA9IFwiXCJcbiAgICAgICAgZGF0ZUJ0bi5zdHlsZS5jb2xvciA9IFwiXCJcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgaW5jcmVhc2VBZHVsdCgpOiB2b2lkIHtcbiAgICB0aGlzLmFkdWx0UXVhbnRpdHkrK1xuICAgIHRoaXMuYWR1bHRDb3VudFRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMuYWR1bHRRdWFudGl0eS50b1N0cmluZygpXG4gIH1cblxuICBkZWNyZWFzZUFkdWx0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmFkdWx0UXVhbnRpdHkgPiAxKSB7XG4gICAgICB0aGlzLmFkdWx0UXVhbnRpdHktLVxuICAgICAgdGhpcy5hZHVsdENvdW50VGFyZ2V0LnRleHRDb250ZW50ID0gdGhpcy5hZHVsdFF1YW50aXR5LnRvU3RyaW5nKClcbiAgICB9XG4gIH1cblxuICBpbmNyZWFzZUNoaWxkKCk6IHZvaWQge1xuICAgIHRoaXMuY2hpbGRRdWFudGl0eSsrXG4gICAgdGhpcy5jaGlsZENvdW50VGFyZ2V0LnRleHRDb250ZW50ID0gdGhpcy5jaGlsZFF1YW50aXR5LnRvU3RyaW5nKClcbiAgfVxuXG4gIGRlY3JlYXNlQ2hpbGQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY2hpbGRRdWFudGl0eSA+IDApIHtcbiAgICAgIHRoaXMuY2hpbGRRdWFudGl0eS0tXG4gICAgICB0aGlzLmNoaWxkQ291bnRUYXJnZXQudGV4dENvbnRlbnQgPSB0aGlzLmNoaWxkUXVhbnRpdHkudG9TdHJpbmcoKVxuICAgIH1cbiAgfVxuXG4gIGFkZFRvQ2FydCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMudmFsaWRhdGVTZWxlY3Rpb24oKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXCJBZGRpbmcgdG8gY2FydDpcIiwge1xuICAgICAgcGFja2FnZUlkOiB0aGlzLnNlbGVjdGVkUGFja2FnZUlkLFxuICAgICAgZGF0ZTogdGhpcy5zZWxlY3RlZERhdGUsXG4gICAgICBhZHVsdHM6IHRoaXMuYWR1bHRRdWFudGl0eSxcbiAgICAgIGNoaWxkcmVuOiB0aGlzLmNoaWxkUXVhbnRpdHlcbiAgICB9KVxuXG4gICAgYWxlcnQoXCJcdTVERjJcdTUyQTBcdTUxNjVcdThEMkRcdTcyNjlcdThGNjZcIilcbiAgICB0aGlzLmNsb3NlKClcbiAgfVxuXG4gIGJ1eU5vdygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMudmFsaWRhdGVTZWxlY3Rpb24oKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU5ODc1XHU5NzYyXHU3Njg0IHByb2R1Y3RfaWRcdUZGMDhcdTRFQ0UgVVJMIFx1NEUyRFx1ODNCN1x1NTNENlx1RkYwOVxuICAgIGNvbnN0IHByb2R1Y3RJZCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5zcGxpdCgnLycpLnBvcCgpXG4gICAgXG4gICAgLy8gXHU2Nzg0XHU1RUZBXHU4QkEyXHU1MzU1XHU5ODc1XHU5NzYyIFVSTFxuICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgcHJvZHVjdF9pZDogcHJvZHVjdElkIHx8ICcnLFxuICAgICAgcGFja2FnZV9pZDogKHRoaXMuc2VsZWN0ZWRQYWNrYWdlSWQgfHwgJycpLnRvU3RyaW5nKCksXG4gICAgICB0cmF2ZWxfZGF0ZTogdGhpcy5zZWxlY3RlZERhdGUgfHwgJycsXG4gICAgICBhZHVsdF9jb3VudDogdGhpcy5hZHVsdFF1YW50aXR5LnRvU3RyaW5nKCksXG4gICAgICBjaGlsZF9jb3VudDogdGhpcy5jaGlsZFF1YW50aXR5LnRvU3RyaW5nKClcbiAgICB9KVxuICAgIFxuICAgIC8vIFx1OERGM1x1OEY2Q1x1NTIzMFx1OEJBMlx1NTM1NVx1OTg3NVx1OTc2MlxuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYC90b3VyX2dyb3VwX2Jvb2tpbmdzL25ldz8ke3BhcmFtcy50b1N0cmluZygpfWBcbiAgfVxuXG4gIHByaXZhdGUgdmFsaWRhdGVTZWxlY3Rpb24oKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLnNlbGVjdGVkRGF0ZSkge1xuICAgICAgYWxlcnQoXCJcdThCRjdcdTkwMDlcdTYyRTlcdTUxRkFcdTg4NENcdTY1RTVcdTY3MUZcIilcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGlmICh0aGlzLmFkdWx0UXVhbnRpdHkgPCAxKSB7XG4gICAgICBhbGVydChcIlx1ODFGM1x1NUMxMVx1OTcwMFx1ODk4MTFcdTRGNERcdTYyMTBcdTRFQkFcIilcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlciB7XG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJCb3R0b20gYmFyIGNvbnRyb2xsZXIgY29ubmVjdGVkXCIpXG4gIH1cblxuICBvcGVuTW9kYWwoKTogdm9pZCB7XG4gICAgLy8gVHJpZ2dlciBtb2RhbCBvcGVuIHZpYSBDdXN0b21FdmVudFxuICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFwiYm90dG9tLWJhcjpvcGVuLW1vZGFsXCIpXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcInJhZGlvXCIsIFwidG90YWxQcmljZVwiXVxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIGJhc2VQcmljZTogTnVtYmVyLFxuICAgIGFkdWx0Q291bnQ6IE51bWJlcixcbiAgICBjaGlsZENvdW50OiBOdW1iZXJcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgcmFkaW9UYXJnZXRzOiBIVE1MSW5wdXRFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSB0b3RhbFByaWNlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGJhc2VQcmljZVZhbHVlOiBudW1iZXJcbiAgZGVjbGFyZSByZWFkb25seSBhZHVsdENvdW50VmFsdWU6IG51bWJlclxuICBkZWNsYXJlIHJlYWRvbmx5IGNoaWxkQ291bnRWYWx1ZTogbnVtYmVyXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkluc3VyYW5jZVNlbGVjdG9yIGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkluc3VyYW5jZVNlbGVjdG9yIGRpc2Nvbm5lY3RlZFwiKVxuICB9XG5cbiAgdXBkYXRlUHJpY2UoKTogdm9pZCB7XG4gICAgY29uc3Qgc2VsZWN0ZWRSYWRpbyA9IHRoaXMucmFkaW9UYXJnZXRzLmZpbmQoKHJhZGlvKSA9PiByYWRpby5jaGVja2VkKVxuICAgIGlmICghc2VsZWN0ZWRSYWRpbykgcmV0dXJuXG5cbiAgICBjb25zdCBpbnN1cmFuY2VUeXBlID0gc2VsZWN0ZWRSYWRpby52YWx1ZVxuICAgIGNvbnN0IHRvdGFsUGVvcGxlID0gdGhpcy5hZHVsdENvdW50VmFsdWUgKyB0aGlzLmNoaWxkQ291bnRWYWx1ZVxuICAgIGxldCBpbnN1cmFuY2VQcmljZSA9IDBcblxuICAgIGlmIChpbnN1cmFuY2VUeXBlID09PSBcInN0YW5kYXJkXCIpIHtcbiAgICAgIGluc3VyYW5jZVByaWNlID0gMTUgKiB0b3RhbFBlb3BsZVxuICAgIH0gZWxzZSBpZiAoaW5zdXJhbmNlVHlwZSA9PT0gXCJwcmVtaXVtXCIpIHtcbiAgICAgIGluc3VyYW5jZVByaWNlID0gMzUgKiB0b3RhbFBlb3BsZVxuICAgIH1cblxuICAgIGNvbnN0IHRvdGFsUHJpY2UgPSB0aGlzLmJhc2VQcmljZVZhbHVlICsgaW5zdXJhbmNlUHJpY2VcbiAgICB0aGlzLnRvdGFsUHJpY2VUYXJnZXQudGV4dENvbnRlbnQgPSBgXHUwMEE1JHtNYXRoLnJvdW5kKHRvdGFsUHJpY2UpfWBcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwibW9kYWxcIixcbiAgICBcInRyYXZlbGVyTmFtZUlucHV0XCIsXG4gICAgXCJ0cmF2ZWxlcklkSW5wdXRcIlxuICBdXG5cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBzZWxlY3RlZFBhc3NlbmdlcklkOiBTdHJpbmcsXG4gICAgc2VsZWN0ZWRQYXNzZW5nZXJOYW1lOiBTdHJpbmcsXG4gICAgc2VsZWN0ZWRQYXNzZW5nZXJJZE51bWJlcjogU3RyaW5nLFxuICAgIHRyYXZlbGVySW5kZXg6IE51bWJlclxuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0cmF2ZWxlck5hbWVJbnB1dFRhcmdldHM6IEhUTUxJbnB1dEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IHRyYXZlbGVySWRJbnB1dFRhcmdldHM6IEhUTUxJbnB1dEVsZW1lbnRbXVxuXG4gIGRlY2xhcmUgc2VsZWN0ZWRQYXNzZW5nZXJJZFZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBzZWxlY3RlZFBhc3Nlbmdlck5hbWVWYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgc2VsZWN0ZWRQYXNzZW5nZXJJZE51bWJlclZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSB0cmF2ZWxlckluZGV4VmFsdWU6IG51bWJlclxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJUb3VyVHJhdmVsZXJTZWxlY3RvciBjb25uZWN0ZWRcIilcbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJUb3VyVHJhdmVsZXJTZWxlY3RvciBkaXNjb25uZWN0ZWRcIilcbiAgfVxuXG4gIC8vIE9wZW4gbW9kYWwgZm9yIHNwZWNpZmljIHRyYXZlbGVyXG4gIG9wZW5Nb2RhbChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgdHJhdmVsZXJJbmRleCA9IHBhcnNlSW50KHRhcmdldC5kYXRhc2V0LnRyYXZlbGVySW5kZXggfHwgJzAnKVxuICAgIFxuICAgIGNvbnNvbGUubG9nKFwiT3BlbmluZyB0cmF2ZWxlciBzZWxlY3RvciBtb2RhbCBmb3IgaW5kZXg6XCIsIHRyYXZlbGVySW5kZXgpXG4gICAgXG4gICAgdGhpcy50cmF2ZWxlckluZGV4VmFsdWUgPSB0cmF2ZWxlckluZGV4XG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJ1xuICB9XG5cbiAgLy8gQ2xvc2UgbW9kYWxcbiAgY2xvc2VNb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICcnXG4gIH1cblxuICAvLyBTZWxlY3QgYSBwYXNzZW5nZXIgZnJvbSB0aGUgbGlzdFxuICBzZWxlY3RQYXNzZW5nZXIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHBhc3NlbmdlcklkID0gdGFyZ2V0LmRhdGFzZXQucGFzc2VuZ2VySWQgfHwgJydcbiAgICBjb25zdCBwYXNzZW5nZXJOYW1lID0gdGFyZ2V0LmRhdGFzZXQucGFzc2VuZ2VyTmFtZSB8fCAnJ1xuICAgIGNvbnN0IHBhc3NlbmdlcklkTnVtYmVyID0gdGFyZ2V0LmRhdGFzZXQucGFzc2VuZ2VySWROdW1iZXIgfHwgJydcblxuICAgIGNvbnNvbGUubG9nKFwiU2VsZWN0ZWQgcGFzc2VuZ2VyOlwiLCB7IHBhc3NlbmdlcklkLCBwYXNzZW5nZXJOYW1lLCBwYXNzZW5nZXJJZE51bWJlciwgdHJhdmVsZXJJbmRleDogdGhpcy50cmF2ZWxlckluZGV4VmFsdWUgfSlcblxuICAgIC8vIFN0b3JlIHNlbGVjdGVkIHZhbHVlc1xuICAgIHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJJZFZhbHVlID0gcGFzc2VuZ2VySWRcbiAgICB0aGlzLnNlbGVjdGVkUGFzc2VuZ2VyTmFtZVZhbHVlID0gcGFzc2VuZ2VyTmFtZVxuICAgIHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJJZE51bWJlclZhbHVlID0gcGFzc2VuZ2VySWROdW1iZXJcblxuICAgIC8vIFVwZGF0ZSBmb3JtIGlucHV0cyBmb3Igc3BlY2lmaWMgdHJhdmVsZXJcbiAgICBpZiAodGhpcy50cmF2ZWxlck5hbWVJbnB1dFRhcmdldHNbdGhpcy50cmF2ZWxlckluZGV4VmFsdWVdKSB7XG4gICAgICB0aGlzLnRyYXZlbGVyTmFtZUlucHV0VGFyZ2V0c1t0aGlzLnRyYXZlbGVySW5kZXhWYWx1ZV0udmFsdWUgPSBwYXNzZW5nZXJOYW1lXG4gICAgfVxuICAgIGlmICh0aGlzLnRyYXZlbGVySWRJbnB1dFRhcmdldHNbdGhpcy50cmF2ZWxlckluZGV4VmFsdWVdKSB7XG4gICAgICB0aGlzLnRyYXZlbGVySWRJbnB1dFRhcmdldHNbdGhpcy50cmF2ZWxlckluZGV4VmFsdWVdLnZhbHVlID0gcGFzc2VuZ2VySWROdW1iZXJcbiAgICB9XG5cbiAgICAvLyBDbG9zZSBtb2RhbFxuICAgIHRoaXMuY2xvc2VNb2RhbCgpXG4gIH1cblxuICAvLyBTdG9wIHByb3BhZ2F0aW9uIGZvciBpbm5lciBjbGlja3NcbiAgc3RvcFByb3BhZ2F0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRm9ybUVsZW1lbnQ+IHtcbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlNwZWNpYWxGbGlnaHRzRm9ybSBjb250cm9sbGVyIGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgaGFuZGxlU3VibWl0KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBcbiAgICBjb25zdCBmb3JtID0gdGhpcy5lbGVtZW50IGFzIEhUTUxGb3JtRWxlbWVudFxuICAgIFxuICAgIC8vIEdldCBmb3JtIGRhdGFcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShmb3JtKVxuICAgIGNvbnN0IGRlc3RpbmF0aW9uQ2l0aWVzID0gZm9ybURhdGEuZ2V0KCdkZXN0aW5hdGlvbl9jaXRpZXMnKSBhcyBzdHJpbmdcbiAgICBjb25zdCBkZXBhcnR1cmVDaXR5ID0gZm9ybURhdGEuZ2V0KCdkZXBhcnR1cmVfY2l0eScpIGFzIHN0cmluZ1xuICAgIGNvbnN0IGRhdGUgPSBmb3JtRGF0YS5nZXQoJ2RhdGUnKSBhcyBzdHJpbmdcbiAgICBjb25zdCBzb3J0QnkgPSBmb3JtRGF0YS5nZXQoJ3NvcnRfYnknKSBhcyBzdHJpbmdcbiAgICBjb25zdCB0cmlwVHlwZSA9IGZvcm1EYXRhLmdldCgndHJpcF90eXBlJykgYXMgc3RyaW5nXG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgbXVsdGlwbGUgY2l0aWVzIGFyZSBzZWxlY3RlZFxuICAgIGNvbnN0IGNpdGllcyA9IGRlc3RpbmF0aW9uQ2l0aWVzLnNwbGl0KCcsJykubWFwKGNpdHkgPT4gY2l0eS50cmltKCkpLmZpbHRlcihjaXR5ID0+IGNpdHkgIT09ICcnKVxuICAgIGNvbnN0IGlzTXVsdGlDaXR5ID0gY2l0aWVzLmxlbmd0aCA+IDFcbiAgICBcbiAgICAvLyBCdWlsZCBVUkwgYmFzZWQgb24gZGVzdGluYXRpb24gY291bnRcbiAgICBsZXQgdXJsOiBzdHJpbmdcbiAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKClcbiAgICBcbiAgICBpZiAoaXNNdWx0aUNpdHkpIHtcbiAgICAgIC8vIE11bHRpcGxlIGNpdGllcyAtPiAvZmxpZ2h0cy9jb21iaW5hdGlvbnNcbiAgICAgIHVybCA9ICcvZmxpZ2h0cy9jb21iaW5hdGlvbnMnXG4gICAgICBwYXJhbXMuYXBwZW5kKCdkZXBhcnR1cmVfY2l0eScsIGRlcGFydHVyZUNpdHkpXG4gICAgICBwYXJhbXMuYXBwZW5kKCdkZXN0aW5hdGlvbl9jaXRpZXMnLCBkZXN0aW5hdGlvbkNpdGllcylcbiAgICAgIHBhcmFtcy5hcHBlbmQoJ2RhdGUnLCBkYXRlKVxuICAgICAgcGFyYW1zLmFwcGVuZCgnc29ydF9ieScsIHNvcnRCeSlcbiAgICAgIHBhcmFtcy5hcHBlbmQoJ3RyaXBfdHlwZScsIHRyaXBUeXBlKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTaW5nbGUgY2l0eSAtPiAvZmxpZ2h0cy9zZWFyY2hcbiAgICAgIHVybCA9ICcvZmxpZ2h0cy9zZWFyY2gnXG4gICAgICBwYXJhbXMuYXBwZW5kKCdkZXBhcnR1cmVfY2l0eScsIGRlcGFydHVyZUNpdHkpXG4gICAgICBwYXJhbXMuYXBwZW5kKCdkZXN0aW5hdGlvbl9jaXR5JywgY2l0aWVzWzBdIHx8IGRlc3RpbmF0aW9uQ2l0aWVzKVxuICAgICAgcGFyYW1zLmFwcGVuZCgnZGF0ZScsIGRhdGUpXG4gICAgICBwYXJhbXMuYXBwZW5kKCdzb3J0X2J5Jywgc29ydEJ5KVxuICAgICAgcGFyYW1zLmFwcGVuZCgndHJpcF90eXBlJywgdHJpcFR5cGUpXG4gICAgfVxuICAgIFxuICAgIC8vIE5hdmlnYXRlIHRvIHRoZSBhcHByb3ByaWF0ZSBwYWdlXG4gICAgY29uc3QgZnVsbFVybCA9IGAke3VybH0/JHtwYXJhbXMudG9TdHJpbmcoKX1gXG4gICAgY29uc29sZS5sb2coJ1JlZGlyZWN0aW5nIHRvOicsIGZ1bGxVcmwpXG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBmdWxsVXJsXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcInRvdGFsUHJpY2VcIixcbiAgICBcInNlbGVjdGVkQ2FycmlhZ2VcIixcbiAgICBcImNhcnJpYWdlQnV0dG9uXCIsXG4gICAgXCJzZWF0QnV0dG9uXCIsXG4gICAgXCJzZWxlY3RlZFNlYXRDb3VudFwiXG4gIF1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHRvdGFsUHJpY2VUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VsZWN0ZWRDYXJyaWFnZVRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNhcnJpYWdlQnV0dG9uVGFyZ2V0czogSFRNTEJ1dHRvbkVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IHNlYXRCdXR0b25UYXJnZXRzOiBIVE1MQnV0dG9uRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VsZWN0ZWRTZWF0Q291bnRUYXJnZXQ6IEhUTUxFbGVtZW50XG5cbiAgcHJpdmF0ZSBiYXNlUHJpY2U6IG51bWJlciA9IDBcbiAgcHJpdmF0ZSBpbnN1cmFuY2VQcmljZTogbnVtYmVyID0gMFxuICBwcml2YXRlIGN1cnJlbnRDYXJyaWFnZTogc3RyaW5nID0gJydcbiAgcHJpdmF0ZSBzZWxlY3RlZFNlYXRzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKVxuICBwcml2YXRlIG1heFNlYXRzOiBudW1iZXIgPSAxXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICAvLyBHZXQgYmFzZSBwcmljZSBmcm9tIGhpZGRlbiBmaWVsZFxuICAgIGNvbnN0IHByaWNlRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9va2luZ190b3RhbF9wcmljZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBpZiAocHJpY2VGaWVsZCkge1xuICAgICAgdGhpcy5iYXNlUHJpY2UgPSBwYXJzZUZsb2F0KHByaWNlRmllbGQudmFsdWUgfHwgJzAnKVxuICAgIH1cbiAgICB0aGlzLnVwZGF0ZVRvdGFsUHJpY2UoKVxuICB9XG5cbiAgc2VsZWN0UGFzc2VuZ2VyKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHJhZGlvID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgcGFzc2VuZ2VyTmFtZSA9IHJhZGlvLmRhdGFzZXQucGFzc2VuZ2VyTmFtZSB8fCAnJ1xuICAgIGNvbnN0IGlkTnVtYmVyID0gcmFkaW8uZGF0YXNldC5pZE51bWJlciB8fCAnJ1xuICAgIGNvbnN0IHBob25lID0gcmFkaW8uZGF0YXNldC5waG9uZSB8fCAnJ1xuXG4gICAgLy8gVXBkYXRlIGhpZGRlbiBmaWVsZHNcbiAgICBjb25zdCBuYW1lRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9va2luZ19wYXNzZW5nZXJfbmFtZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBpZEZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jvb2tpbmdfcGFzc2VuZ2VyX2lkX251bWJlcicpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBwaG9uZUZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jvb2tpbmdfY29udGFjdF9waG9uZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcblxuICAgIGlmIChuYW1lRmllbGQpIG5hbWVGaWVsZC52YWx1ZSA9IHBhc3Nlbmdlck5hbWVcbiAgICBpZiAoaWRGaWVsZCkgaWRGaWVsZC52YWx1ZSA9IGlkTnVtYmVyXG4gICAgaWYgKHBob25lRmllbGQpIHBob25lRmllbGQudmFsdWUgPSBwaG9uZVxuICB9XG5cbiAgc2VsZWN0Q2FycmlhZ2UoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGNvbnN0IGNhcnJpYWdlID0gYnV0dG9uLmRhdGFzZXQuY2FycmlhZ2UgfHwgJydcblxuICAgIC8vIENoZWNrIGlmIGNsaWNraW5nIHRoZSBhbHJlYWR5IHNlbGVjdGVkIGNhcnJpYWdlICh0b2dnbGUgb2ZmKVxuICAgIGlmICh0aGlzLmN1cnJlbnRDYXJyaWFnZSA9PT0gY2FycmlhZ2UpIHtcbiAgICAgIC8vIERlc2VsZWN0IGN1cnJlbnQgY2FycmlhZ2VcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1vcmFuZ2UtNTAwJywgJ3RleHQtd2hpdGUnLCAnYm9yZGVyLW9yYW5nZS01MDAnKVxuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2JnLXdoaXRlJywgJ3RleHQtZ3JheS03MDAnLCAnYm9yZGVyLWdyYXktMzAwJylcbiAgICAgIHRoaXMuc2VsZWN0ZWRDYXJyaWFnZVRhcmdldC52YWx1ZSA9ICcnXG4gICAgICB0aGlzLmN1cnJlbnRDYXJyaWFnZSA9ICcnXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIERlc2VsZWN0IGFsbCBidXR0b25zIGZpcnN0XG4gICAgICB0aGlzLmNhcnJpYWdlQnV0dG9uVGFyZ2V0cy5mb3JFYWNoKGJ0biA9PiB7XG4gICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1vcmFuZ2UtNTAwJywgJ3RleHQtd2hpdGUnLCAnYm9yZGVyLW9yYW5nZS01MDAnKVxuICAgICAgICBidG4uY2xhc3NMaXN0LmFkZCgnYmctd2hpdGUnLCAndGV4dC1ncmF5LTcwMCcsICdib3JkZXItZ3JheS0zMDAnKVxuICAgICAgfSlcblxuICAgICAgLy8gU2VsZWN0IG5ldyBjYXJyaWFnZVxuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLXdoaXRlJywgJ3RleHQtZ3JheS03MDAnLCAnYm9yZGVyLWdyYXktMzAwJylcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdiZy1vcmFuZ2UtNTAwJywgJ3RleHQtd2hpdGUnLCAnYm9yZGVyLW9yYW5nZS01MDAnKVxuICAgICAgdGhpcy5zZWxlY3RlZENhcnJpYWdlVGFyZ2V0LnZhbHVlID0gY2FycmlhZ2VcbiAgICAgIHRoaXMuY3VycmVudENhcnJpYWdlID0gY2FycmlhZ2VcbiAgICB9XG4gIH1cblxuICBzZWxlY3RTZWF0KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBjb25zdCBzZWF0TGV0dGVyID0gYnV0dG9uLmRhdGFzZXQuc2VhdExldHRlciB8fCAnJ1xuXG4gICAgaWYgKCFzZWF0TGV0dGVyKSByZXR1cm5cblxuICAgIC8vIFRvZ2dsZSBzZWF0IHNlbGVjdGlvblxuICAgIGlmICh0aGlzLnNlbGVjdGVkU2VhdHMuaGFzKHNlYXRMZXR0ZXIpKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkU2VhdHMuZGVsZXRlKHNlYXRMZXR0ZXIpXG4gICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYmctb3JhbmdlLTUwMCcsICd0ZXh0LXdoaXRlJywgJ2JvcmRlci1vcmFuZ2UtNTAwJylcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdiZy13aGl0ZScsICd0ZXh0LWdyYXktNzAwJywgJ2JvcmRlci1ncmF5LTMwMCcpXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENoZWNrIGlmIG1heCBzZWF0cyByZWFjaGVkXG4gICAgICBpZiAodGhpcy5zZWxlY3RlZFNlYXRzLnNpemUgPj0gdGhpcy5tYXhTZWF0cykge1xuICAgICAgICB3aW5kb3cuc2hvd1RvYXN0KGBcdTY3MDBcdTU5MUFcdTUzRUFcdTgwRkRcdTkwMDlcdTYyRTkke3RoaXMubWF4U2VhdHN9XHU0RTJBXHU1RUE3XHU0RjREYClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICB0aGlzLnNlbGVjdGVkU2VhdHMuYWRkKHNlYXRMZXR0ZXIpXG4gICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYmctd2hpdGUnLCAndGV4dC1ncmF5LTcwMCcsICdib3JkZXItZ3JheS0zMDAnLCAnYmctZ3JheS0xMDAnLCAndGV4dC1ncmF5LTQwMCcpXG4gICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYmctb3JhbmdlLTUwMCcsICd0ZXh0LXdoaXRlJywgJ2JvcmRlci1vcmFuZ2UtNTAwJylcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgc2VsZWN0ZWQgY291bnQgZGlzcGxheVxuICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRTZWF0Q291bnQoKVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVTZWxlY3RlZFNlYXRDb3VudCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zZWxlY3RlZFNlYXRDb3VudFRhcmdldCkge1xuICAgICAgdGhpcy5zZWxlY3RlZFNlYXRDb3VudFRhcmdldC50ZXh0Q29udGVudCA9IGAke3RoaXMuc2VsZWN0ZWRTZWF0cy5zaXplfS8ke3RoaXMubWF4U2VhdHN9YFxuICAgIH1cbiAgfVxuXG4gIHRvZ2dsZU5lYXJEb29yKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNoZWNrYm94ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgLy8gVGhpcyBpcyBqdXN0IGZvciBVSSBpbnRlcmFjdGlvblxuICAgIC8vIFJlYWwgaW1wbGVtZW50YXRpb24gd291bGQgYWRkIFx1MDBBNTEyIHRvIHRoZSBwcmljZVxuICAgIGlmIChjaGVja2JveC5jaGVja2VkKSB7XG4gICAgICBjb25zb2xlLmxvZygnTmVhciBkb29yIG9wdGlvbiBzZWxlY3RlZCcpXG4gICAgfVxuICB9XG5cbiAgaGFuZGxlTm9ybWFsQm9va2luZygpOiB2b2lkIHtcbiAgICAvLyBWYWxpZGF0ZSBhbmQgc3VibWl0IHRoZSBmb3JtIGZvciBub3JtYWwgYm9va2luZ1xuICAgIGNvbnN0IGZvcm0gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignZm9ybScpIGFzIEhUTUxGb3JtRWxlbWVudFxuICAgIGlmICghZm9ybSkgcmV0dXJuXG5cbiAgICAvLyBWYWxpZGF0ZSBwYXNzZW5nZXIgc2VsZWN0aW9uXG4gICAgY29uc3QgcGFzc2VuZ2VyUmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwicGFzc2VuZ2VyXCJdOmNoZWNrZWQnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgaWYgKCFwYXNzZW5nZXJSYWRpbykge1xuICAgICAgd2luZG93LnNob3dUb2FzdCgnXHU4QkY3XHU5MDA5XHU2MkU5XHU0RTU4XHU4RjY2XHU0RUJBJylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIGNvbnRhY3QgcGhvbmVcbiAgICBjb25zdCBwaG9uZUZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jvb2tpbmdfY29udGFjdF9waG9uZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBpZiAoIXBob25lRmllbGQgfHwgIXBob25lRmllbGQudmFsdWUudHJpbSgpKSB7XG4gICAgICB3aW5kb3cuc2hvd1RvYXN0KCdcdThCRjdcdThGOTNcdTUxNjVcdTgwNTRcdTdDRkJcdTYyNEJcdTY3M0EnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gU2V0IGFjY2VwdF90ZXJtcyB0byAxIChcdTY2NkVcdTkwMUFcdTk4ODRcdThCQTJcdTgxRUFcdTUyQThcdTU0MENcdTYxMEZcdTUzNEZcdThCQUUpXG4gICAgY29uc3QgYWNjZXB0VGVybXNGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib29raW5nX2FjY2VwdF90ZXJtcycpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBpZiAoYWNjZXB0VGVybXNGaWVsZCkge1xuICAgICAgYWNjZXB0VGVybXNGaWVsZC52YWx1ZSA9ICcxJ1xuICAgIH1cblxuICAgIC8vIFVzZSBuYXRpdmUgc3VibWl0IHRvIGJ5cGFzcyBoYW5kbGVTdWJtaXQgZXZlbnQgbGlzdGVuZXJcbiAgICBIVE1MRm9ybUVsZW1lbnQucHJvdG90eXBlLnN1Ym1pdC5jYWxsKGZvcm0pXG4gIH1cblxuICBzZWxlY3RJbnN1cmFuY2VPcHRpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgcmFkaW8gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBpbnN1cmFuY2VUeXBlID0gcmFkaW8udmFsdWVcbiAgICBjb25zdCBpbnN1cmFuY2VQcmljZSA9IHBhcnNlRmxvYXQocmFkaW8uZGF0YXNldC5wcmljZSB8fCAnMCcpXG5cbiAgICBjb25zdCBpbnN1cmFuY2VUeXBlRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9va2luZ19pbnN1cmFuY2VfdHlwZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBpbnN1cmFuY2VQcmljZUZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jvb2tpbmdfaW5zdXJhbmNlX3ByaWNlJykgYXMgSFRNTElucHV0RWxlbWVudFxuXG4gICAgaWYgKGluc3VyYW5jZVR5cGVGaWVsZCkgaW5zdXJhbmNlVHlwZUZpZWxkLnZhbHVlID0gaW5zdXJhbmNlVHlwZVxuICAgIGlmIChpbnN1cmFuY2VQcmljZUZpZWxkKSBpbnN1cmFuY2VQcmljZUZpZWxkLnZhbHVlID0gaW5zdXJhbmNlUHJpY2UudG9TdHJpbmcoKVxuXG4gICAgdGhpcy5pbnN1cmFuY2VQcmljZSA9IGluc3VyYW5jZVByaWNlXG4gICAgdGhpcy51cGRhdGVUb3RhbFByaWNlKClcbiAgfVxuXG4gIGhhbmRsZVN1Ym1pdChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICAvLyBWYWxpZGF0ZSBwYXNzZW5nZXIgc2VsZWN0aW9uXG4gICAgY29uc3QgcGFzc2VuZ2VyUmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwicGFzc2VuZ2VyXCJdOmNoZWNrZWQnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgaWYgKCFwYXNzZW5nZXJSYWRpbykge1xuICAgICAgYWxlcnQoJ1x1OEJGN1x1OTAwOVx1NjJFOVx1NEU1OFx1OEY2Nlx1NEVCQScpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBWYWxpZGF0ZSBjb250YWN0IHBob25lXG4gICAgY29uc3QgcGhvbmVGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib29raW5nX2NvbnRhY3RfcGhvbmUnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgaWYgKCFwaG9uZUZpZWxkIHx8ICFwaG9uZUZpZWxkLnZhbHVlLnRyaW0oKSkge1xuICAgICAgYWxlcnQoJ1x1OEJGN1x1OEY5M1x1NTE2NVx1ODA1NFx1N0NGQlx1NjI0Qlx1NjczQScpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBDaGVjayB0ZXJtcyBhY2NlcHRhbmNlXG4gICAgY29uc3QgdmlzdWFsQ2hlY2tib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlzdWFsX2FjY2VwdF90ZXJtcycpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBpZiAoIXZpc3VhbENoZWNrYm94IHx8ICF2aXN1YWxDaGVja2JveC5jaGVja2VkKSB7XG4gICAgICB0aGlzLnNob3dUZXJtc01vZGFsKClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIENoZWNrIGluc3VyYW5jZSBzZWxlY3Rpb25cbiAgICBjb25zdCBpbnN1cmFuY2VUeXBlRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9va2luZ19pbnN1cmFuY2VfdHlwZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBpbnN1cmFuY2VUeXBlID0gaW5zdXJhbmNlVHlwZUZpZWxkPy52YWx1ZSB8fCAnbm9uZSdcblxuICAgIGlmIChpbnN1cmFuY2VUeXBlID09PSAnbm9uZScpIHtcbiAgICAgIHRoaXMuc2hvd0luc3VyYW5jZU1vZGFsKClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdWJtaXRCb29raW5nKClcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNob3dUZXJtc01vZGFsKCk6IHZvaWQge1xuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBtb2RhbC5jbGFzc05hbWUgPSAnZml4ZWQgaW5zZXQtMCBiZy1ibGFjayBiZy1vcGFjaXR5LTUwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHotNTAnXG4gICAgbW9kYWwuaW5uZXJIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cImJnLXdoaXRlIHJvdW5kZWQtbGcgcC02IG1heC13LW1kIG14LTRcIj5cbiAgICAgICAgPGgzIGNsYXNzPVwidGV4dC14bCBmb250LWJvbGQgbWItNFwiPlx1NzUyOFx1NjIzN1x1NTM0Rlx1OEJBRVx1NTQ4Q1x1OTY5MFx1NzlDMVx1NjUzRlx1N0I1NjwvaDM+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtYXgtaC02MCBvdmVyZmxvdy15LWF1dG8gbWItNCB0ZXh0LXNtIHRleHQtZ3JheS02MDBcIj5cbiAgICAgICAgICA8cCBjbGFzcz1cIm1iLTJcIj5cdTZCMjJcdThGQ0VcdTRGN0ZcdTc1MjhcdTYyMTFcdTRFRUNcdTc2ODRcdTY3MERcdTUyQTFcdTMwMDJcdThCRjdcdTRFRDRcdTdFQzZcdTk2MDVcdThCRkJcdTRFRTVcdTRFMEJcdTY3NjFcdTZCM0VcdUZGMUE8L3A+XG4gICAgICAgICAgPHAgY2xhc3M9XCJtYi0yXCI+MS4gXHU2NzBEXHU1MkExXHU2NzYxXHU2QjNFLi4uPC9wPlxuICAgICAgICAgIDxwIGNsYXNzPVwibWItMlwiPjIuIFx1OTY5MFx1NzlDMVx1NjUzRlx1N0I1Ni4uLjwvcD5cbiAgICAgICAgICA8cCBjbGFzcz1cIm1iLTJcIj4zLiBcdTkwMDBcdTY1MzlcdTg5QzRcdTUyMTkuLi48L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBzcGFjZS14LTNcIj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZmxleC0xIHB5LTMgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkXCIgZGF0YS1hY3Rpb249XCJkZWNsaW5lXCI+XG4gICAgICAgICAgICBcdTRFMERcdTU0MENcdTYxMEZcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZmxleC0xIHB5LTMgYmctb3JhbmdlLTUwMCB0ZXh0LXdoaXRlIHJvdW5kZWRcIiBkYXRhLWFjdGlvbj1cImFjY2VwdFwiPlxuICAgICAgICAgICAgXHU1NDBDXHU2MTBGXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYFxuXG4gICAgY29uc3QgZGVjbGluZUJ0biA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWFjdGlvbj1cImRlY2xpbmVcIl0nKVxuICAgIGNvbnN0IGFjY2VwdEJ0biA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWFjdGlvbj1cImFjY2VwdFwiXScpXG5cbiAgICBkZWNsaW5lQnRuPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobW9kYWwpXG4gICAgfSlcblxuICAgIGFjY2VwdEJ0bj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmFjY2VwdFRlcm1zKClcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobW9kYWwpXG4gICAgfSlcblxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobW9kYWwpXG4gIH1cblxuICBwcml2YXRlIGFjY2VwdFRlcm1zKCk6IHZvaWQge1xuICAgIGNvbnN0IHZpc3VhbENoZWNrYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Zpc3VhbF9hY2NlcHRfdGVybXMnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgaGlkZGVuRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9va2luZ19hY2NlcHRfdGVybXMnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgXG4gICAgaWYgKHZpc3VhbENoZWNrYm94KSB2aXN1YWxDaGVja2JveC5jaGVja2VkID0gdHJ1ZVxuICAgIGlmIChoaWRkZW5GaWVsZCkgaGlkZGVuRmllbGQudmFsdWUgPSAnMSdcblxuICAgIC8vIENoZWNrIGluc3VyYW5jZSBhZ2FpblxuICAgIGNvbnN0IGluc3VyYW5jZVR5cGVGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib29raW5nX2luc3VyYW5jZV90eXBlJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IGluc3VyYW5jZVR5cGUgPSBpbnN1cmFuY2VUeXBlRmllbGQ/LnZhbHVlIHx8ICdub25lJ1xuXG4gICAgaWYgKGluc3VyYW5jZVR5cGUgPT09ICdub25lJykge1xuICAgICAgdGhpcy5zaG93SW5zdXJhbmNlTW9kYWwoKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN1Ym1pdEJvb2tpbmcoKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2hvd0luc3VyYW5jZU1vZGFsKCk6IHZvaWQge1xuICAgIGNvbnN0IGV4aXN0aW5nTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zdXJhbmNlX3JlY29tbWVuZGF0aW9uX21vZGFsJylcbiAgICBpZiAoZXhpc3RpbmdNb2RhbCkge1xuICAgICAgZXhpc3RpbmdNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIG1vZGFsLmlkID0gJ2luc3VyYW5jZV9yZWNvbW1lbmRhdGlvbl9tb2RhbCdcbiAgICBtb2RhbC5jbGFzc05hbWUgPSAnZml4ZWQgaW5zZXQtMCBiZy1ibGFjayBiZy1vcGFjaXR5LTUwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHotNTAnXG4gICAgbW9kYWwuaW5uZXJIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cImJnLXdoaXRlIHJvdW5kZWQtbGcgcC02IG1heC13LW1kIG14LTRcIj5cbiAgICAgICAgPGgzIGNsYXNzPVwidGV4dC14bCBmb250LWJvbGQgbWItNFwiPlx1NUVGQVx1OEJBRVx1OEQyRFx1NEU3MFx1NEZERFx1OTY2OTwvaDM+XG4gICAgICAgIDxwIGNsYXNzPVwidGV4dC1ncmF5LTYwMCBtYi02XCI+XHU0RTNBXHU0RTg2XHU2MEE4XHU3Njg0XHU1MUZBXHU4ODRDXHU1Qjg5XHU1MTY4XHVGRjBDXHU1RUZBXHU4QkFFXHU4RDJEXHU0RTcwXHU1MUZBXHU4ODRDXHU0RkREXHU5NjY5PC9wPlxuICAgICAgICBcbiAgICAgICAgPGRpdiBjbGFzcz1cInNwYWNlLXktMyBtYi02XCI+XG4gICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHAtMyBib3JkZXIgcm91bmRlZCBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvbnQtbWVkaXVtXCI+XHU2ODA3XHU1MUM2XHU0RkREXHU5NjY5PC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj5cdTAwQTUzMDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cImluc3VyYW5jZV9tb2RhbFwiIHZhbHVlPVwic3RhbmRhcmRcIiBkYXRhLXByaWNlPVwiMzBcIiBjbGFzcz1cInctNSBoLTVcIiAvPlxuICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgXG4gICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHAtMyBib3JkZXIgcm91bmRlZCBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvbnQtbWVkaXVtXCI+XHU5QUQ4XHU3RUE3XHU0RkREXHU5NjY5PC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj5cdTAwQTU1MDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cImluc3VyYW5jZV9tb2RhbFwiIHZhbHVlPVwicHJlbWl1bVwiIGRhdGEtcHJpY2U9XCI1MFwiIGNsYXNzPVwidy01IGgtNVwiIC8+XG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIFxuICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBzcGFjZS14LTNcIj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZmxleC0xIHB5LTMgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkXCIgZGF0YS1hY3Rpb249XCJza2lwLWluc3VyYW5jZVwiPlxuICAgICAgICAgICAgXHU2NTNFXHU1RjAzXHU0RkREXHU5NjY5XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImZsZXgtMSBweS0zIGJnLW9yYW5nZS01MDAgdGV4dC13aGl0ZSByb3VuZGVkXCIgZGF0YS1hY3Rpb249XCJzZWxlY3QtaW5zdXJhbmNlXCI+XG4gICAgICAgICAgICBcdTc4NkVcdThCQTRcdTkwMDlcdTYyRTlcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgXG5cbiAgICBjb25zdCBza2lwQnRuID0gbW9kYWwucXVlcnlTZWxlY3RvcignW2RhdGEtYWN0aW9uPVwic2tpcC1pbnN1cmFuY2VcIl0nKVxuICAgIGNvbnN0IHNlbGVjdEJ0biA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWFjdGlvbj1cInNlbGVjdC1pbnN1cmFuY2VcIl0nKVxuXG4gICAgc2tpcEJ0bj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG1vZGFsKVxuICAgICAgdGhpcy5zdWJtaXRCb29raW5nKClcbiAgICB9KVxuXG4gICAgc2VsZWN0QnRuPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGNvbnN0IHNlbGVjdGVkUmFkaW8gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwiaW5zdXJhbmNlX21vZGFsXCJdOmNoZWNrZWQnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgICBpZiAoc2VsZWN0ZWRSYWRpbykge1xuICAgICAgICBjb25zdCBpbnN1cmFuY2VUeXBlID0gc2VsZWN0ZWRSYWRpby52YWx1ZVxuICAgICAgICBjb25zdCBpbnN1cmFuY2VQcmljZSA9IHBhcnNlRmxvYXQoc2VsZWN0ZWRSYWRpby5kYXRhc2V0LnByaWNlIHx8ICcwJylcblxuICAgICAgICBjb25zdCBpbnN1cmFuY2VUeXBlRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9va2luZ19pbnN1cmFuY2VfdHlwZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICAgICAgY29uc3QgaW5zdXJhbmNlUHJpY2VGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib29raW5nX2luc3VyYW5jZV9wcmljZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcblxuICAgICAgICBpZiAoaW5zdXJhbmNlVHlwZUZpZWxkKSBpbnN1cmFuY2VUeXBlRmllbGQudmFsdWUgPSBpbnN1cmFuY2VUeXBlXG4gICAgICAgIGlmIChpbnN1cmFuY2VQcmljZUZpZWxkKSBpbnN1cmFuY2VQcmljZUZpZWxkLnZhbHVlID0gaW5zdXJhbmNlUHJpY2UudG9TdHJpbmcoKVxuXG4gICAgICAgIHRoaXMuaW5zdXJhbmNlUHJpY2UgPSBpbnN1cmFuY2VQcmljZVxuICAgICAgICB0aGlzLnVwZGF0ZVRvdGFsUHJpY2UoKVxuICAgICAgfVxuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChtb2RhbClcbiAgICAgIHRoaXMuc3VibWl0Qm9va2luZygpXG4gICAgfSlcblxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobW9kYWwpXG4gIH1cblxuICBwcml2YXRlIHN1Ym1pdEJvb2tpbmcoKTogdm9pZCB7XG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIGNvbnN0IGZvcm0gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignZm9ybScpIGFzIEhUTUxGb3JtRWxlbWVudFxuICAgIGlmIChmb3JtKSB7XG4gICAgICBmb3JtLnN1Ym1pdCgpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVUb3RhbFByaWNlKCk6IHZvaWQge1xuICAgIGNvbnN0IHRvdGFsID0gdGhpcy5iYXNlUHJpY2UgKyB0aGlzLmluc3VyYW5jZVByaWNlXG4gICAgaWYgKHRoaXMudG90YWxQcmljZVRhcmdldCkge1xuICAgICAgdGhpcy50b3RhbFByaWNlVGFyZ2V0LnRleHRDb250ZW50ID0gYFx1MDBBNSR7TWF0aC5yb3VuZCh0b3RhbCl9YFxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwic3RhdHVzVGl0bGVcIixcbiAgICBcInN0YXR1c01lc3NhZ2VcIixcbiAgICBcInByb2dyZXNzUGVyY2VudFwiLFxuICAgIFwicHJvZ3Jlc3NDaXJjbGVcIixcbiAgICBcInNlYXRJY29uXCIsXG4gICAgXCJzZWF0RGlzcGxheVwiLFxuICAgIFwic2VhdEJhZGdlXCIsXG4gICAgXCJwYXltZW50QmFyXCIsXG4gICAgXCJjYW5jZWxCYXJcIlxuICBdXG5cbiAgZGVjbGFyZSByZWFkb25seSBzdGF0dXNUaXRsZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzdGF0dXNNZXNzYWdlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHByb2dyZXNzUGVyY2VudFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBwcm9ncmVzc0NpcmNsZVRhcmdldDogU1ZHQ2lyY2xlRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlYXRJY29uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlYXREaXNwbGF5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlYXRCYWRnZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBwYXltZW50QmFyVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNhbmNlbEJhclRhcmdldDogSFRNTEVsZW1lbnRcblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1N0YXR1c1RpdGxlVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzU3RhdHVzTWVzc2FnZVRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1Byb2dyZXNzUGVyY2VudFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1Byb2dyZXNzQ2lyY2xlVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzU2VhdEljb25UYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNTZWF0RGlzcGxheVRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1NlYXRCYWRnZVRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1BheW1lbnRCYXJUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNDYW5jZWxCYXJUYXJnZXQ6IGJvb2xlYW5cblxuICBwcml2YXRlIGxvY2tpbmdJbnRlcnZhbDogbnVtYmVyIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSBjdXJyZW50UHJvZ3Jlc3M6IG51bWJlciA9IDBcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIFN0YXJ0IHRoZSBsb2NraW5nIGFuaW1hdGlvblxuICAgIHRoaXMuc3RhcnRMb2NraW5nQW5pbWF0aW9uKClcbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubG9ja2luZ0ludGVydmFsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMubG9ja2luZ0ludGVydmFsKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc3RhcnRMb2NraW5nQW5pbWF0aW9uKCk6IHZvaWQge1xuICAgIGNvbnN0IHRvdGFsRHVyYXRpb24gPSA1MDAwIC8vIDUgc2Vjb25kc1xuICAgIGNvbnN0IHVwZGF0ZUludGVydmFsID0gNTAgLy8gVXBkYXRlIGV2ZXJ5IDUwbXNcbiAgICBjb25zdCB0b3RhbFN0ZXBzID0gdG90YWxEdXJhdGlvbiAvIHVwZGF0ZUludGVydmFsXG4gICAgY29uc3QgcHJvZ3Jlc3NTdGVwID0gMTAwIC8gdG90YWxTdGVwc1xuXG4gICAgdGhpcy5sb2NraW5nSW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgdGhpcy5jdXJyZW50UHJvZ3Jlc3MgKz0gcHJvZ3Jlc3NTdGVwXG5cbiAgICAgIGlmICh0aGlzLmN1cnJlbnRQcm9ncmVzcyA+PSAxMDApIHtcbiAgICAgICAgdGhpcy5jdXJyZW50UHJvZ3Jlc3MgPSAxMDBcbiAgICAgICAgdGhpcy5jb21wbGV0ZUxvY2tpbmcoKVxuICAgICAgICBpZiAodGhpcy5sb2NraW5nSW50ZXJ2YWwpIHtcbiAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMubG9ja2luZ0ludGVydmFsKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMudXBkYXRlUHJvZ3Jlc3ModGhpcy5jdXJyZW50UHJvZ3Jlc3MpXG4gICAgfSwgdXBkYXRlSW50ZXJ2YWwpXG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVByb2dyZXNzKHByb2dyZXNzOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBVcGRhdGUgcGVyY2VudGFnZSB0ZXh0XG4gICAgaWYgKHRoaXMuaGFzUHJvZ3Jlc3NQZXJjZW50VGFyZ2V0KSB7XG4gICAgICB0aGlzLnByb2dyZXNzUGVyY2VudFRhcmdldC50ZXh0Q29udGVudCA9IE1hdGguZmxvb3IocHJvZ3Jlc3MpLnRvU3RyaW5nKClcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgY2lyY3VsYXIgcHJvZ3Jlc3NcbiAgICBpZiAodGhpcy5oYXNQcm9ncmVzc0NpcmNsZVRhcmdldCkge1xuICAgICAgY29uc3QgY2lyY3VtZmVyZW5jZSA9IDUzNCAvLyAyICogUEkgKiA4NVxuICAgICAgY29uc3Qgb2Zmc2V0ID0gY2lyY3VtZmVyZW5jZSAtIChwcm9ncmVzcyAvIDEwMCkgKiBjaXJjdW1mZXJlbmNlXG4gICAgICB0aGlzLnByb2dyZXNzQ2lyY2xlVGFyZ2V0LnN0eWxlLnN0cm9rZURhc2hvZmZzZXQgPSBvZmZzZXQudG9TdHJpbmcoKVxuICAgIH1cblxuICAgIC8vIEFuaW1hdGUgc2VhdCBpY29uXG4gICAgaWYgKHRoaXMuaGFzU2VhdEljb25UYXJnZXQpIHtcbiAgICAgIC8vIFB1bHNlIGFuaW1hdGlvbiBhdCBjZXJ0YWluIHByb2dyZXNzIHBvaW50c1xuICAgICAgaWYgKHByb2dyZXNzICUgMjAgPCAyKSB7XG4gICAgICAgIHRoaXMuc2VhdEljb25UYXJnZXQuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDEuMiknXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLmhhc1NlYXRJY29uVGFyZ2V0KSB7XG4gICAgICAgICAgICB0aGlzLnNlYXRJY29uVGFyZ2V0LnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZSgxKSdcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDIwMClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNvbXBsZXRlTG9ja2luZygpOiB2b2lkIHtcbiAgICAvLyBVcGRhdGUgc3RhdHVzIHRpdGxlXG4gICAgaWYgKHRoaXMuaGFzU3RhdHVzVGl0bGVUYXJnZXQpIHtcbiAgICAgIHRoaXMuc3RhdHVzVGl0bGVUYXJnZXQudGV4dENvbnRlbnQgPSAnXHU1MzYwXHU1RUE3XHU2MjEwXHU1MjlGJ1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBzdGF0dXMgbWVzc2FnZSB3aXRoIGNvdW50ZG93blxuICAgIGlmICh0aGlzLmhhc1N0YXR1c01lc3NhZ2VUYXJnZXQpIHtcbiAgICAgIGNvbnN0IGV4cGlyeVRpbWUgPSBuZXcgRGF0ZSgpXG4gICAgICBleHBpcnlUaW1lLnNldE1pbnV0ZXMoZXhwaXJ5VGltZS5nZXRNaW51dGVzKCkgKyAxNSlcbiAgICAgIGNvbnN0IGhvdXJzID0gZXhwaXJ5VGltZS5nZXRIb3VycygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKVxuICAgICAgY29uc3QgbWludXRlcyA9IGV4cGlyeVRpbWUuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKVxuICAgICAgY29uc3QgdGltZVN0cmluZyA9IGAke2hvdXJzfToke21pbnV0ZXN9YFxuICAgICAgdGhpcy5zdGF0dXNNZXNzYWdlVGFyZ2V0LmlubmVySFRNTCA9IGBcdThCRjdcdTU3Mjg8c3BhbiBjbGFzcz1cInRleHQtcmVkLTYwMFwiPiR7dGltZVN0cmluZ308L3NwYW4+XHU1MTg1XHU1QjhDXHU2MjEwXHU2NTJGXHU0RUQ4XHVGRjBDXHU4RDg1XHU2NUY2XHU4QkEyXHU1MzU1XHU1QzA2XHU1MTczXHU5NUVEYFxuICAgIH1cblxuICAgIC8vIFNob3cgc2VhdCBpbmZvcm1hdGlvblxuICAgIGlmICh0aGlzLmhhc1NlYXREaXNwbGF5VGFyZ2V0KSB7XG4gICAgICB0aGlzLnNlYXREaXNwbGF5VGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJ1xuICAgIH1cblxuICAgIGlmICh0aGlzLmhhc1NlYXRCYWRnZVRhcmdldCkge1xuICAgICAgdGhpcy5zZWF0QmFkZ2VUYXJnZXQuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snXG4gICAgfVxuXG4gICAgLy8gQ2hhbmdlIHNlYXQgaWNvbiB0byBpbmRpY2F0ZSBzdWNjZXNzXG4gICAgaWYgKHRoaXMuaGFzU2VhdEljb25UYXJnZXQpIHtcbiAgICAgIHRoaXMuc2VhdEljb25UYXJnZXQudGV4dENvbnRlbnQgPSAnXHVEODNFXHVERTkxJ1xuICAgICAgdGhpcy5zZWF0SWNvblRhcmdldC5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGUoMS4zKSdcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5oYXNTZWF0SWNvblRhcmdldCkge1xuICAgICAgICAgIHRoaXMuc2VhdEljb25UYXJnZXQuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDEpJ1xuICAgICAgICB9XG4gICAgICB9LCAzMDApXG4gICAgfVxuXG4gICAgLy8gSGlkZSBjYW5jZWwgYnV0dG9uLCBzaG93IHBheW1lbnQgYnV0dG9uXG4gICAgaWYgKHRoaXMuaGFzQ2FuY2VsQmFyVGFyZ2V0KSB7XG4gICAgICB0aGlzLmNhbmNlbEJhclRhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaGFzUGF5bWVudEJhclRhcmdldCkge1xuICAgICAgdGhpcy5wYXltZW50QmFyVGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJzZWF0VGFiXCIsIFwib3B0aW9uc0NvbnRhaW5lclwiXVxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIHRyYWluSWQ6IFN0cmluZyxcbiAgICBzZWxlY3RlZFNlYXRUeXBlOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCJzZWNvbmRfY2xhc3NcIiB9XG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHNlYXRUYWJUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgb3B0aW9uc0NvbnRhaW5lclRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0cmFpbklkVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHNlbGVjdGVkU2VhdFR5cGVWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlRyYWluU2VhdFNlbGVjdG9yIGNvbm5lY3RlZFwiKVxuICAgIC8vIFx1OUVEOFx1OEJBNFx1OTAwOVx1NEUyRFx1N0IyQ1x1NEUwMFx1NEUyQVx1NUVBN1x1NEY0RFx1N0M3Qlx1NTc4QlxuICAgIGlmICh0aGlzLnNlYXRUYWJUYXJnZXRzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuc2VsZWN0U2VhdCh0aGlzLnNlYXRUYWJUYXJnZXRzWzBdKVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1OTAwOVx1NjJFOVx1NUVBN1x1NEY0RFx1N0M3Qlx1NTc4QlxuICBzZWxlY3RTZWF0KGV2ZW50OiBFdmVudCB8IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQgaW5zdGFuY2VvZiBFdmVudCA/IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQgOiBldmVudFxuICAgIGNvbnN0IHNlYXRUeXBlID0gdGFyZ2V0LmRhdGFzZXQuc2VhdFR5cGVcbiAgICBjb25zdCBzZWF0UHJpY2UgPSBwYXJzZUZsb2F0KHRhcmdldC5kYXRhc2V0LnNlYXRQcmljZSB8fCAnMCcpXG4gICAgXG4gICAgaWYgKCFzZWF0VHlwZSkgcmV0dXJuXG5cbiAgICAvLyBcdTY2RjRcdTY1QjBcdTkwMDlcdTRFMkRcdTcyQjZcdTYwMDFcbiAgICB0aGlzLnNlYXRUYWJUYXJnZXRzLmZvckVhY2godGFiID0+IHtcbiAgICAgIHRhYi5jbGFzc0xpc3QucmVtb3ZlKCdiZy13aGl0ZScsICdzaGFkb3cnKVxuICAgIH0pXG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2JnLXdoaXRlJywgJ3NoYWRvdycpXG5cbiAgICAvLyBcdTY2M0VcdTc5M0EvXHU5NjkwXHU4NUNGXHU1QzBGXHU0RTA5XHU4OUQyXHU1RjYyXG4gICAgdGhpcy5zZWF0VGFiVGFyZ2V0cy5mb3JFYWNoKHRhYiA9PiB7XG4gICAgICBjb25zdCBhcnJvdyA9IHRhYi5xdWVyeVNlbGVjdG9yKCcuc2VhdC1hcnJvdycpXG4gICAgICBpZiAoYXJyb3cpIHtcbiAgICAgICAgaWYgKHRhYiA9PT0gdGFyZ2V0KSB7XG4gICAgICAgICAgYXJyb3cuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcnJvdy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIFx1NjZGNFx1NjVCMFx1NUY1M1x1NTI0RFx1OTAwOVx1NEUyRFx1NzY4NFx1NUVBN1x1NEY0RFx1N0M3Qlx1NTc4QlxuICAgIHRoaXMuc2VsZWN0ZWRTZWF0VHlwZVZhbHVlID0gc2VhdFR5cGVcblxuICAgIC8vIFx1NjZGNFx1NjVCMFx1OEJBMlx1Nzk2OFx1OTAwOVx1OTg3OVx1NEUyRFx1NzY4NFx1NEVGN1x1NjgzQ1x1NTQ4Q1x1OTRGRVx1NjNBNVxuICAgIHRoaXMudXBkYXRlQm9va2luZ09wdGlvbnMoc2VhdFByaWNlKVxuICB9XG5cbiAgLy8gXHU2NkY0XHU2NUIwXHU2MjQwXHU2NzA5XHU4QkEyXHU3OTY4XHU5MDA5XHU5ODc5XHU3Njg0XHU0RUY3XHU2ODNDXHU1NDhDXHU5NEZFXHU2M0E1XG4gIHVwZGF0ZUJvb2tpbmdPcHRpb25zKGJhc2VQcmljZTogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gXHU2NkY0XHU2NUIwXHU5NEZFXHU2M0E1XHU3Njg0c2VhdF90eXBlXHU1M0MyXHU2NTcwXG4gICAgY29uc3QgbGlua3MgPSB0aGlzLm9wdGlvbnNDb250YWluZXJUYXJnZXQucXVlcnlTZWxlY3RvckFsbCgnYVtocmVmKj1cInRyYWluX2Jvb2tpbmdzL25ld1wiXScpXG4gICAgbGlua3MuZm9yRWFjaCgobGluazogRWxlbWVudCkgPT4ge1xuICAgICAgaWYgKGxpbmsgaW5zdGFuY2VvZiBIVE1MQW5jaG9yRWxlbWVudCkge1xuICAgICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGxpbmsuaHJlZiwgd2luZG93LmxvY2F0aW9uLm9yaWdpbilcbiAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3NlYXRfdHlwZScsIHRoaXMuc2VsZWN0ZWRTZWF0VHlwZVZhbHVlKVxuICAgICAgICBsaW5rLmhyZWYgPSB1cmwudG9TdHJpbmcoKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBcdTY2RjRcdTY1QjBcdTRFRjdcdTY4M0NcdTY2M0VcdTc5M0FcbiAgICBjb25zdCBwcmljZUVsZW1lbnRzID0gdGhpcy5vcHRpb25zQ29udGFpbmVyVGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ib29raW5nLW9wdGlvbi1wcmljZScpXG4gICAgcHJpY2VFbGVtZW50cy5mb3JFYWNoKChwcmljZUVsOiBFbGVtZW50KSA9PiB7XG4gICAgICBpZiAocHJpY2VFbCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGV4dHJhRmVlID0gcGFyc2VGbG9hdChwcmljZUVsLmRhdGFzZXQuZXh0cmFGZWUgfHwgJzAnKVxuICAgICAgICBjb25zdCB0b3RhbFByaWNlID0gTWF0aC5mbG9vcihiYXNlUHJpY2UgKyBleHRyYUZlZSlcbiAgICAgICAgcHJpY2VFbC50ZXh0Q29udGVudCA9IHRvdGFsUHJpY2UudG9TdHJpbmcoKVxuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcImRlc3RpbmF0aW9uSW5wdXRcIixcbiAgICBcImR1cmF0aW9uSW5wdXRcIixcbiAgICBcImdyb3VwU2l6ZUlucHV0XCIsXG4gICAgXCJkZXN0aW5hdGlvbkJ1dHRvblwiLFxuICAgIFwiZHVyYXRpb25CdXR0b25cIixcbiAgICBcImdyb3VwU2l6ZUJ1dHRvblwiLFxuICAgIFwiZGVwYXJ0dXJlRGlzcGxheVwiLFxuICAgIFwiZHVyYXRpb25Nb2RhbFwiLFxuICAgIFwiZHVyYXRpb25PcHRpb25cIixcbiAgICBcImR1cmF0aW9uTGFiZWxcIixcbiAgICBcImNsZWFyRHVyYXRpb25CdXR0b25cIixcbiAgICBcInF1aWNrRHVyYXRpb25CdXR0b25zXCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgZGVzdGluYXRpb246IFN0cmluZyxcbiAgICBkdXJhdGlvbjogU3RyaW5nLFxuICAgIGdyb3VwU2l6ZTogU3RyaW5nXG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IGRlc3RpbmF0aW9uSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkdXJhdGlvbklucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZ3JvdXBTaXplSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkZXN0aW5hdGlvbkJ1dHRvblRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBkdXJhdGlvbkJ1dHRvblRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBncm91cFNpemVCdXR0b25UYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVwYXJ0dXJlRGlzcGxheVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkdXJhdGlvbk1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGR1cmF0aW9uT3B0aW9uVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IGR1cmF0aW9uTGFiZWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY2xlYXJEdXJhdGlvbkJ1dHRvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBxdWlja0R1cmF0aW9uQnV0dG9uc1RhcmdldDogSFRNTEVsZW1lbnRcbiAgXG4gIGRlY2xhcmUgZGVzdGluYXRpb25WYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgZHVyYXRpb25WYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgZ3JvdXBTaXplVmFsdWU6IHN0cmluZ1xuICBcbiAgcHJpdmF0ZSB0ZW1wU2VsZWN0ZWREdXJhdGlvbjogc3RyaW5nID0gJydcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIExpc3RlbiBmb3IgY2l0eSBzZWxlY3Rpb24gY2hhbmdlcyBmcm9tIGNpdHktc2VsZWN0b3JcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2l0eS1zZWxlY3RvcjpjaXR5LWNoYW5nZWQnLCB0aGlzLmhhbmRsZUNpdHlDaGFuZ2VkLmJpbmQodGhpcykpXG4gICAgXG4gICAgLy8gQXV0by1zZWxlY3QgZ3JvdXAgc2l6ZSBpZiBwcm92aWRlZCB2aWEgVVJMIHBhcmFtZXRlclxuICAgIGlmICh0aGlzLmdyb3VwU2l6ZVZhbHVlKSB7XG4gICAgICB0aGlzLmF1dG9TZWxlY3RHcm91cFNpemUodGhpcy5ncm91cFNpemVWYWx1ZSlcbiAgICB9XG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjaXR5LXNlbGVjdG9yOmNpdHktY2hhbmdlZCcsIHRoaXMuaGFuZGxlQ2l0eUNoYW5nZWQuYmluZCh0aGlzKSlcbiAgfVxuXG4gIC8vIEhhbmRsZSBjaXR5IGNoYW5nZSBmcm9tIGNpdHktc2VsZWN0b3IgbW9kYWxcbiAgcHJpdmF0ZSBoYW5kbGVDaXR5Q2hhbmdlZChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjdXN0b21FdmVudCA9IGV2ZW50IGFzIEN1c3RvbUV2ZW50XG4gICAgY29uc3QgeyBjaXR5TmFtZSB9ID0gY3VzdG9tRXZlbnQuZGV0YWlsXG4gICAgY29uc29sZS5sb2coJ1RvdXJHcm91cEZpbHRlcjogQ2l0eSBjaGFuZ2VkIHRvJywgY2l0eU5hbWUpXG4gICAgXG4gICAgLy8gVXBkYXRlIGRlc3RpbmF0aW9uIHZhbHVlXG4gICAgdGhpcy5kZXN0aW5hdGlvblZhbHVlID0gY2l0eU5hbWVcbiAgICB0aGlzLmRlc3RpbmF0aW9uSW5wdXRUYXJnZXQudmFsdWUgPSBjaXR5TmFtZVxuICAgIFxuICAgIC8vIFVwZGF0ZSBob3QgZGVzdGluYXRpb24gYnV0dG9ucyAtIG9ubHkgaGlnaGxpZ2h0IGlmIGNpdHkgaXMgaW4gdGhlIGxpc3RcbiAgICB0aGlzLnVwZGF0ZUhvdERlc3RpbmF0aW9uQnV0dG9ucyhjaXR5TmFtZSlcbiAgfVxuXG4gIC8vIFVwZGF0ZSBob3QgZGVzdGluYXRpb24gYnV0dG9ucyBiYXNlZCBvbiBzZWxlY3RlZCBjaXR5XG4gIHByaXZhdGUgdXBkYXRlSG90RGVzdGluYXRpb25CdXR0b25zKGNpdHlOYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBsZXQgY2l0eUluSG90TGlzdCA9IGZhbHNlXG4gICAgXG4gICAgdGhpcy5kZXN0aW5hdGlvbkJ1dHRvblRhcmdldHMuZm9yRWFjaChidG4gPT4ge1xuICAgICAgY29uc3QgdGV4dFNwYW4gPSBidG4ucXVlcnlTZWxlY3Rvcignc3BhbjpsYXN0LWNoaWxkJykgYXMgSFRNTEVsZW1lbnRcbiAgICAgIGlmIChidG4uZGF0YXNldC5kZXN0aW5hdGlvbiA9PT0gY2l0eU5hbWUpIHtcbiAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLWdyYXktNTAnLCAnYm9yZGVyLXRyYW5zcGFyZW50JylcbiAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ2JnLVsjRkZFOENDXScsICdib3JkZXItWyNGRkQ3MDBdJywgJ3NoYWRvdy1tZCcpXG4gICAgICAgIGlmICh0ZXh0U3Bhbikge1xuICAgICAgICAgIHRleHRTcGFuLmNsYXNzTGlzdC5yZW1vdmUoJ2ZvbnQtbWVkaXVtJylcbiAgICAgICAgICB0ZXh0U3Bhbi5jbGFzc0xpc3QuYWRkKCdmb250LWJvbGQnKVxuICAgICAgICB9XG4gICAgICAgIGNpdHlJbkhvdExpc3QgPSB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBidG4uY2xhc3NMaXN0LmFkZCgnYmctZ3JheS01MCcsICdib3JkZXItdHJhbnNwYXJlbnQnKVxuICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYmctWyNGRkU4Q0NdJywgJ2JvcmRlci1bI0ZGRDcwMF0nLCAnc2hhZG93LW1kJylcbiAgICAgICAgaWYgKHRleHRTcGFuKSB7XG4gICAgICAgICAgdGV4dFNwYW4uY2xhc3NMaXN0LmFkZCgnZm9udC1tZWRpdW0nKVxuICAgICAgICAgIHRleHRTcGFuLmNsYXNzTGlzdC5yZW1vdmUoJ2ZvbnQtYm9sZCcpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIGNvbnNvbGUubG9nKGBDaXR5IFwiJHtjaXR5TmFtZX1cIiAke2NpdHlJbkhvdExpc3QgPyAnaXMnIDogJ2lzIG5vdCd9IGluIGhvdCBkZXN0aW5hdGlvbiBsaXN0YClcbiAgfVxuXG4gIC8vIFx1OTAwOVx1NjJFOVx1NzZFRVx1NzY4NFx1NTczMFxuICBzZWxlY3REZXN0aW5hdGlvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgZGVzdGluYXRpb24gPSBidXR0b24uZGF0YXNldC5kZXN0aW5hdGlvbiB8fCAnJ1xuICAgIFxuICAgIHRoaXMuZGVzdGluYXRpb25WYWx1ZSA9IGRlc3RpbmF0aW9uXG4gICAgdGhpcy5kZXN0aW5hdGlvbklucHV0VGFyZ2V0LnZhbHVlID0gZGVzdGluYXRpb25cbiAgICBcbiAgICAvLyBVcGRhdGUgXCJcdTYyMTFcdTYwRjNcdTUzQkJcIiBkaXNwbGF5IHRleHRcbiAgICB0aGlzLmRlcGFydHVyZURpc3BsYXlUYXJnZXQudGV4dENvbnRlbnQgPSBkZXN0aW5hdGlvblxuICAgIFxuICAgIC8vIFx1NjZGNFx1NjVCMFx1NjMwOVx1OTRBRVx1NjgzN1x1NUYwRlxuICAgIHRoaXMudXBkYXRlSG90RGVzdGluYXRpb25CdXR0b25zKGRlc3RpbmF0aW9uKVxuICB9XG5cbiAgLy8gXHU5MDA5XHU2MkU5XHU1OTI5XHU2NTcwXG4gIHNlbGVjdER1cmF0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBkdXJhdGlvbiA9IGJ1dHRvbi5kYXRhc2V0LmR1cmF0aW9uIHx8ICcnXG4gICAgXG4gICAgdGhpcy5kdXJhdGlvblZhbHVlID0gZHVyYXRpb25cbiAgICB0aGlzLmR1cmF0aW9uSW5wdXRUYXJnZXQudmFsdWUgPSBkdXJhdGlvblxuICAgIFxuICAgIC8vIFx1NjZGNFx1NjVCMFx1NjMwOVx1OTRBRVx1NjgzN1x1NUYwRlxuICAgIHRoaXMuZHVyYXRpb25CdXR0b25UYXJnZXRzLmZvckVhY2goYnRuID0+IHtcbiAgICAgIGNvbnN0IHRleHRTcGFuID0gYnRuLnF1ZXJ5U2VsZWN0b3IoJ3NwYW46Zmlyc3QtY2hpbGQnKSBhcyBIVE1MRWxlbWVudFxuICAgICAgaWYgKGJ0bi5kYXRhc2V0LmR1cmF0aW9uID09PSBkdXJhdGlvbikge1xuICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYmctZ3JheS01MCcsICdib3JkZXItdHJhbnNwYXJlbnQnKVxuICAgICAgICBidG4uY2xhc3NMaXN0LmFkZCgnYmctWyNGRkU4Q0NdJywgJ2JvcmRlci1bI0ZGRDcwMF0nLCAnc2hhZG93LW1kJylcbiAgICAgICAgaWYgKHRleHRTcGFuKSB7XG4gICAgICAgICAgdGV4dFNwYW4uY2xhc3NMaXN0LnJlbW92ZSgnZm9udC1tZWRpdW0nKVxuICAgICAgICAgIHRleHRTcGFuLmNsYXNzTGlzdC5hZGQoJ2ZvbnQtYm9sZCcpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdiZy1ncmF5LTUwJywgJ2JvcmRlci10cmFuc3BhcmVudCcpXG4gICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1bI0ZGRThDQ10nLCAnYm9yZGVyLVsjRkZENzAwXScsICdzaGFkb3ctbWQnKVxuICAgICAgICBpZiAodGV4dFNwYW4pIHtcbiAgICAgICAgICB0ZXh0U3Bhbi5jbGFzc0xpc3QuYWRkKCdmb250LW1lZGl1bScpXG4gICAgICAgICAgdGV4dFNwYW4uY2xhc3NMaXN0LnJlbW92ZSgnZm9udC1ib2xkJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyBPcGVuIGR1cmF0aW9uIG1vZGFsXG4gIG9wZW5EdXJhdGlvbk1vZGFsKCk6IHZvaWQge1xuICAgIC8vIFNhdmUgY3VycmVudCBkdXJhdGlvbiBhcyB0ZW1wXG4gICAgdGhpcy50ZW1wU2VsZWN0ZWREdXJhdGlvbiA9IHRoaXMuZHVyYXRpb25WYWx1ZVxuICAgIFxuICAgIC8vIFVwZGF0ZSBtb2RhbCBvcHRpb25zIHRvIHNob3cgY3VycmVudCBzZWxlY3Rpb25cbiAgICB0aGlzLnVwZGF0ZU1vZGFsT3B0aW9uU3R5bGVzKHRoaXMudGVtcFNlbGVjdGVkRHVyYXRpb24pXG4gICAgXG4gICAgdGhpcy5kdXJhdGlvbk1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nXG4gIH1cblxuICAvLyBDYW5jZWwgbW9kYWwgKGNsb3NlIGJ1dHRvbikgLSByZXN0b3JlIG9yaWdpbmFsIHNlbGVjdGlvblxuICBjYW5jZWxEdXJhdGlvbk1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMuZHVyYXRpb25Nb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJ1xuICB9XG5cbiAgLy8gQ2xvc2UgbW9kYWwgd2hlbiBjbGlja2luZyBvbiBiYWNrZHJvcCAtIHJlc3RvcmUgb3JpZ2luYWwgc2VsZWN0aW9uXG4gIGNsb3NlRHVyYXRpb25Nb2RhbE9uQmFja2Ryb3AoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gZXZlbnQuY3VycmVudFRhcmdldCkge1xuICAgICAgdGhpcy5jYW5jZWxEdXJhdGlvbk1vZGFsKClcbiAgICB9XG4gIH1cblxuICAvLyBTZWxlY3QgZHVyYXRpb24gaW4gbW9kYWwgKHRlbXBvcmFyeSBzZWxlY3Rpb24pXG4gIHNlbGVjdER1cmF0aW9uSW5Nb2RhbChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgZHVyYXRpb24gPSBidXR0b24uZGF0YXNldC5kdXJhdGlvbiB8fCAnJ1xuICAgIFxuICAgIC8vIFVwZGF0ZSB0ZW1wIHNlbGVjdGlvblxuICAgIHRoaXMudGVtcFNlbGVjdGVkRHVyYXRpb24gPSBkdXJhdGlvblxuICAgIFxuICAgIC8vIFVwZGF0ZSBtb2RhbCBvcHRpb24gc3R5bGVzXG4gICAgdGhpcy51cGRhdGVNb2RhbE9wdGlvblN0eWxlcyhkdXJhdGlvbilcbiAgfVxuXG4gIC8vIFVwZGF0ZSBtb2RhbCBvcHRpb24gYnV0dG9uIHN0eWxlc1xuICBwcml2YXRlIHVwZGF0ZU1vZGFsT3B0aW9uU3R5bGVzKHNlbGVjdGVkRHVyYXRpb246IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuZHVyYXRpb25PcHRpb25UYXJnZXRzLmZvckVhY2goYnRuID0+IHtcbiAgICAgIGlmIChidG4uZGF0YXNldC5kdXJhdGlvbiA9PT0gc2VsZWN0ZWREdXJhdGlvbikge1xuICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYmctZ3JheS0xMDAnLCAndGV4dC1ncmF5LTcwMCcpXG4gICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdiZy1bI0ZGRThDQ10nLCAndGV4dC1bI0I4ODYwQl0nLCAnZm9udC1ib2xkJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdiZy1ncmF5LTEwMCcsICd0ZXh0LWdyYXktNzAwJylcbiAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLVsjRkZFOENDXScsICd0ZXh0LVsjQjg4NjBCXScsICdmb250LWJvbGQnKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyBDbGVhciBkdXJhdGlvbiBpbiBtb2RhbCAodGVtcG9yYXJ5IGNsZWFyKVxuICBjbGVhckR1cmF0aW9uSW5Nb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLnRlbXBTZWxlY3RlZER1cmF0aW9uID0gJydcbiAgICB0aGlzLnVwZGF0ZU1vZGFsT3B0aW9uU3R5bGVzKCcnKVxuICB9XG5cbiAgLy8gQ29uZmlybSBkdXJhdGlvbiBzZWxlY3Rpb25cbiAgY29uZmlybUR1cmF0aW9uU2VsZWN0aW9uKCk6IHZvaWQge1xuICAgIC8vIEFwcGx5IHRlbXAgc2VsZWN0aW9uIHRvIGFjdHVhbCB2YWx1ZVxuICAgIHRoaXMuZHVyYXRpb25WYWx1ZSA9IHRoaXMudGVtcFNlbGVjdGVkRHVyYXRpb25cbiAgICB0aGlzLmR1cmF0aW9uSW5wdXRUYXJnZXQudmFsdWUgPSB0aGlzLnRlbXBTZWxlY3RlZER1cmF0aW9uXG4gICAgXG4gICAgLy8gVXBkYXRlIG1haW4gZHVyYXRpb24gYnV0dG9uc1xuICAgIHRoaXMudXBkYXRlRHVyYXRpb25CdXR0b25TdHlsZXModGhpcy50ZW1wU2VsZWN0ZWREdXJhdGlvbilcbiAgICBcbiAgICAvLyBVcGRhdGUgZHVyYXRpb24gbGFiZWxcbiAgICB0aGlzLnVwZGF0ZUR1cmF0aW9uTGFiZWwodGhpcy50ZW1wU2VsZWN0ZWREdXJhdGlvbilcbiAgICBcbiAgICBjb25zdCBkdXJhdGlvbk51bSA9IHBhcnNlSW50KHRoaXMudGVtcFNlbGVjdGVkRHVyYXRpb24pXG4gICAgXG4gICAgLy8gU2hvdy9oaWRlIFVJIGVsZW1lbnRzIGJhc2VkIG9uIHNlbGVjdGlvblxuICAgIGlmICh0aGlzLnRlbXBTZWxlY3RlZER1cmF0aW9uICYmIGR1cmF0aW9uTnVtID4gMykge1xuICAgICAgLy8gRXh0ZW5kZWQgZHVyYXRpb24gKD4zIGRheXMpOiBzaG93IFggYnV0dG9uLCBoaWRlIHF1aWNrIGJ1dHRvbnNcbiAgICAgIHRoaXMuY2xlYXJEdXJhdGlvbkJ1dHRvblRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgdGhpcy5xdWlja0R1cmF0aW9uQnV0dG9uc1RhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgICAgdGhpcy5xdWlja0R1cmF0aW9uQnV0dG9uc1RhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdmbGV4JywgJ2dhcC0zJylcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUXVpY2sgZHVyYXRpb24gKDEtMyBkYXlzKSBvciBubyBzZWxlY3Rpb246IGhpZGUgWCBidXR0b24sIHNob3cgcXVpY2sgYnV0dG9uc1xuICAgICAgdGhpcy5jbGVhckR1cmF0aW9uQnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICB0aGlzLnF1aWNrRHVyYXRpb25CdXR0b25zVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICB0aGlzLnF1aWNrRHVyYXRpb25CdXR0b25zVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2ZsZXgnLCAnZ2FwLTMnKVxuICAgIH1cbiAgICBcbiAgICAvLyBDbG9zZSBtb2RhbFxuICAgIHRoaXMuZHVyYXRpb25Nb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJ1xuICB9XG5cbiAgLy8gVXBkYXRlIGR1cmF0aW9uIGxhYmVsIHRleHRcbiAgcHJpdmF0ZSB1cGRhdGVEdXJhdGlvbkxhYmVsKGR1cmF0aW9uOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBkdXJhdGlvbk51bSA9IHBhcnNlSW50KGR1cmF0aW9uKVxuICAgIFxuICAgIGlmIChkdXJhdGlvbiAmJiBkdXJhdGlvbk51bSA+IDMpIHtcbiAgICAgIHRoaXMuZHVyYXRpb25MYWJlbFRhcmdldC50ZXh0Q29udGVudCA9IGBcdTczQTkke2R1cmF0aW9ufVx1NTkyOWBcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kdXJhdGlvbkxhYmVsVGFyZ2V0LnRleHRDb250ZW50ID0gJ1x1NTkyOVx1NjU3MCdcbiAgICB9XG4gIH1cblxuICAvLyBDbGVhciBkdXJhdGlvbiBzZWxlY3Rpb24gKHJlc3RvcmUgdG8gcXVpY2sgc2VsZWN0aW9uIHN0YXRlKVxuICBjbGVhckR1cmF0aW9uKCk6IHZvaWQge1xuICAgIC8vIENsZWFyIGR1cmF0aW9uIHZhbHVlXG4gICAgdGhpcy5kdXJhdGlvblZhbHVlID0gJydcbiAgICB0aGlzLmR1cmF0aW9uSW5wdXRUYXJnZXQudmFsdWUgPSAnJ1xuICAgIFxuICAgIC8vIFVwZGF0ZSBsYWJlbCB0byBkZWZhdWx0XG4gICAgdGhpcy5kdXJhdGlvbkxhYmVsVGFyZ2V0LnRleHRDb250ZW50ID0gJ1x1NTkyOVx1NjU3MCdcbiAgICBcbiAgICAvLyBIaWRlIGNsZWFyIGJ1dHRvblxuICAgIHRoaXMuY2xlYXJEdXJhdGlvbkJ1dHRvblRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIFxuICAgIC8vIFNob3cgcXVpY2sgZHVyYXRpb24gYnV0dG9uc1xuICAgIHRoaXMucXVpY2tEdXJhdGlvbkJ1dHRvbnNUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICB0aGlzLnF1aWNrRHVyYXRpb25CdXR0b25zVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2ZsZXgnLCAnZ2FwLTMnKVxuICAgIFxuICAgIC8vIENsZWFyIGFsbCBkdXJhdGlvbiBidXR0b24gc3R5bGVzXG4gICAgdGhpcy51cGRhdGVEdXJhdGlvbkJ1dHRvblN0eWxlcygnJylcbiAgfVxuXG4gIC8vIFVwZGF0ZSBtYWluIGR1cmF0aW9uIGJ1dHRvbiBzdHlsZXNcbiAgcHJpdmF0ZSB1cGRhdGVEdXJhdGlvbkJ1dHRvblN0eWxlcyhkdXJhdGlvbjogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5kdXJhdGlvbkJ1dHRvblRhcmdldHMuZm9yRWFjaChidG4gPT4ge1xuICAgICAgY29uc3QgdGV4dFNwYW4gPSBidG4ucXVlcnlTZWxlY3Rvcignc3BhbjpmaXJzdC1jaGlsZCcpIGFzIEhUTUxFbGVtZW50XG4gICAgICBpZiAoYnRuLmRhdGFzZXQuZHVyYXRpb24gPT09IGR1cmF0aW9uKSB7XG4gICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1ncmF5LTUwJywgJ2JvcmRlci10cmFuc3BhcmVudCcpXG4gICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdiZy1bI0ZGRThDQ10nLCAnYm9yZGVyLVsjRkZENzAwXScsICdzaGFkb3ctbWQnKVxuICAgICAgICBpZiAodGV4dFNwYW4pIHtcbiAgICAgICAgICB0ZXh0U3Bhbi5jbGFzc0xpc3QucmVtb3ZlKCdmb250LW1lZGl1bScpXG4gICAgICAgICAgdGV4dFNwYW4uY2xhc3NMaXN0LmFkZCgnZm9udC1ib2xkJylcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ2JnLWdyYXktNTAnLCAnYm9yZGVyLXRyYW5zcGFyZW50JylcbiAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLVsjRkZFOENDXScsICdib3JkZXItWyNGRkQ3MDBdJywgJ3NoYWRvdy1tZCcpXG4gICAgICAgIGlmICh0ZXh0U3Bhbikge1xuICAgICAgICAgIHRleHRTcGFuLmNsYXNzTGlzdC5hZGQoJ2ZvbnQtbWVkaXVtJylcbiAgICAgICAgICB0ZXh0U3Bhbi5jbGFzc0xpc3QucmVtb3ZlKCdmb250LWJvbGQnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8vIFx1OTAwOVx1NjJFOVx1NTZFMlx1OTYxRlx1NTkyN1x1NUMwRlxuICBzZWxlY3RHcm91cFNpemUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGdyb3VwU2l6ZSA9IGJ1dHRvbi5kYXRhc2V0Lmdyb3VwU2l6ZSB8fCAnJ1xuICAgIFxuICAgIHRoaXMuZ3JvdXBTaXplVmFsdWUgPSBncm91cFNpemVcbiAgICB0aGlzLmdyb3VwU2l6ZUlucHV0VGFyZ2V0LnZhbHVlID0gZ3JvdXBTaXplXG4gICAgXG4gICAgLy8gXHU2NkY0XHU2NUIwXHU1MzU1XHU5MDA5XHU2MzA5XHU5NEFFXHU2ODM3XHU1RjBGXG4gICAgdGhpcy51cGRhdGVHcm91cFNpemVCdXR0b25zKGdyb3VwU2l6ZSlcbiAgfVxuICBcbiAgLy8gQXV0by1zZWxlY3QgZ3JvdXAgc2l6ZSBvbiBwYWdlIGxvYWRcbiAgcHJpdmF0ZSBhdXRvU2VsZWN0R3JvdXBTaXplKGdyb3VwU2l6ZTogc3RyaW5nKTogdm9pZCB7XG4gICAgLy8gU2V0IHRoZSBoaWRkZW4gaW5wdXQgdmFsdWVcbiAgICBpZiAodGhpcy5ncm91cFNpemVJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5ncm91cFNpemVJbnB1dFRhcmdldC52YWx1ZSA9IGdyb3VwU2l6ZVxuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgYnV0dG9uIHN0eWxlc1xuICAgIHRoaXMudXBkYXRlR3JvdXBTaXplQnV0dG9ucyhncm91cFNpemUpXG4gIH1cbiAgXG4gIC8vIFVwZGF0ZSBncm91cCBzaXplIGJ1dHRvbiBzdHlsZXNcbiAgcHJpdmF0ZSB1cGRhdGVHcm91cFNpemVCdXR0b25zKGdyb3VwU2l6ZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5ncm91cFNpemVCdXR0b25UYXJnZXRzLmZvckVhY2goYnRuID0+IHtcbiAgICAgIGNvbnN0IHJhZGlvID0gYnRuLnF1ZXJ5U2VsZWN0b3IoJy5yYWRpby1jaXJjbGUnKSBhcyBIVE1MRWxlbWVudFxuICAgICAgaWYgKGJ0bi5kYXRhc2V0Lmdyb3VwU2l6ZSA9PT0gZ3JvdXBTaXplKSB7XG4gICAgICAgIHJhZGlvPy5jbGFzc0xpc3QuYWRkKCdiZy1bI0ZGRDcwMF0nKVxuICAgICAgICByYWRpbz8uY2xhc3NMaXN0LnJlbW92ZSgnYmctdHJhbnNwYXJlbnQnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmFkaW8/LmNsYXNzTGlzdC5hZGQoJ2JnLXRyYW5zcGFyZW50JylcbiAgICAgICAgcmFkaW8/LmNsYXNzTGlzdC5yZW1vdmUoJ2JnLVsjRkZENzAwXScpXG4gICAgICB9XG4gICAgfSlcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyIHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJkb21lc3RpY0J1dHRvblwiLCBcbiAgICBcImludGVybmF0aW9uYWxCdXR0b25cIiwgXG4gICAgXCJzd2FwVG9nZ2xlXCIsIFxuICAgIFwic3dhcEluZGljYXRvclwiLFxuICAgIFwicmV0dXJuTG9jYXRpb25TZWN0aW9uXCIsXG4gICAgXCJjaXR5RGlzcGxheVwiLFxuICAgIFwicGlja3VwTG9jYXRpb25EaXNwbGF5XCIsXG4gICAgXCJyZXR1cm5Mb2NhdGlvbkRpc3BsYXlcIixcbiAgICBcInBpY2t1cERhdGVEaXNwbGF5XCIsXG4gICAgXCJyZXR1cm5EYXRlRGlzcGxheVwiLFxuICAgIFwiZHVyYXRpb25EaXNwbGF5XCIsXG4gICAgXCJjaXR5SW5wdXRcIixcbiAgICBcInBpY2t1cExvY2F0aW9uSW5wdXRcIixcbiAgICBcInJldHVybkxvY2F0aW9uSW5wdXRcIixcbiAgICBcInBpY2t1cERhdGVJbnB1dFwiLFxuICAgIFwicmV0dXJuRGF0ZUlucHV0XCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgY2l0eTogU3RyaW5nLFxuICAgIHBpY2t1cExvY2F0aW9uOiBTdHJpbmcsXG4gICAgcmV0dXJuTG9jYXRpb246IFN0cmluZyxcbiAgICBwaWNrdXBEYXRlOiBTdHJpbmcsXG4gICAgcmV0dXJuRGF0ZTogU3RyaW5nXG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IGRvbWVzdGljQnV0dG9uVGFyZ2V0OiBIVE1MQnV0dG9uRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGludGVybmF0aW9uYWxCdXR0b25UYXJnZXQ6IEhUTUxCdXR0b25FbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc3dhcFRvZ2dsZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzd2FwSW5kaWNhdG9yVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHJldHVybkxvY2F0aW9uU2VjdGlvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjaXR5RGlzcGxheVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBwaWNrdXBMb2NhdGlvbkRpc3BsYXlUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgcmV0dXJuTG9jYXRpb25EaXNwbGF5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHBpY2t1cERhdGVEaXNwbGF5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHJldHVybkRhdGVEaXNwbGF5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGR1cmF0aW9uRGlzcGxheVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjaXR5SW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBwaWNrdXBMb2NhdGlvbklucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgcmV0dXJuTG9jYXRpb25JbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHBpY2t1cERhdGVJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHJldHVybkRhdGVJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIGNpdHlWYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgcGlja3VwTG9jYXRpb25WYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgcmV0dXJuTG9jYXRpb25WYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgcGlja3VwRGF0ZVZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSByZXR1cm5EYXRlVmFsdWU6IHN0cmluZ1xuXG4gIHByaXZhdGUgaXNEb21lc3RpYzogYm9vbGVhbiA9IHRydWVcbiAgcHJpdmF0ZSBpc1N3YXBFbmFibGVkOiBib29sZWFuID0gZmFsc2VcbiAgcHJpdmF0ZSBjdXJyZW50U2VsZWN0aW9uVHlwZTogJ2NpdHknIHwgJ3BpY2t1cCcgfCAncmV0dXJuJyB8IG51bGwgPSBudWxsXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkNhclJlbnRhbFRhYnMgY29ubmVjdGVkXCIpXG4gICAgdGhpcy51cGRhdGVEb21lc3RpY1ZpZXcoKVxuICAgIHRoaXMuaW5pdGlhbGl6ZURlZmF1bHRzKClcbiAgICBcbiAgICAvLyBMaXN0ZW4gZm9yIGV2ZW50c1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NpdHktc2VsZWN0b3I6Y2l0eS1zZWxlY3RlZCcsIHRoaXMuaGFuZGxlQ2l0eVNlbGVjdGVkLmJpbmQodGhpcykpXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbG9jYXRpb24tc2VsZWN0b3I6bG9jYXRpb24tc2VsZWN0ZWQnLCB0aGlzLmhhbmRsZUxvY2F0aW9uU2VsZWN0ZWQuYmluZCh0aGlzKSlcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjYXItZGF0ZXRpbWUtcGlja2VyOmRhdGV0aW1lLXNlbGVjdGVkJywgdGhpcy5oYW5kbGVEYXRlVGltZVNlbGVjdGVkLmJpbmQodGhpcykpXG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NpdHktc2VsZWN0b3I6Y2l0eS1zZWxlY3RlZCcsIHRoaXMuaGFuZGxlQ2l0eVNlbGVjdGVkLmJpbmQodGhpcykpXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9jYXRpb24tc2VsZWN0b3I6bG9jYXRpb24tc2VsZWN0ZWQnLCB0aGlzLmhhbmRsZUxvY2F0aW9uU2VsZWN0ZWQuYmluZCh0aGlzKSlcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjYXItZGF0ZXRpbWUtcGlja2VyOmRhdGV0aW1lLXNlbGVjdGVkJywgdGhpcy5oYW5kbGVEYXRlVGltZVNlbGVjdGVkLmJpbmQodGhpcykpXG4gIH1cblxuICAvLyBJbml0aWFsaXplIGRlZmF1bHQgdmFsdWVzXG4gIHByaXZhdGUgaW5pdGlhbGl6ZURlZmF1bHRzKCk6IHZvaWQge1xuICAgIC8vIEdldCBjaXR5IGZyb20gRE9NIChzZXQgYnkgUmFpbHMgdmlldylcbiAgICBjb25zdCBjaXR5RGlzcGxheSA9IHRoaXMuY2l0eURpc3BsYXlUYXJnZXQudGV4dENvbnRlbnQ/LnRyaW0oKVxuICAgIGlmIChjaXR5RGlzcGxheSAmJiBjaXR5RGlzcGxheSAhPT0gJycpIHtcbiAgICAgIHRoaXMudXBkYXRlQ2l0eShjaXR5RGlzcGxheSlcbiAgICB9XG4gICAgXG4gICAgLy8gRG8gbm90IHNldCBkZWZhdWx0IHBpY2t1cCBsb2NhdGlvbiAtIHVzZXIgbXVzdCBzZWxlY3RcbiAgICBcbiAgICAvLyBTZXQgZGVmYXVsdCBkYXRlcyBpZiBub3Qgc2V0XG4gICAgaWYgKCF0aGlzLnBpY2t1cERhdGVWYWx1ZSB8fCAhdGhpcy5yZXR1cm5EYXRlVmFsdWUpIHtcbiAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxuICAgICAgdG9kYXkuc2V0SG91cnMoMTMsIDU1LCAwLCAwKVxuICAgICAgY29uc3QgcmV0dXJuRGF0ZSA9IG5ldyBEYXRlKHRvZGF5KVxuICAgICAgcmV0dXJuRGF0ZS5zZXREYXRlKHJldHVybkRhdGUuZ2V0RGF0ZSgpICsgMilcbiAgICAgIFxuICAgICAgdGhpcy51cGRhdGVQaWNrdXBEYXRlKHRvZGF5KVxuICAgICAgdGhpcy51cGRhdGVSZXR1cm5EYXRlKHJldHVybkRhdGUpXG4gICAgfVxuICB9XG5cbiAgc2VsZWN0RG9tZXN0aWMoKTogdm9pZCB7XG4gICAgdGhpcy5pc0RvbWVzdGljID0gdHJ1ZVxuICAgIHRoaXMudXBkYXRlRG9tZXN0aWNWaWV3KClcbiAgfVxuXG4gIHNlbGVjdEludGVybmF0aW9uYWwoKTogdm9pZCB7XG4gICAgdGhpcy5pc0RvbWVzdGljID0gZmFsc2VcbiAgICB0aGlzLnVwZGF0ZUludGVybmF0aW9uYWxWaWV3KClcbiAgfVxuXG4gIHRvZ2dsZVN3YXAoKTogdm9pZCB7XG4gICAgdGhpcy5pc1N3YXBFbmFibGVkID0gIXRoaXMuaXNTd2FwRW5hYmxlZFxuICAgIHRoaXMudXBkYXRlU3dhcFRvZ2dsZSgpXG4gICAgXG4gICAgLy8gU2hvdy9oaWRlIHJldHVybiBsb2NhdGlvbiBzZWN0aW9uXG4gICAgaWYgKHRoaXMuaXNTd2FwRW5hYmxlZCkge1xuICAgICAgdGhpcy5yZXR1cm5Mb2NhdGlvblNlY3Rpb25UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZXR1cm5Mb2NhdGlvblNlY3Rpb25UYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgIHRoaXMucmV0dXJuTG9jYXRpb25WYWx1ZSA9ICcnXG4gICAgICB0aGlzLnJldHVybkxvY2F0aW9uRGlzcGxheVRhcmdldC50ZXh0Q29udGVudCA9ICdcdTU0MENcdTUzRDZcdThGNjZcdTU3MzBcdTcwQjknXG4gICAgICB0aGlzLnJldHVybkxvY2F0aW9uSW5wdXRUYXJnZXQudmFsdWUgPSAnJ1xuICAgIH1cbiAgfVxuXG4gIC8vIE9wZW4gY2l0eSBzZWxlY3RvclxuICBvcGVuQ2l0eVNlbGVjdG9yKCk6IHZvaWQge1xuICAgIHRoaXMuY3VycmVudFNlbGVjdGlvblR5cGUgPSAnY2l0eSdcbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNpdHktc2VsZWN0b3ItdGFyZ2V0PVwibW9kYWxcIl0nKSBhcyBIVE1MRWxlbWVudFxuICAgIGlmIChtb2RhbCkge1xuICAgICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJ1xuICAgIH1cbiAgfVxuXG4gIC8vIE9wZW4gcGlja3VwIGxvY2F0aW9uIHNlbGVjdG9yXG4gIG9wZW5QaWNrdXBMb2NhdGlvblNlbGVjdG9yKCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKCdbQ2FyUmVudGFsVGFic10gb3BlblBpY2t1cExvY2F0aW9uU2VsZWN0b3IgY2FsbGVkJylcbiAgICB0aGlzLmN1cnJlbnRTZWxlY3Rpb25UeXBlID0gJ3BpY2t1cCdcbiAgICBjb25zdCBjb250cm9sbGVyID0gdGhpcy5hcHBsaWNhdGlvbi5nZXRDb250cm9sbGVyRm9yRWxlbWVudEFuZElkZW50aWZpZXIoXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jb250cm9sbGVyPVwibG9jYXRpb24tc2VsZWN0b3JcIl0nKSBhcyBFbGVtZW50LFxuICAgICAgJ2xvY2F0aW9uLXNlbGVjdG9yJ1xuICAgICkgYXMgYW55XG4gICAgY29uc29sZS5sb2coJ1tDYXJSZW50YWxUYWJzXSBsb2NhdGlvbi1zZWxlY3RvciBjb250cm9sbGVyOicsIGNvbnRyb2xsZXIpXG4gICAgaWYgKGNvbnRyb2xsZXIgJiYgY29udHJvbGxlci5vcGVuTW9kYWwpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbQ2FyUmVudGFsVGFic10gQ2FsbGluZyBjb250cm9sbGVyLm9wZW5Nb2RhbCgpJylcbiAgICAgIGNvbnRyb2xsZXIub3Blbk1vZGFsKClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcignW0NhclJlbnRhbFRhYnNdIGxvY2F0aW9uLXNlbGVjdG9yIGNvbnRyb2xsZXIgb3Igb3Blbk1vZGFsIG1ldGhvZCBub3QgZm91bmQnKVxuICAgIH1cbiAgfVxuXG4gIC8vIE9wZW4gcmV0dXJuIGxvY2F0aW9uIHNlbGVjdG9yXG4gIG9wZW5SZXR1cm5Mb2NhdGlvblNlbGVjdG9yKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pc1N3YXBFbmFibGVkKSB7XG4gICAgICBpZiAod2luZG93LnNob3dUb2FzdCkge1xuICAgICAgICB3aW5kb3cuc2hvd1RvYXN0KCdcdThCRjdcdTUxNDhcdTVGMDBcdTU0MkZcdTVGMDJcdTU3MzBcdThGRDhcdThGNjYnKVxuICAgICAgfVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnNvbGUubG9nKCdbQ2FyUmVudGFsVGFic10gb3BlblJldHVybkxvY2F0aW9uU2VsZWN0b3IgY2FsbGVkJylcbiAgICB0aGlzLmN1cnJlbnRTZWxlY3Rpb25UeXBlID0gJ3JldHVybidcbiAgICBjb25zdCBjb250cm9sbGVyID0gdGhpcy5hcHBsaWNhdGlvbi5nZXRDb250cm9sbGVyRm9yRWxlbWVudEFuZElkZW50aWZpZXIoXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jb250cm9sbGVyPVwibG9jYXRpb24tc2VsZWN0b3JcIl0nKSBhcyBFbGVtZW50LFxuICAgICAgJ2xvY2F0aW9uLXNlbGVjdG9yJ1xuICAgICkgYXMgYW55XG4gICAgY29uc29sZS5sb2coJ1tDYXJSZW50YWxUYWJzXSBsb2NhdGlvbi1zZWxlY3RvciBjb250cm9sbGVyOicsIGNvbnRyb2xsZXIpXG4gICAgaWYgKGNvbnRyb2xsZXIgJiYgY29udHJvbGxlci5vcGVuTW9kYWwpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbQ2FyUmVudGFsVGFic10gQ2FsbGluZyBjb250cm9sbGVyLm9wZW5Nb2RhbCgpJylcbiAgICAgIGNvbnRyb2xsZXIub3Blbk1vZGFsKClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcignW0NhclJlbnRhbFRhYnNdIGxvY2F0aW9uLXNlbGVjdG9yIGNvbnRyb2xsZXIgb3Igb3Blbk1vZGFsIG1ldGhvZCBub3QgZm91bmQnKVxuICAgIH1cbiAgfVxuXG4gIC8vIE9wZW4gcGlja3VwIGRhdGUgc2VsZWN0b3JcbiAgb3BlblBpY2t1cERhdGVTZWxlY3RvcigpOiB2b2lkIHtcbiAgICBjb25zdCBjb250cm9sbGVyID0gdGhpcy5hcHBsaWNhdGlvbi5nZXRDb250cm9sbGVyRm9yRWxlbWVudEFuZElkZW50aWZpZXIoXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jb250cm9sbGVyPVwiY2FyLWRhdGV0aW1lLXBpY2tlclwiXScpIGFzIEVsZW1lbnQsXG4gICAgICAnY2FyLWRhdGV0aW1lLXBpY2tlcidcbiAgICApIGFzIGFueVxuICAgIGlmIChjb250cm9sbGVyICYmIGNvbnRyb2xsZXIub3Blbk1vZGFsKSB7XG4gICAgICBjb250cm9sbGVyLm9wZW5Nb2RhbCgncGlja3VwJylcbiAgICB9XG4gIH1cblxuICAvLyBPcGVuIHJldHVybiBkYXRlIHNlbGVjdG9yXG4gIG9wZW5SZXR1cm5EYXRlU2VsZWN0b3IoKTogdm9pZCB7XG4gICAgY29uc3QgY29udHJvbGxlciA9IHRoaXMuYXBwbGljYXRpb24uZ2V0Q29udHJvbGxlckZvckVsZW1lbnRBbmRJZGVudGlmaWVyKFxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtY29udHJvbGxlcj1cImNhci1kYXRldGltZS1waWNrZXJcIl0nKSBhcyBFbGVtZW50LFxuICAgICAgJ2Nhci1kYXRldGltZS1waWNrZXInXG4gICAgKSBhcyBhbnlcbiAgICBpZiAoY29udHJvbGxlciAmJiBjb250cm9sbGVyLm9wZW5Nb2RhbCkge1xuICAgICAgY29udHJvbGxlci5vcGVuTW9kYWwoJ3JldHVybicpXG4gICAgfVxuICB9XG5cbiAgLy8gSGFuZGxlIGNpdHkgc2VsZWN0aW9uIGZyb20gY2l0eSBzZWxlY3RvclxuICBwcml2YXRlIGhhbmRsZUNpdHlTZWxlY3RlZChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjdXN0b21FdmVudCA9IGV2ZW50IGFzIEN1c3RvbUV2ZW50XG4gICAgY29uc3QgeyBjaXR5TmFtZSB9ID0gY3VzdG9tRXZlbnQuZGV0YWlsXG4gICAgXG4gICAgaWYgKHRoaXMuY3VycmVudFNlbGVjdGlvblR5cGUgPT09ICdjaXR5Jykge1xuICAgICAgdGhpcy51cGRhdGVDaXR5KGNpdHlOYW1lKVxuICAgICAgLy8gQ2xlYXIgcGlja3VwIGFuZCByZXR1cm4gbG9jYXRpb25zIHdoZW4gY2l0eSBjaGFuZ2VzXG4gICAgICB0aGlzLmNsZWFyUGlja3VwTG9jYXRpb24oKVxuICAgICAgaWYgKHRoaXMuaXNTd2FwRW5hYmxlZCkge1xuICAgICAgICB0aGlzLmNsZWFyUmV0dXJuTG9jYXRpb24oKVxuICAgICAgfVxuICAgICAgdGhpcy5jdXJyZW50U2VsZWN0aW9uVHlwZSA9IG51bGxcbiAgICB9XG4gIH1cblxuICAvLyBIYW5kbGUgbG9jYXRpb24gc2VsZWN0aW9uIGZyb20gbG9jYXRpb24gc2VsZWN0b3JcbiAgcHJpdmF0ZSBoYW5kbGVMb2NhdGlvblNlbGVjdGVkKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnRcbiAgICBjb25zdCB7IGxvY2F0aW9uTmFtZSB9ID0gY3VzdG9tRXZlbnQuZGV0YWlsXG4gICAgXG4gICAgaWYgKHRoaXMuY3VycmVudFNlbGVjdGlvblR5cGUgPT09ICdwaWNrdXAnKSB7XG4gICAgICB0aGlzLnVwZGF0ZVBpY2t1cExvY2F0aW9uKGxvY2F0aW9uTmFtZSlcbiAgICAgIHRoaXMuY3VycmVudFNlbGVjdGlvblR5cGUgPSBudWxsXG4gICAgfSBlbHNlIGlmICh0aGlzLmN1cnJlbnRTZWxlY3Rpb25UeXBlID09PSAncmV0dXJuJykge1xuICAgICAgdGhpcy51cGRhdGVSZXR1cm5Mb2NhdGlvbihsb2NhdGlvbk5hbWUpXG4gICAgICB0aGlzLmN1cnJlbnRTZWxlY3Rpb25UeXBlID0gbnVsbFxuICAgIH1cbiAgfVxuXG4gIC8vIEhhbmRsZSBkYXRldGltZSBzZWxlY3Rpb24gZnJvbSBjYXItZGF0ZXRpbWUtcGlja2VyXG4gIHByaXZhdGUgaGFuZGxlRGF0ZVRpbWVTZWxlY3RlZChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjdXN0b21FdmVudCA9IGV2ZW50IGFzIEN1c3RvbUV2ZW50XG4gICAgY29uc3QgeyBwaWNrZXJUeXBlLCBkYXRlVGltZSB9ID0gY3VzdG9tRXZlbnQuZGV0YWlsXG4gICAgXG4gICAgaWYgKHBpY2tlclR5cGUgPT09ICdwaWNrdXAnKSB7XG4gICAgICB0aGlzLnVwZGF0ZVBpY2t1cERhdGUobmV3IERhdGUoZGF0ZVRpbWUpKVxuICAgICAgdGhpcy5lbnN1cmVSZXR1cm5EYXRlVmFsaWQoKVxuICAgIH0gZWxzZSBpZiAocGlja2VyVHlwZSA9PT0gJ3JldHVybicpIHtcbiAgICAgIHRoaXMudXBkYXRlUmV0dXJuRGF0ZShuZXcgRGF0ZShkYXRlVGltZSkpXG4gICAgICB0aGlzLmVuc3VyZVJldHVybkRhdGVWYWxpZCgpXG4gICAgfVxuICB9XG5cbiAgLy8gVXBkYXRlIGNpdHlcbiAgcHJpdmF0ZSB1cGRhdGVDaXR5KGNpdHlOYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLmNpdHlWYWx1ZSA9IGNpdHlOYW1lXG4gICAgdGhpcy5jaXR5RGlzcGxheVRhcmdldC50ZXh0Q29udGVudCA9IGNpdHlOYW1lXG4gICAgdGhpcy5jaXR5SW5wdXRUYXJnZXQudmFsdWUgPSBjaXR5TmFtZVxuICB9XG5cbiAgLy8gVXBkYXRlIHBpY2t1cCBsb2NhdGlvblxuICBwcml2YXRlIHVwZGF0ZVBpY2t1cExvY2F0aW9uKGxvY2F0aW9uOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLnBpY2t1cExvY2F0aW9uVmFsdWUgPSBsb2NhdGlvblxuICAgIHRoaXMucGlja3VwTG9jYXRpb25EaXNwbGF5VGFyZ2V0LnRleHRDb250ZW50ID0gbG9jYXRpb25cbiAgICB0aGlzLnBpY2t1cExvY2F0aW9uRGlzcGxheVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktNDAwJylcbiAgICB0aGlzLnBpY2t1cExvY2F0aW9uSW5wdXRUYXJnZXQudmFsdWUgPSBsb2NhdGlvblxuICB9XG5cbiAgLy8gQ2xlYXIgcGlja3VwIGxvY2F0aW9uXG4gIHByaXZhdGUgY2xlYXJQaWNrdXBMb2NhdGlvbigpOiB2b2lkIHtcbiAgICB0aGlzLnBpY2t1cExvY2F0aW9uVmFsdWUgPSAnJ1xuICAgIHRoaXMucGlja3VwTG9jYXRpb25EaXNwbGF5VGFyZ2V0LnRleHRDb250ZW50ID0gJ1x1OEJGN1x1OTAwOVx1NjJFOVx1NTczMFx1NzBCOSdcbiAgICB0aGlzLnBpY2t1cExvY2F0aW9uRGlzcGxheVRhcmdldC5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktNDAwJylcbiAgICB0aGlzLnBpY2t1cExvY2F0aW9uSW5wdXRUYXJnZXQudmFsdWUgPSAnJ1xuICB9XG5cbiAgLy8gVXBkYXRlIHJldHVybiBsb2NhdGlvblxuICBwcml2YXRlIHVwZGF0ZVJldHVybkxvY2F0aW9uKGxvY2F0aW9uOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLnJldHVybkxvY2F0aW9uVmFsdWUgPSBsb2NhdGlvblxuICAgIHRoaXMucmV0dXJuTG9jYXRpb25EaXNwbGF5VGFyZ2V0LnRleHRDb250ZW50ID0gbG9jYXRpb25cbiAgICB0aGlzLnJldHVybkxvY2F0aW9uRGlzcGxheVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktNDAwJylcbiAgICB0aGlzLnJldHVybkxvY2F0aW9uSW5wdXRUYXJnZXQudmFsdWUgPSBsb2NhdGlvblxuICB9XG5cbiAgLy8gQ2xlYXIgcmV0dXJuIGxvY2F0aW9uXG4gIHByaXZhdGUgY2xlYXJSZXR1cm5Mb2NhdGlvbigpOiB2b2lkIHtcbiAgICB0aGlzLnJldHVybkxvY2F0aW9uVmFsdWUgPSAnJ1xuICAgIHRoaXMucmV0dXJuTG9jYXRpb25EaXNwbGF5VGFyZ2V0LnRleHRDb250ZW50ID0gJ1x1NTQwQ1x1NTNENlx1OEY2Nlx1NTczMFx1NzBCOSdcbiAgICB0aGlzLnJldHVybkxvY2F0aW9uRGlzcGxheVRhcmdldC5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktNDAwJylcbiAgICB0aGlzLnJldHVybkxvY2F0aW9uSW5wdXRUYXJnZXQudmFsdWUgPSAnJ1xuICB9XG5cbiAgLy8gVXBkYXRlIHBpY2t1cCBkYXRlXG4gIHByaXZhdGUgdXBkYXRlUGlja3VwRGF0ZShkYXRlOiBEYXRlKTogdm9pZCB7XG4gICAgdGhpcy5waWNrdXBEYXRlVmFsdWUgPSBkYXRlLnRvSVNPU3RyaW5nKClcbiAgICB0aGlzLnBpY2t1cERhdGVJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuZm9ybWF0RGF0ZUZvcklucHV0KGRhdGUpXG4gICAgdGhpcy5waWNrdXBEYXRlRGlzcGxheVRhcmdldC5pbm5lckhUTUwgPSB0aGlzLmZvcm1hdERhdGVEaXNwbGF5KGRhdGUpXG4gICAgdGhpcy51cGRhdGVEdXJhdGlvbigpXG4gIH1cblxuICAvLyBVcGRhdGUgcmV0dXJuIGRhdGVcbiAgcHJpdmF0ZSB1cGRhdGVSZXR1cm5EYXRlKGRhdGU6IERhdGUpOiB2b2lkIHtcbiAgICB0aGlzLnJldHVybkRhdGVWYWx1ZSA9IGRhdGUudG9JU09TdHJpbmcoKVxuICAgIHRoaXMucmV0dXJuRGF0ZUlucHV0VGFyZ2V0LnZhbHVlID0gdGhpcy5mb3JtYXREYXRlRm9ySW5wdXQoZGF0ZSlcbiAgICB0aGlzLnJldHVybkRhdGVEaXNwbGF5VGFyZ2V0LmlubmVySFRNTCA9IHRoaXMuZm9ybWF0RGF0ZURpc3BsYXkoZGF0ZSlcbiAgICB0aGlzLnVwZGF0ZUR1cmF0aW9uKClcbiAgfVxuXG4gIC8vIEVuc3VyZSByZXR1cm4gZGF0ZSBpcyBhZnRlciBwaWNrdXAgZGF0ZVxuICBwcml2YXRlIGVuc3VyZVJldHVybkRhdGVWYWxpZCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMucGlja3VwRGF0ZVZhbHVlIHx8ICF0aGlzLnJldHVybkRhdGVWYWx1ZSkgcmV0dXJuXG4gICAgXG4gICAgY29uc3QgcGlja3VwRGF0ZSA9IG5ldyBEYXRlKHRoaXMucGlja3VwRGF0ZVZhbHVlKVxuICAgIGNvbnN0IHJldHVybkRhdGUgPSBuZXcgRGF0ZSh0aGlzLnJldHVybkRhdGVWYWx1ZSlcbiAgICBcbiAgICBpZiAocmV0dXJuRGF0ZSA8PSBwaWNrdXBEYXRlKSB7XG4gICAgICBjb25zdCBuZXdSZXR1cm5EYXRlID0gbmV3IERhdGUocGlja3VwRGF0ZSlcbiAgICAgIG5ld1JldHVybkRhdGUuc2V0RGF0ZShuZXdSZXR1cm5EYXRlLmdldERhdGUoKSArIDEpXG4gICAgICB0aGlzLnVwZGF0ZVJldHVybkRhdGUobmV3UmV0dXJuRGF0ZSlcbiAgICB9XG4gIH1cblxuICAvLyBVcGRhdGUgZHVyYXRpb24gZGlzcGxheVxuICBwcml2YXRlIHVwZGF0ZUR1cmF0aW9uKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5waWNrdXBEYXRlVmFsdWUgfHwgIXRoaXMucmV0dXJuRGF0ZVZhbHVlKSByZXR1cm5cbiAgICBcbiAgICBjb25zdCBwaWNrdXBEYXRlID0gbmV3IERhdGUodGhpcy5waWNrdXBEYXRlVmFsdWUpXG4gICAgY29uc3QgcmV0dXJuRGF0ZSA9IG5ldyBEYXRlKHRoaXMucmV0dXJuRGF0ZVZhbHVlKVxuICAgIGNvbnN0IGRpZmZUaW1lID0gTWF0aC5hYnMocmV0dXJuRGF0ZS5nZXRUaW1lKCkgLSBwaWNrdXBEYXRlLmdldFRpbWUoKSlcbiAgICBjb25zdCBkaWZmRGF5cyA9IE1hdGguY2VpbChkaWZmVGltZSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSlcbiAgICBcbiAgICB0aGlzLmR1cmF0aW9uRGlzcGxheVRhcmdldC50ZXh0Q29udGVudCA9IGAke2RpZmZEYXlzfVx1NTkyOWBcbiAgfVxuXG4gIC8vIEZvcm1hdCBkYXRlIGZvciBpbnB1dCAoWVlZWS1NTS1ERClcbiAgcHJpdmF0ZSBmb3JtYXREYXRlRm9ySW5wdXQoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKVxuICAgIGNvbnN0IG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJylcbiAgICBjb25zdCBkYXkgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJylcbiAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YFxuICB9XG5cbiAgLy8gRm9ybWF0IGRhdGUgZm9yIGRpc3BsYXlcbiAgcHJpdmF0ZSBmb3JtYXREYXRlRGlzcGxheShkYXRlOiBEYXRlKTogc3RyaW5nIHtcbiAgICBjb25zdCB3ZWVrZGF5cyA9IFsnXHU1NDY4XHU2NUU1JywgJ1x1NTQ2OFx1NEUwMCcsICdcdTU0NjhcdTRFOEMnLCAnXHU1NDY4XHU0RTA5JywgJ1x1NTQ2OFx1NTZEQicsICdcdTU0NjhcdTRFOTQnLCAnXHU1NDY4XHU1MTZEJ11cbiAgICBjb25zdCB3ZWVrZGF5ID0gd2Vla2RheXNbZGF0ZS5nZXREYXkoKV1cbiAgICBjb25zdCBtb250aCA9IGRhdGUuZ2V0TW9udGgoKSArIDFcbiAgICBjb25zdCBkYXkgPSBkYXRlLmdldERhdGUoKVxuICAgIGNvbnN0IGhvdXJzID0gU3RyaW5nKGRhdGUuZ2V0SG91cnMoKSkucGFkU3RhcnQoMiwgJzAnKVxuICAgIGNvbnN0IG1pbnV0ZXMgPSBTdHJpbmcoZGF0ZS5nZXRNaW51dGVzKCkpLnBhZFN0YXJ0KDIsICcwJylcbiAgICBcbiAgICByZXR1cm4gYCR7bW9udGh9XHU2NzA4JHtkYXl9XHU2NUU1IDxzcGFuIGNsYXNzPVwidGV4dC1zbVwiPiR7aG91cnN9OiR7bWludXRlc308L3NwYW4+YFxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVEb21lc3RpY1ZpZXcoKTogdm9pZCB7XG4gICAgdGhpcy5kb21lc3RpY0J1dHRvblRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctd2hpdGVcIiwgXCJzaGFkb3ctc21cIiwgXCJmb250LWJvbGRcIilcbiAgICB0aGlzLmRvbWVzdGljQnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJ0ZXh0LWdyYXktNTAwXCIpXG4gICAgXG4gICAgdGhpcy5pbnRlcm5hdGlvbmFsQnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy13aGl0ZVwiLCBcInNoYWRvdy1zbVwiLCBcImZvbnQtYm9sZFwiKVxuICAgIHRoaXMuaW50ZXJuYXRpb25hbEJ1dHRvblRhcmdldC5jbGFzc0xpc3QuYWRkKFwidGV4dC1ncmF5LTUwMFwiKVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVJbnRlcm5hdGlvbmFsVmlldygpOiB2b2lkIHtcbiAgICB0aGlzLmludGVybmF0aW9uYWxCdXR0b25UYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLXdoaXRlXCIsIFwic2hhZG93LXNtXCIsIFwiZm9udC1ib2xkXCIpXG4gICAgdGhpcy5pbnRlcm5hdGlvbmFsQnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJ0ZXh0LWdyYXktNTAwXCIpXG4gICAgXG4gICAgdGhpcy5kb21lc3RpY0J1dHRvblRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctd2hpdGVcIiwgXCJzaGFkb3ctc21cIiwgXCJmb250LWJvbGRcIilcbiAgICB0aGlzLmRvbWVzdGljQnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJ0ZXh0LWdyYXktNTAwXCIpXG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVN3YXBUb2dnbGUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNTd2FwRW5hYmxlZCkge1xuICAgICAgdGhpcy5zd2FwSW5kaWNhdG9yVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJsZWZ0LTFcIilcbiAgICAgIHRoaXMuc3dhcEluZGljYXRvclRhcmdldC5jbGFzc0xpc3QuYWRkKFwibGVmdC01XCIpXG4gICAgICB0aGlzLnN3YXBUb2dnbGVUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLWdyYXktMjAwXCIpXG4gICAgICB0aGlzLnN3YXBUb2dnbGVUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLWJsdWUtNTAwXCIpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3dhcEluZGljYXRvclRhcmdldC5jbGFzc0xpc3QuYWRkKFwibGVmdC0xXCIpXG4gICAgICB0aGlzLnN3YXBJbmRpY2F0b3JUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImxlZnQtNVwiKVxuICAgICAgdGhpcy5zd2FwVG9nZ2xlVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy1ncmF5LTIwMFwiKVxuICAgICAgdGhpcy5zd2FwVG9nZ2xlVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1ibHVlLTUwMFwiKVxuICAgIH1cbiAgfVxufVxuXG4vLyBFeHRlbmQgV2luZG93IGludGVyZmFjZSBmb3Igc2hvd1RvYXN0XG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBXaW5kb3cge1xuICAgIHNob3dUb2FzdDogKG1lc3NhZ2U6IHN0cmluZykgPT4gdm9pZFxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgLy8gQWRkIHlvdXIgdGFyZ2V0cyBoZXJlLCBlLmcuOlxuICAgIC8vIFwibWVzc2FnZUlucHV0XCIsIFwibWVzc2FnZXNDb250YWluZXJcIiwgXCJzZW5kQnV0dG9uXCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgLy8gQWRkIHlvdXIgdmFsdWVzIGhlcmUsIGUuZy46XG4gICAgLy8gcm9vbUlkOiBTdHJpbmcsXG4gICAgLy8gdXNlcklkOiBTdHJpbmdcbiAgfVxuXG4gIC8vIERlY2xhcmUgeW91ciB0YXJnZXRzIGFuZCB2YWx1ZXNcbiAgLy8gZGVjbGFyZSByZWFkb25seSBtZXNzYWdlSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgLy8gZGVjbGFyZSByZWFkb25seSBtZXNzYWdlc0NvbnRhaW5lclRhcmdldDogSFRNTEVsZW1lbnRcbiAgLy8gZGVjbGFyZSByZWFkb25seSByb29tSWRWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkhvdGVsUGFja2FnZVNlYXJjaCBjb25uZWN0ZWRcIilcbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJIb3RlbFBhY2thZ2VTZWFyY2ggZGlzY29ubmVjdGVkXCIpXG4gIH1cblxuICAvLyBBZGQgeW91ciBhY3Rpb24gbWV0aG9kcyBoZXJlXG4gIC8vIEV4YW1wbGU6XG4gIC8vIGNsaWNrKCk6IHZvaWQge1xuICAvLyAgIGNvbnNvbGUubG9nKFwiQnV0dG9uIGNsaWNrZWRcIilcbiAgLy8gfVxuXG4gIC8vIEZPUk1TOiBUdXJibyArIFR1cmJvIFN0cmVhbXMgaGFuZGxlIGV2ZXJ5dGhpbmcgYXV0b21hdGljYWxseVxuICAvLyAtIEZvcm1zIHN1Ym1pdCB2aWEgQUpBWCAoVHVyYm8gRHJpdmUpXG4gIC8vIC0gU2VydmVyIHJlc3BvbmRzIHdpdGggZm9ybWF0LnR1cmJvX3N0cmVhbVxuICAvLyAtIFR1cmJvIFN0cmVhbXMgdXBkYXRlIERPTSBhdXRvbWF0aWNhbGx5XG4gIC8vIC0gTk8gbWFudWFsIGZvcm0gaGFuZGxpbmcgbmVlZGVkIGluIFN0aW11bHVzXG4gIC8vXG4gIC8vIFVzZSBTdGltdWx1cyBmb3I6XG4gIC8vIC0gVUkgaW50ZXJhY3Rpb25zICh0b2dnbGUsIHNob3cvaGlkZSlcbiAgLy8gLSBJbnB1dCB2YWxpZGF0aW9uL2Zvcm1hdHRpbmdcbiAgLy8gLSBEeW5hbWljIGZvcm0gZmllbGRzXG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJxdWFudGl0eUlucHV0XCIsXG4gICAgXCJ0b3RhbFByaWNlXCIsXG4gICAgXCJib3R0b21QcmljZVwiLFxuICAgIFwiZGVjcmVhc2VCdG5cIixcbiAgICBcImluY3JlYXNlQnRuXCIsXG4gICAgXCJzdG9ja3VwVGFiXCIsXG4gICAgXCJpbnN0YW50VGFiXCIsXG4gICAgXCJib29raW5nVHlwZUlucHV0XCIsXG4gICAgXCJjb250YWN0TmFtZUlucHV0XCIsXG4gICAgXCJjb250YWN0UGhvbmVJbnB1dFwiLFxuICAgIFwiY29uZmlybU1vZGFsXCIsXG4gICAgXCJjb25maXJtUXVhbnRpdHlcIixcbiAgICBcImNvbmZpcm1Db250YWN0XCIsXG4gICAgXCJjb25maXJtQm9va2luZ1R5cGVcIixcbiAgICBcImNvbmZpcm1Ub3RhbFByaWNlXCJcbiAgXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgcXVhbnRpdHlJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRvdGFsUHJpY2VUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgYm90dG9tUHJpY2VUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVjcmVhc2VCdG5UYXJnZXQ6IEhUTUxCdXR0b25FbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaW5jcmVhc2VCdG5UYXJnZXQ6IEhUTUxCdXR0b25FbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc3RvY2t1cFRhYlRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBpbnN0YW50VGFiVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGJvb2tpbmdUeXBlSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjb250YWN0TmFtZUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY29udGFjdFBob25lSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjb25maXJtTW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY29uZmlybVF1YW50aXR5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNvbmZpcm1Db250YWN0VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNvbmZpcm1Cb29raW5nVHlwZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjb25maXJtVG90YWxQcmljZVRhcmdldDogSFRNTEVsZW1lbnRcblxuICBwcml2YXRlIHBlbmRpbmdGb3JtRGF0YTogRm9ybURhdGEgfCBudWxsID0gbnVsbFxuICBwcml2YXRlIGFsbG93U3VibWlzc2lvbjogYm9vbGVhbiA9IGZhbHNlXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkhvdGVsUGFja2FnZU9yZGVyIGNvbm5lY3RlZFwiKVxuICAgIHRoaXMudXBkYXRlQnV0dG9uU3RhdGVzKClcbiAgfVxuXG4gIGluY3JlYXNlUXVhbnRpdHkoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGN1cnJlbnRRdWFudGl0eSA9IHBhcnNlSW50KHRoaXMucXVhbnRpdHlJbnB1dFRhcmdldC52YWx1ZSkgfHwgMVxuICAgIGNvbnN0IG5ld1F1YW50aXR5ID0gY3VycmVudFF1YW50aXR5ICsgMVxuICAgIFxuICAgIGlmIChuZXdRdWFudGl0eSA8PSA5OSkge1xuICAgICAgdGhpcy5xdWFudGl0eUlucHV0VGFyZ2V0LnZhbHVlID0gbmV3UXVhbnRpdHkudG9TdHJpbmcoKVxuICAgICAgdGhpcy51cGRhdGVQcmljZSgpXG4gICAgICB0aGlzLnVwZGF0ZUJ1dHRvblN0YXRlcygpXG4gICAgfVxuICB9XG5cbiAgZGVjcmVhc2VRdWFudGl0eShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgY3VycmVudFF1YW50aXR5ID0gcGFyc2VJbnQodGhpcy5xdWFudGl0eUlucHV0VGFyZ2V0LnZhbHVlKSB8fCAxXG4gICAgY29uc3QgbmV3UXVhbnRpdHkgPSBjdXJyZW50UXVhbnRpdHkgLSAxXG4gICAgXG4gICAgaWYgKG5ld1F1YW50aXR5ID49IDEpIHtcbiAgICAgIHRoaXMucXVhbnRpdHlJbnB1dFRhcmdldC52YWx1ZSA9IG5ld1F1YW50aXR5LnRvU3RyaW5nKClcbiAgICAgIHRoaXMudXBkYXRlUHJpY2UoKVxuICAgICAgdGhpcy51cGRhdGVCdXR0b25TdGF0ZXMoKVxuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZVByaWNlKCk6IHZvaWQge1xuICAgIGNvbnN0IHF1YW50aXR5ID0gcGFyc2VJbnQodGhpcy5xdWFudGl0eUlucHV0VGFyZ2V0LnZhbHVlKSB8fCAxXG4gICAgY29uc3QgdW5pdFByaWNlID0gcGFyc2VGbG9hdCh0aGlzLmluY3JlYXNlQnRuVGFyZ2V0LmRhdGFzZXQucHJpY2UgfHwgXCIwXCIpXG4gICAgY29uc3QgdG90YWxQcmljZSA9IHF1YW50aXR5ICogdW5pdFByaWNlXG5cbiAgICAvLyBVcGRhdGUgdG9wIHByaWNlICh3aXRoIDIgZGVjaW1hbHMpXG4gICAgdGhpcy50b3RhbFByaWNlVGFyZ2V0LnRleHRDb250ZW50ID0gYFx1MDBBNSR7dG90YWxQcmljZS50b0ZpeGVkKDIpfWBcbiAgICBcbiAgICAvLyBVcGRhdGUgYm90dG9tIHByaWNlIChpbnRlZ2VyIG9ubHkpXG4gICAgdGhpcy5ib3R0b21QcmljZVRhcmdldC50ZXh0Q29udGVudCA9IE1hdGgucm91bmQodG90YWxQcmljZSkudG9TdHJpbmcoKVxuICAgIFxuICAgIC8vIFVwZGF0ZSBwYXltZW50IGNvbmZpcm1hdGlvbiBhbW91bnRcbiAgICB0aGlzLnVwZGF0ZVBheW1lbnRDb25maXJtYXRpb25BbW91bnQoTWF0aC5yb3VuZCh0b3RhbFByaWNlKSlcbiAgfVxuXG4gIHVwZGF0ZUJ1dHRvblN0YXRlcygpOiB2b2lkIHtcbiAgICBjb25zdCBxdWFudGl0eSA9IHBhcnNlSW50KHRoaXMucXVhbnRpdHlJbnB1dFRhcmdldC52YWx1ZSkgfHwgMVxuICAgIFxuICAgIC8vIFVwZGF0ZSBkZWNyZWFzZSBidXR0b25cbiAgICBpZiAocXVhbnRpdHkgPD0gMSkge1xuICAgICAgdGhpcy5kZWNyZWFzZUJ0blRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYm9yZGVyLWJsdWUtNTAwXCIsIFwiYmctYmx1ZS01MFwiLCBcInRleHQtYmx1ZS02MDBcIilcbiAgICAgIHRoaXMuZGVjcmVhc2VCdG5UYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTIwMFwiLCBcInRleHQtZ3JheS0zMDBcIilcbiAgICAgIHRoaXMuZGVjcmVhc2VCdG5UYXJnZXQuZGlzYWJsZWQgPSB0cnVlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGVjcmVhc2VCdG5UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJvcmRlci1ncmF5LTIwMFwiLCBcInRleHQtZ3JheS0zMDBcIilcbiAgICAgIHRoaXMuZGVjcmVhc2VCdG5UYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ibHVlLTUwMFwiLCBcImJnLWJsdWUtNTBcIiwgXCJ0ZXh0LWJsdWUtNjAwXCIpXG4gICAgICB0aGlzLmRlY3JlYXNlQnRuVGFyZ2V0LmRpc2FibGVkID0gZmFsc2VcbiAgICB9XG4gIH1cblxuICBzZWxlY3RUYWIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCB0YWJUeXBlID0gdGFyZ2V0LmRhdGFzZXQudGFiXG4gICAgXG4gICAgaWYgKHRhYlR5cGUgPT09IFwic3RvY2t1cFwiKSB7XG4gICAgICAvLyBBY3RpdmF0ZSBzdG9ja3VwIHRhYlxuICAgICAgdGhpcy5zdG9ja3VwVGFiVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI0ZDRUVBOF1cIiwgXCJiZy1vcGFjaXR5LTYwXCIsIFwidGV4dC1ncmF5LTcwMFwiKVxuICAgICAgdGhpcy5zdG9ja3VwVGFiVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy1bI0Y1RjhGQV1cIiwgXCJ6LTEwXCIpXG4gICAgICB0aGlzLnN0b2NrdXBUYWJUYXJnZXQucXVlcnlTZWxlY3RvcihcInNwYW46Zmlyc3QtY2hpbGRcIik/LmNsYXNzTGlzdC5yZW1vdmUoXCJmb250LW1lZGl1bVwiKVxuICAgICAgdGhpcy5zdG9ja3VwVGFiVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCJzcGFuOmZpcnN0LWNoaWxkXCIpPy5jbGFzc0xpc3QuYWRkKFwiZm9udC1ib2xkXCIsIFwidGV4dC1ibGFja1wiKVxuICAgICAgXG4gICAgICAvLyBEZWFjdGl2YXRlIGluc3RhbnQgdGFiXG4gICAgICB0aGlzLmluc3RhbnRUYWJUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLVsjRjVGOEZBXVwiLCBcInotMTBcIilcbiAgICAgIHRoaXMuaW5zdGFudFRhYlRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNGQ0VFQThdXCIsIFwiYmctb3BhY2l0eS02MFwiLCBcInRleHQtZ3JheS03MDBcIilcbiAgICAgIHRoaXMuaW5zdGFudFRhYlRhcmdldC5xdWVyeVNlbGVjdG9yKFwic3BhbjpmaXJzdC1jaGlsZFwiKT8uY2xhc3NMaXN0LnJlbW92ZShcImZvbnQtYm9sZFwiLCBcInRleHQtYmxhY2tcIilcbiAgICAgIHRoaXMuaW5zdGFudFRhYlRhcmdldC5xdWVyeVNlbGVjdG9yKFwic3BhbjpmaXJzdC1jaGlsZFwiKT8uY2xhc3NMaXN0LmFkZChcImZvbnQtbWVkaXVtXCIpXG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBoaWRkZW4gZmllbGRcbiAgICAgIHRoaXMuYm9va2luZ1R5cGVJbnB1dFRhcmdldC52YWx1ZSA9IFwic3RvY2t1cFwiXG4gICAgfSBlbHNlIGlmICh0YWJUeXBlID09PSBcImluc3RhbnRcIikge1xuICAgICAgLy8gQWN0aXZhdGUgaW5zdGFudCB0YWJcbiAgICAgIHRoaXMuaW5zdGFudFRhYlRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNGQ0VFQThdXCIsIFwiYmctb3BhY2l0eS02MFwiLCBcInRleHQtZ3JheS03MDBcIilcbiAgICAgIHRoaXMuaW5zdGFudFRhYlRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNGNUY4RkFdXCIsIFwiei0xMFwiKVxuICAgICAgdGhpcy5pbnN0YW50VGFiVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCJzcGFuOmZpcnN0LWNoaWxkXCIpPy5jbGFzc0xpc3QucmVtb3ZlKFwiZm9udC1tZWRpdW1cIilcbiAgICAgIHRoaXMuaW5zdGFudFRhYlRhcmdldC5xdWVyeVNlbGVjdG9yKFwic3BhbjpmaXJzdC1jaGlsZFwiKT8uY2xhc3NMaXN0LmFkZChcImZvbnQtYm9sZFwiLCBcInRleHQtYmxhY2tcIilcbiAgICAgIFxuICAgICAgLy8gRGVhY3RpdmF0ZSBzdG9ja3VwIHRhYlxuICAgICAgdGhpcy5zdG9ja3VwVGFiVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI0Y1RjhGQV1cIiwgXCJ6LTEwXCIpXG4gICAgICB0aGlzLnN0b2NrdXBUYWJUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLVsjRkNFRUE4XVwiLCBcImJnLW9wYWNpdHktNjBcIiwgXCJ0ZXh0LWdyYXktNzAwXCIpXG4gICAgICB0aGlzLnN0b2NrdXBUYWJUYXJnZXQucXVlcnlTZWxlY3RvcihcInNwYW46Zmlyc3QtY2hpbGRcIik/LmNsYXNzTGlzdC5yZW1vdmUoXCJmb250LWJvbGRcIiwgXCJ0ZXh0LWJsYWNrXCIpXG4gICAgICB0aGlzLnN0b2NrdXBUYWJUYXJnZXQucXVlcnlTZWxlY3RvcihcInNwYW46Zmlyc3QtY2hpbGRcIik/LmNsYXNzTGlzdC5hZGQoXCJmb250LW1lZGl1bVwiKVxuICAgICAgXG4gICAgICAvLyBVcGRhdGUgaGlkZGVuIGZpZWxkXG4gICAgICB0aGlzLmJvb2tpbmdUeXBlSW5wdXRUYXJnZXQudmFsdWUgPSBcImluc3RhbnRcIlxuICAgIH1cbiAgfVxuXG4gIHNlbGVjdFBhc3NlbmdlcihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBsYWJlbCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBuYW1lID0gbGFiZWwuZGF0YXNldC5wYXNzZW5nZXJOYW1lIHx8IFwiXCJcbiAgICBjb25zdCBwaG9uZSA9IGxhYmVsLmRhdGFzZXQucGFzc2VuZ2VyUGhvbmUgfHwgXCJcIlxuICAgIFxuICAgIC8vIFVwZGF0ZSBoaWRkZW4gZmllbGRzXG4gICAgdGhpcy5jb250YWN0TmFtZUlucHV0VGFyZ2V0LnZhbHVlID0gbmFtZVxuICAgIHRoaXMuY29udGFjdFBob25lSW5wdXRUYXJnZXQudmFsdWUgPSBwaG9uZVxuICB9XG5cbiAgaGFuZGxlU3VibWl0KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIC8vIEFsbG93IHN1Ym1pc3Npb24gaWYgZmxhZyBpcyBzZXRcbiAgICBpZiAodGhpcy5hbGxvd1N1Ym1pc3Npb24pIHtcbiAgICAgIGNvbnNvbGUubG9nKCdBbGxvd2luZyBmb3JtIHN1Ym1pc3Npb24nKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBcbiAgICAvLyBWYWxpZGF0ZSBjb250YWN0IGluZm9cbiAgICBpZiAoIXRoaXMuY29udGFjdE5hbWVJbnB1dFRhcmdldC52YWx1ZSB8fCAhdGhpcy5jb250YWN0UGhvbmVJbnB1dFRhcmdldC52YWx1ZSkge1xuICAgICAgYWxlcnQoJ1x1OEJGN1x1OTAwOVx1NjJFOVx1ODA1NFx1N0NGQlx1NEVCQScpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gU3RvcmUgZm9ybSBkYXRhIGZvciBsYXRlciBzdWJtaXNzaW9uXG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIGNvbnN0IGZvcm0gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignZm9ybScpIGFzIEhUTUxGb3JtRWxlbWVudFxuICAgIGlmIChmb3JtKSB7XG4gICAgICB0aGlzLnBlbmRpbmdGb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShmb3JtKVxuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgbW9kYWwgd2l0aCBjdXJyZW50IGZvcm0gdmFsdWVzXG4gICAgdGhpcy51cGRhdGVDb25maXJtTW9kYWwoKVxuICAgIFxuICAgIC8vIFNob3cgbW9kYWxcbiAgICB0aGlzLnNob3dDb25maXJtTW9kYWwoKVxuICB9XG5cbiAgdXBkYXRlQ29uZmlybU1vZGFsKCk6IHZvaWQge1xuICAgIC8vIFVwZGF0ZSBxdWFudGl0eVxuICAgIGNvbnN0IHF1YW50aXR5ID0gdGhpcy5xdWFudGl0eUlucHV0VGFyZ2V0LnZhbHVlXG4gICAgdGhpcy5jb25maXJtUXVhbnRpdHlUYXJnZXQudGV4dENvbnRlbnQgPSBxdWFudGl0eVxuICAgIFxuICAgIC8vIFVwZGF0ZSBjb250YWN0XG4gICAgY29uc3QgY29udGFjdE5hbWUgPSB0aGlzLmNvbnRhY3ROYW1lSW5wdXRUYXJnZXQudmFsdWVcbiAgICBjb25zdCBjb250YWN0UGhvbmUgPSB0aGlzLmNvbnRhY3RQaG9uZUlucHV0VGFyZ2V0LnZhbHVlXG4gICAgdGhpcy5jb25maXJtQ29udGFjdFRhcmdldC50ZXh0Q29udGVudCA9IGAke2NvbnRhY3ROYW1lfSAke2NvbnRhY3RQaG9uZX1gXG4gICAgXG4gICAgLy8gVXBkYXRlIGJvb2tpbmcgdHlwZVxuICAgIGNvbnN0IGJvb2tpbmdUeXBlID0gdGhpcy5ib29raW5nVHlwZUlucHV0VGFyZ2V0LnZhbHVlXG4gICAgdGhpcy5jb25maXJtQm9va2luZ1R5cGVUYXJnZXQudGV4dENvbnRlbnQgPSBib29raW5nVHlwZSA9PT0gJ3N0b2NrdXAnID8gJ1x1NTE0OFx1NTZFNFx1NTQwRVx1N0VBNicgOiAnXHU3QUNCXHU1MzczXHU5ODg0XHU3RUE2J1xuICAgIFxuICAgIC8vIFVwZGF0ZSB0b3RhbCBwcmljZVxuICAgIGNvbnN0IHRvdGFsUHJpY2UgPSB0aGlzLmJvdHRvbVByaWNlVGFyZ2V0LnRleHRDb250ZW50XG4gICAgdGhpcy5jb25maXJtVG90YWxQcmljZVRhcmdldC50ZXh0Q29udGVudCA9IHRvdGFsUHJpY2UgfHwgJzAnXG4gIH1cblxuICBzaG93Q29uZmlybU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMuY29uZmlybU1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgXG4gICAgLy8gQXV0by1jbG9zZSBhbmQgc2hvdyBwYXNzd29yZCBtb2RhbCBhZnRlciAyLTMgc2Vjb25kc1xuICAgIGNvbnN0IHdhaXRUaW1lID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKDMwMDAgLSAyMDAwICsgMSkpICsgMjAwMFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZUNvbmZpcm1Nb2RhbCgpXG4gICAgICB0aGlzLnNob3dQYXltZW50UGFzc3dvcmRNb2RhbCgpXG4gICAgfSwgd2FpdFRpbWUpXG4gIH1cblxuICBjbG9zZUNvbmZpcm1Nb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLmNvbmZpcm1Nb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICB9XG5cbiAgc2hvd1BheW1lbnRQYXNzd29yZE1vZGFsKCk6IHZvaWQge1xuICAgIC8vIEdldCBwYXltZW50IGNvbmZpcm1hdGlvbiBjb250cm9sbGVyIGFuZCBzaG93IHBhc3N3b3JkIG1vZGFsXG4gICAgY29uc3QgcGF5bWVudENvbnRyb2xsZXIgPSB0aGlzLmFwcGxpY2F0aW9uLmdldENvbnRyb2xsZXJGb3JFbGVtZW50QW5kSWRlbnRpZmllcihcbiAgICAgIHRoaXMuZWxlbWVudCxcbiAgICAgICdwYXltZW50LWNvbmZpcm1hdGlvbidcbiAgICApIGFzIGFueVxuICAgIFxuICAgIGlmIChwYXltZW50Q29udHJvbGxlciAmJiB0eXBlb2YgcGF5bWVudENvbnRyb2xsZXIuc2hvd1Bhc3N3b3JkTW9kYWwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHBheW1lbnRDb250cm9sbGVyLnNob3dQYXNzd29yZE1vZGFsKClcbiAgICAgIFxuICAgICAgLy8gTGlzdGVuIGZvciBwYXltZW50IHN1Y2Nlc3MgdG8gc3VibWl0IGZvcm1cbiAgICAgIHRoaXMuc2V0dXBQYXltZW50U3VjY2Vzc0xpc3RlbmVyKClcbiAgICB9XG4gIH1cblxuICBzZXR1cFBheW1lbnRTdWNjZXNzTGlzdGVuZXIoKTogdm9pZCB7XG4gICAgLy8gT3ZlcnJpZGUgdGhlIHBheW1lbnQgY29uZmlybWF0aW9uJ3MgcHJvY2Vzc0FjdHVhbFBheW1lbnQgdG8gc3VibWl0IG91ciBmb3JtXG4gICAgY29uc3QgcGF5bWVudENvbnRyb2xsZXIgPSB0aGlzLmFwcGxpY2F0aW9uLmdldENvbnRyb2xsZXJGb3JFbGVtZW50QW5kSWRlbnRpZmllcihcbiAgICAgIHRoaXMuZWxlbWVudCxcbiAgICAgICdwYXltZW50LWNvbmZpcm1hdGlvbidcbiAgICApIGFzIGFueVxuICAgIFxuICAgIGlmIChwYXltZW50Q29udHJvbGxlcikge1xuICAgICAgLy8gQ29tcGxldGVseSBvdmVycmlkZSB0aGUgcHJvY2Vzc0FjdHVhbFBheW1lbnQgbWV0aG9kXG4gICAgICBwYXltZW50Q29udHJvbGxlci5wcm9jZXNzQWN0dWFsUGF5bWVudCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgLy8gU3VibWl0IHRoZSBmb3JtIGltbWVkaWF0ZWx5IC0gbm8gQVBJIGNhbGwgbmVlZGVkXG4gICAgICAgIHRoaXMuc3VibWl0Rm9ybVdpdGhEYXRhKClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdWJtaXRGb3JtV2l0aERhdGEoKTogdm9pZCB7XG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIGNvbnN0IGZvcm0gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignZm9ybScpIGFzIEhUTUxGb3JtRWxlbWVudFxuICAgIGlmIChmb3JtKSB7XG4gICAgICBjb25zb2xlLmxvZygnU2V0dGluZyBhbGxvd1N1Ym1pc3Npb24gZmxhZyBhbmQgc3VibWl0dGluZyBmb3JtLi4uJylcbiAgICAgIC8vIFNldCBmbGFnIHRvIGFsbG93IHN1Ym1pc3Npb25cbiAgICAgIHRoaXMuYWxsb3dTdWJtaXNzaW9uID0gdHJ1ZVxuICAgICAgLy8gU3VibWl0IHRoZSBmb3JtIHVzaW5nIFR1cmJvXG4gICAgICBmb3JtLnJlcXVlc3RTdWJtaXQoKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGb3JtIG5vdCBmb3VuZCcpXG4gICAgfVxuICB9XG5cbiAgdXBkYXRlUGF5bWVudENvbmZpcm1hdGlvbkFtb3VudChhbW91bnQ6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIFVwZGF0ZSB0aGUgcGF5bWVudCBjb25maXJtYXRpb24gY29udHJvbGxlcidzIGFtb3VudCB2YWx1ZVxuICAgIGNvbnN0IHBheW1lbnRDb250cm9sbGVyID0gdGhpcy5hcHBsaWNhdGlvbi5nZXRDb250cm9sbGVyRm9yRWxlbWVudEFuZElkZW50aWZpZXIoXG4gICAgICB0aGlzLmVsZW1lbnQsXG4gICAgICAncGF5bWVudC1jb25maXJtYXRpb24nXG4gICAgKSBhcyBhbnlcbiAgICBcbiAgICBpZiAocGF5bWVudENvbnRyb2xsZXIpIHtcbiAgICAgIHBheW1lbnRDb250cm9sbGVyLmFtb3VudFZhbHVlID0gYW1vdW50LnRvU3RyaW5nKClcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmludGVyZmFjZSBCZWZvcmVJbnN0YWxsUHJvbXB0RXZlbnQgZXh0ZW5kcyBFdmVudCB7XG4gIHJlYWRvbmx5IHBsYXRmb3Jtczogc3RyaW5nW11cbiAgcmVhZG9ubHkgdXNlckNob2ljZTogUHJvbWlzZTx7XG4gICAgb3V0Y29tZTogJ2FjY2VwdGVkJyB8ICdkaXNtaXNzZWQnXG4gICAgcGxhdGZvcm06IHN0cmluZ1xuICB9PlxuICBwcm9tcHQoKTogUHJvbWlzZTx2b2lkPlxufVxuXG4vKipcbiAqIFBXQSBJbnN0YWxsIENvbnRyb2xsZXJcbiAqXG4gKiBIYW5kbGVzIFByb2dyZXNzaXZlIFdlYiBBcHAgaW5zdGFsbGF0aW9uIHByb21wdFxuICpcbiAqIFVzYWdlOlxuICogICA8ZGl2IGRhdGEtY29udHJvbGxlcj1cInB3YS1pbnN0YWxsXCI+XG4gKiAgICAgPGJ1dHRvblxuICogICAgICAgZGF0YS1wd2EtaW5zdGFsbC10YXJnZXQ9XCJpbnN0YWxsQnV0dG9uXCJcbiAqICAgICAgIGRhdGEtYWN0aW9uPVwiY2xpY2stPnB3YS1pbnN0YWxsI2luc3RhbGxcIlxuICogICAgICAgY2xhc3M9XCJoaWRkZW5cIj5cbiAqICAgICAgIEluc3RhbGwgQXBwXG4gKiAgICAgPC9idXR0b24+XG4gKiAgIDwvZGl2PlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXIge1xuICBkZWNsYXJlIHJlYWRvbmx5IGluc3RhbGxCdXR0b25UYXJnZXQ6IEhUTUxCdXR0b25FbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzSW5zdGFsbEJ1dHRvblRhcmdldDogYm9vbGVhblxuXG4gIHByaXZhdGUgZGVmZXJyZWRQcm9tcHQ6IEJlZm9yZUluc3RhbGxQcm9tcHRFdmVudCB8IG51bGwgPSBudWxsXG5cbiAgY29ubmVjdCgpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JlaW5zdGFsbHByb21wdCcsIHRoaXMuaGFuZGxlQmVmb3JlSW5zdGFsbFByb21wdC5iaW5kKHRoaXMpKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdhcHBpbnN0YWxsZWQnLCB0aGlzLmhhbmRsZUFwcEluc3RhbGxlZC5iaW5kKHRoaXMpKVxuXG4gICAgaWYgKHRoaXMuaXNTdGFuZGFsb25lKCkpIHtcbiAgICAgIHRoaXMuaGlkZUluc3RhbGxCdXR0b24oKVxuICAgIH1cbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKSB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JlZm9yZWluc3RhbGxwcm9tcHQnLCB0aGlzLmhhbmRsZUJlZm9yZUluc3RhbGxQcm9tcHQuYmluZCh0aGlzKSlcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignYXBwaW5zdGFsbGVkJywgdGhpcy5oYW5kbGVBcHBJbnN0YWxsZWQuYmluZCh0aGlzKSlcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlQmVmb3JlSW5zdGFsbFByb21wdChlOiBFdmVudCkge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIHRoaXMuZGVmZXJyZWRQcm9tcHQgPSBlIGFzIEJlZm9yZUluc3RhbGxQcm9tcHRFdmVudFxuXG4gICAgaWYgKHRoaXMuaGFzSW5zdGFsbEJ1dHRvblRhcmdldCkge1xuICAgICAgdGhpcy5pbnN0YWxsQnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVBcHBJbnN0YWxsZWQoKSB7XG4gICAgdGhpcy5kZWZlcnJlZFByb21wdCA9IG51bGxcbiAgICB0aGlzLmhpZGVJbnN0YWxsQnV0dG9uKClcbiAgfVxuXG4gIGFzeW5jIGluc3RhbGwoKSB7XG4gICAgaWYgKCF0aGlzLmRlZmVycmVkUHJvbXB0KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB0aGlzLmRlZmVycmVkUHJvbXB0LnByb21wdCgpXG5cbiAgICBjb25zdCB7IG91dGNvbWUgfSA9IGF3YWl0IHRoaXMuZGVmZXJyZWRQcm9tcHQudXNlckNob2ljZVxuXG4gICAgaWYgKG91dGNvbWUgPT09ICdhY2NlcHRlZCcpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdQV0EgaW5zdGFsbGF0aW9uIGFjY2VwdGVkJylcbiAgICB9XG5cbiAgICB0aGlzLmRlZmVycmVkUHJvbXB0ID0gbnVsbFxuICAgIHRoaXMuaGlkZUluc3RhbGxCdXR0b24oKVxuICB9XG5cbiAgcHJpdmF0ZSBpc1N0YW5kYWxvbmUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHdpbmRvdy5tYXRjaE1lZGlhKCcoZGlzcGxheS1tb2RlOiBzdGFuZGFsb25lKScpLm1hdGNoZXMgfHxcbiAgICAgICAgICAgKHdpbmRvdy5uYXZpZ2F0b3IgYXMgYW55KS5zdGFuZGFsb25lID09PSB0cnVlXG4gIH1cblxuICBwcml2YXRlIGhpZGVJbnN0YWxsQnV0dG9uKCkge1xuICAgIGlmICh0aGlzLmhhc0luc3RhbGxCdXR0b25UYXJnZXQpIHtcbiAgICAgIHRoaXMuaW5zdGFsbEJ1dHRvblRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyB0YXJnZXRzID0gW1wiaW5zdGFsbEJ1dHRvblwiXVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwibW9kYWxcIixcbiAgICBcInNlbGVjdGVkRGF0ZVwiLFxuICAgIFwiZGF0ZUlucHV0XCIsXG4gICAgXCJkYXRlQnV0dG9uXCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgY3VycmVudERhdGU6IFN0cmluZ1xuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNNb2RhbFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IHNlbGVjdGVkRGF0ZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkYXRlSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkYXRlQnV0dG9uVGFyZ2V0czogSFRNTEJ1dHRvbkVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1NlbGVjdGVkRGF0ZVRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0RhdGVJbnB1dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIGN1cnJlbnREYXRlVmFsdWU6IHN0cmluZ1xuXG4gIHByaXZhdGUgc2VsZWN0ZWREYXRlT2JqOiBEYXRlID0gbmV3IERhdGUoKVxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJCdXNEYXRlUGlja2VyIGNvbm5lY3RlZFwiKVxuICAgIC8vIEluaXRpYWxpemUgd2l0aCB0b2RheSdzIGRhdGUgdXNpbmcgY2xpZW50IHRpbWV6b25lXG4gICAgdGhpcy5zZWxlY3RlZERhdGVPYmogPSBuZXcgRGF0ZSgpXG4gICAgdGhpcy5jdXJyZW50RGF0ZVZhbHVlID0gdGhpcy5mb3JtYXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlT2JqKVxuICAgIFxuICAgIC8vIFVwZGF0ZSBkaXNwbGF5ZWQgZGF0ZSBpbW1lZGlhdGVseSB3aXRoIGNsaWVudCB0aW1lem9uZVxuICAgIGlmICh0aGlzLmhhc1NlbGVjdGVkRGF0ZVRhcmdldCkge1xuICAgICAgdGhpcy51cGRhdGVEaXNwbGF5ZWREYXRlKClcbiAgICB9XG4gICAgXG4gICAgLy8gVXBkYXRlIGhpZGRlbiBpbnB1dCB3aXRoIGNsaWVudCB0aW1lem9uZSBkYXRlXG4gICAgaWYgKHRoaXMuaGFzRGF0ZUlucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLmRhdGVJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuY3VycmVudERhdGVWYWx1ZVxuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgcGFzdCBkYXRlIGJ1dHRvbnMgYmFzZWQgb24gY2xpZW50IHRpbWV6b25lXG4gICAgdGhpcy51cGRhdGVQYXN0RGF0ZXMoKVxuICB9XG5cbiAgLy8gT3BlbiBkYXRlIHBpY2tlciBtb2RhbFxuICBvcGVuTW9kYWwoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc01vZGFsVGFyZ2V0KSByZXR1cm5cbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nXG4gIH1cblxuICAvLyBDbG9zZSBkYXRlIHBpY2tlciBtb2RhbFxuICBjbG9zZU1vZGFsKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNNb2RhbFRhcmdldCkgcmV0dXJuXG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJ1xuICB9XG5cbiAgLy8gU2VsZWN0IGEgZGF0ZVxuICBzZWxlY3REYXRlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBkYXRlU3RyID0gYnV0dG9uLmRhdGFzZXQuZGF0ZSB8fCAnJ1xuICAgIFxuICAgIGlmICghZGF0ZVN0cikgcmV0dXJuXG5cbiAgICAvLyBQcmV2ZW50IHNlbGVjdGluZyBkYXRlcyBiZWZvcmUgdG9kYXkgKHVzaW5nIGNsaWVudCB0aW1lem9uZSlcbiAgICBjb25zdCBzZWxlY3RlZERhdGUgPSBuZXcgRGF0ZShgJHtkYXRlU3RyfVQwMDowMDowMGApXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXG4gICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICBzZWxlY3RlZERhdGUuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICBcbiAgICBpZiAoc2VsZWN0ZWREYXRlIDwgdG9kYXkpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdDYW5ub3Qgc2VsZWN0IHBhc3QgZGF0ZXMgKGNsaWVudCB0aW1lem9uZSBjaGVjayknKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdGhpcy5zZWxlY3RlZERhdGVPYmogPSBzZWxlY3RlZERhdGVcbiAgICB0aGlzLmN1cnJlbnREYXRlVmFsdWUgPSBkYXRlU3RyXG4gICAgXG4gICAgLy8gVXBkYXRlIGRpc3BsYXllZCBkYXRlXG4gICAgaWYgKHRoaXMuaGFzU2VsZWN0ZWREYXRlVGFyZ2V0KSB7XG4gICAgICB0aGlzLnVwZGF0ZURpc3BsYXllZERhdGUoKVxuICAgIH1cbiAgICBpZiAodGhpcy5oYXNEYXRlSW5wdXRUYXJnZXQpIHtcbiAgICAgIHRoaXMuZGF0ZUlucHV0VGFyZ2V0LnZhbHVlID0gZGF0ZVN0clxuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpZiB3ZSdyZSBvbiB0aGUgc2VhcmNoIHBhZ2UgYnkgY2hlY2tpbmcgVVJMIHBhdGhcbiAgICBjb25zdCBjdXJyZW50UGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZVxuICAgIGlmIChjdXJyZW50UGF0aC5pbmNsdWRlcygnL2J1c190aWNrZXRzL3NlYXJjaCcpKSB7XG4gICAgICAvLyBPbiBzZWFyY2ggcGFnZTogY2xvc2UgbW9kYWwgYW5kIHJlZnJlc2ggd2l0aCBuZXcgZGF0ZVxuICAgICAgdGhpcy5jbG9zZU1vZGFsKClcbiAgICAgIHRoaXMucmVmcmVzaFNlYXJjaFJlc3VsdHMoZGF0ZVN0cilcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gT24gaW5kZXggcGFnZToganVzdCBjbG9zZSBtb2RhbFxuICAgICAgdGhpcy5jbG9zZU1vZGFsKClcbiAgICB9XG4gIH1cblxuICAvLyBSZWZyZXNoIHNlYXJjaCByZXN1bHRzIHdpdGggbmV3IGRhdGUgKHNlYXJjaCBwYWdlIG9ubHkpXG4gIHByaXZhdGUgcmVmcmVzaFNlYXJjaFJlc3VsdHMoZGF0ZVN0cjogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKVxuICAgIHBhcmFtcy5zZXQoJ2RhdGUnLCBkYXRlU3RyKVxuICAgIFxuICAgIC8vIFVzZSBUdXJibyB0byBuYXZpZ2F0ZSB3aXRoIG5ldyBkYXRlIHBhcmFtZXRlclxuICAgIGNvbnN0IG5ld1VybCA9IGAke3dpbmRvdy5sb2NhdGlvbi5wYXRobmFtZX0/JHtwYXJhbXMudG9TdHJpbmcoKX1gXG4gICAgLy8gQHRzLWlnbm9yZSAtIFR1cmJvIGlzIGF2YWlsYWJsZSBnbG9iYWxseVxuICAgIGlmICh0eXBlb2YgVHVyYm8gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgICAgIFR1cmJvLnZpc2l0KG5ld1VybClcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRmFsbGJhY2sgdG8gcmVndWxhciBwYWdlIHJlbG9hZFxuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBuZXdVcmxcbiAgICB9XG4gIH1cblxuICAvLyBVcGRhdGUgdGhlIGRpc3BsYXllZCBkYXRlIGluIHRoZSBtYWluIHZpZXdcbiAgcHJpdmF0ZSB1cGRhdGVEaXNwbGF5ZWREYXRlKCk6IHZvaWQge1xuICAgIGNvbnN0IG1vbnRoID0gdGhpcy5zZWxlY3RlZERhdGVPYmouZ2V0TW9udGgoKSArIDFcbiAgICBjb25zdCBkYXkgPSB0aGlzLnNlbGVjdGVkRGF0ZU9iai5nZXREYXRlKClcbiAgICBjb25zdCBkYXlOYW1lID0gdGhpcy5nZXREYXlOYW1lKHRoaXMuc2VsZWN0ZWREYXRlT2JqKVxuICAgIFxuICAgIHRoaXMuc2VsZWN0ZWREYXRlVGFyZ2V0LmlubmVySFRNTCA9IGBcbiAgICAgICR7bW9udGh9PHNwYW4gY2xhc3M9XCJ0ZXh0LWJhc2UgbXgtMC41XCI+XHU2NzA4PC9zcGFuPiR7ZGF5fTxzcGFuIGNsYXNzPVwidGV4dC1iYXNlIG1sLTAuNSBtci0yXCI+XHU2NUU1PC9zcGFuPlxuICAgIGBcbiAgICBcbiAgICAvLyBVcGRhdGUgdGhlIFwiXHU0RUNBXHU1OTI5XCIgdGV4dCBhZnRlciB0aGUgZGF0ZVxuICAgIGNvbnN0IGRheUxhYmVsID0gdGhpcy5zZWxlY3RlZERhdGVUYXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nXG4gICAgaWYgKGRheUxhYmVsKSB7XG4gICAgICBkYXlMYWJlbC50ZXh0Q29udGVudCA9IGRheU5hbWVcbiAgICB9XG4gIH1cblxuICAvLyBHZXQgZGF5IG5hbWUgaW4gQ2hpbmVzZVxuICBwcml2YXRlIGdldERheU5hbWUoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXG4gICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICBjb25zdCB0YXJnZXREYXRlID0gbmV3IERhdGUoZGF0ZSlcbiAgICB0YXJnZXREYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgXG4gICAgY29uc3QgZGlmZlRpbWUgPSB0YXJnZXREYXRlLmdldFRpbWUoKSAtIHRvZGF5LmdldFRpbWUoKVxuICAgIGNvbnN0IGRpZmZEYXlzID0gTWF0aC5yb3VuZChkaWZmVGltZSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSlcbiAgICBcbiAgICBpZiAoZGlmZkRheXMgPT09IDApIHJldHVybiAnXHU0RUNBXHU1OTI5J1xuICAgIGlmIChkaWZmRGF5cyA9PT0gMSkgcmV0dXJuICdcdTY2MEVcdTU5MjknXG4gICAgaWYgKGRpZmZEYXlzID09PSAyKSByZXR1cm4gJ1x1NTQwRVx1NTkyOSdcbiAgICBcbiAgICBjb25zdCB3ZWVrZGF5cyA9IFsnXHU1NDY4XHU2NUU1JywgJ1x1NTQ2OFx1NEUwMCcsICdcdTU0NjhcdTRFOEMnLCAnXHU1NDY4XHU0RTA5JywgJ1x1NTQ2OFx1NTZEQicsICdcdTU0NjhcdTRFOTQnLCAnXHU1NDY4XHU1MTZEJ11cbiAgICByZXR1cm4gd2Vla2RheXNbZGF0ZS5nZXREYXkoKV1cbiAgfVxuXG4gIC8vIEZvcm1hdCBkYXRlIGFzIFlZWVktTU0tRERcbiAgcHJpdmF0ZSBmb3JtYXREYXRlKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKClcbiAgICBjb25zdCBtb250aCA9IFN0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpXG4gICAgY29uc3QgZGF5ID0gU3RyaW5nKGRhdGUuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpXG4gICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fWBcbiAgfVxuXG4gIC8vIFVwZGF0ZSBwYXN0IGRhdGVzIHRvIGJlIGRpc2FibGVkXG4gIHByaXZhdGUgdXBkYXRlUGFzdERhdGVzKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5kYXRlQnV0dG9uVGFyZ2V0cykgcmV0dXJuXG4gICAgXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXG4gICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICBcbiAgICB0aGlzLmRhdGVCdXR0b25UYXJnZXRzLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgIGNvbnN0IGRhdGVTdHIgPSBidXR0b24uZGF0YXNldC5kYXRlXG4gICAgICBpZiAoIWRhdGVTdHIpIHJldHVyblxuICAgICAgXG4gICAgICBjb25zdCBidXR0b25EYXRlID0gbmV3IERhdGUoYCR7ZGF0ZVN0cn1UMDA6MDA6MDBgKVxuICAgICAgYnV0dG9uRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICAgICAgXG4gICAgICBpZiAoYnV0dG9uRGF0ZSA8IHRvZGF5KSB7XG4gICAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IHRydWVcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktNDAnLCAnY3Vyc29yLW5vdC1hbGxvd2VkJylcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2hvdmVyOmJnLWJsdWUtNTAnKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyBDaGVjayBpZiBkYXRlIGlzIHRvZGF5XG4gIHByaXZhdGUgaXNUb2RheShkYXRlOiBEYXRlKTogYm9vbGVhbiB7XG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXG4gICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICBjb25zdCBjb21wYXJlRGF0ZSA9IG5ldyBEYXRlKGRhdGUpXG4gICAgY29tcGFyZURhdGUuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICByZXR1cm4gY29tcGFyZURhdGUuZ2V0VGltZSgpID09PSB0b2RheS5nZXRUaW1lKClcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcbmltcG9ydCAqIGFzIFR1cmJvIGZyb20gXCJAaG90d2lyZWQvdHVyYm9cIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXIge1xuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIG9yaWdpbjogU3RyaW5nLFxuICAgIGRlc3RpbmF0aW9uOiBTdHJpbmcsXG4gICAgZGF0ZTogU3RyaW5nXG4gIH1cblxuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcIm92ZXJsYXlcIixcbiAgICBcIm1vZGFsXCIsXG4gICAgXCJkZXBhcnR1cmVUaW1lVGFiXCIsXG4gICAgXCJzZWF0VHlwZVRhYlwiLFxuICAgIFwiZGVwYXJ0dXJlU3RhdGlvblRhYlwiLFxuICAgIFwiYXJyaXZhbFN0YXRpb25UYWJcIixcbiAgICBcImRlcGFydHVyZVRpbWVTZWN0aW9uXCIsXG4gICAgXCJzZWF0VHlwZVNlY3Rpb25cIixcbiAgICBcImRlcGFydHVyZVN0YXRpb25TZWN0aW9uXCIsXG4gICAgXCJhcnJpdmFsU3RhdGlvblNlY3Rpb25cIixcbiAgICBcImRlcGFydHVyZVRpbWVDYXJkXCIsXG4gICAgXCJzZWF0VHlwZUNhcmRcIixcbiAgICBcImRlcGFydHVyZVN0YXRpb25DYXJkXCIsXG4gICAgXCJhcnJpdmFsU3RhdGlvbkNhcmRcIixcbiAgICBcImFwcGx5QnV0dG9uXCIsXG4gICAgXCJmaWx0ZXJCYWRnZVwiLFxuICAgIFwic2VsZWN0ZWRUYWdzQ29udGFpbmVyXCIsXG4gICAgXCJzZWxlY3RlZFRhZ3NMaXN0XCIsXG4gICAgXCJzb3J0TW9kYWxcIixcbiAgICBcInNvcnRPcHRpb25cIixcbiAgICBcInRpbWVCdXR0b25cIixcbiAgICBcInByaWNlQnV0dG9uXCJcbiAgXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgb3ZlcmxheVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkZXBhcnR1cmVUaW1lVGFiVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlYXRUeXBlVGFiVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRlcGFydHVyZVN0YXRpb25UYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgYXJyaXZhbFN0YXRpb25UYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVwYXJ0dXJlVGltZVNlY3Rpb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VhdFR5cGVTZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRlcGFydHVyZVN0YXRpb25TZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGFycml2YWxTdGF0aW9uU2VjdGlvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkZXBhcnR1cmVUaW1lQ2FyZFRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBzZWF0VHlwZUNhcmRUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVwYXJ0dXJlU3RhdGlvbkNhcmRUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgYXJyaXZhbFN0YXRpb25DYXJkVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IGFwcGx5QnV0dG9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGZpbHRlckJhZGdlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlbGVjdGVkVGFnc0NvbnRhaW5lclRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzZWxlY3RlZFRhZ3NMaXN0VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNvcnRNb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzb3J0T3B0aW9uVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IHRpbWVCdXR0b25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgcHJpY2VCdXR0b25UYXJnZXQ6IEhUTUxFbGVtZW50XG5cbiAgZGVjbGFyZSByZWFkb25seSBvcmlnaW5WYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVzdGluYXRpb25WYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgcmVhZG9ubHkgZGF0ZVZhbHVlOiBzdHJpbmdcblxuICBzZWxlY3RlZERlcGFydHVyZVRpbWVzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKVxuICBzZWxlY3RlZFNlYXRUeXBlczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KClcbiAgc2VsZWN0ZWREZXBhcnR1cmVTdGF0aW9uczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KClcbiAgc2VsZWN0ZWRBcnJpdmFsU3RhdGlvbnM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpXG4gIGN1cnJlbnRTb3J0RmllbGQ6IHN0cmluZyA9ICdkZWZhdWx0J1xuICBjdXJyZW50U29ydERpcmVjdGlvbjogc3RyaW5nID0gJydcblxuICAvLyBcdTY2MjBcdTVDMDRcdTUxNzNcdTdDRkJcdUZGMUFcdTY4MDdcdThCQzZcdTdCMjYgLT4gXHU2NjNFXHU3OTNBXHU2NTg3XHU1QjU3XG4gIHRpbWVTbG90TGFiZWxzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICAgIG1vcm5pbmc6ICdcdTUxQ0NcdTY2NjggMDA6MDAtMDU6NTknLFxuICAgIG1vcm5pbmcyOiAnXHU0RTBBXHU1MzQ4IDA2OjAwLTExOjU5JyxcbiAgICBhZnRlcm5vb246ICdcdTRFMEJcdTUzNDggMTI6MDAtMTc6NTknLFxuICAgIGV2ZW5pbmc6ICdcdTY2NUFcdTRFMEEgMTg6MDAtMjM6NTknXG4gIH1cblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIFx1OTg3NVx1OTc2Mlx1NTJBMFx1OEY3RFx1NjVGNlx1NEVDRSBVUkwgXHU1M0MyXHU2NTcwXHU2MDYyXHU1OTBEXHU3QjVCXHU5MDA5XHU3MkI2XHU2MDAxXG4gICAgdGhpcy5yZXN0b3JlRmlsdGVyc0Zyb21VcmwoKVxuICAgIHRoaXMucmVzdG9yZVNvcnRGcm9tVXJsKClcbiAgfVxuXG4gIC8vIFx1NEVDRSBVUkwgXHU1M0MyXHU2NTcwXHU2MDYyXHU1OTBEXHU3QjVCXHU5MDA5XHU3MkI2XHU2MDAxXG4gIHJlc3RvcmVGaWx0ZXJzRnJvbVVybCgpOiB2b2lkIHtcbiAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpXG4gICAgXG4gICAgLy8gXHU2MDYyXHU1OTBEXHU1M0QxXHU4RjY2XHU2NUY2XHU2QkI1XG4gICAgY29uc3QgdGltZVNsb3RzID0gdXJsUGFyYW1zLmdldCgndGltZV9zbG90cycpXG4gICAgaWYgKHRpbWVTbG90cykge1xuICAgICAgdGltZVNsb3RzLnNwbGl0KCcsJykuZm9yRWFjaCh0aW1lID0+IHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZERlcGFydHVyZVRpbWVzLmFkZCh0aW1lKVxuICAgICAgICAvLyBcdTYyN0VcdTUyMzBcdTVCRjlcdTVFOTRcdTc2ODRcdTUzNjFcdTcyNDdcdTVFNzZcdTZERkJcdTUyQTBcdTkwMDlcdTRFMkRcdTY4MzdcdTVGMEZcbiAgICAgICAgY29uc3QgdGltZUNhcmQgPSB0aGlzLmRlcGFydHVyZVRpbWVDYXJkVGFyZ2V0cy5maW5kKFxuICAgICAgICAgIGNhcmQgPT4gY2FyZC5kYXRhc2V0LnRpbWUgPT09IHRpbWVcbiAgICAgICAgKVxuICAgICAgICBpZiAodGltZUNhcmQpIHRoaXMuYWRkU2VsZWN0ZWRTdHlsZSh0aW1lQ2FyZClcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIFx1NjA2Mlx1NTkwRFx1NUVBN1x1NEY0RFx1N0M3Qlx1NTc4QlxuICAgIGNvbnN0IHNlYXRUeXBlcyA9IHVybFBhcmFtcy5nZXQoJ3NlYXRfdHlwZXMnKVxuICAgIGlmIChzZWF0VHlwZXMpIHtcbiAgICAgIHNlYXRUeXBlcy5zcGxpdCgnLCcpLmZvckVhY2goc2VhdFR5cGUgPT4ge1xuICAgICAgICB0aGlzLnNlbGVjdGVkU2VhdFR5cGVzLmFkZChzZWF0VHlwZSlcbiAgICAgICAgY29uc3Qgc2VhdENhcmQgPSB0aGlzLnNlYXRUeXBlQ2FyZFRhcmdldHMuZmluZChcbiAgICAgICAgICBjYXJkID0+IGNhcmQuZGF0YXNldC5zZWF0VHlwZSA9PT0gc2VhdFR5cGVcbiAgICAgICAgKVxuICAgICAgICBpZiAoc2VhdENhcmQpIHRoaXMuYWRkU2VsZWN0ZWRTdHlsZShzZWF0Q2FyZClcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIFx1NjA2Mlx1NTkwRFx1NTFGQVx1NTNEMVx1OEY2Nlx1N0FEOVxuICAgIGNvbnN0IGRlcGFydHVyZVN0YXRpb25zID0gdXJsUGFyYW1zLmdldCgnZGVwYXJ0dXJlX3N0YXRpb25zJylcbiAgICBpZiAoZGVwYXJ0dXJlU3RhdGlvbnMpIHtcbiAgICAgIGRlcGFydHVyZVN0YXRpb25zLnNwbGl0KCcsJykuZm9yRWFjaChzdGF0aW9uID0+IHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZERlcGFydHVyZVN0YXRpb25zLmFkZChzdGF0aW9uKVxuICAgICAgICBjb25zdCBkZXBDYXJkID0gdGhpcy5kZXBhcnR1cmVTdGF0aW9uQ2FyZFRhcmdldHMuZmluZChcbiAgICAgICAgICBjYXJkID0+IGNhcmQuZGF0YXNldC5zdGF0aW9uID09PSBzdGF0aW9uXG4gICAgICAgIClcbiAgICAgICAgaWYgKGRlcENhcmQpIHRoaXMuYWRkU2VsZWN0ZWRTdHlsZShkZXBDYXJkKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gXHU2MDYyXHU1OTBEXHU1MjMwXHU4RkJFXHU4RjY2XHU3QUQ5XG4gICAgY29uc3QgYXJyaXZhbFN0YXRpb25zID0gdXJsUGFyYW1zLmdldCgnYXJyaXZhbF9zdGF0aW9ucycpXG4gICAgaWYgKGFycml2YWxTdGF0aW9ucykge1xuICAgICAgYXJyaXZhbFN0YXRpb25zLnNwbGl0KCcsJykuZm9yRWFjaChzdGF0aW9uID0+IHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZEFycml2YWxTdGF0aW9ucy5hZGQoc3RhdGlvbilcbiAgICAgICAgY29uc3QgYXJyQ2FyZCA9IHRoaXMuYXJyaXZhbFN0YXRpb25DYXJkVGFyZ2V0cy5maW5kKFxuICAgICAgICAgIGNhcmQgPT4gY2FyZC5kYXRhc2V0LnN0YXRpb24gPT09IHN0YXRpb25cbiAgICAgICAgKVxuICAgICAgICBpZiAoYXJyQ2FyZCkgdGhpcy5hZGRTZWxlY3RlZFN0eWxlKGFyckNhcmQpXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBcdTY2RjRcdTY1QjBcdTc1NENcdTk3NjJcdTcyQjZcdTYwMDFcbiAgICB0aGlzLnVwZGF0ZUZpbHRlckJhZGdlKClcbiAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkVGFncygpXG4gIH1cblxuICBvcGVuRmlsdGVyKCk6IHZvaWQge1xuICAgIHRoaXMub3ZlcmxheVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gIH1cblxuICBjbG9zZU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMub3ZlcmxheVRhcmdldC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gIH1cblxuICBzZWxlY3RUYWIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHRhYiA9IGJ1dHRvbi5kYXRhc2V0LnRhYlxuXG4gICAgaWYgKCF0YWIpIHJldHVyblxuXG4gICAgLy8gXHU3OUZCXHU5NjY0XHU2MjQwXHU2NzA5dGFiXHU3Njg0XHU5MDA5XHU0RTJEXHU2ODM3XHU1RjBGXG4gICAgY29uc3QgdGFicyA9IFtcbiAgICAgIHRoaXMuZGVwYXJ0dXJlVGltZVRhYlRhcmdldCxcbiAgICAgIHRoaXMuc2VhdFR5cGVUYWJUYXJnZXQsXG4gICAgICB0aGlzLmRlcGFydHVyZVN0YXRpb25UYWJUYXJnZXQsXG4gICAgICB0aGlzLmFycml2YWxTdGF0aW9uVGFiVGFyZ2V0XG4gICAgXVxuICAgIHRhYnMuZm9yRWFjaCgodCkgPT4ge1xuICAgICAgdC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctd2hpdGVcIiwgXCJib3JkZXItWyNGRkQ5MDBdXCIsIFwidGV4dC1ncmF5LTkwMFwiLCBcImZvbnQtbWVkaXVtXCIpXG4gICAgICB0LmNsYXNzTGlzdC5hZGQoXCJ0ZXh0LWdyYXktNjAwXCIpXG4gICAgICB0LmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItbC00XCIpXG4gICAgICB0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItbC0yXCIsIFwiYm9yZGVyLXRyYW5zcGFyZW50XCIpXG4gICAgfSlcblxuICAgIC8vIFx1NkRGQlx1NTJBMFx1NUY1M1x1NTI0RHRhYlx1NzY4NFx1OTAwOVx1NEUyRFx1NjgzN1x1NUYwRlxuICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiYmctd2hpdGVcIiwgXCJib3JkZXItbC00XCIsIFwiYm9yZGVyLVsjRkZEOTAwXVwiLCBcInRleHQtZ3JheS05MDBcIiwgXCJmb250LW1lZGl1bVwiKVxuICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwidGV4dC1ncmF5LTYwMFwiLCBcImJvcmRlci1sLTJcIiwgXCJib3JkZXItdHJhbnNwYXJlbnRcIilcblxuICAgIC8vIFx1OTY5MFx1ODVDRlx1NjI0MFx1NjcwOXNlY3Rpb25cbiAgICBjb25zdCBzZWN0aW9ucyA9IFtcbiAgICAgIHRoaXMuZGVwYXJ0dXJlVGltZVNlY3Rpb25UYXJnZXQsXG4gICAgICB0aGlzLnNlYXRUeXBlU2VjdGlvblRhcmdldCxcbiAgICAgIHRoaXMuZGVwYXJ0dXJlU3RhdGlvblNlY3Rpb25UYXJnZXQsXG4gICAgICB0aGlzLmFycml2YWxTdGF0aW9uU2VjdGlvblRhcmdldFxuICAgIF1cbiAgICBzZWN0aW9ucy5mb3JFYWNoKChzKSA9PiBzLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIikpXG5cbiAgICAvLyBcdTY2M0VcdTc5M0FcdTVCRjlcdTVFOTRcdTc2ODRzZWN0aW9uXG4gICAgY29uc3Qgc2VjdGlvbk1hcDogeyBba2V5OiBzdHJpbmddOiBIVE1MRWxlbWVudCB9ID0ge1xuICAgICAgZGVwYXJ0dXJlVGltZTogdGhpcy5kZXBhcnR1cmVUaW1lU2VjdGlvblRhcmdldCxcbiAgICAgIHNlYXRUeXBlOiB0aGlzLnNlYXRUeXBlU2VjdGlvblRhcmdldCxcbiAgICAgIGRlcGFydHVyZVN0YXRpb246IHRoaXMuZGVwYXJ0dXJlU3RhdGlvblNlY3Rpb25UYXJnZXQsXG4gICAgICBhcnJpdmFsU3RhdGlvbjogdGhpcy5hcnJpdmFsU3RhdGlvblNlY3Rpb25UYXJnZXRcbiAgICB9XG5cbiAgICBjb25zdCB0YXJnZXRTZWN0aW9uID0gc2VjdGlvbk1hcFt0YWJdXG4gICAgaWYgKHRhcmdldFNlY3Rpb24pIHtcbiAgICAgIHRhcmdldFNlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgIH1cbiAgfVxuXG4gIHRvZ2dsZURlcGFydHVyZVRpbWUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCB0aW1lID0gY2FyZC5kYXRhc2V0LnRpbWVcblxuICAgIGlmICghdGltZSkgcmV0dXJuXG5cbiAgICBpZiAodGhpcy5zZWxlY3RlZERlcGFydHVyZVRpbWVzLmhhcyh0aW1lKSkge1xuICAgICAgdGhpcy5zZWxlY3RlZERlcGFydHVyZVRpbWVzLmRlbGV0ZSh0aW1lKVxuICAgICAgdGhpcy5yZW1vdmVTZWxlY3RlZFN0eWxlKGNhcmQpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWREZXBhcnR1cmVUaW1lcy5hZGQodGltZSlcbiAgICAgIHRoaXMuYWRkU2VsZWN0ZWRTdHlsZShjYXJkKVxuICAgIH1cblxuICAgIHRoaXMudXBkYXRlRmlsdGVyQmFkZ2UoKVxuICAgIHRoaXMudXBkYXRlQXBwbHlCdXR0b24oKVxuICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRUYWdzKClcbiAgfVxuXG4gIHRvZ2dsZVNlYXRUeXBlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3Qgc2VhdFR5cGUgPSBjYXJkLmRhdGFzZXQuc2VhdFR5cGVcblxuICAgIGlmICghc2VhdFR5cGUpIHJldHVyblxuXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRTZWF0VHlwZXMuaGFzKHNlYXRUeXBlKSkge1xuICAgICAgdGhpcy5zZWxlY3RlZFNlYXRUeXBlcy5kZWxldGUoc2VhdFR5cGUpXG4gICAgICB0aGlzLnJlbW92ZVNlbGVjdGVkU3R5bGUoY2FyZClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZWxlY3RlZFNlYXRUeXBlcy5hZGQoc2VhdFR5cGUpXG4gICAgICB0aGlzLmFkZFNlbGVjdGVkU3R5bGUoY2FyZClcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZUZpbHRlckJhZGdlKClcbiAgICB0aGlzLnVwZGF0ZUFwcGx5QnV0dG9uKClcbiAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkVGFncygpXG4gIH1cblxuICB0b2dnbGVEZXBhcnR1cmVTdGF0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3Qgc3RhdGlvbiA9IGNhcmQuZGF0YXNldC5zdGF0aW9uXG5cbiAgICBpZiAoIXN0YXRpb24pIHJldHVyblxuXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWREZXBhcnR1cmVTdGF0aW9ucy5oYXMoc3RhdGlvbikpIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWREZXBhcnR1cmVTdGF0aW9ucy5kZWxldGUoc3RhdGlvbilcbiAgICAgIHRoaXMucmVtb3ZlU2VsZWN0ZWRTdHlsZShjYXJkKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlbGVjdGVkRGVwYXJ0dXJlU3RhdGlvbnMuYWRkKHN0YXRpb24pXG4gICAgICB0aGlzLmFkZFNlbGVjdGVkU3R5bGUoY2FyZClcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZUZpbHRlckJhZGdlKClcbiAgICB0aGlzLnVwZGF0ZUFwcGx5QnV0dG9uKClcbiAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkVGFncygpXG4gIH1cblxuICB0b2dnbGVBcnJpdmFsU3RhdGlvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHN0YXRpb24gPSBjYXJkLmRhdGFzZXQuc3RhdGlvblxuXG4gICAgaWYgKCFzdGF0aW9uKSByZXR1cm5cblxuICAgIGlmICh0aGlzLnNlbGVjdGVkQXJyaXZhbFN0YXRpb25zLmhhcyhzdGF0aW9uKSkge1xuICAgICAgdGhpcy5zZWxlY3RlZEFycml2YWxTdGF0aW9ucy5kZWxldGUoc3RhdGlvbilcbiAgICAgIHRoaXMucmVtb3ZlU2VsZWN0ZWRTdHlsZShjYXJkKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlbGVjdGVkQXJyaXZhbFN0YXRpb25zLmFkZChzdGF0aW9uKVxuICAgICAgdGhpcy5hZGRTZWxlY3RlZFN0eWxlKGNhcmQpXG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVGaWx0ZXJCYWRnZSgpXG4gICAgdGhpcy51cGRhdGVBcHBseUJ1dHRvbigpXG4gICAgdGhpcy51cGRhdGVTZWxlY3RlZFRhZ3MoKVxuICB9XG5cbiAgYWRkU2VsZWN0ZWRTdHlsZShjYXJkOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIC8vIFx1NkRGQlx1NTJBMFx1OUVDNFx1ODI3Mlx1ODBDQ1x1NjY2RlxuICAgIGNhcmQuY2xhc3NMaXN0LnJlbW92ZShcImJnLVsjRjdGOEZBXVwiKVxuICAgIGNhcmQuY2xhc3NMaXN0LmFkZChcImJnLVsjRkZEOTAwXVwiKVxuICAgIFxuICAgIC8vIFx1NkRGQlx1NTJBMFx1NUJGOVx1NTJGRVx1NTZGRVx1NjgwN1x1RkYwOFx1NTk4Mlx1Njc5Q1x1NEUwRFx1NUI1OFx1NTcyOFx1RkYwOVxuICAgIGlmICghY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbWFyay1pY29uXCIpKSB7XG4gICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLmNyZWF0ZUNoZWNrbWFyaygpXG4gICAgICBjYXJkLmFwcGVuZENoaWxkKGNoZWNrbWFyaylcbiAgICB9XG4gIH1cblxuICByZW1vdmVTZWxlY3RlZFN0eWxlKGNhcmQ6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgLy8gXHU3OUZCXHU5NjY0XHU5RUM0XHU4MjcyXHU4MENDXHU2NjZGXG4gICAgY2FyZC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNGRkQ5MDBdXCIpXG4gICAgY2FyZC5jbGFzc0xpc3QuYWRkKFwiYmctWyNGN0Y4RkFdXCIpXG4gICAgXG4gICAgLy8gXHU3OUZCXHU5NjY0XHU1QkY5XHU1MkZFXHU1NkZFXHU2ODA3XG4gICAgY29uc3QgY2hlY2ttYXJrID0gY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbWFyay1pY29uXCIpXG4gICAgaWYgKGNoZWNrbWFyaykge1xuICAgICAgY2hlY2ttYXJrLnJlbW92ZSgpXG4gICAgfVxuICB9XG5cbiAgY3JlYXRlQ2hlY2ttYXJrKCk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBjaGVja21hcmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXG4gICAgY2hlY2ttYXJrLmNsYXNzTmFtZSA9IFwiY2hlY2ttYXJrLWljb24gYWJzb2x1dGUgdG9wLTIgcmlnaHQtMlwiXG4gICAgY2hlY2ttYXJrLmlubmVySFRNTCA9IGBcbiAgICAgIDxzdmcgY2xhc3M9XCJ3LTUgaC01IHRleHQtZ3JheS05MDBcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyMCAyMFwiPlxuICAgICAgICA8cGF0aCBmaWxsLXJ1bGU9XCJldmVub2RkXCIgZD1cIk0xNi43MDcgNS4yOTNhMSAxIDAgMDEwIDEuNDE0bC04IDhhMSAxIDAgMDEtMS40MTQgMGwtNC00YTEgMSAwIDAxMS40MTQtMS40MTRMOCAxMi41ODZsNy4yOTMtNy4yOTNhMSAxIDAgMDExLjQxNCAwelwiIGNsaXAtcnVsZT1cImV2ZW5vZGRcIj48L3BhdGg+XG4gICAgICA8L3N2Zz5cbiAgICBgXG4gICAgcmV0dXJuIGNoZWNrbWFya1xuICB9XG5cbiAgdXBkYXRlRmlsdGVyQmFkZ2UoKTogdm9pZCB7XG4gICAgY29uc3QgdG90YWxGaWx0ZXJzID0gXG4gICAgICB0aGlzLnNlbGVjdGVkRGVwYXJ0dXJlVGltZXMuc2l6ZSArXG4gICAgICB0aGlzLnNlbGVjdGVkU2VhdFR5cGVzLnNpemUgK1xuICAgICAgdGhpcy5zZWxlY3RlZERlcGFydHVyZVN0YXRpb25zLnNpemUgK1xuICAgICAgdGhpcy5zZWxlY3RlZEFycml2YWxTdGF0aW9ucy5zaXplXG5cbiAgICBpZiAodG90YWxGaWx0ZXJzID4gMCkge1xuICAgICAgdGhpcy5maWx0ZXJCYWRnZVRhcmdldC50ZXh0Q29udGVudCA9IHRvdGFsRmlsdGVycy50b1N0cmluZygpXG4gICAgICB0aGlzLmZpbHRlckJhZGdlVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5maWx0ZXJCYWRnZVRhcmdldC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgfVxuICB9XG5cbiAgdXBkYXRlQXBwbHlCdXR0b24oKTogdm9pZCB7XG4gICAgLy8gXHU1QjlFXHU2NUY2XHU4QkExXHU3Qjk3XHU3QjVCXHU5MDA5XHU3RUQzXHU2NzlDXHU2NTcwXHU5MUNGXG4gICAgdGhpcy5mZXRjaEZpbHRlcmVkQ291bnQoKVxuICB9XG5cbiAgcmVzZXRGaWx0ZXJzKCk6IHZvaWQge1xuICAgIC8vIFx1NkUwNVx1N0E3QVx1NjI0MFx1NjcwOVx1OTAwOVx1NEUyRFxuICAgIHRoaXMuc2VsZWN0ZWREZXBhcnR1cmVUaW1lcy5jbGVhcigpXG4gICAgdGhpcy5zZWxlY3RlZFNlYXRUeXBlcy5jbGVhcigpXG4gICAgdGhpcy5zZWxlY3RlZERlcGFydHVyZVN0YXRpb25zLmNsZWFyKClcbiAgICB0aGlzLnNlbGVjdGVkQXJyaXZhbFN0YXRpb25zLmNsZWFyKClcblxuICAgIC8vIFx1NzlGQlx1OTY2NFx1NjI0MFx1NjcwOVx1NTM2MVx1NzI0N1x1NzY4NFx1OTAwOVx1NEUyRFx1NjgzN1x1NUYwRlxuICAgIGNvbnN0IGFsbENhcmRzID0gW1xuICAgICAgLi4udGhpcy5kZXBhcnR1cmVUaW1lQ2FyZFRhcmdldHMsXG4gICAgICAuLi50aGlzLnNlYXRUeXBlQ2FyZFRhcmdldHMsXG4gICAgICAuLi50aGlzLmRlcGFydHVyZVN0YXRpb25DYXJkVGFyZ2V0cyxcbiAgICAgIC4uLnRoaXMuYXJyaXZhbFN0YXRpb25DYXJkVGFyZ2V0c1xuICAgIF1cblxuICAgIGFsbENhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgIHRoaXMucmVtb3ZlU2VsZWN0ZWRTdHlsZShjYXJkKVxuICAgIH0pXG5cbiAgICAvLyBcdTY2RjRcdTY1QjBcdTg5RDJcdTY4MDdcdTU0OENcdTYzMDlcdTk0QUVcbiAgICB0aGlzLnVwZGF0ZUZpbHRlckJhZGdlKClcbiAgICB0aGlzLnVwZGF0ZUFwcGx5QnV0dG9uKClcbiAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkVGFncygpXG4gIH1cblxuICBhcHBseUZpbHRlcnMoKTogdm9pZCB7XG4gICAgLy8gXHU2Nzg0XHU1RUZBXHU3QjVCXHU5MDA5XHU1M0MyXHU2NTcwXG4gICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpXG4gICAgcGFyYW1zLnNldCgnb3JpZ2luJywgdGhpcy5vcmlnaW5WYWx1ZSlcbiAgICBwYXJhbXMuc2V0KCdkZXN0aW5hdGlvbicsIHRoaXMuZGVzdGluYXRpb25WYWx1ZSlcbiAgICBwYXJhbXMuc2V0KCdkYXRlJywgdGhpcy5kYXRlVmFsdWUpXG4gICAgXG4gICAgLy8gXHU2REZCXHU1MkEwXHU3QjVCXHU5MDA5XHU2NzYxXHU0RUY2XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWREZXBhcnR1cmVUaW1lcy5zaXplID4gMCkge1xuICAgICAgcGFyYW1zLnNldCgndGltZV9zbG90cycsIEFycmF5LmZyb20odGhpcy5zZWxlY3RlZERlcGFydHVyZVRpbWVzKS5qb2luKCcsJykpXG4gICAgfVxuICAgIGlmICh0aGlzLnNlbGVjdGVkU2VhdFR5cGVzLnNpemUgPiAwKSB7XG4gICAgICBwYXJhbXMuc2V0KCdzZWF0X3R5cGVzJywgQXJyYXkuZnJvbSh0aGlzLnNlbGVjdGVkU2VhdFR5cGVzKS5qb2luKCcsJykpXG4gICAgfVxuICAgIGlmICh0aGlzLnNlbGVjdGVkRGVwYXJ0dXJlU3RhdGlvbnMuc2l6ZSA+IDApIHtcbiAgICAgIHBhcmFtcy5zZXQoJ2RlcGFydHVyZV9zdGF0aW9ucycsIEFycmF5LmZyb20odGhpcy5zZWxlY3RlZERlcGFydHVyZVN0YXRpb25zKS5qb2luKCcsJykpXG4gICAgfVxuICAgIGlmICh0aGlzLnNlbGVjdGVkQXJyaXZhbFN0YXRpb25zLnNpemUgPiAwKSB7XG4gICAgICBwYXJhbXMuc2V0KCdhcnJpdmFsX3N0YXRpb25zJywgQXJyYXkuZnJvbSh0aGlzLnNlbGVjdGVkQXJyaXZhbFN0YXRpb25zKS5qb2luKCcsJykpXG4gICAgfVxuICAgIFxuICAgIC8vIFx1NTE3M1x1OTVFRFx1NUYzOVx1N0E5N1xuICAgIHRoaXMuY2xvc2VNb2RhbCgpXG4gICAgXG4gICAgLy8gXHU0RjdGXHU3NTI4VHVyYm8udmlzaXRcdTUyMzdcdTY1QjBcdTk4NzVcdTk3NjJcbiAgICBUdXJiby52aXNpdChgL2J1c190aWNrZXRzL3NlYXJjaD8ke3BhcmFtcy50b1N0cmluZygpfWApXG4gIH1cblxuICAvLyBcdTY2RjRcdTY1QjBcdTVERjJcdTkwMDlcdTdCNUJcdTkwMDlcdTk4NzlcdTY4MDdcdTdCN0VcdTY2M0VcdTc5M0FcbiAgdXBkYXRlU2VsZWN0ZWRUYWdzKCk6IHZvaWQge1xuICAgIGNvbnN0IHRhZ3M6IEFycmF5PHt0eXBlOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIGxhYmVsOiBzdHJpbmd9PiA9IFtdXG5cbiAgICAvLyBcdTUzRDFcdThGNjZcdTY1RjZcdTZCQjVcbiAgICB0aGlzLnNlbGVjdGVkRGVwYXJ0dXJlVGltZXMuZm9yRWFjaCh0aW1lID0+IHtcbiAgICAgIHRhZ3MucHVzaCh7XG4gICAgICAgIHR5cGU6ICdkZXBhcnR1cmVUaW1lJyxcbiAgICAgICAgdmFsdWU6IHRpbWUsXG4gICAgICAgIGxhYmVsOiB0aGlzLnRpbWVTbG90TGFiZWxzW3RpbWVdIHx8IHRpbWVcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIC8vIFx1OEY2Nlx1NTc4QlxuICAgIHRoaXMuc2VsZWN0ZWRTZWF0VHlwZXMuZm9yRWFjaChzZWF0VHlwZSA9PiB7XG4gICAgICB0YWdzLnB1c2goe1xuICAgICAgICB0eXBlOiAnc2VhdFR5cGUnLFxuICAgICAgICB2YWx1ZTogc2VhdFR5cGUsXG4gICAgICAgIGxhYmVsOiBzZWF0VHlwZVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgLy8gXHU1MUZBXHU1M0QxXHU4RjY2XHU3QUQ5XG4gICAgdGhpcy5zZWxlY3RlZERlcGFydHVyZVN0YXRpb25zLmZvckVhY2goc3RhdGlvbiA9PiB7XG4gICAgICB0YWdzLnB1c2goe1xuICAgICAgICB0eXBlOiAnZGVwYXJ0dXJlU3RhdGlvbicsXG4gICAgICAgIHZhbHVlOiBzdGF0aW9uLFxuICAgICAgICBsYWJlbDogc3RhdGlvblxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgLy8gXHU1MjMwXHU4RkJFXHU4RjY2XHU3QUQ5XG4gICAgdGhpcy5zZWxlY3RlZEFycml2YWxTdGF0aW9ucy5mb3JFYWNoKHN0YXRpb24gPT4ge1xuICAgICAgdGFncy5wdXNoKHtcbiAgICAgICAgdHlwZTogJ2Fycml2YWxTdGF0aW9uJyxcbiAgICAgICAgdmFsdWU6IHN0YXRpb24sXG4gICAgICAgIGxhYmVsOiBzdGF0aW9uXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICAvLyBcdTZFMDVcdTdBN0FcdTY4MDdcdTdCN0VcdTUyMTdcdTg4NjhcbiAgICB0aGlzLnNlbGVjdGVkVGFnc0xpc3RUYXJnZXQuaW5uZXJIVE1MID0gJydcblxuICAgIGlmICh0YWdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gXHU5NjkwXHU4NUNGXHU1QkI5XHU1NjY4XG4gICAgICB0aGlzLnNlbGVjdGVkVGFnc0NvbnRhaW5lclRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBcdTY2M0VcdTc5M0FcdTVCQjlcdTU2NjhcbiAgICAgIHRoaXMuc2VsZWN0ZWRUYWdzQ29udGFpbmVyVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG5cbiAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NkJDRlx1NEUyQVx1NjgwN1x1N0I3RVxuICAgICAgdGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgIGNvbnN0IHRhZ0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICB0YWdFbGVtZW50LmNsYXNzTmFtZSA9ICdiZy1bI0ZGRDkwMF0gdGV4dC1ncmF5LTkwMCB0ZXh0LVsxM3B4XSBweC0zIHB5LTEgcm91bmRlZC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGdhcC0xJ1xuICAgICAgICB0YWdFbGVtZW50LmlubmVySFRNTCA9IGBcbiAgICAgICAgICA8c3Bhbj4ke3RhZy5sYWJlbH08L3NwYW4+XG4gICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgXG4gICAgICAgICAgICBkYXRhLWFjdGlvbj1cImNsaWNrLT5idXMtdGlja2V0LXNlYXJjaCNyZW1vdmVUYWdcIlxuICAgICAgICAgICAgZGF0YS10YWctdHlwZT1cIiR7dGFnLnR5cGV9XCJcbiAgICAgICAgICAgIGRhdGEtdGFnLXZhbHVlPVwiJHt0YWcudmFsdWV9XCJcbiAgICAgICAgICAgIGNsYXNzPVwidGV4dC1ncmF5LTkwMCBob3Zlcjp0ZXh0LWdyYXktNzAwIGZvbnQtYm9sZFwiPlxuICAgICAgICAgICAgXHUyNzE1XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIGBcbiAgICAgICAgdGhpcy5zZWxlY3RlZFRhZ3NMaXN0VGFyZ2V0LmFwcGVuZENoaWxkKHRhZ0VsZW1lbnQpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1NzlGQlx1OTY2NFx1NTM1NVx1NEUyQVx1NjgwN1x1N0I3RVxuICByZW1vdmVUYWcoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHRhZ1R5cGUgPSBidXR0b24uZGF0YXNldC50YWdUeXBlXG4gICAgY29uc3QgdGFnVmFsdWUgPSBidXR0b24uZGF0YXNldC50YWdWYWx1ZVxuXG4gICAgaWYgKCF0YWdUeXBlIHx8ICF0YWdWYWx1ZSkgcmV0dXJuXG5cbiAgICAvLyBcdTY4MzlcdTYzNkVcdTdDN0JcdTU3OEJcdTc5RkJcdTk2NjRcdTVCRjlcdTVFOTRcdTc2ODRcdTkwMDlcdTRFMkRcdTk4NzlcbiAgICBzd2l0Y2ggKHRhZ1R5cGUpIHtcbiAgICAgIGNhc2UgJ2RlcGFydHVyZVRpbWUnOiB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWREZXBhcnR1cmVUaW1lcy5kZWxldGUodGFnVmFsdWUpXG4gICAgICAgIC8vIFx1NzlGQlx1OTY2NFx1NUJGOVx1NUU5NFx1NTM2MVx1NzI0N1x1NzY4NFx1OTAwOVx1NEUyRFx1NjgzN1x1NUYwRlxuICAgICAgICBjb25zdCB0aW1lQ2FyZCA9IHRoaXMuZGVwYXJ0dXJlVGltZUNhcmRUYXJnZXRzLmZpbmQoXG4gICAgICAgICAgY2FyZCA9PiBjYXJkLmRhdGFzZXQudGltZSA9PT0gdGFnVmFsdWVcbiAgICAgICAgKVxuICAgICAgICBpZiAodGltZUNhcmQpIHRoaXMucmVtb3ZlU2VsZWN0ZWRTdHlsZSh0aW1lQ2FyZClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnc2VhdFR5cGUnOiB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRTZWF0VHlwZXMuZGVsZXRlKHRhZ1ZhbHVlKVxuICAgICAgICBjb25zdCBzZWF0Q2FyZCA9IHRoaXMuc2VhdFR5cGVDYXJkVGFyZ2V0cy5maW5kKFxuICAgICAgICAgIGNhcmQgPT4gY2FyZC5kYXRhc2V0LnNlYXRUeXBlID09PSB0YWdWYWx1ZVxuICAgICAgICApXG4gICAgICAgIGlmIChzZWF0Q2FyZCkgdGhpcy5yZW1vdmVTZWxlY3RlZFN0eWxlKHNlYXRDYXJkKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdkZXBhcnR1cmVTdGF0aW9uJzoge1xuICAgICAgICB0aGlzLnNlbGVjdGVkRGVwYXJ0dXJlU3RhdGlvbnMuZGVsZXRlKHRhZ1ZhbHVlKVxuICAgICAgICBjb25zdCBkZXBDYXJkID0gdGhpcy5kZXBhcnR1cmVTdGF0aW9uQ2FyZFRhcmdldHMuZmluZChcbiAgICAgICAgICBjYXJkID0+IGNhcmQuZGF0YXNldC5zdGF0aW9uID09PSB0YWdWYWx1ZVxuICAgICAgICApXG4gICAgICAgIGlmIChkZXBDYXJkKSB0aGlzLnJlbW92ZVNlbGVjdGVkU3R5bGUoZGVwQ2FyZClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnYXJyaXZhbFN0YXRpb24nOiB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRBcnJpdmFsU3RhdGlvbnMuZGVsZXRlKHRhZ1ZhbHVlKVxuICAgICAgICBjb25zdCBhcnJDYXJkID0gdGhpcy5hcnJpdmFsU3RhdGlvbkNhcmRUYXJnZXRzLmZpbmQoXG4gICAgICAgICAgY2FyZCA9PiBjYXJkLmRhdGFzZXQuc3RhdGlvbiA9PT0gdGFnVmFsdWVcbiAgICAgICAgKVxuICAgICAgICBpZiAoYXJyQ2FyZCkgdGhpcy5yZW1vdmVTZWxlY3RlZFN0eWxlKGFyckNhcmQpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHU2NkY0XHU2NUIwXHU3NTRDXHU5NzYyXG4gICAgdGhpcy51cGRhdGVGaWx0ZXJCYWRnZSgpXG4gICAgdGhpcy51cGRhdGVBcHBseUJ1dHRvbigpXG4gICAgdGhpcy51cGRhdGVTZWxlY3RlZFRhZ3MoKVxuICB9XG5cbiAgLy8gXHU1QjlFXHU2NUY2XHU4M0I3XHU1M0Q2XHU3QjVCXHU5MDA5XHU3RUQzXHU2NzlDXHU2NTcwXHU5MUNGXG4gIGFzeW5jIGZldGNoRmlsdGVyZWRDb3VudCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gXHU2Nzg0XHU1RUZBXHU2N0U1XHU4QkUyXHU1M0MyXHU2NTcwXG4gICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKClcbiAgICAgIHBhcmFtcy5zZXQoJ29yaWdpbicsIHRoaXMub3JpZ2luVmFsdWUpXG4gICAgICBwYXJhbXMuc2V0KCdkZXN0aW5hdGlvbicsIHRoaXMuZGVzdGluYXRpb25WYWx1ZSlcbiAgICAgIHBhcmFtcy5zZXQoJ2RhdGUnLCB0aGlzLmRhdGVWYWx1ZSlcbiAgICAgIFxuICAgICAgLy8gXHU2REZCXHU1MkEwXHU3QjVCXHU5MDA5XHU2NzYxXHU0RUY2XG4gICAgICBpZiAodGhpcy5zZWxlY3RlZERlcGFydHVyZVRpbWVzLnNpemUgPiAwKSB7XG4gICAgICAgIHBhcmFtcy5zZXQoJ3RpbWVfc2xvdHMnLCBBcnJheS5mcm9tKHRoaXMuc2VsZWN0ZWREZXBhcnR1cmVUaW1lcykuam9pbignLCcpKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTZWF0VHlwZXMuc2l6ZSA+IDApIHtcbiAgICAgICAgcGFyYW1zLnNldCgnc2VhdF90eXBlcycsIEFycmF5LmZyb20odGhpcy5zZWxlY3RlZFNlYXRUeXBlcykuam9pbignLCcpKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWREZXBhcnR1cmVTdGF0aW9ucy5zaXplID4gMCkge1xuICAgICAgICBwYXJhbXMuc2V0KCdkZXBhcnR1cmVfc3RhdGlvbnMnLCBBcnJheS5mcm9tKHRoaXMuc2VsZWN0ZWREZXBhcnR1cmVTdGF0aW9ucykuam9pbignLCcpKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRBcnJpdmFsU3RhdGlvbnMuc2l6ZSA+IDApIHtcbiAgICAgICAgcGFyYW1zLnNldCgnYXJyaXZhbF9zdGF0aW9ucycsIEFycmF5LmZyb20odGhpcy5zZWxlY3RlZEFycml2YWxTdGF0aW9ucykuam9pbignLCcpKVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBcdTUzRDFcdThENzdBSkFYXHU4QkY3XHU2QzQyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYnVzX3RpY2tldHMvY291bnRfZmlsdGVyZWRfcmVzdWx0cz8ke3BhcmFtcy50b1N0cmluZygpfWApXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgICBcbiAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NjMwOVx1OTRBRVx1NjU4N1x1NUI1N1xuICAgICAgdGhpcy5hcHBseUJ1dHRvblRhcmdldC50ZXh0Q29udGVudCA9IGBcdTY3RTVcdTc3MEIke2RhdGEuY291bnR9XHU2NzYxXHU3RUQzXHU2NzlDYFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTgzQjdcdTUzRDZcdTdCNUJcdTkwMDlcdTdFRDNcdTY3OUNcdTY1NzBcdTkxQ0ZcdTU5MzFcdThEMjU6JywgZXJyb3IpXG4gICAgICAvLyBcdTk1MTlcdThCRUZcdTY1RjZcdTY2M0VcdTc5M0FcdTlFRDhcdThCQTRcdTY1ODdcdTVCNTdcbiAgICAgIHRoaXMuYXBwbHlCdXR0b25UYXJnZXQudGV4dENvbnRlbnQgPSAnXHU2N0U1XHU3NzBCXHU3RUQzXHU2NzlDJ1xuICAgIH1cbiAgfVxuXG4gIC8vID09PT09IFx1NjM5Mlx1NUU4Rlx1NTI5Rlx1ODBGRCA9PT09PVxuXG4gIC8vIFx1NEVDRSBVUkwgXHU1M0MyXHU2NTcwXHU2MDYyXHU1OTBEXHU2MzkyXHU1RThGXHU3MkI2XHU2MDAxXG4gIHJlc3RvcmVTb3J0RnJvbVVybCgpOiB2b2lkIHtcbiAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpXG4gICAgY29uc3Qgc29ydEJ5ID0gdXJsUGFyYW1zLmdldCgnc29ydF9ieScpXG4gICAgY29uc3Qgc29ydERpcmVjdGlvbiA9IHVybFBhcmFtcy5nZXQoJ3NvcnRfZGlyZWN0aW9uJylcblxuICAgIGlmIChzb3J0QnkpIHtcbiAgICAgIHRoaXMuY3VycmVudFNvcnRGaWVsZCA9IHNvcnRCeVxuICAgICAgdGhpcy5jdXJyZW50U29ydERpcmVjdGlvbiA9IHNvcnREaXJlY3Rpb24gfHwgJydcbiAgICAgIHRoaXMudXBkYXRlU29ydEJ1dHRvbnNEaXNwbGF5KClcbiAgICB9XG4gIH1cblxuICAvLyBcdTYyNTNcdTVGMDBcdTYzOTJcdTVFOEZcdTVGMzlcdTdBOTdcbiAgb3BlblNvcnRNb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLnNvcnRNb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIC8vIFx1OUFEOFx1NEVBRVx1NUY1M1x1NTI0RFx1OTAwOVx1NEUyRFx1NzY4NFx1NjM5Mlx1NUU4Rlx1OTAwOVx1OTg3OVxuICAgIHRoaXMuaGlnaGxpZ2h0Q3VycmVudFNvcnQoKVxuICB9XG5cbiAgLy8gXHU1MTczXHU5NUVEXHU2MzkyXHU1RThGXHU1RjM5XHU3QTk3XG4gIGNsb3NlU29ydE1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMuc29ydE1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gIH1cblxuICAvLyBcdTk2M0JcdTZCNjJcdTRFOEJcdTRFRjZcdTUxOTJcdTZDRTFcbiAgc3RvcFByb3BhZ2F0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gIH1cblxuICAvLyBcdTkwMDlcdTYyRTlcdTYzOTJcdTVFOEZcdTkwMDlcdTk4NzlcbiAgc2VsZWN0U29ydChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3Qgc29ydEZpZWxkID0gYnV0dG9uLmRhdGFzZXQuc29ydEZpZWxkXG4gICAgY29uc3Qgc29ydERpcmVjdGlvbiA9IGJ1dHRvbi5kYXRhc2V0LnNvcnREaXJlY3Rpb25cblxuICAgIGlmICghc29ydEZpZWxkKSByZXR1cm5cblxuICAgIC8vIFx1NTNENlx1NkQ4OFx1NjI0MFx1NjcwOVx1OTAwOVx1OTg3OVx1NzY4NFx1OUFEOFx1NEVBRVxuICAgIHRoaXMuc29ydE9wdGlvblRhcmdldHMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgb3B0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLVsjRkZEOTAwXScsICdib3JkZXItMicsICdib3JkZXItWyNGRjZBMDBdJylcbiAgICAgIG9wdGlvbi5jbGFzc0xpc3QuYWRkKCdiZy1bI0Y3RjhGQV0nKVxuICAgIH0pXG5cbiAgICAvLyBcdTlBRDhcdTRFQUVcdTVGNTNcdTUyNERcdTkwMDlcdTk4NzlcbiAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYmctWyNGN0Y4RkFdJylcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYmctWyNGRkQ5MDBdJywgJ2JvcmRlci0yJywgJ2JvcmRlci1bI0ZGNkEwMF0nKVxuXG4gICAgLy8gXHU0RkREXHU1QjU4XHU1RjUzXHU1MjREXHU5MDA5XHU2MkU5XG4gICAgdGhpcy5jdXJyZW50U29ydEZpZWxkID0gc29ydEZpZWxkXG4gICAgdGhpcy5jdXJyZW50U29ydERpcmVjdGlvbiA9IHNvcnREaXJlY3Rpb24gfHwgJydcbiAgfVxuXG4gIC8vIFx1NUU5NFx1NzUyOFx1NjM5Mlx1NUU4Rlx1NUU3Nlx1NTE3M1x1OTVFRFx1NUYzOVx1N0E5N1xuICBhcHBseVNvcnRBbmRDbG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLmNsb3NlU29ydE1vZGFsKClcbiAgICB0aGlzLmFwcGx5U29ydCgpXG4gIH1cblxuICAvLyBcdTVFOTRcdTc1MjhcdTYzOTJcdTVFOEZcbiAgYXBwbHlTb3J0KCk6IHZvaWQge1xuICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaClcblxuICAgIC8vIFx1NzlGQlx1OTY2NFx1NjVFN1x1NzY4NFx1NjM5Mlx1NUU4Rlx1NTNDMlx1NjU3MFxuICAgIHBhcmFtcy5kZWxldGUoJ3NvcnRfYnknKVxuICAgIHBhcmFtcy5kZWxldGUoJ3NvcnRfZGlyZWN0aW9uJylcblxuICAgIC8vIFx1NkRGQlx1NTJBMFx1NjVCMFx1NzY4NFx1NjM5Mlx1NUU4Rlx1NTNDMlx1NjU3MFx1RkYwOFx1NTk4Mlx1Njc5Q1x1NEUwRFx1NjYyRlx1OUVEOFx1OEJBNFx1NjM5Mlx1NUU4Rlx1RkYwOVxuICAgIGlmICh0aGlzLmN1cnJlbnRTb3J0RmllbGQgIT09ICdkZWZhdWx0Jykge1xuICAgICAgcGFyYW1zLnNldCgnc29ydF9ieScsIHRoaXMuY3VycmVudFNvcnRGaWVsZClcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRTb3J0RGlyZWN0aW9uKSB7XG4gICAgICAgIHBhcmFtcy5zZXQoJ3NvcnRfZGlyZWN0aW9uJywgdGhpcy5jdXJyZW50U29ydERpcmVjdGlvbilcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdTY2RjRcdTY1QjBcdTYzMDlcdTk0QUVcdTY2M0VcdTc5M0FcbiAgICB0aGlzLnVwZGF0ZVNvcnRCdXR0b25zRGlzcGxheSgpXG5cbiAgICAvLyBcdTRGN0ZcdTc1MjggVHVyYm8gXHU1MjM3XHU2NUIwXHU5ODc1XHU5NzYyXG4gICAgVHVyYm8udmlzaXQoYC9idXNfdGlja2V0cy9zZWFyY2g/JHtwYXJhbXMudG9TdHJpbmcoKX1gKVxuICB9XG5cbiAgLy8gXHU5QUQ4XHU0RUFFXHU1RjUzXHU1MjREXHU2MzkyXHU1RThGXHU5MDA5XHU5ODc5XG4gIGhpZ2hsaWdodEN1cnJlbnRTb3J0KCk6IHZvaWQge1xuICAgIHRoaXMuc29ydE9wdGlvblRhcmdldHMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgY29uc3Qgc29ydEZpZWxkID0gb3B0aW9uLmRhdGFzZXQuc29ydEZpZWxkXG4gICAgICBjb25zdCBzb3J0RGlyZWN0aW9uID0gb3B0aW9uLmRhdGFzZXQuc29ydERpcmVjdGlvbiB8fCAnJ1xuXG4gICAgICBpZiAoc29ydEZpZWxkID09PSB0aGlzLmN1cnJlbnRTb3J0RmllbGQgJiYgc29ydERpcmVjdGlvbiA9PT0gdGhpcy5jdXJyZW50U29ydERpcmVjdGlvbikge1xuICAgICAgICBvcHRpb24uY2xhc3NMaXN0LnJlbW92ZSgnYmctWyNGN0Y4RkFdJylcbiAgICAgICAgb3B0aW9uLmNsYXNzTGlzdC5hZGQoJ2JnLVsjRkZEOTAwXScsICdib3JkZXItMicsICdib3JkZXItWyNGRjZBMDBdJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1bI0ZGRDkwMF0nLCAnYm9yZGVyLTInLCAnYm9yZGVyLVsjRkY2QTAwXScpXG4gICAgICAgIG9wdGlvbi5jbGFzc0xpc3QuYWRkKCdiZy1bI0Y3RjhGQV0nKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyBcdTY2RjRcdTY1QjBcdTVFOTVcdTkwRThcdTYzOTJcdTVFOEZcdTYzMDlcdTk0QUVcdTY2M0VcdTc5M0FcbiAgdXBkYXRlU29ydEJ1dHRvbnNEaXNwbGF5KCk6IHZvaWQge1xuICAgIC8vIFx1OTFDRFx1N0Y2RVx1NjI0MFx1NjcwOVx1NjMwOVx1OTRBRVx1NjgzN1x1NUYwRlxuICAgIGlmICh0aGlzLnRpbWVCdXR0b25UYXJnZXQpIHtcbiAgICAgIHRoaXMucmVzZXRCdXR0b25TdHlsZSh0aGlzLnRpbWVCdXR0b25UYXJnZXQpXG4gICAgfVxuICAgIGlmICh0aGlzLnByaWNlQnV0dG9uVGFyZ2V0KSB7XG4gICAgICB0aGlzLnJlc2V0QnV0dG9uU3R5bGUodGhpcy5wcmljZUJ1dHRvblRhcmdldClcbiAgICB9XG5cbiAgICAvLyBcdTY4MzlcdTYzNkVcdTVGNTNcdTUyNERcdTYzOTJcdTVFOEZcdTlBRDhcdTRFQUVcdTVCRjlcdTVFOTRcdTYzMDlcdTk0QUVcbiAgICBpZiAodGhpcy5jdXJyZW50U29ydEZpZWxkID09PSAndGltZScgJiYgdGhpcy50aW1lQnV0dG9uVGFyZ2V0KSB7XG4gICAgICB0aGlzLmhpZ2hsaWdodEJ1dHRvbih0aGlzLnRpbWVCdXR0b25UYXJnZXQsIHRoaXMuY3VycmVudFNvcnREaXJlY3Rpb24gPT09ICdhc2MnID8gJ1x1NjVFOVx1MjE5Mlx1NjY1QScgOiAnXHU2NjVBXHUyMTkyXHU2NUU5JylcbiAgICB9IGVsc2UgaWYgKHRoaXMuY3VycmVudFNvcnRGaWVsZCA9PT0gJ3ByaWNlJyAmJiB0aGlzLnByaWNlQnV0dG9uVGFyZ2V0KSB7XG4gICAgICB0aGlzLmhpZ2hsaWdodEJ1dHRvbih0aGlzLnByaWNlQnV0dG9uVGFyZ2V0LCB0aGlzLmN1cnJlbnRTb3J0RGlyZWN0aW9uID09PSAnYXNjJyA/ICdcdTRGNEVcdTIxOTJcdTlBRDgnIDogJ1x1OUFEOFx1MjE5Mlx1NEY0RScpXG4gICAgfVxuICB9XG5cbiAgLy8gXHU5MUNEXHU3RjZFXHU2MzA5XHU5NEFFXHU2ODM3XHU1RjBGXG4gIHJlc2V0QnV0dG9uU3R5bGUoYnV0dG9uOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIGNvbnN0IGljb24gPSBidXR0b24ucXVlcnlTZWxlY3RvcignLnctNi5oLTYnKVxuICAgIGNvbnN0IHRleHQgPSBidXR0b24ucXVlcnlTZWxlY3RvcignLnRleHQtXFxcXFsxMXB4XFxcXF0nKVxuICAgIFxuICAgIGlmIChpY29uKSB7XG4gICAgICBpY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLVsjRkZEOTAwXScsICdib3JkZXItWyNGRjZBMDBdJylcbiAgICAgIGljb24uY2xhc3NMaXN0LmFkZCgnYm9yZGVyLWdyYXktNjAwJylcbiAgICB9XG4gICAgXG4gICAgaWYgKHRleHQpIHtcbiAgICAgIHRleHQuY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1bI0ZGNkEwMF0nLCAnZm9udC1zZW1pYm9sZCcpXG4gICAgICB0ZXh0LmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS03MDAnKVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1OUFEOFx1NEVBRVx1NjMwOVx1OTRBRVxuICBoaWdobGlnaHRCdXR0b24oYnV0dG9uOiBIVE1MRWxlbWVudCwgbGFiZWw6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IGljb24gPSBidXR0b24ucXVlcnlTZWxlY3RvcignLnctNi5oLTYnKVxuICAgIGNvbnN0IHRleHQgPSBidXR0b24ucXVlcnlTZWxlY3RvcignLnRleHQtXFxcXFsxMXB4XFxcXF0nKVxuICAgIFxuICAgIGlmIChpY29uKSB7XG4gICAgICBpY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1ncmF5LTYwMCcpXG4gICAgICBpY29uLmNsYXNzTGlzdC5hZGQoJ2JnLVsjRkZEOTAwXScsICdib3JkZXItWyNGRjZBMDBdJylcbiAgICB9XG4gICAgXG4gICAgaWYgKHRleHQpIHtcbiAgICAgIHRleHQuY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTcwMCcpXG4gICAgICB0ZXh0LmNsYXNzTGlzdC5hZGQoJ3RleHQtWyNGRjZBMDBdJywgJ2ZvbnQtc2VtaWJvbGQnKVxuICAgICAgdGV4dC50ZXh0Q29udGVudCA9IGxhYmVsXG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJjaGVja0ljb25cIixcbiAgICBcInBhc3NlbmdlckNvdW50XCIsXG4gICAgXCJ0b3RhbFByaWNlXCIsXG4gICAgXCJjb250YWN0UGhvbmVcIixcbiAgICBcImZvcm1EYXRhXCJcbiAgXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hlY2tJY29uVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IHBhc3NlbmdlckNvdW50VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRvdGFsUHJpY2VUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY29udGFjdFBob25lVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGZvcm1EYXRhVGFyZ2V0OiBIVE1MRWxlbWVudFxuXG4gIHByaXZhdGUgc2VsZWN0ZWRQYXNzZW5nZXJzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKVxuICBwcml2YXRlIGJhc2VQcmljZTogbnVtYmVyID0gMFxuICBwcml2YXRlIGluc3VyYW5jZVByaWNlOiBudW1iZXIgPSAwXG4gIHByaXZhdGUgaW5zdXJhbmNlVHlwZTogc3RyaW5nID0gJ25vbmUnXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkJ1c1RpY2tldE9yZGVyIGNvbm5lY3RlZFwiKVxuICAgIFxuICAgIC8vIFJlYWQgaW5pdGlhbCBpbnN1cmFuY2UgZGF0YSBmcm9tIGZvcm0gZGF0YSBlbGVtZW50XG4gICAgdGhpcy5pbnN1cmFuY2VUeXBlID0gdGhpcy5mb3JtRGF0YVRhcmdldC5kYXRhc2V0Lmluc3VyYW5jZVR5cGUgfHwgJ25vbmUnXG4gICAgdGhpcy5pbnN1cmFuY2VQcmljZSA9IHBhcnNlSW50KHRoaXMuZm9ybURhdGFUYXJnZXQuZGF0YXNldC5pbnN1cmFuY2VQcmljZSB8fCAnMCcpXG4gICAgXG4gICAgLy8gQXV0by1zZWxlY3QgZmlyc3QgcGFzc2VuZ2VyIGlmIGV4aXN0c1xuICAgIGNvbnN0IGZpcnN0UGFzc2VuZ2VyID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXBhc3Nlbmdlci1pZF0nKSBhcyBIVE1MRWxlbWVudFxuICAgIGlmIChmaXJzdFBhc3Nlbmdlcikge1xuICAgICAgY29uc3QgcGFzc2VuZ2VySWQgPSBmaXJzdFBhc3Nlbmdlci5kYXRhc2V0LnBhc3NlbmdlcklkXG4gICAgICBpZiAocGFzc2VuZ2VySWQpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFBhc3NlbmdlcnMuYWRkKHBhc3NlbmdlcklkKVxuICAgICAgICB0aGlzLnVwZGF0ZVBhc3NlbmdlclVJKGZpcnN0UGFzc2VuZ2VyLCB0cnVlKVxuICAgICAgICBcbiAgICAgICAgLy8gVXBkYXRlIGNvbnRhY3QgcGhvbmUgd2l0aCBmaXJzdCBwYXNzZW5nZXIncyBwaG9uZVxuICAgICAgICBjb25zdCBwaG9uZSA9IGZpcnN0UGFzc2VuZ2VyLmRhdGFzZXQucGFzc2VuZ2VyUGhvbmVcbiAgICAgICAgaWYgKHBob25lKSB7XG4gICAgICAgICAgdGhpcy5jb250YWN0UGhvbmVUYXJnZXQudGV4dENvbnRlbnQgPSBwaG9uZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMudXBkYXRlVG90YWwoKVxuICB9XG5cbiAgdG9nZ2xlUGFzc2VuZ2VyKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBwYXNzZW5nZXJJZCA9IHRhcmdldC5kYXRhc2V0LnBhc3NlbmdlcklkXG4gICAgXG4gICAgaWYgKCFwYXNzZW5nZXJJZCkgcmV0dXJuXG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgYWxyZWFkeSBzZWxlY3RlZFxuICAgIGlmICh0aGlzLnNlbGVjdGVkUGFzc2VuZ2Vycy5oYXMocGFzc2VuZ2VySWQpKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkUGFzc2VuZ2Vycy5kZWxldGUocGFzc2VuZ2VySWQpXG4gICAgICB0aGlzLnVwZGF0ZVBhc3NlbmdlclVJKHRhcmdldCwgZmFsc2UpXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENoZWNrIG1heCBsaW1pdCAoNSBwYXNzZW5nZXJzKVxuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJzLnNpemUgPj0gNSkge1xuICAgICAgICBhbGVydCgnXHU2NzAwXHU1OTFBXHU1M0VBXHU4MEZEXHU5MDA5XHU2MkU5NVx1NEY0RFx1NEU1OFx1OEY2Nlx1NEVCQScpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgXG4gICAgICB0aGlzLnNlbGVjdGVkUGFzc2VuZ2Vycy5hZGQocGFzc2VuZ2VySWQpXG4gICAgICB0aGlzLnVwZGF0ZVBhc3NlbmdlclVJKHRhcmdldCwgdHJ1ZSlcbiAgICAgIFxuICAgICAgLy8gSWYgdGhpcyBpcyB0aGUgZmlyc3Qgc2VsZWN0aW9uLCB1cGRhdGUgY29udGFjdCBwaG9uZVxuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJzLnNpemUgPT09IDEpIHtcbiAgICAgICAgY29uc3QgcGhvbmUgPSB0YXJnZXQuZGF0YXNldC5wYXNzZW5nZXJQaG9uZVxuICAgICAgICBpZiAocGhvbmUpIHtcbiAgICAgICAgICB0aGlzLmNvbnRhY3RQaG9uZVRhcmdldC50ZXh0Q29udGVudCA9IHBob25lXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy51cGRhdGVUb3RhbCgpXG4gIH1cblxuICBzZWxlY3RJbnN1cmFuY2UoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIHRoaXMuaW5zdXJhbmNlVHlwZSA9IHRhcmdldC5kYXRhc2V0Lmluc3VyYW5jZVR5cGUgfHwgJ25vbmUnXG4gICAgdGhpcy5pbnN1cmFuY2VQcmljZSA9IHBhcnNlSW50KHRhcmdldC5kYXRhc2V0Lmluc3VyYW5jZVByaWNlIHx8ICcwJylcbiAgICBcbiAgICAvLyBVcGRhdGUgVUk6IGhpZ2hsaWdodCBzZWxlY3RlZCBpbnN1cmFuY2UgY2FyZFxuICAgIGNvbnN0IGFsbEluc3VyYW5jZUNhcmRzID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWluc3VyYW5jZS10eXBlXScpXG4gICAgYWxsSW5zdXJhbmNlQ2FyZHMuZm9yRWFjaChjYXJkID0+IHtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZCBhcyBIVE1MRWxlbWVudFxuICAgICAgY29uc3QgY2FyZFR5cGUgPSBjYXJkRWxlbWVudC5kYXRhc2V0Lmluc3VyYW5jZVR5cGVcbiAgICAgIGNvbnN0IGNoZWNrSWNvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3N2ZzpsYXN0LWNoaWxkJylcbiAgICAgIFxuICAgICAgaWYgKGNhcmRUeXBlID09PSB0aGlzLmluc3VyYW5jZVR5cGUpIHtcbiAgICAgICAgLy8gU2VsZWN0ZWQgY2FyZCBzdHlsaW5nXG4gICAgICAgIGlmIChjYXJkVHlwZSA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgY2FyZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLVsjRkZEOTQ0XScpXG4gICAgICAgICAgY2FyZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYm9yZGVyLWdyYXktMTAwJylcbiAgICAgICAgICBpZiAoY2hlY2tJY29uKSBjaGVja0ljb24uY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTMwMCcpXG4gICAgICAgICAgaWYgKGNoZWNrSWNvbikgY2hlY2tJY29uLmNsYXNzTGlzdC5hZGQoJ3RleHQtWyNGRkQ5NDRdJylcbiAgICAgICAgfSBlbHNlIGlmIChjYXJkVHlwZSA9PT0gJ3ByZW1pdW0nKSB7XG4gICAgICAgICAgY2FyZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYmctWyNGRkZBRURdJywgJ2JvcmRlci1bI0ZGRDk0NF0nKVxuICAgICAgICAgIGNhcmRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2JnLWdyYXktNTAnLCAnYm9yZGVyLWdyYXktMTAwJylcbiAgICAgICAgICBpZiAoY2hlY2tJY29uKSBjaGVja0ljb24uY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTMwMCcpXG4gICAgICAgICAgaWYgKGNoZWNrSWNvbikgY2hlY2tJY29uLmNsYXNzTGlzdC5hZGQoJ3RleHQtWyNGRkQ5NDRdJylcbiAgICAgICAgfSBlbHNlIGlmIChjYXJkVHlwZSA9PT0gJ3JlZnVuZCcpIHtcbiAgICAgICAgICBjYXJkRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdiZy1bI0YwRjdGRl0nLCAnYm9yZGVyLVsjNUQ5Q0VDXScpXG4gICAgICAgICAgY2FyZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYmctZ3JheS01MCcsICdib3JkZXItZ3JheS0xMDAnKVxuICAgICAgICAgIGlmIChjaGVja0ljb24pIGNoZWNrSWNvbi5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktMzAwJylcbiAgICAgICAgICBpZiAoY2hlY2tJY29uKSBjaGVja0ljb24uY2xhc3NMaXN0LmFkZCgndGV4dC1bIzVEOUNFQ10nKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBVbnNlbGVjdGVkIGNhcmQgc3R5bGluZ1xuICAgICAgICBpZiAoY2FyZFR5cGUgPT09ICdub25lJykge1xuICAgICAgICAgIGNhcmRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1bI0ZGRDk0NF0nKVxuICAgICAgICAgIGNhcmRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1ncmF5LTEwMCcpXG4gICAgICAgICAgaWYgKGNoZWNrSWNvbikgY2hlY2tJY29uLmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS0zMDAnKVxuICAgICAgICAgIGlmIChjaGVja0ljb24pIGNoZWNrSWNvbi5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LVsjRkZEOTQ0XScpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FyZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYmctWyNGRkZBRURdJywgJ2JnLVsjRjBGN0ZGXScsICdib3JkZXItWyNGRkQ5NDRdJywgJ2JvcmRlci1bIzVEOUNFQ10nKVxuICAgICAgICAgIGNhcmRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2JnLWdyYXktNTAnLCAnYm9yZGVyLWdyYXktMTAwJylcbiAgICAgICAgICBpZiAoY2hlY2tJY29uKSBjaGVja0ljb24uY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTMwMCcpXG4gICAgICAgICAgaWYgKGNoZWNrSWNvbikgY2hlY2tJY29uLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtWyNGRkQ5NDRdJywgJ3RleHQtWyM1RDlDRUNdJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgdGhpcy51cGRhdGVUb3RhbCgpXG4gIH1cblxuICBhc3luYyBzdWJtaXRPcmRlcihldmVudDogRXZlbnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgXG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGNvbnN0IGJ1c1RpY2tldElkID0gYnV0dG9uLmRhdGFzZXQuYnVzVGlja2V0SWRcbiAgICBjb25zdCBiYXNlUHJpY2UgPSBwYXJzZUludChidXR0b24uZGF0YXNldC5iYXNlUHJpY2UgfHwgJzAnKVxuICAgIFxuICAgIC8vIFN0b3JlIGJhc2UgcHJpY2UgZm9yIGNhbGN1bGF0aW9uc1xuICAgIHRoaXMuYmFzZVByaWNlID0gYmFzZVByaWNlXG4gICAgXG4gICAgLy8gVmFsaWRhdGUgcGFzc2VuZ2VyIHNlbGVjdGlvblxuICAgIGlmICh0aGlzLnNlbGVjdGVkUGFzc2VuZ2Vycy5zaXplID09PSAwKSB7XG4gICAgICBhbGVydCgnXHU4QkY3XHU4MUYzXHU1QzExXHU5MDA5XHU2MkU5XHU0RTAwXHU0RjREXHU0RTU4XHU4RjY2XHU0RUJBJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBHZXQgcGFzc2VuZ2VyIGRldGFpbHMgZm9yIHN1Ym1pc3Npb25cbiAgICBjb25zdCBwYXNzZW5nZXJJZHMgPSBBcnJheS5mcm9tKHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJzKVxuICAgIGNvbnN0IHRvdGFsUHJpY2UgPSB0aGlzLmNhbGN1bGF0ZVRvdGFsKClcbiAgICBjb25zdCB0b3RhbEluc3VyYW5jZVByaWNlID0gdGhpcy5pbnN1cmFuY2VQcmljZSAqIHBhc3Nlbmdlcklkcy5sZW5ndGhcbiAgICBcbiAgICAvLyBQcmVwYXJlIG9yZGVyIGRhdGFcbiAgICBjb25zdCBvcmRlckRhdGEgPSB7XG4gICAgICBidXNfdGlja2V0X29yZGVyOiB7XG4gICAgICAgIGJ1c190aWNrZXRfaWQ6IGJ1c1RpY2tldElkLFxuICAgICAgICBwYXNzZW5nZXJfaWRzOiBwYXNzZW5nZXJJZHMsXG4gICAgICAgIGluc3VyYW5jZV90eXBlOiB0aGlzLmluc3VyYW5jZVR5cGUsXG4gICAgICAgIGluc3VyYW5jZV9wcmljZTogdG90YWxJbnN1cmFuY2VQcmljZSxcbiAgICAgICAgdG90YWxfcHJpY2U6IHRvdGFsUHJpY2VcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gRGlzYWJsZSBidXR0b24gZHVyaW5nIHN1Ym1pc3Npb25cbiAgICBidXR0b24uZGlzYWJsZWQgPSB0cnVlXG4gICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ1x1NTIxQlx1NUVGQVx1NEUyRC4uLidcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gQ3JlYXRlIG9yZGVyIHZpYSBBSkFYXG4gICAgICBjb25zdCBjc3JmVG9rZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxNZXRhRWxlbWVudD4oJ21ldGFbbmFtZT1cImNzcmYtdG9rZW5cIl0nKT8uY29udGVudCB8fCAnJ1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2J1c190aWNrZXRfb3JkZXJzJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ1gtQ1NSRi1Ub2tlbic6IGNzcmZUb2tlblxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShvcmRlckRhdGEpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5vayAmJiBkYXRhLnN1Y2Nlc3MpIHtcbiAgICAgICAgLy8gT3JkZXIgY3JlYXRlZCBzdWNjZXNzZnVsbHksIHRyaWdnZXIgcGF5bWVudCBtb2RhbFxuICAgICAgICB0aGlzLnRyaWdnZXJQYXltZW50TW9kYWwodG90YWxQcmljZS50b1N0cmluZygpLCBkYXRhLnBheW1lbnRfdXJsLCBkYXRhLnN1Y2Nlc3NfdXJsKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEubWVzc2FnZSB8fCAnXHU1MjFCXHU1RUZBXHU4QkEyXHU1MzU1XHU1OTMxXHU4RDI1JylcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgb3JkZXI6JywgZXJyb3IpXG4gICAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnXHU1MjFCXHU1RUZBXHU4QkEyXHU1MzU1XHU1OTMxXHU4RDI1XHVGRjBDXHU4QkY3XHU5MUNEXHU4QkQ1J1xuICAgICAgYWxlcnQobWVzc2FnZSlcbiAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlXG4gICAgICBidXR0b24udGV4dENvbnRlbnQgPSAnXHU1M0JCXHU2NTJGXHU0RUQ4J1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdHJpZ2dlclBheW1lbnRNb2RhbChhbW91bnQ6IHN0cmluZywgcGF5bWVudFVybDogc3RyaW5nLCBzdWNjZXNzVXJsOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyBGaW5kIHBheW1lbnQtY29uZmlybWF0aW9uIGNvbnRyb2xsZXIgYW5kIHRyaWdnZXIgaXRcbiAgICBjb25zdCBwYXltZW50RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNvbnRyb2xsZXIqPVwicGF5bWVudC1jb25maXJtYXRpb25cIl0nKSBhcyBIVE1MRWxlbWVudFxuICAgIFxuICAgIGlmICghcGF5bWVudEVsZW1lbnQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1BheW1lbnQgY29uZmlybWF0aW9uIGNvbnRyb2xsZXIgbm90IGZvdW5kJylcbiAgICAgIGFsZXJ0KCdcdTY1MkZcdTRFRDhcdTdDRkJcdTdFREZcdTY3MkFcdTUyQTBcdThGN0RcdUZGMENcdThCRjdcdTUyMzdcdTY1QjBcdTk4NzVcdTk3NjJcdTkxQ0RcdThCRDUnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIEdldCB0aGUgU3RpbXVsdXMgY29udHJvbGxlciBpbnN0YW5jZVxuICAgIGNvbnN0IGFwcCA9ICh3aW5kb3cgYXMgYW55KS5TdGltdWx1c1xuICAgIGlmICghYXBwKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdGltdWx1cyBub3QgZm91bmQnKVxuICAgICAgYWxlcnQoJ1x1N0NGQlx1N0VERlx1OTUxOVx1OEJFRlx1RkYwQ1x1OEJGN1x1NTIzN1x1NjVCMFx1OTg3NVx1OTc2Mlx1OTFDRFx1OEJENScpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgY29uc3QgcGF5bWVudENvbnRyb2xsZXIgPSBhcHAuZ2V0Q29udHJvbGxlckZvckVsZW1lbnRBbmRJZGVudGlmaWVyKHBheW1lbnRFbGVtZW50LCAncGF5bWVudC1jb25maXJtYXRpb24nKVxuICAgIFxuICAgIGlmIChwYXltZW50Q29udHJvbGxlcikge1xuICAgICAgLy8gU2V0IHZhbHVlc1xuICAgICAgcGF5bWVudENvbnRyb2xsZXIuYW1vdW50VmFsdWUgPSBhbW91bnRcbiAgICAgIC8vIEdldCBjdXJyZW50IHVzZXIgZW1haWwgZnJvbSBtZXRhIHRhZyBvciBlbGVtZW50XG4gICAgICBjb25zdCB1c2VyRW1haWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxNZXRhRWxlbWVudD4oJ21ldGFbbmFtZT1cInVzZXItZW1haWxcIl0nKT8uY29udGVudCB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtdXNlci1lbWFpbF0nKT8uZ2V0QXR0cmlidXRlKCdkYXRhLXVzZXItZW1haWwnKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAnZGVtb0BleGFtcGxlLmNvbSdcbiAgICAgIHBheW1lbnRDb250cm9sbGVyLnVzZXJFbWFpbFZhbHVlID0gdXNlckVtYWlsXG4gICAgICBwYXltZW50Q29udHJvbGxlci5wYXltZW50VXJsVmFsdWUgPSBwYXltZW50VXJsXG4gICAgICBwYXltZW50Q29udHJvbGxlci5zdWNjZXNzVXJsVmFsdWUgPSBzdWNjZXNzVXJsXG4gICAgICBcbiAgICAgIC8vIFNob3cgcGFzc3dvcmQgbW9kYWxcbiAgICAgIHBheW1lbnRDb250cm9sbGVyLnNob3dQYXNzd29yZE1vZGFsKClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcignUGF5bWVudCBjb250cm9sbGVyIG5vdCBpbml0aWFsaXplZCcpXG4gICAgICBhbGVydCgnXHU2NTJGXHU0RUQ4XHU3Q0ZCXHU3RURGXHU2NzJBXHU1MjFEXHU1OUNCXHU1MzE2XHVGRjBDXHU4QkY3XHU1MjM3XHU2NUIwXHU5ODc1XHU5NzYyXHU5MUNEXHU4QkQ1JylcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVBhc3NlbmdlclVJKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBzZWxlY3RlZDogYm9vbGVhbik6IHZvaWQge1xuICAgIGNvbnN0IGNoZWNrSWNvbiA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtYnVzLXRpY2tldC1vcmRlci10YXJnZXQ9XCJjaGVja0ljb25cIl0nKSBhcyBIVE1MRWxlbWVudFxuICAgIGlmIChjaGVja0ljb24pIHtcbiAgICAgIGlmIChzZWxlY3RlZCkge1xuICAgICAgICBjaGVja0ljb24uY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTMwMCcpXG4gICAgICAgIGNoZWNrSWNvbi5jbGFzc0xpc3QuYWRkKCd0ZXh0LVsjRkZEOTQ0XScpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGVja0ljb24uY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTMwMCcpXG4gICAgICAgIGNoZWNrSWNvbi5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LVsjRkZEOTQ0XScpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVUb3RhbCgpOiB2b2lkIHtcbiAgICBjb25zdCBwYXNzZW5nZXJDb3VudCA9IHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJzLnNpemVcbiAgICB0aGlzLnBhc3NlbmdlckNvdW50VGFyZ2V0LnRleHRDb250ZW50ID0gYFx1NTE3MSR7cGFzc2VuZ2VyQ291bnR9XHU0RUJBYFxuICAgIFxuICAgIGNvbnN0IHRvdGFsID0gdGhpcy5jYWxjdWxhdGVUb3RhbCgpXG4gICAgdGhpcy50b3RhbFByaWNlVGFyZ2V0LnRleHRDb250ZW50ID0gdG90YWwudG9TdHJpbmcoKVxuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVUb3RhbCgpOiBudW1iZXIge1xuICAgIGNvbnN0IHBhc3NlbmdlckNvdW50ID0gdGhpcy5zZWxlY3RlZFBhc3NlbmdlcnMuc2l6ZVxuICAgIGlmIChwYXNzZW5nZXJDb3VudCA9PT0gMCkgcmV0dXJuIDBcbiAgICBcbiAgICAvLyBHZXQgYmFzZSBwcmljZSBmcm9tIGJ1dHRvbiBvciBmb3JtRGF0YVxuICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1iYXNlLXByaWNlXScpIGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgYmFzZVByaWNlID0gcGFyc2VJbnQoYnV0dG9uPy5kYXRhc2V0LmJhc2VQcmljZSB8fCAnMCcpXG4gICAgXG4gICAgcmV0dXJuIChiYXNlUHJpY2UgKyB0aGlzLmluc3VyYW5jZVByaWNlKSAqIHBhc3NlbmdlckNvdW50XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcInByb2R1Y3RDYXJkXCIsXG4gICAgXCJkYXRlTW9kYWxcIixcbiAgICBcImNvdW50TW9kYWxcIixcbiAgICBcImFkdWx0Q291bnRcIixcbiAgICBcImNoaWxkQ291bnRcIixcbiAgICBcInNlbGVjdGVkRGF0ZVwiLFxuICAgIFwidG90YWxQcmljZVwiXG4gIF1cblxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIGd1aWRlSWQ6IFN0cmluZyxcbiAgICBzZWxlY3RlZERhdGU6IFN0cmluZyxcbiAgICBhZHVsdENvdW50OiBOdW1iZXIsXG4gICAgY2hpbGRDb3VudDogTnVtYmVyLFxuICAgIHByaWNlUGVyUGVyc29uOiBOdW1iZXJcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgcHJvZHVjdENhcmRUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgZGF0ZU1vZGFsVGFyZ2V0PzogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjb3VudE1vZGFsVGFyZ2V0PzogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBhZHVsdENvdW50VGFyZ2V0PzogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjaGlsZENvdW50VGFyZ2V0PzogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzZWxlY3RlZERhdGVUYXJnZXQ/OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRvdGFsUHJpY2VUYXJnZXQ/OiBIVE1MRWxlbWVudFxuICBcbiAgZGVjbGFyZSBndWlkZUlkVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHNlbGVjdGVkRGF0ZVZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBhZHVsdENvdW50VmFsdWU6IG51bWJlclxuICBkZWNsYXJlIGNoaWxkQ291bnRWYWx1ZTogbnVtYmVyXG4gIGRlY2xhcmUgcHJpY2VQZXJQZXJzb25WYWx1ZTogbnVtYmVyXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkRlZXBCb29raW5nIGNvbnRyb2xsZXIgY29ubmVjdGVkXCIpXG4gICAgLy8gSW5pdGlhbGl6ZSBkZWZhdWx0IHZhbHVlc1xuICAgIHRoaXMuYWR1bHRDb3VudFZhbHVlID0gMVxuICAgIHRoaXMuY2hpbGRDb3VudFZhbHVlID0gMFxuICAgIFxuICAgIC8vIEdldCBwcmljZSBmcm9tIGZpcnN0IHByb2R1Y3QgY2FyZCBpZiBhdmFpbGFibGVcbiAgICBpZiAodGhpcy5wcm9kdWN0Q2FyZFRhcmdldHMgJiYgdGhpcy5wcm9kdWN0Q2FyZFRhcmdldHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgcHJpY2VFbGVtZW50ID0gdGhpcy5wcm9kdWN0Q2FyZFRhcmdldHNbMF0ucXVlcnlTZWxlY3RvcignLnRleHQteGwuZm9udC1ib2xkLnRleHQtXFxcXFtcXFxcI2ZmNTMzNlxcXFxdJylcbiAgICAgIGlmIChwcmljZUVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5wcmljZVBlclBlcnNvblZhbHVlID0gcGFyc2VJbnQocHJpY2VFbGVtZW50LnRleHRDb250ZW50IHx8IFwiMTkyXCIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnByaWNlUGVyUGVyc29uVmFsdWUgPSAxOTJcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wcmljZVBlclBlcnNvblZhbHVlID0gMTkyXG4gICAgfVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkRlZXBCb29raW5nIGRpc2Nvbm5lY3RlZFwiKVxuICB9XG5cbiAgLy8gXHU5MDA5XHU2MkU5XHU2NUU1XHU2NzFGXG4gIHNlbGVjdERhdGUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGNvbnN0IGRhdGUgPSBidXR0b24uZGF0YXNldC5kYXRlXG4gICAgXG4gICAgaWYgKCFkYXRlKSByZXR1cm5cbiAgICBcbiAgICB0aGlzLnNlbGVjdGVkRGF0ZVZhbHVlID0gZGF0ZVxuICAgIGNvbnNvbGUubG9nKFwiU2VsZWN0ZWQgZGF0ZTpcIiwgZGF0ZSlcbiAgICBcbiAgICAvLyBVcGRhdGUgVUkgdG8gc2hvdyBzZWxlY3RlZCBkYXRlXG4gICAgY29uc3QgZGF0ZUJ1dHRvbnMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtYWN0aW9uKj1cInNlbGVjdERhdGVcIl0nKVxuICAgIGRhdGVCdXR0b25zLmZvckVhY2goKGJ0bikgPT4ge1xuICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLVsjZmZlZWI4XScsICdib3JkZXItWyNmZmVlYjhdJylcbiAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdiZy1bI2Y1ZjdmYV0nKVxuICAgIH0pXG4gICAgXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLVsjZjVmN2ZhXScpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2JnLVsjZmZlZWI4XScsICdib3JkZXItWyNmZmVlYjhdJylcbiAgfVxuXG4gIC8vIFx1NjI1M1x1NUYwMFx1NjVFNVx1NTM4Nlx1NUYzOVx1N0E5N1xuICBvcGVuQ2FsZW5kYXIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnNvbGUubG9nKFwiT3BlbmluZyBjYWxlbmRhciBtb2RhbFwiKVxuICAgIC8vIFRPRE86IEltcGxlbWVudCBjYWxlbmRhciBtb2RhbFxuICAgIC8vIEZvciBub3csIGp1c3Qgc2hvdyBhIHRvYXN0IG1lc3NhZ2VcbiAgICB0aGlzLnNob3dUb2FzdChcIlx1NjVFNVx1NTM4Nlx1OTAwOVx1NjJFOVx1NTI5Rlx1ODBGRFx1NTM3M1x1NUMwNlx1NEUwQVx1N0VCRlwiKVxuICB9XG5cbiAgLy8gXHU2MjUzXHU1RjAwXHU0RUJBXHU2NTcwXHU5MDA5XHU2MkU5XHU1RjM5XHU3QTk3XG4gIG9wZW5Db3VudE1vZGFsKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBcbiAgICBpZiAoIXRoaXMuc2VsZWN0ZWREYXRlVmFsdWUpIHtcbiAgICAgIHRoaXMuc2hvd1RvYXN0KFwiXHU4QkY3XHU1MTQ4XHU5MDA5XHU2MkU5XHU1MUZBXHU4ODRDXHU2NUU1XHU2NzFGXCIpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coXCJPcGVuaW5nIGNvdW50IG1vZGFsXCIpXG4gICAgXG4gICAgLy8gQ3JlYXRlIG1vZGFsIEhUTUxcbiAgICAgXG4gICAgY29uc3QgbW9kYWxIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cImZpeGVkIGluc2V0LTAgYmctYmxhY2svNjAgei00MFwiIFxuICAgICAgICAgICBkYXRhLWFjdGlvbj1cImNsaWNrLT5kZWVwLWJvb2tpbmcjY2xvc2VDb3VudE1vZGFsXCIgXG4gICAgICAgICAgIGRhdGEtZGVlcC1ib29raW5nLXRhcmdldD1cImNvdW50TW9kYWxcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImFic29sdXRlIGJvdHRvbS0wIHctZnVsbCBtYXgtdy1bNDE0cHhdIGxlZnQtMS8yIC10cmFuc2xhdGUteC0xLzIgYmctd2hpdGUgei01MCByb3VuZGVkLXQtMnhsIHB4LTUgcHQtNSBwYi04IGFuaW1hdGUtc2xpZGUtdXBcIiBcbiAgICAgICAgICAgICBkYXRhLWFjdGlvbj1cImNsaWNrLT5kZWVwLWJvb2tpbmcjc3RvcFByb3BhZ2F0aW9uXCI+XG4gICAgICAgICAgXG4gICAgICAgICAgPCEtLSBcdTVGMzlcdTdBOTdcdTY4MDdcdTk4OThcdTY4MEYgLS0+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtYi04IHJlbGF0aXZlXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidy1mdWxsIHRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICAgIDxoMyBjbGFzcz1cInRleHQtbGcgZm9udC1ib2xkIHRleHQtZ3JheS05MDBcIj5cdTk4ODRcdTdFQTZcdTRFQkFcdTY1NzA8L2gzPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYWJzb2x1dGUgcmlnaHQtMCB0b3AtMCBwLTFcIiBkYXRhLWFjdGlvbj1cImNsaWNrLT5kZWVwLWJvb2tpbmcjY2xvc2VDb3VudE1vZGFsXCI+XG4gICAgICAgICAgICAgIDxzdmcgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIGNsYXNzPVwidGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTggNkw2IDE4TTYgNmwxMiAxMlwiIC8+XG4gICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8IS0tIFx1NTIxN1x1ODg2OFx1OTg3OVx1RkYxQVx1NjIxMFx1NEVCQSAtLT5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG1iLThcIj5cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDBcIj5cdTYyMTBcdTRFQkE8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtc20gdGV4dC1ncmF5LTQwMCBtdC0xXCI+XHU1MzU1XHU0RUY3OiBcdTAwQTUke3RoaXMucHJpY2VQZXJQZXJzb25WYWx1ZX08L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggaXRlbXMtY2VudGVyIGdhcC00XCI+XG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ3LTcgaC03IHJvdW5kZWQtZnVsbCBib3JkZXIgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdHJhbnNpdGlvbi1jb2xvcnMgJHtcbiAgdGhpcy5hZHVsdENvdW50VmFsdWUgPD0gMVxuICAgID8gJ2JvcmRlci1ncmF5LTMwMCB0ZXh0LWdyYXktMzAwIGN1cnNvci1ub3QtYWxsb3dlZCdcbiAgICA6ICdib3JkZXItYmx1ZS1jdXN0b20gdGV4dC1ibHVlLWN1c3RvbSBob3ZlcjpiZy1ibHVlLTUwJ1xufVwiXG4gICAgICAgICAgICAgICAgICAgICAgZGF0YS1hY3Rpb249XCJjbGljay0+ZGVlcC1ib29raW5nI2RlY3JlbWVudEFkdWx0XCJcbiAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuYWR1bHRDb3VudFZhbHVlIDw9IDEgPyAnZGlzYWJsZWQnIDogJyd9PlxuICAgICAgICAgICAgICAgIDxzdmcgd2lkdGg9XCIxMlwiIGhlaWdodD1cIjJcIiB2aWV3Qm94PVwiMCAwIDEyIDJcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgICA8cmVjdCB3aWR0aD1cIjEyXCIgaGVpZ2h0PVwiMlwiIHJ4PVwiMVwiLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRleHQtbGcgZm9udC1tZWRpdW0gdy00IHRleHQtY2VudGVyXCIgZGF0YS1kZWVwLWJvb2tpbmctdGFyZ2V0PVwiYWR1bHRDb3VudFwiPiR7dGhpcy5hZHVsdENvdW50VmFsdWV9PC9zcGFuPlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInctNyBoLTcgcm91bmRlZC1mdWxsIGJvcmRlciBib3JkZXItYmx1ZS1jdXN0b20gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC1ibHVlLWN1c3RvbSBob3ZlcjpiZy1ibHVlLTUwXCJcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhLWFjdGlvbj1cImNsaWNrLT5kZWVwLWJvb2tpbmcjaW5jcmVtZW50QWR1bHRcIj5cbiAgICAgICAgICAgICAgICA8c3ZnIHdpZHRoPVwiMTJcIiBoZWlnaHQ9XCIxMlwiIHZpZXdCb3g9XCIwIDAgMTIgMTJcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgICA8cmVjdCB5PVwiNVwiIHdpZHRoPVwiMTJcIiBoZWlnaHQ9XCIyXCIgcng9XCIxXCIvPlxuICAgICAgICAgICAgICAgICAgPHJlY3QgeD1cIjVcIiB3aWR0aD1cIjJcIiBoZWlnaHQ9XCIxMlwiIHJ4PVwiMVwiLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDwhLS0gXHU1MjE3XHU4ODY4XHU5ODc5XHVGRjFBXHU1MTNGXHU3QUU1IC0tPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbWItMTBcIj5cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDBcIj5cdTUxM0ZcdTdBRTU8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtc20gdGV4dC1ncmF5LTQwMCBtdC0xXCI+XHU1MzU1XHU0RUY3OiBcdTAwQTUke01hdGgucm91bmQodGhpcy5wcmljZVBlclBlcnNvblZhbHVlICogMC44KX08L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggaXRlbXMtY2VudGVyIGdhcC00XCI+XG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ3LTcgaC03IHJvdW5kZWQtZnVsbCBib3JkZXIgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdHJhbnNpdGlvbi1jb2xvcnMgJHtcbiAgdGhpcy5jaGlsZENvdW50VmFsdWUgPD0gMFxuICAgID8gJ2JvcmRlci1ncmF5LTMwMCB0ZXh0LWdyYXktMzAwIGN1cnNvci1ub3QtYWxsb3dlZCdcbiAgICA6ICdib3JkZXItYmx1ZS1jdXN0b20gdGV4dC1ibHVlLWN1c3RvbSBob3ZlcjpiZy1ibHVlLTUwJ1xufVwiXG4gICAgICAgICAgICAgICAgICAgICAgZGF0YS1hY3Rpb249XCJjbGljay0+ZGVlcC1ib29raW5nI2RlY3JlbWVudENoaWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuY2hpbGRDb3VudFZhbHVlIDw9IDAgPyAnZGlzYWJsZWQnIDogJyd9PlxuICAgICAgICAgICAgICAgIDxzdmcgd2lkdGg9XCIxMlwiIGhlaWdodD1cIjJcIiB2aWV3Qm94PVwiMCAwIDEyIDJcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgICA8cmVjdCB3aWR0aD1cIjEyXCIgaGVpZ2h0PVwiMlwiIHJ4PVwiMVwiLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRleHQtbGcgZm9udC1tZWRpdW0gdy00IHRleHQtY2VudGVyXCIgZGF0YS1kZWVwLWJvb2tpbmctdGFyZ2V0PVwiY2hpbGRDb3VudFwiPiR7dGhpcy5jaGlsZENvdW50VmFsdWV9PC9zcGFuPlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInctNyBoLTcgcm91bmRlZC1mdWxsIGJvcmRlciBib3JkZXItYmx1ZS1jdXN0b20gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC1ibHVlLWN1c3RvbSBob3ZlcjpiZy1ibHVlLTUwXCJcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhLWFjdGlvbj1cImNsaWNrLT5kZWVwLWJvb2tpbmcjaW5jcmVtZW50Q2hpbGRcIj5cbiAgICAgICAgICAgICAgICA8c3ZnIHdpZHRoPVwiMTJcIiBoZWlnaHQ9XCIxMlwiIHZpZXdCb3g9XCIwIDAgMTIgMTJcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgICA8cmVjdCB5PVwiNVwiIHdpZHRoPVwiMTJcIiBoZWlnaHQ9XCIyXCIgcng9XCIxXCIvPlxuICAgICAgICAgICAgICAgICAgPHJlY3QgeD1cIjVcIiB3aWR0aD1cIjJcIiBoZWlnaHQ9XCIxMlwiIHJ4PVwiMVwiLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDwhLS0gXHU1RTk1XHU5MEU4XHU2MzA5XHU5NEFFIC0tPlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ3LWZ1bGwgYmctWyNGRjVBNDNdIHRleHQtd2hpdGUgdGV4dC1sZyBmb250LWJvbGQgcHktMy41IHJvdW5kZWQtZnVsbCBzaGFkb3ctbGcgYWN0aXZlOm9wYWNpdHktOTAgdHJhbnNpdGlvbi1vcGFjaXR5XCJcbiAgICAgICAgICAgICAgICAgIGRhdGEtYWN0aW9uPVwiY2xpY2stPmRlZXAtYm9va2luZyNjb25maXJtQm9va2luZ1wiPlxuICAgICAgICAgICAgXHU3QUNCXHU1MzczXHU5ODg0XHU3RUE2XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgXG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYFxuICAgICBcbiAgICBcbiAgICB0aGlzLmVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBtb2RhbEhUTUwpXG4gIH1cblxuICAvLyBcdTUxNzNcdTk1RURcdTRFQkFcdTY1NzBcdTkwMDlcdTYyRTlcdTVGMzlcdTdBOTdcbiAgY2xvc2VDb3VudE1vZGFsKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWRlZXAtYm9va2luZy10YXJnZXQ9XCJjb3VudE1vZGFsXCJdJylcbiAgICBpZiAobW9kYWwpIHtcbiAgICAgIG1vZGFsLnJlbW92ZSgpXG4gICAgfVxuICB9XG5cbiAgLy8gXHU5NjNCXHU2QjYyXHU0RThCXHU0RUY2XHU1MTkyXHU2Q0UxXG4gIHN0b3BQcm9wYWdhdGlvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICB9XG5cbiAgLy8gXHU1ODlFXHU1MkEwXHU2MjEwXHU0RUJBXHU2NTcwXHU5MUNGXG4gIGluY3JlbWVudEFkdWx0KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICB0aGlzLmFkdWx0Q291bnRWYWx1ZSsrXG4gICAgdGhpcy51cGRhdGVDb3VudERpc3BsYXkoKVxuICB9XG5cbiAgLy8gXHU1MUNGXHU1QzExXHU2MjEwXHU0RUJBXHU2NTcwXHU5MUNGXG4gIGRlY3JlbWVudEFkdWx0KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBpZiAodGhpcy5hZHVsdENvdW50VmFsdWUgPiAxKSB7XG4gICAgICB0aGlzLmFkdWx0Q291bnRWYWx1ZS0tXG4gICAgICB0aGlzLnVwZGF0ZUNvdW50RGlzcGxheSgpXG4gICAgfVxuICB9XG5cbiAgLy8gXHU1ODlFXHU1MkEwXHU1MTNGXHU3QUU1XHU2NTcwXHU5MUNGXG4gIGluY3JlbWVudENoaWxkKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICB0aGlzLmNoaWxkQ291bnRWYWx1ZSsrXG4gICAgdGhpcy51cGRhdGVDb3VudERpc3BsYXkoKVxuICB9XG5cbiAgLy8gXHU1MUNGXHU1QzExXHU1MTNGXHU3QUU1XHU2NTcwXHU5MUNGXG4gIGRlY3JlbWVudENoaWxkKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBpZiAodGhpcy5jaGlsZENvdW50VmFsdWUgPiAwKSB7XG4gICAgICB0aGlzLmNoaWxkQ291bnRWYWx1ZS0tXG4gICAgICB0aGlzLnVwZGF0ZUNvdW50RGlzcGxheSgpXG4gICAgfVxuICB9XG5cbiAgLy8gXHU2NkY0XHU2NUIwXHU2NTcwXHU5MUNGXHU2NjNFXHU3OTNBXG4gIHVwZGF0ZUNvdW50RGlzcGxheSgpOiB2b2lkIHtcbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWRlZXAtYm9va2luZy10YXJnZXQ9XCJjb3VudE1vZGFsXCJdJylcbiAgICBpZiAoIW1vZGFsKSByZXR1cm5cblxuICAgIC8vIFVwZGF0ZSBhZHVsdCBjb3VudFxuICAgIGNvbnN0IGFkdWx0Q291bnRFbCA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWRlZXAtYm9va2luZy10YXJnZXQ9XCJhZHVsdENvdW50XCJdJylcbiAgICBpZiAoYWR1bHRDb3VudEVsKSB7XG4gICAgICBhZHVsdENvdW50RWwudGV4dENvbnRlbnQgPSB0aGlzLmFkdWx0Q291bnRWYWx1ZS50b1N0cmluZygpXG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGNoaWxkIGNvdW50XG4gICAgY29uc3QgY2hpbGRDb3VudEVsID0gbW9kYWwucXVlcnlTZWxlY3RvcignW2RhdGEtZGVlcC1ib29raW5nLXRhcmdldD1cImNoaWxkQ291bnRcIl0nKVxuICAgIGlmIChjaGlsZENvdW50RWwpIHtcbiAgICAgIGNoaWxkQ291bnRFbC50ZXh0Q29udGVudCA9IHRoaXMuY2hpbGRDb3VudFZhbHVlLnRvU3RyaW5nKClcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgYnV0dG9uIHN0YXRlc1xuICAgIGNvbnN0IGRlY3JlbWVudEFkdWx0QnRuID0gbW9kYWwucXVlcnlTZWxlY3RvcignW2RhdGEtYWN0aW9uKj1cImRlY3JlbWVudEFkdWx0XCJdJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBpZiAoZGVjcmVtZW50QWR1bHRCdG4pIHtcbiAgICAgIGlmICh0aGlzLmFkdWx0Q291bnRWYWx1ZSA8PSAxKSB7XG4gICAgICAgIGRlY3JlbWVudEFkdWx0QnRuLmRpc2FibGVkID0gdHJ1ZVxuICAgICAgICBkZWNyZW1lbnRBZHVsdEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItYmx1ZS1jdXN0b20nLCAndGV4dC1ibHVlLWN1c3RvbScsICdob3ZlcjpiZy1ibHVlLTUwJylcbiAgICAgICAgZGVjcmVtZW50QWR1bHRCdG4uY2xhc3NMaXN0LmFkZCgnYm9yZGVyLWdyYXktMzAwJywgJ3RleHQtZ3JheS0zMDAnLCAnY3Vyc29yLW5vdC1hbGxvd2VkJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlY3JlbWVudEFkdWx0QnRuLmRpc2FibGVkID0gZmFsc2VcbiAgICAgICAgZGVjcmVtZW50QWR1bHRCdG4uY2xhc3NMaXN0LnJlbW92ZSgnYm9yZGVyLWdyYXktMzAwJywgJ3RleHQtZ3JheS0zMDAnLCAnY3Vyc29yLW5vdC1hbGxvd2VkJylcbiAgICAgICAgZGVjcmVtZW50QWR1bHRCdG4uY2xhc3NMaXN0LmFkZCgnYm9yZGVyLWJsdWUtY3VzdG9tJywgJ3RleHQtYmx1ZS1jdXN0b20nLCAnaG92ZXI6YmctYmx1ZS01MCcpXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZGVjcmVtZW50Q2hpbGRCdG4gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hY3Rpb24qPVwiZGVjcmVtZW50Q2hpbGRcIl0nKSBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGlmIChkZWNyZW1lbnRDaGlsZEJ0bikge1xuICAgICAgaWYgKHRoaXMuY2hpbGRDb3VudFZhbHVlIDw9IDApIHtcbiAgICAgICAgZGVjcmVtZW50Q2hpbGRCdG4uZGlzYWJsZWQgPSB0cnVlXG4gICAgICAgIGRlY3JlbWVudENoaWxkQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1ibHVlLWN1c3RvbScsICd0ZXh0LWJsdWUtY3VzdG9tJywgJ2hvdmVyOmJnLWJsdWUtNTAnKVxuICAgICAgICBkZWNyZW1lbnRDaGlsZEJ0bi5jbGFzc0xpc3QuYWRkKCdib3JkZXItZ3JheS0zMDAnLCAndGV4dC1ncmF5LTMwMCcsICdjdXJzb3Itbm90LWFsbG93ZWQnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVjcmVtZW50Q2hpbGRCdG4uZGlzYWJsZWQgPSBmYWxzZVxuICAgICAgICBkZWNyZW1lbnRDaGlsZEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItZ3JheS0zMDAnLCAndGV4dC1ncmF5LTMwMCcsICdjdXJzb3Itbm90LWFsbG93ZWQnKVxuICAgICAgICBkZWNyZW1lbnRDaGlsZEJ0bi5jbGFzc0xpc3QuYWRkKCdib3JkZXItYmx1ZS1jdXN0b20nLCAndGV4dC1ibHVlLWN1c3RvbScsICdob3ZlcjpiZy1ibHVlLTUwJylcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBcdTc4NkVcdThCQTRcdTk4ODRcdTdFQTYgLSBcdThERjNcdThGNkNcdTUyMzBcdTU4NkJcdTUxOTlcdThCQTJcdTUzNTVcdTk4NzVcbiAgY29uZmlybUJvb2tpbmcoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIFxuICAgIC8vIFx1Njc4NFx1NUVGQVx1OERGM1x1OEY2Q1VSTFxuICAgIGNvbnN0IHVybCA9IGAvZGVlcF90cmF2ZWxfYm9va2luZ3MvbmV3P2d1aWRlX2lkPSR7dGhpcy5ndWlkZUlkVmFsdWV9JmRhdGU9JHt0aGlzLnNlbGVjdGVkRGF0ZVZhbHVlfSZhZHVsdF9jb3VudD0ke3RoaXMuYWR1bHRDb3VudFZhbHVlfSZjaGlsZF9jb3VudD0ke3RoaXMuY2hpbGRDb3VudFZhbHVlfWBcbiAgICBcbiAgICBjb25zb2xlLmxvZyhcIkNvbmZpcm1pbmcgYm9va2luZzpcIiwge1xuICAgICAgZ3VpZGVJZDogdGhpcy5ndWlkZUlkVmFsdWUsXG4gICAgICBkYXRlOiB0aGlzLnNlbGVjdGVkRGF0ZVZhbHVlLFxuICAgICAgYWR1bHRDb3VudDogdGhpcy5hZHVsdENvdW50VmFsdWUsXG4gICAgICBjaGlsZENvdW50OiB0aGlzLmNoaWxkQ291bnRWYWx1ZSxcbiAgICAgIHVybFxuICAgIH0pXG4gICAgXG4gICAgLy8gTmF2aWdhdGUgdG8gYm9va2luZyBmb3JtIHBhZ2VcbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybFxuICB9XG5cbiAgLy8gXHU2NjNFXHU3OTNBXHU2M0QwXHU3OTNBXHU2RDg4XHU2MDZGXG4gIHNob3dUb2FzdChtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyBVc2UgZXhpc3RpbmcgdG9hc3QgZnVuY3Rpb25hbGl0eSBpZiBhdmFpbGFibGVcbiAgICBpZiAodHlwZW9mICh3aW5kb3cgYXMgYW55KS5zaG93VG9hc3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICh3aW5kb3cgYXMgYW55KS5zaG93VG9hc3QobWVzc2FnZSlcbiAgICB9IGVsc2Uge1xuICAgICAgYWxlcnQobWVzc2FnZSlcbiAgICB9XG4gIH1cbn1cblxuLy8gQWRkIGN1c3RvbSBzdHlsZXNcbmNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKVxuc3R5bGUudGV4dENvbnRlbnQgPSBgXG4gIC5ib3JkZXItYmx1ZS1jdXN0b20ge1xuICAgIGJvcmRlci1jb2xvcjogIzRFNkVGMjtcbiAgfVxuICAudGV4dC1ibHVlLWN1c3RvbSB7XG4gICAgY29sb3I6ICM0RTZFRjI7XG4gIH1cbiAgQGtleWZyYW1lcyBzbGlkZS11cCB7XG4gICAgZnJvbSB7XG4gICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMTAwJSk7XG4gICAgfVxuICAgIHRvIHtcbiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTtcbiAgICB9XG4gIH1cbiAgLmFuaW1hdGUtc2xpZGUtdXAge1xuICAgIGFuaW1hdGlvbjogc2xpZGUtdXAgMC4zcyBlYXNlLW91dDtcbiAgfVxuYFxuZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSlcbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcInRvdGFsUHJpY2VcIiwgXCJkZWxpdmVyeUFkZHJlc3NcIl1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHRvdGFsUHJpY2VUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVsaXZlcnlBZGRyZXNzVGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlZpc2FPcmRlciBjb250cm9sbGVyIGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgYXN5bmMgc3VibWl0T3JkZXIoZXZlbnQ6IEV2ZW50KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIFxuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBcbiAgICAvLyBHZXQgb3JkZXIgZGF0YSBmcm9tIGJ1dHRvbiBkYXRhc2V0XG4gICAgY29uc3QgdmlzYVByb2R1Y3RJZCA9IGJ1dHRvbi5kYXRhc2V0LnZpc2FQcm9kdWN0SWQgfHwgJydcbiAgICBjb25zdCB0cmF2ZWxlckNvdW50ID0gcGFyc2VJbnQoYnV0dG9uLmRhdGFzZXQudHJhdmVsZXJDb3VudCB8fCAnMScpXG4gICAgY29uc3QgdG90YWxQcmljZSA9IHBhcnNlRmxvYXQoYnV0dG9uLmRhdGFzZXQudG90YWxQcmljZSB8fCAnMCcpXG4gICAgY29uc3QgaW5zdXJhbmNlVHlwZSA9IGJ1dHRvbi5kYXRhc2V0Lmluc3VyYW5jZVR5cGUgfHwgJ25vbmUnXG4gICAgY29uc3QgaW5zdXJhbmNlUHJpY2UgPSBwYXJzZUZsb2F0KGJ1dHRvbi5kYXRhc2V0Lmluc3VyYW5jZVByaWNlIHx8ICcwJylcbiAgICBjb25zdCBjb250YWN0TmFtZSA9IGJ1dHRvbi5kYXRhc2V0LmNvbnRhY3ROYW1lIHx8ICcnXG4gICAgY29uc3QgY29udGFjdFBob25lID0gYnV0dG9uLmRhdGFzZXQuY29udGFjdFBob25lIHx8ICcnXG4gICAgY29uc3QgZGVsaXZlcnlBZGRyZXNzID0gYnV0dG9uLmRhdGFzZXQuZGVsaXZlcnlBZGRyZXNzIHx8ICcnXG5cbiAgICAvLyBCYXNpYyB2YWxpZGF0aW9uXG4gICAgaWYgKCFjb250YWN0TmFtZSB8fCBjb250YWN0TmFtZS50cmltKCkgPT09ICcnKSB7XG4gICAgICBhbGVydCgnXHU4QkY3XHU1ODZCXHU1MTk5XHU4MDU0XHU3Q0ZCXHU0RUJBXHU1OUQzXHU1NDBEJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICBpZiAoIWNvbnRhY3RQaG9uZSB8fCBjb250YWN0UGhvbmUudHJpbSgpID09PSAnJykge1xuICAgICAgYWxlcnQoJ1x1OEJGN1x1NTg2Qlx1NTE5OVx1ODA1NFx1N0NGQlx1NEVCQVx1NzUzNVx1OEJERCcpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgaWYgKCFkZWxpdmVyeUFkZHJlc3MgfHwgZGVsaXZlcnlBZGRyZXNzLnRyaW0oKSA9PT0gJycpIHtcbiAgICAgIGFsZXJ0KCdcdThCRjdcdTU4NkJcdTUxOTlcdTkwQUVcdTVCQzRcdTU3MzBcdTU3NDAnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gUHJlcGFyZSBvcmRlciBkYXRhIChzaW1wbGlmaWVkIC0gbm8gdHJhdmVsZXJzIGZvciBub3cpXG4gICAgY29uc3Qgb3JkZXJEYXRhID0ge1xuICAgICAgdmlzYV9vcmRlcjoge1xuICAgICAgICB2aXNhX3Byb2R1Y3RfaWQ6IHZpc2FQcm9kdWN0SWQsXG4gICAgICAgIHRyYXZlbGVyX2NvdW50OiB0cmF2ZWxlckNvdW50LFxuICAgICAgICBpbnN1cmFuY2VfdHlwZTogaW5zdXJhbmNlVHlwZSxcbiAgICAgICAgaW5zdXJhbmNlX3ByaWNlOiBpbnN1cmFuY2VQcmljZSxcbiAgICAgICAgdG90YWxfcHJpY2U6IHRvdGFsUHJpY2UsXG4gICAgICAgIGNvbnRhY3RfbmFtZTogY29udGFjdE5hbWUudHJpbSgpLFxuICAgICAgICBjb250YWN0X3Bob25lOiBjb250YWN0UGhvbmUudHJpbSgpLFxuICAgICAgICBkZWxpdmVyeV9hZGRyZXNzOiBkZWxpdmVyeUFkZHJlc3MudHJpbSgpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRGlzYWJsZSBidXR0b24gZHVyaW5nIHN1Ym1pc3Npb25cbiAgICBidXR0b24uZGlzYWJsZWQgPSB0cnVlXG4gICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ1x1NTIxQlx1NUVGQVx1NEUyRC4uLidcblxuICAgIHRyeSB7XG4gICAgICAvLyBDcmVhdGUgb3JkZXIgdmlhIEFKQVhcbiAgICAgIGNvbnN0IGNzcmZUb2tlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTE1ldGFFbGVtZW50PignbWV0YVtuYW1lPVwiY3NyZi10b2tlblwiXScpPy5jb250ZW50IHx8ICcnXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvdmlzYV9vcmRlcnMnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAnWC1DU1JGLVRva2VuJzogY3NyZlRva2VuXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG9yZGVyRGF0YSlcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcblxuICAgICAgaWYgKHJlc3BvbnNlLm9rICYmIGRhdGEuc3VjY2Vzcykge1xuICAgICAgICAvLyBPcmRlciBjcmVhdGVkIHN1Y2Nlc3NmdWxseSwgdHJpZ2dlciBwYXltZW50IG1vZGFsXG4gICAgICAgIHRoaXMudHJpZ2dlclBheW1lbnRNb2RhbCh0b3RhbFByaWNlLnRvU3RyaW5nKCksIGRhdGEucGF5bWVudF91cmwsIGRhdGEuc3VjY2Vzc191cmwpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YS5tZXNzYWdlIHx8ICdcdTUyMUJcdTVFRkFcdThCQTJcdTUzNTVcdTU5MzFcdThEMjUnKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBvcmRlcjonLCBlcnJvcilcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdcdTUyMUJcdTVFRkFcdThCQTJcdTUzNTVcdTU5MzFcdThEMjVcdUZGMENcdThCRjdcdTkxQ0RcdThCRDUnXG4gICAgICBhbGVydChtZXNzYWdlKVxuICAgICAgYnV0dG9uLmRpc2FibGVkID0gZmFsc2VcbiAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdcdTdBQ0JcdTUyM0JcdTY1MkZcdTRFRDgnXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB0cmlnZ2VyUGF5bWVudE1vZGFsKGFtb3VudDogc3RyaW5nLCBwYXltZW50VXJsOiBzdHJpbmcsIHN1Y2Nlc3NVcmw6IHN0cmluZyk6IHZvaWQge1xuICAgIC8vIEZpbmQgcGF5bWVudC1jb25maXJtYXRpb24gY29udHJvbGxlciBhbmQgdHJpZ2dlciBpdFxuICAgIGNvbnN0IHBheW1lbnRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtY29udHJvbGxlcio9XCJwYXltZW50LWNvbmZpcm1hdGlvblwiXScpIGFzIEhUTUxFbGVtZW50XG5cbiAgICBpZiAoIXBheW1lbnRFbGVtZW50KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdQYXltZW50IGNvbmZpcm1hdGlvbiBjb250cm9sbGVyIG5vdCBmb3VuZCcpXG4gICAgICBhbGVydCgnXHU2NTJGXHU0RUQ4XHU3Q0ZCXHU3RURGXHU2NzJBXHU1MkEwXHU4RjdEXHVGRjBDXHU4QkY3XHU1MjM3XHU2NUIwXHU5ODc1XHU5NzYyXHU5MUNEXHU4QkQ1JylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIEdldCB0aGUgU3RpbXVsdXMgY29udHJvbGxlciBpbnN0YW5jZVxuICAgIGNvbnN0IGFwcCA9ICh3aW5kb3cgYXMgYW55KS5TdGltdWx1c1xuICAgIGlmICghYXBwKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdGltdWx1cyBub3QgZm91bmQnKVxuICAgICAgYWxlcnQoJ1x1N0NGQlx1N0VERlx1OTUxOVx1OEJFRlx1RkYwQ1x1OEJGN1x1NTIzN1x1NjVCMFx1OTg3NVx1OTc2Mlx1OTFDRFx1OEJENScpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBwYXltZW50Q29udHJvbGxlciA9IGFwcC5nZXRDb250cm9sbGVyRm9yRWxlbWVudEFuZElkZW50aWZpZXIocGF5bWVudEVsZW1lbnQsICdwYXltZW50LWNvbmZpcm1hdGlvbicpXG5cbiAgICBpZiAocGF5bWVudENvbnRyb2xsZXIpIHtcbiAgICAgIC8vIFNldCB2YWx1ZXNcbiAgICAgIHBheW1lbnRDb250cm9sbGVyLmFtb3VudFZhbHVlID0gYW1vdW50XG4gICAgICAvLyBHZXQgY3VycmVudCB1c2VyIGVtYWlsIGZyb20gbWV0YSB0YWcgb3IgZWxlbWVudFxuICAgICAgY29uc3QgdXNlckVtYWlsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MTWV0YUVsZW1lbnQ+KCdtZXRhW25hbWU9XCJ1c2VyLWVtYWlsXCJdJyk/LmNvbnRlbnQgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXVzZXItZW1haWxdJyk/LmdldEF0dHJpYnV0ZSgnZGF0YS11c2VyLWVtYWlsJykgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgJ2RlbW9AZXhhbXBsZS5jb20nXG4gICAgICBwYXltZW50Q29udHJvbGxlci51c2VyRW1haWxWYWx1ZSA9IHVzZXJFbWFpbFxuICAgICAgcGF5bWVudENvbnRyb2xsZXIucGF5bWVudFVybFZhbHVlID0gcGF5bWVudFVybFxuICAgICAgcGF5bWVudENvbnRyb2xsZXIuc3VjY2Vzc1VybFZhbHVlID0gc3VjY2Vzc1VybFxuXG4gICAgICAvLyBTaG93IHBhc3N3b3JkIG1vZGFsXG4gICAgICBwYXltZW50Q29udHJvbGxlci5zaG93UGFzc3dvcmRNb2RhbCgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1BheW1lbnQgY29udHJvbGxlciBub3QgaW5pdGlhbGl6ZWQnKVxuICAgICAgYWxlcnQoJ1x1NjUyRlx1NEVEOFx1N0NGQlx1N0VERlx1NjcyQVx1NTIxRFx1NTlDQlx1NTMxNlx1RkYwQ1x1OEJGN1x1NTIzN1x1NjVCMFx1OTg3NVx1OTc2Mlx1OTFDRFx1OEJENScpXG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJyZWdpb25CdXR0b25cIiwgXCJyZWdpb25Db250ZW50XCIsIFwidGlja2V0VHlwZUJ1dHRvblwiLCBcInRpY2tldFR5cGVDb250ZW50XCJdXG5cbiAgZGVjbGFyZSByZWFkb25seSByZWdpb25CdXR0b25UYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgcmVnaW9uQ29udGVudFRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSB0aWNrZXRUeXBlQnV0dG9uVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IHRpY2tldFR5cGVDb250ZW50VGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1JlZ2lvbkJ1dHRvblRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1RpY2tldFR5cGVCdXR0b25UYXJnZXQ6IGJvb2xlYW5cblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiQWJyb2FkUmVnaW9uU2VsZWN0b3IgY29ubmVjdGVkXCIpXG4gIH1cblxuICBzZWxlY3RSZWdpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY2xpY2tlZEJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCByZWdpb24gPSBjbGlja2VkQnV0dG9uLmRhdGFzZXQucmVnaW9uXG5cbiAgICAvLyBVcGRhdGUgYnV0dG9uIHN0YXRlc1xuICAgIGlmICh0aGlzLmhhc1JlZ2lvbkJ1dHRvblRhcmdldCkge1xuICAgICAgdGhpcy5yZWdpb25CdXR0b25UYXJnZXRzLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcInRleHQteWVsbG93LTYwMFwiLCBcImZvbnQtYm9sZFwiLCBcImJvcmRlci1iLTJcIiwgXCJib3JkZXIteWVsbG93LTYwMFwiKVxuICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZChcInRleHQtZ3JheS01MDBcIilcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgY2xpY2tlZEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwidGV4dC1ncmF5LTUwMFwiKVxuICAgIGNsaWNrZWRCdXR0b24uY2xhc3NMaXN0LmFkZChcInRleHQteWVsbG93LTYwMFwiLCBcImZvbnQtYm9sZFwiLCBcImJvcmRlci1iLTJcIiwgXCJib3JkZXIteWVsbG93LTYwMFwiKVxuXG4gICAgLy8gVXBkYXRlIGNvbnRlbnQgdmlzaWJpbGl0eVxuICAgIHRoaXMucmVnaW9uQ29udGVudFRhcmdldHMuZm9yRWFjaCgoY29udGVudCkgPT4ge1xuICAgICAgaWYgKGNvbnRlbnQuZGF0YXNldC5yZWdpb24gPT09IHJlZ2lvbikge1xuICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBzZWxlY3RUaWNrZXRUeXBlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNsaWNrZWRCdXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgdGlja2V0VHlwZSA9IGNsaWNrZWRCdXR0b24uZGF0YXNldC50aWNrZXRUeXBlXG5cbiAgICAvLyBVcGRhdGUgYnV0dG9uIHN0YXRlc1xuICAgIGlmICh0aGlzLmhhc1RpY2tldFR5cGVCdXR0b25UYXJnZXQpIHtcbiAgICAgIHRoaXMudGlja2V0VHlwZUJ1dHRvblRhcmdldHMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiYmcteWVsbG93LTUwMFwiLCBcInRleHQtd2hpdGVcIilcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJiZy1ncmF5LTEwMFwiLCBcInRleHQtZ3JheS03MDBcIilcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgY2xpY2tlZEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiYmctZ3JheS0xMDBcIiwgXCJ0ZXh0LWdyYXktNzAwXCIpXG4gICAgY2xpY2tlZEJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiYmcteWVsbG93LTUwMFwiLCBcInRleHQtd2hpdGVcIilcblxuICAgIC8vIFVwZGF0ZSBjb250ZW50IHZpc2liaWxpdHlcbiAgICB0aGlzLnRpY2tldFR5cGVDb250ZW50VGFyZ2V0cy5mb3JFYWNoKChjb250ZW50KSA9PiB7XG4gICAgICBpZiAoY29udGVudC5kYXRhc2V0LnRpY2tldFR5cGUgPT09IHRpY2tldFR5cGUpIHtcbiAgICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgc3dhcFN0YXRpb25zKCk6IHZvaWQge1xuICAgIGNvbnN0IG9yaWdpblNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPVwib3JpZ2luXCJdJykgYXMgSFRNTFNlbGVjdEVsZW1lbnRcbiAgICBjb25zdCBkZXN0aW5hdGlvblNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPVwiZGVzdGluYXRpb25cIl0nKSBhcyBIVE1MU2VsZWN0RWxlbWVudFxuXG4gICAgaWYgKG9yaWdpblNlbGVjdCAmJiBkZXN0aW5hdGlvblNlbGVjdCkge1xuICAgICAgY29uc3QgdGVtcCA9IG9yaWdpblNlbGVjdC52YWx1ZVxuICAgICAgb3JpZ2luU2VsZWN0LnZhbHVlID0gZGVzdGluYXRpb25TZWxlY3QudmFsdWVcbiAgICAgIGRlc3RpbmF0aW9uU2VsZWN0LnZhbHVlID0gdGVtcFxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wibW9kYWxcIiwgXCJkYXRlQnV0dG9uXCJdXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgY3VycmVudERhdGU6IFN0cmluZ1xuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkYXRlQnV0dG9uVGFyZ2V0czogSFRNTEJ1dHRvbkVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IGN1cnJlbnREYXRlVmFsdWU6IHN0cmluZ1xuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJBYnJvYWREYXRlUGlja2VyIGNvbm5lY3RlZFwiKVxuICAgIFxuICAgIC8vIExpc3RlbiBmb3Igb3BlbiBkYXRlIHBpY2tlciBldmVudFxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdhYnJvYWQtdGlja2V0LXNlYXJjaDpvcGVuLWRhdGUtcGlja2VyJywgKCkgPT4ge1xuICAgICAgdGhpcy5vcGVuTW9kYWwoKVxuICAgIH0pXG4gICAgXG4gICAgLy8gVXBkYXRlIHBhc3QgZGF0ZXMgYmFzZWQgb24gY2xpZW50IHRpbWV6b25lXG4gICAgdGhpcy51cGRhdGVQYXN0RGF0ZXMoKVxuICB9XG5cbiAgb3Blbk1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJ1xuICB9XG5cbiAgY2xvc2VNb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJydcbiAgfVxuXG4gIHNlbGVjdERhdGUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGRhdGVTdHIgPSB0YXJnZXQuZGF0YXNldC5kYXRlXG5cbiAgICBpZiAoZGF0ZVN0cikge1xuICAgICAgLy8gQ2hlY2sgaWYgZGF0ZSBpcyBub3QgaW4gdGhlIHBhc3RcbiAgICAgIGNvbnN0IHNlbGVjdGVkRGF0ZSA9IG5ldyBEYXRlKGAke2RhdGVTdHJ9VDAwOjAwOjAwYClcbiAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxuICAgICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICAgIHNlbGVjdGVkRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICAgICAgXG4gICAgICBpZiAoc2VsZWN0ZWREYXRlIDwgdG9kYXkpIHtcbiAgICAgICAgcmV0dXJuIC8vIERvbid0IHNlbGVjdCBwYXN0IGRhdGVzXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEZpbmQgdGhlIGFicm9hZC10aWNrZXQtc2VhcmNoIGNvbnRyb2xsZXIgYW5kIGNhbGwgaXRzIHVwZGF0ZURhdGUgbWV0aG9kXG4gICAgICBjb25zdCBzZWFyY2hDb250cm9sbGVyID0gdGhpcy5hcHBsaWNhdGlvbi5nZXRDb250cm9sbGVyRm9yRWxlbWVudEFuZElkZW50aWZpZXIoXG4gICAgICAgIHRoaXMuZWxlbWVudCxcbiAgICAgICAgJ2Ficm9hZC10aWNrZXQtc2VhcmNoJ1xuICAgICAgKVxuICAgICAgXG4gICAgICBpZiAoc2VhcmNoQ29udHJvbGxlciAmJiAndXBkYXRlRGF0ZScgaW4gc2VhcmNoQ29udHJvbGxlcikge1xuICAgICAgICAoc2VhcmNoQ29udHJvbGxlciBhcyBhbnkpLnVwZGF0ZURhdGUoZGF0ZVN0cilcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGhpcy5jbG9zZU1vZGFsKClcbiAgICB9XG4gIH1cblxuICBvcGVuQ2FsZW5kYXIoKTogdm9pZCB7XG4gICAgdGhpcy5vcGVuTW9kYWwoKVxuICB9XG4gIFxuICAvLyBVcGRhdGUgcGFzdCBkYXRlcyB0byBiZSBkaXNhYmxlZFxuICBwcml2YXRlIHVwZGF0ZVBhc3REYXRlcygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuZGF0ZUJ1dHRvblRhcmdldHMpIHJldHVyblxuICAgIFxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxuICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgXG4gICAgdGhpcy5kYXRlQnV0dG9uVGFyZ2V0cy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICBjb25zdCBkYXRlU3RyID0gYnV0dG9uLmRhdGFzZXQuZGF0ZVxuICAgICAgaWYgKCFkYXRlU3RyKSByZXR1cm5cbiAgICAgIFxuICAgICAgY29uc3QgYnV0dG9uRGF0ZSA9IG5ldyBEYXRlKGAke2RhdGVTdHJ9VDAwOjAwOjAwYClcbiAgICAgIGJ1dHRvbkRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICAgIFxuICAgICAgaWYgKGJ1dHRvbkRhdGUgPCB0b2RheSkge1xuICAgICAgICBidXR0b24uZGlzYWJsZWQgPSB0cnVlXG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LTQwJywgJ2N1cnNvci1ub3QtYWxsb3dlZCcpXG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdob3ZlcjpiZy1ibHVlLTUwJylcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJ0eXBlXCJdXG5cbiAgZGVjbGFyZSByZWFkb25seSB0eXBlVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1R5cGVUYXJnZXQ6IGJvb2xlYW5cblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiQWJyb2FkUGFzc2VuZ2VyU2VsZWN0b3IgY29ubmVjdGVkXCIpXG4gIH1cblxuICBzZWxlY3QoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY2xpY2tlZEVsZW1lbnQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3Qgc2VsZWN0ZWRUeXBlID0gY2xpY2tlZEVsZW1lbnQuZGF0YXNldC5hYnJvYWRQYXNzZW5nZXJTZWxlY3RvclR5cGVQYXJhbVxuXG4gICAgLy8gUmVtb3ZlIHNlbGVjdGVkIHN0YXRlIGZyb20gYWxsIHR5cGUgZWxlbWVudHNcbiAgICBpZiAodGhpcy5oYXNUeXBlVGFyZ2V0KSB7XG4gICAgICB0aGlzLnR5cGVUYXJnZXRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNGRkZCRjBdXCIsIFwiYm9yZGVyXCIsIFwiYm9yZGVyLVsjRkZFNUI1XVwiKVxuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJiZy1ncmF5LTEwMFwiKVxuICAgICAgICBcbiAgICAgICAgLy8gUmVtb3ZlIGNoZWNrbWFya1xuICAgICAgICBjb25zdCBjaGVja21hcmsgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWJzb2x1dGVcIilcbiAgICAgICAgaWYgKGNoZWNrbWFyaykge1xuICAgICAgICAgIGNoZWNrbWFyay5yZW1vdmUoKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIEFkZCBzZWxlY3RlZCBzdGF0ZSB0byBjbGlja2VkIGVsZW1lbnRcbiAgICBjbGlja2VkRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctZ3JheS0xMDBcIilcbiAgICBjbGlja2VkRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiYmctWyNGRkZCRjBdXCIsIFwiYm9yZGVyXCIsIFwiYm9yZGVyLVsjRkZFNUI1XVwiKVxuICAgIFxuICAgIC8vIEFkZCBjaGVja21hcmtcbiAgICBjb25zdCBjaGVja21hcmtIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cImFic29sdXRlIGJvdHRvbS0wIHJpZ2h0LTAgdy0zIGgtMyBiZy1bI0ZGQ0MwMF0gcm91bmRlZC10bC1sZyByb3VuZGVkLWJyLWxnIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgIDxzdmcgY2xhc3M9XCJ3LTIgaC0yIHRleHQtd2hpdGVcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cbiAgICAgICAgICA8cGF0aCBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBzdHJva2Utd2lkdGg9XCI0XCIgZD1cIk01IDEzbDQgNEwxOSA3XCI+PC9wYXRoPlxuICAgICAgICA8L3N2Zz5cbiAgICAgIDwvZGl2PlxuICAgIGBcbiAgICBjbGlja2VkRWxlbWVudC5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgY2hlY2ttYXJrSFRNTClcblxuICAgIC8vIFVwZGF0ZSB0aGUgVVJMIHBhcmFtZXRlcnMgdG8gaW5jbHVkZSB0aGUgc2VsZWN0ZWQgcGFzc2VuZ2VyIHR5cGVcbiAgICBpZiAoc2VsZWN0ZWRUeXBlKSB7XG4gICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKVxuICAgICAgY29uc3QgdGlja2V0SWQgPSB1cmwuc2VhcmNoUGFyYW1zLmdldChcImFicm9hZF90aWNrZXRfaWRcIilcbiAgICAgIGNvbnN0IHNlYXRDYXRlZ29yeSA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwic2VhdF9jYXRlZ29yeVwiKVxuICAgICAgXG4gICAgICBpZiAodGlja2V0SWQgJiYgc2VhdENhdGVnb3J5KSB7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgYm9va2luZyBidXR0b24gbGlua3NcbiAgICAgICAgY29uc3QgYm9va2luZ0J1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhW2hyZWYqPVwibmV3X2Ficm9hZF90aWNrZXRfb3JkZXJcIl0nKVxuICAgICAgICBib29raW5nQnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgICAgICBjb25zdCBocmVmID0gYnV0dG9uLmdldEF0dHJpYnV0ZShcImhyZWZcIilcbiAgICAgICAgICBpZiAoaHJlZikge1xuICAgICAgICAgICAgY29uc3QgbmV3VXJsID0gbmV3IFVSTChocmVmLCB3aW5kb3cubG9jYXRpb24ub3JpZ2luKVxuICAgICAgICAgICAgbmV3VXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJwYXNzZW5nZXJfdHlwZVwiLCBzZWxlY3RlZFR5cGUpXG4gICAgICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBuZXdVcmwudG9TdHJpbmcoKSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJtb2RhbFwiLCBcIm5hbWVJbnB1dFwiLCBcInBob25lSW5wdXRcIiwgXCJlbWFpbElucHV0XCJdXG5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBuYW1lSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBwaG9uZUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZW1haWxJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc05hbWVJbnB1dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1Bob25lSW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNFbWFpbElucHV0VGFyZ2V0OiBib29sZWFuXG5cbiAgYXN5bmMgc3VibWl0T3JkZXIoZXZlbnQ6IEV2ZW50KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIFxuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBjb25zdCBhYnJvYWRUaWNrZXRJZCA9IGJ1dHRvbi5kYXRhc2V0LmFicm9hZFRpY2tldElkXG4gICAgY29uc3QgdG90YWxQcmljZSA9IGJ1dHRvbi5kYXRhc2V0LnRvdGFsUHJpY2VcbiAgICBcbiAgICAvLyBWYWxpZGF0ZSBmb3JtIGlucHV0c1xuICAgIGlmICghdGhpcy52YWxpZGF0ZUZvcm0oKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIEdldCBmb3JtIGRhdGEgZnJvbSBpbnB1dCBmaWVsZHNcbiAgICBjb25zdCBwYXNzZW5nZXJUeXBlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc2VuZ2VyX3R5cGUnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3Qgc2VhdENhdGVnb3J5SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhdF9jYXRlZ29yeScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBub3Rlc0lucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25vdGVzJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIFxuICAgIGNvbnN0IGZvcm1EYXRhID0ge1xuICAgICAgYWJyb2FkX3RpY2tldF9vcmRlcjoge1xuICAgICAgICBhYnJvYWRfdGlja2V0X2lkOiBhYnJvYWRUaWNrZXRJZCxcbiAgICAgICAgcGFzc2VuZ2VyX25hbWU6IHRoaXMubmFtZUlucHV0VGFyZ2V0LnZhbHVlLFxuICAgICAgICBjb250YWN0X3Bob25lOiB0aGlzLnBob25lSW5wdXRUYXJnZXQudmFsdWUsXG4gICAgICAgIGNvbnRhY3RfZW1haWw6IHRoaXMuZW1haWxJbnB1dFRhcmdldC52YWx1ZSxcbiAgICAgICAgcGFzc2VuZ2VyX3R5cGU6IHBhc3NlbmdlclR5cGVJbnB1dD8udmFsdWUgfHwgJycsXG4gICAgICAgIHNlYXRfY2F0ZWdvcnk6IHNlYXRDYXRlZ29yeUlucHV0Py52YWx1ZSB8fCAnJyxcbiAgICAgICAgdG90YWxfcHJpY2U6IHRvdGFsUHJpY2UsXG4gICAgICAgIG5vdGVzOiBub3Rlc0lucHV0Py52YWx1ZSB8fCAnJ1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBEaXNhYmxlIGJ1dHRvbiBkdXJpbmcgc3VibWlzc2lvblxuICAgIGJ1dHRvbi5kaXNhYmxlZCA9IHRydWVcbiAgICBidXR0b24udGV4dENvbnRlbnQgPSAnXHU1MjFCXHU1RUZBXHU0RTJELi4uJ1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjc3JmVG9rZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxNZXRhRWxlbWVudD4oJ21ldGFbbmFtZT1cImNzcmYtdG9rZW5cIl0nKT8uY29udGVudCB8fCAnJ1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2Ficm9hZF90aWNrZXRfb3JkZXJzLmpzb24nLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICdYLUNTUkYtVG9rZW4nOiBjc3JmVG9rZW5cbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZm9ybURhdGEpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5vayAmJiBkYXRhLnN1Y2Nlc3MpIHtcbiAgICAgICAgLy8gT3JkZXIgY3JlYXRlZCBzdWNjZXNzZnVsbHksIHRyaWdnZXIgcGF5bWVudCBtb2RhbFxuICAgICAgICB0aGlzLnRyaWdnZXJQYXltZW50TW9kYWwodG90YWxQcmljZSB8fCAnMCcsIGRhdGEucGF5bWVudF91cmwsIGRhdGEuc3VjY2Vzc191cmwpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YS5tZXNzYWdlIHx8ICdcdTUyMUJcdTVFRkFcdThCQTJcdTUzNTVcdTU5MzFcdThEMjUnKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBvcmRlcjonLCBlcnJvcilcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdcdTUyMUJcdTVFRkFcdThCQTJcdTUzNTVcdTU5MzFcdThEMjVcdUZGMENcdThCRjdcdTkxQ0RcdThCRDUnXG4gICAgICBhbGVydChtZXNzYWdlKVxuICAgICAgYnV0dG9uLmRpc2FibGVkID0gZmFsc2VcbiAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdcdTdBQ0JcdTUzNzNcdTk4ODRcdThCQTInXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB2YWxpZGF0ZUZvcm0oKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLmhhc05hbWVJbnB1dFRhcmdldCB8fCAhdGhpcy5uYW1lSW5wdXRUYXJnZXQudmFsdWUudHJpbSgpKSB7XG4gICAgICBhbGVydCgnXHU4QkY3XHU4RjkzXHU1MTY1XHU1OUQzXHU1NDBEJylcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBcbiAgICBpZiAoIXRoaXMuaGFzUGhvbmVJbnB1dFRhcmdldCB8fCAhdGhpcy5waG9uZUlucHV0VGFyZ2V0LnZhbHVlLnRyaW0oKSkge1xuICAgICAgYWxlcnQoJ1x1OEJGN1x1OEY5M1x1NTE2NVx1NjI0Qlx1NjczQVx1NTNGNycpXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgXG4gICAgaWYgKCF0aGlzLmhhc0VtYWlsSW5wdXRUYXJnZXQgfHwgIXRoaXMuZW1haWxJbnB1dFRhcmdldC52YWx1ZS50cmltKCkpIHtcbiAgICAgIGFsZXJ0KCdcdThCRjdcdThGOTNcdTUxNjVcdTkwQUVcdTdCQjEnKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIFxuICAgIC8vIEVtYWlsIGZvcm1hdCB2YWxpZGF0aW9uXG4gICAgY29uc3QgZW1haWxSZWdleCA9IC9eW15cXHNAXStAW15cXHNAXStcXC5bXlxcc0BdKyQvXG4gICAgaWYgKCFlbWFpbFJlZ2V4LnRlc3QodGhpcy5lbWFpbElucHV0VGFyZ2V0LnZhbHVlKSkge1xuICAgICAgYWxlcnQoJ1x1OEJGN1x1OEY5M1x1NTE2NVx1NjcwOVx1NjU0OFx1NzY4NFx1OTBBRVx1N0JCMVx1NTczMFx1NTc0MCcpXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHByaXZhdGUgdHJpZ2dlclBheW1lbnRNb2RhbChhbW91bnQ6IHN0cmluZywgcGF5bWVudFVybDogc3RyaW5nLCBzdWNjZXNzVXJsOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBwYXltZW50RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNvbnRyb2xsZXIqPVwicGF5bWVudC1jb25maXJtYXRpb25cIl0nKSBhcyBIVE1MRWxlbWVudFxuICAgIFxuICAgIGlmICghcGF5bWVudEVsZW1lbnQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1BheW1lbnQgY29uZmlybWF0aW9uIGNvbnRyb2xsZXIgbm90IGZvdW5kJylcbiAgICAgIGFsZXJ0KCdcdTY1MkZcdTRFRDhcdTdDRkJcdTdFREZcdTY3MkFcdTUyQTBcdThGN0RcdUZGMENcdThCRjdcdTUyMzdcdTY1QjBcdTk4NzVcdTk3NjJcdTkxQ0RcdThCRDUnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGFwcCA9ICh3aW5kb3cgYXMgYW55KS5TdGltdWx1c1xuICAgIGlmICghYXBwKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdGltdWx1cyBub3QgZm91bmQnKVxuICAgICAgYWxlcnQoJ1x1N0NGQlx1N0VERlx1OTUxOVx1OEJFRlx1RkYwQ1x1OEJGN1x1NTIzN1x1NjVCMFx1OTg3NVx1OTc2Mlx1OTFDRFx1OEJENScpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgY29uc3QgcGF5bWVudENvbnRyb2xsZXIgPSBhcHAuZ2V0Q29udHJvbGxlckZvckVsZW1lbnRBbmRJZGVudGlmaWVyKHBheW1lbnRFbGVtZW50LCAncGF5bWVudC1jb25maXJtYXRpb24nKVxuICAgIFxuICAgIGlmIChwYXltZW50Q29udHJvbGxlcikge1xuICAgICAgcGF5bWVudENvbnRyb2xsZXIuYW1vdW50VmFsdWUgPSBhbW91bnRcbiAgICAgIHBheW1lbnRDb250cm9sbGVyLnVzZXJFbWFpbFZhbHVlID0gdGhpcy5lbWFpbElucHV0VGFyZ2V0LnZhbHVlXG4gICAgICBwYXltZW50Q29udHJvbGxlci5wYXltZW50VXJsVmFsdWUgPSBwYXltZW50VXJsXG4gICAgICBwYXltZW50Q29udHJvbGxlci5zdWNjZXNzVXJsVmFsdWUgPSBzdWNjZXNzVXJsXG4gICAgICBcbiAgICAgIHBheW1lbnRDb250cm9sbGVyLnNob3dQYXNzd29yZE1vZGFsKClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcignUGF5bWVudCBjb250cm9sbGVyIG5vdCBpbml0aWFsaXplZCcpXG4gICAgICBhbGVydCgnXHU2NTJGXHU0RUQ4XHU3Q0ZCXHU3RURGXHU2NzJBXHU1MjFEXHU1OUNCXHU1MzE2XHVGRjBDXHU4QkY3XHU1MjM3XHU2NUIwXHU5ODc1XHU5NzYyXHU5MUNEXHU4QkQ1JylcbiAgICB9XG4gIH1cblxuICBvcGVuUGFzc2VuZ2VyU2VsZWN0b3IoKTogdm9pZCB7XG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICB9XG5cbiAgY2xvc2VQYXNzZW5nZXJTZWxlY3RvcigpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gIH1cblxuICBzZWxlY3RQYXNzZW5nZXIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgZWxlbWVudCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBuYW1lID0gZWxlbWVudC5kYXRhc2V0LmFicm9hZE9yZGVyRm9ybU5hbWVQYXJhbSB8fCAnJ1xuICAgIGNvbnN0IHBob25lID0gZWxlbWVudC5kYXRhc2V0LmFicm9hZE9yZGVyRm9ybVBob25lUGFyYW0gfHwgJydcbiAgICBjb25zdCBlbWFpbCA9IGVsZW1lbnQuZGF0YXNldC5hYnJvYWRPcmRlckZvcm1FbWFpbFBhcmFtIHx8ICcnXG4gICAgXG4gICAgaWYgKHRoaXMuaGFzTmFtZUlucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLm5hbWVJbnB1dFRhcmdldC52YWx1ZSA9IG5hbWVcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuaGFzUGhvbmVJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5waG9uZUlucHV0VGFyZ2V0LnZhbHVlID0gcGhvbmVcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuaGFzRW1haWxJbnB1dFRhcmdldCAmJiBlbWFpbCkge1xuICAgICAgdGhpcy5lbWFpbElucHV0VGFyZ2V0LnZhbHVlID0gZW1haWxcbiAgICB9XG4gICAgXG4gICAgdGhpcy5jbG9zZVBhc3NlbmdlclNlbGVjdG9yKClcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuLy8gU3RhdGlvbiBkYXRhIGludGVyZmFjZVxuaW50ZXJmYWNlIFN0YXRpb24ge1xuICBuYW1lOiBzdHJpbmdcbiAgbmFtZUVuOiBzdHJpbmdcbiAgY2l0eTogc3RyaW5nXG59XG5cbi8vIFN0YXRpb24gc2VsZWN0aW9uIGNvbnRyb2xsZXIgZm9yIGFicm9hZCB0aWNrZXRzXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJmb3JtXCIsXG4gICAgXCJyZWdpb25JbnB1dFwiLFxuICAgIFwib3JpZ2luSW5wdXRcIixcbiAgICBcImRlc3RpbmF0aW9uSW5wdXRcIixcbiAgICBcIm9yaWdpblRleHRcIixcbiAgICBcImRlc3RpbmF0aW9uVGV4dFwiLFxuICAgIFwiZGF0ZUlucHV0XCIsXG4gICAgXCJkYXRlVGV4dFwiLFxuICAgIFwic3RhdGlvbk1vZGFsXCIsXG4gICAgXCJzdGF0aW9uTGlzdFwiLFxuICAgIFwic2VhcmNoSW5wdXRcIlxuICBdXG5cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBjdXJyZW50RGF0ZTogU3RyaW5nXG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IGZvcm1UYXJnZXQ6IEhUTUxGb3JtRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHJlZ2lvbklucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgb3JpZ2luSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkZXN0aW5hdGlvbklucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgb3JpZ2luVGV4dFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkZXN0aW5hdGlvblRleHRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGF0ZUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGF0ZVRleHRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc3RhdGlvbk1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHN0YXRpb25MaXN0VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlYXJjaElucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgY3VycmVudERhdGVWYWx1ZTogc3RyaW5nXG5cbiAgcHJpdmF0ZSBjdXJyZW50U2VsZWN0aW9uVHlwZTogJ29yaWdpbicgfCAnZGVzdGluYXRpb24nID0gJ29yaWdpbidcbiAgcHJpdmF0ZSBjdXJyZW50UmVnaW9uOiBzdHJpbmcgPSAnamFwYW4nXG5cbiAgLy8gXHU2NUU1XHU2NzJDXHU3QUQ5XHU3MEI5XHU2NTcwXHU2MzZFXG4gIHByaXZhdGUgamFwYW5TdGF0aW9uczogUmVjb3JkPHN0cmluZywgU3RhdGlvbltdPiA9IHtcbiAgICAnXHU0RTFDXHU0RUFDJzogW1xuICAgICAgeyBuYW1lOiAnXHU0RTFDXHU0RUFDXHU3QUQ5JywgbmFtZUVuOiAnVG9reW8gU3RhdGlvbicsIGNpdHk6ICdcdTRFMUNcdTRFQUMnIH0sXG4gICAgICB7IG5hbWU6ICdcdTY1QjBcdTVCQkZcdTdBRDknLCBuYW1lRW46ICdTaGluanVrdSBTdGF0aW9uJywgY2l0eTogJ1x1NEUxQ1x1NEVBQycgfSxcbiAgICAgIHsgbmFtZTogJ1x1NkRBOVx1OEMzN1x1N0FEOScsIG5hbWVFbjogJ1NoaWJ1eWEgU3RhdGlvbicsIGNpdHk6ICdcdTRFMUNcdTRFQUMnIH0sXG4gICAgICB7IG5hbWU6ICdcdTZDNjBcdTg4OEJcdTdBRDknLCBuYW1lRW46ICdJa2VidWt1cm8gU3RhdGlvbicsIGNpdHk6ICdcdTRFMUNcdTRFQUMnIH0sXG4gICAgICB7IG5hbWU6ICdcdTU0QzFcdTVERERcdTdBRDknLCBuYW1lRW46ICdTaGluYWdhd2EgU3RhdGlvbicsIGNpdHk6ICdcdTRFMUNcdTRFQUMnIH1cbiAgICBdLFxuICAgICdcdTU5MjdcdTk2MkEnOiBbXG4gICAgICB7IG5hbWU6ICdcdTY1QjBcdTU5MjdcdTk2MkFcdTdBRDknLCBuYW1lRW46ICdTaGluLU9zYWthIFN0YXRpb24nLCBjaXR5OiAnXHU1OTI3XHU5NjJBJyB9LFxuICAgICAgeyBuYW1lOiAnXHU1OTI3XHU5NjJBXHU3QUQ5JywgbmFtZUVuOiAnT3Nha2EgU3RhdGlvbicsIGNpdHk6ICdcdTU5MjdcdTk2MkEnIH0sXG4gICAgICB7IG5hbWU6ICdcdTk2QkVcdTZDRTJcdTdBRDknLCBuYW1lRW46ICdOYW1iYSBTdGF0aW9uJywgY2l0eTogJ1x1NTkyN1x1OTYyQScgfSxcbiAgICAgIHsgbmFtZTogJ1x1NTkyOVx1NzM4Qlx1NUJGQVx1N0FEOScsIG5hbWVFbjogJ1Rlbm5vamkgU3RhdGlvbicsIGNpdHk6ICdcdTU5MjdcdTk2MkEnIH1cbiAgICBdLFxuICAgICdcdTRFQUNcdTkwRkQnOiBbXG4gICAgICB7IG5hbWU6ICdcdTRFQUNcdTkwRkRcdTdBRDknLCBuYW1lRW46ICdLeW90byBTdGF0aW9uJywgY2l0eTogJ1x1NEVBQ1x1OTBGRCcgfSxcbiAgICAgIHsgbmFtZTogJ1x1NTRDMVx1NURERFx1N0FEOScsIG5hbWVFbjogJ1NoaW5hZ2F3YSBTdGF0aW9uJywgY2l0eTogJ1x1NEVBQ1x1OTBGRCcgfVxuICAgIF0sXG4gICAgJ1x1NTQwRFx1NTNFNFx1NUM0Qic6IFtcbiAgICAgIHsgbmFtZTogJ1x1NTQwRFx1NTNFNFx1NUM0Qlx1N0FEOScsIG5hbWVFbjogJ05hZ295YSBTdGF0aW9uJywgY2l0eTogJ1x1NTQwRFx1NTNFNFx1NUM0QicgfVxuICAgIF0sXG4gICAgJ1x1NEVEOVx1NTNGMCc6IFtcbiAgICAgIHsgbmFtZTogJ1x1NEVEOVx1NTNGMFx1N0FEOScsIG5hbWVFbjogJ1NlbmRhaSBTdGF0aW9uJywgY2l0eTogJ1x1NEVEOVx1NTNGMCcgfVxuICAgIF0sXG4gICAgJ1x1OTc1Mlx1NjhFRSc6IFtcbiAgICAgIHsgbmFtZTogJ1x1OTc1Mlx1NjhFRVx1N0FEOScsIG5hbWVFbjogJ0FvbW9yaSBTdGF0aW9uJywgY2l0eTogJ1x1OTc1Mlx1NjhFRScgfVxuICAgIF0sXG4gICAgJ1x1NjVCMFx1NkY1Ric6IFtcbiAgICAgIHsgbmFtZTogJ1x1NjVCMFx1NkY1Rlx1N0FEOScsIG5hbWVFbjogJ05paWdhdGEgU3RhdGlvbicsIGNpdHk6ICdcdTY1QjBcdTZGNUYnIH1cbiAgICBdLFxuICAgICdcdTVFN0ZcdTVDOUInOiBbXG4gICAgICB7IG5hbWU6ICdcdTVFN0ZcdTVDOUJcdTdBRDknLCBuYW1lRW46ICdIaXJvc2hpbWEgU3RhdGlvbicsIGNpdHk6ICdcdTVFN0ZcdTVDOUInIH1cbiAgICBdLFxuICAgICdcdTc5OEZcdTUxODgnOiBbXG4gICAgICB7IG5hbWU6ICdcdTUzNUFcdTU5MUFcdTdBRDknLCBuYW1lRW46ICdIYWthdGEgU3RhdGlvbicsIGNpdHk6ICdcdTc5OEZcdTUxODgnIH1cbiAgICBdLFxuICAgICdcdTlFN0ZcdTUxM0ZcdTVDOUInOiBbXG4gICAgICB7IG5hbWU6ICdcdTlFN0ZcdTUxM0ZcdTVDOUJcdTRFMkRcdTU5MkVcdTdBRDknLCBuYW1lRW46ICdLYWdvc2hpbWEtQ2h1byBTdGF0aW9uJywgY2l0eTogJ1x1OUU3Rlx1NTEzRlx1NUM5QicgfVxuICAgIF0sXG4gICAgJ1x1NTMxN1x1NkQ3N1x1OTA1Myc6IFtcbiAgICAgIHsgbmFtZTogJ1x1NjcyRFx1NUU0Q1x1N0FEOScsIG5hbWVFbjogJ1NhcHBvcm8gU3RhdGlvbicsIGNpdHk6ICdcdTUzMTdcdTZENzdcdTkwNTMnIH1cbiAgICBdXG4gIH1cblxuICAvLyBcdTZCMjdcdTZEMzJcdTdBRDlcdTcwQjlcdTY1NzBcdTYzNkVcbiAgcHJpdmF0ZSBldXJvcGVTdGF0aW9uczogUmVjb3JkPHN0cmluZywgU3RhdGlvbltdPiA9IHtcbiAgICAnXHU2Q0Q1XHU1NkZEJzogW1xuICAgICAgeyBuYW1lOiAnXHU1REY0XHU5RUNFXHU1MzE3XHU3QUQ5JywgbmFtZUVuOiAnUGFyaXMgTm9yZCcsIGNpdHk6ICdcdTZDRDVcdTU2RkQnIH0sXG4gICAgICB7IG5hbWU6ICdcdTVERjRcdTlFQ0VcdTkxQ0NcdTY2MDJcdTdBRDknLCBuYW1lRW46ICdQYXJpcyBHYXJlIGRlIEx5b24nLCBjaXR5OiAnXHU2Q0Q1XHU1NkZEJyB9LFxuICAgICAgeyBuYW1lOiAnXHU5MUNDXHU2NjAyXHU3QUQ5JywgbmFtZUVuOiAnTHlvbiBTdGF0aW9uJywgY2l0eTogJ1x1NkNENVx1NTZGRCcgfSxcbiAgICAgIHsgbmFtZTogJ1x1OUE2Q1x1OEQ1Qlx1N0FEOScsIG5hbWVFbjogJ01hcnNlaWxsZSBTdGF0aW9uJywgY2l0eTogJ1x1NkNENVx1NTZGRCcgfVxuICAgIF0sXG4gICAgJ1x1ODM3N1x1NTE3MCc6IFtcbiAgICAgIHsgbmFtZTogJ1x1OTYzRlx1NTlDNlx1NjVBRlx1NzI3OVx1NEUzOVx1NEUyRFx1NTkyRVx1OEY2Nlx1N0FEOScsIG5hbWVFbjogJ0Ftc3RlcmRhbSBDZW50cmFhbCcsIGNpdHk6ICdcdTgzNzdcdTUxNzAnIH0sXG4gICAgICB7IG5hbWU6ICdcdTlFN0ZcdTcyNzlcdTRFMzlcdTRFMkRcdTU5MkVcdThGNjZcdTdBRDknLCBuYW1lRW46ICdSb3R0ZXJkYW0gQ2VudHJhYWwnLCBjaXR5OiAnXHU4Mzc3XHU1MTcwJyB9XG4gICAgXSxcbiAgICAnXHU1RkI3XHU1NkZEJzogW1xuICAgICAgeyBuYW1lOiAnXHU2N0NGXHU2Nzk3XHU0RTJEXHU1OTJFXHU4RjY2XHU3QUQ5JywgbmFtZUVuOiAnQmVybGluIEhhdXB0YmFobmhvZicsIGNpdHk6ICdcdTVGQjdcdTU2RkQnIH0sXG4gICAgICB7IG5hbWU6ICdcdTYxNTVcdTVDM0NcdTlFRDFcdTRFMkRcdTU5MkVcdThGNjZcdTdBRDknLCBuYW1lRW46ICdNXHUwMEZDbmNoZW4gSGF1cHRiYWhuaG9mJywgY2l0eTogJ1x1NUZCN1x1NTZGRCcgfSxcbiAgICAgIHsgbmFtZTogJ1x1NkNENVx1NTE3MFx1NTE0Qlx1Nzk4Rlx1NEUyRFx1NTkyRVx1OEY2Nlx1N0FEOScsIG5hbWVFbjogJ0ZyYW5rZnVydCBIYXVwdGJhaG5ob2YnLCBjaXR5OiAnXHU1RkI3XHU1NkZEJyB9XG4gICAgXSxcbiAgICAnXHU2MTBGXHU1OTI3XHU1MjI5JzogW1xuICAgICAgeyBuYW1lOiAnXHU3RjU3XHU5QTZDXHU3Mjc5XHU3QzczXHU1QzNDXHU3QUQ5JywgbmFtZUVuOiAnUm9tYSBUZXJtaW5pJywgY2l0eTogJ1x1NjEwRlx1NTkyN1x1NTIyOScgfSxcbiAgICAgIHsgbmFtZTogJ1x1N0M3M1x1NTE3MFx1NEUyRFx1NTkyRVx1OEY2Nlx1N0FEOScsIG5hbWVFbjogJ01pbGFubyBDZW50cmFsZScsIGNpdHk6ICdcdTYxMEZcdTU5MjdcdTUyMjknIH0sXG4gICAgICB7IG5hbWU6ICdcdTRGNUJcdTdGNTdcdTRGMjZcdTg0MjhcdTU3MjNcdTZCQ0RcdTczOUJcdTUyMjlcdTRFOUFcdThGNjZcdTdBRDknLCBuYW1lRW46ICdGaXJlbnplIFNhbnRhIE1hcmlhIE5vdmVsbGEnLCBjaXR5OiAnXHU2MTBGXHU1OTI3XHU1MjI5JyB9XG4gICAgXSxcbiAgICAnXHU4OTdGXHU3M0VEXHU3MjU5JzogW1xuICAgICAgeyBuYW1lOiAnXHU5QTZDXHU1RkI3XHU5MUNDXHU5NjNGXHU2MjU4XHU2N0U1XHU3QUQ5JywgbmFtZUVuOiAnTWFkcmlkIEF0b2NoYScsIGNpdHk6ICdcdTg5N0ZcdTczRURcdTcyNTknIH0sXG4gICAgICB7IG5hbWU6ICdcdTVERjRcdTU4NUVcdTdGNTdcdTkwQTNcdTY4NTFcdTY1QUZcdTdBRDknLCBuYW1lRW46ICdCYXJjZWxvbmEgU2FudHMnLCBjaXR5OiAnXHU4OTdGXHU3M0VEXHU3MjU5JyB9XG4gICAgXVxuICB9XG5cbiAgLy8gXHU3MEVEXHU5NUU4XHU3RUJGXHU4REVGXG4gIHByaXZhdGUgcG9wdWxhclJvdXRlcyA9IHtcbiAgICBqYXBhbjogW1xuICAgICAgeyBvcmlnaW46ICdcdTRFMUNcdTRFQUNcdTdBRDknLCBkZXN0aW5hdGlvbjogJ1x1NEVBQ1x1OTBGRFx1N0FEOScgfSxcbiAgICAgIHsgb3JpZ2luOiAnXHU0RTFDXHU0RUFDXHU3QUQ5JywgZGVzdGluYXRpb246ICdcdTY1QjBcdTU5MjdcdTk2MkFcdTdBRDknIH1cbiAgICBdLFxuICAgIGV1cm9wZTogW1xuICAgICAgeyBvcmlnaW46ICdcdTVERjRcdTlFQ0VcdTUzMTdcdTdBRDknLCBkZXN0aW5hdGlvbjogJ1x1OTYzRlx1NTlDNlx1NjVBRlx1NzI3OVx1NEUzOVx1NEUyRFx1NTkyRVx1OEY2Nlx1N0FEOScgfSxcbiAgICAgIHsgb3JpZ2luOiAnXHU1REY0XHU5RUNFXHU5MUNDXHU2NjAyXHU3QUQ5JywgZGVzdGluYXRpb246ICdcdTdGNTdcdTlBNkNcdTcyNzlcdTdDNzNcdTVDM0NcdTdBRDknIH1cbiAgICBdXG4gIH1cblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIHRoaXMuY3VycmVudFJlZ2lvbiA9IHRoaXMucmVnaW9uSW5wdXRUYXJnZXQudmFsdWVcbiAgICBjb25zb2xlLmxvZygnQWJyb2FkIHRpY2tldCBzZWFyY2ggY29udHJvbGxlciBjb25uZWN0ZWQnKVxuICB9XG5cbiAgc2VsZWN0UmVnaW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCByZWdpb24gPSBidXR0b24uZGF0YXNldC5hYnJvYWRUaWNrZXRTZWFyY2hSZWdpb25QYXJhbVxuICAgIFxuICAgIGlmIChyZWdpb24gJiYgcmVnaW9uICE9PSB0aGlzLmN1cnJlbnRSZWdpb24pIHtcbiAgICAgIC8vIFVzZSBUdXJiby52aXNpdCB0byByZWxvYWQgdGhlIHBhZ2Ugd2l0aCBuZXcgcmVnaW9uIHBhcmFtZXRlclxuICAgICAgLy8gVGhpcyBrZWVwcyB1cyBvbiB0aGUgaW5kZXggcGFnZSBpbnN0ZWFkIG9mIG5hdmlnYXRpbmcgdG8gc2VhcmNoXG4gICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKVxuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3JlZ2lvbicsIHJlZ2lvbilcbiAgICAgIHdpbmRvdy5UdXJiby52aXNpdCh1cmwudG9TdHJpbmcoKSlcbiAgICB9XG4gIH1cblxuICBzZWxlY3RUaWNrZXRUeXBlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50XG4gICAgY29uc3QgdGlja2V0VHlwZSA9IGJ1dHRvbi5kYXRhc2V0LmFicm9hZFRpY2tldFNlYXJjaFRpY2tldFR5cGVQYXJhbVxuICAgIFxuICAgIC8vIFVwZGF0ZSBidXR0b24gc3R5bGVzXG4gICAgY29uc3QgYWxsQnV0dG9ucyA9IGJ1dHRvbi5wYXJlbnRFbGVtZW50Py5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKSB8fCBbXVxuICAgIGFsbEJ1dHRvbnMuZm9yRWFjaChidG4gPT4ge1xuICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLXdoaXRlJywgJ3NoYWRvdy1zbScsICdmb250LWJvbGQnKVxuICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ2ZvbnQtbWVkaXVtJywgJ3RleHQtZ3JheS01MDAnKVxuICAgIH0pXG4gICAgXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2ZvbnQtbWVkaXVtJywgJ3RleHQtZ3JheS01MDAnKVxuICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdiZy13aGl0ZScsICdzaGFkb3ctc20nLCAnZm9udC1ib2xkJylcbiAgICBcbiAgICAvLyBUT0RPOiBIYW5kbGUgdGlja2V0IHR5cGUgY2hhbmdlICh0cmFpbiB2cyBwYXNzKVxuICAgIGNvbnNvbGUubG9nKCdTZWxlY3RlZCB0aWNrZXQgdHlwZTonLCB0aWNrZXRUeXBlKVxuICB9XG5cbiAgc2VsZWN0T3JpZ2luKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICB0aGlzLmN1cnJlbnRTZWxlY3Rpb25UeXBlID0gJ29yaWdpbidcbiAgICB0aGlzLm9wZW5TdGF0aW9uTW9kYWwoKVxuICB9XG5cbiAgc2VsZWN0RGVzdGluYXRpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIHRoaXMuY3VycmVudFNlbGVjdGlvblR5cGUgPSAnZGVzdGluYXRpb24nXG4gICAgdGhpcy5vcGVuU3RhdGlvbk1vZGFsKClcbiAgfVxuXG4gIHN3YXBTdGF0aW9ucyhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgXG4gICAgY29uc3Qgb3JpZ2luVmFsdWUgPSB0aGlzLm9yaWdpbklucHV0VGFyZ2V0LnZhbHVlXG4gICAgY29uc3QgZGVzdGluYXRpb25WYWx1ZSA9IHRoaXMuZGVzdGluYXRpb25JbnB1dFRhcmdldC52YWx1ZVxuICAgIFxuICAgIHRoaXMub3JpZ2luSW5wdXRUYXJnZXQudmFsdWUgPSBkZXN0aW5hdGlvblZhbHVlXG4gICAgdGhpcy5kZXN0aW5hdGlvbklucHV0VGFyZ2V0LnZhbHVlID0gb3JpZ2luVmFsdWVcbiAgICBcbiAgICB0aGlzLm9yaWdpblRleHRUYXJnZXQudGV4dENvbnRlbnQgPSBkZXN0aW5hdGlvblZhbHVlXG4gICAgdGhpcy5kZXN0aW5hdGlvblRleHRUYXJnZXQudGV4dENvbnRlbnQgPSBvcmlnaW5WYWx1ZVxuICB9XG5cbiAgb3BlbkRhdGVQaWNrZXIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIC8vIERpc3BhdGNoIGV2ZW50IHRvIGFicm9hZC1kYXRlLXBpY2tlciBjb250cm9sbGVyXG4gICAgY29uc3QgY3VzdG9tRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2Ficm9hZC10aWNrZXQtc2VhcmNoOm9wZW4tZGF0ZS1waWNrZXInLCB7XG4gICAgICBidWJibGVzOiB0cnVlXG4gICAgfSlcbiAgICB0aGlzLmVsZW1lbnQuZGlzcGF0Y2hFdmVudChjdXN0b21FdmVudClcbiAgfVxuXG4gIHVwZGF0ZURhdGUoZGF0ZVN0cjogc3RyaW5nKTogdm9pZCB7XG4gICAgLy8gVXBkYXRlIHRoZSBkYXRlIGlucHV0IGFuZCB0ZXh0IGRpc3BsYXlcbiAgICB0aGlzLmRhdGVJbnB1dFRhcmdldC52YWx1ZSA9IGRhdGVTdHJcbiAgICB0aGlzLmN1cnJlbnREYXRlVmFsdWUgPSBkYXRlU3RyXG4gICAgXG4gICAgLy8gVXBkYXRlIHRoZSBkYXRlIGRpc3BsYXkgdGV4dFxuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShgJHtkYXRlU3RyfVQwMDowMDowMGApXG4gICAgY29uc3QgbW9udGggPSBkYXRlLmdldE1vbnRoKCkgKyAxXG4gICAgY29uc3QgZGF5ID0gZGF0ZS5nZXREYXRlKClcbiAgICBjb25zdCB3ZWVrZGF5cyA9IFsnXHU1NDY4XHU2NUU1JywgJ1x1NTQ2OFx1NEUwMCcsICdcdTU0NjhcdTRFOEMnLCAnXHU1NDY4XHU0RTA5JywgJ1x1NTQ2OFx1NTZEQicsICdcdTU0NjhcdTRFOTQnLCAnXHU1NDY4XHU1MTZEJ11cbiAgICBjb25zdCB3ZWVrZGF5ID0gd2Vla2RheXNbZGF0ZS5nZXREYXkoKV1cbiAgICBcbiAgICB0aGlzLmRhdGVUZXh0VGFyZ2V0LnRleHRDb250ZW50ID0gYCR7bW9udGh9XHU2NzA4JHtkYXl9XHU2NUU1YFxuICAgIFxuICAgIC8vIFVwZGF0ZSB3ZWVrZGF5IGlmIHRoZXJlJ3MgYSBzaWJsaW5nIGVsZW1lbnRcbiAgICBjb25zdCB3ZWVrZGF5RWxlbWVudCA9IHRoaXMuZGF0ZVRleHRUYXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nXG4gICAgaWYgKHdlZWtkYXlFbGVtZW50KSB7XG4gICAgICB3ZWVrZGF5RWxlbWVudC50ZXh0Q29udGVudCA9IHdlZWtkYXlcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIG9wZW5TdGF0aW9uTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5zdGF0aW9uTW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICB0aGlzLnJlbmRlclN0YXRpb25MaXN0KClcbiAgICB0aGlzLnNlYXJjaElucHV0VGFyZ2V0LnZhbHVlID0gJydcbiAgICB0aGlzLnNlYXJjaElucHV0VGFyZ2V0LmZvY3VzKClcbiAgfVxuXG4gIGNsb3NlU3RhdGlvbk1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMuc3RhdGlvbk1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gIH1cblxuICBzZWxlY3RTdGF0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3Qgc3RhdGlvbk5hbWUgPSBlbGVtZW50LmRhdGFzZXQuc3RhdGlvbk5hbWVcbiAgICBjb25zdCBzdGF0aW9uTmFtZUVuID0gZWxlbWVudC5kYXRhc2V0LnN0YXRpb25OYW1lRW5cbiAgICBcbiAgICBpZiAoIXN0YXRpb25OYW1lKSByZXR1cm5cbiAgICBcbiAgICBpZiAodGhpcy5jdXJyZW50U2VsZWN0aW9uVHlwZSA9PT0gJ29yaWdpbicpIHtcbiAgICAgIHRoaXMub3JpZ2luSW5wdXRUYXJnZXQudmFsdWUgPSBzdGF0aW9uTmFtZVxuICAgICAgdGhpcy5vcmlnaW5UZXh0VGFyZ2V0LnRleHRDb250ZW50ID0gc3RhdGlvbk5hbWVcbiAgICAgIC8vIFVwZGF0ZSBFbmdsaXNoIG5hbWUgaW4gdGhlIHN1YnRpdGxlXG4gICAgICBjb25zdCBzdWJ0aXRsZSA9IHRoaXMub3JpZ2luVGV4dFRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmdcbiAgICAgIGlmIChzdWJ0aXRsZSkge1xuICAgICAgICBzdWJ0aXRsZS50ZXh0Q29udGVudCA9IHN0YXRpb25OYW1lRW4gfHwgJydcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kZXN0aW5hdGlvbklucHV0VGFyZ2V0LnZhbHVlID0gc3RhdGlvbk5hbWVcbiAgICAgIHRoaXMuZGVzdGluYXRpb25UZXh0VGFyZ2V0LnRleHRDb250ZW50ID0gc3RhdGlvbk5hbWVcbiAgICAgIC8vIFVwZGF0ZSBFbmdsaXNoIG5hbWUgaW4gdGhlIHN1YnRpdGxlXG4gICAgICBjb25zdCBzdWJ0aXRsZSA9IHRoaXMuZGVzdGluYXRpb25UZXh0VGFyZ2V0Lm5leHRFbGVtZW50U2libGluZ1xuICAgICAgaWYgKHN1YnRpdGxlKSB7XG4gICAgICAgIHN1YnRpdGxlLnRleHRDb250ZW50ID0gc3RhdGlvbk5hbWVFbiB8fCAnJ1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLmNsb3NlU3RhdGlvbk1vZGFsKClcbiAgfVxuXG4gIHNlYXJjaFN0YXRpb25zKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGlucHV0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgcXVlcnkgPSBpbnB1dC52YWx1ZS50cmltKCkudG9Mb3dlckNhc2UoKVxuICAgIFxuICAgIHRoaXMucmVuZGVyU3RhdGlvbkxpc3QocXVlcnkpXG4gIH1cblxuICBwcml2YXRlIHJlbmRlclN0YXRpb25MaXN0KHNlYXJjaFF1ZXJ5OiBzdHJpbmcgPSAnJyk6IHZvaWQge1xuICAgIGNvbnN0IHN0YXRpb25zID0gdGhpcy5jdXJyZW50UmVnaW9uID09PSAnamFwYW4nID8gdGhpcy5qYXBhblN0YXRpb25zIDogdGhpcy5ldXJvcGVTdGF0aW9uc1xuICAgIGNvbnN0IHBvcHVsYXJSb3V0ZXMgPSB0aGlzLmN1cnJlbnRSZWdpb24gPT09ICdqYXBhbicgPyB0aGlzLnBvcHVsYXJSb3V0ZXMuamFwYW4gOiB0aGlzLnBvcHVsYXJSb3V0ZXMuZXVyb3BlXG4gICAgXG4gICAgLyogZXNsaW50LWRpc2FibGUgaW5kZW50ICovXG4gICAgbGV0IGh0bWwgPSAnJ1xuICAgIFxuICAgIC8vIFBvcHVsYXIgcm91dGVzIChvbmx5IHNob3cgd2hlbiBubyBzZWFyY2ggcXVlcnkpXG4gICAgaWYgKCFzZWFyY2hRdWVyeSAmJiBwb3B1bGFyUm91dGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGh0bWwgKz0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwibWItNlwiPlxuICAgICAgICAgIDxoMyBjbGFzcz1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTUwMCBtYi0zIHB4LTRcIj5cdTcwRURcdTk1RThcdThERUZcdTdFQkY8L2gzPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGdhcC0zIHB4LTQgb3ZlcmZsb3cteC1hdXRvXCI+XG4gICAgICAgICAgICAke3BvcHVsYXJSb3V0ZXMubWFwKHJvdXRlID0+IGBcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJnLWdyYXktNTAgcm91bmRlZC1sZyBweC00IHB5LTIgd2hpdGVzcGFjZS1ub3dyYXAgY3Vyc29yLXBvaW50ZXIgaG92ZXI6YmctZ3JheS0xMDBcIlxuICAgICAgICAgICAgICAgICAgIGRhdGEtYWN0aW9uPVwiY2xpY2stPmFicm9hZC10aWNrZXQtc2VhcmNoI3NlbGVjdFBvcHVsYXJSb3V0ZVwiXG4gICAgICAgICAgICAgICAgICAgZGF0YS1vcmlnaW49XCIke3JvdXRlLm9yaWdpbn1cIlxuICAgICAgICAgICAgICAgICAgIGRhdGEtZGVzdGluYXRpb249XCIke3JvdXRlLmRlc3RpbmF0aW9ufVwiPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1zbSBmb250LW1lZGl1bVwiPiR7cm91dGUub3JpZ2lufSAtICR7cm91dGUuZGVzdGluYXRpb259PC9zcGFuPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGApLmpvaW4oJycpfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGBcbiAgICB9XG4gICAgXG4gICAgLy8gU3RhdGlvbiBsaXN0IGdyb3VwZWQgYnkgY2l0eS9yZWdpb25cbiAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwibWItNFwiPjxoMyBjbGFzcz1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTUwMCBtYi0zIHB4LTRcIj5cdTdBRDlcdTcwQjlcdTkwMDlcdTYyRTk8L2gzPjwvZGl2PidcbiAgICBcbiAgICBPYmplY3QuZW50cmllcyhzdGF0aW9ucykuZm9yRWFjaCgoW2NpdHksIHN0YXRpb25MaXN0XSkgPT4ge1xuICAgICAgY29uc3QgZmlsdGVyZWRTdGF0aW9ucyA9IHN0YXRpb25MaXN0LmZpbHRlcihzdGF0aW9uID0+IFxuICAgICAgICAhc2VhcmNoUXVlcnkgfHwgXG4gICAgICAgIHN0YXRpb24ubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFF1ZXJ5KSB8fCBcbiAgICAgICAgc3RhdGlvbi5uYW1lRW4udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hRdWVyeSkgfHxcbiAgICAgICAgY2l0eS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFF1ZXJ5KVxuICAgICAgKVxuICAgICAgXG4gICAgICBpZiAoZmlsdGVyZWRTdGF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGh0bWwgKz0gYFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJtYi00XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXIgcHgtNCBweS0yIGJnLWdyYXktNTBcIj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LWdyYXktNzAwXCI+JHtjaXR5fTwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgJHtmaWx0ZXJlZFN0YXRpb25zLm1hcChzdGF0aW9uID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgaXNTZWxlY3RlZCA9IChcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWxlY3Rpb25UeXBlID09PSAnb3JpZ2luJyAmJlxuICAgICAgICAgICAgICAgIHRoaXMub3JpZ2luSW5wdXRUYXJnZXQudmFsdWUgPT09IHN0YXRpb24ubmFtZVxuICAgICAgICAgICAgICApIHx8IChcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWxlY3Rpb25UeXBlID09PSAnZGVzdGluYXRpb24nICYmXG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbklucHV0VGFyZ2V0LnZhbHVlID09PSBzdGF0aW9uLm5hbWVcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHB4LTQgcHktMyBib3JkZXItYiBib3JkZXItZ3JheS0xMDAgY3Vyc29yLXBvaW50ZXIgaG92ZXI6YmctZ3JheS01MFwiXG4gICAgICAgICAgICAgICAgICAgICBkYXRhLWFjdGlvbj1cImNsaWNrLT5hYnJvYWQtdGlja2V0LXNlYXJjaCNzZWxlY3RTdGF0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgIGRhdGEtc3RhdGlvbi1uYW1lPVwiJHtzdGF0aW9uLm5hbWV9XCJcbiAgICAgICAgICAgICAgICAgICAgIGRhdGEtc3RhdGlvbi1uYW1lLWVuPVwiJHtzdGF0aW9uLm5hbWVFbn1cIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4LTFcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtYmFzZSBmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwXCI+JHtzdGF0aW9uLm5hbWV9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LXhzIHRleHQtZ3JheS00MDAgbXQtMC41XCI+JHtzdGF0aW9uLm5hbWVFbn08L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgJHtpc1NlbGVjdGVkID8gYFxuICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPVwidy01IGgtNSB0ZXh0LXllbGxvdy00MDBcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyMCAyMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ9XCJNMTYuNzA3IDUuMjkzYTEgMSAwIDAxMCAxLjQxNGwtOCA4YTEgMSAwIDAxLTEuNDE0IDBsLTQtNGExIDEgMCAwMTEuNDE0LTEuNDE0TDggMTIuNTg2bDcuMjkzLTcuMjkzYTEgMSAwIDAxMS40MTQgMHpcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaXAtcnVsZT1cImV2ZW5vZGRcIi8+XG4gICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgYCA6ICcnfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICBgXG4gICAgICAgICAgICB9KS5qb2luKCcnKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYFxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgY29uc3Qgbm9SZXN1bHRzSGVhZGVyID0gJzxkaXYgY2xhc3M9XCJtYi00XCI+PGgzIGNsYXNzPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNTAwIG1iLTMgcHgtNFwiPlx1N0FEOVx1NzBCOVx1OTAwOVx1NjJFOTwvaDM+PC9kaXY+J1xuICAgIGlmIChodG1sID09PSBub1Jlc3VsdHNIZWFkZXIpIHtcbiAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJ0ZXh0LWNlbnRlciBweS04IHRleHQtZ3JheS00MDBcIj5cdTY3MkFcdTYyN0VcdTUyMzBcdTUzMzlcdTkxNERcdTc2ODRcdTdBRDlcdTcwQjk8L2Rpdj4nXG4gICAgfVxuICAgIC8qIGVzbGludC1lbmFibGUgaW5kZW50ICovXG4gICAgXG4gICAgdGhpcy5zdGF0aW9uTGlzdFRhcmdldC5pbm5lckhUTUwgPSBodG1sXG4gIH1cblxuICBzZWxlY3RQb3B1bGFyUm91dGUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgZWxlbWVudCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBvcmlnaW4gPSBlbGVtZW50LmRhdGFzZXQub3JpZ2luXG4gICAgY29uc3QgZGVzdGluYXRpb24gPSBlbGVtZW50LmRhdGFzZXQuZGVzdGluYXRpb25cbiAgICBcbiAgICBpZiAob3JpZ2luICYmIGRlc3RpbmF0aW9uKSB7XG4gICAgICAvLyBGaW5kIHN0YXRpb24gZGV0YWlsc1xuICAgICAgY29uc3Qgc3RhdGlvbnMgPSB0aGlzLmN1cnJlbnRSZWdpb24gPT09ICdqYXBhbicgPyB0aGlzLmphcGFuU3RhdGlvbnMgOiB0aGlzLmV1cm9wZVN0YXRpb25zXG4gICAgICBsZXQgb3JpZ2luU3RhdGlvbjogU3RhdGlvbiB8IHVuZGVmaW5lZFxuICAgICAgbGV0IGRlc3RpbmF0aW9uU3RhdGlvbjogU3RhdGlvbiB8IHVuZGVmaW5lZFxuICAgICAgXG4gICAgICBPYmplY3QudmFsdWVzKHN0YXRpb25zKS5mb3JFYWNoKChzdGF0aW9uTGlzdDogU3RhdGlvbltdKSA9PiB7XG4gICAgICAgIHN0YXRpb25MaXN0LmZvckVhY2goKHN0YXRpb246IFN0YXRpb24pID0+IHtcbiAgICAgICAgICBpZiAoc3RhdGlvbi5uYW1lID09PSBvcmlnaW4pIG9yaWdpblN0YXRpb24gPSBzdGF0aW9uXG4gICAgICAgICAgaWYgKHN0YXRpb24ubmFtZSA9PT0gZGVzdGluYXRpb24pIGRlc3RpbmF0aW9uU3RhdGlvbiA9IHN0YXRpb25cbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmIChvcmlnaW5TdGF0aW9uKSB7XG4gICAgICAgIHRoaXMub3JpZ2luSW5wdXRUYXJnZXQudmFsdWUgPSBvcmlnaW5TdGF0aW9uLm5hbWVcbiAgICAgICAgdGhpcy5vcmlnaW5UZXh0VGFyZ2V0LnRleHRDb250ZW50ID0gb3JpZ2luU3RhdGlvbi5uYW1lXG4gICAgICAgIGNvbnN0IHN1YnRpdGxlID0gdGhpcy5vcmlnaW5UZXh0VGFyZ2V0Lm5leHRFbGVtZW50U2libGluZ1xuICAgICAgICBpZiAoc3VidGl0bGUpIHN1YnRpdGxlLnRleHRDb250ZW50ID0gb3JpZ2luU3RhdGlvbi5uYW1lRW5cbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGRlc3RpbmF0aW9uU3RhdGlvbikge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uSW5wdXRUYXJnZXQudmFsdWUgPSBkZXN0aW5hdGlvblN0YXRpb24ubmFtZVxuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uVGV4dFRhcmdldC50ZXh0Q29udGVudCA9IGRlc3RpbmF0aW9uU3RhdGlvbi5uYW1lXG4gICAgICAgIGNvbnN0IHN1YnRpdGxlID0gdGhpcy5kZXN0aW5hdGlvblRleHRUYXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nXG4gICAgICAgIGlmIChzdWJ0aXRsZSkgc3VidGl0bGUudGV4dENvbnRlbnQgPSBkZXN0aW5hdGlvblN0YXRpb24ubmFtZUVuXG4gICAgICB9XG4gICAgICBcbiAgICAgIHRoaXMuY2xvc2VTdGF0aW9uTW9kYWwoKVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwic2VhcmNoRm9ybVwiLFxuICAgIFwiY2l0eUlucHV0XCIsXG4gICAgXCJjaXR5RGlzcGxheVwiLFxuICAgIFwiY2hlY2tJbklucHV0XCIsXG4gICAgXCJjaGVja091dElucHV0XCIsXG4gICAgXCJyb29tc0lucHV0XCIsXG4gICAgXCJhZHVsdHNJbnB1dFwiLFxuICAgIFwiY2hpbGRyZW5JbnB1dFwiLFxuICAgIFwicXVlcnlJbnB1dFwiLFxuICAgIFwiZG9tZXN0aWNUYWJcIixcbiAgICBcImludGVybmF0aW9uYWxUYWJcIixcbiAgICBcImRvbWVzdGljSW5kaWNhdG9yXCIsXG4gICAgXCJpbnRlcm5hdGlvbmFsSW5kaWNhdG9yXCJcbiAgXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VhcmNoRm9ybVRhcmdldDogSFRNTEZvcm1FbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQ2l0eUlucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2l0eUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQ2l0eURpc3BsYXlUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBjaXR5RGlzcGxheVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNDaGVja0luSW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBjaGVja0luSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNDaGVja091dElucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hlY2tPdXRJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1Jvb21zSW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSByb29tc0lucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQWR1bHRzSW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBhZHVsdHNJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0NoaWxkcmVuSW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBjaGlsZHJlbklucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUXVlcnlJbnB1dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IHF1ZXJ5SW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkb21lc3RpY1RhYlRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBpbnRlcm5hdGlvbmFsVGFiVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRvbWVzdGljSW5kaWNhdG9yVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGludGVybmF0aW9uYWxJbmRpY2F0b3JUYXJnZXQ6IEhUTUxFbGVtZW50XG5cbiAgcHJpdmF0ZSBjdXJyZW50TG9jYXRpb25UeXBlOiAnZG9tZXN0aWMnIHwgJ2ludGVybmF0aW9uYWwnID0gJ2RvbWVzdGljJ1xuICBwcml2YXRlIGxhc3REb21lc3RpY0NpdHk6IHN0cmluZyA9ICdcdTUzMTdcdTRFQUMnXG4gIHByaXZhdGUgbGFzdEludGVybmF0aW9uYWxDaXR5OiBzdHJpbmcgPSAnXHU5OTk5XHU2RTJGJ1xuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJIb21lc3RheVNlYXJjaCBjb25uZWN0ZWRcIilcbiAgICBcbiAgICAvLyBJbml0aWFsaXplOiBSZWFkIGN1cnJlbnQgY2l0eSBhbmQgc3RvcmUgaXQgYXMgZG9tZXN0aWMgY2l0eSAoZGVmYXVsdCBzdGF0ZSlcbiAgICBpZiAodGhpcy5oYXNDaXR5SW5wdXRUYXJnZXQpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRDaXR5ID0gdGhpcy5jaXR5SW5wdXRUYXJnZXQudmFsdWVcbiAgICAgIGlmIChjdXJyZW50Q2l0eSkge1xuICAgICAgICB0aGlzLmxhc3REb21lc3RpY0NpdHkgPSBjdXJyZW50Q2l0eVxuICAgICAgICBjb25zb2xlLmxvZygnSG9tZXN0YXlTZWFyY2g6IEluaXRpYWxpemVkIGxhc3REb21lc3RpY0NpdHkgdG86JywgY3VycmVudENpdHkpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIExpc3RlbiBmb3IgY2l0eS1zZWxlY3RvciB1cGRhdGVzXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2l0eS1zZWxlY3RvcjpjaXR5LXNlbGVjdGVkLWZvci1ob3RlbCcsIHRoaXMuaGFuZGxlQ2l0eVVwZGF0ZS5iaW5kKHRoaXMpKVxuICAgIC8vIExpc3RlbiBmb3IgZGF0ZS1waWNrZXIgdXBkYXRlc1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2hvdGVsLWRhdGUtcGlja2VyOmRhdGVzLXNlbGVjdGVkJywgdGhpcy5oYW5kbGVEYXRlVXBkYXRlLmJpbmQodGhpcykpXG4gICAgLy8gTGlzdGVuIGZvciBndWVzdC1zZWxlY3RvciB1cGRhdGVzXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaG90ZWwtZ3Vlc3Qtc2VsZWN0b3I6Z3Vlc3RzLXVwZGF0ZWQnLCB0aGlzLmhhbmRsZUd1ZXN0VXBkYXRlLmJpbmQodGhpcykpXG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiSG9tZXN0YXlTZWFyY2ggZGlzY29ubmVjdGVkXCIpXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2l0eS1zZWxlY3RvcjpjaXR5LXNlbGVjdGVkLWZvci1ob3RlbCcsIHRoaXMuaGFuZGxlQ2l0eVVwZGF0ZS5iaW5kKHRoaXMpKVxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2hvdGVsLWRhdGUtcGlja2VyOmRhdGVzLXNlbGVjdGVkJywgdGhpcy5oYW5kbGVEYXRlVXBkYXRlLmJpbmQodGhpcykpXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignaG90ZWwtZ3Vlc3Qtc2VsZWN0b3I6Z3Vlc3RzLXVwZGF0ZWQnLCB0aGlzLmhhbmRsZUd1ZXN0VXBkYXRlLmJpbmQodGhpcykpXG4gIH1cblxuICAvLyBIYW5kbGUgY2l0eSBzZWxlY3Rpb24gdXBkYXRlIGZyb20gY2l0eS1zZWxlY3RvclxuICBoYW5kbGVDaXR5VXBkYXRlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnRcbiAgICBjb25zdCB7IGNpdHlOYW1lLCBpc0ludGVybmF0aW9uYWwgfSA9IGN1c3RvbUV2ZW50LmRldGFpbFxuICAgIGNvbnNvbGUubG9nKCdIb21lc3RheVNlYXJjaDogUmVjZWl2ZWQgY2l0eSB1cGRhdGU6JywgY2l0eU5hbWUsICdpc0ludGVybmF0aW9uYWw6JywgaXNJbnRlcm5hdGlvbmFsKVxuICAgIFxuICAgIC8vIFJlbWVtYmVyIHRoZSBjaXR5IGZvciB0aGlzIGxvY2F0aW9uIHR5cGVcbiAgICBpZiAoaXNJbnRlcm5hdGlvbmFsKSB7XG4gICAgICB0aGlzLmxhc3RJbnRlcm5hdGlvbmFsQ2l0eSA9IGNpdHlOYW1lXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubGFzdERvbWVzdGljQ2l0eSA9IGNpdHlOYW1lXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLmhhc0NpdHlJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5jaXR5SW5wdXRUYXJnZXQudmFsdWUgPSBjaXR5TmFtZVxuICAgICAgY29uc29sZS5sb2coJ0hvbWVzdGF5U2VhcmNoOiBVcGRhdGVkIGNpdHkgaW5wdXQgdG86JywgY2l0eU5hbWUpXG4gICAgfVxuXG4gICAgLy8gQXV0by1zd2l0Y2ggdGFiIGJhc2VkIG9uIGNpdHkgdHlwZVxuICAgIGlmIChpc0ludGVybmF0aW9uYWwpIHtcbiAgICAgIHRoaXMuc3dpdGNoVG9JbnRlcm5hdGlvbmFsKGZhbHNlKSAvLyBmYWxzZSA9IGRvbid0IHVwZGF0ZSBjaXR5XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3dpdGNoVG9Eb21lc3RpYyhmYWxzZSkgLy8gZmFsc2UgPSBkb24ndCB1cGRhdGUgY2l0eVxuICAgIH1cbiAgfVxuXG4gIC8vIEhhbmRsZSBkYXRlIHNlbGVjdGlvbiB1cGRhdGUgZnJvbSBob3RlbC1kYXRlLXBpY2tlclxuICBoYW5kbGVEYXRlVXBkYXRlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnRcbiAgICBjb25zdCB7IGNoZWNrSW4sIGNoZWNrT3V0IH0gPSBjdXN0b21FdmVudC5kZXRhaWxcbiAgICBjb25zb2xlLmxvZygnSG9tZXN0YXlTZWFyY2g6IFJlY2VpdmVkIGRhdGUgdXBkYXRlOicsIHsgY2hlY2tJbiwgY2hlY2tPdXQgfSlcbiAgICBcbiAgICBpZiAodGhpcy5oYXNDaGVja0luSW5wdXRUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2hlY2tJbklucHV0VGFyZ2V0LnZhbHVlID0gY2hlY2tJblxuICAgICAgY29uc29sZS5sb2coJ0hvbWVzdGF5U2VhcmNoOiBVcGRhdGVkIGNoZWNrLWluIHRvOicsIGNoZWNrSW4pXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLmhhc0NoZWNrT3V0SW5wdXRUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2hlY2tPdXRJbnB1dFRhcmdldC52YWx1ZSA9IGNoZWNrT3V0XG4gICAgICBjb25zb2xlLmxvZygnSG9tZXN0YXlTZWFyY2g6IFVwZGF0ZWQgY2hlY2stb3V0IHRvOicsIGNoZWNrT3V0KVxuICAgIH1cbiAgfVxuXG4gIC8vIEhhbmRsZSBndWVzdCBzZWxlY3Rpb24gdXBkYXRlIGZyb20gaG90ZWwtZ3Vlc3Qtc2VsZWN0b3JcbiAgaGFuZGxlR3Vlc3RVcGRhdGUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY3VzdG9tRXZlbnQgPSBldmVudCBhcyBDdXN0b21FdmVudFxuICAgIGNvbnN0IHsgcm9vbXMsIGFkdWx0cywgY2hpbGRyZW4gfSA9IGN1c3RvbUV2ZW50LmRldGFpbFxuICAgIGNvbnNvbGUubG9nKCdIb21lc3RheVNlYXJjaDogUmVjZWl2ZWQgZ3Vlc3QgdXBkYXRlOicsIHsgcm9vbXMsIGFkdWx0cywgY2hpbGRyZW4gfSlcbiAgICBcbiAgICBpZiAodGhpcy5oYXNSb29tc0lucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLnJvb21zSW5wdXRUYXJnZXQudmFsdWUgPSByb29tcy50b1N0cmluZygpXG4gICAgICBjb25zb2xlLmxvZygnSG9tZXN0YXlTZWFyY2g6IFVwZGF0ZWQgcm9vbXMgdG86Jywgcm9vbXMpXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLmhhc0FkdWx0c0lucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLmFkdWx0c0lucHV0VGFyZ2V0LnZhbHVlID0gYWR1bHRzLnRvU3RyaW5nKClcbiAgICAgIGNvbnNvbGUubG9nKCdIb21lc3RheVNlYXJjaDogVXBkYXRlZCBhZHVsdHMgdG86JywgYWR1bHRzKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5oYXNDaGlsZHJlbklucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLmNoaWxkcmVuSW5wdXRUYXJnZXQudmFsdWUgPSBjaGlsZHJlbi50b1N0cmluZygpXG4gICAgICBjb25zb2xlLmxvZygnSG9tZXN0YXlTZWFyY2g6IFVwZGF0ZWQgY2hpbGRyZW4gdG86JywgY2hpbGRyZW4pXG4gICAgfVxuICB9XG5cbiAgb3BlblNlYXJjaE1vZGFsKCk6IHZvaWQge1xuICAgIC8vIFNob3cgYSBwcm9tcHQgZm9yIHNlYXJjaCBrZXl3b3JkXG4gICAgY29uc3Qga2V5d29yZCA9IHByb21wdCgnXHU4QkY3XHU4RjkzXHU1MTY1XHU2QzExXHU1QkJGXHU1NDBEXHU3OUYwXHUzMDAxXHU1NzMwXHU1NDBEXHU2MjE2XHU1MTczXHU5NTJFXHU4QkNEXHVGRjFBJylcbiAgICBcbiAgICBpZiAoa2V5d29yZCAhPT0gbnVsbCAmJiB0aGlzLmhhc1F1ZXJ5SW5wdXRUYXJnZXQpIHtcbiAgICAgIHRoaXMucXVlcnlJbnB1dFRhcmdldC52YWx1ZSA9IGtleXdvcmRcbiAgICAgIFxuICAgICAgLy8gU3VibWl0IHRoZSBmb3JtXG4gICAgICBpZiAodGhpcy5zZWFyY2hGb3JtVGFyZ2V0KSB7XG4gICAgICAgIHRoaXMuc2VhcmNoRm9ybVRhcmdldC5yZXF1ZXN0U3VibWl0KClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBTd2l0Y2ggdG8gZG9tZXN0aWMgdGFiXG4gIHN3aXRjaFRvRG9tZXN0aWModXBkYXRlQ2l0eTogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jdXJyZW50TG9jYXRpb25UeXBlID09PSAnZG9tZXN0aWMnKSByZXR1cm5cblxuICAgIGNvbnNvbGUubG9nKCdIb21lc3RheVNlYXJjaDogU3dpdGNoaW5nIHRvIGRvbWVzdGljJylcbiAgICB0aGlzLmN1cnJlbnRMb2NhdGlvblR5cGUgPSAnZG9tZXN0aWMnXG5cbiAgICAvLyBVcGRhdGUgY2l0eSBpbnB1dCB0byBsYXN0IGRvbWVzdGljIGNpdHkgd2hlbiBtYW51YWxseSBzd2l0Y2hpbmdcbiAgICBpZiAodXBkYXRlQ2l0eSkge1xuICAgICAgaWYgKHRoaXMuaGFzQ2l0eUlucHV0VGFyZ2V0KSB7XG4gICAgICAgIHRoaXMuY2l0eUlucHV0VGFyZ2V0LnZhbHVlID0gdGhpcy5sYXN0RG9tZXN0aWNDaXR5XG4gICAgICAgIGNvbnNvbGUubG9nKCdIb21lc3RheVNlYXJjaDogUmVzdG9yZWQgZG9tZXN0aWMgY2l0eSB0bzonLCB0aGlzLmxhc3REb21lc3RpY0NpdHkpXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5oYXNDaXR5RGlzcGxheVRhcmdldCkge1xuICAgICAgICB0aGlzLmNpdHlEaXNwbGF5VGFyZ2V0LnRleHRDb250ZW50ID0gdGhpcy5sYXN0RG9tZXN0aWNDaXR5XG4gICAgICAgIGNvbnNvbGUubG9nKCdIb21lc3RheVNlYXJjaDogVXBkYXRlZCBjaXR5IGRpc3BsYXkgdG86JywgdGhpcy5sYXN0RG9tZXN0aWNDaXR5KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBkb21lc3RpYyB0YWIgc3R5bGVzXG4gICAgY29uc3QgZG9tZXN0aWNTcGFuID0gdGhpcy5kb21lc3RpY1RhYlRhcmdldC5xdWVyeVNlbGVjdG9yKCdzcGFuJylcbiAgICBpZiAoZG9tZXN0aWNTcGFuKSB7XG4gICAgICBkb21lc3RpY1NwYW4uY2xhc3NMaXN0LnJlbW92ZSgnZm9udC1tZWRpdW0nKVxuICAgICAgZG9tZXN0aWNTcGFuLmNsYXNzTGlzdC5hZGQoJ2ZvbnQtYm9sZCcpXG4gICAgfVxuICAgIHRoaXMuZG9tZXN0aWNUYWJUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTUwMCcpXG4gICAgdGhpcy5kb21lc3RpY1RhYlRhcmdldC5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktODAwJylcbiAgICB0aGlzLmRvbWVzdGljSW5kaWNhdG9yVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG5cbiAgICAvLyBVcGRhdGUgaW50ZXJuYXRpb25hbCB0YWIgc3R5bGVzXG4gICAgY29uc3QgaW50ZXJuYXRpb25hbFNwYW4gPSB0aGlzLmludGVybmF0aW9uYWxUYWJUYXJnZXQucXVlcnlTZWxlY3Rvcignc3BhbicpXG4gICAgaWYgKGludGVybmF0aW9uYWxTcGFuKSB7XG4gICAgICBpbnRlcm5hdGlvbmFsU3Bhbi5jbGFzc0xpc3QucmVtb3ZlKCdmb250LWJvbGQnKVxuICAgICAgaW50ZXJuYXRpb25hbFNwYW4uY2xhc3NMaXN0LmFkZCgnZm9udC1tZWRpdW0nKVxuICAgIH1cbiAgICB0aGlzLmludGVybmF0aW9uYWxUYWJUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTgwMCcpXG4gICAgdGhpcy5pbnRlcm5hdGlvbmFsVGFiVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS01MDAnKVxuICAgIHRoaXMuaW50ZXJuYXRpb25hbEluZGljYXRvclRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICB9XG5cbiAgLy8gU3dpdGNoIHRvIGludGVybmF0aW9uYWwgdGFiXG4gIHN3aXRjaFRvSW50ZXJuYXRpb25hbCh1cGRhdGVDaXR5OiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xuICAgIGlmICh0aGlzLmN1cnJlbnRMb2NhdGlvblR5cGUgPT09ICdpbnRlcm5hdGlvbmFsJykgcmV0dXJuXG5cbiAgICBjb25zb2xlLmxvZygnSG9tZXN0YXlTZWFyY2g6IFN3aXRjaGluZyB0byBpbnRlcm5hdGlvbmFsJylcbiAgICB0aGlzLmN1cnJlbnRMb2NhdGlvblR5cGUgPSAnaW50ZXJuYXRpb25hbCdcblxuICAgIC8vIFVwZGF0ZSBjaXR5IGlucHV0IHRvIGxhc3QgaW50ZXJuYXRpb25hbCBjaXR5IHdoZW4gbWFudWFsbHkgc3dpdGNoaW5nXG4gICAgaWYgKHVwZGF0ZUNpdHkpIHtcbiAgICAgIGlmICh0aGlzLmhhc0NpdHlJbnB1dFRhcmdldCkge1xuICAgICAgICB0aGlzLmNpdHlJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMubGFzdEludGVybmF0aW9uYWxDaXR5XG4gICAgICAgIGNvbnNvbGUubG9nKCdIb21lc3RheVNlYXJjaDogUmVzdG9yZWQgaW50ZXJuYXRpb25hbCBjaXR5IHRvOicsIHRoaXMubGFzdEludGVybmF0aW9uYWxDaXR5KVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaGFzQ2l0eURpc3BsYXlUYXJnZXQpIHtcbiAgICAgICAgdGhpcy5jaXR5RGlzcGxheVRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMubGFzdEludGVybmF0aW9uYWxDaXR5XG4gICAgICAgIGNvbnNvbGUubG9nKCdIb21lc3RheVNlYXJjaDogVXBkYXRlZCBjaXR5IGRpc3BsYXkgdG86JywgdGhpcy5sYXN0SW50ZXJuYXRpb25hbENpdHkpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGludGVybmF0aW9uYWwgdGFiIHN0eWxlc1xuICAgIGNvbnN0IGludGVybmF0aW9uYWxTcGFuID0gdGhpcy5pbnRlcm5hdGlvbmFsVGFiVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKVxuICAgIGlmIChpbnRlcm5hdGlvbmFsU3Bhbikge1xuICAgICAgaW50ZXJuYXRpb25hbFNwYW4uY2xhc3NMaXN0LnJlbW92ZSgnZm9udC1tZWRpdW0nKVxuICAgICAgaW50ZXJuYXRpb25hbFNwYW4uY2xhc3NMaXN0LmFkZCgnZm9udC1ib2xkJylcbiAgICB9XG4gICAgdGhpcy5pbnRlcm5hdGlvbmFsVGFiVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS01MDAnKVxuICAgIHRoaXMuaW50ZXJuYXRpb25hbFRhYlRhcmdldC5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktODAwJylcbiAgICB0aGlzLmludGVybmF0aW9uYWxJbmRpY2F0b3JUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcblxuICAgIC8vIFVwZGF0ZSBkb21lc3RpYyB0YWIgc3R5bGVzXG4gICAgY29uc3QgZG9tZXN0aWNTcGFuID0gdGhpcy5kb21lc3RpY1RhYlRhcmdldC5xdWVyeVNlbGVjdG9yKCdzcGFuJylcbiAgICBpZiAoZG9tZXN0aWNTcGFuKSB7XG4gICAgICBkb21lc3RpY1NwYW4uY2xhc3NMaXN0LnJlbW92ZSgnZm9udC1ib2xkJylcbiAgICAgIGRvbWVzdGljU3Bhbi5jbGFzc0xpc3QuYWRkKCdmb250LW1lZGl1bScpXG4gICAgfVxuICAgIHRoaXMuZG9tZXN0aWNUYWJUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTgwMCcpXG4gICAgdGhpcy5kb21lc3RpY1RhYlRhcmdldC5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktNTAwJylcbiAgICB0aGlzLmRvbWVzdGljSW5kaWNhdG9yVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcInJlZ2lvbk1vZGFsXCIsXG4gICAgXCJyZWdpb25EaXNwbGF5XCIsIFxuICAgIFwic2VhcmNoSW5wdXRcIixcbiAgICBcInNlYXJjaFJlc3VsdHNcIixcbiAgICBcInNlbGVjdG9yVGFiXCIsXG4gICAgXCJwb3B1bGFyU2VjdGlvblwiLFxuICAgIFwiaGlzdG9yeVNlY3Rpb25cIixcbiAgICBcImNvbnRpbmVudEJ0blwiLFxuICAgIFwiY29udGluZW50U2VjdGlvblwiXG4gIF1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHJlZ2lvbk1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHJlZ2lvbkRpc3BsYXlUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VhcmNoSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzZWFyY2hSZXN1bHRzVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlbGVjdG9yVGFiVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IHBvcHVsYXJTZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhpc3RvcnlTZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNvbnRpbmVudEJ0blRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBjb250aW5lbnRTZWN0aW9uVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuXG4gIHByaXZhdGUgY3VycmVudENvbnRpbmVudDogc3RyaW5nID0gJ2FzaWEnXG4gIHByaXZhdGUgY3VycmVudFRhYjogc3RyaW5nID0gJ3BvcHVsYXInXG4gIHByaXZhdGUgZGVzdGluYXRpb25IaXN0b3J5OiBzdHJpbmdbXSA9IFtdXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkludGVybmV0U2VydmljZXMgY29ubmVjdGVkXCIpXG4gICAgdGhpcy5sb2FkSGlzdG9yeSgpXG4gIH1cblxuICBvcGVuUmVnaW9uTW9kYWwoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIHRoaXMucmVnaW9uTW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAvLyBSZXNldCB0byBkZWZhdWx0IHZpZXdcbiAgICB0aGlzLnNob3dDb250aW5lbnQoJ2FzaWEnKVxuICAgIHRoaXMuc3dpdGNoU2VsZWN0b3JUYWIoe2N1cnJlbnRUYXJnZXQ6IHRoaXMuc2VsZWN0b3JUYWJUYXJnZXRzWzBdfSBhcyBhbnkpXG4gIH1cblxuICBjbG9zZVJlZ2lvbk1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMucmVnaW9uTW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAvLyBDbGVhciBzZWFyY2hcbiAgICB0aGlzLnNlYXJjaElucHV0VGFyZ2V0LnZhbHVlID0gJydcbiAgICB0aGlzLnNlYXJjaFJlc3VsdHNUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgfVxuXG4gIHNlbGVjdERlc3RpbmF0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBkZXN0aW5hdGlvbiA9IHRhcmdldC5kYXRhc2V0LmRlc3RpbmF0aW9uXG4gICAgXG4gICAgaWYgKGRlc3RpbmF0aW9uKSB7XG4gICAgICAvLyBTYXZlIHRvIGhpc3RvcnlcbiAgICAgIHRoaXMuc2F2ZVRvSGlzdG9yeShkZXN0aW5hdGlvbilcbiAgICAgIC8vIFR1cmJvIERyaXZlIHdpbGwgaGFuZGxlIG5hdmlnYXRpb25cbiAgICAgIC8vIENsb3NlIG1vZGFsXG4gICAgICB0aGlzLmNsb3NlUmVnaW9uTW9kYWwoKVxuICAgIH1cbiAgfVxuXG4gIHNlbGVjdFJlZ2lvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICAvLyBCYWNrd2FyZCBjb21wYXRpYmlsaXR5IG1ldGhvZFxuICAgIHRoaXMuc2VsZWN0RGVzdGluYXRpb24oZXZlbnQpXG4gIH1cblxuICBzd2l0Y2hUYWIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgLy8gUHJvZHVjdCB0YWIgc3dpdGNoaW5nIChcdTU4ODNcdTU5MTZcdTc1MzVcdThCRERcdTUzNjEsIFx1NTg4M1x1NTkxNlx1NkQ0MVx1OTFDRlx1NTMwNSwgZXRjLilcbiAgICAvLyBUdXJibyBEcml2ZSBoYW5kbGVzIG5hdmlnYXRpb24gYXV0b21hdGljYWxseVxuICB9XG5cbiAgc3dpdGNoU2VsZWN0b3JUYWIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHRhYiA9IGJ1dHRvbi5kYXRhc2V0LnRhYiB8fCAncG9wdWxhcidcbiAgICBcbiAgICAvLyBVcGRhdGUgdGFiIGFjdGl2ZSBzdGF0ZXNcbiAgICB0aGlzLnNlbGVjdG9yVGFiVGFyZ2V0cy5mb3JFYWNoKHRhYkJ0biA9PiB7XG4gICAgICBpZiAodGFiQnRuID09PSBidXR0b24pIHtcbiAgICAgICAgdGFiQnRuLmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1ibGFjaycsICd0ZXh0LWJsYWNrJylcbiAgICAgICAgdGFiQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS01MDAnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFiQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1ibGFjaycsICd0ZXh0LWJsYWNrJylcbiAgICAgICAgdGFiQnRuLmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS01MDAnKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBTaG93L2hpZGUgc2VjdGlvbnNcbiAgICBpZiAodGFiID09PSAncG9wdWxhcicpIHtcbiAgICAgIHRoaXMucG9wdWxhclNlY3Rpb25UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgIHRoaXMuaGlzdG9yeVNlY3Rpb25UYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgIHRoaXMuc2VhcmNoUmVzdWx0c1RhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBvcHVsYXJTZWN0aW9uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICB0aGlzLmhpc3RvcnlTZWN0aW9uVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICB0aGlzLnNlYXJjaFJlc3VsdHNUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgIHRoaXMucmVuZGVySGlzdG9yeSgpXG4gICAgfVxuXG4gICAgdGhpcy5jdXJyZW50VGFiID0gdGFiXG4gIH1cblxuICBzZWxlY3RDb250aW5lbnQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGNvbnRpbmVudCA9IGJ1dHRvbi5kYXRhc2V0LmNvbnRpbmVudCB8fCAnYXNpYSdcbiAgICBcbiAgICB0aGlzLnNob3dDb250aW5lbnQoY29udGluZW50KVxuICB9XG5cbiAgcHJpdmF0ZSBzaG93Q29udGluZW50KGNvbnRpbmVudDogc3RyaW5nKTogdm9pZCB7XG4gICAgLy8gVXBkYXRlIGNvbnRpbmVudCBidXR0b24gc3RhdGVzXG4gICAgdGhpcy5jb250aW5lbnRCdG5UYXJnZXRzLmZvckVhY2goYnRuID0+IHtcbiAgICAgIGlmIChidG4uZGF0YXNldC5jb250aW5lbnQgPT09IGNvbnRpbmVudCkge1xuICAgICAgICBidG4uY2xhc3NMaXN0LmFkZCgnYmctd2hpdGUnLCAnZm9udC1ib2xkJywgJ2JvcmRlci1sLTInLCAnYm9yZGVyLXllbGxvdy01MDAnKVxuICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTYwMCcpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYmctd2hpdGUnLCAnZm9udC1ib2xkJywgJ2JvcmRlci1sLTInLCAnYm9yZGVyLXllbGxvdy01MDAnKVxuICAgICAgICBidG4uY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTYwMCcpXG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIFNob3cvaGlkZSBjb250aW5lbnQgc2VjdGlvbnNcbiAgICB0aGlzLmNvbnRpbmVudFNlY3Rpb25UYXJnZXRzLmZvckVhY2goc2VjdGlvbiA9PiB7XG4gICAgICBjb25zdCBzZWN0aW9uQ29udGluZW50ID0gc2VjdGlvbi5kYXRhc2V0LmNvbnRpbmVudFxuICAgICAgaWYgKHNlY3Rpb25Db250aW5lbnQgPT09IGNvbnRpbmVudCkge1xuICAgICAgICBzZWN0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICB9XG4gICAgfSlcblxuICAgIHRoaXMuY3VycmVudENvbnRpbmVudCA9IGNvbnRpbmVudFxuICB9XG5cbiAgc2VhcmNoRGVzdGluYXRpb25zKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5zZWFyY2hJbnB1dFRhcmdldC52YWx1ZS50cmltKCkudG9Mb3dlckNhc2UoKVxuXG4gICAgaWYgKHF1ZXJ5ID09PSAnJykge1xuICAgICAgLy8gU2hvdyBjdXJyZW50IHRhYiBjb250ZW50XG4gICAgICB0aGlzLnNlYXJjaFJlc3VsdHNUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRUYWIgPT09ICdwb3B1bGFyJykge1xuICAgICAgICB0aGlzLnBvcHVsYXJTZWN0aW9uVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmhpc3RvcnlTZWN0aW9uVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICB9XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBIaWRlIHJlZ3VsYXIgc2VjdGlvbnMsIHNob3cgc2VhcmNoIHJlc3VsdHNcbiAgICB0aGlzLnBvcHVsYXJTZWN0aW9uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgdGhpcy5oaXN0b3J5U2VjdGlvblRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIHRoaXMuc2VhcmNoUmVzdWx0c1RhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuXG4gICAgLy8gR2V0IGFsbCBkZXN0aW5hdGlvbiBsaW5rcyBhbmQgZmlsdGVyXG4gICAgY29uc3QgYWxsRGVzdExpbmtzID0gdGhpcy5wb3B1bGFyU2VjdGlvblRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1kZXN0aW5hdGlvbl0nKVxuICAgIGNvbnN0IG1hdGNoaW5nRGVzdHM6IEhUTUxFbGVtZW50W10gPSBbXVxuXG4gICAgYWxsRGVzdExpbmtzLmZvckVhY2goKGxpbms6IEVsZW1lbnQpID0+IHtcbiAgICAgIGNvbnN0IGh0bWxMaW5rID0gbGluayBhcyBIVE1MRWxlbWVudFxuICAgICAgY29uc3QgZGVzdCA9IGh0bWxMaW5rLmRhdGFzZXQuZGVzdGluYXRpb24gfHwgJydcbiAgICAgIGlmIChkZXN0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpKSB7XG4gICAgICAgIG1hdGNoaW5nRGVzdHMucHVzaChodG1sTGluaylcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gUmVuZGVyIHNlYXJjaCByZXN1bHRzXG4gICAgaWYgKG1hdGNoaW5nRGVzdHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgcmVzdWx0c0h0bWwgPSBgXG4gICAgICAgIDxoMyBjbGFzcz1cInRleHQtc20gZm9udC1ib2xkIHRleHQtZ3JheS01MDAgbWItM1wiPlx1NjQxQ1x1N0QyMlx1N0VEM1x1Njc5QyAoJHttYXRjaGluZ0Rlc3RzLmxlbmd0aH0pPC9oMz5cbiAgICAgICAgPGRpdiBjbGFzcz1cImdyaWQgZ3JpZC1jb2xzLTMgZ2FwLTNcIj5cbiAgICAgICAgICAke21hdGNoaW5nRGVzdHMubWFwKGxpbmsgPT4gbGluay5vdXRlckhUTUwpLmpvaW4oJycpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIGBcbiAgICAgIHRoaXMuc2VhcmNoUmVzdWx0c1RhcmdldC5pbm5lckhUTUwgPSByZXN1bHRzSHRtbFxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlYXJjaFJlc3VsdHNUYXJnZXQuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1jZW50ZXIgdGV4dC1ncmF5LTQwMCBweS0xMlwiPlxuICAgICAgICAgIDxwPlx1NjcyQVx1NjI3RVx1NTIzMFx1NTMzOVx1OTE0RFx1NzY4NFx1NzZFRVx1NzY4NFx1NTczMDwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICBgXG4gICAgfVxuICB9XG5cbiAgY2xlYXJIaXN0b3J5KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIFxuICAgIGlmIChjb25maXJtKCdcdTc4NkVcdTVCOUFcdTg5ODFcdTZFMDVcdTdBN0FcdTUzODZcdTUzRjJcdTkwMDlcdTYyRTlcdThCQjBcdTVGNTVcdTU0MTc/JykpIHtcbiAgICAgIHRoaXMuZGVzdGluYXRpb25IaXN0b3J5ID0gW11cbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdpbnRlcm5ldF9zZXJ2aWNlc19kZXN0aW5hdGlvbl9oaXN0b3J5JylcbiAgICAgIHRoaXMucmVuZGVySGlzdG9yeSgpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzYXZlVG9IaXN0b3J5KGRlc3RpbmF0aW9uOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyBSZW1vdmUgaWYgYWxyZWFkeSBleGlzdHMgKG1vdmUgdG8gZnJvbnQpXG4gICAgdGhpcy5kZXN0aW5hdGlvbkhpc3RvcnkgPSB0aGlzLmRlc3RpbmF0aW9uSGlzdG9yeS5maWx0ZXIoZCA9PiBkICE9PSBkZXN0aW5hdGlvbilcbiAgICAvLyBBZGQgdG8gZnJvbnRcbiAgICB0aGlzLmRlc3RpbmF0aW9uSGlzdG9yeS51bnNoaWZ0KGRlc3RpbmF0aW9uKVxuICAgIC8vIEtlZXAgb25seSBsYXN0IDIwXG4gICAgaWYgKHRoaXMuZGVzdGluYXRpb25IaXN0b3J5Lmxlbmd0aCA+IDIwKSB7XG4gICAgICB0aGlzLmRlc3RpbmF0aW9uSGlzdG9yeSA9IHRoaXMuZGVzdGluYXRpb25IaXN0b3J5LnNsaWNlKDAsIDIwKVxuICAgIH1cbiAgICAvLyBTYXZlIHRvIGxvY2FsU3RvcmFnZVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdpbnRlcm5ldF9zZXJ2aWNlc19kZXN0aW5hdGlvbl9oaXN0b3J5JywgSlNPTi5zdHJpbmdpZnkodGhpcy5kZXN0aW5hdGlvbkhpc3RvcnkpKVxuICB9XG5cbiAgcHJpdmF0ZSBsb2FkSGlzdG9yeSgpOiB2b2lkIHtcbiAgICBjb25zdCBzdG9yZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaW50ZXJuZXRfc2VydmljZXNfZGVzdGluYXRpb25faGlzdG9yeScpXG4gICAgaWYgKHN0b3JlZCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbkhpc3RvcnkgPSBKU09OLnBhcnNlKHN0b3JlZClcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbkhpc3RvcnkgPSBbXVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVySGlzdG9yeSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5kZXN0aW5hdGlvbkhpc3RvcnkubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLmhpc3RvcnlTZWN0aW9uVGFyZ2V0LmlubmVySFRNTCA9IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtY2VudGVyIHRleHQtZ3JheS00MDAgcHktMTJcIj5cbiAgICAgICAgICA8c3ZnIGNsYXNzPVwidy0xNiBoLTE2IG14LWF1dG8gbWItNCB0ZXh0LWdyYXktMzAwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gICAgICAgICAgICA8cGF0aCBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBzdHJva2Utd2lkdGg9XCIyXCIgZD1cIk0xMiA4djRsMyAzbTYtM2E5IDkgMCAxMS0xOCAwIDkgOSAwIDAxMTggMHpcIj48L3BhdGg+XG4gICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgPHA+XHU2NjgyXHU2NUUwXHU1Mzg2XHU1M0YyXHU5MDA5XHU2MkU5XHU4QkIwXHU1RjU1PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGBcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIEdldCBjdXJyZW50IHJlZ2lvbiBmcm9tIFVSTCBvciBkZWZhdWx0XG4gICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKVxuICAgIGNvbnN0IGN1cnJlbnRSZWdpb24gPSB1cmxQYXJhbXMuZ2V0KCdyZWdpb24nKSB8fCAnXHU0RTJEXHU1NkZEXHU5OTk5XHU2RTJGJ1xuICAgIGNvbnN0IGN1cnJlbnRUYWIgPSB1cmxQYXJhbXMuZ2V0KCd0YWInKSB8fCAnc2ltX2NhcmQnXG5cbiAgICBjb25zdCBoaXN0b3J5SHRtbCA9IGBcbiAgICAgIDxoMyBjbGFzcz1cInRleHQtc20gZm9udC1ib2xkIHRleHQtZ3JheS01MDAgbWItM1wiPlx1NjcwMFx1OEZEMVx1OTAwOVx1NjJFOTwvaDM+XG4gICAgICA8ZGl2IGNsYXNzPVwiZ3JpZCBncmlkLWNvbHMtMyBnYXAtM1wiPlxuICAgICAgICAke3RoaXMuZGVzdGluYXRpb25IaXN0b3J5Lm1hcChkZXN0ID0+IHtcbiAgICBjb25zdCBpc1NlbGVjdGVkID0gZGVzdCA9PT0gY3VycmVudFJlZ2lvblxuICAgIHJldHVybiBgXG4gICAgICAgICAgICA8YSBocmVmPVwiL2ludGVybmV0X3NlcnZpY2VzP3JlZ2lvbj0ke2VuY29kZVVSSUNvbXBvbmVudChkZXN0KX0mdGFiPSR7Y3VycmVudFRhYn1cIiBcbiAgICAgICAgICAgICAgIGRhdGEtYWN0aW9uPVwiY2xpY2stPmludGVybmV0LXNlcnZpY2VzI3NlbGVjdERlc3RpbmF0aW9uXCIgXG4gICAgICAgICAgICAgICBkYXRhLWRlc3RpbmF0aW9uPVwiJHtkZXN0fVwiXG4gICAgICAgICAgICAgICBjbGFzcz1cInAtMyB0ZXh0LWNlbnRlciByb3VuZGVkLWxnIGJvcmRlci0yIHRyYW5zaXRpb24tYWxsICR7XG4gIGlzU2VsZWN0ZWQgXG4gICAgPyAnYm9yZGVyLXllbGxvdy01MDAgYmcteWVsbG93LTUwIGZvbnQtYm9sZCB0ZXh0LXllbGxvdy02MDAnIFxuICAgIDogJ2JvcmRlci1ncmF5LTIwMCBob3Zlcjpib3JkZXIteWVsbG93LTMwMCdcbn1cIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0ZXh0LXNtXCI+JHtkZXN0fTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAke2lzU2VsZWN0ZWQgPyBgXG4gICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPVwidy00IGgtNCBtbC0xIHRleHQteWVsbG93LTUwMFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCI+XG4gICAgICAgICAgICAgICAgICAgIDxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBkPVwiTTE2LjcwNyA1LjI5M2ExIDEgMCAwMTAgMS40MTRsLTggOGExIDEgMCAwMS0xLjQxNCAwbC00LTRhMSAxIDAgMDExLjQxNC0xLjQxNEw4IDEyLjU4Nmw3LjI5My03LjI5M2ExIDEgMCAwMTEuNDE0IDB6XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpcC1ydWxlPVwiZXZlbm9kZFwiLz5cbiAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgIGAgOiAnJ31cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2E+XG4gICAgICAgICAgYFxuICB9KS5qb2luKCcnKX1cbiAgICAgIDwvZGl2PlxuICAgIGBcbiAgICB0aGlzLmhpc3RvcnlTZWN0aW9uVGFyZ2V0LmlubmVySFRNTCA9IGhpc3RvcnlIdG1sXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiU2ltQ2FyZEZpbHRlciBjb25uZWN0ZWRcIilcbiAgfVxuXG4gIHNlbGVjdERlbGl2ZXJ5KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBtZXRob2QgPSBidXR0b24uZGF0YXNldC5tZXRob2RcbiAgICBcbiAgICBjb25zdCBhbGxCdXR0b25zID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLW1ldGhvZF0nKVxuICAgIGFsbEJ1dHRvbnMuZm9yRWFjaChiID0+IHtcbiAgICAgIGIuY2xhc3NMaXN0LnJlbW92ZSgnZm9udC1tZWRpdW0nKVxuICAgICAgYi5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktNzAwJylcbiAgICB9KVxuICAgIFxuICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdmb250LW1lZGl1bScpXG4gIH1cblxuICBzZWxlY3REYXlzKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBcbiAgICBjb25zdCBhbGxCdXR0b25zID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWRheXNdJylcbiAgICBhbGxCdXR0b25zLmZvckVhY2goYiA9PiB7XG4gICAgICBiLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLVsjRkZGOEQ4XScsICdib3JkZXItWyNGRkNDMDBdJywgJ2ZvbnQtbWVkaXVtJylcbiAgICAgIGIuY2xhc3NMaXN0LmFkZCgnYmctZ3JheS01MCcsICd0ZXh0LWdyYXktNzAwJylcbiAgICAgIC8vIFJlbW92ZSBjaGVja21hcmtcbiAgICAgIGIucXVlcnlTZWxlY3RvckFsbCgnLmFic29sdXRlJykuZm9yRWFjaChlbCA9PiBlbC5yZW1vdmUoKSlcbiAgICB9KVxuICAgIFxuICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdiZy1bI0ZGRjhEOF0nLCAnYm9yZGVyLVsjRkZDQzAwXScsICdmb250LW1lZGl1bScpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLWdyYXktNTAnLCAndGV4dC1ncmF5LTcwMCcpXG4gICAgXG4gICAgLy8gQWRkIGNoZWNrbWFya1xuICAgIGNvbnN0IGNoZWNrbWFya0hUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwiYWJzb2x1dGUgYm90dG9tLTAgcmlnaHQtMCB3LTMgaC0zIGJnLVsjRkZDQzAwXSByb3VuZGVkLXRsLWxnXCI+PC9kaXY+XG4gICAgICA8c3ZnIGNsYXNzPVwiYWJzb2x1dGUgYm90dG9tLTAuNSByaWdodC0wLjUgdy0xLjUgaC0xLjUgdGV4dC1ibGFjayB6LTEwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gICAgICAgIDxwYXRoIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZS13aWR0aD1cIjRcIiBkPVwiTTUgMTNsNCA0TDE5IDdcIj48L3BhdGg+XG4gICAgICA8L3N2Zz5cbiAgICBgXG4gICAgYnV0dG9uLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgY2hlY2ttYXJrSFRNTClcbiAgfVxuXG4gIHNlbGVjdERhdGEoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIFxuICAgIGNvbnN0IGFsbEJ1dHRvbnMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtZGF0YV0nKVxuICAgIGFsbEJ1dHRvbnMuZm9yRWFjaChiID0+IHtcbiAgICAgIGIuY2xhc3NMaXN0LnJlbW92ZSgnYmctWyNGRkY4RDhdJywgJ2JvcmRlci1bI0ZGQ0MwMF0nLCAnZm9udC1tZWRpdW0nKVxuICAgICAgYi5jbGFzc0xpc3QuYWRkKCdiZy1ncmF5LTUwJywgJ3RleHQtZ3JheS03MDAnKVxuICAgICAgLy8gUmVtb3ZlIGNoZWNrbWFya1xuICAgICAgYi5xdWVyeVNlbGVjdG9yQWxsKCcuYWJzb2x1dGUnKS5mb3JFYWNoKGVsID0+IGVsLnJlbW92ZSgpKVxuICAgIH0pXG4gICAgXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2JnLVsjRkZGOEQ4XScsICdib3JkZXItWyNGRkNDMDBdJywgJ2ZvbnQtbWVkaXVtJylcbiAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYmctZ3JheS01MCcsICd0ZXh0LWdyYXktNzAwJylcbiAgICBcbiAgICAvLyBBZGQgY2hlY2ttYXJrXG4gICAgY29uc3QgY2hlY2ttYXJrSFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJhYnNvbHV0ZSBib3R0b20tMCByaWdodC0wIHctMyBoLTMgYmctWyNGRkNDMDBdIHJvdW5kZWQtdGwtbGdcIj48L2Rpdj5cbiAgICAgIDxzdmcgY2xhc3M9XCJhYnNvbHV0ZSBib3R0b20tMC41IHJpZ2h0LTAuNSB3LTEuNSBoLTEuNSB0ZXh0LWJsYWNrIHotMTBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cbiAgICAgICAgPHBhdGggc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlLXdpZHRoPVwiNFwiIGQ9XCJNNSAxM2w0IDRMMTkgN1wiPjwvcGF0aD5cbiAgICAgIDwvc3ZnPlxuICAgIGBcbiAgICBidXR0b24uaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBjaGVja21hcmtIVE1MKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJ0b3RhbFByaWNlXCIsIFwicGF5bWVudEJ1dHRvblwiXVxuICBkZWNsYXJlIHJlYWRvbmx5IHRvdGFsUHJpY2VUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzVG90YWxQcmljZVRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IHBheW1lbnRCdXR0b25UYXJnZXQ6IEhUTUxBbmNob3JFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUGF5bWVudEJ1dHRvblRhcmdldDogYm9vbGVhblxuXG4gIHByaXZhdGUgc2VsZWN0ZWRQbGFuSWQ6IHN0cmluZyA9IFwiXCJcbiAgcHJpdmF0ZSBzZWxlY3RlZFByaWNlOiBudW1iZXIgPSAzNVxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJEYXRhUGxhbiBjb25uZWN0ZWRcIilcbiAgfVxuXG4gIHNlbGVjdFBsYW4oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBwbGFuSWQgPSBjYXJkLmRhdGFzZXQucGxhbklkIHx8IFwiXCJcbiAgICBjb25zdCBwcmljZSA9IHBhcnNlRmxvYXQoY2FyZC5kYXRhc2V0LnBsYW5QcmljZSB8fCBcIjM1XCIpXG4gICAgXG4gICAgdGhpcy5zZWxlY3RlZFBsYW5JZCA9IHBsYW5JZFxuICAgIHRoaXMuc2VsZWN0ZWRQcmljZSA9IHByaWNlXG4gICAgXG4gICAgLy8gVXBkYXRlIHRvdGFsIHByaWNlXG4gICAgaWYgKHRoaXMuaGFzVG90YWxQcmljZVRhcmdldCkge1xuICAgICAgdGhpcy50b3RhbFByaWNlVGFyZ2V0LnRleHRDb250ZW50ID0gcHJpY2UudG9GaXhlZCgwKVxuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgcGF5bWVudCBidXR0b24gVVJMXG4gICAgaWYgKHRoaXMuaGFzUGF5bWVudEJ1dHRvblRhcmdldCkge1xuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh0aGlzLnBheW1lbnRCdXR0b25UYXJnZXQuaHJlZilcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdvcmRlcmFibGVfaWQnLCBwbGFuSWQpXG4gICAgICB0aGlzLnBheW1lbnRCdXR0b25UYXJnZXQuaHJlZiA9IHVybC50b1N0cmluZygpXG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSBVSSAtIHJlbW92ZSBhbGwgc2VsZWN0aW9ucyBmaXJzdFxuICAgIGNvbnN0IGFsbENhcmRzID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXBsYW4taWRdJylcbiAgICBhbGxDYXJkcy5mb3JFYWNoKGMgPT4ge1xuICAgICAgYy5jbGFzc0xpc3QucmVtb3ZlKCdiZy1bI0ZGRjlFNl0nLCAnYm9yZGVyLVsjRkZEMjAwXScpXG4gICAgICBjLmNsYXNzTGlzdC5hZGQoJ2JnLVsjRjdGOEZBXScpXG4gICAgICAvLyBSZW1vdmUgY2hlY2ttYXJrIGlmIGV4aXN0c1xuICAgICAgY29uc3QgY2hlY2ttYXJrID0gYy5xdWVyeVNlbGVjdG9yKCcuYWJzb2x1dGUnKVxuICAgICAgaWYgKGNoZWNrbWFyaykgY2hlY2ttYXJrLnJlbW92ZSgpXG4gICAgfSlcbiAgICBcbiAgICAvLyBBZGQgc2VsZWN0aW9uIHRvIGNsaWNrZWQgY2FyZFxuICAgIGNhcmQuY2xhc3NMaXN0LmFkZCgnYmctWyNGRkY5RTZdJywgJ2JvcmRlci1bI0ZGRDIwMF0nKVxuICAgIGNhcmQuY2xhc3NMaXN0LnJlbW92ZSgnYmctWyNGN0Y4RkFdJylcbiAgICBcbiAgICAvLyBBZGQgY2hlY2ttYXJrXG4gICAgY29uc3QgY2hlY2ttYXJrSFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJhYnNvbHV0ZSBib3R0b20tMCByaWdodC0wIHctMCBoLTAgYm9yZGVyLXNvbGlkIGJvcmRlci1bMF8wXzIwcHhfMjRweF0gYm9yZGVyLXRyYW5zcGFyZW50IGJvcmRlci1iLVsjRkZEMjAwXSByb3VuZGVkLWJyLWxnXCI+XG4gICAgICAgIDxzdmcgY2xhc3M9XCJhYnNvbHV0ZSBib3R0b20tWy0xNnB4XSByaWdodC1bMnB4XSB3LTIgaC0yIHRleHQtYmxhY2tcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2Utd2lkdGg9XCI0XCI+XG4gICAgICAgICAgPHBhdGggc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgZD1cIk01IDEzbDQgNEwxOSA3XCI+PC9wYXRoPlxuICAgICAgICA8L3N2Zz5cbiAgICAgIDwvZGl2PlxuICAgIGBcbiAgICBjYXJkLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgY2hlY2ttYXJrSFRNTClcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wicXVhbnRpdHlcIiwgXCJ0b3RhbFByaWNlXCIsIFwiY29udGFjdE5hbWVcIiwgXCJjb250YWN0UGhvbmVcIiwgXCJkYXRlUmFuZ2VcIixcbiAgICBcIm1haWxUYWJcIiwgXCJwaWNrdXBUYWJcIiwgXCJhZGRyZXNzU2VjdGlvblwiLCBcIm1haWxBZGRyZXNzXCJdXG4gIFxuICBkZWNsYXJlIHJlYWRvbmx5IHF1YW50aXR5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRvdGFsUHJpY2VUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY29udGFjdE5hbWVUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjb250YWN0UGhvbmVUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkYXRlUmFuZ2VUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbWFpbFRhYlRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBwaWNrdXBUYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgYWRkcmVzc1NlY3Rpb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbWFpbEFkZHJlc3NUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzVG90YWxQcmljZVRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc01haWxUYWJUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNQaWNrdXBUYWJUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNBZGRyZXNzU2VjdGlvblRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc01haWxBZGRyZXNzVGFyZ2V0OiBib29sZWFuXG5cbiAgcHJpdmF0ZSBzZWxlY3RlZFBsYW5JZDogc3RyaW5nID0gXCJcIlxuICBwcml2YXRlIGRhaWx5UHJpY2U6IG51bWJlciA9IDE3XG4gIHByaXZhdGUgZGF5czogbnVtYmVyID0gN1xuICBwcml2YXRlIGN1cnJlbnREZWxpdmVyeU1ldGhvZDogc3RyaW5nID0gJ3BpY2t1cCdcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1OUVEOFx1OEJBNFx1OTAwOVx1NEUyRFx1NzY4NFx1NTk1N1x1OTkxMFx1NEVGN1x1NjgzQ1xuICAgIGNvbnN0IGZpcnN0UGxhbiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS13aWZpLWlkXScpXG4gICAgaWYgKGZpcnN0UGxhbikge1xuICAgICAgY29uc3QgaWQgPSBmaXJzdFBsYW4uZ2V0QXR0cmlidXRlKCdkYXRhLXdpZmktaWQnKVxuICAgICAgY29uc3QgcHJpY2UgPSBmaXJzdFBsYW4uZ2V0QXR0cmlidXRlKCdkYXRhLXdpZmktcHJpY2UnKVxuICAgICAgaWYgKGlkKSB0aGlzLnNlbGVjdGVkUGxhbklkID0gaWRcbiAgICAgIGlmIChwcmljZSkgdGhpcy5kYWlseVByaWNlID0gcGFyc2VGbG9hdChwcmljZSlcbiAgICB9XG4gICAgdGhpcy51cGRhdGVUb3RhbFByaWNlKClcbiAgICB0aGlzLnVwZGF0ZVBheW1lbnRCdXR0b24oKVxuICB9XG5cbiAgc2VsZWN0UGxhbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHBsYW5JZCA9IGNhcmQuZGF0YXNldC53aWZpSWQgfHwgXCJcIlxuICAgIGNvbnN0IHByaWNlID0gcGFyc2VGbG9hdChjYXJkLmRhdGFzZXQud2lmaVByaWNlIHx8IFwiMTdcIilcbiAgICBcbiAgICB0aGlzLnNlbGVjdGVkUGxhbklkID0gcGxhbklkXG4gICAgdGhpcy5kYWlseVByaWNlID0gcHJpY2VcbiAgICB0aGlzLnVwZGF0ZVRvdGFsUHJpY2UoKVxuICAgIFxuICAgIC8vIFx1NjZGNFx1NjVCMFx1NjUyRlx1NEVEOFx1NjMwOVx1OTRBRVx1NzY4NG9yZGVyYWJsZUlkXG4gICAgdGhpcy51cGRhdGVQYXltZW50QnV0dG9uKClcbiAgICBcbiAgICAvLyBVcGRhdGUgVUkgLSByZW1vdmUgYWxsIHNlbGVjdGlvbnMgZmlyc3RcbiAgICBjb25zdCBhbGxDYXJkcyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS13aWZpLWlkXScpXG4gICAgYWxsQ2FyZHMuZm9yRWFjaChjID0+IHtcbiAgICAgIGMuY2xhc3NMaXN0LnJlbW92ZSgnYmctWyNGRkZERjJdJywgJ2JvcmRlci1bI0ZGREQwMF0nKVxuICAgICAgYy5jbGFzc0xpc3QuYWRkKCdiZy13aGl0ZScpXG4gICAgICBjb25zdCBjaGVja21hcmsgPSBjLnF1ZXJ5U2VsZWN0b3IoJy5iZy1bI0ZGREQwMF0nKVxuICAgICAgaWYgKGNoZWNrbWFyaykge1xuICAgICAgICBjaGVja21hcmsub3V0ZXJIVE1MID0gJzxkaXYgY2xhc3M9XCJ3LTUgaC01IG1sLTIgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWZ1bGxcIj48L2Rpdj4nXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICAvLyBBZGQgc2VsZWN0aW9uIHRvIGNsaWNrZWQgY2FyZFxuICAgIGNhcmQuY2xhc3NMaXN0LmFkZCgnYmctWyNGRkZERjJdJywgJ2JvcmRlci1bI0ZGREQwMF0nKVxuICAgIGNhcmQuY2xhc3NMaXN0LnJlbW92ZSgnYmctd2hpdGUnKVxuICAgIGNvbnN0IGNpcmNsZSA9IGNhcmQucXVlcnlTZWxlY3RvcignLmJvcmRlci1ncmF5LTMwMCcpXG4gICAgaWYgKGNpcmNsZSkge1xuICAgICAgY29uc3QgY2hlY2ttYXJrU1ZHID0gJzxzdmcgY2xhc3M9XCJ3LTMuNSBoLTMuNSB0ZXh0LWJsYWNrXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+J1xuICAgICAgICArICc8cGF0aCBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBzdHJva2Utd2lkdGg9XCIzXCIgZD1cIk01IDEzbDQgNEwxOSA3XCI+PC9wYXRoPjwvc3ZnPidcbiAgICAgIGNvbnN0IGNoZWNrbWFya0hUTUwgPSBgPGRpdiBjbGFzcz1cInctNSBoLTUgbWwtMiBiZy1bI0ZGREQwMF0gcm91bmRlZC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+JHtcbiAgICAgICAgY2hlY2ttYXJrU1ZHICB9PC9kaXY+YFxuICAgICAgY2lyY2xlLm91dGVySFRNTCA9IGNoZWNrbWFya0hUTUxcbiAgICB9XG4gIH1cblxuICBzZWxlY3REZWxpdmVyeShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IG1ldGhvZCA9IGJ1dHRvbi5kYXRhc2V0Lm1ldGhvZFxuICAgIFxuICAgIGlmICghbWV0aG9kKSByZXR1cm5cbiAgICBcbiAgICB0aGlzLmN1cnJlbnREZWxpdmVyeU1ldGhvZCA9IG1ldGhvZFxuICAgIFxuICAgIC8vIFx1NjZGNFx1NjVCMFRhYlx1NjgzN1x1NUYwRlxuICAgIGlmICh0aGlzLmhhc01haWxUYWJUYXJnZXQgJiYgdGhpcy5oYXNQaWNrdXBUYWJUYXJnZXQpIHtcbiAgICAgIHRoaXMubWFpbFRhYlRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdmb250LWJvbGQnLCAnYmctd2hpdGUnLCAnc2hhZG93LXNtJywgJ3RleHQtZ3JheS04MDAnKVxuICAgICAgdGhpcy5tYWlsVGFiVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS01MDAnKVxuICAgICAgdGhpcy5waWNrdXBUYWJUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZm9udC1ib2xkJywgJ2JnLXdoaXRlJywgJ3NoYWRvdy1zbScsICd0ZXh0LWdyYXktODAwJylcbiAgICAgIHRoaXMucGlja3VwVGFiVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS01MDAnKVxuICAgICAgXG4gICAgICBpZiAobWV0aG9kID09PSAnbWFpbCcpIHtcbiAgICAgICAgdGhpcy5tYWlsVGFiVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS01MDAnKVxuICAgICAgICB0aGlzLm1haWxUYWJUYXJnZXQuY2xhc3NMaXN0LmFkZCgnZm9udC1ib2xkJywgJ2JnLXdoaXRlJywgJ3NoYWRvdy1zbScsICd0ZXh0LWdyYXktODAwJylcbiAgICAgICAgLy8gXHU2NjNFXHU3OTNBXHU5MEFFXHU1QkM0XHU1NzMwXHU1NzQwXHVGRjBDXHU5NjkwXHU4NUNGXHU4MUVBXHU1M0Q2XHU1NzMwXHU1NzQwXG4gICAgICAgIGlmICh0aGlzLmhhc0FkZHJlc3NTZWN0aW9uVGFyZ2V0KSB0aGlzLmFkZHJlc3NTZWN0aW9uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICAgIGlmICh0aGlzLmhhc01haWxBZGRyZXNzVGFyZ2V0KSB0aGlzLm1haWxBZGRyZXNzVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBpY2t1cFRhYlRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktNTAwJylcbiAgICAgICAgdGhpcy5waWNrdXBUYWJUYXJnZXQuY2xhc3NMaXN0LmFkZCgnZm9udC1ib2xkJywgJ2JnLXdoaXRlJywgJ3NoYWRvdy1zbScsICd0ZXh0LWdyYXktODAwJylcbiAgICAgICAgLy8gXHU2NjNFXHU3OTNBXHU4MUVBXHU1M0Q2XHU1NzMwXHU1NzQwXHVGRjBDXHU5NjkwXHU4NUNGXHU5MEFFXHU1QkM0XHU1NzMwXHU1NzQwXG4gICAgICAgIGlmICh0aGlzLmhhc0FkZHJlc3NTZWN0aW9uVGFyZ2V0KSB0aGlzLmFkZHJlc3NTZWN0aW9uVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICAgIGlmICh0aGlzLmhhc01haWxBZGRyZXNzVGFyZ2V0KSB0aGlzLm1haWxBZGRyZXNzVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaW5jcmVhc2UoKTogdm9pZCB7XG4gICAgY29uc3QgY3VycmVudFF0eSA9IHBhcnNlSW50KHRoaXMucXVhbnRpdHlUYXJnZXQudGV4dENvbnRlbnQgfHwgXCIxXCIpXG4gICAgdGhpcy5xdWFudGl0eVRhcmdldC50ZXh0Q29udGVudCA9IChjdXJyZW50UXR5ICsgMSkudG9TdHJpbmcoKVxuICAgIHRoaXMudXBkYXRlVG90YWxQcmljZSgpXG4gIH1cblxuICBkZWNyZWFzZSgpOiB2b2lkIHtcbiAgICBjb25zdCBjdXJyZW50UXR5ID0gcGFyc2VJbnQodGhpcy5xdWFudGl0eVRhcmdldC50ZXh0Q29udGVudCB8fCBcIjFcIilcbiAgICBpZiAoY3VycmVudFF0eSA+IDEpIHtcbiAgICAgIHRoaXMucXVhbnRpdHlUYXJnZXQudGV4dENvbnRlbnQgPSAoY3VycmVudFF0eSAtIDEpLnRvU3RyaW5nKClcbiAgICAgIHRoaXMudXBkYXRlVG90YWxQcmljZSgpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVUb3RhbFByaWNlKCk6IHZvaWQge1xuICAgIGNvbnN0IHF1YW50aXR5ID0gcGFyc2VJbnQodGhpcy5xdWFudGl0eVRhcmdldC50ZXh0Q29udGVudCB8fCBcIjFcIilcbiAgICBjb25zdCB0b3RhbCA9IHRoaXMuZGFpbHlQcmljZSAqIHRoaXMuZGF5cyAqIHF1YW50aXR5XG4gICAgaWYgKHRoaXMuaGFzVG90YWxQcmljZVRhcmdldCkge1xuICAgICAgdGhpcy50b3RhbFByaWNlVGFyZ2V0LnRleHRDb250ZW50ID0gdG90YWwudG9GaXhlZCgwKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlUGF5bWVudEJ1dHRvbigpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygnW1dpRmldIHVwZGF0ZVBheW1lbnRCdXR0b24gY2FsbGVkLCBzZWxlY3RlZFBsYW5JZDonLCB0aGlzLnNlbGVjdGVkUGxhbklkKVxuICAgIGNvbnN0IHBheW1lbnRMaW5rID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Ejd2lmaS1wYXltZW50LWxpbmsnKSBhcyBIVE1MQW5jaG9yRWxlbWVudFxuICAgIGNvbnNvbGUubG9nKCdbV2lGaV0gRm91bmQgcGF5bWVudExpbms6JywgcGF5bWVudExpbmspXG4gICAgaWYgKHBheW1lbnRMaW5rICYmIHRoaXMuc2VsZWN0ZWRQbGFuSWQpIHtcbiAgICAgIC8vIFx1NjZGNFx1NjVCMGxpbmtcdTc2ODRocmVmXHVGRjBDXHU0RkVFXHU2NTM5b3JkZXJhYmxlX2lkXHU1M0MyXHU2NTcwXG4gICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHBheW1lbnRMaW5rLmhyZWYpXG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnb3JkZXJhYmxlX2lkJywgdGhpcy5zZWxlY3RlZFBsYW5JZClcbiAgICAgIHBheW1lbnRMaW5rLmhyZWYgPSB1cmwudG9TdHJpbmcoKVxuICAgICAgY29uc29sZS5sb2coJ1tXaUZpXSBVcGRhdGVkIHBheW1lbnRMaW5rIGhyZWYgdG86JywgcGF5bWVudExpbmsuaHJlZilcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcInF1YW50aXR5XCIsIFwidG90YWxQcmljZVwiXVxuICBkZWNsYXJlIHJlYWRvbmx5IHF1YW50aXR5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRvdGFsUHJpY2VUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzVG90YWxQcmljZVRhcmdldDogYm9vbGVhblxuXG4gIHByaXZhdGUgYmFzZVByaWNlOiBudW1iZXIgPSAwXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkludGVybmV0T3JkZXJGb3JtIGNvbm5lY3RlZFwiKVxuICAgIGNvbnN0IHRvdGFsUHJpY2VGaWVsZCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pbnRlcm5ldC1vcmRlci1mb3JtLXRhcmdldD1cInRvdGFsUHJpY2VGaWVsZFwiXScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBpZiAodG90YWxQcmljZUZpZWxkKSB7XG4gICAgICB0aGlzLmJhc2VQcmljZSA9IHBhcnNlRmxvYXQodG90YWxQcmljZUZpZWxkLnZhbHVlKSB8fCAwXG4gICAgfVxuICB9XG5cbiAgc2VsZWN0QWRkcmVzcyhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCByYWRpbyA9IGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3Qgc2VsZWN0ZWRJbmRleCA9IHBhcnNlSW50KHJhZGlvLnZhbHVlKVxuICAgIFxuICAgIC8vIFx1NjI3RVx1NTIzMFx1NjI0MFx1NjcwOVx1NTczMFx1NTc0MFx1NzY4NGxhYmVsXG4gICAgY29uc3QgbGFiZWxzID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWludGVybmV0LW9yZGVyLWZvcm0tdGFyZ2V0PVwibWFpbFNlY3Rpb25cIl0gbGFiZWwnKVxuICAgIFxuICAgIGxhYmVscy5mb3JFYWNoKChsYWJlbCwgaW5kZXgpID0+IHtcbiAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NjgzN1x1NUYwRlxuICAgICAgaWYgKGluZGV4ID09PSBzZWxlY3RlZEluZGV4KSB7XG4gICAgICAgIGxhYmVsLmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1bI0ZGREQwMF0nLCAnYmctWyNGRkZFRjhdJylcbiAgICAgICAgbGFiZWwuY2xhc3NMaXN0LnJlbW92ZSgnYm9yZGVyLWdyYXktMjAwJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxhYmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1bI0ZGREQwMF0nLCAnYmctWyNGRkZFRjhdJylcbiAgICAgICAgbGFiZWwuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLWdyYXktMjAwJylcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRW5hYmxlL2Rpc2FibGVcdTVCRjlcdTVFOTRcdTc2ODRoaWRkZW4gZmllbGRzXG4gICAgICBjb25zdCBoaWRkZW5GaWVsZHMgPSBsYWJlbC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwiaGlkZGVuXCJdJylcbiAgICAgIGhpZGRlbkZpZWxkcy5mb3JFYWNoKChmaWVsZCkgPT4ge1xuICAgICAgICAoZmllbGQgYXMgSFRNTElucHV0RWxlbWVudCkuZGlzYWJsZWQgPSAoaW5kZXggIT09IHNlbGVjdGVkSW5kZXgpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBzZWxlY3RQYXNzZW5nZXIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgcmFkaW8gPSBldmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IHNlbGVjdGVkSW5kZXggPSBwYXJzZUludChyYWRpby52YWx1ZSlcbiAgICBcbiAgICAvLyBcdTYyN0VcdTUyMzBcdTYyNDBcdTY3MDlcdTRFNThcdTVCQTJcdTc2ODRsYWJlbFxuICAgIGNvbnN0IGxhYmVscyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1pbnRlcm5ldC1vcmRlci1mb3JtLXRhcmdldD1cInBpY2t1cFNlY3Rpb25cIl0gbGFiZWwnKVxuICAgIFxuICAgIGxhYmVscy5mb3JFYWNoKChsYWJlbCwgaW5kZXgpID0+IHtcbiAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NjgzN1x1NUYwRlxuICAgICAgaWYgKGluZGV4ID09PSBzZWxlY3RlZEluZGV4KSB7XG4gICAgICAgIGxhYmVsLmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1bI0ZGREQwMF0nLCAnYmctWyNGRkZFRjhdJylcbiAgICAgICAgbGFiZWwuY2xhc3NMaXN0LnJlbW92ZSgnYm9yZGVyLWdyYXktMjAwJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxhYmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1bI0ZGREQwMF0nLCAnYmctWyNGRkZFRjhdJylcbiAgICAgICAgbGFiZWwuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLWdyYXktMjAwJylcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRW5hYmxlL2Rpc2FibGVcdTVCRjlcdTVFOTRcdTc2ODRoaWRkZW4gZmllbGRzXG4gICAgICBjb25zdCBoaWRkZW5GaWVsZHMgPSBsYWJlbC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwiaGlkZGVuXCJdJylcbiAgICAgIGhpZGRlbkZpZWxkcy5mb3JFYWNoKChmaWVsZCkgPT4ge1xuICAgICAgICAoZmllbGQgYXMgSFRNTElucHV0RWxlbWVudCkuZGlzYWJsZWQgPSAoaW5kZXggIT09IHNlbGVjdGVkSW5kZXgpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBpbmNyZWFzZSgpOiB2b2lkIHtcbiAgICBjb25zdCBjdXJyZW50UXR5ID0gcGFyc2VJbnQodGhpcy5xdWFudGl0eVRhcmdldC50ZXh0Q29udGVudCB8fCBcIjFcIilcbiAgICBjb25zdCBuZXdRdHkgPSBjdXJyZW50UXR5ICsgMVxuICAgIHRoaXMucXVhbnRpdHlUYXJnZXQudGV4dENvbnRlbnQgPSBuZXdRdHkudG9TdHJpbmcoKVxuICAgIHRoaXMudXBkYXRlUXVhbnRpdHlGaWVsZChuZXdRdHkpXG4gICAgdGhpcy51cGRhdGVUb3RhbFByaWNlKG5ld1F0eSlcbiAgfVxuXG4gIGRlY3JlYXNlKCk6IHZvaWQge1xuICAgIGNvbnN0IGN1cnJlbnRRdHkgPSBwYXJzZUludCh0aGlzLnF1YW50aXR5VGFyZ2V0LnRleHRDb250ZW50IHx8IFwiMVwiKVxuICAgIGlmIChjdXJyZW50UXR5ID4gMSkge1xuICAgICAgY29uc3QgbmV3UXR5ID0gY3VycmVudFF0eSAtIDFcbiAgICAgIHRoaXMucXVhbnRpdHlUYXJnZXQudGV4dENvbnRlbnQgPSBuZXdRdHkudG9TdHJpbmcoKVxuICAgICAgdGhpcy51cGRhdGVRdWFudGl0eUZpZWxkKG5ld1F0eSlcbiAgICAgIHRoaXMudXBkYXRlVG90YWxQcmljZShuZXdRdHkpXG4gICAgfVxuICB9XG5cbiAgdXBkYXRlUmVudGFsRGF5cyhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBpbnB1dCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgZGF5cyA9IHBhcnNlSW50KGlucHV0LnZhbHVlKSB8fCAxXG4gICAgdGhpcy51cGRhdGVUb3RhbFByaWNlKGRheXMpXG4gICAgXG4gICAgLy8gXHU2NkY0XHU2NUIwcmVudGFsX2luZm9cdTc2ODRoaWRkZW4gZmllbGRzXG4gICAgY29uc3QgcmVudGFsRGF5c0ZpZWxkID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWludGVybmV0LW9yZGVyLWZvcm0tdGFyZ2V0PVwicmVudGFsRGF5c0ZpZWxkXCJdJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGlmIChyZW50YWxEYXlzRmllbGQpIHtcbiAgICAgIHJlbnRhbERheXNGaWVsZC52YWx1ZSA9IGRheXMudG9TdHJpbmcoKVxuICAgICAgXG4gICAgICAvLyBcdThCQTFcdTdCOTdyZXR1cm5fZGF0ZVxuICAgICAgY29uc3QgcGlja3VwRGF0ZUZpZWxkID0gcmVudGFsRGF5c0ZpZWxkLmNsb3Nlc3QoJ2RpdicpPy5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lKj1cIltwaWNrdXBfZGF0ZV1cIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgICBjb25zdCByZXR1cm5EYXRlRmllbGQgPSByZW50YWxEYXlzRmllbGQuY2xvc2VzdCgnZGl2Jyk/LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWUqPVwiW3JldHVybl9kYXRlXVwiXScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICAgIFxuICAgICAgaWYgKHBpY2t1cERhdGVGaWVsZCAmJiByZXR1cm5EYXRlRmllbGQpIHtcbiAgICAgICAgY29uc3QgcGlja3VwRGF0ZSA9IG5ldyBEYXRlKHBpY2t1cERhdGVGaWVsZC52YWx1ZSlcbiAgICAgICAgY29uc3QgcmV0dXJuRGF0ZSA9IG5ldyBEYXRlKHBpY2t1cERhdGUpXG4gICAgICAgIHJldHVybkRhdGUuc2V0RGF0ZShyZXR1cm5EYXRlLmdldERhdGUoKSArIGRheXMpXG4gICAgICAgIHJldHVybkRhdGVGaWVsZC52YWx1ZSA9IHJldHVybkRhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc2VsZWN0RGVsaXZlcnlNZXRob2QoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgcmFkaW8gPSBldmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IG1haWxTZWN0aW9uID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWludGVybmV0LW9yZGVyLWZvcm0tdGFyZ2V0PVwibWFpbFNlY3Rpb25cIl0nKVxuICAgIGNvbnN0IHBpY2t1cFNlY3Rpb24gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaW50ZXJuZXQtb3JkZXItZm9ybS10YXJnZXQ9XCJwaWNrdXBTZWN0aW9uXCJdJylcbiAgICBjb25zdCBtYWlsTGFiZWwgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaW50ZXJuZXQtb3JkZXItZm9ybS10YXJnZXQ9XCJtYWlsTGFiZWxcIl0nKVxuICAgIGNvbnN0IHBpY2t1cExhYmVsID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWludGVybmV0LW9yZGVyLWZvcm0tdGFyZ2V0PVwicGlja3VwTGFiZWxcIl0nKVxuXG4gICAgaWYgKHJhZGlvLnZhbHVlID09PSAnbWFpbCcpIHtcbiAgICAgIG1haWxTZWN0aW9uPy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgcGlja3VwU2VjdGlvbj8uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgIG1haWxMYWJlbD8uY2xhc3NMaXN0LmFkZCgnYm9yZGVyLVsjRkZERDAwXScsICdiZy1bI0ZGRkVGOF0nKVxuICAgICAgcGlja3VwTGFiZWw/LmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1bI0ZGREQwMF0nLCAnYmctWyNGRkZFRjhdJylcbiAgICB9IGVsc2Uge1xuICAgICAgbWFpbFNlY3Rpb24/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICBwaWNrdXBTZWN0aW9uPy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgcGlja3VwTGFiZWw/LmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1bI0ZGREQwMF0nLCAnYmctWyNGRkZFRjhdJylcbiAgICAgIG1haWxMYWJlbD8uY2xhc3NMaXN0LnJlbW92ZSgnYm9yZGVyLVsjRkZERDAwXScsICdiZy1bI0ZGRkVGOF0nKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlUXVhbnRpdHlGaWVsZChxdWFudGl0eTogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgcXVhbnRpdHlGaWVsZCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pbnRlcm5ldC1vcmRlci1mb3JtLXRhcmdldD1cInF1YW50aXR5RmllbGRcIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgaWYgKHF1YW50aXR5RmllbGQpIHtcbiAgICAgIHF1YW50aXR5RmllbGQudmFsdWUgPSBxdWFudGl0eS50b1N0cmluZygpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVUb3RhbFByaWNlKG11bHRpcGxpZXI6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IHRvdGFsID0gdGhpcy5iYXNlUHJpY2UgKiBtdWx0aXBsaWVyXG4gICAgaWYgKHRoaXMuaGFzVG90YWxQcmljZVRhcmdldCkge1xuICAgICAgdGhpcy50b3RhbFByaWNlVGFyZ2V0LnRleHRDb250ZW50ID0gdG90YWwudG9GaXhlZCgwKVxuICAgIH1cbiAgICBjb25zdCB0b3RhbFByaWNlRmllbGQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaW50ZXJuZXQtb3JkZXItZm9ybS10YXJnZXQ9XCJ0b3RhbFByaWNlRmllbGRcIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgaWYgKHRvdGFsUHJpY2VGaWVsZCkge1xuICAgICAgdG90YWxQcmljZUZpZWxkLnZhbHVlID0gdG90YWwudG9TdHJpbmcoKVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHNlbGVjdChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLy8gVXBkYXRlIFVJIHRvIHNob3cgdGhpcyBjYXJkIGlzIHNlbGVjdGVkXG4gICAgY29uc3QgY2FyZCA9IHRoaXMuZWxlbWVudFxuICAgIC8vIFJlbW92ZSBzZWxlY3Rpb24gZnJvbSBhbGwgb3RoZXIgY2FyZHNcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1jb250cm9sbGVyPVwicHJvZHVjdC1jYXJkXCJdJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICBjb25zdCBjaGVja2JveCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy53LTUuaC01LnJvdW5kZWQtZnVsbCcpXG4gICAgICBpZiAoY2hlY2tib3ggJiYgIWNoZWNrYm94LmNsYXNzTGlzdC5jb250YWlucygnYm9yZGVyJykpIHtcbiAgICAgICAgLy8gQWxyZWFkeSBzZWxlY3RlZCwgY29udmVydCB0byB1bnNlbGVjdGVkXG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1bI0ZGQ0MwMF0nLCAnYmctWyNGRkZFRjhdJylcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLWdyYXktMTAwJywgJ2JnLXdoaXRlJylcbiAgICAgIH1cbiAgICB9KVxuICAgIC8vIEFkZCBzZWxlY3Rpb24gdG8gdGhpcyBjYXJkXG4gICAgY2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItZ3JheS0xMDAnLCAnYmctd2hpdGUnKVxuICAgIGNhcmQuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLVsjRkZDQzAwXScsICdiZy1bI0ZGRkVGOF0nKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJxdWFudGl0eVwiLCBcInRvdGFsUHJpY2VcIl1cbiAgc3RhdGljIHZhbHVlcyA9IHsgb3JkZXJhYmxlVHlwZTogU3RyaW5nIH1cbiAgZGVjbGFyZSByZWFkb25seSBxdWFudGl0eVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0b3RhbFByaWNlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IG9yZGVyYWJsZVR5cGVWYWx1ZTogc3RyaW5nXG5cbiAgcHJpdmF0ZSBiYXNlUHJpY2U6IG51bWJlciA9IDkuOVxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgLy8gR2V0IGJhc2UgcHJpY2UgZnJvbSBmaXJzdCBwcm9kdWN0XG4gICAgY29uc3QgZmlyc3RQcm9kdWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtY29udHJvbGxlcj1cInByb2R1Y3QtY2FyZFwiXScpXG4gICAgaWYgKGZpcnN0UHJvZHVjdCkge1xuICAgICAgY29uc3QgcHJpY2VFbCA9IGZpcnN0UHJvZHVjdC5xdWVyeVNlbGVjdG9yKCcudGV4dC14bC5mb250LWJvbGQudGV4dC1cXFxcW1xcXFwjRkY0NDAwXFxcXF0nKVxuICAgICAgaWYgKHByaWNlRWwpIHtcbiAgICAgICAgdGhpcy5iYXNlUHJpY2UgPSBwYXJzZUZsb2F0KHByaWNlRWwudGV4dENvbnRlbnQgfHwgJzkuOScpXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMudXBkYXRlVG90YWxQcmljZSgpXG4gIH1cblxuICBkZWNyZWFzZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgY3VycmVudFF0eSA9IHBhcnNlSW50KHRoaXMucXVhbnRpdHlUYXJnZXQudGV4dENvbnRlbnQgfHwgJzEnKVxuICAgIGlmIChjdXJyZW50UXR5ID4gMSkge1xuICAgICAgdGhpcy5xdWFudGl0eVRhcmdldC50ZXh0Q29udGVudCA9IChjdXJyZW50UXR5IC0gMSkudG9TdHJpbmcoKVxuICAgICAgdGhpcy51cGRhdGVUb3RhbFByaWNlKClcbiAgICB9XG4gIH1cblxuICBpbmNyZWFzZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgY3VycmVudFF0eSA9IHBhcnNlSW50KHRoaXMucXVhbnRpdHlUYXJnZXQudGV4dENvbnRlbnQgfHwgJzEnKVxuICAgIHRoaXMucXVhbnRpdHlUYXJnZXQudGV4dENvbnRlbnQgPSAoY3VycmVudFF0eSArIDEpLnRvU3RyaW5nKClcbiAgICB0aGlzLnVwZGF0ZVRvdGFsUHJpY2UoKVxuICB9XG5cbiAgY2hlY2tvdXQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIFxuICAgIC8vIEZpbmQgc2VsZWN0ZWQgcHJvZHVjdCBieSBjaGVja2luZyBhbGwgcHJvZHVjdCBjYXJkc1xuICAgIGNvbnN0IGFsbENhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtY29udHJvbGxlcj1cInByb2R1Y3QtY2FyZFwiXScpXG4gICAgbGV0IHNlbGVjdGVkQ2FyZDogRWxlbWVudCB8IG51bGwgPSBudWxsXG4gICAgXG4gICAgLy8gRmluZCB0aGUgY2FyZCB3aXRoIHllbGxvdyBib3JkZXIgKEZGQ0MwMClcbiAgICBhbGxDYXJkcy5mb3JFYWNoKChjYXJkKSA9PiB7XG4gICAgICBjb25zdCBjbGFzc2VzID0gY2FyZC5jbGFzc05hbWVcbiAgICAgIGlmIChjbGFzc2VzLmluY2x1ZGVzKCdGRkNDMDAnKSB8fCBjbGFzc2VzLmluY2x1ZGVzKCdib3JkZXItWyNGRkNDMDBdJykpIHtcbiAgICAgICAgc2VsZWN0ZWRDYXJkID0gY2FyZFxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgLy8gRmFsbGJhY2s6IGlmIG5vIGNhcmQgc2VsZWN0ZWQsIHVzZSB0aGUgZmlyc3QgY2FyZCAoZGVmYXVsdCBzZWxlY3RlZClcbiAgICBpZiAoIXNlbGVjdGVkQ2FyZCAmJiBhbGxDYXJkcy5sZW5ndGggPiAwKSB7XG4gICAgICBzZWxlY3RlZENhcmQgPSBhbGxDYXJkc1swXVxuICAgIH1cbiAgICBcbiAgICBpZiAoIXNlbGVjdGVkQ2FyZCkge1xuICAgICAgYWxlcnQoJ1x1OEJGN1x1OTAwOVx1NjJFOVx1NEUwMFx1NEUyQVNJTVx1NTM2MVx1NEVBN1x1NTRDMScpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBvcmRlcmFibGVJZCA9IChzZWxlY3RlZENhcmQgYXMgSFRNTEVsZW1lbnQpLmRhdGFzZXQucHJvZHVjdElkXG4gICAgY29uc3Qgb3JkZXJhYmxlVHlwZSA9IHRoaXMub3JkZXJhYmxlVHlwZVZhbHVlXG4gICAgY29uc3QgcXVhbnRpdHkgPSB0aGlzLnF1YW50aXR5VGFyZ2V0LnRleHRDb250ZW50XG5cbiAgICAvLyBOYXZpZ2F0ZSB0byBvcmRlciBwYWdlIHdpdGggcGFyYW1zXG4gICAgY29uc3QgdXJsID0gYC9pbnRlcm5ldF9vcmRlcnMvbmV3P29yZGVyYWJsZV90eXBlPSR7b3JkZXJhYmxlVHlwZX0mb3JkZXJhYmxlX2lkPSR7b3JkZXJhYmxlSWR9JnF1YW50aXR5PSR7cXVhbnRpdHl9YFxuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsXG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVRvdGFsUHJpY2UoKTogdm9pZCB7XG4gICAgY29uc3QgcXVhbnRpdHkgPSBwYXJzZUludCh0aGlzLnF1YW50aXR5VGFyZ2V0LnRleHRDb250ZW50IHx8ICcxJylcbiAgICBjb25zdCB0b3RhbCA9IHRoaXMuYmFzZVByaWNlICogcXVhbnRpdHlcbiAgICB0aGlzLnRvdGFsUHJpY2VUYXJnZXQudGV4dENvbnRlbnQgPSB0b3RhbC50b0ZpeGVkKDEpXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcIm1vZGFsXCIsIFwiY29udGVudFwiXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY29udGVudFRhcmdldDogSFRNTEVsZW1lbnRcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiUXJjb2RlTW9kYWwgY29udHJvbGxlciBjb25uZWN0ZWRcIilcbiAgfVxuXG4gIC8vIFx1NjYzRVx1NzkzQVx1NEU4Q1x1N0VGNFx1NzgwMVx1NUYzOVx1N0E5N1xuICBzaG93KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICAvLyBcdTZERkJcdTUyQTBcdTZERTFcdTUxNjVcdTUyQThcdTc1M0JcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuY29udGVudFRhcmdldC5jbGFzc0xpc3QuYWRkKFwic2NhbGUtMTAwXCIsIFwib3BhY2l0eS0xMDBcIilcbiAgICB9LCAxMClcbiAgfVxuXG4gIC8vIFx1OTY5MFx1ODVDRlx1NEU4Q1x1N0VGNFx1NzgwMVx1NUYzOVx1N0E5N1xuICBoaWRlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAvLyBcdTZERkJcdTUyQTBcdTZERTFcdTUxRkFcdTUyQThcdTc1M0JcbiAgICB0aGlzLmNvbnRlbnRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcInNjYWxlLTEwMFwiLCBcIm9wYWNpdHktMTAwXCIpXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgICB9LCAyMDApXG4gIH1cblxuICAvLyBcdTcwQjlcdTUxRkJcdTgwQ0NcdTY2NkZcdTUxNzNcdTk1RURcdTVGMzlcdTdBOTdcbiAgYmFja2Ryb3BDbGljayhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSB0aGlzLm1vZGFsVGFyZ2V0KSB7XG4gICAgICB0aGlzLmhpZGUoZXZlbnQpXG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJtb2RhbFwiLFxuICAgIFwic2VhcmNoSW5wdXRcIixcbiAgICBcImxvY2F0aW9uTGlzdFwiLFxuICAgIFwibG9jYXRpb25JbnB1dFwiLFxuICAgIFwibG9jYXRpb25EaXNwbGF5XCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgbG9jYXRpb25UeXBlOiBTdHJpbmcsIC8vIFwiZnJvbVwiIG9yIFwidG9cIlxuICAgIGN1cnJlbnRDaXR5OiBTdHJpbmcsIC8vIGN1cnJlbnQgc2VsZWN0ZWQgY2l0eVxuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzZWFyY2hJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGxvY2F0aW9uTGlzdFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBsb2NhdGlvbklucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbG9jYXRpb25EaXNwbGF5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0xvY2F0aW9uSW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNMb2NhdGlvbkRpc3BsYXlUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBsb2NhdGlvblR5cGVWYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgY3VycmVudENpdHlWYWx1ZTogc3RyaW5nXG5cbiAgcHJpdmF0ZSBzZWxlY3RlZExvY2F0aW9uOiB7IG5hbWU6IHN0cmluZzsgYWRkcmVzczogc3RyaW5nIH0gfCBudWxsID0gbnVsbFxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJMb2NhdGlvblNlbGVjdG9yIGNvbm5lY3RlZFwiKVxuICAgIC8vIEdldCBpbml0aWFsIGNpdHkgZnJvbSB0aGUgcGFnZVxuICAgIHRoaXMuaW5pdGlhbGl6ZUN1cnJlbnRDaXR5KClcbiAgICAvLyBMaXN0ZW4gZm9yIGNpdHkgY2hhbmdlc1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NpdHktc2VsZWN0b3I6Y2l0eS1zZWxlY3RlZCcsIHRoaXMuaGFuZGxlQ2l0eUNoYW5nZS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkxvY2F0aW9uU2VsZWN0b3IgZGlzY29ubmVjdGVkXCIpXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2l0eS1zZWxlY3RvcjpjaXR5LXNlbGVjdGVkJywgdGhpcy5oYW5kbGVDaXR5Q2hhbmdlLmJpbmQodGhpcykpXG4gIH1cblxuICAvLyBJbml0aWFsaXplIGN1cnJlbnQgY2l0eSBmcm9tIHRoZSBwYWdlXG4gIHByaXZhdGUgaW5pdGlhbGl6ZUN1cnJlbnRDaXR5KCk6IHZvaWQge1xuICAgIC8vIFRyeSB0byBnZXQgY2l0eSBmcm9tIGNhci1yZW50YWwtdGFicyBjaXR5IGRpc3BsYXlcbiAgICBjb25zdCBjaXR5RGlzcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNhci1yZW50YWwtdGFicy10YXJnZXQ9XCJjaXR5RGlzcGxheVwiXScpXG4gICAgaWYgKGNpdHlEaXNwbGF5ICYmIGNpdHlEaXNwbGF5LnRleHRDb250ZW50KSB7XG4gICAgICB0aGlzLmN1cnJlbnRDaXR5VmFsdWUgPSBjaXR5RGlzcGxheS50ZXh0Q29udGVudC50cmltKClcbiAgICAgIGNvbnNvbGUubG9nKCdMb2NhdGlvblNlbGVjdG9yOiBJbml0aWFsIGNpdHkgZnJvbSBET006JywgdGhpcy5jdXJyZW50Q2l0eVZhbHVlKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmN1cnJlbnRDaXR5VmFsdWUgPSAnXHU2REYxXHU1NzMzJyAvLyBmYWxsYmFjayB0byBTaGVuemhlblxuICAgICAgY29uc29sZS5sb2coJ0xvY2F0aW9uU2VsZWN0b3I6IFVzaW5nIGZhbGxiYWNrIGNpdHk6JywgdGhpcy5jdXJyZW50Q2l0eVZhbHVlKVxuICAgIH1cbiAgfVxuXG4gIC8vIEhhbmRsZSBjaXR5IGNoYW5nZSBldmVudFxuICBwcml2YXRlIGhhbmRsZUNpdHlDaGFuZ2UoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY3VzdG9tRXZlbnQgPSBldmVudCBhcyBDdXN0b21FdmVudFxuICAgIGNvbnN0IHsgY2l0eU5hbWUgfSA9IGN1c3RvbUV2ZW50LmRldGFpbFxuICAgIGNvbnNvbGUubG9nKCdMb2NhdGlvblNlbGVjdG9yOiBDaXR5IGNoYW5nZWQgdG8nLCBjaXR5TmFtZSlcbiAgICB0aGlzLmN1cnJlbnRDaXR5VmFsdWUgPSBjaXR5TmFtZVxuICAgIC8vIFJlbG9hZCBsb2NhdGlvbnMgd2hlbiBtb2RhbCBpcyBvcGVuZWRcbiAgfVxuXG4gIG9wZW5Nb2RhbCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygnW0xvY2F0aW9uU2VsZWN0b3JdIG9wZW5Nb2RhbCBjYWxsZWQnKVxuICAgIGNvbnNvbGUubG9nKCdbTG9jYXRpb25TZWxlY3Rvcl0gY3VycmVudENpdHlWYWx1ZTonLCB0aGlzLmN1cnJlbnRDaXR5VmFsdWUpXG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgdGhpcy5zZWFyY2hJbnB1dFRhcmdldC52YWx1ZSA9IFwiXCJcbiAgICB0aGlzLnNlYXJjaElucHV0VGFyZ2V0LmZvY3VzKClcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIlxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdbTG9jYXRpb25TZWxlY3Rvcl0gQWJvdXQgdG8gY2FsbCBsb2FkTG9jYXRpb25zKCknKVxuICAgIC8vIExvYWQgbG9jYXRpb25zIGZvciBjdXJyZW50IGNpdHlcbiAgICB0aGlzLmxvYWRMb2NhdGlvbnMoKVxuICAgIGNvbnNvbGUubG9nKCdbTG9jYXRpb25TZWxlY3Rvcl0gbG9hZExvY2F0aW9ucygpIGNhbGxlZCcpXG4gIH1cblxuICBjbG9zZU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcIlwiXG4gIH1cblxuICBzdG9wUHJvcGFnYXRpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgfVxuXG4gIHNlbGVjdExvY2F0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBuYW1lID0gYnV0dG9uLmRhdGFzZXQubG9jYXRpb25OYW1lIHx8IFwiXCJcbiAgICBjb25zdCBhZGRyZXNzID0gYnV0dG9uLmRhdGFzZXQubG9jYXRpb25BZGRyZXNzIHx8IFwiXCJcbiAgICBcbiAgICB0aGlzLnNlbGVjdGVkTG9jYXRpb24gPSB7IG5hbWUsIGFkZHJlc3MgfVxuXG4gICAgLy8gVXBkYXRlIFVJIHRvIHNob3cgc2VsZWN0ZWQgc3RhdGVcbiAgICB0aGlzLmxvY2F0aW9uTGlzdFRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKFwiYnV0dG9uXCIpLmZvckVhY2goYnRuID0+IHtcbiAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiYmctcHJpbWFyeS1saWdodFwiLCBcImJvcmRlci1wcmltYXJ5XCIpXG4gICAgfSlcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZChcImJnLXByaW1hcnktbGlnaHRcIiwgXCJib3JkZXJcIiwgXCJib3JkZXItcHJpbWFyeVwiKVxuICB9XG5cbiAgY29uZmlybSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuc2VsZWN0ZWRMb2NhdGlvbikge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGhpZGRlbiBpbnB1dCBmaWVsZCBpZiBleGlzdHNcbiAgICBpZiAodGhpcy5oYXNMb2NhdGlvbklucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLmxvY2F0aW9uSW5wdXRUYXJnZXQudmFsdWUgPSB0aGlzLnNlbGVjdGVkTG9jYXRpb24ubmFtZVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBkaXNwbGF5IGVsZW1lbnQgaWYgZXhpc3RzXG4gICAgaWYgKHRoaXMuaGFzTG9jYXRpb25EaXNwbGF5VGFyZ2V0KSB7XG4gICAgICB0aGlzLmxvY2F0aW9uRGlzcGxheVRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMuc2VsZWN0ZWRMb2NhdGlvbi5uYW1lXG4gICAgICB0aGlzLmxvY2F0aW9uRGlzcGxheVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwidGV4dC10ZXh0LW11dGVkXCIpXG4gICAgICB0aGlzLmxvY2F0aW9uRGlzcGxheVRhcmdldC5jbGFzc0xpc3QuYWRkKFwidGV4dC10ZXh0LXByaW1hcnlcIilcbiAgICB9XG5cbiAgICAvLyBEaXNwYXRjaCBldmVudCBmb3Igb3RoZXIgY29udHJvbGxlcnMgKGUuZy4gY2FyLXJlbnRhbC10YWJzKVxuICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdsb2NhdGlvbi1zZWxlY3Rvcjpsb2NhdGlvbi1zZWxlY3RlZCcsIHtcbiAgICAgIGRldGFpbDoge1xuICAgICAgICBsb2NhdGlvbk5hbWU6IHRoaXMuc2VsZWN0ZWRMb2NhdGlvbi5uYW1lLFxuICAgICAgICBsb2NhdGlvbkFkZHJlc3M6IHRoaXMuc2VsZWN0ZWRMb2NhdGlvbi5hZGRyZXNzXG4gICAgICB9LFxuICAgICAgYnViYmxlczogdHJ1ZVxuICAgIH0pXG4gICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudClcblxuICAgIHRoaXMuY2xvc2VNb2RhbCgpXG4gIH1cblxuICBzZWFyY2goZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgaW5wdXQgPSBldmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IHF1ZXJ5ID0gaW5wdXQudmFsdWUudG9Mb3dlckNhc2UoKS50cmltKClcblxuICAgIGNvbnN0IGJ1dHRvbnMgPSB0aGlzLmxvY2F0aW9uTGlzdFRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKFwiYnV0dG9uW2RhdGEtbG9jYXRpb24tbmFtZV1cIilcbiAgICBcbiAgICBidXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBidXR0b24gYXMgSFRNTEVsZW1lbnRcbiAgICAgIGNvbnN0IG5hbWUgPSBlbGVtZW50LmRhdGFzZXQubG9jYXRpb25OYW1lPy50b0xvd2VyQ2FzZSgpIHx8IFwiXCJcbiAgICAgIGNvbnN0IGFkZHJlc3MgPSBlbGVtZW50LmRhdGFzZXQubG9jYXRpb25BZGRyZXNzPy50b0xvd2VyQ2FzZSgpIHx8IFwiXCJcbiAgICAgIFxuICAgICAgaWYgKG5hbWUuaW5jbHVkZXMocXVlcnkpIHx8IGFkZHJlc3MuaW5jbHVkZXMocXVlcnkpKSB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbG9hZExvY2F0aW9ucygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBjaXR5ID0gdGhpcy5jdXJyZW50Q2l0eVZhbHVlIHx8ICdcdTZERjFcdTU3MzMnXG4gICAgY29uc29sZS5sb2coJ1tMb2NhdGlvblNlbGVjdG9yXSBsb2FkTG9jYXRpb25zIFNUQVJUIC0gY2l0eTonLCBjaXR5KVxuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnW0xvY2F0aW9uU2VsZWN0b3JdIEZldGNoaW5nIGZyb206JywgYC9jYXJzL2xvY2F0aW9ucz9jaXR5PSR7ZW5jb2RlVVJJQ29tcG9uZW50KGNpdHkpfWApXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvY2Fycy9sb2NhdGlvbnM/Y2l0eT0ke2VuY29kZVVSSUNvbXBvbmVudChjaXR5KX1gKVxuICAgICAgY29uc29sZS5sb2coJ1tMb2NhdGlvblNlbGVjdG9yXSBSZXNwb25zZSBzdGF0dXM6JywgcmVzcG9uc2Uuc3RhdHVzKVxuICAgICAgY29uc29sZS5sb2coJ1tMb2NhdGlvblNlbGVjdG9yXSBSZXNwb25zZSBvazonLCByZXNwb25zZS5vaylcbiAgICAgIFxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGxvY2F0aW9ucycpXG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICAgIGNvbnNvbGUubG9nKCdbTG9jYXRpb25TZWxlY3Rvcl0gRGF0YSByZWNlaXZlZDonLCBkYXRhKVxuICAgICAgY29uc29sZS5sb2coJ1tMb2NhdGlvblNlbGVjdG9yXSBBYm91dCB0byBjYWxsIHJlbmRlckxvY2F0aW9ucycpXG4gICAgICB0aGlzLnJlbmRlckxvY2F0aW9ucyhkYXRhLmxvY2F0aW9ucylcbiAgICAgIGNvbnNvbGUubG9nKCdbTG9jYXRpb25TZWxlY3Rvcl0gcmVuZGVyTG9jYXRpb25zIGNvbXBsZXRlZCcpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tMb2NhdGlvblNlbGVjdG9yXSBGYWlsZWQgdG8gbG9hZCBsb2NhdGlvbnM6JywgZXJyb3IpXG4gICAgICAvLyBGYWxsYmFjayB0byBkZWZhdWx0XHU2QjY2XHU2QzQ5IGxvY2F0aW9uc1xuICAgICAgdGhpcy5yZW5kZXJEZWZhdWx0TG9jYXRpb25zKClcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckxvY2F0aW9ucyhsb2NhdGlvbnM6IHsgYWlycG9ydHM6IHN0cmluZ1tdLCB0cmFpbl9zdGF0aW9uczogc3RyaW5nW10sIG90aGVyczogc3RyaW5nW10gfSk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKCdbTG9jYXRpb25TZWxlY3Rvcl0gcmVuZGVyTG9jYXRpb25zIFNUQVJUJylcbiAgICBjb25zb2xlLmxvZygnW0xvY2F0aW9uU2VsZWN0b3JdIEFpcnBvcnRzOicsIGxvY2F0aW9ucy5haXJwb3J0cylcbiAgICBjb25zb2xlLmxvZygnW0xvY2F0aW9uU2VsZWN0b3JdIFRyYWluIHN0YXRpb25zOicsIGxvY2F0aW9ucy50cmFpbl9zdGF0aW9ucylcbiAgICBjb25zb2xlLmxvZygnW0xvY2F0aW9uU2VsZWN0b3JdIE90aGVyczonLCBsb2NhdGlvbnMub3RoZXJzKVxuICAgIGxldCBodG1sID0gJydcblxuICAgIC8vIEFpcnBvcnRzXG4gICAgaWYgKGxvY2F0aW9ucy5haXJwb3J0cyAmJiBsb2NhdGlvbnMuYWlycG9ydHMubGVuZ3RoID4gMCkge1xuICAgICAgaHRtbCArPSBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJtYi00XCI+XG4gICAgICAgICAgPGg0IGNsYXNzPVwidGV4dC14cyB0ZXh0LXRleHQtbXV0ZWQgbWItMlwiPlx1NjczQVx1NTczQTwvaDQ+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImdyaWQgZ3JpZC1jb2xzLTIgZ2FwLTJcIj5cbiAgICAgICAgICAgICR7bG9jYXRpb25zLmFpcnBvcnRzLm1hcChhaXJwb3J0ID0+IGBcbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgIGRhdGEtYWN0aW9uPVwiY2xpY2stPmxvY2F0aW9uLXNlbGVjdG9yI3NlbGVjdExvY2F0aW9uXCJcbiAgICAgICAgICAgICAgICBkYXRhLWxvY2F0aW9uLW5hbWU9XCIke2FpcnBvcnR9XCJcbiAgICAgICAgICAgICAgICBkYXRhLWxvY2F0aW9uLWFkZHJlc3M9XCJcdTY3M0FcdTU3M0FcIlxuICAgICAgICAgICAgICAgIGNsYXNzPVwidy1mdWxsIHRleHQtY2VudGVyIHAtMiByb3VuZGVkLWxnIGhvdmVyOmJnLXN1cmZhY2UtaG92ZXIgdHJhbnNpdGlvbi1jb2xvcnMgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICR7YWlycG9ydH1cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICBgKS5qb2luKCcnKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICBgXG4gICAgfVxuXG4gICAgLy8gVHJhaW4gU3RhdGlvbnNcbiAgICBpZiAobG9jYXRpb25zLnRyYWluX3N0YXRpb25zICYmIGxvY2F0aW9ucy50cmFpbl9zdGF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICBodG1sICs9IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cIm1iLTRcIj5cbiAgICAgICAgICA8aDQgY2xhc3M9XCJ0ZXh0LXhzIHRleHQtdGV4dC1tdXRlZCBtYi0yXCI+XHU3MDZCXHU4RjY2XHU3QUQ5PC9oND5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZ3JpZCBncmlkLWNvbHMtMyBnYXAtMlwiPlxuICAgICAgICAgICAgJHtsb2NhdGlvbnMudHJhaW5fc3RhdGlvbnMubWFwKHN0YXRpb24gPT4gYFxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgZGF0YS1hY3Rpb249XCJjbGljay0+bG9jYXRpb24tc2VsZWN0b3Ijc2VsZWN0TG9jYXRpb25cIlxuICAgICAgICAgICAgICAgIGRhdGEtbG9jYXRpb24tbmFtZT1cIiR7c3RhdGlvbn1cIlxuICAgICAgICAgICAgICAgIGRhdGEtbG9jYXRpb24tYWRkcmVzcz1cIlx1NzA2Qlx1OEY2Nlx1N0FEOVwiXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJ3LWZ1bGwgdGV4dC1jZW50ZXIgcC0yIHJvdW5kZWQtbGcgaG92ZXI6Ymctc3VyZmFjZS1ob3ZlciB0cmFuc2l0aW9uLWNvbG9ycyB0ZXh0LXhzXCI+XG4gICAgICAgICAgICAgICAgJHtzdGF0aW9ufVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIGApLmpvaW4oJycpfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGBcbiAgICB9XG5cbiAgICAvLyBPdGhlcnNcbiAgICBpZiAobG9jYXRpb25zLm90aGVycyAmJiBsb2NhdGlvbnMub3RoZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgIGh0bWwgKz0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwibWItNFwiPlxuICAgICAgICAgIDxoNCBjbGFzcz1cInRleHQteHMgdGV4dC10ZXh0LW11dGVkIG1iLTJcIj5cdTUxNzZcdTRFRDZcdTU3MzBcdTcwQjk8L2g0PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJzcGFjZS15LTJcIj5cbiAgICAgICAgICAgICR7bG9jYXRpb25zLm90aGVycy5tYXAobG9jYXRpb24gPT4gYFxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgZGF0YS1hY3Rpb249XCJjbGljay0+bG9jYXRpb24tc2VsZWN0b3Ijc2VsZWN0TG9jYXRpb25cIlxuICAgICAgICAgICAgICAgIGRhdGEtbG9jYXRpb24tbmFtZT1cIiR7bG9jYXRpb259XCJcbiAgICAgICAgICAgICAgICBkYXRhLWxvY2F0aW9uLWFkZHJlc3M9XCJcdTc5REZcdThGNjZcdTcwQjlcIlxuICAgICAgICAgICAgICAgIGNsYXNzPVwidy1mdWxsIHRleHQtbGVmdCBwLTMgcm91bmRlZC1sZyBob3ZlcjpiZy1zdXJmYWNlLWhvdmVyIHRyYW5zaXRpb24tY29sb3JzXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggaXRlbXMtc3RhcnRcIj5cbiAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9XCJ3LTUgaC01IHRleHQtdGV4dC1tdXRlZCBtdC0wLjUgbXItMyBmbGV4LXNocmluay0wXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIj5cbiAgICAgICAgICAgICAgICAgICAgPHBhdGggZmlsbC1ydWxlPVwiZXZlbm9kZFwiIGQ9XCJNNS4wNSA0LjA1YTcgNyAwIDExOS45IDkuOUwxMCAxOC45bC00Ljk1LTQuOTVhNyA3IDAgMDEwLTkuOXpNMTAgMTFhMiAyIDAgMTAwLTQgMiAyIDAgMDAwIDR6XCIgY2xpcC1ydWxlPVwiZXZlbm9kZFwiLz5cbiAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgtMVwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC10ZXh0LXByaW1hcnkgZm9udC1tZWRpdW1cIj4ke2xvY2F0aW9ufTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC14cyB0ZXh0LXRleHQtbXV0ZWQgbXQtMC41XCI+XHU3OURGXHU4RjY2XHU3MEI5PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICBgKS5qb2luKCcnKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICBgXG4gICAgfVxuXG4gICAgLy8gSWYgbm8gbG9jYXRpb25zIGZvdW5kXG4gICAgaWYgKCFodG1sKSB7XG4gICAgICBjb25zb2xlLmxvZygnW0xvY2F0aW9uU2VsZWN0b3JdIE5vIGxvY2F0aW9ucyBmb3VuZCwgc2hvd2luZyBmYWxsYmFjayBtZXNzYWdlJylcbiAgICAgIGh0bWwgPSBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWNlbnRlciBweS04IHRleHQtdGV4dC1tdXRlZFwiPlxuICAgICAgICAgIDxwPlx1OEJFNVx1NTdDRVx1NUUwMlx1NjY4Mlx1NjVFMFx1NzlERlx1OEY2Nlx1NzBCOTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICBgXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1tMb2NhdGlvblNlbGVjdG9yXSBTZXR0aW5nIGlubmVySFRNTCwgaHRtbCBsZW5ndGg6JywgaHRtbC5sZW5ndGgpXG4gICAgdGhpcy5sb2NhdGlvbkxpc3RUYXJnZXQuaW5uZXJIVE1MID0gaHRtbFxuICAgIGNvbnNvbGUubG9nKCdbTG9jYXRpb25TZWxlY3Rvcl0gaW5uZXJIVE1MIHNldCBzdWNjZXNzZnVsbHknKVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJEZWZhdWx0TG9jYXRpb25zKCk6IHZvaWQge1xuICAgIC8vIEZhbGxiYWNrIGZvclx1NkI2Nlx1NkM0OVxuICAgIHRoaXMucmVuZGVyTG9jYXRpb25zKHtcbiAgICAgIGFpcnBvcnRzOiBbJ1x1NTkyOVx1NkNCM1x1NTZGRFx1OTY0NVx1NjczQVx1NTczQVQzJ10sXG4gICAgICB0cmFpbl9zdGF0aW9uczogWydcdTZCNjZcdTZDNDlcdTdBRDknLCAnXHU2QjY2XHU2NjBDXHU3QUQ5JywgJ1x1NkM0OVx1NTNFM1x1N0FEOSddLFxuICAgICAgb3RoZXJzOiBbXVxuICAgIH0pXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIHRyYW5zZmVyVHlwZTogU3RyaW5nLFxuICAgIHNlcnZpY2VUeXBlOiBTdHJpbmcsXG4gICAgZmxpZ2h0SWQ6IFN0cmluZyxcbiAgICB0cmFpbklkOiBTdHJpbmdcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgdHJhbnNmZXJUeXBlVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHJlYWRvbmx5IHNlcnZpY2VUeXBlVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHJlYWRvbmx5IGZsaWdodElkVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHJlYWRvbmx5IHRyYWluSWRWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlRyYW5zZmVyU2VhcmNoIGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgaGFuZGxlU2VhcmNoKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBcbiAgICAvLyBHZXQgbG9jYXRpb25fdG8gZnJvbSB0aGUgaGlkZGVuIGlucHV0XG4gICAgY29uc3QgbG9jYXRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWxvY2F0aW9uLXNlbGVjdG9yLXRhcmdldD1cImxvY2F0aW9uSW5wdXRcIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgbG9jYXRpb25UbyA9IGxvY2F0aW9uSW5wdXQ/LnZhbHVlXG4gICAgXG4gICAgaWYgKCFsb2NhdGlvblRvIHx8IGxvY2F0aW9uVG8udHJpbSgpID09PSAnJykge1xuICAgICAgLy8gU2hvdyBhbGVydCBpZiBsb2NhdGlvbiBub3Qgc2VsZWN0ZWRcbiAgICAgIGFsZXJ0KCdcdThCRjdcdTUxNDhcdTkwMDlcdTYyRTlcdTRFMEJcdThGNjZcdTcwQjknKVxuICAgICAgXG4gICAgICAvLyBUcmlnZ2VyIG1vZGFsIG9wZW5cbiAgICAgIGNvbnN0IG1vZGFsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtYWN0aW9uPVwiY2xpY2stPmxvY2F0aW9uLXNlbGVjdG9yI29wZW5Nb2RhbFwiXScpIGFzIEhUTUxCdXR0b25FbGVtZW50XG4gICAgICBpZiAobW9kYWxCdXR0b24pIHtcbiAgICAgICAgbW9kYWxCdXR0b24uY2xpY2soKVxuICAgICAgfVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIEdldCBsb2NhdGlvbl9mcm9tIGJhc2VkIG9uIGZsaWdodCBvciB0cmFpblxuICAgIGxldCBsb2NhdGlvbkZyb20gPSAnJ1xuICAgIGlmICh0aGlzLmZsaWdodElkVmFsdWUpIHtcbiAgICAgIC8vIEZvciBmbGlnaHRzLCBnZXQgYWlycG9ydCBmcm9tIHRoZSBwYWdlXG4gICAgICBjb25zdCBmbGlnaHRMb2NhdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGV4dC14bC5mb250LWJvbGQudGV4dC10ZXh0LXByaW1hcnknKSBhcyBIVE1MRWxlbWVudFxuICAgICAgbG9jYXRpb25Gcm9tID0gZmxpZ2h0TG9jYXRpb25FbGVtZW50Py50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnXG4gICAgfSBlbHNlIGlmICh0aGlzLnRyYWluSWRWYWx1ZSkge1xuICAgICAgLy8gRm9yIHRyYWlucywgZ2V0IHN0YXRpb24gZnJvbSB0aGUgcGFnZVxuICAgICAgY29uc3QgdHJhaW5Mb2NhdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGV4dC14bC5mb250LWJvbGQudGV4dC10ZXh0LXByaW1hcnknKSBhcyBIVE1MRWxlbWVudFxuICAgICAgbG9jYXRpb25Gcm9tID0gdHJhaW5Mb2NhdGlvbkVsZW1lbnQ/LnRleHRDb250ZW50Py50cmltKCkgfHwgJydcbiAgICB9XG4gICAgXG4gICAgLy8gQnVpbGQgVVJMIHdpdGggYWxsIHBhcmFtZXRlcnNcbiAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKClcbiAgICBwYXJhbXMuYXBwZW5kKCd0cmFuc2Zlcl90eXBlJywgdGhpcy50cmFuc2ZlclR5cGVWYWx1ZSlcbiAgICBwYXJhbXMuYXBwZW5kKCdzZXJ2aWNlX3R5cGUnLCB0aGlzLnNlcnZpY2VUeXBlVmFsdWUpXG4gICAgcGFyYW1zLmFwcGVuZCgnbG9jYXRpb25fdG8nLCBsb2NhdGlvblRvKVxuICAgIFxuICAgIGlmIChsb2NhdGlvbkZyb20pIHtcbiAgICAgIHBhcmFtcy5hcHBlbmQoJ2xvY2F0aW9uX2Zyb20nLCBsb2NhdGlvbkZyb20pXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLmZsaWdodElkVmFsdWUpIHtcbiAgICAgIHBhcmFtcy5hcHBlbmQoJ2ZsaWdodF9pZCcsIHRoaXMuZmxpZ2h0SWRWYWx1ZSlcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMudHJhaW5JZFZhbHVlKSB7XG4gICAgICBwYXJhbXMuYXBwZW5kKCd0cmFpbl9pZCcsIHRoaXMudHJhaW5JZFZhbHVlKVxuICAgIH1cbiAgICBcbiAgICAvLyBOYXZpZ2F0ZSB0byBwYWNrYWdlcyBwYWdlXG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgL3RyYW5zZmVycy9wYWNrYWdlcz8ke3BhcmFtcy50b1N0cmluZygpfWBcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wibW9kYWxcIiwgXCJuYW1lXCIsIFwicGhvbmVcIiwgXCJhZGRyZXNzXCIsIFwic2VsZWN0ZWRJbmZvXCJdXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgYWRkcmVzc0lkOiBTdHJpbmdcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbmFtZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBwaG9uZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBhZGRyZXNzVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlbGVjdGVkSW5mb1RhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSBhZGRyZXNzSWRWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkFkZHJlc3NTZWxlY3RvciBjb25uZWN0ZWRcIilcbiAgfVxuXG4gIG9wZW5Nb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gIH1cblxuICBjbG9zZU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgfVxuXG4gIHNlbGVjdEFkZHJlc3MoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGFkZHJlc3NJZCA9IHRhcmdldC5kYXRhc2V0LmFkZHJlc3NJZCB8fCAnJ1xuICAgIGNvbnN0IG5hbWUgPSB0YXJnZXQuZGF0YXNldC5uYW1lIHx8ICcnXG4gICAgY29uc3QgcGhvbmUgPSB0YXJnZXQuZGF0YXNldC5waG9uZSB8fCAnJ1xuICAgIGNvbnN0IGFkZHJlc3MgPSB0YXJnZXQuZGF0YXNldC5hZGRyZXNzIHx8ICcnXG5cbiAgICAvLyBVcGRhdGUgaGlkZGVuIGZpZWxkXG4gICAgdGhpcy5hZGRyZXNzSWRWYWx1ZSA9IGFkZHJlc3NJZFxuICAgIFxuICAgIC8vIFVwZGF0ZSBkaXNwbGF5XG4gICAgdGhpcy5uYW1lVGFyZ2V0LnRleHRDb250ZW50ID0gbmFtZVxuICAgIHRoaXMucGhvbmVUYXJnZXQudGV4dENvbnRlbnQgPSBwaG9uZVxuICAgIHRoaXMuYWRkcmVzc1RhcmdldC50ZXh0Q29udGVudCA9IGFkZHJlc3NcbiAgICBcbiAgICAvLyBVcGRhdGUgb3JkZXIgY29udHJvbGxlcidzIGRlbGl2ZXJ5IGFkZHJlc3NcbiAgICBjb25zdCB2aXNhT3JkZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtY29udHJvbGxlcio9XCJ2aXNhLW9yZGVyXCJdJylcbiAgICBpZiAodmlzYU9yZGVyRWxlbWVudCkge1xuICAgICAgY29uc3QgaW5wdXQgPSB2aXNhT3JkZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXZpc2Etb3JkZXItdGFyZ2V0PVwiZGVsaXZlcnlBZGRyZXNzXCJdJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgICAgaWYgKGlucHV0KSB7XG4gICAgICAgIGlucHV0LnZhbHVlID0gYWRkcmVzc1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXIge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcImlucHV0XCJdXG5cbiAgZGVjbGFyZSByZWFkb25seSBpbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuXG4gIHNlYXJjaChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgbGV0IHF1ZXJ5ID0gdGhpcy5pbnB1dFRhcmdldC52YWx1ZS50cmltKClcbiAgICBcbiAgICAvLyBcdTU5ODJcdTY3OUNcdThGOTNcdTUxNjVcdTY4NDZcdTRFM0FcdTdBN0FcdUZGMENcdTRGN0ZcdTc1MjggcGxhY2Vob2xkZXIgXHU3Njg0XHU1MDNDXG4gICAgaWYgKHF1ZXJ5ID09PSBcIlwiKSB7XG4gICAgICBxdWVyeSA9IHRoaXMuaW5wdXRUYXJnZXQucGxhY2Vob2xkZXJcbiAgICB9XG4gICAgXG4gICAgLy8gVE9ETzogSW1wbGVtZW50IGFjdHVhbCBzZWFyY2ggZnVuY3Rpb25hbGl0eVxuICAgIHdpbmRvdy5zaG93VG9hc3QoYFx1NjQxQ1x1N0QyMlwiJHtxdWVyeX1cIlx1NTI5Rlx1ODBGRFx1NTM3M1x1NUMwNlx1NEUwQVx1N0VCRlx1RkYwQ1x1NjU2Q1x1OEJGN1x1NjcxRlx1NUY4NWApXG4gIH1cblxuICBjbGVhcigpOiB2b2lkIHtcbiAgICB0aGlzLmlucHV0VGFyZ2V0LnZhbHVlID0gXCJcIlxuICAgIHRoaXMuaW5wdXRUYXJnZXQuZm9jdXMoKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5pbnRlcmZhY2UgRmlsdGVyU3RhdGUge1xuICBjaXR5OiBzdHJpbmdcbiAgY2hlY2tJbjogc3RyaW5nXG4gIGNoZWNrT3V0OiBzdHJpbmdcbiAgcm9vbXM6IG51bWJlclxuICBhZHVsdHM6IG51bWJlclxuICBjaGlsZHJlbjogbnVtYmVyXG4gIHByaWNlTWluOiBzdHJpbmdcbiAgcHJpY2VNYXg6IHN0cmluZ1xuICBzdGFyTGV2ZWw6IHN0cmluZ1xuICBxdWVyeTogc3RyaW5nXG4gIHRpbWVzdGFtcDogbnVtYmVyXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBwcml2YXRlIHJlYWRvbmx5IFNUT1JBR0VfS0VZID0gJ2hvdGVsX2ZpbHRlcnNfc3RhdGUnXG4gIHByaXZhdGUgcmVhZG9ubHkgRVhQSVJZX1RJTUUgPSAyNCAqIDYwICogNjAgKiAxMDAwIC8vIDI0IGhvdXJzXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkhvdGVsRmlsdGVyUGVyc2lzdGVuY2UgY29ubmVjdGVkXCIpXG4gICAgXG4gICAgLy8gUmVzdG9yZSBmaWx0ZXJzIGZyb20gc2Vzc2lvblN0b3JhZ2Ugd2hlbiBwYWdlIGxvYWRzXG4gICAgdGhpcy5yZXN0b3JlRmlsdGVycygpXG4gICAgXG4gICAgLy8gU2F2ZSBmaWx0ZXJzIHdoZW4gdXNlciBuYXZpZ2F0ZXMgYXdheVxuICAgIHRoaXMuc2V0dXBTYXZlT25OYXZpZ2F0aW9uKClcbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJIb3RlbEZpbHRlclBlcnNpc3RlbmNlIGRpc2Nvbm5lY3RlZFwiKVxuICAgIC8vIFNhdmUgZmlsdGVycyB3aGVuIGNvbnRyb2xsZXIgZGlzY29ubmVjdHMgKHBhZ2UgbmF2aWdhdGlvbilcbiAgICB0aGlzLnNhdmVGaWx0ZXJzKClcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBsaXN0ZW5lcnMgdG8gc2F2ZSBmaWx0ZXJzIG9uIG5hdmlnYXRpb25cbiAgICovXG4gIHByaXZhdGUgc2V0dXBTYXZlT25OYXZpZ2F0aW9uKCk6IHZvaWQge1xuICAgIC8vIFNhdmUgb24gYmVmb3JldW5sb2FkIChyZWZyZXNoL2Nsb3NlKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCB0aGlzLnNhdmVGaWx0ZXJzLmJpbmQodGhpcykpXG4gICAgXG4gICAgLy8gU2F2ZSB3aGVuIGNsaWNraW5nIGFueSBsaW5rIChUdXJibyBuYXZpZ2F0aW9uKVxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3R1cmJvOmJlZm9yZS12aXNpdCcsIHRoaXMuc2F2ZUZpbHRlcnMuYmluZCh0aGlzKSlcbiAgICBcbiAgICAvLyBTYXZlIHdoZW4gZm9ybSBpcyBzdWJtaXR0ZWQgKHNlYXJjaCBidXR0b24gY2xpY2tlZClcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVthY3Rpb24qPVwiaG90ZWxzXCJdJylcbiAgICBpZiAoZm9ybSkge1xuICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLnNhdmVGaWx0ZXJzLmJpbmQodGhpcykpXG4gICAgfVxuICAgIFxuICAgIC8vIFNhdmUgaW1tZWRpYXRlbHkgd2hlbiBVUkwgaGFzIGZpbHRlciBwYXJhbWV0ZXJzICh1c2VyIGp1c3Qgc2VhcmNoZWQpXG4gICAgLy8gVGhpcyBlbnN1cmVzIHdlIGNhcHR1cmUgdGhlIGxhdGVzdCBmaWx0ZXIgc3RhdGUgcmlnaHQgYWZ0ZXIgc2VhcmNoXG4gICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKVxuICAgIGlmICh1cmxQYXJhbXMuaGFzKCdjaGVja19pbicpICYmIHVybFBhcmFtcy5oYXMoJ2NoZWNrX291dCcpKSB7XG4gICAgICBjb25zb2xlLmxvZygnRGV0ZWN0ZWQgZmlsdGVyIHBhcmFtZXRlcnMgaW4gVVJMLCBzYXZpbmcgaW1tZWRpYXRlbHknKVxuICAgICAgdGhpcy5zYXZlRmlsdGVycygpXG4gICAgfVxuICAgIFxuICAgIC8vIE1vbml0b3IgaGlkZGVuIGlucHV0IGNoYW5nZXMgKHdoZW4gdXNlciBtb2RpZmllcyBmaWx0ZXJzIGJ1dCBkb2Vzbid0IHNlYXJjaCB5ZXQpXG4gICAgdGhpcy5tb25pdG9ySW5wdXRDaGFuZ2VzKClcbiAgfVxuICBcbiAgLyoqXG4gICAqIE1vbml0b3IgaGlkZGVuIGlucHV0IGZpZWxkIGNoYW5nZXMgYW5kIHNhdmUgaW1tZWRpYXRlbHlcbiAgICovXG4gIHByaXZhdGUgbW9uaXRvcklucHV0Q2hhbmdlcygpOiB2b2lkIHtcbiAgICAvLyBHZXQgYWxsIGhpZGRlbiBpbnB1dHMgdGhhdCBzdG9yZSBmaWx0ZXIgdmFsdWVzXG4gICAgY29uc3QgZmlsdGVySW5wdXRzID0gW1xuICAgICAgJ2NoZWNrSW5JbnB1dCcsXG4gICAgICAnY2hlY2tPdXRJbnB1dCcsIFxuICAgICAgJ3Jvb21zSW5wdXQnLFxuICAgICAgJ2FkdWx0c0lucHV0JyxcbiAgICAgICdjaGlsZHJlbklucHV0JyxcbiAgICAgICdtaW5QcmljZUlucHV0JyxcbiAgICAgICdtYXhQcmljZUlucHV0JyxcbiAgICAgICdzdGFyc0lucHV0J1xuICAgIF1cbiAgICBcbiAgICBmaWx0ZXJJbnB1dHMuZm9yRWFjaCh0YXJnZXROYW1lID0+IHtcbiAgICAgIGNvbnN0IHNlbGVjdG9yID0gW1xuICAgICAgICBgW2RhdGEtaG90ZWwtc2VhcmNoLXRhcmdldD1cIiR7dGFyZ2V0TmFtZX1cIl1gLFxuICAgICAgICBgW2RhdGEtaG90ZWwtZGF0ZS1waWNrZXItdGFyZ2V0PVwiJHt0YXJnZXROYW1lfVwiXWAsXG4gICAgICAgIGBbZGF0YS1ob3RlbC1ndWVzdC1zZWxlY3Rvci10YXJnZXQ9XCIke3RhcmdldE5hbWV9XCJdYCxcbiAgICAgICAgYFtkYXRhLWhvdGVsLXByaWNlLWZpbHRlci10YXJnZXQ9XCIke3RhcmdldE5hbWV9XCJdYFxuICAgICAgXS5qb2luKCcsICcpXG4gICAgICBcbiAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcikgYXMgSFRNTElucHV0RWxlbWVudFxuICAgICAgaWYgKGlucHV0KSB7XG4gICAgICAgIC8vIFVzZSBNdXRhdGlvbk9ic2VydmVyIHRvIGRldGVjdCB2YWx1ZSBjaGFuZ2VzIChzaW5jZSBoaWRkZW4gaW5wdXRzIGRvbid0IGZpcmUgJ2NoYW5nZScgZXZlbnRzIHJlbGlhYmx5KVxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgRmlsdGVyIGlucHV0IGNoYW5nZWQ6ICR7dGFyZ2V0TmFtZX0sIHNhdmluZy4uLmApXG4gICAgICAgICAgdGhpcy5zYXZlRmlsdGVycygpXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGlucHV0LCB7XG4gICAgICAgICAgYXR0cmlidXRlczogdHJ1ZSxcbiAgICAgICAgICBhdHRyaWJ1dGVGaWx0ZXI6IFsndmFsdWUnXVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgLy8gQWxzbyBsaXN0ZW4gdG8gaW5wdXQgZXZlbnRcbiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coYEZpbHRlciBpbnB1dCBjaGFuZ2VkOiAke3RhcmdldE5hbWV9LCBzYXZpbmcuLi5gKVxuICAgICAgICAgIHRoaXMuc2F2ZUZpbHRlcnMoKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogU2F2ZSBjdXJyZW50IGZpbHRlciBzdGF0ZSB0byBzZXNzaW9uU3RvcmFnZVxuICAgKi9cbiAgcHJpdmF0ZSBzYXZlRmlsdGVycygpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKVxuICAgICAgXG4gICAgICAvLyBDb2xsZWN0IGRhdGUgdmFsdWVzXG4gICAgICBjb25zdCBjaGVja0luID0gdXJsUGFyYW1zLmdldCgnY2hlY2tfaW4nKSB8fCB0aGlzLmdldElucHV0VmFsdWUoJ2NoZWNrSW5JbnB1dCcpIHx8ICcnXG4gICAgICBjb25zdCBjaGVja091dCA9IHVybFBhcmFtcy5nZXQoJ2NoZWNrX291dCcpIHx8IHRoaXMuZ2V0SW5wdXRWYWx1ZSgnY2hlY2tPdXRJbnB1dCcpIHx8ICcnXG4gICAgICBcbiAgICAgIC8vIERvbid0IHNhdmUgaWYgZGF0ZXMgYXJlIGVtcHR5IC0gdGhpcyBtZWFucyB1c2VyIGhhc24ndCBzZXQgZGF0ZXMgeWV0XG4gICAgICBpZiAoIWNoZWNrSW4gfHwgIWNoZWNrT3V0KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTa2lwcGluZyBzYXZlIC0gZGF0ZXMgbm90IHNldCB5ZXQnKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgZmlsdGVyU3RhdGU6IEZpbHRlclN0YXRlID0ge1xuICAgICAgICBjaXR5OiB1cmxQYXJhbXMuZ2V0KCdjaXR5JykgfHwgdGhpcy5nZXRJbnB1dFZhbHVlKCdjaXR5SW5wdXQnKSB8fCAnXHU2REYxXHU1NzMzJyxcbiAgICAgICAgY2hlY2tJbjogY2hlY2tJbixcbiAgICAgICAgY2hlY2tPdXQ6IGNoZWNrT3V0LFxuICAgICAgICByb29tczogcGFyc2VJbnQodXJsUGFyYW1zLmdldCgncm9vbXMnKSB8fCB0aGlzLmdldElucHV0VmFsdWUoJ3Jvb21zSW5wdXQnKSB8fCAnMScpLFxuICAgICAgICBhZHVsdHM6IHBhcnNlSW50KHVybFBhcmFtcy5nZXQoJ2FkdWx0cycpIHx8IHRoaXMuZ2V0SW5wdXRWYWx1ZSgnYWR1bHRzSW5wdXQnKSB8fCAnMScpLFxuICAgICAgICBjaGlsZHJlbjogcGFyc2VJbnQodXJsUGFyYW1zLmdldCgnY2hpbGRyZW4nKSB8fCB0aGlzLmdldElucHV0VmFsdWUoJ2NoaWxkcmVuSW5wdXQnKSB8fCAnMCcpLFxuICAgICAgICBwcmljZU1pbjogdXJsUGFyYW1zLmdldCgncHJpY2VfbWluJykgfHwgdGhpcy5nZXRJbnB1dFZhbHVlKCdtaW5QcmljZUlucHV0JykgfHwgJycsXG4gICAgICAgIHByaWNlTWF4OiB1cmxQYXJhbXMuZ2V0KCdwcmljZV9tYXgnKSB8fCB0aGlzLmdldElucHV0VmFsdWUoJ21heFByaWNlSW5wdXQnKSB8fCAnJyxcbiAgICAgICAgc3RhckxldmVsOiB1cmxQYXJhbXMuZ2V0KCdzdGFyX2xldmVsJykgfHwgdGhpcy5nZXRJbnB1dFZhbHVlKCdzdGFyc0lucHV0JykgfHwgJycsXG4gICAgICAgIHF1ZXJ5OiB1cmxQYXJhbXMuZ2V0KCdxJykgfHwgJycsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfVxuXG4gICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKHRoaXMuU1RPUkFHRV9LRVksIEpTT04uc3RyaW5naWZ5KGZpbHRlclN0YXRlKSlcbiAgICAgIGNvbnNvbGUubG9nKCdIb3RlbCBmaWx0ZXJzIHNhdmVkIHRvIHNlc3Npb25TdG9yYWdlOicsIGZpbHRlclN0YXRlKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2F2ZSBob3RlbCBmaWx0ZXJzOicsIGVycm9yKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN0b3JlIGZpbHRlciBzdGF0ZSBmcm9tIHNlc3Npb25TdG9yYWdlIGFuZCBhcHBseSB0byBVUkxcbiAgICovXG4gIHByaXZhdGUgcmVzdG9yZUZpbHRlcnMoKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0b3JlZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0odGhpcy5TVE9SQUdFX0tFWSlcbiAgICAgIGlmICghc3RvcmVkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdObyBzYXZlZCBob3RlbCBmaWx0ZXJzIGZvdW5kJylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGZpbHRlclN0YXRlOiBGaWx0ZXJTdGF0ZSA9IEpTT04ucGFyc2Uoc3RvcmVkKVxuICAgICAgXG4gICAgICAvLyBWYWxpZGF0ZSB0aGF0IHN0b3JlZCBkYXRhIGhhcyByZXF1aXJlZCBkYXRlIGZpZWxkc1xuICAgICAgaWYgKCFmaWx0ZXJTdGF0ZS5jaGVja0luIHx8ICFmaWx0ZXJTdGF0ZS5jaGVja091dCkge1xuICAgICAgICBjb25zb2xlLmxvZygnU3RvcmVkIGZpbHRlcnMgbWlzc2luZyBkYXRlcywgY2xlYXJpbmcuLi4nKVxuICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMuU1RPUkFHRV9LRVkpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiBzdG9yZWQgZGF0YSBpcyBleHBpcmVkXG4gICAgICBpZiAoRGF0ZS5ub3coKSAtIGZpbHRlclN0YXRlLnRpbWVzdGFtcCA+IHRoaXMuRVhQSVJZX1RJTUUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1N0b3JlZCBob3RlbCBmaWx0ZXJzIGV4cGlyZWQsIGNsZWFyaW5nLi4uJylcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSh0aGlzLlNUT1JBR0VfS0VZKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgdXNlciBjYW1lIGZyb20gaG9tZXBhZ2Ugb3IgYW5vdGhlciBpbnRlcm5hbCBwYWdlXG4gICAgICAvLyBJZiB0aGV5IGNhbWUgZnJvbSBob21lcGFnZSAod2l0aCBkZWZhdWx0IGNpdHkgcGFyYW0gb25seSksIHJlc3RvcmUgc2F2ZWQgZmlsdGVyc1xuICAgICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKVxuICAgICAgY29uc3QgaGFzT3RoZXJQYXJhbXMgPSBBcnJheS5mcm9tKHVybFBhcmFtcy5rZXlzKCkpLmZpbHRlcihrID0+IGsgIT09ICdjaXR5JykubGVuZ3RoID4gMFxuICAgICAgXG4gICAgICAvLyBPbmx5IHJlc3RvcmUgaWY6XG4gICAgICAvLyAxLiBObyBVUkwgcGFyYW1zIGF0IGFsbCAoZGlyZWN0IG5hdmlnYXRpb24pLCBPUlxuICAgICAgLy8gMi4gT25seSBoYXMgZGVmYXVsdCBjaXR5IHBhcmFtIGZyb20gaG9tZXBhZ2UgbGluayAobm8gb3RoZXIgZmlsdGVyIHBhcmFtcylcbiAgICAgIGNvbnN0IHNob3VsZFJlc3RvcmUgPSAhaGFzT3RoZXJQYXJhbXNcbiAgICAgIFxuICAgICAgaWYgKHNob3VsZFJlc3RvcmUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1Jlc3RvcmluZyBob3RlbCBmaWx0ZXJzIGZyb20gc2Vzc2lvblN0b3JhZ2U6JywgZmlsdGVyU3RhdGUpXG4gICAgICAgIHRoaXMuYXBwbHlGaWx0ZXJzVG9VUkwoZmlsdGVyU3RhdGUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygnVVJMIGhhcyBleGlzdGluZyBmaWx0ZXIgcGFyYW1ldGVycywgc2tpcHBpbmcgcmVzdG9yZScpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byByZXN0b3JlIGhvdGVsIGZpbHRlcnM6JywgZXJyb3IpXG4gICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMuU1RPUkFHRV9LRVkpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFwcGx5IGZpbHRlciBzdGF0ZSB0byBVUkwgYW5kIHJlbG9hZCBwYWdlXG4gICAqL1xuICBwcml2YXRlIGFwcGx5RmlsdGVyc1RvVVJMKGZpbHRlclN0YXRlOiBGaWx0ZXJTdGF0ZSk6IHZvaWQge1xuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpXG4gICAgXG4gICAgLy8gU2V0IGFsbCBmaWx0ZXIgcGFyYW1ldGVyc1xuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdjaXR5JywgZmlsdGVyU3RhdGUuY2l0eSlcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnY2hlY2tfaW4nLCBmaWx0ZXJTdGF0ZS5jaGVja0luKVxuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdjaGVja19vdXQnLCBmaWx0ZXJTdGF0ZS5jaGVja091dClcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgncm9vbXMnLCBmaWx0ZXJTdGF0ZS5yb29tcy50b1N0cmluZygpKVxuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdhZHVsdHMnLCBmaWx0ZXJTdGF0ZS5hZHVsdHMudG9TdHJpbmcoKSlcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnY2hpbGRyZW4nLCBmaWx0ZXJTdGF0ZS5jaGlsZHJlbi50b1N0cmluZygpKVxuICAgIFxuICAgIGlmIChmaWx0ZXJTdGF0ZS5wcmljZU1pbikge1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3ByaWNlX21pbicsIGZpbHRlclN0YXRlLnByaWNlTWluKVxuICAgIH1cbiAgICBpZiAoZmlsdGVyU3RhdGUucHJpY2VNYXgpIHtcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdwcmljZV9tYXgnLCBmaWx0ZXJTdGF0ZS5wcmljZU1heClcbiAgICB9XG4gICAgaWYgKGZpbHRlclN0YXRlLnN0YXJMZXZlbCkge1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3N0YXJfbGV2ZWwnLCBmaWx0ZXJTdGF0ZS5zdGFyTGV2ZWwpXG4gICAgfVxuICAgIGlmIChmaWx0ZXJTdGF0ZS5xdWVyeSkge1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3EnLCBmaWx0ZXJTdGF0ZS5xdWVyeSlcbiAgICB9XG4gICAgXG4gICAgLy8gT25seSByZWRpcmVjdCBpZiBVUkwgd291bGQgYWN0dWFsbHkgY2hhbmdlXG4gICAgY29uc3QgbmV3VVJMID0gdXJsLnRvU3RyaW5nKClcbiAgICBpZiAobmV3VVJMICE9PSB3aW5kb3cubG9jYXRpb24uaHJlZikge1xuICAgICAgY29uc29sZS5sb2coJ1JlZGlyZWN0aW5nIHdpdGggcmVzdG9yZWQgZmlsdGVyczonLCBuZXdVUkwpXG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IG5ld1VSTFxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygnVVJMIGFscmVhZHkgbWF0Y2hlcyBzdG9yZWQgZmlsdGVycywgc2tpcHBpbmcgcmVkaXJlY3QnKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgbWV0aG9kIHRvIGdldCBpbnB1dCB2YWx1ZSBieSBkYXRhLXRhcmdldCBhdHRyaWJ1dGVcbiAgICovXG4gIHByaXZhdGUgZ2V0SW5wdXRWYWx1ZSh0YXJnZXROYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IHNlbGVjdG9yID0gW1xuICAgICAgYFtkYXRhLWhvdGVsLXNlYXJjaC10YXJnZXQ9XCIke3RhcmdldE5hbWV9XCJdYCxcbiAgICAgIGBbZGF0YS1ob3RlbC1kYXRlLXBpY2tlci10YXJnZXQ9XCIke3RhcmdldE5hbWV9XCJdYCxcbiAgICAgIGBbZGF0YS1ob3RlbC1ndWVzdC1zZWxlY3Rvci10YXJnZXQ9XCIke3RhcmdldE5hbWV9XCJdYCxcbiAgICAgIGBbZGF0YS1ob3RlbC1wcmljZS1maWx0ZXItdGFyZ2V0PVwiJHt0YXJnZXROYW1lfVwiXWBcbiAgICBdLmpvaW4oJywgJylcbiAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICByZXR1cm4gaW5wdXQgPyBpbnB1dC52YWx1ZSA6ICcnXG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgc2F2ZWQgZmlsdGVycyAoY2FuIGJlIGNhbGxlZCBtYW51YWxseSBpZiBuZWVkZWQpXG4gICAqL1xuICBjbGVhclNhdmVkRmlsdGVycygpOiB2b2lkIHtcbiAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMuU1RPUkFHRV9LRVkpXG4gICAgY29uc29sZS5sb2coJ0hvdGVsIGZpbHRlcnMgY2xlYXJlZCBmcm9tIHNlc3Npb25TdG9yYWdlJylcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wiY2l0eUlucHV0XCIsIFwiY2hlY2tJbklucHV0XCIsIFwiY2hlY2tPdXRJbnB1dFwiXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2l0eUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hlY2tJbklucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hlY2tPdXRJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJIb3RlbFNlcnZpY2VzU2VhcmNoIGNvbm5lY3RlZFwiKVxuICAgIFxuICAgIC8vIExpc3RlbiBmb3IgY2l0eSBzZWxlY3Rpb24gY2hhbmdlc1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NpdHktc2VsZWN0b3I6Y2l0eS1jaGFuZ2VkJywgdGhpcy5oYW5kbGVDaXR5Q2hhbmdlLmJpbmQodGhpcykpXG4gICAgXG4gICAgLy8gTGlzdGVuIGZvciBkYXRlIHNlbGVjdGlvbiBjaGFuZ2VzXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaG90ZWwtZGF0ZS1waWNrZXI6ZGF0ZXMtc2VsZWN0ZWQnLCB0aGlzLmhhbmRsZURhdGVDaGFuZ2UuYmluZCh0aGlzKSlcbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2l0eS1zZWxlY3RvcjpjaXR5LWNoYW5nZWQnLCB0aGlzLmhhbmRsZUNpdHlDaGFuZ2UuYmluZCh0aGlzKSlcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdob3RlbC1kYXRlLXBpY2tlcjpkYXRlcy1zZWxlY3RlZCcsIHRoaXMuaGFuZGxlRGF0ZUNoYW5nZS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVDaXR5Q2hhbmdlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnRcbiAgICBjb25zdCBjaXR5TmFtZSA9IGN1c3RvbUV2ZW50LmRldGFpbC5jaXR5TmFtZVxuICAgIGNvbnNvbGUubG9nKCdIb3RlbFNlcnZpY2VzU2VhcmNoOiBDaXR5IGNoYW5nZWQgdG8nLCBjaXR5TmFtZSlcbiAgICBcbiAgICAvLyBVcGRhdGUgaGlkZGVuIGlucHV0XG4gICAgdGhpcy5jaXR5SW5wdXRUYXJnZXQudmFsdWUgPSBjaXR5TmFtZVxuICAgIFxuICAgIC8vIFVwZGF0ZSBVUkwgYW5kIHJlbG9hZCBwYWdlXG4gICAgdGhpcy51cGRhdGVVUkxBbmRSZWxvYWQoKVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVEYXRlQ2hhbmdlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnRcbiAgICBjb25zdCB7IGNoZWNrSW4sIGNoZWNrT3V0IH0gPSBjdXN0b21FdmVudC5kZXRhaWxcbiAgICBjb25zb2xlLmxvZygnSG90ZWxTZXJ2aWNlc1NlYXJjaDogRGF0ZXMgY2hhbmdlZCcsIHsgY2hlY2tJbiwgY2hlY2tPdXQgfSlcbiAgICBcbiAgICAvLyBVcGRhdGUgaGlkZGVuIGlucHV0c1xuICAgIHRoaXMuY2hlY2tJbklucHV0VGFyZ2V0LnZhbHVlID0gY2hlY2tJblxuICAgIHRoaXMuY2hlY2tPdXRJbnB1dFRhcmdldC52YWx1ZSA9IGNoZWNrT3V0XG4gICAgXG4gICAgLy8gVXBkYXRlIFVSTCBhbmQgcmVsb2FkIHBhZ2VcbiAgICB0aGlzLnVwZGF0ZVVSTEFuZFJlbG9hZCgpXG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVVSTEFuZFJlbG9hZCgpOiB2b2lkIHtcbiAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpXG4gICAgXG4gICAgLy8gVXBkYXRlIG9yIHJlbW92ZSBjaXR5IHBhcmFtZXRlclxuICAgIGlmICh0aGlzLmNpdHlJbnB1dFRhcmdldC52YWx1ZSkge1xuICAgICAgcGFyYW1zLnNldCgnY2l0eScsIHRoaXMuY2l0eUlucHV0VGFyZ2V0LnZhbHVlKVxuICAgIH0gZWxzZSB7XG4gICAgICBwYXJhbXMuZGVsZXRlKCdjaXR5JylcbiAgICB9XG4gICAgXG4gICAgLy8gVXBkYXRlIG9yIHJlbW92ZSBkYXRlIHBhcmFtZXRlcnNcbiAgICAvLyBJZiBkYXRlcyBhcmUgZW1wdHkgc3RyaW5ncyAoYWZ0ZXIgcmVzZXQpLCByZW1vdmUgdGhlbSBmcm9tIFVSTFxuICAgIGlmICh0aGlzLmNoZWNrSW5JbnB1dFRhcmdldC52YWx1ZSkge1xuICAgICAgcGFyYW1zLnNldCgnY2hlY2tfaW4nLCB0aGlzLmNoZWNrSW5JbnB1dFRhcmdldC52YWx1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgcGFyYW1zLmRlbGV0ZSgnY2hlY2tfaW4nKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5jaGVja091dElucHV0VGFyZ2V0LnZhbHVlKSB7XG4gICAgICBwYXJhbXMuc2V0KCdjaGVja19vdXQnLCB0aGlzLmNoZWNrT3V0SW5wdXRUYXJnZXQudmFsdWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIHBhcmFtcy5kZWxldGUoJ2NoZWNrX291dCcpXG4gICAgfVxuICAgIFxuICAgIC8vIFJlbG9hZCBwYWdlIHdpdGggdXBkYXRlZCBwYXJhbWV0ZXJzXG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgJHt3aW5kb3cubG9jYXRpb24ucGF0aG5hbWV9PyR7cGFyYW1zLnRvU3RyaW5nKCl9YFxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJ3cmFwcGVyXCIsIFwic2xpZGVcIl1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHdyYXBwZXJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2xpZGVUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG5cbiAgcHJpdmF0ZSBjdXJyZW50SW5kZXg6IG51bWJlciA9IDBcbiAgcHJpdmF0ZSBzdGFydFk6IG51bWJlciA9IDBcbiAgcHJpdmF0ZSBzdGFydFRpbWU6IG51bWJlciA9IDBcbiAgcHJpdmF0ZSBpc0RyYWdnaW5nOiBib29sZWFuID0gZmFsc2VcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiTGl2ZVJvb20gY29ubmVjdGVkXCIpXG4gICAgXG4gICAgLy8gQWRkIHRvdWNoIGV2ZW50IGxpc3RlbmVyc1xuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5oYW5kbGVUb3VjaFN0YXJ0LmJpbmQodGhpcyksIHsgcGFzc2l2ZTogdHJ1ZSB9KVxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLmhhbmRsZVRvdWNoTW92ZS5iaW5kKHRoaXMpLCB7IHBhc3NpdmU6IGZhbHNlIH0pXG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5oYW5kbGVUb3VjaEVuZC5iaW5kKHRoaXMpLCB7IHBhc3NpdmU6IHRydWUgfSlcbiAgICBcbiAgICAvLyBJbml0aWFsaXplIGZpcnN0IHNsaWRlXG4gICAgdGhpcy5zaG93U2xpZGUoMClcbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJMaXZlUm9vbSBkaXNjb25uZWN0ZWRcIilcbiAgICBcbiAgICAvLyBSZW1vdmUgZXZlbnQgbGlzdGVuZXJzXG4gICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLmhhbmRsZVRvdWNoU3RhcnQuYmluZCh0aGlzKSlcbiAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5oYW5kbGVUb3VjaE1vdmUuYmluZCh0aGlzKSlcbiAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLmhhbmRsZVRvdWNoRW5kLmJpbmQodGhpcykpXG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVRvdWNoU3RhcnQoZTogVG91Y2hFdmVudCk6IHZvaWQge1xuICAgIHRoaXMuc3RhcnRZID0gZS50b3VjaGVzWzBdLmNsaWVudFlcbiAgICB0aGlzLnN0YXJ0VGltZSA9IERhdGUubm93KClcbiAgICB0aGlzLmlzRHJhZ2dpbmcgPSB0cnVlXG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVRvdWNoTW92ZShlOiBUb3VjaEV2ZW50KTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmlzRHJhZ2dpbmcpIHJldHVyblxuICAgIFxuICAgIGNvbnN0IGN1cnJlbnRZID0gZS50b3VjaGVzWzBdLmNsaWVudFlcbiAgICBjb25zdCBkaWZmWSA9IGN1cnJlbnRZIC0gdGhpcy5zdGFydFlcbiAgICBcbiAgICAvLyBQcmV2ZW50IGRlZmF1bHQgc2Nyb2xsIGlmIHN3aXBpbmcgdmVydGljYWxseVxuICAgIGlmIChNYXRoLmFicyhkaWZmWSkgPiAxMCkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVUb3VjaEVuZChlOiBUb3VjaEV2ZW50KTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmlzRHJhZ2dpbmcpIHJldHVyblxuICAgIFxuICAgIGNvbnN0IGVuZFkgPSBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFlcbiAgICBjb25zdCBkaWZmWSA9IGVuZFkgLSB0aGlzLnN0YXJ0WVxuICAgIGNvbnN0IGRpZmZUaW1lID0gRGF0ZS5ub3coKSAtIHRoaXMuc3RhcnRUaW1lXG4gICAgXG4gICAgdGhpcy5pc0RyYWdnaW5nID0gZmFsc2VcbiAgICBcbiAgICAvLyBDYWxjdWxhdGUgc3dpcGUgdmVsb2NpdHlcbiAgICBjb25zdCB2ZWxvY2l0eSA9IE1hdGguYWJzKGRpZmZZKSAvIGRpZmZUaW1lXG4gICAgXG4gICAgLy8gRGV0ZXJtaW5lIGlmIHN3aXBlIGlzIHZhbGlkICh0aHJlc2hvbGQ6IDUwcHggb3IgZmFzdCBzd2lwZSlcbiAgICBjb25zdCBpc1N3aXBlVXAgPSBkaWZmWSA8IC01MCB8fCAoZGlmZlkgPCAtMzAgJiYgdmVsb2NpdHkgPiAwLjUpXG4gICAgY29uc3QgaXNTd2lwZURvd24gPSBkaWZmWSA+IDUwIHx8IChkaWZmWSA+IDMwICYmIHZlbG9jaXR5ID4gMC41KVxuICAgIFxuICAgIGlmIChpc1N3aXBlVXApIHtcbiAgICAgIC8vIFN3aXBlIHVwIC0gZ28gdG8gbmV4dCBzbGlkZVxuICAgICAgdGhpcy5uZXh0U2xpZGUoKVxuICAgIH0gZWxzZSBpZiAoaXNTd2lwZURvd24pIHtcbiAgICAgIC8vIFN3aXBlIGRvd24gLSBnbyB0byBwcmV2aW91cyBzbGlkZVxuICAgICAgdGhpcy5wcmV2U2xpZGUoKVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnN0YXJ0WSA9IDBcbiAgICB0aGlzLnN0YXJ0VGltZSA9IDBcbiAgfVxuXG4gIHByaXZhdGUgbmV4dFNsaWRlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmN1cnJlbnRJbmRleCA8IHRoaXMuc2xpZGVUYXJnZXRzLmxlbmd0aCAtIDEpIHtcbiAgICAgIHRoaXMuc2hvd1NsaWRlKHRoaXMuY3VycmVudEluZGV4ICsgMSlcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHByZXZTbGlkZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jdXJyZW50SW5kZXggPiAwKSB7XG4gICAgICB0aGlzLnNob3dTbGlkZSh0aGlzLmN1cnJlbnRJbmRleCAtIDEpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzaG93U2xpZGUoaW5kZXg6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIFJlbW92ZSBhY3RpdmUgY2xhc3MgZnJvbSBhbGwgc2xpZGVzXG4gICAgdGhpcy5zbGlkZVRhcmdldHMuZm9yRWFjaCgoc2xpZGUsIGkpID0+IHtcbiAgICAgIHNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScsICdwcmV2JylcbiAgICAgIFxuICAgICAgaWYgKGkgPT09IGluZGV4KSB7XG4gICAgICAgIHNsaWRlLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXG4gICAgICB9IGVsc2UgaWYgKGkgPT09IGluZGV4IC0gMSkge1xuICAgICAgICBzbGlkZS5jbGFzc0xpc3QuYWRkKCdwcmV2JylcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIHRoaXMuY3VycmVudEluZGV4ID0gaW5kZXhcbiAgICBcbiAgICAvLyBIaWRlIHN3aXBlIGhpbnQgYWZ0ZXIgZmlyc3Qgc3dpcGVcbiAgICBpZiAoaW5kZXggPiAwKSB7XG4gICAgICBjb25zdCBzd2lwZUhpbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGl2ZS1zd2lwZS1oaW50JykgYXMgSFRNTEVsZW1lbnRcbiAgICAgIGlmIChzd2lwZUhpbnQpIHtcbiAgICAgICAgc3dpcGVIaW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbi8vIERlY2xhcmUgVHVyYm8gZ2xvYmFsIHR5cGVcbmRlY2xhcmUgY29uc3QgVHVyYm86IGFueVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJzZWFyY2hJbnB1dFwiXVxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIGNpdHk6IFN0cmluZyxcbiAgICBxdWVyeTogU3RyaW5nXG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHNlYXJjaElucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzU2VhcmNoSW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSBjaXR5VmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHF1ZXJ5VmFsdWU6IHN0cmluZ1xuXG4gIHByaXZhdGUgc2VhcmNoVGltZW91dDogbnVtYmVyIHwgbnVsbCA9IG51bGxcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIEluaXRpYWxpemUgc2VhcmNoIGlucHV0IHdpdGggY3VycmVudCBxdWVyeVxuICAgIGlmICh0aGlzLmhhc1NlYXJjaElucHV0VGFyZ2V0ICYmIHRoaXMucXVlcnlWYWx1ZSkge1xuICAgICAgdGhpcy5zZWFyY2hJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMucXVlcnlWYWx1ZVxuICAgIH1cbiAgfVxuXG4gIC8vIFNlYXJjaCBob3RlbHMgd2l0aCBkZWJvdW5jZVxuICBzZWFyY2goKTogdm9pZCB7XG4gICAgLy8gQ2xlYXIgcHJldmlvdXMgdGltZW91dFxuICAgIGlmICh0aGlzLnNlYXJjaFRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnNlYXJjaFRpbWVvdXQpXG4gICAgfVxuXG4gICAgLy8gRGVib3VuY2Ugc2VhcmNoIGJ5IDUwMG1zXG4gICAgdGhpcy5zZWFyY2hUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5wZXJmb3JtU2VhcmNoKClcbiAgICB9LCA1MDApXG4gIH1cblxuICAvLyBQZXJmb3JtIHRoZSBhY3R1YWwgc2VhcmNoXG4gIHByaXZhdGUgcGVyZm9ybVNlYXJjaCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaGFzU2VhcmNoSW5wdXRUYXJnZXQpIHJldHVyblxuXG4gICAgY29uc3QgcXVlcnkgPSB0aGlzLnNlYXJjaElucHV0VGFyZ2V0LnZhbHVlLnRyaW0oKVxuICAgIGNvbnN0IGNpdHkgPSB0aGlzLmNpdHlWYWx1ZSB8fCAnXHU1MzE3XHU0RUFDXHU1RTAyJ1xuXG4gICAgLy8gQnVpbGQgVVJMIHdpdGggY2l0eSBhbmQgcXVlcnkgcGFyYW1ldGVyc1xuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoJy9zcGVjaWFsX2hvdGVscycsIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4pXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2NpdHknLCBjaXR5KVxuICAgIFxuICAgIGlmIChxdWVyeSkge1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3F1ZXJ5JywgcXVlcnkpXG4gICAgfVxuXG4gICAgLy8gTmF2aWdhdGUgdG8gdGhlIG5ldyBVUkwgd2l0aCBUdXJib1xuICAgIFR1cmJvLnZpc2l0KHVybC50b1N0cmluZygpKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG4vLyBEZWNsYXJlIFR1cmJvIGdsb2JhbCB0eXBlXG5kZWNsYXJlIGNvbnN0IFR1cmJvOiBhbnlcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwic29ydE1vZGFsXCIsXG4gICAgXCJkaXN0cmljdE1vZGFsXCIsIFxuICAgIFwicHJpY2VNb2RhbFwiLFxuICAgIFwiZmlsdGVyTW9kYWxcIixcbiAgICBcInNvcnRCdXR0b25cIixcbiAgICBcImRpc3RyaWN0QnV0dG9uXCIsXG4gICAgXCJwcmljZUJ1dHRvblwiLFxuICAgIFwiZmlsdGVyQnV0dG9uXCIsXG4gICAgXCJzb3J0T3B0aW9uXCIsXG4gICAgXCJkaXN0cmljdE9wdGlvblwiLFxuICAgIFwicHJpY2VPcHRpb25cIixcbiAgICBcInN0YXJPcHRpb25cIlxuICBdXG4gIFxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIGNpdHk6IFN0cmluZyxcbiAgICBxdWVyeTogU3RyaW5nLFxuICAgIHNvcnQ6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiBcInByaWNlXCIgfSxcbiAgICBkaXN0cmljdDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IFwiXCIgfSxcbiAgICBwcmljZVJhbmdlOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCJcIiB9LFxuICAgIHN0YXJzOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCJcIiB9XG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHNvcnRNb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkaXN0cmljdE1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHByaWNlTW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZmlsdGVyTW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc29ydEJ1dHRvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkaXN0cmljdEJ1dHRvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBwcmljZUJ1dHRvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBmaWx0ZXJCdXR0b25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc29ydE9wdGlvblRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBkaXN0cmljdE9wdGlvblRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBwcmljZU9wdGlvblRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBzdGFyT3B0aW9uVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBcbiAgZGVjbGFyZSByZWFkb25seSBoYXNTb3J0TW9kYWxUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNEaXN0cmljdE1vZGFsVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUHJpY2VNb2RhbFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0ZpbHRlck1vZGFsVGFyZ2V0OiBib29sZWFuXG4gIFxuICBkZWNsYXJlIGNpdHlWYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgcXVlcnlWYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgc29ydFZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBkaXN0cmljdFZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBwcmljZVJhbmdlVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHN0YXJzVmFsdWU6IHN0cmluZ1xuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgdGhpcy51cGRhdGVCdXR0b25TdGF0ZXMoKVxuICB9XG5cbiAgLy8gT3BlbiBtb2RhbHNcbiAgb3BlblNvcnRNb2RhbCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5oYXNTb3J0TW9kYWxUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2xvc2VBbGxNb2RhbHMoKVxuICAgICAgdGhpcy5zb3J0TW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICB9XG4gIH1cblxuICBvcGVuRGlzdHJpY3RNb2RhbCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5oYXNEaXN0cmljdE1vZGFsVGFyZ2V0KSB7XG4gICAgICB0aGlzLmNsb3NlQWxsTW9kYWxzKClcbiAgICAgIHRoaXMuZGlzdHJpY3RNb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIH1cbiAgfVxuXG4gIG9wZW5QcmljZU1vZGFsKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmhhc1ByaWNlTW9kYWxUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2xvc2VBbGxNb2RhbHMoKVxuICAgICAgdGhpcy5wcmljZU1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgfVxuICB9XG5cbiAgb3BlbkZpbHRlck1vZGFsKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmhhc0ZpbHRlck1vZGFsVGFyZ2V0KSB7XG4gICAgICB0aGlzLmNsb3NlQWxsTW9kYWxzKClcbiAgICAgIHRoaXMuZmlsdGVyTW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICB9XG4gIH1cblxuICAvLyBDbG9zZSBhbGwgbW9kYWxzXG4gIGNsb3NlQWxsTW9kYWxzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmhhc1NvcnRNb2RhbFRhcmdldCkgdGhpcy5zb3J0TW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBpZiAodGhpcy5oYXNEaXN0cmljdE1vZGFsVGFyZ2V0KSB0aGlzLmRpc3RyaWN0TW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBpZiAodGhpcy5oYXNQcmljZU1vZGFsVGFyZ2V0KSB0aGlzLnByaWNlTW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBpZiAodGhpcy5oYXNGaWx0ZXJNb2RhbFRhcmdldCkgdGhpcy5maWx0ZXJNb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICB9XG5cbiAgLy8gU2VsZWN0IHNvcnQgb3B0aW9uXG4gIHNlbGVjdFNvcnQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHNvcnRWYWx1ZSA9IHRhcmdldC5kYXRhc2V0LnZhbHVlIHx8ICdwcmljZSdcbiAgICB0aGlzLnNvcnRWYWx1ZSA9IHNvcnRWYWx1ZVxuICAgIHRoaXMuY2xvc2VBbGxNb2RhbHMoKVxuICAgIHRoaXMuYXBwbHlGaWx0ZXJzKClcbiAgfVxuXG4gIC8vIFNlbGVjdCBkaXN0cmljdCBvcHRpb25cbiAgc2VsZWN0RGlzdHJpY3QoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGRpc3RyaWN0VmFsdWUgPSB0YXJnZXQuZGF0YXNldC52YWx1ZSB8fCAnJ1xuICAgIHRoaXMuZGlzdHJpY3RWYWx1ZSA9IGRpc3RyaWN0VmFsdWVcbiAgICB0aGlzLmNsb3NlQWxsTW9kYWxzKClcbiAgICB0aGlzLmFwcGx5RmlsdGVycygpXG4gIH1cblxuICAvLyBTZWxlY3QgcHJpY2UgcmFuZ2Ugb3B0aW9uXG4gIHNlbGVjdFByaWNlUmFuZ2UoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHByaWNlVmFsdWUgPSB0YXJnZXQuZGF0YXNldC52YWx1ZSB8fCAnJ1xuICAgIHRoaXMucHJpY2VSYW5nZVZhbHVlID0gcHJpY2VWYWx1ZVxuICAgIHRoaXMuY2xvc2VBbGxNb2RhbHMoKVxuICAgIHRoaXMuYXBwbHlGaWx0ZXJzKClcbiAgfVxuXG4gIC8vIFRvZ2dsZSBzdGFyIHJhdGluZ1xuICB0b2dnbGVTdGFyKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBzdGFyVmFsdWUgPSB0YXJnZXQuZGF0YXNldC52YWx1ZSB8fCAnJ1xuICAgIFxuICAgIC8vIFRvZ2dsZSB0aGUgc3RhciB2YWx1ZVxuICAgIGlmICh0aGlzLnN0YXJzVmFsdWUgPT09IHN0YXJWYWx1ZSkge1xuICAgICAgdGhpcy5zdGFyc1ZhbHVlID0gJydcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdGFyc1ZhbHVlID0gc3RhclZhbHVlXG4gICAgfVxuICAgIFxuICAgIHRoaXMudXBkYXRlU3RhclN0YXRlcygpXG4gIH1cblxuICAvLyBBcHBseSBhbGwgZmlsdGVyc1xuICBhcHBseUZpbHRlcnMoKTogdm9pZCB7XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTCgnL3NwZWNpYWxfaG90ZWxzJywgd2luZG93LmxvY2F0aW9uLm9yaWdpbilcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnY2l0eScsIHRoaXMuY2l0eVZhbHVlIHx8ICdcdTUzMTdcdTRFQUNcdTVFMDInKVxuICAgIFxuICAgIGlmICh0aGlzLnF1ZXJ5VmFsdWUpIHtcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdxdWVyeScsIHRoaXMucXVlcnlWYWx1ZSlcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuc29ydFZhbHVlICYmIHRoaXMuc29ydFZhbHVlICE9PSAncHJpY2UnKSB7XG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnc29ydCcsIHRoaXMuc29ydFZhbHVlKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5kaXN0cmljdFZhbHVlKSB7XG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnZGlzdHJpY3QnLCB0aGlzLmRpc3RyaWN0VmFsdWUpXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLnByaWNlUmFuZ2VWYWx1ZSkge1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3ByaWNlX3JhbmdlJywgdGhpcy5wcmljZVJhbmdlVmFsdWUpXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLnN0YXJzVmFsdWUpIHtcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdzdGFycycsIHRoaXMuc3RhcnNWYWx1ZSlcbiAgICB9XG4gICAgXG4gICAgdGhpcy5jbG9zZUFsbE1vZGFscygpXG4gICAgVHVyYm8udmlzaXQodXJsLnRvU3RyaW5nKCkpXG4gIH1cblxuICAvLyBDbGVhciBhbGwgZmlsdGVyc1xuICBjbGVhckZpbHRlcnMoKTogdm9pZCB7XG4gICAgdGhpcy5zb3J0VmFsdWUgPSAncHJpY2UnXG4gICAgdGhpcy5kaXN0cmljdFZhbHVlID0gJydcbiAgICB0aGlzLnByaWNlUmFuZ2VWYWx1ZSA9ICcnXG4gICAgdGhpcy5zdGFyc1ZhbHVlID0gJydcbiAgICB0aGlzLmFwcGx5RmlsdGVycygpXG4gIH1cblxuICAvLyBVcGRhdGUgYnV0dG9uIHN0YXRlcyBiYXNlZCBvbiBhY3RpdmUgZmlsdGVyc1xuICBwcml2YXRlIHVwZGF0ZUJ1dHRvblN0YXRlcygpOiB2b2lkIHtcbiAgICAvLyBVcGRhdGUgc29ydCBidXR0b25cbiAgICBpZiAodGhpcy5zb3J0VmFsdWUgIT09ICdwcmljZScpIHtcbiAgICAgIHRoaXMuc29ydEJ1dHRvblRhcmdldC5jbGFzc0xpc3QuYWRkKCd0ZXh0LXByaW1hcnknKVxuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgZGlzdHJpY3QgYnV0dG9uXG4gICAgaWYgKHRoaXMuZGlzdHJpY3RWYWx1ZSkge1xuICAgICAgdGhpcy5kaXN0cmljdEJ1dHRvblRhcmdldC5jbGFzc0xpc3QuYWRkKCd0ZXh0LXByaW1hcnknKVxuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgcHJpY2UgYnV0dG9uXG4gICAgaWYgKHRoaXMucHJpY2VSYW5nZVZhbHVlKSB7XG4gICAgICB0aGlzLnByaWNlQnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3RleHQtcHJpbWFyeScpXG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSBmaWx0ZXIgYnV0dG9uXG4gICAgaWYgKHRoaXMuc3RhcnNWYWx1ZSkge1xuICAgICAgdGhpcy5maWx0ZXJCdXR0b25UYXJnZXQuY2xhc3NMaXN0LmFkZCgndGV4dC1wcmltYXJ5JylcbiAgICB9XG4gIH1cblxuICAvLyBVcGRhdGUgc3RhciByYXRpbmcgdmlzdWFsIHN0YXRlc1xuICBwcml2YXRlIHVwZGF0ZVN0YXJTdGF0ZXMoKTogdm9pZCB7XG4gICAgdGhpcy5zdGFyT3B0aW9uVGFyZ2V0cy5mb3JFYWNoKHRhcmdldCA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHRhcmdldC5kYXRhc2V0LnZhbHVlIHx8ICcnXG4gICAgICBpZiAodmFsdWUgPT09IHRoaXMuc3RhcnNWYWx1ZSkge1xuICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnYmctcHJpbWFyeScsICd0ZXh0LXdoaXRlJylcbiAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2JnLWdyYXktMTAwJywgJ3RleHQtZ3JheS03MDAnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2JnLXByaW1hcnknLCAndGV4dC13aGl0ZScpXG4gICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdiZy1ncmF5LTEwMCcsICd0ZXh0LWdyYXktNzAwJylcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgLy8gU3RvcCBldmVudCBwcm9wYWdhdGlvblxuICBzdG9wUHJvcGFnYXRpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuLy8gRGVjbGFyZSBUdXJibyBnbG9iYWwgdHlwZVxuZGVjbGFyZSBjb25zdCBUdXJibzogYW55XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcInNvcnRNb2RhbFwiLFxuICAgIFwiZGlzdHJpY3RNb2RhbFwiLCBcbiAgICBcInByaWNlTW9kYWxcIixcbiAgICBcImZpbHRlck1vZGFsXCIsXG4gICAgXCJzb3J0QnV0dG9uXCIsXG4gICAgXCJkaXN0cmljdEJ1dHRvblwiLFxuICAgIFwicHJpY2VCdXR0b25cIixcbiAgICBcImZpbHRlckJ1dHRvblwiLFxuICAgIFwic29ydE9wdGlvblwiLFxuICAgIFwiZGlzdHJpY3RPcHRpb25cIixcbiAgICBcInByaWNlT3B0aW9uXCIsXG4gICAgXCJzdGFyT3B0aW9uXCJcbiAgXVxuICBcbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBjaXR5OiBTdHJpbmcsXG4gICAgY2hlY2tJbjogU3RyaW5nLFxuICAgIGNoZWNrT3V0OiBTdHJpbmcsXG4gICAgcm9vbXM6IE51bWJlcixcbiAgICBhZHVsdHM6IE51bWJlcixcbiAgICBjaGlsZHJlbjogTnVtYmVyLFxuICAgIHF1ZXJ5OiBTdHJpbmcsXG4gICAgc29ydDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IFwicmVjb21tZW5kXCIgfSxcbiAgICBkaXN0cmljdDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IFwiXCIgfSxcbiAgICBwcmljZVJhbmdlOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCJcIiB9LFxuICAgIHN0YXJzOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCJcIiB9XG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHNvcnRNb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkaXN0cmljdE1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHByaWNlTW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZmlsdGVyTW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc29ydEJ1dHRvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkaXN0cmljdEJ1dHRvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBwcmljZUJ1dHRvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBmaWx0ZXJCdXR0b25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc29ydE9wdGlvblRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBkaXN0cmljdE9wdGlvblRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBwcmljZU9wdGlvblRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBzdGFyT3B0aW9uVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBcbiAgZGVjbGFyZSByZWFkb25seSBoYXNTb3J0TW9kYWxUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNEaXN0cmljdE1vZGFsVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUHJpY2VNb2RhbFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0ZpbHRlck1vZGFsVGFyZ2V0OiBib29sZWFuXG4gIFxuICBkZWNsYXJlIGNpdHlWYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgY2hlY2tJblZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBjaGVja091dFZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSByb29tc1ZhbHVlOiBudW1iZXJcbiAgZGVjbGFyZSBhZHVsdHNWYWx1ZTogbnVtYmVyXG4gIGRlY2xhcmUgY2hpbGRyZW5WYWx1ZTogbnVtYmVyXG4gIGRlY2xhcmUgcXVlcnlWYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgc29ydFZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBkaXN0cmljdFZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBwcmljZVJhbmdlVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHN0YXJzVmFsdWU6IHN0cmluZ1xuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgdGhpcy51cGRhdGVCdXR0b25TdGF0ZXMoKVxuICB9XG5cbiAgLy8gT3BlbiBtb2RhbHNcbiAgb3BlblNvcnRNb2RhbCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5oYXNTb3J0TW9kYWxUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2xvc2VBbGxNb2RhbHMoKVxuICAgICAgdGhpcy5zb3J0TW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICB9XG4gIH1cblxuICBvcGVuRGlzdHJpY3RNb2RhbCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5oYXNEaXN0cmljdE1vZGFsVGFyZ2V0KSB7XG4gICAgICB0aGlzLmNsb3NlQWxsTW9kYWxzKClcbiAgICAgIHRoaXMuZGlzdHJpY3RNb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIH1cbiAgfVxuXG4gIG9wZW5QcmljZU1vZGFsKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmhhc1ByaWNlTW9kYWxUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2xvc2VBbGxNb2RhbHMoKVxuICAgICAgdGhpcy5wcmljZU1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgfVxuICB9XG5cbiAgb3BlbkZpbHRlck1vZGFsKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmhhc0ZpbHRlck1vZGFsVGFyZ2V0KSB7XG4gICAgICB0aGlzLmNsb3NlQWxsTW9kYWxzKClcbiAgICAgIHRoaXMuZmlsdGVyTW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICB9XG4gIH1cblxuICAvLyBDbG9zZSBhbGwgbW9kYWxzXG4gIGNsb3NlQWxsTW9kYWxzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmhhc1NvcnRNb2RhbFRhcmdldCkgdGhpcy5zb3J0TW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBpZiAodGhpcy5oYXNEaXN0cmljdE1vZGFsVGFyZ2V0KSB0aGlzLmRpc3RyaWN0TW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBpZiAodGhpcy5oYXNQcmljZU1vZGFsVGFyZ2V0KSB0aGlzLnByaWNlTW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBpZiAodGhpcy5oYXNGaWx0ZXJNb2RhbFRhcmdldCkgdGhpcy5maWx0ZXJNb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICB9XG5cbiAgLy8gU2VsZWN0IHNvcnQgb3B0aW9uXG4gIHNlbGVjdFNvcnQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHNvcnRWYWx1ZSA9IHRhcmdldC5kYXRhc2V0LnZhbHVlIHx8ICdyZWNvbW1lbmQnXG4gICAgdGhpcy5zb3J0VmFsdWUgPSBzb3J0VmFsdWVcbiAgICB0aGlzLmNsb3NlQWxsTW9kYWxzKClcbiAgICB0aGlzLmFwcGx5RmlsdGVycygpXG4gIH1cblxuICAvLyBTZWxlY3QgZGlzdHJpY3Qgb3B0aW9uXG4gIHNlbGVjdERpc3RyaWN0KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBkaXN0cmljdFZhbHVlID0gdGFyZ2V0LmRhdGFzZXQudmFsdWUgfHwgJydcbiAgICB0aGlzLmRpc3RyaWN0VmFsdWUgPSBkaXN0cmljdFZhbHVlXG4gICAgdGhpcy5jbG9zZUFsbE1vZGFscygpXG4gICAgdGhpcy5hcHBseUZpbHRlcnMoKVxuICB9XG5cbiAgLy8gU2VsZWN0IHByaWNlIHJhbmdlIG9wdGlvblxuICBzZWxlY3RQcmljZVJhbmdlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBwcmljZVZhbHVlID0gdGFyZ2V0LmRhdGFzZXQudmFsdWUgfHwgJydcbiAgICB0aGlzLnByaWNlUmFuZ2VWYWx1ZSA9IHByaWNlVmFsdWVcbiAgICB0aGlzLmNsb3NlQWxsTW9kYWxzKClcbiAgICB0aGlzLmFwcGx5RmlsdGVycygpXG4gIH1cblxuICAvLyBUb2dnbGUgc3RhciByYXRpbmdcbiAgdG9nZ2xlU3RhcihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3Qgc3RhclZhbHVlID0gdGFyZ2V0LmRhdGFzZXQudmFsdWUgfHwgJydcbiAgICBcbiAgICAvLyBUb2dnbGUgdGhlIHN0YXIgdmFsdWVcbiAgICBpZiAodGhpcy5zdGFyc1ZhbHVlID09PSBzdGFyVmFsdWUpIHtcbiAgICAgIHRoaXMuc3RhcnNWYWx1ZSA9ICcnXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhcnNWYWx1ZSA9IHN0YXJWYWx1ZVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnVwZGF0ZVN0YXJTdGF0ZXMoKVxuICB9XG5cbiAgLy8gQXBwbHkgYWxsIGZpbHRlcnNcbiAgYXBwbHlGaWx0ZXJzKCk6IHZvaWQge1xuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoJy9ob3RlbHMvc2VhcmNoJywgd2luZG93LmxvY2F0aW9uLm9yaWdpbilcbiAgICBcbiAgICAvLyBQcmVzZXJ2ZSBib29raW5nIHBhcmFtZXRlcnNcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnY2l0eScsIHRoaXMuY2l0eVZhbHVlIHx8ICdcdTZERjFcdTU3MzNcdTVFMDInKVxuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdjaGVja19pbicsIHRoaXMuY2hlY2tJblZhbHVlKVxuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdjaGVja19vdXQnLCB0aGlzLmNoZWNrT3V0VmFsdWUpXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3Jvb21zJywgdGhpcy5yb29tc1ZhbHVlLnRvU3RyaW5nKCkpXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2FkdWx0cycsIHRoaXMuYWR1bHRzVmFsdWUudG9TdHJpbmcoKSlcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnY2hpbGRyZW4nLCB0aGlzLmNoaWxkcmVuVmFsdWUudG9TdHJpbmcoKSlcbiAgICBcbiAgICAvLyBBZGQgc2VhcmNoIHF1ZXJ5IGlmIHByZXNlbnRcbiAgICBpZiAodGhpcy5xdWVyeVZhbHVlKSB7XG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgncScsIHRoaXMucXVlcnlWYWx1ZSlcbiAgICB9XG4gICAgXG4gICAgLy8gQWRkIGZpbHRlciBwYXJhbWV0ZXJzXG4gICAgaWYgKHRoaXMuc29ydFZhbHVlICYmIHRoaXMuc29ydFZhbHVlICE9PSAncmVjb21tZW5kJykge1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3NvcnQnLCB0aGlzLnNvcnRWYWx1ZSlcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuZGlzdHJpY3RWYWx1ZSkge1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2Rpc3RyaWN0JywgdGhpcy5kaXN0cmljdFZhbHVlKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5wcmljZVJhbmdlVmFsdWUpIHtcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdwcmljZV9yYW5nZScsIHRoaXMucHJpY2VSYW5nZVZhbHVlKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5zdGFyc1ZhbHVlKSB7XG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnc3Rhcl9sZXZlbCcsIHRoaXMuc3RhcnNWYWx1ZSlcbiAgICB9XG4gICAgXG4gICAgdGhpcy5jbG9zZUFsbE1vZGFscygpXG4gICAgVHVyYm8udmlzaXQodXJsLnRvU3RyaW5nKCkpXG4gIH1cblxuICAvLyBDbGVhciBhbGwgZmlsdGVyc1xuICBjbGVhckZpbHRlcnMoKTogdm9pZCB7XG4gICAgdGhpcy5zb3J0VmFsdWUgPSAncmVjb21tZW5kJ1xuICAgIHRoaXMuZGlzdHJpY3RWYWx1ZSA9ICcnXG4gICAgdGhpcy5wcmljZVJhbmdlVmFsdWUgPSAnJ1xuICAgIHRoaXMuc3RhcnNWYWx1ZSA9ICcnXG4gICAgdGhpcy5hcHBseUZpbHRlcnMoKVxuICB9XG5cbiAgLy8gVXBkYXRlIGJ1dHRvbiBzdGF0ZXMgYmFzZWQgb24gYWN0aXZlIGZpbHRlcnNcbiAgcHJpdmF0ZSB1cGRhdGVCdXR0b25TdGF0ZXMoKTogdm9pZCB7XG4gICAgLy8gVXBkYXRlIHNvcnQgYnV0dG9uXG4gICAgaWYgKHRoaXMuc29ydFZhbHVlICE9PSAncmVjb21tZW5kJykge1xuICAgICAgdGhpcy5zb3J0QnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3RleHQtcHJpbWFyeScpXG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSBkaXN0cmljdCBidXR0b25cbiAgICBpZiAodGhpcy5kaXN0cmljdFZhbHVlKSB7XG4gICAgICB0aGlzLmRpc3RyaWN0QnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3RleHQtcHJpbWFyeScpXG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSBwcmljZSBidXR0b25cbiAgICBpZiAodGhpcy5wcmljZVJhbmdlVmFsdWUpIHtcbiAgICAgIHRoaXMucHJpY2VCdXR0b25UYXJnZXQuY2xhc3NMaXN0LmFkZCgndGV4dC1wcmltYXJ5JylcbiAgICB9XG4gICAgXG4gICAgLy8gVXBkYXRlIGZpbHRlciBidXR0b25cbiAgICBpZiAodGhpcy5zdGFyc1ZhbHVlKSB7XG4gICAgICB0aGlzLmZpbHRlckJ1dHRvblRhcmdldC5jbGFzc0xpc3QuYWRkKCd0ZXh0LXByaW1hcnknKVxuICAgIH1cbiAgfVxuXG4gIC8vIFVwZGF0ZSBzdGFyIHJhdGluZyB2aXN1YWwgc3RhdGVzXG4gIHByaXZhdGUgdXBkYXRlU3RhclN0YXRlcygpOiB2b2lkIHtcbiAgICB0aGlzLnN0YXJPcHRpb25UYXJnZXRzLmZvckVhY2godGFyZ2V0ID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gdGFyZ2V0LmRhdGFzZXQudmFsdWUgfHwgJydcbiAgICAgIGlmICh2YWx1ZSA9PT0gdGhpcy5zdGFyc1ZhbHVlKSB7XG4gICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdiZy1wcmltYXJ5JywgJ3RleHQtd2hpdGUnKVxuICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnYmctZ3JheS0xMDAnLCAndGV4dC1ncmF5LTcwMCcpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnYmctcHJpbWFyeScsICd0ZXh0LXdoaXRlJylcbiAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2JnLWdyYXktMTAwJywgJ3RleHQtZ3JheS03MDAnKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyBTdG9wIGV2ZW50IHByb3BhZ2F0aW9uXG4gIHN0b3BQcm9wYWdhdGlvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgLy8gQWRkIHlvdXIgdGFyZ2V0cyBoZXJlLCBlLmcuOlxuICAgIC8vIFwibWVzc2FnZUlucHV0XCIsIFwibWVzc2FnZXNDb250YWluZXJcIiwgXCJzZW5kQnV0dG9uXCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgLy8gQWRkIHlvdXIgdmFsdWVzIGhlcmUsIGUuZy46XG4gICAgLy8gcm9vbUlkOiBTdHJpbmcsXG4gICAgLy8gdXNlcklkOiBTdHJpbmdcbiAgfVxuXG4gIC8vIERlY2xhcmUgeW91ciB0YXJnZXRzIGFuZCB2YWx1ZXNcbiAgLy8gZGVjbGFyZSByZWFkb25seSBtZXNzYWdlSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgLy8gZGVjbGFyZSByZWFkb25seSBtZXNzYWdlc0NvbnRhaW5lclRhcmdldDogSFRNTEVsZW1lbnRcbiAgLy8gZGVjbGFyZSByZWFkb25seSByb29tSWRWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkJsaW5kQm94IGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkJsaW5kQm94IGRpc2Nvbm5lY3RlZFwiKVxuICB9XG5cbiAgLy8gQWRkIHlvdXIgYWN0aW9uIG1ldGhvZHMgaGVyZVxuICAvLyBFeGFtcGxlOlxuICAvLyBjbGljaygpOiB2b2lkIHtcbiAgLy8gICBjb25zb2xlLmxvZyhcIkJ1dHRvbiBjbGlja2VkXCIpXG4gIC8vIH1cblxuICAvLyBGT1JNUzogVHVyYm8gKyBUdXJibyBTdHJlYW1zIGhhbmRsZSBldmVyeXRoaW5nIGF1dG9tYXRpY2FsbHlcbiAgLy8gLSBGb3JtcyBzdWJtaXQgdmlhIEFKQVggKFR1cmJvIERyaXZlKVxuICAvLyAtIFNlcnZlciByZXNwb25kcyB3aXRoIGZvcm1hdC50dXJib19zdHJlYW1cbiAgLy8gLSBUdXJibyBTdHJlYW1zIHVwZGF0ZSBET00gYXV0b21hdGljYWxseVxuICAvLyAtIE5PIG1hbnVhbCBmb3JtIGhhbmRsaW5nIG5lZWRlZCBpbiBTdGltdWx1c1xuICAvL1xuICAvLyBVc2UgU3RpbXVsdXMgZm9yOlxuICAvLyAtIFVJIGludGVyYWN0aW9ucyAodG9nZ2xlLCBzaG93L2hpZGUpXG4gIC8vIC0gSW5wdXQgdmFsaWRhdGlvbi9mb3JtYXR0aW5nXG4gIC8vIC0gRHluYW1pYyBmb3JtIGZpZWxkc1xufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wibWFwQ29udGFpbmVyXCIsIFwiY2xvc2VCdXR0b25cIiwgXCJleHBhbmRCdXR0b25cIl1cbiAgXG4gIGRlY2xhcmUgcmVhZG9ubHkgbWFwQ29udGFpbmVyVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNsb3NlQnV0dG9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGV4cGFuZEJ1dHRvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgXG4gIHByaXZhdGUgaXNFeHBhbmRlZDogYm9vbGVhbiA9IGZhbHNlXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkhvdGVsTWFwVG9nZ2xlIGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgdG9nZ2xlKCk6IHZvaWQge1xuICAgIHRoaXMuaXNFeHBhbmRlZCA9ICF0aGlzLmlzRXhwYW5kZWRcbiAgICBcbiAgICBpZiAodGhpcy5pc0V4cGFuZGVkKSB7XG4gICAgICAvLyBcdTYyNjlcdTU5MjdcdTU3MzBcdTU2RkVcbiAgICAgIHRoaXMubWFwQ29udGFpbmVyVGFyZ2V0LnN0eWxlLmhlaWdodCA9IFwiNjAwcHhcIlxuICAgICAgdGhpcy5leHBhbmRCdXR0b25UYXJnZXQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgICAgdGhpcy5jbG9zZUJ1dHRvblRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgICBcbiAgICAgIC8vIFx1NkVEQVx1NTJBOFx1NTIzMFx1NTczMFx1NTZGRVx1OTg3Nlx1OTBFOFxuICAgICAgdGhpcy5tYXBDb250YWluZXJUYXJnZXQuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFx1N0YyOVx1NUMwRlx1NTczMFx1NTZGRVxuICAgICAgdGhpcy5tYXBDb250YWluZXJUYXJnZXQuc3R5bGUuaGVpZ2h0ID0gXCIxMjhweFwiXG4gICAgICB0aGlzLmV4cGFuZEJ1dHRvblRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgICB0aGlzLmNsb3NlQnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgICB9XG4gIH1cblxuICAvLyBcdTRFQ0VcdTU5MTZcdTkwRThcdTYzMDlcdTk0QUVcdUZGMDhcdTU5ODJcdTVCOUFcdTRGNERcdTYzMDlcdTk0QUVcdUZGMDlcdTg5RTZcdTUzRDFcdTU3MzBcdTU2RkVcdTYyNjlcdTVDNTVcbiAgdG9nZ2xlQW5kU2Nyb2xsKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBcbiAgICAvLyBcdTY3RTVcdTYyN0VcdTk4NzVcdTk3NjJcdTRFMEFcdTc2ODRcdTU3MzBcdTU2RkVcdTVCQjlcdTU2NjhcbiAgICBjb25zdCBtYXBDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1ob3RlbC1tYXAtdG9nZ2xlLXRhcmdldD1cIm1hcENvbnRhaW5lclwiXScpIGFzIEhUTUxFbGVtZW50XG4gICAgaWYgKCFtYXBDb250YWluZXIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcdTYyN0VcdTRFMERcdTUyMzBcdTU3MzBcdTU2RkVcdTVCQjlcdTU2NjhcIilcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBcdTY3RTVcdTYyN0VcdTU3MzBcdTU2RkVcdTYzQTdcdTUyMzZcdTU2NjhcdTVCOUVcdTRGOEJcbiAgICBjb25zdCBtYXBDb250cm9sbGVyID0gdGhpcy5hcHBsaWNhdGlvbi5nZXRDb250cm9sbGVyRm9yRWxlbWVudEFuZElkZW50aWZpZXIoXG4gICAgICBtYXBDb250YWluZXIuY2xvc2VzdCgnW2RhdGEtY29udHJvbGxlcn49XCJob3RlbC1tYXAtdG9nZ2xlXCJdJykgYXMgSFRNTEVsZW1lbnQsXG4gICAgICBcImhvdGVsLW1hcC10b2dnbGVcIlxuICAgICkgYXMgYW55XG4gICAgXG4gICAgaWYgKG1hcENvbnRyb2xsZXIpIHtcbiAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NTczMFx1NTZGRVx1NURGMlx1NUM1NVx1NUYwMFx1RkYwQ1x1NTIxOVx1NEUwRFx1NTA1QVx1NEVGQlx1NEY1NVx1NjRDRFx1NEY1Q1xuICAgICAgaWYgKG1hcENvbnRyb2xsZXIuaXNFeHBhbmRlZCkge1xuICAgICAgICBtYXBDb250YWluZXIuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBcdTg5RTZcdTUzRDFcdTU3MzBcdTU2RkVcdTVDNTVcdTVGMDBcbiAgICAgICAgbWFwQ29udHJvbGxlci50b2dnbGUoKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXHU2MjdFXHU0RTBEXHU1MjMwXHU1NzMwXHU1NkZFXHU2M0E3XHU1MjM2XHU1NjY4XCIpXG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJtYXJrZXJcIixcbiAgICBcImhvdGVsQ2FyZFwiXG4gIF1cblxuICBkZWNsYXJlIHJlYWRvbmx5IG1hcmtlclRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBob3RlbENhcmRUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzTWFya2VyVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzSG90ZWxDYXJkVGFyZ2V0OiBib29sZWFuXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkhvdGVsTWFwIGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkhvdGVsTWFwIGRpc2Nvbm5lY3RlZFwiKVxuICB9XG5cbiAgLy8gU2hvdyBob3RlbCBpbmZvIHdoZW4gbWFya2VyIGlzIGNsaWNrZWRcbiAgc2hvd0hvdGVsSW5mbyhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbWFya2VyID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGhvdGVsSWQgPSBtYXJrZXIuZGF0YXNldC5ob3RlbElkXG4gICAgXG4gICAgaWYgKCFob3RlbElkKSByZXR1cm5cbiAgICBcbiAgICAvLyBGaW5kIHRoZSBjb3JyZXNwb25kaW5nIGhvdGVsIGNhcmRcbiAgICBjb25zdCBob3RlbENhcmQgPSB0aGlzLmhvdGVsQ2FyZFRhcmdldHMuZmluZChcbiAgICAgIGNhcmQgPT4gY2FyZC5kYXRhc2V0LmhvdGVsSWQgPT09IGhvdGVsSWRcbiAgICApXG4gICAgXG4gICAgaWYgKGhvdGVsQ2FyZCkge1xuICAgICAgLy8gU2Nyb2xsIHRvIHRoZSBob3RlbCBjYXJkIHNtb290aGx5XG4gICAgICBob3RlbENhcmQuc2Nyb2xsSW50b1ZpZXcoeyBcbiAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnLCBcbiAgICAgICAgYmxvY2s6ICdjZW50ZXInIFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gQWRkIGhpZ2hsaWdodCBlZmZlY3RcbiAgICAgIGhvdGVsQ2FyZC5jbGFzc0xpc3QuYWRkKCdiZy15ZWxsb3ctNTAnKVxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGhvdGVsQ2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdiZy15ZWxsb3ctNTAnKVxuICAgICAgfSwgMjAwMClcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIGZhbGxiYWNrOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCIvXCIgfVxuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBmYWxsYmFja1ZhbHVlOiBzdHJpbmdcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIE5vIGNvbnNvbGUubG9nIG5lZWRlZFxuICB9XG5cbiAgLyoqXG4gICAqIFNtYXJ0IGJhY2sgbmF2aWdhdGlvbiBiYXNlZCBvbiByZWZlcnJlclxuICAgKiAtIElmIHVzZXIgY2FtZSBmcm9tIHNhbWUgc2l0ZTogZ28gYmFja1xuICAgKiAtIElmIHVzZXIgY2FtZSBmcm9tIGV4dGVybmFsIHNpdGUgb3IgZGlyZWN0IGFjY2VzczogZ28gdG8gZmFsbGJhY2tcbiAgICovXG4gIGdvQmFjayhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgXG4gICAgY29uc3QgcmVmZXJyZXIgPSBkb2N1bWVudC5yZWZlcnJlclxuICAgIGNvbnN0IGN1cnJlbnRIb3N0ID0gd2luZG93LmxvY2F0aW9uLmhvc3RcbiAgICBcbiAgICAvLyBDaGVjayBpZiByZWZlcnJlciBpcyBmcm9tIHNhbWUgc2l0ZVxuICAgIGlmIChyZWZlcnJlciAmJiByZWZlcnJlci5pbmNsdWRlcyhjdXJyZW50SG9zdCkpIHtcbiAgICAgIC8vIENoZWNrIGlmIHRoZXJlJ3MgYWN0dWFsIGhpc3RvcnlcbiAgICAgIGlmICh3aW5kb3cuaGlzdG9yeS5sZW5ndGggPiAxKSB7XG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gRmFsbGJhY2s6IGdvIHRvIHNwZWNpZmllZCBwYXRoIG9yIHJvb3RcbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHRoaXMuZmFsbGJhY2tWYWx1ZVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgLy8gQWRkIHlvdXIgdGFyZ2V0cyBoZXJlLCBlLmcuOlxuICAgIC8vIFwibWVzc2FnZUlucHV0XCIsIFwibWVzc2FnZXNDb250YWluZXJcIiwgXCJzZW5kQnV0dG9uXCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgLy8gQWRkIHlvdXIgdmFsdWVzIGhlcmUsIGUuZy46XG4gICAgLy8gcm9vbUlkOiBTdHJpbmcsXG4gICAgLy8gdXNlcklkOiBTdHJpbmdcbiAgfVxuXG4gIC8vIERlY2xhcmUgeW91ciB0YXJnZXRzIGFuZCB2YWx1ZXNcbiAgLy8gZGVjbGFyZSByZWFkb25seSBtZXNzYWdlSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgLy8gZGVjbGFyZSByZWFkb25seSBtZXNzYWdlc0NvbnRhaW5lclRhcmdldDogSFRNTEVsZW1lbnRcbiAgLy8gZGVjbGFyZSByZWFkb25seSByb29tSWRWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlRvdXJHcm91cFRhYnMgY29ubmVjdGVkXCIpXG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiVG91ckdyb3VwVGFicyBkaXNjb25uZWN0ZWRcIilcbiAgfVxuXG4gIC8vIEFkZCB5b3VyIGFjdGlvbiBtZXRob2RzIGhlcmVcbiAgLy8gRXhhbXBsZTpcbiAgLy8gY2xpY2soKTogdm9pZCB7XG4gIC8vICAgY29uc29sZS5sb2coXCJCdXR0b24gY2xpY2tlZFwiKVxuICAvLyB9XG5cbiAgLy8gRk9STVM6IFR1cmJvICsgVHVyYm8gU3RyZWFtcyBoYW5kbGUgZXZlcnl0aGluZyBhdXRvbWF0aWNhbGx5XG4gIC8vIC0gRm9ybXMgc3VibWl0IHZpYSBBSkFYIChUdXJibyBEcml2ZSlcbiAgLy8gLSBTZXJ2ZXIgcmVzcG9uZHMgd2l0aCBmb3JtYXQudHVyYm9fc3RyZWFtXG4gIC8vIC0gVHVyYm8gU3RyZWFtcyB1cGRhdGUgRE9NIGF1dG9tYXRpY2FsbHlcbiAgLy8gLSBOTyBtYW51YWwgZm9ybSBoYW5kbGluZyBuZWVkZWQgaW4gU3RpbXVsdXNcbiAgLy9cbiAgLy8gVXNlIFN0aW11bHVzIGZvcjpcbiAgLy8gLSBVSSBpbnRlcmFjdGlvbnMgKHRvZ2dsZSwgc2hvdy9oaWRlKVxuICAvLyAtIElucHV0IHZhbGlkYXRpb24vZm9ybWF0dGluZ1xuICAvLyAtIER5bmFtaWMgZm9ybSBmaWVsZHNcbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcIm1vZGFsXCIsXG4gICAgXCJtaW5TbGlkZXJcIixcbiAgICBcIm1heFNsaWRlclwiLFxuICAgIFwic2xpZGVyVHJhY2tcIixcbiAgICBcIm1pblByaWNlRGlzcGxheVwiLFxuICAgIFwibWF4UHJpY2VEaXNwbGF5XCIsXG4gICAgXCJzdGFyUmF0aW5nXCIsXG4gICAgXCJwcmljZVByZXNldFwiLFxuICAgIFwiZGlzcGxheVRleHRcIlxuICBdXG5cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBtaW5QcmljZTogTnVtYmVyLFxuICAgIG1heFByaWNlOiBOdW1iZXIsXG4gICAgc3RhcnM6IE51bWJlclxuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBtaW5TbGlkZXJUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBtYXhTbGlkZXJUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzbGlkZXJUcmFja1RhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBtaW5QcmljZURpc3BsYXlUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbWF4UHJpY2VEaXNwbGF5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHN0YXJSYXRpbmdUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgcHJpY2VQcmVzZXRUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgZGlzcGxheVRleHRUYXJnZXQ6IEhUTUxFbGVtZW50XG5cbiAgZGVjbGFyZSBtaW5QcmljZVZhbHVlOiBudW1iZXJcbiAgZGVjbGFyZSBtYXhQcmljZVZhbHVlOiBudW1iZXJcbiAgZGVjbGFyZSBzdGFyc1ZhbHVlOiBudW1iZXJcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiSG90ZWxQcmljZUZpbHRlciBjb25uZWN0ZWRcIilcbiAgICBcbiAgICAvLyBUcnkgdG8gcmVhZCBpbml0aWFsIHZhbHVlcyBmcm9tIFVSTCBwYXJhbWV0ZXJzIG9yIGhpZGRlbiBmb3JtIGZpZWxkc1xuICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaClcbiAgICBjb25zdCBtaW5QcmljZVBhcmFtID0gdXJsUGFyYW1zLmdldCgncHJpY2VfbWluJylcbiAgICBjb25zdCBtYXhQcmljZVBhcmFtID0gdXJsUGFyYW1zLmdldCgncHJpY2VfbWF4JylcbiAgICBjb25zdCBzdGFyTGV2ZWxQYXJhbSA9IHVybFBhcmFtcy5nZXQoJ3N0YXJfbGV2ZWwnKVxuICAgIFxuICAgIC8vIEluaXRpYWxpemUgZnJvbSBVUkwgcGFyYW1zIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIHVzZSBkZWZhdWx0c1xuICAgIHRoaXMubWluUHJpY2VWYWx1ZSA9IG1pblByaWNlUGFyYW0gJiYgbWluUHJpY2VQYXJhbSAhPT0gJycgPyBwYXJzZUludChtaW5QcmljZVBhcmFtKSA6IDBcbiAgICB0aGlzLm1heFByaWNlVmFsdWUgPSBtYXhQcmljZVBhcmFtICYmIG1heFByaWNlUGFyYW0gIT09ICcnID8gcGFyc2VJbnQobWF4UHJpY2VQYXJhbSkgOiAzMDAwXG4gICAgdGhpcy5zdGFyc1ZhbHVlID0gc3RhckxldmVsUGFyYW0gJiYgc3RhckxldmVsUGFyYW0gIT09ICcnID8gcGFyc2VJbnQoc3RhckxldmVsUGFyYW0pIDogMFxuICAgIFxuICAgIC8vIFVwZGF0ZSBVSSB0byByZWZsZWN0IGxvYWRlZCB2YWx1ZXNcbiAgICB0aGlzLm1pblNsaWRlclRhcmdldC52YWx1ZSA9IHRoaXMubWluUHJpY2VWYWx1ZS50b1N0cmluZygpXG4gICAgdGhpcy5tYXhTbGlkZXJUYXJnZXQudmFsdWUgPSB0aGlzLm1heFByaWNlVmFsdWUudG9TdHJpbmcoKVxuICAgIHRoaXMubWluUHJpY2VEaXNwbGF5VGFyZ2V0LnRleHRDb250ZW50ID0gdGhpcy5taW5QcmljZVZhbHVlLnRvU3RyaW5nKClcbiAgICB0aGlzLm1heFByaWNlRGlzcGxheVRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMubWF4UHJpY2VWYWx1ZS50b1N0cmluZygpXG4gICAgXG4gICAgLy8gVXBkYXRlIHNsaWRlciB0cmFjayB2aXN1YWxcbiAgICB0aGlzLnVwZGF0ZVNsaWRlclRyYWNrKClcbiAgICBcbiAgICAvLyBVcGRhdGUgcHJpY2UgcHJlc2V0IGJ1dHRvbiBzZWxlY3Rpb24gaWYgdmFsdWVzIG1hdGNoIGEgcHJlc2V0XG4gICAgdGhpcy51cGRhdGVQcmVzZXRTZWxlY3Rpb24oKVxuICAgIFxuICAgIC8vIFVwZGF0ZSBzdGFyIHJhdGluZyBidXR0b24gc2VsZWN0aW9uXG4gICAgdGhpcy51cGRhdGVTdGFyU2VsZWN0aW9uKClcbiAgICBcbiAgICAvLyBVcGRhdGUgZGlzcGxheSB0ZXh0XG4gICAgdGhpcy51cGRhdGVEaXNwbGF5VGV4dCgpXG4gIH1cblxuICBvcGVuTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJ1xuICB9XG5cbiAgY2xvc2VNb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICcnXG4gIH1cblxuICB1cGRhdGVNaW5QcmljZSgpOiB2b2lkIHtcbiAgICBjb25zdCBtaW5WYWx1ZSA9IHBhcnNlSW50KHRoaXMubWluU2xpZGVyVGFyZ2V0LnZhbHVlKVxuICAgIGNvbnN0IG1heFZhbHVlID0gcGFyc2VJbnQodGhpcy5tYXhTbGlkZXJUYXJnZXQudmFsdWUpXG5cbiAgICAvLyBBdXRvLWFkanVzdDogbWluIGNhbm5vdCBleGNlZWQgbWF4XG4gICAgaWYgKG1pblZhbHVlID4gbWF4VmFsdWUpIHtcbiAgICAgIHRoaXMubWluU2xpZGVyVGFyZ2V0LnZhbHVlID0gbWF4VmFsdWUudG9TdHJpbmcoKVxuICAgICAgdGhpcy5taW5QcmljZVZhbHVlID0gbWF4VmFsdWVcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5taW5QcmljZVZhbHVlID0gbWluVmFsdWVcbiAgICB9XG5cbiAgICB0aGlzLm1pblByaWNlRGlzcGxheVRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMubWluUHJpY2VWYWx1ZS50b1N0cmluZygpXG4gICAgdGhpcy51cGRhdGVTbGlkZXJUcmFjaygpXG4gIH1cblxuICB1cGRhdGVNYXhQcmljZSgpOiB2b2lkIHtcbiAgICBjb25zdCBtaW5WYWx1ZSA9IHBhcnNlSW50KHRoaXMubWluU2xpZGVyVGFyZ2V0LnZhbHVlKVxuICAgIGNvbnN0IG1heFZhbHVlID0gcGFyc2VJbnQodGhpcy5tYXhTbGlkZXJUYXJnZXQudmFsdWUpXG5cbiAgICAvLyBBdXRvLWFkanVzdDogbWF4IGNhbm5vdCBiZSBsZXNzIHRoYW4gbWluXG4gICAgaWYgKG1heFZhbHVlIDwgbWluVmFsdWUpIHtcbiAgICAgIHRoaXMubWF4U2xpZGVyVGFyZ2V0LnZhbHVlID0gbWluVmFsdWUudG9TdHJpbmcoKVxuICAgICAgdGhpcy5tYXhQcmljZVZhbHVlID0gbWluVmFsdWVcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tYXhQcmljZVZhbHVlID0gbWF4VmFsdWVcbiAgICB9XG5cbiAgICB0aGlzLm1heFByaWNlRGlzcGxheVRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMubWF4UHJpY2VWYWx1ZS50b1N0cmluZygpXG4gICAgdGhpcy51cGRhdGVTbGlkZXJUcmFjaygpXG4gIH1cblxuICBzZXRRdWlja1ByaWNlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBtaW4gPSBwYXJzZUludChidXR0b24uZGF0YXNldC5taW4gfHwgJzAnKVxuICAgIGNvbnN0IG1heCA9IHBhcnNlSW50KGJ1dHRvbi5kYXRhc2V0Lm1heCB8fCAnMzAwMCcpXG5cbiAgICAvLyBDbGVhciBhbGwgcHJpY2UgcHJlc2V0IHNlbGVjdGlvbnMgZmlyc3RcbiAgICB0aGlzLnByaWNlUHJlc2V0VGFyZ2V0cy5mb3JFYWNoKGVsID0+IHtcbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJywgJ2JvcmRlci15ZWxsb3ctNTAwJywgJ2JnLXllbGxvdy01MCcpXG4gICAgICBlbC5jbGFzc0xpc3QuYWRkKCdib3JkZXItZ3JheS0zMDAnKVxuICAgIH0pXG5cbiAgICAvLyBTZWxlY3QgdGhlIGNsaWNrZWQgcHJlc2V0XG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1ncmF5LTMwMCcpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJywgJ2JvcmRlci15ZWxsb3ctNTAwJywgJ2JnLXllbGxvdy01MCcpXG5cbiAgICB0aGlzLm1pblNsaWRlclRhcmdldC52YWx1ZSA9IG1pbi50b1N0cmluZygpXG4gICAgdGhpcy5tYXhTbGlkZXJUYXJnZXQudmFsdWUgPSBtYXgudG9TdHJpbmcoKVxuICAgIHRoaXMubWluUHJpY2VWYWx1ZSA9IG1pblxuICAgIHRoaXMubWF4UHJpY2VWYWx1ZSA9IG1heFxuICAgIHRoaXMubWluUHJpY2VEaXNwbGF5VGFyZ2V0LnRleHRDb250ZW50ID0gbWluLnRvU3RyaW5nKClcbiAgICB0aGlzLm1heFByaWNlRGlzcGxheVRhcmdldC50ZXh0Q29udGVudCA9IG1heC50b1N0cmluZygpXG4gICAgdGhpcy51cGRhdGVTbGlkZXJUcmFjaygpXG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVNsaWRlclRyYWNrKCk6IHZvaWQge1xuICAgIGNvbnN0IHNsaWRlck1heCA9IDMwMDBcbiAgICBjb25zdCBtaW5QZXJjZW50ID0gKHRoaXMubWluUHJpY2VWYWx1ZSAvIHNsaWRlck1heCkgKiAxMDBcbiAgICBjb25zdCBtYXhQZXJjZW50ID0gKHRoaXMubWF4UHJpY2VWYWx1ZSAvIHNsaWRlck1heCkgKiAxMDBcblxuICAgIHRoaXMuc2xpZGVyVHJhY2tUYXJnZXQuc3R5bGUubGVmdCA9IGAke21pblBlcmNlbnR9JWBcbiAgICB0aGlzLnNsaWRlclRyYWNrVGFyZ2V0LnN0eWxlLnJpZ2h0ID0gYCR7MTAwIC0gbWF4UGVyY2VudH0lYFxuICB9XG5cbiAgc2VsZWN0U3RhclJhdGluZyhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3Qgc3RhcnMgPSBwYXJzZUludCh0YXJnZXQuZGF0YXNldC5zdGFycyB8fCAnMCcpXG5cbiAgICAvLyBUb2dnbGUgc2VsZWN0aW9uOiBpZiBhbHJlYWR5IHNlbGVjdGVkLCBkZXNlbGVjdFxuICAgIGlmICh0aGlzLnN0YXJzVmFsdWUgPT09IHN0YXJzKSB7XG4gICAgICB0aGlzLnN0YXJzVmFsdWUgPSAwXG4gICAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnLCAnYm9yZGVyLXllbGxvdy01MDAnLCAnYmcteWVsbG93LTUwJylcbiAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdib3JkZXItZ3JheS0zMDAnKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDbGVhciBhbGwgc2VsZWN0aW9ucyBmaXJzdFxuICAgICAgdGhpcy5zdGFyUmF0aW5nVGFyZ2V0cy5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnLCAnYm9yZGVyLXllbGxvdy01MDAnLCAnYmcteWVsbG93LTUwJylcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLWdyYXktMzAwJylcbiAgICAgIH0pXG5cbiAgICAgIC8vIFNlbGVjdCB0aGUgY2xpY2tlZCBvbmVcbiAgICAgIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItZ3JheS0zMDAnKVxuICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJywgJ2JvcmRlci15ZWxsb3ctNTAwJywgJ2JnLXllbGxvdy01MCcpXG4gICAgICB0aGlzLnN0YXJzVmFsdWUgPSBzdGFyc1xuICAgIH1cbiAgfVxuXG4gIHJlc2V0KCk6IHZvaWQge1xuICAgIC8vIFJlc2V0IHByaWNlIHNsaWRlcnNcbiAgICB0aGlzLm1pblByaWNlVmFsdWUgPSAwXG4gICAgdGhpcy5tYXhQcmljZVZhbHVlID0gMzAwMFxuICAgIHRoaXMubWluU2xpZGVyVGFyZ2V0LnZhbHVlID0gJzAnXG4gICAgdGhpcy5tYXhTbGlkZXJUYXJnZXQudmFsdWUgPSAnMzAwMCdcbiAgICB0aGlzLm1pblByaWNlRGlzcGxheVRhcmdldC50ZXh0Q29udGVudCA9ICcwJ1xuICAgIHRoaXMubWF4UHJpY2VEaXNwbGF5VGFyZ2V0LnRleHRDb250ZW50ID0gJzMwMDAnXG4gICAgdGhpcy51cGRhdGVTbGlkZXJUcmFjaygpXG5cbiAgICAvLyBSZXNldCBwcmljZSBwcmVzZXRzXG4gICAgdGhpcy5wcmljZVByZXNldFRhcmdldHMuZm9yRWFjaChlbCA9PiB7XG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcsICdib3JkZXIteWVsbG93LTUwMCcsICdiZy15ZWxsb3ctNTAnKVxuICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLWdyYXktMzAwJylcbiAgICB9KVxuXG4gICAgLy8gUmVzZXQgc3RhciByYXRpbmdzXG4gICAgdGhpcy5zdGFyc1ZhbHVlID0gMFxuICAgIHRoaXMuc3RhclJhdGluZ1RhcmdldHMuZm9yRWFjaChlbCA9PiB7XG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcsICdib3JkZXIteWVsbG93LTUwMCcsICdiZy15ZWxsb3ctNTAnKVxuICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLWdyYXktMzAwJylcbiAgICB9KVxuXG4gICAgLy8gVXBkYXRlIGRpc3BsYXkgdGV4dFxuICAgIHRoaXMudXBkYXRlRGlzcGxheVRleHQoKVxuICB9XG5cbiAgY29uZmlybSgpOiB2b2lkIHtcbiAgICB0aGlzLnVwZGF0ZURpc3BsYXlUZXh0KClcbiAgICB0aGlzLmRpc3BhdGNoRmlsdGVyVXBkYXRlRXZlbnQoKVxuICAgIHRoaXMuY2xvc2VNb2RhbCgpXG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZURpc3BsYXlUZXh0KCk6IHZvaWQge1xuICAgIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFtdXG4gICAgXG4gICAgLy8gQWRkIHByaWNlIHJhbmdlIGlmIG5vdCBkZWZhdWx0ICgwLTMwMDApXG4gICAgaWYgKHRoaXMubWluUHJpY2VWYWx1ZSA+IDAgfHwgdGhpcy5tYXhQcmljZVZhbHVlIDwgMzAwMCkge1xuICAgICAgaWYgKHRoaXMubWF4UHJpY2VWYWx1ZSA+PSAzMDAwKSB7XG4gICAgICAgIHBhcnRzLnB1c2goYFx1MDBBNSR7dGhpcy5taW5QcmljZVZhbHVlfStgKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFydHMucHVzaChgXHUwMEE1JHt0aGlzLm1pblByaWNlVmFsdWV9LSR7dGhpcy5tYXhQcmljZVZhbHVlfWApXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEFkZCBzdGFyIHJhdGluZyBpZiBzZWxlY3RlZFxuICAgIGlmICh0aGlzLnN0YXJzVmFsdWUgPiAwKSB7XG4gICAgICBjb25zdCBzdGFyTGFiZWxzOiBSZWNvcmQ8bnVtYmVyLCBzdHJpbmc+ID0ge1xuICAgICAgICAyOiAnXHU0RThDXHU2NjFGJyxcbiAgICAgICAgMzogJ1x1NEUwOVx1NjYxRicsXG4gICAgICAgIDQ6ICdcdTU2REJcdTY2MUYnLFxuICAgICAgICA1OiAnXHU0RTk0XHU2NjFGJ1xuICAgICAgfVxuICAgICAgcGFydHMucHVzaChzdGFyTGFiZWxzW3RoaXMuc3RhcnNWYWx1ZV0gfHwgYCR7dGhpcy5zdGFyc1ZhbHVlfVx1NjYxRmApXG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSBkaXNwbGF5IHRleHRcbiAgICBpZiAocGFydHMubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5kaXNwbGF5VGV4dFRhcmdldC50ZXh0Q29udGVudCA9IHBhcnRzLmpvaW4oJyBcdTAwQjcgJylcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kaXNwbGF5VGV4dFRhcmdldC50ZXh0Q29udGVudCA9ICdcdTRFRjdcdTY4M0MvXHU2NjFGXHU3RUE3J1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZGlzcGF0Y2hGaWx0ZXJVcGRhdGVFdmVudCgpOiB2b2lkIHtcbiAgICBjb25zdCBmaWx0ZXJVcGRhdGVFdmVudCA9IG5ldyBDdXN0b21FdmVudCgnaG90ZWwtcHJpY2UtZmlsdGVyOmZpbHRlci11cGRhdGVkJywge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIG1pblByaWNlOiB0aGlzLm1pblByaWNlVmFsdWUsXG4gICAgICAgIG1heFByaWNlOiB0aGlzLm1heFByaWNlVmFsdWUsXG4gICAgICAgIHN0YXJzOiB0aGlzLnN0YXJzVmFsdWVcbiAgICAgIH0sXG4gICAgICBidWJibGVzOiB0cnVlXG4gICAgfSlcbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGZpbHRlclVwZGF0ZUV2ZW50KVxuICAgIGNvbnNvbGUubG9nKCdIb3RlbCBwcmljZSBmaWx0ZXI6IERpc3BhdGNoZWQgZmlsdGVyIHVwZGF0ZSBldmVudCcsIHtcbiAgICAgIG1pblByaWNlOiB0aGlzLm1pblByaWNlVmFsdWUsXG4gICAgICBtYXhQcmljZTogdGhpcy5tYXhQcmljZVZhbHVlLFxuICAgICAgc3RhcnM6IHRoaXMuc3RhcnNWYWx1ZVxuICAgIH0pXG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVByZXNldFNlbGVjdGlvbigpOiB2b2lkIHtcbiAgICAvLyBGaW5kIG1hdGNoaW5nIHByZXNldCBidXR0b24gYW5kIG1hcmsgaXQgYXMgc2VsZWN0ZWRcbiAgICB0aGlzLnByaWNlUHJlc2V0VGFyZ2V0cy5mb3JFYWNoKGVsID0+IHtcbiAgICAgIGNvbnN0IG1pbiA9IHBhcnNlSW50KGVsLmRhdGFzZXQubWluIHx8ICcwJylcbiAgICAgIGNvbnN0IG1heCA9IHBhcnNlSW50KGVsLmRhdGFzZXQubWF4IHx8ICczMDAwJylcbiAgICAgIFxuICAgICAgaWYgKG1pbiA9PT0gdGhpcy5taW5QcmljZVZhbHVlICYmIG1heCA9PT0gdGhpcy5tYXhQcmljZVZhbHVlKSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1ncmF5LTMwMCcpXG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJywgJ2JvcmRlci15ZWxsb3ctNTAwJywgJ2JnLXllbGxvdy01MCcpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcsICdib3JkZXIteWVsbG93LTUwMCcsICdiZy15ZWxsb3ctNTAnKVxuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdib3JkZXItZ3JheS0zMDAnKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVN0YXJTZWxlY3Rpb24oKTogdm9pZCB7XG4gICAgLy8gVXBkYXRlIHN0YXIgcmF0aW5nIGJ1dHRvbiBzZWxlY3Rpb25cbiAgICB0aGlzLnN0YXJSYXRpbmdUYXJnZXRzLmZvckVhY2goZWwgPT4ge1xuICAgICAgY29uc3Qgc3RhcnMgPSBwYXJzZUludChlbC5kYXRhc2V0LnN0YXJzIHx8ICcwJylcbiAgICAgIFxuICAgICAgaWYgKHN0YXJzID09PSB0aGlzLnN0YXJzVmFsdWUgJiYgdGhpcy5zdGFyc1ZhbHVlID4gMCkge1xuICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItZ3JheS0zMDAnKVxuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcsICdib3JkZXIteWVsbG93LTUwMCcsICdiZy15ZWxsb3ctNTAnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnLCAnYm9yZGVyLXllbGxvdy01MDAnLCAnYmcteWVsbG93LTUwJylcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLWdyYXktMzAwJylcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cblxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wibW9kYWxcIiwgXCJjb250ZW50XCJdXG5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjb250ZW50VGFyZ2V0OiBIVE1MRWxlbWVudFxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJIb3RlbEd1YXJhbnRlZSBjb25uZWN0ZWRcIilcbiAgfVxuXG4gIG9wZW4oKTogdm9pZCB7XG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gIH1cblxuICBjbG9zZShldmVudD86IEV2ZW50KTogdm9pZCB7XG4gICAgaWYgKGV2ZW50KSB7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIH1cbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgfVxuXG4gIGNsb3NlT25CYWNrZHJvcChldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIGlmIChldmVudC50YXJnZXQgPT09IHRoaXMubW9kYWxUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2xvc2UoKVxuICAgIH1cbiAgfVxuXG4gIHN0b3BQcm9wYWdhdGlvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJkcm9wZG93blwiLCBcIm92ZXJsYXlcIl1cblxuICBkZWNsYXJlIHJlYWRvbmx5IGRyb3Bkb3duVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc092ZXJsYXlUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBvdmVybGF5VGFyZ2V0OiBIVE1MRWxlbWVudFxuXG4gIHByaXZhdGUgYWN0aXZlRHJvcGRvd246IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGxcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiRmlsdGVyRHJvcGRvd24gY29ubmVjdGVkXCIpXG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIHRoaXMuY2xvc2VBbGxEcm9wZG93bnMoKVxuICB9XG5cbiAgLy8gXHU1MjA3XHU2MzYyXHU0RTBCXHU2MkM5XHU4M0RDXHU1MzU1XG4gIHRvZ2dsZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgZHJvcGRvd25JZCA9IGJ1dHRvbi5kYXRhc2V0LmRyb3Bkb3duSWRcbiAgICBpZiAoIWRyb3Bkb3duSWQpIHJldHVyblxuXG4gICAgY29uc3QgZHJvcGRvd24gPSB0aGlzLmRyb3Bkb3duVGFyZ2V0cy5maW5kKGVsID0+IGVsLmRhdGFzZXQuZHJvcGRvd25JZCA9PT0gZHJvcGRvd25JZClcbiAgICBpZiAoIWRyb3Bkb3duKSByZXR1cm5cblxuICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NzBCOVx1NTFGQlx1NzY4NFx1NjYyRlx1NURGMlx1NjI1M1x1NUYwMFx1NzY4NFx1NEUwQlx1NjJDOVx1ODNEQ1x1NTM1NVx1RkYwQ1x1NTIxOVx1NTE3M1x1OTVFRFx1NUI4M1xuICAgIGlmICh0aGlzLmFjdGl2ZURyb3Bkb3duID09PSBkcm9wZG93bikge1xuICAgICAgdGhpcy5jbG9zZUFsbERyb3Bkb3ducygpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBcdTUxNzNcdTk1RURcdTUxNzZcdTRFRDZcdTRFMEJcdTYyQzlcdTgzRENcdTUzNTVcdUZGMENcdTYyNTNcdTVGMDBcdTVGNTNcdTUyNERcdTc2ODRcbiAgICB0aGlzLmNsb3NlQWxsRHJvcGRvd25zKClcbiAgICB0aGlzLm9wZW5Ecm9wZG93bihkcm9wZG93bilcbiAgfVxuXG4gIC8vIFx1NjI1M1x1NUYwMFx1NEUwQlx1NjJDOVx1ODNEQ1x1NTM1NVxuICBwcml2YXRlIG9wZW5Ecm9wZG93bihkcm9wZG93bjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICB0aGlzLmFjdGl2ZURyb3Bkb3duID0gZHJvcGRvd25cbiAgICBkcm9wZG93bi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIGlmICh0aGlzLmhhc092ZXJsYXlUYXJnZXQpIHtcbiAgICAgIHRoaXMub3ZlcmxheVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1NTE3M1x1OTVFRFx1NjI0MFx1NjcwOVx1NEUwQlx1NjJDOVx1ODNEQ1x1NTM1NVxuICBjbG9zZUFsbERyb3Bkb3ducygpOiB2b2lkIHtcbiAgICB0aGlzLmRyb3Bkb3duVGFyZ2V0cy5mb3JFYWNoKGRyb3Bkb3duID0+IHtcbiAgICAgIGRyb3Bkb3duLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgfSlcbiAgICBpZiAodGhpcy5oYXNPdmVybGF5VGFyZ2V0KSB7XG4gICAgICB0aGlzLm92ZXJsYXlUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICB9XG4gICAgdGhpcy5hY3RpdmVEcm9wZG93biA9IG51bGxcbiAgfVxuXG4gIC8vIFx1NzBCOVx1NTFGQlx1OTA2RVx1N0Y2OVx1NUM0Mlx1NTE3M1x1OTVFRFxuICBjbG9zZU9uT3ZlcmxheSgpOiB2b2lkIHtcbiAgICB0aGlzLmNsb3NlQWxsRHJvcGRvd25zKClcbiAgfVxuXG4gIC8vIFx1OTAwOVx1NjJFOVx1OTAwOVx1OTg3OVx1NTQwRVx1NTE3M1x1OTVFRFx1RkYwOFx1NTNFRlx1OTAwOVx1RkYwOVxuICBzZWxlY3RPcHRpb24oKTogdm9pZCB7XG4gICAgLy8gXHU1RUY2XHU4RkRGXHU1MTczXHU5NUVEXHVGRjBDXHU4QkE5XHU5NEZFXHU2M0E1XHU2NzA5XHU2NUY2XHU5NUY0XHU1QkZDXHU4MjJBXG4gICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmNsb3NlQWxsRHJvcGRvd25zKCksIDEwMClcbiAgfVxuXG4gIC8vIFx1NTIwN1x1NjM2Mlx1NTIwNlx1N0VDNFx1NzY4NFx1NUM1NVx1NUYwMC9cdTY1MzZcdThENzdcbiAgdG9nZ2xlR3JvdXAoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBncm91cEluZGV4ID0gYnV0dG9uLmRhdGFzZXQuZ3JvdXBJbmRleFxuICAgIGlmICghZ3JvdXBJbmRleCkgcmV0dXJuXG5cbiAgICBjb25zdCBncm91cEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtZ3JvdXA9XCIke2dyb3VwSW5kZXh9XCJdYCkgYXMgSFRNTEVsZW1lbnRcbiAgICBpZiAoIWdyb3VwRWxlbWVudCkgcmV0dXJuXG5cbiAgICBjb25zdCBzdmcgPSBidXR0b24ucXVlcnlTZWxlY3Rvcignc3ZnJylcbiAgICBpZiAoIXN2ZykgcmV0dXJuXG5cbiAgICBpZiAoZ3JvdXBFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHtcbiAgICAgIGdyb3VwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgc3ZnLnN0eWxlLnRyYW5zZm9ybSA9ICdyb3RhdGUoMGRlZyknXG4gICAgfSBlbHNlIHtcbiAgICAgIGdyb3VwRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgICAgc3ZnLnN0eWxlLnRyYW5zZm9ybSA9ICdyb3RhdGUoLTkwZGVnKSdcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcIm1vZGFsXCIsXG4gICAgXCJvdmVybGF5XCIsXG4gICAgXCJkZXBhcnR1cmVDaXR5XCIsXG4gICAgXCJkZXN0aW5hdGlvbkNpdHlcIixcbiAgICBcImFkdWx0c0NvdW50XCIsXG4gICAgXCJjaGlsZHJlbkNvdW50XCIsXG4gICAgXCJlbGRlcnNDb3VudFwiLFxuICAgIFwiZGF5c0NvdW50XCIsXG4gICAgXCJkZXBhcnR1cmVDaXR5SW5wdXRcIixcbiAgICBcImRlc3RpbmF0aW9uQ2l0eUlucHV0XCIsXG4gICAgXCJhZHVsdHNJbnB1dFwiLFxuICAgIFwiY2hpbGRyZW5JbnB1dFwiLFxuICAgIFwiZWxkZXJzSW5wdXRcIixcbiAgICBcImRheXNJbnB1dFwiLFxuICAgIFwiZGVwYXJ0dXJlRGF0ZURpc3BsYXlcIixcbiAgICBcImRlcGFydHVyZURhdGVJbnB1dFwiLFxuICAgIFwiZGF0ZVBpY2tlclwiLFxuICAgIFwiY3VycmVudE1vbnRoXCIsXG4gICAgXCJjYWxlbmRhckdyaWRcIixcbiAgICBcImNvbnRhY3RUaW1lRGlzcGxheVwiLFxuICAgIFwiY29udGFjdFRpbWVJbnB1dFwiLFxuICAgIFwiY29udGFjdFRpbWVQaWNrZXJcIixcbiAgICBcInBob25lSW5wdXRcIlxuICBdXG5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBvdmVybGF5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRlcGFydHVyZUNpdHlUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVzdGluYXRpb25DaXR5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGFkdWx0c0NvdW50VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNoaWxkcmVuQ291bnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZWxkZXJzQ291bnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGF5c0NvdW50VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRlcGFydHVyZUNpdHlJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRlc3RpbmF0aW9uQ2l0eUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgYWR1bHRzSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjaGlsZHJlbklucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZWxkZXJzSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkYXlzSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkZXBhcnR1cmVEYXRlRGlzcGxheVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkZXBhcnR1cmVEYXRlSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkYXRlUGlja2VyVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGN1cnJlbnRNb250aFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjYWxlbmRhckdyaWRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY29udGFjdFRpbWVEaXNwbGF5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNvbnRhY3RUaW1lSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjb250YWN0VGltZVBpY2tlclRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBwaG9uZUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG5cbiAgcHJpdmF0ZSBjdXJyZW50RGF0ZTogRGF0ZSA9IG5ldyBEYXRlKClcbiAgcHJpdmF0ZSBzZWxlY3RlZERhdGU6IERhdGUgfCBudWxsID0gbnVsbFxuICBwcml2YXRlIGlzSW5pdGlhbGl6ZWQ6IGJvb2xlYW4gPSBmYWxzZVxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJDdXN0b21UcmF2ZWxNb2RhbCBjb25uZWN0ZWRcIilcbiAgICAvLyBEb24ndCByZW5kZXIgY2FsZW5kYXIgb24gY29ubmVjdCAtIHdhaXQgdW50aWwgbW9kYWwgaXMgb3BlbmVkXG4gIH1cblxuICAvLyBcdTYyNTNcdTVGMDBcdTVGMzlcdTdBOTdcbiAgb3BlbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICAvLyBHZXQgZGVzdGluYXRpb24gZnJvbSBidXR0b24gZGF0YSBhdHRyaWJ1dGVcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgZGVzdGluYXRpb24gPSBidXR0b24uZGF0YXNldC5kZXN0aW5hdGlvblxuICAgIFxuICAgIC8vIElmIGRlc3RpbmF0aW9uIGlzIHByb3ZpZGVkLCBzZXQgaXQgYW5kIG1ha2UgaXQgcmVhZG9ubHlcbiAgICBpZiAoZGVzdGluYXRpb24pIHtcbiAgICAgIHRoaXMuZGVzdGluYXRpb25DaXR5VGFyZ2V0LnRleHRDb250ZW50ID0gZGVzdGluYXRpb25cbiAgICAgIHRoaXMuZGVzdGluYXRpb25DaXR5SW5wdXRUYXJnZXQudmFsdWUgPSBkZXN0aW5hdGlvblxuICAgIH1cbiAgICBcbiAgICAvLyBJbml0aWFsaXplIGNhbGVuZGFyIG9uIGZpcnN0IG9wZW5cbiAgICBpZiAoIXRoaXMuaXNJbml0aWFsaXplZCkge1xuICAgICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpXG4gICAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSB0cnVlXG4gICAgfVxuICAgIFxuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICB0aGlzLm92ZXJsYXlUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbidcbiAgfVxuXG4gIC8vIFx1NTE3M1x1OTVFRFx1NUYzOVx1N0E5N1xuICBjbG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgdGhpcy5vdmVybGF5VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICcnXG4gIH1cblxuICAvLyBcdTcwQjlcdTUxRkJcdTkwNkVcdTdGNjlcdTVDNDJcdTUxNzNcdTk1RURcbiAgY2xvc2VPbk92ZXJsYXkoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gdGhpcy5vdmVybGF5VGFyZ2V0KSB7XG4gICAgICB0aGlzLmNsb3NlKClcbiAgICB9XG4gIH1cblxuICAvLyBcdTU4OUVcdTUyQTBcdTYyMTBcdTRFQkFcdTY1NzBcdTkxQ0ZcbiAgaW5jcmVhc2VBZHVsdHMoKTogdm9pZCB7XG4gICAgY29uc3QgY3VycmVudCA9IHBhcnNlSW50KHRoaXMuYWR1bHRzSW5wdXRUYXJnZXQudmFsdWUpIHx8IDBcbiAgICB0aGlzLmFkdWx0c0lucHV0VGFyZ2V0LnZhbHVlID0gKGN1cnJlbnQgKyAxKS50b1N0cmluZygpXG4gICAgdGhpcy5hZHVsdHNDb3VudFRhcmdldC50ZXh0Q29udGVudCA9IChjdXJyZW50ICsgMSkudG9TdHJpbmcoKVxuICB9XG5cbiAgLy8gXHU1MUNGXHU1QzExXHU2MjEwXHU0RUJBXHU2NTcwXHU5MUNGXG4gIGRlY3JlYXNlQWR1bHRzKCk6IHZvaWQge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBwYXJzZUludCh0aGlzLmFkdWx0c0lucHV0VGFyZ2V0LnZhbHVlKSB8fCAwXG4gICAgaWYgKGN1cnJlbnQgPiAwKSB7XG4gICAgICB0aGlzLmFkdWx0c0lucHV0VGFyZ2V0LnZhbHVlID0gKGN1cnJlbnQgLSAxKS50b1N0cmluZygpXG4gICAgICB0aGlzLmFkdWx0c0NvdW50VGFyZ2V0LnRleHRDb250ZW50ID0gKGN1cnJlbnQgLSAxKS50b1N0cmluZygpXG4gICAgfVxuICB9XG5cbiAgLy8gXHU1ODlFXHU1MkEwXHU1MTNGXHU3QUU1XHU2NTcwXHU5MUNGXG4gIGluY3JlYXNlQ2hpbGRyZW4oKTogdm9pZCB7XG4gICAgY29uc3QgY3VycmVudCA9IHBhcnNlSW50KHRoaXMuY2hpbGRyZW5JbnB1dFRhcmdldC52YWx1ZSkgfHwgMFxuICAgIHRoaXMuY2hpbGRyZW5JbnB1dFRhcmdldC52YWx1ZSA9IChjdXJyZW50ICsgMSkudG9TdHJpbmcoKVxuICAgIHRoaXMuY2hpbGRyZW5Db3VudFRhcmdldC50ZXh0Q29udGVudCA9IChjdXJyZW50ICsgMSkudG9TdHJpbmcoKVxuICB9XG5cbiAgLy8gXHU1MUNGXHU1QzExXHU1MTNGXHU3QUU1XHU2NTcwXHU5MUNGXG4gIGRlY3JlYXNlQ2hpbGRyZW4oKTogdm9pZCB7XG4gICAgY29uc3QgY3VycmVudCA9IHBhcnNlSW50KHRoaXMuY2hpbGRyZW5JbnB1dFRhcmdldC52YWx1ZSkgfHwgMFxuICAgIGlmIChjdXJyZW50ID4gMCkge1xuICAgICAgdGhpcy5jaGlsZHJlbklucHV0VGFyZ2V0LnZhbHVlID0gKGN1cnJlbnQgLSAxKS50b1N0cmluZygpXG4gICAgICB0aGlzLmNoaWxkcmVuQ291bnRUYXJnZXQudGV4dENvbnRlbnQgPSAoY3VycmVudCAtIDEpLnRvU3RyaW5nKClcbiAgICB9XG4gIH1cblxuICAvLyBcdTU4OUVcdTUyQTBcdTgwMDFcdTRFQkFcdTY1NzBcdTkxQ0ZcbiAgaW5jcmVhc2VFbGRlcnMoKTogdm9pZCB7XG4gICAgY29uc3QgY3VycmVudCA9IHBhcnNlSW50KHRoaXMuZWxkZXJzSW5wdXRUYXJnZXQudmFsdWUpIHx8IDBcbiAgICB0aGlzLmVsZGVyc0lucHV0VGFyZ2V0LnZhbHVlID0gKGN1cnJlbnQgKyAxKS50b1N0cmluZygpXG4gICAgdGhpcy5lbGRlcnNDb3VudFRhcmdldC50ZXh0Q29udGVudCA9IChjdXJyZW50ICsgMSkudG9TdHJpbmcoKVxuICB9XG5cbiAgLy8gXHU1MUNGXHU1QzExXHU4MDAxXHU0RUJBXHU2NTcwXHU5MUNGXG4gIGRlY3JlYXNlRWxkZXJzKCk6IHZvaWQge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBwYXJzZUludCh0aGlzLmVsZGVyc0lucHV0VGFyZ2V0LnZhbHVlKSB8fCAwXG4gICAgaWYgKGN1cnJlbnQgPiAwKSB7XG4gICAgICB0aGlzLmVsZGVyc0lucHV0VGFyZ2V0LnZhbHVlID0gKGN1cnJlbnQgLSAxKS50b1N0cmluZygpXG4gICAgICB0aGlzLmVsZGVyc0NvdW50VGFyZ2V0LnRleHRDb250ZW50ID0gKGN1cnJlbnQgLSAxKS50b1N0cmluZygpXG4gICAgfVxuICB9XG5cbiAgLy8gXHU1ODlFXHU1MkEwXHU1OTI5XHU2NTcwXG4gIGluY3JlYXNlRGF5cygpOiB2b2lkIHtcbiAgICBjb25zdCBjdXJyZW50ID0gcGFyc2VJbnQodGhpcy5kYXlzSW5wdXRUYXJnZXQudmFsdWUpIHx8IDBcbiAgICB0aGlzLmRheXNJbnB1dFRhcmdldC52YWx1ZSA9IChjdXJyZW50ICsgMSkudG9TdHJpbmcoKVxuICAgIHRoaXMuZGF5c0NvdW50VGFyZ2V0LnRleHRDb250ZW50ID0gKGN1cnJlbnQgKyAxKS50b1N0cmluZygpXG4gIH1cblxuICAvLyBcdTUxQ0ZcdTVDMTFcdTU5MjlcdTY1NzBcbiAgZGVjcmVhc2VEYXlzKCk6IHZvaWQge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBwYXJzZUludCh0aGlzLmRheXNJbnB1dFRhcmdldC52YWx1ZSkgfHwgMFxuICAgIGlmIChjdXJyZW50ID4gMSkge1xuICAgICAgdGhpcy5kYXlzSW5wdXRUYXJnZXQudmFsdWUgPSAoY3VycmVudCAtIDEpLnRvU3RyaW5nKClcbiAgICAgIHRoaXMuZGF5c0NvdW50VGFyZ2V0LnRleHRDb250ZW50ID0gKGN1cnJlbnQgLSAxKS50b1N0cmluZygpXG4gICAgfVxuICB9XG5cbiAgLy8gXHU5MDA5XHU2MkU5XHU1MUZBXHU1M0QxXHU1N0NFXHU1RTAyXG4gIHNlbGVjdERlcGFydHVyZUNpdHkoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGNpdHkgPSB0YXJnZXQuZGF0YXNldC5jaXR5IHx8ICcnXG4gICAgdGhpcy5kZXBhcnR1cmVDaXR5VGFyZ2V0LnRleHRDb250ZW50ID0gY2l0eVxuICAgIHRoaXMuZGVwYXJ0dXJlQ2l0eUlucHV0VGFyZ2V0LnZhbHVlID0gY2l0eVxuICB9XG5cbiAgLy8gXHU5MDA5XHU2MkU5XHU3NkVFXHU3Njg0XHU1NzMwXHU1N0NFXHU1RTAyXG4gIHNlbGVjdERlc3RpbmF0aW9uQ2l0eShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgY2l0eSA9IHRhcmdldC5kYXRhc2V0LmNpdHkgfHwgJydcbiAgICB0aGlzLmRlc3RpbmF0aW9uQ2l0eVRhcmdldC50ZXh0Q29udGVudCA9IGNpdHlcbiAgICB0aGlzLmRlc3RpbmF0aW9uQ2l0eUlucHV0VGFyZ2V0LnZhbHVlID0gY2l0eVxuICB9XG5cbiAgLy8gXHU1MjA3XHU2MzYyXHU2NUU1XHU2NzFGXHU5MDA5XHU2MkU5XHU1NjY4XG4gIHRvZ2dsZURhdGVQaWNrZXIoKTogdm9pZCB7XG4gICAgdGhpcy5kYXRlUGlja2VyVGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpXG4gIH1cblxuICAvLyBcdTUyMDdcdTYzNjJcdTgwNTRcdTdDRkJcdTY1RjZcdTk1RjRcdTkwMDlcdTYyRTlcdTU2NjhcbiAgdG9nZ2xlQ29udGFjdFRpbWVQaWNrZXIoKTogdm9pZCB7XG4gICAgdGhpcy5jb250YWN0VGltZVBpY2tlclRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJ1xuICB9XG5cbiAgLy8gXHU1MTczXHU5NUVEXHU4MDU0XHU3Q0ZCXHU2NUY2XHU5NUY0XHU5MDA5XHU2MkU5XHU1NjY4XG4gIGNsb3NlQ29udGFjdFRpbWVQaWNrZXIoKTogdm9pZCB7XG4gICAgdGhpcy5jb250YWN0VGltZVBpY2tlclRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJyAvLyBLZWVwIG1haW4gbW9kYWwgc2Nyb2xsIGxvY2tlZFxuICB9XG5cbiAgLy8gXHU5MDA5XHU2MkU5XHU4MDU0XHU3Q0ZCXHU2NUY2XHU5NUY0XG4gIHNlbGVjdENvbnRhY3RUaW1lKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCB0aW1lID0gdGFyZ2V0LmRhdGFzZXQudGltZSB8fCAnJ1xuICAgIHRoaXMuY29udGFjdFRpbWVEaXNwbGF5VGFyZ2V0LnRleHRDb250ZW50ID0gdGltZVxuICAgIHRoaXMuY29udGFjdFRpbWVJbnB1dFRhcmdldC52YWx1ZSA9IHRpbWVcbiAgICB0aGlzLmNsb3NlQ29udGFjdFRpbWVQaWNrZXIoKVxuICB9XG5cbiAgLy8gXHU2RTA1XHU5NjY0XHU2MjRCXHU2NzNBXHU1M0Y3XG4gIGNsZWFyUGhvbmUoKTogdm9pZCB7XG4gICAgdGhpcy5waG9uZUlucHV0VGFyZ2V0LnZhbHVlID0gJydcbiAgICB0aGlzLnBob25lSW5wdXRUYXJnZXQuZm9jdXMoKVxuICB9XG5cbiAgLy8gXHU0RTBBXHU0RTAwXHU0RTJBXHU2NzA4XG4gIHByZXZpb3VzTW9udGgoKTogdm9pZCB7XG4gICAgdGhpcy5jdXJyZW50RGF0ZS5zZXRNb250aCh0aGlzLmN1cnJlbnREYXRlLmdldE1vbnRoKCkgLSAxKVxuICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKVxuICB9XG5cbiAgLy8gXHU0RTBCXHU0RTAwXHU0RTJBXHU2NzA4XG4gIG5leHRNb250aCgpOiB2b2lkIHtcbiAgICB0aGlzLmN1cnJlbnREYXRlLnNldE1vbnRoKHRoaXMuY3VycmVudERhdGUuZ2V0TW9udGgoKSArIDEpXG4gICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpXG4gIH1cblxuICAvLyBcdTZFMzJcdTY3RDNcdTY1RTVcdTUzODZcbiAgcHJpdmF0ZSByZW5kZXJDYWxlbmRhcigpOiB2b2lkIHtcbiAgICBjb25zdCB5ZWFyID0gdGhpcy5jdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpXG4gICAgY29uc3QgbW9udGggPSB0aGlzLmN1cnJlbnREYXRlLmdldE1vbnRoKClcbiAgICBcbiAgICAvLyBcdTY2RjRcdTY1QjBcdTY3MDhcdTRFRkRcdTY2M0VcdTc5M0FcbiAgICB0aGlzLmN1cnJlbnRNb250aFRhcmdldC50ZXh0Q29udGVudCA9IGAke3llYXJ9XHU1RTc0JHttb250aCArIDF9XHU2NzA4YFxuICAgIFxuICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NjcwOFx1N0IyQ1x1NEUwMFx1NTkyOVx1NTQ4Q1x1NjcwMFx1NTQwRVx1NEUwMFx1NTkyOVxuICAgIGNvbnN0IGZpcnN0RGF5ID0gbmV3IERhdGUoeWVhciwgbW9udGgsIDEpXG4gICAgY29uc3QgbGFzdERheSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoICsgMSwgMClcbiAgICBjb25zdCBkYXlzSW5Nb250aCA9IGxhc3REYXkuZ2V0RGF0ZSgpXG4gICAgY29uc3Qgc3RhcnREYXlPZldlZWsgPSBmaXJzdERheS5nZXREYXkoKVxuICAgIFxuICAgIC8vIFx1NkUwNVx1N0E3QVx1NjVFNVx1NTM4Nlx1N0Y1MVx1NjgzQ1xuICAgIHRoaXMuY2FsZW5kYXJHcmlkVGFyZ2V0LmlubmVySFRNTCA9ICcnXG4gICAgXG4gICAgLy8gXHU2REZCXHU1MkEwXHU3QTdBXHU3NjdEXHU1MzYwXHU0RjREXHU3QjI2XHVGRjA4XHU2NzA4XHU0RUZEXHU1RjAwXHU1OUNCXHU1MjREXHU3Njg0XHU3QTdBXHU3NjdEXHVGRjA5XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGFydERheU9mV2VlazsgaSsrKSB7XG4gICAgICBjb25zdCBlbXB0eURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICB0aGlzLmNhbGVuZGFyR3JpZFRhcmdldC5hcHBlbmRDaGlsZChlbXB0eURpdilcbiAgICB9XG4gICAgXG4gICAgLy8gXHU2REZCXHU1MkEwXHU2NUU1XHU2NzFGXHU2MzA5XHU5NEFFXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXG4gICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICBcbiAgICBmb3IgKGxldCBkYXkgPSAxOyBkYXkgPD0gZGF5c0luTW9udGg7IGRheSsrKSB7XG4gICAgICBjb25zdCBkYXRlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgICAgIGRhdGVCdXR0b24udHlwZSA9ICdidXR0b24nXG4gICAgICBkYXRlQnV0dG9uLnRleHRDb250ZW50ID0gZGF5LnRvU3RyaW5nKClcbiAgICAgIGRhdGVCdXR0b24uY2xhc3NOYW1lID0gJ3ctOCBoLTggcm91bmRlZC1mdWxsIHRleHQteHMgaG92ZXI6YmctZ3JheS0xMDAgdHJhbnNpdGlvbi1jb2xvcnMnXG4gICAgICBcbiAgICAgIGNvbnN0IGN1cnJlbnREYXRlSW5Mb29wID0gbmV3IERhdGUoeWVhciwgbW9udGgsIGRheSlcbiAgICAgIGN1cnJlbnREYXRlSW5Mb29wLnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgICBcbiAgICAgIC8vIFx1Nzk4MVx1NzUyOFx1OEZDN1x1NTNCQlx1NzY4NFx1NjVFNVx1NjcxRlxuICAgICAgaWYgKGN1cnJlbnREYXRlSW5Mb29wIDwgdG9kYXkpIHtcbiAgICAgICAgZGF0ZUJ1dHRvbi5kaXNhYmxlZCA9IHRydWVcbiAgICAgICAgZGF0ZUJ1dHRvbi5jbGFzc05hbWUgPSAndy04IGgtOCByb3VuZGVkLWZ1bGwgdGV4dC14cyB0ZXh0LWdyYXktMzAwIGN1cnNvci1ub3QtYWxsb3dlZCdcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFx1OUFEOFx1NEVBRVx1NURGMlx1OTAwOVx1NjJFOVx1NzY4NFx1NjVFNVx1NjcxRlxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZERhdGUgJiYgXG4gICAgICAgICAgICBjdXJyZW50RGF0ZUluTG9vcC5nZXRUaW1lKCkgPT09IHRoaXMuc2VsZWN0ZWREYXRlLmdldFRpbWUoKSkge1xuICAgICAgICAgIGRhdGVCdXR0b24uY2xhc3NOYW1lID0gJ3ctOCBoLTggcm91bmRlZC1mdWxsIHRleHQteHMgYmctWyNGRkQ3MDBdIHRleHQtZ3JheS04MDAgZm9udC1ib2xkJ1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBkYXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgIHRoaXMuc2VsZWN0RGF0ZShjdXJyZW50RGF0ZUluTG9vcClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGhpcy5jYWxlbmRhckdyaWRUYXJnZXQuYXBwZW5kQ2hpbGQoZGF0ZUJ1dHRvbilcbiAgICB9XG4gIH1cblxuICAvLyBcdTkwMDlcdTYyRTlcdTY1RTVcdTY3MUZcbiAgcHJpdmF0ZSBzZWxlY3REYXRlKGRhdGU6IERhdGUpOiB2b2lkIHtcbiAgICB0aGlzLnNlbGVjdGVkRGF0ZSA9IGRhdGVcbiAgICBcbiAgICAvLyBcdTY4M0NcdTVGMEZcdTUzMTZcdTY1RTVcdTY3MUZcdTY2M0VcdTc5M0FcbiAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpXG4gICAgY29uc3QgbW9udGggPSAoZGF0ZS5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpXG4gICAgY29uc3QgZGF5ID0gZGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpXG4gICAgY29uc3QgZm9ybWF0dGVkRGF0ZSA9IGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fWBcbiAgICBcbiAgICAvLyBcdTY2RjRcdTY1QjBcdTY2M0VcdTc5M0FcbiAgICB0aGlzLmRlcGFydHVyZURhdGVEaXNwbGF5VGFyZ2V0LnRleHRDb250ZW50ID0gYCR7bW9udGh9XHU2NzA4JHtkYXl9XHU2NUU1YFxuICAgIHRoaXMuZGVwYXJ0dXJlRGF0ZURpc3BsYXlUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTQwMCcpXG4gICAgdGhpcy5kZXBhcnR1cmVEYXRlRGlzcGxheVRhcmdldC5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktODAwJywgJ2ZvbnQtbWVkaXVtJylcbiAgICBcbiAgICAvLyBcdTY2RjRcdTY1QjBcdTk2OTBcdTg1Q0ZcdThGOTNcdTUxNjVcdTY4NDZcbiAgICB0aGlzLmRlcGFydHVyZURhdGVJbnB1dFRhcmdldC52YWx1ZSA9IGZvcm1hdHRlZERhdGVcbiAgICBcbiAgICAvLyBcdTUxNzNcdTk1RURcdTY1RTVcdTY3MUZcdTkwMDlcdTYyRTlcdTU2NjhcbiAgICB0aGlzLmRhdGVQaWNrZXJUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBcbiAgICAvLyBcdTkxQ0RcdTY1QjBcdTZFMzJcdTY3RDNcdTY1RTVcdTUzODZcdTRFRTVcdTlBRDhcdTRFQUVcdTkwMDlcdTRFMkRcdTc2ODRcdTY1RTVcdTY3MUZcbiAgICB0aGlzLnJlbmRlckNhbGVuZGFyKClcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wibW9kYWxcIiwgXCJvdmVybGF5XCIsIFwiY29udGFjdE1vZGFsXCIsIFwiY29udGFjdE92ZXJsYXlcIl1cblxuICBkZWNsYXJlIHJlYWRvbmx5IG1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IG92ZXJsYXlUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY29udGFjdE1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNvbnRhY3RPdmVybGF5VGFyZ2V0OiBIVE1MRWxlbWVudFxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJDb21tdW5pY2F0aW9uVGltZWxpbmUgY29ubmVjdGVkXCIpXG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiQ29tbXVuaWNhdGlvblRpbWVsaW5lIGRpc2Nvbm5lY3RlZFwiKVxuICB9XG5cbiAgb3BlbigpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgdGhpcy5vdmVybGF5VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nXG4gIH1cblxuICBjbG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgdGhpcy5vdmVybGF5VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICcnXG4gIH1cblxuICBvcGVuQ29udGFjdE1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMuY29udGFjdE1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgdGhpcy5jb250YWN0T3ZlcmxheVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJ1xuICB9XG5cbiAgY2xvc2VDb250YWN0TW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5jb250YWN0TW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICB0aGlzLmNvbnRhY3RPdmVybGF5VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICcnXG4gIH1cblxuICBzdG9wUHJvcGFnYXRpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyIHtcbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkFicm9hZFRpY2tldFR5cGUgY29udHJvbGxlciBjb25uZWN0ZWRcIilcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyIHtcbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkxhbmRtYXJrRmlsdGVyIGNvbnRyb2xsZXIgY29ubmVjdGVkXCIpXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmludGVyZmFjZSBDYWxlbmRhckRheSB7XG4gIGRhdGU6IERhdGVcbiAgZGF5T2ZNb250aDogbnVtYmVyXG4gIGlzQ3VycmVudE1vbnRoOiBib29sZWFuXG4gIGlzVG9kYXk6IGJvb2xlYW5cbiAgaXNTZWxlY3RlZDogYm9vbGVhblxuICBpc0Rpc2FibGVkOiBib29sZWFuXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcIm1vZGFsXCIsIFwidGl0bGVUZXh0XCIsIFwiZGF0ZVNlY3Rpb25cIiwgXCJ0aW1lU2VjdGlvblwiLFxuICAgIFwiY2FsZW5kYXJcIiwgXCJtb250aExhYmVsXCIsIFwidGltZUdyaWRcIiwgXCJzZWxlY3RlZERhdGVEaXNwbGF5XCIsXG4gICAgXCJjb25maXJtQnV0dG9uXCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgcGlja2VyVHlwZTogU3RyaW5nLCAvLyAncGlja3VwJyBvciAncmV0dXJuJ1xuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0aXRsZVRleHRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGF0ZVNlY3Rpb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdGltZVNlY3Rpb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY2FsZW5kYXJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbW9udGhMYWJlbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0aW1lR3JpZFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzZWxlY3RlZERhdGVEaXNwbGF5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNvbmZpcm1CdXR0b25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcGlja2VyVHlwZVZhbHVlOiBzdHJpbmdcblxuICBwcml2YXRlIGN1cnJlbnRNb250aDogRGF0ZSA9IG5ldyBEYXRlKClcbiAgcHJpdmF0ZSBzZWxlY3RlZERhdGU6IERhdGUgfCBudWxsID0gbnVsbFxuICBwcml2YXRlIHNlbGVjdGVkVGltZTogc3RyaW5nID0gJzEwOjAwJ1xuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJDYXJEYXRldGltZVBpY2tlciBjb25uZWN0ZWRcIilcbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJDYXJEYXRldGltZVBpY2tlciBkaXNjb25uZWN0ZWRcIilcbiAgfVxuXG4gIG9wZW5Nb2RhbChwaWNrZXJUeXBlOiBzdHJpbmcgPSAncGlja3VwJyk6IHZvaWQge1xuICAgIHRoaXMucGlja2VyVHlwZVZhbHVlID0gcGlja2VyVHlwZVxuICAgIHRoaXMudGl0bGVUZXh0VGFyZ2V0LnRleHRDb250ZW50ID0gcGlja2VyVHlwZSA9PT0gJ3BpY2t1cCcgPyAnXHU5MDA5XHU2MkU5XHU1M0Q2XHU4RjY2XHU2NUY2XHU5NUY0JyA6ICdcdTkwMDlcdTYyRTlcdThGRDhcdThGNjZcdTY1RjZcdTk1RjQnXG4gICAgXG4gICAgLy8gUmVzZXQgdG8gY3VycmVudCBtb250aFxuICAgIHRoaXMuY3VycmVudE1vbnRoID0gbmV3IERhdGUoKVxuICAgIHRoaXMuc2VsZWN0ZWREYXRlID0gbnVsbFxuICAgIHRoaXMuc2VsZWN0ZWRUaW1lID0gJzEwOjAwJ1xuICAgIFxuICAgIC8vIFNob3cgZGF0ZSBzZWN0aW9uLCBoaWRlIHRpbWUgc2VjdGlvblxuICAgIHRoaXMuZGF0ZVNlY3Rpb25UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICB0aGlzLnRpbWVTZWN0aW9uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgXG4gICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpXG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJ1xuICB9XG5cbiAgY2xvc2VNb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICcnXG4gIH1cblxuICBjYW5jZWwoKTogdm9pZCB7XG4gICAgdGhpcy5jbG9zZU1vZGFsKClcbiAgfVxuXG4gIHByZXZpb3VzTW9udGgoKTogdm9pZCB7XG4gICAgdGhpcy5jdXJyZW50TW9udGggPSBuZXcgRGF0ZSh0aGlzLmN1cnJlbnRNb250aC5nZXRGdWxsWWVhcigpLCB0aGlzLmN1cnJlbnRNb250aC5nZXRNb250aCgpIC0gMSwgMSlcbiAgICB0aGlzLnJlbmRlckNhbGVuZGFyKClcbiAgfVxuXG4gIG5leHRNb250aCgpOiB2b2lkIHtcbiAgICB0aGlzLmN1cnJlbnRNb250aCA9IG5ldyBEYXRlKHRoaXMuY3VycmVudE1vbnRoLmdldEZ1bGxZZWFyKCksIHRoaXMuY3VycmVudE1vbnRoLmdldE1vbnRoKCkgKyAxLCAxKVxuICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKVxuICB9XG5cbiAgc2VsZWN0RGF0ZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50XG4gICAgY29uc3QgZGF0ZVN0ciA9IGJ1dHRvbi5kYXRhc2V0LmRhdGVcbiAgICBpZiAoIWRhdGVTdHIpIHJldHVyblxuXG4gICAgdGhpcy5zZWxlY3RlZERhdGUgPSB0aGlzLnBhcnNlTG9jYWxEYXRlKGRhdGVTdHIpXG4gICAgXG4gICAgLy8gU3dpdGNoIHRvIHRpbWUgc2VsZWN0aW9uXG4gICAgdGhpcy5kYXRlU2VjdGlvblRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIHRoaXMudGltZVNlY3Rpb25UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICBcbiAgICAvLyBVcGRhdGUgc2VsZWN0ZWQgZGF0ZSBkaXNwbGF5XG4gICAgdGhpcy5zZWxlY3RlZERhdGVEaXNwbGF5VGFyZ2V0LnRleHRDb250ZW50ID0gdGhpcy5mb3JtYXREYXRlRGlzcGxheSh0aGlzLnNlbGVjdGVkRGF0ZSlcbiAgICBcbiAgICAvLyBDbGVhciBwcmV2aW91cyB0aW1lIHNlbGVjdGlvblxuICAgIHRoaXMudGltZUdyaWRUYXJnZXQucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uJykuZm9yRWFjaChidG4gPT4ge1xuICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLWJsdWUtNTAwJywgJ3RleHQtd2hpdGUnLCAnYm9yZGVyLWJsdWUtNTAwJylcbiAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdib3JkZXItZ3JheS0zMDAnKVxuICAgIH0pXG4gIH1cblxuICBzZWxlY3RUaW1lKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBjb25zdCB0aW1lID0gYnV0dG9uLmRhdGFzZXQudGltZVxuICAgIGlmICghdGltZSkgcmV0dXJuXG5cbiAgICB0aGlzLnNlbGVjdGVkVGltZSA9IHRpbWVcblxuICAgIC8vIFVwZGF0ZSBVSSB0byBzaG93IHNlbGVjdGVkIHN0YXRlXG4gICAgdGhpcy50aW1lR3JpZFRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKS5mb3JFYWNoKGJ0biA9PiB7XG4gICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYmctYmx1ZS01MDAnLCAndGV4dC13aGl0ZScsICdib3JkZXItYmx1ZS01MDAnKVxuICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1ncmF5LTMwMCcpXG4gICAgfSlcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYmctYmx1ZS01MDAnLCAndGV4dC13aGl0ZScsICdib3JkZXItYmx1ZS01MDAnKVxuICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItZ3JheS0zMDAnKVxuICB9XG5cbiAgY29uZmlybSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuc2VsZWN0ZWREYXRlKSB7XG4gICAgICBhbGVydCgnXHU4QkY3XHU1MTQ4XHU5MDA5XHU2MkU5XHU2NUU1XHU2NzFGJylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIENvbWJpbmUgZGF0ZSBhbmQgdGltZVxuICAgIGNvbnN0IFtob3VycywgbWludXRlc10gPSB0aGlzLnNlbGVjdGVkVGltZS5zcGxpdCgnOicpLm1hcChOdW1iZXIpXG4gICAgY29uc3QgZGF0ZVRpbWUgPSBuZXcgRGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZSlcbiAgICBkYXRlVGltZS5zZXRIb3Vycyhob3VycywgbWludXRlcywgMCwgMClcblxuICAgIC8vIERpc3BhdGNoIGV2ZW50IHRvIGNhci1yZW50YWwtdGFicyBjb250cm9sbGVyXG4gICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2Nhci1kYXRldGltZS1waWNrZXI6ZGF0ZXRpbWUtc2VsZWN0ZWQnLCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgcGlja2VyVHlwZTogdGhpcy5waWNrZXJUeXBlVmFsdWUsXG4gICAgICAgIGRhdGVUaW1lOiBkYXRlVGltZSxcbiAgICAgICAgZGF0ZVRpbWVTdHJpbmc6IGRhdGVUaW1lLnRvSVNPU3RyaW5nKClcbiAgICAgIH0sXG4gICAgICBidWJibGVzOiB0cnVlXG4gICAgfSlcbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KVxuXG4gICAgdGhpcy5jbG9zZU1vZGFsKClcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyQ2FsZW5kYXIoKTogdm9pZCB7XG4gICAgY29uc3QgeWVhciA9IHRoaXMuY3VycmVudE1vbnRoLmdldEZ1bGxZZWFyKClcbiAgICBjb25zdCBtb250aCA9IHRoaXMuY3VycmVudE1vbnRoLmdldE1vbnRoKClcbiAgICBcbiAgICAvLyBVcGRhdGUgbW9udGggbGFiZWxcbiAgICB0aGlzLm1vbnRoTGFiZWxUYXJnZXQudGV4dENvbnRlbnQgPSBgJHt5ZWFyfVx1NUU3NCR7bW9udGggKyAxfVx1NjcwOGBcbiAgICBcbiAgICBjb25zdCBmaXJzdERheSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAxKVxuICAgIGNvbnN0IGxhc3REYXkgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCArIDEsIDApXG4gICAgY29uc3QgZGF5c0luTW9udGggPSBsYXN0RGF5LmdldERhdGUoKVxuICAgIGNvbnN0IHN0YXJ0aW5nRGF5T2ZXZWVrID0gZmlyc3REYXkuZ2V0RGF5KClcbiAgICBcbiAgICBjb25zdCBkYXlzOiBDYWxlbmRhckRheVtdID0gW11cbiAgICBcbiAgICAvLyBQcmV2aW91cyBtb250aCBkYXlzXG4gICAgY29uc3QgcHJldk1vbnRoTGFzdERheSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAwKS5nZXREYXRlKClcbiAgICBmb3IgKGxldCBpID0gc3RhcnRpbmdEYXlPZldlZWsgLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgY29uc3QgZGF5ID0gcHJldk1vbnRoTGFzdERheSAtIGlcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCAtIDEsIGRheSlcbiAgICAgIGRheXMucHVzaCh7XG4gICAgICAgIGRhdGUsXG4gICAgICAgIGRheU9mTW9udGg6IGRheSxcbiAgICAgICAgaXNDdXJyZW50TW9udGg6IGZhbHNlLFxuICAgICAgICBpc1RvZGF5OiBmYWxzZSxcbiAgICAgICAgaXNTZWxlY3RlZDogZmFsc2UsXG4gICAgICAgIGlzRGlzYWJsZWQ6IHRydWVcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIEN1cnJlbnQgbW9udGggZGF5c1xuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxuICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgXG4gICAgZm9yIChsZXQgZGF5ID0gMTsgZGF5IDw9IGRheXNJbk1vbnRoOyBkYXkrKykge1xuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCBkYXkpXG4gICAgICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgICBjb25zdCBpc1RvZGF5ID0gZGF0ZS5nZXRUaW1lKCkgPT09IHRvZGF5LmdldFRpbWUoKVxuICAgICAgY29uc3QgaXNTZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWREYXRlICYmIFxuICAgICAgICBkYXRlLmdldEZ1bGxZZWFyKCkgPT09IHRoaXMuc2VsZWN0ZWREYXRlLmdldEZ1bGxZZWFyKCkgJiZcbiAgICAgICAgZGF0ZS5nZXRNb250aCgpID09PSB0aGlzLnNlbGVjdGVkRGF0ZS5nZXRNb250aCgpICYmXG4gICAgICAgIGRhdGUuZ2V0RGF0ZSgpID09PSB0aGlzLnNlbGVjdGVkRGF0ZS5nZXREYXRlKClcbiAgICAgIGNvbnN0IGlzRGlzYWJsZWQgPSBkYXRlIDwgdG9kYXlcbiAgICAgIFxuICAgICAgZGF5cy5wdXNoKHtcbiAgICAgICAgZGF0ZSxcbiAgICAgICAgZGF5T2ZNb250aDogZGF5LFxuICAgICAgICBpc0N1cnJlbnRNb250aDogdHJ1ZSxcbiAgICAgICAgaXNUb2RheSxcbiAgICAgICAgaXNTZWxlY3RlZDogaXNTZWxlY3RlZCB8fCBmYWxzZSxcbiAgICAgICAgaXNEaXNhYmxlZFxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gTmV4dCBtb250aCBkYXlzXG4gICAgY29uc3QgcmVtYWluaW5nRGF5cyA9IDQyIC0gZGF5cy5sZW5ndGhcbiAgICBmb3IgKGxldCBkYXkgPSAxOyBkYXkgPD0gcmVtYWluaW5nRGF5czsgZGF5KyspIHtcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCArIDEsIGRheSlcbiAgICAgIGRheXMucHVzaCh7XG4gICAgICAgIGRhdGUsXG4gICAgICAgIGRheU9mTW9udGg6IGRheSxcbiAgICAgICAgaXNDdXJyZW50TW9udGg6IGZhbHNlLFxuICAgICAgICBpc1RvZGF5OiBmYWxzZSxcbiAgICAgICAgaXNTZWxlY3RlZDogZmFsc2UsXG4gICAgICAgIGlzRGlzYWJsZWQ6IHRydWVcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIFJlbmRlciBjYWxlbmRhciBncmlkXG4gICAgbGV0IGh0bWwgPSAnPGRpdiBjbGFzcz1cImdyaWQgZ3JpZC1jb2xzLTcgZ2FwLTFcIj4nXG4gICAgXG4gICAgZGF5cy5mb3JFYWNoKChkYXkpID0+IHtcbiAgICAgIGNvbnN0IGRhdGVTdHIgPSB0aGlzLmZvcm1hdERhdGUoZGF5LmRhdGUpXG4gICAgICBjb25zdCBjbGFzc2VzID0gW1xuICAgICAgICAncHktMycsXG4gICAgICAgICd0ZXh0LWNlbnRlcicsXG4gICAgICAgICdyb3VuZGVkLWxnJyxcbiAgICAgICAgJ3RyYW5zaXRpb24tY29sb3JzJ1xuICAgICAgXVxuICAgICAgXG4gICAgICBpZiAoIWRheS5pc0N1cnJlbnRNb250aCB8fCBkYXkuaXNEaXNhYmxlZCkge1xuICAgICAgICBjbGFzc2VzLnB1c2goJ3RleHQtZ3JheS0zMDAnLCAnY3Vyc29yLW5vdC1hbGxvd2VkJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNsYXNzZXMucHVzaCgnaG92ZXI6YmctYmx1ZS01MCcsICdjdXJzb3ItcG9pbnRlcicpXG4gICAgICAgIFxuICAgICAgICBpZiAoZGF5LmlzVG9kYXkpIHtcbiAgICAgICAgICBjbGFzc2VzLnB1c2goJ2ZvbnQtYm9sZCcsICd0ZXh0LWJsdWUtNjAwJylcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGRheS5pc1NlbGVjdGVkKSB7XG4gICAgICAgICAgY2xhc3Nlcy5wdXNoKCdiZy1ibHVlLTUwMCcsICd0ZXh0LXdoaXRlJywgJ2ZvbnQtYm9sZCcpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgZGlzYWJsZWQgPSAhZGF5LmlzQ3VycmVudE1vbnRoIHx8IGRheS5pc0Rpc2FibGVkXG4gICAgICBcbiAgICAgIGh0bWwgKz0gYFxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgZGF0YS1hY3Rpb249XCJjbGljay0+Y2FyLWRhdGV0aW1lLXBpY2tlciNzZWxlY3REYXRlXCJcbiAgICAgICAgICBkYXRhLWRhdGU9XCIke2RhdGVTdHJ9XCJcbiAgICAgICAgICBjbGFzcz1cIiR7Y2xhc3Nlcy5qb2luKCcgJyl9XCJcbiAgICAgICAgICAke2Rpc2FibGVkID8gJ2Rpc2FibGVkJyA6ICcnfT5cbiAgICAgICAgICAke2RheS5kYXlPZk1vbnRofVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIGBcbiAgICB9KVxuICAgIFxuICAgIGh0bWwgKz0gJzwvZGl2PidcbiAgICBcbiAgICB0aGlzLmNhbGVuZGFyVGFyZ2V0LmlubmVySFRNTCA9IGh0bWxcbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VMb2NhbERhdGUoZGF0ZVN0cjogc3RyaW5nKTogRGF0ZSB7XG4gICAgY29uc3QgcGFydHMgPSBkYXRlU3RyLnNwbGl0KCctJylcbiAgICBpZiAocGFydHMubGVuZ3RoID09PSAzKSB7XG4gICAgICBjb25zdCB5ZWFyID0gcGFyc2VJbnQocGFydHNbMF0sIDEwKVxuICAgICAgY29uc3QgbW9udGggPSBwYXJzZUludChwYXJ0c1sxXSwgMTApIC0gMVxuICAgICAgY29uc3QgZGF5ID0gcGFyc2VJbnQocGFydHNbMl0sIDEwKVxuICAgICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIG1vbnRoLCBkYXkpXG4gICAgfVxuICAgIHJldHVybiBuZXcgRGF0ZSgpXG4gIH1cblxuICBwcml2YXRlIGZvcm1hdERhdGUoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKVxuICAgIGNvbnN0IG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJylcbiAgICBjb25zdCBkYXkgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJylcbiAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YFxuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXREYXRlRGlzcGxheShkYXRlOiBEYXRlKTogc3RyaW5nIHtcbiAgICBjb25zdCB3ZWVrZGF5cyA9IFsnXHU1NDY4XHU2NUU1JywgJ1x1NTQ2OFx1NEUwMCcsICdcdTU0NjhcdTRFOEMnLCAnXHU1NDY4XHU0RTA5JywgJ1x1NTQ2OFx1NTZEQicsICdcdTU0NjhcdTRFOTQnLCAnXHU1NDY4XHU1MTZEJ11cbiAgICBjb25zdCBtb250aCA9IGRhdGUuZ2V0TW9udGgoKSArIDFcbiAgICBjb25zdCBkYXkgPSBkYXRlLmdldERhdGUoKVxuICAgIGNvbnN0IHdlZWtkYXkgPSB3ZWVrZGF5c1tkYXRlLmdldERheSgpXVxuICAgIHJldHVybiBgJHttb250aH1cdTY3MDgke2RheX1cdTY1RTUgJHt3ZWVrZGF5fWBcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyIHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJmb3JtXCJdXG4gIFxuICBkZWNsYXJlIHJlYWRvbmx5IGZvcm1UYXJnZXQ6IEhUTUxGb3JtRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0Zvcm1UYXJnZXQ6IGJvb2xlYW5cblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiQ2FyIG9yZGVyIGNvbnRyb2xsZXIgY29ubmVjdGVkXCIpXG4gIH1cblxuICBhc3luYyBjcmVhdGVPcmRlcihldmVudDogRXZlbnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIFxuICAgIC8vIFZhbGlkYXRlIGZvcm0gZGF0YVxuICAgIGlmICghdGhpcy5oYXNGb3JtVGFyZ2V0KSB7XG4gICAgICBhbGVydCgnXHU4ODY4XHU1MzU1XHU2NzJBXHU2MjdFXHU1MjMwJylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIEdldCBmb3JtIGRhdGFcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSh0aGlzLmZvcm1UYXJnZXQpXG4gICAgXG4gICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzXG4gICAgY29uc3QgZHJpdmVyTmFtZSA9IGZvcm1EYXRhLmdldCgnY2FyX29yZGVyW2RyaXZlcl9uYW1lXScpXG4gICAgY29uc3QgZHJpdmVySWROdW1iZXIgPSBmb3JtRGF0YS5nZXQoJ2Nhcl9vcmRlcltkcml2ZXJfaWRfbnVtYmVyXScpXG4gICAgY29uc3QgY29udGFjdFBob25lID0gZm9ybURhdGEuZ2V0KCdjYXJfb3JkZXJbY29udGFjdF9waG9uZV0nKVxuICAgIFxuICAgIGlmICghZHJpdmVyTmFtZSB8fCAhZHJpdmVySWROdW1iZXIgfHwgIWNvbnRhY3RQaG9uZSkge1xuICAgICAgYWxlcnQoJ1x1OEJGN1x1OTAwOVx1NjJFOVx1OUE3RVx1OUE3Nlx1NEVCQVx1NUU3Nlx1NTg2Qlx1NTE5OVx1NUI4Q1x1NjU3NFx1NEZFMVx1NjA2RicpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBQcmVwYXJlIG9yZGVyIGRhdGFcbiAgICBjb25zdCBvcmRlckRhdGEgPSB7XG4gICAgICBjYXJfb3JkZXI6IHtcbiAgICAgICAgY2FyX2lkOiBmb3JtRGF0YS5nZXQoJ2Nhcl9vcmRlcltjYXJfaWRdJyksXG4gICAgICAgIGRyaXZlcl9uYW1lOiBkcml2ZXJOYW1lLFxuICAgICAgICBkcml2ZXJfaWRfbnVtYmVyOiBkcml2ZXJJZE51bWJlcixcbiAgICAgICAgY29udGFjdF9waG9uZTogY29udGFjdFBob25lLFxuICAgICAgICBwaWNrdXBfZGF0ZXRpbWU6IGZvcm1EYXRhLmdldCgnY2FyX29yZGVyW3BpY2t1cF9kYXRldGltZV0nKSxcbiAgICAgICAgcmV0dXJuX2RhdGV0aW1lOiBmb3JtRGF0YS5nZXQoJ2Nhcl9vcmRlcltyZXR1cm5fZGF0ZXRpbWVdJyksXG4gICAgICAgIHBpY2t1cF9sb2NhdGlvbjogZm9ybURhdGEuZ2V0KCdjYXJfb3JkZXJbcGlja3VwX2xvY2F0aW9uXScpLFxuICAgICAgICB0b3RhbF9wcmljZTogZm9ybURhdGEuZ2V0KCdjYXJfb3JkZXJbdG90YWxfcHJpY2VdJylcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gRGlzYWJsZSBidXR0b24gZHVyaW5nIHN1Ym1pc3Npb25cbiAgICBidXR0b24uZGlzYWJsZWQgPSB0cnVlXG4gICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gYnV0dG9uLmlubmVySFRNTFxuICAgIGJ1dHRvbi5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9XCJmb250LWJvbGQgdGV4dC1sZ1wiPlx1NTIxQlx1NUVGQVx1NEUyRC4uLjwvc3Bhbj4nXG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIENyZWF0ZSBvcmRlciB2aWEgQUpBWFxuICAgICAgY29uc3QgY3NyZlRva2VuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MTWV0YUVsZW1lbnQ+KCdtZXRhW25hbWU9XCJjc3JmLXRva2VuXCJdJyk/LmNvbnRlbnQgfHwgJydcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9jYXJfb3JkZXJzJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ1gtQ1NSRi1Ub2tlbic6IGNzcmZUb2tlbixcbiAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG9yZGVyRGF0YSlcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLm9rICYmIGRhdGEuc3VjY2Vzcykge1xuICAgICAgICAvLyBPcmRlciBjcmVhdGVkIHN1Y2Nlc3NmdWxseSwgdHJpZ2dlciBwYXltZW50IG1vZGFsXG4gICAgICAgIHRoaXMudHJpZ2dlclBheW1lbnRNb2RhbChcbiAgICAgICAgICBvcmRlckRhdGEuY2FyX29yZGVyLnRvdGFsX3ByaWNlIGFzIHN0cmluZywgXG4gICAgICAgICAgZGF0YS5wYXlfdXJsLCBcbiAgICAgICAgICBkYXRhLnN1Y2Nlc3NfdXJsXG4gICAgICAgIClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLmVycm9ycz8uam9pbignLCAnKSB8fCAnXHU1MjFCXHU1RUZBXHU4QkEyXHU1MzU1XHU1OTMxXHU4RDI1JylcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgb3JkZXI6JywgZXJyb3IpXG4gICAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnXHU1MjFCXHU1RUZBXHU4QkEyXHU1MzU1XHU1OTMxXHU4RDI1XHVGRjBDXHU4QkY3XHU5MUNEXHU4QkQ1J1xuICAgICAgaWYgKHR5cGVvZiAod2luZG93IGFzIGFueSkuc2hvd1RvYXN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICh3aW5kb3cgYXMgYW55KS5zaG93VG9hc3QobWVzc2FnZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KG1lc3NhZ2UpXG4gICAgICB9XG4gICAgICBidXR0b24uZGlzYWJsZWQgPSBmYWxzZVxuICAgICAgYnV0dG9uLmlubmVySFRNTCA9IG9yaWdpbmFsVGV4dFxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdHJpZ2dlclBheW1lbnRNb2RhbChhbW91bnQ6IHN0cmluZywgcGF5bWVudFVybDogc3RyaW5nLCBzdWNjZXNzVXJsOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyBGaW5kIHBheW1lbnQtY29uZmlybWF0aW9uIGNvbnRyb2xsZXIgYW5kIHRyaWdnZXIgaXRcbiAgICBjb25zdCBwYXltZW50RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNvbnRyb2xsZXIqPVwicGF5bWVudC1jb25maXJtYXRpb25cIl0nKSBhcyBIVE1MRWxlbWVudFxuICAgIFxuICAgIGlmICghcGF5bWVudEVsZW1lbnQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1BheW1lbnQgY29uZmlybWF0aW9uIGNvbnRyb2xsZXIgbm90IGZvdW5kJylcbiAgICAgIGFsZXJ0KCdcdTY1MkZcdTRFRDhcdTdDRkJcdTdFREZcdTY3MkFcdTUyQTBcdThGN0RcdUZGMENcdThCRjdcdTUyMzdcdTY1QjBcdTk4NzVcdTk3NjJcdTkxQ0RcdThCRDUnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIEdldCB0aGUgU3RpbXVsdXMgY29udHJvbGxlciBpbnN0YW5jZVxuICAgIGNvbnN0IGFwcCA9ICh3aW5kb3cgYXMgYW55KS5TdGltdWx1c1xuICAgIGlmICghYXBwKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdGltdWx1cyBub3QgZm91bmQnKVxuICAgICAgYWxlcnQoJ1x1N0NGQlx1N0VERlx1OTUxOVx1OEJFRlx1RkYwQ1x1OEJGN1x1NTIzN1x1NjVCMFx1OTg3NVx1OTc2Mlx1OTFDRFx1OEJENScpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgY29uc3QgcGF5bWVudENvbnRyb2xsZXIgPSBhcHAuZ2V0Q29udHJvbGxlckZvckVsZW1lbnRBbmRJZGVudGlmaWVyKHBheW1lbnRFbGVtZW50LCAncGF5bWVudC1jb25maXJtYXRpb24nKVxuICAgIFxuICAgIGlmIChwYXltZW50Q29udHJvbGxlcikge1xuICAgICAgLy8gU2V0IHZhbHVlc1xuICAgICAgcGF5bWVudENvbnRyb2xsZXIuYW1vdW50VmFsdWUgPSBhbW91bnRcbiAgICAgIC8vIEdldCBjdXJyZW50IHVzZXIgZW1haWwgZnJvbSBtZXRhIHRhZyBvciBlbGVtZW50XG4gICAgICBjb25zdCB1c2VyRW1haWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxNZXRhRWxlbWVudD4oJ21ldGFbbmFtZT1cInVzZXItZW1haWxcIl0nKT8uY29udGVudCB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtdXNlci1lbWFpbF0nKT8uZ2V0QXR0cmlidXRlKCdkYXRhLXVzZXItZW1haWwnKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAnZGVtb0BleGFtcGxlLmNvbSdcbiAgICAgIHBheW1lbnRDb250cm9sbGVyLnVzZXJFbWFpbFZhbHVlID0gdXNlckVtYWlsXG4gICAgICBwYXltZW50Q29udHJvbGxlci5wYXltZW50VXJsVmFsdWUgPSBwYXltZW50VXJsXG4gICAgICBwYXltZW50Q29udHJvbGxlci5zdWNjZXNzVXJsVmFsdWUgPSBzdWNjZXNzVXJsXG4gICAgICBcbiAgICAgIC8vIFNob3cgcGFzc3dvcmQgbW9kYWxcbiAgICAgIHBheW1lbnRDb250cm9sbGVyLnNob3dQYXNzd29yZE1vZGFsKClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcignUGF5bWVudCBjb250cm9sbGVyIG5vdCBpbml0aWFsaXplZCcpXG4gICAgICBhbGVydCgnXHU2NTJGXHU0RUQ4XHU3Q0ZCXHU3RURGXHU2NzJBXHU1MjFEXHU1OUNCXHU1MzE2XHVGRjBDXHU4QkY3XHU1MjM3XHU2NUIwXHU5ODc1XHU5NzYyXHU5MUNEXHU4QkQ1JylcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBBcHBsaWNhdGlvbiB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5pbXBvcnQgVGhlbWVDb250cm9sbGVyIGZyb20gXCIuL3RoZW1lX2NvbnRyb2xsZXJcIlxuaW1wb3J0IERyb3Bkb3duQ29udHJvbGxlciBmcm9tIFwiLi9kcm9wZG93bl9jb250cm9sbGVyXCJcbmltcG9ydCBTZGtJbnRlZ3JhdGlvbkNvbnRyb2xsZXIgZnJvbSBcIi4vc2RrX2ludGVncmF0aW9uX2NvbnRyb2xsZXJcIlxuaW1wb3J0IENsaXBib2FyZENvbnRyb2xsZXIgZnJvbSBcIi4vY2xpcGJvYXJkX2NvbnRyb2xsZXJcIlxuaW1wb3J0IENpdHlTZWxlY3RvckNvbnRyb2xsZXIgZnJvbSBcIi4vY2l0eV9zZWxlY3Rvcl9jb250cm9sbGVyXCJcbmltcG9ydCBGbGlnaHRTZWFyY2hDb250cm9sbGVyIGZyb20gXCIuL2ZsaWdodF9zZWFyY2hfY29udHJvbGxlclwiXG5pbXBvcnQgRmxpZ2h0SGlzdG9yeUNvbnRyb2xsZXIgZnJvbSBcIi4vZmxpZ2h0X2hpc3RvcnlfY29udHJvbGxlclwiXG5pbXBvcnQgRGF0ZVBpY2tlckNvbnRyb2xsZXIgZnJvbSBcIi4vZGF0ZV9waWNrZXJfY29udHJvbGxlclwiXG5pbXBvcnQgQm9va2luZ0NvbnRyb2xsZXIgZnJvbSBcIi4vYm9va2luZ19jb250cm9sbGVyXCJcbmltcG9ydCBDb3Vwb25Db250cm9sbGVyIGZyb20gXCIuL2NvdXBvbl9jb250cm9sbGVyXCJcbi8vIENvbWluZ1Nvb25Db250cm9sbGVyIHJlbW92ZWQgLSB1c2luZyB3aW5kb3cuc2hvd1RvYXN0KCkgaW5zdGVhZFxuaW1wb3J0IERlc3RpbmF0aW9uQ29udHJvbGxlciBmcm9tIFwiLi9kZXN0aW5hdGlvbl9jb250cm9sbGVyXCJcbmltcG9ydCBSZWdpb25TZWxlY3RvckNvbnRyb2xsZXIgZnJvbSBcIi4vcmVnaW9uX3NlbGVjdG9yX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEhvdGVsU2VhcmNoQ29udHJvbGxlciBmcm9tIFwiLi9ob3RlbF9zZWFyY2hfY29udHJvbGxlclwiXG5pbXBvcnQgSG90ZWxEZXRhaWxDb250cm9sbGVyIGZyb20gXCIuL2hvdGVsX2RldGFpbF9jb250cm9sbGVyXCJcbmltcG9ydCBTZXJ2aWNlR3JpZENvbnRyb2xsZXIgZnJvbSBcIi4vc2VydmljZV9ncmlkX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFBhc3NlbmdlclNlbGVjdG9yQ29udHJvbGxlciBmcm9tIFwiLi9wYXNzZW5nZXJfc2VsZWN0b3JfY29udHJvbGxlclwiXG5pbXBvcnQgQ2FiaW5TZWxlY3RvckNvbnRyb2xsZXIgZnJvbSBcIi4vY2FiaW5fc2VsZWN0b3JfY29udHJvbGxlclwiXG5pbXBvcnQgVHJpcFR5cGVDb250cm9sbGVyIGZyb20gXCIuL3RyaXBfdHlwZV9jb250cm9sbGVyXCJcbmltcG9ydCBSZXR1cm5EYXRlUGlja2VyQ29udHJvbGxlciBmcm9tIFwiLi9yZXR1cm5fZGF0ZV9waWNrZXJfY29udHJvbGxlclwiXG5pbXBvcnQgUm91bmRUcmlwU2VsZWN0b3JDb250cm9sbGVyIGZyb20gXCIuL3JvdW5kX3RyaXBfc2VsZWN0b3JfY29udHJvbGxlclwiXG5pbXBvcnQgVHJhaW5TZWFyY2hDb250cm9sbGVyIGZyb20gXCIuL3RyYWluX3NlYXJjaF9jb250cm9sbGVyXCJcbmltcG9ydCBUcmFpbkxpc3RDb250cm9sbGVyIGZyb20gXCIuL3RyYWluX2xpc3RfY29udHJvbGxlclwiXG5pbXBvcnQgVHJhaW5DaXR5U2VsZWN0b3JDb250cm9sbGVyIGZyb20gXCIuL3RyYWluX2NpdHlfc2VsZWN0b3JfY29udHJvbGxlclwiXG5pbXBvcnQgSW5maW5pdGVTY3JvbGxDb250cm9sbGVyIGZyb20gXCIuL2luZmluaXRlX3Njcm9sbF9jb250cm9sbGVyXCJcbmltcG9ydCBEZWVwVHJhdmVsQ29udHJvbGxlciBmcm9tIFwiLi9kZWVwX3RyYXZlbF9jb250cm9sbGVyXCJcbmltcG9ydCBNdWx0aUNpdHlDb250cm9sbGVyIGZyb20gXCIuL211bHRpX2NpdHlfY29udHJvbGxlclwiXG5pbXBvcnQgRmxpZ2h0RmlsdGVyQ29udHJvbGxlciBmcm9tIFwiLi9mbGlnaHRfZmlsdGVyX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEZsaWdodFNvcnRDb250cm9sbGVyIGZyb20gXCIuL2ZsaWdodF9zb3J0X2NvbnRyb2xsZXJcIlxuaW1wb3J0IEZsaWdodEluZm9EaXNwbGF5Q29udHJvbGxlciBmcm9tIFwiLi9mbGlnaHRfaW5mb19kaXNwbGF5X2NvbnRyb2xsZXJcIlxuaW1wb3J0IERhdGVMaW5rQ29udHJvbGxlciBmcm9tIFwiLi9kYXRlX2xpbmtfY29udHJvbGxlclwiXG5pbXBvcnQgSG90ZWxHdWVzdFNlbGVjdG9yQ29udHJvbGxlciBmcm9tIFwiLi9ob3RlbF9ndWVzdF9zZWxlY3Rvcl9jb250cm9sbGVyXCJcbmltcG9ydCBIb3RlbERhdGVQaWNrZXJDb250cm9sbGVyIGZyb20gXCIuL2hvdGVsX2RhdGVfcGlja2VyX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFBheW1lbnRNb2RhbENvbnRyb2xsZXIgZnJvbSBcIi4vcGF5bWVudF9tb2RhbF9jb250cm9sbGVyXCJcbmltcG9ydCBQYXltZW50Q29uZmlybWF0aW9uQ29udHJvbGxlciBmcm9tIFwiLi9wYXltZW50X2NvbmZpcm1hdGlvbl9jb250cm9sbGVyXCJcbmltcG9ydCBIb3RlbFRhYnNDb250cm9sbGVyIGZyb20gXCIuL2hvdGVsX3RhYnNfY29udHJvbGxlclwiXG5pbXBvcnQgSG90ZWxUcmF2ZWxlclNlbGVjdG9yQ29udHJvbGxlciBmcm9tIFwiLi9ob3RlbF90cmF2ZWxlcl9zZWxlY3Rvcl9jb250cm9sbGVyXCJcbmltcG9ydCBUb2FzdENvbnRyb2xsZXIgZnJvbSBcIi4vdG9hc3RfY29udHJvbGxlclwiXG5pbXBvcnQgVG9hc3RUcmlnZ2VyQ29udHJvbGxlciBmcm9tIFwiLi90b2FzdF90cmlnZ2VyX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEhvdGVsQm9va2luZ0NvbnRyb2xsZXIgZnJvbSBcIi4vaG90ZWxfYm9va2luZ19jb250cm9sbGVyXCJcbmltcG9ydCBUb3VyRGV0YWlsQ29udHJvbGxlciBmcm9tIFwiLi90b3VyX2RldGFpbF9jb250cm9sbGVyXCJcbmltcG9ydCBDYXJvdXNlbENvbnRyb2xsZXIgZnJvbSBcIi4vY2Fyb3VzZWxfY29udHJvbGxlclwiXG5pbXBvcnQgU2Nyb2xsU3B5Q29udHJvbGxlciBmcm9tIFwiLi9zY3JvbGxfc3B5X2NvbnRyb2xsZXJcIlxuaW1wb3J0IFBhY2thZ2VTd2l0Y2hlckNvbnRyb2xsZXIgZnJvbSBcIi4vcGFja2FnZV9zd2l0Y2hlcl9jb250cm9sbGVyXCJcbmltcG9ydCBCb29raW5nTW9kYWxDb250cm9sbGVyIGZyb20gXCIuL2Jvb2tpbmdfbW9kYWxfY29udHJvbGxlclwiXG5pbXBvcnQgQm90dG9tQmFyQ29udHJvbGxlciBmcm9tIFwiLi9ib3R0b21fYmFyX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEluc3VyYW5jZVNlbGVjdG9yQ29udHJvbGxlciBmcm9tIFwiLi9pbnN1cmFuY2Vfc2VsZWN0b3JfY29udHJvbGxlclwiXG5pbXBvcnQgVG91clRyYXZlbGVyU2VsZWN0b3JDb250cm9sbGVyIGZyb20gXCIuL3RvdXJfdHJhdmVsZXJfc2VsZWN0b3JfY29udHJvbGxlclwiXG5pbXBvcnQgU3BlY2lhbEZsaWdodHNGb3JtQ29udHJvbGxlciBmcm9tIFwiLi9zcGVjaWFsX2ZsaWdodHNfZm9ybV9jb250cm9sbGVyXCJcbmltcG9ydCBUcmFpbkJvb2tpbmdDb250cm9sbGVyIGZyb20gXCIuL3RyYWluX2Jvb2tpbmdfY29udHJvbGxlclwiXG5pbXBvcnQgVHJhaW5Cb29raW5nTG9ja0NvbnRyb2xsZXIgZnJvbSBcIi4vdHJhaW5fYm9va2luZ19sb2NrX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFRyYWluU2VhdFNlbGVjdG9yQ29udHJvbGxlciBmcm9tIFwiLi90cmFpbl9zZWF0X3NlbGVjdG9yX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFRvdXJHcm91cEZpbHRlckNvbnRyb2xsZXIgZnJvbSBcIi4vdG91cl9ncm91cF9maWx0ZXJfY29udHJvbGxlclwiXG5pbXBvcnQgQ2FyUmVudGFsVGFic0NvbnRyb2xsZXIgZnJvbSBcIi4vY2FyX3JlbnRhbF90YWJzX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEhvdGVsUGFja2FnZVNlYXJjaENvbnRyb2xsZXIgZnJvbSBcIi4vaG90ZWxfcGFja2FnZV9zZWFyY2hfY29udHJvbGxlclwiXG5pbXBvcnQgSG90ZWxQYWNrYWdlT3JkZXJDb250cm9sbGVyIGZyb20gXCIuL2hvdGVsX3BhY2thZ2Vfb3JkZXJfY29udHJvbGxlclwiXG5pbXBvcnQgUHdhSW5zdGFsbENvbnRyb2xsZXIgZnJvbSBcIi4vcHdhX2luc3RhbGxfY29udHJvbGxlclwiXG5pbXBvcnQgQnVzRGF0ZVBpY2tlckNvbnRyb2xsZXIgZnJvbSBcIi4vYnVzX2RhdGVfcGlja2VyX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEJ1c1RpY2tldFNlYXJjaENvbnRyb2xsZXIgZnJvbSBcIi4vYnVzX3RpY2tldF9zZWFyY2hfY29udHJvbGxlclwiXG5pbXBvcnQgQnVzVGlja2V0T3JkZXJDb250cm9sbGVyIGZyb20gXCIuL2J1c190aWNrZXRfb3JkZXJfY29udHJvbGxlclwiXG5pbXBvcnQgRGVlcEJvb2tpbmdDb250cm9sbGVyIGZyb20gXCIuL2RlZXBfYm9va2luZ19jb250cm9sbGVyXCJcbmltcG9ydCBWaXNhT3JkZXJDb250cm9sbGVyIGZyb20gXCIuL3Zpc2Ffb3JkZXJfY29udHJvbGxlclwiXG5pbXBvcnQgQWJyb2FkUmVnaW9uU2VsZWN0b3JDb250cm9sbGVyIGZyb20gXCIuL2Ficm9hZF9yZWdpb25fc2VsZWN0b3JfY29udHJvbGxlclwiXG5pbXBvcnQgQWJyb2FkRGF0ZVBpY2tlckNvbnRyb2xsZXIgZnJvbSBcIi4vYWJyb2FkX2RhdGVfcGlja2VyX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEFicm9hZFBhc3NlbmdlclNlbGVjdG9yQ29udHJvbGxlciBmcm9tIFwiLi9hYnJvYWRfcGFzc2VuZ2VyX3NlbGVjdG9yX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEFicm9hZE9yZGVyRm9ybUNvbnRyb2xsZXIgZnJvbSBcIi4vYWJyb2FkX29yZGVyX2Zvcm1fY29udHJvbGxlclwiXG5pbXBvcnQgQWJyb2FkVGlja2V0U2VhcmNoQ29udHJvbGxlciBmcm9tIFwiLi9hYnJvYWRfdGlja2V0X3NlYXJjaF9jb250cm9sbGVyXCJcbmltcG9ydCBIb21lc3RheVNlYXJjaENvbnRyb2xsZXIgZnJvbSBcIi4vaG9tZXN0YXlfc2VhcmNoX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEludGVybmV0U2VydmljZXNDb250cm9sbGVyIGZyb20gXCIuL2ludGVybmV0X3NlcnZpY2VzX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFNpbUNhcmRGaWx0ZXJDb250cm9sbGVyIGZyb20gXCIuL3NpbV9jYXJkX2ZpbHRlcl9jb250cm9sbGVyXCJcbmltcG9ydCBEYXRhUGxhbkNvbnRyb2xsZXIgZnJvbSBcIi4vZGF0YV9wbGFuX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFdpZmlCb29raW5nQ29udHJvbGxlciBmcm9tIFwiLi93aWZpX2Jvb2tpbmdfY29udHJvbGxlclwiXG5pbXBvcnQgSW50ZXJuZXRPcmRlckZvcm1Db250cm9sbGVyIGZyb20gXCIuL2ludGVybmV0X29yZGVyX2Zvcm1fY29udHJvbGxlclwiXG5pbXBvcnQgUHJvZHVjdENhcmRDb250cm9sbGVyIGZyb20gXCIuL3Byb2R1Y3RfY2FyZF9jb250cm9sbGVyXCJcbmltcG9ydCBTaW1DYXJkQm9va2luZ0NvbnRyb2xsZXIgZnJvbSBcIi4vc2ltX2NhcmRfYm9va2luZ19jb250cm9sbGVyXCJcbmltcG9ydCBRcmNvZGVNb2RhbENvbnRyb2xsZXIgZnJvbSBcIi4vcXJjb2RlX21vZGFsX2NvbnRyb2xsZXJcIlxuaW1wb3J0IExvY2F0aW9uU2VsZWN0b3JDb250cm9sbGVyIGZyb20gXCIuL2xvY2F0aW9uX3NlbGVjdG9yX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFRyYW5zZmVyU2VhcmNoQ29udHJvbGxlciBmcm9tIFwiLi90cmFuc2Zlcl9zZWFyY2hfY29udHJvbGxlclwiXG5pbXBvcnQgQWRkcmVzc1NlbGVjdG9yQ29udHJvbGxlciBmcm9tIFwiLi9hZGRyZXNzX3NlbGVjdG9yX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFNlYXJjaENvbnRyb2xsZXIgZnJvbSBcIi4vc2VhcmNoX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEhvdGVsRmlsdGVyUGVyc2lzdGVuY2VDb250cm9sbGVyIGZyb20gXCIuL2hvdGVsX2ZpbHRlcl9wZXJzaXN0ZW5jZV9jb250cm9sbGVyXCJcbmltcG9ydCBIb3RlbFNlcnZpY2VzU2VhcmNoQ29udHJvbGxlciBmcm9tIFwiLi9ob3RlbF9zZXJ2aWNlc19zZWFyY2hfY29udHJvbGxlclwiXG5pbXBvcnQgTGl2ZVJvb21Db250cm9sbGVyIGZyb20gXCIuL2xpdmVfcm9vbV9jb250cm9sbGVyXCJcbmltcG9ydCBTcGVjaWFsSG90ZWxTZWFyY2hDb250cm9sbGVyIGZyb20gXCIuL3NwZWNpYWxfaG90ZWxfc2VhcmNoX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFNwZWNpYWxIb3RlbEZpbHRlckNvbnRyb2xsZXIgZnJvbSBcIi4vc3BlY2lhbF9ob3RlbF9maWx0ZXJfY29udHJvbGxlclwiXG5pbXBvcnQgSG90ZWxTZWFyY2hGaWx0ZXJDb250cm9sbGVyIGZyb20gXCIuL2hvdGVsX3NlYXJjaF9maWx0ZXJfY29udHJvbGxlclwiXG5pbXBvcnQgQmxpbmRCb3hDb250cm9sbGVyIGZyb20gXCIuL2JsaW5kX2JveF9jb250cm9sbGVyXCJcbmltcG9ydCBIb3RlbE1hcFRvZ2dsZUNvbnRyb2xsZXIgZnJvbSBcIi4vaG90ZWxfbWFwX3RvZ2dsZV9jb250cm9sbGVyXCJcbmltcG9ydCBIb3RlbE1hcENvbnRyb2xsZXIgZnJvbSBcIi4vaG90ZWxfbWFwX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFNtYXJ0QmFja0NvbnRyb2xsZXIgZnJvbSBcIi4vc21hcnRfYmFja19jb250cm9sbGVyXCJcbmltcG9ydCBUb3VyR3JvdXBUYWJzQ29udHJvbGxlciBmcm9tIFwiLi90b3VyX2dyb3VwX3RhYnNfY29udHJvbGxlclwiXG5pbXBvcnQgSG90ZWxQcmljZUZpbHRlckNvbnRyb2xsZXIgZnJvbSBcIi4vaG90ZWxfcHJpY2VfZmlsdGVyX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEhvdGVsR3VhcmFudGVlQ29udHJvbGxlciBmcm9tIFwiLi9ob3RlbF9ndWFyYW50ZWVfY29udHJvbGxlclwiXG5pbXBvcnQgRmlsdGVyRHJvcGRvd25Db250cm9sbGVyIGZyb20gXCIuL2ZpbHRlcl9kcm9wZG93bl9jb250cm9sbGVyXCJcbmltcG9ydCBDdXN0b21UcmF2ZWxNb2RhbENvbnRyb2xsZXIgZnJvbSBcIi4vY3VzdG9tX3RyYXZlbF9tb2RhbF9jb250cm9sbGVyXCJcbmltcG9ydCBDb21tdW5pY2F0aW9uVGltZWxpbmVDb250cm9sbGVyIGZyb20gXCIuL2NvbW11bmljYXRpb25fdGltZWxpbmVfY29udHJvbGxlclwiXG5pbXBvcnQgQWJyb2FkVGlja2V0VHlwZUNvbnRyb2xsZXIgZnJvbSBcIi4vYWJyb2FkX3RpY2tldF90eXBlX2NvbnRyb2xsZXJcIlxuaW1wb3J0IExhbmRtYXJrRmlsdGVyQ29udHJvbGxlciBmcm9tIFwiLi9sYW5kbWFya19maWx0ZXJfY29udHJvbGxlclwiXG5pbXBvcnQgQ2FyRGF0ZXRpbWVQaWNrZXJDb250cm9sbGVyIGZyb20gXCIuL2Nhcl9kYXRldGltZV9waWNrZXJfY29udHJvbGxlclwiXG5pbXBvcnQgQ2FyT3JkZXJDb250cm9sbGVyIGZyb20gXCIuL2Nhcl9vcmRlcl9jb250cm9sbGVyXCJcblxuY29uc3QgYXBwbGljYXRpb24gPSBBcHBsaWNhdGlvbi5zdGFydCgpXG5cbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwidGhlbWVcIiwgVGhlbWVDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJkcm9wZG93blwiLCBEcm9wZG93bkNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInNkay1pbnRlZ3JhdGlvblwiLCBTZGtJbnRlZ3JhdGlvbkNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImNsaXBib2FyZFwiLCBDbGlwYm9hcmRDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJjaXR5LXNlbGVjdG9yXCIsIENpdHlTZWxlY3RvckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImZsaWdodC1zZWFyY2hcIiwgRmxpZ2h0U2VhcmNoQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiZmxpZ2h0LWhpc3RvcnlcIiwgRmxpZ2h0SGlzdG9yeUNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImRhdGUtcGlja2VyXCIsIERhdGVQaWNrZXJDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJib29raW5nXCIsIEJvb2tpbmdDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJjb3Vwb25cIiwgQ291cG9uQ29udHJvbGxlcilcbi8vIENvbWluZ1Nvb25Db250cm9sbGVyIHJlbW92ZWQgLSB1c2luZyB3aW5kb3cuc2hvd1RvYXN0KCkgaW5zdGVhZFxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJkZXN0aW5hdGlvblwiLCBEZXN0aW5hdGlvbkNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInJlZ2lvbi1zZWxlY3RvclwiLCBSZWdpb25TZWxlY3RvckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImhvdGVsLXNlYXJjaFwiLCBIb3RlbFNlYXJjaENvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImhvdGVsLWRldGFpbFwiLCBIb3RlbERldGFpbENvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInNlcnZpY2UtZ3JpZFwiLCBTZXJ2aWNlR3JpZENvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInBhc3Nlbmdlci1zZWxlY3RvclwiLCBQYXNzZW5nZXJTZWxlY3RvckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImNhYmluLXNlbGVjdG9yXCIsIENhYmluU2VsZWN0b3JDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJ0cmlwLXR5cGVcIiwgVHJpcFR5cGVDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJyZXR1cm4tZGF0ZS1waWNrZXJcIiwgUmV0dXJuRGF0ZVBpY2tlckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInJvdW5kLXRyaXAtc2VsZWN0b3JcIiwgUm91bmRUcmlwU2VsZWN0b3JDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJ0cmFpbi1zZWFyY2hcIiwgVHJhaW5TZWFyY2hDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJ0cmFpbi1saXN0XCIsIFRyYWluTGlzdENvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInRyYWluLWNpdHktc2VsZWN0b3JcIiwgVHJhaW5DaXR5U2VsZWN0b3JDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJpbmZpbml0ZS1zY3JvbGxcIiwgSW5maW5pdGVTY3JvbGxDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJkZWVwLXRyYXZlbFwiLCBEZWVwVHJhdmVsQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwibXVsdGktY2l0eVwiLCBNdWx0aUNpdHlDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJmbGlnaHQtZmlsdGVyXCIsIEZsaWdodEZpbHRlckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImZsaWdodC1zb3J0XCIsIEZsaWdodFNvcnRDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJmbGlnaHQtaW5mby1kaXNwbGF5XCIsIEZsaWdodEluZm9EaXNwbGF5Q29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiZGF0ZS1saW5rXCIsIERhdGVMaW5rQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiaG90ZWwtZ3Vlc3Qtc2VsZWN0b3JcIiwgSG90ZWxHdWVzdFNlbGVjdG9yQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiaG90ZWwtZGF0ZS1waWNrZXJcIiwgSG90ZWxEYXRlUGlja2VyQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwicGF5bWVudC1tb2RhbFwiLCBQYXltZW50TW9kYWxDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJwYXltZW50LWNvbmZpcm1hdGlvblwiLCBQYXltZW50Q29uZmlybWF0aW9uQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiaG90ZWwtdGFic1wiLCBIb3RlbFRhYnNDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJob3RlbC10cmF2ZWxlci1zZWxlY3RvclwiLCBIb3RlbFRyYXZlbGVyU2VsZWN0b3JDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJ0b2FzdFwiLCBUb2FzdENvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInRvYXN0LXRyaWdnZXJcIiwgVG9hc3RUcmlnZ2VyQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiaG90ZWwtYm9va2luZ1wiLCBIb3RlbEJvb2tpbmdDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJ0b3VyLWRldGFpbFwiLCBUb3VyRGV0YWlsQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiY2Fyb3VzZWxcIiwgQ2Fyb3VzZWxDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJzY3JvbGwtc3B5XCIsIFNjcm9sbFNweUNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInBhY2thZ2Utc3dpdGNoZXJcIiwgUGFja2FnZVN3aXRjaGVyQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiYm9va2luZy1tb2RhbFwiLCBCb29raW5nTW9kYWxDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJib3R0b20tYmFyXCIsIEJvdHRvbUJhckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImluc3VyYW5jZS1zZWxlY3RvclwiLCBJbnN1cmFuY2VTZWxlY3RvckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInRvdXItdHJhdmVsZXItc2VsZWN0b3JcIiwgVG91clRyYXZlbGVyU2VsZWN0b3JDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJzcGVjaWFsLWZsaWdodHMtZm9ybVwiLCBTcGVjaWFsRmxpZ2h0c0Zvcm1Db250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJ0cmFpbi1ib29raW5nXCIsIFRyYWluQm9va2luZ0NvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInRyYWluLWJvb2tpbmctbG9ja1wiLCBUcmFpbkJvb2tpbmdMb2NrQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwidHJhaW4tc2VhdC1zZWxlY3RvclwiLCBUcmFpblNlYXRTZWxlY3RvckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInRvdXItZ3JvdXAtZmlsdGVyXCIsIFRvdXJHcm91cEZpbHRlckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImNhci1yZW50YWwtdGFic1wiLCBDYXJSZW50YWxUYWJzQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiaG90ZWwtcGFja2FnZS1zZWFyY2hcIiwgSG90ZWxQYWNrYWdlU2VhcmNoQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiaG90ZWwtcGFja2FnZS1vcmRlclwiLCBIb3RlbFBhY2thZ2VPcmRlckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInB3YS1pbnN0YWxsXCIsIFB3YUluc3RhbGxDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJidXMtZGF0ZS1waWNrZXJcIiwgQnVzRGF0ZVBpY2tlckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImJ1cy10aWNrZXQtc2VhcmNoXCIsIEJ1c1RpY2tldFNlYXJjaENvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImJ1cy10aWNrZXQtb3JkZXJcIiwgQnVzVGlja2V0T3JkZXJDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJkZWVwLWJvb2tpbmdcIiwgRGVlcEJvb2tpbmdDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJ2aXNhLW9yZGVyXCIsIFZpc2FPcmRlckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImFicm9hZC1yZWdpb24tc2VsZWN0b3JcIiwgQWJyb2FkUmVnaW9uU2VsZWN0b3JDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJhYnJvYWQtZGF0ZS1waWNrZXJcIiwgQWJyb2FkRGF0ZVBpY2tlckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImFicm9hZC1wYXNzZW5nZXItc2VsZWN0b3JcIiwgQWJyb2FkUGFzc2VuZ2VyU2VsZWN0b3JDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJhYnJvYWQtb3JkZXItZm9ybVwiLCBBYnJvYWRPcmRlckZvcm1Db250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJhYnJvYWQtdGlja2V0LXNlYXJjaFwiLCBBYnJvYWRUaWNrZXRTZWFyY2hDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJob21lc3RheS1zZWFyY2hcIiwgSG9tZXN0YXlTZWFyY2hDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJpbnRlcm5ldC1zZXJ2aWNlc1wiLCBJbnRlcm5ldFNlcnZpY2VzQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwic2ltLWNhcmQtZmlsdGVyXCIsIFNpbUNhcmRGaWx0ZXJDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJkYXRhLXBsYW5cIiwgRGF0YVBsYW5Db250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJ3aWZpLWJvb2tpbmdcIiwgV2lmaUJvb2tpbmdDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJpbnRlcm5ldC1vcmRlci1mb3JtXCIsIEludGVybmV0T3JkZXJGb3JtQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwicHJvZHVjdC1jYXJkXCIsIFByb2R1Y3RDYXJkQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwic2ltLWNhcmQtYm9va2luZ1wiLCBTaW1DYXJkQm9va2luZ0NvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInFyY29kZS1tb2RhbFwiLCBRcmNvZGVNb2RhbENvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImxvY2F0aW9uLXNlbGVjdG9yXCIsIExvY2F0aW9uU2VsZWN0b3JDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJ0cmFuc2Zlci1zZWFyY2hcIiwgVHJhbnNmZXJTZWFyY2hDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJhZGRyZXNzLXNlbGVjdG9yXCIsIEFkZHJlc3NTZWxlY3RvckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInNlYXJjaFwiLCBTZWFyY2hDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJob3RlbC1maWx0ZXItcGVyc2lzdGVuY2VcIiwgSG90ZWxGaWx0ZXJQZXJzaXN0ZW5jZUNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImhvdGVsLXNlcnZpY2VzLXNlYXJjaFwiLCBIb3RlbFNlcnZpY2VzU2VhcmNoQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwibGl2ZS1yb29tXCIsIExpdmVSb29tQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwic3BlY2lhbC1ob3RlbC1zZWFyY2hcIiwgU3BlY2lhbEhvdGVsU2VhcmNoQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwic3BlY2lhbC1ob3RlbC1maWx0ZXJcIiwgU3BlY2lhbEhvdGVsRmlsdGVyQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiaG90ZWwtc2VhcmNoLWZpbHRlclwiLCBIb3RlbFNlYXJjaEZpbHRlckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImJsaW5kLWJveFwiLCBCbGluZEJveENvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImhvdGVsLW1hcC10b2dnbGVcIiwgSG90ZWxNYXBUb2dnbGVDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJob3RlbC1tYXBcIiwgSG90ZWxNYXBDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJzbWFydC1iYWNrXCIsIFNtYXJ0QmFja0NvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInRvdXItZ3JvdXAtdGFic1wiLCBUb3VyR3JvdXBUYWJzQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiaG90ZWwtcHJpY2UtZmlsdGVyXCIsIEhvdGVsUHJpY2VGaWx0ZXJDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJob3RlbC1ndWFyYW50ZWVcIiwgSG90ZWxHdWFyYW50ZWVDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJmaWx0ZXItZHJvcGRvd25cIiwgRmlsdGVyRHJvcGRvd25Db250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJjdXN0b20tdHJhdmVsLW1vZGFsXCIsIEN1c3RvbVRyYXZlbE1vZGFsQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiY29tbXVuaWNhdGlvbi10aW1lbGluZVwiLCBDb21tdW5pY2F0aW9uVGltZWxpbmVDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJhYnJvYWQtdGlja2V0LXR5cGVcIiwgQWJyb2FkVGlja2V0VHlwZUNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImxhbmRtYXJrLWZpbHRlclwiLCBMYW5kbWFya0ZpbHRlckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImNhci1kYXRldGltZS1waWNrZXJcIiwgQ2FyRGF0ZXRpbWVQaWNrZXJDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJjYXItb3JkZXJcIiwgQ2FyT3JkZXJDb250cm9sbGVyKVxuXG53aW5kb3cuU3RpbXVsdXMgPSBhcHBsaWNhdGlvblxuIiwgIi8vIFNpbXBsZSBDbGlwYm9hcmQgVXRpbGl0eVxuLy8gQ29weSB0byBjbGlwYm9hcmQgd2l0aCBmYWxsYmFjayBzdXBwb3J0IGZvciBpZnJhbWUgYW5kIG9sZGVyIGJyb3dzZXJzXG5cbmZ1bmN0aW9uIGNvcHlUb0NsaXBib2FyZCh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlPGJvb2xlYW4+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAvLyBUcnkgbW9kZXJuIENsaXBib2FyZCBBUEkgZmlyc3RcbiAgICBpZiAobmF2aWdhdG9yLmNsaXBib2FyZCAmJiB3aW5kb3cuaXNTZWN1cmVDb250ZXh0KSB7XG4gICAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh0ZXh0KVxuICAgICAgICAudGhlbigoKSA9PiByZXNvbHZlKHRydWUpKVxuICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgIGlmIChmYWxsYmFja0NvcHkodGV4dCkpIHtcbiAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0NvcHkgZmFpbGVkJykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChmYWxsYmFja0NvcHkodGV4dCkpIHtcbiAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0NvcHkgZmFpbGVkJykpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGZhbGxiYWNrQ29weSh0ZXh0OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgY29uc3QgdGV4dEFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICB0ZXh0QXJlYS52YWx1ZSA9IHRleHQ7XG4gIHRleHRBcmVhLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcbiAgdGV4dEFyZWEuc3R5bGUub3BhY2l0eSA9ICcwJztcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZXh0QXJlYSk7XG4gIHRleHRBcmVhLnNlbGVjdCgpO1xuXG4gIHRyeSB7XG4gICAgY29uc3Qgc3VjY2VzcyA9IGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjb3B5Jyk7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0ZXh0QXJlYSk7XG4gICAgcmV0dXJuIHN1Y2Nlc3M7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0ZXh0QXJlYSk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8vIEV4cG9ydCBnbG9iYWxseVxud2luZG93LmNvcHlUb0NsaXBib2FyZCA9IGNvcHlUb0NsaXBib2FyZDtcbiIsICIvLyBTREsgVXRpbGl0eSBmb3IgY2hhdGJveCBpbnRlZ3JhdGlvblxuLy8gSGFuZGxlcyBjaGF0Ym94IFNESyBkZXRlY3Rpb24gYW5kIG1lc3NhZ2Ugc2VuZGluZ1xuXG5jbGFzcyBTREtVdGlscyB7XG4gIHByaXZhdGUgaXNBdmFpbGFibGU6IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5pc0F2YWlsYWJsZSA9IHRoaXMuY2hlY2tTREtBdmFpbGFiaWxpdHkoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBTREsgaXMgYXZhaWxhYmxlIGluIGN1cnJlbnQgY29udGV4dFxuICAgKi9cbiAgY2hlY2tTREtBdmFpbGFiaWxpdHkoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHR5cGVvZiB3aW5kb3cuc2RrICE9PSAndW5kZWZpbmVkJyAmJiBcbiAgICAgICAgICAgd2luZG93LnNkayAmJiBcbiAgICAgICAgICAgdHlwZW9mIHdpbmRvdy5zZGsuc2VuZCA9PT0gJ2Z1bmN0aW9uJztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kIG1lc3NhZ2UgdG8gY2hhdGJveCBpZiBTREsgaXMgYXZhaWxhYmxlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIC0gTWVzc2FnZSB0byBzZW5kXG4gICAqIEByZXR1cm5zIHtib29sZWFufSAtIFdoZXRoZXIgbWVzc2FnZSB3YXMgc2VudCBzdWNjZXNzZnVsbHlcbiAgICovXG4gIHNlbmRNZXNzYWdlKG1lc3NhZ2U6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLmlzQXZhaWxhYmxlKSB7XG4gICAgICB0cnkge1xuICAgICAgICB3aW5kb3cuc2RrIS5zZW5kKG1lc3NhZ2UpO1xuICAgICAgICBjb25zb2xlLmxvZygnTWVzc2FnZSBzZW50IHRvIGNoYXRib3g6JywgbWVzc2FnZSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNlbmQgbWVzc2FnZSB0byBTREs6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCdTREsgbm90IGF2YWlsYWJsZS4gV291bGQgc2VuZCBtZXNzYWdlOicsIG1lc3NhZ2UpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kIGVycm9yIGRldGFpbHMgdG8gY2hhdGJveCBmb3IgZml4aW5nXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBlcnJvckluZm8gLSBFcnJvciBpbmZvcm1hdGlvbiBvYmplY3RcbiAgICovXG4gIHNlbmRFcnJvckZvckZpeChlcnJvckluZm86IGFueSA9IHt9KTogYm9vbGVhbiB7XG4gICAgY29uc3Qge1xuICAgICAgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWYsXG4gICAgICBwYXRoID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnN1YnN0cmluZygxKSxcbiAgICAgIGVycm9yTWVzc2FnZSA9ICdVbmtub3duIGVycm9yJyxcbiAgICAgIGFkZGl0aW9uYWxDb250ZXh0ID0gJydcbiAgICB9ID0gZXJyb3JJbmZvO1xuXG4gICAgY29uc3QgbWVzc2FnZSA9IGBGaXggdGhpcyBlcnJvcjpcblVSTDogJHt1cmx9XG5FcnJvcjogJHtlcnJvck1lc3NhZ2V9XG5QYXRoOiAke3BhdGh9JHthZGRpdGlvbmFsQ29udGV4dCA/IGBcXG5cXG5BZGRpdGlvbmFsIENvbnRleHQ6XFxuJHsgIGFkZGl0aW9uYWxDb250ZXh0fWAgOiAnJ31cblxuUGxlYXNlIGhlbHAgbWUgZml4IHRoaXMgaXNzdWUuYDtcblxuICAgIHJldHVybiB0aGlzLnNlbmRNZXNzYWdlKG1lc3NhZ2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZnJlc2ggU0RLIGF2YWlsYWJpbGl0eSBzdGF0dXNcbiAgICovXG4gIHJlZnJlc2goKTogYm9vbGVhbiB7XG4gICAgdGhpcy5pc0F2YWlsYWJsZSA9IHRoaXMuY2hlY2tTREtBdmFpbGFiaWxpdHkoKTtcbiAgICByZXR1cm4gdGhpcy5pc0F2YWlsYWJsZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCBTREsgc3RhdHVzXG4gICAqL1xuICBnZXRTdGF0dXMoKTogeyBpc0F2YWlsYWJsZTogYm9vbGVhbjsgaGFzU0RLOiBib29sZWFuOyBoYXNTZW5kTWV0aG9kOiBib29sZWFuIH0ge1xuICAgIHJldHVybiB7XG4gICAgICBpc0F2YWlsYWJsZTogdGhpcy5pc0F2YWlsYWJsZSxcbiAgICAgIGhhc1NESzogdHlwZW9mIHdpbmRvdy5zZGsgIT09ICd1bmRlZmluZWQnLFxuICAgICAgaGFzU2VuZE1ldGhvZDogdHlwZW9mIHdpbmRvdy5zZGs/LnNlbmQgPT09ICdmdW5jdGlvbidcbiAgICB9O1xuICB9XG59XG5cbi8vIENyZWF0ZSBzaW5nbGV0b24gaW5zdGFuY2VcbmNvbnN0IHNka1V0aWxzID0gbmV3IFNES1V0aWxzKCk7XG5cbi8vIEdsb2JhbCBmdW5jdGlvbiBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxud2luZG93LnNlbmRUb1NESyA9IChtZXNzYWdlKSA9PiBzZGtVdGlscy5zZW5kTWVzc2FnZShtZXNzYWdlKTtcbndpbmRvdy5zZW5kRXJyb3JUb1NESyA9IChlcnJvckluZm8pID0+IHNka1V0aWxzLnNlbmRFcnJvckZvckZpeChlcnJvckluZm8pO1xud2luZG93LmlzU0RLQXZhaWxhYmxlID0gKCkgPT4gc2RrVXRpbHMuZ2V0U3RhdHVzKCkuaXNBdmFpbGFibGU7XG5cbi8vIEV4cG9ydCBnbG9iYWxseVxud2luZG93LnNka1V0aWxzID0gc2RrVXRpbHM7XG5cbmV4cG9ydCBkZWZhdWx0IHNka1V0aWxzO1xuIiwgIi8vIFN0aW11bHVzIENvbnRyb2xsZXIgVmFsaWRhdG9yXG4vLyBDaGVja3MgZm9yIG1pc3Npbmcgc3RpbXVsdXMgY29udHJvbGxlcnMgcmVmZXJlbmNlZCBpbiB2aWV3c1xuXG5jbGFzcyBTdGltdWx1c1ZhbGlkYXRvciB7XG4gIHByaXZhdGUgcmVnaXN0ZXJlZENvbnRyb2xsZXJzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcbiAgcHJpdmF0ZSBtaXNzaW5nQ29udHJvbGxlcnM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuICBwcml2YXRlIGhhc1JlcG9ydGVkOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgZWxlbWVudElzc3VlczogTWFwPHN0cmluZywgc3RyaW5nW10+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIHN0aW11bHVzID0gd2luZG93LlN0aW11bHVzO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuaW5pdFZhbGlkYXRvcigpO1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0VmFsaWRhdG9yKCk6IHZvaWQge1xuICAgIC8vIE9ubHkgcnVuIGluIGRldmVsb3BtZW50IGVudmlyb25tZW50XG4gICAgLy9cbiAgICBpZiAoIXRoaXMuaXNEZXZlbG9wbWVudCgpKSB7XG4gICAgICBjb25zb2xlLmxvZygnU3RpbXVsdXNWYWxpZGF0b3Igbm90IGVuYWJsZSBpbiBub24tZGV2ZWxvcCBlbnZpcm9ubWVudC4nKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKCF3aW5kb3cuU3RpbXVsdXMpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdTdGltdWx1c1ZhbGlkYXRvciBub3QgZW5hYmxlIHdoaWxlIFN0aW11bHVzIG5vdCBmb3VuZCcpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB0aGlzLnNldHVwU3RpbXVsdXNFcnJvckhhbmRsZXIoKTtcbiAgICB0aGlzLmNvbGxlY3RSZWdpc3RlcmVkQ29udHJvbGxlcnMoKTtcbiAgICB0aGlzLnZhbGlkYXRlT25ET01SZWFkeSgpO1xuICAgIHRoaXMuaW50ZXJjZXB0QWN0aW9uQ2xpY2tzKCk7XG4gIH1cblxuICBwcml2YXRlIGlzRGV2ZWxvcG1lbnQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEhd2luZG93LmVycm9ySGFuZGxlclxuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cFN0aW11bHVzRXJyb3JIYW5kbGVyKCk6IHZvaWQge1xuICAgIC8vIFNldHVwIFN0aW11bHVzIGFwcGxpY2F0aW9uIGVycm9yIGhhbmRsaW5nIHVzaW5nIGFwcGxpY2F0aW9uLmhhbmRsZUVycm9yXG4gICAgY29uc3Qgc2V0dXBIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgY29uc3Qgc3RpbXVsdXMgPSB3aW5kb3cuU3RpbXVsdXMgYXMgYW55O1xuICAgICAgaWYgKHN0aW11bHVzICYmIHR5cGVvZiBzdGltdWx1cy5oYW5kbGVFcnJvciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgc3RpbXVsdXMuaGFuZGxlRXJyb3IgPSAoZXJyb3I6IEVycm9yLCBtZXNzYWdlOiBzdHJpbmcsIGRldGFpbDogYW55KSA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignU3RpbXVsdXMgRXJyb3I6JywgeyBlcnJvciwgbWVzc2FnZSwgZGV0YWlsIH0pO1xuXG4gICAgICAgICAgLy8gVXNlIHRoZSBnbG9iYWwgZXJyb3IgaGFuZGxlciB0byBjYXB0dXJlIFN0aW11bHVzIGVycm9yc1xuICAgICAgICAgIGlmICh3aW5kb3cuZXJyb3JIYW5kbGVyKSB7XG4gICAgICAgICAgICBsZXQgZXJyb3JNZXNzYWdlID0gbWVzc2FnZSB8fCBlcnJvci5tZXNzYWdlIHx8ICdTdGltdWx1cyBlcnJvciBvY2N1cnJlZCc7XG4gICAgICAgICAgICBsZXQgY29udHJvbGxlck5hbWUgPSAnJztcbiAgICAgICAgICAgIGxldCBhY3Rpb24gPSAnJztcbiAgICAgICAgICAgIGxldCBzdWJUeXBlOiAnbWlzc2luZy1jb250cm9sbGVyJyB8ICdzY29wZS1lcnJvcicgfCAncG9zaXRpb25pbmctaXNzdWVzJyB8ICdhY3Rpb24tY2xpY2snIHwgJ21pc3NpbmctdGFyZ2V0JyB8ICdtaXNzaW5nLWFjdGlvbicgfCAnbWV0aG9kLW5vdC1mb3VuZCcgPSAnc2NvcGUtZXJyb3InO1xuICAgICAgICAgICAgbGV0IHN1Z2dlc3Rpb24gPSAnJztcbiAgICAgICAgICAgIGxldCBlbGVtZW50SW5mbyA9IG51bGw7XG5cbiAgICAgICAgICAgIC8vIEV4dHJhY3QgY29udHJvbGxlciBhbmQgYWN0aW9uIGluZm9ybWF0aW9uIGZyb20gZGV0YWlsIG9yIGVycm9yIGNvbnRleHRcbiAgICAgICAgICAgIGlmIChkZXRhaWwpIHtcbiAgICAgICAgICAgICAgaWYgKGRldGFpbC5pZGVudGlmaWVyKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlck5hbWUgPSBkZXRhaWwuaWRlbnRpZmllcjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoZGV0YWlsLmFjdGlvbikge1xuICAgICAgICAgICAgICAgIGFjdGlvbiA9IGRldGFpbC5hY3Rpb247XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGRldGFpbC5lbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudEluZm8gPSB7XG4gICAgICAgICAgICAgICAgICB0YWdOYW1lOiBkZXRhaWwuZWxlbWVudC50YWdOYW1lLFxuICAgICAgICAgICAgICAgICAgaWQ6IGRldGFpbC5lbGVtZW50LmlkLFxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBkZXRhaWwuZWxlbWVudC5jbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgICBvdXRlckhUTUw6IGAke2RldGFpbC5lbGVtZW50Lm91dGVySFRNTD8uc3Vic3RyaW5nKDAsIDIwMCkgIH0uLi5gXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBbmFseXplIGVycm9yIHR5cGUgYW5kIHByb3ZpZGUgc3BlY2lmaWMgc3VnZ2VzdGlvbnNcbiAgICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdDb250cm9sbGVyJykgJiYgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnaXMgbm90IGRlZmluZWQnKSkge1xuICAgICAgICAgICAgICBzdWJUeXBlID0gJ21pc3NpbmctY29udHJvbGxlcic7XG4gICAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xsZXJNYXRjaCA9IGVycm9yLm1lc3NhZ2UubWF0Y2goLyhcXHcrKUNvbnRyb2xsZXIgaXMgbm90IGRlZmluZWQvKTtcbiAgICAgICAgICAgICAgaWYgKGNvbnRyb2xsZXJNYXRjaCkge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJOYW1lID0gY29udHJvbGxlck1hdGNoWzFdLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0gYFN0aW11bHVzIGNvbnRyb2xsZXIgXCIke2NvbnRyb2xsZXJOYW1lfVwiIGlzIG5vdCBkZWZpbmVkIG9yIG5vdCByZWdpc3RlcmVkYDtcbiAgICAgICAgICAgICAgICBzdWdnZXN0aW9uID0gYE1ha2Ugc3VyZSB0byBpbXBvcnQgYW5kIHJlZ2lzdGVyIHRoZSBcIiR7Y29udHJvbGxlck5hbWV9XCIgY29udHJvbGxlciBpbiBhcHAvamF2YXNjcmlwdC9jb250cm9sbGVycy9pbmRleC50cy4gYCArXG4gICAgICAgICAgICAgICAgICBgQ2hlY2sgaWYgdGhlIGNvbnRyb2xsZXIgZmlsZSBleGlzdHMgYXQgYXBwL2phdmFzY3JpcHQvY29udHJvbGxlcnMvJHtjb250cm9sbGVyTmFtZX1fY29udHJvbGxlci50c2A7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnTWlzc2luZyB0YXJnZXQgZWxlbWVudCcpKSB7XG4gICAgICAgICAgICAgIHN1YlR5cGUgPSAnbWlzc2luZy10YXJnZXQnO1xuICAgICAgICAgICAgICBzdWdnZXN0aW9uID0gJ0NoZWNrIHRoYXQgdGhlIHRhcmdldCBlbGVtZW50IGV4aXN0cyBpbiB0aGUgRE9NIGFuZCBoYXMgdGhlIGNvcnJlY3QgZGF0YS1bY29udHJvbGxlcl0tdGFyZ2V0IGF0dHJpYnV0ZSc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ01pc3NpbmcgYWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgc3ViVHlwZSA9ICdtaXNzaW5nLWFjdGlvbic7XG4gICAgICAgICAgICAgIHN1Z2dlc3Rpb24gPSAnVmVyaWZ5IHRoYXQgdGhlIGFjdGlvbiBtZXRob2QgZXhpc3RzIGluIHRoZSBjb250cm9sbGVyIGNsYXNzIGFuZCBpcyBwcm9wZXJseSBkZWZpbmVkJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobWVzc2FnZSAmJiBtZXNzYWdlLmluY2x1ZGVzKCdjbGljaycpKSB7XG4gICAgICAgICAgICAgIHN1YlR5cGUgPSAnYWN0aW9uLWNsaWNrJztcbiAgICAgICAgICAgICAgc3VnZ2VzdGlvbiA9ICdDaGVjayBpZiB0aGUgY2xpY2sgYWN0aW9uIGhhbmRsZXIgZXhpc3RzIGFuZCB0aGUgZWxlbWVudCBoYXMgdGhlIGNvcnJlY3QgZGF0YS1hY3Rpb24gYXR0cmlidXRlJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gUmVwb3J0IHRoZSBlcnJvciB0byB0aGUgZXJyb3IgaGFuZGxlclxuICAgICAgICAgICAgd2luZG93LmVycm9ySGFuZGxlci5oYW5kbGVFcnJvcih7XG4gICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgICAgICAgdHlwZTogJ3N0aW11bHVzJyxcbiAgICAgICAgICAgICAgc3ViVHlwZTogc3ViVHlwZSxcbiAgICAgICAgICAgICAgY29udHJvbGxlck5hbWU6IGNvbnRyb2xsZXJOYW1lLFxuICAgICAgICAgICAgICBhY3Rpb246IGFjdGlvbixcbiAgICAgICAgICAgICAgc3VnZ2VzdGlvbjogc3VnZ2VzdGlvbixcbiAgICAgICAgICAgICAgZWxlbWVudEluZm86IGVsZW1lbnRJbmZvLFxuICAgICAgICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgICAgICAgb3JpZ2luYWxNZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgICAgICAgICBuYW1lOiBlcnJvci5uYW1lLFxuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgIHN0YWNrOiBlcnJvci5zdGFja1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGV0YWlsOiBkZXRhaWxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgIGZpbGVuYW1lOiAnc3RpbXVsdXMtYXBwbGljYXRpb24nLFxuICAgICAgICAgICAgICBlcnJvcjogZXJyb3JcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBjb25zb2xlLmxvZygnU3RpbXVsdXMgZXJyb3IgaGFuZGxpbmcgY29uZmlndXJlZCB2aWEgc3RpbXVsdXNfdmFsaWRhdG9yJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIFRyeSB0byBzZXR1cCBpbW1lZGlhdGVseSBpZiBTdGltdWx1cyBpcyBhbHJlYWR5IGF2YWlsYWJsZVxuICAgIGlmICh3aW5kb3cuU3RpbXVsdXMpIHtcbiAgICAgIHNldHVwSGFuZGxlcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBXYWl0IGZvciBTdGltdWx1cyB0byBiZSBhdmFpbGFibGVcbiAgICAgIGNvbnN0IGNoZWNrU3RpbXVsdXMgPSAoKSA9PiB7XG4gICAgICAgIGlmICh3aW5kb3cuU3RpbXVsdXMpIHtcbiAgICAgICAgICBzZXR1cEhhbmRsZXIoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KGNoZWNrU3RpbXVsdXMsIDEwMCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBjaGVja1N0aW11bHVzKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjb2xsZWN0UmVnaXN0ZXJlZENvbnRyb2xsZXJzKCk6IHZvaWQge1xuICAgIC8vIEdldCByZWdpc3RlcmVkIGNvbnRyb2xsZXJzIGZyb20gU3RpbXVsdXMgYXBwbGljYXRpb25cbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3RpbXVsdXMgPSB3aW5kb3cuU3RpbXVsdXMgYXMgYW55O1xuICAgICAgaWYgKHN0aW11bHVzPy5yb3V0ZXI/Lm1vZHVsZXNCeUlkZW50aWZpZXIpIHtcbiAgICAgICAgY29uc3QgbW9kdWxlcyA9IHN0aW11bHVzLnJvdXRlci5tb2R1bGVzQnlJZGVudGlmaWVyO1xuICAgICAgICBmb3IgKGNvbnN0IFtpZGVudGlmaWVyXSBvZiBtb2R1bGVzKSB7XG4gICAgICAgICAgdGhpcy5yZWdpc3RlcmVkQ29udHJvbGxlcnMuYWRkKGlkZW50aWZpZXIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignQ291bGQgbm90IGFjY2VzcyBTdGltdWx1cyBjb250cm9sbGVyczonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB2YWxpZGF0ZU9uRE9NUmVhZHkoKTogdm9pZCB7XG4gICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdsb2FkaW5nJykge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHRoaXMudmFsaWRhdGVDb250cm9sbGVycygpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy52YWxpZGF0ZUNvbnRyb2xsZXJzKCk7XG4gICAgfVxuXG4gICAgLy8gQWxzbyB2YWxpZGF0ZSB3aGVuIG5ldyBjb250ZW50IGlzIGFkZGVkIGR5bmFtaWNhbGx5XG4gICAgdGhpcy5vYnNlcnZlTmV3Q29udGVudCgpO1xuICB9XG5cbiAgcHJpdmF0ZSB2YWxpZGF0ZUNvbnRyb2xsZXJzKCk6IHZvaWQge1xuICAgIGNvbnN0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtY29udHJvbGxlcl0nKTtcblxuICAgIGVsZW1lbnRzLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICBjb25zdCBjb250cm9sbGVycyA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbnRyb2xsZXInKT8uc3BsaXQoJyAnKSB8fCBbXTtcblxuICAgICAgY29udHJvbGxlcnMuZm9yRWFjaChjb250cm9sbGVyID0+IHtcbiAgICAgICAgY29uc3QgdHJpbW1lZENvbnRyb2xsZXIgPSBjb250cm9sbGVyLnRyaW0oKTtcbiAgICAgICAgaWYgKHRyaW1tZWRDb250cm9sbGVyICYmICF0aGlzLnJlZ2lzdGVyZWRDb250cm9sbGVycy5oYXModHJpbW1lZENvbnRyb2xsZXIpKSB7XG4gICAgICAgICAgdGhpcy5taXNzaW5nQ29udHJvbGxlcnMuYWRkKHRyaW1tZWRDb250cm9sbGVyKTtcbiAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkQ29udHJvbGxlciAmJiB0aGlzLnJlZ2lzdGVyZWRDb250cm9sbGVycy5oYXModHJpbW1lZENvbnRyb2xsZXIpKSB7XG4gICAgICAgICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgdGFyZ2V0cyBmb3IgcmVnaXN0ZXJlZCBjb250cm9sbGVyc1xuICAgICAgICAgIHRoaXMudmFsaWRhdGVSZXF1aXJlZFRhcmdldHMoZWxlbWVudCwgdHJpbW1lZENvbnRyb2xsZXIpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gVmFsaWRhdGUgZWxlbWVudCBwb3NpdGlvbmluZyBpc3N1ZXNcbiAgICAgIHRoaXMudmFsaWRhdGVFbGVtZW50UG9zaXRpb25pbmcoZWxlbWVudCk7XG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5taXNzaW5nQ29udHJvbGxlcnMuc2l6ZSA+IDApIHtcbiAgICAgIHRoaXMucmVwb3J0TWlzc2luZ0NvbnRyb2xsZXJzKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZWxlbWVudElzc3Vlcy5zaXplID4gMCkge1xuICAgICAgdGhpcy5yZXBvcnRFbGVtZW50SXNzdWVzKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBvYnNlcnZlTmV3Q29udGVudCgpOiB2b2lkIHtcbiAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKG11dGF0aW9ucyA9PiB7XG4gICAgICBsZXQgaGFzTmV3RWxlbWVudHMgPSBmYWxzZTtcblxuICAgICAgbXV0YXRpb25zLmZvckVhY2gobXV0YXRpb24gPT4ge1xuICAgICAgICBpZiAobXV0YXRpb24udHlwZSA9PT0gJ2NoaWxkTGlzdCcgJiYgbXV0YXRpb24uYWRkZWROb2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgLy8gSWdub3JlIGVycm9yIGhhbmRsZXIgVUkgY2hhbmdlcyB0byBwcmV2ZW50IGluZmluaXRlIGxvb3BzXG4gICAgICAgICAgY29uc3QgaGFzUmVsZXZhbnRDaGFuZ2VzID0gQXJyYXkuZnJvbShtdXRhdGlvbi5hZGRlZE5vZGVzKS5zb21lKG5vZGUgPT4ge1xuICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBub2RlIGFzIEVsZW1lbnQ7XG4gICAgICAgICAgICAgIC8vIFNraXAgZXJyb3IgaGFuZGxlciBlbGVtZW50c1xuICAgICAgICAgICAgICBpZiAoZWxlbWVudC5pZCA9PT0gJ2pzLWVycm9yLXN0YXR1cy1iYXInIHx8XG4gICAgICAgICAgICAgICAgICBlbGVtZW50LmNsb3Nlc3QoJyNqcy1lcnJvci1zdGF0dXMtYmFyJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLy8gT25seSBjYXJlIGFib3V0IGVsZW1lbnRzIHdpdGggZGF0YS1jb250cm9sbGVyIGF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuaGFzQXR0cmlidXRlKCdkYXRhLWNvbnRyb2xsZXInKSB8fFxuICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jb250cm9sbGVyXScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKGhhc1JlbGV2YW50Q2hhbmdlcykge1xuICAgICAgICAgICAgaGFzTmV3RWxlbWVudHMgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChoYXNOZXdFbGVtZW50cykge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMudmFsaWRhdGVDb250cm9sbGVycygpLCAxMDApO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7XG4gICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICBzdWJ0cmVlOiB0cnVlXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlcG9ydE1pc3NpbmdDb250cm9sbGVycygpOiB2b2lkIHtcbiAgICAvLyBQcmV2ZW50IGR1cGxpY2F0ZSByZXBvcnRzXG4gICAgaWYgKHRoaXMuaGFzUmVwb3J0ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtaXNzaW5nTGlzdCA9IEFycmF5LmZyb20odGhpcy5taXNzaW5nQ29udHJvbGxlcnMpO1xuICAgIHRoaXMuaGFzUmVwb3J0ZWQgPSB0cnVlO1xuXG4gICAgLy8gUmVwb3J0IHRvIGVycm9yIGhhbmRsZXIgaWYgYXZhaWxhYmxlXG4gICAgaWYgKHdpbmRvdy5lcnJvckhhbmRsZXIpIHtcbiAgICAgIHdpbmRvdy5lcnJvckhhbmRsZXIuaGFuZGxlRXJyb3Ioe1xuICAgICAgICBtZXNzYWdlOiBgTWlzc2luZyBTdGltdWx1cyBjb250cm9sbGVyczogJHttaXNzaW5nTGlzdC5qb2luKCcsICcpfWAsXG4gICAgICAgIHR5cGU6ICdzdGltdWx1cycsXG4gICAgICAgIHN1YlR5cGU6ICdtaXNzaW5nLWNvbnRyb2xsZXInLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgbWlzc2luZ0NvbnRyb2xsZXJzOiBtaXNzaW5nTGlzdCxcbiAgICAgICAgc3VnZ2VzdGlvbjogYFJ1bjogcmFpbHMgZ2VuZXJhdGUgc3RpbXVsdXNfY29udHJvbGxlciAke21pc3NpbmdMaXN0WzBdfWAsXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICBjb250cm9sbGVyczogbWlzc2luZ0xpc3QsXG4gICAgICAgICAgZ2VuZXJhdG9yQ29tbWFuZHM6IG1pc3NpbmdMaXN0Lm1hcChuYW1lID0+IGByYWlscyBnZW5lcmF0ZSBzdGltdWx1c19jb250cm9sbGVyICR7bmFtZX1gKVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRmFsbGJhY2sgdG8gY29uc29sZVxuICAgICAgY29uc29sZS5lcnJvcignXHVEODNEXHVERDM0IE1pc3NpbmcgU3RpbXVsdXMgQ29udHJvbGxlcnM6JywgbWlzc2luZ0xpc3QpO1xuICAgICAgY29uc29sZS5pbmZvKCdcdUQ4M0RcdURDQTEgR2VuZXJhdGUgbWlzc2luZyBjb250cm9sbGVyczonLCBtaXNzaW5nTGlzdC5tYXAobmFtZSA9PlxuICAgICAgICBgcmFpbHMgZ2VuZXJhdGUgc3RpbXVsdXNfY29udHJvbGxlciAke25hbWV9YFxuICAgICAgKS5qb2luKCdcXG4nKSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB2YWxpZGF0ZVJlcXVpcmVkVGFyZ2V0cyhjb250cm9sbGVyRWxlbWVudDogRWxlbWVudCwgY29udHJvbGxlck5hbWU6IHN0cmluZyk6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdGltdWx1cyA9IHdpbmRvdy5TdGltdWx1cyBhcyBhbnk7XG4gICAgICBpZiAoc3RpbXVsdXM/LnJvdXRlcj8ubW9kdWxlc0J5SWRlbnRpZmllcikge1xuICAgICAgICBjb25zdCBtb2R1bGUgPSBzdGltdWx1cy5yb3V0ZXIubW9kdWxlc0J5SWRlbnRpZmllci5nZXQoY29udHJvbGxlck5hbWUpO1xuICAgICAgICBpZiAobW9kdWxlKSB7XG4gICAgICAgICAgY29uc3QgY29udHJvbGxlckNsYXNzID0gbW9kdWxlLmRlZmluaXRpb24uY29udHJvbGxlckNvbnN0cnVjdG9yO1xuXG4gICAgICAgICAgY29uc3QgZGVmaW5lZFRhcmdldHMgPSBjb250cm9sbGVyQ2xhc3MudGFyZ2V0cyB8fCBbXTtcbiAgICAgICAgICBjb25zdCBtaXNzaW5nVGFyZ2V0czogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgICBjb25zdCBvdXRPZlNjb3BlVGFyZ2V0czogc3RyaW5nW10gPSBbXTtcblxuICAgICAgICAgIC8vIEdldCBvcHRpb25hbCB0YXJnZXRzIGJ5IGNoZWNraW5nIGZvciBoYXNYWFhUYXJnZXQgcHJvcGVydGllc1xuICAgICAgICAgIGNvbnN0IG9wdGlvbmFsVGFyZ2V0cyA9IHRoaXMuZ2V0T3B0aW9uYWxUYXJnZXRzKGNvbnRyb2xsZXJDbGFzcyk7XG5cbiAgICAgICAgICBkZWZpbmVkVGFyZ2V0cy5mb3JFYWNoKCh0YXJnZXROYW1lOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIC8vIFNraXAgdmFsaWRhdGlvbiBmb3Igb3B0aW9uYWwgdGFyZ2V0c1xuICAgICAgICAgICAgaWYgKG9wdGlvbmFsVGFyZ2V0cy5oYXModGFyZ2V0TmFtZSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB0YXJnZXRTZWxlY3RvciA9IGBbZGF0YS0ke2NvbnRyb2xsZXJOYW1lfS10YXJnZXQ9XCIke3RhcmdldE5hbWV9XCJdYDtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldEVsZW1lbnQgPSBjb250cm9sbGVyRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldFNlbGVjdG9yKTtcblxuICAgICAgICAgICAgaWYgKCF0YXJnZXRFbGVtZW50KSB7XG4gICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRhcmdldCBleGlzdHMgZ2xvYmFsbHkgYnV0IG91dHNpZGUgY29udHJvbGxlciBzY29wZVxuICAgICAgICAgICAgICBjb25zdCBnbG9iYWxUYXJnZXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXRTZWxlY3Rvcik7XG4gICAgICAgICAgICAgIGlmIChnbG9iYWxUYXJnZXRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgb3V0T2ZTY29wZVRhcmdldHMucHVzaCh0YXJnZXROYW1lKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBtaXNzaW5nVGFyZ2V0cy5wdXNoKHRhcmdldE5hbWUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAobWlzc2luZ1RhcmdldHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5yZXBvcnRNaXNzaW5nVGFyZ2V0cyhjb250cm9sbGVyTmFtZSwgbWlzc2luZ1RhcmdldHMsIGNvbnRyb2xsZXJFbGVtZW50KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAob3V0T2ZTY29wZVRhcmdldHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5yZXBvcnRPdXRPZlNjb3BlVGFyZ2V0cyhjb250cm9sbGVyTmFtZSwgb3V0T2ZTY29wZVRhcmdldHMsIGNvbnRyb2xsZXJFbGVtZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKGBDb3VsZCBub3QgdmFsaWRhdGUgdGFyZ2V0cyBmb3IgY29udHJvbGxlciAke2NvbnRyb2xsZXJOYW1lfTpgLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRPcHRpb25hbFRhcmdldHMoY29udHJvbGxlckNsYXNzOiBhbnkpOiBTZXQ8c3RyaW5nPiB7XG4gICAgY29uc3Qgb3B0aW9uYWxUYXJnZXRzID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cbiAgICB0cnkge1xuICAgICAgLy8gR2V0IGRlZmluZWQgdGFyZ2V0c1xuICAgICAgY29uc3QgZGVmaW5lZFRhcmdldHMgPSBjb250cm9sbGVyQ2xhc3MudGFyZ2V0cyB8fCBbXTtcblxuICAgICAgZGVmaW5lZFRhcmdldHMuZm9yRWFjaCgodGFyZ2V0TmFtZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIC8vIENvbnZlcnQgdGFyZ2V0IG5hbWUgdG8gaGFzWFhYVGFyZ2V0IHByb3BlcnR5IG5hbWVcbiAgICAgICAgY29uc3QgY2FwaXRhbGl6ZWRUYXJnZXQgPSB0YXJnZXROYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdGFyZ2V0TmFtZS5zbGljZSgxKTtcbiAgICAgICAgY29uc3QgaGFzVGFyZ2V0UHJvcGVydHkgPSBgaGFzJHtjYXBpdGFsaXplZFRhcmdldH1UYXJnZXRgO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIGhhc1hYWFRhcmdldCBpcyBkZWNsYXJlZCBhcyBhIHByb3BlcnR5IG9uIHRoZSBjbGFzc1xuICAgICAgICAvLyBUaGlzIGluZGljYXRlcyB0aGUgdGFyZ2V0IGlzIG9wdGlvbmFsXG4gICAgICAgIGlmIChoYXNUYXJnZXRQcm9wZXJ0eSBpbiBjb250cm9sbGVyQ2xhc3MucHJvdG90eXBlIHx8XG4gICAgICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGNvbnRyb2xsZXJDbGFzcy5wcm90b3R5cGUsIGhhc1RhcmdldFByb3BlcnR5KSB8fFxuICAgICAgICAgICAgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoY29udHJvbGxlckNsYXNzLnByb3RvdHlwZSwgaGFzVGFyZ2V0UHJvcGVydHkpKSB7XG4gICAgICAgICAgb3B0aW9uYWxUYXJnZXRzLmFkZCh0YXJnZXROYW1lKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignQ291bGQgbm90IGFuYWx5emUgY29udHJvbGxlciBmb3Igb3B0aW9uYWwgdGFyZ2V0czonLCBlcnJvcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9wdGlvbmFsVGFyZ2V0cztcbiAgfVxuXG4gIHByaXZhdGUgdmFsaWRhdGVFbGVtZW50UG9zaXRpb25pbmcoY29udHJvbGxlckVsZW1lbnQ6IEVsZW1lbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjb250cm9sbGVyTmFtZSA9IGNvbnRyb2xsZXJFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1jb250cm9sbGVyJyk/LnNwbGl0KCcgJylbMF07XG4gICAgaWYgKCFjb250cm9sbGVyTmFtZSkgcmV0dXJuO1xuXG4gICAgY29uc3QgaXNzdWVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgdGhpcy5jaGVja0NvbW1vblNlbGVjdG9ycyhjb250cm9sbGVyRWxlbWVudCwgY29udHJvbGxlck5hbWUsIGlzc3Vlcyk7XG5cbiAgICBpZiAoaXNzdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuZWxlbWVudElzc3Vlcy5zZXQoY29udHJvbGxlck5hbWUsIGlzc3Vlcyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjaGVja0NvbW1vblNlbGVjdG9ycyhlbGVtZW50OiBFbGVtZW50LCBjb250cm9sbGVyTmFtZTogc3RyaW5nLCBpc3N1ZXM6IHN0cmluZ1tdKTogdm9pZCB7XG4gICAgY29uc3QgcmVsZXZhbnRJZHM6IHN0cmluZ1tdID0gW107XG5cbiAgICByZWxldmFudElkcy5wdXNoKGAke2NvbnRyb2xsZXJOYW1lfS1pbnB1dGAsIGAke2NvbnRyb2xsZXJOYW1lfS1idXR0b25gLCBgJHtjb250cm9sbGVyTmFtZX0tZm9ybWApO1xuXG4gICAgcmVsZXZhbnRJZHMuZm9yRWFjaChpZCA9PiB7XG4gICAgICBjb25zdCBnbG9iYWxFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgICAgaWYgKGdsb2JhbEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgaXNJblNjb3BlID0gZ2xvYmFsRWxlbWVudCA9PT0gZWxlbWVudCB8fCBlbGVtZW50LmNvbnRhaW5zKGdsb2JhbEVsZW1lbnQpO1xuXG4gICAgICAgIGlmICghaXNJblNjb3BlKSB7XG4gICAgICAgICAgaXNzdWVzLnB1c2goYEVsZW1lbnQgIyR7aWR9IGV4aXN0cyBidXQgb3V0c2lkZSBjb250cm9sbGVyIHNjb3BlYCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgaW50ZXJjZXB0QWN0aW9uQ2xpY2tzKCk6IHZvaWQge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQgYXMgRWxlbWVudDtcbiAgICAgIGlmICghdGFyZ2V0KSByZXR1cm47XG5cbiAgICAgIGNvbnN0IGFjdGlvbkVsZW1lbnQgPSB0YXJnZXQuY2xvc2VzdCgnW2RhdGEtYWN0aW9uXScpO1xuICAgICAgaWYgKCFhY3Rpb25FbGVtZW50KSByZXR1cm47XG5cbiAgICAgIGNvbnN0IGFjdGlvbnMgPSBhY3Rpb25FbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1hY3Rpb24nKT8uc3BsaXQoJyAnKSB8fCBbXTtcblxuICAgICAgYWN0aW9ucy5mb3JFYWNoKGFjdGlvbiA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRyb2xsZXJNYXRjaCA9IGFjdGlvbi5tYXRjaCgvKFtcXHctXSspIyhbXFx3LV0rKS8pO1xuICAgICAgICBpZiAoY29udHJvbGxlck1hdGNoKSB7XG4gICAgICAgICAgY29uc3QgY29udHJvbGxlck5hbWUgPSBjb250cm9sbGVyTWF0Y2hbMV07XG4gICAgICAgICAgY29uc3QgbWV0aG9kTmFtZSA9IGNvbnRyb2xsZXJNYXRjaFsyXTtcblxuICAgICAgICAgIGlmICghdGhpcy5yZWdpc3RlcmVkQ29udHJvbGxlcnMuaGFzKGNvbnRyb2xsZXJOYW1lKSkge1xuICAgICAgICAgICAgdGhpcy5yZXBvcnRNaXNzaW5nQWN0aW9uQ29udHJvbGxlcihjb250cm9sbGVyTmFtZSwgYWN0aW9uLCBhY3Rpb25FbGVtZW50KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBjb250cm9sbGVyRWxlbWVudCA9IGFjdGlvbkVsZW1lbnQuY2xvc2VzdChgW2RhdGEtY29udHJvbGxlcio9XCIke2NvbnRyb2xsZXJOYW1lfVwiXWApO1xuICAgICAgICAgIGlmICghY29udHJvbGxlckVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMucmVwb3J0TWlzc2luZ0NvbnRyb2xsZXJTY29wZShjb250cm9sbGVyTmFtZSwgYWN0aW9uLCBhY3Rpb25FbGVtZW50KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLmNoZWNrTWV0aG9kRXhpc3RzKGNvbnRyb2xsZXJOYW1lLCBtZXRob2ROYW1lLCBhY3Rpb24sIGFjdGlvbkVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LCB0cnVlKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVwb3J0TWlzc2luZ1RhcmdldHMoY29udHJvbGxlck5hbWU6IHN0cmluZywgbWlzc2luZ1RhcmdldHM6IHN0cmluZ1tdLCBjb250cm9sbGVyRWxlbWVudDogRWxlbWVudCk6IHZvaWQge1xuICAgIGlmICh3aW5kb3cuZXJyb3JIYW5kbGVyKSB7XG4gICAgICBjb25zdCB0YXJnZXRMaXN0ID0gbWlzc2luZ1RhcmdldHMuam9pbignLCAnKTtcbiAgICAgIGNvbnN0IHRhcmdldEV4YW1wbGVzID0gbWlzc2luZ1RhcmdldHMubWFwKHRhcmdldCA9PlxuICAgICAgICBgPGRpdiBkYXRhLSR7Y29udHJvbGxlck5hbWV9LXRhcmdldD1cIiR7dGFyZ2V0fVwiPi4uLjwvZGl2PmBcbiAgICAgICkuam9pbignXFxuJyk7XG5cbiAgICAgIHdpbmRvdy5lcnJvckhhbmRsZXIuaGFuZGxlRXJyb3Ioe1xuICAgICAgICBtZXNzYWdlOiBgU3RpbXVsdXMgY29udHJvbGxlciBcIiR7Y29udHJvbGxlck5hbWV9XCIgcmVxdWlyZXMgbWlzc2luZyB0YXJnZXQgZWxlbWVudHM6ICR7dGFyZ2V0TGlzdH1gLFxuICAgICAgICB0eXBlOiAnc3RpbXVsdXMnLFxuICAgICAgICBzdWJUeXBlOiAnbWlzc2luZy10YXJnZXQnLFxuICAgICAgICBjb250cm9sbGVyTmFtZSxcbiAgICAgICAgbWlzc2luZ1RhcmdldHMsXG4gICAgICAgIGVsZW1lbnRJbmZvOiB0aGlzLmdldEVsZW1lbnRJbmZvKGNvbnRyb2xsZXJFbGVtZW50KSxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHN1Z2dlc3Rpb246IGBBZGQgdGhlIHJlcXVpcmVkIHRhcmdldCBlbGVtZW50cyB0byB0aGUgRE9NIHdpdGhpbiB0aGUgY29udHJvbGxlciBzY29wZSwgb3IgbWFrZSB0aGVtIG9wdGlvbmFsIGJ5IGFkZGluZyBgICtcbiAgICAgICAgICBgJ2RlY2xhcmUgcmVhZG9ubHkgaGFzJHttaXNzaW5nVGFyZ2V0cy5tYXAodCA9PiB0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdC5zbGljZSgxKSkuam9pbignVGFyZ2V0OiBib29sZWFuLCBkZWNsYXJlIHJlYWRvbmx5IGhhcycpfVRhcmdldDogYm9vbGVhbicgdG8gdGhlIGNvbnRyb2xsZXJgLFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgZXJyb3JUeXBlOiAnTWlzc2luZyBSZXF1aXJlZCBUYXJnZXRzJyxcbiAgICAgICAgICBjb250cm9sbGVyTmFtZSxcbiAgICAgICAgICBtaXNzaW5nVGFyZ2V0cyxcbiAgICAgICAgICByZXF1aXJlZEVsZW1lbnRzOiB0YXJnZXRFeGFtcGxlcyxcbiAgICAgICAgICBlbGVtZW50SW5mbzogdGhpcy5nZXRFbGVtZW50SW5mbyhjb250cm9sbGVyRWxlbWVudCksXG4gICAgICAgICAgZGVzY3JpcHRpb246IGBUaGUgY29udHJvbGxlciBcIiR7Y29udHJvbGxlck5hbWV9XCIgZGVmaW5lcyB0YXJnZXRzIFske3RhcmdldExpc3R9XSBidXQgdGhlc2UgZWxlbWVudHMgYXJlIG5vdCBmb3VuZCBpbiB0aGUgRE9NIHdpdGhpbiB0aGUgY29udHJvbGxlciBzY29wZWBcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZXBvcnRPdXRPZlNjb3BlVGFyZ2V0cyhjb250cm9sbGVyTmFtZTogc3RyaW5nLCBvdXRPZlNjb3BlVGFyZ2V0czogc3RyaW5nW10sIGNvbnRyb2xsZXJFbGVtZW50OiBFbGVtZW50KTogdm9pZCB7XG4gICAgaWYgKHdpbmRvdy5lcnJvckhhbmRsZXIpIHtcbiAgICAgIGNvbnN0IHRhcmdldExpc3QgPSBvdXRPZlNjb3BlVGFyZ2V0cy5qb2luKCcsICcpO1xuXG4gICAgICB3aW5kb3cuZXJyb3JIYW5kbGVyLmhhbmRsZUVycm9yKHtcbiAgICAgICAgbWVzc2FnZTogYFN0aW11bHVzIGNvbnRyb2xsZXIgXCIke2NvbnRyb2xsZXJOYW1lfVwiIHRhcmdldHMgZXhpc3QgYnV0IGFyZSBvdXRzaWRlIGNvbnRyb2xsZXIgc2NvcGU6ICR7dGFyZ2V0TGlzdH1gLFxuICAgICAgICB0eXBlOiAnc3RpbXVsdXMnLFxuICAgICAgICBzdWJUeXBlOiAndGFyZ2V0LXNjb3BlLWVycm9yJyxcbiAgICAgICAgY29udHJvbGxlck5hbWUsXG4gICAgICAgIG91dE9mU2NvcGVUYXJnZXRzLFxuICAgICAgICBlbGVtZW50SW5mbzogdGhpcy5nZXRFbGVtZW50SW5mbyhjb250cm9sbGVyRWxlbWVudCksXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBzdWdnZXN0aW9uOiBgTW92ZSB0YXJnZXQgZWxlbWVudHMgaW5zaWRlIGNvbnRyb2xsZXIgc2NvcGUgb3IgZXhwYW5kIGNvbnRyb2xsZXIgc2NvcGUgdG8gaW5jbHVkZSB0YXJnZXRzYCxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIGVycm9yVHlwZTogJ1RhcmdldHMgT3V0c2lkZSBDb250cm9sbGVyIFNjb3BlJyxcbiAgICAgICAgICBjb250cm9sbGVyTmFtZSxcbiAgICAgICAgICBvdXRPZlNjb3BlVGFyZ2V0cyxcbiAgICAgICAgICBlbGVtZW50SW5mbzogdGhpcy5nZXRFbGVtZW50SW5mbyhjb250cm9sbGVyRWxlbWVudCksXG4gICAgICAgICAgZGVzY3JpcHRpb246IGBUaGUgY29udHJvbGxlciBcIiR7Y29udHJvbGxlck5hbWV9XCIgZGVmaW5lcyB0YXJnZXRzIFske3RhcmdldExpc3R9XSBhbmQgdGhlc2UgZWxlbWVudHMgZXhpc3QgaW4gdGhlIERPTSBidXQgYXJlIG91dHNpZGUgdGhlIGNvbnRyb2xsZXIgc2NvcGVgLFxuICAgICAgICAgIHNvbHV0aW9uOiBgRWl0aGVyIG1vdmUgdGhlIHRhcmdldCBlbGVtZW50cyBpbnNpZGUgdGhlIGNvbnRyb2xsZXIgc2NvcGUsIG9yIGV4cGFuZCB0aGUgY29udHJvbGxlciBzY29wZSB0byBpbmNsdWRlIGAgK1xuICAgICAgICAgICAgYHRoZSB0YXJnZXRzIGJ5IG1vdmluZyB0aGUgZGF0YS1jb250cm9sbGVyIGF0dHJpYnV0ZSB0byBhIHBhcmVudCBlbGVtZW50IHRoYXQgY29udGFpbnMgYm90aCB0aGUgY29udHJvbGxlciBsb2dpYyBhbmQgdGhlIHRhcmdldCBlbGVtZW50cy5gXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVwb3J0TWlzc2luZ0FjdGlvbkNvbnRyb2xsZXIoY29udHJvbGxlck5hbWU6IHN0cmluZywgYWN0aW9uOiBzdHJpbmcsIGVsZW1lbnQ6IEVsZW1lbnQpOiB2b2lkIHtcbiAgICBpZiAod2luZG93LmVycm9ySGFuZGxlcikge1xuICAgICAgd2luZG93LmVycm9ySGFuZGxlci5oYW5kbGVFcnJvcih7XG4gICAgICAgIG1lc3NhZ2U6IGBVc2VyIGNsaWNrZWQgYWN0aW9uIFwiJHthY3Rpb259XCIgYnV0IGNvbnRyb2xsZXIgXCIke2NvbnRyb2xsZXJOYW1lfVwiIGlzIG5vdCByZWdpc3RlcmVkYCxcbiAgICAgICAgdHlwZTogJ3N0aW11bHVzJyxcbiAgICAgICAgc3ViVHlwZTogJ2FjdGlvbi1jbGljaycsXG4gICAgICAgIGNvbnRyb2xsZXJOYW1lLFxuICAgICAgICBhY3Rpb24sXG4gICAgICAgIGVsZW1lbnRJbmZvOiB0aGlzLmdldEVsZW1lbnRJbmZvKGVsZW1lbnQpLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgc3VnZ2VzdGlvbjogYFJ1bjogcmFpbHMgZ2VuZXJhdGUgc3RpbXVsdXNfY29udHJvbGxlciAke2NvbnRyb2xsZXJOYW1lfWAsXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICBlcnJvclR5cGU6ICdNaXNzaW5nIENvbnRyb2xsZXIgb24gQWN0aW9uIENsaWNrJyxcbiAgICAgICAgICBjb250cm9sbGVyTmFtZSxcbiAgICAgICAgICBhY3Rpb24sXG4gICAgICAgICAgZWxlbWVudEluZm86IHRoaXMuZ2V0RWxlbWVudEluZm8oZWxlbWVudCksXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdVc2VyIGF0dGVtcHRlZCB0byB0cmlnZ2VyIGFuIGFjdGlvbiBidXQgdGhlIHJlcXVpcmVkIGNvbnRyb2xsZXIgaXMgbm90IHJlZ2lzdGVyZWQnXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVwb3J0TWlzc2luZ0NvbnRyb2xsZXJTY29wZShjb250cm9sbGVyTmFtZTogc3RyaW5nLCBhY3Rpb246IHN0cmluZywgZWxlbWVudDogRWxlbWVudCk6IHZvaWQge1xuICAgIGlmICh3aW5kb3cuZXJyb3JIYW5kbGVyKSB7XG4gICAgICB3aW5kb3cuZXJyb3JIYW5kbGVyLmhhbmRsZUVycm9yKHtcbiAgICAgICAgbWVzc2FnZTogYFVzZXIgY2xpY2tlZCBhY3Rpb24gXCIke2FjdGlvbn1cIiBidXQgbm8gXCIke2NvbnRyb2xsZXJOYW1lfVwiIGNvbnRyb2xsZXIgZm91bmQgaW4gcGFyZW50IHNjb3BlYCxcbiAgICAgICAgdHlwZTogJ3N0aW11bHVzJyxcbiAgICAgICAgc3ViVHlwZTogJ3Njb3BlLWVycm9yJyxcbiAgICAgICAgY29udHJvbGxlck5hbWUsXG4gICAgICAgIGFjdGlvbixcbiAgICAgICAgZWxlbWVudEluZm86IHRoaXMuZ2V0RWxlbWVudEluZm8oZWxlbWVudCksXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBzdWdnZXN0aW9uOiBgQWRkIGRhdGEtY29udHJvbGxlcj1cIiR7Y29udHJvbGxlck5hbWV9XCIgdG8gYSBwYXJlbnQgZWxlbWVudCBvciBtb3ZlIHRoaXMgZWxlbWVudCBpbnNpZGUgdGhlIGNvbnRyb2xsZXIgc2NvcGVgLFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgZXJyb3JUeXBlOiAnQ29udHJvbGxlciBTY29wZSBNaXNzaW5nJyxcbiAgICAgICAgICBjb250cm9sbGVyTmFtZSxcbiAgICAgICAgICBhY3Rpb24sXG4gICAgICAgICAgZWxlbWVudEluZm86IHRoaXMuZ2V0RWxlbWVudEluZm8oZWxlbWVudCksXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdBY3Rpb24gZWxlbWVudCBpcyBub3Qgd2l0aGluIHRoZSBzY29wZSBvZiBpdHMgdGFyZ2V0IGNvbnRyb2xsZXInLFxuICAgICAgICAgIHNvbHV0aW9uOiBgV3JhcCB0aGUgZWxlbWVudCB3aXRoIDxkaXYgZGF0YS1jb250cm9sbGVyPVwiJHtjb250cm9sbGVyTmFtZX1cIj4uLi48L2Rpdj5gXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY2hlY2tNZXRob2RFeGlzdHMoY29udHJvbGxlck5hbWU6IHN0cmluZywgbWV0aG9kTmFtZTogc3RyaW5nLCBhY3Rpb246IHN0cmluZywgZWxlbWVudDogRWxlbWVudCk6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgdGhlIGFjdHVhbCBjb250cm9sbGVyIGluc3RhbmNlIGZyb20gU3RpbXVsdXNcbiAgICAgIGNvbnN0IHN0aW11bHVzID0gd2luZG93LlN0aW11bHVzIGFzIGFueTtcbiAgICAgIGlmIChzdGltdWx1cz8ucm91dGVyPy5tb2R1bGVzQnlJZGVudGlmaWVyKSB7XG4gICAgICAgIGNvbnN0IG1vZHVsZSA9IHN0aW11bHVzLnJvdXRlci5tb2R1bGVzQnlJZGVudGlmaWVyLmdldChjb250cm9sbGVyTmFtZSk7XG4gICAgICAgIGlmIChtb2R1bGUpIHtcbiAgICAgICAgICBjb25zdCBjb250cm9sbGVyQ2xhc3MgPSBtb2R1bGUuZGVmaW5pdGlvbi5jb250cm9sbGVyQ29uc3RydWN0b3I7XG4gICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBuZXcgY29udHJvbGxlckNsYXNzKCk7XG5cbiAgICAgICAgICAvLyBDaGVjayBpZiBtZXRob2QgZXhpc3RzIGFuZCBpcyBjYWxsYWJsZVxuICAgICAgICAgIGlmICh0eXBlb2YgaW5zdGFuY2VbbWV0aG9kTmFtZV0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMucmVwb3J0TWlzc2luZ01ldGhvZChjb250cm9sbGVyTmFtZSwgbWV0aG9kTmFtZSwgYWN0aW9uLCBlbGVtZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChfZXJyb3IpIHtcbiAgICAgIC8vIElmIHdlIGNhbid0IGluc3RhbnRpYXRlIHRoZSBjb250cm9sbGVyLCB0cnkgYWx0ZXJuYXRpdmUgYXBwcm9hY2hcbiAgICAgIHRoaXMuY2hlY2tNZXRob2RFeGlzdHNBbHRlcm5hdGl2ZShjb250cm9sbGVyTmFtZSwgbWV0aG9kTmFtZSwgYWN0aW9uLCBlbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNoZWNrTWV0aG9kRXhpc3RzQWx0ZXJuYXRpdmUoY29udHJvbGxlck5hbWU6IHN0cmluZywgbWV0aG9kTmFtZTogc3RyaW5nLCBhY3Rpb246IHN0cmluZywgZWxlbWVudDogRWxlbWVudCk6IHZvaWQge1xuICAgIC8vIFRyeSB0byBnZXQgY29udHJvbGxlciBjb25zdHJ1Y3RvciBkaXJlY3RseVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdGltdWx1cyA9IHdpbmRvdy5TdGltdWx1cyBhcyBhbnk7XG4gICAgICBpZiAoc3RpbXVsdXM/LnJvdXRlcj8ubW9kdWxlc0J5SWRlbnRpZmllcikge1xuICAgICAgICBjb25zdCBtb2R1bGUgPSBzdGltdWx1cy5yb3V0ZXIubW9kdWxlc0J5SWRlbnRpZmllci5nZXQoY29udHJvbGxlck5hbWUpO1xuICAgICAgICBpZiAobW9kdWxlKSB7XG4gICAgICAgICAgY29uc3QgY29udHJvbGxlckNsYXNzID0gbW9kdWxlLmRlZmluaXRpb24uY29udHJvbGxlckNvbnN0cnVjdG9yO1xuXG4gICAgICAgICAgLy8gQ2hlY2sgcHJvdG90eXBlIGZvciBtZXRob2RcbiAgICAgICAgICBpZiAoIWNvbnRyb2xsZXJDbGFzcy5wcm90b3R5cGVbbWV0aG9kTmFtZV0gfHwgdHlwZW9mIGNvbnRyb2xsZXJDbGFzcy5wcm90b3R5cGVbbWV0aG9kTmFtZV0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMucmVwb3J0TWlzc2luZ01ldGhvZChjb250cm9sbGVyTmFtZSwgbWV0aG9kTmFtZSwgYWN0aW9uLCBlbGVtZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKGBDb3VsZCBub3QgdmFsaWRhdGUgbWV0aG9kIGV4aXN0ZW5jZSBmb3IgJHtjb250cm9sbGVyTmFtZX0jJHttZXRob2ROYW1lfTpgLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZXBvcnRNaXNzaW5nTWV0aG9kKGNvbnRyb2xsZXJOYW1lOiBzdHJpbmcsIG1ldGhvZE5hbWU6IHN0cmluZywgYWN0aW9uOiBzdHJpbmcsIGVsZW1lbnQ6IEVsZW1lbnQpOiB2b2lkIHtcbiAgICBpZiAod2luZG93LmVycm9ySGFuZGxlcikge1xuICAgICAgd2luZG93LmVycm9ySGFuZGxlci5oYW5kbGVFcnJvcih7XG4gICAgICAgIG1lc3NhZ2U6IGBVc2VyIGNsaWNrZWQgYWN0aW9uIFwiJHthY3Rpb259XCIgYnV0IG1ldGhvZCBcIiR7bWV0aG9kTmFtZX1cIiBkb2VzIG5vdCBleGlzdCBpbiBjb250cm9sbGVyIFwiJHtjb250cm9sbGVyTmFtZX1cImAsXG4gICAgICAgIHR5cGU6ICdzdGltdWx1cycsXG4gICAgICAgIHN1YlR5cGU6ICdtZXRob2Qtbm90LWZvdW5kJyxcbiAgICAgICAgY29udHJvbGxlck5hbWUsXG4gICAgICAgIG1ldGhvZE5hbWUsXG4gICAgICAgIGFjdGlvbixcbiAgICAgICAgZWxlbWVudEluZm86IHRoaXMuZ2V0RWxlbWVudEluZm8oZWxlbWVudCksXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBzdWdnZXN0aW9uOiBgQWRkIG1ldGhvZCBcIiR7bWV0aG9kTmFtZX1cIiB0byB0aGUgJHtjb250cm9sbGVyTmFtZX0gY29udHJvbGxlciBvciBmaXggdGhlIGFjdGlvbiBuYW1lYCxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIGVycm9yVHlwZTogJ01ldGhvZCBOb3QgRm91bmQnLFxuICAgICAgICAgIGNvbnRyb2xsZXJOYW1lLFxuICAgICAgICAgIG1ldGhvZE5hbWUsXG4gICAgICAgICAgYWN0aW9uLFxuICAgICAgICAgIGVsZW1lbnRJbmZvOiB0aGlzLmdldEVsZW1lbnRJbmZvKGVsZW1lbnQpLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBgVGhlIG1ldGhvZCBcIiR7bWV0aG9kTmFtZX1cIiB3YXMgY2FsbGVkIGJ1dCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgY29udHJvbGxlcmAsXG4gICAgICAgICAgc29sdXRpb246IGBBZGQgdGhlIG1ldGhvZCB0byB5b3VyIGNvbnRyb2xsZXI6XFxuXFxuJHttZXRob2ROYW1lfSgpOiB2b2lkIHtcXG4gIC8vIFlvdXIgaW1wbGVtZW50YXRpb24gaGVyZVxcbn1gXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVwb3J0RWxlbWVudElzc3VlcygpOiB2b2lkIHtcbiAgICBjb25zdCBhbGxJc3N1ZXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgZGV0YWlsZWRJc3N1ZXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nW10gfSA9IHt9O1xuXG4gICAgdGhpcy5lbGVtZW50SXNzdWVzLmZvckVhY2goKGlzc3VlcywgY29udHJvbGxlck5hbWUpID0+IHtcbiAgICAgIGFsbElzc3Vlcy5wdXNoKGAke2NvbnRyb2xsZXJOYW1lfTogJHtpc3N1ZXMuam9pbignLCAnKX1gKTtcbiAgICAgIGRldGFpbGVkSXNzdWVzW2NvbnRyb2xsZXJOYW1lXSA9IGlzc3VlcztcbiAgICB9KTtcblxuICAgIGlmICh3aW5kb3cuZXJyb3JIYW5kbGVyKSB7XG4gICAgICB3aW5kb3cuZXJyb3JIYW5kbGVyLmhhbmRsZUVycm9yKHtcbiAgICAgICAgbWVzc2FnZTogYFN0aW11bHVzIGVsZW1lbnQgcG9zaXRpb25pbmcgaXNzdWVzIGRldGVjdGVkYCxcbiAgICAgICAgdHlwZTogJ3N0aW11bHVzJyxcbiAgICAgICAgc3ViVHlwZTogJ3Bvc2l0aW9uaW5nLWlzc3VlcycsXG4gICAgICAgIHBvc2l0aW9uaW5nSXNzdWVzOiBhbGxJc3N1ZXMsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBzdWdnZXN0aW9uOiAnQ29uc2lkZXIgdXNpbmcgZGF0YS10YXJnZXRzIG9yIG1vdmluZyBlbGVtZW50cyBpbnNpZGUgY29udHJvbGxlciBzY29wZScsXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICBlcnJvclR5cGU6ICdFbGVtZW50IFBvc2l0aW9uaW5nIElzc3VlcycsXG4gICAgICAgICAgY29udHJvbGxlcnM6IE9iamVjdC5rZXlzKGRldGFpbGVkSXNzdWVzKSxcbiAgICAgICAgICBpc3N1ZXNCeUNvbnRyb2xsZXI6IGRldGFpbGVkSXNzdWVzLFxuICAgICAgICAgIHRvdGFsSXNzdWVzOiBhbGxJc3N1ZXMubGVuZ3RoLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnU29tZSBlbGVtZW50cyBhcmUgcmVmZXJlbmNlZCBieSBjb250cm9sbGVycyBidXQgZXhpc3Qgb3V0c2lkZSB0aGVpciBzY29wZScsXG4gICAgICAgICAgcG9zc2libGVTb2x1dGlvbnM6IFtcbiAgICAgICAgICAgICdNb3ZlIGVsZW1lbnRzIGluc2lkZSBjb250cm9sbGVyIHNjb3BlJyxcbiAgICAgICAgICAgICdVc2UgZGF0YS10YXJnZXRzIGZvciBleHRlcm5hbCBlbGVtZW50cycsXG4gICAgICAgICAgICAnQ2hlY2sgY29udHJvbGxlciBkYXRhLWNvbnRyb2xsZXIgYXR0cmlidXRlIHBsYWNlbWVudCdcbiAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuZWxlbWVudElzc3Vlcy5jbGVhcigpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRFbGVtZW50SW5mbyhlbGVtZW50OiBFbGVtZW50KTogb2JqZWN0IHtcbiAgICByZXR1cm4ge1xuICAgICAgdGFnTmFtZTogZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCksXG4gICAgICBpZDogZWxlbWVudC5pZCB8fCAnbm8taWQnLFxuICAgICAgY2xhc3NOYW1lOiBlbGVtZW50LmNsYXNzTmFtZSB8fCAnbm8tY2xhc3MnLFxuICAgICAgdGV4dENvbnRlbnQ6IChlbGVtZW50LnRleHRDb250ZW50IHx8ICcnKS5zdWJzdHJpbmcoMCwgNTApXG4gICAgfTtcbiAgfVxuXG4gIC8vIFB1YmxpYyBBUElcbiAgcHVibGljIGdldFJlZ2lzdGVyZWRDb250cm9sbGVycygpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5yZWdpc3RlcmVkQ29udHJvbGxlcnMpO1xuICB9XG5cbiAgcHVibGljIGdldE1pc3NpbmdDb250cm9sbGVycygpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5taXNzaW5nQ29udHJvbGxlcnMpO1xuICB9XG5cbiAgcHVibGljIGZvcmNlVmFsaWRhdGlvbigpOiB2b2lkIHtcbiAgICB0aGlzLm1pc3NpbmdDb250cm9sbGVycy5jbGVhcigpO1xuICAgIHRoaXMuZWxlbWVudElzc3Vlcy5jbGVhcigpO1xuICAgIHRoaXMuaGFzUmVwb3J0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLnZhbGlkYXRlQ29udHJvbGxlcnMoKTtcbiAgfVxufVxuXG4vLyBOb3RlOiBHbG9iYWwgdHlwZXMgYXJlIGRlY2xhcmVkIGluIHR5cGVzL2dsb2JhbC5kLnRzXG5cbi8vIEluaXRpYWxpemUgdmFsaWRhdG9yXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgd2luZG93LnN0aW11bHVzVmFsaWRhdG9yID0gbmV3IFN0aW11bHVzVmFsaWRhdG9yKCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFN0aW11bHVzVmFsaWRhdG9yO1xuIiwgIi8vIEFjdGlvbiBDYWJsZSBwcm92aWRlcyB0aGUgZnJhbWV3b3JrIHRvIGRlYWwgd2l0aCBXZWJTb2NrZXRzIGluIFJhaWxzLlxuLy8gWW91IGNhbiBnZW5lcmF0ZSBuZXcgY2hhbm5lbHMgd2hlcmUgV2ViU29ja2V0IGZlYXR1cmVzIGxpdmUgdXNpbmcgdGhlIGBiaW4vcmFpbHMgZ2VuZXJhdGUgY2hhbm5lbGAgY29tbWFuZC5cblxuaW1wb3J0IHsgY3JlYXRlQ29uc3VtZXIgfSBmcm9tICdAcmFpbHMvYWN0aW9uY2FibGUnXG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUNvbnN1bWVyKClcbiIsICIvLyBiYXNlIGRlcGVuZGVuY3kgbGlicmFyeSwgaXQgc2hvdWxkIGJlIG9ubHkgaW1wb3J0ZWQgYnkgYGFkbWluLnRzYCBhbmQgYGFwcGxpY2F0aW9uLnRzYC5cbi8vXG4vLyBHbG9iYWwgcGF0Y2hlcyAobXVzdCBiZSBmaXJzdClcbmltcG9ydCAnLi9mb3JtX2RhdGFfcGF0Y2gnXG5cbmltcG9ydCAqIGFzIEFjdGl2ZVN0b3JhZ2UgZnJvbSAnQHJhaWxzL2FjdGl2ZXN0b3JhZ2UnXG5pbXBvcnQgQWxwaW5lIGZyb20gJ2FscGluZWpzJ1xuaW1wb3J0ICogYXMgQWN0aW9uQ2FibGUgZnJvbSBcIkByYWlscy9hY3Rpb25jYWJsZVwiXG4vLyBAdHMtaWdub3JlIC0gQGhvdHdpcmVkL3R1cmJvLXJhaWxzIGhhcyBubyB0eXBlIGRlZmluaXRpb25zLCB1c2VzIEBob3R3aXJlZC90dXJibyB0eXBlc1xuaW1wb3J0IHsgVHVyYm8gfSBmcm9tIFwiQGhvdHdpcmVkL3R1cmJvLXJhaWxzXCJcbmltcG9ydCB7IFN0cmVhbUFjdGlvbnMgfSBmcm9tIFwiQGhvdHdpcmVkL3R1cmJvXCJcbmltcG9ydCAnLi9jb250cm9sbGVycydcbmltcG9ydCAnLi9jbGlwYm9hcmRfdXRpbHMnXG5pbXBvcnQgJy4vc2RrX3V0aWxzJ1xuaW1wb3J0ICcuL3N0aW11bHVzX3ZhbGlkYXRvcidcbmltcG9ydCAnLi9jaGFubmVscydcblxuQWN0aXZlU3RvcmFnZS5zdGFydCgpXG53aW5kb3cuQWN0aW9uQ2FibGUgPSBBY3Rpb25DYWJsZVxuXG5BbHBpbmUuc3RhcnQoKVxud2luZG93LkFscGluZSA9IEFscGluZVxuXG4vLyBUdXJibyBjb25maWd1cmF0aW9uOiBFbmFibGUgRHJpdmUgZm9yIGZ1bGwgU1BBIGV4cGVyaWVuY2Vcbi8vIFR1cmJvIERyaXZlIGlzIG5vdyBlbmFibGVkIGJ5IGRlZmF1bHQgKHJlcGxhY2VkIFJhaWxzLVVKUylcbndpbmRvdy5UdXJibyA9IFR1cmJvXG5cbi8vIEdsb2JhbCBmdW5jdGlvbiB0byByZXN0b3JlIGRpc2FibGVkIGJ1dHRvbnMgKGZvciBBY3Rpb25DYWJsZSBjYWxsYmFja3MpXG53aW5kb3cucmVzdG9yZUJ1dHRvblN0YXRlcyA9IGZ1bmN0aW9uKCk6IHZvaWQge1xuICBjb25zdCBkaXNhYmxlZEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxJbnB1dEVsZW1lbnQgfCBIVE1MQnV0dG9uRWxlbWVudD4oXG4gICAgJ2lucHV0W3R5cGU9XCJzdWJtaXRcIl1bZGlzYWJsZWRdLCBidXR0b25bdHlwZT1cInN1Ym1pdFwiXVtkaXNhYmxlZF0sIGJ1dHRvbjpub3QoW3R5cGVdKVtkaXNhYmxlZF0nXG4gIClcblxuICBkaXNhYmxlZEJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uOiBIVE1MSW5wdXRFbGVtZW50IHwgSFRNTEJ1dHRvbkVsZW1lbnQpID0+IHtcbiAgICBidXR0b24uZGlzYWJsZWQgPSBmYWxzZVxuICAgIC8vIFJlc3RvcmUgb3JpZ2luYWwgdGV4dCBpZiBkYXRhLWRpc2FibGUtd2l0aCB3YXMgdXNlZFxuICAgIGNvbnN0IG9yaWdpbmFsVGV4dCA9IGJ1dHRvbi5kYXRhc2V0Lm9yaWdpbmFsVGV4dFxuICAgIGlmIChvcmlnaW5hbFRleHQpIHtcbiAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IG9yaWdpbmFsVGV4dFxuICAgICAgZGVsZXRlIGJ1dHRvbi5kYXRhc2V0Lm9yaWdpbmFsVGV4dFxuICAgIH1cbiAgICAvLyBSZW1vdmUgbG9hZGluZyBjbGFzcyBpZiBwcmVzZW50XG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2xvYWRpbmcnKVxuICB9KVxufVxuXG4vLyBMZWdhY3kgUmFpbHMtVUpTIGNvbXBhdGliaWxpdHk6IGF1dG8tY29udmVydCBhdHRyaWJ1dGVzIHRvIFR1cmJvIGVxdWl2YWxlbnRzXG5mdW5jdGlvbiBjb252ZXJ0TGVnYWN5QXR0cmlidXRlcygpOiB2b2lkIHtcbiAgLy8gZGF0YS1tZXRob2QgXHUyMTkyIGRhdGEtdHVyYm8tbWV0aG9kXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTEVsZW1lbnQ+KCdbZGF0YS1tZXRob2RdOm5vdChbZGF0YS10dXJiby1tZXRob2RdKScpLmZvckVhY2goZWwgPT4ge1xuICAgIGNvbnN0IG1ldGhvZCA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1tZXRob2QnKVxuICAgIGlmIChtZXRob2QgJiYgbWV0aG9kICE9PSAnZ2V0Jykge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdkYXRhLXR1cmJvLW1ldGhvZCcsIG1ldGhvZClcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1tZXRob2QnKVxuICAgIH1cbiAgfSlcblxuICAvLyBkYXRhLWNvbmZpcm0gXHUyMTkyIGRhdGEtdHVyYm8tY29uZmlybVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxFbGVtZW50PignW2RhdGEtY29uZmlybV06bm90KFtkYXRhLXR1cmJvLWNvbmZpcm1dKScpLmZvckVhY2goZWwgPT4ge1xuICAgIGNvbnN0IGNvbmZpcm0gPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29uZmlybScpXG4gICAgaWYgKGNvbmZpcm0pIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGF0YS10dXJiby1jb25maXJtJywgY29uZmlybSlcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1jb25maXJtJylcbiAgICB9XG4gIH0pXG5cbiAgLy8gUmVtb3ZlIGRhdGEtcmVtb3RlPVwidHJ1ZVwiIChUdXJibyBoYW5kbGVzIGJ5IGRlZmF1bHQpXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTEVsZW1lbnQ+KCdbZGF0YS1yZW1vdGU9XCJ0cnVlXCJdJykuZm9yRWFjaChlbCA9PiB7XG4gICAgZWwucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXJlbW90ZScpXG4gIH0pXG5cbiAgLy8gZGF0YS1kaXNhYmxlLXdpdGggXHUyMTkyIGRhdGEtdHVyYm8tc3VibWl0cy13aXRoIChza2lwIGlmIHR1cmJvIGlzIGRpc2FibGVkKVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxFbGVtZW50PignW2RhdGEtZGlzYWJsZS13aXRoXTpub3QoW2RhdGEtdHVyYm8tc3VibWl0cy13aXRoXSknKS5mb3JFYWNoKGVsID0+IHtcbiAgICAvLyBTa2lwIGlmIGVsZW1lbnQgb3IgaXRzIHBhcmVudCBmb3JtIGhhcyBkYXRhLXR1cmJvPVwiZmFsc2VcIlxuICAgIGlmIChlbC5kYXRhc2V0LnR1cmJvID09PSAnZmFsc2UnKSByZXR1cm5cbiAgICBjb25zdCBwYXJlbnRGb3JtID0gZWwuY2xvc2VzdCgnZm9ybScpXG4gICAgaWYgKHBhcmVudEZvcm0/LmRhdGFzZXQudHVyYm8gPT09ICdmYWxzZScpIHJldHVyblxuXG4gICAgY29uc3QgdGV4dCA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1kaXNhYmxlLXdpdGgnKVxuICAgIGlmICh0ZXh0KSB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdHVyYm8tc3VibWl0cy13aXRoJywgdGV4dClcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1kaXNhYmxlLXdpdGgnKVxuICAgIH1cbiAgfSlcbn1cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGNvbnZlcnRMZWdhY3lBdHRyaWJ1dGVzKVxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndHVyYm86bG9hZCcsIGNvbnZlcnRMZWdhY3lBdHRyaWJ1dGVzKVxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndHVyYm86ZnJhbWUtbG9hZCcsIGNvbnZlcnRMZWdhY3lBdHRyaWJ1dGVzKVxuXG4vLyBIYW5kbGUgZGF0YS1kaXNhYmxlLXdpdGggZm9yIGZvcm1zIHdpdGggZGF0YS10dXJibz1cImZhbHNlXCIgKGxpa2UgT0F1dGgpXG4vLyBTaW5jZSBUdXJibyBpcyBkaXNhYmxlZCwgd2UgbmVlZCB0byBtYW51YWxseSBoYW5kbGUgc3VibWl0IGVsZW1lbnQgZGlzYWJsZS9lbmFibGVcbmZ1bmN0aW9uIGhhbmRsZU5vblR1cmJvRm9ybVN1Ym1pdChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgY29uc3QgZm9ybSA9IGV2ZW50LnRhcmdldCBhcyBIVE1MRm9ybUVsZW1lbnRcbiAgY29uc3Qgc3VibWl0ID0gZm9ybS5xdWVyeVNlbGVjdG9yPEhUTUxCdXR0b25FbGVtZW50IHwgSFRNTElucHV0RWxlbWVudD4oXG4gICAgJ2J1dHRvblt0eXBlPVwic3VibWl0XCJdLCBidXR0b246bm90KFt0eXBlXSksIGlucHV0W3R5cGU9XCJzdWJtaXRcIl0nXG4gIClcblxuICAvLyBDaGVjayBpZiB0dXJibyBpcyBkaXNhYmxlZFxuICBjb25zdCBpc1R1cmJvRGlzYWJsZWQgPSBmb3JtLmRhdGFzZXQudHVyYm8gPT09ICdmYWxzZScgfHwgc3VibWl0Py5kYXRhc2V0LnR1cmJvID09PSAnZmFsc2UnXG5cbiAgaWYgKGlzVHVyYm9EaXNhYmxlZCAmJiBzdWJtaXQ/LmRhdGFzZXQuZGlzYWJsZVdpdGgpIHtcbiAgICBjb25zdCBpc0J1dHRvbiA9IHN1Ym1pdCBpbnN0YW5jZW9mIEhUTUxCdXR0b25FbGVtZW50XG4gICAgY29uc3Qga2V5ID0gaXNCdXR0b24gPyAndGV4dENvbnRlbnQnIDogJ3ZhbHVlJ1xuICAgIHN1Ym1pdC5kYXRhc2V0Lm9yaWdpbmFsVGV4dCA9IHN1Ym1pdFtrZXldIHx8ICcnXG4gICAgc3VibWl0W2tleV0gPSBzdWJtaXQuZGF0YXNldC5kaXNhYmxlV2l0aFxuICAgIHN1Ym1pdC5kaXNhYmxlZCA9IHRydWVcbiAgfVxufVxuXG4vLyBSZS1lbmFibGUgc3VibWl0IGVsZW1lbnRzIHdoZW4gcGFnZSBiZWNvbWVzIHZpc2libGUgKGUuZy4sIHN3aXRjaGluZyBiYWNrIGZyb20gcGF5bWVudCB3aW5kb3cpXG5mdW5jdGlvbiBoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlKCk6IHZvaWQge1xuICBpZiAoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSAndmlzaWJsZScpIHtcbiAgICBjb25zdCBzZWxlY3RvciA9ICdmb3JtW2RhdGEtdHVyYm89XCJmYWxzZVwiXSBbZGlzYWJsZWRdW2RhdGEtb3JpZ2luYWwtdGV4dF0sIFtkYXRhLXR1cmJvPVwiZmFsc2VcIl1bZGlzYWJsZWRdW2RhdGEtb3JpZ2luYWwtdGV4dF0nXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbDxIVE1MQnV0dG9uRWxlbWVudCB8IEhUTUxJbnB1dEVsZW1lbnQ+KHNlbGVjdG9yKS5mb3JFYWNoKHN1Ym1pdCA9PiB7XG4gICAgICBzdWJtaXQuZGlzYWJsZWQgPSBmYWxzZVxuICAgICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gc3VibWl0LmRhdGFzZXQub3JpZ2luYWxUZXh0XG4gICAgICBpZiAob3JpZ2luYWxUZXh0KSB7XG4gICAgICAgIGNvbnN0IGtleSA9IHN1Ym1pdCBpbnN0YW5jZW9mIEhUTUxCdXR0b25FbGVtZW50ID8gJ3RleHRDb250ZW50JyA6ICd2YWx1ZSdcbiAgICAgICAgc3VibWl0W2tleV0gPSBvcmlnaW5hbFRleHRcbiAgICAgICAgZGVsZXRlIHN1Ym1pdC5kYXRhc2V0Lm9yaWdpbmFsVGV4dFxuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgaGFuZGxlTm9uVHVyYm9Gb3JtU3VibWl0KVxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UpXG5cbi8vIFJlZ2lzdGVyIGN1c3RvbSBUdXJibyBTdHJlYW0gYWN0aW9uIGZvciBhc3luYyBqb2IgZXJyb3JzXG5TdHJlYW1BY3Rpb25zLnJlcG9ydF9hc3luY19lcnJvciA9IGZ1bmN0aW9uKHRoaXM6IGFueSkge1xuICBjb25zdCBlcnJvckRhdGEgPSBKU09OLnBhcnNlKHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLWVycm9yJykgfHwgJ3t9JylcblxuICBpZiAod2luZG93LmVycm9ySGFuZGxlcikge1xuICAgIHdpbmRvdy5lcnJvckhhbmRsZXIuaGFuZGxlRXJyb3Ioe1xuICAgICAgdHlwZTogJ2FzeW5jam9iJyxcbiAgICAgIG1lc3NhZ2U6IGVycm9yRGF0YS5tZXNzYWdlIHx8ICdBc3luYyBqb2IgZXJyb3Igb2NjdXJyZWQnLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBqb2JfY2xhc3M6IGVycm9yRGF0YS5qb2JfY2xhc3MsXG4gICAgICBqb2JfaWQ6IGVycm9yRGF0YS5qb2JfaWQsXG4gICAgICBxdWV1ZTogZXJyb3JEYXRhLnF1ZXVlLFxuICAgICAgZXhjZXB0aW9uX2NsYXNzOiBlcnJvckRhdGEuZXhjZXB0aW9uX2NsYXNzLFxuICAgICAgYmFja3RyYWNlOiBlcnJvckRhdGEuYmFja3RyYWNlLFxuICAgICAgZGV0YWlsczogZXJyb3JEYXRhXG4gICAgfSlcbiAgfVxufVxuXG4vLyBSZWdpc3RlciBjdXN0b20gVHVyYm8gU3RyZWFtIGFjdGlvbiBmb3IgcmVkaXJlY3Qgd2l0aCB0dXJibzogZmFsc2VcblN0cmVhbUFjdGlvbnMucmVkaXJlY3QgPSBmdW5jdGlvbih0aGlzOiBhbnkpIHtcbiAgY29uc3QgdXJsID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ3VybCcpXG4gIGNvbnN0IHR1cmJvID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHVyYm8nKVxuXG4gIGlmICh1cmwpIHtcbiAgICBpZiAodHVyYm8gPT09ICdmYWxzZScpIHtcbiAgICAgIC8vIEZ1bGwgcGFnZSByZWRpcmVjdCAodHVyYm86IGZhbHNlKVxuICAgICAgLy8gQ2hlY2sgaWYgaW4gaWZyYW1lIGFuZCBvcGVuIGluIG5ldyB3aW5kb3cgdG8gYXZvaWQgWC1GcmFtZS1PcHRpb25zIGVycm9yc1xuICAgICAgaWYgKHdpbmRvdy5zZWxmICE9PSB3aW5kb3cucGFyZW50KSB7XG4gICAgICAgIC8vIEluIGlmcmFtZSwgb3BlbiBpbiBuZXcgd2luZG93XG4gICAgICAgIHdpbmRvdy5vcGVuKHVybCwgJ19ibGFuaycpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBOb3JtYWwgcmVkaXJlY3RcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmxcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVHVyYm8gbmF2aWdhdGlvblxuICAgICAgVHVyYm8udmlzaXQodXJsKVxuICAgIH1cbiAgfVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7QUFBQSxJQUFPO0FBQVA7QUFBQTtBQUFBLElBQU8sbUJBQVE7QUFBQSxNQUNiLFFBQVEsT0FBTyxZQUFZLGNBQWMsVUFBVTtBQUFBLE1BQ25ELFdBQVcsT0FBTyxjQUFjLGNBQWMsWUFBWTtBQUFBLElBQzVEO0FBQUE7QUFBQTs7O0FDSEEsSUFjTztBQWRQO0FBQUE7QUFBQTtBQWNBLElBQU8saUJBQVE7QUFBQSxNQUNiLE9BQU8sVUFBVTtBQUNmLFlBQUksS0FBSyxTQUFTO0FBQ2hCLG1CQUFTLEtBQUssS0FBSyxJQUFJLENBQUM7QUFDeEIsMkJBQVMsT0FBTyxJQUFJLGlCQUFpQixHQUFHLFFBQVE7QUFBQSxRQUNsRDtBQUFBLE1BQ0Y7QUFBQSxJQUNGO0FBQUE7QUFBQTs7O0FDckJBLElBS01BLE1BRUFDLGVBRUFDLG9CQWtIQztBQTNIUDtBQUFBO0FBQUE7QUFLQSxJQUFNRixPQUFNLE9BQU0sb0JBQUksS0FBSyxHQUFFLFFBQVE7QUFFckMsSUFBTUMsZ0JBQWUsV0FBU0QsS0FBSSxJQUFJLFFBQVE7QUFFOUMsSUFBTUUscUJBQU4sTUFBd0I7QUFBQSxNQUN0QixZQUFZLFlBQVk7QUFDdEIsYUFBSyxzQkFBc0IsS0FBSyxvQkFBb0IsS0FBSyxJQUFJO0FBQzdELGFBQUssYUFBYTtBQUNsQixhQUFLLG9CQUFvQjtBQUFBLE1BQzNCO0FBQUEsTUFFQSxRQUFRO0FBQ04sWUFBSSxDQUFDLEtBQUssVUFBVSxHQUFHO0FBQ3JCLGVBQUssWUFBWUYsS0FBSTtBQUNyQixpQkFBTyxLQUFLO0FBQ1osZUFBSyxhQUFhO0FBQ2xC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QU0sSUFBSTtBQUMvQixZQUFNLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxFQUFFLENBQUMsSUFBSSxZQUFZO0FBQzNDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLEVBQUUsQ0FBQyxJQUFJLGFBQWE7QUFDNUMsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxJQUFJLElBQUksQ0FBQyxJQUFJLEtBQUssRUFBRSxDQUFDLElBQUksWUFBWTtBQUMzQyxXQUFLLEtBQUssSUFBSSxNQUFNLE1BQU0sSUFBSTtBQUM5QixZQUFNLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxFQUFFLENBQUMsSUFBSSxhQUFhO0FBQzVDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLEVBQUUsQ0FBQyxJQUFJLGFBQWE7QUFDNUMsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxJQUFJLElBQUksQ0FBQyxJQUFJLEtBQUssRUFBRSxDQUFDLElBQUksV0FBVztBQUMxQyxXQUFLLEtBQUssS0FBSyxNQUFNLE1BQU0sSUFBSTtBQUMvQixZQUFNLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxFQUFFLENBQUMsSUFBSSxhQUFhO0FBQzVDLFdBQUssS0FBSyxJQUFJLE1BQU0sTUFBTSxJQUFJO0FBQzlCLFlBQU0sSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLEVBQUUsQ0FBQyxJQUFJLGFBQWE7QUFDNUMsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxJQUFJLElBQUksQ0FBQyxJQUFJLEtBQUssRUFBRSxFQUFFLElBQUksUUFBUTtBQUN4QyxXQUFLLEtBQUssS0FBSyxNQUFNLE1BQU0sSUFBSTtBQUMvQixZQUFNLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxFQUFFLEVBQUUsSUFBSSxhQUFhO0FBQzdDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLEVBQUUsRUFBRSxJQUFJLGFBQWE7QUFDN0MsV0FBSyxLQUFLLElBQUksTUFBTSxNQUFNLElBQUk7QUFDOUIsWUFBTSxJQUFJLElBQUksQ0FBQyxJQUFJLEtBQUssRUFBRSxFQUFFLElBQUksV0FBVztBQUMzQyxXQUFLLEtBQUssS0FBSyxNQUFNLE1BQU0sSUFBSTtBQUMvQixZQUFNLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxFQUFFLEVBQUUsSUFBSSxhQUFhO0FBQzdDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLEVBQUUsRUFBRSxJQUFJLGFBQWE7QUFDN0MsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLElBQUksWUFBWTtBQUMzQyxXQUFLLEtBQUssSUFBSSxNQUFNLE1BQU0sSUFBSTtBQUM5QixZQUFNLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsSUFBSSxhQUFhO0FBQzVDLFdBQUssS0FBSyxJQUFJLE1BQU0sTUFBTSxJQUFJO0FBQzlCLFlBQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRSxJQUFJLFlBQVk7QUFDNUMsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLElBQUksWUFBWTtBQUMzQyxXQUFLLEtBQUssS0FBSyxNQUFNLE1BQU0sSUFBSTtBQUMvQixZQUFNLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsSUFBSSxZQUFZO0FBQzNDLFdBQUssS0FBSyxJQUFJLE1BQU0sTUFBTSxJQUFJO0FBQzlCLFlBQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRSxJQUFJLFdBQVc7QUFDM0MsV0FBSyxLQUFLLElBQUksTUFBTSxNQUFNLElBQUk7QUFDOUIsWUFBTSxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRSxFQUFFLElBQUksWUFBWTtBQUM1QyxXQUFLLEtBQUssS0FBSyxNQUFNLE1BQU0sSUFBSTtBQUMvQixZQUFNLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsSUFBSSxZQUFZO0FBQzNDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLFlBQVk7QUFDM0MsV0FBSyxLQUFLLElBQUksTUFBTSxNQUFNLElBQUk7QUFDOUIsWUFBTSxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRSxFQUFFLElBQUksYUFBYTtBQUM3QyxXQUFLLEtBQUssSUFBSSxNQUFNLE1BQU0sSUFBSTtBQUM5QixZQUFNLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsSUFBSSxZQUFZO0FBQzNDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLGFBQWE7QUFDNUMsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRSxFQUFFLElBQUksYUFBYTtBQUM3QyxXQUFLLEtBQUssSUFBSSxNQUFNLE1BQU0sSUFBSTtBQUM5QixZQUFNLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsSUFBSSxXQUFXO0FBQzFDLFdBQUssS0FBSyxJQUFJLE1BQU0sTUFBTSxJQUFJO0FBQzlCLFlBQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLGFBQWE7QUFDNUMsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxJQUFJLElBQUksSUFB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TUFBTSxNQUFNLElBQUk7QUFDOUIsWUFBTSxLQUFLLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLGFBQWE7QUFDMUMsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxLQUFLLElBQUksQ0FBQyxNQUFNLEVBQUUsRUFBRSxJQUFJLFVBQVU7QUFDeEMsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxLQUFLLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLGFBQWE7QUFDMUMsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxLQUFLLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLGFBQWE7QUFDMUMsV0FBSyxLQUFLLElBQUksTUFBTSxNQUFNLElBQUk7QUFDOUIsWUFBTSxLQUFLLElBQUksQ0FBQyxNQUFNLEVBQUUsRUFBRSxJQUFJLFdBQVc7QUFDekMsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxLQUFLLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLGFBQWE7QUFDMUMsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxLQUFLLElBQUksQ0FBQyxNQUFNLEVBQUUsRUFBRSxJQUFJLGFBQWE7QUFDM0MsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxLQUFLLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLFlBQVk7QUFDekMsV0FBSyxLQUFLLElBQUksTUFBTSxNQUFNLElBQUk7QUFDOUIsWUFBTSxLQUFLLElBQUksQ0FBQyxNQUFNLEVBQUUsRUFBRSxJQUFJLGFBQWE7QUFDM0MsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxLQUFLLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLFlBQVk7QUFDekMsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxLQUFL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d0JBQXdCO0FBQzVELFNBQVMsaUJBQWlCLG9CQUFvQixzQkFBc0I7QUFHcEUsY0FBYyxxQkFBcUIsV0FBb0I7QUFDckQsUUFBTSxZQUFZLEtBQUssTUFBTSxLQUFLLGFBQWEsWUFBWSxLQUFLLElBQUk7QUFFcEUsTUFBSSxPQUFPLGNBQWM7QUFDdkIsV0FBTyxhQUFhLFlBQVk7QUFBQSxNQUM5QixNQUFNO0FBQUEsTUFDTixTQUFTLFVBQVUsV0FBVztBQUFBLE1BQzlCLFlBQVcsb0JBQUksS0FBSyxHQUFFLFlBQVk7QUFBQSxNQUNsQyxXQUFXLFVBQVU7QUFBQSxNQUNyQixRQUFRLFVBQVU7QUFBQSxNQUNsQixPQUFPLFVBQVU7QUFBQSxNQUNqQixpQkFBaUIsVUFBVTtBQUFBLE1BQzNCLFdBQVcsVUFBVTtBQUFBLE1BQ3JCLFNBQVM7QUFBQSxJQUNYLENBQUM7QUFBQSxFQUNIO0FBQ0Y7QUFHQSxjQUFjLFdBQVcsV0FBb0I7QUFDM0MsUUFBTSxNQUFNLEtBQUssYUFBYSxLQUFLO0FBQ25DLFFBQU0sUUFBUSxLQUFLLGFBQWEsWUFBWTtBQUU1QyxNQUFJLEtBQUs7QUFDUCxRQUFJLFVBQVUsU0FBUztBQUdyQixVQUFJLE9BQU8sU0FBUyxPQUFPLFFBQVE7QUFFakMsZUFBTyxLQUFLLEtBQUssUUFBUTtBQUFBLE1BQzNCLE9BQU87QUFFTCxlQUFPLFNBQVMsT0FBTztBQUFBLE1BQ3pCO0FBQUEsSUFDRixPQUFPO0FBRUwsK0JBQU0sTUFBTSxHQUFHO0FBQUEsSUFDakI7QUFBQSxFQUNGO0FBQ0Y7IiwKICAibmFtZXMiOiBbIm5vdyIsICJzZWNvbmRzU2luY2UiLCAiQ29ubmVjdGlvbk1vbml0b3IiLCAibWVzc2FnZV90eXBlcyIsICJwcm90b2NvbHMiLCAic3VwcG9ydGVkUHJvdG9jb2xzIiwgImluZGV4T2YiLCAiQ29ubmVjdGlvbiIsICJjb25zdW1lciIsICJkYXRhIiwgImVycm9yIiwgImhhbmRsZXIiLCAiZXZlbnQiLCAiZXh0ZW5kIiwgIlN1YnNjcmlwdGlvbiIsICJjb25zdW1lciIsICJkYXRhIiwgIlN1YnNjcmlwdGlvbkd1YXJhbnRvciIsICJTdWJzY3JpcHRpb25zIiwgImNvbnN1bWVyIiwgIlN1YnNjcmlwdGlvbiIsICJzdWJzY3JpcHRpb24iLCAiY3JlYXRlV2ViU29ja2V0VVJMIiwgIkNvbnN1bWVyIiwgIlN1YnNjcmlwdGlvbnMiLCAiZGF0YSIsICJDb25zdW1lciIsICJTdWJzY3JpcHRpb24iLCAiU3Vic2NyaXB0aW9ucyIsICJjcmVhdGVDb25zdW1lciIsICJjcmVhdGVXZWJTb2NrZXRVUkwiLCAiZ2V0Q29uZmlnIiwgImhleCIsICJTcGFya01ENSIsICJyYXciLCAiZXZlbnQiLCAic3RhcnQiLCAiZGlzcGF0Y2hFdmVudCIsICJlcnJvciIsICJhZGQyIiwgImVycm9yMiIsICJjYWNoZSIsICJzdGFydGVkIiwgInN0YXJ0IiwgInN0YXJ0MiIsICJpZCIsICJldmVudCIsICJjb25zdW1lciIsICJkYXRhIiwgImVycm9yIiwgImhhbmRsZXIiLCAiZXZlbnQiLCAic3Vic2NyaXB0aW9uIiwgInN0YXJ0IiwgInN1Ym1pdHRlciIsICJldmVudCIsICJzdHlsZSIsICJkaXNwYXRjaCIsICJkZWJvdW5jZSIsICJjb25maWciLCAicHJlZml4IiwgImxvY2F0aW9uIiwgImVycm9yIiwgImNvb2tpZSIsICJpZCIsICJjbG9uZSIsICJjdHgiLCAibW9ycGhDaGlsZHJlbiIsICJmaW5kQmVzdE1hdGNoIiwgIm1vcnBoTm9kZSIsICJjcmVhdGVNb3JwaENvbnRleHQiLCAibm9ybWFsaXplRWxlbWVudCIsICJub3JtYWxpemVQYXJlbnQiLCAic2Vzc2lvbiIsICJ2aXNpdCIsICJzaXplIiwgInJlY2VudFJlcXVlc3RzIiwgIlR1cmJvIiwgImRvY3VtZW50IiwgImNyZWF0ZUNvbnN1bWVyIiwgIndhbGsiLCAiZGF0YSIsICJldmVudCIsICJ3YWxrIiwgImV2ZW50IiwgInN1Ym1pdHRlciIsICJldmVudCIsICJhcHBsaWNhdGlvbiIsICJlcnJvciIsICJjYW1lbGl6ZSIsICJjYXBpdGFsaXplIiwgImFkZCIsICJmZXRjaCIsICJzZXQiLCAic2l6ZSIsICJtYXRjaCIsICJvbGRWYWx1ZSIsICJlcnJvciIsICJjYXBpdGFsaXplIiwgImNvbnN0cnVjdG9yIiwgIm9ic2VydmVyIiwgInNjb3BlIiwgImV4dGVuZCIsICJhcHBsaWNhdGlvbiIsICJsb2dnZXIiLCAiZWxlbWVudCIsICJjYW1lbGl6ZSIsICJwcmVmaXgiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZGF0YSIsICJlcnJvciIsICJoaXN0b3J5IiwgImV2ZW50IiwgImV2ZW50IiwgImhpc3RvcnkiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZGF0YSIsICJlcnJvciIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJlcnJvciIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJlcnJvciIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJlcnJvciIsICJldmVudCIsICJldmVudCIsICJjaGVja21hcmsiLCAiZXZlbnQiLCAiZXJyb3IiLCAiZGF0YSIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJsb2NhdGlvbiIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJkYXRhIiwgImVycm9yIiwgImV2ZW50IiwgImRhdGEiLCAiZXJyb3IiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZGF0YSIsICJlcnJvciIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJkYXRhIiwgImVycm9yIiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImlkIiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImRhdGEiLCAiZXJyb3IiLCAibG9jYXRpb24iLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAib2JzZXJ2ZXIiLCAiZXJyb3IiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZGF0YSIsICJlcnJvciIsICJlcnJvciIsICJlcnJvciIsICJlcnJvciIsICJvYnNlcnZlciIsICJpZCIsICJldmVudCIsICJjb25maXJtIiwgImV2ZW50Il0KfQo=
