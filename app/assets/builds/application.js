var __defProp = Object.defineProperty;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};

// node_modules/@rails/actioncable/src/adapters.js
var adapters_default;
var init_adapters = __esm({
  "node_modules/@rails/actioncable/src/adapters.js"() {
    adapters_default = {
      logger: typeof console !== "undefined" ? console : void 0,
      WebSocket: typeof WebSocket !== "undefined" ? WebSocket : void 0
    };
  }
});

// node_modules/@rails/actioncable/src/logger.js
var logger_default;
var init_logger = __esm({
  "node_modules/@rails/actioncable/src/logger.js"() {
    init_adapters();
    logger_default = {
      log(...messages) {
        if (this.enabled) {
          messages.push(Date.now());
          adapters_default.logger.log("[ActionCable]", ...messages);
        }
      }
    };
  }
});

// node_modules/@rails/actioncable/src/connection_monitor.js
var now2, secondsSince2, ConnectionMonitor2, connection_monitor_default;
var init_connection_monitor = __esm({
  "node_modules/@rails/actioncable/src/connection_monitor.js"() {
    init_logger();
    now2 = () => (/* @__PURE__ */ new Date()).getTime();
    secondsSince2 = (time) => (now2() - time) / 1e3;
    ConnectionMonitor2 = class {
      constructor(connection) {
        this.visibilityDidChange = this.visibilityDidChange.bind(this);
        this.connection = connection;
        this.reconnectAttempts = 0;
      }
      start() {
        if (!this.isRunning()) {
          this.startedAt = now2();
          delete this.stoppedAt;
          this.startPolling();
          addEventListener("visibilitychange", this.visibilityDidChange);
          logger_default.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`);
        }
      }
      stop() {
        if (this.isRunning()) {
          this.stoppedAt = now2();
          this.stopPolling();
          removeEventListener("visibilitychange", this.visibilityDidChange);
          logger_default.log("ConnectionMonitor stopped");
        }
      }
      isRunning() {
        return this.startedAt && !this.stoppedAt;
      }
      recordMessage() {
        this.pingedAt = now2();
      }
      recordConnect() {
        this.reconnectAttempts = 0;
        delete this.disconnectedAt;
        logger_default.log("ConnectionMonitor recorded connect");
      }
      recordDisconnect() {
        this.disconnectedAt = now2();
        logger_default.log("ConnectionMonitor recorded disconnect");
      }
      // Private
      startPolling() {
        this.stopPolling();
        this.poll();
      }
      stopPolling() {
        clearTimeout(this.pollTimeout);
      }
      poll() {
        this.pollTimeout = setTimeout(
          () => {
            this.reconnectIfStale();
            this.poll();
          },
          this.getPollInterval()
        );
      }
      getPollInterval() {
        const { staleThreshold, reconnectionBackoffRate } = this.constructor;
        const backoff = Math.pow(1 + reconnectionBackoffRate, Math.min(this.reconnectAttempts, 10));
        const jitterMax = this.reconnectAttempts === 0 ? 1 : reconnectionBackoffRate;
        const jitter = jitterMax * Math.random();
        return staleThreshold * 1e3 * backoff * (1 + jitter);
      }
      reconnectIfStale() {
        if (this.connectionIsStale()) {
          logger_default.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${secondsSince2(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`);
          this.reconnectAttempts++;
          if (this.disconnectedRecently()) {
            logger_default.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${secondsSince2(this.disconnectedAt)} s`);
          } else {
            logger_default.log("ConnectionMonitor reopening");
            this.connection.reopen();
          }
        }
      }
      get refreshedAt() {
        return this.pingedAt ? this.pingedAt : this.startedAt;
      }
      connectionIsStale() {
        return secondsSince2(this.refreshedAt) > this.constructor.staleThreshold;
      }
      disconnectedRecently() {
        return this.disconnectedAt && secondsSince2(this.disconnectedAt) < this.constructor.staleThreshold;
      }
      visibilityDidChange() {
        if (document.visibilityState === "visible") {
          setTimeout(
            () => {
              if (this.connectionIsStale() || !this.connection.isOpen()) {
                logger_default.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`);
                this.connection.reopen();
              }
            },
            200
          );
        }
      }
    };
    ConnectionMonitor2.staleThreshold = 6;
    ConnectionMonitor2.reconnectionBackoffRate = 0.15;
    connection_monitor_default = ConnectionMonitor2;
  }
});

// node_modules/@rails/actioncable/src/internal.js
var internal_default;
var init_internal = __esm({
  "node_modules/@rails/actioncable/src/internal.js"() {
    internal_default = {
      "message_types": {
        "welcome": "welcome",
        "disconnect": "disconnect",
        "ping": "ping",
        "confirmation": "confirm_subscription",
        "rejection": "reject_subscription"
      },
      "disconnect_reasons": {
        "unauthorized": "unauthorized",
        "invalid_request": "invalid_request",
        "server_restart": "server_restart",
        "remote": "remote"
      },
      "default_mount_path": "/cable",
      "protocols": [
        "actioncable-v1-json",
        "actioncable-unsupported"
      ]
    };
  }
});

// node_modules/@rails/actioncable/src/connection.js
var message_types2, protocols2, supportedProtocols2, indexOf2, Connection2, connection_default;
var init_connection = __esm({
  "node_modules/@rails/actioncable/src/connection.js"() {
    init_adapters();
    init_connection_monitor();
    init_internal();
    init_logger();
    ({ message_types: message_types2, protocols: protocols2 } = internal_default);
    supportedProtocols2 = protocols2.slice(0, protocols2.length - 1);
    indexOf2 = [].indexOf;
    Connection2 = class {
      constructor(consumer2) {
        this.open = this.open.bind(this);
        this.consumer = consumer2;
        this.subscriptions = this.consumer.subscriptions;
        this.monitor = new connection_monitor_default(this);
        this.disconnected = true;
      }
      send(data2) {
        if (this.isOpen()) {
          this.webSocket.send(JSON.stringify(data2));
          return true;
        } else {
          return false;
        }
      }
      open() {
        if (this.isActive()) {
          logger_default.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`);
          return false;
        } else {
          const socketProtocols = [...protocols2, ...this.consumer.subprotocols || []];
          logger_default.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${socketProtocols}`);
          if (this.webSocket) {
            this.uninstallEventHandlers();
          }
          this.webSocket = new adapters_default.WebSocket(this.consumer.url, socketProtocols);
          this.installEventHandlers();
          this.monitor.start();
          return true;
        }
      }
      close({ allowReconnect } = { allowReconnect: true }) {
        if (!allowReconnect) {
          this.monitor.stop();
        }
        if (this.isOpen()) {
          return this.webSocket.close();
        }
      }
      reopen() {
        logger_default.log(`Reopening WebSocket, current state is ${this.getState()}`);
        if (this.isActive()) {
          try {
            return this.close();
          } catch (error3) {
            logger_default.log("Failed to reopen WebSocket", error3);
          } finally {
            logger_default.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`);
            setTimeout(this.open, this.constructor.reopenDelay);
          }
        } else {
          return this.open();
        }
      }
      getProtocol() {
        if (this.webSocket) {
          return this.webSocket.protocol;
        }
      }
      isOpen() {
        return this.isState("open");
      }
      isActive() {
        return this.isState("open", "connecting");
      }
      triedToReconnect() {
        return this.monitor.reconnectAttempts > 0;
      }
      // Private
      isProtocolSupported() {
        return indexOf2.call(supportedProtocols2, this.getProtocol()) >= 0;
      }
      isState(...states) {
        return indexOf2.call(states, this.getState()) >= 0;
      }
      getState() {
        if (this.webSocket) {
          for (let state in adapters_default.WebSocket) {
            if (adapters_default.WebSocket[state] === this.webSocket.readyState) {
              return state.toLowerCase();
            }
          }
        }
        return null;
      }
      installEventHandlers() {
        for (let eventName in this.events) {
          const handler4 = this.events[eventName].bind(this);
          this.webSocket[`on${eventName}`] = handler4;
        }
      }
      uninstallEventHandlers() {
        for (let eventName in this.events) {
          this.webSocket[`on${eventName}`] = function() {
          };
        }
      }
    };
    Connection2.reopenDelay = 500;
    Connection2.prototype.events = {
      message(event2) {
        if (!this.isProtocolSupported()) {
          return;
        }
        const { identifier, message, reason, reconnect, type } = JSON.parse(event2.data);
        this.monitor.recordMessage();
        switch (type) {
          case message_types2.welcome:
            if (this.triedToReconnect()) {
              this.reconnectAttempted = true;
            }
            this.monitor.recordConnect();
            return this.subscriptions.reload();
          case message_types2.disconnect:
            logger_default.log(`Disconnecting. Reason: ${reason}`);
            return this.close({ allowReconnect: reconnect });
          case message_types2.ping:
            return null;
          case message_types2.confirmation:
            this.subscriptions.confirmSubscription(identifier);
            if (this.reconnectAttempted) {
              this.reconnectAttempted = false;
              return this.subscriptions.notify(identifier, "connected", { reconnected: true });
            } else {
              return this.subscriptions.notify(identifier, "connected", { reconnected: false });
            }
          case message_types2.rejection:
            return this.subscriptions.reject(identifier);
          default:
            return this.subscriptions.notify(identifier, "received", message);
        }
      },
      open() {
        logger_default.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`);
        this.disconnected = false;
        if (!this.isProtocolSupported()) {
          logger_default.log("Protocol is unsupported. Stopping monitor and disconnecting.");
          return this.close({ allowReconnect: false });
        }
      },
      close(event2) {
        logger_default.log("WebSocket onclose event");
        if (this.disconnected) {
          return;
        }
        this.disconnected = true;
        this.monitor.recordDisconnect();
        return this.subscriptions.notifyAll("disconnected", { willAttemptReconnect: this.monitor.isRunning() });
      },
      error() {
        logger_default.log("WebSocket onerror event");
      }
    };
    connection_default = Connection2;
  }
});

// node_modules/@rails/actioncable/src/subscription.js
var extend2, Subscription2;
var init_subscription = __esm({
  "node_modules/@rails/actioncable/src/subscription.js"() {
    extend2 = function(object, properties) {
      if (properties != null) {
        for (let key in properties) {
          const value = properties[key];
          object[key] = value;
        }
      }
      return object;
    };
    Subscription2 = class {
      constructor(consumer2, params = {}, mixin) {
        this.consumer = consumer2;
        this.identifier = JSON.stringify(params);
        extend2(this, mixin);
      }
      // Perform a channel action with the optional data passed as an attribute
      perform(action, data2 = {}) {
        data2.action = action;
        return this.send(data2);
      }
      send(data2) {
        return this.consumer.send({ command: "message", identifier: this.identifier, data: JSON.stringify(data2) });
      }
      unsubscribe() {
        return this.consumer.subscriptions.remove(this);
      }
    };
  }
});

// node_modules/@rails/actioncable/src/subscription_guarantor.js
var SubscriptionGuarantor2, subscription_guarantor_default;
var init_subscription_guarantor = __esm({
  "node_modules/@rails/actioncable/src/subscription_guarantor.js"() {
    init_logger();
    SubscriptionGuarantor2 = class {
      constructor(subscriptions) {
        this.subscriptions = subscriptions;
        this.pendingSubscriptions = [];
      }
      guarantee(subscription) {
        if (this.pendingSubscriptions.indexOf(subscription) == -1) {
          logger_default.log(`SubscriptionGuarantor guaranteeing ${subscription.identifier}`);
          this.pendingSubscriptions.push(subscription);
        } else {
          logger_default.log(`SubscriptionGuarantor already guaranteeing ${subscription.identifier}`);
        }
        this.startGuaranteeing();
      }
      forget(subscription) {
        logger_default.log(`SubscriptionGuarantor forgetting ${subscription.identifier}`);
        this.pendingSubscriptions = this.pendingSubscriptions.filter((s) => s !== subscription);
      }
      startGuaranteeing() {
        this.stopGuaranteeing();
        this.retrySubscribing();
      }
      stopGuaranteeing() {
        clearTimeout(this.retryTimeout);
      }
      retrySubscribing() {
        this.retryTimeout = setTimeout(
          () => {
            if (this.subscriptions && typeof this.subscriptions.subscribe === "function") {
              this.pendingSubscriptions.map((subscription) => {
                logger_default.log(`SubscriptionGuarantor resubscribing ${subscription.identifier}`);
                this.subscriptions.subscribe(subscription);
              });
            }
          },
          500
        );
      }
    };
    subscription_guarantor_default = SubscriptionGuarantor2;
  }
});

// node_modules/@rails/actioncable/src/subscriptions.js
var Subscriptions2;
var init_subscriptions = __esm({
  "node_modules/@rails/actioncable/src/subscriptions.js"() {
    init_subscription();
    init_subscription_guarantor();
    init_logger();
    Subscriptions2 = class {
      constructor(consumer2) {
        this.consumer = consumer2;
        this.guarantor = new subscription_guarantor_default(this);
        this.subscriptions = [];
      }
      create(channelName, mixin) {
        const channel = channelName;
        const params = typeof channel === "object" ? channel : { channel };
        const subscription = new Subscription2(this.consumer, params, mixin);
        return this.add(subscription);
      }
      // Private
      add(subscription) {
        this.subscriptions.push(subscription);
        this.consumer.ensureActiveConnection();
        this.notify(subscription, "initialized");
        this.subscribe(subscription);
        return subscription;
      }
      remove(subscription) {
        this.forget(subscription);
        if (!this.findAll(subscription.identifier).length) {
          this.sendCommand(subscription, "unsubscribe");
        }
        return subscription;
      }
      reject(identifier) {
        return this.findAll(identifier).map((subscription) => {
          this.forget(subscription);
          this.notify(subscription, "rejected");
          return subscription;
        });
      }
      forget(subscription) {
        this.guarantor.forget(subscription);
        this.subscriptions = this.subscriptions.filter((s) => s !== subscription);
        return subscription;
      }
      findAll(identifier) {
        return this.subscriptions.filter((s) => s.identifier === identifier);
      }
      reload() {
        return this.subscriptions.map((subscription) => this.subscribe(subscription));
      }
      notifyAll(callbackName, ...args) {
        return this.subscriptions.map((subscription) => this.notify(subscription, callbackName, ...args));
      }
      notify(subscription, callbackName, ...args) {
        let subscriptions;
        if (typeof subscription === "string") {
          subscriptions = this.findAll(subscription);
        } else {
          subscriptions = [subscription];
        }
        return subscriptions.map((subscription2) => typeof subscription2[callbackName] === "function" ? subscription2[callbackName](...args) : void 0);
      }
      subscribe(subscription) {
        if (this.sendCommand(subscription, "subscribe")) {
          this.guarantor.guarantee(subscription);
        }
      }
      confirmSubscription(identifier) {
        logger_default.log(`Subscription confirmed ${identifier}`);
        this.findAll(identifier).map((subscription) => this.guarantor.forget(subscription));
      }
      sendCommand(subscription, command) {
        const { identifier } = subscription;
        return this.consumer.send({ command, identifier });
      }
    };
  }
});

// node_modules/@rails/actioncable/src/consumer.js
function createWebSocketURL2(url) {
  if (typeof url === "function") {
    url = url();
  }
  if (url && !/^wss?:/i.test(url)) {
    const a = document.createElement("a");
    a.href = url;
    a.href = a.href;
    a.protocol = a.protocol.replace("http", "ws");
    return a.href;
  } else {
    return url;
  }
}
var Consumer2;
var init_consumer = __esm({
  "node_modules/@rails/actioncable/src/consumer.js"() {
    init_connection();
    init_subscriptions();
    Consumer2 = class {
      constructor(url) {
        this._url = url;
        this.subscriptions = new Subscriptions2(this);
        this.connection = new connection_default(this);
        this.subprotocols = [];
      }
      get url() {
        return createWebSocketURL2(this._url);
      }
      send(data2) {
        return this.connection.send(data2);
      }
      connect() {
        return this.connection.open();
      }
      disconnect() {
        return this.connection.close({ allowReconnect: false });
      }
      ensureActiveConnection() {
        if (!this.connection.isActive()) {
          return this.connection.open();
        }
      }
      addSubProtocol(subprotocol) {
        this.subprotocols = [...this.subprotocols, subprotocol];
      }
    };
  }
});

// node_modules/@rails/actioncable/src/index.js
var src_exports = {};
__export(src_exports, {
  Connection: () => connection_default,
  ConnectionMonitor: () => connection_monitor_default,
  Consumer: () => Consumer2,
  INTERNAL: () => internal_default,
  Subscription: () => Subscription2,
  SubscriptionGuarantor: () => subscription_guarantor_default,
  Subscriptions: () => Subscriptions2,
  adapters: () => adapters_default,
  createConsumer: () => createConsumer2,
  createWebSocketURL: () => createWebSocketURL2,
  getConfig: () => getConfig2,
  logger: () => logger_default
});
function createConsumer2(url = getConfig2("url") || internal_default.default_mount_path) {
  return new Consumer2(url);
}
function getConfig2(name) {
  const element = document.head.querySelector(`meta[name='action-cable-${name}']`);
  if (element) {
    return element.getAttribute("content");
  }
}
var init_src = __esm({
  "node_modules/@rails/actioncable/src/index.js"() {
    init_connection();
    init_connection_monitor();
    init_consumer();
    init_internal();
    init_subscription();
    init_subscriptions();
    init_subscription_guarantor();
    init_adapters();
    init_logger();
  }
});

// app/javascript/form_data_patch.ts
(function() {
  const OriginalFormData = window.FormData;
  window.FormData = class PatchedFormData extends OriginalFormData {
    constructor(form) {
      super(form);
      if (form) {
        const disabledFields = form.querySelectorAll(
          "input[disabled][name], textarea[disabled][name], select[disabled][name]"
        );
        disabledFields.forEach((field) => {
          if (field.name && !this.has(field.name)) {
            if (field instanceof HTMLInputElement) {
              if ((field.type === "checkbox" || field.type === "radio") && !field.checked) {
                return;
              }
              if (field.type === "file" && field.files) {
                Array.from(field.files).forEach((file) => {
                  this.append(field.name, file);
                });
                return;
              }
            }
            this.append(field.name, field.value);
          }
        });
      }
    }
  };
  Object.setPrototypeOf(window.FormData, OriginalFormData);
  Object.setPrototypeOf(window.FormData.prototype, OriginalFormData.prototype);
})();

// node_modules/@rails/activestorage/app/assets/javascripts/activestorage.esm.js
var sparkMd5 = {
  exports: {}
};
(function(module, exports) {
  (function(factory) {
    {
      module.exports = factory();
    }
  })(function(undefined$1) {
    var hex_chr = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "a", "b", "c", "d", "e", "f"];
    function md5cycle(x, k) {
      var a = x[0], b = x[1], c = x[2], d = x[3];
      a += (b & c | ~b & d) + k[0] - 680876936 | 0;
      a = (a << 7 | a >>> 25) + b | 0;
      d += (a & b | ~a & c) + k[1] - 389564586 | 0;
      d = (d << 12 | d >>> 20) + a | 0;
      c += (d & a | ~d & b) + k[2] + 606105819 | 0;
      c = (c << 17 | c >>> 15) + d | 0;
      b += (c & d | ~c & a) + k[3] - 1044525330 | 0;
      b = (b << 22 | b >>> 10) + c | 0;
      a += (b & c | ~b & d) + k[4] - 176418897 | 0;
      a = (a << 7 | a >>> 25) + b | 0;
      d += (a & b | ~a & c) + k[5] + 1200080426 | 0;
      d = (d << 12 | d >>> 20) + a | 0;
      c += (d & a | ~d & b) + k[6] - 1473231341 | 0;
      c = (c << 17 | c >>> 15) + d | 0;
      b += (c & d | ~c & a) + k[7] - 45705983 | 0;
      b = (b << 22 | b >>> 10) + c | 0;
      a += (b & c | ~b & d) + k[8] + 1770035416 | 0;
      a = (a << 7 | a >>> 25) + b | 0;
      d += (a & b | ~a & c) + k[9] - 1958414417 | 0;
      d = (d << 12 | d >>> 20) + a | 0;
      c += (d & a | ~d & b) + k[10] - 42063 | 0;
      c = (c << 17 | c >>> 15) + d | 0;
      b += (c & d | ~c & a) + k[11] - 1990404162 | 0;
      b = (b << 22 | b >>> 10) + c | 0;
      a += (b & c | ~b & d) + k[12] + 1804603682 | 0;
      a = (a << 7 | a >>> 25) + b | 0;
      d += (a & b | ~a & c) + k[13] - 40341101 | 0;
      d = (d << 12 | d >>> 20) + a | 0;
      c += (d & a | ~d & b) + k[14] - 1502002290 | 0;
      c = (c << 17 | c >>> 15) + d | 0;
      b += (c & d | ~c & a) + k[15] + 1236535329 | 0;
      b = (b << 22 | b >>> 10) + c | 0;
      a += (b & d | c & ~d) + k[1] - 165796510 | 0;
      a = (a << 5 | a >>> 27) + b | 0;
      d += (a & c | b & ~c) + k[6] - 1069501632 | 0;
      d = (d << 9 | d >>> 23) + a | 0;
      c += (d & b | a & ~b) + k[11] + 643717713 | 0;
      c = (c << 14 | c >>> 18) + d | 0;
      b += (c & a | d & ~a) + k[0] - 373897302 | 0;
      b = (b << 20 | b >>> 12) + c | 0;
      a += (b & d | c & ~d) + k[5] - 701558691 | 0;
      a = (a << 5 | a >>> 27) + b | 0;
      d += (a & c | b & ~c) + k[10] + 38016083 | 0;
      d = (d << 9 | d >>> 23) + a | 0;
      c += (d & b | a & ~b) + k[15] - 660478335 | 0;
      c = (c << 14 | c >>> 18) + d | 0;
      b += (c & a | d & ~a) + k[4] - 405537848 | 0;
      b = (b << 20 | b >>> 12) + c | 0;
      a += (b & d | c & ~d) + k[9] + 568446438 | 0;
      a = (a << 5 | a >>> 27) + b | 0;
      d += (a & c | b & ~c) + k[14] - 1019803690 | 0;
      d = (d << 9 | d >>> 23) + a | 0;
      c += (d & b | a & ~b) + k[3] - 187363961 | 0;
      c = (c << 14 | c >>> 18) + d | 0;
      b += (c & a | d & ~a) + k[8] + 1163531501 | 0;
      b = (b << 20 | b >>> 12) + c | 0;
      a += (b & d | c & ~d) + k[13] - 1444681467 | 0;
      a = (a << 5 | a >>> 27) + b | 0;
      d += (a & c | b & ~c) + k[2] - 51403784 | 0;
      d = (d << 9 | d >>> 23) + a | 0;
      c += (d & b | a & ~b) + k[7] + 1735328473 | 0;
      c = (c << 14 | c >>> 18) + d | 0;
      b += (c & a | d & ~a) + k[12] - 1926607734 | 0;
      b = (b << 20 | b >>> 12) + c | 0;
      a += (b ^ c ^ d) + k[5] - 378558 | 0;
      a = (a << 4 | a >>> 28) + b | 0;
      d += (a ^ b ^ c) + k[8] - 2022574463 | 0;
      d = (d << 11 | d >>> 21) + a | 0;
      c += (d ^ a ^ b) + k[11] + 1839030562 | 0;
      c = (c << 16 | c >>> 16) + d | 0;
      b += (c ^ d ^ a) + k[14] - 35309556 | 0;
      b = (b << 23 | b >>> 9) + c | 0;
      a += (b ^ c ^ d) + k[1] - 1530992060 | 0;
      a = (a << 4 | a >>> 28) + b | 0;
      d += (a ^ b ^ c) + k[4] + 1272893353 | 0;
      d = (d << 11 | d >>> 21) + a | 0;
      c += (d ^ a ^ b) + k[7] - 155497632 | 0;
      c = (c << 16 | c >>> 16) + d | 0;
      b += (c ^ d ^ a) + k[10] - 1094730640 | 0;
      b = (b << 23 | b >>> 9) + c | 0;
      a += (b ^ c ^ d) + k[13] + 681279174 | 0;
      a = (a << 4 | a >>> 28) + b | 0;
      d += (a ^ b ^ c) + k[0] - 358537222 | 0;
      d = (d << 11 | d >>> 21) + a | 0;
      c += (d ^ a ^ b) + k[3] - 722521979 | 0;
      c = (c << 16 | c >>> 16) + d | 0;
      b += (c ^ d ^ a) + k[6] + 76029189 | 0;
      b = (b << 23 | b >>> 9) + c | 0;
      a += (b ^ c ^ d) + k[9] - 640364487 | 0;
      a = (a << 4 | a >>> 28) + b | 0;
      d += (a ^ b ^ c) + k[12] - 421815835 | 0;
      d = (d << 11 | d >>> 21) + a | 0;
      c += (d ^ a ^ b) + k[15] + 530742520 | 0;
      c = (c << 16 | c >>> 16) + d | 0;
      b += (c ^ d ^ a) + k[2] - 995338651 | 0;
      b = (b << 23 | b >>> 9) + c | 0;
      a += (c ^ (b | ~d)) + k[0] - 198630844 | 0;
      a = (a << 6 | a >>> 26) + b | 0;
      d += (b ^ (a | ~c)) + k[7] + 1126891415 | 0;
      d = (d << 10 | d >>> 22) + a | 0;
      c += (a ^ (d | ~b)) + k[14] - 1416354905 | 0;
      c = (c << 15 | c >>> 17) + d | 0;
      b += (d ^ (c | ~a)) + k[5] - 57434055 | 0;
      b = (b << 21 | b >>> 11) + c | 0;
      a += (c ^ (b | ~d)) + k[12] + 1700485571 | 0;
      a = (a << 6 | a >>> 26) + b | 0;
      d += (b ^ (a | ~c)) + k[3] - 1894986606 | 0;
      d = (d << 10 | d >>> 22) + a | 0;
      c += (a ^ (d | ~b)) + k[10] - 1051523 | 0;
      c = (c << 15 | c >>> 17) + d | 0;
      b += (d ^ (c | ~a)) + k[1] - 2054922799 | 0;
      b = (b << 21 | b >>> 11) + c | 0;
      a += (c ^ (b | ~d)) + k[8] + 1873313359 | 0;
      a = (a << 6 | a >>> 26) + b | 0;
      d += (b ^ (a | ~c)) + k[15] - 30611744 | 0;
      d = (d << 10 | d >>> 22) + a | 0;
      c += (a ^ (d | ~b)) + k[6] - 1560198380 | 0;
      c = (c << 15 | c >>> 17) + d | 0;
      b += (d ^ (c | ~a)) + k[13] + 1309151649 | 0;
      b = (b << 21 | b >>> 11) + c | 0;
      a += (c ^ (b | ~d)) + k[4] - 145523070 | 0;
      a = (a << 6 | a >>> 26) + b | 0;
      d += (b ^ (a | ~c)) + k[11] - 1120210379 | 0;
      d = (d << 10 | d >>> 22) + a | 0;
      c += (a ^ (d | ~b)) + k[2] + 718787259 | 0;
      c = (c << 15 | c >>> 17) + d | 0;
      b += (d ^ (c | ~a)) + k[9] - 343485551 | 0;
      b = (b << 21 | b >>> 11) + c | 0;
      x[0] = a + x[0] | 0;
      x[1] = b + x[1] | 0;
      x[2] = c + x[2] | 0;
      x[3] = d + x[3] | 0;
    }
    function md5blk(s) {
      var md5blks = [], i;
      for (i = 0; i < 64; i += 4) {
        md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);
      }
      return md5blks;
    }
    function md5blk_array(a) {
      var md5blks = [], i;
      for (i = 0; i < 64; i += 4) {
        md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);
      }
      return md5blks;
    }
    function md51(s) {
      var n = s.length, state = [1732584193, -271733879, -1732584194, 271733878], i, length, tail, tmp, lo, hi;
      for (i = 64; i <= n; i += 64) {
        md5cycle(state, md5blk(s.substring(i - 64, i)));
      }
      s = s.substring(i - 64);
      length = s.length;
      tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
      for (i = 0; i < length; i += 1) {
        tail[i >> 2] |= s.charCodeAt(i) << (i % 4 << 3);
      }
      tail[i >> 2] |= 128 << (i % 4 << 3);
      if (i > 55) {
        md5cycle(state, tail);
        for (i = 0; i < 16; i += 1) {
          tail[i] = 0;
        }
      }
      tmp = n * 8;
      tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);
      lo = parseInt(tmp[2], 16);
      hi = parseInt(tmp[1], 16) || 0;
      tail[14] = lo;
      tail[15] = hi;
      md5cycle(state, tail);
      return state;
    }
    function md51_array(a) {
      var n = a.length, state = [1732584193, -271733879, -1732584194, 271733878], i, length, tail, tmp, lo, hi;
      for (i = 64; i <= n; i += 64) {
        md5cycle(state, md5blk_array(a.subarray(i - 64, i)));
      }
      a = i - 64 < n ? a.subarray(i - 64) : new Uint8Array(0);
      length = a.length;
      tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
      for (i = 0; i < length; i += 1) {
        tail[i >> 2] |= a[i] << (i % 4 << 3);
      }
      tail[i >> 2] |= 128 << (i % 4 << 3);
      if (i > 55) {
        md5cycle(state, tail);
        for (i = 0; i < 16; i += 1) {
          tail[i] = 0;
        }
      }
      tmp = n * 8;
      tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);
      lo = parseInt(tmp[2], 16);
      hi = parseInt(tmp[1], 16) || 0;
      tail[14] = lo;
      tail[15] = hi;
      md5cycle(state, tail);
      return state;
    }
    function rhex(n) {
      var s = "", j;
      for (j = 0; j < 4; j += 1) {
        s += hex_chr[n >> j * 8 + 4 & 15] + hex_chr[n >> j * 8 & 15];
      }
      return s;
    }
    function hex(x) {
      var i;
      for (i = 0; i < x.length; i += 1) {
        x[i] = rhex(x[i]);
      }
      return x.join("");
    }
    if (hex(md51("hello")) !== "5d41402abc4b2a76b9719d911017c592") ;
    if (typeof ArrayBuffer !== "undefined" && !ArrayBuffer.prototype.slice) {
      (function() {
        function clamp(val, length) {
          val = val | 0 || 0;
          if (val < 0) {
            return Math.max(val + length, 0);
          }
          return Math.min(val, length);
        }
        ArrayBuffer.prototype.slice = function(from, to) {
          var length = this.byteLength, begin = clamp(from, length), end = length, num, target, targetArray, sourceArray;
          if (to !== undefined$1) {
            end = clamp(to, length);
          }
          if (begin > end) {
            return new ArrayBuffer(0);
          }
          num = end - begin;
          target = new ArrayBuffer(num);
          targetArray = new Uint8Array(target);
          sourceArray = new Uint8Array(this, begin, num);
          targetArray.set(sourceArray);
          return target;
        };
      })();
    }
    function toUtf8(str) {
      if (/[\u0080-\uFFFF]/.test(str)) {
        str = unescape(encodeURIComponent(str));
      }
      return str;
    }
    function utf8Str2ArrayBuffer(str, returnUInt8Array) {
      var length = str.length, buff = new ArrayBuffer(length), arr = new Uint8Array(buff), i;
      for (i = 0; i < length; i += 1) {
        arr[i] = str.charCodeAt(i);
      }
      return returnUInt8Array ? arr : buff;
    }
    function arrayBuffer2Utf8Str(buff) {
      return String.fromCharCode.apply(null, new Uint8Array(buff));
    }
    function concatenateArrayBuffers(first, second, returnUInt8Array) {
      var result = new Uint8Array(first.byteLength + second.byteLength);
      result.set(new Uint8Array(first));
      result.set(new Uint8Array(second), first.byteLength);
      return returnUInt8Array ? result : result.buffer;
    }
    function hexToBinaryString(hex2) {
      var bytes = [], length = hex2.length, x;
      for (x = 0; x < length - 1; x += 2) {
        bytes.push(parseInt(hex2.substr(x, 2), 16));
      }
      return String.fromCharCode.apply(String, bytes);
    }
    function SparkMD52() {
      this.reset();
    }
    SparkMD52.prototype.append = function(str) {
      this.appendBinary(toUtf8(str));
      return this;
    };
    SparkMD52.prototype.appendBinary = function(contents) {
      this._buff += contents;
      this._length += contents.length;
      var length = this._buff.length, i;
      for (i = 64; i <= length; i += 64) {
        md5cycle(this._hash, md5blk(this._buff.substring(i - 64, i)));
      }
      this._buff = this._buff.substring(i - 64);
      return this;
    };
    SparkMD52.prototype.end = function(raw2) {
      var buff = this._buff, length = buff.length, i, tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], ret;
      for (i = 0; i < length; i += 1) {
        tail[i >> 2] |= buff.charCodeAt(i) << (i % 4 << 3);
      }
      this._finish(tail, length);
      ret = hex(this._hash);
      if (raw2) {
        ret = hexToBinaryString(ret);
      }
      this.reset();
      return ret;
    };
    SparkMD52.prototype.reset = function() {
      this._buff = "";
      this._length = 0;
      this._hash = [1732584193, -271733879, -1732584194, 271733878];
      return this;
    };
    SparkMD52.prototype.getState = function() {
      return {
        buff: this._buff,
        length: this._length,
        hash: this._hash.slice()
      };
    };
    SparkMD52.prototype.setState = function(state) {
      this._buff = state.buff;
      this._length = state.length;
      this._hash = state.hash;
      return this;
    };
    SparkMD52.prototype.destroy = function() {
      delete this._hash;
      delete this._buff;
      delete this._length;
    };
    SparkMD52.prototype._finish = function(tail, length) {
      var i = length, tmp, lo, hi;
      tail[i >> 2] |= 128 << (i % 4 << 3);
      if (i > 55) {
        md5cycle(this._hash, tail);
        for (i = 0; i < 16; i += 1) {
          tail[i] = 0;
        }
      }
      tmp = this._length * 8;
      tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);
      lo = parseInt(tmp[2], 16);
      hi = parseInt(tmp[1], 16) || 0;
      tail[14] = lo;
      tail[15] = hi;
      md5cycle(this._hash, tail);
    };
    SparkMD52.hash = function(str, raw2) {
      return SparkMD52.hashBinary(toUtf8(str), raw2);
    };
    SparkMD52.hashBinary = function(content, raw2) {
      var hash = md51(content), ret = hex(hash);
      return raw2 ? hexToBinaryString(ret) : ret;
    };
    SparkMD52.ArrayBuffer = function() {
      this.reset();
    };
    SparkMD52.ArrayBuffer.prototype.append = function(arr) {
      var buff = concatenateArrayBuffers(this._buff.buffer, arr, true), length = buff.length, i;
      this._length += arr.byteLength;
      for (i = 64; i <= length; i += 64) {
        md5cycle(this._hash, md5blk_array(buff.subarray(i - 64, i)));
      }
      this._buff = i - 64 < length ? new Uint8Array(buff.buffer.slice(i - 64)) : new Uint8Array(0);
      return this;
    };
    SparkMD52.ArrayBuffer.prototype.end = function(raw2) {
      var buff = this._buff, length = buff.length, tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], i, ret;
      for (i = 0; i < length; i += 1) {
        tail[i >> 2] |= buff[i] << (i % 4 << 3);
      }
      this._finish(tail, length);
      ret = hex(this._hash);
      if (raw2) {
        ret = hexToBinaryString(ret);
      }
      this.reset();
      return ret;
    };
    SparkMD52.ArrayBuffer.prototype.reset = function() {
      this._buff = new Uint8Array(0);
      this._length = 0;
      this._hash = [1732584193, -271733879, -1732584194, 271733878];
      return this;
    };
    SparkMD52.ArrayBuffer.prototype.getState = function() {
      var state = SparkMD52.prototype.getState.call(this);
      state.buff = arrayBuffer2Utf8Str(state.buff);
      return state;
    };
    SparkMD52.ArrayBuffer.prototype.setState = function(state) {
      state.buff = utf8Str2ArrayBuffer(state.buff, true);
      return SparkMD52.prototype.setState.call(this, state);
    };
    SparkMD52.ArrayBuffer.prototype.destroy = SparkMD52.prototype.destroy;
    SparkMD52.ArrayBuffer.prototype._finish = SparkMD52.prototype._finish;
    SparkMD52.ArrayBuffer.hash = function(arr, raw2) {
      var hash = md51_array(new Uint8Array(arr)), ret = hex(hash);
      return raw2 ? hexToBinaryString(ret) : ret;
    };
    return SparkMD52;
  });
})(sparkMd5);
var SparkMD5 = sparkMd5.exports;
var fileSlice = File.prototype.slice || File.prototype.mozSlice || File.prototype.webkitSlice;
var FileChecksum = class _FileChecksum {
  static create(file, callback) {
    const instance = new _FileChecksum(file);
    instance.create(callback);
  }
  constructor(file) {
    this.file = file;
    this.chunkSize = 2097152;
    this.chunkCount = Math.ceil(this.file.size / this.chunkSize);
    this.chunkIndex = 0;
  }
  create(callback) {
    this.callback = callback;
    this.md5Buffer = new SparkMD5.ArrayBuffer();
    this.fileReader = new FileReader();
    this.fileReader.addEventListener("load", (event2) => this.fileReaderDidLoad(event2));
    this.fileReader.addEventListener("error", (event2) => this.fileReaderDidError(event2));
    this.readNextChunk();
  }
  fileReaderDidLoad(event2) {
    this.md5Buffer.append(event2.target.result);
    if (!this.readNextChunk()) {
      const binaryDigest = this.md5Buffer.end(true);
      const base64digest = btoa(binaryDigest);
      this.callback(null, base64digest);
    }
  }
  fileReaderDidError(event2) {
    this.callback(`Error reading ${this.file.name}`);
  }
  readNextChunk() {
    if (this.chunkIndex < this.chunkCount || this.chunkIndex == 0 && this.chunkCount == 0) {
      const start4 = this.chunkIndex * this.chunkSize;
      const end = Math.min(start4 + this.chunkSize, this.file.size);
      const bytes = fileSlice.call(this.file, start4, end);
      this.fileReader.readAsArrayBuffer(bytes);
      this.chunkIndex++;
      return true;
    } else {
      return false;
    }
  }
};
function getMetaValue(name) {
  const element = findElement(document.head, `meta[name="${name}"]`);
  if (element) {
    return element.getAttribute("content");
  }
}
function findElements(root, selector) {
  if (typeof root == "string") {
    selector = root;
    root = document;
  }
  const elements = root.querySelectorAll(selector);
  return toArray(elements);
}
function findElement(root, selector) {
  if (typeof root == "string") {
    selector = root;
    root = document;
  }
  return root.querySelector(selector);
}
function dispatchEvent2(element, type, eventInit = {}) {
  const { disabled } = element;
  const { bubbles, cancelable, detail } = eventInit;
  const event2 = document.createEvent("Event");
  event2.initEvent(type, bubbles || true, cancelable || true);
  event2.detail = detail || {};
  try {
    element.disabled = false;
    element.dispatchEvent(event2);
  } finally {
    element.disabled = disabled;
  }
  return event2;
}
function toArray(value) {
  if (Array.isArray(value)) {
    return value;
  } else if (Array.from) {
    return Array.from(value);
  } else {
    return [].slice.call(value);
  }
}
var BlobRecord = class {
  constructor(file, checksum, url, customHeaders = {}) {
    this.file = file;
    this.attributes = {
      filename: file.name,
      content_type: file.type || "application/octet-stream",
      byte_size: file.size,
      checksum
    };
    this.xhr = new XMLHttpRequest();
    this.xhr.open("POST", url, true);
    this.xhr.responseType = "json";
    this.xhr.setRequestHeader("Content-Type", "application/json");
    this.xhr.setRequestHeader("Accept", "application/json");
    this.xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
    Object.keys(customHeaders).forEach((headerKey) => {
      this.xhr.setRequestHeader(headerKey, customHeaders[headerKey]);
    });
    const csrfToken = getMetaValue("csrf-token");
    if (csrfToken != void 0) {
      this.xhr.setRequestHeader("X-CSRF-Token", csrfToken);
    }
    this.xhr.addEventListener("load", (event2) => this.requestDidLoad(event2));
    this.xhr.addEventListener("error", (event2) => this.requestDidError(event2));
  }
  get status() {
    return this.xhr.status;
  }
  get response() {
    const { responseType, response } = this.xhr;
    if (responseType == "json") {
      return response;
    } else {
      return JSON.parse(response);
    }
  }
  create(callback) {
    this.callback = callback;
    this.xhr.send(JSON.stringify({
      blob: this.attributes
    }));
  }
  requestDidLoad(event2) {
    if (this.status >= 200 && this.status < 300) {
      const { response } = this;
      const { direct_upload } = response;
      delete response.direct_upload;
      this.attributes = response;
      this.directUploadData = direct_upload;
      this.callback(null, this.toJSON());
    } else {
      this.requestDidError(event2);
    }
  }
  requestDidError(event2) {
    this.callback(`Error creating Blob for "${this.file.name}". Status: ${this.status}`);
  }
  toJSON() {
    const result = {};
    for (const key in this.attributes) {
      result[key] = this.attributes[key];
    }
    return result;
  }
};
var BlobUpload = class {
  constructor(blob) {
    this.blob = blob;
    this.file = blob.file;
    const { url, headers } = blob.directUploadData;
    this.xhr = new XMLHttpRequest();
    this.xhr.open("PUT", url, true);
    this.xhr.responseType = "text";
    for (const key in headers) {
      this.xhr.setRequestHeader(key, headers[key]);
    }
    this.xhr.addEventListener("load", (event2) => this.requestDidLoad(event2));
    this.xhr.addEventListener("error", (event2) => this.requestDidError(event2));
  }
  create(callback) {
    this.callback = callback;
    this.xhr.send(this.file.slice());
  }
  requestDidLoad(event2) {
    const { status, response } = this.xhr;
    if (status >= 200 && status < 300) {
      this.callback(null, response);
    } else {
      this.requestDidError(event2);
    }
  }
  requestDidError(event2) {
    this.callback(`Error storing "${this.file.name}". Status: ${this.xhr.status}`);
  }
};
var id = 0;
var DirectUpload = class {
  constructor(file, url, delegate, customHeaders = {}) {
    this.id = ++id;
    this.file = file;
    this.url = url;
    this.delegate = delegate;
    this.customHeaders = customHeaders;
  }
  create(callback) {
    FileChecksum.create(this.file, (error3, checksum) => {
      if (error3) {
        callback(error3);
        return;
      }
      const blob = new BlobRecord(this.file, checksum, this.url, this.customHeaders);
      notify(this.delegate, "directUploadWillCreateBlobWithXHR", blob.xhr);
      blob.create((error4) => {
        if (error4) {
          callback(error4);
        } else {
          const upload = new BlobUpload(blob);
          notify(this.delegate, "directUploadWillStoreFileWithXHR", upload.xhr);
          upload.create((error5) => {
            if (error5) {
              callback(error5);
            } else {
              callback(null, blob.toJSON());
            }
          });
        }
      });
    });
  }
};
function notify(object, methodName, ...messages) {
  if (object && typeof object[methodName] == "function") {
    return object[methodName](...messages);
  }
}
var DirectUploadController = class {
  constructor(input, file) {
    this.input = input;
    this.file = file;
    this.directUpload = new DirectUpload(this.file, this.url, this);
    this.dispatch("initialize");
  }
  start(callback) {
    const hiddenInput = document.createElement("input");
    hiddenInput.type = "hidden";
    hiddenInput.name = this.input.name;
    this.input.insertAdjacentElement("beforebegin", hiddenInput);
    this.dispatch("start");
    this.directUpload.create((error3, attributes) => {
      if (error3) {
        hiddenInput.parentNode.removeChild(hiddenInput);
        this.dispatchError(error3);
      } else {
        hiddenInput.value = attributes.signed_id;
      }
      this.dispatch("end");
      callback(error3);
    });
  }
  uploadRequestDidProgress(event2) {
    const progress = event2.loaded / event2.total * 100;
    if (progress) {
      this.dispatch("progress", {
        progress
      });
    }
  }
  get url() {
    return this.input.getAttribute("data-direct-upload-url");
  }
  dispatch(name, detail = {}) {
    detail.file = this.file;
    detail.id = this.directUpload.id;
    return dispatchEvent2(this.input, `direct-upload:${name}`, {
      detail
    });
  }
  dispatchError(error3) {
    const event2 = this.dispatch("error", {
      error: error3
    });
    if (!event2.defaultPrevented) {
      alert(error3);
    }
  }
  directUploadWillCreateBlobWithXHR(xhr) {
    this.dispatch("before-blob-request", {
      xhr
    });
  }
  directUploadWillStoreFileWithXHR(xhr) {
    this.dispatch("before-storage-request", {
      xhr
    });
    xhr.upload.addEventListener("progress", (event2) => this.uploadRequestDidProgress(event2));
  }
};
var inputSelector = "input[type=file][data-direct-upload-url]:not([disabled])";
var DirectUploadsController = class {
  constructor(form) {
    this.form = form;
    this.inputs = findElements(form, inputSelector).filter((input) => input.files.length);
  }
  start(callback) {
    const controllers = this.createDirectUploadControllers();
    const startNextController = () => {
      const controller = controllers.shift();
      if (controller) {
        controller.start((error3) => {
          if (error3) {
            callback(error3);
            this.dispatch("end");
          } else {
            startNextController();
          }
        });
      } else {
        callback();
        this.dispatch("end");
      }
    };
    this.dispatch("start");
    startNextController();
  }
  createDirectUploadControllers() {
    const controllers = [];
    this.inputs.forEach((input) => {
      toArray(input.files).forEach((file) => {
        const controller = new DirectUploadController(input, file);
        controllers.push(controller);
      });
    });
    return controllers;
  }
  dispatch(name, detail = {}) {
    return dispatchEvent2(this.form, `direct-uploads:${name}`, {
      detail
    });
  }
};
var processingAttribute = "data-direct-uploads-processing";
var submitButtonsByForm = /* @__PURE__ */ new WeakMap();
var started = false;
function start() {
  if (!started) {
    started = true;
    document.addEventListener("click", didClick, true);
    document.addEventListener("submit", didSubmitForm, true);
    document.addEventListener("ajax:before", didSubmitRemoteElement);
  }
}
function didClick(event2) {
  const button = event2.target.closest("button, input");
  if (button && button.type === "submit" && button.form) {
    submitButtonsByForm.set(button.form, button);
  }
}
function didSubmitForm(event2) {
  handleFormSubmissionEvent(event2);
}
function didSubmitRemoteElement(event2) {
  if (event2.target.tagName == "FORM") {
    handleFormSubmissionEvent(event2);
  }
}
function handleFormSubmissionEvent(event2) {
  const form = event2.target;
  if (form.hasAttribute(processingAttribute)) {
    event2.preventDefault();
    return;
  }
  const controller = new DirectUploadsController(form);
  const { inputs } = controller;
  if (inputs.length) {
    event2.preventDefault();
    form.setAttribute(processingAttribute, "");
    inputs.forEach(disable);
    controller.start((error3) => {
      form.removeAttribute(processingAttribute);
      if (error3) {
        inputs.forEach(enable);
      } else {
        submitForm(form);
      }
    });
  }
}
function submitForm(form) {
  let button = submitButtonsByForm.get(form) || findElement(form, "input[type=submit], button[type=submit]");
  if (button) {
    const { disabled } = button;
    button.disabled = false;
    button.focus();
    button.click();
    button.disabled = disabled;
  } else {
    button = document.createElement("input");
    button.type = "submit";
    button.style.display = "none";
    form.appendChild(button);
    button.click();
    form.removeChild(button);
  }
  submitButtonsByForm.delete(form);
}
function disable(input) {
  input.disabled = true;
}
function enable(input) {
  input.disabled = false;
}
function autostart() {
  if (window.ActiveStorage) {
    start();
  }
}
setTimeout(autostart, 1);

// node_modules/alpinejs/dist/module.esm.js
var flushPending = false;
var flushing = false;
var queue = [];
var lastFlushedIndex = -1;
function scheduler(callback) {
  queueJob(callback);
}
function queueJob(job) {
  if (!queue.includes(job))
    queue.push(job);
  queueFlush();
}
function dequeueJob(job) {
  let index = queue.indexOf(job);
  if (index !== -1 && index > lastFlushedIndex)
    queue.splice(index, 1);
}
function queueFlush() {
  if (!flushing && !flushPending) {
    flushPending = true;
    queueMicrotask(flushJobs);
  }
}
function flushJobs() {
  flushPending = false;
  flushing = true;
  for (let i = 0; i < queue.length; i++) {
    queue[i]();
    lastFlushedIndex = i;
  }
  queue.length = 0;
  lastFlushedIndex = -1;
  flushing = false;
}
var reactive;
var effect;
var release;
var raw;
var shouldSchedule = true;
function disableEffectScheduling(callback) {
  shouldSchedule = false;
  callback();
  shouldSchedule = true;
}
function setReactivityEngine(engine) {
  reactive = engine.reactive;
  release = engine.release;
  effect = (callback) => engine.effect(callback, { scheduler: (task) => {
    if (shouldSchedule) {
      scheduler(task);
    } else {
      task();
    }
  } });
  raw = engine.raw;
}
function overrideEffect(override) {
  effect = override;
}
function elementBoundEffect(el) {
  let cleanup2 = () => {
  };
  let wrappedEffect = (callback) => {
    let effectReference = effect(callback);
    if (!el._x_effects) {
      el._x_effects = /* @__PURE__ */ new Set();
      el._x_runEffects = () => {
        el._x_effects.forEach((i) => i());
      };
    }
    el._x_effects.add(effectReference);
    cleanup2 = () => {
      if (effectReference === void 0)
        return;
      el._x_effects.delete(effectReference);
      release(effectReference);
    };
    return effectReference;
  };
  return [wrappedEffect, () => {
    cleanup2();
  }];
}
function watch(getter, callback) {
  let firstTime = true;
  let oldValue;
  let effectReference = effect(() => {
    let value = getter();
    JSON.stringify(value);
    if (!firstTime) {
      queueMicrotask(() => {
        callback(value, oldValue);
        oldValue = value;
      });
    } else {
      oldValue = value;
    }
    firstTime = false;
  });
  return () => release(effectReference);
}
var onAttributeAddeds = [];
var onElRemoveds = [];
var onElAddeds = [];
function onElAdded(callback) {
  onElAddeds.push(callback);
}
function onElRemoved(el, callback) {
  if (typeof callback === "function") {
    if (!el._x_cleanups)
      el._x_cleanups = [];
    el._x_cleanups.push(callback);
  } else {
    callback = el;
    onElRemoveds.push(callback);
  }
}
function onAttributesAdded(callback) {
  onAttributeAddeds.push(callback);
}
function onAttributeRemoved(el, name, callback) {
  if (!el._x_attributeCleanups)
    el._x_attributeCleanups = {};
  if (!el._x_attributeCleanups[name])
    el._x_attributeCleanups[name] = [];
  el._x_attributeCleanups[name].push(callback);
}
function cleanupAttributes(el, names) {
  if (!el._x_attributeCleanups)
    return;
  Object.entries(el._x_attributeCleanups).forEach(([name, value]) => {
    if (names === void 0 || names.includes(name)) {
      value.forEach((i) => i());
      delete el._x_attributeCleanups[name];
    }
  });
}
function cleanupElement(el) {
  el._x_effects?.forEach(dequeueJob);
  while (el._x_cleanups?.length)
    el._x_cleanups.pop()();
}
var observer = new MutationObserver(onMutate);
var currentlyObserving = false;
function startObservingMutations() {
  observer.observe(document, { subtree: true, childList: true, attributes: true, attributeOldValue: true });
  currentlyObserving = true;
}
function stopObservingMutations() {
  flushObserver();
  observer.disconnect();
  currentlyObserving = false;
}
var queuedMutations = [];
function flushObserver() {
  let records = observer.takeRecords();
  queuedMutations.push(() => records.length > 0 && onMutate(records));
  let queueLengthWhenTriggered = queuedMutations.length;
  queueMicrotask(() => {
    if (queuedMutations.length === queueLengthWhenTriggered) {
      while (queuedMutations.length > 0)
        queuedMutations.shift()();
    }
  });
}
function mutateDom(callback) {
  if (!currentlyObserving)
    return callback();
  stopObservingMutations();
  let result = callback();
  startObservingMutations();
  return result;
}
var isCollecting = false;
var deferredMutations = [];
function deferMutations() {
  isCollecting = true;
}
function flushAndStopDeferringMutations() {
  isCollecting = false;
  onMutate(deferredMutations);
  deferredMutations = [];
}
function onMutate(mutations) {
  if (isCollecting) {
    deferredMutations = deferredMutations.concat(mutations);
    return;
  }
  let addedNodes = [];
  let removedNodes = /* @__PURE__ */ new Set();
  let addedAttributes = /* @__PURE__ */ new Map();
  let removedAttributes = /* @__PURE__ */ new Map();
  for (let i = 0; i < mutations.length; i++) {
    if (mutations[i].target._x_ignoreMutationObserver)
      continue;
    if (mutations[i].type === "childList") {
      mutations[i].removedNodes.forEach((node) => {
        if (node.nodeType !== 1)
          return;
        if (!node._x_marker)
          return;
        removedNodes.add(node);
      });
      mutations[i].addedNodes.forEach((node) => {
        if (node.nodeType !== 1)
          return;
        if (removedNodes.has(node)) {
          removedNodes.delete(node);
          return;
        }
        if (node._x_marker)
          return;
        addedNodes.push(node);
      });
    }
    if (mutations[i].type === "attributes") {
      let el = mutations[i].target;
      let name = mutations[i].attributeName;
      let oldValue = mutations[i].oldValue;
      let add22 = () => {
        if (!addedAttributes.has(el))
          addedAttributes.set(el, []);
        addedAttributes.get(el).push({ name, value: el.getAttribute(name) });
      };
      let remove = () => {
        if (!removedAttributes.has(el))
          removedAttributes.set(el, []);
        removedAttributes.get(el).push(name);
      };
      if (el.hasAttribute(name) && oldValue === null) {
        add22();
      } else if (el.hasAttribute(name)) {
        remove();
        add22();
      } else {
        remove();
      }
    }
  }
  removedAttributes.forEach((attrs, el) => {
    cleanupAttributes(el, attrs);
  });
  addedAttributes.forEach((attrs, el) => {
    onAttributeAddeds.forEach((i) => i(el, attrs));
  });
  for (let node of removedNodes) {
    if (addedNodes.some((i) => i.contains(node)))
      continue;
    onElRemoveds.forEach((i) => i(node));
  }
  for (let node of addedNodes) {
    if (!node.isConnected)
      continue;
    onElAddeds.forEach((i) => i(node));
  }
  addedNodes = null;
  removedNodes = null;
  addedAttributes = null;
  removedAttributes = null;
}
function scope(node) {
  return mergeProxies(closestDataStack(node));
}
function addScopeToNode(node, data2, referenceNode) {
  node._x_dataStack = [data2, ...closestDataStack(referenceNode || node)];
  return () => {
    node._x_dataStack = node._x_dataStack.filter((i) => i !== data2);
  };
}
function closestDataStack(node) {
  if (node._x_dataStack)
    return node._x_dataStack;
  if (typeof ShadowRoot === "function" && node instanceof ShadowRoot) {
    return closestDataStack(node.host);
  }
  if (!node.parentNode) {
    return [];
  }
  return closestDataStack(node.parentNode);
}
function mergeProxies(objects) {
  return new Proxy({ objects }, mergeProxyTrap);
}
var mergeProxyTrap = {
  ownKeys({ objects }) {
    return Array.from(
      new Set(objects.flatMap((i) => Object.keys(i)))
    );
  },
  has({ objects }, name) {
    if (name == Symbol.unscopables)
      return false;
    return objects.some(
      (obj) => Object.prototype.hasOwnProperty.call(obj, name) || Reflect.has(obj, name)
    );
  },
  get({ objects }, name, thisProxy) {
    if (name == "toJSON")
      return collapseProxies;
    return Reflect.get(
      objects.find(
        (obj) => Reflect.has(obj, name)
      ) || {},
      name,
      thisProxy
    );
  },
  set({ objects }, name, value, thisProxy) {
    const target = objects.find(
      (obj) => Object.prototype.hasOwnProperty.call(obj, name)
    ) || objects[objects.length - 1];
    const descriptor = Object.getOwnPropertyDescriptor(target, name);
    if (descriptor?.set && descriptor?.get)
      return descriptor.set.call(thisProxy, value) || true;
    return Reflect.set(target, name, value);
  }
};
function collapseProxies() {
  let keys = Reflect.ownKeys(this);
  return keys.reduce((acc, key) => {
    acc[key] = Reflect.get(this, key);
    return acc;
  }, {});
}
function initInterceptors(data2) {
  let isObject2 = (val) => typeof val === "object" && !Array.isArray(val) && val !== null;
  let recurse = (obj, basePath = "") => {
    Object.entries(Object.getOwnPropertyDescriptors(obj)).forEach(([key, { value, enumerable }]) => {
      if (enumerable === false || value === void 0)
        return;
      if (typeof value === "object" && value !== null && value.__v_skip)
        return;
      let path = basePath === "" ? key : `${basePath}.${key}`;
      if (typeof value === "object" && value !== null && value._x_interceptor) {
        obj[key] = value.initialize(data2, path, key);
      } else {
        if (isObject2(value) && value !== obj && !(value instanceof Element)) {
          recurse(value, path);
        }
      }
    });
  };
  return recurse(data2);
}
function interceptor(callback, mutateObj = () => {
}) {
  let obj = {
    initialValue: void 0,
    _x_interceptor: true,
    initialize(data2, path, key) {
      return callback(this.initialValue, () => get(data2, path), (value) => set(data2, path, value), path, key);
    }
  };
  mutateObj(obj);
  return (initialValue) => {
    if (typeof initialValue === "object" && initialValue !== null && initialValue._x_interceptor) {
      let initialize = obj.initialize.bind(obj);
      obj.initialize = (data2, path, key) => {
        let innerValue = initialValue.initialize(data2, path, key);
        obj.initialValue = innerValue;
        return initialize(data2, path, key);
      };
    } else {
      obj.initialValue = initialValue;
    }
    return obj;
  };
}
function get(obj, path) {
  return path.split(".").reduce((carry, segment) => carry[segment], obj);
}
function set(obj, path, value) {
  if (typeof path === "string")
    path = path.split(".");
  if (path.length === 1)
    obj[path[0]] = value;
  else if (path.length === 0)
    throw error;
  else {
    if (obj[path[0]])
      return set(obj[path[0]], path.slice(1), value);
    else {
      obj[path[0]] = {};
      return set(obj[path[0]], path.slice(1), value);
    }
  }
}
var magics = {};
function magic(name, callback) {
  magics[name] = callback;
}
function injectMagics(obj, el) {
  let memoizedUtilities = getUtilities(el);
  Object.entries(magics).forEach(([name, callback]) => {
    Object.defineProperty(obj, `$${name}`, {
      get() {
        return callback(el, memoizedUtilities);
      },
      enumerable: false
    });
  });
  return obj;
}
function getUtilities(el) {
  let [utilities, cleanup2] = getElementBoundUtilities(el);
  let utils = { interceptor, ...utilities };
  onElRemoved(el, cleanup2);
  return utils;
}
function tryCatch(el, expression, callback, ...args) {
  try {
    return callback(...args);
  } catch (e) {
    handleError(e, el, expression);
  }
}
function handleError(error22, el, expression = void 0) {
  error22 = Object.assign(
    error22 ?? { message: "No error message given." },
    { el, expression }
  );
  console.warn(`Alpine Expression Error: ${error22.message}

${expression ? 'Expression: "' + expression + '"\n\n' : ""}`, el);
  setTimeout(() => {
    throw error22;
  }, 0);
}
var shouldAutoEvaluateFunctions = true;
function dontAutoEvaluateFunctions(callback) {
  let cache2 = shouldAutoEvaluateFunctions;
  shouldAutoEvaluateFunctions = false;
  let result = callback();
  shouldAutoEvaluateFunctions = cache2;
  return result;
}
function evaluate(el, expression, extras = {}) {
  let result;
  evaluateLater(el, expression)((value) => result = value, extras);
  return result;
}
function evaluateLater(...args) {
  return theEvaluatorFunction(...args);
}
var theEvaluatorFunction = normalEvaluator;
function setEvaluator(newEvaluator) {
  theEvaluatorFunction = newEvaluator;
}
function normalEvaluator(el, expression) {
  let overriddenMagics = {};
  injectMagics(overriddenMagics, el);
  let dataStack = [overriddenMagics, ...closestDataStack(el)];
  let evaluator = typeof expression === "function" ? generateEvaluatorFromFunction(dataStack, expression) : generateEvaluatorFromString(dataStack, expression, el);
  return tryCatch.bind(null, el, expression, evaluator);
}
function generateEvaluatorFromFunction(dataStack, func) {
  return (receiver = () => {
  }, { scope: scope2 = {}, params = [] } = {}) => {
    let result = func.apply(mergeProxies([scope2, ...dataStack]), params);
    runIfTypeOfFunction(receiver, result);
  };
}
var evaluatorMemo = {};
function generateFunctionFromString(expression, el) {
  if (evaluatorMemo[expression]) {
    return evaluatorMemo[expression];
  }
  let AsyncFunction = Object.getPrototypeOf(async function() {
  }).constructor;
  let rightSideSafeExpression = /^[\n\s]*if.*\(.*\)/.test(expression.trim()) || /^(let|const)\s/.test(expression.trim()) ? `(async()=>{ ${expression} })()` : expression;
  const safeAsyncFunction = () => {
    try {
      let func2 = new AsyncFunction(
        ["__self", "scope"],
        `with (scope) { __self.result = ${rightSideSafeExpression} }; __self.finished = true; return __self.result;`
      );
      Object.defineProperty(func2, "name", {
        value: `[Alpine] ${expression}`
      });
      return func2;
    } catch (error22) {
      handleError(error22, el, expression);
      return Promise.resolve();
    }
  };
  let func = safeAsyncFunction();
  evaluatorMemo[expression] = func;
  return func;
}
function generateEvaluatorFromString(dataStack, expression, el) {
  let func = generateFunctionFromString(expression, el);
  return (receiver = () => {
  }, { scope: scope2 = {}, params = [] } = {}) => {
    func.result = void 0;
    func.finished = false;
    let completeScope = mergeProxies([scope2, ...dataStack]);
    if (typeof func === "function") {
      let promise = func(func, completeScope).catch((error22) => handleError(error22, el, expression));
      if (func.finished) {
        runIfTypeOfFunction(receiver, func.result, completeScope, params, el);
        func.result = void 0;
      } else {
        promise.then((result) => {
          runIfTypeOfFunction(receiver, result, completeScope, params, el);
        }).catch((error22) => handleError(error22, el, expression)).finally(() => func.result = void 0);
      }
    }
  };
}
function runIfTypeOfFunction(receiver, value, scope2, params, el) {
  if (shouldAutoEvaluateFunctions && typeof value === "function") {
    let result = value.apply(scope2, params);
    if (result instanceof Promise) {
      result.then((i) => runIfTypeOfFunction(receiver, i, scope2, params)).catch((error22) => handleError(error22, el, value));
    } else {
      receiver(result);
    }
  } else if (typeof value === "object" && value instanceof Promise) {
    value.then((i) => receiver(i));
  } else {
    receiver(value);
  }
}
var prefixAsString = "x-";
function prefix(subject = "") {
  return prefixAsString + subject;
}
function setPrefix(newPrefix) {
  prefixAsString = newPrefix;
}
var directiveHandlers = {};
function directive(name, callback) {
  directiveHandlers[name] = callback;
  return {
    before(directive2) {
      if (!directiveHandlers[directive2]) {
        console.warn(String.raw`Cannot find directive \`${directive2}\`. \`${name}\` will use the default order of execution`);
        return;
      }
      const pos = directiveOrder.indexOf(directive2);
      directiveOrder.splice(pos >= 0 ? pos : directiveOrder.indexOf("DEFAULT"), 0, name);
    }
  };
}
function directiveExists(name) {
  return Object.keys(directiveHandlers).includes(name);
}
function directives(el, attributes, originalAttributeOverride) {
  attributes = Array.from(attributes);
  if (el._x_virtualDirectives) {
    let vAttributes = Object.entries(el._x_virtualDirectives).map(([name, value]) => ({ name, value }));
    let staticAttributes = attributesOnly(vAttributes);
    vAttributes = vAttributes.map((attribute) => {
      if (staticAttributes.find((attr) => attr.name === attribute.name)) {
        return {
          name: `x-bind:${attribute.name}`,
          value: `"${attribute.value}"`
        };
      }
      return attribute;
    });
    attributes = attributes.concat(vAttributes);
  }
  let transformedAttributeMap = {};
  let directives2 = attributes.map(toTransformedAttributes((newName, oldName) => transformedAttributeMap[newName] = oldName)).filter(outNonAlpineAttributes).map(toParsedDirectives(transformedAttributeMap, originalAttributeOverride)).sort(byPriority);
  return directives2.map((directive2) => {
    return getDirectiveHandler(el, directive2);
  });
}
function attributesOnly(attributes) {
  return Array.from(attributes).map(toTransformedAttributes()).filter((attr) => !outNonAlpineAttributes(attr));
}
var isDeferringHandlers = false;
var directiveHandlerStacks = /* @__PURE__ */ new Map();
var currentHandlerStackKey = Symbol();
function deferHandlingDirectives(callback) {
  isDeferringHandlers = true;
  let key = Symbol();
  currentHandlerStackKey = key;
  directiveHandlerStacks.set(key, []);
  let flushHandlers = () => {
    while (directiveHandlerStacks.get(key).length)
      directiveHandlerStacks.get(key).shift()();
    directiveHandlerStacks.delete(key);
  };
  let stopDeferring = () => {
    isDeferringHandlers = false;
    flushHandlers();
  };
  callback(flushHandlers);
  stopDeferring();
}
function getElementBoundUtilities(el) {
  let cleanups = [];
  let cleanup2 = (callback) => cleanups.push(callback);
  let [effect3, cleanupEffect] = elementBoundEffect(el);
  cleanups.push(cleanupEffect);
  let utilities = {
    Alpine: alpine_default,
    effect: effect3,
    cleanup: cleanup2,
    evaluateLater: evaluateLater.bind(evaluateLater, el),
    evaluate: evaluate.bind(evaluate, el)
  };
  let doCleanup = () => cleanups.forEach((i) => i());
  return [utilities, doCleanup];
}
function getDirectiveHandler(el, directive2) {
  let noop = () => {
  };
  let handler4 = directiveHandlers[directive2.type] || noop;
  let [utilities, cleanup2] = getElementBoundUtilities(el);
  onAttributeRemoved(el, directive2.original, cleanup2);
  let fullHandler = () => {
    if (el._x_ignore || el._x_ignoreSelf)
      return;
    handler4.inline && handler4.inline(el, directive2, utilities);
    handler4 = handler4.bind(handler4, el, directive2, utilities);
    isDeferringHandlers ? directiveHandlerStacks.get(currentHandlerStackKey).push(handler4) : handler4();
  };
  fullHandler.runCleanups = cleanup2;
  return fullHandler;
}
var startingWith = (subject, replacement) => ({ name, value }) => {
  if (name.startsWith(subject))
    name = name.replace(subject, replacement);
  return { name, value };
};
var into = (i) => i;
function toTransformedAttributes(callback = () => {
}) {
  return ({ name, value }) => {
    let { name: newName, value: newValue } = attributeTransformers.reduce((carry, transform) => {
      return transform(carry);
    }, { name, value });
    if (newName !== name)
      callback(newName, name);
    return { name: newName, value: newValue };
  };
}
var attributeTransformers = [];
function mapAttributes(callback) {
  attributeTransformers.push(callback);
}
function outNonAlpineAttributes({ name }) {
  return alpineAttributeRegex().test(name);
}
var alpineAttributeRegex = () => new RegExp(`^${prefixAsString}([^:^.]+)\\b`);
function toParsedDirectives(transformedAttributeMap, originalAttributeOverride) {
  return ({ name, value }) => {
    let typeMatch = name.match(alpineAttributeRegex());
    let valueMatch = name.match(/:([a-zA-Z0-9\-_:]+)/);
    let modifiers = name.match(/\.[^.\]]+(?=[^\]]*$)/g) || [];
    let original = originalAttributeOverride || transformedAttributeMap[name] || name;
    return {
      type: typeMatch ? typeMatch[1] : null,
      value: valueMatch ? valueMatch[1] : null,
      modifiers: modifiers.map((i) => i.replace(".", "")),
      expression: value,
      original
    };
  };
}
var DEFAULT = "DEFAULT";
var directiveOrder = [
  "ignore",
  "ref",
  "data",
  "id",
  "anchor",
  "bind",
  "init",
  "for",
  "model",
  "modelable",
  "transition",
  "show",
  "if",
  DEFAULT,
  "teleport"
];
function byPriority(a, b) {
  let typeA = directiveOrder.indexOf(a.type) === -1 ? DEFAULT : a.type;
  let typeB = directiveOrder.indexOf(b.type) === -1 ? DEFAULT : b.type;
  return directiveOrder.indexOf(typeA) - directiveOrder.indexOf(typeB);
}
function dispatch(el, name, detail = {}) {
  el.dispatchEvent(
    new CustomEvent(name, {
      detail,
      bubbles: true,
      // Allows events to pass the shadow DOM barrier.
      composed: true,
      cancelable: true
    })
  );
}
function walk(el, callback) {
  if (typeof ShadowRoot === "function" && el instanceof ShadowRoot) {
    Array.from(el.children).forEach((el2) => walk(el2, callback));
    return;
  }
  let skip = false;
  callback(el, () => skip = true);
  if (skip)
    return;
  let node = el.firstElementChild;
  while (node) {
    walk(node, callback, false);
    node = node.nextElementSibling;
  }
}
function warn(message, ...args) {
  console.warn(`Alpine Warning: ${message}`, ...args);
}
var started2 = false;
function start2() {
  if (started2)
    warn("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems.");
  started2 = true;
  if (!document.body)
    warn("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?");
  dispatch(document, "alpine:init");
  dispatch(document, "alpine:initializing");
  startObservingMutations();
  onElAdded((el) => initTree(el, walk));
  onElRemoved((el) => destroyTree(el));
  onAttributesAdded((el, attrs) => {
    directives(el, attrs).forEach((handle) => handle());
  });
  let outNestedComponents = (el) => !closestRoot(el.parentElement, true);
  Array.from(document.querySelectorAll(allSelectors().join(","))).filter(outNestedComponents).forEach((el) => {
    initTree(el);
  });
  dispatch(document, "alpine:initialized");
  setTimeout(() => {
    warnAboutMissingPlugins();
  });
}
var rootSelectorCallbacks = [];
var initSelectorCallbacks = [];
function rootSelectors() {
  return rootSelectorCallbacks.map((fn) => fn());
}
function allSelectors() {
  return rootSelectorCallbacks.concat(initSelectorCallbacks).map((fn) => fn());
}
function addRootSelector(selectorCallback) {
  rootSelectorCallbacks.push(selectorCallback);
}
function addInitSelector(selectorCallback) {
  initSelectorCallbacks.push(selectorCallback);
}
function closestRoot(el, includeInitSelectors = false) {
  return findClosest(el, (element) => {
    const selectors = includeInitSelectors ? allSelectors() : rootSelectors();
    if (selectors.some((selector) => element.matches(selector)))
      return true;
  });
}
function findClosest(el, callback) {
  if (!el)
    return;
  if (callback(el))
    return el;
  if (el._x_teleportBack)
    el = el._x_teleportBack;
  if (!el.parentElement)
    return;
  return findClosest(el.parentElement, callback);
}
function isRoot(el) {
  return rootSelectors().some((selector) => el.matches(selector));
}
var initInterceptors2 = [];
function interceptInit(callback) {
  initInterceptors2.push(callback);
}
var markerDispenser = 1;
function initTree(el, walker = walk, intercept = () => {
}) {
  if (findClosest(el, (i) => i._x_ignore))
    return;
  deferHandlingDirectives(() => {
    walker(el, (el2, skip) => {
      if (el2._x_marker)
        return;
      intercept(el2, skip);
      initInterceptors2.forEach((i) => i(el2, skip));
      directives(el2, el2.attributes).forEach((handle) => handle());
      if (!el2._x_ignore)
        el2._x_marker = markerDispenser++;
      el2._x_ignore && skip();
    });
  });
}
function destroyTree(root, walker = walk) {
  walker(root, (el) => {
    cleanupElement(el);
    cleanupAttributes(el);
    delete el._x_marker;
  });
}
function warnAboutMissingPlugins() {
  let pluginDirectives = [
    ["ui", "dialog", ["[x-dialog], [x-popover]"]],
    ["anchor", "anchor", ["[x-anchor]"]],
    ["sort", "sort", ["[x-sort]"]]
  ];
  pluginDirectives.forEach(([plugin2, directive2, selectors]) => {
    if (directiveExists(directive2))
      return;
    selectors.some((selector) => {
      if (document.querySelector(selector)) {
        warn(`found "${selector}", but missing ${plugin2} plugin`);
        return true;
      }
    });
  });
}
var tickStack = [];
var isHolding = false;
function nextTick(callback = () => {
}) {
  queueMicrotask(() => {
    isHolding || setTimeout(() => {
      releaseNextTicks();
    });
  });
  return new Promise((res) => {
    tickStack.push(() => {
      callback();
      res();
    });
  });
}
function releaseNextTicks() {
  isHolding = false;
  while (tickStack.length)
    tickStack.shift()();
}
function holdNextTicks() {
  isHolding = true;
}
function setClasses(el, value) {
  if (Array.isArray(value)) {
    return setClassesFromString(el, value.join(" "));
  } else if (typeof value === "object" && value !== null) {
    return setClassesFromObject(el, value);
  } else if (typeof value === "function") {
    return setClasses(el, value());
  }
  return setClassesFromString(el, value);
}
function setClassesFromString(el, classString) {
  let split = (classString2) => classString2.split(" ").filter(Boolean);
  let missingClasses = (classString2) => classString2.split(" ").filter((i) => !el.classList.contains(i)).filter(Boolean);
  let addClassesAndReturnUndo = (classes) => {
    el.classList.add(...classes);
    return () => {
      el.classList.remove(...classes);
    };
  };
  classString = classString === true ? classString = "" : classString || "";
  return addClassesAndReturnUndo(missingClasses(classString));
}
function setClassesFromObject(el, classObject) {
  let split = (classString) => classString.split(" ").filter(Boolean);
  let forAdd = Object.entries(classObject).flatMap(([classString, bool]) => bool ? split(classString) : false).filter(Boolean);
  let forRemove = Object.entries(classObject).flatMap(([classString, bool]) => !bool ? split(classString) : false).filter(Boolean);
  let added = [];
  let removed = [];
  forRemove.forEach((i) => {
    if (el.classList.contains(i)) {
      el.classList.remove(i);
      removed.push(i);
    }
  });
  forAdd.forEach((i) => {
    if (!el.classList.contains(i)) {
      el.classList.add(i);
      added.push(i);
    }
  });
  return () => {
    removed.forEach((i) => el.classList.add(i));
    added.forEach((i) => el.classList.remove(i));
  };
}
function setStyles(el, value) {
  if (typeof value === "object" && value !== null) {
    return setStylesFromObject(el, value);
  }
  return setStylesFromString(el, value);
}
function setStylesFromObject(el, value) {
  let previousStyles = {};
  Object.entries(value).forEach(([key, value2]) => {
    previousStyles[key] = el.style[key];
    if (!key.startsWith("--")) {
      key = kebabCase(key);
    }
    el.style.setProperty(key, value2);
  });
  setTimeout(() => {
    if (el.style.length === 0) {
      el.removeAttribute("style");
    }
  });
  return () => {
    setStyles(el, previousStyles);
  };
}
function setStylesFromString(el, value) {
  let cache2 = el.getAttribute("style", value);
  el.setAttribute("style", value);
  return () => {
    el.setAttribute("style", cache2 || "");
  };
}
function kebabCase(subject) {
  return subject.replace(/([a-z])([A-Z])/g, "$1-$2").toLowerCase();
}
function once(callback, fallback = () => {
}) {
  let called = false;
  return function() {
    if (!called) {
      called = true;
      callback.apply(this, arguments);
    } else {
      fallback.apply(this, arguments);
    }
  };
}
directive("transition", (el, { value, modifiers, expression }, { evaluate: evaluate2 }) => {
  if (typeof expression === "function")
    expression = evaluate2(expression);
  if (expression === false)
    return;
  if (!expression || typeof expression === "boolean") {
    registerTransitionsFromHelper(el, modifiers, value);
  } else {
    registerTransitionsFromClassString(el, expression, value);
  }
});
function registerTransitionsFromClassString(el, classString, stage) {
  registerTransitionObject(el, setClasses, "");
  let directiveStorageMap = {
    "enter": (classes) => {
      el._x_transition.enter.during = classes;
    },
    "enter-start": (classes) => {
      el._x_transition.enter.start = classes;
    },
    "enter-end": (classes) => {
      el._x_transition.enter.end = classes;
    },
    "leave": (classes) => {
      el._x_transition.leave.during = classes;
    },
    "leave-start": (classes) => {
      el._x_transition.leave.start = classes;
    },
    "leave-end": (classes) => {
      el._x_transition.leave.end = classes;
    }
  };
  directiveStorageMap[stage](classString);
}
function registerTransitionsFromHelper(el, modifiers, stage) {
  registerTransitionObject(el, setStyles);
  let doesntSpecify = !modifiers.includes("in") && !modifiers.includes("out") && !stage;
  let transitioningIn = doesntSpecify || modifiers.includes("in") || ["enter"].includes(stage);
  let transitioningOut = doesntSpecify || modifiers.includes("out") || ["leave"].includes(stage);
  if (modifiers.includes("in") && !doesntSpecify) {
    modifiers = modifiers.filter((i, index) => index < modifiers.indexOf("out"));
  }
  if (modifiers.includes("out") && !doesntSpecify) {
    modifiers = modifiers.filter((i, index) => index > modifiers.indexOf("out"));
  }
  let wantsAll = !modifiers.includes("opacity") && !modifiers.includes("scale");
  let wantsOpacity = wantsAll || modifiers.includes("opacity");
  let wantsScale = wantsAll || modifiers.includes("scale");
  let opacityValue = wantsOpacity ? 0 : 1;
  let scaleValue = wantsScale ? modifierValue(modifiers, "scale", 95) / 100 : 1;
  let delay = modifierValue(modifiers, "delay", 0) / 1e3;
  let origin = modifierValue(modifiers, "origin", "center");
  let property = "opacity, transform";
  let durationIn = modifierValue(modifiers, "duration", 150) / 1e3;
  let durationOut = modifierValue(modifiers, "duration", 75) / 1e3;
  let easing = `cubic-bezier(0.4, 0.0, 0.2, 1)`;
  if (transitioningIn) {
    el._x_transition.enter.during = {
      transformOrigin: origin,
      transitionDelay: `${delay}s`,
      transitionProperty: property,
      transitionDuration: `${durationIn}s`,
      transitionTimingFunction: easing
    };
    el._x_transition.enter.start = {
      opacity: opacityValue,
      transform: `scale(${scaleValue})`
    };
    el._x_transition.enter.end = {
      opacity: 1,
      transform: `scale(1)`
    };
  }
  if (transitioningOut) {
    el._x_transition.leave.during = {
      transformOrigin: origin,
      transitionDelay: `${delay}s`,
      transitionProperty: property,
      transitionDuration: `${durationOut}s`,
      transitionTimingFunction: easing
    };
    el._x_transition.leave.start = {
      opacity: 1,
      transform: `scale(1)`
    };
    el._x_transition.leave.end = {
      opacity: opacityValue,
      transform: `scale(${scaleValue})`
    };
  }
}
function registerTransitionObject(el, setFunction, defaultValue = {}) {
  if (!el._x_transition)
    el._x_transition = {
      enter: { during: defaultValue, start: defaultValue, end: defaultValue },
      leave: { during: defaultValue, start: defaultValue, end: defaultValue },
      in(before = () => {
      }, after = () => {
      }) {
        transition(el, setFunction, {
          during: this.enter.during,
          start: this.enter.start,
          end: this.enter.end
        }, before, after);
      },
      out(before = () => {
      }, after = () => {
      }) {
        transition(el, setFunction, {
          during: this.leave.during,
          start: this.leave.start,
          end: this.leave.end
        }, before, after);
      }
    };
}
window.Element.prototype._x_toggleAndCascadeWithTransitions = function(el, value, show, hide) {
  const nextTick2 = document.visibilityState === "visible" ? requestAnimationFrame : setTimeout;
  let clickAwayCompatibleShow = () => nextTick2(show);
  if (value) {
    if (el._x_transition && (el._x_transition.enter || el._x_transition.leave)) {
      el._x_transition.enter && (Object.entries(el._x_transition.enter.during).length || Object.entries(el._x_transition.enter.start).length || Object.entries(el._x_transition.enter.end).length) ? el._x_transition.in(show) : clickAwayCompatibleShow();
    } else {
      el._x_transition ? el._x_transition.in(show) : clickAwayCompatibleShow();
    }
    return;
  }
  el._x_hidePromise = el._x_transition ? new Promise((resolve, reject) => {
    el._x_transition.out(() => {
    }, () => resolve(hide));
    el._x_transitioning && el._x_transitioning.beforeCancel(() => reject({ isFromCancelledTransition: true }));
  }) : Promise.resolve(hide);
  queueMicrotask(() => {
    let closest = closestHide(el);
    if (closest) {
      if (!closest._x_hideChildren)
        closest._x_hideChildren = [];
      closest._x_hideChildren.push(el);
    } else {
      nextTick2(() => {
        let hideAfterChildren = (el2) => {
          let carry = Promise.all([
            el2._x_hidePromise,
            ...(el2._x_hideChildren || []).map(hideAfterChildren)
          ]).then(([i]) => i?.());
          delete el2._x_hidePromise;
          delete el2._x_hideChildren;
          return carry;
        };
        hideAfterChildren(el).catch((e) => {
          if (!e.isFromCancelledTransition)
            throw e;
        });
      });
    }
  });
};
function closestHide(el) {
  let parent = el.parentNode;
  if (!parent)
    return;
  return parent._x_hidePromise ? parent : closestHide(parent);
}
function transition(el, setFunction, { during, start: start22, end } = {}, before = () => {
}, after = () => {
}) {
  if (el._x_transitioning)
    el._x_transitioning.cancel();
  if (Object.keys(during).length === 0 && Object.keys(start22).length === 0 && Object.keys(end).length === 0) {
    before();
    after();
    return;
  }
  let undoStart, undoDuring, undoEnd;
  performTransition(el, {
    start() {
      undoStart = setFunction(el, start22);
    },
    during() {
      undoDuring = setFunction(el, during);
    },
    before,
    end() {
      undoStart();
      undoEnd = setFunction(el, end);
    },
    after,
    cleanup() {
      undoDuring();
      undoEnd();
    }
  });
}
function performTransition(el, stages) {
  let interrupted, reachedBefore, reachedEnd;
  let finish = once(() => {
    mutateDom(() => {
      interrupted = true;
      if (!reachedBefore)
        stages.before();
      if (!reachedEnd) {
        stages.end();
        releaseNextTicks();
      }
      stages.after();
      if (el.isConnected)
        stages.cleanup();
      delete el._x_transitioning;
    });
  });
  el._x_transitioning = {
    beforeCancels: [],
    beforeCancel(callback) {
      this.beforeCancels.push(callback);
    },
    cancel: once(function() {
      while (this.beforeCancels.length) {
        this.beforeCancels.shift()();
      }
      ;
      finish();
    }),
    finish
  };
  mutateDom(() => {
    stages.start();
    stages.during();
  });
  holdNextTicks();
  requestAnimationFrame(() => {
    if (interrupted)
      return;
    let duration = Number(getComputedStyle(el).transitionDuration.replace(/,.*/, "").replace("s", "")) * 1e3;
    let delay = Number(getComputedStyle(el).transitionDelay.replace(/,.*/, "").replace("s", "")) * 1e3;
    if (duration === 0)
      duration = Number(getComputedStyle(el).animationDuration.replace("s", "")) * 1e3;
    mutateDom(() => {
      stages.before();
    });
    reachedBefore = true;
    requestAnimationFrame(() => {
      if (interrupted)
        return;
      mutateDom(() => {
        stages.end();
      });
      releaseNextTicks();
      setTimeout(el._x_transitioning.finish, duration + delay);
      reachedEnd = true;
    });
  });
}
function modifierValue(modifiers, key, fallback) {
  if (modifiers.indexOf(key) === -1)
    return fallback;
  const rawValue = modifiers[modifiers.indexOf(key) + 1];
  if (!rawValue)
    return fallback;
  if (key === "scale") {
    if (isNaN(rawValue))
      return fallback;
  }
  if (key === "duration" || key === "delay") {
    let match = rawValue.match(/([0-9]+)ms/);
    if (match)
      return match[1];
  }
  if (key === "origin") {
    if (["top", "right", "left", "center", "bottom"].includes(modifiers[modifiers.indexOf(key) + 2])) {
      return [rawValue, modifiers[modifiers.indexOf(key) + 2]].join(" ");
    }
  }
  return rawValue;
}
var isCloning = false;
function skipDuringClone(callback, fallback = () => {
}) {
  return (...args) => isCloning ? fallback(...args) : callback(...args);
}
function onlyDuringClone(callback) {
  return (...args) => isCloning && callback(...args);
}
var interceptors = [];
function interceptClone(callback) {
  interceptors.push(callback);
}
function cloneNode(from, to) {
  interceptors.forEach((i) => i(from, to));
  isCloning = true;
  dontRegisterReactiveSideEffects(() => {
    initTree(to, (el, callback) => {
      callback(el, () => {
      });
    });
  });
  isCloning = false;
}
var isCloningLegacy = false;
function clone(oldEl, newEl) {
  if (!newEl._x_dataStack)
    newEl._x_dataStack = oldEl._x_dataStack;
  isCloning = true;
  isCloningLegacy = true;
  dontRegisterReactiveSideEffects(() => {
    cloneTree(newEl);
  });
  isCloning = false;
  isCloningLegacy = false;
}
function cloneTree(el) {
  let hasRunThroughFirstEl = false;
  let shallowWalker = (el2, callback) => {
    walk(el2, (el3, skip) => {
      if (hasRunThroughFirstEl && isRoot(el3))
        return skip();
      hasRunThroughFirstEl = true;
      callback(el3, skip);
    });
  };
  initTree(el, shallowWalker);
}
function dontRegisterReactiveSideEffects(callback) {
  let cache2 = effect;
  overrideEffect((callback2, el) => {
    let storedEffect = cache2(callback2);
    release(storedEffect);
    return () => {
    };
  });
  callback();
  overrideEffect(cache2);
}
function bind(el, name, value, modifiers = []) {
  if (!el._x_bindings)
    el._x_bindings = reactive({});
  el._x_bindings[name] = value;
  name = modifiers.includes("camel") ? camelCase(name) : name;
  switch (name) {
    case "value":
      bindInputValue(el, value);
      break;
    case "style":
      bindStyles(el, value);
      break;
    case "class":
      bindClasses(el, value);
      break;
    case "selected":
    case "checked":
      bindAttributeAndProperty(el, name, value);
      break;
    default:
      bindAttribute(el, name, value);
      break;
  }
}
function bindInputValue(el, value) {
  if (isRadio(el)) {
    if (el.attributes.value === void 0) {
      el.value = value;
    }
    if (window.fromModel) {
      if (typeof value === "boolean") {
        el.checked = safeParseBoolean(el.value) === value;
      } else {
        el.checked = checkedAttrLooseCompare(el.value, value);
      }
    }
  } else if (isCheckbox(el)) {
    if (Number.isInteger(value)) {
      el.value = value;
    } else if (!Array.isArray(value) && typeof value !== "boolean" && ![null, void 0].includes(value)) {
      el.value = String(value);
    } else {
      if (Array.isArray(value)) {
        el.checked = value.some((val) => checkedAttrLooseCompare(val, el.value));
      } else {
        el.checked = !!value;
      }
    }
  } else if (el.tagName === "SELECT") {
    updateSelect(el, value);
  } else {
    if (el.value === value)
      return;
    el.value = value === void 0 ? "" : value;
  }
}
function bindClasses(el, value) {
  if (el._x_undoAddedClasses)
    el._x_undoAddedClasses();
  el._x_undoAddedClasses = setClasses(el, value);
}
function bindStyles(el, value) {
  if (el._x_undoAddedStyles)
    el._x_undoAddedStyles();
  el._x_undoAddedStyles = setStyles(el, value);
}
function bindAttributeAndProperty(el, name, value) {
  bindAttribute(el, name, value);
  setPropertyIfChanged(el, name, value);
}
function bindAttribute(el, name, value) {
  if ([null, void 0, false].includes(value) && attributeShouldntBePreservedIfFalsy(name)) {
    el.removeAttribute(name);
  } else {
    if (isBooleanAttr(name))
      value = name;
    setIfChanged(el, name, value);
  }
}
function setIfChanged(el, attrName, value) {
  if (el.getAttribute(attrName) != value) {
    el.setAttribute(attrName, value);
  }
}
function setPropertyIfChanged(el, propName, value) {
  if (el[propName] !== value) {
    el[propName] = value;
  }
}
function updateSelect(el, value) {
  const arrayWrappedValue = [].concat(value).map((value2) => {
    return value2 + "";
  });
  Array.from(el.options).forEach((option) => {
    option.selected = arrayWrappedValue.includes(option.value);
  });
}
function camelCase(subject) {
  return subject.toLowerCase().replace(/-(\w)/g, (match, char) => char.toUpperCase());
}
function checkedAttrLooseCompare(valueA, valueB) {
  return valueA == valueB;
}
function safeParseBoolean(rawValue) {
  if ([1, "1", "true", "on", "yes", true].includes(rawValue)) {
    return true;
  }
  if ([0, "0", "false", "off", "no", false].includes(rawValue)) {
    return false;
  }
  return rawValue ? Boolean(rawValue) : null;
}
var booleanAttributes = /* @__PURE__ */ new Set([
  "allowfullscreen",
  "async",
  "autofocus",
  "autoplay",
  "checked",
  "controls",
  "default",
  "defer",
  "disabled",
  "formnovalidate",
  "inert",
  "ismap",
  "itemscope",
  "loop",
  "multiple",
  "muted",
  "nomodule",
  "novalidate",
  "open",
  "playsinline",
  "readonly",
  "required",
  "reversed",
  "selected",
  "shadowrootclonable",
  "shadowrootdelegatesfocus",
  "shadowrootserializable"
]);
function isBooleanAttr(attrName) {
  return booleanAttributes.has(attrName);
}
function attributeShouldntBePreservedIfFalsy(name) {
  return !["aria-pressed", "aria-checked", "aria-expanded", "aria-selected"].includes(name);
}
function getBinding(el, name, fallback) {
  if (el._x_bindings && el._x_bindings[name] !== void 0)
    return el._x_bindings[name];
  return getAttributeBinding(el, name, fallback);
}
function extractProp(el, name, fallback, extract = true) {
  if (el._x_bindings && el._x_bindings[name] !== void 0)
    return el._x_bindings[name];
  if (el._x_inlineBindings && el._x_inlineBindings[name] !== void 0) {
    let binding = el._x_inlineBindings[name];
    binding.extract = extract;
    return dontAutoEvaluateFunctions(() => {
      return evaluate(el, binding.expression);
    });
  }
  return getAttributeBinding(el, name, fallback);
}
function getAttributeBinding(el, name, fallback) {
  let attr = el.getAttribute(name);
  if (attr === null)
    return typeof fallback === "function" ? fallback() : fallback;
  if (attr === "")
    return true;
  if (isBooleanAttr(name)) {
    return !![name, "true"].includes(attr);
  }
  return attr;
}
function isCheckbox(el) {
  return el.type === "checkbox" || el.localName === "ui-checkbox" || el.localName === "ui-switch";
}
function isRadio(el) {
  return el.type === "radio" || el.localName === "ui-radio";
}
function debounce(func, wait) {
  var timeout;
  return function() {
    var context = this, args = arguments;
    var later = function() {
      timeout = null;
      func.apply(context, args);
    };
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
  };
}
function throttle(func, limit) {
  let inThrottle;
  return function() {
    let context = this, args = arguments;
    if (!inThrottle) {
      func.apply(context, args);
      inThrottle = true;
      setTimeout(() => inThrottle = false, limit);
    }
  };
}
function entangle({ get: outerGet, set: outerSet }, { get: innerGet, set: innerSet }) {
  let firstRun = true;
  let outerHash;
  let innerHash;
  let reference = effect(() => {
    let outer = outerGet();
    let inner = innerGet();
    if (firstRun) {
      innerSet(cloneIfObject(outer));
      firstRun = false;
    } else {
      let outerHashLatest = JSON.stringify(outer);
      let innerHashLatest = JSON.stringify(inner);
      if (outerHashLatest !== outerHash) {
        innerSet(cloneIfObject(outer));
      } else if (outerHashLatest !== innerHashLatest) {
        outerSet(cloneIfObject(inner));
      } else {
      }
    }
    outerHash = JSON.stringify(outerGet());
    innerHash = JSON.stringify(innerGet());
  });
  return () => {
    release(reference);
  };
}
function cloneIfObject(value) {
  return typeof value === "object" ? JSON.parse(JSON.stringify(value)) : value;
}
function plugin(callback) {
  let callbacks = Array.isArray(callback) ? callback : [callback];
  callbacks.forEach((i) => i(alpine_default));
}
var stores = {};
var isReactive = false;
function store(name, value) {
  if (!isReactive) {
    stores = reactive(stores);
    isReactive = true;
  }
  if (value === void 0) {
    return stores[name];
  }
  stores[name] = value;
  initInterceptors(stores[name]);
  if (typeof value === "object" && value !== null && value.hasOwnProperty("init") && typeof value.init === "function") {
    stores[name].init();
  }
}
function getStores() {
  return stores;
}
var binds = {};
function bind2(name, bindings) {
  let getBindings = typeof bindings !== "function" ? () => bindings : bindings;
  if (name instanceof Element) {
    return applyBindingsObject(name, getBindings());
  } else {
    binds[name] = getBindings;
  }
  return () => {
  };
}
function injectBindingProviders(obj) {
  Object.entries(binds).forEach(([name, callback]) => {
    Object.defineProperty(obj, name, {
      get() {
        return (...args) => {
          return callback(...args);
        };
      }
    });
  });
  return obj;
}
function applyBindingsObject(el, obj, original) {
  let cleanupRunners = [];
  while (cleanupRunners.length)
    cleanupRunners.pop()();
  let attributes = Object.entries(obj).map(([name, value]) => ({ name, value }));
  let staticAttributes = attributesOnly(attributes);
  attributes = attributes.map((attribute) => {
    if (staticAttributes.find((attr) => attr.name === attribute.name)) {
      return {
        name: `x-bind:${attribute.name}`,
        value: `"${attribute.value}"`
      };
    }
    return attribute;
  });
  directives(el, attributes, original).map((handle) => {
    cleanupRunners.push(handle.runCleanups);
    handle();
  });
  return () => {
    while (cleanupRunners.length)
      cleanupRunners.pop()();
  };
}
var datas = {};
function data(name, callback) {
  datas[name] = callback;
}
function injectDataProviders(obj, context) {
  Object.entries(datas).forEach(([name, callback]) => {
    Object.defineProperty(obj, name, {
      get() {
        return (...args) => {
          return callback.bind(context)(...args);
        };
      },
      enumerable: false
    });
  });
  return obj;
}
var Alpine = {
  get reactive() {
    return reactive;
  },
  get release() {
    return release;
  },
  get effect() {
    return effect;
  },
  get raw() {
    return raw;
  },
  version: "3.14.9",
  flushAndStopDeferringMutations,
  dontAutoEvaluateFunctions,
  disableEffectScheduling,
  startObservingMutations,
  stopObservingMutations,
  setReactivityEngine,
  onAttributeRemoved,
  onAttributesAdded,
  closestDataStack,
  skipDuringClone,
  onlyDuringClone,
  addRootSelector,
  addInitSelector,
  interceptClone,
  addScopeToNode,
  deferMutations,
  mapAttributes,
  evaluateLater,
  interceptInit,
  setEvaluator,
  mergeProxies,
  extractProp,
  findClosest,
  onElRemoved,
  closestRoot,
  destroyTree,
  interceptor,
  // INTERNAL: not public API and is subject to change without major release.
  transition,
  // INTERNAL
  setStyles,
  // INTERNAL
  mutateDom,
  directive,
  entangle,
  throttle,
  debounce,
  evaluate,
  initTree,
  nextTick,
  prefixed: prefix,
  prefix: setPrefix,
  plugin,
  magic,
  store,
  start: start2,
  clone,
  // INTERNAL
  cloneNode,
  // INTERNAL
  bound: getBinding,
  $data: scope,
  watch,
  walk,
  data,
  bind: bind2
};
var alpine_default = Alpine;
function makeMap(str, expectsLowerCase) {
  const map = /* @__PURE__ */ Object.create(null);
  const list = str.split(",");
  for (let i = 0; i < list.length; i++) {
    map[list[i]] = true;
  }
  return expectsLowerCase ? (val) => !!map[val.toLowerCase()] : (val) => !!map[val];
}
var specialBooleanAttrs = `itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`;
var isBooleanAttr2 = /* @__PURE__ */ makeMap(specialBooleanAttrs + `,async,autofocus,autoplay,controls,default,defer,disabled,hidden,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected`);
var EMPTY_OBJ = true ? Object.freeze({}) : {};
var EMPTY_ARR = true ? Object.freeze([]) : [];
var hasOwnProperty = Object.prototype.hasOwnProperty;
var hasOwn = (val, key) => hasOwnProperty.call(val, key);
var isArray = Array.isArray;
var isMap = (val) => toTypeString(val) === "[object Map]";
var isString = (val) => typeof val === "string";
var isSymbol = (val) => typeof val === "symbol";
var isObject = (val) => val !== null && typeof val === "object";
var objectToString = Object.prototype.toString;
var toTypeString = (value) => objectToString.call(value);
var toRawType = (value) => {
  return toTypeString(value).slice(8, -1);
};
var isIntegerKey = (key) => isString(key) && key !== "NaN" && key[0] !== "-" && "" + parseInt(key, 10) === key;
var cacheStringFunction = (fn) => {
  const cache2 = /* @__PURE__ */ Object.create(null);
  return (str) => {
    const hit = cache2[str];
    return hit || (cache2[str] = fn(str));
  };
};
var camelizeRE = /-(\w)/g;
var camelize = cacheStringFunction((str) => {
  return str.replace(camelizeRE, (_, c) => c ? c.toUpperCase() : "");
});
var hyphenateRE = /\B([A-Z])/g;
var hyphenate = cacheStringFunction((str) => str.replace(hyphenateRE, "-$1").toLowerCase());
var capitalize = cacheStringFunction((str) => str.charAt(0).toUpperCase() + str.slice(1));
var toHandlerKey = cacheStringFunction((str) => str ? `on${capitalize(str)}` : ``);
var hasChanged = (value, oldValue) => value !== oldValue && (value === value || oldValue === oldValue);
var targetMap = /* @__PURE__ */ new WeakMap();
var effectStack = [];
var activeEffect;
var ITERATE_KEY = Symbol(true ? "iterate" : "");
var MAP_KEY_ITERATE_KEY = Symbol(true ? "Map key iterate" : "");
function isEffect(fn) {
  return fn && fn._isEffect === true;
}
function effect2(fn, options = EMPTY_OBJ) {
  if (isEffect(fn)) {
    fn = fn.raw;
  }
  const effect3 = createReactiveEffect(fn, options);
  if (!options.lazy) {
    effect3();
  }
  return effect3;
}
function stop(effect3) {
  if (effect3.active) {
    cleanup(effect3);
    if (effect3.options.onStop) {
      effect3.options.onStop();
    }
    effect3.active = false;
  }
}
var uid = 0;
function createReactiveEffect(fn, options) {
  const effect3 = function reactiveEffect() {
    if (!effect3.active) {
      return fn();
    }
    if (!effectStack.includes(effect3)) {
      cleanup(effect3);
      try {
        enableTracking();
        effectStack.push(effect3);
        activeEffect = effect3;
        return fn();
      } finally {
        effectStack.pop();
        resetTracking();
        activeEffect = effectStack[effectStack.length - 1];
      }
    }
  };
  effect3.id = uid++;
  effect3.allowRecurse = !!options.allowRecurse;
  effect3._isEffect = true;
  effect3.active = true;
  effect3.raw = fn;
  effect3.deps = [];
  effect3.options = options;
  return effect3;
}
function cleanup(effect3) {
  const { deps } = effect3;
  if (deps.length) {
    for (let i = 0; i < deps.length; i++) {
      deps[i].delete(effect3);
    }
    deps.length = 0;
  }
}
var shouldTrack = true;
var trackStack = [];
function pauseTracking() {
  trackStack.push(shouldTrack);
  shouldTrack = false;
}
function enableTracking() {
  trackStack.push(shouldTrack);
  shouldTrack = true;
}
function resetTracking() {
  const last = trackStack.pop();
  shouldTrack = last === void 0 ? true : last;
}
function track(target, type, key) {
  if (!shouldTrack || activeEffect === void 0) {
    return;
  }
  let depsMap = targetMap.get(target);
  if (!depsMap) {
    targetMap.set(target, depsMap = /* @__PURE__ */ new Map());
  }
  let dep = depsMap.get(key);
  if (!dep) {
    depsMap.set(key, dep = /* @__PURE__ */ new Set());
  }
  if (!dep.has(activeEffect)) {
    dep.add(activeEffect);
    activeEffect.deps.push(dep);
    if (activeEffect.options.onTrack) {
      activeEffect.options.onTrack({
        effect: activeEffect,
        target,
        type,
        key
      });
    }
  }
}
function trigger(target, type, key, newValue, oldValue, oldTarget) {
  const depsMap = targetMap.get(target);
  if (!depsMap) {
    return;
  }
  const effects = /* @__PURE__ */ new Set();
  const add22 = (effectsToAdd) => {
    if (effectsToAdd) {
      effectsToAdd.forEach((effect3) => {
        if (effect3 !== activeEffect || effect3.allowRecurse) {
          effects.add(effect3);
        }
      });
    }
  };
  if (type === "clear") {
    depsMap.forEach(add22);
  } else if (key === "length" && isArray(target)) {
    depsMap.forEach((dep, key2) => {
      if (key2 === "length" || key2 >= newValue) {
        add22(dep);
      }
    });
  } else {
    if (key !== void 0) {
      add22(depsMap.get(key));
    }
    switch (type) {
      case "add":
        if (!isArray(target)) {
          add22(depsMap.get(ITERATE_KEY));
          if (isMap(target)) {
            add22(depsMap.get(MAP_KEY_ITERATE_KEY));
          }
        } else if (isIntegerKey(key)) {
          add22(depsMap.get("length"));
        }
        break;
      case "delete":
        if (!isArray(target)) {
          add22(depsMap.get(ITERATE_KEY));
          if (isMap(target)) {
            add22(depsMap.get(MAP_KEY_ITERATE_KEY));
          }
        }
        break;
      case "set":
        if (isMap(target)) {
          add22(depsMap.get(ITERATE_KEY));
        }
        break;
    }
  }
  const run = (effect3) => {
    if (effect3.options.onTrigger) {
      effect3.options.onTrigger({
        effect: effect3,
        target,
        key,
        type,
        newValue,
        oldValue,
        oldTarget
      });
    }
    if (effect3.options.scheduler) {
      effect3.options.scheduler(effect3);
    } else {
      effect3();
    }
  };
  effects.forEach(run);
}
var isNonTrackableKeys = /* @__PURE__ */ makeMap(`__proto__,__v_isRef,__isVue`);
var builtInSymbols = new Set(Object.getOwnPropertyNames(Symbol).map((key) => Symbol[key]).filter(isSymbol));
var get2 = /* @__PURE__ */ createGetter();
var readonlyGet = /* @__PURE__ */ createGetter(true);
var arrayInstrumentations = /* @__PURE__ */ createArrayInstrumentations();
function createArrayInstrumentations() {
  const instrumentations = {};
  ["includes", "indexOf", "lastIndexOf"].forEach((key) => {
    instrumentations[key] = function(...args) {
      const arr = toRaw(this);
      for (let i = 0, l = this.length; i < l; i++) {
        track(arr, "get", i + "");
      }
      const res = arr[key](...args);
      if (res === -1 || res === false) {
        return arr[key](...args.map(toRaw));
      } else {
        return res;
      }
    };
  });
  ["push", "pop", "shift", "unshift", "splice"].forEach((key) => {
    instrumentations[key] = function(...args) {
      pauseTracking();
      const res = toRaw(this)[key].apply(this, args);
      resetTracking();
      return res;
    };
  });
  return instrumentations;
}
function createGetter(isReadonly = false, shallow = false) {
  return function get3(target, key, receiver) {
    if (key === "__v_isReactive") {
      return !isReadonly;
    } else if (key === "__v_isReadonly") {
      return isReadonly;
    } else if (key === "__v_raw" && receiver === (isReadonly ? shallow ? shallowReadonlyMap : readonlyMap : shallow ? shallowReactiveMap : reactiveMap).get(target)) {
      return target;
    }
    const targetIsArray = isArray(target);
    if (!isReadonly && targetIsArray && hasOwn(arrayInstrumentations, key)) {
      return Reflect.get(arrayInstrumentations, key, receiver);
    }
    const res = Reflect.get(target, key, receiver);
    if (isSymbol(key) ? builtInSymbols.has(key) : isNonTrackableKeys(key)) {
      return res;
    }
    if (!isReadonly) {
      track(target, "get", key);
    }
    if (shallow) {
      return res;
    }
    if (isRef(res)) {
      const shouldUnwrap = !targetIsArray || !isIntegerKey(key);
      return shouldUnwrap ? res.value : res;
    }
    if (isObject(res)) {
      return isReadonly ? readonly(res) : reactive2(res);
    }
    return res;
  };
}
var set2 = /* @__PURE__ */ createSetter();
function createSetter(shallow = false) {
  return function set3(target, key, value, receiver) {
    let oldValue = target[key];
    if (!shallow) {
      value = toRaw(value);
      oldValue = toRaw(oldValue);
      if (!isArray(target) && isRef(oldValue) && !isRef(value)) {
        oldValue.value = value;
        return true;
      }
    }
    const hadKey = isArray(target) && isIntegerKey(key) ? Number(key) < target.length : hasOwn(target, key);
    const result = Reflect.set(target, key, value, receiver);
    if (target === toRaw(receiver)) {
      if (!hadKey) {
        trigger(target, "add", key, value);
      } else if (hasChanged(value, oldValue)) {
        trigger(target, "set", key, value, oldValue);
      }
    }
    return result;
  };
}
function deleteProperty(target, key) {
  const hadKey = hasOwn(target, key);
  const oldValue = target[key];
  const result = Reflect.deleteProperty(target, key);
  if (result && hadKey) {
    trigger(target, "delete", key, void 0, oldValue);
  }
  return result;
}
function has(target, key) {
  const result = Reflect.has(target, key);
  if (!isSymbol(key) || !builtInSymbols.has(key)) {
    track(target, "has", key);
  }
  return result;
}
function ownKeys(target) {
  track(target, "iterate", isArray(target) ? "length" : ITERATE_KEY);
  return Reflect.ownKeys(target);
}
var mutableHandlers = {
  get: get2,
  set: set2,
  deleteProperty,
  has,
  ownKeys
};
var readonlyHandlers = {
  get: readonlyGet,
  set(target, key) {
    if (true) {
      console.warn(`Set operation on key "${String(key)}" failed: target is readonly.`, target);
    }
    return true;
  },
  deleteProperty(target, key) {
    if (true) {
      console.warn(`Delete operation on key "${String(key)}" failed: target is readonly.`, target);
    }
    return true;
  }
};
var toReactive = (value) => isObject(value) ? reactive2(value) : value;
var toReadonly = (value) => isObject(value) ? readonly(value) : value;
var toShallow = (value) => value;
var getProto = (v) => Reflect.getPrototypeOf(v);
function get$1(target, key, isReadonly = false, isShallow = false) {
  target = target[
    "__v_raw"
    /* RAW */
  ];
  const rawTarget = toRaw(target);
  const rawKey = toRaw(key);
  if (key !== rawKey) {
    !isReadonly && track(rawTarget, "get", key);
  }
  !isReadonly && track(rawTarget, "get", rawKey);
  const { has: has2 } = getProto(rawTarget);
  const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;
  if (has2.call(rawTarget, key)) {
    return wrap(target.get(key));
  } else if (has2.call(rawTarget, rawKey)) {
    return wrap(target.get(rawKey));
  } else if (target !== rawTarget) {
    target.get(key);
  }
}
function has$1(key, isReadonly = false) {
  const target = this[
    "__v_raw"
    /* RAW */
  ];
  const rawTarget = toRaw(target);
  const rawKey = toRaw(key);
  if (key !== rawKey) {
    !isReadonly && track(rawTarget, "has", key);
  }
  !isReadonly && track(rawTarget, "has", rawKey);
  return key === rawKey ? target.has(key) : target.has(key) || target.has(rawKey);
}
function size(target, isReadonly = false) {
  target = target[
    "__v_raw"
    /* RAW */
  ];
  !isReadonly && track(toRaw(target), "iterate", ITERATE_KEY);
  return Reflect.get(target, "size", target);
}
function add(value) {
  value = toRaw(value);
  const target = toRaw(this);
  const proto = getProto(target);
  const hadKey = proto.has.call(target, value);
  if (!hadKey) {
    target.add(value);
    trigger(target, "add", value, value);
  }
  return this;
}
function set$1(key, value) {
  value = toRaw(value);
  const target = toRaw(this);
  const { has: has2, get: get3 } = getProto(target);
  let hadKey = has2.call(target, key);
  if (!hadKey) {
    key = toRaw(key);
    hadKey = has2.call(target, key);
  } else if (true) {
    checkIdentityKeys(target, has2, key);
  }
  const oldValue = get3.call(target, key);
  target.set(key, value);
  if (!hadKey) {
    trigger(target, "add", key, value);
  } else if (hasChanged(value, oldValue)) {
    trigger(target, "set", key, value, oldValue);
  }
  return this;
}
function deleteEntry(key) {
  const target = toRaw(this);
  const { has: has2, get: get3 } = getProto(target);
  let hadKey = has2.call(target, key);
  if (!hadKey) {
    key = toRaw(key);
    hadKey = has2.call(target, key);
  } else if (true) {
    checkIdentityKeys(target, has2, key);
  }
  const oldValue = get3 ? get3.call(target, key) : void 0;
  const result = target.delete(key);
  if (hadKey) {
    trigger(target, "delete", key, void 0, oldValue);
  }
  return result;
}
function clear() {
  const target = toRaw(this);
  const hadItems = target.size !== 0;
  const oldTarget = true ? isMap(target) ? new Map(target) : new Set(target) : void 0;
  const result = target.clear();
  if (hadItems) {
    trigger(target, "clear", void 0, void 0, oldTarget);
  }
  return result;
}
function createForEach(isReadonly, isShallow) {
  return function forEach(callback, thisArg) {
    const observed = this;
    const target = observed[
      "__v_raw"
      /* RAW */
    ];
    const rawTarget = toRaw(target);
    const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;
    !isReadonly && track(rawTarget, "iterate", ITERATE_KEY);
    return target.forEach((value, key) => {
      return callback.call(thisArg, wrap(value), wrap(key), observed);
    });
  };
}
function createIterableMethod(method, isReadonly, isShallow) {
  return function(...args) {
    const target = this[
      "__v_raw"
      /* RAW */
    ];
    const rawTarget = toRaw(target);
    const targetIsMap = isMap(rawTarget);
    const isPair = method === "entries" || method === Symbol.iterator && targetIsMap;
    const isKeyOnly = method === "keys" && targetIsMap;
    const innerIterator = target[method](...args);
    const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;
    !isReadonly && track(rawTarget, "iterate", isKeyOnly ? MAP_KEY_ITERATE_KEY : ITERATE_KEY);
    return {
      // iterator protocol
      next() {
        const { value, done } = innerIterator.next();
        return done ? { value, done } : {
          value: isPair ? [wrap(value[0]), wrap(value[1])] : wrap(value),
          done
        };
      },
      // iterable protocol
      [Symbol.iterator]() {
        return this;
      }
    };
  };
}
function createReadonlyMethod(type) {
  return function(...args) {
    if (true) {
      const key = args[0] ? `on key "${args[0]}" ` : ``;
      console.warn(`${capitalize(type)} operation ${key}failed: target is readonly.`, toRaw(this));
    }
    return type === "delete" ? false : this;
  };
}
function createInstrumentations() {
  const mutableInstrumentations2 = {
    get(key) {
      return get$1(this, key);
    },
    get size() {
      return size(this);
    },
    has: has$1,
    add,
    set: set$1,
    delete: deleteEntry,
    clear,
    forEach: createForEach(false, false)
  };
  const shallowInstrumentations2 = {
    get(key) {
      return get$1(this, key, false, true);
    },
    get size() {
      return size(this);
    },
    has: has$1,
    add,
    set: set$1,
    delete: deleteEntry,
    clear,
    forEach: createForEach(false, true)
  };
  const readonlyInstrumentations2 = {
    get(key) {
      return get$1(this, key, true);
    },
    get size() {
      return size(this, true);
    },
    has(key) {
      return has$1.call(this, key, true);
    },
    add: createReadonlyMethod(
      "add"
      /* ADD */
    ),
    set: createReadonlyMethod(
      "set"
      /* SET */
    ),
    delete: createReadonlyMethod(
      "delete"
      /* DELETE */
    ),
    clear: createReadonlyMethod(
      "clear"
      /* CLEAR */
    ),
    forEach: createForEach(true, false)
  };
  const shallowReadonlyInstrumentations2 = {
    get(key) {
      return get$1(this, key, true, true);
    },
    get size() {
      return size(this, true);
    },
    has(key) {
      return has$1.call(this, key, true);
    },
    add: createReadonlyMethod(
      "add"
      /* ADD */
    ),
    set: createReadonlyMethod(
      "set"
      /* SET */
    ),
    delete: createReadonlyMethod(
      "delete"
      /* DELETE */
    ),
    clear: createReadonlyMethod(
      "clear"
      /* CLEAR */
    ),
    forEach: createForEach(true, true)
  };
  const iteratorMethods = ["keys", "values", "entries", Symbol.iterator];
  iteratorMethods.forEach((method) => {
    mutableInstrumentations2[method] = createIterableMethod(method, false, false);
    readonlyInstrumentations2[method] = createIterableMethod(method, true, false);
    shallowInstrumentations2[method] = createIterableMethod(method, false, true);
    shallowReadonlyInstrumentations2[method] = createIterableMethod(method, true, true);
  });
  return [
    mutableInstrumentations2,
    readonlyInstrumentations2,
    shallowInstrumentations2,
    shallowReadonlyInstrumentations2
  ];
}
var [mutableInstrumentations, readonlyInstrumentations, shallowInstrumentations, shallowReadonlyInstrumentations] = /* @__PURE__ */ createInstrumentations();
function createInstrumentationGetter(isReadonly, shallow) {
  const instrumentations = shallow ? isReadonly ? shallowReadonlyInstrumentations : shallowInstrumentations : isReadonly ? readonlyInstrumentations : mutableInstrumentations;
  return (target, key, receiver) => {
    if (key === "__v_isReactive") {
      return !isReadonly;
    } else if (key === "__v_isReadonly") {
      return isReadonly;
    } else if (key === "__v_raw") {
      return target;
    }
    return Reflect.get(hasOwn(instrumentations, key) && key in target ? instrumentations : target, key, receiver);
  };
}
var mutableCollectionHandlers = {
  get: /* @__PURE__ */ createInstrumentationGetter(false, false)
};
var readonlyCollectionHandlers = {
  get: /* @__PURE__ */ createInstrumentationGetter(true, false)
};
function checkIdentityKeys(target, has2, key) {
  const rawKey = toRaw(key);
  if (rawKey !== key && has2.call(target, rawKey)) {
    const type = toRawType(target);
    console.warn(`Reactive ${type} contains both the raw and reactive versions of the same object${type === `Map` ? ` as keys` : ``}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`);
  }
}
var reactiveMap = /* @__PURE__ */ new WeakMap();
var shallowReactiveMap = /* @__PURE__ */ new WeakMap();
var readonlyMap = /* @__PURE__ */ new WeakMap();
var shallowReadonlyMap = /* @__PURE__ */ new WeakMap();
function targetTypeMap(rawType) {
  switch (rawType) {
    case "Object":
    case "Array":
      return 1;
    case "Map":
    case "Set":
    case "WeakMap":
    case "WeakSet":
      return 2;
    default:
      return 0;
  }
}
function getTargetType(value) {
  return value[
    "__v_skip"
    /* SKIP */
  ] || !Object.isExtensible(value) ? 0 : targetTypeMap(toRawType(value));
}
function reactive2(target) {
  if (target && target[
    "__v_isReadonly"
    /* IS_READONLY */
  ]) {
    return target;
  }
  return createReactiveObject(target, false, mutableHandlers, mutableCollectionHandlers, reactiveMap);
}
function readonly(target) {
  return createReactiveObject(target, true, readonlyHandlers, readonlyCollectionHandlers, readonlyMap);
}
function createReactiveObject(target, isReadonly, baseHandlers, collectionHandlers, proxyMap) {
  if (!isObject(target)) {
    if (true) {
      console.warn(`value cannot be made reactive: ${String(target)}`);
    }
    return target;
  }
  if (target[
    "__v_raw"
    /* RAW */
  ] && !(isReadonly && target[
    "__v_isReactive"
    /* IS_REACTIVE */
  ])) {
    return target;
  }
  const existingProxy = proxyMap.get(target);
  if (existingProxy) {
    return existingProxy;
  }
  const targetType = getTargetType(target);
  if (targetType === 0) {
    return target;
  }
  const proxy = new Proxy(target, targetType === 2 ? collectionHandlers : baseHandlers);
  proxyMap.set(target, proxy);
  return proxy;
}
function toRaw(observed) {
  return observed && toRaw(observed[
    "__v_raw"
    /* RAW */
  ]) || observed;
}
function isRef(r) {
  return Boolean(r && r.__v_isRef === true);
}
magic("nextTick", () => nextTick);
magic("dispatch", (el) => dispatch.bind(dispatch, el));
magic("watch", (el, { evaluateLater: evaluateLater2, cleanup: cleanup2 }) => (key, callback) => {
  let evaluate2 = evaluateLater2(key);
  let getter = () => {
    let value;
    evaluate2((i) => value = i);
    return value;
  };
  let unwatch = watch(getter, callback);
  cleanup2(unwatch);
});
magic("store", getStores);
magic("data", (el) => scope(el));
magic("root", (el) => closestRoot(el));
magic("refs", (el) => {
  if (el._x_refs_proxy)
    return el._x_refs_proxy;
  el._x_refs_proxy = mergeProxies(getArrayOfRefObject(el));
  return el._x_refs_proxy;
});
function getArrayOfRefObject(el) {
  let refObjects = [];
  findClosest(el, (i) => {
    if (i._x_refs)
      refObjects.push(i._x_refs);
  });
  return refObjects;
}
var globalIdMemo = {};
function findAndIncrementId(name) {
  if (!globalIdMemo[name])
    globalIdMemo[name] = 0;
  return ++globalIdMemo[name];
}
function closestIdRoot(el, name) {
  return findClosest(el, (element) => {
    if (element._x_ids && element._x_ids[name])
      return true;
  });
}
function setIdRoot(el, name) {
  if (!el._x_ids)
    el._x_ids = {};
  if (!el._x_ids[name])
    el._x_ids[name] = findAndIncrementId(name);
}
magic("id", (el, { cleanup: cleanup2 }) => (name, key = null) => {
  let cacheKey = `${name}${key ? `-${key}` : ""}`;
  return cacheIdByNameOnElement(el, cacheKey, cleanup2, () => {
    let root = closestIdRoot(el, name);
    let id2 = root ? root._x_ids[name] : findAndIncrementId(name);
    return key ? `${name}-${id2}-${key}` : `${name}-${id2}`;
  });
});
interceptClone((from, to) => {
  if (from._x_id) {
    to._x_id = from._x_id;
  }
});
function cacheIdByNameOnElement(el, cacheKey, cleanup2, callback) {
  if (!el._x_id)
    el._x_id = {};
  if (el._x_id[cacheKey])
    return el._x_id[cacheKey];
  let output = callback();
  el._x_id[cacheKey] = output;
  cleanup2(() => {
    delete el._x_id[cacheKey];
  });
  return output;
}
magic("el", (el) => el);
warnMissingPluginMagic("Focus", "focus", "focus");
warnMissingPluginMagic("Persist", "persist", "persist");
function warnMissingPluginMagic(name, magicName, slug) {
  magic(magicName, (el) => warn(`You can't use [$${magicName}] without first installing the "${name}" plugin here: https://alpinejs.dev/plugins/${slug}`, el));
}
directive("modelable", (el, { expression }, { effect: effect3, evaluateLater: evaluateLater2, cleanup: cleanup2 }) => {
  let func = evaluateLater2(expression);
  let innerGet = () => {
    let result;
    func((i) => result = i);
    return result;
  };
  let evaluateInnerSet = evaluateLater2(`${expression} = __placeholder`);
  let innerSet = (val) => evaluateInnerSet(() => {
  }, { scope: { "__placeholder": val } });
  let initialValue = innerGet();
  innerSet(initialValue);
  queueMicrotask(() => {
    if (!el._x_model)
      return;
    el._x_removeModelListeners["default"]();
    let outerGet = el._x_model.get;
    let outerSet = el._x_model.set;
    let releaseEntanglement = entangle(
      {
        get() {
          return outerGet();
        },
        set(value) {
          outerSet(value);
        }
      },
      {
        get() {
          return innerGet();
        },
        set(value) {
          innerSet(value);
        }
      }
    );
    cleanup2(releaseEntanglement);
  });
});
directive("teleport", (el, { modifiers, expression }, { cleanup: cleanup2 }) => {
  if (el.tagName.toLowerCase() !== "template")
    warn("x-teleport can only be used on a <template> tag", el);
  let target = getTarget(expression);
  let clone2 = el.content.cloneNode(true).firstElementChild;
  el._x_teleport = clone2;
  clone2._x_teleportBack = el;
  el.setAttribute("data-teleport-template", true);
  clone2.setAttribute("data-teleport-target", true);
  if (el._x_forwardEvents) {
    el._x_forwardEvents.forEach((eventName) => {
      clone2.addEventListener(eventName, (e) => {
        e.stopPropagation();
        el.dispatchEvent(new e.constructor(e.type, e));
      });
    });
  }
  addScopeToNode(clone2, {}, el);
  let placeInDom = (clone3, target2, modifiers2) => {
    if (modifiers2.includes("prepend")) {
      target2.parentNode.insertBefore(clone3, target2);
    } else if (modifiers2.includes("append")) {
      target2.parentNode.insertBefore(clone3, target2.nextSibling);
    } else {
      target2.appendChild(clone3);
    }
  };
  mutateDom(() => {
    placeInDom(clone2, target, modifiers);
    skipDuringClone(() => {
      initTree(clone2);
    })();
  });
  el._x_teleportPutBack = () => {
    let target2 = getTarget(expression);
    mutateDom(() => {
      placeInDom(el._x_teleport, target2, modifiers);
    });
  };
  cleanup2(
    () => mutateDom(() => {
      clone2.remove();
      destroyTree(clone2);
    })
  );
});
var teleportContainerDuringClone = document.createElement("div");
function getTarget(expression) {
  let target = skipDuringClone(() => {
    return document.querySelector(expression);
  }, () => {
    return teleportContainerDuringClone;
  })();
  if (!target)
    warn(`Cannot find x-teleport element for selector: "${expression}"`);
  return target;
}
var handler = () => {
};
handler.inline = (el, { modifiers }, { cleanup: cleanup2 }) => {
  modifiers.includes("self") ? el._x_ignoreSelf = true : el._x_ignore = true;
  cleanup2(() => {
    modifiers.includes("self") ? delete el._x_ignoreSelf : delete el._x_ignore;
  });
};
directive("ignore", handler);
directive("effect", skipDuringClone((el, { expression }, { effect: effect3 }) => {
  effect3(evaluateLater(el, expression));
}));
function on(el, event2, modifiers, callback) {
  let listenerTarget = el;
  let handler4 = (e) => callback(e);
  let options = {};
  let wrapHandler = (callback2, wrapper) => (e) => wrapper(callback2, e);
  if (modifiers.includes("dot"))
    event2 = dotSyntax(event2);
  if (modifiers.includes("camel"))
    event2 = camelCase2(event2);
  if (modifiers.includes("passive"))
    options.passive = true;
  if (modifiers.includes("capture"))
    options.capture = true;
  if (modifiers.includes("window"))
    listenerTarget = window;
  if (modifiers.includes("document"))
    listenerTarget = document;
  if (modifiers.includes("debounce")) {
    let nextModifier = modifiers[modifiers.indexOf("debounce") + 1] || "invalid-wait";
    let wait = isNumeric(nextModifier.split("ms")[0]) ? Number(nextModifier.split("ms")[0]) : 250;
    handler4 = debounce(handler4, wait);
  }
  if (modifiers.includes("throttle")) {
    let nextModifier = modifiers[modifiers.indexOf("throttle") + 1] || "invalid-wait";
    let wait = isNumeric(nextModifier.split("ms")[0]) ? Number(nextModifier.split("ms")[0]) : 250;
    handler4 = throttle(handler4, wait);
  }
  if (modifiers.includes("prevent"))
    handler4 = wrapHandler(handler4, (next, e) => {
      e.preventDefault();
      next(e);
    });
  if (modifiers.includes("stop"))
    handler4 = wrapHandler(handler4, (next, e) => {
      e.stopPropagation();
      next(e);
    });
  if (modifiers.includes("once")) {
    handler4 = wrapHandler(handler4, (next, e) => {
      next(e);
      listenerTarget.removeEventListener(event2, handler4, options);
    });
  }
  if (modifiers.includes("away") || modifiers.includes("outside")) {
    listenerTarget = document;
    handler4 = wrapHandler(handler4, (next, e) => {
      if (el.contains(e.target))
        return;
      if (e.target.isConnected === false)
        return;
      if (el.offsetWidth < 1 && el.offsetHeight < 1)
        return;
      if (el._x_isShown === false)
        return;
      next(e);
    });
  }
  if (modifiers.includes("self"))
    handler4 = wrapHandler(handler4, (next, e) => {
      e.target === el && next(e);
    });
  if (isKeyEvent(event2) || isClickEvent(event2)) {
    handler4 = wrapHandler(handler4, (next, e) => {
      if (isListeningForASpecificKeyThatHasntBeenPressed(e, modifiers)) {
        return;
      }
      next(e);
    });
  }
  listenerTarget.addEventListener(event2, handler4, options);
  return () => {
    listenerTarget.removeEventListener(event2, handler4, options);
  };
}
function dotSyntax(subject) {
  return subject.replace(/-/g, ".");
}
function camelCase2(subject) {
  return subject.toLowerCase().replace(/-(\w)/g, (match, char) => char.toUpperCase());
}
function isNumeric(subject) {
  return !Array.isArray(subject) && !isNaN(subject);
}
function kebabCase2(subject) {
  if ([" ", "_"].includes(
    subject
  ))
    return subject;
  return subject.replace(/([a-z])([A-Z])/g, "$1-$2").replace(/[_\s]/, "-").toLowerCase();
}
function isKeyEvent(event2) {
  return ["keydown", "keyup"].includes(event2);
}
function isClickEvent(event2) {
  return ["contextmenu", "click", "mouse"].some((i) => event2.includes(i));
}
function isListeningForASpecificKeyThatHasntBeenPressed(e, modifiers) {
  let keyModifiers = modifiers.filter((i) => {
    return !["window", "document", "prevent", "stop", "once", "capture", "self", "away", "outside", "passive"].includes(i);
  });
  if (keyModifiers.includes("debounce")) {
    let debounceIndex = keyModifiers.indexOf("debounce");
    keyModifiers.splice(debounceIndex, isNumeric((keyModifiers[debounceIndex + 1] || "invalid-wait").split("ms")[0]) ? 2 : 1);
  }
  if (keyModifiers.includes("throttle")) {
    let debounceIndex = keyModifiers.indexOf("throttle");
    keyModifiers.splice(debounceIndex, isNumeric((keyModifiers[debounceIndex + 1] || "invalid-wait").split("ms")[0]) ? 2 : 1);
  }
  if (keyModifiers.length === 0)
    return false;
  if (keyModifiers.length === 1 && keyToModifiers(e.key).includes(keyModifiers[0]))
    return false;
  const systemKeyModifiers = ["ctrl", "shift", "alt", "meta", "cmd", "super"];
  const selectedSystemKeyModifiers = systemKeyModifiers.filter((modifier) => keyModifiers.includes(modifier));
  keyModifiers = keyModifiers.filter((i) => !selectedSystemKeyModifiers.includes(i));
  if (selectedSystemKeyModifiers.length > 0) {
    const activelyPressedKeyModifiers = selectedSystemKeyModifiers.filter((modifier) => {
      if (modifier === "cmd" || modifier === "super")
        modifier = "meta";
      return e[`${modifier}Key`];
    });
    if (activelyPressedKeyModifiers.length === selectedSystemKeyModifiers.length) {
      if (isClickEvent(e.type))
        return false;
      if (keyToModifiers(e.key).includes(keyModifiers[0]))
        return false;
    }
  }
  return true;
}
function keyToModifiers(key) {
  if (!key)
    return [];
  key = kebabCase2(key);
  let modifierToKeyMap = {
    "ctrl": "control",
    "slash": "/",
    "space": " ",
    "spacebar": " ",
    "cmd": "meta",
    "esc": "escape",
    "up": "arrow-up",
    "down": "arrow-down",
    "left": "arrow-left",
    "right": "arrow-right",
    "period": ".",
    "comma": ",",
    "equal": "=",
    "minus": "-",
    "underscore": "_"
  };
  modifierToKeyMap[key] = key;
  return Object.keys(modifierToKeyMap).map((modifier) => {
    if (modifierToKeyMap[modifier] === key)
      return modifier;
  }).filter((modifier) => modifier);
}
directive("model", (el, { modifiers, expression }, { effect: effect3, cleanup: cleanup2 }) => {
  let scopeTarget = el;
  if (modifiers.includes("parent")) {
    scopeTarget = el.parentNode;
  }
  let evaluateGet = evaluateLater(scopeTarget, expression);
  let evaluateSet;
  if (typeof expression === "string") {
    evaluateSet = evaluateLater(scopeTarget, `${expression} = __placeholder`);
  } else if (typeof expression === "function" && typeof expression() === "string") {
    evaluateSet = evaluateLater(scopeTarget, `${expression()} = __placeholder`);
  } else {
    evaluateSet = () => {
    };
  }
  let getValue = () => {
    let result;
    evaluateGet((value) => result = value);
    return isGetterSetter(result) ? result.get() : result;
  };
  let setValue = (value) => {
    let result;
    evaluateGet((value2) => result = value2);
    if (isGetterSetter(result)) {
      result.set(value);
    } else {
      evaluateSet(() => {
      }, {
        scope: { "__placeholder": value }
      });
    }
  };
  if (typeof expression === "string" && el.type === "radio") {
    mutateDom(() => {
      if (!el.hasAttribute("name"))
        el.setAttribute("name", expression);
    });
  }
  var event2 = el.tagName.toLowerCase() === "select" || ["checkbox", "radio"].includes(el.type) || modifiers.includes("lazy") ? "change" : "input";
  let removeListener = isCloning ? () => {
  } : on(el, event2, modifiers, (e) => {
    setValue(getInputValue(el, modifiers, e, getValue()));
  });
  if (modifiers.includes("fill")) {
    if ([void 0, null, ""].includes(getValue()) || isCheckbox(el) && Array.isArray(getValue()) || el.tagName.toLowerCase() === "select" && el.multiple) {
      setValue(
        getInputValue(el, modifiers, { target: el }, getValue())
      );
    }
  }
  if (!el._x_removeModelListeners)
    el._x_removeModelListeners = {};
  el._x_removeModelListeners["default"] = removeListener;
  cleanup2(() => el._x_removeModelListeners["default"]());
  if (el.form) {
    let removeResetListener = on(el.form, "reset", [], (e) => {
      nextTick(() => el._x_model && el._x_model.set(getInputValue(el, modifiers, { target: el }, getValue())));
    });
    cleanup2(() => removeResetListener());
  }
  el._x_model = {
    get() {
      return getValue();
    },
    set(value) {
      setValue(value);
    }
  };
  el._x_forceModelUpdate = (value) => {
    if (value === void 0 && typeof expression === "string" && expression.match(/\./))
      value = "";
    window.fromModel = true;
    mutateDom(() => bind(el, "value", value));
    delete window.fromModel;
  };
  effect3(() => {
    let value = getValue();
    if (modifiers.includes("unintrusive") && document.activeElement.isSameNode(el))
      return;
    el._x_forceModelUpdate(value);
  });
});
function getInputValue(el, modifiers, event2, currentValue) {
  return mutateDom(() => {
    if (event2 instanceof CustomEvent && event2.detail !== void 0)
      return event2.detail !== null && event2.detail !== void 0 ? event2.detail : event2.target.value;
    else if (isCheckbox(el)) {
      if (Array.isArray(currentValue)) {
        let newValue = null;
        if (modifiers.includes("number")) {
          newValue = safeParseNumber(event2.target.value);
        } else if (modifiers.includes("boolean")) {
          newValue = safeParseBoolean(event2.target.value);
        } else {
          newValue = event2.target.value;
        }
        return event2.target.checked ? currentValue.includes(newValue) ? currentValue : currentValue.concat([newValue]) : currentValue.filter((el2) => !checkedAttrLooseCompare2(el2, newValue));
      } else {
        return event2.target.checked;
      }
    } else if (el.tagName.toLowerCase() === "select" && el.multiple) {
      if (modifiers.includes("number")) {
        return Array.from(event2.target.selectedOptions).map((option) => {
          let rawValue = option.value || option.text;
          return safeParseNumber(rawValue);
        });
      } else if (modifiers.includes("boolean")) {
        return Array.from(event2.target.selectedOptions).map((option) => {
          let rawValue = option.value || option.text;
          return safeParseBoolean(rawValue);
        });
      }
      return Array.from(event2.target.selectedOptions).map((option) => {
        return option.value || option.text;
      });
    } else {
      let newValue;
      if (isRadio(el)) {
        if (event2.target.checked) {
          newValue = event2.target.value;
        } else {
          newValue = currentValue;
        }
      } else {
        newValue = event2.target.value;
      }
      if (modifiers.includes("number")) {
        return safeParseNumber(newValue);
      } else if (modifiers.includes("boolean")) {
        return safeParseBoolean(newValue);
      } else if (modifiers.includes("trim")) {
        return newValue.trim();
      } else {
        return newValue;
      }
    }
  });
}
function safeParseNumber(rawValue) {
  let number = rawValue ? parseFloat(rawValue) : null;
  return isNumeric2(number) ? number : rawValue;
}
function checkedAttrLooseCompare2(valueA, valueB) {
  return valueA == valueB;
}
function isNumeric2(subject) {
  return !Array.isArray(subject) && !isNaN(subject);
}
function isGetterSetter(value) {
  return value !== null && typeof value === "object" && typeof value.get === "function" && typeof value.set === "function";
}
directive("cloak", (el) => queueMicrotask(() => mutateDom(() => el.removeAttribute(prefix("cloak")))));
addInitSelector(() => `[${prefix("init")}]`);
directive("init", skipDuringClone((el, { expression }, { evaluate: evaluate2 }) => {
  if (typeof expression === "string") {
    return !!expression.trim() && evaluate2(expression, {}, false);
  }
  return evaluate2(expression, {}, false);
}));
directive("text", (el, { expression }, { effect: effect3, evaluateLater: evaluateLater2 }) => {
  let evaluate2 = evaluateLater2(expression);
  effect3(() => {
    evaluate2((value) => {
      mutateDom(() => {
        el.textContent = value;
      });
    });
  });
});
directive("html", (el, { expression }, { effect: effect3, evaluateLater: evaluateLater2 }) => {
  let evaluate2 = evaluateLater2(expression);
  effect3(() => {
    evaluate2((value) => {
      mutateDom(() => {
        el.innerHTML = value;
        el._x_ignoreSelf = true;
        initTree(el);
        delete el._x_ignoreSelf;
      });
    });
  });
});
mapAttributes(startingWith(":", into(prefix("bind:"))));
var handler2 = (el, { value, modifiers, expression, original }, { effect: effect3, cleanup: cleanup2 }) => {
  if (!value) {
    let bindingProviders = {};
    injectBindingProviders(bindingProviders);
    let getBindings = evaluateLater(el, expression);
    getBindings((bindings) => {
      applyBindingsObject(el, bindings, original);
    }, { scope: bindingProviders });
    return;
  }
  if (value === "key")
    return storeKeyForXFor(el, expression);
  if (el._x_inlineBindings && el._x_inlineBindings[value] && el._x_inlineBindings[value].extract) {
    return;
  }
  let evaluate2 = evaluateLater(el, expression);
  effect3(() => evaluate2((result) => {
    if (result === void 0 && typeof expression === "string" && expression.match(/\./)) {
      result = "";
    }
    mutateDom(() => bind(el, value, result, modifiers));
  }));
  cleanup2(() => {
    el._x_undoAddedClasses && el._x_undoAddedClasses();
    el._x_undoAddedStyles && el._x_undoAddedStyles();
  });
};
handler2.inline = (el, { value, modifiers, expression }) => {
  if (!value)
    return;
  if (!el._x_inlineBindings)
    el._x_inlineBindings = {};
  el._x_inlineBindings[value] = { expression, extract: false };
};
directive("bind", handler2);
function storeKeyForXFor(el, expression) {
  el._x_keyExpression = expression;
}
addRootSelector(() => `[${prefix("data")}]`);
directive("data", (el, { expression }, { cleanup: cleanup2 }) => {
  if (shouldSkipRegisteringDataDuringClone(el))
    return;
  expression = expression === "" ? "{}" : expression;
  let magicContext = {};
  injectMagics(magicContext, el);
  let dataProviderContext = {};
  injectDataProviders(dataProviderContext, magicContext);
  let data2 = evaluate(el, expression, { scope: dataProviderContext });
  if (data2 === void 0 || data2 === true)
    data2 = {};
  injectMagics(data2, el);
  let reactiveData = reactive(data2);
  initInterceptors(reactiveData);
  let undo = addScopeToNode(el, reactiveData);
  reactiveData["init"] && evaluate(el, reactiveData["init"]);
  cleanup2(() => {
    reactiveData["destroy"] && evaluate(el, reactiveData["destroy"]);
    undo();
  });
});
interceptClone((from, to) => {
  if (from._x_dataStack) {
    to._x_dataStack = from._x_dataStack;
    to.setAttribute("data-has-alpine-state", true);
  }
});
function shouldSkipRegisteringDataDuringClone(el) {
  if (!isCloning)
    return false;
  if (isCloningLegacy)
    return true;
  return el.hasAttribute("data-has-alpine-state");
}
directive("show", (el, { modifiers, expression }, { effect: effect3 }) => {
  let evaluate2 = evaluateLater(el, expression);
  if (!el._x_doHide)
    el._x_doHide = () => {
      mutateDom(() => {
        el.style.setProperty("display", "none", modifiers.includes("important") ? "important" : void 0);
      });
    };
  if (!el._x_doShow)
    el._x_doShow = () => {
      mutateDom(() => {
        if (el.style.length === 1 && el.style.display === "none") {
          el.removeAttribute("style");
        } else {
          el.style.removeProperty("display");
        }
      });
    };
  let hide = () => {
    el._x_doHide();
    el._x_isShown = false;
  };
  let show = () => {
    el._x_doShow();
    el._x_isShown = true;
  };
  let clickAwayCompatibleShow = () => setTimeout(show);
  let toggle = once(
    (value) => value ? show() : hide(),
    (value) => {
      if (typeof el._x_toggleAndCascadeWithTransitions === "function") {
        el._x_toggleAndCascadeWithTransitions(el, value, show, hide);
      } else {
        value ? clickAwayCompatibleShow() : hide();
      }
    }
  );
  let oldValue;
  let firstTime = true;
  effect3(() => evaluate2((value) => {
    if (!firstTime && value === oldValue)
      return;
    if (modifiers.includes("immediate"))
      value ? clickAwayCompatibleShow() : hide();
    toggle(value);
    oldValue = value;
    firstTime = false;
  }));
});
directive("for", (el, { expression }, { effect: effect3, cleanup: cleanup2 }) => {
  let iteratorNames = parseForExpression(expression);
  let evaluateItems = evaluateLater(el, iteratorNames.items);
  let evaluateKey = evaluateLater(
    el,
    // the x-bind:key expression is stored for our use instead of evaluated.
    el._x_keyExpression || "index"
  );
  el._x_prevKeys = [];
  el._x_lookup = {};
  effect3(() => loop(el, iteratorNames, evaluateItems, evaluateKey));
  cleanup2(() => {
    Object.values(el._x_lookup).forEach((el2) => mutateDom(
      () => {
        destroyTree(el2);
        el2.remove();
      }
    ));
    delete el._x_prevKeys;
    delete el._x_lookup;
  });
});
function loop(el, iteratorNames, evaluateItems, evaluateKey) {
  let isObject2 = (i) => typeof i === "object" && !Array.isArray(i);
  let templateEl = el;
  evaluateItems((items) => {
    if (isNumeric3(items) && items >= 0) {
      items = Array.from(Array(items).keys(), (i) => i + 1);
    }
    if (items === void 0)
      items = [];
    let lookup = el._x_lookup;
    let prevKeys = el._x_prevKeys;
    let scopes = [];
    let keys = [];
    if (isObject2(items)) {
      items = Object.entries(items).map(([key, value]) => {
        let scope2 = getIterationScopeVariables(iteratorNames, value, key, items);
        evaluateKey((value2) => {
          if (keys.includes(value2))
            warn("Duplicate key on x-for", el);
          keys.push(value2);
        }, { scope: { index: key, ...scope2 } });
        scopes.push(scope2);
      });
    } else {
      for (let i = 0; i < items.length; i++) {
        let scope2 = getIterationScopeVariables(iteratorNames, items[i], i, items);
        evaluateKey((value) => {
          if (keys.includes(value))
            warn("Duplicate key on x-for", el);
          keys.push(value);
        }, { scope: { index: i, ...scope2 } });
        scopes.push(scope2);
      }
    }
    let adds = [];
    let moves = [];
    let removes = [];
    let sames = [];
    for (let i = 0; i < prevKeys.length; i++) {
      let key = prevKeys[i];
      if (keys.indexOf(key) === -1)
        removes.push(key);
    }
    prevKeys = prevKeys.filter((key) => !removes.includes(key));
    let lastKey = "template";
    for (let i = 0; i < keys.length; i++) {
      let key = keys[i];
      let prevIndex = prevKeys.indexOf(key);
      if (prevIndex === -1) {
        prevKeys.splice(i, 0, key);
        adds.push([lastKey, i]);
      } else if (prevIndex !== i) {
        let keyInSpot = prevKeys.splice(i, 1)[0];
        let keyForSpot = prevKeys.splice(prevIndex - 1, 1)[0];
        prevKeys.splice(i, 0, keyForSpot);
        prevKeys.splice(prevIndex, 0, keyInSpot);
        moves.push([keyInSpot, keyForSpot]);
      } else {
        sames.push(key);
      }
      lastKey = key;
    }
    for (let i = 0; i < removes.length; i++) {
      let key = removes[i];
      if (!(key in lookup))
        continue;
      mutateDom(() => {
        destroyTree(lookup[key]);
        lookup[key].remove();
      });
      delete lookup[key];
    }
    for (let i = 0; i < moves.length; i++) {
      let [keyInSpot, keyForSpot] = moves[i];
      let elInSpot = lookup[keyInSpot];
      let elForSpot = lookup[keyForSpot];
      let marker = document.createElement("div");
      mutateDom(() => {
        if (!elForSpot)
          warn(`x-for ":key" is undefined or invalid`, templateEl, keyForSpot, lookup);
        elForSpot.after(marker);
        elInSpot.after(elForSpot);
        elForSpot._x_currentIfEl && elForSpot.after(elForSpot._x_currentIfEl);
        marker.before(elInSpot);
        elInSpot._x_currentIfEl && elInSpot.after(elInSpot._x_currentIfEl);
        marker.remove();
      });
      elForSpot._x_refreshXForScope(scopes[keys.indexOf(keyForSpot)]);
    }
    for (let i = 0; i < adds.length; i++) {
      let [lastKey2, index] = adds[i];
      let lastEl = lastKey2 === "template" ? templateEl : lookup[lastKey2];
      if (lastEl._x_currentIfEl)
        lastEl = lastEl._x_currentIfEl;
      let scope2 = scopes[index];
      let key = keys[index];
      let clone2 = document.importNode(templateEl.content, true).firstElementChild;
      let reactiveScope = reactive(scope2);
      addScopeToNode(clone2, reactiveScope, templateEl);
      clone2._x_refreshXForScope = (newScope) => {
        Object.entries(newScope).forEach(([key2, value]) => {
          reactiveScope[key2] = value;
        });
      };
      mutateDom(() => {
        lastEl.after(clone2);
        skipDuringClone(() => initTree(clone2))();
      });
      if (typeof key === "object") {
        warn("x-for key cannot be an object, it must be a string or an integer", templateEl);
      }
      lookup[key] = clone2;
    }
    for (let i = 0; i < sames.length; i++) {
      lookup[sames[i]]._x_refreshXForScope(scopes[keys.indexOf(sames[i])]);
    }
    templateEl._x_prevKeys = keys;
  });
}
function parseForExpression(expression) {
  let forIteratorRE = /,([^,\}\]]*)(?:,([^,\}\]]*))?$/;
  let stripParensRE = /^\s*\(|\)\s*$/g;
  let forAliasRE = /([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/;
  let inMatch = expression.match(forAliasRE);
  if (!inMatch)
    return;
  let res = {};
  res.items = inMatch[2].trim();
  let item = inMatch[1].replace(stripParensRE, "").trim();
  let iteratorMatch = item.match(forIteratorRE);
  if (iteratorMatch) {
    res.item = item.replace(forIteratorRE, "").trim();
    res.index = iteratorMatch[1].trim();
    if (iteratorMatch[2]) {
      res.collection = iteratorMatch[2].trim();
    }
  } else {
    res.item = item;
  }
  return res;
}
function getIterationScopeVariables(iteratorNames, item, index, items) {
  let scopeVariables = {};
  if (/^\[.*\]$/.test(iteratorNames.item) && Array.isArray(item)) {
    let names = iteratorNames.item.replace("[", "").replace("]", "").split(",").map((i) => i.trim());
    names.forEach((name, i) => {
      scopeVariables[name] = item[i];
    });
  } else if (/^\{.*\}$/.test(iteratorNames.item) && !Array.isArray(item) && typeof item === "object") {
    let names = iteratorNames.item.replace("{", "").replace("}", "").split(",").map((i) => i.trim());
    names.forEach((name) => {
      scopeVariables[name] = item[name];
    });
  } else {
    scopeVariables[iteratorNames.item] = item;
  }
  if (iteratorNames.index)
    scopeVariables[iteratorNames.index] = index;
  if (iteratorNames.collection)
    scopeVariables[iteratorNames.collection] = items;
  return scopeVariables;
}
function isNumeric3(subject) {
  return !Array.isArray(subject) && !isNaN(subject);
}
function handler3() {
}
handler3.inline = (el, { expression }, { cleanup: cleanup2 }) => {
  let root = closestRoot(el);
  if (!root._x_refs)
    root._x_refs = {};
  root._x_refs[expression] = el;
  cleanup2(() => delete root._x_refs[expression]);
};
directive("ref", handler3);
directive("if", (el, { expression }, { effect: effect3, cleanup: cleanup2 }) => {
  if (el.tagName.toLowerCase() !== "template")
    warn("x-if can only be used on a <template> tag", el);
  let evaluate2 = evaluateLater(el, expression);
  let show = () => {
    if (el._x_currentIfEl)
      return el._x_currentIfEl;
    let clone2 = el.content.cloneNode(true).firstElementChild;
    addScopeToNode(clone2, {}, el);
    mutateDom(() => {
      el.after(clone2);
      skipDuringClone(() => initTree(clone2))();
    });
    el._x_currentIfEl = clone2;
    el._x_undoIf = () => {
      mutateDom(() => {
        destroyTree(clone2);
        clone2.remove();
      });
      delete el._x_currentIfEl;
    };
    return clone2;
  };
  let hide = () => {
    if (!el._x_undoIf)
      return;
    el._x_undoIf();
    delete el._x_undoIf;
  };
  effect3(() => evaluate2((value) => {
    value ? show() : hide();
  }));
  cleanup2(() => el._x_undoIf && el._x_undoIf());
});
directive("id", (el, { expression }, { evaluate: evaluate2 }) => {
  let names = evaluate2(expression);
  names.forEach((name) => setIdRoot(el, name));
});
interceptClone((from, to) => {
  if (from._x_ids) {
    to._x_ids = from._x_ids;
  }
});
mapAttributes(startingWith("@", into(prefix("on:"))));
directive("on", skipDuringClone((el, { value, modifiers, expression }, { cleanup: cleanup2 }) => {
  let evaluate2 = expression ? evaluateLater(el, expression) : () => {
  };
  if (el.tagName.toLowerCase() === "template") {
    if (!el._x_forwardEvents)
      el._x_forwardEvents = [];
    if (!el._x_forwardEvents.includes(value))
      el._x_forwardEvents.push(value);
  }
  let removeListener = on(el, value, modifiers, (e) => {
    evaluate2(() => {
    }, { scope: { "$event": e }, params: [e] });
  });
  cleanup2(() => removeListener());
}));
warnMissingPluginDirective("Collapse", "collapse", "collapse");
warnMissingPluginDirective("Intersect", "intersect", "intersect");
warnMissingPluginDirective("Focus", "trap", "focus");
warnMissingPluginDirective("Mask", "mask", "mask");
function warnMissingPluginDirective(name, directiveName, slug) {
  directive(directiveName, (el) => warn(`You can't use [x-${directiveName}] without first installing the "${name}" plugin here: https://alpinejs.dev/plugins/${slug}`, el));
}
alpine_default.setEvaluator(normalEvaluator);
alpine_default.setReactivityEngine({ reactive: reactive2, effect: effect2, release: stop, raw: toRaw });
var src_default = alpine_default;
var module_default = src_default;

// node_modules/@rails/actioncable/app/assets/javascripts/actioncable.esm.js
var actioncable_esm_exports = {};
__export(actioncable_esm_exports, {
  Connection: () => Connection,
  ConnectionMonitor: () => ConnectionMonitor,
  Consumer: () => Consumer,
  INTERNAL: () => INTERNAL,
  Subscription: () => Subscription,
  SubscriptionGuarantor: () => SubscriptionGuarantor,
  Subscriptions: () => Subscriptions,
  adapters: () => adapters,
  createConsumer: () => createConsumer,
  createWebSocketURL: () => createWebSocketURL,
  getConfig: () => getConfig,
  logger: () => logger
});
var adapters = {
  logger: typeof console !== "undefined" ? console : void 0,
  WebSocket: typeof WebSocket !== "undefined" ? WebSocket : void 0
};
var logger = {
  log(...messages) {
    if (this.enabled) {
      messages.push(Date.now());
      adapters.logger.log("[ActionCable]", ...messages);
    }
  }
};
var now = () => (/* @__PURE__ */ new Date()).getTime();
var secondsSince = (time) => (now() - time) / 1e3;
var ConnectionMonitor = class {
  constructor(connection) {
    this.visibilityDidChange = this.visibilityDidChange.bind(this);
    this.connection = connection;
    this.reconnectAttempts = 0;
  }
  start() {
    if (!this.isRunning()) {
      this.startedAt = now();
      delete this.stoppedAt;
      this.startPolling();
      addEventListener("visibilitychange", this.visibilityDidChange);
      logger.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`);
    }
  }
  stop() {
    if (this.isRunning()) {
      this.stoppedAt = now();
      this.stopPolling();
      removeEventListener("visibilitychange", this.visibilityDidChange);
      logger.log("ConnectionMonitor stopped");
    }
  }
  isRunning() {
    return this.startedAt && !this.stoppedAt;
  }
  recordMessage() {
    this.pingedAt = now();
  }
  recordConnect() {
    this.reconnectAttempts = 0;
    delete this.disconnectedAt;
    logger.log("ConnectionMonitor recorded connect");
  }
  recordDisconnect() {
    this.disconnectedAt = now();
    logger.log("ConnectionMonitor recorded disconnect");
  }
  startPolling() {
    this.stopPolling();
    this.poll();
  }
  stopPolling() {
    clearTimeout(this.pollTimeout);
  }
  poll() {
    this.pollTimeout = setTimeout(() => {
      this.reconnectIfStale();
      this.poll();
    }, this.getPollInterval());
  }
  getPollInterval() {
    const { staleThreshold, reconnectionBackoffRate } = this.constructor;
    const backoff = Math.pow(1 + reconnectionBackoffRate, Math.min(this.reconnectAttempts, 10));
    const jitterMax = this.reconnectAttempts === 0 ? 1 : reconnectionBackoffRate;
    const jitter = jitterMax * Math.random();
    return staleThreshold * 1e3 * backoff * (1 + jitter);
  }
  reconnectIfStale() {
    if (this.connectionIsStale()) {
      logger.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${secondsSince(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`);
      this.reconnectAttempts++;
      if (this.disconnectedRecently()) {
        logger.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${secondsSince(this.disconnectedAt)} s`);
      } else {
        logger.log("ConnectionMonitor reopening");
        this.connection.reopen();
      }
    }
  }
  get refreshedAt() {
    return this.pingedAt ? this.pingedAt : this.startedAt;
  }
  connectionIsStale() {
    return secondsSince(this.refreshedAt) > this.constructor.staleThreshold;
  }
  disconnectedRecently() {
    return this.disconnectedAt && secondsSince(this.disconnectedAt) < this.constructor.staleThreshold;
  }
  visibilityDidChange() {
    if (document.visibilityState === "visible") {
      setTimeout(() => {
        if (this.connectionIsStale() || !this.connection.isOpen()) {
          logger.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`);
          this.connection.reopen();
        }
      }, 200);
    }
  }
};
ConnectionMonitor.staleThreshold = 6;
ConnectionMonitor.reconnectionBackoffRate = 0.15;
var INTERNAL = {
  message_types: {
    welcome: "welcome",
    disconnect: "disconnect",
    ping: "ping",
    confirmation: "confirm_subscription",
    rejection: "reject_subscription"
  },
  disconnect_reasons: {
    unauthorized: "unauthorized",
    invalid_request: "invalid_request",
    server_restart: "server_restart",
    remote: "remote"
  },
  default_mount_path: "/cable",
  protocols: ["actioncable-v1-json", "actioncable-unsupported"]
};
var { message_types, protocols } = INTERNAL;
var supportedProtocols = protocols.slice(0, protocols.length - 1);
var indexOf = [].indexOf;
var Connection = class {
  constructor(consumer2) {
    this.open = this.open.bind(this);
    this.consumer = consumer2;
    this.subscriptions = this.consumer.subscriptions;
    this.monitor = new ConnectionMonitor(this);
    this.disconnected = true;
  }
  send(data2) {
    if (this.isOpen()) {
      this.webSocket.send(JSON.stringify(data2));
      return true;
    } else {
      return false;
    }
  }
  open() {
    if (this.isActive()) {
      logger.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`);
      return false;
    } else {
      const socketProtocols = [...protocols, ...this.consumer.subprotocols || []];
      logger.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${socketProtocols}`);
      if (this.webSocket) {
        this.uninstallEventHandlers();
      }
      this.webSocket = new adapters.WebSocket(this.consumer.url, socketProtocols);
      this.installEventHandlers();
      this.monitor.start();
      return true;
    }
  }
  close({ allowReconnect } = {
    allowReconnect: true
  }) {
    if (!allowReconnect) {
      this.monitor.stop();
    }
    if (this.isOpen()) {
      return this.webSocket.close();
    }
  }
  reopen() {
    logger.log(`Reopening WebSocket, current state is ${this.getState()}`);
    if (this.isActive()) {
      try {
        return this.close();
      } catch (error3) {
        logger.log("Failed to reopen WebSocket", error3);
      } finally {
        logger.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`);
        setTimeout(this.open, this.constructor.reopenDelay);
      }
    } else {
      return this.open();
    }
  }
  getProtocol() {
    if (this.webSocket) {
      return this.webSocket.protocol;
    }
  }
  isOpen() {
    return this.isState("open");
  }
  isActive() {
    return this.isState("open", "connecting");
  }
  triedToReconnect() {
    return this.monitor.reconnectAttempts > 0;
  }
  isProtocolSupported() {
    return indexOf.call(supportedProtocols, this.getProtocol()) >= 0;
  }
  isState(...states) {
    return indexOf.call(states, this.getState()) >= 0;
  }
  getState() {
    if (this.webSocket) {
      for (let state in adapters.WebSocket) {
        if (adapters.WebSocket[state] === this.webSocket.readyState) {
          return state.toLowerCase();
        }
      }
    }
    return null;
  }
  installEventHandlers() {
    for (let eventName in this.events) {
      const handler4 = this.events[eventName].bind(this);
      this.webSocket[`on${eventName}`] = handler4;
    }
  }
  uninstallEventHandlers() {
    for (let eventName in this.events) {
      this.webSocket[`on${eventName}`] = function() {
      };
    }
  }
};
Connection.reopenDelay = 500;
Connection.prototype.events = {
  message(event2) {
    if (!this.isProtocolSupported()) {
      return;
    }
    const { identifier, message, reason, reconnect, type } = JSON.parse(event2.data);
    this.monitor.recordMessage();
    switch (type) {
      case message_types.welcome:
        if (this.triedToReconnect()) {
          this.reconnectAttempted = true;
        }
        this.monitor.recordConnect();
        return this.subscriptions.reload();
      case message_types.disconnect:
        logger.log(`Disconnecting. Reason: ${reason}`);
        return this.close({
          allowReconnect: reconnect
        });
      case message_types.ping:
        return null;
      case message_types.confirmation:
        this.subscriptions.confirmSubscription(identifier);
        if (this.reconnectAttempted) {
          this.reconnectAttempted = false;
          return this.subscriptions.notify(identifier, "connected", {
            reconnected: true
          });
        } else {
          return this.subscriptions.notify(identifier, "connected", {
            reconnected: false
          });
        }
      case message_types.rejection:
        return this.subscriptions.reject(identifier);
      default:
        return this.subscriptions.notify(identifier, "received", message);
    }
  },
  open() {
    logger.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`);
    this.disconnected = false;
    if (!this.isProtocolSupported()) {
      logger.log("Protocol is unsupported. Stopping monitor and disconnecting.");
      return this.close({
        allowReconnect: false
      });
    }
  },
  close(event2) {
    logger.log("WebSocket onclose event");
    if (this.disconnected) {
      return;
    }
    this.disconnected = true;
    this.monitor.recordDisconnect();
    return this.subscriptions.notifyAll("disconnected", {
      willAttemptReconnect: this.monitor.isRunning()
    });
  },
  error() {
    logger.log("WebSocket onerror event");
  }
};
var extend = function(object, properties) {
  if (properties != null) {
    for (let key in properties) {
      const value = properties[key];
      object[key] = value;
    }
  }
  return object;
};
var Subscription = class {
  constructor(consumer2, params = {}, mixin) {
    this.consumer = consumer2;
    this.identifier = JSON.stringify(params);
    extend(this, mixin);
  }
  perform(action, data2 = {}) {
    data2.action = action;
    return this.send(data2);
  }
  send(data2) {
    return this.consumer.send({
      command: "message",
      identifier: this.identifier,
      data: JSON.stringify(data2)
    });
  }
  unsubscribe() {
    return this.consumer.subscriptions.remove(this);
  }
};
var SubscriptionGuarantor = class {
  constructor(subscriptions) {
    this.subscriptions = subscriptions;
    this.pendingSubscriptions = [];
  }
  guarantee(subscription) {
    if (this.pendingSubscriptions.indexOf(subscription) == -1) {
      logger.log(`SubscriptionGuarantor guaranteeing ${subscription.identifier}`);
      this.pendingSubscriptions.push(subscription);
    } else {
      logger.log(`SubscriptionGuarantor already guaranteeing ${subscription.identifier}`);
    }
    this.startGuaranteeing();
  }
  forget(subscription) {
    logger.log(`SubscriptionGuarantor forgetting ${subscription.identifier}`);
    this.pendingSubscriptions = this.pendingSubscriptions.filter((s) => s !== subscription);
  }
  startGuaranteeing() {
    this.stopGuaranteeing();
    this.retrySubscribing();
  }
  stopGuaranteeing() {
    clearTimeout(this.retryTimeout);
  }
  retrySubscribing() {
    this.retryTimeout = setTimeout(() => {
      if (this.subscriptions && typeof this.subscriptions.subscribe === "function") {
        this.pendingSubscriptions.map((subscription) => {
          logger.log(`SubscriptionGuarantor resubscribing ${subscription.identifier}`);
          this.subscriptions.subscribe(subscription);
        });
      }
    }, 500);
  }
};
var Subscriptions = class {
  constructor(consumer2) {
    this.consumer = consumer2;
    this.guarantor = new SubscriptionGuarantor(this);
    this.subscriptions = [];
  }
  create(channelName, mixin) {
    const channel = channelName;
    const params = typeof channel === "object" ? channel : {
      channel
    };
    const subscription = new Subscription(this.consumer, params, mixin);
    return this.add(subscription);
  }
  add(subscription) {
    this.subscriptions.push(subscription);
    this.consumer.ensureActiveConnection();
    this.notify(subscription, "initialized");
    this.subscribe(subscription);
    return subscription;
  }
  remove(subscription) {
    this.forget(subscription);
    if (!this.findAll(subscription.identifier).length) {
      this.sendCommand(subscription, "unsubscribe");
    }
    return subscription;
  }
  reject(identifier) {
    return this.findAll(identifier).map((subscription) => {
      this.forget(subscription);
      this.notify(subscription, "rejected");
      return subscription;
    });
  }
  forget(subscription) {
    this.guarantor.forget(subscription);
    this.subscriptions = this.subscriptions.filter((s) => s !== subscription);
    return subscription;
  }
  findAll(identifier) {
    return this.subscriptions.filter((s) => s.identifier === identifier);
  }
  reload() {
    return this.subscriptions.map((subscription) => this.subscribe(subscription));
  }
  notifyAll(callbackName, ...args) {
    return this.subscriptions.map((subscription) => this.notify(subscription, callbackName, ...args));
  }
  notify(subscription, callbackName, ...args) {
    let subscriptions;
    if (typeof subscription === "string") {
      subscriptions = this.findAll(subscription);
    } else {
      subscriptions = [subscription];
    }
    return subscriptions.map((subscription2) => typeof subscription2[callbackName] === "function" ? subscription2[callbackName](...args) : void 0);
  }
  subscribe(subscription) {
    if (this.sendCommand(subscription, "subscribe")) {
      this.guarantor.guarantee(subscription);
    }
  }
  confirmSubscription(identifier) {
    logger.log(`Subscription confirmed ${identifier}`);
    this.findAll(identifier).map((subscription) => this.guarantor.forget(subscription));
  }
  sendCommand(subscription, command) {
    const { identifier } = subscription;
    return this.consumer.send({
      command,
      identifier
    });
  }
};
var Consumer = class {
  constructor(url) {
    this._url = url;
    this.subscriptions = new Subscriptions(this);
    this.connection = new Connection(this);
    this.subprotocols = [];
  }
  get url() {
    return createWebSocketURL(this._url);
  }
  send(data2) {
    return this.connection.send(data2);
  }
  connect() {
    return this.connection.open();
  }
  disconnect() {
    return this.connection.close({
      allowReconnect: false
    });
  }
  ensureActiveConnection() {
    if (!this.connection.isActive()) {
      return this.connection.open();
    }
  }
  addSubProtocol(subprotocol) {
    this.subprotocols = [...this.subprotocols, subprotocol];
  }
};
function createWebSocketURL(url) {
  if (typeof url === "function") {
    url = url();
  }
  if (url && !/^wss?:/i.test(url)) {
    const a = document.createElement("a");
    a.href = url;
    a.href = a.href;
    a.protocol = a.protocol.replace("http", "ws");
    return a.href;
  } else {
    return url;
  }
}
function createConsumer(url = getConfig("url") || INTERNAL.default_mount_path) {
  return new Consumer(url);
}
function getConfig(name) {
  const element = document.head.querySelector(`meta[name='action-cable-${name}']`);
  if (element) {
    return element.getAttribute("content");
  }
}

// node_modules/@hotwired/turbo/dist/turbo.es2017-esm.js
var turbo_es2017_esm_exports = {};
__export(turbo_es2017_esm_exports, {
  FetchEnctype: () => FetchEnctype,
  FetchMethod: () => FetchMethod,
  FetchRequest: () => FetchRequest,
  FetchResponse: () => FetchResponse,
  FrameElement: () => FrameElement,
  FrameLoadingStyle: () => FrameLoadingStyle,
  FrameRenderer: () => FrameRenderer,
  PageRenderer: () => PageRenderer,
  PageSnapshot: () => PageSnapshot,
  StreamActions: () => StreamActions,
  StreamElement: () => StreamElement,
  StreamSourceElement: () => StreamSourceElement,
  cache: () => cache,
  clearCache: () => clearCache,
  config: () => config,
  connectStreamSource: () => connectStreamSource,
  disconnectStreamSource: () => disconnectStreamSource,
  fetch: () => fetchWithTurboHeaders,
  fetchEnctypeFromString: () => fetchEnctypeFromString,
  fetchMethodFromString: () => fetchMethodFromString,
  isSafe: () => isSafe,
  morphBodyElements: () => morphBodyElements,
  morphChildren: () => morphChildren,
  morphElements: () => morphElements,
  morphTurboFrameElements: () => morphTurboFrameElements,
  navigator: () => navigator$1,
  registerAdapter: () => registerAdapter,
  renderStreamMessage: () => renderStreamMessage,
  session: () => session,
  setConfirmMethod: () => setConfirmMethod,
  setFormMode: () => setFormMode,
  setProgressBarDelay: () => setProgressBarDelay,
  start: () => start3,
  visit: () => visit
});
(function(prototype) {
  if (typeof prototype.requestSubmit == "function") return;
  prototype.requestSubmit = function(submitter2) {
    if (submitter2) {
      validateSubmitter(submitter2, this);
      submitter2.click();
    } else {
      submitter2 = document.createElement("input");
      submitter2.type = "submit";
      submitter2.hidden = true;
      this.appendChild(submitter2);
      submitter2.click();
      this.removeChild(submitter2);
    }
  };
  function validateSubmitter(submitter2, form) {
    submitter2 instanceof HTMLElement || raise(TypeError, "parameter 1 is not of type 'HTMLElement'");
    submitter2.type == "submit" || raise(TypeError, "The specified element is not a submit button");
    submitter2.form == form || raise(DOMException, "The specified element is not owned by this form element", "NotFoundError");
  }
  function raise(errorConstructor, message, name) {
    throw new errorConstructor("Failed to execute 'requestSubmit' on 'HTMLFormElement': " + message + ".", name);
  }
})(HTMLFormElement.prototype);
var submittersByForm = /* @__PURE__ */ new WeakMap();
function findSubmitterFromClickTarget(target) {
  const element = target instanceof Element ? target : target instanceof Node ? target.parentElement : null;
  const candidate = element ? element.closest("input, button") : null;
  return candidate?.type == "submit" ? candidate : null;
}
function clickCaptured(event2) {
  const submitter2 = findSubmitterFromClickTarget(event2.target);
  if (submitter2 && submitter2.form) {
    submittersByForm.set(submitter2.form, submitter2);
  }
}
(function() {
  if ("submitter" in Event.prototype) return;
  let prototype = window.Event.prototype;
  if ("SubmitEvent" in window) {
    const prototypeOfSubmitEvent = window.SubmitEvent.prototype;
    if (/Apple Computer/.test(navigator.vendor) && !("submitter" in prototypeOfSubmitEvent)) {
      prototype = prototypeOfSubmitEvent;
    } else {
      return;
    }
  }
  addEventListener("click", clickCaptured, true);
  Object.defineProperty(prototype, "submitter", {
    get() {
      if (this.type == "submit" && this.target instanceof HTMLFormElement) {
        return submittersByForm.get(this.target);
      }
    }
  });
})();
var FrameLoadingStyle = {
  eager: "eager",
  lazy: "lazy"
};
var FrameElement = class _FrameElement extends HTMLElement {
  static delegateConstructor = void 0;
  loaded = Promise.resolve();
  static get observedAttributes() {
    return ["disabled", "loading", "src"];
  }
  constructor() {
    super();
    this.delegate = new _FrameElement.delegateConstructor(this);
  }
  connectedCallback() {
    this.delegate.connect();
  }
  disconnectedCallback() {
    this.delegate.disconnect();
  }
  reload() {
    return this.delegate.sourceURLReloaded();
  }
  attributeChangedCallback(name) {
    if (name == "loading") {
      this.delegate.loadingStyleChanged();
    } else if (name == "src") {
      this.delegate.sourceURLChanged();
    } else if (name == "disabled") {
      this.delegate.disabledChanged();
    }
  }
  /**
   * Gets the URL to lazily load source HTML from
   */
  get src() {
    return this.getAttribute("src");
  }
  /**
   * Sets the URL to lazily load source HTML from
   */
  set src(value) {
    if (value) {
      this.setAttribute("src", value);
    } else {
      this.removeAttribute("src");
    }
  }
  /**
   * Gets the refresh mode for the frame.
   */
  get refresh() {
    return this.getAttribute("refresh");
  }
  /**
   * Sets the refresh mode for the frame.
   */
  set refresh(value) {
    if (value) {
      this.setAttribute("refresh", value);
    } else {
      this.removeAttribute("refresh");
    }
  }
  get shouldReloadWithMorph() {
    return this.src && this.refresh === "morph";
  }
  /**
   * Determines if the element is loading
   */
  get loading() {
    return frameLoadingStyleFromString(this.getAttribute("loading") || "");
  }
  /**
   * Sets the value of if the element is loading
   */
  set loading(value) {
    if (value) {
      this.setAttribute("loading", value);
    } else {
      this.removeAttribute("loading");
    }
  }
  /**
   * Gets the disabled state of the frame.
   *
   * If disabled, no requests will be intercepted by the frame.
   */
  get disabled() {
    return this.hasAttribute("disabled");
  }
  /**
   * Sets the disabled state of the frame.
   *
   * If disabled, no requests will be intercepted by the frame.
   */
  set disabled(value) {
    if (value) {
      this.setAttribute("disabled", "");
    } else {
      this.removeAttribute("disabled");
    }
  }
  /**
   * Gets the autoscroll state of the frame.
   *
   * If true, the frame will be scrolled into view automatically on update.
   */
  get autoscroll() {
    return this.hasAttribute("autoscroll");
  }
  /**
   * Sets the autoscroll state of the frame.
   *
   * If true, the frame will be scrolled into view automatically on update.
   */
  set autoscroll(value) {
    if (value) {
      this.setAttribute("autoscroll", "");
    } else {
      this.removeAttribute("autoscroll");
    }
  }
  /**
   * Determines if the element has finished loading
   */
  get complete() {
    return !this.delegate.isLoading;
  }
  /**
   * Gets the active state of the frame.
   *
   * If inactive, source changes will not be observed.
   */
  get isActive() {
    return this.ownerDocument === document && !this.isPreview;
  }
  /**
   * Sets the active state of the frame.
   *
   * If inactive, source changes will not be observed.
   */
  get isPreview() {
    return this.ownerDocument?.documentElement?.hasAttribute("data-turbo-preview");
  }
};
function frameLoadingStyleFromString(style3) {
  switch (style3.toLowerCase()) {
    case "lazy":
      return FrameLoadingStyle.lazy;
    default:
      return FrameLoadingStyle.eager;
  }
}
var drive = {
  enabled: true,
  progressBarDelay: 500,
  unvisitableExtensions: /* @__PURE__ */ new Set(
    [
      ".7z",
      ".aac",
      ".apk",
      ".avi",
      ".bmp",
      ".bz2",
      ".css",
      ".csv",
      ".deb",
      ".dmg",
      ".doc",
      ".docx",
      ".exe",
      ".gif",
      ".gz",
      ".heic",
      ".heif",
      ".ico",
      ".iso",
      ".jpeg",
      ".jpg",
      ".js",
      ".json",
      ".m4a",
      ".mkv",
      ".mov",
      ".mp3",
      ".mp4",
      ".mpeg",
      ".mpg",
      ".msi",
      ".ogg",
      ".ogv",
      ".pdf",
      ".pkg",
      ".png",
      ".ppt",
      ".pptx",
      ".rar",
      ".rtf",
      ".svg",
      ".tar",
      ".tif",
      ".tiff",
      ".txt",
      ".wav",
      ".webm",
      ".webp",
      ".wma",
      ".wmv",
      ".xls",
      ".xlsx",
      ".xml",
      ".zip"
    ]
  )
};
function activateScriptElement(element) {
  if (element.getAttribute("data-turbo-eval") == "false") {
    return element;
  } else {
    const createdScriptElement = document.createElement("script");
    const cspNonce = getCspNonce();
    if (cspNonce) {
      createdScriptElement.nonce = cspNonce;
    }
    createdScriptElement.textContent = element.textContent;
    createdScriptElement.async = false;
    copyElementAttributes(createdScriptElement, element);
    return createdScriptElement;
  }
}
function copyElementAttributes(destinationElement, sourceElement) {
  for (const { name, value } of sourceElement.attributes) {
    destinationElement.setAttribute(name, value);
  }
}
function createDocumentFragment(html) {
  const template = document.createElement("template");
  template.innerHTML = html;
  return template.content;
}
function dispatch2(eventName, { target, cancelable, detail } = {}) {
  const event2 = new CustomEvent(eventName, {
    cancelable,
    bubbles: true,
    composed: true,
    detail
  });
  if (target && target.isConnected) {
    target.dispatchEvent(event2);
  } else {
    document.documentElement.dispatchEvent(event2);
  }
  return event2;
}
function cancelEvent(event2) {
  event2.preventDefault();
  event2.stopImmediatePropagation();
}
function nextRepaint() {
  if (document.visibilityState === "hidden") {
    return nextEventLoopTick();
  } else {
    return nextAnimationFrame();
  }
}
function nextAnimationFrame() {
  return new Promise((resolve) => requestAnimationFrame(() => resolve()));
}
function nextEventLoopTick() {
  return new Promise((resolve) => setTimeout(() => resolve(), 0));
}
function nextMicrotask() {
  return Promise.resolve();
}
function parseHTMLDocument(html = "") {
  return new DOMParser().parseFromString(html, "text/html");
}
function unindent(strings, ...values) {
  const lines = interpolate(strings, values).replace(/^\n/, "").split("\n");
  const match = lines[0].match(/^\s+/);
  const indent = match ? match[0].length : 0;
  return lines.map((line) => line.slice(indent)).join("\n");
}
function interpolate(strings, values) {
  return strings.reduce((result, string, i) => {
    const value = values[i] == void 0 ? "" : values[i];
    return result + string + value;
  }, "");
}
function uuid() {
  return Array.from({ length: 36 }).map((_, i) => {
    if (i == 8 || i == 13 || i == 18 || i == 23) {
      return "-";
    } else if (i == 14) {
      return "4";
    } else if (i == 19) {
      return (Math.floor(Math.random() * 4) + 8).toString(16);
    } else {
      return Math.floor(Math.random() * 15).toString(16);
    }
  }).join("");
}
function getAttribute(attributeName, ...elements) {
  for (const value of elements.map((element) => element?.getAttribute(attributeName))) {
    if (typeof value == "string") return value;
  }
  return null;
}
function hasAttribute(attributeName, ...elements) {
  return elements.some((element) => element && element.hasAttribute(attributeName));
}
function markAsBusy(...elements) {
  for (const element of elements) {
    if (element.localName == "turbo-frame") {
      element.setAttribute("busy", "");
    }
    element.setAttribute("aria-busy", "true");
  }
}
function clearBusyState(...elements) {
  for (const element of elements) {
    if (element.localName == "turbo-frame") {
      element.removeAttribute("busy");
    }
    element.removeAttribute("aria-busy");
  }
}
function waitForLoad(element, timeoutInMilliseconds = 2e3) {
  return new Promise((resolve) => {
    const onComplete = () => {
      element.removeEventListener("error", onComplete);
      element.removeEventListener("load", onComplete);
      resolve();
    };
    element.addEventListener("load", onComplete, { once: true });
    element.addEventListener("error", onComplete, { once: true });
    setTimeout(resolve, timeoutInMilliseconds);
  });
}
function getHistoryMethodForAction(action) {
  switch (action) {
    case "replace":
      return history.replaceState;
    case "advance":
    case "restore":
      return history.pushState;
  }
}
function isAction(action) {
  return action == "advance" || action == "replace" || action == "restore";
}
function getVisitAction(...elements) {
  const action = getAttribute("data-turbo-action", ...elements);
  return isAction(action) ? action : null;
}
function getMetaElement(name) {
  return document.querySelector(`meta[name="${name}"]`);
}
function getMetaContent(name) {
  const element = getMetaElement(name);
  return element && element.content;
}
function getCspNonce() {
  const element = getMetaElement("csp-nonce");
  if (element) {
    const { nonce, content } = element;
    return nonce == "" ? content : nonce;
  }
}
function setMetaContent(name, content) {
  let element = getMetaElement(name);
  if (!element) {
    element = document.createElement("meta");
    element.setAttribute("name", name);
    document.head.appendChild(element);
  }
  element.setAttribute("content", content);
  return element;
}
function findClosestRecursively(element, selector) {
  if (element instanceof Element) {
    return element.closest(selector) || findClosestRecursively(element.assignedSlot || element.getRootNode()?.host, selector);
  }
}
function elementIsFocusable(element) {
  const inertDisabledOrHidden = "[inert], :disabled, [hidden], details:not([open]), dialog:not([open])";
  return !!element && element.closest(inertDisabledOrHidden) == null && typeof element.focus == "function";
}
function queryAutofocusableElement(elementOrDocumentFragment) {
  return Array.from(elementOrDocumentFragment.querySelectorAll("[autofocus]")).find(elementIsFocusable);
}
async function around(callback, reader) {
  const before = reader();
  callback();
  await nextAnimationFrame();
  const after = reader();
  return [before, after];
}
function doesNotTargetIFrame(name) {
  if (name === "_blank") {
    return false;
  } else if (name) {
    for (const element of document.getElementsByName(name)) {
      if (element instanceof HTMLIFrameElement) return false;
    }
    return true;
  } else {
    return true;
  }
}
function findLinkFromClickTarget(target) {
  const link = findClosestRecursively(target, "a[href], a[xlink\\:href]");
  if (!link) return null;
  if (link.hasAttribute("download")) return null;
  if (link.hasAttribute("target") && link.target !== "_self") return null;
  return link;
}
function getLocationForLink(link) {
  return expandURL(link.getAttribute("href") || "");
}
function debounce2(fn, delay) {
  let timeoutId = null;
  return (...args) => {
    const callback = () => fn.apply(this, args);
    clearTimeout(timeoutId);
    timeoutId = setTimeout(callback, delay);
  };
}
var submitter = {
  "aria-disabled": {
    beforeSubmit: (submitter2) => {
      submitter2.setAttribute("aria-disabled", "true");
      submitter2.addEventListener("click", cancelEvent);
    },
    afterSubmit: (submitter2) => {
      submitter2.removeAttribute("aria-disabled");
      submitter2.removeEventListener("click", cancelEvent);
    }
  },
  "disabled": {
    beforeSubmit: (submitter2) => submitter2.disabled = true,
    afterSubmit: (submitter2) => submitter2.disabled = false
  }
};
var Config = class {
  #submitter = null;
  constructor(config2) {
    Object.assign(this, config2);
  }
  get submitter() {
    return this.#submitter;
  }
  set submitter(value) {
    this.#submitter = submitter[value] || value;
  }
};
var forms = new Config({
  mode: "on",
  submitter: "disabled"
});
var config = {
  drive,
  forms
};
function expandURL(locatable) {
  return new URL(locatable.toString(), document.baseURI);
}
function getAnchor(url) {
  let anchorMatch;
  if (url.hash) {
    return url.hash.slice(1);
  } else if (anchorMatch = url.href.match(/#(.*)$/)) {
    return anchorMatch[1];
  }
}
function getAction$1(form, submitter2) {
  const action = submitter2?.getAttribute("formaction") || form.getAttribute("action") || form.action;
  return expandURL(action);
}
function getExtension(url) {
  return (getLastPathComponent(url).match(/\.[^.]*$/) || [])[0] || "";
}
function isPrefixedBy(baseURL, url) {
  const prefix2 = addTrailingSlash(url.origin + url.pathname);
  return addTrailingSlash(baseURL.href) === prefix2 || baseURL.href.startsWith(prefix2);
}
function locationIsVisitable(location2, rootLocation) {
  return isPrefixedBy(location2, rootLocation) && !config.drive.unvisitableExtensions.has(getExtension(location2));
}
function getRequestURL(url) {
  const anchor = getAnchor(url);
  return anchor != null ? url.href.slice(0, -(anchor.length + 1)) : url.href;
}
function toCacheKey(url) {
  return getRequestURL(url);
}
function urlsAreEqual(left, right) {
  return expandURL(left).href == expandURL(right).href;
}
function getPathComponents(url) {
  return url.pathname.split("/").slice(1);
}
function getLastPathComponent(url) {
  return getPathComponents(url).slice(-1)[0];
}
function addTrailingSlash(value) {
  return value.endsWith("/") ? value : value + "/";
}
var FetchResponse = class {
  constructor(response) {
    this.response = response;
  }
  get succeeded() {
    return this.response.ok;
  }
  get failed() {
    return !this.succeeded;
  }
  get clientError() {
    return this.statusCode >= 400 && this.statusCode <= 499;
  }
  get serverError() {
    return this.statusCode >= 500 && this.statusCode <= 599;
  }
  get redirected() {
    return this.response.redirected;
  }
  get location() {
    return expandURL(this.response.url);
  }
  get isHTML() {
    return this.contentType && this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/);
  }
  get statusCode() {
    return this.response.status;
  }
  get contentType() {
    return this.header("Content-Type");
  }
  get responseText() {
    return this.response.clone().text();
  }
  get responseHTML() {
    if (this.isHTML) {
      return this.response.clone().text();
    } else {
      return Promise.resolve(void 0);
    }
  }
  header(name) {
    return this.response.headers.get(name);
  }
};
var LimitedSet = class extends Set {
  constructor(maxSize) {
    super();
    this.maxSize = maxSize;
  }
  add(value) {
    if (this.size >= this.maxSize) {
      const iterator = this.values();
      const oldestValue = iterator.next().value;
      this.delete(oldestValue);
    }
    super.add(value);
  }
};
var recentRequests = new LimitedSet(20);
function fetchWithTurboHeaders(url, options = {}) {
  const modifiedHeaders = new Headers(options.headers || {});
  const requestUID = uuid();
  recentRequests.add(requestUID);
  modifiedHeaders.append("X-Turbo-Request-Id", requestUID);
  return window.fetch(url, {
    ...options,
    headers: modifiedHeaders
  });
}
function fetchMethodFromString(method) {
  switch (method.toLowerCase()) {
    case "get":
      return FetchMethod.get;
    case "post":
      return FetchMethod.post;
    case "put":
      return FetchMethod.put;
    case "patch":
      return FetchMethod.patch;
    case "delete":
      return FetchMethod.delete;
  }
}
var FetchMethod = {
  get: "get",
  post: "post",
  put: "put",
  patch: "patch",
  delete: "delete"
};
function fetchEnctypeFromString(encoding) {
  switch (encoding.toLowerCase()) {
    case FetchEnctype.multipart:
      return FetchEnctype.multipart;
    case FetchEnctype.plain:
      return FetchEnctype.plain;
    default:
      return FetchEnctype.urlEncoded;
  }
}
var FetchEnctype = {
  urlEncoded: "application/x-www-form-urlencoded",
  multipart: "multipart/form-data",
  plain: "text/plain"
};
var FetchRequest = class {
  abortController = new AbortController();
  #resolveRequestPromise = (_value) => {
  };
  constructor(delegate, method, location2, requestBody = new URLSearchParams(), target = null, enctype = FetchEnctype.urlEncoded) {
    const [url, body] = buildResourceAndBody(expandURL(location2), method, requestBody, enctype);
    this.delegate = delegate;
    this.url = url;
    this.target = target;
    this.fetchOptions = {
      credentials: "same-origin",
      redirect: "follow",
      method: method.toUpperCase(),
      headers: { ...this.defaultHeaders },
      body,
      signal: this.abortSignal,
      referrer: this.delegate.referrer?.href
    };
    this.enctype = enctype;
  }
  get method() {
    return this.fetchOptions.method;
  }
  set method(value) {
    const fetchBody = this.isSafe ? this.url.searchParams : this.fetchOptions.body || new FormData();
    const fetchMethod = fetchMethodFromString(value) || FetchMethod.get;
    this.url.search = "";
    const [url, body] = buildResourceAndBody(this.url, fetchMethod, fetchBody, this.enctype);
    this.url = url;
    this.fetchOptions.body = body;
    this.fetchOptions.method = fetchMethod.toUpperCase();
  }
  get headers() {
    return this.fetchOptions.headers;
  }
  set headers(value) {
    this.fetchOptions.headers = value;
  }
  get body() {
    if (this.isSafe) {
      return this.url.searchParams;
    } else {
      return this.fetchOptions.body;
    }
  }
  set body(value) {
    this.fetchOptions.body = value;
  }
  get location() {
    return this.url;
  }
  get params() {
    return this.url.searchParams;
  }
  get entries() {
    return this.body ? Array.from(this.body.entries()) : [];
  }
  cancel() {
    this.abortController.abort();
  }
  async perform() {
    const { fetchOptions } = this;
    this.delegate.prepareRequest(this);
    const event2 = await this.#allowRequestToBeIntercepted(fetchOptions);
    try {
      this.delegate.requestStarted(this);
      if (event2.detail.fetchRequest) {
        this.response = event2.detail.fetchRequest.response;
      } else {
        this.response = fetchWithTurboHeaders(this.url.href, fetchOptions);
      }
      const response = await this.response;
      return await this.receive(response);
    } catch (error3) {
      if (error3.name !== "AbortError") {
        if (this.#willDelegateErrorHandling(error3)) {
          this.delegate.requestErrored(this, error3);
        }
        throw error3;
      }
    } finally {
      this.delegate.requestFinished(this);
    }
  }
  async receive(response) {
    const fetchResponse = new FetchResponse(response);
    const event2 = dispatch2("turbo:before-fetch-response", {
      cancelable: true,
      detail: { fetchResponse },
      target: this.target
    });
    if (event2.defaultPrevented) {
      this.delegate.requestPreventedHandlingResponse(this, fetchResponse);
    } else if (fetchResponse.succeeded) {
      this.delegate.requestSucceededWithResponse(this, fetchResponse);
    } else {
      this.delegate.requestFailedWithResponse(this, fetchResponse);
    }
    return fetchResponse;
  }
  get defaultHeaders() {
    return {
      Accept: "text/html, application/xhtml+xml"
    };
  }
  get isSafe() {
    return isSafe(this.method);
  }
  get abortSignal() {
    return this.abortController.signal;
  }
  acceptResponseType(mimeType) {
    this.headers["Accept"] = [mimeType, this.headers["Accept"]].join(", ");
  }
  async #allowRequestToBeIntercepted(fetchOptions) {
    const requestInterception = new Promise((resolve) => this.#resolveRequestPromise = resolve);
    const event2 = dispatch2("turbo:before-fetch-request", {
      cancelable: true,
      detail: {
        fetchOptions,
        url: this.url,
        resume: this.#resolveRequestPromise
      },
      target: this.target
    });
    this.url = event2.detail.url;
    if (event2.defaultPrevented) await requestInterception;
    return event2;
  }
  #willDelegateErrorHandling(error3) {
    const event2 = dispatch2("turbo:fetch-request-error", {
      target: this.target,
      cancelable: true,
      detail: { request: this, error: error3 }
    });
    return !event2.defaultPrevented;
  }
};
function isSafe(fetchMethod) {
  return fetchMethodFromString(fetchMethod) == FetchMethod.get;
}
function buildResourceAndBody(resource, method, requestBody, enctype) {
  const searchParams = Array.from(requestBody).length > 0 ? new URLSearchParams(entriesExcludingFiles(requestBody)) : resource.searchParams;
  if (isSafe(method)) {
    return [mergeIntoURLSearchParams(resource, searchParams), null];
  } else if (enctype == FetchEnctype.urlEncoded) {
    return [resource, searchParams];
  } else {
    return [resource, requestBody];
  }
}
function entriesExcludingFiles(requestBody) {
  const entries = [];
  for (const [name, value] of requestBody) {
    if (value instanceof File) continue;
    else entries.push([name, value]);
  }
  return entries;
}
function mergeIntoURLSearchParams(url, requestBody) {
  const searchParams = new URLSearchParams(entriesExcludingFiles(requestBody));
  url.search = searchParams.toString();
  return url;
}
var AppearanceObserver = class {
  started = false;
  constructor(delegate, element) {
    this.delegate = delegate;
    this.element = element;
    this.intersectionObserver = new IntersectionObserver(this.intersect);
  }
  start() {
    if (!this.started) {
      this.started = true;
      this.intersectionObserver.observe(this.element);
    }
  }
  stop() {
    if (this.started) {
      this.started = false;
      this.intersectionObserver.unobserve(this.element);
    }
  }
  intersect = (entries) => {
    const lastEntry = entries.slice(-1)[0];
    if (lastEntry?.isIntersecting) {
      this.delegate.elementAppearedInViewport(this.element);
    }
  };
};
var StreamMessage = class {
  static contentType = "text/vnd.turbo-stream.html";
  static wrap(message) {
    if (typeof message == "string") {
      return new this(createDocumentFragment(message));
    } else {
      return message;
    }
  }
  constructor(fragment) {
    this.fragment = importStreamElements(fragment);
  }
};
function importStreamElements(fragment) {
  for (const element of fragment.querySelectorAll("turbo-stream")) {
    const streamElement = document.importNode(element, true);
    for (const inertScriptElement of streamElement.templateElement.content.querySelectorAll("script")) {
      inertScriptElement.replaceWith(activateScriptElement(inertScriptElement));
    }
    element.replaceWith(streamElement);
  }
  return fragment;
}
var PREFETCH_DELAY = 100;
var PrefetchCache = class {
  #prefetchTimeout = null;
  #prefetched = null;
  get(url) {
    if (this.#prefetched && this.#prefetched.url === url && this.#prefetched.expire > Date.now()) {
      return this.#prefetched.request;
    }
  }
  setLater(url, request, ttl) {
    this.clear();
    this.#prefetchTimeout = setTimeout(() => {
      request.perform();
      this.set(url, request, ttl);
      this.#prefetchTimeout = null;
    }, PREFETCH_DELAY);
  }
  set(url, request, ttl) {
    this.#prefetched = { url, request, expire: new Date((/* @__PURE__ */ new Date()).getTime() + ttl) };
  }
  clear() {
    if (this.#prefetchTimeout) clearTimeout(this.#prefetchTimeout);
    this.#prefetched = null;
  }
};
var cacheTtl = 10 * 1e3;
var prefetchCache = new PrefetchCache();
var FormSubmissionState = {
  initialized: "initialized",
  requesting: "requesting",
  waiting: "waiting",
  receiving: "receiving",
  stopping: "stopping",
  stopped: "stopped"
};
var FormSubmission = class _FormSubmission {
  state = FormSubmissionState.initialized;
  static confirmMethod(message) {
    return Promise.resolve(confirm(message));
  }
  constructor(delegate, formElement, submitter2, mustRedirect = false) {
    const method = getMethod(formElement, submitter2);
    const action = getAction(getFormAction(formElement, submitter2), method);
    const body = buildFormData(formElement, submitter2);
    const enctype = getEnctype(formElement, submitter2);
    this.delegate = delegate;
    this.formElement = formElement;
    this.submitter = submitter2;
    this.fetchRequest = new FetchRequest(this, method, action, body, formElement, enctype);
    this.mustRedirect = mustRedirect;
  }
  get method() {
    return this.fetchRequest.method;
  }
  set method(value) {
    this.fetchRequest.method = value;
  }
  get action() {
    return this.fetchRequest.url.toString();
  }
  set action(value) {
    this.fetchRequest.url = expandURL(value);
  }
  get body() {
    return this.fetchRequest.body;
  }
  get enctype() {
    return this.fetchRequest.enctype;
  }
  get isSafe() {
    return this.fetchRequest.isSafe;
  }
  get location() {
    return this.fetchRequest.url;
  }
  // The submission process
  async start() {
    const { initialized, requesting } = FormSubmissionState;
    const confirmationMessage = getAttribute("data-turbo-confirm", this.submitter, this.formElement);
    if (typeof confirmationMessage === "string") {
      const confirmMethod = typeof config.forms.confirm === "function" ? config.forms.confirm : _FormSubmission.confirmMethod;
      const answer = await confirmMethod(confirmationMessage, this.formElement, this.submitter);
      if (!answer) {
        return;
      }
    }
    if (this.state == initialized) {
      this.state = requesting;
      return this.fetchRequest.perform();
    }
  }
  stop() {
    const { stopping, stopped } = FormSubmissionState;
    if (this.state != stopping && this.state != stopped) {
      this.state = stopping;
      this.fetchRequest.cancel();
      return true;
    }
  }
  // Fetch request delegate
  prepareRequest(request) {
    if (!request.isSafe) {
      const token = getCookieValue(getMetaContent("csrf-param")) || getMetaContent("csrf-token");
      if (token) {
        request.headers["X-CSRF-Token"] = token;
      }
    }
    if (this.requestAcceptsTurboStreamResponse(request)) {
      request.acceptResponseType(StreamMessage.contentType);
    }
  }
  requestStarted(_request) {
    this.state = FormSubmissionState.waiting;
    if (this.submitter) config.forms.submitter.beforeSubmit(this.submitter);
    this.setSubmitsWith();
    markAsBusy(this.formElement);
    dispatch2("turbo:submit-start", {
      target: this.formElement,
      detail: { formSubmission: this }
    });
    this.delegate.formSubmissionStarted(this);
  }
  requestPreventedHandlingResponse(request, response) {
    prefetchCache.clear();
    this.result = { success: response.succeeded, fetchResponse: response };
  }
  requestSucceededWithResponse(request, response) {
    if (response.clientError || response.serverError) {
      this.delegate.formSubmissionFailedWithResponse(this, response);
      return;
    }
    prefetchCache.clear();
    if (this.requestMustRedirect(request) && responseSucceededWithoutRedirect(response)) {
      const error3 = new Error("Form responses must redirect to another location");
      this.delegate.formSubmissionErrored(this, error3);
    } else {
      this.state = FormSubmissionState.receiving;
      this.result = { success: true, fetchResponse: response };
      this.delegate.formSubmissionSucceededWithResponse(this, response);
    }
  }
  requestFailedWithResponse(request, response) {
    this.result = { success: false, fetchResponse: response };
    this.delegate.formSubmissionFailedWithResponse(this, response);
  }
  requestErrored(request, error3) {
    this.result = { success: false, error: error3 };
    this.delegate.formSubmissionErrored(this, error3);
  }
  requestFinished(_request) {
    this.state = FormSubmissionState.stopped;
    if (this.submitter) config.forms.submitter.afterSubmit(this.submitter);
    this.resetSubmitterText();
    clearBusyState(this.formElement);
    dispatch2("turbo:submit-end", {
      target: this.formElement,
      detail: { formSubmission: this, ...this.result }
    });
    this.delegate.formSubmissionFinished(this);
  }
  // Private
  setSubmitsWith() {
    if (!this.submitter || !this.submitsWith) return;
    if (this.submitter.matches("button")) {
      this.originalSubmitText = this.submitter.innerHTML;
      this.submitter.innerHTML = this.submitsWith;
    } else if (this.submitter.matches("input")) {
      const input = this.submitter;
      this.originalSubmitText = input.value;
      input.value = this.submitsWith;
    }
  }
  resetSubmitterText() {
    if (!this.submitter || !this.originalSubmitText) return;
    if (this.submitter.matches("button")) {
      this.submitter.innerHTML = this.originalSubmitText;
    } else if (this.submitter.matches("input")) {
      const input = this.submitter;
      input.value = this.originalSubmitText;
    }
  }
  requestMustRedirect(request) {
    return !request.isSafe && this.mustRedirect;
  }
  requestAcceptsTurboStreamResponse(request) {
    return !request.isSafe || hasAttribute("data-turbo-stream", this.submitter, this.formElement);
  }
  get submitsWith() {
    return this.submitter?.getAttribute("data-turbo-submits-with");
  }
};
function buildFormData(formElement, submitter2) {
  const formData = new FormData(formElement);
  const name = submitter2?.getAttribute("name");
  const value = submitter2?.getAttribute("value");
  if (name) {
    formData.append(name, value || "");
  }
  return formData;
}
function getCookieValue(cookieName) {
  if (cookieName != null) {
    const cookies = document.cookie ? document.cookie.split("; ") : [];
    const cookie = cookies.find((cookie2) => cookie2.startsWith(cookieName));
    if (cookie) {
      const value = cookie.split("=").slice(1).join("=");
      return value ? decodeURIComponent(value) : void 0;
    }
  }
}
function responseSucceededWithoutRedirect(response) {
  return response.statusCode == 200 && !response.redirected;
}
function getFormAction(formElement, submitter2) {
  const formElementAction = typeof formElement.action === "string" ? formElement.action : null;
  if (submitter2?.hasAttribute("formaction")) {
    return submitter2.getAttribute("formaction") || "";
  } else {
    return formElement.getAttribute("action") || formElementAction || "";
  }
}
function getAction(formAction, fetchMethod) {
  const action = expandURL(formAction);
  if (isSafe(fetchMethod)) {
    action.search = "";
  }
  return action;
}
function getMethod(formElement, submitter2) {
  const method = submitter2?.getAttribute("formmethod") || formElement.getAttribute("method") || "";
  return fetchMethodFromString(method.toLowerCase()) || FetchMethod.get;
}
function getEnctype(formElement, submitter2) {
  return fetchEnctypeFromString(submitter2?.getAttribute("formenctype") || formElement.enctype);
}
var Snapshot = class {
  constructor(element) {
    this.element = element;
  }
  get activeElement() {
    return this.element.ownerDocument.activeElement;
  }
  get children() {
    return [...this.element.children];
  }
  hasAnchor(anchor) {
    return this.getElementForAnchor(anchor) != null;
  }
  getElementForAnchor(anchor) {
    return anchor ? this.element.querySelector(`[id='${anchor}'], a[name='${anchor}']`) : null;
  }
  get isConnected() {
    return this.element.isConnected;
  }
  get firstAutofocusableElement() {
    return queryAutofocusableElement(this.element);
  }
  get permanentElements() {
    return queryPermanentElementsAll(this.element);
  }
  getPermanentElementById(id2) {
    return getPermanentElementById(this.element, id2);
  }
  getPermanentElementMapForSnapshot(snapshot) {
    const permanentElementMap = {};
    for (const currentPermanentElement of this.permanentElements) {
      const { id: id2 } = currentPermanentElement;
      const newPermanentElement = snapshot.getPermanentElementById(id2);
      if (newPermanentElement) {
        permanentElementMap[id2] = [currentPermanentElement, newPermanentElement];
      }
    }
    return permanentElementMap;
  }
};
function getPermanentElementById(node, id2) {
  return node.querySelector(`#${id2}[data-turbo-permanent]`);
}
function queryPermanentElementsAll(node) {
  return node.querySelectorAll("[id][data-turbo-permanent]");
}
var FormSubmitObserver = class {
  started = false;
  constructor(delegate, eventTarget) {
    this.delegate = delegate;
    this.eventTarget = eventTarget;
  }
  start() {
    if (!this.started) {
      this.eventTarget.addEventListener("submit", this.submitCaptured, true);
      this.started = true;
    }
  }
  stop() {
    if (this.started) {
      this.eventTarget.removeEventListener("submit", this.submitCaptured, true);
      this.started = false;
    }
  }
  submitCaptured = () => {
    this.eventTarget.removeEventListener("submit", this.submitBubbled, false);
    this.eventTarget.addEventListener("submit", this.submitBubbled, false);
  };
  submitBubbled = (event2) => {
    if (!event2.defaultPrevented) {
      const form = event2.target instanceof HTMLFormElement ? event2.target : void 0;
      const submitter2 = event2.submitter || void 0;
      if (form && submissionDoesNotDismissDialog(form, submitter2) && submissionDoesNotTargetIFrame(form, submitter2) && this.delegate.willSubmitForm(form, submitter2)) {
        event2.preventDefault();
        event2.stopImmediatePropagation();
        this.delegate.formSubmitted(form, submitter2);
      }
    }
  };
};
function submissionDoesNotDismissDialog(form, submitter2) {
  const method = submitter2?.getAttribute("formmethod") || form.getAttribute("method");
  return method != "dialog";
}
function submissionDoesNotTargetIFrame(form, submitter2) {
  const target = submitter2?.getAttribute("formtarget") || form.getAttribute("target");
  return doesNotTargetIFrame(target);
}
var View = class {
  #resolveRenderPromise = (_value) => {
  };
  #resolveInterceptionPromise = (_value) => {
  };
  constructor(delegate, element) {
    this.delegate = delegate;
    this.element = element;
  }
  // Scrolling
  scrollToAnchor(anchor) {
    const element = this.snapshot.getElementForAnchor(anchor);
    if (element) {
      this.focusElement(element);
      this.scrollToElement(element);
    } else {
      this.scrollToPosition({ x: 0, y: 0 });
    }
  }
  scrollToAnchorFromLocation(location2) {
    this.scrollToAnchor(getAnchor(location2));
  }
  scrollToElement(element) {
    element.scrollIntoView();
  }
  focusElement(element) {
    if (element instanceof HTMLElement) {
      if (element.hasAttribute("tabindex")) {
        element.focus();
      } else {
        element.setAttribute("tabindex", "-1");
        element.focus();
        element.removeAttribute("tabindex");
      }
    }
  }
  scrollToPosition({ x, y }) {
    this.scrollRoot.scrollTo(x, y);
  }
  scrollToTop() {
    this.scrollToPosition({ x: 0, y: 0 });
  }
  get scrollRoot() {
    return window;
  }
  // Rendering
  async render(renderer) {
    const { isPreview, shouldRender, willRender, newSnapshot: snapshot } = renderer;
    const shouldInvalidate = willRender;
    if (shouldRender) {
      try {
        this.renderPromise = new Promise((resolve) => this.#resolveRenderPromise = resolve);
        this.renderer = renderer;
        await this.prepareToRenderSnapshot(renderer);
        const renderInterception = new Promise((resolve) => this.#resolveInterceptionPromise = resolve);
        const options = { resume: this.#resolveInterceptionPromise, render: this.renderer.renderElement, renderMethod: this.renderer.renderMethod };
        const immediateRender = this.delegate.allowsImmediateRender(snapshot, options);
        if (!immediateRender) await renderInterception;
        await this.renderSnapshot(renderer);
        this.delegate.viewRenderedSnapshot(snapshot, isPreview, this.renderer.renderMethod);
        this.delegate.preloadOnLoadLinksForView(this.element);
        this.finishRenderingSnapshot(renderer);
      } finally {
        delete this.renderer;
        this.#resolveRenderPromise(void 0);
        delete this.renderPromise;
      }
    } else if (shouldInvalidate) {
      this.invalidate(renderer.reloadReason);
    }
  }
  invalidate(reason) {
    this.delegate.viewInvalidated(reason);
  }
  async prepareToRenderSnapshot(renderer) {
    this.markAsPreview(renderer.isPreview);
    await renderer.prepareToRender();
  }
  markAsPreview(isPreview) {
    if (isPreview) {
      this.element.setAttribute("data-turbo-preview", "");
    } else {
      this.element.removeAttribute("data-turbo-preview");
    }
  }
  markVisitDirection(direction) {
    this.element.setAttribute("data-turbo-visit-direction", direction);
  }
  unmarkVisitDirection() {
    this.element.removeAttribute("data-turbo-visit-direction");
  }
  async renderSnapshot(renderer) {
    await renderer.render();
  }
  finishRenderingSnapshot(renderer) {
    renderer.finishRendering();
  }
};
var FrameView = class extends View {
  missing() {
    this.element.innerHTML = `<strong class="turbo-frame-error">Content missing</strong>`;
  }
  get snapshot() {
    return new Snapshot(this.element);
  }
};
var LinkInterceptor = class {
  constructor(delegate, element) {
    this.delegate = delegate;
    this.element = element;
  }
  start() {
    this.element.addEventListener("click", this.clickBubbled);
    document.addEventListener("turbo:click", this.linkClicked);
    document.addEventListener("turbo:before-visit", this.willVisit);
  }
  stop() {
    this.element.removeEventListener("click", this.clickBubbled);
    document.removeEventListener("turbo:click", this.linkClicked);
    document.removeEventListener("turbo:before-visit", this.willVisit);
  }
  clickBubbled = (event2) => {
    if (this.clickEventIsSignificant(event2)) {
      this.clickEvent = event2;
    } else {
      delete this.clickEvent;
    }
  };
  linkClicked = (event2) => {
    if (this.clickEvent && this.clickEventIsSignificant(event2)) {
      if (this.delegate.shouldInterceptLinkClick(event2.target, event2.detail.url, event2.detail.originalEvent)) {
        this.clickEvent.preventDefault();
        event2.preventDefault();
        this.delegate.linkClickIntercepted(event2.target, event2.detail.url, event2.detail.originalEvent);
      }
    }
    delete this.clickEvent;
  };
  willVisit = (_event) => {
    delete this.clickEvent;
  };
  clickEventIsSignificant(event2) {
    const target = event2.composed ? event2.target?.parentElement : event2.target;
    const element = findLinkFromClickTarget(target) || target;
    return element instanceof Element && element.closest("turbo-frame, html") == this.element;
  }
};
var LinkClickObserver = class {
  started = false;
  constructor(delegate, eventTarget) {
    this.delegate = delegate;
    this.eventTarget = eventTarget;
  }
  start() {
    if (!this.started) {
      this.eventTarget.addEventListener("click", this.clickCaptured, true);
      this.started = true;
    }
  }
  stop() {
    if (this.started) {
      this.eventTarget.removeEventListener("click", this.clickCaptured, true);
      this.started = false;
    }
  }
  clickCaptured = () => {
    this.eventTarget.removeEventListener("click", this.clickBubbled, false);
    this.eventTarget.addEventListener("click", this.clickBubbled, false);
  };
  clickBubbled = (event2) => {
    if (event2 instanceof MouseEvent && this.clickEventIsSignificant(event2)) {
      const target = event2.composedPath && event2.composedPath()[0] || event2.target;
      const link = findLinkFromClickTarget(target);
      if (link && doesNotTargetIFrame(link.target)) {
        const location2 = getLocationForLink(link);
        if (this.delegate.willFollowLinkToLocation(link, location2, event2)) {
          event2.preventDefault();
          this.delegate.followedLinkToLocation(link, location2);
        }
      }
    }
  };
  clickEventIsSignificant(event2) {
    return !(event2.target && event2.target.isContentEditable || event2.defaultPrevented || event2.which > 1 || event2.altKey || event2.ctrlKey || event2.metaKey || event2.shiftKey);
  }
};
var FormLinkClickObserver = class {
  constructor(delegate, element) {
    this.delegate = delegate;
    this.linkInterceptor = new LinkClickObserver(this, element);
  }
  start() {
    this.linkInterceptor.start();
  }
  stop() {
    this.linkInterceptor.stop();
  }
  // Link hover observer delegate
  canPrefetchRequestToLocation(link, location2) {
    return false;
  }
  prefetchAndCacheRequestToLocation(link, location2) {
    return;
  }
  // Link click observer delegate
  willFollowLinkToLocation(link, location2, originalEvent) {
    return this.delegate.willSubmitFormLinkToLocation(link, location2, originalEvent) && (link.hasAttribute("data-turbo-method") || link.hasAttribute("data-turbo-stream"));
  }
  followedLinkToLocation(link, location2) {
    const form = document.createElement("form");
    const type = "hidden";
    for (const [name, value] of location2.searchParams) {
      form.append(Object.assign(document.createElement("input"), { type, name, value }));
    }
    const action = Object.assign(location2, { search: "" });
    form.setAttribute("data-turbo", "true");
    form.setAttribute("action", action.href);
    form.setAttribute("hidden", "");
    const method = link.getAttribute("data-turbo-method");
    if (method) form.setAttribute("method", method);
    const turboFrame = link.getAttribute("data-turbo-frame");
    if (turboFrame) form.setAttribute("data-turbo-frame", turboFrame);
    const turboAction = getVisitAction(link);
    if (turboAction) form.setAttribute("data-turbo-action", turboAction);
    const turboConfirm = link.getAttribute("data-turbo-confirm");
    if (turboConfirm) form.setAttribute("data-turbo-confirm", turboConfirm);
    const turboStream = link.hasAttribute("data-turbo-stream");
    if (turboStream) form.setAttribute("data-turbo-stream", "");
    this.delegate.submittedFormLinkToLocation(link, location2, form);
    document.body.appendChild(form);
    form.addEventListener("turbo:submit-end", () => form.remove(), { once: true });
    requestAnimationFrame(() => form.requestSubmit());
  }
};
var Bardo = class {
  static async preservingPermanentElements(delegate, permanentElementMap, callback) {
    const bardo = new this(delegate, permanentElementMap);
    bardo.enter();
    await callback();
    bardo.leave();
  }
  constructor(delegate, permanentElementMap) {
    this.delegate = delegate;
    this.permanentElementMap = permanentElementMap;
  }
  enter() {
    for (const id2 in this.permanentElementMap) {
      const [currentPermanentElement, newPermanentElement] = this.permanentElementMap[id2];
      this.delegate.enteringBardo(currentPermanentElement, newPermanentElement);
      this.replaceNewPermanentElementWithPlaceholder(newPermanentElement);
    }
  }
  leave() {
    for (const id2 in this.permanentElementMap) {
      const [currentPermanentElement] = this.permanentElementMap[id2];
      this.replaceCurrentPermanentElementWithClone(currentPermanentElement);
      this.replacePlaceholderWithPermanentElement(currentPermanentElement);
      this.delegate.leavingBardo(currentPermanentElement);
    }
  }
  replaceNewPermanentElementWithPlaceholder(permanentElement) {
    const placeholder = createPlaceholderForPermanentElement(permanentElement);
    permanentElement.replaceWith(placeholder);
  }
  replaceCurrentPermanentElementWithClone(permanentElement) {
    const clone2 = permanentElement.cloneNode(true);
    permanentElement.replaceWith(clone2);
  }
  replacePlaceholderWithPermanentElement(permanentElement) {
    const placeholder = this.getPlaceholderById(permanentElement.id);
    placeholder?.replaceWith(permanentElement);
  }
  getPlaceholderById(id2) {
    return this.placeholders.find((element) => element.content == id2);
  }
  get placeholders() {
    return [...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")];
  }
};
function createPlaceholderForPermanentElement(permanentElement) {
  const element = document.createElement("meta");
  element.setAttribute("name", "turbo-permanent-placeholder");
  element.setAttribute("content", permanentElement.id);
  return element;
}
var Renderer = class {
  #activeElement = null;
  static renderElement(currentElement, newElement) {
  }
  constructor(currentSnapshot, newSnapshot, isPreview, willRender = true) {
    this.currentSnapshot = currentSnapshot;
    this.newSnapshot = newSnapshot;
    this.isPreview = isPreview;
    this.willRender = willRender;
    this.renderElement = this.constructor.renderElement;
    this.promise = new Promise((resolve, reject) => this.resolvingFunctions = { resolve, reject });
  }
  get shouldRender() {
    return true;
  }
  get shouldAutofocus() {
    return true;
  }
  get reloadReason() {
    return;
  }
  prepareToRender() {
    return;
  }
  render() {
  }
  finishRendering() {
    if (this.resolvingFunctions) {
      this.resolvingFunctions.resolve();
      delete this.resolvingFunctions;
    }
  }
  async preservingPermanentElements(callback) {
    await Bardo.preservingPermanentElements(this, this.permanentElementMap, callback);
  }
  focusFirstAutofocusableElement() {
    if (this.shouldAutofocus) {
      const element = this.connectedSnapshot.firstAutofocusableElement;
      if (element) {
        element.focus();
      }
    }
  }
  // Bardo delegate
  enteringBardo(currentPermanentElement) {
    if (this.#activeElement) return;
    if (currentPermanentElement.contains(this.currentSnapshot.activeElement)) {
      this.#activeElement = this.currentSnapshot.activeElement;
    }
  }
  leavingBardo(currentPermanentElement) {
    if (currentPermanentElement.contains(this.#activeElement) && this.#activeElement instanceof HTMLElement) {
      this.#activeElement.focus();
      this.#activeElement = null;
    }
  }
  get connectedSnapshot() {
    return this.newSnapshot.isConnected ? this.newSnapshot : this.currentSnapshot;
  }
  get currentElement() {
    return this.currentSnapshot.element;
  }
  get newElement() {
    return this.newSnapshot.element;
  }
  get permanentElementMap() {
    return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot);
  }
  get renderMethod() {
    return "replace";
  }
};
var FrameRenderer = class extends Renderer {
  static renderElement(currentElement, newElement) {
    const destinationRange = document.createRange();
    destinationRange.selectNodeContents(currentElement);
    destinationRange.deleteContents();
    const frameElement = newElement;
    const sourceRange = frameElement.ownerDocument?.createRange();
    if (sourceRange) {
      sourceRange.selectNodeContents(frameElement);
      currentElement.appendChild(sourceRange.extractContents());
    }
  }
  constructor(delegate, currentSnapshot, newSnapshot, renderElement, isPreview, willRender = true) {
    super(currentSnapshot, newSnapshot, renderElement, isPreview, willRender);
    this.delegate = delegate;
  }
  get shouldRender() {
    return true;
  }
  async render() {
    await nextRepaint();
    this.preservingPermanentElements(() => {
      this.loadFrameElement();
    });
    this.scrollFrameIntoView();
    await nextRepaint();
    this.focusFirstAutofocusableElement();
    await nextRepaint();
    this.activateScriptElements();
  }
  loadFrameElement() {
    this.delegate.willRenderFrame(this.currentElement, this.newElement);
    this.renderElement(this.currentElement, this.newElement);
  }
  scrollFrameIntoView() {
    if (this.currentElement.autoscroll || this.newElement.autoscroll) {
      const element = this.currentElement.firstElementChild;
      const block = readScrollLogicalPosition(this.currentElement.getAttribute("data-autoscroll-block"), "end");
      const behavior = readScrollBehavior(this.currentElement.getAttribute("data-autoscroll-behavior"), "auto");
      if (element) {
        element.scrollIntoView({ block, behavior });
        return true;
      }
    }
    return false;
  }
  activateScriptElements() {
    for (const inertScriptElement of this.newScriptElements) {
      const activatedScriptElement = activateScriptElement(inertScriptElement);
      inertScriptElement.replaceWith(activatedScriptElement);
    }
  }
  get newScriptElements() {
    return this.currentElement.querySelectorAll("script");
  }
};
function readScrollLogicalPosition(value, defaultValue) {
  if (value == "end" || value == "start" || value == "center" || value == "nearest") {
    return value;
  } else {
    return defaultValue;
  }
}
function readScrollBehavior(value, defaultValue) {
  if (value == "auto" || value == "smooth") {
    return value;
  } else {
    return defaultValue;
  }
}
var Idiomorph = function() {
  const noOp = () => {
  };
  const defaults = {
    morphStyle: "outerHTML",
    callbacks: {
      beforeNodeAdded: noOp,
      afterNodeAdded: noOp,
      beforeNodeMorphed: noOp,
      afterNodeMorphed: noOp,
      beforeNodeRemoved: noOp,
      afterNodeRemoved: noOp,
      beforeAttributeUpdated: noOp
    },
    head: {
      style: "merge",
      shouldPreserve: (elt) => elt.getAttribute("im-preserve") === "true",
      shouldReAppend: (elt) => elt.getAttribute("im-re-append") === "true",
      shouldRemove: noOp,
      afterHeadMorphed: noOp
    },
    restoreFocus: true
  };
  function morph(oldNode, newContent, config2 = {}) {
    oldNode = normalizeElement(oldNode);
    const newNode = normalizeParent(newContent);
    const ctx = createMorphContext(oldNode, newNode, config2);
    const morphedNodes = saveAndRestoreFocus(ctx, () => {
      return withHeadBlocking(
        ctx,
        oldNode,
        newNode,
        /** @param {MorphContext} ctx */
        (ctx2) => {
          if (ctx2.morphStyle === "innerHTML") {
            morphChildren2(ctx2, oldNode, newNode);
            return Array.from(oldNode.childNodes);
          } else {
            return morphOuterHTML(ctx2, oldNode, newNode);
          }
        }
      );
    });
    ctx.pantry.remove();
    return morphedNodes;
  }
  function morphOuterHTML(ctx, oldNode, newNode) {
    const oldParent = normalizeParent(oldNode);
    let childNodes = Array.from(oldParent.childNodes);
    const index = childNodes.indexOf(oldNode);
    const rightMargin = childNodes.length - (index + 1);
    morphChildren2(
      ctx,
      oldParent,
      newNode,
      // these two optional params are the secret sauce
      oldNode,
      // start point for iteration
      oldNode.nextSibling
      // end point for iteration
    );
    childNodes = Array.from(oldParent.childNodes);
    return childNodes.slice(index, childNodes.length - rightMargin);
  }
  function saveAndRestoreFocus(ctx, fn) {
    if (!ctx.config.restoreFocus) return fn();
    let activeElement = (
      /** @type {HTMLInputElement|HTMLTextAreaElement|null} */
      document.activeElement
    );
    if (!(activeElement instanceof HTMLInputElement || activeElement instanceof HTMLTextAreaElement)) {
      return fn();
    }
    const { id: activeElementId, selectionStart, selectionEnd } = activeElement;
    const results = fn();
    if (activeElementId && activeElementId !== document.activeElement?.id) {
      activeElement = ctx.target.querySelector(`#${activeElementId}`);
      activeElement?.focus();
    }
    if (activeElement && !activeElement.selectionEnd && selectionEnd) {
      activeElement.setSelectionRange(selectionStart, selectionEnd);
    }
    return results;
  }
  const morphChildren2 = /* @__PURE__ */ function() {
    function morphChildren3(ctx, oldParent, newParent, insertionPoint = null, endPoint = null) {
      if (oldParent instanceof HTMLTemplateElement && newParent instanceof HTMLTemplateElement) {
        oldParent = oldParent.content;
        newParent = newParent.content;
      }
      insertionPoint ||= oldParent.firstChild;
      for (const newChild of newParent.childNodes) {
        if (insertionPoint && insertionPoint != endPoint) {
          const bestMatch = findBestMatch(
            ctx,
            newChild,
            insertionPoint,
            endPoint
          );
          if (bestMatch) {
            if (bestMatch !== insertionPoint) {
              removeNodesBetween(ctx, insertionPoint, bestMatch);
            }
            morphNode(bestMatch, newChild, ctx);
            insertionPoint = bestMatch.nextSibling;
            continue;
          }
        }
        if (newChild instanceof Element && ctx.persistentIds.has(newChild.id)) {
          const movedChild = moveBeforeById(
            oldParent,
            newChild.id,
            insertionPoint,
            ctx
          );
          morphNode(movedChild, newChild, ctx);
          insertionPoint = movedChild.nextSibling;
          continue;
        }
        const insertedNode = createNode(
          oldParent,
          newChild,
          insertionPoint,
          ctx
        );
        if (insertedNode) {
          insertionPoint = insertedNode.nextSibling;
        }
      }
      while (insertionPoint && insertionPoint != endPoint) {
        const tempNode = insertionPoint;
        insertionPoint = insertionPoint.nextSibling;
        removeNode(ctx, tempNode);
      }
    }
    function createNode(oldParent, newChild, insertionPoint, ctx) {
      if (ctx.callbacks.beforeNodeAdded(newChild) === false) return null;
      if (ctx.idMap.has(newChild)) {
        const newEmptyChild = document.createElement(
          /** @type {Element} */
          newChild.tagName
        );
        oldParent.insertBefore(newEmptyChild, insertionPoint);
        morphNode(newEmptyChild, newChild, ctx);
        ctx.callbacks.afterNodeAdded(newEmptyChild);
        return newEmptyChild;
      } else {
        const newClonedChild = document.importNode(newChild, true);
        oldParent.insertBefore(newClonedChild, insertionPoint);
        ctx.callbacks.afterNodeAdded(newClonedChild);
        return newClonedChild;
      }
    }
    const findBestMatch = /* @__PURE__ */ function() {
      function findBestMatch2(ctx, node, startPoint, endPoint) {
        let softMatch = null;
        let nextSibling = node.nextSibling;
        let siblingSoftMatchCount = 0;
        let cursor = startPoint;
        while (cursor && cursor != endPoint) {
          if (isSoftMatch(cursor, node)) {
            if (isIdSetMatch(ctx, cursor, node)) {
              return cursor;
            }
            if (softMatch === null) {
              if (!ctx.idMap.has(cursor)) {
                softMatch = cursor;
              }
            }
          }
          if (softMatch === null && nextSibling && isSoftMatch(cursor, nextSibling)) {
            siblingSoftMatchCount++;
            nextSibling = nextSibling.nextSibling;
            if (siblingSoftMatchCount >= 2) {
              softMatch = void 0;
            }
          }
          if (cursor.contains(document.activeElement)) break;
          cursor = cursor.nextSibling;
        }
        return softMatch || null;
      }
      function isIdSetMatch(ctx, oldNode, newNode) {
        let oldSet = ctx.idMap.get(oldNode);
        let newSet = ctx.idMap.get(newNode);
        if (!newSet || !oldSet) return false;
        for (const id2 of oldSet) {
          if (newSet.has(id2)) {
            return true;
          }
        }
        return false;
      }
      function isSoftMatch(oldNode, newNode) {
        const oldElt = (
          /** @type {Element} */
          oldNode
        );
        const newElt = (
          /** @type {Element} */
          newNode
        );
        return oldElt.nodeType === newElt.nodeType && oldElt.tagName === newElt.tagName && // If oldElt has an `id` with possible state and it doesn't match newElt.id then avoid morphing.
        // We'll still match an anonymous node with an IDed newElt, though, because if it got this far,
        // its not persistent, and new nodes can't have any hidden state.
        (!oldElt.id || oldElt.id === newElt.id);
      }
      return findBestMatch2;
    }();
    function removeNode(ctx, node) {
      if (ctx.idMap.has(node)) {
        moveBefore(ctx.pantry, node, null);
      } else {
        if (ctx.callbacks.beforeNodeRemoved(node) === false) return;
        node.parentNode?.removeChild(node);
        ctx.callbacks.afterNodeRemoved(node);
      }
    }
    function removeNodesBetween(ctx, startInclusive, endExclusive) {
      let cursor = startInclusive;
      while (cursor && cursor !== endExclusive) {
        let tempNode = (
          /** @type {Node} */
          cursor
        );
        cursor = cursor.nextSibling;
        removeNode(ctx, tempNode);
      }
      return cursor;
    }
    function moveBeforeById(parentNode, id2, after, ctx) {
      const target = (
        /** @type {Element} - will always be found */
        ctx.target.querySelector(`#${id2}`) || ctx.pantry.querySelector(`#${id2}`)
      );
      removeElementFromAncestorsIdMaps(target, ctx);
      moveBefore(parentNode, target, after);
      return target;
    }
    function removeElementFromAncestorsIdMaps(element, ctx) {
      const id2 = element.id;
      while (element = element.parentNode) {
        let idSet = ctx.idMap.get(element);
        if (idSet) {
          idSet.delete(id2);
          if (!idSet.size) {
            ctx.idMap.delete(element);
          }
        }
      }
    }
    function moveBefore(parentNode, element, after) {
      if (parentNode.moveBefore) {
        try {
          parentNode.moveBefore(element, after);
        } catch (e) {
          parentNode.insertBefore(element, after);
        }
      } else {
        parentNode.insertBefore(element, after);
      }
    }
    return morphChildren3;
  }();
  const morphNode = /* @__PURE__ */ function() {
    function morphNode2(oldNode, newContent, ctx) {
      if (ctx.ignoreActive && oldNode === document.activeElement) {
        return null;
      }
      if (ctx.callbacks.beforeNodeMorphed(oldNode, newContent) === false) {
        return oldNode;
      }
      if (oldNode instanceof HTMLHeadElement && ctx.head.ignore) ;
      else if (oldNode instanceof HTMLHeadElement && ctx.head.style !== "morph") {
        handleHeadElement(
          oldNode,
          /** @type {HTMLHeadElement} */
          newContent,
          ctx
        );
      } else {
        morphAttributes(oldNode, newContent, ctx);
        if (!ignoreValueOfActiveElement(oldNode, ctx)) {
          morphChildren2(ctx, oldNode, newContent);
        }
      }
      ctx.callbacks.afterNodeMorphed(oldNode, newContent);
      return oldNode;
    }
    function morphAttributes(oldNode, newNode, ctx) {
      let type = newNode.nodeType;
      if (type === 1) {
        const oldElt = (
          /** @type {Element} */
          oldNode
        );
        const newElt = (
          /** @type {Element} */
          newNode
        );
        const oldAttributes = oldElt.attributes;
        const newAttributes = newElt.attributes;
        for (const newAttribute of newAttributes) {
          if (ignoreAttribute(newAttribute.name, oldElt, "update", ctx)) {
            continue;
          }
          if (oldElt.getAttribute(newAttribute.name) !== newAttribute.value) {
            oldElt.setAttribute(newAttribute.name, newAttribute.value);
          }
        }
        for (let i = oldAttributes.length - 1; 0 <= i; i--) {
          const oldAttribute = oldAttributes[i];
          if (!oldAttribute) continue;
          if (!newElt.hasAttribute(oldAttribute.name)) {
            if (ignoreAttribute(oldAttribute.name, oldElt, "remove", ctx)) {
              continue;
            }
            oldElt.removeAttribute(oldAttribute.name);
          }
        }
        if (!ignoreValueOfActiveElement(oldElt, ctx)) {
          syncInputValue(oldElt, newElt, ctx);
        }
      }
      if (type === 8 || type === 3) {
        if (oldNode.nodeValue !== newNode.nodeValue) {
          oldNode.nodeValue = newNode.nodeValue;
        }
      }
    }
    function syncInputValue(oldElement, newElement, ctx) {
      if (oldElement instanceof HTMLInputElement && newElement instanceof HTMLInputElement && newElement.type !== "file") {
        let newValue = newElement.value;
        let oldValue = oldElement.value;
        syncBooleanAttribute(oldElement, newElement, "checked", ctx);
        syncBooleanAttribute(oldElement, newElement, "disabled", ctx);
        if (!newElement.hasAttribute("value")) {
          if (!ignoreAttribute("value", oldElement, "remove", ctx)) {
            oldElement.value = "";
            oldElement.removeAttribute("value");
          }
        } else if (oldValue !== newValue) {
          if (!ignoreAttribute("value", oldElement, "update", ctx)) {
            oldElement.setAttribute("value", newValue);
            oldElement.value = newValue;
          }
        }
      } else if (oldElement instanceof HTMLOptionElement && newElement instanceof HTMLOptionElement) {
        syncBooleanAttribute(oldElement, newElement, "selected", ctx);
      } else if (oldElement instanceof HTMLTextAreaElement && newElement instanceof HTMLTextAreaElement) {
        let newValue = newElement.value;
        let oldValue = oldElement.value;
        if (ignoreAttribute("value", oldElement, "update", ctx)) {
          return;
        }
        if (newValue !== oldValue) {
          oldElement.value = newValue;
        }
        if (oldElement.firstChild && oldElement.firstChild.nodeValue !== newValue) {
          oldElement.firstChild.nodeValue = newValue;
        }
      }
    }
    function syncBooleanAttribute(oldElement, newElement, attributeName, ctx) {
      const newLiveValue = newElement[attributeName], oldLiveValue = oldElement[attributeName];
      if (newLiveValue !== oldLiveValue) {
        const ignoreUpdate = ignoreAttribute(
          attributeName,
          oldElement,
          "update",
          ctx
        );
        if (!ignoreUpdate) {
          oldElement[attributeName] = newElement[attributeName];
        }
        if (newLiveValue) {
          if (!ignoreUpdate) {
            oldElement.setAttribute(attributeName, "");
          }
        } else {
          if (!ignoreAttribute(attributeName, oldElement, "remove", ctx)) {
            oldElement.removeAttribute(attributeName);
          }
        }
      }
    }
    function ignoreAttribute(attr, element, updateType, ctx) {
      if (attr === "value" && ctx.ignoreActiveValue && element === document.activeElement) {
        return true;
      }
      return ctx.callbacks.beforeAttributeUpdated(attr, element, updateType) === false;
    }
    function ignoreValueOfActiveElement(possibleActiveElement, ctx) {
      return !!ctx.ignoreActiveValue && possibleActiveElement === document.activeElement && possibleActiveElement !== document.body;
    }
    return morphNode2;
  }();
  function withHeadBlocking(ctx, oldNode, newNode, callback) {
    if (ctx.head.block) {
      const oldHead = oldNode.querySelector("head");
      const newHead = newNode.querySelector("head");
      if (oldHead && newHead) {
        const promises = handleHeadElement(oldHead, newHead, ctx);
        return Promise.all(promises).then(() => {
          const newCtx = Object.assign(ctx, {
            head: {
              block: false,
              ignore: true
            }
          });
          return callback(newCtx);
        });
      }
    }
    return callback(ctx);
  }
  function handleHeadElement(oldHead, newHead, ctx) {
    let added = [];
    let removed = [];
    let preserved = [];
    let nodesToAppend = [];
    let srcToNewHeadNodes = /* @__PURE__ */ new Map();
    for (const newHeadChild of newHead.children) {
      srcToNewHeadNodes.set(newHeadChild.outerHTML, newHeadChild);
    }
    for (const currentHeadElt of oldHead.children) {
      let inNewContent = srcToNewHeadNodes.has(currentHeadElt.outerHTML);
      let isReAppended = ctx.head.shouldReAppend(currentHeadElt);
      let isPreserved = ctx.head.shouldPreserve(currentHeadElt);
      if (inNewContent || isPreserved) {
        if (isReAppended) {
          removed.push(currentHeadElt);
        } else {
          srcToNewHeadNodes.delete(currentHeadElt.outerHTML);
          preserved.push(currentHeadElt);
        }
      } else {
        if (ctx.head.style === "append") {
          if (isReAppended) {
            removed.push(currentHeadElt);
            nodesToAppend.push(currentHeadElt);
          }
        } else {
          if (ctx.head.shouldRemove(currentHeadElt) !== false) {
            removed.push(currentHeadElt);
          }
        }
      }
    }
    nodesToAppend.push(...srcToNewHeadNodes.values());
    let promises = [];
    for (const newNode of nodesToAppend) {
      let newElt = (
        /** @type {ChildNode} */
        document.createRange().createContextualFragment(newNode.outerHTML).firstChild
      );
      if (ctx.callbacks.beforeNodeAdded(newElt) !== false) {
        if ("href" in newElt && newElt.href || "src" in newElt && newElt.src) {
          let resolve;
          let promise = new Promise(function(_resolve) {
            resolve = _resolve;
          });
          newElt.addEventListener("load", function() {
            resolve();
          });
          promises.push(promise);
        }
        oldHead.appendChild(newElt);
        ctx.callbacks.afterNodeAdded(newElt);
        added.push(newElt);
      }
    }
    for (const removedElement of removed) {
      if (ctx.callbacks.beforeNodeRemoved(removedElement) !== false) {
        oldHead.removeChild(removedElement);
        ctx.callbacks.afterNodeRemoved(removedElement);
      }
    }
    ctx.head.afterHeadMorphed(oldHead, {
      added,
      kept: preserved,
      removed
    });
    return promises;
  }
  const createMorphContext = /* @__PURE__ */ function() {
    function createMorphContext2(oldNode, newContent, config2) {
      const { persistentIds, idMap } = createIdMaps(oldNode, newContent);
      const mergedConfig = mergeDefaults(config2);
      const morphStyle = mergedConfig.morphStyle || "outerHTML";
      if (!["innerHTML", "outerHTML"].includes(morphStyle)) {
        throw `Do not understand how to morph style ${morphStyle}`;
      }
      return {
        target: oldNode,
        newContent,
        config: mergedConfig,
        morphStyle,
        ignoreActive: mergedConfig.ignoreActive,
        ignoreActiveValue: mergedConfig.ignoreActiveValue,
        restoreFocus: mergedConfig.restoreFocus,
        idMap,
        persistentIds,
        pantry: createPantry(),
        callbacks: mergedConfig.callbacks,
        head: mergedConfig.head
      };
    }
    function mergeDefaults(config2) {
      let finalConfig = Object.assign({}, defaults);
      Object.assign(finalConfig, config2);
      finalConfig.callbacks = Object.assign(
        {},
        defaults.callbacks,
        config2.callbacks
      );
      finalConfig.head = Object.assign({}, defaults.head, config2.head);
      return finalConfig;
    }
    function createPantry() {
      const pantry = document.createElement("div");
      pantry.hidden = true;
      document.body.insertAdjacentElement("afterend", pantry);
      return pantry;
    }
    function findIdElements(root) {
      let elements = Array.from(root.querySelectorAll("[id]"));
      if (root.id) {
        elements.push(root);
      }
      return elements;
    }
    function populateIdMapWithTree(idMap, persistentIds, root, elements) {
      for (const elt of elements) {
        if (persistentIds.has(elt.id)) {
          let current = elt;
          while (current) {
            let idSet = idMap.get(current);
            if (idSet == null) {
              idSet = /* @__PURE__ */ new Set();
              idMap.set(current, idSet);
            }
            idSet.add(elt.id);
            if (current === root) break;
            current = current.parentElement;
          }
        }
      }
    }
    function createIdMaps(oldContent, newContent) {
      const oldIdElements = findIdElements(oldContent);
      const newIdElements = findIdElements(newContent);
      const persistentIds = createPersistentIds(oldIdElements, newIdElements);
      let idMap = /* @__PURE__ */ new Map();
      populateIdMapWithTree(idMap, persistentIds, oldContent, oldIdElements);
      const newRoot = newContent.__idiomorphRoot || newContent;
      populateIdMapWithTree(idMap, persistentIds, newRoot, newIdElements);
      return { persistentIds, idMap };
    }
    function createPersistentIds(oldIdElements, newIdElements) {
      let duplicateIds = /* @__PURE__ */ new Set();
      let oldIdTagNameMap = /* @__PURE__ */ new Map();
      for (const { id: id2, tagName } of oldIdElements) {
        if (oldIdTagNameMap.has(id2)) {
          duplicateIds.add(id2);
        } else {
          oldIdTagNameMap.set(id2, tagName);
        }
      }
      let persistentIds = /* @__PURE__ */ new Set();
      for (const { id: id2, tagName } of newIdElements) {
        if (persistentIds.has(id2)) {
          duplicateIds.add(id2);
        } else if (oldIdTagNameMap.get(id2) === tagName) {
          persistentIds.add(id2);
        }
      }
      for (const id2 of duplicateIds) {
        persistentIds.delete(id2);
      }
      return persistentIds;
    }
    return createMorphContext2;
  }();
  const { normalizeElement, normalizeParent } = /* @__PURE__ */ function() {
    const generatedByIdiomorph = /* @__PURE__ */ new WeakSet();
    function normalizeElement2(content) {
      if (content instanceof Document) {
        return content.documentElement;
      } else {
        return content;
      }
    }
    function normalizeParent2(newContent) {
      if (newContent == null) {
        return document.createElement("div");
      } else if (typeof newContent === "string") {
        return normalizeParent2(parseContent(newContent));
      } else if (generatedByIdiomorph.has(
        /** @type {Element} */
        newContent
      )) {
        return (
          /** @type {Element} */
          newContent
        );
      } else if (newContent instanceof Node) {
        if (newContent.parentNode) {
          return createDuckTypedParent(newContent);
        } else {
          const dummyParent = document.createElement("div");
          dummyParent.append(newContent);
          return dummyParent;
        }
      } else {
        const dummyParent = document.createElement("div");
        for (const elt of [...newContent]) {
          dummyParent.append(elt);
        }
        return dummyParent;
      }
    }
    function createDuckTypedParent(newContent) {
      return (
        /** @type {Element} */
        /** @type {unknown} */
        {
          childNodes: [newContent],
          /** @ts-ignore - cover your eyes for a minute, tsc */
          querySelectorAll: (s) => {
            const elements = newContent.querySelectorAll(s);
            return newContent.matches(s) ? [newContent, ...elements] : elements;
          },
          /** @ts-ignore */
          insertBefore: (n, r) => newContent.parentNode.insertBefore(n, r),
          /** @ts-ignore */
          moveBefore: (n, r) => newContent.parentNode.moveBefore(n, r),
          // for later use with populateIdMapWithTree to halt upwards iteration
          get __idiomorphRoot() {
            return newContent;
          }
        }
      );
    }
    function parseContent(newContent) {
      let parser = new DOMParser();
      let contentWithSvgsRemoved = newContent.replace(
        /<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,
        ""
      );
      if (contentWithSvgsRemoved.match(/<\/html>/) || contentWithSvgsRemoved.match(/<\/head>/) || contentWithSvgsRemoved.match(/<\/body>/)) {
        let content = parser.parseFromString(newContent, "text/html");
        if (contentWithSvgsRemoved.match(/<\/html>/)) {
          generatedByIdiomorph.add(content);
          return content;
        } else {
          let htmlElement = content.firstChild;
          if (htmlElement) {
            generatedByIdiomorph.add(htmlElement);
          }
          return htmlElement;
        }
      } else {
        let responseDoc = parser.parseFromString(
          "<body><template>" + newContent + "</template></body>",
          "text/html"
        );
        let content = (
          /** @type {HTMLTemplateElement} */
          responseDoc.body.querySelector("template").content
        );
        generatedByIdiomorph.add(content);
        return content;
      }
    }
    return { normalizeElement: normalizeElement2, normalizeParent: normalizeParent2 };
  }();
  return {
    morph,
    defaults
  };
}();
function morphElements(currentElement, newElement, { callbacks, ...options } = {}) {
  Idiomorph.morph(currentElement, newElement, {
    ...options,
    callbacks: new DefaultIdiomorphCallbacks(callbacks)
  });
}
function morphChildren(currentElement, newElement, options = {}) {
  morphElements(currentElement, newElement.childNodes, {
    ...options,
    morphStyle: "innerHTML"
  });
}
function shouldRefreshFrameWithMorphing(currentFrame, newFrame) {
  return currentFrame instanceof FrameElement && // newFrame cannot yet be an instance of FrameElement because custom
  // elements don't get initialized until they're attached to the DOM, so
  // test its Element#nodeName instead
  newFrame instanceof Element && newFrame.nodeName === "TURBO-FRAME" && currentFrame.shouldReloadWithMorph && currentFrame.id === newFrame.id && (!newFrame.getAttribute("src") || urlsAreEqual(currentFrame.src, newFrame.getAttribute("src"))) && !currentFrame.closest("[data-turbo-permanent]");
}
function closestFrameReloadableWithMorphing(node) {
  return node.parentElement.closest("turbo-frame[src][refresh=morph]");
}
var DefaultIdiomorphCallbacks = class {
  #beforeNodeMorphed;
  constructor({ beforeNodeMorphed } = {}) {
    this.#beforeNodeMorphed = beforeNodeMorphed || (() => true);
  }
  beforeNodeAdded = (node) => {
    return !(node.id && node.hasAttribute("data-turbo-permanent") && document.getElementById(node.id));
  };
  beforeNodeMorphed = (currentElement, newElement) => {
    if (currentElement instanceof Element) {
      if (!currentElement.hasAttribute("data-turbo-permanent") && this.#beforeNodeMorphed(currentElement, newElement)) {
        const event2 = dispatch2("turbo:before-morph-element", {
          cancelable: true,
          target: currentElement,
          detail: { currentElement, newElement }
        });
        return !event2.defaultPrevented;
      } else {
        return false;
      }
    }
  };
  beforeAttributeUpdated = (attributeName, target, mutationType) => {
    const event2 = dispatch2("turbo:before-morph-attribute", {
      cancelable: true,
      target,
      detail: { attributeName, mutationType }
    });
    return !event2.defaultPrevented;
  };
  beforeNodeRemoved = (node) => {
    return this.beforeNodeMorphed(node);
  };
  afterNodeMorphed = (currentElement, newElement) => {
    if (currentElement instanceof Element) {
      dispatch2("turbo:morph-element", {
        target: currentElement,
        detail: { currentElement, newElement }
      });
    }
  };
};
var MorphingFrameRenderer = class extends FrameRenderer {
  static renderElement(currentElement, newElement) {
    dispatch2("turbo:before-frame-morph", {
      target: currentElement,
      detail: { currentElement, newElement }
    });
    morphChildren(currentElement, newElement, {
      callbacks: {
        beforeNodeMorphed: (node, newNode) => {
          if (shouldRefreshFrameWithMorphing(node, newNode) && closestFrameReloadableWithMorphing(node) === currentElement) {
            node.reload();
            return false;
          }
          return true;
        }
      }
    });
  }
  async preservingPermanentElements(callback) {
    return await callback();
  }
};
var ProgressBar = class _ProgressBar {
  static animationDuration = 300;
  /*ms*/
  static get defaultCSS() {
    return unindent`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${_ProgressBar.animationDuration}ms ease-out,
          opacity ${_ProgressBar.animationDuration / 2}ms ${_ProgressBar.animationDuration / 2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `;
  }
  hiding = false;
  value = 0;
  visible = false;
  constructor() {
    this.stylesheetElement = this.createStylesheetElement();
    this.progressElement = this.createProgressElement();
    this.installStylesheetElement();
    this.setValue(0);
  }
  show() {
    if (!this.visible) {
      this.visible = true;
      this.installProgressElement();
      this.startTrickling();
    }
  }
  hide() {
    if (this.visible && !this.hiding) {
      this.hiding = true;
      this.fadeProgressElement(() => {
        this.uninstallProgressElement();
        this.stopTrickling();
        this.visible = false;
        this.hiding = false;
      });
    }
  }
  setValue(value) {
    this.value = value;
    this.refresh();
  }
  // Private
  installStylesheetElement() {
    document.head.insertBefore(this.stylesheetElement, document.head.firstChild);
  }
  installProgressElement() {
    this.progressElement.style.width = "0";
    this.progressElement.style.opacity = "1";
    document.documentElement.insertBefore(this.progressElement, document.body);
    this.refresh();
  }
  fadeProgressElement(callback) {
    this.progressElement.style.opacity = "0";
    setTimeout(callback, _ProgressBar.animationDuration * 1.5);
  }
  uninstallProgressElement() {
    if (this.progressElement.parentNode) {
      document.documentElement.removeChild(this.progressElement);
    }
  }
  startTrickling() {
    if (!this.trickleInterval) {
      this.trickleInterval = window.setInterval(this.trickle, _ProgressBar.animationDuration);
    }
  }
  stopTrickling() {
    window.clearInterval(this.trickleInterval);
    delete this.trickleInterval;
  }
  trickle = () => {
    this.setValue(this.value + Math.random() / 100);
  };
  refresh() {
    requestAnimationFrame(() => {
      this.progressElement.style.width = `${10 + this.value * 90}%`;
    });
  }
  createStylesheetElement() {
    const element = document.createElement("style");
    element.type = "text/css";
    element.textContent = _ProgressBar.defaultCSS;
    const cspNonce = getCspNonce();
    if (cspNonce) {
      element.nonce = cspNonce;
    }
    return element;
  }
  createProgressElement() {
    const element = document.createElement("div");
    element.className = "turbo-progress-bar";
    return element;
  }
};
var HeadSnapshot = class extends Snapshot {
  detailsByOuterHTML = this.children.filter((element) => !elementIsNoscript(element)).map((element) => elementWithoutNonce(element)).reduce((result, element) => {
    const { outerHTML } = element;
    const details = outerHTML in result ? result[outerHTML] : {
      type: elementType(element),
      tracked: elementIsTracked(element),
      elements: []
    };
    return {
      ...result,
      [outerHTML]: {
        ...details,
        elements: [...details.elements, element]
      }
    };
  }, {});
  get trackedElementSignature() {
    return Object.keys(this.detailsByOuterHTML).filter((outerHTML) => this.detailsByOuterHTML[outerHTML].tracked).join("");
  }
  getScriptElementsNotInSnapshot(snapshot) {
    return this.getElementsMatchingTypeNotInSnapshot("script", snapshot);
  }
  getStylesheetElementsNotInSnapshot(snapshot) {
    return this.getElementsMatchingTypeNotInSnapshot("stylesheet", snapshot);
  }
  getElementsMatchingTypeNotInSnapshot(matchedType, snapshot) {
    return Object.keys(this.detailsByOuterHTML).filter((outerHTML) => !(outerHTML in snapshot.detailsByOuterHTML)).map((outerHTML) => this.detailsByOuterHTML[outerHTML]).filter(({ type }) => type == matchedType).map(({ elements: [element] }) => element);
  }
  get provisionalElements() {
    return Object.keys(this.detailsByOuterHTML).reduce((result, outerHTML) => {
      const { type, tracked, elements } = this.detailsByOuterHTML[outerHTML];
      if (type == null && !tracked) {
        return [...result, ...elements];
      } else if (elements.length > 1) {
        return [...result, ...elements.slice(1)];
      } else {
        return result;
      }
    }, []);
  }
  getMetaValue(name) {
    const element = this.findMetaElementByName(name);
    return element ? element.getAttribute("content") : null;
  }
  findMetaElementByName(name) {
    return Object.keys(this.detailsByOuterHTML).reduce((result, outerHTML) => {
      const {
        elements: [element]
      } = this.detailsByOuterHTML[outerHTML];
      return elementIsMetaElementWithName(element, name) ? element : result;
    }, void 0 | void 0);
  }
};
function elementType(element) {
  if (elementIsScript(element)) {
    return "script";
  } else if (elementIsStylesheet(element)) {
    return "stylesheet";
  }
}
function elementIsTracked(element) {
  return element.getAttribute("data-turbo-track") == "reload";
}
function elementIsScript(element) {
  const tagName = element.localName;
  return tagName == "script";
}
function elementIsNoscript(element) {
  const tagName = element.localName;
  return tagName == "noscript";
}
function elementIsStylesheet(element) {
  const tagName = element.localName;
  return tagName == "style" || tagName == "link" && element.getAttribute("rel") == "stylesheet";
}
function elementIsMetaElementWithName(element, name) {
  const tagName = element.localName;
  return tagName == "meta" && element.getAttribute("name") == name;
}
function elementWithoutNonce(element) {
  if (element.hasAttribute("nonce")) {
    element.setAttribute("nonce", "");
  }
  return element;
}
var PageSnapshot = class _PageSnapshot extends Snapshot {
  static fromHTMLString(html = "") {
    return this.fromDocument(parseHTMLDocument(html));
  }
  static fromElement(element) {
    return this.fromDocument(element.ownerDocument);
  }
  static fromDocument({ documentElement, body, head }) {
    return new this(documentElement, body, new HeadSnapshot(head));
  }
  constructor(documentElement, body, headSnapshot) {
    super(body);
    this.documentElement = documentElement;
    this.headSnapshot = headSnapshot;
  }
  clone() {
    const clonedElement = this.element.cloneNode(true);
    const selectElements = this.element.querySelectorAll("select");
    const clonedSelectElements = clonedElement.querySelectorAll("select");
    for (const [index, source] of selectElements.entries()) {
      const clone2 = clonedSelectElements[index];
      for (const option of clone2.selectedOptions) option.selected = false;
      for (const option of source.selectedOptions) clone2.options[option.index].selected = true;
    }
    for (const clonedPasswordInput of clonedElement.querySelectorAll('input[type="password"]')) {
      clonedPasswordInput.value = "";
    }
    return new _PageSnapshot(this.documentElement, clonedElement, this.headSnapshot);
  }
  get lang() {
    return this.documentElement.getAttribute("lang");
  }
  get headElement() {
    return this.headSnapshot.element;
  }
  get rootLocation() {
    const root = this.getSetting("root") ?? "/";
    return expandURL(root);
  }
  get cacheControlValue() {
    return this.getSetting("cache-control");
  }
  get isPreviewable() {
    return this.cacheControlValue != "no-preview";
  }
  get isCacheable() {
    return this.cacheControlValue != "no-cache";
  }
  get isVisitable() {
    return this.getSetting("visit-control") != "reload";
  }
  get prefersViewTransitions() {
    const viewTransitionEnabled = this.getSetting("view-transition") === "true" || this.headSnapshot.getMetaValue("view-transition") === "same-origin";
    return viewTransitionEnabled && !window.matchMedia("(prefers-reduced-motion: reduce)").matches;
  }
  get shouldMorphPage() {
    return this.getSetting("refresh-method") === "morph";
  }
  get shouldPreserveScrollPosition() {
    return this.getSetting("refresh-scroll") === "preserve";
  }
  // Private
  getSetting(name) {
    return this.headSnapshot.getMetaValue(`turbo-${name}`);
  }
};
var ViewTransitioner = class {
  #viewTransitionStarted = false;
  #lastOperation = Promise.resolve();
  renderChange(useViewTransition, render) {
    if (useViewTransition && this.viewTransitionsAvailable && !this.#viewTransitionStarted) {
      this.#viewTransitionStarted = true;
      this.#lastOperation = this.#lastOperation.then(async () => {
        await document.startViewTransition(render).finished;
      });
    } else {
      this.#lastOperation = this.#lastOperation.then(render);
    }
    return this.#lastOperation;
  }
  get viewTransitionsAvailable() {
    return document.startViewTransition;
  }
};
var defaultOptions = {
  action: "advance",
  historyChanged: false,
  visitCachedSnapshot: () => {
  },
  willRender: true,
  updateHistory: true,
  shouldCacheSnapshot: true,
  acceptsStreamResponse: false
};
var TimingMetric = {
  visitStart: "visitStart",
  requestStart: "requestStart",
  requestEnd: "requestEnd",
  visitEnd: "visitEnd"
};
var VisitState = {
  initialized: "initialized",
  started: "started",
  canceled: "canceled",
  failed: "failed",
  completed: "completed"
};
var SystemStatusCode = {
  networkFailure: 0,
  timeoutFailure: -1,
  contentTypeMismatch: -2
};
var Direction = {
  advance: "forward",
  restore: "back",
  replace: "none"
};
var Visit = class {
  identifier = uuid();
  // Required by turbo-ios
  timingMetrics = {};
  followedRedirect = false;
  historyChanged = false;
  scrolled = false;
  shouldCacheSnapshot = true;
  acceptsStreamResponse = false;
  snapshotCached = false;
  state = VisitState.initialized;
  viewTransitioner = new ViewTransitioner();
  constructor(delegate, location2, restorationIdentifier, options = {}) {
    this.delegate = delegate;
    this.location = location2;
    this.restorationIdentifier = restorationIdentifier || uuid();
    const {
      action,
      historyChanged,
      referrer,
      snapshot,
      snapshotHTML,
      response,
      visitCachedSnapshot,
      willRender,
      updateHistory,
      shouldCacheSnapshot,
      acceptsStreamResponse,
      direction
    } = {
      ...defaultOptions,
      ...options
    };
    this.action = action;
    this.historyChanged = historyChanged;
    this.referrer = referrer;
    this.snapshot = snapshot;
    this.snapshotHTML = snapshotHTML;
    this.response = response;
    this.isSamePage = this.delegate.locationWithActionIsSamePage(this.location, this.action);
    this.isPageRefresh = this.view.isPageRefresh(this);
    this.visitCachedSnapshot = visitCachedSnapshot;
    this.willRender = willRender;
    this.updateHistory = updateHistory;
    this.scrolled = !willRender;
    this.shouldCacheSnapshot = shouldCacheSnapshot;
    this.acceptsStreamResponse = acceptsStreamResponse;
    this.direction = direction || Direction[action];
  }
  get adapter() {
    return this.delegate.adapter;
  }
  get view() {
    return this.delegate.view;
  }
  get history() {
    return this.delegate.history;
  }
  get restorationData() {
    return this.history.getRestorationDataForIdentifier(this.restorationIdentifier);
  }
  get silent() {
    return this.isSamePage;
  }
  start() {
    if (this.state == VisitState.initialized) {
      this.recordTimingMetric(TimingMetric.visitStart);
      this.state = VisitState.started;
      this.adapter.visitStarted(this);
      this.delegate.visitStarted(this);
    }
  }
  cancel() {
    if (this.state == VisitState.started) {
      if (this.request) {
        this.request.cancel();
      }
      this.cancelRender();
      this.state = VisitState.canceled;
    }
  }
  complete() {
    if (this.state == VisitState.started) {
      this.recordTimingMetric(TimingMetric.visitEnd);
      this.adapter.visitCompleted(this);
      this.state = VisitState.completed;
      this.followRedirect();
      if (!this.followedRedirect) {
        this.delegate.visitCompleted(this);
      }
    }
  }
  fail() {
    if (this.state == VisitState.started) {
      this.state = VisitState.failed;
      this.adapter.visitFailed(this);
      this.delegate.visitCompleted(this);
    }
  }
  changeHistory() {
    if (!this.historyChanged && this.updateHistory) {
      const actionForHistory = this.location.href === this.referrer?.href ? "replace" : this.action;
      const method = getHistoryMethodForAction(actionForHistory);
      this.history.update(method, this.location, this.restorationIdentifier);
      this.historyChanged = true;
    }
  }
  issueRequest() {
    if (this.hasPreloadedResponse()) {
      this.simulateRequest();
    } else if (this.shouldIssueRequest() && !this.request) {
      this.request = new FetchRequest(this, FetchMethod.get, this.location);
      this.request.perform();
    }
  }
  simulateRequest() {
    if (this.response) {
      this.startRequest();
      this.recordResponse();
      this.finishRequest();
    }
  }
  startRequest() {
    this.recordTimingMetric(TimingMetric.requestStart);
    this.adapter.visitRequestStarted(this);
  }
  recordResponse(response = this.response) {
    this.response = response;
    if (response) {
      const { statusCode } = response;
      if (isSuccessful(statusCode)) {
        this.adapter.visitRequestCompleted(this);
      } else {
        this.adapter.visitRequestFailedWithStatusCode(this, statusCode);
      }
    }
  }
  finishRequest() {
    this.recordTimingMetric(TimingMetric.requestEnd);
    this.adapter.visitRequestFinished(this);
  }
  loadResponse() {
    if (this.response) {
      const { statusCode, responseHTML } = this.response;
      this.render(async () => {
        if (this.shouldCacheSnapshot) this.cacheSnapshot();
        if (this.view.renderPromise) await this.view.renderPromise;
        if (isSuccessful(statusCode) && responseHTML != null) {
          const snapshot = PageSnapshot.fromHTMLString(responseHTML);
          await this.renderPageSnapshot(snapshot, false);
          this.adapter.visitRendered(this);
          this.complete();
        } else {
          await this.view.renderError(PageSnapshot.fromHTMLString(responseHTML), this);
          this.adapter.visitRendered(this);
          this.fail();
        }
      });
    }
  }
  getCachedSnapshot() {
    const snapshot = this.view.getCachedSnapshotForLocation(this.location) || this.getPreloadedSnapshot();
    if (snapshot && (!getAnchor(this.location) || snapshot.hasAnchor(getAnchor(this.location)))) {
      if (this.action == "restore" || snapshot.isPreviewable) {
        return snapshot;
      }
    }
  }
  getPreloadedSnapshot() {
    if (this.snapshotHTML) {
      return PageSnapshot.fromHTMLString(this.snapshotHTML);
    }
  }
  hasCachedSnapshot() {
    return this.getCachedSnapshot() != null;
  }
  loadCachedSnapshot() {
    const snapshot = this.getCachedSnapshot();
    if (snapshot) {
      const isPreview = this.shouldIssueRequest();
      this.render(async () => {
        this.cacheSnapshot();
        if (this.isSamePage || this.isPageRefresh) {
          this.adapter.visitRendered(this);
        } else {
          if (this.view.renderPromise) await this.view.renderPromise;
          await this.renderPageSnapshot(snapshot, isPreview);
          this.adapter.visitRendered(this);
          if (!isPreview) {
            this.complete();
          }
        }
      });
    }
  }
  followRedirect() {
    if (this.redirectedToLocation && !this.followedRedirect && this.response?.redirected) {
      this.adapter.visitProposedToLocation(this.redirectedToLocation, {
        action: "replace",
        response: this.response,
        shouldCacheSnapshot: false,
        willRender: false
      });
      this.followedRedirect = true;
    }
  }
  goToSamePageAnchor() {
    if (this.isSamePage) {
      this.render(async () => {
        this.cacheSnapshot();
        this.performScroll();
        this.changeHistory();
        this.adapter.visitRendered(this);
      });
    }
  }
  // Fetch request delegate
  prepareRequest(request) {
    if (this.acceptsStreamResponse) {
      request.acceptResponseType(StreamMessage.contentType);
    }
  }
  requestStarted() {
    this.startRequest();
  }
  requestPreventedHandlingResponse(_request, _response) {
  }
  async requestSucceededWithResponse(request, response) {
    const responseHTML = await response.responseHTML;
    const { redirected, statusCode } = response;
    if (responseHTML == void 0) {
      this.recordResponse({
        statusCode: SystemStatusCode.contentTypeMismatch,
        redirected
      });
    } else {
      this.redirectedToLocation = response.redirected ? response.location : void 0;
      this.recordResponse({ statusCode, responseHTML, redirected });
    }
  }
  async requestFailedWithResponse(request, response) {
    const responseHTML = await response.responseHTML;
    const { redirected, statusCode } = response;
    if (responseHTML == void 0) {
      this.recordResponse({
        statusCode: SystemStatusCode.contentTypeMismatch,
        redirected
      });
    } else {
      this.recordResponse({ statusCode, responseHTML, redirected });
    }
  }
  requestErrored(_request, _error) {
    this.recordResponse({
      statusCode: SystemStatusCode.networkFailure,
      redirected: false
    });
  }
  requestFinished() {
    this.finishRequest();
  }
  // Scrolling
  performScroll() {
    if (!this.scrolled && !this.view.forceReloaded && !this.view.shouldPreserveScrollPosition(this)) {
      if (this.action == "restore") {
        this.scrollToRestoredPosition() || this.scrollToAnchor() || this.view.scrollToTop();
      } else {
        this.scrollToAnchor() || this.view.scrollToTop();
      }
      if (this.isSamePage) {
        this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation, this.location);
      }
      this.scrolled = true;
    }
  }
  scrollToRestoredPosition() {
    const { scrollPosition } = this.restorationData;
    if (scrollPosition) {
      this.view.scrollToPosition(scrollPosition);
      return true;
    }
  }
  scrollToAnchor() {
    const anchor = getAnchor(this.location);
    if (anchor != null) {
      this.view.scrollToAnchor(anchor);
      return true;
    }
  }
  // Instrumentation
  recordTimingMetric(metric) {
    this.timingMetrics[metric] = (/* @__PURE__ */ new Date()).getTime();
  }
  getTimingMetrics() {
    return { ...this.timingMetrics };
  }
  // Private
  hasPreloadedResponse() {
    return typeof this.response == "object";
  }
  shouldIssueRequest() {
    if (this.isSamePage) {
      return false;
    } else if (this.action == "restore") {
      return !this.hasCachedSnapshot();
    } else {
      return this.willRender;
    }
  }
  cacheSnapshot() {
    if (!this.snapshotCached) {
      this.view.cacheSnapshot(this.snapshot).then((snapshot) => snapshot && this.visitCachedSnapshot(snapshot));
      this.snapshotCached = true;
    }
  }
  async render(callback) {
    this.cancelRender();
    await new Promise((resolve) => {
      this.frame = document.visibilityState === "hidden" ? setTimeout(() => resolve(), 0) : requestAnimationFrame(() => resolve());
    });
    await callback();
    delete this.frame;
  }
  async renderPageSnapshot(snapshot, isPreview) {
    await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(snapshot), async () => {
      await this.view.renderPage(snapshot, isPreview, this.willRender, this);
      this.performScroll();
    });
  }
  cancelRender() {
    if (this.frame) {
      cancelAnimationFrame(this.frame);
      delete this.frame;
    }
  }
};
function isSuccessful(statusCode) {
  return statusCode >= 200 && statusCode < 300;
}
var BrowserAdapter = class {
  progressBar = new ProgressBar();
  constructor(session2) {
    this.session = session2;
  }
  visitProposedToLocation(location2, options) {
    if (locationIsVisitable(location2, this.navigator.rootLocation)) {
      this.navigator.startVisit(location2, options?.restorationIdentifier || uuid(), options);
    } else {
      window.location.href = location2.toString();
    }
  }
  visitStarted(visit2) {
    this.location = visit2.location;
    this.redirectedToLocation = null;
    visit2.loadCachedSnapshot();
    visit2.issueRequest();
    visit2.goToSamePageAnchor();
  }
  visitRequestStarted(visit2) {
    this.progressBar.setValue(0);
    if (visit2.hasCachedSnapshot() || visit2.action != "restore") {
      this.showVisitProgressBarAfterDelay();
    } else {
      this.showProgressBar();
    }
  }
  visitRequestCompleted(visit2) {
    visit2.loadResponse();
    if (visit2.response.redirected) {
      this.redirectedToLocation = visit2.redirectedToLocation;
    }
  }
  visitRequestFailedWithStatusCode(visit2, statusCode) {
    switch (statusCode) {
      case SystemStatusCode.networkFailure:
      case SystemStatusCode.timeoutFailure:
      case SystemStatusCode.contentTypeMismatch:
        return this.reload({
          reason: "request_failed",
          context: {
            statusCode
          }
        });
      default:
        return visit2.loadResponse();
    }
  }
  visitRequestFinished(_visit) {
  }
  visitCompleted(_visit) {
    this.progressBar.setValue(1);
    this.hideVisitProgressBar();
  }
  pageInvalidated(reason) {
    this.reload(reason);
  }
  visitFailed(_visit) {
    this.progressBar.setValue(1);
    this.hideVisitProgressBar();
  }
  visitRendered(_visit) {
  }
  // Link prefetching
  linkPrefetchingIsEnabledForLocation(location2) {
    return true;
  }
  // Form Submission Delegate
  formSubmissionStarted(_formSubmission) {
    this.progressBar.setValue(0);
    this.showFormProgressBarAfterDelay();
  }
  formSubmissionFinished(_formSubmission) {
    this.progressBar.setValue(1);
    this.hideFormProgressBar();
  }
  // Private
  showVisitProgressBarAfterDelay() {
    this.visitProgressBarTimeout = window.setTimeout(this.showProgressBar, this.session.progressBarDelay);
  }
  hideVisitProgressBar() {
    this.progressBar.hide();
    if (this.visitProgressBarTimeout != null) {
      window.clearTimeout(this.visitProgressBarTimeout);
      delete this.visitProgressBarTimeout;
    }
  }
  showFormProgressBarAfterDelay() {
    if (this.formProgressBarTimeout == null) {
      this.formProgressBarTimeout = window.setTimeout(this.showProgressBar, this.session.progressBarDelay);
    }
  }
  hideFormProgressBar() {
    this.progressBar.hide();
    if (this.formProgressBarTimeout != null) {
      window.clearTimeout(this.formProgressBarTimeout);
      delete this.formProgressBarTimeout;
    }
  }
  showProgressBar = () => {
    this.progressBar.show();
  };
  reload(reason) {
    dispatch2("turbo:reload", { detail: reason });
    window.location.href = (this.redirectedToLocation || this.location)?.toString() || window.location.href;
  }
  get navigator() {
    return this.session.navigator;
  }
};
var CacheObserver = class {
  selector = "[data-turbo-temporary]";
  deprecatedSelector = "[data-turbo-cache=false]";
  started = false;
  start() {
    if (!this.started) {
      this.started = true;
      addEventListener("turbo:before-cache", this.removeTemporaryElements, false);
    }
  }
  stop() {
    if (this.started) {
      this.started = false;
      removeEventListener("turbo:before-cache", this.removeTemporaryElements, false);
    }
  }
  removeTemporaryElements = (_event) => {
    for (const element of this.temporaryElements) {
      element.remove();
    }
  };
  get temporaryElements() {
    return [...document.querySelectorAll(this.selector), ...this.temporaryElementsWithDeprecation];
  }
  get temporaryElementsWithDeprecation() {
    const elements = document.querySelectorAll(this.deprecatedSelector);
    if (elements.length) {
      console.warn(
        `The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`
      );
    }
    return [...elements];
  }
};
var FrameRedirector = class {
  constructor(session2, element) {
    this.session = session2;
    this.element = element;
    this.linkInterceptor = new LinkInterceptor(this, element);
    this.formSubmitObserver = new FormSubmitObserver(this, element);
  }
  start() {
    this.linkInterceptor.start();
    this.formSubmitObserver.start();
  }
  stop() {
    this.linkInterceptor.stop();
    this.formSubmitObserver.stop();
  }
  // Link interceptor delegate
  shouldInterceptLinkClick(element, _location, _event) {
    return this.#shouldRedirect(element);
  }
  linkClickIntercepted(element, url, event2) {
    const frame = this.#findFrameElement(element);
    if (frame) {
      frame.delegate.linkClickIntercepted(element, url, event2);
    }
  }
  // Form submit observer delegate
  willSubmitForm(element, submitter2) {
    return element.closest("turbo-frame") == null && this.#shouldSubmit(element, submitter2) && this.#shouldRedirect(element, submitter2);
  }
  formSubmitted(element, submitter2) {
    const frame = this.#findFrameElement(element, submitter2);
    if (frame) {
      frame.delegate.formSubmitted(element, submitter2);
    }
  }
  #shouldSubmit(form, submitter2) {
    const action = getAction$1(form, submitter2);
    const meta = this.element.ownerDocument.querySelector(`meta[name="turbo-root"]`);
    const rootLocation = expandURL(meta?.content ?? "/");
    return this.#shouldRedirect(form, submitter2) && locationIsVisitable(action, rootLocation);
  }
  #shouldRedirect(element, submitter2) {
    const isNavigatable = element instanceof HTMLFormElement ? this.session.submissionIsNavigatable(element, submitter2) : this.session.elementIsNavigatable(element);
    if (isNavigatable) {
      const frame = this.#findFrameElement(element, submitter2);
      return frame ? frame != element.closest("turbo-frame") : false;
    } else {
      return false;
    }
  }
  #findFrameElement(element, submitter2) {
    const id2 = submitter2?.getAttribute("data-turbo-frame") || element.getAttribute("data-turbo-frame");
    if (id2 && id2 != "_top") {
      const frame = this.element.querySelector(`#${id2}:not([disabled])`);
      if (frame instanceof FrameElement) {
        return frame;
      }
    }
  }
};
var History = class {
  location;
  restorationIdentifier = uuid();
  restorationData = {};
  started = false;
  pageLoaded = false;
  currentIndex = 0;
  constructor(delegate) {
    this.delegate = delegate;
  }
  start() {
    if (!this.started) {
      addEventListener("popstate", this.onPopState, false);
      addEventListener("load", this.onPageLoad, false);
      this.currentIndex = history.state?.turbo?.restorationIndex || 0;
      this.started = true;
      this.replace(new URL(window.location.href));
    }
  }
  stop() {
    if (this.started) {
      removeEventListener("popstate", this.onPopState, false);
      removeEventListener("load", this.onPageLoad, false);
      this.started = false;
    }
  }
  push(location2, restorationIdentifier) {
    this.update(history.pushState, location2, restorationIdentifier);
  }
  replace(location2, restorationIdentifier) {
    this.update(history.replaceState, location2, restorationIdentifier);
  }
  update(method, location2, restorationIdentifier = uuid()) {
    if (method === history.pushState) ++this.currentIndex;
    const state = { turbo: { restorationIdentifier, restorationIndex: this.currentIndex } };
    method.call(history, state, "", location2.href);
    this.location = location2;
    this.restorationIdentifier = restorationIdentifier;
  }
  // Restoration data
  getRestorationDataForIdentifier(restorationIdentifier) {
    return this.restorationData[restorationIdentifier] || {};
  }
  updateRestorationData(additionalData) {
    const { restorationIdentifier } = this;
    const restorationData = this.restorationData[restorationIdentifier];
    this.restorationData[restorationIdentifier] = {
      ...restorationData,
      ...additionalData
    };
  }
  // Scroll restoration
  assumeControlOfScrollRestoration() {
    if (!this.previousScrollRestoration) {
      this.previousScrollRestoration = history.scrollRestoration ?? "auto";
      history.scrollRestoration = "manual";
    }
  }
  relinquishControlOfScrollRestoration() {
    if (this.previousScrollRestoration) {
      history.scrollRestoration = this.previousScrollRestoration;
      delete this.previousScrollRestoration;
    }
  }
  // Event handlers
  onPopState = (event2) => {
    if (this.shouldHandlePopState()) {
      const { turbo } = event2.state || {};
      if (turbo) {
        this.location = new URL(window.location.href);
        const { restorationIdentifier, restorationIndex } = turbo;
        this.restorationIdentifier = restorationIdentifier;
        const direction = restorationIndex > this.currentIndex ? "forward" : "back";
        this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location, restorationIdentifier, direction);
        this.currentIndex = restorationIndex;
      }
    }
  };
  onPageLoad = async (_event) => {
    await nextMicrotask();
    this.pageLoaded = true;
  };
  // Private
  shouldHandlePopState() {
    return this.pageIsLoaded();
  }
  pageIsLoaded() {
    return this.pageLoaded || document.readyState == "complete";
  }
};
var LinkPrefetchObserver = class {
  started = false;
  #prefetchedLink = null;
  constructor(delegate, eventTarget) {
    this.delegate = delegate;
    this.eventTarget = eventTarget;
  }
  start() {
    if (this.started) return;
    if (this.eventTarget.readyState === "loading") {
      this.eventTarget.addEventListener("DOMContentLoaded", this.#enable, { once: true });
    } else {
      this.#enable();
    }
  }
  stop() {
    if (!this.started) return;
    this.eventTarget.removeEventListener("mouseenter", this.#tryToPrefetchRequest, {
      capture: true,
      passive: true
    });
    this.eventTarget.removeEventListener("mouseleave", this.#cancelRequestIfObsolete, {
      capture: true,
      passive: true
    });
    this.eventTarget.removeEventListener("turbo:before-fetch-request", this.#tryToUsePrefetchedRequest, true);
    this.started = false;
  }
  #enable = () => {
    this.eventTarget.addEventListener("mouseenter", this.#tryToPrefetchRequest, {
      capture: true,
      passive: true
    });
    this.eventTarget.addEventListener("mouseleave", this.#cancelRequestIfObsolete, {
      capture: true,
      passive: true
    });
    this.eventTarget.addEventListener("turbo:before-fetch-request", this.#tryToUsePrefetchedRequest, true);
    this.started = true;
  };
  #tryToPrefetchRequest = (event2) => {
    if (getMetaContent("turbo-prefetch") === "false") return;
    const target = event2.target;
    const isLink = target.matches && target.matches("a[href]:not([target^=_]):not([download])");
    if (isLink && this.#isPrefetchable(target)) {
      const link = target;
      const location2 = getLocationForLink(link);
      if (this.delegate.canPrefetchRequestToLocation(link, location2)) {
        this.#prefetchedLink = link;
        const fetchRequest = new FetchRequest(
          this,
          FetchMethod.get,
          location2,
          new URLSearchParams(),
          target
        );
        fetchRequest.fetchOptions.priority = "low";
        prefetchCache.setLater(location2.toString(), fetchRequest, this.#cacheTtl);
      }
    }
  };
  #cancelRequestIfObsolete = (event2) => {
    if (event2.target === this.#prefetchedLink) this.#cancelPrefetchRequest();
  };
  #cancelPrefetchRequest = () => {
    prefetchCache.clear();
    this.#prefetchedLink = null;
  };
  #tryToUsePrefetchedRequest = (event2) => {
    if (event2.target.tagName !== "FORM" && event2.detail.fetchOptions.method === "GET") {
      const cached = prefetchCache.get(event2.detail.url.toString());
      if (cached) {
        event2.detail.fetchRequest = cached;
      }
      prefetchCache.clear();
    }
  };
  prepareRequest(request) {
    const link = request.target;
    request.headers["X-Sec-Purpose"] = "prefetch";
    const turboFrame = link.closest("turbo-frame");
    const turboFrameTarget = link.getAttribute("data-turbo-frame") || turboFrame?.getAttribute("target") || turboFrame?.id;
    if (turboFrameTarget && turboFrameTarget !== "_top") {
      request.headers["Turbo-Frame"] = turboFrameTarget;
    }
  }
  // Fetch request interface
  requestSucceededWithResponse() {
  }
  requestStarted(fetchRequest) {
  }
  requestErrored(fetchRequest) {
  }
  requestFinished(fetchRequest) {
  }
  requestPreventedHandlingResponse(fetchRequest, fetchResponse) {
  }
  requestFailedWithResponse(fetchRequest, fetchResponse) {
  }
  get #cacheTtl() {
    return Number(getMetaContent("turbo-prefetch-cache-time")) || cacheTtl;
  }
  #isPrefetchable(link) {
    const href = link.getAttribute("href");
    if (!href) return false;
    if (unfetchableLink(link)) return false;
    if (linkToTheSamePage(link)) return false;
    if (linkOptsOut(link)) return false;
    if (nonSafeLink(link)) return false;
    if (eventPrevented(link)) return false;
    return true;
  }
};
var unfetchableLink = (link) => {
  return link.origin !== document.location.origin || !["http:", "https:"].includes(link.protocol) || link.hasAttribute("target");
};
var linkToTheSamePage = (link) => {
  return link.pathname + link.search === document.location.pathname + document.location.search || link.href.startsWith("#");
};
var linkOptsOut = (link) => {
  if (link.getAttribute("data-turbo-prefetch") === "false") return true;
  if (link.getAttribute("data-turbo") === "false") return true;
  const turboPrefetchParent = findClosestRecursively(link, "[data-turbo-prefetch]");
  if (turboPrefetchParent && turboPrefetchParent.getAttribute("data-turbo-prefetch") === "false") return true;
  return false;
};
var nonSafeLink = (link) => {
  const turboMethod = link.getAttribute("data-turbo-method");
  if (turboMethod && turboMethod.toLowerCase() !== "get") return true;
  if (isUJS(link)) return true;
  if (link.hasAttribute("data-turbo-confirm")) return true;
  if (link.hasAttribute("data-turbo-stream")) return true;
  return false;
};
var isUJS = (link) => {
  return link.hasAttribute("data-remote") || link.hasAttribute("data-behavior") || link.hasAttribute("data-confirm") || link.hasAttribute("data-method");
};
var eventPrevented = (link) => {
  const event2 = dispatch2("turbo:before-prefetch", { target: link, cancelable: true });
  return event2.defaultPrevented;
};
var Navigator = class {
  constructor(delegate) {
    this.delegate = delegate;
  }
  proposeVisit(location2, options = {}) {
    if (this.delegate.allowsVisitingLocationWithAction(location2, options.action)) {
      this.delegate.visitProposedToLocation(location2, options);
    }
  }
  startVisit(locatable, restorationIdentifier, options = {}) {
    this.stop();
    this.currentVisit = new Visit(this, expandURL(locatable), restorationIdentifier, {
      referrer: this.location,
      ...options
    });
    this.currentVisit.start();
  }
  submitForm(form, submitter2) {
    this.stop();
    this.formSubmission = new FormSubmission(this, form, submitter2, true);
    this.formSubmission.start();
  }
  stop() {
    if (this.formSubmission) {
      this.formSubmission.stop();
      delete this.formSubmission;
    }
    if (this.currentVisit) {
      this.currentVisit.cancel();
      delete this.currentVisit;
    }
  }
  get adapter() {
    return this.delegate.adapter;
  }
  get view() {
    return this.delegate.view;
  }
  get rootLocation() {
    return this.view.snapshot.rootLocation;
  }
  get history() {
    return this.delegate.history;
  }
  // Form submission delegate
  formSubmissionStarted(formSubmission) {
    if (typeof this.adapter.formSubmissionStarted === "function") {
      this.adapter.formSubmissionStarted(formSubmission);
    }
  }
  async formSubmissionSucceededWithResponse(formSubmission, fetchResponse) {
    if (formSubmission == this.formSubmission) {
      const responseHTML = await fetchResponse.responseHTML;
      if (responseHTML) {
        const shouldCacheSnapshot = formSubmission.isSafe;
        if (!shouldCacheSnapshot) {
          this.view.clearSnapshotCache();
        }
        const { statusCode, redirected } = fetchResponse;
        const action = this.#getActionForFormSubmission(formSubmission, fetchResponse);
        const visitOptions = {
          action,
          shouldCacheSnapshot,
          response: { statusCode, responseHTML, redirected }
        };
        this.proposeVisit(fetchResponse.location, visitOptions);
      }
    }
  }
  async formSubmissionFailedWithResponse(formSubmission, fetchResponse) {
    const responseHTML = await fetchResponse.responseHTML;
    if (responseHTML) {
      const snapshot = PageSnapshot.fromHTMLString(responseHTML);
      if (fetchResponse.serverError) {
        await this.view.renderError(snapshot, this.currentVisit);
      } else {
        await this.view.renderPage(snapshot, false, true, this.currentVisit);
      }
      if (!snapshot.shouldPreserveScrollPosition) {
        this.view.scrollToTop();
      }
      this.view.clearSnapshotCache();
    }
  }
  formSubmissionErrored(formSubmission, error3) {
    console.error(error3);
  }
  formSubmissionFinished(formSubmission) {
    if (typeof this.adapter.formSubmissionFinished === "function") {
      this.adapter.formSubmissionFinished(formSubmission);
    }
  }
  // Link prefetching
  linkPrefetchingIsEnabledForLocation(location2) {
    if (typeof this.adapter.linkPrefetchingIsEnabledForLocation === "function") {
      return this.adapter.linkPrefetchingIsEnabledForLocation(location2);
    }
    return true;
  }
  // Visit delegate
  visitStarted(visit2) {
    this.delegate.visitStarted(visit2);
  }
  visitCompleted(visit2) {
    this.delegate.visitCompleted(visit2);
    delete this.currentVisit;
  }
  locationWithActionIsSamePage(location2, action) {
    const anchor = getAnchor(location2);
    const currentAnchor = getAnchor(this.view.lastRenderedLocation);
    const isRestorationToTop = action === "restore" && typeof anchor === "undefined";
    return action !== "replace" && getRequestURL(location2) === getRequestURL(this.view.lastRenderedLocation) && (isRestorationToTop || anchor != null && anchor !== currentAnchor);
  }
  visitScrolledToSamePageLocation(oldURL, newURL) {
    this.delegate.visitScrolledToSamePageLocation(oldURL, newURL);
  }
  // Visits
  get location() {
    return this.history.location;
  }
  get restorationIdentifier() {
    return this.history.restorationIdentifier;
  }
  #getActionForFormSubmission(formSubmission, fetchResponse) {
    const { submitter: submitter2, formElement } = formSubmission;
    return getVisitAction(submitter2, formElement) || this.#getDefaultAction(fetchResponse);
  }
  #getDefaultAction(fetchResponse) {
    const sameLocationRedirect = fetchResponse.redirected && fetchResponse.location.href === this.location?.href;
    return sameLocationRedirect ? "replace" : "advance";
  }
};
var PageStage = {
  initial: 0,
  loading: 1,
  interactive: 2,
  complete: 3
};
var PageObserver = class {
  stage = PageStage.initial;
  started = false;
  constructor(delegate) {
    this.delegate = delegate;
  }
  start() {
    if (!this.started) {
      if (this.stage == PageStage.initial) {
        this.stage = PageStage.loading;
      }
      document.addEventListener("readystatechange", this.interpretReadyState, false);
      addEventListener("pagehide", this.pageWillUnload, false);
      this.started = true;
    }
  }
  stop() {
    if (this.started) {
      document.removeEventListener("readystatechange", this.interpretReadyState, false);
      removeEventListener("pagehide", this.pageWillUnload, false);
      this.started = false;
    }
  }
  interpretReadyState = () => {
    const { readyState } = this;
    if (readyState == "interactive") {
      this.pageIsInteractive();
    } else if (readyState == "complete") {
      this.pageIsComplete();
    }
  };
  pageIsInteractive() {
    if (this.stage == PageStage.loading) {
      this.stage = PageStage.interactive;
      this.delegate.pageBecameInteractive();
    }
  }
  pageIsComplete() {
    this.pageIsInteractive();
    if (this.stage == PageStage.interactive) {
      this.stage = PageStage.complete;
      this.delegate.pageLoaded();
    }
  }
  pageWillUnload = () => {
    this.delegate.pageWillUnload();
  };
  get readyState() {
    return document.readyState;
  }
};
var ScrollObserver = class {
  started = false;
  constructor(delegate) {
    this.delegate = delegate;
  }
  start() {
    if (!this.started) {
      addEventListener("scroll", this.onScroll, false);
      this.onScroll();
      this.started = true;
    }
  }
  stop() {
    if (this.started) {
      removeEventListener("scroll", this.onScroll, false);
      this.started = false;
    }
  }
  onScroll = () => {
    this.updatePosition({ x: window.pageXOffset, y: window.pageYOffset });
  };
  // Private
  updatePosition(position) {
    this.delegate.scrollPositionChanged(position);
  }
};
var StreamMessageRenderer = class {
  render({ fragment }) {
    Bardo.preservingPermanentElements(this, getPermanentElementMapForFragment(fragment), () => {
      withAutofocusFromFragment(fragment, () => {
        withPreservedFocus(() => {
          document.documentElement.appendChild(fragment);
        });
      });
    });
  }
  // Bardo delegate
  enteringBardo(currentPermanentElement, newPermanentElement) {
    newPermanentElement.replaceWith(currentPermanentElement.cloneNode(true));
  }
  leavingBardo() {
  }
};
function getPermanentElementMapForFragment(fragment) {
  const permanentElementsInDocument = queryPermanentElementsAll(document.documentElement);
  const permanentElementMap = {};
  for (const permanentElementInDocument of permanentElementsInDocument) {
    const { id: id2 } = permanentElementInDocument;
    for (const streamElement of fragment.querySelectorAll("turbo-stream")) {
      const elementInStream = getPermanentElementById(streamElement.templateElement.content, id2);
      if (elementInStream) {
        permanentElementMap[id2] = [permanentElementInDocument, elementInStream];
      }
    }
  }
  return permanentElementMap;
}
async function withAutofocusFromFragment(fragment, callback) {
  const generatedID = `turbo-stream-autofocus-${uuid()}`;
  const turboStreams = fragment.querySelectorAll("turbo-stream");
  const elementWithAutofocus = firstAutofocusableElementInStreams(turboStreams);
  let willAutofocusId = null;
  if (elementWithAutofocus) {
    if (elementWithAutofocus.id) {
      willAutofocusId = elementWithAutofocus.id;
    } else {
      willAutofocusId = generatedID;
    }
    elementWithAutofocus.id = willAutofocusId;
  }
  callback();
  await nextRepaint();
  const hasNoActiveElement = document.activeElement == null || document.activeElement == document.body;
  if (hasNoActiveElement && willAutofocusId) {
    const elementToAutofocus = document.getElementById(willAutofocusId);
    if (elementIsFocusable(elementToAutofocus)) {
      elementToAutofocus.focus();
    }
    if (elementToAutofocus && elementToAutofocus.id == generatedID) {
      elementToAutofocus.removeAttribute("id");
    }
  }
}
async function withPreservedFocus(callback) {
  const [activeElementBeforeRender, activeElementAfterRender] = await around(callback, () => document.activeElement);
  const restoreFocusTo = activeElementBeforeRender && activeElementBeforeRender.id;
  if (restoreFocusTo) {
    const elementToFocus = document.getElementById(restoreFocusTo);
    if (elementIsFocusable(elementToFocus) && elementToFocus != activeElementAfterRender) {
      elementToFocus.focus();
    }
  }
}
function firstAutofocusableElementInStreams(nodeListOfStreamElements) {
  for (const streamElement of nodeListOfStreamElements) {
    const elementWithAutofocus = queryAutofocusableElement(streamElement.templateElement.content);
    if (elementWithAutofocus) return elementWithAutofocus;
  }
  return null;
}
var StreamObserver = class {
  sources = /* @__PURE__ */ new Set();
  #started = false;
  constructor(delegate) {
    this.delegate = delegate;
  }
  start() {
    if (!this.#started) {
      this.#started = true;
      addEventListener("turbo:before-fetch-response", this.inspectFetchResponse, false);
    }
  }
  stop() {
    if (this.#started) {
      this.#started = false;
      removeEventListener("turbo:before-fetch-response", this.inspectFetchResponse, false);
    }
  }
  connectStreamSource(source) {
    if (!this.streamSourceIsConnected(source)) {
      this.sources.add(source);
      source.addEventListener("message", this.receiveMessageEvent, false);
    }
  }
  disconnectStreamSource(source) {
    if (this.streamSourceIsConnected(source)) {
      this.sources.delete(source);
      source.removeEventListener("message", this.receiveMessageEvent, false);
    }
  }
  streamSourceIsConnected(source) {
    return this.sources.has(source);
  }
  inspectFetchResponse = (event2) => {
    const response = fetchResponseFromEvent(event2);
    if (response && fetchResponseIsStream(response)) {
      event2.preventDefault();
      this.receiveMessageResponse(response);
    }
  };
  receiveMessageEvent = (event2) => {
    if (this.#started && typeof event2.data == "string") {
      this.receiveMessageHTML(event2.data);
    }
  };
  async receiveMessageResponse(response) {
    const html = await response.responseHTML;
    if (html) {
      this.receiveMessageHTML(html);
    }
  }
  receiveMessageHTML(html) {
    this.delegate.receivedMessageFromStream(StreamMessage.wrap(html));
  }
};
function fetchResponseFromEvent(event2) {
  const fetchResponse = event2.detail?.fetchResponse;
  if (fetchResponse instanceof FetchResponse) {
    return fetchResponse;
  }
}
function fetchResponseIsStream(response) {
  const contentType = response.contentType ?? "";
  return contentType.startsWith(StreamMessage.contentType);
}
var ErrorRenderer = class extends Renderer {
  static renderElement(currentElement, newElement) {
    const { documentElement, body } = document;
    documentElement.replaceChild(newElement, body);
  }
  async render() {
    this.replaceHeadAndBody();
    this.activateScriptElements();
  }
  replaceHeadAndBody() {
    const { documentElement, head } = document;
    documentElement.replaceChild(this.newHead, head);
    this.renderElement(this.currentElement, this.newElement);
  }
  activateScriptElements() {
    for (const replaceableElement of this.scriptElements) {
      const parentNode = replaceableElement.parentNode;
      if (parentNode) {
        const element = activateScriptElement(replaceableElement);
        parentNode.replaceChild(element, replaceableElement);
      }
    }
  }
  get newHead() {
    return this.newSnapshot.headSnapshot.element;
  }
  get scriptElements() {
    return document.documentElement.querySelectorAll("script");
  }
};
var PageRenderer = class extends Renderer {
  static renderElement(currentElement, newElement) {
    if (document.body && newElement instanceof HTMLBodyElement) {
      document.body.replaceWith(newElement);
    } else {
      document.documentElement.appendChild(newElement);
    }
  }
  get shouldRender() {
    return this.newSnapshot.isVisitable && this.trackedElementsAreIdentical;
  }
  get reloadReason() {
    if (!this.newSnapshot.isVisitable) {
      return {
        reason: "turbo_visit_control_is_reload"
      };
    }
    if (!this.trackedElementsAreIdentical) {
      return {
        reason: "tracked_element_mismatch"
      };
    }
  }
  async prepareToRender() {
    this.#setLanguage();
    await this.mergeHead();
  }
  async render() {
    if (this.willRender) {
      await this.replaceBody();
    }
  }
  finishRendering() {
    super.finishRendering();
    if (!this.isPreview) {
      this.focusFirstAutofocusableElement();
    }
  }
  get currentHeadSnapshot() {
    return this.currentSnapshot.headSnapshot;
  }
  get newHeadSnapshot() {
    return this.newSnapshot.headSnapshot;
  }
  get newElement() {
    return this.newSnapshot.element;
  }
  #setLanguage() {
    const { documentElement } = this.currentSnapshot;
    const { lang } = this.newSnapshot;
    if (lang) {
      documentElement.setAttribute("lang", lang);
    } else {
      documentElement.removeAttribute("lang");
    }
  }
  async mergeHead() {
    const mergedHeadElements = this.mergeProvisionalElements();
    const newStylesheetElements = this.copyNewHeadStylesheetElements();
    this.copyNewHeadScriptElements();
    await mergedHeadElements;
    await newStylesheetElements;
    if (this.willRender) {
      this.removeUnusedDynamicStylesheetElements();
    }
  }
  async replaceBody() {
    await this.preservingPermanentElements(async () => {
      this.activateNewBody();
      await this.assignNewBody();
    });
  }
  get trackedElementsAreIdentical() {
    return this.currentHeadSnapshot.trackedElementSignature == this.newHeadSnapshot.trackedElementSignature;
  }
  async copyNewHeadStylesheetElements() {
    const loadingElements = [];
    for (const element of this.newHeadStylesheetElements) {
      loadingElements.push(waitForLoad(element));
      document.head.appendChild(element);
    }
    await Promise.all(loadingElements);
  }
  copyNewHeadScriptElements() {
    for (const element of this.newHeadScriptElements) {
      document.head.appendChild(activateScriptElement(element));
    }
  }
  removeUnusedDynamicStylesheetElements() {
    for (const element of this.unusedDynamicStylesheetElements) {
      document.head.removeChild(element);
    }
  }
  async mergeProvisionalElements() {
    const newHeadElements = [...this.newHeadProvisionalElements];
    for (const element of this.currentHeadProvisionalElements) {
      if (!this.isCurrentElementInElementList(element, newHeadElements)) {
        document.head.removeChild(element);
      }
    }
    for (const element of newHeadElements) {
      document.head.appendChild(element);
    }
  }
  isCurrentElementInElementList(element, elementList) {
    for (const [index, newElement] of elementList.entries()) {
      if (element.tagName == "TITLE") {
        if (newElement.tagName != "TITLE") {
          continue;
        }
        if (element.innerHTML == newElement.innerHTML) {
          elementList.splice(index, 1);
          return true;
        }
      }
      if (newElement.isEqualNode(element)) {
        elementList.splice(index, 1);
        return true;
      }
    }
    return false;
  }
  removeCurrentHeadProvisionalElements() {
    for (const element of this.currentHeadProvisionalElements) {
      document.head.removeChild(element);
    }
  }
  copyNewHeadProvisionalElements() {
    for (const element of this.newHeadProvisionalElements) {
      document.head.appendChild(element);
    }
  }
  activateNewBody() {
    document.adoptNode(this.newElement);
    this.activateNewBodyScriptElements();
  }
  activateNewBodyScriptElements() {
    for (const inertScriptElement of this.newBodyScriptElements) {
      const activatedScriptElement = activateScriptElement(inertScriptElement);
      inertScriptElement.replaceWith(activatedScriptElement);
    }
  }
  async assignNewBody() {
    await this.renderElement(this.currentElement, this.newElement);
  }
  get unusedDynamicStylesheetElements() {
    return this.oldHeadStylesheetElements.filter((element) => {
      return element.getAttribute("data-turbo-track") === "dynamic";
    });
  }
  get oldHeadStylesheetElements() {
    return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot);
  }
  get newHeadStylesheetElements() {
    return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot);
  }
  get newHeadScriptElements() {
    return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot);
  }
  get currentHeadProvisionalElements() {
    return this.currentHeadSnapshot.provisionalElements;
  }
  get newHeadProvisionalElements() {
    return this.newHeadSnapshot.provisionalElements;
  }
  get newBodyScriptElements() {
    return this.newElement.querySelectorAll("script");
  }
};
var MorphingPageRenderer = class extends PageRenderer {
  static renderElement(currentElement, newElement) {
    morphElements(currentElement, newElement, {
      callbacks: {
        beforeNodeMorphed: (node, newNode) => {
          if (shouldRefreshFrameWithMorphing(node, newNode) && !closestFrameReloadableWithMorphing(node)) {
            node.reload();
            return false;
          }
          return true;
        }
      }
    });
    dispatch2("turbo:morph", { detail: { currentElement, newElement } });
  }
  async preservingPermanentElements(callback) {
    return await callback();
  }
  get renderMethod() {
    return "morph";
  }
  get shouldAutofocus() {
    return false;
  }
};
var SnapshotCache = class {
  keys = [];
  snapshots = {};
  constructor(size2) {
    this.size = size2;
  }
  has(location2) {
    return toCacheKey(location2) in this.snapshots;
  }
  get(location2) {
    if (this.has(location2)) {
      const snapshot = this.read(location2);
      this.touch(location2);
      return snapshot;
    }
  }
  put(location2, snapshot) {
    this.write(location2, snapshot);
    this.touch(location2);
    return snapshot;
  }
  clear() {
    this.snapshots = {};
  }
  // Private
  read(location2) {
    return this.snapshots[toCacheKey(location2)];
  }
  write(location2, snapshot) {
    this.snapshots[toCacheKey(location2)] = snapshot;
  }
  touch(location2) {
    const key = toCacheKey(location2);
    const index = this.keys.indexOf(key);
    if (index > -1) this.keys.splice(index, 1);
    this.keys.unshift(key);
    this.trim();
  }
  trim() {
    for (const key of this.keys.splice(this.size)) {
      delete this.snapshots[key];
    }
  }
};
var PageView = class extends View {
  snapshotCache = new SnapshotCache(10);
  lastRenderedLocation = new URL(location.href);
  forceReloaded = false;
  shouldTransitionTo(newSnapshot) {
    return this.snapshot.prefersViewTransitions && newSnapshot.prefersViewTransitions;
  }
  renderPage(snapshot, isPreview = false, willRender = true, visit2) {
    const shouldMorphPage = this.isPageRefresh(visit2) && this.snapshot.shouldMorphPage;
    const rendererClass = shouldMorphPage ? MorphingPageRenderer : PageRenderer;
    const renderer = new rendererClass(this.snapshot, snapshot, isPreview, willRender);
    if (!renderer.shouldRender) {
      this.forceReloaded = true;
    } else {
      visit2?.changeHistory();
    }
    return this.render(renderer);
  }
  renderError(snapshot, visit2) {
    visit2?.changeHistory();
    const renderer = new ErrorRenderer(this.snapshot, snapshot, false);
    return this.render(renderer);
  }
  clearSnapshotCache() {
    this.snapshotCache.clear();
  }
  async cacheSnapshot(snapshot = this.snapshot) {
    if (snapshot.isCacheable) {
      this.delegate.viewWillCacheSnapshot();
      const { lastRenderedLocation: location2 } = this;
      await nextEventLoopTick();
      const cachedSnapshot = snapshot.clone();
      this.snapshotCache.put(location2, cachedSnapshot);
      return cachedSnapshot;
    }
  }
  getCachedSnapshotForLocation(location2) {
    return this.snapshotCache.get(location2);
  }
  isPageRefresh(visit2) {
    return !visit2 || this.lastRenderedLocation.pathname === visit2.location.pathname && visit2.action === "replace";
  }
  shouldPreserveScrollPosition(visit2) {
    return this.isPageRefresh(visit2) && this.snapshot.shouldPreserveScrollPosition;
  }
  get snapshot() {
    return PageSnapshot.fromElement(this.element);
  }
};
var Preloader = class {
  selector = "a[data-turbo-preload]";
  constructor(delegate, snapshotCache) {
    this.delegate = delegate;
    this.snapshotCache = snapshotCache;
  }
  start() {
    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", this.#preloadAll);
    } else {
      this.preloadOnLoadLinksForView(document.body);
    }
  }
  stop() {
    document.removeEventListener("DOMContentLoaded", this.#preloadAll);
  }
  preloadOnLoadLinksForView(element) {
    for (const link of element.querySelectorAll(this.selector)) {
      if (this.delegate.shouldPreloadLink(link)) {
        this.preloadURL(link);
      }
    }
  }
  async preloadURL(link) {
    const location2 = new URL(link.href);
    if (this.snapshotCache.has(location2)) {
      return;
    }
    const fetchRequest = new FetchRequest(this, FetchMethod.get, location2, new URLSearchParams(), link);
    await fetchRequest.perform();
  }
  // Fetch request delegate
  prepareRequest(fetchRequest) {
    fetchRequest.headers["X-Sec-Purpose"] = "prefetch";
  }
  async requestSucceededWithResponse(fetchRequest, fetchResponse) {
    try {
      const responseHTML = await fetchResponse.responseHTML;
      const snapshot = PageSnapshot.fromHTMLString(responseHTML);
      this.snapshotCache.put(fetchRequest.url, snapshot);
    } catch (_) {
    }
  }
  requestStarted(fetchRequest) {
  }
  requestErrored(fetchRequest) {
  }
  requestFinished(fetchRequest) {
  }
  requestPreventedHandlingResponse(fetchRequest, fetchResponse) {
  }
  requestFailedWithResponse(fetchRequest, fetchResponse) {
  }
  #preloadAll = () => {
    this.preloadOnLoadLinksForView(document.body);
  };
};
var Cache = class {
  constructor(session2) {
    this.session = session2;
  }
  clear() {
    this.session.clearCache();
  }
  resetCacheControl() {
    this.#setCacheControl("");
  }
  exemptPageFromCache() {
    this.#setCacheControl("no-cache");
  }
  exemptPageFromPreview() {
    this.#setCacheControl("no-preview");
  }
  #setCacheControl(value) {
    setMetaContent("turbo-cache-control", value);
  }
};
var Session = class {
  navigator = new Navigator(this);
  history = new History(this);
  view = new PageView(this, document.documentElement);
  adapter = new BrowserAdapter(this);
  pageObserver = new PageObserver(this);
  cacheObserver = new CacheObserver();
  linkPrefetchObserver = new LinkPrefetchObserver(this, document);
  linkClickObserver = new LinkClickObserver(this, window);
  formSubmitObserver = new FormSubmitObserver(this, document);
  scrollObserver = new ScrollObserver(this);
  streamObserver = new StreamObserver(this);
  formLinkClickObserver = new FormLinkClickObserver(this, document.documentElement);
  frameRedirector = new FrameRedirector(this, document.documentElement);
  streamMessageRenderer = new StreamMessageRenderer();
  cache = new Cache(this);
  enabled = true;
  started = false;
  #pageRefreshDebouncePeriod = 150;
  constructor(recentRequests2) {
    this.recentRequests = recentRequests2;
    this.preloader = new Preloader(this, this.view.snapshotCache);
    this.debouncedRefresh = this.refresh;
    this.pageRefreshDebouncePeriod = this.pageRefreshDebouncePeriod;
  }
  start() {
    if (!this.started) {
      this.pageObserver.start();
      this.cacheObserver.start();
      this.linkPrefetchObserver.start();
      this.formLinkClickObserver.start();
      this.linkClickObserver.start();
      this.formSubmitObserver.start();
      this.scrollObserver.start();
      this.streamObserver.start();
      this.frameRedirector.start();
      this.history.start();
      this.preloader.start();
      this.started = true;
      this.enabled = true;
    }
  }
  disable() {
    this.enabled = false;
  }
  stop() {
    if (this.started) {
      this.pageObserver.stop();
      this.cacheObserver.stop();
      this.linkPrefetchObserver.stop();
      this.formLinkClickObserver.stop();
      this.linkClickObserver.stop();
      this.formSubmitObserver.stop();
      this.scrollObserver.stop();
      this.streamObserver.stop();
      this.frameRedirector.stop();
      this.history.stop();
      this.preloader.stop();
      this.started = false;
    }
  }
  registerAdapter(adapter) {
    this.adapter = adapter;
  }
  visit(location2, options = {}) {
    const frameElement = options.frame ? document.getElementById(options.frame) : null;
    if (frameElement instanceof FrameElement) {
      const action = options.action || getVisitAction(frameElement);
      frameElement.delegate.proposeVisitIfNavigatedWithAction(frameElement, action);
      frameElement.src = location2.toString();
    } else {
      this.navigator.proposeVisit(expandURL(location2), options);
    }
  }
  refresh(url, requestId) {
    const isRecentRequest = requestId && this.recentRequests.has(requestId);
    const isCurrentUrl = url === document.baseURI;
    if (!isRecentRequest && !this.navigator.currentVisit && isCurrentUrl) {
      this.visit(url, { action: "replace", shouldCacheSnapshot: false });
    }
  }
  connectStreamSource(source) {
    this.streamObserver.connectStreamSource(source);
  }
  disconnectStreamSource(source) {
    this.streamObserver.disconnectStreamSource(source);
  }
  renderStreamMessage(message) {
    this.streamMessageRenderer.render(StreamMessage.wrap(message));
  }
  clearCache() {
    this.view.clearSnapshotCache();
  }
  setProgressBarDelay(delay) {
    console.warn(
      "Please replace `session.setProgressBarDelay(delay)` with `session.progressBarDelay = delay`. The function is deprecated and will be removed in a future version of Turbo.`"
    );
    this.progressBarDelay = delay;
  }
  set progressBarDelay(delay) {
    config.drive.progressBarDelay = delay;
  }
  get progressBarDelay() {
    return config.drive.progressBarDelay;
  }
  set drive(value) {
    config.drive.enabled = value;
  }
  get drive() {
    return config.drive.enabled;
  }
  set formMode(value) {
    config.forms.mode = value;
  }
  get formMode() {
    return config.forms.mode;
  }
  get location() {
    return this.history.location;
  }
  get restorationIdentifier() {
    return this.history.restorationIdentifier;
  }
  get pageRefreshDebouncePeriod() {
    return this.#pageRefreshDebouncePeriod;
  }
  set pageRefreshDebouncePeriod(value) {
    this.refresh = debounce2(this.debouncedRefresh.bind(this), value);
    this.#pageRefreshDebouncePeriod = value;
  }
  // Preloader delegate
  shouldPreloadLink(element) {
    const isUnsafe = element.hasAttribute("data-turbo-method");
    const isStream = element.hasAttribute("data-turbo-stream");
    const frameTarget = element.getAttribute("data-turbo-frame");
    const frame = frameTarget == "_top" ? null : document.getElementById(frameTarget) || findClosestRecursively(element, "turbo-frame:not([disabled])");
    if (isUnsafe || isStream || frame instanceof FrameElement) {
      return false;
    } else {
      const location2 = new URL(element.href);
      return this.elementIsNavigatable(element) && locationIsVisitable(location2, this.snapshot.rootLocation);
    }
  }
  // History delegate
  historyPoppedToLocationWithRestorationIdentifierAndDirection(location2, restorationIdentifier, direction) {
    if (this.enabled) {
      this.navigator.startVisit(location2, restorationIdentifier, {
        action: "restore",
        historyChanged: true,
        direction
      });
    } else {
      this.adapter.pageInvalidated({
        reason: "turbo_disabled"
      });
    }
  }
  // Scroll observer delegate
  scrollPositionChanged(position) {
    this.history.updateRestorationData({ scrollPosition: position });
  }
  // Form click observer delegate
  willSubmitFormLinkToLocation(link, location2) {
    return this.elementIsNavigatable(link) && locationIsVisitable(location2, this.snapshot.rootLocation);
  }
  submittedFormLinkToLocation() {
  }
  // Link hover observer delegate
  canPrefetchRequestToLocation(link, location2) {
    return this.elementIsNavigatable(link) && locationIsVisitable(location2, this.snapshot.rootLocation) && this.navigator.linkPrefetchingIsEnabledForLocation(location2);
  }
  // Link click observer delegate
  willFollowLinkToLocation(link, location2, event2) {
    return this.elementIsNavigatable(link) && locationIsVisitable(location2, this.snapshot.rootLocation) && this.applicationAllowsFollowingLinkToLocation(link, location2, event2);
  }
  followedLinkToLocation(link, location2) {
    const action = this.getActionForLink(link);
    const acceptsStreamResponse = link.hasAttribute("data-turbo-stream");
    this.visit(location2.href, { action, acceptsStreamResponse });
  }
  // Navigator delegate
  allowsVisitingLocationWithAction(location2, action) {
    return this.locationWithActionIsSamePage(location2, action) || this.applicationAllowsVisitingLocation(location2);
  }
  visitProposedToLocation(location2, options) {
    extendURLWithDeprecatedProperties(location2);
    this.adapter.visitProposedToLocation(location2, options);
  }
  // Visit delegate
  visitStarted(visit2) {
    if (!visit2.acceptsStreamResponse) {
      markAsBusy(document.documentElement);
      this.view.markVisitDirection(visit2.direction);
    }
    extendURLWithDeprecatedProperties(visit2.location);
    if (!visit2.silent) {
      this.notifyApplicationAfterVisitingLocation(visit2.location, visit2.action);
    }
  }
  visitCompleted(visit2) {
    this.view.unmarkVisitDirection();
    clearBusyState(document.documentElement);
    this.notifyApplicationAfterPageLoad(visit2.getTimingMetrics());
  }
  locationWithActionIsSamePage(location2, action) {
    return this.navigator.locationWithActionIsSamePage(location2, action);
  }
  visitScrolledToSamePageLocation(oldURL, newURL) {
    this.notifyApplicationAfterVisitingSamePageLocation(oldURL, newURL);
  }
  // Form submit observer delegate
  willSubmitForm(form, submitter2) {
    const action = getAction$1(form, submitter2);
    return this.submissionIsNavigatable(form, submitter2) && locationIsVisitable(expandURL(action), this.snapshot.rootLocation);
  }
  formSubmitted(form, submitter2) {
    this.navigator.submitForm(form, submitter2);
  }
  // Page observer delegate
  pageBecameInteractive() {
    this.view.lastRenderedLocation = this.location;
    this.notifyApplicationAfterPageLoad();
  }
  pageLoaded() {
    this.history.assumeControlOfScrollRestoration();
  }
  pageWillUnload() {
    this.history.relinquishControlOfScrollRestoration();
  }
  // Stream observer delegate
  receivedMessageFromStream(message) {
    this.renderStreamMessage(message);
  }
  // Page view delegate
  viewWillCacheSnapshot() {
    if (!this.navigator.currentVisit?.silent) {
      this.notifyApplicationBeforeCachingSnapshot();
    }
  }
  allowsImmediateRender({ element }, options) {
    const event2 = this.notifyApplicationBeforeRender(element, options);
    const {
      defaultPrevented,
      detail: { render }
    } = event2;
    if (this.view.renderer && render) {
      this.view.renderer.renderElement = render;
    }
    return !defaultPrevented;
  }
  viewRenderedSnapshot(_snapshot, _isPreview, renderMethod) {
    this.view.lastRenderedLocation = this.history.location;
    this.notifyApplicationAfterRender(renderMethod);
  }
  preloadOnLoadLinksForView(element) {
    this.preloader.preloadOnLoadLinksForView(element);
  }
  viewInvalidated(reason) {
    this.adapter.pageInvalidated(reason);
  }
  // Frame element
  frameLoaded(frame) {
    this.notifyApplicationAfterFrameLoad(frame);
  }
  frameRendered(fetchResponse, frame) {
    this.notifyApplicationAfterFrameRender(fetchResponse, frame);
  }
  // Application events
  applicationAllowsFollowingLinkToLocation(link, location2, ev) {
    const event2 = this.notifyApplicationAfterClickingLinkToLocation(link, location2, ev);
    return !event2.defaultPrevented;
  }
  applicationAllowsVisitingLocation(location2) {
    const event2 = this.notifyApplicationBeforeVisitingLocation(location2);
    return !event2.defaultPrevented;
  }
  notifyApplicationAfterClickingLinkToLocation(link, location2, event2) {
    return dispatch2("turbo:click", {
      target: link,
      detail: { url: location2.href, originalEvent: event2 },
      cancelable: true
    });
  }
  notifyApplicationBeforeVisitingLocation(location2) {
    return dispatch2("turbo:before-visit", {
      detail: { url: location2.href },
      cancelable: true
    });
  }
  notifyApplicationAfterVisitingLocation(location2, action) {
    return dispatch2("turbo:visit", { detail: { url: location2.href, action } });
  }
  notifyApplicationBeforeCachingSnapshot() {
    return dispatch2("turbo:before-cache");
  }
  notifyApplicationBeforeRender(newBody, options) {
    return dispatch2("turbo:before-render", {
      detail: { newBody, ...options },
      cancelable: true
    });
  }
  notifyApplicationAfterRender(renderMethod) {
    return dispatch2("turbo:render", { detail: { renderMethod } });
  }
  notifyApplicationAfterPageLoad(timing = {}) {
    return dispatch2("turbo:load", {
      detail: { url: this.location.href, timing }
    });
  }
  notifyApplicationAfterVisitingSamePageLocation(oldURL, newURL) {
    dispatchEvent(
      new HashChangeEvent("hashchange", {
        oldURL: oldURL.toString(),
        newURL: newURL.toString()
      })
    );
  }
  notifyApplicationAfterFrameLoad(frame) {
    return dispatch2("turbo:frame-load", { target: frame });
  }
  notifyApplicationAfterFrameRender(fetchResponse, frame) {
    return dispatch2("turbo:frame-render", {
      detail: { fetchResponse },
      target: frame,
      cancelable: true
    });
  }
  // Helpers
  submissionIsNavigatable(form, submitter2) {
    if (config.forms.mode == "off") {
      return false;
    } else {
      const submitterIsNavigatable = submitter2 ? this.elementIsNavigatable(submitter2) : true;
      if (config.forms.mode == "optin") {
        return submitterIsNavigatable && form.closest('[data-turbo="true"]') != null;
      } else {
        return submitterIsNavigatable && this.elementIsNavigatable(form);
      }
    }
  }
  elementIsNavigatable(element) {
    const container = findClosestRecursively(element, "[data-turbo]");
    const withinFrame = findClosestRecursively(element, "turbo-frame");
    if (config.drive.enabled || withinFrame) {
      if (container) {
        return container.getAttribute("data-turbo") != "false";
      } else {
        return true;
      }
    } else {
      if (container) {
        return container.getAttribute("data-turbo") == "true";
      } else {
        return false;
      }
    }
  }
  // Private
  getActionForLink(link) {
    return getVisitAction(link) || "advance";
  }
  get snapshot() {
    return this.view.snapshot;
  }
};
function extendURLWithDeprecatedProperties(url) {
  Object.defineProperties(url, deprecatedLocationPropertyDescriptors);
}
var deprecatedLocationPropertyDescriptors = {
  absoluteURL: {
    get() {
      return this.toString();
    }
  }
};
var session = new Session(recentRequests);
var { cache, navigator: navigator$1 } = session;
function start3() {
  session.start();
}
function registerAdapter(adapter) {
  session.registerAdapter(adapter);
}
function visit(location2, options) {
  session.visit(location2, options);
}
function connectStreamSource(source) {
  session.connectStreamSource(source);
}
function disconnectStreamSource(source) {
  session.disconnectStreamSource(source);
}
function renderStreamMessage(message) {
  session.renderStreamMessage(message);
}
function clearCache() {
  console.warn(
    "Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"
  );
  session.clearCache();
}
function setProgressBarDelay(delay) {
  console.warn(
    "Please replace `Turbo.setProgressBarDelay(delay)` with `Turbo.config.drive.progressBarDelay = delay`. The top-level function is deprecated and will be removed in a future version of Turbo.`"
  );
  config.drive.progressBarDelay = delay;
}
function setConfirmMethod(confirmMethod) {
  console.warn(
    "Please replace `Turbo.setConfirmMethod(confirmMethod)` with `Turbo.config.forms.confirm = confirmMethod`. The top-level function is deprecated and will be removed in a future version of Turbo.`"
  );
  config.forms.confirm = confirmMethod;
}
function setFormMode(mode) {
  console.warn(
    "Please replace `Turbo.setFormMode(mode)` with `Turbo.config.forms.mode = mode`. The top-level function is deprecated and will be removed in a future version of Turbo.`"
  );
  config.forms.mode = mode;
}
function morphBodyElements(currentBody, newBody) {
  MorphingPageRenderer.renderElement(currentBody, newBody);
}
function morphTurboFrameElements(currentFrame, newFrame) {
  MorphingFrameRenderer.renderElement(currentFrame, newFrame);
}
var Turbo2 = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  navigator: navigator$1,
  session,
  cache,
  PageRenderer,
  PageSnapshot,
  FrameRenderer,
  fetch: fetchWithTurboHeaders,
  config,
  start: start3,
  registerAdapter,
  visit,
  connectStreamSource,
  disconnectStreamSource,
  renderStreamMessage,
  clearCache,
  setProgressBarDelay,
  setConfirmMethod,
  setFormMode,
  morphBodyElements,
  morphTurboFrameElements,
  morphChildren,
  morphElements
});
var TurboFrameMissingError = class extends Error {
};
var FrameController = class {
  fetchResponseLoaded = (_fetchResponse) => Promise.resolve();
  #currentFetchRequest = null;
  #resolveVisitPromise = () => {
  };
  #connected = false;
  #hasBeenLoaded = false;
  #ignoredAttributes = /* @__PURE__ */ new Set();
  #shouldMorphFrame = false;
  action = null;
  constructor(element) {
    this.element = element;
    this.view = new FrameView(this, this.element);
    this.appearanceObserver = new AppearanceObserver(this, this.element);
    this.formLinkClickObserver = new FormLinkClickObserver(this, this.element);
    this.linkInterceptor = new LinkInterceptor(this, this.element);
    this.restorationIdentifier = uuid();
    this.formSubmitObserver = new FormSubmitObserver(this, this.element);
  }
  // Frame delegate
  connect() {
    if (!this.#connected) {
      this.#connected = true;
      if (this.loadingStyle == FrameLoadingStyle.lazy) {
        this.appearanceObserver.start();
      } else {
        this.#loadSourceURL();
      }
      this.formLinkClickObserver.start();
      this.linkInterceptor.start();
      this.formSubmitObserver.start();
    }
  }
  disconnect() {
    if (this.#connected) {
      this.#connected = false;
      this.appearanceObserver.stop();
      this.formLinkClickObserver.stop();
      this.linkInterceptor.stop();
      this.formSubmitObserver.stop();
    }
  }
  disabledChanged() {
    if (this.loadingStyle == FrameLoadingStyle.eager) {
      this.#loadSourceURL();
    }
  }
  sourceURLChanged() {
    if (this.#isIgnoringChangesTo("src")) return;
    if (this.element.isConnected) {
      this.complete = false;
    }
    if (this.loadingStyle == FrameLoadingStyle.eager || this.#hasBeenLoaded) {
      this.#loadSourceURL();
    }
  }
  sourceURLReloaded() {
    const { refresh, src } = this.element;
    this.#shouldMorphFrame = src && refresh === "morph";
    this.element.removeAttribute("complete");
    this.element.src = null;
    this.element.src = src;
    return this.element.loaded;
  }
  loadingStyleChanged() {
    if (this.loadingStyle == FrameLoadingStyle.lazy) {
      this.appearanceObserver.start();
    } else {
      this.appearanceObserver.stop();
      this.#loadSourceURL();
    }
  }
  async #loadSourceURL() {
    if (this.enabled && this.isActive && !this.complete && this.sourceURL) {
      this.element.loaded = this.#visit(expandURL(this.sourceURL));
      this.appearanceObserver.stop();
      await this.element.loaded;
      this.#hasBeenLoaded = true;
    }
  }
  async loadResponse(fetchResponse) {
    if (fetchResponse.redirected || fetchResponse.succeeded && fetchResponse.isHTML) {
      this.sourceURL = fetchResponse.response.url;
    }
    try {
      const html = await fetchResponse.responseHTML;
      if (html) {
        const document2 = parseHTMLDocument(html);
        const pageSnapshot = PageSnapshot.fromDocument(document2);
        if (pageSnapshot.isVisitable) {
          await this.#loadFrameResponse(fetchResponse, document2);
        } else {
          await this.#handleUnvisitableFrameResponse(fetchResponse);
        }
      }
    } finally {
      this.#shouldMorphFrame = false;
      this.fetchResponseLoaded = () => Promise.resolve();
    }
  }
  // Appearance observer delegate
  elementAppearedInViewport(element) {
    this.proposeVisitIfNavigatedWithAction(element, getVisitAction(element));
    this.#loadSourceURL();
  }
  // Form link click observer delegate
  willSubmitFormLinkToLocation(link) {
    return this.#shouldInterceptNavigation(link);
  }
  submittedFormLinkToLocation(link, _location, form) {
    const frame = this.#findFrameElement(link);
    if (frame) form.setAttribute("data-turbo-frame", frame.id);
  }
  // Link interceptor delegate
  shouldInterceptLinkClick(element, _location, _event) {
    return this.#shouldInterceptNavigation(element);
  }
  linkClickIntercepted(element, location2) {
    this.#navigateFrame(element, location2);
  }
  // Form submit observer delegate
  willSubmitForm(element, submitter2) {
    return element.closest("turbo-frame") == this.element && this.#shouldInterceptNavigation(element, submitter2);
  }
  formSubmitted(element, submitter2) {
    if (this.formSubmission) {
      this.formSubmission.stop();
    }
    this.formSubmission = new FormSubmission(this, element, submitter2);
    const { fetchRequest } = this.formSubmission;
    this.prepareRequest(fetchRequest);
    this.formSubmission.start();
  }
  // Fetch request delegate
  prepareRequest(request) {
    request.headers["Turbo-Frame"] = this.id;
    if (this.currentNavigationElement?.hasAttribute("data-turbo-stream")) {
      request.acceptResponseType(StreamMessage.contentType);
    }
  }
  requestStarted(_request) {
    markAsBusy(this.element);
  }
  requestPreventedHandlingResponse(_request, _response) {
    this.#resolveVisitPromise();
  }
  async requestSucceededWithResponse(request, response) {
    await this.loadResponse(response);
    this.#resolveVisitPromise();
  }
  async requestFailedWithResponse(request, response) {
    await this.loadResponse(response);
    this.#resolveVisitPromise();
  }
  requestErrored(request, error3) {
    console.error(error3);
    this.#resolveVisitPromise();
  }
  requestFinished(_request) {
    clearBusyState(this.element);
  }
  // Form submission delegate
  formSubmissionStarted({ formElement }) {
    markAsBusy(formElement, this.#findFrameElement(formElement));
  }
  formSubmissionSucceededWithResponse(formSubmission, response) {
    const frame = this.#findFrameElement(formSubmission.formElement, formSubmission.submitter);
    frame.delegate.proposeVisitIfNavigatedWithAction(frame, getVisitAction(formSubmission.submitter, formSubmission.formElement, frame));
    frame.delegate.loadResponse(response);
    if (!formSubmission.isSafe) {
      session.clearCache();
    }
  }
  formSubmissionFailedWithResponse(formSubmission, fetchResponse) {
    this.element.delegate.loadResponse(fetchResponse);
    session.clearCache();
  }
  formSubmissionErrored(formSubmission, error3) {
    console.error(error3);
  }
  formSubmissionFinished({ formElement }) {
    clearBusyState(formElement, this.#findFrameElement(formElement));
  }
  // View delegate
  allowsImmediateRender({ element: newFrame }, options) {
    const event2 = dispatch2("turbo:before-frame-render", {
      target: this.element,
      detail: { newFrame, ...options },
      cancelable: true
    });
    const {
      defaultPrevented,
      detail: { render }
    } = event2;
    if (this.view.renderer && render) {
      this.view.renderer.renderElement = render;
    }
    return !defaultPrevented;
  }
  viewRenderedSnapshot(_snapshot, _isPreview, _renderMethod) {
  }
  preloadOnLoadLinksForView(element) {
    session.preloadOnLoadLinksForView(element);
  }
  viewInvalidated() {
  }
  // Frame renderer delegate
  willRenderFrame(currentElement, _newElement) {
    this.previousFrameElement = currentElement.cloneNode(true);
  }
  visitCachedSnapshot = ({ element }) => {
    const frame = element.querySelector("#" + this.element.id);
    if (frame && this.previousFrameElement) {
      frame.replaceChildren(...this.previousFrameElement.children);
    }
    delete this.previousFrameElement;
  };
  // Private
  async #loadFrameResponse(fetchResponse, document2) {
    const newFrameElement = await this.extractForeignFrameElement(document2.body);
    const rendererClass = this.#shouldMorphFrame ? MorphingFrameRenderer : FrameRenderer;
    if (newFrameElement) {
      const snapshot = new Snapshot(newFrameElement);
      const renderer = new rendererClass(this, this.view.snapshot, snapshot, false, false);
      if (this.view.renderPromise) await this.view.renderPromise;
      this.changeHistory();
      await this.view.render(renderer);
      this.complete = true;
      session.frameRendered(fetchResponse, this.element);
      session.frameLoaded(this.element);
      await this.fetchResponseLoaded(fetchResponse);
    } else if (this.#willHandleFrameMissingFromResponse(fetchResponse)) {
      this.#handleFrameMissingFromResponse(fetchResponse);
    }
  }
  async #visit(url) {
    const request = new FetchRequest(this, FetchMethod.get, url, new URLSearchParams(), this.element);
    this.#currentFetchRequest?.cancel();
    this.#currentFetchRequest = request;
    return new Promise((resolve) => {
      this.#resolveVisitPromise = () => {
        this.#resolveVisitPromise = () => {
        };
        this.#currentFetchRequest = null;
        resolve();
      };
      request.perform();
    });
  }
  #navigateFrame(element, url, submitter2) {
    const frame = this.#findFrameElement(element, submitter2);
    frame.delegate.proposeVisitIfNavigatedWithAction(frame, getVisitAction(submitter2, element, frame));
    this.#withCurrentNavigationElement(element, () => {
      frame.src = url;
    });
  }
  proposeVisitIfNavigatedWithAction(frame, action = null) {
    this.action = action;
    if (this.action) {
      const pageSnapshot = PageSnapshot.fromElement(frame).clone();
      const { visitCachedSnapshot } = frame.delegate;
      frame.delegate.fetchResponseLoaded = async (fetchResponse) => {
        if (frame.src) {
          const { statusCode, redirected } = fetchResponse;
          const responseHTML = await fetchResponse.responseHTML;
          const response = { statusCode, redirected, responseHTML };
          const options = {
            response,
            visitCachedSnapshot,
            willRender: false,
            updateHistory: false,
            restorationIdentifier: this.restorationIdentifier,
            snapshot: pageSnapshot
          };
          if (this.action) options.action = this.action;
          session.visit(frame.src, options);
        }
      };
    }
  }
  changeHistory() {
    if (this.action) {
      const method = getHistoryMethodForAction(this.action);
      session.history.update(method, expandURL(this.element.src || ""), this.restorationIdentifier);
    }
  }
  async #handleUnvisitableFrameResponse(fetchResponse) {
    console.warn(
      `The response (${fetchResponse.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`
    );
    await this.#visitResponse(fetchResponse.response);
  }
  #willHandleFrameMissingFromResponse(fetchResponse) {
    this.element.setAttribute("complete", "");
    const response = fetchResponse.response;
    const visit2 = async (url, options) => {
      if (url instanceof Response) {
        this.#visitResponse(url);
      } else {
        session.visit(url, options);
      }
    };
    const event2 = dispatch2("turbo:frame-missing", {
      target: this.element,
      detail: { response, visit: visit2 },
      cancelable: true
    });
    return !event2.defaultPrevented;
  }
  #handleFrameMissingFromResponse(fetchResponse) {
    this.view.missing();
    this.#throwFrameMissingError(fetchResponse);
  }
  #throwFrameMissingError(fetchResponse) {
    const message = `The response (${fetchResponse.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;
    throw new TurboFrameMissingError(message);
  }
  async #visitResponse(response) {
    const wrapped = new FetchResponse(response);
    const responseHTML = await wrapped.responseHTML;
    const { location: location2, redirected, statusCode } = wrapped;
    return session.visit(location2, { response: { redirected, statusCode, responseHTML } });
  }
  #findFrameElement(element, submitter2) {
    const id2 = getAttribute("data-turbo-frame", submitter2, element) || this.element.getAttribute("target");
    return getFrameElementById(id2) ?? this.element;
  }
  async extractForeignFrameElement(container) {
    let element;
    const id2 = CSS.escape(this.id);
    try {
      element = activateElement(container.querySelector(`turbo-frame#${id2}`), this.sourceURL);
      if (element) {
        return element;
      }
      element = activateElement(container.querySelector(`turbo-frame[src][recurse~=${id2}]`), this.sourceURL);
      if (element) {
        await element.loaded;
        return await this.extractForeignFrameElement(element);
      }
    } catch (error3) {
      console.error(error3);
      return new FrameElement();
    }
    return null;
  }
  #formActionIsVisitable(form, submitter2) {
    const action = getAction$1(form, submitter2);
    return locationIsVisitable(expandURL(action), this.rootLocation);
  }
  #shouldInterceptNavigation(element, submitter2) {
    const id2 = getAttribute("data-turbo-frame", submitter2, element) || this.element.getAttribute("target");
    if (element instanceof HTMLFormElement && !this.#formActionIsVisitable(element, submitter2)) {
      return false;
    }
    if (!this.enabled || id2 == "_top") {
      return false;
    }
    if (id2) {
      const frameElement = getFrameElementById(id2);
      if (frameElement) {
        return !frameElement.disabled;
      }
    }
    if (!session.elementIsNavigatable(element)) {
      return false;
    }
    if (submitter2 && !session.elementIsNavigatable(submitter2)) {
      return false;
    }
    return true;
  }
  // Computed properties
  get id() {
    return this.element.id;
  }
  get enabled() {
    return !this.element.disabled;
  }
  get sourceURL() {
    if (this.element.src) {
      return this.element.src;
    }
  }
  set sourceURL(sourceURL) {
    this.#ignoringChangesToAttribute("src", () => {
      this.element.src = sourceURL ?? null;
    });
  }
  get loadingStyle() {
    return this.element.loading;
  }
  get isLoading() {
    return this.formSubmission !== void 0 || this.#resolveVisitPromise() !== void 0;
  }
  get complete() {
    return this.element.hasAttribute("complete");
  }
  set complete(value) {
    if (value) {
      this.element.setAttribute("complete", "");
    } else {
      this.element.removeAttribute("complete");
    }
  }
  get isActive() {
    return this.element.isActive && this.#connected;
  }
  get rootLocation() {
    const meta = this.element.ownerDocument.querySelector(`meta[name="turbo-root"]`);
    const root = meta?.content ?? "/";
    return expandURL(root);
  }
  #isIgnoringChangesTo(attributeName) {
    return this.#ignoredAttributes.has(attributeName);
  }
  #ignoringChangesToAttribute(attributeName, callback) {
    this.#ignoredAttributes.add(attributeName);
    callback();
    this.#ignoredAttributes.delete(attributeName);
  }
  #withCurrentNavigationElement(element, callback) {
    this.currentNavigationElement = element;
    callback();
    delete this.currentNavigationElement;
  }
};
function getFrameElementById(id2) {
  if (id2 != null) {
    const element = document.getElementById(id2);
    if (element instanceof FrameElement) {
      return element;
    }
  }
}
function activateElement(element, currentURL) {
  if (element) {
    const src = element.getAttribute("src");
    if (src != null && currentURL != null && urlsAreEqual(src, currentURL)) {
      throw new Error(`Matching <turbo-frame id="${element.id}"> element has a source URL which references itself`);
    }
    if (element.ownerDocument !== document) {
      element = document.importNode(element, true);
    }
    if (element instanceof FrameElement) {
      element.connectedCallback();
      element.disconnectedCallback();
      return element;
    }
  }
}
var StreamActions = {
  after() {
    this.targetElements.forEach((e) => e.parentElement?.insertBefore(this.templateContent, e.nextSibling));
  },
  append() {
    this.removeDuplicateTargetChildren();
    this.targetElements.forEach((e) => e.append(this.templateContent));
  },
  before() {
    this.targetElements.forEach((e) => e.parentElement?.insertBefore(this.templateContent, e));
  },
  prepend() {
    this.removeDuplicateTargetChildren();
    this.targetElements.forEach((e) => e.prepend(this.templateContent));
  },
  remove() {
    this.targetElements.forEach((e) => e.remove());
  },
  replace() {
    const method = this.getAttribute("method");
    this.targetElements.forEach((targetElement) => {
      if (method === "morph") {
        morphElements(targetElement, this.templateContent);
      } else {
        targetElement.replaceWith(this.templateContent);
      }
    });
  },
  update() {
    const method = this.getAttribute("method");
    this.targetElements.forEach((targetElement) => {
      if (method === "morph") {
        morphChildren(targetElement, this.templateContent);
      } else {
        targetElement.innerHTML = "";
        targetElement.append(this.templateContent);
      }
    });
  },
  refresh() {
    session.refresh(this.baseURI, this.requestId);
  }
};
var StreamElement = class _StreamElement extends HTMLElement {
  static async renderElement(newElement) {
    await newElement.performAction();
  }
  async connectedCallback() {
    try {
      await this.render();
    } catch (error3) {
      console.error(error3);
    } finally {
      this.disconnect();
    }
  }
  async render() {
    return this.renderPromise ??= (async () => {
      const event2 = this.beforeRenderEvent;
      if (this.dispatchEvent(event2)) {
        await nextRepaint();
        await event2.detail.render(this);
      }
    })();
  }
  disconnect() {
    try {
      this.remove();
    } catch {
    }
  }
  /**
   * Removes duplicate children (by ID)
   */
  removeDuplicateTargetChildren() {
    this.duplicateChildren.forEach((c) => c.remove());
  }
  /**
   * Gets the list of duplicate children (i.e. those with the same ID)
   */
  get duplicateChildren() {
    const existingChildren = this.targetElements.flatMap((e) => [...e.children]).filter((c) => !!c.getAttribute("id"));
    const newChildrenIds = [...this.templateContent?.children || []].filter((c) => !!c.getAttribute("id")).map((c) => c.getAttribute("id"));
    return existingChildren.filter((c) => newChildrenIds.includes(c.getAttribute("id")));
  }
  /**
   * Gets the action function to be performed.
   */
  get performAction() {
    if (this.action) {
      const actionFunction = StreamActions[this.action];
      if (actionFunction) {
        return actionFunction;
      }
      this.#raise("unknown action");
    }
    this.#raise("action attribute is missing");
  }
  /**
   * Gets the target elements which the template will be rendered to.
   */
  get targetElements() {
    if (this.target) {
      return this.targetElementsById;
    } else if (this.targets) {
      return this.targetElementsByQuery;
    } else {
      this.#raise("target or targets attribute is missing");
    }
  }
  /**
   * Gets the contents of the main `<template>`.
   */
  get templateContent() {
    return this.templateElement.content.cloneNode(true);
  }
  /**
   * Gets the main `<template>` used for rendering
   */
  get templateElement() {
    if (this.firstElementChild === null) {
      const template = this.ownerDocument.createElement("template");
      this.appendChild(template);
      return template;
    } else if (this.firstElementChild instanceof HTMLTemplateElement) {
      return this.firstElementChild;
    }
    this.#raise("first child element must be a <template> element");
  }
  /**
   * Gets the current action.
   */
  get action() {
    return this.getAttribute("action");
  }
  /**
   * Gets the current target (an element ID) to which the result will
   * be rendered.
   */
  get target() {
    return this.getAttribute("target");
  }
  /**
   * Gets the current "targets" selector (a CSS selector)
   */
  get targets() {
    return this.getAttribute("targets");
  }
  /**
   * Reads the request-id attribute
   */
  get requestId() {
    return this.getAttribute("request-id");
  }
  #raise(message) {
    throw new Error(`${this.description}: ${message}`);
  }
  get description() {
    return (this.outerHTML.match(/<[^>]+>/) ?? [])[0] ?? "<turbo-stream>";
  }
  get beforeRenderEvent() {
    return new CustomEvent("turbo:before-stream-render", {
      bubbles: true,
      cancelable: true,
      detail: { newStream: this, render: _StreamElement.renderElement }
    });
  }
  get targetElementsById() {
    const element = this.ownerDocument?.getElementById(this.target);
    if (element !== null) {
      return [element];
    } else {
      return [];
    }
  }
  get targetElementsByQuery() {
    const elements = this.ownerDocument?.querySelectorAll(this.targets);
    if (elements.length !== 0) {
      return Array.prototype.slice.call(elements);
    } else {
      return [];
    }
  }
};
var StreamSourceElement = class extends HTMLElement {
  streamSource = null;
  connectedCallback() {
    this.streamSource = this.src.match(/^ws{1,2}:/) ? new WebSocket(this.src) : new EventSource(this.src);
    connectStreamSource(this.streamSource);
  }
  disconnectedCallback() {
    if (this.streamSource) {
      this.streamSource.close();
      disconnectStreamSource(this.streamSource);
    }
  }
  get src() {
    return this.getAttribute("src") || "";
  }
};
FrameElement.delegateConstructor = FrameController;
if (customElements.get("turbo-frame") === void 0) {
  customElements.define("turbo-frame", FrameElement);
}
if (customElements.get("turbo-stream") === void 0) {
  customElements.define("turbo-stream", StreamElement);
}
if (customElements.get("turbo-stream-source") === void 0) {
  customElements.define("turbo-stream-source", StreamSourceElement);
}
(() => {
  let element = document.currentScript;
  if (!element) return;
  if (element.hasAttribute("data-turbo-suppress-warning")) return;
  element = element.parentElement;
  while (element) {
    if (element == document.body) {
      return console.warn(
        unindent`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,
        element.outerHTML
      );
    }
    element = element.parentElement;
  }
})();
window.Turbo = { ...Turbo2, StreamActions };
start3();

// node_modules/@hotwired/turbo-rails/app/javascript/turbo/cable.js
var consumer;
async function getConsumer() {
  return consumer || setConsumer(createConsumer3().then(setConsumer));
}
function setConsumer(newConsumer) {
  return consumer = newConsumer;
}
async function createConsumer3() {
  const { createConsumer: createConsumer4 } = await Promise.resolve().then(() => (init_src(), src_exports));
  return createConsumer4();
}
async function subscribeTo(channel, mixin) {
  const { subscriptions } = await getConsumer();
  return subscriptions.create(channel, mixin);
}

// node_modules/@hotwired/turbo-rails/app/javascript/turbo/snakeize.js
function walk2(obj) {
  if (!obj || typeof obj !== "object") return obj;
  if (obj instanceof Date || obj instanceof RegExp) return obj;
  if (Array.isArray(obj)) return obj.map(walk2);
  return Object.keys(obj).reduce(function(acc, key) {
    var camel = key[0].toLowerCase() + key.slice(1).replace(/([A-Z]+)/g, function(m, x) {
      return "_" + x.toLowerCase();
    });
    acc[camel] = walk2(obj[key]);
    return acc;
  }, {});
}

// node_modules/@hotwired/turbo-rails/app/javascript/turbo/cable_stream_source_element.js
var TurboCableStreamSourceElement = class extends HTMLElement {
  static observedAttributes = ["channel", "signed-stream-name"];
  async connectedCallback() {
    connectStreamSource(this);
    this.subscription = await subscribeTo(this.channel, {
      received: this.dispatchMessageEvent.bind(this),
      connected: this.subscriptionConnected.bind(this),
      disconnected: this.subscriptionDisconnected.bind(this)
    });
  }
  disconnectedCallback() {
    disconnectStreamSource(this);
    if (this.subscription) this.subscription.unsubscribe();
    this.subscriptionDisconnected();
  }
  attributeChangedCallback() {
    if (this.subscription) {
      this.disconnectedCallback();
      this.connectedCallback();
    }
  }
  dispatchMessageEvent(data2) {
    const event2 = new MessageEvent("message", { data: data2 });
    return this.dispatchEvent(event2);
  }
  subscriptionConnected() {
    this.setAttribute("connected", "");
  }
  subscriptionDisconnected() {
    this.removeAttribute("connected");
  }
  get channel() {
    const channel = this.getAttribute("channel");
    const signed_stream_name = this.getAttribute("signed-stream-name");
    return { channel, signed_stream_name, ...walk2({ ...this.dataset }) };
  }
};
if (customElements.get("turbo-cable-stream-source") === void 0) {
  customElements.define("turbo-cable-stream-source", TurboCableStreamSourceElement);
}

// node_modules/@hotwired/turbo-rails/app/javascript/turbo/fetch_requests.js
function encodeMethodIntoRequestBody(event2) {
  if (event2.target instanceof HTMLFormElement) {
    const { target: form, detail: { fetchOptions } } = event2;
    form.addEventListener("turbo:submit-start", ({ detail: { formSubmission: { submitter: submitter2 } } }) => {
      const body = isBodyInit(fetchOptions.body) ? fetchOptions.body : new URLSearchParams();
      const method = determineFetchMethod(submitter2, body, form);
      if (!/get/i.test(method)) {
        if (/post/i.test(method)) {
          body.delete("_method");
        } else {
          body.set("_method", method);
        }
        fetchOptions.method = "post";
      }
    }, { once: true });
  }
}
function determineFetchMethod(submitter2, body, form) {
  const formMethod = determineFormMethod(submitter2);
  const overrideMethod = body.get("_method");
  const method = form.getAttribute("method") || "get";
  if (typeof formMethod == "string") {
    return formMethod;
  } else if (typeof overrideMethod == "string") {
    return overrideMethod;
  } else {
    return method;
  }
}
function determineFormMethod(submitter2) {
  if (submitter2 instanceof HTMLButtonElement || submitter2 instanceof HTMLInputElement) {
    if (submitter2.name === "_method") {
      return submitter2.value;
    } else if (submitter2.hasAttribute("formmethod")) {
      return submitter2.formMethod;
    } else {
      return null;
    }
  } else {
    return null;
  }
}
function isBodyInit(body) {
  return body instanceof FormData || body instanceof URLSearchParams;
}

// node_modules/@hotwired/turbo-rails/app/javascript/turbo/index.js
window.Turbo = turbo_es2017_esm_exports;
addEventListener("turbo:before-fetch-request", encodeMethodIntoRequestBody);

// node_modules/@hotwired/stimulus/dist/stimulus.js
var EventListener = class {
  constructor(eventTarget, eventName, eventOptions) {
    this.eventTarget = eventTarget;
    this.eventName = eventName;
    this.eventOptions = eventOptions;
    this.unorderedBindings = /* @__PURE__ */ new Set();
  }
  connect() {
    this.eventTarget.addEventListener(this.eventName, this, this.eventOptions);
  }
  disconnect() {
    this.eventTarget.removeEventListener(this.eventName, this, this.eventOptions);
  }
  bindingConnected(binding) {
    this.unorderedBindings.add(binding);
  }
  bindingDisconnected(binding) {
    this.unorderedBindings.delete(binding);
  }
  handleEvent(event2) {
    const extendedEvent = extendEvent(event2);
    for (const binding of this.bindings) {
      if (extendedEvent.immediatePropagationStopped) {
        break;
      } else {
        binding.handleEvent(extendedEvent);
      }
    }
  }
  hasBindings() {
    return this.unorderedBindings.size > 0;
  }
  get bindings() {
    return Array.from(this.unorderedBindings).sort((left, right) => {
      const leftIndex = left.index, rightIndex = right.index;
      return leftIndex < rightIndex ? -1 : leftIndex > rightIndex ? 1 : 0;
    });
  }
};
function extendEvent(event2) {
  if ("immediatePropagationStopped" in event2) {
    return event2;
  } else {
    const { stopImmediatePropagation } = event2;
    return Object.assign(event2, {
      immediatePropagationStopped: false,
      stopImmediatePropagation() {
        this.immediatePropagationStopped = true;
        stopImmediatePropagation.call(this);
      }
    });
  }
}
var Dispatcher = class {
  constructor(application2) {
    this.application = application2;
    this.eventListenerMaps = /* @__PURE__ */ new Map();
    this.started = false;
  }
  start() {
    if (!this.started) {
      this.started = true;
      this.eventListeners.forEach((eventListener) => eventListener.connect());
    }
  }
  stop() {
    if (this.started) {
      this.started = false;
      this.eventListeners.forEach((eventListener) => eventListener.disconnect());
    }
  }
  get eventListeners() {
    return Array.from(this.eventListenerMaps.values()).reduce((listeners, map) => listeners.concat(Array.from(map.values())), []);
  }
  bindingConnected(binding) {
    this.fetchEventListenerForBinding(binding).bindingConnected(binding);
  }
  bindingDisconnected(binding, clearEventListeners = false) {
    this.fetchEventListenerForBinding(binding).bindingDisconnected(binding);
    if (clearEventListeners)
      this.clearEventListenersForBinding(binding);
  }
  handleError(error3, message, detail = {}) {
    this.application.handleError(error3, `Error ${message}`, detail);
  }
  clearEventListenersForBinding(binding) {
    const eventListener = this.fetchEventListenerForBinding(binding);
    if (!eventListener.hasBindings()) {
      eventListener.disconnect();
      this.removeMappedEventListenerFor(binding);
    }
  }
  removeMappedEventListenerFor(binding) {
    const { eventTarget, eventName, eventOptions } = binding;
    const eventListenerMap = this.fetchEventListenerMapForEventTarget(eventTarget);
    const cacheKey = this.cacheKey(eventName, eventOptions);
    eventListenerMap.delete(cacheKey);
    if (eventListenerMap.size == 0)
      this.eventListenerMaps.delete(eventTarget);
  }
  fetchEventListenerForBinding(binding) {
    const { eventTarget, eventName, eventOptions } = binding;
    return this.fetchEventListener(eventTarget, eventName, eventOptions);
  }
  fetchEventListener(eventTarget, eventName, eventOptions) {
    const eventListenerMap = this.fetchEventListenerMapForEventTarget(eventTarget);
    const cacheKey = this.cacheKey(eventName, eventOptions);
    let eventListener = eventListenerMap.get(cacheKey);
    if (!eventListener) {
      eventListener = this.createEventListener(eventTarget, eventName, eventOptions);
      eventListenerMap.set(cacheKey, eventListener);
    }
    return eventListener;
  }
  createEventListener(eventTarget, eventName, eventOptions) {
    const eventListener = new EventListener(eventTarget, eventName, eventOptions);
    if (this.started) {
      eventListener.connect();
    }
    return eventListener;
  }
  fetchEventListenerMapForEventTarget(eventTarget) {
    let eventListenerMap = this.eventListenerMaps.get(eventTarget);
    if (!eventListenerMap) {
      eventListenerMap = /* @__PURE__ */ new Map();
      this.eventListenerMaps.set(eventTarget, eventListenerMap);
    }
    return eventListenerMap;
  }
  cacheKey(eventName, eventOptions) {
    const parts = [eventName];
    Object.keys(eventOptions).sort().forEach((key) => {
      parts.push(`${eventOptions[key] ? "" : "!"}${key}`);
    });
    return parts.join(":");
  }
};
var defaultActionDescriptorFilters = {
  stop({ event: event2, value }) {
    if (value)
      event2.stopPropagation();
    return true;
  },
  prevent({ event: event2, value }) {
    if (value)
      event2.preventDefault();
    return true;
  },
  self({ event: event2, value, element }) {
    if (value) {
      return element === event2.target;
    } else {
      return true;
    }
  }
};
var descriptorPattern = /^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;
function parseActionDescriptorString(descriptorString) {
  const source = descriptorString.trim();
  const matches = source.match(descriptorPattern) || [];
  let eventName = matches[2];
  let keyFilter = matches[3];
  if (keyFilter && !["keydown", "keyup", "keypress"].includes(eventName)) {
    eventName += `.${keyFilter}`;
    keyFilter = "";
  }
  return {
    eventTarget: parseEventTarget(matches[4]),
    eventName,
    eventOptions: matches[7] ? parseEventOptions(matches[7]) : {},
    identifier: matches[5],
    methodName: matches[6],
    keyFilter: matches[1] || keyFilter
  };
}
function parseEventTarget(eventTargetName) {
  if (eventTargetName == "window") {
    return window;
  } else if (eventTargetName == "document") {
    return document;
  }
}
function parseEventOptions(eventOptions) {
  return eventOptions.split(":").reduce((options, token) => Object.assign(options, { [token.replace(/^!/, "")]: !/^!/.test(token) }), {});
}
function stringifyEventTarget(eventTarget) {
  if (eventTarget == window) {
    return "window";
  } else if (eventTarget == document) {
    return "document";
  }
}
function camelize2(value) {
  return value.replace(/(?:[_-])([a-z0-9])/g, (_, char) => char.toUpperCase());
}
function namespaceCamelize(value) {
  return camelize2(value.replace(/--/g, "-").replace(/__/g, "_"));
}
function capitalize2(value) {
  return value.charAt(0).toUpperCase() + value.slice(1);
}
function dasherize(value) {
  return value.replace(/([A-Z])/g, (_, char) => `-${char.toLowerCase()}`);
}
function tokenize(value) {
  return value.match(/[^\s]+/g) || [];
}
function isSomething(object) {
  return object !== null && object !== void 0;
}
function hasProperty(object, property) {
  return Object.prototype.hasOwnProperty.call(object, property);
}
var allModifiers = ["meta", "ctrl", "alt", "shift"];
var Action = class {
  constructor(element, index, descriptor, schema) {
    this.element = element;
    this.index = index;
    this.eventTarget = descriptor.eventTarget || element;
    this.eventName = descriptor.eventName || getDefaultEventNameForElement(element) || error2("missing event name");
    this.eventOptions = descriptor.eventOptions || {};
    this.identifier = descriptor.identifier || error2("missing identifier");
    this.methodName = descriptor.methodName || error2("missing method name");
    this.keyFilter = descriptor.keyFilter || "";
    this.schema = schema;
  }
  static forToken(token, schema) {
    return new this(token.element, token.index, parseActionDescriptorString(token.content), schema);
  }
  toString() {
    const eventFilter = this.keyFilter ? `.${this.keyFilter}` : "";
    const eventTarget = this.eventTargetName ? `@${this.eventTargetName}` : "";
    return `${this.eventName}${eventFilter}${eventTarget}->${this.identifier}#${this.methodName}`;
  }
  shouldIgnoreKeyboardEvent(event2) {
    if (!this.keyFilter) {
      return false;
    }
    const filters = this.keyFilter.split("+");
    if (this.keyFilterDissatisfied(event2, filters)) {
      return true;
    }
    const standardFilter = filters.filter((key) => !allModifiers.includes(key))[0];
    if (!standardFilter) {
      return false;
    }
    if (!hasProperty(this.keyMappings, standardFilter)) {
      error2(`contains unknown key filter: ${this.keyFilter}`);
    }
    return this.keyMappings[standardFilter].toLowerCase() !== event2.key.toLowerCase();
  }
  shouldIgnoreMouseEvent(event2) {
    if (!this.keyFilter) {
      return false;
    }
    const filters = [this.keyFilter];
    if (this.keyFilterDissatisfied(event2, filters)) {
      return true;
    }
    return false;
  }
  get params() {
    const params = {};
    const pattern = new RegExp(`^data-${this.identifier}-(.+)-param$`, "i");
    for (const { name, value } of Array.from(this.element.attributes)) {
      const match = name.match(pattern);
      const key = match && match[1];
      if (key) {
        params[camelize2(key)] = typecast(value);
      }
    }
    return params;
  }
  get eventTargetName() {
    return stringifyEventTarget(this.eventTarget);
  }
  get keyMappings() {
    return this.schema.keyMappings;
  }
  keyFilterDissatisfied(event2, filters) {
    const [meta, ctrl, alt, shift] = allModifiers.map((modifier) => filters.includes(modifier));
    return event2.metaKey !== meta || event2.ctrlKey !== ctrl || event2.altKey !== alt || event2.shiftKey !== shift;
  }
};
var defaultEventNames = {
  a: () => "click",
  button: () => "click",
  form: () => "submit",
  details: () => "toggle",
  input: (e) => e.getAttribute("type") == "submit" ? "click" : "input",
  select: () => "change",
  textarea: () => "input"
};
function getDefaultEventNameForElement(element) {
  const tagName = element.tagName.toLowerCase();
  if (tagName in defaultEventNames) {
    return defaultEventNames[tagName](element);
  }
}
function error2(message) {
  throw new Error(message);
}
function typecast(value) {
  try {
    return JSON.parse(value);
  } catch (o_O) {
    return value;
  }
}
var Binding = class {
  constructor(context, action) {
    this.context = context;
    this.action = action;
  }
  get index() {
    return this.action.index;
  }
  get eventTarget() {
    return this.action.eventTarget;
  }
  get eventOptions() {
    return this.action.eventOptions;
  }
  get identifier() {
    return this.context.identifier;
  }
  handleEvent(event2) {
    const actionEvent = this.prepareActionEvent(event2);
    if (this.willBeInvokedByEvent(event2) && this.applyEventModifiers(actionEvent)) {
      this.invokeWithEvent(actionEvent);
    }
  }
  get eventName() {
    return this.action.eventName;
  }
  get method() {
    const method = this.controller[this.methodName];
    if (typeof method == "function") {
      return method;
    }
    throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`);
  }
  applyEventModifiers(event2) {
    const { element } = this.action;
    const { actionDescriptorFilters } = this.context.application;
    const { controller } = this.context;
    let passes = true;
    for (const [name, value] of Object.entries(this.eventOptions)) {
      if (name in actionDescriptorFilters) {
        const filter = actionDescriptorFilters[name];
        passes = passes && filter({ name, value, event: event2, element, controller });
      } else {
        continue;
      }
    }
    return passes;
  }
  prepareActionEvent(event2) {
    return Object.assign(event2, { params: this.action.params });
  }
  invokeWithEvent(event2) {
    const { target, currentTarget } = event2;
    try {
      this.method.call(this.controller, event2);
      this.context.logDebugActivity(this.methodName, { event: event2, target, currentTarget, action: this.methodName });
    } catch (error3) {
      const { identifier, controller, element, index } = this;
      const detail = { identifier, controller, element, index, event: event2 };
      this.context.handleError(error3, `invoking action "${this.action}"`, detail);
    }
  }
  willBeInvokedByEvent(event2) {
    const eventTarget = event2.target;
    if (event2 instanceof KeyboardEvent && this.action.shouldIgnoreKeyboardEvent(event2)) {
      return false;
    }
    if (event2 instanceof MouseEvent && this.action.shouldIgnoreMouseEvent(event2)) {
      return false;
    }
    if (this.element === eventTarget) {
      return true;
    } else if (eventTarget instanceof Element && this.element.contains(eventTarget)) {
      return this.scope.containsElement(eventTarget);
    } else {
      return this.scope.containsElement(this.action.element);
    }
  }
  get controller() {
    return this.context.controller;
  }
  get methodName() {
    return this.action.methodName;
  }
  get element() {
    return this.scope.element;
  }
  get scope() {
    return this.context.scope;
  }
};
var ElementObserver = class {
  constructor(element, delegate) {
    this.mutationObserverInit = { attributes: true, childList: true, subtree: true };
    this.element = element;
    this.started = false;
    this.delegate = delegate;
    this.elements = /* @__PURE__ */ new Set();
    this.mutationObserver = new MutationObserver((mutations) => this.processMutations(mutations));
  }
  start() {
    if (!this.started) {
      this.started = true;
      this.mutationObserver.observe(this.element, this.mutationObserverInit);
      this.refresh();
    }
  }
  pause(callback) {
    if (this.started) {
      this.mutationObserver.disconnect();
      this.started = false;
    }
    callback();
    if (!this.started) {
      this.mutationObserver.observe(this.element, this.mutationObserverInit);
      this.started = true;
    }
  }
  stop() {
    if (this.started) {
      this.mutationObserver.takeRecords();
      this.mutationObserver.disconnect();
      this.started = false;
    }
  }
  refresh() {
    if (this.started) {
      const matches = new Set(this.matchElementsInTree());
      for (const element of Array.from(this.elements)) {
        if (!matches.has(element)) {
          this.removeElement(element);
        }
      }
      for (const element of Array.from(matches)) {
        this.addElement(element);
      }
    }
  }
  processMutations(mutations) {
    if (this.started) {
      for (const mutation of mutations) {
        this.processMutation(mutation);
      }
    }
  }
  processMutation(mutation) {
    if (mutation.type == "attributes") {
      this.processAttributeChange(mutation.target, mutation.attributeName);
    } else if (mutation.type == "childList") {
      this.processRemovedNodes(mutation.removedNodes);
      this.processAddedNodes(mutation.addedNodes);
    }
  }
  processAttributeChange(element, attributeName) {
    if (this.elements.has(element)) {
      if (this.delegate.elementAttributeChanged && this.matchElement(element)) {
        this.delegate.elementAttributeChanged(element, attributeName);
      } else {
        this.removeElement(element);
      }
    } else if (this.matchElement(element)) {
      this.addElement(element);
    }
  }
  processRemovedNodes(nodes) {
    for (const node of Array.from(nodes)) {
      const element = this.elementFromNode(node);
      if (element) {
        this.processTree(element, this.removeElement);
      }
    }
  }
  processAddedNodes(nodes) {
    for (const node of Array.from(nodes)) {
      const element = this.elementFromNode(node);
      if (element && this.elementIsActive(element)) {
        this.processTree(element, this.addElement);
      }
    }
  }
  matchElement(element) {
    return this.delegate.matchElement(element);
  }
  matchElementsInTree(tree = this.element) {
    return this.delegate.matchElementsInTree(tree);
  }
  processTree(tree, processor) {
    for (const element of this.matchElementsInTree(tree)) {
      processor.call(this, element);
    }
  }
  elementFromNode(node) {
    if (node.nodeType == Node.ELEMENT_NODE) {
      return node;
    }
  }
  elementIsActive(element) {
    if (element.isConnected != this.element.isConnected) {
      return false;
    } else {
      return this.element.contains(element);
    }
  }
  addElement(element) {
    if (!this.elements.has(element)) {
      if (this.elementIsActive(element)) {
        this.elements.add(element);
        if (this.delegate.elementMatched) {
          this.delegate.elementMatched(element);
        }
      }
    }
  }
  removeElement(element) {
    if (this.elements.has(element)) {
      this.elements.delete(element);
      if (this.delegate.elementUnmatched) {
        this.delegate.elementUnmatched(element);
      }
    }
  }
};
var AttributeObserver = class {
  constructor(element, attributeName, delegate) {
    this.attributeName = attributeName;
    this.delegate = delegate;
    this.elementObserver = new ElementObserver(element, this);
  }
  get element() {
    return this.elementObserver.element;
  }
  get selector() {
    return `[${this.attributeName}]`;
  }
  start() {
    this.elementObserver.start();
  }
  pause(callback) {
    this.elementObserver.pause(callback);
  }
  stop() {
    this.elementObserver.stop();
  }
  refresh() {
    this.elementObserver.refresh();
  }
  get started() {
    return this.elementObserver.started;
  }
  matchElement(element) {
    return element.hasAttribute(this.attributeName);
  }
  matchElementsInTree(tree) {
    const match = this.matchElement(tree) ? [tree] : [];
    const matches = Array.from(tree.querySelectorAll(this.selector));
    return match.concat(matches);
  }
  elementMatched(element) {
    if (this.delegate.elementMatchedAttribute) {
      this.delegate.elementMatchedAttribute(element, this.attributeName);
    }
  }
  elementUnmatched(element) {
    if (this.delegate.elementUnmatchedAttribute) {
      this.delegate.elementUnmatchedAttribute(element, this.attributeName);
    }
  }
  elementAttributeChanged(element, attributeName) {
    if (this.delegate.elementAttributeValueChanged && this.attributeName == attributeName) {
      this.delegate.elementAttributeValueChanged(element, attributeName);
    }
  }
};
function add2(map, key, value) {
  fetch2(map, key).add(value);
}
function del(map, key, value) {
  fetch2(map, key).delete(value);
  prune(map, key);
}
function fetch2(map, key) {
  let values = map.get(key);
  if (!values) {
    values = /* @__PURE__ */ new Set();
    map.set(key, values);
  }
  return values;
}
function prune(map, key) {
  const values = map.get(key);
  if (values != null && values.size == 0) {
    map.delete(key);
  }
}
var Multimap = class {
  constructor() {
    this.valuesByKey = /* @__PURE__ */ new Map();
  }
  get keys() {
    return Array.from(this.valuesByKey.keys());
  }
  get values() {
    const sets = Array.from(this.valuesByKey.values());
    return sets.reduce((values, set3) => values.concat(Array.from(set3)), []);
  }
  get size() {
    const sets = Array.from(this.valuesByKey.values());
    return sets.reduce((size2, set3) => size2 + set3.size, 0);
  }
  add(key, value) {
    add2(this.valuesByKey, key, value);
  }
  delete(key, value) {
    del(this.valuesByKey, key, value);
  }
  has(key, value) {
    const values = this.valuesByKey.get(key);
    return values != null && values.has(value);
  }
  hasKey(key) {
    return this.valuesByKey.has(key);
  }
  hasValue(value) {
    const sets = Array.from(this.valuesByKey.values());
    return sets.some((set3) => set3.has(value));
  }
  getValuesForKey(key) {
    const values = this.valuesByKey.get(key);
    return values ? Array.from(values) : [];
  }
  getKeysForValue(value) {
    return Array.from(this.valuesByKey).filter(([_key, values]) => values.has(value)).map(([key, _values]) => key);
  }
};
var SelectorObserver = class {
  constructor(element, selector, delegate, details) {
    this._selector = selector;
    this.details = details;
    this.elementObserver = new ElementObserver(element, this);
    this.delegate = delegate;
    this.matchesByElement = new Multimap();
  }
  get started() {
    return this.elementObserver.started;
  }
  get selector() {
    return this._selector;
  }
  set selector(selector) {
    this._selector = selector;
    this.refresh();
  }
  start() {
    this.elementObserver.start();
  }
  pause(callback) {
    this.elementObserver.pause(callback);
  }
  stop() {
    this.elementObserver.stop();
  }
  refresh() {
    this.elementObserver.refresh();
  }
  get element() {
    return this.elementObserver.element;
  }
  matchElement(element) {
    const { selector } = this;
    if (selector) {
      const matches = element.matches(selector);
      if (this.delegate.selectorMatchElement) {
        return matches && this.delegate.selectorMatchElement(element, this.details);
      }
      return matches;
    } else {
      return false;
    }
  }
  matchElementsInTree(tree) {
    const { selector } = this;
    if (selector) {
      const match = this.matchElement(tree) ? [tree] : [];
      const matches = Array.from(tree.querySelectorAll(selector)).filter((match2) => this.matchElement(match2));
      return match.concat(matches);
    } else {
      return [];
    }
  }
  elementMatched(element) {
    const { selector } = this;
    if (selector) {
      this.selectorMatched(element, selector);
    }
  }
  elementUnmatched(element) {
    const selectors = this.matchesByElement.getKeysForValue(element);
    for (const selector of selectors) {
      this.selectorUnmatched(element, selector);
    }
  }
  elementAttributeChanged(element, _attributeName) {
    const { selector } = this;
    if (selector) {
      const matches = this.matchElement(element);
      const matchedBefore = this.matchesByElement.has(selector, element);
      if (matches && !matchedBefore) {
        this.selectorMatched(element, selector);
      } else if (!matches && matchedBefore) {
        this.selectorUnmatched(element, selector);
      }
    }
  }
  selectorMatched(element, selector) {
    this.delegate.selectorMatched(element, selector, this.details);
    this.matchesByElement.add(selector, element);
  }
  selectorUnmatched(element, selector) {
    this.delegate.selectorUnmatched(element, selector, this.details);
    this.matchesByElement.delete(selector, element);
  }
};
var StringMapObserver = class {
  constructor(element, delegate) {
    this.element = element;
    this.delegate = delegate;
    this.started = false;
    this.stringMap = /* @__PURE__ */ new Map();
    this.mutationObserver = new MutationObserver((mutations) => this.processMutations(mutations));
  }
  start() {
    if (!this.started) {
      this.started = true;
      this.mutationObserver.observe(this.element, { attributes: true, attributeOldValue: true });
      this.refresh();
    }
  }
  stop() {
    if (this.started) {
      this.mutationObserver.takeRecords();
      this.mutationObserver.disconnect();
      this.started = false;
    }
  }
  refresh() {
    if (this.started) {
      for (const attributeName of this.knownAttributeNames) {
        this.refreshAttribute(attributeName, null);
      }
    }
  }
  processMutations(mutations) {
    if (this.started) {
      for (const mutation of mutations) {
        this.processMutation(mutation);
      }
    }
  }
  processMutation(mutation) {
    const attributeName = mutation.attributeName;
    if (attributeName) {
      this.refreshAttribute(attributeName, mutation.oldValue);
    }
  }
  refreshAttribute(attributeName, oldValue) {
    const key = this.delegate.getStringMapKeyForAttribute(attributeName);
    if (key != null) {
      if (!this.stringMap.has(attributeName)) {
        this.stringMapKeyAdded(key, attributeName);
      }
      const value = this.element.getAttribute(attributeName);
      if (this.stringMap.get(attributeName) != value) {
        this.stringMapValueChanged(value, key, oldValue);
      }
      if (value == null) {
        const oldValue2 = this.stringMap.get(attributeName);
        this.stringMap.delete(attributeName);
        if (oldValue2)
          this.stringMapKeyRemoved(key, attributeName, oldValue2);
      } else {
        this.stringMap.set(attributeName, value);
      }
    }
  }
  stringMapKeyAdded(key, attributeName) {
    if (this.delegate.stringMapKeyAdded) {
      this.delegate.stringMapKeyAdded(key, attributeName);
    }
  }
  stringMapValueChanged(value, key, oldValue) {
    if (this.delegate.stringMapValueChanged) {
      this.delegate.stringMapValueChanged(value, key, oldValue);
    }
  }
  stringMapKeyRemoved(key, attributeName, oldValue) {
    if (this.delegate.stringMapKeyRemoved) {
      this.delegate.stringMapKeyRemoved(key, attributeName, oldValue);
    }
  }
  get knownAttributeNames() {
    return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)));
  }
  get currentAttributeNames() {
    return Array.from(this.element.attributes).map((attribute) => attribute.name);
  }
  get recordedAttributeNames() {
    return Array.from(this.stringMap.keys());
  }
};
var TokenListObserver = class {
  constructor(element, attributeName, delegate) {
    this.attributeObserver = new AttributeObserver(element, attributeName, this);
    this.delegate = delegate;
    this.tokensByElement = new Multimap();
  }
  get started() {
    return this.attributeObserver.started;
  }
  start() {
    this.attributeObserver.start();
  }
  pause(callback) {
    this.attributeObserver.pause(callback);
  }
  stop() {
    this.attributeObserver.stop();
  }
  refresh() {
    this.attributeObserver.refresh();
  }
  get element() {
    return this.attributeObserver.element;
  }
  get attributeName() {
    return this.attributeObserver.attributeName;
  }
  elementMatchedAttribute(element) {
    this.tokensMatched(this.readTokensForElement(element));
  }
  elementAttributeValueChanged(element) {
    const [unmatchedTokens, matchedTokens] = this.refreshTokensForElement(element);
    this.tokensUnmatched(unmatchedTokens);
    this.tokensMatched(matchedTokens);
  }
  elementUnmatchedAttribute(element) {
    this.tokensUnmatched(this.tokensByElement.getValuesForKey(element));
  }
  tokensMatched(tokens) {
    tokens.forEach((token) => this.tokenMatched(token));
  }
  tokensUnmatched(tokens) {
    tokens.forEach((token) => this.tokenUnmatched(token));
  }
  tokenMatched(token) {
    this.delegate.tokenMatched(token);
    this.tokensByElement.add(token.element, token);
  }
  tokenUnmatched(token) {
    this.delegate.tokenUnmatched(token);
    this.tokensByElement.delete(token.element, token);
  }
  refreshTokensForElement(element) {
    const previousTokens = this.tokensByElement.getValuesForKey(element);
    const currentTokens = this.readTokensForElement(element);
    const firstDifferingIndex = zip(previousTokens, currentTokens).findIndex(([previousToken, currentToken]) => !tokensAreEqual(previousToken, currentToken));
    if (firstDifferingIndex == -1) {
      return [[], []];
    } else {
      return [previousTokens.slice(firstDifferingIndex), currentTokens.slice(firstDifferingIndex)];
    }
  }
  readTokensForElement(element) {
    const attributeName = this.attributeName;
    const tokenString = element.getAttribute(attributeName) || "";
    return parseTokenString(tokenString, element, attributeName);
  }
};
function parseTokenString(tokenString, element, attributeName) {
  return tokenString.trim().split(/\s+/).filter((content) => content.length).map((content, index) => ({ element, attributeName, content, index }));
}
function zip(left, right) {
  const length = Math.max(left.length, right.length);
  return Array.from({ length }, (_, index) => [left[index], right[index]]);
}
function tokensAreEqual(left, right) {
  return left && right && left.index == right.index && left.content == right.content;
}
var ValueListObserver = class {
  constructor(element, attributeName, delegate) {
    this.tokenListObserver = new TokenListObserver(element, attributeName, this);
    this.delegate = delegate;
    this.parseResultsByToken = /* @__PURE__ */ new WeakMap();
    this.valuesByTokenByElement = /* @__PURE__ */ new WeakMap();
  }
  get started() {
    return this.tokenListObserver.started;
  }
  start() {
    this.tokenListObserver.start();
  }
  stop() {
    this.tokenListObserver.stop();
  }
  refresh() {
    this.tokenListObserver.refresh();
  }
  get element() {
    return this.tokenListObserver.element;
  }
  get attributeName() {
    return this.tokenListObserver.attributeName;
  }
  tokenMatched(token) {
    const { element } = token;
    const { value } = this.fetchParseResultForToken(token);
    if (value) {
      this.fetchValuesByTokenForElement(element).set(token, value);
      this.delegate.elementMatchedValue(element, value);
    }
  }
  tokenUnmatched(token) {
    const { element } = token;
    const { value } = this.fetchParseResultForToken(token);
    if (value) {
      this.fetchValuesByTokenForElement(element).delete(token);
      this.delegate.elementUnmatchedValue(element, value);
    }
  }
  fetchParseResultForToken(token) {
    let parseResult = this.parseResultsByToken.get(token);
    if (!parseResult) {
      parseResult = this.parseToken(token);
      this.parseResultsByToken.set(token, parseResult);
    }
    return parseResult;
  }
  fetchValuesByTokenForElement(element) {
    let valuesByToken = this.valuesByTokenByElement.get(element);
    if (!valuesByToken) {
      valuesByToken = /* @__PURE__ */ new Map();
      this.valuesByTokenByElement.set(element, valuesByToken);
    }
    return valuesByToken;
  }
  parseToken(token) {
    try {
      const value = this.delegate.parseValueForToken(token);
      return { value };
    } catch (error3) {
      return { error: error3 };
    }
  }
};
var BindingObserver = class {
  constructor(context, delegate) {
    this.context = context;
    this.delegate = delegate;
    this.bindingsByAction = /* @__PURE__ */ new Map();
  }
  start() {
    if (!this.valueListObserver) {
      this.valueListObserver = new ValueListObserver(this.element, this.actionAttribute, this);
      this.valueListObserver.start();
    }
  }
  stop() {
    if (this.valueListObserver) {
      this.valueListObserver.stop();
      delete this.valueListObserver;
      this.disconnectAllActions();
    }
  }
  get element() {
    return this.context.element;
  }
  get identifier() {
    return this.context.identifier;
  }
  get actionAttribute() {
    return this.schema.actionAttribute;
  }
  get schema() {
    return this.context.schema;
  }
  get bindings() {
    return Array.from(this.bindingsByAction.values());
  }
  connectAction(action) {
    const binding = new Binding(this.context, action);
    this.bindingsByAction.set(action, binding);
    this.delegate.bindingConnected(binding);
  }
  disconnectAction(action) {
    const binding = this.bindingsByAction.get(action);
    if (binding) {
      this.bindingsByAction.delete(action);
      this.delegate.bindingDisconnected(binding);
    }
  }
  disconnectAllActions() {
    this.bindings.forEach((binding) => this.delegate.bindingDisconnected(binding, true));
    this.bindingsByAction.clear();
  }
  parseValueForToken(token) {
    const action = Action.forToken(token, this.schema);
    if (action.identifier == this.identifier) {
      return action;
    }
  }
  elementMatchedValue(element, action) {
    this.connectAction(action);
  }
  elementUnmatchedValue(element, action) {
    this.disconnectAction(action);
  }
};
var ValueObserver = class {
  constructor(context, receiver) {
    this.context = context;
    this.receiver = receiver;
    this.stringMapObserver = new StringMapObserver(this.element, this);
    this.valueDescriptorMap = this.controller.valueDescriptorMap;
  }
  start() {
    this.stringMapObserver.start();
    this.invokeChangedCallbacksForDefaultValues();
  }
  stop() {
    this.stringMapObserver.stop();
  }
  get element() {
    return this.context.element;
  }
  get controller() {
    return this.context.controller;
  }
  getStringMapKeyForAttribute(attributeName) {
    if (attributeName in this.valueDescriptorMap) {
      return this.valueDescriptorMap[attributeName].name;
    }
  }
  stringMapKeyAdded(key, attributeName) {
    const descriptor = this.valueDescriptorMap[attributeName];
    if (!this.hasValue(key)) {
      this.invokeChangedCallback(key, descriptor.writer(this.receiver[key]), descriptor.writer(descriptor.defaultValue));
    }
  }
  stringMapValueChanged(value, name, oldValue) {
    const descriptor = this.valueDescriptorNameMap[name];
    if (value === null)
      return;
    if (oldValue === null) {
      oldValue = descriptor.writer(descriptor.defaultValue);
    }
    this.invokeChangedCallback(name, value, oldValue);
  }
  stringMapKeyRemoved(key, attributeName, oldValue) {
    const descriptor = this.valueDescriptorNameMap[key];
    if (this.hasValue(key)) {
      this.invokeChangedCallback(key, descriptor.writer(this.receiver[key]), oldValue);
    } else {
      this.invokeChangedCallback(key, descriptor.writer(descriptor.defaultValue), oldValue);
    }
  }
  invokeChangedCallbacksForDefaultValues() {
    for (const { key, name, defaultValue, writer } of this.valueDescriptors) {
      if (defaultValue != void 0 && !this.controller.data.has(key)) {
        this.invokeChangedCallback(name, writer(defaultValue), void 0);
      }
    }
  }
  invokeChangedCallback(name, rawValue, rawOldValue) {
    const changedMethodName = `${name}Changed`;
    const changedMethod = this.receiver[changedMethodName];
    if (typeof changedMethod == "function") {
      const descriptor = this.valueDescriptorNameMap[name];
      try {
        const value = descriptor.reader(rawValue);
        let oldValue = rawOldValue;
        if (rawOldValue) {
          oldValue = descriptor.reader(rawOldValue);
        }
        changedMethod.call(this.receiver, value, oldValue);
      } catch (error3) {
        if (error3 instanceof TypeError) {
          error3.message = `Stimulus Value "${this.context.identifier}.${descriptor.name}" - ${error3.message}`;
        }
        throw error3;
      }
    }
  }
  get valueDescriptors() {
    const { valueDescriptorMap } = this;
    return Object.keys(valueDescriptorMap).map((key) => valueDescriptorMap[key]);
  }
  get valueDescriptorNameMap() {
    const descriptors = {};
    Object.keys(this.valueDescriptorMap).forEach((key) => {
      const descriptor = this.valueDescriptorMap[key];
      descriptors[descriptor.name] = descriptor;
    });
    return descriptors;
  }
  hasValue(attributeName) {
    const descriptor = this.valueDescriptorNameMap[attributeName];
    const hasMethodName = `has${capitalize2(descriptor.name)}`;
    return this.receiver[hasMethodName];
  }
};
var TargetObserver = class {
  constructor(context, delegate) {
    this.context = context;
    this.delegate = delegate;
    this.targetsByName = new Multimap();
  }
  start() {
    if (!this.tokenListObserver) {
      this.tokenListObserver = new TokenListObserver(this.element, this.attributeName, this);
      this.tokenListObserver.start();
    }
  }
  stop() {
    if (this.tokenListObserver) {
      this.disconnectAllTargets();
      this.tokenListObserver.stop();
      delete this.tokenListObserver;
    }
  }
  tokenMatched({ element, content: name }) {
    if (this.scope.containsElement(element)) {
      this.connectTarget(element, name);
    }
  }
  tokenUnmatched({ element, content: name }) {
    this.disconnectTarget(element, name);
  }
  connectTarget(element, name) {
    var _a;
    if (!this.targetsByName.has(name, element)) {
      this.targetsByName.add(name, element);
      (_a = this.tokenListObserver) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.targetConnected(element, name));
    }
  }
  disconnectTarget(element, name) {
    var _a;
    if (this.targetsByName.has(name, element)) {
      this.targetsByName.delete(name, element);
      (_a = this.tokenListObserver) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.targetDisconnected(element, name));
    }
  }
  disconnectAllTargets() {
    for (const name of this.targetsByName.keys) {
      for (const element of this.targetsByName.getValuesForKey(name)) {
        this.disconnectTarget(element, name);
      }
    }
  }
  get attributeName() {
    return `data-${this.context.identifier}-target`;
  }
  get element() {
    return this.context.element;
  }
  get scope() {
    return this.context.scope;
  }
};
function readInheritableStaticArrayValues(constructor, propertyName) {
  const ancestors = getAncestorsForConstructor(constructor);
  return Array.from(ancestors.reduce((values, constructor2) => {
    getOwnStaticArrayValues(constructor2, propertyName).forEach((name) => values.add(name));
    return values;
  }, /* @__PURE__ */ new Set()));
}
function readInheritableStaticObjectPairs(constructor, propertyName) {
  const ancestors = getAncestorsForConstructor(constructor);
  return ancestors.reduce((pairs, constructor2) => {
    pairs.push(...getOwnStaticObjectPairs(constructor2, propertyName));
    return pairs;
  }, []);
}
function getAncestorsForConstructor(constructor) {
  const ancestors = [];
  while (constructor) {
    ancestors.push(constructor);
    constructor = Object.getPrototypeOf(constructor);
  }
  return ancestors.reverse();
}
function getOwnStaticArrayValues(constructor, propertyName) {
  const definition = constructor[propertyName];
  return Array.isArray(definition) ? definition : [];
}
function getOwnStaticObjectPairs(constructor, propertyName) {
  const definition = constructor[propertyName];
  return definition ? Object.keys(definition).map((key) => [key, definition[key]]) : [];
}
var OutletObserver = class {
  constructor(context, delegate) {
    this.started = false;
    this.context = context;
    this.delegate = delegate;
    this.outletsByName = new Multimap();
    this.outletElementsByName = new Multimap();
    this.selectorObserverMap = /* @__PURE__ */ new Map();
    this.attributeObserverMap = /* @__PURE__ */ new Map();
  }
  start() {
    if (!this.started) {
      this.outletDefinitions.forEach((outletName) => {
        this.setupSelectorObserverForOutlet(outletName);
        this.setupAttributeObserverForOutlet(outletName);
      });
      this.started = true;
      this.dependentContexts.forEach((context) => context.refresh());
    }
  }
  refresh() {
    this.selectorObserverMap.forEach((observer2) => observer2.refresh());
    this.attributeObserverMap.forEach((observer2) => observer2.refresh());
  }
  stop() {
    if (this.started) {
      this.started = false;
      this.disconnectAllOutlets();
      this.stopSelectorObservers();
      this.stopAttributeObservers();
    }
  }
  stopSelectorObservers() {
    if (this.selectorObserverMap.size > 0) {
      this.selectorObserverMap.forEach((observer2) => observer2.stop());
      this.selectorObserverMap.clear();
    }
  }
  stopAttributeObservers() {
    if (this.attributeObserverMap.size > 0) {
      this.attributeObserverMap.forEach((observer2) => observer2.stop());
      this.attributeObserverMap.clear();
    }
  }
  selectorMatched(element, _selector, { outletName }) {
    const outlet = this.getOutlet(element, outletName);
    if (outlet) {
      this.connectOutlet(outlet, element, outletName);
    }
  }
  selectorUnmatched(element, _selector, { outletName }) {
    const outlet = this.getOutletFromMap(element, outletName);
    if (outlet) {
      this.disconnectOutlet(outlet, element, outletName);
    }
  }
  selectorMatchElement(element, { outletName }) {
    const selector = this.selector(outletName);
    const hasOutlet = this.hasOutlet(element, outletName);
    const hasOutletController = element.matches(`[${this.schema.controllerAttribute}~=${outletName}]`);
    if (selector) {
      return hasOutlet && hasOutletController && element.matches(selector);
    } else {
      return false;
    }
  }
  elementMatchedAttribute(_element, attributeName) {
    const outletName = this.getOutletNameFromOutletAttributeName(attributeName);
    if (outletName) {
      this.updateSelectorObserverForOutlet(outletName);
    }
  }
  elementAttributeValueChanged(_element, attributeName) {
    const outletName = this.getOutletNameFromOutletAttributeName(attributeName);
    if (outletName) {
      this.updateSelectorObserverForOutlet(outletName);
    }
  }
  elementUnmatchedAttribute(_element, attributeName) {
    const outletName = this.getOutletNameFromOutletAttributeName(attributeName);
    if (outletName) {
      this.updateSelectorObserverForOutlet(outletName);
    }
  }
  connectOutlet(outlet, element, outletName) {
    var _a;
    if (!this.outletElementsByName.has(outletName, element)) {
      this.outletsByName.add(outletName, outlet);
      this.outletElementsByName.add(outletName, element);
      (_a = this.selectorObserverMap.get(outletName)) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.outletConnected(outlet, element, outletName));
    }
  }
  disconnectOutlet(outlet, element, outletName) {
    var _a;
    if (this.outletElementsByName.has(outletName, element)) {
      this.outletsByName.delete(outletName, outlet);
      this.outletElementsByName.delete(outletName, element);
      (_a = this.selectorObserverMap.get(outletName)) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.outletDisconnected(outlet, element, outletName));
    }
  }
  disconnectAllOutlets() {
    for (const outletName of this.outletElementsByName.keys) {
      for (const element of this.outletElementsByName.getValuesForKey(outletName)) {
        for (const outlet of this.outletsByName.getValuesForKey(outletName)) {
          this.disconnectOutlet(outlet, element, outletName);
        }
      }
    }
  }
  updateSelectorObserverForOutlet(outletName) {
    const observer2 = this.selectorObserverMap.get(outletName);
    if (observer2) {
      observer2.selector = this.selector(outletName);
    }
  }
  setupSelectorObserverForOutlet(outletName) {
    const selector = this.selector(outletName);
    const selectorObserver = new SelectorObserver(document.body, selector, this, { outletName });
    this.selectorObserverMap.set(outletName, selectorObserver);
    selectorObserver.start();
  }
  setupAttributeObserverForOutlet(outletName) {
    const attributeName = this.attributeNameForOutletName(outletName);
    const attributeObserver = new AttributeObserver(this.scope.element, attributeName, this);
    this.attributeObserverMap.set(outletName, attributeObserver);
    attributeObserver.start();
  }
  selector(outletName) {
    return this.scope.outlets.getSelectorForOutletName(outletName);
  }
  attributeNameForOutletName(outletName) {
    return this.scope.schema.outletAttributeForScope(this.identifier, outletName);
  }
  getOutletNameFromOutletAttributeName(attributeName) {
    return this.outletDefinitions.find((outletName) => this.attributeNameForOutletName(outletName) === attributeName);
  }
  get outletDependencies() {
    const dependencies = new Multimap();
    this.router.modules.forEach((module) => {
      const constructor = module.definition.controllerConstructor;
      const outlets = readInheritableStaticArrayValues(constructor, "outlets");
      outlets.forEach((outlet) => dependencies.add(outlet, module.identifier));
    });
    return dependencies;
  }
  get outletDefinitions() {
    return this.outletDependencies.getKeysForValue(this.identifier);
  }
  get dependentControllerIdentifiers() {
    return this.outletDependencies.getValuesForKey(this.identifier);
  }
  get dependentContexts() {
    const identifiers = this.dependentControllerIdentifiers;
    return this.router.contexts.filter((context) => identifiers.includes(context.identifier));
  }
  hasOutlet(element, outletName) {
    return !!this.getOutlet(element, outletName) || !!this.getOutletFromMap(element, outletName);
  }
  getOutlet(element, outletName) {
    return this.application.getControllerForElementAndIdentifier(element, outletName);
  }
  getOutletFromMap(element, outletName) {
    return this.outletsByName.getValuesForKey(outletName).find((outlet) => outlet.element === element);
  }
  get scope() {
    return this.context.scope;
  }
  get schema() {
    return this.context.schema;
  }
  get identifier() {
    return this.context.identifier;
  }
  get application() {
    return this.context.application;
  }
  get router() {
    return this.application.router;
  }
};
var Context = class {
  constructor(module, scope2) {
    this.logDebugActivity = (functionName, detail = {}) => {
      const { identifier, controller, element } = this;
      detail = Object.assign({ identifier, controller, element }, detail);
      this.application.logDebugActivity(this.identifier, functionName, detail);
    };
    this.module = module;
    this.scope = scope2;
    this.controller = new module.controllerConstructor(this);
    this.bindingObserver = new BindingObserver(this, this.dispatcher);
    this.valueObserver = new ValueObserver(this, this.controller);
    this.targetObserver = new TargetObserver(this, this);
    this.outletObserver = new OutletObserver(this, this);
    try {
      this.controller.initialize();
      this.logDebugActivity("initialize");
    } catch (error3) {
      this.handleError(error3, "initializing controller");
    }
  }
  connect() {
    this.bindingObserver.start();
    this.valueObserver.start();
    this.targetObserver.start();
    this.outletObserver.start();
    try {
      this.controller.connect();
      this.logDebugActivity("connect");
    } catch (error3) {
      this.handleError(error3, "connecting controller");
    }
  }
  refresh() {
    this.outletObserver.refresh();
  }
  disconnect() {
    try {
      this.controller.disconnect();
      this.logDebugActivity("disconnect");
    } catch (error3) {
      this.handleError(error3, "disconnecting controller");
    }
    this.outletObserver.stop();
    this.targetObserver.stop();
    this.valueObserver.stop();
    this.bindingObserver.stop();
  }
  get application() {
    return this.module.application;
  }
  get identifier() {
    return this.module.identifier;
  }
  get schema() {
    return this.application.schema;
  }
  get dispatcher() {
    return this.application.dispatcher;
  }
  get element() {
    return this.scope.element;
  }
  get parentElement() {
    return this.element.parentElement;
  }
  handleError(error3, message, detail = {}) {
    const { identifier, controller, element } = this;
    detail = Object.assign({ identifier, controller, element }, detail);
    this.application.handleError(error3, `Error ${message}`, detail);
  }
  targetConnected(element, name) {
    this.invokeControllerMethod(`${name}TargetConnected`, element);
  }
  targetDisconnected(element, name) {
    this.invokeControllerMethod(`${name}TargetDisconnected`, element);
  }
  outletConnected(outlet, element, name) {
    this.invokeControllerMethod(`${namespaceCamelize(name)}OutletConnected`, outlet, element);
  }
  outletDisconnected(outlet, element, name) {
    this.invokeControllerMethod(`${namespaceCamelize(name)}OutletDisconnected`, outlet, element);
  }
  invokeControllerMethod(methodName, ...args) {
    const controller = this.controller;
    if (typeof controller[methodName] == "function") {
      controller[methodName](...args);
    }
  }
};
function bless(constructor) {
  return shadow(constructor, getBlessedProperties(constructor));
}
function shadow(constructor, properties) {
  const shadowConstructor = extend3(constructor);
  const shadowProperties = getShadowProperties(constructor.prototype, properties);
  Object.defineProperties(shadowConstructor.prototype, shadowProperties);
  return shadowConstructor;
}
function getBlessedProperties(constructor) {
  const blessings = readInheritableStaticArrayValues(constructor, "blessings");
  return blessings.reduce((blessedProperties, blessing) => {
    const properties = blessing(constructor);
    for (const key in properties) {
      const descriptor = blessedProperties[key] || {};
      blessedProperties[key] = Object.assign(descriptor, properties[key]);
    }
    return blessedProperties;
  }, {});
}
function getShadowProperties(prototype, properties) {
  return getOwnKeys(properties).reduce((shadowProperties, key) => {
    const descriptor = getShadowedDescriptor(prototype, properties, key);
    if (descriptor) {
      Object.assign(shadowProperties, { [key]: descriptor });
    }
    return shadowProperties;
  }, {});
}
function getShadowedDescriptor(prototype, properties, key) {
  const shadowingDescriptor = Object.getOwnPropertyDescriptor(prototype, key);
  const shadowedByValue = shadowingDescriptor && "value" in shadowingDescriptor;
  if (!shadowedByValue) {
    const descriptor = Object.getOwnPropertyDescriptor(properties, key).value;
    if (shadowingDescriptor) {
      descriptor.get = shadowingDescriptor.get || descriptor.get;
      descriptor.set = shadowingDescriptor.set || descriptor.set;
    }
    return descriptor;
  }
}
var getOwnKeys = (() => {
  if (typeof Object.getOwnPropertySymbols == "function") {
    return (object) => [...Object.getOwnPropertyNames(object), ...Object.getOwnPropertySymbols(object)];
  } else {
    return Object.getOwnPropertyNames;
  }
})();
var extend3 = (() => {
  function extendWithReflect(constructor) {
    function extended() {
      return Reflect.construct(constructor, arguments, new.target);
    }
    extended.prototype = Object.create(constructor.prototype, {
      constructor: { value: extended }
    });
    Reflect.setPrototypeOf(extended, constructor);
    return extended;
  }
  function testReflectExtension() {
    const a = function() {
      this.a.call(this);
    };
    const b = extendWithReflect(a);
    b.prototype.a = function() {
    };
    return new b();
  }
  try {
    testReflectExtension();
    return extendWithReflect;
  } catch (error3) {
    return (constructor) => class extended extends constructor {
    };
  }
})();
function blessDefinition(definition) {
  return {
    identifier: definition.identifier,
    controllerConstructor: bless(definition.controllerConstructor)
  };
}
var Module = class {
  constructor(application2, definition) {
    this.application = application2;
    this.definition = blessDefinition(definition);
    this.contextsByScope = /* @__PURE__ */ new WeakMap();
    this.connectedContexts = /* @__PURE__ */ new Set();
  }
  get identifier() {
    return this.definition.identifier;
  }
  get controllerConstructor() {
    return this.definition.controllerConstructor;
  }
  get contexts() {
    return Array.from(this.connectedContexts);
  }
  connectContextForScope(scope2) {
    const context = this.fetchContextForScope(scope2);
    this.connectedContexts.add(context);
    context.connect();
  }
  disconnectContextForScope(scope2) {
    const context = this.contextsByScope.get(scope2);
    if (context) {
      this.connectedContexts.delete(context);
      context.disconnect();
    }
  }
  fetchContextForScope(scope2) {
    let context = this.contextsByScope.get(scope2);
    if (!context) {
      context = new Context(this, scope2);
      this.contextsByScope.set(scope2, context);
    }
    return context;
  }
};
var ClassMap = class {
  constructor(scope2) {
    this.scope = scope2;
  }
  has(name) {
    return this.data.has(this.getDataKey(name));
  }
  get(name) {
    return this.getAll(name)[0];
  }
  getAll(name) {
    const tokenString = this.data.get(this.getDataKey(name)) || "";
    return tokenize(tokenString);
  }
  getAttributeName(name) {
    return this.data.getAttributeNameForKey(this.getDataKey(name));
  }
  getDataKey(name) {
    return `${name}-class`;
  }
  get data() {
    return this.scope.data;
  }
};
var DataMap = class {
  constructor(scope2) {
    this.scope = scope2;
  }
  get element() {
    return this.scope.element;
  }
  get identifier() {
    return this.scope.identifier;
  }
  get(key) {
    const name = this.getAttributeNameForKey(key);
    return this.element.getAttribute(name);
  }
  set(key, value) {
    const name = this.getAttributeNameForKey(key);
    this.element.setAttribute(name, value);
    return this.get(key);
  }
  has(key) {
    const name = this.getAttributeNameForKey(key);
    return this.element.hasAttribute(name);
  }
  delete(key) {
    if (this.has(key)) {
      const name = this.getAttributeNameForKey(key);
      this.element.removeAttribute(name);
      return true;
    } else {
      return false;
    }
  }
  getAttributeNameForKey(key) {
    return `data-${this.identifier}-${dasherize(key)}`;
  }
};
var Guide = class {
  constructor(logger2) {
    this.warnedKeysByObject = /* @__PURE__ */ new WeakMap();
    this.logger = logger2;
  }
  warn(object, key, message) {
    let warnedKeys = this.warnedKeysByObject.get(object);
    if (!warnedKeys) {
      warnedKeys = /* @__PURE__ */ new Set();
      this.warnedKeysByObject.set(object, warnedKeys);
    }
    if (!warnedKeys.has(key)) {
      warnedKeys.add(key);
      this.logger.warn(message, object);
    }
  }
};
function attributeValueContainsToken(attributeName, token) {
  return `[${attributeName}~="${token}"]`;
}
var TargetSet = class {
  constructor(scope2) {
    this.scope = scope2;
  }
  get element() {
    return this.scope.element;
  }
  get identifier() {
    return this.scope.identifier;
  }
  get schema() {
    return this.scope.schema;
  }
  has(targetName) {
    return this.find(targetName) != null;
  }
  find(...targetNames) {
    return targetNames.reduce((target, targetName) => target || this.findTarget(targetName) || this.findLegacyTarget(targetName), void 0);
  }
  findAll(...targetNames) {
    return targetNames.reduce((targets, targetName) => [
      ...targets,
      ...this.findAllTargets(targetName),
      ...this.findAllLegacyTargets(targetName)
    ], []);
  }
  findTarget(targetName) {
    const selector = this.getSelectorForTargetName(targetName);
    return this.scope.findElement(selector);
  }
  findAllTargets(targetName) {
    const selector = this.getSelectorForTargetName(targetName);
    return this.scope.findAllElements(selector);
  }
  getSelectorForTargetName(targetName) {
    const attributeName = this.schema.targetAttributeForScope(this.identifier);
    return attributeValueContainsToken(attributeName, targetName);
  }
  findLegacyTarget(targetName) {
    const selector = this.getLegacySelectorForTargetName(targetName);
    return this.deprecate(this.scope.findElement(selector), targetName);
  }
  findAllLegacyTargets(targetName) {
    const selector = this.getLegacySelectorForTargetName(targetName);
    return this.scope.findAllElements(selector).map((element) => this.deprecate(element, targetName));
  }
  getLegacySelectorForTargetName(targetName) {
    const targetDescriptor = `${this.identifier}.${targetName}`;
    return attributeValueContainsToken(this.schema.targetAttribute, targetDescriptor);
  }
  deprecate(element, targetName) {
    if (element) {
      const { identifier } = this;
      const attributeName = this.schema.targetAttribute;
      const revisedAttributeName = this.schema.targetAttributeForScope(identifier);
      this.guide.warn(element, `target:${targetName}`, `Please replace ${attributeName}="${identifier}.${targetName}" with ${revisedAttributeName}="${targetName}". The ${attributeName} attribute is deprecated and will be removed in a future version of Stimulus.`);
    }
    return element;
  }
  get guide() {
    return this.scope.guide;
  }
};
var OutletSet = class {
  constructor(scope2, controllerElement) {
    this.scope = scope2;
    this.controllerElement = controllerElement;
  }
  get element() {
    return this.scope.element;
  }
  get identifier() {
    return this.scope.identifier;
  }
  get schema() {
    return this.scope.schema;
  }
  has(outletName) {
    return this.find(outletName) != null;
  }
  find(...outletNames) {
    return outletNames.reduce((outlet, outletName) => outlet || this.findOutlet(outletName), void 0);
  }
  findAll(...outletNames) {
    return outletNames.reduce((outlets, outletName) => [...outlets, ...this.findAllOutlets(outletName)], []);
  }
  getSelectorForOutletName(outletName) {
    const attributeName = this.schema.outletAttributeForScope(this.identifier, outletName);
    return this.controllerElement.getAttribute(attributeName);
  }
  findOutlet(outletName) {
    const selector = this.getSelectorForOutletName(outletName);
    if (selector)
      return this.findElement(selector, outletName);
  }
  findAllOutlets(outletName) {
    const selector = this.getSelectorForOutletName(outletName);
    return selector ? this.findAllElements(selector, outletName) : [];
  }
  findElement(selector, outletName) {
    const elements = this.scope.queryElements(selector);
    return elements.filter((element) => this.matchesElement(element, selector, outletName))[0];
  }
  findAllElements(selector, outletName) {
    const elements = this.scope.queryElements(selector);
    return elements.filter((element) => this.matchesElement(element, selector, outletName));
  }
  matchesElement(element, selector, outletName) {
    const controllerAttribute = element.getAttribute(this.scope.schema.controllerAttribute) || "";
    return element.matches(selector) && controllerAttribute.split(" ").includes(outletName);
  }
};
var Scope = class _Scope {
  constructor(schema, element, identifier, logger2) {
    this.targets = new TargetSet(this);
    this.classes = new ClassMap(this);
    this.data = new DataMap(this);
    this.containsElement = (element2) => {
      return element2.closest(this.controllerSelector) === this.element;
    };
    this.schema = schema;
    this.element = element;
    this.identifier = identifier;
    this.guide = new Guide(logger2);
    this.outlets = new OutletSet(this.documentScope, element);
  }
  findElement(selector) {
    return this.element.matches(selector) ? this.element : this.queryElements(selector).find(this.containsElement);
  }
  findAllElements(selector) {
    return [
      ...this.element.matches(selector) ? [this.element] : [],
      ...this.queryElements(selector).filter(this.containsElement)
    ];
  }
  queryElements(selector) {
    return Array.from(this.element.querySelectorAll(selector));
  }
  get controllerSelector() {
    return attributeValueContainsToken(this.schema.controllerAttribute, this.identifier);
  }
  get isDocumentScope() {
    return this.element === document.documentElement;
  }
  get documentScope() {
    return this.isDocumentScope ? this : new _Scope(this.schema, document.documentElement, this.identifier, this.guide.logger);
  }
};
var ScopeObserver = class {
  constructor(element, schema, delegate) {
    this.element = element;
    this.schema = schema;
    this.delegate = delegate;
    this.valueListObserver = new ValueListObserver(this.element, this.controllerAttribute, this);
    this.scopesByIdentifierByElement = /* @__PURE__ */ new WeakMap();
    this.scopeReferenceCounts = /* @__PURE__ */ new WeakMap();
  }
  start() {
    this.valueListObserver.start();
  }
  stop() {
    this.valueListObserver.stop();
  }
  get controllerAttribute() {
    return this.schema.controllerAttribute;
  }
  parseValueForToken(token) {
    const { element, content: identifier } = token;
    return this.parseValueForElementAndIdentifier(element, identifier);
  }
  parseValueForElementAndIdentifier(element, identifier) {
    const scopesByIdentifier = this.fetchScopesByIdentifierForElement(element);
    let scope2 = scopesByIdentifier.get(identifier);
    if (!scope2) {
      scope2 = this.delegate.createScopeForElementAndIdentifier(element, identifier);
      scopesByIdentifier.set(identifier, scope2);
    }
    return scope2;
  }
  elementMatchedValue(element, value) {
    const referenceCount = (this.scopeReferenceCounts.get(value) || 0) + 1;
    this.scopeReferenceCounts.set(value, referenceCount);
    if (referenceCount == 1) {
      this.delegate.scopeConnected(value);
    }
  }
  elementUnmatchedValue(element, value) {
    const referenceCount = this.scopeReferenceCounts.get(value);
    if (referenceCount) {
      this.scopeReferenceCounts.set(value, referenceCount - 1);
      if (referenceCount == 1) {
        this.delegate.scopeDisconnected(value);
      }
    }
  }
  fetchScopesByIdentifierForElement(element) {
    let scopesByIdentifier = this.scopesByIdentifierByElement.get(element);
    if (!scopesByIdentifier) {
      scopesByIdentifier = /* @__PURE__ */ new Map();
      this.scopesByIdentifierByElement.set(element, scopesByIdentifier);
    }
    return scopesByIdentifier;
  }
};
var Router = class {
  constructor(application2) {
    this.application = application2;
    this.scopeObserver = new ScopeObserver(this.element, this.schema, this);
    this.scopesByIdentifier = new Multimap();
    this.modulesByIdentifier = /* @__PURE__ */ new Map();
  }
  get element() {
    return this.application.element;
  }
  get schema() {
    return this.application.schema;
  }
  get logger() {
    return this.application.logger;
  }
  get controllerAttribute() {
    return this.schema.controllerAttribute;
  }
  get modules() {
    return Array.from(this.modulesByIdentifier.values());
  }
  get contexts() {
    return this.modules.reduce((contexts, module) => contexts.concat(module.contexts), []);
  }
  start() {
    this.scopeObserver.start();
  }
  stop() {
    this.scopeObserver.stop();
  }
  loadDefinition(definition) {
    this.unloadIdentifier(definition.identifier);
    const module = new Module(this.application, definition);
    this.connectModule(module);
    const afterLoad = definition.controllerConstructor.afterLoad;
    if (afterLoad) {
      afterLoad.call(definition.controllerConstructor, definition.identifier, this.application);
    }
  }
  unloadIdentifier(identifier) {
    const module = this.modulesByIdentifier.get(identifier);
    if (module) {
      this.disconnectModule(module);
    }
  }
  getContextForElementAndIdentifier(element, identifier) {
    const module = this.modulesByIdentifier.get(identifier);
    if (module) {
      return module.contexts.find((context) => context.element == element);
    }
  }
  proposeToConnectScopeForElementAndIdentifier(element, identifier) {
    const scope2 = this.scopeObserver.parseValueForElementAndIdentifier(element, identifier);
    if (scope2) {
      this.scopeObserver.elementMatchedValue(scope2.element, scope2);
    } else {
      console.error(`Couldn't find or create scope for identifier: "${identifier}" and element:`, element);
    }
  }
  handleError(error3, message, detail) {
    this.application.handleError(error3, message, detail);
  }
  createScopeForElementAndIdentifier(element, identifier) {
    return new Scope(this.schema, element, identifier, this.logger);
  }
  scopeConnected(scope2) {
    this.scopesByIdentifier.add(scope2.identifier, scope2);
    const module = this.modulesByIdentifier.get(scope2.identifier);
    if (module) {
      module.connectContextForScope(scope2);
    }
  }
  scopeDisconnected(scope2) {
    this.scopesByIdentifier.delete(scope2.identifier, scope2);
    const module = this.modulesByIdentifier.get(scope2.identifier);
    if (module) {
      module.disconnectContextForScope(scope2);
    }
  }
  connectModule(module) {
    this.modulesByIdentifier.set(module.identifier, module);
    const scopes = this.scopesByIdentifier.getValuesForKey(module.identifier);
    scopes.forEach((scope2) => module.connectContextForScope(scope2));
  }
  disconnectModule(module) {
    this.modulesByIdentifier.delete(module.identifier);
    const scopes = this.scopesByIdentifier.getValuesForKey(module.identifier);
    scopes.forEach((scope2) => module.disconnectContextForScope(scope2));
  }
};
var defaultSchema = {
  controllerAttribute: "data-controller",
  actionAttribute: "data-action",
  targetAttribute: "data-target",
  targetAttributeForScope: (identifier) => `data-${identifier}-target`,
  outletAttributeForScope: (identifier, outlet) => `data-${identifier}-${outlet}-outlet`,
  keyMappings: Object.assign(Object.assign({ enter: "Enter", tab: "Tab", esc: "Escape", space: " ", up: "ArrowUp", down: "ArrowDown", left: "ArrowLeft", right: "ArrowRight", home: "Home", end: "End", page_up: "PageUp", page_down: "PageDown" }, objectFromEntries("abcdefghijklmnopqrstuvwxyz".split("").map((c) => [c, c]))), objectFromEntries("0123456789".split("").map((n) => [n, n])))
};
function objectFromEntries(array) {
  return array.reduce((memo, [k, v]) => Object.assign(Object.assign({}, memo), { [k]: v }), {});
}
var Application = class {
  constructor(element = document.documentElement, schema = defaultSchema) {
    this.logger = console;
    this.debug = false;
    this.logDebugActivity = (identifier, functionName, detail = {}) => {
      if (this.debug) {
        this.logFormattedMessage(identifier, functionName, detail);
      }
    };
    this.element = element;
    this.schema = schema;
    this.dispatcher = new Dispatcher(this);
    this.router = new Router(this);
    this.actionDescriptorFilters = Object.assign({}, defaultActionDescriptorFilters);
  }
  static start(element, schema) {
    const application2 = new this(element, schema);
    application2.start();
    return application2;
  }
  async start() {
    await domReady();
    this.logDebugActivity("application", "starting");
    this.dispatcher.start();
    this.router.start();
    this.logDebugActivity("application", "start");
  }
  stop() {
    this.logDebugActivity("application", "stopping");
    this.dispatcher.stop();
    this.router.stop();
    this.logDebugActivity("application", "stop");
  }
  register(identifier, controllerConstructor) {
    this.load({ identifier, controllerConstructor });
  }
  registerActionOption(name, filter) {
    this.actionDescriptorFilters[name] = filter;
  }
  load(head, ...rest) {
    const definitions = Array.isArray(head) ? head : [head, ...rest];
    definitions.forEach((definition) => {
      if (definition.controllerConstructor.shouldLoad) {
        this.router.loadDefinition(definition);
      }
    });
  }
  unload(head, ...rest) {
    const identifiers = Array.isArray(head) ? head : [head, ...rest];
    identifiers.forEach((identifier) => this.router.unloadIdentifier(identifier));
  }
  get controllers() {
    return this.router.contexts.map((context) => context.controller);
  }
  getControllerForElementAndIdentifier(element, identifier) {
    const context = this.router.getContextForElementAndIdentifier(element, identifier);
    return context ? context.controller : null;
  }
  handleError(error3, message, detail) {
    var _a;
    this.logger.error(`%s

%o

%o`, message, error3, detail);
    (_a = window.onerror) === null || _a === void 0 ? void 0 : _a.call(window, message, "", 0, 0, error3);
  }
  logFormattedMessage(identifier, functionName, detail = {}) {
    detail = Object.assign({ application: this }, detail);
    this.logger.groupCollapsed(`${identifier} #${functionName}`);
    this.logger.log("details:", Object.assign({}, detail));
    this.logger.groupEnd();
  }
};
function domReady() {
  return new Promise((resolve) => {
    if (document.readyState == "loading") {
      document.addEventListener("DOMContentLoaded", () => resolve());
    } else {
      resolve();
    }
  });
}
function ClassPropertiesBlessing(constructor) {
  const classes = readInheritableStaticArrayValues(constructor, "classes");
  return classes.reduce((properties, classDefinition) => {
    return Object.assign(properties, propertiesForClassDefinition(classDefinition));
  }, {});
}
function propertiesForClassDefinition(key) {
  return {
    [`${key}Class`]: {
      get() {
        const { classes } = this;
        if (classes.has(key)) {
          return classes.get(key);
        } else {
          const attribute = classes.getAttributeName(key);
          throw new Error(`Missing attribute "${attribute}"`);
        }
      }
    },
    [`${key}Classes`]: {
      get() {
        return this.classes.getAll(key);
      }
    },
    [`has${capitalize2(key)}Class`]: {
      get() {
        return this.classes.has(key);
      }
    }
  };
}
function OutletPropertiesBlessing(constructor) {
  const outlets = readInheritableStaticArrayValues(constructor, "outlets");
  return outlets.reduce((properties, outletDefinition) => {
    return Object.assign(properties, propertiesForOutletDefinition(outletDefinition));
  }, {});
}
function getOutletController(controller, element, identifier) {
  return controller.application.getControllerForElementAndIdentifier(element, identifier);
}
function getControllerAndEnsureConnectedScope(controller, element, outletName) {
  let outletController = getOutletController(controller, element, outletName);
  if (outletController)
    return outletController;
  controller.application.router.proposeToConnectScopeForElementAndIdentifier(element, outletName);
  outletController = getOutletController(controller, element, outletName);
  if (outletController)
    return outletController;
}
function propertiesForOutletDefinition(name) {
  const camelizedName = namespaceCamelize(name);
  return {
    [`${camelizedName}Outlet`]: {
      get() {
        const outletElement = this.outlets.find(name);
        const selector = this.outlets.getSelectorForOutletName(name);
        if (outletElement) {
          const outletController = getControllerAndEnsureConnectedScope(this, outletElement, name);
          if (outletController)
            return outletController;
          throw new Error(`The provided outlet element is missing an outlet controller "${name}" instance for host controller "${this.identifier}"`);
        }
        throw new Error(`Missing outlet element "${name}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${selector}".`);
      }
    },
    [`${camelizedName}Outlets`]: {
      get() {
        const outlets = this.outlets.findAll(name);
        if (outlets.length > 0) {
          return outlets.map((outletElement) => {
            const outletController = getControllerAndEnsureConnectedScope(this, outletElement, name);
            if (outletController)
              return outletController;
            console.warn(`The provided outlet element is missing an outlet controller "${name}" instance for host controller "${this.identifier}"`, outletElement);
          }).filter((controller) => controller);
        }
        return [];
      }
    },
    [`${camelizedName}OutletElement`]: {
      get() {
        const outletElement = this.outlets.find(name);
        const selector = this.outlets.getSelectorForOutletName(name);
        if (outletElement) {
          return outletElement;
        } else {
          throw new Error(`Missing outlet element "${name}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${selector}".`);
        }
      }
    },
    [`${camelizedName}OutletElements`]: {
      get() {
        return this.outlets.findAll(name);
      }
    },
    [`has${capitalize2(camelizedName)}Outlet`]: {
      get() {
        return this.outlets.has(name);
      }
    }
  };
}
function TargetPropertiesBlessing(constructor) {
  const targets = readInheritableStaticArrayValues(constructor, "targets");
  return targets.reduce((properties, targetDefinition) => {
    return Object.assign(properties, propertiesForTargetDefinition(targetDefinition));
  }, {});
}
function propertiesForTargetDefinition(name) {
  return {
    [`${name}Target`]: {
      get() {
        const target = this.targets.find(name);
        if (target) {
          return target;
        } else {
          throw new Error(`Missing target element "${name}" for "${this.identifier}" controller`);
        }
      }
    },
    [`${name}Targets`]: {
      get() {
        return this.targets.findAll(name);
      }
    },
    [`has${capitalize2(name)}Target`]: {
      get() {
        return this.targets.has(name);
      }
    }
  };
}
function ValuePropertiesBlessing(constructor) {
  const valueDefinitionPairs = readInheritableStaticObjectPairs(constructor, "values");
  const propertyDescriptorMap = {
    valueDescriptorMap: {
      get() {
        return valueDefinitionPairs.reduce((result, valueDefinitionPair) => {
          const valueDescriptor = parseValueDefinitionPair(valueDefinitionPair, this.identifier);
          const attributeName = this.data.getAttributeNameForKey(valueDescriptor.key);
          return Object.assign(result, { [attributeName]: valueDescriptor });
        }, {});
      }
    }
  };
  return valueDefinitionPairs.reduce((properties, valueDefinitionPair) => {
    return Object.assign(properties, propertiesForValueDefinitionPair(valueDefinitionPair));
  }, propertyDescriptorMap);
}
function propertiesForValueDefinitionPair(valueDefinitionPair, controller) {
  const definition = parseValueDefinitionPair(valueDefinitionPair, controller);
  const { key, name, reader: read, writer: write } = definition;
  return {
    [name]: {
      get() {
        const value = this.data.get(key);
        if (value !== null) {
          return read(value);
        } else {
          return definition.defaultValue;
        }
      },
      set(value) {
        if (value === void 0) {
          this.data.delete(key);
        } else {
          this.data.set(key, write(value));
        }
      }
    },
    [`has${capitalize2(name)}`]: {
      get() {
        return this.data.has(key) || definition.hasCustomDefaultValue;
      }
    }
  };
}
function parseValueDefinitionPair([token, typeDefinition], controller) {
  return valueDescriptorForTokenAndTypeDefinition({
    controller,
    token,
    typeDefinition
  });
}
function parseValueTypeConstant(constant) {
  switch (constant) {
    case Array:
      return "array";
    case Boolean:
      return "boolean";
    case Number:
      return "number";
    case Object:
      return "object";
    case String:
      return "string";
  }
}
function parseValueTypeDefault(defaultValue) {
  switch (typeof defaultValue) {
    case "boolean":
      return "boolean";
    case "number":
      return "number";
    case "string":
      return "string";
  }
  if (Array.isArray(defaultValue))
    return "array";
  if (Object.prototype.toString.call(defaultValue) === "[object Object]")
    return "object";
}
function parseValueTypeObject(payload) {
  const { controller, token, typeObject } = payload;
  const hasType = isSomething(typeObject.type);
  const hasDefault = isSomething(typeObject.default);
  const fullObject = hasType && hasDefault;
  const onlyType = hasType && !hasDefault;
  const onlyDefault = !hasType && hasDefault;
  const typeFromObject = parseValueTypeConstant(typeObject.type);
  const typeFromDefaultValue = parseValueTypeDefault(payload.typeObject.default);
  if (onlyType)
    return typeFromObject;
  if (onlyDefault)
    return typeFromDefaultValue;
  if (typeFromObject !== typeFromDefaultValue) {
    const propertyPath = controller ? `${controller}.${token}` : token;
    throw new Error(`The specified default value for the Stimulus Value "${propertyPath}" must match the defined type "${typeFromObject}". The provided default value of "${typeObject.default}" is of type "${typeFromDefaultValue}".`);
  }
  if (fullObject)
    return typeFromObject;
}
function parseValueTypeDefinition(payload) {
  const { controller, token, typeDefinition } = payload;
  const typeObject = { controller, token, typeObject: typeDefinition };
  const typeFromObject = parseValueTypeObject(typeObject);
  const typeFromDefaultValue = parseValueTypeDefault(typeDefinition);
  const typeFromConstant = parseValueTypeConstant(typeDefinition);
  const type = typeFromObject || typeFromDefaultValue || typeFromConstant;
  if (type)
    return type;
  const propertyPath = controller ? `${controller}.${typeDefinition}` : token;
  throw new Error(`Unknown value type "${propertyPath}" for "${token}" value`);
}
function defaultValueForDefinition(typeDefinition) {
  const constant = parseValueTypeConstant(typeDefinition);
  if (constant)
    return defaultValuesByType[constant];
  const hasDefault = hasProperty(typeDefinition, "default");
  const hasType = hasProperty(typeDefinition, "type");
  const typeObject = typeDefinition;
  if (hasDefault)
    return typeObject.default;
  if (hasType) {
    const { type } = typeObject;
    const constantFromType = parseValueTypeConstant(type);
    if (constantFromType)
      return defaultValuesByType[constantFromType];
  }
  return typeDefinition;
}
function valueDescriptorForTokenAndTypeDefinition(payload) {
  const { token, typeDefinition } = payload;
  const key = `${dasherize(token)}-value`;
  const type = parseValueTypeDefinition(payload);
  return {
    type,
    key,
    name: camelize2(key),
    get defaultValue() {
      return defaultValueForDefinition(typeDefinition);
    },
    get hasCustomDefaultValue() {
      return parseValueTypeDefault(typeDefinition) !== void 0;
    },
    reader: readers[type],
    writer: writers[type] || writers.default
  };
}
var defaultValuesByType = {
  get array() {
    return [];
  },
  boolean: false,
  number: 0,
  get object() {
    return {};
  },
  string: ""
};
var readers = {
  array(value) {
    const array = JSON.parse(value);
    if (!Array.isArray(array)) {
      throw new TypeError(`expected value of type "array" but instead got value "${value}" of type "${parseValueTypeDefault(array)}"`);
    }
    return array;
  },
  boolean(value) {
    return !(value == "0" || String(value).toLowerCase() == "false");
  },
  number(value) {
    return Number(value.replace(/_/g, ""));
  },
  object(value) {
    const object = JSON.parse(value);
    if (object === null || typeof object != "object" || Array.isArray(object)) {
      throw new TypeError(`expected value of type "object" but instead got value "${value}" of type "${parseValueTypeDefault(object)}"`);
    }
    return object;
  },
  string(value) {
    return value;
  }
};
var writers = {
  default: writeString,
  array: writeJSON,
  object: writeJSON
};
function writeJSON(value) {
  return JSON.stringify(value);
}
function writeString(value) {
  return `${value}`;
}
var Controller = class {
  constructor(context) {
    this.context = context;
  }
  static get shouldLoad() {
    return true;
  }
  static afterLoad(_identifier, _application) {
    return;
  }
  get application() {
    return this.context.application;
  }
  get scope() {
    return this.context.scope;
  }
  get element() {
    return this.scope.element;
  }
  get identifier() {
    return this.scope.identifier;
  }
  get targets() {
    return this.scope.targets;
  }
  get outlets() {
    return this.scope.outlets;
  }
  get classes() {
    return this.scope.classes;
  }
  get data() {
    return this.scope.data;
  }
  initialize() {
  }
  connect() {
  }
  disconnect() {
  }
  dispatch(eventName, { target = this.element, detail = {}, prefix: prefix2 = this.identifier, bubbles = true, cancelable = true } = {}) {
    const type = prefix2 ? `${prefix2}:${eventName}` : eventName;
    const event2 = new CustomEvent(type, { detail, bubbles, cancelable });
    target.dispatchEvent(event2);
    return event2;
  }
};
Controller.blessings = [
  ClassPropertiesBlessing,
  TargetPropertiesBlessing,
  ValuePropertiesBlessing,
  OutletPropertiesBlessing
];
Controller.targets = [];
Controller.outlets = [];
Controller.values = {};

// app/javascript/controllers/theme_controller.ts
var theme_controller_default = class extends Controller {
  static {
    this.targets = ["lightIcon", "darkIcon"];
  }
  static {
    this.values = { storageKey: String };
  }
  connect() {
    this.initializeTheme();
  }
  toggle() {
    const isDark = document.documentElement.classList.contains("dark");
    const newIsDark = !isDark;
    localStorage.setItem(this.storageKeyValue, JSON.stringify(newIsDark));
    this.updateTheme(newIsDark);
  }
  initializeTheme() {
    const savedIsDark = this.getSavedTheme();
    this.updateTheme(savedIsDark);
  }
  getSavedTheme() {
    return JSON.parse(localStorage.getItem(this.storageKeyValue) || "false");
  }
  updateTheme(isDark) {
    if (isDark) {
      document.documentElement.classList.add("dark");
      this.lightIconTarget.classList.add("hidden");
      this.darkIconTarget.classList.remove("hidden");
    } else {
      document.documentElement.classList.remove("dark");
      this.lightIconTarget.classList.remove("hidden");
      this.darkIconTarget.classList.add("hidden");
    }
  }
};

// app/javascript/controllers/dropdown_controller.ts
var dropdown_controller_default = class extends Controller {
  static {
    this.targets = ["menu", "trigger"];
  }
  static {
    this.values = {
      closeOnClickOutside: { type: Boolean, default: true }
    };
  }
  connect() {
    if (this.closeOnClickOutsideValue) {
      document.addEventListener("click", this.clickOutside.bind(this));
    }
  }
  disconnect() {
    if (this.closeOnClickOutsideValue) {
      document.removeEventListener("click", this.clickOutside.bind(this));
    }
  }
  toggle(event2) {
    const isHidden = this.menuTarget.classList.contains("hidden");
    if (isHidden) {
      this.open(event2);
    } else {
      this.close(event2);
    }
  }
  open(event2) {
    this.menuTarget.classList.remove("hidden");
    if (this.hasTriggerTarget) {
      this.triggerTarget.setAttribute("aria-expanded", "true");
    }
  }
  close(event2) {
    this.menuTarget.classList.add("hidden");
    if (this.hasTriggerTarget) {
      this.triggerTarget.setAttribute("aria-expanded", "false");
    }
  }
  clickOutside(event2) {
    if (!this.element.contains(event2.target)) {
      this.close(event2);
    }
  }
};

// app/javascript/controllers/sdk_integration_controller.ts
var sdk_integration_controller_default = class extends Controller {
  static {
    this.targets = [
      "sdkButton"
    ];
  }
  static {
    this.values = {
      message: String,
      action: String
    };
  }
  connect() {
    this.checkSDKAvailability();
  }
  // Send message to chatbox (SDK integration)
  sendToChatbox() {
    if (!window.sdkUtils || !window.sdkUtils.sendMessage) {
      console.warn("SDK not available");
      return;
    }
    const message = this.messageValue || this.generateDefaultMessage();
    window.sdkUtils.sendMessage(message);
  }
  // Send error to chatbox for fixing
  sendErrorToChatbox() {
    if (!window.sdkUtils || !window.sdkUtils.sendErrorForFix) {
      console.warn("SDK not available");
      return;
    }
    const action = this.actionValue || "sendErrorForFix";
    if (action === "sendErrorForFix") {
      const errorMessage = this.messageValue || "Unknown error";
      window.sdkUtils.sendErrorForFix({ errorMessage });
    } else {
      const message = this.messageValue || this.generateDefaultMessage();
      window.sdkUtils.sendMessage(message);
    }
  }
  // Check SDK availability and show/hide SDK buttons
  checkSDKAvailability() {
    if (!this.hasSdkButtonTarget) return;
    const checkAndShow = () => {
      if (window.isSDKAvailable && window.isSDKAvailable()) {
        this.sdkButtonTarget.style.display = "block";
        return true;
      }
      return false;
    };
    if (!checkAndShow()) {
      setTimeout(checkAndShow, 1e3);
      setTimeout(checkAndShow, 2800);
    }
  }
  // Generate default message for SDK
  generateDefaultMessage() {
    const url = window.location.pathname.substring(1);
    return `Please help me with this page: ${url}

URL: ${window.location.href}
Path: ${url}

I need assistance with this page.`;
  }
};

// app/javascript/controllers/clipboard_controller.ts
var clipboard_controller_default = class extends Controller {
  static {
    this.targets = ["source"];
  }
  // Copy content to clipboard
  copy(event2) {
    event2.preventDefault();
    const textToCopy = this.sourceTarget.value;
    if (!textToCopy) {
      console.error("No text to copy found");
      this.showFailure();
      return;
    }
    if (!window.copyToClipboard) {
      console.error("window.copyToClipboard not available");
      this.showFailure();
      return;
    }
    console.log("Attempting to copy:", textToCopy);
    window.copyToClipboard(textToCopy).then(() => {
      this.showSuccess();
    }).catch((_error) => {
      this.showFailure();
    });
  }
  // Show success feedback
  showSuccess() {
    const button = this.getButton();
    const originalText = button.innerHTML;
    const originalClass = button.className;
    button.innerHTML = "Copied!";
    button.className = originalClass.replace(/btn-\w+/, "btn-success");
    setTimeout(() => {
      button.innerHTML = originalText;
      button.className = originalClass;
    }, 2e3);
  }
  // Show failure feedback
  showFailure() {
    const button = this.getButton();
    const originalText = button.innerHTML;
    const originalClass = button.className;
    button.innerHTML = "Copy Failed!";
    button.className = originalClass.replace(/btn-\w+/, "btn-danger");
    setTimeout(() => {
      button.innerHTML = originalText;
      button.className = originalClass;
    }, 2e3);
  }
  // Get the button to show feedback on
  getButton() {
    const button = this.element.querySelector("button");
    if (button) {
      return button;
    }
    return this.element;
  }
};

// app/javascript/controllers/city_selector_controller.ts
var city_selector_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectionType = "departure";
    this.isMultiSelectMode = false;
    this.selectedCities = [];
    this.currentMultiCitySegmentId = null;
    this.currentMultiCityCityType = null;
    this.currentRegionType = "domestic";
  }
  static {
    this.targets = [
      // stimulus-validator: disable-next-line
      "modal",
      "departure",
      "destination",
      "departureCityInput",
      "destinationCityInput",
      // stimulus-validator: disable-next-line
      "tabDeparture",
      // stimulus-validator: disable-next-line
      "tabDestination",
      // stimulus-validator: disable-next-line
      "tabDomestic",
      // stimulus-validator: disable-next-line
      "tabInternational",
      // stimulus-validator: disable-next-line
      "searchInput",
      // stimulus-validator: disable-next-line
      "domesticList",
      // stimulus-validator: disable-next-line
      "internationalList",
      // stimulus-validator: disable-next-line
      "historySection",
      // stimulus-validator: disable-next-line
      "currentCity",
      // stimulus-validator: disable-next-line
      "locationStatus",
      // stimulus-validator: disable-next-line
      "locationButton",
      // stimulus-validator: disable-next-line
      "locationText",
      // stimulus-validator: disable-next-line
      "locationSpinner",
      // stimulus-validator: disable-next-line
      "locatedCity",
      // stimulus-validator: disable-next-line
      "locatedCityButton",
      // stimulus-validator: disable-next-line
      "currentRegionTab"
    ];
  }
  static {
    this.values = {
      departureCity: String,
      destinationCity: String,
      enableMultiSelect: { type: Boolean, default: true },
      modalTitle: { type: String, default: "" }
    };
  }
  connect() {
    console.log("CitySelector connected", { enableMultiSelect: this.enableMultiSelectValue });
    if (!this.departureCityValue) this.departureCityValue = "\u5317\u4EAC";
    if (!this.destinationCityValue) this.destinationCityValue = "\u676D\u5DDE";
    if (this.hasDepartureCityInputTarget) {
      this.departureCityInputTarget.value = this.departureCityValue;
    }
    if (this.hasDestinationCityInputTarget) {
      this.destinationCityInputTarget.value = this.destinationCityValue;
    }
    if (!this.enableMultiSelectValue) {
      this.hideMultiSelectUI();
    }
    this.element.addEventListener("multi-city:open-city-selector", this.handleMultiCityOpen.bind(this));
  }
  disconnect() {
    this.element.removeEventListener("multi-city:open-city-selector", this.handleMultiCityOpen.bind(this));
  }
  // Handle multi-city city selector request
  handleMultiCityOpen(event2) {
    const customEvent = event2;
    const { segmentId, cityType } = customEvent.detail;
    console.log("City selector: Received multi-city open request", { segmentId, cityType });
    this.currentMultiCitySegmentId = segmentId;
    this.currentMultiCityCityType = cityType;
    this.selectionType = cityType === "departure" ? "departure" : "destination";
    this.updateModalTitle();
    this.showModal();
  }
  // Open modal for departure city selection
  openDeparture() {
    this.selectionType = "departure";
    this.isMultiSelectMode = false;
    this.selectedCities = [];
    this.updateModalTitle();
    this.updateMultiSelectUI();
    this.showModal();
  }
  // Open modal for destination city selection
  openDestination() {
    this.selectionType = "destination";
    this.isMultiSelectMode = false;
    this.selectedCities = [];
    this.updateModalTitle();
    this.updateMultiSelectUI();
    this.showModal();
  }
  // Open modal for hotel search city selection
  openHotelCitySelector() {
    this.selectionType = "departure";
    this.isMultiSelectMode = false;
    this.selectedCities = [];
    this.updateModalTitle();
    this.showModal();
  }
  // Show modal
  showModal() {
    if (!this.hasModalTarget) return;
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // Close modal
  closeModal() {
    if (!this.hasModalTarget) return;
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
    this.clearSearch();
  }
  // Select city
  selectCity(event2) {
    const button = event2.currentTarget;
    const cityName = button.dataset.cityName || "";
    const isInternational = button.dataset.international === "true";
    console.log("City selector: City selected:", cityName, "international:", isInternational);
    if (this.isMultiSelectMode) {
      if (this.selectedCities.includes(cityName)) {
        this.selectedCities = this.selectedCities.filter((city) => city !== cityName);
      } else {
        this.selectedCities.push(cityName);
      }
      this.updateSelectedCitiesDisplay();
      this.updateCityButtonStates();
      return;
    }
    if (this.currentMultiCitySegmentId && this.currentMultiCityCityType) {
      console.log("City selector: Multi-city mode, dispatching event", {
        segmentId: this.currentMultiCitySegmentId,
        cityType: this.currentMultiCityCityType,
        cityName
      });
      const updateEvent = new CustomEvent("city-selector:city-selected", {
        detail: {
          segmentId: this.currentMultiCitySegmentId,
          cityType: this.currentMultiCityCityType,
          cityName
        },
        bubbles: true
      });
      document.dispatchEvent(updateEvent);
      this.currentMultiCitySegmentId = null;
      this.currentMultiCityCityType = null;
    } else {
      console.log("City selector: Regular mode");
      if (this.selectionType === "departure") {
        this.departureCityValue = cityName;
        if (this.hasDepartureTarget) {
          this.departureTarget.textContent = cityName;
        }
        if (this.hasDepartureCityInputTarget) {
          this.departureCityInputTarget.value = cityName;
        }
        if (window.location.pathname === "/special_hotels") {
          Turbo.visit(`/special_hotels?city=${encodeURIComponent(cityName)}`);
          return;
        }
        if (window.location.pathname === "/hotels/search") {
          const url = new URL(window.location.href);
          url.searchParams.set("city", cityName);
          Turbo.visit(url.toString());
          return;
        }
        this.dispatchCityChangedEvent(cityName);
        this.dispatchHotelCityUpdateEvent(cityName, isInternational);
        this.dispatchTripCityChangeEvent("departure", cityName);
      } else {
        this.destinationCityValue = cityName;
        if (this.hasDestinationTarget) {
          this.destinationTarget.textContent = cityName;
        }
        if (this.hasDestinationCityInputTarget) {
          this.destinationCityInputTarget.value = cityName;
        }
        this.dispatchCityChangedEvent(cityName);
        this.dispatchTripCityChangeEvent("destination", cityName);
      }
    }
    this.closeModal();
    this.saveToHistory(cityName);
  }
  // Toggle region tab (domestic/international)
  toggleRegion(event2) {
    const button = event2.currentTarget;
    const region = button.dataset.region;
    this.currentRegionType = region;
    if (this.hasTabDomesticTarget && this.hasTabInternationalTarget) {
      if (region === "domestic") {
        this.tabDomesticTarget.classList.add("border-b-2", "border-primary", "text-primary", "font-bold");
        this.tabDomesticTarget.classList.remove("text-gray-500");
        this.tabInternationalTarget.classList.remove("border-b-2", "border-primary", "text-primary", "font-bold");
        this.tabInternationalTarget.classList.add("text-gray-500");
      } else {
        this.tabInternationalTarget.classList.add("border-b-2", "border-primary", "text-primary", "font-bold");
        this.tabInternationalTarget.classList.remove("text-gray-500");
        this.tabDomesticTarget.classList.remove("border-b-2", "border-primary", "text-primary", "font-bold");
        this.tabDomesticTarget.classList.add("text-gray-500");
      }
    }
    if (this.hasDomesticListTarget && this.hasInternationalListTarget) {
      if (region === "domestic") {
        this.domesticListTarget.classList.remove("hidden");
        this.internationalListTarget.classList.add("hidden");
      } else {
        this.domesticListTarget.classList.add("hidden");
        this.internationalListTarget.classList.remove("hidden");
      }
    }
  }
  // Dispatch city-changed event for other controllers (like tour-group-filter)
  dispatchCityChangedEvent(cityName) {
    const cityChangedEvent = new CustomEvent("city-selector:city-changed", {
      detail: { cityName },
      bubbles: true
    });
    this.element.dispatchEvent(cityChangedEvent);
    console.log("City selector: Dispatched city-changed event", cityName);
  }
  // Dispatch hotel-specific city update event
  dispatchHotelCityUpdateEvent(cityName, isInternational = false) {
    const hotelCityEvent = new CustomEvent("city-selector:city-selected-for-hotel", {
      detail: {
        cityName,
        isInternational
      },
      bubbles: true
    });
    document.dispatchEvent(hotelCityEvent);
    console.log("City selector: Dispatched hotel city update event", { cityName, isInternational });
  }
  // Switch cities
  switchCities() {
    const temp = this.departureCityValue;
    this.departureCityValue = this.destinationCityValue;
    this.destinationCityValue = temp;
    this.element.dispatchEvent(new CustomEvent("cities-switched", {
      detail: {
        departure: this.departureCityValue,
        destination: this.destinationCityValue
      },
      bubbles: true
    }));
  }
  // Search cities
  searchCities() {
    if (!this.hasSearchInputTarget) return;
    const query = this.searchInputTarget.value.toLowerCase().trim();
    const cityButtons = this.element.querySelectorAll("[data-city-name]");
    cityButtons.forEach((button) => {
      const cityName = button.dataset.cityName?.toLowerCase() || "";
      const cityElement = button;
      if (!query || cityName.includes(query)) {
        cityElement.classList.remove("hidden");
      } else {
        cityElement.classList.add("hidden");
      }
    });
  }
  // Clear search
  clearSearch() {
    if (!this.hasSearchInputTarget) return;
    this.searchInputTarget.value = "";
    this.searchCities();
  }
  // Request location
  requestLocation() {
    if (!this.hasLocationButtonTarget || !this.hasLocationTextTarget || !this.hasLocationSpinnerTarget) return;
    this.locationTextTarget.textContent = "\u5B9A\u4F4D\u4E2D...";
    this.locationSpinnerTarget.classList.remove("hidden");
    this.locationButtonTarget.disabled = true;
    if (this.hasLocationStatusTarget) {
      const statusSpan = this.locationStatusTarget.querySelector("span");
      if (statusSpan) statusSpan.textContent = "\u6B63\u5728\u83B7\u53D6\u4F4D\u7F6E\u4FE1\u606F...";
    }
    this.getCityFromIP();
  }
  // Get city from IP address using ipapi.co (free, no key needed)
  getCityFromIP() {
    fetch("https://ipapi.co/json/").then((response) => {
      if (!response.ok) throw new Error("ipapi.co failed");
      return response.json();
    }).then((data2) => {
      console.log("Location data:", data2);
      let cityName = "";
      if (data2.city) {
        cityName = data2.city;
        const cityMap = {
          "Beijing": "\u5317\u4EAC",
          "Shanghai": "\u4E0A\u6D77",
          "Guangzhou": "\u5E7F\u5DDE",
          "Shenzhen": "\u6DF1\u5733",
          "Chengdu": "\u6210\u90FD",
          "Hangzhou": "\u676D\u5DDE",
          "Wuhan": "\u6B66\u6C49",
          "Chongqing": "\u91CD\u5E86",
          "Nanjing": "\u5357\u4EAC",
          "Xi'an": "\u897F\u5B89",
          "Tianjin": "\u5929\u6D25",
          "Suzhou": "\u82CF\u5DDE",
          "Changsha": "\u957F\u6C99",
          "Zhengzhou": "\u90D1\u5DDE",
          "Harbin": "\u54C8\u5C14\u6EE8",
          "Qingdao": "\u9752\u5C9B",
          "Kunming": "\u6606\u660E",
          "Xiamen": "\u53A6\u95E8",
          "Dalian": "\u5927\u8FDE"
        };
        if (cityMap[data2.city]) {
          cityName = cityMap[data2.city];
        }
        cityName = cityName.replace(/\s+Shi$/, "").replace(/\s+City$/, "").replace("\u5E02", "");
        this.handleLocationSuccess(cityName);
      } else {
        this.getCityFromIPFallback();
      }
    }).catch((error3) => {
      console.error("IP location error:", error3);
      this.getCityFromIPFallback();
    });
  }
  // Fallback: Use ip-api.com (free, no key, better for China)
  getCityFromIPFallback() {
    fetch("http://ip-api.com/json/?lang=zh-CN").then((response) => response.json()).then((data2) => {
      console.log("Fallback location data:", data2);
      if (data2.status === "success" && data2.city) {
        const cityName = data2.city.replace("\u5E02", "");
        this.handleLocationSuccess(cityName);
      } else {
        this.handleLocationError("\u65E0\u6CD5\u81EA\u52A8\u5B9A\u4F4D\uFF0C\u8BF7\u624B\u52A8\u9009\u62E9\u57CE\u5E02");
      }
    }).catch((error3) => {
      console.error("Fallback IP location error:", error3);
      this.handleLocationError("\u5B9A\u4F4D\u670D\u52A1\u6682\u65F6\u4E0D\u53EF\u7528\uFF0C\u8BF7\u624B\u52A8\u9009\u62E9\u57CE\u5E02");
    });
  }
  // Handle location success
  handleLocationSuccess(cityName) {
    if (!this.hasLocationTextTarget || !this.hasLocationSpinnerTarget || !this.hasLocationButtonTarget || !this.hasLocatedCityTarget || !this.hasLocatedCityButtonTarget) return;
    this.locationTextTarget.textContent = "\u91CD\u65B0\u5B9A\u4F4D";
    this.locationSpinnerTarget.classList.add("hidden");
    this.locationButtonTarget.disabled = false;
    if (this.hasLocationStatusTarget) {
      const statusSpan = this.locationStatusTarget.querySelector("span");
      if (statusSpan) statusSpan.textContent = `\u5B9A\u4F4D\u6210\u529F\uFF1A${cityName}`;
    }
    this.locatedCityTarget.classList.remove("hidden");
    this.locatedCityButtonTarget.textContent = cityName;
    this.locatedCityButtonTarget.dataset.cityName = cityName;
  }
  // Handle location error
  handleLocationError(errorMessage) {
    if (!this.hasLocationTextTarget || !this.hasLocationSpinnerTarget || !this.hasLocationButtonTarget) return;
    this.locationTextTarget.textContent = "\u91CD\u8BD5\u5B9A\u4F4D";
    this.locationSpinnerTarget.classList.add("hidden");
    this.locationButtonTarget.disabled = false;
    if (this.hasLocationStatusTarget) {
      const statusSpan = this.locationStatusTarget.querySelector("span");
      if (statusSpan) statusSpan.textContent = errorMessage || "\u5B9A\u4F4D\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\u6216\u624B\u52A8\u9009\u62E9\u57CE\u5E02";
    }
    setTimeout(() => {
      if (this.hasLocationTextTarget) {
        this.locationTextTarget.textContent = "\u5F00\u542F\u5B9A\u4F4D\u6743\u9650";
      }
    }, 3e3);
  }
  // Save to history
  saveToHistory(cityName) {
    const storageKey = "city_history";
    let history2 = [];
    try {
      const stored = localStorage.getItem(storageKey);
      if (stored) {
        history2 = JSON.parse(stored);
      }
    } catch (e) {
      console.error("Failed to load city history:", e);
    }
    history2 = history2.filter((city) => city !== cityName);
    history2.unshift(cityName);
    history2 = history2.slice(0, 5);
    try {
      localStorage.setItem(storageKey, JSON.stringify(history2));
    } catch (e) {
      console.error("Failed to save city history:", e);
    }
  }
  // Update modal title
  updateModalTitle() {
  }
  // Hide multi-select UI
  hideMultiSelectUI() {
  }
  // Update multi-select UI
  updateMultiSelectUI() {
  }
  // Update selected cities display
  updateSelectedCitiesDisplay() {
  }
  // Update city button states
  updateCityButtonStates() {
  }
  // Dispatch trip planner city change event
  dispatchTripCityChangeEvent(type, cityName) {
    const event2 = new CustomEvent("trip-planner:city-changed", {
      detail: { type, city: cityName },
      bubbles: true
    });
    document.dispatchEvent(event2);
  }
  // Stop event propagation
  stopPropagation(event2) {
    event2.stopPropagation();
  }
  switchToSingleSelect() {
    this.isMultiSelectMode = false;
    this.selectedCities = [];
    this.updateMultiSelectUI();
  }
  switchToMultiSelect() {
    this.isMultiSelectMode = true;
    this.updateMultiSelectUI();
  }
  confirmMultiSelect() {
    if (this.selectedCities.length > 0) {
      const event2 = new CustomEvent("city-selector:multi-cities-selected", {
        detail: { cities: this.selectedCities },
        bubbles: true
      });
      document.dispatchEvent(event2);
    }
    this.closeModal();
  }
  showDomestic() {
    if (this.hasTabDomesticTarget && this.hasTabInternationalTarget) {
      this.tabDomesticTarget.classList.add("border-blue-500");
      this.tabDomesticTarget.classList.remove("border-transparent");
      this.tabInternationalTarget.classList.remove("border-blue-500");
      this.tabInternationalTarget.classList.add("border-transparent");
    }
    if (this.hasDomesticListTarget) {
      this.domesticListTarget.classList.remove("hidden");
    }
    if (this.hasInternationalListTarget) {
      this.internationalListTarget.classList.add("hidden");
    }
    this.currentRegionType = "domestic";
  }
  showInternational() {
    if (this.hasTabInternationalTarget && this.hasTabDomesticTarget) {
      this.tabInternationalTarget.classList.add("border-blue-500");
      this.tabInternationalTarget.classList.remove("border-transparent");
      this.tabDomesticTarget.classList.remove("border-blue-500");
      this.tabDomesticTarget.classList.add("border-transparent");
    }
    if (this.hasInternationalListTarget) {
      this.internationalListTarget.classList.remove("hidden");
    }
    if (this.hasDomesticListTarget) {
      this.domesticListTarget.classList.add("hidden");
    }
    this.currentRegionType = "international";
  }
  jumpToLetter(event2) {
    const button = event2.currentTarget;
    const letter = button.dataset.letter;
    if (letter) {
      const targetElement = this.element.querySelector(`[data-letter-section="${letter}"]`);
      if (targetElement) {
        targetElement.scrollIntoView({ behavior: "smooth", block: "start" });
      }
    }
  }
  scrollToRegion(event2) {
    const button = event2.currentTarget;
    const region = button.dataset.region;
    if (region) {
      const targetElement = this.element.querySelector(`[data-region-section="${region}"]`);
      if (targetElement) {
        targetElement.scrollIntoView({ behavior: "smooth", block: "start" });
      }
    }
  }
  expandHotCities() {
    const hotCitiesSection = this.element.querySelector("[data-hot-cities]");
    if (hotCitiesSection) {
      hotCitiesSection.classList.toggle("expanded");
    }
  }
  search() {
    this.searchCities();
  }
};

// app/javascript/controllers/flight_search_controller.ts
var flight_search_controller_default = class extends Controller {
  static {
    this.targets = ["departureInput", "destinationInput"];
  }
  // Validate form before submission
  validateForm(event2) {
    if (!this.hasDepartureInputTarget || !this.hasDestinationInputTarget) {
      return;
    }
    const departureCity = this.departureInputTarget.value.trim();
    const destinationCity = this.destinationInputTarget.value.trim();
    if (departureCity && destinationCity && departureCity === destinationCity) {
      event2.preventDefault();
      alert("\u51FA\u53D1\u5730\u4E0E\u76EE\u7684\u5730\u4E0D\u80FD\u76F8\u540C");
      return;
    }
  }
};

// app/javascript/controllers/flight_history_controller.ts
var flight_history_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.maxHistoryItems = 5;
  }
  static {
    this.targets = ["container", "list"];
  }
  connect() {
    if (this.hasContainerTarget && this.hasListTarget) {
      this.renderHistory();
    }
  }
  // Save current search to history when form is submitted
  saveSearch(event2) {
    const form = event2.target;
    const formData = new FormData(form);
    const searchData = {
      departure_city: formData.get("departure_city"),
      destination_city: formData.get("destination_city"),
      date: formData.get("date"),
      return_date: formData.get("return_date") || void 0,
      trip_type: formData.get("trip_type"),
      cabin_class: formData.get("cabin_class") || void 0,
      timestamp: Date.now()
    };
    this.addToHistory(searchData);
  }
  addToHistory(searchData) {
    let history2 = this.getHistory();
    history2 = history2.filter(
      (item) => !(item.departure_city === searchData.departure_city && item.destination_city === searchData.destination_city && item.date === searchData.date)
    );
    history2.unshift(searchData);
    history2 = history2.slice(0, this.maxHistoryItems);
    localStorage.setItem("flight_search_history", JSON.stringify(history2));
  }
  getHistory() {
    const historyStr = localStorage.getItem("flight_search_history");
    if (!historyStr) return [];
    try {
      return JSON.parse(historyStr);
    } catch {
      return [];
    }
  }
  renderHistory() {
    if (!this.hasContainerTarget || !this.hasListTarget) {
      return;
    }
    const history2 = this.getHistory();
    if (history2.length === 0) {
      this.containerTarget.classList.add("hidden");
      return;
    }
    this.containerTarget.classList.remove("hidden");
    const historyHTML = history2.map((item) => {
      const date = new Date(item.date);
      const dateStr = `${date.getMonth() + 1}/${date.getDate()}`;
      const tripTypeText = item.trip_type === "round_trip" ? "\u5F80\u8FD4" : "\u5355\u7A0B";
      const params = new URLSearchParams({
        departure_city: item.departure_city,
        destination_city: item.destination_city,
        date: item.date,
        trip_type: item.trip_type
      });
      if (item.return_date) {
        params.append("return_date", item.return_date);
      }
      if (item.cabin_class) {
        params.append("cabin_class", item.cabin_class);
      }
      const url = `/flights/search?${params.toString()}`;
      return `
        <a href="${url}" 
           class="inline-block whitespace-nowrap px-3 py-1.5 rounded-full bg-gray-100 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 transition-colors">
          ${item.departure_city} \u2192 ${item.destination_city}  ${dateStr}  ${tripTypeText}
        </a>
      `;
    }).join("");
    this.listTarget.innerHTML = historyHTML;
  }
  clearHistory(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    localStorage.removeItem("flight_search_history");
    if (this.hasContainerTarget && this.hasListTarget) {
      this.containerTarget.classList.add("hidden");
      this.listTarget.innerHTML = "";
    }
  }
};

// app/javascript/controllers/date_picker_controller.ts
var date_picker_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedDateObj = /* @__PURE__ */ new Date();
    this.currentMultiCitySegmentId = null;
    this.selectedMonths = /* @__PURE__ */ new Set();
  }
  static {
    this.targets = [
      "modal",
      "selectedDate",
      "dateInput",
      "dateButton",
      "exactTab",
      "fuzzyTab",
      "exactDateContent",
      "fuzzyDateContent",
      "monthButton"
    ];
  }
  static {
    this.values = {
      currentDate: String
    };
  }
  connect() {
    console.log("DatePicker connected");
    const clientToday = this.formatDate(/* @__PURE__ */ new Date());
    this.selectedDateObj = /* @__PURE__ */ new Date();
    this.currentDateValue = this.formatDate(this.selectedDateObj);
    if (this.hasSelectedDateTarget) {
      this.updateDisplayedDate();
    }
    if (this.hasDateInputTarget) {
      this.dateInputTarget.value = this.currentDateValue;
    }
    if (!this.hasModalTarget) {
      console.log("DatePicker: No modal target found, skipping modal setup");
      return;
    }
    const modalElement = this.modalTarget;
    if (modalElement) {
      modalElement.dataset.clientToday = clientToday;
    }
    this.updatePastDates();
    this.element.addEventListener("multi-city:open-date-picker", this.handleMultiCityOpen.bind(this));
  }
  disconnect() {
    this.element.removeEventListener("multi-city:open-date-picker", this.handleMultiCityOpen.bind(this));
  }
  // Handle multi-city date picker request
  handleMultiCityOpen(event2) {
    const { segmentId } = event2.detail;
    console.log("Date picker: Received multi-city open request", { segmentId });
    this.currentMultiCitySegmentId = segmentId;
    this.openModal();
  }
  // Open check-in date picker
  openCheckIn() {
    const checkInDate = prompt("\u8BF7\u8F93\u5165\u5165\u4F4F\u65E5\u671F (YYYY-MM-DD)", this.formatDate(/* @__PURE__ */ new Date()));
    if (checkInDate) {
      const url = new URL(window.location.href);
      url.searchParams.set("check_in", checkInDate);
      window.location.href = url.toString();
    }
  }
  // Open check-out date picker
  openCheckOut() {
    const tomorrow = /* @__PURE__ */ new Date();
    tomorrow.setDate(tomorrow.getDate() + 1);
    const checkOutDate = prompt("\u8BF7\u8F93\u5165\u79BB\u5E97\u65E5\u671F (YYYY-MM-DD)", this.formatDate(tomorrow));
    if (checkOutDate) {
      const url = new URL(window.location.href);
      url.searchParams.set("check_out", checkOutDate);
      window.location.href = url.toString();
    }
  }
  // Open date picker modal
  openModal() {
    if (!this.hasModalTarget) return;
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // Close date picker modal
  closeModal() {
    if (!this.hasModalTarget) return;
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  // Select a date
  selectDate(event2) {
    const button = event2.currentTarget;
    const dateStr = button.dataset.date || "";
    if (!dateStr) return;
    const selectedDate = /* @__PURE__ */ new Date(`${dateStr}T00:00:00`);
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    selectedDate.setHours(0, 0, 0, 0);
    if (selectedDate < today) {
      console.log("Cannot select past dates (client timezone check)");
      return;
    }
    this.selectedDateObj = selectedDate;
    this.currentDateValue = dateStr;
    if (this.currentMultiCitySegmentId) {
      console.log("Date picker: Multi-city mode, dispatching event", {
        segmentId: this.currentMultiCitySegmentId,
        date: dateStr
      });
      const updateEvent = new CustomEvent("date-picker:date-selected", {
        detail: {
          segmentId: this.currentMultiCitySegmentId,
          date: dateStr
        },
        bubbles: true
      });
      document.dispatchEvent(updateEvent);
      this.currentMultiCitySegmentId = null;
      this.closeModal();
    } else if (window.location.pathname.includes("/flights/search")) {
      console.log("Date picker: Search page mode, reloading with new date");
      const url = new URL(window.location.href);
      url.searchParams.set("date", dateStr);
      window.location.href = url.toString();
    } else {
      console.log("Date picker: Regular mode");
      if (this.hasSelectedDateTarget) {
        this.updateDisplayedDate();
      }
      if (this.hasDateInputTarget) {
        this.dateInputTarget.value = dateStr;
      }
      this.closeModal();
    }
  }
  // Update the displayed date in the main view
  updateDisplayedDate() {
    const month = this.selectedDateObj.getMonth() + 1;
    const day = this.selectedDateObj.getDate();
    const dayName = this.getDayName(this.selectedDateObj);
    this.selectedDateTarget.innerHTML = `
      ${month}<span class="text-lg font-medium mx-0.5">\u6708</span>${day}<span class="text-lg font-medium ml-0.5 mr-2">\u65E5</span>
      <span class="text-base text-gray-500 font-medium">${dayName}</span>
    `;
  }
  // Get day name in Chinese
  getDayName(date) {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    const targetDate = new Date(date);
    targetDate.setHours(0, 0, 0, 0);
    const diffTime = targetDate.getTime() - today.getTime();
    const diffDays = Math.round(diffTime / (1e3 * 60 * 60 * 24));
    if (diffDays === 0) return "\u4ECA\u5929";
    if (diffDays === 1) return "\u660E\u5929";
    if (diffDays === 2) return "\u540E\u5929";
    const weekdays = ["\u5468\u65E5", "\u5468\u4E00", "\u5468\u4E8C", "\u5468\u4E09", "\u5468\u56DB", "\u5468\u4E94", "\u5468\u516D"];
    return weekdays[date.getDay()];
  }
  // Format date as YYYY-MM-DD
  formatDate(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    return `${year}-${month}-${day}`;
  }
  // Generate calendar data
  generateCalendar() {
    const result = [];
    const startDate = /* @__PURE__ */ new Date();
    for (let i = 0; i < 60; i++) {
      const date = new Date(startDate);
      date.setDate(startDate.getDate() + i);
      result.push({
        date: this.formatDate(date),
        day: date.getDate(),
        month: date.getMonth() + 1,
        year: date.getFullYear(),
        weekday: date.getDay(),
        isToday: this.isToday(date),
        isSelected: this.formatDate(date) === this.currentDateValue
      });
    }
    return result;
  }
  // Check if date is today
  isToday(date) {
    const today = /* @__PURE__ */ new Date();
    return date.getDate() === today.getDate() && date.getMonth() === today.getMonth() && date.getFullYear() === today.getFullYear();
  }
  // Update date buttons to disable past dates based on client timezone
  updatePastDates() {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    const todayStr = this.formatDate(today);
    this.dateButtonTargets.forEach((button) => {
      const dateStr = button.dataset.date;
      if (!dateStr) return;
      const buttonDate = /* @__PURE__ */ new Date(`${dateStr}T00:00:00`);
      buttonDate.setHours(0, 0, 0, 0);
      const todayMarker = button.querySelector("[data-today-marker]");
      if (dateStr === todayStr && todayMarker) {
        todayMarker.classList.remove("hidden");
      }
      if (buttonDate < today) {
        button.disabled = true;
        button.classList.add("opacity-30", "cursor-not-allowed");
      } else {
        button.disabled = false;
        button.classList.remove("opacity-30", "cursor-not-allowed");
      }
    });
    console.log(`DatePicker: Updated ${this.dateButtonTargets.length} date buttons based on client timezone (today: ${todayStr})`);
  }
  // Switch to exact date tab
  switchToExactDate() {
    this.exactTabTarget.classList.add("font-bold", "border-b-2", "border-black");
    this.exactTabTarget.classList.remove("text-gray-500");
    this.fuzzyTabTarget.classList.remove("font-bold", "border-b-2", "border-black");
    this.fuzzyTabTarget.classList.add("text-gray-500");
    this.exactDateContentTarget.classList.remove("hidden");
    this.fuzzyDateContentTarget.classList.add("hidden");
  }
  // Switch to fuzzy date tab
  switchToFuzzyDate() {
    this.fuzzyTabTarget.classList.add("font-bold", "border-b-2", "border-black");
    this.fuzzyTabTarget.classList.remove("text-gray-500");
    this.exactTabTarget.classList.remove("font-bold", "border-b-2", "border-black");
    this.exactTabTarget.classList.add("text-gray-500");
    this.fuzzyDateContentTarget.classList.remove("hidden");
    this.exactDateContentTarget.classList.add("hidden");
  }
  // Toggle month selection
  toggleMonth(event2) {
    const button = event2.currentTarget;
    const month = button.dataset.month;
    if (!month) return;
    if (this.selectedMonths.has(month)) {
      this.selectedMonths.delete(month);
      button.classList.remove("bg-yellow-100", "border-yellow-500");
      button.classList.add("bg-gray-50");
      const svg = button.querySelector("svg");
      if (svg) svg.classList.remove("text-gray-700");
      if (svg) svg.classList.add("text-gray-400");
      const span = button.querySelector("span");
      if (span) span.classList.remove("text-gray-800", "font-medium");
      if (span) span.classList.add("text-gray-500");
      const checkmarks = button.querySelectorAll('div[class*="absolute"]');
      checkmarks.forEach((div) => {
        if (div.querySelector('svg[width="12"]')) {
          div.classList.add("hidden");
        }
      });
    } else {
      this.selectedMonths.add(month);
      button.classList.remove("bg-gray-50");
      button.classList.add("bg-yellow-100", "border-yellow-500");
      const svg = button.querySelector("svg");
      if (svg) svg.classList.remove("text-gray-400");
      if (svg) svg.classList.add("text-gray-700");
      const span = button.querySelector("span");
      if (span) span.classList.remove("text-gray-500");
      if (span) span.classList.add("text-gray-800", "font-medium");
      const checkmarks = button.querySelectorAll('div[class*="absolute"]');
      checkmarks.forEach((div) => {
        if (div.querySelector('svg[width="12"]')) {
          div.classList.remove("hidden");
        }
      });
    }
  }
  // Select quick range (1, 3, or 6 months)
  selectQuickRange(event2) {
    const button = event2.currentTarget;
    const rangeStr = button.dataset.range;
    if (!rangeStr) return;
    const range = parseInt(rangeStr, 10);
    this.clearMonthSelection();
    const today = /* @__PURE__ */ new Date();
    const currentMonth = new Date(today.getFullYear(), today.getMonth(), 1);
    for (let i = 0; i < range; i++) {
      const targetMonth = new Date(currentMonth);
      targetMonth.setMonth(currentMonth.getMonth() + i);
      const monthValue = `${targetMonth.getFullYear()}-${String(targetMonth.getMonth() + 1).padStart(2, "0")}`;
      const monthButton = this.monthButtonTargets.find((btn) => btn.dataset.month === monthValue);
      if (monthButton && !this.selectedMonths.has(monthValue)) {
        monthButton.click();
      }
    }
  }
  // Clear month selection
  clearMonthSelection() {
    this.monthButtonTargets.forEach((button) => {
      const month = button.dataset.month;
      if (month && this.selectedMonths.has(month)) {
        this.selectedMonths.delete(month);
        button.classList.remove("bg-yellow-100", "border-yellow-500");
        button.classList.add("bg-gray-50");
        const svg = button.querySelector("svg");
        if (svg) svg.classList.remove("text-gray-700");
        if (svg) svg.classList.add("text-gray-400");
        const span = button.querySelector("span");
        if (span) span.classList.remove("text-gray-800", "font-medium");
        if (span) span.classList.add("text-gray-500");
        const checkmarks = button.querySelectorAll('div[class*="absolute"]');
        checkmarks.forEach((div) => {
          if (div.querySelector('svg[width="12"]')) {
            div.classList.add("hidden");
          }
        });
      }
    });
  }
  // Confirm fuzzy date selection
  confirmFuzzyDate() {
    if (this.selectedMonths.size === 0) {
      alert("\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u4E2A\u6708\u4EFD");
      return;
    }
    const monthsArray = Array.from(this.selectedMonths).sort();
    const monthsString = monthsArray.join(",");
    if (window.location.pathname.includes("/flights/search")) {
      console.log("Date picker: Search page fuzzy mode, reloading with first date of selected months");
      const firstMonth = monthsArray[0];
      const [year, month] = firstMonth.split("-");
      const firstDate = `${year}-${month}-01`;
      const url = new URL(window.location.href);
      url.searchParams.set("date", firstDate);
      url.searchParams.set("fuzzy_months", monthsString);
      window.location.href = url.toString();
      return;
    }
    if (this.hasSelectedDateTarget) {
      const firstMonth = monthsArray[0];
      const [, month] = firstMonth.split("-");
      const monthNum = parseInt(month, 10);
      if (monthsArray.length === 1) {
        this.selectedDateTarget.innerHTML = `
          ${monthNum}<span class="text-lg font-medium mx-0.5">\u6708</span>
          <span class="text-base text-gray-500 font-medium">\u5168\u6708</span>
        `;
      } else {
        const lastMonth = monthsArray[monthsArray.length - 1];
        const [, lastMonthStr] = lastMonth.split("-");
        const lastMonthNum = parseInt(lastMonthStr, 10);
        this.selectedDateTarget.innerHTML = `
          ${monthNum}<span class="text-lg font-medium mx-0.5">\u6708</span>-${lastMonthNum}<span class="text-lg font-medium mx-0.5">\u6708</span>
          <span class="text-base text-gray-500 font-medium">(${monthsArray.length}\u4E2A\u6708)</span>
        `;
      }
    }
    if (this.hasDateInputTarget) {
      this.dateInputTarget.value = `fuzzy:${monthsString}`;
    }
    this.closeModal();
  }
};

// app/javascript/controllers/booking_controller.ts
var booking_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    // 
    this.memberCheckCompleted = false;
    // 
    this.isSecondWait = false;
    // 
    this.missingAirlines = [];
  }
  static {
    this.targets = ["termsModal", "insuranceModal", "memberModal", "confirmModal", "totalPriceAmount"];
  }
  selectPassenger(event2) {
    const radio = event2.currentTarget;
    const idNumber = radio.dataset.idNumber || "";
    const phone = radio.dataset.phone || "";
    const idNumberField = document.getElementById("passenger_id_number");
    const phoneField = document.getElementById("booking_contact_phone");
    if (idNumberField) {
      idNumberField.value = idNumber;
    }
    if (phoneField && phone) {
      phoneField.value = phone;
    }
  }
  selectInsurance(event2) {
    const button = event2.currentTarget;
    const insuranceType = button.dataset.insuranceType || "none";
    const insurancePrice = button.dataset.insurancePrice || "0";
    this.setInsuranceValues(insuranceType, insurancePrice);
    this.closeInsuranceModal();
  }
  setInsuranceValues(insuranceType, insurancePrice) {
    const insuranceTypeField = document.getElementById("booking_insurance_type");
    const insurancePriceField = document.getElementById("booking_insurance_price");
    if (insuranceTypeField) {
      insuranceTypeField.value = insuranceType;
    }
    if (insurancePriceField) {
      insurancePriceField.value = insurancePrice;
    }
  }
  // 
  selectInsuranceOption(event2) {
    const radio = event2.currentTarget;
    const insuranceType = radio.dataset.insuranceType || "none";
    const insurancePrice = radio.dataset.insurancePrice || "0";
    this.setInsuranceValues(insuranceType, insurancePrice);
    const allCards = document.querySelectorAll("[data-insurance-card]");
    allCards.forEach((card) => {
      card.classList.remove("border-yellow-400", "border-blue-400", "border-gray-400");
      card.classList.add("border-2", "border-gray-300");
      const checkmark = card.querySelector(".bg-yellow-400");
      if (checkmark) {
        checkmark.style.display = "none";
      }
    });
    const selectedCard = radio.closest("[data-insurance-card]");
    if (selectedCard) {
      selectedCard.classList.remove("border-gray-300");
      if (insuranceType === "standard") {
        selectedCard.classList.add("border-yellow-400");
      } else if (insuranceType === "premium") {
        selectedCard.classList.add("border-blue-400");
      } else {
        selectedCard.classList.add("border-gray-400");
      }
      const checkmark = selectedCard.querySelector(".bg-yellow-400");
      if (checkmark) {
        checkmark.style.display = "flex";
      }
    }
    this.updateTotalPrice();
  }
  // 
  updateTotalPrice() {
    if (!this.totalPriceAmountTarget) return;
    const basePrice = parseInt(this.totalPriceAmountTarget.dataset.basePrice || "0");
    const insurancePriceField = document.getElementById("booking_insurance_price");
    const insurancePrice = parseInt(insurancePriceField?.value || "0");
    const passengerCount = 1;
    const totalPrice = basePrice + insurancePrice * passengerCount;
    this.totalPriceAmountTarget.textContent = totalPrice.toString();
  }
  showTermsModal(event2) {
    event2.preventDefault();
    this.termsModalTarget.classList.remove("hidden");
  }
  closeTermsModal() {
    this.termsModalTarget.classList.add("hidden");
  }
  acceptTerms() {
    const termsCheckbox = document.getElementById("booking_accept_terms");
    if (termsCheckbox) {
      termsCheckbox.checked = true;
    }
    this.closeTermsModal();
    const insuranceTypeField = document.getElementById("booking_insurance_type");
    const insuranceType = insuranceTypeField?.value || "none";
    if (insuranceType === "none") {
      this.showInsuranceModal();
    } else {
      this.showConfirmModal();
    }
  }
  showInsuranceModal() {
    this.insuranceModalTarget.classList.remove("hidden");
  }
  closeInsuranceModal() {
    this.insuranceModalTarget.classList.add("hidden");
    this.showConfirmModal();
  }
  skipInsurance() {
    this.setInsuranceValues("none", "0");
    this.closeInsuranceModal();
  }
  showMemberModal() {
    this.updateMemberModalContent();
    this.memberModalTarget.classList.remove("hidden");
  }
  updateMemberModalContent() {
    const airlineTextElement = this.memberModalTarget.querySelector("[data-airline-names]");
    if (airlineTextElement && this.missingAirlines.length > 0) {
      const airlinesText = this.missingAirlines.join("\u3001");
      airlineTextElement.textContent = airlinesText;
    }
  }
  closeMemberModal() {
    this.memberModalTarget.classList.add("hidden");
    this.memberCheckCompleted = true;
    this.isSecondWait = true;
    this.showConfirmModal();
  }
  showConfirmModal() {
    this.confirmModalTarget.classList.remove("hidden");
    if (this.isSecondWait) {
      const waitTime = Math.floor(Math.random() * (1e4 - 5e3 + 1)) + 5e3;
      setTimeout(() => {
        this.submitForm();
      }, waitTime);
      return;
    }
    this.checkMembershipStatusFromDB().then((needsMemberRegistration) => {
      if (needsMemberRegistration) {
        this.closeConfirmModal();
        this.showMemberModal();
      } else {
        this.memberCheckCompleted = true;
        const waitTime = Math.floor(Math.random() * (1e4 - 5e3 + 1)) + 5e3;
        setTimeout(() => {
          this.submitForm();
        }, waitTime);
      }
    });
  }
  async checkMembershipStatusFromDB() {
    try {
      const urlParams = new URLSearchParams(window.location.search);
      const flightId = urlParams.get("flight_id");
      const returnFlightId = urlParams.get("return_flight_id");
      let url = `/api/check_membership?flight_id=${flightId}`;
      if (returnFlightId) {
        url += `&return_flight_id=${returnFlightId}`;
      }
      const response = await fetch(url, {
        headers: {
          "Accept": "application/json"
        }
      });
      if (!response.ok) {
        this.missingAirlines = [];
        return true;
      }
      const data2 = await response.json();
      this.missingAirlines = data2.missing_airlines || [];
      return !data2.is_member;
    } catch (error3) {
      console.error("\u68C0\u67E5\u4F1A\u5458\u72B6\u6001\u5931\u8D25:", error3);
      this.missingAirlines = [];
      return true;
    }
  }
  closeConfirmModal() {
    this.confirmModalTarget.classList.add("hidden");
  }
  submitForm() {
    const form = this.element.querySelector("form");
    if (form) {
      form.submit();
    }
  }
  handleSubmit(event2) {
    event2.preventDefault();
    this.memberCheckCompleted = false;
    this.isSecondWait = false;
    this.showTermsModal(event2);
  }
};

// app/javascript/controllers/coupon_controller.ts
var coupon_controller_default = class extends Controller {
  static {
    this.targets = ["modal"];
  }
  connect() {
    this.modalTarget.classList.remove("hidden");
  }
  claimCoupons() {
    alert("\u4F18\u60E0\u5238\u5DF2\u9886\u53D6\u6210\u529F\uFF01");
    this.closeModal();
  }
  closeModal() {
    this.modalTarget.classList.add("hidden");
  }
};

// app/javascript/controllers/destination_controller.ts
var destination_controller_default = class extends Controller {
  static {
    this.targets = [
      "tabContent",
      "tabs"
    ];
  }
  connect() {
    console.log("Destination controller connected");
  }
  disconnect() {
    console.log("Destination disconnected");
  }
  switchTab(event2) {
    const button = event2.currentTarget;
    const tabName = button.dataset.tab;
    if (!tabName) return;
    const allTabButtons = this.tabsTarget.querySelectorAll(".tab-btn");
    allTabButtons.forEach((btn) => {
      btn.classList.remove("text-gray-900", "border-gray-900");
      btn.classList.add("text-gray-500", "border-transparent");
    });
    button.classList.remove("text-gray-500", "border-transparent");
    button.classList.add("text-gray-900", "border-gray-900");
    this.tabContentTargets.forEach((content) => {
      if (content.dataset.tab === tabName) {
        content.classList.remove("hidden");
      } else {
        content.classList.add("hidden");
      }
    });
  }
};

// app/javascript/controllers/region_selector_controller.ts
var region_selector_controller_default = class extends Controller {
  static {
    this.targets = ["regionButton", "cityList", "searchInput", "searchResults", "searchResultsList", "noResults", "normalView"];
  }
  static {
    this.values = {
      availableDestinations: Array,
      allCities: Array
    };
  }
  connect() {
    console.log("RegionSelector connected");
    this.showRegion("\u70ED\u95E8\u76EE\u7684\u5730");
  }
  search(event2) {
    const input = event2.target;
    const query = input.value.trim().toLowerCase();
    if (query === "") {
      this.showNormalView();
      return;
    }
    const results = this.allCitiesValue.filter(
      (city) => city.name.toLowerCase().includes(query) || city.pinyin.toLowerCase().includes(query)
    );
    this.displaySearchResults(results);
  }
  clearSearch() {
    this.searchInputTarget.value = "";
    this.showNormalView();
  }
  displaySearchResults(results) {
    this.normalViewTarget.classList.add("hidden");
    if (this.hasSearchResultsTarget) {
      this.searchResultsTarget.classList.remove("hidden");
    }
    if (results.length === 0) {
      this.searchResultsListTarget.innerHTML = "";
      this.noResultsTarget.classList.remove("hidden");
    } else {
      this.noResultsTarget.classList.add("hidden");
      this.searchResultsListTarget.innerHTML = results.map((city) => `
        <div class="text-center py-3 px-2 bg-surface rounded-lg border border-border hover:border-primary hover:shadow-sm transition-all cursor-pointer"
             data-action="click->region-selector#selectCity"
             data-city-name="${city.name}"
             data-city-slug="${city.slug || ""}">
          <div class="text-sm font-medium text-foreground">${city.name}</div>
        </div>
      `).join("");
    }
  }
  showNormalView() {
    this.normalViewTarget.classList.remove("hidden");
    if (this.hasSearchResultsTarget) {
      this.searchResultsTarget.classList.add("hidden");
    }
  }
  selectRegion(event2) {
    const button = event2.currentTarget;
    const regionName = button.dataset.region;
    if (!regionName) return;
    this.regionButtonTargets.forEach((btn) => {
      if (btn === button) {
        btn.classList.add("text-foreground", "bg-white", "border-l-2", "border-primary", "font-medium");
        btn.classList.remove("text-muted");
      } else {
        btn.classList.remove("text-foreground", "bg-white", "border-l-2", "border-primary", "font-medium");
        btn.classList.add("text-muted");
      }
    });
    this.showRegion(regionName);
  }
  selectCity(event2) {
    const cityCard = event2.currentTarget;
    const cityName = cityCard.dataset.cityName;
    if (!cityName) return;
    if (this.availableDestinationsValue.includes(cityName)) {
      const slug = cityCard.dataset.citySlug;
      if (slug) {
        window.location.href = `/destinations/${slug}`;
      }
    } else {
      alert(`${cityName}\u7684\u8BE6\u7EC6\u4FE1\u606F\u5373\u5C06\u4E0A\u7EBF\uFF0C\u656C\u8BF7\u671F\u5F85\uFF01`);
    }
  }
  showRegion(regionName) {
    this.cityListTargets.forEach((list) => {
      if (list.dataset.region === regionName) {
        list.classList.remove("hidden");
      } else {
        list.classList.add("hidden");
      }
    });
  }
};

// app/javascript/controllers/hotel_search_controller.ts
var hotel_search_controller_default = class extends Controller {
  static {
    this.targets = [
      "searchModal",
      "searchInput",
      "searchDisplay",
      "hotSearchContent",
      "hotSearchIcon",
      "hotBrandContent",
      "hotBrandIcon",
      "hotLocationContent",
      "hotLocationIcon",
      "metroContent",
      "metroIcon",
      "airportContent",
      "airportIcon",
      "attractionContent",
      "attractionIcon",
      "themeContent",
      "themeIcon",
      "hospitalContent",
      "hospitalIcon",
      "universityContent",
      "universityIcon",
      "cityInput",
      "checkInInput",
      "checkOutInput",
      "roomsInput",
      "adultsInput",
      "childrenInput",
      "minPriceInput",
      "maxPriceInput",
      "starsInput"
    ];
  }
  connect() {
    console.log("HotelSearch connected");
    document.addEventListener("city-selector:city-selected-for-hotel", this.handleCityUpdate.bind(this));
    document.addEventListener("hotel-date-picker:dates-selected", this.handleDateUpdate.bind(this));
    document.addEventListener("hotel-guest-selector:guests-updated", this.handleGuestUpdate.bind(this));
    document.addEventListener("hotel-price-filter:filter-updated", this.handlePriceFilterUpdate.bind(this));
  }
  disconnect() {
    console.log("HotelSearch disconnected");
    document.removeEventListener("city-selector:city-selected-for-hotel", this.handleCityUpdate.bind(this));
    document.removeEventListener("hotel-date-picker:dates-selected", this.handleDateUpdate.bind(this));
    document.removeEventListener("hotel-guest-selector:guests-updated", this.handleGuestUpdate.bind(this));
    document.removeEventListener("hotel-price-filter:filter-updated", this.handlePriceFilterUpdate.bind(this));
  }
  // Handle city selection update from city-selector
  handleCityUpdate(event2) {
    const customEvent = event2;
    const { cityName } = customEvent.detail;
    console.log("HotelSearch: Received city update:", cityName);
    const url = new URL(window.location.href);
    url.searchParams.set("city", cityName);
    console.log("HotelSearch: Reloading page with new city:", cityName);
    window.location.href = url.toString();
  }
  // Handle date selection update from hotel-date-picker
  handleDateUpdate(event2) {
    const customEvent = event2;
    const { checkIn, checkOut } = customEvent.detail;
    console.log("HotelSearch: Received date update:", { checkIn, checkOut });
    if (this.hasCheckInInputTarget) {
      this.checkInInputTarget.value = checkIn;
      console.log("HotelSearch: Updated check-in to:", checkIn);
    }
    if (this.hasCheckOutInputTarget) {
      this.checkOutInputTarget.value = checkOut;
      console.log("HotelSearch: Updated check-out to:", checkOut);
    }
  }
  // Handle guest selection update from hotel-guest-selector
  handleGuestUpdate(event2) {
    const customEvent = event2;
    const { rooms, adults, children } = customEvent.detail;
    console.log("HotelSearch: Received guest update:", { rooms, adults, children });
    if (this.hasRoomsInputTarget) {
      this.roomsInputTarget.value = rooms.toString();
      console.log("HotelSearch: Updated rooms to:", rooms);
    }
    if (this.hasAdultsInputTarget) {
      this.adultsInputTarget.value = adults.toString();
      console.log("HotelSearch: Updated adults to:", adults);
    }
    if (this.hasChildrenInputTarget) {
      this.childrenInputTarget.value = children.toString();
      console.log("HotelSearch: Updated children to:", children);
    }
  }
  // Handle price/star filter update from hotel-price-filter
  handlePriceFilterUpdate(event2) {
    const customEvent = event2;
    const { minPrice, maxPrice, stars } = customEvent.detail;
    console.log("HotelSearch: Received price filter update:", { minPrice, maxPrice, stars });
    if (this.hasMinPriceInputTarget) {
      this.minPriceInputTarget.value = minPrice > 0 ? minPrice.toString() : "";
      console.log("HotelSearch: Updated minPrice to:", minPrice);
    }
    if (this.hasMaxPriceInputTarget) {
      this.maxPriceInputTarget.value = maxPrice > 0 && maxPrice < 3e3 ? maxPrice.toString() : "";
      console.log("HotelSearch: Updated maxPrice to:", maxPrice < 3e3 ? maxPrice : "empty (no limit)");
    }
    if (this.hasStarsInputTarget) {
      this.starsInputTarget.value = stars > 0 ? stars.toString() : "";
      console.log("HotelSearch: Updated stars to:", stars);
    }
  }
  openSearchModal() {
    this.searchModalTarget.classList.remove("hidden");
    setTimeout(() => {
      this.searchInputTarget.focus();
    }, 100);
  }
  closeSearchModal() {
    this.searchModalTarget.classList.add("hidden");
  }
  submitSearch() {
    const form = this.searchInputTarget.closest("form");
    if (form) {
      form.requestSubmit();
    }
  }
  handleSearchInputKeypress(event2) {
    if (event2.key === "Enter") {
      event2.preventDefault();
      this.submitSearch();
    }
  }
  toggleSection(event2) {
    const button = event2.currentTarget;
    const section = button.dataset.section;
    if (!section) return;
    const contentTarget = `${section}ContentTarget`;
    const iconTarget = `${section}IconTarget`;
    const content = this[contentTarget];
    const icon = this[iconTarget];
    if (content && icon) {
      content.classList.toggle("hidden");
      icon.classList.toggle("rotate-180");
    }
  }
  openCitySelector() {
    alert("\u57CE\u5E02\u9009\u62E9\u529F\u80FD\uFF1A\n\n\u5728\u5B8C\u6574\u7248\u672C\u4E2D\uFF0C\u8FD9\u91CC\u4F1A\u6253\u5F00\u57CE\u5E02\u9009\u62E9\u5668\u3002\n\n\u5F53\u524D\u57CE\u5E02\uFF1A\u6DF1\u5733\u5E02");
  }
  openGuestSelector() {
    const rooms = prompt("\u8BF7\u8F93\u5165\u623F\u95F4\u6570\u91CF", "1");
    const adults = prompt("\u8BF7\u8F93\u5165\u6210\u4EBA\u6570\u91CF", "1");
    const children = prompt("\u8BF7\u8F93\u5165\u513F\u7AE5\u6570\u91CF", "0");
    if (rooms && adults) {
      const url = new URL(window.location.href);
      url.searchParams.set("rooms", rooms);
      url.searchParams.set("adults", adults);
      url.searchParams.set("children", children || "0");
      window.location.href = url.toString();
    }
  }
  getCurrentLocation() {
    if (!navigator.geolocation) {
      alert("\u60A8\u7684\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u5730\u7406\u5B9A\u4F4D\u529F\u80FD");
      return;
    }
    const button = event?.currentTarget;
    if (button) {
      button.disabled = true;
      button.classList.add("opacity-50");
    }
    navigator.geolocation.getCurrentPosition(
      (position) => {
        const { latitude, longitude } = position.coords;
        console.log("Got location:", { latitude, longitude });
        alert(`\u83B7\u53D6\u5230\u60A8\u7684\u4F4D\u7F6E\uFF1A
\u7EAC\u5EA6: ${latitude.toFixed(6)}
\u7ECF\u5EA6: ${longitude.toFixed(6)}

\u5728\u5B8C\u6574\u7248\u672C\u4E2D\uFF0C\u8FD9\u91CC\u4F1A\u81EA\u52A8\u9009\u62E9\u6700\u8FD1\u7684\u57CE\u5E02`);
        if (button) {
          button.disabled = false;
          button.classList.remove("opacity-50");
        }
      },
      (error3) => {
        console.error("Geolocation error:", error3);
        let message = "\u65E0\u6CD5\u83B7\u53D6\u60A8\u7684\u4F4D\u7F6E";
        switch (error3.code) {
          case error3.PERMISSION_DENIED:
            message = "\u60A8\u62D2\u7EDD\u4E86\u4F4D\u7F6E\u6743\u9650\u8BF7\u6C42\u3002\u8BF7\u5728\u6D4F\u89C8\u5668\u8BBE\u7F6E\u4E2D\u5141\u8BB8\u8BBF\u95EE\u4F4D\u7F6E\u4FE1\u606F\u3002";
            break;
          case error3.POSITION_UNAVAILABLE:
            message = "\u4F4D\u7F6E\u4FE1\u606F\u4E0D\u53EF\u7528\uFF0C\u8BF7\u68C0\u67E5\u60A8\u7684\u7F51\u7EDC\u8FDE\u63A5\u3002";
            break;
          case error3.TIMEOUT:
            message = "\u83B7\u53D6\u4F4D\u7F6E\u4FE1\u606F\u8D85\u65F6\uFF0C\u8BF7\u91CD\u8BD5\u3002";
            break;
        }
        alert(message);
        if (button) {
          button.disabled = false;
          button.classList.remove("opacity-50");
        }
      },
      {
        enableHighAccuracy: true,
        timeout: 1e4,
        maximumAge: 0
      }
    );
  }
  selectOption(event2) {
    const button = event2.currentTarget;
    const searchTerm = button.dataset.searchTerm;
    if (!searchTerm) return;
    console.log("HotelSearch: Selected option:", searchTerm);
    this.searchInputTarget.value = searchTerm;
    if (this.hasSearchDisplayTarget) {
      this.searchDisplayTarget.value = searchTerm;
      console.log("HotelSearch: Updated search display to:", searchTerm);
    }
    this.closeSearchModal();
    this.submitSearch();
  }
};

// app/javascript/controllers/hotel_detail_controller.ts
var hotel_detail_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.currentTab = "cover";
  }
  static {
    this.targets = [
      "tabButton",
      "tabContent"
    ];
  }
  static {
    this.values = {
      // Add your values here, e.g.:
      // roomId: String,
      // userId: String
    };
  }
  connect() {
    console.log("HotelDetail connected");
  }
  disconnect() {
    console.log("HotelDetail disconnected");
  }
  // Tab switching functionality
  switchTab(event2) {
    const button = event2.currentTarget;
    const tabName = button.dataset.tab;
    if (!tabName || tabName === this.currentTab) return;
    this.tabButtonTargets.forEach((btn) => {
      if (btn.dataset.tab === tabName) {
        btn.classList.remove("text-gray-500", "border-transparent");
        btn.classList.add("text-gray-900", "border-orange-500");
      } else {
        btn.classList.remove("text-gray-900", "border-orange-500");
        btn.classList.add("text-gray-500", "border-transparent");
      }
    });
    this.tabContentTargets.forEach((content) => {
      if (content.dataset.tab === tabName) {
        content.classList.remove("hidden");
        content.classList.add("block");
      } else {
        content.classList.remove("block");
        content.classList.add("hidden");
      }
    });
    this.currentTab = tabName;
  }
  // FORMS: Turbo + Turbo Streams handle everything automatically
  // - Forms submit via AJAX (Turbo Drive)
  // - Server responds with format.turbo_stream
  // - Turbo Streams update DOM automatically
  // - NO manual form handling needed in Stimulus
  //
  // Use Stimulus for:
  // - UI interactions (toggle, show/hide)
  // - Input validation/formatting
  // - Dynamic form fields
};

// app/javascript/controllers/service_grid_controller.ts
var service_grid_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.currentPage = 0;
    this.touchStartX = 0;
    this.touchEndX = 0;
    this.minSwipeDistance = 50;
  }
  static {
    this.targets = ["page", "dot"];
  }
  // 
  connect() {
    this.showPage(0);
    this.element.addEventListener("touchstart", this.handleTouchStart.bind(this), { passive: true });
    this.element.addEventListener("touchend", this.handleTouchEnd.bind(this), { passive: true });
  }
  disconnect() {
    this.element.removeEventListener("touchstart", this.handleTouchStart.bind(this));
    this.element.removeEventListener("touchend", this.handleTouchEnd.bind(this));
  }
  // 
  handleTouchStart(event2) {
    this.touchStartX = event2.changedTouches[0].screenX;
  }
  // 
  handleTouchEnd(event2) {
    this.touchEndX = event2.changedTouches[0].screenX;
    this.handleSwipe();
  }
  // 
  handleSwipe() {
    const swipeDistance = this.touchEndX - this.touchStartX;
    if (swipeDistance < -this.minSwipeDistance) {
      this.nextPage();
    } else if (swipeDistance > this.minSwipeDistance) {
      this.prevPage();
    }
  }
  goToPage(event2) {
    const target = event2.currentTarget;
    const pageIndex = parseInt(target.getAttribute("data-page") || "0", 10);
    if (pageIndex >= 0 && pageIndex < this.pageTargets.length) {
      this.showPage(pageIndex);
    }
  }
  nextPage() {
    const nextIndex = (this.currentPage + 1) % this.pageTargets.length;
    this.showPage(nextIndex);
  }
  prevPage() {
    const prevIndex = (this.currentPage - 1 + this.pageTargets.length) % this.pageTargets.length;
    this.showPage(prevIndex);
  }
  showPage(pageIndex) {
    this.pageTargets.forEach((page, index) => {
      if (index === pageIndex) {
        page.classList.remove("hidden");
      } else {
        page.classList.add("hidden");
      }
    });
    this.dotTargets.forEach((dot, index) => {
      const button = dot;
      if (index === pageIndex) {
        button.classList.remove("bg-gray-300", "w-1.5", "h-1.5");
        button.classList.add("w-6", "h-1");
        button.style.background = "#FFD700";
      } else {
        button.classList.remove("w-6", "h-1");
        button.classList.add("bg-gray-300", "w-1.5", "h-1.5");
        button.style.background = "";
      }
    });
    this.currentPage = pageIndex;
  }
};

// app/javascript/controllers/passenger_selector_controller.ts
var passenger_selector_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.adults = 0;
    this.children = 0;
    this.infants = 0;
    this.selectedPassengerIds = /* @__PURE__ */ new Set();
    this.selectedPassengerNames = /* @__PURE__ */ new Map();
    this.hasSelection = false;
    // Backup of confirmed state
    this.confirmedAdults = 0;
    this.confirmedChildren = 0;
    this.confirmedInfants = 0;
    this.confirmedPassengerIds = /* @__PURE__ */ new Set();
    this.confirmedPassengerNames = /* @__PURE__ */ new Map();
  }
  static {
    this.targets = [
      "modal",
      "modalTitle",
      "selectedDisplay",
      "passengerTab",
      "countTab",
      "passengerListPanel",
      "countPanel",
      "adultsCount",
      "childrenCount",
      "infantsCount"
    ];
  }
  connect() {
    this.loadFromLocalStorage();
    if (this.hasSelection) {
      this.updateDisplay();
    }
  }
  openModal(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
    this.switchToPassengerTab(event2);
  }
  closeModal(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    this.adults = this.confirmedAdults;
    this.children = this.confirmedChildren;
    this.infants = this.confirmedInfants;
    this.selectedPassengerIds = new Set(this.confirmedPassengerIds);
    this.selectedPassengerNames = new Map(this.confirmedPassengerNames);
    const checkboxes = this.passengerListPanelTarget.querySelectorAll('input[type="checkbox"]');
    checkboxes.forEach((checkbox) => {
      const cb = checkbox;
      const passengerId = parseInt(cb.value);
      cb.checked = this.confirmedPassengerIds.has(passengerId);
    });
    this.updateCounters();
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  stopPropagation(event2) {
    event2.stopPropagation();
  }
  switchToPassengerTab(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    this.passengerTabTarget.classList.add("border-blue-500");
    this.passengerTabTarget.classList.remove("border-transparent");
    this.countTabTarget.classList.remove("border-blue-500");
    this.countTabTarget.classList.add("border-transparent");
    this.passengerListPanelTarget.classList.remove("hidden");
    this.countPanelTarget.classList.add("hidden");
  }
  switchToCountTab(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    this.countTabTarget.classList.add("border-blue-500");
    this.countTabTarget.classList.remove("border-transparent");
    this.passengerTabTarget.classList.remove("border-blue-500");
    this.passengerTabTarget.classList.add("border-transparent");
    this.countPanelTarget.classList.remove("hidden");
    this.passengerListPanelTarget.classList.add("hidden");
  }
  togglePassenger(event2) {
    const checkbox = event2.target;
    const passengerId = parseInt(checkbox.value);
    const passengerName = checkbox.dataset.passengerName || "";
    if (checkbox.checked) {
      this.selectedPassengerIds.add(passengerId);
      this.selectedPassengerNames.set(passengerId, passengerName);
    } else {
      this.selectedPassengerIds.delete(passengerId);
      this.selectedPassengerNames.delete(passengerId);
    }
    const selectedCount = this.selectedPassengerNames.size;
    this.adults = selectedCount;
    this.updateCounters();
  }
  incrementAdults(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    if (this.adults < 9) {
      this.adults++;
      this.updateCounters();
    }
  }
  decrementAdults(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    if (this.adults > 0) {
      this.adults--;
      this.updateCounters();
    }
  }
  incrementChildren(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    if (this.children < 8) {
      this.children++;
      this.updateCounters();
    }
  }
  decrementChildren(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    if (this.children > 0) {
      this.children--;
      this.updateCounters();
    }
  }
  incrementInfants(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    if (this.infants < this.adults) {
      this.infants++;
      this.updateCounters();
    }
  }
  decrementInfants(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    if (this.infants > 0) {
      this.infants--;
      this.updateCounters();
    }
  }
  reset(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    this.adults = 0;
    this.children = 0;
    this.infants = 0;
    this.selectedPassengerIds.clear();
    this.selectedPassengerNames.clear();
    this.hasSelection = false;
    this.confirmedAdults = 0;
    this.confirmedChildren = 0;
    this.confirmedInfants = 0;
    this.confirmedPassengerIds.clear();
    this.confirmedPassengerNames.clear();
    localStorage.removeItem("passenger_selection");
    const checkboxes = this.passengerListPanelTarget.querySelectorAll('input[type="checkbox"]');
    checkboxes.forEach((checkbox) => {
      checkbox.checked = false;
    });
    this.updateCounters();
    this.updateDisplay();
  }
  confirm(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    const isCountPanelActive = !this.countPanelTarget.classList.contains("hidden");
    if (isCountPanelActive) {
      this.selectedPassengerIds.clear();
      this.selectedPassengerNames.clear();
      const checkboxes = this.passengerListPanelTarget.querySelectorAll('input[type="checkbox"]');
      checkboxes.forEach((checkbox) => {
        checkbox.checked = false;
      });
    } else {
      this.adults = 0;
      this.children = 0;
      this.infants = 0;
    }
    this.confirmedAdults = this.adults;
    this.confirmedChildren = this.children;
    this.confirmedInfants = this.infants;
    this.confirmedPassengerIds = new Set(this.selectedPassengerIds);
    this.confirmedPassengerNames = new Map(this.selectedPassengerNames);
    this.hasSelection = true;
    this.saveToLocalStorage();
    this.updateDisplay();
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  toggleEdit() {
    const event2 = new Event("click");
    this.openModal(event2);
  }
  selectPassenger(event2) {
    this.togglePassenger(event2);
  }
  decrease(event2) {
    this.decrementAdults(event2);
  }
  increase(event2) {
    this.incrementAdults(event2);
  }
  updateCounters() {
    this.adultsCountTarget.textContent = this.adults.toString();
    this.childrenCountTarget.textContent = this.children.toString();
    this.infantsCountTarget.textContent = this.infants.toString();
    this.updateModalTitle();
  }
  updateModalTitle() {
    this.modalTitleTarget.textContent = `\u5F53\u524D\u5DF2\u9009: ${this.adults}\u6210\u4EBA ${this.children}\u513F\u7AE5 ${this.infants}\u5A74\u513F`;
  }
  updateDisplay() {
    const total = this.confirmedAdults + this.confirmedChildren + this.confirmedInfants;
    this.selectedDisplayTargets.forEach((displayContainer) => {
      const mainDiv = displayContainer.querySelector(".text-base");
      const subtitleDiv = displayContainer.querySelector(".text-sm");
      if (mainDiv && subtitleDiv) {
        if (this.confirmedPassengerNames.size > 0) {
          const names = Array.from(this.confirmedPassengerNames.values());
          mainDiv.textContent = names.join("\u3001");
          subtitleDiv.textContent = `${names.length}\u4F4D\u4E58\u673A\u4EBA`;
        } else if (this.hasSelection && total > 0) {
          mainDiv.textContent = `${this.confirmedAdults}\u6210\u4EBA ${this.confirmedChildren}\u513F\u7AE5 ${this.confirmedInfants}\u5A74\u513F`;
          subtitleDiv.textContent = `\u5171${total}\u4F4D\u4E58\u673A\u4EBA`;
        } else {
          mainDiv.textContent = "\u9009\u62E9\u4E58\u673A\u4EBA";
          subtitleDiv.textContent = "\u5FEB\u901F\u627E\u5230\u4F4E\u4EF7\u7968";
        }
      }
    });
    this.updateModalTitle();
  }
  saveToLocalStorage() {
    const state = {
      adults: this.confirmedAdults,
      children: this.confirmedChildren,
      infants: this.confirmedInfants,
      passengerIds: Array.from(this.confirmedPassengerIds),
      passengerNames: Array.from(this.confirmedPassengerNames.entries()),
      hasSelection: this.hasSelection
    };
    localStorage.setItem("passenger_selection", JSON.stringify(state));
  }
  loadFromLocalStorage() {
    const savedState = localStorage.getItem("passenger_selection");
    if (savedState) {
      try {
        const state = JSON.parse(savedState);
        this.adults = state.adults || 0;
        this.children = state.children || 0;
        this.infants = state.infants || 0;
        this.confirmedAdults = state.adults || 0;
        this.confirmedChildren = state.children || 0;
        this.confirmedInfants = state.infants || 0;
        this.selectedPassengerIds = new Set(state.passengerIds || []);
        this.confirmedPassengerIds = new Set(state.passengerIds || []);
        this.selectedPassengerNames = new Map(state.passengerNames || []);
        this.confirmedPassengerNames = new Map(state.passengerNames || []);
        this.hasSelection = state.hasSelection || false;
      } catch (e) {
        console.error("Failed to load passenger selection from localStorage:", e);
      }
    }
  }
};

// app/javascript/controllers/cabin_selector_controller.ts
var cabin_selector_controller_default = class extends Controller {
  static {
    this.targets = ["button", "hiddenInput"];
  }
  static {
    this.values = {
      selected: String
    };
  }
  connect() {
    console.log("CabinSelector connected");
    const currentValue = this.hiddenInputTargets[0]?.value;
    const cabinValue = currentValue && currentValue !== "" ? currentValue : "all";
    this.selectCabin(cabinValue);
  }
  selectCabin(cabinType) {
    this.selectedValue = cabinType;
    this.hiddenInputTargets.forEach((input) => {
      input.value = cabinType;
    });
    this.buttonTargets.forEach((button) => {
      const buttonType = button.dataset.cabinType;
      if (buttonType === cabinType) {
        button.classList.add("bg-white", "shadow-sm", "text-gray-900");
        button.classList.remove("text-gray-600");
      } else {
        button.classList.remove("bg-white", "shadow-sm", "text-gray-900");
        button.classList.add("text-gray-600");
      }
    });
  }
  select(event2) {
    const button = event2.currentTarget;
    const cabinType = button.dataset.cabinType;
    if (cabinType) {
      if (this.selectedValue === cabinType) {
        return;
      }
      this.selectCabin(cabinType);
    }
  }
};

// app/javascript/controllers/trip_type_controller.ts
var trip_type_controller_default = class extends Controller {
  static {
    this.targets = [
      "tab",
      "returnDateSection",
      "tripTypeInput",
      "returnDateInput",
      "oneWayRoundTripForm",
      "multiCityForm",
      "promotionBanner"
    ];
  }
  static {
    this.values = {
      currentType: { type: String, default: "one_way" }
    };
  }
  connect() {
    console.log("TripType connected");
    this.updateUI();
  }
  // 
  selectType(event2) {
    const button = event2.currentTarget;
    const tripType = button.dataset.tripType || "one_way";
    this.currentTypeValue = tripType;
    this.updateUI();
    if (tripType === "round_trip" && this.hasReturnDateInputTarget) {
      if (!this.returnDateInputTarget.value) {
        const departureDateInput = document.querySelector('[data-date-picker-target="dateInput"]');
        if (departureDateInput && departureDateInput.value) {
          const departureDate = new Date(departureDateInput.value);
          departureDate.setDate(departureDate.getDate() + 1);
          const returnDateStr = this.formatDate(departureDate);
          this.returnDateInputTarget.value = returnDateStr;
          const returnDateController = this.application.getControllerForElementAndIdentifier(
            this.element,
            "return-date-picker"
          );
          if (returnDateController && "currentDateValue" in returnDateController) {
            returnDateController.currentDateValue = returnDateStr;
          }
        }
      }
    }
  }
  // UI
  updateUI() {
    this.tabTargets.forEach((tab) => {
      const isActive = tab.dataset.tripType === this.currentTypeValue;
      if (isActive) {
        tab.classList.remove("text-gray-500");
        tab.classList.add("font-bold", "border-b-2", "border-black");
      } else {
        tab.classList.remove("font-bold", "border-b-2", "border-black");
        tab.classList.add("text-gray-500");
      }
    });
    if (this.hasTripTypeInputTarget) {
      this.tripTypeInputTarget.value = this.currentTypeValue;
    }
    if (this.hasReturnDateSectionTarget) {
      if (this.currentTypeValue === "round_trip") {
        this.returnDateSectionTarget.classList.remove("hidden");
      } else {
        this.returnDateSectionTarget.classList.add("hidden");
      }
    }
    if (this.hasOneWayRoundTripFormTarget && this.hasMultiCityFormTarget) {
      if (this.currentTypeValue === "multi_city") {
        this.oneWayRoundTripFormTarget.classList.add("hidden");
        this.multiCityFormTarget.classList.remove("hidden");
        const multiCityEvent = new CustomEvent("trip-type:multi-city-shown", {
          bubbles: true
        });
        this.element.dispatchEvent(multiCityEvent);
      } else {
        this.oneWayRoundTripFormTarget.classList.remove("hidden");
        this.multiCityFormTarget.classList.add("hidden");
      }
    }
    if (this.hasPromotionBannerTarget) {
      if (this.currentTypeValue === "multi_city") {
        this.promotionBannerTarget.classList.add("hidden");
      } else {
        this.promotionBannerTarget.classList.remove("hidden");
      }
    }
  }
  formatDate(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    return `${year}-${month}-${day}`;
  }
};

// app/javascript/controllers/return_date_picker_controller.ts
var return_date_picker_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedDateObj = null;
  }
  static {
    this.targets = ["modal", "selectedDate", "dateInput"];
  }
  static {
    this.values = {
      currentDate: String,
      minDate: String
    };
  }
  connect() {
    console.log("ReturnDatePicker connected");
    if (this.currentDateValue) {
      this.selectedDateObj = new Date(this.currentDateValue);
    } else if (this.minDateValue) {
      const minDate = new Date(this.minDateValue);
      minDate.setDate(minDate.getDate() + 1);
      this.selectedDateObj = minDate;
      this.currentDateValue = this.formatDate(this.selectedDateObj);
    }
    if (this.selectedDateObj) {
      this.updateDisplayedDate();
    }
  }
  openModal() {
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  closeModal() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  selectDate(event2) {
    const button = event2.currentTarget;
    const dateStr = button.dataset.date || "";
    if (!dateStr) return;
    this.selectedDateObj = new Date(dateStr);
    this.currentDateValue = dateStr;
    this.updateDisplayedDate();
    this.dateInputTarget.value = dateStr;
    this.closeModal();
  }
  updateDisplayedDate() {
    if (!this.selectedDateObj) return;
    const month = this.selectedDateObj.getMonth() + 1;
    const day = this.selectedDateObj.getDate();
    const dayName = this.getDayName(this.selectedDateObj);
    this.selectedDateTarget.innerHTML = `
      ${month}<span class="text-lg font-medium mx-0.5">\u6708</span>${day}<span class="text-lg font-medium ml-0.5 mr-2">\u65E5</span>
      <span class="text-base text-gray-500 font-medium">${dayName}</span>
    `;
  }
  getDayName(date) {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    const targetDate = new Date(date);
    targetDate.setHours(0, 0, 0, 0);
    const diffTime = targetDate.getTime() - today.getTime();
    const diffDays = Math.round(diffTime / (1e3 * 60 * 60 * 24));
    if (diffDays === 0) return "\u4ECA\u5929";
    if (diffDays === 1) return "\u660E\u5929";
    if (diffDays === 2) return "\u540E\u5929";
    const weekdays = ["\u5468\u65E5", "\u5468\u4E00", "\u5468\u4E8C", "\u5468\u4E09", "\u5468\u56DB", "\u5468\u4E94", "\u5468\u516D"];
    return weekdays[date.getDay()];
  }
  formatDate(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    return `${year}-${month}-${day}`;
  }
};

// app/javascript/controllers/round_trip_selector_controller.ts
var round_trip_selector_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedOutboundIdValue = "";
    this.selectedReturnIdValue = "";
    this.outboundPrice = 0;
    this.returnPrice = 0;
  }
  static {
    this.targets = ["outboundFlight", "returnFlight", "submitButton", "selectedOutboundId", "selectedReturnId", "totalPrice"];
  }
  connect() {
    this.updateSubmitButton();
  }
  selectOutbound(event2) {
    event2.preventDefault();
    const card = event2.currentTarget.closest("[data-flight-id]");
    if (!card) return;
    const flightId = card.dataset.flightId || "";
    const price = parseFloat(card.dataset.price || "0");
    this.outboundFlightTargets.forEach((el) => {
      el.classList.remove("ring-2", "ring-blue-500", "bg-blue-50");
    });
    card.classList.add("ring-2", "ring-blue-500", "bg-blue-50");
    this.selectedOutboundIdValue = flightId;
    this.outboundPrice = price;
    if (this.hasSelectedOutboundIdTarget) {
      this.selectedOutboundIdTarget.value = flightId;
    }
    this.updateSubmitButton();
  }
  selectReturn(event2) {
    event2.preventDefault();
    const card = event2.currentTarget.closest("[data-flight-id]");
    if (!card) return;
    const flightId = card.dataset.flightId || "";
    const price = parseFloat(card.dataset.price || "0");
    this.returnFlightTargets.forEach((el) => {
      el.classList.remove("ring-2", "ring-blue-500", "bg-blue-50");
    });
    card.classList.add("ring-2", "ring-blue-500", "bg-blue-50");
    this.selectedReturnIdValue = flightId;
    this.returnPrice = price;
    if (this.hasSelectedReturnIdTarget) {
      this.selectedReturnIdTarget.value = flightId;
    }
    this.updateSubmitButton();
  }
  updateSubmitButton() {
    if (!this.hasSubmitButtonTarget) return;
    const bothSelected = this.selectedOutboundIdValue && this.selectedReturnIdValue;
    if (bothSelected) {
      this.submitButtonTarget.classList.remove("opacity-50", "cursor-not-allowed");
      this.submitButtonTarget.classList.add("cursor-pointer");
      this.submitButtonTarget.removeAttribute("disabled");
      if (this.hasTotalPriceTarget) {
        const total = this.outboundPrice + this.returnPrice;
        this.totalPriceTarget.textContent = `\xA5${total.toFixed(0)}`;
      }
    } else {
      this.submitButtonTarget.classList.add("opacity-50", "cursor-not-allowed");
      this.submitButtonTarget.classList.remove("cursor-pointer");
      this.submitButtonTarget.setAttribute("disabled", "disabled");
      if (this.hasTotalPriceTarget) {
        this.totalPriceTarget.textContent = "\u8BF7\u9009\u62E9\u53BB\u7A0B\u548C\u8FD4\u7A0B\u822A\u73ED";
      }
    }
  }
  submit(event2) {
    if (!this.selectedOutboundIdValue || !this.selectedReturnIdValue) {
      event2.preventDefault();
      alert("\u8BF7\u9009\u62E9\u53BB\u7A0B\u548C\u8FD4\u7A0B\u822A\u73ED");
      return;
    }
  }
};

// app/javascript/controllers/train_search_controller.ts
var train_search_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedDateObj = /* @__PURE__ */ new Date();
  }
  static {
    this.targets = [
      "departureCity",
      "arrivalCity",
      "departureCityInput",
      "arrivalCityInput",
      "selectedDate",
      "dateInput",
      "studentTicket",
      "highSpeedOnly"
    ];
  }
  static {
    this.values = {
      departureCity: String,
      arrivalCity: String,
      date: String
    };
  }
  connect() {
    console.log("TrainSearch connected");
    if (!this.departureCityValue) this.departureCityValue = "\u5317\u4EAC\u5E02";
    if (!this.arrivalCityValue) this.arrivalCityValue = "\u676D\u5DDE\u5E02";
    if (!this.dateValue) {
      this.selectedDateObj = /* @__PURE__ */ new Date();
      this.selectedDateObj.setDate(this.selectedDateObj.getDate() + 1);
      this.dateValue = this.formatDate(this.selectedDateObj);
    } else {
      this.selectedDateObj = new Date(this.dateValue);
    }
    this.updateCityDisplay();
    this.updateDateDisplay();
  }
  // Switch cities
  switchCities() {
    const temp = this.departureCityValue;
    this.departureCityValue = this.arrivalCityValue;
    this.arrivalCityValue = temp;
    this.updateCityDisplay();
  }
  // Update city display
  updateCityDisplay() {
    this.departureCityTarget.textContent = this.departureCityValue;
    this.arrivalCityTarget.textContent = this.arrivalCityValue;
    this.departureCityInputTarget.value = this.departureCityValue;
    this.arrivalCityInputTarget.value = this.arrivalCityValue;
  }
  // Update date display
  updateDateDisplay() {
    const month = this.selectedDateObj.getMonth() + 1;
    const day = this.selectedDateObj.getDate();
    const dayName = this.getDayName(this.selectedDateObj);
    this.selectedDateTarget.innerHTML = `
      ${month}<span class="text-sm">\u6708</span>${day}<span class="text-sm">\u65E5</span> <span class="text-sm">${dayName}</span>
    `;
    this.dateInputTarget.value = this.dateValue;
  }
  // Get day name in Chinese
  getDayName(date) {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    const targetDate = new Date(date);
    targetDate.setHours(0, 0, 0, 0);
    const diffTime = targetDate.getTime() - today.getTime();
    const diffDays = Math.round(diffTime / (1e3 * 60 * 60 * 24));
    if (diffDays === 0) return "\u4ECA\u5929";
    if (diffDays === 1) return "\u660E\u5929";
    if (diffDays === 2) return "\u540E\u5929";
    const weekdays = ["\u5468\u65E5", "\u5468\u4E00", "\u5468\u4E8C", "\u5468\u4E09", "\u5468\u56DB", "\u5468\u4E94", "\u5468\u516D"];
    return weekdays[date.getDay()];
  }
  // Format date as YYYY-MM-DD
  formatDate(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    return `${year}-${month}-${day}`;
  }
  // Toggle student ticket
  toggleStudentTicket() {
    console.log("Student ticket toggled:", this.studentTicketTarget.checked);
  }
  // Toggle high speed only
  toggleHighSpeedOnly() {
    console.log("High speed only toggled:", this.highSpeedOnlyTarget.checked);
  }
  // Handle search form submission (Turbo handles actual submission)
  // This is just for any pre-submission UI feedback if needed
  search() {
    console.log("Searching trains:", {
      from: this.departureCityValue,
      to: this.arrivalCityValue,
      date: this.dateValue
    });
  }
};

// app/javascript/controllers/train_list_controller.ts
var train_list_controller_default = class extends Controller {
  static {
    this.targets = [
      "trainItem"
    ];
  }
  connect() {
    console.log("TrainList connected");
  }
  disconnect() {
    console.log("TrainList disconnected");
  }
  toggleFilter(event2) {
    const button = event2.currentTarget;
    button.classList.toggle("bg-primary");
    button.classList.toggle("text-primary-foreground");
    button.classList.toggle("bg-surface-elevated");
    button.classList.toggle("text-foreground");
  }
  toggleStation(event2) {
    const button = event2.currentTarget;
    button.classList.toggle("bg-primary");
    button.classList.toggle("text-primary-foreground");
    button.classList.toggle("bg-surface-elevated");
    button.classList.toggle("text-foreground");
  }
  showAdvancedFilters() {
    console.log("Show advanced filters");
  }
};

// app/javascript/controllers/train_city_selector_controller.ts
var train_city_selector_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectionType = "departure";
  }
  static {
    this.targets = [
      "modal",
      "departure",
      "destination",
      "departureCityInput",
      "destinationCityInput",
      "tabDeparture",
      "tabDestination",
      "searchInput",
      "domesticList",
      "internationalList",
      "historySection",
      "currentCity"
    ];
  }
  static {
    this.values = {
      departureCity: String,
      destinationCity: String
    };
  }
  connect() {
    console.log("TrainCitySelector connected");
    if (!this.departureCityValue) this.departureCityValue = "\u5317\u4EAC";
    if (!this.destinationCityValue) this.destinationCityValue = "\u676D\u5DDE";
    this.departureCityInputTarget.value = this.departureCityValue;
    this.destinationCityInputTarget.value = this.destinationCityValue;
  }
  // Open modal for departure city selection
  openDeparture() {
    if (!this.hasModalTarget) {
      console.log("TrainCitySelector: No modal available, skipping");
      return;
    }
    this.selectionType = "departure";
    this.updateModalTitle();
    this.showModal();
  }
  // Open modal for destination city selection
  openDestination() {
    if (!this.hasModalTarget) {
      console.log("TrainCitySelector: No modal available, skipping");
      return;
    }
    this.selectionType = "destination";
    this.updateModalTitle();
    this.showModal();
  }
  // Show modal
  showModal() {
    if (!this.hasModalTarget) return;
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // Close modal
  closeModal() {
    if (!this.hasModalTarget) return;
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
    this.clearSearch();
  }
  // Select city
  selectCity(event2) {
    const button = event2.currentTarget;
    const cityName = button.dataset.cityName || "";
    if (this.selectionType === "departure") {
      this.departureCityValue = cityName;
      this.departureTarget.textContent = cityName;
      this.departureCityInputTarget.value = cityName;
    } else {
      this.destinationCityValue = cityName;
      this.destinationTarget.textContent = cityName;
      this.destinationCityInputTarget.value = cityName;
    }
    this.closeModal();
  }
  // Switch cities
  switchCities() {
    const temp = this.departureCityValue;
    this.departureCityValue = this.destinationCityValue;
    this.destinationCityValue = temp;
    this.departureTarget.textContent = this.departureCityValue;
    this.destinationTarget.textContent = this.destinationCityValue;
    this.departureCityInputTarget.value = this.departureCityValue;
    this.destinationCityInputTarget.value = this.destinationCityValue;
  }
  // Switch between domestic and international tabs
  showDomestic() {
    this.domesticListTarget.classList.remove("hidden");
    this.internationalListTarget.classList.add("hidden");
    this.tabDepartureTarget.classList.add("active-tab");
    this.tabDestinationTarget.classList.remove("active-tab");
  }
  showInternational() {
    this.domesticListTarget.classList.add("hidden");
    this.internationalListTarget.classList.remove("hidden");
    this.tabDepartureTarget.classList.remove("active-tab");
    this.tabDestinationTarget.classList.add("active-tab");
  }
  // Search cities
  search() {
    const query = this.searchInputTarget.value.toLowerCase().trim();
    if (query === "") {
      this.clearSearch();
      return;
    }
    this.historySectionTarget.classList.add("hidden");
    this.filterCities(this.domesticListTarget, query);
    if (!this.internationalListTarget.classList.contains("hidden")) {
      this.filterCities(this.internationalListTarget, query);
    }
  }
  // Filter cities helper
  filterCities(listTarget, query) {
    const cityButtons = listTarget.querySelectorAll("[data-city-name]");
    cityButtons.forEach((button) => {
      const cityName = button.dataset.cityName?.toLowerCase() || "";
      const cityPinyin = button.dataset.cityPinyin?.toLowerCase() || "";
      if (cityName.includes(query) || cityPinyin.includes(query)) {
        button.classList.remove("hidden");
      } else {
        button.classList.add("hidden");
      }
    });
  }
  // Clear search
  clearSearch() {
    this.searchInputTarget.value = "";
    this.historySectionTarget.classList.remove("hidden");
    const allButtons = this.element.querySelectorAll("[data-city-name]");
    allButtons.forEach((button) => {
      button.classList.remove("hidden");
    });
  }
  // Update modal title based on selection type
  updateModalTitle() {
    if (!this.hasModalTarget) return;
    const titleElement = this.modalTarget.querySelector("[data-modal-title]");
    if (titleElement) {
      titleElement.textContent = this.selectionType === "departure" ? "\u5355\u9009\u51FA\u53D1\u5730" : "\u5355\u9009\u76EE\u7684\u5730";
    }
  }
  // Jump to letter section
  jumpToLetter(event2) {
    const button = event2.currentTarget;
    const letter = button.dataset.letter || "";
    const section = this.domesticListTarget.querySelector(`[data-letter-section="${letter}"]`);
    if (section) {
      section.scrollIntoView({ behavior: "smooth", block: "start" });
    }
  }
};

// app/javascript/controllers/infinite_scroll_controller.ts
var infinite_scroll_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.observer = null;
    this.isLoading = false;
  }
  static {
    this.targets = [
      "trigger",
      // 
      "container",
      // 
      "loading"
      // 
    ];
  }
  static {
    this.values = {
      page: Number,
      // 
      hasMore: Boolean
      // 
    };
  }
  connect() {
    console.log("InfiniteScroll connected, initial page:", this.pageValue, "hasMore:", this.hasMoreValue);
    if (this.hasMoreValue) {
      this.setupObserver();
    }
  }
  disconnect() {
    console.log("InfiniteScroll disconnected");
    if (this.observer) {
      this.observer.disconnect();
      this.observer = null;
    }
  }
  setupObserver() {
    this.observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting && this.hasMoreValue && !this.isLoading) {
            this.loadMore();
          }
        });
      },
      {
        root: null,
        // viewportroot
        rootMargin: "100px",
        // 100px
        threshold: 0.1
        // 10%
      }
    );
    this.observer.observe(this.triggerTarget);
  }
  async loadMore() {
    if (this.isLoading || !this.hasMoreValue) {
      return;
    }
    this.isLoading = true;
    this.showLoading();
    console.log("Loading more trips, page:", this.pageValue);
    try {
      const url = `/trips/load_more?page=${this.pageValue}`;
      const response = await fetch(url, {
        headers: {
          "Accept": "text/vnd.turbo-stream.html",
          "X-Requested-With": "XMLHttpRequest"
        }
      });
      if (response.ok) {
        const html = await response.text();
        const streamElement = document.createElement("div");
        streamElement.innerHTML = html;
        const turboStreams = streamElement.querySelectorAll("turbo-stream");
        turboStreams.forEach((stream) => {
          document.body.appendChild(stream);
        });
        this.pageValue++;
        if (html.includes("\u5DF2\u663E\u793A\u5168\u90E8\u884C\u7A0B")) {
          this.hasMoreValue = false;
          if (this.observer) {
            this.observer.disconnect();
          }
        }
        console.log("Loaded more trips, new page:", this.pageValue, "hasMore:", this.hasMoreValue);
      }
    } catch (error3) {
      console.error("Failed to load more trips:", error3);
    } finally {
      this.isLoading = false;
      this.hideLoading();
    }
  }
  showLoading() {
    this.loadingTarget.classList.remove("hidden");
  }
  hideLoading() {
    this.loadingTarget.classList.add("hidden");
  }
};

// app/javascript/controllers/deep_travel_controller.ts
var deep_travel_controller_default = class extends Controller {
  static {
    this.targets = ["video", "videoContainer", "tab", "content"];
  }
  connect() {
    console.log("Deep travel controller connected");
  }
  playVideo(event2) {
    const video = event2.currentTarget;
    if (video.paused) {
      video.play();
    } else {
      video.pause();
    }
  }
  toggleFullscreen(event2) {
    const container = event2.currentTarget.closest('[data-deep-travel-target="videoContainer"]');
    if (!document.fullscreenElement) {
      container.requestFullscreen();
    } else {
      document.exitFullscreen();
    }
  }
  switchTab(event2) {
    const clickedTab = event2.currentTarget;
    const tabName = clickedTab.dataset.tab;
    this.tabTargets.forEach((tab) => {
      if (tab === clickedTab) {
        tab.classList.add("text-gray-900", "border-b-2", "border-yellow-400", "bg-yellow-50");
        tab.classList.remove("text-gray-600");
      } else {
        tab.classList.remove("text-gray-900", "border-b-2", "border-yellow-400", "bg-yellow-50");
        tab.classList.add("text-gray-600");
      }
    });
    this.contentTargets.forEach((content) => {
      if (content.dataset.content === tabName) {
        content.classList.remove("hidden");
      } else {
        content.classList.add("hidden");
      }
    });
  }
};

// app/javascript/controllers/multi_city_controller.ts
var multi_city_controller_default = class extends Controller {
  static {
    this.targets = ["segmentsContainer", "segment", "addButton", "hiddenSegmentsInput"];
  }
  static {
    this.values = {
      segments: { type: Array, default: [] },
      switchIconUrl: String
    };
  }
  connect() {
    console.log("MultiCity controller connected");
    if (!this.hasSegmentsContainerTarget) {
      console.log("MultiCity controller: segmentsContainer not available yet, skipping initialization");
      document.addEventListener("trip-type:multi-city-shown", this.handleMultiCityShown.bind(this));
      return;
    }
    this.initializeSegments();
    document.addEventListener("city-selector:city-selected", this.handleCitySelected.bind(this));
    console.log("Multi-city: Added event listener for city-selector:city-selected");
    document.addEventListener("date-picker:date-selected", this.handleDateSelected.bind(this));
    console.log("Multi-city: Added event listener for date-picker:date-selected");
  }
  disconnect() {
    document.removeEventListener("city-selector:city-selected", this.handleCitySelected.bind(this));
    document.removeEventListener("date-picker:date-selected", this.handleDateSelected.bind(this));
    document.removeEventListener("trip-type:multi-city-shown", this.handleMultiCityShown.bind(this));
  }
  // Stimulus value changed callback - automatically called when segmentsValue changes
  segmentsValueChanged() {
    console.log("Multi-city: segmentsValueChanged triggered");
    if (this.hasSegmentsContainerTarget) {
      this.render();
    }
  }
  // Handle when multi-city form is shown
  handleMultiCityShown() {
    console.log("Multi-city: Form is now visible, initializing...");
    if (this.hasSegmentsContainerTarget) {
      this.initializeSegments();
      document.addEventListener("city-selector:city-selected", this.handleCitySelected.bind(this));
      console.log("Multi-city: Added event listener for city-selector:city-selected");
      document.addEventListener("date-picker:date-selected", this.handleDateSelected.bind(this));
      console.log("Multi-city: Added event listener for date-picker:date-selected");
    }
  }
  // Initialize the segments
  initializeSegments() {
    console.log("Multi-city: Initializing segments");
    if (this.segmentsValue.length === 0) {
      this.segmentsValue = [
        {
          id: this.generateId(),
          departureCity: "\u6B66\u6C49",
          destinationCity: "\u6DF1\u5733",
          date: this.formatDate(/* @__PURE__ */ new Date())
        },
        {
          id: this.generateId(),
          departureCity: "\u5E7F\u5DDE",
          destinationCity: "\u676D\u5DDE",
          date: this.formatDate(new Date(Date.now() + 3 * 24 * 60 * 60 * 1e3))
          // 3
        }
      ];
    }
    this.render();
    this.updateAddButtonState();
  }
  // Handle city selection from city selector
  handleCitySelected(event2) {
    const customEvent = event2;
    console.log("Multi-city: Received city-selector:city-selected event", customEvent.detail);
    const { segmentId, cityType, cityName } = customEvent.detail;
    console.log("Multi-city: Current segments before update:", JSON.stringify(this.segmentsValue));
    const segmentIndex = this.segmentsValue.findIndex((seg) => seg.id === segmentId);
    if (segmentIndex !== -1) {
      console.log(`Multi-city: Found segment ${segmentId}, updating ${cityType} to ${cityName}`);
      this.segmentsValue = this.segmentsValue.map((seg, index) => {
        if (index === segmentIndex) {
          console.log("Multi-city: Segment before update:", JSON.stringify(seg));
          const updatedSegment = {
            ...seg,
            departureCity: cityType === "departure" ? cityName : seg.departureCity,
            destinationCity: cityType === "destination" ? cityName : seg.destinationCity
          };
          console.log("Multi-city: Segment after update:", JSON.stringify(updatedSegment));
          return updatedSegment;
        }
        return seg;
      });
      console.log("Multi-city: All segments after update:", JSON.stringify(this.segmentsValue));
      console.log("Multi-city: Segment updated, render will be triggered by valueChanged");
    } else {
      console.warn("Multi-city: Segment not found:", segmentId);
      console.warn("Multi-city: Available segment IDs:", this.segmentsValue.map((s) => s.id));
    }
  }
  // Handle date selection from date picker
  handleDateSelected(event2) {
    console.log("Multi-city: Received date-picker:date-selected event", event2.detail);
    const { segmentId, date } = event2.detail;
    const segmentIndex = this.segmentsValue.findIndex((seg) => seg.id === segmentId);
    if (segmentIndex !== -1) {
      console.log(`Multi-city: Updating segment ${segmentId} date to ${date}`);
      this.segmentsValue = this.segmentsValue.map((seg, index) => {
        if (index === segmentIndex) {
          return { ...seg, date };
        }
        return seg;
      });
      console.log("Multi-city: Segment date updated");
    } else {
      console.warn("Multi-city: Segment not found:", segmentId);
    }
  }
  // 
  addSegment() {
    if (this.segmentsValue.length >= 8) {
      alert("\u6700\u591A\u652F\u63018\u4E2A\u884C\u7A0B\u6BB5");
      return;
    }
    const lastSegment = this.segmentsValue[this.segmentsValue.length - 1];
    const newSegment = {
      id: this.generateId(),
      departureCity: lastSegment ? lastSegment.destinationCity : "\u5317\u4EAC",
      destinationCity: "\u4E0A\u6D77",
      date: lastSegment ? this.formatDate(new Date(new Date(lastSegment.date).getTime() + 24 * 60 * 60 * 1e3)) : this.formatDate(/* @__PURE__ */ new Date())
    };
    this.segmentsValue = [...this.segmentsValue, newSegment];
    this.render();
    this.updateAddButtonState();
  }
  // 
  removeSegment(event2) {
    const button = event2.currentTarget;
    const segmentId = button.dataset.segmentId;
    if (this.segmentsValue.length <= 2) {
      alert("\u81F3\u5C11\u9700\u8981\u4FDD\u75592\u4E2A\u884C\u7A0B\u6BB5");
      return;
    }
    this.segmentsValue = this.segmentsValue.filter((seg) => seg.id !== segmentId);
    this.render();
    this.updateAddButtonState();
  }
  // 
  updateCity(event2) {
    const input = event2.currentTarget;
    const segmentId = input.dataset.segmentId;
    const cityType = input.dataset.cityType;
    const segment = this.segmentsValue.find((seg) => seg.id === segmentId);
    if (segment) {
      if (cityType === "departure") {
        segment.departureCity = input.value;
      } else if (cityType === "destination") {
        segment.destinationCity = input.value;
      }
      this.updateHiddenInput();
    }
  }
  // 
  updateDate(event2) {
    const input = event2.currentTarget;
    const segmentId = input.dataset.segmentId;
    const segment = this.segmentsValue.find((seg) => seg.id === segmentId);
    if (segment) {
      segment.date = input.value;
      this.updateHiddenInput();
    }
  }
  // 
  openCitySelector(event2) {
    const button = event2.currentTarget;
    const segmentId = button.dataset.segmentId;
    const cityType = button.dataset.cityType;
    console.log(`Multi-city: Opening city selector for segment ${segmentId}, cityType ${cityType}`);
    const customEvent = new CustomEvent("multi-city:open-city-selector", {
      detail: { segmentId, cityType },
      bubbles: true
    });
    this.element.dispatchEvent(customEvent);
  }
  // 
  openDatePicker(event2) {
    const button = event2.currentTarget;
    const segmentId = button.dataset.segmentId;
    const customEvent = new CustomEvent("multi-city:open-date-picker", {
      detail: { segmentId },
      bubbles: true
    });
    this.element.dispatchEvent(customEvent);
  }
  // 
  render() {
    if (!this.hasSegmentsContainerTarget) {
      console.log("MultiCity: Cannot render, segmentsContainer not available");
      return;
    }
    console.log("Multi-city: render() called with segments:", JSON.stringify(this.segmentsValue));
    this.segmentsContainerTarget.innerHTML = "";
    this.segmentsValue.forEach((segment, index) => {
      console.log(`Multi-city: Creating element for segment ${index}:`, JSON.stringify(segment));
      const segmentElement = this.createSegmentElement(segment, index);
      this.segmentsContainerTarget.appendChild(segmentElement);
    });
    this.updateHiddenInput();
  }
  // 
  createSegmentElement(segment, index) {
    console.log(`Multi-city: createSegmentElement called for segment ${segment.id}:`, {
      departureCity: segment.departureCity,
      destinationCity: segment.destinationCity,
      date: segment.date
    });
    const div = document.createElement("div");
    div.className = "border-b border-gray-100 py-4";
    div.dataset.multiCityTarget = "segment";
    const date = new Date(segment.date);
    const weekday = this.getWeekday(date);
    div.innerHTML = `
      <div class="flex items-center justify-between mb-3">
        <div class="flex items-center gap-2">
          <span class="inline-flex items-center justify-center w-5 h-5 rounded-full bg-blue-500 text-white text-xs font-bold">
            ${index + 1}
          </span>
          <span class="text-sm text-gray-500">\u7B2C${this.numberToChinese(index + 1)}\u7A0B</span>
        </div>
        ${this.segmentsValue.length > 2 ? `
          <button 
            type="button"
            data-action="click->multi-city#removeSegment"
            data-segment-id="${segment.id}"
            class="text-gray-400 hover:text-red-500">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd"
                d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0
                  -1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                clip-rule="evenodd"/>
            </svg>
          </button>
        ` : ""}
      </div>

      <div class="flex items-center justify-between">
        <button 
          type="button"
          data-action="click->multi-city#openCitySelector"
          data-segment-id="${segment.id}"
          data-city-type="departure"
          class="flex-1 text-left">
          <div class="text-[32px] font-bold leading-tight">${segment.departureCity}</div>
        </button>
        
        <div class="mx-4 flex items-center justify-center">
          <img src="${this.switchIconUrlValue}" class="w-12 h-12" alt="\u5207\u6362" />
        </div>
        
        <button 
          type="button"
          data-action="click->multi-city#openCitySelector"
          data-segment-id="${segment.id}"
          data-city-type="destination"
          class="flex-1 text-right">
          <div class="text-[32px] font-bold leading-tight">${segment.destinationCity}</div>
        </button>
      </div>

      <button 
        type="button"
        data-action="click->multi-city#openDatePicker"
        data-segment-id="${segment.id}"
        class="mt-2 text-left">
        <div class="text-lg font-medium text-gray-700">
          ${date.getMonth() + 1}\u6708${date.getDate()}\u65E5 ${weekday}
        </div>
      </button>
    `;
    console.log(`Multi-city: Created HTML for segment ${segment.id}, departure: ${segment.departureCity}, destination: ${segment.destinationCity}`);
    return div;
  }
  // 
  updateAddButtonState() {
    if (!this.hasAddButtonTarget) {
      console.log("MultiCity: Cannot update add button state, button not available");
      return;
    }
    if (this.segmentsValue.length >= 8) {
      this.addButtonTarget.classList.add("opacity-50", "cursor-not-allowed");
      this.addButtonTarget.setAttribute("disabled", "true");
    } else {
      this.addButtonTarget.classList.remove("opacity-50", "cursor-not-allowed");
      this.addButtonTarget.removeAttribute("disabled");
    }
  }
  // 
  updateHiddenInput() {
    if (this.hasHiddenSegmentsInputTarget) {
      this.hiddenSegmentsInputTarget.value = JSON.stringify(this.segmentsValue);
    }
  }
  // ID
  generateId() {
    return `segment-${Date.now()}-${Math.random().toString(36).substring(2, 11)}`;
  }
  // 
  formatDate(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    return `${year}-${month}-${day}`;
  }
  // 
  getWeekday(date) {
    const weekdays = ["\u5468\u65E5", "\u5468\u4E00", "\u5468\u4E8C", "\u5468\u4E09", "\u5468\u56DB", "\u5468\u4E94", "\u5468\u516D"];
    return weekdays[date.getDay()];
  }
  // 
  numberToChinese(num) {
    const chinese = ["\u4E00", "\u4E8C", "\u4E09", "\u56DB", "\u4E94", "\u516D", "\u4E03", "\u516B"];
    return chinese[num - 1] || num.toString();
  }
};

// app/javascript/controllers/flight_filter_controller.ts
var flight_filter_controller_default = class extends Controller {
  static {
    this.targets = [
      "modal",
      "overlay",
      "flightPreferenceTab",
      "airlineCompanyTab",
      "airportTab",
      "departureTimeTab",
      "transferCityTab",
      "transferTimesTab",
      "transferDurationTab",
      "totalDurationTab",
      "seatClassTab",
      "aircraftModelTab",
      "ticketCancellationTab",
      "flightPreferenceSection",
      "airlineCompanySection",
      "airportSection",
      "departureTimeSection",
      "transferCitySection",
      "transferTimesSection",
      "transferDurationSection",
      "totalDurationSection",
      "seatClassSection",
      "aircraftModelSection",
      "ticketCancellationSection",
      "resultCount",
      "directFlightCheckbox",
      "noTransitCheckbox",
      "includeCheckedLuggageCheckbox",
      "noSharedFlightCheckbox",
      "discountPriceCheckbox",
      "resetButton",
      "confirmButton",
      "filterBadge",
      "selectedFiltersContainer",
      "selectedFiltersList",
      // Card targets for grid layout
      "directFlightCard",
      "checkedLuggageCard",
      "noSharedFlightCard",
      "noTransitCard",
      "discountPriceCard",
      // Quick filter button targets
      "quickDirectFlight",
      "quickNoSharedFlight",
      "quickCheckedLuggage",
      "quickNoTransit",
      "quickDiscountPrice"
    ];
  }
  connect() {
    console.log("FlightFilter controller connected");
    this.currentTab = "flightPreference";
    this.initializeFilters();
  }
  initializeFilters() {
    this.filters = {
      directFlight: false,
      noTransit: false,
      includeCheckedLuggage: false,
      noSharedFlight: false,
      discountPrice: false,
      airlines: /* @__PURE__ */ new Set(),
      departureAirports: /* @__PURE__ */ new Set(),
      arrivalAirports: /* @__PURE__ */ new Set(),
      departureTimeRanges: /* @__PURE__ */ new Set(),
      aircraftModels: /* @__PURE__ */ new Set()
    };
  }
  openModal() {
    this.modalTarget.classList.remove("hidden");
    this.overlayTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  closeModal() {
    this.modalTarget.classList.add("hidden");
    this.overlayTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  selectTab(event2) {
    const button = event2.currentTarget;
    const tabName = button.dataset.tab;
    if (!tabName) return;
    this.currentTab = tabName;
    const allTabs = [
      this.flightPreferenceTabTarget,
      this.airlineCompanyTabTarget,
      this.airportTabTarget,
      this.departureTimeTabTarget,
      this.transferCityTabTarget,
      this.transferTimesTabTarget,
      this.transferDurationTabTarget,
      this.totalDurationTabTarget,
      this.seatClassTabTarget,
      this.aircraftModelTabTarget,
      this.ticketCancellationTabTarget
    ];
    allTabs.forEach((tab) => {
      tab.classList.remove("border-blue-500", "text-blue-600", "font-bold");
      tab.classList.add("text-gray-600");
    });
    button.classList.add("border-blue-500", "text-blue-600", "font-bold");
    button.classList.remove("text-gray-600");
    const allSections = [
      this.flightPreferenceSectionTarget,
      this.airlineCompanySectionTarget,
      this.airportSectionTarget,
      this.departureTimeSectionTarget,
      this.transferCitySectionTarget,
      this.transferTimesSectionTarget,
      this.transferDurationSectionTarget,
      this.totalDurationSectionTarget,
      this.seatClassSectionTarget,
      this.aircraftModelSectionTarget,
      this.ticketCancellationSectionTarget
    ];
    allSections.forEach((section) => section.classList.add("hidden"));
    const sectionMap = {
      flightPreference: this.flightPreferenceSectionTarget,
      airlineCompany: this.airlineCompanySectionTarget,
      airport: this.airportSectionTarget,
      departureTime: this.departureTimeSectionTarget,
      transferCity: this.transferCitySectionTarget,
      transferTimes: this.transferTimesSectionTarget,
      transferDuration: this.transferDurationSectionTarget,
      totalDuration: this.totalDurationSectionTarget,
      seatClass: this.seatClassSectionTarget,
      aircraftModel: this.aircraftModelSectionTarget,
      ticketCancellation: this.ticketCancellationSectionTarget
    };
    const targetSection = sectionMap[tabName];
    if (targetSection) {
      targetSection.classList.remove("hidden");
    }
  }
  // Flight preference toggles
  toggleDirectFlight() {
    this.directFlightCheckboxTarget.checked = !this.directFlightCheckboxTarget.checked;
    this.filters.directFlight = this.directFlightCheckboxTarget.checked;
    if (this.directFlightCardTarget) {
      if (this.filters.directFlight) {
        this.directFlightCardTarget.classList.remove("bg-[#f6f7f9]");
        this.directFlightCardTarget.classList.add("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        if (!this.directFlightCardTarget.querySelector(".checkmark")) {
          const checkmark = this.createCheckmark();
          this.directFlightCardTarget.appendChild(checkmark);
        }
      } else {
        this.directFlightCardTarget.classList.add("bg-[#f6f7f9]");
        this.directFlightCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        const checkmark = this.directFlightCardTarget.querySelector(".checkmark");
        if (checkmark) checkmark.remove();
      }
    }
    if (this.quickDirectFlightTarget) {
      if (this.filters.directFlight) {
        this.quickDirectFlightTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickDirectFlightTarget.classList.remove("border-gray-300");
      } else {
        this.quickDirectFlightTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickDirectFlightTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  toggleNoTransit() {
    this.noTransitCheckboxTarget.checked = !this.noTransitCheckboxTarget.checked;
    this.filters.noTransit = this.noTransitCheckboxTarget.checked;
    if (this.noTransitCardTarget) {
      if (this.filters.noTransit) {
        this.noTransitCardTarget.classList.remove("bg-[#f6f7f9]");
        this.noTransitCardTarget.classList.add("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        if (!this.noTransitCardTarget.querySelector(".checkmark")) {
          const checkmark = this.createCheckmark();
          this.noTransitCardTarget.appendChild(checkmark);
        }
      } else {
        this.noTransitCardTarget.classList.add("bg-[#f6f7f9]");
        this.noTransitCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        const checkmark = this.noTransitCardTarget.querySelector(".checkmark");
        if (checkmark) checkmark.remove();
      }
    }
    if (this.quickNoTransitTarget) {
      if (this.filters.noTransit) {
        this.quickNoTransitTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickNoTransitTarget.classList.remove("border-gray-300");
      } else {
        this.quickNoTransitTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickNoTransitTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  toggleCheckedLuggage() {
    this.includeCheckedLuggageCheckboxTarget.checked = !this.includeCheckedLuggageCheckboxTarget.checked;
    this.filters.includeCheckedLuggage = this.includeCheckedLuggageCheckboxTarget.checked;
    if (this.checkedLuggageCardTarget) {
      if (this.filters.includeCheckedLuggage) {
        this.checkedLuggageCardTarget.classList.remove("bg-[#f6f7f9]");
        this.checkedLuggageCardTarget.classList.add("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        if (!this.checkedLuggageCardTarget.querySelector(".checkmark")) {
          const checkmark = this.createCheckmark();
          this.checkedLuggageCardTarget.appendChild(checkmark);
        }
      } else {
        this.checkedLuggageCardTarget.classList.add("bg-[#f6f7f9]");
        this.checkedLuggageCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        const checkmark = this.checkedLuggageCardTarget.querySelector(".checkmark");
        if (checkmark) checkmark.remove();
      }
    }
    if (this.quickCheckedLuggageTarget) {
      if (this.filters.includeCheckedLuggage) {
        this.quickCheckedLuggageTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickCheckedLuggageTarget.classList.remove("border-gray-300");
      } else {
        this.quickCheckedLuggageTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickCheckedLuggageTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  toggleNoSharedFlight() {
    this.noSharedFlightCheckboxTarget.checked = !this.noSharedFlightCheckboxTarget.checked;
    this.filters.noSharedFlight = this.noSharedFlightCheckboxTarget.checked;
    if (this.noSharedFlightCardTarget) {
      if (this.filters.noSharedFlight) {
        this.noSharedFlightCardTarget.classList.remove("bg-[#f6f7f9]");
        this.noSharedFlightCardTarget.classList.add("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        if (!this.noSharedFlightCardTarget.querySelector(".checkmark")) {
          const checkmark = this.createCheckmark();
          this.noSharedFlightCardTarget.appendChild(checkmark);
        }
      } else {
        this.noSharedFlightCardTarget.classList.add("bg-[#f6f7f9]");
        this.noSharedFlightCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        const checkmark = this.noSharedFlightCardTarget.querySelector(".checkmark");
        if (checkmark) checkmark.remove();
      }
    }
    if (this.quickNoSharedFlightTarget) {
      if (this.filters.noSharedFlight) {
        this.quickNoSharedFlightTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickNoSharedFlightTarget.classList.remove("border-gray-300");
      } else {
        this.quickNoSharedFlightTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickNoSharedFlightTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  toggleDiscountPrice() {
    this.discountPriceCheckboxTarget.checked = !this.discountPriceCheckboxTarget.checked;
    this.filters.discountPrice = this.discountPriceCheckboxTarget.checked;
    if (this.discountPriceCardTarget) {
      if (this.filters.discountPrice) {
        this.discountPriceCardTarget.classList.remove("bg-[#f6f7f9]");
        this.discountPriceCardTarget.classList.add("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        if (!this.discountPriceCardTarget.querySelector(".checkmark")) {
          const checkmark = this.createCheckmark();
          this.discountPriceCardTarget.appendChild(checkmark);
        }
      } else {
        this.discountPriceCardTarget.classList.add("bg-[#f6f7f9]");
        this.discountPriceCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
        const checkmark = this.discountPriceCardTarget.querySelector(".checkmark");
        if (checkmark) checkmark.remove();
      }
    }
    if (this.quickDiscountPriceTarget) {
      if (this.filters.discountPrice) {
        this.quickDiscountPriceTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickDiscountPriceTarget.classList.remove("border-gray-300");
      } else {
        this.quickDiscountPriceTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickDiscountPriceTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  // Quick filter button actions
  toggleQuickDirectFlight() {
    this.filters.directFlight = !this.filters.directFlight;
    this.directFlightCheckboxTarget.checked = this.filters.directFlight;
    if (this.quickDirectFlightTarget) {
      if (this.filters.directFlight) {
        this.quickDirectFlightTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickDirectFlightTarget.classList.remove("border-gray-300");
      } else {
        this.quickDirectFlightTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickDirectFlightTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  toggleQuickNoSharedFlight() {
    this.filters.noSharedFlight = !this.filters.noSharedFlight;
    this.noSharedFlightCheckboxTarget.checked = this.filters.noSharedFlight;
    if (this.quickNoSharedFlightTarget) {
      if (this.filters.noSharedFlight) {
        this.quickNoSharedFlightTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickNoSharedFlightTarget.classList.remove("border-gray-300");
      } else {
        this.quickNoSharedFlightTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickNoSharedFlightTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  toggleQuickCheckedLuggage() {
    this.filters.includeCheckedLuggage = !this.filters.includeCheckedLuggage;
    this.includeCheckedLuggageCheckboxTarget.checked = this.filters.includeCheckedLuggage;
    if (this.quickCheckedLuggageTarget) {
      if (this.filters.includeCheckedLuggage) {
        this.quickCheckedLuggageTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickCheckedLuggageTarget.classList.remove("border-gray-300");
      } else {
        this.quickCheckedLuggageTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickCheckedLuggageTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  toggleQuickNoTransit() {
    this.filters.noTransit = !this.filters.noTransit;
    this.noTransitCheckboxTarget.checked = this.filters.noTransit;
    if (this.quickNoTransitTarget) {
      if (this.filters.noTransit) {
        this.quickNoTransitTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickNoTransitTarget.classList.remove("border-gray-300");
      } else {
        this.quickNoTransitTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickNoTransitTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  toggleQuickDiscountPrice() {
    this.filters.discountPrice = !this.filters.discountPrice;
    this.discountPriceCheckboxTarget.checked = this.filters.discountPrice;
    if (this.quickDiscountPriceTarget) {
      if (this.filters.discountPrice) {
        this.quickDiscountPriceTarget.classList.add("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickDiscountPriceTarget.classList.remove("border-gray-300");
      } else {
        this.quickDiscountPriceTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
        this.quickDiscountPriceTarget.classList.add("border-gray-300");
      }
    }
    this.updateResultCount();
  }
  // Airline selection
  toggleAirline(event2) {
    const checkbox = event2.target;
    const airline = checkbox.value;
    if (checkbox.checked) {
      this.filters.airlines.add(airline);
    } else {
      this.filters.airlines.delete(airline);
    }
    this.updateResultCount();
  }
  // Airport selection
  toggleDepartureAirport(event2) {
    const checkbox = event2.target;
    const airport = checkbox.value;
    if (checkbox.checked) {
      this.filters.departureAirports.add(airport);
    } else {
      this.filters.departureAirports.delete(airport);
    }
    this.updateResultCount();
  }
  toggleArrivalAirport(event2) {
    const checkbox = event2.target;
    const airport = checkbox.value;
    if (checkbox.checked) {
      this.filters.arrivalAirports.add(airport);
    } else {
      this.filters.arrivalAirports.delete(airport);
    }
    this.updateResultCount();
  }
  // Departure time selection
  toggleDepartureTime(event2) {
    const checkbox = event2.target;
    const timeRange = checkbox.value;
    if (checkbox.checked) {
      this.filters.departureTimeRanges.add(timeRange);
    } else {
      this.filters.departureTimeRanges.delete(timeRange);
    }
    this.updateResultCount();
  }
  // Aircraft model selection
  toggleAircraftModel(event2) {
    const checkbox = event2.target;
    const model = checkbox.value;
    if (checkbox.checked) {
      this.filters.aircraftModels.add(model);
    } else {
      this.filters.aircraftModels.delete(model);
    }
    this.updateResultCount();
  }
  // Reset all filters
  reset() {
    this.initializeFilters();
    this.directFlightCheckboxTarget.checked = false;
    this.noTransitCheckboxTarget.checked = false;
    this.includeCheckedLuggageCheckboxTarget.checked = false;
    this.noSharedFlightCheckboxTarget.checked = false;
    this.discountPriceCheckboxTarget.checked = false;
    const airlineCheckboxes = this.element.querySelectorAll('input[type="checkbox"][data-filter-type="airline"]');
    airlineCheckboxes.forEach((cb) => cb.checked = false);
    const airportCheckboxes = this.element.querySelectorAll('input[type="checkbox"][data-filter-type="airport"]');
    airportCheckboxes.forEach((cb) => cb.checked = false);
    const timeCheckboxes = this.element.querySelectorAll('input[type="checkbox"][data-filter-type="departure-time"]');
    timeCheckboxes.forEach((cb) => cb.checked = false);
    const modelCheckboxes = this.element.querySelectorAll('input[type="checkbox"][data-filter-type="aircraft-model"]');
    modelCheckboxes.forEach((cb) => cb.checked = false);
    if (this.quickDirectFlightTarget) {
      this.quickDirectFlightTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
      this.quickDirectFlightTarget.classList.add("border-gray-300");
    }
    if (this.quickNoSharedFlightTarget) {
      this.quickNoSharedFlightTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
      this.quickNoSharedFlightTarget.classList.add("border-gray-300");
    }
    if (this.quickCheckedLuggageTarget) {
      this.quickCheckedLuggageTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
      this.quickCheckedLuggageTarget.classList.add("border-gray-300");
    }
    if (this.quickNoTransitTarget) {
      this.quickNoTransitTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
      this.quickNoTransitTarget.classList.add("border-gray-300");
    }
    if (this.quickDiscountPriceTarget) {
      this.quickDiscountPriceTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
      this.quickDiscountPriceTarget.classList.add("border-gray-300");
    }
    if (this.directFlightCardTarget) {
      this.directFlightCardTarget.classList.add("bg-[#f6f7f9]");
      this.directFlightCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
      const checkmark = this.directFlightCardTarget.querySelector(".checkmark");
      if (checkmark) checkmark.remove();
    }
    if (this.noSharedFlightCardTarget) {
      this.noSharedFlightCardTarget.classList.add("bg-[#f6f7f9]");
      this.noSharedFlightCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
      const checkmark = this.noSharedFlightCardTarget.querySelector(".checkmark");
      if (checkmark) checkmark.remove();
    }
    if (this.checkedLuggageCardTarget) {
      this.checkedLuggageCardTarget.classList.add("bg-[#f6f7f9]");
      this.checkedLuggageCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
      const checkmark = this.checkedLuggageCardTarget.querySelector(".checkmark");
      if (checkmark) checkmark.remove();
    }
    if (this.noTransitCardTarget) {
      this.noTransitCardTarget.classList.add("bg-[#f6f7f9]");
      this.noTransitCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
      const checkmark = this.noTransitCardTarget.querySelector(".checkmark");
      if (checkmark) checkmark.remove();
    }
    if (this.discountPriceCardTarget) {
      this.discountPriceCardTarget.classList.add("bg-[#f6f7f9]");
      this.discountPriceCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
      const checkmark = this.discountPriceCardTarget.querySelector(".checkmark");
      if (checkmark) checkmark.remove();
    }
    this.updateResultCount();
  }
  // Apply filters and close modal
  confirm() {
    this.closeModal();
    this.element.dispatchEvent(new CustomEvent("filters-applied", {
      detail: { filters: this.filters },
      bubbles: true
    }));
  }
  // Update result count (placeholder - in real app would count filtered flights)
  updateResultCount() {
    let count = 66;
    if (this.filters.directFlight) count = Math.floor(count * 0.7);
    if (this.filters.noTransit) count = Math.floor(count * 0.8);
    if (this.filters.airlines.size > 0) count = Math.floor(count * 0.6);
    if (this.filters.departureAirports.size > 0) count = Math.floor(count * 0.7);
    if (this.filters.arrivalAirports.size > 0) count = Math.floor(count * 0.7);
    if (this.filters.departureTimeRanges.size > 0) count = Math.floor(count * 0.5);
    if (this.filters.aircraftModels.size > 0) count = Math.floor(count * 0.6);
    this.resultCountTarget.textContent = count.toString();
    this.updateFilterBadge();
    this.updateSelectedFiltersDisplay();
  }
  // Update filter badge count
  updateFilterBadge() {
    let activeFilterCount = 0;
    if (this.filters.directFlight) activeFilterCount++;
    if (this.filters.noTransit) activeFilterCount++;
    if (this.filters.includeCheckedLuggage) activeFilterCount++;
    if (this.filters.noSharedFlight) activeFilterCount++;
    if (this.filters.discountPrice) activeFilterCount++;
    activeFilterCount += this.filters.airlines.size;
    activeFilterCount += this.filters.departureAirports.size;
    activeFilterCount += this.filters.arrivalAirports.size;
    activeFilterCount += this.filters.departureTimeRanges.size;
    activeFilterCount += this.filters.aircraftModels.size;
    if (activeFilterCount > 0) {
      this.filterBadgeTarget.textContent = activeFilterCount.toString();
      this.filterBadgeTarget.classList.remove("hidden");
    } else {
      this.filterBadgeTarget.classList.add("hidden");
    }
  }
  // Update selected filters display
  updateSelectedFiltersDisplay() {
    const filterLabels = [];
    const filterNameMap = {
      directFlight: "\u53EA\u770B\u76F4\u98DE",
      noSharedFlight: "\u4E0D\u770B\u5171\u4EAB\u822A\u73ED",
      includeCheckedLuggage: "\u542B\u6258\u8FD0\u884C\u674E\u989D",
      noTransit: "\u65E0\u9700\u8FC7\u5883\u7B7E",
      discountPrice: "\u770B\u4F18\u60E0\u524D\u4EF7\u683C"
    };
    if (this.filters.directFlight) {
      filterLabels.push({ text: filterNameMap.directFlight, type: "directFlight", value: "" });
    }
    if (this.filters.noSharedFlight) {
      filterLabels.push({ text: filterNameMap.noSharedFlight, type: "noSharedFlight", value: "" });
    }
    if (this.filters.includeCheckedLuggage) {
      filterLabels.push({ text: filterNameMap.includeCheckedLuggage, type: "includeCheckedLuggage", value: "" });
    }
    if (this.filters.noTransit) {
      filterLabels.push({ text: filterNameMap.noTransit, type: "noTransit", value: "" });
    }
    if (this.filters.discountPrice) {
      filterLabels.push({ text: filterNameMap.discountPrice, type: "discountPrice", value: "" });
    }
    this.filters.airlines.forEach((airline) => {
      filterLabels.push({ text: airline, type: "airline", value: airline });
    });
    this.filters.departureAirports.forEach((airport) => {
      filterLabels.push({ text: airport, type: "departureAirport", value: airport });
    });
    this.filters.arrivalAirports.forEach((airport) => {
      filterLabels.push({ text: airport, type: "arrivalAirport", value: airport });
    });
    this.filters.departureTimeRanges.forEach((range) => {
      filterLabels.push({ text: range, type: "departureTime", value: range });
    });
    this.filters.aircraftModels.forEach((model) => {
      filterLabels.push({ text: model, type: "aircraftModel", value: model });
    });
    this.selectedFiltersListTarget.innerHTML = "";
    if (filterLabels.length > 0) {
      this.selectedFiltersContainerTarget.classList.remove("hidden");
      filterLabels.forEach((filter) => {
        const tag = document.createElement("button");
        tag.className = "inline-flex items-center gap-1 px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full border border-yellow-300 hover:bg-yellow-200";
        tag.dataset.filterType = filter.type;
        tag.dataset.filterValue = filter.value;
        tag.innerHTML = `
          ${filter.text}
          <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd"
              d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0
                -1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
              clip-rule="evenodd"/>
          </svg>
        `;
        tag.addEventListener("click", () => this.removeFilter(filter.type, filter.value));
        this.selectedFiltersListTarget.appendChild(tag);
      });
    } else {
      this.selectedFiltersContainerTarget.classList.add("hidden");
    }
  }
  // Remove a single filter
  removeFilter(type, value) {
    switch (type) {
      case "directFlight":
        this.filters.directFlight = false;
        this.directFlightCheckboxTarget.checked = false;
        if (this.quickDirectFlightTarget) {
          this.quickDirectFlightTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
          this.quickDirectFlightTarget.classList.add("border-gray-300");
        }
        if (this.directFlightCardTarget) {
          this.directFlightCardTarget.classList.add("bg-[#f6f7f9]");
          this.directFlightCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
          const checkmark = this.directFlightCardTarget.querySelector(".checkmark");
          if (checkmark) checkmark.remove();
        }
        break;
      case "noSharedFlight":
        this.filters.noSharedFlight = false;
        this.noSharedFlightCheckboxTarget.checked = false;
        if (this.quickNoSharedFlightTarget) {
          this.quickNoSharedFlightTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
          this.quickNoSharedFlightTarget.classList.add("border-gray-300");
        }
        if (this.noSharedFlightCardTarget) {
          this.noSharedFlightCardTarget.classList.add("bg-[#f6f7f9]");
          this.noSharedFlightCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
          const checkmark = this.noSharedFlightCardTarget.querySelector(".checkmark");
          if (checkmark) checkmark.remove();
        }
        break;
      case "includeCheckedLuggage":
        this.filters.includeCheckedLuggage = false;
        this.includeCheckedLuggageCheckboxTarget.checked = false;
        if (this.quickCheckedLuggageTarget) {
          this.quickCheckedLuggageTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
          this.quickCheckedLuggageTarget.classList.add("border-gray-300");
        }
        if (this.checkedLuggageCardTarget) {
          this.checkedLuggageCardTarget.classList.add("bg-[#f6f7f9]");
          this.checkedLuggageCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
          const checkmark = this.checkedLuggageCardTarget.querySelector(".checkmark");
          if (checkmark) checkmark.remove();
        }
        break;
      case "noTransit":
        this.filters.noTransit = false;
        this.noTransitCheckboxTarget.checked = false;
        if (this.quickNoTransitTarget) {
          this.quickNoTransitTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
          this.quickNoTransitTarget.classList.add("border-gray-300");
        }
        if (this.noTransitCardTarget) {
          this.noTransitCardTarget.classList.add("bg-[#f6f7f9]");
          this.noTransitCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
          const checkmark = this.noTransitCardTarget.querySelector(".checkmark");
          if (checkmark) checkmark.remove();
        }
        break;
      case "discountPrice":
        this.filters.discountPrice = false;
        this.discountPriceCheckboxTarget.checked = false;
        if (this.quickDiscountPriceTarget) {
          this.quickDiscountPriceTarget.classList.remove("bg-yellow-100", "border-yellow-400", "text-yellow-800");
          this.quickDiscountPriceTarget.classList.add("border-gray-300");
        }
        if (this.discountPriceCardTarget) {
          this.discountPriceCardTarget.classList.add("bg-[#f6f7f9]");
          this.discountPriceCardTarget.classList.remove("bg-[#fff9e6]", "border-[0.5px]", "border-[#ffda80]");
          const checkmark = this.discountPriceCardTarget.querySelector(".checkmark");
          if (checkmark) checkmark.remove();
        }
        break;
      case "airline": {
        this.filters.airlines.delete(value);
        const airlineCheckbox = this.element.querySelector(`input[type="checkbox"][data-filter-type="airline"][value="${value}"]`);
        if (airlineCheckbox) airlineCheckbox.checked = false;
        break;
      }
      case "departureAirport": {
        this.filters.departureAirports.delete(value);
        const depAirportCheckbox = this.element.querySelector(`input[type="checkbox"][data-filter-type="airport"][value="${value}"]`);
        if (depAirportCheckbox) depAirportCheckbox.checked = false;
        break;
      }
      case "arrivalAirport": {
        this.filters.arrivalAirports.delete(value);
        const arrAirportCheckbox = this.element.querySelector(`input[type="checkbox"][data-filter-type="airport"][value="${value}"]`);
        if (arrAirportCheckbox) arrAirportCheckbox.checked = false;
        break;
      }
      case "departureTime": {
        this.filters.departureTimeRanges.delete(value);
        const timeCheckbox = this.element.querySelector(`input[type="checkbox"][data-filter-type="departure-time"][value="${value}"]`);
        if (timeCheckbox) timeCheckbox.checked = false;
        break;
      }
      case "aircraftModel": {
        this.filters.aircraftModels.delete(value);
        const modelCheckbox = this.element.querySelector(`input[type="checkbox"][data-filter-type="aircraft-model"][value="${value}"]`);
        if (modelCheckbox) modelCheckbox.checked = false;
        break;
      }
    }
    this.updateResultCount();
  }
  // Helper method to create checkmark SVG
  createCheckmark() {
    const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    svg.setAttribute("class", "checkmark absolute bottom-0 right-0");
    svg.setAttribute("width", "16");
    svg.setAttribute("height", "16");
    svg.setAttribute("viewBox", "0 0 24 24");
    const bgPath = document.createElementNS("http://www.w3.org/2000/svg", "path");
    bgPath.setAttribute("d", "M24 24H0L24 0V24Z");
    bgPath.setAttribute("fill", "#fcc32a");
    svg.appendChild(bgPath);
    const checkPath = document.createElementNS("http://www.w3.org/2000/svg", "path");
    checkPath.setAttribute("d", "M14 18l2 2 4-4");
    checkPath.setAttribute("stroke", "white");
    checkPath.setAttribute("stroke-width", "2");
    checkPath.setAttribute("stroke-linecap", "round");
    checkPath.setAttribute("stroke-linejoin", "round");
    checkPath.setAttribute("fill", "none");
    svg.appendChild(checkPath);
    return svg;
  }
};

// app/javascript/controllers/flight_sort_controller.ts
var flight_sort_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    // Sort state
    this.currentSort = "default";
    // default, direct_priority, price_asc, departure_early, departure_late, arrival_early, arrival_late, duration_short
    this.directPriorityActive = false;
    this.pricePriorityActive = false;
  }
  static {
    this.targets = [
      "modal",
      "overlay",
      "directPriorityButton",
      "pricePriorityButton",
      "timeSortButton",
      "flightList"
    ];
  }
  static {
    this.values = {
      initialSort: { type: String, default: "default" }
    };
  }
  connect() {
    console.log("FlightSort controller connected");
    if (this.initialSortValue === "price_asc") {
      this.currentSort = "price_asc";
      this.pricePriorityActive = true;
      this.pricePriorityButtonTarget.classList.add("border-b-2", "border-black");
      this.pricePriorityButtonTarget.querySelector("span")?.classList.add("font-bold");
      this.pricePriorityButtonTarget.querySelector("span")?.classList.remove("text-gray-600");
    }
  }
  // Toggle direct flight priority
  toggleDirectPriority() {
    this.directPriorityActive = !this.directPriorityActive;
    if (this.directPriorityActive) {
      this.currentSort = "direct_priority";
      this.directPriorityButtonTarget.classList.add("border-b-2", "border-black");
      this.directPriorityButtonTarget.querySelector("span")?.classList.add("font-bold");
      this.directPriorityButtonTarget.querySelector("span")?.classList.remove("text-gray-600");
    } else {
      this.currentSort = "default";
      this.directPriorityButtonTarget.classList.remove("border-b-2", "border-black");
      this.directPriorityButtonTarget.querySelector("span")?.classList.remove("font-bold");
      this.directPriorityButtonTarget.querySelector("span")?.classList.add("text-gray-600");
    }
    this.applySort();
  }
  // Toggle price priority (low price first)
  togglePricePriority() {
    this.pricePriorityActive = !this.pricePriorityActive;
    if (this.pricePriorityActive) {
      this.currentSort = "price_asc";
      this.pricePriorityButtonTarget.classList.add("border-b-2", "border-black");
      this.pricePriorityButtonTarget.querySelector("span")?.classList.add("font-bold");
      this.pricePriorityButtonTarget.querySelector("span")?.classList.remove("text-gray-600");
    } else {
      this.currentSort = "default";
      this.pricePriorityButtonTarget.classList.remove("border-b-2", "border-black");
      this.pricePriorityButtonTarget.querySelector("span")?.classList.remove("font-bold");
      this.pricePriorityButtonTarget.querySelector("span")?.classList.add("text-gray-600");
    }
    this.applySort();
  }
  // Open time sort modal
  openTimeSortModal() {
    this.modalTarget.classList.remove("hidden");
    this.overlayTarget.classList.remove("hidden");
    setTimeout(() => {
      this.modalTarget.classList.remove("translate-y-full");
      this.overlayTarget.classList.remove("opacity-0");
    }, 10);
  }
  // Close modal
  closeModal() {
    this.modalTarget.classList.add("translate-y-full");
    this.overlayTarget.classList.add("opacity-0");
    setTimeout(() => {
      this.modalTarget.classList.add("hidden");
      this.overlayTarget.classList.add("hidden");
    }, 300);
  }
  // Apply sort option from time sort modal
  applySortOption(event2) {
    const button = event2.currentTarget;
    const sortType = button.dataset.sortType;
    if (!sortType) return;
    this.currentSort = sortType;
    this.updateTimeSortButtonText(sortType);
    this.applySort();
    this.closeModal();
  }
  // Update time sort button text based on selected sort
  updateTimeSortButtonText(sortType) {
    const textMap = {
      "departure_early": "\u8D77\u98DE\u65E9-\u665A",
      "departure_late": "\u8D77\u98DE\u665A-\u65E9",
      "arrival_early": "\u5230\u8FBE\u65E9-\u665A",
      "arrival_late": "\u5230\u8FBE\u665A-\u65E9",
      "duration_short": "\u8017\u65F6\u77ED-\u957F"
    };
    const buttonText = textMap[sortType];
    if (buttonText) {
      const span = this.timeSortButtonTarget.querySelector("span");
      if (span) {
        span.textContent = buttonText;
      }
      this.timeSortButtonTarget.classList.add("border-b-2", "border-black");
      this.timeSortButtonTarget.querySelector("span")?.classList.add("font-bold");
      this.timeSortButtonTarget.querySelector("span")?.classList.remove("text-gray-600");
    }
  }
  // Apply the current sort to flight list
  applySort() {
    const flightCards = Array.from(this.flightListTarget.children);
    if (flightCards.length === 0) return;
    let sortedCards = [];
    switch (this.currentSort) {
      case "direct_priority":
        sortedCards = flightCards.sort((a, b) => {
          const aDirect = !a.textContent?.includes("\u4E2D\u56FD\u9999\u6E2F") && !a.textContent?.includes("\u676D\u5DDE");
          const bDirect = !b.textContent?.includes("\u4E2D\u56FD\u9999\u6E2F") && !b.textContent?.includes("\u676D\u5DDE");
          if (aDirect && !bDirect) return -1;
          if (!aDirect && bDirect) return 1;
          const aPrice = this.extractPrice(a);
          const bPrice = this.extractPrice(b);
          return aPrice - bPrice;
        });
        break;
      case "price_asc":
        sortedCards = flightCards.sort((a, b) => {
          return this.extractPrice(a) - this.extractPrice(b);
        });
        break;
      case "departure_early":
        sortedCards = flightCards.sort((a, b) => {
          return this.extractDepartureTime(a) - this.extractDepartureTime(b);
        });
        break;
      case "departure_late":
        sortedCards = flightCards.sort((a, b) => {
          return this.extractDepartureTime(b) - this.extractDepartureTime(a);
        });
        break;
      case "arrival_early":
        sortedCards = flightCards.sort((a, b) => {
          return this.extractArrivalTime(a) - this.extractArrivalTime(b);
        });
        break;
      case "arrival_late":
        sortedCards = flightCards.sort((a, b) => {
          return this.extractArrivalTime(b) - this.extractArrivalTime(a);
        });
        break;
      case "duration_short":
        sortedCards = flightCards.sort((a, b) => {
          return this.extractDuration(a) - this.extractDuration(b);
        });
        break;
      default:
        sortedCards = flightCards;
    }
    sortedCards.forEach((card) => {
      this.flightListTarget.appendChild(card);
    });
    this.flightListTarget.classList.add("opacity-50");
    setTimeout(() => {
      this.flightListTarget.classList.remove("opacity-50");
    }, 150);
  }
  // Extract price from flight card
  extractPrice(card) {
    const priceText = card.querySelector(".text-red-500.font-bold")?.textContent;
    if (!priceText) return 0;
    const match = priceText.match(/(\d+)/);
    return match ? parseInt(match[1]) : 0;
  }
  // Extract departure time from flight card (convert to minutes since midnight)
  extractDepartureTime(card) {
    const timeText = card.querySelector(".text-3xl.font-bold")?.textContent;
    if (!timeText) return 0;
    const match = timeText.match(/(\d+):(\d+)/);
    if (!match) return 0;
    const hours = parseInt(match[1]);
    const minutes = parseInt(match[2]);
    return hours * 60 + minutes;
  }
  // Extract arrival time from flight card
  extractArrivalTime(card) {
    const timeElements = card.querySelectorAll(".text-3xl.font-bold");
    if (timeElements.length < 2) return 0;
    const timeText = timeElements[1].textContent;
    if (!timeText) return 0;
    const match = timeText.match(/(\d+):(\d+)/);
    if (!match) return 0;
    const hours = parseInt(match[1]);
    const minutes = parseInt(match[2]);
    const departureTime = this.extractDepartureTime(card);
    const arrivalTime = hours * 60 + minutes;
    return arrivalTime < departureTime ? arrivalTime + 24 * 60 : arrivalTime;
  }
  // Extract duration from flight card
  extractDuration(card) {
    const durationText = card.textContent;
    if (!durationText) return 0;
    const match = durationText.match(/(\d+)h(?:(\d+)m)?/);
    if (!match) return 0;
    const hours = parseInt(match[1]);
    const minutes = match[2] ? parseInt(match[2]) : 0;
    return hours * 60 + minutes;
  }
};

// app/javascript/controllers/flight_info_display_controller.ts
var flight_info_display_controller_default = class extends Controller {
  static {
    this.targets = ["info"];
  }
  static {
    this.values = { cabinClass: String };
  }
  connect() {
    this.updateDisplay();
  }
  updateDisplay() {
    const savedState = localStorage.getItem("passenger_selection");
    let displayText = "1\u6210\u4EBA";
    if (savedState) {
      try {
        const state = JSON.parse(savedState);
        const passengerNames = state.passengerNames || [];
        if (passengerNames.length > 0) {
          displayText = `${passengerNames.length}\u4F4D\u4E58\u673A\u4EBA`;
        } else {
          const adults = state.adults || 1;
          const children = state.children || 0;
          displayText = `${adults}\u6210\u4EBA`;
          if (children > 0) {
            displayText += ` ${children}\u513F\u7AE5`;
          }
        }
      } catch (e) {
        console.error("Failed to load passenger selection from localStorage:", e);
      }
    }
    if (this.cabinClassValue === "business") {
      displayText += " \xB7 \u516C\u52A1\u8231";
    } else if (this.cabinClassValue === "first_class") {
      displayText += " \xB7 \u5934\u7B49\u8231";
    }
    this.infoTarget.textContent = displayText;
  }
};

// app/javascript/controllers/date_link_controller.ts
var date_link_controller_default = class extends Controller {
  static {
    this.values = {
      url: String,
      selectedDate: String,
      allSegmentDates: Array,
      selectedFlightDates: Array,
      currentSegmentIndex: Number
    };
  }
  async navigate(event2) {
    event2.preventDefault();
    if (this.selectedDateValue && this.allSegmentDatesValue && this.allSegmentDatesValue.length > 0) {
      const selectedDate = new Date(this.selectedDateValue);
      const currentIndex = this.currentSegmentIndexValue;
      const segmentNumber = currentIndex + 1;
      let previousDate = null;
      if (currentIndex > 0) {
        if (this.selectedFlightDatesValue && this.selectedFlightDatesValue.length > 0) {
          const lastSelectedFlightDate = this.selectedFlightDatesValue[this.selectedFlightDatesValue.length - 1];
          if (lastSelectedFlightDate) {
            previousDate = new Date(lastSelectedFlightDate);
          }
        }
        if (!previousDate && this.allSegmentDatesValue[currentIndex - 1]) {
          previousDate = new Date(this.allSegmentDatesValue[currentIndex - 1]);
        }
      }
      let nextDate = null;
      if (currentIndex + 1 < this.allSegmentDatesValue.length) {
        nextDate = new Date(this.allSegmentDatesValue[currentIndex + 1]);
      }
      if (previousDate && selectedDate < previousDate) {
        if (window.showToast) {
          window.showToast(`\u7B2C${segmentNumber}\u7A0B\u65E5\u671F\u4E0D\u80FD\u65E9\u4E8E\u7B2C${currentIndex}\u7A0B\uFF0C\u8BF7\u8FD4\u56DE\u822A\u73ED\u9996\u9875\u4FEE\u6539`);
        }
        return;
      }
      if (nextDate && selectedDate > nextDate) {
        if (window.showToast) {
          window.showToast(`\u7B2C${segmentNumber}\u7A0B\u65E5\u671F\u4E0D\u80FD\u665A\u4E8E\u7B2C${currentIndex + 2}\u7A0B\uFF0C\u8BF7\u8FD4\u56DE\u822A\u73ED\u9996\u9875\u4FEE\u6539`);
        }
        return;
      }
    }
    try {
      const response = await fetch(this.urlValue, {
        headers: {
          "Accept": "text/vnd.turbo-stream.html, text/html",
          "Turbo-Frame": "_top"
        }
      });
      const contentType = response.headers.get("Content-Type");
      if (contentType?.includes("turbo-stream")) {
        const html = await response.text();
        renderStreamMessage(html);
      } else {
        visit(this.urlValue);
      }
    } catch (error3) {
      console.error("Navigation error:", error3);
      visit(this.urlValue);
    }
  }
};

// app/javascript/controllers/hotel_guest_selector_controller.ts
var hotel_guest_selector_controller_default = class extends Controller {
  static {
    this.targets = [
      "modal",
      "roomsCount",
      "adultsCount",
      "childrenCount",
      "roomsInput",
      "adultsInput",
      "childrenInput",
      "displayText"
    ];
  }
  static {
    this.values = {
      rooms: Number,
      adults: Number,
      children: Number
    };
  }
  connect() {
    console.log("HotelGuestSelector connected");
    const urlParams = new URLSearchParams(window.location.search);
    const roomsParam = urlParams.get("rooms");
    const adultsParam = urlParams.get("adults");
    const childrenParam = urlParams.get("children");
    if (this.hasRoomsInputTarget && this.hasAdultsInputTarget && this.hasChildrenInputTarget) {
      this.roomsValue = roomsParam && roomsParam !== "" ? parseInt(roomsParam) : parseInt(this.roomsInputTarget.value) || 1;
      this.adultsValue = adultsParam && adultsParam !== "" ? parseInt(adultsParam) : parseInt(this.adultsInputTarget.value) || 1;
      this.childrenValue = childrenParam && childrenParam !== "" ? parseInt(childrenParam) : parseInt(this.childrenInputTarget.value) || 0;
      this.updateCounts();
      this.updateDisplay();
    }
  }
  disconnect() {
    console.log("HotelGuestSelector disconnected");
  }
  // Open modal
  openModal() {
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // Close modal
  closeModal() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  // Increment rooms
  incrementRooms() {
    if (this.roomsValue < 10) {
      this.roomsValue++;
      this.updateCounts();
    }
  }
  // Decrement rooms
  decrementRooms() {
    if (this.roomsValue > 1) {
      this.roomsValue--;
      this.updateCounts();
    }
  }
  // Increment adults
  incrementAdults() {
    if (this.adultsValue < 20) {
      this.adultsValue++;
      this.updateCounts();
    }
  }
  // Decrement adults
  decrementAdults() {
    if (this.adultsValue > 1) {
      this.adultsValue--;
      this.updateCounts();
    }
  }
  // Increment children
  incrementChildren() {
    if (this.childrenValue < 10) {
      this.childrenValue++;
      this.updateCounts();
    }
  }
  // Decrement children
  decrementChildren() {
    if (this.childrenValue > 0) {
      this.childrenValue--;
      this.updateCounts();
    }
  }
  // Reset to defaults
  reset() {
    this.roomsValue = 1;
    this.adultsValue = 1;
    this.childrenValue = 0;
    this.updateCounts();
  }
  // Confirm and close
  confirm() {
    this.updateDisplay();
    this.dispatchGuestUpdateEvent();
    this.closeModal();
  }
  // Update count displays and hidden inputs
  updateCounts() {
    this.roomsCountTarget.textContent = this.roomsValue.toString();
    this.adultsCountTarget.textContent = this.adultsValue.toString();
    this.childrenCountTarget.textContent = this.childrenValue.toString();
    this.roomsInputTarget.value = this.roomsValue.toString();
    this.adultsInputTarget.value = this.adultsValue.toString();
    this.childrenInputTarget.value = this.childrenValue.toString();
  }
  // Update display text
  updateDisplay() {
    if (this.hasDisplayTextTarget) {
      this.displayTextTarget.textContent = `${this.roomsValue}\u95F4\u623F ${this.adultsValue}\u6210\u4EBA ${this.childrenValue}\u513F\u7AE5`;
    }
  }
  // Dispatch event to notify hotel-search controller
  dispatchGuestUpdateEvent() {
    const guestUpdateEvent = new CustomEvent("hotel-guest-selector:guests-updated", {
      detail: {
        rooms: this.roomsValue,
        adults: this.adultsValue,
        children: this.childrenValue
      },
      bubbles: true
    });
    document.dispatchEvent(guestUpdateEvent);
    console.log("Hotel guest selector: Dispatched guest update event", {
      rooms: this.roomsValue,
      adults: this.adultsValue,
      children: this.childrenValue
    });
  }
};

// app/javascript/controllers/hotel_date_picker_controller.ts
var hotel_date_picker_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.currentMonth = /* @__PURE__ */ new Date();
    this.checkInDate = null;
    this.checkOutDate = null;
  }
  static {
    this.targets = [
      "modal",
      "calendar",
      "monthLabel",
      "promptText",
      "checkInInput",
      "checkOutInput",
      "checkInDisplay",
      "checkOutDisplay",
      "nightsDisplay"
    ];
  }
  static {
    this.values = {
      checkIn: String,
      checkOut: String,
      selectingCheckIn: Boolean
    };
  }
  connect() {
    if (this.hasCheckInInputTarget && this.hasCheckOutInputTarget) {
      if (this.checkInInputTarget.value) {
        this.checkInDate = this.parseLocalDate(this.checkInInputTarget.value);
      }
      if (this.checkOutInputTarget.value) {
        this.checkOutDate = this.parseLocalDate(this.checkOutInputTarget.value);
      }
      this.updateDisplay();
    }
  }
  parseLocalDate(dateStr) {
    const parts = dateStr.split("-");
    if (parts.length === 3) {
      const year = parseInt(parts[0], 10);
      const month = parseInt(parts[1], 10) - 1;
      const day = parseInt(parts[2], 10);
      return new Date(year, month, day);
    }
    return /* @__PURE__ */ new Date();
  }
  openModal() {
    this.selectingCheckInValue = true;
    this.promptTextTarget.textContent = "\u8BF7\u9009\u62E9\u5165\u4F4F\u65E5\u671F";
    this.currentMonth = /* @__PURE__ */ new Date();
    this.renderMultiMonthCalendar();
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  closeModal() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  selectDate(event2) {
    const button = event2.currentTarget;
    const dateStr = button.dataset.date;
    if (!dateStr) return;
    const selectedDate = this.parseLocalDate(dateStr);
    if (this.selectingCheckInValue) {
      this.checkInDate = selectedDate;
      this.checkOutDate = null;
      this.selectingCheckInValue = false;
      this.promptTextTarget.textContent = "\u8BF7\u9009\u62E9\u79BB\u5E97\u65E5\u671F";
    } else {
      if (this.checkInDate && selectedDate <= this.checkInDate) {
        this.checkInDate = selectedDate;
        this.checkOutDate = null;
        this.promptTextTarget.textContent = "\u8BF7\u9009\u62E9\u79BB\u5E97\u65E5\u671F";
      } else {
        this.checkOutDate = selectedDate;
      }
    }
    this.renderMultiMonthCalendar();
  }
  confirm() {
    if (this.checkInDate && this.checkOutDate) {
      this.checkInInputTarget.value = this.formatDate(this.checkInDate);
      this.checkOutInputTarget.value = this.formatDate(this.checkOutDate);
      this.updateDisplay();
      this.dispatchDateUpdateEvent();
    } else {
      if (this.hasCheckInInputTarget) {
        this.checkInInputTarget.value = "";
      }
      if (this.hasCheckOutInputTarget) {
        this.checkOutInputTarget.value = "";
      }
      const dateUpdateEvent = new CustomEvent("hotel-date-picker:dates-selected", {
        detail: {
          checkIn: "",
          checkOut: ""
        },
        bubbles: true
      });
      document.dispatchEvent(dateUpdateEvent);
    }
    this.closeModal();
  }
  reset() {
    this.checkInDate = null;
    this.checkOutDate = null;
    this.selectingCheckInValue = true;
    this.promptTextTarget.textContent = "\u8BF7\u9009\u62E9\u5165\u4F4F\u65E5\u671F";
    if (this.hasCheckInInputTarget) {
      this.checkInInputTarget.value = "";
    }
    if (this.hasCheckOutInputTarget) {
      this.checkOutInputTarget.value = "";
    }
    this.renderMultiMonthCalendar();
    this.updateDisplay();
  }
  previousMonth() {
    this.currentMonth = new Date(this.currentMonth.getFullYear(), this.currentMonth.getMonth() - 1, 1);
    this.renderMultiMonthCalendar();
  }
  nextMonth() {
    this.currentMonth = new Date(this.currentMonth.getFullYear(), this.currentMonth.getMonth() + 1, 1);
    this.renderMultiMonthCalendar();
  }
  renderMultiMonthCalendar() {
    let html = "";
    for (let i = 0; i < 3; i++) {
      const displayMonth = new Date(this.currentMonth.getFullYear(), this.currentMonth.getMonth() + i, 1);
      html += this.renderSingleMonth(displayMonth);
    }
    this.calendarTarget.innerHTML = html;
    const year = this.currentMonth.getFullYear();
    const month = this.currentMonth.getMonth();
    this.monthLabelTarget.textContent = `${year}\u5E74${month + 1}\u6708`;
  }
  renderSingleMonth(displayMonth) {
    const year = displayMonth.getFullYear();
    const month = displayMonth.getMonth();
    let html = `<div class="mb-6">
      <div class="text-lg font-bold text-gray-900 mb-3">${year}\u5E74${month + 1}\u6708</div>
    `;
    const firstDay = new Date(year, month, 1);
    const lastDay = new Date(year, month + 1, 0);
    const daysInMonth = lastDay.getDate();
    const startingDayOfWeek = firstDay.getDay();
    const days = [];
    const prevMonthLastDay = new Date(year, month, 0).getDate();
    for (let i = startingDayOfWeek - 1; i >= 0; i--) {
      const day = prevMonthLastDay - i;
      const date = new Date(year, month - 1, day);
      days.push({
        date,
        dayOfMonth: day,
        isCurrentMonth: false,
        isToday: false,
        isSelected: false,
        isInRange: false,
        isDisabled: this.isDateDisabled(date)
      });
    }
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    for (let day = 1; day <= daysInMonth; day++) {
      const date = new Date(year, month, day);
      const isToday = date.getTime() === today.getTime();
      const isSelected = this.isDateSelected(date);
      const isInRange = this.isDateInRange(date);
      days.push({
        date,
        dayOfMonth: day,
        isCurrentMonth: true,
        isToday,
        isSelected,
        isInRange,
        isDisabled: this.isDateDisabled(date),
        label: this.getDateLabel(date),
        holiday: this.getHoliday(date)
      });
    }
    const remainingDays = 42 - days.length;
    for (let day = 1; day <= remainingDays; day++) {
      const date = new Date(year, month + 1, day);
      days.push({
        date,
        dayOfMonth: day,
        isCurrentMonth: false,
        isToday: false,
        isSelected: false,
        isInRange: false,
        isDisabled: this.isDateDisabled(date)
      });
    }
    html += this.renderDays(days);
    html += "</div>";
    return html;
  }
  renderDays(days) {
    const weekdays = ["\u65E5", "\u4E00", "\u4E8C", "\u4E09", "\u56DB", "\u4E94", "\u516D"];
    let html = '<div class="grid grid-cols-7 gap-1 mb-2">';
    weekdays.forEach((day) => {
      html += `<div class="text-center text-sm text-gray-500 py-2">${day}</div>`;
    });
    html += "</div>";
    html += '<div class="grid grid-cols-7 gap-1">';
    days.forEach((day) => {
      const dateStr = this.formatDate(day.date);
      const baseClasses = "relative h-12 flex flex-col items-center justify-center text-sm rounded-lg";
      let classes = baseClasses;
      let textColor = day.isCurrentMonth ? "text-gray-900" : "text-gray-300";
      let bgColor = "";
      if (day.isDisabled) {
        classes += " opacity-40 cursor-not-allowed";
      } else {
        classes += " cursor-pointer hover:bg-gray-100";
      }
      if (day.isSelected) {
        bgColor = "bg-yellow-400";
        textColor = "text-white font-bold";
      } else if (day.isInRange) {
        bgColor = "bg-yellow-50";
      }
      if (day.isToday && !day.isSelected) {
        classes += " border-2 border-blue-500";
      }
      const label = day.label || day.holiday || "";
      const labelClass = day.holiday ? "text-red-500" : "text-blue-500";
      html += `
        <button 
          data-date="${dateStr}"
          data-action="click->hotel-date-picker#selectDate"
          class="${classes} ${bgColor} ${textColor}"
          ${day.isDisabled ? "disabled" : ""}
        >
          <span class="font-medium">${day.dayOfMonth}</span>
          ${label ? `<span class="text-xs ${labelClass} absolute bottom-0">${label}</span>` : ""}
        </button>
      `;
    });
    html += "</div>";
    return html;
  }
  isDateDisabled(date) {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    return date < today;
  }
  isDateSelected(date) {
    if (this.checkInDate && this.isSameDay(date, this.checkInDate)) return true;
    if (this.checkOutDate && this.isSameDay(date, this.checkOutDate)) return true;
    return false;
  }
  isDateInRange(date) {
    if (!this.checkInDate || !this.checkOutDate) return false;
    return date > this.checkInDate && date < this.checkOutDate;
  }
  isSameDay(date1, date2) {
    return date1.getFullYear() === date2.getFullYear() && date1.getMonth() === date2.getMonth() && date1.getDate() === date2.getDate();
  }
  formatDate(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    return `${year}-${month}-${day}`;
  }
  getDateLabel(date) {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    const targetDate = new Date(date);
    targetDate.setHours(0, 0, 0, 0);
    const diffTime = targetDate.getTime() - today.getTime();
    const diffDays = Math.round(diffTime / (1e3 * 60 * 60 * 24));
    if (diffDays === 0) return "\u4ECA\u5929";
    if (diffDays === 1) return "\u660E\u5929";
    if (diffDays === 2) return "\u540E\u5929";
    const weekdays = ["\u5468\u65E5", "\u5468\u4E00", "\u5468\u4E8C", "\u5468\u4E09", "\u5468\u56DB", "\u5468\u4E94", "\u5468\u516D"];
    return weekdays[date.getDay()];
  }
  getHoliday(date) {
    const month = date.getMonth() + 1;
    const day = date.getDate();
    if (month === 1 && day === 1) return "\u5143\u65E6";
    if (month === 2 && day === 14) return "\u60C5\u4EBA\u8282";
    if (month === 5 && day === 1) return "\u52B3\u52A8\u8282";
    if (month === 6 && day === 1) return "\u513F\u7AE5\u8282";
    if (month === 10 && day === 1) return "\u56FD\u5E86\u8282";
    if (month === 12 && day === 25) return "\u5723\u8BDE\u8282";
    return "";
  }
  updateDisplay() {
    if (this.checkInDate) {
      const month = this.checkInDate.getMonth() + 1;
      const day = this.checkInDate.getDate();
      this.checkInDisplayTarget.textContent = `${month}\u6708${day}\u65E5`;
      const checkInLabel = this.checkInDisplayTarget.nextElementSibling;
      if (checkInLabel) {
        checkInLabel.textContent = this.getDateLabel(this.checkInDate);
      }
    }
    if (this.checkOutDate) {
      const month = this.checkOutDate.getMonth() + 1;
      const day = this.checkOutDate.getDate();
      this.checkOutDisplayTarget.textContent = `${month}\u6708${day}\u65E5`;
      const checkOutLabel = this.checkOutDisplayTarget.nextElementSibling;
      if (checkOutLabel) {
        checkOutLabel.textContent = this.getDateLabel(this.checkOutDate);
      }
    }
    if (this.checkInDate && this.checkOutDate && this.hasNightsDisplayTarget) {
      const nights = Math.floor((this.checkOutDate.getTime() - this.checkInDate.getTime()) / (1e3 * 60 * 60 * 24));
      this.nightsDisplayTarget.textContent = `${nights}\u665A`;
    }
  }
  // Dispatch date update event for hotel-search controller
  dispatchDateUpdateEvent() {
    if (!this.checkInDate || !this.checkOutDate) return;
    const dateUpdateEvent = new CustomEvent("hotel-date-picker:dates-selected", {
      detail: {
        checkIn: this.formatDate(this.checkInDate),
        checkOut: this.formatDate(this.checkOutDate)
      },
      bubbles: true
    });
    document.dispatchEvent(dateUpdateEvent);
    console.log("Hotel date picker: Dispatched dates update event", {
      checkIn: this.formatDate(this.checkInDate),
      checkOut: this.formatDate(this.checkOutDate)
    });
  }
};

// app/javascript/controllers/payment_modal_controller.ts
var payment_modal_controller_default = class extends Controller {
  static {
    this.targets = [
      "modal",
      "backdrop",
      "paymentOption",
      "paymentMethodInput"
    ];
  }
  static {
    this.values = {
      totalPrice: String
    };
  }
  connect() {
    console.log("PaymentModal connected");
  }
  // 
  open(event2) {
    event2.preventDefault();
    this.modalTarget.classList.remove("hidden");
    this.backdropTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // 
  close(event2) {
    if (event2) {
      event2.preventDefault();
    }
    this.modalTarget.classList.add("hidden");
    this.backdropTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  // 
  closeOnBackdrop(event2) {
    if (event2.target === event2.currentTarget) {
      this.close();
    }
  }
  // 
  selectPayment(event2) {
    const target = event2.currentTarget;
    const paymentMethod = target.dataset.paymentMethod;
    this.paymentOptionTargets.forEach((option) => {
      option.classList.remove("border-blue-500", "bg-blue-50");
      option.classList.add("border-gray-200");
      const checkmark2 = option.querySelector(".checkmark");
      if (checkmark2) {
        checkmark2.classList.add("hidden");
      }
    });
    target.classList.remove("border-gray-200");
    target.classList.add("border-blue-500", "bg-blue-50");
    const checkmark = target.querySelector(".checkmark");
    if (checkmark) {
      checkmark.classList.remove("hidden");
    }
    if (paymentMethod) {
      this.paymentMethodInputTarget.value = paymentMethod;
    }
  }
  //  - 
  confirmPayment(event2) {
    event2.preventDefault();
    const form = this.element.closest("form");
    if (form) {
      form.requestSubmit();
    }
  }
};

// app/javascript/controllers/payment_confirmation_controller.ts
var payment_confirmation_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.password = "";
  }
  static {
    this.targets = [
      "passwordModal",
      "fingerprintModal",
      "processingModal",
      "statusModal",
      "passwordDots",
      "passwordAmount",
      "processingAmount",
      "userEmail",
      "statusAmount",
      "statusUserEmail",
      "statusIcon",
      "statusText",
      "statusDots"
    ];
  }
  static {
    this.values = {
      amount: String,
      userEmail: String,
      paymentUrl: String,
      successUrl: String
    };
  }
  connect() {
    console.log("Payment confirmation controller connected");
  }
  showPasswordModal() {
    if (!this.hasPasswordModalTarget) {
      console.error("Password modal target not found");
      return;
    }
    this.password = "";
    if (this.hasPasswordDotsTarget) {
      this.updatePasswordDots();
    }
    if (this.hasPasswordAmountTarget) {
      this.passwordAmountTarget.textContent = this.amountValue;
    }
    this.passwordModalTarget.classList.remove("hidden");
  }
  closePasswordModal() {
    if (this.hasPasswordModalTarget) {
      this.passwordModalTarget.classList.add("hidden");
    }
  }
  inputPassword(event2) {
    const button = event2.currentTarget;
    const number = button.dataset.number;
    if (!number) return;
    if (this.password.length < 6) {
      this.password += number;
      this.updatePasswordDots();
      if (this.password.length === 6) {
        this.processPasswordPayment();
      }
    }
  }
  deletePassword() {
    if (this.password.length > 0) {
      this.password = this.password.slice(0, -1);
      this.updatePasswordDots();
    }
  }
  updatePasswordDots() {
    if (!this.hasPasswordDotsTarget) return;
    const dots = this.passwordDotsTarget.querySelectorAll(".password-dot");
    dots.forEach((dot, index) => {
      if (index < this.password.length) {
        dot.classList.add("active");
      } else {
        dot.classList.remove("active");
      }
    });
  }
  processPasswordPayment() {
    this.verifyPasswordThenPay();
  }
  async verifyPasswordThenPay() {
    try {
      const verifyResponse = await fetch("/profile/verify_pay_password", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "X-CSRF-Token": document.querySelector('meta[name="csrf-token"]')?.content || ""
        },
        body: JSON.stringify({
          pay_password: this.password
        })
      });
      const verifyData = await verifyResponse.json();
      if (!verifyResponse.ok || !verifyData.success) {
        const message = verifyData.message || "\u652F\u4ED8\u5BC6\u7801\u9519\u8BEF";
        if (message.includes("\u8BF7\u5148\u8BBE\u7F6E\u652F\u4ED8\u5BC6\u7801") || message.includes("\u8BBE\u7F6E\u652F\u4ED8\u5BC6\u7801")) {
          if (this.hasPasswordModalTarget) {
            this.passwordModalTarget.classList.add("hidden");
          }
          window.location.href = "/profile/edit_pay_password";
          return;
        }
        if (typeof window.showToast === "function") {
          window.showToast(message);
        } else {
          alert(message);
        }
        this.password = "";
        this.updatePasswordDots();
        if (this.hasPasswordModalTarget) {
          this.passwordModalTarget.classList.remove("hidden");
        }
        return;
      }
      if (this.hasPasswordModalTarget) {
        this.passwordModalTarget.classList.add("hidden");
      }
      this.showPayingStatus();
      await this.processActualPayment();
    } catch (error3) {
      console.error("\u9A8C\u8BC1\u652F\u4ED8\u5BC6\u7801\u5931\u8D25:", error3);
      if (typeof window.showToast === "function") {
        window.showToast("\u7F51\u7EDC\u9519\u8BEF\uFF0C\u8BF7\u91CD\u8BD5");
      } else {
        alert("\u7F51\u7EDC\u9519\u8BEF\uFF0C\u8BF7\u91CD\u8BD5");
      }
      this.password = "";
      this.updatePasswordDots();
      if (this.hasPasswordModalTarget) {
        this.passwordModalTarget.classList.remove("hidden");
      }
    }
  }
  async processActualPayment() {
    try {
      const response = await fetch(`${this.paymentUrlValue}.json`, {
        method: "PATCH",
        headers: {
          "Content-Type": "application/json",
          "Accept": "application/json",
          "X-CSRF-Token": document.querySelector('meta[name="csrf-token"]')?.content || ""
        },
        body: JSON.stringify({})
        // Password already verified, just trigger payment
      });
      const data2 = await response.json();
      if (response.ok && data2.success) {
        this.showPaymentSuccess();
        setTimeout(() => {
          window.location.href = this.successUrlValue;
        }, 2e3);
      } else {
        throw new Error(data2.message || "\u652F\u4ED8\u5931\u8D25");
      }
    } catch (error3) {
      console.error("\u652F\u4ED8\u5931\u8D25:", error3);
      this.closeStatusModal();
      const message = error3 instanceof Error ? error3.message : "\u652F\u4ED8\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5";
      if (typeof window.showToast === "function") {
        window.showToast(message);
      } else {
        alert(message);
      }
      this.password = "";
      this.showPasswordModal();
    }
  }
  showPayingStatus() {
    if (!this.hasStatusModalTarget) return;
    if (this.hasStatusAmountTarget) {
      this.statusAmountTarget.textContent = this.amountValue;
    }
    if (this.hasStatusUserEmailTarget) {
      this.statusUserEmailTarget.textContent = this.userEmailValue;
    }
    if (this.hasStatusIconTarget) {
      this.statusIconTarget.textContent = "\u{1F4B3}";
    }
    if (this.hasStatusTextTarget) {
      this.statusTextTarget.textContent = "\u6B63\u5728\u4ED8\u6B3E";
    }
    if (this.hasStatusDotsTarget) {
      this.statusDotsTarget.style.display = "block";
    }
    this.statusModalTarget.classList.remove("hidden");
  }
  closeProcessingModal() {
    if (this.hasStatusModalTarget) {
      this.statusModalTarget.classList.add("hidden");
    }
  }
  switchToPasswordPay() {
    this.closeStatusModal();
    this.showPasswordModal();
  }
  showPaymentSuccess() {
    if (this.hasStatusIconTarget) {
      this.statusIconTarget.textContent = "\u2713";
    }
    if (this.hasStatusTextTarget) {
      this.statusTextTarget.textContent = "\u4ED8\u6B3E\u6210\u529F";
    }
    if (this.hasStatusDotsTarget) {
      this.statusDotsTarget.style.display = "none";
    }
  }
  closeStatusModal() {
    if (this.hasStatusModalTarget) {
      this.statusModalTarget.classList.add("hidden");
    }
  }
};

// app/javascript/controllers/hotel_tabs_controller.ts
var hotel_tabs_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.activeTabType = "domestic";
  }
  static {
    this.targets = ["tab"];
  }
  connect() {
    const activeTab = this.element.querySelector("[data-tab-type].bg-white");
    this.activeTabType = activeTab?.dataset.tabType || "domestic";
    document.addEventListener("city-selector:switch-to-international", this.handleInternationalSwitch.bind(this));
  }
  disconnect() {
    document.removeEventListener("city-selector:switch-to-international", this.handleInternationalSwitch.bind(this));
  }
  // Handle international switch from city selector
  handleInternationalSwitch() {
    console.log("Hotel tabs: Received switch to international event");
    const internationalTab = this.tabTargets.find((tab) => tab.dataset.tabType === "international");
    if (internationalTab && this.activeTabType !== "international") {
      internationalTab.click();
    }
  }
  switchTab(event2) {
    const clickedTab = event2.currentTarget;
    const newTabType = clickedTab.dataset.tabType;
    if (!newTabType) return;
    if (newTabType === this.activeTabType) {
      return;
    }
    this.activeTabType = newTabType;
    this.tabTargets.forEach((tab) => {
      tab.classList.remove("bg-white", "rounded-t-[12px]", "px-3", "py-2.5", "relative");
      tab.classList.add("px-2", "py-2");
      const span = tab.querySelector("span");
      if (span) {
        span.className = "text-[13px] font-medium text-[#666666]";
      }
      if (tab.tagName === "BUTTON") {
        tab.classList.add("text-[13px]", "font-medium", "text-[#666666]", "cursor-pointer", "whitespace-nowrap");
      }
    });
    clickedTab.classList.remove("px-2", "py-2");
    clickedTab.classList.add("relative", "bg-white", "rounded-t-[12px]", "px-3", "py-2.5");
    if (clickedTab.tagName === "BUTTON") {
      const label = clickedTab.textContent?.trim() || "";
      clickedTab.innerHTML = `
        <div class="flex flex-col items-center">
          <span class="text-[15px] font-bold text-[#1a1a1a] leading-tight whitespace-nowrap">${label}</span>
        </div>
      `;
    } else {
      const span = clickedTab.querySelector("span");
      if (span) {
        span.className = "text-[15px] font-bold text-[#1a1a1a] leading-tight whitespace-nowrap";
      }
    }
    this.dispatch("typeChanged", { detail: { type: newTabType } });
    this.filterHotels(newTabType);
  }
  filterHotels(type) {
    console.log(`\u5207\u6362\u5230\u7C7B\u578B: ${type}`);
    const currentParams = new URLSearchParams(window.location.search);
    const citySelectorElement = document.querySelector('[data-controller*="city-selector"]');
    if (citySelectorElement) {
      const departureCityInput = citySelectorElement.querySelector('[data-city-selector-target="departureCityInput"]');
      if (departureCityInput && departureCityInput.value) {
        currentParams.set("city", departureCityInput.value);
        console.log(`\u4FDD\u7559\u9009\u62E9\u7684\u57CE\u5E02: ${departureCityInput.value}`);
      }
    }
    currentParams.delete("type");
    currentParams.delete("room_category");
    if (type === "domestic") {
      currentParams.set("location_type", "domestic");
    } else if (type === "international") {
      currentParams.set("location_type", "international");
    } else if (type === "hourly") {
      currentParams.set("location_type", "domestic");
      currentParams.set("room_category", "hourly");
    } else if (type === "homestay") {
      currentParams.set("location_type", "domestic");
      currentParams.set("type", "homestay");
    }
    const newUrl = `${window.location.pathname}?${currentParams.toString()}`;
    window.location.href = newUrl;
  }
};

// app/javascript/controllers/hotel_traveler_selector_controller.ts
var hotel_traveler_selector_controller_default = class extends Controller {
  static {
    this.targets = [
      "modal",
      "guestNameInput",
      "guestPhoneInput",
      "selectedPassenger",
      "checkbox"
    ];
  }
  static {
    this.values = {
      selectedPassengerId: String,
      selectedPassengerName: String,
      selectedPassengerPhone: String
    };
  }
  connect() {
    console.log("HotelTravelerSelector connected");
  }
  // Open modal
  openModal() {
    console.log("Opening traveler selector modal");
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // Close modal
  closeModal() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  // Toggle passenger selection via checkbox
  togglePassenger(event2) {
    const checkbox = event2.currentTarget;
    const passengerId = checkbox.dataset.passengerId || "";
    const passengerName = checkbox.dataset.passengerName || "";
    const passengerPhone = checkbox.dataset.passengerPhone || "";
    if (checkbox.checked) {
      this.checkboxTargets.forEach((cb) => {
        if (cb !== checkbox) {
          cb.checked = false;
        }
      });
      console.log("Selected passenger:", { passengerId, passengerName, passengerPhone });
      this.selectedPassengerIdValue = passengerId;
      this.selectedPassengerNameValue = passengerName;
      this.selectedPassengerPhoneValue = passengerPhone;
      this.guestNameInputTarget.value = passengerName;
      this.guestPhoneInputTarget.value = passengerPhone;
      if (this.hasSelectedPassengerTarget) {
        this.selectedPassengerTarget.textContent = passengerName;
      }
      this.closeModal();
    } else {
      console.log("Unselected passenger");
      this.selectedPassengerIdValue = "";
      this.selectedPassengerNameValue = "";
      this.selectedPassengerPhoneValue = "";
      this.guestNameInputTarget.value = "";
      this.guestPhoneInputTarget.value = "";
      if (this.hasSelectedPassengerTarget) {
        this.selectedPassengerTarget.textContent = "";
      }
    }
  }
  // Manual input - clear selection
  clearSelection() {
    this.selectedPassengerIdValue = "";
    this.selectedPassengerNameValue = "";
    this.selectedPassengerPhoneValue = "";
  }
  // Stop propagation for inner clicks
  stopPropagation(event2) {
    event2.stopPropagation();
  }
};

// app/javascript/controllers/toast_controller.ts
var toast_controller_default = class extends Controller {
  connect() {
    setTimeout(() => {
      this.element.classList.add("animate-fade-out");
      setTimeout(() => {
        if (this.element.parentNode) {
          this.element.parentNode.removeChild(this.element);
        }
      }, 300);
    }, 2e3);
  }
};

// app/javascript/controllers/toast_trigger_controller.ts
var toast_trigger_controller_default = class extends Controller {
  static {
    this.values = {
      message: String
    };
  }
  connect() {
    if (this.messageValue && window.showToast) {
      window.showToast(this.messageValue);
    }
    this.element.remove();
  }
};

// app/javascript/controllers/hotel_booking_controller.ts
var hotel_booking_controller_default = class extends Controller {
  static {
    this.targets = ["insuranceModal", "confirmModal", "form", "totalPriceAmount", "roomsCount", "roomsInput"];
  }
  // Handle insurance option selection in form
  selectInsuranceOption(event2) {
    const radio = event2.currentTarget;
    const insuranceType = radio.dataset.insuranceType || "none";
    const insurancePrice = radio.dataset.insurancePrice || "0";
    this.setInsuranceValues(insuranceType, insurancePrice);
    const allCards = document.querySelectorAll("[data-insurance-card]");
    allCards.forEach((card) => {
      card.classList.remove("border-orange-400", "border-gray-400");
      card.classList.add("border-2", "border-gray-300");
    });
    const selectedCard = radio.closest("[data-insurance-card]");
    if (selectedCard) {
      selectedCard.classList.remove("border-gray-300");
      if (insuranceType === "none") {
        selectedCard.classList.add("border-gray-400");
      } else {
        selectedCard.classList.add("border-orange-400");
      }
    }
    this.updateTotalPrice();
  }
  // Update total price display
  updateTotalPrice() {
    this.updateTotalPriceWithRooms();
  }
  setInsuranceValues(insuranceType, insurancePrice) {
    const insuranceTypeField = document.getElementById("hotel_booking_insurance_type");
    const insurancePriceField = document.getElementById("hotel_booking_insurance_price");
    if (insuranceTypeField) {
      insuranceTypeField.value = insuranceType;
    }
    if (insurancePriceField) {
      insurancePriceField.value = insurancePrice;
    }
  }
  // Handle submit button click
  handleSubmit(event2) {
    event2.preventDefault();
    const guestNameField = document.getElementById("hotel_booking_guest_name");
    const guestPhoneField = document.getElementById("hotel_booking_guest_phone");
    const guestName = guestNameField?.value?.trim() || "";
    const guestPhone = guestPhoneField?.value?.trim() || "";
    if (!guestName) {
      alert("\u8BF7\u586B\u5199\u5165\u4F4F\u4EBA\u59D3\u540D");
      guestNameField?.focus();
      return;
    }
    if (!guestPhone) {
      alert("\u8BF7\u586B\u5199\u8054\u7CFB\u624B\u673A");
      guestPhoneField?.focus();
      return;
    }
    const phoneRegex = /^1[3-9]\d{9}$/;
    if (!phoneRegex.test(guestPhone)) {
      alert("\u8BF7\u586B\u5199\u6B63\u786E\u7684\u624B\u673A\u53F7\u7801");
      guestPhoneField?.focus();
      return;
    }
    const insuranceTypeField = document.getElementById("hotel_booking_insurance_type");
    const insuranceType = insuranceTypeField?.value || "none";
    if (insuranceType === "none") {
      this.showInsuranceModal();
    } else {
      this.showConfirmModal();
    }
  }
  showInsuranceModal() {
    this.insuranceModalTarget.classList.remove("hidden");
  }
  closeInsuranceModal() {
    this.insuranceModalTarget.classList.add("hidden");
  }
  // Select recommended insurance from modal
  selectRecommendedInsurance(event2) {
    const button = event2.currentTarget;
    const insuranceType = button.dataset.insuranceType || "hotel_cancellation";
    const insurancePrice = button.dataset.insurancePrice || "16";
    this.setInsuranceValues(insuranceType, insurancePrice);
    const targetRadio = document.querySelector(`input[name="insurance_selection"][value="${insuranceType}"]`);
    if (targetRadio) {
      targetRadio.checked = true;
      targetRadio.dispatchEvent(new Event("change", { bubbles: true }));
    }
    this.closeInsuranceModal();
    this.showConfirmModal();
  }
  // Skip insurance selection
  skipInsurance() {
    this.setInsuranceValues("none", "0");
    this.closeInsuranceModal();
    this.showConfirmModal();
  }
  showConfirmModal() {
    this.confirmModalTarget.classList.remove("hidden");
    setTimeout(() => {
      this.submitForm();
    }, 1e4);
  }
  closeConfirmModal() {
    this.confirmModalTarget.classList.add("hidden");
  }
  submitForm() {
    console.log("Submitting form:", this.formTarget);
    this.formTarget.submit();
  }
  // Increase room count
  increaseRooms(event2) {
    event2.preventDefault();
    const currentCount = parseInt(this.roomsInputTarget.value || "1");
    const newCount = currentCount + 1;
    this.roomsInputTarget.value = newCount.toString();
    this.roomsCountTarget.textContent = `${newCount}\u95F4`;
    this.updateTotalPriceWithRooms();
  }
  // Decrease room count
  decreaseRooms(event2) {
    event2.preventDefault();
    const currentCount = parseInt(this.roomsInputTarget.value || "1");
    if (currentCount <= 1) return;
    const newCount = currentCount - 1;
    this.roomsInputTarget.value = newCount.toString();
    this.roomsCountTarget.textContent = `${newCount}\u95F4`;
    this.updateTotalPriceWithRooms();
  }
  // Update total price considering rooms count
  updateTotalPriceWithRooms() {
    if (!this.totalPriceAmountTarget) return;
    const roomPrice = parseFloat(this.totalPriceAmountTarget.dataset.roomPrice || "0");
    const nights = parseInt(this.totalPriceAmountTarget.dataset.nights || "1");
    const roomsCount = parseInt(this.roomsInputTarget.value || "1");
    const insurancePriceField = document.getElementById("hotel_booking_insurance_price");
    const insurancePrice = parseFloat(insurancePriceField?.value || "0");
    const basePrice = roomPrice * nights * roomsCount;
    const totalPrice = basePrice + insurancePrice;
    this.totalPriceAmountTarget.textContent = totalPrice.toFixed(2);
    this.totalPriceAmountTarget.dataset.basePrice = basePrice.toFixed(2);
  }
};

// app/javascript/controllers/tour_detail_controller.ts
var tour_detail_controller_default = class extends Controller {
  static {
    this.targets = [
      "packageSelector",
      "priceDisplay"
    ];
  }
  static {
    this.values = {
      selectedPackageId: Number
    };
  }
  connect() {
    console.log("TourDetail controller connected");
  }
  disconnect() {
    console.log("TourDetail controller disconnected");
  }
  // Navigate to packages tab
  selectPackage() {
    const currentUrl = new URL(window.location.href);
    currentUrl.searchParams.set("tab", "packages");
    window.location.href = currentUrl.toString();
  }
  // Select a specific package
  selectThisPackage(event2) {
    const target = event2.currentTarget;
    const packageId = target.dataset.packageId;
    if (packageId) {
      this.selectedPackageIdValue = parseInt(packageId);
      const currentUrl = new URL(window.location.href);
      currentUrl.searchParams.set("tab", "overview");
      currentUrl.searchParams.set("package_id", packageId);
      window.location.href = currentUrl.toString();
    }
  }
  // Scroll to specific section (for smooth navigation)
  scrollToSection(event2) {
    const target = event2.currentTarget;
    const sectionId = target.dataset.section;
    if (sectionId) {
      const section = document.getElementById(sectionId);
      if (section) {
        section.scrollIntoView({ behavior: "smooth", block: "start" });
      }
    }
  }
};

// app/javascript/controllers/carousel_controller.ts
var carousel_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    // Handle touch/swipe gestures
    this.touchStartX = 0;
    this.touchEndX = 0;
  }
  static {
    this.targets = ["slide", "indicator"];
  }
  static {
    this.values = {
      index: { type: Number, default: 0 },
      autoplay: { type: Boolean, default: false },
      interval: { type: Number, default: 5e3 }
    };
  }
  connect() {
    console.log("Carousel controller connected");
    this.showSlide(this.indexValue);
    if (this.autoplayValue) {
      this.startAutoplay();
    }
  }
  disconnect() {
    console.log("Carousel controller disconnected");
    this.stopAutoplay();
  }
  // Navigate to previous slide
  previous() {
    this.stopAutoplay();
    const newIndex = this.indexValue > 0 ? this.indexValue - 1 : this.slideTargets.length - 1;
    this.indexValue = newIndex;
    this.showSlide(newIndex);
  }
  // Navigate to next slide
  next() {
    this.stopAutoplay();
    const newIndex = this.indexValue < this.slideTargets.length - 1 ? this.indexValue + 1 : 0;
    this.indexValue = newIndex;
    this.showSlide(newIndex);
  }
  // Go to specific slide
  goTo(event2) {
    this.stopAutoplay();
    const target = event2.currentTarget;
    const index = parseInt(target.dataset.index || "0");
    this.indexValue = index;
    this.showSlide(index);
  }
  // Show specific slide
  showSlide(index) {
    this.slideTargets.forEach((slide, i) => {
      if (i === index) {
        slide.classList.remove("hidden");
      } else {
        slide.classList.add("hidden");
      }
    });
    if (this.hasIndicatorTarget) {
      this.indicatorTargets?.forEach((indicator, i) => {
        if (i === index) {
          indicator.classList.add("active");
        } else {
          indicator.classList.remove("active");
        }
      });
    }
  }
  // Autoplay functionality
  startAutoplay() {
    this.autoplayTimer = window.setInterval(() => {
      this.next();
    }, this.intervalValue);
  }
  stopAutoplay() {
    if (this.autoplayTimer) {
      clearInterval(this.autoplayTimer);
      this.autoplayTimer = void 0;
    }
  }
  handleTouchStart(event2) {
    this.touchStartX = event2.changedTouches[0].screenX;
  }
  handleTouchEnd(event2) {
    this.touchEndX = event2.changedTouches[0].screenX;
    this.handleSwipe();
  }
  handleSwipe() {
    const swipeThreshold = 50;
    const diff = this.touchStartX - this.touchEndX;
    if (Math.abs(diff) > swipeThreshold) {
      if (diff > 0) {
        this.next();
      } else {
        this.previous();
      }
    }
  }
};

// app/javascript/controllers/scroll_spy_controller.ts
var scroll_spy_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.observer = null;
    this.isScrolling = false;
  }
  static {
    this.targets = ["tab", "section"];
  }
  static {
    this.values = {
      offset: { type: Number, default: 120 }
      // Top offset for nav bars (top nav 56px + tab nav 56px + extra 8px)
    };
  }
  connect() {
    console.log("ScrollSpy controller connected");
    this.setupIntersectionObserver();
    this.updateActiveTab();
  }
  disconnect() {
    if (this.observer) {
      this.observer.disconnect();
    }
  }
  setupIntersectionObserver() {
    const options = {
      root: null,
      rootMargin: `-${this.offsetValue}px 0px -50% 0px`,
      // Active when section is near top
      threshold: 0
    };
    this.observer = new IntersectionObserver((entries) => {
      if (this.isScrolling) return;
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          const sectionId = entry.target.id;
          this.setActiveTab(sectionId);
        }
      });
    }, options);
    this.sectionTargets.forEach((section) => {
      this.observer?.observe(section);
    });
  }
  scrollToSection(event2) {
    event2.preventDefault();
    event2.stopPropagation();
    const target = event2.currentTarget;
    const sectionId = target.dataset.section;
    if (!sectionId) return;
    const section = document.getElementById(sectionId);
    if (!section) return;
    this.isScrolling = true;
    const sectionTop = section.getBoundingClientRect().top + window.scrollY;
    const scrollTo = sectionTop - this.offsetValue;
    window.scrollTo({
      top: scrollTo,
      behavior: "smooth"
    });
    this.setActiveTab(sectionId);
    setTimeout(() => {
      this.isScrolling = false;
    }, 1e3);
  }
  setActiveTab(sectionId) {
    this.tabTargets.forEach((tab) => {
      tab.classList.remove("border-primary", "text-primary");
      tab.classList.add("border-transparent", "text-foreground-muted");
    });
    const activeTab = this.tabTargets.find((tab) => tab.dataset.section === sectionId);
    if (activeTab) {
      activeTab.classList.remove("border-transparent", "text-foreground-muted");
      activeTab.classList.add("border-primary", "text-primary");
      activeTab.scrollIntoView({
        behavior: "smooth",
        block: "nearest",
        inline: "center"
      });
    }
  }
  updateActiveTab() {
    const scrollPosition = window.pageYOffset + this.offsetValue + 10;
    for (let i = this.sectionTargets.length - 1; i >= 0; i--) {
      const section = this.sectionTargets[i];
      const sectionTop = section.offsetTop;
      if (scrollPosition >= sectionTop) {
        this.setActiveTab(section.id);
        break;
      }
    }
  }
};

// app/javascript/controllers/package_switcher_controller.ts
var package_switcher_controller_default = class extends Controller {
  static {
    this.targets = ["card", "details"];
  }
  static {
    this.values = {
      selectedId: Number
    };
  }
  connect() {
    console.log("PackageSwitcher connected");
    window.addEventListener("booking-modal:package-changed", (event2) => {
      const customEvent = event2;
      const packageId = customEvent.detail.packageId;
      if (packageId && packageId !== this.selectedIdValue) {
        this.syncPackageSelection(packageId);
      }
    });
    window.addEventListener("booking-modal:request-sync", () => {
      const syncEvent = new CustomEvent("package:selected", {
        detail: { packageId: this.selectedIdValue }
      });
      window.dispatchEvent(syncEvent);
    });
  }
  selectPackage(event2) {
    const card = event2.currentTarget;
    const packageId = parseInt(card.dataset.packageId || "0");
    if (packageId === this.selectedIdValue) {
      return;
    }
    this.selectedIdValue = packageId;
    this.updatePackageUI(packageId);
    const customEvent = new CustomEvent("package:selected", {
      detail: { packageId }
    });
    window.dispatchEvent(customEvent);
  }
  syncPackageSelection(packageId) {
    this.selectedIdValue = packageId;
    this.updatePackageUI(packageId);
  }
  updatePackageUI(packageId) {
    this.cardTargets.forEach((cardEl) => {
      const cardPackageId = parseInt(cardEl.dataset.packageId || "0");
      if (cardPackageId === packageId) {
        cardEl.classList.remove("bg-white", "border-gray-100", "border");
        cardEl.classList.add("bg-[#FFF9E6]", "border-2", "border-[#FFD700]");
        const checkmark = cardEl.querySelector('svg[viewBox="0 0 20 20"]');
        if (checkmark) {
          checkmark.classList.remove("hidden");
        }
      } else {
        cardEl.classList.remove("bg-[#FFF9E6]", "border-2", "border-[#FFD700]");
        cardEl.classList.add("bg-white", "border", "border-gray-100");
        const checkmark = cardEl.querySelector('svg[viewBox="0 0 20 20"]');
        if (checkmark) {
          checkmark.classList.add("hidden");
        }
      }
    });
    const detailsContainer = this.detailsTarget;
    const allDetails = detailsContainer.querySelectorAll("[data-package-id]");
    allDetails.forEach((detail) => {
      const detailElement = detail;
      const detailPackageId = parseInt(detailElement.dataset.packageId || "0");
      if (detailPackageId === packageId) {
        detailElement.classList.remove("hidden");
      } else {
        detailElement.classList.add("hidden");
      }
    });
  }
};

// app/javascript/controllers/booking_modal_controller.ts
var booking_modal_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedPackageId = null;
    this.selectedDate = null;
    this.adultQuantity = 1;
    this.childQuantity = 0;
  }
  static {
    this.targets = [
      "modal",
      "packageBtn",
      "monthTab",
      "calendar",
      "dateBtn",
      "adultCount",
      "childCount"
    ];
  }
  connect() {
    console.log("Booking modal controller connected");
    window.addEventListener("package:selected", (event2) => {
      const customEvent = event2;
      const packageId = customEvent.detail.packageId;
      if (packageId && packageId !== this.selectedPackageId) {
        this.syncPackageSelection(packageId);
      }
    });
    window.addEventListener("bottom-bar:open-modal", () => {
      this.open();
    });
  }
  open() {
    const event2 = new CustomEvent("booking-modal:request-sync");
    window.dispatchEvent(event2);
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  close() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  selectPackage(event2) {
    const btn = event2.currentTarget;
    const packageId = parseInt(btn.dataset.packageId || "0");
    this.selectedPackageId = packageId;
    this.updatePackageButtons(packageId);
    const customEvent = new CustomEvent("booking-modal:package-changed", {
      detail: { packageId }
    });
    window.dispatchEvent(customEvent);
  }
  syncPackageSelection(packageId) {
    this.selectedPackageId = packageId;
    this.updatePackageButtons(packageId);
  }
  updatePackageButtons(packageId) {
    this.packageBtnTargets.forEach((btnEl) => {
      const btnPackageId = parseInt(btnEl.dataset.packageId || "0");
      if (btnPackageId === packageId) {
        btnEl.classList.remove("bg-white", "border-gray-200");
        btnEl.classList.add("bg-[#FFF9E6]", "border-[#FFD700]");
        if (!btnEl.querySelector("svg")) {
          const checkmark = document.createElementNS("http://www.w3.org/2000/svg", "svg");
          checkmark.classList.add("absolute", "top-2", "right-2", "w-5", "h-5");
          checkmark.style.color = "#FFD700";
          checkmark.setAttribute("fill", "currentColor");
          checkmark.setAttribute("viewBox", "0 0 20 20");
          const pathD = "M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z";
          checkmark.innerHTML = `<path fill-rule="evenodd" d="${pathD}" clip-rule="evenodd"></path>`;
          btnEl.appendChild(checkmark);
        }
      } else {
        btnEl.classList.remove("bg-[#FFF9E6]", "border-[#FFD700]");
        btnEl.classList.add("bg-white", "border-gray-200");
        const checkmark = btnEl.querySelector("svg");
        if (checkmark) {
          checkmark.remove();
        }
      }
    });
  }
  selectMonth(event2) {
    const btn = event2.currentTarget;
    const month = btn.dataset.month;
    this.monthTabTargets.forEach((tabEl) => {
      if (tabEl.dataset.month === month) {
        tabEl.classList.remove("text-foreground-muted");
        tabEl.classList.add("text-red-500", "border-b-2", "border-red-500");
      } else {
        tabEl.classList.remove("text-red-500", "border-b-2", "border-red-500");
        tabEl.classList.add("text-foreground-muted");
      }
    });
  }
  selectDate(event2) {
    const btn = event2.currentTarget;
    const date = btn.dataset.date;
    if (!date || btn.disabled) return;
    this.selectedDate = date;
    this.dateBtnTargets.forEach((dateBtn) => {
      if (dateBtn.dataset.date === date) {
        dateBtn.style.background = "#FFD700";
        dateBtn.style.color = "#000";
      } else {
        dateBtn.style.background = "";
        dateBtn.style.color = "";
      }
    });
  }
  increaseAdult() {
    this.adultQuantity++;
    this.adultCountTarget.textContent = this.adultQuantity.toString();
  }
  decreaseAdult() {
    if (this.adultQuantity > 1) {
      this.adultQuantity--;
      this.adultCountTarget.textContent = this.adultQuantity.toString();
    }
  }
  increaseChild() {
    this.childQuantity++;
    this.childCountTarget.textContent = this.childQuantity.toString();
  }
  decreaseChild() {
    if (this.childQuantity > 0) {
      this.childQuantity--;
      this.childCountTarget.textContent = this.childQuantity.toString();
    }
  }
  addToCart() {
    if (!this.validateSelection()) {
      return;
    }
    console.log("Adding to cart:", {
      packageId: this.selectedPackageId,
      date: this.selectedDate,
      adults: this.adultQuantity,
      children: this.childQuantity
    });
    alert("\u5DF2\u52A0\u5165\u8D2D\u7269\u8F66");
    this.close();
  }
  buyNow() {
    if (!this.validateSelection()) {
      return;
    }
    const productId = window.location.pathname.split("/").pop();
    const params = new URLSearchParams({
      product_id: productId || "",
      package_id: (this.selectedPackageId || "").toString(),
      travel_date: this.selectedDate || "",
      adult_count: this.adultQuantity.toString(),
      child_count: this.childQuantity.toString()
    });
    window.location.href = `/tour_group_bookings/new?${params.toString()}`;
  }
  validateSelection() {
    if (!this.selectedDate) {
      alert("\u8BF7\u9009\u62E9\u51FA\u884C\u65E5\u671F");
      return false;
    }
    if (this.adultQuantity < 1) {
      alert("\u81F3\u5C11\u9700\u89811\u4F4D\u6210\u4EBA");
      return false;
    }
    return true;
  }
};

// app/javascript/controllers/bottom_bar_controller.ts
var bottom_bar_controller_default = class extends Controller {
  connect() {
    console.log("Bottom bar controller connected");
  }
  openModal() {
    const event2 = new CustomEvent("bottom-bar:open-modal");
    window.dispatchEvent(event2);
  }
};

// app/javascript/controllers/insurance_selector_controller.ts
var insurance_selector_controller_default = class extends Controller {
  static {
    this.targets = ["radio", "totalPrice"];
  }
  static {
    this.values = {
      basePrice: Number,
      adultCount: Number,
      childCount: Number
    };
  }
  connect() {
    console.log("InsuranceSelector connected");
  }
  disconnect() {
    console.log("InsuranceSelector disconnected");
  }
  updatePrice() {
    const selectedRadio = this.radioTargets.find((radio) => radio.checked);
    if (!selectedRadio) return;
    const insuranceType = selectedRadio.value;
    const totalPeople = this.adultCountValue + this.childCountValue;
    let insurancePrice = 0;
    if (insuranceType === "standard") {
      insurancePrice = 15 * totalPeople;
    } else if (insuranceType === "premium") {
      insurancePrice = 35 * totalPeople;
    }
    const totalPrice = this.basePriceValue + insurancePrice;
    this.totalPriceTarget.textContent = `\xA5${Math.round(totalPrice)}`;
  }
};

// app/javascript/controllers/tour_traveler_selector_controller.ts
var tour_traveler_selector_controller_default = class extends Controller {
  static {
    this.targets = [
      "modal",
      "travelerNameInput",
      "travelerIdInput"
    ];
  }
  static {
    this.values = {
      selectedPassengerId: String,
      selectedPassengerName: String,
      selectedPassengerIdNumber: String,
      travelerIndex: Number
    };
  }
  connect() {
    console.log("TourTravelerSelector connected");
  }
  disconnect() {
    console.log("TourTravelerSelector disconnected");
  }
  // Open modal for specific traveler
  openModal(event2) {
    const target = event2.currentTarget;
    const travelerIndex = parseInt(target.dataset.travelerIndex || "0");
    console.log("Opening traveler selector modal for index:", travelerIndex);
    this.travelerIndexValue = travelerIndex;
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // Close modal
  closeModal() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  // Select a passenger from the list
  selectPassenger(event2) {
    const target = event2.currentTarget;
    const passengerId = target.dataset.passengerId || "";
    const passengerName = target.dataset.passengerName || "";
    const passengerIdNumber = target.dataset.passengerIdNumber || "";
    console.log("Selected passenger:", { passengerId, passengerName, passengerIdNumber, travelerIndex: this.travelerIndexValue });
    this.selectedPassengerIdValue = passengerId;
    this.selectedPassengerNameValue = passengerName;
    this.selectedPassengerIdNumberValue = passengerIdNumber;
    if (this.travelerNameInputTargets[this.travelerIndexValue]) {
      this.travelerNameInputTargets[this.travelerIndexValue].value = passengerName;
    }
    if (this.travelerIdInputTargets[this.travelerIndexValue]) {
      this.travelerIdInputTargets[this.travelerIndexValue].value = passengerIdNumber;
    }
    this.closeModal();
  }
  // Stop propagation for inner clicks
  stopPropagation(event2) {
    event2.stopPropagation();
  }
};

// app/javascript/controllers/special_flights_form_controller.ts
var special_flights_form_controller_default = class extends Controller {
  connect() {
    console.log("SpecialFlightsForm controller connected");
  }
  handleSubmit(event2) {
    event2.preventDefault();
    const form = this.element;
    const formData = new FormData(form);
    const destinationCities = formData.get("destination_cities");
    const departureCity = formData.get("departure_city");
    const date = formData.get("date");
    const sortBy = formData.get("sort_by");
    const tripType = formData.get("trip_type");
    const cities = destinationCities.split(",").map((city) => city.trim()).filter((city) => city !== "");
    const isMultiCity = cities.length > 1;
    let url;
    const params = new URLSearchParams();
    if (isMultiCity) {
      url = "/flights/combinations";
      params.append("departure_city", departureCity);
      params.append("destination_cities", destinationCities);
      params.append("date", date);
      params.append("sort_by", sortBy);
      params.append("trip_type", tripType);
    } else {
      url = "/flights/search";
      params.append("departure_city", departureCity);
      params.append("destination_city", cities[0] || destinationCities);
      params.append("date", date);
      params.append("sort_by", sortBy);
      params.append("trip_type", tripType);
    }
    const fullUrl = `${url}?${params.toString()}`;
    console.log("Redirecting to:", fullUrl);
    window.location.href = fullUrl;
  }
};

// app/javascript/controllers/train_booking_controller.ts
var train_booking_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.basePrice = 0;
    this.insurancePrice = 0;
    this.currentCarriage = "";
    this.selectedSeats = /* @__PURE__ */ new Set();
    this.maxSeats = 1;
  }
  static {
    this.targets = [
      "totalPrice",
      "selectedCarriage",
      "carriageButton",
      "seatButton",
      "selectedSeatCount"
    ];
  }
  connect() {
    const priceField = document.getElementById("booking_total_price");
    if (priceField) {
      this.basePrice = parseFloat(priceField.value || "0");
    }
    this.updateTotalPrice();
  }
  selectPassenger(event2) {
    const radio = event2.currentTarget;
    const passengerName = radio.dataset.passengerName || "";
    const idNumber = radio.dataset.idNumber || "";
    const phone = radio.dataset.phone || "";
    const nameField = document.getElementById("booking_passenger_name");
    const idField = document.getElementById("booking_passenger_id_number");
    const phoneField = document.getElementById("booking_contact_phone");
    if (nameField) nameField.value = passengerName;
    if (idField) idField.value = idNumber;
    if (phoneField) phoneField.value = phone;
  }
  selectCarriage(event2) {
    const button = event2.currentTarget;
    const carriage = button.dataset.carriage || "";
    if (this.currentCarriage === carriage) {
      button.classList.remove("bg-orange-500", "text-white", "border-orange-500");
      button.classList.add("bg-white", "text-gray-700", "border-gray-300");
      this.selectedCarriageTarget.value = "";
      this.currentCarriage = "";
    } else {
      this.carriageButtonTargets.forEach((btn) => {
        btn.classList.remove("bg-orange-500", "text-white", "border-orange-500");
        btn.classList.add("bg-white", "text-gray-700", "border-gray-300");
      });
      button.classList.remove("bg-white", "text-gray-700", "border-gray-300");
      button.classList.add("bg-orange-500", "text-white", "border-orange-500");
      this.selectedCarriageTarget.value = carriage;
      this.currentCarriage = carriage;
    }
  }
  selectSeat(event2) {
    const button = event2.currentTarget;
    const seatLetter = button.dataset.seatLetter || "";
    if (!seatLetter) return;
    if (this.selectedSeats.has(seatLetter)) {
      this.selectedSeats.delete(seatLetter);
      button.classList.remove("bg-orange-500", "text-white", "border-orange-500");
      button.classList.add("bg-white", "text-gray-700", "border-gray-300");
    } else {
      if (this.selectedSeats.size >= this.maxSeats) {
        window.showToast(`\u6700\u591A\u53EA\u80FD\u9009\u62E9${this.maxSeats}\u4E2A\u5EA7\u4F4D`);
        return;
      }
      this.selectedSeats.add(seatLetter);
      button.classList.remove("bg-white", "text-gray-700", "border-gray-300", "bg-gray-100", "text-gray-400");
      button.classList.add("bg-orange-500", "text-white", "border-orange-500");
    }
    this.updateSelectedSeatCount();
  }
  updateSelectedSeatCount() {
    if (this.selectedSeatCountTarget) {
      this.selectedSeatCountTarget.textContent = `${this.selectedSeats.size}/${this.maxSeats}`;
    }
  }
  toggleNearDoor(event2) {
    const checkbox = event2.currentTarget;
    if (checkbox.checked) {
      console.log("Near door option selected");
    }
  }
  handleNormalBooking() {
    const form = this.element.querySelector("form");
    if (!form) return;
    const passengerRadio = document.querySelector('input[name="passenger"]:checked');
    if (!passengerRadio) {
      window.showToast("\u8BF7\u9009\u62E9\u4E58\u8F66\u4EBA");
      return;
    }
    const phoneField = document.getElementById("booking_contact_phone");
    if (!phoneField || !phoneField.value.trim()) {
      window.showToast("\u8BF7\u8F93\u5165\u8054\u7CFB\u624B\u673A");
      return;
    }
    const acceptTermsField = document.getElementById("booking_accept_terms");
    if (acceptTermsField) {
      acceptTermsField.value = "1";
    }
    HTMLFormElement.prototype.submit.call(form);
  }
  selectInsuranceOption(event2) {
    const radio = event2.currentTarget;
    const insuranceType = radio.value;
    const insurancePrice = parseFloat(radio.dataset.price || "0");
    const insuranceTypeField = document.getElementById("booking_insurance_type");
    const insurancePriceField = document.getElementById("booking_insurance_price");
    if (insuranceTypeField) insuranceTypeField.value = insuranceType;
    if (insurancePriceField) insurancePriceField.value = insurancePrice.toString();
    this.insurancePrice = insurancePrice;
    this.updateTotalPrice();
  }
  handleSubmit(event2) {
    event2.preventDefault();
    const passengerRadio = document.querySelector('input[name="passenger"]:checked');
    if (!passengerRadio) {
      alert("\u8BF7\u9009\u62E9\u4E58\u8F66\u4EBA");
      return;
    }
    const phoneField = document.getElementById("booking_contact_phone");
    if (!phoneField || !phoneField.value.trim()) {
      alert("\u8BF7\u8F93\u5165\u8054\u7CFB\u624B\u673A");
      return;
    }
    const visualCheckbox = document.getElementById("visual_accept_terms");
    if (!visualCheckbox || !visualCheckbox.checked) {
      this.showTermsModal();
      return;
    }
    const insuranceTypeField = document.getElementById("booking_insurance_type");
    const insuranceType = insuranceTypeField?.value || "none";
    if (insuranceType === "none") {
      this.showInsuranceModal();
    } else {
      this.submitBooking();
    }
  }
  showTermsModal() {
    const modal = document.createElement("div");
    modal.className = "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50";
    modal.innerHTML = `
      <div class="bg-white rounded-lg p-6 max-w-md mx-4">
        <h3 class="text-xl font-bold mb-4">\u7528\u6237\u534F\u8BAE\u548C\u9690\u79C1\u653F\u7B56</h3>
        <div class="max-h-60 overflow-y-auto mb-4 text-sm text-gray-600">
          <p class="mb-2">\u6B22\u8FCE\u4F7F\u7528\u6211\u4EEC\u7684\u670D\u52A1\u3002\u8BF7\u4ED4\u7EC6\u9605\u8BFB\u4EE5\u4E0B\u6761\u6B3E\uFF1A</p>
          <p class="mb-2">1. \u670D\u52A1\u6761\u6B3E...</p>
          <p class="mb-2">2. \u9690\u79C1\u653F\u7B56...</p>
          <p class="mb-2">3. \u9000\u6539\u89C4\u5219...</p>
        </div>
        <div class="flex space-x-3">
          <button class="flex-1 py-3 border border-gray-300 rounded" data-action="decline">
            \u4E0D\u540C\u610F
          </button>
          <button class="flex-1 py-3 bg-orange-500 text-white rounded" data-action="accept">
            \u540C\u610F
          </button>
        </div>
      </div>
    `;
    const declineBtn = modal.querySelector('[data-action="decline"]');
    const acceptBtn = modal.querySelector('[data-action="accept"]');
    declineBtn?.addEventListener("click", () => {
      document.body.removeChild(modal);
    });
    acceptBtn?.addEventListener("click", () => {
      this.acceptTerms();
      document.body.removeChild(modal);
    });
    document.body.appendChild(modal);
  }
  acceptTerms() {
    const visualCheckbox = document.getElementById("visual_accept_terms");
    const hiddenField = document.getElementById("booking_accept_terms");
    if (visualCheckbox) visualCheckbox.checked = true;
    if (hiddenField) hiddenField.value = "1";
    const insuranceTypeField = document.getElementById("booking_insurance_type");
    const insuranceType = insuranceTypeField?.value || "none";
    if (insuranceType === "none") {
      this.showInsuranceModal();
    } else {
      this.submitBooking();
    }
  }
  showInsuranceModal() {
    const existingModal = document.getElementById("insurance_recommendation_modal");
    if (existingModal) {
      existingModal.classList.remove("hidden");
      return;
    }
    const modal = document.createElement("div");
    modal.id = "insurance_recommendation_modal";
    modal.className = "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50";
    modal.innerHTML = `
      <div class="bg-white rounded-lg p-6 max-w-md mx-4">
        <h3 class="text-xl font-bold mb-4">\u5EFA\u8BAE\u8D2D\u4E70\u4FDD\u9669</h3>
        <p class="text-gray-600 mb-6">\u4E3A\u4E86\u60A8\u7684\u51FA\u884C\u5B89\u5168\uFF0C\u5EFA\u8BAE\u8D2D\u4E70\u51FA\u884C\u4FDD\u9669</p>
        
        <div class="space-y-3 mb-6">
          <label class="flex items-center justify-between p-3 border rounded cursor-pointer">
            <div>
              <div class="font-medium">\u6807\u51C6\u4FDD\u9669</div>
              <div class="text-sm text-gray-500">\xA530</div>
            </div>
            <input type="radio" name="insurance_modal" value="standard" data-price="30" class="w-5 h-5" />
          </label>
          
          <label class="flex items-center justify-between p-3 border rounded cursor-pointer">
            <div>
              <div class="font-medium">\u9AD8\u7EA7\u4FDD\u9669</div>
              <div class="text-sm text-gray-500">\xA550</div>
            </div>
            <input type="radio" name="insurance_modal" value="premium" data-price="50" class="w-5 h-5" />
          </label>
        </div>
        
        <div class="flex space-x-3">
          <button class="flex-1 py-3 border border-gray-300 rounded" data-action="skip-insurance">
            \u653E\u5F03\u4FDD\u9669
          </button>
          <button class="flex-1 py-3 bg-orange-500 text-white rounded" data-action="select-insurance">
            \u786E\u8BA4\u9009\u62E9
          </button>
        </div>
      </div>
    `;
    const skipBtn = modal.querySelector('[data-action="skip-insurance"]');
    const selectBtn = modal.querySelector('[data-action="select-insurance"]');
    skipBtn?.addEventListener("click", () => {
      document.body.removeChild(modal);
      this.submitBooking();
    });
    selectBtn?.addEventListener("click", () => {
      const selectedRadio = modal.querySelector('input[name="insurance_modal"]:checked');
      if (selectedRadio) {
        const insuranceType = selectedRadio.value;
        const insurancePrice = parseFloat(selectedRadio.dataset.price || "0");
        const insuranceTypeField = document.getElementById("booking_insurance_type");
        const insurancePriceField = document.getElementById("booking_insurance_price");
        if (insuranceTypeField) insuranceTypeField.value = insuranceType;
        if (insurancePriceField) insurancePriceField.value = insurancePrice.toString();
        this.insurancePrice = insurancePrice;
        this.updateTotalPrice();
      }
      document.body.removeChild(modal);
      this.submitBooking();
    });
    document.body.appendChild(modal);
  }
  submitBooking() {
    const form = this.element.querySelector("form");
    if (form) {
      form.submit();
    }
  }
  updateTotalPrice() {
    const total = this.basePrice + this.insurancePrice;
    if (this.totalPriceTarget) {
      this.totalPriceTarget.textContent = `\xA5${Math.round(total)}`;
    }
  }
};

// app/javascript/controllers/train_booking_lock_controller.ts
var train_booking_lock_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.lockingInterval = null;
    this.currentProgress = 0;
  }
  static {
    this.targets = [
      "statusTitle",
      "statusMessage",
      "progressPercent",
      "progressCircle",
      "seatIcon",
      "seatDisplay",
      "seatBadge",
      "paymentBar",
      "cancelBar"
    ];
  }
  connect() {
    this.startLockingAnimation();
  }
  disconnect() {
    if (this.lockingInterval) {
      clearInterval(this.lockingInterval);
    }
  }
  startLockingAnimation() {
    const totalDuration = 5e3;
    const updateInterval = 50;
    const totalSteps = totalDuration / updateInterval;
    const progressStep = 100 / totalSteps;
    this.lockingInterval = window.setInterval(() => {
      this.currentProgress += progressStep;
      if (this.currentProgress >= 100) {
        this.currentProgress = 100;
        this.completeLocking();
        if (this.lockingInterval) {
          clearInterval(this.lockingInterval);
        }
      }
      this.updateProgress(this.currentProgress);
    }, updateInterval);
  }
  updateProgress(progress) {
    if (this.hasProgressPercentTarget) {
      this.progressPercentTarget.textContent = Math.floor(progress).toString();
    }
    if (this.hasProgressCircleTarget) {
      const circumference = 534;
      const offset = circumference - progress / 100 * circumference;
      this.progressCircleTarget.style.strokeDashoffset = offset.toString();
    }
    if (this.hasSeatIconTarget) {
      if (progress % 20 < 2) {
        this.seatIconTarget.style.transform = "scale(1.2)";
        setTimeout(() => {
          if (this.hasSeatIconTarget) {
            this.seatIconTarget.style.transform = "scale(1)";
          }
        }, 200);
      }
    }
  }
  completeLocking() {
    if (this.hasStatusTitleTarget) {
      this.statusTitleTarget.textContent = "\u5360\u5EA7\u6210\u529F";
    }
    if (this.hasStatusMessageTarget) {
      const expiryTime = /* @__PURE__ */ new Date();
      expiryTime.setMinutes(expiryTime.getMinutes() + 15);
      const hours = expiryTime.getHours().toString().padStart(2, "0");
      const minutes = expiryTime.getMinutes().toString().padStart(2, "0");
      const timeString = `${hours}:${minutes}`;
      this.statusMessageTarget.innerHTML = `\u8BF7\u5728<span class="text-red-600">${timeString}</span>\u5185\u5B8C\u6210\u652F\u4ED8\uFF0C\u8D85\u65F6\u8BA2\u5355\u5C06\u5173\u95ED`;
    }
    if (this.hasSeatDisplayTarget) {
      this.seatDisplayTarget.style.display = "inline";
    }
    if (this.hasSeatBadgeTarget) {
      this.seatBadgeTarget.style.display = "inline-block";
    }
    if (this.hasSeatIconTarget) {
      this.seatIconTarget.textContent = "\u{1FA91}";
      this.seatIconTarget.style.transform = "scale(1.3)";
      setTimeout(() => {
        if (this.hasSeatIconTarget) {
          this.seatIconTarget.style.transform = "scale(1)";
        }
      }, 300);
    }
    if (this.hasCancelBarTarget) {
      this.cancelBarTarget.style.display = "none";
    }
    if (this.hasPaymentBarTarget) {
      this.paymentBarTarget.style.display = "block";
    }
  }
};

// app/javascript/controllers/train_seat_selector_controller.ts
var train_seat_selector_controller_default = class extends Controller {
  static {
    this.targets = ["seatTab", "optionsContainer"];
  }
  static {
    this.values = {
      trainId: String,
      selectedSeatType: { type: String, default: "second_class" }
    };
  }
  connect() {
    console.log("TrainSeatSelector connected");
    if (this.seatTabTargets.length > 0) {
      this.selectSeat(this.seatTabTargets[0]);
    }
  }
  // 
  selectSeat(event2) {
    const target = event2 instanceof Event ? event2.currentTarget : event2;
    const seatType = target.dataset.seatType;
    const seatPrice = parseFloat(target.dataset.seatPrice || "0");
    if (!seatType) return;
    this.seatTabTargets.forEach((tab) => {
      tab.classList.remove("bg-white", "shadow");
    });
    target.classList.add("bg-white", "shadow");
    this.seatTabTargets.forEach((tab) => {
      const arrow = tab.querySelector(".seat-arrow");
      if (arrow) {
        if (tab === target) {
          arrow.classList.remove("hidden");
        } else {
          arrow.classList.add("hidden");
        }
      }
    });
    this.selectedSeatTypeValue = seatType;
    this.updateBookingOptions(seatPrice);
  }
  // 
  updateBookingOptions(basePrice) {
    const links = this.optionsContainerTarget.querySelectorAll('a[href*="train_bookings/new"]');
    links.forEach((link) => {
      if (link instanceof HTMLAnchorElement) {
        const url = new URL(link.href, window.location.origin);
        url.searchParams.set("seat_type", this.selectedSeatTypeValue);
        link.href = url.toString();
      }
    });
    const priceElements = this.optionsContainerTarget.querySelectorAll(".booking-option-price");
    priceElements.forEach((priceEl) => {
      if (priceEl instanceof HTMLElement) {
        const extraFee = parseFloat(priceEl.dataset.extraFee || "0");
        const totalPrice = Math.floor(basePrice + extraFee);
        priceEl.textContent = totalPrice.toString();
      }
    });
  }
};

// app/javascript/controllers/tour_group_filter_controller.ts
var tour_group_filter_controller_default = class extends Controller {
  static {
    this.targets = [
      "destinationInput",
      "durationInput",
      "groupSizeInput",
      "destinationButton",
      "durationButton",
      "groupSizeButton",
      "departureDisplay"
    ];
  }
  static {
    this.values = {
      destination: String,
      duration: String,
      groupSize: String
    };
  }
  connect() {
    this.element.addEventListener("city-selector:city-changed", this.handleCityChanged.bind(this));
    if (this.groupSizeValue) {
      this.autoSelectGroupSize(this.groupSizeValue);
    }
  }
  disconnect() {
    this.element.removeEventListener("city-selector:city-changed", this.handleCityChanged.bind(this));
  }
  // Handle city change from city-selector modal
  handleCityChanged(event2) {
    const customEvent = event2;
    const { cityName } = customEvent.detail;
    console.log("TourGroupFilter: City changed to", cityName);
    this.destinationValue = cityName;
    this.destinationInputTarget.value = cityName;
    this.updateHotDestinationButtons(cityName);
  }
  // Update hot destination buttons based on selected city
  updateHotDestinationButtons(cityName) {
    let cityInHotList = false;
    this.destinationButtonTargets.forEach((btn) => {
      if (btn.dataset.destination === cityName) {
        btn.classList.remove("bg-gray-50");
        btn.classList.add("bg-[#FFE8CC]");
        cityInHotList = true;
      } else {
        btn.classList.add("bg-gray-50");
        btn.classList.remove("bg-[#FFE8CC]");
      }
    });
    console.log(`City "${cityName}" ${cityInHotList ? "is" : "is not"} in hot destination list`);
  }
  // 
  selectDestination(event2) {
    const button = event2.currentTarget;
    const destination = button.dataset.destination || "";
    this.destinationValue = destination;
    this.destinationInputTarget.value = destination;
    this.departureDisplayTarget.textContent = destination;
    this.updateHotDestinationButtons(destination);
  }
  // 
  selectDuration(event2) {
    const button = event2.currentTarget;
    const duration = button.dataset.duration || "";
    this.durationValue = duration;
    this.durationInputTarget.value = duration;
    this.durationButtonTargets.forEach((btn) => {
      if (btn.dataset.duration === duration) {
        btn.classList.remove("bg-gray-50");
        btn.classList.add("bg-[#FFE8CC]");
      } else {
        btn.classList.add("bg-gray-50");
        btn.classList.remove("bg-[#FFE8CC]");
      }
    });
  }
  // 
  selectGroupSize(event2) {
    const button = event2.currentTarget;
    const groupSize = button.dataset.groupSize || "";
    this.groupSizeValue = groupSize;
    this.groupSizeInputTarget.value = groupSize;
    this.updateGroupSizeButtons(groupSize);
  }
  // Auto-select group size on page load
  autoSelectGroupSize(groupSize) {
    if (this.groupSizeInputTarget) {
      this.groupSizeInputTarget.value = groupSize;
    }
    this.updateGroupSizeButtons(groupSize);
  }
  // Update group size button styles
  updateGroupSizeButtons(groupSize) {
    this.groupSizeButtonTargets.forEach((btn) => {
      const radio = btn.querySelector(".radio-circle");
      if (btn.dataset.groupSize === groupSize) {
        radio?.classList.add("bg-[#FFD700]");
        radio?.classList.remove("bg-transparent");
      } else {
        radio?.classList.add("bg-transparent");
        radio?.classList.remove("bg-[#FFD700]");
      }
    });
  }
};

// app/javascript/controllers/car_rental_tabs_controller.ts
var car_rental_tabs_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.isDomestic = true;
    this.isSwapEnabled = false;
  }
  static {
    this.targets = ["domesticButton", "internationalButton", "swapToggle", "swapIndicator"];
  }
  connect() {
    this.updateDomesticView();
  }
  selectDomestic() {
    this.isDomestic = true;
    this.updateDomesticView();
  }
  selectInternational() {
    this.isDomestic = false;
    this.updateInternationalView();
  }
  toggleSwap() {
    this.isSwapEnabled = !this.isSwapEnabled;
    this.updateSwapToggle();
  }
  updateDomesticView() {
    this.domesticButtonTarget.classList.add("bg-white", "shadow-sm", "font-bold");
    this.domesticButtonTarget.classList.remove("text-gray-500");
    this.internationalButtonTarget.classList.remove("bg-white", "shadow-sm", "font-bold");
    this.internationalButtonTarget.classList.add("text-gray-500");
  }
  updateInternationalView() {
    this.internationalButtonTarget.classList.add("bg-white", "shadow-sm", "font-bold");
    this.internationalButtonTarget.classList.remove("text-gray-500");
    this.domesticButtonTarget.classList.remove("bg-white", "shadow-sm", "font-bold");
    this.domesticButtonTarget.classList.add("text-gray-500");
  }
  updateSwapToggle() {
    if (this.isSwapEnabled) {
      this.swapIndicatorTarget.classList.remove("left-1");
      this.swapIndicatorTarget.classList.add("left-5");
      this.swapToggleTarget.classList.remove("bg-gray-200");
      this.swapToggleTarget.classList.add("bg-blue-500");
    } else {
      this.swapIndicatorTarget.classList.add("left-1");
      this.swapIndicatorTarget.classList.remove("left-5");
      this.swapToggleTarget.classList.add("bg-gray-200");
      this.swapToggleTarget.classList.remove("bg-blue-500");
    }
  }
};

// app/javascript/controllers/hotel_package_search_controller.ts
var hotel_package_search_controller_default = class extends Controller {
  static {
    this.targets = [
      // Add your targets here, e.g.:
      // "messageInput", "messagesContainer", "sendButton"
    ];
  }
  static {
    this.values = {
      // Add your values here, e.g.:
      // roomId: String,
      // userId: String
    };
  }
  // Declare your targets and values
  // declare readonly messageInputTarget: HTMLInputElement
  // declare readonly messagesContainerTarget: HTMLElement
  // declare readonly roomIdValue: string
  connect() {
    console.log("HotelPackageSearch connected");
  }
  disconnect() {
    console.log("HotelPackageSearch disconnected");
  }
  // Add your action methods here
  // Example:
  // click(): void {
  //   console.log("Button clicked")
  // }
  // FORMS: Turbo + Turbo Streams handle everything automatically
  // - Forms submit via AJAX (Turbo Drive)
  // - Server responds with format.turbo_stream
  // - Turbo Streams update DOM automatically
  // - NO manual form handling needed in Stimulus
  //
  // Use Stimulus for:
  // - UI interactions (toggle, show/hide)
  // - Input validation/formatting
  // - Dynamic form fields
};

// app/javascript/controllers/hotel_package_order_controller.ts
var hotel_package_order_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.pendingFormData = null;
    this.allowSubmission = false;
  }
  static {
    this.targets = [
      "quantityInput",
      "totalPrice",
      "bottomPrice",
      "decreaseBtn",
      "increaseBtn",
      "stockupTab",
      "instantTab",
      "bookingTypeInput",
      "contactNameInput",
      "contactPhoneInput",
      "confirmModal",
      "confirmQuantity",
      "confirmContact",
      "confirmBookingType",
      "confirmTotalPrice"
    ];
  }
  connect() {
    console.log("HotelPackageOrder connected");
    this.updateButtonStates();
  }
  increaseQuantity(event2) {
    event2.preventDefault();
    const currentQuantity = parseInt(this.quantityInputTarget.value) || 1;
    const newQuantity = currentQuantity + 1;
    if (newQuantity <= 99) {
      this.quantityInputTarget.value = newQuantity.toString();
      this.updatePrice();
      this.updateButtonStates();
    }
  }
  decreaseQuantity(event2) {
    event2.preventDefault();
    const currentQuantity = parseInt(this.quantityInputTarget.value) || 1;
    const newQuantity = currentQuantity - 1;
    if (newQuantity >= 1) {
      this.quantityInputTarget.value = newQuantity.toString();
      this.updatePrice();
      this.updateButtonStates();
    }
  }
  updatePrice() {
    const quantity = parseInt(this.quantityInputTarget.value) || 1;
    const unitPrice = parseFloat(this.increaseBtnTarget.dataset.price || "0");
    const totalPrice = quantity * unitPrice;
    this.totalPriceTarget.textContent = `\xA5${totalPrice.toFixed(2)}`;
    this.bottomPriceTarget.textContent = Math.round(totalPrice).toString();
    this.updatePaymentConfirmationAmount(Math.round(totalPrice));
  }
  updateButtonStates() {
    const quantity = parseInt(this.quantityInputTarget.value) || 1;
    if (quantity <= 1) {
      this.decreaseBtnTarget.classList.remove("border-blue-500", "bg-blue-50", "text-blue-600");
      this.decreaseBtnTarget.classList.add("border-gray-200", "text-gray-300");
      this.decreaseBtnTarget.disabled = true;
    } else {
      this.decreaseBtnTarget.classList.remove("border-gray-200", "text-gray-300");
      this.decreaseBtnTarget.classList.add("border-blue-500", "bg-blue-50", "text-blue-600");
      this.decreaseBtnTarget.disabled = false;
    }
  }
  selectTab(event2) {
    event2.preventDefault();
    const target = event2.currentTarget;
    const tabType = target.dataset.tab;
    if (tabType === "stockup") {
      this.stockupTabTarget.classList.remove("bg-[#FCEEA8]", "bg-opacity-60", "text-gray-700");
      this.stockupTabTarget.classList.add("bg-[#F5F8FA]", "z-10");
      this.stockupTabTarget.querySelector("span:first-child")?.classList.remove("font-medium");
      this.stockupTabTarget.querySelector("span:first-child")?.classList.add("font-bold", "text-black");
      this.instantTabTarget.classList.remove("bg-[#F5F8FA]", "z-10");
      this.instantTabTarget.classList.add("bg-[#FCEEA8]", "bg-opacity-60", "text-gray-700");
      this.instantTabTarget.querySelector("span:first-child")?.classList.remove("font-bold", "text-black");
      this.instantTabTarget.querySelector("span:first-child")?.classList.add("font-medium");
      this.bookingTypeInputTarget.value = "stockup";
    } else if (tabType === "instant") {
      this.instantTabTarget.classList.remove("bg-[#FCEEA8]", "bg-opacity-60", "text-gray-700");
      this.instantTabTarget.classList.add("bg-[#F5F8FA]", "z-10");
      this.instantTabTarget.querySelector("span:first-child")?.classList.remove("font-medium");
      this.instantTabTarget.querySelector("span:first-child")?.classList.add("font-bold", "text-black");
      this.stockupTabTarget.classList.remove("bg-[#F5F8FA]", "z-10");
      this.stockupTabTarget.classList.add("bg-[#FCEEA8]", "bg-opacity-60", "text-gray-700");
      this.stockupTabTarget.querySelector("span:first-child")?.classList.remove("font-bold", "text-black");
      this.stockupTabTarget.querySelector("span:first-child")?.classList.add("font-medium");
      this.bookingTypeInputTarget.value = "instant";
    }
  }
  selectPassenger(event2) {
    const label = event2.currentTarget;
    const name = label.dataset.passengerName || "";
    const phone = label.dataset.passengerPhone || "";
    this.contactNameInputTarget.value = name;
    this.contactPhoneInputTarget.value = phone;
  }
  handleSubmit(event2) {
    if (this.allowSubmission) {
      console.log("Allowing form submission");
      return;
    }
    event2.preventDefault();
    if (!this.contactNameInputTarget.value || !this.contactPhoneInputTarget.value) {
      alert("\u8BF7\u9009\u62E9\u8054\u7CFB\u4EBA");
      return;
    }
    const form = this.element.querySelector("form");
    if (form) {
      this.pendingFormData = new FormData(form);
    }
    this.updateConfirmModal();
    this.showConfirmModal();
  }
  updateConfirmModal() {
    const quantity = this.quantityInputTarget.value;
    this.confirmQuantityTarget.textContent = quantity;
    const contactName = this.contactNameInputTarget.value;
    const contactPhone = this.contactPhoneInputTarget.value;
    this.confirmContactTarget.textContent = `${contactName} ${contactPhone}`;
    const bookingType = this.bookingTypeInputTarget.value;
    this.confirmBookingTypeTarget.textContent = bookingType === "stockup" ? "\u5148\u56E4\u540E\u7EA6" : "\u7ACB\u5373\u9884\u7EA6";
    const totalPrice = this.bottomPriceTarget.textContent;
    this.confirmTotalPriceTarget.textContent = totalPrice || "0";
  }
  showConfirmModal() {
    this.confirmModalTarget.classList.remove("hidden");
    const waitTime = Math.floor(Math.random() * (3e3 - 2e3 + 1)) + 2e3;
    setTimeout(() => {
      this.closeConfirmModal();
      this.showPaymentPasswordModal();
    }, waitTime);
  }
  closeConfirmModal() {
    this.confirmModalTarget.classList.add("hidden");
  }
  showPaymentPasswordModal() {
    const paymentController = this.application.getControllerForElementAndIdentifier(
      this.element,
      "payment-confirmation"
    );
    if (paymentController && typeof paymentController.showPasswordModal === "function") {
      paymentController.showPasswordModal();
      this.setupPaymentSuccessListener();
    }
  }
  setupPaymentSuccessListener() {
    const paymentController = this.application.getControllerForElementAndIdentifier(
      this.element,
      "payment-confirmation"
    );
    if (paymentController) {
      paymentController.processActualPayment = async () => {
        this.submitFormWithData();
      };
    }
  }
  submitFormWithData() {
    const form = this.element.querySelector("form");
    if (form) {
      console.log("Setting allowSubmission flag and submitting form...");
      this.allowSubmission = true;
      form.requestSubmit();
    } else {
      console.error("Form not found");
    }
  }
  updatePaymentConfirmationAmount(amount) {
    const paymentController = this.application.getControllerForElementAndIdentifier(
      this.element,
      "payment-confirmation"
    );
    if (paymentController) {
      paymentController.amountValue = amount.toString();
    }
  }
};

// app/javascript/controllers/pwa_install_controller.ts
var pwa_install_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.deferredPrompt = null;
  }
  connect() {
    window.addEventListener("beforeinstallprompt", this.handleBeforeInstallPrompt.bind(this));
    window.addEventListener("appinstalled", this.handleAppInstalled.bind(this));
    if (this.isStandalone()) {
      this.hideInstallButton();
    }
  }
  disconnect() {
    window.removeEventListener("beforeinstallprompt", this.handleBeforeInstallPrompt.bind(this));
    window.removeEventListener("appinstalled", this.handleAppInstalled.bind(this));
  }
  handleBeforeInstallPrompt(e) {
    e.preventDefault();
    this.deferredPrompt = e;
    if (this.hasInstallButtonTarget) {
      this.installButtonTarget.classList.remove("hidden");
    }
  }
  handleAppInstalled() {
    this.deferredPrompt = null;
    this.hideInstallButton();
  }
  async install() {
    if (!this.deferredPrompt) {
      return;
    }
    this.deferredPrompt.prompt();
    const { outcome } = await this.deferredPrompt.userChoice;
    if (outcome === "accepted") {
      console.log("PWA installation accepted");
    }
    this.deferredPrompt = null;
    this.hideInstallButton();
  }
  isStandalone() {
    return window.matchMedia("(display-mode: standalone)").matches || window.navigator.standalone === true;
  }
  hideInstallButton() {
    if (this.hasInstallButtonTarget) {
      this.installButtonTarget.classList.add("hidden");
    }
  }
  static {
    this.targets = ["installButton"];
  }
};

// app/javascript/controllers/bus_date_picker_controller.ts
var bus_date_picker_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedDateObj = /* @__PURE__ */ new Date();
  }
  static {
    this.targets = [
      "modal",
      "selectedDate",
      "dateInput",
      "dateButton"
    ];
  }
  static {
    this.values = {
      currentDate: String
    };
  }
  connect() {
    console.log("BusDatePicker connected");
    this.selectedDateObj = /* @__PURE__ */ new Date();
    this.currentDateValue = this.formatDate(this.selectedDateObj);
    if (this.hasSelectedDateTarget) {
      this.updateDisplayedDate();
    }
    if (this.hasDateInputTarget) {
      this.dateInputTarget.value = this.currentDateValue;
    }
    this.updatePastDates();
  }
  // Open date picker modal
  openModal() {
    if (!this.hasModalTarget) return;
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  // Close date picker modal
  closeModal() {
    if (!this.hasModalTarget) return;
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  // Select a date
  selectDate(event2) {
    const button = event2.currentTarget;
    const dateStr = button.dataset.date || "";
    if (!dateStr) return;
    const selectedDate = /* @__PURE__ */ new Date(`${dateStr}T00:00:00`);
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    selectedDate.setHours(0, 0, 0, 0);
    if (selectedDate < today) {
      console.log("Cannot select past dates (client timezone check)");
      return;
    }
    this.selectedDateObj = selectedDate;
    this.currentDateValue = dateStr;
    if (this.hasSelectedDateTarget) {
      this.updateDisplayedDate();
    }
    if (this.hasDateInputTarget) {
      this.dateInputTarget.value = dateStr;
    }
    const currentPath = window.location.pathname;
    if (currentPath.includes("/bus_tickets/search")) {
      this.closeModal();
      this.refreshSearchResults(dateStr);
    } else {
      this.closeModal();
    }
  }
  // Refresh search results with new date (search page only)
  refreshSearchResults(dateStr) {
    const params = new URLSearchParams(window.location.search);
    params.set("date", dateStr);
    const newUrl = `${window.location.pathname}?${params.toString()}`;
    if (typeof Turbo !== "undefined") {
      Turbo.visit(newUrl);
    } else {
      window.location.href = newUrl;
    }
  }
  // Update the displayed date in the main view
  updateDisplayedDate() {
    const month = this.selectedDateObj.getMonth() + 1;
    const day = this.selectedDateObj.getDate();
    const dayName = this.getDayName(this.selectedDateObj);
    this.selectedDateTarget.innerHTML = `
      ${month}<span class="text-base mx-0.5">\u6708</span>${day}<span class="text-base ml-0.5 mr-2">\u65E5</span>
    `;
    const dayLabel = this.selectedDateTarget.nextElementSibling;
    if (dayLabel) {
      dayLabel.textContent = dayName;
    }
  }
  // Get day name in Chinese
  getDayName(date) {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    const targetDate = new Date(date);
    targetDate.setHours(0, 0, 0, 0);
    const diffTime = targetDate.getTime() - today.getTime();
    const diffDays = Math.round(diffTime / (1e3 * 60 * 60 * 24));
    if (diffDays === 0) return "\u4ECA\u5929";
    if (diffDays === 1) return "\u660E\u5929";
    if (diffDays === 2) return "\u540E\u5929";
    const weekdays = ["\u5468\u65E5", "\u5468\u4E00", "\u5468\u4E8C", "\u5468\u4E09", "\u5468\u56DB", "\u5468\u4E94", "\u5468\u516D"];
    return weekdays[date.getDay()];
  }
  // Format date as YYYY-MM-DD
  formatDate(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    return `${year}-${month}-${day}`;
  }
  // Update past dates to be disabled
  updatePastDates() {
    if (!this.dateButtonTargets) return;
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    this.dateButtonTargets.forEach((button) => {
      const dateStr = button.dataset.date;
      if (!dateStr) return;
      const buttonDate = /* @__PURE__ */ new Date(`${dateStr}T00:00:00`);
      buttonDate.setHours(0, 0, 0, 0);
      if (buttonDate < today) {
        button.disabled = true;
        button.classList.add("opacity-40", "cursor-not-allowed");
        button.classList.remove("hover:bg-blue-50");
      }
    });
  }
  // Check if date is today
  isToday(date) {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    const compareDate = new Date(date);
    compareDate.setHours(0, 0, 0, 0);
    return compareDate.getTime() === today.getTime();
  }
};

// app/javascript/controllers/bus_ticket_search_controller.ts
var bus_ticket_search_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedDepartureTimes = /* @__PURE__ */ new Set();
    this.selectedSeatTypes = /* @__PURE__ */ new Set();
    this.selectedDepartureStations = /* @__PURE__ */ new Set();
    this.selectedArrivalStations = /* @__PURE__ */ new Set();
    this.currentSortField = "default";
    this.currentSortDirection = "";
    //  -> 
    this.timeSlotLabels = {
      morning: "\u51CC\u6668 00:00-05:59",
      morning2: "\u4E0A\u5348 06:00-11:59",
      afternoon: "\u4E0B\u5348 12:00-17:59",
      evening: "\u665A\u4E0A 18:00-23:59"
    };
  }
  static {
    this.values = {
      origin: String,
      destination: String,
      date: String
    };
  }
  static {
    this.targets = [
      "overlay",
      "modal",
      "departureTimeTab",
      "seatTypeTab",
      "departureStationTab",
      "arrivalStationTab",
      "departureTimeSection",
      "seatTypeSection",
      "departureStationSection",
      "arrivalStationSection",
      "departureTimeCard",
      "seatTypeCard",
      "departureStationCard",
      "arrivalStationCard",
      "applyButton",
      "filterBadge",
      "selectedTagsContainer",
      "selectedTagsList",
      "sortModal",
      "sortOption",
      "timeButton",
      "priceButton"
    ];
  }
  connect() {
    this.restoreFiltersFromUrl();
    this.restoreSortFromUrl();
  }
  //  URL 
  restoreFiltersFromUrl() {
    const urlParams = new URLSearchParams(window.location.search);
    const timeSlots = urlParams.get("time_slots");
    if (timeSlots) {
      timeSlots.split(",").forEach((time) => {
        this.selectedDepartureTimes.add(time);
        const timeCard = this.departureTimeCardTargets.find(
          (card) => card.dataset.time === time
        );
        if (timeCard) this.addSelectedStyle(timeCard);
      });
    }
    const seatTypes = urlParams.get("seat_types");
    if (seatTypes) {
      seatTypes.split(",").forEach((seatType) => {
        this.selectedSeatTypes.add(seatType);
        const seatCard = this.seatTypeCardTargets.find(
          (card) => card.dataset.seatType === seatType
        );
        if (seatCard) this.addSelectedStyle(seatCard);
      });
    }
    const departureStations = urlParams.get("departure_stations");
    if (departureStations) {
      departureStations.split(",").forEach((station) => {
        this.selectedDepartureStations.add(station);
        const depCard = this.departureStationCardTargets.find(
          (card) => card.dataset.station === station
        );
        if (depCard) this.addSelectedStyle(depCard);
      });
    }
    const arrivalStations = urlParams.get("arrival_stations");
    if (arrivalStations) {
      arrivalStations.split(",").forEach((station) => {
        this.selectedArrivalStations.add(station);
        const arrCard = this.arrivalStationCardTargets.find(
          (card) => card.dataset.station === station
        );
        if (arrCard) this.addSelectedStyle(arrCard);
      });
    }
    this.updateFilterBadge();
    this.updateSelectedTags();
  }
  openFilter() {
    this.overlayTarget.classList.remove("hidden");
    this.modalTarget.classList.remove("hidden");
  }
  closeModal() {
    this.overlayTarget.classList.add("hidden");
    this.modalTarget.classList.add("hidden");
  }
  selectTab(event2) {
    const button = event2.currentTarget;
    const tab = button.dataset.tab;
    if (!tab) return;
    const tabs = [
      this.departureTimeTabTarget,
      this.seatTypeTabTarget,
      this.departureStationTabTarget,
      this.arrivalStationTabTarget
    ];
    tabs.forEach((t) => {
      t.classList.remove("bg-white", "border-[#FFD900]", "text-gray-900", "font-medium");
      t.classList.add("text-gray-600");
      t.classList.remove("border-l-4");
      t.classList.add("border-l-2", "border-transparent");
    });
    button.classList.add("bg-white", "border-l-4", "border-[#FFD900]", "text-gray-900", "font-medium");
    button.classList.remove("text-gray-600", "border-l-2", "border-transparent");
    const sections = [
      this.departureTimeSectionTarget,
      this.seatTypeSectionTarget,
      this.departureStationSectionTarget,
      this.arrivalStationSectionTarget
    ];
    sections.forEach((s) => s.classList.add("hidden"));
    const sectionMap = {
      departureTime: this.departureTimeSectionTarget,
      seatType: this.seatTypeSectionTarget,
      departureStation: this.departureStationSectionTarget,
      arrivalStation: this.arrivalStationSectionTarget
    };
    const targetSection = sectionMap[tab];
    if (targetSection) {
      targetSection.classList.remove("hidden");
    }
  }
  toggleDepartureTime(event2) {
    const card = event2.currentTarget;
    const time = card.dataset.time;
    if (!time) return;
    if (this.selectedDepartureTimes.has(time)) {
      this.selectedDepartureTimes.delete(time);
      this.removeSelectedStyle(card);
    } else {
      this.selectedDepartureTimes.add(time);
      this.addSelectedStyle(card);
    }
    this.updateFilterBadge();
    this.updateApplyButton();
    this.updateSelectedTags();
  }
  toggleSeatType(event2) {
    const card = event2.currentTarget;
    const seatType = card.dataset.seatType;
    if (!seatType) return;
    if (this.selectedSeatTypes.has(seatType)) {
      this.selectedSeatTypes.delete(seatType);
      this.removeSelectedStyle(card);
    } else {
      this.selectedSeatTypes.add(seatType);
      this.addSelectedStyle(card);
    }
    this.updateFilterBadge();
    this.updateApplyButton();
    this.updateSelectedTags();
  }
  toggleDepartureStation(event2) {
    const card = event2.currentTarget;
    const station = card.dataset.station;
    if (!station) return;
    if (this.selectedDepartureStations.has(station)) {
      this.selectedDepartureStations.delete(station);
      this.removeSelectedStyle(card);
    } else {
      this.selectedDepartureStations.add(station);
      this.addSelectedStyle(card);
    }
    this.updateFilterBadge();
    this.updateApplyButton();
    this.updateSelectedTags();
  }
  toggleArrivalStation(event2) {
    const card = event2.currentTarget;
    const station = card.dataset.station;
    if (!station) return;
    if (this.selectedArrivalStations.has(station)) {
      this.selectedArrivalStations.delete(station);
      this.removeSelectedStyle(card);
    } else {
      this.selectedArrivalStations.add(station);
      this.addSelectedStyle(card);
    }
    this.updateFilterBadge();
    this.updateApplyButton();
    this.updateSelectedTags();
  }
  addSelectedStyle(card) {
    card.classList.remove("bg-[#F7F8FA]");
    card.classList.add("bg-[#FFD900]");
    if (!card.querySelector(".checkmark-icon")) {
      const checkmark = this.createCheckmark();
      card.appendChild(checkmark);
    }
  }
  removeSelectedStyle(card) {
    card.classList.remove("bg-[#FFD900]");
    card.classList.add("bg-[#F7F8FA]");
    const checkmark = card.querySelector(".checkmark-icon");
    if (checkmark) {
      checkmark.remove();
    }
  }
  createCheckmark() {
    const checkmark = document.createElement("div");
    checkmark.className = "checkmark-icon absolute top-2 right-2";
    checkmark.innerHTML = `
      <svg class="w-5 h-5 text-gray-900" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
      </svg>
    `;
    return checkmark;
  }
  updateFilterBadge() {
    const totalFilters = this.selectedDepartureTimes.size + this.selectedSeatTypes.size + this.selectedDepartureStations.size + this.selectedArrivalStations.size;
    if (totalFilters > 0) {
      this.filterBadgeTarget.textContent = totalFilters.toString();
      this.filterBadgeTarget.classList.remove("hidden");
    } else {
      this.filterBadgeTarget.classList.add("hidden");
    }
  }
  updateApplyButton() {
    this.fetchFilteredCount();
  }
  resetFilters() {
    this.selectedDepartureTimes.clear();
    this.selectedSeatTypes.clear();
    this.selectedDepartureStations.clear();
    this.selectedArrivalStations.clear();
    const allCards = [
      ...this.departureTimeCardTargets,
      ...this.seatTypeCardTargets,
      ...this.departureStationCardTargets,
      ...this.arrivalStationCardTargets
    ];
    allCards.forEach((card) => {
      this.removeSelectedStyle(card);
    });
    this.updateFilterBadge();
    this.updateApplyButton();
    this.updateSelectedTags();
  }
  applyFilters() {
    const params = new URLSearchParams();
    params.set("origin", this.originValue);
    params.set("destination", this.destinationValue);
    params.set("date", this.dateValue);
    if (this.selectedDepartureTimes.size > 0) {
      params.set("time_slots", Array.from(this.selectedDepartureTimes).join(","));
    }
    if (this.selectedSeatTypes.size > 0) {
      params.set("seat_types", Array.from(this.selectedSeatTypes).join(","));
    }
    if (this.selectedDepartureStations.size > 0) {
      params.set("departure_stations", Array.from(this.selectedDepartureStations).join(","));
    }
    if (this.selectedArrivalStations.size > 0) {
      params.set("arrival_stations", Array.from(this.selectedArrivalStations).join(","));
    }
    this.closeModal();
    visit(`/bus_tickets/search?${params.toString()}`);
  }
  // 
  updateSelectedTags() {
    const tags = [];
    this.selectedDepartureTimes.forEach((time) => {
      tags.push({
        type: "departureTime",
        value: time,
        label: this.timeSlotLabels[time] || time
      });
    });
    this.selectedSeatTypes.forEach((seatType) => {
      tags.push({
        type: "seatType",
        value: seatType,
        label: seatType
      });
    });
    this.selectedDepartureStations.forEach((station) => {
      tags.push({
        type: "departureStation",
        value: station,
        label: station
      });
    });
    this.selectedArrivalStations.forEach((station) => {
      tags.push({
        type: "arrivalStation",
        value: station,
        label: station
      });
    });
    this.selectedTagsListTarget.innerHTML = "";
    if (tags.length === 0) {
      this.selectedTagsContainerTarget.classList.add("hidden");
    } else {
      this.selectedTagsContainerTarget.classList.remove("hidden");
      tags.forEach((tag) => {
        const tagElement = document.createElement("div");
        tagElement.className = "bg-[#FFD900] text-gray-900 text-[13px] px-3 py-1 rounded-full flex items-center gap-1";
        tagElement.innerHTML = `
          <span>${tag.label}</span>
          <button type="button" 
            data-action="click->bus-ticket-search#removeTag"
            data-tag-type="${tag.type}"
            data-tag-value="${tag.value}"
            class="text-gray-900 hover:text-gray-700 font-bold">
            \u2715
          </button>
        `;
        this.selectedTagsListTarget.appendChild(tagElement);
      });
    }
  }
  // 
  removeTag(event2) {
    const button = event2.currentTarget;
    const tagType = button.dataset.tagType;
    const tagValue = button.dataset.tagValue;
    if (!tagType || !tagValue) return;
    switch (tagType) {
      case "departureTime": {
        this.selectedDepartureTimes.delete(tagValue);
        const timeCard = this.departureTimeCardTargets.find(
          (card) => card.dataset.time === tagValue
        );
        if (timeCard) this.removeSelectedStyle(timeCard);
        break;
      }
      case "seatType": {
        this.selectedSeatTypes.delete(tagValue);
        const seatCard = this.seatTypeCardTargets.find(
          (card) => card.dataset.seatType === tagValue
        );
        if (seatCard) this.removeSelectedStyle(seatCard);
        break;
      }
      case "departureStation": {
        this.selectedDepartureStations.delete(tagValue);
        const depCard = this.departureStationCardTargets.find(
          (card) => card.dataset.station === tagValue
        );
        if (depCard) this.removeSelectedStyle(depCard);
        break;
      }
      case "arrivalStation": {
        this.selectedArrivalStations.delete(tagValue);
        const arrCard = this.arrivalStationCardTargets.find(
          (card) => card.dataset.station === tagValue
        );
        if (arrCard) this.removeSelectedStyle(arrCard);
        break;
      }
    }
    this.updateFilterBadge();
    this.updateApplyButton();
    this.updateSelectedTags();
  }
  // 
  async fetchFilteredCount() {
    try {
      const params = new URLSearchParams();
      params.set("origin", this.originValue);
      params.set("destination", this.destinationValue);
      params.set("date", this.dateValue);
      if (this.selectedDepartureTimes.size > 0) {
        params.set("time_slots", Array.from(this.selectedDepartureTimes).join(","));
      }
      if (this.selectedSeatTypes.size > 0) {
        params.set("seat_types", Array.from(this.selectedSeatTypes).join(","));
      }
      if (this.selectedDepartureStations.size > 0) {
        params.set("departure_stations", Array.from(this.selectedDepartureStations).join(","));
      }
      if (this.selectedArrivalStations.size > 0) {
        params.set("arrival_stations", Array.from(this.selectedArrivalStations).join(","));
      }
      const response = await fetch(`/bus_tickets/count_filtered_results?${params.toString()}`);
      const data2 = await response.json();
      this.applyButtonTarget.textContent = `\u67E5\u770B${data2.count}\u6761\u7ED3\u679C`;
    } catch (error3) {
      console.error("\u83B7\u53D6\u7B5B\u9009\u7ED3\u679C\u6570\u91CF\u5931\u8D25:", error3);
      this.applyButtonTarget.textContent = "\u67E5\u770B\u7ED3\u679C";
    }
  }
  // =====  =====
  //  URL 
  restoreSortFromUrl() {
    const urlParams = new URLSearchParams(window.location.search);
    const sortBy = urlParams.get("sort_by");
    const sortDirection = urlParams.get("sort_direction");
    if (sortBy) {
      this.currentSortField = sortBy;
      this.currentSortDirection = sortDirection || "";
      this.updateSortButtonsDisplay();
    }
  }
  // 
  openSortModal() {
    this.sortModalTarget.classList.remove("hidden");
    this.highlightCurrentSort();
  }
  // 
  closeSortModal() {
    this.sortModalTarget.classList.add("hidden");
  }
  // 
  stopPropagation(event2) {
    event2.stopPropagation();
  }
  // 
  selectSort(event2) {
    const button = event2.currentTarget;
    const sortField = button.dataset.sortField;
    const sortDirection = button.dataset.sortDirection;
    if (!sortField) return;
    this.sortOptionTargets.forEach((option) => {
      option.classList.remove("bg-[#FFD900]", "border-2", "border-[#FF6A00]");
      option.classList.add("bg-[#F7F8FA]");
    });
    button.classList.remove("bg-[#F7F8FA]");
    button.classList.add("bg-[#FFD900]", "border-2", "border-[#FF6A00]");
    this.currentSortField = sortField;
    this.currentSortDirection = sortDirection || "";
  }
  // 
  applySortAndClose() {
    this.closeSortModal();
    this.applySort();
  }
  // 
  applySort() {
    const params = new URLSearchParams(window.location.search);
    params.delete("sort_by");
    params.delete("sort_direction");
    if (this.currentSortField !== "default") {
      params.set("sort_by", this.currentSortField);
      if (this.currentSortDirection) {
        params.set("sort_direction", this.currentSortDirection);
      }
    }
    this.updateSortButtonsDisplay();
    visit(`/bus_tickets/search?${params.toString()}`);
  }
  // 
  highlightCurrentSort() {
    this.sortOptionTargets.forEach((option) => {
      const sortField = option.dataset.sortField;
      const sortDirection = option.dataset.sortDirection || "";
      if (sortField === this.currentSortField && sortDirection === this.currentSortDirection) {
        option.classList.remove("bg-[#F7F8FA]");
        option.classList.add("bg-[#FFD900]", "border-2", "border-[#FF6A00]");
      } else {
        option.classList.remove("bg-[#FFD900]", "border-2", "border-[#FF6A00]");
        option.classList.add("bg-[#F7F8FA]");
      }
    });
  }
  // 
  updateSortButtonsDisplay() {
    if (this.timeButtonTarget) {
      this.resetButtonStyle(this.timeButtonTarget);
    }
    if (this.priceButtonTarget) {
      this.resetButtonStyle(this.priceButtonTarget);
    }
    if (this.currentSortField === "time" && this.timeButtonTarget) {
      this.highlightButton(this.timeButtonTarget, this.currentSortDirection === "asc" ? "\u65E9\u2192\u665A" : "\u665A\u2192\u65E9");
    } else if (this.currentSortField === "price" && this.priceButtonTarget) {
      this.highlightButton(this.priceButtonTarget, this.currentSortDirection === "asc" ? "\u4F4E\u2192\u9AD8" : "\u9AD8\u2192\u4F4E");
    }
  }
  // 
  resetButtonStyle(button) {
    const icon = button.querySelector(".w-6.h-6");
    const text = button.querySelector(".text-\\[11px\\]");
    if (icon) {
      icon.classList.remove("bg-[#FFD900]", "border-[#FF6A00]");
      icon.classList.add("border-gray-600");
    }
    if (text) {
      text.classList.remove("text-[#FF6A00]", "font-semibold");
      text.classList.add("text-gray-700");
    }
  }
  // 
  highlightButton(button, label) {
    const icon = button.querySelector(".w-6.h-6");
    const text = button.querySelector(".text-\\[11px\\]");
    if (icon) {
      icon.classList.remove("border-gray-600");
      icon.classList.add("bg-[#FFD900]", "border-[#FF6A00]");
    }
    if (text) {
      text.classList.remove("text-gray-700");
      text.classList.add("text-[#FF6A00]", "font-semibold");
      text.textContent = label;
    }
  }
};

// app/javascript/controllers/bus_ticket_order_controller.ts
var bus_ticket_order_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedPassengers = /* @__PURE__ */ new Set();
    this.basePrice = 0;
    this.insurancePrice = 0;
    this.insuranceType = "none";
  }
  static {
    this.targets = [
      "checkIcon",
      "passengerCount",
      "totalPrice",
      "contactPhone",
      "formData"
    ];
  }
  connect() {
    console.log("BusTicketOrder connected");
    this.insuranceType = this.formDataTarget.dataset.insuranceType || "none";
    this.insurancePrice = parseInt(this.formDataTarget.dataset.insurancePrice || "0");
    const firstPassenger = this.element.querySelector("[data-passenger-id]");
    if (firstPassenger) {
      const passengerId = firstPassenger.dataset.passengerId;
      if (passengerId) {
        this.selectedPassengers.add(passengerId);
        this.updatePassengerUI(firstPassenger, true);
        const phone = firstPassenger.dataset.passengerPhone;
        if (phone) {
          this.contactPhoneTarget.textContent = phone;
        }
      }
    }
    this.updateTotal();
  }
  togglePassenger(event2) {
    const target = event2.currentTarget;
    const passengerId = target.dataset.passengerId;
    if (!passengerId) return;
    if (this.selectedPassengers.has(passengerId)) {
      this.selectedPassengers.delete(passengerId);
      this.updatePassengerUI(target, false);
    } else {
      if (this.selectedPassengers.size >= 5) {
        alert("\u6700\u591A\u53EA\u80FD\u9009\u62E95\u4F4D\u4E58\u8F66\u4EBA");
        return;
      }
      this.selectedPassengers.add(passengerId);
      this.updatePassengerUI(target, true);
      if (this.selectedPassengers.size === 1) {
        const phone = target.dataset.passengerPhone;
        if (phone) {
          this.contactPhoneTarget.textContent = phone;
        }
      }
    }
    this.updateTotal();
  }
  selectInsurance(event2) {
    const target = event2.currentTarget;
    this.insuranceType = target.dataset.insuranceType || "none";
    this.insurancePrice = parseInt(target.dataset.insurancePrice || "0");
    const allInsuranceCards = this.element.querySelectorAll("[data-insurance-type]");
    allInsuranceCards.forEach((card) => {
      const cardElement = card;
      const cardType = cardElement.dataset.insuranceType;
      const checkIcon = cardElement.querySelector("svg:last-child");
      if (cardType === this.insuranceType) {
        if (cardType === "none") {
          cardElement.classList.add("border-[#FFD944]");
          cardElement.classList.remove("border-gray-100");
          if (checkIcon) checkIcon.classList.remove("text-gray-300");
          if (checkIcon) checkIcon.classList.add("text-[#FFD944]");
        } else if (cardType === "premium") {
          cardElement.classList.add("bg-[#FFFAED]", "border-[#FFD944]");
          cardElement.classList.remove("bg-gray-50", "border-gray-100");
          if (checkIcon) checkIcon.classList.remove("text-gray-300");
          if (checkIcon) checkIcon.classList.add("text-[#FFD944]");
        } else if (cardType === "refund") {
          cardElement.classList.add("bg-[#F0F7FF]", "border-[#5D9CEC]");
          cardElement.classList.remove("bg-gray-50", "border-gray-100");
          if (checkIcon) checkIcon.classList.remove("text-gray-300");
          if (checkIcon) checkIcon.classList.add("text-[#5D9CEC]");
        }
      } else {
        if (cardType === "none") {
          cardElement.classList.remove("border-[#FFD944]");
          cardElement.classList.add("border-gray-100");
          if (checkIcon) checkIcon.classList.add("text-gray-300");
          if (checkIcon) checkIcon.classList.remove("text-[#FFD944]");
        } else {
          cardElement.classList.remove("bg-[#FFFAED]", "bg-[#F0F7FF]", "border-[#FFD944]", "border-[#5D9CEC]");
          cardElement.classList.add("bg-gray-50", "border-gray-100");
          if (checkIcon) checkIcon.classList.add("text-gray-300");
          if (checkIcon) checkIcon.classList.remove("text-[#FFD944]", "text-[#5D9CEC]");
        }
      }
    });
    this.updateTotal();
  }
  async submitOrder(event2) {
    event2.preventDefault();
    const button = event2.currentTarget;
    const busTicketId = button.dataset.busTicketId;
    const basePrice = parseInt(button.dataset.basePrice || "0");
    this.basePrice = basePrice;
    if (this.selectedPassengers.size === 0) {
      alert("\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u4F4D\u4E58\u8F66\u4EBA");
      return;
    }
    const passengerIds = Array.from(this.selectedPassengers);
    const totalPrice = this.calculateTotal();
    const totalInsurancePrice = this.insurancePrice * passengerIds.length;
    const orderData = {
      bus_ticket_order: {
        bus_ticket_id: busTicketId,
        passenger_ids: passengerIds,
        insurance_type: this.insuranceType,
        insurance_price: totalInsurancePrice,
        total_price: totalPrice
      }
    };
    button.disabled = true;
    button.textContent = "\u521B\u5EFA\u4E2D...";
    try {
      const csrfToken = document.querySelector('meta[name="csrf-token"]')?.content || "";
      const response = await fetch("/bus_ticket_orders", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "X-CSRF-Token": csrfToken
        },
        body: JSON.stringify(orderData)
      });
      const data2 = await response.json();
      if (response.ok && data2.success) {
        this.triggerPaymentModal(totalPrice.toString(), data2.payment_url, data2.success_url);
      } else {
        throw new Error(data2.message || "\u521B\u5EFA\u8BA2\u5355\u5931\u8D25");
      }
    } catch (error3) {
      console.error("Error creating order:", error3);
      const message = error3 instanceof Error ? error3.message : "\u521B\u5EFA\u8BA2\u5355\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5";
      alert(message);
      button.disabled = false;
      button.textContent = "\u53BB\u652F\u4ED8";
    }
  }
  triggerPaymentModal(amount, paymentUrl, successUrl) {
    const paymentElement = document.querySelector('[data-controller*="payment-confirmation"]');
    if (!paymentElement) {
      console.error("Payment confirmation controller not found");
      alert("\u652F\u4ED8\u7CFB\u7EDF\u672A\u52A0\u8F7D\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
      return;
    }
    const app = window.Stimulus;
    if (!app) {
      console.error("Stimulus not found");
      alert("\u7CFB\u7EDF\u9519\u8BEF\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
      return;
    }
    const paymentController = app.getControllerForElementAndIdentifier(paymentElement, "payment-confirmation");
    if (paymentController) {
      paymentController.amountValue = amount;
      const userEmail = document.querySelector('meta[name="user-email"]')?.content || document.querySelector("[data-user-email]")?.getAttribute("data-user-email") || "demo@example.com";
      paymentController.userEmailValue = userEmail;
      paymentController.paymentUrlValue = paymentUrl;
      paymentController.successUrlValue = successUrl;
      paymentController.showPasswordModal();
    } else {
      console.error("Payment controller not initialized");
      alert("\u652F\u4ED8\u7CFB\u7EDF\u672A\u521D\u59CB\u5316\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
    }
  }
  updatePassengerUI(element, selected) {
    const checkIcon = element.querySelector('[data-bus-ticket-order-target="checkIcon"]');
    if (checkIcon) {
      if (selected) {
        checkIcon.classList.remove("text-gray-300");
        checkIcon.classList.add("text-[#FFD944]");
      } else {
        checkIcon.classList.add("text-gray-300");
        checkIcon.classList.remove("text-[#FFD944]");
      }
    }
  }
  updateTotal() {
    const passengerCount = this.selectedPassengers.size;
    this.passengerCountTarget.textContent = `\u5171${passengerCount}\u4EBA`;
    const total = this.calculateTotal();
    this.totalPriceTarget.textContent = total.toString();
  }
  calculateTotal() {
    const passengerCount = this.selectedPassengers.size;
    if (passengerCount === 0) return 0;
    const button = this.element.querySelector("[data-base-price]");
    const basePrice = parseInt(button?.dataset.basePrice || "0");
    return (basePrice + this.insurancePrice) * passengerCount;
  }
};

// app/javascript/controllers/deep_booking_controller.ts
var deep_booking_controller_default = class extends Controller {
  static {
    this.targets = [
      "productCard",
      "dateModal",
      "countModal",
      "adultCount",
      "childCount",
      "selectedDate",
      "totalPrice"
    ];
  }
  static {
    this.values = {
      guideId: String,
      selectedDate: String,
      adultCount: Number,
      childCount: Number,
      pricePerPerson: Number
    };
  }
  connect() {
    console.log("DeepBooking controller connected");
    this.adultCountValue = 1;
    this.childCountValue = 0;
    if (this.productCardTargets && this.productCardTargets.length > 0) {
      const priceElement = this.productCardTargets[0].querySelector(".text-xl.font-bold.text-\\[\\#ff5336\\]");
      if (priceElement) {
        this.pricePerPersonValue = parseInt(priceElement.textContent || "192");
      } else {
        this.pricePerPersonValue = 192;
      }
    } else {
      this.pricePerPersonValue = 192;
    }
  }
  disconnect() {
    console.log("DeepBooking disconnected");
  }
  // 
  selectDate(event2) {
    const button = event2.currentTarget;
    const date = button.dataset.date;
    if (!date) return;
    this.selectedDateValue = date;
    console.log("Selected date:", date);
    const dateButtons = this.element.querySelectorAll('[data-action*="selectDate"]');
    dateButtons.forEach((btn) => {
      btn.classList.remove("bg-[#ffeeb8]", "border-[#ffeeb8]");
      btn.classList.add("bg-[#f5f7fa]");
    });
    button.classList.remove("bg-[#f5f7fa]");
    button.classList.add("bg-[#ffeeb8]", "border-[#ffeeb8]");
  }
  // 
  openCalendar(event2) {
    event2.preventDefault();
    console.log("Opening calendar modal");
    this.showToast("\u65E5\u5386\u9009\u62E9\u529F\u80FD\u5373\u5C06\u4E0A\u7EBF");
  }
  // 
  openCountModal(event2) {
    event2.preventDefault();
    if (!this.selectedDateValue) {
      this.showToast("\u8BF7\u5148\u9009\u62E9\u51FA\u884C\u65E5\u671F");
      return;
    }
    console.log("Opening count modal");
    const modalHTML = `
      <div class="fixed inset-0 bg-black/60 z-40" 
           data-action="click->deep-booking#closeCountModal" 
           data-deep-booking-target="countModal">
        <div class="absolute bottom-0 w-full max-w-[414px] left-1/2 -translate-x-1/2 bg-white z-50 rounded-t-2xl px-5 pt-5 pb-8 animate-slide-up" 
             data-action="click->deep-booking#stopPropagation">
          
          <!-- \u5F39\u7A97\u6807\u9898\u680F -->
          <div class="flex justify-between items-center mb-8 relative">
            <div class="w-full text-center">
              <h3 class="text-lg font-bold text-gray-900">\u9884\u7EA6\u4EBA\u6570</h3>
            </div>
            <button class="absolute right-0 top-0 p-1" data-action="click->deep-booking#closeCountModal">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-500">
                <path d="M18 6L6 18M6 6l12 12" />
              </svg>
            </button>
          </div>

          <!-- \u5217\u8868\u9879\uFF1A\u6210\u4EBA -->
          <div class="flex justify-between items-center mb-8">
            <div>
              <div class="text-lg font-medium text-gray-900">\u6210\u4EBA</div>
              <div class="text-sm text-gray-400 mt-1">\u5355\u4EF7: \xA5${this.pricePerPersonValue}</div>
            </div>
            <div class="flex items-center gap-4">
              <button class="w-7 h-7 rounded-full border flex items-center justify-center transition-colors ${this.adultCountValue <= 1 ? "border-gray-300 text-gray-300 cursor-not-allowed" : "border-blue-custom text-blue-custom hover:bg-blue-50"}"
                      data-action="click->deep-booking#decrementAdult"
                      ${this.adultCountValue <= 1 ? "disabled" : ""}>
                <svg width="12" height="2" viewBox="0 0 12 2" fill="currentColor">
                  <rect width="12" height="2" rx="1"/>
                </svg>
              </button>
              
              <span class="text-lg font-medium w-4 text-center" data-deep-booking-target="adultCount">${this.adultCountValue}</span>
              
              <button class="w-7 h-7 rounded-full border border-blue-custom flex items-center justify-center text-blue-custom hover:bg-blue-50"
                      data-action="click->deep-booking#incrementAdult">
                <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                  <rect y="5" width="12" height="2" rx="1"/>
                  <rect x="5" width="2" height="12" rx="1"/>
                </svg>
              </button>
            </div>
          </div>

          <!-- \u5217\u8868\u9879\uFF1A\u513F\u7AE5 -->
          <div class="flex justify-between items-center mb-10">
            <div>
              <div class="text-lg font-medium text-gray-900">\u513F\u7AE5</div>
              <div class="text-sm text-gray-400 mt-1">\u5355\u4EF7: \xA5${Math.round(this.pricePerPersonValue * 0.8)}</div>
            </div>
            <div class="flex items-center gap-4">
              <button class="w-7 h-7 rounded-full border flex items-center justify-center transition-colors ${this.childCountValue <= 0 ? "border-gray-300 text-gray-300 cursor-not-allowed" : "border-blue-custom text-blue-custom hover:bg-blue-50"}"
                      data-action="click->deep-booking#decrementChild"
                      ${this.childCountValue <= 0 ? "disabled" : ""}>
                <svg width="12" height="2" viewBox="0 0 12 2" fill="currentColor">
                  <rect width="12" height="2" rx="1"/>
                </svg>
              </button>
              
              <span class="text-lg font-medium w-4 text-center" data-deep-booking-target="childCount">${this.childCountValue}</span>
              
              <button class="w-7 h-7 rounded-full border border-blue-custom flex items-center justify-center text-blue-custom hover:bg-blue-50"
                      data-action="click->deep-booking#incrementChild">
                <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                  <rect y="5" width="12" height="2" rx="1"/>
                  <rect x="5" width="2" height="12" rx="1"/>
                </svg>
              </button>
            </div>
          </div>

          <!-- \u5E95\u90E8\u6309\u94AE -->
          <button class="w-full bg-[#FF5A43] text-white text-lg font-bold py-3.5 rounded-full shadow-lg active:opacity-90 transition-opacity"
                  data-action="click->deep-booking#confirmBooking">
            \u7ACB\u5373\u9884\u7EA6
          </button>
          
        </div>
      </div>
    `;
    this.element.insertAdjacentHTML("beforeend", modalHTML);
  }
  // 
  closeCountModal(event2) {
    event2.preventDefault();
    const modal = document.querySelector('[data-deep-booking-target="countModal"]');
    if (modal) {
      modal.remove();
    }
  }
  // 
  stopPropagation(event2) {
    event2.stopPropagation();
  }
  // 
  incrementAdult(event2) {
    event2.preventDefault();
    this.adultCountValue++;
    this.updateCountDisplay();
  }
  // 
  decrementAdult(event2) {
    event2.preventDefault();
    if (this.adultCountValue > 1) {
      this.adultCountValue--;
      this.updateCountDisplay();
    }
  }
  // 
  incrementChild(event2) {
    event2.preventDefault();
    this.childCountValue++;
    this.updateCountDisplay();
  }
  // 
  decrementChild(event2) {
    event2.preventDefault();
    if (this.childCountValue > 0) {
      this.childCountValue--;
      this.updateCountDisplay();
    }
  }
  // 
  updateCountDisplay() {
    const modal = document.querySelector('[data-deep-booking-target="countModal"]');
    if (!modal) return;
    const adultCountEl = modal.querySelector('[data-deep-booking-target="adultCount"]');
    if (adultCountEl) {
      adultCountEl.textContent = this.adultCountValue.toString();
    }
    const childCountEl = modal.querySelector('[data-deep-booking-target="childCount"]');
    if (childCountEl) {
      childCountEl.textContent = this.childCountValue.toString();
    }
    const decrementAdultBtn = modal.querySelector('[data-action*="decrementAdult"]');
    if (decrementAdultBtn) {
      if (this.adultCountValue <= 1) {
        decrementAdultBtn.disabled = true;
        decrementAdultBtn.classList.remove("border-blue-custom", "text-blue-custom", "hover:bg-blue-50");
        decrementAdultBtn.classList.add("border-gray-300", "text-gray-300", "cursor-not-allowed");
      } else {
        decrementAdultBtn.disabled = false;
        decrementAdultBtn.classList.remove("border-gray-300", "text-gray-300", "cursor-not-allowed");
        decrementAdultBtn.classList.add("border-blue-custom", "text-blue-custom", "hover:bg-blue-50");
      }
    }
    const decrementChildBtn = modal.querySelector('[data-action*="decrementChild"]');
    if (decrementChildBtn) {
      if (this.childCountValue <= 0) {
        decrementChildBtn.disabled = true;
        decrementChildBtn.classList.remove("border-blue-custom", "text-blue-custom", "hover:bg-blue-50");
        decrementChildBtn.classList.add("border-gray-300", "text-gray-300", "cursor-not-allowed");
      } else {
        decrementChildBtn.disabled = false;
        decrementChildBtn.classList.remove("border-gray-300", "text-gray-300", "cursor-not-allowed");
        decrementChildBtn.classList.add("border-blue-custom", "text-blue-custom", "hover:bg-blue-50");
      }
    }
  }
  //  - 
  confirmBooking(event2) {
    event2.preventDefault();
    const url = `/deep_travel_bookings/new?guide_id=${this.guideIdValue}&date=${this.selectedDateValue}&adult_count=${this.adultCountValue}&child_count=${this.childCountValue}`;
    console.log("Confirming booking:", {
      guideId: this.guideIdValue,
      date: this.selectedDateValue,
      adultCount: this.adultCountValue,
      childCount: this.childCountValue,
      url
    });
    window.location.href = url;
  }
  // 
  showToast(message) {
    if (typeof window.showToast === "function") {
      window.showToast(message);
    } else {
      alert(message);
    }
  }
};
var style = document.createElement("style");
style.textContent = `
  .border-blue-custom {
    border-color: #4E6EF2;
  }
  .text-blue-custom {
    color: #4E6EF2;
  }
  @keyframes slide-up {
    from {
      transform: translateY(100%);
    }
    to {
      transform: translateY(0);
    }
  }
  .animate-slide-up {
    animation: slide-up 0.3s ease-out;
  }
`;
document.head.appendChild(style);

// app/javascript/controllers/visa_order_controller.ts
var visa_order_controller_default = class extends Controller {
  static {
    this.targets = ["totalPrice", "deliveryAddress"];
  }
  connect() {
    console.log("VisaOrder controller connected");
  }
  async submitOrder(event2) {
    event2.preventDefault();
    const button = event2.currentTarget;
    const visaProductId = button.dataset.visaProductId || "";
    const travelerCount = parseInt(button.dataset.travelerCount || "1");
    const totalPrice = parseFloat(button.dataset.totalPrice || "0");
    const insuranceType = button.dataset.insuranceType || "none";
    const insurancePrice = parseFloat(button.dataset.insurancePrice || "0");
    const contactName = button.dataset.contactName || "";
    const contactPhone = button.dataset.contactPhone || "";
    const deliveryAddress = button.dataset.deliveryAddress || "";
    if (!contactName || contactName.trim() === "") {
      alert("\u8BF7\u586B\u5199\u8054\u7CFB\u4EBA\u59D3\u540D");
      return;
    }
    if (!contactPhone || contactPhone.trim() === "") {
      alert("\u8BF7\u586B\u5199\u8054\u7CFB\u4EBA\u7535\u8BDD");
      return;
    }
    if (!deliveryAddress || deliveryAddress.trim() === "") {
      alert("\u8BF7\u586B\u5199\u90AE\u5BC4\u5730\u5740");
      return;
    }
    const orderData = {
      visa_order: {
        visa_product_id: visaProductId,
        traveler_count: travelerCount,
        insurance_type: insuranceType,
        insurance_price: insurancePrice,
        total_price: totalPrice,
        contact_name: contactName.trim(),
        contact_phone: contactPhone.trim(),
        delivery_address: deliveryAddress.trim()
      }
    };
    button.disabled = true;
    button.textContent = "\u521B\u5EFA\u4E2D...";
    try {
      const csrfToken = document.querySelector('meta[name="csrf-token"]')?.content || "";
      const response = await fetch("/visa_orders", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "X-CSRF-Token": csrfToken
        },
        body: JSON.stringify(orderData)
      });
      const data2 = await response.json();
      if (response.ok && data2.success) {
        this.triggerPaymentModal(totalPrice.toString(), data2.payment_url, data2.success_url);
      } else {
        throw new Error(data2.message || "\u521B\u5EFA\u8BA2\u5355\u5931\u8D25");
      }
    } catch (error3) {
      console.error("Error creating order:", error3);
      const message = error3 instanceof Error ? error3.message : "\u521B\u5EFA\u8BA2\u5355\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5";
      alert(message);
      button.disabled = false;
      button.textContent = "\u7ACB\u523B\u652F\u4ED8";
    }
  }
  triggerPaymentModal(amount, paymentUrl, successUrl) {
    const paymentElement = document.querySelector('[data-controller*="payment-confirmation"]');
    if (!paymentElement) {
      console.error("Payment confirmation controller not found");
      alert("\u652F\u4ED8\u7CFB\u7EDF\u672A\u52A0\u8F7D\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
      return;
    }
    const app = window.Stimulus;
    if (!app) {
      console.error("Stimulus not found");
      alert("\u7CFB\u7EDF\u9519\u8BEF\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
      return;
    }
    const paymentController = app.getControllerForElementAndIdentifier(paymentElement, "payment-confirmation");
    if (paymentController) {
      paymentController.amountValue = amount;
      const userEmail = document.querySelector('meta[name="user-email"]')?.content || document.querySelector("[data-user-email]")?.getAttribute("data-user-email") || "demo@example.com";
      paymentController.userEmailValue = userEmail;
      paymentController.paymentUrlValue = paymentUrl;
      paymentController.successUrlValue = successUrl;
      paymentController.showPasswordModal();
    } else {
      console.error("Payment controller not initialized");
      alert("\u652F\u4ED8\u7CFB\u7EDF\u672A\u521D\u59CB\u5316\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
    }
  }
};

// app/javascript/controllers/abroad_region_selector_controller.ts
var abroad_region_selector_controller_default = class extends Controller {
  static {
    this.targets = ["regionButton", "regionContent", "ticketTypeButton", "ticketTypeContent"];
  }
  connect() {
    console.log("AbroadRegionSelector connected");
  }
  selectRegion(event2) {
    const clickedButton = event2.currentTarget;
    const region = clickedButton.dataset.region;
    if (this.hasRegionButtonTarget) {
      this.regionButtonTargets.forEach((button) => {
        button.classList.remove("text-yellow-600", "font-bold", "border-b-2", "border-yellow-600");
        button.classList.add("text-gray-500");
      });
    }
    clickedButton.classList.remove("text-gray-500");
    clickedButton.classList.add("text-yellow-600", "font-bold", "border-b-2", "border-yellow-600");
    this.regionContentTargets.forEach((content) => {
      if (content.dataset.region === region) {
        content.classList.remove("hidden");
      } else {
        content.classList.add("hidden");
      }
    });
  }
  selectTicketType(event2) {
    const clickedButton = event2.currentTarget;
    const ticketType = clickedButton.dataset.ticketType;
    if (this.hasTicketTypeButtonTarget) {
      this.ticketTypeButtonTargets.forEach((button) => {
        button.classList.remove("bg-yellow-500", "text-white");
        button.classList.add("bg-gray-100", "text-gray-700");
      });
    }
    clickedButton.classList.remove("bg-gray-100", "text-gray-700");
    clickedButton.classList.add("bg-yellow-500", "text-white");
    this.ticketTypeContentTargets.forEach((content) => {
      if (content.dataset.ticketType === ticketType) {
        content.classList.remove("hidden");
      } else {
        content.classList.add("hidden");
      }
    });
  }
  swapStations() {
    const originSelect = document.querySelector('[name="origin"]');
    const destinationSelect = document.querySelector('[name="destination"]');
    if (originSelect && destinationSelect) {
      const temp = originSelect.value;
      originSelect.value = destinationSelect.value;
      destinationSelect.value = temp;
    }
  }
};

// app/javascript/controllers/abroad_date_picker_controller.ts
var abroad_date_picker_controller_default = class extends Controller {
  static {
    this.targets = ["modal", "dateButton"];
  }
  static {
    this.values = {
      currentDate: String
    };
  }
  connect() {
    console.log("AbroadDatePicker connected");
    this.element.addEventListener("abroad-ticket-search:open-date-picker", () => {
      this.openModal();
    });
    this.updatePastDates();
  }
  openModal() {
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  closeModal() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  selectDate(event2) {
    const target = event2.currentTarget;
    const dateStr = target.dataset.date;
    if (dateStr) {
      const selectedDate = /* @__PURE__ */ new Date(`${dateStr}T00:00:00`);
      const today = /* @__PURE__ */ new Date();
      today.setHours(0, 0, 0, 0);
      selectedDate.setHours(0, 0, 0, 0);
      if (selectedDate < today) {
        return;
      }
      const searchController = this.application.getControllerForElementAndIdentifier(
        this.element,
        "abroad-ticket-search"
      );
      if (searchController && "updateDate" in searchController) {
        searchController.updateDate(dateStr);
      }
      this.closeModal();
    }
  }
  openCalendar() {
    this.openModal();
  }
  // Update past dates to be disabled
  updatePastDates() {
    if (!this.dateButtonTargets) return;
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    this.dateButtonTargets.forEach((button) => {
      const dateStr = button.dataset.date;
      if (!dateStr) return;
      const buttonDate = /* @__PURE__ */ new Date(`${dateStr}T00:00:00`);
      buttonDate.setHours(0, 0, 0, 0);
      if (buttonDate < today) {
        button.disabled = true;
        button.classList.add("opacity-40", "cursor-not-allowed");
        button.classList.remove("hover:bg-blue-50");
      }
    });
  }
};

// app/javascript/controllers/abroad_passenger_selector_controller.ts
var abroad_passenger_selector_controller_default = class extends Controller {
  static {
    this.targets = ["type"];
  }
  connect() {
    console.log("AbroadPassengerSelector connected");
  }
  select(event2) {
    const clickedElement = event2.currentTarget;
    const selectedType = clickedElement.dataset.abroadPassengerSelectorTypeParam;
    if (this.hasTypeTarget) {
      this.typeTargets.forEach((element) => {
        element.classList.remove("bg-[#FFFBF0]", "border", "border-[#FFE5B5]");
        element.classList.add("bg-gray-100");
        const checkmark = element.querySelector(".absolute");
        if (checkmark) {
          checkmark.remove();
        }
      });
    }
    clickedElement.classList.remove("bg-gray-100");
    clickedElement.classList.add("bg-[#FFFBF0]", "border", "border-[#FFE5B5]");
    const checkmarkHTML = `
      <div class="absolute bottom-0 right-0 w-3 h-3 bg-[#FFCC00] rounded-tl-lg rounded-br-lg flex items-center justify-center">
        <svg class="w-2 h-2 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path>
        </svg>
      </div>
    `;
    clickedElement.insertAdjacentHTML("beforeend", checkmarkHTML);
    if (selectedType) {
      const url = new URL(window.location.href);
      const ticketId = url.searchParams.get("abroad_ticket_id");
      const seatCategory = url.searchParams.get("seat_category");
      if (ticketId && seatCategory) {
        const bookingButtons = document.querySelectorAll('a[href*="new_abroad_ticket_order"]');
        bookingButtons.forEach((button) => {
          const href = button.getAttribute("href");
          if (href) {
            const newUrl = new URL(href, window.location.origin);
            newUrl.searchParams.set("passenger_type", selectedType);
            button.setAttribute("href", newUrl.toString());
          }
        });
      }
    }
  }
};

// app/javascript/controllers/abroad_order_form_controller.ts
var abroad_order_form_controller_default = class extends Controller {
  static {
    this.targets = ["modal", "nameInput", "phoneInput", "emailInput"];
  }
  async submitOrder(event2) {
    event2.preventDefault();
    const button = event2.currentTarget;
    const abroadTicketId = button.dataset.abroadTicketId;
    const totalPrice = button.dataset.totalPrice;
    if (!this.validateForm()) {
      return;
    }
    const passengerTypeInput = document.getElementById("passenger_type");
    const seatCategoryInput = document.getElementById("seat_category");
    const notesInput = document.getElementById("notes");
    const formData = {
      abroad_ticket_order: {
        abroad_ticket_id: abroadTicketId,
        passenger_name: this.nameInputTarget.value,
        contact_phone: this.phoneInputTarget.value,
        contact_email: this.emailInputTarget.value,
        passenger_type: passengerTypeInput?.value || "",
        seat_category: seatCategoryInput?.value || "",
        total_price: totalPrice,
        notes: notesInput?.value || ""
      }
    };
    button.disabled = true;
    button.textContent = "\u521B\u5EFA\u4E2D...";
    try {
      const csrfToken = document.querySelector('meta[name="csrf-token"]')?.content || "";
      const response = await fetch("/abroad_ticket_orders.json", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Accept": "application/json",
          "X-CSRF-Token": csrfToken
        },
        body: JSON.stringify(formData)
      });
      const data2 = await response.json();
      if (response.ok && data2.success) {
        this.triggerPaymentModal(totalPrice || "0", data2.payment_url, data2.success_url);
      } else {
        throw new Error(data2.message || "\u521B\u5EFA\u8BA2\u5355\u5931\u8D25");
      }
    } catch (error3) {
      console.error("Error creating order:", error3);
      const message = error3 instanceof Error ? error3.message : "\u521B\u5EFA\u8BA2\u5355\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5";
      alert(message);
      button.disabled = false;
      button.textContent = "\u7ACB\u5373\u9884\u8BA2";
    }
  }
  validateForm() {
    if (!this.hasNameInputTarget || !this.nameInputTarget.value.trim()) {
      alert("\u8BF7\u8F93\u5165\u59D3\u540D");
      return false;
    }
    if (!this.hasPhoneInputTarget || !this.phoneInputTarget.value.trim()) {
      alert("\u8BF7\u8F93\u5165\u624B\u673A\u53F7");
      return false;
    }
    if (!this.hasEmailInputTarget || !this.emailInputTarget.value.trim()) {
      alert("\u8BF7\u8F93\u5165\u90AE\u7BB1");
      return false;
    }
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(this.emailInputTarget.value)) {
      alert("\u8BF7\u8F93\u5165\u6709\u6548\u7684\u90AE\u7BB1\u5730\u5740");
      return false;
    }
    return true;
  }
  triggerPaymentModal(amount, paymentUrl, successUrl) {
    const paymentElement = document.querySelector('[data-controller*="payment-confirmation"]');
    if (!paymentElement) {
      console.error("Payment confirmation controller not found");
      alert("\u652F\u4ED8\u7CFB\u7EDF\u672A\u52A0\u8F7D\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
      return;
    }
    const app = window.Stimulus;
    if (!app) {
      console.error("Stimulus not found");
      alert("\u7CFB\u7EDF\u9519\u8BEF\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
      return;
    }
    const paymentController = app.getControllerForElementAndIdentifier(paymentElement, "payment-confirmation");
    if (paymentController) {
      paymentController.amountValue = amount;
      paymentController.userEmailValue = this.emailInputTarget.value;
      paymentController.paymentUrlValue = paymentUrl;
      paymentController.successUrlValue = successUrl;
      paymentController.showPasswordModal();
    } else {
      console.error("Payment controller not initialized");
      alert("\u652F\u4ED8\u7CFB\u7EDF\u672A\u521D\u59CB\u5316\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");
    }
  }
  openPassengerSelector() {
    this.modalTarget.classList.remove("hidden");
  }
  closePassengerSelector() {
    this.modalTarget.classList.add("hidden");
  }
  selectPassenger(event2) {
    const element = event2.currentTarget;
    const name = element.dataset.abroadOrderFormNameParam || "";
    const phone = element.dataset.abroadOrderFormPhoneParam || "";
    if (this.hasNameInputTarget) {
      this.nameInputTarget.value = name;
    }
    if (this.hasPhoneInputTarget) {
      this.phoneInputTarget.value = phone;
    }
    this.closePassengerSelector();
  }
};

// app/javascript/controllers/abroad_ticket_search_controller.ts
var abroad_ticket_search_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.currentSelectionType = "origin";
    this.currentRegion = "japan";
    // 
    this.japanStations = {
      "\u4E1C\u4EAC": [
        { name: "\u4E1C\u4EAC\u7AD9", nameEn: "Tokyo Station", city: "\u4E1C\u4EAC" },
        { name: "\u65B0\u5BBF\u7AD9", nameEn: "Shinjuku Station", city: "\u4E1C\u4EAC" },
        { name: "\u6DA9\u8C37\u7AD9", nameEn: "Shibuya Station", city: "\u4E1C\u4EAC" },
        { name: "\u6C60\u888B\u7AD9", nameEn: "Ikebukuro Station", city: "\u4E1C\u4EAC" },
        { name: "\u54C1\u5DDD\u7AD9", nameEn: "Shinagawa Station", city: "\u4E1C\u4EAC" }
      ],
      "\u5927\u962A": [
        { name: "\u65B0\u5927\u962A\u7AD9", nameEn: "Shin-Osaka Station", city: "\u5927\u962A" },
        { name: "\u5927\u962A\u7AD9", nameEn: "Osaka Station", city: "\u5927\u962A" },
        { name: "\u96BE\u6CE2\u7AD9", nameEn: "Namba Station", city: "\u5927\u962A" },
        { name: "\u5929\u738B\u5BFA\u7AD9", nameEn: "Tennoji Station", city: "\u5927\u962A" }
      ],
      "\u4EAC\u90FD": [
        { name: "\u4EAC\u90FD\u7AD9", nameEn: "Kyoto Station", city: "\u4EAC\u90FD" },
        { name: "\u54C1\u5DDD\u7AD9", nameEn: "Shinagawa Station", city: "\u4EAC\u90FD" }
      ],
      "\u540D\u53E4\u5C4B": [
        { name: "\u540D\u53E4\u5C4B\u7AD9", nameEn: "Nagoya Station", city: "\u540D\u53E4\u5C4B" }
      ],
      "\u4ED9\u53F0": [
        { name: "\u4ED9\u53F0\u7AD9", nameEn: "Sendai Station", city: "\u4ED9\u53F0" }
      ],
      "\u9752\u68EE": [
        { name: "\u9752\u68EE\u7AD9", nameEn: "Aomori Station", city: "\u9752\u68EE" }
      ],
      "\u65B0\u6F5F": [
        { name: "\u65B0\u6F5F\u7AD9", nameEn: "Niigata Station", city: "\u65B0\u6F5F" }
      ],
      "\u5E7F\u5C9B": [
        { name: "\u5E7F\u5C9B\u7AD9", nameEn: "Hiroshima Station", city: "\u5E7F\u5C9B" }
      ],
      "\u798F\u5188": [
        { name: "\u535A\u591A\u7AD9", nameEn: "Hakata Station", city: "\u798F\u5188" }
      ],
      "\u9E7F\u513F\u5C9B": [
        { name: "\u9E7F\u513F\u5C9B\u4E2D\u592E\u7AD9", nameEn: "Kagoshima-Chuo Station", city: "\u9E7F\u513F\u5C9B" }
      ],
      "\u5317\u6D77\u9053": [
        { name: "\u672D\u5E4C\u7AD9", nameEn: "Sapporo Station", city: "\u5317\u6D77\u9053" }
      ]
    };
    // 
    this.europeStations = {
      "\u6CD5\u56FD": [
        { name: "\u5DF4\u9ECE\u5317\u7AD9", nameEn: "Paris Nord", city: "\u6CD5\u56FD" },
        { name: "\u5DF4\u9ECE\u91CC\u6602\u7AD9", nameEn: "Paris Gare de Lyon", city: "\u6CD5\u56FD" },
        { name: "\u91CC\u6602\u7AD9", nameEn: "Lyon Station", city: "\u6CD5\u56FD" },
        { name: "\u9A6C\u8D5B\u7AD9", nameEn: "Marseille Station", city: "\u6CD5\u56FD" }
      ],
      "\u8377\u5170": [
        { name: "\u963F\u59C6\u65AF\u7279\u4E39\u4E2D\u592E\u8F66\u7AD9", nameEn: "Amsterdam Centraal", city: "\u8377\u5170" },
        { name: "\u9E7F\u7279\u4E39\u4E2D\u592E\u8F66\u7AD9", nameEn: "Rotterdam Centraal", city: "\u8377\u5170" }
      ],
      "\u5FB7\u56FD": [
        { name: "\u67CF\u6797\u4E2D\u592E\u8F66\u7AD9", nameEn: "Berlin Hauptbahnhof", city: "\u5FB7\u56FD" },
        { name: "\u6155\u5C3C\u9ED1\u4E2D\u592E\u8F66\u7AD9", nameEn: "M\xFCnchen Hauptbahnhof", city: "\u5FB7\u56FD" },
        { name: "\u6CD5\u5170\u514B\u798F\u4E2D\u592E\u8F66\u7AD9", nameEn: "Frankfurt Hauptbahnhof", city: "\u5FB7\u56FD" }
      ],
      "\u610F\u5927\u5229": [
        { name: "\u7F57\u9A6C\u7279\u7C73\u5C3C\u7AD9", nameEn: "Roma Termini", city: "\u610F\u5927\u5229" },
        { name: "\u7C73\u5170\u4E2D\u592E\u8F66\u7AD9", nameEn: "Milano Centrale", city: "\u610F\u5927\u5229" },
        { name: "\u4F5B\u7F57\u4F26\u8428\u5723\u6BCD\u739B\u5229\u4E9A\u8F66\u7AD9", nameEn: "Firenze Santa Maria Novella", city: "\u610F\u5927\u5229" }
      ],
      "\u897F\u73ED\u7259": [
        { name: "\u9A6C\u5FB7\u91CC\u963F\u6258\u67E5\u7AD9", nameEn: "Madrid Atocha", city: "\u897F\u73ED\u7259" },
        { name: "\u5DF4\u585E\u7F57\u90A3\u6851\u65AF\u7AD9", nameEn: "Barcelona Sants", city: "\u897F\u73ED\u7259" }
      ]
    };
    // 
    this.popularRoutes = {
      japan: [
        { origin: "\u4E1C\u4EAC\u7AD9", destination: "\u4EAC\u90FD\u7AD9" },
        { origin: "\u4E1C\u4EAC\u7AD9", destination: "\u65B0\u5927\u962A\u7AD9" }
      ],
      europe: [
        { origin: "\u5DF4\u9ECE\u5317\u7AD9", destination: "\u963F\u59C6\u65AF\u7279\u4E39\u4E2D\u592E\u8F66\u7AD9" },
        { origin: "\u5DF4\u9ECE\u91CC\u6602\u7AD9", destination: "\u7F57\u9A6C\u7279\u7C73\u5C3C\u7AD9" }
      ]
    };
  }
  static {
    this.targets = [
      "form",
      "regionInput",
      "originInput",
      "destinationInput",
      "originText",
      "destinationText",
      "dateInput",
      "dateText",
      "stationModal",
      "stationList",
      "searchInput"
    ];
  }
  static {
    this.values = {
      currentDate: String
    };
  }
  connect() {
    this.currentRegion = this.regionInputTarget.value;
    console.log("Abroad ticket search controller connected");
  }
  selectRegion(event2) {
    const button = event2.currentTarget;
    const region = button.dataset.abroadTicketSearchRegionParam;
    if (region && region !== this.currentRegion) {
      const url = new URL(window.location.href);
      url.searchParams.set("region", region);
      window.Turbo.visit(url.toString());
    }
  }
  selectTicketType(event2) {
    event2.preventDefault();
    const button = event2.currentTarget;
    const ticketType = button.dataset.abroadTicketSearchTicketTypeParam;
    const allButtons = button.parentElement?.querySelectorAll("button") || [];
    allButtons.forEach((btn) => {
      btn.classList.remove("bg-white", "shadow-sm", "font-bold");
      btn.classList.add("font-medium", "text-gray-500");
    });
    button.classList.remove("font-medium", "text-gray-500");
    button.classList.add("bg-white", "shadow-sm", "font-bold");
    console.log("Selected ticket type:", ticketType);
  }
  selectOrigin(event2) {
    event2.preventDefault();
    this.currentSelectionType = "origin";
    this.openStationModal();
  }
  selectDestination(event2) {
    event2.preventDefault();
    this.currentSelectionType = "destination";
    this.openStationModal();
  }
  swapStations(event2) {
    event2.preventDefault();
    const originValue = this.originInputTarget.value;
    const destinationValue = this.destinationInputTarget.value;
    this.originInputTarget.value = destinationValue;
    this.destinationInputTarget.value = originValue;
    this.originTextTarget.textContent = destinationValue;
    this.destinationTextTarget.textContent = originValue;
  }
  openDatePicker(event2) {
    event2.preventDefault();
    const customEvent = new CustomEvent("abroad-ticket-search:open-date-picker", {
      bubbles: true
    });
    this.element.dispatchEvent(customEvent);
  }
  updateDate(dateStr) {
    this.dateInputTarget.value = dateStr;
    this.currentDateValue = dateStr;
    const date = /* @__PURE__ */ new Date(`${dateStr}T00:00:00`);
    const month = date.getMonth() + 1;
    const day = date.getDate();
    const weekdays = ["\u5468\u65E5", "\u5468\u4E00", "\u5468\u4E8C", "\u5468\u4E09", "\u5468\u56DB", "\u5468\u4E94", "\u5468\u516D"];
    const weekday = weekdays[date.getDay()];
    this.dateTextTarget.textContent = `${month}\u6708${day}\u65E5`;
    const weekdayElement = this.dateTextTarget.nextElementSibling;
    if (weekdayElement) {
      weekdayElement.textContent = weekday;
    }
  }
  openStationModal() {
    this.stationModalTarget.classList.remove("hidden");
    this.renderStationList();
    this.searchInputTarget.value = "";
    this.searchInputTarget.focus();
  }
  closeStationModal() {
    this.stationModalTarget.classList.add("hidden");
  }
  selectStation(event2) {
    const element = event2.currentTarget;
    const stationName = element.dataset.stationName;
    const stationNameEn = element.dataset.stationNameEn;
    if (!stationName) return;
    if (this.currentSelectionType === "origin") {
      this.originInputTarget.value = stationName;
      this.originTextTarget.textContent = stationName;
      const subtitle = this.originTextTarget.nextElementSibling;
      if (subtitle) {
        subtitle.textContent = stationNameEn || "";
      }
    } else {
      this.destinationInputTarget.value = stationName;
      this.destinationTextTarget.textContent = stationName;
      const subtitle = this.destinationTextTarget.nextElementSibling;
      if (subtitle) {
        subtitle.textContent = stationNameEn || "";
      }
    }
    this.closeStationModal();
  }
  searchStations(event2) {
    const input = event2.currentTarget;
    const query = input.value.trim().toLowerCase();
    this.renderStationList(query);
  }
  renderStationList(searchQuery = "") {
    const stations = this.currentRegion === "japan" ? this.japanStations : this.europeStations;
    const popularRoutes = this.currentRegion === "japan" ? this.popularRoutes.japan : this.popularRoutes.europe;
    let html = "";
    if (!searchQuery && popularRoutes.length > 0) {
      html += `
        <div class="mb-6">
          <h3 class="text-sm font-medium text-gray-500 mb-3 px-4">\u70ED\u95E8\u8DEF\u7EBF</h3>
          <div class="flex gap-3 px-4 overflow-x-auto">
            ${popularRoutes.map((route) => `
              <div class="bg-gray-50 rounded-lg px-4 py-2 whitespace-nowrap cursor-pointer hover:bg-gray-100"
                   data-action="click->abroad-ticket-search#selectPopularRoute"
                   data-origin="${route.origin}"
                   data-destination="${route.destination}">
                <span class="text-sm font-medium">${route.origin} - ${route.destination}</span>
              </div>
            `).join("")}
          </div>
        </div>
      `;
    }
    html += '<div class="mb-4"><h3 class="text-sm font-medium text-gray-500 mb-3 px-4">\u7AD9\u70B9\u9009\u62E9</h3></div>';
    Object.entries(stations).forEach(([city, stationList]) => {
      const filteredStations = stationList.filter(
        (station) => !searchQuery || station.name.toLowerCase().includes(searchQuery) || station.nameEn.toLowerCase().includes(searchQuery) || city.toLowerCase().includes(searchQuery)
      );
      if (filteredStations.length > 0) {
        html += `
          <div class="mb-4">
            <div class="flex items-center px-4 py-2 bg-gray-50">
              <span class="text-sm font-bold text-gray-700">${city}</span>
            </div>
            ${filteredStations.map((station) => {
          const isSelected = this.currentSelectionType === "origin" && this.originInputTarget.value === station.name || this.currentSelectionType === "destination" && this.destinationInputTarget.value === station.name;
          return `
                <div class="flex items-center justify-between px-4 py-3 border-b border-gray-100 cursor-pointer hover:bg-gray-50"
                     data-action="click->abroad-ticket-search#selectStation"
                     data-station-name="${station.name}"
                     data-station-name-en="${station.nameEn}">
                  <div class="flex-1">
                    <div class="text-base font-medium text-gray-900">${station.name}</div>
                    <div class="text-xs text-gray-400 mt-0.5">${station.nameEn}</div>
                  </div>
                  ${isSelected ? `
                    <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd"
                            d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                            clip-rule="evenodd"/>
                    </svg>
                  ` : ""}
                </div>
              `;
        }).join("")}
          </div>
        `;
      }
    });
    const noResultsHeader = '<div class="mb-4"><h3 class="text-sm font-medium text-gray-500 mb-3 px-4">\u7AD9\u70B9\u9009\u62E9</h3></div>';
    if (html === noResultsHeader) {
      html += '<div class="text-center py-8 text-gray-400">\u672A\u627E\u5230\u5339\u914D\u7684\u7AD9\u70B9</div>';
    }
    this.stationListTarget.innerHTML = html;
  }
  selectPopularRoute(event2) {
    const element = event2.currentTarget;
    const origin = element.dataset.origin;
    const destination = element.dataset.destination;
    if (origin && destination) {
      const stations = this.currentRegion === "japan" ? this.japanStations : this.europeStations;
      let originStation;
      let destinationStation;
      Object.values(stations).forEach((stationList) => {
        stationList.forEach((station) => {
          if (station.name === origin) originStation = station;
          if (station.name === destination) destinationStation = station;
        });
      });
      if (originStation) {
        this.originInputTarget.value = originStation.name;
        this.originTextTarget.textContent = originStation.name;
        const subtitle = this.originTextTarget.nextElementSibling;
        if (subtitle) subtitle.textContent = originStation.nameEn;
      }
      if (destinationStation) {
        this.destinationInputTarget.value = destinationStation.name;
        this.destinationTextTarget.textContent = destinationStation.name;
        const subtitle = this.destinationTextTarget.nextElementSibling;
        if (subtitle) subtitle.textContent = destinationStation.nameEn;
      }
      this.closeStationModal();
    }
  }
};

// app/javascript/controllers/homestay_search_controller.ts
var homestay_search_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.currentLocationType = "domestic";
    this.lastDomesticCity = "\u5317\u4EAC";
    this.lastInternationalCity = "\u9999\u6E2F";
  }
  static {
    this.targets = [
      "searchForm",
      "cityInput",
      "cityDisplay",
      "checkInInput",
      "checkOutInput",
      "roomsInput",
      "adultsInput",
      "childrenInput",
      "queryInput",
      "domesticTab",
      "internationalTab",
      "domesticIndicator",
      "internationalIndicator"
    ];
  }
  connect() {
    console.log("HomestaySearch connected");
    if (this.hasCityInputTarget) {
      const currentCity = this.cityInputTarget.value;
      if (currentCity) {
        this.lastDomesticCity = currentCity;
        console.log("HomestaySearch: Initialized lastDomesticCity to:", currentCity);
      }
    }
    document.addEventListener("city-selector:city-selected-for-hotel", this.handleCityUpdate.bind(this));
    document.addEventListener("hotel-date-picker:dates-selected", this.handleDateUpdate.bind(this));
    document.addEventListener("hotel-guest-selector:guests-updated", this.handleGuestUpdate.bind(this));
  }
  disconnect() {
    console.log("HomestaySearch disconnected");
    document.removeEventListener("city-selector:city-selected-for-hotel", this.handleCityUpdate.bind(this));
    document.removeEventListener("hotel-date-picker:dates-selected", this.handleDateUpdate.bind(this));
    document.removeEventListener("hotel-guest-selector:guests-updated", this.handleGuestUpdate.bind(this));
  }
  // Handle city selection update from city-selector
  handleCityUpdate(event2) {
    const customEvent = event2;
    const { cityName, isInternational } = customEvent.detail;
    console.log("HomestaySearch: Received city update:", cityName, "isInternational:", isInternational);
    if (isInternational) {
      this.lastInternationalCity = cityName;
    } else {
      this.lastDomesticCity = cityName;
    }
    if (this.hasCityInputTarget) {
      this.cityInputTarget.value = cityName;
      console.log("HomestaySearch: Updated city input to:", cityName);
    }
    if (isInternational) {
      this.switchToInternational(false);
    } else {
      this.switchToDomestic(false);
    }
  }
  // Handle date selection update from hotel-date-picker
  handleDateUpdate(event2) {
    const customEvent = event2;
    const { checkIn, checkOut } = customEvent.detail;
    console.log("HomestaySearch: Received date update:", { checkIn, checkOut });
    if (this.hasCheckInInputTarget) {
      this.checkInInputTarget.value = checkIn;
      console.log("HomestaySearch: Updated check-in to:", checkIn);
    }
    if (this.hasCheckOutInputTarget) {
      this.checkOutInputTarget.value = checkOut;
      console.log("HomestaySearch: Updated check-out to:", checkOut);
    }
  }
  // Handle guest selection update from hotel-guest-selector
  handleGuestUpdate(event2) {
    const customEvent = event2;
    const { rooms, adults, children } = customEvent.detail;
    console.log("HomestaySearch: Received guest update:", { rooms, adults, children });
    if (this.hasRoomsInputTarget) {
      this.roomsInputTarget.value = rooms.toString();
      console.log("HomestaySearch: Updated rooms to:", rooms);
    }
    if (this.hasAdultsInputTarget) {
      this.adultsInputTarget.value = adults.toString();
      console.log("HomestaySearch: Updated adults to:", adults);
    }
    if (this.hasChildrenInputTarget) {
      this.childrenInputTarget.value = children.toString();
      console.log("HomestaySearch: Updated children to:", children);
    }
  }
  openSearchModal() {
    const keyword = prompt("\u8BF7\u8F93\u5165\u6C11\u5BBF\u540D\u79F0\u3001\u5730\u540D\u6216\u5173\u952E\u8BCD\uFF1A");
    if (keyword !== null && this.hasQueryInputTarget) {
      this.queryInputTarget.value = keyword;
      if (this.searchFormTarget) {
        this.searchFormTarget.requestSubmit();
      }
    }
  }
  // Switch to domestic tab
  switchToDomestic(updateCity = true) {
    if (this.currentLocationType === "domestic") return;
    console.log("HomestaySearch: Switching to domestic");
    this.currentLocationType = "domestic";
    if (updateCity) {
      if (this.hasCityInputTarget) {
        this.cityInputTarget.value = this.lastDomesticCity;
        console.log("HomestaySearch: Restored domestic city to:", this.lastDomesticCity);
      }
      if (this.hasCityDisplayTarget) {
        this.cityDisplayTarget.textContent = this.lastDomesticCity;
        console.log("HomestaySearch: Updated city display to:", this.lastDomesticCity);
      }
    }
    const domesticSpan = this.domesticTabTarget.querySelector("span");
    if (domesticSpan) {
      domesticSpan.classList.remove("font-medium");
      domesticSpan.classList.add("font-bold");
    }
    this.domesticTabTarget.classList.remove("text-gray-500");
    this.domesticTabTarget.classList.add("text-gray-800");
    this.domesticIndicatorTarget.classList.remove("hidden");
    const internationalSpan = this.internationalTabTarget.querySelector("span");
    if (internationalSpan) {
      internationalSpan.classList.remove("font-bold");
      internationalSpan.classList.add("font-medium");
    }
    this.internationalTabTarget.classList.remove("text-gray-800");
    this.internationalTabTarget.classList.add("text-gray-500");
    this.internationalIndicatorTarget.classList.add("hidden");
  }
  // Switch to international tab
  switchToInternational(updateCity = true) {
    if (this.currentLocationType === "international") return;
    console.log("HomestaySearch: Switching to international");
    this.currentLocationType = "international";
    if (updateCity) {
      if (this.hasCityInputTarget) {
        this.cityInputTarget.value = this.lastInternationalCity;
        console.log("HomestaySearch: Restored international city to:", this.lastInternationalCity);
      }
      if (this.hasCityDisplayTarget) {
        this.cityDisplayTarget.textContent = this.lastInternationalCity;
        console.log("HomestaySearch: Updated city display to:", this.lastInternationalCity);
      }
    }
    const internationalSpan = this.internationalTabTarget.querySelector("span");
    if (internationalSpan) {
      internationalSpan.classList.remove("font-medium");
      internationalSpan.classList.add("font-bold");
    }
    this.internationalTabTarget.classList.remove("text-gray-500");
    this.internationalTabTarget.classList.add("text-gray-800");
    this.internationalIndicatorTarget.classList.remove("hidden");
    const domesticSpan = this.domesticTabTarget.querySelector("span");
    if (domesticSpan) {
      domesticSpan.classList.remove("font-bold");
      domesticSpan.classList.add("font-medium");
    }
    this.domesticTabTarget.classList.remove("text-gray-800");
    this.domesticTabTarget.classList.add("text-gray-500");
    this.domesticIndicatorTarget.classList.add("hidden");
  }
};

// app/javascript/controllers/internet_services_controller.ts
var internet_services_controller_default = class extends Controller {
  connect() {
    console.log("InternetServices connected");
  }
  switchTab(event2) {
  }
};

// app/javascript/controllers/sim_card_filter_controller.ts
var sim_card_filter_controller_default = class extends Controller {
  connect() {
    console.log("SimCardFilter connected");
  }
  selectDelivery(event2) {
    const button = event2.currentTarget;
    const method = button.dataset.method;
    const allButtons = this.element.querySelectorAll("[data-method]");
    allButtons.forEach((b) => {
      b.classList.remove("font-medium");
      b.classList.add("text-gray-700");
    });
    button.classList.add("font-medium");
  }
  selectDays(event2) {
    const button = event2.currentTarget;
    const allButtons = this.element.querySelectorAll("[data-days]");
    allButtons.forEach((b) => {
      b.classList.remove("bg-[#FFF8D8]", "border-[#FFCC00]", "font-medium");
      b.classList.add("bg-gray-50", "text-gray-700");
      b.querySelectorAll(".absolute").forEach((el) => el.remove());
    });
    button.classList.add("bg-[#FFF8D8]", "border-[#FFCC00]", "font-medium");
    button.classList.remove("bg-gray-50", "text-gray-700");
    const checkmarkHTML = `
      <div class="absolute bottom-0 right-0 w-3 h-3 bg-[#FFCC00] rounded-tl-lg"></div>
      <svg class="absolute bottom-0.5 right-0.5 w-1.5 h-1.5 text-black z-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path>
      </svg>
    `;
    button.insertAdjacentHTML("beforeend", checkmarkHTML);
  }
  selectData(event2) {
    const button = event2.currentTarget;
    const allButtons = this.element.querySelectorAll("[data-data]");
    allButtons.forEach((b) => {
      b.classList.remove("bg-[#FFF8D8]", "border-[#FFCC00]", "font-medium");
      b.classList.add("bg-gray-50", "text-gray-700");
      b.querySelectorAll(".absolute").forEach((el) => el.remove());
    });
    button.classList.add("bg-[#FFF8D8]", "border-[#FFCC00]", "font-medium");
    button.classList.remove("bg-gray-50", "text-gray-700");
    const checkmarkHTML = `
      <div class="absolute bottom-0 right-0 w-3 h-3 bg-[#FFCC00] rounded-tl-lg"></div>
      <svg class="absolute bottom-0.5 right-0.5 w-1.5 h-1.5 text-black z-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path>
      </svg>
    `;
    button.insertAdjacentHTML("beforeend", checkmarkHTML);
  }
};

// app/javascript/controllers/data_plan_controller.ts
var data_plan_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedPlanId = "";
    this.selectedPrice = 35;
  }
  static {
    this.targets = ["totalPrice", "paymentButton"];
  }
  connect() {
    console.log("DataPlan connected");
  }
  selectPlan(event2) {
    const card = event2.currentTarget;
    const planId = card.dataset.planId || "";
    const price = parseFloat(card.dataset.planPrice || "35");
    this.selectedPlanId = planId;
    this.selectedPrice = price;
    if (this.hasTotalPriceTarget) {
      this.totalPriceTarget.textContent = price.toFixed(0);
    }
    if (this.hasPaymentButtonTarget) {
      const url = new URL(this.paymentButtonTarget.href);
      url.searchParams.set("orderable_id", planId);
      this.paymentButtonTarget.href = url.toString();
    }
    const allCards = this.element.querySelectorAll("[data-plan-id]");
    allCards.forEach((c) => {
      c.classList.remove("bg-[#FFF9E6]", "border-[#FFD200]");
      c.classList.add("bg-[#F7F8FA]");
      const checkmark = c.querySelector(".absolute");
      if (checkmark) checkmark.remove();
    });
    card.classList.add("bg-[#FFF9E6]", "border-[#FFD200]");
    card.classList.remove("bg-[#F7F8FA]");
    const checkmarkHTML = `
      <div class="absolute bottom-0 right-0 w-0 h-0 border-solid border-[0_0_20px_24px] border-transparent border-b-[#FFD200] rounded-br-lg">
        <svg class="absolute bottom-[-16px] right-[2px] w-2 h-2 text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="4">
          <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path>
        </svg>
      </div>
    `;
    card.insertAdjacentHTML("beforeend", checkmarkHTML);
  }
};

// app/javascript/controllers/wifi_booking_controller.ts
var wifi_booking_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedPlanId = "";
    this.dailyPrice = 17;
    this.days = 7;
    this.currentDeliveryMethod = "pickup";
  }
  static {
    this.targets = [
      "quantity",
      "totalPrice",
      "contactName",
      "contactPhone",
      "dateRange",
      "mailTab",
      "pickupTab",
      "addressSection",
      "mailAddress"
    ];
  }
  connect() {
    const firstPlan = this.element.querySelector("[data-wifi-id]");
    if (firstPlan) {
      const id2 = firstPlan.getAttribute("data-wifi-id");
      const price = firstPlan.getAttribute("data-wifi-price");
      if (id2) this.selectedPlanId = id2;
      if (price) this.dailyPrice = parseFloat(price);
    }
    this.updateTotalPrice();
    this.updatePaymentButton();
  }
  selectPlan(event2) {
    const card = event2.currentTarget;
    const planId = card.dataset.wifiId || "";
    const price = parseFloat(card.dataset.wifiPrice || "17");
    this.selectedPlanId = planId;
    this.dailyPrice = price;
    this.updateTotalPrice();
    this.updatePaymentButton();
    const allCards = this.element.querySelectorAll("[data-wifi-id]");
    allCards.forEach((c) => {
      c.classList.remove("bg-[#FFFDF2]", "border-[#FFDD00]");
      c.classList.add("bg-white");
      const checkmark = c.querySelector(".bg-[#FFDD00]");
      if (checkmark) {
        checkmark.outerHTML = '<div class="w-5 h-5 ml-2 border border-gray-300 rounded-full"></div>';
      }
    });
    card.classList.add("bg-[#FFFDF2]", "border-[#FFDD00]");
    card.classList.remove("bg-white");
    const circle = card.querySelector(".border-gray-300");
    if (circle) {
      const checkmarkSVG = '<svg class="w-3.5 h-3.5 text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>';
      const checkmarkHTML = `<div class="w-5 h-5 ml-2 bg-[#FFDD00] rounded-full flex items-center justify-center">${checkmarkSVG}</div>`;
      circle.outerHTML = checkmarkHTML;
    }
  }
  selectDelivery(event2) {
    event2.preventDefault();
    const button = event2.currentTarget;
    const method = button.dataset.method;
    if (!method) return;
    this.currentDeliveryMethod = method;
    if (this.hasMailTabTarget && this.hasPickupTabTarget) {
      this.mailTabTarget.classList.remove("font-bold", "bg-white", "shadow-sm", "text-gray-800");
      this.mailTabTarget.classList.add("text-gray-500");
      this.pickupTabTarget.classList.remove("font-bold", "bg-white", "shadow-sm", "text-gray-800");
      this.pickupTabTarget.classList.add("text-gray-500");
      if (method === "mail") {
        this.mailTabTarget.classList.remove("text-gray-500");
        this.mailTabTarget.classList.add("font-bold", "bg-white", "shadow-sm", "text-gray-800");
        if (this.hasAddressSectionTarget) this.addressSectionTarget.classList.add("hidden");
        if (this.hasMailAddressTarget) this.mailAddressTarget.classList.remove("hidden");
      } else {
        this.pickupTabTarget.classList.remove("text-gray-500");
        this.pickupTabTarget.classList.add("font-bold", "bg-white", "shadow-sm", "text-gray-800");
        if (this.hasAddressSectionTarget) this.addressSectionTarget.classList.remove("hidden");
        if (this.hasMailAddressTarget) this.mailAddressTarget.classList.add("hidden");
      }
    }
  }
  increase() {
    const currentQty = parseInt(this.quantityTarget.textContent || "1");
    this.quantityTarget.textContent = (currentQty + 1).toString();
    this.updateTotalPrice();
  }
  decrease() {
    const currentQty = parseInt(this.quantityTarget.textContent || "1");
    if (currentQty > 1) {
      this.quantityTarget.textContent = (currentQty - 1).toString();
      this.updateTotalPrice();
    }
  }
  updateTotalPrice() {
    const quantity = parseInt(this.quantityTarget.textContent || "1");
    const total = this.dailyPrice * this.days * quantity;
    if (this.hasTotalPriceTarget) {
      this.totalPriceTarget.textContent = total.toFixed(0);
    }
  }
  updatePaymentButton() {
    console.log("[WiFi] updatePaymentButton called, selectedPlanId:", this.selectedPlanId);
    const paymentLink = this.element.querySelector("a#wifi-payment-link");
    console.log("[WiFi] Found paymentLink:", paymentLink);
    if (paymentLink && this.selectedPlanId) {
      const url = new URL(paymentLink.href);
      url.searchParams.set("orderable_id", this.selectedPlanId);
      paymentLink.href = url.toString();
      console.log("[WiFi] Updated paymentLink href to:", paymentLink.href);
    }
  }
};

// app/javascript/controllers/internet_order_form_controller.ts
var internet_order_form_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.basePrice = 0;
  }
  static {
    this.targets = ["quantity", "totalPrice"];
  }
  connect() {
    console.log("InternetOrderForm connected");
    const totalPriceField = this.element.querySelector('[data-internet-order-form-target="totalPriceField"]');
    if (totalPriceField) {
      this.basePrice = parseFloat(totalPriceField.value) || 0;
    }
  }
  selectAddress(event2) {
    const radio = event2.target;
    const selectedIndex = parseInt(radio.value);
    const labels = this.element.querySelectorAll('[data-internet-order-form-target="mailSection"] label');
    labels.forEach((label, index) => {
      if (index === selectedIndex) {
        label.classList.add("border-[#FFDD00]", "bg-[#FFFEF8]");
        label.classList.remove("border-gray-200");
      } else {
        label.classList.remove("border-[#FFDD00]", "bg-[#FFFEF8]");
        label.classList.add("border-gray-200");
      }
      const hiddenFields = label.querySelectorAll('input[type="hidden"]');
      hiddenFields.forEach((field) => {
        field.disabled = index !== selectedIndex;
      });
    });
  }
  selectPassenger(event2) {
    const radio = event2.target;
    const selectedIndex = parseInt(radio.value);
    const labels = this.element.querySelectorAll('[data-internet-order-form-target="pickupSection"] label');
    labels.forEach((label, index) => {
      if (index === selectedIndex) {
        label.classList.add("border-[#FFDD00]", "bg-[#FFFEF8]");
        label.classList.remove("border-gray-200");
      } else {
        label.classList.remove("border-[#FFDD00]", "bg-[#FFFEF8]");
        label.classList.add("border-gray-200");
      }
      const hiddenFields = label.querySelectorAll('input[type="hidden"]');
      hiddenFields.forEach((field) => {
        field.disabled = index !== selectedIndex;
      });
    });
  }
  increase() {
    const currentQty = parseInt(this.quantityTarget.textContent || "1");
    const newQty = currentQty + 1;
    this.quantityTarget.textContent = newQty.toString();
    this.updateQuantityField(newQty);
    this.updateTotalPrice(newQty);
  }
  decrease() {
    const currentQty = parseInt(this.quantityTarget.textContent || "1");
    if (currentQty > 1) {
      const newQty = currentQty - 1;
      this.quantityTarget.textContent = newQty.toString();
      this.updateQuantityField(newQty);
      this.updateTotalPrice(newQty);
    }
  }
  updateRentalDays(event2) {
    const input = event2.target;
    const days = parseInt(input.value) || 1;
    this.updateTotalPrice(days);
    const rentalDaysField = this.element.querySelector('[data-internet-order-form-target="rentalDaysField"]');
    if (rentalDaysField) {
      rentalDaysField.value = days.toString();
      const pickupDateField = rentalDaysField.closest("div")?.querySelector('input[name*="[pickup_date]"]');
      const returnDateField = rentalDaysField.closest("div")?.querySelector('input[name*="[return_date]"]');
      if (pickupDateField && returnDateField) {
        const pickupDate = new Date(pickupDateField.value);
        const returnDate = new Date(pickupDate);
        returnDate.setDate(returnDate.getDate() + days);
        returnDateField.value = returnDate.toISOString().split("T")[0];
      }
    }
  }
  selectDeliveryMethod(event2) {
    const radio = event2.target;
    const mailSection = this.element.querySelector('[data-internet-order-form-target="mailSection"]');
    const pickupSection = this.element.querySelector('[data-internet-order-form-target="pickupSection"]');
    const mailLabel = this.element.querySelector('[data-internet-order-form-target="mailLabel"]');
    const pickupLabel = this.element.querySelector('[data-internet-order-form-target="pickupLabel"]');
    if (radio.value === "mail") {
      mailSection?.classList.remove("hidden");
      pickupSection?.classList.add("hidden");
      mailLabel?.classList.add("border-[#FFDD00]", "bg-[#FFFEF8]");
      pickupLabel?.classList.remove("border-[#FFDD00]", "bg-[#FFFEF8]");
    } else {
      mailSection?.classList.add("hidden");
      pickupSection?.classList.remove("hidden");
      pickupLabel?.classList.add("border-[#FFDD00]", "bg-[#FFFEF8]");
      mailLabel?.classList.remove("border-[#FFDD00]", "bg-[#FFFEF8]");
    }
  }
  updateQuantityField(quantity) {
    const quantityField = this.element.querySelector('[data-internet-order-form-target="quantityField"]');
    if (quantityField) {
      quantityField.value = quantity.toString();
    }
  }
  updateTotalPrice(multiplier) {
    const total = this.basePrice * multiplier;
    if (this.hasTotalPriceTarget) {
      this.totalPriceTarget.textContent = total.toFixed(0);
    }
    const totalPriceField = this.element.querySelector('[data-internet-order-form-target="totalPriceField"]');
    if (totalPriceField) {
      totalPriceField.value = total.toString();
    }
  }
};

// app/javascript/controllers/product_card_controller.ts
var product_card_controller_default = class extends Controller {
  select(event2) {
    event2.preventDefault();
    const card = this.element;
    document.querySelectorAll('[data-controller="product-card"]').forEach((el) => {
      const checkbox = el.querySelector(".w-5.h-5.rounded-full");
      if (checkbox && !checkbox.classList.contains("border")) {
        el.classList.remove("border-[#FFCC00]", "bg-[#FFFEF8]");
        el.classList.add("border-gray-100", "bg-white");
      }
    });
    card.classList.remove("border-gray-100", "bg-white");
    card.classList.add("border-[#FFCC00]", "bg-[#FFFEF8]");
  }
};

// app/javascript/controllers/sim_card_booking_controller.ts
var sim_card_booking_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.basePrice = 9.9;
  }
  static {
    this.targets = ["quantity", "totalPrice"];
  }
  static {
    this.values = { orderableType: String };
  }
  connect() {
    const firstProduct = document.querySelector('[data-controller="product-card"]');
    if (firstProduct) {
      const priceEl = firstProduct.querySelector(".text-xl.font-bold.text-\\[\\#FF4400\\]");
      if (priceEl) {
        this.basePrice = parseFloat(priceEl.textContent || "9.9");
      }
    }
    this.updateTotalPrice();
  }
  decrease(event2) {
    event2.preventDefault();
    const currentQty = parseInt(this.quantityTarget.textContent || "1");
    if (currentQty > 1) {
      this.quantityTarget.textContent = (currentQty - 1).toString();
      this.updateTotalPrice();
    }
  }
  increase(event2) {
    event2.preventDefault();
    const currentQty = parseInt(this.quantityTarget.textContent || "1");
    this.quantityTarget.textContent = (currentQty + 1).toString();
    this.updateTotalPrice();
  }
  checkout(event2) {
    event2.preventDefault();
    const allCards = document.querySelectorAll('[data-controller="product-card"]');
    let selectedCard = null;
    allCards.forEach((card) => {
      const classes = card.className;
      if (classes.includes("FFCC00") || classes.includes("border-[#FFCC00]")) {
        selectedCard = card;
      }
    });
    if (!selectedCard && allCards.length > 0) {
      selectedCard = allCards[0];
    }
    if (!selectedCard) {
      alert("\u8BF7\u9009\u62E9\u4E00\u4E2ASIM\u5361\u4EA7\u54C1");
      return;
    }
    const orderableId = selectedCard.dataset.productId;
    const orderableType = this.orderableTypeValue;
    const quantity = this.quantityTarget.textContent;
    const url = `/internet_orders/new?orderable_type=${orderableType}&orderable_id=${orderableId}&quantity=${quantity}`;
    window.location.href = url;
  }
  updateTotalPrice() {
    const quantity = parseInt(this.quantityTarget.textContent || "1");
    const total = this.basePrice * quantity;
    this.totalPriceTarget.textContent = total.toFixed(1);
  }
};

// app/javascript/controllers/qrcode_modal_controller.ts
var qrcode_modal_controller_default = class extends Controller {
  static {
    this.targets = ["modal", "content"];
  }
  connect() {
    console.log("QrcodeModal controller connected");
  }
  // 
  show(event2) {
    event2.preventDefault();
    this.modalTarget.classList.remove("hidden");
    setTimeout(() => {
      this.contentTarget.classList.add("scale-100", "opacity-100");
    }, 10);
  }
  // 
  hide(event2) {
    event2.preventDefault();
    this.contentTarget.classList.remove("scale-100", "opacity-100");
    setTimeout(() => {
      this.modalTarget.classList.add("hidden");
    }, 200);
  }
  // 
  backdropClick(event2) {
    if (event2.target === this.modalTarget) {
      this.hide(event2);
    }
  }
};

// app/javascript/controllers/location_selector_controller.ts
var location_selector_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.selectedLocation = null;
  }
  static {
    this.targets = [
      "modal",
      "searchInput",
      "locationList",
      "locationInput",
      "locationDisplay",
      "recentSection",
      "recentList"
    ];
  }
  static {
    this.values = {
      locationType: String
      // "from" or "to"
    };
  }
  connect() {
    console.log("LocationSelector connected");
  }
  disconnect() {
    console.log("LocationSelector disconnected");
  }
  openModal() {
    this.modalTarget.classList.remove("hidden");
    this.searchInputTarget.value = "";
    this.searchInputTarget.focus();
    document.body.style.overflow = "hidden";
  }
  closeModal() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  stopPropagation(event2) {
    event2.stopPropagation();
  }
  selectLocation(event2) {
    const button = event2.currentTarget;
    const name = button.dataset.locationName || "";
    const address = button.dataset.locationAddress || "";
    this.selectedLocation = { name, address };
    this.locationListTarget.querySelectorAll("button").forEach((btn) => {
      btn.classList.remove("bg-primary-light", "border-primary");
    });
    button.classList.add("bg-primary-light", "border", "border-primary");
  }
  confirm() {
    if (!this.selectedLocation) {
      return;
    }
    if (this.hasLocationInputTarget) {
      this.locationInputTarget.value = this.selectedLocation.name;
    }
    if (this.hasLocationDisplayTarget) {
      this.locationDisplayTarget.textContent = this.selectedLocation.name;
      this.locationDisplayTarget.classList.remove("text-text-muted");
      this.locationDisplayTarget.classList.add("text-text-primary");
    }
    this.saveToRecent(this.selectedLocation);
    this.closeModal();
  }
  search(event2) {
    const input = event2.target;
    const query = input.value.toLowerCase().trim();
    const buttons = this.locationListTarget.querySelectorAll("button[data-location-name]");
    buttons.forEach((button) => {
      const element = button;
      const name = element.dataset.locationName?.toLowerCase() || "";
      const address = element.dataset.locationAddress?.toLowerCase() || "";
      if (name.includes(query) || address.includes(query)) {
        element.classList.remove("hidden");
      } else {
        element.classList.add("hidden");
      }
    });
  }
  saveToRecent(location2) {
    try {
      const key = "recent_transfer_locations";
      const stored = localStorage.getItem(key);
      let recent = stored ? JSON.parse(stored) : [];
      recent = recent.filter((loc) => loc.name !== location2.name);
      recent.unshift(location2);
      recent = recent.slice(0, 5);
      localStorage.setItem(key, JSON.stringify(recent));
      this.updateRecentList(recent);
    } catch (error3) {
      console.error("Failed to save recent location:", error3);
    }
  }
  updateRecentList(locations) {
    if (locations.length === 0) {
      this.recentSectionTarget.classList.add("hidden");
      return;
    }
    this.recentSectionTarget.classList.remove("hidden");
    const html = locations.map((loc) => `
      <button
        type="button"
        data-action="click->location-selector#selectLocation"
        data-location-name="${loc.name}"
        data-location-address="${loc.address}"
        class="w-full text-left p-3 rounded-lg hover:bg-surface-hover transition-colors">
        <div class="flex items-start">
          <svg class="w-5 h-5 text-text-muted mt-0.5 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
          </svg>
          <div class="flex-1">
            <div class="text-text-primary font-medium">${loc.name}</div>
            <div class="text-xs text-text-muted mt-0.5">${loc.address}</div>
          </div>
        </div>
      </button>
    `).join("");
    this.recentListTarget.innerHTML = html;
  }
};

// app/javascript/controllers/transfer_search_controller.ts
var transfer_search_controller_default = class extends Controller {
  static {
    this.values = {
      transferType: String,
      serviceType: String,
      flightId: String,
      trainId: String
    };
  }
  connect() {
    console.log("TransferSearch connected");
  }
  handleSearch(event2) {
    event2.preventDefault();
    const locationInput = document.querySelector('[data-location-selector-target="locationInput"]');
    const locationTo = locationInput?.value;
    if (!locationTo || locationTo.trim() === "") {
      alert("\u8BF7\u5148\u9009\u62E9\u4E0B\u8F66\u70B9");
      const modalButton = document.querySelector('[data-action="click->location-selector#openModal"]');
      if (modalButton) {
        modalButton.click();
      }
      return;
    }
    let locationFrom = "";
    if (this.flightIdValue) {
      const flightLocationElement = document.querySelector(".text-xl.font-bold.text-text-primary");
      locationFrom = flightLocationElement?.textContent?.trim() || "";
    } else if (this.trainIdValue) {
      const trainLocationElement = document.querySelector(".text-xl.font-bold.text-text-primary");
      locationFrom = trainLocationElement?.textContent?.trim() || "";
    }
    const params = new URLSearchParams();
    params.append("transfer_type", this.transferTypeValue);
    params.append("service_type", this.serviceTypeValue);
    params.append("location_to", locationTo);
    if (locationFrom) {
      params.append("location_from", locationFrom);
    }
    if (this.flightIdValue) {
      params.append("flight_id", this.flightIdValue);
    }
    if (this.trainIdValue) {
      params.append("train_id", this.trainIdValue);
    }
    window.location.href = `/transfers/packages?${params.toString()}`;
  }
};

// app/javascript/controllers/address_selector_controller.ts
var address_selector_controller_default = class extends Controller {
  static {
    this.targets = ["modal", "name", "phone", "address", "selectedInfo"];
  }
  static {
    this.values = {
      addressId: String
    };
  }
  connect() {
    console.log("AddressSelector connected");
  }
  openModal() {
    this.modalTarget.classList.remove("hidden");
  }
  closeModal() {
    this.modalTarget.classList.add("hidden");
  }
  selectAddress(event2) {
    const target = event2.currentTarget;
    const addressId = target.dataset.addressId || "";
    const name = target.dataset.name || "";
    const phone = target.dataset.phone || "";
    const address = target.dataset.address || "";
    this.addressIdValue = addressId;
    this.nameTarget.textContent = name;
    this.phoneTarget.textContent = phone;
    this.addressTarget.textContent = address;
    const visaOrderElement = document.querySelector('[data-controller*="visa-order"]');
    if (visaOrderElement) {
      const input = visaOrderElement.querySelector('[data-visa-order-target="deliveryAddress"]');
      if (input) {
        input.value = address;
      }
    }
    this.closeModal();
  }
};

// app/javascript/controllers/search_controller.ts
var search_controller_default = class extends Controller {
  static {
    this.targets = ["input"];
  }
  search(event2) {
    event2.preventDefault();
    let query = this.inputTarget.value.trim();
    if (query === "") {
      query = this.inputTarget.placeholder;
    }
    window.showToast(`\u641C\u7D22"${query}"\u529F\u80FD\u5373\u5C06\u4E0A\u7EBF\uFF0C\u656C\u8BF7\u671F\u5F85`);
  }
  clear() {
    this.inputTarget.value = "";
    this.inputTarget.focus();
  }
};

// app/javascript/controllers/hotel_filter_persistence_controller.ts
var hotel_filter_persistence_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.STORAGE_KEY = "hotel_filters_state";
    this.EXPIRY_TIME = 24 * 60 * 60 * 1e3;
  }
  // 24 hours
  connect() {
    console.log("HotelFilterPersistence connected");
    this.restoreFilters();
    this.setupSaveOnNavigation();
  }
  disconnect() {
    console.log("HotelFilterPersistence disconnected");
    this.saveFilters();
  }
  /**
   * Setup listeners to save filters on navigation
   */
  setupSaveOnNavigation() {
    window.addEventListener("beforeunload", this.saveFilters.bind(this));
    document.addEventListener("turbo:before-visit", this.saveFilters.bind(this));
    const form = document.querySelector('form[action*="hotels"]');
    if (form) {
      form.addEventListener("submit", this.saveFilters.bind(this));
    }
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.has("check_in") && urlParams.has("check_out")) {
      console.log("Detected filter parameters in URL, saving immediately");
      this.saveFilters();
    }
    this.monitorInputChanges();
  }
  /**
   * Monitor hidden input field changes and save immediately
   */
  monitorInputChanges() {
    const filterInputs = [
      "checkInInput",
      "checkOutInput",
      "roomsInput",
      "adultsInput",
      "childrenInput",
      "minPriceInput",
      "maxPriceInput",
      "starsInput"
    ];
    filterInputs.forEach((targetName) => {
      const selector = [
        `[data-hotel-search-target="${targetName}"]`,
        `[data-hotel-date-picker-target="${targetName}"]`,
        `[data-hotel-guest-selector-target="${targetName}"]`,
        `[data-hotel-price-filter-target="${targetName}"]`
      ].join(", ");
      const input = document.querySelector(selector);
      if (input) {
        const observer2 = new MutationObserver(() => {
          console.log(`Filter input changed: ${targetName}, saving...`);
          this.saveFilters();
        });
        observer2.observe(input, {
          attributes: true,
          attributeFilter: ["value"]
        });
        input.addEventListener("input", () => {
          console.log(`Filter input changed: ${targetName}, saving...`);
          this.saveFilters();
        });
      }
    });
  }
  /**
   * Save current filter state to sessionStorage
   */
  saveFilters() {
    try {
      const urlParams = new URLSearchParams(window.location.search);
      const checkIn = urlParams.get("check_in") || this.getInputValue("checkInInput") || "";
      const checkOut = urlParams.get("check_out") || this.getInputValue("checkOutInput") || "";
      if (!checkIn || !checkOut) {
        console.log("Skipping save - dates not set yet");
        return;
      }
      const filterState = {
        city: urlParams.get("city") || this.getInputValue("cityInput") || "\u6DF1\u5733",
        checkIn,
        checkOut,
        rooms: parseInt(urlParams.get("rooms") || this.getInputValue("roomsInput") || "1"),
        adults: parseInt(urlParams.get("adults") || this.getInputValue("adultsInput") || "1"),
        children: parseInt(urlParams.get("children") || this.getInputValue("childrenInput") || "0"),
        priceMin: urlParams.get("price_min") || this.getInputValue("minPriceInput") || "",
        priceMax: urlParams.get("price_max") || this.getInputValue("maxPriceInput") || "",
        starLevel: urlParams.get("star_level") || this.getInputValue("starsInput") || "",
        query: urlParams.get("q") || "",
        timestamp: Date.now()
      };
      sessionStorage.setItem(this.STORAGE_KEY, JSON.stringify(filterState));
      console.log("Hotel filters saved to sessionStorage:", filterState);
    } catch (error3) {
      console.error("Failed to save hotel filters:", error3);
    }
  }
  /**
   * Restore filter state from sessionStorage and apply to URL
   */
  restoreFilters() {
    try {
      const stored = sessionStorage.getItem(this.STORAGE_KEY);
      if (!stored) {
        console.log("No saved hotel filters found");
        return;
      }
      const filterState = JSON.parse(stored);
      if (!filterState.checkIn || !filterState.checkOut) {
        console.log("Stored filters missing dates, clearing...");
        sessionStorage.removeItem(this.STORAGE_KEY);
        return;
      }
      if (Date.now() - filterState.timestamp > this.EXPIRY_TIME) {
        console.log("Stored hotel filters expired, clearing...");
        sessionStorage.removeItem(this.STORAGE_KEY);
        return;
      }
      const urlParams = new URLSearchParams(window.location.search);
      const hasOtherParams = Array.from(urlParams.keys()).filter((k) => k !== "city").length > 0;
      const shouldRestore = !hasOtherParams;
      if (shouldRestore) {
        console.log("Restoring hotel filters from sessionStorage:", filterState);
        this.applyFiltersToURL(filterState);
      } else {
        console.log("URL has existing filter parameters, skipping restore");
      }
    } catch (error3) {
      console.error("Failed to restore hotel filters:", error3);
      sessionStorage.removeItem(this.STORAGE_KEY);
    }
  }
  /**
   * Apply filter state to URL and reload page
   */
  applyFiltersToURL(filterState) {
    const url = new URL(window.location.href);
    url.searchParams.set("city", filterState.city);
    url.searchParams.set("check_in", filterState.checkIn);
    url.searchParams.set("check_out", filterState.checkOut);
    url.searchParams.set("rooms", filterState.rooms.toString());
    url.searchParams.set("adults", filterState.adults.toString());
    url.searchParams.set("children", filterState.children.toString());
    if (filterState.priceMin) {
      url.searchParams.set("price_min", filterState.priceMin);
    }
    if (filterState.priceMax) {
      url.searchParams.set("price_max", filterState.priceMax);
    }
    if (filterState.starLevel) {
      url.searchParams.set("star_level", filterState.starLevel);
    }
    if (filterState.query) {
      url.searchParams.set("q", filterState.query);
    }
    const newURL = url.toString();
    if (newURL !== window.location.href) {
      console.log("Redirecting with restored filters:", newURL);
      window.location.href = newURL;
    } else {
      console.log("URL already matches stored filters, skipping redirect");
    }
  }
  /**
   * Helper method to get input value by data-target attribute
   */
  getInputValue(targetName) {
    const selector = [
      `[data-hotel-search-target="${targetName}"]`,
      `[data-hotel-date-picker-target="${targetName}"]`,
      `[data-hotel-guest-selector-target="${targetName}"]`,
      `[data-hotel-price-filter-target="${targetName}"]`
    ].join(", ");
    const input = document.querySelector(selector);
    return input ? input.value : "";
  }
  /**
   * Clear saved filters (can be called manually if needed)
   */
  clearSavedFilters() {
    sessionStorage.removeItem(this.STORAGE_KEY);
    console.log("Hotel filters cleared from sessionStorage");
  }
};

// app/javascript/controllers/hotel_services_search_controller.ts
var hotel_services_search_controller_default = class extends Controller {
  static {
    this.targets = ["cityInput", "checkInInput", "checkOutInput"];
  }
  connect() {
    console.log("HotelServicesSearch connected");
    document.addEventListener("city-selector:city-changed", this.handleCityChange.bind(this));
    document.addEventListener("hotel-date-picker:dates-selected", this.handleDateChange.bind(this));
  }
  disconnect() {
    document.removeEventListener("city-selector:city-changed", this.handleCityChange.bind(this));
    document.removeEventListener("hotel-date-picker:dates-selected", this.handleDateChange.bind(this));
  }
  handleCityChange(event2) {
    const customEvent = event2;
    const cityName = customEvent.detail.cityName;
    console.log("HotelServicesSearch: City changed to", cityName);
    this.cityInputTarget.value = cityName;
    this.updateURLAndReload();
  }
  handleDateChange(event2) {
    const customEvent = event2;
    const { checkIn, checkOut } = customEvent.detail;
    console.log("HotelServicesSearch: Dates changed", { checkIn, checkOut });
    this.checkInInputTarget.value = checkIn;
    this.checkOutInputTarget.value = checkOut;
    this.updateURLAndReload();
  }
  updateURLAndReload() {
    const params = new URLSearchParams(window.location.search);
    if (this.cityInputTarget.value) {
      params.set("city", this.cityInputTarget.value);
    } else {
      params.delete("city");
    }
    if (this.checkInInputTarget.value) {
      params.set("check_in", this.checkInInputTarget.value);
    } else {
      params.delete("check_in");
    }
    if (this.checkOutInputTarget.value) {
      params.set("check_out", this.checkOutInputTarget.value);
    } else {
      params.delete("check_out");
    }
    window.location.href = `${window.location.pathname}?${params.toString()}`;
  }
};

// app/javascript/controllers/live_room_controller.ts
var live_room_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.currentIndex = 0;
    this.startY = 0;
    this.startTime = 0;
    this.isDragging = false;
  }
  static {
    this.targets = ["wrapper", "slide"];
  }
  connect() {
    console.log("LiveRoom connected");
    this.element.addEventListener("touchstart", this.handleTouchStart.bind(this), { passive: true });
    this.element.addEventListener("touchmove", this.handleTouchMove.bind(this), { passive: false });
    this.element.addEventListener("touchend", this.handleTouchEnd.bind(this), { passive: true });
    this.showSlide(0);
  }
  disconnect() {
    console.log("LiveRoom disconnected");
    this.element.removeEventListener("touchstart", this.handleTouchStart.bind(this));
    this.element.removeEventListener("touchmove", this.handleTouchMove.bind(this));
    this.element.removeEventListener("touchend", this.handleTouchEnd.bind(this));
  }
  handleTouchStart(e) {
    this.startY = e.touches[0].clientY;
    this.startTime = Date.now();
    this.isDragging = true;
  }
  handleTouchMove(e) {
    if (!this.isDragging) return;
    const currentY = e.touches[0].clientY;
    const diffY = currentY - this.startY;
    if (Math.abs(diffY) > 10) {
      e.preventDefault();
    }
  }
  handleTouchEnd(e) {
    if (!this.isDragging) return;
    const endY = e.changedTouches[0].clientY;
    const diffY = endY - this.startY;
    const diffTime = Date.now() - this.startTime;
    this.isDragging = false;
    const velocity = Math.abs(diffY) / diffTime;
    const isSwipeUp = diffY < -50 || diffY < -30 && velocity > 0.5;
    const isSwipeDown = diffY > 50 || diffY > 30 && velocity > 0.5;
    if (isSwipeUp) {
      this.nextSlide();
    } else if (isSwipeDown) {
      this.prevSlide();
    }
    this.startY = 0;
    this.startTime = 0;
  }
  nextSlide() {
    if (this.currentIndex < this.slideTargets.length - 1) {
      this.showSlide(this.currentIndex + 1);
    }
  }
  prevSlide() {
    if (this.currentIndex > 0) {
      this.showSlide(this.currentIndex - 1);
    }
  }
  showSlide(index) {
    this.slideTargets.forEach((slide, i) => {
      slide.classList.remove("active", "prev");
      if (i === index) {
        slide.classList.add("active");
      } else if (i === index - 1) {
        slide.classList.add("prev");
      }
    });
    this.currentIndex = index;
    if (index > 0) {
      const swipeHint = document.querySelector(".live-swipe-hint");
      if (swipeHint) {
        swipeHint.style.display = "none";
      }
    }
  }
};

// app/javascript/controllers/special_hotel_search_controller.ts
var special_hotel_search_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.searchTimeout = null;
  }
  static {
    this.targets = ["searchInput"];
  }
  static {
    this.values = {
      city: String,
      query: String
    };
  }
  connect() {
    if (this.hasSearchInputTarget && this.queryValue) {
      this.searchInputTarget.value = this.queryValue;
    }
  }
  // Search hotels with debounce
  search() {
    if (this.searchTimeout) {
      clearTimeout(this.searchTimeout);
    }
    this.searchTimeout = window.setTimeout(() => {
      this.performSearch();
    }, 500);
  }
  // Perform the actual search
  performSearch() {
    if (!this.hasSearchInputTarget) return;
    const query = this.searchInputTarget.value.trim();
    const city = this.cityValue || "\u5317\u4EAC\u5E02";
    const url = new URL("/special_hotels", window.location.origin);
    url.searchParams.set("city", city);
    if (query) {
      url.searchParams.set("query", query);
    }
    Turbo.visit(url.toString());
  }
};

// app/javascript/controllers/special_hotel_filter_controller.ts
var special_hotel_filter_controller_default = class extends Controller {
  static {
    this.targets = [
      "sortModal",
      "districtModal",
      "priceModal",
      "filterModal",
      "sortButton",
      "districtButton",
      "priceButton",
      "filterButton",
      "sortOption",
      "districtOption",
      "priceOption",
      "starOption"
    ];
  }
  static {
    this.values = {
      city: String,
      query: String,
      sort: { type: String, default: "price" },
      district: { type: String, default: "" },
      priceRange: { type: String, default: "" },
      stars: { type: String, default: "" }
    };
  }
  connect() {
    this.updateButtonStates();
  }
  // Open modals
  openSortModal() {
    if (this.hasSortModalTarget) {
      this.closeAllModals();
      this.sortModalTarget.classList.remove("hidden");
    }
  }
  openDistrictModal() {
    if (this.hasDistrictModalTarget) {
      this.closeAllModals();
      this.districtModalTarget.classList.remove("hidden");
    }
  }
  openPriceModal() {
    if (this.hasPriceModalTarget) {
      this.closeAllModals();
      this.priceModalTarget.classList.remove("hidden");
    }
  }
  openFilterModal() {
    if (this.hasFilterModalTarget) {
      this.closeAllModals();
      this.filterModalTarget.classList.remove("hidden");
    }
  }
  // Close all modals
  closeAllModals() {
    if (this.hasSortModalTarget) this.sortModalTarget.classList.add("hidden");
    if (this.hasDistrictModalTarget) this.districtModalTarget.classList.add("hidden");
    if (this.hasPriceModalTarget) this.priceModalTarget.classList.add("hidden");
    if (this.hasFilterModalTarget) this.filterModalTarget.classList.add("hidden");
  }
  // Select sort option
  selectSort(event2) {
    const target = event2.currentTarget;
    const sortValue = target.dataset.value || "price";
    this.sortValue = sortValue;
    this.closeAllModals();
    this.applyFilters();
  }
  // Select district option
  selectDistrict(event2) {
    const target = event2.currentTarget;
    const districtValue = target.dataset.value || "";
    this.districtValue = districtValue;
    this.closeAllModals();
    this.applyFilters();
  }
  // Select price range option
  selectPriceRange(event2) {
    const target = event2.currentTarget;
    const priceValue = target.dataset.value || "";
    this.priceRangeValue = priceValue;
    this.closeAllModals();
    this.applyFilters();
  }
  // Toggle star rating
  toggleStar(event2) {
    const target = event2.currentTarget;
    const starValue = target.dataset.value || "";
    if (this.starsValue === starValue) {
      this.starsValue = "";
    } else {
      this.starsValue = starValue;
    }
    this.updateStarStates();
  }
  // Apply all filters
  applyFilters() {
    const url = new URL("/special_hotels", window.location.origin);
    url.searchParams.set("city", this.cityValue || "\u5317\u4EAC\u5E02");
    if (this.queryValue) {
      url.searchParams.set("query", this.queryValue);
    }
    if (this.sortValue && this.sortValue !== "price") {
      url.searchParams.set("sort", this.sortValue);
    }
    if (this.districtValue) {
      url.searchParams.set("district", this.districtValue);
    }
    if (this.priceRangeValue) {
      url.searchParams.set("price_range", this.priceRangeValue);
    }
    if (this.starsValue) {
      url.searchParams.set("stars", this.starsValue);
    }
    this.closeAllModals();
    Turbo.visit(url.toString());
  }
  // Clear all filters
  clearFilters() {
    this.sortValue = "price";
    this.districtValue = "";
    this.priceRangeValue = "";
    this.starsValue = "";
    this.applyFilters();
  }
  // Update button states based on active filters
  updateButtonStates() {
    if (this.sortValue !== "price") {
      this.sortButtonTarget.classList.add("text-primary");
    }
    if (this.districtValue) {
      this.districtButtonTarget.classList.add("text-primary");
    }
    if (this.priceRangeValue) {
      this.priceButtonTarget.classList.add("text-primary");
    }
    if (this.starsValue) {
      this.filterButtonTarget.classList.add("text-primary");
    }
  }
  // Update star rating visual states
  updateStarStates() {
    this.starOptionTargets.forEach((target) => {
      const value = target.dataset.value || "";
      if (value === this.starsValue) {
        target.classList.add("bg-primary", "text-white");
        target.classList.remove("bg-gray-100", "text-gray-700");
      } else {
        target.classList.remove("bg-primary", "text-white");
        target.classList.add("bg-gray-100", "text-gray-700");
      }
    });
  }
  // Stop event propagation
  stopPropagation(event2) {
    event2.stopPropagation();
  }
};

// app/javascript/controllers/hotel_search_filter_controller.ts
var hotel_search_filter_controller_default = class extends Controller {
  static {
    this.targets = [
      "sortModal",
      "districtModal",
      "priceModal",
      "filterModal",
      "sortButton",
      "districtButton",
      "priceButton",
      "filterButton",
      "sortOption",
      "districtOption",
      "priceOption",
      "starOption"
    ];
  }
  static {
    this.values = {
      city: String,
      checkIn: String,
      checkOut: String,
      rooms: Number,
      adults: Number,
      children: Number,
      query: String,
      sort: { type: String, default: "recommend" },
      district: { type: String, default: "" },
      priceRange: { type: String, default: "" },
      stars: { type: String, default: "" }
    };
  }
  connect() {
    this.updateButtonStates();
  }
  // Open modals
  openSortModal() {
    if (this.hasSortModalTarget) {
      this.closeAllModals();
      this.sortModalTarget.classList.remove("hidden");
    }
  }
  openDistrictModal() {
    if (this.hasDistrictModalTarget) {
      this.closeAllModals();
      this.districtModalTarget.classList.remove("hidden");
    }
  }
  openPriceModal() {
    if (this.hasPriceModalTarget) {
      this.closeAllModals();
      this.priceModalTarget.classList.remove("hidden");
    }
  }
  openFilterModal() {
    if (this.hasFilterModalTarget) {
      this.closeAllModals();
      this.filterModalTarget.classList.remove("hidden");
    }
  }
  // Close all modals
  closeAllModals() {
    if (this.hasSortModalTarget) this.sortModalTarget.classList.add("hidden");
    if (this.hasDistrictModalTarget) this.districtModalTarget.classList.add("hidden");
    if (this.hasPriceModalTarget) this.priceModalTarget.classList.add("hidden");
    if (this.hasFilterModalTarget) this.filterModalTarget.classList.add("hidden");
  }
  // Select sort option
  selectSort(event2) {
    const target = event2.currentTarget;
    const sortValue = target.dataset.value || "recommend";
    this.sortValue = sortValue;
    this.closeAllModals();
    this.applyFilters();
  }
  // Select district option
  selectDistrict(event2) {
    const target = event2.currentTarget;
    const districtValue = target.dataset.value || "";
    this.districtValue = districtValue;
    this.closeAllModals();
    this.applyFilters();
  }
  // Select price range option
  selectPriceRange(event2) {
    const target = event2.currentTarget;
    const priceValue = target.dataset.value || "";
    this.priceRangeValue = priceValue;
    this.closeAllModals();
    this.applyFilters();
  }
  // Toggle star rating
  toggleStar(event2) {
    const target = event2.currentTarget;
    const starValue = target.dataset.value || "";
    if (this.starsValue === starValue) {
      this.starsValue = "";
    } else {
      this.starsValue = starValue;
    }
    this.updateStarStates();
  }
  // Apply all filters
  applyFilters() {
    const url = new URL("/hotels/search", window.location.origin);
    url.searchParams.set("city", this.cityValue || "\u6DF1\u5733\u5E02");
    url.searchParams.set("check_in", this.checkInValue);
    url.searchParams.set("check_out", this.checkOutValue);
    url.searchParams.set("rooms", this.roomsValue.toString());
    url.searchParams.set("adults", this.adultsValue.toString());
    url.searchParams.set("children", this.childrenValue.toString());
    if (this.queryValue) {
      url.searchParams.set("q", this.queryValue);
    }
    if (this.sortValue && this.sortValue !== "recommend") {
      url.searchParams.set("sort", this.sortValue);
    }
    if (this.districtValue) {
      url.searchParams.set("district", this.districtValue);
    }
    if (this.priceRangeValue) {
      url.searchParams.set("price_range", this.priceRangeValue);
    }
    if (this.starsValue) {
      url.searchParams.set("star_level", this.starsValue);
    }
    this.closeAllModals();
    Turbo.visit(url.toString());
  }
  // Clear all filters
  clearFilters() {
    this.sortValue = "recommend";
    this.districtValue = "";
    this.priceRangeValue = "";
    this.starsValue = "";
    this.applyFilters();
  }
  // Update button states based on active filters
  updateButtonStates() {
    if (this.sortValue !== "recommend") {
      this.sortButtonTarget.classList.add("text-primary");
    }
    if (this.districtValue) {
      this.districtButtonTarget.classList.add("text-primary");
    }
    if (this.priceRangeValue) {
      this.priceButtonTarget.classList.add("text-primary");
    }
    if (this.starsValue) {
      this.filterButtonTarget.classList.add("text-primary");
    }
  }
  // Update star rating visual states
  updateStarStates() {
    this.starOptionTargets.forEach((target) => {
      const value = target.dataset.value || "";
      if (value === this.starsValue) {
        target.classList.add("bg-primary", "text-white");
        target.classList.remove("bg-gray-100", "text-gray-700");
      } else {
        target.classList.remove("bg-primary", "text-white");
        target.classList.add("bg-gray-100", "text-gray-700");
      }
    });
  }
  // Stop event propagation
  stopPropagation(event2) {
    event2.stopPropagation();
  }
};

// app/javascript/controllers/blind_box_controller.ts
var blind_box_controller_default = class extends Controller {
  static {
    this.targets = [
      // Add your targets here, e.g.:
      // "messageInput", "messagesContainer", "sendButton"
    ];
  }
  static {
    this.values = {
      // Add your values here, e.g.:
      // roomId: String,
      // userId: String
    };
  }
  // Declare your targets and values
  // declare readonly messageInputTarget: HTMLInputElement
  // declare readonly messagesContainerTarget: HTMLElement
  // declare readonly roomIdValue: string
  connect() {
    console.log("BlindBox connected");
  }
  disconnect() {
    console.log("BlindBox disconnected");
  }
  // Add your action methods here
  // Example:
  // click(): void {
  //   console.log("Button clicked")
  // }
  // FORMS: Turbo + Turbo Streams handle everything automatically
  // - Forms submit via AJAX (Turbo Drive)
  // - Server responds with format.turbo_stream
  // - Turbo Streams update DOM automatically
  // - NO manual form handling needed in Stimulus
  //
  // Use Stimulus for:
  // - UI interactions (toggle, show/hide)
  // - Input validation/formatting
  // - Dynamic form fields
};

// app/javascript/controllers/hotel_map_toggle_controller.ts
var hotel_map_toggle_controller_default = class extends Controller {
  constructor() {
    super(...arguments);
    this.isExpanded = false;
  }
  static {
    this.targets = ["mapContainer", "closeButton", "expandButton"];
  }
  connect() {
    console.log("HotelMapToggle connected");
  }
  toggle() {
    this.isExpanded = !this.isExpanded;
    if (this.isExpanded) {
      this.mapContainerTarget.style.height = "600px";
      this.expandButtonTarget.classList.add("hidden");
      this.closeButtonTarget.classList.remove("hidden");
      this.mapContainerTarget.scrollIntoView({ behavior: "smooth", block: "start" });
    } else {
      this.mapContainerTarget.style.height = "128px";
      this.expandButtonTarget.classList.remove("hidden");
      this.closeButtonTarget.classList.add("hidden");
    }
  }
  // 
  toggleAndScroll(event2) {
    event2.preventDefault();
    const mapContainer = document.querySelector('[data-hotel-map-toggle-target="mapContainer"]');
    if (!mapContainer) {
      console.error("\u627E\u4E0D\u5230\u5730\u56FE\u5BB9\u5668");
      return;
    }
    const mapController = this.application.getControllerForElementAndIdentifier(
      mapContainer.closest('[data-controller~="hotel-map-toggle"]'),
      "hotel-map-toggle"
    );
    if (mapController) {
      if (mapController.isExpanded) {
        mapContainer.scrollIntoView({ behavior: "smooth", block: "start" });
      } else {
        mapController.toggle();
      }
    } else {
      console.error("\u627E\u4E0D\u5230\u5730\u56FE\u63A7\u5236\u5668");
    }
  }
};

// app/javascript/controllers/hotel_map_controller.ts
var hotel_map_controller_default = class extends Controller {
  static {
    this.targets = [
      "marker",
      "hotelCard"
    ];
  }
  connect() {
    console.log("HotelMap connected");
  }
  disconnect() {
    console.log("HotelMap disconnected");
  }
  // Show hotel info when marker is clicked
  showHotelInfo(event2) {
    event2.preventDefault();
    const marker = event2.currentTarget;
    const hotelId = marker.dataset.hotelId;
    if (!hotelId) return;
    const hotelCard = this.hotelCardTargets.find(
      (card) => card.dataset.hotelId === hotelId
    );
    if (hotelCard) {
      hotelCard.scrollIntoView({
        behavior: "smooth",
        block: "center"
      });
      hotelCard.classList.add("bg-yellow-50");
      setTimeout(() => {
        hotelCard.classList.remove("bg-yellow-50");
      }, 2e3);
    }
  }
};

// app/javascript/controllers/smart_back_controller.ts
var smart_back_controller_default = class extends Controller {
  static {
    this.values = {
      fallback: { type: String, default: "/" }
    };
  }
  connect() {
  }
  /**
   * Smart back navigation based on referrer
   * - If user came from same site: go back
   * - If user came from external site or direct access: go to fallback
   */
  goBack(event2) {
    event2.preventDefault();
    const referrer = document.referrer;
    const currentHost = window.location.host;
    if (referrer && referrer.includes(currentHost)) {
      if (window.history.length > 1) {
        window.history.back();
        return;
      }
    }
    window.location.href = this.fallbackValue;
  }
};

// app/javascript/controllers/tour_group_tabs_controller.ts
var tour_group_tabs_controller_default = class extends Controller {
  static {
    this.targets = [
      // Add your targets here, e.g.:
      // "messageInput", "messagesContainer", "sendButton"
    ];
  }
  static {
    this.values = {
      // Add your values here, e.g.:
      // roomId: String,
      // userId: String
    };
  }
  // Declare your targets and values
  // declare readonly messageInputTarget: HTMLInputElement
  // declare readonly messagesContainerTarget: HTMLElement
  // declare readonly roomIdValue: string
  connect() {
    console.log("TourGroupTabs connected");
  }
  disconnect() {
    console.log("TourGroupTabs disconnected");
  }
  // Add your action methods here
  // Example:
  // click(): void {
  //   console.log("Button clicked")
  // }
  // FORMS: Turbo + Turbo Streams handle everything automatically
  // - Forms submit via AJAX (Turbo Drive)
  // - Server responds with format.turbo_stream
  // - Turbo Streams update DOM automatically
  // - NO manual form handling needed in Stimulus
  //
  // Use Stimulus for:
  // - UI interactions (toggle, show/hide)
  // - Input validation/formatting
  // - Dynamic form fields
};

// app/javascript/controllers/hotel_price_filter_controller.ts
var hotel_price_filter_controller_default = class extends Controller {
  static {
    this.targets = [
      "modal",
      "minSlider",
      "maxSlider",
      "sliderTrack",
      "minPriceDisplay",
      "maxPriceDisplay",
      "starRating",
      "pricePreset",
      "displayText"
    ];
  }
  static {
    this.values = {
      minPrice: Number,
      maxPrice: Number,
      stars: Number
    };
  }
  connect() {
    console.log("HotelPriceFilter connected");
    const urlParams = new URLSearchParams(window.location.search);
    const minPriceParam = urlParams.get("price_min");
    const maxPriceParam = urlParams.get("price_max");
    const starLevelParam = urlParams.get("star_level");
    this.minPriceValue = minPriceParam && minPriceParam !== "" ? parseInt(minPriceParam) : 0;
    this.maxPriceValue = maxPriceParam && maxPriceParam !== "" ? parseInt(maxPriceParam) : 3e3;
    this.starsValue = starLevelParam && starLevelParam !== "" ? parseInt(starLevelParam) : 0;
    this.minSliderTarget.value = this.minPriceValue.toString();
    this.maxSliderTarget.value = this.maxPriceValue.toString();
    this.minPriceDisplayTarget.textContent = this.minPriceValue.toString();
    this.maxPriceDisplayTarget.textContent = this.maxPriceValue.toString();
    this.updateSliderTrack();
    this.updatePresetSelection();
    this.updateStarSelection();
    this.updateDisplayText();
  }
  openModal() {
    this.modalTarget.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  closeModal() {
    this.modalTarget.classList.add("hidden");
    document.body.style.overflow = "";
  }
  updateMinPrice() {
    const minValue = parseInt(this.minSliderTarget.value);
    const maxValue = parseInt(this.maxSliderTarget.value);
    if (minValue > maxValue) {
      this.minSliderTarget.value = maxValue.toString();
      this.minPriceValue = maxValue;
    } else {
      this.minPriceValue = minValue;
    }
    this.minPriceDisplayTarget.textContent = this.minPriceValue.toString();
    this.updateSliderTrack();
  }
  updateMaxPrice() {
    const minValue = parseInt(this.minSliderTarget.value);
    const maxValue = parseInt(this.maxSliderTarget.value);
    if (maxValue < minValue) {
      this.maxSliderTarget.value = minValue.toString();
      this.maxPriceValue = minValue;
    } else {
      this.maxPriceValue = maxValue;
    }
    this.maxPriceDisplayTarget.textContent = this.maxPriceValue.toString();
    this.updateSliderTrack();
  }
  setQuickPrice(event2) {
    const button = event2.currentTarget;
    const min = parseInt(button.dataset.min || "0");
    const max = parseInt(button.dataset.max || "3000");
    this.pricePresetTargets.forEach((el) => {
      el.classList.remove("selected", "border-yellow-500", "bg-yellow-50");
      el.classList.add("border-gray-300");
    });
    button.classList.remove("border-gray-300");
    button.classList.add("selected", "border-yellow-500", "bg-yellow-50");
    this.minSliderTarget.value = min.toString();
    this.maxSliderTarget.value = max.toString();
    this.minPriceValue = min;
    this.maxPriceValue = max;
    this.minPriceDisplayTarget.textContent = min.toString();
    this.maxPriceDisplayTarget.textContent = max.toString();
    this.updateSliderTrack();
  }
  updateSliderTrack() {
    const sliderMax = 3e3;
    const minPercent = this.minPriceValue / sliderMax * 100;
    const maxPercent = this.maxPriceValue / sliderMax * 100;
    this.sliderTrackTarget.style.left = `${minPercent}%`;
    this.sliderTrackTarget.style.right = `${100 - maxPercent}%`;
  }
  selectStarRating(event2) {
    const target = event2.currentTarget;
    const stars = parseInt(target.dataset.stars || "0");
    if (this.starsValue === stars) {
      this.starsValue = 0;
      target.classList.remove("selected", "border-yellow-500", "bg-yellow-50");
      target.classList.add("border-gray-300");
    } else {
      this.starRatingTargets.forEach((el) => {
        el.classList.remove("selected", "border-yellow-500", "bg-yellow-50");
        el.classList.add("border-gray-300");
      });
      target.classList.remove("border-gray-300");
      target.classList.add("selected", "border-yellow-500", "bg-yellow-50");
      this.starsValue = stars;
    }
  }
  reset() {
    this.minPriceValue = 0;
    this.maxPriceValue = 3e3;
    this.minSliderTarget.value = "0";
    this.maxSliderTarget.value = "3000";
    this.minPriceDisplayTarget.textContent = "0";
    this.maxPriceDisplayTarget.textContent = "3000";
    this.updateSliderTrack();
    this.pricePresetTargets.forEach((el) => {
      el.classList.remove("selected", "border-yellow-500", "bg-yellow-50");
      el.classList.add("border-gray-300");
    });
    this.starsValue = 0;
    this.starRatingTargets.forEach((el) => {
      el.classList.remove("selected", "border-yellow-500", "bg-yellow-50");
      el.classList.add("border-gray-300");
    });
    this.updateDisplayText();
  }
  confirm() {
    this.updateDisplayText();
    this.dispatchFilterUpdateEvent();
    this.closeModal();
  }
  updateDisplayText() {
    const parts = [];
    if (this.minPriceValue > 0 || this.maxPriceValue < 3e3) {
      if (this.maxPriceValue >= 3e3) {
        parts.push(`\xA5${this.minPriceValue}+`);
      } else {
        parts.push(`\xA5${this.minPriceValue}-${this.maxPriceValue}`);
      }
    }
    if (this.starsValue > 0) {
      const starLabels = {
        2: "\u4E8C\u661F",
        3: "\u4E09\u661F",
        4: "\u56DB\u661F",
        5: "\u4E94\u661F"
      };
      parts.push(starLabels[this.starsValue] || `${this.starsValue}\u661F`);
    }
    if (parts.length > 0) {
      this.displayTextTarget.textContent = parts.join(" \xB7 ");
    } else {
      this.displayTextTarget.textContent = "\u4EF7\u683C/\u661F\u7EA7";
    }
  }
  dispatchFilterUpdateEvent() {
    const filterUpdateEvent = new CustomEvent("hotel-price-filter:filter-updated", {
      detail: {
        minPrice: this.minPriceValue,
        maxPrice: this.maxPriceValue,
        stars: this.starsValue
      },
      bubbles: true
    });
    document.dispatchEvent(filterUpdateEvent);
    console.log("Hotel price filter: Dispatched filter update event", {
      minPrice: this.minPriceValue,
      maxPrice: this.maxPriceValue,
      stars: this.starsValue
    });
  }
  updatePresetSelection() {
    this.pricePresetTargets.forEach((el) => {
      const min = parseInt(el.dataset.min || "0");
      const max = parseInt(el.dataset.max || "3000");
      if (min === this.minPriceValue && max === this.maxPriceValue) {
        el.classList.remove("border-gray-300");
        el.classList.add("selected", "border-yellow-500", "bg-yellow-50");
      } else {
        el.classList.remove("selected", "border-yellow-500", "bg-yellow-50");
        el.classList.add("border-gray-300");
      }
    });
  }
  updateStarSelection() {
    this.starRatingTargets.forEach((el) => {
      const stars = parseInt(el.dataset.stars || "0");
      if (stars === this.starsValue && this.starsValue > 0) {
        el.classList.remove("border-gray-300");
        el.classList.add("selected", "border-yellow-500", "bg-yellow-50");
      } else {
        el.classList.remove("selected", "border-yellow-500", "bg-yellow-50");
        el.classList.add("border-gray-300");
      }
    });
  }
};

// app/javascript/controllers/hotel_guarantee_controller.ts
var hotel_guarantee_controller_default = class extends Controller {
  static {
    this.targets = ["modal", "content"];
  }
  connect() {
    console.log("HotelGuarantee connected");
  }
  open() {
    this.modalTarget.classList.remove("hidden");
  }
  close(event2) {
    if (event2) {
      event2.stopPropagation();
    }
    this.modalTarget.classList.add("hidden");
  }
  closeOnBackdrop(event2) {
    if (event2.target === this.modalTarget) {
      this.close();
    }
  }
  stopPropagation(event2) {
    event2.stopPropagation();
  }
};

// app/javascript/controllers/abroad_ticket_type_controller.ts
var abroad_ticket_type_controller_default = class extends Controller {
  connect() {
    console.log("AbroadTicketType controller connected");
  }
};

// app/javascript/controllers/landmark_filter_controller.ts
var landmark_filter_controller_default = class extends Controller {
  connect() {
    console.log("LandmarkFilter controller connected");
  }
};

// app/javascript/controllers/index.ts
var application = Application.start();
application.register("theme", theme_controller_default);
application.register("dropdown", dropdown_controller_default);
application.register("sdk-integration", sdk_integration_controller_default);
application.register("clipboard", clipboard_controller_default);
application.register("city-selector", city_selector_controller_default);
application.register("flight-search", flight_search_controller_default);
application.register("flight-history", flight_history_controller_default);
application.register("date-picker", date_picker_controller_default);
application.register("booking", booking_controller_default);
application.register("coupon", coupon_controller_default);
application.register("destination", destination_controller_default);
application.register("region-selector", region_selector_controller_default);
application.register("hotel-search", hotel_search_controller_default);
application.register("hotel-detail", hotel_detail_controller_default);
application.register("service-grid", service_grid_controller_default);
application.register("passenger-selector", passenger_selector_controller_default);
application.register("cabin-selector", cabin_selector_controller_default);
application.register("trip-type", trip_type_controller_default);
application.register("return-date-picker", return_date_picker_controller_default);
application.register("round-trip-selector", round_trip_selector_controller_default);
application.register("train-search", train_search_controller_default);
application.register("train-list", train_list_controller_default);
application.register("train-city-selector", train_city_selector_controller_default);
application.register("infinite-scroll", infinite_scroll_controller_default);
application.register("deep-travel", deep_travel_controller_default);
application.register("multi-city", multi_city_controller_default);
application.register("flight-filter", flight_filter_controller_default);
application.register("flight-sort", flight_sort_controller_default);
application.register("flight-info-display", flight_info_display_controller_default);
application.register("date-link", date_link_controller_default);
application.register("hotel-guest-selector", hotel_guest_selector_controller_default);
application.register("hotel-date-picker", hotel_date_picker_controller_default);
application.register("payment-modal", payment_modal_controller_default);
application.register("payment-confirmation", payment_confirmation_controller_default);
application.register("hotel-tabs", hotel_tabs_controller_default);
application.register("hotel-traveler-selector", hotel_traveler_selector_controller_default);
application.register("toast", toast_controller_default);
application.register("toast-trigger", toast_trigger_controller_default);
application.register("hotel-booking", hotel_booking_controller_default);
application.register("tour-detail", tour_detail_controller_default);
application.register("carousel", carousel_controller_default);
application.register("scroll-spy", scroll_spy_controller_default);
application.register("package-switcher", package_switcher_controller_default);
application.register("booking-modal", booking_modal_controller_default);
application.register("bottom-bar", bottom_bar_controller_default);
application.register("insurance-selector", insurance_selector_controller_default);
application.register("tour-traveler-selector", tour_traveler_selector_controller_default);
application.register("special-flights-form", special_flights_form_controller_default);
application.register("train-booking", train_booking_controller_default);
application.register("train-booking-lock", train_booking_lock_controller_default);
application.register("train-seat-selector", train_seat_selector_controller_default);
application.register("tour-group-filter", tour_group_filter_controller_default);
application.register("car-rental-tabs", car_rental_tabs_controller_default);
application.register("hotel-package-search", hotel_package_search_controller_default);
application.register("hotel-package-order", hotel_package_order_controller_default);
application.register("pwa-install", pwa_install_controller_default);
application.register("bus-date-picker", bus_date_picker_controller_default);
application.register("bus-ticket-search", bus_ticket_search_controller_default);
application.register("bus-ticket-order", bus_ticket_order_controller_default);
application.register("deep-booking", deep_booking_controller_default);
application.register("visa-order", visa_order_controller_default);
application.register("abroad-region-selector", abroad_region_selector_controller_default);
application.register("abroad-date-picker", abroad_date_picker_controller_default);
application.register("abroad-passenger-selector", abroad_passenger_selector_controller_default);
application.register("abroad-order-form", abroad_order_form_controller_default);
application.register("abroad-ticket-search", abroad_ticket_search_controller_default);
application.register("homestay-search", homestay_search_controller_default);
application.register("internet-services", internet_services_controller_default);
application.register("sim-card-filter", sim_card_filter_controller_default);
application.register("data-plan", data_plan_controller_default);
application.register("wifi-booking", wifi_booking_controller_default);
application.register("internet-order-form", internet_order_form_controller_default);
application.register("product-card", product_card_controller_default);
application.register("sim-card-booking", sim_card_booking_controller_default);
application.register("qrcode-modal", qrcode_modal_controller_default);
application.register("location-selector", location_selector_controller_default);
application.register("transfer-search", transfer_search_controller_default);
application.register("address-selector", address_selector_controller_default);
application.register("search", search_controller_default);
application.register("hotel-filter-persistence", hotel_filter_persistence_controller_default);
application.register("hotel-services-search", hotel_services_search_controller_default);
application.register("live-room", live_room_controller_default);
application.register("special-hotel-search", special_hotel_search_controller_default);
application.register("special-hotel-filter", special_hotel_filter_controller_default);
application.register("hotel-search-filter", hotel_search_filter_controller_default);
application.register("blind-box", blind_box_controller_default);
application.register("hotel-map-toggle", hotel_map_toggle_controller_default);
application.register("hotel-map", hotel_map_controller_default);
application.register("smart-back", smart_back_controller_default);
application.register("tour-group-tabs", tour_group_tabs_controller_default);
application.register("hotel-price-filter", hotel_price_filter_controller_default);
application.register("hotel-guarantee", hotel_guarantee_controller_default);
application.register("abroad-ticket-type", abroad_ticket_type_controller_default);
application.register("landmark-filter", landmark_filter_controller_default);
window.Stimulus = application;

// app/javascript/clipboard_utils.ts
function copyToClipboard(text) {
  return new Promise((resolve, reject) => {
    if (navigator.clipboard && window.isSecureContext) {
      navigator.clipboard.writeText(text).then(() => resolve(true)).catch(() => {
        if (fallbackCopy(text)) {
          resolve(true);
        } else {
          reject(new Error("Copy failed"));
        }
      });
    } else {
      if (fallbackCopy(text)) {
        resolve(true);
      } else {
        reject(new Error("Copy failed"));
      }
    }
  });
}
function fallbackCopy(text) {
  const textArea = document.createElement("textarea");
  textArea.value = text;
  textArea.style.position = "fixed";
  textArea.style.opacity = "0";
  document.body.appendChild(textArea);
  textArea.select();
  try {
    const success = document.execCommand("copy");
    document.body.removeChild(textArea);
    return success;
  } catch (error3) {
    document.body.removeChild(textArea);
    return false;
  }
}
window.copyToClipboard = copyToClipboard;

// app/javascript/sdk_utils.ts
var SDKUtils = class {
  constructor() {
    this.isAvailable = this.checkSDKAvailability();
  }
  /**
   * Check if SDK is available in current context
   */
  checkSDKAvailability() {
    return typeof window.sdk !== "undefined" && window.sdk && typeof window.sdk.send === "function";
  }
  /**
   * Send message to chatbox if SDK is available
   * @param {string} message - Message to send
   * @returns {boolean} - Whether message was sent successfully
   */
  sendMessage(message) {
    if (this.isAvailable) {
      try {
        window.sdk.send(message);
        console.log("Message sent to chatbox:", message);
        return true;
      } catch (error3) {
        console.error("Failed to send message to SDK:", error3);
        return false;
      }
    } else {
      console.log("SDK not available. Would send message:", message);
      return false;
    }
  }
  /**
   * Send error details to chatbox for fixing
   * @param {Object} errorInfo - Error information object
   */
  sendErrorForFix(errorInfo = {}) {
    const {
      url = window.location.href,
      path = window.location.pathname.substring(1),
      errorMessage = "Unknown error",
      additionalContext = ""
    } = errorInfo;
    const message = `Fix this error:
URL: ${url}
Error: ${errorMessage}
Path: ${path}${additionalContext ? `

Additional Context:
${additionalContext}` : ""}

Please help me fix this issue.`;
    return this.sendMessage(message);
  }
  /**
   * Refresh SDK availability status
   */
  refresh() {
    this.isAvailable = this.checkSDKAvailability();
    return this.isAvailable;
  }
  /**
   * Get current SDK status
   */
  getStatus() {
    return {
      isAvailable: this.isAvailable,
      hasSDK: typeof window.sdk !== "undefined",
      hasSendMethod: typeof window.sdk?.send === "function"
    };
  }
};
var sdkUtils = new SDKUtils();
window.sendToSDK = (message) => sdkUtils.sendMessage(message);
window.sendErrorToSDK = (errorInfo) => sdkUtils.sendErrorForFix(errorInfo);
window.isSDKAvailable = () => sdkUtils.getStatus().isAvailable;
window.sdkUtils = sdkUtils;

// app/javascript/stimulus_validator.ts
var StimulusValidator = class {
  constructor() {
    this.registeredControllers = /* @__PURE__ */ new Set();
    this.missingControllers = /* @__PURE__ */ new Set();
    this.hasReported = false;
    this.elementIssues = /* @__PURE__ */ new Map();
    this.stimulus = window.Stimulus;
    this.initValidator();
  }
  initValidator() {
    if (!this.isDevelopment()) {
      console.log("StimulusValidator not enable in non-develop environment.");
      return;
    }
    if (!window.Stimulus) {
      console.log("StimulusValidator not enable while Stimulus not found");
      return;
    }
    this.setupStimulusErrorHandler();
    this.collectRegisteredControllers();
    this.validateOnDOMReady();
    this.interceptActionClicks();
  }
  isDevelopment() {
    return !!window.errorHandler;
  }
  setupStimulusErrorHandler() {
    const setupHandler = () => {
      const stimulus = window.Stimulus;
      if (stimulus && typeof stimulus.handleError === "undefined") {
        stimulus.handleError = (error3, message, detail) => {
          console.error("Stimulus Error:", { error: error3, message, detail });
          if (window.errorHandler) {
            let errorMessage = message || error3.message || "Stimulus error occurred";
            let controllerName = "";
            let action = "";
            let subType = "scope-error";
            let suggestion = "";
            let elementInfo = null;
            if (detail) {
              if (detail.identifier) {
                controllerName = detail.identifier;
              }
              if (detail.action) {
                action = detail.action;
              }
              if (detail.element) {
                elementInfo = {
                  tagName: detail.element.tagName,
                  id: detail.element.id,
                  className: detail.element.className,
                  outerHTML: `${detail.element.outerHTML?.substring(0, 200)}...`
                };
              }
            }
            if (error3.message.includes("Controller") && error3.message.includes("is not defined")) {
              subType = "missing-controller";
              const controllerMatch = error3.message.match(/(\w+)Controller is not defined/);
              if (controllerMatch) {
                controllerName = controllerMatch[1].toLowerCase();
                errorMessage = `Stimulus controller "${controllerName}" is not defined or not registered`;
                suggestion = `Make sure to import and register the "${controllerName}" controller in app/javascript/controllers/index.ts. Check if the controller file exists at app/javascript/controllers/${controllerName}_controller.ts`;
              }
            } else if (error3.message.includes("Missing target element")) {
              subType = "missing-target";
              suggestion = "Check that the target element exists in the DOM and has the correct data-[controller]-target attribute";
            } else if (error3.message.includes("Missing action")) {
              subType = "missing-action";
              suggestion = "Verify that the action method exists in the controller class and is properly defined";
            } else if (message && message.includes("click")) {
              subType = "action-click";
              suggestion = "Check if the click action handler exists and the element has the correct data-action attribute";
            }
            window.errorHandler.handleError({
              message: errorMessage,
              type: "stimulus",
              subType,
              controllerName,
              action,
              suggestion,
              elementInfo,
              details: {
                originalMessage: message,
                error: {
                  name: error3.name,
                  message: error3.message,
                  stack: error3.stack
                },
                detail
              },
              timestamp: (/* @__PURE__ */ new Date()).toISOString(),
              filename: "stimulus-application",
              error: error3
            });
          }
        };
        console.log("Stimulus error handling configured via stimulus_validator");
      }
    };
    if (window.Stimulus) {
      setupHandler();
    } else {
      const checkStimulus = () => {
        if (window.Stimulus) {
          setupHandler();
        } else {
          setTimeout(checkStimulus, 100);
        }
      };
      checkStimulus();
    }
  }
  collectRegisteredControllers() {
    try {
      const stimulus = window.Stimulus;
      if (stimulus?.router?.modulesByIdentifier) {
        const modules = stimulus.router.modulesByIdentifier;
        for (const [identifier] of modules) {
          this.registeredControllers.add(identifier);
        }
      }
    } catch (error3) {
      console.warn("Could not access Stimulus controllers:", error3);
    }
  }
  validateOnDOMReady() {
    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", () => this.validateControllers());
    } else {
      this.validateControllers();
    }
    this.observeNewContent();
  }
  validateControllers() {
    const elements = document.querySelectorAll("[data-controller]");
    elements.forEach((element) => {
      const controllers = element.getAttribute("data-controller")?.split(" ") || [];
      controllers.forEach((controller) => {
        const trimmedController = controller.trim();
        if (trimmedController && !this.registeredControllers.has(trimmedController)) {
          this.missingControllers.add(trimmedController);
        } else if (trimmedController && this.registeredControllers.has(trimmedController)) {
          this.validateRequiredTargets(element, trimmedController);
        }
      });
      this.validateElementPositioning(element);
    });
    if (this.missingControllers.size > 0) {
      this.reportMissingControllers();
    }
    if (this.elementIssues.size > 0) {
      this.reportElementIssues();
    }
  }
  observeNewContent() {
    const observer2 = new MutationObserver((mutations) => {
      let hasNewElements = false;
      mutations.forEach((mutation) => {
        if (mutation.type === "childList" && mutation.addedNodes.length > 0) {
          const hasRelevantChanges = Array.from(mutation.addedNodes).some((node) => {
            if (node.nodeType === Node.ELEMENT_NODE) {
              const element = node;
              if (element.id === "js-error-status-bar" || element.closest("#js-error-status-bar")) {
                return false;
              }
              return element.hasAttribute("data-controller") || element.querySelector("[data-controller]");
            }
            return false;
          });
          if (hasRelevantChanges) {
            hasNewElements = true;
          }
        }
      });
      if (hasNewElements) {
        setTimeout(() => this.validateControllers(), 100);
      }
    });
    observer2.observe(document.body, {
      childList: true,
      subtree: true
    });
  }
  reportMissingControllers() {
    if (this.hasReported) {
      return;
    }
    const missingList = Array.from(this.missingControllers);
    this.hasReported = true;
    if (window.errorHandler) {
      window.errorHandler.handleError({
        message: `Missing Stimulus controllers: ${missingList.join(", ")}`,
        type: "stimulus",
        subType: "missing-controller",
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        missingControllers: missingList,
        suggestion: `Run: rails generate stimulus_controller ${missingList[0]}`,
        details: {
          controllers: missingList,
          generatorCommands: missingList.map((name) => `rails generate stimulus_controller ${name}`)
        }
      });
    } else {
      console.error("\u{1F534} Missing Stimulus Controllers:", missingList);
      console.info("\u{1F4A1} Generate missing controllers:", missingList.map(
        (name) => `rails generate stimulus_controller ${name}`
      ).join("\n"));
    }
  }
  validateRequiredTargets(controllerElement, controllerName) {
    try {
      const stimulus = window.Stimulus;
      if (stimulus?.router?.modulesByIdentifier) {
        const module = stimulus.router.modulesByIdentifier.get(controllerName);
        if (module) {
          const controllerClass = module.definition.controllerConstructor;
          const definedTargets = controllerClass.targets || [];
          const missingTargets = [];
          const outOfScopeTargets = [];
          const optionalTargets = this.getOptionalTargets(controllerClass);
          definedTargets.forEach((targetName) => {
            if (optionalTargets.has(targetName)) {
              return;
            }
            const targetSelector = `[data-${controllerName}-target="${targetName}"]`;
            const targetElement = controllerElement.querySelector(targetSelector);
            if (!targetElement) {
              const globalTargetElement = document.querySelector(targetSelector);
              if (globalTargetElement) {
                outOfScopeTargets.push(targetName);
              } else {
                missingTargets.push(targetName);
              }
            }
          });
          if (missingTargets.length > 0) {
            this.reportMissingTargets(controllerName, missingTargets, controllerElement);
          }
          if (outOfScopeTargets.length > 0) {
            this.reportOutOfScopeTargets(controllerName, outOfScopeTargets, controllerElement);
          }
        }
      }
    } catch (error3) {
      console.warn(`Could not validate targets for controller ${controllerName}:`, error3);
    }
  }
  getOptionalTargets(controllerClass) {
    const optionalTargets = /* @__PURE__ */ new Set();
    try {
      const definedTargets = controllerClass.targets || [];
      definedTargets.forEach((targetName) => {
        const capitalizedTarget = targetName.charAt(0).toUpperCase() + targetName.slice(1);
        const hasTargetProperty = `has${capitalizedTarget}Target`;
        if (hasTargetProperty in controllerClass.prototype || Object.getOwnPropertyDescriptor(controllerClass.prototype, hasTargetProperty) || Object.hasOwnProperty.call(controllerClass.prototype, hasTargetProperty)) {
          optionalTargets.add(targetName);
        }
      });
    } catch (error3) {
      console.warn("Could not analyze controller for optional targets:", error3);
    }
    return optionalTargets;
  }
  validateElementPositioning(controllerElement) {
    const controllerName = controllerElement.getAttribute("data-controller")?.split(" ")[0];
    if (!controllerName) return;
    const issues = [];
    this.checkCommonSelectors(controllerElement, controllerName, issues);
    if (issues.length > 0) {
      this.elementIssues.set(controllerName, issues);
    }
  }
  checkCommonSelectors(element, controllerName, issues) {
    const relevantIds = [];
    relevantIds.push(`${controllerName}-input`, `${controllerName}-button`, `${controllerName}-form`);
    relevantIds.forEach((id2) => {
      const globalElement = document.getElementById(id2);
      if (globalElement) {
        const isInScope = globalElement === element || element.contains(globalElement);
        if (!isInScope) {
          issues.push(`Element #${id2} exists but outside controller scope`);
        }
      }
    });
  }
  interceptActionClicks() {
    document.addEventListener("click", (event2) => {
      const target = event2.target;
      if (!target) return;
      const actionElement = target.closest("[data-action]");
      if (!actionElement) return;
      const actions = actionElement.getAttribute("data-action")?.split(" ") || [];
      actions.forEach((action) => {
        const controllerMatch = action.match(/([\w-]+)#([\w-]+)/);
        if (controllerMatch) {
          const controllerName = controllerMatch[1];
          const methodName = controllerMatch[2];
          if (!this.registeredControllers.has(controllerName)) {
            this.reportMissingActionController(controllerName, action, actionElement);
            return;
          }
          const controllerElement = actionElement.closest(`[data-controller*="${controllerName}"]`);
          if (!controllerElement) {
            this.reportMissingControllerScope(controllerName, action, actionElement);
            return;
          }
          this.checkMethodExists(controllerName, methodName, action, actionElement);
        }
      });
    }, true);
  }
  reportMissingTargets(controllerName, missingTargets, controllerElement) {
    if (window.errorHandler) {
      const targetList = missingTargets.join(", ");
      const targetExamples = missingTargets.map(
        (target) => `<div data-${controllerName}-target="${target}">...</div>`
      ).join("\n");
      window.errorHandler.handleError({
        message: `Stimulus controller "${controllerName}" requires missing target elements: ${targetList}`,
        type: "stimulus",
        subType: "missing-target",
        controllerName,
        missingTargets,
        elementInfo: this.getElementInfo(controllerElement),
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        suggestion: `Add the required target elements to the DOM within the controller scope, or make them optional by adding 'declare readonly has${missingTargets.map((t) => t.charAt(0).toUpperCase() + t.slice(1)).join("Target: boolean, declare readonly has")}Target: boolean' to the controller`,
        details: {
          errorType: "Missing Required Targets",
          controllerName,
          missingTargets,
          requiredElements: targetExamples,
          elementInfo: this.getElementInfo(controllerElement),
          description: `The controller "${controllerName}" defines targets [${targetList}] but these elements are not found in the DOM within the controller scope`
        }
      });
    }
  }
  reportOutOfScopeTargets(controllerName, outOfScopeTargets, controllerElement) {
    if (window.errorHandler) {
      const targetList = outOfScopeTargets.join(", ");
      window.errorHandler.handleError({
        message: `Stimulus controller "${controllerName}" targets exist but are outside controller scope: ${targetList}`,
        type: "stimulus",
        subType: "target-scope-error",
        controllerName,
        outOfScopeTargets,
        elementInfo: this.getElementInfo(controllerElement),
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        suggestion: `Move target elements inside controller scope or expand controller scope to include targets`,
        details: {
          errorType: "Targets Outside Controller Scope",
          controllerName,
          outOfScopeTargets,
          elementInfo: this.getElementInfo(controllerElement),
          description: `The controller "${controllerName}" defines targets [${targetList}] and these elements exist in the DOM but are outside the controller scope`,
          solution: `Either move the target elements inside the controller scope, or expand the controller scope to include the targets by moving the data-controller attribute to a parent element that contains both the controller logic and the target elements.`
        }
      });
    }
  }
  reportMissingActionController(controllerName, action, element) {
    if (window.errorHandler) {
      window.errorHandler.handleError({
        message: `User clicked action "${action}" but controller "${controllerName}" is not registered`,
        type: "stimulus",
        subType: "action-click",
        controllerName,
        action,
        elementInfo: this.getElementInfo(element),
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        suggestion: `Run: rails generate stimulus_controller ${controllerName}`,
        details: {
          errorType: "Missing Controller on Action Click",
          controllerName,
          action,
          elementInfo: this.getElementInfo(element),
          description: "User attempted to trigger an action but the required controller is not registered"
        }
      });
    }
  }
  reportMissingControllerScope(controllerName, action, element) {
    if (window.errorHandler) {
      window.errorHandler.handleError({
        message: `User clicked action "${action}" but no "${controllerName}" controller found in parent scope`,
        type: "stimulus",
        subType: "scope-error",
        controllerName,
        action,
        elementInfo: this.getElementInfo(element),
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        suggestion: `Add data-controller="${controllerName}" to a parent element or move this element inside the controller scope`,
        details: {
          errorType: "Controller Scope Missing",
          controllerName,
          action,
          elementInfo: this.getElementInfo(element),
          description: "Action element is not within the scope of its target controller",
          solution: `Wrap the element with <div data-controller="${controllerName}">...</div>`
        }
      });
    }
  }
  checkMethodExists(controllerName, methodName, action, element) {
    try {
      const stimulus = window.Stimulus;
      if (stimulus?.router?.modulesByIdentifier) {
        const module = stimulus.router.modulesByIdentifier.get(controllerName);
        if (module) {
          const controllerClass = module.definition.controllerConstructor;
          const instance = new controllerClass();
          if (typeof instance[methodName] !== "function") {
            this.reportMissingMethod(controllerName, methodName, action, element);
          }
        }
      }
    } catch (_error) {
      this.checkMethodExistsAlternative(controllerName, methodName, action, element);
    }
  }
  checkMethodExistsAlternative(controllerName, methodName, action, element) {
    try {
      const stimulus = window.Stimulus;
      if (stimulus?.router?.modulesByIdentifier) {
        const module = stimulus.router.modulesByIdentifier.get(controllerName);
        if (module) {
          const controllerClass = module.definition.controllerConstructor;
          if (!controllerClass.prototype[methodName] || typeof controllerClass.prototype[methodName] !== "function") {
            this.reportMissingMethod(controllerName, methodName, action, element);
          }
        }
      }
    } catch (error3) {
      console.warn(`Could not validate method existence for ${controllerName}#${methodName}:`, error3);
    }
  }
  reportMissingMethod(controllerName, methodName, action, element) {
    if (window.errorHandler) {
      window.errorHandler.handleError({
        message: `User clicked action "${action}" but method "${methodName}" does not exist in controller "${controllerName}"`,
        type: "stimulus",
        subType: "method-not-found",
        controllerName,
        methodName,
        action,
        elementInfo: this.getElementInfo(element),
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        suggestion: `Add method "${methodName}" to the ${controllerName} controller or fix the action name`,
        details: {
          errorType: "Method Not Found",
          controllerName,
          methodName,
          action,
          elementInfo: this.getElementInfo(element),
          description: `The method "${methodName}" was called but does not exist in the controller`,
          solution: `Add the method to your controller:

${methodName}(): void {
  // Your implementation here
}`
        }
      });
    }
  }
  reportElementIssues() {
    const allIssues = [];
    const detailedIssues = {};
    this.elementIssues.forEach((issues, controllerName) => {
      allIssues.push(`${controllerName}: ${issues.join(", ")}`);
      detailedIssues[controllerName] = issues;
    });
    if (window.errorHandler) {
      window.errorHandler.handleError({
        message: `Stimulus element positioning issues detected`,
        type: "stimulus",
        subType: "positioning-issues",
        positioningIssues: allIssues,
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        suggestion: "Consider using data-targets or moving elements inside controller scope",
        details: {
          errorType: "Element Positioning Issues",
          controllers: Object.keys(detailedIssues),
          issuesByController: detailedIssues,
          totalIssues: allIssues.length,
          description: "Some elements are referenced by controllers but exist outside their scope",
          possibleSolutions: [
            "Move elements inside controller scope",
            "Use data-targets for external elements",
            "Check controller data-controller attribute placement"
          ]
        }
      });
    }
    this.elementIssues.clear();
  }
  getElementInfo(element) {
    return {
      tagName: element.tagName.toLowerCase(),
      id: element.id || "no-id",
      className: element.className || "no-class",
      textContent: (element.textContent || "").substring(0, 50)
    };
  }
  // Public API
  getRegisteredControllers() {
    return Array.from(this.registeredControllers);
  }
  getMissingControllers() {
    return Array.from(this.missingControllers);
  }
  forceValidation() {
    this.missingControllers.clear();
    this.elementIssues.clear();
    this.hasReported = false;
    this.validateControllers();
  }
};
if (typeof window !== "undefined") {
  window.stimulusValidator = new StimulusValidator();
}

// app/javascript/channels/consumer.ts
var consumer_default = createConsumer();

// app/javascript/base.ts
start();
window.ActionCable = actioncable_esm_exports;
module_default.start();
window.Alpine = module_default;
window.Turbo = turbo_es2017_esm_exports;
window.restoreButtonStates = function() {
  const disabledButtons = document.querySelectorAll(
    'input[type="submit"][disabled], button[type="submit"][disabled], button:not([type])[disabled]'
  );
  disabledButtons.forEach((button) => {
    button.disabled = false;
    const originalText = button.dataset.originalText;
    if (originalText) {
      button.textContent = originalText;
      delete button.dataset.originalText;
    }
    button.classList.remove("loading");
  });
};
function convertLegacyAttributes() {
  document.querySelectorAll("[data-method]:not([data-turbo-method])").forEach((el) => {
    const method = el.getAttribute("data-method");
    if (method && method !== "get") {
      el.setAttribute("data-turbo-method", method);
      el.removeAttribute("data-method");
    }
  });
  document.querySelectorAll("[data-confirm]:not([data-turbo-confirm])").forEach((el) => {
    const confirm2 = el.getAttribute("data-confirm");
    if (confirm2) {
      el.setAttribute("data-turbo-confirm", confirm2);
      el.removeAttribute("data-confirm");
    }
  });
  document.querySelectorAll('[data-remote="true"]').forEach((el) => {
    el.removeAttribute("data-remote");
  });
  document.querySelectorAll("[data-disable-with]:not([data-turbo-submits-with])").forEach((el) => {
    if (el.dataset.turbo === "false") return;
    const parentForm = el.closest("form");
    if (parentForm?.dataset.turbo === "false") return;
    const text = el.getAttribute("data-disable-with");
    if (text) {
      el.setAttribute("data-turbo-submits-with", text);
      el.removeAttribute("data-disable-with");
    }
  });
}
document.addEventListener("DOMContentLoaded", convertLegacyAttributes);
document.addEventListener("turbo:load", convertLegacyAttributes);
document.addEventListener("turbo:frame-load", convertLegacyAttributes);
function handleNonTurboFormSubmit(event2) {
  const form = event2.target;
  const submit = form.querySelector(
    'button[type="submit"], button:not([type]), input[type="submit"]'
  );
  const isTurboDisabled = form.dataset.turbo === "false" || submit?.dataset.turbo === "false";
  if (isTurboDisabled && submit?.dataset.disableWith) {
    const isButton = submit instanceof HTMLButtonElement;
    const key = isButton ? "textContent" : "value";
    submit.dataset.originalText = submit[key] || "";
    submit[key] = submit.dataset.disableWith;
    submit.disabled = true;
  }
}
function handleVisibilityChange() {
  if (document.visibilityState === "visible") {
    const selector = 'form[data-turbo="false"] [disabled][data-original-text], [data-turbo="false"][disabled][data-original-text]';
    document.querySelectorAll(selector).forEach((submit) => {
      submit.disabled = false;
      const originalText = submit.dataset.originalText;
      if (originalText) {
        const key = submit instanceof HTMLButtonElement ? "textContent" : "value";
        submit[key] = originalText;
        delete submit.dataset.originalText;
      }
    });
  }
}
document.addEventListener("submit", handleNonTurboFormSubmit);
document.addEventListener("visibilitychange", handleVisibilityChange);
StreamActions.report_async_error = function() {
  const errorData = JSON.parse(this.getAttribute("data-error") || "{}");
  if (window.errorHandler) {
    window.errorHandler.handleError({
      type: "asyncjob",
      message: errorData.message || "Async job error occurred",
      timestamp: (/* @__PURE__ */ new Date()).toISOString(),
      job_class: errorData.job_class,
      job_id: errorData.job_id,
      queue: errorData.queue,
      exception_class: errorData.exception_class,
      backtrace: errorData.backtrace,
      details: errorData
    });
  }
};
StreamActions.redirect = function() {
  const url = this.getAttribute("url");
  const turbo = this.getAttribute("data-turbo");
  if (url) {
    if (turbo === "false") {
      if (window.self !== window.parent) {
        window.open(url, "_blank");
      } else {
        window.location.href = url;
      }
    } else {
      turbo_es2017_esm_exports.visit(url);
    }
  }
};

// app/javascript/application.ts
window.showToast = function(message) {
  const existingToast = document.querySelector(".toast-message");
  if (existingToast) {
    existingToast.remove();
  }
  const toast = document.createElement("div");
  toast.className = "toast-message fixed z-50";
  toast.style.cssText = "top: 50%; left: 50%; transform: translate(-50%, -50%);";
  toast.style.animation = "fadeIn 0.3s ease-in-out";
  toast.innerHTML = `
    <div class="flex items-center justify-center text-white px-4 py-3 rounded-lg shadow-2xl backdrop-blur-sm" 
         style="min-width: 200px; max-width: 90vw; background: rgba(31, 41, 55, 0.85);">
      <span class="text-sm">${message}</span>
    </div>
  `;
  document.body.appendChild(toast);
  setTimeout(() => {
    toast.style.animation = "fadeOut 0.3s ease-in-out";
    setTimeout(() => {
      if (toast.parentNode) {
        toast.parentNode.removeChild(toast);
      }
    }, 300);
  }, 2500);
};
var style2 = document.createElement("style");
style2.textContent = `
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  
  @keyframes fadeOut {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }
`;
document.head.appendChild(style2);
/*! Bundled license information:

@hotwired/turbo/dist/turbo.es2017-esm.js:
  (*!
  Turbo 8.0.17
  Copyright  2025 37signals LLC
   *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0ByYWlscy9hY3Rpb25jYWJsZS9zcmMvYWRhcHRlcnMuanMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0ByYWlscy9hY3Rpb25jYWJsZS9zcmMvbG9nZ2VyLmpzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AcmFpbHMvYWN0aW9uY2FibGUvc3JjL2Nvbm5lY3Rpb25fbW9uaXRvci5qcyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHJhaWxzL2FjdGlvbmNhYmxlL3NyYy9pbnRlcm5hbC5qcyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHJhaWxzL2FjdGlvbmNhYmxlL3NyYy9jb25uZWN0aW9uLmpzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AcmFpbHMvYWN0aW9uY2FibGUvc3JjL3N1YnNjcmlwdGlvbi5qcyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHJhaWxzL2FjdGlvbmNhYmxlL3NyYy9zdWJzY3JpcHRpb25fZ3VhcmFudG9yLmpzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AcmFpbHMvYWN0aW9uY2FibGUvc3JjL3N1YnNjcmlwdGlvbnMuanMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0ByYWlscy9hY3Rpb25jYWJsZS9zcmMvY29uc3VtZXIuanMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0ByYWlscy9hY3Rpb25jYWJsZS9zcmMvaW5kZXguanMiLCAiLi4vLi4vamF2YXNjcmlwdC9mb3JtX2RhdGFfcGF0Y2gudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0ByYWlscy9hY3RpdmVzdG9yYWdlL2FwcC9hc3NldHMvamF2YXNjcmlwdHMvYWN0aXZlc3RvcmFnZS5lc20uanMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2FscGluZWpzL2Rpc3QvbW9kdWxlLmVzbS5qcyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHJhaWxzL2FjdGlvbmNhYmxlL2FwcC9hc3NldHMvamF2YXNjcmlwdHMvYWN0aW9uY2FibGUuZXNtLmpzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AaG90d2lyZWQvdHVyYm8vZGlzdC90dXJiby5lczIwMTctZXNtLmpzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AaG90d2lyZWQvdHVyYm8tcmFpbHMvYXBwL2phdmFzY3JpcHQvdHVyYm8vY2FibGUuanMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0Bob3R3aXJlZC90dXJiby1yYWlscy9hcHAvamF2YXNjcmlwdC90dXJiby9zbmFrZWl6ZS5qcyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGhvdHdpcmVkL3R1cmJvLXJhaWxzL2FwcC9qYXZhc2NyaXB0L3R1cmJvL2NhYmxlX3N0cmVhbV9zb3VyY2VfZWxlbWVudC5qcyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGhvdHdpcmVkL3R1cmJvLXJhaWxzL2FwcC9qYXZhc2NyaXB0L3R1cmJvL2ZldGNoX3JlcXVlc3RzLmpzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AaG90d2lyZWQvdHVyYm8tcmFpbHMvYXBwL2phdmFzY3JpcHQvdHVyYm8vaW5kZXguanMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0Bob3R3aXJlZC9zdGltdWx1cy9kaXN0L3N0aW11bHVzLmpzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvdGhlbWVfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2Ryb3Bkb3duX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9zZGtfaW50ZWdyYXRpb25fY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2NsaXBib2FyZF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvY2l0eV9zZWxlY3Rvcl9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvZmxpZ2h0X3NlYXJjaF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvZmxpZ2h0X2hpc3RvcnlfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2RhdGVfcGlja2VyX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9ib29raW5nX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9jb3Vwb25fY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2Rlc3RpbmF0aW9uX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9yZWdpb25fc2VsZWN0b3JfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2hvdGVsX3NlYXJjaF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvaG90ZWxfZGV0YWlsX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9zZXJ2aWNlX2dyaWRfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3Bhc3Nlbmdlcl9zZWxlY3Rvcl9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvY2FiaW5fc2VsZWN0b3JfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3RyaXBfdHlwZV9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvcmV0dXJuX2RhdGVfcGlja2VyX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9yb3VuZF90cmlwX3NlbGVjdG9yX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy90cmFpbl9zZWFyY2hfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3RyYWluX2xpc3RfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3RyYWluX2NpdHlfc2VsZWN0b3JfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2luZmluaXRlX3Njcm9sbF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvZGVlcF90cmF2ZWxfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL211bHRpX2NpdHlfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2ZsaWdodF9maWx0ZXJfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2ZsaWdodF9zb3J0X2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9mbGlnaHRfaW5mb19kaXNwbGF5X2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9kYXRlX2xpbmtfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2hvdGVsX2d1ZXN0X3NlbGVjdG9yX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9ob3RlbF9kYXRlX3BpY2tlcl9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvcGF5bWVudF9tb2RhbF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvcGF5bWVudF9jb25maXJtYXRpb25fY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2hvdGVsX3RhYnNfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2hvdGVsX3RyYXZlbGVyX3NlbGVjdG9yX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy90b2FzdF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvdG9hc3RfdHJpZ2dlcl9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvaG90ZWxfYm9va2luZ19jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvdG91cl9kZXRhaWxfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2Nhcm91c2VsX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9zY3JvbGxfc3B5X2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9wYWNrYWdlX3N3aXRjaGVyX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9ib29raW5nX21vZGFsX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9ib3R0b21fYmFyX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9pbnN1cmFuY2Vfc2VsZWN0b3JfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3RvdXJfdHJhdmVsZXJfc2VsZWN0b3JfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3NwZWNpYWxfZmxpZ2h0c19mb3JtX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy90cmFpbl9ib29raW5nX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy90cmFpbl9ib29raW5nX2xvY2tfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3RyYWluX3NlYXRfc2VsZWN0b3JfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3RvdXJfZ3JvdXBfZmlsdGVyX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9jYXJfcmVudGFsX3RhYnNfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2hvdGVsX3BhY2thZ2Vfc2VhcmNoX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9ob3RlbF9wYWNrYWdlX29yZGVyX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9wd2FfaW5zdGFsbF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvYnVzX2RhdGVfcGlja2VyX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9idXNfdGlja2V0X3NlYXJjaF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvYnVzX3RpY2tldF9vcmRlcl9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvZGVlcF9ib29raW5nX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy92aXNhX29yZGVyX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9hYnJvYWRfcmVnaW9uX3NlbGVjdG9yX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9hYnJvYWRfZGF0ZV9waWNrZXJfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2Ficm9hZF9wYXNzZW5nZXJfc2VsZWN0b3JfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2Ficm9hZF9vcmRlcl9mb3JtX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9hYnJvYWRfdGlja2V0X3NlYXJjaF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvaG9tZXN0YXlfc2VhcmNoX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9pbnRlcm5ldF9zZXJ2aWNlc19jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvc2ltX2NhcmRfZmlsdGVyX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9kYXRhX3BsYW5fY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3dpZmlfYm9va2luZ19jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvaW50ZXJuZXRfb3JkZXJfZm9ybV9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvcHJvZHVjdF9jYXJkX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9zaW1fY2FyZF9ib29raW5nX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9xcmNvZGVfbW9kYWxfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2xvY2F0aW9uX3NlbGVjdG9yX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy90cmFuc2Zlcl9zZWFyY2hfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2FkZHJlc3Nfc2VsZWN0b3JfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3NlYXJjaF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvaG90ZWxfZmlsdGVyX3BlcnNpc3RlbmNlX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9ob3RlbF9zZXJ2aWNlc19zZWFyY2hfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2xpdmVfcm9vbV9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvc3BlY2lhbF9ob3RlbF9zZWFyY2hfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL3NwZWNpYWxfaG90ZWxfZmlsdGVyX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9ob3RlbF9zZWFyY2hfZmlsdGVyX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9ibGluZF9ib3hfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2hvdGVsX21hcF90b2dnbGVfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2hvdGVsX21hcF9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvc21hcnRfYmFja19jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvdG91cl9ncm91cF90YWJzX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9ob3RlbF9wcmljZV9maWx0ZXJfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2hvdGVsX2d1YXJhbnRlZV9jb250cm9sbGVyLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY29udHJvbGxlcnMvYWJyb2FkX3RpY2tldF90eXBlX2NvbnRyb2xsZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9jb250cm9sbGVycy9sYW5kbWFya19maWx0ZXJfY29udHJvbGxlci50cyIsICIuLi8uLi9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2luZGV4LnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY2xpcGJvYXJkX3V0aWxzLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvc2RrX3V0aWxzLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvc3RpbXVsdXNfdmFsaWRhdG9yLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvY2hhbm5lbHMvY29uc3VtZXIudHMiLCAiLi4vLi4vamF2YXNjcmlwdC9iYXNlLnRzIiwgIi4uLy4uL2phdmFzY3JpcHQvYXBwbGljYXRpb24udHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImV4cG9ydCBkZWZhdWx0IHtcbiAgbG9nZ2VyOiB0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiA/IGNvbnNvbGUgOiB1bmRlZmluZWQsXG4gIFdlYlNvY2tldDogdHlwZW9mIFdlYlNvY2tldCAhPT0gXCJ1bmRlZmluZWRcIiA/IFdlYlNvY2tldCA6IHVuZGVmaW5lZCxcbn1cbiIsICJpbXBvcnQgYWRhcHRlcnMgZnJvbSBcIi4vYWRhcHRlcnNcIlxuXG4vLyBUaGUgbG9nZ2VyIGlzIGRpc2FibGVkIGJ5IGRlZmF1bHQuIFlvdSBjYW4gZW5hYmxlIGl0IHdpdGg6XG4vL1xuLy8gICBBY3Rpb25DYWJsZS5sb2dnZXIuZW5hYmxlZCA9IHRydWVcbi8vXG4vLyAgIEV4YW1wbGU6XG4vL1xuLy8gICBpbXBvcnQgKiBhcyBBY3Rpb25DYWJsZSBmcm9tICdAcmFpbHMvYWN0aW9uY2FibGUnXG4vL1xuLy8gICBBY3Rpb25DYWJsZS5sb2dnZXIuZW5hYmxlZCA9IHRydWVcbi8vICAgQWN0aW9uQ2FibGUubG9nZ2VyLmxvZygnQ29ubmVjdGlvbiBFc3RhYmxpc2hlZC4nKVxuLy9cblxuZXhwb3J0IGRlZmF1bHQge1xuICBsb2coLi4ubWVzc2FnZXMpIHtcbiAgICBpZiAodGhpcy5lbmFibGVkKSB7XG4gICAgICBtZXNzYWdlcy5wdXNoKERhdGUubm93KCkpXG4gICAgICBhZGFwdGVycy5sb2dnZXIubG9nKFwiW0FjdGlvbkNhYmxlXVwiLCAuLi5tZXNzYWdlcylcbiAgICB9XG4gIH0sXG59XG4iLCAiaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXJcIlxuXG4vLyBSZXNwb25zaWJsZSBmb3IgZW5zdXJpbmcgdGhlIGNhYmxlIGNvbm5lY3Rpb24gaXMgaW4gZ29vZCBoZWFsdGggYnkgdmFsaWRhdGluZyB0aGUgaGVhcnRiZWF0IHBpbmdzIHNlbnQgZnJvbSB0aGUgc2VydmVyLCBhbmQgYXR0ZW1wdGluZ1xuLy8gcmV2aXZhbCByZWNvbm5lY3Rpb25zIGlmIHRoaW5ncyBnbyBhc3RyYXkuIEludGVybmFsIGNsYXNzLCBub3QgaW50ZW5kZWQgZm9yIGRpcmVjdCB1c2VyIG1hbmlwdWxhdGlvbi5cblxuY29uc3Qgbm93ID0gKCkgPT4gbmV3IERhdGUoKS5nZXRUaW1lKClcblxuY29uc3Qgc2Vjb25kc1NpbmNlID0gdGltZSA9PiAobm93KCkgLSB0aW1lKSAvIDEwMDBcblxuY2xhc3MgQ29ubmVjdGlvbk1vbml0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uKSB7XG4gICAgdGhpcy52aXNpYmlsaXR5RGlkQ2hhbmdlID0gdGhpcy52aXNpYmlsaXR5RGlkQ2hhbmdlLmJpbmQodGhpcylcbiAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uXG4gICAgdGhpcy5yZWNvbm5lY3RBdHRlbXB0cyA9IDBcbiAgfVxuXG4gIHN0YXJ0KCkge1xuICAgIGlmICghdGhpcy5pc1J1bm5pbmcoKSkge1xuICAgICAgdGhpcy5zdGFydGVkQXQgPSBub3coKVxuICAgICAgZGVsZXRlIHRoaXMuc3RvcHBlZEF0XG4gICAgICB0aGlzLnN0YXJ0UG9sbGluZygpXG4gICAgICBhZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLnZpc2liaWxpdHlEaWRDaGFuZ2UpXG4gICAgICBsb2dnZXIubG9nKGBDb25uZWN0aW9uTW9uaXRvciBzdGFydGVkLiBzdGFsZSB0aHJlc2hvbGQgPSAke3RoaXMuY29uc3RydWN0b3Iuc3RhbGVUaHJlc2hvbGR9IHNgKVxuICAgIH1cbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgaWYgKHRoaXMuaXNSdW5uaW5nKCkpIHtcbiAgICAgIHRoaXMuc3RvcHBlZEF0ID0gbm93KClcbiAgICAgIHRoaXMuc3RvcFBvbGxpbmcoKVxuICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy52aXNpYmlsaXR5RGlkQ2hhbmdlKVxuICAgICAgbG9nZ2VyLmxvZyhcIkNvbm5lY3Rpb25Nb25pdG9yIHN0b3BwZWRcIilcbiAgICB9XG4gIH1cblxuICBpc1J1bm5pbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhcnRlZEF0ICYmICF0aGlzLnN0b3BwZWRBdFxuICB9XG5cbiAgcmVjb3JkTWVzc2FnZSgpIHtcbiAgICB0aGlzLnBpbmdlZEF0ID0gbm93KClcbiAgfVxuXG4gIHJlY29yZENvbm5lY3QoKSB7XG4gICAgdGhpcy5yZWNvbm5lY3RBdHRlbXB0cyA9IDBcbiAgICBkZWxldGUgdGhpcy5kaXNjb25uZWN0ZWRBdFxuICAgIGxvZ2dlci5sb2coXCJDb25uZWN0aW9uTW9uaXRvciByZWNvcmRlZCBjb25uZWN0XCIpXG4gIH1cblxuICByZWNvcmREaXNjb25uZWN0KCkge1xuICAgIHRoaXMuZGlzY29ubmVjdGVkQXQgPSBub3coKVxuICAgIGxvZ2dlci5sb2coXCJDb25uZWN0aW9uTW9uaXRvciByZWNvcmRlZCBkaXNjb25uZWN0XCIpXG4gIH1cblxuICAvLyBQcml2YXRlXG5cbiAgc3RhcnRQb2xsaW5nKCkge1xuICAgIHRoaXMuc3RvcFBvbGxpbmcoKVxuICAgIHRoaXMucG9sbCgpXG4gIH1cblxuICBzdG9wUG9sbGluZygpIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5wb2xsVGltZW91dClcbiAgfVxuXG4gIHBvbGwoKSB7XG4gICAgdGhpcy5wb2xsVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5yZWNvbm5lY3RJZlN0YWxlKClcbiAgICAgIHRoaXMucG9sbCgpXG4gICAgfVxuICAgICwgdGhpcy5nZXRQb2xsSW50ZXJ2YWwoKSlcbiAgfVxuXG4gIGdldFBvbGxJbnRlcnZhbCgpIHtcbiAgICBjb25zdCB7IHN0YWxlVGhyZXNob2xkLCByZWNvbm5lY3Rpb25CYWNrb2ZmUmF0ZSB9ID0gdGhpcy5jb25zdHJ1Y3RvclxuICAgIGNvbnN0IGJhY2tvZmYgPSBNYXRoLnBvdygxICsgcmVjb25uZWN0aW9uQmFja29mZlJhdGUsIE1hdGgubWluKHRoaXMucmVjb25uZWN0QXR0ZW1wdHMsIDEwKSlcbiAgICBjb25zdCBqaXR0ZXJNYXggPSB0aGlzLnJlY29ubmVjdEF0dGVtcHRzID09PSAwID8gMS4wIDogcmVjb25uZWN0aW9uQmFja29mZlJhdGVcbiAgICBjb25zdCBqaXR0ZXIgPSBqaXR0ZXJNYXggKiBNYXRoLnJhbmRvbSgpXG4gICAgcmV0dXJuIHN0YWxlVGhyZXNob2xkICogMTAwMCAqIGJhY2tvZmYgKiAoMSArIGppdHRlcilcbiAgfVxuXG4gIHJlY29ubmVjdElmU3RhbGUoKSB7XG4gICAgaWYgKHRoaXMuY29ubmVjdGlvbklzU3RhbGUoKSkge1xuICAgICAgbG9nZ2VyLmxvZyhgQ29ubmVjdGlvbk1vbml0b3IgZGV0ZWN0ZWQgc3RhbGUgY29ubmVjdGlvbi4gcmVjb25uZWN0QXR0ZW1wdHMgPSAke3RoaXMucmVjb25uZWN0QXR0ZW1wdHN9LCB0aW1lIHN0YWxlID0gJHtzZWNvbmRzU2luY2UodGhpcy5yZWZyZXNoZWRBdCl9IHMsIHN0YWxlIHRocmVzaG9sZCA9ICR7dGhpcy5jb25zdHJ1Y3Rvci5zdGFsZVRocmVzaG9sZH0gc2ApXG4gICAgICB0aGlzLnJlY29ubmVjdEF0dGVtcHRzKytcbiAgICAgIGlmICh0aGlzLmRpc2Nvbm5lY3RlZFJlY2VudGx5KCkpIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhgQ29ubmVjdGlvbk1vbml0b3Igc2tpcHBpbmcgcmVvcGVuaW5nIHJlY2VudCBkaXNjb25uZWN0LiB0aW1lIGRpc2Nvbm5lY3RlZCA9ICR7c2Vjb25kc1NpbmNlKHRoaXMuZGlzY29ubmVjdGVkQXQpfSBzYClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvZ2dlci5sb2coXCJDb25uZWN0aW9uTW9uaXRvciByZW9wZW5pbmdcIilcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uLnJlb3BlbigpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0IHJlZnJlc2hlZEF0KCkge1xuICAgIHJldHVybiB0aGlzLnBpbmdlZEF0ID8gdGhpcy5waW5nZWRBdCA6IHRoaXMuc3RhcnRlZEF0XG4gIH1cblxuICBjb25uZWN0aW9uSXNTdGFsZSgpIHtcbiAgICByZXR1cm4gc2Vjb25kc1NpbmNlKHRoaXMucmVmcmVzaGVkQXQpID4gdGhpcy5jb25zdHJ1Y3Rvci5zdGFsZVRocmVzaG9sZFxuICB9XG5cbiAgZGlzY29ubmVjdGVkUmVjZW50bHkoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGlzY29ubmVjdGVkQXQgJiYgKHNlY29uZHNTaW5jZSh0aGlzLmRpc2Nvbm5lY3RlZEF0KSA8IHRoaXMuY29uc3RydWN0b3Iuc3RhbGVUaHJlc2hvbGQpXG4gIH1cblxuICB2aXNpYmlsaXR5RGlkQ2hhbmdlKCkge1xuICAgIGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09IFwidmlzaWJsZVwiKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGlvbklzU3RhbGUoKSB8fCAhdGhpcy5jb25uZWN0aW9uLmlzT3BlbigpKSB7XG4gICAgICAgICAgbG9nZ2VyLmxvZyhgQ29ubmVjdGlvbk1vbml0b3IgcmVvcGVuaW5nIHN0YWxlIGNvbm5lY3Rpb24gb24gdmlzaWJpbGl0eWNoYW5nZS4gdmlzaWJpbGl0eVN0YXRlID0gJHtkb2N1bWVudC52aXNpYmlsaXR5U3RhdGV9YClcbiAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24ucmVvcGVuKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLCAyMDApXG4gICAgfVxuICB9XG5cbn1cblxuQ29ubmVjdGlvbk1vbml0b3Iuc3RhbGVUaHJlc2hvbGQgPSA2IC8vIFNlcnZlcjo6Q29ubmVjdGlvbnM6OkJFQVRfSU5URVJWQUwgKiAyIChtaXNzZWQgdHdvIHBpbmdzKVxuQ29ubmVjdGlvbk1vbml0b3IucmVjb25uZWN0aW9uQmFja29mZlJhdGUgPSAwLjE1XG5cbmV4cG9ydCBkZWZhdWx0IENvbm5lY3Rpb25Nb25pdG9yXG4iLCAiZXhwb3J0IGRlZmF1bHQge1xuICBcIm1lc3NhZ2VfdHlwZXNcIjoge1xuICAgIFwid2VsY29tZVwiOiBcIndlbGNvbWVcIixcbiAgICBcImRpc2Nvbm5lY3RcIjogXCJkaXNjb25uZWN0XCIsXG4gICAgXCJwaW5nXCI6IFwicGluZ1wiLFxuICAgIFwiY29uZmlybWF0aW9uXCI6IFwiY29uZmlybV9zdWJzY3JpcHRpb25cIixcbiAgICBcInJlamVjdGlvblwiOiBcInJlamVjdF9zdWJzY3JpcHRpb25cIlxuICB9LFxuICBcImRpc2Nvbm5lY3RfcmVhc29uc1wiOiB7XG4gICAgXCJ1bmF1dGhvcml6ZWRcIjogXCJ1bmF1dGhvcml6ZWRcIixcbiAgICBcImludmFsaWRfcmVxdWVzdFwiOiBcImludmFsaWRfcmVxdWVzdFwiLFxuICAgIFwic2VydmVyX3Jlc3RhcnRcIjogXCJzZXJ2ZXJfcmVzdGFydFwiLFxuICAgIFwicmVtb3RlXCI6IFwicmVtb3RlXCJcbiAgfSxcbiAgXCJkZWZhdWx0X21vdW50X3BhdGhcIjogXCIvY2FibGVcIixcbiAgXCJwcm90b2NvbHNcIjogW1xuICAgIFwiYWN0aW9uY2FibGUtdjEtanNvblwiLFxuICAgIFwiYWN0aW9uY2FibGUtdW5zdXBwb3J0ZWRcIlxuICBdXG59XG4iLCAiaW1wb3J0IGFkYXB0ZXJzIGZyb20gXCIuL2FkYXB0ZXJzXCJcbmltcG9ydCBDb25uZWN0aW9uTW9uaXRvciBmcm9tIFwiLi9jb25uZWN0aW9uX21vbml0b3JcIlxuaW1wb3J0IElOVEVSTkFMIGZyb20gXCIuL2ludGVybmFsXCJcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyXCJcblxuLy8gRW5jYXBzdWxhdGUgdGhlIGNhYmxlIGNvbm5lY3Rpb24gaGVsZCBieSB0aGUgY29uc3VtZXIuIFRoaXMgaXMgYW4gaW50ZXJuYWwgY2xhc3Mgbm90IGludGVuZGVkIGZvciBkaXJlY3QgdXNlciBtYW5pcHVsYXRpb24uXG5cbmNvbnN0IHttZXNzYWdlX3R5cGVzLCBwcm90b2NvbHN9ID0gSU5URVJOQUxcbmNvbnN0IHN1cHBvcnRlZFByb3RvY29scyA9IHByb3RvY29scy5zbGljZSgwLCBwcm90b2NvbHMubGVuZ3RoIC0gMSlcblxuY29uc3QgaW5kZXhPZiA9IFtdLmluZGV4T2ZcblxuY2xhc3MgQ29ubmVjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKGNvbnN1bWVyKSB7XG4gICAgdGhpcy5vcGVuID0gdGhpcy5vcGVuLmJpbmQodGhpcylcbiAgICB0aGlzLmNvbnN1bWVyID0gY29uc3VtZXJcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSB0aGlzLmNvbnN1bWVyLnN1YnNjcmlwdGlvbnNcbiAgICB0aGlzLm1vbml0b3IgPSBuZXcgQ29ubmVjdGlvbk1vbml0b3IodGhpcylcbiAgICB0aGlzLmRpc2Nvbm5lY3RlZCA9IHRydWVcbiAgfVxuXG4gIHNlbmQoZGF0YSkge1xuICAgIGlmICh0aGlzLmlzT3BlbigpKSB7XG4gICAgICB0aGlzLndlYlNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KGRhdGEpKVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG5cbiAgb3BlbigpIHtcbiAgICBpZiAodGhpcy5pc0FjdGl2ZSgpKSB7XG4gICAgICBsb2dnZXIubG9nKGBBdHRlbXB0ZWQgdG8gb3BlbiBXZWJTb2NrZXQsIGJ1dCBleGlzdGluZyBzb2NrZXQgaXMgJHt0aGlzLmdldFN0YXRlKCl9YClcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBzb2NrZXRQcm90b2NvbHMgPSBbLi4ucHJvdG9jb2xzLCAuLi50aGlzLmNvbnN1bWVyLnN1YnByb3RvY29scyB8fCBbXV1cbiAgICAgIGxvZ2dlci5sb2coYE9wZW5pbmcgV2ViU29ja2V0LCBjdXJyZW50IHN0YXRlIGlzICR7dGhpcy5nZXRTdGF0ZSgpfSwgc3VicHJvdG9jb2xzOiAke3NvY2tldFByb3RvY29sc31gKVxuICAgICAgaWYgKHRoaXMud2ViU29ja2V0KSB7IHRoaXMudW5pbnN0YWxsRXZlbnRIYW5kbGVycygpIH1cbiAgICAgIHRoaXMud2ViU29ja2V0ID0gbmV3IGFkYXB0ZXJzLldlYlNvY2tldCh0aGlzLmNvbnN1bWVyLnVybCwgc29ja2V0UHJvdG9jb2xzKVxuICAgICAgdGhpcy5pbnN0YWxsRXZlbnRIYW5kbGVycygpXG4gICAgICB0aGlzLm1vbml0b3Iuc3RhcnQoKVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cblxuICBjbG9zZSh7YWxsb3dSZWNvbm5lY3R9ID0ge2FsbG93UmVjb25uZWN0OiB0cnVlfSkge1xuICAgIGlmICghYWxsb3dSZWNvbm5lY3QpIHsgdGhpcy5tb25pdG9yLnN0b3AoKSB9XG4gICAgLy8gQXZvaWQgY2xvc2luZyB3ZWJzb2NrZXRzIGluIGEgXCJjb25uZWN0aW5nXCIgc3RhdGUgZHVlIHRvIFNhZmFyaSAxNS4xKyBidWcuIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL3JhaWxzL3JhaWxzL2lzc3Vlcy80MzgzNSNpc3N1ZWNvbW1lbnQtMTAwMjI4ODQ3OFxuICAgIGlmICh0aGlzLmlzT3BlbigpKSB7XG4gICAgICByZXR1cm4gdGhpcy53ZWJTb2NrZXQuY2xvc2UoKVxuICAgIH1cbiAgfVxuXG4gIHJlb3BlbigpIHtcbiAgICBsb2dnZXIubG9nKGBSZW9wZW5pbmcgV2ViU29ja2V0LCBjdXJyZW50IHN0YXRlIGlzICR7dGhpcy5nZXRTdGF0ZSgpfWApXG4gICAgaWYgKHRoaXMuaXNBY3RpdmUoKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xvc2UoKVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhcIkZhaWxlZCB0byByZW9wZW4gV2ViU29ja2V0XCIsIGVycm9yKVxuICAgICAgfVxuICAgICAgZmluYWxseSB7XG4gICAgICAgIGxvZ2dlci5sb2coYFJlb3BlbmluZyBXZWJTb2NrZXQgaW4gJHt0aGlzLmNvbnN0cnVjdG9yLnJlb3BlbkRlbGF5fW1zYClcbiAgICAgICAgc2V0VGltZW91dCh0aGlzLm9wZW4sIHRoaXMuY29uc3RydWN0b3IucmVvcGVuRGVsYXkpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLm9wZW4oKVxuICAgIH1cbiAgfVxuXG4gIGdldFByb3RvY29sKCkge1xuICAgIGlmICh0aGlzLndlYlNvY2tldCkge1xuICAgICAgcmV0dXJuIHRoaXMud2ViU29ja2V0LnByb3RvY29sXG4gICAgfVxuICB9XG5cbiAgaXNPcGVuKCkge1xuICAgIHJldHVybiB0aGlzLmlzU3RhdGUoXCJvcGVuXCIpXG4gIH1cblxuICBpc0FjdGl2ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1N0YXRlKFwib3BlblwiLCBcImNvbm5lY3RpbmdcIilcbiAgfVxuXG4gIHRyaWVkVG9SZWNvbm5lY3QoKSB7XG4gICAgcmV0dXJuIHRoaXMubW9uaXRvci5yZWNvbm5lY3RBdHRlbXB0cyA+IDBcbiAgfVxuXG4gIC8vIFByaXZhdGVcblxuICBpc1Byb3RvY29sU3VwcG9ydGVkKCkge1xuICAgIHJldHVybiBpbmRleE9mLmNhbGwoc3VwcG9ydGVkUHJvdG9jb2xzLCB0aGlzLmdldFByb3RvY29sKCkpID49IDBcbiAgfVxuXG4gIGlzU3RhdGUoLi4uc3RhdGVzKSB7XG4gICAgcmV0dXJuIGluZGV4T2YuY2FsbChzdGF0ZXMsIHRoaXMuZ2V0U3RhdGUoKSkgPj0gMFxuICB9XG5cbiAgZ2V0U3RhdGUoKSB7XG4gICAgaWYgKHRoaXMud2ViU29ja2V0KSB7XG4gICAgICBmb3IgKGxldCBzdGF0ZSBpbiBhZGFwdGVycy5XZWJTb2NrZXQpIHtcbiAgICAgICAgaWYgKGFkYXB0ZXJzLldlYlNvY2tldFtzdGF0ZV0gPT09IHRoaXMud2ViU29ja2V0LnJlYWR5U3RhdGUpIHtcbiAgICAgICAgICByZXR1cm4gc3RhdGUudG9Mb3dlckNhc2UoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBpbnN0YWxsRXZlbnRIYW5kbGVycygpIHtcbiAgICBmb3IgKGxldCBldmVudE5hbWUgaW4gdGhpcy5ldmVudHMpIHtcbiAgICAgIGNvbnN0IGhhbmRsZXIgPSB0aGlzLmV2ZW50c1tldmVudE5hbWVdLmJpbmQodGhpcylcbiAgICAgIHRoaXMud2ViU29ja2V0W2BvbiR7ZXZlbnROYW1lfWBdID0gaGFuZGxlclxuICAgIH1cbiAgfVxuXG4gIHVuaW5zdGFsbEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgZm9yIChsZXQgZXZlbnROYW1lIGluIHRoaXMuZXZlbnRzKSB7XG4gICAgICB0aGlzLndlYlNvY2tldFtgb24ke2V2ZW50TmFtZX1gXSA9IGZ1bmN0aW9uKCkge31cbiAgICB9XG4gIH1cblxufVxuXG5Db25uZWN0aW9uLnJlb3BlbkRlbGF5ID0gNTAwXG5cbkNvbm5lY3Rpb24ucHJvdG90eXBlLmV2ZW50cyA9IHtcbiAgbWVzc2FnZShldmVudCkge1xuICAgIGlmICghdGhpcy5pc1Byb3RvY29sU3VwcG9ydGVkKCkpIHsgcmV0dXJuIH1cbiAgICBjb25zdCB7aWRlbnRpZmllciwgbWVzc2FnZSwgcmVhc29uLCByZWNvbm5lY3QsIHR5cGV9ID0gSlNPTi5wYXJzZShldmVudC5kYXRhKVxuICAgIHRoaXMubW9uaXRvci5yZWNvcmRNZXNzYWdlKClcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgbWVzc2FnZV90eXBlcy53ZWxjb21lOlxuICAgICAgICBpZiAodGhpcy50cmllZFRvUmVjb25uZWN0KCkpIHtcbiAgICAgICAgICB0aGlzLnJlY29ubmVjdEF0dGVtcHRlZCA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1vbml0b3IucmVjb3JkQ29ubmVjdCgpXG4gICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbnMucmVsb2FkKClcbiAgICAgIGNhc2UgbWVzc2FnZV90eXBlcy5kaXNjb25uZWN0OlxuICAgICAgICBsb2dnZXIubG9nKGBEaXNjb25uZWN0aW5nLiBSZWFzb246ICR7cmVhc29ufWApXG4gICAgICAgIHJldHVybiB0aGlzLmNsb3NlKHthbGxvd1JlY29ubmVjdDogcmVjb25uZWN0fSlcbiAgICAgIGNhc2UgbWVzc2FnZV90eXBlcy5waW5nOlxuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgY2FzZSBtZXNzYWdlX3R5cGVzLmNvbmZpcm1hdGlvbjpcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmNvbmZpcm1TdWJzY3JpcHRpb24oaWRlbnRpZmllcilcbiAgICAgICAgaWYgKHRoaXMucmVjb25uZWN0QXR0ZW1wdGVkKSB7XG4gICAgICAgICAgdGhpcy5yZWNvbm5lY3RBdHRlbXB0ZWQgPSBmYWxzZVxuICAgICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbnMubm90aWZ5KGlkZW50aWZpZXIsIFwiY29ubmVjdGVkXCIsIHtyZWNvbm5lY3RlZDogdHJ1ZX0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaXB0aW9ucy5ub3RpZnkoaWRlbnRpZmllciwgXCJjb25uZWN0ZWRcIiwge3JlY29ubmVjdGVkOiBmYWxzZX0pXG4gICAgICAgIH1cbiAgICAgIGNhc2UgbWVzc2FnZV90eXBlcy5yZWplY3Rpb246XG4gICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbnMucmVqZWN0KGlkZW50aWZpZXIpXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25zLm5vdGlmeShpZGVudGlmaWVyLCBcInJlY2VpdmVkXCIsIG1lc3NhZ2UpXG4gICAgfVxuICB9LFxuXG4gIG9wZW4oKSB7XG4gICAgbG9nZ2VyLmxvZyhgV2ViU29ja2V0IG9ub3BlbiBldmVudCwgdXNpbmcgJyR7dGhpcy5nZXRQcm90b2NvbCgpfScgc3VicHJvdG9jb2xgKVxuICAgIHRoaXMuZGlzY29ubmVjdGVkID0gZmFsc2VcbiAgICBpZiAoIXRoaXMuaXNQcm90b2NvbFN1cHBvcnRlZCgpKSB7XG4gICAgICBsb2dnZXIubG9nKFwiUHJvdG9jb2wgaXMgdW5zdXBwb3J0ZWQuIFN0b3BwaW5nIG1vbml0b3IgYW5kIGRpc2Nvbm5lY3RpbmcuXCIpXG4gICAgICByZXR1cm4gdGhpcy5jbG9zZSh7YWxsb3dSZWNvbm5lY3Q6IGZhbHNlfSlcbiAgICB9XG4gIH0sXG5cbiAgY2xvc2UoZXZlbnQpIHtcbiAgICBsb2dnZXIubG9nKFwiV2ViU29ja2V0IG9uY2xvc2UgZXZlbnRcIilcbiAgICBpZiAodGhpcy5kaXNjb25uZWN0ZWQpIHsgcmV0dXJuIH1cbiAgICB0aGlzLmRpc2Nvbm5lY3RlZCA9IHRydWVcbiAgICB0aGlzLm1vbml0b3IucmVjb3JkRGlzY29ubmVjdCgpXG4gICAgcmV0dXJuIHRoaXMuc3Vic2NyaXB0aW9ucy5ub3RpZnlBbGwoXCJkaXNjb25uZWN0ZWRcIiwge3dpbGxBdHRlbXB0UmVjb25uZWN0OiB0aGlzLm1vbml0b3IuaXNSdW5uaW5nKCl9KVxuICB9LFxuXG4gIGVycm9yKCkge1xuICAgIGxvZ2dlci5sb2coXCJXZWJTb2NrZXQgb25lcnJvciBldmVudFwiKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENvbm5lY3Rpb25cbiIsICIvLyBBIG5ldyBzdWJzY3JpcHRpb24gaXMgY3JlYXRlZCB0aHJvdWdoIHRoZSBBY3Rpb25DYWJsZS5TdWJzY3JpcHRpb25zIGluc3RhbmNlIGF2YWlsYWJsZSBvbiB0aGUgY29uc3VtZXIuXG4vLyBJdCBwcm92aWRlcyBhIG51bWJlciBvZiBjYWxsYmFja3MgYW5kIGEgbWV0aG9kIGZvciBjYWxsaW5nIHJlbW90ZSBwcm9jZWR1cmUgY2FsbHMgb24gdGhlIGNvcnJlc3BvbmRpbmdcbi8vIENoYW5uZWwgaW5zdGFuY2Ugb24gdGhlIHNlcnZlciBzaWRlLlxuLy9cbi8vIEFuIGV4YW1wbGUgZGVtb25zdHJhdGVzIHRoZSBiYXNpYyBmdW5jdGlvbmFsaXR5OlxuLy9cbi8vICAgQXBwLmFwcGVhcmFuY2UgPSBBcHAuY2FibGUuc3Vic2NyaXB0aW9ucy5jcmVhdGUoXCJBcHBlYXJhbmNlQ2hhbm5lbFwiLCB7XG4vLyAgICAgY29ubmVjdGVkKCkge1xuLy8gICAgICAgLy8gQ2FsbGVkIG9uY2UgdGhlIHN1YnNjcmlwdGlvbiBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgY29tcGxldGVkXG4vLyAgICAgfSxcbi8vXG4vLyAgICAgZGlzY29ubmVjdGVkKHsgd2lsbEF0dGVtcHRSZWNvbm5lY3Q6IGJvb2xlYW4gfSkge1xuLy8gICAgICAgLy8gQ2FsbGVkIHdoZW4gdGhlIGNsaWVudCBoYXMgZGlzY29ubmVjdGVkIHdpdGggdGhlIHNlcnZlci5cbi8vICAgICAgIC8vIFRoZSBvYmplY3Qgd2lsbCBoYXZlIGFuIGB3aWxsQXR0ZW1wdFJlY29ubmVjdGAgcHJvcGVydHkgd2hpY2hcbi8vICAgICAgIC8vIHNheXMgd2hldGhlciB0aGUgY2xpZW50IGhhcyB0aGUgaW50ZW50aW9uIG9mIGF0dGVtcHRpbmdcbi8vICAgICAgIC8vIHRvIHJlY29ubmVjdC5cbi8vICAgICB9LFxuLy9cbi8vICAgICBhcHBlYXIoKSB7XG4vLyAgICAgICB0aGlzLnBlcmZvcm0oJ2FwcGVhcicsIHthcHBlYXJpbmdfb246IHRoaXMuYXBwZWFyaW5nT24oKX0pXG4vLyAgICAgfSxcbi8vXG4vLyAgICAgYXdheSgpIHtcbi8vICAgICAgIHRoaXMucGVyZm9ybSgnYXdheScpXG4vLyAgICAgfSxcbi8vXG4vLyAgICAgYXBwZWFyaW5nT24oKSB7XG4vLyAgICAgICAkKCdtYWluJykuZGF0YSgnYXBwZWFyaW5nLW9uJylcbi8vICAgICB9XG4vLyAgIH0pXG4vL1xuLy8gVGhlIG1ldGhvZHMgI2FwcGVhciBhbmQgI2F3YXkgZm9yd2FyZCB0aGVpciBpbnRlbnQgdG8gdGhlIHJlbW90ZSBBcHBlYXJhbmNlQ2hhbm5lbCBpbnN0YW5jZSBvbiB0aGUgc2VydmVyXG4vLyBieSBjYWxsaW5nIHRoZSBgcGVyZm9ybWAgbWV0aG9kIHdpdGggdGhlIGZpcnN0IHBhcmFtZXRlciBiZWluZyB0aGUgYWN0aW9uICh3aGljaCBtYXBzIHRvIEFwcGVhcmFuY2VDaGFubmVsI2FwcGVhci9hd2F5KS5cbi8vIFRoZSBzZWNvbmQgcGFyYW1ldGVyIGlzIGEgaGFzaCB0aGF0J2xsIGdldCBKU09OIGVuY29kZWQgYW5kIG1hZGUgYXZhaWxhYmxlIG9uIHRoZSBzZXJ2ZXIgaW4gdGhlIGRhdGEgcGFyYW1ldGVyLlxuLy9cbi8vIFRoaXMgaXMgaG93IHRoZSBzZXJ2ZXIgY29tcG9uZW50IHdvdWxkIGxvb2s6XG4vL1xuLy8gICBjbGFzcyBBcHBlYXJhbmNlQ2hhbm5lbCA8IEFwcGxpY2F0aW9uQWN0aW9uQ2FibGU6OkNoYW5uZWxcbi8vICAgICBkZWYgc3Vic2NyaWJlZFxuLy8gICAgICAgY3VycmVudF91c2VyLmFwcGVhclxuLy8gICAgIGVuZFxuLy9cbi8vICAgICBkZWYgdW5zdWJzY3JpYmVkXG4vLyAgICAgICBjdXJyZW50X3VzZXIuZGlzYXBwZWFyXG4vLyAgICAgZW5kXG4vL1xuLy8gICAgIGRlZiBhcHBlYXIoZGF0YSlcbi8vICAgICAgIGN1cnJlbnRfdXNlci5hcHBlYXIgb246IGRhdGFbJ2FwcGVhcmluZ19vbiddXG4vLyAgICAgZW5kXG4vL1xuLy8gICAgIGRlZiBhd2F5XG4vLyAgICAgICBjdXJyZW50X3VzZXIuYXdheVxuLy8gICAgIGVuZFxuLy8gICBlbmRcbi8vXG4vLyBUaGUgXCJBcHBlYXJhbmNlQ2hhbm5lbFwiIG5hbWUgaXMgYXV0b21hdGljYWxseSBtYXBwZWQgYmV0d2VlbiB0aGUgY2xpZW50LXNpZGUgc3Vic2NyaXB0aW9uIGNyZWF0aW9uIGFuZCB0aGUgc2VydmVyLXNpZGUgUnVieSBjbGFzcyBuYW1lLlxuLy8gVGhlIEFwcGVhcmFuY2VDaGFubmVsI2FwcGVhci9hd2F5IHB1YmxpYyBtZXRob2RzIGFyZSBleHBvc2VkIGF1dG9tYXRpY2FsbHkgdG8gY2xpZW50LXNpZGUgaW52b2NhdGlvbiB0aHJvdWdoIHRoZSBwZXJmb3JtIG1ldGhvZC5cblxuY29uc3QgZXh0ZW5kID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0aWVzKSB7XG4gIGlmIChwcm9wZXJ0aWVzICE9IG51bGwpIHtcbiAgICBmb3IgKGxldCBrZXkgaW4gcHJvcGVydGllcykge1xuICAgICAgY29uc3QgdmFsdWUgPSBwcm9wZXJ0aWVzW2tleV1cbiAgICAgIG9iamVjdFtrZXldID0gdmFsdWVcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9iamVjdFxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdWJzY3JpcHRpb24ge1xuICBjb25zdHJ1Y3Rvcihjb25zdW1lciwgcGFyYW1zID0ge30sIG1peGluKSB7XG4gICAgdGhpcy5jb25zdW1lciA9IGNvbnN1bWVyXG4gICAgdGhpcy5pZGVudGlmaWVyID0gSlNPTi5zdHJpbmdpZnkocGFyYW1zKVxuICAgIGV4dGVuZCh0aGlzLCBtaXhpbilcbiAgfVxuXG4gIC8vIFBlcmZvcm0gYSBjaGFubmVsIGFjdGlvbiB3aXRoIHRoZSBvcHRpb25hbCBkYXRhIHBhc3NlZCBhcyBhbiBhdHRyaWJ1dGVcbiAgcGVyZm9ybShhY3Rpb24sIGRhdGEgPSB7fSkge1xuICAgIGRhdGEuYWN0aW9uID0gYWN0aW9uXG4gICAgcmV0dXJuIHRoaXMuc2VuZChkYXRhKVxuICB9XG5cbiAgc2VuZChkYXRhKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uc3VtZXIuc2VuZCh7Y29tbWFuZDogXCJtZXNzYWdlXCIsIGlkZW50aWZpZXI6IHRoaXMuaWRlbnRpZmllciwgZGF0YTogSlNPTi5zdHJpbmdpZnkoZGF0YSl9KVxuICB9XG5cbiAgdW5zdWJzY3JpYmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uc3VtZXIuc3Vic2NyaXB0aW9ucy5yZW1vdmUodGhpcylcbiAgfVxufVxuIiwgImltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyXCJcblxuLy8gUmVzcG9uc2libGUgZm9yIGVuc3VyaW5nIGNoYW5uZWwgc3Vic2NyaWJlIGNvbW1hbmQgaXMgY29uZmlybWVkLCByZXRyeWluZyB1bnRpbCBjb25maXJtYXRpb24gaXMgcmVjZWl2ZWQuXG4vLyBJbnRlcm5hbCBjbGFzcywgbm90IGludGVuZGVkIGZvciBkaXJlY3QgdXNlciBtYW5pcHVsYXRpb24uXG5cbmNsYXNzIFN1YnNjcmlwdGlvbkd1YXJhbnRvciB7XG4gIGNvbnN0cnVjdG9yKHN1YnNjcmlwdGlvbnMpIHtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBzdWJzY3JpcHRpb25zXG4gICAgdGhpcy5wZW5kaW5nU3Vic2NyaXB0aW9ucyA9IFtdXG4gIH1cblxuICBndWFyYW50ZWUoc3Vic2NyaXB0aW9uKSB7XG4gICAgaWYodGhpcy5wZW5kaW5nU3Vic2NyaXB0aW9ucy5pbmRleE9mKHN1YnNjcmlwdGlvbikgPT0gLTEpeyBcbiAgICAgIGxvZ2dlci5sb2coYFN1YnNjcmlwdGlvbkd1YXJhbnRvciBndWFyYW50ZWVpbmcgJHtzdWJzY3JpcHRpb24uaWRlbnRpZmllcn1gKVxuICAgICAgdGhpcy5wZW5kaW5nU3Vic2NyaXB0aW9ucy5wdXNoKHN1YnNjcmlwdGlvbikgXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgbG9nZ2VyLmxvZyhgU3Vic2NyaXB0aW9uR3VhcmFudG9yIGFscmVhZHkgZ3VhcmFudGVlaW5nICR7c3Vic2NyaXB0aW9uLmlkZW50aWZpZXJ9YClcbiAgICB9XG4gICAgdGhpcy5zdGFydEd1YXJhbnRlZWluZygpXG4gIH1cblxuICBmb3JnZXQoc3Vic2NyaXB0aW9uKSB7XG4gICAgbG9nZ2VyLmxvZyhgU3Vic2NyaXB0aW9uR3VhcmFudG9yIGZvcmdldHRpbmcgJHtzdWJzY3JpcHRpb24uaWRlbnRpZmllcn1gKVxuICAgIHRoaXMucGVuZGluZ1N1YnNjcmlwdGlvbnMgPSAodGhpcy5wZW5kaW5nU3Vic2NyaXB0aW9ucy5maWx0ZXIoKHMpID0+IHMgIT09IHN1YnNjcmlwdGlvbikpXG4gIH1cblxuICBzdGFydEd1YXJhbnRlZWluZygpIHtcbiAgICB0aGlzLnN0b3BHdWFyYW50ZWVpbmcoKVxuICAgIHRoaXMucmV0cnlTdWJzY3JpYmluZygpXG4gIH1cbiAgXG4gIHN0b3BHdWFyYW50ZWVpbmcoKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMucmV0cnlUaW1lb3V0KVxuICB9XG5cbiAgcmV0cnlTdWJzY3JpYmluZygpIHtcbiAgICB0aGlzLnJldHJ5VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9ucyAmJiB0eXBlb2YodGhpcy5zdWJzY3JpcHRpb25zLnN1YnNjcmliZSkgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aGlzLnBlbmRpbmdTdWJzY3JpcHRpb25zLm1hcCgoc3Vic2NyaXB0aW9uKSA9PiB7XG4gICAgICAgICAgbG9nZ2VyLmxvZyhgU3Vic2NyaXB0aW9uR3VhcmFudG9yIHJlc3Vic2NyaWJpbmcgJHtzdWJzY3JpcHRpb24uaWRlbnRpZmllcn1gKVxuICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5zdWJzY3JpYmUoc3Vic2NyaXB0aW9uKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICAsIDUwMClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTdWJzY3JpcHRpb25HdWFyYW50b3IiLCAiaW1wb3J0IFN1YnNjcmlwdGlvbiBmcm9tIFwiLi9zdWJzY3JpcHRpb25cIlxuaW1wb3J0IFN1YnNjcmlwdGlvbkd1YXJhbnRvciBmcm9tIFwiLi9zdWJzY3JpcHRpb25fZ3VhcmFudG9yXCJcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyXCJcblxuLy8gQ29sbGVjdGlvbiBjbGFzcyBmb3IgY3JlYXRpbmcgKGFuZCBpbnRlcm5hbGx5IG1hbmFnaW5nKSBjaGFubmVsIHN1YnNjcmlwdGlvbnMuXG4vLyBUaGUgb25seSBtZXRob2QgaW50ZW5kZWQgdG8gYmUgdHJpZ2dlcmVkIGJ5IHRoZSB1c2VyIGlzIEFjdGlvbkNhYmxlLlN1YnNjcmlwdGlvbnMjY3JlYXRlLFxuLy8gYW5kIGl0IHNob3VsZCBiZSBjYWxsZWQgdGhyb3VnaCB0aGUgY29uc3VtZXIgbGlrZSBzbzpcbi8vXG4vLyAgIEFwcCA9IHt9XG4vLyAgIEFwcC5jYWJsZSA9IEFjdGlvbkNhYmxlLmNyZWF0ZUNvbnN1bWVyKFwid3M6Ly9leGFtcGxlLmNvbS9hY2NvdW50cy8xXCIpXG4vLyAgIEFwcC5hcHBlYXJhbmNlID0gQXBwLmNhYmxlLnN1YnNjcmlwdGlvbnMuY3JlYXRlKFwiQXBwZWFyYW5jZUNoYW5uZWxcIilcbi8vXG4vLyBGb3IgbW9yZSBkZXRhaWxzIG9uIGhvdyB5b3UnZCBjb25maWd1cmUgYW4gYWN0dWFsIGNoYW5uZWwgc3Vic2NyaXB0aW9uLCBzZWUgQWN0aW9uQ2FibGUuU3Vic2NyaXB0aW9uLlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdWJzY3JpcHRpb25zIHtcbiAgY29uc3RydWN0b3IoY29uc3VtZXIpIHtcbiAgICB0aGlzLmNvbnN1bWVyID0gY29uc3VtZXJcbiAgICB0aGlzLmd1YXJhbnRvciA9IG5ldyBTdWJzY3JpcHRpb25HdWFyYW50b3IodGhpcylcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBbXVxuICB9XG5cbiAgY3JlYXRlKGNoYW5uZWxOYW1lLCBtaXhpbikge1xuICAgIGNvbnN0IGNoYW5uZWwgPSBjaGFubmVsTmFtZVxuICAgIGNvbnN0IHBhcmFtcyA9IHR5cGVvZiBjaGFubmVsID09PSBcIm9iamVjdFwiID8gY2hhbm5lbCA6IHtjaGFubmVsfVxuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24odGhpcy5jb25zdW1lciwgcGFyYW1zLCBtaXhpbilcbiAgICByZXR1cm4gdGhpcy5hZGQoc3Vic2NyaXB0aW9uKVxuICB9XG5cbiAgLy8gUHJpdmF0ZVxuXG4gIGFkZChzdWJzY3JpcHRpb24pIHtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChzdWJzY3JpcHRpb24pXG4gICAgdGhpcy5jb25zdW1lci5lbnN1cmVBY3RpdmVDb25uZWN0aW9uKClcbiAgICB0aGlzLm5vdGlmeShzdWJzY3JpcHRpb24sIFwiaW5pdGlhbGl6ZWRcIilcbiAgICB0aGlzLnN1YnNjcmliZShzdWJzY3JpcHRpb24pXG4gICAgcmV0dXJuIHN1YnNjcmlwdGlvblxuICB9XG5cbiAgcmVtb3ZlKHN1YnNjcmlwdGlvbikge1xuICAgIHRoaXMuZm9yZ2V0KHN1YnNjcmlwdGlvbilcbiAgICBpZiAoIXRoaXMuZmluZEFsbChzdWJzY3JpcHRpb24uaWRlbnRpZmllcikubGVuZ3RoKSB7XG4gICAgICB0aGlzLnNlbmRDb21tYW5kKHN1YnNjcmlwdGlvbiwgXCJ1bnN1YnNjcmliZVwiKVxuICAgIH1cbiAgICByZXR1cm4gc3Vic2NyaXB0aW9uXG4gIH1cblxuICByZWplY3QoaWRlbnRpZmllcikge1xuICAgIHJldHVybiB0aGlzLmZpbmRBbGwoaWRlbnRpZmllcikubWFwKChzdWJzY3JpcHRpb24pID0+IHtcbiAgICAgIHRoaXMuZm9yZ2V0KHN1YnNjcmlwdGlvbilcbiAgICAgIHRoaXMubm90aWZ5KHN1YnNjcmlwdGlvbiwgXCJyZWplY3RlZFwiKVxuICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvblxuICAgIH0pXG4gIH1cblxuICBmb3JnZXQoc3Vic2NyaXB0aW9uKSB7XG4gICAgdGhpcy5ndWFyYW50b3IuZm9yZ2V0KHN1YnNjcmlwdGlvbilcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSAodGhpcy5zdWJzY3JpcHRpb25zLmZpbHRlcigocykgPT4gcyAhPT0gc3Vic2NyaXB0aW9uKSlcbiAgICByZXR1cm4gc3Vic2NyaXB0aW9uXG4gIH1cblxuICBmaW5kQWxsKGlkZW50aWZpZXIpIHtcbiAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25zLmZpbHRlcigocykgPT4gcy5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKVxuICB9XG5cbiAgcmVsb2FkKCkge1xuICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbnMubWFwKChzdWJzY3JpcHRpb24pID0+XG4gICAgICB0aGlzLnN1YnNjcmliZShzdWJzY3JpcHRpb24pKVxuICB9XG5cbiAgbm90aWZ5QWxsKGNhbGxiYWNrTmFtZSwgLi4uYXJncykge1xuICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbnMubWFwKChzdWJzY3JpcHRpb24pID0+XG4gICAgICB0aGlzLm5vdGlmeShzdWJzY3JpcHRpb24sIGNhbGxiYWNrTmFtZSwgLi4uYXJncykpXG4gIH1cblxuICBub3RpZnkoc3Vic2NyaXB0aW9uLCBjYWxsYmFja05hbWUsIC4uLmFyZ3MpIHtcbiAgICBsZXQgc3Vic2NyaXB0aW9uc1xuICAgIGlmICh0eXBlb2Ygc3Vic2NyaXB0aW9uID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBzdWJzY3JpcHRpb25zID0gdGhpcy5maW5kQWxsKHN1YnNjcmlwdGlvbilcbiAgICB9IGVsc2Uge1xuICAgICAgc3Vic2NyaXB0aW9ucyA9IFtzdWJzY3JpcHRpb25dXG4gICAgfVxuXG4gICAgcmV0dXJuIHN1YnNjcmlwdGlvbnMubWFwKChzdWJzY3JpcHRpb24pID0+XG4gICAgICAodHlwZW9mIHN1YnNjcmlwdGlvbltjYWxsYmFja05hbWVdID09PSBcImZ1bmN0aW9uXCIgPyBzdWJzY3JpcHRpb25bY2FsbGJhY2tOYW1lXSguLi5hcmdzKSA6IHVuZGVmaW5lZCkpXG4gIH1cblxuICBzdWJzY3JpYmUoc3Vic2NyaXB0aW9uKSB7XG4gICAgaWYgKHRoaXMuc2VuZENvbW1hbmQoc3Vic2NyaXB0aW9uLCBcInN1YnNjcmliZVwiKSkge1xuICAgICAgdGhpcy5ndWFyYW50b3IuZ3VhcmFudGVlKHN1YnNjcmlwdGlvbilcbiAgICB9XG4gIH1cblxuICBjb25maXJtU3Vic2NyaXB0aW9uKGlkZW50aWZpZXIpIHtcbiAgICBsb2dnZXIubG9nKGBTdWJzY3JpcHRpb24gY29uZmlybWVkICR7aWRlbnRpZmllcn1gKVxuICAgIHRoaXMuZmluZEFsbChpZGVudGlmaWVyKS5tYXAoKHN1YnNjcmlwdGlvbikgPT5cbiAgICAgIHRoaXMuZ3VhcmFudG9yLmZvcmdldChzdWJzY3JpcHRpb24pKVxuICB9XG5cbiAgc2VuZENvbW1hbmQoc3Vic2NyaXB0aW9uLCBjb21tYW5kKSB7XG4gICAgY29uc3Qge2lkZW50aWZpZXJ9ID0gc3Vic2NyaXB0aW9uXG4gICAgcmV0dXJuIHRoaXMuY29uc3VtZXIuc2VuZCh7Y29tbWFuZCwgaWRlbnRpZmllcn0pXG4gIH1cbn1cbiIsICJpbXBvcnQgQ29ubmVjdGlvbiBmcm9tIFwiLi9jb25uZWN0aW9uXCJcbmltcG9ydCBTdWJzY3JpcHRpb25zIGZyb20gXCIuL3N1YnNjcmlwdGlvbnNcIlxuXG4vLyBUaGUgQWN0aW9uQ2FibGUuQ29uc3VtZXIgZXN0YWJsaXNoZXMgdGhlIGNvbm5lY3Rpb24gdG8gYSBzZXJ2ZXItc2lkZSBSdWJ5IENvbm5lY3Rpb24gb2JqZWN0LiBPbmNlIGVzdGFibGlzaGVkLFxuLy8gdGhlIEFjdGlvbkNhYmxlLkNvbm5lY3Rpb25Nb25pdG9yIHdpbGwgZW5zdXJlIHRoYXQgaXRzIHByb3Blcmx5IG1haW50YWluZWQgdGhyb3VnaCBoZWFydGJlYXRzIGFuZCBjaGVja2luZyBmb3Igc3RhbGUgdXBkYXRlcy5cbi8vIFRoZSBDb25zdW1lciBpbnN0YW5jZSBpcyBhbHNvIHRoZSBnYXRld2F5IHRvIGVzdGFibGlzaGluZyBzdWJzY3JpcHRpb25zIHRvIGRlc2lyZWQgY2hhbm5lbHMgdGhyb3VnaCB0aGUgI2NyZWF0ZVN1YnNjcmlwdGlvblxuLy8gbWV0aG9kLlxuLy9cbi8vIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBzaG93cyBob3cgdGhpcyBjYW4gYmUgc2V0IHVwOlxuLy9cbi8vICAgQXBwID0ge31cbi8vICAgQXBwLmNhYmxlID0gQWN0aW9uQ2FibGUuY3JlYXRlQ29uc3VtZXIoXCJ3czovL2V4YW1wbGUuY29tL2FjY291bnRzLzFcIilcbi8vICAgQXBwLmFwcGVhcmFuY2UgPSBBcHAuY2FibGUuc3Vic2NyaXB0aW9ucy5jcmVhdGUoXCJBcHBlYXJhbmNlQ2hhbm5lbFwiKVxuLy9cbi8vIEZvciBtb3JlIGRldGFpbHMgb24gaG93IHlvdSdkIGNvbmZpZ3VyZSBhbiBhY3R1YWwgY2hhbm5lbCBzdWJzY3JpcHRpb24sIHNlZSBBY3Rpb25DYWJsZS5TdWJzY3JpcHRpb24uXG4vL1xuLy8gV2hlbiBhIGNvbnN1bWVyIGlzIGNyZWF0ZWQsIGl0IGF1dG9tYXRpY2FsbHkgY29ubmVjdHMgd2l0aCB0aGUgc2VydmVyLlxuLy9cbi8vIFRvIGRpc2Nvbm5lY3QgZnJvbSB0aGUgc2VydmVyLCBjYWxsXG4vL1xuLy8gICBBcHAuY2FibGUuZGlzY29ubmVjdCgpXG4vL1xuLy8gYW5kIHRvIHJlc3RhcnQgdGhlIGNvbm5lY3Rpb246XG4vL1xuLy8gICBBcHAuY2FibGUuY29ubmVjdCgpXG4vL1xuLy8gQW55IGNoYW5uZWwgc3Vic2NyaXB0aW9ucyB3aGljaCBleGlzdGVkIHByaW9yIHRvIGRpc2Nvbm5lY3Rpbmcgd2lsbFxuLy8gYXV0b21hdGljYWxseSByZXN1YnNjcmliZS5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29uc3VtZXIge1xuICBjb25zdHJ1Y3Rvcih1cmwpIHtcbiAgICB0aGlzLl91cmwgPSB1cmxcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBuZXcgU3Vic2NyaXB0aW9ucyh0aGlzKVxuICAgIHRoaXMuY29ubmVjdGlvbiA9IG5ldyBDb25uZWN0aW9uKHRoaXMpXG4gICAgdGhpcy5zdWJwcm90b2NvbHMgPSBbXVxuICB9XG5cbiAgZ2V0IHVybCgpIHtcbiAgICByZXR1cm4gY3JlYXRlV2ViU29ja2V0VVJMKHRoaXMuX3VybClcbiAgfVxuXG4gIHNlbmQoZGF0YSkge1xuICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZChkYXRhKVxuICB9XG5cbiAgY29ubmVjdCgpIHtcbiAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLm9wZW4oKVxuICB9XG5cbiAgZGlzY29ubmVjdCgpIHtcbiAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLmNsb3NlKHthbGxvd1JlY29ubmVjdDogZmFsc2V9KVxuICB9XG5cbiAgZW5zdXJlQWN0aXZlQ29ubmVjdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuY29ubmVjdGlvbi5pc0FjdGl2ZSgpKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLm9wZW4oKVxuICAgIH1cbiAgfVxuXG4gIGFkZFN1YlByb3RvY29sKHN1YnByb3RvY29sKSB7XG4gICAgdGhpcy5zdWJwcm90b2NvbHMgPSBbLi4udGhpcy5zdWJwcm90b2NvbHMsIHN1YnByb3RvY29sXVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVXZWJTb2NrZXRVUkwodXJsKSB7XG4gIGlmICh0eXBlb2YgdXJsID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICB1cmwgPSB1cmwoKVxuICB9XG5cbiAgaWYgKHVybCAmJiAhL153c3M/Oi9pLnRlc3QodXJsKSkge1xuICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKVxuICAgIGEuaHJlZiA9IHVybFxuICAgIC8vIEZpeCBwb3B1bGF0aW5nIExvY2F0aW9uIHByb3BlcnRpZXMgaW4gSUUuIE90aGVyd2lzZSwgcHJvdG9jb2wgd2lsbCBiZSBibGFuay5cbiAgICBhLmhyZWYgPSBhLmhyZWYgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgIGEucHJvdG9jb2wgPSBhLnByb3RvY29sLnJlcGxhY2UoXCJodHRwXCIsIFwid3NcIilcbiAgICByZXR1cm4gYS5ocmVmXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHVybFxuICB9XG59XG4iLCAiaW1wb3J0IENvbm5lY3Rpb24gZnJvbSBcIi4vY29ubmVjdGlvblwiXG5pbXBvcnQgQ29ubmVjdGlvbk1vbml0b3IgZnJvbSBcIi4vY29ubmVjdGlvbl9tb25pdG9yXCJcbmltcG9ydCBDb25zdW1lciwgeyBjcmVhdGVXZWJTb2NrZXRVUkwgfSBmcm9tIFwiLi9jb25zdW1lclwiXG5pbXBvcnQgSU5URVJOQUwgZnJvbSBcIi4vaW50ZXJuYWxcIlxuaW1wb3J0IFN1YnNjcmlwdGlvbiBmcm9tIFwiLi9zdWJzY3JpcHRpb25cIlxuaW1wb3J0IFN1YnNjcmlwdGlvbnMgZnJvbSBcIi4vc3Vic2NyaXB0aW9uc1wiXG5pbXBvcnQgU3Vic2NyaXB0aW9uR3VhcmFudG9yIGZyb20gXCIuL3N1YnNjcmlwdGlvbl9ndWFyYW50b3JcIlxuaW1wb3J0IGFkYXB0ZXJzIGZyb20gXCIuL2FkYXB0ZXJzXCJcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyXCJcblxuZXhwb3J0IHtcbiAgQ29ubmVjdGlvbixcbiAgQ29ubmVjdGlvbk1vbml0b3IsXG4gIENvbnN1bWVyLFxuICBJTlRFUk5BTCxcbiAgU3Vic2NyaXB0aW9uLFxuICBTdWJzY3JpcHRpb25zLFxuICBTdWJzY3JpcHRpb25HdWFyYW50b3IsXG4gIGFkYXB0ZXJzLFxuICBjcmVhdGVXZWJTb2NrZXRVUkwsXG4gIGxvZ2dlcixcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNvbnN1bWVyKHVybCA9IGdldENvbmZpZyhcInVybFwiKSB8fCBJTlRFUk5BTC5kZWZhdWx0X21vdW50X3BhdGgpIHtcbiAgcmV0dXJuIG5ldyBDb25zdW1lcih1cmwpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb25maWcobmFtZSkge1xuICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuaGVhZC5xdWVyeVNlbGVjdG9yKGBtZXRhW25hbWU9J2FjdGlvbi1jYWJsZS0ke25hbWV9J11gKVxuICBpZiAoZWxlbWVudCkge1xuICAgIHJldHVybiBlbGVtZW50LmdldEF0dHJpYnV0ZShcImNvbnRlbnRcIilcbiAgfVxufVxuIiwgIi8qKlxuICogRm9ybURhdGEgUGF0Y2ggLSBJbmNsdWRlIGRpc2FibGVkIGZpZWxkc1xuICpcbiAqIEJyb3dzZXIgZGVmYXVsdDogZGlzYWJsZWQgZmllbGRzIGFyZSBOT1Qgc3VibWl0dGVkXG4gKiBUaGlzIHBhdGNoOiBkaXNhYmxlZCBmaWVsZHMgQVJFIHN1Ym1pdHRlZFxuICpcbiAqIFdoeTogQUkgbWF5IGRpc2FibGUgaW5wdXRzIGJlZm9yZSBmb3JtIHN1Ym1pc3Npb24sIGJyZWFraW5nIGZvcm0gZGF0YSBjb2xsZWN0aW9uLlxuICogVGhpcyBwYXRjaCBlbnN1cmVzIGRpc2FibGVkIGZpZWxkcyBhcmUgc3RpbGwgaW5jbHVkZWQgaW4gRm9ybURhdGEuXG4gKi9cblxuKGZ1bmN0aW9uKCkge1xuICBjb25zdCBPcmlnaW5hbEZvcm1EYXRhID0gd2luZG93LkZvcm1EYXRhO1xuXG4gIHdpbmRvdy5Gb3JtRGF0YSA9IGNsYXNzIFBhdGNoZWRGb3JtRGF0YSBleHRlbmRzIE9yaWdpbmFsRm9ybURhdGEge1xuICAgIGNvbnN0cnVjdG9yKGZvcm0/OiBIVE1MRm9ybUVsZW1lbnQpIHtcbiAgICAgIHN1cGVyKGZvcm0pO1xuXG4gICAgICBpZiAoZm9ybSkge1xuICAgICAgICAvLyBDb2xsZWN0IGRpc2FibGVkIGZpZWxkcyB0aGF0IHdvdWxkIG5vcm1hbGx5IGJlIGV4Y2x1ZGVkXG4gICAgICAgIGNvbnN0IGRpc2FibGVkRmllbGRzID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsPEhUTUxJbnB1dEVsZW1lbnQgfCBIVE1MVGV4dEFyZWFFbGVtZW50IHwgSFRNTFNlbGVjdEVsZW1lbnQ+KFxuICAgICAgICAgICdpbnB1dFtkaXNhYmxlZF1bbmFtZV0sIHRleHRhcmVhW2Rpc2FibGVkXVtuYW1lXSwgc2VsZWN0W2Rpc2FibGVkXVtuYW1lXSdcbiAgICAgICAgKTtcblxuICAgICAgICBkaXNhYmxlZEZpZWxkcy5mb3JFYWNoKGZpZWxkID0+IHtcbiAgICAgICAgICAvLyBPbmx5IGFkZCBpZiBmaWVsZCBoYXMgYSBuYW1lIGFuZCB3YXNuJ3QgYWxyZWFkeSBhZGRlZFxuICAgICAgICAgIGlmIChmaWVsZC5uYW1lICYmICF0aGlzLmhhcyhmaWVsZC5uYW1lKSkge1xuICAgICAgICAgICAgaWYgKGZpZWxkIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgICAvLyBIYW5kbGUgY2hlY2tib3hlcyBhbmQgcmFkaW9zXG4gICAgICAgICAgICAgIGlmICgoZmllbGQudHlwZSA9PT0gJ2NoZWNrYm94JyB8fCBmaWVsZC50eXBlID09PSAncmFkaW8nKSAmJiAhZmllbGQuY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjsgLy8gU2tpcCB1bmNoZWNrZWQgY2hlY2tib3hlcy9yYWRpb3NcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIEhhbmRsZSBmaWxlIGlucHV0c1xuICAgICAgICAgICAgICBpZiAoZmllbGQudHlwZSA9PT0gJ2ZpbGUnICYmIGZpZWxkLmZpbGVzKSB7XG4gICAgICAgICAgICAgICAgQXJyYXkuZnJvbShmaWVsZC5maWxlcykuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kKGZpZWxkLm5hbWUsIGZpbGUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgcmVndWxhciBmaWVsZCB2YWx1ZVxuICAgICAgICAgICAgdGhpcy5hcHBlbmQoZmllbGQubmFtZSwgZmllbGQudmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9IGFzIGFueTtcblxuICAvLyBQcmVzZXJ2ZSBzdGF0aWMgbWV0aG9kc1xuICBPYmplY3Quc2V0UHJvdG90eXBlT2Yod2luZG93LkZvcm1EYXRhLCBPcmlnaW5hbEZvcm1EYXRhKTtcbiAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHdpbmRvdy5Gb3JtRGF0YS5wcm90b3R5cGUsIE9yaWdpbmFsRm9ybURhdGEucHJvdG90eXBlKTtcbn0pKCk7XG4iLCAidmFyIHNwYXJrTWQ1ID0ge1xuICBleHBvcnRzOiB7fVxufTtcblxuKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuICAoZnVuY3Rpb24oZmFjdG9yeSkge1xuICAgIHtcbiAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICAgIH1cbiAgfSkoKGZ1bmN0aW9uKHVuZGVmaW5lZCQxKSB7XG4gICAgdmFyIGhleF9jaHIgPSBbIFwiMFwiLCBcIjFcIiwgXCIyXCIsIFwiM1wiLCBcIjRcIiwgXCI1XCIsIFwiNlwiLCBcIjdcIiwgXCI4XCIsIFwiOVwiLCBcImFcIiwgXCJiXCIsIFwiY1wiLCBcImRcIiwgXCJlXCIsIFwiZlwiIF07XG4gICAgZnVuY3Rpb24gbWQ1Y3ljbGUoeCwgaykge1xuICAgICAgdmFyIGEgPSB4WzBdLCBiID0geFsxXSwgYyA9IHhbMl0sIGQgPSB4WzNdO1xuICAgICAgYSArPSAoYiAmIGMgfCB+YiAmIGQpICsga1swXSAtIDY4MDg3NjkzNiB8IDA7XG4gICAgICBhID0gKGEgPDwgNyB8IGEgPj4+IDI1KSArIGIgfCAwO1xuICAgICAgZCArPSAoYSAmIGIgfCB+YSAmIGMpICsga1sxXSAtIDM4OTU2NDU4NiB8IDA7XG4gICAgICBkID0gKGQgPDwgMTIgfCBkID4+PiAyMCkgKyBhIHwgMDtcbiAgICAgIGMgKz0gKGQgJiBhIHwgfmQgJiBiKSArIGtbMl0gKyA2MDYxMDU4MTkgfCAwO1xuICAgICAgYyA9IChjIDw8IDE3IHwgYyA+Pj4gMTUpICsgZCB8IDA7XG4gICAgICBiICs9IChjICYgZCB8IH5jICYgYSkgKyBrWzNdIC0gMTA0NDUyNTMzMCB8IDA7XG4gICAgICBiID0gKGIgPDwgMjIgfCBiID4+PiAxMCkgKyBjIHwgMDtcbiAgICAgIGEgKz0gKGIgJiBjIHwgfmIgJiBkKSArIGtbNF0gLSAxNzY0MTg4OTcgfCAwO1xuICAgICAgYSA9IChhIDw8IDcgfCBhID4+PiAyNSkgKyBiIHwgMDtcbiAgICAgIGQgKz0gKGEgJiBiIHwgfmEgJiBjKSArIGtbNV0gKyAxMjAwMDgwNDI2IHwgMDtcbiAgICAgIGQgPSAoZCA8PCAxMiB8IGQgPj4+IDIwKSArIGEgfCAwO1xuICAgICAgYyArPSAoZCAmIGEgfCB+ZCAmIGIpICsga1s2XSAtIDE0NzMyMzEzNDEgfCAwO1xuICAgICAgYyA9IChjIDw8IDE3IHwgYyA+Pj4gMTUpICsgZCB8IDA7XG4gICAgICBiICs9IChjICYgZCB8IH5jICYgYSkgKyBrWzddIC0gNDU3MDU5ODMgfCAwO1xuICAgICAgYiA9IChiIDw8IDIyIHwgYiA+Pj4gMTApICsgYyB8IDA7XG4gICAgICBhICs9IChiICYgYyB8IH5iICYgZCkgKyBrWzhdICsgMTc3MDAzNTQxNiB8IDA7XG4gICAgICBhID0gKGEgPDwgNyB8IGEgPj4+IDI1KSArIGIgfCAwO1xuICAgICAgZCArPSAoYSAmIGIgfCB+YSAmIGMpICsga1s5XSAtIDE5NTg0MTQ0MTcgfCAwO1xuICAgICAgZCA9IChkIDw8IDEyIHwgZCA+Pj4gMjApICsgYSB8IDA7XG4gICAgICBjICs9IChkICYgYSB8IH5kICYgYikgKyBrWzEwXSAtIDQyMDYzIHwgMDtcbiAgICAgIGMgPSAoYyA8PCAxNyB8IGMgPj4+IDE1KSArIGQgfCAwO1xuICAgICAgYiArPSAoYyAmIGQgfCB+YyAmIGEpICsga1sxMV0gLSAxOTkwNDA0MTYyIHwgMDtcbiAgICAgIGIgPSAoYiA8PCAyMiB8IGIgPj4+IDEwKSArIGMgfCAwO1xuICAgICAgYSArPSAoYiAmIGMgfCB+YiAmIGQpICsga1sxMl0gKyAxODA0NjAzNjgyIHwgMDtcbiAgICAgIGEgPSAoYSA8PCA3IHwgYSA+Pj4gMjUpICsgYiB8IDA7XG4gICAgICBkICs9IChhICYgYiB8IH5hICYgYykgKyBrWzEzXSAtIDQwMzQxMTAxIHwgMDtcbiAgICAgIGQgPSAoZCA8PCAxMiB8IGQgPj4+IDIwKSArIGEgfCAwO1xuICAgICAgYyArPSAoZCAmIGEgfCB+ZCAmIGIpICsga1sxNF0gLSAxNTAyMDAyMjkwIHwgMDtcbiAgICAgIGMgPSAoYyA8PCAxNyB8IGMgPj4+IDE1KSArIGQgfCAwO1xuICAgICAgYiArPSAoYyAmIGQgfCB+YyAmIGEpICsga1sxNV0gKyAxMjM2NTM1MzI5IHwgMDtcbiAgICAgIGIgPSAoYiA8PCAyMiB8IGIgPj4+IDEwKSArIGMgfCAwO1xuICAgICAgYSArPSAoYiAmIGQgfCBjICYgfmQpICsga1sxXSAtIDE2NTc5NjUxMCB8IDA7XG4gICAgICBhID0gKGEgPDwgNSB8IGEgPj4+IDI3KSArIGIgfCAwO1xuICAgICAgZCArPSAoYSAmIGMgfCBiICYgfmMpICsga1s2XSAtIDEwNjk1MDE2MzIgfCAwO1xuICAgICAgZCA9IChkIDw8IDkgfCBkID4+PiAyMykgKyBhIHwgMDtcbiAgICAgIGMgKz0gKGQgJiBiIHwgYSAmIH5iKSArIGtbMTFdICsgNjQzNzE3NzEzIHwgMDtcbiAgICAgIGMgPSAoYyA8PCAxNCB8IGMgPj4+IDE4KSArIGQgfCAwO1xuICAgICAgYiArPSAoYyAmIGEgfCBkICYgfmEpICsga1swXSAtIDM3Mzg5NzMwMiB8IDA7XG4gICAgICBiID0gKGIgPDwgMjAgfCBiID4+PiAxMikgKyBjIHwgMDtcbiAgICAgIGEgKz0gKGIgJiBkIHwgYyAmIH5kKSArIGtbNV0gLSA3MDE1NTg2OTEgfCAwO1xuICAgICAgYSA9IChhIDw8IDUgfCBhID4+PiAyNykgKyBiIHwgMDtcbiAgICAgIGQgKz0gKGEgJiBjIHwgYiAmIH5jKSArIGtbMTBdICsgMzgwMTYwODMgfCAwO1xuICAgICAgZCA9IChkIDw8IDkgfCBkID4+PiAyMykgKyBhIHwgMDtcbiAgICAgIGMgKz0gKGQgJiBiIHwgYSAmIH5iKSArIGtbMTVdIC0gNjYwNDc4MzM1IHwgMDtcbiAgICAgIGMgPSAoYyA8PCAxNCB8IGMgPj4+IDE4KSArIGQgfCAwO1xuICAgICAgYiArPSAoYyAmIGEgfCBkICYgfmEpICsga1s0XSAtIDQwNTUzNzg0OCB8IDA7XG4gICAgICBiID0gKGIgPDwgMjAgfCBiID4+PiAxMikgKyBjIHwgMDtcbiAgICAgIGEgKz0gKGIgJiBkIHwgYyAmIH5kKSArIGtbOV0gKyA1Njg0NDY0MzggfCAwO1xuICAgICAgYSA9IChhIDw8IDUgfCBhID4+PiAyNykgKyBiIHwgMDtcbiAgICAgIGQgKz0gKGEgJiBjIHwgYiAmIH5jKSArIGtbMTRdIC0gMTAxOTgwMzY5MCB8IDA7XG4gICAgICBkID0gKGQgPDwgOSB8IGQgPj4+IDIzKSArIGEgfCAwO1xuICAgICAgYyArPSAoZCAmIGIgfCBhICYgfmIpICsga1szXSAtIDE4NzM2Mzk2MSB8IDA7XG4gICAgICBjID0gKGMgPDwgMTQgfCBjID4+PiAxOCkgKyBkIHwgMDtcbiAgICAgIGIgKz0gKGMgJiBhIHwgZCAmIH5hKSArIGtbOF0gKyAxMTYzNTMxNTAxIHwgMDtcbiAgICAgIGIgPSAoYiA8PCAyMCB8IGIgPj4+IDEyKSArIGMgfCAwO1xuICAgICAgYSArPSAoYiAmIGQgfCBjICYgfmQpICsga1sxM10gLSAxNDQ0NjgxNDY3IHwgMDtcbiAgICAgIGEgPSAoYSA8PCA1IHwgYSA+Pj4gMjcpICsgYiB8IDA7XG4gICAgICBkICs9IChhICYgYyB8IGIgJiB+YykgKyBrWzJdIC0gNTE0MDM3ODQgfCAwO1xuICAgICAgZCA9IChkIDw8IDkgfCBkID4+PiAyMykgKyBhIHwgMDtcbiAgICAgIGMgKz0gKGQgJiBiIHwgYSAmIH5iKSArIGtbN10gKyAxNzM1MzI4NDczIHwgMDtcbiAgICAgIGMgPSAoYyA8PCAxNCB8IGMgPj4+IDE4KSArIGQgfCAwO1xuICAgICAgYiArPSAoYyAmIGEgfCBkICYgfmEpICsga1sxMl0gLSAxOTI2NjA3NzM0IHwgMDtcbiAgICAgIGIgPSAoYiA8PCAyMCB8IGIgPj4+IDEyKSArIGMgfCAwO1xuICAgICAgYSArPSAoYiBeIGMgXiBkKSArIGtbNV0gLSAzNzg1NTggfCAwO1xuICAgICAgYSA9IChhIDw8IDQgfCBhID4+PiAyOCkgKyBiIHwgMDtcbiAgICAgIGQgKz0gKGEgXiBiIF4gYykgKyBrWzhdIC0gMjAyMjU3NDQ2MyB8IDA7XG4gICAgICBkID0gKGQgPDwgMTEgfCBkID4+PiAyMSkgKyBhIHwgMDtcbiAgICAgIGMgKz0gKGQgXiBhIF4gYikgKyBrWzExXSArIDE4MzkwMzA1NjIgfCAwO1xuICAgICAgYyA9IChjIDw8IDE2IHwgYyA+Pj4gMTYpICsgZCB8IDA7XG4gICAgICBiICs9IChjIF4gZCBeIGEpICsga1sxNF0gLSAzNTMwOTU1NiB8IDA7XG4gICAgICBiID0gKGIgPDwgMjMgfCBiID4+PiA5KSArIGMgfCAwO1xuICAgICAgYSArPSAoYiBeIGMgXiBkKSArIGtbMV0gLSAxNTMwOTkyMDYwIHwgMDtcbiAgICAgIGEgPSAoYSA8PCA0IHwgYSA+Pj4gMjgpICsgYiB8IDA7XG4gICAgICBkICs9IChhIF4gYiBeIGMpICsga1s0XSArIDEyNzI4OTMzNTMgfCAwO1xuICAgICAgZCA9IChkIDw8IDExIHwgZCA+Pj4gMjEpICsgYSB8IDA7XG4gICAgICBjICs9IChkIF4gYSBeIGIpICsga1s3XSAtIDE1NTQ5NzYzMiB8IDA7XG4gICAgICBjID0gKGMgPDwgMTYgfCBjID4+PiAxNikgKyBkIHwgMDtcbiAgICAgIGIgKz0gKGMgXiBkIF4gYSkgKyBrWzEwXSAtIDEwOTQ3MzA2NDAgfCAwO1xuICAgICAgYiA9IChiIDw8IDIzIHwgYiA+Pj4gOSkgKyBjIHwgMDtcbiAgICAgIGEgKz0gKGIgXiBjIF4gZCkgKyBrWzEzXSArIDY4MTI3OTE3NCB8IDA7XG4gICAgICBhID0gKGEgPDwgNCB8IGEgPj4+IDI4KSArIGIgfCAwO1xuICAgICAgZCArPSAoYSBeIGIgXiBjKSArIGtbMF0gLSAzNTg1MzcyMjIgfCAwO1xuICAgICAgZCA9IChkIDw8IDExIHwgZCA+Pj4gMjEpICsgYSB8IDA7XG4gICAgICBjICs9IChkIF4gYSBeIGIpICsga1szXSAtIDcyMjUyMTk3OSB8IDA7XG4gICAgICBjID0gKGMgPDwgMTYgfCBjID4+PiAxNikgKyBkIHwgMDtcbiAgICAgIGIgKz0gKGMgXiBkIF4gYSkgKyBrWzZdICsgNzYwMjkxODkgfCAwO1xuICAgICAgYiA9IChiIDw8IDIzIHwgYiA+Pj4gOSkgKyBjIHwgMDtcbiAgICAgIGEgKz0gKGIgXiBjIF4gZCkgKyBrWzldIC0gNjQwMzY0NDg3IHwgMDtcbiAgICAgIGEgPSAoYSA8PCA0IHwgYSA+Pj4gMjgpICsgYiB8IDA7XG4gICAgICBkICs9IChhIF4gYiBeIGMpICsga1sxMl0gLSA0MjE4MTU4MzUgfCAwO1xuICAgICAgZCA9IChkIDw8IDExIHwgZCA+Pj4gMjEpICsgYSB8IDA7XG4gICAgICBjICs9IChkIF4gYSBeIGIpICsga1sxNV0gKyA1MzA3NDI1MjAgfCAwO1xuICAgICAgYyA9IChjIDw8IDE2IHwgYyA+Pj4gMTYpICsgZCB8IDA7XG4gICAgICBiICs9IChjIF4gZCBeIGEpICsga1syXSAtIDk5NTMzODY1MSB8IDA7XG4gICAgICBiID0gKGIgPDwgMjMgfCBiID4+PiA5KSArIGMgfCAwO1xuICAgICAgYSArPSAoYyBeIChiIHwgfmQpKSArIGtbMF0gLSAxOTg2MzA4NDQgfCAwO1xuICAgICAgYSA9IChhIDw8IDYgfCBhID4+PiAyNikgKyBiIHwgMDtcbiAgICAgIGQgKz0gKGIgXiAoYSB8IH5jKSkgKyBrWzddICsgMTEyNjg5MTQxNSB8IDA7XG4gICAgICBkID0gKGQgPDwgMTAgfCBkID4+PiAyMikgKyBhIHwgMDtcbiAgICAgIGMgKz0gKGEgXiAoZCB8IH5iKSkgKyBrWzE0XSAtIDE0MTYzNTQ5MDUgfCAwO1xuICAgICAgYyA9IChjIDw8IDE1IHwgYyA+Pj4gMTcpICsgZCB8IDA7XG4gICAgICBiICs9IChkIF4gKGMgfCB+YSkpICsga1s1XSAtIDU3NDM0MDU1IHwgMDtcbiAgICAgIGIgPSAoYiA8PCAyMSB8IGIgPj4+IDExKSArIGMgfCAwO1xuICAgICAgYSArPSAoYyBeIChiIHwgfmQpKSArIGtbMTJdICsgMTcwMDQ4NTU3MSB8IDA7XG4gICAgICBhID0gKGEgPDwgNiB8IGEgPj4+IDI2KSArIGIgfCAwO1xuICAgICAgZCArPSAoYiBeIChhIHwgfmMpKSArIGtbM10gLSAxODk0OTg2NjA2IHwgMDtcbiAgICAgIGQgPSAoZCA8PCAxMCB8IGQgPj4+IDIyKSArIGEgfCAwO1xuICAgICAgYyArPSAoYSBeIChkIHwgfmIpKSArIGtbMTBdIC0gMTA1MTUyMyB8IDA7XG4gICAgICBjID0gKGMgPDwgMTUgfCBjID4+PiAxNykgKyBkIHwgMDtcbiAgICAgIGIgKz0gKGQgXiAoYyB8IH5hKSkgKyBrWzFdIC0gMjA1NDkyMjc5OSB8IDA7XG4gICAgICBiID0gKGIgPDwgMjEgfCBiID4+PiAxMSkgKyBjIHwgMDtcbiAgICAgIGEgKz0gKGMgXiAoYiB8IH5kKSkgKyBrWzhdICsgMTg3MzMxMzM1OSB8IDA7XG4gICAgICBhID0gKGEgPDwgNiB8IGEgPj4+IDI2KSArIGIgfCAwO1xuICAgICAgZCArPSAoYiBeIChhIHwgfmMpKSArIGtbMTVdIC0gMzA2MTE3NDQgfCAwO1xuICAgICAgZCA9IChkIDw8IDEwIHwgZCA+Pj4gMjIpICsgYSB8IDA7XG4gICAgICBjICs9IChhIF4gKGQgfCB+YikpICsga1s2XSAtIDE1NjAxOTgzODAgfCAwO1xuICAgICAgYyA9IChjIDw8IDE1IHwgYyA+Pj4gMTcpICsgZCB8IDA7XG4gICAgICBiICs9IChkIF4gKGMgfCB+YSkpICsga1sxM10gKyAxMzA5MTUxNjQ5IHwgMDtcbiAgICAgIGIgPSAoYiA8PCAyMSB8IGIgPj4+IDExKSArIGMgfCAwO1xuICAgICAgYSArPSAoYyBeIChiIHwgfmQpKSArIGtbNF0gLSAxNDU1MjMwNzAgfCAwO1xuICAgICAgYSA9IChhIDw8IDYgfCBhID4+PiAyNikgKyBiIHwgMDtcbiAgICAgIGQgKz0gKGIgXiAoYSB8IH5jKSkgKyBrWzExXSAtIDExMjAyMTAzNzkgfCAwO1xuICAgICAgZCA9IChkIDw8IDEwIHwgZCA+Pj4gMjIpICsgYSB8IDA7XG4gICAgICBjICs9IChhIF4gKGQgfCB+YikpICsga1syXSArIDcxODc4NzI1OSB8IDA7XG4gICAgICBjID0gKGMgPDwgMTUgfCBjID4+PiAxNykgKyBkIHwgMDtcbiAgICAgIGIgKz0gKGQgXiAoYyB8IH5hKSkgKyBrWzldIC0gMzQzNDg1NTUxIHwgMDtcbiAgICAgIGIgPSAoYiA8PCAyMSB8IGIgPj4+IDExKSArIGMgfCAwO1xuICAgICAgeFswXSA9IGEgKyB4WzBdIHwgMDtcbiAgICAgIHhbMV0gPSBiICsgeFsxXSB8IDA7XG4gICAgICB4WzJdID0gYyArIHhbMl0gfCAwO1xuICAgICAgeFszXSA9IGQgKyB4WzNdIHwgMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gbWQ1YmxrKHMpIHtcbiAgICAgIHZhciBtZDVibGtzID0gW10sIGk7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgNjQ7IGkgKz0gNCkge1xuICAgICAgICBtZDVibGtzW2kgPj4gMl0gPSBzLmNoYXJDb2RlQXQoaSkgKyAocy5jaGFyQ29kZUF0KGkgKyAxKSA8PCA4KSArIChzLmNoYXJDb2RlQXQoaSArIDIpIDw8IDE2KSArIChzLmNoYXJDb2RlQXQoaSArIDMpIDw8IDI0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtZDVibGtzO1xuICAgIH1cbiAgICBmdW5jdGlvbiBtZDVibGtfYXJyYXkoYSkge1xuICAgICAgdmFyIG1kNWJsa3MgPSBbXSwgaTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCA2NDsgaSArPSA0KSB7XG4gICAgICAgIG1kNWJsa3NbaSA+PiAyXSA9IGFbaV0gKyAoYVtpICsgMV0gPDwgOCkgKyAoYVtpICsgMl0gPDwgMTYpICsgKGFbaSArIDNdIDw8IDI0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtZDVibGtzO1xuICAgIH1cbiAgICBmdW5jdGlvbiBtZDUxKHMpIHtcbiAgICAgIHZhciBuID0gcy5sZW5ndGgsIHN0YXRlID0gWyAxNzMyNTg0MTkzLCAtMjcxNzMzODc5LCAtMTczMjU4NDE5NCwgMjcxNzMzODc4IF0sIGksIGxlbmd0aCwgdGFpbCwgdG1wLCBsbywgaGk7XG4gICAgICBmb3IgKGkgPSA2NDsgaSA8PSBuOyBpICs9IDY0KSB7XG4gICAgICAgIG1kNWN5Y2xlKHN0YXRlLCBtZDVibGsocy5zdWJzdHJpbmcoaSAtIDY0LCBpKSkpO1xuICAgICAgfVxuICAgICAgcyA9IHMuc3Vic3RyaW5nKGkgLSA2NCk7XG4gICAgICBsZW5ndGggPSBzLmxlbmd0aDtcbiAgICAgIHRhaWwgPSBbIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAgXTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICB0YWlsW2kgPj4gMl0gfD0gcy5jaGFyQ29kZUF0KGkpIDw8IChpICUgNCA8PCAzKTtcbiAgICAgIH1cbiAgICAgIHRhaWxbaSA+PiAyXSB8PSAxMjggPDwgKGkgJSA0IDw8IDMpO1xuICAgICAgaWYgKGkgPiA1NSkge1xuICAgICAgICBtZDVjeWNsZShzdGF0ZSwgdGFpbCk7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCAxNjsgaSArPSAxKSB7XG4gICAgICAgICAgdGFpbFtpXSA9IDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRtcCA9IG4gKiA4O1xuICAgICAgdG1wID0gdG1wLnRvU3RyaW5nKDE2KS5tYXRjaCgvKC4qPykoLnswLDh9KSQvKTtcbiAgICAgIGxvID0gcGFyc2VJbnQodG1wWzJdLCAxNik7XG4gICAgICBoaSA9IHBhcnNlSW50KHRtcFsxXSwgMTYpIHx8IDA7XG4gICAgICB0YWlsWzE0XSA9IGxvO1xuICAgICAgdGFpbFsxNV0gPSBoaTtcbiAgICAgIG1kNWN5Y2xlKHN0YXRlLCB0YWlsKTtcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbWQ1MV9hcnJheShhKSB7XG4gICAgICB2YXIgbiA9IGEubGVuZ3RoLCBzdGF0ZSA9IFsgMTczMjU4NDE5MywgLTI3MTczMzg3OSwgLTE3MzI1ODQxOTQsIDI3MTczMzg3OCBdLCBpLCBsZW5ndGgsIHRhaWwsIHRtcCwgbG8sIGhpO1xuICAgICAgZm9yIChpID0gNjQ7IGkgPD0gbjsgaSArPSA2NCkge1xuICAgICAgICBtZDVjeWNsZShzdGF0ZSwgbWQ1YmxrX2FycmF5KGEuc3ViYXJyYXkoaSAtIDY0LCBpKSkpO1xuICAgICAgfVxuICAgICAgYSA9IGkgLSA2NCA8IG4gPyBhLnN1YmFycmF5KGkgLSA2NCkgOiBuZXcgVWludDhBcnJheSgwKTtcbiAgICAgIGxlbmd0aCA9IGEubGVuZ3RoO1xuICAgICAgdGFpbCA9IFsgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCBdO1xuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIHRhaWxbaSA+PiAyXSB8PSBhW2ldIDw8IChpICUgNCA8PCAzKTtcbiAgICAgIH1cbiAgICAgIHRhaWxbaSA+PiAyXSB8PSAxMjggPDwgKGkgJSA0IDw8IDMpO1xuICAgICAgaWYgKGkgPiA1NSkge1xuICAgICAgICBtZDVjeWNsZShzdGF0ZSwgdGFpbCk7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCAxNjsgaSArPSAxKSB7XG4gICAgICAgICAgdGFpbFtpXSA9IDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRtcCA9IG4gKiA4O1xuICAgICAgdG1wID0gdG1wLnRvU3RyaW5nKDE2KS5tYXRjaCgvKC4qPykoLnswLDh9KSQvKTtcbiAgICAgIGxvID0gcGFyc2VJbnQodG1wWzJdLCAxNik7XG4gICAgICBoaSA9IHBhcnNlSW50KHRtcFsxXSwgMTYpIHx8IDA7XG4gICAgICB0YWlsWzE0XSA9IGxvO1xuICAgICAgdGFpbFsxNV0gPSBoaTtcbiAgICAgIG1kNWN5Y2xlKHN0YXRlLCB0YWlsKTtcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmhleChuKSB7XG4gICAgICB2YXIgcyA9IFwiXCIsIGo7XG4gICAgICBmb3IgKGogPSAwOyBqIDwgNDsgaiArPSAxKSB7XG4gICAgICAgIHMgKz0gaGV4X2NocltuID4+IGogKiA4ICsgNCAmIDE1XSArIGhleF9jaHJbbiA+PiBqICogOCAmIDE1XTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzO1xuICAgIH1cbiAgICBmdW5jdGlvbiBoZXgoeCkge1xuICAgICAgdmFyIGk7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICB4W2ldID0gcmhleCh4W2ldKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB4LmpvaW4oXCJcIik7XG4gICAgfVxuICAgIGlmIChoZXgobWQ1MShcImhlbGxvXCIpKSAhPT0gXCI1ZDQxNDAyYWJjNGIyYTc2Yjk3MTlkOTExMDE3YzU5MlwiKSA7XG4gICAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gXCJ1bmRlZmluZWRcIiAmJiAhQXJyYXlCdWZmZXIucHJvdG90eXBlLnNsaWNlKSB7XG4gICAgICAoZnVuY3Rpb24oKSB7XG4gICAgICAgIGZ1bmN0aW9uIGNsYW1wKHZhbCwgbGVuZ3RoKSB7XG4gICAgICAgICAgdmFsID0gdmFsIHwgMCB8fCAwO1xuICAgICAgICAgIGlmICh2YWwgPCAwKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5tYXgodmFsICsgbGVuZ3RoLCAwKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIE1hdGgubWluKHZhbCwgbGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICBBcnJheUJ1ZmZlci5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbihmcm9tLCB0bykge1xuICAgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmJ5dGVMZW5ndGgsIGJlZ2luID0gY2xhbXAoZnJvbSwgbGVuZ3RoKSwgZW5kID0gbGVuZ3RoLCBudW0sIHRhcmdldCwgdGFyZ2V0QXJyYXksIHNvdXJjZUFycmF5O1xuICAgICAgICAgIGlmICh0byAhPT0gdW5kZWZpbmVkJDEpIHtcbiAgICAgICAgICAgIGVuZCA9IGNsYW1wKHRvLCBsZW5ndGgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYmVnaW4gPiBlbmQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQXJyYXlCdWZmZXIoMCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG51bSA9IGVuZCAtIGJlZ2luO1xuICAgICAgICAgIHRhcmdldCA9IG5ldyBBcnJheUJ1ZmZlcihudW0pO1xuICAgICAgICAgIHRhcmdldEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkodGFyZ2V0KTtcbiAgICAgICAgICBzb3VyY2VBcnJheSA9IG5ldyBVaW50OEFycmF5KHRoaXMsIGJlZ2luLCBudW0pO1xuICAgICAgICAgIHRhcmdldEFycmF5LnNldChzb3VyY2VBcnJheSk7XG4gICAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICAgICAgfTtcbiAgICAgIH0pKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRvVXRmOChzdHIpIHtcbiAgICAgIGlmICgvW1xcdTAwODAtXFx1RkZGRl0vLnRlc3Qoc3RyKSkge1xuICAgICAgICBzdHIgPSB1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoc3RyKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1dGY4U3RyMkFycmF5QnVmZmVyKHN0ciwgcmV0dXJuVUludDhBcnJheSkge1xuICAgICAgdmFyIGxlbmd0aCA9IHN0ci5sZW5ndGgsIGJ1ZmYgPSBuZXcgQXJyYXlCdWZmZXIobGVuZ3RoKSwgYXJyID0gbmV3IFVpbnQ4QXJyYXkoYnVmZiksIGk7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgYXJyW2ldID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmV0dXJuVUludDhBcnJheSA/IGFyciA6IGJ1ZmY7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFycmF5QnVmZmVyMlV0ZjhTdHIoYnVmZikge1xuICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQ4QXJyYXkoYnVmZikpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjb25jYXRlbmF0ZUFycmF5QnVmZmVycyhmaXJzdCwgc2Vjb25kLCByZXR1cm5VSW50OEFycmF5KSB7XG4gICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkoZmlyc3QuYnl0ZUxlbmd0aCArIHNlY29uZC5ieXRlTGVuZ3RoKTtcbiAgICAgIHJlc3VsdC5zZXQobmV3IFVpbnQ4QXJyYXkoZmlyc3QpKTtcbiAgICAgIHJlc3VsdC5zZXQobmV3IFVpbnQ4QXJyYXkoc2Vjb25kKSwgZmlyc3QuYnl0ZUxlbmd0aCk7XG4gICAgICByZXR1cm4gcmV0dXJuVUludDhBcnJheSA/IHJlc3VsdCA6IHJlc3VsdC5idWZmZXI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhleFRvQmluYXJ5U3RyaW5nKGhleCkge1xuICAgICAgdmFyIGJ5dGVzID0gW10sIGxlbmd0aCA9IGhleC5sZW5ndGgsIHg7XG4gICAgICBmb3IgKHggPSAwOyB4IDwgbGVuZ3RoIC0gMTsgeCArPSAyKSB7XG4gICAgICAgIGJ5dGVzLnB1c2gocGFyc2VJbnQoaGV4LnN1YnN0cih4LCAyKSwgMTYpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgYnl0ZXMpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBTcGFya01ENSgpIHtcbiAgICAgIHRoaXMucmVzZXQoKTtcbiAgICB9XG4gICAgU3BhcmtNRDUucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uKHN0cikge1xuICAgICAgdGhpcy5hcHBlbmRCaW5hcnkodG9VdGY4KHN0cikpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBTcGFya01ENS5wcm90b3R5cGUuYXBwZW5kQmluYXJ5ID0gZnVuY3Rpb24oY29udGVudHMpIHtcbiAgICAgIHRoaXMuX2J1ZmYgKz0gY29udGVudHM7XG4gICAgICB0aGlzLl9sZW5ndGggKz0gY29udGVudHMubGVuZ3RoO1xuICAgICAgdmFyIGxlbmd0aCA9IHRoaXMuX2J1ZmYubGVuZ3RoLCBpO1xuICAgICAgZm9yIChpID0gNjQ7IGkgPD0gbGVuZ3RoOyBpICs9IDY0KSB7XG4gICAgICAgIG1kNWN5Y2xlKHRoaXMuX2hhc2gsIG1kNWJsayh0aGlzLl9idWZmLnN1YnN0cmluZyhpIC0gNjQsIGkpKSk7XG4gICAgICB9XG4gICAgICB0aGlzLl9idWZmID0gdGhpcy5fYnVmZi5zdWJzdHJpbmcoaSAtIDY0KTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgU3BhcmtNRDUucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uKHJhdykge1xuICAgICAgdmFyIGJ1ZmYgPSB0aGlzLl9idWZmLCBsZW5ndGggPSBidWZmLmxlbmd0aCwgaSwgdGFpbCA9IFsgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCBdLCByZXQ7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgdGFpbFtpID4+IDJdIHw9IGJ1ZmYuY2hhckNvZGVBdChpKSA8PCAoaSAlIDQgPDwgMyk7XG4gICAgICB9XG4gICAgICB0aGlzLl9maW5pc2godGFpbCwgbGVuZ3RoKTtcbiAgICAgIHJldCA9IGhleCh0aGlzLl9oYXNoKTtcbiAgICAgIGlmIChyYXcpIHtcbiAgICAgICAgcmV0ID0gaGV4VG9CaW5hcnlTdHJpbmcocmV0KTtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcbiAgICBTcGFya01ENS5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuX2J1ZmYgPSBcIlwiO1xuICAgICAgdGhpcy5fbGVuZ3RoID0gMDtcbiAgICAgIHRoaXMuX2hhc2ggPSBbIDE3MzI1ODQxOTMsIC0yNzE3MzM4NzksIC0xNzMyNTg0MTk0LCAyNzE3MzM4NzggXTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgU3BhcmtNRDUucHJvdG90eXBlLmdldFN0YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBidWZmOiB0aGlzLl9idWZmLFxuICAgICAgICBsZW5ndGg6IHRoaXMuX2xlbmd0aCxcbiAgICAgICAgaGFzaDogdGhpcy5faGFzaC5zbGljZSgpXG4gICAgICB9O1xuICAgIH07XG4gICAgU3BhcmtNRDUucHJvdG90eXBlLnNldFN0YXRlID0gZnVuY3Rpb24oc3RhdGUpIHtcbiAgICAgIHRoaXMuX2J1ZmYgPSBzdGF0ZS5idWZmO1xuICAgICAgdGhpcy5fbGVuZ3RoID0gc3RhdGUubGVuZ3RoO1xuICAgICAgdGhpcy5faGFzaCA9IHN0YXRlLmhhc2g7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIFNwYXJrTUQ1LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgICBkZWxldGUgdGhpcy5faGFzaDtcbiAgICAgIGRlbGV0ZSB0aGlzLl9idWZmO1xuICAgICAgZGVsZXRlIHRoaXMuX2xlbmd0aDtcbiAgICB9O1xuICAgIFNwYXJrTUQ1LnByb3RvdHlwZS5fZmluaXNoID0gZnVuY3Rpb24odGFpbCwgbGVuZ3RoKSB7XG4gICAgICB2YXIgaSA9IGxlbmd0aCwgdG1wLCBsbywgaGk7XG4gICAgICB0YWlsW2kgPj4gMl0gfD0gMTI4IDw8IChpICUgNCA8PCAzKTtcbiAgICAgIGlmIChpID4gNTUpIHtcbiAgICAgICAgbWQ1Y3ljbGUodGhpcy5faGFzaCwgdGFpbCk7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCAxNjsgaSArPSAxKSB7XG4gICAgICAgICAgdGFpbFtpXSA9IDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRtcCA9IHRoaXMuX2xlbmd0aCAqIDg7XG4gICAgICB0bXAgPSB0bXAudG9TdHJpbmcoMTYpLm1hdGNoKC8oLio/KSguezAsOH0pJC8pO1xuICAgICAgbG8gPSBwYXJzZUludCh0bXBbMl0sIDE2KTtcbiAgICAgIGhpID0gcGFyc2VJbnQodG1wWzFdLCAxNikgfHwgMDtcbiAgICAgIHRhaWxbMTRdID0gbG87XG4gICAgICB0YWlsWzE1XSA9IGhpO1xuICAgICAgbWQ1Y3ljbGUodGhpcy5faGFzaCwgdGFpbCk7XG4gICAgfTtcbiAgICBTcGFya01ENS5oYXNoID0gZnVuY3Rpb24oc3RyLCByYXcpIHtcbiAgICAgIHJldHVybiBTcGFya01ENS5oYXNoQmluYXJ5KHRvVXRmOChzdHIpLCByYXcpO1xuICAgIH07XG4gICAgU3BhcmtNRDUuaGFzaEJpbmFyeSA9IGZ1bmN0aW9uKGNvbnRlbnQsIHJhdykge1xuICAgICAgdmFyIGhhc2ggPSBtZDUxKGNvbnRlbnQpLCByZXQgPSBoZXgoaGFzaCk7XG4gICAgICByZXR1cm4gcmF3ID8gaGV4VG9CaW5hcnlTdHJpbmcocmV0KSA6IHJldDtcbiAgICB9O1xuICAgIFNwYXJrTUQ1LkFycmF5QnVmZmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLnJlc2V0KCk7XG4gICAgfTtcbiAgICBTcGFya01ENS5BcnJheUJ1ZmZlci5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24oYXJyKSB7XG4gICAgICB2YXIgYnVmZiA9IGNvbmNhdGVuYXRlQXJyYXlCdWZmZXJzKHRoaXMuX2J1ZmYuYnVmZmVyLCBhcnIsIHRydWUpLCBsZW5ndGggPSBidWZmLmxlbmd0aCwgaTtcbiAgICAgIHRoaXMuX2xlbmd0aCArPSBhcnIuYnl0ZUxlbmd0aDtcbiAgICAgIGZvciAoaSA9IDY0OyBpIDw9IGxlbmd0aDsgaSArPSA2NCkge1xuICAgICAgICBtZDVjeWNsZSh0aGlzLl9oYXNoLCBtZDVibGtfYXJyYXkoYnVmZi5zdWJhcnJheShpIC0gNjQsIGkpKSk7XG4gICAgICB9XG4gICAgICB0aGlzLl9idWZmID0gaSAtIDY0IDwgbGVuZ3RoID8gbmV3IFVpbnQ4QXJyYXkoYnVmZi5idWZmZXIuc2xpY2UoaSAtIDY0KSkgOiBuZXcgVWludDhBcnJheSgwKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgU3BhcmtNRDUuQXJyYXlCdWZmZXIucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uKHJhdykge1xuICAgICAgdmFyIGJ1ZmYgPSB0aGlzLl9idWZmLCBsZW5ndGggPSBidWZmLmxlbmd0aCwgdGFpbCA9IFsgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCBdLCBpLCByZXQ7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgdGFpbFtpID4+IDJdIHw9IGJ1ZmZbaV0gPDwgKGkgJSA0IDw8IDMpO1xuICAgICAgfVxuICAgICAgdGhpcy5fZmluaXNoKHRhaWwsIGxlbmd0aCk7XG4gICAgICByZXQgPSBoZXgodGhpcy5faGFzaCk7XG4gICAgICBpZiAocmF3KSB7XG4gICAgICAgIHJldCA9IGhleFRvQmluYXJ5U3RyaW5nKHJldCk7XG4gICAgICB9XG4gICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICByZXR1cm4gcmV0O1xuICAgIH07XG4gICAgU3BhcmtNRDUuQXJyYXlCdWZmZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLl9idWZmID0gbmV3IFVpbnQ4QXJyYXkoMCk7XG4gICAgICB0aGlzLl9sZW5ndGggPSAwO1xuICAgICAgdGhpcy5faGFzaCA9IFsgMTczMjU4NDE5MywgLTI3MTczMzg3OSwgLTE3MzI1ODQxOTQsIDI3MTczMzg3OCBdO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBTcGFya01ENS5BcnJheUJ1ZmZlci5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzdGF0ZSA9IFNwYXJrTUQ1LnByb3RvdHlwZS5nZXRTdGF0ZS5jYWxsKHRoaXMpO1xuICAgICAgc3RhdGUuYnVmZiA9IGFycmF5QnVmZmVyMlV0ZjhTdHIoc3RhdGUuYnVmZik7XG4gICAgICByZXR1cm4gc3RhdGU7XG4gICAgfTtcbiAgICBTcGFya01ENS5BcnJheUJ1ZmZlci5wcm90b3R5cGUuc2V0U3RhdGUgPSBmdW5jdGlvbihzdGF0ZSkge1xuICAgICAgc3RhdGUuYnVmZiA9IHV0ZjhTdHIyQXJyYXlCdWZmZXIoc3RhdGUuYnVmZiwgdHJ1ZSk7XG4gICAgICByZXR1cm4gU3BhcmtNRDUucHJvdG90eXBlLnNldFN0YXRlLmNhbGwodGhpcywgc3RhdGUpO1xuICAgIH07XG4gICAgU3BhcmtNRDUuQXJyYXlCdWZmZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBTcGFya01ENS5wcm90b3R5cGUuZGVzdHJveTtcbiAgICBTcGFya01ENS5BcnJheUJ1ZmZlci5wcm90b3R5cGUuX2ZpbmlzaCA9IFNwYXJrTUQ1LnByb3RvdHlwZS5fZmluaXNoO1xuICAgIFNwYXJrTUQ1LkFycmF5QnVmZmVyLmhhc2ggPSBmdW5jdGlvbihhcnIsIHJhdykge1xuICAgICAgdmFyIGhhc2ggPSBtZDUxX2FycmF5KG5ldyBVaW50OEFycmF5KGFycikpLCByZXQgPSBoZXgoaGFzaCk7XG4gICAgICByZXR1cm4gcmF3ID8gaGV4VG9CaW5hcnlTdHJpbmcocmV0KSA6IHJldDtcbiAgICB9O1xuICAgIHJldHVybiBTcGFya01ENTtcbiAgfSkpO1xufSkoc3BhcmtNZDUpO1xuXG52YXIgU3BhcmtNRDUgPSBzcGFya01kNS5leHBvcnRzO1xuXG5jb25zdCBmaWxlU2xpY2UgPSBGaWxlLnByb3RvdHlwZS5zbGljZSB8fCBGaWxlLnByb3RvdHlwZS5tb3pTbGljZSB8fCBGaWxlLnByb3RvdHlwZS53ZWJraXRTbGljZTtcblxuY2xhc3MgRmlsZUNoZWNrc3VtIHtcbiAgc3RhdGljIGNyZWF0ZShmaWxlLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGluc3RhbmNlID0gbmV3IEZpbGVDaGVja3N1bShmaWxlKTtcbiAgICBpbnN0YW5jZS5jcmVhdGUoY2FsbGJhY2spO1xuICB9XG4gIGNvbnN0cnVjdG9yKGZpbGUpIHtcbiAgICB0aGlzLmZpbGUgPSBmaWxlO1xuICAgIHRoaXMuY2h1bmtTaXplID0gMjA5NzE1MjtcbiAgICB0aGlzLmNodW5rQ291bnQgPSBNYXRoLmNlaWwodGhpcy5maWxlLnNpemUgLyB0aGlzLmNodW5rU2l6ZSk7XG4gICAgdGhpcy5jaHVua0luZGV4ID0gMDtcbiAgfVxuICBjcmVhdGUoY2FsbGJhY2spIHtcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgdGhpcy5tZDVCdWZmZXIgPSBuZXcgU3BhcmtNRDUuQXJyYXlCdWZmZXI7XG4gICAgdGhpcy5maWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXI7XG4gICAgdGhpcy5maWxlUmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIChldmVudCA9PiB0aGlzLmZpbGVSZWFkZXJEaWRMb2FkKGV2ZW50KSkpO1xuICAgIHRoaXMuZmlsZVJlYWRlci5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgKGV2ZW50ID0+IHRoaXMuZmlsZVJlYWRlckRpZEVycm9yKGV2ZW50KSkpO1xuICAgIHRoaXMucmVhZE5leHRDaHVuaygpO1xuICB9XG4gIGZpbGVSZWFkZXJEaWRMb2FkKGV2ZW50KSB7XG4gICAgdGhpcy5tZDVCdWZmZXIuYXBwZW5kKGV2ZW50LnRhcmdldC5yZXN1bHQpO1xuICAgIGlmICghdGhpcy5yZWFkTmV4dENodW5rKCkpIHtcbiAgICAgIGNvbnN0IGJpbmFyeURpZ2VzdCA9IHRoaXMubWQ1QnVmZmVyLmVuZCh0cnVlKTtcbiAgICAgIGNvbnN0IGJhc2U2NGRpZ2VzdCA9IGJ0b2EoYmluYXJ5RGlnZXN0KTtcbiAgICAgIHRoaXMuY2FsbGJhY2sobnVsbCwgYmFzZTY0ZGlnZXN0KTtcbiAgICB9XG4gIH1cbiAgZmlsZVJlYWRlckRpZEVycm9yKGV2ZW50KSB7XG4gICAgdGhpcy5jYWxsYmFjayhgRXJyb3IgcmVhZGluZyAke3RoaXMuZmlsZS5uYW1lfWApO1xuICB9XG4gIHJlYWROZXh0Q2h1bmsoKSB7XG4gICAgaWYgKHRoaXMuY2h1bmtJbmRleCA8IHRoaXMuY2h1bmtDb3VudCB8fCB0aGlzLmNodW5rSW5kZXggPT0gMCAmJiB0aGlzLmNodW5rQ291bnQgPT0gMCkge1xuICAgICAgY29uc3Qgc3RhcnQgPSB0aGlzLmNodW5rSW5kZXggKiB0aGlzLmNodW5rU2l6ZTtcbiAgICAgIGNvbnN0IGVuZCA9IE1hdGgubWluKHN0YXJ0ICsgdGhpcy5jaHVua1NpemUsIHRoaXMuZmlsZS5zaXplKTtcbiAgICAgIGNvbnN0IGJ5dGVzID0gZmlsZVNsaWNlLmNhbGwodGhpcy5maWxlLCBzdGFydCwgZW5kKTtcbiAgICAgIHRoaXMuZmlsZVJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihieXRlcyk7XG4gICAgICB0aGlzLmNodW5rSW5kZXgrKztcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGdldE1ldGFWYWx1ZShuYW1lKSB7XG4gIGNvbnN0IGVsZW1lbnQgPSBmaW5kRWxlbWVudChkb2N1bWVudC5oZWFkLCBgbWV0YVtuYW1lPVwiJHtuYW1lfVwiXWApO1xuICBpZiAoZWxlbWVudCkge1xuICAgIHJldHVybiBlbGVtZW50LmdldEF0dHJpYnV0ZShcImNvbnRlbnRcIik7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmluZEVsZW1lbnRzKHJvb3QsIHNlbGVjdG9yKSB7XG4gIGlmICh0eXBlb2Ygcm9vdCA9PSBcInN0cmluZ1wiKSB7XG4gICAgc2VsZWN0b3IgPSByb290O1xuICAgIHJvb3QgPSBkb2N1bWVudDtcbiAgfVxuICBjb25zdCBlbGVtZW50cyA9IHJvb3QucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gIHJldHVybiB0b0FycmF5KGVsZW1lbnRzKTtcbn1cblxuZnVuY3Rpb24gZmluZEVsZW1lbnQocm9vdCwgc2VsZWN0b3IpIHtcbiAgaWYgKHR5cGVvZiByb290ID09IFwic3RyaW5nXCIpIHtcbiAgICBzZWxlY3RvciA9IHJvb3Q7XG4gICAgcm9vdCA9IGRvY3VtZW50O1xuICB9XG4gIHJldHVybiByb290LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xufVxuXG5mdW5jdGlvbiBkaXNwYXRjaEV2ZW50KGVsZW1lbnQsIHR5cGUsIGV2ZW50SW5pdCA9IHt9KSB7XG4gIGNvbnN0IHtkaXNhYmxlZDogZGlzYWJsZWR9ID0gZWxlbWVudDtcbiAgY29uc3Qge2J1YmJsZXM6IGJ1YmJsZXMsIGNhbmNlbGFibGU6IGNhbmNlbGFibGUsIGRldGFpbDogZGV0YWlsfSA9IGV2ZW50SW5pdDtcbiAgY29uc3QgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpO1xuICBldmVudC5pbml0RXZlbnQodHlwZSwgYnViYmxlcyB8fCB0cnVlLCBjYW5jZWxhYmxlIHx8IHRydWUpO1xuICBldmVudC5kZXRhaWwgPSBkZXRhaWwgfHwge307XG4gIHRyeSB7XG4gICAgZWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gIH0gZmluYWxseSB7XG4gICAgZWxlbWVudC5kaXNhYmxlZCA9IGRpc2FibGVkO1xuICB9XG4gIHJldHVybiBldmVudDtcbn1cblxuZnVuY3Rpb24gdG9BcnJheSh2YWx1ZSkge1xuICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH0gZWxzZSBpZiAoQXJyYXkuZnJvbSkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gW10uc2xpY2UuY2FsbCh2YWx1ZSk7XG4gIH1cbn1cblxuY2xhc3MgQmxvYlJlY29yZCB7XG4gIGNvbnN0cnVjdG9yKGZpbGUsIGNoZWNrc3VtLCB1cmwsIGN1c3RvbUhlYWRlcnMgPSB7fSkge1xuICAgIHRoaXMuZmlsZSA9IGZpbGU7XG4gICAgdGhpcy5hdHRyaWJ1dGVzID0ge1xuICAgICAgZmlsZW5hbWU6IGZpbGUubmFtZSxcbiAgICAgIGNvbnRlbnRfdHlwZTogZmlsZS50eXBlIHx8IFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCIsXG4gICAgICBieXRlX3NpemU6IGZpbGUuc2l6ZSxcbiAgICAgIGNoZWNrc3VtOiBjaGVja3N1bVxuICAgIH07XG4gICAgdGhpcy54aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3Q7XG4gICAgdGhpcy54aHIub3BlbihcIlBPU1RcIiwgdXJsLCB0cnVlKTtcbiAgICB0aGlzLnhoci5yZXNwb25zZVR5cGUgPSBcImpzb25cIjtcbiAgICB0aGlzLnhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICB0aGlzLnhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0XCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICB0aGlzLnhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiWC1SZXF1ZXN0ZWQtV2l0aFwiLCBcIlhNTEh0dHBSZXF1ZXN0XCIpO1xuICAgIE9iamVjdC5rZXlzKGN1c3RvbUhlYWRlcnMpLmZvckVhY2goKGhlYWRlcktleSA9PiB7XG4gICAgICB0aGlzLnhoci5zZXRSZXF1ZXN0SGVhZGVyKGhlYWRlcktleSwgY3VzdG9tSGVhZGVyc1toZWFkZXJLZXldKTtcbiAgICB9KSk7XG4gICAgY29uc3QgY3NyZlRva2VuID0gZ2V0TWV0YVZhbHVlKFwiY3NyZi10b2tlblwiKTtcbiAgICBpZiAoY3NyZlRva2VuICE9IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy54aHIuc2V0UmVxdWVzdEhlYWRlcihcIlgtQ1NSRi1Ub2tlblwiLCBjc3JmVG9rZW4pO1xuICAgIH1cbiAgICB0aGlzLnhoci5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoZXZlbnQgPT4gdGhpcy5yZXF1ZXN0RGlkTG9hZChldmVudCkpKTtcbiAgICB0aGlzLnhoci5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgKGV2ZW50ID0+IHRoaXMucmVxdWVzdERpZEVycm9yKGV2ZW50KSkpO1xuICB9XG4gIGdldCBzdGF0dXMoKSB7XG4gICAgcmV0dXJuIHRoaXMueGhyLnN0YXR1cztcbiAgfVxuICBnZXQgcmVzcG9uc2UoKSB7XG4gICAgY29uc3Qge3Jlc3BvbnNlVHlwZTogcmVzcG9uc2VUeXBlLCByZXNwb25zZTogcmVzcG9uc2V9ID0gdGhpcy54aHI7XG4gICAgaWYgKHJlc3BvbnNlVHlwZSA9PSBcImpzb25cIikge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShyZXNwb25zZSk7XG4gICAgfVxuICB9XG4gIGNyZWF0ZShjYWxsYmFjaykge1xuICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB0aGlzLnhoci5zZW5kKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIGJsb2I6IHRoaXMuYXR0cmlidXRlc1xuICAgIH0pKTtcbiAgfVxuICByZXF1ZXN0RGlkTG9hZChldmVudCkge1xuICAgIGlmICh0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCAzMDApIHtcbiAgICAgIGNvbnN0IHtyZXNwb25zZTogcmVzcG9uc2V9ID0gdGhpcztcbiAgICAgIGNvbnN0IHtkaXJlY3RfdXBsb2FkOiBkaXJlY3RfdXBsb2FkfSA9IHJlc3BvbnNlO1xuICAgICAgZGVsZXRlIHJlc3BvbnNlLmRpcmVjdF91cGxvYWQ7XG4gICAgICB0aGlzLmF0dHJpYnV0ZXMgPSByZXNwb25zZTtcbiAgICAgIHRoaXMuZGlyZWN0VXBsb2FkRGF0YSA9IGRpcmVjdF91cGxvYWQ7XG4gICAgICB0aGlzLmNhbGxiYWNrKG51bGwsIHRoaXMudG9KU09OKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlcXVlc3REaWRFcnJvcihldmVudCk7XG4gICAgfVxuICB9XG4gIHJlcXVlc3REaWRFcnJvcihldmVudCkge1xuICAgIHRoaXMuY2FsbGJhY2soYEVycm9yIGNyZWF0aW5nIEJsb2IgZm9yIFwiJHt0aGlzLmZpbGUubmFtZX1cIi4gU3RhdHVzOiAke3RoaXMuc3RhdHVzfWApO1xuICB9XG4gIHRvSlNPTigpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLmF0dHJpYnV0ZXMpIHtcbiAgICAgIHJlc3VsdFtrZXldID0gdGhpcy5hdHRyaWJ1dGVzW2tleV07XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn1cblxuY2xhc3MgQmxvYlVwbG9hZCB7XG4gIGNvbnN0cnVjdG9yKGJsb2IpIHtcbiAgICB0aGlzLmJsb2IgPSBibG9iO1xuICAgIHRoaXMuZmlsZSA9IGJsb2IuZmlsZTtcbiAgICBjb25zdCB7dXJsOiB1cmwsIGhlYWRlcnM6IGhlYWRlcnN9ID0gYmxvYi5kaXJlY3RVcGxvYWREYXRhO1xuICAgIHRoaXMueGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0O1xuICAgIHRoaXMueGhyLm9wZW4oXCJQVVRcIiwgdXJsLCB0cnVlKTtcbiAgICB0aGlzLnhoci5yZXNwb25zZVR5cGUgPSBcInRleHRcIjtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBoZWFkZXJzKSB7XG4gICAgICB0aGlzLnhoci5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgaGVhZGVyc1trZXldKTtcbiAgICB9XG4gICAgdGhpcy54aHIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKGV2ZW50ID0+IHRoaXMucmVxdWVzdERpZExvYWQoZXZlbnQpKSk7XG4gICAgdGhpcy54aHIuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIChldmVudCA9PiB0aGlzLnJlcXVlc3REaWRFcnJvcihldmVudCkpKTtcbiAgfVxuICBjcmVhdGUoY2FsbGJhY2spIHtcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgdGhpcy54aHIuc2VuZCh0aGlzLmZpbGUuc2xpY2UoKSk7XG4gIH1cbiAgcmVxdWVzdERpZExvYWQoZXZlbnQpIHtcbiAgICBjb25zdCB7c3RhdHVzOiBzdGF0dXMsIHJlc3BvbnNlOiByZXNwb25zZX0gPSB0aGlzLnhocjtcbiAgICBpZiAoc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDApIHtcbiAgICAgIHRoaXMuY2FsbGJhY2sobnVsbCwgcmVzcG9uc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlcXVlc3REaWRFcnJvcihldmVudCk7XG4gICAgfVxuICB9XG4gIHJlcXVlc3REaWRFcnJvcihldmVudCkge1xuICAgIHRoaXMuY2FsbGJhY2soYEVycm9yIHN0b3JpbmcgXCIke3RoaXMuZmlsZS5uYW1lfVwiLiBTdGF0dXM6ICR7dGhpcy54aHIuc3RhdHVzfWApO1xuICB9XG59XG5cbmxldCBpZCA9IDA7XG5cbmNsYXNzIERpcmVjdFVwbG9hZCB7XG4gIGNvbnN0cnVjdG9yKGZpbGUsIHVybCwgZGVsZWdhdGUsIGN1c3RvbUhlYWRlcnMgPSB7fSkge1xuICAgIHRoaXMuaWQgPSArK2lkO1xuICAgIHRoaXMuZmlsZSA9IGZpbGU7XG4gICAgdGhpcy51cmwgPSB1cmw7XG4gICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgIHRoaXMuY3VzdG9tSGVhZGVycyA9IGN1c3RvbUhlYWRlcnM7XG4gIH1cbiAgY3JlYXRlKGNhbGxiYWNrKSB7XG4gICAgRmlsZUNoZWNrc3VtLmNyZWF0ZSh0aGlzLmZpbGUsICgoZXJyb3IsIGNoZWNrc3VtKSA9PiB7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBibG9iID0gbmV3IEJsb2JSZWNvcmQodGhpcy5maWxlLCBjaGVja3N1bSwgdGhpcy51cmwsIHRoaXMuY3VzdG9tSGVhZGVycyk7XG4gICAgICBub3RpZnkodGhpcy5kZWxlZ2F0ZSwgXCJkaXJlY3RVcGxvYWRXaWxsQ3JlYXRlQmxvYldpdGhYSFJcIiwgYmxvYi54aHIpO1xuICAgICAgYmxvYi5jcmVhdGUoKGVycm9yID0+IHtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHVwbG9hZCA9IG5ldyBCbG9iVXBsb2FkKGJsb2IpO1xuICAgICAgICAgIG5vdGlmeSh0aGlzLmRlbGVnYXRlLCBcImRpcmVjdFVwbG9hZFdpbGxTdG9yZUZpbGVXaXRoWEhSXCIsIHVwbG9hZC54aHIpO1xuICAgICAgICAgIHVwbG9hZC5jcmVhdGUoKGVycm9yID0+IHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICBjYWxsYmFjayhlcnJvcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCBibG9iLnRvSlNPTigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICB9KSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gbm90aWZ5KG9iamVjdCwgbWV0aG9kTmFtZSwgLi4ubWVzc2FnZXMpIHtcbiAgaWYgKG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0W21ldGhvZE5hbWVdID09IFwiZnVuY3Rpb25cIikge1xuICAgIHJldHVybiBvYmplY3RbbWV0aG9kTmFtZV0oLi4ubWVzc2FnZXMpO1xuICB9XG59XG5cbmNsYXNzIERpcmVjdFVwbG9hZENvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3RvcihpbnB1dCwgZmlsZSkge1xuICAgIHRoaXMuaW5wdXQgPSBpbnB1dDtcbiAgICB0aGlzLmZpbGUgPSBmaWxlO1xuICAgIHRoaXMuZGlyZWN0VXBsb2FkID0gbmV3IERpcmVjdFVwbG9hZCh0aGlzLmZpbGUsIHRoaXMudXJsLCB0aGlzKTtcbiAgICB0aGlzLmRpc3BhdGNoKFwiaW5pdGlhbGl6ZVwiKTtcbiAgfVxuICBzdGFydChjYWxsYmFjaykge1xuICAgIGNvbnN0IGhpZGRlbklucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIGhpZGRlbklucHV0LnR5cGUgPSBcImhpZGRlblwiO1xuICAgIGhpZGRlbklucHV0Lm5hbWUgPSB0aGlzLmlucHV0Lm5hbWU7XG4gICAgdGhpcy5pbnB1dC5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJiZWZvcmViZWdpblwiLCBoaWRkZW5JbnB1dCk7XG4gICAgdGhpcy5kaXNwYXRjaChcInN0YXJ0XCIpO1xuICAgIHRoaXMuZGlyZWN0VXBsb2FkLmNyZWF0ZSgoKGVycm9yLCBhdHRyaWJ1dGVzKSA9PiB7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgaGlkZGVuSW5wdXQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChoaWRkZW5JbnB1dCk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFcnJvcihlcnJvcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBoaWRkZW5JbnB1dC52YWx1ZSA9IGF0dHJpYnV0ZXMuc2lnbmVkX2lkO1xuICAgICAgfVxuICAgICAgdGhpcy5kaXNwYXRjaChcImVuZFwiKTtcbiAgICAgIGNhbGxiYWNrKGVycm9yKTtcbiAgICB9KSk7XG4gIH1cbiAgdXBsb2FkUmVxdWVzdERpZFByb2dyZXNzKGV2ZW50KSB7XG4gICAgY29uc3QgcHJvZ3Jlc3MgPSBldmVudC5sb2FkZWQgLyBldmVudC50b3RhbCAqIDEwMDtcbiAgICBpZiAocHJvZ3Jlc3MpIHtcbiAgICAgIHRoaXMuZGlzcGF0Y2goXCJwcm9ncmVzc1wiLCB7XG4gICAgICAgIHByb2dyZXNzOiBwcm9ncmVzc1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIGdldCB1cmwoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5wdXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1kaXJlY3QtdXBsb2FkLXVybFwiKTtcbiAgfVxuICBkaXNwYXRjaChuYW1lLCBkZXRhaWwgPSB7fSkge1xuICAgIGRldGFpbC5maWxlID0gdGhpcy5maWxlO1xuICAgIGRldGFpbC5pZCA9IHRoaXMuZGlyZWN0VXBsb2FkLmlkO1xuICAgIHJldHVybiBkaXNwYXRjaEV2ZW50KHRoaXMuaW5wdXQsIGBkaXJlY3QtdXBsb2FkOiR7bmFtZX1gLCB7XG4gICAgICBkZXRhaWw6IGRldGFpbFxuICAgIH0pO1xuICB9XG4gIGRpc3BhdGNoRXJyb3IoZXJyb3IpIHtcbiAgICBjb25zdCBldmVudCA9IHRoaXMuZGlzcGF0Y2goXCJlcnJvclwiLCB7XG4gICAgICBlcnJvcjogZXJyb3JcbiAgICB9KTtcbiAgICBpZiAoIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgIGFsZXJ0KGVycm9yKTtcbiAgICB9XG4gIH1cbiAgZGlyZWN0VXBsb2FkV2lsbENyZWF0ZUJsb2JXaXRoWEhSKHhocikge1xuICAgIHRoaXMuZGlzcGF0Y2goXCJiZWZvcmUtYmxvYi1yZXF1ZXN0XCIsIHtcbiAgICAgIHhocjogeGhyXG4gICAgfSk7XG4gIH1cbiAgZGlyZWN0VXBsb2FkV2lsbFN0b3JlRmlsZVdpdGhYSFIoeGhyKSB7XG4gICAgdGhpcy5kaXNwYXRjaChcImJlZm9yZS1zdG9yYWdlLXJlcXVlc3RcIiwge1xuICAgICAgeGhyOiB4aHJcbiAgICB9KTtcbiAgICB4aHIudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoXCJwcm9ncmVzc1wiLCAoZXZlbnQgPT4gdGhpcy51cGxvYWRSZXF1ZXN0RGlkUHJvZ3Jlc3MoZXZlbnQpKSk7XG4gIH1cbn1cblxuY29uc3QgaW5wdXRTZWxlY3RvciA9IFwiaW5wdXRbdHlwZT1maWxlXVtkYXRhLWRpcmVjdC11cGxvYWQtdXJsXTpub3QoW2Rpc2FibGVkXSlcIjtcblxuY2xhc3MgRGlyZWN0VXBsb2Fkc0NvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3Rvcihmb3JtKSB7XG4gICAgdGhpcy5mb3JtID0gZm9ybTtcbiAgICB0aGlzLmlucHV0cyA9IGZpbmRFbGVtZW50cyhmb3JtLCBpbnB1dFNlbGVjdG9yKS5maWx0ZXIoKGlucHV0ID0+IGlucHV0LmZpbGVzLmxlbmd0aCkpO1xuICB9XG4gIHN0YXJ0KGNhbGxiYWNrKSB7XG4gICAgY29uc3QgY29udHJvbGxlcnMgPSB0aGlzLmNyZWF0ZURpcmVjdFVwbG9hZENvbnRyb2xsZXJzKCk7XG4gICAgY29uc3Qgc3RhcnROZXh0Q29udHJvbGxlciA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBjb250cm9sbGVycy5zaGlmdCgpO1xuICAgICAgaWYgKGNvbnRyb2xsZXIpIHtcbiAgICAgICAgY29udHJvbGxlci5zdGFydCgoZXJyb3IgPT4ge1xuICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaChcImVuZFwiKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RhcnROZXh0Q29udHJvbGxlcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaChcImVuZFwiKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuZGlzcGF0Y2goXCJzdGFydFwiKTtcbiAgICBzdGFydE5leHRDb250cm9sbGVyKCk7XG4gIH1cbiAgY3JlYXRlRGlyZWN0VXBsb2FkQ29udHJvbGxlcnMoKSB7XG4gICAgY29uc3QgY29udHJvbGxlcnMgPSBbXTtcbiAgICB0aGlzLmlucHV0cy5mb3JFYWNoKChpbnB1dCA9PiB7XG4gICAgICB0b0FycmF5KGlucHV0LmZpbGVzKS5mb3JFYWNoKChmaWxlID0+IHtcbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBEaXJlY3RVcGxvYWRDb250cm9sbGVyKGlucHV0LCBmaWxlKTtcbiAgICAgICAgY29udHJvbGxlcnMucHVzaChjb250cm9sbGVyKTtcbiAgICAgIH0pKTtcbiAgICB9KSk7XG4gICAgcmV0dXJuIGNvbnRyb2xsZXJzO1xuICB9XG4gIGRpc3BhdGNoKG5hbWUsIGRldGFpbCA9IHt9KSB7XG4gICAgcmV0dXJuIGRpc3BhdGNoRXZlbnQodGhpcy5mb3JtLCBgZGlyZWN0LXVwbG9hZHM6JHtuYW1lfWAsIHtcbiAgICAgIGRldGFpbDogZGV0YWlsXG4gICAgfSk7XG4gIH1cbn1cblxuY29uc3QgcHJvY2Vzc2luZ0F0dHJpYnV0ZSA9IFwiZGF0YS1kaXJlY3QtdXBsb2Fkcy1wcm9jZXNzaW5nXCI7XG5cbmNvbnN0IHN1Ym1pdEJ1dHRvbnNCeUZvcm0gPSBuZXcgV2Vha01hcDtcblxubGV0IHN0YXJ0ZWQgPSBmYWxzZTtcblxuZnVuY3Rpb24gc3RhcnQoKSB7XG4gIGlmICghc3RhcnRlZCkge1xuICAgIHN0YXJ0ZWQgPSB0cnVlO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBkaWRDbGljaywgdHJ1ZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBkaWRTdWJtaXRGb3JtLCB0cnVlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiYWpheDpiZWZvcmVcIiwgZGlkU3VibWl0UmVtb3RlRWxlbWVudCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZGlkQ2xpY2soZXZlbnQpIHtcbiAgY29uc3QgYnV0dG9uID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCJidXR0b24sIGlucHV0XCIpO1xuICBpZiAoYnV0dG9uICYmIGJ1dHRvbi50eXBlID09PSBcInN1Ym1pdFwiICYmIGJ1dHRvbi5mb3JtKSB7XG4gICAgc3VibWl0QnV0dG9uc0J5Rm9ybS5zZXQoYnV0dG9uLmZvcm0sIGJ1dHRvbik7XG4gIH1cbn1cblxuZnVuY3Rpb24gZGlkU3VibWl0Rm9ybShldmVudCkge1xuICBoYW5kbGVGb3JtU3VibWlzc2lvbkV2ZW50KGV2ZW50KTtcbn1cblxuZnVuY3Rpb24gZGlkU3VibWl0UmVtb3RlRWxlbWVudChldmVudCkge1xuICBpZiAoZXZlbnQudGFyZ2V0LnRhZ05hbWUgPT0gXCJGT1JNXCIpIHtcbiAgICBoYW5kbGVGb3JtU3VibWlzc2lvbkV2ZW50KGV2ZW50KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVGb3JtU3VibWlzc2lvbkV2ZW50KGV2ZW50KSB7XG4gIGNvbnN0IGZvcm0gPSBldmVudC50YXJnZXQ7XG4gIGlmIChmb3JtLmhhc0F0dHJpYnV0ZShwcm9jZXNzaW5nQXR0cmlidXRlKSkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgRGlyZWN0VXBsb2Fkc0NvbnRyb2xsZXIoZm9ybSk7XG4gIGNvbnN0IHtpbnB1dHM6IGlucHV0c30gPSBjb250cm9sbGVyO1xuICBpZiAoaW5wdXRzLmxlbmd0aCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZm9ybS5zZXRBdHRyaWJ1dGUocHJvY2Vzc2luZ0F0dHJpYnV0ZSwgXCJcIik7XG4gICAgaW5wdXRzLmZvckVhY2goZGlzYWJsZSk7XG4gICAgY29udHJvbGxlci5zdGFydCgoZXJyb3IgPT4ge1xuICAgICAgZm9ybS5yZW1vdmVBdHRyaWJ1dGUocHJvY2Vzc2luZ0F0dHJpYnV0ZSk7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgaW5wdXRzLmZvckVhY2goZW5hYmxlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN1Ym1pdEZvcm0oZm9ybSk7XG4gICAgICB9XG4gICAgfSkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHN1Ym1pdEZvcm0oZm9ybSkge1xuICBsZXQgYnV0dG9uID0gc3VibWl0QnV0dG9uc0J5Rm9ybS5nZXQoZm9ybSkgfHwgZmluZEVsZW1lbnQoZm9ybSwgXCJpbnB1dFt0eXBlPXN1Ym1pdF0sIGJ1dHRvblt0eXBlPXN1Ym1pdF1cIik7XG4gIGlmIChidXR0b24pIHtcbiAgICBjb25zdCB7ZGlzYWJsZWQ6IGRpc2FibGVkfSA9IGJ1dHRvbjtcbiAgICBidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICBidXR0b24uZm9jdXMoKTtcbiAgICBidXR0b24uY2xpY2soKTtcbiAgICBidXR0b24uZGlzYWJsZWQgPSBkaXNhYmxlZDtcbiAgfSBlbHNlIHtcbiAgICBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgYnV0dG9uLnR5cGUgPSBcInN1Ym1pdFwiO1xuICAgIGJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgZm9ybS5hcHBlbmRDaGlsZChidXR0b24pO1xuICAgIGJ1dHRvbi5jbGljaygpO1xuICAgIGZvcm0ucmVtb3ZlQ2hpbGQoYnV0dG9uKTtcbiAgfVxuICBzdWJtaXRCdXR0b25zQnlGb3JtLmRlbGV0ZShmb3JtKTtcbn1cblxuZnVuY3Rpb24gZGlzYWJsZShpbnB1dCkge1xuICBpbnB1dC5kaXNhYmxlZCA9IHRydWU7XG59XG5cbmZ1bmN0aW9uIGVuYWJsZShpbnB1dCkge1xuICBpbnB1dC5kaXNhYmxlZCA9IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBhdXRvc3RhcnQoKSB7XG4gIGlmICh3aW5kb3cuQWN0aXZlU3RvcmFnZSkge1xuICAgIHN0YXJ0KCk7XG4gIH1cbn1cblxuc2V0VGltZW91dChhdXRvc3RhcnQsIDEpO1xuXG5leHBvcnQgeyBEaXJlY3RVcGxvYWQsIERpcmVjdFVwbG9hZENvbnRyb2xsZXIsIERpcmVjdFVwbG9hZHNDb250cm9sbGVyLCBkaXNwYXRjaEV2ZW50LCBzdGFydCB9O1xuIiwgIi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9zY2hlZHVsZXIuanNcbnZhciBmbHVzaFBlbmRpbmcgPSBmYWxzZTtcbnZhciBmbHVzaGluZyA9IGZhbHNlO1xudmFyIHF1ZXVlID0gW107XG52YXIgbGFzdEZsdXNoZWRJbmRleCA9IC0xO1xuZnVuY3Rpb24gc2NoZWR1bGVyKGNhbGxiYWNrKSB7XG4gIHF1ZXVlSm9iKGNhbGxiYWNrKTtcbn1cbmZ1bmN0aW9uIHF1ZXVlSm9iKGpvYikge1xuICBpZiAoIXF1ZXVlLmluY2x1ZGVzKGpvYikpXG4gICAgcXVldWUucHVzaChqb2IpO1xuICBxdWV1ZUZsdXNoKCk7XG59XG5mdW5jdGlvbiBkZXF1ZXVlSm9iKGpvYikge1xuICBsZXQgaW5kZXggPSBxdWV1ZS5pbmRleE9mKGpvYik7XG4gIGlmIChpbmRleCAhPT0gLTEgJiYgaW5kZXggPiBsYXN0Rmx1c2hlZEluZGV4KVxuICAgIHF1ZXVlLnNwbGljZShpbmRleCwgMSk7XG59XG5mdW5jdGlvbiBxdWV1ZUZsdXNoKCkge1xuICBpZiAoIWZsdXNoaW5nICYmICFmbHVzaFBlbmRpbmcpIHtcbiAgICBmbHVzaFBlbmRpbmcgPSB0cnVlO1xuICAgIHF1ZXVlTWljcm90YXNrKGZsdXNoSm9icyk7XG4gIH1cbn1cbmZ1bmN0aW9uIGZsdXNoSm9icygpIHtcbiAgZmx1c2hQZW5kaW5nID0gZmFsc2U7XG4gIGZsdXNoaW5nID0gdHJ1ZTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgIHF1ZXVlW2ldKCk7XG4gICAgbGFzdEZsdXNoZWRJbmRleCA9IGk7XG4gIH1cbiAgcXVldWUubGVuZ3RoID0gMDtcbiAgbGFzdEZsdXNoZWRJbmRleCA9IC0xO1xuICBmbHVzaGluZyA9IGZhbHNlO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvcmVhY3Rpdml0eS5qc1xudmFyIHJlYWN0aXZlO1xudmFyIGVmZmVjdDtcbnZhciByZWxlYXNlO1xudmFyIHJhdztcbnZhciBzaG91bGRTY2hlZHVsZSA9IHRydWU7XG5mdW5jdGlvbiBkaXNhYmxlRWZmZWN0U2NoZWR1bGluZyhjYWxsYmFjaykge1xuICBzaG91bGRTY2hlZHVsZSA9IGZhbHNlO1xuICBjYWxsYmFjaygpO1xuICBzaG91bGRTY2hlZHVsZSA9IHRydWU7XG59XG5mdW5jdGlvbiBzZXRSZWFjdGl2aXR5RW5naW5lKGVuZ2luZSkge1xuICByZWFjdGl2ZSA9IGVuZ2luZS5yZWFjdGl2ZTtcbiAgcmVsZWFzZSA9IGVuZ2luZS5yZWxlYXNlO1xuICBlZmZlY3QgPSAoY2FsbGJhY2spID0+IGVuZ2luZS5lZmZlY3QoY2FsbGJhY2ssIHsgc2NoZWR1bGVyOiAodGFzaykgPT4ge1xuICAgIGlmIChzaG91bGRTY2hlZHVsZSkge1xuICAgICAgc2NoZWR1bGVyKHRhc2spO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXNrKCk7XG4gICAgfVxuICB9IH0pO1xuICByYXcgPSBlbmdpbmUucmF3O1xufVxuZnVuY3Rpb24gb3ZlcnJpZGVFZmZlY3Qob3ZlcnJpZGUpIHtcbiAgZWZmZWN0ID0gb3ZlcnJpZGU7XG59XG5mdW5jdGlvbiBlbGVtZW50Qm91bmRFZmZlY3QoZWwpIHtcbiAgbGV0IGNsZWFudXAyID0gKCkgPT4ge1xuICB9O1xuICBsZXQgd3JhcHBlZEVmZmVjdCA9IChjYWxsYmFjaykgPT4ge1xuICAgIGxldCBlZmZlY3RSZWZlcmVuY2UgPSBlZmZlY3QoY2FsbGJhY2spO1xuICAgIGlmICghZWwuX3hfZWZmZWN0cykge1xuICAgICAgZWwuX3hfZWZmZWN0cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgICBlbC5feF9ydW5FZmZlY3RzID0gKCkgPT4ge1xuICAgICAgICBlbC5feF9lZmZlY3RzLmZvckVhY2goKGkpID0+IGkoKSk7XG4gICAgICB9O1xuICAgIH1cbiAgICBlbC5feF9lZmZlY3RzLmFkZChlZmZlY3RSZWZlcmVuY2UpO1xuICAgIGNsZWFudXAyID0gKCkgPT4ge1xuICAgICAgaWYgKGVmZmVjdFJlZmVyZW5jZSA9PT0gdm9pZCAwKVxuICAgICAgICByZXR1cm47XG4gICAgICBlbC5feF9lZmZlY3RzLmRlbGV0ZShlZmZlY3RSZWZlcmVuY2UpO1xuICAgICAgcmVsZWFzZShlZmZlY3RSZWZlcmVuY2UpO1xuICAgIH07XG4gICAgcmV0dXJuIGVmZmVjdFJlZmVyZW5jZTtcbiAgfTtcbiAgcmV0dXJuIFt3cmFwcGVkRWZmZWN0LCAoKSA9PiB7XG4gICAgY2xlYW51cDIoKTtcbiAgfV07XG59XG5mdW5jdGlvbiB3YXRjaChnZXR0ZXIsIGNhbGxiYWNrKSB7XG4gIGxldCBmaXJzdFRpbWUgPSB0cnVlO1xuICBsZXQgb2xkVmFsdWU7XG4gIGxldCBlZmZlY3RSZWZlcmVuY2UgPSBlZmZlY3QoKCkgPT4ge1xuICAgIGxldCB2YWx1ZSA9IGdldHRlcigpO1xuICAgIEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICBpZiAoIWZpcnN0VGltZSkge1xuICAgICAgcXVldWVNaWNyb3Rhc2soKCkgPT4ge1xuICAgICAgICBjYWxsYmFjayh2YWx1ZSwgb2xkVmFsdWUpO1xuICAgICAgICBvbGRWYWx1ZSA9IHZhbHVlO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9sZFZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIGZpcnN0VGltZSA9IGZhbHNlO1xuICB9KTtcbiAgcmV0dXJuICgpID0+IHJlbGVhc2UoZWZmZWN0UmVmZXJlbmNlKTtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL211dGF0aW9uLmpzXG52YXIgb25BdHRyaWJ1dGVBZGRlZHMgPSBbXTtcbnZhciBvbkVsUmVtb3ZlZHMgPSBbXTtcbnZhciBvbkVsQWRkZWRzID0gW107XG5mdW5jdGlvbiBvbkVsQWRkZWQoY2FsbGJhY2spIHtcbiAgb25FbEFkZGVkcy5wdXNoKGNhbGxiYWNrKTtcbn1cbmZ1bmN0aW9uIG9uRWxSZW1vdmVkKGVsLCBjYWxsYmFjaykge1xuICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBpZiAoIWVsLl94X2NsZWFudXBzKVxuICAgICAgZWwuX3hfY2xlYW51cHMgPSBbXTtcbiAgICBlbC5feF9jbGVhbnVwcy5wdXNoKGNhbGxiYWNrKTtcbiAgfSBlbHNlIHtcbiAgICBjYWxsYmFjayA9IGVsO1xuICAgIG9uRWxSZW1vdmVkcy5wdXNoKGNhbGxiYWNrKTtcbiAgfVxufVxuZnVuY3Rpb24gb25BdHRyaWJ1dGVzQWRkZWQoY2FsbGJhY2spIHtcbiAgb25BdHRyaWJ1dGVBZGRlZHMucHVzaChjYWxsYmFjayk7XG59XG5mdW5jdGlvbiBvbkF0dHJpYnV0ZVJlbW92ZWQoZWwsIG5hbWUsIGNhbGxiYWNrKSB7XG4gIGlmICghZWwuX3hfYXR0cmlidXRlQ2xlYW51cHMpXG4gICAgZWwuX3hfYXR0cmlidXRlQ2xlYW51cHMgPSB7fTtcbiAgaWYgKCFlbC5feF9hdHRyaWJ1dGVDbGVhbnVwc1tuYW1lXSlcbiAgICBlbC5feF9hdHRyaWJ1dGVDbGVhbnVwc1tuYW1lXSA9IFtdO1xuICBlbC5feF9hdHRyaWJ1dGVDbGVhbnVwc1tuYW1lXS5wdXNoKGNhbGxiYWNrKTtcbn1cbmZ1bmN0aW9uIGNsZWFudXBBdHRyaWJ1dGVzKGVsLCBuYW1lcykge1xuICBpZiAoIWVsLl94X2F0dHJpYnV0ZUNsZWFudXBzKVxuICAgIHJldHVybjtcbiAgT2JqZWN0LmVudHJpZXMoZWwuX3hfYXR0cmlidXRlQ2xlYW51cHMpLmZvckVhY2goKFtuYW1lLCB2YWx1ZV0pID0+IHtcbiAgICBpZiAobmFtZXMgPT09IHZvaWQgMCB8fCBuYW1lcy5pbmNsdWRlcyhuYW1lKSkge1xuICAgICAgdmFsdWUuZm9yRWFjaCgoaSkgPT4gaSgpKTtcbiAgICAgIGRlbGV0ZSBlbC5feF9hdHRyaWJ1dGVDbGVhbnVwc1tuYW1lXTtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gY2xlYW51cEVsZW1lbnQoZWwpIHtcbiAgZWwuX3hfZWZmZWN0cz8uZm9yRWFjaChkZXF1ZXVlSm9iKTtcbiAgd2hpbGUgKGVsLl94X2NsZWFudXBzPy5sZW5ndGgpXG4gICAgZWwuX3hfY2xlYW51cHMucG9wKCkoKTtcbn1cbnZhciBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKG9uTXV0YXRlKTtcbnZhciBjdXJyZW50bHlPYnNlcnZpbmcgPSBmYWxzZTtcbmZ1bmN0aW9uIHN0YXJ0T2JzZXJ2aW5nTXV0YXRpb25zKCkge1xuICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LCB7IHN1YnRyZWU6IHRydWUsIGNoaWxkTGlzdDogdHJ1ZSwgYXR0cmlidXRlczogdHJ1ZSwgYXR0cmlidXRlT2xkVmFsdWU6IHRydWUgfSk7XG4gIGN1cnJlbnRseU9ic2VydmluZyA9IHRydWU7XG59XG5mdW5jdGlvbiBzdG9wT2JzZXJ2aW5nTXV0YXRpb25zKCkge1xuICBmbHVzaE9ic2VydmVyKCk7XG4gIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgY3VycmVudGx5T2JzZXJ2aW5nID0gZmFsc2U7XG59XG52YXIgcXVldWVkTXV0YXRpb25zID0gW107XG5mdW5jdGlvbiBmbHVzaE9ic2VydmVyKCkge1xuICBsZXQgcmVjb3JkcyA9IG9ic2VydmVyLnRha2VSZWNvcmRzKCk7XG4gIHF1ZXVlZE11dGF0aW9ucy5wdXNoKCgpID0+IHJlY29yZHMubGVuZ3RoID4gMCAmJiBvbk11dGF0ZShyZWNvcmRzKSk7XG4gIGxldCBxdWV1ZUxlbmd0aFdoZW5UcmlnZ2VyZWQgPSBxdWV1ZWRNdXRhdGlvbnMubGVuZ3RoO1xuICBxdWV1ZU1pY3JvdGFzaygoKSA9PiB7XG4gICAgaWYgKHF1ZXVlZE11dGF0aW9ucy5sZW5ndGggPT09IHF1ZXVlTGVuZ3RoV2hlblRyaWdnZXJlZCkge1xuICAgICAgd2hpbGUgKHF1ZXVlZE11dGF0aW9ucy5sZW5ndGggPiAwKVxuICAgICAgICBxdWV1ZWRNdXRhdGlvbnMuc2hpZnQoKSgpO1xuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBtdXRhdGVEb20oY2FsbGJhY2spIHtcbiAgaWYgKCFjdXJyZW50bHlPYnNlcnZpbmcpXG4gICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gIHN0b3BPYnNlcnZpbmdNdXRhdGlvbnMoKTtcbiAgbGV0IHJlc3VsdCA9IGNhbGxiYWNrKCk7XG4gIHN0YXJ0T2JzZXJ2aW5nTXV0YXRpb25zKCk7XG4gIHJldHVybiByZXN1bHQ7XG59XG52YXIgaXNDb2xsZWN0aW5nID0gZmFsc2U7XG52YXIgZGVmZXJyZWRNdXRhdGlvbnMgPSBbXTtcbmZ1bmN0aW9uIGRlZmVyTXV0YXRpb25zKCkge1xuICBpc0NvbGxlY3RpbmcgPSB0cnVlO1xufVxuZnVuY3Rpb24gZmx1c2hBbmRTdG9wRGVmZXJyaW5nTXV0YXRpb25zKCkge1xuICBpc0NvbGxlY3RpbmcgPSBmYWxzZTtcbiAgb25NdXRhdGUoZGVmZXJyZWRNdXRhdGlvbnMpO1xuICBkZWZlcnJlZE11dGF0aW9ucyA9IFtdO1xufVxuZnVuY3Rpb24gb25NdXRhdGUobXV0YXRpb25zKSB7XG4gIGlmIChpc0NvbGxlY3RpbmcpIHtcbiAgICBkZWZlcnJlZE11dGF0aW9ucyA9IGRlZmVycmVkTXV0YXRpb25zLmNvbmNhdChtdXRhdGlvbnMpO1xuICAgIHJldHVybjtcbiAgfVxuICBsZXQgYWRkZWROb2RlcyA9IFtdO1xuICBsZXQgcmVtb3ZlZE5vZGVzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgbGV0IGFkZGVkQXR0cmlidXRlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIGxldCByZW1vdmVkQXR0cmlidXRlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbXV0YXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKG11dGF0aW9uc1tpXS50YXJnZXQuX3hfaWdub3JlTXV0YXRpb25PYnNlcnZlcilcbiAgICAgIGNvbnRpbnVlO1xuICAgIGlmIChtdXRhdGlvbnNbaV0udHlwZSA9PT0gXCJjaGlsZExpc3RcIikge1xuICAgICAgbXV0YXRpb25zW2ldLnJlbW92ZWROb2Rlcy5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgIGlmIChub2RlLm5vZGVUeXBlICE9PSAxKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKCFub2RlLl94X21hcmtlcilcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIHJlbW92ZWROb2Rlcy5hZGQobm9kZSk7XG4gICAgICB9KTtcbiAgICAgIG11dGF0aW9uc1tpXS5hZGRlZE5vZGVzLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgIT09IDEpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAocmVtb3ZlZE5vZGVzLmhhcyhub2RlKSkge1xuICAgICAgICAgIHJlbW92ZWROb2Rlcy5kZWxldGUobm9kZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlLl94X21hcmtlcilcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIGFkZGVkTm9kZXMucHVzaChub2RlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAobXV0YXRpb25zW2ldLnR5cGUgPT09IFwiYXR0cmlidXRlc1wiKSB7XG4gICAgICBsZXQgZWwgPSBtdXRhdGlvbnNbaV0udGFyZ2V0O1xuICAgICAgbGV0IG5hbWUgPSBtdXRhdGlvbnNbaV0uYXR0cmlidXRlTmFtZTtcbiAgICAgIGxldCBvbGRWYWx1ZSA9IG11dGF0aW9uc1tpXS5vbGRWYWx1ZTtcbiAgICAgIGxldCBhZGQyID0gKCkgPT4ge1xuICAgICAgICBpZiAoIWFkZGVkQXR0cmlidXRlcy5oYXMoZWwpKVxuICAgICAgICAgIGFkZGVkQXR0cmlidXRlcy5zZXQoZWwsIFtdKTtcbiAgICAgICAgYWRkZWRBdHRyaWJ1dGVzLmdldChlbCkucHVzaCh7IG5hbWUsIHZhbHVlOiBlbC5nZXRBdHRyaWJ1dGUobmFtZSkgfSk7XG4gICAgICB9O1xuICAgICAgbGV0IHJlbW92ZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKCFyZW1vdmVkQXR0cmlidXRlcy5oYXMoZWwpKVxuICAgICAgICAgIHJlbW92ZWRBdHRyaWJ1dGVzLnNldChlbCwgW10pO1xuICAgICAgICByZW1vdmVkQXR0cmlidXRlcy5nZXQoZWwpLnB1c2gobmFtZSk7XG4gICAgICB9O1xuICAgICAgaWYgKGVsLmhhc0F0dHJpYnV0ZShuYW1lKSAmJiBvbGRWYWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICBhZGQyKCk7XG4gICAgICB9IGVsc2UgaWYgKGVsLmhhc0F0dHJpYnV0ZShuYW1lKSkge1xuICAgICAgICByZW1vdmUoKTtcbiAgICAgICAgYWRkMigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJlbW92ZWRBdHRyaWJ1dGVzLmZvckVhY2goKGF0dHJzLCBlbCkgPT4ge1xuICAgIGNsZWFudXBBdHRyaWJ1dGVzKGVsLCBhdHRycyk7XG4gIH0pO1xuICBhZGRlZEF0dHJpYnV0ZXMuZm9yRWFjaCgoYXR0cnMsIGVsKSA9PiB7XG4gICAgb25BdHRyaWJ1dGVBZGRlZHMuZm9yRWFjaCgoaSkgPT4gaShlbCwgYXR0cnMpKTtcbiAgfSk7XG4gIGZvciAobGV0IG5vZGUgb2YgcmVtb3ZlZE5vZGVzKSB7XG4gICAgaWYgKGFkZGVkTm9kZXMuc29tZSgoaSkgPT4gaS5jb250YWlucyhub2RlKSkpXG4gICAgICBjb250aW51ZTtcbiAgICBvbkVsUmVtb3ZlZHMuZm9yRWFjaCgoaSkgPT4gaShub2RlKSk7XG4gIH1cbiAgZm9yIChsZXQgbm9kZSBvZiBhZGRlZE5vZGVzKSB7XG4gICAgaWYgKCFub2RlLmlzQ29ubmVjdGVkKVxuICAgICAgY29udGludWU7XG4gICAgb25FbEFkZGVkcy5mb3JFYWNoKChpKSA9PiBpKG5vZGUpKTtcbiAgfVxuICBhZGRlZE5vZGVzID0gbnVsbDtcbiAgcmVtb3ZlZE5vZGVzID0gbnVsbDtcbiAgYWRkZWRBdHRyaWJ1dGVzID0gbnVsbDtcbiAgcmVtb3ZlZEF0dHJpYnV0ZXMgPSBudWxsO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvc2NvcGUuanNcbmZ1bmN0aW9uIHNjb3BlKG5vZGUpIHtcbiAgcmV0dXJuIG1lcmdlUHJveGllcyhjbG9zZXN0RGF0YVN0YWNrKG5vZGUpKTtcbn1cbmZ1bmN0aW9uIGFkZFNjb3BlVG9Ob2RlKG5vZGUsIGRhdGEyLCByZWZlcmVuY2VOb2RlKSB7XG4gIG5vZGUuX3hfZGF0YVN0YWNrID0gW2RhdGEyLCAuLi5jbG9zZXN0RGF0YVN0YWNrKHJlZmVyZW5jZU5vZGUgfHwgbm9kZSldO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIG5vZGUuX3hfZGF0YVN0YWNrID0gbm9kZS5feF9kYXRhU3RhY2suZmlsdGVyKChpKSA9PiBpICE9PSBkYXRhMik7XG4gIH07XG59XG5mdW5jdGlvbiBjbG9zZXN0RGF0YVN0YWNrKG5vZGUpIHtcbiAgaWYgKG5vZGUuX3hfZGF0YVN0YWNrKVxuICAgIHJldHVybiBub2RlLl94X2RhdGFTdGFjaztcbiAgaWYgKHR5cGVvZiBTaGFkb3dSb290ID09PSBcImZ1bmN0aW9uXCIgJiYgbm9kZSBpbnN0YW5jZW9mIFNoYWRvd1Jvb3QpIHtcbiAgICByZXR1cm4gY2xvc2VzdERhdGFTdGFjayhub2RlLmhvc3QpO1xuICB9XG4gIGlmICghbm9kZS5wYXJlbnROb2RlKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIHJldHVybiBjbG9zZXN0RGF0YVN0YWNrKG5vZGUucGFyZW50Tm9kZSk7XG59XG5mdW5jdGlvbiBtZXJnZVByb3hpZXMob2JqZWN0cykge1xuICByZXR1cm4gbmV3IFByb3h5KHsgb2JqZWN0cyB9LCBtZXJnZVByb3h5VHJhcCk7XG59XG52YXIgbWVyZ2VQcm94eVRyYXAgPSB7XG4gIG93bktleXMoeyBvYmplY3RzIH0pIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShcbiAgICAgIG5ldyBTZXQob2JqZWN0cy5mbGF0TWFwKChpKSA9PiBPYmplY3Qua2V5cyhpKSkpXG4gICAgKTtcbiAgfSxcbiAgaGFzKHsgb2JqZWN0cyB9LCBuYW1lKSB7XG4gICAgaWYgKG5hbWUgPT0gU3ltYm9sLnVuc2NvcGFibGVzKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiBvYmplY3RzLnNvbWUoXG4gICAgICAob2JqKSA9PiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBuYW1lKSB8fCBSZWZsZWN0LmhhcyhvYmosIG5hbWUpXG4gICAgKTtcbiAgfSxcbiAgZ2V0KHsgb2JqZWN0cyB9LCBuYW1lLCB0aGlzUHJveHkpIHtcbiAgICBpZiAobmFtZSA9PSBcInRvSlNPTlwiKVxuICAgICAgcmV0dXJuIGNvbGxhcHNlUHJveGllcztcbiAgICByZXR1cm4gUmVmbGVjdC5nZXQoXG4gICAgICBvYmplY3RzLmZpbmQoXG4gICAgICAgIChvYmopID0+IFJlZmxlY3QuaGFzKG9iaiwgbmFtZSlcbiAgICAgICkgfHwge30sXG4gICAgICBuYW1lLFxuICAgICAgdGhpc1Byb3h5XG4gICAgKTtcbiAgfSxcbiAgc2V0KHsgb2JqZWN0cyB9LCBuYW1lLCB2YWx1ZSwgdGhpc1Byb3h5KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gb2JqZWN0cy5maW5kKFxuICAgICAgKG9iaikgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgbmFtZSlcbiAgICApIHx8IG9iamVjdHNbb2JqZWN0cy5sZW5ndGggLSAxXTtcbiAgICBjb25zdCBkZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIG5hbWUpO1xuICAgIGlmIChkZXNjcmlwdG9yPy5zZXQgJiYgZGVzY3JpcHRvcj8uZ2V0KVxuICAgICAgcmV0dXJuIGRlc2NyaXB0b3Iuc2V0LmNhbGwodGhpc1Byb3h5LCB2YWx1ZSkgfHwgdHJ1ZTtcbiAgICByZXR1cm4gUmVmbGVjdC5zZXQodGFyZ2V0LCBuYW1lLCB2YWx1ZSk7XG4gIH1cbn07XG5mdW5jdGlvbiBjb2xsYXBzZVByb3hpZXMoKSB7XG4gIGxldCBrZXlzID0gUmVmbGVjdC5vd25LZXlzKHRoaXMpO1xuICByZXR1cm4ga2V5cy5yZWR1Y2UoKGFjYywga2V5KSA9PiB7XG4gICAgYWNjW2tleV0gPSBSZWZsZWN0LmdldCh0aGlzLCBrZXkpO1xuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9KTtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2ludGVyY2VwdG9yLmpzXG5mdW5jdGlvbiBpbml0SW50ZXJjZXB0b3JzKGRhdGEyKSB7XG4gIGxldCBpc09iamVjdDIgPSAodmFsKSA9PiB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiICYmICFBcnJheS5pc0FycmF5KHZhbCkgJiYgdmFsICE9PSBudWxsO1xuICBsZXQgcmVjdXJzZSA9IChvYmosIGJhc2VQYXRoID0gXCJcIikgPT4ge1xuICAgIE9iamVjdC5lbnRyaWVzKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG9iaikpLmZvckVhY2goKFtrZXksIHsgdmFsdWUsIGVudW1lcmFibGUgfV0pID0+IHtcbiAgICAgIGlmIChlbnVtZXJhYmxlID09PSBmYWxzZSB8fCB2YWx1ZSA9PT0gdm9pZCAwKVxuICAgICAgICByZXR1cm47XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9PSBudWxsICYmIHZhbHVlLl9fdl9za2lwKVxuICAgICAgICByZXR1cm47XG4gICAgICBsZXQgcGF0aCA9IGJhc2VQYXRoID09PSBcIlwiID8ga2V5IDogYCR7YmFzZVBhdGh9LiR7a2V5fWA7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9PSBudWxsICYmIHZhbHVlLl94X2ludGVyY2VwdG9yKSB7XG4gICAgICAgIG9ialtrZXldID0gdmFsdWUuaW5pdGlhbGl6ZShkYXRhMiwgcGF0aCwga2V5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChpc09iamVjdDIodmFsdWUpICYmIHZhbHVlICE9PSBvYmogJiYgISh2YWx1ZSBpbnN0YW5jZW9mIEVsZW1lbnQpKSB7XG4gICAgICAgICAgcmVjdXJzZSh2YWx1ZSwgcGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbiAgcmV0dXJuIHJlY3Vyc2UoZGF0YTIpO1xufVxuZnVuY3Rpb24gaW50ZXJjZXB0b3IoY2FsbGJhY2ssIG11dGF0ZU9iaiA9ICgpID0+IHtcbn0pIHtcbiAgbGV0IG9iaiA9IHtcbiAgICBpbml0aWFsVmFsdWU6IHZvaWQgMCxcbiAgICBfeF9pbnRlcmNlcHRvcjogdHJ1ZSxcbiAgICBpbml0aWFsaXplKGRhdGEyLCBwYXRoLCBrZXkpIHtcbiAgICAgIHJldHVybiBjYWxsYmFjayh0aGlzLmluaXRpYWxWYWx1ZSwgKCkgPT4gZ2V0KGRhdGEyLCBwYXRoKSwgKHZhbHVlKSA9PiBzZXQoZGF0YTIsIHBhdGgsIHZhbHVlKSwgcGF0aCwga2V5KTtcbiAgICB9XG4gIH07XG4gIG11dGF0ZU9iaihvYmopO1xuICByZXR1cm4gKGluaXRpYWxWYWx1ZSkgPT4ge1xuICAgIGlmICh0eXBlb2YgaW5pdGlhbFZhbHVlID09PSBcIm9iamVjdFwiICYmIGluaXRpYWxWYWx1ZSAhPT0gbnVsbCAmJiBpbml0aWFsVmFsdWUuX3hfaW50ZXJjZXB0b3IpIHtcbiAgICAgIGxldCBpbml0aWFsaXplID0gb2JqLmluaXRpYWxpemUuYmluZChvYmopO1xuICAgICAgb2JqLmluaXRpYWxpemUgPSAoZGF0YTIsIHBhdGgsIGtleSkgPT4ge1xuICAgICAgICBsZXQgaW5uZXJWYWx1ZSA9IGluaXRpYWxWYWx1ZS5pbml0aWFsaXplKGRhdGEyLCBwYXRoLCBrZXkpO1xuICAgICAgICBvYmouaW5pdGlhbFZhbHVlID0gaW5uZXJWYWx1ZTtcbiAgICAgICAgcmV0dXJuIGluaXRpYWxpemUoZGF0YTIsIHBhdGgsIGtleSk7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBvYmouaW5pdGlhbFZhbHVlID0gaW5pdGlhbFZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xuICB9O1xufVxuZnVuY3Rpb24gZ2V0KG9iaiwgcGF0aCkge1xuICByZXR1cm4gcGF0aC5zcGxpdChcIi5cIikucmVkdWNlKChjYXJyeSwgc2VnbWVudCkgPT4gY2Fycnlbc2VnbWVudF0sIG9iaik7XG59XG5mdW5jdGlvbiBzZXQob2JqLCBwYXRoLCB2YWx1ZSkge1xuICBpZiAodHlwZW9mIHBhdGggPT09IFwic3RyaW5nXCIpXG4gICAgcGF0aCA9IHBhdGguc3BsaXQoXCIuXCIpO1xuICBpZiAocGF0aC5sZW5ndGggPT09IDEpXG4gICAgb2JqW3BhdGhbMF1dID0gdmFsdWU7XG4gIGVsc2UgaWYgKHBhdGgubGVuZ3RoID09PSAwKVxuICAgIHRocm93IGVycm9yO1xuICBlbHNlIHtcbiAgICBpZiAob2JqW3BhdGhbMF1dKVxuICAgICAgcmV0dXJuIHNldChvYmpbcGF0aFswXV0sIHBhdGguc2xpY2UoMSksIHZhbHVlKTtcbiAgICBlbHNlIHtcbiAgICAgIG9ialtwYXRoWzBdXSA9IHt9O1xuICAgICAgcmV0dXJuIHNldChvYmpbcGF0aFswXV0sIHBhdGguc2xpY2UoMSksIHZhbHVlKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL21hZ2ljcy5qc1xudmFyIG1hZ2ljcyA9IHt9O1xuZnVuY3Rpb24gbWFnaWMobmFtZSwgY2FsbGJhY2spIHtcbiAgbWFnaWNzW25hbWVdID0gY2FsbGJhY2s7XG59XG5mdW5jdGlvbiBpbmplY3RNYWdpY3Mob2JqLCBlbCkge1xuICBsZXQgbWVtb2l6ZWRVdGlsaXRpZXMgPSBnZXRVdGlsaXRpZXMoZWwpO1xuICBPYmplY3QuZW50cmllcyhtYWdpY3MpLmZvckVhY2goKFtuYW1lLCBjYWxsYmFja10pID0+IHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBgJCR7bmFtZX1gLCB7XG4gICAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhlbCwgbWVtb2l6ZWRVdGlsaXRpZXMpO1xuICAgICAgfSxcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlXG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gb2JqO1xufVxuZnVuY3Rpb24gZ2V0VXRpbGl0aWVzKGVsKSB7XG4gIGxldCBbdXRpbGl0aWVzLCBjbGVhbnVwMl0gPSBnZXRFbGVtZW50Qm91bmRVdGlsaXRpZXMoZWwpO1xuICBsZXQgdXRpbHMgPSB7IGludGVyY2VwdG9yLCAuLi51dGlsaXRpZXMgfTtcbiAgb25FbFJlbW92ZWQoZWwsIGNsZWFudXAyKTtcbiAgcmV0dXJuIHV0aWxzO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvdXRpbHMvZXJyb3IuanNcbmZ1bmN0aW9uIHRyeUNhdGNoKGVsLCBleHByZXNzaW9uLCBjYWxsYmFjaywgLi4uYXJncykge1xuICB0cnkge1xuICAgIHJldHVybiBjYWxsYmFjayguLi5hcmdzKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGhhbmRsZUVycm9yKGUsIGVsLCBleHByZXNzaW9uKTtcbiAgfVxufVxuZnVuY3Rpb24gaGFuZGxlRXJyb3IoZXJyb3IyLCBlbCwgZXhwcmVzc2lvbiA9IHZvaWQgMCkge1xuICBlcnJvcjIgPSBPYmplY3QuYXNzaWduKFxuICAgIGVycm9yMiA/PyB7IG1lc3NhZ2U6IFwiTm8gZXJyb3IgbWVzc2FnZSBnaXZlbi5cIiB9LFxuICAgIHsgZWwsIGV4cHJlc3Npb24gfVxuICApO1xuICBjb25zb2xlLndhcm4oYEFscGluZSBFeHByZXNzaW9uIEVycm9yOiAke2Vycm9yMi5tZXNzYWdlfVxuXG4ke2V4cHJlc3Npb24gPyAnRXhwcmVzc2lvbjogXCInICsgZXhwcmVzc2lvbiArICdcIlxcblxcbicgOiBcIlwifWAsIGVsKTtcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgdGhyb3cgZXJyb3IyO1xuICB9LCAwKTtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2V2YWx1YXRvci5qc1xudmFyIHNob3VsZEF1dG9FdmFsdWF0ZUZ1bmN0aW9ucyA9IHRydWU7XG5mdW5jdGlvbiBkb250QXV0b0V2YWx1YXRlRnVuY3Rpb25zKGNhbGxiYWNrKSB7XG4gIGxldCBjYWNoZSA9IHNob3VsZEF1dG9FdmFsdWF0ZUZ1bmN0aW9ucztcbiAgc2hvdWxkQXV0b0V2YWx1YXRlRnVuY3Rpb25zID0gZmFsc2U7XG4gIGxldCByZXN1bHQgPSBjYWxsYmFjaygpO1xuICBzaG91bGRBdXRvRXZhbHVhdGVGdW5jdGlvbnMgPSBjYWNoZTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGV2YWx1YXRlKGVsLCBleHByZXNzaW9uLCBleHRyYXMgPSB7fSkge1xuICBsZXQgcmVzdWx0O1xuICBldmFsdWF0ZUxhdGVyKGVsLCBleHByZXNzaW9uKSgodmFsdWUpID0+IHJlc3VsdCA9IHZhbHVlLCBleHRyYXMpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gZXZhbHVhdGVMYXRlciguLi5hcmdzKSB7XG4gIHJldHVybiB0aGVFdmFsdWF0b3JGdW5jdGlvbiguLi5hcmdzKTtcbn1cbnZhciB0aGVFdmFsdWF0b3JGdW5jdGlvbiA9IG5vcm1hbEV2YWx1YXRvcjtcbmZ1bmN0aW9uIHNldEV2YWx1YXRvcihuZXdFdmFsdWF0b3IpIHtcbiAgdGhlRXZhbHVhdG9yRnVuY3Rpb24gPSBuZXdFdmFsdWF0b3I7XG59XG5mdW5jdGlvbiBub3JtYWxFdmFsdWF0b3IoZWwsIGV4cHJlc3Npb24pIHtcbiAgbGV0IG92ZXJyaWRkZW5NYWdpY3MgPSB7fTtcbiAgaW5qZWN0TWFnaWNzKG92ZXJyaWRkZW5NYWdpY3MsIGVsKTtcbiAgbGV0IGRhdGFTdGFjayA9IFtvdmVycmlkZGVuTWFnaWNzLCAuLi5jbG9zZXN0RGF0YVN0YWNrKGVsKV07XG4gIGxldCBldmFsdWF0b3IgPSB0eXBlb2YgZXhwcmVzc2lvbiA9PT0gXCJmdW5jdGlvblwiID8gZ2VuZXJhdGVFdmFsdWF0b3JGcm9tRnVuY3Rpb24oZGF0YVN0YWNrLCBleHByZXNzaW9uKSA6IGdlbmVyYXRlRXZhbHVhdG9yRnJvbVN0cmluZyhkYXRhU3RhY2ssIGV4cHJlc3Npb24sIGVsKTtcbiAgcmV0dXJuIHRyeUNhdGNoLmJpbmQobnVsbCwgZWwsIGV4cHJlc3Npb24sIGV2YWx1YXRvcik7XG59XG5mdW5jdGlvbiBnZW5lcmF0ZUV2YWx1YXRvckZyb21GdW5jdGlvbihkYXRhU3RhY2ssIGZ1bmMpIHtcbiAgcmV0dXJuIChyZWNlaXZlciA9ICgpID0+IHtcbiAgfSwgeyBzY29wZTogc2NvcGUyID0ge30sIHBhcmFtcyA9IFtdIH0gPSB7fSkgPT4ge1xuICAgIGxldCByZXN1bHQgPSBmdW5jLmFwcGx5KG1lcmdlUHJveGllcyhbc2NvcGUyLCAuLi5kYXRhU3RhY2tdKSwgcGFyYW1zKTtcbiAgICBydW5JZlR5cGVPZkZ1bmN0aW9uKHJlY2VpdmVyLCByZXN1bHQpO1xuICB9O1xufVxudmFyIGV2YWx1YXRvck1lbW8gPSB7fTtcbmZ1bmN0aW9uIGdlbmVyYXRlRnVuY3Rpb25Gcm9tU3RyaW5nKGV4cHJlc3Npb24sIGVsKSB7XG4gIGlmIChldmFsdWF0b3JNZW1vW2V4cHJlc3Npb25dKSB7XG4gICAgcmV0dXJuIGV2YWx1YXRvck1lbW9bZXhwcmVzc2lvbl07XG4gIH1cbiAgbGV0IEFzeW5jRnVuY3Rpb24gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoYXN5bmMgZnVuY3Rpb24oKSB7XG4gIH0pLmNvbnN0cnVjdG9yO1xuICBsZXQgcmlnaHRTaWRlU2FmZUV4cHJlc3Npb24gPSAvXltcXG5cXHNdKmlmLipcXCguKlxcKS8udGVzdChleHByZXNzaW9uLnRyaW0oKSkgfHwgL14obGV0fGNvbnN0KVxccy8udGVzdChleHByZXNzaW9uLnRyaW0oKSkgPyBgKGFzeW5jKCk9PnsgJHtleHByZXNzaW9ufSB9KSgpYCA6IGV4cHJlc3Npb247XG4gIGNvbnN0IHNhZmVBc3luY0Z1bmN0aW9uID0gKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBsZXQgZnVuYzIgPSBuZXcgQXN5bmNGdW5jdGlvbihcbiAgICAgICAgW1wiX19zZWxmXCIsIFwic2NvcGVcIl0sXG4gICAgICAgIGB3aXRoIChzY29wZSkgeyBfX3NlbGYucmVzdWx0ID0gJHtyaWdodFNpZGVTYWZlRXhwcmVzc2lvbn0gfTsgX19zZWxmLmZpbmlzaGVkID0gdHJ1ZTsgcmV0dXJuIF9fc2VsZi5yZXN1bHQ7YFxuICAgICAgKTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmdW5jMiwgXCJuYW1lXCIsIHtcbiAgICAgICAgdmFsdWU6IGBbQWxwaW5lXSAke2V4cHJlc3Npb259YFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gZnVuYzI7XG4gICAgfSBjYXRjaCAoZXJyb3IyKSB7XG4gICAgICBoYW5kbGVFcnJvcihlcnJvcjIsIGVsLCBleHByZXNzaW9uKTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gIH07XG4gIGxldCBmdW5jID0gc2FmZUFzeW5jRnVuY3Rpb24oKTtcbiAgZXZhbHVhdG9yTWVtb1tleHByZXNzaW9uXSA9IGZ1bmM7XG4gIHJldHVybiBmdW5jO1xufVxuZnVuY3Rpb24gZ2VuZXJhdGVFdmFsdWF0b3JGcm9tU3RyaW5nKGRhdGFTdGFjaywgZXhwcmVzc2lvbiwgZWwpIHtcbiAgbGV0IGZ1bmMgPSBnZW5lcmF0ZUZ1bmN0aW9uRnJvbVN0cmluZyhleHByZXNzaW9uLCBlbCk7XG4gIHJldHVybiAocmVjZWl2ZXIgPSAoKSA9PiB7XG4gIH0sIHsgc2NvcGU6IHNjb3BlMiA9IHt9LCBwYXJhbXMgPSBbXSB9ID0ge30pID0+IHtcbiAgICBmdW5jLnJlc3VsdCA9IHZvaWQgMDtcbiAgICBmdW5jLmZpbmlzaGVkID0gZmFsc2U7XG4gICAgbGV0IGNvbXBsZXRlU2NvcGUgPSBtZXJnZVByb3hpZXMoW3Njb3BlMiwgLi4uZGF0YVN0YWNrXSk7XG4gICAgaWYgKHR5cGVvZiBmdW5jID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIGxldCBwcm9taXNlID0gZnVuYyhmdW5jLCBjb21wbGV0ZVNjb3BlKS5jYXRjaCgoZXJyb3IyKSA9PiBoYW5kbGVFcnJvcihlcnJvcjIsIGVsLCBleHByZXNzaW9uKSk7XG4gICAgICBpZiAoZnVuYy5maW5pc2hlZCkge1xuICAgICAgICBydW5JZlR5cGVPZkZ1bmN0aW9uKHJlY2VpdmVyLCBmdW5jLnJlc3VsdCwgY29tcGxldGVTY29wZSwgcGFyYW1zLCBlbCk7XG4gICAgICAgIGZ1bmMucmVzdWx0ID0gdm9pZCAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvbWlzZS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICBydW5JZlR5cGVPZkZ1bmN0aW9uKHJlY2VpdmVyLCByZXN1bHQsIGNvbXBsZXRlU2NvcGUsIHBhcmFtcywgZWwpO1xuICAgICAgICB9KS5jYXRjaCgoZXJyb3IyKSA9PiBoYW5kbGVFcnJvcihlcnJvcjIsIGVsLCBleHByZXNzaW9uKSkuZmluYWxseSgoKSA9PiBmdW5jLnJlc3VsdCA9IHZvaWQgMCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gcnVuSWZUeXBlT2ZGdW5jdGlvbihyZWNlaXZlciwgdmFsdWUsIHNjb3BlMiwgcGFyYW1zLCBlbCkge1xuICBpZiAoc2hvdWxkQXV0b0V2YWx1YXRlRnVuY3Rpb25zICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgbGV0IHJlc3VsdCA9IHZhbHVlLmFwcGx5KHNjb3BlMiwgcGFyYW1zKTtcbiAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgcmVzdWx0LnRoZW4oKGkpID0+IHJ1bklmVHlwZU9mRnVuY3Rpb24ocmVjZWl2ZXIsIGksIHNjb3BlMiwgcGFyYW1zKSkuY2F0Y2goKGVycm9yMikgPT4gaGFuZGxlRXJyb3IoZXJyb3IyLCBlbCwgdmFsdWUpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVjZWl2ZXIocmVzdWx0KTtcbiAgICB9XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgIHZhbHVlLnRoZW4oKGkpID0+IHJlY2VpdmVyKGkpKTtcbiAgfSBlbHNlIHtcbiAgICByZWNlaXZlcih2YWx1ZSk7XG4gIH1cbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2RpcmVjdGl2ZXMuanNcbnZhciBwcmVmaXhBc1N0cmluZyA9IFwieC1cIjtcbmZ1bmN0aW9uIHByZWZpeChzdWJqZWN0ID0gXCJcIikge1xuICByZXR1cm4gcHJlZml4QXNTdHJpbmcgKyBzdWJqZWN0O1xufVxuZnVuY3Rpb24gc2V0UHJlZml4KG5ld1ByZWZpeCkge1xuICBwcmVmaXhBc1N0cmluZyA9IG5ld1ByZWZpeDtcbn1cbnZhciBkaXJlY3RpdmVIYW5kbGVycyA9IHt9O1xuZnVuY3Rpb24gZGlyZWN0aXZlKG5hbWUsIGNhbGxiYWNrKSB7XG4gIGRpcmVjdGl2ZUhhbmRsZXJzW25hbWVdID0gY2FsbGJhY2s7XG4gIHJldHVybiB7XG4gICAgYmVmb3JlKGRpcmVjdGl2ZTIpIHtcbiAgICAgIGlmICghZGlyZWN0aXZlSGFuZGxlcnNbZGlyZWN0aXZlMl0pIHtcbiAgICAgICAgY29uc29sZS53YXJuKFN0cmluZy5yYXdgQ2Fubm90IGZpbmQgZGlyZWN0aXZlIFxcYCR7ZGlyZWN0aXZlMn1cXGAuIFxcYCR7bmFtZX1cXGAgd2lsbCB1c2UgdGhlIGRlZmF1bHQgb3JkZXIgb2YgZXhlY3V0aW9uYCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBvcyA9IGRpcmVjdGl2ZU9yZGVyLmluZGV4T2YoZGlyZWN0aXZlMik7XG4gICAgICBkaXJlY3RpdmVPcmRlci5zcGxpY2UocG9zID49IDAgPyBwb3MgOiBkaXJlY3RpdmVPcmRlci5pbmRleE9mKFwiREVGQVVMVFwiKSwgMCwgbmFtZSk7XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gZGlyZWN0aXZlRXhpc3RzKG5hbWUpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKGRpcmVjdGl2ZUhhbmRsZXJzKS5pbmNsdWRlcyhuYW1lKTtcbn1cbmZ1bmN0aW9uIGRpcmVjdGl2ZXMoZWwsIGF0dHJpYnV0ZXMsIG9yaWdpbmFsQXR0cmlidXRlT3ZlcnJpZGUpIHtcbiAgYXR0cmlidXRlcyA9IEFycmF5LmZyb20oYXR0cmlidXRlcyk7XG4gIGlmIChlbC5feF92aXJ0dWFsRGlyZWN0aXZlcykge1xuICAgIGxldCB2QXR0cmlidXRlcyA9IE9iamVjdC5lbnRyaWVzKGVsLl94X3ZpcnR1YWxEaXJlY3RpdmVzKS5tYXAoKFtuYW1lLCB2YWx1ZV0pID0+ICh7IG5hbWUsIHZhbHVlIH0pKTtcbiAgICBsZXQgc3RhdGljQXR0cmlidXRlcyA9IGF0dHJpYnV0ZXNPbmx5KHZBdHRyaWJ1dGVzKTtcbiAgICB2QXR0cmlidXRlcyA9IHZBdHRyaWJ1dGVzLm1hcCgoYXR0cmlidXRlKSA9PiB7XG4gICAgICBpZiAoc3RhdGljQXR0cmlidXRlcy5maW5kKChhdHRyKSA9PiBhdHRyLm5hbWUgPT09IGF0dHJpYnV0ZS5uYW1lKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG5hbWU6IGB4LWJpbmQ6JHthdHRyaWJ1dGUubmFtZX1gLFxuICAgICAgICAgIHZhbHVlOiBgXCIke2F0dHJpYnV0ZS52YWx1ZX1cImBcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhdHRyaWJ1dGU7XG4gICAgfSk7XG4gICAgYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXMuY29uY2F0KHZBdHRyaWJ1dGVzKTtcbiAgfVxuICBsZXQgdHJhbnNmb3JtZWRBdHRyaWJ1dGVNYXAgPSB7fTtcbiAgbGV0IGRpcmVjdGl2ZXMyID0gYXR0cmlidXRlcy5tYXAodG9UcmFuc2Zvcm1lZEF0dHJpYnV0ZXMoKG5ld05hbWUsIG9sZE5hbWUpID0+IHRyYW5zZm9ybWVkQXR0cmlidXRlTWFwW25ld05hbWVdID0gb2xkTmFtZSkpLmZpbHRlcihvdXROb25BbHBpbmVBdHRyaWJ1dGVzKS5tYXAodG9QYXJzZWREaXJlY3RpdmVzKHRyYW5zZm9ybWVkQXR0cmlidXRlTWFwLCBvcmlnaW5hbEF0dHJpYnV0ZU92ZXJyaWRlKSkuc29ydChieVByaW9yaXR5KTtcbiAgcmV0dXJuIGRpcmVjdGl2ZXMyLm1hcCgoZGlyZWN0aXZlMikgPT4ge1xuICAgIHJldHVybiBnZXREaXJlY3RpdmVIYW5kbGVyKGVsLCBkaXJlY3RpdmUyKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBhdHRyaWJ1dGVzT25seShhdHRyaWJ1dGVzKSB7XG4gIHJldHVybiBBcnJheS5mcm9tKGF0dHJpYnV0ZXMpLm1hcCh0b1RyYW5zZm9ybWVkQXR0cmlidXRlcygpKS5maWx0ZXIoKGF0dHIpID0+ICFvdXROb25BbHBpbmVBdHRyaWJ1dGVzKGF0dHIpKTtcbn1cbnZhciBpc0RlZmVycmluZ0hhbmRsZXJzID0gZmFsc2U7XG52YXIgZGlyZWN0aXZlSGFuZGxlclN0YWNrcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG52YXIgY3VycmVudEhhbmRsZXJTdGFja0tleSA9IFN5bWJvbCgpO1xuZnVuY3Rpb24gZGVmZXJIYW5kbGluZ0RpcmVjdGl2ZXMoY2FsbGJhY2spIHtcbiAgaXNEZWZlcnJpbmdIYW5kbGVycyA9IHRydWU7XG4gIGxldCBrZXkgPSBTeW1ib2woKTtcbiAgY3VycmVudEhhbmRsZXJTdGFja0tleSA9IGtleTtcbiAgZGlyZWN0aXZlSGFuZGxlclN0YWNrcy5zZXQoa2V5LCBbXSk7XG4gIGxldCBmbHVzaEhhbmRsZXJzID0gKCkgPT4ge1xuICAgIHdoaWxlIChkaXJlY3RpdmVIYW5kbGVyU3RhY2tzLmdldChrZXkpLmxlbmd0aClcbiAgICAgIGRpcmVjdGl2ZUhhbmRsZXJTdGFja3MuZ2V0KGtleSkuc2hpZnQoKSgpO1xuICAgIGRpcmVjdGl2ZUhhbmRsZXJTdGFja3MuZGVsZXRlKGtleSk7XG4gIH07XG4gIGxldCBzdG9wRGVmZXJyaW5nID0gKCkgPT4ge1xuICAgIGlzRGVmZXJyaW5nSGFuZGxlcnMgPSBmYWxzZTtcbiAgICBmbHVzaEhhbmRsZXJzKCk7XG4gIH07XG4gIGNhbGxiYWNrKGZsdXNoSGFuZGxlcnMpO1xuICBzdG9wRGVmZXJyaW5nKCk7XG59XG5mdW5jdGlvbiBnZXRFbGVtZW50Qm91bmRVdGlsaXRpZXMoZWwpIHtcbiAgbGV0IGNsZWFudXBzID0gW107XG4gIGxldCBjbGVhbnVwMiA9IChjYWxsYmFjaykgPT4gY2xlYW51cHMucHVzaChjYWxsYmFjayk7XG4gIGxldCBbZWZmZWN0MywgY2xlYW51cEVmZmVjdF0gPSBlbGVtZW50Qm91bmRFZmZlY3QoZWwpO1xuICBjbGVhbnVwcy5wdXNoKGNsZWFudXBFZmZlY3QpO1xuICBsZXQgdXRpbGl0aWVzID0ge1xuICAgIEFscGluZTogYWxwaW5lX2RlZmF1bHQsXG4gICAgZWZmZWN0OiBlZmZlY3QzLFxuICAgIGNsZWFudXA6IGNsZWFudXAyLFxuICAgIGV2YWx1YXRlTGF0ZXI6IGV2YWx1YXRlTGF0ZXIuYmluZChldmFsdWF0ZUxhdGVyLCBlbCksXG4gICAgZXZhbHVhdGU6IGV2YWx1YXRlLmJpbmQoZXZhbHVhdGUsIGVsKVxuICB9O1xuICBsZXQgZG9DbGVhbnVwID0gKCkgPT4gY2xlYW51cHMuZm9yRWFjaCgoaSkgPT4gaSgpKTtcbiAgcmV0dXJuIFt1dGlsaXRpZXMsIGRvQ2xlYW51cF07XG59XG5mdW5jdGlvbiBnZXREaXJlY3RpdmVIYW5kbGVyKGVsLCBkaXJlY3RpdmUyKSB7XG4gIGxldCBub29wID0gKCkgPT4ge1xuICB9O1xuICBsZXQgaGFuZGxlcjQgPSBkaXJlY3RpdmVIYW5kbGVyc1tkaXJlY3RpdmUyLnR5cGVdIHx8IG5vb3A7XG4gIGxldCBbdXRpbGl0aWVzLCBjbGVhbnVwMl0gPSBnZXRFbGVtZW50Qm91bmRVdGlsaXRpZXMoZWwpO1xuICBvbkF0dHJpYnV0ZVJlbW92ZWQoZWwsIGRpcmVjdGl2ZTIub3JpZ2luYWwsIGNsZWFudXAyKTtcbiAgbGV0IGZ1bGxIYW5kbGVyID0gKCkgPT4ge1xuICAgIGlmIChlbC5feF9pZ25vcmUgfHwgZWwuX3hfaWdub3JlU2VsZilcbiAgICAgIHJldHVybjtcbiAgICBoYW5kbGVyNC5pbmxpbmUgJiYgaGFuZGxlcjQuaW5saW5lKGVsLCBkaXJlY3RpdmUyLCB1dGlsaXRpZXMpO1xuICAgIGhhbmRsZXI0ID0gaGFuZGxlcjQuYmluZChoYW5kbGVyNCwgZWwsIGRpcmVjdGl2ZTIsIHV0aWxpdGllcyk7XG4gICAgaXNEZWZlcnJpbmdIYW5kbGVycyA/IGRpcmVjdGl2ZUhhbmRsZXJTdGFja3MuZ2V0KGN1cnJlbnRIYW5kbGVyU3RhY2tLZXkpLnB1c2goaGFuZGxlcjQpIDogaGFuZGxlcjQoKTtcbiAgfTtcbiAgZnVsbEhhbmRsZXIucnVuQ2xlYW51cHMgPSBjbGVhbnVwMjtcbiAgcmV0dXJuIGZ1bGxIYW5kbGVyO1xufVxudmFyIHN0YXJ0aW5nV2l0aCA9IChzdWJqZWN0LCByZXBsYWNlbWVudCkgPT4gKHsgbmFtZSwgdmFsdWUgfSkgPT4ge1xuICBpZiAobmFtZS5zdGFydHNXaXRoKHN1YmplY3QpKVxuICAgIG5hbWUgPSBuYW1lLnJlcGxhY2Uoc3ViamVjdCwgcmVwbGFjZW1lbnQpO1xuICByZXR1cm4geyBuYW1lLCB2YWx1ZSB9O1xufTtcbnZhciBpbnRvID0gKGkpID0+IGk7XG5mdW5jdGlvbiB0b1RyYW5zZm9ybWVkQXR0cmlidXRlcyhjYWxsYmFjayA9ICgpID0+IHtcbn0pIHtcbiAgcmV0dXJuICh7IG5hbWUsIHZhbHVlIH0pID0+IHtcbiAgICBsZXQgeyBuYW1lOiBuZXdOYW1lLCB2YWx1ZTogbmV3VmFsdWUgfSA9IGF0dHJpYnV0ZVRyYW5zZm9ybWVycy5yZWR1Y2UoKGNhcnJ5LCB0cmFuc2Zvcm0pID0+IHtcbiAgICAgIHJldHVybiB0cmFuc2Zvcm0oY2FycnkpO1xuICAgIH0sIHsgbmFtZSwgdmFsdWUgfSk7XG4gICAgaWYgKG5ld05hbWUgIT09IG5hbWUpXG4gICAgICBjYWxsYmFjayhuZXdOYW1lLCBuYW1lKTtcbiAgICByZXR1cm4geyBuYW1lOiBuZXdOYW1lLCB2YWx1ZTogbmV3VmFsdWUgfTtcbiAgfTtcbn1cbnZhciBhdHRyaWJ1dGVUcmFuc2Zvcm1lcnMgPSBbXTtcbmZ1bmN0aW9uIG1hcEF0dHJpYnV0ZXMoY2FsbGJhY2spIHtcbiAgYXR0cmlidXRlVHJhbnNmb3JtZXJzLnB1c2goY2FsbGJhY2spO1xufVxuZnVuY3Rpb24gb3V0Tm9uQWxwaW5lQXR0cmlidXRlcyh7IG5hbWUgfSkge1xuICByZXR1cm4gYWxwaW5lQXR0cmlidXRlUmVnZXgoKS50ZXN0KG5hbWUpO1xufVxudmFyIGFscGluZUF0dHJpYnV0ZVJlZ2V4ID0gKCkgPT4gbmV3IFJlZ0V4cChgXiR7cHJlZml4QXNTdHJpbmd9KFteOl4uXSspXFxcXGJgKTtcbmZ1bmN0aW9uIHRvUGFyc2VkRGlyZWN0aXZlcyh0cmFuc2Zvcm1lZEF0dHJpYnV0ZU1hcCwgb3JpZ2luYWxBdHRyaWJ1dGVPdmVycmlkZSkge1xuICByZXR1cm4gKHsgbmFtZSwgdmFsdWUgfSkgPT4ge1xuICAgIGxldCB0eXBlTWF0Y2ggPSBuYW1lLm1hdGNoKGFscGluZUF0dHJpYnV0ZVJlZ2V4KCkpO1xuICAgIGxldCB2YWx1ZU1hdGNoID0gbmFtZS5tYXRjaCgvOihbYS16QS1aMC05XFwtXzpdKykvKTtcbiAgICBsZXQgbW9kaWZpZXJzID0gbmFtZS5tYXRjaCgvXFwuW14uXFxdXSsoPz1bXlxcXV0qJCkvZykgfHwgW107XG4gICAgbGV0IG9yaWdpbmFsID0gb3JpZ2luYWxBdHRyaWJ1dGVPdmVycmlkZSB8fCB0cmFuc2Zvcm1lZEF0dHJpYnV0ZU1hcFtuYW1lXSB8fCBuYW1lO1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiB0eXBlTWF0Y2ggPyB0eXBlTWF0Y2hbMV0gOiBudWxsLFxuICAgICAgdmFsdWU6IHZhbHVlTWF0Y2ggPyB2YWx1ZU1hdGNoWzFdIDogbnVsbCxcbiAgICAgIG1vZGlmaWVyczogbW9kaWZpZXJzLm1hcCgoaSkgPT4gaS5yZXBsYWNlKFwiLlwiLCBcIlwiKSksXG4gICAgICBleHByZXNzaW9uOiB2YWx1ZSxcbiAgICAgIG9yaWdpbmFsXG4gICAgfTtcbiAgfTtcbn1cbnZhciBERUZBVUxUID0gXCJERUZBVUxUXCI7XG52YXIgZGlyZWN0aXZlT3JkZXIgPSBbXG4gIFwiaWdub3JlXCIsXG4gIFwicmVmXCIsXG4gIFwiZGF0YVwiLFxuICBcImlkXCIsXG4gIFwiYW5jaG9yXCIsXG4gIFwiYmluZFwiLFxuICBcImluaXRcIixcbiAgXCJmb3JcIixcbiAgXCJtb2RlbFwiLFxuICBcIm1vZGVsYWJsZVwiLFxuICBcInRyYW5zaXRpb25cIixcbiAgXCJzaG93XCIsXG4gIFwiaWZcIixcbiAgREVGQVVMVCxcbiAgXCJ0ZWxlcG9ydFwiXG5dO1xuZnVuY3Rpb24gYnlQcmlvcml0eShhLCBiKSB7XG4gIGxldCB0eXBlQSA9IGRpcmVjdGl2ZU9yZGVyLmluZGV4T2YoYS50eXBlKSA9PT0gLTEgPyBERUZBVUxUIDogYS50eXBlO1xuICBsZXQgdHlwZUIgPSBkaXJlY3RpdmVPcmRlci5pbmRleE9mKGIudHlwZSkgPT09IC0xID8gREVGQVVMVCA6IGIudHlwZTtcbiAgcmV0dXJuIGRpcmVjdGl2ZU9yZGVyLmluZGV4T2YodHlwZUEpIC0gZGlyZWN0aXZlT3JkZXIuaW5kZXhPZih0eXBlQik7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy91dGlscy9kaXNwYXRjaC5qc1xuZnVuY3Rpb24gZGlzcGF0Y2goZWwsIG5hbWUsIGRldGFpbCA9IHt9KSB7XG4gIGVsLmRpc3BhdGNoRXZlbnQoXG4gICAgbmV3IEN1c3RvbUV2ZW50KG5hbWUsIHtcbiAgICAgIGRldGFpbCxcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAvLyBBbGxvd3MgZXZlbnRzIHRvIHBhc3MgdGhlIHNoYWRvdyBET00gYmFycmllci5cbiAgICAgIGNvbXBvc2VkOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgIH0pXG4gICk7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy91dGlscy93YWxrLmpzXG5mdW5jdGlvbiB3YWxrKGVsLCBjYWxsYmFjaykge1xuICBpZiAodHlwZW9mIFNoYWRvd1Jvb3QgPT09IFwiZnVuY3Rpb25cIiAmJiBlbCBpbnN0YW5jZW9mIFNoYWRvd1Jvb3QpIHtcbiAgICBBcnJheS5mcm9tKGVsLmNoaWxkcmVuKS5mb3JFYWNoKChlbDIpID0+IHdhbGsoZWwyLCBjYWxsYmFjaykpO1xuICAgIHJldHVybjtcbiAgfVxuICBsZXQgc2tpcCA9IGZhbHNlO1xuICBjYWxsYmFjayhlbCwgKCkgPT4gc2tpcCA9IHRydWUpO1xuICBpZiAoc2tpcClcbiAgICByZXR1cm47XG4gIGxldCBub2RlID0gZWwuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gIHdoaWxlIChub2RlKSB7XG4gICAgd2Fsayhub2RlLCBjYWxsYmFjaywgZmFsc2UpO1xuICAgIG5vZGUgPSBub2RlLm5leHRFbGVtZW50U2libGluZztcbiAgfVxufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvdXRpbHMvd2Fybi5qc1xuZnVuY3Rpb24gd2FybihtZXNzYWdlLCAuLi5hcmdzKSB7XG4gIGNvbnNvbGUud2FybihgQWxwaW5lIFdhcm5pbmc6ICR7bWVzc2FnZX1gLCAuLi5hcmdzKTtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2xpZmVjeWNsZS5qc1xudmFyIHN0YXJ0ZWQgPSBmYWxzZTtcbmZ1bmN0aW9uIHN0YXJ0KCkge1xuICBpZiAoc3RhcnRlZClcbiAgICB3YXJuKFwiQWxwaW5lIGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWQgb24gdGhpcyBwYWdlLiBDYWxsaW5nIEFscGluZS5zdGFydCgpIG1vcmUgdGhhbiBvbmNlIGNhbiBjYXVzZSBwcm9ibGVtcy5cIik7XG4gIHN0YXJ0ZWQgPSB0cnVlO1xuICBpZiAoIWRvY3VtZW50LmJvZHkpXG4gICAgd2FybihcIlVuYWJsZSB0byBpbml0aWFsaXplLiBUcnlpbmcgdG8gbG9hZCBBbHBpbmUgYmVmb3JlIGA8Ym9keT5gIGlzIGF2YWlsYWJsZS4gRGlkIHlvdSBmb3JnZXQgdG8gYWRkIGBkZWZlcmAgaW4gQWxwaW5lJ3MgYDxzY3JpcHQ+YCB0YWc/XCIpO1xuICBkaXNwYXRjaChkb2N1bWVudCwgXCJhbHBpbmU6aW5pdFwiKTtcbiAgZGlzcGF0Y2goZG9jdW1lbnQsIFwiYWxwaW5lOmluaXRpYWxpemluZ1wiKTtcbiAgc3RhcnRPYnNlcnZpbmdNdXRhdGlvbnMoKTtcbiAgb25FbEFkZGVkKChlbCkgPT4gaW5pdFRyZWUoZWwsIHdhbGspKTtcbiAgb25FbFJlbW92ZWQoKGVsKSA9PiBkZXN0cm95VHJlZShlbCkpO1xuICBvbkF0dHJpYnV0ZXNBZGRlZCgoZWwsIGF0dHJzKSA9PiB7XG4gICAgZGlyZWN0aXZlcyhlbCwgYXR0cnMpLmZvckVhY2goKGhhbmRsZSkgPT4gaGFuZGxlKCkpO1xuICB9KTtcbiAgbGV0IG91dE5lc3RlZENvbXBvbmVudHMgPSAoZWwpID0+ICFjbG9zZXN0Um9vdChlbC5wYXJlbnRFbGVtZW50LCB0cnVlKTtcbiAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGFsbFNlbGVjdG9ycygpLmpvaW4oXCIsXCIpKSkuZmlsdGVyKG91dE5lc3RlZENvbXBvbmVudHMpLmZvckVhY2goKGVsKSA9PiB7XG4gICAgaW5pdFRyZWUoZWwpO1xuICB9KTtcbiAgZGlzcGF0Y2goZG9jdW1lbnQsIFwiYWxwaW5lOmluaXRpYWxpemVkXCIpO1xuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICB3YXJuQWJvdXRNaXNzaW5nUGx1Z2lucygpO1xuICB9KTtcbn1cbnZhciByb290U2VsZWN0b3JDYWxsYmFja3MgPSBbXTtcbnZhciBpbml0U2VsZWN0b3JDYWxsYmFja3MgPSBbXTtcbmZ1bmN0aW9uIHJvb3RTZWxlY3RvcnMoKSB7XG4gIHJldHVybiByb290U2VsZWN0b3JDYWxsYmFja3MubWFwKChmbikgPT4gZm4oKSk7XG59XG5mdW5jdGlvbiBhbGxTZWxlY3RvcnMoKSB7XG4gIHJldHVybiByb290U2VsZWN0b3JDYWxsYmFja3MuY29uY2F0KGluaXRTZWxlY3RvckNhbGxiYWNrcykubWFwKChmbikgPT4gZm4oKSk7XG59XG5mdW5jdGlvbiBhZGRSb290U2VsZWN0b3Ioc2VsZWN0b3JDYWxsYmFjaykge1xuICByb290U2VsZWN0b3JDYWxsYmFja3MucHVzaChzZWxlY3RvckNhbGxiYWNrKTtcbn1cbmZ1bmN0aW9uIGFkZEluaXRTZWxlY3RvcihzZWxlY3RvckNhbGxiYWNrKSB7XG4gIGluaXRTZWxlY3RvckNhbGxiYWNrcy5wdXNoKHNlbGVjdG9yQ2FsbGJhY2spO1xufVxuZnVuY3Rpb24gY2xvc2VzdFJvb3QoZWwsIGluY2x1ZGVJbml0U2VsZWN0b3JzID0gZmFsc2UpIHtcbiAgcmV0dXJuIGZpbmRDbG9zZXN0KGVsLCAoZWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IHNlbGVjdG9ycyA9IGluY2x1ZGVJbml0U2VsZWN0b3JzID8gYWxsU2VsZWN0b3JzKCkgOiByb290U2VsZWN0b3JzKCk7XG4gICAgaWYgKHNlbGVjdG9ycy5zb21lKChzZWxlY3RvcikgPT4gZWxlbWVudC5tYXRjaGVzKHNlbGVjdG9yKSkpXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgfSk7XG59XG5mdW5jdGlvbiBmaW5kQ2xvc2VzdChlbCwgY2FsbGJhY2spIHtcbiAgaWYgKCFlbClcbiAgICByZXR1cm47XG4gIGlmIChjYWxsYmFjayhlbCkpXG4gICAgcmV0dXJuIGVsO1xuICBpZiAoZWwuX3hfdGVsZXBvcnRCYWNrKVxuICAgIGVsID0gZWwuX3hfdGVsZXBvcnRCYWNrO1xuICBpZiAoIWVsLnBhcmVudEVsZW1lbnQpXG4gICAgcmV0dXJuO1xuICByZXR1cm4gZmluZENsb3Nlc3QoZWwucGFyZW50RWxlbWVudCwgY2FsbGJhY2spO1xufVxuZnVuY3Rpb24gaXNSb290KGVsKSB7XG4gIHJldHVybiByb290U2VsZWN0b3JzKCkuc29tZSgoc2VsZWN0b3IpID0+IGVsLm1hdGNoZXMoc2VsZWN0b3IpKTtcbn1cbnZhciBpbml0SW50ZXJjZXB0b3JzMiA9IFtdO1xuZnVuY3Rpb24gaW50ZXJjZXB0SW5pdChjYWxsYmFjaykge1xuICBpbml0SW50ZXJjZXB0b3JzMi5wdXNoKGNhbGxiYWNrKTtcbn1cbnZhciBtYXJrZXJEaXNwZW5zZXIgPSAxO1xuZnVuY3Rpb24gaW5pdFRyZWUoZWwsIHdhbGtlciA9IHdhbGssIGludGVyY2VwdCA9ICgpID0+IHtcbn0pIHtcbiAgaWYgKGZpbmRDbG9zZXN0KGVsLCAoaSkgPT4gaS5feF9pZ25vcmUpKVxuICAgIHJldHVybjtcbiAgZGVmZXJIYW5kbGluZ0RpcmVjdGl2ZXMoKCkgPT4ge1xuICAgIHdhbGtlcihlbCwgKGVsMiwgc2tpcCkgPT4ge1xuICAgICAgaWYgKGVsMi5feF9tYXJrZXIpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGludGVyY2VwdChlbDIsIHNraXApO1xuICAgICAgaW5pdEludGVyY2VwdG9yczIuZm9yRWFjaCgoaSkgPT4gaShlbDIsIHNraXApKTtcbiAgICAgIGRpcmVjdGl2ZXMoZWwyLCBlbDIuYXR0cmlidXRlcykuZm9yRWFjaCgoaGFuZGxlKSA9PiBoYW5kbGUoKSk7XG4gICAgICBpZiAoIWVsMi5feF9pZ25vcmUpXG4gICAgICAgIGVsMi5feF9tYXJrZXIgPSBtYXJrZXJEaXNwZW5zZXIrKztcbiAgICAgIGVsMi5feF9pZ25vcmUgJiYgc2tpcCgpO1xuICAgIH0pO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGRlc3Ryb3lUcmVlKHJvb3QsIHdhbGtlciA9IHdhbGspIHtcbiAgd2Fsa2VyKHJvb3QsIChlbCkgPT4ge1xuICAgIGNsZWFudXBFbGVtZW50KGVsKTtcbiAgICBjbGVhbnVwQXR0cmlidXRlcyhlbCk7XG4gICAgZGVsZXRlIGVsLl94X21hcmtlcjtcbiAgfSk7XG59XG5mdW5jdGlvbiB3YXJuQWJvdXRNaXNzaW5nUGx1Z2lucygpIHtcbiAgbGV0IHBsdWdpbkRpcmVjdGl2ZXMgPSBbXG4gICAgW1widWlcIiwgXCJkaWFsb2dcIiwgW1wiW3gtZGlhbG9nXSwgW3gtcG9wb3Zlcl1cIl1dLFxuICAgIFtcImFuY2hvclwiLCBcImFuY2hvclwiLCBbXCJbeC1hbmNob3JdXCJdXSxcbiAgICBbXCJzb3J0XCIsIFwic29ydFwiLCBbXCJbeC1zb3J0XVwiXV1cbiAgXTtcbiAgcGx1Z2luRGlyZWN0aXZlcy5mb3JFYWNoKChbcGx1Z2luMiwgZGlyZWN0aXZlMiwgc2VsZWN0b3JzXSkgPT4ge1xuICAgIGlmIChkaXJlY3RpdmVFeGlzdHMoZGlyZWN0aXZlMikpXG4gICAgICByZXR1cm47XG4gICAgc2VsZWN0b3JzLnNvbWUoKHNlbGVjdG9yKSA9PiB7XG4gICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcikpIHtcbiAgICAgICAgd2FybihgZm91bmQgXCIke3NlbGVjdG9yfVwiLCBidXQgbWlzc2luZyAke3BsdWdpbjJ9IHBsdWdpbmApO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9uZXh0VGljay5qc1xudmFyIHRpY2tTdGFjayA9IFtdO1xudmFyIGlzSG9sZGluZyA9IGZhbHNlO1xuZnVuY3Rpb24gbmV4dFRpY2soY2FsbGJhY2sgPSAoKSA9PiB7XG59KSB7XG4gIHF1ZXVlTWljcm90YXNrKCgpID0+IHtcbiAgICBpc0hvbGRpbmcgfHwgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICByZWxlYXNlTmV4dFRpY2tzKCk7XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlcykgPT4ge1xuICAgIHRpY2tTdGFjay5wdXNoKCgpID0+IHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgICByZXMoKTtcbiAgICB9KTtcbiAgfSk7XG59XG5mdW5jdGlvbiByZWxlYXNlTmV4dFRpY2tzKCkge1xuICBpc0hvbGRpbmcgPSBmYWxzZTtcbiAgd2hpbGUgKHRpY2tTdGFjay5sZW5ndGgpXG4gICAgdGlja1N0YWNrLnNoaWZ0KCkoKTtcbn1cbmZ1bmN0aW9uIGhvbGROZXh0VGlja3MoKSB7XG4gIGlzSG9sZGluZyA9IHRydWU7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy91dGlscy9jbGFzc2VzLmpzXG5mdW5jdGlvbiBzZXRDbGFzc2VzKGVsLCB2YWx1ZSkge1xuICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gc2V0Q2xhc3Nlc0Zyb21TdHJpbmcoZWwsIHZhbHVlLmpvaW4oXCIgXCIpKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgIT09IG51bGwpIHtcbiAgICByZXR1cm4gc2V0Q2xhc3Nlc0Zyb21PYmplY3QoZWwsIHZhbHVlKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHJldHVybiBzZXRDbGFzc2VzKGVsLCB2YWx1ZSgpKTtcbiAgfVxuICByZXR1cm4gc2V0Q2xhc3Nlc0Zyb21TdHJpbmcoZWwsIHZhbHVlKTtcbn1cbmZ1bmN0aW9uIHNldENsYXNzZXNGcm9tU3RyaW5nKGVsLCBjbGFzc1N0cmluZykge1xuICBsZXQgc3BsaXQgPSAoY2xhc3NTdHJpbmcyKSA9PiBjbGFzc1N0cmluZzIuc3BsaXQoXCIgXCIpLmZpbHRlcihCb29sZWFuKTtcbiAgbGV0IG1pc3NpbmdDbGFzc2VzID0gKGNsYXNzU3RyaW5nMikgPT4gY2xhc3NTdHJpbmcyLnNwbGl0KFwiIFwiKS5maWx0ZXIoKGkpID0+ICFlbC5jbGFzc0xpc3QuY29udGFpbnMoaSkpLmZpbHRlcihCb29sZWFuKTtcbiAgbGV0IGFkZENsYXNzZXNBbmRSZXR1cm5VbmRvID0gKGNsYXNzZXMpID0+IHtcbiAgICBlbC5jbGFzc0xpc3QuYWRkKC4uLmNsYXNzZXMpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKC4uLmNsYXNzZXMpO1xuICAgIH07XG4gIH07XG4gIGNsYXNzU3RyaW5nID0gY2xhc3NTdHJpbmcgPT09IHRydWUgPyBjbGFzc1N0cmluZyA9IFwiXCIgOiBjbGFzc1N0cmluZyB8fCBcIlwiO1xuICByZXR1cm4gYWRkQ2xhc3Nlc0FuZFJldHVyblVuZG8obWlzc2luZ0NsYXNzZXMoY2xhc3NTdHJpbmcpKTtcbn1cbmZ1bmN0aW9uIHNldENsYXNzZXNGcm9tT2JqZWN0KGVsLCBjbGFzc09iamVjdCkge1xuICBsZXQgc3BsaXQgPSAoY2xhc3NTdHJpbmcpID0+IGNsYXNzU3RyaW5nLnNwbGl0KFwiIFwiKS5maWx0ZXIoQm9vbGVhbik7XG4gIGxldCBmb3JBZGQgPSBPYmplY3QuZW50cmllcyhjbGFzc09iamVjdCkuZmxhdE1hcCgoW2NsYXNzU3RyaW5nLCBib29sXSkgPT4gYm9vbCA/IHNwbGl0KGNsYXNzU3RyaW5nKSA6IGZhbHNlKS5maWx0ZXIoQm9vbGVhbik7XG4gIGxldCBmb3JSZW1vdmUgPSBPYmplY3QuZW50cmllcyhjbGFzc09iamVjdCkuZmxhdE1hcCgoW2NsYXNzU3RyaW5nLCBib29sXSkgPT4gIWJvb2wgPyBzcGxpdChjbGFzc1N0cmluZykgOiBmYWxzZSkuZmlsdGVyKEJvb2xlYW4pO1xuICBsZXQgYWRkZWQgPSBbXTtcbiAgbGV0IHJlbW92ZWQgPSBbXTtcbiAgZm9yUmVtb3ZlLmZvckVhY2goKGkpID0+IHtcbiAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKGkpKSB7XG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGkpO1xuICAgICAgcmVtb3ZlZC5wdXNoKGkpO1xuICAgIH1cbiAgfSk7XG4gIGZvckFkZC5mb3JFYWNoKChpKSA9PiB7XG4gICAgaWYgKCFlbC5jbGFzc0xpc3QuY29udGFpbnMoaSkpIHtcbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQoaSk7XG4gICAgICBhZGRlZC5wdXNoKGkpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgcmVtb3ZlZC5mb3JFYWNoKChpKSA9PiBlbC5jbGFzc0xpc3QuYWRkKGkpKTtcbiAgICBhZGRlZC5mb3JFYWNoKChpKSA9PiBlbC5jbGFzc0xpc3QucmVtb3ZlKGkpKTtcbiAgfTtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL3V0aWxzL3N0eWxlcy5qc1xuZnVuY3Rpb24gc2V0U3R5bGVzKGVsLCB2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9PSBudWxsKSB7XG4gICAgcmV0dXJuIHNldFN0eWxlc0Zyb21PYmplY3QoZWwsIHZhbHVlKTtcbiAgfVxuICByZXR1cm4gc2V0U3R5bGVzRnJvbVN0cmluZyhlbCwgdmFsdWUpO1xufVxuZnVuY3Rpb24gc2V0U3R5bGVzRnJvbU9iamVjdChlbCwgdmFsdWUpIHtcbiAgbGV0IHByZXZpb3VzU3R5bGVzID0ge307XG4gIE9iamVjdC5lbnRyaWVzKHZhbHVlKS5mb3JFYWNoKChba2V5LCB2YWx1ZTJdKSA9PiB7XG4gICAgcHJldmlvdXNTdHlsZXNba2V5XSA9IGVsLnN0eWxlW2tleV07XG4gICAgaWYgKCFrZXkuc3RhcnRzV2l0aChcIi0tXCIpKSB7XG4gICAgICBrZXkgPSBrZWJhYkNhc2Uoa2V5KTtcbiAgICB9XG4gICAgZWwuc3R5bGUuc2V0UHJvcGVydHkoa2V5LCB2YWx1ZTIpO1xuICB9KTtcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgaWYgKGVsLnN0eWxlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIik7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBzZXRTdHlsZXMoZWwsIHByZXZpb3VzU3R5bGVzKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIHNldFN0eWxlc0Zyb21TdHJpbmcoZWwsIHZhbHVlKSB7XG4gIGxldCBjYWNoZSA9IGVsLmdldEF0dHJpYnV0ZShcInN0eWxlXCIsIHZhbHVlKTtcbiAgZWwuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgdmFsdWUpO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIGVsLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIGNhY2hlIHx8IFwiXCIpO1xuICB9O1xufVxuZnVuY3Rpb24ga2ViYWJDYXNlKHN1YmplY3QpIHtcbiAgcmV0dXJuIHN1YmplY3QucmVwbGFjZSgvKFthLXpdKShbQS1aXSkvZywgXCIkMS0kMlwiKS50b0xvd2VyQ2FzZSgpO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvdXRpbHMvb25jZS5qc1xuZnVuY3Rpb24gb25jZShjYWxsYmFjaywgZmFsbGJhY2sgPSAoKSA9PiB7XG59KSB7XG4gIGxldCBjYWxsZWQgPSBmYWxzZTtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIGlmICghY2FsbGVkKSB7XG4gICAgICBjYWxsZWQgPSB0cnVlO1xuICAgICAgY2FsbGJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZmFsbGJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gIH07XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9kaXJlY3RpdmVzL3gtdHJhbnNpdGlvbi5qc1xuZGlyZWN0aXZlKFwidHJhbnNpdGlvblwiLCAoZWwsIHsgdmFsdWUsIG1vZGlmaWVycywgZXhwcmVzc2lvbiB9LCB7IGV2YWx1YXRlOiBldmFsdWF0ZTIgfSkgPT4ge1xuICBpZiAodHlwZW9mIGV4cHJlc3Npb24gPT09IFwiZnVuY3Rpb25cIilcbiAgICBleHByZXNzaW9uID0gZXZhbHVhdGUyKGV4cHJlc3Npb24pO1xuICBpZiAoZXhwcmVzc2lvbiA9PT0gZmFsc2UpXG4gICAgcmV0dXJuO1xuICBpZiAoIWV4cHJlc3Npb24gfHwgdHlwZW9mIGV4cHJlc3Npb24gPT09IFwiYm9vbGVhblwiKSB7XG4gICAgcmVnaXN0ZXJUcmFuc2l0aW9uc0Zyb21IZWxwZXIoZWwsIG1vZGlmaWVycywgdmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHJlZ2lzdGVyVHJhbnNpdGlvbnNGcm9tQ2xhc3NTdHJpbmcoZWwsIGV4cHJlc3Npb24sIHZhbHVlKTtcbiAgfVxufSk7XG5mdW5jdGlvbiByZWdpc3RlclRyYW5zaXRpb25zRnJvbUNsYXNzU3RyaW5nKGVsLCBjbGFzc1N0cmluZywgc3RhZ2UpIHtcbiAgcmVnaXN0ZXJUcmFuc2l0aW9uT2JqZWN0KGVsLCBzZXRDbGFzc2VzLCBcIlwiKTtcbiAgbGV0IGRpcmVjdGl2ZVN0b3JhZ2VNYXAgPSB7XG4gICAgXCJlbnRlclwiOiAoY2xhc3NlcykgPT4ge1xuICAgICAgZWwuX3hfdHJhbnNpdGlvbi5lbnRlci5kdXJpbmcgPSBjbGFzc2VzO1xuICAgIH0sXG4gICAgXCJlbnRlci1zdGFydFwiOiAoY2xhc3NlcykgPT4ge1xuICAgICAgZWwuX3hfdHJhbnNpdGlvbi5lbnRlci5zdGFydCA9IGNsYXNzZXM7XG4gICAgfSxcbiAgICBcImVudGVyLWVuZFwiOiAoY2xhc3NlcykgPT4ge1xuICAgICAgZWwuX3hfdHJhbnNpdGlvbi5lbnRlci5lbmQgPSBjbGFzc2VzO1xuICAgIH0sXG4gICAgXCJsZWF2ZVwiOiAoY2xhc3NlcykgPT4ge1xuICAgICAgZWwuX3hfdHJhbnNpdGlvbi5sZWF2ZS5kdXJpbmcgPSBjbGFzc2VzO1xuICAgIH0sXG4gICAgXCJsZWF2ZS1zdGFydFwiOiAoY2xhc3NlcykgPT4ge1xuICAgICAgZWwuX3hfdHJhbnNpdGlvbi5sZWF2ZS5zdGFydCA9IGNsYXNzZXM7XG4gICAgfSxcbiAgICBcImxlYXZlLWVuZFwiOiAoY2xhc3NlcykgPT4ge1xuICAgICAgZWwuX3hfdHJhbnNpdGlvbi5sZWF2ZS5lbmQgPSBjbGFzc2VzO1xuICAgIH1cbiAgfTtcbiAgZGlyZWN0aXZlU3RvcmFnZU1hcFtzdGFnZV0oY2xhc3NTdHJpbmcpO1xufVxuZnVuY3Rpb24gcmVnaXN0ZXJUcmFuc2l0aW9uc0Zyb21IZWxwZXIoZWwsIG1vZGlmaWVycywgc3RhZ2UpIHtcbiAgcmVnaXN0ZXJUcmFuc2l0aW9uT2JqZWN0KGVsLCBzZXRTdHlsZXMpO1xuICBsZXQgZG9lc250U3BlY2lmeSA9ICFtb2RpZmllcnMuaW5jbHVkZXMoXCJpblwiKSAmJiAhbW9kaWZpZXJzLmluY2x1ZGVzKFwib3V0XCIpICYmICFzdGFnZTtcbiAgbGV0IHRyYW5zaXRpb25pbmdJbiA9IGRvZXNudFNwZWNpZnkgfHwgbW9kaWZpZXJzLmluY2x1ZGVzKFwiaW5cIikgfHwgW1wiZW50ZXJcIl0uaW5jbHVkZXMoc3RhZ2UpO1xuICBsZXQgdHJhbnNpdGlvbmluZ091dCA9IGRvZXNudFNwZWNpZnkgfHwgbW9kaWZpZXJzLmluY2x1ZGVzKFwib3V0XCIpIHx8IFtcImxlYXZlXCJdLmluY2x1ZGVzKHN0YWdlKTtcbiAgaWYgKG1vZGlmaWVycy5pbmNsdWRlcyhcImluXCIpICYmICFkb2VzbnRTcGVjaWZ5KSB7XG4gICAgbW9kaWZpZXJzID0gbW9kaWZpZXJzLmZpbHRlcigoaSwgaW5kZXgpID0+IGluZGV4IDwgbW9kaWZpZXJzLmluZGV4T2YoXCJvdXRcIikpO1xuICB9XG4gIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoXCJvdXRcIikgJiYgIWRvZXNudFNwZWNpZnkpIHtcbiAgICBtb2RpZmllcnMgPSBtb2RpZmllcnMuZmlsdGVyKChpLCBpbmRleCkgPT4gaW5kZXggPiBtb2RpZmllcnMuaW5kZXhPZihcIm91dFwiKSk7XG4gIH1cbiAgbGV0IHdhbnRzQWxsID0gIW1vZGlmaWVycy5pbmNsdWRlcyhcIm9wYWNpdHlcIikgJiYgIW1vZGlmaWVycy5pbmNsdWRlcyhcInNjYWxlXCIpO1xuICBsZXQgd2FudHNPcGFjaXR5ID0gd2FudHNBbGwgfHwgbW9kaWZpZXJzLmluY2x1ZGVzKFwib3BhY2l0eVwiKTtcbiAgbGV0IHdhbnRzU2NhbGUgPSB3YW50c0FsbCB8fCBtb2RpZmllcnMuaW5jbHVkZXMoXCJzY2FsZVwiKTtcbiAgbGV0IG9wYWNpdHlWYWx1ZSA9IHdhbnRzT3BhY2l0eSA/IDAgOiAxO1xuICBsZXQgc2NhbGVWYWx1ZSA9IHdhbnRzU2NhbGUgPyBtb2RpZmllclZhbHVlKG1vZGlmaWVycywgXCJzY2FsZVwiLCA5NSkgLyAxMDAgOiAxO1xuICBsZXQgZGVsYXkgPSBtb2RpZmllclZhbHVlKG1vZGlmaWVycywgXCJkZWxheVwiLCAwKSAvIDFlMztcbiAgbGV0IG9yaWdpbiA9IG1vZGlmaWVyVmFsdWUobW9kaWZpZXJzLCBcIm9yaWdpblwiLCBcImNlbnRlclwiKTtcbiAgbGV0IHByb3BlcnR5ID0gXCJvcGFjaXR5LCB0cmFuc2Zvcm1cIjtcbiAgbGV0IGR1cmF0aW9uSW4gPSBtb2RpZmllclZhbHVlKG1vZGlmaWVycywgXCJkdXJhdGlvblwiLCAxNTApIC8gMWUzO1xuICBsZXQgZHVyYXRpb25PdXQgPSBtb2RpZmllclZhbHVlKG1vZGlmaWVycywgXCJkdXJhdGlvblwiLCA3NSkgLyAxZTM7XG4gIGxldCBlYXNpbmcgPSBgY3ViaWMtYmV6aWVyKDAuNCwgMC4wLCAwLjIsIDEpYDtcbiAgaWYgKHRyYW5zaXRpb25pbmdJbikge1xuICAgIGVsLl94X3RyYW5zaXRpb24uZW50ZXIuZHVyaW5nID0ge1xuICAgICAgdHJhbnNmb3JtT3JpZ2luOiBvcmlnaW4sXG4gICAgICB0cmFuc2l0aW9uRGVsYXk6IGAke2RlbGF5fXNgLFxuICAgICAgdHJhbnNpdGlvblByb3BlcnR5OiBwcm9wZXJ0eSxcbiAgICAgIHRyYW5zaXRpb25EdXJhdGlvbjogYCR7ZHVyYXRpb25Jbn1zYCxcbiAgICAgIHRyYW5zaXRpb25UaW1pbmdGdW5jdGlvbjogZWFzaW5nXG4gICAgfTtcbiAgICBlbC5feF90cmFuc2l0aW9uLmVudGVyLnN0YXJ0ID0ge1xuICAgICAgb3BhY2l0eTogb3BhY2l0eVZhbHVlLFxuICAgICAgdHJhbnNmb3JtOiBgc2NhbGUoJHtzY2FsZVZhbHVlfSlgXG4gICAgfTtcbiAgICBlbC5feF90cmFuc2l0aW9uLmVudGVyLmVuZCA9IHtcbiAgICAgIG9wYWNpdHk6IDEsXG4gICAgICB0cmFuc2Zvcm06IGBzY2FsZSgxKWBcbiAgICB9O1xuICB9XG4gIGlmICh0cmFuc2l0aW9uaW5nT3V0KSB7XG4gICAgZWwuX3hfdHJhbnNpdGlvbi5sZWF2ZS5kdXJpbmcgPSB7XG4gICAgICB0cmFuc2Zvcm1PcmlnaW46IG9yaWdpbixcbiAgICAgIHRyYW5zaXRpb25EZWxheTogYCR7ZGVsYXl9c2AsXG4gICAgICB0cmFuc2l0aW9uUHJvcGVydHk6IHByb3BlcnR5LFxuICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uOiBgJHtkdXJhdGlvbk91dH1zYCxcbiAgICAgIHRyYW5zaXRpb25UaW1pbmdGdW5jdGlvbjogZWFzaW5nXG4gICAgfTtcbiAgICBlbC5feF90cmFuc2l0aW9uLmxlYXZlLnN0YXJ0ID0ge1xuICAgICAgb3BhY2l0eTogMSxcbiAgICAgIHRyYW5zZm9ybTogYHNjYWxlKDEpYFxuICAgIH07XG4gICAgZWwuX3hfdHJhbnNpdGlvbi5sZWF2ZS5lbmQgPSB7XG4gICAgICBvcGFjaXR5OiBvcGFjaXR5VmFsdWUsXG4gICAgICB0cmFuc2Zvcm06IGBzY2FsZSgke3NjYWxlVmFsdWV9KWBcbiAgICB9O1xuICB9XG59XG5mdW5jdGlvbiByZWdpc3RlclRyYW5zaXRpb25PYmplY3QoZWwsIHNldEZ1bmN0aW9uLCBkZWZhdWx0VmFsdWUgPSB7fSkge1xuICBpZiAoIWVsLl94X3RyYW5zaXRpb24pXG4gICAgZWwuX3hfdHJhbnNpdGlvbiA9IHtcbiAgICAgIGVudGVyOiB7IGR1cmluZzogZGVmYXVsdFZhbHVlLCBzdGFydDogZGVmYXVsdFZhbHVlLCBlbmQ6IGRlZmF1bHRWYWx1ZSB9LFxuICAgICAgbGVhdmU6IHsgZHVyaW5nOiBkZWZhdWx0VmFsdWUsIHN0YXJ0OiBkZWZhdWx0VmFsdWUsIGVuZDogZGVmYXVsdFZhbHVlIH0sXG4gICAgICBpbihiZWZvcmUgPSAoKSA9PiB7XG4gICAgICB9LCBhZnRlciA9ICgpID0+IHtcbiAgICAgIH0pIHtcbiAgICAgICAgdHJhbnNpdGlvbihlbCwgc2V0RnVuY3Rpb24sIHtcbiAgICAgICAgICBkdXJpbmc6IHRoaXMuZW50ZXIuZHVyaW5nLFxuICAgICAgICAgIHN0YXJ0OiB0aGlzLmVudGVyLnN0YXJ0LFxuICAgICAgICAgIGVuZDogdGhpcy5lbnRlci5lbmRcbiAgICAgICAgfSwgYmVmb3JlLCBhZnRlcik7XG4gICAgICB9LFxuICAgICAgb3V0KGJlZm9yZSA9ICgpID0+IHtcbiAgICAgIH0sIGFmdGVyID0gKCkgPT4ge1xuICAgICAgfSkge1xuICAgICAgICB0cmFuc2l0aW9uKGVsLCBzZXRGdW5jdGlvbiwge1xuICAgICAgICAgIGR1cmluZzogdGhpcy5sZWF2ZS5kdXJpbmcsXG4gICAgICAgICAgc3RhcnQ6IHRoaXMubGVhdmUuc3RhcnQsXG4gICAgICAgICAgZW5kOiB0aGlzLmxlYXZlLmVuZFxuICAgICAgICB9LCBiZWZvcmUsIGFmdGVyKTtcbiAgICAgIH1cbiAgICB9O1xufVxud2luZG93LkVsZW1lbnQucHJvdG90eXBlLl94X3RvZ2dsZUFuZENhc2NhZGVXaXRoVHJhbnNpdGlvbnMgPSBmdW5jdGlvbihlbCwgdmFsdWUsIHNob3csIGhpZGUpIHtcbiAgY29uc3QgbmV4dFRpY2syID0gZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSBcInZpc2libGVcIiA/IHJlcXVlc3RBbmltYXRpb25GcmFtZSA6IHNldFRpbWVvdXQ7XG4gIGxldCBjbGlja0F3YXlDb21wYXRpYmxlU2hvdyA9ICgpID0+IG5leHRUaWNrMihzaG93KTtcbiAgaWYgKHZhbHVlKSB7XG4gICAgaWYgKGVsLl94X3RyYW5zaXRpb24gJiYgKGVsLl94X3RyYW5zaXRpb24uZW50ZXIgfHwgZWwuX3hfdHJhbnNpdGlvbi5sZWF2ZSkpIHtcbiAgICAgIGVsLl94X3RyYW5zaXRpb24uZW50ZXIgJiYgKE9iamVjdC5lbnRyaWVzKGVsLl94X3RyYW5zaXRpb24uZW50ZXIuZHVyaW5nKS5sZW5ndGggfHwgT2JqZWN0LmVudHJpZXMoZWwuX3hfdHJhbnNpdGlvbi5lbnRlci5zdGFydCkubGVuZ3RoIHx8IE9iamVjdC5lbnRyaWVzKGVsLl94X3RyYW5zaXRpb24uZW50ZXIuZW5kKS5sZW5ndGgpID8gZWwuX3hfdHJhbnNpdGlvbi5pbihzaG93KSA6IGNsaWNrQXdheUNvbXBhdGlibGVTaG93KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLl94X3RyYW5zaXRpb24gPyBlbC5feF90cmFuc2l0aW9uLmluKHNob3cpIDogY2xpY2tBd2F5Q29tcGF0aWJsZVNob3coKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG4gIGVsLl94X2hpZGVQcm9taXNlID0gZWwuX3hfdHJhbnNpdGlvbiA/IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBlbC5feF90cmFuc2l0aW9uLm91dCgoKSA9PiB7XG4gICAgfSwgKCkgPT4gcmVzb2x2ZShoaWRlKSk7XG4gICAgZWwuX3hfdHJhbnNpdGlvbmluZyAmJiBlbC5feF90cmFuc2l0aW9uaW5nLmJlZm9yZUNhbmNlbCgoKSA9PiByZWplY3QoeyBpc0Zyb21DYW5jZWxsZWRUcmFuc2l0aW9uOiB0cnVlIH0pKTtcbiAgfSkgOiBQcm9taXNlLnJlc29sdmUoaGlkZSk7XG4gIHF1ZXVlTWljcm90YXNrKCgpID0+IHtcbiAgICBsZXQgY2xvc2VzdCA9IGNsb3Nlc3RIaWRlKGVsKTtcbiAgICBpZiAoY2xvc2VzdCkge1xuICAgICAgaWYgKCFjbG9zZXN0Ll94X2hpZGVDaGlsZHJlbilcbiAgICAgICAgY2xvc2VzdC5feF9oaWRlQ2hpbGRyZW4gPSBbXTtcbiAgICAgIGNsb3Nlc3QuX3hfaGlkZUNoaWxkcmVuLnB1c2goZWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXh0VGljazIoKCkgPT4ge1xuICAgICAgICBsZXQgaGlkZUFmdGVyQ2hpbGRyZW4gPSAoZWwyKSA9PiB7XG4gICAgICAgICAgbGV0IGNhcnJ5ID0gUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgZWwyLl94X2hpZGVQcm9taXNlLFxuICAgICAgICAgICAgLi4uKGVsMi5feF9oaWRlQ2hpbGRyZW4gfHwgW10pLm1hcChoaWRlQWZ0ZXJDaGlsZHJlbilcbiAgICAgICAgICBdKS50aGVuKChbaV0pID0+IGk/LigpKTtcbiAgICAgICAgICBkZWxldGUgZWwyLl94X2hpZGVQcm9taXNlO1xuICAgICAgICAgIGRlbGV0ZSBlbDIuX3hfaGlkZUNoaWxkcmVuO1xuICAgICAgICAgIHJldHVybiBjYXJyeTtcbiAgICAgICAgfTtcbiAgICAgICAgaGlkZUFmdGVyQ2hpbGRyZW4oZWwpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgaWYgKCFlLmlzRnJvbUNhbmNlbGxlZFRyYW5zaXRpb24pXG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59O1xuZnVuY3Rpb24gY2xvc2VzdEhpZGUoZWwpIHtcbiAgbGV0IHBhcmVudCA9IGVsLnBhcmVudE5vZGU7XG4gIGlmICghcGFyZW50KVxuICAgIHJldHVybjtcbiAgcmV0dXJuIHBhcmVudC5feF9oaWRlUHJvbWlzZSA/IHBhcmVudCA6IGNsb3Nlc3RIaWRlKHBhcmVudCk7XG59XG5mdW5jdGlvbiB0cmFuc2l0aW9uKGVsLCBzZXRGdW5jdGlvbiwgeyBkdXJpbmcsIHN0YXJ0OiBzdGFydDIsIGVuZCB9ID0ge30sIGJlZm9yZSA9ICgpID0+IHtcbn0sIGFmdGVyID0gKCkgPT4ge1xufSkge1xuICBpZiAoZWwuX3hfdHJhbnNpdGlvbmluZylcbiAgICBlbC5feF90cmFuc2l0aW9uaW5nLmNhbmNlbCgpO1xuICBpZiAoT2JqZWN0LmtleXMoZHVyaW5nKS5sZW5ndGggPT09IDAgJiYgT2JqZWN0LmtleXMoc3RhcnQyKS5sZW5ndGggPT09IDAgJiYgT2JqZWN0LmtleXMoZW5kKS5sZW5ndGggPT09IDApIHtcbiAgICBiZWZvcmUoKTtcbiAgICBhZnRlcigpO1xuICAgIHJldHVybjtcbiAgfVxuICBsZXQgdW5kb1N0YXJ0LCB1bmRvRHVyaW5nLCB1bmRvRW5kO1xuICBwZXJmb3JtVHJhbnNpdGlvbihlbCwge1xuICAgIHN0YXJ0KCkge1xuICAgICAgdW5kb1N0YXJ0ID0gc2V0RnVuY3Rpb24oZWwsIHN0YXJ0Mik7XG4gICAgfSxcbiAgICBkdXJpbmcoKSB7XG4gICAgICB1bmRvRHVyaW5nID0gc2V0RnVuY3Rpb24oZWwsIGR1cmluZyk7XG4gICAgfSxcbiAgICBiZWZvcmUsXG4gICAgZW5kKCkge1xuICAgICAgdW5kb1N0YXJ0KCk7XG4gICAgICB1bmRvRW5kID0gc2V0RnVuY3Rpb24oZWwsIGVuZCk7XG4gICAgfSxcbiAgICBhZnRlcixcbiAgICBjbGVhbnVwKCkge1xuICAgICAgdW5kb0R1cmluZygpO1xuICAgICAgdW5kb0VuZCgpO1xuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBwZXJmb3JtVHJhbnNpdGlvbihlbCwgc3RhZ2VzKSB7XG4gIGxldCBpbnRlcnJ1cHRlZCwgcmVhY2hlZEJlZm9yZSwgcmVhY2hlZEVuZDtcbiAgbGV0IGZpbmlzaCA9IG9uY2UoKCkgPT4ge1xuICAgIG11dGF0ZURvbSgoKSA9PiB7XG4gICAgICBpbnRlcnJ1cHRlZCA9IHRydWU7XG4gICAgICBpZiAoIXJlYWNoZWRCZWZvcmUpXG4gICAgICAgIHN0YWdlcy5iZWZvcmUoKTtcbiAgICAgIGlmICghcmVhY2hlZEVuZCkge1xuICAgICAgICBzdGFnZXMuZW5kKCk7XG4gICAgICAgIHJlbGVhc2VOZXh0VGlja3MoKTtcbiAgICAgIH1cbiAgICAgIHN0YWdlcy5hZnRlcigpO1xuICAgICAgaWYgKGVsLmlzQ29ubmVjdGVkKVxuICAgICAgICBzdGFnZXMuY2xlYW51cCgpO1xuICAgICAgZGVsZXRlIGVsLl94X3RyYW5zaXRpb25pbmc7XG4gICAgfSk7XG4gIH0pO1xuICBlbC5feF90cmFuc2l0aW9uaW5nID0ge1xuICAgIGJlZm9yZUNhbmNlbHM6IFtdLFxuICAgIGJlZm9yZUNhbmNlbChjYWxsYmFjaykge1xuICAgICAgdGhpcy5iZWZvcmVDYW5jZWxzLnB1c2goY2FsbGJhY2spO1xuICAgIH0sXG4gICAgY2FuY2VsOiBvbmNlKGZ1bmN0aW9uKCkge1xuICAgICAgd2hpbGUgKHRoaXMuYmVmb3JlQ2FuY2Vscy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5iZWZvcmVDYW5jZWxzLnNoaWZ0KCkoKTtcbiAgICAgIH1cbiAgICAgIDtcbiAgICAgIGZpbmlzaCgpO1xuICAgIH0pLFxuICAgIGZpbmlzaFxuICB9O1xuICBtdXRhdGVEb20oKCkgPT4ge1xuICAgIHN0YWdlcy5zdGFydCgpO1xuICAgIHN0YWdlcy5kdXJpbmcoKTtcbiAgfSk7XG4gIGhvbGROZXh0VGlja3MoKTtcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICBpZiAoaW50ZXJydXB0ZWQpXG4gICAgICByZXR1cm47XG4gICAgbGV0IGR1cmF0aW9uID0gTnVtYmVyKGdldENvbXB1dGVkU3R5bGUoZWwpLnRyYW5zaXRpb25EdXJhdGlvbi5yZXBsYWNlKC8sLiovLCBcIlwiKS5yZXBsYWNlKFwic1wiLCBcIlwiKSkgKiAxZTM7XG4gICAgbGV0IGRlbGF5ID0gTnVtYmVyKGdldENvbXB1dGVkU3R5bGUoZWwpLnRyYW5zaXRpb25EZWxheS5yZXBsYWNlKC8sLiovLCBcIlwiKS5yZXBsYWNlKFwic1wiLCBcIlwiKSkgKiAxZTM7XG4gICAgaWYgKGR1cmF0aW9uID09PSAwKVxuICAgICAgZHVyYXRpb24gPSBOdW1iZXIoZ2V0Q29tcHV0ZWRTdHlsZShlbCkuYW5pbWF0aW9uRHVyYXRpb24ucmVwbGFjZShcInNcIiwgXCJcIikpICogMWUzO1xuICAgIG11dGF0ZURvbSgoKSA9PiB7XG4gICAgICBzdGFnZXMuYmVmb3JlKCk7XG4gICAgfSk7XG4gICAgcmVhY2hlZEJlZm9yZSA9IHRydWU7XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIGlmIChpbnRlcnJ1cHRlZClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgbXV0YXRlRG9tKCgpID0+IHtcbiAgICAgICAgc3RhZ2VzLmVuZCgpO1xuICAgICAgfSk7XG4gICAgICByZWxlYXNlTmV4dFRpY2tzKCk7XG4gICAgICBzZXRUaW1lb3V0KGVsLl94X3RyYW5zaXRpb25pbmcuZmluaXNoLCBkdXJhdGlvbiArIGRlbGF5KTtcbiAgICAgIHJlYWNoZWRFbmQgPSB0cnVlO1xuICAgIH0pO1xuICB9KTtcbn1cbmZ1bmN0aW9uIG1vZGlmaWVyVmFsdWUobW9kaWZpZXJzLCBrZXksIGZhbGxiYWNrKSB7XG4gIGlmIChtb2RpZmllcnMuaW5kZXhPZihrZXkpID09PSAtMSlcbiAgICByZXR1cm4gZmFsbGJhY2s7XG4gIGNvbnN0IHJhd1ZhbHVlID0gbW9kaWZpZXJzW21vZGlmaWVycy5pbmRleE9mKGtleSkgKyAxXTtcbiAgaWYgKCFyYXdWYWx1ZSlcbiAgICByZXR1cm4gZmFsbGJhY2s7XG4gIGlmIChrZXkgPT09IFwic2NhbGVcIikge1xuICAgIGlmIChpc05hTihyYXdWYWx1ZSkpXG4gICAgICByZXR1cm4gZmFsbGJhY2s7XG4gIH1cbiAgaWYgKGtleSA9PT0gXCJkdXJhdGlvblwiIHx8IGtleSA9PT0gXCJkZWxheVwiKSB7XG4gICAgbGV0IG1hdGNoID0gcmF3VmFsdWUubWF0Y2goLyhbMC05XSspbXMvKTtcbiAgICBpZiAobWF0Y2gpXG4gICAgICByZXR1cm4gbWF0Y2hbMV07XG4gIH1cbiAgaWYgKGtleSA9PT0gXCJvcmlnaW5cIikge1xuICAgIGlmIChbXCJ0b3BcIiwgXCJyaWdodFwiLCBcImxlZnRcIiwgXCJjZW50ZXJcIiwgXCJib3R0b21cIl0uaW5jbHVkZXMobW9kaWZpZXJzW21vZGlmaWVycy5pbmRleE9mKGtleSkgKyAyXSkpIHtcbiAgICAgIHJldHVybiBbcmF3VmFsdWUsIG1vZGlmaWVyc1ttb2RpZmllcnMuaW5kZXhPZihrZXkpICsgMl1dLmpvaW4oXCIgXCIpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmF3VmFsdWU7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9jbG9uZS5qc1xudmFyIGlzQ2xvbmluZyA9IGZhbHNlO1xuZnVuY3Rpb24gc2tpcER1cmluZ0Nsb25lKGNhbGxiYWNrLCBmYWxsYmFjayA9ICgpID0+IHtcbn0pIHtcbiAgcmV0dXJuICguLi5hcmdzKSA9PiBpc0Nsb25pbmcgPyBmYWxsYmFjayguLi5hcmdzKSA6IGNhbGxiYWNrKC4uLmFyZ3MpO1xufVxuZnVuY3Rpb24gb25seUR1cmluZ0Nsb25lKGNhbGxiYWNrKSB7XG4gIHJldHVybiAoLi4uYXJncykgPT4gaXNDbG9uaW5nICYmIGNhbGxiYWNrKC4uLmFyZ3MpO1xufVxudmFyIGludGVyY2VwdG9ycyA9IFtdO1xuZnVuY3Rpb24gaW50ZXJjZXB0Q2xvbmUoY2FsbGJhY2spIHtcbiAgaW50ZXJjZXB0b3JzLnB1c2goY2FsbGJhY2spO1xufVxuZnVuY3Rpb24gY2xvbmVOb2RlKGZyb20sIHRvKSB7XG4gIGludGVyY2VwdG9ycy5mb3JFYWNoKChpKSA9PiBpKGZyb20sIHRvKSk7XG4gIGlzQ2xvbmluZyA9IHRydWU7XG4gIGRvbnRSZWdpc3RlclJlYWN0aXZlU2lkZUVmZmVjdHMoKCkgPT4ge1xuICAgIGluaXRUcmVlKHRvLCAoZWwsIGNhbGxiYWNrKSA9PiB7XG4gICAgICBjYWxsYmFjayhlbCwgKCkgPT4ge1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuICBpc0Nsb25pbmcgPSBmYWxzZTtcbn1cbnZhciBpc0Nsb25pbmdMZWdhY3kgPSBmYWxzZTtcbmZ1bmN0aW9uIGNsb25lKG9sZEVsLCBuZXdFbCkge1xuICBpZiAoIW5ld0VsLl94X2RhdGFTdGFjaylcbiAgICBuZXdFbC5feF9kYXRhU3RhY2sgPSBvbGRFbC5feF9kYXRhU3RhY2s7XG4gIGlzQ2xvbmluZyA9IHRydWU7XG4gIGlzQ2xvbmluZ0xlZ2FjeSA9IHRydWU7XG4gIGRvbnRSZWdpc3RlclJlYWN0aXZlU2lkZUVmZmVjdHMoKCkgPT4ge1xuICAgIGNsb25lVHJlZShuZXdFbCk7XG4gIH0pO1xuICBpc0Nsb25pbmcgPSBmYWxzZTtcbiAgaXNDbG9uaW5nTGVnYWN5ID0gZmFsc2U7XG59XG5mdW5jdGlvbiBjbG9uZVRyZWUoZWwpIHtcbiAgbGV0IGhhc1J1blRocm91Z2hGaXJzdEVsID0gZmFsc2U7XG4gIGxldCBzaGFsbG93V2Fsa2VyID0gKGVsMiwgY2FsbGJhY2spID0+IHtcbiAgICB3YWxrKGVsMiwgKGVsMywgc2tpcCkgPT4ge1xuICAgICAgaWYgKGhhc1J1blRocm91Z2hGaXJzdEVsICYmIGlzUm9vdChlbDMpKVxuICAgICAgICByZXR1cm4gc2tpcCgpO1xuICAgICAgaGFzUnVuVGhyb3VnaEZpcnN0RWwgPSB0cnVlO1xuICAgICAgY2FsbGJhY2soZWwzLCBza2lwKTtcbiAgICB9KTtcbiAgfTtcbiAgaW5pdFRyZWUoZWwsIHNoYWxsb3dXYWxrZXIpO1xufVxuZnVuY3Rpb24gZG9udFJlZ2lzdGVyUmVhY3RpdmVTaWRlRWZmZWN0cyhjYWxsYmFjaykge1xuICBsZXQgY2FjaGUgPSBlZmZlY3Q7XG4gIG92ZXJyaWRlRWZmZWN0KChjYWxsYmFjazIsIGVsKSA9PiB7XG4gICAgbGV0IHN0b3JlZEVmZmVjdCA9IGNhY2hlKGNhbGxiYWNrMik7XG4gICAgcmVsZWFzZShzdG9yZWRFZmZlY3QpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgfTtcbiAgfSk7XG4gIGNhbGxiYWNrKCk7XG4gIG92ZXJyaWRlRWZmZWN0KGNhY2hlKTtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL3V0aWxzL2JpbmQuanNcbmZ1bmN0aW9uIGJpbmQoZWwsIG5hbWUsIHZhbHVlLCBtb2RpZmllcnMgPSBbXSkge1xuICBpZiAoIWVsLl94X2JpbmRpbmdzKVxuICAgIGVsLl94X2JpbmRpbmdzID0gcmVhY3RpdmUoe30pO1xuICBlbC5feF9iaW5kaW5nc1tuYW1lXSA9IHZhbHVlO1xuICBuYW1lID0gbW9kaWZpZXJzLmluY2x1ZGVzKFwiY2FtZWxcIikgPyBjYW1lbENhc2UobmFtZSkgOiBuYW1lO1xuICBzd2l0Y2ggKG5hbWUpIHtcbiAgICBjYXNlIFwidmFsdWVcIjpcbiAgICAgIGJpbmRJbnB1dFZhbHVlKGVsLCB2YWx1ZSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwic3R5bGVcIjpcbiAgICAgIGJpbmRTdHlsZXMoZWwsIHZhbHVlKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJjbGFzc1wiOlxuICAgICAgYmluZENsYXNzZXMoZWwsIHZhbHVlKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJzZWxlY3RlZFwiOlxuICAgIGNhc2UgXCJjaGVja2VkXCI6XG4gICAgICBiaW5kQXR0cmlidXRlQW5kUHJvcGVydHkoZWwsIG5hbWUsIHZhbHVlKTtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBiaW5kQXR0cmlidXRlKGVsLCBuYW1lLCB2YWx1ZSk7XG4gICAgICBicmVhaztcbiAgfVxufVxuZnVuY3Rpb24gYmluZElucHV0VmFsdWUoZWwsIHZhbHVlKSB7XG4gIGlmIChpc1JhZGlvKGVsKSkge1xuICAgIGlmIChlbC5hdHRyaWJ1dGVzLnZhbHVlID09PSB2b2lkIDApIHtcbiAgICAgIGVsLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIGlmICh3aW5kb3cuZnJvbU1vZGVsKSB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIikge1xuICAgICAgICBlbC5jaGVja2VkID0gc2FmZVBhcnNlQm9vbGVhbihlbC52YWx1ZSkgPT09IHZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWwuY2hlY2tlZCA9IGNoZWNrZWRBdHRyTG9vc2VDb21wYXJlKGVsLnZhbHVlLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzQ2hlY2tib3goZWwpKSB7XG4gICAgaWYgKE51bWJlci5pc0ludGVnZXIodmFsdWUpKSB7XG4gICAgICBlbC52YWx1ZSA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpICYmIHR5cGVvZiB2YWx1ZSAhPT0gXCJib29sZWFuXCIgJiYgIVtudWxsLCB2b2lkIDBdLmluY2x1ZGVzKHZhbHVlKSkge1xuICAgICAgZWwudmFsdWUgPSBTdHJpbmcodmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgZWwuY2hlY2tlZCA9IHZhbHVlLnNvbWUoKHZhbCkgPT4gY2hlY2tlZEF0dHJMb29zZUNvbXBhcmUodmFsLCBlbC52YWx1ZSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWwuY2hlY2tlZCA9ICEhdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKGVsLnRhZ05hbWUgPT09IFwiU0VMRUNUXCIpIHtcbiAgICB1cGRhdGVTZWxlY3QoZWwsIHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoZWwudmFsdWUgPT09IHZhbHVlKVxuICAgICAgcmV0dXJuO1xuICAgIGVsLnZhbHVlID0gdmFsdWUgPT09IHZvaWQgMCA/IFwiXCIgOiB2YWx1ZTtcbiAgfVxufVxuZnVuY3Rpb24gYmluZENsYXNzZXMoZWwsIHZhbHVlKSB7XG4gIGlmIChlbC5feF91bmRvQWRkZWRDbGFzc2VzKVxuICAgIGVsLl94X3VuZG9BZGRlZENsYXNzZXMoKTtcbiAgZWwuX3hfdW5kb0FkZGVkQ2xhc3NlcyA9IHNldENsYXNzZXMoZWwsIHZhbHVlKTtcbn1cbmZ1bmN0aW9uIGJpbmRTdHlsZXMoZWwsIHZhbHVlKSB7XG4gIGlmIChlbC5feF91bmRvQWRkZWRTdHlsZXMpXG4gICAgZWwuX3hfdW5kb0FkZGVkU3R5bGVzKCk7XG4gIGVsLl94X3VuZG9BZGRlZFN0eWxlcyA9IHNldFN0eWxlcyhlbCwgdmFsdWUpO1xufVxuZnVuY3Rpb24gYmluZEF0dHJpYnV0ZUFuZFByb3BlcnR5KGVsLCBuYW1lLCB2YWx1ZSkge1xuICBiaW5kQXR0cmlidXRlKGVsLCBuYW1lLCB2YWx1ZSk7XG4gIHNldFByb3BlcnR5SWZDaGFuZ2VkKGVsLCBuYW1lLCB2YWx1ZSk7XG59XG5mdW5jdGlvbiBiaW5kQXR0cmlidXRlKGVsLCBuYW1lLCB2YWx1ZSkge1xuICBpZiAoW251bGwsIHZvaWQgMCwgZmFsc2VdLmluY2x1ZGVzKHZhbHVlKSAmJiBhdHRyaWJ1dGVTaG91bGRudEJlUHJlc2VydmVkSWZGYWxzeShuYW1lKSkge1xuICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoaXNCb29sZWFuQXR0cihuYW1lKSlcbiAgICAgIHZhbHVlID0gbmFtZTtcbiAgICBzZXRJZkNoYW5nZWQoZWwsIG5hbWUsIHZhbHVlKTtcbiAgfVxufVxuZnVuY3Rpb24gc2V0SWZDaGFuZ2VkKGVsLCBhdHRyTmFtZSwgdmFsdWUpIHtcbiAgaWYgKGVsLmdldEF0dHJpYnV0ZShhdHRyTmFtZSkgIT0gdmFsdWUpIHtcbiAgICBlbC5zZXRBdHRyaWJ1dGUoYXR0ck5hbWUsIHZhbHVlKTtcbiAgfVxufVxuZnVuY3Rpb24gc2V0UHJvcGVydHlJZkNoYW5nZWQoZWwsIHByb3BOYW1lLCB2YWx1ZSkge1xuICBpZiAoZWxbcHJvcE5hbWVdICE9PSB2YWx1ZSkge1xuICAgIGVsW3Byb3BOYW1lXSA9IHZhbHVlO1xuICB9XG59XG5mdW5jdGlvbiB1cGRhdGVTZWxlY3QoZWwsIHZhbHVlKSB7XG4gIGNvbnN0IGFycmF5V3JhcHBlZFZhbHVlID0gW10uY29uY2F0KHZhbHVlKS5tYXAoKHZhbHVlMikgPT4ge1xuICAgIHJldHVybiB2YWx1ZTIgKyBcIlwiO1xuICB9KTtcbiAgQXJyYXkuZnJvbShlbC5vcHRpb25zKS5mb3JFYWNoKChvcHRpb24pID0+IHtcbiAgICBvcHRpb24uc2VsZWN0ZWQgPSBhcnJheVdyYXBwZWRWYWx1ZS5pbmNsdWRlcyhvcHRpb24udmFsdWUpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGNhbWVsQ2FzZShzdWJqZWN0KSB7XG4gIHJldHVybiBzdWJqZWN0LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvLShcXHcpL2csIChtYXRjaCwgY2hhcikgPT4gY2hhci50b1VwcGVyQ2FzZSgpKTtcbn1cbmZ1bmN0aW9uIGNoZWNrZWRBdHRyTG9vc2VDb21wYXJlKHZhbHVlQSwgdmFsdWVCKSB7XG4gIHJldHVybiB2YWx1ZUEgPT0gdmFsdWVCO1xufVxuZnVuY3Rpb24gc2FmZVBhcnNlQm9vbGVhbihyYXdWYWx1ZSkge1xuICBpZiAoWzEsIFwiMVwiLCBcInRydWVcIiwgXCJvblwiLCBcInllc1wiLCB0cnVlXS5pbmNsdWRlcyhyYXdWYWx1ZSkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoWzAsIFwiMFwiLCBcImZhbHNlXCIsIFwib2ZmXCIsIFwibm9cIiwgZmFsc2VdLmluY2x1ZGVzKHJhd1ZhbHVlKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gcmF3VmFsdWUgPyBCb29sZWFuKHJhd1ZhbHVlKSA6IG51bGw7XG59XG52YXIgYm9vbGVhbkF0dHJpYnV0ZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbXG4gIFwiYWxsb3dmdWxsc2NyZWVuXCIsXG4gIFwiYXN5bmNcIixcbiAgXCJhdXRvZm9jdXNcIixcbiAgXCJhdXRvcGxheVwiLFxuICBcImNoZWNrZWRcIixcbiAgXCJjb250cm9sc1wiLFxuICBcImRlZmF1bHRcIixcbiAgXCJkZWZlclwiLFxuICBcImRpc2FibGVkXCIsXG4gIFwiZm9ybW5vdmFsaWRhdGVcIixcbiAgXCJpbmVydFwiLFxuICBcImlzbWFwXCIsXG4gIFwiaXRlbXNjb3BlXCIsXG4gIFwibG9vcFwiLFxuICBcIm11bHRpcGxlXCIsXG4gIFwibXV0ZWRcIixcbiAgXCJub21vZHVsZVwiLFxuICBcIm5vdmFsaWRhdGVcIixcbiAgXCJvcGVuXCIsXG4gIFwicGxheXNpbmxpbmVcIixcbiAgXCJyZWFkb25seVwiLFxuICBcInJlcXVpcmVkXCIsXG4gIFwicmV2ZXJzZWRcIixcbiAgXCJzZWxlY3RlZFwiLFxuICBcInNoYWRvd3Jvb3RjbG9uYWJsZVwiLFxuICBcInNoYWRvd3Jvb3RkZWxlZ2F0ZXNmb2N1c1wiLFxuICBcInNoYWRvd3Jvb3RzZXJpYWxpemFibGVcIlxuXSk7XG5mdW5jdGlvbiBpc0Jvb2xlYW5BdHRyKGF0dHJOYW1lKSB7XG4gIHJldHVybiBib29sZWFuQXR0cmlidXRlcy5oYXMoYXR0ck5hbWUpO1xufVxuZnVuY3Rpb24gYXR0cmlidXRlU2hvdWxkbnRCZVByZXNlcnZlZElmRmFsc3kobmFtZSkge1xuICByZXR1cm4gIVtcImFyaWEtcHJlc3NlZFwiLCBcImFyaWEtY2hlY2tlZFwiLCBcImFyaWEtZXhwYW5kZWRcIiwgXCJhcmlhLXNlbGVjdGVkXCJdLmluY2x1ZGVzKG5hbWUpO1xufVxuZnVuY3Rpb24gZ2V0QmluZGluZyhlbCwgbmFtZSwgZmFsbGJhY2spIHtcbiAgaWYgKGVsLl94X2JpbmRpbmdzICYmIGVsLl94X2JpbmRpbmdzW25hbWVdICE9PSB2b2lkIDApXG4gICAgcmV0dXJuIGVsLl94X2JpbmRpbmdzW25hbWVdO1xuICByZXR1cm4gZ2V0QXR0cmlidXRlQmluZGluZyhlbCwgbmFtZSwgZmFsbGJhY2spO1xufVxuZnVuY3Rpb24gZXh0cmFjdFByb3AoZWwsIG5hbWUsIGZhbGxiYWNrLCBleHRyYWN0ID0gdHJ1ZSkge1xuICBpZiAoZWwuX3hfYmluZGluZ3MgJiYgZWwuX3hfYmluZGluZ3NbbmFtZV0gIT09IHZvaWQgMClcbiAgICByZXR1cm4gZWwuX3hfYmluZGluZ3NbbmFtZV07XG4gIGlmIChlbC5feF9pbmxpbmVCaW5kaW5ncyAmJiBlbC5feF9pbmxpbmVCaW5kaW5nc1tuYW1lXSAhPT0gdm9pZCAwKSB7XG4gICAgbGV0IGJpbmRpbmcgPSBlbC5feF9pbmxpbmVCaW5kaW5nc1tuYW1lXTtcbiAgICBiaW5kaW5nLmV4dHJhY3QgPSBleHRyYWN0O1xuICAgIHJldHVybiBkb250QXV0b0V2YWx1YXRlRnVuY3Rpb25zKCgpID0+IHtcbiAgICAgIHJldHVybiBldmFsdWF0ZShlbCwgYmluZGluZy5leHByZXNzaW9uKTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gZ2V0QXR0cmlidXRlQmluZGluZyhlbCwgbmFtZSwgZmFsbGJhY2spO1xufVxuZnVuY3Rpb24gZ2V0QXR0cmlidXRlQmluZGluZyhlbCwgbmFtZSwgZmFsbGJhY2spIHtcbiAgbGV0IGF0dHIgPSBlbC5nZXRBdHRyaWJ1dGUobmFtZSk7XG4gIGlmIChhdHRyID09PSBudWxsKVxuICAgIHJldHVybiB0eXBlb2YgZmFsbGJhY2sgPT09IFwiZnVuY3Rpb25cIiA/IGZhbGxiYWNrKCkgOiBmYWxsYmFjaztcbiAgaWYgKGF0dHIgPT09IFwiXCIpXG4gICAgcmV0dXJuIHRydWU7XG4gIGlmIChpc0Jvb2xlYW5BdHRyKG5hbWUpKSB7XG4gICAgcmV0dXJuICEhW25hbWUsIFwidHJ1ZVwiXS5pbmNsdWRlcyhhdHRyKTtcbiAgfVxuICByZXR1cm4gYXR0cjtcbn1cbmZ1bmN0aW9uIGlzQ2hlY2tib3goZWwpIHtcbiAgcmV0dXJuIGVsLnR5cGUgPT09IFwiY2hlY2tib3hcIiB8fCBlbC5sb2NhbE5hbWUgPT09IFwidWktY2hlY2tib3hcIiB8fCBlbC5sb2NhbE5hbWUgPT09IFwidWktc3dpdGNoXCI7XG59XG5mdW5jdGlvbiBpc1JhZGlvKGVsKSB7XG4gIHJldHVybiBlbC50eXBlID09PSBcInJhZGlvXCIgfHwgZWwubG9jYWxOYW1lID09PSBcInVpLXJhZGlvXCI7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy91dGlscy9kZWJvdW5jZS5qc1xuZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCkge1xuICB2YXIgdGltZW91dDtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBjb250ZXh0ID0gdGhpcywgYXJncyA9IGFyZ3VtZW50cztcbiAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICB9O1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XG4gIH07XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy91dGlscy90aHJvdHRsZS5qc1xuZnVuY3Rpb24gdGhyb3R0bGUoZnVuYywgbGltaXQpIHtcbiAgbGV0IGluVGhyb3R0bGU7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBsZXQgY29udGV4dCA9IHRoaXMsIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgaWYgKCFpblRocm90dGxlKSB7XG4gICAgICBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgaW5UaHJvdHRsZSA9IHRydWU7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IGluVGhyb3R0bGUgPSBmYWxzZSwgbGltaXQpO1xuICAgIH1cbiAgfTtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2VudGFuZ2xlLmpzXG5mdW5jdGlvbiBlbnRhbmdsZSh7IGdldDogb3V0ZXJHZXQsIHNldDogb3V0ZXJTZXQgfSwgeyBnZXQ6IGlubmVyR2V0LCBzZXQ6IGlubmVyU2V0IH0pIHtcbiAgbGV0IGZpcnN0UnVuID0gdHJ1ZTtcbiAgbGV0IG91dGVySGFzaDtcbiAgbGV0IGlubmVySGFzaDtcbiAgbGV0IHJlZmVyZW5jZSA9IGVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IG91dGVyID0gb3V0ZXJHZXQoKTtcbiAgICBsZXQgaW5uZXIgPSBpbm5lckdldCgpO1xuICAgIGlmIChmaXJzdFJ1bikge1xuICAgICAgaW5uZXJTZXQoY2xvbmVJZk9iamVjdChvdXRlcikpO1xuICAgICAgZmlyc3RSdW4gPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IG91dGVySGFzaExhdGVzdCA9IEpTT04uc3RyaW5naWZ5KG91dGVyKTtcbiAgICAgIGxldCBpbm5lckhhc2hMYXRlc3QgPSBKU09OLnN0cmluZ2lmeShpbm5lcik7XG4gICAgICBpZiAob3V0ZXJIYXNoTGF0ZXN0ICE9PSBvdXRlckhhc2gpIHtcbiAgICAgICAgaW5uZXJTZXQoY2xvbmVJZk9iamVjdChvdXRlcikpO1xuICAgICAgfSBlbHNlIGlmIChvdXRlckhhc2hMYXRlc3QgIT09IGlubmVySGFzaExhdGVzdCkge1xuICAgICAgICBvdXRlclNldChjbG9uZUlmT2JqZWN0KGlubmVyKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgfVxuICAgIH1cbiAgICBvdXRlckhhc2ggPSBKU09OLnN0cmluZ2lmeShvdXRlckdldCgpKTtcbiAgICBpbm5lckhhc2ggPSBKU09OLnN0cmluZ2lmeShpbm5lckdldCgpKTtcbiAgfSk7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgcmVsZWFzZShyZWZlcmVuY2UpO1xuICB9O1xufVxuZnVuY3Rpb24gY2xvbmVJZk9iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiID8gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh2YWx1ZSkpIDogdmFsdWU7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9wbHVnaW4uanNcbmZ1bmN0aW9uIHBsdWdpbihjYWxsYmFjaykge1xuICBsZXQgY2FsbGJhY2tzID0gQXJyYXkuaXNBcnJheShjYWxsYmFjaykgPyBjYWxsYmFjayA6IFtjYWxsYmFja107XG4gIGNhbGxiYWNrcy5mb3JFYWNoKChpKSA9PiBpKGFscGluZV9kZWZhdWx0KSk7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9zdG9yZS5qc1xudmFyIHN0b3JlcyA9IHt9O1xudmFyIGlzUmVhY3RpdmUgPSBmYWxzZTtcbmZ1bmN0aW9uIHN0b3JlKG5hbWUsIHZhbHVlKSB7XG4gIGlmICghaXNSZWFjdGl2ZSkge1xuICAgIHN0b3JlcyA9IHJlYWN0aXZlKHN0b3Jlcyk7XG4gICAgaXNSZWFjdGl2ZSA9IHRydWU7XG4gIH1cbiAgaWYgKHZhbHVlID09PSB2b2lkIDApIHtcbiAgICByZXR1cm4gc3RvcmVzW25hbWVdO1xuICB9XG4gIHN0b3Jlc1tuYW1lXSA9IHZhbHVlO1xuICBpbml0SW50ZXJjZXB0b3JzKHN0b3Jlc1tuYW1lXSk7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgIT09IG51bGwgJiYgdmFsdWUuaGFzT3duUHJvcGVydHkoXCJpbml0XCIpICYmIHR5cGVvZiB2YWx1ZS5pbml0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBzdG9yZXNbbmFtZV0uaW5pdCgpO1xuICB9XG59XG5mdW5jdGlvbiBnZXRTdG9yZXMoKSB7XG4gIHJldHVybiBzdG9yZXM7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9iaW5kcy5qc1xudmFyIGJpbmRzID0ge307XG5mdW5jdGlvbiBiaW5kMihuYW1lLCBiaW5kaW5ncykge1xuICBsZXQgZ2V0QmluZGluZ3MgPSB0eXBlb2YgYmluZGluZ3MgIT09IFwiZnVuY3Rpb25cIiA/ICgpID0+IGJpbmRpbmdzIDogYmluZGluZ3M7XG4gIGlmIChuYW1lIGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgIHJldHVybiBhcHBseUJpbmRpbmdzT2JqZWN0KG5hbWUsIGdldEJpbmRpbmdzKCkpO1xuICB9IGVsc2Uge1xuICAgIGJpbmRzW25hbWVdID0gZ2V0QmluZGluZ3M7XG4gIH1cbiAgcmV0dXJuICgpID0+IHtcbiAgfTtcbn1cbmZ1bmN0aW9uIGluamVjdEJpbmRpbmdQcm92aWRlcnMob2JqKSB7XG4gIE9iamVjdC5lbnRyaWVzKGJpbmRzKS5mb3JFYWNoKChbbmFtZSwgY2FsbGJhY2tdKSA9PiB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgbmFtZSwge1xuICAgICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2soLi4uYXJncyk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gb2JqO1xufVxuZnVuY3Rpb24gYXBwbHlCaW5kaW5nc09iamVjdChlbCwgb2JqLCBvcmlnaW5hbCkge1xuICBsZXQgY2xlYW51cFJ1bm5lcnMgPSBbXTtcbiAgd2hpbGUgKGNsZWFudXBSdW5uZXJzLmxlbmd0aClcbiAgICBjbGVhbnVwUnVubmVycy5wb3AoKSgpO1xuICBsZXQgYXR0cmlidXRlcyA9IE9iamVjdC5lbnRyaWVzKG9iaikubWFwKChbbmFtZSwgdmFsdWVdKSA9PiAoeyBuYW1lLCB2YWx1ZSB9KSk7XG4gIGxldCBzdGF0aWNBdHRyaWJ1dGVzID0gYXR0cmlidXRlc09ubHkoYXR0cmlidXRlcyk7XG4gIGF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzLm1hcCgoYXR0cmlidXRlKSA9PiB7XG4gICAgaWYgKHN0YXRpY0F0dHJpYnV0ZXMuZmluZCgoYXR0cikgPT4gYXR0ci5uYW1lID09PSBhdHRyaWJ1dGUubmFtZSkpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IGB4LWJpbmQ6JHthdHRyaWJ1dGUubmFtZX1gLFxuICAgICAgICB2YWx1ZTogYFwiJHthdHRyaWJ1dGUudmFsdWV9XCJgXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gYXR0cmlidXRlO1xuICB9KTtcbiAgZGlyZWN0aXZlcyhlbCwgYXR0cmlidXRlcywgb3JpZ2luYWwpLm1hcCgoaGFuZGxlKSA9PiB7XG4gICAgY2xlYW51cFJ1bm5lcnMucHVzaChoYW5kbGUucnVuQ2xlYW51cHMpO1xuICAgIGhhbmRsZSgpO1xuICB9KTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICB3aGlsZSAoY2xlYW51cFJ1bm5lcnMubGVuZ3RoKVxuICAgICAgY2xlYW51cFJ1bm5lcnMucG9wKCkoKTtcbiAgfTtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2RhdGFzLmpzXG52YXIgZGF0YXMgPSB7fTtcbmZ1bmN0aW9uIGRhdGEobmFtZSwgY2FsbGJhY2spIHtcbiAgZGF0YXNbbmFtZV0gPSBjYWxsYmFjaztcbn1cbmZ1bmN0aW9uIGluamVjdERhdGFQcm92aWRlcnMob2JqLCBjb250ZXh0KSB7XG4gIE9iamVjdC5lbnRyaWVzKGRhdGFzKS5mb3JFYWNoKChbbmFtZSwgY2FsbGJhY2tdKSA9PiB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgbmFtZSwge1xuICAgICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2suYmluZChjb250ZXh0KSguLi5hcmdzKTtcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZVxuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIG9iajtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2FscGluZS5qc1xudmFyIEFscGluZSA9IHtcbiAgZ2V0IHJlYWN0aXZlKCkge1xuICAgIHJldHVybiByZWFjdGl2ZTtcbiAgfSxcbiAgZ2V0IHJlbGVhc2UoKSB7XG4gICAgcmV0dXJuIHJlbGVhc2U7XG4gIH0sXG4gIGdldCBlZmZlY3QoKSB7XG4gICAgcmV0dXJuIGVmZmVjdDtcbiAgfSxcbiAgZ2V0IHJhdygpIHtcbiAgICByZXR1cm4gcmF3O1xuICB9LFxuICB2ZXJzaW9uOiBcIjMuMTQuOVwiLFxuICBmbHVzaEFuZFN0b3BEZWZlcnJpbmdNdXRhdGlvbnMsXG4gIGRvbnRBdXRvRXZhbHVhdGVGdW5jdGlvbnMsXG4gIGRpc2FibGVFZmZlY3RTY2hlZHVsaW5nLFxuICBzdGFydE9ic2VydmluZ011dGF0aW9ucyxcbiAgc3RvcE9ic2VydmluZ011dGF0aW9ucyxcbiAgc2V0UmVhY3Rpdml0eUVuZ2luZSxcbiAgb25BdHRyaWJ1dGVSZW1vdmVkLFxuICBvbkF0dHJpYnV0ZXNBZGRlZCxcbiAgY2xvc2VzdERhdGFTdGFjayxcbiAgc2tpcER1cmluZ0Nsb25lLFxuICBvbmx5RHVyaW5nQ2xvbmUsXG4gIGFkZFJvb3RTZWxlY3RvcixcbiAgYWRkSW5pdFNlbGVjdG9yLFxuICBpbnRlcmNlcHRDbG9uZSxcbiAgYWRkU2NvcGVUb05vZGUsXG4gIGRlZmVyTXV0YXRpb25zLFxuICBtYXBBdHRyaWJ1dGVzLFxuICBldmFsdWF0ZUxhdGVyLFxuICBpbnRlcmNlcHRJbml0LFxuICBzZXRFdmFsdWF0b3IsXG4gIG1lcmdlUHJveGllcyxcbiAgZXh0cmFjdFByb3AsXG4gIGZpbmRDbG9zZXN0LFxuICBvbkVsUmVtb3ZlZCxcbiAgY2xvc2VzdFJvb3QsXG4gIGRlc3Ryb3lUcmVlLFxuICBpbnRlcmNlcHRvcixcbiAgLy8gSU5URVJOQUw6IG5vdCBwdWJsaWMgQVBJIGFuZCBpcyBzdWJqZWN0IHRvIGNoYW5nZSB3aXRob3V0IG1ham9yIHJlbGVhc2UuXG4gIHRyYW5zaXRpb24sXG4gIC8vIElOVEVSTkFMXG4gIHNldFN0eWxlcyxcbiAgLy8gSU5URVJOQUxcbiAgbXV0YXRlRG9tLFxuICBkaXJlY3RpdmUsXG4gIGVudGFuZ2xlLFxuICB0aHJvdHRsZSxcbiAgZGVib3VuY2UsXG4gIGV2YWx1YXRlLFxuICBpbml0VHJlZSxcbiAgbmV4dFRpY2ssXG4gIHByZWZpeGVkOiBwcmVmaXgsXG4gIHByZWZpeDogc2V0UHJlZml4LFxuICBwbHVnaW4sXG4gIG1hZ2ljLFxuICBzdG9yZSxcbiAgc3RhcnQsXG4gIGNsb25lLFxuICAvLyBJTlRFUk5BTFxuICBjbG9uZU5vZGUsXG4gIC8vIElOVEVSTkFMXG4gIGJvdW5kOiBnZXRCaW5kaW5nLFxuICAkZGF0YTogc2NvcGUsXG4gIHdhdGNoLFxuICB3YWxrLFxuICBkYXRhLFxuICBiaW5kOiBiaW5kMlxufTtcbnZhciBhbHBpbmVfZGVmYXVsdCA9IEFscGluZTtcblxuLy8gbm9kZV9tb2R1bGVzL0B2dWUvc2hhcmVkL2Rpc3Qvc2hhcmVkLmVzbS1idW5kbGVyLmpzXG5mdW5jdGlvbiBtYWtlTWFwKHN0ciwgZXhwZWN0c0xvd2VyQ2FzZSkge1xuICBjb25zdCBtYXAgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgY29uc3QgbGlzdCA9IHN0ci5zcGxpdChcIixcIik7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIG1hcFtsaXN0W2ldXSA9IHRydWU7XG4gIH1cbiAgcmV0dXJuIGV4cGVjdHNMb3dlckNhc2UgPyAodmFsKSA9PiAhIW1hcFt2YWwudG9Mb3dlckNhc2UoKV0gOiAodmFsKSA9PiAhIW1hcFt2YWxdO1xufVxudmFyIHNwZWNpYWxCb29sZWFuQXR0cnMgPSBgaXRlbXNjb3BlLGFsbG93ZnVsbHNjcmVlbixmb3Jtbm92YWxpZGF0ZSxpc21hcCxub21vZHVsZSxub3ZhbGlkYXRlLHJlYWRvbmx5YDtcbnZhciBpc0Jvb2xlYW5BdHRyMiA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKHNwZWNpYWxCb29sZWFuQXR0cnMgKyBgLGFzeW5jLGF1dG9mb2N1cyxhdXRvcGxheSxjb250cm9scyxkZWZhdWx0LGRlZmVyLGRpc2FibGVkLGhpZGRlbixsb29wLG9wZW4scmVxdWlyZWQscmV2ZXJzZWQsc2NvcGVkLHNlYW1sZXNzLGNoZWNrZWQsbXV0ZWQsbXVsdGlwbGUsc2VsZWN0ZWRgKTtcbnZhciBFTVBUWV9PQkogPSB0cnVlID8gT2JqZWN0LmZyZWV6ZSh7fSkgOiB7fTtcbnZhciBFTVBUWV9BUlIgPSB0cnVlID8gT2JqZWN0LmZyZWV6ZShbXSkgOiBbXTtcbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgaGFzT3duID0gKHZhbCwga2V5KSA9PiBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbCwga2V5KTtcbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbnZhciBpc01hcCA9ICh2YWwpID0+IHRvVHlwZVN0cmluZyh2YWwpID09PSBcIltvYmplY3QgTWFwXVwiO1xudmFyIGlzU3RyaW5nID0gKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIjtcbnZhciBpc1N5bWJvbCA9ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09IFwic3ltYm9sXCI7XG52YXIgaXNPYmplY3QgPSAodmFsKSA9PiB2YWwgIT09IG51bGwgJiYgdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIjtcbnZhciBvYmplY3RUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG52YXIgdG9UeXBlU3RyaW5nID0gKHZhbHVlKSA9PiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTtcbnZhciB0b1Jhd1R5cGUgPSAodmFsdWUpID0+IHtcbiAgcmV0dXJuIHRvVHlwZVN0cmluZyh2YWx1ZSkuc2xpY2UoOCwgLTEpO1xufTtcbnZhciBpc0ludGVnZXJLZXkgPSAoa2V5KSA9PiBpc1N0cmluZyhrZXkpICYmIGtleSAhPT0gXCJOYU5cIiAmJiBrZXlbMF0gIT09IFwiLVwiICYmIFwiXCIgKyBwYXJzZUludChrZXksIDEwKSA9PT0ga2V5O1xudmFyIGNhY2hlU3RyaW5nRnVuY3Rpb24gPSAoZm4pID0+IHtcbiAgY29uc3QgY2FjaGUgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgcmV0dXJuIChzdHIpID0+IHtcbiAgICBjb25zdCBoaXQgPSBjYWNoZVtzdHJdO1xuICAgIHJldHVybiBoaXQgfHwgKGNhY2hlW3N0cl0gPSBmbihzdHIpKTtcbiAgfTtcbn07XG52YXIgY2FtZWxpemVSRSA9IC8tKFxcdykvZztcbnZhciBjYW1lbGl6ZSA9IGNhY2hlU3RyaW5nRnVuY3Rpb24oKHN0cikgPT4ge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoY2FtZWxpemVSRSwgKF8sIGMpID0+IGMgPyBjLnRvVXBwZXJDYXNlKCkgOiBcIlwiKTtcbn0pO1xudmFyIGh5cGhlbmF0ZVJFID0gL1xcQihbQS1aXSkvZztcbnZhciBoeXBoZW5hdGUgPSBjYWNoZVN0cmluZ0Z1bmN0aW9uKChzdHIpID0+IHN0ci5yZXBsYWNlKGh5cGhlbmF0ZVJFLCBcIi0kMVwiKS50b0xvd2VyQ2FzZSgpKTtcbnZhciBjYXBpdGFsaXplID0gY2FjaGVTdHJpbmdGdW5jdGlvbigoc3RyKSA9PiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSkpO1xudmFyIHRvSGFuZGxlcktleSA9IGNhY2hlU3RyaW5nRnVuY3Rpb24oKHN0cikgPT4gc3RyID8gYG9uJHtjYXBpdGFsaXplKHN0cil9YCA6IGBgKTtcbnZhciBoYXNDaGFuZ2VkID0gKHZhbHVlLCBvbGRWYWx1ZSkgPT4gdmFsdWUgIT09IG9sZFZhbHVlICYmICh2YWx1ZSA9PT0gdmFsdWUgfHwgb2xkVmFsdWUgPT09IG9sZFZhbHVlKTtcblxuLy8gbm9kZV9tb2R1bGVzL0B2dWUvcmVhY3Rpdml0eS9kaXN0L3JlYWN0aXZpdHkuZXNtLWJ1bmRsZXIuanNcbnZhciB0YXJnZXRNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbnZhciBlZmZlY3RTdGFjayA9IFtdO1xudmFyIGFjdGl2ZUVmZmVjdDtcbnZhciBJVEVSQVRFX0tFWSA9IFN5bWJvbCh0cnVlID8gXCJpdGVyYXRlXCIgOiBcIlwiKTtcbnZhciBNQVBfS0VZX0lURVJBVEVfS0VZID0gU3ltYm9sKHRydWUgPyBcIk1hcCBrZXkgaXRlcmF0ZVwiIDogXCJcIik7XG5mdW5jdGlvbiBpc0VmZmVjdChmbikge1xuICByZXR1cm4gZm4gJiYgZm4uX2lzRWZmZWN0ID09PSB0cnVlO1xufVxuZnVuY3Rpb24gZWZmZWN0Mihmbiwgb3B0aW9ucyA9IEVNUFRZX09CSikge1xuICBpZiAoaXNFZmZlY3QoZm4pKSB7XG4gICAgZm4gPSBmbi5yYXc7XG4gIH1cbiAgY29uc3QgZWZmZWN0MyA9IGNyZWF0ZVJlYWN0aXZlRWZmZWN0KGZuLCBvcHRpb25zKTtcbiAgaWYgKCFvcHRpb25zLmxhenkpIHtcbiAgICBlZmZlY3QzKCk7XG4gIH1cbiAgcmV0dXJuIGVmZmVjdDM7XG59XG5mdW5jdGlvbiBzdG9wKGVmZmVjdDMpIHtcbiAgaWYgKGVmZmVjdDMuYWN0aXZlKSB7XG4gICAgY2xlYW51cChlZmZlY3QzKTtcbiAgICBpZiAoZWZmZWN0My5vcHRpb25zLm9uU3RvcCkge1xuICAgICAgZWZmZWN0My5vcHRpb25zLm9uU3RvcCgpO1xuICAgIH1cbiAgICBlZmZlY3QzLmFjdGl2ZSA9IGZhbHNlO1xuICB9XG59XG52YXIgdWlkID0gMDtcbmZ1bmN0aW9uIGNyZWF0ZVJlYWN0aXZlRWZmZWN0KGZuLCBvcHRpb25zKSB7XG4gIGNvbnN0IGVmZmVjdDMgPSBmdW5jdGlvbiByZWFjdGl2ZUVmZmVjdCgpIHtcbiAgICBpZiAoIWVmZmVjdDMuYWN0aXZlKSB7XG4gICAgICByZXR1cm4gZm4oKTtcbiAgICB9XG4gICAgaWYgKCFlZmZlY3RTdGFjay5pbmNsdWRlcyhlZmZlY3QzKSkge1xuICAgICAgY2xlYW51cChlZmZlY3QzKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGVuYWJsZVRyYWNraW5nKCk7XG4gICAgICAgIGVmZmVjdFN0YWNrLnB1c2goZWZmZWN0Myk7XG4gICAgICAgIGFjdGl2ZUVmZmVjdCA9IGVmZmVjdDM7XG4gICAgICAgIHJldHVybiBmbigpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgZWZmZWN0U3RhY2sucG9wKCk7XG4gICAgICAgIHJlc2V0VHJhY2tpbmcoKTtcbiAgICAgICAgYWN0aXZlRWZmZWN0ID0gZWZmZWN0U3RhY2tbZWZmZWN0U3RhY2subGVuZ3RoIC0gMV07XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBlZmZlY3QzLmlkID0gdWlkKys7XG4gIGVmZmVjdDMuYWxsb3dSZWN1cnNlID0gISFvcHRpb25zLmFsbG93UmVjdXJzZTtcbiAgZWZmZWN0My5faXNFZmZlY3QgPSB0cnVlO1xuICBlZmZlY3QzLmFjdGl2ZSA9IHRydWU7XG4gIGVmZmVjdDMucmF3ID0gZm47XG4gIGVmZmVjdDMuZGVwcyA9IFtdO1xuICBlZmZlY3QzLm9wdGlvbnMgPSBvcHRpb25zO1xuICByZXR1cm4gZWZmZWN0Mztcbn1cbmZ1bmN0aW9uIGNsZWFudXAoZWZmZWN0Mykge1xuICBjb25zdCB7IGRlcHMgfSA9IGVmZmVjdDM7XG4gIGlmIChkZXBzLmxlbmd0aCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVwcy5sZW5ndGg7IGkrKykge1xuICAgICAgZGVwc1tpXS5kZWxldGUoZWZmZWN0Myk7XG4gICAgfVxuICAgIGRlcHMubGVuZ3RoID0gMDtcbiAgfVxufVxudmFyIHNob3VsZFRyYWNrID0gdHJ1ZTtcbnZhciB0cmFja1N0YWNrID0gW107XG5mdW5jdGlvbiBwYXVzZVRyYWNraW5nKCkge1xuICB0cmFja1N0YWNrLnB1c2goc2hvdWxkVHJhY2spO1xuICBzaG91bGRUcmFjayA9IGZhbHNlO1xufVxuZnVuY3Rpb24gZW5hYmxlVHJhY2tpbmcoKSB7XG4gIHRyYWNrU3RhY2sucHVzaChzaG91bGRUcmFjayk7XG4gIHNob3VsZFRyYWNrID0gdHJ1ZTtcbn1cbmZ1bmN0aW9uIHJlc2V0VHJhY2tpbmcoKSB7XG4gIGNvbnN0IGxhc3QgPSB0cmFja1N0YWNrLnBvcCgpO1xuICBzaG91bGRUcmFjayA9IGxhc3QgPT09IHZvaWQgMCA/IHRydWUgOiBsYXN0O1xufVxuZnVuY3Rpb24gdHJhY2sodGFyZ2V0LCB0eXBlLCBrZXkpIHtcbiAgaWYgKCFzaG91bGRUcmFjayB8fCBhY3RpdmVFZmZlY3QgPT09IHZvaWQgMCkge1xuICAgIHJldHVybjtcbiAgfVxuICBsZXQgZGVwc01hcCA9IHRhcmdldE1hcC5nZXQodGFyZ2V0KTtcbiAgaWYgKCFkZXBzTWFwKSB7XG4gICAgdGFyZ2V0TWFwLnNldCh0YXJnZXQsIGRlcHNNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpKTtcbiAgfVxuICBsZXQgZGVwID0gZGVwc01hcC5nZXQoa2V5KTtcbiAgaWYgKCFkZXApIHtcbiAgICBkZXBzTWFwLnNldChrZXksIGRlcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCkpO1xuICB9XG4gIGlmICghZGVwLmhhcyhhY3RpdmVFZmZlY3QpKSB7XG4gICAgZGVwLmFkZChhY3RpdmVFZmZlY3QpO1xuICAgIGFjdGl2ZUVmZmVjdC5kZXBzLnB1c2goZGVwKTtcbiAgICBpZiAoYWN0aXZlRWZmZWN0Lm9wdGlvbnMub25UcmFjaykge1xuICAgICAgYWN0aXZlRWZmZWN0Lm9wdGlvbnMub25UcmFjayh7XG4gICAgICAgIGVmZmVjdDogYWN0aXZlRWZmZWN0LFxuICAgICAgICB0YXJnZXQsXG4gICAgICAgIHR5cGUsXG4gICAgICAgIGtleVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiB0cmlnZ2VyKHRhcmdldCwgdHlwZSwga2V5LCBuZXdWYWx1ZSwgb2xkVmFsdWUsIG9sZFRhcmdldCkge1xuICBjb25zdCBkZXBzTWFwID0gdGFyZ2V0TWFwLmdldCh0YXJnZXQpO1xuICBpZiAoIWRlcHNNYXApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgZWZmZWN0cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gIGNvbnN0IGFkZDIgPSAoZWZmZWN0c1RvQWRkKSA9PiB7XG4gICAgaWYgKGVmZmVjdHNUb0FkZCkge1xuICAgICAgZWZmZWN0c1RvQWRkLmZvckVhY2goKGVmZmVjdDMpID0+IHtcbiAgICAgICAgaWYgKGVmZmVjdDMgIT09IGFjdGl2ZUVmZmVjdCB8fCBlZmZlY3QzLmFsbG93UmVjdXJzZSkge1xuICAgICAgICAgIGVmZmVjdHMuYWRkKGVmZmVjdDMpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG4gIGlmICh0eXBlID09PSBcImNsZWFyXCIpIHtcbiAgICBkZXBzTWFwLmZvckVhY2goYWRkMik7XG4gIH0gZWxzZSBpZiAoa2V5ID09PSBcImxlbmd0aFwiICYmIGlzQXJyYXkodGFyZ2V0KSkge1xuICAgIGRlcHNNYXAuZm9yRWFjaCgoZGVwLCBrZXkyKSA9PiB7XG4gICAgICBpZiAoa2V5MiA9PT0gXCJsZW5ndGhcIiB8fCBrZXkyID49IG5ld1ZhbHVlKSB7XG4gICAgICAgIGFkZDIoZGVwKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoa2V5ICE9PSB2b2lkIDApIHtcbiAgICAgIGFkZDIoZGVwc01hcC5nZXQoa2V5KSk7XG4gICAgfVxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBcImFkZFwiOlxuICAgICAgICBpZiAoIWlzQXJyYXkodGFyZ2V0KSkge1xuICAgICAgICAgIGFkZDIoZGVwc01hcC5nZXQoSVRFUkFURV9LRVkpKTtcbiAgICAgICAgICBpZiAoaXNNYXAodGFyZ2V0KSkge1xuICAgICAgICAgICAgYWRkMihkZXBzTWFwLmdldChNQVBfS0VZX0lURVJBVEVfS0VZKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGlzSW50ZWdlcktleShrZXkpKSB7XG4gICAgICAgICAgYWRkMihkZXBzTWFwLmdldChcImxlbmd0aFwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiZGVsZXRlXCI6XG4gICAgICAgIGlmICghaXNBcnJheSh0YXJnZXQpKSB7XG4gICAgICAgICAgYWRkMihkZXBzTWFwLmdldChJVEVSQVRFX0tFWSkpO1xuICAgICAgICAgIGlmIChpc01hcCh0YXJnZXQpKSB7XG4gICAgICAgICAgICBhZGQyKGRlcHNNYXAuZ2V0KE1BUF9LRVlfSVRFUkFURV9LRVkpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwic2V0XCI6XG4gICAgICAgIGlmIChpc01hcCh0YXJnZXQpKSB7XG4gICAgICAgICAgYWRkMihkZXBzTWFwLmdldChJVEVSQVRFX0tFWSkpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBjb25zdCBydW4gPSAoZWZmZWN0MykgPT4ge1xuICAgIGlmIChlZmZlY3QzLm9wdGlvbnMub25UcmlnZ2VyKSB7XG4gICAgICBlZmZlY3QzLm9wdGlvbnMub25UcmlnZ2VyKHtcbiAgICAgICAgZWZmZWN0OiBlZmZlY3QzLFxuICAgICAgICB0YXJnZXQsXG4gICAgICAgIGtleSxcbiAgICAgICAgdHlwZSxcbiAgICAgICAgbmV3VmFsdWUsXG4gICAgICAgIG9sZFZhbHVlLFxuICAgICAgICBvbGRUYXJnZXRcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoZWZmZWN0My5vcHRpb25zLnNjaGVkdWxlcikge1xuICAgICAgZWZmZWN0My5vcHRpb25zLnNjaGVkdWxlcihlZmZlY3QzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWZmZWN0MygpO1xuICAgIH1cbiAgfTtcbiAgZWZmZWN0cy5mb3JFYWNoKHJ1bik7XG59XG52YXIgaXNOb25UcmFja2FibGVLZXlzID0gLyogQF9fUFVSRV9fICovIG1ha2VNYXAoYF9fcHJvdG9fXyxfX3ZfaXNSZWYsX19pc1Z1ZWApO1xudmFyIGJ1aWx0SW5TeW1ib2xzID0gbmV3IFNldChPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhTeW1ib2wpLm1hcCgoa2V5KSA9PiBTeW1ib2xba2V5XSkuZmlsdGVyKGlzU3ltYm9sKSk7XG52YXIgZ2V0MiA9IC8qIEBfX1BVUkVfXyAqLyBjcmVhdGVHZXR0ZXIoKTtcbnZhciByZWFkb25seUdldCA9IC8qIEBfX1BVUkVfXyAqLyBjcmVhdGVHZXR0ZXIodHJ1ZSk7XG52YXIgYXJyYXlJbnN0cnVtZW50YXRpb25zID0gLyogQF9fUFVSRV9fICovIGNyZWF0ZUFycmF5SW5zdHJ1bWVudGF0aW9ucygpO1xuZnVuY3Rpb24gY3JlYXRlQXJyYXlJbnN0cnVtZW50YXRpb25zKCkge1xuICBjb25zdCBpbnN0cnVtZW50YXRpb25zID0ge307XG4gIFtcImluY2x1ZGVzXCIsIFwiaW5kZXhPZlwiLCBcImxhc3RJbmRleE9mXCJdLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGluc3RydW1lbnRhdGlvbnNba2V5XSA9IGZ1bmN0aW9uKC4uLmFyZ3MpIHtcbiAgICAgIGNvbnN0IGFyciA9IHRvUmF3KHRoaXMpO1xuICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB0cmFjayhhcnIsIFwiZ2V0XCIsIGkgKyBcIlwiKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlcyA9IGFycltrZXldKC4uLmFyZ3MpO1xuICAgICAgaWYgKHJlcyA9PT0gLTEgfHwgcmVzID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gYXJyW2tleV0oLi4uYXJncy5tYXAodG9SYXcpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG4gIFtcInB1c2hcIiwgXCJwb3BcIiwgXCJzaGlmdFwiLCBcInVuc2hpZnRcIiwgXCJzcGxpY2VcIl0uZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgaW5zdHJ1bWVudGF0aW9uc1trZXldID0gZnVuY3Rpb24oLi4uYXJncykge1xuICAgICAgcGF1c2VUcmFja2luZygpO1xuICAgICAgY29uc3QgcmVzID0gdG9SYXcodGhpcylba2V5XS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgIHJlc2V0VHJhY2tpbmcoKTtcbiAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgfSk7XG4gIHJldHVybiBpbnN0cnVtZW50YXRpb25zO1xufVxuZnVuY3Rpb24gY3JlYXRlR2V0dGVyKGlzUmVhZG9ubHkgPSBmYWxzZSwgc2hhbGxvdyA9IGZhbHNlKSB7XG4gIHJldHVybiBmdW5jdGlvbiBnZXQzKHRhcmdldCwga2V5LCByZWNlaXZlcikge1xuICAgIGlmIChrZXkgPT09IFwiX192X2lzUmVhY3RpdmVcIikge1xuICAgICAgcmV0dXJuICFpc1JlYWRvbmx5O1xuICAgIH0gZWxzZSBpZiAoa2V5ID09PSBcIl9fdl9pc1JlYWRvbmx5XCIpIHtcbiAgICAgIHJldHVybiBpc1JlYWRvbmx5O1xuICAgIH0gZWxzZSBpZiAoa2V5ID09PSBcIl9fdl9yYXdcIiAmJiByZWNlaXZlciA9PT0gKGlzUmVhZG9ubHkgPyBzaGFsbG93ID8gc2hhbGxvd1JlYWRvbmx5TWFwIDogcmVhZG9ubHlNYXAgOiBzaGFsbG93ID8gc2hhbGxvd1JlYWN0aXZlTWFwIDogcmVhY3RpdmVNYXApLmdldCh0YXJnZXQpKSB7XG4gICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cbiAgICBjb25zdCB0YXJnZXRJc0FycmF5ID0gaXNBcnJheSh0YXJnZXQpO1xuICAgIGlmICghaXNSZWFkb25seSAmJiB0YXJnZXRJc0FycmF5ICYmIGhhc093bihhcnJheUluc3RydW1lbnRhdGlvbnMsIGtleSkpIHtcbiAgICAgIHJldHVybiBSZWZsZWN0LmdldChhcnJheUluc3RydW1lbnRhdGlvbnMsIGtleSwgcmVjZWl2ZXIpO1xuICAgIH1cbiAgICBjb25zdCByZXMgPSBSZWZsZWN0LmdldCh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpO1xuICAgIGlmIChpc1N5bWJvbChrZXkpID8gYnVpbHRJblN5bWJvbHMuaGFzKGtleSkgOiBpc05vblRyYWNrYWJsZUtleXMoa2V5KSkge1xuICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgaWYgKCFpc1JlYWRvbmx5KSB7XG4gICAgICB0cmFjayh0YXJnZXQsIFwiZ2V0XCIsIGtleSk7XG4gICAgfVxuICAgIGlmIChzaGFsbG93KSB7XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBpZiAoaXNSZWYocmVzKSkge1xuICAgICAgY29uc3Qgc2hvdWxkVW53cmFwID0gIXRhcmdldElzQXJyYXkgfHwgIWlzSW50ZWdlcktleShrZXkpO1xuICAgICAgcmV0dXJuIHNob3VsZFVud3JhcCA/IHJlcy52YWx1ZSA6IHJlcztcbiAgICB9XG4gICAgaWYgKGlzT2JqZWN0KHJlcykpIHtcbiAgICAgIHJldHVybiBpc1JlYWRvbmx5ID8gcmVhZG9ubHkocmVzKSA6IHJlYWN0aXZlMihyZXMpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9O1xufVxudmFyIHNldDIgPSAvKiBAX19QVVJFX18gKi8gY3JlYXRlU2V0dGVyKCk7XG5mdW5jdGlvbiBjcmVhdGVTZXR0ZXIoc2hhbGxvdyA9IGZhbHNlKSB7XG4gIHJldHVybiBmdW5jdGlvbiBzZXQzKHRhcmdldCwga2V5LCB2YWx1ZSwgcmVjZWl2ZXIpIHtcbiAgICBsZXQgb2xkVmFsdWUgPSB0YXJnZXRba2V5XTtcbiAgICBpZiAoIXNoYWxsb3cpIHtcbiAgICAgIHZhbHVlID0gdG9SYXcodmFsdWUpO1xuICAgICAgb2xkVmFsdWUgPSB0b1JhdyhvbGRWYWx1ZSk7XG4gICAgICBpZiAoIWlzQXJyYXkodGFyZ2V0KSAmJiBpc1JlZihvbGRWYWx1ZSkgJiYgIWlzUmVmKHZhbHVlKSkge1xuICAgICAgICBvbGRWYWx1ZS52YWx1ZSA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgaGFkS2V5ID0gaXNBcnJheSh0YXJnZXQpICYmIGlzSW50ZWdlcktleShrZXkpID8gTnVtYmVyKGtleSkgPCB0YXJnZXQubGVuZ3RoIDogaGFzT3duKHRhcmdldCwga2V5KTtcbiAgICBjb25zdCByZXN1bHQgPSBSZWZsZWN0LnNldCh0YXJnZXQsIGtleSwgdmFsdWUsIHJlY2VpdmVyKTtcbiAgICBpZiAodGFyZ2V0ID09PSB0b1JhdyhyZWNlaXZlcikpIHtcbiAgICAgIGlmICghaGFkS2V5KSB7XG4gICAgICAgIHRyaWdnZXIodGFyZ2V0LCBcImFkZFwiLCBrZXksIHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoaGFzQ2hhbmdlZCh2YWx1ZSwgb2xkVmFsdWUpKSB7XG4gICAgICAgIHRyaWdnZXIodGFyZ2V0LCBcInNldFwiLCBrZXksIHZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59XG5mdW5jdGlvbiBkZWxldGVQcm9wZXJ0eSh0YXJnZXQsIGtleSkge1xuICBjb25zdCBoYWRLZXkgPSBoYXNPd24odGFyZ2V0LCBrZXkpO1xuICBjb25zdCBvbGRWYWx1ZSA9IHRhcmdldFtrZXldO1xuICBjb25zdCByZXN1bHQgPSBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KHRhcmdldCwga2V5KTtcbiAgaWYgKHJlc3VsdCAmJiBoYWRLZXkpIHtcbiAgICB0cmlnZ2VyKHRhcmdldCwgXCJkZWxldGVcIiwga2V5LCB2b2lkIDAsIG9sZFZhbHVlKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gaGFzKHRhcmdldCwga2V5KSB7XG4gIGNvbnN0IHJlc3VsdCA9IFJlZmxlY3QuaGFzKHRhcmdldCwga2V5KTtcbiAgaWYgKCFpc1N5bWJvbChrZXkpIHx8ICFidWlsdEluU3ltYm9scy5oYXMoa2V5KSkge1xuICAgIHRyYWNrKHRhcmdldCwgXCJoYXNcIiwga2V5KTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gb3duS2V5cyh0YXJnZXQpIHtcbiAgdHJhY2sodGFyZ2V0LCBcIml0ZXJhdGVcIiwgaXNBcnJheSh0YXJnZXQpID8gXCJsZW5ndGhcIiA6IElURVJBVEVfS0VZKTtcbiAgcmV0dXJuIFJlZmxlY3Qub3duS2V5cyh0YXJnZXQpO1xufVxudmFyIG11dGFibGVIYW5kbGVycyA9IHtcbiAgZ2V0OiBnZXQyLFxuICBzZXQ6IHNldDIsXG4gIGRlbGV0ZVByb3BlcnR5LFxuICBoYXMsXG4gIG93bktleXNcbn07XG52YXIgcmVhZG9ubHlIYW5kbGVycyA9IHtcbiAgZ2V0OiByZWFkb25seUdldCxcbiAgc2V0KHRhcmdldCwga2V5KSB7XG4gICAgaWYgKHRydWUpIHtcbiAgICAgIGNvbnNvbGUud2FybihgU2V0IG9wZXJhdGlvbiBvbiBrZXkgXCIke1N0cmluZyhrZXkpfVwiIGZhaWxlZDogdGFyZ2V0IGlzIHJlYWRvbmx5LmAsIHRhcmdldCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9LFxuICBkZWxldGVQcm9wZXJ0eSh0YXJnZXQsIGtleSkge1xuICAgIGlmICh0cnVlKSB7XG4gICAgICBjb25zb2xlLndhcm4oYERlbGV0ZSBvcGVyYXRpb24gb24ga2V5IFwiJHtTdHJpbmcoa2V5KX1cIiBmYWlsZWQ6IHRhcmdldCBpcyByZWFkb25seS5gLCB0YXJnZXQpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufTtcbnZhciB0b1JlYWN0aXZlID0gKHZhbHVlKSA9PiBpc09iamVjdCh2YWx1ZSkgPyByZWFjdGl2ZTIodmFsdWUpIDogdmFsdWU7XG52YXIgdG9SZWFkb25seSA9ICh2YWx1ZSkgPT4gaXNPYmplY3QodmFsdWUpID8gcmVhZG9ubHkodmFsdWUpIDogdmFsdWU7XG52YXIgdG9TaGFsbG93ID0gKHZhbHVlKSA9PiB2YWx1ZTtcbnZhciBnZXRQcm90byA9ICh2KSA9PiBSZWZsZWN0LmdldFByb3RvdHlwZU9mKHYpO1xuZnVuY3Rpb24gZ2V0JDEodGFyZ2V0LCBrZXksIGlzUmVhZG9ubHkgPSBmYWxzZSwgaXNTaGFsbG93ID0gZmFsc2UpIHtcbiAgdGFyZ2V0ID0gdGFyZ2V0W1xuICAgIFwiX192X3Jhd1wiXG4gICAgLyogUkFXICovXG4gIF07XG4gIGNvbnN0IHJhd1RhcmdldCA9IHRvUmF3KHRhcmdldCk7XG4gIGNvbnN0IHJhd0tleSA9IHRvUmF3KGtleSk7XG4gIGlmIChrZXkgIT09IHJhd0tleSkge1xuICAgICFpc1JlYWRvbmx5ICYmIHRyYWNrKHJhd1RhcmdldCwgXCJnZXRcIiwga2V5KTtcbiAgfVxuICAhaXNSZWFkb25seSAmJiB0cmFjayhyYXdUYXJnZXQsIFwiZ2V0XCIsIHJhd0tleSk7XG4gIGNvbnN0IHsgaGFzOiBoYXMyIH0gPSBnZXRQcm90byhyYXdUYXJnZXQpO1xuICBjb25zdCB3cmFwID0gaXNTaGFsbG93ID8gdG9TaGFsbG93IDogaXNSZWFkb25seSA/IHRvUmVhZG9ubHkgOiB0b1JlYWN0aXZlO1xuICBpZiAoaGFzMi5jYWxsKHJhd1RhcmdldCwga2V5KSkge1xuICAgIHJldHVybiB3cmFwKHRhcmdldC5nZXQoa2V5KSk7XG4gIH0gZWxzZSBpZiAoaGFzMi5jYWxsKHJhd1RhcmdldCwgcmF3S2V5KSkge1xuICAgIHJldHVybiB3cmFwKHRhcmdldC5nZXQocmF3S2V5KSk7XG4gIH0gZWxzZSBpZiAodGFyZ2V0ICE9PSByYXdUYXJnZXQpIHtcbiAgICB0YXJnZXQuZ2V0KGtleSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGhhcyQxKGtleSwgaXNSZWFkb25seSA9IGZhbHNlKSB7XG4gIGNvbnN0IHRhcmdldCA9IHRoaXNbXG4gICAgXCJfX3ZfcmF3XCJcbiAgICAvKiBSQVcgKi9cbiAgXTtcbiAgY29uc3QgcmF3VGFyZ2V0ID0gdG9SYXcodGFyZ2V0KTtcbiAgY29uc3QgcmF3S2V5ID0gdG9SYXcoa2V5KTtcbiAgaWYgKGtleSAhPT0gcmF3S2V5KSB7XG4gICAgIWlzUmVhZG9ubHkgJiYgdHJhY2socmF3VGFyZ2V0LCBcImhhc1wiLCBrZXkpO1xuICB9XG4gICFpc1JlYWRvbmx5ICYmIHRyYWNrKHJhd1RhcmdldCwgXCJoYXNcIiwgcmF3S2V5KTtcbiAgcmV0dXJuIGtleSA9PT0gcmF3S2V5ID8gdGFyZ2V0LmhhcyhrZXkpIDogdGFyZ2V0LmhhcyhrZXkpIHx8IHRhcmdldC5oYXMocmF3S2V5KTtcbn1cbmZ1bmN0aW9uIHNpemUodGFyZ2V0LCBpc1JlYWRvbmx5ID0gZmFsc2UpIHtcbiAgdGFyZ2V0ID0gdGFyZ2V0W1xuICAgIFwiX192X3Jhd1wiXG4gICAgLyogUkFXICovXG4gIF07XG4gICFpc1JlYWRvbmx5ICYmIHRyYWNrKHRvUmF3KHRhcmdldCksIFwiaXRlcmF0ZVwiLCBJVEVSQVRFX0tFWSk7XG4gIHJldHVybiBSZWZsZWN0LmdldCh0YXJnZXQsIFwic2l6ZVwiLCB0YXJnZXQpO1xufVxuZnVuY3Rpb24gYWRkKHZhbHVlKSB7XG4gIHZhbHVlID0gdG9SYXcodmFsdWUpO1xuICBjb25zdCB0YXJnZXQgPSB0b1Jhdyh0aGlzKTtcbiAgY29uc3QgcHJvdG8gPSBnZXRQcm90byh0YXJnZXQpO1xuICBjb25zdCBoYWRLZXkgPSBwcm90by5oYXMuY2FsbCh0YXJnZXQsIHZhbHVlKTtcbiAgaWYgKCFoYWRLZXkpIHtcbiAgICB0YXJnZXQuYWRkKHZhbHVlKTtcbiAgICB0cmlnZ2VyKHRhcmdldCwgXCJhZGRcIiwgdmFsdWUsIHZhbHVlKTtcbiAgfVxuICByZXR1cm4gdGhpcztcbn1cbmZ1bmN0aW9uIHNldCQxKGtleSwgdmFsdWUpIHtcbiAgdmFsdWUgPSB0b1Jhdyh2YWx1ZSk7XG4gIGNvbnN0IHRhcmdldCA9IHRvUmF3KHRoaXMpO1xuICBjb25zdCB7IGhhczogaGFzMiwgZ2V0OiBnZXQzIH0gPSBnZXRQcm90byh0YXJnZXQpO1xuICBsZXQgaGFkS2V5ID0gaGFzMi5jYWxsKHRhcmdldCwga2V5KTtcbiAgaWYgKCFoYWRLZXkpIHtcbiAgICBrZXkgPSB0b1JhdyhrZXkpO1xuICAgIGhhZEtleSA9IGhhczIuY2FsbCh0YXJnZXQsIGtleSk7XG4gIH0gZWxzZSBpZiAodHJ1ZSkge1xuICAgIGNoZWNrSWRlbnRpdHlLZXlzKHRhcmdldCwgaGFzMiwga2V5KTtcbiAgfVxuICBjb25zdCBvbGRWYWx1ZSA9IGdldDMuY2FsbCh0YXJnZXQsIGtleSk7XG4gIHRhcmdldC5zZXQoa2V5LCB2YWx1ZSk7XG4gIGlmICghaGFkS2V5KSB7XG4gICAgdHJpZ2dlcih0YXJnZXQsIFwiYWRkXCIsIGtleSwgdmFsdWUpO1xuICB9IGVsc2UgaWYgKGhhc0NoYW5nZWQodmFsdWUsIG9sZFZhbHVlKSkge1xuICAgIHRyaWdnZXIodGFyZ2V0LCBcInNldFwiLCBrZXksIHZhbHVlLCBvbGRWYWx1ZSk7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59XG5mdW5jdGlvbiBkZWxldGVFbnRyeShrZXkpIHtcbiAgY29uc3QgdGFyZ2V0ID0gdG9SYXcodGhpcyk7XG4gIGNvbnN0IHsgaGFzOiBoYXMyLCBnZXQ6IGdldDMgfSA9IGdldFByb3RvKHRhcmdldCk7XG4gIGxldCBoYWRLZXkgPSBoYXMyLmNhbGwodGFyZ2V0LCBrZXkpO1xuICBpZiAoIWhhZEtleSkge1xuICAgIGtleSA9IHRvUmF3KGtleSk7XG4gICAgaGFkS2V5ID0gaGFzMi5jYWxsKHRhcmdldCwga2V5KTtcbiAgfSBlbHNlIGlmICh0cnVlKSB7XG4gICAgY2hlY2tJZGVudGl0eUtleXModGFyZ2V0LCBoYXMyLCBrZXkpO1xuICB9XG4gIGNvbnN0IG9sZFZhbHVlID0gZ2V0MyA/IGdldDMuY2FsbCh0YXJnZXQsIGtleSkgOiB2b2lkIDA7XG4gIGNvbnN0IHJlc3VsdCA9IHRhcmdldC5kZWxldGUoa2V5KTtcbiAgaWYgKGhhZEtleSkge1xuICAgIHRyaWdnZXIodGFyZ2V0LCBcImRlbGV0ZVwiLCBrZXksIHZvaWQgMCwgb2xkVmFsdWUpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBjbGVhcigpIHtcbiAgY29uc3QgdGFyZ2V0ID0gdG9SYXcodGhpcyk7XG4gIGNvbnN0IGhhZEl0ZW1zID0gdGFyZ2V0LnNpemUgIT09IDA7XG4gIGNvbnN0IG9sZFRhcmdldCA9IHRydWUgPyBpc01hcCh0YXJnZXQpID8gbmV3IE1hcCh0YXJnZXQpIDogbmV3IFNldCh0YXJnZXQpIDogdm9pZCAwO1xuICBjb25zdCByZXN1bHQgPSB0YXJnZXQuY2xlYXIoKTtcbiAgaWYgKGhhZEl0ZW1zKSB7XG4gICAgdHJpZ2dlcih0YXJnZXQsIFwiY2xlYXJcIiwgdm9pZCAwLCB2b2lkIDAsIG9sZFRhcmdldCk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUZvckVhY2goaXNSZWFkb25seSwgaXNTaGFsbG93KSB7XG4gIHJldHVybiBmdW5jdGlvbiBmb3JFYWNoKGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgY29uc3Qgb2JzZXJ2ZWQgPSB0aGlzO1xuICAgIGNvbnN0IHRhcmdldCA9IG9ic2VydmVkW1xuICAgICAgXCJfX3ZfcmF3XCJcbiAgICAgIC8qIFJBVyAqL1xuICAgIF07XG4gICAgY29uc3QgcmF3VGFyZ2V0ID0gdG9SYXcodGFyZ2V0KTtcbiAgICBjb25zdCB3cmFwID0gaXNTaGFsbG93ID8gdG9TaGFsbG93IDogaXNSZWFkb25seSA/IHRvUmVhZG9ubHkgOiB0b1JlYWN0aXZlO1xuICAgICFpc1JlYWRvbmx5ICYmIHRyYWNrKHJhd1RhcmdldCwgXCJpdGVyYXRlXCIsIElURVJBVEVfS0VZKTtcbiAgICByZXR1cm4gdGFyZ2V0LmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgIHJldHVybiBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIHdyYXAodmFsdWUpLCB3cmFwKGtleSksIG9ic2VydmVkKTtcbiAgICB9KTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUl0ZXJhYmxlTWV0aG9kKG1ldGhvZCwgaXNSZWFkb25seSwgaXNTaGFsbG93KSB7XG4gIHJldHVybiBmdW5jdGlvbiguLi5hcmdzKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gdGhpc1tcbiAgICAgIFwiX192X3Jhd1wiXG4gICAgICAvKiBSQVcgKi9cbiAgICBdO1xuICAgIGNvbnN0IHJhd1RhcmdldCA9IHRvUmF3KHRhcmdldCk7XG4gICAgY29uc3QgdGFyZ2V0SXNNYXAgPSBpc01hcChyYXdUYXJnZXQpO1xuICAgIGNvbnN0IGlzUGFpciA9IG1ldGhvZCA9PT0gXCJlbnRyaWVzXCIgfHwgbWV0aG9kID09PSBTeW1ib2wuaXRlcmF0b3IgJiYgdGFyZ2V0SXNNYXA7XG4gICAgY29uc3QgaXNLZXlPbmx5ID0gbWV0aG9kID09PSBcImtleXNcIiAmJiB0YXJnZXRJc01hcDtcbiAgICBjb25zdCBpbm5lckl0ZXJhdG9yID0gdGFyZ2V0W21ldGhvZF0oLi4uYXJncyk7XG4gICAgY29uc3Qgd3JhcCA9IGlzU2hhbGxvdyA/IHRvU2hhbGxvdyA6IGlzUmVhZG9ubHkgPyB0b1JlYWRvbmx5IDogdG9SZWFjdGl2ZTtcbiAgICAhaXNSZWFkb25seSAmJiB0cmFjayhyYXdUYXJnZXQsIFwiaXRlcmF0ZVwiLCBpc0tleU9ubHkgPyBNQVBfS0VZX0lURVJBVEVfS0VZIDogSVRFUkFURV9LRVkpO1xuICAgIHJldHVybiB7XG4gICAgICAvLyBpdGVyYXRvciBwcm90b2NvbFxuICAgICAgbmV4dCgpIHtcbiAgICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gaW5uZXJJdGVyYXRvci5uZXh0KCk7XG4gICAgICAgIHJldHVybiBkb25lID8geyB2YWx1ZSwgZG9uZSB9IDoge1xuICAgICAgICAgIHZhbHVlOiBpc1BhaXIgPyBbd3JhcCh2YWx1ZVswXSksIHdyYXAodmFsdWVbMV0pXSA6IHdyYXAodmFsdWUpLFxuICAgICAgICAgIGRvbmVcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICAvLyBpdGVyYWJsZSBwcm90b2NvbFxuICAgICAgW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgIH07XG4gIH07XG59XG5mdW5jdGlvbiBjcmVhdGVSZWFkb25seU1ldGhvZCh0eXBlKSB7XG4gIHJldHVybiBmdW5jdGlvbiguLi5hcmdzKSB7XG4gICAgaWYgKHRydWUpIHtcbiAgICAgIGNvbnN0IGtleSA9IGFyZ3NbMF0gPyBgb24ga2V5IFwiJHthcmdzWzBdfVwiIGAgOiBgYDtcbiAgICAgIGNvbnNvbGUud2FybihgJHtjYXBpdGFsaXplKHR5cGUpfSBvcGVyYXRpb24gJHtrZXl9ZmFpbGVkOiB0YXJnZXQgaXMgcmVhZG9ubHkuYCwgdG9SYXcodGhpcykpO1xuICAgIH1cbiAgICByZXR1cm4gdHlwZSA9PT0gXCJkZWxldGVcIiA/IGZhbHNlIDogdGhpcztcbiAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUluc3RydW1lbnRhdGlvbnMoKSB7XG4gIGNvbnN0IG11dGFibGVJbnN0cnVtZW50YXRpb25zMiA9IHtcbiAgICBnZXQoa2V5KSB7XG4gICAgICByZXR1cm4gZ2V0JDEodGhpcywga2V5KTtcbiAgICB9LFxuICAgIGdldCBzaXplKCkge1xuICAgICAgcmV0dXJuIHNpemUodGhpcyk7XG4gICAgfSxcbiAgICBoYXM6IGhhcyQxLFxuICAgIGFkZCxcbiAgICBzZXQ6IHNldCQxLFxuICAgIGRlbGV0ZTogZGVsZXRlRW50cnksXG4gICAgY2xlYXIsXG4gICAgZm9yRWFjaDogY3JlYXRlRm9yRWFjaChmYWxzZSwgZmFsc2UpXG4gIH07XG4gIGNvbnN0IHNoYWxsb3dJbnN0cnVtZW50YXRpb25zMiA9IHtcbiAgICBnZXQoa2V5KSB7XG4gICAgICByZXR1cm4gZ2V0JDEodGhpcywga2V5LCBmYWxzZSwgdHJ1ZSk7XG4gICAgfSxcbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgIHJldHVybiBzaXplKHRoaXMpO1xuICAgIH0sXG4gICAgaGFzOiBoYXMkMSxcbiAgICBhZGQsXG4gICAgc2V0OiBzZXQkMSxcbiAgICBkZWxldGU6IGRlbGV0ZUVudHJ5LFxuICAgIGNsZWFyLFxuICAgIGZvckVhY2g6IGNyZWF0ZUZvckVhY2goZmFsc2UsIHRydWUpXG4gIH07XG4gIGNvbnN0IHJlYWRvbmx5SW5zdHJ1bWVudGF0aW9uczIgPSB7XG4gICAgZ2V0KGtleSkge1xuICAgICAgcmV0dXJuIGdldCQxKHRoaXMsIGtleSwgdHJ1ZSk7XG4gICAgfSxcbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgIHJldHVybiBzaXplKHRoaXMsIHRydWUpO1xuICAgIH0sXG4gICAgaGFzKGtleSkge1xuICAgICAgcmV0dXJuIGhhcyQxLmNhbGwodGhpcywga2V5LCB0cnVlKTtcbiAgICB9LFxuICAgIGFkZDogY3JlYXRlUmVhZG9ubHlNZXRob2QoXG4gICAgICBcImFkZFwiXG4gICAgICAvKiBBREQgKi9cbiAgICApLFxuICAgIHNldDogY3JlYXRlUmVhZG9ubHlNZXRob2QoXG4gICAgICBcInNldFwiXG4gICAgICAvKiBTRVQgKi9cbiAgICApLFxuICAgIGRlbGV0ZTogY3JlYXRlUmVhZG9ubHlNZXRob2QoXG4gICAgICBcImRlbGV0ZVwiXG4gICAgICAvKiBERUxFVEUgKi9cbiAgICApLFxuICAgIGNsZWFyOiBjcmVhdGVSZWFkb25seU1ldGhvZChcbiAgICAgIFwiY2xlYXJcIlxuICAgICAgLyogQ0xFQVIgKi9cbiAgICApLFxuICAgIGZvckVhY2g6IGNyZWF0ZUZvckVhY2godHJ1ZSwgZmFsc2UpXG4gIH07XG4gIGNvbnN0IHNoYWxsb3dSZWFkb25seUluc3RydW1lbnRhdGlvbnMyID0ge1xuICAgIGdldChrZXkpIHtcbiAgICAgIHJldHVybiBnZXQkMSh0aGlzLCBrZXksIHRydWUsIHRydWUpO1xuICAgIH0sXG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICByZXR1cm4gc2l6ZSh0aGlzLCB0cnVlKTtcbiAgICB9LFxuICAgIGhhcyhrZXkpIHtcbiAgICAgIHJldHVybiBoYXMkMS5jYWxsKHRoaXMsIGtleSwgdHJ1ZSk7XG4gICAgfSxcbiAgICBhZGQ6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFxuICAgICAgXCJhZGRcIlxuICAgICAgLyogQUREICovXG4gICAgKSxcbiAgICBzZXQ6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFxuICAgICAgXCJzZXRcIlxuICAgICAgLyogU0VUICovXG4gICAgKSxcbiAgICBkZWxldGU6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFxuICAgICAgXCJkZWxldGVcIlxuICAgICAgLyogREVMRVRFICovXG4gICAgKSxcbiAgICBjbGVhcjogY3JlYXRlUmVhZG9ubHlNZXRob2QoXG4gICAgICBcImNsZWFyXCJcbiAgICAgIC8qIENMRUFSICovXG4gICAgKSxcbiAgICBmb3JFYWNoOiBjcmVhdGVGb3JFYWNoKHRydWUsIHRydWUpXG4gIH07XG4gIGNvbnN0IGl0ZXJhdG9yTWV0aG9kcyA9IFtcImtleXNcIiwgXCJ2YWx1ZXNcIiwgXCJlbnRyaWVzXCIsIFN5bWJvbC5pdGVyYXRvcl07XG4gIGl0ZXJhdG9yTWV0aG9kcy5mb3JFYWNoKChtZXRob2QpID0+IHtcbiAgICBtdXRhYmxlSW5zdHJ1bWVudGF0aW9uczJbbWV0aG9kXSA9IGNyZWF0ZUl0ZXJhYmxlTWV0aG9kKG1ldGhvZCwgZmFsc2UsIGZhbHNlKTtcbiAgICByZWFkb25seUluc3RydW1lbnRhdGlvbnMyW21ldGhvZF0gPSBjcmVhdGVJdGVyYWJsZU1ldGhvZChtZXRob2QsIHRydWUsIGZhbHNlKTtcbiAgICBzaGFsbG93SW5zdHJ1bWVudGF0aW9uczJbbWV0aG9kXSA9IGNyZWF0ZUl0ZXJhYmxlTWV0aG9kKG1ldGhvZCwgZmFsc2UsIHRydWUpO1xuICAgIHNoYWxsb3dSZWFkb25seUluc3RydW1lbnRhdGlvbnMyW21ldGhvZF0gPSBjcmVhdGVJdGVyYWJsZU1ldGhvZChtZXRob2QsIHRydWUsIHRydWUpO1xuICB9KTtcbiAgcmV0dXJuIFtcbiAgICBtdXRhYmxlSW5zdHJ1bWVudGF0aW9uczIsXG4gICAgcmVhZG9ubHlJbnN0cnVtZW50YXRpb25zMixcbiAgICBzaGFsbG93SW5zdHJ1bWVudGF0aW9uczIsXG4gICAgc2hhbGxvd1JlYWRvbmx5SW5zdHJ1bWVudGF0aW9uczJcbiAgXTtcbn1cbnZhciBbbXV0YWJsZUluc3RydW1lbnRhdGlvbnMsIHJlYWRvbmx5SW5zdHJ1bWVudGF0aW9ucywgc2hhbGxvd0luc3RydW1lbnRhdGlvbnMsIHNoYWxsb3dSZWFkb25seUluc3RydW1lbnRhdGlvbnNdID0gLyogQF9fUFVSRV9fICovIGNyZWF0ZUluc3RydW1lbnRhdGlvbnMoKTtcbmZ1bmN0aW9uIGNyZWF0ZUluc3RydW1lbnRhdGlvbkdldHRlcihpc1JlYWRvbmx5LCBzaGFsbG93KSB7XG4gIGNvbnN0IGluc3RydW1lbnRhdGlvbnMgPSBzaGFsbG93ID8gaXNSZWFkb25seSA/IHNoYWxsb3dSZWFkb25seUluc3RydW1lbnRhdGlvbnMgOiBzaGFsbG93SW5zdHJ1bWVudGF0aW9ucyA6IGlzUmVhZG9ubHkgPyByZWFkb25seUluc3RydW1lbnRhdGlvbnMgOiBtdXRhYmxlSW5zdHJ1bWVudGF0aW9ucztcbiAgcmV0dXJuICh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpID0+IHtcbiAgICBpZiAoa2V5ID09PSBcIl9fdl9pc1JlYWN0aXZlXCIpIHtcbiAgICAgIHJldHVybiAhaXNSZWFkb25seTtcbiAgICB9IGVsc2UgaWYgKGtleSA9PT0gXCJfX3ZfaXNSZWFkb25seVwiKSB7XG4gICAgICByZXR1cm4gaXNSZWFkb25seTtcbiAgICB9IGVsc2UgaWYgKGtleSA9PT0gXCJfX3ZfcmF3XCIpIHtcbiAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuICAgIHJldHVybiBSZWZsZWN0LmdldChoYXNPd24oaW5zdHJ1bWVudGF0aW9ucywga2V5KSAmJiBrZXkgaW4gdGFyZ2V0ID8gaW5zdHJ1bWVudGF0aW9ucyA6IHRhcmdldCwga2V5LCByZWNlaXZlcik7XG4gIH07XG59XG52YXIgbXV0YWJsZUNvbGxlY3Rpb25IYW5kbGVycyA9IHtcbiAgZ2V0OiAvKiBAX19QVVJFX18gKi8gY3JlYXRlSW5zdHJ1bWVudGF0aW9uR2V0dGVyKGZhbHNlLCBmYWxzZSlcbn07XG52YXIgcmVhZG9ubHlDb2xsZWN0aW9uSGFuZGxlcnMgPSB7XG4gIGdldDogLyogQF9fUFVSRV9fICovIGNyZWF0ZUluc3RydW1lbnRhdGlvbkdldHRlcih0cnVlLCBmYWxzZSlcbn07XG5mdW5jdGlvbiBjaGVja0lkZW50aXR5S2V5cyh0YXJnZXQsIGhhczIsIGtleSkge1xuICBjb25zdCByYXdLZXkgPSB0b1JhdyhrZXkpO1xuICBpZiAocmF3S2V5ICE9PSBrZXkgJiYgaGFzMi5jYWxsKHRhcmdldCwgcmF3S2V5KSkge1xuICAgIGNvbnN0IHR5cGUgPSB0b1Jhd1R5cGUodGFyZ2V0KTtcbiAgICBjb25zb2xlLndhcm4oYFJlYWN0aXZlICR7dHlwZX0gY29udGFpbnMgYm90aCB0aGUgcmF3IGFuZCByZWFjdGl2ZSB2ZXJzaW9ucyBvZiB0aGUgc2FtZSBvYmplY3Qke3R5cGUgPT09IGBNYXBgID8gYCBhcyBrZXlzYCA6IGBgfSwgd2hpY2ggY2FuIGxlYWQgdG8gaW5jb25zaXN0ZW5jaWVzLiBBdm9pZCBkaWZmZXJlbnRpYXRpbmcgYmV0d2VlbiB0aGUgcmF3IGFuZCByZWFjdGl2ZSB2ZXJzaW9ucyBvZiBhbiBvYmplY3QgYW5kIG9ubHkgdXNlIHRoZSByZWFjdGl2ZSB2ZXJzaW9uIGlmIHBvc3NpYmxlLmApO1xuICB9XG59XG52YXIgcmVhY3RpdmVNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbnZhciBzaGFsbG93UmVhY3RpdmVNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbnZhciByZWFkb25seU1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xudmFyIHNoYWxsb3dSZWFkb25seU1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gdGFyZ2V0VHlwZU1hcChyYXdUeXBlKSB7XG4gIHN3aXRjaCAocmF3VHlwZSkge1xuICAgIGNhc2UgXCJPYmplY3RcIjpcbiAgICBjYXNlIFwiQXJyYXlcIjpcbiAgICAgIHJldHVybiAxO1xuICAgIGNhc2UgXCJNYXBcIjpcbiAgICBjYXNlIFwiU2V0XCI6XG4gICAgY2FzZSBcIldlYWtNYXBcIjpcbiAgICBjYXNlIFwiV2Vha1NldFwiOlxuICAgICAgcmV0dXJuIDI7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiAwO1xuICB9XG59XG5mdW5jdGlvbiBnZXRUYXJnZXRUeXBlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZVtcbiAgICBcIl9fdl9za2lwXCJcbiAgICAvKiBTS0lQICovXG4gIF0gfHwgIU9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpID8gMCA6IHRhcmdldFR5cGVNYXAodG9SYXdUeXBlKHZhbHVlKSk7XG59XG5mdW5jdGlvbiByZWFjdGl2ZTIodGFyZ2V0KSB7XG4gIGlmICh0YXJnZXQgJiYgdGFyZ2V0W1xuICAgIFwiX192X2lzUmVhZG9ubHlcIlxuICAgIC8qIElTX1JFQURPTkxZICovXG4gIF0pIHtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIHJldHVybiBjcmVhdGVSZWFjdGl2ZU9iamVjdCh0YXJnZXQsIGZhbHNlLCBtdXRhYmxlSGFuZGxlcnMsIG11dGFibGVDb2xsZWN0aW9uSGFuZGxlcnMsIHJlYWN0aXZlTWFwKTtcbn1cbmZ1bmN0aW9uIHJlYWRvbmx5KHRhcmdldCkge1xuICByZXR1cm4gY3JlYXRlUmVhY3RpdmVPYmplY3QodGFyZ2V0LCB0cnVlLCByZWFkb25seUhhbmRsZXJzLCByZWFkb25seUNvbGxlY3Rpb25IYW5kbGVycywgcmVhZG9ubHlNYXApO1xufVxuZnVuY3Rpb24gY3JlYXRlUmVhY3RpdmVPYmplY3QodGFyZ2V0LCBpc1JlYWRvbmx5LCBiYXNlSGFuZGxlcnMsIGNvbGxlY3Rpb25IYW5kbGVycywgcHJveHlNYXApIHtcbiAgaWYgKCFpc09iamVjdCh0YXJnZXQpKSB7XG4gICAgaWYgKHRydWUpIHtcbiAgICAgIGNvbnNvbGUud2FybihgdmFsdWUgY2Fubm90IGJlIG1hZGUgcmVhY3RpdmU6ICR7U3RyaW5nKHRhcmdldCl9YCk7XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgaWYgKHRhcmdldFtcbiAgICBcIl9fdl9yYXdcIlxuICAgIC8qIFJBVyAqL1xuICBdICYmICEoaXNSZWFkb25seSAmJiB0YXJnZXRbXG4gICAgXCJfX3ZfaXNSZWFjdGl2ZVwiXG4gICAgLyogSVNfUkVBQ1RJVkUgKi9cbiAgXSkpIHtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIGNvbnN0IGV4aXN0aW5nUHJveHkgPSBwcm94eU1hcC5nZXQodGFyZ2V0KTtcbiAgaWYgKGV4aXN0aW5nUHJveHkpIHtcbiAgICByZXR1cm4gZXhpc3RpbmdQcm94eTtcbiAgfVxuICBjb25zdCB0YXJnZXRUeXBlID0gZ2V0VGFyZ2V0VHlwZSh0YXJnZXQpO1xuICBpZiAodGFyZ2V0VHlwZSA9PT0gMCkge1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgY29uc3QgcHJveHkgPSBuZXcgUHJveHkodGFyZ2V0LCB0YXJnZXRUeXBlID09PSAyID8gY29sbGVjdGlvbkhhbmRsZXJzIDogYmFzZUhhbmRsZXJzKTtcbiAgcHJveHlNYXAuc2V0KHRhcmdldCwgcHJveHkpO1xuICByZXR1cm4gcHJveHk7XG59XG5mdW5jdGlvbiB0b1JhdyhvYnNlcnZlZCkge1xuICByZXR1cm4gb2JzZXJ2ZWQgJiYgdG9SYXcob2JzZXJ2ZWRbXG4gICAgXCJfX3ZfcmF3XCJcbiAgICAvKiBSQVcgKi9cbiAgXSkgfHwgb2JzZXJ2ZWQ7XG59XG5mdW5jdGlvbiBpc1JlZihyKSB7XG4gIHJldHVybiBCb29sZWFuKHIgJiYgci5fX3ZfaXNSZWYgPT09IHRydWUpO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvbWFnaWNzLyRuZXh0VGljay5qc1xubWFnaWMoXCJuZXh0VGlja1wiLCAoKSA9PiBuZXh0VGljayk7XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9tYWdpY3MvJGRpc3BhdGNoLmpzXG5tYWdpYyhcImRpc3BhdGNoXCIsIChlbCkgPT4gZGlzcGF0Y2guYmluZChkaXNwYXRjaCwgZWwpKTtcblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL21hZ2ljcy8kd2F0Y2guanNcbm1hZ2ljKFwid2F0Y2hcIiwgKGVsLCB7IGV2YWx1YXRlTGF0ZXI6IGV2YWx1YXRlTGF0ZXIyLCBjbGVhbnVwOiBjbGVhbnVwMiB9KSA9PiAoa2V5LCBjYWxsYmFjaykgPT4ge1xuICBsZXQgZXZhbHVhdGUyID0gZXZhbHVhdGVMYXRlcjIoa2V5KTtcbiAgbGV0IGdldHRlciA9ICgpID0+IHtcbiAgICBsZXQgdmFsdWU7XG4gICAgZXZhbHVhdGUyKChpKSA9PiB2YWx1ZSA9IGkpO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcbiAgbGV0IHVud2F0Y2ggPSB3YXRjaChnZXR0ZXIsIGNhbGxiYWNrKTtcbiAgY2xlYW51cDIodW53YXRjaCk7XG59KTtcblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL21hZ2ljcy8kc3RvcmUuanNcbm1hZ2ljKFwic3RvcmVcIiwgZ2V0U3RvcmVzKTtcblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL21hZ2ljcy8kZGF0YS5qc1xubWFnaWMoXCJkYXRhXCIsIChlbCkgPT4gc2NvcGUoZWwpKTtcblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL21hZ2ljcy8kcm9vdC5qc1xubWFnaWMoXCJyb290XCIsIChlbCkgPT4gY2xvc2VzdFJvb3QoZWwpKTtcblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL21hZ2ljcy8kcmVmcy5qc1xubWFnaWMoXCJyZWZzXCIsIChlbCkgPT4ge1xuICBpZiAoZWwuX3hfcmVmc19wcm94eSlcbiAgICByZXR1cm4gZWwuX3hfcmVmc19wcm94eTtcbiAgZWwuX3hfcmVmc19wcm94eSA9IG1lcmdlUHJveGllcyhnZXRBcnJheU9mUmVmT2JqZWN0KGVsKSk7XG4gIHJldHVybiBlbC5feF9yZWZzX3Byb3h5O1xufSk7XG5mdW5jdGlvbiBnZXRBcnJheU9mUmVmT2JqZWN0KGVsKSB7XG4gIGxldCByZWZPYmplY3RzID0gW107XG4gIGZpbmRDbG9zZXN0KGVsLCAoaSkgPT4ge1xuICAgIGlmIChpLl94X3JlZnMpXG4gICAgICByZWZPYmplY3RzLnB1c2goaS5feF9yZWZzKTtcbiAgfSk7XG4gIHJldHVybiByZWZPYmplY3RzO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvaWRzLmpzXG52YXIgZ2xvYmFsSWRNZW1vID0ge307XG5mdW5jdGlvbiBmaW5kQW5kSW5jcmVtZW50SWQobmFtZSkge1xuICBpZiAoIWdsb2JhbElkTWVtb1tuYW1lXSlcbiAgICBnbG9iYWxJZE1lbW9bbmFtZV0gPSAwO1xuICByZXR1cm4gKytnbG9iYWxJZE1lbW9bbmFtZV07XG59XG5mdW5jdGlvbiBjbG9zZXN0SWRSb290KGVsLCBuYW1lKSB7XG4gIHJldHVybiBmaW5kQ2xvc2VzdChlbCwgKGVsZW1lbnQpID0+IHtcbiAgICBpZiAoZWxlbWVudC5feF9pZHMgJiYgZWxlbWVudC5feF9pZHNbbmFtZV0pXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgfSk7XG59XG5mdW5jdGlvbiBzZXRJZFJvb3QoZWwsIG5hbWUpIHtcbiAgaWYgKCFlbC5feF9pZHMpXG4gICAgZWwuX3hfaWRzID0ge307XG4gIGlmICghZWwuX3hfaWRzW25hbWVdKVxuICAgIGVsLl94X2lkc1tuYW1lXSA9IGZpbmRBbmRJbmNyZW1lbnRJZChuYW1lKTtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL21hZ2ljcy8kaWQuanNcbm1hZ2ljKFwiaWRcIiwgKGVsLCB7IGNsZWFudXA6IGNsZWFudXAyIH0pID0+IChuYW1lLCBrZXkgPSBudWxsKSA9PiB7XG4gIGxldCBjYWNoZUtleSA9IGAke25hbWV9JHtrZXkgPyBgLSR7a2V5fWAgOiBcIlwifWA7XG4gIHJldHVybiBjYWNoZUlkQnlOYW1lT25FbGVtZW50KGVsLCBjYWNoZUtleSwgY2xlYW51cDIsICgpID0+IHtcbiAgICBsZXQgcm9vdCA9IGNsb3Nlc3RJZFJvb3QoZWwsIG5hbWUpO1xuICAgIGxldCBpZCA9IHJvb3QgPyByb290Ll94X2lkc1tuYW1lXSA6IGZpbmRBbmRJbmNyZW1lbnRJZChuYW1lKTtcbiAgICByZXR1cm4ga2V5ID8gYCR7bmFtZX0tJHtpZH0tJHtrZXl9YCA6IGAke25hbWV9LSR7aWR9YDtcbiAgfSk7XG59KTtcbmludGVyY2VwdENsb25lKChmcm9tLCB0bykgPT4ge1xuICBpZiAoZnJvbS5feF9pZCkge1xuICAgIHRvLl94X2lkID0gZnJvbS5feF9pZDtcbiAgfVxufSk7XG5mdW5jdGlvbiBjYWNoZUlkQnlOYW1lT25FbGVtZW50KGVsLCBjYWNoZUtleSwgY2xlYW51cDIsIGNhbGxiYWNrKSB7XG4gIGlmICghZWwuX3hfaWQpXG4gICAgZWwuX3hfaWQgPSB7fTtcbiAgaWYgKGVsLl94X2lkW2NhY2hlS2V5XSlcbiAgICByZXR1cm4gZWwuX3hfaWRbY2FjaGVLZXldO1xuICBsZXQgb3V0cHV0ID0gY2FsbGJhY2soKTtcbiAgZWwuX3hfaWRbY2FjaGVLZXldID0gb3V0cHV0O1xuICBjbGVhbnVwMigoKSA9PiB7XG4gICAgZGVsZXRlIGVsLl94X2lkW2NhY2hlS2V5XTtcbiAgfSk7XG4gIHJldHVybiBvdXRwdXQ7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9tYWdpY3MvJGVsLmpzXG5tYWdpYyhcImVsXCIsIChlbCkgPT4gZWwpO1xuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvbWFnaWNzL2luZGV4LmpzXG53YXJuTWlzc2luZ1BsdWdpbk1hZ2ljKFwiRm9jdXNcIiwgXCJmb2N1c1wiLCBcImZvY3VzXCIpO1xud2Fybk1pc3NpbmdQbHVnaW5NYWdpYyhcIlBlcnNpc3RcIiwgXCJwZXJzaXN0XCIsIFwicGVyc2lzdFwiKTtcbmZ1bmN0aW9uIHdhcm5NaXNzaW5nUGx1Z2luTWFnaWMobmFtZSwgbWFnaWNOYW1lLCBzbHVnKSB7XG4gIG1hZ2ljKG1hZ2ljTmFtZSwgKGVsKSA9PiB3YXJuKGBZb3UgY2FuJ3QgdXNlIFskJHttYWdpY05hbWV9XSB3aXRob3V0IGZpcnN0IGluc3RhbGxpbmcgdGhlIFwiJHtuYW1lfVwiIHBsdWdpbiBoZXJlOiBodHRwczovL2FscGluZWpzLmRldi9wbHVnaW5zLyR7c2x1Z31gLCBlbCkpO1xufVxuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvZGlyZWN0aXZlcy94LW1vZGVsYWJsZS5qc1xuZGlyZWN0aXZlKFwibW9kZWxhYmxlXCIsIChlbCwgeyBleHByZXNzaW9uIH0sIHsgZWZmZWN0OiBlZmZlY3QzLCBldmFsdWF0ZUxhdGVyOiBldmFsdWF0ZUxhdGVyMiwgY2xlYW51cDogY2xlYW51cDIgfSkgPT4ge1xuICBsZXQgZnVuYyA9IGV2YWx1YXRlTGF0ZXIyKGV4cHJlc3Npb24pO1xuICBsZXQgaW5uZXJHZXQgPSAoKSA9PiB7XG4gICAgbGV0IHJlc3VsdDtcbiAgICBmdW5jKChpKSA9PiByZXN1bHQgPSBpKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuICBsZXQgZXZhbHVhdGVJbm5lclNldCA9IGV2YWx1YXRlTGF0ZXIyKGAke2V4cHJlc3Npb259ID0gX19wbGFjZWhvbGRlcmApO1xuICBsZXQgaW5uZXJTZXQgPSAodmFsKSA9PiBldmFsdWF0ZUlubmVyU2V0KCgpID0+IHtcbiAgfSwgeyBzY29wZTogeyBcIl9fcGxhY2Vob2xkZXJcIjogdmFsIH0gfSk7XG4gIGxldCBpbml0aWFsVmFsdWUgPSBpbm5lckdldCgpO1xuICBpbm5lclNldChpbml0aWFsVmFsdWUpO1xuICBxdWV1ZU1pY3JvdGFzaygoKSA9PiB7XG4gICAgaWYgKCFlbC5feF9tb2RlbClcbiAgICAgIHJldHVybjtcbiAgICBlbC5feF9yZW1vdmVNb2RlbExpc3RlbmVyc1tcImRlZmF1bHRcIl0oKTtcbiAgICBsZXQgb3V0ZXJHZXQgPSBlbC5feF9tb2RlbC5nZXQ7XG4gICAgbGV0IG91dGVyU2V0ID0gZWwuX3hfbW9kZWwuc2V0O1xuICAgIGxldCByZWxlYXNlRW50YW5nbGVtZW50ID0gZW50YW5nbGUoXG4gICAgICB7XG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICByZXR1cm4gb3V0ZXJHZXQoKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0KHZhbHVlKSB7XG4gICAgICAgICAgb3V0ZXJTZXQodmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgcmV0dXJuIGlubmVyR2V0KCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldCh2YWx1ZSkge1xuICAgICAgICAgIGlubmVyU2V0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gICAgY2xlYW51cDIocmVsZWFzZUVudGFuZ2xlbWVudCk7XG4gIH0pO1xufSk7XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9kaXJlY3RpdmVzL3gtdGVsZXBvcnQuanNcbmRpcmVjdGl2ZShcInRlbGVwb3J0XCIsIChlbCwgeyBtb2RpZmllcnMsIGV4cHJlc3Npb24gfSwgeyBjbGVhbnVwOiBjbGVhbnVwMiB9KSA9PiB7XG4gIGlmIChlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgIT09IFwidGVtcGxhdGVcIilcbiAgICB3YXJuKFwieC10ZWxlcG9ydCBjYW4gb25seSBiZSB1c2VkIG9uIGEgPHRlbXBsYXRlPiB0YWdcIiwgZWwpO1xuICBsZXQgdGFyZ2V0ID0gZ2V0VGFyZ2V0KGV4cHJlc3Npb24pO1xuICBsZXQgY2xvbmUyID0gZWwuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gIGVsLl94X3RlbGVwb3J0ID0gY2xvbmUyO1xuICBjbG9uZTIuX3hfdGVsZXBvcnRCYWNrID0gZWw7XG4gIGVsLnNldEF0dHJpYnV0ZShcImRhdGEtdGVsZXBvcnQtdGVtcGxhdGVcIiwgdHJ1ZSk7XG4gIGNsb25lMi5zZXRBdHRyaWJ1dGUoXCJkYXRhLXRlbGVwb3J0LXRhcmdldFwiLCB0cnVlKTtcbiAgaWYgKGVsLl94X2ZvcndhcmRFdmVudHMpIHtcbiAgICBlbC5feF9mb3J3YXJkRXZlbnRzLmZvckVhY2goKGV2ZW50TmFtZSkgPT4ge1xuICAgICAgY2xvbmUyLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCAoZSkgPT4ge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBlLmNvbnN0cnVjdG9yKGUudHlwZSwgZSkpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgYWRkU2NvcGVUb05vZGUoY2xvbmUyLCB7fSwgZWwpO1xuICBsZXQgcGxhY2VJbkRvbSA9IChjbG9uZTMsIHRhcmdldDIsIG1vZGlmaWVyczIpID0+IHtcbiAgICBpZiAobW9kaWZpZXJzMi5pbmNsdWRlcyhcInByZXBlbmRcIikpIHtcbiAgICAgIHRhcmdldDIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY2xvbmUzLCB0YXJnZXQyKTtcbiAgICB9IGVsc2UgaWYgKG1vZGlmaWVyczIuaW5jbHVkZXMoXCJhcHBlbmRcIikpIHtcbiAgICAgIHRhcmdldDIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY2xvbmUzLCB0YXJnZXQyLm5leHRTaWJsaW5nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0Mi5hcHBlbmRDaGlsZChjbG9uZTMpO1xuICAgIH1cbiAgfTtcbiAgbXV0YXRlRG9tKCgpID0+IHtcbiAgICBwbGFjZUluRG9tKGNsb25lMiwgdGFyZ2V0LCBtb2RpZmllcnMpO1xuICAgIHNraXBEdXJpbmdDbG9uZSgoKSA9PiB7XG4gICAgICBpbml0VHJlZShjbG9uZTIpO1xuICAgIH0pKCk7XG4gIH0pO1xuICBlbC5feF90ZWxlcG9ydFB1dEJhY2sgPSAoKSA9PiB7XG4gICAgbGV0IHRhcmdldDIgPSBnZXRUYXJnZXQoZXhwcmVzc2lvbik7XG4gICAgbXV0YXRlRG9tKCgpID0+IHtcbiAgICAgIHBsYWNlSW5Eb20oZWwuX3hfdGVsZXBvcnQsIHRhcmdldDIsIG1vZGlmaWVycyk7XG4gICAgfSk7XG4gIH07XG4gIGNsZWFudXAyKFxuICAgICgpID0+IG11dGF0ZURvbSgoKSA9PiB7XG4gICAgICBjbG9uZTIucmVtb3ZlKCk7XG4gICAgICBkZXN0cm95VHJlZShjbG9uZTIpO1xuICAgIH0pXG4gICk7XG59KTtcbnZhciB0ZWxlcG9ydENvbnRhaW5lckR1cmluZ0Nsb25lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbmZ1bmN0aW9uIGdldFRhcmdldChleHByZXNzaW9uKSB7XG4gIGxldCB0YXJnZXQgPSBza2lwRHVyaW5nQ2xvbmUoKCkgPT4ge1xuICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGV4cHJlc3Npb24pO1xuICB9LCAoKSA9PiB7XG4gICAgcmV0dXJuIHRlbGVwb3J0Q29udGFpbmVyRHVyaW5nQ2xvbmU7XG4gIH0pKCk7XG4gIGlmICghdGFyZ2V0KVxuICAgIHdhcm4oYENhbm5vdCBmaW5kIHgtdGVsZXBvcnQgZWxlbWVudCBmb3Igc2VsZWN0b3I6IFwiJHtleHByZXNzaW9ufVwiYCk7XG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9kaXJlY3RpdmVzL3gtaWdub3JlLmpzXG52YXIgaGFuZGxlciA9ICgpID0+IHtcbn07XG5oYW5kbGVyLmlubGluZSA9IChlbCwgeyBtb2RpZmllcnMgfSwgeyBjbGVhbnVwOiBjbGVhbnVwMiB9KSA9PiB7XG4gIG1vZGlmaWVycy5pbmNsdWRlcyhcInNlbGZcIikgPyBlbC5feF9pZ25vcmVTZWxmID0gdHJ1ZSA6IGVsLl94X2lnbm9yZSA9IHRydWU7XG4gIGNsZWFudXAyKCgpID0+IHtcbiAgICBtb2RpZmllcnMuaW5jbHVkZXMoXCJzZWxmXCIpID8gZGVsZXRlIGVsLl94X2lnbm9yZVNlbGYgOiBkZWxldGUgZWwuX3hfaWdub3JlO1xuICB9KTtcbn07XG5kaXJlY3RpdmUoXCJpZ25vcmVcIiwgaGFuZGxlcik7XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9kaXJlY3RpdmVzL3gtZWZmZWN0LmpzXG5kaXJlY3RpdmUoXCJlZmZlY3RcIiwgc2tpcER1cmluZ0Nsb25lKChlbCwgeyBleHByZXNzaW9uIH0sIHsgZWZmZWN0OiBlZmZlY3QzIH0pID0+IHtcbiAgZWZmZWN0MyhldmFsdWF0ZUxhdGVyKGVsLCBleHByZXNzaW9uKSk7XG59KSk7XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy91dGlscy9vbi5qc1xuZnVuY3Rpb24gb24oZWwsIGV2ZW50LCBtb2RpZmllcnMsIGNhbGxiYWNrKSB7XG4gIGxldCBsaXN0ZW5lclRhcmdldCA9IGVsO1xuICBsZXQgaGFuZGxlcjQgPSAoZSkgPT4gY2FsbGJhY2soZSk7XG4gIGxldCBvcHRpb25zID0ge307XG4gIGxldCB3cmFwSGFuZGxlciA9IChjYWxsYmFjazIsIHdyYXBwZXIpID0+IChlKSA9PiB3cmFwcGVyKGNhbGxiYWNrMiwgZSk7XG4gIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoXCJkb3RcIikpXG4gICAgZXZlbnQgPSBkb3RTeW50YXgoZXZlbnQpO1xuICBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKFwiY2FtZWxcIikpXG4gICAgZXZlbnQgPSBjYW1lbENhc2UyKGV2ZW50KTtcbiAgaWYgKG1vZGlmaWVycy5pbmNsdWRlcyhcInBhc3NpdmVcIikpXG4gICAgb3B0aW9ucy5wYXNzaXZlID0gdHJ1ZTtcbiAgaWYgKG1vZGlmaWVycy5pbmNsdWRlcyhcImNhcHR1cmVcIikpXG4gICAgb3B0aW9ucy5jYXB0dXJlID0gdHJ1ZTtcbiAgaWYgKG1vZGlmaWVycy5pbmNsdWRlcyhcIndpbmRvd1wiKSlcbiAgICBsaXN0ZW5lclRhcmdldCA9IHdpbmRvdztcbiAgaWYgKG1vZGlmaWVycy5pbmNsdWRlcyhcImRvY3VtZW50XCIpKVxuICAgIGxpc3RlbmVyVGFyZ2V0ID0gZG9jdW1lbnQ7XG4gIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoXCJkZWJvdW5jZVwiKSkge1xuICAgIGxldCBuZXh0TW9kaWZpZXIgPSBtb2RpZmllcnNbbW9kaWZpZXJzLmluZGV4T2YoXCJkZWJvdW5jZVwiKSArIDFdIHx8IFwiaW52YWxpZC13YWl0XCI7XG4gICAgbGV0IHdhaXQgPSBpc051bWVyaWMobmV4dE1vZGlmaWVyLnNwbGl0KFwibXNcIilbMF0pID8gTnVtYmVyKG5leHRNb2RpZmllci5zcGxpdChcIm1zXCIpWzBdKSA6IDI1MDtcbiAgICBoYW5kbGVyNCA9IGRlYm91bmNlKGhhbmRsZXI0LCB3YWl0KTtcbiAgfVxuICBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKFwidGhyb3R0bGVcIikpIHtcbiAgICBsZXQgbmV4dE1vZGlmaWVyID0gbW9kaWZpZXJzW21vZGlmaWVycy5pbmRleE9mKFwidGhyb3R0bGVcIikgKyAxXSB8fCBcImludmFsaWQtd2FpdFwiO1xuICAgIGxldCB3YWl0ID0gaXNOdW1lcmljKG5leHRNb2RpZmllci5zcGxpdChcIm1zXCIpWzBdKSA/IE51bWJlcihuZXh0TW9kaWZpZXIuc3BsaXQoXCJtc1wiKVswXSkgOiAyNTA7XG4gICAgaGFuZGxlcjQgPSB0aHJvdHRsZShoYW5kbGVyNCwgd2FpdCk7XG4gIH1cbiAgaWYgKG1vZGlmaWVycy5pbmNsdWRlcyhcInByZXZlbnRcIikpXG4gICAgaGFuZGxlcjQgPSB3cmFwSGFuZGxlcihoYW5kbGVyNCwgKG5leHQsIGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIG5leHQoZSk7XG4gICAgfSk7XG4gIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoXCJzdG9wXCIpKVxuICAgIGhhbmRsZXI0ID0gd3JhcEhhbmRsZXIoaGFuZGxlcjQsIChuZXh0LCBlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgbmV4dChlKTtcbiAgICB9KTtcbiAgaWYgKG1vZGlmaWVycy5pbmNsdWRlcyhcIm9uY2VcIikpIHtcbiAgICBoYW5kbGVyNCA9IHdyYXBIYW5kbGVyKGhhbmRsZXI0LCAobmV4dCwgZSkgPT4ge1xuICAgICAgbmV4dChlKTtcbiAgICAgIGxpc3RlbmVyVGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXI0LCBvcHRpb25zKTtcbiAgICB9KTtcbiAgfVxuICBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKFwiYXdheVwiKSB8fCBtb2RpZmllcnMuaW5jbHVkZXMoXCJvdXRzaWRlXCIpKSB7XG4gICAgbGlzdGVuZXJUYXJnZXQgPSBkb2N1bWVudDtcbiAgICBoYW5kbGVyNCA9IHdyYXBIYW5kbGVyKGhhbmRsZXI0LCAobmV4dCwgZSkgPT4ge1xuICAgICAgaWYgKGVsLmNvbnRhaW5zKGUudGFyZ2V0KSlcbiAgICAgICAgcmV0dXJuO1xuICAgICAgaWYgKGUudGFyZ2V0LmlzQ29ubmVjdGVkID09PSBmYWxzZSlcbiAgICAgICAgcmV0dXJuO1xuICAgICAgaWYgKGVsLm9mZnNldFdpZHRoIDwgMSAmJiBlbC5vZmZzZXRIZWlnaHQgPCAxKVxuICAgICAgICByZXR1cm47XG4gICAgICBpZiAoZWwuX3hfaXNTaG93biA9PT0gZmFsc2UpXG4gICAgICAgIHJldHVybjtcbiAgICAgIG5leHQoZSk7XG4gICAgfSk7XG4gIH1cbiAgaWYgKG1vZGlmaWVycy5pbmNsdWRlcyhcInNlbGZcIikpXG4gICAgaGFuZGxlcjQgPSB3cmFwSGFuZGxlcihoYW5kbGVyNCwgKG5leHQsIGUpID0+IHtcbiAgICAgIGUudGFyZ2V0ID09PSBlbCAmJiBuZXh0KGUpO1xuICAgIH0pO1xuICBpZiAoaXNLZXlFdmVudChldmVudCkgfHwgaXNDbGlja0V2ZW50KGV2ZW50KSkge1xuICAgIGhhbmRsZXI0ID0gd3JhcEhhbmRsZXIoaGFuZGxlcjQsIChuZXh0LCBlKSA9PiB7XG4gICAgICBpZiAoaXNMaXN0ZW5pbmdGb3JBU3BlY2lmaWNLZXlUaGF0SGFzbnRCZWVuUHJlc3NlZChlLCBtb2RpZmllcnMpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIG5leHQoZSk7XG4gICAgfSk7XG4gIH1cbiAgbGlzdGVuZXJUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlcjQsIG9wdGlvbnMpO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIGxpc3RlbmVyVGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXI0LCBvcHRpb25zKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGRvdFN5bnRheChzdWJqZWN0KSB7XG4gIHJldHVybiBzdWJqZWN0LnJlcGxhY2UoLy0vZywgXCIuXCIpO1xufVxuZnVuY3Rpb24gY2FtZWxDYXNlMihzdWJqZWN0KSB7XG4gIHJldHVybiBzdWJqZWN0LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvLShcXHcpL2csIChtYXRjaCwgY2hhcikgPT4gY2hhci50b1VwcGVyQ2FzZSgpKTtcbn1cbmZ1bmN0aW9uIGlzTnVtZXJpYyhzdWJqZWN0KSB7XG4gIHJldHVybiAhQXJyYXkuaXNBcnJheShzdWJqZWN0KSAmJiAhaXNOYU4oc3ViamVjdCk7XG59XG5mdW5jdGlvbiBrZWJhYkNhc2UyKHN1YmplY3QpIHtcbiAgaWYgKFtcIiBcIiwgXCJfXCJdLmluY2x1ZGVzKFxuICAgIHN1YmplY3RcbiAgKSlcbiAgICByZXR1cm4gc3ViamVjdDtcbiAgcmV0dXJuIHN1YmplY3QucmVwbGFjZSgvKFthLXpdKShbQS1aXSkvZywgXCIkMS0kMlwiKS5yZXBsYWNlKC9bX1xcc10vLCBcIi1cIikudG9Mb3dlckNhc2UoKTtcbn1cbmZ1bmN0aW9uIGlzS2V5RXZlbnQoZXZlbnQpIHtcbiAgcmV0dXJuIFtcImtleWRvd25cIiwgXCJrZXl1cFwiXS5pbmNsdWRlcyhldmVudCk7XG59XG5mdW5jdGlvbiBpc0NsaWNrRXZlbnQoZXZlbnQpIHtcbiAgcmV0dXJuIFtcImNvbnRleHRtZW51XCIsIFwiY2xpY2tcIiwgXCJtb3VzZVwiXS5zb21lKChpKSA9PiBldmVudC5pbmNsdWRlcyhpKSk7XG59XG5mdW5jdGlvbiBpc0xpc3RlbmluZ0ZvckFTcGVjaWZpY0tleVRoYXRIYXNudEJlZW5QcmVzc2VkKGUsIG1vZGlmaWVycykge1xuICBsZXQga2V5TW9kaWZpZXJzID0gbW9kaWZpZXJzLmZpbHRlcigoaSkgPT4ge1xuICAgIHJldHVybiAhW1wid2luZG93XCIsIFwiZG9jdW1lbnRcIiwgXCJwcmV2ZW50XCIsIFwic3RvcFwiLCBcIm9uY2VcIiwgXCJjYXB0dXJlXCIsIFwic2VsZlwiLCBcImF3YXlcIiwgXCJvdXRzaWRlXCIsIFwicGFzc2l2ZVwiXS5pbmNsdWRlcyhpKTtcbiAgfSk7XG4gIGlmIChrZXlNb2RpZmllcnMuaW5jbHVkZXMoXCJkZWJvdW5jZVwiKSkge1xuICAgIGxldCBkZWJvdW5jZUluZGV4ID0ga2V5TW9kaWZpZXJzLmluZGV4T2YoXCJkZWJvdW5jZVwiKTtcbiAgICBrZXlNb2RpZmllcnMuc3BsaWNlKGRlYm91bmNlSW5kZXgsIGlzTnVtZXJpYygoa2V5TW9kaWZpZXJzW2RlYm91bmNlSW5kZXggKyAxXSB8fCBcImludmFsaWQtd2FpdFwiKS5zcGxpdChcIm1zXCIpWzBdKSA/IDIgOiAxKTtcbiAgfVxuICBpZiAoa2V5TW9kaWZpZXJzLmluY2x1ZGVzKFwidGhyb3R0bGVcIikpIHtcbiAgICBsZXQgZGVib3VuY2VJbmRleCA9IGtleU1vZGlmaWVycy5pbmRleE9mKFwidGhyb3R0bGVcIik7XG4gICAga2V5TW9kaWZpZXJzLnNwbGljZShkZWJvdW5jZUluZGV4LCBpc051bWVyaWMoKGtleU1vZGlmaWVyc1tkZWJvdW5jZUluZGV4ICsgMV0gfHwgXCJpbnZhbGlkLXdhaXRcIikuc3BsaXQoXCJtc1wiKVswXSkgPyAyIDogMSk7XG4gIH1cbiAgaWYgKGtleU1vZGlmaWVycy5sZW5ndGggPT09IDApXG4gICAgcmV0dXJuIGZhbHNlO1xuICBpZiAoa2V5TW9kaWZpZXJzLmxlbmd0aCA9PT0gMSAmJiBrZXlUb01vZGlmaWVycyhlLmtleSkuaW5jbHVkZXMoa2V5TW9kaWZpZXJzWzBdKSlcbiAgICByZXR1cm4gZmFsc2U7XG4gIGNvbnN0IHN5c3RlbUtleU1vZGlmaWVycyA9IFtcImN0cmxcIiwgXCJzaGlmdFwiLCBcImFsdFwiLCBcIm1ldGFcIiwgXCJjbWRcIiwgXCJzdXBlclwiXTtcbiAgY29uc3Qgc2VsZWN0ZWRTeXN0ZW1LZXlNb2RpZmllcnMgPSBzeXN0ZW1LZXlNb2RpZmllcnMuZmlsdGVyKChtb2RpZmllcikgPT4ga2V5TW9kaWZpZXJzLmluY2x1ZGVzKG1vZGlmaWVyKSk7XG4gIGtleU1vZGlmaWVycyA9IGtleU1vZGlmaWVycy5maWx0ZXIoKGkpID0+ICFzZWxlY3RlZFN5c3RlbUtleU1vZGlmaWVycy5pbmNsdWRlcyhpKSk7XG4gIGlmIChzZWxlY3RlZFN5c3RlbUtleU1vZGlmaWVycy5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgYWN0aXZlbHlQcmVzc2VkS2V5TW9kaWZpZXJzID0gc2VsZWN0ZWRTeXN0ZW1LZXlNb2RpZmllcnMuZmlsdGVyKChtb2RpZmllcikgPT4ge1xuICAgICAgaWYgKG1vZGlmaWVyID09PSBcImNtZFwiIHx8IG1vZGlmaWVyID09PSBcInN1cGVyXCIpXG4gICAgICAgIG1vZGlmaWVyID0gXCJtZXRhXCI7XG4gICAgICByZXR1cm4gZVtgJHttb2RpZmllcn1LZXlgXTtcbiAgICB9KTtcbiAgICBpZiAoYWN0aXZlbHlQcmVzc2VkS2V5TW9kaWZpZXJzLmxlbmd0aCA9PT0gc2VsZWN0ZWRTeXN0ZW1LZXlNb2RpZmllcnMubGVuZ3RoKSB7XG4gICAgICBpZiAoaXNDbGlja0V2ZW50KGUudHlwZSkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIGlmIChrZXlUb01vZGlmaWVycyhlLmtleSkuaW5jbHVkZXMoa2V5TW9kaWZpZXJzWzBdKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGtleVRvTW9kaWZpZXJzKGtleSkge1xuICBpZiAoIWtleSlcbiAgICByZXR1cm4gW107XG4gIGtleSA9IGtlYmFiQ2FzZTIoa2V5KTtcbiAgbGV0IG1vZGlmaWVyVG9LZXlNYXAgPSB7XG4gICAgXCJjdHJsXCI6IFwiY29udHJvbFwiLFxuICAgIFwic2xhc2hcIjogXCIvXCIsXG4gICAgXCJzcGFjZVwiOiBcIiBcIixcbiAgICBcInNwYWNlYmFyXCI6IFwiIFwiLFxuICAgIFwiY21kXCI6IFwibWV0YVwiLFxuICAgIFwiZXNjXCI6IFwiZXNjYXBlXCIsXG4gICAgXCJ1cFwiOiBcImFycm93LXVwXCIsXG4gICAgXCJkb3duXCI6IFwiYXJyb3ctZG93blwiLFxuICAgIFwibGVmdFwiOiBcImFycm93LWxlZnRcIixcbiAgICBcInJpZ2h0XCI6IFwiYXJyb3ctcmlnaHRcIixcbiAgICBcInBlcmlvZFwiOiBcIi5cIixcbiAgICBcImNvbW1hXCI6IFwiLFwiLFxuICAgIFwiZXF1YWxcIjogXCI9XCIsXG4gICAgXCJtaW51c1wiOiBcIi1cIixcbiAgICBcInVuZGVyc2NvcmVcIjogXCJfXCJcbiAgfTtcbiAgbW9kaWZpZXJUb0tleU1hcFtrZXldID0ga2V5O1xuICByZXR1cm4gT2JqZWN0LmtleXMobW9kaWZpZXJUb0tleU1hcCkubWFwKChtb2RpZmllcikgPT4ge1xuICAgIGlmIChtb2RpZmllclRvS2V5TWFwW21vZGlmaWVyXSA9PT0ga2V5KVxuICAgICAgcmV0dXJuIG1vZGlmaWVyO1xuICB9KS5maWx0ZXIoKG1vZGlmaWVyKSA9PiBtb2RpZmllcik7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9kaXJlY3RpdmVzL3gtbW9kZWwuanNcbmRpcmVjdGl2ZShcIm1vZGVsXCIsIChlbCwgeyBtb2RpZmllcnMsIGV4cHJlc3Npb24gfSwgeyBlZmZlY3Q6IGVmZmVjdDMsIGNsZWFudXA6IGNsZWFudXAyIH0pID0+IHtcbiAgbGV0IHNjb3BlVGFyZ2V0ID0gZWw7XG4gIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoXCJwYXJlbnRcIikpIHtcbiAgICBzY29wZVRhcmdldCA9IGVsLnBhcmVudE5vZGU7XG4gIH1cbiAgbGV0IGV2YWx1YXRlR2V0ID0gZXZhbHVhdGVMYXRlcihzY29wZVRhcmdldCwgZXhwcmVzc2lvbik7XG4gIGxldCBldmFsdWF0ZVNldDtcbiAgaWYgKHR5cGVvZiBleHByZXNzaW9uID09PSBcInN0cmluZ1wiKSB7XG4gICAgZXZhbHVhdGVTZXQgPSBldmFsdWF0ZUxhdGVyKHNjb3BlVGFyZ2V0LCBgJHtleHByZXNzaW9ufSA9IF9fcGxhY2Vob2xkZXJgKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZXhwcmVzc2lvbiA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBleHByZXNzaW9uKCkgPT09IFwic3RyaW5nXCIpIHtcbiAgICBldmFsdWF0ZVNldCA9IGV2YWx1YXRlTGF0ZXIoc2NvcGVUYXJnZXQsIGAke2V4cHJlc3Npb24oKX0gPSBfX3BsYWNlaG9sZGVyYCk7XG4gIH0gZWxzZSB7XG4gICAgZXZhbHVhdGVTZXQgPSAoKSA9PiB7XG4gICAgfTtcbiAgfVxuICBsZXQgZ2V0VmFsdWUgPSAoKSA9PiB7XG4gICAgbGV0IHJlc3VsdDtcbiAgICBldmFsdWF0ZUdldCgodmFsdWUpID0+IHJlc3VsdCA9IHZhbHVlKTtcbiAgICByZXR1cm4gaXNHZXR0ZXJTZXR0ZXIocmVzdWx0KSA/IHJlc3VsdC5nZXQoKSA6IHJlc3VsdDtcbiAgfTtcbiAgbGV0IHNldFZhbHVlID0gKHZhbHVlKSA9PiB7XG4gICAgbGV0IHJlc3VsdDtcbiAgICBldmFsdWF0ZUdldCgodmFsdWUyKSA9PiByZXN1bHQgPSB2YWx1ZTIpO1xuICAgIGlmIChpc0dldHRlclNldHRlcihyZXN1bHQpKSB7XG4gICAgICByZXN1bHQuc2V0KHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXZhbHVhdGVTZXQoKCkgPT4ge1xuICAgICAgfSwge1xuICAgICAgICBzY29wZTogeyBcIl9fcGxhY2Vob2xkZXJcIjogdmFsdWUgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuICBpZiAodHlwZW9mIGV4cHJlc3Npb24gPT09IFwic3RyaW5nXCIgJiYgZWwudHlwZSA9PT0gXCJyYWRpb1wiKSB7XG4gICAgbXV0YXRlRG9tKCgpID0+IHtcbiAgICAgIGlmICghZWwuaGFzQXR0cmlidXRlKFwibmFtZVwiKSlcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKFwibmFtZVwiLCBleHByZXNzaW9uKTtcbiAgICB9KTtcbiAgfVxuICB2YXIgZXZlbnQgPSBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwic2VsZWN0XCIgfHwgW1wiY2hlY2tib3hcIiwgXCJyYWRpb1wiXS5pbmNsdWRlcyhlbC50eXBlKSB8fCBtb2RpZmllcnMuaW5jbHVkZXMoXCJsYXp5XCIpID8gXCJjaGFuZ2VcIiA6IFwiaW5wdXRcIjtcbiAgbGV0IHJlbW92ZUxpc3RlbmVyID0gaXNDbG9uaW5nID8gKCkgPT4ge1xuICB9IDogb24oZWwsIGV2ZW50LCBtb2RpZmllcnMsIChlKSA9PiB7XG4gICAgc2V0VmFsdWUoZ2V0SW5wdXRWYWx1ZShlbCwgbW9kaWZpZXJzLCBlLCBnZXRWYWx1ZSgpKSk7XG4gIH0pO1xuICBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKFwiZmlsbFwiKSkge1xuICAgIGlmIChbdm9pZCAwLCBudWxsLCBcIlwiXS5pbmNsdWRlcyhnZXRWYWx1ZSgpKSB8fCBpc0NoZWNrYm94KGVsKSAmJiBBcnJheS5pc0FycmF5KGdldFZhbHVlKCkpIHx8IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJzZWxlY3RcIiAmJiBlbC5tdWx0aXBsZSkge1xuICAgICAgc2V0VmFsdWUoXG4gICAgICAgIGdldElucHV0VmFsdWUoZWwsIG1vZGlmaWVycywgeyB0YXJnZXQ6IGVsIH0sIGdldFZhbHVlKCkpXG4gICAgICApO1xuICAgIH1cbiAgfVxuICBpZiAoIWVsLl94X3JlbW92ZU1vZGVsTGlzdGVuZXJzKVxuICAgIGVsLl94X3JlbW92ZU1vZGVsTGlzdGVuZXJzID0ge307XG4gIGVsLl94X3JlbW92ZU1vZGVsTGlzdGVuZXJzW1wiZGVmYXVsdFwiXSA9IHJlbW92ZUxpc3RlbmVyO1xuICBjbGVhbnVwMigoKSA9PiBlbC5feF9yZW1vdmVNb2RlbExpc3RlbmVyc1tcImRlZmF1bHRcIl0oKSk7XG4gIGlmIChlbC5mb3JtKSB7XG4gICAgbGV0IHJlbW92ZVJlc2V0TGlzdGVuZXIgPSBvbihlbC5mb3JtLCBcInJlc2V0XCIsIFtdLCAoZSkgPT4ge1xuICAgICAgbmV4dFRpY2soKCkgPT4gZWwuX3hfbW9kZWwgJiYgZWwuX3hfbW9kZWwuc2V0KGdldElucHV0VmFsdWUoZWwsIG1vZGlmaWVycywgeyB0YXJnZXQ6IGVsIH0sIGdldFZhbHVlKCkpKSk7XG4gICAgfSk7XG4gICAgY2xlYW51cDIoKCkgPT4gcmVtb3ZlUmVzZXRMaXN0ZW5lcigpKTtcbiAgfVxuICBlbC5feF9tb2RlbCA9IHtcbiAgICBnZXQoKSB7XG4gICAgICByZXR1cm4gZ2V0VmFsdWUoKTtcbiAgICB9LFxuICAgIHNldCh2YWx1ZSkge1xuICAgICAgc2V0VmFsdWUodmFsdWUpO1xuICAgIH1cbiAgfTtcbiAgZWwuX3hfZm9yY2VNb2RlbFVwZGF0ZSA9ICh2YWx1ZSkgPT4ge1xuICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwICYmIHR5cGVvZiBleHByZXNzaW9uID09PSBcInN0cmluZ1wiICYmIGV4cHJlc3Npb24ubWF0Y2goL1xcLi8pKVxuICAgICAgdmFsdWUgPSBcIlwiO1xuICAgIHdpbmRvdy5mcm9tTW9kZWwgPSB0cnVlO1xuICAgIG11dGF0ZURvbSgoKSA9PiBiaW5kKGVsLCBcInZhbHVlXCIsIHZhbHVlKSk7XG4gICAgZGVsZXRlIHdpbmRvdy5mcm9tTW9kZWw7XG4gIH07XG4gIGVmZmVjdDMoKCkgPT4ge1xuICAgIGxldCB2YWx1ZSA9IGdldFZhbHVlKCk7XG4gICAgaWYgKG1vZGlmaWVycy5pbmNsdWRlcyhcInVuaW50cnVzaXZlXCIpICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuaXNTYW1lTm9kZShlbCkpXG4gICAgICByZXR1cm47XG4gICAgZWwuX3hfZm9yY2VNb2RlbFVwZGF0ZSh2YWx1ZSk7XG4gIH0pO1xufSk7XG5mdW5jdGlvbiBnZXRJbnB1dFZhbHVlKGVsLCBtb2RpZmllcnMsIGV2ZW50LCBjdXJyZW50VmFsdWUpIHtcbiAgcmV0dXJuIG11dGF0ZURvbSgoKSA9PiB7XG4gICAgaWYgKGV2ZW50IGluc3RhbmNlb2YgQ3VzdG9tRXZlbnQgJiYgZXZlbnQuZGV0YWlsICE9PSB2b2lkIDApXG4gICAgICByZXR1cm4gZXZlbnQuZGV0YWlsICE9PSBudWxsICYmIGV2ZW50LmRldGFpbCAhPT0gdm9pZCAwID8gZXZlbnQuZGV0YWlsIDogZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgIGVsc2UgaWYgKGlzQ2hlY2tib3goZWwpKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShjdXJyZW50VmFsdWUpKSB7XG4gICAgICAgIGxldCBuZXdWYWx1ZSA9IG51bGw7XG4gICAgICAgIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoXCJudW1iZXJcIikpIHtcbiAgICAgICAgICBuZXdWYWx1ZSA9IHNhZmVQYXJzZU51bWJlcihldmVudC50YXJnZXQudmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKG1vZGlmaWVycy5pbmNsdWRlcyhcImJvb2xlYW5cIikpIHtcbiAgICAgICAgICBuZXdWYWx1ZSA9IHNhZmVQYXJzZUJvb2xlYW4oZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdWYWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXZlbnQudGFyZ2V0LmNoZWNrZWQgPyBjdXJyZW50VmFsdWUuaW5jbHVkZXMobmV3VmFsdWUpID8gY3VycmVudFZhbHVlIDogY3VycmVudFZhbHVlLmNvbmNhdChbbmV3VmFsdWVdKSA6IGN1cnJlbnRWYWx1ZS5maWx0ZXIoKGVsMikgPT4gIWNoZWNrZWRBdHRyTG9vc2VDb21wYXJlMihlbDIsIG5ld1ZhbHVlKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZXZlbnQudGFyZ2V0LmNoZWNrZWQ7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwic2VsZWN0XCIgJiYgZWwubXVsdGlwbGUpIHtcbiAgICAgIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoXCJudW1iZXJcIikpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oZXZlbnQudGFyZ2V0LnNlbGVjdGVkT3B0aW9ucykubWFwKChvcHRpb24pID0+IHtcbiAgICAgICAgICBsZXQgcmF3VmFsdWUgPSBvcHRpb24udmFsdWUgfHwgb3B0aW9uLnRleHQ7XG4gICAgICAgICAgcmV0dXJuIHNhZmVQYXJzZU51bWJlcihyYXdWYWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoXCJib29sZWFuXCIpKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKGV2ZW50LnRhcmdldC5zZWxlY3RlZE9wdGlvbnMpLm1hcCgob3B0aW9uKSA9PiB7XG4gICAgICAgICAgbGV0IHJhd1ZhbHVlID0gb3B0aW9uLnZhbHVlIHx8IG9wdGlvbi50ZXh0O1xuICAgICAgICAgIHJldHVybiBzYWZlUGFyc2VCb29sZWFuKHJhd1ZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gQXJyYXkuZnJvbShldmVudC50YXJnZXQuc2VsZWN0ZWRPcHRpb25zKS5tYXAoKG9wdGlvbikgPT4ge1xuICAgICAgICByZXR1cm4gb3B0aW9uLnZhbHVlIHx8IG9wdGlvbi50ZXh0O1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBuZXdWYWx1ZTtcbiAgICAgIGlmIChpc1JhZGlvKGVsKSkge1xuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmNoZWNrZWQpIHtcbiAgICAgICAgICBuZXdWYWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdWYWx1ZSA9IGN1cnJlbnRWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3VmFsdWUgPSBldmVudC50YXJnZXQudmFsdWU7XG4gICAgICB9XG4gICAgICBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKFwibnVtYmVyXCIpKSB7XG4gICAgICAgIHJldHVybiBzYWZlUGFyc2VOdW1iZXIobmV3VmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoXCJib29sZWFuXCIpKSB7XG4gICAgICAgIHJldHVybiBzYWZlUGFyc2VCb29sZWFuKG5ld1ZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAobW9kaWZpZXJzLmluY2x1ZGVzKFwidHJpbVwiKSkge1xuICAgICAgICByZXR1cm4gbmV3VmFsdWUudHJpbSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ld1ZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBzYWZlUGFyc2VOdW1iZXIocmF3VmFsdWUpIHtcbiAgbGV0IG51bWJlciA9IHJhd1ZhbHVlID8gcGFyc2VGbG9hdChyYXdWYWx1ZSkgOiBudWxsO1xuICByZXR1cm4gaXNOdW1lcmljMihudW1iZXIpID8gbnVtYmVyIDogcmF3VmFsdWU7XG59XG5mdW5jdGlvbiBjaGVja2VkQXR0ckxvb3NlQ29tcGFyZTIodmFsdWVBLCB2YWx1ZUIpIHtcbiAgcmV0dXJuIHZhbHVlQSA9PSB2YWx1ZUI7XG59XG5mdW5jdGlvbiBpc051bWVyaWMyKHN1YmplY3QpIHtcbiAgcmV0dXJuICFBcnJheS5pc0FycmF5KHN1YmplY3QpICYmICFpc05hTihzdWJqZWN0KTtcbn1cbmZ1bmN0aW9uIGlzR2V0dGVyU2V0dGVyKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHZhbHVlLmdldCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiB2YWx1ZS5zZXQgPT09IFwiZnVuY3Rpb25cIjtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2RpcmVjdGl2ZXMveC1jbG9hay5qc1xuZGlyZWN0aXZlKFwiY2xvYWtcIiwgKGVsKSA9PiBxdWV1ZU1pY3JvdGFzaygoKSA9PiBtdXRhdGVEb20oKCkgPT4gZWwucmVtb3ZlQXR0cmlidXRlKHByZWZpeChcImNsb2FrXCIpKSkpKTtcblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2RpcmVjdGl2ZXMveC1pbml0LmpzXG5hZGRJbml0U2VsZWN0b3IoKCkgPT4gYFske3ByZWZpeChcImluaXRcIil9XWApO1xuZGlyZWN0aXZlKFwiaW5pdFwiLCBza2lwRHVyaW5nQ2xvbmUoKGVsLCB7IGV4cHJlc3Npb24gfSwgeyBldmFsdWF0ZTogZXZhbHVhdGUyIH0pID0+IHtcbiAgaWYgKHR5cGVvZiBleHByZXNzaW9uID09PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuICEhZXhwcmVzc2lvbi50cmltKCkgJiYgZXZhbHVhdGUyKGV4cHJlc3Npb24sIHt9LCBmYWxzZSk7XG4gIH1cbiAgcmV0dXJuIGV2YWx1YXRlMihleHByZXNzaW9uLCB7fSwgZmFsc2UpO1xufSkpO1xuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvZGlyZWN0aXZlcy94LXRleHQuanNcbmRpcmVjdGl2ZShcInRleHRcIiwgKGVsLCB7IGV4cHJlc3Npb24gfSwgeyBlZmZlY3Q6IGVmZmVjdDMsIGV2YWx1YXRlTGF0ZXI6IGV2YWx1YXRlTGF0ZXIyIH0pID0+IHtcbiAgbGV0IGV2YWx1YXRlMiA9IGV2YWx1YXRlTGF0ZXIyKGV4cHJlc3Npb24pO1xuICBlZmZlY3QzKCgpID0+IHtcbiAgICBldmFsdWF0ZTIoKHZhbHVlKSA9PiB7XG4gICAgICBtdXRhdGVEb20oKCkgPT4ge1xuICAgICAgICBlbC50ZXh0Q29udGVudCA9IHZhbHVlO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9kaXJlY3RpdmVzL3gtaHRtbC5qc1xuZGlyZWN0aXZlKFwiaHRtbFwiLCAoZWwsIHsgZXhwcmVzc2lvbiB9LCB7IGVmZmVjdDogZWZmZWN0MywgZXZhbHVhdGVMYXRlcjogZXZhbHVhdGVMYXRlcjIgfSkgPT4ge1xuICBsZXQgZXZhbHVhdGUyID0gZXZhbHVhdGVMYXRlcjIoZXhwcmVzc2lvbik7XG4gIGVmZmVjdDMoKCkgPT4ge1xuICAgIGV2YWx1YXRlMigodmFsdWUpID0+IHtcbiAgICAgIG11dGF0ZURvbSgoKSA9PiB7XG4gICAgICAgIGVsLmlubmVySFRNTCA9IHZhbHVlO1xuICAgICAgICBlbC5feF9pZ25vcmVTZWxmID0gdHJ1ZTtcbiAgICAgICAgaW5pdFRyZWUoZWwpO1xuICAgICAgICBkZWxldGUgZWwuX3hfaWdub3JlU2VsZjtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuXG4vLyBwYWNrYWdlcy9hbHBpbmVqcy9zcmMvZGlyZWN0aXZlcy94LWJpbmQuanNcbm1hcEF0dHJpYnV0ZXMoc3RhcnRpbmdXaXRoKFwiOlwiLCBpbnRvKHByZWZpeChcImJpbmQ6XCIpKSkpO1xudmFyIGhhbmRsZXIyID0gKGVsLCB7IHZhbHVlLCBtb2RpZmllcnMsIGV4cHJlc3Npb24sIG9yaWdpbmFsIH0sIHsgZWZmZWN0OiBlZmZlY3QzLCBjbGVhbnVwOiBjbGVhbnVwMiB9KSA9PiB7XG4gIGlmICghdmFsdWUpIHtcbiAgICBsZXQgYmluZGluZ1Byb3ZpZGVycyA9IHt9O1xuICAgIGluamVjdEJpbmRpbmdQcm92aWRlcnMoYmluZGluZ1Byb3ZpZGVycyk7XG4gICAgbGV0IGdldEJpbmRpbmdzID0gZXZhbHVhdGVMYXRlcihlbCwgZXhwcmVzc2lvbik7XG4gICAgZ2V0QmluZGluZ3MoKGJpbmRpbmdzKSA9PiB7XG4gICAgICBhcHBseUJpbmRpbmdzT2JqZWN0KGVsLCBiaW5kaW5ncywgb3JpZ2luYWwpO1xuICAgIH0sIHsgc2NvcGU6IGJpbmRpbmdQcm92aWRlcnMgfSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICh2YWx1ZSA9PT0gXCJrZXlcIilcbiAgICByZXR1cm4gc3RvcmVLZXlGb3JYRm9yKGVsLCBleHByZXNzaW9uKTtcbiAgaWYgKGVsLl94X2lubGluZUJpbmRpbmdzICYmIGVsLl94X2lubGluZUJpbmRpbmdzW3ZhbHVlXSAmJiBlbC5feF9pbmxpbmVCaW5kaW5nc1t2YWx1ZV0uZXh0cmFjdCkge1xuICAgIHJldHVybjtcbiAgfVxuICBsZXQgZXZhbHVhdGUyID0gZXZhbHVhdGVMYXRlcihlbCwgZXhwcmVzc2lvbik7XG4gIGVmZmVjdDMoKCkgPT4gZXZhbHVhdGUyKChyZXN1bHQpID0+IHtcbiAgICBpZiAocmVzdWx0ID09PSB2b2lkIDAgJiYgdHlwZW9mIGV4cHJlc3Npb24gPT09IFwic3RyaW5nXCIgJiYgZXhwcmVzc2lvbi5tYXRjaCgvXFwuLykpIHtcbiAgICAgIHJlc3VsdCA9IFwiXCI7XG4gICAgfVxuICAgIG11dGF0ZURvbSgoKSA9PiBiaW5kKGVsLCB2YWx1ZSwgcmVzdWx0LCBtb2RpZmllcnMpKTtcbiAgfSkpO1xuICBjbGVhbnVwMigoKSA9PiB7XG4gICAgZWwuX3hfdW5kb0FkZGVkQ2xhc3NlcyAmJiBlbC5feF91bmRvQWRkZWRDbGFzc2VzKCk7XG4gICAgZWwuX3hfdW5kb0FkZGVkU3R5bGVzICYmIGVsLl94X3VuZG9BZGRlZFN0eWxlcygpO1xuICB9KTtcbn07XG5oYW5kbGVyMi5pbmxpbmUgPSAoZWwsIHsgdmFsdWUsIG1vZGlmaWVycywgZXhwcmVzc2lvbiB9KSA9PiB7XG4gIGlmICghdmFsdWUpXG4gICAgcmV0dXJuO1xuICBpZiAoIWVsLl94X2lubGluZUJpbmRpbmdzKVxuICAgIGVsLl94X2lubGluZUJpbmRpbmdzID0ge307XG4gIGVsLl94X2lubGluZUJpbmRpbmdzW3ZhbHVlXSA9IHsgZXhwcmVzc2lvbiwgZXh0cmFjdDogZmFsc2UgfTtcbn07XG5kaXJlY3RpdmUoXCJiaW5kXCIsIGhhbmRsZXIyKTtcbmZ1bmN0aW9uIHN0b3JlS2V5Rm9yWEZvcihlbCwgZXhwcmVzc2lvbikge1xuICBlbC5feF9rZXlFeHByZXNzaW9uID0gZXhwcmVzc2lvbjtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2RpcmVjdGl2ZXMveC1kYXRhLmpzXG5hZGRSb290U2VsZWN0b3IoKCkgPT4gYFske3ByZWZpeChcImRhdGFcIil9XWApO1xuZGlyZWN0aXZlKFwiZGF0YVwiLCAoZWwsIHsgZXhwcmVzc2lvbiB9LCB7IGNsZWFudXA6IGNsZWFudXAyIH0pID0+IHtcbiAgaWYgKHNob3VsZFNraXBSZWdpc3RlcmluZ0RhdGFEdXJpbmdDbG9uZShlbCkpXG4gICAgcmV0dXJuO1xuICBleHByZXNzaW9uID0gZXhwcmVzc2lvbiA9PT0gXCJcIiA/IFwie31cIiA6IGV4cHJlc3Npb247XG4gIGxldCBtYWdpY0NvbnRleHQgPSB7fTtcbiAgaW5qZWN0TWFnaWNzKG1hZ2ljQ29udGV4dCwgZWwpO1xuICBsZXQgZGF0YVByb3ZpZGVyQ29udGV4dCA9IHt9O1xuICBpbmplY3REYXRhUHJvdmlkZXJzKGRhdGFQcm92aWRlckNvbnRleHQsIG1hZ2ljQ29udGV4dCk7XG4gIGxldCBkYXRhMiA9IGV2YWx1YXRlKGVsLCBleHByZXNzaW9uLCB7IHNjb3BlOiBkYXRhUHJvdmlkZXJDb250ZXh0IH0pO1xuICBpZiAoZGF0YTIgPT09IHZvaWQgMCB8fCBkYXRhMiA9PT0gdHJ1ZSlcbiAgICBkYXRhMiA9IHt9O1xuICBpbmplY3RNYWdpY3MoZGF0YTIsIGVsKTtcbiAgbGV0IHJlYWN0aXZlRGF0YSA9IHJlYWN0aXZlKGRhdGEyKTtcbiAgaW5pdEludGVyY2VwdG9ycyhyZWFjdGl2ZURhdGEpO1xuICBsZXQgdW5kbyA9IGFkZFNjb3BlVG9Ob2RlKGVsLCByZWFjdGl2ZURhdGEpO1xuICByZWFjdGl2ZURhdGFbXCJpbml0XCJdICYmIGV2YWx1YXRlKGVsLCByZWFjdGl2ZURhdGFbXCJpbml0XCJdKTtcbiAgY2xlYW51cDIoKCkgPT4ge1xuICAgIHJlYWN0aXZlRGF0YVtcImRlc3Ryb3lcIl0gJiYgZXZhbHVhdGUoZWwsIHJlYWN0aXZlRGF0YVtcImRlc3Ryb3lcIl0pO1xuICAgIHVuZG8oKTtcbiAgfSk7XG59KTtcbmludGVyY2VwdENsb25lKChmcm9tLCB0bykgPT4ge1xuICBpZiAoZnJvbS5feF9kYXRhU3RhY2spIHtcbiAgICB0by5feF9kYXRhU3RhY2sgPSBmcm9tLl94X2RhdGFTdGFjaztcbiAgICB0by5zZXRBdHRyaWJ1dGUoXCJkYXRhLWhhcy1hbHBpbmUtc3RhdGVcIiwgdHJ1ZSk7XG4gIH1cbn0pO1xuZnVuY3Rpb24gc2hvdWxkU2tpcFJlZ2lzdGVyaW5nRGF0YUR1cmluZ0Nsb25lKGVsKSB7XG4gIGlmICghaXNDbG9uaW5nKVxuICAgIHJldHVybiBmYWxzZTtcbiAgaWYgKGlzQ2xvbmluZ0xlZ2FjeSlcbiAgICByZXR1cm4gdHJ1ZTtcbiAgcmV0dXJuIGVsLmhhc0F0dHJpYnV0ZShcImRhdGEtaGFzLWFscGluZS1zdGF0ZVwiKTtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2RpcmVjdGl2ZXMveC1zaG93LmpzXG5kaXJlY3RpdmUoXCJzaG93XCIsIChlbCwgeyBtb2RpZmllcnMsIGV4cHJlc3Npb24gfSwgeyBlZmZlY3Q6IGVmZmVjdDMgfSkgPT4ge1xuICBsZXQgZXZhbHVhdGUyID0gZXZhbHVhdGVMYXRlcihlbCwgZXhwcmVzc2lvbik7XG4gIGlmICghZWwuX3hfZG9IaWRlKVxuICAgIGVsLl94X2RvSGlkZSA9ICgpID0+IHtcbiAgICAgIG11dGF0ZURvbSgoKSA9PiB7XG4gICAgICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KFwiZGlzcGxheVwiLCBcIm5vbmVcIiwgbW9kaWZpZXJzLmluY2x1ZGVzKFwiaW1wb3J0YW50XCIpID8gXCJpbXBvcnRhbnRcIiA6IHZvaWQgMCk7XG4gICAgICB9KTtcbiAgICB9O1xuICBpZiAoIWVsLl94X2RvU2hvdylcbiAgICBlbC5feF9kb1Nob3cgPSAoKSA9PiB7XG4gICAgICBtdXRhdGVEb20oKCkgPT4ge1xuICAgICAgICBpZiAoZWwuc3R5bGUubGVuZ3RoID09PSAxICYmIGVsLnN0eWxlLmRpc3BsYXkgPT09IFwibm9uZVwiKSB7XG4gICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZWwuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJkaXNwbGF5XCIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuICBsZXQgaGlkZSA9ICgpID0+IHtcbiAgICBlbC5feF9kb0hpZGUoKTtcbiAgICBlbC5feF9pc1Nob3duID0gZmFsc2U7XG4gIH07XG4gIGxldCBzaG93ID0gKCkgPT4ge1xuICAgIGVsLl94X2RvU2hvdygpO1xuICAgIGVsLl94X2lzU2hvd24gPSB0cnVlO1xuICB9O1xuICBsZXQgY2xpY2tBd2F5Q29tcGF0aWJsZVNob3cgPSAoKSA9PiBzZXRUaW1lb3V0KHNob3cpO1xuICBsZXQgdG9nZ2xlID0gb25jZShcbiAgICAodmFsdWUpID0+IHZhbHVlID8gc2hvdygpIDogaGlkZSgpLFxuICAgICh2YWx1ZSkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBlbC5feF90b2dnbGVBbmRDYXNjYWRlV2l0aFRyYW5zaXRpb25zID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgZWwuX3hfdG9nZ2xlQW5kQ2FzY2FkZVdpdGhUcmFuc2l0aW9ucyhlbCwgdmFsdWUsIHNob3csIGhpZGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPyBjbGlja0F3YXlDb21wYXRpYmxlU2hvdygpIDogaGlkZSgpO1xuICAgICAgfVxuICAgIH1cbiAgKTtcbiAgbGV0IG9sZFZhbHVlO1xuICBsZXQgZmlyc3RUaW1lID0gdHJ1ZTtcbiAgZWZmZWN0MygoKSA9PiBldmFsdWF0ZTIoKHZhbHVlKSA9PiB7XG4gICAgaWYgKCFmaXJzdFRpbWUgJiYgdmFsdWUgPT09IG9sZFZhbHVlKVxuICAgICAgcmV0dXJuO1xuICAgIGlmIChtb2RpZmllcnMuaW5jbHVkZXMoXCJpbW1lZGlhdGVcIikpXG4gICAgICB2YWx1ZSA/IGNsaWNrQXdheUNvbXBhdGlibGVTaG93KCkgOiBoaWRlKCk7XG4gICAgdG9nZ2xlKHZhbHVlKTtcbiAgICBvbGRWYWx1ZSA9IHZhbHVlO1xuICAgIGZpcnN0VGltZSA9IGZhbHNlO1xuICB9KSk7XG59KTtcblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2RpcmVjdGl2ZXMveC1mb3IuanNcbmRpcmVjdGl2ZShcImZvclwiLCAoZWwsIHsgZXhwcmVzc2lvbiB9LCB7IGVmZmVjdDogZWZmZWN0MywgY2xlYW51cDogY2xlYW51cDIgfSkgPT4ge1xuICBsZXQgaXRlcmF0b3JOYW1lcyA9IHBhcnNlRm9yRXhwcmVzc2lvbihleHByZXNzaW9uKTtcbiAgbGV0IGV2YWx1YXRlSXRlbXMgPSBldmFsdWF0ZUxhdGVyKGVsLCBpdGVyYXRvck5hbWVzLml0ZW1zKTtcbiAgbGV0IGV2YWx1YXRlS2V5ID0gZXZhbHVhdGVMYXRlcihcbiAgICBlbCxcbiAgICAvLyB0aGUgeC1iaW5kOmtleSBleHByZXNzaW9uIGlzIHN0b3JlZCBmb3Igb3VyIHVzZSBpbnN0ZWFkIG9mIGV2YWx1YXRlZC5cbiAgICBlbC5feF9rZXlFeHByZXNzaW9uIHx8IFwiaW5kZXhcIlxuICApO1xuICBlbC5feF9wcmV2S2V5cyA9IFtdO1xuICBlbC5feF9sb29rdXAgPSB7fTtcbiAgZWZmZWN0MygoKSA9PiBsb29wKGVsLCBpdGVyYXRvck5hbWVzLCBldmFsdWF0ZUl0ZW1zLCBldmFsdWF0ZUtleSkpO1xuICBjbGVhbnVwMigoKSA9PiB7XG4gICAgT2JqZWN0LnZhbHVlcyhlbC5feF9sb29rdXApLmZvckVhY2goKGVsMikgPT4gbXV0YXRlRG9tKFxuICAgICAgKCkgPT4ge1xuICAgICAgICBkZXN0cm95VHJlZShlbDIpO1xuICAgICAgICBlbDIucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgKSk7XG4gICAgZGVsZXRlIGVsLl94X3ByZXZLZXlzO1xuICAgIGRlbGV0ZSBlbC5feF9sb29rdXA7XG4gIH0pO1xufSk7XG5mdW5jdGlvbiBsb29wKGVsLCBpdGVyYXRvck5hbWVzLCBldmFsdWF0ZUl0ZW1zLCBldmFsdWF0ZUtleSkge1xuICBsZXQgaXNPYmplY3QyID0gKGkpID0+IHR5cGVvZiBpID09PSBcIm9iamVjdFwiICYmICFBcnJheS5pc0FycmF5KGkpO1xuICBsZXQgdGVtcGxhdGVFbCA9IGVsO1xuICBldmFsdWF0ZUl0ZW1zKChpdGVtcykgPT4ge1xuICAgIGlmIChpc051bWVyaWMzKGl0ZW1zKSAmJiBpdGVtcyA+PSAwKSB7XG4gICAgICBpdGVtcyA9IEFycmF5LmZyb20oQXJyYXkoaXRlbXMpLmtleXMoKSwgKGkpID0+IGkgKyAxKTtcbiAgICB9XG4gICAgaWYgKGl0ZW1zID09PSB2b2lkIDApXG4gICAgICBpdGVtcyA9IFtdO1xuICAgIGxldCBsb29rdXAgPSBlbC5feF9sb29rdXA7XG4gICAgbGV0IHByZXZLZXlzID0gZWwuX3hfcHJldktleXM7XG4gICAgbGV0IHNjb3BlcyA9IFtdO1xuICAgIGxldCBrZXlzID0gW107XG4gICAgaWYgKGlzT2JqZWN0MihpdGVtcykpIHtcbiAgICAgIGl0ZW1zID0gT2JqZWN0LmVudHJpZXMoaXRlbXMpLm1hcCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgIGxldCBzY29wZTIgPSBnZXRJdGVyYXRpb25TY29wZVZhcmlhYmxlcyhpdGVyYXRvck5hbWVzLCB2YWx1ZSwga2V5LCBpdGVtcyk7XG4gICAgICAgIGV2YWx1YXRlS2V5KCh2YWx1ZTIpID0+IHtcbiAgICAgICAgICBpZiAoa2V5cy5pbmNsdWRlcyh2YWx1ZTIpKVxuICAgICAgICAgICAgd2FybihcIkR1cGxpY2F0ZSBrZXkgb24geC1mb3JcIiwgZWwpO1xuICAgICAgICAgIGtleXMucHVzaCh2YWx1ZTIpO1xuICAgICAgICB9LCB7IHNjb3BlOiB7IGluZGV4OiBrZXksIC4uLnNjb3BlMiB9IH0pO1xuICAgICAgICBzY29wZXMucHVzaChzY29wZTIpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHNjb3BlMiA9IGdldEl0ZXJhdGlvblNjb3BlVmFyaWFibGVzKGl0ZXJhdG9yTmFtZXMsIGl0ZW1zW2ldLCBpLCBpdGVtcyk7XG4gICAgICAgIGV2YWx1YXRlS2V5KCh2YWx1ZSkgPT4ge1xuICAgICAgICAgIGlmIChrZXlzLmluY2x1ZGVzKHZhbHVlKSlcbiAgICAgICAgICAgIHdhcm4oXCJEdXBsaWNhdGUga2V5IG9uIHgtZm9yXCIsIGVsKTtcbiAgICAgICAgICBrZXlzLnB1c2godmFsdWUpO1xuICAgICAgICB9LCB7IHNjb3BlOiB7IGluZGV4OiBpLCAuLi5zY29wZTIgfSB9KTtcbiAgICAgICAgc2NvcGVzLnB1c2goc2NvcGUyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IGFkZHMgPSBbXTtcbiAgICBsZXQgbW92ZXMgPSBbXTtcbiAgICBsZXQgcmVtb3ZlcyA9IFtdO1xuICAgIGxldCBzYW1lcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJldktleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBrZXkgPSBwcmV2S2V5c1tpXTtcbiAgICAgIGlmIChrZXlzLmluZGV4T2Yoa2V5KSA9PT0gLTEpXG4gICAgICAgIHJlbW92ZXMucHVzaChrZXkpO1xuICAgIH1cbiAgICBwcmV2S2V5cyA9IHByZXZLZXlzLmZpbHRlcigoa2V5KSA9PiAhcmVtb3Zlcy5pbmNsdWRlcyhrZXkpKTtcbiAgICBsZXQgbGFzdEtleSA9IFwidGVtcGxhdGVcIjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBrZXkgPSBrZXlzW2ldO1xuICAgICAgbGV0IHByZXZJbmRleCA9IHByZXZLZXlzLmluZGV4T2Yoa2V5KTtcbiAgICAgIGlmIChwcmV2SW5kZXggPT09IC0xKSB7XG4gICAgICAgIHByZXZLZXlzLnNwbGljZShpLCAwLCBrZXkpO1xuICAgICAgICBhZGRzLnB1c2goW2xhc3RLZXksIGldKTtcbiAgICAgIH0gZWxzZSBpZiAocHJldkluZGV4ICE9PSBpKSB7XG4gICAgICAgIGxldCBrZXlJblNwb3QgPSBwcmV2S2V5cy5zcGxpY2UoaSwgMSlbMF07XG4gICAgICAgIGxldCBrZXlGb3JTcG90ID0gcHJldktleXMuc3BsaWNlKHByZXZJbmRleCAtIDEsIDEpWzBdO1xuICAgICAgICBwcmV2S2V5cy5zcGxpY2UoaSwgMCwga2V5Rm9yU3BvdCk7XG4gICAgICAgIHByZXZLZXlzLnNwbGljZShwcmV2SW5kZXgsIDAsIGtleUluU3BvdCk7XG4gICAgICAgIG1vdmVzLnB1c2goW2tleUluU3BvdCwga2V5Rm9yU3BvdF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2FtZXMucHVzaChrZXkpO1xuICAgICAgfVxuICAgICAgbGFzdEtleSA9IGtleTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZW1vdmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQga2V5ID0gcmVtb3Zlc1tpXTtcbiAgICAgIGlmICghKGtleSBpbiBsb29rdXApKVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIG11dGF0ZURvbSgoKSA9PiB7XG4gICAgICAgIGRlc3Ryb3lUcmVlKGxvb2t1cFtrZXldKTtcbiAgICAgICAgbG9va3VwW2tleV0ucmVtb3ZlKCk7XG4gICAgICB9KTtcbiAgICAgIGRlbGV0ZSBsb29rdXBba2V5XTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtb3Zlcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IFtrZXlJblNwb3QsIGtleUZvclNwb3RdID0gbW92ZXNbaV07XG4gICAgICBsZXQgZWxJblNwb3QgPSBsb29rdXBba2V5SW5TcG90XTtcbiAgICAgIGxldCBlbEZvclNwb3QgPSBsb29rdXBba2V5Rm9yU3BvdF07XG4gICAgICBsZXQgbWFya2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIG11dGF0ZURvbSgoKSA9PiB7XG4gICAgICAgIGlmICghZWxGb3JTcG90KVxuICAgICAgICAgIHdhcm4oYHgtZm9yIFwiOmtleVwiIGlzIHVuZGVmaW5lZCBvciBpbnZhbGlkYCwgdGVtcGxhdGVFbCwga2V5Rm9yU3BvdCwgbG9va3VwKTtcbiAgICAgICAgZWxGb3JTcG90LmFmdGVyKG1hcmtlcik7XG4gICAgICAgIGVsSW5TcG90LmFmdGVyKGVsRm9yU3BvdCk7XG4gICAgICAgIGVsRm9yU3BvdC5feF9jdXJyZW50SWZFbCAmJiBlbEZvclNwb3QuYWZ0ZXIoZWxGb3JTcG90Ll94X2N1cnJlbnRJZkVsKTtcbiAgICAgICAgbWFya2VyLmJlZm9yZShlbEluU3BvdCk7XG4gICAgICAgIGVsSW5TcG90Ll94X2N1cnJlbnRJZkVsICYmIGVsSW5TcG90LmFmdGVyKGVsSW5TcG90Ll94X2N1cnJlbnRJZkVsKTtcbiAgICAgICAgbWFya2VyLnJlbW92ZSgpO1xuICAgICAgfSk7XG4gICAgICBlbEZvclNwb3QuX3hfcmVmcmVzaFhGb3JTY29wZShzY29wZXNba2V5cy5pbmRleE9mKGtleUZvclNwb3QpXSk7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWRkcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IFtsYXN0S2V5MiwgaW5kZXhdID0gYWRkc1tpXTtcbiAgICAgIGxldCBsYXN0RWwgPSBsYXN0S2V5MiA9PT0gXCJ0ZW1wbGF0ZVwiID8gdGVtcGxhdGVFbCA6IGxvb2t1cFtsYXN0S2V5Ml07XG4gICAgICBpZiAobGFzdEVsLl94X2N1cnJlbnRJZkVsKVxuICAgICAgICBsYXN0RWwgPSBsYXN0RWwuX3hfY3VycmVudElmRWw7XG4gICAgICBsZXQgc2NvcGUyID0gc2NvcGVzW2luZGV4XTtcbiAgICAgIGxldCBrZXkgPSBrZXlzW2luZGV4XTtcbiAgICAgIGxldCBjbG9uZTIgPSBkb2N1bWVudC5pbXBvcnROb2RlKHRlbXBsYXRlRWwuY29udGVudCwgdHJ1ZSkuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICBsZXQgcmVhY3RpdmVTY29wZSA9IHJlYWN0aXZlKHNjb3BlMik7XG4gICAgICBhZGRTY29wZVRvTm9kZShjbG9uZTIsIHJlYWN0aXZlU2NvcGUsIHRlbXBsYXRlRWwpO1xuICAgICAgY2xvbmUyLl94X3JlZnJlc2hYRm9yU2NvcGUgPSAobmV3U2NvcGUpID0+IHtcbiAgICAgICAgT2JqZWN0LmVudHJpZXMobmV3U2NvcGUpLmZvckVhY2goKFtrZXkyLCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICByZWFjdGl2ZVNjb3BlW2tleTJdID0gdmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICAgIG11dGF0ZURvbSgoKSA9PiB7XG4gICAgICAgIGxhc3RFbC5hZnRlcihjbG9uZTIpO1xuICAgICAgICBza2lwRHVyaW5nQ2xvbmUoKCkgPT4gaW5pdFRyZWUoY2xvbmUyKSkoKTtcbiAgICAgIH0pO1xuICAgICAgaWYgKHR5cGVvZiBrZXkgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgd2FybihcIngtZm9yIGtleSBjYW5ub3QgYmUgYW4gb2JqZWN0LCBpdCBtdXN0IGJlIGEgc3RyaW5nIG9yIGFuIGludGVnZXJcIiwgdGVtcGxhdGVFbCk7XG4gICAgICB9XG4gICAgICBsb29rdXBba2V5XSA9IGNsb25lMjtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgbG9va3VwW3NhbWVzW2ldXS5feF9yZWZyZXNoWEZvclNjb3BlKHNjb3Blc1trZXlzLmluZGV4T2Yoc2FtZXNbaV0pXSk7XG4gICAgfVxuICAgIHRlbXBsYXRlRWwuX3hfcHJldktleXMgPSBrZXlzO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHBhcnNlRm9yRXhwcmVzc2lvbihleHByZXNzaW9uKSB7XG4gIGxldCBmb3JJdGVyYXRvclJFID0gLywoW14sXFx9XFxdXSopKD86LChbXixcXH1cXF1dKikpPyQvO1xuICBsZXQgc3RyaXBQYXJlbnNSRSA9IC9eXFxzKlxcKHxcXClcXHMqJC9nO1xuICBsZXQgZm9yQWxpYXNSRSA9IC8oW1xcc1xcU10qPylcXHMrKD86aW58b2YpXFxzKyhbXFxzXFxTXSopLztcbiAgbGV0IGluTWF0Y2ggPSBleHByZXNzaW9uLm1hdGNoKGZvckFsaWFzUkUpO1xuICBpZiAoIWluTWF0Y2gpXG4gICAgcmV0dXJuO1xuICBsZXQgcmVzID0ge307XG4gIHJlcy5pdGVtcyA9IGluTWF0Y2hbMl0udHJpbSgpO1xuICBsZXQgaXRlbSA9IGluTWF0Y2hbMV0ucmVwbGFjZShzdHJpcFBhcmVuc1JFLCBcIlwiKS50cmltKCk7XG4gIGxldCBpdGVyYXRvck1hdGNoID0gaXRlbS5tYXRjaChmb3JJdGVyYXRvclJFKTtcbiAgaWYgKGl0ZXJhdG9yTWF0Y2gpIHtcbiAgICByZXMuaXRlbSA9IGl0ZW0ucmVwbGFjZShmb3JJdGVyYXRvclJFLCBcIlwiKS50cmltKCk7XG4gICAgcmVzLmluZGV4ID0gaXRlcmF0b3JNYXRjaFsxXS50cmltKCk7XG4gICAgaWYgKGl0ZXJhdG9yTWF0Y2hbMl0pIHtcbiAgICAgIHJlcy5jb2xsZWN0aW9uID0gaXRlcmF0b3JNYXRjaFsyXS50cmltKCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJlcy5pdGVtID0gaXRlbTtcbiAgfVxuICByZXR1cm4gcmVzO1xufVxuZnVuY3Rpb24gZ2V0SXRlcmF0aW9uU2NvcGVWYXJpYWJsZXMoaXRlcmF0b3JOYW1lcywgaXRlbSwgaW5kZXgsIGl0ZW1zKSB7XG4gIGxldCBzY29wZVZhcmlhYmxlcyA9IHt9O1xuICBpZiAoL15cXFsuKlxcXSQvLnRlc3QoaXRlcmF0b3JOYW1lcy5pdGVtKSAmJiBBcnJheS5pc0FycmF5KGl0ZW0pKSB7XG4gICAgbGV0IG5hbWVzID0gaXRlcmF0b3JOYW1lcy5pdGVtLnJlcGxhY2UoXCJbXCIsIFwiXCIpLnJlcGxhY2UoXCJdXCIsIFwiXCIpLnNwbGl0KFwiLFwiKS5tYXAoKGkpID0+IGkudHJpbSgpKTtcbiAgICBuYW1lcy5mb3JFYWNoKChuYW1lLCBpKSA9PiB7XG4gICAgICBzY29wZVZhcmlhYmxlc1tuYW1lXSA9IGl0ZW1baV07XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAoL15cXHsuKlxcfSQvLnRlc3QoaXRlcmF0b3JOYW1lcy5pdGVtKSAmJiAhQXJyYXkuaXNBcnJheShpdGVtKSAmJiB0eXBlb2YgaXRlbSA9PT0gXCJvYmplY3RcIikge1xuICAgIGxldCBuYW1lcyA9IGl0ZXJhdG9yTmFtZXMuaXRlbS5yZXBsYWNlKFwie1wiLCBcIlwiKS5yZXBsYWNlKFwifVwiLCBcIlwiKS5zcGxpdChcIixcIikubWFwKChpKSA9PiBpLnRyaW0oKSk7XG4gICAgbmFtZXMuZm9yRWFjaCgobmFtZSkgPT4ge1xuICAgICAgc2NvcGVWYXJpYWJsZXNbbmFtZV0gPSBpdGVtW25hbWVdO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHNjb3BlVmFyaWFibGVzW2l0ZXJhdG9yTmFtZXMuaXRlbV0gPSBpdGVtO1xuICB9XG4gIGlmIChpdGVyYXRvck5hbWVzLmluZGV4KVxuICAgIHNjb3BlVmFyaWFibGVzW2l0ZXJhdG9yTmFtZXMuaW5kZXhdID0gaW5kZXg7XG4gIGlmIChpdGVyYXRvck5hbWVzLmNvbGxlY3Rpb24pXG4gICAgc2NvcGVWYXJpYWJsZXNbaXRlcmF0b3JOYW1lcy5jb2xsZWN0aW9uXSA9IGl0ZW1zO1xuICByZXR1cm4gc2NvcGVWYXJpYWJsZXM7XG59XG5mdW5jdGlvbiBpc051bWVyaWMzKHN1YmplY3QpIHtcbiAgcmV0dXJuICFBcnJheS5pc0FycmF5KHN1YmplY3QpICYmICFpc05hTihzdWJqZWN0KTtcbn1cblxuLy8gcGFja2FnZXMvYWxwaW5lanMvc3JjL2RpcmVjdGl2ZXMveC1yZWYuanNcbmZ1bmN0aW9uIGhhbmRsZXIzKCkge1xufVxuaGFuZGxlcjMuaW5saW5lID0gKGVsLCB7IGV4cHJlc3Npb24gfSwgeyBjbGVhbnVwOiBjbGVhbnVwMiB9KSA9PiB7XG4gIGxldCByb290ID0gY2xvc2VzdFJvb3QoZWwpO1xuICBpZiAoIXJvb3QuX3hfcmVmcylcbiAgICByb290Ll94X3JlZnMgPSB7fTtcbiAgcm9vdC5feF9yZWZzW2V4cHJlc3Npb25dID0gZWw7XG4gIGNsZWFudXAyKCgpID0+IGRlbGV0ZSByb290Ll94X3JlZnNbZXhwcmVzc2lvbl0pO1xufTtcbmRpcmVjdGl2ZShcInJlZlwiLCBoYW5kbGVyMyk7XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9kaXJlY3RpdmVzL3gtaWYuanNcbmRpcmVjdGl2ZShcImlmXCIsIChlbCwgeyBleHByZXNzaW9uIH0sIHsgZWZmZWN0OiBlZmZlY3QzLCBjbGVhbnVwOiBjbGVhbnVwMiB9KSA9PiB7XG4gIGlmIChlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgIT09IFwidGVtcGxhdGVcIilcbiAgICB3YXJuKFwieC1pZiBjYW4gb25seSBiZSB1c2VkIG9uIGEgPHRlbXBsYXRlPiB0YWdcIiwgZWwpO1xuICBsZXQgZXZhbHVhdGUyID0gZXZhbHVhdGVMYXRlcihlbCwgZXhwcmVzc2lvbik7XG4gIGxldCBzaG93ID0gKCkgPT4ge1xuICAgIGlmIChlbC5feF9jdXJyZW50SWZFbClcbiAgICAgIHJldHVybiBlbC5feF9jdXJyZW50SWZFbDtcbiAgICBsZXQgY2xvbmUyID0gZWwuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgYWRkU2NvcGVUb05vZGUoY2xvbmUyLCB7fSwgZWwpO1xuICAgIG11dGF0ZURvbSgoKSA9PiB7XG4gICAgICBlbC5hZnRlcihjbG9uZTIpO1xuICAgICAgc2tpcER1cmluZ0Nsb25lKCgpID0+IGluaXRUcmVlKGNsb25lMikpKCk7XG4gICAgfSk7XG4gICAgZWwuX3hfY3VycmVudElmRWwgPSBjbG9uZTI7XG4gICAgZWwuX3hfdW5kb0lmID0gKCkgPT4ge1xuICAgICAgbXV0YXRlRG9tKCgpID0+IHtcbiAgICAgICAgZGVzdHJveVRyZWUoY2xvbmUyKTtcbiAgICAgICAgY2xvbmUyLnJlbW92ZSgpO1xuICAgICAgfSk7XG4gICAgICBkZWxldGUgZWwuX3hfY3VycmVudElmRWw7XG4gICAgfTtcbiAgICByZXR1cm4gY2xvbmUyO1xuICB9O1xuICBsZXQgaGlkZSA9ICgpID0+IHtcbiAgICBpZiAoIWVsLl94X3VuZG9JZilcbiAgICAgIHJldHVybjtcbiAgICBlbC5feF91bmRvSWYoKTtcbiAgICBkZWxldGUgZWwuX3hfdW5kb0lmO1xuICB9O1xuICBlZmZlY3QzKCgpID0+IGV2YWx1YXRlMigodmFsdWUpID0+IHtcbiAgICB2YWx1ZSA/IHNob3coKSA6IGhpZGUoKTtcbiAgfSkpO1xuICBjbGVhbnVwMigoKSA9PiBlbC5feF91bmRvSWYgJiYgZWwuX3hfdW5kb0lmKCkpO1xufSk7XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9kaXJlY3RpdmVzL3gtaWQuanNcbmRpcmVjdGl2ZShcImlkXCIsIChlbCwgeyBleHByZXNzaW9uIH0sIHsgZXZhbHVhdGU6IGV2YWx1YXRlMiB9KSA9PiB7XG4gIGxldCBuYW1lcyA9IGV2YWx1YXRlMihleHByZXNzaW9uKTtcbiAgbmFtZXMuZm9yRWFjaCgobmFtZSkgPT4gc2V0SWRSb290KGVsLCBuYW1lKSk7XG59KTtcbmludGVyY2VwdENsb25lKChmcm9tLCB0bykgPT4ge1xuICBpZiAoZnJvbS5feF9pZHMpIHtcbiAgICB0by5feF9pZHMgPSBmcm9tLl94X2lkcztcbiAgfVxufSk7XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9kaXJlY3RpdmVzL3gtb24uanNcbm1hcEF0dHJpYnV0ZXMoc3RhcnRpbmdXaXRoKFwiQFwiLCBpbnRvKHByZWZpeChcIm9uOlwiKSkpKTtcbmRpcmVjdGl2ZShcIm9uXCIsIHNraXBEdXJpbmdDbG9uZSgoZWwsIHsgdmFsdWUsIG1vZGlmaWVycywgZXhwcmVzc2lvbiB9LCB7IGNsZWFudXA6IGNsZWFudXAyIH0pID0+IHtcbiAgbGV0IGV2YWx1YXRlMiA9IGV4cHJlc3Npb24gPyBldmFsdWF0ZUxhdGVyKGVsLCBleHByZXNzaW9uKSA6ICgpID0+IHtcbiAgfTtcbiAgaWYgKGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJ0ZW1wbGF0ZVwiKSB7XG4gICAgaWYgKCFlbC5feF9mb3J3YXJkRXZlbnRzKVxuICAgICAgZWwuX3hfZm9yd2FyZEV2ZW50cyA9IFtdO1xuICAgIGlmICghZWwuX3hfZm9yd2FyZEV2ZW50cy5pbmNsdWRlcyh2YWx1ZSkpXG4gICAgICBlbC5feF9mb3J3YXJkRXZlbnRzLnB1c2godmFsdWUpO1xuICB9XG4gIGxldCByZW1vdmVMaXN0ZW5lciA9IG9uKGVsLCB2YWx1ZSwgbW9kaWZpZXJzLCAoZSkgPT4ge1xuICAgIGV2YWx1YXRlMigoKSA9PiB7XG4gICAgfSwgeyBzY29wZTogeyBcIiRldmVudFwiOiBlIH0sIHBhcmFtczogW2VdIH0pO1xuICB9KTtcbiAgY2xlYW51cDIoKCkgPT4gcmVtb3ZlTGlzdGVuZXIoKSk7XG59KSk7XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9kaXJlY3RpdmVzL2luZGV4LmpzXG53YXJuTWlzc2luZ1BsdWdpbkRpcmVjdGl2ZShcIkNvbGxhcHNlXCIsIFwiY29sbGFwc2VcIiwgXCJjb2xsYXBzZVwiKTtcbndhcm5NaXNzaW5nUGx1Z2luRGlyZWN0aXZlKFwiSW50ZXJzZWN0XCIsIFwiaW50ZXJzZWN0XCIsIFwiaW50ZXJzZWN0XCIpO1xud2Fybk1pc3NpbmdQbHVnaW5EaXJlY3RpdmUoXCJGb2N1c1wiLCBcInRyYXBcIiwgXCJmb2N1c1wiKTtcbndhcm5NaXNzaW5nUGx1Z2luRGlyZWN0aXZlKFwiTWFza1wiLCBcIm1hc2tcIiwgXCJtYXNrXCIpO1xuZnVuY3Rpb24gd2Fybk1pc3NpbmdQbHVnaW5EaXJlY3RpdmUobmFtZSwgZGlyZWN0aXZlTmFtZSwgc2x1Zykge1xuICBkaXJlY3RpdmUoZGlyZWN0aXZlTmFtZSwgKGVsKSA9PiB3YXJuKGBZb3UgY2FuJ3QgdXNlIFt4LSR7ZGlyZWN0aXZlTmFtZX1dIHdpdGhvdXQgZmlyc3QgaW5zdGFsbGluZyB0aGUgXCIke25hbWV9XCIgcGx1Z2luIGhlcmU6IGh0dHBzOi8vYWxwaW5lanMuZGV2L3BsdWdpbnMvJHtzbHVnfWAsIGVsKSk7XG59XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL3NyYy9pbmRleC5qc1xuYWxwaW5lX2RlZmF1bHQuc2V0RXZhbHVhdG9yKG5vcm1hbEV2YWx1YXRvcik7XG5hbHBpbmVfZGVmYXVsdC5zZXRSZWFjdGl2aXR5RW5naW5lKHsgcmVhY3RpdmU6IHJlYWN0aXZlMiwgZWZmZWN0OiBlZmZlY3QyLCByZWxlYXNlOiBzdG9wLCByYXc6IHRvUmF3IH0pO1xudmFyIHNyY19kZWZhdWx0ID0gYWxwaW5lX2RlZmF1bHQ7XG5cbi8vIHBhY2thZ2VzL2FscGluZWpzL2J1aWxkcy9tb2R1bGUuanNcbnZhciBtb2R1bGVfZGVmYXVsdCA9IHNyY19kZWZhdWx0O1xuZXhwb3J0IHtcbiAgc3JjX2RlZmF1bHQgYXMgQWxwaW5lLFxuICBtb2R1bGVfZGVmYXVsdCBhcyBkZWZhdWx0XG59O1xuIiwgInZhciBhZGFwdGVycyA9IHtcbiAgbG9nZ2VyOiB0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiA/IGNvbnNvbGUgOiB1bmRlZmluZWQsXG4gIFdlYlNvY2tldDogdHlwZW9mIFdlYlNvY2tldCAhPT0gXCJ1bmRlZmluZWRcIiA/IFdlYlNvY2tldCA6IHVuZGVmaW5lZFxufTtcblxudmFyIGxvZ2dlciA9IHtcbiAgbG9nKC4uLm1lc3NhZ2VzKSB7XG4gICAgaWYgKHRoaXMuZW5hYmxlZCkge1xuICAgICAgbWVzc2FnZXMucHVzaChEYXRlLm5vdygpKTtcbiAgICAgIGFkYXB0ZXJzLmxvZ2dlci5sb2coXCJbQWN0aW9uQ2FibGVdXCIsIC4uLm1lc3NhZ2VzKTtcbiAgICB9XG4gIH1cbn07XG5cbmNvbnN0IG5vdyA9ICgpID0+IChuZXcgRGF0ZSkuZ2V0VGltZSgpO1xuXG5jb25zdCBzZWNvbmRzU2luY2UgPSB0aW1lID0+IChub3coKSAtIHRpbWUpIC8gMWUzO1xuXG5jbGFzcyBDb25uZWN0aW9uTW9uaXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbm5lY3Rpb24pIHtcbiAgICB0aGlzLnZpc2liaWxpdHlEaWRDaGFuZ2UgPSB0aGlzLnZpc2liaWxpdHlEaWRDaGFuZ2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uO1xuICAgIHRoaXMucmVjb25uZWN0QXR0ZW1wdHMgPSAwO1xuICB9XG4gIHN0YXJ0KCkge1xuICAgIGlmICghdGhpcy5pc1J1bm5pbmcoKSkge1xuICAgICAgdGhpcy5zdGFydGVkQXQgPSBub3coKTtcbiAgICAgIGRlbGV0ZSB0aGlzLnN0b3BwZWRBdDtcbiAgICAgIHRoaXMuc3RhcnRQb2xsaW5nKCk7XG4gICAgICBhZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLnZpc2liaWxpdHlEaWRDaGFuZ2UpO1xuICAgICAgbG9nZ2VyLmxvZyhgQ29ubmVjdGlvbk1vbml0b3Igc3RhcnRlZC4gc3RhbGUgdGhyZXNob2xkID0gJHt0aGlzLmNvbnN0cnVjdG9yLnN0YWxlVGhyZXNob2xkfSBzYCk7XG4gICAgfVxuICB9XG4gIHN0b3AoKSB7XG4gICAgaWYgKHRoaXMuaXNSdW5uaW5nKCkpIHtcbiAgICAgIHRoaXMuc3RvcHBlZEF0ID0gbm93KCk7XG4gICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XG4gICAgICByZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLnZpc2liaWxpdHlEaWRDaGFuZ2UpO1xuICAgICAgbG9nZ2VyLmxvZyhcIkNvbm5lY3Rpb25Nb25pdG9yIHN0b3BwZWRcIik7XG4gICAgfVxuICB9XG4gIGlzUnVubmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5zdGFydGVkQXQgJiYgIXRoaXMuc3RvcHBlZEF0O1xuICB9XG4gIHJlY29yZE1lc3NhZ2UoKSB7XG4gICAgdGhpcy5waW5nZWRBdCA9IG5vdygpO1xuICB9XG4gIHJlY29yZENvbm5lY3QoKSB7XG4gICAgdGhpcy5yZWNvbm5lY3RBdHRlbXB0cyA9IDA7XG4gICAgZGVsZXRlIHRoaXMuZGlzY29ubmVjdGVkQXQ7XG4gICAgbG9nZ2VyLmxvZyhcIkNvbm5lY3Rpb25Nb25pdG9yIHJlY29yZGVkIGNvbm5lY3RcIik7XG4gIH1cbiAgcmVjb3JkRGlzY29ubmVjdCgpIHtcbiAgICB0aGlzLmRpc2Nvbm5lY3RlZEF0ID0gbm93KCk7XG4gICAgbG9nZ2VyLmxvZyhcIkNvbm5lY3Rpb25Nb25pdG9yIHJlY29yZGVkIGRpc2Nvbm5lY3RcIik7XG4gIH1cbiAgc3RhcnRQb2xsaW5nKCkge1xuICAgIHRoaXMuc3RvcFBvbGxpbmcoKTtcbiAgICB0aGlzLnBvbGwoKTtcbiAgfVxuICBzdG9wUG9sbGluZygpIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5wb2xsVGltZW91dCk7XG4gIH1cbiAgcG9sbCgpIHtcbiAgICB0aGlzLnBvbGxUaW1lb3V0ID0gc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgdGhpcy5yZWNvbm5lY3RJZlN0YWxlKCk7XG4gICAgICB0aGlzLnBvbGwoKTtcbiAgICB9KSwgdGhpcy5nZXRQb2xsSW50ZXJ2YWwoKSk7XG4gIH1cbiAgZ2V0UG9sbEludGVydmFsKCkge1xuICAgIGNvbnN0IHtzdGFsZVRocmVzaG9sZDogc3RhbGVUaHJlc2hvbGQsIHJlY29ubmVjdGlvbkJhY2tvZmZSYXRlOiByZWNvbm5lY3Rpb25CYWNrb2ZmUmF0ZX0gPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgIGNvbnN0IGJhY2tvZmYgPSBNYXRoLnBvdygxICsgcmVjb25uZWN0aW9uQmFja29mZlJhdGUsIE1hdGgubWluKHRoaXMucmVjb25uZWN0QXR0ZW1wdHMsIDEwKSk7XG4gICAgY29uc3Qgaml0dGVyTWF4ID0gdGhpcy5yZWNvbm5lY3RBdHRlbXB0cyA9PT0gMCA/IDEgOiByZWNvbm5lY3Rpb25CYWNrb2ZmUmF0ZTtcbiAgICBjb25zdCBqaXR0ZXIgPSBqaXR0ZXJNYXggKiBNYXRoLnJhbmRvbSgpO1xuICAgIHJldHVybiBzdGFsZVRocmVzaG9sZCAqIDFlMyAqIGJhY2tvZmYgKiAoMSArIGppdHRlcik7XG4gIH1cbiAgcmVjb25uZWN0SWZTdGFsZSgpIHtcbiAgICBpZiAodGhpcy5jb25uZWN0aW9uSXNTdGFsZSgpKSB7XG4gICAgICBsb2dnZXIubG9nKGBDb25uZWN0aW9uTW9uaXRvciBkZXRlY3RlZCBzdGFsZSBjb25uZWN0aW9uLiByZWNvbm5lY3RBdHRlbXB0cyA9ICR7dGhpcy5yZWNvbm5lY3RBdHRlbXB0c30sIHRpbWUgc3RhbGUgPSAke3NlY29uZHNTaW5jZSh0aGlzLnJlZnJlc2hlZEF0KX0gcywgc3RhbGUgdGhyZXNob2xkID0gJHt0aGlzLmNvbnN0cnVjdG9yLnN0YWxlVGhyZXNob2xkfSBzYCk7XG4gICAgICB0aGlzLnJlY29ubmVjdEF0dGVtcHRzKys7XG4gICAgICBpZiAodGhpcy5kaXNjb25uZWN0ZWRSZWNlbnRseSgpKSB7XG4gICAgICAgIGxvZ2dlci5sb2coYENvbm5lY3Rpb25Nb25pdG9yIHNraXBwaW5nIHJlb3BlbmluZyByZWNlbnQgZGlzY29ubmVjdC4gdGltZSBkaXNjb25uZWN0ZWQgPSAke3NlY29uZHNTaW5jZSh0aGlzLmRpc2Nvbm5lY3RlZEF0KX0gc2ApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhcIkNvbm5lY3Rpb25Nb25pdG9yIHJlb3BlbmluZ1wiKTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uLnJlb3BlbigpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBnZXQgcmVmcmVzaGVkQXQoKSB7XG4gICAgcmV0dXJuIHRoaXMucGluZ2VkQXQgPyB0aGlzLnBpbmdlZEF0IDogdGhpcy5zdGFydGVkQXQ7XG4gIH1cbiAgY29ubmVjdGlvbklzU3RhbGUoKSB7XG4gICAgcmV0dXJuIHNlY29uZHNTaW5jZSh0aGlzLnJlZnJlc2hlZEF0KSA+IHRoaXMuY29uc3RydWN0b3Iuc3RhbGVUaHJlc2hvbGQ7XG4gIH1cbiAgZGlzY29ubmVjdGVkUmVjZW50bHkoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGlzY29ubmVjdGVkQXQgJiYgc2Vjb25kc1NpbmNlKHRoaXMuZGlzY29ubmVjdGVkQXQpIDwgdGhpcy5jb25zdHJ1Y3Rvci5zdGFsZVRocmVzaG9sZDtcbiAgfVxuICB2aXNpYmlsaXR5RGlkQ2hhbmdlKCkge1xuICAgIGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09IFwidmlzaWJsZVwiKSB7XG4gICAgICBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb25Jc1N0YWxlKCkgfHwgIXRoaXMuY29ubmVjdGlvbi5pc09wZW4oKSkge1xuICAgICAgICAgIGxvZ2dlci5sb2coYENvbm5lY3Rpb25Nb25pdG9yIHJlb3BlbmluZyBzdGFsZSBjb25uZWN0aW9uIG9uIHZpc2liaWxpdHljaGFuZ2UuIHZpc2liaWxpdHlTdGF0ZSA9ICR7ZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlfWApO1xuICAgICAgICAgIHRoaXMuY29ubmVjdGlvbi5yZW9wZW4oKTtcbiAgICAgICAgfVxuICAgICAgfSksIDIwMCk7XG4gICAgfVxuICB9XG59XG5cbkNvbm5lY3Rpb25Nb25pdG9yLnN0YWxlVGhyZXNob2xkID0gNjtcblxuQ29ubmVjdGlvbk1vbml0b3IucmVjb25uZWN0aW9uQmFja29mZlJhdGUgPSAuMTU7XG5cbnZhciBJTlRFUk5BTCA9IHtcbiAgbWVzc2FnZV90eXBlczoge1xuICAgIHdlbGNvbWU6IFwid2VsY29tZVwiLFxuICAgIGRpc2Nvbm5lY3Q6IFwiZGlzY29ubmVjdFwiLFxuICAgIHBpbmc6IFwicGluZ1wiLFxuICAgIGNvbmZpcm1hdGlvbjogXCJjb25maXJtX3N1YnNjcmlwdGlvblwiLFxuICAgIHJlamVjdGlvbjogXCJyZWplY3Rfc3Vic2NyaXB0aW9uXCJcbiAgfSxcbiAgZGlzY29ubmVjdF9yZWFzb25zOiB7XG4gICAgdW5hdXRob3JpemVkOiBcInVuYXV0aG9yaXplZFwiLFxuICAgIGludmFsaWRfcmVxdWVzdDogXCJpbnZhbGlkX3JlcXVlc3RcIixcbiAgICBzZXJ2ZXJfcmVzdGFydDogXCJzZXJ2ZXJfcmVzdGFydFwiLFxuICAgIHJlbW90ZTogXCJyZW1vdGVcIlxuICB9LFxuICBkZWZhdWx0X21vdW50X3BhdGg6IFwiL2NhYmxlXCIsXG4gIHByb3RvY29sczogWyBcImFjdGlvbmNhYmxlLXYxLWpzb25cIiwgXCJhY3Rpb25jYWJsZS11bnN1cHBvcnRlZFwiIF1cbn07XG5cbmNvbnN0IHttZXNzYWdlX3R5cGVzOiBtZXNzYWdlX3R5cGVzLCBwcm90b2NvbHM6IHByb3RvY29sc30gPSBJTlRFUk5BTDtcblxuY29uc3Qgc3VwcG9ydGVkUHJvdG9jb2xzID0gcHJvdG9jb2xzLnNsaWNlKDAsIHByb3RvY29scy5sZW5ndGggLSAxKTtcblxuY29uc3QgaW5kZXhPZiA9IFtdLmluZGV4T2Y7XG5cbmNsYXNzIENvbm5lY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcihjb25zdW1lcikge1xuICAgIHRoaXMub3BlbiA9IHRoaXMub3Blbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY29uc3VtZXIgPSBjb25zdW1lcjtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSB0aGlzLmNvbnN1bWVyLnN1YnNjcmlwdGlvbnM7XG4gICAgdGhpcy5tb25pdG9yID0gbmV3IENvbm5lY3Rpb25Nb25pdG9yKHRoaXMpO1xuICAgIHRoaXMuZGlzY29ubmVjdGVkID0gdHJ1ZTtcbiAgfVxuICBzZW5kKGRhdGEpIHtcbiAgICBpZiAodGhpcy5pc09wZW4oKSkge1xuICAgICAgdGhpcy53ZWJTb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICBvcGVuKCkge1xuICAgIGlmICh0aGlzLmlzQWN0aXZlKCkpIHtcbiAgICAgIGxvZ2dlci5sb2coYEF0dGVtcHRlZCB0byBvcGVuIFdlYlNvY2tldCwgYnV0IGV4aXN0aW5nIHNvY2tldCBpcyAke3RoaXMuZ2V0U3RhdGUoKX1gKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc29ja2V0UHJvdG9jb2xzID0gWyAuLi5wcm90b2NvbHMsIC4uLnRoaXMuY29uc3VtZXIuc3VicHJvdG9jb2xzIHx8IFtdIF07XG4gICAgICBsb2dnZXIubG9nKGBPcGVuaW5nIFdlYlNvY2tldCwgY3VycmVudCBzdGF0ZSBpcyAke3RoaXMuZ2V0U3RhdGUoKX0sIHN1YnByb3RvY29sczogJHtzb2NrZXRQcm90b2NvbHN9YCk7XG4gICAgICBpZiAodGhpcy53ZWJTb2NrZXQpIHtcbiAgICAgICAgdGhpcy51bmluc3RhbGxFdmVudEhhbmRsZXJzKCk7XG4gICAgICB9XG4gICAgICB0aGlzLndlYlNvY2tldCA9IG5ldyBhZGFwdGVycy5XZWJTb2NrZXQodGhpcy5jb25zdW1lci51cmwsIHNvY2tldFByb3RvY29scyk7XG4gICAgICB0aGlzLmluc3RhbGxFdmVudEhhbmRsZXJzKCk7XG4gICAgICB0aGlzLm1vbml0b3Iuc3RhcnQoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICBjbG9zZSh7YWxsb3dSZWNvbm5lY3Q6IGFsbG93UmVjb25uZWN0fSA9IHtcbiAgICBhbGxvd1JlY29ubmVjdDogdHJ1ZVxuICB9KSB7XG4gICAgaWYgKCFhbGxvd1JlY29ubmVjdCkge1xuICAgICAgdGhpcy5tb25pdG9yLnN0b3AoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuaXNPcGVuKCkpIHtcbiAgICAgIHJldHVybiB0aGlzLndlYlNvY2tldC5jbG9zZSgpO1xuICAgIH1cbiAgfVxuICByZW9wZW4oKSB7XG4gICAgbG9nZ2VyLmxvZyhgUmVvcGVuaW5nIFdlYlNvY2tldCwgY3VycmVudCBzdGF0ZSBpcyAke3RoaXMuZ2V0U3RhdGUoKX1gKTtcbiAgICBpZiAodGhpcy5pc0FjdGl2ZSgpKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gdGhpcy5jbG9zZSgpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhcIkZhaWxlZCB0byByZW9wZW4gV2ViU29ja2V0XCIsIGVycm9yKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGxvZ2dlci5sb2coYFJlb3BlbmluZyBXZWJTb2NrZXQgaW4gJHt0aGlzLmNvbnN0cnVjdG9yLnJlb3BlbkRlbGF5fW1zYCk7XG4gICAgICAgIHNldFRpbWVvdXQodGhpcy5vcGVuLCB0aGlzLmNvbnN0cnVjdG9yLnJlb3BlbkRlbGF5KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMub3BlbigpO1xuICAgIH1cbiAgfVxuICBnZXRQcm90b2NvbCgpIHtcbiAgICBpZiAodGhpcy53ZWJTb2NrZXQpIHtcbiAgICAgIHJldHVybiB0aGlzLndlYlNvY2tldC5wcm90b2NvbDtcbiAgICB9XG4gIH1cbiAgaXNPcGVuKCkge1xuICAgIHJldHVybiB0aGlzLmlzU3RhdGUoXCJvcGVuXCIpO1xuICB9XG4gIGlzQWN0aXZlKCkge1xuICAgIHJldHVybiB0aGlzLmlzU3RhdGUoXCJvcGVuXCIsIFwiY29ubmVjdGluZ1wiKTtcbiAgfVxuICB0cmllZFRvUmVjb25uZWN0KCkge1xuICAgIHJldHVybiB0aGlzLm1vbml0b3IucmVjb25uZWN0QXR0ZW1wdHMgPiAwO1xuICB9XG4gIGlzUHJvdG9jb2xTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuIGluZGV4T2YuY2FsbChzdXBwb3J0ZWRQcm90b2NvbHMsIHRoaXMuZ2V0UHJvdG9jb2woKSkgPj0gMDtcbiAgfVxuICBpc1N0YXRlKC4uLnN0YXRlcykge1xuICAgIHJldHVybiBpbmRleE9mLmNhbGwoc3RhdGVzLCB0aGlzLmdldFN0YXRlKCkpID49IDA7XG4gIH1cbiAgZ2V0U3RhdGUoKSB7XG4gICAgaWYgKHRoaXMud2ViU29ja2V0KSB7XG4gICAgICBmb3IgKGxldCBzdGF0ZSBpbiBhZGFwdGVycy5XZWJTb2NrZXQpIHtcbiAgICAgICAgaWYgKGFkYXB0ZXJzLldlYlNvY2tldFtzdGF0ZV0gPT09IHRoaXMud2ViU29ja2V0LnJlYWR5U3RhdGUpIHtcbiAgICAgICAgICByZXR1cm4gc3RhdGUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpbnN0YWxsRXZlbnRIYW5kbGVycygpIHtcbiAgICBmb3IgKGxldCBldmVudE5hbWUgaW4gdGhpcy5ldmVudHMpIHtcbiAgICAgIGNvbnN0IGhhbmRsZXIgPSB0aGlzLmV2ZW50c1tldmVudE5hbWVdLmJpbmQodGhpcyk7XG4gICAgICB0aGlzLndlYlNvY2tldFtgb24ke2V2ZW50TmFtZX1gXSA9IGhhbmRsZXI7XG4gICAgfVxuICB9XG4gIHVuaW5zdGFsbEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgZm9yIChsZXQgZXZlbnROYW1lIGluIHRoaXMuZXZlbnRzKSB7XG4gICAgICB0aGlzLndlYlNvY2tldFtgb24ke2V2ZW50TmFtZX1gXSA9IGZ1bmN0aW9uKCkge307XG4gICAgfVxuICB9XG59XG5cbkNvbm5lY3Rpb24ucmVvcGVuRGVsYXkgPSA1MDA7XG5cbkNvbm5lY3Rpb24ucHJvdG90eXBlLmV2ZW50cyA9IHtcbiAgbWVzc2FnZShldmVudCkge1xuICAgIGlmICghdGhpcy5pc1Byb3RvY29sU3VwcG9ydGVkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qge2lkZW50aWZpZXI6IGlkZW50aWZpZXIsIG1lc3NhZ2U6IG1lc3NhZ2UsIHJlYXNvbjogcmVhc29uLCByZWNvbm5lY3Q6IHJlY29ubmVjdCwgdHlwZTogdHlwZX0gPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xuICAgIHRoaXMubW9uaXRvci5yZWNvcmRNZXNzYWdlKCk7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgIGNhc2UgbWVzc2FnZV90eXBlcy53ZWxjb21lOlxuICAgICAgaWYgKHRoaXMudHJpZWRUb1JlY29ubmVjdCgpKSB7XG4gICAgICAgIHRoaXMucmVjb25uZWN0QXR0ZW1wdGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMubW9uaXRvci5yZWNvcmRDb25uZWN0KCk7XG4gICAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25zLnJlbG9hZCgpO1xuXG4gICAgIGNhc2UgbWVzc2FnZV90eXBlcy5kaXNjb25uZWN0OlxuICAgICAgbG9nZ2VyLmxvZyhgRGlzY29ubmVjdGluZy4gUmVhc29uOiAke3JlYXNvbn1gKTtcbiAgICAgIHJldHVybiB0aGlzLmNsb3NlKHtcbiAgICAgICAgYWxsb3dSZWNvbm5lY3Q6IHJlY29ubmVjdFxuICAgICAgfSk7XG5cbiAgICAgY2FzZSBtZXNzYWdlX3R5cGVzLnBpbmc6XG4gICAgICByZXR1cm4gbnVsbDtcblxuICAgICBjYXNlIG1lc3NhZ2VfdHlwZXMuY29uZmlybWF0aW9uOlxuICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmNvbmZpcm1TdWJzY3JpcHRpb24oaWRlbnRpZmllcik7XG4gICAgICBpZiAodGhpcy5yZWNvbm5lY3RBdHRlbXB0ZWQpIHtcbiAgICAgICAgdGhpcy5yZWNvbm5lY3RBdHRlbXB0ZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaXB0aW9ucy5ub3RpZnkoaWRlbnRpZmllciwgXCJjb25uZWN0ZWRcIiwge1xuICAgICAgICAgIHJlY29ubmVjdGVkOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaXB0aW9ucy5ub3RpZnkoaWRlbnRpZmllciwgXCJjb25uZWN0ZWRcIiwge1xuICAgICAgICAgIHJlY29ubmVjdGVkOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICBjYXNlIG1lc3NhZ2VfdHlwZXMucmVqZWN0aW9uOlxuICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaXB0aW9ucy5yZWplY3QoaWRlbnRpZmllcik7XG5cbiAgICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbnMubm90aWZ5KGlkZW50aWZpZXIsIFwicmVjZWl2ZWRcIiwgbWVzc2FnZSk7XG4gICAgfVxuICB9LFxuICBvcGVuKCkge1xuICAgIGxvZ2dlci5sb2coYFdlYlNvY2tldCBvbm9wZW4gZXZlbnQsIHVzaW5nICcke3RoaXMuZ2V0UHJvdG9jb2woKX0nIHN1YnByb3RvY29sYCk7XG4gICAgdGhpcy5kaXNjb25uZWN0ZWQgPSBmYWxzZTtcbiAgICBpZiAoIXRoaXMuaXNQcm90b2NvbFN1cHBvcnRlZCgpKSB7XG4gICAgICBsb2dnZXIubG9nKFwiUHJvdG9jb2wgaXMgdW5zdXBwb3J0ZWQuIFN0b3BwaW5nIG1vbml0b3IgYW5kIGRpc2Nvbm5lY3RpbmcuXCIpO1xuICAgICAgcmV0dXJuIHRoaXMuY2xvc2Uoe1xuICAgICAgICBhbGxvd1JlY29ubmVjdDogZmFsc2VcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcbiAgY2xvc2UoZXZlbnQpIHtcbiAgICBsb2dnZXIubG9nKFwiV2ViU29ja2V0IG9uY2xvc2UgZXZlbnRcIik7XG4gICAgaWYgKHRoaXMuZGlzY29ubmVjdGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZGlzY29ubmVjdGVkID0gdHJ1ZTtcbiAgICB0aGlzLm1vbml0b3IucmVjb3JkRGlzY29ubmVjdCgpO1xuICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbnMubm90aWZ5QWxsKFwiZGlzY29ubmVjdGVkXCIsIHtcbiAgICAgIHdpbGxBdHRlbXB0UmVjb25uZWN0OiB0aGlzLm1vbml0b3IuaXNSdW5uaW5nKClcbiAgICB9KTtcbiAgfSxcbiAgZXJyb3IoKSB7XG4gICAgbG9nZ2VyLmxvZyhcIldlYlNvY2tldCBvbmVycm9yIGV2ZW50XCIpO1xuICB9XG59O1xuXG5jb25zdCBleHRlbmQgPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnRpZXMpIHtcbiAgaWYgKHByb3BlcnRpZXMgIT0gbnVsbCkge1xuICAgIGZvciAobGV0IGtleSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHByb3BlcnRpZXNba2V5XTtcbiAgICAgIG9iamVjdFtrZXldID0gdmFsdWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBvYmplY3Q7XG59O1xuXG5jbGFzcyBTdWJzY3JpcHRpb24ge1xuICBjb25zdHJ1Y3Rvcihjb25zdW1lciwgcGFyYW1zID0ge30sIG1peGluKSB7XG4gICAgdGhpcy5jb25zdW1lciA9IGNvbnN1bWVyO1xuICAgIHRoaXMuaWRlbnRpZmllciA9IEpTT04uc3RyaW5naWZ5KHBhcmFtcyk7XG4gICAgZXh0ZW5kKHRoaXMsIG1peGluKTtcbiAgfVxuICBwZXJmb3JtKGFjdGlvbiwgZGF0YSA9IHt9KSB7XG4gICAgZGF0YS5hY3Rpb24gPSBhY3Rpb247XG4gICAgcmV0dXJuIHRoaXMuc2VuZChkYXRhKTtcbiAgfVxuICBzZW5kKGRhdGEpIHtcbiAgICByZXR1cm4gdGhpcy5jb25zdW1lci5zZW5kKHtcbiAgICAgIGNvbW1hbmQ6IFwibWVzc2FnZVwiLFxuICAgICAgaWRlbnRpZmllcjogdGhpcy5pZGVudGlmaWVyLFxuICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICB9KTtcbiAgfVxuICB1bnN1YnNjcmliZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb25zdW1lci5zdWJzY3JpcHRpb25zLnJlbW92ZSh0aGlzKTtcbiAgfVxufVxuXG5jbGFzcyBTdWJzY3JpcHRpb25HdWFyYW50b3Ige1xuICBjb25zdHJ1Y3RvcihzdWJzY3JpcHRpb25zKSB7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zID0gc3Vic2NyaXB0aW9ucztcbiAgICB0aGlzLnBlbmRpbmdTdWJzY3JpcHRpb25zID0gW107XG4gIH1cbiAgZ3VhcmFudGVlKHN1YnNjcmlwdGlvbikge1xuICAgIGlmICh0aGlzLnBlbmRpbmdTdWJzY3JpcHRpb25zLmluZGV4T2Yoc3Vic2NyaXB0aW9uKSA9PSAtMSkge1xuICAgICAgbG9nZ2VyLmxvZyhgU3Vic2NyaXB0aW9uR3VhcmFudG9yIGd1YXJhbnRlZWluZyAke3N1YnNjcmlwdGlvbi5pZGVudGlmaWVyfWApO1xuICAgICAgdGhpcy5wZW5kaW5nU3Vic2NyaXB0aW9ucy5wdXNoKHN1YnNjcmlwdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvZ2dlci5sb2coYFN1YnNjcmlwdGlvbkd1YXJhbnRvciBhbHJlYWR5IGd1YXJhbnRlZWluZyAke3N1YnNjcmlwdGlvbi5pZGVudGlmaWVyfWApO1xuICAgIH1cbiAgICB0aGlzLnN0YXJ0R3VhcmFudGVlaW5nKCk7XG4gIH1cbiAgZm9yZ2V0KHN1YnNjcmlwdGlvbikge1xuICAgIGxvZ2dlci5sb2coYFN1YnNjcmlwdGlvbkd1YXJhbnRvciBmb3JnZXR0aW5nICR7c3Vic2NyaXB0aW9uLmlkZW50aWZpZXJ9YCk7XG4gICAgdGhpcy5wZW5kaW5nU3Vic2NyaXB0aW9ucyA9IHRoaXMucGVuZGluZ1N1YnNjcmlwdGlvbnMuZmlsdGVyKChzID0+IHMgIT09IHN1YnNjcmlwdGlvbikpO1xuICB9XG4gIHN0YXJ0R3VhcmFudGVlaW5nKCkge1xuICAgIHRoaXMuc3RvcEd1YXJhbnRlZWluZygpO1xuICAgIHRoaXMucmV0cnlTdWJzY3JpYmluZygpO1xuICB9XG4gIHN0b3BHdWFyYW50ZWVpbmcoKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMucmV0cnlUaW1lb3V0KTtcbiAgfVxuICByZXRyeVN1YnNjcmliaW5nKCkge1xuICAgIHRoaXMucmV0cnlUaW1lb3V0ID0gc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9ucyAmJiB0eXBlb2YgdGhpcy5zdWJzY3JpcHRpb25zLnN1YnNjcmliZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRoaXMucGVuZGluZ1N1YnNjcmlwdGlvbnMubWFwKChzdWJzY3JpcHRpb24gPT4ge1xuICAgICAgICAgIGxvZ2dlci5sb2coYFN1YnNjcmlwdGlvbkd1YXJhbnRvciByZXN1YnNjcmliaW5nICR7c3Vic2NyaXB0aW9uLmlkZW50aWZpZXJ9YCk7XG4gICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnN1YnNjcmliZShzdWJzY3JpcHRpb24pO1xuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfSksIDUwMCk7XG4gIH1cbn1cblxuY2xhc3MgU3Vic2NyaXB0aW9ucyB7XG4gIGNvbnN0cnVjdG9yKGNvbnN1bWVyKSB7XG4gICAgdGhpcy5jb25zdW1lciA9IGNvbnN1bWVyO1xuICAgIHRoaXMuZ3VhcmFudG9yID0gbmV3IFN1YnNjcmlwdGlvbkd1YXJhbnRvcih0aGlzKTtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBbXTtcbiAgfVxuICBjcmVhdGUoY2hhbm5lbE5hbWUsIG1peGluKSB7XG4gICAgY29uc3QgY2hhbm5lbCA9IGNoYW5uZWxOYW1lO1xuICAgIGNvbnN0IHBhcmFtcyA9IHR5cGVvZiBjaGFubmVsID09PSBcIm9iamVjdFwiID8gY2hhbm5lbCA6IHtcbiAgICAgIGNoYW5uZWw6IGNoYW5uZWxcbiAgICB9O1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24odGhpcy5jb25zdW1lciwgcGFyYW1zLCBtaXhpbik7XG4gICAgcmV0dXJuIHRoaXMuYWRkKHN1YnNjcmlwdGlvbik7XG4gIH1cbiAgYWRkKHN1YnNjcmlwdGlvbikge1xuICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKHN1YnNjcmlwdGlvbik7XG4gICAgdGhpcy5jb25zdW1lci5lbnN1cmVBY3RpdmVDb25uZWN0aW9uKCk7XG4gICAgdGhpcy5ub3RpZnkoc3Vic2NyaXB0aW9uLCBcImluaXRpYWxpemVkXCIpO1xuICAgIHRoaXMuc3Vic2NyaWJlKHN1YnNjcmlwdGlvbik7XG4gICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgfVxuICByZW1vdmUoc3Vic2NyaXB0aW9uKSB7XG4gICAgdGhpcy5mb3JnZXQoc3Vic2NyaXB0aW9uKTtcbiAgICBpZiAoIXRoaXMuZmluZEFsbChzdWJzY3JpcHRpb24uaWRlbnRpZmllcikubGVuZ3RoKSB7XG4gICAgICB0aGlzLnNlbmRDb21tYW5kKHN1YnNjcmlwdGlvbiwgXCJ1bnN1YnNjcmliZVwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgfVxuICByZWplY3QoaWRlbnRpZmllcikge1xuICAgIHJldHVybiB0aGlzLmZpbmRBbGwoaWRlbnRpZmllcikubWFwKChzdWJzY3JpcHRpb24gPT4ge1xuICAgICAgdGhpcy5mb3JnZXQoc3Vic2NyaXB0aW9uKTtcbiAgICAgIHRoaXMubm90aWZ5KHN1YnNjcmlwdGlvbiwgXCJyZWplY3RlZFwiKTtcbiAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgfSkpO1xuICB9XG4gIGZvcmdldChzdWJzY3JpcHRpb24pIHtcbiAgICB0aGlzLmd1YXJhbnRvci5mb3JnZXQoc3Vic2NyaXB0aW9uKTtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSB0aGlzLnN1YnNjcmlwdGlvbnMuZmlsdGVyKChzID0+IHMgIT09IHN1YnNjcmlwdGlvbikpO1xuICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gIH1cbiAgZmluZEFsbChpZGVudGlmaWVyKSB7XG4gICAgcmV0dXJuIHRoaXMuc3Vic2NyaXB0aW9ucy5maWx0ZXIoKHMgPT4gcy5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSk7XG4gIH1cbiAgcmVsb2FkKCkge1xuICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbnMubWFwKChzdWJzY3JpcHRpb24gPT4gdGhpcy5zdWJzY3JpYmUoc3Vic2NyaXB0aW9uKSkpO1xuICB9XG4gIG5vdGlmeUFsbChjYWxsYmFja05hbWUsIC4uLmFyZ3MpIHtcbiAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25zLm1hcCgoc3Vic2NyaXB0aW9uID0+IHRoaXMubm90aWZ5KHN1YnNjcmlwdGlvbiwgY2FsbGJhY2tOYW1lLCAuLi5hcmdzKSkpO1xuICB9XG4gIG5vdGlmeShzdWJzY3JpcHRpb24sIGNhbGxiYWNrTmFtZSwgLi4uYXJncykge1xuICAgIGxldCBzdWJzY3JpcHRpb25zO1xuICAgIGlmICh0eXBlb2Ygc3Vic2NyaXB0aW9uID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBzdWJzY3JpcHRpb25zID0gdGhpcy5maW5kQWxsKHN1YnNjcmlwdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN1YnNjcmlwdGlvbnMgPSBbIHN1YnNjcmlwdGlvbiBdO1xuICAgIH1cbiAgICByZXR1cm4gc3Vic2NyaXB0aW9ucy5tYXAoKHN1YnNjcmlwdGlvbiA9PiB0eXBlb2Ygc3Vic2NyaXB0aW9uW2NhbGxiYWNrTmFtZV0gPT09IFwiZnVuY3Rpb25cIiA/IHN1YnNjcmlwdGlvbltjYWxsYmFja05hbWVdKC4uLmFyZ3MpIDogdW5kZWZpbmVkKSk7XG4gIH1cbiAgc3Vic2NyaWJlKHN1YnNjcmlwdGlvbikge1xuICAgIGlmICh0aGlzLnNlbmRDb21tYW5kKHN1YnNjcmlwdGlvbiwgXCJzdWJzY3JpYmVcIikpIHtcbiAgICAgIHRoaXMuZ3VhcmFudG9yLmd1YXJhbnRlZShzdWJzY3JpcHRpb24pO1xuICAgIH1cbiAgfVxuICBjb25maXJtU3Vic2NyaXB0aW9uKGlkZW50aWZpZXIpIHtcbiAgICBsb2dnZXIubG9nKGBTdWJzY3JpcHRpb24gY29uZmlybWVkICR7aWRlbnRpZmllcn1gKTtcbiAgICB0aGlzLmZpbmRBbGwoaWRlbnRpZmllcikubWFwKChzdWJzY3JpcHRpb24gPT4gdGhpcy5ndWFyYW50b3IuZm9yZ2V0KHN1YnNjcmlwdGlvbikpKTtcbiAgfVxuICBzZW5kQ29tbWFuZChzdWJzY3JpcHRpb24sIGNvbW1hbmQpIHtcbiAgICBjb25zdCB7aWRlbnRpZmllcjogaWRlbnRpZmllcn0gPSBzdWJzY3JpcHRpb247XG4gICAgcmV0dXJuIHRoaXMuY29uc3VtZXIuc2VuZCh7XG4gICAgICBjb21tYW5kOiBjb21tYW5kLFxuICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllclxuICAgIH0pO1xuICB9XG59XG5cbmNsYXNzIENvbnN1bWVyIHtcbiAgY29uc3RydWN0b3IodXJsKSB7XG4gICAgdGhpcy5fdXJsID0gdXJsO1xuICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IG5ldyBTdWJzY3JpcHRpb25zKHRoaXMpO1xuICAgIHRoaXMuY29ubmVjdGlvbiA9IG5ldyBDb25uZWN0aW9uKHRoaXMpO1xuICAgIHRoaXMuc3VicHJvdG9jb2xzID0gW107XG4gIH1cbiAgZ2V0IHVybCgpIHtcbiAgICByZXR1cm4gY3JlYXRlV2ViU29ja2V0VVJMKHRoaXMuX3VybCk7XG4gIH1cbiAgc2VuZChkYXRhKSB7XG4gICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5zZW5kKGRhdGEpO1xuICB9XG4gIGNvbm5lY3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5vcGVuKCk7XG4gIH1cbiAgZGlzY29ubmVjdCgpIHtcbiAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLmNsb3NlKHtcbiAgICAgIGFsbG93UmVjb25uZWN0OiBmYWxzZVxuICAgIH0pO1xuICB9XG4gIGVuc3VyZUFjdGl2ZUNvbm5lY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLmNvbm5lY3Rpb24uaXNBY3RpdmUoKSkge1xuICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5vcGVuKCk7XG4gICAgfVxuICB9XG4gIGFkZFN1YlByb3RvY29sKHN1YnByb3RvY29sKSB7XG4gICAgdGhpcy5zdWJwcm90b2NvbHMgPSBbIC4uLnRoaXMuc3VicHJvdG9jb2xzLCBzdWJwcm90b2NvbCBdO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVdlYlNvY2tldFVSTCh1cmwpIHtcbiAgaWYgKHR5cGVvZiB1cmwgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHVybCA9IHVybCgpO1xuICB9XG4gIGlmICh1cmwgJiYgIS9ed3NzPzovaS50ZXN0KHVybCkpIHtcbiAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgYS5ocmVmID0gdXJsO1xuICAgIGEuaHJlZiA9IGEuaHJlZjtcbiAgICBhLnByb3RvY29sID0gYS5wcm90b2NvbC5yZXBsYWNlKFwiaHR0cFwiLCBcIndzXCIpO1xuICAgIHJldHVybiBhLmhyZWY7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVDb25zdW1lcih1cmwgPSBnZXRDb25maWcoXCJ1cmxcIikgfHwgSU5URVJOQUwuZGVmYXVsdF9tb3VudF9wYXRoKSB7XG4gIHJldHVybiBuZXcgQ29uc3VtZXIodXJsKTtcbn1cblxuZnVuY3Rpb24gZ2V0Q29uZmlnKG5hbWUpIHtcbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmhlYWQucXVlcnlTZWxlY3RvcihgbWV0YVtuYW1lPSdhY3Rpb24tY2FibGUtJHtuYW1lfSddYCk7XG4gIGlmIChlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiY29udGVudFwiKTtcbiAgfVxufVxuXG5leHBvcnQgeyBDb25uZWN0aW9uLCBDb25uZWN0aW9uTW9uaXRvciwgQ29uc3VtZXIsIElOVEVSTkFMLCBTdWJzY3JpcHRpb24sIFN1YnNjcmlwdGlvbkd1YXJhbnRvciwgU3Vic2NyaXB0aW9ucywgYWRhcHRlcnMsIGNyZWF0ZUNvbnN1bWVyLCBjcmVhdGVXZWJTb2NrZXRVUkwsIGdldENvbmZpZywgbG9nZ2VyIH07XG4iLCAiLyohXG5UdXJibyA4LjAuMTdcbkNvcHlyaWdodCBcdTAwQTkgMjAyNSAzN3NpZ25hbHMgTExDXG4gKi9cbi8qKlxuICogVGhlIE1JVCBMaWNlbnNlIChNSVQpXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IEphdmFuIE1ha2htYWxpXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuICogb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuICogaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuICogdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuICogY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4gKiBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4gKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuICogQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbiAqIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbiAqIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG4oZnVuY3Rpb24gKHByb3RvdHlwZSkge1xuICBpZiAodHlwZW9mIHByb3RvdHlwZS5yZXF1ZXN0U3VibWl0ID09IFwiZnVuY3Rpb25cIikgcmV0dXJuXG5cbiAgcHJvdG90eXBlLnJlcXVlc3RTdWJtaXQgPSBmdW5jdGlvbiAoc3VibWl0dGVyKSB7XG4gICAgaWYgKHN1Ym1pdHRlcikge1xuICAgICAgdmFsaWRhdGVTdWJtaXR0ZXIoc3VibWl0dGVyLCB0aGlzKTtcbiAgICAgIHN1Ym1pdHRlci5jbGljaygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdWJtaXR0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICBzdWJtaXR0ZXIudHlwZSA9IFwic3VibWl0XCI7XG4gICAgICBzdWJtaXR0ZXIuaGlkZGVuID0gdHJ1ZTtcbiAgICAgIHRoaXMuYXBwZW5kQ2hpbGQoc3VibWl0dGVyKTtcbiAgICAgIHN1Ym1pdHRlci5jbGljaygpO1xuICAgICAgdGhpcy5yZW1vdmVDaGlsZChzdWJtaXR0ZXIpO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiB2YWxpZGF0ZVN1Ym1pdHRlcihzdWJtaXR0ZXIsIGZvcm0pIHtcbiAgICBzdWJtaXR0ZXIgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCB8fCByYWlzZShUeXBlRXJyb3IsIFwicGFyYW1ldGVyIDEgaXMgbm90IG9mIHR5cGUgJ0hUTUxFbGVtZW50J1wiKTtcbiAgICBzdWJtaXR0ZXIudHlwZSA9PSBcInN1Ym1pdFwiIHx8IHJhaXNlKFR5cGVFcnJvciwgXCJUaGUgc3BlY2lmaWVkIGVsZW1lbnQgaXMgbm90IGEgc3VibWl0IGJ1dHRvblwiKTtcbiAgICBzdWJtaXR0ZXIuZm9ybSA9PSBmb3JtIHx8XG4gICAgICByYWlzZShET01FeGNlcHRpb24sIFwiVGhlIHNwZWNpZmllZCBlbGVtZW50IGlzIG5vdCBvd25lZCBieSB0aGlzIGZvcm0gZWxlbWVudFwiLCBcIk5vdEZvdW5kRXJyb3JcIik7XG4gIH1cblxuICBmdW5jdGlvbiByYWlzZShlcnJvckNvbnN0cnVjdG9yLCBtZXNzYWdlLCBuYW1lKSB7XG4gICAgdGhyb3cgbmV3IGVycm9yQ29uc3RydWN0b3IoXCJGYWlsZWQgdG8gZXhlY3V0ZSAncmVxdWVzdFN1Ym1pdCcgb24gJ0hUTUxGb3JtRWxlbWVudCc6IFwiICsgbWVzc2FnZSArIFwiLlwiLCBuYW1lKVxuICB9XG59KShIVE1MRm9ybUVsZW1lbnQucHJvdG90eXBlKTtcblxuY29uc3Qgc3VibWl0dGVyc0J5Rm9ybSA9IG5ldyBXZWFrTWFwKCk7XG5cbmZ1bmN0aW9uIGZpbmRTdWJtaXR0ZXJGcm9tQ2xpY2tUYXJnZXQodGFyZ2V0KSB7XG4gIGNvbnN0IGVsZW1lbnQgPSB0YXJnZXQgaW5zdGFuY2VvZiBFbGVtZW50ID8gdGFyZ2V0IDogdGFyZ2V0IGluc3RhbmNlb2YgTm9kZSA/IHRhcmdldC5wYXJlbnRFbGVtZW50IDogbnVsbDtcbiAgY29uc3QgY2FuZGlkYXRlID0gZWxlbWVudCA/IGVsZW1lbnQuY2xvc2VzdChcImlucHV0LCBidXR0b25cIikgOiBudWxsO1xuICByZXR1cm4gY2FuZGlkYXRlPy50eXBlID09IFwic3VibWl0XCIgPyBjYW5kaWRhdGUgOiBudWxsXG59XG5cbmZ1bmN0aW9uIGNsaWNrQ2FwdHVyZWQoZXZlbnQpIHtcbiAgY29uc3Qgc3VibWl0dGVyID0gZmluZFN1Ym1pdHRlckZyb21DbGlja1RhcmdldChldmVudC50YXJnZXQpO1xuXG4gIGlmIChzdWJtaXR0ZXIgJiYgc3VibWl0dGVyLmZvcm0pIHtcbiAgICBzdWJtaXR0ZXJzQnlGb3JtLnNldChzdWJtaXR0ZXIuZm9ybSwgc3VibWl0dGVyKTtcbiAgfVxufVxuXG4oZnVuY3Rpb24gKCkge1xuICBpZiAoXCJzdWJtaXR0ZXJcIiBpbiBFdmVudC5wcm90b3R5cGUpIHJldHVyblxuXG4gIGxldCBwcm90b3R5cGUgPSB3aW5kb3cuRXZlbnQucHJvdG90eXBlO1xuICAvLyBDZXJ0YWluIHZlcnNpb25zIG9mIFNhZmFyaSAxNSBoYXZlIGEgYnVnIHdoZXJlIHRoZXkgd29uJ3RcbiAgLy8gcG9wdWxhdGUgdGhlIHN1Ym1pdHRlci4gVGhpcyBodXJ0cyBUdXJib0RyaXZlJ3MgZW5hYmxlL2Rpc2FibGUgZGV0ZWN0aW9uLlxuICAvLyBTZWUgaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTIyOTY2MFxuICBpZiAoXCJTdWJtaXRFdmVudFwiIGluIHdpbmRvdykge1xuICAgIGNvbnN0IHByb3RvdHlwZU9mU3VibWl0RXZlbnQgPSB3aW5kb3cuU3VibWl0RXZlbnQucHJvdG90eXBlO1xuXG4gICAgaWYgKC9BcHBsZSBDb21wdXRlci8udGVzdChuYXZpZ2F0b3IudmVuZG9yKSAmJiAhKFwic3VibWl0dGVyXCIgaW4gcHJvdG90eXBlT2ZTdWJtaXRFdmVudCkpIHtcbiAgICAgIHByb3RvdHlwZSA9IHByb3RvdHlwZU9mU3VibWl0RXZlbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAvLyBwb2x5ZmlsbCBub3QgbmVlZGVkXG4gICAgfVxuICB9XG5cbiAgYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsaWNrQ2FwdHVyZWQsIHRydWUpO1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm90b3R5cGUsIFwic3VibWl0dGVyXCIsIHtcbiAgICBnZXQoKSB7XG4gICAgICBpZiAodGhpcy50eXBlID09IFwic3VibWl0XCIgJiYgdGhpcy50YXJnZXQgaW5zdGFuY2VvZiBIVE1MRm9ybUVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHN1Ym1pdHRlcnNCeUZvcm0uZ2V0KHRoaXMudGFyZ2V0KVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG59KSgpO1xuXG5jb25zdCBGcmFtZUxvYWRpbmdTdHlsZSA9IHtcbiAgZWFnZXI6IFwiZWFnZXJcIixcbiAgbGF6eTogXCJsYXp5XCJcbn07XG5cbi8qKlxuICogQ29udGFpbnMgYSBmcmFnbWVudCBvZiBIVE1MIHdoaWNoIGlzIHVwZGF0ZWQgYmFzZWQgb24gbmF2aWdhdGlvbiB3aXRoaW5cbiAqIGl0IChlLmcuIHZpYSBsaW5rcyBvciBmb3JtIHN1Ym1pc3Npb25zKS5cbiAqXG4gKiBAY3VzdG9tRWxlbWVudCB0dXJiby1mcmFtZVxuICogQGV4YW1wbGVcbiAqICAgPHR1cmJvLWZyYW1lIGlkPVwibWVzc2FnZXNcIj5cbiAqICAgICA8YSBocmVmPVwiL21lc3NhZ2VzL2V4cGFuZGVkXCI+XG4gKiAgICAgICBTaG93IGFsbCBleHBhbmRlZCBtZXNzYWdlcyBpbiB0aGlzIGZyYW1lLlxuICogICAgIDwvYT5cbiAqXG4gKiAgICAgPGZvcm0gYWN0aW9uPVwiL21lc3NhZ2VzXCI+XG4gKiAgICAgICBTaG93IHJlc3BvbnNlIGZyb20gdGhpcyBmb3JtIHdpdGhpbiB0aGlzIGZyYW1lLlxuICogICAgIDwvZm9ybT5cbiAqICAgPC90dXJiby1mcmFtZT5cbiAqL1xuY2xhc3MgRnJhbWVFbGVtZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICBzdGF0aWMgZGVsZWdhdGVDb25zdHJ1Y3RvciA9IHVuZGVmaW5lZFxuXG4gIGxvYWRlZCA9IFByb21pc2UucmVzb2x2ZSgpXG5cbiAgc3RhdGljIGdldCBvYnNlcnZlZEF0dHJpYnV0ZXMoKSB7XG4gICAgcmV0dXJuIFtcImRpc2FibGVkXCIsIFwibG9hZGluZ1wiLCBcInNyY1wiXVxuICB9XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmRlbGVnYXRlID0gbmV3IEZyYW1lRWxlbWVudC5kZWxlZ2F0ZUNvbnN0cnVjdG9yKHRoaXMpO1xuICB9XG5cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgdGhpcy5kZWxlZ2F0ZS5jb25uZWN0KCk7XG4gIH1cblxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICB0aGlzLmRlbGVnYXRlLmRpc2Nvbm5lY3QoKTtcbiAgfVxuXG4gIHJlbG9hZCgpIHtcbiAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5zb3VyY2VVUkxSZWxvYWRlZCgpXG4gIH1cblxuICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSkge1xuICAgIGlmIChuYW1lID09IFwibG9hZGluZ1wiKSB7XG4gICAgICB0aGlzLmRlbGVnYXRlLmxvYWRpbmdTdHlsZUNoYW5nZWQoKTtcbiAgICB9IGVsc2UgaWYgKG5hbWUgPT0gXCJzcmNcIikge1xuICAgICAgdGhpcy5kZWxlZ2F0ZS5zb3VyY2VVUkxDaGFuZ2VkKCk7XG4gICAgfSBlbHNlIGlmIChuYW1lID09IFwiZGlzYWJsZWRcIikge1xuICAgICAgdGhpcy5kZWxlZ2F0ZS5kaXNhYmxlZENoYW5nZWQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgVVJMIHRvIGxhemlseSBsb2FkIHNvdXJjZSBIVE1MIGZyb21cbiAgICovXG4gIGdldCBzcmMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKFwic3JjXCIpXG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgVVJMIHRvIGxhemlseSBsb2FkIHNvdXJjZSBIVE1MIGZyb21cbiAgICovXG4gIHNldCBzcmModmFsdWUpIHtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwic3JjXCIsIHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoXCJzcmNcIik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHJlZnJlc2ggbW9kZSBmb3IgdGhlIGZyYW1lLlxuICAgKi9cbiAgZ2V0IHJlZnJlc2goKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKFwicmVmcmVzaFwiKVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHJlZnJlc2ggbW9kZSBmb3IgdGhlIGZyYW1lLlxuICAgKi9cbiAgc2V0IHJlZnJlc2godmFsdWUpIHtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwicmVmcmVzaFwiLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKFwicmVmcmVzaFwiKTtcbiAgICB9XG4gIH1cblxuICBnZXQgc2hvdWxkUmVsb2FkV2l0aE1vcnBoKCkge1xuICAgIHJldHVybiB0aGlzLnNyYyAmJiB0aGlzLnJlZnJlc2ggPT09IFwibW9ycGhcIlxuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgaWYgdGhlIGVsZW1lbnQgaXMgbG9hZGluZ1xuICAgKi9cbiAgZ2V0IGxvYWRpbmcoKSB7XG4gICAgcmV0dXJuIGZyYW1lTG9hZGluZ1N0eWxlRnJvbVN0cmluZyh0aGlzLmdldEF0dHJpYnV0ZShcImxvYWRpbmdcIikgfHwgXCJcIilcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2YWx1ZSBvZiBpZiB0aGUgZWxlbWVudCBpcyBsb2FkaW5nXG4gICAqL1xuICBzZXQgbG9hZGluZyh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJsb2FkaW5nXCIsIHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoXCJsb2FkaW5nXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBkaXNhYmxlZCBzdGF0ZSBvZiB0aGUgZnJhbWUuXG4gICAqXG4gICAqIElmIGRpc2FibGVkLCBubyByZXF1ZXN0cyB3aWxsIGJlIGludGVyY2VwdGVkIGJ5IHRoZSBmcmFtZS5cbiAgICovXG4gIGdldCBkaXNhYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGRpc2FibGVkIHN0YXRlIG9mIHRoZSBmcmFtZS5cbiAgICpcbiAgICogSWYgZGlzYWJsZWQsIG5vIHJlcXVlc3RzIHdpbGwgYmUgaW50ZXJjZXB0ZWQgYnkgdGhlIGZyYW1lLlxuICAgKi9cbiAgc2V0IGRpc2FibGVkKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwiXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBhdXRvc2Nyb2xsIHN0YXRlIG9mIHRoZSBmcmFtZS5cbiAgICpcbiAgICogSWYgdHJ1ZSwgdGhlIGZyYW1lIHdpbGwgYmUgc2Nyb2xsZWQgaW50byB2aWV3IGF1dG9tYXRpY2FsbHkgb24gdXBkYXRlLlxuICAgKi9cbiAgZ2V0IGF1dG9zY3JvbGwoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiYXV0b3Njcm9sbFwiKVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGF1dG9zY3JvbGwgc3RhdGUgb2YgdGhlIGZyYW1lLlxuICAgKlxuICAgKiBJZiB0cnVlLCB0aGUgZnJhbWUgd2lsbCBiZSBzY3JvbGxlZCBpbnRvIHZpZXcgYXV0b21hdGljYWxseSBvbiB1cGRhdGUuXG4gICAqL1xuICBzZXQgYXV0b3Njcm9sbCh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJhdXRvc2Nyb2xsXCIsIFwiXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShcImF1dG9zY3JvbGxcIik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgaWYgdGhlIGVsZW1lbnQgaGFzIGZpbmlzaGVkIGxvYWRpbmdcbiAgICovXG4gIGdldCBjb21wbGV0ZSgpIHtcbiAgICByZXR1cm4gIXRoaXMuZGVsZWdhdGUuaXNMb2FkaW5nXG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgYWN0aXZlIHN0YXRlIG9mIHRoZSBmcmFtZS5cbiAgICpcbiAgICogSWYgaW5hY3RpdmUsIHNvdXJjZSBjaGFuZ2VzIHdpbGwgbm90IGJlIG9ic2VydmVkLlxuICAgKi9cbiAgZ2V0IGlzQWN0aXZlKCkge1xuICAgIHJldHVybiB0aGlzLm93bmVyRG9jdW1lbnQgPT09IGRvY3VtZW50ICYmICF0aGlzLmlzUHJldmlld1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGFjdGl2ZSBzdGF0ZSBvZiB0aGUgZnJhbWUuXG4gICAqXG4gICAqIElmIGluYWN0aXZlLCBzb3VyY2UgY2hhbmdlcyB3aWxsIG5vdCBiZSBvYnNlcnZlZC5cbiAgICovXG4gIGdldCBpc1ByZXZpZXcoKSB7XG4gICAgcmV0dXJuIHRoaXMub3duZXJEb2N1bWVudD8uZG9jdW1lbnRFbGVtZW50Py5oYXNBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLXByZXZpZXdcIilcbiAgfVxufVxuXG5mdW5jdGlvbiBmcmFtZUxvYWRpbmdTdHlsZUZyb21TdHJpbmcoc3R5bGUpIHtcbiAgc3dpdGNoIChzdHlsZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgY2FzZSBcImxhenlcIjpcbiAgICAgIHJldHVybiBGcmFtZUxvYWRpbmdTdHlsZS5sYXp5XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBGcmFtZUxvYWRpbmdTdHlsZS5lYWdlclxuICB9XG59XG5cbmNvbnN0IGRyaXZlID0ge1xuICBlbmFibGVkOiB0cnVlLFxuICBwcm9ncmVzc0JhckRlbGF5OiA1MDAsXG4gIHVudmlzaXRhYmxlRXh0ZW5zaW9uczogbmV3IFNldChcbiAgICBbXG4gICAgICBcIi43elwiLCBcIi5hYWNcIiwgXCIuYXBrXCIsIFwiLmF2aVwiLCBcIi5ibXBcIiwgXCIuYnoyXCIsIFwiLmNzc1wiLCBcIi5jc3ZcIiwgXCIuZGViXCIsIFwiLmRtZ1wiLCBcIi5kb2NcIixcbiAgICAgIFwiLmRvY3hcIiwgXCIuZXhlXCIsIFwiLmdpZlwiLCBcIi5nelwiLCBcIi5oZWljXCIsIFwiLmhlaWZcIiwgXCIuaWNvXCIsIFwiLmlzb1wiLCBcIi5qcGVnXCIsIFwiLmpwZ1wiLFxuICAgICAgXCIuanNcIiwgXCIuanNvblwiLCBcIi5tNGFcIiwgXCIubWt2XCIsIFwiLm1vdlwiLCBcIi5tcDNcIiwgXCIubXA0XCIsIFwiLm1wZWdcIiwgXCIubXBnXCIsIFwiLm1zaVwiLFxuICAgICAgXCIub2dnXCIsIFwiLm9ndlwiLCBcIi5wZGZcIiwgXCIucGtnXCIsIFwiLnBuZ1wiLCBcIi5wcHRcIiwgXCIucHB0eFwiLCBcIi5yYXJcIiwgXCIucnRmXCIsXG4gICAgICBcIi5zdmdcIiwgXCIudGFyXCIsIFwiLnRpZlwiLCBcIi50aWZmXCIsIFwiLnR4dFwiLCBcIi53YXZcIiwgXCIud2VibVwiLCBcIi53ZWJwXCIsIFwiLndtYVwiLCBcIi53bXZcIixcbiAgICAgIFwiLnhsc1wiLCBcIi54bHN4XCIsIFwiLnhtbFwiLCBcIi56aXBcIlxuICAgIF1cbiAgKVxufTtcblxuZnVuY3Rpb24gYWN0aXZhdGVTY3JpcHRFbGVtZW50KGVsZW1lbnQpIHtcbiAgaWYgKGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS10dXJiby1ldmFsXCIpID09IFwiZmFsc2VcIikge1xuICAgIHJldHVybiBlbGVtZW50XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgY3JlYXRlZFNjcmlwdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgIGNvbnN0IGNzcE5vbmNlID0gZ2V0Q3NwTm9uY2UoKTtcbiAgICBpZiAoY3NwTm9uY2UpIHtcbiAgICAgIGNyZWF0ZWRTY3JpcHRFbGVtZW50Lm5vbmNlID0gY3NwTm9uY2U7XG4gICAgfVxuICAgIGNyZWF0ZWRTY3JpcHRFbGVtZW50LnRleHRDb250ZW50ID0gZWxlbWVudC50ZXh0Q29udGVudDtcbiAgICBjcmVhdGVkU2NyaXB0RWxlbWVudC5hc3luYyA9IGZhbHNlO1xuICAgIGNvcHlFbGVtZW50QXR0cmlidXRlcyhjcmVhdGVkU2NyaXB0RWxlbWVudCwgZWxlbWVudCk7XG4gICAgcmV0dXJuIGNyZWF0ZWRTY3JpcHRFbGVtZW50XG4gIH1cbn1cblxuZnVuY3Rpb24gY29weUVsZW1lbnRBdHRyaWJ1dGVzKGRlc3RpbmF0aW9uRWxlbWVudCwgc291cmNlRWxlbWVudCkge1xuICBmb3IgKGNvbnN0IHsgbmFtZSwgdmFsdWUgfSBvZiBzb3VyY2VFbGVtZW50LmF0dHJpYnV0ZXMpIHtcbiAgICBkZXN0aW5hdGlvbkVsZW1lbnQuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVEb2N1bWVudEZyYWdtZW50KGh0bWwpIHtcbiAgY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XG4gIHRlbXBsYXRlLmlubmVySFRNTCA9IGh0bWw7XG4gIHJldHVybiB0ZW1wbGF0ZS5jb250ZW50XG59XG5cbmZ1bmN0aW9uIGRpc3BhdGNoKGV2ZW50TmFtZSwgeyB0YXJnZXQsIGNhbmNlbGFibGUsIGRldGFpbCB9ID0ge30pIHtcbiAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoZXZlbnROYW1lLCB7XG4gICAgY2FuY2VsYWJsZSxcbiAgICBidWJibGVzOiB0cnVlLFxuICAgIGNvbXBvc2VkOiB0cnVlLFxuICAgIGRldGFpbFxuICB9KTtcblxuICBpZiAodGFyZ2V0ICYmIHRhcmdldC5pc0Nvbm5lY3RlZCkge1xuICAgIHRhcmdldC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgfSBlbHNlIHtcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gIH1cblxuICByZXR1cm4gZXZlbnRcbn1cblxuZnVuY3Rpb24gY2FuY2VsRXZlbnQoZXZlbnQpIHtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG59XG5cbmZ1bmN0aW9uIG5leHRSZXBhaW50KCkge1xuICBpZiAoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSBcImhpZGRlblwiKSB7XG4gICAgcmV0dXJuIG5leHRFdmVudExvb3BUaWNrKClcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV4dEFuaW1hdGlvbkZyYW1lKClcbiAgfVxufVxuXG5mdW5jdGlvbiBuZXh0QW5pbWF0aW9uRnJhbWUoKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHJlc29sdmUoKSkpXG59XG5cbmZ1bmN0aW9uIG5leHRFdmVudExvb3BUaWNrKCkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQoKCkgPT4gcmVzb2x2ZSgpLCAwKSlcbn1cblxuZnVuY3Rpb24gbmV4dE1pY3JvdGFzaygpIHtcbiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXG59XG5cbmZ1bmN0aW9uIHBhcnNlSFRNTERvY3VtZW50KGh0bWwgPSBcIlwiKSB7XG4gIHJldHVybiBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKGh0bWwsIFwidGV4dC9odG1sXCIpXG59XG5cbmZ1bmN0aW9uIHVuaW5kZW50KHN0cmluZ3MsIC4uLnZhbHVlcykge1xuICBjb25zdCBsaW5lcyA9IGludGVycG9sYXRlKHN0cmluZ3MsIHZhbHVlcykucmVwbGFjZSgvXlxcbi8sIFwiXCIpLnNwbGl0KFwiXFxuXCIpO1xuICBjb25zdCBtYXRjaCA9IGxpbmVzWzBdLm1hdGNoKC9eXFxzKy8pO1xuICBjb25zdCBpbmRlbnQgPSBtYXRjaCA/IG1hdGNoWzBdLmxlbmd0aCA6IDA7XG4gIHJldHVybiBsaW5lcy5tYXAoKGxpbmUpID0+IGxpbmUuc2xpY2UoaW5kZW50KSkuam9pbihcIlxcblwiKVxufVxuXG5mdW5jdGlvbiBpbnRlcnBvbGF0ZShzdHJpbmdzLCB2YWx1ZXMpIHtcbiAgcmV0dXJuIHN0cmluZ3MucmVkdWNlKChyZXN1bHQsIHN0cmluZywgaSkgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0gdmFsdWVzW2ldID09IHVuZGVmaW5lZCA/IFwiXCIgOiB2YWx1ZXNbaV07XG4gICAgcmV0dXJuIHJlc3VsdCArIHN0cmluZyArIHZhbHVlXG4gIH0sIFwiXCIpXG59XG5cbmZ1bmN0aW9uIHV1aWQoKSB7XG4gIHJldHVybiBBcnJheS5mcm9tKHsgbGVuZ3RoOiAzNiB9KVxuICAgIC5tYXAoKF8sIGkpID0+IHtcbiAgICAgIGlmIChpID09IDggfHwgaSA9PSAxMyB8fCBpID09IDE4IHx8IGkgPT0gMjMpIHtcbiAgICAgICAgcmV0dXJuIFwiLVwiXG4gICAgICB9IGVsc2UgaWYgKGkgPT0gMTQpIHtcbiAgICAgICAgcmV0dXJuIFwiNFwiXG4gICAgICB9IGVsc2UgaWYgKGkgPT0gMTkpIHtcbiAgICAgICAgcmV0dXJuIChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0KSArIDgpLnRvU3RyaW5nKDE2KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDE1KS50b1N0cmluZygxNilcbiAgICAgIH1cbiAgICB9KVxuICAgIC5qb2luKFwiXCIpXG59XG5cbmZ1bmN0aW9uIGdldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lLCAuLi5lbGVtZW50cykge1xuICBmb3IgKGNvbnN0IHZhbHVlIG9mIGVsZW1lbnRzLm1hcCgoZWxlbWVudCkgPT4gZWxlbWVudD8uZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpKSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT0gXCJzdHJpbmdcIikgcmV0dXJuIHZhbHVlXG4gIH1cblxuICByZXR1cm4gbnVsbFxufVxuXG5mdW5jdGlvbiBoYXNBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSwgLi4uZWxlbWVudHMpIHtcbiAgcmV0dXJuIGVsZW1lbnRzLnNvbWUoKGVsZW1lbnQpID0+IGVsZW1lbnQgJiYgZWxlbWVudC5oYXNBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSkpXG59XG5cbmZ1bmN0aW9uIG1hcmtBc0J1c3koLi4uZWxlbWVudHMpIHtcbiAgZm9yIChjb25zdCBlbGVtZW50IG9mIGVsZW1lbnRzKSB7XG4gICAgaWYgKGVsZW1lbnQubG9jYWxOYW1lID09IFwidHVyYm8tZnJhbWVcIikge1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJidXN5XCIsIFwiXCIpO1xuICAgIH1cbiAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtYnVzeVwiLCBcInRydWVcIik7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2xlYXJCdXN5U3RhdGUoLi4uZWxlbWVudHMpIHtcbiAgZm9yIChjb25zdCBlbGVtZW50IG9mIGVsZW1lbnRzKSB7XG4gICAgaWYgKGVsZW1lbnQubG9jYWxOYW1lID09IFwidHVyYm8tZnJhbWVcIikge1xuICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJidXN5XCIpO1xuICAgIH1cblxuICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1idXN5XCIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHdhaXRGb3JMb2FkKGVsZW1lbnQsIHRpbWVvdXRJbk1pbGxpc2Vjb25kcyA9IDIwMDApIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgY29uc3Qgb25Db21wbGV0ZSA9ICgpID0+IHtcbiAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIG9uQ29tcGxldGUpO1xuICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLCBvbkNvbXBsZXRlKTtcbiAgICAgIHJlc29sdmUoKTtcbiAgICB9O1xuXG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBvbkNvbXBsZXRlLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgb25Db21wbGV0ZSwgeyBvbmNlOiB0cnVlIH0pO1xuICAgIHNldFRpbWVvdXQocmVzb2x2ZSwgdGltZW91dEluTWlsbGlzZWNvbmRzKTtcbiAgfSlcbn1cblxuZnVuY3Rpb24gZ2V0SGlzdG9yeU1ldGhvZEZvckFjdGlvbihhY3Rpb24pIHtcbiAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICBjYXNlIFwicmVwbGFjZVwiOlxuICAgICAgcmV0dXJuIGhpc3RvcnkucmVwbGFjZVN0YXRlXG4gICAgY2FzZSBcImFkdmFuY2VcIjpcbiAgICBjYXNlIFwicmVzdG9yZVwiOlxuICAgICAgcmV0dXJuIGhpc3RvcnkucHVzaFN0YXRlXG4gIH1cbn1cblxuZnVuY3Rpb24gaXNBY3Rpb24oYWN0aW9uKSB7XG4gIHJldHVybiBhY3Rpb24gPT0gXCJhZHZhbmNlXCIgfHwgYWN0aW9uID09IFwicmVwbGFjZVwiIHx8IGFjdGlvbiA9PSBcInJlc3RvcmVcIlxufVxuXG5mdW5jdGlvbiBnZXRWaXNpdEFjdGlvbiguLi5lbGVtZW50cykge1xuICBjb25zdCBhY3Rpb24gPSBnZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLWFjdGlvblwiLCAuLi5lbGVtZW50cyk7XG5cbiAgcmV0dXJuIGlzQWN0aW9uKGFjdGlvbikgPyBhY3Rpb24gOiBudWxsXG59XG5cbmZ1bmN0aW9uIGdldE1ldGFFbGVtZW50KG5hbWUpIHtcbiAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYG1ldGFbbmFtZT1cIiR7bmFtZX1cIl1gKVxufVxuXG5mdW5jdGlvbiBnZXRNZXRhQ29udGVudChuYW1lKSB7XG4gIGNvbnN0IGVsZW1lbnQgPSBnZXRNZXRhRWxlbWVudChuYW1lKTtcbiAgcmV0dXJuIGVsZW1lbnQgJiYgZWxlbWVudC5jb250ZW50XG59XG5cbmZ1bmN0aW9uIGdldENzcE5vbmNlKCkge1xuICBjb25zdCBlbGVtZW50ID0gZ2V0TWV0YUVsZW1lbnQoXCJjc3Atbm9uY2VcIik7XG5cbiAgaWYgKGVsZW1lbnQpIHtcbiAgICBjb25zdCB7IG5vbmNlLCBjb250ZW50IH0gPSBlbGVtZW50O1xuICAgIHJldHVybiBub25jZSA9PSBcIlwiID8gY29udGVudCA6IG5vbmNlXG4gIH1cbn1cblxuZnVuY3Rpb24gc2V0TWV0YUNvbnRlbnQobmFtZSwgY29udGVudCkge1xuICBsZXQgZWxlbWVudCA9IGdldE1ldGFFbGVtZW50KG5hbWUpO1xuXG4gIGlmICghZWxlbWVudCkge1xuICAgIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibWV0YVwiKTtcbiAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgbmFtZSk7XG5cbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICB9XG5cbiAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJjb250ZW50XCIsIGNvbnRlbnQpO1xuXG4gIHJldHVybiBlbGVtZW50XG59XG5cbmZ1bmN0aW9uIGZpbmRDbG9zZXN0UmVjdXJzaXZlbHkoZWxlbWVudCwgc2VsZWN0b3IpIHtcbiAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgcmV0dXJuIChcbiAgICAgIGVsZW1lbnQuY2xvc2VzdChzZWxlY3RvcikgfHwgZmluZENsb3Nlc3RSZWN1cnNpdmVseShlbGVtZW50LmFzc2lnbmVkU2xvdCB8fCBlbGVtZW50LmdldFJvb3ROb2RlKCk/Lmhvc3QsIHNlbGVjdG9yKVxuICAgIClcbiAgfVxufVxuXG5mdW5jdGlvbiBlbGVtZW50SXNGb2N1c2FibGUoZWxlbWVudCkge1xuICBjb25zdCBpbmVydERpc2FibGVkT3JIaWRkZW4gPSBcIltpbmVydF0sIDpkaXNhYmxlZCwgW2hpZGRlbl0sIGRldGFpbHM6bm90KFtvcGVuXSksIGRpYWxvZzpub3QoW29wZW5dKVwiO1xuXG4gIHJldHVybiAhIWVsZW1lbnQgJiYgZWxlbWVudC5jbG9zZXN0KGluZXJ0RGlzYWJsZWRPckhpZGRlbikgPT0gbnVsbCAmJiB0eXBlb2YgZWxlbWVudC5mb2N1cyA9PSBcImZ1bmN0aW9uXCJcbn1cblxuZnVuY3Rpb24gcXVlcnlBdXRvZm9jdXNhYmxlRWxlbWVudChlbGVtZW50T3JEb2N1bWVudEZyYWdtZW50KSB7XG4gIHJldHVybiBBcnJheS5mcm9tKGVsZW1lbnRPckRvY3VtZW50RnJhZ21lbnQucXVlcnlTZWxlY3RvckFsbChcIlthdXRvZm9jdXNdXCIpKS5maW5kKGVsZW1lbnRJc0ZvY3VzYWJsZSlcbn1cblxuYXN5bmMgZnVuY3Rpb24gYXJvdW5kKGNhbGxiYWNrLCByZWFkZXIpIHtcbiAgY29uc3QgYmVmb3JlID0gcmVhZGVyKCk7XG5cbiAgY2FsbGJhY2soKTtcblxuICBhd2FpdCBuZXh0QW5pbWF0aW9uRnJhbWUoKTtcblxuICBjb25zdCBhZnRlciA9IHJlYWRlcigpO1xuXG4gIHJldHVybiBbYmVmb3JlLCBhZnRlcl1cbn1cblxuZnVuY3Rpb24gZG9lc05vdFRhcmdldElGcmFtZShuYW1lKSB7XG4gIGlmIChuYW1lID09PSBcIl9ibGFua1wiKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH0gZWxzZSBpZiAobmFtZSkge1xuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShuYW1lKSkge1xuICAgICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MSUZyYW1lRWxlbWVudCkgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWVcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmRMaW5rRnJvbUNsaWNrVGFyZ2V0KHRhcmdldCkge1xuICBjb25zdCBsaW5rID0gZmluZENsb3Nlc3RSZWN1cnNpdmVseSh0YXJnZXQsIFwiYVtocmVmXSwgYVt4bGlua1xcXFw6aHJlZl1cIik7XG5cbiAgaWYgKCFsaW5rKSByZXR1cm4gbnVsbFxuICBpZiAobGluay5oYXNBdHRyaWJ1dGUoXCJkb3dubG9hZFwiKSkgcmV0dXJuIG51bGxcbiAgaWYgKGxpbmsuaGFzQXR0cmlidXRlKFwidGFyZ2V0XCIpICYmIGxpbmsudGFyZ2V0ICE9PSBcIl9zZWxmXCIpIHJldHVybiBudWxsXG5cbiAgcmV0dXJuIGxpbmtcbn1cblxuZnVuY3Rpb24gZ2V0TG9jYXRpb25Gb3JMaW5rKGxpbmspIHtcbiAgcmV0dXJuIGV4cGFuZFVSTChsaW5rLmdldEF0dHJpYnV0ZShcImhyZWZcIikgfHwgXCJcIilcbn1cblxuZnVuY3Rpb24gZGVib3VuY2UoZm4sIGRlbGF5KSB7XG4gIGxldCB0aW1lb3V0SWQgPSBudWxsO1xuXG4gIHJldHVybiAoLi4uYXJncykgPT4ge1xuICAgIGNvbnN0IGNhbGxiYWNrID0gKCkgPT4gZm4uYXBwbHkodGhpcywgYXJncyk7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgdGltZW91dElkID0gc2V0VGltZW91dChjYWxsYmFjaywgZGVsYXkpO1xuICB9XG59XG5cbmNvbnN0IHN1Ym1pdHRlciA9IHtcbiAgXCJhcmlhLWRpc2FibGVkXCI6IHtcbiAgICBiZWZvcmVTdWJtaXQ6IHN1Ym1pdHRlciA9PiB7XG4gICAgICBzdWJtaXR0ZXIuc2V0QXR0cmlidXRlKFwiYXJpYS1kaXNhYmxlZFwiLCBcInRydWVcIik7XG4gICAgICBzdWJtaXR0ZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNhbmNlbEV2ZW50KTtcbiAgICB9LFxuXG4gICAgYWZ0ZXJTdWJtaXQ6IHN1Ym1pdHRlciA9PiB7XG4gICAgICBzdWJtaXR0ZXIucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1kaXNhYmxlZFwiKTtcbiAgICAgIHN1Ym1pdHRlci5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2FuY2VsRXZlbnQpO1xuICAgIH1cbiAgfSxcblxuICBcImRpc2FibGVkXCI6IHtcbiAgICBiZWZvcmVTdWJtaXQ6IHN1Ym1pdHRlciA9PiBzdWJtaXR0ZXIuZGlzYWJsZWQgPSB0cnVlLFxuICAgIGFmdGVyU3VibWl0OiBzdWJtaXR0ZXIgPT4gc3VibWl0dGVyLmRpc2FibGVkID0gZmFsc2VcbiAgfVxufTtcblxuY2xhc3MgQ29uZmlnIHtcbiAgI3N1Ym1pdHRlciA9IG51bGxcblxuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBPYmplY3QuYXNzaWduKHRoaXMsIGNvbmZpZyk7XG4gIH1cblxuICBnZXQgc3VibWl0dGVyKCkge1xuICAgIHJldHVybiB0aGlzLiNzdWJtaXR0ZXJcbiAgfVxuXG4gIHNldCBzdWJtaXR0ZXIodmFsdWUpIHtcbiAgICB0aGlzLiNzdWJtaXR0ZXIgPSBzdWJtaXR0ZXJbdmFsdWVdIHx8IHZhbHVlO1xuICB9XG59XG5cbmNvbnN0IGZvcm1zID0gbmV3IENvbmZpZyh7XG4gIG1vZGU6IFwib25cIixcbiAgc3VibWl0dGVyOiBcImRpc2FibGVkXCJcbn0pO1xuXG5jb25zdCBjb25maWcgPSB7XG4gIGRyaXZlLFxuICBmb3Jtc1xufTtcblxuZnVuY3Rpb24gZXhwYW5kVVJMKGxvY2F0YWJsZSkge1xuICByZXR1cm4gbmV3IFVSTChsb2NhdGFibGUudG9TdHJpbmcoKSwgZG9jdW1lbnQuYmFzZVVSSSlcbn1cblxuZnVuY3Rpb24gZ2V0QW5jaG9yKHVybCkge1xuICBsZXQgYW5jaG9yTWF0Y2g7XG4gIGlmICh1cmwuaGFzaCkge1xuICAgIHJldHVybiB1cmwuaGFzaC5zbGljZSgxKVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25kLWFzc2lnblxuICB9IGVsc2UgaWYgKChhbmNob3JNYXRjaCA9IHVybC5ocmVmLm1hdGNoKC8jKC4qKSQvKSkpIHtcbiAgICByZXR1cm4gYW5jaG9yTWF0Y2hbMV1cbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRBY3Rpb24kMShmb3JtLCBzdWJtaXR0ZXIpIHtcbiAgY29uc3QgYWN0aW9uID0gc3VibWl0dGVyPy5nZXRBdHRyaWJ1dGUoXCJmb3JtYWN0aW9uXCIpIHx8IGZvcm0uZ2V0QXR0cmlidXRlKFwiYWN0aW9uXCIpIHx8IGZvcm0uYWN0aW9uO1xuXG4gIHJldHVybiBleHBhbmRVUkwoYWN0aW9uKVxufVxuXG5mdW5jdGlvbiBnZXRFeHRlbnNpb24odXJsKSB7XG4gIHJldHVybiAoZ2V0TGFzdFBhdGhDb21wb25lbnQodXJsKS5tYXRjaCgvXFwuW14uXSokLykgfHwgW10pWzBdIHx8IFwiXCJcbn1cblxuZnVuY3Rpb24gaXNQcmVmaXhlZEJ5KGJhc2VVUkwsIHVybCkge1xuICBjb25zdCBwcmVmaXggPSBhZGRUcmFpbGluZ1NsYXNoKHVybC5vcmlnaW4gKyB1cmwucGF0aG5hbWUpO1xuICByZXR1cm4gYWRkVHJhaWxpbmdTbGFzaChiYXNlVVJMLmhyZWYpID09PSBwcmVmaXggfHwgYmFzZVVSTC5ocmVmLnN0YXJ0c1dpdGgocHJlZml4KVxufVxuXG5mdW5jdGlvbiBsb2NhdGlvbklzVmlzaXRhYmxlKGxvY2F0aW9uLCByb290TG9jYXRpb24pIHtcbiAgcmV0dXJuIGlzUHJlZml4ZWRCeShsb2NhdGlvbiwgcm9vdExvY2F0aW9uKSAmJiAhY29uZmlnLmRyaXZlLnVudmlzaXRhYmxlRXh0ZW5zaW9ucy5oYXMoZ2V0RXh0ZW5zaW9uKGxvY2F0aW9uKSlcbn1cblxuZnVuY3Rpb24gZ2V0UmVxdWVzdFVSTCh1cmwpIHtcbiAgY29uc3QgYW5jaG9yID0gZ2V0QW5jaG9yKHVybCk7XG4gIHJldHVybiBhbmNob3IgIT0gbnVsbCA/IHVybC5ocmVmLnNsaWNlKDAsIC0oYW5jaG9yLmxlbmd0aCArIDEpKSA6IHVybC5ocmVmXG59XG5cbmZ1bmN0aW9uIHRvQ2FjaGVLZXkodXJsKSB7XG4gIHJldHVybiBnZXRSZXF1ZXN0VVJMKHVybClcbn1cblxuZnVuY3Rpb24gdXJsc0FyZUVxdWFsKGxlZnQsIHJpZ2h0KSB7XG4gIHJldHVybiBleHBhbmRVUkwobGVmdCkuaHJlZiA9PSBleHBhbmRVUkwocmlnaHQpLmhyZWZcbn1cblxuZnVuY3Rpb24gZ2V0UGF0aENvbXBvbmVudHModXJsKSB7XG4gIHJldHVybiB1cmwucGF0aG5hbWUuc3BsaXQoXCIvXCIpLnNsaWNlKDEpXG59XG5cbmZ1bmN0aW9uIGdldExhc3RQYXRoQ29tcG9uZW50KHVybCkge1xuICByZXR1cm4gZ2V0UGF0aENvbXBvbmVudHModXJsKS5zbGljZSgtMSlbMF1cbn1cblxuZnVuY3Rpb24gYWRkVHJhaWxpbmdTbGFzaCh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUuZW5kc1dpdGgoXCIvXCIpID8gdmFsdWUgOiB2YWx1ZSArIFwiL1wiXG59XG5cbmNsYXNzIEZldGNoUmVzcG9uc2Uge1xuICBjb25zdHJ1Y3RvcihyZXNwb25zZSkge1xuICAgIHRoaXMucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgfVxuXG4gIGdldCBzdWNjZWVkZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVzcG9uc2Uub2tcbiAgfVxuXG4gIGdldCBmYWlsZWQoKSB7XG4gICAgcmV0dXJuICF0aGlzLnN1Y2NlZWRlZFxuICB9XG5cbiAgZ2V0IGNsaWVudEVycm9yKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXR1c0NvZGUgPj0gNDAwICYmIHRoaXMuc3RhdHVzQ29kZSA8PSA0OTlcbiAgfVxuXG4gIGdldCBzZXJ2ZXJFcnJvcigpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0dXNDb2RlID49IDUwMCAmJiB0aGlzLnN0YXR1c0NvZGUgPD0gNTk5XG4gIH1cblxuICBnZXQgcmVkaXJlY3RlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5yZXNwb25zZS5yZWRpcmVjdGVkXG4gIH1cblxuICBnZXQgbG9jYXRpb24oKSB7XG4gICAgcmV0dXJuIGV4cGFuZFVSTCh0aGlzLnJlc3BvbnNlLnVybClcbiAgfVxuXG4gIGdldCBpc0hUTUwoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGVudFR5cGUgJiYgdGhpcy5jb250ZW50VHlwZS5tYXRjaCgvXig/OnRleHRcXC8oW15cXHM7LF0rXFxiKT9odG1sfGFwcGxpY2F0aW9uXFwveGh0bWxcXCt4bWwpXFxiLylcbiAgfVxuXG4gIGdldCBzdGF0dXNDb2RlKCkge1xuICAgIHJldHVybiB0aGlzLnJlc3BvbnNlLnN0YXR1c1xuICB9XG5cbiAgZ2V0IGNvbnRlbnRUeXBlKCkge1xuICAgIHJldHVybiB0aGlzLmhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKVxuICB9XG5cbiAgZ2V0IHJlc3BvbnNlVGV4dCgpIHtcbiAgICByZXR1cm4gdGhpcy5yZXNwb25zZS5jbG9uZSgpLnRleHQoKVxuICB9XG5cbiAgZ2V0IHJlc3BvbnNlSFRNTCgpIHtcbiAgICBpZiAodGhpcy5pc0hUTUwpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlc3BvbnNlLmNsb25lKCkudGV4dCgpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodW5kZWZpbmVkKVxuICAgIH1cbiAgfVxuXG4gIGhlYWRlcihuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMucmVzcG9uc2UuaGVhZGVycy5nZXQobmFtZSlcbiAgfVxufVxuXG5jbGFzcyBMaW1pdGVkU2V0IGV4dGVuZHMgU2V0IHtcbiAgY29uc3RydWN0b3IobWF4U2l6ZSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5tYXhTaXplID0gbWF4U2l6ZTtcbiAgfVxuXG4gIGFkZCh2YWx1ZSkge1xuICAgIGlmICh0aGlzLnNpemUgPj0gdGhpcy5tYXhTaXplKSB7XG4gICAgICBjb25zdCBpdGVyYXRvciA9IHRoaXMudmFsdWVzKCk7XG4gICAgICBjb25zdCBvbGRlc3RWYWx1ZSA9IGl0ZXJhdG9yLm5leHQoKS52YWx1ZTtcbiAgICAgIHRoaXMuZGVsZXRlKG9sZGVzdFZhbHVlKTtcbiAgICB9XG4gICAgc3VwZXIuYWRkKHZhbHVlKTtcbiAgfVxufVxuXG5jb25zdCByZWNlbnRSZXF1ZXN0cyA9IG5ldyBMaW1pdGVkU2V0KDIwKTtcblxuZnVuY3Rpb24gZmV0Y2hXaXRoVHVyYm9IZWFkZXJzKHVybCwgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IG1vZGlmaWVkSGVhZGVycyA9IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycyB8fCB7fSk7XG4gIGNvbnN0IHJlcXVlc3RVSUQgPSB1dWlkKCk7XG4gIHJlY2VudFJlcXVlc3RzLmFkZChyZXF1ZXN0VUlEKTtcbiAgbW9kaWZpZWRIZWFkZXJzLmFwcGVuZChcIlgtVHVyYm8tUmVxdWVzdC1JZFwiLCByZXF1ZXN0VUlEKTtcblxuICByZXR1cm4gd2luZG93LmZldGNoKHVybCwge1xuICAgIC4uLm9wdGlvbnMsXG4gICAgaGVhZGVyczogbW9kaWZpZWRIZWFkZXJzXG4gIH0pXG59XG5cbmZ1bmN0aW9uIGZldGNoTWV0aG9kRnJvbVN0cmluZyhtZXRob2QpIHtcbiAgc3dpdGNoIChtZXRob2QudG9Mb3dlckNhc2UoKSkge1xuICAgIGNhc2UgXCJnZXRcIjpcbiAgICAgIHJldHVybiBGZXRjaE1ldGhvZC5nZXRcbiAgICBjYXNlIFwicG9zdFwiOlxuICAgICAgcmV0dXJuIEZldGNoTWV0aG9kLnBvc3RcbiAgICBjYXNlIFwicHV0XCI6XG4gICAgICByZXR1cm4gRmV0Y2hNZXRob2QucHV0XG4gICAgY2FzZSBcInBhdGNoXCI6XG4gICAgICByZXR1cm4gRmV0Y2hNZXRob2QucGF0Y2hcbiAgICBjYXNlIFwiZGVsZXRlXCI6XG4gICAgICByZXR1cm4gRmV0Y2hNZXRob2QuZGVsZXRlXG4gIH1cbn1cblxuY29uc3QgRmV0Y2hNZXRob2QgPSB7XG4gIGdldDogXCJnZXRcIixcbiAgcG9zdDogXCJwb3N0XCIsXG4gIHB1dDogXCJwdXRcIixcbiAgcGF0Y2g6IFwicGF0Y2hcIixcbiAgZGVsZXRlOiBcImRlbGV0ZVwiXG59O1xuXG5mdW5jdGlvbiBmZXRjaEVuY3R5cGVGcm9tU3RyaW5nKGVuY29kaW5nKSB7XG4gIHN3aXRjaCAoZW5jb2RpbmcudG9Mb3dlckNhc2UoKSkge1xuICAgIGNhc2UgRmV0Y2hFbmN0eXBlLm11bHRpcGFydDpcbiAgICAgIHJldHVybiBGZXRjaEVuY3R5cGUubXVsdGlwYXJ0XG4gICAgY2FzZSBGZXRjaEVuY3R5cGUucGxhaW46XG4gICAgICByZXR1cm4gRmV0Y2hFbmN0eXBlLnBsYWluXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBGZXRjaEVuY3R5cGUudXJsRW5jb2RlZFxuICB9XG59XG5cbmNvbnN0IEZldGNoRW5jdHlwZSA9IHtcbiAgdXJsRW5jb2RlZDogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIixcbiAgbXVsdGlwYXJ0OiBcIm11bHRpcGFydC9mb3JtLWRhdGFcIixcbiAgcGxhaW46IFwidGV4dC9wbGFpblwiXG59O1xuXG5jbGFzcyBGZXRjaFJlcXVlc3Qge1xuICBhYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKClcbiAgI3Jlc29sdmVSZXF1ZXN0UHJvbWlzZSA9IChfdmFsdWUpID0+IHt9XG5cbiAgY29uc3RydWN0b3IoZGVsZWdhdGUsIG1ldGhvZCwgbG9jYXRpb24sIHJlcXVlc3RCb2R5ID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpLCB0YXJnZXQgPSBudWxsLCBlbmN0eXBlID0gRmV0Y2hFbmN0eXBlLnVybEVuY29kZWQpIHtcbiAgICBjb25zdCBbdXJsLCBib2R5XSA9IGJ1aWxkUmVzb3VyY2VBbmRCb2R5KGV4cGFuZFVSTChsb2NhdGlvbiksIG1ldGhvZCwgcmVxdWVzdEJvZHksIGVuY3R5cGUpO1xuXG4gICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgIHRoaXMudXJsID0gdXJsO1xuICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgIHRoaXMuZmV0Y2hPcHRpb25zID0ge1xuICAgICAgY3JlZGVudGlhbHM6IFwic2FtZS1vcmlnaW5cIixcbiAgICAgIHJlZGlyZWN0OiBcImZvbGxvd1wiLFxuICAgICAgbWV0aG9kOiBtZXRob2QudG9VcHBlckNhc2UoKSxcbiAgICAgIGhlYWRlcnM6IHsgLi4udGhpcy5kZWZhdWx0SGVhZGVycyB9LFxuICAgICAgYm9keTogYm9keSxcbiAgICAgIHNpZ25hbDogdGhpcy5hYm9ydFNpZ25hbCxcbiAgICAgIHJlZmVycmVyOiB0aGlzLmRlbGVnYXRlLnJlZmVycmVyPy5ocmVmXG4gICAgfTtcbiAgICB0aGlzLmVuY3R5cGUgPSBlbmN0eXBlO1xuICB9XG5cbiAgZ2V0IG1ldGhvZCgpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaE9wdGlvbnMubWV0aG9kXG4gIH1cblxuICBzZXQgbWV0aG9kKHZhbHVlKSB7XG4gICAgY29uc3QgZmV0Y2hCb2R5ID0gdGhpcy5pc1NhZmUgPyB0aGlzLnVybC5zZWFyY2hQYXJhbXMgOiB0aGlzLmZldGNoT3B0aW9ucy5ib2R5IHx8IG5ldyBGb3JtRGF0YSgpO1xuICAgIGNvbnN0IGZldGNoTWV0aG9kID0gZmV0Y2hNZXRob2RGcm9tU3RyaW5nKHZhbHVlKSB8fCBGZXRjaE1ldGhvZC5nZXQ7XG5cbiAgICB0aGlzLnVybC5zZWFyY2ggPSBcIlwiO1xuXG4gICAgY29uc3QgW3VybCwgYm9keV0gPSBidWlsZFJlc291cmNlQW5kQm9keSh0aGlzLnVybCwgZmV0Y2hNZXRob2QsIGZldGNoQm9keSwgdGhpcy5lbmN0eXBlKTtcblxuICAgIHRoaXMudXJsID0gdXJsO1xuICAgIHRoaXMuZmV0Y2hPcHRpb25zLmJvZHkgPSBib2R5O1xuICAgIHRoaXMuZmV0Y2hPcHRpb25zLm1ldGhvZCA9IGZldGNoTWV0aG9kLnRvVXBwZXJDYXNlKCk7XG4gIH1cblxuICBnZXQgaGVhZGVycygpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaE9wdGlvbnMuaGVhZGVyc1xuICB9XG5cbiAgc2V0IGhlYWRlcnModmFsdWUpIHtcbiAgICB0aGlzLmZldGNoT3B0aW9ucy5oZWFkZXJzID0gdmFsdWU7XG4gIH1cblxuICBnZXQgYm9keSgpIHtcbiAgICBpZiAodGhpcy5pc1NhZmUpIHtcbiAgICAgIHJldHVybiB0aGlzLnVybC5zZWFyY2hQYXJhbXNcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hPcHRpb25zLmJvZHlcbiAgICB9XG4gIH1cblxuICBzZXQgYm9keSh2YWx1ZSkge1xuICAgIHRoaXMuZmV0Y2hPcHRpb25zLmJvZHkgPSB2YWx1ZTtcbiAgfVxuXG4gIGdldCBsb2NhdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy51cmxcbiAgfVxuXG4gIGdldCBwYXJhbXMoKSB7XG4gICAgcmV0dXJuIHRoaXMudXJsLnNlYXJjaFBhcmFtc1xuICB9XG5cbiAgZ2V0IGVudHJpZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuYm9keSA/IEFycmF5LmZyb20odGhpcy5ib2R5LmVudHJpZXMoKSkgOiBbXVxuICB9XG5cbiAgY2FuY2VsKCkge1xuICAgIHRoaXMuYWJvcnRDb250cm9sbGVyLmFib3J0KCk7XG4gIH1cblxuICBhc3luYyBwZXJmb3JtKCkge1xuICAgIGNvbnN0IHsgZmV0Y2hPcHRpb25zIH0gPSB0aGlzO1xuICAgIHRoaXMuZGVsZWdhdGUucHJlcGFyZVJlcXVlc3QodGhpcyk7XG4gICAgY29uc3QgZXZlbnQgPSBhd2FpdCB0aGlzLiNhbGxvd1JlcXVlc3RUb0JlSW50ZXJjZXB0ZWQoZmV0Y2hPcHRpb25zKTtcbiAgICB0cnkge1xuICAgICAgdGhpcy5kZWxlZ2F0ZS5yZXF1ZXN0U3RhcnRlZCh0aGlzKTtcblxuICAgICAgaWYgKGV2ZW50LmRldGFpbC5mZXRjaFJlcXVlc3QpIHtcbiAgICAgICAgdGhpcy5yZXNwb25zZSA9IGV2ZW50LmRldGFpbC5mZXRjaFJlcXVlc3QucmVzcG9uc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlc3BvbnNlID0gZmV0Y2hXaXRoVHVyYm9IZWFkZXJzKHRoaXMudXJsLmhyZWYsIGZldGNoT3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXNwb25zZTtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnJlY2VpdmUocmVzcG9uc2UpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvci5uYW1lICE9PSBcIkFib3J0RXJyb3JcIikge1xuICAgICAgICBpZiAodGhpcy4jd2lsbERlbGVnYXRlRXJyb3JIYW5kbGluZyhlcnJvcikpIHtcbiAgICAgICAgICB0aGlzLmRlbGVnYXRlLnJlcXVlc3RFcnJvcmVkKHRoaXMsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlcnJvclxuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLmRlbGVnYXRlLnJlcXVlc3RGaW5pc2hlZCh0aGlzKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyByZWNlaXZlKHJlc3BvbnNlKSB7XG4gICAgY29uc3QgZmV0Y2hSZXNwb25zZSA9IG5ldyBGZXRjaFJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICBjb25zdCBldmVudCA9IGRpc3BhdGNoKFwidHVyYm86YmVmb3JlLWZldGNoLXJlc3BvbnNlXCIsIHtcbiAgICAgIGNhbmNlbGFibGU6IHRydWUsXG4gICAgICBkZXRhaWw6IHsgZmV0Y2hSZXNwb25zZSB9LFxuICAgICAgdGFyZ2V0OiB0aGlzLnRhcmdldFxuICAgIH0pO1xuICAgIGlmIChldmVudC5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICB0aGlzLmRlbGVnYXRlLnJlcXVlc3RQcmV2ZW50ZWRIYW5kbGluZ1Jlc3BvbnNlKHRoaXMsIGZldGNoUmVzcG9uc2UpO1xuICAgIH0gZWxzZSBpZiAoZmV0Y2hSZXNwb25zZS5zdWNjZWVkZWQpIHtcbiAgICAgIHRoaXMuZGVsZWdhdGUucmVxdWVzdFN1Y2NlZWRlZFdpdGhSZXNwb25zZSh0aGlzLCBmZXRjaFJlc3BvbnNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kZWxlZ2F0ZS5yZXF1ZXN0RmFpbGVkV2l0aFJlc3BvbnNlKHRoaXMsIGZldGNoUmVzcG9uc2UpO1xuICAgIH1cbiAgICByZXR1cm4gZmV0Y2hSZXNwb25zZVxuICB9XG5cbiAgZ2V0IGRlZmF1bHRIZWFkZXJzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBBY2NlcHQ6IFwidGV4dC9odG1sLCBhcHBsaWNhdGlvbi94aHRtbCt4bWxcIlxuICAgIH1cbiAgfVxuXG4gIGdldCBpc1NhZmUoKSB7XG4gICAgcmV0dXJuIGlzU2FmZSh0aGlzLm1ldGhvZClcbiAgfVxuXG4gIGdldCBhYm9ydFNpZ25hbCgpIHtcbiAgICByZXR1cm4gdGhpcy5hYm9ydENvbnRyb2xsZXIuc2lnbmFsXG4gIH1cblxuICBhY2NlcHRSZXNwb25zZVR5cGUobWltZVR5cGUpIHtcbiAgICB0aGlzLmhlYWRlcnNbXCJBY2NlcHRcIl0gPSBbbWltZVR5cGUsIHRoaXMuaGVhZGVyc1tcIkFjY2VwdFwiXV0uam9pbihcIiwgXCIpO1xuICB9XG5cbiAgYXN5bmMgI2FsbG93UmVxdWVzdFRvQmVJbnRlcmNlcHRlZChmZXRjaE9wdGlvbnMpIHtcbiAgICBjb25zdCByZXF1ZXN0SW50ZXJjZXB0aW9uID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+ICh0aGlzLiNyZXNvbHZlUmVxdWVzdFByb21pc2UgPSByZXNvbHZlKSk7XG4gICAgY29uc3QgZXZlbnQgPSBkaXNwYXRjaChcInR1cmJvOmJlZm9yZS1mZXRjaC1yZXF1ZXN0XCIsIHtcbiAgICAgIGNhbmNlbGFibGU6IHRydWUsXG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgZmV0Y2hPcHRpb25zLFxuICAgICAgICB1cmw6IHRoaXMudXJsLFxuICAgICAgICByZXN1bWU6IHRoaXMuI3Jlc29sdmVSZXF1ZXN0UHJvbWlzZVxuICAgICAgfSxcbiAgICAgIHRhcmdldDogdGhpcy50YXJnZXRcbiAgICB9KTtcbiAgICB0aGlzLnVybCA9IGV2ZW50LmRldGFpbC51cmw7XG4gICAgaWYgKGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIGF3YWl0IHJlcXVlc3RJbnRlcmNlcHRpb247XG5cbiAgICByZXR1cm4gZXZlbnRcbiAgfVxuXG4gICN3aWxsRGVsZWdhdGVFcnJvckhhbmRsaW5nKGVycm9yKSB7XG4gICAgY29uc3QgZXZlbnQgPSBkaXNwYXRjaChcInR1cmJvOmZldGNoLXJlcXVlc3QtZXJyb3JcIiwge1xuICAgICAgdGFyZ2V0OiB0aGlzLnRhcmdldCxcbiAgICAgIGNhbmNlbGFibGU6IHRydWUsXG4gICAgICBkZXRhaWw6IHsgcmVxdWVzdDogdGhpcywgZXJyb3I6IGVycm9yIH1cbiAgICB9KTtcblxuICAgIHJldHVybiAhZXZlbnQuZGVmYXVsdFByZXZlbnRlZFxuICB9XG59XG5cbmZ1bmN0aW9uIGlzU2FmZShmZXRjaE1ldGhvZCkge1xuICByZXR1cm4gZmV0Y2hNZXRob2RGcm9tU3RyaW5nKGZldGNoTWV0aG9kKSA9PSBGZXRjaE1ldGhvZC5nZXRcbn1cblxuZnVuY3Rpb24gYnVpbGRSZXNvdXJjZUFuZEJvZHkocmVzb3VyY2UsIG1ldGhvZCwgcmVxdWVzdEJvZHksIGVuY3R5cGUpIHtcbiAgY29uc3Qgc2VhcmNoUGFyYW1zID1cbiAgICBBcnJheS5mcm9tKHJlcXVlc3RCb2R5KS5sZW5ndGggPiAwID8gbmV3IFVSTFNlYXJjaFBhcmFtcyhlbnRyaWVzRXhjbHVkaW5nRmlsZXMocmVxdWVzdEJvZHkpKSA6IHJlc291cmNlLnNlYXJjaFBhcmFtcztcblxuICBpZiAoaXNTYWZlKG1ldGhvZCkpIHtcbiAgICByZXR1cm4gW21lcmdlSW50b1VSTFNlYXJjaFBhcmFtcyhyZXNvdXJjZSwgc2VhcmNoUGFyYW1zKSwgbnVsbF1cbiAgfSBlbHNlIGlmIChlbmN0eXBlID09IEZldGNoRW5jdHlwZS51cmxFbmNvZGVkKSB7XG4gICAgcmV0dXJuIFtyZXNvdXJjZSwgc2VhcmNoUGFyYW1zXVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBbcmVzb3VyY2UsIHJlcXVlc3RCb2R5XVxuICB9XG59XG5cbmZ1bmN0aW9uIGVudHJpZXNFeGNsdWRpbmdGaWxlcyhyZXF1ZXN0Qm9keSkge1xuICBjb25zdCBlbnRyaWVzID0gW107XG5cbiAgZm9yIChjb25zdCBbbmFtZSwgdmFsdWVdIG9mIHJlcXVlc3RCb2R5KSB7XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRmlsZSkgY29udGludWVcbiAgICBlbHNlIGVudHJpZXMucHVzaChbbmFtZSwgdmFsdWVdKTtcbiAgfVxuXG4gIHJldHVybiBlbnRyaWVzXG59XG5cbmZ1bmN0aW9uIG1lcmdlSW50b1VSTFNlYXJjaFBhcmFtcyh1cmwsIHJlcXVlc3RCb2R5KSB7XG4gIGNvbnN0IHNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoZW50cmllc0V4Y2x1ZGluZ0ZpbGVzKHJlcXVlc3RCb2R5KSk7XG5cbiAgdXJsLnNlYXJjaCA9IHNlYXJjaFBhcmFtcy50b1N0cmluZygpO1xuXG4gIHJldHVybiB1cmxcbn1cblxuY2xhc3MgQXBwZWFyYW5jZU9ic2VydmVyIHtcbiAgc3RhcnRlZCA9IGZhbHNlXG5cbiAgY29uc3RydWN0b3IoZGVsZWdhdGUsIGVsZW1lbnQpIHtcbiAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKHRoaXMuaW50ZXJzZWN0KTtcbiAgfVxuXG4gIHN0YXJ0KCkge1xuICAgIGlmICghdGhpcy5zdGFydGVkKSB7XG4gICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlci5vYnNlcnZlKHRoaXMuZWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgc3RvcCgpIHtcbiAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIudW5vYnNlcnZlKHRoaXMuZWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgaW50ZXJzZWN0ID0gKGVudHJpZXMpID0+IHtcbiAgICBjb25zdCBsYXN0RW50cnkgPSBlbnRyaWVzLnNsaWNlKC0xKVswXTtcbiAgICBpZiAobGFzdEVudHJ5Py5pc0ludGVyc2VjdGluZykge1xuICAgICAgdGhpcy5kZWxlZ2F0ZS5lbGVtZW50QXBwZWFyZWRJblZpZXdwb3J0KHRoaXMuZWxlbWVudCk7XG4gICAgfVxuICB9XG59XG5cbmNsYXNzIFN0cmVhbU1lc3NhZ2Uge1xuICBzdGF0aWMgY29udGVudFR5cGUgPSBcInRleHQvdm5kLnR1cmJvLXN0cmVhbS5odG1sXCJcblxuICBzdGF0aWMgd3JhcChtZXNzYWdlKSB7XG4gICAgaWYgKHR5cGVvZiBtZXNzYWdlID09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiBuZXcgdGhpcyhjcmVhdGVEb2N1bWVudEZyYWdtZW50KG1lc3NhZ2UpKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbWVzc2FnZVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGZyYWdtZW50KSB7XG4gICAgdGhpcy5mcmFnbWVudCA9IGltcG9ydFN0cmVhbUVsZW1lbnRzKGZyYWdtZW50KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbXBvcnRTdHJlYW1FbGVtZW50cyhmcmFnbWVudCkge1xuICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZnJhZ21lbnQucXVlcnlTZWxlY3RvckFsbChcInR1cmJvLXN0cmVhbVwiKSkge1xuICAgIGNvbnN0IHN0cmVhbUVsZW1lbnQgPSBkb2N1bWVudC5pbXBvcnROb2RlKGVsZW1lbnQsIHRydWUpO1xuXG4gICAgZm9yIChjb25zdCBpbmVydFNjcmlwdEVsZW1lbnQgb2Ygc3RyZWFtRWxlbWVudC50ZW1wbGF0ZUVsZW1lbnQuY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKFwic2NyaXB0XCIpKSB7XG4gICAgICBpbmVydFNjcmlwdEVsZW1lbnQucmVwbGFjZVdpdGgoYWN0aXZhdGVTY3JpcHRFbGVtZW50KGluZXJ0U2NyaXB0RWxlbWVudCkpO1xuICAgIH1cblxuICAgIGVsZW1lbnQucmVwbGFjZVdpdGgoc3RyZWFtRWxlbWVudCk7XG4gIH1cblxuICByZXR1cm4gZnJhZ21lbnRcbn1cblxuY29uc3QgUFJFRkVUQ0hfREVMQVkgPSAxMDA7XG5cbmNsYXNzIFByZWZldGNoQ2FjaGUge1xuICAjcHJlZmV0Y2hUaW1lb3V0ID0gbnVsbFxuICAjcHJlZmV0Y2hlZCA9IG51bGxcblxuICBnZXQodXJsKSB7XG4gICAgaWYgKHRoaXMuI3ByZWZldGNoZWQgJiYgdGhpcy4jcHJlZmV0Y2hlZC51cmwgPT09IHVybCAmJiB0aGlzLiNwcmVmZXRjaGVkLmV4cGlyZSA+IERhdGUubm93KCkpIHtcbiAgICAgIHJldHVybiB0aGlzLiNwcmVmZXRjaGVkLnJlcXVlc3RcbiAgICB9XG4gIH1cblxuICBzZXRMYXRlcih1cmwsIHJlcXVlc3QsIHR0bCkge1xuICAgIHRoaXMuY2xlYXIoKTtcblxuICAgIHRoaXMuI3ByZWZldGNoVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgcmVxdWVzdC5wZXJmb3JtKCk7XG4gICAgICB0aGlzLnNldCh1cmwsIHJlcXVlc3QsIHR0bCk7XG4gICAgICB0aGlzLiNwcmVmZXRjaFRpbWVvdXQgPSBudWxsO1xuICAgIH0sIFBSRUZFVENIX0RFTEFZKTtcbiAgfVxuXG4gIHNldCh1cmwsIHJlcXVlc3QsIHR0bCkge1xuICAgIHRoaXMuI3ByZWZldGNoZWQgPSB7IHVybCwgcmVxdWVzdCwgZXhwaXJlOiBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSArIHR0bCkgfTtcbiAgfVxuXG4gIGNsZWFyKCkge1xuICAgIGlmICh0aGlzLiNwcmVmZXRjaFRpbWVvdXQpIGNsZWFyVGltZW91dCh0aGlzLiNwcmVmZXRjaFRpbWVvdXQpO1xuICAgIHRoaXMuI3ByZWZldGNoZWQgPSBudWxsO1xuICB9XG59XG5cbmNvbnN0IGNhY2hlVHRsID0gMTAgKiAxMDAwO1xuY29uc3QgcHJlZmV0Y2hDYWNoZSA9IG5ldyBQcmVmZXRjaENhY2hlKCk7XG5cbmNvbnN0IEZvcm1TdWJtaXNzaW9uU3RhdGUgPSB7XG4gIGluaXRpYWxpemVkOiBcImluaXRpYWxpemVkXCIsXG4gIHJlcXVlc3Rpbmc6IFwicmVxdWVzdGluZ1wiLFxuICB3YWl0aW5nOiBcIndhaXRpbmdcIixcbiAgcmVjZWl2aW5nOiBcInJlY2VpdmluZ1wiLFxuICBzdG9wcGluZzogXCJzdG9wcGluZ1wiLFxuICBzdG9wcGVkOiBcInN0b3BwZWRcIlxufTtcblxuY2xhc3MgRm9ybVN1Ym1pc3Npb24ge1xuICBzdGF0ZSA9IEZvcm1TdWJtaXNzaW9uU3RhdGUuaW5pdGlhbGl6ZWRcblxuICBzdGF0aWMgY29uZmlybU1ldGhvZChtZXNzYWdlKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjb25maXJtKG1lc3NhZ2UpKVxuICB9XG5cbiAgY29uc3RydWN0b3IoZGVsZWdhdGUsIGZvcm1FbGVtZW50LCBzdWJtaXR0ZXIsIG11c3RSZWRpcmVjdCA9IGZhbHNlKSB7XG4gICAgY29uc3QgbWV0aG9kID0gZ2V0TWV0aG9kKGZvcm1FbGVtZW50LCBzdWJtaXR0ZXIpO1xuICAgIGNvbnN0IGFjdGlvbiA9IGdldEFjdGlvbihnZXRGb3JtQWN0aW9uKGZvcm1FbGVtZW50LCBzdWJtaXR0ZXIpLCBtZXRob2QpO1xuICAgIGNvbnN0IGJvZHkgPSBidWlsZEZvcm1EYXRhKGZvcm1FbGVtZW50LCBzdWJtaXR0ZXIpO1xuICAgIGNvbnN0IGVuY3R5cGUgPSBnZXRFbmN0eXBlKGZvcm1FbGVtZW50LCBzdWJtaXR0ZXIpO1xuXG4gICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgIHRoaXMuZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICB0aGlzLnN1Ym1pdHRlciA9IHN1Ym1pdHRlcjtcbiAgICB0aGlzLmZldGNoUmVxdWVzdCA9IG5ldyBGZXRjaFJlcXVlc3QodGhpcywgbWV0aG9kLCBhY3Rpb24sIGJvZHksIGZvcm1FbGVtZW50LCBlbmN0eXBlKTtcbiAgICB0aGlzLm11c3RSZWRpcmVjdCA9IG11c3RSZWRpcmVjdDtcbiAgfVxuXG4gIGdldCBtZXRob2QoKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hSZXF1ZXN0Lm1ldGhvZFxuICB9XG5cbiAgc2V0IG1ldGhvZCh2YWx1ZSkge1xuICAgIHRoaXMuZmV0Y2hSZXF1ZXN0Lm1ldGhvZCA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IGFjdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaFJlcXVlc3QudXJsLnRvU3RyaW5nKClcbiAgfVxuXG4gIHNldCBhY3Rpb24odmFsdWUpIHtcbiAgICB0aGlzLmZldGNoUmVxdWVzdC51cmwgPSBleHBhbmRVUkwodmFsdWUpO1xuICB9XG5cbiAgZ2V0IGJvZHkoKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hSZXF1ZXN0LmJvZHlcbiAgfVxuXG4gIGdldCBlbmN0eXBlKCkge1xuICAgIHJldHVybiB0aGlzLmZldGNoUmVxdWVzdC5lbmN0eXBlXG4gIH1cblxuICBnZXQgaXNTYWZlKCkge1xuICAgIHJldHVybiB0aGlzLmZldGNoUmVxdWVzdC5pc1NhZmVcbiAgfVxuXG4gIGdldCBsb2NhdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaFJlcXVlc3QudXJsXG4gIH1cblxuICAvLyBUaGUgc3VibWlzc2lvbiBwcm9jZXNzXG5cbiAgYXN5bmMgc3RhcnQoKSB7XG4gICAgY29uc3QgeyBpbml0aWFsaXplZCwgcmVxdWVzdGluZyB9ID0gRm9ybVN1Ym1pc3Npb25TdGF0ZTtcbiAgICBjb25zdCBjb25maXJtYXRpb25NZXNzYWdlID0gZ2V0QXR0cmlidXRlKFwiZGF0YS10dXJiby1jb25maXJtXCIsIHRoaXMuc3VibWl0dGVyLCB0aGlzLmZvcm1FbGVtZW50KTtcblxuICAgIGlmICh0eXBlb2YgY29uZmlybWF0aW9uTWVzc2FnZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgY29uc3QgY29uZmlybU1ldGhvZCA9IHR5cGVvZiBjb25maWcuZm9ybXMuY29uZmlybSA9PT0gXCJmdW5jdGlvblwiID9cbiAgICAgICAgY29uZmlnLmZvcm1zLmNvbmZpcm0gOlxuICAgICAgICBGb3JtU3VibWlzc2lvbi5jb25maXJtTWV0aG9kO1xuXG4gICAgICBjb25zdCBhbnN3ZXIgPSBhd2FpdCBjb25maXJtTWV0aG9kKGNvbmZpcm1hdGlvbk1lc3NhZ2UsIHRoaXMuZm9ybUVsZW1lbnQsIHRoaXMuc3VibWl0dGVyKTtcbiAgICAgIGlmICghYW5zd2VyKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXRlID09IGluaXRpYWxpemVkKSB7XG4gICAgICB0aGlzLnN0YXRlID0gcmVxdWVzdGluZztcbiAgICAgIHJldHVybiB0aGlzLmZldGNoUmVxdWVzdC5wZXJmb3JtKClcbiAgICB9XG4gIH1cblxuICBzdG9wKCkge1xuICAgIGNvbnN0IHsgc3RvcHBpbmcsIHN0b3BwZWQgfSA9IEZvcm1TdWJtaXNzaW9uU3RhdGU7XG4gICAgaWYgKHRoaXMuc3RhdGUgIT0gc3RvcHBpbmcgJiYgdGhpcy5zdGF0ZSAhPSBzdG9wcGVkKSB7XG4gICAgICB0aGlzLnN0YXRlID0gc3RvcHBpbmc7XG4gICAgICB0aGlzLmZldGNoUmVxdWVzdC5jYW5jZWwoKTtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgLy8gRmV0Y2ggcmVxdWVzdCBkZWxlZ2F0ZVxuXG4gIHByZXBhcmVSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgICBpZiAoIXJlcXVlc3QuaXNTYWZlKSB7XG4gICAgICBjb25zdCB0b2tlbiA9IGdldENvb2tpZVZhbHVlKGdldE1ldGFDb250ZW50KFwiY3NyZi1wYXJhbVwiKSkgfHwgZ2V0TWV0YUNvbnRlbnQoXCJjc3JmLXRva2VuXCIpO1xuICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgIHJlcXVlc3QuaGVhZGVyc1tcIlgtQ1NSRi1Ub2tlblwiXSA9IHRva2VuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnJlcXVlc3RBY2NlcHRzVHVyYm9TdHJlYW1SZXNwb25zZShyZXF1ZXN0KSkge1xuICAgICAgcmVxdWVzdC5hY2NlcHRSZXNwb25zZVR5cGUoU3RyZWFtTWVzc2FnZS5jb250ZW50VHlwZSk7XG4gICAgfVxuICB9XG5cbiAgcmVxdWVzdFN0YXJ0ZWQoX3JlcXVlc3QpIHtcbiAgICB0aGlzLnN0YXRlID0gRm9ybVN1Ym1pc3Npb25TdGF0ZS53YWl0aW5nO1xuICAgIGlmICh0aGlzLnN1Ym1pdHRlcikgY29uZmlnLmZvcm1zLnN1Ym1pdHRlci5iZWZvcmVTdWJtaXQodGhpcy5zdWJtaXR0ZXIpO1xuICAgIHRoaXMuc2V0U3VibWl0c1dpdGgoKTtcbiAgICBtYXJrQXNCdXN5KHRoaXMuZm9ybUVsZW1lbnQpO1xuICAgIGRpc3BhdGNoKFwidHVyYm86c3VibWl0LXN0YXJ0XCIsIHtcbiAgICAgIHRhcmdldDogdGhpcy5mb3JtRWxlbWVudCxcbiAgICAgIGRldGFpbDogeyBmb3JtU3VibWlzc2lvbjogdGhpcyB9XG4gICAgfSk7XG4gICAgdGhpcy5kZWxlZ2F0ZS5mb3JtU3VibWlzc2lvblN0YXJ0ZWQodGhpcyk7XG4gIH1cblxuICByZXF1ZXN0UHJldmVudGVkSGFuZGxpbmdSZXNwb25zZShyZXF1ZXN0LCByZXNwb25zZSkge1xuICAgIHByZWZldGNoQ2FjaGUuY2xlYXIoKTtcblxuICAgIHRoaXMucmVzdWx0ID0geyBzdWNjZXNzOiByZXNwb25zZS5zdWNjZWVkZWQsIGZldGNoUmVzcG9uc2U6IHJlc3BvbnNlIH07XG4gIH1cblxuICByZXF1ZXN0U3VjY2VlZGVkV2l0aFJlc3BvbnNlKHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gICAgaWYgKHJlc3BvbnNlLmNsaWVudEVycm9yIHx8IHJlc3BvbnNlLnNlcnZlckVycm9yKSB7XG4gICAgICB0aGlzLmRlbGVnYXRlLmZvcm1TdWJtaXNzaW9uRmFpbGVkV2l0aFJlc3BvbnNlKHRoaXMsIHJlc3BvbnNlKTtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHByZWZldGNoQ2FjaGUuY2xlYXIoKTtcblxuICAgIGlmICh0aGlzLnJlcXVlc3RNdXN0UmVkaXJlY3QocmVxdWVzdCkgJiYgcmVzcG9uc2VTdWNjZWVkZWRXaXRob3V0UmVkaXJlY3QocmVzcG9uc2UpKSB7XG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcIkZvcm0gcmVzcG9uc2VzIG11c3QgcmVkaXJlY3QgdG8gYW5vdGhlciBsb2NhdGlvblwiKTtcbiAgICAgIHRoaXMuZGVsZWdhdGUuZm9ybVN1Ym1pc3Npb25FcnJvcmVkKHRoaXMsIGVycm9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdGF0ZSA9IEZvcm1TdWJtaXNzaW9uU3RhdGUucmVjZWl2aW5nO1xuICAgICAgdGhpcy5yZXN1bHQgPSB7IHN1Y2Nlc3M6IHRydWUsIGZldGNoUmVzcG9uc2U6IHJlc3BvbnNlIH07XG4gICAgICB0aGlzLmRlbGVnYXRlLmZvcm1TdWJtaXNzaW9uU3VjY2VlZGVkV2l0aFJlc3BvbnNlKHRoaXMsIHJlc3BvbnNlKTtcbiAgICB9XG4gIH1cblxuICByZXF1ZXN0RmFpbGVkV2l0aFJlc3BvbnNlKHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gICAgdGhpcy5yZXN1bHQgPSB7IHN1Y2Nlc3M6IGZhbHNlLCBmZXRjaFJlc3BvbnNlOiByZXNwb25zZSB9O1xuICAgIHRoaXMuZGVsZWdhdGUuZm9ybVN1Ym1pc3Npb25GYWlsZWRXaXRoUmVzcG9uc2UodGhpcywgcmVzcG9uc2UpO1xuICB9XG5cbiAgcmVxdWVzdEVycm9yZWQocmVxdWVzdCwgZXJyb3IpIHtcbiAgICB0aGlzLnJlc3VsdCA9IHsgc3VjY2VzczogZmFsc2UsIGVycm9yIH07XG4gICAgdGhpcy5kZWxlZ2F0ZS5mb3JtU3VibWlzc2lvbkVycm9yZWQodGhpcywgZXJyb3IpO1xuICB9XG5cbiAgcmVxdWVzdEZpbmlzaGVkKF9yZXF1ZXN0KSB7XG4gICAgdGhpcy5zdGF0ZSA9IEZvcm1TdWJtaXNzaW9uU3RhdGUuc3RvcHBlZDtcbiAgICBpZiAodGhpcy5zdWJtaXR0ZXIpIGNvbmZpZy5mb3Jtcy5zdWJtaXR0ZXIuYWZ0ZXJTdWJtaXQodGhpcy5zdWJtaXR0ZXIpO1xuICAgIHRoaXMucmVzZXRTdWJtaXR0ZXJUZXh0KCk7XG4gICAgY2xlYXJCdXN5U3RhdGUodGhpcy5mb3JtRWxlbWVudCk7XG4gICAgZGlzcGF0Y2goXCJ0dXJibzpzdWJtaXQtZW5kXCIsIHtcbiAgICAgIHRhcmdldDogdGhpcy5mb3JtRWxlbWVudCxcbiAgICAgIGRldGFpbDogeyBmb3JtU3VibWlzc2lvbjogdGhpcywgLi4udGhpcy5yZXN1bHQgfVxuICAgIH0pO1xuICAgIHRoaXMuZGVsZWdhdGUuZm9ybVN1Ym1pc3Npb25GaW5pc2hlZCh0aGlzKTtcbiAgfVxuXG4gIC8vIFByaXZhdGVcblxuICBzZXRTdWJtaXRzV2l0aCgpIHtcbiAgICBpZiAoIXRoaXMuc3VibWl0dGVyIHx8ICF0aGlzLnN1Ym1pdHNXaXRoKSByZXR1cm5cblxuICAgIGlmICh0aGlzLnN1Ym1pdHRlci5tYXRjaGVzKFwiYnV0dG9uXCIpKSB7XG4gICAgICB0aGlzLm9yaWdpbmFsU3VibWl0VGV4dCA9IHRoaXMuc3VibWl0dGVyLmlubmVySFRNTDtcbiAgICAgIHRoaXMuc3VibWl0dGVyLmlubmVySFRNTCA9IHRoaXMuc3VibWl0c1dpdGg7XG4gICAgfSBlbHNlIGlmICh0aGlzLnN1Ym1pdHRlci5tYXRjaGVzKFwiaW5wdXRcIikpIHtcbiAgICAgIGNvbnN0IGlucHV0ID0gdGhpcy5zdWJtaXR0ZXI7XG4gICAgICB0aGlzLm9yaWdpbmFsU3VibWl0VGV4dCA9IGlucHV0LnZhbHVlO1xuICAgICAgaW5wdXQudmFsdWUgPSB0aGlzLnN1Ym1pdHNXaXRoO1xuICAgIH1cbiAgfVxuXG4gIHJlc2V0U3VibWl0dGVyVGV4dCgpIHtcbiAgICBpZiAoIXRoaXMuc3VibWl0dGVyIHx8ICF0aGlzLm9yaWdpbmFsU3VibWl0VGV4dCkgcmV0dXJuXG5cbiAgICBpZiAodGhpcy5zdWJtaXR0ZXIubWF0Y2hlcyhcImJ1dHRvblwiKSkge1xuICAgICAgdGhpcy5zdWJtaXR0ZXIuaW5uZXJIVE1MID0gdGhpcy5vcmlnaW5hbFN1Ym1pdFRleHQ7XG4gICAgfSBlbHNlIGlmICh0aGlzLnN1Ym1pdHRlci5tYXRjaGVzKFwiaW5wdXRcIikpIHtcbiAgICAgIGNvbnN0IGlucHV0ID0gdGhpcy5zdWJtaXR0ZXI7XG4gICAgICBpbnB1dC52YWx1ZSA9IHRoaXMub3JpZ2luYWxTdWJtaXRUZXh0O1xuICAgIH1cbiAgfVxuXG4gIHJlcXVlc3RNdXN0UmVkaXJlY3QocmVxdWVzdCkge1xuICAgIHJldHVybiAhcmVxdWVzdC5pc1NhZmUgJiYgdGhpcy5tdXN0UmVkaXJlY3RcbiAgfVxuXG4gIHJlcXVlc3RBY2NlcHRzVHVyYm9TdHJlYW1SZXNwb25zZShyZXF1ZXN0KSB7XG4gICAgcmV0dXJuICFyZXF1ZXN0LmlzU2FmZSB8fCBoYXNBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLXN0cmVhbVwiLCB0aGlzLnN1Ym1pdHRlciwgdGhpcy5mb3JtRWxlbWVudClcbiAgfVxuXG4gIGdldCBzdWJtaXRzV2l0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdWJtaXR0ZXI/LmdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm8tc3VibWl0cy13aXRoXCIpXG4gIH1cbn1cblxuZnVuY3Rpb24gYnVpbGRGb3JtRGF0YShmb3JtRWxlbWVudCwgc3VibWl0dGVyKSB7XG4gIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGZvcm1FbGVtZW50KTtcbiAgY29uc3QgbmFtZSA9IHN1Ym1pdHRlcj8uZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcbiAgY29uc3QgdmFsdWUgPSBzdWJtaXR0ZXI/LmdldEF0dHJpYnV0ZShcInZhbHVlXCIpO1xuXG4gIGlmIChuYW1lKSB7XG4gICAgZm9ybURhdGEuYXBwZW5kKG5hbWUsIHZhbHVlIHx8IFwiXCIpO1xuICB9XG5cbiAgcmV0dXJuIGZvcm1EYXRhXG59XG5cbmZ1bmN0aW9uIGdldENvb2tpZVZhbHVlKGNvb2tpZU5hbWUpIHtcbiAgaWYgKGNvb2tpZU5hbWUgIT0gbnVsbCkge1xuICAgIGNvbnN0IGNvb2tpZXMgPSBkb2N1bWVudC5jb29raWUgPyBkb2N1bWVudC5jb29raWUuc3BsaXQoXCI7IFwiKSA6IFtdO1xuICAgIGNvbnN0IGNvb2tpZSA9IGNvb2tpZXMuZmluZCgoY29va2llKSA9PiBjb29raWUuc3RhcnRzV2l0aChjb29raWVOYW1lKSk7XG4gICAgaWYgKGNvb2tpZSkge1xuICAgICAgY29uc3QgdmFsdWUgPSBjb29raWUuc3BsaXQoXCI9XCIpLnNsaWNlKDEpLmpvaW4oXCI9XCIpO1xuICAgICAgcmV0dXJuIHZhbHVlID8gZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKSA6IHVuZGVmaW5lZFxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiByZXNwb25zZVN1Y2NlZWRlZFdpdGhvdXRSZWRpcmVjdChyZXNwb25zZSkge1xuICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzQ29kZSA9PSAyMDAgJiYgIXJlc3BvbnNlLnJlZGlyZWN0ZWRcbn1cblxuZnVuY3Rpb24gZ2V0Rm9ybUFjdGlvbihmb3JtRWxlbWVudCwgc3VibWl0dGVyKSB7XG4gIGNvbnN0IGZvcm1FbGVtZW50QWN0aW9uID0gdHlwZW9mIGZvcm1FbGVtZW50LmFjdGlvbiA9PT0gXCJzdHJpbmdcIiA/IGZvcm1FbGVtZW50LmFjdGlvbiA6IG51bGw7XG5cbiAgaWYgKHN1Ym1pdHRlcj8uaGFzQXR0cmlidXRlKFwiZm9ybWFjdGlvblwiKSkge1xuICAgIHJldHVybiBzdWJtaXR0ZXIuZ2V0QXR0cmlidXRlKFwiZm9ybWFjdGlvblwiKSB8fCBcIlwiXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcImFjdGlvblwiKSB8fCBmb3JtRWxlbWVudEFjdGlvbiB8fCBcIlwiXG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0QWN0aW9uKGZvcm1BY3Rpb24sIGZldGNoTWV0aG9kKSB7XG4gIGNvbnN0IGFjdGlvbiA9IGV4cGFuZFVSTChmb3JtQWN0aW9uKTtcblxuICBpZiAoaXNTYWZlKGZldGNoTWV0aG9kKSkge1xuICAgIGFjdGlvbi5zZWFyY2ggPSBcIlwiO1xuICB9XG5cbiAgcmV0dXJuIGFjdGlvblxufVxuXG5mdW5jdGlvbiBnZXRNZXRob2QoZm9ybUVsZW1lbnQsIHN1Ym1pdHRlcikge1xuICBjb25zdCBtZXRob2QgPSBzdWJtaXR0ZXI/LmdldEF0dHJpYnV0ZShcImZvcm1tZXRob2RcIikgfHwgZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibWV0aG9kXCIpIHx8IFwiXCI7XG4gIHJldHVybiBmZXRjaE1ldGhvZEZyb21TdHJpbmcobWV0aG9kLnRvTG93ZXJDYXNlKCkpIHx8IEZldGNoTWV0aG9kLmdldFxufVxuXG5mdW5jdGlvbiBnZXRFbmN0eXBlKGZvcm1FbGVtZW50LCBzdWJtaXR0ZXIpIHtcbiAgcmV0dXJuIGZldGNoRW5jdHlwZUZyb21TdHJpbmcoc3VibWl0dGVyPy5nZXRBdHRyaWJ1dGUoXCJmb3JtZW5jdHlwZVwiKSB8fCBmb3JtRWxlbWVudC5lbmN0eXBlKVxufVxuXG5jbGFzcyBTbmFwc2hvdCB7XG4gIGNvbnN0cnVjdG9yKGVsZW1lbnQpIHtcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICB9XG5cbiAgZ2V0IGFjdGl2ZUVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudC5vd25lckRvY3VtZW50LmFjdGl2ZUVsZW1lbnRcbiAgfVxuXG4gIGdldCBjaGlsZHJlbigpIHtcbiAgICByZXR1cm4gWy4uLnRoaXMuZWxlbWVudC5jaGlsZHJlbl1cbiAgfVxuXG4gIGhhc0FuY2hvcihhbmNob3IpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRFbGVtZW50Rm9yQW5jaG9yKGFuY2hvcikgIT0gbnVsbFxuICB9XG5cbiAgZ2V0RWxlbWVudEZvckFuY2hvcihhbmNob3IpIHtcbiAgICByZXR1cm4gYW5jaG9yID8gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYFtpZD0nJHthbmNob3J9J10sIGFbbmFtZT0nJHthbmNob3J9J11gKSA6IG51bGxcbiAgfVxuXG4gIGdldCBpc0Nvbm5lY3RlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50LmlzQ29ubmVjdGVkXG4gIH1cblxuICBnZXQgZmlyc3RBdXRvZm9jdXNhYmxlRWxlbWVudCgpIHtcbiAgICByZXR1cm4gcXVlcnlBdXRvZm9jdXNhYmxlRWxlbWVudCh0aGlzLmVsZW1lbnQpXG4gIH1cblxuICBnZXQgcGVybWFuZW50RWxlbWVudHMoKSB7XG4gICAgcmV0dXJuIHF1ZXJ5UGVybWFuZW50RWxlbWVudHNBbGwodGhpcy5lbGVtZW50KVxuICB9XG5cbiAgZ2V0UGVybWFuZW50RWxlbWVudEJ5SWQoaWQpIHtcbiAgICByZXR1cm4gZ2V0UGVybWFuZW50RWxlbWVudEJ5SWQodGhpcy5lbGVtZW50LCBpZClcbiAgfVxuXG4gIGdldFBlcm1hbmVudEVsZW1lbnRNYXBGb3JTbmFwc2hvdChzbmFwc2hvdCkge1xuICAgIGNvbnN0IHBlcm1hbmVudEVsZW1lbnRNYXAgPSB7fTtcblxuICAgIGZvciAoY29uc3QgY3VycmVudFBlcm1hbmVudEVsZW1lbnQgb2YgdGhpcy5wZXJtYW5lbnRFbGVtZW50cykge1xuICAgICAgY29uc3QgeyBpZCB9ID0gY3VycmVudFBlcm1hbmVudEVsZW1lbnQ7XG4gICAgICBjb25zdCBuZXdQZXJtYW5lbnRFbGVtZW50ID0gc25hcHNob3QuZ2V0UGVybWFuZW50RWxlbWVudEJ5SWQoaWQpO1xuICAgICAgaWYgKG5ld1Blcm1hbmVudEVsZW1lbnQpIHtcbiAgICAgICAgcGVybWFuZW50RWxlbWVudE1hcFtpZF0gPSBbY3VycmVudFBlcm1hbmVudEVsZW1lbnQsIG5ld1Blcm1hbmVudEVsZW1lbnRdO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwZXJtYW5lbnRFbGVtZW50TWFwXG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0UGVybWFuZW50RWxlbWVudEJ5SWQobm9kZSwgaWQpIHtcbiAgcmV0dXJuIG5vZGUucXVlcnlTZWxlY3RvcihgIyR7aWR9W2RhdGEtdHVyYm8tcGVybWFuZW50XWApXG59XG5cbmZ1bmN0aW9uIHF1ZXJ5UGVybWFuZW50RWxlbWVudHNBbGwobm9kZSkge1xuICByZXR1cm4gbm9kZS5xdWVyeVNlbGVjdG9yQWxsKFwiW2lkXVtkYXRhLXR1cmJvLXBlcm1hbmVudF1cIilcbn1cblxuY2xhc3MgRm9ybVN1Ym1pdE9ic2VydmVyIHtcbiAgc3RhcnRlZCA9IGZhbHNlXG5cbiAgY29uc3RydWN0b3IoZGVsZWdhdGUsIGV2ZW50VGFyZ2V0KSB7XG4gICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgIHRoaXMuZXZlbnRUYXJnZXQgPSBldmVudFRhcmdldDtcbiAgfVxuXG4gIHN0YXJ0KCkge1xuICAgIGlmICghdGhpcy5zdGFydGVkKSB7XG4gICAgICB0aGlzLmV2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5zdWJtaXRDYXB0dXJlZCwgdHJ1ZSk7XG4gICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgdGhpcy5ldmVudFRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuc3VibWl0Q2FwdHVyZWQsIHRydWUpO1xuICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgc3VibWl0Q2FwdHVyZWQgPSAoKSA9PiB7XG4gICAgdGhpcy5ldmVudFRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuc3VibWl0QnViYmxlZCwgZmFsc2UpO1xuICAgIHRoaXMuZXZlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLnN1Ym1pdEJ1YmJsZWQsIGZhbHNlKTtcbiAgfVxuXG4gIHN1Ym1pdEJ1YmJsZWQgPSAoZXZlbnQpID0+IHtcbiAgICBpZiAoIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgIGNvbnN0IGZvcm0gPSBldmVudC50YXJnZXQgaW5zdGFuY2VvZiBIVE1MRm9ybUVsZW1lbnQgPyBldmVudC50YXJnZXQgOiB1bmRlZmluZWQ7XG4gICAgICBjb25zdCBzdWJtaXR0ZXIgPSBldmVudC5zdWJtaXR0ZXIgfHwgdW5kZWZpbmVkO1xuXG4gICAgICBpZiAoXG4gICAgICAgIGZvcm0gJiZcbiAgICAgICAgc3VibWlzc2lvbkRvZXNOb3REaXNtaXNzRGlhbG9nKGZvcm0sIHN1Ym1pdHRlcikgJiZcbiAgICAgICAgc3VibWlzc2lvbkRvZXNOb3RUYXJnZXRJRnJhbWUoZm9ybSwgc3VibWl0dGVyKSAmJlxuICAgICAgICB0aGlzLmRlbGVnYXRlLndpbGxTdWJtaXRGb3JtKGZvcm0sIHN1Ym1pdHRlcilcbiAgICAgICkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZS5mb3JtU3VibWl0dGVkKGZvcm0sIHN1Ym1pdHRlcik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHN1Ym1pc3Npb25Eb2VzTm90RGlzbWlzc0RpYWxvZyhmb3JtLCBzdWJtaXR0ZXIpIHtcbiAgY29uc3QgbWV0aG9kID0gc3VibWl0dGVyPy5nZXRBdHRyaWJ1dGUoXCJmb3JtbWV0aG9kXCIpIHx8IGZvcm0uZ2V0QXR0cmlidXRlKFwibWV0aG9kXCIpO1xuXG4gIHJldHVybiBtZXRob2QgIT0gXCJkaWFsb2dcIlxufVxuXG5mdW5jdGlvbiBzdWJtaXNzaW9uRG9lc05vdFRhcmdldElGcmFtZShmb3JtLCBzdWJtaXR0ZXIpIHtcbiAgY29uc3QgdGFyZ2V0ID0gc3VibWl0dGVyPy5nZXRBdHRyaWJ1dGUoXCJmb3JtdGFyZ2V0XCIpIHx8IGZvcm0uZ2V0QXR0cmlidXRlKFwidGFyZ2V0XCIpO1xuXG4gIHJldHVybiBkb2VzTm90VGFyZ2V0SUZyYW1lKHRhcmdldClcbn1cblxuY2xhc3MgVmlldyB7XG4gICNyZXNvbHZlUmVuZGVyUHJvbWlzZSA9IChfdmFsdWUpID0+IHt9XG4gICNyZXNvbHZlSW50ZXJjZXB0aW9uUHJvbWlzZSA9IChfdmFsdWUpID0+IHt9XG5cbiAgY29uc3RydWN0b3IoZGVsZWdhdGUsIGVsZW1lbnQpIHtcbiAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgfVxuXG4gIC8vIFNjcm9sbGluZ1xuXG4gIHNjcm9sbFRvQW5jaG9yKGFuY2hvcikge1xuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLnNuYXBzaG90LmdldEVsZW1lbnRGb3JBbmNob3IoYW5jaG9yKTtcbiAgICBpZiAoZWxlbWVudCkge1xuICAgICAgdGhpcy5mb2N1c0VsZW1lbnQoZWxlbWVudCk7XG4gICAgICB0aGlzLnNjcm9sbFRvRWxlbWVudChlbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zY3JvbGxUb1Bvc2l0aW9uKHsgeDogMCwgeTogMCB9KTtcbiAgICB9XG4gIH1cblxuICBzY3JvbGxUb0FuY2hvckZyb21Mb2NhdGlvbihsb2NhdGlvbikge1xuICAgIHRoaXMuc2Nyb2xsVG9BbmNob3IoZ2V0QW5jaG9yKGxvY2F0aW9uKSk7XG4gIH1cblxuICBzY3JvbGxUb0VsZW1lbnQoZWxlbWVudCkge1xuICAgIGVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcoKTtcbiAgfVxuXG4gIGZvY3VzRWxlbWVudChlbGVtZW50KSB7XG4gICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgaWYgKGVsZW1lbnQuaGFzQXR0cmlidXRlKFwidGFiaW5kZXhcIikpIHtcbiAgICAgICAgZWxlbWVudC5mb2N1cygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBcIi0xXCIpO1xuICAgICAgICBlbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwidGFiaW5kZXhcIik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc2Nyb2xsVG9Qb3NpdGlvbih7IHgsIHkgfSkge1xuICAgIHRoaXMuc2Nyb2xsUm9vdC5zY3JvbGxUbyh4LCB5KTtcbiAgfVxuXG4gIHNjcm9sbFRvVG9wKCkge1xuICAgIHRoaXMuc2Nyb2xsVG9Qb3NpdGlvbih7IHg6IDAsIHk6IDAgfSk7XG4gIH1cblxuICBnZXQgc2Nyb2xsUm9vdCgpIHtcbiAgICByZXR1cm4gd2luZG93XG4gIH1cblxuICAvLyBSZW5kZXJpbmdcblxuICBhc3luYyByZW5kZXIocmVuZGVyZXIpIHtcbiAgICBjb25zdCB7IGlzUHJldmlldywgc2hvdWxkUmVuZGVyLCB3aWxsUmVuZGVyLCBuZXdTbmFwc2hvdDogc25hcHNob3QgfSA9IHJlbmRlcmVyO1xuXG4gICAgLy8gQSB3b3JrYXJvdW5kIHRvIGlnbm9yZSB0cmFja2VkIGVsZW1lbnQgbWlzbWF0Y2ggcmVsb2FkcyB3aGVuIHBlcmZvcm1pbmdcbiAgICAvLyBhIHByb21vdGVkIFZpc2l0IGZyb20gYSBmcmFtZSBuYXZpZ2F0aW9uXG4gICAgY29uc3Qgc2hvdWxkSW52YWxpZGF0ZSA9IHdpbGxSZW5kZXI7XG5cbiAgICBpZiAoc2hvdWxkUmVuZGVyKSB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLnJlbmRlclByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gKHRoaXMuI3Jlc29sdmVSZW5kZXJQcm9taXNlID0gcmVzb2x2ZSkpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIGF3YWl0IHRoaXMucHJlcGFyZVRvUmVuZGVyU25hcHNob3QocmVuZGVyZXIpO1xuXG4gICAgICAgIGNvbnN0IHJlbmRlckludGVyY2VwdGlvbiA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiAodGhpcy4jcmVzb2x2ZUludGVyY2VwdGlvblByb21pc2UgPSByZXNvbHZlKSk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7IHJlc3VtZTogdGhpcy4jcmVzb2x2ZUludGVyY2VwdGlvblByb21pc2UsIHJlbmRlcjogdGhpcy5yZW5kZXJlci5yZW5kZXJFbGVtZW50LCByZW5kZXJNZXRob2Q6IHRoaXMucmVuZGVyZXIucmVuZGVyTWV0aG9kIH07XG4gICAgICAgIGNvbnN0IGltbWVkaWF0ZVJlbmRlciA9IHRoaXMuZGVsZWdhdGUuYWxsb3dzSW1tZWRpYXRlUmVuZGVyKHNuYXBzaG90LCBvcHRpb25zKTtcbiAgICAgICAgaWYgKCFpbW1lZGlhdGVSZW5kZXIpIGF3YWl0IHJlbmRlckludGVyY2VwdGlvbjtcblxuICAgICAgICBhd2FpdCB0aGlzLnJlbmRlclNuYXBzaG90KHJlbmRlcmVyKTtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZS52aWV3UmVuZGVyZWRTbmFwc2hvdChzbmFwc2hvdCwgaXNQcmV2aWV3LCB0aGlzLnJlbmRlcmVyLnJlbmRlck1ldGhvZCk7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUucHJlbG9hZE9uTG9hZExpbmtzRm9yVmlldyh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB0aGlzLmZpbmlzaFJlbmRlcmluZ1NuYXBzaG90KHJlbmRlcmVyKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnJlbmRlcmVyO1xuICAgICAgICB0aGlzLiNyZXNvbHZlUmVuZGVyUHJvbWlzZSh1bmRlZmluZWQpO1xuICAgICAgICBkZWxldGUgdGhpcy5yZW5kZXJQcm9taXNlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoc2hvdWxkSW52YWxpZGF0ZSkge1xuICAgICAgdGhpcy5pbnZhbGlkYXRlKHJlbmRlcmVyLnJlbG9hZFJlYXNvbik7XG4gICAgfVxuICB9XG5cbiAgaW52YWxpZGF0ZShyZWFzb24pIHtcbiAgICB0aGlzLmRlbGVnYXRlLnZpZXdJbnZhbGlkYXRlZChyZWFzb24pO1xuICB9XG5cbiAgYXN5bmMgcHJlcGFyZVRvUmVuZGVyU25hcHNob3QocmVuZGVyZXIpIHtcbiAgICB0aGlzLm1hcmtBc1ByZXZpZXcocmVuZGVyZXIuaXNQcmV2aWV3KTtcbiAgICBhd2FpdCByZW5kZXJlci5wcmVwYXJlVG9SZW5kZXIoKTtcbiAgfVxuXG4gIG1hcmtBc1ByZXZpZXcoaXNQcmV2aWV3KSB7XG4gICAgaWYgKGlzUHJldmlldykge1xuICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtdHVyYm8tcHJldmlld1wiLCBcIlwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtdHVyYm8tcHJldmlld1wiKTtcbiAgICB9XG4gIH1cblxuICBtYXJrVmlzaXREaXJlY3Rpb24oZGlyZWN0aW9uKSB7XG4gICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtdHVyYm8tdmlzaXQtZGlyZWN0aW9uXCIsIGRpcmVjdGlvbik7XG4gIH1cblxuICB1bm1hcmtWaXNpdERpcmVjdGlvbigpIHtcbiAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS10dXJiby12aXNpdC1kaXJlY3Rpb25cIik7XG4gIH1cblxuICBhc3luYyByZW5kZXJTbmFwc2hvdChyZW5kZXJlcikge1xuICAgIGF3YWl0IHJlbmRlcmVyLnJlbmRlcigpO1xuICB9XG5cbiAgZmluaXNoUmVuZGVyaW5nU25hcHNob3QocmVuZGVyZXIpIHtcbiAgICByZW5kZXJlci5maW5pc2hSZW5kZXJpbmcoKTtcbiAgfVxufVxuXG5jbGFzcyBGcmFtZVZpZXcgZXh0ZW5kcyBWaWV3IHtcbiAgbWlzc2luZygpIHtcbiAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gYDxzdHJvbmcgY2xhc3M9XCJ0dXJiby1mcmFtZS1lcnJvclwiPkNvbnRlbnQgbWlzc2luZzwvc3Ryb25nPmA7XG4gIH1cblxuICBnZXQgc25hcHNob3QoKSB7XG4gICAgcmV0dXJuIG5ldyBTbmFwc2hvdCh0aGlzLmVsZW1lbnQpXG4gIH1cbn1cblxuY2xhc3MgTGlua0ludGVyY2VwdG9yIHtcbiAgY29uc3RydWN0b3IoZGVsZWdhdGUsIGVsZW1lbnQpIHtcbiAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgfVxuXG4gIHN0YXJ0KCkge1xuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jbGlja0J1YmJsZWQpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0dXJibzpjbGlja1wiLCB0aGlzLmxpbmtDbGlja2VkKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidHVyYm86YmVmb3JlLXZpc2l0XCIsIHRoaXMud2lsbFZpc2l0KTtcbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsaWNrQnViYmxlZCk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInR1cmJvOmNsaWNrXCIsIHRoaXMubGlua0NsaWNrZWQpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0dXJibzpiZWZvcmUtdmlzaXRcIiwgdGhpcy53aWxsVmlzaXQpO1xuICB9XG5cbiAgY2xpY2tCdWJibGVkID0gKGV2ZW50KSA9PiB7XG4gICAgaWYgKHRoaXMuY2xpY2tFdmVudElzU2lnbmlmaWNhbnQoZXZlbnQpKSB7XG4gICAgICB0aGlzLmNsaWNrRXZlbnQgPSBldmVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVsZXRlIHRoaXMuY2xpY2tFdmVudDtcbiAgICB9XG4gIH1cblxuICBsaW5rQ2xpY2tlZCA9IChldmVudCkgPT4ge1xuICAgIGlmICh0aGlzLmNsaWNrRXZlbnQgJiYgdGhpcy5jbGlja0V2ZW50SXNTaWduaWZpY2FudChldmVudCkpIHtcbiAgICAgIGlmICh0aGlzLmRlbGVnYXRlLnNob3VsZEludGVyY2VwdExpbmtDbGljayhldmVudC50YXJnZXQsIGV2ZW50LmRldGFpbC51cmwsIGV2ZW50LmRldGFpbC5vcmlnaW5hbEV2ZW50KSkge1xuICAgICAgICB0aGlzLmNsaWNrRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZS5saW5rQ2xpY2tJbnRlcmNlcHRlZChldmVudC50YXJnZXQsIGV2ZW50LmRldGFpbC51cmwsIGV2ZW50LmRldGFpbC5vcmlnaW5hbEV2ZW50KTtcbiAgICAgIH1cbiAgICB9XG4gICAgZGVsZXRlIHRoaXMuY2xpY2tFdmVudDtcbiAgfVxuXG4gIHdpbGxWaXNpdCA9IChfZXZlbnQpID0+IHtcbiAgICBkZWxldGUgdGhpcy5jbGlja0V2ZW50O1xuICB9XG5cbiAgY2xpY2tFdmVudElzU2lnbmlmaWNhbnQoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jb21wb3NlZCA/IGV2ZW50LnRhcmdldD8ucGFyZW50RWxlbWVudCA6IGV2ZW50LnRhcmdldDtcbiAgICBjb25zdCBlbGVtZW50ID0gZmluZExpbmtGcm9tQ2xpY2tUYXJnZXQodGFyZ2V0KSB8fCB0YXJnZXQ7XG5cbiAgICByZXR1cm4gZWxlbWVudCBpbnN0YW5jZW9mIEVsZW1lbnQgJiYgZWxlbWVudC5jbG9zZXN0KFwidHVyYm8tZnJhbWUsIGh0bWxcIikgPT0gdGhpcy5lbGVtZW50XG4gIH1cbn1cblxuY2xhc3MgTGlua0NsaWNrT2JzZXJ2ZXIge1xuICBzdGFydGVkID0gZmFsc2VcblxuICBjb25zdHJ1Y3RvcihkZWxlZ2F0ZSwgZXZlbnRUYXJnZXQpIHtcbiAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gICAgdGhpcy5ldmVudFRhcmdldCA9IGV2ZW50VGFyZ2V0O1xuICB9XG5cbiAgc3RhcnQoKSB7XG4gICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgIHRoaXMuZXZlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xpY2tDYXB0dXJlZCwgdHJ1ZSk7XG4gICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgdGhpcy5ldmVudFRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jbGlja0NhcHR1cmVkLCB0cnVlKTtcbiAgICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGNsaWNrQ2FwdHVyZWQgPSAoKSA9PiB7XG4gICAgdGhpcy5ldmVudFRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jbGlja0J1YmJsZWQsIGZhbHNlKTtcbiAgICB0aGlzLmV2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsaWNrQnViYmxlZCwgZmFsc2UpO1xuICB9XG5cbiAgY2xpY2tCdWJibGVkID0gKGV2ZW50KSA9PiB7XG4gICAgaWYgKGV2ZW50IGluc3RhbmNlb2YgTW91c2VFdmVudCAmJiB0aGlzLmNsaWNrRXZlbnRJc1NpZ25pZmljYW50KGV2ZW50KSkge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gKGV2ZW50LmNvbXBvc2VkUGF0aCAmJiBldmVudC5jb21wb3NlZFBhdGgoKVswXSkgfHwgZXZlbnQudGFyZ2V0O1xuICAgICAgY29uc3QgbGluayA9IGZpbmRMaW5rRnJvbUNsaWNrVGFyZ2V0KHRhcmdldCk7XG4gICAgICBpZiAobGluayAmJiBkb2VzTm90VGFyZ2V0SUZyYW1lKGxpbmsudGFyZ2V0KSkge1xuICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGdldExvY2F0aW9uRm9yTGluayhsaW5rKTtcbiAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUud2lsbEZvbGxvd0xpbmtUb0xvY2F0aW9uKGxpbmssIGxvY2F0aW9uLCBldmVudCkpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHRoaXMuZGVsZWdhdGUuZm9sbG93ZWRMaW5rVG9Mb2NhdGlvbihsaW5rLCBsb2NhdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjbGlja0V2ZW50SXNTaWduaWZpY2FudChldmVudCkge1xuICAgIHJldHVybiAhKFxuICAgICAgKGV2ZW50LnRhcmdldCAmJiBldmVudC50YXJnZXQuaXNDb250ZW50RWRpdGFibGUpIHx8XG4gICAgICBldmVudC5kZWZhdWx0UHJldmVudGVkIHx8XG4gICAgICBldmVudC53aGljaCA+IDEgfHxcbiAgICAgIGV2ZW50LmFsdEtleSB8fFxuICAgICAgZXZlbnQuY3RybEtleSB8fFxuICAgICAgZXZlbnQubWV0YUtleSB8fFxuICAgICAgZXZlbnQuc2hpZnRLZXlcbiAgICApXG4gIH1cbn1cblxuY2xhc3MgRm9ybUxpbmtDbGlja09ic2VydmVyIHtcbiAgY29uc3RydWN0b3IoZGVsZWdhdGUsIGVsZW1lbnQpIHtcbiAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gICAgdGhpcy5saW5rSW50ZXJjZXB0b3IgPSBuZXcgTGlua0NsaWNrT2JzZXJ2ZXIodGhpcywgZWxlbWVudCk7XG4gIH1cblxuICBzdGFydCgpIHtcbiAgICB0aGlzLmxpbmtJbnRlcmNlcHRvci5zdGFydCgpO1xuICB9XG5cbiAgc3RvcCgpIHtcbiAgICB0aGlzLmxpbmtJbnRlcmNlcHRvci5zdG9wKCk7XG4gIH1cblxuICAvLyBMaW5rIGhvdmVyIG9ic2VydmVyIGRlbGVnYXRlXG5cbiAgY2FuUHJlZmV0Y2hSZXF1ZXN0VG9Mb2NhdGlvbihsaW5rLCBsb2NhdGlvbikge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgcHJlZmV0Y2hBbmRDYWNoZVJlcXVlc3RUb0xvY2F0aW9uKGxpbmssIGxvY2F0aW9uKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICAvLyBMaW5rIGNsaWNrIG9ic2VydmVyIGRlbGVnYXRlXG5cbiAgd2lsbEZvbGxvd0xpbmtUb0xvY2F0aW9uKGxpbmssIGxvY2F0aW9uLCBvcmlnaW5hbEV2ZW50KSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuZGVsZWdhdGUud2lsbFN1Ym1pdEZvcm1MaW5rVG9Mb2NhdGlvbihsaW5rLCBsb2NhdGlvbiwgb3JpZ2luYWxFdmVudCkgJiZcbiAgICAgIChsaW5rLmhhc0F0dHJpYnV0ZShcImRhdGEtdHVyYm8tbWV0aG9kXCIpIHx8IGxpbmsuaGFzQXR0cmlidXRlKFwiZGF0YS10dXJiby1zdHJlYW1cIikpXG4gICAgKVxuICB9XG5cbiAgZm9sbG93ZWRMaW5rVG9Mb2NhdGlvbihsaW5rLCBsb2NhdGlvbikge1xuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZm9ybVwiKTtcblxuICAgIGNvbnN0IHR5cGUgPSBcImhpZGRlblwiO1xuICAgIGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBsb2NhdGlvbi5zZWFyY2hQYXJhbXMpIHtcbiAgICAgIGZvcm0uYXBwZW5kKE9iamVjdC5hc3NpZ24oZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLCB7IHR5cGUsIG5hbWUsIHZhbHVlIH0pKTtcbiAgICB9XG5cbiAgICBjb25zdCBhY3Rpb24gPSBPYmplY3QuYXNzaWduKGxvY2F0aW9uLCB7IHNlYXJjaDogXCJcIiB9KTtcbiAgICBmb3JtLnNldEF0dHJpYnV0ZShcImRhdGEtdHVyYm9cIiwgXCJ0cnVlXCIpO1xuICAgIGZvcm0uc2V0QXR0cmlidXRlKFwiYWN0aW9uXCIsIGFjdGlvbi5ocmVmKTtcbiAgICBmb3JtLnNldEF0dHJpYnV0ZShcImhpZGRlblwiLCBcIlwiKTtcblxuICAgIGNvbnN0IG1ldGhvZCA9IGxpbmsuZ2V0QXR0cmlidXRlKFwiZGF0YS10dXJiby1tZXRob2RcIik7XG4gICAgaWYgKG1ldGhvZCkgZm9ybS5zZXRBdHRyaWJ1dGUoXCJtZXRob2RcIiwgbWV0aG9kKTtcblxuICAgIGNvbnN0IHR1cmJvRnJhbWUgPSBsaW5rLmdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm8tZnJhbWVcIik7XG4gICAgaWYgKHR1cmJvRnJhbWUpIGZvcm0uc2V0QXR0cmlidXRlKFwiZGF0YS10dXJiby1mcmFtZVwiLCB0dXJib0ZyYW1lKTtcblxuICAgIGNvbnN0IHR1cmJvQWN0aW9uID0gZ2V0VmlzaXRBY3Rpb24obGluayk7XG4gICAgaWYgKHR1cmJvQWN0aW9uKSBmb3JtLnNldEF0dHJpYnV0ZShcImRhdGEtdHVyYm8tYWN0aW9uXCIsIHR1cmJvQWN0aW9uKTtcblxuICAgIGNvbnN0IHR1cmJvQ29uZmlybSA9IGxpbmsuZ2V0QXR0cmlidXRlKFwiZGF0YS10dXJiby1jb25maXJtXCIpO1xuICAgIGlmICh0dXJib0NvbmZpcm0pIGZvcm0uc2V0QXR0cmlidXRlKFwiZGF0YS10dXJiby1jb25maXJtXCIsIHR1cmJvQ29uZmlybSk7XG5cbiAgICBjb25zdCB0dXJib1N0cmVhbSA9IGxpbmsuaGFzQXR0cmlidXRlKFwiZGF0YS10dXJiby1zdHJlYW1cIik7XG4gICAgaWYgKHR1cmJvU3RyZWFtKSBmb3JtLnNldEF0dHJpYnV0ZShcImRhdGEtdHVyYm8tc3RyZWFtXCIsIFwiXCIpO1xuXG4gICAgdGhpcy5kZWxlZ2F0ZS5zdWJtaXR0ZWRGb3JtTGlua1RvTG9jYXRpb24obGluaywgbG9jYXRpb24sIGZvcm0pO1xuXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChmb3JtKTtcbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJ0dXJibzpzdWJtaXQtZW5kXCIsICgpID0+IGZvcm0ucmVtb3ZlKCksIHsgb25jZTogdHJ1ZSB9KTtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gZm9ybS5yZXF1ZXN0U3VibWl0KCkpO1xuICB9XG59XG5cbmNsYXNzIEJhcmRvIHtcbiAgc3RhdGljIGFzeW5jIHByZXNlcnZpbmdQZXJtYW5lbnRFbGVtZW50cyhkZWxlZ2F0ZSwgcGVybWFuZW50RWxlbWVudE1hcCwgY2FsbGJhY2spIHtcbiAgICBjb25zdCBiYXJkbyA9IG5ldyB0aGlzKGRlbGVnYXRlLCBwZXJtYW5lbnRFbGVtZW50TWFwKTtcbiAgICBiYXJkby5lbnRlcigpO1xuICAgIGF3YWl0IGNhbGxiYWNrKCk7XG4gICAgYmFyZG8ubGVhdmUoKTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGRlbGVnYXRlLCBwZXJtYW5lbnRFbGVtZW50TWFwKSB7XG4gICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgIHRoaXMucGVybWFuZW50RWxlbWVudE1hcCA9IHBlcm1hbmVudEVsZW1lbnRNYXA7XG4gIH1cblxuICBlbnRlcigpIHtcbiAgICBmb3IgKGNvbnN0IGlkIGluIHRoaXMucGVybWFuZW50RWxlbWVudE1hcCkge1xuICAgICAgY29uc3QgW2N1cnJlbnRQZXJtYW5lbnRFbGVtZW50LCBuZXdQZXJtYW5lbnRFbGVtZW50XSA9IHRoaXMucGVybWFuZW50RWxlbWVudE1hcFtpZF07XG4gICAgICB0aGlzLmRlbGVnYXRlLmVudGVyaW5nQmFyZG8oY3VycmVudFBlcm1hbmVudEVsZW1lbnQsIG5ld1Blcm1hbmVudEVsZW1lbnQpO1xuICAgICAgdGhpcy5yZXBsYWNlTmV3UGVybWFuZW50RWxlbWVudFdpdGhQbGFjZWhvbGRlcihuZXdQZXJtYW5lbnRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBsZWF2ZSgpIHtcbiAgICBmb3IgKGNvbnN0IGlkIGluIHRoaXMucGVybWFuZW50RWxlbWVudE1hcCkge1xuICAgICAgY29uc3QgW2N1cnJlbnRQZXJtYW5lbnRFbGVtZW50XSA9IHRoaXMucGVybWFuZW50RWxlbWVudE1hcFtpZF07XG4gICAgICB0aGlzLnJlcGxhY2VDdXJyZW50UGVybWFuZW50RWxlbWVudFdpdGhDbG9uZShjdXJyZW50UGVybWFuZW50RWxlbWVudCk7XG4gICAgICB0aGlzLnJlcGxhY2VQbGFjZWhvbGRlcldpdGhQZXJtYW5lbnRFbGVtZW50KGN1cnJlbnRQZXJtYW5lbnRFbGVtZW50KTtcbiAgICAgIHRoaXMuZGVsZWdhdGUubGVhdmluZ0JhcmRvKGN1cnJlbnRQZXJtYW5lbnRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICByZXBsYWNlTmV3UGVybWFuZW50RWxlbWVudFdpdGhQbGFjZWhvbGRlcihwZXJtYW5lbnRFbGVtZW50KSB7XG4gICAgY29uc3QgcGxhY2Vob2xkZXIgPSBjcmVhdGVQbGFjZWhvbGRlckZvclBlcm1hbmVudEVsZW1lbnQocGVybWFuZW50RWxlbWVudCk7XG4gICAgcGVybWFuZW50RWxlbWVudC5yZXBsYWNlV2l0aChwbGFjZWhvbGRlcik7XG4gIH1cblxuICByZXBsYWNlQ3VycmVudFBlcm1hbmVudEVsZW1lbnRXaXRoQ2xvbmUocGVybWFuZW50RWxlbWVudCkge1xuICAgIGNvbnN0IGNsb25lID0gcGVybWFuZW50RWxlbWVudC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgcGVybWFuZW50RWxlbWVudC5yZXBsYWNlV2l0aChjbG9uZSk7XG4gIH1cblxuICByZXBsYWNlUGxhY2Vob2xkZXJXaXRoUGVybWFuZW50RWxlbWVudChwZXJtYW5lbnRFbGVtZW50KSB7XG4gICAgY29uc3QgcGxhY2Vob2xkZXIgPSB0aGlzLmdldFBsYWNlaG9sZGVyQnlJZChwZXJtYW5lbnRFbGVtZW50LmlkKTtcbiAgICBwbGFjZWhvbGRlcj8ucmVwbGFjZVdpdGgocGVybWFuZW50RWxlbWVudCk7XG4gIH1cblxuICBnZXRQbGFjZWhvbGRlckJ5SWQoaWQpIHtcbiAgICByZXR1cm4gdGhpcy5wbGFjZWhvbGRlcnMuZmluZCgoZWxlbWVudCkgPT4gZWxlbWVudC5jb250ZW50ID09IGlkKVxuICB9XG5cbiAgZ2V0IHBsYWNlaG9sZGVycygpIHtcbiAgICByZXR1cm4gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJtZXRhW25hbWU9dHVyYm8tcGVybWFuZW50LXBsYWNlaG9sZGVyXVtjb250ZW50XVwiKV1cbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVQbGFjZWhvbGRlckZvclBlcm1hbmVudEVsZW1lbnQocGVybWFuZW50RWxlbWVudCkge1xuICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm1ldGFcIik7XG4gIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwibmFtZVwiLCBcInR1cmJvLXBlcm1hbmVudC1wbGFjZWhvbGRlclwiKTtcbiAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJjb250ZW50XCIsIHBlcm1hbmVudEVsZW1lbnQuaWQpO1xuICByZXR1cm4gZWxlbWVudFxufVxuXG5jbGFzcyBSZW5kZXJlciB7XG4gICNhY3RpdmVFbGVtZW50ID0gbnVsbFxuXG4gIHN0YXRpYyByZW5kZXJFbGVtZW50KGN1cnJlbnRFbGVtZW50LCBuZXdFbGVtZW50KSB7XG4gICAgLy8gQWJzdHJhY3QgbWV0aG9kXG4gIH1cblxuICBjb25zdHJ1Y3RvcihjdXJyZW50U25hcHNob3QsIG5ld1NuYXBzaG90LCBpc1ByZXZpZXcsIHdpbGxSZW5kZXIgPSB0cnVlKSB7XG4gICAgdGhpcy5jdXJyZW50U25hcHNob3QgPSBjdXJyZW50U25hcHNob3Q7XG4gICAgdGhpcy5uZXdTbmFwc2hvdCA9IG5ld1NuYXBzaG90O1xuICAgIHRoaXMuaXNQcmV2aWV3ID0gaXNQcmV2aWV3O1xuICAgIHRoaXMud2lsbFJlbmRlciA9IHdpbGxSZW5kZXI7XG4gICAgdGhpcy5yZW5kZXJFbGVtZW50ID0gdGhpcy5jb25zdHJ1Y3Rvci5yZW5kZXJFbGVtZW50O1xuICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+ICh0aGlzLnJlc29sdmluZ0Z1bmN0aW9ucyA9IHsgcmVzb2x2ZSwgcmVqZWN0IH0pKTtcbiAgfVxuXG4gIGdldCBzaG91bGRSZW5kZXIoKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGdldCBzaG91bGRBdXRvZm9jdXMoKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGdldCByZWxvYWRSZWFzb24oKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBwcmVwYXJlVG9SZW5kZXIoKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgLy8gQWJzdHJhY3QgbWV0aG9kXG4gIH1cblxuICBmaW5pc2hSZW5kZXJpbmcoKSB7XG4gICAgaWYgKHRoaXMucmVzb2x2aW5nRnVuY3Rpb25zKSB7XG4gICAgICB0aGlzLnJlc29sdmluZ0Z1bmN0aW9ucy5yZXNvbHZlKCk7XG4gICAgICBkZWxldGUgdGhpcy5yZXNvbHZpbmdGdW5jdGlvbnM7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcHJlc2VydmluZ1Blcm1hbmVudEVsZW1lbnRzKGNhbGxiYWNrKSB7XG4gICAgYXdhaXQgQmFyZG8ucHJlc2VydmluZ1Blcm1hbmVudEVsZW1lbnRzKHRoaXMsIHRoaXMucGVybWFuZW50RWxlbWVudE1hcCwgY2FsbGJhY2spO1xuICB9XG5cbiAgZm9jdXNGaXJzdEF1dG9mb2N1c2FibGVFbGVtZW50KCkge1xuICAgIGlmICh0aGlzLnNob3VsZEF1dG9mb2N1cykge1xuICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuY29ubmVjdGVkU25hcHNob3QuZmlyc3RBdXRvZm9jdXNhYmxlRWxlbWVudDtcbiAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgIGVsZW1lbnQuZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBCYXJkbyBkZWxlZ2F0ZVxuXG4gIGVudGVyaW5nQmFyZG8oY3VycmVudFBlcm1hbmVudEVsZW1lbnQpIHtcbiAgICBpZiAodGhpcy4jYWN0aXZlRWxlbWVudCkgcmV0dXJuXG5cbiAgICBpZiAoY3VycmVudFBlcm1hbmVudEVsZW1lbnQuY29udGFpbnModGhpcy5jdXJyZW50U25hcHNob3QuYWN0aXZlRWxlbWVudCkpIHtcbiAgICAgIHRoaXMuI2FjdGl2ZUVsZW1lbnQgPSB0aGlzLmN1cnJlbnRTbmFwc2hvdC5hY3RpdmVFbGVtZW50O1xuICAgIH1cbiAgfVxuXG4gIGxlYXZpbmdCYXJkbyhjdXJyZW50UGVybWFuZW50RWxlbWVudCkge1xuICAgIGlmIChjdXJyZW50UGVybWFuZW50RWxlbWVudC5jb250YWlucyh0aGlzLiNhY3RpdmVFbGVtZW50KSAmJiB0aGlzLiNhY3RpdmVFbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgIHRoaXMuI2FjdGl2ZUVsZW1lbnQuZm9jdXMoKTtcblxuICAgICAgdGhpcy4jYWN0aXZlRWxlbWVudCA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGNvbm5lY3RlZFNuYXBzaG90KCkge1xuICAgIHJldHVybiB0aGlzLm5ld1NuYXBzaG90LmlzQ29ubmVjdGVkID8gdGhpcy5uZXdTbmFwc2hvdCA6IHRoaXMuY3VycmVudFNuYXBzaG90XG4gIH1cblxuICBnZXQgY3VycmVudEVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudFNuYXBzaG90LmVsZW1lbnRcbiAgfVxuXG4gIGdldCBuZXdFbGVtZW50KCkge1xuICAgIHJldHVybiB0aGlzLm5ld1NuYXBzaG90LmVsZW1lbnRcbiAgfVxuXG4gIGdldCBwZXJtYW5lbnRFbGVtZW50TWFwKCkge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRTbmFwc2hvdC5nZXRQZXJtYW5lbnRFbGVtZW50TWFwRm9yU25hcHNob3QodGhpcy5uZXdTbmFwc2hvdClcbiAgfVxuXG4gIGdldCByZW5kZXJNZXRob2QoKSB7XG4gICAgcmV0dXJuIFwicmVwbGFjZVwiXG4gIH1cbn1cblxuY2xhc3MgRnJhbWVSZW5kZXJlciBleHRlbmRzIFJlbmRlcmVyIHtcbiAgc3RhdGljIHJlbmRlckVsZW1lbnQoY3VycmVudEVsZW1lbnQsIG5ld0VsZW1lbnQpIHtcbiAgICBjb25zdCBkZXN0aW5hdGlvblJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICBkZXN0aW5hdGlvblJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyhjdXJyZW50RWxlbWVudCk7XG4gICAgZGVzdGluYXRpb25SYW5nZS5kZWxldGVDb250ZW50cygpO1xuXG4gICAgY29uc3QgZnJhbWVFbGVtZW50ID0gbmV3RWxlbWVudDtcbiAgICBjb25zdCBzb3VyY2VSYW5nZSA9IGZyYW1lRWxlbWVudC5vd25lckRvY3VtZW50Py5jcmVhdGVSYW5nZSgpO1xuICAgIGlmIChzb3VyY2VSYW5nZSkge1xuICAgICAgc291cmNlUmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKGZyYW1lRWxlbWVudCk7XG4gICAgICBjdXJyZW50RWxlbWVudC5hcHBlbmRDaGlsZChzb3VyY2VSYW5nZS5leHRyYWN0Q29udGVudHMoKSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3RydWN0b3IoZGVsZWdhdGUsIGN1cnJlbnRTbmFwc2hvdCwgbmV3U25hcHNob3QsIHJlbmRlckVsZW1lbnQsIGlzUHJldmlldywgd2lsbFJlbmRlciA9IHRydWUpIHtcbiAgICBzdXBlcihjdXJyZW50U25hcHNob3QsIG5ld1NuYXBzaG90LCByZW5kZXJFbGVtZW50LCBpc1ByZXZpZXcsIHdpbGxSZW5kZXIpO1xuICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgfVxuXG4gIGdldCBzaG91bGRSZW5kZXIoKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIHJlbmRlcigpIHtcbiAgICBhd2FpdCBuZXh0UmVwYWludCgpO1xuICAgIHRoaXMucHJlc2VydmluZ1Blcm1hbmVudEVsZW1lbnRzKCgpID0+IHtcbiAgICAgIHRoaXMubG9hZEZyYW1lRWxlbWVudCgpO1xuICAgIH0pO1xuICAgIHRoaXMuc2Nyb2xsRnJhbWVJbnRvVmlldygpO1xuICAgIGF3YWl0IG5leHRSZXBhaW50KCk7XG4gICAgdGhpcy5mb2N1c0ZpcnN0QXV0b2ZvY3VzYWJsZUVsZW1lbnQoKTtcbiAgICBhd2FpdCBuZXh0UmVwYWludCgpO1xuICAgIHRoaXMuYWN0aXZhdGVTY3JpcHRFbGVtZW50cygpO1xuICB9XG5cbiAgbG9hZEZyYW1lRWxlbWVudCgpIHtcbiAgICB0aGlzLmRlbGVnYXRlLndpbGxSZW5kZXJGcmFtZSh0aGlzLmN1cnJlbnRFbGVtZW50LCB0aGlzLm5ld0VsZW1lbnQpO1xuICAgIHRoaXMucmVuZGVyRWxlbWVudCh0aGlzLmN1cnJlbnRFbGVtZW50LCB0aGlzLm5ld0VsZW1lbnQpO1xuICB9XG5cbiAgc2Nyb2xsRnJhbWVJbnRvVmlldygpIHtcbiAgICBpZiAodGhpcy5jdXJyZW50RWxlbWVudC5hdXRvc2Nyb2xsIHx8IHRoaXMubmV3RWxlbWVudC5hdXRvc2Nyb2xsKSB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5jdXJyZW50RWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgIGNvbnN0IGJsb2NrID0gcmVhZFNjcm9sbExvZ2ljYWxQb3NpdGlvbih0aGlzLmN1cnJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtYXV0b3Njcm9sbC1ibG9ja1wiKSwgXCJlbmRcIik7XG4gICAgICBjb25zdCBiZWhhdmlvciA9IHJlYWRTY3JvbGxCZWhhdmlvcih0aGlzLmN1cnJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtYXV0b3Njcm9sbC1iZWhhdmlvclwiKSwgXCJhdXRvXCIpO1xuXG4gICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICBlbGVtZW50LnNjcm9sbEludG9WaWV3KHsgYmxvY2ssIGJlaGF2aW9yIH0pO1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGFjdGl2YXRlU2NyaXB0RWxlbWVudHMoKSB7XG4gICAgZm9yIChjb25zdCBpbmVydFNjcmlwdEVsZW1lbnQgb2YgdGhpcy5uZXdTY3JpcHRFbGVtZW50cykge1xuICAgICAgY29uc3QgYWN0aXZhdGVkU2NyaXB0RWxlbWVudCA9IGFjdGl2YXRlU2NyaXB0RWxlbWVudChpbmVydFNjcmlwdEVsZW1lbnQpO1xuICAgICAgaW5lcnRTY3JpcHRFbGVtZW50LnJlcGxhY2VXaXRoKGFjdGl2YXRlZFNjcmlwdEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBuZXdTY3JpcHRFbGVtZW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwic2NyaXB0XCIpXG4gIH1cbn1cblxuZnVuY3Rpb24gcmVhZFNjcm9sbExvZ2ljYWxQb3NpdGlvbih2YWx1ZSwgZGVmYXVsdFZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PSBcImVuZFwiIHx8IHZhbHVlID09IFwic3RhcnRcIiB8fCB2YWx1ZSA9PSBcImNlbnRlclwiIHx8IHZhbHVlID09IFwibmVhcmVzdFwiKSB7XG4gICAgcmV0dXJuIHZhbHVlXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGRlZmF1bHRWYWx1ZVxuICB9XG59XG5cbmZ1bmN0aW9uIHJlYWRTY3JvbGxCZWhhdmlvcih2YWx1ZSwgZGVmYXVsdFZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PSBcImF1dG9cIiB8fCB2YWx1ZSA9PSBcInNtb290aFwiKSB7XG4gICAgcmV0dXJuIHZhbHVlXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGRlZmF1bHRWYWx1ZVxuICB9XG59XG5cbi8qKlxuICogQHR5cGVkZWYge29iamVjdH0gQ29uZmlnSGVhZFxuICpcbiAqIEBwcm9wZXJ0eSB7J21lcmdlJyB8ICdhcHBlbmQnIHwgJ21vcnBoJyB8ICdub25lJ30gW3N0eWxlXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbYmxvY2tdXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtpZ25vcmVdXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKEVsZW1lbnQpOiBib29sZWFufSBbc2hvdWxkUHJlc2VydmVdXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKEVsZW1lbnQpOiBib29sZWFufSBbc2hvdWxkUmVBcHBlbmRdXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKEVsZW1lbnQpOiBib29sZWFufSBbc2hvdWxkUmVtb3ZlXVxuICogQHByb3BlcnR5IHtmdW5jdGlvbihFbGVtZW50LCB7YWRkZWQ6IE5vZGVbXSwga2VwdDogRWxlbWVudFtdLCByZW1vdmVkOiBFbGVtZW50W119KTogdm9pZH0gW2FmdGVySGVhZE1vcnBoZWRdXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7b2JqZWN0fSBDb25maWdDYWxsYmFja3NcbiAqXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKE5vZGUpOiBib29sZWFufSBbYmVmb3JlTm9kZUFkZGVkXVxuICogQHByb3BlcnR5IHtmdW5jdGlvbihOb2RlKTogdm9pZH0gW2FmdGVyTm9kZUFkZGVkXVxuICogQHByb3BlcnR5IHtmdW5jdGlvbihFbGVtZW50LCBOb2RlKTogYm9vbGVhbn0gW2JlZm9yZU5vZGVNb3JwaGVkXVxuICogQHByb3BlcnR5IHtmdW5jdGlvbihFbGVtZW50LCBOb2RlKTogdm9pZH0gW2FmdGVyTm9kZU1vcnBoZWRdXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKEVsZW1lbnQpOiBib29sZWFufSBbYmVmb3JlTm9kZVJlbW92ZWRdXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKEVsZW1lbnQpOiB2b2lkfSBbYWZ0ZXJOb2RlUmVtb3ZlZF1cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oc3RyaW5nLCBFbGVtZW50LCBcInVwZGF0ZVwiIHwgXCJyZW1vdmVcIik6IGJvb2xlYW59IFtiZWZvcmVBdHRyaWJ1dGVVcGRhdGVkXVxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge29iamVjdH0gQ29uZmlnXG4gKlxuICogQHByb3BlcnR5IHsnb3V0ZXJIVE1MJyB8ICdpbm5lckhUTUwnfSBbbW9ycGhTdHlsZV1cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2lnbm9yZUFjdGl2ZV1cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2lnbm9yZUFjdGl2ZVZhbHVlXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbcmVzdG9yZUZvY3VzXVxuICogQHByb3BlcnR5IHtDb25maWdDYWxsYmFja3N9IFtjYWxsYmFja3NdXG4gKiBAcHJvcGVydHkge0NvbmZpZ0hlYWR9IFtoZWFkXVxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9ufSBOb09wXG4gKlxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7b2JqZWN0fSBDb25maWdIZWFkSW50ZXJuYWxcbiAqXG4gKiBAcHJvcGVydHkgeydtZXJnZScgfCAnYXBwZW5kJyB8ICdtb3JwaCcgfCAnbm9uZSd9IHN0eWxlXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtibG9ja11cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2lnbm9yZV1cbiAqIEBwcm9wZXJ0eSB7KGZ1bmN0aW9uKEVsZW1lbnQpOiBib29sZWFuKSB8IE5vT3B9IHNob3VsZFByZXNlcnZlXG4gKiBAcHJvcGVydHkgeyhmdW5jdGlvbihFbGVtZW50KTogYm9vbGVhbikgfCBOb09wfSBzaG91bGRSZUFwcGVuZFxuICogQHByb3BlcnR5IHsoZnVuY3Rpb24oRWxlbWVudCk6IGJvb2xlYW4pIHwgTm9PcH0gc2hvdWxkUmVtb3ZlXG4gKiBAcHJvcGVydHkgeyhmdW5jdGlvbihFbGVtZW50LCB7YWRkZWQ6IE5vZGVbXSwga2VwdDogRWxlbWVudFtdLCByZW1vdmVkOiBFbGVtZW50W119KTogdm9pZCkgfCBOb09wfSBhZnRlckhlYWRNb3JwaGVkXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7b2JqZWN0fSBDb25maWdDYWxsYmFja3NJbnRlcm5hbFxuICpcbiAqIEBwcm9wZXJ0eSB7KGZ1bmN0aW9uKE5vZGUpOiBib29sZWFuKSB8IE5vT3B9IGJlZm9yZU5vZGVBZGRlZFxuICogQHByb3BlcnR5IHsoZnVuY3Rpb24oTm9kZSk6IHZvaWQpIHwgTm9PcH0gYWZ0ZXJOb2RlQWRkZWRcbiAqIEBwcm9wZXJ0eSB7KGZ1bmN0aW9uKE5vZGUsIE5vZGUpOiBib29sZWFuKSB8IE5vT3B9IGJlZm9yZU5vZGVNb3JwaGVkXG4gKiBAcHJvcGVydHkgeyhmdW5jdGlvbihOb2RlLCBOb2RlKTogdm9pZCkgfCBOb09wfSBhZnRlck5vZGVNb3JwaGVkXG4gKiBAcHJvcGVydHkgeyhmdW5jdGlvbihOb2RlKTogYm9vbGVhbikgfCBOb09wfSBiZWZvcmVOb2RlUmVtb3ZlZFxuICogQHByb3BlcnR5IHsoZnVuY3Rpb24oTm9kZSk6IHZvaWQpIHwgTm9PcH0gYWZ0ZXJOb2RlUmVtb3ZlZFxuICogQHByb3BlcnR5IHsoZnVuY3Rpb24oc3RyaW5nLCBFbGVtZW50LCBcInVwZGF0ZVwiIHwgXCJyZW1vdmVcIik6IGJvb2xlYW4pIHwgTm9PcH0gYmVmb3JlQXR0cmlidXRlVXBkYXRlZFxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge29iamVjdH0gQ29uZmlnSW50ZXJuYWxcbiAqXG4gKiBAcHJvcGVydHkgeydvdXRlckhUTUwnIHwgJ2lubmVySFRNTCd9IG1vcnBoU3R5bGVcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2lnbm9yZUFjdGl2ZV1cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2lnbm9yZUFjdGl2ZVZhbHVlXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbcmVzdG9yZUZvY3VzXVxuICogQHByb3BlcnR5IHtDb25maWdDYWxsYmFja3NJbnRlcm5hbH0gY2FsbGJhY2tzXG4gKiBAcHJvcGVydHkge0NvbmZpZ0hlYWRJbnRlcm5hbH0gaGVhZFxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gSWRTZXRzXG4gKiBAcHJvcGVydHkge1NldDxzdHJpbmc+fSBwZXJzaXN0ZW50SWRzXG4gKiBAcHJvcGVydHkge01hcDxOb2RlLCBTZXQ8c3RyaW5nPj59IGlkTWFwXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7RnVuY3Rpb259IE1vcnBoXG4gKlxuICogQHBhcmFtIHtFbGVtZW50IHwgRG9jdW1lbnR9IG9sZE5vZGVcbiAqIEBwYXJhbSB7RWxlbWVudCB8IE5vZGUgfCBIVE1MQ29sbGVjdGlvbiB8IE5vZGVbXSB8IHN0cmluZyB8IG51bGx9IG5ld0NvbnRlbnRcbiAqIEBwYXJhbSB7Q29uZmlnfSBbY29uZmlnXVxuICogQHJldHVybnMge3VuZGVmaW5lZCB8IE5vZGVbXX1cbiAqL1xuXG4vLyBiYXNlIElJRkUgdG8gZGVmaW5lIGlkaW9tb3JwaFxuLyoqXG4gKlxuICogQHR5cGUge3tkZWZhdWx0czogQ29uZmlnSW50ZXJuYWwsIG1vcnBoOiBNb3JwaH19XG4gKi9cbnZhciBJZGlvbW9ycGggPSAoZnVuY3Rpb24gKCkge1xuXG4gIC8qKlxuICAgKiBAdHlwZWRlZiB7b2JqZWN0fSBNb3JwaENvbnRleHRcbiAgICpcbiAgICogQHByb3BlcnR5IHtFbGVtZW50fSB0YXJnZXRcbiAgICogQHByb3BlcnR5IHtFbGVtZW50fSBuZXdDb250ZW50XG4gICAqIEBwcm9wZXJ0eSB7Q29uZmlnSW50ZXJuYWx9IGNvbmZpZ1xuICAgKiBAcHJvcGVydHkge0NvbmZpZ0ludGVybmFsWydtb3JwaFN0eWxlJ119IG1vcnBoU3R5bGVcbiAgICogQHByb3BlcnR5IHtDb25maWdJbnRlcm5hbFsnaWdub3JlQWN0aXZlJ119IGlnbm9yZUFjdGl2ZVxuICAgKiBAcHJvcGVydHkge0NvbmZpZ0ludGVybmFsWydpZ25vcmVBY3RpdmVWYWx1ZSddfSBpZ25vcmVBY3RpdmVWYWx1ZVxuICAgKiBAcHJvcGVydHkge0NvbmZpZ0ludGVybmFsWydyZXN0b3JlRm9jdXMnXX0gcmVzdG9yZUZvY3VzXG4gICAqIEBwcm9wZXJ0eSB7TWFwPE5vZGUsIFNldDxzdHJpbmc+Pn0gaWRNYXBcbiAgICogQHByb3BlcnR5IHtTZXQ8c3RyaW5nPn0gcGVyc2lzdGVudElkc1xuICAgKiBAcHJvcGVydHkge0NvbmZpZ0ludGVybmFsWydjYWxsYmFja3MnXX0gY2FsbGJhY2tzXG4gICAqIEBwcm9wZXJ0eSB7Q29uZmlnSW50ZXJuYWxbJ2hlYWQnXX0gaGVhZFxuICAgKiBAcHJvcGVydHkge0hUTUxEaXZFbGVtZW50fSBwYW50cnlcbiAgICovXG5cbiAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBBTkQgTk9XIElUIEJFR0lOUy4uLlxuICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgY29uc3Qgbm9PcCA9ICgpID0+IHt9O1xuICAvKipcbiAgICogRGVmYXVsdCBjb25maWd1cmF0aW9uIHZhbHVlcywgdXBkYXRhYmxlIGJ5IHVzZXJzIG5vd1xuICAgKiBAdHlwZSB7Q29uZmlnSW50ZXJuYWx9XG4gICAqL1xuICBjb25zdCBkZWZhdWx0cyA9IHtcbiAgICBtb3JwaFN0eWxlOiBcIm91dGVySFRNTFwiLFxuICAgIGNhbGxiYWNrczoge1xuICAgICAgYmVmb3JlTm9kZUFkZGVkOiBub09wLFxuICAgICAgYWZ0ZXJOb2RlQWRkZWQ6IG5vT3AsXG4gICAgICBiZWZvcmVOb2RlTW9ycGhlZDogbm9PcCxcbiAgICAgIGFmdGVyTm9kZU1vcnBoZWQ6IG5vT3AsXG4gICAgICBiZWZvcmVOb2RlUmVtb3ZlZDogbm9PcCxcbiAgICAgIGFmdGVyTm9kZVJlbW92ZWQ6IG5vT3AsXG4gICAgICBiZWZvcmVBdHRyaWJ1dGVVcGRhdGVkOiBub09wLFxuICAgIH0sXG4gICAgaGVhZDoge1xuICAgICAgc3R5bGU6IFwibWVyZ2VcIixcbiAgICAgIHNob3VsZFByZXNlcnZlOiAoZWx0KSA9PiBlbHQuZ2V0QXR0cmlidXRlKFwiaW0tcHJlc2VydmVcIikgPT09IFwidHJ1ZVwiLFxuICAgICAgc2hvdWxkUmVBcHBlbmQ6IChlbHQpID0+IGVsdC5nZXRBdHRyaWJ1dGUoXCJpbS1yZS1hcHBlbmRcIikgPT09IFwidHJ1ZVwiLFxuICAgICAgc2hvdWxkUmVtb3ZlOiBub09wLFxuICAgICAgYWZ0ZXJIZWFkTW9ycGhlZDogbm9PcCxcbiAgICB9LFxuICAgIHJlc3RvcmVGb2N1czogdHJ1ZSxcbiAgfTtcblxuICAvKipcbiAgICogQ29yZSBpZGlvbW9ycGggZnVuY3Rpb24gZm9yIG1vcnBoaW5nIG9uZSBET00gdHJlZSB0byBhbm90aGVyXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudCB8IERvY3VtZW50fSBvbGROb2RlXG4gICAqIEBwYXJhbSB7RWxlbWVudCB8IE5vZGUgfCBIVE1MQ29sbGVjdGlvbiB8IE5vZGVbXSB8IHN0cmluZyB8IG51bGx9IG5ld0NvbnRlbnRcbiAgICogQHBhcmFtIHtDb25maWd9IFtjb25maWddXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPE5vZGVbXT4gfCBOb2RlW119XG4gICAqL1xuICBmdW5jdGlvbiBtb3JwaChvbGROb2RlLCBuZXdDb250ZW50LCBjb25maWcgPSB7fSkge1xuICAgIG9sZE5vZGUgPSBub3JtYWxpemVFbGVtZW50KG9sZE5vZGUpO1xuICAgIGNvbnN0IG5ld05vZGUgPSBub3JtYWxpemVQYXJlbnQobmV3Q29udGVudCk7XG4gICAgY29uc3QgY3R4ID0gY3JlYXRlTW9ycGhDb250ZXh0KG9sZE5vZGUsIG5ld05vZGUsIGNvbmZpZyk7XG5cbiAgICBjb25zdCBtb3JwaGVkTm9kZXMgPSBzYXZlQW5kUmVzdG9yZUZvY3VzKGN0eCwgKCkgPT4ge1xuICAgICAgcmV0dXJuIHdpdGhIZWFkQmxvY2tpbmcoXG4gICAgICAgIGN0eCxcbiAgICAgICAgb2xkTm9kZSxcbiAgICAgICAgbmV3Tm9kZSxcbiAgICAgICAgLyoqIEBwYXJhbSB7TW9ycGhDb250ZXh0fSBjdHggKi8gKGN0eCkgPT4ge1xuICAgICAgICAgIGlmIChjdHgubW9ycGhTdHlsZSA9PT0gXCJpbm5lckhUTUxcIikge1xuICAgICAgICAgICAgbW9ycGhDaGlsZHJlbihjdHgsIG9sZE5vZGUsIG5ld05vZGUpO1xuICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20ob2xkTm9kZS5jaGlsZE5vZGVzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG1vcnBoT3V0ZXJIVE1MKGN0eCwgb2xkTm9kZSwgbmV3Tm9kZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGN0eC5wYW50cnkucmVtb3ZlKCk7XG4gICAgcmV0dXJuIG1vcnBoZWROb2RlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBNb3JwaCBqdXN0IHRoZSBvdXRlckhUTUwgb2YgdGhlIG9sZE5vZGUgdG8gdGhlIG5ld0NvbnRlbnRcbiAgICogV2UgaGF2ZSB0byBiZSBjYXJlZnVsIGJlY2F1c2UgdGhlIG9sZE5vZGUgY291bGQgaGF2ZSBzaWJsaW5ncyB3aGljaCBuZWVkIHRvIGJlIHVudG91Y2hlZFxuICAgKiBAcGFyYW0ge01vcnBoQ29udGV4dH0gY3R4XG4gICAqIEBwYXJhbSB7RWxlbWVudH0gb2xkTm9kZVxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IG5ld05vZGVcbiAgICogQHJldHVybnMge05vZGVbXX1cbiAgICovXG4gIGZ1bmN0aW9uIG1vcnBoT3V0ZXJIVE1MKGN0eCwgb2xkTm9kZSwgbmV3Tm9kZSkge1xuICAgIGNvbnN0IG9sZFBhcmVudCA9IG5vcm1hbGl6ZVBhcmVudChvbGROb2RlKTtcblxuICAgIC8vIGJhc2lzIGZvciBjYWx1bGF0aW5nIHdoaWNoIG5vZGVzIHdlcmUgbW9ycGhlZFxuICAgIC8vIHNpbmNlIHRoZXJlIG1heSBiZSB1bm1vcnBoZWQgc2libGluZyBub2Rlc1xuICAgIGxldCBjaGlsZE5vZGVzID0gQXJyYXkuZnJvbShvbGRQYXJlbnQuY2hpbGROb2Rlcyk7XG4gICAgY29uc3QgaW5kZXggPSBjaGlsZE5vZGVzLmluZGV4T2Yob2xkTm9kZSk7XG4gICAgLy8gaG93IG1hbnkgZWxlbWVudHMgYXJlIHRvIHRoZSByaWdodCBvZiB0aGUgb2xkTm9kZVxuICAgIGNvbnN0IHJpZ2h0TWFyZ2luID0gY2hpbGROb2Rlcy5sZW5ndGggLSAoaW5kZXggKyAxKTtcblxuICAgIG1vcnBoQ2hpbGRyZW4oXG4gICAgICBjdHgsXG4gICAgICBvbGRQYXJlbnQsXG4gICAgICBuZXdOb2RlLFxuICAgICAgLy8gdGhlc2UgdHdvIG9wdGlvbmFsIHBhcmFtcyBhcmUgdGhlIHNlY3JldCBzYXVjZVxuICAgICAgb2xkTm9kZSwgLy8gc3RhcnQgcG9pbnQgZm9yIGl0ZXJhdGlvblxuICAgICAgb2xkTm9kZS5uZXh0U2libGluZywgLy8gZW5kIHBvaW50IGZvciBpdGVyYXRpb25cbiAgICApO1xuXG4gICAgLy8gcmV0dXJuIGp1c3QgdGhlIG1vcnBoZWQgbm9kZXNcbiAgICBjaGlsZE5vZGVzID0gQXJyYXkuZnJvbShvbGRQYXJlbnQuY2hpbGROb2Rlcyk7XG4gICAgcmV0dXJuIGNoaWxkTm9kZXMuc2xpY2UoaW5kZXgsIGNoaWxkTm9kZXMubGVuZ3RoIC0gcmlnaHRNYXJnaW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7TW9ycGhDb250ZXh0fSBjdHhcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICogQHJldHVybnMge1Byb21pc2U8Tm9kZVtdPiB8IE5vZGVbXX1cbiAgICovXG4gIGZ1bmN0aW9uIHNhdmVBbmRSZXN0b3JlRm9jdXMoY3R4LCBmbikge1xuICAgIGlmICghY3R4LmNvbmZpZy5yZXN0b3JlRm9jdXMpIHJldHVybiBmbigpO1xuICAgIGxldCBhY3RpdmVFbGVtZW50ID1cbiAgICAgIC8qKiBAdHlwZSB7SFRNTElucHV0RWxlbWVudHxIVE1MVGV4dEFyZWFFbGVtZW50fG51bGx9ICovIChcbiAgICAgICAgZG9jdW1lbnQuYWN0aXZlRWxlbWVudFxuICAgICAgKTtcblxuICAgIC8vIGRvbid0IGJvdGhlciBpZiB0aGUgYWN0aXZlIGVsZW1lbnQgaXMgbm90IGFuIGlucHV0IG9yIHRleHRhcmVhXG4gICAgaWYgKFxuICAgICAgIShcbiAgICAgICAgYWN0aXZlRWxlbWVudCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgfHxcbiAgICAgICAgYWN0aXZlRWxlbWVudCBpbnN0YW5jZW9mIEhUTUxUZXh0QXJlYUVsZW1lbnRcbiAgICAgIClcbiAgICApIHtcbiAgICAgIHJldHVybiBmbigpO1xuICAgIH1cblxuICAgIGNvbnN0IHsgaWQ6IGFjdGl2ZUVsZW1lbnRJZCwgc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZCB9ID0gYWN0aXZlRWxlbWVudDtcblxuICAgIGNvbnN0IHJlc3VsdHMgPSBmbigpO1xuXG4gICAgaWYgKGFjdGl2ZUVsZW1lbnRJZCAmJiBhY3RpdmVFbGVtZW50SWQgIT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ/LmlkKSB7XG4gICAgICBhY3RpdmVFbGVtZW50ID0gY3R4LnRhcmdldC5xdWVyeVNlbGVjdG9yKGAjJHthY3RpdmVFbGVtZW50SWR9YCk7XG4gICAgICBhY3RpdmVFbGVtZW50Py5mb2N1cygpO1xuICAgIH1cbiAgICBpZiAoYWN0aXZlRWxlbWVudCAmJiAhYWN0aXZlRWxlbWVudC5zZWxlY3Rpb25FbmQgJiYgc2VsZWN0aW9uRW5kKSB7XG4gICAgICBhY3RpdmVFbGVtZW50LnNldFNlbGVjdGlvblJhbmdlKHNlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmQpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG5cbiAgY29uc3QgbW9ycGhDaGlsZHJlbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogVGhpcyBpcyB0aGUgY29yZSBhbGdvcml0aG0gZm9yIG1hdGNoaW5nIHVwIGNoaWxkcmVuLiAgVGhlIGlkZWEgaXMgdG8gdXNlIGlkIHNldHMgdG8gdHJ5IHRvIG1hdGNoIHVwXG4gICAgICogbm9kZXMgYXMgZmFpdGhmdWxseSBhcyBwb3NzaWJsZS4gIFdlIGdyZWVkaWx5IG1hdGNoLCB3aGljaCBhbGxvd3MgdXMgdG8ga2VlcCB0aGUgYWxnb3JpdGhtIGZhc3QsIGJ1dFxuICAgICAqIGJ5IHVzaW5nIGlkIHNldHMsIHdlIGFyZSBhYmxlIHRvIGJldHRlciBtYXRjaCB1cCB3aXRoIGNvbnRlbnQgZGVlcGVyIGluIHRoZSBET00uXG4gICAgICpcbiAgICAgKiBCYXNpYyBhbGdvcml0aG06XG4gICAgICogLSBmb3IgZWFjaCBub2RlIGluIHRoZSBuZXcgY29udGVudDpcbiAgICAgKiAgIC0gc2VhcmNoIHNlbGYgYW5kIHNpYmxpbmdzIGZvciBhbiBpZCBzZXQgbWF0Y2gsIGZhbGxpbmcgYmFjayB0byBhIHNvZnQgbWF0Y2hcbiAgICAgKiAgIC0gaWYgbWF0Y2ggZm91bmRcbiAgICAgKiAgICAgLSByZW1vdmUgYW55IG5vZGVzIHVwIHRvIHRoZSBtYXRjaDpcbiAgICAgKiAgICAgICAtIHBhbnRyeSBwZXJzaXN0ZW50IG5vZGVzXG4gICAgICogICAgICAgLSBkZWxldGUgdGhlIHJlc3RcbiAgICAgKiAgICAgLSBtb3JwaCB0aGUgbWF0Y2hcbiAgICAgKiAgIC0gZWxzaWYgbm8gbWF0Y2ggZm91bmQsIGFuZCBub2RlIGlzIHBlcnNpc3RlbnRcbiAgICAgKiAgICAgLSBmaW5kIGl0cyBtYXRjaCBieSBxdWVyeWluZyB0aGUgb2xkIHJvb3QgKGZ1dHVyZSkgYW5kIHBhbnRyeSAocGFzdClcbiAgICAgKiAgICAgLSBtb3ZlIGl0IGFuZCBpdHMgY2hpbGRyZW4gaGVyZVxuICAgICAqICAgICAtIG1vcnBoIGl0XG4gICAgICogICAtIGVsc2VcbiAgICAgKiAgICAgLSBjcmVhdGUgYSBuZXcgbm9kZSBmcm9tIHNjcmF0Y2ggYXMgYSBsYXN0IHJlc3VsdFxuICAgICAqXG4gICAgICogQHBhcmFtIHtNb3JwaENvbnRleHR9IGN0eCB0aGUgbWVyZ2UgY29udGV4dFxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gb2xkUGFyZW50IHRoZSBvbGQgY29udGVudCB0aGF0IHdlIGFyZSBtZXJnaW5nIHRoZSBuZXcgY29udGVudCBpbnRvXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBuZXdQYXJlbnQgdGhlIHBhcmVudCBlbGVtZW50IG9mIHRoZSBuZXcgY29udGVudFxuICAgICAqIEBwYXJhbSB7Tm9kZXxudWxsfSBbaW5zZXJ0aW9uUG9pbnRdIHRoZSBwb2ludCBpbiB0aGUgRE9NIHdlIHN0YXJ0IG1vcnBoaW5nIGF0IChkZWZhdWx0cyB0byBmaXJzdCBjaGlsZClcbiAgICAgKiBAcGFyYW0ge05vZGV8bnVsbH0gW2VuZFBvaW50XSB0aGUgcG9pbnQgaW4gdGhlIERPTSB3ZSBzdG9wIG1vcnBoaW5nIGF0IChkZWZhdWx0cyB0byBhZnRlciBsYXN0IGNoaWxkKVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1vcnBoQ2hpbGRyZW4oXG4gICAgICBjdHgsXG4gICAgICBvbGRQYXJlbnQsXG4gICAgICBuZXdQYXJlbnQsXG4gICAgICBpbnNlcnRpb25Qb2ludCA9IG51bGwsXG4gICAgICBlbmRQb2ludCA9IG51bGwsXG4gICAgKSB7XG4gICAgICAvLyBub3JtYWxpemVcbiAgICAgIGlmIChcbiAgICAgICAgb2xkUGFyZW50IGluc3RhbmNlb2YgSFRNTFRlbXBsYXRlRWxlbWVudCAmJlxuICAgICAgICBuZXdQYXJlbnQgaW5zdGFuY2VvZiBIVE1MVGVtcGxhdGVFbGVtZW50XG4gICAgICApIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZSB3ZSBjYW4gcHJldGVuZCB0aGUgRG9jdW1lbnRGcmFnbWVudCBpcyBhbiBFbGVtZW50XG4gICAgICAgIG9sZFBhcmVudCA9IG9sZFBhcmVudC5jb250ZW50O1xuICAgICAgICAvLyBAdHMtaWdub3JlIGRpdHRvXG4gICAgICAgIG5ld1BhcmVudCA9IG5ld1BhcmVudC5jb250ZW50O1xuICAgICAgfVxuICAgICAgaW5zZXJ0aW9uUG9pbnQgfHw9IG9sZFBhcmVudC5maXJzdENoaWxkO1xuXG4gICAgICAvLyBydW4gdGhyb3VnaCBhbGwgdGhlIG5ldyBjb250ZW50XG4gICAgICBmb3IgKGNvbnN0IG5ld0NoaWxkIG9mIG5ld1BhcmVudC5jaGlsZE5vZGVzKSB7XG4gICAgICAgIC8vIG9uY2Ugd2UgcmVhY2ggdGhlIGVuZCBvZiB0aGUgb2xkIHBhcmVudCBjb250ZW50IHNraXAgdG8gdGhlIGVuZCBhbmQgaW5zZXJ0IHRoZSByZXN0XG4gICAgICAgIGlmIChpbnNlcnRpb25Qb2ludCAmJiBpbnNlcnRpb25Qb2ludCAhPSBlbmRQb2ludCkge1xuICAgICAgICAgIGNvbnN0IGJlc3RNYXRjaCA9IGZpbmRCZXN0TWF0Y2goXG4gICAgICAgICAgICBjdHgsXG4gICAgICAgICAgICBuZXdDaGlsZCxcbiAgICAgICAgICAgIGluc2VydGlvblBvaW50LFxuICAgICAgICAgICAgZW5kUG9pbnQsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAoYmVzdE1hdGNoKSB7XG4gICAgICAgICAgICAvLyBpZiB0aGUgbm9kZSB0byBtb3JwaCBpcyBub3QgYXQgdGhlIGluc2VydGlvbiBwb2ludCB0aGVuIHJlbW92ZS9tb3ZlIHVwIHRvIGl0XG4gICAgICAgICAgICBpZiAoYmVzdE1hdGNoICE9PSBpbnNlcnRpb25Qb2ludCkge1xuICAgICAgICAgICAgICByZW1vdmVOb2Rlc0JldHdlZW4oY3R4LCBpbnNlcnRpb25Qb2ludCwgYmVzdE1hdGNoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1vcnBoTm9kZShiZXN0TWF0Y2gsIG5ld0NoaWxkLCBjdHgpO1xuICAgICAgICAgICAgaW5zZXJ0aW9uUG9pbnQgPSBiZXN0TWF0Y2gubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiB0aGUgbWF0Y2hpbmcgbm9kZSBpcyBlbHNld2hlcmUgaW4gdGhlIG9yaWdpbmFsIGNvbnRlbnRcbiAgICAgICAgaWYgKG5ld0NoaWxkIGluc3RhbmNlb2YgRWxlbWVudCAmJiBjdHgucGVyc2lzdGVudElkcy5oYXMobmV3Q2hpbGQuaWQpKSB7XG4gICAgICAgICAgLy8gbW92ZSBpdCBhbmQgYWxsIGl0cyBjaGlsZHJlbiBoZXJlIGFuZCBtb3JwaFxuICAgICAgICAgIGNvbnN0IG1vdmVkQ2hpbGQgPSBtb3ZlQmVmb3JlQnlJZChcbiAgICAgICAgICAgIG9sZFBhcmVudCxcbiAgICAgICAgICAgIG5ld0NoaWxkLmlkLFxuICAgICAgICAgICAgaW5zZXJ0aW9uUG9pbnQsXG4gICAgICAgICAgICBjdHgsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBtb3JwaE5vZGUobW92ZWRDaGlsZCwgbmV3Q2hpbGQsIGN0eCk7XG4gICAgICAgICAgaW5zZXJ0aW9uUG9pbnQgPSBtb3ZlZENoaWxkLm5leHRTaWJsaW5nO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbGFzdCByZXNvcnQ6IGluc2VydCB0aGUgbmV3IG5vZGUgZnJvbSBzY3JhdGNoXG4gICAgICAgIGNvbnN0IGluc2VydGVkTm9kZSA9IGNyZWF0ZU5vZGUoXG4gICAgICAgICAgb2xkUGFyZW50LFxuICAgICAgICAgIG5ld0NoaWxkLFxuICAgICAgICAgIGluc2VydGlvblBvaW50LFxuICAgICAgICAgIGN0eCxcbiAgICAgICAgKTtcbiAgICAgICAgLy8gY291bGQgYmUgbnVsbCBpZiBiZWZvcmVOb2RlQWRkZWQgcHJldmVudGVkIGluc2VydGlvblxuICAgICAgICBpZiAoaW5zZXJ0ZWROb2RlKSB7XG4gICAgICAgICAgaW5zZXJ0aW9uUG9pbnQgPSBpbnNlcnRlZE5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gcmVtb3ZlIGFueSByZW1haW5pbmcgb2xkIG5vZGVzIHRoYXQgZGlkbid0IG1hdGNoIHVwIHdpdGggbmV3IGNvbnRlbnRcbiAgICAgIHdoaWxlIChpbnNlcnRpb25Qb2ludCAmJiBpbnNlcnRpb25Qb2ludCAhPSBlbmRQb2ludCkge1xuICAgICAgICBjb25zdCB0ZW1wTm9kZSA9IGluc2VydGlvblBvaW50O1xuICAgICAgICBpbnNlcnRpb25Qb2ludCA9IGluc2VydGlvblBvaW50Lm5leHRTaWJsaW5nO1xuICAgICAgICByZW1vdmVOb2RlKGN0eCwgdGVtcE5vZGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgcGVyZm9ybXMgdGhlIGFjdGlvbiBvZiBpbnNlcnRpbmcgYSBuZXcgbm9kZSB3aGlsZSBoYW5kbGluZyBzaXR1YXRpb25zIHdoZXJlIHRoZSBub2RlIGNvbnRhaW5zXG4gICAgICogZWxlbWVudHMgd2l0aCBwZXJzaXN0ZW50IGlkcyBhbmQgcG9zc2libGUgc3RhdGUgaW5mbyB3ZSBjYW4gc3RpbGwgcHJlc2VydmUgYnkgbW92aW5nIGluIGFuZCB0aGVuIG1vcnBoaW5nXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG9sZFBhcmVudFxuICAgICAqIEBwYXJhbSB7Tm9kZX0gbmV3Q2hpbGRcbiAgICAgKiBAcGFyYW0ge05vZGV8bnVsbH0gaW5zZXJ0aW9uUG9pbnRcbiAgICAgKiBAcGFyYW0ge01vcnBoQ29udGV4dH0gY3R4XG4gICAgICogQHJldHVybnMge05vZGV8bnVsbH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVOb2RlKG9sZFBhcmVudCwgbmV3Q2hpbGQsIGluc2VydGlvblBvaW50LCBjdHgpIHtcbiAgICAgIGlmIChjdHguY2FsbGJhY2tzLmJlZm9yZU5vZGVBZGRlZChuZXdDaGlsZCkgPT09IGZhbHNlKSByZXR1cm4gbnVsbDtcbiAgICAgIGlmIChjdHguaWRNYXAuaGFzKG5ld0NoaWxkKSkge1xuICAgICAgICAvLyBub2RlIGhhcyBjaGlsZHJlbiB3aXRoIGlkcyB3aXRoIHBvc3NpYmxlIHN0YXRlIHNvIGNyZWF0ZSBhIGR1bW15IGVsdCBvZiBzYW1lIHR5cGUgYW5kIGFwcGx5IGZ1bGwgbW9ycGggYWxnb3JpdGhtXG4gICAgICAgIGNvbnN0IG5ld0VtcHR5Q2hpbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgIC8qKiBAdHlwZSB7RWxlbWVudH0gKi8gKG5ld0NoaWxkKS50YWdOYW1lLFxuICAgICAgICApO1xuICAgICAgICBvbGRQYXJlbnQuaW5zZXJ0QmVmb3JlKG5ld0VtcHR5Q2hpbGQsIGluc2VydGlvblBvaW50KTtcbiAgICAgICAgbW9ycGhOb2RlKG5ld0VtcHR5Q2hpbGQsIG5ld0NoaWxkLCBjdHgpO1xuICAgICAgICBjdHguY2FsbGJhY2tzLmFmdGVyTm9kZUFkZGVkKG5ld0VtcHR5Q2hpbGQpO1xuICAgICAgICByZXR1cm4gbmV3RW1wdHlDaGlsZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG9wdGltaXNhdGlvbjogbm8gaWQgc3RhdGUgdG8gcHJlc2VydmUgc28gd2UgY2FuIGp1c3QgaW5zZXJ0IGEgY2xvbmUgb2YgdGhlIG5ld0NoaWxkIGFuZCBpdHMgZGVzY2VuZGFudHNcbiAgICAgICAgY29uc3QgbmV3Q2xvbmVkQ2hpbGQgPSBkb2N1bWVudC5pbXBvcnROb2RlKG5ld0NoaWxkLCB0cnVlKTsgLy8gaW1wb3J0Tm9kZSB0byBub3QgbXV0YXRlIG5ld1BhcmVudFxuICAgICAgICBvbGRQYXJlbnQuaW5zZXJ0QmVmb3JlKG5ld0Nsb25lZENoaWxkLCBpbnNlcnRpb25Qb2ludCk7XG4gICAgICAgIGN0eC5jYWxsYmFja3MuYWZ0ZXJOb2RlQWRkZWQobmV3Q2xvbmVkQ2hpbGQpO1xuICAgICAgICByZXR1cm4gbmV3Q2xvbmVkQ2hpbGQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIE1hdGNoaW5nIEZ1bmN0aW9uc1xuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICBjb25zdCBmaW5kQmVzdE1hdGNoID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgIC8qKlxuICAgICAgICogU2NhbnMgZm9yd2FyZCBmcm9tIHRoZSBzdGFydFBvaW50IHRvIHRoZSBlbmRQb2ludCBsb29raW5nIGZvciBhIG1hdGNoXG4gICAgICAgKiBmb3IgdGhlIG5vZGUuIEl0IGxvb2tzIGZvciBhbiBpZCBzZXQgbWF0Y2ggZmlyc3QsIHRoZW4gYSBzb2Z0IG1hdGNoLlxuICAgICAgICogV2UgYWJvcnQgc29mdG1hdGNoaW5nIGlmIHdlIGZpbmQgdHdvIGZ1dHVyZSBzb2Z0IG1hdGNoZXMsIHRvIHJlZHVjZSBjaHVybi5cbiAgICAgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICAgICAgICogQHBhcmFtIHtNb3JwaENvbnRleHR9IGN0eFxuICAgICAgICogQHBhcmFtIHtOb2RlIHwgbnVsbH0gc3RhcnRQb2ludFxuICAgICAgICogQHBhcmFtIHtOb2RlIHwgbnVsbH0gZW5kUG9pbnRcbiAgICAgICAqIEByZXR1cm5zIHtOb2RlIHwgbnVsbH1cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gZmluZEJlc3RNYXRjaChjdHgsIG5vZGUsIHN0YXJ0UG9pbnQsIGVuZFBvaW50KSB7XG4gICAgICAgIGxldCBzb2Z0TWF0Y2ggPSBudWxsO1xuICAgICAgICBsZXQgbmV4dFNpYmxpbmcgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgICAgICBsZXQgc2libGluZ1NvZnRNYXRjaENvdW50ID0gMDtcblxuICAgICAgICBsZXQgY3Vyc29yID0gc3RhcnRQb2ludDtcbiAgICAgICAgd2hpbGUgKGN1cnNvciAmJiBjdXJzb3IgIT0gZW5kUG9pbnQpIHtcbiAgICAgICAgICAvLyBzb2Z0IG1hdGNoaW5nIGlzIGEgcHJlcmVxdWlzaXRlIGZvciBpZCBzZXQgbWF0Y2hpbmdcbiAgICAgICAgICBpZiAoaXNTb2Z0TWF0Y2goY3Vyc29yLCBub2RlKSkge1xuICAgICAgICAgICAgaWYgKGlzSWRTZXRNYXRjaChjdHgsIGN1cnNvciwgbm9kZSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGN1cnNvcjsgLy8gZm91bmQgYW4gaWQgc2V0IG1hdGNoLCB3ZSdyZSBkb25lIVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyB3ZSBoYXZlbid0IHlldCBzYXZlZCBhIHNvZnQgbWF0Y2ggZmFsbGJhY2tcbiAgICAgICAgICAgIGlmIChzb2Z0TWF0Y2ggPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgLy8gdGhlIGN1cnJlbnQgc29mdCBtYXRjaCB3aWxsIGhhcmQgbWF0Y2ggc29tZXRoaW5nIGVsc2UgaW4gdGhlIGZ1dHVyZSwgbGVhdmUgaXRcbiAgICAgICAgICAgICAgaWYgKCFjdHguaWRNYXAuaGFzKGN1cnNvcikpIHtcbiAgICAgICAgICAgICAgICAvLyBzYXZlIHRoaXMgYXMgdGhlIGZhbGxiYWNrIGlmIHdlIGdldCB0aHJvdWdoIHRoZSBsb29wIHdpdGhvdXQgZmluZGluZyBhIGhhcmQgbWF0Y2hcbiAgICAgICAgICAgICAgICBzb2Z0TWF0Y2ggPSBjdXJzb3I7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgc29mdE1hdGNoID09PSBudWxsICYmXG4gICAgICAgICAgICBuZXh0U2libGluZyAmJlxuICAgICAgICAgICAgaXNTb2Z0TWF0Y2goY3Vyc29yLCBuZXh0U2libGluZylcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIC8vIFRoZSBuZXh0IG5ldyBub2RlIGhhcyBhIHNvZnQgbWF0Y2ggd2l0aCB0aGlzIG5vZGUsIHNvXG4gICAgICAgICAgICAvLyBpbmNyZW1lbnQgdGhlIGNvdW50IG9mIGZ1dHVyZSBzb2Z0IG1hdGNoZXNcbiAgICAgICAgICAgIHNpYmxpbmdTb2Z0TWF0Y2hDb3VudCsrO1xuICAgICAgICAgICAgbmV4dFNpYmxpbmcgPSBuZXh0U2libGluZy5uZXh0U2libGluZztcblxuICAgICAgICAgICAgLy8gSWYgdGhlcmUgYXJlIHR3byBmdXR1cmUgc29mdCBtYXRjaGVzLCBibG9jayBzb2Z0IG1hdGNoaW5nIGZvciB0aGlzIG5vZGUgdG8gYWxsb3dcbiAgICAgICAgICAgIC8vIGZ1dHVyZSBzaWJsaW5ncyB0byBzb2Z0IG1hdGNoLiBUaGlzIGlzIHRvIHJlZHVjZSBjaHVybiBpbiB0aGUgRE9NIHdoZW4gYW4gZWxlbWVudFxuICAgICAgICAgICAgLy8gaXMgcHJlcGVuZGVkLlxuICAgICAgICAgICAgaWYgKHNpYmxpbmdTb2Z0TWF0Y2hDb3VudCA+PSAyKSB7XG4gICAgICAgICAgICAgIHNvZnRNYXRjaCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBpZiB0aGUgY3VycmVudCBub2RlIGNvbnRhaW5zIGFjdGl2ZSBlbGVtZW50LCBzdG9wIGxvb2tpbmcgZm9yIGJldHRlciBmdXR1cmUgbWF0Y2hlcyxcbiAgICAgICAgICAvLyBiZWNhdXNlIGlmIG9uZSBpcyBmb3VuZCwgdGhpcyBub2RlIHdpbGwgYmUgbW92ZWQgdG8gdGhlIHBhbnRyeSwgcmVwYXJlbnRpbmcgaXQgYW5kIHRodXMgbG9zaW5nIGZvY3VzXG4gICAgICAgICAgaWYgKGN1cnNvci5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KSkgYnJlYWs7XG5cbiAgICAgICAgICBjdXJzb3IgPSBjdXJzb3IubmV4dFNpYmxpbmc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc29mdE1hdGNoIHx8IG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7TW9ycGhDb250ZXh0fSBjdHhcbiAgICAgICAqIEBwYXJhbSB7Tm9kZX0gb2xkTm9kZVxuICAgICAgICogQHBhcmFtIHtOb2RlfSBuZXdOb2RlXG4gICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gaXNJZFNldE1hdGNoKGN0eCwgb2xkTm9kZSwgbmV3Tm9kZSkge1xuICAgICAgICBsZXQgb2xkU2V0ID0gY3R4LmlkTWFwLmdldChvbGROb2RlKTtcbiAgICAgICAgbGV0IG5ld1NldCA9IGN0eC5pZE1hcC5nZXQobmV3Tm9kZSk7XG5cbiAgICAgICAgaWYgKCFuZXdTZXQgfHwgIW9sZFNldCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIGZvciAoY29uc3QgaWQgb2Ygb2xkU2V0KSB7XG4gICAgICAgICAgLy8gYSBwb3RlbnRpYWwgbWF0Y2ggaXMgYW4gaWQgaW4gdGhlIG5ldyBhbmQgb2xkIG5vZGVzIHRoYXRcbiAgICAgICAgICAvLyBoYXMgbm90IGFscmVhZHkgYmVlbiBtZXJnZWQgaW50byB0aGUgRE9NXG4gICAgICAgICAgLy8gQnV0IHRoZSBuZXdOb2RlIGNvbnRlbnQgd2UgY2FsbCB0aGlzIG9uIGhhcyBub3QgYmVlblxuICAgICAgICAgIC8vIG1lcmdlZCB5ZXQgYW5kIHdlIGRvbid0IGFsbG93IGR1cGxpY2F0ZSBJRHMgc28gaXQgaXMgc2ltcGxlXG4gICAgICAgICAgaWYgKG5ld1NldC5oYXMoaWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge05vZGV9IG9sZE5vZGVcbiAgICAgICAqIEBwYXJhbSB7Tm9kZX0gbmV3Tm9kZVxuICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIGlzU29mdE1hdGNoKG9sZE5vZGUsIG5ld05vZGUpIHtcbiAgICAgICAgLy8gb2sgdG8gY2FzdDogaWYgb25lIGlzIG5vdCBlbGVtZW50LCBgaWRgIGFuZCBgdGFnTmFtZWAgd2lsbCBiZSB1bmRlZmluZWQgYW5kIHdlJ2xsIGp1c3QgY29tcGFyZSB0aGF0LlxuICAgICAgICBjb25zdCBvbGRFbHQgPSAvKiogQHR5cGUge0VsZW1lbnR9ICovIChvbGROb2RlKTtcbiAgICAgICAgY29uc3QgbmV3RWx0ID0gLyoqIEB0eXBlIHtFbGVtZW50fSAqLyAobmV3Tm9kZSk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBvbGRFbHQubm9kZVR5cGUgPT09IG5ld0VsdC5ub2RlVHlwZSAmJlxuICAgICAgICAgIG9sZEVsdC50YWdOYW1lID09PSBuZXdFbHQudGFnTmFtZSAmJlxuICAgICAgICAgIC8vIElmIG9sZEVsdCBoYXMgYW4gYGlkYCB3aXRoIHBvc3NpYmxlIHN0YXRlIGFuZCBpdCBkb2Vzbid0IG1hdGNoIG5ld0VsdC5pZCB0aGVuIGF2b2lkIG1vcnBoaW5nLlxuICAgICAgICAgIC8vIFdlJ2xsIHN0aWxsIG1hdGNoIGFuIGFub255bW91cyBub2RlIHdpdGggYW4gSURlZCBuZXdFbHQsIHRob3VnaCwgYmVjYXVzZSBpZiBpdCBnb3QgdGhpcyBmYXIsXG4gICAgICAgICAgLy8gaXRzIG5vdCBwZXJzaXN0ZW50LCBhbmQgbmV3IG5vZGVzIGNhbid0IGhhdmUgYW55IGhpZGRlbiBzdGF0ZS5cbiAgICAgICAgICAoIW9sZEVsdC5pZCB8fCBvbGRFbHQuaWQgPT09IG5ld0VsdC5pZClcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZpbmRCZXN0TWF0Y2g7XG4gICAgfSkoKTtcblxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyBET00gTWFuaXB1bGF0aW9uIEZ1bmN0aW9uc1xuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgIC8qKlxuICAgICAqIEdldHMgcmlkIG9mIGFuIHVud2FudGVkIERPTSBub2RlOyBzdHJhdGVneSBkZXBlbmRzIG9uIG5hdHVyZSBvZiBpdHMgcmV1c2U6XG4gICAgICogLSBQZXJzaXN0ZW50IG5vZGVzIHdpbGwgYmUgbW92ZWQgdG8gdGhlIHBhbnRyeSBmb3IgbGF0ZXIgcmV1c2VcbiAgICAgKiAtIE90aGVyIG5vZGVzIHdpbGwgaGF2ZSB0aGVpciBob29rcyBjYWxsZWQsIGFuZCB0aGVuIGFyZSByZW1vdmVkXG4gICAgICogQHBhcmFtIHtNb3JwaENvbnRleHR9IGN0eFxuICAgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZU5vZGUoY3R4LCBub2RlKSB7XG4gICAgICAvLyBhcmUgd2UgZ29pbmcgdG8gaWQgc2V0IG1hdGNoIHRoaXMgbGF0ZXI/XG4gICAgICBpZiAoY3R4LmlkTWFwLmhhcyhub2RlKSkge1xuICAgICAgICAvLyBza2lwIGNhbGxiYWNrcyBhbmQgbW92ZSB0byBwYW50cnlcbiAgICAgICAgbW92ZUJlZm9yZShjdHgucGFudHJ5LCBub2RlLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHJlbW92ZSBmb3IgcmVhbHNpZXNcbiAgICAgICAgaWYgKGN0eC5jYWxsYmFja3MuYmVmb3JlTm9kZVJlbW92ZWQobm9kZSkgPT09IGZhbHNlKSByZXR1cm47XG4gICAgICAgIG5vZGUucGFyZW50Tm9kZT8ucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgICAgIGN0eC5jYWxsYmFja3MuYWZ0ZXJOb2RlUmVtb3ZlZChub2RlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgbm9kZXMgYmV0d2VlbiB0aGUgc3RhcnQgYW5kIGVuZCBub2Rlc1xuICAgICAqIEBwYXJhbSB7TW9ycGhDb250ZXh0fSBjdHhcbiAgICAgKiBAcGFyYW0ge05vZGV9IHN0YXJ0SW5jbHVzaXZlXG4gICAgICogQHBhcmFtIHtOb2RlfSBlbmRFeGNsdXNpdmVcbiAgICAgKiBAcmV0dXJucyB7Tm9kZXxudWxsfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZU5vZGVzQmV0d2VlbihjdHgsIHN0YXJ0SW5jbHVzaXZlLCBlbmRFeGNsdXNpdmUpIHtcbiAgICAgIC8qKiBAdHlwZSB7Tm9kZSB8IG51bGx9ICovXG4gICAgICBsZXQgY3Vyc29yID0gc3RhcnRJbmNsdXNpdmU7XG4gICAgICAvLyByZW1vdmUgbm9kZXMgdW50aWwgdGhlIGVuZEV4Y2x1c2l2ZSBub2RlXG4gICAgICB3aGlsZSAoY3Vyc29yICYmIGN1cnNvciAhPT0gZW5kRXhjbHVzaXZlKSB7XG4gICAgICAgIGxldCB0ZW1wTm9kZSA9IC8qKiBAdHlwZSB7Tm9kZX0gKi8gKGN1cnNvcik7XG4gICAgICAgIGN1cnNvciA9IGN1cnNvci5uZXh0U2libGluZztcbiAgICAgICAgcmVtb3ZlTm9kZShjdHgsIHRlbXBOb2RlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjdXJzb3I7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VhcmNoIGZvciBhbiBlbGVtZW50IGJ5IGlkIHdpdGhpbiB0aGUgZG9jdW1lbnQgYW5kIHBhbnRyeSwgYW5kIG1vdmUgaXQgdXNpbmcgbW92ZUJlZm9yZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gcGFyZW50Tm9kZSAtIFRoZSBwYXJlbnQgbm9kZSB0byB3aGljaCB0aGUgZWxlbWVudCB3aWxsIGJlIG1vdmVkLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIFRoZSBJRCBvZiB0aGUgZWxlbWVudCB0byBiZSBtb3ZlZC5cbiAgICAgKiBAcGFyYW0ge05vZGUgfCBudWxsfSBhZnRlciAtIFRoZSByZWZlcmVuY2Ugbm9kZSB0byBpbnNlcnQgdGhlIGVsZW1lbnQgYmVmb3JlLlxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgYG51bGxgLCB0aGUgZWxlbWVudCBpcyBhcHBlbmRlZCBhcyB0aGUgbGFzdCBjaGlsZC5cbiAgICAgKiBAcGFyYW0ge01vcnBoQ29udGV4dH0gY3R4XG4gICAgICogQHJldHVybnMge0VsZW1lbnR9IFRoZSBmb3VuZCBlbGVtZW50XG4gICAgICovXG4gICAgZnVuY3Rpb24gbW92ZUJlZm9yZUJ5SWQocGFyZW50Tm9kZSwgaWQsIGFmdGVyLCBjdHgpIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9XG4gICAgICAgIC8qKiBAdHlwZSB7RWxlbWVudH0gLSB3aWxsIGFsd2F5cyBiZSBmb3VuZCAqL1xuICAgICAgICAoXG4gICAgICAgICAgY3R4LnRhcmdldC5xdWVyeVNlbGVjdG9yKGAjJHtpZH1gKSB8fFxuICAgICAgICAgICAgY3R4LnBhbnRyeS5xdWVyeVNlbGVjdG9yKGAjJHtpZH1gKVxuICAgICAgICApO1xuICAgICAgcmVtb3ZlRWxlbWVudEZyb21BbmNlc3RvcnNJZE1hcHModGFyZ2V0LCBjdHgpO1xuICAgICAgbW92ZUJlZm9yZShwYXJlbnROb2RlLCB0YXJnZXQsIGFmdGVyKTtcbiAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbiBlbGVtZW50IGZyb20gaXRzIGFuY2VzdG9ycycgaWQgbWFwcy4gVGhpcyBpcyBuZWVkZWQgd2hlbiBhbiBlbGVtZW50IGlzIG1vdmVkIGZyb20gdGhlXG4gICAgICogXCJmdXR1cmVcIiB2aWEgYG1vdmVCZWZvcmVJZGAuIE90aGVyd2lzZSwgaXRzIGVyc3R3aGlsZSBhbmNlc3RvcnMgY291bGQgYmUgbWlzdGFrZW5seSBtb3ZlZCB0byB0aGVcbiAgICAgKiBwYW50cnkgcmF0aGVyIHRoYW4gYmVpbmcgZGVsZXRlZCwgcHJldmVudGluZyB0aGVpciByZW1vdmFsIGhvb2tzIGZyb20gYmVpbmcgY2FsbGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IC0gZWxlbWVudCB0byByZW1vdmUgZnJvbSBpdHMgYW5jZXN0b3JzJyBpZCBtYXBzXG4gICAgICogQHBhcmFtIHtNb3JwaENvbnRleHR9IGN0eFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZUVsZW1lbnRGcm9tQW5jZXN0b3JzSWRNYXBzKGVsZW1lbnQsIGN0eCkge1xuICAgICAgY29uc3QgaWQgPSBlbGVtZW50LmlkO1xuICAgICAgLyoqIEB0cy1pZ25vcmUgLSBzYWZlIHRvIGxvb3AgaW4gdGhpcyB3YXkgKiovXG4gICAgICB3aGlsZSAoKGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGUpKSB7XG4gICAgICAgIGxldCBpZFNldCA9IGN0eC5pZE1hcC5nZXQoZWxlbWVudCk7XG4gICAgICAgIGlmIChpZFNldCkge1xuICAgICAgICAgIGlkU2V0LmRlbGV0ZShpZCk7XG4gICAgICAgICAgaWYgKCFpZFNldC5zaXplKSB7XG4gICAgICAgICAgICBjdHguaWRNYXAuZGVsZXRlKGVsZW1lbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdmVzIGFuIGVsZW1lbnQgYmVmb3JlIGFub3RoZXIgZWxlbWVudCB3aXRoaW4gdGhlIHNhbWUgcGFyZW50LlxuICAgICAqIFVzZXMgdGhlIHByb3Bvc2VkIGBtb3ZlQmVmb3JlYCBBUEkgaWYgYXZhaWxhYmxlIChhbmQgd29ya2luZyksIG90aGVyd2lzZSBmYWxscyBiYWNrIHRvIGBpbnNlcnRCZWZvcmVgLlxuICAgICAqIFRoaXMgaXMgZXNzZW50aWFseSBhIGZvcndhcmQtY29tcGF0IHdyYXBwZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IHBhcmVudE5vZGUgLSBUaGUgcGFyZW50IG5vZGUgY29udGFpbmluZyB0aGUgYWZ0ZXIgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge05vZGV9IGVsZW1lbnQgLSBUaGUgZWxlbWVudCB0byBiZSBtb3ZlZC5cbiAgICAgKiBAcGFyYW0ge05vZGUgfCBudWxsfSBhZnRlciAtIFRoZSByZWZlcmVuY2Ugbm9kZSB0byBpbnNlcnQgYGVsZW1lbnRgIGJlZm9yZS5cbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIGBudWxsYCwgYGVsZW1lbnRgIGlzIGFwcGVuZGVkIGFzIHRoZSBsYXN0IGNoaWxkLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1vdmVCZWZvcmUocGFyZW50Tm9kZSwgZWxlbWVudCwgYWZ0ZXIpIHtcbiAgICAgIC8vIEB0cy1pZ25vcmUgLSB1c2UgcHJvcG9zZWQgbW92ZUJlZm9yZSBmZWF0dXJlXG4gICAgICBpZiAocGFyZW50Tm9kZS5tb3ZlQmVmb3JlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gQHRzLWlnbm9yZSAtIHVzZSBwcm9wb3NlZCBtb3ZlQmVmb3JlIGZlYXR1cmVcbiAgICAgICAgICBwYXJlbnROb2RlLm1vdmVCZWZvcmUoZWxlbWVudCwgYWZ0ZXIpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gZmFsbCBiYWNrIHRvIGluc2VydEJlZm9yZSBhcyBzb21lIGJyb3dzZXJzIG1heSBmYWlsIG9uIG1vdmVCZWZvcmUgd2hlbiB0cnlpbmcgdG8gbW92ZSBEb20gZGlzY29ubmVjdGVkIG5vZGVzIHRvIHBhbnRyeVxuICAgICAgICAgIHBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsZW1lbnQsIGFmdGVyKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZWxlbWVudCwgYWZ0ZXIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBtb3JwaENoaWxkcmVuO1xuICB9KSgpO1xuXG4gIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gU2luZ2xlIE5vZGUgTW9ycGhpbmcgQ29kZVxuICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIGNvbnN0IG1vcnBoTm9kZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtOb2RlfSBvbGROb2RlIHJvb3Qgbm9kZSB0byBtZXJnZSBjb250ZW50IGludG9cbiAgICAgKiBAcGFyYW0ge05vZGV9IG5ld0NvbnRlbnQgbmV3IGNvbnRlbnQgdG8gbWVyZ2VcbiAgICAgKiBAcGFyYW0ge01vcnBoQ29udGV4dH0gY3R4IHRoZSBtZXJnZSBjb250ZXh0XG4gICAgICogQHJldHVybnMge05vZGUgfCBudWxsfSB0aGUgZWxlbWVudCB0aGF0IGVuZGVkIHVwIGluIHRoZSBET01cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtb3JwaE5vZGUob2xkTm9kZSwgbmV3Q29udGVudCwgY3R4KSB7XG4gICAgICBpZiAoY3R4Lmlnbm9yZUFjdGl2ZSAmJiBvbGROb2RlID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50KSB7XG4gICAgICAgIC8vIGRvbid0IG1vcnBoIGZvY3VzZWQgZWxlbWVudFxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaWYgKGN0eC5jYWxsYmFja3MuYmVmb3JlTm9kZU1vcnBoZWQob2xkTm9kZSwgbmV3Q29udGVudCkgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBvbGROb2RlO1xuICAgICAgfVxuXG4gICAgICBpZiAob2xkTm9kZSBpbnN0YW5jZW9mIEhUTUxIZWFkRWxlbWVudCAmJiBjdHguaGVhZC5pZ25vcmUpIDsgZWxzZSBpZiAoXG4gICAgICAgIG9sZE5vZGUgaW5zdGFuY2VvZiBIVE1MSGVhZEVsZW1lbnQgJiZcbiAgICAgICAgY3R4LmhlYWQuc3R5bGUgIT09IFwibW9ycGhcIlxuICAgICAgKSB7XG4gICAgICAgIC8vIG9rIHRvIGNhc3Q6IGlmIG5ld0NvbnRlbnQgd2Fzbid0IGFsc28gYSA8aGVhZD4sIGl0IHdvdWxkJ3ZlIGdvdCBjYXVnaHQgaW4gdGhlIGAhaXNTb2Z0TWF0Y2hgIGJyYW5jaCBhYm92ZVxuICAgICAgICBoYW5kbGVIZWFkRWxlbWVudChcbiAgICAgICAgICBvbGROb2RlLFxuICAgICAgICAgIC8qKiBAdHlwZSB7SFRNTEhlYWRFbGVtZW50fSAqLyAobmV3Q29udGVudCksXG4gICAgICAgICAgY3R4LFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbW9ycGhBdHRyaWJ1dGVzKG9sZE5vZGUsIG5ld0NvbnRlbnQsIGN0eCk7XG4gICAgICAgIGlmICghaWdub3JlVmFsdWVPZkFjdGl2ZUVsZW1lbnQob2xkTm9kZSwgY3R4KSkge1xuICAgICAgICAgIC8vIEB0cy1pZ25vcmUgbmV3Q29udGVudCBjYW4gYmUgYSBub2RlIGhlcmUgYmVjYXVzZSAuZmlyc3RDaGlsZCB3aWxsIGJlIG51bGxcbiAgICAgICAgICBtb3JwaENoaWxkcmVuKGN0eCwgb2xkTm9kZSwgbmV3Q29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGN0eC5jYWxsYmFja3MuYWZ0ZXJOb2RlTW9ycGhlZChvbGROb2RlLCBuZXdDb250ZW50KTtcbiAgICAgIHJldHVybiBvbGROb2RlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHN5bmNzIHRoZSBvbGROb2RlIHRvIHRoZSBuZXdOb2RlLCBjb3B5aW5nIG92ZXIgYWxsIGF0dHJpYnV0ZXMgYW5kXG4gICAgICogaW5uZXIgZWxlbWVudCBzdGF0ZSBmcm9tIHRoZSBuZXdOb2RlIHRvIHRoZSBvbGROb2RlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge05vZGV9IG9sZE5vZGUgdGhlIG5vZGUgdG8gY29weSBhdHRyaWJ1dGVzICYgc3RhdGUgdG9cbiAgICAgKiBAcGFyYW0ge05vZGV9IG5ld05vZGUgdGhlIG5vZGUgdG8gY29weSBhdHRyaWJ1dGVzICYgc3RhdGUgZnJvbVxuICAgICAqIEBwYXJhbSB7TW9ycGhDb250ZXh0fSBjdHggdGhlIG1lcmdlIGNvbnRleHRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtb3JwaEF0dHJpYnV0ZXMob2xkTm9kZSwgbmV3Tm9kZSwgY3R4KSB7XG4gICAgICBsZXQgdHlwZSA9IG5ld05vZGUubm9kZVR5cGU7XG5cbiAgICAgIC8vIGlmIGlzIGFuIGVsZW1lbnQgdHlwZSwgc3luYyB0aGUgYXR0cmlidXRlcyBmcm9tIHRoZVxuICAgICAgLy8gbmV3IG5vZGUgaW50byB0aGUgbmV3IG5vZGVcbiAgICAgIGlmICh0eXBlID09PSAxIC8qIGVsZW1lbnQgdHlwZSAqLykge1xuICAgICAgICBjb25zdCBvbGRFbHQgPSAvKiogQHR5cGUge0VsZW1lbnR9ICovIChvbGROb2RlKTtcbiAgICAgICAgY29uc3QgbmV3RWx0ID0gLyoqIEB0eXBlIHtFbGVtZW50fSAqLyAobmV3Tm9kZSk7XG5cbiAgICAgICAgY29uc3Qgb2xkQXR0cmlidXRlcyA9IG9sZEVsdC5hdHRyaWJ1dGVzO1xuICAgICAgICBjb25zdCBuZXdBdHRyaWJ1dGVzID0gbmV3RWx0LmF0dHJpYnV0ZXM7XG4gICAgICAgIGZvciAoY29uc3QgbmV3QXR0cmlidXRlIG9mIG5ld0F0dHJpYnV0ZXMpIHtcbiAgICAgICAgICBpZiAoaWdub3JlQXR0cmlidXRlKG5ld0F0dHJpYnV0ZS5uYW1lLCBvbGRFbHQsIFwidXBkYXRlXCIsIGN0eCkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAob2xkRWx0LmdldEF0dHJpYnV0ZShuZXdBdHRyaWJ1dGUubmFtZSkgIT09IG5ld0F0dHJpYnV0ZS52YWx1ZSkge1xuICAgICAgICAgICAgb2xkRWx0LnNldEF0dHJpYnV0ZShuZXdBdHRyaWJ1dGUubmFtZSwgbmV3QXR0cmlidXRlLnZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gaXRlcmF0ZSBiYWNrd2FyZHMgdG8gYXZvaWQgc2tpcHBpbmcgb3ZlciBpdGVtcyB3aGVuIGEgZGVsZXRlIG9jY3Vyc1xuICAgICAgICBmb3IgKGxldCBpID0gb2xkQXR0cmlidXRlcy5sZW5ndGggLSAxOyAwIDw9IGk7IGktLSkge1xuICAgICAgICAgIGNvbnN0IG9sZEF0dHJpYnV0ZSA9IG9sZEF0dHJpYnV0ZXNbaV07XG5cbiAgICAgICAgICAvLyB0b0F0dHJpYnV0ZXMgaXMgYSBsaXZlIE5hbWVkTm9kZU1hcCwgc28gaXRlcmF0aW9uK211dGF0aW9uIGlzIHVuc2FmZVxuICAgICAgICAgIC8vIGUuZy4gY3VzdG9tIGVsZW1lbnQgYXR0cmlidXRlIGNhbGxiYWNrcyBjYW4gcmVtb3ZlIG90aGVyIGF0dHJpYnV0ZXNcbiAgICAgICAgICBpZiAoIW9sZEF0dHJpYnV0ZSkgY29udGludWU7XG5cbiAgICAgICAgICBpZiAoIW5ld0VsdC5oYXNBdHRyaWJ1dGUob2xkQXR0cmlidXRlLm5hbWUpKSB7XG4gICAgICAgICAgICBpZiAoaWdub3JlQXR0cmlidXRlKG9sZEF0dHJpYnV0ZS5uYW1lLCBvbGRFbHQsIFwicmVtb3ZlXCIsIGN0eCkpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvbGRFbHQucmVtb3ZlQXR0cmlidXRlKG9sZEF0dHJpYnV0ZS5uYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWlnbm9yZVZhbHVlT2ZBY3RpdmVFbGVtZW50KG9sZEVsdCwgY3R4KSkge1xuICAgICAgICAgIHN5bmNJbnB1dFZhbHVlKG9sZEVsdCwgbmV3RWx0LCBjdHgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIHN5bmMgdGV4dCBub2Rlc1xuICAgICAgaWYgKHR5cGUgPT09IDggLyogY29tbWVudCAqLyB8fCB0eXBlID09PSAzIC8qIHRleHQgKi8pIHtcbiAgICAgICAgaWYgKG9sZE5vZGUubm9kZVZhbHVlICE9PSBuZXdOb2RlLm5vZGVWYWx1ZSkge1xuICAgICAgICAgIG9sZE5vZGUubm9kZVZhbHVlID0gbmV3Tm9kZS5ub2RlVmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBOQjogbWFueSBib3RoYW5zIGRpZWQgdG8gYnJpbmcgdXMgaW5mb3JtYXRpb246XG4gICAgICpcbiAgICAgKiAgaHR0cHM6Ly9naXRodWIuY29tL3BhdHJpY2stc3RlZWxlLWlkZW0vbW9ycGhkb20vYmxvYi9tYXN0ZXIvc3JjL3NwZWNpYWxFbEhhbmRsZXJzLmpzXG4gICAgICogIGh0dHBzOi8vZ2l0aHViLmNvbS9jaG9vanMvbmFub21vcnBoL2Jsb2IvbWFzdGVyL2xpYi9tb3JwaC5qc0wxMTNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gb2xkRWxlbWVudCB0aGUgZWxlbWVudCB0byBzeW5jIHRoZSBpbnB1dCB2YWx1ZSB0b1xuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gbmV3RWxlbWVudCB0aGUgZWxlbWVudCB0byBzeW5jIHRoZSBpbnB1dCB2YWx1ZSBmcm9tXG4gICAgICogQHBhcmFtIHtNb3JwaENvbnRleHR9IGN0eCB0aGUgbWVyZ2UgY29udGV4dFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHN5bmNJbnB1dFZhbHVlKG9sZEVsZW1lbnQsIG5ld0VsZW1lbnQsIGN0eCkge1xuICAgICAgaWYgKFxuICAgICAgICBvbGRFbGVtZW50IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCAmJlxuICAgICAgICBuZXdFbGVtZW50IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCAmJlxuICAgICAgICBuZXdFbGVtZW50LnR5cGUgIT09IFwiZmlsZVwiXG4gICAgICApIHtcbiAgICAgICAgbGV0IG5ld1ZhbHVlID0gbmV3RWxlbWVudC52YWx1ZTtcbiAgICAgICAgbGV0IG9sZFZhbHVlID0gb2xkRWxlbWVudC52YWx1ZTtcblxuICAgICAgICAvLyBzeW5jIGJvb2xlYW4gYXR0cmlidXRlc1xuICAgICAgICBzeW5jQm9vbGVhbkF0dHJpYnV0ZShvbGRFbGVtZW50LCBuZXdFbGVtZW50LCBcImNoZWNrZWRcIiwgY3R4KTtcbiAgICAgICAgc3luY0Jvb2xlYW5BdHRyaWJ1dGUob2xkRWxlbWVudCwgbmV3RWxlbWVudCwgXCJkaXNhYmxlZFwiLCBjdHgpO1xuXG4gICAgICAgIGlmICghbmV3RWxlbWVudC5oYXNBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSkge1xuICAgICAgICAgIGlmICghaWdub3JlQXR0cmlidXRlKFwidmFsdWVcIiwgb2xkRWxlbWVudCwgXCJyZW1vdmVcIiwgY3R4KSkge1xuICAgICAgICAgICAgb2xkRWxlbWVudC52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICBvbGRFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcInZhbHVlXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChvbGRWYWx1ZSAhPT0gbmV3VmFsdWUpIHtcbiAgICAgICAgICBpZiAoIWlnbm9yZUF0dHJpYnV0ZShcInZhbHVlXCIsIG9sZEVsZW1lbnQsIFwidXBkYXRlXCIsIGN0eCkpIHtcbiAgICAgICAgICAgIG9sZEVsZW1lbnQuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgbmV3VmFsdWUpO1xuICAgICAgICAgICAgb2xkRWxlbWVudC52YWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPOiBRVUVTVElPTigxY2cpOiB0aGlzIHVzZWQgdG8gb25seSBjaGVjayBgbmV3RWxlbWVudGAgdW5saWtlIHRoZSBvdGhlciBicmFuY2hlcyAtLSB3aHk/XG4gICAgICAgIC8vIGRpZCBJIGJyZWFrIHNvbWV0aGluZz9cbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIG9sZEVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MT3B0aW9uRWxlbWVudCAmJlxuICAgICAgICBuZXdFbGVtZW50IGluc3RhbmNlb2YgSFRNTE9wdGlvbkVsZW1lbnRcbiAgICAgICkge1xuICAgICAgICBzeW5jQm9vbGVhbkF0dHJpYnV0ZShvbGRFbGVtZW50LCBuZXdFbGVtZW50LCBcInNlbGVjdGVkXCIsIGN0eCk7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBvbGRFbGVtZW50IGluc3RhbmNlb2YgSFRNTFRleHRBcmVhRWxlbWVudCAmJlxuICAgICAgICBuZXdFbGVtZW50IGluc3RhbmNlb2YgSFRNTFRleHRBcmVhRWxlbWVudFxuICAgICAgKSB7XG4gICAgICAgIGxldCBuZXdWYWx1ZSA9IG5ld0VsZW1lbnQudmFsdWU7XG4gICAgICAgIGxldCBvbGRWYWx1ZSA9IG9sZEVsZW1lbnQudmFsdWU7XG4gICAgICAgIGlmIChpZ25vcmVBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBvbGRFbGVtZW50LCBcInVwZGF0ZVwiLCBjdHgpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZXdWYWx1ZSAhPT0gb2xkVmFsdWUpIHtcbiAgICAgICAgICBvbGRFbGVtZW50LnZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIG9sZEVsZW1lbnQuZmlyc3RDaGlsZCAmJlxuICAgICAgICAgIG9sZEVsZW1lbnQuZmlyc3RDaGlsZC5ub2RlVmFsdWUgIT09IG5ld1ZhbHVlXG4gICAgICAgICkge1xuICAgICAgICAgIG9sZEVsZW1lbnQuZmlyc3RDaGlsZC5ub2RlVmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gb2xkRWxlbWVudCBlbGVtZW50IHRvIHdyaXRlIHRoZSB2YWx1ZSB0b1xuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gbmV3RWxlbWVudCBlbGVtZW50IHRvIHJlYWQgdGhlIHZhbHVlIGZyb21cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlTmFtZSB0aGUgYXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0ge01vcnBoQ29udGV4dH0gY3R4IHRoZSBtZXJnZSBjb250ZXh0XG4gICAgICovXG4gICAgZnVuY3Rpb24gc3luY0Jvb2xlYW5BdHRyaWJ1dGUob2xkRWxlbWVudCwgbmV3RWxlbWVudCwgYXR0cmlidXRlTmFtZSwgY3R4KSB7XG4gICAgICAvLyBAdHMtaWdub3JlIHRoaXMgZnVuY3Rpb24gaXMgb25seSB1c2VkIG9uIGJvb2xlYW4gYXR0cnMgdGhhdCBhcmUgcmVmbGVjdGVkIGFzIGRvbSBwcm9wZXJ0aWVzXG4gICAgICBjb25zdCBuZXdMaXZlVmFsdWUgPSBuZXdFbGVtZW50W2F0dHJpYnV0ZU5hbWVdLFxuICAgICAgICAvLyBAdHMtaWdub3JlIGRpdHRvXG4gICAgICAgIG9sZExpdmVWYWx1ZSA9IG9sZEVsZW1lbnRbYXR0cmlidXRlTmFtZV07XG4gICAgICBpZiAobmV3TGl2ZVZhbHVlICE9PSBvbGRMaXZlVmFsdWUpIHtcbiAgICAgICAgY29uc3QgaWdub3JlVXBkYXRlID0gaWdub3JlQXR0cmlidXRlKFxuICAgICAgICAgIGF0dHJpYnV0ZU5hbWUsXG4gICAgICAgICAgb2xkRWxlbWVudCxcbiAgICAgICAgICBcInVwZGF0ZVwiLFxuICAgICAgICAgIGN0eCxcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCFpZ25vcmVVcGRhdGUpIHtcbiAgICAgICAgICAvLyB1cGRhdGUgYXR0cmlidXRlJ3MgYXNzb2NpYXRlZCBET00gcHJvcGVydHlcbiAgICAgICAgICAvLyBAdHMtaWdub3JlIHRoaXMgZnVuY3Rpb24gaXMgb25seSB1c2VkIG9uIGJvb2xlYW4gYXR0cnMgdGhhdCBhcmUgcmVmbGVjdGVkIGFzIGRvbSBwcm9wZXJ0aWVzXG4gICAgICAgICAgb2xkRWxlbWVudFthdHRyaWJ1dGVOYW1lXSA9IG5ld0VsZW1lbnRbYXR0cmlidXRlTmFtZV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5ld0xpdmVWYWx1ZSkge1xuICAgICAgICAgIGlmICghaWdub3JlVXBkYXRlKSB7XG4gICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0dsb3NzYXJ5L0Jvb2xlYW4vSFRNTFxuICAgICAgICAgICAgLy8gdGhpcyBpcyB0aGUgY29ycmVjdCB3YXkgdG8gc2V0IGEgYm9vbGVhbiBhdHRyaWJ1dGUgdG8gXCJ0cnVlXCJcbiAgICAgICAgICAgIG9sZEVsZW1lbnQuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUsIFwiXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoIWlnbm9yZUF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lLCBvbGRFbGVtZW50LCBcInJlbW92ZVwiLCBjdHgpKSB7XG4gICAgICAgICAgICBvbGRFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXR0ciB0aGUgYXR0cmlidXRlIHRvIGJlIG11dGF0ZWRcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgdGhlIGVsZW1lbnQgdGhhdCBpcyBnb2luZyB0byBiZSB1cGRhdGVkXG4gICAgICogQHBhcmFtIHtcInVwZGF0ZVwiIHwgXCJyZW1vdmVcIn0gdXBkYXRlVHlwZVxuICAgICAqIEBwYXJhbSB7TW9ycGhDb250ZXh0fSBjdHggdGhlIG1lcmdlIGNvbnRleHRcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgYXR0cmlidXRlIHNob3VsZCBiZSBpZ25vcmVkLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpZ25vcmVBdHRyaWJ1dGUoYXR0ciwgZWxlbWVudCwgdXBkYXRlVHlwZSwgY3R4KSB7XG4gICAgICBpZiAoXG4gICAgICAgIGF0dHIgPT09IFwidmFsdWVcIiAmJlxuICAgICAgICBjdHguaWdub3JlQWN0aXZlVmFsdWUgJiZcbiAgICAgICAgZWxlbWVudCA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudFxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIChcbiAgICAgICAgY3R4LmNhbGxiYWNrcy5iZWZvcmVBdHRyaWJ1dGVVcGRhdGVkKGF0dHIsIGVsZW1lbnQsIHVwZGF0ZVR5cGUpID09PVxuICAgICAgICBmYWxzZVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge05vZGV9IHBvc3NpYmxlQWN0aXZlRWxlbWVudFxuICAgICAqIEBwYXJhbSB7TW9ycGhDb250ZXh0fSBjdHhcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpZ25vcmVWYWx1ZU9mQWN0aXZlRWxlbWVudChwb3NzaWJsZUFjdGl2ZUVsZW1lbnQsIGN0eCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgISFjdHguaWdub3JlQWN0aXZlVmFsdWUgJiZcbiAgICAgICAgcG9zc2libGVBY3RpdmVFbGVtZW50ID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmXG4gICAgICAgIHBvc3NpYmxlQWN0aXZlRWxlbWVudCAhPT0gZG9jdW1lbnQuYm9keVxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbW9ycGhOb2RlO1xuICB9KSgpO1xuXG4gIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gSGVhZCBNYW5hZ2VtZW50IEZ1bmN0aW9uc1xuICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8qKlxuICAgKiBAcGFyYW0ge01vcnBoQ29udGV4dH0gY3R4XG4gICAqIEBwYXJhbSB7RWxlbWVudH0gb2xkTm9kZVxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IG5ld05vZGVcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcbiAgICogQHJldHVybnMge05vZGVbXSB8IFByb21pc2U8Tm9kZVtdPn1cbiAgICovXG4gIGZ1bmN0aW9uIHdpdGhIZWFkQmxvY2tpbmcoY3R4LCBvbGROb2RlLCBuZXdOb2RlLCBjYWxsYmFjaykge1xuICAgIGlmIChjdHguaGVhZC5ibG9jaykge1xuICAgICAgY29uc3Qgb2xkSGVhZCA9IG9sZE5vZGUucXVlcnlTZWxlY3RvcihcImhlYWRcIik7XG4gICAgICBjb25zdCBuZXdIZWFkID0gbmV3Tm9kZS5xdWVyeVNlbGVjdG9yKFwiaGVhZFwiKTtcbiAgICAgIGlmIChvbGRIZWFkICYmIG5ld0hlYWQpIHtcbiAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBoYW5kbGVIZWFkRWxlbWVudChvbGRIZWFkLCBuZXdIZWFkLCBjdHgpO1xuICAgICAgICAvLyB3aGVuIGhlYWQgcHJvbWlzZXMgcmVzb2x2ZSwgcHJvY2VlZCBpZ25vcmluZyB0aGUgaGVhZCB0YWdcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCgpID0+IHtcbiAgICAgICAgICBjb25zdCBuZXdDdHggPSBPYmplY3QuYXNzaWduKGN0eCwge1xuICAgICAgICAgICAgaGVhZDoge1xuICAgICAgICAgICAgICBibG9jazogZmFsc2UsXG4gICAgICAgICAgICAgIGlnbm9yZTogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ld0N0eCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBqdXN0IHByb2NlZWQgaWYgd2Ugbm90IGhlYWQgYmxvY2tpbmdcbiAgICByZXR1cm4gY2FsbGJhY2soY3R4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiAgVGhlIEhFQUQgdGFnIGNhbiBiZSBoYW5kbGVkIHNwZWNpYWxseSwgZWl0aGVyIHcvIGEgJ21lcmdlJyBvciAnYXBwZW5kJyBzdHlsZVxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IG9sZEhlYWRcbiAgICogQHBhcmFtIHtFbGVtZW50fSBuZXdIZWFkXG4gICAqIEBwYXJhbSB7TW9ycGhDb250ZXh0fSBjdHhcbiAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD5bXX1cbiAgICovXG4gIGZ1bmN0aW9uIGhhbmRsZUhlYWRFbGVtZW50KG9sZEhlYWQsIG5ld0hlYWQsIGN0eCkge1xuICAgIGxldCBhZGRlZCA9IFtdO1xuICAgIGxldCByZW1vdmVkID0gW107XG4gICAgbGV0IHByZXNlcnZlZCA9IFtdO1xuICAgIGxldCBub2Rlc1RvQXBwZW5kID0gW107XG5cbiAgICAvLyBwdXQgYWxsIG5ldyBoZWFkIGVsZW1lbnRzIGludG8gYSBNYXAsIGJ5IHRoZWlyIG91dGVySFRNTFxuICAgIGxldCBzcmNUb05ld0hlYWROb2RlcyA9IG5ldyBNYXAoKTtcbiAgICBmb3IgKGNvbnN0IG5ld0hlYWRDaGlsZCBvZiBuZXdIZWFkLmNoaWxkcmVuKSB7XG4gICAgICBzcmNUb05ld0hlYWROb2Rlcy5zZXQobmV3SGVhZENoaWxkLm91dGVySFRNTCwgbmV3SGVhZENoaWxkKTtcbiAgICB9XG5cbiAgICAvLyBmb3IgZWFjaCBlbHQgaW4gdGhlIGN1cnJlbnQgaGVhZFxuICAgIGZvciAoY29uc3QgY3VycmVudEhlYWRFbHQgb2Ygb2xkSGVhZC5jaGlsZHJlbikge1xuICAgICAgLy8gSWYgdGhlIGN1cnJlbnQgaGVhZCBlbGVtZW50IGlzIGluIHRoZSBtYXBcbiAgICAgIGxldCBpbk5ld0NvbnRlbnQgPSBzcmNUb05ld0hlYWROb2Rlcy5oYXMoY3VycmVudEhlYWRFbHQub3V0ZXJIVE1MKTtcbiAgICAgIGxldCBpc1JlQXBwZW5kZWQgPSBjdHguaGVhZC5zaG91bGRSZUFwcGVuZChjdXJyZW50SGVhZEVsdCk7XG4gICAgICBsZXQgaXNQcmVzZXJ2ZWQgPSBjdHguaGVhZC5zaG91bGRQcmVzZXJ2ZShjdXJyZW50SGVhZEVsdCk7XG4gICAgICBpZiAoaW5OZXdDb250ZW50IHx8IGlzUHJlc2VydmVkKSB7XG4gICAgICAgIGlmIChpc1JlQXBwZW5kZWQpIHtcbiAgICAgICAgICAvLyByZW1vdmUgdGhlIGN1cnJlbnQgdmVyc2lvbiBhbmQgbGV0IHRoZSBuZXcgdmVyc2lvbiByZXBsYWNlIGl0IGFuZCByZS1leGVjdXRlXG4gICAgICAgICAgcmVtb3ZlZC5wdXNoKGN1cnJlbnRIZWFkRWx0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyB0aGlzIGVsZW1lbnQgYWxyZWFkeSBleGlzdHMgYW5kIHNob3VsZCBub3QgYmUgcmUtYXBwZW5kZWQsIHNvIHJlbW92ZSBpdCBmcm9tXG4gICAgICAgICAgLy8gdGhlIG5ldyBjb250ZW50IG1hcCwgcHJlc2VydmluZyBpdCBpbiB0aGUgRE9NXG4gICAgICAgICAgc3JjVG9OZXdIZWFkTm9kZXMuZGVsZXRlKGN1cnJlbnRIZWFkRWx0Lm91dGVySFRNTCk7XG4gICAgICAgICAgcHJlc2VydmVkLnB1c2goY3VycmVudEhlYWRFbHQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoY3R4LmhlYWQuc3R5bGUgPT09IFwiYXBwZW5kXCIpIHtcbiAgICAgICAgICAvLyB3ZSBhcmUgYXBwZW5kaW5nIGFuZCB0aGlzIGV4aXN0aW5nIGVsZW1lbnQgaXMgbm90IG5ldyBjb250ZW50XG4gICAgICAgICAgLy8gc28gaWYgYW5kIG9ubHkgaWYgaXQgaXMgbWFya2VkIGZvciByZS1hcHBlbmQgZG8gd2UgZG8gYW55dGhpbmdcbiAgICAgICAgICBpZiAoaXNSZUFwcGVuZGVkKSB7XG4gICAgICAgICAgICByZW1vdmVkLnB1c2goY3VycmVudEhlYWRFbHQpO1xuICAgICAgICAgICAgbm9kZXNUb0FwcGVuZC5wdXNoKGN1cnJlbnRIZWFkRWx0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gaWYgdGhpcyBpcyBhIG1lcmdlLCB3ZSByZW1vdmUgdGhpcyBjb250ZW50IHNpbmNlIGl0IGlzIG5vdCBpbiB0aGUgbmV3IGhlYWRcbiAgICAgICAgICBpZiAoY3R4LmhlYWQuc2hvdWxkUmVtb3ZlKGN1cnJlbnRIZWFkRWx0KSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJlbW92ZWQucHVzaChjdXJyZW50SGVhZEVsdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUHVzaCB0aGUgcmVtYWluaW5nIG5ldyBoZWFkIGVsZW1lbnRzIGluIHRoZSBNYXAgaW50byB0aGVcbiAgICAvLyBub2RlcyB0byBhcHBlbmQgdG8gdGhlIGhlYWQgdGFnXG4gICAgbm9kZXNUb0FwcGVuZC5wdXNoKC4uLnNyY1RvTmV3SGVhZE5vZGVzLnZhbHVlcygpKTtcblxuICAgIGxldCBwcm9taXNlcyA9IFtdO1xuICAgIGZvciAoY29uc3QgbmV3Tm9kZSBvZiBub2Rlc1RvQXBwZW5kKSB7XG4gICAgICAvLyBUT0RPOiBUaGlzIGNvdWxkIHRoZW9yZXRpY2FsbHkgYmUgbnVsbCwgYmFzZWQgb24gdHlwZVxuICAgICAgbGV0IG5ld0VsdCA9IC8qKiBAdHlwZSB7Q2hpbGROb2RlfSAqLyAoXG4gICAgICAgIGRvY3VtZW50LmNyZWF0ZVJhbmdlKCkuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KG5ld05vZGUub3V0ZXJIVE1MKVxuICAgICAgICAgIC5maXJzdENoaWxkXG4gICAgICApO1xuICAgICAgaWYgKGN0eC5jYWxsYmFja3MuYmVmb3JlTm9kZUFkZGVkKG5ld0VsdCkgIT09IGZhbHNlKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAoXCJocmVmXCIgaW4gbmV3RWx0ICYmIG5ld0VsdC5ocmVmKSB8fFxuICAgICAgICAgIChcInNyY1wiIGluIG5ld0VsdCAmJiBuZXdFbHQuc3JjKVxuICAgICAgICApIHtcbiAgICAgICAgICAvKiogQHR5cGUgeyhyZXN1bHQ/OiBhbnkpID0+IHZvaWR9ICovIGxldCByZXNvbHZlO1xuICAgICAgICAgIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKF9yZXNvbHZlKSB7XG4gICAgICAgICAgICByZXNvbHZlID0gX3Jlc29sdmU7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbmV3RWx0LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBwcm9taXNlcy5wdXNoKHByb21pc2UpO1xuICAgICAgICB9XG4gICAgICAgIG9sZEhlYWQuYXBwZW5kQ2hpbGQobmV3RWx0KTtcbiAgICAgICAgY3R4LmNhbGxiYWNrcy5hZnRlck5vZGVBZGRlZChuZXdFbHQpO1xuICAgICAgICBhZGRlZC5wdXNoKG5ld0VsdCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcmVtb3ZlIGFsbCByZW1vdmVkIGVsZW1lbnRzLCBhZnRlciB3ZSBoYXZlIGFwcGVuZGVkIHRoZSBuZXcgZWxlbWVudHMgdG8gYXZvaWRcbiAgICAvLyBhZGRpdGlvbmFsIG5ldHdvcmsgcmVxdWVzdHMgZm9yIHRoaW5ncyBsaWtlIHN0eWxlIHNoZWV0c1xuICAgIGZvciAoY29uc3QgcmVtb3ZlZEVsZW1lbnQgb2YgcmVtb3ZlZCkge1xuICAgICAgaWYgKGN0eC5jYWxsYmFja3MuYmVmb3JlTm9kZVJlbW92ZWQocmVtb3ZlZEVsZW1lbnQpICE9PSBmYWxzZSkge1xuICAgICAgICBvbGRIZWFkLnJlbW92ZUNoaWxkKHJlbW92ZWRFbGVtZW50KTtcbiAgICAgICAgY3R4LmNhbGxiYWNrcy5hZnRlck5vZGVSZW1vdmVkKHJlbW92ZWRFbGVtZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjdHguaGVhZC5hZnRlckhlYWRNb3JwaGVkKG9sZEhlYWQsIHtcbiAgICAgIGFkZGVkOiBhZGRlZCxcbiAgICAgIGtlcHQ6IHByZXNlcnZlZCxcbiAgICAgIHJlbW92ZWQ6IHJlbW92ZWQsXG4gICAgfSk7XG4gICAgcmV0dXJuIHByb21pc2VzO1xuICB9XG5cbiAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBDcmVhdGUgTW9ycGggQ29udGV4dCBGdW5jdGlvbnNcbiAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBjb25zdCBjcmVhdGVNb3JwaENvbnRleHQgPSAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBvbGROb2RlXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBuZXdDb250ZW50XG4gICAgICogQHBhcmFtIHtDb25maWd9IGNvbmZpZ1xuICAgICAqIEByZXR1cm5zIHtNb3JwaENvbnRleHR9XG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlTW9ycGhDb250ZXh0KG9sZE5vZGUsIG5ld0NvbnRlbnQsIGNvbmZpZykge1xuICAgICAgY29uc3QgeyBwZXJzaXN0ZW50SWRzLCBpZE1hcCB9ID0gY3JlYXRlSWRNYXBzKG9sZE5vZGUsIG5ld0NvbnRlbnQpO1xuXG4gICAgICBjb25zdCBtZXJnZWRDb25maWcgPSBtZXJnZURlZmF1bHRzKGNvbmZpZyk7XG4gICAgICBjb25zdCBtb3JwaFN0eWxlID0gbWVyZ2VkQ29uZmlnLm1vcnBoU3R5bGUgfHwgXCJvdXRlckhUTUxcIjtcbiAgICAgIGlmICghW1wiaW5uZXJIVE1MXCIsIFwib3V0ZXJIVE1MXCJdLmluY2x1ZGVzKG1vcnBoU3R5bGUpKSB7XG4gICAgICAgIHRocm93IGBEbyBub3QgdW5kZXJzdGFuZCBob3cgdG8gbW9ycGggc3R5bGUgJHttb3JwaFN0eWxlfWA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRhcmdldDogb2xkTm9kZSxcbiAgICAgICAgbmV3Q29udGVudDogbmV3Q29udGVudCxcbiAgICAgICAgY29uZmlnOiBtZXJnZWRDb25maWcsXG4gICAgICAgIG1vcnBoU3R5bGU6IG1vcnBoU3R5bGUsXG4gICAgICAgIGlnbm9yZUFjdGl2ZTogbWVyZ2VkQ29uZmlnLmlnbm9yZUFjdGl2ZSxcbiAgICAgICAgaWdub3JlQWN0aXZlVmFsdWU6IG1lcmdlZENvbmZpZy5pZ25vcmVBY3RpdmVWYWx1ZSxcbiAgICAgICAgcmVzdG9yZUZvY3VzOiBtZXJnZWRDb25maWcucmVzdG9yZUZvY3VzLFxuICAgICAgICBpZE1hcDogaWRNYXAsXG4gICAgICAgIHBlcnNpc3RlbnRJZHM6IHBlcnNpc3RlbnRJZHMsXG4gICAgICAgIHBhbnRyeTogY3JlYXRlUGFudHJ5KCksXG4gICAgICAgIGNhbGxiYWNrczogbWVyZ2VkQ29uZmlnLmNhbGxiYWNrcyxcbiAgICAgICAgaGVhZDogbWVyZ2VkQ29uZmlnLmhlYWQsXG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlZXAgbWVyZ2VzIHRoZSBjb25maWcgb2JqZWN0IGFuZCB0aGUgSWRpb21vcnBoLmRlZmF1bHRzIG9iamVjdCB0b1xuICAgICAqIHByb2R1Y2UgYSBmaW5hbCBjb25maWd1cmF0aW9uIG9iamVjdFxuICAgICAqIEBwYXJhbSB7Q29uZmlnfSBjb25maWdcbiAgICAgKiBAcmV0dXJucyB7Q29uZmlnSW50ZXJuYWx9XG4gICAgICovXG4gICAgZnVuY3Rpb24gbWVyZ2VEZWZhdWx0cyhjb25maWcpIHtcbiAgICAgIGxldCBmaW5hbENvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRzKTtcblxuICAgICAgLy8gY29weSB0b3AgbGV2ZWwgc3R1ZmYgaW50byBmaW5hbCBjb25maWdcbiAgICAgIE9iamVjdC5hc3NpZ24oZmluYWxDb25maWcsIGNvbmZpZyk7XG5cbiAgICAgIC8vIGNvcHkgY2FsbGJhY2tzIGludG8gZmluYWwgY29uZmlnIChkbyB0aGlzIHRvIGRlZXAgbWVyZ2UgdGhlIGNhbGxiYWNrcylcbiAgICAgIGZpbmFsQ29uZmlnLmNhbGxiYWNrcyA9IE9iamVjdC5hc3NpZ24oXG4gICAgICAgIHt9LFxuICAgICAgICBkZWZhdWx0cy5jYWxsYmFja3MsXG4gICAgICAgIGNvbmZpZy5jYWxsYmFja3MsXG4gICAgICApO1xuXG4gICAgICAvLyBjb3B5IGhlYWQgY29uZmlnIGludG8gZmluYWwgY29uZmlnICAoZG8gdGhpcyB0byBkZWVwIG1lcmdlIHRoZSBoZWFkKVxuICAgICAgZmluYWxDb25maWcuaGVhZCA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRzLmhlYWQsIGNvbmZpZy5oZWFkKTtcblxuICAgICAgcmV0dXJuIGZpbmFsQ29uZmlnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtIVE1MRGl2RWxlbWVudH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVQYW50cnkoKSB7XG4gICAgICBjb25zdCBwYW50cnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgcGFudHJ5LmhpZGRlbiA9IHRydWU7XG4gICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50RWxlbWVudChcImFmdGVyZW5kXCIsIHBhbnRyeSk7XG4gICAgICByZXR1cm4gcGFudHJ5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYWxsIGVsZW1lbnRzIHdpdGggYW4gSUQgY29udGFpbmVkIHdpdGhpbiB0aGUgcm9vdCBlbGVtZW50IGFuZCBpdHMgZGVzY2VuZGFudHNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gcm9vdFxuICAgICAqIEByZXR1cm5zIHtFbGVtZW50W119XG4gICAgICovXG4gICAgZnVuY3Rpb24gZmluZElkRWxlbWVudHMocm9vdCkge1xuICAgICAgbGV0IGVsZW1lbnRzID0gQXJyYXkuZnJvbShyb290LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbaWRdXCIpKTtcbiAgICAgIGlmIChyb290LmlkKSB7XG4gICAgICAgIGVsZW1lbnRzLnB1c2gocm9vdCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZWxlbWVudHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBib3R0b20tdXAgYWxnb3JpdGhtIHRoYXQgcG9wdWxhdGVzIGEgbWFwIG9mIEVsZW1lbnQgLT4gSWRTZXQuXG4gICAgICogVGhlIGlkU2V0IGZvciBhIGdpdmVuIGVsZW1lbnQgaXMgdGhlIHNldCBvZiBhbGwgSURzIGNvbnRhaW5lZCB3aXRoaW4gaXRzIHN1YnRyZWUuXG4gICAgICogQXMgYW4gb3B0aW16YXRpb24sIHdlIGZpbHRlciB0aGVzZSBJRHMgdGhyb3VnaCB0aGUgZ2l2ZW4gbGlzdCBvZiBwZXJzaXN0ZW50IElEcyxcbiAgICAgKiBiZWNhdXNlIHdlIGRvbid0IG5lZWQgdG8gYm90aGVyIGNvbnNpZGVyaW5nIElEZWQgZWxlbWVudHMgdGhhdCB3b24ndCBiZSBpbiB0aGUgbmV3IGNvbnRlbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge01hcDxOb2RlLCBTZXQ8c3RyaW5nPj59IGlkTWFwXG4gICAgICogQHBhcmFtIHtTZXQ8c3RyaW5nPn0gcGVyc2lzdGVudElkc1xuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gcm9vdFxuICAgICAqIEBwYXJhbSB7RWxlbWVudFtdfSBlbGVtZW50c1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHBvcHVsYXRlSWRNYXBXaXRoVHJlZShpZE1hcCwgcGVyc2lzdGVudElkcywgcm9vdCwgZWxlbWVudHMpIHtcbiAgICAgIGZvciAoY29uc3QgZWx0IG9mIGVsZW1lbnRzKSB7XG4gICAgICAgIGlmIChwZXJzaXN0ZW50SWRzLmhhcyhlbHQuaWQpKSB7XG4gICAgICAgICAgLyoqIEB0eXBlIHtFbGVtZW50fG51bGx9ICovXG4gICAgICAgICAgbGV0IGN1cnJlbnQgPSBlbHQ7XG4gICAgICAgICAgLy8gd2FsayB1cCB0aGUgcGFyZW50IGhpZXJhcmNoeSBvZiB0aGF0IGVsZW1lbnQsIGFkZGluZyB0aGUgaWRcbiAgICAgICAgICAvLyBvZiBlbGVtZW50IHRvIHRoZSBwYXJlbnQncyBpZCBzZXRcbiAgICAgICAgICB3aGlsZSAoY3VycmVudCkge1xuICAgICAgICAgICAgbGV0IGlkU2V0ID0gaWRNYXAuZ2V0KGN1cnJlbnQpO1xuICAgICAgICAgICAgLy8gaWYgdGhlIGlkIHNldCBkb2Vzbid0IGV4aXN0LCBjcmVhdGUgaXQgYW5kIGluc2VydCBpdCBpbiB0aGUgbWFwXG4gICAgICAgICAgICBpZiAoaWRTZXQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICBpZFNldCA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgICAgaWRNYXAuc2V0KGN1cnJlbnQsIGlkU2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlkU2V0LmFkZChlbHQuaWQpO1xuXG4gICAgICAgICAgICBpZiAoY3VycmVudCA9PT0gcm9vdCkgYnJlYWs7XG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gY29tcHV0ZXMgYSBtYXAgb2Ygbm9kZXMgdG8gYWxsIGlkcyBjb250YWluZWQgd2l0aGluIHRoYXQgbm9kZSAoaW5jbHVzaXZlIG9mIHRoZVxuICAgICAqIG5vZGUpLiAgVGhpcyBtYXAgY2FuIGJlIHVzZWQgdG8gYXNrIGlmIHR3byBub2RlcyBoYXZlIGludGVyc2VjdGluZyBzZXRzIG9mIGlkcywgd2hpY2ggYWxsb3dzXG4gICAgICogZm9yIGEgbG9vc2VyIGRlZmluaXRpb24gb2YgXCJtYXRjaGluZ1wiIHRoYW4gdHJhZGl0aW9uIGlkIG1hdGNoaW5nLCBhbmQgYWxsb3dzIGNoaWxkIG5vZGVzXG4gICAgICogdG8gY29udHJpYnV0ZSB0byBhIHBhcmVudCBub2RlcyBtYXRjaGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gb2xkQ29udGVudCAgdGhlIG9sZCBjb250ZW50IHRoYXQgd2lsbCBiZSBtb3JwaGVkXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBuZXdDb250ZW50ICB0aGUgbmV3IGNvbnRlbnQgdG8gbW9ycGggdG9cbiAgICAgKiBAcmV0dXJucyB7SWRTZXRzfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUlkTWFwcyhvbGRDb250ZW50LCBuZXdDb250ZW50KSB7XG4gICAgICBjb25zdCBvbGRJZEVsZW1lbnRzID0gZmluZElkRWxlbWVudHMob2xkQ29udGVudCk7XG4gICAgICBjb25zdCBuZXdJZEVsZW1lbnRzID0gZmluZElkRWxlbWVudHMobmV3Q29udGVudCk7XG5cbiAgICAgIGNvbnN0IHBlcnNpc3RlbnRJZHMgPSBjcmVhdGVQZXJzaXN0ZW50SWRzKG9sZElkRWxlbWVudHMsIG5ld0lkRWxlbWVudHMpO1xuXG4gICAgICAvKiogQHR5cGUge01hcDxOb2RlLCBTZXQ8c3RyaW5nPj59ICovXG4gICAgICBsZXQgaWRNYXAgPSBuZXcgTWFwKCk7XG4gICAgICBwb3B1bGF0ZUlkTWFwV2l0aFRyZWUoaWRNYXAsIHBlcnNpc3RlbnRJZHMsIG9sZENvbnRlbnQsIG9sZElkRWxlbWVudHMpO1xuXG4gICAgICAvKiogQHRzLWlnbm9yZSAtIGlmIG5ld0NvbnRlbnQgaXMgYSBkdWNrLXR5cGVkIHBhcmVudCwgcGFzcyBpdHMgc2luZ2xlIGNoaWxkIG5vZGUgYXMgdGhlIHJvb3QgdG8gaGFsdCB1cHdhcmRzIGl0ZXJhdGlvbiAqL1xuICAgICAgY29uc3QgbmV3Um9vdCA9IG5ld0NvbnRlbnQuX19pZGlvbW9ycGhSb290IHx8IG5ld0NvbnRlbnQ7XG4gICAgICBwb3B1bGF0ZUlkTWFwV2l0aFRyZWUoaWRNYXAsIHBlcnNpc3RlbnRJZHMsIG5ld1Jvb3QsIG5ld0lkRWxlbWVudHMpO1xuXG4gICAgICByZXR1cm4geyBwZXJzaXN0ZW50SWRzLCBpZE1hcCB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gY29tcHV0ZXMgdGhlIHNldCBvZiBpZHMgdGhhdCBwZXJzaXN0IGJldHdlZW4gdGhlIHR3byBjb250ZW50cyBleGNsdWRpbmcgZHVwbGljYXRlc1xuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50W119IG9sZElkRWxlbWVudHNcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnRbXX0gbmV3SWRFbGVtZW50c1xuICAgICAqIEByZXR1cm5zIHtTZXQ8c3RyaW5nPn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVQZXJzaXN0ZW50SWRzKG9sZElkRWxlbWVudHMsIG5ld0lkRWxlbWVudHMpIHtcbiAgICAgIGxldCBkdXBsaWNhdGVJZHMgPSBuZXcgU2V0KCk7XG5cbiAgICAgIC8qKiBAdHlwZSB7TWFwPHN0cmluZywgc3RyaW5nPn0gKi9cbiAgICAgIGxldCBvbGRJZFRhZ05hbWVNYXAgPSBuZXcgTWFwKCk7XG4gICAgICBmb3IgKGNvbnN0IHsgaWQsIHRhZ05hbWUgfSBvZiBvbGRJZEVsZW1lbnRzKSB7XG4gICAgICAgIGlmIChvbGRJZFRhZ05hbWVNYXAuaGFzKGlkKSkge1xuICAgICAgICAgIGR1cGxpY2F0ZUlkcy5hZGQoaWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9sZElkVGFnTmFtZU1hcC5zZXQoaWQsIHRhZ05hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxldCBwZXJzaXN0ZW50SWRzID0gbmV3IFNldCgpO1xuICAgICAgZm9yIChjb25zdCB7IGlkLCB0YWdOYW1lIH0gb2YgbmV3SWRFbGVtZW50cykge1xuICAgICAgICBpZiAocGVyc2lzdGVudElkcy5oYXMoaWQpKSB7XG4gICAgICAgICAgZHVwbGljYXRlSWRzLmFkZChpZCk7XG4gICAgICAgIH0gZWxzZSBpZiAob2xkSWRUYWdOYW1lTWFwLmdldChpZCkgPT09IHRhZ05hbWUpIHtcbiAgICAgICAgICBwZXJzaXN0ZW50SWRzLmFkZChpZCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2tpcCBpZiB0YWcgdHlwZXMgbWlzbWF0Y2ggYmVjYXVzZSBpdHMgbm90IHBvc3NpYmxlIHRvIG1vcnBoIG9uZSB0YWcgaW50byBhbm90aGVyXG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgaWQgb2YgZHVwbGljYXRlSWRzKSB7XG4gICAgICAgIHBlcnNpc3RlbnRJZHMuZGVsZXRlKGlkKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwZXJzaXN0ZW50SWRzO1xuICAgIH1cblxuICAgIHJldHVybiBjcmVhdGVNb3JwaENvbnRleHQ7XG4gIH0pKCk7XG5cbiAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBIVE1MIE5vcm1hbGl6YXRpb24gRnVuY3Rpb25zXG4gIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgY29uc3QgeyBub3JtYWxpemVFbGVtZW50LCBub3JtYWxpemVQYXJlbnQgfSA9IChmdW5jdGlvbiAoKSB7XG4gICAgLyoqIEB0eXBlIHtXZWFrU2V0PE5vZGU+fSAqL1xuICAgIGNvbnN0IGdlbmVyYXRlZEJ5SWRpb21vcnBoID0gbmV3IFdlYWtTZXQoKTtcblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50IHwgRG9jdW1lbnR9IGNvbnRlbnRcbiAgICAgKiBAcmV0dXJucyB7RWxlbWVudH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBub3JtYWxpemVFbGVtZW50KGNvbnRlbnQpIHtcbiAgICAgIGlmIChjb250ZW50IGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bGwgfCBzdHJpbmcgfCBOb2RlIHwgSFRNTENvbGxlY3Rpb24gfCBOb2RlW10gfCBEb2N1bWVudCAmIHtnZW5lcmF0ZWRCeUlkaW9tb3JwaDpib29sZWFufX0gbmV3Q29udGVudFxuICAgICAqIEByZXR1cm5zIHtFbGVtZW50fVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZVBhcmVudChuZXdDb250ZW50KSB7XG4gICAgICBpZiAobmV3Q29udGVudCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpOyAvLyBkdW1teSBwYXJlbnQgZWxlbWVudFxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgbmV3Q29udGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gbm9ybWFsaXplUGFyZW50KHBhcnNlQ29udGVudChuZXdDb250ZW50KSk7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBnZW5lcmF0ZWRCeUlkaW9tb3JwaC5oYXMoLyoqIEB0eXBlIHtFbGVtZW50fSAqLyAobmV3Q29udGVudCkpXG4gICAgICApIHtcbiAgICAgICAgLy8gdGhlIHRlbXBsYXRlIHRhZyBjcmVhdGVkIGJ5IGlkaW9tb3JwaCBwYXJzaW5nIGNhbiBzZXJ2ZSBhcyBhIGR1bW15IHBhcmVudFxuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtFbGVtZW50fSAqLyAobmV3Q29udGVudCk7XG4gICAgICB9IGVsc2UgaWYgKG5ld0NvbnRlbnQgaW5zdGFuY2VvZiBOb2RlKSB7XG4gICAgICAgIGlmIChuZXdDb250ZW50LnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAvLyB3ZSBjYW4ndCB1c2UgdGhlIHBhcmVudCBkaXJlY3RseSBiZWNhdXNlIG5ld0NvbnRlbnQgbWF5IGhhdmUgc2libGluZ3NcbiAgICAgICAgICAvLyB0aGF0IHdlIGRvbid0IHdhbnQgaW4gdGhlIG1vcnBoLCBhbmQgcmVwYXJlbnRpbmcgbWlnaHQgYmUgZXhwZW5zaXZlIChUT0RPIGlzIGl0PyksXG4gICAgICAgICAgLy8gc28gd2UgY3JlYXRlIGEgZHVjay10eXBlZCBwYXJlbnQgbm9kZSBpbnN0ZWFkLlxuICAgICAgICAgIHJldHVybiBjcmVhdGVEdWNrVHlwZWRQYXJlbnQobmV3Q29udGVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gYSBzaW5nbGUgbm9kZSBpcyBhZGRlZCBhcyBhIGNoaWxkIHRvIGEgZHVtbXkgcGFyZW50XG4gICAgICAgICAgY29uc3QgZHVtbXlQYXJlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgIGR1bW15UGFyZW50LmFwcGVuZChuZXdDb250ZW50KTtcbiAgICAgICAgICByZXR1cm4gZHVtbXlQYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGFsbCBub2RlcyBpbiB0aGUgYXJyYXkgb3IgSFRNTEVsZW1lbnQgY29sbGVjdGlvbiBhcmUgY29uc29saWRhdGVkIHVuZGVyXG4gICAgICAgIC8vIGEgc2luZ2xlIGR1bW15IHBhcmVudCBlbGVtZW50XG4gICAgICAgIGNvbnN0IGR1bW15UGFyZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgZm9yIChjb25zdCBlbHQgb2YgWy4uLm5ld0NvbnRlbnRdKSB7XG4gICAgICAgICAgZHVtbXlQYXJlbnQuYXBwZW5kKGVsdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGR1bW15UGFyZW50O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmYWtlIGR1Y2stdHlwZWQgcGFyZW50IGVsZW1lbnQgdG8gd3JhcCBhIHNpbmdsZSBub2RlLCB3aXRob3V0IGFjdHVhbGx5IHJlcGFyZW50aW5nIGl0LlxuICAgICAqIFwiSWYgaXQgd2Fsa3MgbGlrZSBhIGR1Y2ssIGFuZCBxdWFja3MgbGlrZSBhIGR1Y2ssIHRoZW4gaXQgbXVzdCBiZSBhIGR1Y2shXCIgLS0gSmFtZXMgV2hpdGNvbWIgUmlsZXkgKDE4NDlcdTIwMTMxOTE2KVxuICAgICAqXG4gICAgICogQHBhcmFtIHtOb2RlfSBuZXdDb250ZW50XG4gICAgICogQHJldHVybnMge0VsZW1lbnR9XG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlRHVja1R5cGVkUGFyZW50KG5ld0NvbnRlbnQpIHtcbiAgICAgIHJldHVybiAvKiogQHR5cGUge0VsZW1lbnR9ICovIChcbiAgICAgICAgLyoqIEB0eXBlIHt1bmtub3dufSAqLyAoe1xuICAgICAgICAgIGNoaWxkTm9kZXM6IFtuZXdDb250ZW50XSxcbiAgICAgICAgICAvKiogQHRzLWlnbm9yZSAtIGNvdmVyIHlvdXIgZXllcyBmb3IgYSBtaW51dGUsIHRzYyAqL1xuICAgICAgICAgIHF1ZXJ5U2VsZWN0b3JBbGw6IChzKSA9PiB7XG4gICAgICAgICAgICAvKiogQHRzLWlnbm9yZSAqL1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudHMgPSBuZXdDb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwocyk7XG4gICAgICAgICAgICAvKiogQHRzLWlnbm9yZSAqL1xuICAgICAgICAgICAgcmV0dXJuIG5ld0NvbnRlbnQubWF0Y2hlcyhzKSA/IFtuZXdDb250ZW50LCAuLi5lbGVtZW50c10gOiBlbGVtZW50cztcbiAgICAgICAgICB9LFxuICAgICAgICAgIC8qKiBAdHMtaWdub3JlICovXG4gICAgICAgICAgaW5zZXJ0QmVmb3JlOiAobiwgcikgPT4gbmV3Q29udGVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShuLCByKSxcbiAgICAgICAgICAvKiogQHRzLWlnbm9yZSAqL1xuICAgICAgICAgIG1vdmVCZWZvcmU6IChuLCByKSA9PiBuZXdDb250ZW50LnBhcmVudE5vZGUubW92ZUJlZm9yZShuLCByKSxcbiAgICAgICAgICAvLyBmb3IgbGF0ZXIgdXNlIHdpdGggcG9wdWxhdGVJZE1hcFdpdGhUcmVlIHRvIGhhbHQgdXB3YXJkcyBpdGVyYXRpb25cbiAgICAgICAgICBnZXQgX19pZGlvbW9ycGhSb290KCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ld0NvbnRlbnQ7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmV3Q29udGVudFxuICAgICAqIEByZXR1cm5zIHtOb2RlIHwgbnVsbCB8IERvY3VtZW50RnJhZ21lbnR9XG4gICAgICovXG4gICAgZnVuY3Rpb24gcGFyc2VDb250ZW50KG5ld0NvbnRlbnQpIHtcbiAgICAgIGxldCBwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7XG5cbiAgICAgIC8vIHJlbW92ZSBzdmdzIHRvIGF2b2lkIGZhbHNlLXBvc2l0aXZlIG1hdGNoZXMgb24gaGVhZCwgZXRjLlxuICAgICAgbGV0IGNvbnRlbnRXaXRoU3Znc1JlbW92ZWQgPSBuZXdDb250ZW50LnJlcGxhY2UoXG4gICAgICAgIC88c3ZnKFxcc1tePl0qPnw+KShbXFxzXFxTXSo/KTxcXC9zdmc+L2dpbSxcbiAgICAgICAgXCJcIixcbiAgICAgICk7XG5cbiAgICAgIC8vIGlmIHRoZSBuZXdDb250ZW50IGNvbnRhaW5zIGEgaHRtbCwgaGVhZCBvciBib2R5IHRhZywgd2UgY2FuIHNpbXBseSBwYXJzZSBpdCB3L28gd3JhcHBpbmdcbiAgICAgIGlmIChcbiAgICAgICAgY29udGVudFdpdGhTdmdzUmVtb3ZlZC5tYXRjaCgvPFxcL2h0bWw+LykgfHxcbiAgICAgICAgY29udGVudFdpdGhTdmdzUmVtb3ZlZC5tYXRjaCgvPFxcL2hlYWQ+LykgfHxcbiAgICAgICAgY29udGVudFdpdGhTdmdzUmVtb3ZlZC5tYXRjaCgvPFxcL2JvZHk+LylcbiAgICAgICkge1xuICAgICAgICBsZXQgY29udGVudCA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcobmV3Q29udGVudCwgXCJ0ZXh0L2h0bWxcIik7XG4gICAgICAgIC8vIGlmIGl0IGlzIGEgZnVsbCBIVE1MIGRvY3VtZW50LCByZXR1cm4gdGhlIGRvY3VtZW50IGl0c2VsZiBhcyB0aGUgcGFyZW50IGNvbnRhaW5lclxuICAgICAgICBpZiAoY29udGVudFdpdGhTdmdzUmVtb3ZlZC5tYXRjaCgvPFxcL2h0bWw+LykpIHtcbiAgICAgICAgICBnZW5lcmF0ZWRCeUlkaW9tb3JwaC5hZGQoY29udGVudCk7XG4gICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gb3RoZXJ3aXNlIHJldHVybiB0aGUgaHRtbCBlbGVtZW50IGFzIHRoZSBwYXJlbnQgY29udGFpbmVyXG4gICAgICAgICAgbGV0IGh0bWxFbGVtZW50ID0gY29udGVudC5maXJzdENoaWxkO1xuICAgICAgICAgIGlmIChodG1sRWxlbWVudCkge1xuICAgICAgICAgICAgZ2VuZXJhdGVkQnlJZGlvbW9ycGguYWRkKGh0bWxFbGVtZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGh0bWxFbGVtZW50O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpZiBpdCBpcyBwYXJ0aWFsIEhUTUwsIHdyYXAgaXQgaW4gYSB0ZW1wbGF0ZSB0YWcgdG8gcHJvdmlkZSBhIHBhcmVudCBlbGVtZW50IGFuZCBhbHNvIHRvIGhlbHBcbiAgICAgICAgLy8gZGVhbCB3aXRoIHRvdWNoeSB0YWdzIGxpa2UgdHIsIHRib2R5LCBldGMuXG4gICAgICAgIGxldCByZXNwb25zZURvYyA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcoXG4gICAgICAgICAgXCI8Ym9keT48dGVtcGxhdGU+XCIgKyBuZXdDb250ZW50ICsgXCI8L3RlbXBsYXRlPjwvYm9keT5cIixcbiAgICAgICAgICBcInRleHQvaHRtbFwiLFxuICAgICAgICApO1xuICAgICAgICBsZXQgY29udGVudCA9IC8qKiBAdHlwZSB7SFRNTFRlbXBsYXRlRWxlbWVudH0gKi8gKFxuICAgICAgICAgIHJlc3BvbnNlRG9jLmJvZHkucXVlcnlTZWxlY3RvcihcInRlbXBsYXRlXCIpXG4gICAgICAgICkuY29udGVudDtcbiAgICAgICAgZ2VuZXJhdGVkQnlJZGlvbW9ycGguYWRkKGNvbnRlbnQpO1xuICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBub3JtYWxpemVFbGVtZW50LCBub3JtYWxpemVQYXJlbnQgfTtcbiAgfSkoKTtcblxuICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFRoaXMgaXMgd2hhdCBlbmRzIHVwIGJlY29taW5nIHRoZSBJZGlvbW9ycGggZ2xvYmFsIG9iamVjdFxuICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIHJldHVybiB7XG4gICAgbW9ycGgsXG4gICAgZGVmYXVsdHMsXG4gIH07XG59KSgpO1xuXG4vKipcbiAqIE1vcnBoIHRoZSBzdGF0ZSBvZiB0aGUgY3VycmVudEVsZW1lbnQgYmFzZWQgb24gdGhlIGF0dHJpYnV0ZXMgYW5kIGNvbnRlbnRzIG9mXG4gKiB0aGUgbmV3RWxlbWVudC4gTW9ycGhpbmcgbWF5IGRpc3BhdGNoIHR1cmJvOmJlZm9yZS1tb3JwaC1lbGVtZW50LFxuICogdHVyYm86YmVmb3JlLW1vcnBoLWF0dHJpYnV0ZSwgYW5kIHR1cmJvOm1vcnBoLWVsZW1lbnQgZXZlbnRzLlxuICpcbiAqIEBwYXJhbSBjdXJyZW50RWxlbWVudCBFbGVtZW50IGRlc3RpbmF0aW9uIG9mIG1vcnBoaW5nIGNoYW5nZXNcbiAqIEBwYXJhbSBuZXdFbGVtZW50IEVsZW1lbnQgc291cmNlIG9mIG1vcnBoaW5nIGNoYW5nZXNcbiAqL1xuZnVuY3Rpb24gbW9ycGhFbGVtZW50cyhjdXJyZW50RWxlbWVudCwgbmV3RWxlbWVudCwgeyBjYWxsYmFja3MsIC4uLm9wdGlvbnMgfSA9IHt9KSB7XG4gIElkaW9tb3JwaC5tb3JwaChjdXJyZW50RWxlbWVudCwgbmV3RWxlbWVudCwge1xuICAgIC4uLm9wdGlvbnMsXG4gICAgY2FsbGJhY2tzOiBuZXcgRGVmYXVsdElkaW9tb3JwaENhbGxiYWNrcyhjYWxsYmFja3MpXG4gIH0pO1xufVxuXG4vKipcbiAqIE1vcnBoIHRoZSBjaGlsZCBlbGVtZW50cyBvZiB0aGUgY3VycmVudEVsZW1lbnQgYmFzZWQgb24gdGhlIGNoaWxkIGVsZW1lbnRzIG9mXG4gKiB0aGUgbmV3RWxlbWVudC4gTW9ycGhpbmcgY2hpbGRyZW4gbWF5IGRpc3BhdGNoIHR1cmJvOmJlZm9yZS1tb3JwaC1lbGVtZW50LFxuICogdHVyYm86YmVmb3JlLW1vcnBoLWF0dHJpYnV0ZSwgYW5kIHR1cmJvOm1vcnBoLWVsZW1lbnQgZXZlbnRzLlxuICpcbiAqIEBwYXJhbSBjdXJyZW50RWxlbWVudCBFbGVtZW50IGRlc3RpbmF0aW9uIG9mIG1vcnBoaW5nIGNoaWxkcmVuIGNoYW5nZXNcbiAqIEBwYXJhbSBuZXdFbGVtZW50IEVsZW1lbnQgc291cmNlIG9mIG1vcnBoaW5nIGNoaWxkcmVuIGNoYW5nZXNcbiAqL1xuZnVuY3Rpb24gbW9ycGhDaGlsZHJlbihjdXJyZW50RWxlbWVudCwgbmV3RWxlbWVudCwgb3B0aW9ucyA9IHt9KSB7XG4gIG1vcnBoRWxlbWVudHMoY3VycmVudEVsZW1lbnQsIG5ld0VsZW1lbnQuY2hpbGROb2Rlcywge1xuICAgIC4uLm9wdGlvbnMsXG4gICAgbW9ycGhTdHlsZTogXCJpbm5lckhUTUxcIlxuICB9KTtcbn1cblxuZnVuY3Rpb24gc2hvdWxkUmVmcmVzaEZyYW1lV2l0aE1vcnBoaW5nKGN1cnJlbnRGcmFtZSwgbmV3RnJhbWUpIHtcbiAgcmV0dXJuIGN1cnJlbnRGcmFtZSBpbnN0YW5jZW9mIEZyYW1lRWxlbWVudCAmJlxuICAgIC8vIG5ld0ZyYW1lIGNhbm5vdCB5ZXQgYmUgYW4gaW5zdGFuY2Ugb2YgRnJhbWVFbGVtZW50IGJlY2F1c2UgY3VzdG9tXG4gICAgLy8gZWxlbWVudHMgZG9uJ3QgZ2V0IGluaXRpYWxpemVkIHVudGlsIHRoZXkncmUgYXR0YWNoZWQgdG8gdGhlIERPTSwgc29cbiAgICAvLyB0ZXN0IGl0cyBFbGVtZW50I25vZGVOYW1lIGluc3RlYWRcbiAgICBuZXdGcmFtZSBpbnN0YW5jZW9mIEVsZW1lbnQgJiYgbmV3RnJhbWUubm9kZU5hbWUgPT09IFwiVFVSQk8tRlJBTUVcIiAmJlxuICAgIGN1cnJlbnRGcmFtZS5zaG91bGRSZWxvYWRXaXRoTW9ycGggJiZcbiAgICBjdXJyZW50RnJhbWUuaWQgPT09IG5ld0ZyYW1lLmlkICYmXG4gICAgKCFuZXdGcmFtZS5nZXRBdHRyaWJ1dGUoXCJzcmNcIikgfHwgdXJsc0FyZUVxdWFsKGN1cnJlbnRGcmFtZS5zcmMsIG5ld0ZyYW1lLmdldEF0dHJpYnV0ZShcInNyY1wiKSkpICYmXG4gICAgIWN1cnJlbnRGcmFtZS5jbG9zZXN0KFwiW2RhdGEtdHVyYm8tcGVybWFuZW50XVwiKVxufVxuXG5mdW5jdGlvbiBjbG9zZXN0RnJhbWVSZWxvYWRhYmxlV2l0aE1vcnBoaW5nKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUucGFyZW50RWxlbWVudC5jbG9zZXN0KFwidHVyYm8tZnJhbWVbc3JjXVtyZWZyZXNoPW1vcnBoXVwiKVxufVxuXG5jbGFzcyBEZWZhdWx0SWRpb21vcnBoQ2FsbGJhY2tzIHtcbiAgI2JlZm9yZU5vZGVNb3JwaGVkXG5cbiAgY29uc3RydWN0b3IoeyBiZWZvcmVOb2RlTW9ycGhlZCB9ID0ge30pIHtcbiAgICB0aGlzLiNiZWZvcmVOb2RlTW9ycGhlZCA9IGJlZm9yZU5vZGVNb3JwaGVkIHx8ICgoKSA9PiB0cnVlKTtcbiAgfVxuXG4gIGJlZm9yZU5vZGVBZGRlZCA9IChub2RlKSA9PiB7XG4gICAgcmV0dXJuICEobm9kZS5pZCAmJiBub2RlLmhhc0F0dHJpYnV0ZShcImRhdGEtdHVyYm8tcGVybWFuZW50XCIpICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG5vZGUuaWQpKVxuICB9XG5cbiAgYmVmb3JlTm9kZU1vcnBoZWQgPSAoY3VycmVudEVsZW1lbnQsIG5ld0VsZW1lbnQpID0+IHtcbiAgICBpZiAoY3VycmVudEVsZW1lbnQgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICBpZiAoIWN1cnJlbnRFbGVtZW50Lmhhc0F0dHJpYnV0ZShcImRhdGEtdHVyYm8tcGVybWFuZW50XCIpICYmIHRoaXMuI2JlZm9yZU5vZGVNb3JwaGVkKGN1cnJlbnRFbGVtZW50LCBuZXdFbGVtZW50KSkge1xuICAgICAgICBjb25zdCBldmVudCA9IGRpc3BhdGNoKFwidHVyYm86YmVmb3JlLW1vcnBoLWVsZW1lbnRcIiwge1xuICAgICAgICAgIGNhbmNlbGFibGU6IHRydWUsXG4gICAgICAgICAgdGFyZ2V0OiBjdXJyZW50RWxlbWVudCxcbiAgICAgICAgICBkZXRhaWw6IHsgY3VycmVudEVsZW1lbnQsIG5ld0VsZW1lbnQgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGJlZm9yZUF0dHJpYnV0ZVVwZGF0ZWQgPSAoYXR0cmlidXRlTmFtZSwgdGFyZ2V0LCBtdXRhdGlvblR5cGUpID0+IHtcbiAgICBjb25zdCBldmVudCA9IGRpc3BhdGNoKFwidHVyYm86YmVmb3JlLW1vcnBoLWF0dHJpYnV0ZVwiLCB7XG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgdGFyZ2V0LFxuICAgICAgZGV0YWlsOiB7IGF0dHJpYnV0ZU5hbWUsIG11dGF0aW9uVHlwZSB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWRcbiAgfVxuXG4gIGJlZm9yZU5vZGVSZW1vdmVkID0gKG5vZGUpID0+IHtcbiAgICByZXR1cm4gdGhpcy5iZWZvcmVOb2RlTW9ycGhlZChub2RlKVxuICB9XG5cbiAgYWZ0ZXJOb2RlTW9ycGhlZCA9IChjdXJyZW50RWxlbWVudCwgbmV3RWxlbWVudCkgPT4ge1xuICAgIGlmIChjdXJyZW50RWxlbWVudCBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcbiAgICAgIGRpc3BhdGNoKFwidHVyYm86bW9ycGgtZWxlbWVudFwiLCB7XG4gICAgICAgIHRhcmdldDogY3VycmVudEVsZW1lbnQsXG4gICAgICAgIGRldGFpbDogeyBjdXJyZW50RWxlbWVudCwgbmV3RWxlbWVudCB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxuY2xhc3MgTW9ycGhpbmdGcmFtZVJlbmRlcmVyIGV4dGVuZHMgRnJhbWVSZW5kZXJlciB7XG4gIHN0YXRpYyByZW5kZXJFbGVtZW50KGN1cnJlbnRFbGVtZW50LCBuZXdFbGVtZW50KSB7XG4gICAgZGlzcGF0Y2goXCJ0dXJibzpiZWZvcmUtZnJhbWUtbW9ycGhcIiwge1xuICAgICAgdGFyZ2V0OiBjdXJyZW50RWxlbWVudCxcbiAgICAgIGRldGFpbDogeyBjdXJyZW50RWxlbWVudCwgbmV3RWxlbWVudCB9XG4gICAgfSk7XG5cbiAgICBtb3JwaENoaWxkcmVuKGN1cnJlbnRFbGVtZW50LCBuZXdFbGVtZW50LCB7XG4gICAgICBjYWxsYmFja3M6IHtcbiAgICAgICAgYmVmb3JlTm9kZU1vcnBoZWQ6IChub2RlLCBuZXdOb2RlKSA9PiB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgc2hvdWxkUmVmcmVzaEZyYW1lV2l0aE1vcnBoaW5nKG5vZGUsIG5ld05vZGUpICYmXG4gICAgICAgICAgICAgIGNsb3Nlc3RGcmFtZVJlbG9hZGFibGVXaXRoTW9ycGhpbmcobm9kZSkgPT09IGN1cnJlbnRFbGVtZW50XG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBub2RlLnJlbG9hZCgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHByZXNlcnZpbmdQZXJtYW5lbnRFbGVtZW50cyhjYWxsYmFjaykge1xuICAgIHJldHVybiBhd2FpdCBjYWxsYmFjaygpXG4gIH1cbn1cblxuY2xhc3MgUHJvZ3Jlc3NCYXIge1xuICBzdGF0aWMgYW5pbWF0aW9uRHVyYXRpb24gPSAzMDAgLyptcyovXG5cbiAgc3RhdGljIGdldCBkZWZhdWx0Q1NTKCkge1xuICAgIHJldHVybiB1bmluZGVudGBcbiAgICAgIC50dXJiby1wcm9ncmVzcy1iYXIge1xuICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIGxlZnQ6IDA7XG4gICAgICAgIGhlaWdodDogM3B4O1xuICAgICAgICBiYWNrZ3JvdW5kOiAjMDA3NmZmO1xuICAgICAgICB6LWluZGV4OiAyMTQ3NDgzNjQ3O1xuICAgICAgICB0cmFuc2l0aW9uOlxuICAgICAgICAgIHdpZHRoICR7UHJvZ3Jlc3NCYXIuYW5pbWF0aW9uRHVyYXRpb259bXMgZWFzZS1vdXQsXG4gICAgICAgICAgb3BhY2l0eSAke1Byb2dyZXNzQmFyLmFuaW1hdGlvbkR1cmF0aW9uIC8gMn1tcyAke1Byb2dyZXNzQmFyLmFuaW1hdGlvbkR1cmF0aW9uIC8gMn1tcyBlYXNlLWluO1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDAsIDAsIDApO1xuICAgICAgfVxuICAgIGBcbiAgfVxuXG4gIGhpZGluZyA9IGZhbHNlXG4gIHZhbHVlID0gMFxuICB2aXNpYmxlID0gZmFsc2VcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnN0eWxlc2hlZXRFbGVtZW50ID0gdGhpcy5jcmVhdGVTdHlsZXNoZWV0RWxlbWVudCgpO1xuICAgIHRoaXMucHJvZ3Jlc3NFbGVtZW50ID0gdGhpcy5jcmVhdGVQcm9ncmVzc0VsZW1lbnQoKTtcbiAgICB0aGlzLmluc3RhbGxTdHlsZXNoZWV0RWxlbWVudCgpO1xuICAgIHRoaXMuc2V0VmFsdWUoMCk7XG4gIH1cblxuICBzaG93KCkge1xuICAgIGlmICghdGhpcy52aXNpYmxlKSB7XG4gICAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xuICAgICAgdGhpcy5pbnN0YWxsUHJvZ3Jlc3NFbGVtZW50KCk7XG4gICAgICB0aGlzLnN0YXJ0VHJpY2tsaW5nKCk7XG4gICAgfVxuICB9XG5cbiAgaGlkZSgpIHtcbiAgICBpZiAodGhpcy52aXNpYmxlICYmICF0aGlzLmhpZGluZykge1xuICAgICAgdGhpcy5oaWRpbmcgPSB0cnVlO1xuICAgICAgdGhpcy5mYWRlUHJvZ3Jlc3NFbGVtZW50KCgpID0+IHtcbiAgICAgICAgdGhpcy51bmluc3RhbGxQcm9ncmVzc0VsZW1lbnQoKTtcbiAgICAgICAgdGhpcy5zdG9wVHJpY2tsaW5nKCk7XG4gICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmhpZGluZyA9IGZhbHNlO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgc2V0VmFsdWUodmFsdWUpIHtcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy5yZWZyZXNoKCk7XG4gIH1cblxuICAvLyBQcml2YXRlXG5cbiAgaW5zdGFsbFN0eWxlc2hlZXRFbGVtZW50KCkge1xuICAgIGRvY3VtZW50LmhlYWQuaW5zZXJ0QmVmb3JlKHRoaXMuc3R5bGVzaGVldEVsZW1lbnQsIGRvY3VtZW50LmhlYWQuZmlyc3RDaGlsZCk7XG4gIH1cblxuICBpbnN0YWxsUHJvZ3Jlc3NFbGVtZW50KCkge1xuICAgIHRoaXMucHJvZ3Jlc3NFbGVtZW50LnN0eWxlLndpZHRoID0gXCIwXCI7XG4gICAgdGhpcy5wcm9ncmVzc0VsZW1lbnQuc3R5bGUub3BhY2l0eSA9IFwiMVwiO1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5pbnNlcnRCZWZvcmUodGhpcy5wcm9ncmVzc0VsZW1lbnQsIGRvY3VtZW50LmJvZHkpO1xuICAgIHRoaXMucmVmcmVzaCgpO1xuICB9XG5cbiAgZmFkZVByb2dyZXNzRWxlbWVudChjYWxsYmFjaykge1xuICAgIHRoaXMucHJvZ3Jlc3NFbGVtZW50LnN0eWxlLm9wYWNpdHkgPSBcIjBcIjtcbiAgICBzZXRUaW1lb3V0KGNhbGxiYWNrLCBQcm9ncmVzc0Jhci5hbmltYXRpb25EdXJhdGlvbiAqIDEuNSk7XG4gIH1cblxuICB1bmluc3RhbGxQcm9ncmVzc0VsZW1lbnQoKSB7XG4gICAgaWYgKHRoaXMucHJvZ3Jlc3NFbGVtZW50LnBhcmVudE5vZGUpIHtcbiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLnByb2dyZXNzRWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgc3RhcnRUcmlja2xpbmcoKSB7XG4gICAgaWYgKCF0aGlzLnRyaWNrbGVJbnRlcnZhbCkge1xuICAgICAgdGhpcy50cmlja2xlSW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwodGhpcy50cmlja2xlLCBQcm9ncmVzc0Jhci5hbmltYXRpb25EdXJhdGlvbik7XG4gICAgfVxuICB9XG5cbiAgc3RvcFRyaWNrbGluZygpIHtcbiAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnRyaWNrbGVJbnRlcnZhbCk7XG4gICAgZGVsZXRlIHRoaXMudHJpY2tsZUludGVydmFsO1xuICB9XG5cbiAgdHJpY2tsZSA9ICgpID0+IHtcbiAgICB0aGlzLnNldFZhbHVlKHRoaXMudmFsdWUgKyBNYXRoLnJhbmRvbSgpIC8gMTAwKTtcbiAgfVxuXG4gIHJlZnJlc2goKSB7XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIHRoaXMucHJvZ3Jlc3NFbGVtZW50LnN0eWxlLndpZHRoID0gYCR7MTAgKyB0aGlzLnZhbHVlICogOTB9JWA7XG4gICAgfSk7XG4gIH1cblxuICBjcmVhdGVTdHlsZXNoZWV0RWxlbWVudCgpIHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICAgIGVsZW1lbnQudHlwZSA9IFwidGV4dC9jc3NcIjtcbiAgICBlbGVtZW50LnRleHRDb250ZW50ID0gUHJvZ3Jlc3NCYXIuZGVmYXVsdENTUztcbiAgICBjb25zdCBjc3BOb25jZSA9IGdldENzcE5vbmNlKCk7XG4gICAgaWYgKGNzcE5vbmNlKSB7XG4gICAgICBlbGVtZW50Lm5vbmNlID0gY3NwTm9uY2U7XG4gICAgfVxuICAgIHJldHVybiBlbGVtZW50XG4gIH1cblxuICBjcmVhdGVQcm9ncmVzc0VsZW1lbnQoKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgZWxlbWVudC5jbGFzc05hbWUgPSBcInR1cmJvLXByb2dyZXNzLWJhclwiO1xuICAgIHJldHVybiBlbGVtZW50XG4gIH1cbn1cblxuY2xhc3MgSGVhZFNuYXBzaG90IGV4dGVuZHMgU25hcHNob3Qge1xuICBkZXRhaWxzQnlPdXRlckhUTUwgPSB0aGlzLmNoaWxkcmVuXG4gICAgLmZpbHRlcigoZWxlbWVudCkgPT4gIWVsZW1lbnRJc05vc2NyaXB0KGVsZW1lbnQpKVxuICAgIC5tYXAoKGVsZW1lbnQpID0+IGVsZW1lbnRXaXRob3V0Tm9uY2UoZWxlbWVudCkpXG4gICAgLnJlZHVjZSgocmVzdWx0LCBlbGVtZW50KSA9PiB7XG4gICAgICBjb25zdCB7IG91dGVySFRNTCB9ID0gZWxlbWVudDtcbiAgICAgIGNvbnN0IGRldGFpbHMgPVxuICAgICAgICBvdXRlckhUTUwgaW4gcmVzdWx0XG4gICAgICAgICAgPyByZXN1bHRbb3V0ZXJIVE1MXVxuICAgICAgICAgIDoge1xuICAgICAgICAgICAgICB0eXBlOiBlbGVtZW50VHlwZShlbGVtZW50KSxcbiAgICAgICAgICAgICAgdHJhY2tlZDogZWxlbWVudElzVHJhY2tlZChlbGVtZW50KSxcbiAgICAgICAgICAgICAgZWxlbWVudHM6IFtdXG4gICAgICAgICAgICB9O1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucmVzdWx0LFxuICAgICAgICBbb3V0ZXJIVE1MXToge1xuICAgICAgICAgIC4uLmRldGFpbHMsXG4gICAgICAgICAgZWxlbWVudHM6IFsuLi5kZXRhaWxzLmVsZW1lbnRzLCBlbGVtZW50XVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge30pXG5cbiAgZ2V0IHRyYWNrZWRFbGVtZW50U2lnbmF0dXJlKCkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmRldGFpbHNCeU91dGVySFRNTClcbiAgICAgIC5maWx0ZXIoKG91dGVySFRNTCkgPT4gdGhpcy5kZXRhaWxzQnlPdXRlckhUTUxbb3V0ZXJIVE1MXS50cmFja2VkKVxuICAgICAgLmpvaW4oXCJcIilcbiAgfVxuXG4gIGdldFNjcmlwdEVsZW1lbnRzTm90SW5TbmFwc2hvdChzbmFwc2hvdCkge1xuICAgIHJldHVybiB0aGlzLmdldEVsZW1lbnRzTWF0Y2hpbmdUeXBlTm90SW5TbmFwc2hvdChcInNjcmlwdFwiLCBzbmFwc2hvdClcbiAgfVxuXG4gIGdldFN0eWxlc2hlZXRFbGVtZW50c05vdEluU25hcHNob3Qoc25hcHNob3QpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRFbGVtZW50c01hdGNoaW5nVHlwZU5vdEluU25hcHNob3QoXCJzdHlsZXNoZWV0XCIsIHNuYXBzaG90KVxuICB9XG5cbiAgZ2V0RWxlbWVudHNNYXRjaGluZ1R5cGVOb3RJblNuYXBzaG90KG1hdGNoZWRUeXBlLCBzbmFwc2hvdCkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmRldGFpbHNCeU91dGVySFRNTClcbiAgICAgIC5maWx0ZXIoKG91dGVySFRNTCkgPT4gIShvdXRlckhUTUwgaW4gc25hcHNob3QuZGV0YWlsc0J5T3V0ZXJIVE1MKSlcbiAgICAgIC5tYXAoKG91dGVySFRNTCkgPT4gdGhpcy5kZXRhaWxzQnlPdXRlckhUTUxbb3V0ZXJIVE1MXSlcbiAgICAgIC5maWx0ZXIoKHsgdHlwZSB9KSA9PiB0eXBlID09IG1hdGNoZWRUeXBlKVxuICAgICAgLm1hcCgoeyBlbGVtZW50czogW2VsZW1lbnRdIH0pID0+IGVsZW1lbnQpXG4gIH1cblxuICBnZXQgcHJvdmlzaW9uYWxFbGVtZW50cygpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5kZXRhaWxzQnlPdXRlckhUTUwpLnJlZHVjZSgocmVzdWx0LCBvdXRlckhUTUwpID0+IHtcbiAgICAgIGNvbnN0IHsgdHlwZSwgdHJhY2tlZCwgZWxlbWVudHMgfSA9IHRoaXMuZGV0YWlsc0J5T3V0ZXJIVE1MW291dGVySFRNTF07XG4gICAgICBpZiAodHlwZSA9PSBudWxsICYmICF0cmFja2VkKSB7XG4gICAgICAgIHJldHVybiBbLi4ucmVzdWx0LCAuLi5lbGVtZW50c11cbiAgICAgIH0gZWxzZSBpZiAoZWxlbWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICByZXR1cm4gWy4uLnJlc3VsdCwgLi4uZWxlbWVudHMuc2xpY2UoMSldXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICB9XG4gICAgfSwgW10pXG4gIH1cblxuICBnZXRNZXRhVmFsdWUobmFtZSkge1xuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmZpbmRNZXRhRWxlbWVudEJ5TmFtZShuYW1lKTtcbiAgICByZXR1cm4gZWxlbWVudCA/IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiY29udGVudFwiKSA6IG51bGxcbiAgfVxuXG4gIGZpbmRNZXRhRWxlbWVudEJ5TmFtZShuYW1lKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuZGV0YWlsc0J5T3V0ZXJIVE1MKS5yZWR1Y2UoKHJlc3VsdCwgb3V0ZXJIVE1MKSA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGVsZW1lbnRzOiBbZWxlbWVudF1cbiAgICAgIH0gPSB0aGlzLmRldGFpbHNCeU91dGVySFRNTFtvdXRlckhUTUxdO1xuICAgICAgcmV0dXJuIGVsZW1lbnRJc01ldGFFbGVtZW50V2l0aE5hbWUoZWxlbWVudCwgbmFtZSkgPyBlbGVtZW50IDogcmVzdWx0XG4gICAgfSwgdW5kZWZpbmVkIHwgdW5kZWZpbmVkKVxuICB9XG59XG5cbmZ1bmN0aW9uIGVsZW1lbnRUeXBlKGVsZW1lbnQpIHtcbiAgaWYgKGVsZW1lbnRJc1NjcmlwdChlbGVtZW50KSkge1xuICAgIHJldHVybiBcInNjcmlwdFwiXG4gIH0gZWxzZSBpZiAoZWxlbWVudElzU3R5bGVzaGVldChlbGVtZW50KSkge1xuICAgIHJldHVybiBcInN0eWxlc2hlZXRcIlxuICB9XG59XG5cbmZ1bmN0aW9uIGVsZW1lbnRJc1RyYWNrZWQoZWxlbWVudCkge1xuICByZXR1cm4gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLXRyYWNrXCIpID09IFwicmVsb2FkXCJcbn1cblxuZnVuY3Rpb24gZWxlbWVudElzU2NyaXB0KGVsZW1lbnQpIHtcbiAgY29uc3QgdGFnTmFtZSA9IGVsZW1lbnQubG9jYWxOYW1lO1xuICByZXR1cm4gdGFnTmFtZSA9PSBcInNjcmlwdFwiXG59XG5cbmZ1bmN0aW9uIGVsZW1lbnRJc05vc2NyaXB0KGVsZW1lbnQpIHtcbiAgY29uc3QgdGFnTmFtZSA9IGVsZW1lbnQubG9jYWxOYW1lO1xuICByZXR1cm4gdGFnTmFtZSA9PSBcIm5vc2NyaXB0XCJcbn1cblxuZnVuY3Rpb24gZWxlbWVudElzU3R5bGVzaGVldChlbGVtZW50KSB7XG4gIGNvbnN0IHRhZ05hbWUgPSBlbGVtZW50LmxvY2FsTmFtZTtcbiAgcmV0dXJuIHRhZ05hbWUgPT0gXCJzdHlsZVwiIHx8ICh0YWdOYW1lID09IFwibGlua1wiICYmIGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwicmVsXCIpID09IFwic3R5bGVzaGVldFwiKVxufVxuXG5mdW5jdGlvbiBlbGVtZW50SXNNZXRhRWxlbWVudFdpdGhOYW1lKGVsZW1lbnQsIG5hbWUpIHtcbiAgY29uc3QgdGFnTmFtZSA9IGVsZW1lbnQubG9jYWxOYW1lO1xuICByZXR1cm4gdGFnTmFtZSA9PSBcIm1ldGFcIiAmJiBlbGVtZW50LmdldEF0dHJpYnV0ZShcIm5hbWVcIikgPT0gbmFtZVxufVxuXG5mdW5jdGlvbiBlbGVtZW50V2l0aG91dE5vbmNlKGVsZW1lbnQpIHtcbiAgaWYgKGVsZW1lbnQuaGFzQXR0cmlidXRlKFwibm9uY2VcIikpIHtcbiAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsIFwiXCIpO1xuICB9XG5cbiAgcmV0dXJuIGVsZW1lbnRcbn1cblxuY2xhc3MgUGFnZVNuYXBzaG90IGV4dGVuZHMgU25hcHNob3Qge1xuICBzdGF0aWMgZnJvbUhUTUxTdHJpbmcoaHRtbCA9IFwiXCIpIHtcbiAgICByZXR1cm4gdGhpcy5mcm9tRG9jdW1lbnQocGFyc2VIVE1MRG9jdW1lbnQoaHRtbCkpXG4gIH1cblxuICBzdGF0aWMgZnJvbUVsZW1lbnQoZWxlbWVudCkge1xuICAgIHJldHVybiB0aGlzLmZyb21Eb2N1bWVudChlbGVtZW50Lm93bmVyRG9jdW1lbnQpXG4gIH1cblxuICBzdGF0aWMgZnJvbURvY3VtZW50KHsgZG9jdW1lbnRFbGVtZW50LCBib2R5LCBoZWFkIH0pIHtcbiAgICByZXR1cm4gbmV3IHRoaXMoZG9jdW1lbnRFbGVtZW50LCBib2R5LCBuZXcgSGVhZFNuYXBzaG90KGhlYWQpKVxuICB9XG5cbiAgY29uc3RydWN0b3IoZG9jdW1lbnRFbGVtZW50LCBib2R5LCBoZWFkU25hcHNob3QpIHtcbiAgICBzdXBlcihib2R5KTtcbiAgICB0aGlzLmRvY3VtZW50RWxlbWVudCA9IGRvY3VtZW50RWxlbWVudDtcbiAgICB0aGlzLmhlYWRTbmFwc2hvdCA9IGhlYWRTbmFwc2hvdDtcbiAgfVxuXG4gIGNsb25lKCkge1xuICAgIGNvbnN0IGNsb25lZEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgY29uc3Qgc2VsZWN0RWxlbWVudHMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcInNlbGVjdFwiKTtcbiAgICBjb25zdCBjbG9uZWRTZWxlY3RFbGVtZW50cyA9IGNsb25lZEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcInNlbGVjdFwiKTtcblxuICAgIGZvciAoY29uc3QgW2luZGV4LCBzb3VyY2VdIG9mIHNlbGVjdEVsZW1lbnRzLmVudHJpZXMoKSkge1xuICAgICAgY29uc3QgY2xvbmUgPSBjbG9uZWRTZWxlY3RFbGVtZW50c1tpbmRleF07XG4gICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBjbG9uZS5zZWxlY3RlZE9wdGlvbnMpIG9wdGlvbi5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgZm9yIChjb25zdCBvcHRpb24gb2Ygc291cmNlLnNlbGVjdGVkT3B0aW9ucykgY2xvbmUub3B0aW9uc1tvcHRpb24uaW5kZXhdLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGNsb25lZFBhc3N3b3JkSW5wdXQgb2YgY2xvbmVkRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwicGFzc3dvcmRcIl0nKSkge1xuICAgICAgY2xvbmVkUGFzc3dvcmRJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQYWdlU25hcHNob3QodGhpcy5kb2N1bWVudEVsZW1lbnQsIGNsb25lZEVsZW1lbnQsIHRoaXMuaGVhZFNuYXBzaG90KVxuICB9XG5cbiAgZ2V0IGxhbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZShcImxhbmdcIilcbiAgfVxuXG4gIGdldCBoZWFkRWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5oZWFkU25hcHNob3QuZWxlbWVudFxuICB9XG5cbiAgZ2V0IHJvb3RMb2NhdGlvbigpIHtcbiAgICBjb25zdCByb290ID0gdGhpcy5nZXRTZXR0aW5nKFwicm9vdFwiKSA/PyBcIi9cIjtcbiAgICByZXR1cm4gZXhwYW5kVVJMKHJvb3QpXG4gIH1cblxuICBnZXQgY2FjaGVDb250cm9sVmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U2V0dGluZyhcImNhY2hlLWNvbnRyb2xcIilcbiAgfVxuXG4gIGdldCBpc1ByZXZpZXdhYmxlKCkge1xuICAgIHJldHVybiB0aGlzLmNhY2hlQ29udHJvbFZhbHVlICE9IFwibm8tcHJldmlld1wiXG4gIH1cblxuICBnZXQgaXNDYWNoZWFibGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FjaGVDb250cm9sVmFsdWUgIT0gXCJuby1jYWNoZVwiXG4gIH1cblxuICBnZXQgaXNWaXNpdGFibGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U2V0dGluZyhcInZpc2l0LWNvbnRyb2xcIikgIT0gXCJyZWxvYWRcIlxuICB9XG5cbiAgZ2V0IHByZWZlcnNWaWV3VHJhbnNpdGlvbnMoKSB7XG4gICAgY29uc3Qgdmlld1RyYW5zaXRpb25FbmFibGVkID0gdGhpcy5nZXRTZXR0aW5nKFwidmlldy10cmFuc2l0aW9uXCIpID09PSBcInRydWVcIiB8fCB0aGlzLmhlYWRTbmFwc2hvdC5nZXRNZXRhVmFsdWUoXCJ2aWV3LXRyYW5zaXRpb25cIikgPT09IFwic2FtZS1vcmlnaW5cIjtcbiAgICByZXR1cm4gdmlld1RyYW5zaXRpb25FbmFibGVkICYmICF3aW5kb3cubWF0Y2hNZWRpYShcIihwcmVmZXJzLXJlZHVjZWQtbW90aW9uOiByZWR1Y2UpXCIpLm1hdGNoZXNcbiAgfVxuXG4gIGdldCBzaG91bGRNb3JwaFBhZ2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U2V0dGluZyhcInJlZnJlc2gtbWV0aG9kXCIpID09PSBcIm1vcnBoXCJcbiAgfVxuXG4gIGdldCBzaG91bGRQcmVzZXJ2ZVNjcm9sbFBvc2l0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmdldFNldHRpbmcoXCJyZWZyZXNoLXNjcm9sbFwiKSA9PT0gXCJwcmVzZXJ2ZVwiXG4gIH1cblxuICAvLyBQcml2YXRlXG5cbiAgZ2V0U2V0dGluZyhuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMuaGVhZFNuYXBzaG90LmdldE1ldGFWYWx1ZShgdHVyYm8tJHtuYW1lfWApXG4gIH1cbn1cblxuY2xhc3MgVmlld1RyYW5zaXRpb25lciB7XG4gICN2aWV3VHJhbnNpdGlvblN0YXJ0ZWQgPSBmYWxzZVxuICAjbGFzdE9wZXJhdGlvbiA9IFByb21pc2UucmVzb2x2ZSgpXG5cbiAgcmVuZGVyQ2hhbmdlKHVzZVZpZXdUcmFuc2l0aW9uLCByZW5kZXIpIHtcbiAgICBpZiAodXNlVmlld1RyYW5zaXRpb24gJiYgdGhpcy52aWV3VHJhbnNpdGlvbnNBdmFpbGFibGUgJiYgIXRoaXMuI3ZpZXdUcmFuc2l0aW9uU3RhcnRlZCkge1xuICAgICAgdGhpcy4jdmlld1RyYW5zaXRpb25TdGFydGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuI2xhc3RPcGVyYXRpb24gPSB0aGlzLiNsYXN0T3BlcmF0aW9uLnRoZW4oYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBkb2N1bWVudC5zdGFydFZpZXdUcmFuc2l0aW9uKHJlbmRlcikuZmluaXNoZWQ7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4jbGFzdE9wZXJhdGlvbiA9IHRoaXMuI2xhc3RPcGVyYXRpb24udGhlbihyZW5kZXIpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLiNsYXN0T3BlcmF0aW9uXG4gIH1cblxuICBnZXQgdmlld1RyYW5zaXRpb25zQXZhaWxhYmxlKCkge1xuICAgIHJldHVybiBkb2N1bWVudC5zdGFydFZpZXdUcmFuc2l0aW9uXG4gIH1cbn1cblxuY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gIGFjdGlvbjogXCJhZHZhbmNlXCIsXG4gIGhpc3RvcnlDaGFuZ2VkOiBmYWxzZSxcbiAgdmlzaXRDYWNoZWRTbmFwc2hvdDogKCkgPT4ge30sXG4gIHdpbGxSZW5kZXI6IHRydWUsXG4gIHVwZGF0ZUhpc3Rvcnk6IHRydWUsXG4gIHNob3VsZENhY2hlU25hcHNob3Q6IHRydWUsXG4gIGFjY2VwdHNTdHJlYW1SZXNwb25zZTogZmFsc2Vcbn07XG5cbmNvbnN0IFRpbWluZ01ldHJpYyA9IHtcbiAgdmlzaXRTdGFydDogXCJ2aXNpdFN0YXJ0XCIsXG4gIHJlcXVlc3RTdGFydDogXCJyZXF1ZXN0U3RhcnRcIixcbiAgcmVxdWVzdEVuZDogXCJyZXF1ZXN0RW5kXCIsXG4gIHZpc2l0RW5kOiBcInZpc2l0RW5kXCJcbn07XG5cbmNvbnN0IFZpc2l0U3RhdGUgPSB7XG4gIGluaXRpYWxpemVkOiBcImluaXRpYWxpemVkXCIsXG4gIHN0YXJ0ZWQ6IFwic3RhcnRlZFwiLFxuICBjYW5jZWxlZDogXCJjYW5jZWxlZFwiLFxuICBmYWlsZWQ6IFwiZmFpbGVkXCIsXG4gIGNvbXBsZXRlZDogXCJjb21wbGV0ZWRcIlxufTtcblxuY29uc3QgU3lzdGVtU3RhdHVzQ29kZSA9IHtcbiAgbmV0d29ya0ZhaWx1cmU6IDAsXG4gIHRpbWVvdXRGYWlsdXJlOiAtMSxcbiAgY29udGVudFR5cGVNaXNtYXRjaDogLTJcbn07XG5cbmNvbnN0IERpcmVjdGlvbiA9IHtcbiAgYWR2YW5jZTogXCJmb3J3YXJkXCIsXG4gIHJlc3RvcmU6IFwiYmFja1wiLFxuICByZXBsYWNlOiBcIm5vbmVcIlxufTtcblxuY2xhc3MgVmlzaXQge1xuICBpZGVudGlmaWVyID0gdXVpZCgpIC8vIFJlcXVpcmVkIGJ5IHR1cmJvLWlvc1xuICB0aW1pbmdNZXRyaWNzID0ge31cblxuICBmb2xsb3dlZFJlZGlyZWN0ID0gZmFsc2VcbiAgaGlzdG9yeUNoYW5nZWQgPSBmYWxzZVxuICBzY3JvbGxlZCA9IGZhbHNlXG4gIHNob3VsZENhY2hlU25hcHNob3QgPSB0cnVlXG4gIGFjY2VwdHNTdHJlYW1SZXNwb25zZSA9IGZhbHNlXG4gIHNuYXBzaG90Q2FjaGVkID0gZmFsc2VcbiAgc3RhdGUgPSBWaXNpdFN0YXRlLmluaXRpYWxpemVkXG4gIHZpZXdUcmFuc2l0aW9uZXIgPSBuZXcgVmlld1RyYW5zaXRpb25lcigpXG5cbiAgY29uc3RydWN0b3IoZGVsZWdhdGUsIGxvY2F0aW9uLCByZXN0b3JhdGlvbklkZW50aWZpZXIsIG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICB0aGlzLmxvY2F0aW9uID0gbG9jYXRpb247XG4gICAgdGhpcy5yZXN0b3JhdGlvbklkZW50aWZpZXIgPSByZXN0b3JhdGlvbklkZW50aWZpZXIgfHwgdXVpZCgpO1xuXG4gICAgY29uc3Qge1xuICAgICAgYWN0aW9uLFxuICAgICAgaGlzdG9yeUNoYW5nZWQsXG4gICAgICByZWZlcnJlcixcbiAgICAgIHNuYXBzaG90LFxuICAgICAgc25hcHNob3RIVE1MLFxuICAgICAgcmVzcG9uc2UsXG4gICAgICB2aXNpdENhY2hlZFNuYXBzaG90LFxuICAgICAgd2lsbFJlbmRlcixcbiAgICAgIHVwZGF0ZUhpc3RvcnksXG4gICAgICBzaG91bGRDYWNoZVNuYXBzaG90LFxuICAgICAgYWNjZXB0c1N0cmVhbVJlc3BvbnNlLFxuICAgICAgZGlyZWN0aW9uXG4gICAgfSA9IHtcbiAgICAgIC4uLmRlZmF1bHRPcHRpb25zLFxuICAgICAgLi4ub3B0aW9uc1xuICAgIH07XG4gICAgdGhpcy5hY3Rpb24gPSBhY3Rpb247XG4gICAgdGhpcy5oaXN0b3J5Q2hhbmdlZCA9IGhpc3RvcnlDaGFuZ2VkO1xuICAgIHRoaXMucmVmZXJyZXIgPSByZWZlcnJlcjtcbiAgICB0aGlzLnNuYXBzaG90ID0gc25hcHNob3Q7XG4gICAgdGhpcy5zbmFwc2hvdEhUTUwgPSBzbmFwc2hvdEhUTUw7XG4gICAgdGhpcy5yZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgIHRoaXMuaXNTYW1lUGFnZSA9IHRoaXMuZGVsZWdhdGUubG9jYXRpb25XaXRoQWN0aW9uSXNTYW1lUGFnZSh0aGlzLmxvY2F0aW9uLCB0aGlzLmFjdGlvbik7XG4gICAgdGhpcy5pc1BhZ2VSZWZyZXNoID0gdGhpcy52aWV3LmlzUGFnZVJlZnJlc2godGhpcyk7XG4gICAgdGhpcy52aXNpdENhY2hlZFNuYXBzaG90ID0gdmlzaXRDYWNoZWRTbmFwc2hvdDtcbiAgICB0aGlzLndpbGxSZW5kZXIgPSB3aWxsUmVuZGVyO1xuICAgIHRoaXMudXBkYXRlSGlzdG9yeSA9IHVwZGF0ZUhpc3Rvcnk7XG4gICAgdGhpcy5zY3JvbGxlZCA9ICF3aWxsUmVuZGVyO1xuICAgIHRoaXMuc2hvdWxkQ2FjaGVTbmFwc2hvdCA9IHNob3VsZENhY2hlU25hcHNob3Q7XG4gICAgdGhpcy5hY2NlcHRzU3RyZWFtUmVzcG9uc2UgPSBhY2NlcHRzU3RyZWFtUmVzcG9uc2U7XG4gICAgdGhpcy5kaXJlY3Rpb24gPSBkaXJlY3Rpb24gfHwgRGlyZWN0aW9uW2FjdGlvbl07XG4gIH1cblxuICBnZXQgYWRhcHRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5hZGFwdGVyXG4gIH1cblxuICBnZXQgdmlldygpIHtcbiAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS52aWV3XG4gIH1cblxuICBnZXQgaGlzdG9yeSgpIHtcbiAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5oaXN0b3J5XG4gIH1cblxuICBnZXQgcmVzdG9yYXRpb25EYXRhKCkge1xuICAgIHJldHVybiB0aGlzLmhpc3RvcnkuZ2V0UmVzdG9yYXRpb25EYXRhRm9ySWRlbnRpZmllcih0aGlzLnJlc3RvcmF0aW9uSWRlbnRpZmllcilcbiAgfVxuXG4gIGdldCBzaWxlbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNTYW1lUGFnZVxuICB9XG5cbiAgc3RhcnQoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUgPT0gVmlzaXRTdGF0ZS5pbml0aWFsaXplZCkge1xuICAgICAgdGhpcy5yZWNvcmRUaW1pbmdNZXRyaWMoVGltaW5nTWV0cmljLnZpc2l0U3RhcnQpO1xuICAgICAgdGhpcy5zdGF0ZSA9IFZpc2l0U3RhdGUuc3RhcnRlZDtcbiAgICAgIHRoaXMuYWRhcHRlci52aXNpdFN0YXJ0ZWQodGhpcyk7XG4gICAgICB0aGlzLmRlbGVnYXRlLnZpc2l0U3RhcnRlZCh0aGlzKTtcbiAgICB9XG4gIH1cblxuICBjYW5jZWwoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUgPT0gVmlzaXRTdGF0ZS5zdGFydGVkKSB7XG4gICAgICBpZiAodGhpcy5yZXF1ZXN0KSB7XG4gICAgICAgIHRoaXMucmVxdWVzdC5jYW5jZWwoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY2FuY2VsUmVuZGVyKCk7XG4gICAgICB0aGlzLnN0YXRlID0gVmlzaXRTdGF0ZS5jYW5jZWxlZDtcbiAgICB9XG4gIH1cblxuICBjb21wbGV0ZSgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZSA9PSBWaXNpdFN0YXRlLnN0YXJ0ZWQpIHtcbiAgICAgIHRoaXMucmVjb3JkVGltaW5nTWV0cmljKFRpbWluZ01ldHJpYy52aXNpdEVuZCk7XG4gICAgICB0aGlzLmFkYXB0ZXIudmlzaXRDb21wbGV0ZWQodGhpcyk7XG4gICAgICB0aGlzLnN0YXRlID0gVmlzaXRTdGF0ZS5jb21wbGV0ZWQ7XG4gICAgICB0aGlzLmZvbGxvd1JlZGlyZWN0KCk7XG5cbiAgICAgIGlmICghdGhpcy5mb2xsb3dlZFJlZGlyZWN0KSB7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUudmlzaXRDb21wbGV0ZWQodGhpcyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZmFpbCgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZSA9PSBWaXNpdFN0YXRlLnN0YXJ0ZWQpIHtcbiAgICAgIHRoaXMuc3RhdGUgPSBWaXNpdFN0YXRlLmZhaWxlZDtcbiAgICAgIHRoaXMuYWRhcHRlci52aXNpdEZhaWxlZCh0aGlzKTtcbiAgICAgIHRoaXMuZGVsZWdhdGUudmlzaXRDb21wbGV0ZWQodGhpcyk7XG4gICAgfVxuICB9XG5cbiAgY2hhbmdlSGlzdG9yeSgpIHtcbiAgICBpZiAoIXRoaXMuaGlzdG9yeUNoYW5nZWQgJiYgdGhpcy51cGRhdGVIaXN0b3J5KSB7XG4gICAgICBjb25zdCBhY3Rpb25Gb3JIaXN0b3J5ID0gdGhpcy5sb2NhdGlvbi5ocmVmID09PSB0aGlzLnJlZmVycmVyPy5ocmVmID8gXCJyZXBsYWNlXCIgOiB0aGlzLmFjdGlvbjtcbiAgICAgIGNvbnN0IG1ldGhvZCA9IGdldEhpc3RvcnlNZXRob2RGb3JBY3Rpb24oYWN0aW9uRm9ySGlzdG9yeSk7XG4gICAgICB0aGlzLmhpc3RvcnkudXBkYXRlKG1ldGhvZCwgdGhpcy5sb2NhdGlvbiwgdGhpcy5yZXN0b3JhdGlvbklkZW50aWZpZXIpO1xuICAgICAgdGhpcy5oaXN0b3J5Q2hhbmdlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgaXNzdWVSZXF1ZXN0KCkge1xuICAgIGlmICh0aGlzLmhhc1ByZWxvYWRlZFJlc3BvbnNlKCkpIHtcbiAgICAgIHRoaXMuc2ltdWxhdGVSZXF1ZXN0KCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnNob3VsZElzc3VlUmVxdWVzdCgpICYmICF0aGlzLnJlcXVlc3QpIHtcbiAgICAgIHRoaXMucmVxdWVzdCA9IG5ldyBGZXRjaFJlcXVlc3QodGhpcywgRmV0Y2hNZXRob2QuZ2V0LCB0aGlzLmxvY2F0aW9uKTtcbiAgICAgIHRoaXMucmVxdWVzdC5wZXJmb3JtKCk7XG4gICAgfVxuICB9XG5cbiAgc2ltdWxhdGVSZXF1ZXN0KCkge1xuICAgIGlmICh0aGlzLnJlc3BvbnNlKSB7XG4gICAgICB0aGlzLnN0YXJ0UmVxdWVzdCgpO1xuICAgICAgdGhpcy5yZWNvcmRSZXNwb25zZSgpO1xuICAgICAgdGhpcy5maW5pc2hSZXF1ZXN0KCk7XG4gICAgfVxuICB9XG5cbiAgc3RhcnRSZXF1ZXN0KCkge1xuICAgIHRoaXMucmVjb3JkVGltaW5nTWV0cmljKFRpbWluZ01ldHJpYy5yZXF1ZXN0U3RhcnQpO1xuICAgIHRoaXMuYWRhcHRlci52aXNpdFJlcXVlc3RTdGFydGVkKHRoaXMpO1xuICB9XG5cbiAgcmVjb3JkUmVzcG9uc2UocmVzcG9uc2UgPSB0aGlzLnJlc3BvbnNlKSB7XG4gICAgdGhpcy5yZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgIGlmIChyZXNwb25zZSkge1xuICAgICAgY29uc3QgeyBzdGF0dXNDb2RlIH0gPSByZXNwb25zZTtcbiAgICAgIGlmIChpc1N1Y2Nlc3NmdWwoc3RhdHVzQ29kZSkpIHtcbiAgICAgICAgdGhpcy5hZGFwdGVyLnZpc2l0UmVxdWVzdENvbXBsZXRlZCh0aGlzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYWRhcHRlci52aXNpdFJlcXVlc3RGYWlsZWRXaXRoU3RhdHVzQ29kZSh0aGlzLCBzdGF0dXNDb2RlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmaW5pc2hSZXF1ZXN0KCkge1xuICAgIHRoaXMucmVjb3JkVGltaW5nTWV0cmljKFRpbWluZ01ldHJpYy5yZXF1ZXN0RW5kKTtcbiAgICB0aGlzLmFkYXB0ZXIudmlzaXRSZXF1ZXN0RmluaXNoZWQodGhpcyk7XG4gIH1cblxuICBsb2FkUmVzcG9uc2UoKSB7XG4gICAgaWYgKHRoaXMucmVzcG9uc2UpIHtcbiAgICAgIGNvbnN0IHsgc3RhdHVzQ29kZSwgcmVzcG9uc2VIVE1MIH0gPSB0aGlzLnJlc3BvbnNlO1xuICAgICAgdGhpcy5yZW5kZXIoYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5zaG91bGRDYWNoZVNuYXBzaG90KSB0aGlzLmNhY2hlU25hcHNob3QoKTtcbiAgICAgICAgaWYgKHRoaXMudmlldy5yZW5kZXJQcm9taXNlKSBhd2FpdCB0aGlzLnZpZXcucmVuZGVyUHJvbWlzZTtcblxuICAgICAgICBpZiAoaXNTdWNjZXNzZnVsKHN0YXR1c0NvZGUpICYmIHJlc3BvbnNlSFRNTCAhPSBudWxsKSB7XG4gICAgICAgICAgY29uc3Qgc25hcHNob3QgPSBQYWdlU25hcHNob3QuZnJvbUhUTUxTdHJpbmcocmVzcG9uc2VIVE1MKTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlbmRlclBhZ2VTbmFwc2hvdChzbmFwc2hvdCwgZmFsc2UpO1xuXG4gICAgICAgICAgdGhpcy5hZGFwdGVyLnZpc2l0UmVuZGVyZWQodGhpcyk7XG4gICAgICAgICAgdGhpcy5jb21wbGV0ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF3YWl0IHRoaXMudmlldy5yZW5kZXJFcnJvcihQYWdlU25hcHNob3QuZnJvbUhUTUxTdHJpbmcocmVzcG9uc2VIVE1MKSwgdGhpcyk7XG4gICAgICAgICAgdGhpcy5hZGFwdGVyLnZpc2l0UmVuZGVyZWQodGhpcyk7XG4gICAgICAgICAgdGhpcy5mYWlsKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGdldENhY2hlZFNuYXBzaG90KCkge1xuICAgIGNvbnN0IHNuYXBzaG90ID0gdGhpcy52aWV3LmdldENhY2hlZFNuYXBzaG90Rm9yTG9jYXRpb24odGhpcy5sb2NhdGlvbikgfHwgdGhpcy5nZXRQcmVsb2FkZWRTbmFwc2hvdCgpO1xuXG4gICAgaWYgKHNuYXBzaG90ICYmICghZ2V0QW5jaG9yKHRoaXMubG9jYXRpb24pIHx8IHNuYXBzaG90Lmhhc0FuY2hvcihnZXRBbmNob3IodGhpcy5sb2NhdGlvbikpKSkge1xuICAgICAgaWYgKHRoaXMuYWN0aW9uID09IFwicmVzdG9yZVwiIHx8IHNuYXBzaG90LmlzUHJldmlld2FibGUpIHtcbiAgICAgICAgcmV0dXJuIHNuYXBzaG90XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0UHJlbG9hZGVkU25hcHNob3QoKSB7XG4gICAgaWYgKHRoaXMuc25hcHNob3RIVE1MKSB7XG4gICAgICByZXR1cm4gUGFnZVNuYXBzaG90LmZyb21IVE1MU3RyaW5nKHRoaXMuc25hcHNob3RIVE1MKVxuICAgIH1cbiAgfVxuXG4gIGhhc0NhY2hlZFNuYXBzaG90KCkge1xuICAgIHJldHVybiB0aGlzLmdldENhY2hlZFNuYXBzaG90KCkgIT0gbnVsbFxuICB9XG5cbiAgbG9hZENhY2hlZFNuYXBzaG90KCkge1xuICAgIGNvbnN0IHNuYXBzaG90ID0gdGhpcy5nZXRDYWNoZWRTbmFwc2hvdCgpO1xuICAgIGlmIChzbmFwc2hvdCkge1xuICAgICAgY29uc3QgaXNQcmV2aWV3ID0gdGhpcy5zaG91bGRJc3N1ZVJlcXVlc3QoKTtcbiAgICAgIHRoaXMucmVuZGVyKGFzeW5jICgpID0+IHtcbiAgICAgICAgdGhpcy5jYWNoZVNuYXBzaG90KCk7XG4gICAgICAgIGlmICh0aGlzLmlzU2FtZVBhZ2UgfHwgdGhpcy5pc1BhZ2VSZWZyZXNoKSB7XG4gICAgICAgICAgdGhpcy5hZGFwdGVyLnZpc2l0UmVuZGVyZWQodGhpcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHRoaXMudmlldy5yZW5kZXJQcm9taXNlKSBhd2FpdCB0aGlzLnZpZXcucmVuZGVyUHJvbWlzZTtcblxuICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyUGFnZVNuYXBzaG90KHNuYXBzaG90LCBpc1ByZXZpZXcpO1xuXG4gICAgICAgICAgdGhpcy5hZGFwdGVyLnZpc2l0UmVuZGVyZWQodGhpcyk7XG4gICAgICAgICAgaWYgKCFpc1ByZXZpZXcpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcGxldGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZvbGxvd1JlZGlyZWN0KCkge1xuICAgIGlmICh0aGlzLnJlZGlyZWN0ZWRUb0xvY2F0aW9uICYmICF0aGlzLmZvbGxvd2VkUmVkaXJlY3QgJiYgdGhpcy5yZXNwb25zZT8ucmVkaXJlY3RlZCkge1xuICAgICAgdGhpcy5hZGFwdGVyLnZpc2l0UHJvcG9zZWRUb0xvY2F0aW9uKHRoaXMucmVkaXJlY3RlZFRvTG9jYXRpb24sIHtcbiAgICAgICAgYWN0aW9uOiBcInJlcGxhY2VcIixcbiAgICAgICAgcmVzcG9uc2U6IHRoaXMucmVzcG9uc2UsXG4gICAgICAgIHNob3VsZENhY2hlU25hcHNob3Q6IGZhbHNlLFxuICAgICAgICB3aWxsUmVuZGVyOiBmYWxzZVxuICAgICAgfSk7XG4gICAgICB0aGlzLmZvbGxvd2VkUmVkaXJlY3QgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGdvVG9TYW1lUGFnZUFuY2hvcigpIHtcbiAgICBpZiAodGhpcy5pc1NhbWVQYWdlKSB7XG4gICAgICB0aGlzLnJlbmRlcihhc3luYyAoKSA9PiB7XG4gICAgICAgIHRoaXMuY2FjaGVTbmFwc2hvdCgpO1xuICAgICAgICB0aGlzLnBlcmZvcm1TY3JvbGwoKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VIaXN0b3J5KCk7XG4gICAgICAgIHRoaXMuYWRhcHRlci52aXNpdFJlbmRlcmVkKHRoaXMpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLy8gRmV0Y2ggcmVxdWVzdCBkZWxlZ2F0ZVxuXG4gIHByZXBhcmVSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgICBpZiAodGhpcy5hY2NlcHRzU3RyZWFtUmVzcG9uc2UpIHtcbiAgICAgIHJlcXVlc3QuYWNjZXB0UmVzcG9uc2VUeXBlKFN0cmVhbU1lc3NhZ2UuY29udGVudFR5cGUpO1xuICAgIH1cbiAgfVxuXG4gIHJlcXVlc3RTdGFydGVkKCkge1xuICAgIHRoaXMuc3RhcnRSZXF1ZXN0KCk7XG4gIH1cblxuICByZXF1ZXN0UHJldmVudGVkSGFuZGxpbmdSZXNwb25zZShfcmVxdWVzdCwgX3Jlc3BvbnNlKSB7fVxuXG4gIGFzeW5jIHJlcXVlc3RTdWNjZWVkZWRXaXRoUmVzcG9uc2UocmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgICBjb25zdCByZXNwb25zZUhUTUwgPSBhd2FpdCByZXNwb25zZS5yZXNwb25zZUhUTUw7XG4gICAgY29uc3QgeyByZWRpcmVjdGVkLCBzdGF0dXNDb2RlIH0gPSByZXNwb25zZTtcbiAgICBpZiAocmVzcG9uc2VIVE1MID09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5yZWNvcmRSZXNwb25zZSh7XG4gICAgICAgIHN0YXR1c0NvZGU6IFN5c3RlbVN0YXR1c0NvZGUuY29udGVudFR5cGVNaXNtYXRjaCxcbiAgICAgICAgcmVkaXJlY3RlZFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVkaXJlY3RlZFRvTG9jYXRpb24gPSByZXNwb25zZS5yZWRpcmVjdGVkID8gcmVzcG9uc2UubG9jYXRpb24gOiB1bmRlZmluZWQ7XG4gICAgICB0aGlzLnJlY29yZFJlc3BvbnNlKHsgc3RhdHVzQ29kZTogc3RhdHVzQ29kZSwgcmVzcG9uc2VIVE1MLCByZWRpcmVjdGVkIH0pO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlcXVlc3RGYWlsZWRXaXRoUmVzcG9uc2UocmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgICBjb25zdCByZXNwb25zZUhUTUwgPSBhd2FpdCByZXNwb25zZS5yZXNwb25zZUhUTUw7XG4gICAgY29uc3QgeyByZWRpcmVjdGVkLCBzdGF0dXNDb2RlIH0gPSByZXNwb25zZTtcbiAgICBpZiAocmVzcG9uc2VIVE1MID09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5yZWNvcmRSZXNwb25zZSh7XG4gICAgICAgIHN0YXR1c0NvZGU6IFN5c3RlbVN0YXR1c0NvZGUuY29udGVudFR5cGVNaXNtYXRjaCxcbiAgICAgICAgcmVkaXJlY3RlZFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVjb3JkUmVzcG9uc2UoeyBzdGF0dXNDb2RlOiBzdGF0dXNDb2RlLCByZXNwb25zZUhUTUwsIHJlZGlyZWN0ZWQgfSk7XG4gICAgfVxuICB9XG5cbiAgcmVxdWVzdEVycm9yZWQoX3JlcXVlc3QsIF9lcnJvcikge1xuICAgIHRoaXMucmVjb3JkUmVzcG9uc2Uoe1xuICAgICAgc3RhdHVzQ29kZTogU3lzdGVtU3RhdHVzQ29kZS5uZXR3b3JrRmFpbHVyZSxcbiAgICAgIHJlZGlyZWN0ZWQ6IGZhbHNlXG4gICAgfSk7XG4gIH1cblxuICByZXF1ZXN0RmluaXNoZWQoKSB7XG4gICAgdGhpcy5maW5pc2hSZXF1ZXN0KCk7XG4gIH1cblxuICAvLyBTY3JvbGxpbmdcblxuICBwZXJmb3JtU2Nyb2xsKCkge1xuICAgIGlmICghdGhpcy5zY3JvbGxlZCAmJiAhdGhpcy52aWV3LmZvcmNlUmVsb2FkZWQgJiYgIXRoaXMudmlldy5zaG91bGRQcmVzZXJ2ZVNjcm9sbFBvc2l0aW9uKHRoaXMpKSB7XG4gICAgICBpZiAodGhpcy5hY3Rpb24gPT0gXCJyZXN0b3JlXCIpIHtcbiAgICAgICAgdGhpcy5zY3JvbGxUb1Jlc3RvcmVkUG9zaXRpb24oKSB8fCB0aGlzLnNjcm9sbFRvQW5jaG9yKCkgfHwgdGhpcy52aWV3LnNjcm9sbFRvVG9wKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNjcm9sbFRvQW5jaG9yKCkgfHwgdGhpcy52aWV3LnNjcm9sbFRvVG9wKCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pc1NhbWVQYWdlKSB7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUudmlzaXRTY3JvbGxlZFRvU2FtZVBhZ2VMb2NhdGlvbih0aGlzLnZpZXcubGFzdFJlbmRlcmVkTG9jYXRpb24sIHRoaXMubG9jYXRpb24pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNjcm9sbGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBzY3JvbGxUb1Jlc3RvcmVkUG9zaXRpb24oKSB7XG4gICAgY29uc3QgeyBzY3JvbGxQb3NpdGlvbiB9ID0gdGhpcy5yZXN0b3JhdGlvbkRhdGE7XG4gICAgaWYgKHNjcm9sbFBvc2l0aW9uKSB7XG4gICAgICB0aGlzLnZpZXcuc2Nyb2xsVG9Qb3NpdGlvbihzY3JvbGxQb3NpdGlvbik7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIHNjcm9sbFRvQW5jaG9yKCkge1xuICAgIGNvbnN0IGFuY2hvciA9IGdldEFuY2hvcih0aGlzLmxvY2F0aW9uKTtcbiAgICBpZiAoYW5jaG9yICE9IG51bGwpIHtcbiAgICAgIHRoaXMudmlldy5zY3JvbGxUb0FuY2hvcihhbmNob3IpO1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cblxuICAvLyBJbnN0cnVtZW50YXRpb25cblxuICByZWNvcmRUaW1pbmdNZXRyaWMobWV0cmljKSB7XG4gICAgdGhpcy50aW1pbmdNZXRyaWNzW21ldHJpY10gPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgfVxuXG4gIGdldFRpbWluZ01ldHJpY3MoKSB7XG4gICAgcmV0dXJuIHsgLi4udGhpcy50aW1pbmdNZXRyaWNzIH1cbiAgfVxuXG4gIC8vIFByaXZhdGVcblxuICBoYXNQcmVsb2FkZWRSZXNwb25zZSgpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRoaXMucmVzcG9uc2UgPT0gXCJvYmplY3RcIlxuICB9XG5cbiAgc2hvdWxkSXNzdWVSZXF1ZXN0KCkge1xuICAgIGlmICh0aGlzLmlzU2FtZVBhZ2UpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0gZWxzZSBpZiAodGhpcy5hY3Rpb24gPT0gXCJyZXN0b3JlXCIpIHtcbiAgICAgIHJldHVybiAhdGhpcy5oYXNDYWNoZWRTbmFwc2hvdCgpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLndpbGxSZW5kZXJcbiAgICB9XG4gIH1cblxuICBjYWNoZVNuYXBzaG90KCkge1xuICAgIGlmICghdGhpcy5zbmFwc2hvdENhY2hlZCkge1xuICAgICAgdGhpcy52aWV3LmNhY2hlU25hcHNob3QodGhpcy5zbmFwc2hvdCkudGhlbigoc25hcHNob3QpID0+IHNuYXBzaG90ICYmIHRoaXMudmlzaXRDYWNoZWRTbmFwc2hvdChzbmFwc2hvdCkpO1xuICAgICAgdGhpcy5zbmFwc2hvdENhY2hlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmVuZGVyKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jYW5jZWxSZW5kZXIoKTtcbiAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy5mcmFtZSA9XG4gICAgICAgIGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gXCJoaWRkZW5cIiA/IHNldFRpbWVvdXQoKCkgPT4gcmVzb2x2ZSgpLCAwKSA6IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiByZXNvbHZlKCkpO1xuICAgIH0pO1xuICAgIGF3YWl0IGNhbGxiYWNrKCk7XG4gICAgZGVsZXRlIHRoaXMuZnJhbWU7XG4gIH1cblxuICBhc3luYyByZW5kZXJQYWdlU25hcHNob3Qoc25hcHNob3QsIGlzUHJldmlldykge1xuICAgIGF3YWl0IHRoaXMudmlld1RyYW5zaXRpb25lci5yZW5kZXJDaGFuZ2UodGhpcy52aWV3LnNob3VsZFRyYW5zaXRpb25UbyhzbmFwc2hvdCksIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRoaXMudmlldy5yZW5kZXJQYWdlKHNuYXBzaG90LCBpc1ByZXZpZXcsIHRoaXMud2lsbFJlbmRlciwgdGhpcyk7XG4gICAgICB0aGlzLnBlcmZvcm1TY3JvbGwoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNhbmNlbFJlbmRlcigpIHtcbiAgICBpZiAodGhpcy5mcmFtZSkge1xuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5mcmFtZSk7XG4gICAgICBkZWxldGUgdGhpcy5mcmFtZTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNTdWNjZXNzZnVsKHN0YXR1c0NvZGUpIHtcbiAgcmV0dXJuIHN0YXR1c0NvZGUgPj0gMjAwICYmIHN0YXR1c0NvZGUgPCAzMDBcbn1cblxuY2xhc3MgQnJvd3NlckFkYXB0ZXIge1xuICBwcm9ncmVzc0JhciA9IG5ldyBQcm9ncmVzc0JhcigpXG5cbiAgY29uc3RydWN0b3Ioc2Vzc2lvbikge1xuICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG4gIH1cblxuICB2aXNpdFByb3Bvc2VkVG9Mb2NhdGlvbihsb2NhdGlvbiwgb3B0aW9ucykge1xuICAgIGlmIChsb2NhdGlvbklzVmlzaXRhYmxlKGxvY2F0aW9uLCB0aGlzLm5hdmlnYXRvci5yb290TG9jYXRpb24pKSB7XG4gICAgICB0aGlzLm5hdmlnYXRvci5zdGFydFZpc2l0KGxvY2F0aW9uLCBvcHRpb25zPy5yZXN0b3JhdGlvbklkZW50aWZpZXIgfHwgdXVpZCgpLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBsb2NhdGlvbi50b1N0cmluZygpO1xuICAgIH1cbiAgfVxuXG4gIHZpc2l0U3RhcnRlZCh2aXNpdCkge1xuICAgIHRoaXMubG9jYXRpb24gPSB2aXNpdC5sb2NhdGlvbjtcbiAgICB0aGlzLnJlZGlyZWN0ZWRUb0xvY2F0aW9uID0gbnVsbDtcblxuICAgIHZpc2l0LmxvYWRDYWNoZWRTbmFwc2hvdCgpO1xuICAgIHZpc2l0Lmlzc3VlUmVxdWVzdCgpO1xuICAgIHZpc2l0LmdvVG9TYW1lUGFnZUFuY2hvcigpO1xuICB9XG5cbiAgdmlzaXRSZXF1ZXN0U3RhcnRlZCh2aXNpdCkge1xuICAgIHRoaXMucHJvZ3Jlc3NCYXIuc2V0VmFsdWUoMCk7XG4gICAgaWYgKHZpc2l0Lmhhc0NhY2hlZFNuYXBzaG90KCkgfHwgdmlzaXQuYWN0aW9uICE9IFwicmVzdG9yZVwiKSB7XG4gICAgICB0aGlzLnNob3dWaXNpdFByb2dyZXNzQmFyQWZ0ZXJEZWxheSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNob3dQcm9ncmVzc0JhcigpO1xuICAgIH1cbiAgfVxuXG4gIHZpc2l0UmVxdWVzdENvbXBsZXRlZCh2aXNpdCkge1xuICAgIHZpc2l0LmxvYWRSZXNwb25zZSgpO1xuXG4gICAgaWYgKHZpc2l0LnJlc3BvbnNlLnJlZGlyZWN0ZWQpIHtcbiAgICAgIHRoaXMucmVkaXJlY3RlZFRvTG9jYXRpb24gPSB2aXNpdC5yZWRpcmVjdGVkVG9Mb2NhdGlvbjtcbiAgICB9XG4gIH1cblxuICB2aXNpdFJlcXVlc3RGYWlsZWRXaXRoU3RhdHVzQ29kZSh2aXNpdCwgc3RhdHVzQ29kZSkge1xuICAgIHN3aXRjaCAoc3RhdHVzQ29kZSkge1xuICAgICAgY2FzZSBTeXN0ZW1TdGF0dXNDb2RlLm5ldHdvcmtGYWlsdXJlOlxuICAgICAgY2FzZSBTeXN0ZW1TdGF0dXNDb2RlLnRpbWVvdXRGYWlsdXJlOlxuICAgICAgY2FzZSBTeXN0ZW1TdGF0dXNDb2RlLmNvbnRlbnRUeXBlTWlzbWF0Y2g6XG4gICAgICAgIHJldHVybiB0aGlzLnJlbG9hZCh7XG4gICAgICAgICAgcmVhc29uOiBcInJlcXVlc3RfZmFpbGVkXCIsXG4gICAgICAgICAgY29udGV4dDoge1xuICAgICAgICAgICAgc3RhdHVzQ29kZVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB2aXNpdC5sb2FkUmVzcG9uc2UoKVxuICAgIH1cbiAgfVxuXG4gIHZpc2l0UmVxdWVzdEZpbmlzaGVkKF92aXNpdCkge31cblxuICB2aXNpdENvbXBsZXRlZChfdmlzaXQpIHtcbiAgICB0aGlzLnByb2dyZXNzQmFyLnNldFZhbHVlKDEpO1xuICAgIHRoaXMuaGlkZVZpc2l0UHJvZ3Jlc3NCYXIoKTtcbiAgfVxuXG4gIHBhZ2VJbnZhbGlkYXRlZChyZWFzb24pIHtcbiAgICB0aGlzLnJlbG9hZChyZWFzb24pO1xuICB9XG5cbiAgdmlzaXRGYWlsZWQoX3Zpc2l0KSB7XG4gICAgdGhpcy5wcm9ncmVzc0Jhci5zZXRWYWx1ZSgxKTtcbiAgICB0aGlzLmhpZGVWaXNpdFByb2dyZXNzQmFyKCk7XG4gIH1cblxuICB2aXNpdFJlbmRlcmVkKF92aXNpdCkge31cblxuICAvLyBMaW5rIHByZWZldGNoaW5nXG5cbiAgbGlua1ByZWZldGNoaW5nSXNFbmFibGVkRm9yTG9jYXRpb24obG9jYXRpb24pIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgLy8gRm9ybSBTdWJtaXNzaW9uIERlbGVnYXRlXG5cbiAgZm9ybVN1Ym1pc3Npb25TdGFydGVkKF9mb3JtU3VibWlzc2lvbikge1xuICAgIHRoaXMucHJvZ3Jlc3NCYXIuc2V0VmFsdWUoMCk7XG4gICAgdGhpcy5zaG93Rm9ybVByb2dyZXNzQmFyQWZ0ZXJEZWxheSgpO1xuICB9XG5cbiAgZm9ybVN1Ym1pc3Npb25GaW5pc2hlZChfZm9ybVN1Ym1pc3Npb24pIHtcbiAgICB0aGlzLnByb2dyZXNzQmFyLnNldFZhbHVlKDEpO1xuICAgIHRoaXMuaGlkZUZvcm1Qcm9ncmVzc0JhcigpO1xuICB9XG5cbiAgLy8gUHJpdmF0ZVxuXG4gIHNob3dWaXNpdFByb2dyZXNzQmFyQWZ0ZXJEZWxheSgpIHtcbiAgICB0aGlzLnZpc2l0UHJvZ3Jlc3NCYXJUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQodGhpcy5zaG93UHJvZ3Jlc3NCYXIsIHRoaXMuc2Vzc2lvbi5wcm9ncmVzc0JhckRlbGF5KTtcbiAgfVxuXG4gIGhpZGVWaXNpdFByb2dyZXNzQmFyKCkge1xuICAgIHRoaXMucHJvZ3Jlc3NCYXIuaGlkZSgpO1xuICAgIGlmICh0aGlzLnZpc2l0UHJvZ3Jlc3NCYXJUaW1lb3V0ICE9IG51bGwpIHtcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy52aXNpdFByb2dyZXNzQmFyVGltZW91dCk7XG4gICAgICBkZWxldGUgdGhpcy52aXNpdFByb2dyZXNzQmFyVGltZW91dDtcbiAgICB9XG4gIH1cblxuICBzaG93Rm9ybVByb2dyZXNzQmFyQWZ0ZXJEZWxheSgpIHtcbiAgICBpZiAodGhpcy5mb3JtUHJvZ3Jlc3NCYXJUaW1lb3V0ID09IG51bGwpIHtcbiAgICAgIHRoaXMuZm9ybVByb2dyZXNzQmFyVGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KHRoaXMuc2hvd1Byb2dyZXNzQmFyLCB0aGlzLnNlc3Npb24ucHJvZ3Jlc3NCYXJEZWxheSk7XG4gICAgfVxuICB9XG5cbiAgaGlkZUZvcm1Qcm9ncmVzc0JhcigpIHtcbiAgICB0aGlzLnByb2dyZXNzQmFyLmhpZGUoKTtcbiAgICBpZiAodGhpcy5mb3JtUHJvZ3Jlc3NCYXJUaW1lb3V0ICE9IG51bGwpIHtcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5mb3JtUHJvZ3Jlc3NCYXJUaW1lb3V0KTtcbiAgICAgIGRlbGV0ZSB0aGlzLmZvcm1Qcm9ncmVzc0JhclRpbWVvdXQ7XG4gICAgfVxuICB9XG5cbiAgc2hvd1Byb2dyZXNzQmFyID0gKCkgPT4ge1xuICAgIHRoaXMucHJvZ3Jlc3NCYXIuc2hvdygpO1xuICB9XG5cbiAgcmVsb2FkKHJlYXNvbikge1xuICAgIGRpc3BhdGNoKFwidHVyYm86cmVsb2FkXCIsIHsgZGV0YWlsOiByZWFzb24gfSk7XG5cbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICh0aGlzLnJlZGlyZWN0ZWRUb0xvY2F0aW9uIHx8IHRoaXMubG9jYXRpb24pPy50b1N0cmluZygpIHx8IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICB9XG5cbiAgZ2V0IG5hdmlnYXRvcigpIHtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm5hdmlnYXRvclxuICB9XG59XG5cbmNsYXNzIENhY2hlT2JzZXJ2ZXIge1xuICBzZWxlY3RvciA9IFwiW2RhdGEtdHVyYm8tdGVtcG9yYXJ5XVwiXG4gIGRlcHJlY2F0ZWRTZWxlY3RvciA9IFwiW2RhdGEtdHVyYm8tY2FjaGU9ZmFsc2VdXCJcblxuICBzdGFydGVkID0gZmFsc2VcblxuICBzdGFydCgpIHtcbiAgICBpZiAoIXRoaXMuc3RhcnRlZCkge1xuICAgICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcbiAgICAgIGFkZEV2ZW50TGlzdGVuZXIoXCJ0dXJibzpiZWZvcmUtY2FjaGVcIiwgdGhpcy5yZW1vdmVUZW1wb3JhcnlFbGVtZW50cywgZmFsc2UpO1xuICAgIH1cbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgICByZW1vdmVFdmVudExpc3RlbmVyKFwidHVyYm86YmVmb3JlLWNhY2hlXCIsIHRoaXMucmVtb3ZlVGVtcG9yYXJ5RWxlbWVudHMsIGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICByZW1vdmVUZW1wb3JhcnlFbGVtZW50cyA9IChfZXZlbnQpID0+IHtcbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgdGhpcy50ZW1wb3JhcnlFbGVtZW50cykge1xuICAgICAgZWxlbWVudC5yZW1vdmUoKTtcbiAgICB9XG4gIH1cblxuICBnZXQgdGVtcG9yYXJ5RWxlbWVudHMoKSB7XG4gICAgcmV0dXJuIFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuc2VsZWN0b3IpLCAuLi50aGlzLnRlbXBvcmFyeUVsZW1lbnRzV2l0aERlcHJlY2F0aW9uXVxuICB9XG5cbiAgZ2V0IHRlbXBvcmFyeUVsZW1lbnRzV2l0aERlcHJlY2F0aW9uKCkge1xuICAgIGNvbnN0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLmRlcHJlY2F0ZWRTZWxlY3Rvcik7XG5cbiAgICBpZiAoZWxlbWVudHMubGVuZ3RoKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGBUaGUgJHt0aGlzLmRlcHJlY2F0ZWRTZWxlY3Rvcn0gc2VsZWN0b3IgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHZlcnNpb24uIFVzZSAke3RoaXMuc2VsZWN0b3J9IGluc3RlYWQuYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gWy4uLmVsZW1lbnRzXVxuICB9XG59XG5cbmNsYXNzIEZyYW1lUmVkaXJlY3RvciB7XG4gIGNvbnN0cnVjdG9yKHNlc3Npb24sIGVsZW1lbnQpIHtcbiAgICB0aGlzLnNlc3Npb24gPSBzZXNzaW9uO1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5saW5rSW50ZXJjZXB0b3IgPSBuZXcgTGlua0ludGVyY2VwdG9yKHRoaXMsIGVsZW1lbnQpO1xuICAgIHRoaXMuZm9ybVN1Ym1pdE9ic2VydmVyID0gbmV3IEZvcm1TdWJtaXRPYnNlcnZlcih0aGlzLCBlbGVtZW50KTtcbiAgfVxuXG4gIHN0YXJ0KCkge1xuICAgIHRoaXMubGlua0ludGVyY2VwdG9yLnN0YXJ0KCk7XG4gICAgdGhpcy5mb3JtU3VibWl0T2JzZXJ2ZXIuc3RhcnQoKTtcbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgdGhpcy5saW5rSW50ZXJjZXB0b3Iuc3RvcCgpO1xuICAgIHRoaXMuZm9ybVN1Ym1pdE9ic2VydmVyLnN0b3AoKTtcbiAgfVxuXG4gIC8vIExpbmsgaW50ZXJjZXB0b3IgZGVsZWdhdGVcblxuICBzaG91bGRJbnRlcmNlcHRMaW5rQ2xpY2soZWxlbWVudCwgX2xvY2F0aW9uLCBfZXZlbnQpIHtcbiAgICByZXR1cm4gdGhpcy4jc2hvdWxkUmVkaXJlY3QoZWxlbWVudClcbiAgfVxuXG4gIGxpbmtDbGlja0ludGVyY2VwdGVkKGVsZW1lbnQsIHVybCwgZXZlbnQpIHtcbiAgICBjb25zdCBmcmFtZSA9IHRoaXMuI2ZpbmRGcmFtZUVsZW1lbnQoZWxlbWVudCk7XG4gICAgaWYgKGZyYW1lKSB7XG4gICAgICBmcmFtZS5kZWxlZ2F0ZS5saW5rQ2xpY2tJbnRlcmNlcHRlZChlbGVtZW50LCB1cmwsIGV2ZW50KTtcbiAgICB9XG4gIH1cblxuICAvLyBGb3JtIHN1Ym1pdCBvYnNlcnZlciBkZWxlZ2F0ZVxuXG4gIHdpbGxTdWJtaXRGb3JtKGVsZW1lbnQsIHN1Ym1pdHRlcikge1xuICAgIHJldHVybiAoXG4gICAgICBlbGVtZW50LmNsb3Nlc3QoXCJ0dXJiby1mcmFtZVwiKSA9PSBudWxsICYmXG4gICAgICB0aGlzLiNzaG91bGRTdWJtaXQoZWxlbWVudCwgc3VibWl0dGVyKSAmJlxuICAgICAgdGhpcy4jc2hvdWxkUmVkaXJlY3QoZWxlbWVudCwgc3VibWl0dGVyKVxuICAgIClcbiAgfVxuXG4gIGZvcm1TdWJtaXR0ZWQoZWxlbWVudCwgc3VibWl0dGVyKSB7XG4gICAgY29uc3QgZnJhbWUgPSB0aGlzLiNmaW5kRnJhbWVFbGVtZW50KGVsZW1lbnQsIHN1Ym1pdHRlcik7XG4gICAgaWYgKGZyYW1lKSB7XG4gICAgICBmcmFtZS5kZWxlZ2F0ZS5mb3JtU3VibWl0dGVkKGVsZW1lbnQsIHN1Ym1pdHRlcik7XG4gICAgfVxuICB9XG5cbiAgI3Nob3VsZFN1Ym1pdChmb3JtLCBzdWJtaXR0ZXIpIHtcbiAgICBjb25zdCBhY3Rpb24gPSBnZXRBY3Rpb24kMShmb3JtLCBzdWJtaXR0ZXIpO1xuICAgIGNvbnN0IG1ldGEgPSB0aGlzLmVsZW1lbnQub3duZXJEb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBtZXRhW25hbWU9XCJ0dXJiby1yb290XCJdYCk7XG4gICAgY29uc3Qgcm9vdExvY2F0aW9uID0gZXhwYW5kVVJMKG1ldGE/LmNvbnRlbnQgPz8gXCIvXCIpO1xuXG4gICAgcmV0dXJuIHRoaXMuI3Nob3VsZFJlZGlyZWN0KGZvcm0sIHN1Ym1pdHRlcikgJiYgbG9jYXRpb25Jc1Zpc2l0YWJsZShhY3Rpb24sIHJvb3RMb2NhdGlvbilcbiAgfVxuXG4gICNzaG91bGRSZWRpcmVjdChlbGVtZW50LCBzdWJtaXR0ZXIpIHtcbiAgICBjb25zdCBpc05hdmlnYXRhYmxlID1cbiAgICAgIGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRm9ybUVsZW1lbnRcbiAgICAgICAgPyB0aGlzLnNlc3Npb24uc3VibWlzc2lvbklzTmF2aWdhdGFibGUoZWxlbWVudCwgc3VibWl0dGVyKVxuICAgICAgICA6IHRoaXMuc2Vzc2lvbi5lbGVtZW50SXNOYXZpZ2F0YWJsZShlbGVtZW50KTtcblxuICAgIGlmIChpc05hdmlnYXRhYmxlKSB7XG4gICAgICBjb25zdCBmcmFtZSA9IHRoaXMuI2ZpbmRGcmFtZUVsZW1lbnQoZWxlbWVudCwgc3VibWl0dGVyKTtcbiAgICAgIHJldHVybiBmcmFtZSA/IGZyYW1lICE9IGVsZW1lbnQuY2xvc2VzdChcInR1cmJvLWZyYW1lXCIpIDogZmFsc2VcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG5cbiAgI2ZpbmRGcmFtZUVsZW1lbnQoZWxlbWVudCwgc3VibWl0dGVyKSB7XG4gICAgY29uc3QgaWQgPSBzdWJtaXR0ZXI/LmdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm8tZnJhbWVcIikgfHwgZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLWZyYW1lXCIpO1xuICAgIGlmIChpZCAmJiBpZCAhPSBcIl90b3BcIikge1xuICAgICAgY29uc3QgZnJhbWUgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aWR9Om5vdChbZGlzYWJsZWRdKWApO1xuICAgICAgaWYgKGZyYW1lIGluc3RhbmNlb2YgRnJhbWVFbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBmcmFtZVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBIaXN0b3J5IHtcbiAgbG9jYXRpb25cbiAgcmVzdG9yYXRpb25JZGVudGlmaWVyID0gdXVpZCgpXG4gIHJlc3RvcmF0aW9uRGF0YSA9IHt9XG4gIHN0YXJ0ZWQgPSBmYWxzZVxuICBwYWdlTG9hZGVkID0gZmFsc2VcbiAgY3VycmVudEluZGV4ID0gMFxuXG4gIGNvbnN0cnVjdG9yKGRlbGVnYXRlKSB7XG4gICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICB9XG5cbiAgc3RhcnQoKSB7XG4gICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgIGFkZEV2ZW50TGlzdGVuZXIoXCJwb3BzdGF0ZVwiLCB0aGlzLm9uUG9wU3RhdGUsIGZhbHNlKTtcbiAgICAgIGFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIHRoaXMub25QYWdlTG9hZCwgZmFsc2UpO1xuICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSBoaXN0b3J5LnN0YXRlPy50dXJibz8ucmVzdG9yYXRpb25JbmRleCB8fCAwO1xuICAgICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMucmVwbGFjZShuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKSk7XG4gICAgfVxuICB9XG5cbiAgc3RvcCgpIHtcbiAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICByZW1vdmVFdmVudExpc3RlbmVyKFwicG9wc3RhdGVcIiwgdGhpcy5vblBvcFN0YXRlLCBmYWxzZSk7XG4gICAgICByZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLCB0aGlzLm9uUGFnZUxvYWQsIGZhbHNlKTtcbiAgICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHB1c2gobG9jYXRpb24sIHJlc3RvcmF0aW9uSWRlbnRpZmllcikge1xuICAgIHRoaXMudXBkYXRlKGhpc3RvcnkucHVzaFN0YXRlLCBsb2NhdGlvbiwgcmVzdG9yYXRpb25JZGVudGlmaWVyKTtcbiAgfVxuXG4gIHJlcGxhY2UobG9jYXRpb24sIHJlc3RvcmF0aW9uSWRlbnRpZmllcikge1xuICAgIHRoaXMudXBkYXRlKGhpc3RvcnkucmVwbGFjZVN0YXRlLCBsb2NhdGlvbiwgcmVzdG9yYXRpb25JZGVudGlmaWVyKTtcbiAgfVxuXG4gIHVwZGF0ZShtZXRob2QsIGxvY2F0aW9uLCByZXN0b3JhdGlvbklkZW50aWZpZXIgPSB1dWlkKCkpIHtcbiAgICBpZiAobWV0aG9kID09PSBoaXN0b3J5LnB1c2hTdGF0ZSkgKyt0aGlzLmN1cnJlbnRJbmRleDtcblxuICAgIGNvbnN0IHN0YXRlID0geyB0dXJibzogeyByZXN0b3JhdGlvbklkZW50aWZpZXIsIHJlc3RvcmF0aW9uSW5kZXg6IHRoaXMuY3VycmVudEluZGV4IH0gfTtcbiAgICBtZXRob2QuY2FsbChoaXN0b3J5LCBzdGF0ZSwgXCJcIiwgbG9jYXRpb24uaHJlZik7XG4gICAgdGhpcy5sb2NhdGlvbiA9IGxvY2F0aW9uO1xuICAgIHRoaXMucmVzdG9yYXRpb25JZGVudGlmaWVyID0gcmVzdG9yYXRpb25JZGVudGlmaWVyO1xuICB9XG5cbiAgLy8gUmVzdG9yYXRpb24gZGF0YVxuXG4gIGdldFJlc3RvcmF0aW9uRGF0YUZvcklkZW50aWZpZXIocmVzdG9yYXRpb25JZGVudGlmaWVyKSB7XG4gICAgcmV0dXJuIHRoaXMucmVzdG9yYXRpb25EYXRhW3Jlc3RvcmF0aW9uSWRlbnRpZmllcl0gfHwge31cbiAgfVxuXG4gIHVwZGF0ZVJlc3RvcmF0aW9uRGF0YShhZGRpdGlvbmFsRGF0YSkge1xuICAgIGNvbnN0IHsgcmVzdG9yYXRpb25JZGVudGlmaWVyIH0gPSB0aGlzO1xuICAgIGNvbnN0IHJlc3RvcmF0aW9uRGF0YSA9IHRoaXMucmVzdG9yYXRpb25EYXRhW3Jlc3RvcmF0aW9uSWRlbnRpZmllcl07XG4gICAgdGhpcy5yZXN0b3JhdGlvbkRhdGFbcmVzdG9yYXRpb25JZGVudGlmaWVyXSA9IHtcbiAgICAgIC4uLnJlc3RvcmF0aW9uRGF0YSxcbiAgICAgIC4uLmFkZGl0aW9uYWxEYXRhXG4gICAgfTtcbiAgfVxuXG4gIC8vIFNjcm9sbCByZXN0b3JhdGlvblxuXG4gIGFzc3VtZUNvbnRyb2xPZlNjcm9sbFJlc3RvcmF0aW9uKCkge1xuICAgIGlmICghdGhpcy5wcmV2aW91c1Njcm9sbFJlc3RvcmF0aW9uKSB7XG4gICAgICB0aGlzLnByZXZpb3VzU2Nyb2xsUmVzdG9yYXRpb24gPSBoaXN0b3J5LnNjcm9sbFJlc3RvcmF0aW9uID8/IFwiYXV0b1wiO1xuICAgICAgaGlzdG9yeS5zY3JvbGxSZXN0b3JhdGlvbiA9IFwibWFudWFsXCI7XG4gICAgfVxuICB9XG5cbiAgcmVsaW5xdWlzaENvbnRyb2xPZlNjcm9sbFJlc3RvcmF0aW9uKCkge1xuICAgIGlmICh0aGlzLnByZXZpb3VzU2Nyb2xsUmVzdG9yYXRpb24pIHtcbiAgICAgIGhpc3Rvcnkuc2Nyb2xsUmVzdG9yYXRpb24gPSB0aGlzLnByZXZpb3VzU2Nyb2xsUmVzdG9yYXRpb247XG4gICAgICBkZWxldGUgdGhpcy5wcmV2aW91c1Njcm9sbFJlc3RvcmF0aW9uO1xuICAgIH1cbiAgfVxuXG4gIC8vIEV2ZW50IGhhbmRsZXJzXG5cbiAgb25Qb3BTdGF0ZSA9IChldmVudCkgPT4ge1xuICAgIGlmICh0aGlzLnNob3VsZEhhbmRsZVBvcFN0YXRlKCkpIHtcbiAgICAgIGNvbnN0IHsgdHVyYm8gfSA9IGV2ZW50LnN0YXRlIHx8IHt9O1xuICAgICAgaWYgKHR1cmJvKSB7XG4gICAgICAgIHRoaXMubG9jYXRpb24gPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcbiAgICAgICAgY29uc3QgeyByZXN0b3JhdGlvbklkZW50aWZpZXIsIHJlc3RvcmF0aW9uSW5kZXggfSA9IHR1cmJvO1xuICAgICAgICB0aGlzLnJlc3RvcmF0aW9uSWRlbnRpZmllciA9IHJlc3RvcmF0aW9uSWRlbnRpZmllcjtcbiAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gcmVzdG9yYXRpb25JbmRleCA+IHRoaXMuY3VycmVudEluZGV4ID8gXCJmb3J3YXJkXCIgOiBcImJhY2tcIjtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZS5oaXN0b3J5UG9wcGVkVG9Mb2NhdGlvbldpdGhSZXN0b3JhdGlvbklkZW50aWZpZXJBbmREaXJlY3Rpb24odGhpcy5sb2NhdGlvbiwgcmVzdG9yYXRpb25JZGVudGlmaWVyLCBkaXJlY3Rpb24pO1xuICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IHJlc3RvcmF0aW9uSW5kZXg7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgb25QYWdlTG9hZCA9IGFzeW5jIChfZXZlbnQpID0+IHtcbiAgICBhd2FpdCBuZXh0TWljcm90YXNrKCk7XG4gICAgdGhpcy5wYWdlTG9hZGVkID0gdHJ1ZTtcbiAgfVxuXG4gIC8vIFByaXZhdGVcblxuICBzaG91bGRIYW5kbGVQb3BTdGF0ZSgpIHtcbiAgICAvLyBTYWZhcmkgZGlzcGF0Y2hlcyBhIHBvcHN0YXRlIGV2ZW50IGFmdGVyIHdpbmRvdydzIGxvYWQgZXZlbnQsIGlnbm9yZSBpdFxuICAgIHJldHVybiB0aGlzLnBhZ2VJc0xvYWRlZCgpXG4gIH1cblxuICBwYWdlSXNMb2FkZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMucGFnZUxvYWRlZCB8fCBkb2N1bWVudC5yZWFkeVN0YXRlID09IFwiY29tcGxldGVcIlxuICB9XG59XG5cbmNsYXNzIExpbmtQcmVmZXRjaE9ic2VydmVyIHtcbiAgc3RhcnRlZCA9IGZhbHNlXG4gICNwcmVmZXRjaGVkTGluayA9IG51bGxcblxuICBjb25zdHJ1Y3RvcihkZWxlZ2F0ZSwgZXZlbnRUYXJnZXQpIHtcbiAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gICAgdGhpcy5ldmVudFRhcmdldCA9IGV2ZW50VGFyZ2V0O1xuICB9XG5cbiAgc3RhcnQoKSB7XG4gICAgaWYgKHRoaXMuc3RhcnRlZCkgcmV0dXJuXG5cbiAgICBpZiAodGhpcy5ldmVudFRhcmdldC5yZWFkeVN0YXRlID09PSBcImxvYWRpbmdcIikge1xuICAgICAgdGhpcy5ldmVudFRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCB0aGlzLiNlbmFibGUsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4jZW5hYmxlKCk7XG4gICAgfVxuICB9XG5cbiAgc3RvcCgpIHtcbiAgICBpZiAoIXRoaXMuc3RhcnRlZCkgcmV0dXJuXG5cbiAgICB0aGlzLmV2ZW50VGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsIHRoaXMuI3RyeVRvUHJlZmV0Y2hSZXF1ZXN0LCB7XG4gICAgICBjYXB0dXJlOiB0cnVlLFxuICAgICAgcGFzc2l2ZTogdHJ1ZVxuICAgIH0pO1xuICAgIHRoaXMuZXZlbnRUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgdGhpcy4jY2FuY2VsUmVxdWVzdElmT2Jzb2xldGUsIHtcbiAgICAgIGNhcHR1cmU6IHRydWUsXG4gICAgICBwYXNzaXZlOiB0cnVlXG4gICAgfSk7XG5cbiAgICB0aGlzLmV2ZW50VGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0dXJibzpiZWZvcmUtZmV0Y2gtcmVxdWVzdFwiLCB0aGlzLiN0cnlUb1VzZVByZWZldGNoZWRSZXF1ZXN0LCB0cnVlKTtcbiAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgfVxuXG4gICNlbmFibGUgPSAoKSA9PiB7XG4gICAgdGhpcy5ldmVudFRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLCB0aGlzLiN0cnlUb1ByZWZldGNoUmVxdWVzdCwge1xuICAgICAgY2FwdHVyZTogdHJ1ZSxcbiAgICAgIHBhc3NpdmU6IHRydWVcbiAgICB9KTtcbiAgICB0aGlzLmV2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIHRoaXMuI2NhbmNlbFJlcXVlc3RJZk9ic29sZXRlLCB7XG4gICAgICBjYXB0dXJlOiB0cnVlLFxuICAgICAgcGFzc2l2ZTogdHJ1ZVxuICAgIH0pO1xuXG4gICAgdGhpcy5ldmVudFRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwidHVyYm86YmVmb3JlLWZldGNoLXJlcXVlc3RcIiwgdGhpcy4jdHJ5VG9Vc2VQcmVmZXRjaGVkUmVxdWVzdCwgdHJ1ZSk7XG4gICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcbiAgfVxuXG4gICN0cnlUb1ByZWZldGNoUmVxdWVzdCA9IChldmVudCkgPT4ge1xuICAgIGlmIChnZXRNZXRhQ29udGVudChcInR1cmJvLXByZWZldGNoXCIpID09PSBcImZhbHNlXCIpIHJldHVyblxuXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuICAgIGNvbnN0IGlzTGluayA9IHRhcmdldC5tYXRjaGVzICYmIHRhcmdldC5tYXRjaGVzKFwiYVtocmVmXTpub3QoW3RhcmdldF49X10pOm5vdChbZG93bmxvYWRdKVwiKTtcblxuICAgIGlmIChpc0xpbmsgJiYgdGhpcy4jaXNQcmVmZXRjaGFibGUodGFyZ2V0KSkge1xuICAgICAgY29uc3QgbGluayA9IHRhcmdldDtcbiAgICAgIGNvbnN0IGxvY2F0aW9uID0gZ2V0TG9jYXRpb25Gb3JMaW5rKGxpbmspO1xuXG4gICAgICBpZiAodGhpcy5kZWxlZ2F0ZS5jYW5QcmVmZXRjaFJlcXVlc3RUb0xvY2F0aW9uKGxpbmssIGxvY2F0aW9uKSkge1xuICAgICAgICB0aGlzLiNwcmVmZXRjaGVkTGluayA9IGxpbms7XG5cbiAgICAgICAgY29uc3QgZmV0Y2hSZXF1ZXN0ID0gbmV3IEZldGNoUmVxdWVzdChcbiAgICAgICAgICB0aGlzLFxuICAgICAgICAgIEZldGNoTWV0aG9kLmdldCxcbiAgICAgICAgICBsb2NhdGlvbixcbiAgICAgICAgICBuZXcgVVJMU2VhcmNoUGFyYW1zKCksXG4gICAgICAgICAgdGFyZ2V0XG4gICAgICAgICk7XG5cbiAgICAgICAgZmV0Y2hSZXF1ZXN0LmZldGNoT3B0aW9ucy5wcmlvcml0eSA9IFwibG93XCI7XG5cbiAgICAgICAgcHJlZmV0Y2hDYWNoZS5zZXRMYXRlcihsb2NhdGlvbi50b1N0cmluZygpLCBmZXRjaFJlcXVlc3QsIHRoaXMuI2NhY2hlVHRsKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAjY2FuY2VsUmVxdWVzdElmT2Jzb2xldGUgPSAoZXZlbnQpID0+IHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSB0aGlzLiNwcmVmZXRjaGVkTGluaykgdGhpcy4jY2FuY2VsUHJlZmV0Y2hSZXF1ZXN0KCk7XG4gIH1cblxuICAjY2FuY2VsUHJlZmV0Y2hSZXF1ZXN0ID0gKCkgPT4ge1xuICAgIHByZWZldGNoQ2FjaGUuY2xlYXIoKTtcbiAgICB0aGlzLiNwcmVmZXRjaGVkTGluayA9IG51bGw7XG4gIH1cblxuICAjdHJ5VG9Vc2VQcmVmZXRjaGVkUmVxdWVzdCA9IChldmVudCkgPT4ge1xuICAgIGlmIChldmVudC50YXJnZXQudGFnTmFtZSAhPT0gXCJGT1JNXCIgJiYgZXZlbnQuZGV0YWlsLmZldGNoT3B0aW9ucy5tZXRob2QgPT09IFwiR0VUXCIpIHtcbiAgICAgIGNvbnN0IGNhY2hlZCA9IHByZWZldGNoQ2FjaGUuZ2V0KGV2ZW50LmRldGFpbC51cmwudG9TdHJpbmcoKSk7XG5cbiAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgLy8gVXNlciBjbGlja2VkIGxpbmssIHVzZSBjYWNoZSByZXNwb25zZVxuICAgICAgICBldmVudC5kZXRhaWwuZmV0Y2hSZXF1ZXN0ID0gY2FjaGVkO1xuICAgICAgfVxuXG4gICAgICBwcmVmZXRjaENhY2hlLmNsZWFyKCk7XG4gICAgfVxuICB9XG5cbiAgcHJlcGFyZVJlcXVlc3QocmVxdWVzdCkge1xuICAgIGNvbnN0IGxpbmsgPSByZXF1ZXN0LnRhcmdldDtcblxuICAgIHJlcXVlc3QuaGVhZGVyc1tcIlgtU2VjLVB1cnBvc2VcIl0gPSBcInByZWZldGNoXCI7XG5cbiAgICBjb25zdCB0dXJib0ZyYW1lID0gbGluay5jbG9zZXN0KFwidHVyYm8tZnJhbWVcIik7XG4gICAgY29uc3QgdHVyYm9GcmFtZVRhcmdldCA9IGxpbmsuZ2V0QXR0cmlidXRlKFwiZGF0YS10dXJiby1mcmFtZVwiKSB8fCB0dXJib0ZyYW1lPy5nZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIikgfHwgdHVyYm9GcmFtZT8uaWQ7XG5cbiAgICBpZiAodHVyYm9GcmFtZVRhcmdldCAmJiB0dXJib0ZyYW1lVGFyZ2V0ICE9PSBcIl90b3BcIikge1xuICAgICAgcmVxdWVzdC5oZWFkZXJzW1wiVHVyYm8tRnJhbWVcIl0gPSB0dXJib0ZyYW1lVGFyZ2V0O1xuICAgIH1cbiAgfVxuXG4gIC8vIEZldGNoIHJlcXVlc3QgaW50ZXJmYWNlXG5cbiAgcmVxdWVzdFN1Y2NlZWRlZFdpdGhSZXNwb25zZSgpIHt9XG5cbiAgcmVxdWVzdFN0YXJ0ZWQoZmV0Y2hSZXF1ZXN0KSB7fVxuXG4gIHJlcXVlc3RFcnJvcmVkKGZldGNoUmVxdWVzdCkge31cblxuICByZXF1ZXN0RmluaXNoZWQoZmV0Y2hSZXF1ZXN0KSB7fVxuXG4gIHJlcXVlc3RQcmV2ZW50ZWRIYW5kbGluZ1Jlc3BvbnNlKGZldGNoUmVxdWVzdCwgZmV0Y2hSZXNwb25zZSkge31cblxuICByZXF1ZXN0RmFpbGVkV2l0aFJlc3BvbnNlKGZldGNoUmVxdWVzdCwgZmV0Y2hSZXNwb25zZSkge31cblxuICBnZXQgI2NhY2hlVHRsKCkge1xuICAgIHJldHVybiBOdW1iZXIoZ2V0TWV0YUNvbnRlbnQoXCJ0dXJiby1wcmVmZXRjaC1jYWNoZS10aW1lXCIpKSB8fCBjYWNoZVR0bFxuICB9XG5cbiAgI2lzUHJlZmV0Y2hhYmxlKGxpbmspIHtcbiAgICBjb25zdCBocmVmID0gbGluay5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpO1xuXG4gICAgaWYgKCFocmVmKSByZXR1cm4gZmFsc2VcblxuICAgIGlmICh1bmZldGNoYWJsZUxpbmsobGluaykpIHJldHVybiBmYWxzZVxuICAgIGlmIChsaW5rVG9UaGVTYW1lUGFnZShsaW5rKSkgcmV0dXJuIGZhbHNlXG4gICAgaWYgKGxpbmtPcHRzT3V0KGxpbmspKSByZXR1cm4gZmFsc2VcbiAgICBpZiAobm9uU2FmZUxpbmsobGluaykpIHJldHVybiBmYWxzZVxuICAgIGlmIChldmVudFByZXZlbnRlZChsaW5rKSkgcmV0dXJuIGZhbHNlXG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG59XG5cbmNvbnN0IHVuZmV0Y2hhYmxlTGluayA9IChsaW5rKSA9PiB7XG4gIHJldHVybiBsaW5rLm9yaWdpbiAhPT0gZG9jdW1lbnQubG9jYXRpb24ub3JpZ2luIHx8ICFbXCJodHRwOlwiLCBcImh0dHBzOlwiXS5pbmNsdWRlcyhsaW5rLnByb3RvY29sKSB8fCBsaW5rLmhhc0F0dHJpYnV0ZShcInRhcmdldFwiKVxufTtcblxuY29uc3QgbGlua1RvVGhlU2FtZVBhZ2UgPSAobGluaykgPT4ge1xuICByZXR1cm4gKGxpbmsucGF0aG5hbWUgKyBsaW5rLnNlYXJjaCA9PT0gZG9jdW1lbnQubG9jYXRpb24ucGF0aG5hbWUgKyBkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2gpIHx8IGxpbmsuaHJlZi5zdGFydHNXaXRoKFwiI1wiKVxufTtcblxuY29uc3QgbGlua09wdHNPdXQgPSAobGluaykgPT4ge1xuICBpZiAobGluay5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLXByZWZldGNoXCIpID09PSBcImZhbHNlXCIpIHJldHVybiB0cnVlXG4gIGlmIChsaW5rLmdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm9cIikgPT09IFwiZmFsc2VcIikgcmV0dXJuIHRydWVcblxuICBjb25zdCB0dXJib1ByZWZldGNoUGFyZW50ID0gZmluZENsb3Nlc3RSZWN1cnNpdmVseShsaW5rLCBcIltkYXRhLXR1cmJvLXByZWZldGNoXVwiKTtcbiAgaWYgKHR1cmJvUHJlZmV0Y2hQYXJlbnQgJiYgdHVyYm9QcmVmZXRjaFBhcmVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLXByZWZldGNoXCIpID09PSBcImZhbHNlXCIpIHJldHVybiB0cnVlXG5cbiAgcmV0dXJuIGZhbHNlXG59O1xuXG5jb25zdCBub25TYWZlTGluayA9IChsaW5rKSA9PiB7XG4gIGNvbnN0IHR1cmJvTWV0aG9kID0gbGluay5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLW1ldGhvZFwiKTtcbiAgaWYgKHR1cmJvTWV0aG9kICYmIHR1cmJvTWV0aG9kLnRvTG93ZXJDYXNlKCkgIT09IFwiZ2V0XCIpIHJldHVybiB0cnVlXG5cbiAgaWYgKGlzVUpTKGxpbmspKSByZXR1cm4gdHJ1ZVxuICBpZiAobGluay5oYXNBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLWNvbmZpcm1cIikpIHJldHVybiB0cnVlXG4gIGlmIChsaW5rLmhhc0F0dHJpYnV0ZShcImRhdGEtdHVyYm8tc3RyZWFtXCIpKSByZXR1cm4gdHJ1ZVxuXG4gIHJldHVybiBmYWxzZVxufTtcblxuY29uc3QgaXNVSlMgPSAobGluaykgPT4ge1xuICByZXR1cm4gbGluay5oYXNBdHRyaWJ1dGUoXCJkYXRhLXJlbW90ZVwiKSB8fCBsaW5rLmhhc0F0dHJpYnV0ZShcImRhdGEtYmVoYXZpb3JcIikgfHwgbGluay5oYXNBdHRyaWJ1dGUoXCJkYXRhLWNvbmZpcm1cIikgfHwgbGluay5oYXNBdHRyaWJ1dGUoXCJkYXRhLW1ldGhvZFwiKVxufTtcblxuY29uc3QgZXZlbnRQcmV2ZW50ZWQgPSAobGluaykgPT4ge1xuICBjb25zdCBldmVudCA9IGRpc3BhdGNoKFwidHVyYm86YmVmb3JlLXByZWZldGNoXCIsIHsgdGFyZ2V0OiBsaW5rLCBjYW5jZWxhYmxlOiB0cnVlIH0pO1xuICByZXR1cm4gZXZlbnQuZGVmYXVsdFByZXZlbnRlZFxufTtcblxuY2xhc3MgTmF2aWdhdG9yIHtcbiAgY29uc3RydWN0b3IoZGVsZWdhdGUpIHtcbiAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gIH1cblxuICBwcm9wb3NlVmlzaXQobG9jYXRpb24sIG9wdGlvbnMgPSB7fSkge1xuICAgIGlmICh0aGlzLmRlbGVnYXRlLmFsbG93c1Zpc2l0aW5nTG9jYXRpb25XaXRoQWN0aW9uKGxvY2F0aW9uLCBvcHRpb25zLmFjdGlvbikpIHtcbiAgICAgIHRoaXMuZGVsZWdhdGUudmlzaXRQcm9wb3NlZFRvTG9jYXRpb24obG9jYXRpb24sIG9wdGlvbnMpO1xuICAgIH1cbiAgfVxuXG4gIHN0YXJ0VmlzaXQobG9jYXRhYmxlLCByZXN0b3JhdGlvbklkZW50aWZpZXIsIG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMuc3RvcCgpO1xuICAgIHRoaXMuY3VycmVudFZpc2l0ID0gbmV3IFZpc2l0KHRoaXMsIGV4cGFuZFVSTChsb2NhdGFibGUpLCByZXN0b3JhdGlvbklkZW50aWZpZXIsIHtcbiAgICAgIHJlZmVycmVyOiB0aGlzLmxvY2F0aW9uLFxuICAgICAgLi4ub3B0aW9uc1xuICAgIH0pO1xuICAgIHRoaXMuY3VycmVudFZpc2l0LnN0YXJ0KCk7XG4gIH1cblxuICBzdWJtaXRGb3JtKGZvcm0sIHN1Ym1pdHRlcikge1xuICAgIHRoaXMuc3RvcCgpO1xuICAgIHRoaXMuZm9ybVN1Ym1pc3Npb24gPSBuZXcgRm9ybVN1Ym1pc3Npb24odGhpcywgZm9ybSwgc3VibWl0dGVyLCB0cnVlKTtcblxuICAgIHRoaXMuZm9ybVN1Ym1pc3Npb24uc3RhcnQoKTtcbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgaWYgKHRoaXMuZm9ybVN1Ym1pc3Npb24pIHtcbiAgICAgIHRoaXMuZm9ybVN1Ym1pc3Npb24uc3RvcCgpO1xuICAgICAgZGVsZXRlIHRoaXMuZm9ybVN1Ym1pc3Npb247XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY3VycmVudFZpc2l0KSB7XG4gICAgICB0aGlzLmN1cnJlbnRWaXNpdC5jYW5jZWwoKTtcbiAgICAgIGRlbGV0ZSB0aGlzLmN1cnJlbnRWaXNpdDtcbiAgICB9XG4gIH1cblxuICBnZXQgYWRhcHRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5hZGFwdGVyXG4gIH1cblxuICBnZXQgdmlldygpIHtcbiAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS52aWV3XG4gIH1cblxuICBnZXQgcm9vdExvY2F0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnZpZXcuc25hcHNob3Qucm9vdExvY2F0aW9uXG4gIH1cblxuICBnZXQgaGlzdG9yeSgpIHtcbiAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5oaXN0b3J5XG4gIH1cblxuICAvLyBGb3JtIHN1Ym1pc3Npb24gZGVsZWdhdGVcblxuICBmb3JtU3VibWlzc2lvblN0YXJ0ZWQoZm9ybVN1Ym1pc3Npb24pIHtcbiAgICAvLyBOb3QgYWxsIGFkYXB0ZXJzIGltcGxlbWVudCBmb3JtU3VibWlzc2lvblN0YXJ0ZWRcbiAgICBpZiAodHlwZW9mIHRoaXMuYWRhcHRlci5mb3JtU3VibWlzc2lvblN0YXJ0ZWQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdGhpcy5hZGFwdGVyLmZvcm1TdWJtaXNzaW9uU3RhcnRlZChmb3JtU3VibWlzc2lvbik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZm9ybVN1Ym1pc3Npb25TdWNjZWVkZWRXaXRoUmVzcG9uc2UoZm9ybVN1Ym1pc3Npb24sIGZldGNoUmVzcG9uc2UpIHtcbiAgICBpZiAoZm9ybVN1Ym1pc3Npb24gPT0gdGhpcy5mb3JtU3VibWlzc2lvbikge1xuICAgICAgY29uc3QgcmVzcG9uc2VIVE1MID0gYXdhaXQgZmV0Y2hSZXNwb25zZS5yZXNwb25zZUhUTUw7XG4gICAgICBpZiAocmVzcG9uc2VIVE1MKSB7XG4gICAgICAgIGNvbnN0IHNob3VsZENhY2hlU25hcHNob3QgPSBmb3JtU3VibWlzc2lvbi5pc1NhZmU7XG4gICAgICAgIGlmICghc2hvdWxkQ2FjaGVTbmFwc2hvdCkge1xuICAgICAgICAgIHRoaXMudmlldy5jbGVhclNuYXBzaG90Q2FjaGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgc3RhdHVzQ29kZSwgcmVkaXJlY3RlZCB9ID0gZmV0Y2hSZXNwb25zZTtcbiAgICAgICAgY29uc3QgYWN0aW9uID0gdGhpcy4jZ2V0QWN0aW9uRm9yRm9ybVN1Ym1pc3Npb24oZm9ybVN1Ym1pc3Npb24sIGZldGNoUmVzcG9uc2UpO1xuICAgICAgICBjb25zdCB2aXNpdE9wdGlvbnMgPSB7XG4gICAgICAgICAgYWN0aW9uLFxuICAgICAgICAgIHNob3VsZENhY2hlU25hcHNob3QsXG4gICAgICAgICAgcmVzcG9uc2U6IHsgc3RhdHVzQ29kZSwgcmVzcG9uc2VIVE1MLCByZWRpcmVjdGVkIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wcm9wb3NlVmlzaXQoZmV0Y2hSZXNwb25zZS5sb2NhdGlvbiwgdmlzaXRPcHRpb25zKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBmb3JtU3VibWlzc2lvbkZhaWxlZFdpdGhSZXNwb25zZShmb3JtU3VibWlzc2lvbiwgZmV0Y2hSZXNwb25zZSkge1xuICAgIGNvbnN0IHJlc3BvbnNlSFRNTCA9IGF3YWl0IGZldGNoUmVzcG9uc2UucmVzcG9uc2VIVE1MO1xuXG4gICAgaWYgKHJlc3BvbnNlSFRNTCkge1xuICAgICAgY29uc3Qgc25hcHNob3QgPSBQYWdlU25hcHNob3QuZnJvbUhUTUxTdHJpbmcocmVzcG9uc2VIVE1MKTtcbiAgICAgIGlmIChmZXRjaFJlc3BvbnNlLnNlcnZlckVycm9yKSB7XG4gICAgICAgIGF3YWl0IHRoaXMudmlldy5yZW5kZXJFcnJvcihzbmFwc2hvdCwgdGhpcy5jdXJyZW50VmlzaXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy52aWV3LnJlbmRlclBhZ2Uoc25hcHNob3QsIGZhbHNlLCB0cnVlLCB0aGlzLmN1cnJlbnRWaXNpdCk7XG4gICAgICB9XG4gICAgICBpZighc25hcHNob3Quc2hvdWxkUHJlc2VydmVTY3JvbGxQb3NpdGlvbikge1xuICAgICAgICB0aGlzLnZpZXcuc2Nyb2xsVG9Ub3AoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudmlldy5jbGVhclNuYXBzaG90Q2FjaGUoKTtcbiAgICB9XG4gIH1cblxuICBmb3JtU3VibWlzc2lvbkVycm9yZWQoZm9ybVN1Ym1pc3Npb24sIGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gIH1cblxuICBmb3JtU3VibWlzc2lvbkZpbmlzaGVkKGZvcm1TdWJtaXNzaW9uKSB7XG4gICAgLy8gTm90IGFsbCBhZGFwdGVycyBpbXBsZW1lbnQgZm9ybVN1Ym1pc3Npb25GaW5pc2hlZFxuICAgIGlmICh0eXBlb2YgdGhpcy5hZGFwdGVyLmZvcm1TdWJtaXNzaW9uRmluaXNoZWQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdGhpcy5hZGFwdGVyLmZvcm1TdWJtaXNzaW9uRmluaXNoZWQoZm9ybVN1Ym1pc3Npb24pO1xuICAgIH1cbiAgfVxuXG4gIC8vIExpbmsgcHJlZmV0Y2hpbmdcblxuICBsaW5rUHJlZmV0Y2hpbmdJc0VuYWJsZWRGb3JMb2NhdGlvbihsb2NhdGlvbikge1xuICAgIC8vIE5vdCBhbGwgYWRhcHRlcnMgaW1wbGVtZW50IGxpbmtQcmVmZXRjaGluZ0lzRW5hYmxlZEZvckxvY2F0aW9uXG4gICAgaWYgKHR5cGVvZiB0aGlzLmFkYXB0ZXIubGlua1ByZWZldGNoaW5nSXNFbmFibGVkRm9yTG9jYXRpb24gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgcmV0dXJuIHRoaXMuYWRhcHRlci5saW5rUHJlZmV0Y2hpbmdJc0VuYWJsZWRGb3JMb2NhdGlvbihsb2NhdGlvbilcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgLy8gVmlzaXQgZGVsZWdhdGVcblxuICB2aXNpdFN0YXJ0ZWQodmlzaXQpIHtcbiAgICB0aGlzLmRlbGVnYXRlLnZpc2l0U3RhcnRlZCh2aXNpdCk7XG4gIH1cblxuICB2aXNpdENvbXBsZXRlZCh2aXNpdCkge1xuICAgIHRoaXMuZGVsZWdhdGUudmlzaXRDb21wbGV0ZWQodmlzaXQpO1xuICAgIGRlbGV0ZSB0aGlzLmN1cnJlbnRWaXNpdDtcbiAgfVxuXG4gIGxvY2F0aW9uV2l0aEFjdGlvbklzU2FtZVBhZ2UobG9jYXRpb24sIGFjdGlvbikge1xuICAgIGNvbnN0IGFuY2hvciA9IGdldEFuY2hvcihsb2NhdGlvbik7XG4gICAgY29uc3QgY3VycmVudEFuY2hvciA9IGdldEFuY2hvcih0aGlzLnZpZXcubGFzdFJlbmRlcmVkTG9jYXRpb24pO1xuICAgIGNvbnN0IGlzUmVzdG9yYXRpb25Ub1RvcCA9IGFjdGlvbiA9PT0gXCJyZXN0b3JlXCIgJiYgdHlwZW9mIGFuY2hvciA9PT0gXCJ1bmRlZmluZWRcIjtcblxuICAgIHJldHVybiAoXG4gICAgICBhY3Rpb24gIT09IFwicmVwbGFjZVwiICYmXG4gICAgICBnZXRSZXF1ZXN0VVJMKGxvY2F0aW9uKSA9PT0gZ2V0UmVxdWVzdFVSTCh0aGlzLnZpZXcubGFzdFJlbmRlcmVkTG9jYXRpb24pICYmXG4gICAgICAoaXNSZXN0b3JhdGlvblRvVG9wIHx8IChhbmNob3IgIT0gbnVsbCAmJiBhbmNob3IgIT09IGN1cnJlbnRBbmNob3IpKVxuICAgIClcbiAgfVxuXG4gIHZpc2l0U2Nyb2xsZWRUb1NhbWVQYWdlTG9jYXRpb24ob2xkVVJMLCBuZXdVUkwpIHtcbiAgICB0aGlzLmRlbGVnYXRlLnZpc2l0U2Nyb2xsZWRUb1NhbWVQYWdlTG9jYXRpb24ob2xkVVJMLCBuZXdVUkwpO1xuICB9XG5cbiAgLy8gVmlzaXRzXG5cbiAgZ2V0IGxvY2F0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmhpc3RvcnkubG9jYXRpb25cbiAgfVxuXG4gIGdldCByZXN0b3JhdGlvbklkZW50aWZpZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGlzdG9yeS5yZXN0b3JhdGlvbklkZW50aWZpZXJcbiAgfVxuXG4gICNnZXRBY3Rpb25Gb3JGb3JtU3VibWlzc2lvbihmb3JtU3VibWlzc2lvbiwgZmV0Y2hSZXNwb25zZSkge1xuICAgIGNvbnN0IHsgc3VibWl0dGVyLCBmb3JtRWxlbWVudCB9ID0gZm9ybVN1Ym1pc3Npb247XG4gICAgcmV0dXJuIGdldFZpc2l0QWN0aW9uKHN1Ym1pdHRlciwgZm9ybUVsZW1lbnQpIHx8IHRoaXMuI2dldERlZmF1bHRBY3Rpb24oZmV0Y2hSZXNwb25zZSlcbiAgfVxuXG4gICNnZXREZWZhdWx0QWN0aW9uKGZldGNoUmVzcG9uc2UpIHtcbiAgICBjb25zdCBzYW1lTG9jYXRpb25SZWRpcmVjdCA9IGZldGNoUmVzcG9uc2UucmVkaXJlY3RlZCAmJiBmZXRjaFJlc3BvbnNlLmxvY2F0aW9uLmhyZWYgPT09IHRoaXMubG9jYXRpb24/LmhyZWY7XG4gICAgcmV0dXJuIHNhbWVMb2NhdGlvblJlZGlyZWN0ID8gXCJyZXBsYWNlXCIgOiBcImFkdmFuY2VcIlxuICB9XG59XG5cbmNvbnN0IFBhZ2VTdGFnZSA9IHtcbiAgaW5pdGlhbDogMCxcbiAgbG9hZGluZzogMSxcbiAgaW50ZXJhY3RpdmU6IDIsXG4gIGNvbXBsZXRlOiAzXG59O1xuXG5jbGFzcyBQYWdlT2JzZXJ2ZXIge1xuICBzdGFnZSA9IFBhZ2VTdGFnZS5pbml0aWFsXG4gIHN0YXJ0ZWQgPSBmYWxzZVxuXG4gIGNvbnN0cnVjdG9yKGRlbGVnYXRlKSB7XG4gICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICB9XG5cbiAgc3RhcnQoKSB7XG4gICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgIGlmICh0aGlzLnN0YWdlID09IFBhZ2VTdGFnZS5pbml0aWFsKSB7XG4gICAgICAgIHRoaXMuc3RhZ2UgPSBQYWdlU3RhZ2UubG9hZGluZztcbiAgICAgIH1cbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZWFkeXN0YXRlY2hhbmdlXCIsIHRoaXMuaW50ZXJwcmV0UmVhZHlTdGF0ZSwgZmFsc2UpO1xuICAgICAgYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsIHRoaXMucGFnZVdpbGxVbmxvYWQsIGZhbHNlKTtcbiAgICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgc3RvcCgpIHtcbiAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVhZHlzdGF0ZWNoYW5nZVwiLCB0aGlzLmludGVycHJldFJlYWR5U3RhdGUsIGZhbHNlKTtcbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCB0aGlzLnBhZ2VXaWxsVW5sb2FkLCBmYWxzZSk7XG4gICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBpbnRlcnByZXRSZWFkeVN0YXRlID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgcmVhZHlTdGF0ZSB9ID0gdGhpcztcbiAgICBpZiAocmVhZHlTdGF0ZSA9PSBcImludGVyYWN0aXZlXCIpIHtcbiAgICAgIHRoaXMucGFnZUlzSW50ZXJhY3RpdmUoKTtcbiAgICB9IGVsc2UgaWYgKHJlYWR5U3RhdGUgPT0gXCJjb21wbGV0ZVwiKSB7XG4gICAgICB0aGlzLnBhZ2VJc0NvbXBsZXRlKCk7XG4gICAgfVxuICB9XG5cbiAgcGFnZUlzSW50ZXJhY3RpdmUoKSB7XG4gICAgaWYgKHRoaXMuc3RhZ2UgPT0gUGFnZVN0YWdlLmxvYWRpbmcpIHtcbiAgICAgIHRoaXMuc3RhZ2UgPSBQYWdlU3RhZ2UuaW50ZXJhY3RpdmU7XG4gICAgICB0aGlzLmRlbGVnYXRlLnBhZ2VCZWNhbWVJbnRlcmFjdGl2ZSgpO1xuICAgIH1cbiAgfVxuXG4gIHBhZ2VJc0NvbXBsZXRlKCkge1xuICAgIHRoaXMucGFnZUlzSW50ZXJhY3RpdmUoKTtcbiAgICBpZiAodGhpcy5zdGFnZSA9PSBQYWdlU3RhZ2UuaW50ZXJhY3RpdmUpIHtcbiAgICAgIHRoaXMuc3RhZ2UgPSBQYWdlU3RhZ2UuY29tcGxldGU7XG4gICAgICB0aGlzLmRlbGVnYXRlLnBhZ2VMb2FkZWQoKTtcbiAgICB9XG4gIH1cblxuICBwYWdlV2lsbFVubG9hZCA9ICgpID0+IHtcbiAgICB0aGlzLmRlbGVnYXRlLnBhZ2VXaWxsVW5sb2FkKCk7XG4gIH1cblxuICBnZXQgcmVhZHlTdGF0ZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQucmVhZHlTdGF0ZVxuICB9XG59XG5cbmNsYXNzIFNjcm9sbE9ic2VydmVyIHtcbiAgc3RhcnRlZCA9IGZhbHNlXG5cbiAgY29uc3RydWN0b3IoZGVsZWdhdGUpIHtcbiAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gIH1cblxuICBzdGFydCgpIHtcbiAgICBpZiAoIXRoaXMuc3RhcnRlZCkge1xuICAgICAgYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCB0aGlzLm9uU2Nyb2xsLCBmYWxzZSk7XG4gICAgICB0aGlzLm9uU2Nyb2xsKCk7XG4gICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCB0aGlzLm9uU2Nyb2xsLCBmYWxzZSk7XG4gICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBvblNjcm9sbCA9ICgpID0+IHtcbiAgICB0aGlzLnVwZGF0ZVBvc2l0aW9uKHsgeDogd2luZG93LnBhZ2VYT2Zmc2V0LCB5OiB3aW5kb3cucGFnZVlPZmZzZXQgfSk7XG4gIH1cblxuICAvLyBQcml2YXRlXG5cbiAgdXBkYXRlUG9zaXRpb24ocG9zaXRpb24pIHtcbiAgICB0aGlzLmRlbGVnYXRlLnNjcm9sbFBvc2l0aW9uQ2hhbmdlZChwb3NpdGlvbik7XG4gIH1cbn1cblxuY2xhc3MgU3RyZWFtTWVzc2FnZVJlbmRlcmVyIHtcbiAgcmVuZGVyKHsgZnJhZ21lbnQgfSkge1xuICAgIEJhcmRvLnByZXNlcnZpbmdQZXJtYW5lbnRFbGVtZW50cyh0aGlzLCBnZXRQZXJtYW5lbnRFbGVtZW50TWFwRm9yRnJhZ21lbnQoZnJhZ21lbnQpLCAoKSA9PiB7XG4gICAgICB3aXRoQXV0b2ZvY3VzRnJvbUZyYWdtZW50KGZyYWdtZW50LCAoKSA9PiB7XG4gICAgICAgIHdpdGhQcmVzZXJ2ZWRGb2N1cygoKSA9PiB7XG4gICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEJhcmRvIGRlbGVnYXRlXG5cbiAgZW50ZXJpbmdCYXJkbyhjdXJyZW50UGVybWFuZW50RWxlbWVudCwgbmV3UGVybWFuZW50RWxlbWVudCkge1xuICAgIG5ld1Blcm1hbmVudEVsZW1lbnQucmVwbGFjZVdpdGgoY3VycmVudFBlcm1hbmVudEVsZW1lbnQuY2xvbmVOb2RlKHRydWUpKTtcbiAgfVxuXG4gIGxlYXZpbmdCYXJkbygpIHt9XG59XG5cbmZ1bmN0aW9uIGdldFBlcm1hbmVudEVsZW1lbnRNYXBGb3JGcmFnbWVudChmcmFnbWVudCkge1xuICBjb25zdCBwZXJtYW5lbnRFbGVtZW50c0luRG9jdW1lbnQgPSBxdWVyeVBlcm1hbmVudEVsZW1lbnRzQWxsKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7XG4gIGNvbnN0IHBlcm1hbmVudEVsZW1lbnRNYXAgPSB7fTtcbiAgZm9yIChjb25zdCBwZXJtYW5lbnRFbGVtZW50SW5Eb2N1bWVudCBvZiBwZXJtYW5lbnRFbGVtZW50c0luRG9jdW1lbnQpIHtcbiAgICBjb25zdCB7IGlkIH0gPSBwZXJtYW5lbnRFbGVtZW50SW5Eb2N1bWVudDtcblxuICAgIGZvciAoY29uc3Qgc3RyZWFtRWxlbWVudCBvZiBmcmFnbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwidHVyYm8tc3RyZWFtXCIpKSB7XG4gICAgICBjb25zdCBlbGVtZW50SW5TdHJlYW0gPSBnZXRQZXJtYW5lbnRFbGVtZW50QnlJZChzdHJlYW1FbGVtZW50LnRlbXBsYXRlRWxlbWVudC5jb250ZW50LCBpZCk7XG5cbiAgICAgIGlmIChlbGVtZW50SW5TdHJlYW0pIHtcbiAgICAgICAgcGVybWFuZW50RWxlbWVudE1hcFtpZF0gPSBbcGVybWFuZW50RWxlbWVudEluRG9jdW1lbnQsIGVsZW1lbnRJblN0cmVhbV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHBlcm1hbmVudEVsZW1lbnRNYXBcbn1cblxuYXN5bmMgZnVuY3Rpb24gd2l0aEF1dG9mb2N1c0Zyb21GcmFnbWVudChmcmFnbWVudCwgY2FsbGJhY2spIHtcbiAgY29uc3QgZ2VuZXJhdGVkSUQgPSBgdHVyYm8tc3RyZWFtLWF1dG9mb2N1cy0ke3V1aWQoKX1gO1xuICBjb25zdCB0dXJib1N0cmVhbXMgPSBmcmFnbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwidHVyYm8tc3RyZWFtXCIpO1xuICBjb25zdCBlbGVtZW50V2l0aEF1dG9mb2N1cyA9IGZpcnN0QXV0b2ZvY3VzYWJsZUVsZW1lbnRJblN0cmVhbXModHVyYm9TdHJlYW1zKTtcbiAgbGV0IHdpbGxBdXRvZm9jdXNJZCA9IG51bGw7XG5cbiAgaWYgKGVsZW1lbnRXaXRoQXV0b2ZvY3VzKSB7XG4gICAgaWYgKGVsZW1lbnRXaXRoQXV0b2ZvY3VzLmlkKSB7XG4gICAgICB3aWxsQXV0b2ZvY3VzSWQgPSBlbGVtZW50V2l0aEF1dG9mb2N1cy5pZDtcbiAgICB9IGVsc2Uge1xuICAgICAgd2lsbEF1dG9mb2N1c0lkID0gZ2VuZXJhdGVkSUQ7XG4gICAgfVxuXG4gICAgZWxlbWVudFdpdGhBdXRvZm9jdXMuaWQgPSB3aWxsQXV0b2ZvY3VzSWQ7XG4gIH1cblxuICBjYWxsYmFjaygpO1xuICBhd2FpdCBuZXh0UmVwYWludCgpO1xuXG4gIGNvbnN0IGhhc05vQWN0aXZlRWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT0gbnVsbCB8fCBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09IGRvY3VtZW50LmJvZHk7XG5cbiAgaWYgKGhhc05vQWN0aXZlRWxlbWVudCAmJiB3aWxsQXV0b2ZvY3VzSWQpIHtcbiAgICBjb25zdCBlbGVtZW50VG9BdXRvZm9jdXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh3aWxsQXV0b2ZvY3VzSWQpO1xuXG4gICAgaWYgKGVsZW1lbnRJc0ZvY3VzYWJsZShlbGVtZW50VG9BdXRvZm9jdXMpKSB7XG4gICAgICBlbGVtZW50VG9BdXRvZm9jdXMuZm9jdXMoKTtcbiAgICB9XG4gICAgaWYgKGVsZW1lbnRUb0F1dG9mb2N1cyAmJiBlbGVtZW50VG9BdXRvZm9jdXMuaWQgPT0gZ2VuZXJhdGVkSUQpIHtcbiAgICAgIGVsZW1lbnRUb0F1dG9mb2N1cy5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKTtcbiAgICB9XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gd2l0aFByZXNlcnZlZEZvY3VzKGNhbGxiYWNrKSB7XG4gIGNvbnN0IFthY3RpdmVFbGVtZW50QmVmb3JlUmVuZGVyLCBhY3RpdmVFbGVtZW50QWZ0ZXJSZW5kZXJdID0gYXdhaXQgYXJvdW5kKGNhbGxiYWNrLCAoKSA9PiBkb2N1bWVudC5hY3RpdmVFbGVtZW50KTtcblxuICBjb25zdCByZXN0b3JlRm9jdXNUbyA9IGFjdGl2ZUVsZW1lbnRCZWZvcmVSZW5kZXIgJiYgYWN0aXZlRWxlbWVudEJlZm9yZVJlbmRlci5pZDtcblxuICBpZiAocmVzdG9yZUZvY3VzVG8pIHtcbiAgICBjb25zdCBlbGVtZW50VG9Gb2N1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHJlc3RvcmVGb2N1c1RvKTtcblxuICAgIGlmIChlbGVtZW50SXNGb2N1c2FibGUoZWxlbWVudFRvRm9jdXMpICYmIGVsZW1lbnRUb0ZvY3VzICE9IGFjdGl2ZUVsZW1lbnRBZnRlclJlbmRlcikge1xuICAgICAgZWxlbWVudFRvRm9jdXMuZm9jdXMoKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZmlyc3RBdXRvZm9jdXNhYmxlRWxlbWVudEluU3RyZWFtcyhub2RlTGlzdE9mU3RyZWFtRWxlbWVudHMpIHtcbiAgZm9yIChjb25zdCBzdHJlYW1FbGVtZW50IG9mIG5vZGVMaXN0T2ZTdHJlYW1FbGVtZW50cykge1xuICAgIGNvbnN0IGVsZW1lbnRXaXRoQXV0b2ZvY3VzID0gcXVlcnlBdXRvZm9jdXNhYmxlRWxlbWVudChzdHJlYW1FbGVtZW50LnRlbXBsYXRlRWxlbWVudC5jb250ZW50KTtcblxuICAgIGlmIChlbGVtZW50V2l0aEF1dG9mb2N1cykgcmV0dXJuIGVsZW1lbnRXaXRoQXV0b2ZvY3VzXG4gIH1cblxuICByZXR1cm4gbnVsbFxufVxuXG5jbGFzcyBTdHJlYW1PYnNlcnZlciB7XG4gIHNvdXJjZXMgPSBuZXcgU2V0KClcbiAgI3N0YXJ0ZWQgPSBmYWxzZVxuXG4gIGNvbnN0cnVjdG9yKGRlbGVnYXRlKSB7XG4gICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICB9XG5cbiAgc3RhcnQoKSB7XG4gICAgaWYgKCF0aGlzLiNzdGFydGVkKSB7XG4gICAgICB0aGlzLiNzdGFydGVkID0gdHJ1ZTtcbiAgICAgIGFkZEV2ZW50TGlzdGVuZXIoXCJ0dXJibzpiZWZvcmUtZmV0Y2gtcmVzcG9uc2VcIiwgdGhpcy5pbnNwZWN0RmV0Y2hSZXNwb25zZSwgZmFsc2UpO1xuICAgIH1cbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgaWYgKHRoaXMuI3N0YXJ0ZWQpIHtcbiAgICAgIHRoaXMuI3N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0dXJibzpiZWZvcmUtZmV0Y2gtcmVzcG9uc2VcIiwgdGhpcy5pbnNwZWN0RmV0Y2hSZXNwb25zZSwgZmFsc2UpO1xuICAgIH1cbiAgfVxuXG4gIGNvbm5lY3RTdHJlYW1Tb3VyY2Uoc291cmNlKSB7XG4gICAgaWYgKCF0aGlzLnN0cmVhbVNvdXJjZUlzQ29ubmVjdGVkKHNvdXJjZSkpIHtcbiAgICAgIHRoaXMuc291cmNlcy5hZGQoc291cmNlKTtcbiAgICAgIHNvdXJjZS5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCB0aGlzLnJlY2VpdmVNZXNzYWdlRXZlbnQsIGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICBkaXNjb25uZWN0U3RyZWFtU291cmNlKHNvdXJjZSkge1xuICAgIGlmICh0aGlzLnN0cmVhbVNvdXJjZUlzQ29ubmVjdGVkKHNvdXJjZSkpIHtcbiAgICAgIHRoaXMuc291cmNlcy5kZWxldGUoc291cmNlKTtcbiAgICAgIHNvdXJjZS5yZW1vdmVFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCB0aGlzLnJlY2VpdmVNZXNzYWdlRXZlbnQsIGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICBzdHJlYW1Tb3VyY2VJc0Nvbm5lY3RlZChzb3VyY2UpIHtcbiAgICByZXR1cm4gdGhpcy5zb3VyY2VzLmhhcyhzb3VyY2UpXG4gIH1cblxuICBpbnNwZWN0RmV0Y2hSZXNwb25zZSA9IChldmVudCkgPT4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gZmV0Y2hSZXNwb25zZUZyb21FdmVudChldmVudCk7XG4gICAgaWYgKHJlc3BvbnNlICYmIGZldGNoUmVzcG9uc2VJc1N0cmVhbShyZXNwb25zZSkpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLnJlY2VpdmVNZXNzYWdlUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgIH1cbiAgfVxuXG4gIHJlY2VpdmVNZXNzYWdlRXZlbnQgPSAoZXZlbnQpID0+IHtcbiAgICBpZiAodGhpcy4jc3RhcnRlZCAmJiB0eXBlb2YgZXZlbnQuZGF0YSA9PSBcInN0cmluZ1wiKSB7XG4gICAgICB0aGlzLnJlY2VpdmVNZXNzYWdlSFRNTChldmVudC5kYXRhKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyByZWNlaXZlTWVzc2FnZVJlc3BvbnNlKHJlc3BvbnNlKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlc3BvbnNlLnJlc3BvbnNlSFRNTDtcbiAgICBpZiAoaHRtbCkge1xuICAgICAgdGhpcy5yZWNlaXZlTWVzc2FnZUhUTUwoaHRtbCk7XG4gICAgfVxuICB9XG5cbiAgcmVjZWl2ZU1lc3NhZ2VIVE1MKGh0bWwpIHtcbiAgICB0aGlzLmRlbGVnYXRlLnJlY2VpdmVkTWVzc2FnZUZyb21TdHJlYW0oU3RyZWFtTWVzc2FnZS53cmFwKGh0bWwpKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmZXRjaFJlc3BvbnNlRnJvbUV2ZW50KGV2ZW50KSB7XG4gIGNvbnN0IGZldGNoUmVzcG9uc2UgPSBldmVudC5kZXRhaWw/LmZldGNoUmVzcG9uc2U7XG4gIGlmIChmZXRjaFJlc3BvbnNlIGluc3RhbmNlb2YgRmV0Y2hSZXNwb25zZSkge1xuICAgIHJldHVybiBmZXRjaFJlc3BvbnNlXG4gIH1cbn1cblxuZnVuY3Rpb24gZmV0Y2hSZXNwb25zZUlzU3RyZWFtKHJlc3BvbnNlKSB7XG4gIGNvbnN0IGNvbnRlbnRUeXBlID0gcmVzcG9uc2UuY29udGVudFR5cGUgPz8gXCJcIjtcbiAgcmV0dXJuIGNvbnRlbnRUeXBlLnN0YXJ0c1dpdGgoU3RyZWFtTWVzc2FnZS5jb250ZW50VHlwZSlcbn1cblxuY2xhc3MgRXJyb3JSZW5kZXJlciBleHRlbmRzIFJlbmRlcmVyIHtcbiAgc3RhdGljIHJlbmRlckVsZW1lbnQoY3VycmVudEVsZW1lbnQsIG5ld0VsZW1lbnQpIHtcbiAgICBjb25zdCB7IGRvY3VtZW50RWxlbWVudCwgYm9keSB9ID0gZG9jdW1lbnQ7XG5cbiAgICBkb2N1bWVudEVsZW1lbnQucmVwbGFjZUNoaWxkKG5ld0VsZW1lbnQsIGJvZHkpO1xuICB9XG5cbiAgYXN5bmMgcmVuZGVyKCkge1xuICAgIHRoaXMucmVwbGFjZUhlYWRBbmRCb2R5KCk7XG4gICAgdGhpcy5hY3RpdmF0ZVNjcmlwdEVsZW1lbnRzKCk7XG4gIH1cblxuICByZXBsYWNlSGVhZEFuZEJvZHkoKSB7XG4gICAgY29uc3QgeyBkb2N1bWVudEVsZW1lbnQsIGhlYWQgfSA9IGRvY3VtZW50O1xuICAgIGRvY3VtZW50RWxlbWVudC5yZXBsYWNlQ2hpbGQodGhpcy5uZXdIZWFkLCBoZWFkKTtcbiAgICB0aGlzLnJlbmRlckVsZW1lbnQodGhpcy5jdXJyZW50RWxlbWVudCwgdGhpcy5uZXdFbGVtZW50KTtcbiAgfVxuXG4gIGFjdGl2YXRlU2NyaXB0RWxlbWVudHMoKSB7XG4gICAgZm9yIChjb25zdCByZXBsYWNlYWJsZUVsZW1lbnQgb2YgdGhpcy5zY3JpcHRFbGVtZW50cykge1xuICAgICAgY29uc3QgcGFyZW50Tm9kZSA9IHJlcGxhY2VhYmxlRWxlbWVudC5wYXJlbnROb2RlO1xuICAgICAgaWYgKHBhcmVudE5vZGUpIHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGFjdGl2YXRlU2NyaXB0RWxlbWVudChyZXBsYWNlYWJsZUVsZW1lbnQpO1xuICAgICAgICBwYXJlbnROb2RlLnJlcGxhY2VDaGlsZChlbGVtZW50LCByZXBsYWNlYWJsZUVsZW1lbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldCBuZXdIZWFkKCkge1xuICAgIHJldHVybiB0aGlzLm5ld1NuYXBzaG90LmhlYWRTbmFwc2hvdC5lbGVtZW50XG4gIH1cblxuICBnZXQgc2NyaXB0RWxlbWVudHMoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwic2NyaXB0XCIpXG4gIH1cbn1cblxuY2xhc3MgUGFnZVJlbmRlcmVyIGV4dGVuZHMgUmVuZGVyZXIge1xuICBzdGF0aWMgcmVuZGVyRWxlbWVudChjdXJyZW50RWxlbWVudCwgbmV3RWxlbWVudCkge1xuICAgIGlmIChkb2N1bWVudC5ib2R5ICYmIG5ld0VsZW1lbnQgaW5zdGFuY2VvZiBIVE1MQm9keUVsZW1lbnQpIHtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVwbGFjZVdpdGgobmV3RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChuZXdFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBnZXQgc2hvdWxkUmVuZGVyKCkge1xuICAgIHJldHVybiB0aGlzLm5ld1NuYXBzaG90LmlzVmlzaXRhYmxlICYmIHRoaXMudHJhY2tlZEVsZW1lbnRzQXJlSWRlbnRpY2FsXG4gIH1cblxuICBnZXQgcmVsb2FkUmVhc29uKCkge1xuICAgIGlmICghdGhpcy5uZXdTbmFwc2hvdC5pc1Zpc2l0YWJsZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVhc29uOiBcInR1cmJvX3Zpc2l0X2NvbnRyb2xfaXNfcmVsb2FkXCJcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXRoaXMudHJhY2tlZEVsZW1lbnRzQXJlSWRlbnRpY2FsKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZWFzb246IFwidHJhY2tlZF9lbGVtZW50X21pc21hdGNoXCJcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBwcmVwYXJlVG9SZW5kZXIoKSB7XG4gICAgdGhpcy4jc2V0TGFuZ3VhZ2UoKTtcbiAgICBhd2FpdCB0aGlzLm1lcmdlSGVhZCgpO1xuICB9XG5cbiAgYXN5bmMgcmVuZGVyKCkge1xuICAgIGlmICh0aGlzLndpbGxSZW5kZXIpIHtcbiAgICAgIGF3YWl0IHRoaXMucmVwbGFjZUJvZHkoKTtcbiAgICB9XG4gIH1cblxuICBmaW5pc2hSZW5kZXJpbmcoKSB7XG4gICAgc3VwZXIuZmluaXNoUmVuZGVyaW5nKCk7XG4gICAgaWYgKCF0aGlzLmlzUHJldmlldykge1xuICAgICAgdGhpcy5mb2N1c0ZpcnN0QXV0b2ZvY3VzYWJsZUVsZW1lbnQoKTtcbiAgICB9XG4gIH1cblxuICBnZXQgY3VycmVudEhlYWRTbmFwc2hvdCgpIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50U25hcHNob3QuaGVhZFNuYXBzaG90XG4gIH1cblxuICBnZXQgbmV3SGVhZFNuYXBzaG90KCkge1xuICAgIHJldHVybiB0aGlzLm5ld1NuYXBzaG90LmhlYWRTbmFwc2hvdFxuICB9XG5cbiAgZ2V0IG5ld0VsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMubmV3U25hcHNob3QuZWxlbWVudFxuICB9XG5cbiAgI3NldExhbmd1YWdlKCkge1xuICAgIGNvbnN0IHsgZG9jdW1lbnRFbGVtZW50IH0gPSB0aGlzLmN1cnJlbnRTbmFwc2hvdDtcbiAgICBjb25zdCB7IGxhbmcgfSA9IHRoaXMubmV3U25hcHNob3Q7XG5cbiAgICBpZiAobGFuZykge1xuICAgICAgZG9jdW1lbnRFbGVtZW50LnNldEF0dHJpYnV0ZShcImxhbmdcIiwgbGFuZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRvY3VtZW50RWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJsYW5nXCIpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIG1lcmdlSGVhZCgpIHtcbiAgICBjb25zdCBtZXJnZWRIZWFkRWxlbWVudHMgPSB0aGlzLm1lcmdlUHJvdmlzaW9uYWxFbGVtZW50cygpO1xuICAgIGNvbnN0IG5ld1N0eWxlc2hlZXRFbGVtZW50cyA9IHRoaXMuY29weU5ld0hlYWRTdHlsZXNoZWV0RWxlbWVudHMoKTtcbiAgICB0aGlzLmNvcHlOZXdIZWFkU2NyaXB0RWxlbWVudHMoKTtcblxuICAgIGF3YWl0IG1lcmdlZEhlYWRFbGVtZW50cztcbiAgICBhd2FpdCBuZXdTdHlsZXNoZWV0RWxlbWVudHM7XG5cbiAgICBpZiAodGhpcy53aWxsUmVuZGVyKSB7XG4gICAgICB0aGlzLnJlbW92ZVVudXNlZER5bmFtaWNTdHlsZXNoZWV0RWxlbWVudHMoKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyByZXBsYWNlQm9keSgpIHtcbiAgICBhd2FpdCB0aGlzLnByZXNlcnZpbmdQZXJtYW5lbnRFbGVtZW50cyhhc3luYyAoKSA9PiB7XG4gICAgICB0aGlzLmFjdGl2YXRlTmV3Qm9keSgpO1xuICAgICAgYXdhaXQgdGhpcy5hc3NpZ25OZXdCb2R5KCk7XG4gICAgfSk7XG4gIH1cblxuICBnZXQgdHJhY2tlZEVsZW1lbnRzQXJlSWRlbnRpY2FsKCkge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRIZWFkU25hcHNob3QudHJhY2tlZEVsZW1lbnRTaWduYXR1cmUgPT0gdGhpcy5uZXdIZWFkU25hcHNob3QudHJhY2tlZEVsZW1lbnRTaWduYXR1cmVcbiAgfVxuXG4gIGFzeW5jIGNvcHlOZXdIZWFkU3R5bGVzaGVldEVsZW1lbnRzKCkge1xuICAgIGNvbnN0IGxvYWRpbmdFbGVtZW50cyA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMubmV3SGVhZFN0eWxlc2hlZXRFbGVtZW50cykge1xuICAgICAgbG9hZGluZ0VsZW1lbnRzLnB1c2god2FpdEZvckxvYWQoZWxlbWVudCkpO1xuXG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgIH1cblxuICAgIGF3YWl0IFByb21pc2UuYWxsKGxvYWRpbmdFbGVtZW50cyk7XG4gIH1cblxuICBjb3B5TmV3SGVhZFNjcmlwdEVsZW1lbnRzKCkge1xuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLm5ld0hlYWRTY3JpcHRFbGVtZW50cykge1xuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChhY3RpdmF0ZVNjcmlwdEVsZW1lbnQoZWxlbWVudCkpO1xuICAgIH1cbiAgfVxuXG4gIHJlbW92ZVVudXNlZER5bmFtaWNTdHlsZXNoZWV0RWxlbWVudHMoKSB7XG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMudW51c2VkRHluYW1pY1N0eWxlc2hlZXRFbGVtZW50cykge1xuICAgICAgZG9jdW1lbnQuaGVhZC5yZW1vdmVDaGlsZChlbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBtZXJnZVByb3Zpc2lvbmFsRWxlbWVudHMoKSB7XG4gICAgY29uc3QgbmV3SGVhZEVsZW1lbnRzID0gWy4uLnRoaXMubmV3SGVhZFByb3Zpc2lvbmFsRWxlbWVudHNdO1xuXG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMuY3VycmVudEhlYWRQcm92aXNpb25hbEVsZW1lbnRzKSB7XG4gICAgICBpZiAoIXRoaXMuaXNDdXJyZW50RWxlbWVudEluRWxlbWVudExpc3QoZWxlbWVudCwgbmV3SGVhZEVsZW1lbnRzKSkge1xuICAgICAgICBkb2N1bWVudC5oZWFkLnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBuZXdIZWFkRWxlbWVudHMpIHtcbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgaXNDdXJyZW50RWxlbWVudEluRWxlbWVudExpc3QoZWxlbWVudCwgZWxlbWVudExpc3QpIHtcbiAgICBmb3IgKGNvbnN0IFtpbmRleCwgbmV3RWxlbWVudF0gb2YgZWxlbWVudExpc3QuZW50cmllcygpKSB7XG4gICAgICAvLyBpZiB0aXRsZSBlbGVtZW50Li4uXG4gICAgICBpZiAoZWxlbWVudC50YWdOYW1lID09IFwiVElUTEVcIikge1xuICAgICAgICBpZiAobmV3RWxlbWVudC50YWdOYW1lICE9IFwiVElUTEVcIikge1xuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVsZW1lbnQuaW5uZXJIVE1MID09IG5ld0VsZW1lbnQuaW5uZXJIVE1MKSB7XG4gICAgICAgICAgZWxlbWVudExpc3Quc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIGFueSBvdGhlciBlbGVtZW50Li4uXG4gICAgICBpZiAobmV3RWxlbWVudC5pc0VxdWFsTm9kZShlbGVtZW50KSkge1xuICAgICAgICBlbGVtZW50TGlzdC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgcmVtb3ZlQ3VycmVudEhlYWRQcm92aXNpb25hbEVsZW1lbnRzKCkge1xuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLmN1cnJlbnRIZWFkUHJvdmlzaW9uYWxFbGVtZW50cykge1xuICAgICAgZG9jdW1lbnQuaGVhZC5yZW1vdmVDaGlsZChlbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBjb3B5TmV3SGVhZFByb3Zpc2lvbmFsRWxlbWVudHMoKSB7XG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMubmV3SGVhZFByb3Zpc2lvbmFsRWxlbWVudHMpIHtcbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgYWN0aXZhdGVOZXdCb2R5KCkge1xuICAgIGRvY3VtZW50LmFkb3B0Tm9kZSh0aGlzLm5ld0VsZW1lbnQpO1xuICAgIHRoaXMuYWN0aXZhdGVOZXdCb2R5U2NyaXB0RWxlbWVudHMoKTtcbiAgfVxuXG4gIGFjdGl2YXRlTmV3Qm9keVNjcmlwdEVsZW1lbnRzKCkge1xuICAgIGZvciAoY29uc3QgaW5lcnRTY3JpcHRFbGVtZW50IG9mIHRoaXMubmV3Qm9keVNjcmlwdEVsZW1lbnRzKSB7XG4gICAgICBjb25zdCBhY3RpdmF0ZWRTY3JpcHRFbGVtZW50ID0gYWN0aXZhdGVTY3JpcHRFbGVtZW50KGluZXJ0U2NyaXB0RWxlbWVudCk7XG4gICAgICBpbmVydFNjcmlwdEVsZW1lbnQucmVwbGFjZVdpdGgoYWN0aXZhdGVkU2NyaXB0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYXNzaWduTmV3Qm9keSgpIHtcbiAgICBhd2FpdCB0aGlzLnJlbmRlckVsZW1lbnQodGhpcy5jdXJyZW50RWxlbWVudCwgdGhpcy5uZXdFbGVtZW50KTtcbiAgfVxuXG4gIGdldCB1bnVzZWREeW5hbWljU3R5bGVzaGVldEVsZW1lbnRzKCkge1xuICAgIHJldHVybiB0aGlzLm9sZEhlYWRTdHlsZXNoZWV0RWxlbWVudHMuZmlsdGVyKChlbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLXRyYWNrXCIpID09PSBcImR5bmFtaWNcIlxuICAgIH0pXG4gIH1cblxuICBnZXQgb2xkSGVhZFN0eWxlc2hlZXRFbGVtZW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50SGVhZFNuYXBzaG90LmdldFN0eWxlc2hlZXRFbGVtZW50c05vdEluU25hcHNob3QodGhpcy5uZXdIZWFkU25hcHNob3QpXG4gIH1cblxuICBnZXQgbmV3SGVhZFN0eWxlc2hlZXRFbGVtZW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5uZXdIZWFkU25hcHNob3QuZ2V0U3R5bGVzaGVldEVsZW1lbnRzTm90SW5TbmFwc2hvdCh0aGlzLmN1cnJlbnRIZWFkU25hcHNob3QpXG4gIH1cblxuICBnZXQgbmV3SGVhZFNjcmlwdEVsZW1lbnRzKCkge1xuICAgIHJldHVybiB0aGlzLm5ld0hlYWRTbmFwc2hvdC5nZXRTY3JpcHRFbGVtZW50c05vdEluU25hcHNob3QodGhpcy5jdXJyZW50SGVhZFNuYXBzaG90KVxuICB9XG5cbiAgZ2V0IGN1cnJlbnRIZWFkUHJvdmlzaW9uYWxFbGVtZW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50SGVhZFNuYXBzaG90LnByb3Zpc2lvbmFsRWxlbWVudHNcbiAgfVxuXG4gIGdldCBuZXdIZWFkUHJvdmlzaW9uYWxFbGVtZW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5uZXdIZWFkU25hcHNob3QucHJvdmlzaW9uYWxFbGVtZW50c1xuICB9XG5cbiAgZ2V0IG5ld0JvZHlTY3JpcHRFbGVtZW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5uZXdFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJzY3JpcHRcIilcbiAgfVxufVxuXG5jbGFzcyBNb3JwaGluZ1BhZ2VSZW5kZXJlciBleHRlbmRzIFBhZ2VSZW5kZXJlciB7XG4gIHN0YXRpYyByZW5kZXJFbGVtZW50KGN1cnJlbnRFbGVtZW50LCBuZXdFbGVtZW50KSB7XG4gICAgbW9ycGhFbGVtZW50cyhjdXJyZW50RWxlbWVudCwgbmV3RWxlbWVudCwge1xuICAgICAgY2FsbGJhY2tzOiB7XG4gICAgICAgIGJlZm9yZU5vZGVNb3JwaGVkOiAobm9kZSwgbmV3Tm9kZSkgPT4ge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHNob3VsZFJlZnJlc2hGcmFtZVdpdGhNb3JwaGluZyhub2RlLCBuZXdOb2RlKSAmJlxuICAgICAgICAgICAgICAhY2xvc2VzdEZyYW1lUmVsb2FkYWJsZVdpdGhNb3JwaGluZyhub2RlKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgbm9kZS5yZWxvYWQoKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBkaXNwYXRjaChcInR1cmJvOm1vcnBoXCIsIHsgZGV0YWlsOiB7IGN1cnJlbnRFbGVtZW50LCBuZXdFbGVtZW50IH0gfSk7XG4gIH1cblxuICBhc3luYyBwcmVzZXJ2aW5nUGVybWFuZW50RWxlbWVudHMoY2FsbGJhY2spIHtcbiAgICByZXR1cm4gYXdhaXQgY2FsbGJhY2soKVxuICB9XG5cbiAgZ2V0IHJlbmRlck1ldGhvZCgpIHtcbiAgICByZXR1cm4gXCJtb3JwaFwiXG4gIH1cblxuICBnZXQgc2hvdWxkQXV0b2ZvY3VzKCkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbmNsYXNzIFNuYXBzaG90Q2FjaGUge1xuICBrZXlzID0gW11cbiAgc25hcHNob3RzID0ge31cblxuICBjb25zdHJ1Y3RvcihzaXplKSB7XG4gICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgfVxuXG4gIGhhcyhsb2NhdGlvbikge1xuICAgIHJldHVybiB0b0NhY2hlS2V5KGxvY2F0aW9uKSBpbiB0aGlzLnNuYXBzaG90c1xuICB9XG5cbiAgZ2V0KGxvY2F0aW9uKSB7XG4gICAgaWYgKHRoaXMuaGFzKGxvY2F0aW9uKSkge1xuICAgICAgY29uc3Qgc25hcHNob3QgPSB0aGlzLnJlYWQobG9jYXRpb24pO1xuICAgICAgdGhpcy50b3VjaChsb2NhdGlvbik7XG4gICAgICByZXR1cm4gc25hcHNob3RcbiAgICB9XG4gIH1cblxuICBwdXQobG9jYXRpb24sIHNuYXBzaG90KSB7XG4gICAgdGhpcy53cml0ZShsb2NhdGlvbiwgc25hcHNob3QpO1xuICAgIHRoaXMudG91Y2gobG9jYXRpb24pO1xuICAgIHJldHVybiBzbmFwc2hvdFxuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgdGhpcy5zbmFwc2hvdHMgPSB7fTtcbiAgfVxuXG4gIC8vIFByaXZhdGVcblxuICByZWFkKGxvY2F0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMuc25hcHNob3RzW3RvQ2FjaGVLZXkobG9jYXRpb24pXVxuICB9XG5cbiAgd3JpdGUobG9jYXRpb24sIHNuYXBzaG90KSB7XG4gICAgdGhpcy5zbmFwc2hvdHNbdG9DYWNoZUtleShsb2NhdGlvbildID0gc25hcHNob3Q7XG4gIH1cblxuICB0b3VjaChsb2NhdGlvbikge1xuICAgIGNvbnN0IGtleSA9IHRvQ2FjaGVLZXkobG9jYXRpb24pO1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5rZXlzLmluZGV4T2Yoa2V5KTtcbiAgICBpZiAoaW5kZXggPiAtMSkgdGhpcy5rZXlzLnNwbGljZShpbmRleCwgMSk7XG4gICAgdGhpcy5rZXlzLnVuc2hpZnQoa2V5KTtcbiAgICB0aGlzLnRyaW0oKTtcbiAgfVxuXG4gIHRyaW0oKSB7XG4gICAgZm9yIChjb25zdCBrZXkgb2YgdGhpcy5rZXlzLnNwbGljZSh0aGlzLnNpemUpKSB7XG4gICAgICBkZWxldGUgdGhpcy5zbmFwc2hvdHNba2V5XTtcbiAgICB9XG4gIH1cbn1cblxuY2xhc3MgUGFnZVZpZXcgZXh0ZW5kcyBWaWV3IHtcbiAgc25hcHNob3RDYWNoZSA9IG5ldyBTbmFwc2hvdENhY2hlKDEwKVxuICBsYXN0UmVuZGVyZWRMb2NhdGlvbiA9IG5ldyBVUkwobG9jYXRpb24uaHJlZilcbiAgZm9yY2VSZWxvYWRlZCA9IGZhbHNlXG5cbiAgc2hvdWxkVHJhbnNpdGlvblRvKG5ld1NuYXBzaG90KSB7XG4gICAgcmV0dXJuIHRoaXMuc25hcHNob3QucHJlZmVyc1ZpZXdUcmFuc2l0aW9ucyAmJiBuZXdTbmFwc2hvdC5wcmVmZXJzVmlld1RyYW5zaXRpb25zXG4gIH1cblxuICByZW5kZXJQYWdlKHNuYXBzaG90LCBpc1ByZXZpZXcgPSBmYWxzZSwgd2lsbFJlbmRlciA9IHRydWUsIHZpc2l0KSB7XG4gICAgY29uc3Qgc2hvdWxkTW9ycGhQYWdlID0gdGhpcy5pc1BhZ2VSZWZyZXNoKHZpc2l0KSAmJiB0aGlzLnNuYXBzaG90LnNob3VsZE1vcnBoUGFnZTtcbiAgICBjb25zdCByZW5kZXJlckNsYXNzID0gc2hvdWxkTW9ycGhQYWdlID8gTW9ycGhpbmdQYWdlUmVuZGVyZXIgOiBQYWdlUmVuZGVyZXI7XG5cbiAgICBjb25zdCByZW5kZXJlciA9IG5ldyByZW5kZXJlckNsYXNzKHRoaXMuc25hcHNob3QsIHNuYXBzaG90LCBpc1ByZXZpZXcsIHdpbGxSZW5kZXIpO1xuXG4gICAgaWYgKCFyZW5kZXJlci5zaG91bGRSZW5kZXIpIHtcbiAgICAgIHRoaXMuZm9yY2VSZWxvYWRlZCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZpc2l0Py5jaGFuZ2VIaXN0b3J5KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucmVuZGVyKHJlbmRlcmVyKVxuICB9XG5cbiAgcmVuZGVyRXJyb3Ioc25hcHNob3QsIHZpc2l0KSB7XG4gICAgdmlzaXQ/LmNoYW5nZUhpc3RvcnkoKTtcbiAgICBjb25zdCByZW5kZXJlciA9IG5ldyBFcnJvclJlbmRlcmVyKHRoaXMuc25hcHNob3QsIHNuYXBzaG90LCBmYWxzZSk7XG4gICAgcmV0dXJuIHRoaXMucmVuZGVyKHJlbmRlcmVyKVxuICB9XG5cbiAgY2xlYXJTbmFwc2hvdENhY2hlKCkge1xuICAgIHRoaXMuc25hcHNob3RDYWNoZS5jbGVhcigpO1xuICB9XG5cbiAgYXN5bmMgY2FjaGVTbmFwc2hvdChzbmFwc2hvdCA9IHRoaXMuc25hcHNob3QpIHtcbiAgICBpZiAoc25hcHNob3QuaXNDYWNoZWFibGUpIHtcbiAgICAgIHRoaXMuZGVsZWdhdGUudmlld1dpbGxDYWNoZVNuYXBzaG90KCk7XG4gICAgICBjb25zdCB7IGxhc3RSZW5kZXJlZExvY2F0aW9uOiBsb2NhdGlvbiB9ID0gdGhpcztcbiAgICAgIGF3YWl0IG5leHRFdmVudExvb3BUaWNrKCk7XG4gICAgICBjb25zdCBjYWNoZWRTbmFwc2hvdCA9IHNuYXBzaG90LmNsb25lKCk7XG4gICAgICB0aGlzLnNuYXBzaG90Q2FjaGUucHV0KGxvY2F0aW9uLCBjYWNoZWRTbmFwc2hvdCk7XG4gICAgICByZXR1cm4gY2FjaGVkU25hcHNob3RcbiAgICB9XG4gIH1cblxuICBnZXRDYWNoZWRTbmFwc2hvdEZvckxvY2F0aW9uKGxvY2F0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMuc25hcHNob3RDYWNoZS5nZXQobG9jYXRpb24pXG4gIH1cblxuICBpc1BhZ2VSZWZyZXNoKHZpc2l0KSB7XG4gICAgcmV0dXJuICF2aXNpdCB8fCAodGhpcy5sYXN0UmVuZGVyZWRMb2NhdGlvbi5wYXRobmFtZSA9PT0gdmlzaXQubG9jYXRpb24ucGF0aG5hbWUgJiYgdmlzaXQuYWN0aW9uID09PSBcInJlcGxhY2VcIilcbiAgfVxuXG4gIHNob3VsZFByZXNlcnZlU2Nyb2xsUG9zaXRpb24odmlzaXQpIHtcbiAgICByZXR1cm4gdGhpcy5pc1BhZ2VSZWZyZXNoKHZpc2l0KSAmJiB0aGlzLnNuYXBzaG90LnNob3VsZFByZXNlcnZlU2Nyb2xsUG9zaXRpb25cbiAgfVxuXG4gIGdldCBzbmFwc2hvdCgpIHtcbiAgICByZXR1cm4gUGFnZVNuYXBzaG90LmZyb21FbGVtZW50KHRoaXMuZWxlbWVudClcbiAgfVxufVxuXG5jbGFzcyBQcmVsb2FkZXIge1xuICBzZWxlY3RvciA9IFwiYVtkYXRhLXR1cmJvLXByZWxvYWRdXCJcblxuICBjb25zdHJ1Y3RvcihkZWxlZ2F0ZSwgc25hcHNob3RDYWNoZSkge1xuICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICB0aGlzLnNuYXBzaG90Q2FjaGUgPSBzbmFwc2hvdENhY2hlO1xuICB9XG5cbiAgc3RhcnQoKSB7XG4gICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09IFwibG9hZGluZ1wiKSB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCB0aGlzLiNwcmVsb2FkQWxsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wcmVsb2FkT25Mb2FkTGlua3NGb3JWaWV3KGRvY3VtZW50LmJvZHkpO1xuICAgIH1cbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgdGhpcy4jcHJlbG9hZEFsbCk7XG4gIH1cblxuICBwcmVsb2FkT25Mb2FkTGlua3NGb3JWaWV3KGVsZW1lbnQpIHtcbiAgICBmb3IgKGNvbnN0IGxpbmsgb2YgZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuc2VsZWN0b3IpKSB7XG4gICAgICBpZiAodGhpcy5kZWxlZ2F0ZS5zaG91bGRQcmVsb2FkTGluayhsaW5rKSkge1xuICAgICAgICB0aGlzLnByZWxvYWRVUkwobGluayk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcHJlbG9hZFVSTChsaW5rKSB7XG4gICAgY29uc3QgbG9jYXRpb24gPSBuZXcgVVJMKGxpbmsuaHJlZik7XG5cbiAgICBpZiAodGhpcy5zbmFwc2hvdENhY2hlLmhhcyhsb2NhdGlvbikpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGZldGNoUmVxdWVzdCA9IG5ldyBGZXRjaFJlcXVlc3QodGhpcywgRmV0Y2hNZXRob2QuZ2V0LCBsb2NhdGlvbiwgbmV3IFVSTFNlYXJjaFBhcmFtcygpLCBsaW5rKTtcbiAgICBhd2FpdCBmZXRjaFJlcXVlc3QucGVyZm9ybSgpO1xuICB9XG5cbiAgLy8gRmV0Y2ggcmVxdWVzdCBkZWxlZ2F0ZVxuXG4gIHByZXBhcmVSZXF1ZXN0KGZldGNoUmVxdWVzdCkge1xuICAgIGZldGNoUmVxdWVzdC5oZWFkZXJzW1wiWC1TZWMtUHVycG9zZVwiXSA9IFwicHJlZmV0Y2hcIjtcbiAgfVxuXG4gIGFzeW5jIHJlcXVlc3RTdWNjZWVkZWRXaXRoUmVzcG9uc2UoZmV0Y2hSZXF1ZXN0LCBmZXRjaFJlc3BvbnNlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlSFRNTCA9IGF3YWl0IGZldGNoUmVzcG9uc2UucmVzcG9uc2VIVE1MO1xuICAgICAgY29uc3Qgc25hcHNob3QgPSBQYWdlU25hcHNob3QuZnJvbUhUTUxTdHJpbmcocmVzcG9uc2VIVE1MKTtcblxuICAgICAgdGhpcy5zbmFwc2hvdENhY2hlLnB1dChmZXRjaFJlcXVlc3QudXJsLCBzbmFwc2hvdCk7XG4gICAgfSBjYXRjaCAoXykge1xuICAgICAgLy8gSWYgd2UgY2Fubm90IHByZWxvYWQgdGhhdCBpcyBvayFcbiAgICB9XG4gIH1cblxuICByZXF1ZXN0U3RhcnRlZChmZXRjaFJlcXVlc3QpIHt9XG5cbiAgcmVxdWVzdEVycm9yZWQoZmV0Y2hSZXF1ZXN0KSB7fVxuXG4gIHJlcXVlc3RGaW5pc2hlZChmZXRjaFJlcXVlc3QpIHt9XG5cbiAgcmVxdWVzdFByZXZlbnRlZEhhbmRsaW5nUmVzcG9uc2UoZmV0Y2hSZXF1ZXN0LCBmZXRjaFJlc3BvbnNlKSB7fVxuXG4gIHJlcXVlc3RGYWlsZWRXaXRoUmVzcG9uc2UoZmV0Y2hSZXF1ZXN0LCBmZXRjaFJlc3BvbnNlKSB7fVxuXG4gICNwcmVsb2FkQWxsID0gKCkgPT4ge1xuICAgIHRoaXMucHJlbG9hZE9uTG9hZExpbmtzRm9yVmlldyhkb2N1bWVudC5ib2R5KTtcbiAgfVxufVxuXG5jbGFzcyBDYWNoZSB7XG4gIGNvbnN0cnVjdG9yKHNlc3Npb24pIHtcbiAgICB0aGlzLnNlc3Npb24gPSBzZXNzaW9uO1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgdGhpcy5zZXNzaW9uLmNsZWFyQ2FjaGUoKTtcbiAgfVxuXG4gIHJlc2V0Q2FjaGVDb250cm9sKCkge1xuICAgIHRoaXMuI3NldENhY2hlQ29udHJvbChcIlwiKTtcbiAgfVxuXG4gIGV4ZW1wdFBhZ2VGcm9tQ2FjaGUoKSB7XG4gICAgdGhpcy4jc2V0Q2FjaGVDb250cm9sKFwibm8tY2FjaGVcIik7XG4gIH1cblxuICBleGVtcHRQYWdlRnJvbVByZXZpZXcoKSB7XG4gICAgdGhpcy4jc2V0Q2FjaGVDb250cm9sKFwibm8tcHJldmlld1wiKTtcbiAgfVxuXG4gICNzZXRDYWNoZUNvbnRyb2wodmFsdWUpIHtcbiAgICBzZXRNZXRhQ29udGVudChcInR1cmJvLWNhY2hlLWNvbnRyb2xcIiwgdmFsdWUpO1xuICB9XG59XG5cbmNsYXNzIFNlc3Npb24ge1xuICBuYXZpZ2F0b3IgPSBuZXcgTmF2aWdhdG9yKHRoaXMpXG4gIGhpc3RvcnkgPSBuZXcgSGlzdG9yeSh0aGlzKVxuICB2aWV3ID0gbmV3IFBhZ2VWaWV3KHRoaXMsIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudClcbiAgYWRhcHRlciA9IG5ldyBCcm93c2VyQWRhcHRlcih0aGlzKVxuXG4gIHBhZ2VPYnNlcnZlciA9IG5ldyBQYWdlT2JzZXJ2ZXIodGhpcylcbiAgY2FjaGVPYnNlcnZlciA9IG5ldyBDYWNoZU9ic2VydmVyKClcbiAgbGlua1ByZWZldGNoT2JzZXJ2ZXIgPSBuZXcgTGlua1ByZWZldGNoT2JzZXJ2ZXIodGhpcywgZG9jdW1lbnQpXG4gIGxpbmtDbGlja09ic2VydmVyID0gbmV3IExpbmtDbGlja09ic2VydmVyKHRoaXMsIHdpbmRvdylcbiAgZm9ybVN1Ym1pdE9ic2VydmVyID0gbmV3IEZvcm1TdWJtaXRPYnNlcnZlcih0aGlzLCBkb2N1bWVudClcbiAgc2Nyb2xsT2JzZXJ2ZXIgPSBuZXcgU2Nyb2xsT2JzZXJ2ZXIodGhpcylcbiAgc3RyZWFtT2JzZXJ2ZXIgPSBuZXcgU3RyZWFtT2JzZXJ2ZXIodGhpcylcbiAgZm9ybUxpbmtDbGlja09ic2VydmVyID0gbmV3IEZvcm1MaW5rQ2xpY2tPYnNlcnZlcih0aGlzLCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpXG4gIGZyYW1lUmVkaXJlY3RvciA9IG5ldyBGcmFtZVJlZGlyZWN0b3IodGhpcywgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KVxuICBzdHJlYW1NZXNzYWdlUmVuZGVyZXIgPSBuZXcgU3RyZWFtTWVzc2FnZVJlbmRlcmVyKClcbiAgY2FjaGUgPSBuZXcgQ2FjaGUodGhpcylcblxuICBlbmFibGVkID0gdHJ1ZVxuICBzdGFydGVkID0gZmFsc2VcbiAgI3BhZ2VSZWZyZXNoRGVib3VuY2VQZXJpb2QgPSAxNTBcblxuICBjb25zdHJ1Y3RvcihyZWNlbnRSZXF1ZXN0cykge1xuICAgIHRoaXMucmVjZW50UmVxdWVzdHMgPSByZWNlbnRSZXF1ZXN0cztcbiAgICB0aGlzLnByZWxvYWRlciA9IG5ldyBQcmVsb2FkZXIodGhpcywgdGhpcy52aWV3LnNuYXBzaG90Q2FjaGUpO1xuICAgIHRoaXMuZGVib3VuY2VkUmVmcmVzaCA9IHRoaXMucmVmcmVzaDtcbiAgICB0aGlzLnBhZ2VSZWZyZXNoRGVib3VuY2VQZXJpb2QgPSB0aGlzLnBhZ2VSZWZyZXNoRGVib3VuY2VQZXJpb2Q7XG4gIH1cblxuICBzdGFydCgpIHtcbiAgICBpZiAoIXRoaXMuc3RhcnRlZCkge1xuICAgICAgdGhpcy5wYWdlT2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICAgIHRoaXMuY2FjaGVPYnNlcnZlci5zdGFydCgpO1xuICAgICAgdGhpcy5saW5rUHJlZmV0Y2hPYnNlcnZlci5zdGFydCgpO1xuICAgICAgdGhpcy5mb3JtTGlua0NsaWNrT2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICAgIHRoaXMubGlua0NsaWNrT2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICAgIHRoaXMuZm9ybVN1Ym1pdE9ic2VydmVyLnN0YXJ0KCk7XG4gICAgICB0aGlzLnNjcm9sbE9ic2VydmVyLnN0YXJ0KCk7XG4gICAgICB0aGlzLnN0cmVhbU9ic2VydmVyLnN0YXJ0KCk7XG4gICAgICB0aGlzLmZyYW1lUmVkaXJlY3Rvci5zdGFydCgpO1xuICAgICAgdGhpcy5oaXN0b3J5LnN0YXJ0KCk7XG4gICAgICB0aGlzLnByZWxvYWRlci5zdGFydCgpO1xuICAgICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuZW5hYmxlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgZGlzYWJsZSgpIHtcbiAgICB0aGlzLmVuYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgdGhpcy5wYWdlT2JzZXJ2ZXIuc3RvcCgpO1xuICAgICAgdGhpcy5jYWNoZU9ic2VydmVyLnN0b3AoKTtcbiAgICAgIHRoaXMubGlua1ByZWZldGNoT2JzZXJ2ZXIuc3RvcCgpO1xuICAgICAgdGhpcy5mb3JtTGlua0NsaWNrT2JzZXJ2ZXIuc3RvcCgpO1xuICAgICAgdGhpcy5saW5rQ2xpY2tPYnNlcnZlci5zdG9wKCk7XG4gICAgICB0aGlzLmZvcm1TdWJtaXRPYnNlcnZlci5zdG9wKCk7XG4gICAgICB0aGlzLnNjcm9sbE9ic2VydmVyLnN0b3AoKTtcbiAgICAgIHRoaXMuc3RyZWFtT2JzZXJ2ZXIuc3RvcCgpO1xuICAgICAgdGhpcy5mcmFtZVJlZGlyZWN0b3Iuc3RvcCgpO1xuICAgICAgdGhpcy5oaXN0b3J5LnN0b3AoKTtcbiAgICAgIHRoaXMucHJlbG9hZGVyLnN0b3AoKTtcbiAgICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJlZ2lzdGVyQWRhcHRlcihhZGFwdGVyKSB7XG4gICAgdGhpcy5hZGFwdGVyID0gYWRhcHRlcjtcbiAgfVxuXG4gIHZpc2l0KGxvY2F0aW9uLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBmcmFtZUVsZW1lbnQgPSBvcHRpb25zLmZyYW1lID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQob3B0aW9ucy5mcmFtZSkgOiBudWxsO1xuXG4gICAgaWYgKGZyYW1lRWxlbWVudCBpbnN0YW5jZW9mIEZyYW1lRWxlbWVudCkge1xuICAgICAgY29uc3QgYWN0aW9uID0gb3B0aW9ucy5hY3Rpb24gfHwgZ2V0VmlzaXRBY3Rpb24oZnJhbWVFbGVtZW50KTtcblxuICAgICAgZnJhbWVFbGVtZW50LmRlbGVnYXRlLnByb3Bvc2VWaXNpdElmTmF2aWdhdGVkV2l0aEFjdGlvbihmcmFtZUVsZW1lbnQsIGFjdGlvbik7XG4gICAgICBmcmFtZUVsZW1lbnQuc3JjID0gbG9jYXRpb24udG9TdHJpbmcoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5uYXZpZ2F0b3IucHJvcG9zZVZpc2l0KGV4cGFuZFVSTChsb2NhdGlvbiksIG9wdGlvbnMpO1xuICAgIH1cbiAgfVxuXG4gIHJlZnJlc2godXJsLCByZXF1ZXN0SWQpIHtcbiAgICBjb25zdCBpc1JlY2VudFJlcXVlc3QgPSByZXF1ZXN0SWQgJiYgdGhpcy5yZWNlbnRSZXF1ZXN0cy5oYXMocmVxdWVzdElkKTtcbiAgICBjb25zdCBpc0N1cnJlbnRVcmwgPSB1cmwgPT09IGRvY3VtZW50LmJhc2VVUkk7XG4gICAgaWYgKCFpc1JlY2VudFJlcXVlc3QgJiYgIXRoaXMubmF2aWdhdG9yLmN1cnJlbnRWaXNpdCAmJiBpc0N1cnJlbnRVcmwpIHtcbiAgICAgIHRoaXMudmlzaXQodXJsLCB7IGFjdGlvbjogXCJyZXBsYWNlXCIsIHNob3VsZENhY2hlU25hcHNob3Q6IGZhbHNlIH0pO1xuICAgIH1cbiAgfVxuXG4gIGNvbm5lY3RTdHJlYW1Tb3VyY2Uoc291cmNlKSB7XG4gICAgdGhpcy5zdHJlYW1PYnNlcnZlci5jb25uZWN0U3RyZWFtU291cmNlKHNvdXJjZSk7XG4gIH1cblxuICBkaXNjb25uZWN0U3RyZWFtU291cmNlKHNvdXJjZSkge1xuICAgIHRoaXMuc3RyZWFtT2JzZXJ2ZXIuZGlzY29ubmVjdFN0cmVhbVNvdXJjZShzb3VyY2UpO1xuICB9XG5cbiAgcmVuZGVyU3RyZWFtTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgdGhpcy5zdHJlYW1NZXNzYWdlUmVuZGVyZXIucmVuZGVyKFN0cmVhbU1lc3NhZ2Uud3JhcChtZXNzYWdlKSk7XG4gIH1cblxuICBjbGVhckNhY2hlKCkge1xuICAgIHRoaXMudmlldy5jbGVhclNuYXBzaG90Q2FjaGUoKTtcbiAgfVxuXG4gIHNldFByb2dyZXNzQmFyRGVsYXkoZGVsYXkpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIlBsZWFzZSByZXBsYWNlIGBzZXNzaW9uLnNldFByb2dyZXNzQmFyRGVsYXkoZGVsYXkpYCB3aXRoIGBzZXNzaW9uLnByb2dyZXNzQmFyRGVsYXkgPSBkZWxheWAuIFRoZSBmdW5jdGlvbiBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbiBvZiBUdXJiby5gXCJcbiAgICApO1xuXG4gICAgdGhpcy5wcm9ncmVzc0JhckRlbGF5ID0gZGVsYXk7XG4gIH1cblxuICBzZXQgcHJvZ3Jlc3NCYXJEZWxheShkZWxheSkge1xuICAgIGNvbmZpZy5kcml2ZS5wcm9ncmVzc0JhckRlbGF5ID0gZGVsYXk7XG4gIH1cblxuICBnZXQgcHJvZ3Jlc3NCYXJEZWxheSgpIHtcbiAgICByZXR1cm4gY29uZmlnLmRyaXZlLnByb2dyZXNzQmFyRGVsYXlcbiAgfVxuXG4gIHNldCBkcml2ZSh2YWx1ZSkge1xuICAgIGNvbmZpZy5kcml2ZS5lbmFibGVkID0gdmFsdWU7XG4gIH1cblxuICBnZXQgZHJpdmUoKSB7XG4gICAgcmV0dXJuIGNvbmZpZy5kcml2ZS5lbmFibGVkXG4gIH1cblxuICBzZXQgZm9ybU1vZGUodmFsdWUpIHtcbiAgICBjb25maWcuZm9ybXMubW9kZSA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IGZvcm1Nb2RlKCkge1xuICAgIHJldHVybiBjb25maWcuZm9ybXMubW9kZVxuICB9XG5cbiAgZ2V0IGxvY2F0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmhpc3RvcnkubG9jYXRpb25cbiAgfVxuXG4gIGdldCByZXN0b3JhdGlvbklkZW50aWZpZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGlzdG9yeS5yZXN0b3JhdGlvbklkZW50aWZpZXJcbiAgfVxuXG4gIGdldCBwYWdlUmVmcmVzaERlYm91bmNlUGVyaW9kKCkge1xuICAgIHJldHVybiB0aGlzLiNwYWdlUmVmcmVzaERlYm91bmNlUGVyaW9kXG4gIH1cblxuICBzZXQgcGFnZVJlZnJlc2hEZWJvdW5jZVBlcmlvZCh2YWx1ZSkge1xuICAgIHRoaXMucmVmcmVzaCA9IGRlYm91bmNlKHRoaXMuZGVib3VuY2VkUmVmcmVzaC5iaW5kKHRoaXMpLCB2YWx1ZSk7XG4gICAgdGhpcy4jcGFnZVJlZnJlc2hEZWJvdW5jZVBlcmlvZCA9IHZhbHVlO1xuICB9XG5cbiAgLy8gUHJlbG9hZGVyIGRlbGVnYXRlXG5cbiAgc2hvdWxkUHJlbG9hZExpbmsoZWxlbWVudCkge1xuICAgIGNvbnN0IGlzVW5zYWZlID0gZWxlbWVudC5oYXNBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLW1ldGhvZFwiKTtcbiAgICBjb25zdCBpc1N0cmVhbSA9IGVsZW1lbnQuaGFzQXR0cmlidXRlKFwiZGF0YS10dXJiby1zdHJlYW1cIik7XG4gICAgY29uc3QgZnJhbWVUYXJnZXQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm8tZnJhbWVcIik7XG4gICAgY29uc3QgZnJhbWUgPSBmcmFtZVRhcmdldCA9PSBcIl90b3BcIiA/XG4gICAgICBudWxsIDpcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZyYW1lVGFyZ2V0KSB8fCBmaW5kQ2xvc2VzdFJlY3Vyc2l2ZWx5KGVsZW1lbnQsIFwidHVyYm8tZnJhbWU6bm90KFtkaXNhYmxlZF0pXCIpO1xuXG4gICAgaWYgKGlzVW5zYWZlIHx8IGlzU3RyZWFtIHx8IGZyYW1lIGluc3RhbmNlb2YgRnJhbWVFbGVtZW50KSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbG9jYXRpb24gPSBuZXcgVVJMKGVsZW1lbnQuaHJlZik7XG5cbiAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRJc05hdmlnYXRhYmxlKGVsZW1lbnQpICYmIGxvY2F0aW9uSXNWaXNpdGFibGUobG9jYXRpb24sIHRoaXMuc25hcHNob3Qucm9vdExvY2F0aW9uKVxuICAgIH1cbiAgfVxuXG4gIC8vIEhpc3RvcnkgZGVsZWdhdGVcblxuICBoaXN0b3J5UG9wcGVkVG9Mb2NhdGlvbldpdGhSZXN0b3JhdGlvbklkZW50aWZpZXJBbmREaXJlY3Rpb24obG9jYXRpb24sIHJlc3RvcmF0aW9uSWRlbnRpZmllciwgZGlyZWN0aW9uKSB7XG4gICAgaWYgKHRoaXMuZW5hYmxlZCkge1xuICAgICAgdGhpcy5uYXZpZ2F0b3Iuc3RhcnRWaXNpdChsb2NhdGlvbiwgcmVzdG9yYXRpb25JZGVudGlmaWVyLCB7XG4gICAgICAgIGFjdGlvbjogXCJyZXN0b3JlXCIsXG4gICAgICAgIGhpc3RvcnlDaGFuZ2VkOiB0cnVlLFxuICAgICAgICBkaXJlY3Rpb25cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFkYXB0ZXIucGFnZUludmFsaWRhdGVkKHtcbiAgICAgICAgcmVhc29uOiBcInR1cmJvX2Rpc2FibGVkXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIFNjcm9sbCBvYnNlcnZlciBkZWxlZ2F0ZVxuXG4gIHNjcm9sbFBvc2l0aW9uQ2hhbmdlZChwb3NpdGlvbikge1xuICAgIHRoaXMuaGlzdG9yeS51cGRhdGVSZXN0b3JhdGlvbkRhdGEoeyBzY3JvbGxQb3NpdGlvbjogcG9zaXRpb24gfSk7XG4gIH1cblxuICAvLyBGb3JtIGNsaWNrIG9ic2VydmVyIGRlbGVnYXRlXG5cbiAgd2lsbFN1Ym1pdEZvcm1MaW5rVG9Mb2NhdGlvbihsaW5rLCBsb2NhdGlvbikge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnRJc05hdmlnYXRhYmxlKGxpbmspICYmIGxvY2F0aW9uSXNWaXNpdGFibGUobG9jYXRpb24sIHRoaXMuc25hcHNob3Qucm9vdExvY2F0aW9uKVxuICB9XG5cbiAgc3VibWl0dGVkRm9ybUxpbmtUb0xvY2F0aW9uKCkge31cblxuICAvLyBMaW5rIGhvdmVyIG9ic2VydmVyIGRlbGVnYXRlXG5cbiAgY2FuUHJlZmV0Y2hSZXF1ZXN0VG9Mb2NhdGlvbihsaW5rLCBsb2NhdGlvbikge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLmVsZW1lbnRJc05hdmlnYXRhYmxlKGxpbmspICYmXG4gICAgICBsb2NhdGlvbklzVmlzaXRhYmxlKGxvY2F0aW9uLCB0aGlzLnNuYXBzaG90LnJvb3RMb2NhdGlvbikgJiZcbiAgICAgIHRoaXMubmF2aWdhdG9yLmxpbmtQcmVmZXRjaGluZ0lzRW5hYmxlZEZvckxvY2F0aW9uKGxvY2F0aW9uKVxuICAgIClcbiAgfVxuXG4gIC8vIExpbmsgY2xpY2sgb2JzZXJ2ZXIgZGVsZWdhdGVcblxuICB3aWxsRm9sbG93TGlua1RvTG9jYXRpb24obGluaywgbG9jYXRpb24sIGV2ZW50KSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuZWxlbWVudElzTmF2aWdhdGFibGUobGluaykgJiZcbiAgICAgIGxvY2F0aW9uSXNWaXNpdGFibGUobG9jYXRpb24sIHRoaXMuc25hcHNob3Qucm9vdExvY2F0aW9uKSAmJlxuICAgICAgdGhpcy5hcHBsaWNhdGlvbkFsbG93c0ZvbGxvd2luZ0xpbmtUb0xvY2F0aW9uKGxpbmssIGxvY2F0aW9uLCBldmVudClcbiAgICApXG4gIH1cblxuICBmb2xsb3dlZExpbmtUb0xvY2F0aW9uKGxpbmssIGxvY2F0aW9uKSB7XG4gICAgY29uc3QgYWN0aW9uID0gdGhpcy5nZXRBY3Rpb25Gb3JMaW5rKGxpbmspO1xuICAgIGNvbnN0IGFjY2VwdHNTdHJlYW1SZXNwb25zZSA9IGxpbmsuaGFzQXR0cmlidXRlKFwiZGF0YS10dXJiby1zdHJlYW1cIik7XG5cbiAgICB0aGlzLnZpc2l0KGxvY2F0aW9uLmhyZWYsIHsgYWN0aW9uLCBhY2NlcHRzU3RyZWFtUmVzcG9uc2UgfSk7XG4gIH1cblxuICAvLyBOYXZpZ2F0b3IgZGVsZWdhdGVcblxuICBhbGxvd3NWaXNpdGluZ0xvY2F0aW9uV2l0aEFjdGlvbihsb2NhdGlvbiwgYWN0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMubG9jYXRpb25XaXRoQWN0aW9uSXNTYW1lUGFnZShsb2NhdGlvbiwgYWN0aW9uKSB8fCB0aGlzLmFwcGxpY2F0aW9uQWxsb3dzVmlzaXRpbmdMb2NhdGlvbihsb2NhdGlvbilcbiAgfVxuXG4gIHZpc2l0UHJvcG9zZWRUb0xvY2F0aW9uKGxvY2F0aW9uLCBvcHRpb25zKSB7XG4gICAgZXh0ZW5kVVJMV2l0aERlcHJlY2F0ZWRQcm9wZXJ0aWVzKGxvY2F0aW9uKTtcbiAgICB0aGlzLmFkYXB0ZXIudmlzaXRQcm9wb3NlZFRvTG9jYXRpb24obG9jYXRpb24sIG9wdGlvbnMpO1xuICB9XG5cbiAgLy8gVmlzaXQgZGVsZWdhdGVcblxuICB2aXNpdFN0YXJ0ZWQodmlzaXQpIHtcbiAgICBpZiAoIXZpc2l0LmFjY2VwdHNTdHJlYW1SZXNwb25zZSkge1xuICAgICAgbWFya0FzQnVzeShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpO1xuICAgICAgdGhpcy52aWV3Lm1hcmtWaXNpdERpcmVjdGlvbih2aXNpdC5kaXJlY3Rpb24pO1xuICAgIH1cbiAgICBleHRlbmRVUkxXaXRoRGVwcmVjYXRlZFByb3BlcnRpZXModmlzaXQubG9jYXRpb24pO1xuICAgIGlmICghdmlzaXQuc2lsZW50KSB7XG4gICAgICB0aGlzLm5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJWaXNpdGluZ0xvY2F0aW9uKHZpc2l0LmxvY2F0aW9uLCB2aXNpdC5hY3Rpb24pO1xuICAgIH1cbiAgfVxuXG4gIHZpc2l0Q29tcGxldGVkKHZpc2l0KSB7XG4gICAgdGhpcy52aWV3LnVubWFya1Zpc2l0RGlyZWN0aW9uKCk7XG4gICAgY2xlYXJCdXN5U3RhdGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTtcbiAgICB0aGlzLm5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJQYWdlTG9hZCh2aXNpdC5nZXRUaW1pbmdNZXRyaWNzKCkpO1xuICB9XG5cbiAgbG9jYXRpb25XaXRoQWN0aW9uSXNTYW1lUGFnZShsb2NhdGlvbiwgYWN0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMubmF2aWdhdG9yLmxvY2F0aW9uV2l0aEFjdGlvbklzU2FtZVBhZ2UobG9jYXRpb24sIGFjdGlvbilcbiAgfVxuXG4gIHZpc2l0U2Nyb2xsZWRUb1NhbWVQYWdlTG9jYXRpb24ob2xkVVJMLCBuZXdVUkwpIHtcbiAgICB0aGlzLm5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJWaXNpdGluZ1NhbWVQYWdlTG9jYXRpb24ob2xkVVJMLCBuZXdVUkwpO1xuICB9XG5cbiAgLy8gRm9ybSBzdWJtaXQgb2JzZXJ2ZXIgZGVsZWdhdGVcblxuICB3aWxsU3VibWl0Rm9ybShmb3JtLCBzdWJtaXR0ZXIpIHtcbiAgICBjb25zdCBhY3Rpb24gPSBnZXRBY3Rpb24kMShmb3JtLCBzdWJtaXR0ZXIpO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuc3VibWlzc2lvbklzTmF2aWdhdGFibGUoZm9ybSwgc3VibWl0dGVyKSAmJlxuICAgICAgbG9jYXRpb25Jc1Zpc2l0YWJsZShleHBhbmRVUkwoYWN0aW9uKSwgdGhpcy5zbmFwc2hvdC5yb290TG9jYXRpb24pXG4gICAgKVxuICB9XG5cbiAgZm9ybVN1Ym1pdHRlZChmb3JtLCBzdWJtaXR0ZXIpIHtcbiAgICB0aGlzLm5hdmlnYXRvci5zdWJtaXRGb3JtKGZvcm0sIHN1Ym1pdHRlcik7XG4gIH1cblxuICAvLyBQYWdlIG9ic2VydmVyIGRlbGVnYXRlXG5cbiAgcGFnZUJlY2FtZUludGVyYWN0aXZlKCkge1xuICAgIHRoaXMudmlldy5sYXN0UmVuZGVyZWRMb2NhdGlvbiA9IHRoaXMubG9jYXRpb247XG4gICAgdGhpcy5ub3RpZnlBcHBsaWNhdGlvbkFmdGVyUGFnZUxvYWQoKTtcbiAgfVxuXG4gIHBhZ2VMb2FkZWQoKSB7XG4gICAgdGhpcy5oaXN0b3J5LmFzc3VtZUNvbnRyb2xPZlNjcm9sbFJlc3RvcmF0aW9uKCk7XG4gIH1cblxuICBwYWdlV2lsbFVubG9hZCgpIHtcbiAgICB0aGlzLmhpc3RvcnkucmVsaW5xdWlzaENvbnRyb2xPZlNjcm9sbFJlc3RvcmF0aW9uKCk7XG4gIH1cblxuICAvLyBTdHJlYW0gb2JzZXJ2ZXIgZGVsZWdhdGVcblxuICByZWNlaXZlZE1lc3NhZ2VGcm9tU3RyZWFtKG1lc3NhZ2UpIHtcbiAgICB0aGlzLnJlbmRlclN0cmVhbU1lc3NhZ2UobWVzc2FnZSk7XG4gIH1cblxuICAvLyBQYWdlIHZpZXcgZGVsZWdhdGVcblxuICB2aWV3V2lsbENhY2hlU25hcHNob3QoKSB7XG4gICAgaWYgKCF0aGlzLm5hdmlnYXRvci5jdXJyZW50VmlzaXQ/LnNpbGVudCkge1xuICAgICAgdGhpcy5ub3RpZnlBcHBsaWNhdGlvbkJlZm9yZUNhY2hpbmdTbmFwc2hvdCgpO1xuICAgIH1cbiAgfVxuXG4gIGFsbG93c0ltbWVkaWF0ZVJlbmRlcih7IGVsZW1lbnQgfSwgb3B0aW9ucykge1xuICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5ub3RpZnlBcHBsaWNhdGlvbkJlZm9yZVJlbmRlcihlbGVtZW50LCBvcHRpb25zKTtcbiAgICBjb25zdCB7XG4gICAgICBkZWZhdWx0UHJldmVudGVkLFxuICAgICAgZGV0YWlsOiB7IHJlbmRlciB9XG4gICAgfSA9IGV2ZW50O1xuXG4gICAgaWYgKHRoaXMudmlldy5yZW5kZXJlciAmJiByZW5kZXIpIHtcbiAgICAgIHRoaXMudmlldy5yZW5kZXJlci5yZW5kZXJFbGVtZW50ID0gcmVuZGVyO1xuICAgIH1cblxuICAgIHJldHVybiAhZGVmYXVsdFByZXZlbnRlZFxuICB9XG5cbiAgdmlld1JlbmRlcmVkU25hcHNob3QoX3NuYXBzaG90LCBfaXNQcmV2aWV3LCByZW5kZXJNZXRob2QpIHtcbiAgICB0aGlzLnZpZXcubGFzdFJlbmRlcmVkTG9jYXRpb24gPSB0aGlzLmhpc3RvcnkubG9jYXRpb247XG4gICAgdGhpcy5ub3RpZnlBcHBsaWNhdGlvbkFmdGVyUmVuZGVyKHJlbmRlck1ldGhvZCk7XG4gIH1cblxuICBwcmVsb2FkT25Mb2FkTGlua3NGb3JWaWV3KGVsZW1lbnQpIHtcbiAgICB0aGlzLnByZWxvYWRlci5wcmVsb2FkT25Mb2FkTGlua3NGb3JWaWV3KGVsZW1lbnQpO1xuICB9XG5cbiAgdmlld0ludmFsaWRhdGVkKHJlYXNvbikge1xuICAgIHRoaXMuYWRhcHRlci5wYWdlSW52YWxpZGF0ZWQocmVhc29uKTtcbiAgfVxuXG4gIC8vIEZyYW1lIGVsZW1lbnRcblxuICBmcmFtZUxvYWRlZChmcmFtZSkge1xuICAgIHRoaXMubm90aWZ5QXBwbGljYXRpb25BZnRlckZyYW1lTG9hZChmcmFtZSk7XG4gIH1cblxuICBmcmFtZVJlbmRlcmVkKGZldGNoUmVzcG9uc2UsIGZyYW1lKSB7XG4gICAgdGhpcy5ub3RpZnlBcHBsaWNhdGlvbkFmdGVyRnJhbWVSZW5kZXIoZmV0Y2hSZXNwb25zZSwgZnJhbWUpO1xuICB9XG5cbiAgLy8gQXBwbGljYXRpb24gZXZlbnRzXG5cbiAgYXBwbGljYXRpb25BbGxvd3NGb2xsb3dpbmdMaW5rVG9Mb2NhdGlvbihsaW5rLCBsb2NhdGlvbiwgZXYpIHtcbiAgICBjb25zdCBldmVudCA9IHRoaXMubm90aWZ5QXBwbGljYXRpb25BZnRlckNsaWNraW5nTGlua1RvTG9jYXRpb24obGluaywgbG9jYXRpb24sIGV2KTtcbiAgICByZXR1cm4gIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWRcbiAgfVxuXG4gIGFwcGxpY2F0aW9uQWxsb3dzVmlzaXRpbmdMb2NhdGlvbihsb2NhdGlvbikge1xuICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5ub3RpZnlBcHBsaWNhdGlvbkJlZm9yZVZpc2l0aW5nTG9jYXRpb24obG9jYXRpb24pO1xuICAgIHJldHVybiAhZXZlbnQuZGVmYXVsdFByZXZlbnRlZFxuICB9XG5cbiAgbm90aWZ5QXBwbGljYXRpb25BZnRlckNsaWNraW5nTGlua1RvTG9jYXRpb24obGluaywgbG9jYXRpb24sIGV2ZW50KSB7XG4gICAgcmV0dXJuIGRpc3BhdGNoKFwidHVyYm86Y2xpY2tcIiwge1xuICAgICAgdGFyZ2V0OiBsaW5rLFxuICAgICAgZGV0YWlsOiB7IHVybDogbG9jYXRpb24uaHJlZiwgb3JpZ2luYWxFdmVudDogZXZlbnQgfSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICB9KVxuICB9XG5cbiAgbm90aWZ5QXBwbGljYXRpb25CZWZvcmVWaXNpdGluZ0xvY2F0aW9uKGxvY2F0aW9uKSB7XG4gICAgcmV0dXJuIGRpc3BhdGNoKFwidHVyYm86YmVmb3JlLXZpc2l0XCIsIHtcbiAgICAgIGRldGFpbDogeyB1cmw6IGxvY2F0aW9uLmhyZWYgfSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICB9KVxuICB9XG5cbiAgbm90aWZ5QXBwbGljYXRpb25BZnRlclZpc2l0aW5nTG9jYXRpb24obG9jYXRpb24sIGFjdGlvbikge1xuICAgIHJldHVybiBkaXNwYXRjaChcInR1cmJvOnZpc2l0XCIsIHsgZGV0YWlsOiB7IHVybDogbG9jYXRpb24uaHJlZiwgYWN0aW9uIH0gfSlcbiAgfVxuXG4gIG5vdGlmeUFwcGxpY2F0aW9uQmVmb3JlQ2FjaGluZ1NuYXBzaG90KCkge1xuICAgIHJldHVybiBkaXNwYXRjaChcInR1cmJvOmJlZm9yZS1jYWNoZVwiKVxuICB9XG5cbiAgbm90aWZ5QXBwbGljYXRpb25CZWZvcmVSZW5kZXIobmV3Qm9keSwgb3B0aW9ucykge1xuICAgIHJldHVybiBkaXNwYXRjaChcInR1cmJvOmJlZm9yZS1yZW5kZXJcIiwge1xuICAgICAgZGV0YWlsOiB7IG5ld0JvZHksIC4uLm9wdGlvbnMgfSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICB9KVxuICB9XG5cbiAgbm90aWZ5QXBwbGljYXRpb25BZnRlclJlbmRlcihyZW5kZXJNZXRob2QpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2goXCJ0dXJibzpyZW5kZXJcIiwgeyBkZXRhaWw6IHsgcmVuZGVyTWV0aG9kIH0gfSlcbiAgfVxuXG4gIG5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJQYWdlTG9hZCh0aW1pbmcgPSB7fSkge1xuICAgIHJldHVybiBkaXNwYXRjaChcInR1cmJvOmxvYWRcIiwge1xuICAgICAgZGV0YWlsOiB7IHVybDogdGhpcy5sb2NhdGlvbi5ocmVmLCB0aW1pbmcgfVxuICAgIH0pXG4gIH1cblxuICBub3RpZnlBcHBsaWNhdGlvbkFmdGVyVmlzaXRpbmdTYW1lUGFnZUxvY2F0aW9uKG9sZFVSTCwgbmV3VVJMKSB7XG4gICAgZGlzcGF0Y2hFdmVudChcbiAgICAgIG5ldyBIYXNoQ2hhbmdlRXZlbnQoXCJoYXNoY2hhbmdlXCIsIHtcbiAgICAgICAgb2xkVVJMOiBvbGRVUkwudG9TdHJpbmcoKSxcbiAgICAgICAgbmV3VVJMOiBuZXdVUkwudG9TdHJpbmcoKVxuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgbm90aWZ5QXBwbGljYXRpb25BZnRlckZyYW1lTG9hZChmcmFtZSkge1xuICAgIHJldHVybiBkaXNwYXRjaChcInR1cmJvOmZyYW1lLWxvYWRcIiwgeyB0YXJnZXQ6IGZyYW1lIH0pXG4gIH1cblxuICBub3RpZnlBcHBsaWNhdGlvbkFmdGVyRnJhbWVSZW5kZXIoZmV0Y2hSZXNwb25zZSwgZnJhbWUpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2goXCJ0dXJibzpmcmFtZS1yZW5kZXJcIiwge1xuICAgICAgZGV0YWlsOiB7IGZldGNoUmVzcG9uc2UgfSxcbiAgICAgIHRhcmdldDogZnJhbWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSlcbiAgfVxuXG4gIC8vIEhlbHBlcnNcblxuICBzdWJtaXNzaW9uSXNOYXZpZ2F0YWJsZShmb3JtLCBzdWJtaXR0ZXIpIHtcbiAgICBpZiAoY29uZmlnLmZvcm1zLm1vZGUgPT0gXCJvZmZcIikge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHN1Ym1pdHRlcklzTmF2aWdhdGFibGUgPSBzdWJtaXR0ZXIgPyB0aGlzLmVsZW1lbnRJc05hdmlnYXRhYmxlKHN1Ym1pdHRlcikgOiB0cnVlO1xuXG4gICAgICBpZiAoY29uZmlnLmZvcm1zLm1vZGUgPT0gXCJvcHRpblwiKSB7XG4gICAgICAgIHJldHVybiBzdWJtaXR0ZXJJc05hdmlnYXRhYmxlICYmIGZvcm0uY2xvc2VzdCgnW2RhdGEtdHVyYm89XCJ0cnVlXCJdJykgIT0gbnVsbFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHN1Ym1pdHRlcklzTmF2aWdhdGFibGUgJiYgdGhpcy5lbGVtZW50SXNOYXZpZ2F0YWJsZShmb3JtKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGVsZW1lbnRJc05hdmlnYXRhYmxlKGVsZW1lbnQpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSBmaW5kQ2xvc2VzdFJlY3Vyc2l2ZWx5KGVsZW1lbnQsIFwiW2RhdGEtdHVyYm9dXCIpO1xuICAgIGNvbnN0IHdpdGhpbkZyYW1lID0gZmluZENsb3Nlc3RSZWN1cnNpdmVseShlbGVtZW50LCBcInR1cmJvLWZyYW1lXCIpO1xuXG4gICAgLy8gQ2hlY2sgaWYgRHJpdmUgaXMgZW5hYmxlZCBvbiB0aGUgc2Vzc2lvbiBvciB3ZSdyZSB3aXRoaW4gYSBGcmFtZS5cbiAgICBpZiAoY29uZmlnLmRyaXZlLmVuYWJsZWQgfHwgd2l0aGluRnJhbWUpIHtcbiAgICAgIC8vIEVsZW1lbnQgaXMgbmF2aWdhdGFibGUgYnkgZGVmYXVsdCwgdW5sZXNzIGBkYXRhLXR1cmJvPVwiZmFsc2VcImAuXG4gICAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICAgIHJldHVybiBjb250YWluZXIuZ2V0QXR0cmlidXRlKFwiZGF0YS10dXJib1wiKSAhPSBcImZhbHNlXCJcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEVsZW1lbnQgaXNuJ3QgbmF2aWdhdGFibGUgYnkgZGVmYXVsdCwgdW5sZXNzIGBkYXRhLXR1cmJvPVwidHJ1ZVwiYC5cbiAgICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvXCIpID09IFwidHJ1ZVwiXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBQcml2YXRlXG5cbiAgZ2V0QWN0aW9uRm9yTGluayhsaW5rKSB7XG4gICAgcmV0dXJuIGdldFZpc2l0QWN0aW9uKGxpbmspIHx8IFwiYWR2YW5jZVwiXG4gIH1cblxuICBnZXQgc25hcHNob3QoKSB7XG4gICAgcmV0dXJuIHRoaXMudmlldy5zbmFwc2hvdFxuICB9XG59XG5cbi8vIE9sZGVyIHZlcnNpb25zIG9mIHRoZSBUdXJibyBOYXRpdmUgYWRhcHRlcnMgcmVmZXJlbmNlZCB0aGVcbi8vIGBMb2NhdGlvbiNhYnNvbHV0ZVVSTGAgcHJvcGVydHkgaW4gdGhlaXIgaW1wbGVtZW50YXRpb25zIG9mXG4vLyB0aGUgYEFkYXB0ZXIjdmlzaXRQcm9wb3NlZFRvTG9jYXRpb24oKWAgYW5kIGAjdmlzaXRTdGFydGVkKClgXG4vLyBtZXRob2RzLiBUaGUgTG9jYXRpb24gY2xhc3MgaGFzIHNpbmNlIGJlZW4gcmVtb3ZlZCBpbiBmYXZvclxuLy8gb2YgdGhlIERPTSBVUkwgQVBJLCBhbmQgYWNjb3JkaW5nbHkgYWxsIEFkYXB0ZXIgbWV0aG9kcyBub3dcbi8vIHJlY2VpdmUgVVJMIG9iamVjdHMuXG4vL1xuLy8gV2UgYWxpYXMgI2Fic29sdXRlVVJMIHRvICN0b1N0cmluZygpIGhlcmUgdG8gYXZvaWQgY3Jhc2hpbmdcbi8vIG9sZGVyIGFkYXB0ZXJzIHdoaWNoIGRvIG5vdCBleHBlY3QgVVJMIG9iamVjdHMuIFdlIHNob3VsZFxuLy8gY29uc2lkZXIgcmVtb3ZpbmcgdGhpcyBzdXBwb3J0IGF0IHNvbWUgcG9pbnQgaW4gdGhlIGZ1dHVyZS5cblxuZnVuY3Rpb24gZXh0ZW5kVVJMV2l0aERlcHJlY2F0ZWRQcm9wZXJ0aWVzKHVybCkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh1cmwsIGRlcHJlY2F0ZWRMb2NhdGlvblByb3BlcnR5RGVzY3JpcHRvcnMpO1xufVxuXG5jb25zdCBkZXByZWNhdGVkTG9jYXRpb25Qcm9wZXJ0eURlc2NyaXB0b3JzID0ge1xuICBhYnNvbHV0ZVVSTDoge1xuICAgIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnRvU3RyaW5nKClcbiAgICB9XG4gIH1cbn07XG5cbmNvbnN0IHNlc3Npb24gPSBuZXcgU2Vzc2lvbihyZWNlbnRSZXF1ZXN0cyk7XG5jb25zdCB7IGNhY2hlLCBuYXZpZ2F0b3I6IG5hdmlnYXRvciQxIH0gPSBzZXNzaW9uO1xuXG4vKipcbiAqIFN0YXJ0cyB0aGUgbWFpbiBzZXNzaW9uLlxuICogVGhpcyBpbml0aWFsaXNlcyBhbnkgbmVjZXNzYXJ5IG9ic2VydmVycyBzdWNoIGFzIHRob3NlIHRvIG1vbml0b3JcbiAqIGxpbmsgaW50ZXJhY3Rpb25zLlxuICovXG5mdW5jdGlvbiBzdGFydCgpIHtcbiAgc2Vzc2lvbi5zdGFydCgpO1xufVxuXG4vKipcbiAqIFJlZ2lzdGVycyBhbiBhZGFwdGVyIGZvciB0aGUgbWFpbiBzZXNzaW9uLlxuICpcbiAqIEBwYXJhbSBhZGFwdGVyIEFkYXB0ZXIgdG8gcmVnaXN0ZXJcbiAqL1xuZnVuY3Rpb24gcmVnaXN0ZXJBZGFwdGVyKGFkYXB0ZXIpIHtcbiAgc2Vzc2lvbi5yZWdpc3RlckFkYXB0ZXIoYWRhcHRlcik7XG59XG5cbi8qKlxuICogUGVyZm9ybXMgYW4gYXBwbGljYXRpb24gdmlzaXQgdG8gdGhlIGdpdmVuIGxvY2F0aW9uLlxuICpcbiAqIEBwYXJhbSBsb2NhdGlvbiBMb2NhdGlvbiB0byB2aXNpdCAoYSBVUkwgb3IgcGF0aClcbiAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgdG8gYXBwbHlcbiAqIEBwYXJhbSBvcHRpb25zLmFjdGlvbiBUeXBlIG9mIGhpc3RvcnkgbmF2aWdhdGlvbiB0byBhcHBseSAoXCJyZXN0b3JlXCIsXG4gKiBcInJlcGxhY2VcIiBvciBcImFkdmFuY2VcIilcbiAqIEBwYXJhbSBvcHRpb25zLmhpc3RvcnlDaGFuZ2VkIFNwZWNpZmllcyB3aGV0aGVyIHRoZSBicm93c2VyIGhpc3RvcnkgaGFzXG4gKiBhbHJlYWR5IGJlZW4gY2hhbmdlZCBmb3IgdGhpcyB2aXNpdCBvciBub3RcbiAqIEBwYXJhbSBvcHRpb25zLnJlZmVycmVyIFNwZWNpZmllcyB0aGUgcmVmZXJyZXIgb2YgdGhpcyB2aXNpdCBzdWNoIHRoYXRcbiAqIG5hdmlnYXRpb25zIHRvIHRoZSBzYW1lIHBhZ2Ugd2lsbCBub3QgcmVzdWx0IGluIGEgbmV3IGhpc3RvcnkgZW50cnkuXG4gKiBAcGFyYW0gb3B0aW9ucy5zbmFwc2hvdEhUTUwgQ2FjaGVkIHNuYXBzaG90IHRvIHJlbmRlclxuICogQHBhcmFtIG9wdGlvbnMucmVzcG9uc2UgUmVzcG9uc2Ugb2YgdGhlIHNwZWNpZmllZCBsb2NhdGlvblxuICovXG5mdW5jdGlvbiB2aXNpdChsb2NhdGlvbiwgb3B0aW9ucykge1xuICBzZXNzaW9uLnZpc2l0KGxvY2F0aW9uLCBvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBDb25uZWN0cyBhIHN0cmVhbSBzb3VyY2UgdG8gdGhlIG1haW4gc2Vzc2lvbi5cbiAqXG4gKiBAcGFyYW0gc291cmNlIFN0cmVhbSBzb3VyY2UgdG8gY29ubmVjdFxuICovXG5mdW5jdGlvbiBjb25uZWN0U3RyZWFtU291cmNlKHNvdXJjZSkge1xuICBzZXNzaW9uLmNvbm5lY3RTdHJlYW1Tb3VyY2Uoc291cmNlKTtcbn1cblxuLyoqXG4gKiBEaXNjb25uZWN0cyBhIHN0cmVhbSBzb3VyY2UgZnJvbSB0aGUgbWFpbiBzZXNzaW9uLlxuICpcbiAqIEBwYXJhbSBzb3VyY2UgU3RyZWFtIHNvdXJjZSB0byBkaXNjb25uZWN0XG4gKi9cbmZ1bmN0aW9uIGRpc2Nvbm5lY3RTdHJlYW1Tb3VyY2Uoc291cmNlKSB7XG4gIHNlc3Npb24uZGlzY29ubmVjdFN0cmVhbVNvdXJjZShzb3VyY2UpO1xufVxuXG4vKipcbiAqIFJlbmRlcnMgYSBzdHJlYW0gbWVzc2FnZSB0byB0aGUgbWFpbiBzZXNzaW9uIGJ5IGFwcGVuZGluZyBpdCB0byB0aGVcbiAqIGN1cnJlbnQgZG9jdW1lbnQuXG4gKlxuICogQHBhcmFtIG1lc3NhZ2UgTWVzc2FnZSB0byByZW5kZXJcbiAqL1xuZnVuY3Rpb24gcmVuZGVyU3RyZWFtTWVzc2FnZShtZXNzYWdlKSB7XG4gIHNlc3Npb24ucmVuZGVyU3RyZWFtTWVzc2FnZShtZXNzYWdlKTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBlbnRyaWVzIGZyb20gdGhlIFR1cmJvIERyaXZlIHBhZ2UgY2FjaGUuXG4gKiBDYWxsIHRoaXMgd2hlbiBzdGF0ZSBoYXMgY2hhbmdlZCBvbiB0aGUgc2VydmVyIHRoYXQgbWF5IGFmZmVjdCBjYWNoZWQgcGFnZXMuXG4gKlxuICogQGRlcHJlY2F0ZWQgc2luY2UgdmVyc2lvbiA3LjIuMCBpbiBmYXZvciBvZiBgVHVyYm8uY2FjaGUuY2xlYXIoKWBcbiAqL1xuZnVuY3Rpb24gY2xlYXJDYWNoZSgpIHtcbiAgY29uc29sZS53YXJuKFxuICAgIFwiUGxlYXNlIHJlcGxhY2UgYFR1cmJvLmNsZWFyQ2FjaGUoKWAgd2l0aCBgVHVyYm8uY2FjaGUuY2xlYXIoKWAuIFRoZSB0b3AtbGV2ZWwgZnVuY3Rpb24gaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHZlcnNpb24gb2YgVHVyYm8uYFwiXG4gICk7XG4gIHNlc3Npb24uY2xlYXJDYWNoZSgpO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIGRlbGF5IGFmdGVyIHdoaWNoIHRoZSBwcm9ncmVzcyBiYXIgd2lsbCBhcHBlYXIgZHVyaW5nIG5hdmlnYXRpb24uXG4gKlxuICogVGhlIHByb2dyZXNzIGJhciBhcHBlYXJzIGFmdGVyIDUwMG1zIGJ5IGRlZmF1bHQuXG4gKlxuICogTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGhhcyBubyBlZmZlY3Qgd2hlbiB1c2VkIHdpdGggdGhlIGlPUyBvciBBbmRyb2lkXG4gKiBhZGFwdGVycy5cbiAqXG4gKiBAcGFyYW0gZGVsYXkgVGltZSB0byBkZWxheSBpbiBtaWxsaXNlY29uZHNcbiAqL1xuZnVuY3Rpb24gc2V0UHJvZ3Jlc3NCYXJEZWxheShkZWxheSkge1xuICBjb25zb2xlLndhcm4oXG4gICAgXCJQbGVhc2UgcmVwbGFjZSBgVHVyYm8uc2V0UHJvZ3Jlc3NCYXJEZWxheShkZWxheSlgIHdpdGggYFR1cmJvLmNvbmZpZy5kcml2ZS5wcm9ncmVzc0JhckRlbGF5ID0gZGVsYXlgLiBUaGUgdG9wLWxldmVsIGZ1bmN0aW9uIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSB2ZXJzaW9uIG9mIFR1cmJvLmBcIlxuICApO1xuICBjb25maWcuZHJpdmUucHJvZ3Jlc3NCYXJEZWxheSA9IGRlbGF5O1xufVxuXG5mdW5jdGlvbiBzZXRDb25maXJtTWV0aG9kKGNvbmZpcm1NZXRob2QpIHtcbiAgY29uc29sZS53YXJuKFxuICAgIFwiUGxlYXNlIHJlcGxhY2UgYFR1cmJvLnNldENvbmZpcm1NZXRob2QoY29uZmlybU1ldGhvZClgIHdpdGggYFR1cmJvLmNvbmZpZy5mb3Jtcy5jb25maXJtID0gY29uZmlybU1ldGhvZGAuIFRoZSB0b3AtbGV2ZWwgZnVuY3Rpb24gaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHZlcnNpb24gb2YgVHVyYm8uYFwiXG4gICk7XG4gIGNvbmZpZy5mb3Jtcy5jb25maXJtID0gY29uZmlybU1ldGhvZDtcbn1cblxuZnVuY3Rpb24gc2V0Rm9ybU1vZGUobW9kZSkge1xuICBjb25zb2xlLndhcm4oXG4gICAgXCJQbGVhc2UgcmVwbGFjZSBgVHVyYm8uc2V0Rm9ybU1vZGUobW9kZSlgIHdpdGggYFR1cmJvLmNvbmZpZy5mb3Jtcy5tb2RlID0gbW9kZWAuIFRoZSB0b3AtbGV2ZWwgZnVuY3Rpb24gaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHZlcnNpb24gb2YgVHVyYm8uYFwiXG4gICk7XG4gIGNvbmZpZy5mb3Jtcy5tb2RlID0gbW9kZTtcbn1cblxuLyoqXG4gKiBNb3JwaCB0aGUgc3RhdGUgb2YgdGhlIGN1cnJlbnRCb2R5IGJhc2VkIG9uIHRoZSBhdHRyaWJ1dGVzIGFuZCBjb250ZW50cyBvZlxuICogdGhlIG5ld0JvZHkuIE1vcnBoaW5nIGJvZHkgZWxlbWVudHMgbWF5IGRpc3BhdGNoIHR1cmJvOm1vcnBoLFxuICogdHVyYm86YmVmb3JlLW1vcnBoLWVsZW1lbnQsIHR1cmJvOmJlZm9yZS1tb3JwaC1hdHRyaWJ1dGUsIGFuZFxuICogdHVyYm86bW9ycGgtZWxlbWVudCBldmVudHMuXG4gKlxuICogQHBhcmFtIGN1cnJlbnRCb2R5IEhUTUxCb2R5RWxlbWVudCBkZXN0aW5hdGlvbiBvZiBtb3JwaGluZyBjaGFuZ2VzXG4gKiBAcGFyYW0gbmV3Qm9keSBIVE1MQm9keUVsZW1lbnQgc291cmNlIG9mIG1vcnBoaW5nIGNoYW5nZXNcbiAqL1xuZnVuY3Rpb24gbW9ycGhCb2R5RWxlbWVudHMoY3VycmVudEJvZHksIG5ld0JvZHkpIHtcbiAgTW9ycGhpbmdQYWdlUmVuZGVyZXIucmVuZGVyRWxlbWVudChjdXJyZW50Qm9keSwgbmV3Qm9keSk7XG59XG5cbi8qKlxuICogTW9ycGggdGhlIGNoaWxkIGVsZW1lbnRzIG9mIHRoZSBjdXJyZW50RnJhbWUgYmFzZWQgb24gdGhlIGNoaWxkIGVsZW1lbnRzIG9mXG4gKiB0aGUgbmV3RnJhbWUuIE1vcnBoaW5nIHR1cmJvLWZyYW1lIGVsZW1lbnRzIG1heSBkaXNwYXRjaCB0dXJibzpiZWZvcmUtZnJhbWUtbW9ycGgsXG4gKiB0dXJibzpiZWZvcmUtbW9ycGgtZWxlbWVudCwgdHVyYm86YmVmb3JlLW1vcnBoLWF0dHJpYnV0ZSwgYW5kXG4gKiB0dXJibzptb3JwaC1lbGVtZW50IGV2ZW50cy5cbiAqXG4gKiBAcGFyYW0gY3VycmVudEZyYW1lIEZyYW1lRWxlbWVudCBkZXN0aW5hdGlvbiBvZiBtb3JwaGluZyBjaGlsZHJlbiBjaGFuZ2VzXG4gKiBAcGFyYW0gbmV3RnJhbWUgRnJhbWVFbGVtZW50IHNvdXJjZSBvZiBtb3JwaGluZyBjaGlsZHJlbiBjaGFuZ2VzXG4gKi9cbmZ1bmN0aW9uIG1vcnBoVHVyYm9GcmFtZUVsZW1lbnRzKGN1cnJlbnRGcmFtZSwgbmV3RnJhbWUpIHtcbiAgTW9ycGhpbmdGcmFtZVJlbmRlcmVyLnJlbmRlckVsZW1lbnQoY3VycmVudEZyYW1lLCBuZXdGcmFtZSk7XG59XG5cbnZhciBUdXJibyA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgX19wcm90b19fOiBudWxsLFxuICBuYXZpZ2F0b3I6IG5hdmlnYXRvciQxLFxuICBzZXNzaW9uOiBzZXNzaW9uLFxuICBjYWNoZTogY2FjaGUsXG4gIFBhZ2VSZW5kZXJlcjogUGFnZVJlbmRlcmVyLFxuICBQYWdlU25hcHNob3Q6IFBhZ2VTbmFwc2hvdCxcbiAgRnJhbWVSZW5kZXJlcjogRnJhbWVSZW5kZXJlcixcbiAgZmV0Y2g6IGZldGNoV2l0aFR1cmJvSGVhZGVycyxcbiAgY29uZmlnOiBjb25maWcsXG4gIHN0YXJ0OiBzdGFydCxcbiAgcmVnaXN0ZXJBZGFwdGVyOiByZWdpc3RlckFkYXB0ZXIsXG4gIHZpc2l0OiB2aXNpdCxcbiAgY29ubmVjdFN0cmVhbVNvdXJjZTogY29ubmVjdFN0cmVhbVNvdXJjZSxcbiAgZGlzY29ubmVjdFN0cmVhbVNvdXJjZTogZGlzY29ubmVjdFN0cmVhbVNvdXJjZSxcbiAgcmVuZGVyU3RyZWFtTWVzc2FnZTogcmVuZGVyU3RyZWFtTWVzc2FnZSxcbiAgY2xlYXJDYWNoZTogY2xlYXJDYWNoZSxcbiAgc2V0UHJvZ3Jlc3NCYXJEZWxheTogc2V0UHJvZ3Jlc3NCYXJEZWxheSxcbiAgc2V0Q29uZmlybU1ldGhvZDogc2V0Q29uZmlybU1ldGhvZCxcbiAgc2V0Rm9ybU1vZGU6IHNldEZvcm1Nb2RlLFxuICBtb3JwaEJvZHlFbGVtZW50czogbW9ycGhCb2R5RWxlbWVudHMsXG4gIG1vcnBoVHVyYm9GcmFtZUVsZW1lbnRzOiBtb3JwaFR1cmJvRnJhbWVFbGVtZW50cyxcbiAgbW9ycGhDaGlsZHJlbjogbW9ycGhDaGlsZHJlbixcbiAgbW9ycGhFbGVtZW50czogbW9ycGhFbGVtZW50c1xufSk7XG5cbmNsYXNzIFR1cmJvRnJhbWVNaXNzaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7fVxuXG5jbGFzcyBGcmFtZUNvbnRyb2xsZXIge1xuICBmZXRjaFJlc3BvbnNlTG9hZGVkID0gKF9mZXRjaFJlc3BvbnNlKSA9PiBQcm9taXNlLnJlc29sdmUoKVxuICAjY3VycmVudEZldGNoUmVxdWVzdCA9IG51bGxcbiAgI3Jlc29sdmVWaXNpdFByb21pc2UgPSAoKSA9PiB7fVxuICAjY29ubmVjdGVkID0gZmFsc2VcbiAgI2hhc0JlZW5Mb2FkZWQgPSBmYWxzZVxuICAjaWdub3JlZEF0dHJpYnV0ZXMgPSBuZXcgU2V0KClcbiAgI3Nob3VsZE1vcnBoRnJhbWUgPSBmYWxzZVxuICBhY3Rpb24gPSBudWxsXG5cbiAgY29uc3RydWN0b3IoZWxlbWVudCkge1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy52aWV3ID0gbmV3IEZyYW1lVmlldyh0aGlzLCB0aGlzLmVsZW1lbnQpO1xuICAgIHRoaXMuYXBwZWFyYW5jZU9ic2VydmVyID0gbmV3IEFwcGVhcmFuY2VPYnNlcnZlcih0aGlzLCB0aGlzLmVsZW1lbnQpO1xuICAgIHRoaXMuZm9ybUxpbmtDbGlja09ic2VydmVyID0gbmV3IEZvcm1MaW5rQ2xpY2tPYnNlcnZlcih0aGlzLCB0aGlzLmVsZW1lbnQpO1xuICAgIHRoaXMubGlua0ludGVyY2VwdG9yID0gbmV3IExpbmtJbnRlcmNlcHRvcih0aGlzLCB0aGlzLmVsZW1lbnQpO1xuICAgIHRoaXMucmVzdG9yYXRpb25JZGVudGlmaWVyID0gdXVpZCgpO1xuICAgIHRoaXMuZm9ybVN1Ym1pdE9ic2VydmVyID0gbmV3IEZvcm1TdWJtaXRPYnNlcnZlcih0aGlzLCB0aGlzLmVsZW1lbnQpO1xuICB9XG5cbiAgLy8gRnJhbWUgZGVsZWdhdGVcblxuICBjb25uZWN0KCkge1xuICAgIGlmICghdGhpcy4jY29ubmVjdGVkKSB7XG4gICAgICB0aGlzLiNjb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgaWYgKHRoaXMubG9hZGluZ1N0eWxlID09IEZyYW1lTG9hZGluZ1N0eWxlLmxhenkpIHtcbiAgICAgICAgdGhpcy5hcHBlYXJhbmNlT2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuI2xvYWRTb3VyY2VVUkwoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZm9ybUxpbmtDbGlja09ic2VydmVyLnN0YXJ0KCk7XG4gICAgICB0aGlzLmxpbmtJbnRlcmNlcHRvci5zdGFydCgpO1xuICAgICAgdGhpcy5mb3JtU3VibWl0T2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICB9XG4gIH1cblxuICBkaXNjb25uZWN0KCkge1xuICAgIGlmICh0aGlzLiNjb25uZWN0ZWQpIHtcbiAgICAgIHRoaXMuI2Nvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5hcHBlYXJhbmNlT2JzZXJ2ZXIuc3RvcCgpO1xuICAgICAgdGhpcy5mb3JtTGlua0NsaWNrT2JzZXJ2ZXIuc3RvcCgpO1xuICAgICAgdGhpcy5saW5rSW50ZXJjZXB0b3Iuc3RvcCgpO1xuICAgICAgdGhpcy5mb3JtU3VibWl0T2JzZXJ2ZXIuc3RvcCgpO1xuICAgIH1cbiAgfVxuXG4gIGRpc2FibGVkQ2hhbmdlZCgpIHtcbiAgICBpZiAodGhpcy5sb2FkaW5nU3R5bGUgPT0gRnJhbWVMb2FkaW5nU3R5bGUuZWFnZXIpIHtcbiAgICAgIHRoaXMuI2xvYWRTb3VyY2VVUkwoKTtcbiAgICB9XG4gIH1cblxuICBzb3VyY2VVUkxDaGFuZ2VkKCkge1xuICAgIGlmICh0aGlzLiNpc0lnbm9yaW5nQ2hhbmdlc1RvKFwic3JjXCIpKSByZXR1cm5cblxuICAgIGlmICh0aGlzLmVsZW1lbnQuaXNDb25uZWN0ZWQpIHtcbiAgICAgIHRoaXMuY29tcGxldGUgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5sb2FkaW5nU3R5bGUgPT0gRnJhbWVMb2FkaW5nU3R5bGUuZWFnZXIgfHwgdGhpcy4jaGFzQmVlbkxvYWRlZCkge1xuICAgICAgdGhpcy4jbG9hZFNvdXJjZVVSTCgpO1xuICAgIH1cbiAgfVxuXG4gIHNvdXJjZVVSTFJlbG9hZGVkKCkge1xuICAgIGNvbnN0IHsgcmVmcmVzaCwgc3JjIH0gPSB0aGlzLmVsZW1lbnQ7XG5cbiAgICB0aGlzLiNzaG91bGRNb3JwaEZyYW1lID0gc3JjICYmIHJlZnJlc2ggPT09IFwibW9ycGhcIjtcblxuICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJjb21wbGV0ZVwiKTtcbiAgICB0aGlzLmVsZW1lbnQuc3JjID0gbnVsbDtcbiAgICB0aGlzLmVsZW1lbnQuc3JjID0gc3JjO1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnQubG9hZGVkXG4gIH1cblxuICBsb2FkaW5nU3R5bGVDaGFuZ2VkKCkge1xuICAgIGlmICh0aGlzLmxvYWRpbmdTdHlsZSA9PSBGcmFtZUxvYWRpbmdTdHlsZS5sYXp5KSB7XG4gICAgICB0aGlzLmFwcGVhcmFuY2VPYnNlcnZlci5zdGFydCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFwcGVhcmFuY2VPYnNlcnZlci5zdG9wKCk7XG4gICAgICB0aGlzLiNsb2FkU291cmNlVVJMKCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgI2xvYWRTb3VyY2VVUkwoKSB7XG4gICAgaWYgKHRoaXMuZW5hYmxlZCAmJiB0aGlzLmlzQWN0aXZlICYmICF0aGlzLmNvbXBsZXRlICYmIHRoaXMuc291cmNlVVJMKSB7XG4gICAgICB0aGlzLmVsZW1lbnQubG9hZGVkID0gdGhpcy4jdmlzaXQoZXhwYW5kVVJMKHRoaXMuc291cmNlVVJMKSk7XG4gICAgICB0aGlzLmFwcGVhcmFuY2VPYnNlcnZlci5zdG9wKCk7XG4gICAgICBhd2FpdCB0aGlzLmVsZW1lbnQubG9hZGVkO1xuICAgICAgdGhpcy4jaGFzQmVlbkxvYWRlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbG9hZFJlc3BvbnNlKGZldGNoUmVzcG9uc2UpIHtcbiAgICBpZiAoZmV0Y2hSZXNwb25zZS5yZWRpcmVjdGVkIHx8IChmZXRjaFJlc3BvbnNlLnN1Y2NlZWRlZCAmJiBmZXRjaFJlc3BvbnNlLmlzSFRNTCkpIHtcbiAgICAgIHRoaXMuc291cmNlVVJMID0gZmV0Y2hSZXNwb25zZS5yZXNwb25zZS51cmw7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCBmZXRjaFJlc3BvbnNlLnJlc3BvbnNlSFRNTDtcbiAgICAgIGlmIChodG1sKSB7XG4gICAgICAgIGNvbnN0IGRvY3VtZW50ID0gcGFyc2VIVE1MRG9jdW1lbnQoaHRtbCk7XG4gICAgICAgIGNvbnN0IHBhZ2VTbmFwc2hvdCA9IFBhZ2VTbmFwc2hvdC5mcm9tRG9jdW1lbnQoZG9jdW1lbnQpO1xuXG4gICAgICAgIGlmIChwYWdlU25hcHNob3QuaXNWaXNpdGFibGUpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLiNsb2FkRnJhbWVSZXNwb25zZShmZXRjaFJlc3BvbnNlLCBkb2N1bWVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy4jaGFuZGxlVW52aXNpdGFibGVGcmFtZVJlc3BvbnNlKGZldGNoUmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuI3Nob3VsZE1vcnBoRnJhbWUgPSBmYWxzZTtcbiAgICAgIHRoaXMuZmV0Y2hSZXNwb25zZUxvYWRlZCA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIEFwcGVhcmFuY2Ugb2JzZXJ2ZXIgZGVsZWdhdGVcblxuICBlbGVtZW50QXBwZWFyZWRJblZpZXdwb3J0KGVsZW1lbnQpIHtcbiAgICB0aGlzLnByb3Bvc2VWaXNpdElmTmF2aWdhdGVkV2l0aEFjdGlvbihlbGVtZW50LCBnZXRWaXNpdEFjdGlvbihlbGVtZW50KSk7XG4gICAgdGhpcy4jbG9hZFNvdXJjZVVSTCgpO1xuICB9XG5cbiAgLy8gRm9ybSBsaW5rIGNsaWNrIG9ic2VydmVyIGRlbGVnYXRlXG5cbiAgd2lsbFN1Ym1pdEZvcm1MaW5rVG9Mb2NhdGlvbihsaW5rKSB7XG4gICAgcmV0dXJuIHRoaXMuI3Nob3VsZEludGVyY2VwdE5hdmlnYXRpb24obGluaylcbiAgfVxuXG4gIHN1Ym1pdHRlZEZvcm1MaW5rVG9Mb2NhdGlvbihsaW5rLCBfbG9jYXRpb24sIGZvcm0pIHtcbiAgICBjb25zdCBmcmFtZSA9IHRoaXMuI2ZpbmRGcmFtZUVsZW1lbnQobGluayk7XG4gICAgaWYgKGZyYW1lKSBmb3JtLnNldEF0dHJpYnV0ZShcImRhdGEtdHVyYm8tZnJhbWVcIiwgZnJhbWUuaWQpO1xuICB9XG5cbiAgLy8gTGluayBpbnRlcmNlcHRvciBkZWxlZ2F0ZVxuXG4gIHNob3VsZEludGVyY2VwdExpbmtDbGljayhlbGVtZW50LCBfbG9jYXRpb24sIF9ldmVudCkge1xuICAgIHJldHVybiB0aGlzLiNzaG91bGRJbnRlcmNlcHROYXZpZ2F0aW9uKGVsZW1lbnQpXG4gIH1cblxuICBsaW5rQ2xpY2tJbnRlcmNlcHRlZChlbGVtZW50LCBsb2NhdGlvbikge1xuICAgIHRoaXMuI25hdmlnYXRlRnJhbWUoZWxlbWVudCwgbG9jYXRpb24pO1xuICB9XG5cbiAgLy8gRm9ybSBzdWJtaXQgb2JzZXJ2ZXIgZGVsZWdhdGVcblxuICB3aWxsU3VibWl0Rm9ybShlbGVtZW50LCBzdWJtaXR0ZXIpIHtcbiAgICByZXR1cm4gZWxlbWVudC5jbG9zZXN0KFwidHVyYm8tZnJhbWVcIikgPT0gdGhpcy5lbGVtZW50ICYmIHRoaXMuI3Nob3VsZEludGVyY2VwdE5hdmlnYXRpb24oZWxlbWVudCwgc3VibWl0dGVyKVxuICB9XG5cbiAgZm9ybVN1Ym1pdHRlZChlbGVtZW50LCBzdWJtaXR0ZXIpIHtcbiAgICBpZiAodGhpcy5mb3JtU3VibWlzc2lvbikge1xuICAgICAgdGhpcy5mb3JtU3VibWlzc2lvbi5zdG9wKCk7XG4gICAgfVxuXG4gICAgdGhpcy5mb3JtU3VibWlzc2lvbiA9IG5ldyBGb3JtU3VibWlzc2lvbih0aGlzLCBlbGVtZW50LCBzdWJtaXR0ZXIpO1xuICAgIGNvbnN0IHsgZmV0Y2hSZXF1ZXN0IH0gPSB0aGlzLmZvcm1TdWJtaXNzaW9uO1xuICAgIHRoaXMucHJlcGFyZVJlcXVlc3QoZmV0Y2hSZXF1ZXN0KTtcbiAgICB0aGlzLmZvcm1TdWJtaXNzaW9uLnN0YXJ0KCk7XG4gIH1cblxuICAvLyBGZXRjaCByZXF1ZXN0IGRlbGVnYXRlXG5cbiAgcHJlcGFyZVJlcXVlc3QocmVxdWVzdCkge1xuICAgIHJlcXVlc3QuaGVhZGVyc1tcIlR1cmJvLUZyYW1lXCJdID0gdGhpcy5pZDtcblxuICAgIGlmICh0aGlzLmN1cnJlbnROYXZpZ2F0aW9uRWxlbWVudD8uaGFzQXR0cmlidXRlKFwiZGF0YS10dXJiby1zdHJlYW1cIikpIHtcbiAgICAgIHJlcXVlc3QuYWNjZXB0UmVzcG9uc2VUeXBlKFN0cmVhbU1lc3NhZ2UuY29udGVudFR5cGUpO1xuICAgIH1cbiAgfVxuXG4gIHJlcXVlc3RTdGFydGVkKF9yZXF1ZXN0KSB7XG4gICAgbWFya0FzQnVzeSh0aGlzLmVsZW1lbnQpO1xuICB9XG5cbiAgcmVxdWVzdFByZXZlbnRlZEhhbmRsaW5nUmVzcG9uc2UoX3JlcXVlc3QsIF9yZXNwb25zZSkge1xuICAgIHRoaXMuI3Jlc29sdmVWaXNpdFByb21pc2UoKTtcbiAgfVxuXG4gIGFzeW5jIHJlcXVlc3RTdWNjZWVkZWRXaXRoUmVzcG9uc2UocmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgICBhd2FpdCB0aGlzLmxvYWRSZXNwb25zZShyZXNwb25zZSk7XG4gICAgdGhpcy4jcmVzb2x2ZVZpc2l0UHJvbWlzZSgpO1xuICB9XG5cbiAgYXN5bmMgcmVxdWVzdEZhaWxlZFdpdGhSZXNwb25zZShyZXF1ZXN0LCByZXNwb25zZSkge1xuICAgIGF3YWl0IHRoaXMubG9hZFJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICB0aGlzLiNyZXNvbHZlVmlzaXRQcm9taXNlKCk7XG4gIH1cblxuICByZXF1ZXN0RXJyb3JlZChyZXF1ZXN0LCBlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIHRoaXMuI3Jlc29sdmVWaXNpdFByb21pc2UoKTtcbiAgfVxuXG4gIHJlcXVlc3RGaW5pc2hlZChfcmVxdWVzdCkge1xuICAgIGNsZWFyQnVzeVN0YXRlKHRoaXMuZWxlbWVudCk7XG4gIH1cblxuICAvLyBGb3JtIHN1Ym1pc3Npb24gZGVsZWdhdGVcblxuICBmb3JtU3VibWlzc2lvblN0YXJ0ZWQoeyBmb3JtRWxlbWVudCB9KSB7XG4gICAgbWFya0FzQnVzeShmb3JtRWxlbWVudCwgdGhpcy4jZmluZEZyYW1lRWxlbWVudChmb3JtRWxlbWVudCkpO1xuICB9XG5cbiAgZm9ybVN1Ym1pc3Npb25TdWNjZWVkZWRXaXRoUmVzcG9uc2UoZm9ybVN1Ym1pc3Npb24sIHJlc3BvbnNlKSB7XG4gICAgY29uc3QgZnJhbWUgPSB0aGlzLiNmaW5kRnJhbWVFbGVtZW50KGZvcm1TdWJtaXNzaW9uLmZvcm1FbGVtZW50LCBmb3JtU3VibWlzc2lvbi5zdWJtaXR0ZXIpO1xuXG4gICAgZnJhbWUuZGVsZWdhdGUucHJvcG9zZVZpc2l0SWZOYXZpZ2F0ZWRXaXRoQWN0aW9uKGZyYW1lLCBnZXRWaXNpdEFjdGlvbihmb3JtU3VibWlzc2lvbi5zdWJtaXR0ZXIsIGZvcm1TdWJtaXNzaW9uLmZvcm1FbGVtZW50LCBmcmFtZSkpO1xuICAgIGZyYW1lLmRlbGVnYXRlLmxvYWRSZXNwb25zZShyZXNwb25zZSk7XG5cbiAgICBpZiAoIWZvcm1TdWJtaXNzaW9uLmlzU2FmZSkge1xuICAgICAgc2Vzc2lvbi5jbGVhckNhY2hlKCk7XG4gICAgfVxuICB9XG5cbiAgZm9ybVN1Ym1pc3Npb25GYWlsZWRXaXRoUmVzcG9uc2UoZm9ybVN1Ym1pc3Npb24sIGZldGNoUmVzcG9uc2UpIHtcbiAgICB0aGlzLmVsZW1lbnQuZGVsZWdhdGUubG9hZFJlc3BvbnNlKGZldGNoUmVzcG9uc2UpO1xuICAgIHNlc3Npb24uY2xlYXJDYWNoZSgpO1xuICB9XG5cbiAgZm9ybVN1Ym1pc3Npb25FcnJvcmVkKGZvcm1TdWJtaXNzaW9uLCBlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICB9XG5cbiAgZm9ybVN1Ym1pc3Npb25GaW5pc2hlZCh7IGZvcm1FbGVtZW50IH0pIHtcbiAgICBjbGVhckJ1c3lTdGF0ZShmb3JtRWxlbWVudCwgdGhpcy4jZmluZEZyYW1lRWxlbWVudChmb3JtRWxlbWVudCkpO1xuICB9XG5cbiAgLy8gVmlldyBkZWxlZ2F0ZVxuXG4gIGFsbG93c0ltbWVkaWF0ZVJlbmRlcih7IGVsZW1lbnQ6IG5ld0ZyYW1lIH0sIG9wdGlvbnMpIHtcbiAgICBjb25zdCBldmVudCA9IGRpc3BhdGNoKFwidHVyYm86YmVmb3JlLWZyYW1lLXJlbmRlclwiLCB7XG4gICAgICB0YXJnZXQ6IHRoaXMuZWxlbWVudCxcbiAgICAgIGRldGFpbDogeyBuZXdGcmFtZSwgLi4ub3B0aW9ucyB9LFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgIH0pO1xuXG4gICAgY29uc3Qge1xuICAgICAgZGVmYXVsdFByZXZlbnRlZCxcbiAgICAgIGRldGFpbDogeyByZW5kZXIgfVxuICAgIH0gPSBldmVudDtcblxuICAgIGlmICh0aGlzLnZpZXcucmVuZGVyZXIgJiYgcmVuZGVyKSB7XG4gICAgICB0aGlzLnZpZXcucmVuZGVyZXIucmVuZGVyRWxlbWVudCA9IHJlbmRlcjtcbiAgICB9XG5cbiAgICByZXR1cm4gIWRlZmF1bHRQcmV2ZW50ZWRcbiAgfVxuXG4gIHZpZXdSZW5kZXJlZFNuYXBzaG90KF9zbmFwc2hvdCwgX2lzUHJldmlldywgX3JlbmRlck1ldGhvZCkge31cblxuICBwcmVsb2FkT25Mb2FkTGlua3NGb3JWaWV3KGVsZW1lbnQpIHtcbiAgICBzZXNzaW9uLnByZWxvYWRPbkxvYWRMaW5rc0ZvclZpZXcoZWxlbWVudCk7XG4gIH1cblxuICB2aWV3SW52YWxpZGF0ZWQoKSB7fVxuXG4gIC8vIEZyYW1lIHJlbmRlcmVyIGRlbGVnYXRlXG5cbiAgd2lsbFJlbmRlckZyYW1lKGN1cnJlbnRFbGVtZW50LCBfbmV3RWxlbWVudCkge1xuICAgIHRoaXMucHJldmlvdXNGcmFtZUVsZW1lbnQgPSBjdXJyZW50RWxlbWVudC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuICB2aXNpdENhY2hlZFNuYXBzaG90ID0gKHsgZWxlbWVudCB9KSA9PiB7XG4gICAgY29uc3QgZnJhbWUgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjXCIgKyB0aGlzLmVsZW1lbnQuaWQpO1xuXG4gICAgaWYgKGZyYW1lICYmIHRoaXMucHJldmlvdXNGcmFtZUVsZW1lbnQpIHtcbiAgICAgIGZyYW1lLnJlcGxhY2VDaGlsZHJlbiguLi50aGlzLnByZXZpb3VzRnJhbWVFbGVtZW50LmNoaWxkcmVuKTtcbiAgICB9XG5cbiAgICBkZWxldGUgdGhpcy5wcmV2aW91c0ZyYW1lRWxlbWVudDtcbiAgfVxuXG4gIC8vIFByaXZhdGVcblxuICBhc3luYyAjbG9hZEZyYW1lUmVzcG9uc2UoZmV0Y2hSZXNwb25zZSwgZG9jdW1lbnQpIHtcbiAgICBjb25zdCBuZXdGcmFtZUVsZW1lbnQgPSBhd2FpdCB0aGlzLmV4dHJhY3RGb3JlaWduRnJhbWVFbGVtZW50KGRvY3VtZW50LmJvZHkpO1xuICAgIGNvbnN0IHJlbmRlcmVyQ2xhc3MgPSB0aGlzLiNzaG91bGRNb3JwaEZyYW1lID8gTW9ycGhpbmdGcmFtZVJlbmRlcmVyIDogRnJhbWVSZW5kZXJlcjtcblxuICAgIGlmIChuZXdGcmFtZUVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IHNuYXBzaG90ID0gbmV3IFNuYXBzaG90KG5ld0ZyYW1lRWxlbWVudCk7XG4gICAgICBjb25zdCByZW5kZXJlciA9IG5ldyByZW5kZXJlckNsYXNzKHRoaXMsIHRoaXMudmlldy5zbmFwc2hvdCwgc25hcHNob3QsIGZhbHNlLCBmYWxzZSk7XG4gICAgICBpZiAodGhpcy52aWV3LnJlbmRlclByb21pc2UpIGF3YWl0IHRoaXMudmlldy5yZW5kZXJQcm9taXNlO1xuICAgICAgdGhpcy5jaGFuZ2VIaXN0b3J5KCk7XG5cbiAgICAgIGF3YWl0IHRoaXMudmlldy5yZW5kZXIocmVuZGVyZXIpO1xuICAgICAgdGhpcy5jb21wbGV0ZSA9IHRydWU7XG4gICAgICBzZXNzaW9uLmZyYW1lUmVuZGVyZWQoZmV0Y2hSZXNwb25zZSwgdGhpcy5lbGVtZW50KTtcbiAgICAgIHNlc3Npb24uZnJhbWVMb2FkZWQodGhpcy5lbGVtZW50KTtcbiAgICAgIGF3YWl0IHRoaXMuZmV0Y2hSZXNwb25zZUxvYWRlZChmZXRjaFJlc3BvbnNlKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuI3dpbGxIYW5kbGVGcmFtZU1pc3NpbmdGcm9tUmVzcG9uc2UoZmV0Y2hSZXNwb25zZSkpIHtcbiAgICAgIHRoaXMuI2hhbmRsZUZyYW1lTWlzc2luZ0Zyb21SZXNwb25zZShmZXRjaFJlc3BvbnNlKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyAjdmlzaXQodXJsKSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IG5ldyBGZXRjaFJlcXVlc3QodGhpcywgRmV0Y2hNZXRob2QuZ2V0LCB1cmwsIG5ldyBVUkxTZWFyY2hQYXJhbXMoKSwgdGhpcy5lbGVtZW50KTtcblxuICAgIHRoaXMuI2N1cnJlbnRGZXRjaFJlcXVlc3Q/LmNhbmNlbCgpO1xuICAgIHRoaXMuI2N1cnJlbnRGZXRjaFJlcXVlc3QgPSByZXF1ZXN0O1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICB0aGlzLiNyZXNvbHZlVmlzaXRQcm9taXNlID0gKCkgPT4ge1xuICAgICAgICB0aGlzLiNyZXNvbHZlVmlzaXRQcm9taXNlID0gKCkgPT4ge307XG4gICAgICAgIHRoaXMuI2N1cnJlbnRGZXRjaFJlcXVlc3QgPSBudWxsO1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9O1xuICAgICAgcmVxdWVzdC5wZXJmb3JtKCk7XG4gICAgfSlcbiAgfVxuXG4gICNuYXZpZ2F0ZUZyYW1lKGVsZW1lbnQsIHVybCwgc3VibWl0dGVyKSB7XG4gICAgY29uc3QgZnJhbWUgPSB0aGlzLiNmaW5kRnJhbWVFbGVtZW50KGVsZW1lbnQsIHN1Ym1pdHRlcik7XG5cbiAgICBmcmFtZS5kZWxlZ2F0ZS5wcm9wb3NlVmlzaXRJZk5hdmlnYXRlZFdpdGhBY3Rpb24oZnJhbWUsIGdldFZpc2l0QWN0aW9uKHN1Ym1pdHRlciwgZWxlbWVudCwgZnJhbWUpKTtcblxuICAgIHRoaXMuI3dpdGhDdXJyZW50TmF2aWdhdGlvbkVsZW1lbnQoZWxlbWVudCwgKCkgPT4ge1xuICAgICAgZnJhbWUuc3JjID0gdXJsO1xuICAgIH0pO1xuICB9XG5cbiAgcHJvcG9zZVZpc2l0SWZOYXZpZ2F0ZWRXaXRoQWN0aW9uKGZyYW1lLCBhY3Rpb24gPSBudWxsKSB7XG4gICAgdGhpcy5hY3Rpb24gPSBhY3Rpb247XG5cbiAgICBpZiAodGhpcy5hY3Rpb24pIHtcbiAgICAgIGNvbnN0IHBhZ2VTbmFwc2hvdCA9IFBhZ2VTbmFwc2hvdC5mcm9tRWxlbWVudChmcmFtZSkuY2xvbmUoKTtcbiAgICAgIGNvbnN0IHsgdmlzaXRDYWNoZWRTbmFwc2hvdCB9ID0gZnJhbWUuZGVsZWdhdGU7XG5cbiAgICAgIGZyYW1lLmRlbGVnYXRlLmZldGNoUmVzcG9uc2VMb2FkZWQgPSBhc3luYyAoZmV0Y2hSZXNwb25zZSkgPT4ge1xuICAgICAgICBpZiAoZnJhbWUuc3JjKSB7XG4gICAgICAgICAgY29uc3QgeyBzdGF0dXNDb2RlLCByZWRpcmVjdGVkIH0gPSBmZXRjaFJlc3BvbnNlO1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlSFRNTCA9IGF3YWl0IGZldGNoUmVzcG9uc2UucmVzcG9uc2VIVE1MO1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geyBzdGF0dXNDb2RlLCByZWRpcmVjdGVkLCByZXNwb25zZUhUTUwgfTtcbiAgICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgcmVzcG9uc2UsXG4gICAgICAgICAgICB2aXNpdENhY2hlZFNuYXBzaG90LFxuICAgICAgICAgICAgd2lsbFJlbmRlcjogZmFsc2UsXG4gICAgICAgICAgICB1cGRhdGVIaXN0b3J5OiBmYWxzZSxcbiAgICAgICAgICAgIHJlc3RvcmF0aW9uSWRlbnRpZmllcjogdGhpcy5yZXN0b3JhdGlvbklkZW50aWZpZXIsXG4gICAgICAgICAgICBzbmFwc2hvdDogcGFnZVNuYXBzaG90XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGlmICh0aGlzLmFjdGlvbikgb3B0aW9ucy5hY3Rpb24gPSB0aGlzLmFjdGlvbjtcblxuICAgICAgICAgIHNlc3Npb24udmlzaXQoZnJhbWUuc3JjLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBjaGFuZ2VIaXN0b3J5KCkge1xuICAgIGlmICh0aGlzLmFjdGlvbikge1xuICAgICAgY29uc3QgbWV0aG9kID0gZ2V0SGlzdG9yeU1ldGhvZEZvckFjdGlvbih0aGlzLmFjdGlvbik7XG4gICAgICBzZXNzaW9uLmhpc3RvcnkudXBkYXRlKG1ldGhvZCwgZXhwYW5kVVJMKHRoaXMuZWxlbWVudC5zcmMgfHwgXCJcIiksIHRoaXMucmVzdG9yYXRpb25JZGVudGlmaWVyKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyAjaGFuZGxlVW52aXNpdGFibGVGcmFtZVJlc3BvbnNlKGZldGNoUmVzcG9uc2UpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBgVGhlIHJlc3BvbnNlICgke2ZldGNoUmVzcG9uc2Uuc3RhdHVzQ29kZX0pIGZyb20gPHR1cmJvLWZyYW1lIGlkPVwiJHt0aGlzLmVsZW1lbnQuaWR9XCI+IGlzIHBlcmZvcm1pbmcgYSBmdWxsIHBhZ2UgdmlzaXQgZHVlIHRvIHR1cmJvLXZpc2l0LWNvbnRyb2wuYFxuICAgICk7XG5cbiAgICBhd2FpdCB0aGlzLiN2aXNpdFJlc3BvbnNlKGZldGNoUmVzcG9uc2UucmVzcG9uc2UpO1xuICB9XG5cbiAgI3dpbGxIYW5kbGVGcmFtZU1pc3NpbmdGcm9tUmVzcG9uc2UoZmV0Y2hSZXNwb25zZSkge1xuICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJjb21wbGV0ZVwiLCBcIlwiKTtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gZmV0Y2hSZXNwb25zZS5yZXNwb25zZTtcbiAgICBjb25zdCB2aXNpdCA9IGFzeW5jICh1cmwsIG9wdGlvbnMpID0+IHtcbiAgICAgIGlmICh1cmwgaW5zdGFuY2VvZiBSZXNwb25zZSkge1xuICAgICAgICB0aGlzLiN2aXNpdFJlc3BvbnNlKHVybCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXNzaW9uLnZpc2l0KHVybCwgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGV2ZW50ID0gZGlzcGF0Y2goXCJ0dXJibzpmcmFtZS1taXNzaW5nXCIsIHtcbiAgICAgIHRhcmdldDogdGhpcy5lbGVtZW50LFxuICAgICAgZGV0YWlsOiB7IHJlc3BvbnNlLCB2aXNpdCB9LFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgIH0pO1xuXG4gICAgcmV0dXJuICFldmVudC5kZWZhdWx0UHJldmVudGVkXG4gIH1cblxuICAjaGFuZGxlRnJhbWVNaXNzaW5nRnJvbVJlc3BvbnNlKGZldGNoUmVzcG9uc2UpIHtcbiAgICB0aGlzLnZpZXcubWlzc2luZygpO1xuICAgIHRoaXMuI3Rocm93RnJhbWVNaXNzaW5nRXJyb3IoZmV0Y2hSZXNwb25zZSk7XG4gIH1cblxuICAjdGhyb3dGcmFtZU1pc3NpbmdFcnJvcihmZXRjaFJlc3BvbnNlKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGBUaGUgcmVzcG9uc2UgKCR7ZmV0Y2hSZXNwb25zZS5zdGF0dXNDb2RlfSkgZGlkIG5vdCBjb250YWluIHRoZSBleHBlY3RlZCA8dHVyYm8tZnJhbWUgaWQ9XCIke3RoaXMuZWxlbWVudC5pZH1cIj4gYW5kIHdpbGwgYmUgaWdub3JlZC4gVG8gcGVyZm9ybSBhIGZ1bGwgcGFnZSB2aXNpdCBpbnN0ZWFkLCBzZXQgdHVyYm8tdmlzaXQtY29udHJvbCB0byByZWxvYWQuYDtcbiAgICB0aHJvdyBuZXcgVHVyYm9GcmFtZU1pc3NpbmdFcnJvcihtZXNzYWdlKVxuICB9XG5cbiAgYXN5bmMgI3Zpc2l0UmVzcG9uc2UocmVzcG9uc2UpIHtcbiAgICBjb25zdCB3cmFwcGVkID0gbmV3IEZldGNoUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgIGNvbnN0IHJlc3BvbnNlSFRNTCA9IGF3YWl0IHdyYXBwZWQucmVzcG9uc2VIVE1MO1xuICAgIGNvbnN0IHsgbG9jYXRpb24sIHJlZGlyZWN0ZWQsIHN0YXR1c0NvZGUgfSA9IHdyYXBwZWQ7XG5cbiAgICByZXR1cm4gc2Vzc2lvbi52aXNpdChsb2NhdGlvbiwgeyByZXNwb25zZTogeyByZWRpcmVjdGVkLCBzdGF0dXNDb2RlLCByZXNwb25zZUhUTUwgfSB9KVxuICB9XG5cbiAgI2ZpbmRGcmFtZUVsZW1lbnQoZWxlbWVudCwgc3VibWl0dGVyKSB7XG4gICAgY29uc3QgaWQgPSBnZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvLWZyYW1lXCIsIHN1Ym1pdHRlciwgZWxlbWVudCkgfHwgdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcInRhcmdldFwiKTtcbiAgICByZXR1cm4gZ2V0RnJhbWVFbGVtZW50QnlJZChpZCkgPz8gdGhpcy5lbGVtZW50XG4gIH1cblxuICBhc3luYyBleHRyYWN0Rm9yZWlnbkZyYW1lRWxlbWVudChjb250YWluZXIpIHtcbiAgICBsZXQgZWxlbWVudDtcbiAgICBjb25zdCBpZCA9IENTUy5lc2NhcGUodGhpcy5pZCk7XG5cbiAgICB0cnkge1xuICAgICAgZWxlbWVudCA9IGFjdGl2YXRlRWxlbWVudChjb250YWluZXIucXVlcnlTZWxlY3RvcihgdHVyYm8tZnJhbWUjJHtpZH1gKSwgdGhpcy5zb3VyY2VVUkwpO1xuICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnRcbiAgICAgIH1cblxuICAgICAgZWxlbWVudCA9IGFjdGl2YXRlRWxlbWVudChjb250YWluZXIucXVlcnlTZWxlY3RvcihgdHVyYm8tZnJhbWVbc3JjXVtyZWN1cnNlfj0ke2lkfV1gKSwgdGhpcy5zb3VyY2VVUkwpO1xuICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgYXdhaXQgZWxlbWVudC5sb2FkZWQ7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmV4dHJhY3RGb3JlaWduRnJhbWVFbGVtZW50KGVsZW1lbnQpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgcmV0dXJuIG5ldyBGcmFtZUVsZW1lbnQoKVxuICAgIH1cblxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICAjZm9ybUFjdGlvbklzVmlzaXRhYmxlKGZvcm0sIHN1Ym1pdHRlcikge1xuICAgIGNvbnN0IGFjdGlvbiA9IGdldEFjdGlvbiQxKGZvcm0sIHN1Ym1pdHRlcik7XG5cbiAgICByZXR1cm4gbG9jYXRpb25Jc1Zpc2l0YWJsZShleHBhbmRVUkwoYWN0aW9uKSwgdGhpcy5yb290TG9jYXRpb24pXG4gIH1cblxuICAjc2hvdWxkSW50ZXJjZXB0TmF2aWdhdGlvbihlbGVtZW50LCBzdWJtaXR0ZXIpIHtcbiAgICBjb25zdCBpZCA9IGdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm8tZnJhbWVcIiwgc3VibWl0dGVyLCBlbGVtZW50KSB8fCB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidGFyZ2V0XCIpO1xuXG4gICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRm9ybUVsZW1lbnQgJiYgIXRoaXMuI2Zvcm1BY3Rpb25Jc1Zpc2l0YWJsZShlbGVtZW50LCBzdWJtaXR0ZXIpKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuZW5hYmxlZCB8fCBpZCA9PSBcIl90b3BcIikge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKGlkKSB7XG4gICAgICBjb25zdCBmcmFtZUVsZW1lbnQgPSBnZXRGcmFtZUVsZW1lbnRCeUlkKGlkKTtcbiAgICAgIGlmIChmcmFtZUVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuICFmcmFtZUVsZW1lbnQuZGlzYWJsZWRcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXNlc3Npb24uZWxlbWVudElzTmF2aWdhdGFibGUoZWxlbWVudCkpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGlmIChzdWJtaXR0ZXIgJiYgIXNlc3Npb24uZWxlbWVudElzTmF2aWdhdGFibGUoc3VibWl0dGVyKSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIC8vIENvbXB1dGVkIHByb3BlcnRpZXNcblxuICBnZXQgaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudC5pZFxuICB9XG5cbiAgZ2V0IGVuYWJsZWQoKSB7XG4gICAgcmV0dXJuICF0aGlzLmVsZW1lbnQuZGlzYWJsZWRcbiAgfVxuXG4gIGdldCBzb3VyY2VVUkwoKSB7XG4gICAgaWYgKHRoaXMuZWxlbWVudC5zcmMpIHtcbiAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuc3JjXG4gICAgfVxuICB9XG5cbiAgc2V0IHNvdXJjZVVSTChzb3VyY2VVUkwpIHtcbiAgICB0aGlzLiNpZ25vcmluZ0NoYW5nZXNUb0F0dHJpYnV0ZShcInNyY1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmVsZW1lbnQuc3JjID0gc291cmNlVVJMID8/IG51bGw7XG4gICAgfSk7XG4gIH1cblxuICBnZXQgbG9hZGluZ1N0eWxlKCkge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnQubG9hZGluZ1xuICB9XG5cbiAgZ2V0IGlzTG9hZGluZygpIHtcbiAgICByZXR1cm4gdGhpcy5mb3JtU3VibWlzc2lvbiAhPT0gdW5kZWZpbmVkIHx8IHRoaXMuI3Jlc29sdmVWaXNpdFByb21pc2UoKSAhPT0gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgY29tcGxldGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudC5oYXNBdHRyaWJ1dGUoXCJjb21wbGV0ZVwiKVxuICB9XG5cbiAgc2V0IGNvbXBsZXRlKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwiY29tcGxldGVcIiwgXCJcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJjb21wbGV0ZVwiKTtcbiAgICB9XG4gIH1cblxuICBnZXQgaXNBY3RpdmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudC5pc0FjdGl2ZSAmJiB0aGlzLiNjb25uZWN0ZWRcbiAgfVxuXG4gIGdldCByb290TG9jYXRpb24oKSB7XG4gICAgY29uc3QgbWV0YSA9IHRoaXMuZWxlbWVudC5vd25lckRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYG1ldGFbbmFtZT1cInR1cmJvLXJvb3RcIl1gKTtcbiAgICBjb25zdCByb290ID0gbWV0YT8uY29udGVudCA/PyBcIi9cIjtcbiAgICByZXR1cm4gZXhwYW5kVVJMKHJvb3QpXG4gIH1cblxuICAjaXNJZ25vcmluZ0NoYW5nZXNUbyhhdHRyaWJ1dGVOYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMuI2lnbm9yZWRBdHRyaWJ1dGVzLmhhcyhhdHRyaWJ1dGVOYW1lKVxuICB9XG5cbiAgI2lnbm9yaW5nQ2hhbmdlc1RvQXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy4jaWdub3JlZEF0dHJpYnV0ZXMuYWRkKGF0dHJpYnV0ZU5hbWUpO1xuICAgIGNhbGxiYWNrKCk7XG4gICAgdGhpcy4jaWdub3JlZEF0dHJpYnV0ZXMuZGVsZXRlKGF0dHJpYnV0ZU5hbWUpO1xuICB9XG5cbiAgI3dpdGhDdXJyZW50TmF2aWdhdGlvbkVsZW1lbnQoZWxlbWVudCwgY2FsbGJhY2spIHtcbiAgICB0aGlzLmN1cnJlbnROYXZpZ2F0aW9uRWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgY2FsbGJhY2soKTtcbiAgICBkZWxldGUgdGhpcy5jdXJyZW50TmF2aWdhdGlvbkVsZW1lbnQ7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0RnJhbWVFbGVtZW50QnlJZChpZCkge1xuICBpZiAoaWQgIT0gbnVsbCkge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBGcmFtZUVsZW1lbnQpIHtcbiAgICAgIHJldHVybiBlbGVtZW50XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFjdGl2YXRlRWxlbWVudChlbGVtZW50LCBjdXJyZW50VVJMKSB7XG4gIGlmIChlbGVtZW50KSB7XG4gICAgY29uc3Qgc3JjID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJzcmNcIik7XG4gICAgaWYgKHNyYyAhPSBudWxsICYmIGN1cnJlbnRVUkwgIT0gbnVsbCAmJiB1cmxzQXJlRXF1YWwoc3JjLCBjdXJyZW50VVJMKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBNYXRjaGluZyA8dHVyYm8tZnJhbWUgaWQ9XCIke2VsZW1lbnQuaWR9XCI+IGVsZW1lbnQgaGFzIGEgc291cmNlIFVSTCB3aGljaCByZWZlcmVuY2VzIGl0c2VsZmApXG4gICAgfVxuICAgIGlmIChlbGVtZW50Lm93bmVyRG9jdW1lbnQgIT09IGRvY3VtZW50KSB7XG4gICAgICBlbGVtZW50ID0gZG9jdW1lbnQuaW1wb3J0Tm9kZShlbGVtZW50LCB0cnVlKTtcbiAgICB9XG5cbiAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEZyYW1lRWxlbWVudCkge1xuICAgICAgZWxlbWVudC5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgZWxlbWVudC5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgcmV0dXJuIGVsZW1lbnRcbiAgICB9XG4gIH1cbn1cblxuY29uc3QgU3RyZWFtQWN0aW9ucyA9IHtcbiAgYWZ0ZXIoKSB7XG4gICAgdGhpcy50YXJnZXRFbGVtZW50cy5mb3JFYWNoKChlKSA9PiBlLnBhcmVudEVsZW1lbnQ/Lmluc2VydEJlZm9yZSh0aGlzLnRlbXBsYXRlQ29udGVudCwgZS5uZXh0U2libGluZykpO1xuICB9LFxuXG4gIGFwcGVuZCgpIHtcbiAgICB0aGlzLnJlbW92ZUR1cGxpY2F0ZVRhcmdldENoaWxkcmVuKCk7XG4gICAgdGhpcy50YXJnZXRFbGVtZW50cy5mb3JFYWNoKChlKSA9PiBlLmFwcGVuZCh0aGlzLnRlbXBsYXRlQ29udGVudCkpO1xuICB9LFxuXG4gIGJlZm9yZSgpIHtcbiAgICB0aGlzLnRhcmdldEVsZW1lbnRzLmZvckVhY2goKGUpID0+IGUucGFyZW50RWxlbWVudD8uaW5zZXJ0QmVmb3JlKHRoaXMudGVtcGxhdGVDb250ZW50LCBlKSk7XG4gIH0sXG5cbiAgcHJlcGVuZCgpIHtcbiAgICB0aGlzLnJlbW92ZUR1cGxpY2F0ZVRhcmdldENoaWxkcmVuKCk7XG4gICAgdGhpcy50YXJnZXRFbGVtZW50cy5mb3JFYWNoKChlKSA9PiBlLnByZXBlbmQodGhpcy50ZW1wbGF0ZUNvbnRlbnQpKTtcbiAgfSxcblxuICByZW1vdmUoKSB7XG4gICAgdGhpcy50YXJnZXRFbGVtZW50cy5mb3JFYWNoKChlKSA9PiBlLnJlbW92ZSgpKTtcbiAgfSxcblxuICByZXBsYWNlKCkge1xuICAgIGNvbnN0IG1ldGhvZCA9IHRoaXMuZ2V0QXR0cmlidXRlKFwibWV0aG9kXCIpO1xuXG4gICAgdGhpcy50YXJnZXRFbGVtZW50cy5mb3JFYWNoKCh0YXJnZXRFbGVtZW50KSA9PiB7XG4gICAgICBpZiAobWV0aG9kID09PSBcIm1vcnBoXCIpIHtcbiAgICAgICAgbW9ycGhFbGVtZW50cyh0YXJnZXRFbGVtZW50LCB0aGlzLnRlbXBsYXRlQ29udGVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXRFbGVtZW50LnJlcGxhY2VXaXRoKHRoaXMudGVtcGxhdGVDb250ZW50KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICB1cGRhdGUoKSB7XG4gICAgY29uc3QgbWV0aG9kID0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJtZXRob2RcIik7XG5cbiAgICB0aGlzLnRhcmdldEVsZW1lbnRzLmZvckVhY2goKHRhcmdldEVsZW1lbnQpID0+IHtcbiAgICAgIGlmIChtZXRob2QgPT09IFwibW9ycGhcIikge1xuICAgICAgICBtb3JwaENoaWxkcmVuKHRhcmdldEVsZW1lbnQsIHRoaXMudGVtcGxhdGVDb250ZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldEVsZW1lbnQuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgdGFyZ2V0RWxlbWVudC5hcHBlbmQodGhpcy50ZW1wbGF0ZUNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIHJlZnJlc2goKSB7XG4gICAgc2Vzc2lvbi5yZWZyZXNoKHRoaXMuYmFzZVVSSSwgdGhpcy5yZXF1ZXN0SWQpO1xuICB9XG59O1xuXG4vLyA8dHVyYm8tc3RyZWFtIGFjdGlvbj1yZXBsYWNlIHRhcmdldD1pZD48dGVtcGxhdGU+Li4uXG5cbi8qKlxuICogUmVuZGVycyB1cGRhdGVzIHRvIHRoZSBwYWdlIGZyb20gYSBzdHJlYW0gb2YgbWVzc2FnZXMuXG4gKlxuICogVXNpbmcgdGhlIGBhY3Rpb25gIGF0dHJpYnV0ZSwgdGhpcyBjYW4gYmUgY29uZmlndXJlZCBvbmUgb2YgZWlnaHQgd2F5czpcbiAqXG4gKiAtIGBhZnRlcmAgLSBpbnNlcnRzIHRoZSByZXN1bHQgYWZ0ZXIgdGhlIHRhcmdldFxuICogLSBgYXBwZW5kYCAtIGFwcGVuZHMgdGhlIHJlc3VsdCB0byB0aGUgdGFyZ2V0XG4gKiAtIGBiZWZvcmVgIC0gaW5zZXJ0cyB0aGUgcmVzdWx0IGJlZm9yZSB0aGUgdGFyZ2V0XG4gKiAtIGBwcmVwZW5kYCAtIHByZXBlbmRzIHRoZSByZXN1bHQgdG8gdGhlIHRhcmdldFxuICogLSBgcmVmcmVzaGAgLSBpbml0aWF0ZXMgYSBwYWdlIHJlZnJlc2hcbiAqIC0gYHJlbW92ZWAgLSByZW1vdmVzIHRoZSB0YXJnZXRcbiAqIC0gYHJlcGxhY2VgIC0gcmVwbGFjZXMgdGhlIG91dGVyIEhUTUwgb2YgdGhlIHRhcmdldFxuICogLSBgdXBkYXRlYCAtIHJlcGxhY2VzIHRoZSBpbm5lciBIVE1MIG9mIHRoZSB0YXJnZXRcbiAqXG4gKiBAY3VzdG9tRWxlbWVudCB0dXJiby1zdHJlYW1cbiAqIEBleGFtcGxlXG4gKiAgIDx0dXJiby1zdHJlYW0gYWN0aW9uPVwiYXBwZW5kXCIgdGFyZ2V0PVwiZG9tX2lkXCI+XG4gKiAgICAgPHRlbXBsYXRlPlxuICogICAgICAgQ29udGVudCB0byBhcHBlbmQgdG8gdGFyZ2V0IGRlc2lnbmF0ZWQgd2l0aCB0aGUgZG9tX2lkLlxuICogICAgIDwvdGVtcGxhdGU+XG4gKiAgIDwvdHVyYm8tc3RyZWFtPlxuICovXG5jbGFzcyBTdHJlYW1FbGVtZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICBzdGF0aWMgYXN5bmMgcmVuZGVyRWxlbWVudChuZXdFbGVtZW50KSB7XG4gICAgYXdhaXQgbmV3RWxlbWVudC5wZXJmb3JtQWN0aW9uKCk7XG4gIH1cblxuICBhc3luYyBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5yZW5kZXIoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuZGlzY29ubmVjdCgpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKHRoaXMucmVuZGVyUHJvbWlzZSA/Pz0gKGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5iZWZvcmVSZW5kZXJFdmVudDtcblxuICAgICAgaWYgKHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCkpIHtcbiAgICAgICAgYXdhaXQgbmV4dFJlcGFpbnQoKTtcbiAgICAgICAgYXdhaXQgZXZlbnQuZGV0YWlsLnJlbmRlcih0aGlzKTtcbiAgICAgIH1cbiAgICB9KSgpKVxuICB9XG5cbiAgZGlzY29ubmVjdCgpIHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5yZW1vdmUoKTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lbXB0eVxuICAgIH0gY2F0Y2gge31cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGR1cGxpY2F0ZSBjaGlsZHJlbiAoYnkgSUQpXG4gICAqL1xuICByZW1vdmVEdXBsaWNhdGVUYXJnZXRDaGlsZHJlbigpIHtcbiAgICB0aGlzLmR1cGxpY2F0ZUNoaWxkcmVuLmZvckVhY2goKGMpID0+IGMucmVtb3ZlKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGxpc3Qgb2YgZHVwbGljYXRlIGNoaWxkcmVuIChpLmUuIHRob3NlIHdpdGggdGhlIHNhbWUgSUQpXG4gICAqL1xuICBnZXQgZHVwbGljYXRlQ2hpbGRyZW4oKSB7XG4gICAgY29uc3QgZXhpc3RpbmdDaGlsZHJlbiA9IHRoaXMudGFyZ2V0RWxlbWVudHMuZmxhdE1hcCgoZSkgPT4gWy4uLmUuY2hpbGRyZW5dKS5maWx0ZXIoKGMpID0+ICEhYy5nZXRBdHRyaWJ1dGUoXCJpZFwiKSk7XG4gICAgY29uc3QgbmV3Q2hpbGRyZW5JZHMgPSBbLi4uKHRoaXMudGVtcGxhdGVDb250ZW50Py5jaGlsZHJlbiB8fCBbXSldLmZpbHRlcigoYykgPT4gISFjLmdldEF0dHJpYnV0ZShcImlkXCIpKS5tYXAoKGMpID0+IGMuZ2V0QXR0cmlidXRlKFwiaWRcIikpO1xuXG4gICAgcmV0dXJuIGV4aXN0aW5nQ2hpbGRyZW4uZmlsdGVyKChjKSA9PiBuZXdDaGlsZHJlbklkcy5pbmNsdWRlcyhjLmdldEF0dHJpYnV0ZShcImlkXCIpKSlcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBhY3Rpb24gZnVuY3Rpb24gdG8gYmUgcGVyZm9ybWVkLlxuICAgKi9cbiAgZ2V0IHBlcmZvcm1BY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuYWN0aW9uKSB7XG4gICAgICBjb25zdCBhY3Rpb25GdW5jdGlvbiA9IFN0cmVhbUFjdGlvbnNbdGhpcy5hY3Rpb25dO1xuICAgICAgaWYgKGFjdGlvbkZ1bmN0aW9uKSB7XG4gICAgICAgIHJldHVybiBhY3Rpb25GdW5jdGlvblxuICAgICAgfVxuICAgICAgdGhpcy4jcmFpc2UoXCJ1bmtub3duIGFjdGlvblwiKTtcbiAgICB9XG4gICAgdGhpcy4jcmFpc2UoXCJhY3Rpb24gYXR0cmlidXRlIGlzIG1pc3NpbmdcIik7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgdGFyZ2V0IGVsZW1lbnRzIHdoaWNoIHRoZSB0ZW1wbGF0ZSB3aWxsIGJlIHJlbmRlcmVkIHRvLlxuICAgKi9cbiAgZ2V0IHRhcmdldEVsZW1lbnRzKCkge1xuICAgIGlmICh0aGlzLnRhcmdldCkge1xuICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0RWxlbWVudHNCeUlkXG4gICAgfSBlbHNlIGlmICh0aGlzLnRhcmdldHMpIHtcbiAgICAgIHJldHVybiB0aGlzLnRhcmdldEVsZW1lbnRzQnlRdWVyeVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiNyYWlzZShcInRhcmdldCBvciB0YXJnZXRzIGF0dHJpYnV0ZSBpcyBtaXNzaW5nXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjb250ZW50cyBvZiB0aGUgbWFpbiBgPHRlbXBsYXRlPmAuXG4gICAqL1xuICBnZXQgdGVtcGxhdGVDb250ZW50KCkge1xuICAgIHJldHVybiB0aGlzLnRlbXBsYXRlRWxlbWVudC5jb250ZW50LmNsb25lTm9kZSh0cnVlKVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIG1haW4gYDx0ZW1wbGF0ZT5gIHVzZWQgZm9yIHJlbmRlcmluZ1xuICAgKi9cbiAgZ2V0IHRlbXBsYXRlRWxlbWVudCgpIHtcbiAgICBpZiAodGhpcy5maXJzdEVsZW1lbnRDaGlsZCA9PT0gbnVsbCkge1xuICAgICAgY29uc3QgdGVtcGxhdGUgPSB0aGlzLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xuICAgICAgdGhpcy5hcHBlbmRDaGlsZCh0ZW1wbGF0ZSk7XG4gICAgICByZXR1cm4gdGVtcGxhdGVcbiAgICB9IGVsc2UgaWYgKHRoaXMuZmlyc3RFbGVtZW50Q2hpbGQgaW5zdGFuY2VvZiBIVE1MVGVtcGxhdGVFbGVtZW50KSB7XG4gICAgICByZXR1cm4gdGhpcy5maXJzdEVsZW1lbnRDaGlsZFxuICAgIH1cbiAgICB0aGlzLiNyYWlzZShcImZpcnN0IGNoaWxkIGVsZW1lbnQgbXVzdCBiZSBhIDx0ZW1wbGF0ZT4gZWxlbWVudFwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IGFjdGlvbi5cbiAgICovXG4gIGdldCBhY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKFwiYWN0aW9uXCIpXG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VycmVudCB0YXJnZXQgKGFuIGVsZW1lbnQgSUQpIHRvIHdoaWNoIHRoZSByZXN1bHQgd2lsbFxuICAgKiBiZSByZW5kZXJlZC5cbiAgICovXG4gIGdldCB0YXJnZXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKFwidGFyZ2V0XCIpXG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VycmVudCBcInRhcmdldHNcIiBzZWxlY3RvciAoYSBDU1Mgc2VsZWN0b3IpXG4gICAqL1xuICBnZXQgdGFyZ2V0cygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoXCJ0YXJnZXRzXCIpXG4gIH1cblxuICAvKipcbiAgICogUmVhZHMgdGhlIHJlcXVlc3QtaWQgYXR0cmlidXRlXG4gICAqL1xuICBnZXQgcmVxdWVzdElkKCkge1xuICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZShcInJlcXVlc3QtaWRcIilcbiAgfVxuXG4gICNyYWlzZShtZXNzYWdlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGAke3RoaXMuZGVzY3JpcHRpb259OiAke21lc3NhZ2V9YClcbiAgfVxuXG4gIGdldCBkZXNjcmlwdGlvbigpIHtcbiAgICByZXR1cm4gKHRoaXMub3V0ZXJIVE1MLm1hdGNoKC88W14+XSs+LykgPz8gW10pWzBdID8/IFwiPHR1cmJvLXN0cmVhbT5cIlxuICB9XG5cbiAgZ2V0IGJlZm9yZVJlbmRlckV2ZW50KCkge1xuICAgIHJldHVybiBuZXcgQ3VzdG9tRXZlbnQoXCJ0dXJibzpiZWZvcmUtc3RyZWFtLXJlbmRlclwiLCB7XG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICAgIGRldGFpbDogeyBuZXdTdHJlYW06IHRoaXMsIHJlbmRlcjogU3RyZWFtRWxlbWVudC5yZW5kZXJFbGVtZW50IH1cbiAgICB9KVxuICB9XG5cbiAgZ2V0IHRhcmdldEVsZW1lbnRzQnlJZCgpIHtcbiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5vd25lckRvY3VtZW50Py5nZXRFbGVtZW50QnlJZCh0aGlzLnRhcmdldCk7XG5cbiAgICBpZiAoZWxlbWVudCAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIFtlbGVtZW50XVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gIH1cblxuICBnZXQgdGFyZ2V0RWxlbWVudHNCeVF1ZXJ5KCkge1xuICAgIGNvbnN0IGVsZW1lbnRzID0gdGhpcy5vd25lckRvY3VtZW50Py5xdWVyeVNlbGVjdG9yQWxsKHRoaXMudGFyZ2V0cyk7XG5cbiAgICBpZiAoZWxlbWVudHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZWxlbWVudHMpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBTdHJlYW1Tb3VyY2VFbGVtZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICBzdHJlYW1Tb3VyY2UgPSBudWxsXG5cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgdGhpcy5zdHJlYW1Tb3VyY2UgPSB0aGlzLnNyYy5tYXRjaCgvXndzezEsMn06LykgPyBuZXcgV2ViU29ja2V0KHRoaXMuc3JjKSA6IG5ldyBFdmVudFNvdXJjZSh0aGlzLnNyYyk7XG5cbiAgICBjb25uZWN0U3RyZWFtU291cmNlKHRoaXMuc3RyZWFtU291cmNlKTtcbiAgfVxuXG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGlmICh0aGlzLnN0cmVhbVNvdXJjZSkge1xuICAgICAgdGhpcy5zdHJlYW1Tb3VyY2UuY2xvc2UoKTtcblxuICAgICAgZGlzY29ubmVjdFN0cmVhbVNvdXJjZSh0aGlzLnN0cmVhbVNvdXJjZSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHNyYygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoXCJzcmNcIikgfHwgXCJcIlxuICB9XG59XG5cbkZyYW1lRWxlbWVudC5kZWxlZ2F0ZUNvbnN0cnVjdG9yID0gRnJhbWVDb250cm9sbGVyO1xuXG5pZiAoY3VzdG9tRWxlbWVudHMuZ2V0KFwidHVyYm8tZnJhbWVcIikgPT09IHVuZGVmaW5lZCkge1xuICBjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJ0dXJiby1mcmFtZVwiLCBGcmFtZUVsZW1lbnQpO1xufVxuXG5pZiAoY3VzdG9tRWxlbWVudHMuZ2V0KFwidHVyYm8tc3RyZWFtXCIpID09PSB1bmRlZmluZWQpIHtcbiAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwidHVyYm8tc3RyZWFtXCIsIFN0cmVhbUVsZW1lbnQpO1xufVxuXG5pZiAoY3VzdG9tRWxlbWVudHMuZ2V0KFwidHVyYm8tc3RyZWFtLXNvdXJjZVwiKSA9PT0gdW5kZWZpbmVkKSB7XG4gIGN1c3RvbUVsZW1lbnRzLmRlZmluZShcInR1cmJvLXN0cmVhbS1zb3VyY2VcIiwgU3RyZWFtU291cmNlRWxlbWVudCk7XG59XG5cbigoKSA9PiB7XG4gIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdDtcbiAgaWYgKCFlbGVtZW50KSByZXR1cm5cbiAgaWYgKGVsZW1lbnQuaGFzQXR0cmlidXRlKFwiZGF0YS10dXJiby1zdXBwcmVzcy13YXJuaW5nXCIpKSByZXR1cm5cblxuICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICB3aGlsZSAoZWxlbWVudCkge1xuICAgIGlmIChlbGVtZW50ID09IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgIHJldHVybiBjb25zb2xlLndhcm4oXG4gICAgICAgIHVuaW5kZW50YFxuICAgICAgICBZb3UgYXJlIGxvYWRpbmcgVHVyYm8gZnJvbSBhIDxzY3JpcHQ+IGVsZW1lbnQgaW5zaWRlIHRoZSA8Ym9keT4gZWxlbWVudC4gVGhpcyBpcyBwcm9iYWJseSBub3Qgd2hhdCB5b3UgbWVhbnQgdG8gZG8hXG5cbiAgICAgICAgTG9hZCB5b3VyIGFwcGxpY2F0aW9uXHUyMDE5cyBKYXZhU2NyaXB0IGJ1bmRsZSBpbnNpZGUgdGhlIDxoZWFkPiBlbGVtZW50IGluc3RlYWQuIDxzY3JpcHQ+IGVsZW1lbnRzIGluIDxib2R5PiBhcmUgZXZhbHVhdGVkIHdpdGggZWFjaCBwYWdlIGNoYW5nZS5cblxuICAgICAgICBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlOiBodHRwczovL3R1cmJvLmhvdHdpcmVkLmRldi9oYW5kYm9vay9idWlsZGluZyN3b3JraW5nLXdpdGgtc2NyaXB0LWVsZW1lbnRzXG5cbiAgICAgICAgXHUyMDE0XHUyMDE0XG4gICAgICAgIFN1cHByZXNzIHRoaXMgd2FybmluZyBieSBhZGRpbmcgYSBcImRhdGEtdHVyYm8tc3VwcHJlc3Mtd2FybmluZ1wiIGF0dHJpYnV0ZSB0bzogJXNcbiAgICAgIGAsXG4gICAgICAgIGVsZW1lbnQub3V0ZXJIVE1MXG4gICAgICApXG4gICAgfVxuXG4gICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgfVxufSkoKTtcblxud2luZG93LlR1cmJvID0geyAuLi5UdXJibywgU3RyZWFtQWN0aW9ucyB9O1xuc3RhcnQoKTtcblxuZXhwb3J0IHsgRmV0Y2hFbmN0eXBlLCBGZXRjaE1ldGhvZCwgRmV0Y2hSZXF1ZXN0LCBGZXRjaFJlc3BvbnNlLCBGcmFtZUVsZW1lbnQsIEZyYW1lTG9hZGluZ1N0eWxlLCBGcmFtZVJlbmRlcmVyLCBQYWdlUmVuZGVyZXIsIFBhZ2VTbmFwc2hvdCwgU3RyZWFtQWN0aW9ucywgU3RyZWFtRWxlbWVudCwgU3RyZWFtU291cmNlRWxlbWVudCwgY2FjaGUsIGNsZWFyQ2FjaGUsIGNvbmZpZywgY29ubmVjdFN0cmVhbVNvdXJjZSwgZGlzY29ubmVjdFN0cmVhbVNvdXJjZSwgZmV0Y2hXaXRoVHVyYm9IZWFkZXJzIGFzIGZldGNoLCBmZXRjaEVuY3R5cGVGcm9tU3RyaW5nLCBmZXRjaE1ldGhvZEZyb21TdHJpbmcsIGlzU2FmZSwgbW9ycGhCb2R5RWxlbWVudHMsIG1vcnBoQ2hpbGRyZW4sIG1vcnBoRWxlbWVudHMsIG1vcnBoVHVyYm9GcmFtZUVsZW1lbnRzLCBuYXZpZ2F0b3IkMSBhcyBuYXZpZ2F0b3IsIHJlZ2lzdGVyQWRhcHRlciwgcmVuZGVyU3RyZWFtTWVzc2FnZSwgc2Vzc2lvbiwgc2V0Q29uZmlybU1ldGhvZCwgc2V0Rm9ybU1vZGUsIHNldFByb2dyZXNzQmFyRGVsYXksIHN0YXJ0LCB2aXNpdCB9O1xuIiwgImxldCBjb25zdW1lclxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29uc3VtZXIoKSB7XG4gIHJldHVybiBjb25zdW1lciB8fCBzZXRDb25zdW1lcihjcmVhdGVDb25zdW1lcigpLnRoZW4oc2V0Q29uc3VtZXIpKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0Q29uc3VtZXIobmV3Q29uc3VtZXIpIHtcbiAgcmV0dXJuIGNvbnN1bWVyID0gbmV3Q29uc3VtZXJcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUNvbnN1bWVyKCkge1xuICBjb25zdCB7IGNyZWF0ZUNvbnN1bWVyIH0gPSBhd2FpdCBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJhY3Rpb25jYWJsZVwiICovIFwiQHJhaWxzL2FjdGlvbmNhYmxlL3NyY1wiKVxuICByZXR1cm4gY3JlYXRlQ29uc3VtZXIoKVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3Vic2NyaWJlVG8oY2hhbm5lbCwgbWl4aW4pIHtcbiAgY29uc3QgeyBzdWJzY3JpcHRpb25zIH0gPSBhd2FpdCBnZXRDb25zdW1lcigpXG4gIHJldHVybiBzdWJzY3JpcHRpb25zLmNyZWF0ZShjaGFubmVsLCBtaXhpbilcbn1cbiIsICIvLyBCYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vbmF0aGFuNy9zbmFrZWl6ZVxuLy9cbi8vIFRoaXMgc29mdHdhcmUgaXMgcmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlOlxuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZlxuLy8gdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpblxuLy8gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0b1xuLy8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2Zcbi8vIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbyxcbi8vIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGxcbi8vIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcbi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTXG4vLyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1Jcbi8vIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUlxuLy8gSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU5cbi8vIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB3YWxrIChvYmopIHtcbiAgICBpZiAoIW9iaiB8fCB0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JykgcmV0dXJuIG9iajtcbiAgICBpZiAob2JqIGluc3RhbmNlb2YgRGF0ZSB8fCBvYmogaW5zdGFuY2VvZiBSZWdFeHApIHJldHVybiBvYmo7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkgcmV0dXJuIG9iai5tYXAod2Fsayk7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGtleSkge1xuICAgICAgICB2YXIgY2FtZWwgPSBrZXlbMF0udG9Mb3dlckNhc2UoKSArIGtleS5zbGljZSgxKS5yZXBsYWNlKC8oW0EtWl0rKS9nLCBmdW5jdGlvbiAobSwgeCkge1xuICAgICAgICAgICAgcmV0dXJuICdfJyArIHgudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGFjY1tjYW1lbF0gPSB3YWxrKG9ialtrZXldKTtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSk7XG59OyIsICJpbXBvcnQgeyBjb25uZWN0U3RyZWFtU291cmNlLCBkaXNjb25uZWN0U3RyZWFtU291cmNlIH0gZnJvbSBcIkBob3R3aXJlZC90dXJib1wiXG5pbXBvcnQgeyBzdWJzY3JpYmVUbyB9IGZyb20gXCIuL2NhYmxlXCJcbmltcG9ydCBzbmFrZWl6ZSBmcm9tIFwiLi9zbmFrZWl6ZVwiXG5cbmNsYXNzIFR1cmJvQ2FibGVTdHJlYW1Tb3VyY2VFbGVtZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICBzdGF0aWMgb2JzZXJ2ZWRBdHRyaWJ1dGVzID0gW1wiY2hhbm5lbFwiLCBcInNpZ25lZC1zdHJlYW0tbmFtZVwiXVxuXG4gIGFzeW5jIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGNvbm5lY3RTdHJlYW1Tb3VyY2UodGhpcylcbiAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IGF3YWl0IHN1YnNjcmliZVRvKHRoaXMuY2hhbm5lbCwge1xuICAgICAgcmVjZWl2ZWQ6IHRoaXMuZGlzcGF0Y2hNZXNzYWdlRXZlbnQuYmluZCh0aGlzKSxcbiAgICAgIGNvbm5lY3RlZDogdGhpcy5zdWJzY3JpcHRpb25Db25uZWN0ZWQuYmluZCh0aGlzKSxcbiAgICAgIGRpc2Nvbm5lY3RlZDogdGhpcy5zdWJzY3JpcHRpb25EaXNjb25uZWN0ZWQuYmluZCh0aGlzKVxuICAgIH0pXG4gIH1cblxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBkaXNjb25uZWN0U3RyZWFtU291cmNlKHRoaXMpXG4gICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9uKSB0aGlzLnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpXG4gICAgdGhpcy5zdWJzY3JpcHRpb25EaXNjb25uZWN0ZWQoKVxuICB9XG5cbiAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKCkge1xuICAgIGlmICh0aGlzLnN1YnNjcmlwdGlvbikge1xuICAgICAgdGhpcy5kaXNjb25uZWN0ZWRDYWxsYmFjaygpXG4gICAgICB0aGlzLmNvbm5lY3RlZENhbGxiYWNrKClcbiAgICB9XG4gIH1cblxuICBkaXNwYXRjaE1lc3NhZ2VFdmVudChkYXRhKSB7XG4gICAgY29uc3QgZXZlbnQgPSBuZXcgTWVzc2FnZUV2ZW50KFwibWVzc2FnZVwiLCB7IGRhdGEgfSlcbiAgICByZXR1cm4gdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KVxuICB9XG5cbiAgc3Vic2NyaXB0aW9uQ29ubmVjdGVkKCkge1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiY29ubmVjdGVkXCIsIFwiXCIpXG4gIH1cblxuICBzdWJzY3JpcHRpb25EaXNjb25uZWN0ZWQoKSB7XG4gICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoXCJjb25uZWN0ZWRcIilcbiAgfVxuXG4gIGdldCBjaGFubmVsKCkge1xuICAgIGNvbnN0IGNoYW5uZWwgPSB0aGlzLmdldEF0dHJpYnV0ZShcImNoYW5uZWxcIilcbiAgICBjb25zdCBzaWduZWRfc3RyZWFtX25hbWUgPSB0aGlzLmdldEF0dHJpYnV0ZShcInNpZ25lZC1zdHJlYW0tbmFtZVwiKVxuICAgIHJldHVybiB7IGNoYW5uZWwsIHNpZ25lZF9zdHJlYW1fbmFtZSwgLi4uc25ha2VpemUoeyAuLi50aGlzLmRhdGFzZXQgfSkgfVxuICB9XG59XG5cblxuaWYgKGN1c3RvbUVsZW1lbnRzLmdldChcInR1cmJvLWNhYmxlLXN0cmVhbS1zb3VyY2VcIikgPT09IHVuZGVmaW5lZCkge1xuICBjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJ0dXJiby1jYWJsZS1zdHJlYW0tc291cmNlXCIsIFR1cmJvQ2FibGVTdHJlYW1Tb3VyY2VFbGVtZW50KVxufVxuIiwgImV4cG9ydCBmdW5jdGlvbiBlbmNvZGVNZXRob2RJbnRvUmVxdWVzdEJvZHkoZXZlbnQpIHtcbiAgaWYgKGV2ZW50LnRhcmdldCBpbnN0YW5jZW9mIEhUTUxGb3JtRWxlbWVudCkge1xuICAgIGNvbnN0IHsgdGFyZ2V0OiBmb3JtLCBkZXRhaWw6IHsgZmV0Y2hPcHRpb25zIH0gfSA9IGV2ZW50XG5cbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJ0dXJibzpzdWJtaXQtc3RhcnRcIiwgKHsgZGV0YWlsOiB7IGZvcm1TdWJtaXNzaW9uOiB7IHN1Ym1pdHRlciB9IH0gfSkgPT4ge1xuICAgICAgY29uc3QgYm9keSA9IGlzQm9keUluaXQoZmV0Y2hPcHRpb25zLmJvZHkpID8gZmV0Y2hPcHRpb25zLmJvZHkgOiBuZXcgVVJMU2VhcmNoUGFyYW1zKClcbiAgICAgIGNvbnN0IG1ldGhvZCA9IGRldGVybWluZUZldGNoTWV0aG9kKHN1Ym1pdHRlciwgYm9keSwgZm9ybSlcblxuICAgICAgaWYgKCEvZ2V0L2kudGVzdChtZXRob2QpKSB7XG4gICAgICAgIGlmICgvcG9zdC9pLnRlc3QobWV0aG9kKSkge1xuICAgICAgICAgIGJvZHkuZGVsZXRlKFwiX21ldGhvZFwiKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJvZHkuc2V0KFwiX21ldGhvZFwiLCBtZXRob2QpXG4gICAgICAgIH1cblxuICAgICAgICBmZXRjaE9wdGlvbnMubWV0aG9kID0gXCJwb3N0XCJcbiAgICAgIH1cbiAgICB9LCB7IG9uY2U6IHRydWUgfSlcbiAgfVxufVxuXG5mdW5jdGlvbiBkZXRlcm1pbmVGZXRjaE1ldGhvZChzdWJtaXR0ZXIsIGJvZHksIGZvcm0pIHtcbiAgY29uc3QgZm9ybU1ldGhvZCA9IGRldGVybWluZUZvcm1NZXRob2Qoc3VibWl0dGVyKVxuICBjb25zdCBvdmVycmlkZU1ldGhvZCA9IGJvZHkuZ2V0KFwiX21ldGhvZFwiKVxuICBjb25zdCBtZXRob2QgPSBmb3JtLmdldEF0dHJpYnV0ZShcIm1ldGhvZFwiKSB8fCBcImdldFwiXG5cbiAgaWYgKHR5cGVvZiBmb3JtTWV0aG9kID09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gZm9ybU1ldGhvZFxuICB9IGVsc2UgaWYgKHR5cGVvZiBvdmVycmlkZU1ldGhvZCA9PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIG92ZXJyaWRlTWV0aG9kXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG1ldGhvZFxuICB9XG59XG5cbmZ1bmN0aW9uIGRldGVybWluZUZvcm1NZXRob2Qoc3VibWl0dGVyKSB7XG4gIGlmIChzdWJtaXR0ZXIgaW5zdGFuY2VvZiBIVE1MQnV0dG9uRWxlbWVudCB8fCBzdWJtaXR0ZXIgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgLy8gUmFpbHMgNyBBY3Rpb25WaWV3OjpIZWxwZXJzOjpGb3JtQnVpbGRlciNidXR0b24gbWV0aG9kIGhhcyBhbiBvdmVycmlkZVxuICAgIC8vIGZvciBmb3JtbWV0aG9kIGlmIHRoZSBidXR0b24gZG9lcyBub3QgaGF2ZSBuYW1lIG9yIHZhbHVlIGF0dHJpYnV0ZXNcbiAgICAvLyBzZXQsIHdoaWNoIGlzIHRoZSBkZWZhdWx0LiBUaGlzIG1lYW5zIHRoYXQgaWYgeW91IHVzZSA8JT0gZi5idXR0b25cbiAgICAvLyBmb3JtbWV0aG9kOiA6ZGVsZXRlICU+LCBpdCB3aWxsIGdlbmVyYXRlIGEgPGJ1dHRvbiBuYW1lPVwiX21ldGhvZFwiXG4gICAgLy8gdmFsdWU9XCJkZWxldGVcIiBmb3JtbWV0aG9kPVwicG9zdFwiPi4gVGhlcmVmb3JlLCBpZiB0aGUgc3VibWl0dGVyJ3MgbmFtZVxuICAgIC8vIGlzIGFscmVhZHkgX21ldGhvZCwgaXQncyB2YWx1ZSBhdHRyaWJ1dGUgYWxyZWFkeSBjb250YWlucyB0aGUgZGVzaXJlZFxuICAgIC8vIG1ldGhvZC5cbiAgICBpZiAoc3VibWl0dGVyLm5hbWUgPT09ICdfbWV0aG9kJykge1xuICAgICAgcmV0dXJuIHN1Ym1pdHRlci52YWx1ZVxuICAgIH0gZWxzZSBpZiAoc3VibWl0dGVyLmhhc0F0dHJpYnV0ZShcImZvcm1tZXRob2RcIikpIHtcbiAgICAgIHJldHVybiBzdWJtaXR0ZXIuZm9ybU1ldGhvZFxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbmZ1bmN0aW9uIGlzQm9keUluaXQoYm9keSkge1xuICByZXR1cm4gYm9keSBpbnN0YW5jZW9mIEZvcm1EYXRhIHx8IGJvZHkgaW5zdGFuY2VvZiBVUkxTZWFyY2hQYXJhbXNcbn1cbiIsICJpbXBvcnQgXCIuL2NhYmxlX3N0cmVhbV9zb3VyY2VfZWxlbWVudFwiXG5cbmltcG9ydCAqIGFzIFR1cmJvIGZyb20gXCJAaG90d2lyZWQvdHVyYm9cIlxuZXhwb3J0IHsgVHVyYm8gfVxuXG5pbXBvcnQgKiBhcyBjYWJsZSBmcm9tIFwiLi9jYWJsZVwiXG5leHBvcnQgeyBjYWJsZSB9XG5cbmltcG9ydCB7IGVuY29kZU1ldGhvZEludG9SZXF1ZXN0Qm9keSB9IGZyb20gXCIuL2ZldGNoX3JlcXVlc3RzXCJcblxud2luZG93LlR1cmJvID0gVHVyYm9cblxuYWRkRXZlbnRMaXN0ZW5lcihcInR1cmJvOmJlZm9yZS1mZXRjaC1yZXF1ZXN0XCIsIGVuY29kZU1ldGhvZEludG9SZXF1ZXN0Qm9keSlcbiIsICIvKlxuU3RpbXVsdXMgMy4yLjFcbkNvcHlyaWdodCBcdTAwQTkgMjAyMyBCYXNlY2FtcCwgTExDXG4gKi9cbmNsYXNzIEV2ZW50TGlzdGVuZXIge1xuICAgIGNvbnN0cnVjdG9yKGV2ZW50VGFyZ2V0LCBldmVudE5hbWUsIGV2ZW50T3B0aW9ucykge1xuICAgICAgICB0aGlzLmV2ZW50VGFyZ2V0ID0gZXZlbnRUYXJnZXQ7XG4gICAgICAgIHRoaXMuZXZlbnROYW1lID0gZXZlbnROYW1lO1xuICAgICAgICB0aGlzLmV2ZW50T3B0aW9ucyA9IGV2ZW50T3B0aW9ucztcbiAgICAgICAgdGhpcy51bm9yZGVyZWRCaW5kaW5ncyA9IG5ldyBTZXQoKTtcbiAgICB9XG4gICAgY29ubmVjdCgpIHtcbiAgICAgICAgdGhpcy5ldmVudFRhcmdldC5hZGRFdmVudExpc3RlbmVyKHRoaXMuZXZlbnROYW1lLCB0aGlzLCB0aGlzLmV2ZW50T3B0aW9ucyk7XG4gICAgfVxuICAgIGRpc2Nvbm5lY3QoKSB7XG4gICAgICAgIHRoaXMuZXZlbnRUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLmV2ZW50TmFtZSwgdGhpcywgdGhpcy5ldmVudE9wdGlvbnMpO1xuICAgIH1cbiAgICBiaW5kaW5nQ29ubmVjdGVkKGJpbmRpbmcpIHtcbiAgICAgICAgdGhpcy51bm9yZGVyZWRCaW5kaW5ncy5hZGQoYmluZGluZyk7XG4gICAgfVxuICAgIGJpbmRpbmdEaXNjb25uZWN0ZWQoYmluZGluZykge1xuICAgICAgICB0aGlzLnVub3JkZXJlZEJpbmRpbmdzLmRlbGV0ZShiaW5kaW5nKTtcbiAgICB9XG4gICAgaGFuZGxlRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgZXh0ZW5kZWRFdmVudCA9IGV4dGVuZEV2ZW50KGV2ZW50KTtcbiAgICAgICAgZm9yIChjb25zdCBiaW5kaW5nIG9mIHRoaXMuYmluZGluZ3MpIHtcbiAgICAgICAgICAgIGlmIChleHRlbmRlZEV2ZW50LmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYmluZGluZy5oYW5kbGVFdmVudChleHRlbmRlZEV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBoYXNCaW5kaW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5vcmRlcmVkQmluZGluZ3Muc2l6ZSA+IDA7XG4gICAgfVxuICAgIGdldCBiaW5kaW5ncygpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy51bm9yZGVyZWRCaW5kaW5ncykuc29ydCgobGVmdCwgcmlnaHQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGxlZnRJbmRleCA9IGxlZnQuaW5kZXgsIHJpZ2h0SW5kZXggPSByaWdodC5pbmRleDtcbiAgICAgICAgICAgIHJldHVybiBsZWZ0SW5kZXggPCByaWdodEluZGV4ID8gLTEgOiBsZWZ0SW5kZXggPiByaWdodEluZGV4ID8gMSA6IDA7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGV4dGVuZEV2ZW50KGV2ZW50KSB7XG4gICAgaWYgKFwiaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkXCIgaW4gZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIGV2ZW50O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgeyBzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24gfSA9IGV2ZW50O1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihldmVudCwge1xuICAgICAgICAgICAgaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOiBmYWxzZSxcbiAgICAgICAgICAgIHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmNsYXNzIERpc3BhdGNoZXIge1xuICAgIGNvbnN0cnVjdG9yKGFwcGxpY2F0aW9uKSB7XG4gICAgICAgIHRoaXMuYXBwbGljYXRpb24gPSBhcHBsaWNhdGlvbjtcbiAgICAgICAgdGhpcy5ldmVudExpc3RlbmVyTWFwcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICBpZiAoIXRoaXMuc3RhcnRlZCkge1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuZm9yRWFjaCgoZXZlbnRMaXN0ZW5lcikgPT4gZXZlbnRMaXN0ZW5lci5jb25uZWN0KCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5ldmVudExpc3RlbmVycy5mb3JFYWNoKChldmVudExpc3RlbmVyKSA9PiBldmVudExpc3RlbmVyLmRpc2Nvbm5lY3QoKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmV2ZW50TGlzdGVuZXJNYXBzLnZhbHVlcygpKS5yZWR1Y2UoKGxpc3RlbmVycywgbWFwKSA9PiBsaXN0ZW5lcnMuY29uY2F0KEFycmF5LmZyb20obWFwLnZhbHVlcygpKSksIFtdKTtcbiAgICB9XG4gICAgYmluZGluZ0Nvbm5lY3RlZChiaW5kaW5nKSB7XG4gICAgICAgIHRoaXMuZmV0Y2hFdmVudExpc3RlbmVyRm9yQmluZGluZyhiaW5kaW5nKS5iaW5kaW5nQ29ubmVjdGVkKGJpbmRpbmcpO1xuICAgIH1cbiAgICBiaW5kaW5nRGlzY29ubmVjdGVkKGJpbmRpbmcsIGNsZWFyRXZlbnRMaXN0ZW5lcnMgPSBmYWxzZSkge1xuICAgICAgICB0aGlzLmZldGNoRXZlbnRMaXN0ZW5lckZvckJpbmRpbmcoYmluZGluZykuYmluZGluZ0Rpc2Nvbm5lY3RlZChiaW5kaW5nKTtcbiAgICAgICAgaWYgKGNsZWFyRXZlbnRMaXN0ZW5lcnMpXG4gICAgICAgICAgICB0aGlzLmNsZWFyRXZlbnRMaXN0ZW5lcnNGb3JCaW5kaW5nKGJpbmRpbmcpO1xuICAgIH1cbiAgICBoYW5kbGVFcnJvcihlcnJvciwgbWVzc2FnZSwgZGV0YWlsID0ge30pIHtcbiAgICAgICAgdGhpcy5hcHBsaWNhdGlvbi5oYW5kbGVFcnJvcihlcnJvciwgYEVycm9yICR7bWVzc2FnZX1gLCBkZXRhaWwpO1xuICAgIH1cbiAgICBjbGVhckV2ZW50TGlzdGVuZXJzRm9yQmluZGluZyhiaW5kaW5nKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50TGlzdGVuZXIgPSB0aGlzLmZldGNoRXZlbnRMaXN0ZW5lckZvckJpbmRpbmcoYmluZGluZyk7XG4gICAgICAgIGlmICghZXZlbnRMaXN0ZW5lci5oYXNCaW5kaW5ncygpKSB7XG4gICAgICAgICAgICBldmVudExpc3RlbmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlTWFwcGVkRXZlbnRMaXN0ZW5lckZvcihiaW5kaW5nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW1vdmVNYXBwZWRFdmVudExpc3RlbmVyRm9yKGJpbmRpbmcpIHtcbiAgICAgICAgY29uc3QgeyBldmVudFRhcmdldCwgZXZlbnROYW1lLCBldmVudE9wdGlvbnMgfSA9IGJpbmRpbmc7XG4gICAgICAgIGNvbnN0IGV2ZW50TGlzdGVuZXJNYXAgPSB0aGlzLmZldGNoRXZlbnRMaXN0ZW5lck1hcEZvckV2ZW50VGFyZ2V0KGV2ZW50VGFyZ2V0KTtcbiAgICAgICAgY29uc3QgY2FjaGVLZXkgPSB0aGlzLmNhY2hlS2V5KGV2ZW50TmFtZSwgZXZlbnRPcHRpb25zKTtcbiAgICAgICAgZXZlbnRMaXN0ZW5lck1hcC5kZWxldGUoY2FjaGVLZXkpO1xuICAgICAgICBpZiAoZXZlbnRMaXN0ZW5lck1hcC5zaXplID09IDApXG4gICAgICAgICAgICB0aGlzLmV2ZW50TGlzdGVuZXJNYXBzLmRlbGV0ZShldmVudFRhcmdldCk7XG4gICAgfVxuICAgIGZldGNoRXZlbnRMaXN0ZW5lckZvckJpbmRpbmcoYmluZGluZykge1xuICAgICAgICBjb25zdCB7IGV2ZW50VGFyZ2V0LCBldmVudE5hbWUsIGV2ZW50T3B0aW9ucyB9ID0gYmluZGluZztcbiAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hFdmVudExpc3RlbmVyKGV2ZW50VGFyZ2V0LCBldmVudE5hbWUsIGV2ZW50T3B0aW9ucyk7XG4gICAgfVxuICAgIGZldGNoRXZlbnRMaXN0ZW5lcihldmVudFRhcmdldCwgZXZlbnROYW1lLCBldmVudE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgZXZlbnRMaXN0ZW5lck1hcCA9IHRoaXMuZmV0Y2hFdmVudExpc3RlbmVyTWFwRm9yRXZlbnRUYXJnZXQoZXZlbnRUYXJnZXQpO1xuICAgICAgICBjb25zdCBjYWNoZUtleSA9IHRoaXMuY2FjaGVLZXkoZXZlbnROYW1lLCBldmVudE9wdGlvbnMpO1xuICAgICAgICBsZXQgZXZlbnRMaXN0ZW5lciA9IGV2ZW50TGlzdGVuZXJNYXAuZ2V0KGNhY2hlS2V5KTtcbiAgICAgICAgaWYgKCFldmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgICBldmVudExpc3RlbmVyID0gdGhpcy5jcmVhdGVFdmVudExpc3RlbmVyKGV2ZW50VGFyZ2V0LCBldmVudE5hbWUsIGV2ZW50T3B0aW9ucyk7XG4gICAgICAgICAgICBldmVudExpc3RlbmVyTWFwLnNldChjYWNoZUtleSwgZXZlbnRMaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV2ZW50TGlzdGVuZXI7XG4gICAgfVxuICAgIGNyZWF0ZUV2ZW50TGlzdGVuZXIoZXZlbnRUYXJnZXQsIGV2ZW50TmFtZSwgZXZlbnRPcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50TGlzdGVuZXIgPSBuZXcgRXZlbnRMaXN0ZW5lcihldmVudFRhcmdldCwgZXZlbnROYW1lLCBldmVudE9wdGlvbnMpO1xuICAgICAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICBldmVudExpc3RlbmVyLmNvbm5lY3QoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXZlbnRMaXN0ZW5lcjtcbiAgICB9XG4gICAgZmV0Y2hFdmVudExpc3RlbmVyTWFwRm9yRXZlbnRUYXJnZXQoZXZlbnRUYXJnZXQpIHtcbiAgICAgICAgbGV0IGV2ZW50TGlzdGVuZXJNYXAgPSB0aGlzLmV2ZW50TGlzdGVuZXJNYXBzLmdldChldmVudFRhcmdldCk7XG4gICAgICAgIGlmICghZXZlbnRMaXN0ZW5lck1hcCkge1xuICAgICAgICAgICAgZXZlbnRMaXN0ZW5lck1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lck1hcHMuc2V0KGV2ZW50VGFyZ2V0LCBldmVudExpc3RlbmVyTWFwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXZlbnRMaXN0ZW5lck1hcDtcbiAgICB9XG4gICAgY2FjaGVLZXkoZXZlbnROYW1lLCBldmVudE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcGFydHMgPSBbZXZlbnROYW1lXTtcbiAgICAgICAgT2JqZWN0LmtleXMoZXZlbnRPcHRpb25zKVxuICAgICAgICAgICAgLnNvcnQoKVxuICAgICAgICAgICAgLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgcGFydHMucHVzaChgJHtldmVudE9wdGlvbnNba2V5XSA/IFwiXCIgOiBcIiFcIn0ke2tleX1gKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwYXJ0cy5qb2luKFwiOlwiKTtcbiAgICB9XG59XG5cbmNvbnN0IGRlZmF1bHRBY3Rpb25EZXNjcmlwdG9yRmlsdGVycyA9IHtcbiAgICBzdG9wKHsgZXZlbnQsIHZhbHVlIH0pIHtcbiAgICAgICAgaWYgKHZhbHVlKVxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgcHJldmVudCh7IGV2ZW50LCB2YWx1ZSB9KSB7XG4gICAgICAgIGlmICh2YWx1ZSlcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgc2VsZih7IGV2ZW50LCB2YWx1ZSwgZWxlbWVudCB9KSB7XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQgPT09IGV2ZW50LnRhcmdldDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfSxcbn07XG5jb25zdCBkZXNjcmlwdG9yUGF0dGVybiA9IC9eKD86KD86KFteLl0rPylcXCspPyguKz8pKD86XFwuKC4rPykpPyg/OkAod2luZG93fGRvY3VtZW50KSk/LT4pPyguKz8pKD86IyhbXjpdKz8pKSg/OjooLispKT8kLztcbmZ1bmN0aW9uIHBhcnNlQWN0aW9uRGVzY3JpcHRvclN0cmluZyhkZXNjcmlwdG9yU3RyaW5nKSB7XG4gICAgY29uc3Qgc291cmNlID0gZGVzY3JpcHRvclN0cmluZy50cmltKCk7XG4gICAgY29uc3QgbWF0Y2hlcyA9IHNvdXJjZS5tYXRjaChkZXNjcmlwdG9yUGF0dGVybikgfHwgW107XG4gICAgbGV0IGV2ZW50TmFtZSA9IG1hdGNoZXNbMl07XG4gICAgbGV0IGtleUZpbHRlciA9IG1hdGNoZXNbM107XG4gICAgaWYgKGtleUZpbHRlciAmJiAhW1wia2V5ZG93blwiLCBcImtleXVwXCIsIFwia2V5cHJlc3NcIl0uaW5jbHVkZXMoZXZlbnROYW1lKSkge1xuICAgICAgICBldmVudE5hbWUgKz0gYC4ke2tleUZpbHRlcn1gO1xuICAgICAgICBrZXlGaWx0ZXIgPSBcIlwiO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBldmVudFRhcmdldDogcGFyc2VFdmVudFRhcmdldChtYXRjaGVzWzRdKSxcbiAgICAgICAgZXZlbnROYW1lLFxuICAgICAgICBldmVudE9wdGlvbnM6IG1hdGNoZXNbN10gPyBwYXJzZUV2ZW50T3B0aW9ucyhtYXRjaGVzWzddKSA6IHt9LFxuICAgICAgICBpZGVudGlmaWVyOiBtYXRjaGVzWzVdLFxuICAgICAgICBtZXRob2ROYW1lOiBtYXRjaGVzWzZdLFxuICAgICAgICBrZXlGaWx0ZXI6IG1hdGNoZXNbMV0gfHwga2V5RmlsdGVyLFxuICAgIH07XG59XG5mdW5jdGlvbiBwYXJzZUV2ZW50VGFyZ2V0KGV2ZW50VGFyZ2V0TmFtZSkge1xuICAgIGlmIChldmVudFRhcmdldE5hbWUgPT0gXCJ3aW5kb3dcIikge1xuICAgICAgICByZXR1cm4gd2luZG93O1xuICAgIH1cbiAgICBlbHNlIGlmIChldmVudFRhcmdldE5hbWUgPT0gXCJkb2N1bWVudFwiKSB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudDtcbiAgICB9XG59XG5mdW5jdGlvbiBwYXJzZUV2ZW50T3B0aW9ucyhldmVudE9wdGlvbnMpIHtcbiAgICByZXR1cm4gZXZlbnRPcHRpb25zXG4gICAgICAgIC5zcGxpdChcIjpcIilcbiAgICAgICAgLnJlZHVjZSgob3B0aW9ucywgdG9rZW4pID0+IE9iamVjdC5hc3NpZ24ob3B0aW9ucywgeyBbdG9rZW4ucmVwbGFjZSgvXiEvLCBcIlwiKV06ICEvXiEvLnRlc3QodG9rZW4pIH0pLCB7fSk7XG59XG5mdW5jdGlvbiBzdHJpbmdpZnlFdmVudFRhcmdldChldmVudFRhcmdldCkge1xuICAgIGlmIChldmVudFRhcmdldCA9PSB3aW5kb3cpIHtcbiAgICAgICAgcmV0dXJuIFwid2luZG93XCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKGV2ZW50VGFyZ2V0ID09IGRvY3VtZW50KSB7XG4gICAgICAgIHJldHVybiBcImRvY3VtZW50XCI7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjYW1lbGl6ZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKC8oPzpbXy1dKShbYS16MC05XSkvZywgKF8sIGNoYXIpID0+IGNoYXIudG9VcHBlckNhc2UoKSk7XG59XG5mdW5jdGlvbiBuYW1lc3BhY2VDYW1lbGl6ZSh2YWx1ZSkge1xuICAgIHJldHVybiBjYW1lbGl6ZSh2YWx1ZS5yZXBsYWNlKC8tLS9nLCBcIi1cIikucmVwbGFjZSgvX18vZywgXCJfXCIpKTtcbn1cbmZ1bmN0aW9uIGNhcGl0YWxpemUodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB2YWx1ZS5zbGljZSgxKTtcbn1cbmZ1bmN0aW9uIGRhc2hlcml6ZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKC8oW0EtWl0pL2csIChfLCBjaGFyKSA9PiBgLSR7Y2hhci50b0xvd2VyQ2FzZSgpfWApO1xufVxuZnVuY3Rpb24gdG9rZW5pemUodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUubWF0Y2goL1teXFxzXSsvZykgfHwgW107XG59XG5cbmZ1bmN0aW9uIGlzU29tZXRoaW5nKG9iamVjdCkge1xuICAgIHJldHVybiBvYmplY3QgIT09IG51bGwgJiYgb2JqZWN0ICE9PSB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBoYXNQcm9wZXJ0eShvYmplY3QsIHByb3BlcnR5KSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTtcbn1cblxuY29uc3QgYWxsTW9kaWZpZXJzID0gW1wibWV0YVwiLCBcImN0cmxcIiwgXCJhbHRcIiwgXCJzaGlmdFwiXTtcbmNsYXNzIEFjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgaW5kZXgsIGRlc2NyaXB0b3IsIHNjaGVtYSkge1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gICAgICAgIHRoaXMuZXZlbnRUYXJnZXQgPSBkZXNjcmlwdG9yLmV2ZW50VGFyZ2V0IHx8IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMuZXZlbnROYW1lID0gZGVzY3JpcHRvci5ldmVudE5hbWUgfHwgZ2V0RGVmYXVsdEV2ZW50TmFtZUZvckVsZW1lbnQoZWxlbWVudCkgfHwgZXJyb3IoXCJtaXNzaW5nIGV2ZW50IG5hbWVcIik7XG4gICAgICAgIHRoaXMuZXZlbnRPcHRpb25zID0gZGVzY3JpcHRvci5ldmVudE9wdGlvbnMgfHwge307XG4gICAgICAgIHRoaXMuaWRlbnRpZmllciA9IGRlc2NyaXB0b3IuaWRlbnRpZmllciB8fCBlcnJvcihcIm1pc3NpbmcgaWRlbnRpZmllclwiKTtcbiAgICAgICAgdGhpcy5tZXRob2ROYW1lID0gZGVzY3JpcHRvci5tZXRob2ROYW1lIHx8IGVycm9yKFwibWlzc2luZyBtZXRob2QgbmFtZVwiKTtcbiAgICAgICAgdGhpcy5rZXlGaWx0ZXIgPSBkZXNjcmlwdG9yLmtleUZpbHRlciB8fCBcIlwiO1xuICAgICAgICB0aGlzLnNjaGVtYSA9IHNjaGVtYTtcbiAgICB9XG4gICAgc3RhdGljIGZvclRva2VuKHRva2VuLCBzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzKHRva2VuLmVsZW1lbnQsIHRva2VuLmluZGV4LCBwYXJzZUFjdGlvbkRlc2NyaXB0b3JTdHJpbmcodG9rZW4uY29udGVudCksIHNjaGVtYSk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCBldmVudEZpbHRlciA9IHRoaXMua2V5RmlsdGVyID8gYC4ke3RoaXMua2V5RmlsdGVyfWAgOiBcIlwiO1xuICAgICAgICBjb25zdCBldmVudFRhcmdldCA9IHRoaXMuZXZlbnRUYXJnZXROYW1lID8gYEAke3RoaXMuZXZlbnRUYXJnZXROYW1lfWAgOiBcIlwiO1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5ldmVudE5hbWV9JHtldmVudEZpbHRlcn0ke2V2ZW50VGFyZ2V0fS0+JHt0aGlzLmlkZW50aWZpZXJ9IyR7dGhpcy5tZXRob2ROYW1lfWA7XG4gICAgfVxuICAgIHNob3VsZElnbm9yZUtleWJvYXJkRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmtleUZpbHRlcikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpbHRlcnMgPSB0aGlzLmtleUZpbHRlci5zcGxpdChcIitcIik7XG4gICAgICAgIGlmICh0aGlzLmtleUZpbHRlckRpc3NhdGlzZmllZChldmVudCwgZmlsdGVycykpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YW5kYXJkRmlsdGVyID0gZmlsdGVycy5maWx0ZXIoKGtleSkgPT4gIWFsbE1vZGlmaWVycy5pbmNsdWRlcyhrZXkpKVswXTtcbiAgICAgICAgaWYgKCFzdGFuZGFyZEZpbHRlcikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaGFzUHJvcGVydHkodGhpcy5rZXlNYXBwaW5ncywgc3RhbmRhcmRGaWx0ZXIpKSB7XG4gICAgICAgICAgICBlcnJvcihgY29udGFpbnMgdW5rbm93biBrZXkgZmlsdGVyOiAke3RoaXMua2V5RmlsdGVyfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmtleU1hcHBpbmdzW3N0YW5kYXJkRmlsdGVyXS50b0xvd2VyQ2FzZSgpICE9PSBldmVudC5rZXkudG9Mb3dlckNhc2UoKTtcbiAgICB9XG4gICAgc2hvdWxkSWdub3JlTW91c2VFdmVudChldmVudCkge1xuICAgICAgICBpZiAoIXRoaXMua2V5RmlsdGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmlsdGVycyA9IFt0aGlzLmtleUZpbHRlcl07XG4gICAgICAgIGlmICh0aGlzLmtleUZpbHRlckRpc3NhdGlzZmllZChldmVudCwgZmlsdGVycykpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IHBhcmFtcygpIHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0ge307XG4gICAgICAgIGNvbnN0IHBhdHRlcm4gPSBuZXcgUmVnRXhwKGBeZGF0YS0ke3RoaXMuaWRlbnRpZmllcn0tKC4rKS1wYXJhbSRgLCBcImlcIik7XG4gICAgICAgIGZvciAoY29uc3QgeyBuYW1lLCB2YWx1ZSB9IG9mIEFycmF5LmZyb20odGhpcy5lbGVtZW50LmF0dHJpYnV0ZXMpKSB7XG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IG5hbWUubWF0Y2gocGF0dGVybik7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBtYXRjaCAmJiBtYXRjaFsxXTtcbiAgICAgICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICAgICAgICBwYXJhbXNbY2FtZWxpemUoa2V5KV0gPSB0eXBlY2FzdCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICB9XG4gICAgZ2V0IGV2ZW50VGFyZ2V0TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZ2lmeUV2ZW50VGFyZ2V0KHRoaXMuZXZlbnRUYXJnZXQpO1xuICAgIH1cbiAgICBnZXQga2V5TWFwcGluZ3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjaGVtYS5rZXlNYXBwaW5ncztcbiAgICB9XG4gICAga2V5RmlsdGVyRGlzc2F0aXNmaWVkKGV2ZW50LCBmaWx0ZXJzKSB7XG4gICAgICAgIGNvbnN0IFttZXRhLCBjdHJsLCBhbHQsIHNoaWZ0XSA9IGFsbE1vZGlmaWVycy5tYXAoKG1vZGlmaWVyKSA9PiBmaWx0ZXJzLmluY2x1ZGVzKG1vZGlmaWVyKSk7XG4gICAgICAgIHJldHVybiBldmVudC5tZXRhS2V5ICE9PSBtZXRhIHx8IGV2ZW50LmN0cmxLZXkgIT09IGN0cmwgfHwgZXZlbnQuYWx0S2V5ICE9PSBhbHQgfHwgZXZlbnQuc2hpZnRLZXkgIT09IHNoaWZ0O1xuICAgIH1cbn1cbmNvbnN0IGRlZmF1bHRFdmVudE5hbWVzID0ge1xuICAgIGE6ICgpID0+IFwiY2xpY2tcIixcbiAgICBidXR0b246ICgpID0+IFwiY2xpY2tcIixcbiAgICBmb3JtOiAoKSA9PiBcInN1Ym1pdFwiLFxuICAgIGRldGFpbHM6ICgpID0+IFwidG9nZ2xlXCIsXG4gICAgaW5wdXQ6IChlKSA9PiAoZS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpID09IFwic3VibWl0XCIgPyBcImNsaWNrXCIgOiBcImlucHV0XCIpLFxuICAgIHNlbGVjdDogKCkgPT4gXCJjaGFuZ2VcIixcbiAgICB0ZXh0YXJlYTogKCkgPT4gXCJpbnB1dFwiLFxufTtcbmZ1bmN0aW9uIGdldERlZmF1bHRFdmVudE5hbWVGb3JFbGVtZW50KGVsZW1lbnQpIHtcbiAgICBjb25zdCB0YWdOYW1lID0gZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKHRhZ05hbWUgaW4gZGVmYXVsdEV2ZW50TmFtZXMpIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRFdmVudE5hbWVzW3RhZ05hbWVdKGVsZW1lbnQpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGVycm9yKG1lc3NhZ2UpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG59XG5mdW5jdGlvbiB0eXBlY2FzdCh2YWx1ZSkge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKHZhbHVlKTtcbiAgICB9XG4gICAgY2F0Y2ggKG9fTykge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxufVxuXG5jbGFzcyBCaW5kaW5nIHtcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0LCBhY3Rpb24pIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy5hY3Rpb24gPSBhY3Rpb247XG4gICAgfVxuICAgIGdldCBpbmRleCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWN0aW9uLmluZGV4O1xuICAgIH1cbiAgICBnZXQgZXZlbnRUYXJnZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjdGlvbi5ldmVudFRhcmdldDtcbiAgICB9XG4gICAgZ2V0IGV2ZW50T3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWN0aW9uLmV2ZW50T3B0aW9ucztcbiAgICB9XG4gICAgZ2V0IGlkZW50aWZpZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQuaWRlbnRpZmllcjtcbiAgICB9XG4gICAgaGFuZGxlRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgYWN0aW9uRXZlbnQgPSB0aGlzLnByZXBhcmVBY3Rpb25FdmVudChldmVudCk7XG4gICAgICAgIGlmICh0aGlzLndpbGxCZUludm9rZWRCeUV2ZW50KGV2ZW50KSAmJiB0aGlzLmFwcGx5RXZlbnRNb2RpZmllcnMoYWN0aW9uRXZlbnQpKSB7XG4gICAgICAgICAgICB0aGlzLmludm9rZVdpdGhFdmVudChhY3Rpb25FdmVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGV2ZW50TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWN0aW9uLmV2ZW50TmFtZTtcbiAgICB9XG4gICAgZ2V0IG1ldGhvZCgpIHtcbiAgICAgICAgY29uc3QgbWV0aG9kID0gdGhpcy5jb250cm9sbGVyW3RoaXMubWV0aG9kTmFtZV07XG4gICAgICAgIGlmICh0eXBlb2YgbWV0aG9kID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgcmV0dXJuIG1ldGhvZDtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFjdGlvbiBcIiR7dGhpcy5hY3Rpb259XCIgcmVmZXJlbmNlcyB1bmRlZmluZWQgbWV0aG9kIFwiJHt0aGlzLm1ldGhvZE5hbWV9XCJgKTtcbiAgICB9XG4gICAgYXBwbHlFdmVudE1vZGlmaWVycyhldmVudCkge1xuICAgICAgICBjb25zdCB7IGVsZW1lbnQgfSA9IHRoaXMuYWN0aW9uO1xuICAgICAgICBjb25zdCB7IGFjdGlvbkRlc2NyaXB0b3JGaWx0ZXJzIH0gPSB0aGlzLmNvbnRleHQuYXBwbGljYXRpb247XG4gICAgICAgIGNvbnN0IHsgY29udHJvbGxlciB9ID0gdGhpcy5jb250ZXh0O1xuICAgICAgICBsZXQgcGFzc2VzID0gdHJ1ZTtcbiAgICAgICAgZm9yIChjb25zdCBbbmFtZSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuZXZlbnRPcHRpb25zKSkge1xuICAgICAgICAgICAgaWYgKG5hbWUgaW4gYWN0aW9uRGVzY3JpcHRvckZpbHRlcnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXIgPSBhY3Rpb25EZXNjcmlwdG9yRmlsdGVyc1tuYW1lXTtcbiAgICAgICAgICAgICAgICBwYXNzZXMgPSBwYXNzZXMgJiYgZmlsdGVyKHsgbmFtZSwgdmFsdWUsIGV2ZW50LCBlbGVtZW50LCBjb250cm9sbGVyIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhc3NlcztcbiAgICB9XG4gICAgcHJlcGFyZUFjdGlvbkV2ZW50KGV2ZW50KSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKGV2ZW50LCB7IHBhcmFtczogdGhpcy5hY3Rpb24ucGFyYW1zIH0pO1xuICAgIH1cbiAgICBpbnZva2VXaXRoRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgeyB0YXJnZXQsIGN1cnJlbnRUYXJnZXQgfSA9IGV2ZW50O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5tZXRob2QuY2FsbCh0aGlzLmNvbnRyb2xsZXIsIGV2ZW50KTtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5sb2dEZWJ1Z0FjdGl2aXR5KHRoaXMubWV0aG9kTmFtZSwgeyBldmVudCwgdGFyZ2V0LCBjdXJyZW50VGFyZ2V0LCBhY3Rpb246IHRoaXMubWV0aG9kTmFtZSB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgaWRlbnRpZmllciwgY29udHJvbGxlciwgZWxlbWVudCwgaW5kZXggfSA9IHRoaXM7XG4gICAgICAgICAgICBjb25zdCBkZXRhaWwgPSB7IGlkZW50aWZpZXIsIGNvbnRyb2xsZXIsIGVsZW1lbnQsIGluZGV4LCBldmVudCB9O1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmhhbmRsZUVycm9yKGVycm9yLCBgaW52b2tpbmcgYWN0aW9uIFwiJHt0aGlzLmFjdGlvbn1cImAsIGRldGFpbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgd2lsbEJlSW52b2tlZEJ5RXZlbnQoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgZXZlbnRUYXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgIGlmIChldmVudCBpbnN0YW5jZW9mIEtleWJvYXJkRXZlbnQgJiYgdGhpcy5hY3Rpb24uc2hvdWxkSWdub3JlS2V5Ym9hcmRFdmVudChldmVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnQgaW5zdGFuY2VvZiBNb3VzZUV2ZW50ICYmIHRoaXMuYWN0aW9uLnNob3VsZElnbm9yZU1vdXNlRXZlbnQoZXZlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudCA9PT0gZXZlbnRUYXJnZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV2ZW50VGFyZ2V0IGluc3RhbmNlb2YgRWxlbWVudCAmJiB0aGlzLmVsZW1lbnQuY29udGFpbnMoZXZlbnRUYXJnZXQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zY29wZS5jb250YWluc0VsZW1lbnQoZXZlbnRUYXJnZXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGUuY29udGFpbnNFbGVtZW50KHRoaXMuYWN0aW9uLmVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBjb250cm9sbGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0LmNvbnRyb2xsZXI7XG4gICAgfVxuICAgIGdldCBtZXRob2ROYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hY3Rpb24ubWV0aG9kTmFtZTtcbiAgICB9XG4gICAgZ2V0IGVsZW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3BlLmVsZW1lbnQ7XG4gICAgfVxuICAgIGdldCBzY29wZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5zY29wZTtcbiAgICB9XG59XG5cbmNsYXNzIEVsZW1lbnRPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgZGVsZWdhdGUpIHtcbiAgICAgICAgdGhpcy5tdXRhdGlvbk9ic2VydmVySW5pdCA9IHsgYXR0cmlidXRlczogdHJ1ZSwgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH07XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gICAgICAgIHRoaXMuZWxlbWVudHMgPSBuZXcgU2V0KCk7XG4gICAgICAgIHRoaXMubXV0YXRpb25PYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMpID0+IHRoaXMucHJvY2Vzc011dGF0aW9ucyhtdXRhdGlvbnMpKTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyLm9ic2VydmUodGhpcy5lbGVtZW50LCB0aGlzLm11dGF0aW9uT2JzZXJ2ZXJJbml0KTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHBhdXNlKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25PYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICBpZiAoIXRoaXMuc3RhcnRlZCkge1xuICAgICAgICAgICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyLm9ic2VydmUodGhpcy5lbGVtZW50LCB0aGlzLm11dGF0aW9uT2JzZXJ2ZXJJbml0KTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgICAgICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyLnRha2VSZWNvcmRzKCk7XG4gICAgICAgICAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVmcmVzaCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgICAgICAgY29uc3QgbWF0Y2hlcyA9IG5ldyBTZXQodGhpcy5tYXRjaEVsZW1lbnRzSW5UcmVlKCkpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIEFycmF5LmZyb20odGhpcy5lbGVtZW50cykpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW1hdGNoZXMuaGFzKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgQXJyYXkuZnJvbShtYXRjaGVzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkRWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBwcm9jZXNzTXV0YXRpb25zKG11dGF0aW9ucykge1xuICAgICAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG11dGF0aW9uIG9mIG11dGF0aW9ucykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc011dGF0aW9uKG11dGF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBwcm9jZXNzTXV0YXRpb24obXV0YXRpb24pIHtcbiAgICAgICAgaWYgKG11dGF0aW9uLnR5cGUgPT0gXCJhdHRyaWJ1dGVzXCIpIHtcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc0F0dHJpYnV0ZUNoYW5nZShtdXRhdGlvbi50YXJnZXQsIG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG11dGF0aW9uLnR5cGUgPT0gXCJjaGlsZExpc3RcIikge1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzUmVtb3ZlZE5vZGVzKG11dGF0aW9uLnJlbW92ZWROb2Rlcyk7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NBZGRlZE5vZGVzKG11dGF0aW9uLmFkZGVkTm9kZXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByb2Nlc3NBdHRyaWJ1dGVDaGFuZ2UoZWxlbWVudCwgYXR0cmlidXRlTmFtZSkge1xuICAgICAgICBpZiAodGhpcy5lbGVtZW50cy5oYXMoZWxlbWVudCkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRlbGVnYXRlLmVsZW1lbnRBdHRyaWJ1dGVDaGFuZ2VkICYmIHRoaXMubWF0Y2hFbGVtZW50KGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5lbGVtZW50QXR0cmlidXRlQ2hhbmdlZChlbGVtZW50LCBhdHRyaWJ1dGVOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLm1hdGNoRWxlbWVudChlbGVtZW50KSkge1xuICAgICAgICAgICAgdGhpcy5hZGRFbGVtZW50KGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByb2Nlc3NSZW1vdmVkTm9kZXMobm9kZXMpIHtcbiAgICAgICAgZm9yIChjb25zdCBub2RlIG9mIEFycmF5LmZyb20obm9kZXMpKSB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5lbGVtZW50RnJvbU5vZGUobm9kZSk7XG4gICAgICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1RyZWUoZWxlbWVudCwgdGhpcy5yZW1vdmVFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBwcm9jZXNzQWRkZWROb2Rlcyhub2Rlcykge1xuICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2YgQXJyYXkuZnJvbShub2RlcykpIHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmVsZW1lbnRGcm9tTm9kZShub2RlKTtcbiAgICAgICAgICAgIGlmIChlbGVtZW50ICYmIHRoaXMuZWxlbWVudElzQWN0aXZlKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzVHJlZShlbGVtZW50LCB0aGlzLmFkZEVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIG1hdGNoRWxlbWVudChlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLm1hdGNoRWxlbWVudChlbGVtZW50KTtcbiAgICB9XG4gICAgbWF0Y2hFbGVtZW50c0luVHJlZSh0cmVlID0gdGhpcy5lbGVtZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLm1hdGNoRWxlbWVudHNJblRyZWUodHJlZSk7XG4gICAgfVxuICAgIHByb2Nlc3NUcmVlKHRyZWUsIHByb2Nlc3Nvcikge1xuICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgdGhpcy5tYXRjaEVsZW1lbnRzSW5UcmVlKHRyZWUpKSB7XG4gICAgICAgICAgICBwcm9jZXNzb3IuY2FsbCh0aGlzLCBlbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbGVtZW50RnJvbU5vZGUobm9kZSkge1xuICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxlbWVudElzQWN0aXZlKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQuaXNDb25uZWN0ZWQgIT0gdGhpcy5lbGVtZW50LmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LmNvbnRhaW5zKGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZEVsZW1lbnQoZWxlbWVudCkge1xuICAgICAgICBpZiAoIXRoaXMuZWxlbWVudHMuaGFzKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50SXNBY3RpdmUoZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRzLmFkZChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZS5lbGVtZW50TWF0Y2hlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGVnYXRlLmVsZW1lbnRNYXRjaGVkKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZW1vdmVFbGVtZW50KGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudHMuaGFzKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzLmRlbGV0ZShlbGVtZW50KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmRlbGVnYXRlLmVsZW1lbnRVbm1hdGNoZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlbGVnYXRlLmVsZW1lbnRVbm1hdGNoZWQoZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNsYXNzIEF0dHJpYnV0ZU9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBhdHRyaWJ1dGVOYW1lLCBkZWxlZ2F0ZSkge1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZU5hbWUgPSBhdHRyaWJ1dGVOYW1lO1xuICAgICAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gICAgICAgIHRoaXMuZWxlbWVudE9ic2VydmVyID0gbmV3IEVsZW1lbnRPYnNlcnZlcihlbGVtZW50LCB0aGlzKTtcbiAgICB9XG4gICAgZ2V0IGVsZW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRPYnNlcnZlci5lbGVtZW50O1xuICAgIH1cbiAgICBnZXQgc2VsZWN0b3IoKSB7XG4gICAgICAgIHJldHVybiBgWyR7dGhpcy5hdHRyaWJ1dGVOYW1lfV1gO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50T2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICB9XG4gICAgcGF1c2UoY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5lbGVtZW50T2JzZXJ2ZXIucGF1c2UoY2FsbGJhY2spO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnRPYnNlcnZlci5zdG9wKCk7XG4gICAgfVxuICAgIHJlZnJlc2goKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudE9ic2VydmVyLnJlZnJlc2goKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRPYnNlcnZlci5zdGFydGVkO1xuICAgIH1cbiAgICBtYXRjaEVsZW1lbnQoZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gZWxlbWVudC5oYXNBdHRyaWJ1dGUodGhpcy5hdHRyaWJ1dGVOYW1lKTtcbiAgICB9XG4gICAgbWF0Y2hFbGVtZW50c0luVHJlZSh0cmVlKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gdGhpcy5tYXRjaEVsZW1lbnQodHJlZSkgPyBbdHJlZV0gOiBbXTtcbiAgICAgICAgY29uc3QgbWF0Y2hlcyA9IEFycmF5LmZyb20odHJlZS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuc2VsZWN0b3IpKTtcbiAgICAgICAgcmV0dXJuIG1hdGNoLmNvbmNhdChtYXRjaGVzKTtcbiAgICB9XG4gICAgZWxlbWVudE1hdGNoZWQoZWxlbWVudCkge1xuICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZS5lbGVtZW50TWF0Y2hlZEF0dHJpYnV0ZSkge1xuICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5lbGVtZW50TWF0Y2hlZEF0dHJpYnV0ZShlbGVtZW50LCB0aGlzLmF0dHJpYnV0ZU5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsZW1lbnRVbm1hdGNoZWQoZWxlbWVudCkge1xuICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZS5lbGVtZW50VW5tYXRjaGVkQXR0cmlidXRlKSB7XG4gICAgICAgICAgICB0aGlzLmRlbGVnYXRlLmVsZW1lbnRVbm1hdGNoZWRBdHRyaWJ1dGUoZWxlbWVudCwgdGhpcy5hdHRyaWJ1dGVOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbGVtZW50QXR0cmlidXRlQ2hhbmdlZChlbGVtZW50LCBhdHRyaWJ1dGVOYW1lKSB7XG4gICAgICAgIGlmICh0aGlzLmRlbGVnYXRlLmVsZW1lbnRBdHRyaWJ1dGVWYWx1ZUNoYW5nZWQgJiYgdGhpcy5hdHRyaWJ1dGVOYW1lID09IGF0dHJpYnV0ZU5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUuZWxlbWVudEF0dHJpYnV0ZVZhbHVlQ2hhbmdlZChlbGVtZW50LCBhdHRyaWJ1dGVOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gYWRkKG1hcCwga2V5LCB2YWx1ZSkge1xuICAgIGZldGNoKG1hcCwga2V5KS5hZGQodmFsdWUpO1xufVxuZnVuY3Rpb24gZGVsKG1hcCwga2V5LCB2YWx1ZSkge1xuICAgIGZldGNoKG1hcCwga2V5KS5kZWxldGUodmFsdWUpO1xuICAgIHBydW5lKG1hcCwga2V5KTtcbn1cbmZ1bmN0aW9uIGZldGNoKG1hcCwga2V5KSB7XG4gICAgbGV0IHZhbHVlcyA9IG1hcC5nZXQoa2V5KTtcbiAgICBpZiAoIXZhbHVlcykge1xuICAgICAgICB2YWx1ZXMgPSBuZXcgU2V0KCk7XG4gICAgICAgIG1hcC5zZXQoa2V5LCB2YWx1ZXMpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWVzO1xufVxuZnVuY3Rpb24gcHJ1bmUobWFwLCBrZXkpIHtcbiAgICBjb25zdCB2YWx1ZXMgPSBtYXAuZ2V0KGtleSk7XG4gICAgaWYgKHZhbHVlcyAhPSBudWxsICYmIHZhbHVlcy5zaXplID09IDApIHtcbiAgICAgICAgbWFwLmRlbGV0ZShrZXkpO1xuICAgIH1cbn1cblxuY2xhc3MgTXVsdGltYXAge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnZhbHVlc0J5S2V5ID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICBnZXQga2V5cygpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy52YWx1ZXNCeUtleS5rZXlzKCkpO1xuICAgIH1cbiAgICBnZXQgdmFsdWVzKCkge1xuICAgICAgICBjb25zdCBzZXRzID0gQXJyYXkuZnJvbSh0aGlzLnZhbHVlc0J5S2V5LnZhbHVlcygpKTtcbiAgICAgICAgcmV0dXJuIHNldHMucmVkdWNlKCh2YWx1ZXMsIHNldCkgPT4gdmFsdWVzLmNvbmNhdChBcnJheS5mcm9tKHNldCkpLCBbXSk7XG4gICAgfVxuICAgIGdldCBzaXplKCkge1xuICAgICAgICBjb25zdCBzZXRzID0gQXJyYXkuZnJvbSh0aGlzLnZhbHVlc0J5S2V5LnZhbHVlcygpKTtcbiAgICAgICAgcmV0dXJuIHNldHMucmVkdWNlKChzaXplLCBzZXQpID0+IHNpemUgKyBzZXQuc2l6ZSwgMCk7XG4gICAgfVxuICAgIGFkZChrZXksIHZhbHVlKSB7XG4gICAgICAgIGFkZCh0aGlzLnZhbHVlc0J5S2V5LCBrZXksIHZhbHVlKTtcbiAgICB9XG4gICAgZGVsZXRlKGtleSwgdmFsdWUpIHtcbiAgICAgICAgZGVsKHRoaXMudmFsdWVzQnlLZXksIGtleSwgdmFsdWUpO1xuICAgIH1cbiAgICBoYXMoa2V5LCB2YWx1ZSkge1xuICAgICAgICBjb25zdCB2YWx1ZXMgPSB0aGlzLnZhbHVlc0J5S2V5LmdldChrZXkpO1xuICAgICAgICByZXR1cm4gdmFsdWVzICE9IG51bGwgJiYgdmFsdWVzLmhhcyh2YWx1ZSk7XG4gICAgfVxuICAgIGhhc0tleShrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVzQnlLZXkuaGFzKGtleSk7XG4gICAgfVxuICAgIGhhc1ZhbHVlKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHNldHMgPSBBcnJheS5mcm9tKHRoaXMudmFsdWVzQnlLZXkudmFsdWVzKCkpO1xuICAgICAgICByZXR1cm4gc2V0cy5zb21lKChzZXQpID0+IHNldC5oYXModmFsdWUpKTtcbiAgICB9XG4gICAgZ2V0VmFsdWVzRm9yS2V5KGtleSkge1xuICAgICAgICBjb25zdCB2YWx1ZXMgPSB0aGlzLnZhbHVlc0J5S2V5LmdldChrZXkpO1xuICAgICAgICByZXR1cm4gdmFsdWVzID8gQXJyYXkuZnJvbSh2YWx1ZXMpIDogW107XG4gICAgfVxuICAgIGdldEtleXNGb3JWYWx1ZSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnZhbHVlc0J5S2V5KVxuICAgICAgICAgICAgLmZpbHRlcigoW19rZXksIHZhbHVlc10pID0+IHZhbHVlcy5oYXModmFsdWUpKVxuICAgICAgICAgICAgLm1hcCgoW2tleSwgX3ZhbHVlc10pID0+IGtleSk7XG4gICAgfVxufVxuXG5jbGFzcyBJbmRleGVkTXVsdGltYXAgZXh0ZW5kcyBNdWx0aW1hcCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMua2V5c0J5VmFsdWUgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIGdldCB2YWx1ZXMoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMua2V5c0J5VmFsdWUua2V5cygpKTtcbiAgICB9XG4gICAgYWRkKGtleSwgdmFsdWUpIHtcbiAgICAgICAgc3VwZXIuYWRkKGtleSwgdmFsdWUpO1xuICAgICAgICBhZGQodGhpcy5rZXlzQnlWYWx1ZSwgdmFsdWUsIGtleSk7XG4gICAgfVxuICAgIGRlbGV0ZShrZXksIHZhbHVlKSB7XG4gICAgICAgIHN1cGVyLmRlbGV0ZShrZXksIHZhbHVlKTtcbiAgICAgICAgZGVsKHRoaXMua2V5c0J5VmFsdWUsIHZhbHVlLCBrZXkpO1xuICAgIH1cbiAgICBoYXNWYWx1ZSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5rZXlzQnlWYWx1ZS5oYXModmFsdWUpO1xuICAgIH1cbiAgICBnZXRLZXlzRm9yVmFsdWUodmFsdWUpIHtcbiAgICAgICAgY29uc3Qgc2V0ID0gdGhpcy5rZXlzQnlWYWx1ZS5nZXQodmFsdWUpO1xuICAgICAgICByZXR1cm4gc2V0ID8gQXJyYXkuZnJvbShzZXQpIDogW107XG4gICAgfVxufVxuXG5jbGFzcyBTZWxlY3Rvck9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBzZWxlY3RvciwgZGVsZWdhdGUsIGRldGFpbHMpIHtcbiAgICAgICAgdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICAgICAgdGhpcy5kZXRhaWxzID0gZGV0YWlscztcbiAgICAgICAgdGhpcy5lbGVtZW50T2JzZXJ2ZXIgPSBuZXcgRWxlbWVudE9ic2VydmVyKGVsZW1lbnQsIHRoaXMpO1xuICAgICAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gICAgICAgIHRoaXMubWF0Y2hlc0J5RWxlbWVudCA9IG5ldyBNdWx0aW1hcCgpO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudE9ic2VydmVyLnN0YXJ0ZWQ7XG4gICAgfVxuICAgIGdldCBzZWxlY3RvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbGVjdG9yO1xuICAgIH1cbiAgICBzZXQgc2VsZWN0b3Ioc2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLmVsZW1lbnRPYnNlcnZlci5zdGFydCgpO1xuICAgIH1cbiAgICBwYXVzZShjYWxsYmFjaykge1xuICAgICAgICB0aGlzLmVsZW1lbnRPYnNlcnZlci5wYXVzZShjYWxsYmFjayk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudE9ic2VydmVyLnN0b3AoKTtcbiAgICB9XG4gICAgcmVmcmVzaCgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50T2JzZXJ2ZXIucmVmcmVzaCgpO1xuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudE9ic2VydmVyLmVsZW1lbnQ7XG4gICAgfVxuICAgIG1hdGNoRWxlbWVudChlbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IHsgc2VsZWN0b3IgfSA9IHRoaXM7XG4gICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgY29uc3QgbWF0Y2hlcyA9IGVsZW1lbnQubWF0Y2hlcyhzZWxlY3Rvcik7XG4gICAgICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZS5zZWxlY3Rvck1hdGNoRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaGVzICYmIHRoaXMuZGVsZWdhdGUuc2VsZWN0b3JNYXRjaEVsZW1lbnQoZWxlbWVudCwgdGhpcy5kZXRhaWxzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtYXRjaGVzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIG1hdGNoRWxlbWVudHNJblRyZWUodHJlZSkge1xuICAgICAgICBjb25zdCB7IHNlbGVjdG9yIH0gPSB0aGlzO1xuICAgICAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gdGhpcy5tYXRjaEVsZW1lbnQodHJlZSkgPyBbdHJlZV0gOiBbXTtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSBBcnJheS5mcm9tKHRyZWUucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpLmZpbHRlcigobWF0Y2gpID0+IHRoaXMubWF0Y2hFbGVtZW50KG1hdGNoKSk7XG4gICAgICAgICAgICByZXR1cm4gbWF0Y2guY29uY2F0KG1hdGNoZXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsZW1lbnRNYXRjaGVkKGVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgeyBzZWxlY3RvciB9ID0gdGhpcztcbiAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdG9yTWF0Y2hlZChlbGVtZW50LCBzZWxlY3Rvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxlbWVudFVubWF0Y2hlZChlbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdG9ycyA9IHRoaXMubWF0Y2hlc0J5RWxlbWVudC5nZXRLZXlzRm9yVmFsdWUoZWxlbWVudCk7XG4gICAgICAgIGZvciAoY29uc3Qgc2VsZWN0b3Igb2Ygc2VsZWN0b3JzKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdG9yVW5tYXRjaGVkKGVsZW1lbnQsIHNlbGVjdG9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbGVtZW50QXR0cmlidXRlQ2hhbmdlZChlbGVtZW50LCBfYXR0cmlidXRlTmFtZSkge1xuICAgICAgICBjb25zdCB7IHNlbGVjdG9yIH0gPSB0aGlzO1xuICAgICAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSB0aGlzLm1hdGNoRWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZWRCZWZvcmUgPSB0aGlzLm1hdGNoZXNCeUVsZW1lbnQuaGFzKHNlbGVjdG9yLCBlbGVtZW50KTtcbiAgICAgICAgICAgIGlmIChtYXRjaGVzICYmICFtYXRjaGVkQmVmb3JlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rvck1hdGNoZWQoZWxlbWVudCwgc2VsZWN0b3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIW1hdGNoZXMgJiYgbWF0Y2hlZEJlZm9yZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0b3JVbm1hdGNoZWQoZWxlbWVudCwgc2VsZWN0b3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHNlbGVjdG9yTWF0Y2hlZChlbGVtZW50LCBzZWxlY3Rvcikge1xuICAgICAgICB0aGlzLmRlbGVnYXRlLnNlbGVjdG9yTWF0Y2hlZChlbGVtZW50LCBzZWxlY3RvciwgdGhpcy5kZXRhaWxzKTtcbiAgICAgICAgdGhpcy5tYXRjaGVzQnlFbGVtZW50LmFkZChzZWxlY3RvciwgZWxlbWVudCk7XG4gICAgfVxuICAgIHNlbGVjdG9yVW5tYXRjaGVkKGVsZW1lbnQsIHNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUuc2VsZWN0b3JVbm1hdGNoZWQoZWxlbWVudCwgc2VsZWN0b3IsIHRoaXMuZGV0YWlscyk7XG4gICAgICAgIHRoaXMubWF0Y2hlc0J5RWxlbWVudC5kZWxldGUoc2VsZWN0b3IsIGVsZW1lbnQpO1xuICAgIH1cbn1cblxuY2xhc3MgU3RyaW5nTWFwT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIGRlbGVnYXRlKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc3RyaW5nTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB0aGlzLnByb2Nlc3NNdXRhdGlvbnMobXV0YXRpb25zKSk7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICBpZiAoIXRoaXMuc3RhcnRlZCkge1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25PYnNlcnZlci5vYnNlcnZlKHRoaXMuZWxlbWVudCwgeyBhdHRyaWJ1dGVzOiB0cnVlLCBhdHRyaWJ1dGVPbGRWYWx1ZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25PYnNlcnZlci50YWtlUmVjb3JkcygpO1xuICAgICAgICAgICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlZnJlc2goKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgYXR0cmlidXRlTmFtZSBvZiB0aGlzLmtub3duQXR0cmlidXRlTmFtZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJvY2Vzc011dGF0aW9ucyhtdXRhdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBtdXRhdGlvbiBvZiBtdXRhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NNdXRhdGlvbihtdXRhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJvY2Vzc011dGF0aW9uKG11dGF0aW9uKSB7XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZU5hbWUgPSBtdXRhdGlvbi5hdHRyaWJ1dGVOYW1lO1xuICAgICAgICBpZiAoYXR0cmlidXRlTmFtZSkge1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoQXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUsIG11dGF0aW9uLm9sZFZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWZyZXNoQXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMuZGVsZWdhdGUuZ2V0U3RyaW5nTWFwS2V5Rm9yQXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpO1xuICAgICAgICBpZiAoa2V5ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5zdHJpbmdNYXAuaGFzKGF0dHJpYnV0ZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdHJpbmdNYXBLZXlBZGRlZChrZXksIGF0dHJpYnV0ZU5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RyaW5nTWFwLmdldChhdHRyaWJ1dGVOYW1lKSAhPSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RyaW5nTWFwVmFsdWVDaGFuZ2VkKHZhbHVlLCBrZXksIG9sZFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLnN0cmluZ01hcC5nZXQoYXR0cmlidXRlTmFtZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdHJpbmdNYXAuZGVsZXRlKGF0dHJpYnV0ZU5hbWUpO1xuICAgICAgICAgICAgICAgIGlmIChvbGRWYWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHJpbmdNYXBLZXlSZW1vdmVkKGtleSwgYXR0cmlidXRlTmFtZSwgb2xkVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdHJpbmdNYXAuc2V0KGF0dHJpYnV0ZU5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzdHJpbmdNYXBLZXlBZGRlZChrZXksIGF0dHJpYnV0ZU5hbWUpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUuc3RyaW5nTWFwS2V5QWRkZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUuc3RyaW5nTWFwS2V5QWRkZWQoa2V5LCBhdHRyaWJ1dGVOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdHJpbmdNYXBWYWx1ZUNoYW5nZWQodmFsdWUsIGtleSwgb2xkVmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUuc3RyaW5nTWFwVmFsdWVDaGFuZ2VkKSB7XG4gICAgICAgICAgICB0aGlzLmRlbGVnYXRlLnN0cmluZ01hcFZhbHVlQ2hhbmdlZCh2YWx1ZSwga2V5LCBvbGRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RyaW5nTWFwS2V5UmVtb3ZlZChrZXksIGF0dHJpYnV0ZU5hbWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLmRlbGVnYXRlLnN0cmluZ01hcEtleVJlbW92ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUuc3RyaW5nTWFwS2V5UmVtb3ZlZChrZXksIGF0dHJpYnV0ZU5hbWUsIG9sZFZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQga25vd25BdHRyaWJ1dGVOYW1lcygpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20obmV3IFNldCh0aGlzLmN1cnJlbnRBdHRyaWJ1dGVOYW1lcy5jb25jYXQodGhpcy5yZWNvcmRlZEF0dHJpYnV0ZU5hbWVzKSkpO1xuICAgIH1cbiAgICBnZXQgY3VycmVudEF0dHJpYnV0ZU5hbWVzKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmVsZW1lbnQuYXR0cmlidXRlcykubWFwKChhdHRyaWJ1dGUpID0+IGF0dHJpYnV0ZS5uYW1lKTtcbiAgICB9XG4gICAgZ2V0IHJlY29yZGVkQXR0cmlidXRlTmFtZXMoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuc3RyaW5nTWFwLmtleXMoKSk7XG4gICAgfVxufVxuXG5jbGFzcyBUb2tlbkxpc3RPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgYXR0cmlidXRlTmFtZSwgZGVsZWdhdGUpIHtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVPYnNlcnZlciA9IG5ldyBBdHRyaWJ1dGVPYnNlcnZlcihlbGVtZW50LCBhdHRyaWJ1dGVOYW1lLCB0aGlzKTtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgICAgICB0aGlzLnRva2Vuc0J5RWxlbWVudCA9IG5ldyBNdWx0aW1hcCgpO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlT2JzZXJ2ZXIuc3RhcnRlZDtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlT2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICB9XG4gICAgcGF1c2UoY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVPYnNlcnZlci5wYXVzZShjYWxsYmFjayk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlT2JzZXJ2ZXIuc3RvcCgpO1xuICAgIH1cbiAgICByZWZyZXNoKCkge1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZU9ic2VydmVyLnJlZnJlc2goKTtcbiAgICB9XG4gICAgZ2V0IGVsZW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZU9ic2VydmVyLmVsZW1lbnQ7XG4gICAgfVxuICAgIGdldCBhdHRyaWJ1dGVOYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGVPYnNlcnZlci5hdHRyaWJ1dGVOYW1lO1xuICAgIH1cbiAgICBlbGVtZW50TWF0Y2hlZEF0dHJpYnV0ZShlbGVtZW50KSB7XG4gICAgICAgIHRoaXMudG9rZW5zTWF0Y2hlZCh0aGlzLnJlYWRUb2tlbnNGb3JFbGVtZW50KGVsZW1lbnQpKTtcbiAgICB9XG4gICAgZWxlbWVudEF0dHJpYnV0ZVZhbHVlQ2hhbmdlZChlbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IFt1bm1hdGNoZWRUb2tlbnMsIG1hdGNoZWRUb2tlbnNdID0gdGhpcy5yZWZyZXNoVG9rZW5zRm9yRWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgdGhpcy50b2tlbnNVbm1hdGNoZWQodW5tYXRjaGVkVG9rZW5zKTtcbiAgICAgICAgdGhpcy50b2tlbnNNYXRjaGVkKG1hdGNoZWRUb2tlbnMpO1xuICAgIH1cbiAgICBlbGVtZW50VW5tYXRjaGVkQXR0cmlidXRlKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy50b2tlbnNVbm1hdGNoZWQodGhpcy50b2tlbnNCeUVsZW1lbnQuZ2V0VmFsdWVzRm9yS2V5KGVsZW1lbnQpKTtcbiAgICB9XG4gICAgdG9rZW5zTWF0Y2hlZCh0b2tlbnMpIHtcbiAgICAgICAgdG9rZW5zLmZvckVhY2goKHRva2VuKSA9PiB0aGlzLnRva2VuTWF0Y2hlZCh0b2tlbikpO1xuICAgIH1cbiAgICB0b2tlbnNVbm1hdGNoZWQodG9rZW5zKSB7XG4gICAgICAgIHRva2Vucy5mb3JFYWNoKCh0b2tlbikgPT4gdGhpcy50b2tlblVubWF0Y2hlZCh0b2tlbikpO1xuICAgIH1cbiAgICB0b2tlbk1hdGNoZWQodG9rZW4pIHtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZS50b2tlbk1hdGNoZWQodG9rZW4pO1xuICAgICAgICB0aGlzLnRva2Vuc0J5RWxlbWVudC5hZGQodG9rZW4uZWxlbWVudCwgdG9rZW4pO1xuICAgIH1cbiAgICB0b2tlblVubWF0Y2hlZCh0b2tlbikge1xuICAgICAgICB0aGlzLmRlbGVnYXRlLnRva2VuVW5tYXRjaGVkKHRva2VuKTtcbiAgICAgICAgdGhpcy50b2tlbnNCeUVsZW1lbnQuZGVsZXRlKHRva2VuLmVsZW1lbnQsIHRva2VuKTtcbiAgICB9XG4gICAgcmVmcmVzaFRva2Vuc0ZvckVsZW1lbnQoZWxlbWVudCkge1xuICAgICAgICBjb25zdCBwcmV2aW91c1Rva2VucyA9IHRoaXMudG9rZW5zQnlFbGVtZW50LmdldFZhbHVlc0ZvcktleShlbGVtZW50KTtcbiAgICAgICAgY29uc3QgY3VycmVudFRva2VucyA9IHRoaXMucmVhZFRva2Vuc0ZvckVsZW1lbnQoZWxlbWVudCk7XG4gICAgICAgIGNvbnN0IGZpcnN0RGlmZmVyaW5nSW5kZXggPSB6aXAocHJldmlvdXNUb2tlbnMsIGN1cnJlbnRUb2tlbnMpLmZpbmRJbmRleCgoW3ByZXZpb3VzVG9rZW4sIGN1cnJlbnRUb2tlbl0pID0+ICF0b2tlbnNBcmVFcXVhbChwcmV2aW91c1Rva2VuLCBjdXJyZW50VG9rZW4pKTtcbiAgICAgICAgaWYgKGZpcnN0RGlmZmVyaW5nSW5kZXggPT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBbW10sIFtdXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBbcHJldmlvdXNUb2tlbnMuc2xpY2UoZmlyc3REaWZmZXJpbmdJbmRleCksIGN1cnJlbnRUb2tlbnMuc2xpY2UoZmlyc3REaWZmZXJpbmdJbmRleCldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlYWRUb2tlbnNGb3JFbGVtZW50KGVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgYXR0cmlidXRlTmFtZSA9IHRoaXMuYXR0cmlidXRlTmFtZTtcbiAgICAgICAgY29uc3QgdG9rZW5TdHJpbmcgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lKSB8fCBcIlwiO1xuICAgICAgICByZXR1cm4gcGFyc2VUb2tlblN0cmluZyh0b2tlblN0cmluZywgZWxlbWVudCwgYXR0cmlidXRlTmFtZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gcGFyc2VUb2tlblN0cmluZyh0b2tlblN0cmluZywgZWxlbWVudCwgYXR0cmlidXRlTmFtZSkge1xuICAgIHJldHVybiB0b2tlblN0cmluZ1xuICAgICAgICAudHJpbSgpXG4gICAgICAgIC5zcGxpdCgvXFxzKy8pXG4gICAgICAgIC5maWx0ZXIoKGNvbnRlbnQpID0+IGNvbnRlbnQubGVuZ3RoKVxuICAgICAgICAubWFwKChjb250ZW50LCBpbmRleCkgPT4gKHsgZWxlbWVudCwgYXR0cmlidXRlTmFtZSwgY29udGVudCwgaW5kZXggfSkpO1xufVxuZnVuY3Rpb24gemlwKGxlZnQsIHJpZ2h0KSB7XG4gICAgY29uc3QgbGVuZ3RoID0gTWF0aC5tYXgobGVmdC5sZW5ndGgsIHJpZ2h0Lmxlbmd0aCk7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGggfSwgKF8sIGluZGV4KSA9PiBbbGVmdFtpbmRleF0sIHJpZ2h0W2luZGV4XV0pO1xufVxuZnVuY3Rpb24gdG9rZW5zQXJlRXF1YWwobGVmdCwgcmlnaHQpIHtcbiAgICByZXR1cm4gbGVmdCAmJiByaWdodCAmJiBsZWZ0LmluZGV4ID09IHJpZ2h0LmluZGV4ICYmIGxlZnQuY29udGVudCA9PSByaWdodC5jb250ZW50O1xufVxuXG5jbGFzcyBWYWx1ZUxpc3RPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgYXR0cmlidXRlTmFtZSwgZGVsZWdhdGUpIHtcbiAgICAgICAgdGhpcy50b2tlbkxpc3RPYnNlcnZlciA9IG5ldyBUb2tlbkxpc3RPYnNlcnZlcihlbGVtZW50LCBhdHRyaWJ1dGVOYW1lLCB0aGlzKTtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgICAgICB0aGlzLnBhcnNlUmVzdWx0c0J5VG9rZW4gPSBuZXcgV2Vha01hcCgpO1xuICAgICAgICB0aGlzLnZhbHVlc0J5VG9rZW5CeUVsZW1lbnQgPSBuZXcgV2Vha01hcCgpO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9rZW5MaXN0T2JzZXJ2ZXIuc3RhcnRlZDtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMudG9rZW5MaXN0T2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy50b2tlbkxpc3RPYnNlcnZlci5zdG9wKCk7XG4gICAgfVxuICAgIHJlZnJlc2goKSB7XG4gICAgICAgIHRoaXMudG9rZW5MaXN0T2JzZXJ2ZXIucmVmcmVzaCgpO1xuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9rZW5MaXN0T2JzZXJ2ZXIuZWxlbWVudDtcbiAgICB9XG4gICAgZ2V0IGF0dHJpYnV0ZU5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRva2VuTGlzdE9ic2VydmVyLmF0dHJpYnV0ZU5hbWU7XG4gICAgfVxuICAgIHRva2VuTWF0Y2hlZCh0b2tlbikge1xuICAgICAgICBjb25zdCB7IGVsZW1lbnQgfSA9IHRva2VuO1xuICAgICAgICBjb25zdCB7IHZhbHVlIH0gPSB0aGlzLmZldGNoUGFyc2VSZXN1bHRGb3JUb2tlbih0b2tlbik7XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5mZXRjaFZhbHVlc0J5VG9rZW5Gb3JFbGVtZW50KGVsZW1lbnQpLnNldCh0b2tlbiwgdmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5lbGVtZW50TWF0Y2hlZFZhbHVlKGVsZW1lbnQsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b2tlblVubWF0Y2hlZCh0b2tlbikge1xuICAgICAgICBjb25zdCB7IGVsZW1lbnQgfSA9IHRva2VuO1xuICAgICAgICBjb25zdCB7IHZhbHVlIH0gPSB0aGlzLmZldGNoUGFyc2VSZXN1bHRGb3JUb2tlbih0b2tlbik7XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5mZXRjaFZhbHVlc0J5VG9rZW5Gb3JFbGVtZW50KGVsZW1lbnQpLmRlbGV0ZSh0b2tlbik7XG4gICAgICAgICAgICB0aGlzLmRlbGVnYXRlLmVsZW1lbnRVbm1hdGNoZWRWYWx1ZShlbGVtZW50LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmV0Y2hQYXJzZVJlc3VsdEZvclRva2VuKHRva2VuKSB7XG4gICAgICAgIGxldCBwYXJzZVJlc3VsdCA9IHRoaXMucGFyc2VSZXN1bHRzQnlUb2tlbi5nZXQodG9rZW4pO1xuICAgICAgICBpZiAoIXBhcnNlUmVzdWx0KSB7XG4gICAgICAgICAgICBwYXJzZVJlc3VsdCA9IHRoaXMucGFyc2VUb2tlbih0b2tlbik7XG4gICAgICAgICAgICB0aGlzLnBhcnNlUmVzdWx0c0J5VG9rZW4uc2V0KHRva2VuLCBwYXJzZVJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcnNlUmVzdWx0O1xuICAgIH1cbiAgICBmZXRjaFZhbHVlc0J5VG9rZW5Gb3JFbGVtZW50KGVsZW1lbnQpIHtcbiAgICAgICAgbGV0IHZhbHVlc0J5VG9rZW4gPSB0aGlzLnZhbHVlc0J5VG9rZW5CeUVsZW1lbnQuZ2V0KGVsZW1lbnQpO1xuICAgICAgICBpZiAoIXZhbHVlc0J5VG9rZW4pIHtcbiAgICAgICAgICAgIHZhbHVlc0J5VG9rZW4gPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICB0aGlzLnZhbHVlc0J5VG9rZW5CeUVsZW1lbnQuc2V0KGVsZW1lbnQsIHZhbHVlc0J5VG9rZW4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZXNCeVRva2VuO1xuICAgIH1cbiAgICBwYXJzZVRva2VuKHRva2VuKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZGVsZWdhdGUucGFyc2VWYWx1ZUZvclRva2VuKHRva2VuKTtcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlIH07XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4geyBlcnJvciB9O1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jbGFzcyBCaW5kaW5nT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQsIGRlbGVnYXRlKSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICAgICAgdGhpcy5iaW5kaW5nc0J5QWN0aW9uID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnZhbHVlTGlzdE9ic2VydmVyKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlTGlzdE9ic2VydmVyID0gbmV3IFZhbHVlTGlzdE9ic2VydmVyKHRoaXMuZWxlbWVudCwgdGhpcy5hY3Rpb25BdHRyaWJ1dGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy52YWx1ZUxpc3RPYnNlcnZlci5zdGFydCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlTGlzdE9ic2VydmVyKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlTGlzdE9ic2VydmVyLnN0b3AoKTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnZhbHVlTGlzdE9ic2VydmVyO1xuICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0QWxsQWN0aW9ucygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0LmVsZW1lbnQ7XG4gICAgfVxuICAgIGdldCBpZGVudGlmaWVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0LmlkZW50aWZpZXI7XG4gICAgfVxuICAgIGdldCBhY3Rpb25BdHRyaWJ1dGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjaGVtYS5hY3Rpb25BdHRyaWJ1dGU7XG4gICAgfVxuICAgIGdldCBzY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQuc2NoZW1hO1xuICAgIH1cbiAgICBnZXQgYmluZGluZ3MoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuYmluZGluZ3NCeUFjdGlvbi52YWx1ZXMoKSk7XG4gICAgfVxuICAgIGNvbm5lY3RBY3Rpb24oYWN0aW9uKSB7XG4gICAgICAgIGNvbnN0IGJpbmRpbmcgPSBuZXcgQmluZGluZyh0aGlzLmNvbnRleHQsIGFjdGlvbik7XG4gICAgICAgIHRoaXMuYmluZGluZ3NCeUFjdGlvbi5zZXQoYWN0aW9uLCBiaW5kaW5nKTtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZS5iaW5kaW5nQ29ubmVjdGVkKGJpbmRpbmcpO1xuICAgIH1cbiAgICBkaXNjb25uZWN0QWN0aW9uKGFjdGlvbikge1xuICAgICAgICBjb25zdCBiaW5kaW5nID0gdGhpcy5iaW5kaW5nc0J5QWN0aW9uLmdldChhY3Rpb24pO1xuICAgICAgICBpZiAoYmluZGluZykge1xuICAgICAgICAgICAgdGhpcy5iaW5kaW5nc0J5QWN0aW9uLmRlbGV0ZShhY3Rpb24pO1xuICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5iaW5kaW5nRGlzY29ubmVjdGVkKGJpbmRpbmcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRpc2Nvbm5lY3RBbGxBY3Rpb25zKCkge1xuICAgICAgICB0aGlzLmJpbmRpbmdzLmZvckVhY2goKGJpbmRpbmcpID0+IHRoaXMuZGVsZWdhdGUuYmluZGluZ0Rpc2Nvbm5lY3RlZChiaW5kaW5nLCB0cnVlKSk7XG4gICAgICAgIHRoaXMuYmluZGluZ3NCeUFjdGlvbi5jbGVhcigpO1xuICAgIH1cbiAgICBwYXJzZVZhbHVlRm9yVG9rZW4odG9rZW4pIHtcbiAgICAgICAgY29uc3QgYWN0aW9uID0gQWN0aW9uLmZvclRva2VuKHRva2VuLCB0aGlzLnNjaGVtYSk7XG4gICAgICAgIGlmIChhY3Rpb24uaWRlbnRpZmllciA9PSB0aGlzLmlkZW50aWZpZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBhY3Rpb247XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxlbWVudE1hdGNoZWRWYWx1ZShlbGVtZW50LCBhY3Rpb24pIHtcbiAgICAgICAgdGhpcy5jb25uZWN0QWN0aW9uKGFjdGlvbik7XG4gICAgfVxuICAgIGVsZW1lbnRVbm1hdGNoZWRWYWx1ZShlbGVtZW50LCBhY3Rpb24pIHtcbiAgICAgICAgdGhpcy5kaXNjb25uZWN0QWN0aW9uKGFjdGlvbik7XG4gICAgfVxufVxuXG5jbGFzcyBWYWx1ZU9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0LCByZWNlaXZlcikge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLnJlY2VpdmVyID0gcmVjZWl2ZXI7XG4gICAgICAgIHRoaXMuc3RyaW5nTWFwT2JzZXJ2ZXIgPSBuZXcgU3RyaW5nTWFwT2JzZXJ2ZXIodGhpcy5lbGVtZW50LCB0aGlzKTtcbiAgICAgICAgdGhpcy52YWx1ZURlc2NyaXB0b3JNYXAgPSB0aGlzLmNvbnRyb2xsZXIudmFsdWVEZXNjcmlwdG9yTWFwO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5zdHJpbmdNYXBPYnNlcnZlci5zdGFydCgpO1xuICAgICAgICB0aGlzLmludm9rZUNoYW5nZWRDYWxsYmFja3NGb3JEZWZhdWx0VmFsdWVzKCk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMuc3RyaW5nTWFwT2JzZXJ2ZXIuc3RvcCgpO1xuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5lbGVtZW50O1xuICAgIH1cbiAgICBnZXQgY29udHJvbGxlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5jb250cm9sbGVyO1xuICAgIH1cbiAgICBnZXRTdHJpbmdNYXBLZXlGb3JBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSkge1xuICAgICAgICBpZiAoYXR0cmlidXRlTmFtZSBpbiB0aGlzLnZhbHVlRGVzY3JpcHRvck1hcCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVEZXNjcmlwdG9yTWFwW2F0dHJpYnV0ZU5hbWVdLm5hbWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RyaW5nTWFwS2V5QWRkZWQoa2V5LCBhdHRyaWJ1dGVOYW1lKSB7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSB0aGlzLnZhbHVlRGVzY3JpcHRvck1hcFthdHRyaWJ1dGVOYW1lXTtcbiAgICAgICAgaWYgKCF0aGlzLmhhc1ZhbHVlKGtleSkpIHtcbiAgICAgICAgICAgIHRoaXMuaW52b2tlQ2hhbmdlZENhbGxiYWNrKGtleSwgZGVzY3JpcHRvci53cml0ZXIodGhpcy5yZWNlaXZlcltrZXldKSwgZGVzY3JpcHRvci53cml0ZXIoZGVzY3JpcHRvci5kZWZhdWx0VmFsdWUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdHJpbmdNYXBWYWx1ZUNoYW5nZWQodmFsdWUsIG5hbWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSB0aGlzLnZhbHVlRGVzY3JpcHRvck5hbWVNYXBbbmFtZV07XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKG9sZFZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICBvbGRWYWx1ZSA9IGRlc2NyaXB0b3Iud3JpdGVyKGRlc2NyaXB0b3IuZGVmYXVsdFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmludm9rZUNoYW5nZWRDYWxsYmFjayhuYW1lLCB2YWx1ZSwgb2xkVmFsdWUpO1xuICAgIH1cbiAgICBzdHJpbmdNYXBLZXlSZW1vdmVkKGtleSwgYXR0cmlidXRlTmFtZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRvciA9IHRoaXMudmFsdWVEZXNjcmlwdG9yTmFtZU1hcFtrZXldO1xuICAgICAgICBpZiAodGhpcy5oYXNWYWx1ZShrZXkpKSB7XG4gICAgICAgICAgICB0aGlzLmludm9rZUNoYW5nZWRDYWxsYmFjayhrZXksIGRlc2NyaXB0b3Iud3JpdGVyKHRoaXMucmVjZWl2ZXJba2V5XSksIG9sZFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaW52b2tlQ2hhbmdlZENhbGxiYWNrKGtleSwgZGVzY3JpcHRvci53cml0ZXIoZGVzY3JpcHRvci5kZWZhdWx0VmFsdWUpLCBvbGRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW52b2tlQ2hhbmdlZENhbGxiYWNrc0ZvckRlZmF1bHRWYWx1ZXMoKSB7XG4gICAgICAgIGZvciAoY29uc3QgeyBrZXksIG5hbWUsIGRlZmF1bHRWYWx1ZSwgd3JpdGVyIH0gb2YgdGhpcy52YWx1ZURlc2NyaXB0b3JzKSB7XG4gICAgICAgICAgICBpZiAoZGVmYXVsdFZhbHVlICE9IHVuZGVmaW5lZCAmJiAhdGhpcy5jb250cm9sbGVyLmRhdGEuaGFzKGtleSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmludm9rZUNoYW5nZWRDYWxsYmFjayhuYW1lLCB3cml0ZXIoZGVmYXVsdFZhbHVlKSwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpbnZva2VDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgcmF3VmFsdWUsIHJhd09sZFZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGNoYW5nZWRNZXRob2ROYW1lID0gYCR7bmFtZX1DaGFuZ2VkYDtcbiAgICAgICAgY29uc3QgY2hhbmdlZE1ldGhvZCA9IHRoaXMucmVjZWl2ZXJbY2hhbmdlZE1ldGhvZE5hbWVdO1xuICAgICAgICBpZiAodHlwZW9mIGNoYW5nZWRNZXRob2QgPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwdG9yID0gdGhpcy52YWx1ZURlc2NyaXB0b3JOYW1lTWFwW25hbWVdO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGRlc2NyaXB0b3IucmVhZGVyKHJhd1ZhbHVlKTtcbiAgICAgICAgICAgICAgICBsZXQgb2xkVmFsdWUgPSByYXdPbGRWYWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAocmF3T2xkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWUgPSBkZXNjcmlwdG9yLnJlYWRlcihyYXdPbGRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNoYW5nZWRNZXRob2QuY2FsbCh0aGlzLnJlY2VpdmVyLCB2YWx1ZSwgb2xkVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgVHlwZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLm1lc3NhZ2UgPSBgU3RpbXVsdXMgVmFsdWUgXCIke3RoaXMuY29udGV4dC5pZGVudGlmaWVyfS4ke2Rlc2NyaXB0b3IubmFtZX1cIiAtICR7ZXJyb3IubWVzc2FnZX1gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgdmFsdWVEZXNjcmlwdG9ycygpIHtcbiAgICAgICAgY29uc3QgeyB2YWx1ZURlc2NyaXB0b3JNYXAgfSA9IHRoaXM7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh2YWx1ZURlc2NyaXB0b3JNYXApLm1hcCgoa2V5KSA9PiB2YWx1ZURlc2NyaXB0b3JNYXBba2V5XSk7XG4gICAgfVxuICAgIGdldCB2YWx1ZURlc2NyaXB0b3JOYW1lTWFwKCkge1xuICAgICAgICBjb25zdCBkZXNjcmlwdG9ycyA9IHt9O1xuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnZhbHVlRGVzY3JpcHRvck1hcCkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwdG9yID0gdGhpcy52YWx1ZURlc2NyaXB0b3JNYXBba2V5XTtcbiAgICAgICAgICAgIGRlc2NyaXB0b3JzW2Rlc2NyaXB0b3IubmFtZV0gPSBkZXNjcmlwdG9yO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRlc2NyaXB0b3JzO1xuICAgIH1cbiAgICBoYXNWYWx1ZShhdHRyaWJ1dGVOYW1lKSB7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSB0aGlzLnZhbHVlRGVzY3JpcHRvck5hbWVNYXBbYXR0cmlidXRlTmFtZV07XG4gICAgICAgIGNvbnN0IGhhc01ldGhvZE5hbWUgPSBgaGFzJHtjYXBpdGFsaXplKGRlc2NyaXB0b3IubmFtZSl9YDtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVjZWl2ZXJbaGFzTWV0aG9kTmFtZV07XG4gICAgfVxufVxuXG5jbGFzcyBUYXJnZXRPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IoY29udGV4dCwgZGVsZWdhdGUpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgICAgICB0aGlzLnRhcmdldHNCeU5hbWUgPSBuZXcgTXVsdGltYXAoKTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGlmICghdGhpcy50b2tlbkxpc3RPYnNlcnZlcikge1xuICAgICAgICAgICAgdGhpcy50b2tlbkxpc3RPYnNlcnZlciA9IG5ldyBUb2tlbkxpc3RPYnNlcnZlcih0aGlzLmVsZW1lbnQsIHRoaXMuYXR0cmlidXRlTmFtZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnRva2VuTGlzdE9ic2VydmVyLnN0YXJ0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgaWYgKHRoaXMudG9rZW5MaXN0T2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzY29ubmVjdEFsbFRhcmdldHMoKTtcbiAgICAgICAgICAgIHRoaXMudG9rZW5MaXN0T2JzZXJ2ZXIuc3RvcCgpO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMudG9rZW5MaXN0T2JzZXJ2ZXI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9rZW5NYXRjaGVkKHsgZWxlbWVudCwgY29udGVudDogbmFtZSB9KSB7XG4gICAgICAgIGlmICh0aGlzLnNjb3BlLmNvbnRhaW5zRWxlbWVudChlbGVtZW50KSkge1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0VGFyZ2V0KGVsZW1lbnQsIG5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRva2VuVW5tYXRjaGVkKHsgZWxlbWVudCwgY29udGVudDogbmFtZSB9KSB7XG4gICAgICAgIHRoaXMuZGlzY29ubmVjdFRhcmdldChlbGVtZW50LCBuYW1lKTtcbiAgICB9XG4gICAgY29ubmVjdFRhcmdldChlbGVtZW50LCBuYW1lKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKCF0aGlzLnRhcmdldHNCeU5hbWUuaGFzKG5hbWUsIGVsZW1lbnQpKSB7XG4gICAgICAgICAgICB0aGlzLnRhcmdldHNCeU5hbWUuYWRkKG5hbWUsIGVsZW1lbnQpO1xuICAgICAgICAgICAgKF9hID0gdGhpcy50b2tlbkxpc3RPYnNlcnZlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnBhdXNlKCgpID0+IHRoaXMuZGVsZWdhdGUudGFyZ2V0Q29ubmVjdGVkKGVsZW1lbnQsIG5hbWUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkaXNjb25uZWN0VGFyZ2V0KGVsZW1lbnQsIG5hbWUpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAodGhpcy50YXJnZXRzQnlOYW1lLmhhcyhuYW1lLCBlbGVtZW50KSkge1xuICAgICAgICAgICAgdGhpcy50YXJnZXRzQnlOYW1lLmRlbGV0ZShuYW1lLCBlbGVtZW50KTtcbiAgICAgICAgICAgIChfYSA9IHRoaXMudG9rZW5MaXN0T2JzZXJ2ZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wYXVzZSgoKSA9PiB0aGlzLmRlbGVnYXRlLnRhcmdldERpc2Nvbm5lY3RlZChlbGVtZW50LCBuYW1lKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGlzY29ubmVjdEFsbFRhcmdldHMoKSB7XG4gICAgICAgIGZvciAoY29uc3QgbmFtZSBvZiB0aGlzLnRhcmdldHNCeU5hbWUua2V5cykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMudGFyZ2V0c0J5TmFtZS5nZXRWYWx1ZXNGb3JLZXkobmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3RUYXJnZXQoZWxlbWVudCwgbmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGF0dHJpYnV0ZU5hbWUoKSB7XG4gICAgICAgIHJldHVybiBgZGF0YS0ke3RoaXMuY29udGV4dC5pZGVudGlmaWVyfS10YXJnZXRgO1xuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5lbGVtZW50O1xuICAgIH1cbiAgICBnZXQgc2NvcGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQuc2NvcGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiByZWFkSW5oZXJpdGFibGVTdGF0aWNBcnJheVZhbHVlcyhjb25zdHJ1Y3RvciwgcHJvcGVydHlOYW1lKSB7XG4gICAgY29uc3QgYW5jZXN0b3JzID0gZ2V0QW5jZXN0b3JzRm9yQ29uc3RydWN0b3IoY29uc3RydWN0b3IpO1xuICAgIHJldHVybiBBcnJheS5mcm9tKGFuY2VzdG9ycy5yZWR1Y2UoKHZhbHVlcywgY29uc3RydWN0b3IpID0+IHtcbiAgICAgICAgZ2V0T3duU3RhdGljQXJyYXlWYWx1ZXMoY29uc3RydWN0b3IsIHByb3BlcnR5TmFtZSkuZm9yRWFjaCgobmFtZSkgPT4gdmFsdWVzLmFkZChuYW1lKSk7XG4gICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgfSwgbmV3IFNldCgpKSk7XG59XG5mdW5jdGlvbiByZWFkSW5oZXJpdGFibGVTdGF0aWNPYmplY3RQYWlycyhjb25zdHJ1Y3RvciwgcHJvcGVydHlOYW1lKSB7XG4gICAgY29uc3QgYW5jZXN0b3JzID0gZ2V0QW5jZXN0b3JzRm9yQ29uc3RydWN0b3IoY29uc3RydWN0b3IpO1xuICAgIHJldHVybiBhbmNlc3RvcnMucmVkdWNlKChwYWlycywgY29uc3RydWN0b3IpID0+IHtcbiAgICAgICAgcGFpcnMucHVzaCguLi5nZXRPd25TdGF0aWNPYmplY3RQYWlycyhjb25zdHJ1Y3RvciwgcHJvcGVydHlOYW1lKSk7XG4gICAgICAgIHJldHVybiBwYWlycztcbiAgICB9LCBbXSk7XG59XG5mdW5jdGlvbiBnZXRBbmNlc3RvcnNGb3JDb25zdHJ1Y3Rvcihjb25zdHJ1Y3Rvcikge1xuICAgIGNvbnN0IGFuY2VzdG9ycyA9IFtdO1xuICAgIHdoaWxlIChjb25zdHJ1Y3Rvcikge1xuICAgICAgICBhbmNlc3RvcnMucHVzaChjb25zdHJ1Y3Rvcik7XG4gICAgICAgIGNvbnN0cnVjdG9yID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGNvbnN0cnVjdG9yKTtcbiAgICB9XG4gICAgcmV0dXJuIGFuY2VzdG9ycy5yZXZlcnNlKCk7XG59XG5mdW5jdGlvbiBnZXRPd25TdGF0aWNBcnJheVZhbHVlcyhjb25zdHJ1Y3RvciwgcHJvcGVydHlOYW1lKSB7XG4gICAgY29uc3QgZGVmaW5pdGlvbiA9IGNvbnN0cnVjdG9yW3Byb3BlcnR5TmFtZV07XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZGVmaW5pdGlvbikgPyBkZWZpbml0aW9uIDogW107XG59XG5mdW5jdGlvbiBnZXRPd25TdGF0aWNPYmplY3RQYWlycyhjb25zdHJ1Y3RvciwgcHJvcGVydHlOYW1lKSB7XG4gICAgY29uc3QgZGVmaW5pdGlvbiA9IGNvbnN0cnVjdG9yW3Byb3BlcnR5TmFtZV07XG4gICAgcmV0dXJuIGRlZmluaXRpb24gPyBPYmplY3Qua2V5cyhkZWZpbml0aW9uKS5tYXAoKGtleSkgPT4gW2tleSwgZGVmaW5pdGlvbltrZXldXSkgOiBbXTtcbn1cblxuY2xhc3MgT3V0bGV0T2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQsIGRlbGVnYXRlKSB7XG4gICAgICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gICAgICAgIHRoaXMub3V0bGV0c0J5TmFtZSA9IG5ldyBNdWx0aW1hcCgpO1xuICAgICAgICB0aGlzLm91dGxldEVsZW1lbnRzQnlOYW1lID0gbmV3IE11bHRpbWFwKCk7XG4gICAgICAgIHRoaXMuc2VsZWN0b3JPYnNlcnZlck1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVPYnNlcnZlck1hcCA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICB0aGlzLm91dGxldERlZmluaXRpb25zLmZvckVhY2goKG91dGxldE5hbWUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldHVwU2VsZWN0b3JPYnNlcnZlckZvck91dGxldChvdXRsZXROYW1lKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldHVwQXR0cmlidXRlT2JzZXJ2ZXJGb3JPdXRsZXQob3V0bGV0TmFtZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmRlcGVuZGVudENvbnRleHRzLmZvckVhY2goKGNvbnRleHQpID0+IGNvbnRleHQucmVmcmVzaCgpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWZyZXNoKCkge1xuICAgICAgICB0aGlzLnNlbGVjdG9yT2JzZXJ2ZXJNYXAuZm9yRWFjaCgob2JzZXJ2ZXIpID0+IG9ic2VydmVyLnJlZnJlc2goKSk7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlT2JzZXJ2ZXJNYXAuZm9yRWFjaCgob2JzZXJ2ZXIpID0+IG9ic2VydmVyLnJlZnJlc2goKSk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0QWxsT3V0bGV0cygpO1xuICAgICAgICAgICAgdGhpcy5zdG9wU2VsZWN0b3JPYnNlcnZlcnMoKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcEF0dHJpYnV0ZU9ic2VydmVycygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0b3BTZWxlY3Rvck9ic2VydmVycygpIHtcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0b3JPYnNlcnZlck1hcC5zaXplID4gMCkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rvck9ic2VydmVyTWFwLmZvckVhY2goKG9ic2VydmVyKSA9PiBvYnNlcnZlci5zdG9wKCkpO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rvck9ic2VydmVyTWFwLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RvcEF0dHJpYnV0ZU9ic2VydmVycygpIHtcbiAgICAgICAgaWYgKHRoaXMuYXR0cmlidXRlT2JzZXJ2ZXJNYXAuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlT2JzZXJ2ZXJNYXAuZm9yRWFjaCgob2JzZXJ2ZXIpID0+IG9ic2VydmVyLnN0b3AoKSk7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZU9ic2VydmVyTWFwLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VsZWN0b3JNYXRjaGVkKGVsZW1lbnQsIF9zZWxlY3RvciwgeyBvdXRsZXROYW1lIH0pIHtcbiAgICAgICAgY29uc3Qgb3V0bGV0ID0gdGhpcy5nZXRPdXRsZXQoZWxlbWVudCwgb3V0bGV0TmFtZSk7XG4gICAgICAgIGlmIChvdXRsZXQpIHtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdE91dGxldChvdXRsZXQsIGVsZW1lbnQsIG91dGxldE5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbGVjdG9yVW5tYXRjaGVkKGVsZW1lbnQsIF9zZWxlY3RvciwgeyBvdXRsZXROYW1lIH0pIHtcbiAgICAgICAgY29uc3Qgb3V0bGV0ID0gdGhpcy5nZXRPdXRsZXRGcm9tTWFwKGVsZW1lbnQsIG91dGxldE5hbWUpO1xuICAgICAgICBpZiAob3V0bGV0KSB7XG4gICAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3RPdXRsZXQob3V0bGV0LCBlbGVtZW50LCBvdXRsZXROYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZWxlY3Rvck1hdGNoRWxlbWVudChlbGVtZW50LCB7IG91dGxldE5hbWUgfSkge1xuICAgICAgICBjb25zdCBzZWxlY3RvciA9IHRoaXMuc2VsZWN0b3Iob3V0bGV0TmFtZSk7XG4gICAgICAgIGNvbnN0IGhhc091dGxldCA9IHRoaXMuaGFzT3V0bGV0KGVsZW1lbnQsIG91dGxldE5hbWUpO1xuICAgICAgICBjb25zdCBoYXNPdXRsZXRDb250cm9sbGVyID0gZWxlbWVudC5tYXRjaGVzKGBbJHt0aGlzLnNjaGVtYS5jb250cm9sbGVyQXR0cmlidXRlfX49JHtvdXRsZXROYW1lfV1gKTtcbiAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICByZXR1cm4gaGFzT3V0bGV0ICYmIGhhc091dGxldENvbnRyb2xsZXIgJiYgZWxlbWVudC5tYXRjaGVzKHNlbGVjdG9yKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbGVtZW50TWF0Y2hlZEF0dHJpYnV0ZShfZWxlbWVudCwgYXR0cmlidXRlTmFtZSkge1xuICAgICAgICBjb25zdCBvdXRsZXROYW1lID0gdGhpcy5nZXRPdXRsZXROYW1lRnJvbU91dGxldEF0dHJpYnV0ZU5hbWUoYXR0cmlidXRlTmFtZSk7XG4gICAgICAgIGlmIChvdXRsZXROYW1lKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNlbGVjdG9yT2JzZXJ2ZXJGb3JPdXRsZXQob3V0bGV0TmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxlbWVudEF0dHJpYnV0ZVZhbHVlQ2hhbmdlZChfZWxlbWVudCwgYXR0cmlidXRlTmFtZSkge1xuICAgICAgICBjb25zdCBvdXRsZXROYW1lID0gdGhpcy5nZXRPdXRsZXROYW1lRnJvbU91dGxldEF0dHJpYnV0ZU5hbWUoYXR0cmlidXRlTmFtZSk7XG4gICAgICAgIGlmIChvdXRsZXROYW1lKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNlbGVjdG9yT2JzZXJ2ZXJGb3JPdXRsZXQob3V0bGV0TmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxlbWVudFVubWF0Y2hlZEF0dHJpYnV0ZShfZWxlbWVudCwgYXR0cmlidXRlTmFtZSkge1xuICAgICAgICBjb25zdCBvdXRsZXROYW1lID0gdGhpcy5nZXRPdXRsZXROYW1lRnJvbU91dGxldEF0dHJpYnV0ZU5hbWUoYXR0cmlidXRlTmFtZSk7XG4gICAgICAgIGlmIChvdXRsZXROYW1lKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNlbGVjdG9yT2JzZXJ2ZXJGb3JPdXRsZXQob3V0bGV0TmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29ubmVjdE91dGxldChvdXRsZXQsIGVsZW1lbnQsIG91dGxldE5hbWUpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAoIXRoaXMub3V0bGV0RWxlbWVudHNCeU5hbWUuaGFzKG91dGxldE5hbWUsIGVsZW1lbnQpKSB7XG4gICAgICAgICAgICB0aGlzLm91dGxldHNCeU5hbWUuYWRkKG91dGxldE5hbWUsIG91dGxldCk7XG4gICAgICAgICAgICB0aGlzLm91dGxldEVsZW1lbnRzQnlOYW1lLmFkZChvdXRsZXROYW1lLCBlbGVtZW50KTtcbiAgICAgICAgICAgIChfYSA9IHRoaXMuc2VsZWN0b3JPYnNlcnZlck1hcC5nZXQob3V0bGV0TmFtZSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wYXVzZSgoKSA9PiB0aGlzLmRlbGVnYXRlLm91dGxldENvbm5lY3RlZChvdXRsZXQsIGVsZW1lbnQsIG91dGxldE5hbWUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkaXNjb25uZWN0T3V0bGV0KG91dGxldCwgZWxlbWVudCwgb3V0bGV0TmFtZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICh0aGlzLm91dGxldEVsZW1lbnRzQnlOYW1lLmhhcyhvdXRsZXROYW1lLCBlbGVtZW50KSkge1xuICAgICAgICAgICAgdGhpcy5vdXRsZXRzQnlOYW1lLmRlbGV0ZShvdXRsZXROYW1lLCBvdXRsZXQpO1xuICAgICAgICAgICAgdGhpcy5vdXRsZXRFbGVtZW50c0J5TmFtZS5kZWxldGUob3V0bGV0TmFtZSwgZWxlbWVudCk7XG4gICAgICAgICAgICAoX2EgPSB0aGlzLnNlbGVjdG9yT2JzZXJ2ZXJNYXBcbiAgICAgICAgICAgICAgICAuZ2V0KG91dGxldE5hbWUpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucGF1c2UoKCkgPT4gdGhpcy5kZWxlZ2F0ZS5vdXRsZXREaXNjb25uZWN0ZWQob3V0bGV0LCBlbGVtZW50LCBvdXRsZXROYW1lKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGlzY29ubmVjdEFsbE91dGxldHMoKSB7XG4gICAgICAgIGZvciAoY29uc3Qgb3V0bGV0TmFtZSBvZiB0aGlzLm91dGxldEVsZW1lbnRzQnlOYW1lLmtleXMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLm91dGxldEVsZW1lbnRzQnlOYW1lLmdldFZhbHVlc0ZvcktleShvdXRsZXROYW1lKSkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgb3V0bGV0IG9mIHRoaXMub3V0bGV0c0J5TmFtZS5nZXRWYWx1ZXNGb3JLZXkob3V0bGV0TmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0T3V0bGV0KG91dGxldCwgZWxlbWVudCwgb3V0bGV0TmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZVNlbGVjdG9yT2JzZXJ2ZXJGb3JPdXRsZXQob3V0bGV0TmFtZSkge1xuICAgICAgICBjb25zdCBvYnNlcnZlciA9IHRoaXMuc2VsZWN0b3JPYnNlcnZlck1hcC5nZXQob3V0bGV0TmFtZSk7XG4gICAgICAgIGlmIChvYnNlcnZlcikge1xuICAgICAgICAgICAgb2JzZXJ2ZXIuc2VsZWN0b3IgPSB0aGlzLnNlbGVjdG9yKG91dGxldE5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldHVwU2VsZWN0b3JPYnNlcnZlckZvck91dGxldChvdXRsZXROYW1lKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdG9yID0gdGhpcy5zZWxlY3RvcihvdXRsZXROYW1lKTtcbiAgICAgICAgY29uc3Qgc2VsZWN0b3JPYnNlcnZlciA9IG5ldyBTZWxlY3Rvck9ic2VydmVyKGRvY3VtZW50LmJvZHksIHNlbGVjdG9yLCB0aGlzLCB7IG91dGxldE5hbWUgfSk7XG4gICAgICAgIHRoaXMuc2VsZWN0b3JPYnNlcnZlck1hcC5zZXQob3V0bGV0TmFtZSwgc2VsZWN0b3JPYnNlcnZlcik7XG4gICAgICAgIHNlbGVjdG9yT2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICB9XG4gICAgc2V0dXBBdHRyaWJ1dGVPYnNlcnZlckZvck91dGxldChvdXRsZXROYW1lKSB7XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZU5hbWUgPSB0aGlzLmF0dHJpYnV0ZU5hbWVGb3JPdXRsZXROYW1lKG91dGxldE5hbWUpO1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGVPYnNlcnZlciA9IG5ldyBBdHRyaWJ1dGVPYnNlcnZlcih0aGlzLnNjb3BlLmVsZW1lbnQsIGF0dHJpYnV0ZU5hbWUsIHRoaXMpO1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZU9ic2VydmVyTWFwLnNldChvdXRsZXROYW1lLCBhdHRyaWJ1dGVPYnNlcnZlcik7XG4gICAgICAgIGF0dHJpYnV0ZU9ic2VydmVyLnN0YXJ0KCk7XG4gICAgfVxuICAgIHNlbGVjdG9yKG91dGxldE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGUub3V0bGV0cy5nZXRTZWxlY3RvckZvck91dGxldE5hbWUob3V0bGV0TmFtZSk7XG4gICAgfVxuICAgIGF0dHJpYnV0ZU5hbWVGb3JPdXRsZXROYW1lKG91dGxldE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGUuc2NoZW1hLm91dGxldEF0dHJpYnV0ZUZvclNjb3BlKHRoaXMuaWRlbnRpZmllciwgb3V0bGV0TmFtZSk7XG4gICAgfVxuICAgIGdldE91dGxldE5hbWVGcm9tT3V0bGV0QXR0cmlidXRlTmFtZShhdHRyaWJ1dGVOYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm91dGxldERlZmluaXRpb25zLmZpbmQoKG91dGxldE5hbWUpID0+IHRoaXMuYXR0cmlidXRlTmFtZUZvck91dGxldE5hbWUob3V0bGV0TmFtZSkgPT09IGF0dHJpYnV0ZU5hbWUpO1xuICAgIH1cbiAgICBnZXQgb3V0bGV0RGVwZW5kZW5jaWVzKCkge1xuICAgICAgICBjb25zdCBkZXBlbmRlbmNpZXMgPSBuZXcgTXVsdGltYXAoKTtcbiAgICAgICAgdGhpcy5yb3V0ZXIubW9kdWxlcy5mb3JFYWNoKChtb2R1bGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnN0cnVjdG9yID0gbW9kdWxlLmRlZmluaXRpb24uY29udHJvbGxlckNvbnN0cnVjdG9yO1xuICAgICAgICAgICAgY29uc3Qgb3V0bGV0cyA9IHJlYWRJbmhlcml0YWJsZVN0YXRpY0FycmF5VmFsdWVzKGNvbnN0cnVjdG9yLCBcIm91dGxldHNcIik7XG4gICAgICAgICAgICBvdXRsZXRzLmZvckVhY2goKG91dGxldCkgPT4gZGVwZW5kZW5jaWVzLmFkZChvdXRsZXQsIG1vZHVsZS5pZGVudGlmaWVyKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGVwZW5kZW5jaWVzO1xuICAgIH1cbiAgICBnZXQgb3V0bGV0RGVmaW5pdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm91dGxldERlcGVuZGVuY2llcy5nZXRLZXlzRm9yVmFsdWUodGhpcy5pZGVudGlmaWVyKTtcbiAgICB9XG4gICAgZ2V0IGRlcGVuZGVudENvbnRyb2xsZXJJZGVudGlmaWVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3V0bGV0RGVwZW5kZW5jaWVzLmdldFZhbHVlc0ZvcktleSh0aGlzLmlkZW50aWZpZXIpO1xuICAgIH1cbiAgICBnZXQgZGVwZW5kZW50Q29udGV4dHMoKSB7XG4gICAgICAgIGNvbnN0IGlkZW50aWZpZXJzID0gdGhpcy5kZXBlbmRlbnRDb250cm9sbGVySWRlbnRpZmllcnM7XG4gICAgICAgIHJldHVybiB0aGlzLnJvdXRlci5jb250ZXh0cy5maWx0ZXIoKGNvbnRleHQpID0+IGlkZW50aWZpZXJzLmluY2x1ZGVzKGNvbnRleHQuaWRlbnRpZmllcikpO1xuICAgIH1cbiAgICBoYXNPdXRsZXQoZWxlbWVudCwgb3V0bGV0TmFtZSkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmdldE91dGxldChlbGVtZW50LCBvdXRsZXROYW1lKSB8fCAhIXRoaXMuZ2V0T3V0bGV0RnJvbU1hcChlbGVtZW50LCBvdXRsZXROYW1lKTtcbiAgICB9XG4gICAgZ2V0T3V0bGV0KGVsZW1lbnQsIG91dGxldE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbGljYXRpb24uZ2V0Q29udHJvbGxlckZvckVsZW1lbnRBbmRJZGVudGlmaWVyKGVsZW1lbnQsIG91dGxldE5hbWUpO1xuICAgIH1cbiAgICBnZXRPdXRsZXRGcm9tTWFwKGVsZW1lbnQsIG91dGxldE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3V0bGV0c0J5TmFtZS5nZXRWYWx1ZXNGb3JLZXkob3V0bGV0TmFtZSkuZmluZCgob3V0bGV0KSA9PiBvdXRsZXQuZWxlbWVudCA9PT0gZWxlbWVudCk7XG4gICAgfVxuICAgIGdldCBzY29wZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5zY29wZTtcbiAgICB9XG4gICAgZ2V0IHNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5zY2hlbWE7XG4gICAgfVxuICAgIGdldCBpZGVudGlmaWVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0LmlkZW50aWZpZXI7XG4gICAgfVxuICAgIGdldCBhcHBsaWNhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5hcHBsaWNhdGlvbjtcbiAgICB9XG4gICAgZ2V0IHJvdXRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbGljYXRpb24ucm91dGVyO1xuICAgIH1cbn1cblxuY2xhc3MgQ29udGV4dCB7XG4gICAgY29uc3RydWN0b3IobW9kdWxlLCBzY29wZSkge1xuICAgICAgICB0aGlzLmxvZ0RlYnVnQWN0aXZpdHkgPSAoZnVuY3Rpb25OYW1lLCBkZXRhaWwgPSB7fSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBpZGVudGlmaWVyLCBjb250cm9sbGVyLCBlbGVtZW50IH0gPSB0aGlzO1xuICAgICAgICAgICAgZGV0YWlsID0gT2JqZWN0LmFzc2lnbih7IGlkZW50aWZpZXIsIGNvbnRyb2xsZXIsIGVsZW1lbnQgfSwgZGV0YWlsKTtcbiAgICAgICAgICAgIHRoaXMuYXBwbGljYXRpb24ubG9nRGVidWdBY3Rpdml0eSh0aGlzLmlkZW50aWZpZXIsIGZ1bmN0aW9uTmFtZSwgZGV0YWlsKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5tb2R1bGUgPSBtb2R1bGU7XG4gICAgICAgIHRoaXMuc2NvcGUgPSBzY29wZTtcbiAgICAgICAgdGhpcy5jb250cm9sbGVyID0gbmV3IG1vZHVsZS5jb250cm9sbGVyQ29uc3RydWN0b3IodGhpcyk7XG4gICAgICAgIHRoaXMuYmluZGluZ09ic2VydmVyID0gbmV3IEJpbmRpbmdPYnNlcnZlcih0aGlzLCB0aGlzLmRpc3BhdGNoZXIpO1xuICAgICAgICB0aGlzLnZhbHVlT2JzZXJ2ZXIgPSBuZXcgVmFsdWVPYnNlcnZlcih0aGlzLCB0aGlzLmNvbnRyb2xsZXIpO1xuICAgICAgICB0aGlzLnRhcmdldE9ic2VydmVyID0gbmV3IFRhcmdldE9ic2VydmVyKHRoaXMsIHRoaXMpO1xuICAgICAgICB0aGlzLm91dGxldE9ic2VydmVyID0gbmV3IE91dGxldE9ic2VydmVyKHRoaXMsIHRoaXMpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgIHRoaXMubG9nRGVidWdBY3Rpdml0eShcImluaXRpYWxpemVcIik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBcImluaXRpYWxpemluZyBjb250cm9sbGVyXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbm5lY3QoKSB7XG4gICAgICAgIHRoaXMuYmluZGluZ09ic2VydmVyLnN0YXJ0KCk7XG4gICAgICAgIHRoaXMudmFsdWVPYnNlcnZlci5zdGFydCgpO1xuICAgICAgICB0aGlzLnRhcmdldE9ic2VydmVyLnN0YXJ0KCk7XG4gICAgICAgIHRoaXMub3V0bGV0T2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5jb25uZWN0KCk7XG4gICAgICAgICAgICB0aGlzLmxvZ0RlYnVnQWN0aXZpdHkoXCJjb25uZWN0XCIpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgXCJjb25uZWN0aW5nIGNvbnRyb2xsZXJcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVmcmVzaCgpIHtcbiAgICAgICAgdGhpcy5vdXRsZXRPYnNlcnZlci5yZWZyZXNoKCk7XG4gICAgfVxuICAgIGRpc2Nvbm5lY3QoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgdGhpcy5sb2dEZWJ1Z0FjdGl2aXR5KFwiZGlzY29ubmVjdFwiKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIFwiZGlzY29ubmVjdGluZyBjb250cm9sbGVyXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3V0bGV0T2JzZXJ2ZXIuc3RvcCgpO1xuICAgICAgICB0aGlzLnRhcmdldE9ic2VydmVyLnN0b3AoKTtcbiAgICAgICAgdGhpcy52YWx1ZU9ic2VydmVyLnN0b3AoKTtcbiAgICAgICAgdGhpcy5iaW5kaW5nT2JzZXJ2ZXIuc3RvcCgpO1xuICAgIH1cbiAgICBnZXQgYXBwbGljYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1vZHVsZS5hcHBsaWNhdGlvbjtcbiAgICB9XG4gICAgZ2V0IGlkZW50aWZpZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1vZHVsZS5pZGVudGlmaWVyO1xuICAgIH1cbiAgICBnZXQgc2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBsaWNhdGlvbi5zY2hlbWE7XG4gICAgfVxuICAgIGdldCBkaXNwYXRjaGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBsaWNhdGlvbi5kaXNwYXRjaGVyO1xuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGUuZWxlbWVudDtcbiAgICB9XG4gICAgZ2V0IHBhcmVudEVsZW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICB9XG4gICAgaGFuZGxlRXJyb3IoZXJyb3IsIG1lc3NhZ2UsIGRldGFpbCA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHsgaWRlbnRpZmllciwgY29udHJvbGxlciwgZWxlbWVudCB9ID0gdGhpcztcbiAgICAgICAgZGV0YWlsID0gT2JqZWN0LmFzc2lnbih7IGlkZW50aWZpZXIsIGNvbnRyb2xsZXIsIGVsZW1lbnQgfSwgZGV0YWlsKTtcbiAgICAgICAgdGhpcy5hcHBsaWNhdGlvbi5oYW5kbGVFcnJvcihlcnJvciwgYEVycm9yICR7bWVzc2FnZX1gLCBkZXRhaWwpO1xuICAgIH1cbiAgICB0YXJnZXRDb25uZWN0ZWQoZWxlbWVudCwgbmFtZSkge1xuICAgICAgICB0aGlzLmludm9rZUNvbnRyb2xsZXJNZXRob2QoYCR7bmFtZX1UYXJnZXRDb25uZWN0ZWRgLCBlbGVtZW50KTtcbiAgICB9XG4gICAgdGFyZ2V0RGlzY29ubmVjdGVkKGVsZW1lbnQsIG5hbWUpIHtcbiAgICAgICAgdGhpcy5pbnZva2VDb250cm9sbGVyTWV0aG9kKGAke25hbWV9VGFyZ2V0RGlzY29ubmVjdGVkYCwgZWxlbWVudCk7XG4gICAgfVxuICAgIG91dGxldENvbm5lY3RlZChvdXRsZXQsIGVsZW1lbnQsIG5hbWUpIHtcbiAgICAgICAgdGhpcy5pbnZva2VDb250cm9sbGVyTWV0aG9kKGAke25hbWVzcGFjZUNhbWVsaXplKG5hbWUpfU91dGxldENvbm5lY3RlZGAsIG91dGxldCwgZWxlbWVudCk7XG4gICAgfVxuICAgIG91dGxldERpc2Nvbm5lY3RlZChvdXRsZXQsIGVsZW1lbnQsIG5hbWUpIHtcbiAgICAgICAgdGhpcy5pbnZva2VDb250cm9sbGVyTWV0aG9kKGAke25hbWVzcGFjZUNhbWVsaXplKG5hbWUpfU91dGxldERpc2Nvbm5lY3RlZGAsIG91dGxldCwgZWxlbWVudCk7XG4gICAgfVxuICAgIGludm9rZUNvbnRyb2xsZXJNZXRob2QobWV0aG9kTmFtZSwgLi4uYXJncykge1xuICAgICAgICBjb25zdCBjb250cm9sbGVyID0gdGhpcy5jb250cm9sbGVyO1xuICAgICAgICBpZiAodHlwZW9mIGNvbnRyb2xsZXJbbWV0aG9kTmFtZV0gPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyW21ldGhvZE5hbWVdKC4uLmFyZ3MpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBibGVzcyhjb25zdHJ1Y3Rvcikge1xuICAgIHJldHVybiBzaGFkb3coY29uc3RydWN0b3IsIGdldEJsZXNzZWRQcm9wZXJ0aWVzKGNvbnN0cnVjdG9yKSk7XG59XG5mdW5jdGlvbiBzaGFkb3coY29uc3RydWN0b3IsIHByb3BlcnRpZXMpIHtcbiAgICBjb25zdCBzaGFkb3dDb25zdHJ1Y3RvciA9IGV4dGVuZChjb25zdHJ1Y3Rvcik7XG4gICAgY29uc3Qgc2hhZG93UHJvcGVydGllcyA9IGdldFNoYWRvd1Byb3BlcnRpZXMoY29uc3RydWN0b3IucHJvdG90eXBlLCBwcm9wZXJ0aWVzKTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzaGFkb3dDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHNoYWRvd1Byb3BlcnRpZXMpO1xuICAgIHJldHVybiBzaGFkb3dDb25zdHJ1Y3Rvcjtcbn1cbmZ1bmN0aW9uIGdldEJsZXNzZWRQcm9wZXJ0aWVzKGNvbnN0cnVjdG9yKSB7XG4gICAgY29uc3QgYmxlc3NpbmdzID0gcmVhZEluaGVyaXRhYmxlU3RhdGljQXJyYXlWYWx1ZXMoY29uc3RydWN0b3IsIFwiYmxlc3NpbmdzXCIpO1xuICAgIHJldHVybiBibGVzc2luZ3MucmVkdWNlKChibGVzc2VkUHJvcGVydGllcywgYmxlc3NpbmcpID0+IHtcbiAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IGJsZXNzaW5nKGNvbnN0cnVjdG9yKTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcHJvcGVydGllcykge1xuICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRvciA9IGJsZXNzZWRQcm9wZXJ0aWVzW2tleV0gfHwge307XG4gICAgICAgICAgICBibGVzc2VkUHJvcGVydGllc1trZXldID0gT2JqZWN0LmFzc2lnbihkZXNjcmlwdG9yLCBwcm9wZXJ0aWVzW2tleV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBibGVzc2VkUHJvcGVydGllcztcbiAgICB9LCB7fSk7XG59XG5mdW5jdGlvbiBnZXRTaGFkb3dQcm9wZXJ0aWVzKHByb3RvdHlwZSwgcHJvcGVydGllcykge1xuICAgIHJldHVybiBnZXRPd25LZXlzKHByb3BlcnRpZXMpLnJlZHVjZSgoc2hhZG93UHJvcGVydGllcywga2V5KSA9PiB7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSBnZXRTaGFkb3dlZERlc2NyaXB0b3IocHJvdG90eXBlLCBwcm9wZXJ0aWVzLCBrZXkpO1xuICAgICAgICBpZiAoZGVzY3JpcHRvcikge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihzaGFkb3dQcm9wZXJ0aWVzLCB7IFtrZXldOiBkZXNjcmlwdG9yIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzaGFkb3dQcm9wZXJ0aWVzO1xuICAgIH0sIHt9KTtcbn1cbmZ1bmN0aW9uIGdldFNoYWRvd2VkRGVzY3JpcHRvcihwcm90b3R5cGUsIHByb3BlcnRpZXMsIGtleSkge1xuICAgIGNvbnN0IHNoYWRvd2luZ0Rlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHByb3RvdHlwZSwga2V5KTtcbiAgICBjb25zdCBzaGFkb3dlZEJ5VmFsdWUgPSBzaGFkb3dpbmdEZXNjcmlwdG9yICYmIFwidmFsdWVcIiBpbiBzaGFkb3dpbmdEZXNjcmlwdG9yO1xuICAgIGlmICghc2hhZG93ZWRCeVZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHByb3BlcnRpZXMsIGtleSkudmFsdWU7XG4gICAgICAgIGlmIChzaGFkb3dpbmdEZXNjcmlwdG9yKSB7XG4gICAgICAgICAgICBkZXNjcmlwdG9yLmdldCA9IHNoYWRvd2luZ0Rlc2NyaXB0b3IuZ2V0IHx8IGRlc2NyaXB0b3IuZ2V0O1xuICAgICAgICAgICAgZGVzY3JpcHRvci5zZXQgPSBzaGFkb3dpbmdEZXNjcmlwdG9yLnNldCB8fCBkZXNjcmlwdG9yLnNldDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVzY3JpcHRvcjtcbiAgICB9XG59XG5jb25zdCBnZXRPd25LZXlzID0gKCgpID0+IHtcbiAgICBpZiAodHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiAob2JqZWN0KSA9PiBbLi4uT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob2JqZWN0KSwgLi4uT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcztcbiAgICB9XG59KSgpO1xuY29uc3QgZXh0ZW5kID0gKCgpID0+IHtcbiAgICBmdW5jdGlvbiBleHRlbmRXaXRoUmVmbGVjdChjb25zdHJ1Y3Rvcikge1xuICAgICAgICBmdW5jdGlvbiBleHRlbmRlZCgpIHtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmNvbnN0cnVjdChjb25zdHJ1Y3RvciwgYXJndW1lbnRzLCBuZXcudGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICBleHRlbmRlZC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKGNvbnN0cnVjdG9yLnByb3RvdHlwZSwge1xuICAgICAgICAgICAgY29uc3RydWN0b3I6IHsgdmFsdWU6IGV4dGVuZGVkIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBSZWZsZWN0LnNldFByb3RvdHlwZU9mKGV4dGVuZGVkLCBjb25zdHJ1Y3Rvcik7XG4gICAgICAgIHJldHVybiBleHRlbmRlZDtcbiAgICB9XG4gICAgZnVuY3Rpb24gdGVzdFJlZmxlY3RFeHRlbnNpb24oKSB7XG4gICAgICAgIGNvbnN0IGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmEuY2FsbCh0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgYiA9IGV4dGVuZFdpdGhSZWZsZWN0KGEpO1xuICAgICAgICBiLnByb3RvdHlwZS5hID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgICAgICByZXR1cm4gbmV3IGIoKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgdGVzdFJlZmxlY3RFeHRlbnNpb24oKTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFdpdGhSZWZsZWN0O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIChjb25zdHJ1Y3RvcikgPT4gY2xhc3MgZXh0ZW5kZWQgZXh0ZW5kcyBjb25zdHJ1Y3RvciB7XG4gICAgICAgIH07XG4gICAgfVxufSkoKTtcblxuZnVuY3Rpb24gYmxlc3NEZWZpbml0aW9uKGRlZmluaXRpb24pIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBpZGVudGlmaWVyOiBkZWZpbml0aW9uLmlkZW50aWZpZXIsXG4gICAgICAgIGNvbnRyb2xsZXJDb25zdHJ1Y3RvcjogYmxlc3MoZGVmaW5pdGlvbi5jb250cm9sbGVyQ29uc3RydWN0b3IpLFxuICAgIH07XG59XG5cbmNsYXNzIE1vZHVsZSB7XG4gICAgY29uc3RydWN0b3IoYXBwbGljYXRpb24sIGRlZmluaXRpb24pIHtcbiAgICAgICAgdGhpcy5hcHBsaWNhdGlvbiA9IGFwcGxpY2F0aW9uO1xuICAgICAgICB0aGlzLmRlZmluaXRpb24gPSBibGVzc0RlZmluaXRpb24oZGVmaW5pdGlvbik7XG4gICAgICAgIHRoaXMuY29udGV4dHNCeVNjb3BlID0gbmV3IFdlYWtNYXAoKTtcbiAgICAgICAgdGhpcy5jb25uZWN0ZWRDb250ZXh0cyA9IG5ldyBTZXQoKTtcbiAgICB9XG4gICAgZ2V0IGlkZW50aWZpZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlZmluaXRpb24uaWRlbnRpZmllcjtcbiAgICB9XG4gICAgZ2V0IGNvbnRyb2xsZXJDb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmaW5pdGlvbi5jb250cm9sbGVyQ29uc3RydWN0b3I7XG4gICAgfVxuICAgIGdldCBjb250ZXh0cygpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5jb25uZWN0ZWRDb250ZXh0cyk7XG4gICAgfVxuICAgIGNvbm5lY3RDb250ZXh0Rm9yU2NvcGUoc2NvcGUpIHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IHRoaXMuZmV0Y2hDb250ZXh0Rm9yU2NvcGUoc2NvcGUpO1xuICAgICAgICB0aGlzLmNvbm5lY3RlZENvbnRleHRzLmFkZChjb250ZXh0KTtcbiAgICAgICAgY29udGV4dC5jb25uZWN0KCk7XG4gICAgfVxuICAgIGRpc2Nvbm5lY3RDb250ZXh0Rm9yU2NvcGUoc2NvcGUpIHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IHRoaXMuY29udGV4dHNCeVNjb3BlLmdldChzY29wZSk7XG4gICAgICAgIGlmIChjb250ZXh0KSB7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RlZENvbnRleHRzLmRlbGV0ZShjb250ZXh0KTtcbiAgICAgICAgICAgIGNvbnRleHQuZGlzY29ubmVjdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZldGNoQ29udGV4dEZvclNjb3BlKHNjb3BlKSB7XG4gICAgICAgIGxldCBjb250ZXh0ID0gdGhpcy5jb250ZXh0c0J5U2NvcGUuZ2V0KHNjb3BlKTtcbiAgICAgICAgaWYgKCFjb250ZXh0KSB7XG4gICAgICAgICAgICBjb250ZXh0ID0gbmV3IENvbnRleHQodGhpcywgc2NvcGUpO1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0c0J5U2NvcGUuc2V0KHNjb3BlLCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udGV4dDtcbiAgICB9XG59XG5cbmNsYXNzIENsYXNzTWFwIHtcbiAgICBjb25zdHJ1Y3RvcihzY29wZSkge1xuICAgICAgICB0aGlzLnNjb3BlID0gc2NvcGU7XG4gICAgfVxuICAgIGhhcyhuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuaGFzKHRoaXMuZ2V0RGF0YUtleShuYW1lKSk7XG4gICAgfVxuICAgIGdldChuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEFsbChuYW1lKVswXTtcbiAgICB9XG4gICAgZ2V0QWxsKG5hbWUpIHtcbiAgICAgICAgY29uc3QgdG9rZW5TdHJpbmcgPSB0aGlzLmRhdGEuZ2V0KHRoaXMuZ2V0RGF0YUtleShuYW1lKSkgfHwgXCJcIjtcbiAgICAgICAgcmV0dXJuIHRva2VuaXplKHRva2VuU3RyaW5nKTtcbiAgICB9XG4gICAgZ2V0QXR0cmlidXRlTmFtZShuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuZ2V0QXR0cmlidXRlTmFtZUZvcktleSh0aGlzLmdldERhdGFLZXkobmFtZSkpO1xuICAgIH1cbiAgICBnZXREYXRhS2V5KG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGAke25hbWV9LWNsYXNzYDtcbiAgICB9XG4gICAgZ2V0IGRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3BlLmRhdGE7XG4gICAgfVxufVxuXG5jbGFzcyBEYXRhTWFwIHtcbiAgICBjb25zdHJ1Y3RvcihzY29wZSkge1xuICAgICAgICB0aGlzLnNjb3BlID0gc2NvcGU7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY29wZS5lbGVtZW50O1xuICAgIH1cbiAgICBnZXQgaWRlbnRpZmllcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGUuaWRlbnRpZmllcjtcbiAgICB9XG4gICAgZ2V0KGtleSkge1xuICAgICAgICBjb25zdCBuYW1lID0gdGhpcy5nZXRBdHRyaWJ1dGVOYW1lRm9yS2V5KGtleSk7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKG5hbWUpO1xuICAgIH1cbiAgICBzZXQoa2V5LCB2YWx1ZSkge1xuICAgICAgICBjb25zdCBuYW1lID0gdGhpcy5nZXRBdHRyaWJ1dGVOYW1lRm9yS2V5KGtleSk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoa2V5KTtcbiAgICB9XG4gICAgaGFzKGtleSkge1xuICAgICAgICBjb25zdCBuYW1lID0gdGhpcy5nZXRBdHRyaWJ1dGVOYW1lRm9yS2V5KGtleSk7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuaGFzQXR0cmlidXRlKG5hbWUpO1xuICAgIH1cbiAgICBkZWxldGUoa2V5KSB7XG4gICAgICAgIGlmICh0aGlzLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gdGhpcy5nZXRBdHRyaWJ1dGVOYW1lRm9yS2V5KGtleSk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0QXR0cmlidXRlTmFtZUZvcktleShrZXkpIHtcbiAgICAgICAgcmV0dXJuIGBkYXRhLSR7dGhpcy5pZGVudGlmaWVyfS0ke2Rhc2hlcml6ZShrZXkpfWA7XG4gICAgfVxufVxuXG5jbGFzcyBHdWlkZSB7XG4gICAgY29uc3RydWN0b3IobG9nZ2VyKSB7XG4gICAgICAgIHRoaXMud2FybmVkS2V5c0J5T2JqZWN0ID0gbmV3IFdlYWtNYXAoKTtcbiAgICAgICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7XG4gICAgfVxuICAgIHdhcm4ob2JqZWN0LCBrZXksIG1lc3NhZ2UpIHtcbiAgICAgICAgbGV0IHdhcm5lZEtleXMgPSB0aGlzLndhcm5lZEtleXNCeU9iamVjdC5nZXQob2JqZWN0KTtcbiAgICAgICAgaWYgKCF3YXJuZWRLZXlzKSB7XG4gICAgICAgICAgICB3YXJuZWRLZXlzID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgdGhpcy53YXJuZWRLZXlzQnlPYmplY3Quc2V0KG9iamVjdCwgd2FybmVkS2V5cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF3YXJuZWRLZXlzLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICB3YXJuZWRLZXlzLmFkZChrZXkpO1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihtZXNzYWdlLCBvYmplY3QpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhdHRyaWJ1dGVWYWx1ZUNvbnRhaW5zVG9rZW4oYXR0cmlidXRlTmFtZSwgdG9rZW4pIHtcbiAgICByZXR1cm4gYFske2F0dHJpYnV0ZU5hbWV9fj1cIiR7dG9rZW59XCJdYDtcbn1cblxuY2xhc3MgVGFyZ2V0U2V0IHtcbiAgICBjb25zdHJ1Y3RvcihzY29wZSkge1xuICAgICAgICB0aGlzLnNjb3BlID0gc2NvcGU7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY29wZS5lbGVtZW50O1xuICAgIH1cbiAgICBnZXQgaWRlbnRpZmllcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGUuaWRlbnRpZmllcjtcbiAgICB9XG4gICAgZ2V0IHNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGUuc2NoZW1hO1xuICAgIH1cbiAgICBoYXModGFyZ2V0TmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kKHRhcmdldE5hbWUpICE9IG51bGw7XG4gICAgfVxuICAgIGZpbmQoLi4udGFyZ2V0TmFtZXMpIHtcbiAgICAgICAgcmV0dXJuIHRhcmdldE5hbWVzLnJlZHVjZSgodGFyZ2V0LCB0YXJnZXROYW1lKSA9PiB0YXJnZXQgfHwgdGhpcy5maW5kVGFyZ2V0KHRhcmdldE5hbWUpIHx8IHRoaXMuZmluZExlZ2FjeVRhcmdldCh0YXJnZXROYW1lKSwgdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgZmluZEFsbCguLi50YXJnZXROYW1lcykge1xuICAgICAgICByZXR1cm4gdGFyZ2V0TmFtZXMucmVkdWNlKCh0YXJnZXRzLCB0YXJnZXROYW1lKSA9PiBbXG4gICAgICAgICAgICAuLi50YXJnZXRzLFxuICAgICAgICAgICAgLi4udGhpcy5maW5kQWxsVGFyZ2V0cyh0YXJnZXROYW1lKSxcbiAgICAgICAgICAgIC4uLnRoaXMuZmluZEFsbExlZ2FjeVRhcmdldHModGFyZ2V0TmFtZSksXG4gICAgICAgIF0sIFtdKTtcbiAgICB9XG4gICAgZmluZFRhcmdldCh0YXJnZXROYW1lKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdG9yID0gdGhpcy5nZXRTZWxlY3RvckZvclRhcmdldE5hbWUodGFyZ2V0TmFtZSk7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3BlLmZpbmRFbGVtZW50KHNlbGVjdG9yKTtcbiAgICB9XG4gICAgZmluZEFsbFRhcmdldHModGFyZ2V0TmFtZSkge1xuICAgICAgICBjb25zdCBzZWxlY3RvciA9IHRoaXMuZ2V0U2VsZWN0b3JGb3JUYXJnZXROYW1lKHRhcmdldE5hbWUpO1xuICAgICAgICByZXR1cm4gdGhpcy5zY29wZS5maW5kQWxsRWxlbWVudHMoc2VsZWN0b3IpO1xuICAgIH1cbiAgICBnZXRTZWxlY3RvckZvclRhcmdldE5hbWUodGFyZ2V0TmFtZSkge1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGVOYW1lID0gdGhpcy5zY2hlbWEudGFyZ2V0QXR0cmlidXRlRm9yU2NvcGUodGhpcy5pZGVudGlmaWVyKTtcbiAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZVZhbHVlQ29udGFpbnNUb2tlbihhdHRyaWJ1dGVOYW1lLCB0YXJnZXROYW1lKTtcbiAgICB9XG4gICAgZmluZExlZ2FjeVRhcmdldCh0YXJnZXROYW1lKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdG9yID0gdGhpcy5nZXRMZWdhY3lTZWxlY3RvckZvclRhcmdldE5hbWUodGFyZ2V0TmFtZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmRlcHJlY2F0ZSh0aGlzLnNjb3BlLmZpbmRFbGVtZW50KHNlbGVjdG9yKSwgdGFyZ2V0TmFtZSk7XG4gICAgfVxuICAgIGZpbmRBbGxMZWdhY3lUYXJnZXRzKHRhcmdldE5hbWUpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0b3IgPSB0aGlzLmdldExlZ2FjeVNlbGVjdG9yRm9yVGFyZ2V0TmFtZSh0YXJnZXROYW1lKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGUuZmluZEFsbEVsZW1lbnRzKHNlbGVjdG9yKS5tYXAoKGVsZW1lbnQpID0+IHRoaXMuZGVwcmVjYXRlKGVsZW1lbnQsIHRhcmdldE5hbWUpKTtcbiAgICB9XG4gICAgZ2V0TGVnYWN5U2VsZWN0b3JGb3JUYXJnZXROYW1lKHRhcmdldE5hbWUpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0RGVzY3JpcHRvciA9IGAke3RoaXMuaWRlbnRpZmllcn0uJHt0YXJnZXROYW1lfWA7XG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGVWYWx1ZUNvbnRhaW5zVG9rZW4odGhpcy5zY2hlbWEudGFyZ2V0QXR0cmlidXRlLCB0YXJnZXREZXNjcmlwdG9yKTtcbiAgICB9XG4gICAgZGVwcmVjYXRlKGVsZW1lbnQsIHRhcmdldE5hbWUpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgaWRlbnRpZmllciB9ID0gdGhpcztcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZU5hbWUgPSB0aGlzLnNjaGVtYS50YXJnZXRBdHRyaWJ1dGU7XG4gICAgICAgICAgICBjb25zdCByZXZpc2VkQXR0cmlidXRlTmFtZSA9IHRoaXMuc2NoZW1hLnRhcmdldEF0dHJpYnV0ZUZvclNjb3BlKGlkZW50aWZpZXIpO1xuICAgICAgICAgICAgdGhpcy5ndWlkZS53YXJuKGVsZW1lbnQsIGB0YXJnZXQ6JHt0YXJnZXROYW1lfWAsIGBQbGVhc2UgcmVwbGFjZSAke2F0dHJpYnV0ZU5hbWV9PVwiJHtpZGVudGlmaWVyfS4ke3RhcmdldE5hbWV9XCIgd2l0aCAke3JldmlzZWRBdHRyaWJ1dGVOYW1lfT1cIiR7dGFyZ2V0TmFtZX1cIi4gYCArXG4gICAgICAgICAgICAgICAgYFRoZSAke2F0dHJpYnV0ZU5hbWV9IGF0dHJpYnV0ZSBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbiBvZiBTdGltdWx1cy5gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG4gICAgZ2V0IGd1aWRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY29wZS5ndWlkZTtcbiAgICB9XG59XG5cbmNsYXNzIE91dGxldFNldCB7XG4gICAgY29uc3RydWN0b3Ioc2NvcGUsIGNvbnRyb2xsZXJFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuc2NvcGUgPSBzY29wZTtcbiAgICAgICAgdGhpcy5jb250cm9sbGVyRWxlbWVudCA9IGNvbnRyb2xsZXJFbGVtZW50O1xuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGUuZWxlbWVudDtcbiAgICB9XG4gICAgZ2V0IGlkZW50aWZpZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3BlLmlkZW50aWZpZXI7XG4gICAgfVxuICAgIGdldCBzY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3BlLnNjaGVtYTtcbiAgICB9XG4gICAgaGFzKG91dGxldE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZChvdXRsZXROYW1lKSAhPSBudWxsO1xuICAgIH1cbiAgICBmaW5kKC4uLm91dGxldE5hbWVzKSB7XG4gICAgICAgIHJldHVybiBvdXRsZXROYW1lcy5yZWR1Y2UoKG91dGxldCwgb3V0bGV0TmFtZSkgPT4gb3V0bGV0IHx8IHRoaXMuZmluZE91dGxldChvdXRsZXROYW1lKSwgdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgZmluZEFsbCguLi5vdXRsZXROYW1lcykge1xuICAgICAgICByZXR1cm4gb3V0bGV0TmFtZXMucmVkdWNlKChvdXRsZXRzLCBvdXRsZXROYW1lKSA9PiBbLi4ub3V0bGV0cywgLi4udGhpcy5maW5kQWxsT3V0bGV0cyhvdXRsZXROYW1lKV0sIFtdKTtcbiAgICB9XG4gICAgZ2V0U2VsZWN0b3JGb3JPdXRsZXROYW1lKG91dGxldE5hbWUpIHtcbiAgICAgICAgY29uc3QgYXR0cmlidXRlTmFtZSA9IHRoaXMuc2NoZW1hLm91dGxldEF0dHJpYnV0ZUZvclNjb3BlKHRoaXMuaWRlbnRpZmllciwgb3V0bGV0TmFtZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRyb2xsZXJFbGVtZW50LmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lKTtcbiAgICB9XG4gICAgZmluZE91dGxldChvdXRsZXROYW1lKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdG9yID0gdGhpcy5nZXRTZWxlY3RvckZvck91dGxldE5hbWUob3V0bGV0TmFtZSk7XG4gICAgICAgIGlmIChzZWxlY3RvcilcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmRFbGVtZW50KHNlbGVjdG9yLCBvdXRsZXROYW1lKTtcbiAgICB9XG4gICAgZmluZEFsbE91dGxldHMob3V0bGV0TmFtZSkge1xuICAgICAgICBjb25zdCBzZWxlY3RvciA9IHRoaXMuZ2V0U2VsZWN0b3JGb3JPdXRsZXROYW1lKG91dGxldE5hbWUpO1xuICAgICAgICByZXR1cm4gc2VsZWN0b3IgPyB0aGlzLmZpbmRBbGxFbGVtZW50cyhzZWxlY3Rvciwgb3V0bGV0TmFtZSkgOiBbXTtcbiAgICB9XG4gICAgZmluZEVsZW1lbnQoc2VsZWN0b3IsIG91dGxldE5hbWUpIHtcbiAgICAgICAgY29uc3QgZWxlbWVudHMgPSB0aGlzLnNjb3BlLnF1ZXJ5RWxlbWVudHMoc2VsZWN0b3IpO1xuICAgICAgICByZXR1cm4gZWxlbWVudHMuZmlsdGVyKChlbGVtZW50KSA9PiB0aGlzLm1hdGNoZXNFbGVtZW50KGVsZW1lbnQsIHNlbGVjdG9yLCBvdXRsZXROYW1lKSlbMF07XG4gICAgfVxuICAgIGZpbmRBbGxFbGVtZW50cyhzZWxlY3Rvciwgb3V0bGV0TmFtZSkge1xuICAgICAgICBjb25zdCBlbGVtZW50cyA9IHRoaXMuc2NvcGUucXVlcnlFbGVtZW50cyhzZWxlY3Rvcik7XG4gICAgICAgIHJldHVybiBlbGVtZW50cy5maWx0ZXIoKGVsZW1lbnQpID0+IHRoaXMubWF0Y2hlc0VsZW1lbnQoZWxlbWVudCwgc2VsZWN0b3IsIG91dGxldE5hbWUpKTtcbiAgICB9XG4gICAgbWF0Y2hlc0VsZW1lbnQoZWxlbWVudCwgc2VsZWN0b3IsIG91dGxldE5hbWUpIHtcbiAgICAgICAgY29uc3QgY29udHJvbGxlckF0dHJpYnV0ZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKHRoaXMuc2NvcGUuc2NoZW1hLmNvbnRyb2xsZXJBdHRyaWJ1dGUpIHx8IFwiXCI7XG4gICAgICAgIHJldHVybiBlbGVtZW50Lm1hdGNoZXMoc2VsZWN0b3IpICYmIGNvbnRyb2xsZXJBdHRyaWJ1dGUuc3BsaXQoXCIgXCIpLmluY2x1ZGVzKG91dGxldE5hbWUpO1xuICAgIH1cbn1cblxuY2xhc3MgU2NvcGUge1xuICAgIGNvbnN0cnVjdG9yKHNjaGVtYSwgZWxlbWVudCwgaWRlbnRpZmllciwgbG9nZ2VyKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0cyA9IG5ldyBUYXJnZXRTZXQodGhpcyk7XG4gICAgICAgIHRoaXMuY2xhc3NlcyA9IG5ldyBDbGFzc01hcCh0aGlzKTtcbiAgICAgICAgdGhpcy5kYXRhID0gbmV3IERhdGFNYXAodGhpcyk7XG4gICAgICAgIHRoaXMuY29udGFpbnNFbGVtZW50ID0gKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmNsb3Nlc3QodGhpcy5jb250cm9sbGVyU2VsZWN0b3IpID09PSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2NoZW1hID0gc2NoZW1hO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLmlkZW50aWZpZXIgPSBpZGVudGlmaWVyO1xuICAgICAgICB0aGlzLmd1aWRlID0gbmV3IEd1aWRlKGxvZ2dlcik7XG4gICAgICAgIHRoaXMub3V0bGV0cyA9IG5ldyBPdXRsZXRTZXQodGhpcy5kb2N1bWVudFNjb3BlLCBlbGVtZW50KTtcbiAgICB9XG4gICAgZmluZEVsZW1lbnQoc2VsZWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5tYXRjaGVzKHNlbGVjdG9yKSA/IHRoaXMuZWxlbWVudCA6IHRoaXMucXVlcnlFbGVtZW50cyhzZWxlY3RvcikuZmluZCh0aGlzLmNvbnRhaW5zRWxlbWVudCk7XG4gICAgfVxuICAgIGZpbmRBbGxFbGVtZW50cyhzZWxlY3Rvcikge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgLi4uKHRoaXMuZWxlbWVudC5tYXRjaGVzKHNlbGVjdG9yKSA/IFt0aGlzLmVsZW1lbnRdIDogW10pLFxuICAgICAgICAgICAgLi4udGhpcy5xdWVyeUVsZW1lbnRzKHNlbGVjdG9yKS5maWx0ZXIodGhpcy5jb250YWluc0VsZW1lbnQpLFxuICAgICAgICBdO1xuICAgIH1cbiAgICBxdWVyeUVsZW1lbnRzKHNlbGVjdG9yKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSk7XG4gICAgfVxuICAgIGdldCBjb250cm9sbGVyU2VsZWN0b3IoKSB7XG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGVWYWx1ZUNvbnRhaW5zVG9rZW4odGhpcy5zY2hlbWEuY29udHJvbGxlckF0dHJpYnV0ZSwgdGhpcy5pZGVudGlmaWVyKTtcbiAgICB9XG4gICAgZ2V0IGlzRG9jdW1lbnRTY29wZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudCA9PT0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgIH1cbiAgICBnZXQgZG9jdW1lbnRTY29wZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNEb2N1bWVudFNjb3BlXG4gICAgICAgICAgICA/IHRoaXNcbiAgICAgICAgICAgIDogbmV3IFNjb3BlKHRoaXMuc2NoZW1hLCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIHRoaXMuaWRlbnRpZmllciwgdGhpcy5ndWlkZS5sb2dnZXIpO1xuICAgIH1cbn1cblxuY2xhc3MgU2NvcGVPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgc2NoZW1hLCBkZWxlZ2F0ZSkge1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLnNjaGVtYSA9IHNjaGVtYTtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgICAgICB0aGlzLnZhbHVlTGlzdE9ic2VydmVyID0gbmV3IFZhbHVlTGlzdE9ic2VydmVyKHRoaXMuZWxlbWVudCwgdGhpcy5jb250cm9sbGVyQXR0cmlidXRlLCB0aGlzKTtcbiAgICAgICAgdGhpcy5zY29wZXNCeUlkZW50aWZpZXJCeUVsZW1lbnQgPSBuZXcgV2Vha01hcCgpO1xuICAgICAgICB0aGlzLnNjb3BlUmVmZXJlbmNlQ291bnRzID0gbmV3IFdlYWtNYXAoKTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMudmFsdWVMaXN0T2JzZXJ2ZXIuc3RhcnQoKTtcbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy52YWx1ZUxpc3RPYnNlcnZlci5zdG9wKCk7XG4gICAgfVxuICAgIGdldCBjb250cm9sbGVyQXR0cmlidXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY2hlbWEuY29udHJvbGxlckF0dHJpYnV0ZTtcbiAgICB9XG4gICAgcGFyc2VWYWx1ZUZvclRva2VuKHRva2VuKSB7XG4gICAgICAgIGNvbnN0IHsgZWxlbWVudCwgY29udGVudDogaWRlbnRpZmllciB9ID0gdG9rZW47XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlVmFsdWVGb3JFbGVtZW50QW5kSWRlbnRpZmllcihlbGVtZW50LCBpZGVudGlmaWVyKTtcbiAgICB9XG4gICAgcGFyc2VWYWx1ZUZvckVsZW1lbnRBbmRJZGVudGlmaWVyKGVsZW1lbnQsIGlkZW50aWZpZXIpIHtcbiAgICAgICAgY29uc3Qgc2NvcGVzQnlJZGVudGlmaWVyID0gdGhpcy5mZXRjaFNjb3Blc0J5SWRlbnRpZmllckZvckVsZW1lbnQoZWxlbWVudCk7XG4gICAgICAgIGxldCBzY29wZSA9IHNjb3Blc0J5SWRlbnRpZmllci5nZXQoaWRlbnRpZmllcik7XG4gICAgICAgIGlmICghc2NvcGUpIHtcbiAgICAgICAgICAgIHNjb3BlID0gdGhpcy5kZWxlZ2F0ZS5jcmVhdGVTY29wZUZvckVsZW1lbnRBbmRJZGVudGlmaWVyKGVsZW1lbnQsIGlkZW50aWZpZXIpO1xuICAgICAgICAgICAgc2NvcGVzQnlJZGVudGlmaWVyLnNldChpZGVudGlmaWVyLCBzY29wZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNjb3BlO1xuICAgIH1cbiAgICBlbGVtZW50TWF0Y2hlZFZhbHVlKGVsZW1lbnQsIHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHJlZmVyZW5jZUNvdW50ID0gKHRoaXMuc2NvcGVSZWZlcmVuY2VDb3VudHMuZ2V0KHZhbHVlKSB8fCAwKSArIDE7XG4gICAgICAgIHRoaXMuc2NvcGVSZWZlcmVuY2VDb3VudHMuc2V0KHZhbHVlLCByZWZlcmVuY2VDb3VudCk7XG4gICAgICAgIGlmIChyZWZlcmVuY2VDb3VudCA9PSAxKSB7XG4gICAgICAgICAgICB0aGlzLmRlbGVnYXRlLnNjb3BlQ29ubmVjdGVkKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbGVtZW50VW5tYXRjaGVkVmFsdWUoZWxlbWVudCwgdmFsdWUpIHtcbiAgICAgICAgY29uc3QgcmVmZXJlbmNlQ291bnQgPSB0aGlzLnNjb3BlUmVmZXJlbmNlQ291bnRzLmdldCh2YWx1ZSk7XG4gICAgICAgIGlmIChyZWZlcmVuY2VDb3VudCkge1xuICAgICAgICAgICAgdGhpcy5zY29wZVJlZmVyZW5jZUNvdW50cy5zZXQodmFsdWUsIHJlZmVyZW5jZUNvdW50IC0gMSk7XG4gICAgICAgICAgICBpZiAocmVmZXJlbmNlQ291bnQgPT0gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUuc2NvcGVEaXNjb25uZWN0ZWQodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZldGNoU2NvcGVzQnlJZGVudGlmaWVyRm9yRWxlbWVudChlbGVtZW50KSB7XG4gICAgICAgIGxldCBzY29wZXNCeUlkZW50aWZpZXIgPSB0aGlzLnNjb3Blc0J5SWRlbnRpZmllckJ5RWxlbWVudC5nZXQoZWxlbWVudCk7XG4gICAgICAgIGlmICghc2NvcGVzQnlJZGVudGlmaWVyKSB7XG4gICAgICAgICAgICBzY29wZXNCeUlkZW50aWZpZXIgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICB0aGlzLnNjb3Blc0J5SWRlbnRpZmllckJ5RWxlbWVudC5zZXQoZWxlbWVudCwgc2NvcGVzQnlJZGVudGlmaWVyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2NvcGVzQnlJZGVudGlmaWVyO1xuICAgIH1cbn1cblxuY2xhc3MgUm91dGVyIHtcbiAgICBjb25zdHJ1Y3RvcihhcHBsaWNhdGlvbikge1xuICAgICAgICB0aGlzLmFwcGxpY2F0aW9uID0gYXBwbGljYXRpb247XG4gICAgICAgIHRoaXMuc2NvcGVPYnNlcnZlciA9IG5ldyBTY29wZU9ic2VydmVyKHRoaXMuZWxlbWVudCwgdGhpcy5zY2hlbWEsIHRoaXMpO1xuICAgICAgICB0aGlzLnNjb3Blc0J5SWRlbnRpZmllciA9IG5ldyBNdWx0aW1hcCgpO1xuICAgICAgICB0aGlzLm1vZHVsZXNCeUlkZW50aWZpZXIgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBsaWNhdGlvbi5lbGVtZW50O1xuICAgIH1cbiAgICBnZXQgc2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBsaWNhdGlvbi5zY2hlbWE7XG4gICAgfVxuICAgIGdldCBsb2dnZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcGxpY2F0aW9uLmxvZ2dlcjtcbiAgICB9XG4gICAgZ2V0IGNvbnRyb2xsZXJBdHRyaWJ1dGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjaGVtYS5jb250cm9sbGVyQXR0cmlidXRlO1xuICAgIH1cbiAgICBnZXQgbW9kdWxlcygpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5tb2R1bGVzQnlJZGVudGlmaWVyLnZhbHVlcygpKTtcbiAgICB9XG4gICAgZ2V0IGNvbnRleHRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tb2R1bGVzLnJlZHVjZSgoY29udGV4dHMsIG1vZHVsZSkgPT4gY29udGV4dHMuY29uY2F0KG1vZHVsZS5jb250ZXh0cyksIFtdKTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuc2NvcGVPYnNlcnZlci5zdGFydCgpO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICB0aGlzLnNjb3BlT2JzZXJ2ZXIuc3RvcCgpO1xuICAgIH1cbiAgICBsb2FkRGVmaW5pdGlvbihkZWZpbml0aW9uKSB7XG4gICAgICAgIHRoaXMudW5sb2FkSWRlbnRpZmllcihkZWZpbml0aW9uLmlkZW50aWZpZXIpO1xuICAgICAgICBjb25zdCBtb2R1bGUgPSBuZXcgTW9kdWxlKHRoaXMuYXBwbGljYXRpb24sIGRlZmluaXRpb24pO1xuICAgICAgICB0aGlzLmNvbm5lY3RNb2R1bGUobW9kdWxlKTtcbiAgICAgICAgY29uc3QgYWZ0ZXJMb2FkID0gZGVmaW5pdGlvbi5jb250cm9sbGVyQ29uc3RydWN0b3IuYWZ0ZXJMb2FkO1xuICAgICAgICBpZiAoYWZ0ZXJMb2FkKSB7XG4gICAgICAgICAgICBhZnRlckxvYWQuY2FsbChkZWZpbml0aW9uLmNvbnRyb2xsZXJDb25zdHJ1Y3RvciwgZGVmaW5pdGlvbi5pZGVudGlmaWVyLCB0aGlzLmFwcGxpY2F0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1bmxvYWRJZGVudGlmaWVyKGlkZW50aWZpZXIpIHtcbiAgICAgICAgY29uc3QgbW9kdWxlID0gdGhpcy5tb2R1bGVzQnlJZGVudGlmaWVyLmdldChpZGVudGlmaWVyKTtcbiAgICAgICAgaWYgKG1vZHVsZSkge1xuICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0TW9kdWxlKG1vZHVsZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0Q29udGV4dEZvckVsZW1lbnRBbmRJZGVudGlmaWVyKGVsZW1lbnQsIGlkZW50aWZpZXIpIHtcbiAgICAgICAgY29uc3QgbW9kdWxlID0gdGhpcy5tb2R1bGVzQnlJZGVudGlmaWVyLmdldChpZGVudGlmaWVyKTtcbiAgICAgICAgaWYgKG1vZHVsZSkge1xuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZS5jb250ZXh0cy5maW5kKChjb250ZXh0KSA9PiBjb250ZXh0LmVsZW1lbnQgPT0gZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJvcG9zZVRvQ29ubmVjdFNjb3BlRm9yRWxlbWVudEFuZElkZW50aWZpZXIoZWxlbWVudCwgaWRlbnRpZmllcikge1xuICAgICAgICBjb25zdCBzY29wZSA9IHRoaXMuc2NvcGVPYnNlcnZlci5wYXJzZVZhbHVlRm9yRWxlbWVudEFuZElkZW50aWZpZXIoZWxlbWVudCwgaWRlbnRpZmllcik7XG4gICAgICAgIGlmIChzY29wZSkge1xuICAgICAgICAgICAgdGhpcy5zY29wZU9ic2VydmVyLmVsZW1lbnRNYXRjaGVkVmFsdWUoc2NvcGUuZWxlbWVudCwgc2NvcGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgQ291bGRuJ3QgZmluZCBvciBjcmVhdGUgc2NvcGUgZm9yIGlkZW50aWZpZXI6IFwiJHtpZGVudGlmaWVyfVwiIGFuZCBlbGVtZW50OmAsIGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZUVycm9yKGVycm9yLCBtZXNzYWdlLCBkZXRhaWwpIHtcbiAgICAgICAgdGhpcy5hcHBsaWNhdGlvbi5oYW5kbGVFcnJvcihlcnJvciwgbWVzc2FnZSwgZGV0YWlsKTtcbiAgICB9XG4gICAgY3JlYXRlU2NvcGVGb3JFbGVtZW50QW5kSWRlbnRpZmllcihlbGVtZW50LCBpZGVudGlmaWVyKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2NvcGUodGhpcy5zY2hlbWEsIGVsZW1lbnQsIGlkZW50aWZpZXIsIHRoaXMubG9nZ2VyKTtcbiAgICB9XG4gICAgc2NvcGVDb25uZWN0ZWQoc2NvcGUpIHtcbiAgICAgICAgdGhpcy5zY29wZXNCeUlkZW50aWZpZXIuYWRkKHNjb3BlLmlkZW50aWZpZXIsIHNjb3BlKTtcbiAgICAgICAgY29uc3QgbW9kdWxlID0gdGhpcy5tb2R1bGVzQnlJZGVudGlmaWVyLmdldChzY29wZS5pZGVudGlmaWVyKTtcbiAgICAgICAgaWYgKG1vZHVsZSkge1xuICAgICAgICAgICAgbW9kdWxlLmNvbm5lY3RDb250ZXh0Rm9yU2NvcGUoc2NvcGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNjb3BlRGlzY29ubmVjdGVkKHNjb3BlKSB7XG4gICAgICAgIHRoaXMuc2NvcGVzQnlJZGVudGlmaWVyLmRlbGV0ZShzY29wZS5pZGVudGlmaWVyLCBzY29wZSk7XG4gICAgICAgIGNvbnN0IG1vZHVsZSA9IHRoaXMubW9kdWxlc0J5SWRlbnRpZmllci5nZXQoc2NvcGUuaWRlbnRpZmllcik7XG4gICAgICAgIGlmIChtb2R1bGUpIHtcbiAgICAgICAgICAgIG1vZHVsZS5kaXNjb25uZWN0Q29udGV4dEZvclNjb3BlKHNjb3BlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25uZWN0TW9kdWxlKG1vZHVsZSkge1xuICAgICAgICB0aGlzLm1vZHVsZXNCeUlkZW50aWZpZXIuc2V0KG1vZHVsZS5pZGVudGlmaWVyLCBtb2R1bGUpO1xuICAgICAgICBjb25zdCBzY29wZXMgPSB0aGlzLnNjb3Blc0J5SWRlbnRpZmllci5nZXRWYWx1ZXNGb3JLZXkobW9kdWxlLmlkZW50aWZpZXIpO1xuICAgICAgICBzY29wZXMuZm9yRWFjaCgoc2NvcGUpID0+IG1vZHVsZS5jb25uZWN0Q29udGV4dEZvclNjb3BlKHNjb3BlKSk7XG4gICAgfVxuICAgIGRpc2Nvbm5lY3RNb2R1bGUobW9kdWxlKSB7XG4gICAgICAgIHRoaXMubW9kdWxlc0J5SWRlbnRpZmllci5kZWxldGUobW9kdWxlLmlkZW50aWZpZXIpO1xuICAgICAgICBjb25zdCBzY29wZXMgPSB0aGlzLnNjb3Blc0J5SWRlbnRpZmllci5nZXRWYWx1ZXNGb3JLZXkobW9kdWxlLmlkZW50aWZpZXIpO1xuICAgICAgICBzY29wZXMuZm9yRWFjaCgoc2NvcGUpID0+IG1vZHVsZS5kaXNjb25uZWN0Q29udGV4dEZvclNjb3BlKHNjb3BlKSk7XG4gICAgfVxufVxuXG5jb25zdCBkZWZhdWx0U2NoZW1hID0ge1xuICAgIGNvbnRyb2xsZXJBdHRyaWJ1dGU6IFwiZGF0YS1jb250cm9sbGVyXCIsXG4gICAgYWN0aW9uQXR0cmlidXRlOiBcImRhdGEtYWN0aW9uXCIsXG4gICAgdGFyZ2V0QXR0cmlidXRlOiBcImRhdGEtdGFyZ2V0XCIsXG4gICAgdGFyZ2V0QXR0cmlidXRlRm9yU2NvcGU6IChpZGVudGlmaWVyKSA9PiBgZGF0YS0ke2lkZW50aWZpZXJ9LXRhcmdldGAsXG4gICAgb3V0bGV0QXR0cmlidXRlRm9yU2NvcGU6IChpZGVudGlmaWVyLCBvdXRsZXQpID0+IGBkYXRhLSR7aWRlbnRpZmllcn0tJHtvdXRsZXR9LW91dGxldGAsXG4gICAga2V5TWFwcGluZ3M6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IGVudGVyOiBcIkVudGVyXCIsIHRhYjogXCJUYWJcIiwgZXNjOiBcIkVzY2FwZVwiLCBzcGFjZTogXCIgXCIsIHVwOiBcIkFycm93VXBcIiwgZG93bjogXCJBcnJvd0Rvd25cIiwgbGVmdDogXCJBcnJvd0xlZnRcIiwgcmlnaHQ6IFwiQXJyb3dSaWdodFwiLCBob21lOiBcIkhvbWVcIiwgZW5kOiBcIkVuZFwiLCBwYWdlX3VwOiBcIlBhZ2VVcFwiLCBwYWdlX2Rvd246IFwiUGFnZURvd25cIiB9LCBvYmplY3RGcm9tRW50cmllcyhcImFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6XCIuc3BsaXQoXCJcIikubWFwKChjKSA9PiBbYywgY10pKSksIG9iamVjdEZyb21FbnRyaWVzKFwiMDEyMzQ1Njc4OVwiLnNwbGl0KFwiXCIpLm1hcCgobikgPT4gW24sIG5dKSkpLFxufTtcbmZ1bmN0aW9uIG9iamVjdEZyb21FbnRyaWVzKGFycmF5KSB7XG4gICAgcmV0dXJuIGFycmF5LnJlZHVjZSgobWVtbywgW2ssIHZdKSA9PiAoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBtZW1vKSwgeyBba106IHYgfSkpLCB7fSk7XG59XG5cbmNsYXNzIEFwcGxpY2F0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCBzY2hlbWEgPSBkZWZhdWx0U2NoZW1hKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gY29uc29sZTtcbiAgICAgICAgdGhpcy5kZWJ1ZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxvZ0RlYnVnQWN0aXZpdHkgPSAoaWRlbnRpZmllciwgZnVuY3Rpb25OYW1lLCBkZXRhaWwgPSB7fSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGVidWcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0Zvcm1hdHRlZE1lc3NhZ2UoaWRlbnRpZmllciwgZnVuY3Rpb25OYW1lLCBkZXRhaWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLnNjaGVtYSA9IHNjaGVtYTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaGVyID0gbmV3IERpc3BhdGNoZXIodGhpcyk7XG4gICAgICAgIHRoaXMucm91dGVyID0gbmV3IFJvdXRlcih0aGlzKTtcbiAgICAgICAgdGhpcy5hY3Rpb25EZXNjcmlwdG9yRmlsdGVycyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRBY3Rpb25EZXNjcmlwdG9yRmlsdGVycyk7XG4gICAgfVxuICAgIHN0YXRpYyBzdGFydChlbGVtZW50LCBzY2hlbWEpIHtcbiAgICAgICAgY29uc3QgYXBwbGljYXRpb24gPSBuZXcgdGhpcyhlbGVtZW50LCBzY2hlbWEpO1xuICAgICAgICBhcHBsaWNhdGlvbi5zdGFydCgpO1xuICAgICAgICByZXR1cm4gYXBwbGljYXRpb247XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0KCkge1xuICAgICAgICBhd2FpdCBkb21SZWFkeSgpO1xuICAgICAgICB0aGlzLmxvZ0RlYnVnQWN0aXZpdHkoXCJhcHBsaWNhdGlvblwiLCBcInN0YXJ0aW5nXCIpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoZXIuc3RhcnQoKTtcbiAgICAgICAgdGhpcy5yb3V0ZXIuc3RhcnQoKTtcbiAgICAgICAgdGhpcy5sb2dEZWJ1Z0FjdGl2aXR5KFwiYXBwbGljYXRpb25cIiwgXCJzdGFydFwiKTtcbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5sb2dEZWJ1Z0FjdGl2aXR5KFwiYXBwbGljYXRpb25cIiwgXCJzdG9wcGluZ1wiKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaGVyLnN0b3AoKTtcbiAgICAgICAgdGhpcy5yb3V0ZXIuc3RvcCgpO1xuICAgICAgICB0aGlzLmxvZ0RlYnVnQWN0aXZpdHkoXCJhcHBsaWNhdGlvblwiLCBcInN0b3BcIik7XG4gICAgfVxuICAgIHJlZ2lzdGVyKGlkZW50aWZpZXIsIGNvbnRyb2xsZXJDb25zdHJ1Y3Rvcikge1xuICAgICAgICB0aGlzLmxvYWQoeyBpZGVudGlmaWVyLCBjb250cm9sbGVyQ29uc3RydWN0b3IgfSk7XG4gICAgfVxuICAgIHJlZ2lzdGVyQWN0aW9uT3B0aW9uKG5hbWUsIGZpbHRlcikge1xuICAgICAgICB0aGlzLmFjdGlvbkRlc2NyaXB0b3JGaWx0ZXJzW25hbWVdID0gZmlsdGVyO1xuICAgIH1cbiAgICBsb2FkKGhlYWQsIC4uLnJlc3QpIHtcbiAgICAgICAgY29uc3QgZGVmaW5pdGlvbnMgPSBBcnJheS5pc0FycmF5KGhlYWQpID8gaGVhZCA6IFtoZWFkLCAuLi5yZXN0XTtcbiAgICAgICAgZGVmaW5pdGlvbnMuZm9yRWFjaCgoZGVmaW5pdGlvbikgPT4ge1xuICAgICAgICAgICAgaWYgKGRlZmluaXRpb24uY29udHJvbGxlckNvbnN0cnVjdG9yLnNob3VsZExvYWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJvdXRlci5sb2FkRGVmaW5pdGlvbihkZWZpbml0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHVubG9hZChoZWFkLCAuLi5yZXN0KSB7XG4gICAgICAgIGNvbnN0IGlkZW50aWZpZXJzID0gQXJyYXkuaXNBcnJheShoZWFkKSA/IGhlYWQgOiBbaGVhZCwgLi4ucmVzdF07XG4gICAgICAgIGlkZW50aWZpZXJzLmZvckVhY2goKGlkZW50aWZpZXIpID0+IHRoaXMucm91dGVyLnVubG9hZElkZW50aWZpZXIoaWRlbnRpZmllcikpO1xuICAgIH1cbiAgICBnZXQgY29udHJvbGxlcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvdXRlci5jb250ZXh0cy5tYXAoKGNvbnRleHQpID0+IGNvbnRleHQuY29udHJvbGxlcik7XG4gICAgfVxuICAgIGdldENvbnRyb2xsZXJGb3JFbGVtZW50QW5kSWRlbnRpZmllcihlbGVtZW50LCBpZGVudGlmaWVyKSB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLnJvdXRlci5nZXRDb250ZXh0Rm9yRWxlbWVudEFuZElkZW50aWZpZXIoZWxlbWVudCwgaWRlbnRpZmllcik7XG4gICAgICAgIHJldHVybiBjb250ZXh0ID8gY29udGV4dC5jb250cm9sbGVyIDogbnVsbDtcbiAgICB9XG4gICAgaGFuZGxlRXJyb3IoZXJyb3IsIG1lc3NhZ2UsIGRldGFpbCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGAlc1xcblxcbiVvXFxuXFxuJW9gLCBtZXNzYWdlLCBlcnJvciwgZGV0YWlsKTtcbiAgICAgICAgKF9hID0gd2luZG93Lm9uZXJyb3IpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKHdpbmRvdywgbWVzc2FnZSwgXCJcIiwgMCwgMCwgZXJyb3IpO1xuICAgIH1cbiAgICBsb2dGb3JtYXR0ZWRNZXNzYWdlKGlkZW50aWZpZXIsIGZ1bmN0aW9uTmFtZSwgZGV0YWlsID0ge30pIHtcbiAgICAgICAgZGV0YWlsID0gT2JqZWN0LmFzc2lnbih7IGFwcGxpY2F0aW9uOiB0aGlzIH0sIGRldGFpbCk7XG4gICAgICAgIHRoaXMubG9nZ2VyLmdyb3VwQ29sbGFwc2VkKGAke2lkZW50aWZpZXJ9ICMke2Z1bmN0aW9uTmFtZX1gKTtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKFwiZGV0YWlsczpcIiwgT2JqZWN0LmFzc2lnbih7fSwgZGV0YWlsKSk7XG4gICAgICAgIHRoaXMubG9nZ2VyLmdyb3VwRW5kKCk7XG4gICAgfVxufVxuZnVuY3Rpb24gZG9tUmVhZHkoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09IFwibG9hZGluZ1wiKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiByZXNvbHZlKCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIENsYXNzUHJvcGVydGllc0JsZXNzaW5nKGNvbnN0cnVjdG9yKSB7XG4gICAgY29uc3QgY2xhc3NlcyA9IHJlYWRJbmhlcml0YWJsZVN0YXRpY0FycmF5VmFsdWVzKGNvbnN0cnVjdG9yLCBcImNsYXNzZXNcIik7XG4gICAgcmV0dXJuIGNsYXNzZXMucmVkdWNlKChwcm9wZXJ0aWVzLCBjbGFzc0RlZmluaXRpb24pID0+IHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ocHJvcGVydGllcywgcHJvcGVydGllc0ZvckNsYXNzRGVmaW5pdGlvbihjbGFzc0RlZmluaXRpb24pKTtcbiAgICB9LCB7fSk7XG59XG5mdW5jdGlvbiBwcm9wZXJ0aWVzRm9yQ2xhc3NEZWZpbml0aW9uKGtleSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIFtgJHtrZXl9Q2xhc3NgXToge1xuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgY2xhc3NlcyB9ID0gdGhpcztcbiAgICAgICAgICAgICAgICBpZiAoY2xhc3Nlcy5oYXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2xhc3Nlcy5nZXQoa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IGNsYXNzZXMuZ2V0QXR0cmlidXRlTmFtZShrZXkpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgYXR0cmlidXRlIFwiJHthdHRyaWJ1dGV9XCJgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBbYCR7a2V5fUNsYXNzZXNgXToge1xuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNsYXNzZXMuZ2V0QWxsKGtleSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBbYGhhcyR7Y2FwaXRhbGl6ZShrZXkpfUNsYXNzYF06IHtcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jbGFzc2VzLmhhcyhrZXkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBPdXRsZXRQcm9wZXJ0aWVzQmxlc3NpbmcoY29uc3RydWN0b3IpIHtcbiAgICBjb25zdCBvdXRsZXRzID0gcmVhZEluaGVyaXRhYmxlU3RhdGljQXJyYXlWYWx1ZXMoY29uc3RydWN0b3IsIFwib3V0bGV0c1wiKTtcbiAgICByZXR1cm4gb3V0bGV0cy5yZWR1Y2UoKHByb3BlcnRpZXMsIG91dGxldERlZmluaXRpb24pID0+IHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ocHJvcGVydGllcywgcHJvcGVydGllc0Zvck91dGxldERlZmluaXRpb24ob3V0bGV0RGVmaW5pdGlvbikpO1xuICAgIH0sIHt9KTtcbn1cbmZ1bmN0aW9uIGdldE91dGxldENvbnRyb2xsZXIoY29udHJvbGxlciwgZWxlbWVudCwgaWRlbnRpZmllcikge1xuICAgIHJldHVybiBjb250cm9sbGVyLmFwcGxpY2F0aW9uLmdldENvbnRyb2xsZXJGb3JFbGVtZW50QW5kSWRlbnRpZmllcihlbGVtZW50LCBpZGVudGlmaWVyKTtcbn1cbmZ1bmN0aW9uIGdldENvbnRyb2xsZXJBbmRFbnN1cmVDb25uZWN0ZWRTY29wZShjb250cm9sbGVyLCBlbGVtZW50LCBvdXRsZXROYW1lKSB7XG4gICAgbGV0IG91dGxldENvbnRyb2xsZXIgPSBnZXRPdXRsZXRDb250cm9sbGVyKGNvbnRyb2xsZXIsIGVsZW1lbnQsIG91dGxldE5hbWUpO1xuICAgIGlmIChvdXRsZXRDb250cm9sbGVyKVxuICAgICAgICByZXR1cm4gb3V0bGV0Q29udHJvbGxlcjtcbiAgICBjb250cm9sbGVyLmFwcGxpY2F0aW9uLnJvdXRlci5wcm9wb3NlVG9Db25uZWN0U2NvcGVGb3JFbGVtZW50QW5kSWRlbnRpZmllcihlbGVtZW50LCBvdXRsZXROYW1lKTtcbiAgICBvdXRsZXRDb250cm9sbGVyID0gZ2V0T3V0bGV0Q29udHJvbGxlcihjb250cm9sbGVyLCBlbGVtZW50LCBvdXRsZXROYW1lKTtcbiAgICBpZiAob3V0bGV0Q29udHJvbGxlcilcbiAgICAgICAgcmV0dXJuIG91dGxldENvbnRyb2xsZXI7XG59XG5mdW5jdGlvbiBwcm9wZXJ0aWVzRm9yT3V0bGV0RGVmaW5pdGlvbihuYW1lKSB7XG4gICAgY29uc3QgY2FtZWxpemVkTmFtZSA9IG5hbWVzcGFjZUNhbWVsaXplKG5hbWUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIFtgJHtjYW1lbGl6ZWROYW1lfU91dGxldGBdOiB7XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0bGV0RWxlbWVudCA9IHRoaXMub3V0bGV0cy5maW5kKG5hbWUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdG9yID0gdGhpcy5vdXRsZXRzLmdldFNlbGVjdG9yRm9yT3V0bGV0TmFtZShuYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAob3V0bGV0RWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRsZXRDb250cm9sbGVyID0gZ2V0Q29udHJvbGxlckFuZEVuc3VyZUNvbm5lY3RlZFNjb3BlKHRoaXMsIG91dGxldEVsZW1lbnQsIG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3V0bGV0Q29udHJvbGxlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvdXRsZXRDb250cm9sbGVyO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBwcm92aWRlZCBvdXRsZXQgZWxlbWVudCBpcyBtaXNzaW5nIGFuIG91dGxldCBjb250cm9sbGVyIFwiJHtuYW1lfVwiIGluc3RhbmNlIGZvciBob3N0IGNvbnRyb2xsZXIgXCIke3RoaXMuaWRlbnRpZmllcn1cImApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3Npbmcgb3V0bGV0IGVsZW1lbnQgXCIke25hbWV9XCIgZm9yIGhvc3QgY29udHJvbGxlciBcIiR7dGhpcy5pZGVudGlmaWVyfVwiLiBTdGltdWx1cyBjb3VsZG4ndCBmaW5kIGEgbWF0Y2hpbmcgb3V0bGV0IGVsZW1lbnQgdXNpbmcgc2VsZWN0b3IgXCIke3NlbGVjdG9yfVwiLmApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgW2Ake2NhbWVsaXplZE5hbWV9T3V0bGV0c2BdOiB7XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0bGV0cyA9IHRoaXMub3V0bGV0cy5maW5kQWxsKG5hbWUpO1xuICAgICAgICAgICAgICAgIGlmIChvdXRsZXRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG91dGxldHNcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKG91dGxldEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG91dGxldENvbnRyb2xsZXIgPSBnZXRDb250cm9sbGVyQW5kRW5zdXJlQ29ubmVjdGVkU2NvcGUodGhpcywgb3V0bGV0RWxlbWVudCwgbmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3V0bGV0Q29udHJvbGxlcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3V0bGV0Q29udHJvbGxlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgVGhlIHByb3ZpZGVkIG91dGxldCBlbGVtZW50IGlzIG1pc3NpbmcgYW4gb3V0bGV0IGNvbnRyb2xsZXIgXCIke25hbWV9XCIgaW5zdGFuY2UgZm9yIGhvc3QgY29udHJvbGxlciBcIiR7dGhpcy5pZGVudGlmaWVyfVwiYCwgb3V0bGV0RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChjb250cm9sbGVyKSA9PiBjb250cm9sbGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgW2Ake2NhbWVsaXplZE5hbWV9T3V0bGV0RWxlbWVudGBdOiB7XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0bGV0RWxlbWVudCA9IHRoaXMub3V0bGV0cy5maW5kKG5hbWUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdG9yID0gdGhpcy5vdXRsZXRzLmdldFNlbGVjdG9yRm9yT3V0bGV0TmFtZShuYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAob3V0bGV0RWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3V0bGV0RWxlbWVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBvdXRsZXQgZWxlbWVudCBcIiR7bmFtZX1cIiBmb3IgaG9zdCBjb250cm9sbGVyIFwiJHt0aGlzLmlkZW50aWZpZXJ9XCIuIFN0aW11bHVzIGNvdWxkbid0IGZpbmQgYSBtYXRjaGluZyBvdXRsZXQgZWxlbWVudCB1c2luZyBzZWxlY3RvciBcIiR7c2VsZWN0b3J9XCIuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgW2Ake2NhbWVsaXplZE5hbWV9T3V0bGV0RWxlbWVudHNgXToge1xuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm91dGxldHMuZmluZEFsbChuYW1lKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIFtgaGFzJHtjYXBpdGFsaXplKGNhbWVsaXplZE5hbWUpfU91dGxldGBdOiB7XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub3V0bGV0cy5oYXMobmFtZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH07XG59XG5cbmZ1bmN0aW9uIFRhcmdldFByb3BlcnRpZXNCbGVzc2luZyhjb25zdHJ1Y3Rvcikge1xuICAgIGNvbnN0IHRhcmdldHMgPSByZWFkSW5oZXJpdGFibGVTdGF0aWNBcnJheVZhbHVlcyhjb25zdHJ1Y3RvciwgXCJ0YXJnZXRzXCIpO1xuICAgIHJldHVybiB0YXJnZXRzLnJlZHVjZSgocHJvcGVydGllcywgdGFyZ2V0RGVmaW5pdGlvbikgPT4ge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihwcm9wZXJ0aWVzLCBwcm9wZXJ0aWVzRm9yVGFyZ2V0RGVmaW5pdGlvbih0YXJnZXREZWZpbml0aW9uKSk7XG4gICAgfSwge30pO1xufVxuZnVuY3Rpb24gcHJvcGVydGllc0ZvclRhcmdldERlZmluaXRpb24obmFtZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIFtgJHtuYW1lfVRhcmdldGBdOiB7XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpcy50YXJnZXRzLmZpbmQobmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIHRhcmdldCBlbGVtZW50IFwiJHtuYW1lfVwiIGZvciBcIiR7dGhpcy5pZGVudGlmaWVyfVwiIGNvbnRyb2xsZXJgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBbYCR7bmFtZX1UYXJnZXRzYF06IHtcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50YXJnZXRzLmZpbmRBbGwobmFtZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBbYGhhcyR7Y2FwaXRhbGl6ZShuYW1lKX1UYXJnZXRgXToge1xuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRhcmdldHMuaGFzKG5hbWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBWYWx1ZVByb3BlcnRpZXNCbGVzc2luZyhjb25zdHJ1Y3Rvcikge1xuICAgIGNvbnN0IHZhbHVlRGVmaW5pdGlvblBhaXJzID0gcmVhZEluaGVyaXRhYmxlU3RhdGljT2JqZWN0UGFpcnMoY29uc3RydWN0b3IsIFwidmFsdWVzXCIpO1xuICAgIGNvbnN0IHByb3BlcnR5RGVzY3JpcHRvck1hcCA9IHtcbiAgICAgICAgdmFsdWVEZXNjcmlwdG9yTWFwOiB7XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlRGVmaW5pdGlvblBhaXJzLnJlZHVjZSgocmVzdWx0LCB2YWx1ZURlZmluaXRpb25QYWlyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlRGVzY3JpcHRvciA9IHBhcnNlVmFsdWVEZWZpbml0aW9uUGFpcih2YWx1ZURlZmluaXRpb25QYWlyLCB0aGlzLmlkZW50aWZpZXIpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVOYW1lID0gdGhpcy5kYXRhLmdldEF0dHJpYnV0ZU5hbWVGb3JLZXkodmFsdWVEZXNjcmlwdG9yLmtleSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHJlc3VsdCwgeyBbYXR0cmlidXRlTmFtZV06IHZhbHVlRGVzY3JpcHRvciB9KTtcbiAgICAgICAgICAgICAgICB9LCB7fSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH07XG4gICAgcmV0dXJuIHZhbHVlRGVmaW5pdGlvblBhaXJzLnJlZHVjZSgocHJvcGVydGllcywgdmFsdWVEZWZpbml0aW9uUGFpcikgPT4ge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihwcm9wZXJ0aWVzLCBwcm9wZXJ0aWVzRm9yVmFsdWVEZWZpbml0aW9uUGFpcih2YWx1ZURlZmluaXRpb25QYWlyKSk7XG4gICAgfSwgcHJvcGVydHlEZXNjcmlwdG9yTWFwKTtcbn1cbmZ1bmN0aW9uIHByb3BlcnRpZXNGb3JWYWx1ZURlZmluaXRpb25QYWlyKHZhbHVlRGVmaW5pdGlvblBhaXIsIGNvbnRyb2xsZXIpIHtcbiAgICBjb25zdCBkZWZpbml0aW9uID0gcGFyc2VWYWx1ZURlZmluaXRpb25QYWlyKHZhbHVlRGVmaW5pdGlvblBhaXIsIGNvbnRyb2xsZXIpO1xuICAgIGNvbnN0IHsga2V5LCBuYW1lLCByZWFkZXI6IHJlYWQsIHdyaXRlcjogd3JpdGUgfSA9IGRlZmluaXRpb247XG4gICAgcmV0dXJuIHtcbiAgICAgICAgW25hbWVdOiB7XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmRhdGEuZ2V0KGtleSk7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWFkKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZpbml0aW9uLmRlZmF1bHRWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0KHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhLmRlbGV0ZShrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhLnNldChrZXksIHdyaXRlKHZhbHVlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgW2BoYXMke2NhcGl0YWxpemUobmFtZSl9YF06IHtcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmhhcyhrZXkpIHx8IGRlZmluaXRpb24uaGFzQ3VzdG9tRGVmYXVsdFZhbHVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZnVuY3Rpb24gcGFyc2VWYWx1ZURlZmluaXRpb25QYWlyKFt0b2tlbiwgdHlwZURlZmluaXRpb25dLCBjb250cm9sbGVyKSB7XG4gICAgcmV0dXJuIHZhbHVlRGVzY3JpcHRvckZvclRva2VuQW5kVHlwZURlZmluaXRpb24oe1xuICAgICAgICBjb250cm9sbGVyLFxuICAgICAgICB0b2tlbixcbiAgICAgICAgdHlwZURlZmluaXRpb24sXG4gICAgfSk7XG59XG5mdW5jdGlvbiBwYXJzZVZhbHVlVHlwZUNvbnN0YW50KGNvbnN0YW50KSB7XG4gICAgc3dpdGNoIChjb25zdGFudCkge1xuICAgICAgICBjYXNlIEFycmF5OlxuICAgICAgICAgICAgcmV0dXJuIFwiYXJyYXlcIjtcbiAgICAgICAgY2FzZSBCb29sZWFuOlxuICAgICAgICAgICAgcmV0dXJuIFwiYm9vbGVhblwiO1xuICAgICAgICBjYXNlIE51bWJlcjpcbiAgICAgICAgICAgIHJldHVybiBcIm51bWJlclwiO1xuICAgICAgICBjYXNlIE9iamVjdDpcbiAgICAgICAgICAgIHJldHVybiBcIm9iamVjdFwiO1xuICAgICAgICBjYXNlIFN0cmluZzpcbiAgICAgICAgICAgIHJldHVybiBcInN0cmluZ1wiO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHBhcnNlVmFsdWVUeXBlRGVmYXVsdChkZWZhdWx0VmFsdWUpIHtcbiAgICBzd2l0Y2ggKHR5cGVvZiBkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgICAgIHJldHVybiBcImJvb2xlYW5cIjtcbiAgICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICAgICAgcmV0dXJuIFwibnVtYmVyXCI7XG4gICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgIHJldHVybiBcInN0cmluZ1wiO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShkZWZhdWx0VmFsdWUpKVxuICAgICAgICByZXR1cm4gXCJhcnJheVwiO1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZGVmYXVsdFZhbHVlKSA9PT0gXCJbb2JqZWN0IE9iamVjdF1cIilcbiAgICAgICAgcmV0dXJuIFwib2JqZWN0XCI7XG59XG5mdW5jdGlvbiBwYXJzZVZhbHVlVHlwZU9iamVjdChwYXlsb2FkKSB7XG4gICAgY29uc3QgeyBjb250cm9sbGVyLCB0b2tlbiwgdHlwZU9iamVjdCB9ID0gcGF5bG9hZDtcbiAgICBjb25zdCBoYXNUeXBlID0gaXNTb21ldGhpbmcodHlwZU9iamVjdC50eXBlKTtcbiAgICBjb25zdCBoYXNEZWZhdWx0ID0gaXNTb21ldGhpbmcodHlwZU9iamVjdC5kZWZhdWx0KTtcbiAgICBjb25zdCBmdWxsT2JqZWN0ID0gaGFzVHlwZSAmJiBoYXNEZWZhdWx0O1xuICAgIGNvbnN0IG9ubHlUeXBlID0gaGFzVHlwZSAmJiAhaGFzRGVmYXVsdDtcbiAgICBjb25zdCBvbmx5RGVmYXVsdCA9ICFoYXNUeXBlICYmIGhhc0RlZmF1bHQ7XG4gICAgY29uc3QgdHlwZUZyb21PYmplY3QgPSBwYXJzZVZhbHVlVHlwZUNvbnN0YW50KHR5cGVPYmplY3QudHlwZSk7XG4gICAgY29uc3QgdHlwZUZyb21EZWZhdWx0VmFsdWUgPSBwYXJzZVZhbHVlVHlwZURlZmF1bHQocGF5bG9hZC50eXBlT2JqZWN0LmRlZmF1bHQpO1xuICAgIGlmIChvbmx5VHlwZSlcbiAgICAgICAgcmV0dXJuIHR5cGVGcm9tT2JqZWN0O1xuICAgIGlmIChvbmx5RGVmYXVsdClcbiAgICAgICAgcmV0dXJuIHR5cGVGcm9tRGVmYXVsdFZhbHVlO1xuICAgIGlmICh0eXBlRnJvbU9iamVjdCAhPT0gdHlwZUZyb21EZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgY29uc3QgcHJvcGVydHlQYXRoID0gY29udHJvbGxlciA/IGAke2NvbnRyb2xsZXJ9LiR7dG9rZW59YCA6IHRva2VuO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBzcGVjaWZpZWQgZGVmYXVsdCB2YWx1ZSBmb3IgdGhlIFN0aW11bHVzIFZhbHVlIFwiJHtwcm9wZXJ0eVBhdGh9XCIgbXVzdCBtYXRjaCB0aGUgZGVmaW5lZCB0eXBlIFwiJHt0eXBlRnJvbU9iamVjdH1cIi4gVGhlIHByb3ZpZGVkIGRlZmF1bHQgdmFsdWUgb2YgXCIke3R5cGVPYmplY3QuZGVmYXVsdH1cIiBpcyBvZiB0eXBlIFwiJHt0eXBlRnJvbURlZmF1bHRWYWx1ZX1cIi5gKTtcbiAgICB9XG4gICAgaWYgKGZ1bGxPYmplY3QpXG4gICAgICAgIHJldHVybiB0eXBlRnJvbU9iamVjdDtcbn1cbmZ1bmN0aW9uIHBhcnNlVmFsdWVUeXBlRGVmaW5pdGlvbihwYXlsb2FkKSB7XG4gICAgY29uc3QgeyBjb250cm9sbGVyLCB0b2tlbiwgdHlwZURlZmluaXRpb24gfSA9IHBheWxvYWQ7XG4gICAgY29uc3QgdHlwZU9iamVjdCA9IHsgY29udHJvbGxlciwgdG9rZW4sIHR5cGVPYmplY3Q6IHR5cGVEZWZpbml0aW9uIH07XG4gICAgY29uc3QgdHlwZUZyb21PYmplY3QgPSBwYXJzZVZhbHVlVHlwZU9iamVjdCh0eXBlT2JqZWN0KTtcbiAgICBjb25zdCB0eXBlRnJvbURlZmF1bHRWYWx1ZSA9IHBhcnNlVmFsdWVUeXBlRGVmYXVsdCh0eXBlRGVmaW5pdGlvbik7XG4gICAgY29uc3QgdHlwZUZyb21Db25zdGFudCA9IHBhcnNlVmFsdWVUeXBlQ29uc3RhbnQodHlwZURlZmluaXRpb24pO1xuICAgIGNvbnN0IHR5cGUgPSB0eXBlRnJvbU9iamVjdCB8fCB0eXBlRnJvbURlZmF1bHRWYWx1ZSB8fCB0eXBlRnJvbUNvbnN0YW50O1xuICAgIGlmICh0eXBlKVxuICAgICAgICByZXR1cm4gdHlwZTtcbiAgICBjb25zdCBwcm9wZXJ0eVBhdGggPSBjb250cm9sbGVyID8gYCR7Y29udHJvbGxlcn0uJHt0eXBlRGVmaW5pdGlvbn1gIDogdG9rZW47XG4gICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHZhbHVlIHR5cGUgXCIke3Byb3BlcnR5UGF0aH1cIiBmb3IgXCIke3Rva2VufVwiIHZhbHVlYCk7XG59XG5mdW5jdGlvbiBkZWZhdWx0VmFsdWVGb3JEZWZpbml0aW9uKHR5cGVEZWZpbml0aW9uKSB7XG4gICAgY29uc3QgY29uc3RhbnQgPSBwYXJzZVZhbHVlVHlwZUNvbnN0YW50KHR5cGVEZWZpbml0aW9uKTtcbiAgICBpZiAoY29uc3RhbnQpXG4gICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWVzQnlUeXBlW2NvbnN0YW50XTtcbiAgICBjb25zdCBoYXNEZWZhdWx0ID0gaGFzUHJvcGVydHkodHlwZURlZmluaXRpb24sIFwiZGVmYXVsdFwiKTtcbiAgICBjb25zdCBoYXNUeXBlID0gaGFzUHJvcGVydHkodHlwZURlZmluaXRpb24sIFwidHlwZVwiKTtcbiAgICBjb25zdCB0eXBlT2JqZWN0ID0gdHlwZURlZmluaXRpb247XG4gICAgaWYgKGhhc0RlZmF1bHQpXG4gICAgICAgIHJldHVybiB0eXBlT2JqZWN0LmRlZmF1bHQ7XG4gICAgaWYgKGhhc1R5cGUpIHtcbiAgICAgICAgY29uc3QgeyB0eXBlIH0gPSB0eXBlT2JqZWN0O1xuICAgICAgICBjb25zdCBjb25zdGFudEZyb21UeXBlID0gcGFyc2VWYWx1ZVR5cGVDb25zdGFudCh0eXBlKTtcbiAgICAgICAgaWYgKGNvbnN0YW50RnJvbVR5cGUpXG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlc0J5VHlwZVtjb25zdGFudEZyb21UeXBlXTtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGVEZWZpbml0aW9uO1xufVxuZnVuY3Rpb24gdmFsdWVEZXNjcmlwdG9yRm9yVG9rZW5BbmRUeXBlRGVmaW5pdGlvbihwYXlsb2FkKSB7XG4gICAgY29uc3QgeyB0b2tlbiwgdHlwZURlZmluaXRpb24gfSA9IHBheWxvYWQ7XG4gICAgY29uc3Qga2V5ID0gYCR7ZGFzaGVyaXplKHRva2VuKX0tdmFsdWVgO1xuICAgIGNvbnN0IHR5cGUgPSBwYXJzZVZhbHVlVHlwZURlZmluaXRpb24ocGF5bG9hZCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZSxcbiAgICAgICAga2V5LFxuICAgICAgICBuYW1lOiBjYW1lbGl6ZShrZXkpLFxuICAgICAgICBnZXQgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZUZvckRlZmluaXRpb24odHlwZURlZmluaXRpb24pO1xuICAgICAgICB9LFxuICAgICAgICBnZXQgaGFzQ3VzdG9tRGVmYXVsdFZhbHVlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlVmFsdWVUeXBlRGVmYXVsdCh0eXBlRGVmaW5pdGlvbikgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgfSxcbiAgICAgICAgcmVhZGVyOiByZWFkZXJzW3R5cGVdLFxuICAgICAgICB3cml0ZXI6IHdyaXRlcnNbdHlwZV0gfHwgd3JpdGVycy5kZWZhdWx0LFxuICAgIH07XG59XG5jb25zdCBkZWZhdWx0VmFsdWVzQnlUeXBlID0ge1xuICAgIGdldCBhcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH0sXG4gICAgYm9vbGVhbjogZmFsc2UsXG4gICAgbnVtYmVyOiAwLFxuICAgIGdldCBvYmplY3QoKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9LFxuICAgIHN0cmluZzogXCJcIixcbn07XG5jb25zdCByZWFkZXJzID0ge1xuICAgIGFycmF5KHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGFycmF5ID0gSlNPTi5wYXJzZSh2YWx1ZSk7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShhcnJheSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYGV4cGVjdGVkIHZhbHVlIG9mIHR5cGUgXCJhcnJheVwiIGJ1dCBpbnN0ZWFkIGdvdCB2YWx1ZSBcIiR7dmFsdWV9XCIgb2YgdHlwZSBcIiR7cGFyc2VWYWx1ZVR5cGVEZWZhdWx0KGFycmF5KX1cImApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJheTtcbiAgICB9LFxuICAgIGJvb2xlYW4odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuICEodmFsdWUgPT0gXCIwXCIgfHwgU3RyaW5nKHZhbHVlKS50b0xvd2VyQ2FzZSgpID09IFwiZmFsc2VcIik7XG4gICAgfSxcbiAgICBudW1iZXIodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIE51bWJlcih2YWx1ZS5yZXBsYWNlKC9fL2csIFwiXCIpKTtcbiAgICB9LFxuICAgIG9iamVjdCh2YWx1ZSkge1xuICAgICAgICBjb25zdCBvYmplY3QgPSBKU09OLnBhcnNlKHZhbHVlKTtcbiAgICAgICAgaWYgKG9iamVjdCA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqZWN0ICE9IFwib2JqZWN0XCIgfHwgQXJyYXkuaXNBcnJheShvYmplY3QpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBleHBlY3RlZCB2YWx1ZSBvZiB0eXBlIFwib2JqZWN0XCIgYnV0IGluc3RlYWQgZ290IHZhbHVlIFwiJHt2YWx1ZX1cIiBvZiB0eXBlIFwiJHtwYXJzZVZhbHVlVHlwZURlZmF1bHQob2JqZWN0KX1cImApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfSxcbiAgICBzdHJpbmcodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG59O1xuY29uc3Qgd3JpdGVycyA9IHtcbiAgICBkZWZhdWx0OiB3cml0ZVN0cmluZyxcbiAgICBhcnJheTogd3JpdGVKU09OLFxuICAgIG9iamVjdDogd3JpdGVKU09OLFxufTtcbmZ1bmN0aW9uIHdyaXRlSlNPTih2YWx1ZSkge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG59XG5mdW5jdGlvbiB3cml0ZVN0cmluZyh2YWx1ZSkge1xuICAgIHJldHVybiBgJHt2YWx1ZX1gO1xufVxuXG5jbGFzcyBDb250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgc2hvdWxkTG9hZCgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHN0YXRpYyBhZnRlckxvYWQoX2lkZW50aWZpZXIsIF9hcHBsaWNhdGlvbikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGdldCBhcHBsaWNhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5hcHBsaWNhdGlvbjtcbiAgICB9XG4gICAgZ2V0IHNjb3BlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0LnNjb3BlO1xuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGUuZWxlbWVudDtcbiAgICB9XG4gICAgZ2V0IGlkZW50aWZpZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3BlLmlkZW50aWZpZXI7XG4gICAgfVxuICAgIGdldCB0YXJnZXRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY29wZS50YXJnZXRzO1xuICAgIH1cbiAgICBnZXQgb3V0bGV0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGUub3V0bGV0cztcbiAgICB9XG4gICAgZ2V0IGNsYXNzZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3BlLmNsYXNzZXM7XG4gICAgfVxuICAgIGdldCBkYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY29wZS5kYXRhO1xuICAgIH1cbiAgICBpbml0aWFsaXplKCkge1xuICAgIH1cbiAgICBjb25uZWN0KCkge1xuICAgIH1cbiAgICBkaXNjb25uZWN0KCkge1xuICAgIH1cbiAgICBkaXNwYXRjaChldmVudE5hbWUsIHsgdGFyZ2V0ID0gdGhpcy5lbGVtZW50LCBkZXRhaWwgPSB7fSwgcHJlZml4ID0gdGhpcy5pZGVudGlmaWVyLCBidWJibGVzID0gdHJ1ZSwgY2FuY2VsYWJsZSA9IHRydWUsIH0gPSB7fSkge1xuICAgICAgICBjb25zdCB0eXBlID0gcHJlZml4ID8gYCR7cHJlZml4fToke2V2ZW50TmFtZX1gIDogZXZlbnROYW1lO1xuICAgICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCh0eXBlLCB7IGRldGFpbCwgYnViYmxlcywgY2FuY2VsYWJsZSB9KTtcbiAgICAgICAgdGFyZ2V0LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICByZXR1cm4gZXZlbnQ7XG4gICAgfVxufVxuQ29udHJvbGxlci5ibGVzc2luZ3MgPSBbXG4gICAgQ2xhc3NQcm9wZXJ0aWVzQmxlc3NpbmcsXG4gICAgVGFyZ2V0UHJvcGVydGllc0JsZXNzaW5nLFxuICAgIFZhbHVlUHJvcGVydGllc0JsZXNzaW5nLFxuICAgIE91dGxldFByb3BlcnRpZXNCbGVzc2luZyxcbl07XG5Db250cm9sbGVyLnRhcmdldHMgPSBbXTtcbkNvbnRyb2xsZXIub3V0bGV0cyA9IFtdO1xuQ29udHJvbGxlci52YWx1ZXMgPSB7fTtcblxuZXhwb3J0IHsgQXBwbGljYXRpb24sIEF0dHJpYnV0ZU9ic2VydmVyLCBDb250ZXh0LCBDb250cm9sbGVyLCBFbGVtZW50T2JzZXJ2ZXIsIEluZGV4ZWRNdWx0aW1hcCwgTXVsdGltYXAsIFNlbGVjdG9yT2JzZXJ2ZXIsIFN0cmluZ01hcE9ic2VydmVyLCBUb2tlbkxpc3RPYnNlcnZlciwgVmFsdWVMaXN0T2JzZXJ2ZXIsIGFkZCwgZGVmYXVsdFNjaGVtYSwgZGVsLCBmZXRjaCwgcHJ1bmUgfTtcbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbi8vIHN0aW11bHVzLXZhbGlkYXRvcjogc3lzdGVtLWNvbnRyb2xsZXJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcImxpZ2h0SWNvblwiLCBcImRhcmtJY29uXCJdXG4gIHN0YXRpYyB2YWx1ZXMgPSB7IHN0b3JhZ2VLZXk6IFN0cmluZyB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBsaWdodEljb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGFya0ljb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc3RvcmFnZUtleVZhbHVlOiBzdHJpbmdcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIHRoaXMuaW5pdGlhbGl6ZVRoZW1lKClcbiAgfVxuXG4gIHRvZ2dsZSgpOiB2b2lkIHtcbiAgICBjb25zdCBpc0RhcmsgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkYXJrJylcbiAgICBjb25zdCBuZXdJc0RhcmsgPSAhaXNEYXJrXG4gICAgXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5zdG9yYWdlS2V5VmFsdWUsIEpTT04uc3RyaW5naWZ5KG5ld0lzRGFyaykpXG4gICAgdGhpcy51cGRhdGVUaGVtZShuZXdJc0RhcmspXG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemVUaGVtZSgpOiB2b2lkIHtcbiAgICBjb25zdCBzYXZlZElzRGFyayA9IHRoaXMuZ2V0U2F2ZWRUaGVtZSgpXG4gICAgdGhpcy51cGRhdGVUaGVtZShzYXZlZElzRGFyaylcbiAgfVxuXG4gIHByaXZhdGUgZ2V0U2F2ZWRUaGVtZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLnN0b3JhZ2VLZXlWYWx1ZSkgfHwgJ2ZhbHNlJylcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlVGhlbWUoaXNEYXJrOiBib29sZWFuKTogdm9pZCB7XG4gICAgaWYgKGlzRGFyaykge1xuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2RhcmsnKVxuICAgICAgdGhpcy5saWdodEljb25UYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgIHRoaXMuZGFya0ljb25UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2RhcmsnKVxuICAgICAgdGhpcy5saWdodEljb25UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgIHRoaXMuZGFya0ljb25UYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSAnQGhvdHdpcmVkL3N0aW11bHVzJ1xuXG4vKipcbiAqIERyb3Bkb3duIENvbnRyb2xsZXJcbiAqXG4gKiBBIHZlcnNhdGlsZSBjb250cm9sbGVyIGZvciB0b2dnbGluZyB2aXNpYmlsaXR5IG9mIGRyb3Bkb3duIG1lbnVzLCBzaWRlYmFycywgYW5kIG1vZGFscy5cbiAqXG4gKiBVc2FnZTpcbiAqICAgPGRpdiBkYXRhLWNvbnRyb2xsZXI9XCJkcm9wZG93blwiPlxuICogICAgIDxidXR0b24gZGF0YS1hY3Rpb249XCJjbGljay0+ZHJvcGRvd24jdG9nZ2xlXCI+VG9nZ2xlPC9idXR0b24+XG4gKiAgICAgPGRpdiBkYXRhLWRyb3Bkb3duLXRhcmdldD1cIm1lbnVcIiBjbGFzcz1cImhpZGRlblwiPlxuICogICAgICAgTWVudSBjb250ZW50Li4uXG4gKiAgICAgPC9kaXY+XG4gKiAgIDwvZGl2PlxuICpcbiAqIFRhcmdldHM6XG4gKiAgIC0gbWVudSAocmVxdWlyZWQpOiBUaGUgZWxlbWVudCB0byBzaG93L2hpZGVcbiAqICAgLSB0cmlnZ2VyIChvcHRpb25hbCk6IFRoZSBidXR0b24gdGhhdCB0cmlnZ2VycyB0aGUgZHJvcGRvd24gKGdldHMgYXJpYS1leHBhbmRlZCBhdHRyaWJ1dGUpXG4gKlxuICogVmFsdWVzOlxuICogICAtIGNsb3NlT25DbGlja091dHNpZGUgKGJvb2xlYW4sIGRlZmF1bHQ6IHRydWUpOiBBdXRvLWNsb3NlIHdoZW4gY2xpY2tpbmcgb3V0c2lkZVxuICpcbiAqIEFjdGlvbnM6XG4gKiAgIC0gdG9nZ2xlOiBUb2dnbGUgbWVudSB2aXNpYmlsaXR5XG4gKiAgIC0gb3BlbjogU2hvdyBtZW51XG4gKiAgIC0gY2xvc2U6IEhpZGUgbWVudVxuICpcbiAqIEV4YW1wbGVzOlxuICogICAvLyBVc2VyIGRyb3Bkb3duIHdpdGggYXV0by1jbG9zZVxuICogICA8ZGl2IGRhdGEtY29udHJvbGxlcj1cImRyb3Bkb3duXCI+XG4gKiAgICAgPGJ1dHRvbiBkYXRhLWRyb3Bkb3duLXRhcmdldD1cInRyaWdnZXJcIiBkYXRhLWFjdGlvbj1cImNsaWNrLT5kcm9wZG93biN0b2dnbGVcIj5NZW51PC9idXR0b24+XG4gKiAgICAgPGRpdiBkYXRhLWRyb3Bkb3duLXRhcmdldD1cIm1lbnVcIiBjbGFzcz1cImhpZGRlblwiPi4uLjwvZGl2PlxuICogICA8L2Rpdj5cbiAqXG4gKiAgIC8vIE1vYmlsZSBzaWRlYmFyIHdpdGhvdXQgYXV0by1jbG9zZVxuICogICA8ZGl2IGRhdGEtY29udHJvbGxlcj1cImRyb3Bkb3duXCIgZGF0YS1kcm9wZG93bi1jbG9zZS1vbi1jbGljay1vdXRzaWRlLXZhbHVlPVwiZmFsc2VcIj5cbiAqICAgICA8YnV0dG9uIGRhdGEtYWN0aW9uPVwiY2xpY2stPmRyb3Bkb3duI3RvZ2dsZVwiPlx1MjYzMDwvYnV0dG9uPlxuICogICAgIDxkaXYgZGF0YS1kcm9wZG93bi10YXJnZXQ9XCJtZW51XCIgY2xhc3M9XCJoaWRkZW5cIj4uLi48L2Rpdj5cbiAqICAgPC9kaXY+XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFsnbWVudScsICd0cmlnZ2VyJ11cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBjbG9zZU9uQ2xpY2tPdXRzaWRlOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IHRydWUgfVxuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBtZW51VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRyaWdnZXJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzVHJpZ2dlclRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGNsb3NlT25DbGlja091dHNpZGVWYWx1ZTogYm9vbGVhblxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY2xvc2VPbkNsaWNrT3V0c2lkZVZhbHVlKSB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xpY2tPdXRzaWRlLmJpbmQodGhpcykpXG4gICAgfVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jbG9zZU9uQ2xpY2tPdXRzaWRlVmFsdWUpIHtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbGlja091dHNpZGUuYmluZCh0aGlzKSlcbiAgICB9XG4gIH1cblxuICB0b2dnbGUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgaXNIaWRkZW4gPSB0aGlzLm1lbnVUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKVxuICAgIGlmIChpc0hpZGRlbikge1xuICAgICAgdGhpcy5vcGVuKGV2ZW50KVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNsb3NlKGV2ZW50KVxuICAgIH1cbiAgfVxuXG4gIG9wZW4oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5tZW51VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgaWYgKHRoaXMuaGFzVHJpZ2dlclRhcmdldCkge1xuICAgICAgdGhpcy50cmlnZ2VyVGFyZ2V0LnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICd0cnVlJylcbiAgICB9XG4gIH1cblxuICBjbG9zZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLm1lbnVUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBpZiAodGhpcy5oYXNUcmlnZ2VyVGFyZ2V0KSB7XG4gICAgICB0aGlzLnRyaWdnZXJUYXJnZXQuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJylcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNsaWNrT3V0c2lkZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuZWxlbWVudC5jb250YWlucyhldmVudC50YXJnZXQgYXMgTm9kZSkpIHtcbiAgICAgIHRoaXMuY2xvc2UoZXZlbnQpXG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG4vLyBTREsgSW50ZWdyYXRpb24gQ29udHJvbGxlclxuLy8gSGFuZGxlcyBTREsgYXZhaWxhYmlsaXR5IGRldGVjdGlvbiBhbmQgY29tbXVuaWNhdGlvbiB3aXRoIGV4dGVybmFsIGRldmVsb3BtZW50IHRvb2xzXG4vLyBzdGltdWx1cy12YWxpZGF0b3I6IHN5c3RlbS1jb250cm9sbGVyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJzZGtCdXR0b25cIlxuICBdXG5cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBtZXNzYWdlOiBTdHJpbmcsXG4gICAgYWN0aW9uOiBTdHJpbmdcbiAgfVxuXG4gIC8vIERlY2xhcmUgdGFyZ2V0cyBhbmQgdmFsdWVzXG4gIGRlY2xhcmUgcmVhZG9ubHkgc2RrQnV0dG9uVGFyZ2V0OiBIVE1MQnV0dG9uRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1Nka0J1dHRvblRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IG1lc3NhZ2VWYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgcmVhZG9ubHkgYWN0aW9uVmFsdWU6IHN0cmluZ1xuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgLy8gQ2hlY2sgU0RLIGF2YWlsYWJpbGl0eSBhbmQgc2hvdyBTREsgYnV0dG9ucyBpZiBhdmFpbGFibGVcbiAgICB0aGlzLmNoZWNrU0RLQXZhaWxhYmlsaXR5KClcbiAgfVxuXG4gIC8vIFNlbmQgbWVzc2FnZSB0byBjaGF0Ym94IChTREsgaW50ZWdyYXRpb24pXG4gIHNlbmRUb0NoYXRib3goKTogdm9pZCB7XG4gICAgaWYgKCF3aW5kb3cuc2RrVXRpbHMgfHwgIXdpbmRvdy5zZGtVdGlscy5zZW5kTWVzc2FnZSkge1xuICAgICAgY29uc29sZS53YXJuKCdTREsgbm90IGF2YWlsYWJsZScpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBtZXNzYWdlID0gdGhpcy5tZXNzYWdlVmFsdWUgfHwgdGhpcy5nZW5lcmF0ZURlZmF1bHRNZXNzYWdlKClcbiAgICB3aW5kb3cuc2RrVXRpbHMuc2VuZE1lc3NhZ2UobWVzc2FnZSlcbiAgfVxuXG4gIC8vIFNlbmQgZXJyb3IgdG8gY2hhdGJveCBmb3IgZml4aW5nXG4gIHNlbmRFcnJvclRvQ2hhdGJveCgpOiB2b2lkIHtcbiAgICBpZiAoIXdpbmRvdy5zZGtVdGlscyB8fCAhd2luZG93LnNka1V0aWxzLnNlbmRFcnJvckZvckZpeCkge1xuICAgICAgY29uc29sZS53YXJuKCdTREsgbm90IGF2YWlsYWJsZScpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBhY3Rpb24gPSB0aGlzLmFjdGlvblZhbHVlIHx8ICdzZW5kRXJyb3JGb3JGaXgnXG4gICAgaWYgKGFjdGlvbiA9PT0gJ3NlbmRFcnJvckZvckZpeCcpIHtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHRoaXMubWVzc2FnZVZhbHVlIHx8ICdVbmtub3duIGVycm9yJ1xuICAgICAgd2luZG93LnNka1V0aWxzLnNlbmRFcnJvckZvckZpeCh7IGVycm9yTWVzc2FnZSB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gdGhpcy5tZXNzYWdlVmFsdWUgfHwgdGhpcy5nZW5lcmF0ZURlZmF1bHRNZXNzYWdlKClcbiAgICAgIHdpbmRvdy5zZGtVdGlscy5zZW5kTWVzc2FnZShtZXNzYWdlKVxuICAgIH1cbiAgfVxuXG4gIC8vIENoZWNrIFNESyBhdmFpbGFiaWxpdHkgYW5kIHNob3cvaGlkZSBTREsgYnV0dG9uc1xuICBwcml2YXRlIGNoZWNrU0RLQXZhaWxhYmlsaXR5KCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNTZGtCdXR0b25UYXJnZXQpIHJldHVyblxuXG4gICAgY29uc3QgY2hlY2tBbmRTaG93ID0gKCkgPT4ge1xuICAgICAgaWYgKHdpbmRvdy5pc1NES0F2YWlsYWJsZSAmJiB3aW5kb3cuaXNTREtBdmFpbGFibGUoKSkge1xuICAgICAgICB0aGlzLnNka0J1dHRvblRhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgLy8gSW5pdGlhbCBjaGVja1xuICAgIGlmICghY2hlY2tBbmRTaG93KCkpIHtcbiAgICAgIC8vIFJldHJ5IGFmdGVyIDEgc2Vjb25kIChpbiBjYXNlIFNESyBpcyBsb2FkaW5nKVxuICAgICAgc2V0VGltZW91dChjaGVja0FuZFNob3csIDEwMDApXG4gICAgICAvLyBGaW5hbCByZXRyeSBhZnRlciAyLjggc2Vjb25kc1xuICAgICAgc2V0VGltZW91dChjaGVja0FuZFNob3csIDI4MDApXG4gICAgfVxuICB9XG5cbiAgLy8gR2VuZXJhdGUgZGVmYXVsdCBtZXNzYWdlIGZvciBTREtcbiAgcHJpdmF0ZSBnZW5lcmF0ZURlZmF1bHRNZXNzYWdlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgdXJsID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnN1YnN0cmluZygxKVxuICAgIHJldHVybiBgUGxlYXNlIGhlbHAgbWUgd2l0aCB0aGlzIHBhZ2U6ICR7dXJsfVxuXG5VUkw6ICR7d2luZG93LmxvY2F0aW9uLmhyZWZ9XG5QYXRoOiAke3VybH1cblxuSSBuZWVkIGFzc2lzdGFuY2Ugd2l0aCB0aGlzIHBhZ2UuYFxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG4vKlxuICogQ2xpcGJvYXJkIENvbnRyb2xsZXJcbiAqXG4gKiBVc2FnZTpcbiAqIDxkaXYgZGF0YS1jb250cm9sbGVyPVwiY2xpcGJvYXJkXCI+XG4gKiAgIDxpbnB1dCBkYXRhLWNsaXBib2FyZC10YXJnZXQ9XCJzb3VyY2VcIiB2YWx1ZT1cInRleHQgdG8gY29weVwiPlxuICogICA8YnV0dG9uIGRhdGEtYWN0aW9uPVwiY2xpY2stPmNsaXBib2FyZCNjb3B5XCI+Q29weTwvYnV0dG9uPlxuICogPC9kaXY+XG4gKi9cbi8vIHN0aW11bHVzLXZhbGlkYXRvcjogc3lzdGVtLWNvbnRyb2xsZXJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcInNvdXJjZVwiXVxuXG4gIC8vIERlY2xhcmUgdGFyZ2V0c1xuICBkZWNsYXJlIHJlYWRvbmx5IHNvdXJjZVRhcmdldDogSFRNTElucHV0RWxlbWVudFxuXG4gIC8vIENvcHkgY29udGVudCB0byBjbGlwYm9hcmRcbiAgY29weShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCB0ZXh0VG9Db3B5ID0gdGhpcy5zb3VyY2VUYXJnZXQudmFsdWVcblxuICAgIGlmICghdGV4dFRvQ29weSkge1xuICAgICAgY29uc29sZS5lcnJvcignTm8gdGV4dCB0byBjb3B5IGZvdW5kJylcbiAgICAgIHRoaXMuc2hvd0ZhaWx1cmUoKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKCF3aW5kb3cuY29weVRvQ2xpcGJvYXJkKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCd3aW5kb3cuY29weVRvQ2xpcGJvYXJkIG5vdCBhdmFpbGFibGUnKVxuICAgICAgdGhpcy5zaG93RmFpbHVyZSgpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnQXR0ZW1wdGluZyB0byBjb3B5OicsIHRleHRUb0NvcHkpXG4gICAgd2luZG93LmNvcHlUb0NsaXBib2FyZCh0ZXh0VG9Db3B5KS50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMuc2hvd1N1Y2Nlc3MoKVxuICAgIH0pLmNhdGNoKF9lcnJvciA9PiB7XG4gICAgICB0aGlzLnNob3dGYWlsdXJlKClcbiAgICB9KVxuICB9XG5cbiAgLy8gU2hvdyBzdWNjZXNzIGZlZWRiYWNrXG4gIHByaXZhdGUgc2hvd1N1Y2Nlc3MoKTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gdGhpcy5nZXRCdXR0b24oKVxuICAgIGNvbnN0IG9yaWdpbmFsVGV4dCA9IGJ1dHRvbi5pbm5lckhUTUxcbiAgICBjb25zdCBvcmlnaW5hbENsYXNzID0gYnV0dG9uLmNsYXNzTmFtZVxuXG4gICAgLy8gU2hvdyBzdWNjZXNzIHN0YXRlXG4gICAgYnV0dG9uLmlubmVySFRNTCA9ICdDb3BpZWQhJ1xuICAgIGJ1dHRvbi5jbGFzc05hbWUgPSBvcmlnaW5hbENsYXNzLnJlcGxhY2UoL2J0bi1cXHcrLywgJ2J0bi1zdWNjZXNzJylcblxuICAgIC8vIFJlc3RvcmUgb3JpZ2luYWwgc3RhdGUgYWZ0ZXIgMiBzZWNvbmRzXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBidXR0b24uaW5uZXJIVE1MID0gb3JpZ2luYWxUZXh0XG4gICAgICBidXR0b24uY2xhc3NOYW1lID0gb3JpZ2luYWxDbGFzc1xuICAgIH0sIDIwMDApXG4gIH1cblxuICAvLyBTaG93IGZhaWx1cmUgZmVlZGJhY2tcbiAgcHJpdmF0ZSBzaG93RmFpbHVyZSgpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSB0aGlzLmdldEJ1dHRvbigpXG4gICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gYnV0dG9uLmlubmVySFRNTFxuICAgIGNvbnN0IG9yaWdpbmFsQ2xhc3MgPSBidXR0b24uY2xhc3NOYW1lXG5cbiAgICAvLyBTaG93IGZhaWx1cmUgc3RhdGVcbiAgICBidXR0b24uaW5uZXJIVE1MID0gJ0NvcHkgRmFpbGVkISdcbiAgICBidXR0b24uY2xhc3NOYW1lID0gb3JpZ2luYWxDbGFzcy5yZXBsYWNlKC9idG4tXFx3Ky8sICdidG4tZGFuZ2VyJylcblxuICAgIC8vIFJlc3RvcmUgb3JpZ2luYWwgc3RhdGUgYWZ0ZXIgMiBzZWNvbmRzXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBidXR0b24uaW5uZXJIVE1MID0gb3JpZ2luYWxUZXh0XG4gICAgICBidXR0b24uY2xhc3NOYW1lID0gb3JpZ2luYWxDbGFzc1xuICAgIH0sIDIwMDApXG4gIH1cblxuICAvLyBHZXQgdGhlIGJ1dHRvbiB0byBzaG93IGZlZWRiYWNrIG9uXG4gIHByaXZhdGUgZ2V0QnV0dG9uKCk6IEhUTUxFbGVtZW50IHtcbiAgICAvLyBMb29rIGZvciBhIGJ1dHRvbiB3aXRoaW4gdGhlIGNvbnRyb2xsZXIgc2NvcGVcbiAgICBjb25zdCBidXR0b24gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignYnV0dG9uJylcbiAgICBpZiAoYnV0dG9uKSB7XG4gICAgICByZXR1cm4gYnV0dG9uXG4gICAgfVxuXG4gICAgLy8gRmFsbCBiYWNrIHRvIGNvbnRyb2xsZXIgZWxlbWVudCBpZiBpdCdzIGEgYnV0dG9uXG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudFxuICB9XG5cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbi8vIERlY2xhcmUgVHVyYm8gZ2xvYmFsIHR5cGVcbmRlY2xhcmUgY29uc3QgVHVyYm86IGFueVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIFwibW9kYWxcIixcbiAgICBcImRlcGFydHVyZVwiLFxuICAgIFwiZGVzdGluYXRpb25cIixcbiAgICBcImRlcGFydHVyZUNpdHlJbnB1dFwiLFxuICAgIFwiZGVzdGluYXRpb25DaXR5SW5wdXRcIixcbiAgICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gICAgXCJ0YWJEZXBhcnR1cmVcIixcbiAgICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gICAgXCJ0YWJEZXN0aW5hdGlvblwiLFxuICAgIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBcInRhYkRvbWVzdGljXCIsXG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIFwidGFiSW50ZXJuYXRpb25hbFwiLFxuICAgIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBcInNlYXJjaElucHV0XCIsXG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIFwiZG9tZXN0aWNMaXN0XCIsXG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIFwiaW50ZXJuYXRpb25hbExpc3RcIixcbiAgICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gICAgXCJoaXN0b3J5U2VjdGlvblwiLFxuICAgIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBcImN1cnJlbnRDaXR5XCIsXG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIFwibG9jYXRpb25TdGF0dXNcIixcbiAgICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gICAgXCJsb2NhdGlvbkJ1dHRvblwiLFxuICAgIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBcImxvY2F0aW9uVGV4dFwiLFxuICAgIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBcImxvY2F0aW9uU3Bpbm5lclwiLFxuICAgIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBcImxvY2F0ZWRDaXR5XCIsXG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIFwibG9jYXRlZENpdHlCdXR0b25cIixcbiAgICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gICAgXCJjdXJyZW50UmVnaW9uVGFiXCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgZGVwYXJ0dXJlQ2l0eTogU3RyaW5nLFxuICAgIGRlc3RpbmF0aW9uQ2l0eTogU3RyaW5nLFxuICAgIGVuYWJsZU11bHRpU2VsZWN0OiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IHRydWUgfSxcbiAgICBtb2RhbFRpdGxlOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJycgfVxuICB9XG5cbiAgcHJpdmF0ZSBzZWxlY3Rpb25UeXBlOiAnZGVwYXJ0dXJlJyB8ICdkZXN0aW5hdGlvbicgPSAnZGVwYXJ0dXJlJ1xuICBwcml2YXRlIGlzTXVsdGlTZWxlY3RNb2RlOiBib29sZWFuID0gZmFsc2VcbiAgcHJpdmF0ZSBzZWxlY3RlZENpdGllczogc3RyaW5nW10gPSBbXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVwYXJ0dXJlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRlc3RpbmF0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRlcGFydHVyZUNpdHlJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRlc3RpbmF0aW9uQ2l0eUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIC8vIE9wdGlvbmFsIHRhcmdldCBjaGVja2VycyAtIHRoZXNlIG1hcmsgdGFyZ2V0cyBhcyBvcHRpb25hbFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0RlcGFydHVyZVRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0Rlc3RpbmF0aW9uVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzRGVwYXJ0dXJlQ2l0eUlucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzRGVzdGluYXRpb25DaXR5SW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgLy8gTW9kYWwtcmVsYXRlZCB0YXJnZXRzIC0gYWxsIG9wdGlvbmFsIGZvciBwYWdlcyB3aXRob3V0IG1vZGFsXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzTW9kYWxUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNUYWJEZXBhcnR1cmVUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSB0YWJEZXBhcnR1cmVUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzVGFiRGVzdGluYXRpb25UYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSB0YWJEZXN0aW5hdGlvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNUYWJEb21lc3RpY1RhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IHRhYkRvbWVzdGljVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1RhYkludGVybmF0aW9uYWxUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSB0YWJJbnRlcm5hdGlvbmFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1NlYXJjaElucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VhcmNoSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNEb21lc3RpY0xpc3RUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBkb21lc3RpY0xpc3RUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzSW50ZXJuYXRpb25hbExpc3RUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBpbnRlcm5hdGlvbmFsTGlzdFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNIaXN0b3J5U2VjdGlvblRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhpc3RvcnlTZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0N1cnJlbnRDaXR5VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY3VycmVudENpdHlUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzTG9jYXRpb25TdGF0dXNUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBsb2NhdGlvblN0YXR1c1RhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNMb2NhdGlvbkJ1dHRvblRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGxvY2F0aW9uQnV0dG9uVGFyZ2V0OiBIVE1MQnV0dG9uRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0xvY2F0aW9uVGV4dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGxvY2F0aW9uVGV4dFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNMb2NhdGlvblNwaW5uZXJUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBsb2NhdGlvblNwaW5uZXJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzTG9jYXRlZENpdHlUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBsb2NhdGVkQ2l0eVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNMb2NhdGVkQ2l0eUJ1dHRvblRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGxvY2F0ZWRDaXR5QnV0dG9uVGFyZ2V0OiBIVE1MQnV0dG9uRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0N1cnJlbnRSZWdpb25UYWJUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBjdXJyZW50UmVnaW9uVGFiVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIGRlcGFydHVyZUNpdHlWYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgZGVzdGluYXRpb25DaXR5VmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIGVuYWJsZU11bHRpU2VsZWN0VmFsdWU6IGJvb2xlYW5cbiAgZGVjbGFyZSBtb2RhbFRpdGxlVmFsdWU6IHN0cmluZ1xuXG4gIHByaXZhdGUgY3VycmVudE11bHRpQ2l0eVNlZ21lbnRJZDogc3RyaW5nIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSBjdXJyZW50TXVsdGlDaXR5Q2l0eVR5cGU6IHN0cmluZyB8IG51bGwgPSBudWxsXG4gIHByaXZhdGUgY3VycmVudFJlZ2lvblR5cGU6ICdkb21lc3RpYycgfCAnaW50ZXJuYXRpb25hbCcgPSAnZG9tZXN0aWMnXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkNpdHlTZWxlY3RvciBjb25uZWN0ZWRcIiwgeyBlbmFibGVNdWx0aVNlbGVjdDogdGhpcy5lbmFibGVNdWx0aVNlbGVjdFZhbHVlIH0pXG4gICAgLy8gSW5pdGlhbGl6ZSBkZWZhdWx0IHZhbHVlc1xuICAgIGlmICghdGhpcy5kZXBhcnR1cmVDaXR5VmFsdWUpIHRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlID0gXCJcdTUzMTdcdTRFQUNcIlxuICAgIGlmICghdGhpcy5kZXN0aW5hdGlvbkNpdHlWYWx1ZSkgdGhpcy5kZXN0aW5hdGlvbkNpdHlWYWx1ZSA9IFwiXHU2NzZEXHU1RERFXCJcbiAgICBcbiAgICAvLyBTZXQgaW5pdGlhbCB2YWx1ZXMgdG8gaGlkZGVuIGlucHV0cyAob25seSBpZiB0YXJnZXRzIGV4aXN0KVxuICAgIGlmICh0aGlzLmhhc0RlcGFydHVyZUNpdHlJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5kZXBhcnR1cmVDaXR5SW5wdXRUYXJnZXQudmFsdWUgPSB0aGlzLmRlcGFydHVyZUNpdHlWYWx1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5oYXNEZXN0aW5hdGlvbkNpdHlJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5kZXN0aW5hdGlvbkNpdHlJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuZGVzdGluYXRpb25DaXR5VmFsdWVcbiAgICB9XG4gICAgXG4gICAgLy8gSGlkZSBtdWx0aS1zZWxlY3QgVUkgaWYgZGlzYWJsZWRcbiAgICBpZiAoIXRoaXMuZW5hYmxlTXVsdGlTZWxlY3RWYWx1ZSkge1xuICAgICAgdGhpcy5oaWRlTXVsdGlTZWxlY3RVSSgpXG4gICAgfVxuICAgIFxuICAgIC8vIExpc3RlbiBmb3IgbXVsdGktY2l0eSBldmVudHNcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbXVsdGktY2l0eTpvcGVuLWNpdHktc2VsZWN0b3InLCB0aGlzLmhhbmRsZU11bHRpQ2l0eU9wZW4uYmluZCh0aGlzKSlcbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ211bHRpLWNpdHk6b3Blbi1jaXR5LXNlbGVjdG9yJywgdGhpcy5oYW5kbGVNdWx0aUNpdHlPcGVuLmJpbmQodGhpcykpXG4gIH1cblxuICAvLyBIYW5kbGUgbXVsdGktY2l0eSBjaXR5IHNlbGVjdG9yIHJlcXVlc3RcbiAgcHJpdmF0ZSBoYW5kbGVNdWx0aUNpdHlPcGVuKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnRcbiAgICBjb25zdCB7IHNlZ21lbnRJZCwgY2l0eVR5cGUgfSA9IGN1c3RvbUV2ZW50LmRldGFpbFxuICAgIGNvbnNvbGUubG9nKCdDaXR5IHNlbGVjdG9yOiBSZWNlaXZlZCBtdWx0aS1jaXR5IG9wZW4gcmVxdWVzdCcsIHsgc2VnbWVudElkLCBjaXR5VHlwZSB9KVxuICAgIHRoaXMuY3VycmVudE11bHRpQ2l0eVNlZ21lbnRJZCA9IHNlZ21lbnRJZFxuICAgIHRoaXMuY3VycmVudE11bHRpQ2l0eUNpdHlUeXBlID0gY2l0eVR5cGVcbiAgICB0aGlzLnNlbGVjdGlvblR5cGUgPSBjaXR5VHlwZSA9PT0gJ2RlcGFydHVyZScgPyAnZGVwYXJ0dXJlJyA6ICdkZXN0aW5hdGlvbidcbiAgICB0aGlzLnVwZGF0ZU1vZGFsVGl0bGUoKVxuICAgIHRoaXMuc2hvd01vZGFsKClcbiAgfVxuXG4gIC8vIE9wZW4gbW9kYWwgZm9yIGRlcGFydHVyZSBjaXR5IHNlbGVjdGlvblxuICBvcGVuRGVwYXJ0dXJlKCk6IHZvaWQge1xuICAgIHRoaXMuc2VsZWN0aW9uVHlwZSA9ICdkZXBhcnR1cmUnXG4gICAgdGhpcy5pc011bHRpU2VsZWN0TW9kZSA9IGZhbHNlXG4gICAgdGhpcy5zZWxlY3RlZENpdGllcyA9IFtdXG4gICAgdGhpcy51cGRhdGVNb2RhbFRpdGxlKClcbiAgICB0aGlzLnVwZGF0ZU11bHRpU2VsZWN0VUkoKVxuICAgIHRoaXMuc2hvd01vZGFsKClcbiAgfVxuXG4gIC8vIE9wZW4gbW9kYWwgZm9yIGRlc3RpbmF0aW9uIGNpdHkgc2VsZWN0aW9uXG4gIG9wZW5EZXN0aW5hdGlvbigpOiB2b2lkIHtcbiAgICB0aGlzLnNlbGVjdGlvblR5cGUgPSAnZGVzdGluYXRpb24nXG4gICAgdGhpcy5pc011bHRpU2VsZWN0TW9kZSA9IGZhbHNlXG4gICAgdGhpcy5zZWxlY3RlZENpdGllcyA9IFtdXG4gICAgdGhpcy51cGRhdGVNb2RhbFRpdGxlKClcbiAgICB0aGlzLnVwZGF0ZU11bHRpU2VsZWN0VUkoKVxuICAgIHRoaXMuc2hvd01vZGFsKClcbiAgfVxuXG4gIC8vIE9wZW4gbW9kYWwgZm9yIGhvdGVsIHNlYXJjaCBjaXR5IHNlbGVjdGlvblxuICBvcGVuSG90ZWxDaXR5U2VsZWN0b3IoKTogdm9pZCB7XG4gICAgdGhpcy5zZWxlY3Rpb25UeXBlID0gJ2RlcGFydHVyZSdcbiAgICB0aGlzLmlzTXVsdGlTZWxlY3RNb2RlID0gZmFsc2VcbiAgICB0aGlzLnNlbGVjdGVkQ2l0aWVzID0gW11cbiAgICB0aGlzLnVwZGF0ZU1vZGFsVGl0bGUoKVxuICAgIHRoaXMuc2hvd01vZGFsKClcbiAgfVxuXG4gIC8vIFNob3cgbW9kYWxcbiAgc2hvd01vZGFsKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNNb2RhbFRhcmdldCkgcmV0dXJuXG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJ1xuICB9XG5cbiAgLy8gQ2xvc2UgbW9kYWxcbiAgY2xvc2VNb2RhbCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaGFzTW9kYWxUYXJnZXQpIHJldHVyblxuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJydcbiAgICB0aGlzLmNsZWFyU2VhcmNoKClcbiAgfVxuXG4gIC8vIFNlbGVjdCBjaXR5XG4gIHNlbGVjdENpdHkoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGNpdHlOYW1lID0gYnV0dG9uLmRhdGFzZXQuY2l0eU5hbWUgfHwgJydcbiAgICBjb25zdCBpc0ludGVybmF0aW9uYWwgPSBidXR0b24uZGF0YXNldC5pbnRlcm5hdGlvbmFsID09PSAndHJ1ZSdcbiAgICBcbiAgICBjb25zb2xlLmxvZygnQ2l0eSBzZWxlY3RvcjogQ2l0eSBzZWxlY3RlZDonLCBjaXR5TmFtZSwgJ2ludGVybmF0aW9uYWw6JywgaXNJbnRlcm5hdGlvbmFsKVxuICAgIFxuICAgIC8vIE11bHRpLXNlbGVjdCBtb2RlXG4gICAgaWYgKHRoaXMuaXNNdWx0aVNlbGVjdE1vZGUpIHtcbiAgICAgIGlmICh0aGlzLnNlbGVjdGVkQ2l0aWVzLmluY2x1ZGVzKGNpdHlOYW1lKSkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkQ2l0aWVzID0gdGhpcy5zZWxlY3RlZENpdGllcy5maWx0ZXIoY2l0eSA9PiBjaXR5ICE9PSBjaXR5TmFtZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRDaXRpZXMucHVzaChjaXR5TmFtZSlcbiAgICAgIH1cbiAgICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRDaXRpZXNEaXNwbGF5KClcbiAgICAgIHRoaXMudXBkYXRlQ2l0eUJ1dHRvblN0YXRlcygpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBmb3IgbXVsdGktY2l0eVxuICAgIGlmICh0aGlzLmN1cnJlbnRNdWx0aUNpdHlTZWdtZW50SWQgJiYgdGhpcy5jdXJyZW50TXVsdGlDaXR5Q2l0eVR5cGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdDaXR5IHNlbGVjdG9yOiBNdWx0aS1jaXR5IG1vZGUsIGRpc3BhdGNoaW5nIGV2ZW50Jywge1xuICAgICAgICBzZWdtZW50SWQ6IHRoaXMuY3VycmVudE11bHRpQ2l0eVNlZ21lbnRJZCxcbiAgICAgICAgY2l0eVR5cGU6IHRoaXMuY3VycmVudE11bHRpQ2l0eUNpdHlUeXBlLFxuICAgICAgICBjaXR5TmFtZTogY2l0eU5hbWVcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFRyaWdnZXIgZXZlbnQgdG8gdXBkYXRlIG11bHRpLWNpdHkgc2VnbWVudCAtIGRpc3BhdGNoIG9uIGRvY3VtZW50IGZvciBiZXR0ZXIgcHJvcGFnYXRpb25cbiAgICAgIGNvbnN0IHVwZGF0ZUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdjaXR5LXNlbGVjdG9yOmNpdHktc2VsZWN0ZWQnLCB7XG4gICAgICAgIGRldGFpbDoge1xuICAgICAgICAgIHNlZ21lbnRJZDogdGhpcy5jdXJyZW50TXVsdGlDaXR5U2VnbWVudElkLFxuICAgICAgICAgIGNpdHlUeXBlOiB0aGlzLmN1cnJlbnRNdWx0aUNpdHlDaXR5VHlwZSxcbiAgICAgICAgICBjaXR5TmFtZTogY2l0eU5hbWVcbiAgICAgICAgfSxcbiAgICAgICAgYnViYmxlczogdHJ1ZVxuICAgICAgfSlcbiAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQodXBkYXRlRXZlbnQpXG4gICAgICBcbiAgICAgIC8vIFJlc2V0IG11bHRpLWNpdHkgc3RhdGVcbiAgICAgIHRoaXMuY3VycmVudE11bHRpQ2l0eVNlZ21lbnRJZCA9IG51bGxcbiAgICAgIHRoaXMuY3VycmVudE11bHRpQ2l0eUNpdHlUeXBlID0gbnVsbFxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygnQ2l0eSBzZWxlY3RvcjogUmVndWxhciBtb2RlJylcbiAgICAgIC8vIFJlZ3VsYXIgc2luZ2xlL3JvdW5kIHRyaXAgc2VsZWN0aW9uXG4gICAgICBpZiAodGhpcy5zZWxlY3Rpb25UeXBlID09PSAnZGVwYXJ0dXJlJykge1xuICAgICAgICB0aGlzLmRlcGFydHVyZUNpdHlWYWx1ZSA9IGNpdHlOYW1lXG4gICAgICAgIGlmICh0aGlzLmhhc0RlcGFydHVyZVRhcmdldCkge1xuICAgICAgICAgIHRoaXMuZGVwYXJ0dXJlVGFyZ2V0LnRleHRDb250ZW50ID0gY2l0eU5hbWVcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5oYXNEZXBhcnR1cmVDaXR5SW5wdXRUYXJnZXQpIHtcbiAgICAgICAgICB0aGlzLmRlcGFydHVyZUNpdHlJbnB1dFRhcmdldC52YWx1ZSA9IGNpdHlOYW1lXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIHNwZWNpYWxfaG90ZWxzIHBhZ2UgLSByZWxvYWQgd2l0aCBuZXcgY2l0eSBwYXJhbWV0ZXJcbiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA9PT0gJy9zcGVjaWFsX2hvdGVscycpIHtcbiAgICAgICAgICBUdXJiby52aXNpdChgL3NwZWNpYWxfaG90ZWxzP2NpdHk9JHtlbmNvZGVVUklDb21wb25lbnQoY2l0eU5hbWUpfWApXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIGhvdGVscy9zZWFyY2ggcGFnZSAtIHJlbG9hZCB3aXRoIG5ldyBjaXR5IHBhcmFtZXRlclxuICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lID09PSAnL2hvdGVscy9zZWFyY2gnKSB7XG4gICAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZilcbiAgICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnY2l0eScsIGNpdHlOYW1lKVxuICAgICAgICAgIFR1cmJvLnZpc2l0KHVybC50b1N0cmluZygpKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBEaXNwYXRjaCBjaXR5LWNoYW5nZWQgZXZlbnQgZm9yIHRvdXItZ3JvdXAtZmlsdGVyIGFuZCBob3RlbC1zZXJ2aWNlcy1zZWFyY2ggdG8gbGlzdGVuXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hDaXR5Q2hhbmdlZEV2ZW50KGNpdHlOYW1lKVxuICAgICAgICBcbiAgICAgICAgLy8gRGlzcGF0Y2ggaG90ZWwtc3BlY2lmaWMgZXZlbnQgZm9yIGhvdGVsLXNlYXJjaCBjb250cm9sbGVyXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hIb3RlbENpdHlVcGRhdGVFdmVudChjaXR5TmFtZSwgaXNJbnRlcm5hdGlvbmFsKVxuICAgICAgICBcbiAgICAgICAgLy8gRGlzcGF0Y2ggdHJpcC1wbGFubmVyIGNpdHkgY2hhbmdlIGV2ZW50XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hUcmlwQ2l0eUNoYW5nZUV2ZW50KCdkZXBhcnR1cmUnLCBjaXR5TmFtZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb25DaXR5VmFsdWUgPSBjaXR5TmFtZVxuICAgICAgICBpZiAodGhpcy5oYXNEZXN0aW5hdGlvblRhcmdldCkge1xuICAgICAgICAgIHRoaXMuZGVzdGluYXRpb25UYXJnZXQudGV4dENvbnRlbnQgPSBjaXR5TmFtZVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhhc0Rlc3RpbmF0aW9uQ2l0eUlucHV0VGFyZ2V0KSB7XG4gICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbkNpdHlJbnB1dFRhcmdldC52YWx1ZSA9IGNpdHlOYW1lXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIERpc3BhdGNoIGNpdHktY2hhbmdlZCBldmVudCBmb3IgdG91ci1ncm91cC1maWx0ZXIgdG8gbGlzdGVuXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hDaXR5Q2hhbmdlZEV2ZW50KGNpdHlOYW1lKVxuICAgICAgICBcbiAgICAgICAgLy8gRGlzcGF0Y2ggdHJpcC1wbGFubmVyIGNpdHkgY2hhbmdlIGV2ZW50XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hUcmlwQ2l0eUNoYW5nZUV2ZW50KCdkZXN0aW5hdGlvbicsIGNpdHlOYW1lKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICAgIHRoaXMuc2F2ZVRvSGlzdG9yeShjaXR5TmFtZSlcbiAgfVxuXG4gIC8vIFRvZ2dsZSByZWdpb24gdGFiIChkb21lc3RpYy9pbnRlcm5hdGlvbmFsKVxuICB0b2dnbGVSZWdpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHJlZ2lvbiA9IGJ1dHRvbi5kYXRhc2V0LnJlZ2lvbiBhcyAnZG9tZXN0aWMnIHwgJ2ludGVybmF0aW9uYWwnXG4gICAgXG4gICAgdGhpcy5jdXJyZW50UmVnaW9uVHlwZSA9IHJlZ2lvblxuICAgIFxuICAgIC8vIFVwZGF0ZSB0YWIgc3R5bGVzXG4gICAgaWYgKHRoaXMuaGFzVGFiRG9tZXN0aWNUYXJnZXQgJiYgdGhpcy5oYXNUYWJJbnRlcm5hdGlvbmFsVGFyZ2V0KSB7XG4gICAgICBpZiAocmVnaW9uID09PSAnZG9tZXN0aWMnKSB7XG4gICAgICAgIHRoaXMudGFiRG9tZXN0aWNUYXJnZXQuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLWItMicsICdib3JkZXItcHJpbWFyeScsICd0ZXh0LXByaW1hcnknLCAnZm9udC1ib2xkJylcbiAgICAgICAgdGhpcy50YWJEb21lc3RpY1RhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktNTAwJylcbiAgICAgICAgdGhpcy50YWJJbnRlcm5hdGlvbmFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1iLTInLCAnYm9yZGVyLXByaW1hcnknLCAndGV4dC1wcmltYXJ5JywgJ2ZvbnQtYm9sZCcpXG4gICAgICAgIHRoaXMudGFiSW50ZXJuYXRpb25hbFRhcmdldC5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktNTAwJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudGFiSW50ZXJuYXRpb25hbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdib3JkZXItYi0yJywgJ2JvcmRlci1wcmltYXJ5JywgJ3RleHQtcHJpbWFyeScsICdmb250LWJvbGQnKVxuICAgICAgICB0aGlzLnRhYkludGVybmF0aW9uYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTUwMCcpXG4gICAgICAgIHRoaXMudGFiRG9tZXN0aWNUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnYm9yZGVyLWItMicsICdib3JkZXItcHJpbWFyeScsICd0ZXh0LXByaW1hcnknLCAnZm9udC1ib2xkJylcbiAgICAgICAgdGhpcy50YWJEb21lc3RpY1RhcmdldC5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktNTAwJylcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gVG9nZ2xlIGxpc3QgdmlzaWJpbGl0eVxuICAgIGlmICh0aGlzLmhhc0RvbWVzdGljTGlzdFRhcmdldCAmJiB0aGlzLmhhc0ludGVybmF0aW9uYWxMaXN0VGFyZ2V0KSB7XG4gICAgICBpZiAocmVnaW9uID09PSAnZG9tZXN0aWMnKSB7XG4gICAgICAgIHRoaXMuZG9tZXN0aWNMaXN0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICAgIHRoaXMuaW50ZXJuYXRpb25hbExpc3RUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZG9tZXN0aWNMaXN0VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICAgIHRoaXMuaW50ZXJuYXRpb25hbExpc3RUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBEaXNwYXRjaCBjaXR5LWNoYW5nZWQgZXZlbnQgZm9yIG90aGVyIGNvbnRyb2xsZXJzIChsaWtlIHRvdXItZ3JvdXAtZmlsdGVyKVxuICBwcml2YXRlIGRpc3BhdGNoQ2l0eUNoYW5nZWRFdmVudChjaXR5TmFtZTogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgY2l0eUNoYW5nZWRFdmVudCA9IG5ldyBDdXN0b21FdmVudCgnY2l0eS1zZWxlY3RvcjpjaXR5LWNoYW5nZWQnLCB7XG4gICAgICBkZXRhaWw6IHsgY2l0eU5hbWUgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICB9KVxuICAgIHRoaXMuZWxlbWVudC5kaXNwYXRjaEV2ZW50KGNpdHlDaGFuZ2VkRXZlbnQpXG4gICAgY29uc29sZS5sb2coJ0NpdHkgc2VsZWN0b3I6IERpc3BhdGNoZWQgY2l0eS1jaGFuZ2VkIGV2ZW50JywgY2l0eU5hbWUpXG4gIH1cblxuICAvLyBEaXNwYXRjaCBob3RlbC1zcGVjaWZpYyBjaXR5IHVwZGF0ZSBldmVudFxuICBwcml2YXRlIGRpc3BhdGNoSG90ZWxDaXR5VXBkYXRlRXZlbnQoY2l0eU5hbWU6IHN0cmluZywgaXNJbnRlcm5hdGlvbmFsOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcbiAgICBjb25zdCBob3RlbENpdHlFdmVudCA9IG5ldyBDdXN0b21FdmVudCgnY2l0eS1zZWxlY3RvcjpjaXR5LXNlbGVjdGVkLWZvci1ob3RlbCcsIHtcbiAgICAgIGRldGFpbDogeyBcbiAgICAgICAgY2l0eU5hbWUsXG4gICAgICAgIGlzSW50ZXJuYXRpb25hbCBcbiAgICAgIH0sXG4gICAgICBidWJibGVzOiB0cnVlXG4gICAgfSlcbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGhvdGVsQ2l0eUV2ZW50KVxuICAgIGNvbnNvbGUubG9nKCdDaXR5IHNlbGVjdG9yOiBEaXNwYXRjaGVkIGhvdGVsIGNpdHkgdXBkYXRlIGV2ZW50JywgeyBjaXR5TmFtZSwgaXNJbnRlcm5hdGlvbmFsIH0pXG4gIH1cblxuICAvLyBTd2l0Y2ggY2l0aWVzXG4gIHN3aXRjaENpdGllcygpOiB2b2lkIHtcbiAgICBjb25zdCB0ZW1wID0gdGhpcy5kZXBhcnR1cmVDaXR5VmFsdWVcbiAgICB0aGlzLmRlcGFydHVyZUNpdHlWYWx1ZSA9IHRoaXMuZGVzdGluYXRpb25DaXR5VmFsdWVcbiAgICB0aGlzLmRlc3RpbmF0aW9uQ2l0eVZhbHVlID0gdGVtcFxuXG4gICAgLy8gRGlzcGF0Y2ggYSBjdXN0b20gZXZlbnQgdG8gbm90aWZ5IG90aGVyIGNvbnRyb2xsZXJzXG4gICAgdGhpcy5lbGVtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdjaXRpZXMtc3dpdGNoZWQnLCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgZGVwYXJ0dXJlOiB0aGlzLmRlcGFydHVyZUNpdHlWYWx1ZSxcbiAgICAgICAgZGVzdGluYXRpb246IHRoaXMuZGVzdGluYXRpb25DaXR5VmFsdWVcbiAgICAgIH0sXG4gICAgICBidWJibGVzOiB0cnVlXG4gICAgfSkpXG4gIH1cblxuICAvLyBTZWFyY2ggY2l0aWVzXG4gIHNlYXJjaENpdGllcygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaGFzU2VhcmNoSW5wdXRUYXJnZXQpIHJldHVyblxuICAgIFxuICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5zZWFyY2hJbnB1dFRhcmdldC52YWx1ZS50b0xvd2VyQ2FzZSgpLnRyaW0oKVxuICAgIGNvbnN0IGNpdHlCdXR0b25zID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWNpdHktbmFtZV0nKVxuICAgIFxuICAgIGNpdHlCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgICAgY29uc3QgY2l0eU5hbWUgPSAoYnV0dG9uIGFzIEhUTUxFbGVtZW50KS5kYXRhc2V0LmNpdHlOYW1lPy50b0xvd2VyQ2FzZSgpIHx8ICcnXG4gICAgICBjb25zdCBjaXR5RWxlbWVudCA9IGJ1dHRvbiBhcyBIVE1MRWxlbWVudFxuICAgICAgXG4gICAgICBpZiAoIXF1ZXJ5IHx8IGNpdHlOYW1lLmluY2x1ZGVzKHF1ZXJ5KSkge1xuICAgICAgICBjaXR5RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2l0eUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgLy8gQ2xlYXIgc2VhcmNoXG4gIGNsZWFyU2VhcmNoKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNTZWFyY2hJbnB1dFRhcmdldCkgcmV0dXJuXG4gICAgXG4gICAgdGhpcy5zZWFyY2hJbnB1dFRhcmdldC52YWx1ZSA9ICcnXG4gICAgdGhpcy5zZWFyY2hDaXRpZXMoKVxuICB9XG5cbiAgLy8gUmVxdWVzdCBsb2NhdGlvblxuICByZXF1ZXN0TG9jYXRpb24oKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc0xvY2F0aW9uQnV0dG9uVGFyZ2V0IHx8ICF0aGlzLmhhc0xvY2F0aW9uVGV4dFRhcmdldCB8fCAhdGhpcy5oYXNMb2NhdGlvblNwaW5uZXJUYXJnZXQpIHJldHVyblxuICAgIFxuICAgIC8vIFNob3cgbG9hZGluZyBzdGF0ZVxuICAgIHRoaXMubG9jYXRpb25UZXh0VGFyZ2V0LnRleHRDb250ZW50ID0gJ1x1NUI5QVx1NEY0RFx1NEUyRC4uLidcbiAgICB0aGlzLmxvY2F0aW9uU3Bpbm5lclRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIHRoaXMubG9jYXRpb25CdXR0b25UYXJnZXQuZGlzYWJsZWQgPSB0cnVlXG4gICAgXG4gICAgLy8gVXBkYXRlIHN0YXR1cyB0ZXh0XG4gICAgaWYgKHRoaXMuaGFzTG9jYXRpb25TdGF0dXNUYXJnZXQpIHtcbiAgICAgIGNvbnN0IHN0YXR1c1NwYW4gPSB0aGlzLmxvY2F0aW9uU3RhdHVzVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKVxuICAgICAgaWYgKHN0YXR1c1NwYW4pIHN0YXR1c1NwYW4udGV4dENvbnRlbnQgPSAnXHU2QjYzXHU1NzI4XHU4M0I3XHU1M0Q2XHU0RjREXHU3RjZFXHU0RkUxXHU2MDZGLi4uJ1xuICAgIH1cbiAgICBcbiAgICAvLyBEaXJlY3RseSB1c2UgSVAtYmFzZWQgZ2VvbG9jYXRpb24gKG1vc3QgcmVsaWFibGUgZm9yIENoaW5hKVxuICAgIHRoaXMuZ2V0Q2l0eUZyb21JUCgpXG4gIH1cbiAgXG4gIC8vIEdldCBjaXR5IGZyb20gSVAgYWRkcmVzcyB1c2luZyBpcGFwaS5jbyAoZnJlZSwgbm8ga2V5IG5lZWRlZClcbiAgcHJpdmF0ZSBnZXRDaXR5RnJvbUlQKCk6IHZvaWQge1xuICAgIC8vIFRyeSBpcGFwaS5jbyBmaXJzdCAoc3VwcG9ydHMgQ2hpbmVzZSBjaXRpZXMpXG4gICAgZmV0Y2goJ2h0dHBzOi8vaXBhcGkuY28vanNvbi8nKVxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB0aHJvdyBuZXcgRXJyb3IoJ2lwYXBpLmNvIGZhaWxlZCcpXG4gICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKClcbiAgICAgIH0pXG4gICAgICAudGhlbihkYXRhID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ0xvY2F0aW9uIGRhdGE6JywgZGF0YSlcbiAgICAgICAgbGV0IGNpdHlOYW1lID0gJydcbiAgICAgICAgXG4gICAgICAgIC8vIFRyeSB0byBnZXQgQ2hpbmVzZSBjaXR5IG5hbWUgb3IgdXNlIEVuZ2xpc2ggbmFtZVxuICAgICAgICBpZiAoZGF0YS5jaXR5KSB7XG4gICAgICAgICAgY2l0eU5hbWUgPSBkYXRhLmNpdHlcbiAgICAgICAgICAvLyBNYXAgY29tbW9uIEVuZ2xpc2ggY2l0eSBuYW1lcyB0byBDaGluZXNlXG4gICAgICAgICAgY29uc3QgY2l0eU1hcDoge1trZXk6IHN0cmluZ106IHN0cmluZ30gPSB7XG4gICAgICAgICAgICAnQmVpamluZyc6ICdcdTUzMTdcdTRFQUMnLFxuICAgICAgICAgICAgJ1NoYW5naGFpJzogJ1x1NEUwQVx1NkQ3NycsXG4gICAgICAgICAgICAnR3Vhbmd6aG91JzogJ1x1NUU3Rlx1NURERScsXG4gICAgICAgICAgICAnU2hlbnpoZW4nOiAnXHU2REYxXHU1NzMzJyxcbiAgICAgICAgICAgICdDaGVuZ2R1JzogJ1x1NjIxMFx1OTBGRCcsXG4gICAgICAgICAgICAnSGFuZ3pob3UnOiAnXHU2NzZEXHU1RERFJyxcbiAgICAgICAgICAgICdXdWhhbic6ICdcdTZCNjZcdTZDNDknLFxuICAgICAgICAgICAgJ0Nob25ncWluZyc6ICdcdTkxQ0RcdTVFODYnLFxuICAgICAgICAgICAgJ05hbmppbmcnOiAnXHU1MzU3XHU0RUFDJyxcbiAgICAgICAgICAgICdYaVxcJ2FuJzogJ1x1ODk3Rlx1NUI4OScsXG4gICAgICAgICAgICAnVGlhbmppbic6ICdcdTU5MjlcdTZEMjUnLFxuICAgICAgICAgICAgJ1N1emhvdSc6ICdcdTgyQ0ZcdTVEREUnLFxuICAgICAgICAgICAgJ0NoYW5nc2hhJzogJ1x1OTU3Rlx1NkM5OScsXG4gICAgICAgICAgICAnWmhlbmd6aG91JzogJ1x1OTBEMVx1NURERScsXG4gICAgICAgICAgICAnSGFyYmluJzogJ1x1NTRDOFx1NUMxNFx1NkVFOCcsXG4gICAgICAgICAgICAnUWluZ2Rhbyc6ICdcdTk3NTJcdTVDOUInLFxuICAgICAgICAgICAgJ0t1bm1pbmcnOiAnXHU2NjA2XHU2NjBFJyxcbiAgICAgICAgICAgICdYaWFtZW4nOiAnXHU1M0E2XHU5NUU4JyxcbiAgICAgICAgICAgICdEYWxpYW4nOiAnXHU1OTI3XHU4RkRFJ1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoY2l0eU1hcFtkYXRhLmNpdHldKSB7XG4gICAgICAgICAgICBjaXR5TmFtZSA9IGNpdHlNYXBbZGF0YS5jaXR5XVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBSZW1vdmUgJ1NoaScgb3IgJ0NpdHknIHN1ZmZpeFxuICAgICAgICAgIGNpdHlOYW1lID0gY2l0eU5hbWUucmVwbGFjZSgvXFxzK1NoaSQvLCAnJykucmVwbGFjZSgvXFxzK0NpdHkkLywgJycpLnJlcGxhY2UoJ1x1NUUwMicsICcnKVxuICAgICAgICAgIFxuICAgICAgICAgIHRoaXMuaGFuZGxlTG9jYXRpb25TdWNjZXNzKGNpdHlOYW1lKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEZhbGxiYWNrIHRvIGFsdGVybmF0aXZlIHNlcnZpY2VcbiAgICAgICAgICB0aGlzLmdldENpdHlGcm9tSVBGYWxsYmFjaygpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdJUCBsb2NhdGlvbiBlcnJvcjonLCBlcnJvcilcbiAgICAgICAgLy8gVHJ5IGZhbGxiYWNrIHNlcnZpY2VcbiAgICAgICAgdGhpcy5nZXRDaXR5RnJvbUlQRmFsbGJhY2soKVxuICAgICAgfSlcbiAgfVxuICBcbiAgLy8gRmFsbGJhY2s6IFVzZSBpcC1hcGkuY29tIChmcmVlLCBubyBrZXksIGJldHRlciBmb3IgQ2hpbmEpXG4gIHByaXZhdGUgZ2V0Q2l0eUZyb21JUEZhbGxiYWNrKCk6IHZvaWQge1xuICAgIGZldGNoKCdodHRwOi8vaXAtYXBpLmNvbS9qc29uLz9sYW5nPXpoLUNOJylcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnRmFsbGJhY2sgbG9jYXRpb24gZGF0YTonLCBkYXRhKVxuICAgICAgICBpZiAoZGF0YS5zdGF0dXMgPT09ICdzdWNjZXNzJyAmJiBkYXRhLmNpdHkpIHtcbiAgICAgICAgICBjb25zdCBjaXR5TmFtZSA9IGRhdGEuY2l0eS5yZXBsYWNlKCdcdTVFMDInLCAnJylcbiAgICAgICAgICB0aGlzLmhhbmRsZUxvY2F0aW9uU3VjY2VzcyhjaXR5TmFtZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBMYXN0IHJlc29ydDogZGV0ZWN0IGZyb20gYnJvd3NlciBsYW5ndWFnZS90aW1lem9uZVxuICAgICAgICAgIHRoaXMuaGFuZGxlTG9jYXRpb25FcnJvcignXHU2NUUwXHU2Q0Q1XHU4MUVBXHU1MkE4XHU1QjlBXHU0RjREXHVGRjBDXHU4QkY3XHU2MjRCXHU1MkE4XHU5MDA5XHU2MkU5XHU1N0NFXHU1RTAyJylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhbGxiYWNrIElQIGxvY2F0aW9uIGVycm9yOicsIGVycm9yKVxuICAgICAgICB0aGlzLmhhbmRsZUxvY2F0aW9uRXJyb3IoJ1x1NUI5QVx1NEY0RFx1NjcwRFx1NTJBMVx1NjY4Mlx1NjVGNlx1NEUwRFx1NTNFRlx1NzUyOFx1RkYwQ1x1OEJGN1x1NjI0Qlx1NTJBOFx1OTAwOVx1NjJFOVx1NTdDRVx1NUUwMicpXG4gICAgICB9KVxuICB9XG5cbiAgLy8gSGFuZGxlIGxvY2F0aW9uIHN1Y2Nlc3NcbiAgcHJpdmF0ZSBoYW5kbGVMb2NhdGlvblN1Y2Nlc3MoY2l0eU5hbWU6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNMb2NhdGlvblRleHRUYXJnZXQgfHwgIXRoaXMuaGFzTG9jYXRpb25TcGlubmVyVGFyZ2V0IHx8IFxuICAgICAgICAhdGhpcy5oYXNMb2NhdGlvbkJ1dHRvblRhcmdldCB8fCAhdGhpcy5oYXNMb2NhdGVkQ2l0eVRhcmdldCB8fCBcbiAgICAgICAgIXRoaXMuaGFzTG9jYXRlZENpdHlCdXR0b25UYXJnZXQpIHJldHVyblxuICAgIFxuICAgIHRoaXMubG9jYXRpb25UZXh0VGFyZ2V0LnRleHRDb250ZW50ID0gJ1x1OTFDRFx1NjVCMFx1NUI5QVx1NEY0RCdcbiAgICB0aGlzLmxvY2F0aW9uU3Bpbm5lclRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIHRoaXMubG9jYXRpb25CdXR0b25UYXJnZXQuZGlzYWJsZWQgPSBmYWxzZVxuICAgIFxuICAgIC8vIFVwZGF0ZSBzdGF0dXMgdGV4dFxuICAgIGlmICh0aGlzLmhhc0xvY2F0aW9uU3RhdHVzVGFyZ2V0KSB7XG4gICAgICBjb25zdCBzdGF0dXNTcGFuID0gdGhpcy5sb2NhdGlvblN0YXR1c1RhcmdldC5xdWVyeVNlbGVjdG9yKCdzcGFuJylcbiAgICAgIGlmIChzdGF0dXNTcGFuKSBzdGF0dXNTcGFuLnRleHRDb250ZW50ID0gYFx1NUI5QVx1NEY0RFx1NjIxMFx1NTI5Rlx1RkYxQSR7Y2l0eU5hbWV9YFxuICAgIH1cbiAgICBcbiAgICAvLyBTaG93IGxvY2F0ZWQgY2l0eVxuICAgIHRoaXMubG9jYXRlZENpdHlUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICB0aGlzLmxvY2F0ZWRDaXR5QnV0dG9uVGFyZ2V0LnRleHRDb250ZW50ID0gY2l0eU5hbWVcbiAgICB0aGlzLmxvY2F0ZWRDaXR5QnV0dG9uVGFyZ2V0LmRhdGFzZXQuY2l0eU5hbWUgPSBjaXR5TmFtZVxuICB9XG5cbiAgLy8gSGFuZGxlIGxvY2F0aW9uIGVycm9yXG4gIHByaXZhdGUgaGFuZGxlTG9jYXRpb25FcnJvcihlcnJvck1lc3NhZ2U/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaGFzTG9jYXRpb25UZXh0VGFyZ2V0IHx8ICF0aGlzLmhhc0xvY2F0aW9uU3Bpbm5lclRhcmdldCB8fCAhdGhpcy5oYXNMb2NhdGlvbkJ1dHRvblRhcmdldCkgcmV0dXJuXG4gICAgXG4gICAgdGhpcy5sb2NhdGlvblRleHRUYXJnZXQudGV4dENvbnRlbnQgPSAnXHU5MUNEXHU4QkQ1XHU1QjlBXHU0RjREJ1xuICAgIHRoaXMubG9jYXRpb25TcGlubmVyVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgdGhpcy5sb2NhdGlvbkJ1dHRvblRhcmdldC5kaXNhYmxlZCA9IGZhbHNlXG4gICAgXG4gICAgLy8gVXBkYXRlIHN0YXR1cyB0ZXh0XG4gICAgaWYgKHRoaXMuaGFzTG9jYXRpb25TdGF0dXNUYXJnZXQpIHtcbiAgICAgIGNvbnN0IHN0YXR1c1NwYW4gPSB0aGlzLmxvY2F0aW9uU3RhdHVzVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKVxuICAgICAgaWYgKHN0YXR1c1NwYW4pIHN0YXR1c1NwYW4udGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2UgfHwgJ1x1NUI5QVx1NEY0RFx1NTkzMVx1OEQyNVx1RkYwQ1x1OEJGN1x1OTFDRFx1OEJENVx1NjIxNlx1NjI0Qlx1NTJBOFx1OTAwOVx1NjJFOVx1NTdDRVx1NUUwMidcbiAgICB9XG4gICAgXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAodGhpcy5oYXNMb2NhdGlvblRleHRUYXJnZXQpIHtcbiAgICAgICAgdGhpcy5sb2NhdGlvblRleHRUYXJnZXQudGV4dENvbnRlbnQgPSAnXHU1RjAwXHU1NDJGXHU1QjlBXHU0RjREXHU2NzQzXHU5NjUwJ1xuICAgICAgfVxuICAgIH0sIDMwMDApXG4gIH1cblxuICAvLyBTYXZlIHRvIGhpc3RvcnlcbiAgcHJpdmF0ZSBzYXZlVG9IaXN0b3J5KGNpdHlOYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBzdG9yYWdlS2V5ID0gJ2NpdHlfaGlzdG9yeSdcbiAgICBsZXQgaGlzdG9yeTogc3RyaW5nW10gPSBbXVxuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdG9yZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzdG9yYWdlS2V5KVxuICAgICAgaWYgKHN0b3JlZCkge1xuICAgICAgICBoaXN0b3J5ID0gSlNPTi5wYXJzZShzdG9yZWQpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgY2l0eSBoaXN0b3J5OicsIGUpXG4gICAgfVxuICAgIFxuICAgIC8vIFJlbW92ZSBpZiBhbHJlYWR5IGV4aXN0c1xuICAgIGhpc3RvcnkgPSBoaXN0b3J5LmZpbHRlcihjaXR5ID0+IGNpdHkgIT09IGNpdHlOYW1lKVxuICAgIFxuICAgIC8vIEFkZCB0byBiZWdpbm5pbmdcbiAgICBoaXN0b3J5LnVuc2hpZnQoY2l0eU5hbWUpXG4gICAgXG4gICAgLy8gS2VlcCBvbmx5IGxhc3QgNVxuICAgIGhpc3RvcnkgPSBoaXN0b3J5LnNsaWNlKDAsIDUpXG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHN0b3JhZ2VLZXksIEpTT04uc3RyaW5naWZ5KGhpc3RvcnkpKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIGNpdHkgaGlzdG9yeTonLCBlKVxuICAgIH1cbiAgfVxuXG4gIC8vIFVwZGF0ZSBtb2RhbCB0aXRsZVxuICBwcml2YXRlIHVwZGF0ZU1vZGFsVGl0bGUoKTogdm9pZCB7XG4gICAgLy8gTW9kYWwgdGl0bGUgY2FuIGJlIGN1c3RvbWl6ZWQgdmlhIHZhbHVlXG4gIH1cblxuICAvLyBIaWRlIG11bHRpLXNlbGVjdCBVSVxuICBwcml2YXRlIGhpZGVNdWx0aVNlbGVjdFVJKCk6IHZvaWQge1xuICAgIC8vIEhpZGUgbXVsdGktc2VsZWN0IHJlbGF0ZWQgVUkgZWxlbWVudHNcbiAgfVxuXG4gIC8vIFVwZGF0ZSBtdWx0aS1zZWxlY3QgVUlcbiAgcHJpdmF0ZSB1cGRhdGVNdWx0aVNlbGVjdFVJKCk6IHZvaWQge1xuICAgIC8vIFVwZGF0ZSBtdWx0aS1zZWxlY3QgVUkgc3RhdGVcbiAgfVxuXG4gIC8vIFVwZGF0ZSBzZWxlY3RlZCBjaXRpZXMgZGlzcGxheVxuICBwcml2YXRlIHVwZGF0ZVNlbGVjdGVkQ2l0aWVzRGlzcGxheSgpOiB2b2lkIHtcbiAgICAvLyBVcGRhdGUgZGlzcGxheSBvZiBzZWxlY3RlZCBjaXRpZXMgaW4gbXVsdGktc2VsZWN0IG1vZGVcbiAgfVxuXG4gIC8vIFVwZGF0ZSBjaXR5IGJ1dHRvbiBzdGF0ZXNcbiAgcHJpdmF0ZSB1cGRhdGVDaXR5QnV0dG9uU3RhdGVzKCk6IHZvaWQge1xuICAgIC8vIFVwZGF0ZSB2aXN1YWwgc3RhdGUgb2YgY2l0eSBidXR0b25zIGluIG11bHRpLXNlbGVjdCBtb2RlXG4gIH1cblxuICAvLyBEaXNwYXRjaCB0cmlwIHBsYW5uZXIgY2l0eSBjaGFuZ2UgZXZlbnRcbiAgcHJpdmF0ZSBkaXNwYXRjaFRyaXBDaXR5Q2hhbmdlRXZlbnQodHlwZTogJ2RlcGFydHVyZScgfCAnZGVzdGluYXRpb24nLCBjaXR5TmFtZTogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ3RyaXAtcGxhbm5lcjpjaXR5LWNoYW5nZWQnLCB7XG4gICAgICBkZXRhaWw6IHsgdHlwZSwgY2l0eTogY2l0eU5hbWUgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICB9KVxuICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpXG4gIH1cblxuICAvLyBTdG9wIGV2ZW50IHByb3BhZ2F0aW9uXG4gIHN0b3BQcm9wYWdhdGlvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICB9XG5cbiAgc3dpdGNoVG9TaW5nbGVTZWxlY3QoKTogdm9pZCB7XG4gICAgdGhpcy5pc011bHRpU2VsZWN0TW9kZSA9IGZhbHNlXG4gICAgdGhpcy5zZWxlY3RlZENpdGllcyA9IFtdXG4gICAgdGhpcy51cGRhdGVNdWx0aVNlbGVjdFVJKClcbiAgfVxuXG4gIHN3aXRjaFRvTXVsdGlTZWxlY3QoKTogdm9pZCB7XG4gICAgdGhpcy5pc011bHRpU2VsZWN0TW9kZSA9IHRydWVcbiAgICB0aGlzLnVwZGF0ZU11bHRpU2VsZWN0VUkoKVxuICB9XG5cbiAgY29uZmlybU11bHRpU2VsZWN0KCk6IHZvaWQge1xuICAgIC8vIENvbmZpcm0gbXVsdGktc2VsZWN0IGFuZCBjbG9zZSBtb2RhbFxuICAgIGlmICh0aGlzLnNlbGVjdGVkQ2l0aWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIFRyaWdnZXIgZXZlbnQgd2l0aCBzZWxlY3RlZCBjaXRpZXNcbiAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdjaXR5LXNlbGVjdG9yOm11bHRpLWNpdGllcy1zZWxlY3RlZCcsIHtcbiAgICAgICAgZGV0YWlsOiB7IGNpdGllczogdGhpcy5zZWxlY3RlZENpdGllcyB9LFxuICAgICAgICBidWJibGVzOiB0cnVlXG4gICAgICB9KVxuICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudClcbiAgICB9XG4gICAgdGhpcy5jbG9zZU1vZGFsKClcbiAgfVxuXG4gIHNob3dEb21lc3RpYygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5oYXNUYWJEb21lc3RpY1RhcmdldCAmJiB0aGlzLmhhc1RhYkludGVybmF0aW9uYWxUYXJnZXQpIHtcbiAgICAgIHRoaXMudGFiRG9tZXN0aWNUYXJnZXQuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLWJsdWUtNTAwJylcbiAgICAgIHRoaXMudGFiRG9tZXN0aWNUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnYm9yZGVyLXRyYW5zcGFyZW50JylcbiAgICAgIHRoaXMudGFiSW50ZXJuYXRpb25hbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItYmx1ZS01MDAnKVxuICAgICAgdGhpcy50YWJJbnRlcm5hdGlvbmFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2JvcmRlci10cmFuc3BhcmVudCcpXG4gICAgfVxuICAgIGlmICh0aGlzLmhhc0RvbWVzdGljTGlzdFRhcmdldCkge1xuICAgICAgdGhpcy5kb21lc3RpY0xpc3RUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICB9XG4gICAgaWYgKHRoaXMuaGFzSW50ZXJuYXRpb25hbExpc3RUYXJnZXQpIHtcbiAgICAgIHRoaXMuaW50ZXJuYXRpb25hbExpc3RUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICB9XG4gICAgdGhpcy5jdXJyZW50UmVnaW9uVHlwZSA9ICdkb21lc3RpYydcbiAgfVxuXG4gIHNob3dJbnRlcm5hdGlvbmFsKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmhhc1RhYkludGVybmF0aW9uYWxUYXJnZXQgJiYgdGhpcy5oYXNUYWJEb21lc3RpY1RhcmdldCkge1xuICAgICAgdGhpcy50YWJJbnRlcm5hdGlvbmFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1ibHVlLTUwMCcpXG4gICAgICB0aGlzLnRhYkludGVybmF0aW9uYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnYm9yZGVyLXRyYW5zcGFyZW50JylcbiAgICAgIHRoaXMudGFiRG9tZXN0aWNUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnYm9yZGVyLWJsdWUtNTAwJylcbiAgICAgIHRoaXMudGFiRG9tZXN0aWNUYXJnZXQuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLXRyYW5zcGFyZW50JylcbiAgICB9XG4gICAgaWYgKHRoaXMuaGFzSW50ZXJuYXRpb25hbExpc3RUYXJnZXQpIHtcbiAgICAgIHRoaXMuaW50ZXJuYXRpb25hbExpc3RUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICB9XG4gICAgaWYgKHRoaXMuaGFzRG9tZXN0aWNMaXN0VGFyZ2V0KSB7XG4gICAgICB0aGlzLmRvbWVzdGljTGlzdFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIH1cbiAgICB0aGlzLmN1cnJlbnRSZWdpb25UeXBlID0gJ2ludGVybmF0aW9uYWwnXG4gIH1cblxuICBqdW1wVG9MZXR0ZXIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGxldHRlciA9IGJ1dHRvbi5kYXRhc2V0LmxldHRlclxuICAgIGlmIChsZXR0ZXIpIHtcbiAgICAgIGNvbnN0IHRhcmdldEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtbGV0dGVyLXNlY3Rpb249XCIke2xldHRlcn1cIl1gKVxuICAgICAgaWYgKHRhcmdldEVsZW1lbnQpIHtcbiAgICAgICAgdGFyZ2V0RWxlbWVudC5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzY3JvbGxUb1JlZ2lvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgcmVnaW9uID0gYnV0dG9uLmRhdGFzZXQucmVnaW9uXG4gICAgaWYgKHJlZ2lvbikge1xuICAgICAgY29uc3QgdGFyZ2V0RWxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1yZWdpb24tc2VjdGlvbj1cIiR7cmVnaW9ufVwiXWApXG4gICAgICBpZiAodGFyZ2V0RWxlbWVudCkge1xuICAgICAgICB0YXJnZXRFbGVtZW50LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGV4cGFuZEhvdENpdGllcygpOiB2b2lkIHtcbiAgICBjb25zdCBob3RDaXRpZXNTZWN0aW9uID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWhvdC1jaXRpZXNdJylcbiAgICBpZiAoaG90Q2l0aWVzU2VjdGlvbikge1xuICAgICAgaG90Q2l0aWVzU2VjdGlvbi5jbGFzc0xpc3QudG9nZ2xlKCdleHBhbmRlZCcpXG4gICAgfVxuICB9XG5cbiAgc2VhcmNoKCk6IHZvaWQge1xuICAgIHRoaXMuc2VhcmNoQ2l0aWVzKClcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wiZGVwYXJ0dXJlSW5wdXRcIiwgXCJkZXN0aW5hdGlvbklucHV0XCJdXG4gIFxuICBkZWNsYXJlIHJlYWRvbmx5IGRlcGFydHVyZUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVzdGluYXRpb25JbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0RlcGFydHVyZUlucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzRGVzdGluYXRpb25JbnB1dFRhcmdldDogYm9vbGVhblxuXG4gIC8vIFZhbGlkYXRlIGZvcm0gYmVmb3JlIHN1Ym1pc3Npb25cbiAgdmFsaWRhdGVGb3JtKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNEZXBhcnR1cmVJbnB1dFRhcmdldCB8fCAhdGhpcy5oYXNEZXN0aW5hdGlvbklucHV0VGFyZ2V0KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBkZXBhcnR1cmVDaXR5ID0gdGhpcy5kZXBhcnR1cmVJbnB1dFRhcmdldC52YWx1ZS50cmltKClcbiAgICBjb25zdCBkZXN0aW5hdGlvbkNpdHkgPSB0aGlzLmRlc3RpbmF0aW9uSW5wdXRUYXJnZXQudmFsdWUudHJpbSgpXG5cbiAgICAvLyBDaGVjayBpZiBkZXBhcnR1cmUgYW5kIGRlc3RpbmF0aW9uIGFyZSB0aGUgc2FtZVxuICAgIGlmIChkZXBhcnR1cmVDaXR5ICYmIGRlc3RpbmF0aW9uQ2l0eSAmJiBkZXBhcnR1cmVDaXR5ID09PSBkZXN0aW5hdGlvbkNpdHkpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgIGFsZXJ0KCdcdTUxRkFcdTUzRDFcdTU3MzBcdTRFMEVcdTc2RUVcdTc2ODRcdTU3MzBcdTRFMERcdTgwRkRcdTc2RjhcdTU0MEMnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5pbnRlcmZhY2UgU2VhcmNoSGlzdG9yeSB7XG4gIGRlcGFydHVyZV9jaXR5OiBzdHJpbmdcbiAgZGVzdGluYXRpb25fY2l0eTogc3RyaW5nXG4gIGRhdGU6IHN0cmluZ1xuICByZXR1cm5fZGF0ZT86IHN0cmluZ1xuICB0cmlwX3R5cGU6IHN0cmluZ1xuICBjYWJpbl9jbGFzcz86IHN0cmluZ1xuICB0aW1lc3RhbXA6IG51bWJlclxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXIge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcImNvbnRhaW5lclwiLCBcImxpc3RcIl1cblxuICBkZWNsYXJlIHJlYWRvbmx5IGNvbnRhaW5lclRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBsaXN0VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0NvbnRhaW5lclRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0xpc3RUYXJnZXQ6IGJvb2xlYW5cblxuICBwcml2YXRlIG1heEhpc3RvcnlJdGVtczogbnVtYmVyID0gNVxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgLy8gQ2hlY2sgaWYgdGFyZ2V0cyBleGlzdCBiZWZvcmUgcmVuZGVyaW5nXG4gICAgaWYgKHRoaXMuaGFzQ29udGFpbmVyVGFyZ2V0ICYmIHRoaXMuaGFzTGlzdFRhcmdldCkge1xuICAgICAgdGhpcy5yZW5kZXJIaXN0b3J5KClcbiAgICB9XG4gIH1cblxuICAvLyBTYXZlIGN1cnJlbnQgc2VhcmNoIHRvIGhpc3Rvcnkgd2hlbiBmb3JtIGlzIHN1Ym1pdHRlZFxuICBzYXZlU2VhcmNoKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGZvcm0gPSBldmVudC50YXJnZXQgYXMgSFRNTEZvcm1FbGVtZW50XG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoZm9ybSlcbiAgICBcbiAgICBjb25zdCBzZWFyY2hEYXRhOiBTZWFyY2hIaXN0b3J5ID0ge1xuICAgICAgZGVwYXJ0dXJlX2NpdHk6IGZvcm1EYXRhLmdldCgnZGVwYXJ0dXJlX2NpdHknKSBhcyBzdHJpbmcsXG4gICAgICBkZXN0aW5hdGlvbl9jaXR5OiBmb3JtRGF0YS5nZXQoJ2Rlc3RpbmF0aW9uX2NpdHknKSBhcyBzdHJpbmcsXG4gICAgICBkYXRlOiBmb3JtRGF0YS5nZXQoJ2RhdGUnKSBhcyBzdHJpbmcsXG4gICAgICByZXR1cm5fZGF0ZTogZm9ybURhdGEuZ2V0KCdyZXR1cm5fZGF0ZScpIGFzIHN0cmluZyB8fCB1bmRlZmluZWQsXG4gICAgICB0cmlwX3R5cGU6IGZvcm1EYXRhLmdldCgndHJpcF90eXBlJykgYXMgc3RyaW5nLFxuICAgICAgY2FiaW5fY2xhc3M6IGZvcm1EYXRhLmdldCgnY2FiaW5fY2xhc3MnKSBhcyBzdHJpbmcgfHwgdW5kZWZpbmVkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfVxuICAgIFxuICAgIHRoaXMuYWRkVG9IaXN0b3J5KHNlYXJjaERhdGEpXG4gIH1cblxuICBwcml2YXRlIGFkZFRvSGlzdG9yeShzZWFyY2hEYXRhOiBTZWFyY2hIaXN0b3J5KTogdm9pZCB7XG4gICAgbGV0IGhpc3RvcnkgPSB0aGlzLmdldEhpc3RvcnkoKVxuICAgIFxuICAgIC8vIFJlbW92ZSBkdXBsaWNhdGUgaWYgZXhpc3RzIChzYW1lIGRlcGFydHVyZSwgZGVzdGluYXRpb24sIGFuZCBkYXRlKVxuICAgIGhpc3RvcnkgPSBoaXN0b3J5LmZpbHRlcihpdGVtID0+IFxuICAgICAgIShpdGVtLmRlcGFydHVyZV9jaXR5ID09PSBzZWFyY2hEYXRhLmRlcGFydHVyZV9jaXR5ICYmIFxuICAgICAgICBpdGVtLmRlc3RpbmF0aW9uX2NpdHkgPT09IHNlYXJjaERhdGEuZGVzdGluYXRpb25fY2l0eSAmJlxuICAgICAgICBpdGVtLmRhdGUgPT09IHNlYXJjaERhdGEuZGF0ZSlcbiAgICApXG4gICAgXG4gICAgLy8gQWRkIG5ldyBzZWFyY2ggYXQgdGhlIGJlZ2lubmluZ1xuICAgIGhpc3RvcnkudW5zaGlmdChzZWFyY2hEYXRhKVxuICAgIFxuICAgIC8vIEtlZXAgb25seSB0aGUgbW9zdCByZWNlbnQgaXRlbXNcbiAgICBoaXN0b3J5ID0gaGlzdG9yeS5zbGljZSgwLCB0aGlzLm1heEhpc3RvcnlJdGVtcylcbiAgICBcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZmxpZ2h0X3NlYXJjaF9oaXN0b3J5JywgSlNPTi5zdHJpbmdpZnkoaGlzdG9yeSkpXG4gIH1cblxuICBwcml2YXRlIGdldEhpc3RvcnkoKTogU2VhcmNoSGlzdG9yeVtdIHtcbiAgICBjb25zdCBoaXN0b3J5U3RyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2ZsaWdodF9zZWFyY2hfaGlzdG9yeScpXG4gICAgaWYgKCFoaXN0b3J5U3RyKSByZXR1cm4gW11cbiAgICBcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UoaGlzdG9yeVN0cilcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVySGlzdG9yeSgpOiB2b2lkIHtcbiAgICAvLyBDaGVjayBpZiB0YXJnZXRzIGV4aXN0XG4gICAgaWYgKCF0aGlzLmhhc0NvbnRhaW5lclRhcmdldCB8fCAhdGhpcy5oYXNMaXN0VGFyZ2V0KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBoaXN0b3J5ID0gdGhpcy5nZXRIaXN0b3J5KClcbiAgICBcbiAgICBpZiAoaGlzdG9yeS5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuY29udGFpbmVyVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgdGhpcy5jb250YWluZXJUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICBcbiAgICBjb25zdCBoaXN0b3J5SFRNTCA9IGhpc3RvcnkubWFwKGl0ZW0gPT4ge1xuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGl0ZW0uZGF0ZSlcbiAgICAgIGNvbnN0IGRhdGVTdHIgPSBgJHtkYXRlLmdldE1vbnRoKCkgKyAxfS8ke2RhdGUuZ2V0RGF0ZSgpfWBcbiAgICAgIGNvbnN0IHRyaXBUeXBlVGV4dCA9IGl0ZW0udHJpcF90eXBlID09PSAncm91bmRfdHJpcCcgPyAnXHU1RjgwXHU4RkQ0JyA6ICdcdTUzNTVcdTdBMEInXG4gICAgICBcbiAgICAgIC8vIEJ1aWxkIFVSTCB3aXRoIHBhcmFtZXRlcnNcbiAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICBkZXBhcnR1cmVfY2l0eTogaXRlbS5kZXBhcnR1cmVfY2l0eSxcbiAgICAgICAgZGVzdGluYXRpb25fY2l0eTogaXRlbS5kZXN0aW5hdGlvbl9jaXR5LFxuICAgICAgICBkYXRlOiBpdGVtLmRhdGUsXG4gICAgICAgIHRyaXBfdHlwZTogaXRlbS50cmlwX3R5cGVcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmIChpdGVtLnJldHVybl9kYXRlKSB7XG4gICAgICAgIHBhcmFtcy5hcHBlbmQoJ3JldHVybl9kYXRlJywgaXRlbS5yZXR1cm5fZGF0ZSlcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGl0ZW0uY2FiaW5fY2xhc3MpIHtcbiAgICAgICAgcGFyYW1zLmFwcGVuZCgnY2FiaW5fY2xhc3MnLCBpdGVtLmNhYmluX2NsYXNzKVxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCB1cmwgPSBgL2ZsaWdodHMvc2VhcmNoPyR7cGFyYW1zLnRvU3RyaW5nKCl9YFxuICAgICAgXG4gICAgICByZXR1cm4gYFxuICAgICAgICA8YSBocmVmPVwiJHt1cmx9XCIgXG4gICAgICAgICAgIGNsYXNzPVwiaW5saW5lLWJsb2NrIHdoaXRlc3BhY2Utbm93cmFwIHB4LTMgcHktMS41IHJvdW5kZWQtZnVsbCBiZy1ncmF5LTEwMCB0ZXh0LXNtIHRleHQtZ3JheS02MDAgaG92ZXI6YmctYmx1ZS01MCBob3Zlcjp0ZXh0LWJsdWUtNjAwIHRyYW5zaXRpb24tY29sb3JzXCI+XG4gICAgICAgICAgJHtpdGVtLmRlcGFydHVyZV9jaXR5fSBcdTIxOTIgJHtpdGVtLmRlc3RpbmF0aW9uX2NpdHl9ICAke2RhdGVTdHJ9ICAke3RyaXBUeXBlVGV4dH1cbiAgICAgICAgPC9hPlxuICAgICAgYFxuICAgIH0pLmpvaW4oJycpXG4gICAgXG4gICAgdGhpcy5saXN0VGFyZ2V0LmlubmVySFRNTCA9IGhpc3RvcnlIVE1MXG4gIH1cblxuICBjbGVhckhpc3RvcnkoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgXG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2ZsaWdodF9zZWFyY2hfaGlzdG9yeScpXG4gICAgXG4gICAgaWYgKHRoaXMuaGFzQ29udGFpbmVyVGFyZ2V0ICYmIHRoaXMuaGFzTGlzdFRhcmdldCkge1xuICAgICAgdGhpcy5jb250YWluZXJUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgIHRoaXMubGlzdFRhcmdldC5pbm5lckhUTUwgPSAnJ1xuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwibW9kYWxcIixcbiAgICBcInNlbGVjdGVkRGF0ZVwiLFxuICAgIFwiZGF0ZUlucHV0XCIsXG4gICAgXCJkYXRlQnV0dG9uXCIsXG4gICAgXCJleGFjdFRhYlwiLFxuICAgIFwiZnV6enlUYWJcIixcbiAgICBcImV4YWN0RGF0ZUNvbnRlbnRcIixcbiAgICBcImZ1enp5RGF0ZUNvbnRlbnRcIixcbiAgICBcIm1vbnRoQnV0dG9uXCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgY3VycmVudERhdGU6IFN0cmluZ1xuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNNb2RhbFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IHNlbGVjdGVkRGF0ZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkYXRlSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkYXRlQnV0dG9uVGFyZ2V0czogSFRNTEJ1dHRvbkVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1NlbGVjdGVkRGF0ZVRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0RhdGVJbnB1dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGV4YWN0VGFiVGFyZ2V0OiBIVE1MQnV0dG9uRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGZ1enp5VGFiVGFyZ2V0OiBIVE1MQnV0dG9uRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGV4YWN0RGF0ZUNvbnRlbnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZnV6enlEYXRlQ29udGVudFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBtb250aEJ1dHRvblRhcmdldHM6IEhUTUxCdXR0b25FbGVtZW50W11cbiAgZGVjbGFyZSBjdXJyZW50RGF0ZVZhbHVlOiBzdHJpbmdcblxuICBwcml2YXRlIHNlbGVjdGVkRGF0ZU9iajogRGF0ZSA9IG5ldyBEYXRlKClcbiAgcHJpdmF0ZSBjdXJyZW50TXVsdGlDaXR5U2VnbWVudElkOiBzdHJpbmcgfCBudWxsID0gbnVsbFxuICBwcml2YXRlIHNlbGVjdGVkTW9udGhzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKVxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJEYXRlUGlja2VyIGNvbm5lY3RlZFwiKVxuICAgIC8vIFNlbmQgY2xpZW50J3MgbG9jYWwgZGF0ZSB0byBzZXJ2ZXIgZm9yIHRpbWV6b25lLWF3YXJlIGZpbHRlcmluZ1xuICAgIGNvbnN0IGNsaWVudFRvZGF5ID0gdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKCkpXG4gICAgXG4gICAgLy8gSW5pdGlhbGl6ZSB3aXRoIHRvZGF5J3MgZGF0ZSB1c2luZyBjbGllbnQgdGltZXpvbmVcbiAgICB0aGlzLnNlbGVjdGVkRGF0ZU9iaiA9IG5ldyBEYXRlKClcbiAgICB0aGlzLmN1cnJlbnREYXRlVmFsdWUgPSB0aGlzLmZvcm1hdERhdGUodGhpcy5zZWxlY3RlZERhdGVPYmopXG4gICAgXG4gICAgLy8gVXBkYXRlIGRpc3BsYXllZCBkYXRlIGltbWVkaWF0ZWx5IHdpdGggY2xpZW50IHRpbWV6b25lXG4gICAgaWYgKHRoaXMuaGFzU2VsZWN0ZWREYXRlVGFyZ2V0KSB7XG4gICAgICB0aGlzLnVwZGF0ZURpc3BsYXllZERhdGUoKVxuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgaGlkZGVuIGlucHV0IHdpdGggY2xpZW50IHRpbWV6b25lIGRhdGVcbiAgICBpZiAodGhpcy5oYXNEYXRlSW5wdXRUYXJnZXQpIHtcbiAgICAgIHRoaXMuZGF0ZUlucHV0VGFyZ2V0LnZhbHVlID0gdGhpcy5jdXJyZW50RGF0ZVZhbHVlXG4gICAgfVxuICAgIFxuICAgIC8vIE9ubHkgYWNjZXNzIG1vZGFsIGlmIGl0IGV4aXN0cyBpbiB0aGlzIGNvbnRyb2xsZXIncyBzY29wZVxuICAgIGlmICghdGhpcy5oYXNNb2RhbFRhcmdldCkge1xuICAgICAgY29uc29sZS5sb2coXCJEYXRlUGlja2VyOiBObyBtb2RhbCB0YXJnZXQgZm91bmQsIHNraXBwaW5nIG1vZGFsIHNldHVwXCIpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgY29uc3QgbW9kYWxFbGVtZW50ID0gdGhpcy5tb2RhbFRhcmdldFxuICAgIFxuICAgIC8vIFN0b3JlIGNsaWVudCdzIHRvZGF5IGRhdGUgYXMgZGF0YSBhdHRyaWJ1dGUgZm9yIHNlcnZlciB0byB1c2VcbiAgICBpZiAobW9kYWxFbGVtZW50KSB7XG4gICAgICBtb2RhbEVsZW1lbnQuZGF0YXNldC5jbGllbnRUb2RheSA9IGNsaWVudFRvZGF5XG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSBwYXN0IGRhdGUgYnV0dG9ucyBiYXNlZCBvbiBjbGllbnQgdGltZXpvbmVcbiAgICB0aGlzLnVwZGF0ZVBhc3REYXRlcygpXG4gICAgXG4gICAgLy8gTGlzdGVuIGZvciBtdWx0aS1jaXR5IGV2ZW50c1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtdWx0aS1jaXR5Om9wZW4tZGF0ZS1waWNrZXInLCB0aGlzLmhhbmRsZU11bHRpQ2l0eU9wZW4uYmluZCh0aGlzKSBhcyB1bmtub3duIGFzIEV2ZW50TGlzdGVuZXIpXG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgIHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtdWx0aS1jaXR5Om9wZW4tZGF0ZS1waWNrZXInLCB0aGlzLmhhbmRsZU11bHRpQ2l0eU9wZW4uYmluZCh0aGlzKSBhcyB1bmtub3duIGFzIEV2ZW50TGlzdGVuZXIpXG4gIH1cblxuICAvLyBIYW5kbGUgbXVsdGktY2l0eSBkYXRlIHBpY2tlciByZXF1ZXN0XG4gIHByaXZhdGUgaGFuZGxlTXVsdGlDaXR5T3BlbihldmVudDogQ3VzdG9tRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB7IHNlZ21lbnRJZCB9ID0gZXZlbnQuZGV0YWlsXG4gICAgY29uc29sZS5sb2coJ0RhdGUgcGlja2VyOiBSZWNlaXZlZCBtdWx0aS1jaXR5IG9wZW4gcmVxdWVzdCcsIHsgc2VnbWVudElkIH0pXG4gICAgdGhpcy5jdXJyZW50TXVsdGlDaXR5U2VnbWVudElkID0gc2VnbWVudElkXG4gICAgdGhpcy5vcGVuTW9kYWwoKVxuICB9XG5cbiAgLy8gT3BlbiBjaGVjay1pbiBkYXRlIHBpY2tlclxuICBvcGVuQ2hlY2tJbigpOiB2b2lkIHtcbiAgICBjb25zdCBjaGVja0luRGF0ZSA9IHByb21wdChcIlx1OEJGN1x1OEY5M1x1NTE2NVx1NTE2NVx1NEY0Rlx1NjVFNVx1NjcxRiAoWVlZWS1NTS1ERClcIiwgdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKCkpKVxuICAgIGlmIChjaGVja0luRGF0ZSkge1xuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZilcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdjaGVja19pbicsIGNoZWNrSW5EYXRlKVxuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmwudG9TdHJpbmcoKVxuICAgIH1cbiAgfVxuXG4gIC8vIE9wZW4gY2hlY2stb3V0IGRhdGUgcGlja2VyXG4gIG9wZW5DaGVja091dCgpOiB2b2lkIHtcbiAgICBjb25zdCB0b21vcnJvdyA9IG5ldyBEYXRlKClcbiAgICB0b21vcnJvdy5zZXREYXRlKHRvbW9ycm93LmdldERhdGUoKSArIDEpXG4gICAgY29uc3QgY2hlY2tPdXREYXRlID0gcHJvbXB0KFwiXHU4QkY3XHU4RjkzXHU1MTY1XHU3OUJCXHU1RTk3XHU2NUU1XHU2NzFGIChZWVlZLU1NLUREKVwiLCB0aGlzLmZvcm1hdERhdGUodG9tb3Jyb3cpKVxuICAgIGlmIChjaGVja091dERhdGUpIHtcbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpXG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnY2hlY2tfb3V0JywgY2hlY2tPdXREYXRlKVxuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmwudG9TdHJpbmcoKVxuICAgIH1cbiAgfVxuXG4gIC8vIE9wZW4gZGF0ZSBwaWNrZXIgbW9kYWxcbiAgb3Blbk1vZGFsKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNNb2RhbFRhcmdldCkgcmV0dXJuXG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJ1xuICB9XG5cbiAgLy8gQ2xvc2UgZGF0ZSBwaWNrZXIgbW9kYWxcbiAgY2xvc2VNb2RhbCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaGFzTW9kYWxUYXJnZXQpIHJldHVyblxuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJydcbiAgfVxuXG4gIC8vIFNlbGVjdCBhIGRhdGVcbiAgc2VsZWN0RGF0ZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgZGF0ZVN0ciA9IGJ1dHRvbi5kYXRhc2V0LmRhdGUgfHwgJydcbiAgICBcbiAgICBpZiAoIWRhdGVTdHIpIHJldHVyblxuXG4gICAgLy8gUHJldmVudCBzZWxlY3RpbmcgZGF0ZXMgYmVmb3JlIHRvZGF5ICh1c2luZyBjbGllbnQgdGltZXpvbmUpXG4gICAgY29uc3Qgc2VsZWN0ZWREYXRlID0gbmV3IERhdGUoYCR7ZGF0ZVN0cn1UMDA6MDA6MDBgKVxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxuICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgc2VsZWN0ZWREYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgXG4gICAgaWYgKHNlbGVjdGVkRGF0ZSA8IHRvZGF5KSB7XG4gICAgICBjb25zb2xlLmxvZygnQ2Fubm90IHNlbGVjdCBwYXN0IGRhdGVzIChjbGllbnQgdGltZXpvbmUgY2hlY2spJylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMuc2VsZWN0ZWREYXRlT2JqID0gc2VsZWN0ZWREYXRlXG4gICAgdGhpcy5jdXJyZW50RGF0ZVZhbHVlID0gZGF0ZVN0clxuICAgIFxuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgZm9yIG11bHRpLWNpdHlcbiAgICBpZiAodGhpcy5jdXJyZW50TXVsdGlDaXR5U2VnbWVudElkKSB7XG4gICAgICBjb25zb2xlLmxvZygnRGF0ZSBwaWNrZXI6IE11bHRpLWNpdHkgbW9kZSwgZGlzcGF0Y2hpbmcgZXZlbnQnLCB7XG4gICAgICAgIHNlZ21lbnRJZDogdGhpcy5jdXJyZW50TXVsdGlDaXR5U2VnbWVudElkLFxuICAgICAgICBkYXRlOiBkYXRlU3RyXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBUcmlnZ2VyIGV2ZW50IHRvIHVwZGF0ZSBtdWx0aS1jaXR5IHNlZ21lbnRcbiAgICAgIGNvbnN0IHVwZGF0ZUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdkYXRlLXBpY2tlcjpkYXRlLXNlbGVjdGVkJywge1xuICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICBzZWdtZW50SWQ6IHRoaXMuY3VycmVudE11bHRpQ2l0eVNlZ21lbnRJZCxcbiAgICAgICAgICBkYXRlOiBkYXRlU3RyXG4gICAgICAgIH0sXG4gICAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICAgIH0pXG4gICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KHVwZGF0ZUV2ZW50KVxuICAgICAgXG4gICAgICAvLyBSZXNldCBtdWx0aS1jaXR5IHN0YXRlXG4gICAgICB0aGlzLmN1cnJlbnRNdWx0aUNpdHlTZWdtZW50SWQgPSBudWxsXG4gICAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICAgIH0gZWxzZSBpZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLmluY2x1ZGVzKCcvZmxpZ2h0cy9zZWFyY2gnKSkge1xuICAgICAgLy8gU2VhcmNoIHBhZ2UgbW9kZSAtIHJlbG9hZCB3aXRoIG5ldyBkYXRlXG4gICAgICBjb25zb2xlLmxvZygnRGF0ZSBwaWNrZXI6IFNlYXJjaCBwYWdlIG1vZGUsIHJlbG9hZGluZyB3aXRoIG5ldyBkYXRlJylcbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpXG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnZGF0ZScsIGRhdGVTdHIpXG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybC50b1N0cmluZygpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCdEYXRlIHBpY2tlcjogUmVndWxhciBtb2RlJylcbiAgICAgIC8vIFJlZ3VsYXIgc2luZ2xlL3JvdW5kIHRyaXAgc2VsZWN0aW9uXG4gICAgICBpZiAodGhpcy5oYXNTZWxlY3RlZERhdGVUYXJnZXQpIHtcbiAgICAgICAgdGhpcy51cGRhdGVEaXNwbGF5ZWREYXRlKClcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhhc0RhdGVJbnB1dFRhcmdldCkge1xuICAgICAgICB0aGlzLmRhdGVJbnB1dFRhcmdldC52YWx1ZSA9IGRhdGVTdHJcbiAgICAgIH1cbiAgICAgIHRoaXMuY2xvc2VNb2RhbCgpXG4gICAgfVxuICB9XG5cbiAgLy8gVXBkYXRlIHRoZSBkaXNwbGF5ZWQgZGF0ZSBpbiB0aGUgbWFpbiB2aWV3XG4gIHByaXZhdGUgdXBkYXRlRGlzcGxheWVkRGF0ZSgpOiB2b2lkIHtcbiAgICBjb25zdCBtb250aCA9IHRoaXMuc2VsZWN0ZWREYXRlT2JqLmdldE1vbnRoKCkgKyAxXG4gICAgY29uc3QgZGF5ID0gdGhpcy5zZWxlY3RlZERhdGVPYmouZ2V0RGF0ZSgpXG4gICAgY29uc3QgZGF5TmFtZSA9IHRoaXMuZ2V0RGF5TmFtZSh0aGlzLnNlbGVjdGVkRGF0ZU9iailcbiAgICBcbiAgICB0aGlzLnNlbGVjdGVkRGF0ZVRhcmdldC5pbm5lckhUTUwgPSBgXG4gICAgICAke21vbnRofTxzcGFuIGNsYXNzPVwidGV4dC1sZyBmb250LW1lZGl1bSBteC0wLjVcIj5cdTY3MDg8L3NwYW4+JHtkYXl9PHNwYW4gY2xhc3M9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIG1sLTAuNSBtci0yXCI+XHU2NUU1PC9zcGFuPlxuICAgICAgPHNwYW4gY2xhc3M9XCJ0ZXh0LWJhc2UgdGV4dC1ncmF5LTUwMCBmb250LW1lZGl1bVwiPiR7ZGF5TmFtZX08L3NwYW4+XG4gICAgYFxuICB9XG5cbiAgLy8gR2V0IGRheSBuYW1lIGluIENoaW5lc2VcbiAgcHJpdmF0ZSBnZXREYXlOYW1lKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxuICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgY29uc3QgdGFyZ2V0RGF0ZSA9IG5ldyBEYXRlKGRhdGUpXG4gICAgdGFyZ2V0RGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICAgIFxuICAgIGNvbnN0IGRpZmZUaW1lID0gdGFyZ2V0RGF0ZS5nZXRUaW1lKCkgLSB0b2RheS5nZXRUaW1lKClcbiAgICBjb25zdCBkaWZmRGF5cyA9IE1hdGgucm91bmQoZGlmZlRpbWUgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpXG4gICAgXG4gICAgaWYgKGRpZmZEYXlzID09PSAwKSByZXR1cm4gJ1x1NEVDQVx1NTkyOSdcbiAgICBpZiAoZGlmZkRheXMgPT09IDEpIHJldHVybiAnXHU2NjBFXHU1OTI5J1xuICAgIGlmIChkaWZmRGF5cyA9PT0gMikgcmV0dXJuICdcdTU0MEVcdTU5MjknXG4gICAgXG4gICAgY29uc3Qgd2Vla2RheXMgPSBbJ1x1NTQ2OFx1NjVFNScsICdcdTU0NjhcdTRFMDAnLCAnXHU1NDY4XHU0RThDJywgJ1x1NTQ2OFx1NEUwOScsICdcdTU0NjhcdTU2REInLCAnXHU1NDY4XHU0RTk0JywgJ1x1NTQ2OFx1NTE2RCddXG4gICAgcmV0dXJuIHdlZWtkYXlzW2RhdGUuZ2V0RGF5KCldXG4gIH1cblxuICAvLyBGb3JtYXQgZGF0ZSBhcyBZWVlZLU1NLUREXG4gIHByaXZhdGUgZm9ybWF0RGF0ZShkYXRlOiBEYXRlKTogc3RyaW5nIHtcbiAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpXG4gICAgY29uc3QgbW9udGggPSBTdHJpbmcoZGF0ZS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKVxuICAgIGNvbnN0IGRheSA9IFN0cmluZyhkYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKVxuICAgIHJldHVybiBgJHt5ZWFyfS0ke21vbnRofS0ke2RheX1gXG4gIH1cblxuICAvLyBHZW5lcmF0ZSBjYWxlbmRhciBkYXRhXG4gIGdlbmVyYXRlQ2FsZW5kYXIoKTogQXJyYXk8YW55PiB7XG4gICAgY29uc3QgcmVzdWx0ID0gW11cbiAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZSgpXG4gICAgXG4gICAgLy8gR2VuZXJhdGUgbmV4dCA2MCBkYXlzXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2MDsgaSsrKSB7XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoc3RhcnREYXRlKVxuICAgICAgZGF0ZS5zZXREYXRlKHN0YXJ0RGF0ZS5nZXREYXRlKCkgKyBpKVxuICAgICAgXG4gICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgIGRhdGU6IHRoaXMuZm9ybWF0RGF0ZShkYXRlKSxcbiAgICAgICAgZGF5OiBkYXRlLmdldERhdGUoKSxcbiAgICAgICAgbW9udGg6IGRhdGUuZ2V0TW9udGgoKSArIDEsXG4gICAgICAgIHllYXI6IGRhdGUuZ2V0RnVsbFllYXIoKSxcbiAgICAgICAgd2Vla2RheTogZGF0ZS5nZXREYXkoKSxcbiAgICAgICAgaXNUb2RheTogdGhpcy5pc1RvZGF5KGRhdGUpLFxuICAgICAgICBpc1NlbGVjdGVkOiB0aGlzLmZvcm1hdERhdGUoZGF0ZSkgPT09IHRoaXMuY3VycmVudERhdGVWYWx1ZVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgLy8gQ2hlY2sgaWYgZGF0ZSBpcyB0b2RheVxuICBwcml2YXRlIGlzVG9kYXkoZGF0ZTogRGF0ZSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxuICAgIHJldHVybiBkYXRlLmdldERhdGUoKSA9PT0gdG9kYXkuZ2V0RGF0ZSgpICYmXG4gICAgICAgICAgIGRhdGUuZ2V0TW9udGgoKSA9PT0gdG9kYXkuZ2V0TW9udGgoKSAmJlxuICAgICAgICAgICBkYXRlLmdldEZ1bGxZZWFyKCkgPT09IHRvZGF5LmdldEZ1bGxZZWFyKClcbiAgfVxuXG4gIC8vIFVwZGF0ZSBkYXRlIGJ1dHRvbnMgdG8gZGlzYWJsZSBwYXN0IGRhdGVzIGJhc2VkIG9uIGNsaWVudCB0aW1lem9uZVxuICBwcml2YXRlIHVwZGF0ZVBhc3REYXRlcygpOiB2b2lkIHtcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKClcbiAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICAgIGNvbnN0IHRvZGF5U3RyID0gdGhpcy5mb3JtYXREYXRlKHRvZGF5KVxuICAgIFxuICAgIHRoaXMuZGF0ZUJ1dHRvblRhcmdldHMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgY29uc3QgZGF0ZVN0ciA9IGJ1dHRvbi5kYXRhc2V0LmRhdGVcbiAgICAgIGlmICghZGF0ZVN0cikgcmV0dXJuXG4gICAgICBcbiAgICAgIGNvbnN0IGJ1dHRvbkRhdGUgPSBuZXcgRGF0ZShgJHtkYXRlU3RyfVQwMDowMDowMGApXG4gICAgICBidXR0b25EYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgdG9kYXkgKGNsaWVudCB0aW1lem9uZSlcbiAgICAgIGNvbnN0IHRvZGF5TWFya2VyID0gYnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXRvZGF5LW1hcmtlcl0nKSBhcyBIVE1MRWxlbWVudFxuICAgICAgaWYgKGRhdGVTdHIgPT09IHRvZGF5U3RyICYmIHRvZGF5TWFya2VyKSB7XG4gICAgICAgIHRvZGF5TWFya2VyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChidXR0b25EYXRlIDwgdG9kYXkpIHtcbiAgICAgICAgLy8gRGlzYWJsZSBwYXN0IGRhdGVzXG4gICAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IHRydWVcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktMzAnLCAnY3Vyc29yLW5vdC1hbGxvd2VkJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEVuYWJsZSBjdXJyZW50IGFuZCBmdXR1cmUgZGF0ZXNcbiAgICAgICAgYnV0dG9uLmRpc2FibGVkID0gZmFsc2VcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ29wYWNpdHktMzAnLCAnY3Vyc29yLW5vdC1hbGxvd2VkJylcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIGNvbnNvbGUubG9nKGBEYXRlUGlja2VyOiBVcGRhdGVkICR7dGhpcy5kYXRlQnV0dG9uVGFyZ2V0cy5sZW5ndGh9IGRhdGUgYnV0dG9ucyBiYXNlZCBvbiBjbGllbnQgdGltZXpvbmUgKHRvZGF5OiAke3RvZGF5U3RyfSlgKVxuICB9XG5cbiAgLy8gU3dpdGNoIHRvIGV4YWN0IGRhdGUgdGFiXG4gIHN3aXRjaFRvRXhhY3REYXRlKCk6IHZvaWQge1xuICAgIHRoaXMuZXhhY3RUYWJUYXJnZXQuY2xhc3NMaXN0LmFkZCgnZm9udC1ib2xkJywgJ2JvcmRlci1iLTInLCAnYm9yZGVyLWJsYWNrJylcbiAgICB0aGlzLmV4YWN0VGFiVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS01MDAnKVxuICAgIHRoaXMuZnV6enlUYWJUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZm9udC1ib2xkJywgJ2JvcmRlci1iLTInLCAnYm9yZGVyLWJsYWNrJylcbiAgICB0aGlzLmZ1enp5VGFiVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS01MDAnKVxuICAgIFxuICAgIHRoaXMuZXhhY3REYXRlQ29udGVudFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIHRoaXMuZnV6enlEYXRlQ29udGVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICB9XG5cbiAgLy8gU3dpdGNoIHRvIGZ1enp5IGRhdGUgdGFiXG4gIHN3aXRjaFRvRnV6enlEYXRlKCk6IHZvaWQge1xuICAgIHRoaXMuZnV6enlUYWJUYXJnZXQuY2xhc3NMaXN0LmFkZCgnZm9udC1ib2xkJywgJ2JvcmRlci1iLTInLCAnYm9yZGVyLWJsYWNrJylcbiAgICB0aGlzLmZ1enp5VGFiVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS01MDAnKVxuICAgIHRoaXMuZXhhY3RUYWJUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZm9udC1ib2xkJywgJ2JvcmRlci1iLTInLCAnYm9yZGVyLWJsYWNrJylcbiAgICB0aGlzLmV4YWN0VGFiVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS01MDAnKVxuICAgIFxuICAgIHRoaXMuZnV6enlEYXRlQ29udGVudFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIHRoaXMuZXhhY3REYXRlQ29udGVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICB9XG5cbiAgLy8gVG9nZ2xlIG1vbnRoIHNlbGVjdGlvblxuICB0b2dnbGVNb250aChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50XG4gICAgY29uc3QgbW9udGggPSBidXR0b24uZGF0YXNldC5tb250aFxuICAgIFxuICAgIGlmICghbW9udGgpIHJldHVyblxuXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRNb250aHMuaGFzKG1vbnRoKSkge1xuICAgICAgLy8gRGVzZWxlY3RcbiAgICAgIHRoaXMuc2VsZWN0ZWRNb250aHMuZGVsZXRlKG1vbnRoKVxuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLXllbGxvdy0xMDAnLCAnYm9yZGVyLXllbGxvdy01MDAnKVxuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2JnLWdyYXktNTAnKVxuICAgICAgXG4gICAgICAvLyBIaWRlIGNoZWNrbWFya1xuICAgICAgY29uc3Qgc3ZnID0gYnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpXG4gICAgICBpZiAoc3ZnKSBzdmcuY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTcwMCcpXG4gICAgICBpZiAoc3ZnKSBzdmcuY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTQwMCcpXG4gICAgICBcbiAgICAgIGNvbnN0IHNwYW4gPSBidXR0b24ucXVlcnlTZWxlY3Rvcignc3BhbicpXG4gICAgICBpZiAoc3Bhbikgc3Bhbi5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktODAwJywgJ2ZvbnQtbWVkaXVtJylcbiAgICAgIGlmIChzcGFuKSBzcGFuLmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS01MDAnKVxuICAgICAgXG4gICAgICAvLyBGaW5kIGFuZCBoaWRlIGNoZWNrbWFyayBieSBsb29raW5nIGZvciBhbGwgZGl2cyB3aXRoIHN2ZyBpbnNpZGVcbiAgICAgIGNvbnN0IGNoZWNrbWFya3MgPSBidXR0b24ucXVlcnlTZWxlY3RvckFsbCgnZGl2W2NsYXNzKj1cImFic29sdXRlXCJdJylcbiAgICAgIGNoZWNrbWFya3MuZm9yRWFjaChkaXYgPT4ge1xuICAgICAgICBpZiAoZGl2LnF1ZXJ5U2VsZWN0b3IoJ3N2Z1t3aWR0aD1cIjEyXCJdJykpIHtcbiAgICAgICAgICBkaXYuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2VsZWN0XG4gICAgICB0aGlzLnNlbGVjdGVkTW9udGhzLmFkZChtb250aClcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1ncmF5LTUwJylcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdiZy15ZWxsb3ctMTAwJywgJ2JvcmRlci15ZWxsb3ctNTAwJylcbiAgICAgIFxuICAgICAgLy8gU2hvdyBjaGVja21hcmsgc3R5bGVcbiAgICAgIGNvbnN0IHN2ZyA9IGJ1dHRvbi5xdWVyeVNlbGVjdG9yKCdzdmcnKVxuICAgICAgaWYgKHN2Zykgc3ZnLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS00MDAnKVxuICAgICAgaWYgKHN2Zykgc3ZnLmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS03MDAnKVxuICAgICAgXG4gICAgICBjb25zdCBzcGFuID0gYnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKVxuICAgICAgaWYgKHNwYW4pIHNwYW4uY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTUwMCcpXG4gICAgICBpZiAoc3Bhbikgc3Bhbi5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktODAwJywgJ2ZvbnQtbWVkaXVtJylcbiAgICAgIFxuICAgICAgLy8gRmluZCBhbmQgc2hvdyBjaGVja21hcmtcbiAgICAgIGNvbnN0IGNoZWNrbWFya3MgPSBidXR0b24ucXVlcnlTZWxlY3RvckFsbCgnZGl2W2NsYXNzKj1cImFic29sdXRlXCJdJylcbiAgICAgIGNoZWNrbWFya3MuZm9yRWFjaChkaXYgPT4ge1xuICAgICAgICBpZiAoZGl2LnF1ZXJ5U2VsZWN0b3IoJ3N2Z1t3aWR0aD1cIjEyXCJdJykpIHtcbiAgICAgICAgICBkaXYuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvLyBTZWxlY3QgcXVpY2sgcmFuZ2UgKDEsIDMsIG9yIDYgbW9udGhzKVxuICBzZWxlY3RRdWlja1JhbmdlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBjb25zdCByYW5nZVN0ciA9IGJ1dHRvbi5kYXRhc2V0LnJhbmdlXG4gICAgXG4gICAgaWYgKCFyYW5nZVN0cikgcmV0dXJuXG4gICAgXG4gICAgY29uc3QgcmFuZ2UgPSBwYXJzZUludChyYW5nZVN0ciwgMTApXG4gICAgXG4gICAgLy8gQ2xlYXIgY3VycmVudCBzZWxlY3Rpb25cbiAgICB0aGlzLmNsZWFyTW9udGhTZWxlY3Rpb24oKVxuICAgIFxuICAgIC8vIFNlbGVjdCBuZXh0IE4gbW9udGhzXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXG4gICAgY29uc3QgY3VycmVudE1vbnRoID0gbmV3IERhdGUodG9kYXkuZ2V0RnVsbFllYXIoKSwgdG9kYXkuZ2V0TW9udGgoKSwgMSlcbiAgICBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhbmdlOyBpKyspIHtcbiAgICAgIGNvbnN0IHRhcmdldE1vbnRoID0gbmV3IERhdGUoY3VycmVudE1vbnRoKVxuICAgICAgdGFyZ2V0TW9udGguc2V0TW9udGgoY3VycmVudE1vbnRoLmdldE1vbnRoKCkgKyBpKVxuICAgICAgY29uc3QgbW9udGhWYWx1ZSA9IGAke3RhcmdldE1vbnRoLmdldEZ1bGxZZWFyKCl9LSR7U3RyaW5nKHRhcmdldE1vbnRoLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpfWBcbiAgICAgIFxuICAgICAgLy8gRmluZCBhbmQgc2VsZWN0IHRoZSBidXR0b25cbiAgICAgIGNvbnN0IG1vbnRoQnV0dG9uID0gdGhpcy5tb250aEJ1dHRvblRhcmdldHMuZmluZChidG4gPT4gYnRuLmRhdGFzZXQubW9udGggPT09IG1vbnRoVmFsdWUpXG4gICAgICBpZiAobW9udGhCdXR0b24gJiYgIXRoaXMuc2VsZWN0ZWRNb250aHMuaGFzKG1vbnRoVmFsdWUpKSB7XG4gICAgICAgIG1vbnRoQnV0dG9uLmNsaWNrKClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBDbGVhciBtb250aCBzZWxlY3Rpb25cbiAgcHJpdmF0ZSBjbGVhck1vbnRoU2VsZWN0aW9uKCk6IHZvaWQge1xuICAgIHRoaXMubW9udGhCdXR0b25UYXJnZXRzLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgIGNvbnN0IG1vbnRoID0gYnV0dG9uLmRhdGFzZXQubW9udGhcbiAgICAgIGlmIChtb250aCAmJiB0aGlzLnNlbGVjdGVkTW9udGhzLmhhcyhtb250aCkpIHtcbiAgICAgICAgLy8gRGVzZWxlY3QgcHJvZ3JhbW1hdGljYWxseVxuICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhzLmRlbGV0ZShtb250aClcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLXllbGxvdy0xMDAnLCAnYm9yZGVyLXllbGxvdy01MDAnKVxuICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYmctZ3JheS01MCcpXG4gICAgICAgIFxuICAgICAgICBjb25zdCBzdmcgPSBidXR0b24ucXVlcnlTZWxlY3Rvcignc3ZnJylcbiAgICAgICAgaWYgKHN2Zykgc3ZnLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS03MDAnKVxuICAgICAgICBpZiAoc3ZnKSBzdmcuY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTQwMCcpXG4gICAgICAgIFxuICAgICAgICBjb25zdCBzcGFuID0gYnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKVxuICAgICAgICBpZiAoc3Bhbikgc3Bhbi5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktODAwJywgJ2ZvbnQtbWVkaXVtJylcbiAgICAgICAgaWYgKHNwYW4pIHNwYW4uY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTUwMCcpXG4gICAgICAgIFxuICAgICAgICBjb25zdCBjaGVja21hcmtzID0gYnV0dG9uLnF1ZXJ5U2VsZWN0b3JBbGwoJ2RpdltjbGFzcyo9XCJhYnNvbHV0ZVwiXScpXG4gICAgICAgIGNoZWNrbWFya3MuZm9yRWFjaChkaXYgPT4ge1xuICAgICAgICAgIGlmIChkaXYucXVlcnlTZWxlY3Rvcignc3ZnW3dpZHRoPVwiMTJcIl0nKSkge1xuICAgICAgICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyBDb25maXJtIGZ1enp5IGRhdGUgc2VsZWN0aW9uXG4gIGNvbmZpcm1GdXp6eURhdGUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRNb250aHMuc2l6ZSA9PT0gMCkge1xuICAgICAgYWxlcnQoJ1x1OEJGN1x1ODFGM1x1NUMxMVx1OTAwOVx1NjJFOVx1NEUwMFx1NEUyQVx1NjcwOFx1NEVGRCcpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBDb252ZXJ0IHNlbGVjdGVkIG1vbnRocyB0byBhIGNvbW1hLXNlcGFyYXRlZCBzdHJpbmdcbiAgICBjb25zdCBtb250aHNBcnJheSA9IEFycmF5LmZyb20odGhpcy5zZWxlY3RlZE1vbnRocykuc29ydCgpXG4gICAgY29uc3QgbW9udGhzU3RyaW5nID0gbW9udGhzQXJyYXkuam9pbignLCcpXG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBvbiBzZWFyY2ggcGFnZSAtIHJlbG9hZCB3aXRoIGZpcnN0IGRhdGUgb2YgZmlyc3Qgc2VsZWN0ZWQgbW9udGhcbiAgICBpZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLmluY2x1ZGVzKCcvZmxpZ2h0cy9zZWFyY2gnKSkge1xuICAgICAgY29uc29sZS5sb2coJ0RhdGUgcGlja2VyOiBTZWFyY2ggcGFnZSBmdXp6eSBtb2RlLCByZWxvYWRpbmcgd2l0aCBmaXJzdCBkYXRlIG9mIHNlbGVjdGVkIG1vbnRocycpXG4gICAgICBcbiAgICAgIC8vIEdldCB0aGUgZmlyc3QgZGF5IG9mIHRoZSBmaXJzdCBzZWxlY3RlZCBtb250aFxuICAgICAgY29uc3QgZmlyc3RNb250aCA9IG1vbnRoc0FycmF5WzBdXG4gICAgICBjb25zdCBbeWVhciwgbW9udGhdID0gZmlyc3RNb250aC5zcGxpdCgnLScpXG4gICAgICBjb25zdCBmaXJzdERhdGUgPSBgJHt5ZWFyfS0ke21vbnRofS0wMWBcbiAgICAgIFxuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZilcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdkYXRlJywgZmlyc3REYXRlKVxuICAgICAgLy8gU3RvcmUgZnV6enkgZGF0ZSBpbmZvIGZvciBmdXR1cmUgdXNlIGlmIG5lZWRlZFxuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2Z1enp5X21vbnRocycsIG1vbnRoc1N0cmluZylcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsLnRvU3RyaW5nKClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgdGhlIGRpc3BsYXkgd2l0aCBmdXp6eSBkYXRlIGluZm8gKGZvciBvdGhlciBwYWdlcylcbiAgICBpZiAodGhpcy5oYXNTZWxlY3RlZERhdGVUYXJnZXQpIHtcbiAgICAgIGNvbnN0IGZpcnN0TW9udGggPSBtb250aHNBcnJheVswXVxuICAgICAgY29uc3QgWywgbW9udGhdID0gZmlyc3RNb250aC5zcGxpdCgnLScpXG4gICAgICBjb25zdCBtb250aE51bSA9IHBhcnNlSW50KG1vbnRoLCAxMClcbiAgICAgIFxuICAgICAgaWYgKG1vbnRoc0FycmF5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVRhcmdldC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgJHttb250aE51bX08c3BhbiBjbGFzcz1cInRleHQtbGcgZm9udC1tZWRpdW0gbXgtMC41XCI+XHU2NzA4PC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1iYXNlIHRleHQtZ3JheS01MDAgZm9udC1tZWRpdW1cIj5cdTUxNjhcdTY3MDg8L3NwYW4+XG4gICAgICAgIGBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGxhc3RNb250aCA9IG1vbnRoc0FycmF5W21vbnRoc0FycmF5Lmxlbmd0aCAtIDFdXG4gICAgICAgIGNvbnN0IFssIGxhc3RNb250aFN0cl0gPSBsYXN0TW9udGguc3BsaXQoJy0nKVxuICAgICAgICBjb25zdCBsYXN0TW9udGhOdW0gPSBwYXJzZUludChsYXN0TW9udGhTdHIsIDEwKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVUYXJnZXQuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICR7bW9udGhOdW19PHNwYW4gY2xhc3M9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIG14LTAuNVwiPlx1NjcwODwvc3Bhbj4tJHtsYXN0TW9udGhOdW19PHNwYW4gY2xhc3M9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIG14LTAuNVwiPlx1NjcwODwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInRleHQtYmFzZSB0ZXh0LWdyYXktNTAwIGZvbnQtbWVkaXVtXCI+KCR7bW9udGhzQXJyYXkubGVuZ3RofVx1NEUyQVx1NjcwOCk8L3NwYW4+XG4gICAgICAgIGBcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gU3RvcmUgZnV6enkgZGF0ZSBpbiB0aGUgaGlkZGVuIGlucHV0IHdpdGggYSBzcGVjaWFsIHByZWZpeFxuICAgIGlmICh0aGlzLmhhc0RhdGVJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5kYXRlSW5wdXRUYXJnZXQudmFsdWUgPSBgZnV6enk6JHttb250aHNTdHJpbmd9YFxuICAgIH1cbiAgICBcbiAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJ0ZXJtc01vZGFsXCIsIFwiaW5zdXJhbmNlTW9kYWxcIiwgXCJtZW1iZXJNb2RhbFwiLCBcImNvbmZpcm1Nb2RhbFwiLCBcInRvdGFsUHJpY2VBbW91bnRcIl1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHRlcm1zTW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaW5zdXJhbmNlTW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbWVtYmVyTW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY29uZmlybU1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRvdGFsUHJpY2VBbW91bnRUYXJnZXQ6IEhUTUxFbGVtZW50XG5cbiAgLy8gXHU4RkZEXHU4RTJBXHU0RjFBXHU1NDU4XHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1REYyXHU1QjhDXHU2MjEwXG4gIHByaXZhdGUgbWVtYmVyQ2hlY2tDb21wbGV0ZWQ6IGJvb2xlYW4gPSBmYWxzZVxuICAvLyBcdThGRkRcdThFMkFcdTY2MkZcdTU0MjZcdTRFM0FcdTRGMUFcdTU0NThcdTc4NkVcdThCQTRcdTU0MEVcdTc2ODRcdTdCMkNcdTRFOENcdTZCMjFcdTdCNDlcdTVGODVcbiAgcHJpdmF0ZSBpc1NlY29uZFdhaXQ6IGJvb2xlYW4gPSBmYWxzZVxuICAvLyBcdTVCNThcdTUwQThcdTk3MDBcdTg5ODFcdTZDRThcdTUxOENcdTc2ODRcdTgyMkFcdTdBN0FcdTUxNkNcdTUzRjhcdTUyMTdcdTg4NjhcbiAgcHJpdmF0ZSBtaXNzaW5nQWlybGluZXM6IHN0cmluZ1tdID0gW11cblxuICBzZWxlY3RQYXNzZW5nZXIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgcmFkaW8gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBpZE51bWJlciA9IHJhZGlvLmRhdGFzZXQuaWROdW1iZXIgfHwgJydcbiAgICBjb25zdCBwaG9uZSA9IHJhZGlvLmRhdGFzZXQucGhvbmUgfHwgJydcbiAgICBcbiAgICAvLyBcdTU4NkJcdTUxNDVcdTk2OTBcdTg1Q0ZcdTVCNTdcdTZCQjVcbiAgICBjb25zdCBpZE51bWJlckZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3Nlbmdlcl9pZF9udW1iZXInKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgcGhvbmVGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib29raW5nX2NvbnRhY3RfcGhvbmUnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgXG4gICAgaWYgKGlkTnVtYmVyRmllbGQpIHtcbiAgICAgIGlkTnVtYmVyRmllbGQudmFsdWUgPSBpZE51bWJlclxuICAgIH1cbiAgICBcbiAgICBpZiAocGhvbmVGaWVsZCAmJiBwaG9uZSkge1xuICAgICAgcGhvbmVGaWVsZC52YWx1ZSA9IHBob25lXG4gICAgfVxuICB9XG5cbiAgc2VsZWN0SW5zdXJhbmNlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBjb25zdCBpbnN1cmFuY2VUeXBlID0gYnV0dG9uLmRhdGFzZXQuaW5zdXJhbmNlVHlwZSB8fCAnbm9uZSdcbiAgICBjb25zdCBpbnN1cmFuY2VQcmljZSA9IGJ1dHRvbi5kYXRhc2V0Lmluc3VyYW5jZVByaWNlIHx8ICcwJ1xuICAgIFxuICAgIHRoaXMuc2V0SW5zdXJhbmNlVmFsdWVzKGluc3VyYW5jZVR5cGUsIGluc3VyYW5jZVByaWNlKVxuICAgIHRoaXMuY2xvc2VJbnN1cmFuY2VNb2RhbCgpXG4gIH1cblxuICBzZXRJbnN1cmFuY2VWYWx1ZXMoaW5zdXJhbmNlVHlwZTogc3RyaW5nLCBpbnN1cmFuY2VQcmljZTogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgaW5zdXJhbmNlVHlwZUZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jvb2tpbmdfaW5zdXJhbmNlX3R5cGUnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgaW5zdXJhbmNlUHJpY2VGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib29raW5nX2luc3VyYW5jZV9wcmljZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBcbiAgICBpZiAoaW5zdXJhbmNlVHlwZUZpZWxkKSB7XG4gICAgICBpbnN1cmFuY2VUeXBlRmllbGQudmFsdWUgPSBpbnN1cmFuY2VUeXBlXG4gICAgfVxuICAgIFxuICAgIGlmIChpbnN1cmFuY2VQcmljZUZpZWxkKSB7XG4gICAgICBpbnN1cmFuY2VQcmljZUZpZWxkLnZhbHVlID0gaW5zdXJhbmNlUHJpY2VcbiAgICB9XG4gIH1cblxuICAvLyBcdTU5MDRcdTc0MDZcdTg4NjhcdTUzNTVcdTRFMkRcdTc2ODRcdTRGRERcdTk2NjlcdTkwMDlcdTk4NzlcdTUzNjFcdTkwMDlcdTYyRTlcbiAgc2VsZWN0SW5zdXJhbmNlT3B0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHJhZGlvID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgaW5zdXJhbmNlVHlwZSA9IHJhZGlvLmRhdGFzZXQuaW5zdXJhbmNlVHlwZSB8fCAnbm9uZSdcbiAgICBjb25zdCBpbnN1cmFuY2VQcmljZSA9IHJhZGlvLmRhdGFzZXQuaW5zdXJhbmNlUHJpY2UgfHwgJzAnXG4gICAgXG4gICAgLy8gXHU2NkY0XHU2NUIwXHU5NjkwXHU4NUNGXHU1QjU3XHU2QkI1XG4gICAgdGhpcy5zZXRJbnN1cmFuY2VWYWx1ZXMoaW5zdXJhbmNlVHlwZSwgaW5zdXJhbmNlUHJpY2UpXG4gICAgXG4gICAgLy8gXHU2NkY0XHU2NUIwXHU4OUM2XHU4OUM5XHU2MzA3XHU3OTNBXHU1NjY4XHVGRjA4XHU4RkI5XHU2ODQ2XHU1NDhDXHU1QkY5XHU1M0Y3XHVGRjA5XG4gICAgY29uc3QgYWxsQ2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1pbnN1cmFuY2UtY2FyZF0nKVxuICAgIGFsbENhcmRzLmZvckVhY2goY2FyZCA9PiB7XG4gICAgICBjYXJkLmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci15ZWxsb3ctNDAwJywgJ2JvcmRlci1ibHVlLTQwMCcsICdib3JkZXItZ3JheS00MDAnKVxuICAgICAgY2FyZC5jbGFzc0xpc3QuYWRkKCdib3JkZXItMicsICdib3JkZXItZ3JheS0zMDAnKVxuICAgICAgY29uc3QgY2hlY2ttYXJrID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcuYmcteWVsbG93LTQwMCcpIGFzIEhUTUxFbGVtZW50XG4gICAgICBpZiAoY2hlY2ttYXJrKSB7XG4gICAgICAgIGNoZWNrbWFyay5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICAvLyBcdTRFM0FcdTkwMDlcdTRFMkRcdTc2ODRcdTUzNjFcdTcyNDdcdTZERkJcdTUyQTBcdTY4MzdcdTVGMEZcbiAgICBjb25zdCBzZWxlY3RlZENhcmQgPSByYWRpby5jbG9zZXN0KCdbZGF0YS1pbnN1cmFuY2UtY2FyZF0nKSBhcyBIVE1MRWxlbWVudFxuICAgIGlmIChzZWxlY3RlZENhcmQpIHtcbiAgICAgIHNlbGVjdGVkQ2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItZ3JheS0zMDAnKVxuICAgICAgaWYgKGluc3VyYW5jZVR5cGUgPT09ICdzdGFuZGFyZCcpIHtcbiAgICAgICAgc2VsZWN0ZWRDYXJkLmNsYXNzTGlzdC5hZGQoJ2JvcmRlci15ZWxsb3ctNDAwJylcbiAgICAgIH0gZWxzZSBpZiAoaW5zdXJhbmNlVHlwZSA9PT0gJ3ByZW1pdW0nKSB7XG4gICAgICAgIHNlbGVjdGVkQ2FyZC5jbGFzc0xpc3QuYWRkKCdib3JkZXItYmx1ZS00MDAnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZWN0ZWRDYXJkLmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1ncmF5LTQwMCcpXG4gICAgICB9XG4gICAgICBjb25zdCBjaGVja21hcmsgPSBzZWxlY3RlZENhcmQucXVlcnlTZWxlY3RvcignLmJnLXllbGxvdy00MDAnKSBhcyBIVE1MRWxlbWVudFxuICAgICAgaWYgKGNoZWNrbWFyaykge1xuICAgICAgICBjaGVja21hcmsuc3R5bGUuZGlzcGxheSA9ICdmbGV4J1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1NjZGNFx1NjVCMFx1NUU5NVx1OTBFOFx1NjAzQlx1NEVGN1xuICAgIHRoaXMudXBkYXRlVG90YWxQcmljZSgpXG4gIH1cblxuICAvLyBcdTY2RjRcdTY1QjBcdTYwM0JcdTRFRjdcdTY2M0VcdTc5M0FcbiAgcHJpdmF0ZSB1cGRhdGVUb3RhbFByaWNlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy50b3RhbFByaWNlQW1vdW50VGFyZ2V0KSByZXR1cm5cbiAgICBcbiAgICBjb25zdCBiYXNlUHJpY2UgPSBwYXJzZUludCh0aGlzLnRvdGFsUHJpY2VBbW91bnRUYXJnZXQuZGF0YXNldC5iYXNlUHJpY2UgfHwgJzAnKVxuICAgIGNvbnN0IGluc3VyYW5jZVByaWNlRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9va2luZ19pbnN1cmFuY2VfcHJpY2UnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgaW5zdXJhbmNlUHJpY2UgPSBwYXJzZUludChpbnN1cmFuY2VQcmljZUZpZWxkPy52YWx1ZSB8fCAnMCcpXG4gICAgXG4gICAgLy8gXHU4QkExXHU3Qjk3XHU2MDNCXHU0RUY3XHVGRjFBXHU1N0ZBXHU3ODQwXHU0RUY3XHU2ODNDICsgXHU0RkREXHU5NjY5XHU0RUY3XHU2ODNDIFx1MDBENyBcdTRFQkFcdTY1NzBcdUZGMDhcdTVGNTNcdTUyNERcdTUwNDdcdThCQkVcdTRFM0ExXHU0RUJBXHVGRjA5XG4gICAgY29uc3QgcGFzc2VuZ2VyQ291bnQgPSAxXG4gICAgY29uc3QgdG90YWxQcmljZSA9IGJhc2VQcmljZSArIChpbnN1cmFuY2VQcmljZSAqIHBhc3NlbmdlckNvdW50KVxuICAgIFxuICAgIHRoaXMudG90YWxQcmljZUFtb3VudFRhcmdldC50ZXh0Q29udGVudCA9IHRvdGFsUHJpY2UudG9TdHJpbmcoKVxuICB9XG5cbiAgc2hvd1Rlcm1zTW9kYWwoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIHRoaXMudGVybXNNb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICB9XG5cbiAgY2xvc2VUZXJtc01vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMudGVybXNNb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICB9XG5cbiAgYWNjZXB0VGVybXMoKTogdm9pZCB7XG4gICAgY29uc3QgdGVybXNDaGVja2JveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib29raW5nX2FjY2VwdF90ZXJtcycpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBpZiAodGVybXNDaGVja2JveCkge1xuICAgICAgdGVybXNDaGVja2JveC5jaGVja2VkID0gdHJ1ZVxuICAgIH1cbiAgICB0aGlzLmNsb3NlVGVybXNNb2RhbCgpXG4gICAgXG4gICAgLy8gXHU2OEMwXHU2N0U1XHU3NTI4XHU2MjM3XHU2NjJGXHU1NDI2XHU1REYyXHU5MDA5XHU2MkU5XHU0RkREXHU5NjY5XG4gICAgY29uc3QgaW5zdXJhbmNlVHlwZUZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jvb2tpbmdfaW5zdXJhbmNlX3R5cGUnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgaW5zdXJhbmNlVHlwZSA9IGluc3VyYW5jZVR5cGVGaWVsZD8udmFsdWUgfHwgJ25vbmUnXG4gICAgXG4gICAgaWYgKGluc3VyYW5jZVR5cGUgPT09ICdub25lJykge1xuICAgICAgLy8gXHU3NTI4XHU2MjM3XHU2NzJBXHU5MDA5XHU2MkU5XHU0RkREXHU5NjY5XHVGRjBDXHU2NjNFXHU3OTNBXHU0RkREXHU5NjY5XHU2M0E4XHU4MzUwXHU1RjM5XHU3QTk3XG4gICAgICB0aGlzLnNob3dJbnN1cmFuY2VNb2RhbCgpXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFx1NzUyOFx1NjIzN1x1NURGMlx1OTAwOVx1NjJFOVx1NEZERFx1OTY2OVx1RkYwQ1x1OERGM1x1OEZDN1x1NEZERFx1OTY2OVx1NUYzOVx1N0E5N1x1RkYwQ1x1NzZGNFx1NjNBNVx1OEZEQlx1NTE2NVx1Nzg2RVx1OEJBNFx1NkQ0MVx1N0EwQlxuICAgICAgdGhpcy5zaG93Q29uZmlybU1vZGFsKClcbiAgICB9XG4gIH1cblxuICBzaG93SW5zdXJhbmNlTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5pbnN1cmFuY2VNb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICB9XG5cbiAgY2xvc2VJbnN1cmFuY2VNb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLmluc3VyYW5jZU1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgdGhpcy5zaG93Q29uZmlybU1vZGFsKClcbiAgfVxuXG4gIHNraXBJbnN1cmFuY2UoKTogdm9pZCB7XG4gICAgdGhpcy5zZXRJbnN1cmFuY2VWYWx1ZXMoJ25vbmUnLCAnMCcpXG4gICAgdGhpcy5jbG9zZUluc3VyYW5jZU1vZGFsKClcbiAgfVxuXG4gIHNob3dNZW1iZXJNb2RhbCgpOiB2b2lkIHtcbiAgICAvLyBcdTY2RjRcdTY1QjBcdTVGMzlcdTdBOTdcdTRFMkRcdTc2ODRcdTgyMkFcdTdBN0FcdTUxNkNcdTUzRjhcdTUyMTdcdTg4NjhcdTY2M0VcdTc5M0FcbiAgICB0aGlzLnVwZGF0ZU1lbWJlck1vZGFsQ29udGVudCgpXG4gICAgdGhpcy5tZW1iZXJNb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICB9XG5cbiAgdXBkYXRlTWVtYmVyTW9kYWxDb250ZW50KCk6IHZvaWQge1xuICAgIC8vIFx1NjZGNFx1NjVCMFx1NEYxQVx1NTQ1OFx1NUYzOVx1N0E5N1x1NEUyRFx1NjYzRVx1NzkzQVx1NzY4NFx1ODIyQVx1N0E3QVx1NTE2Q1x1NTNGOFx1NTQwRFx1NzlGMFxuICAgIGNvbnN0IGFpcmxpbmVUZXh0RWxlbWVudCA9IHRoaXMubWVtYmVyTW9kYWxUYXJnZXQucXVlcnlTZWxlY3RvcignW2RhdGEtYWlybGluZS1uYW1lc10nKSBhcyBIVE1MRWxlbWVudFxuICAgIGlmIChhaXJsaW5lVGV4dEVsZW1lbnQgJiYgdGhpcy5taXNzaW5nQWlybGluZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgYWlybGluZXNUZXh0ID0gdGhpcy5taXNzaW5nQWlybGluZXMuam9pbignXHUzMDAxJylcbiAgICAgIGFpcmxpbmVUZXh0RWxlbWVudC50ZXh0Q29udGVudCA9IGFpcmxpbmVzVGV4dFxuICAgIH1cbiAgfVxuXG4gIGNsb3NlTWVtYmVyTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5tZW1iZXJNb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIC8vIFx1NjgwN1x1OEJCMFx1NEYxQVx1NTQ1OFx1NjhDMFx1NjdFNVx1NURGMlx1NUI4Q1x1NjIxMFx1RkYwOFx1NzUyOFx1NjIzN1x1NTQwQ1x1NjEwRlx1NkNFOFx1NTE4Q1x1NEYxQVx1NTQ1OFx1RkYwOVxuICAgIHRoaXMubWVtYmVyQ2hlY2tDb21wbGV0ZWQgPSB0cnVlXG4gICAgLy8gXHU2ODA3XHU4QkIwXHU0RTNBXHU3QjJDXHU0RThDXHU2QjIxXHU3QjQ5XHU1Rjg1XG4gICAgdGhpcy5pc1NlY29uZFdhaXQgPSB0cnVlXG4gICAgLy8gXHU0RjFBXHU1NDU4XHU3ODZFXHU4QkE0XHU1NDBFXHVGRjBDXHU1MThEXHU2QjIxXHU2NjNFXHU3OTNBXHU3QjQ5XHU1Rjg1XHU1RjM5XHU3QTk3XG4gICAgdGhpcy5zaG93Q29uZmlybU1vZGFsKClcbiAgfVxuXG4gIHNob3dDb25maXJtTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5jb25maXJtTW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICBcbiAgICAvLyBcdTU5ODJcdTY3OUNcdTY2MkZcdTdCMkNcdTRFOENcdTZCMjFcdTdCNDlcdTVGODVcdUZGMDhcdTRGMUFcdTU0NThcdTc4NkVcdThCQTRcdTU0MEVcdUZGMDlcdUZGMENcdTdCNDlcdTVGODU1LTEwXHU3OUQyXHU1NDBFXHU2M0QwXHU0RUE0XG4gICAgaWYgKHRoaXMuaXNTZWNvbmRXYWl0KSB7XG4gICAgICBjb25zdCB3YWl0VGltZSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICgxMDAwMCAtIDUwMDAgKyAxKSkgKyA1MDAwXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5zdWJtaXRGb3JtKClcbiAgICAgIH0sIHdhaXRUaW1lKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIFx1N0IyQ1x1NEUwMFx1NkIyMVx1NjYzRVx1NzkzQVx1N0I0OVx1NUY4NVx1NUYzOVx1N0E5N1x1NjVGNlx1RkYwQ1x1N0FDQlx1NTM3M1x1NjhDMFx1NjdFNVx1NEYxQVx1NTQ1OFx1NzJCNlx1NjAwMVx1RkYwOFx1NjVFMFx1OTcwMFx1N0I0OVx1NUY4NVx1RkYwOVxuICAgIHRoaXMuY2hlY2tNZW1iZXJzaGlwU3RhdHVzRnJvbURCKCkudGhlbihuZWVkc01lbWJlclJlZ2lzdHJhdGlvbiA9PiB7XG4gICAgICBpZiAobmVlZHNNZW1iZXJSZWdpc3RyYXRpb24pIHtcbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU5NzAwXHU4OTgxXHU2Q0U4XHU1MThDXHU0RjFBXHU1NDU4XHVGRjBDXHU1MTczXHU5NUVEXHU3ODZFXHU4QkE0XHU1RjM5XHU3QTk3XHU1RTc2XHU2NjNFXHU3OTNBXHU0RjFBXHU1NDU4XHU1RjM5XHU3QTk3XG4gICAgICAgIHRoaXMuY2xvc2VDb25maXJtTW9kYWwoKVxuICAgICAgICB0aGlzLnNob3dNZW1iZXJNb2RhbCgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTVERjJcdTY2MkZcdTRGMUFcdTU0NThcdUZGMENcdTRGRERcdTYzMDFcdTdCNDlcdTVGODVcdTVGMzlcdTdBOTdcdTY2M0VcdTc5M0FcdUZGMENcdTdCNDlcdTVGODU1LTEwXHU3OUQyXHU1NDBFXHU2M0QwXHU0RUE0XG4gICAgICAgIHRoaXMubWVtYmVyQ2hlY2tDb21wbGV0ZWQgPSB0cnVlXG4gICAgICAgIGNvbnN0IHdhaXRUaW1lID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKDEwMDAwIC0gNTAwMCArIDEpKSArIDUwMDBcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5zdWJtaXRGb3JtKClcbiAgICAgICAgfSwgd2FpdFRpbWUpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGNoZWNrTWVtYmVyc2hpcFN0YXR1c0Zyb21EQigpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAvLyBcdTRFQ0VcdTY1NzBcdTYzNkVcdTVFOTNcdTY4QzBcdTY3RTVcdTVGNTNcdTUyNERcdTc1MjhcdTYyMzdcdTY2MkZcdTU0MjZcdTRFM0FcdTYyNDBcdTY3MDlcdTc2RjhcdTUxNzNcdTgyMkFcdTdBN0FcdTUxNkNcdTUzRjhcdTc2ODRcdTRGMUFcdTU0NThcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKVxuICAgICAgY29uc3QgZmxpZ2h0SWQgPSB1cmxQYXJhbXMuZ2V0KCdmbGlnaHRfaWQnKVxuICAgICAgY29uc3QgcmV0dXJuRmxpZ2h0SWQgPSB1cmxQYXJhbXMuZ2V0KCdyZXR1cm5fZmxpZ2h0X2lkJylcbiAgICAgIFxuICAgICAgLy8gXHU2Nzg0XHU1RUZBXHU4QkY3XHU2QzQyIFVSTFx1RkYwQ1x1NTMwNVx1NTQyQlx1NTNCQlx1N0EwQlx1NTQ4Q1x1NTZERVx1N0EwQlx1ODIyQVx1NzNFRCBJRFxuICAgICAgbGV0IHVybCA9IGAvYXBpL2NoZWNrX21lbWJlcnNoaXA/ZmxpZ2h0X2lkPSR7ZmxpZ2h0SWR9YFxuICAgICAgaWYgKHJldHVybkZsaWdodElkKSB7XG4gICAgICAgIHVybCArPSBgJnJldHVybl9mbGlnaHRfaWQ9JHtyZXR1cm5GbGlnaHRJZH1gXG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU4QkY3XHU2QzQyXHU1OTMxXHU4RDI1XHVGRjBDXHU5RUQ4XHU4QkE0XHU1MDQ3XHU4QkJFXHU5NzAwXHU4OTgxXHU2Q0U4XHU1MThDXHU0RjFBXHU1NDU4XG4gICAgICAgIHRoaXMubWlzc2luZ0FpcmxpbmVzID0gW11cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgICAgLy8gXHU1QjU4XHU1MEE4XHU3RjNBXHU1OTMxXHU3Njg0XHU4MjJBXHU3QTdBXHU1MTZDXHU1M0Y4XHU0RjFBXHU1NDU4XHU4RUFCXHU0RUZEXG4gICAgICB0aGlzLm1pc3NpbmdBaXJsaW5lcyA9IGRhdGEubWlzc2luZ19haXJsaW5lcyB8fCBbXVxuICAgICAgXG4gICAgICByZXR1cm4gIWRhdGEuaXNfbWVtYmVyIC8vIFx1OEZENFx1NTZERXRydWVcdTg4NjhcdTc5M0FcdTk3MDBcdTg5ODFcdTZDRThcdTUxOENcdTRGMUFcdTU0NThcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignXHU2OEMwXHU2N0U1XHU0RjFBXHU1NDU4XHU3MkI2XHU2MDAxXHU1OTMxXHU4RDI1OicsIGVycm9yKVxuICAgICAgLy8gXHU1M0QxXHU3NTFGXHU5NTE5XHU4QkVGXHU2NUY2XHVGRjBDXHU5RUQ4XHU4QkE0XHU1MDQ3XHU4QkJFXHU5NzAwXHU4OTgxXHU2Q0U4XHU1MThDXHU0RjFBXHU1NDU4XG4gICAgICB0aGlzLm1pc3NpbmdBaXJsaW5lcyA9IFtdXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIGNsb3NlQ29uZmlybU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMuY29uZmlybU1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gIH1cblxuICBzdWJtaXRGb3JtKCk6IHZvaWQge1xuICAgIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBjb25zdCBmb3JtID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKSBhcyBIVE1MRm9ybUVsZW1lbnRcbiAgICBpZiAoZm9ybSkge1xuICAgICAgZm9ybS5zdWJtaXQoKVxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZVN1Ym1pdChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLy8gXHU5MUNEXHU3RjZFXHU0RjFBXHU1NDU4XHU2OEMwXHU2N0U1XHU2ODA3XHU1RkQ3XG4gICAgdGhpcy5tZW1iZXJDaGVja0NvbXBsZXRlZCA9IGZhbHNlXG4gICAgdGhpcy5pc1NlY29uZFdhaXQgPSBmYWxzZVxuICAgIHRoaXMuc2hvd1Rlcm1zTW9kYWwoZXZlbnQpXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcIm1vZGFsXCJdXG5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIFx1OTg3NVx1OTc2Mlx1NTJBMFx1OEY3RFx1NTQwRVx1ODFFQVx1NTJBOFx1NjYzRVx1NzkzQVx1NEYxOFx1NjBFMFx1NTIzOFx1NUYzOVx1N0E5N1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgfVxuXG4gIGNsYWltQ291cG9ucygpOiB2b2lkIHtcbiAgICAvLyBcdTk4ODZcdTUzRDZcdTRGMThcdTYwRTBcdTUyMzhcbiAgICBhbGVydCgnXHU0RjE4XHU2MEUwXHU1MjM4XHU1REYyXHU5ODg2XHU1M0Q2XHU2MjEwXHU1MjlGXHVGRjAxJylcbiAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICB9XG5cbiAgY2xvc2VNb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcInRhYkNvbnRlbnRcIixcbiAgICBcInRhYnNcIlxuICBdXG5cbiAgZGVjbGFyZSByZWFkb25seSB0YWJDb250ZW50VGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IHRhYnNUYXJnZXQ6IEhUTUxFbGVtZW50XG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkRlc3RpbmF0aW9uIGNvbnRyb2xsZXIgY29ubmVjdGVkXCIpXG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiRGVzdGluYXRpb24gZGlzY29ubmVjdGVkXCIpXG4gIH1cblxuICBzd2l0Y2hUYWIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGNvbnN0IHRhYk5hbWUgPSBidXR0b24uZGF0YXNldC50YWJcbiAgICBcbiAgICBpZiAoIXRhYk5hbWUpIHJldHVyblxuXG4gICAgLy8gVXBkYXRlIGFjdGl2ZSB0YWIgYnV0dG9uXG4gICAgY29uc3QgYWxsVGFiQnV0dG9ucyA9IHRoaXMudGFic1RhcmdldC5xdWVyeVNlbGVjdG9yQWxsKCcudGFiLWJ0bicpXG4gICAgYWxsVGFiQnV0dG9ucy5mb3JFYWNoKGJ0biA9PiB7XG4gICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTkwMCcsICdib3JkZXItZ3JheS05MDAnKVxuICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS01MDAnLCAnYm9yZGVyLXRyYW5zcGFyZW50JylcbiAgICB9KVxuICAgIFxuICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktNTAwJywgJ2JvcmRlci10cmFuc3BhcmVudCcpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS05MDAnLCAnYm9yZGVyLWdyYXktOTAwJylcblxuICAgIC8vIFNob3cgY29ycmVzcG9uZGluZyB0YWIgY29udGVudFxuICAgIHRoaXMudGFiQ29udGVudFRhcmdldHMuZm9yRWFjaChjb250ZW50ID0+IHtcbiAgICAgIGlmIChjb250ZW50LmRhdGFzZXQudGFiID09PSB0YWJOYW1lKSB7XG4gICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG5cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmludGVyZmFjZSBDaXR5RGF0YSB7XG4gIG5hbWU6IHN0cmluZ1xuICBwaW55aW46IHN0cmluZ1xuICBzbHVnOiBzdHJpbmcgfCBudWxsXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcInJlZ2lvbkJ1dHRvblwiLCBcImNpdHlMaXN0XCIsIFwic2VhcmNoSW5wdXRcIiwgXCJzZWFyY2hSZXN1bHRzXCIsIFwic2VhcmNoUmVzdWx0c0xpc3RcIiwgXCJub1Jlc3VsdHNcIiwgXCJub3JtYWxWaWV3XCJdXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgYXZhaWxhYmxlRGVzdGluYXRpb25zOiBBcnJheSxcbiAgICBhbGxDaXRpZXM6IEFycmF5XG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHJlZ2lvbkJ1dHRvblRhcmdldHM6IEhUTUxCdXR0b25FbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBjaXR5TGlzdFRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBzZWFyY2hJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlYXJjaFJlc3VsdHNUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VhcmNoUmVzdWx0c0xpc3RUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbm9SZXN1bHRzVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IG5vcm1hbFZpZXdUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzU2VhcmNoUmVzdWx0c1RhcmdldDogYm9vbGVhblxuICBcbiAgZGVjbGFyZSBhdmFpbGFibGVEZXN0aW5hdGlvbnNWYWx1ZTogc3RyaW5nW11cbiAgZGVjbGFyZSBhbGxDaXRpZXNWYWx1ZTogQ2l0eURhdGFbXVxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJSZWdpb25TZWxlY3RvciBjb25uZWN0ZWRcIilcbiAgICAvLyBcdTlFRDhcdThCQTRcdTY2M0VcdTc5M0FcdTcwRURcdTk1RThcdTc2RUVcdTc2ODRcdTU3MzBcbiAgICB0aGlzLnNob3dSZWdpb24oXCJcdTcwRURcdTk1RThcdTc2RUVcdTc2ODRcdTU3MzBcIilcbiAgfVxuXG4gIHNlYXJjaChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBpbnB1dCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgcXVlcnkgPSBpbnB1dC52YWx1ZS50cmltKCkudG9Mb3dlckNhc2UoKVxuICAgIFxuICAgIGlmIChxdWVyeSA9PT0gJycpIHtcbiAgICAgIC8vIFx1NkUwNVx1N0E3QVx1NjQxQ1x1N0QyMlx1RkYwQ1x1NjYzRVx1NzkzQVx1NkI2M1x1NUUzOFx1ODlDNlx1NTZGRVxuICAgICAgdGhpcy5zaG93Tm9ybWFsVmlldygpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gXHU2NDFDXHU3RDIyXHU1N0NFXHU1RTAyXHVGRjA4XHU2NTJGXHU2MzAxXHU0RTJEXHU2NTg3XHU1NDhDXHU2MkZDXHU5N0YzXHVGRjA5XG4gICAgY29uc3QgcmVzdWx0cyA9IHRoaXMuYWxsQ2l0aWVzVmFsdWUuZmlsdGVyKGNpdHkgPT4gXG4gICAgICBjaXR5Lm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkgfHwgXG4gICAgICBjaXR5LnBpbnlpbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KVxuICAgIClcbiAgICBcbiAgICB0aGlzLmRpc3BsYXlTZWFyY2hSZXN1bHRzKHJlc3VsdHMpXG4gIH1cbiAgXG4gIGNsZWFyU2VhcmNoKCk6IHZvaWQge1xuICAgIHRoaXMuc2VhcmNoSW5wdXRUYXJnZXQudmFsdWUgPSAnJ1xuICAgIHRoaXMuc2hvd05vcm1hbFZpZXcoKVxuICB9XG4gIFxuICBwcml2YXRlIGRpc3BsYXlTZWFyY2hSZXN1bHRzKHJlc3VsdHM6IENpdHlEYXRhW10pOiB2b2lkIHtcbiAgICAvLyBcdTk2OTBcdTg1Q0ZcdTZCNjNcdTVFMzhcdTg5QzZcdTU2RkVcdUZGMENcdTY2M0VcdTc5M0FcdTY0MUNcdTdEMjJcdTdFRDNcdTY3OUNcbiAgICB0aGlzLm5vcm1hbFZpZXdUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBcbiAgICBpZiAodGhpcy5oYXNTZWFyY2hSZXN1bHRzVGFyZ2V0KSB7XG4gICAgICB0aGlzLnNlYXJjaFJlc3VsdHNUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICB9XG4gICAgXG4gICAgaWYgKHJlc3VsdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBcdTY2M0VcdTc5M0FcdTY1RTBcdTdFRDNcdTY3OUNcbiAgICAgIHRoaXMuc2VhcmNoUmVzdWx0c0xpc3RUYXJnZXQuaW5uZXJIVE1MID0gJydcbiAgICAgIHRoaXMubm9SZXN1bHRzVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFx1NjYzRVx1NzkzQVx1NjQxQ1x1N0QyMlx1N0VEM1x1Njc5Q1xuICAgICAgdGhpcy5ub1Jlc3VsdHNUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgIHRoaXMuc2VhcmNoUmVzdWx0c0xpc3RUYXJnZXQuaW5uZXJIVE1MID0gcmVzdWx0cy5tYXAoY2l0eSA9PiBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWNlbnRlciBweS0zIHB4LTIgYmctc3VyZmFjZSByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItYm9yZGVyIGhvdmVyOmJvcmRlci1wcmltYXJ5IGhvdmVyOnNoYWRvdy1zbSB0cmFuc2l0aW9uLWFsbCBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgZGF0YS1hY3Rpb249XCJjbGljay0+cmVnaW9uLXNlbGVjdG9yI3NlbGVjdENpdHlcIlxuICAgICAgICAgICAgIGRhdGEtY2l0eS1uYW1lPVwiJHtjaXR5Lm5hbWV9XCJcbiAgICAgICAgICAgICBkYXRhLWNpdHktc2x1Zz1cIiR7Y2l0eS5zbHVnIHx8ICcnfVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZm9yZWdyb3VuZFwiPiR7Y2l0eS5uYW1lfTwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGApLmpvaW4oJycpXG4gICAgfVxuICB9XG4gIFxuICBwcml2YXRlIHNob3dOb3JtYWxWaWV3KCk6IHZvaWQge1xuICAgIC8vIFx1NjYzRVx1NzkzQVx1NkI2M1x1NUUzOFx1ODlDNlx1NTZGRVx1RkYwQ1x1OTY5MFx1ODVDRlx1NjQxQ1x1N0QyMlx1N0VEM1x1Njc5Q1xuICAgIHRoaXMubm9ybWFsVmlld1RhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIFxuICAgIGlmICh0aGlzLmhhc1NlYXJjaFJlc3VsdHNUYXJnZXQpIHtcbiAgICAgIHRoaXMuc2VhcmNoUmVzdWx0c1RhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIH1cbiAgfVxuXG4gIHNlbGVjdFJlZ2lvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50XG4gICAgY29uc3QgcmVnaW9uTmFtZSA9IGJ1dHRvbi5kYXRhc2V0LnJlZ2lvblxuICAgIFxuICAgIGlmICghcmVnaW9uTmFtZSkgcmV0dXJuXG5cbiAgICAvLyBcdTY2RjRcdTY1QjBcdTYzMDlcdTk0QUVcdTY4MzdcdTVGMEZcbiAgICB0aGlzLnJlZ2lvbkJ1dHRvblRhcmdldHMuZm9yRWFjaChidG4gPT4ge1xuICAgICAgaWYgKGJ0biA9PT0gYnV0dG9uKSB7XG4gICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwidGV4dC1mb3JlZ3JvdW5kXCIsIFwiYmctd2hpdGVcIiwgXCJib3JkZXItbC0yXCIsIFwiYm9yZGVyLXByaW1hcnlcIiwgXCJmb250LW1lZGl1bVwiKVxuICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZShcInRleHQtbXV0ZWRcIilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwidGV4dC1mb3JlZ3JvdW5kXCIsIFwiYmctd2hpdGVcIiwgXCJib3JkZXItbC0yXCIsIFwiYm9yZGVyLXByaW1hcnlcIiwgXCJmb250LW1lZGl1bVwiKVxuICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcInRleHQtbXV0ZWRcIilcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gXHU2NjNFXHU3OTNBXHU1QkY5XHU1RTk0XHU3Njg0XHU1N0NFXHU1RTAyXHU1MjE3XHU4ODY4XG4gICAgdGhpcy5zaG93UmVnaW9uKHJlZ2lvbk5hbWUpXG4gIH1cblxuICBzZWxlY3RDaXR5KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNpdHlDYXJkID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGNpdHlOYW1lID0gY2l0eUNhcmQuZGF0YXNldC5jaXR5TmFtZVxuICAgIFxuICAgIGlmICghY2l0eU5hbWUpIHJldHVyblxuICAgIFxuICAgIC8vIFx1NjhDMFx1NjdFNVx1OEJFNVx1NTdDRVx1NUUwMlx1NjYyRlx1NTQyNlx1NjcwOVx1NUJGOVx1NUU5NFx1NzY4NFx1NzZFRVx1NzY4NFx1NTczMFx1OTg3NVx1OTc2MlxuICAgIGlmICh0aGlzLmF2YWlsYWJsZURlc3RpbmF0aW9uc1ZhbHVlLmluY2x1ZGVzKGNpdHlOYW1lKSkge1xuICAgICAgLy8gXHU4REYzXHU4RjZDXHU1MjMwXHU3NkVFXHU3Njg0XHU1NzMwXHU4QkU2XHU2MEM1XHU5ODc1XG4gICAgICBjb25zdCBzbHVnID0gY2l0eUNhcmQuZGF0YXNldC5jaXR5U2x1Z1xuICAgICAgaWYgKHNsdWcpIHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgL2Rlc3RpbmF0aW9ucy8ke3NsdWd9YFxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBcdTY2M0VcdTc5M0FcdTYzRDBcdTc5M0FcdUZGMUFcdThCRTVcdTU3Q0VcdTVFMDJcdTY2ODJcdTY1RTBcdThCRTZcdTdFQzZcdTRGRTFcdTYwNkZcbiAgICAgIGFsZXJ0KGAke2NpdHlOYW1lfVx1NzY4NFx1OEJFNlx1N0VDNlx1NEZFMVx1NjA2Rlx1NTM3M1x1NUMwNlx1NEUwQVx1N0VCRlx1RkYwQ1x1NjU2Q1x1OEJGN1x1NjcxRlx1NUY4NVx1RkYwMWApXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzaG93UmVnaW9uKHJlZ2lvbk5hbWU6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuY2l0eUxpc3RUYXJnZXRzLmZvckVhY2gobGlzdCA9PiB7XG4gICAgICBpZiAobGlzdC5kYXRhc2V0LnJlZ2lvbiA9PT0gcmVnaW9uTmFtZSkge1xuICAgICAgICBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpc3QuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcInNlYXJjaE1vZGFsXCIsXG4gICAgXCJzZWFyY2hJbnB1dFwiLFxuICAgIFwic2VhcmNoRGlzcGxheVwiLFxuICAgIFwiaG90U2VhcmNoQ29udGVudFwiLCBcImhvdFNlYXJjaEljb25cIixcbiAgICBcImhvdEJyYW5kQ29udGVudFwiLCBcImhvdEJyYW5kSWNvblwiLFxuICAgIFwiaG90TG9jYXRpb25Db250ZW50XCIsIFwiaG90TG9jYXRpb25JY29uXCIsXG4gICAgXCJtZXRyb0NvbnRlbnRcIiwgXCJtZXRyb0ljb25cIixcbiAgICBcImFpcnBvcnRDb250ZW50XCIsIFwiYWlycG9ydEljb25cIixcbiAgICBcImF0dHJhY3Rpb25Db250ZW50XCIsIFwiYXR0cmFjdGlvbkljb25cIixcbiAgICBcInRoZW1lQ29udGVudFwiLCBcInRoZW1lSWNvblwiLFxuICAgIFwiaG9zcGl0YWxDb250ZW50XCIsIFwiaG9zcGl0YWxJY29uXCIsXG4gICAgXCJ1bml2ZXJzaXR5Q29udGVudFwiLCBcInVuaXZlcnNpdHlJY29uXCIsXG4gICAgXCJjaXR5SW5wdXRcIixcbiAgICBcImNoZWNrSW5JbnB1dFwiLFxuICAgIFwiY2hlY2tPdXRJbnB1dFwiLFxuICAgIFwicm9vbXNJbnB1dFwiLFxuICAgIFwiYWR1bHRzSW5wdXRcIixcbiAgICBcImNoaWxkcmVuSW5wdXRcIixcbiAgICBcIm1pblByaWNlSW5wdXRcIixcbiAgICBcIm1heFByaWNlSW5wdXRcIixcbiAgICBcInN0YXJzSW5wdXRcIlxuICBdXG5cbiAgZGVjbGFyZSByZWFkb25seSBzZWFyY2hNb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzZWFyY2hJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1NlYXJjaERpc3BsYXlUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBzZWFyY2hEaXNwbGF5VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaG90U2VhcmNoQ29udGVudFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBob3RTZWFyY2hJY29uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhvdEJyYW5kQ29udGVudFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBob3RCcmFuZEljb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaG90TG9jYXRpb25Db250ZW50VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhvdExvY2F0aW9uSWNvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBtZXRyb0NvbnRlbnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbWV0cm9JY29uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGFpcnBvcnRDb250ZW50VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGFpcnBvcnRJY29uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGF0dHJhY3Rpb25Db250ZW50VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGF0dHJhY3Rpb25JY29uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRoZW1lQ29udGVudFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0aGVtZUljb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaG9zcGl0YWxDb250ZW50VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhvc3BpdGFsSWNvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB1bml2ZXJzaXR5Q29udGVudFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB1bml2ZXJzaXR5SWNvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNDaXR5SW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBjaXR5SW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNDaGVja0luSW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBjaGVja0luSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNDaGVja091dElucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hlY2tPdXRJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1Jvb21zSW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSByb29tc0lucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQWR1bHRzSW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBhZHVsdHNJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0NoaWxkcmVuSW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBjaGlsZHJlbklucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzTWluUHJpY2VJbnB1dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IG1pblByaWNlSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNNYXhQcmljZUlucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbWF4UHJpY2VJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1N0YXJzSW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBzdGFyc0lucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkhvdGVsU2VhcmNoIGNvbm5lY3RlZFwiKVxuICAgIC8vIExpc3RlbiBmb3IgY2l0eS1zZWxlY3RvciB1cGRhdGVzXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2l0eS1zZWxlY3RvcjpjaXR5LXNlbGVjdGVkLWZvci1ob3RlbCcsIHRoaXMuaGFuZGxlQ2l0eVVwZGF0ZS5iaW5kKHRoaXMpKVxuICAgIC8vIExpc3RlbiBmb3IgZGF0ZS1waWNrZXIgdXBkYXRlc1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2hvdGVsLWRhdGUtcGlja2VyOmRhdGVzLXNlbGVjdGVkJywgdGhpcy5oYW5kbGVEYXRlVXBkYXRlLmJpbmQodGhpcykpXG4gICAgLy8gTGlzdGVuIGZvciBndWVzdC1zZWxlY3RvciB1cGRhdGVzXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaG90ZWwtZ3Vlc3Qtc2VsZWN0b3I6Z3Vlc3RzLXVwZGF0ZWQnLCB0aGlzLmhhbmRsZUd1ZXN0VXBkYXRlLmJpbmQodGhpcykpXG4gICAgLy8gTGlzdGVuIGZvciBwcmljZS1maWx0ZXIgdXBkYXRlc1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2hvdGVsLXByaWNlLWZpbHRlcjpmaWx0ZXItdXBkYXRlZCcsIHRoaXMuaGFuZGxlUHJpY2VGaWx0ZXJVcGRhdGUuYmluZCh0aGlzKSlcbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJIb3RlbFNlYXJjaCBkaXNjb25uZWN0ZWRcIilcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjaXR5LXNlbGVjdG9yOmNpdHktc2VsZWN0ZWQtZm9yLWhvdGVsJywgdGhpcy5oYW5kbGVDaXR5VXBkYXRlLmJpbmQodGhpcykpXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignaG90ZWwtZGF0ZS1waWNrZXI6ZGF0ZXMtc2VsZWN0ZWQnLCB0aGlzLmhhbmRsZURhdGVVcGRhdGUuYmluZCh0aGlzKSlcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdob3RlbC1ndWVzdC1zZWxlY3RvcjpndWVzdHMtdXBkYXRlZCcsIHRoaXMuaGFuZGxlR3Vlc3RVcGRhdGUuYmluZCh0aGlzKSlcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdob3RlbC1wcmljZS1maWx0ZXI6ZmlsdGVyLXVwZGF0ZWQnLCB0aGlzLmhhbmRsZVByaWNlRmlsdGVyVXBkYXRlLmJpbmQodGhpcykpXG4gIH1cblxuICAvLyBIYW5kbGUgY2l0eSBzZWxlY3Rpb24gdXBkYXRlIGZyb20gY2l0eS1zZWxlY3RvclxuICBoYW5kbGVDaXR5VXBkYXRlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnRcbiAgICBjb25zdCB7IGNpdHlOYW1lIH0gPSBjdXN0b21FdmVudC5kZXRhaWxcbiAgICBjb25zb2xlLmxvZygnSG90ZWxTZWFyY2g6IFJlY2VpdmVkIGNpdHkgdXBkYXRlOicsIGNpdHlOYW1lKVxuICAgIFxuICAgIC8vIFVwZGF0ZSBVUkwgd2l0aCBuZXcgY2l0eSBhbmQgcmVsb2FkIHBhZ2UgdG8gZmV0Y2ggY2l0eS1zcGVjaWZpYyBkYXRhXG4gICAgY29uc3QgdXJsID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZilcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnY2l0eScsIGNpdHlOYW1lKVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdIb3RlbFNlYXJjaDogUmVsb2FkaW5nIHBhZ2Ugd2l0aCBuZXcgY2l0eTonLCBjaXR5TmFtZSlcbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybC50b1N0cmluZygpXG4gIH1cblxuICAvLyBIYW5kbGUgZGF0ZSBzZWxlY3Rpb24gdXBkYXRlIGZyb20gaG90ZWwtZGF0ZS1waWNrZXJcbiAgaGFuZGxlRGF0ZVVwZGF0ZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjdXN0b21FdmVudCA9IGV2ZW50IGFzIEN1c3RvbUV2ZW50XG4gICAgY29uc3QgeyBjaGVja0luLCBjaGVja091dCB9ID0gY3VzdG9tRXZlbnQuZGV0YWlsXG4gICAgY29uc29sZS5sb2coJ0hvdGVsU2VhcmNoOiBSZWNlaXZlZCBkYXRlIHVwZGF0ZTonLCB7IGNoZWNrSW4sIGNoZWNrT3V0IH0pXG4gICAgXG4gICAgaWYgKHRoaXMuaGFzQ2hlY2tJbklucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLmNoZWNrSW5JbnB1dFRhcmdldC52YWx1ZSA9IGNoZWNrSW5cbiAgICAgIGNvbnNvbGUubG9nKCdIb3RlbFNlYXJjaDogVXBkYXRlZCBjaGVjay1pbiB0bzonLCBjaGVja0luKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5oYXNDaGVja091dElucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLmNoZWNrT3V0SW5wdXRUYXJnZXQudmFsdWUgPSBjaGVja091dFxuICAgICAgY29uc29sZS5sb2coJ0hvdGVsU2VhcmNoOiBVcGRhdGVkIGNoZWNrLW91dCB0bzonLCBjaGVja091dClcbiAgICB9XG4gIH1cblxuICAvLyBIYW5kbGUgZ3Vlc3Qgc2VsZWN0aW9uIHVwZGF0ZSBmcm9tIGhvdGVsLWd1ZXN0LXNlbGVjdG9yXG4gIGhhbmRsZUd1ZXN0VXBkYXRlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnRcbiAgICBjb25zdCB7IHJvb21zLCBhZHVsdHMsIGNoaWxkcmVuIH0gPSBjdXN0b21FdmVudC5kZXRhaWxcbiAgICBjb25zb2xlLmxvZygnSG90ZWxTZWFyY2g6IFJlY2VpdmVkIGd1ZXN0IHVwZGF0ZTonLCB7IHJvb21zLCBhZHVsdHMsIGNoaWxkcmVuIH0pXG4gICAgXG4gICAgaWYgKHRoaXMuaGFzUm9vbXNJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5yb29tc0lucHV0VGFyZ2V0LnZhbHVlID0gcm9vbXMudG9TdHJpbmcoKVxuICAgICAgY29uc29sZS5sb2coJ0hvdGVsU2VhcmNoOiBVcGRhdGVkIHJvb21zIHRvOicsIHJvb21zKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5oYXNBZHVsdHNJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5hZHVsdHNJbnB1dFRhcmdldC52YWx1ZSA9IGFkdWx0cy50b1N0cmluZygpXG4gICAgICBjb25zb2xlLmxvZygnSG90ZWxTZWFyY2g6IFVwZGF0ZWQgYWR1bHRzIHRvOicsIGFkdWx0cylcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuaGFzQ2hpbGRyZW5JbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5jaGlsZHJlbklucHV0VGFyZ2V0LnZhbHVlID0gY2hpbGRyZW4udG9TdHJpbmcoKVxuICAgICAgY29uc29sZS5sb2coJ0hvdGVsU2VhcmNoOiBVcGRhdGVkIGNoaWxkcmVuIHRvOicsIGNoaWxkcmVuKVxuICAgIH1cbiAgfVxuXG4gIC8vIEhhbmRsZSBwcmljZS9zdGFyIGZpbHRlciB1cGRhdGUgZnJvbSBob3RlbC1wcmljZS1maWx0ZXJcbiAgaGFuZGxlUHJpY2VGaWx0ZXJVcGRhdGUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY3VzdG9tRXZlbnQgPSBldmVudCBhcyBDdXN0b21FdmVudFxuICAgIGNvbnN0IHsgbWluUHJpY2UsIG1heFByaWNlLCBzdGFycyB9ID0gY3VzdG9tRXZlbnQuZGV0YWlsXG4gICAgY29uc29sZS5sb2coJ0hvdGVsU2VhcmNoOiBSZWNlaXZlZCBwcmljZSBmaWx0ZXIgdXBkYXRlOicsIHsgbWluUHJpY2UsIG1heFByaWNlLCBzdGFycyB9KVxuICAgIFxuICAgIGlmICh0aGlzLmhhc01pblByaWNlSW5wdXRUYXJnZXQpIHtcbiAgICAgIHRoaXMubWluUHJpY2VJbnB1dFRhcmdldC52YWx1ZSA9IG1pblByaWNlID4gMCA/IG1pblByaWNlLnRvU3RyaW5nKCkgOiAnJ1xuICAgICAgY29uc29sZS5sb2coJ0hvdGVsU2VhcmNoOiBVcGRhdGVkIG1pblByaWNlIHRvOicsIG1pblByaWNlKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5oYXNNYXhQcmljZUlucHV0VGFyZ2V0KSB7XG4gICAgICAvLyBPbmx5IHNldCBtYXhQcmljZSBpZiBpdCdzIGxlc3MgdGhhbiAzMDAwIChub3QgdGhlIGRlZmF1bHQgbWF4IHZhbHVlKVxuICAgICAgdGhpcy5tYXhQcmljZUlucHV0VGFyZ2V0LnZhbHVlID0gKG1heFByaWNlID4gMCAmJiBtYXhQcmljZSA8IDMwMDApID8gbWF4UHJpY2UudG9TdHJpbmcoKSA6ICcnXG4gICAgICBjb25zb2xlLmxvZygnSG90ZWxTZWFyY2g6IFVwZGF0ZWQgbWF4UHJpY2UgdG86JywgbWF4UHJpY2UgPCAzMDAwID8gbWF4UHJpY2UgOiAnZW1wdHkgKG5vIGxpbWl0KScpXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLmhhc1N0YXJzSW5wdXRUYXJnZXQpIHtcbiAgICAgIHRoaXMuc3RhcnNJbnB1dFRhcmdldC52YWx1ZSA9IHN0YXJzID4gMCA/IHN0YXJzLnRvU3RyaW5nKCkgOiAnJ1xuICAgICAgY29uc29sZS5sb2coJ0hvdGVsU2VhcmNoOiBVcGRhdGVkIHN0YXJzIHRvOicsIHN0YXJzKVxuICAgIH1cbiAgfVxuXG4gIG9wZW5TZWFyY2hNb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLnNlYXJjaE1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuc2VhcmNoSW5wdXRUYXJnZXQuZm9jdXMoKVxuICAgIH0sIDEwMClcbiAgfVxuXG4gIGNsb3NlU2VhcmNoTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5zZWFyY2hNb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gIH1cblxuICBzdWJtaXRTZWFyY2goKTogdm9pZCB7XG4gICAgY29uc3QgZm9ybSA9IHRoaXMuc2VhcmNoSW5wdXRUYXJnZXQuY2xvc2VzdChcImZvcm1cIikgYXMgSFRNTEZvcm1FbGVtZW50XG4gICAgaWYgKGZvcm0pIHtcbiAgICAgIC8vIEFsd2F5cyBzdWJtaXQgdGhlIGZvcm0sIGV2ZW4gaWYgaW5wdXQgaXMgZW1wdHlcbiAgICAgIGZvcm0ucmVxdWVzdFN1Ym1pdCgpXG4gICAgfVxuICB9XG5cbiAgaGFuZGxlU2VhcmNoSW5wdXRLZXlwcmVzcyhldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgIGlmIChldmVudC5rZXkgPT09IFwiRW50ZXJcIikge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgdGhpcy5zdWJtaXRTZWFyY2goKVxuICAgIH1cbiAgfVxuXG4gIHRvZ2dsZVNlY3Rpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHNlY3Rpb24gPSBidXR0b24uZGF0YXNldC5zZWN0aW9uXG4gICAgXG4gICAgaWYgKCFzZWN0aW9uKSByZXR1cm5cblxuICAgIGNvbnN0IGNvbnRlbnRUYXJnZXQgPSBgJHtzZWN0aW9ufUNvbnRlbnRUYXJnZXRgIGFzIGtleW9mIHRoaXNcbiAgICBjb25zdCBpY29uVGFyZ2V0ID0gYCR7c2VjdGlvbn1JY29uVGFyZ2V0YCBhcyBrZXlvZiB0aGlzXG5cbiAgICBjb25zdCBjb250ZW50ID0gdGhpc1tjb250ZW50VGFyZ2V0XSBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGljb24gPSB0aGlzW2ljb25UYXJnZXRdIGFzIEhUTUxFbGVtZW50XG5cbiAgICBpZiAoY29udGVudCAmJiBpY29uKSB7XG4gICAgICBjb250ZW50LmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIilcbiAgICAgIGljb24uY2xhc3NMaXN0LnRvZ2dsZShcInJvdGF0ZS0xODBcIilcbiAgICB9XG4gIH1cblxuICBvcGVuQ2l0eVNlbGVjdG9yKCk6IHZvaWQge1xuICAgIGFsZXJ0KFwiXHU1N0NFXHU1RTAyXHU5MDA5XHU2MkU5XHU1MjlGXHU4MEZEXHVGRjFBXFxuXFxuXHU1NzI4XHU1QjhDXHU2NTc0XHU3MjQ4XHU2NzJDXHU0RTJEXHVGRjBDXHU4RkQ5XHU5MUNDXHU0RjFBXHU2MjUzXHU1RjAwXHU1N0NFXHU1RTAyXHU5MDA5XHU2MkU5XHU1NjY4XHUzMDAyXFxuXFxuXHU1RjUzXHU1MjREXHU1N0NFXHU1RTAyXHVGRjFBXHU2REYxXHU1NzMzXHU1RTAyXCIpXG4gIH1cblxuICBvcGVuR3Vlc3RTZWxlY3RvcigpOiB2b2lkIHtcbiAgICBjb25zdCByb29tcyA9IHByb21wdChcIlx1OEJGN1x1OEY5M1x1NTE2NVx1NjIzRlx1OTVGNFx1NjU3MFx1OTFDRlwiLCBcIjFcIilcbiAgICBjb25zdCBhZHVsdHMgPSBwcm9tcHQoXCJcdThCRjdcdThGOTNcdTUxNjVcdTYyMTBcdTRFQkFcdTY1NzBcdTkxQ0ZcIiwgXCIxXCIpXG4gICAgY29uc3QgY2hpbGRyZW4gPSBwcm9tcHQoXCJcdThCRjdcdThGOTNcdTUxNjVcdTUxM0ZcdTdBRTVcdTY1NzBcdTkxQ0ZcIiwgXCIwXCIpXG4gICAgXG4gICAgaWYgKHJvb21zICYmIGFkdWx0cykge1xuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZilcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdyb29tcycsIHJvb21zKVxuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2FkdWx0cycsIGFkdWx0cylcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdjaGlsZHJlbicsIGNoaWxkcmVuIHx8ICcwJylcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsLnRvU3RyaW5nKClcbiAgICB9XG4gIH1cblxuICBnZXRDdXJyZW50TG9jYXRpb24oKTogdm9pZCB7XG4gICAgaWYgKCFuYXZpZ2F0b3IuZ2VvbG9jYXRpb24pIHtcbiAgICAgIGFsZXJ0KCdcdTYwQThcdTc2ODRcdTZENEZcdTg5QzhcdTU2NjhcdTRFMERcdTY1MkZcdTYzMDFcdTU3MzBcdTc0MDZcdTVCOUFcdTRGNERcdTUyOUZcdTgwRkQnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQ/LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBpZiAoYnV0dG9uKSB7XG4gICAgICBidXR0b24uZGlzYWJsZWQgPSB0cnVlXG4gICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS01MCcpXG4gICAgfVxuXG4gICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbihcbiAgICAgIChwb3NpdGlvbikgPT4ge1xuICAgICAgICBjb25zdCB7IGxhdGl0dWRlLCBsb25naXR1ZGUgfSA9IHBvc2l0aW9uLmNvb3Jkc1xuICAgICAgICBjb25zb2xlLmxvZygnR290IGxvY2F0aW9uOicsIHsgbGF0aXR1ZGUsIGxvbmdpdHVkZSB9KVxuICAgICAgICBcbiAgICAgICAgLy8gSW4gYSByZWFsIGFwcCwgeW91IHdvdWxkIHJldmVyc2UgZ2VvY29kZSB0aGVzZSBjb29yZGluYXRlcyB0byBnZXQgdGhlIGNpdHkgbmFtZVxuICAgICAgICAvLyBGb3Igbm93LCB3ZSdsbCBzaG93IHRoZSBjb29yZGluYXRlcyBhbmQgYWxlcnQgdGhlIHVzZXJcbiAgICAgICAgYWxlcnQoYFx1ODNCN1x1NTNENlx1NTIzMFx1NjBBOFx1NzY4NFx1NEY0RFx1N0Y2RVx1RkYxQVxcblx1N0VBQ1x1NUVBNjogJHtsYXRpdHVkZS50b0ZpeGVkKDYpfVxcblx1N0VDRlx1NUVBNjogJHtsb25naXR1ZGUudG9GaXhlZCg2KX1cXG5cXG5cdTU3MjhcdTVCOENcdTY1NzRcdTcyNDhcdTY3MkNcdTRFMkRcdUZGMENcdThGRDlcdTkxQ0NcdTRGMUFcdTgxRUFcdTUyQThcdTkwMDlcdTYyRTlcdTY3MDBcdThGRDFcdTc2ODRcdTU3Q0VcdTVFMDJgKVxuICAgICAgICBcbiAgICAgICAgaWYgKGJ1dHRvbikge1xuICAgICAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlXG4gICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ29wYWNpdHktNTAnKVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dlb2xvY2F0aW9uIGVycm9yOicsIGVycm9yKVxuICAgICAgICBsZXQgbWVzc2FnZSA9ICdcdTY1RTBcdTZDRDVcdTgzQjdcdTUzRDZcdTYwQThcdTc2ODRcdTRGNERcdTdGNkUnXG4gICAgICAgIFxuICAgICAgICBzd2l0Y2ggKGVycm9yLmNvZGUpIHtcbiAgICAgICAgICBjYXNlIGVycm9yLlBFUk1JU1NJT05fREVOSUVEOlxuICAgICAgICAgICAgbWVzc2FnZSA9ICdcdTYwQThcdTYyRDJcdTdFRERcdTRFODZcdTRGNERcdTdGNkVcdTY3NDNcdTk2NTBcdThCRjdcdTZDNDJcdTMwMDJcdThCRjdcdTU3MjhcdTZENEZcdTg5QzhcdTU2NjhcdThCQkVcdTdGNkVcdTRFMkRcdTUxNDFcdThCQjhcdThCQkZcdTk1RUVcdTRGNERcdTdGNkVcdTRGRTFcdTYwNkZcdTMwMDInXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgZXJyb3IuUE9TSVRJT05fVU5BVkFJTEFCTEU6XG4gICAgICAgICAgICBtZXNzYWdlID0gJ1x1NEY0RFx1N0Y2RVx1NEZFMVx1NjA2Rlx1NEUwRFx1NTNFRlx1NzUyOFx1RkYwQ1x1OEJGN1x1NjhDMFx1NjdFNVx1NjBBOFx1NzY4NFx1N0Y1MVx1N0VEQ1x1OEZERVx1NjNBNVx1MzAwMidcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSBlcnJvci5USU1FT1VUOlxuICAgICAgICAgICAgbWVzc2FnZSA9ICdcdTgzQjdcdTUzRDZcdTRGNERcdTdGNkVcdTRGRTFcdTYwNkZcdThEODVcdTY1RjZcdUZGMENcdThCRjdcdTkxQ0RcdThCRDVcdTMwMDInXG4gICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBhbGVydChtZXNzYWdlKVxuICAgICAgICBcbiAgICAgICAgaWYgKGJ1dHRvbikge1xuICAgICAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlXG4gICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ29wYWNpdHktNTAnKVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBlbmFibGVIaWdoQWNjdXJhY3k6IHRydWUsXG4gICAgICAgIHRpbWVvdXQ6IDEwMDAwLFxuICAgICAgICBtYXhpbXVtQWdlOiAwXG4gICAgICB9XG4gICAgKVxuICB9XG5cbiAgc2VsZWN0T3B0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBjb25zdCBzZWFyY2hUZXJtID0gYnV0dG9uLmRhdGFzZXQuc2VhcmNoVGVybVxuICAgIFxuICAgIGlmICghc2VhcmNoVGVybSkgcmV0dXJuXG5cbiAgICBjb25zb2xlLmxvZygnSG90ZWxTZWFyY2g6IFNlbGVjdGVkIG9wdGlvbjonLCBzZWFyY2hUZXJtKVxuXG4gICAgLy8gVXBkYXRlIHRoZSBzZWFyY2ggaW5wdXQgdmFsdWVcbiAgICB0aGlzLnNlYXJjaElucHV0VGFyZ2V0LnZhbHVlID0gc2VhcmNoVGVybVxuXG4gICAgLy8gVXBkYXRlIHRoZSBzZWFyY2ggZGlzcGxheSBpbnB1dCBpZiBpdCBleGlzdHNcbiAgICBpZiAodGhpcy5oYXNTZWFyY2hEaXNwbGF5VGFyZ2V0KSB7XG4gICAgICB0aGlzLnNlYXJjaERpc3BsYXlUYXJnZXQudmFsdWUgPSBzZWFyY2hUZXJtXG4gICAgICBjb25zb2xlLmxvZygnSG90ZWxTZWFyY2g6IFVwZGF0ZWQgc2VhcmNoIGRpc3BsYXkgdG86Jywgc2VhcmNoVGVybSlcbiAgICB9XG5cbiAgICAvLyBDbG9zZSB0aGUgc2VhcmNoIG1vZGFsXG4gICAgdGhpcy5jbG9zZVNlYXJjaE1vZGFsKClcblxuICAgIC8vIFN1Ym1pdCB0aGUgc2VhcmNoIGZvcm0gZGlyZWN0bHlcbiAgICB0aGlzLnN1Ym1pdFNlYXJjaCgpXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcInRhYkJ1dHRvblwiLCBcInRhYkNvbnRlbnRcIlxuICBdXG5cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICAvLyBBZGQgeW91ciB2YWx1ZXMgaGVyZSwgZS5nLjpcbiAgICAvLyByb29tSWQ6IFN0cmluZyxcbiAgICAvLyB1c2VySWQ6IFN0cmluZ1xuICB9XG5cbiAgLy8gRGVjbGFyZSB5b3VyIHRhcmdldHMgYW5kIHZhbHVlc1xuICBkZWNsYXJlIHJlYWRvbmx5IHRhYkJ1dHRvblRhcmdldHM6IEhUTUxCdXR0b25FbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSB0YWJDb250ZW50VGFyZ2V0czogSFRNTERpdkVsZW1lbnRbXVxuICBcbiAgcHJpdmF0ZSBjdXJyZW50VGFiID0gJ2NvdmVyJ1xuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJIb3RlbERldGFpbCBjb25uZWN0ZWRcIilcbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJIb3RlbERldGFpbCBkaXNjb25uZWN0ZWRcIilcbiAgfVxuXG4gIC8vIFRhYiBzd2l0Y2hpbmcgZnVuY3Rpb25hbGl0eVxuICBzd2l0Y2hUYWIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGNvbnN0IHRhYk5hbWUgPSBidXR0b24uZGF0YXNldC50YWJcbiAgICBpZiAoIXRhYk5hbWUgfHwgdGFiTmFtZSA9PT0gdGhpcy5jdXJyZW50VGFiKSByZXR1cm5cbiAgICBcbiAgICAvLyBVcGRhdGUgYnV0dG9uIHN0YXRlc1xuICAgIHRoaXMudGFiQnV0dG9uVGFyZ2V0cy5mb3JFYWNoKGJ0biA9PiB7XG4gICAgICBpZiAoYnRuLmRhdGFzZXQudGFiID09PSB0YWJOYW1lKSB7XG4gICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktNTAwJywgJ2JvcmRlci10cmFuc3BhcmVudCcpXG4gICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktOTAwJywgJ2JvcmRlci1vcmFuZ2UtNTAwJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktOTAwJywgJ2JvcmRlci1vcmFuZ2UtNTAwJylcbiAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS01MDAnLCAnYm9yZGVyLXRyYW5zcGFyZW50JylcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIC8vIFVwZGF0ZSBjb250ZW50IHZpc2liaWxpdHlcbiAgICB0aGlzLnRhYkNvbnRlbnRUYXJnZXRzLmZvckVhY2goY29udGVudCA9PiB7XG4gICAgICBpZiAoY29udGVudC5kYXRhc2V0LnRhYiA9PT0gdGFiTmFtZSkge1xuICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnYmxvY2snKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdibG9jaycpXG4gICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIHRoaXMuY3VycmVudFRhYiA9IHRhYk5hbWVcbiAgfVxuXG4gIC8vIEZPUk1TOiBUdXJibyArIFR1cmJvIFN0cmVhbXMgaGFuZGxlIGV2ZXJ5dGhpbmcgYXV0b21hdGljYWxseVxuICAvLyAtIEZvcm1zIHN1Ym1pdCB2aWEgQUpBWCAoVHVyYm8gRHJpdmUpXG4gIC8vIC0gU2VydmVyIHJlc3BvbmRzIHdpdGggZm9ybWF0LnR1cmJvX3N0cmVhbVxuICAvLyAtIFR1cmJvIFN0cmVhbXMgdXBkYXRlIERPTSBhdXRvbWF0aWNhbGx5XG4gIC8vIC0gTk8gbWFudWFsIGZvcm0gaGFuZGxpbmcgbmVlZGVkIGluIFN0aW11bHVzXG4gIC8vXG4gIC8vIFVzZSBTdGltdWx1cyBmb3I6XG4gIC8vIC0gVUkgaW50ZXJhY3Rpb25zICh0b2dnbGUsIHNob3cvaGlkZSlcbiAgLy8gLSBJbnB1dCB2YWxpZGF0aW9uL2Zvcm1hdHRpbmdcbiAgLy8gLSBEeW5hbWljIGZvcm0gZmllbGRzXG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJwYWdlXCIsIFwiZG90XCJdXG4gIFxuICBkZWNsYXJlIHJlYWRvbmx5IHBhZ2VUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgZG90VGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuXG4gIHByaXZhdGUgY3VycmVudFBhZ2U6IG51bWJlciA9IDBcbiAgcHJpdmF0ZSB0b3VjaFN0YXJ0WDogbnVtYmVyID0gMFxuICBwcml2YXRlIHRvdWNoRW5kWDogbnVtYmVyID0gMFxuICBwcml2YXRlIG1pblN3aXBlRGlzdGFuY2U6IG51bWJlciA9IDUwIC8vIFx1NjcwMFx1NUMwRlx1NkVEMVx1NTJBOFx1OERERFx1NzlCQlx1RkYwOFx1NTBDRlx1N0QyMFx1RkYwOVxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgdGhpcy5zaG93UGFnZSgwKVxuICAgIC8vIFx1NkRGQlx1NTJBMFx1ODlFNlx1NjQ3OFx1NEU4Qlx1NEVGNlx1NzZEMVx1NTQyQ1xuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5oYW5kbGVUb3VjaFN0YXJ0LmJpbmQodGhpcyksIHsgcGFzc2l2ZTogdHJ1ZSB9KVxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuaGFuZGxlVG91Y2hFbmQuYmluZCh0aGlzKSwgeyBwYXNzaXZlOiB0cnVlIH0pXG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIFx1NkUwNVx1NzQwNlx1NEU4Qlx1NEVGNlx1NzZEMVx1NTQyQ1xuICAgIHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5oYW5kbGVUb3VjaFN0YXJ0LmJpbmQodGhpcykpXG4gICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5oYW5kbGVUb3VjaEVuZC5iaW5kKHRoaXMpKVxuICB9XG5cbiAgLy8gXHU1OTA0XHU3NDA2XHU4OUU2XHU2NDc4XHU1RjAwXHU1OUNCXG4gIHByaXZhdGUgaGFuZGxlVG91Y2hTdGFydChldmVudDogVG91Y2hFdmVudCk6IHZvaWQge1xuICAgIHRoaXMudG91Y2hTdGFydFggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5zY3JlZW5YXG4gIH1cblxuICAvLyBcdTU5MDRcdTc0MDZcdTg5RTZcdTY0NzhcdTdFRDNcdTY3NUZcbiAgcHJpdmF0ZSBoYW5kbGVUb3VjaEVuZChldmVudDogVG91Y2hFdmVudCk6IHZvaWQge1xuICAgIHRoaXMudG91Y2hFbmRYID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uc2NyZWVuWFxuICAgIHRoaXMuaGFuZGxlU3dpcGUoKVxuICB9XG5cbiAgLy8gXHU1OTA0XHU3NDA2XHU2RUQxXHU1MkE4XHU5MDNCXHU4RjkxXG4gIHByaXZhdGUgaGFuZGxlU3dpcGUoKTogdm9pZCB7XG4gICAgY29uc3Qgc3dpcGVEaXN0YW5jZSA9IHRoaXMudG91Y2hFbmRYIC0gdGhpcy50b3VjaFN0YXJ0WFxuICAgIFxuICAgIC8vIFx1NTQxMVx1NURFNlx1NkVEMVx1NTJBOFx1RkYwOFx1NEUwQlx1NEUwMFx1OTg3NVx1RkYwOVxuICAgIGlmIChzd2lwZURpc3RhbmNlIDwgLXRoaXMubWluU3dpcGVEaXN0YW5jZSkge1xuICAgICAgdGhpcy5uZXh0UGFnZSgpXG4gICAgfVxuICAgIC8vIFx1NTQxMVx1NTNGM1x1NkVEMVx1NTJBOFx1RkYwOFx1NEUwQVx1NEUwMFx1OTg3NVx1RkYwOVxuICAgIGVsc2UgaWYgKHN3aXBlRGlzdGFuY2UgPiB0aGlzLm1pblN3aXBlRGlzdGFuY2UpIHtcbiAgICAgIHRoaXMucHJldlBhZ2UoKVxuICAgIH1cbiAgfVxuXG4gIGdvVG9QYWdlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBwYWdlSW5kZXggPSBwYXJzZUludCh0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXBhZ2UnKSB8fCAnMCcsIDEwKVxuICAgIGlmIChwYWdlSW5kZXggPj0gMCAmJiBwYWdlSW5kZXggPCB0aGlzLnBhZ2VUYXJnZXRzLmxlbmd0aCkge1xuICAgICAgdGhpcy5zaG93UGFnZShwYWdlSW5kZXgpXG4gICAgfVxuICB9XG5cbiAgbmV4dFBhZ2UoKTogdm9pZCB7XG4gICAgY29uc3QgbmV4dEluZGV4ID0gKHRoaXMuY3VycmVudFBhZ2UgKyAxKSAlIHRoaXMucGFnZVRhcmdldHMubGVuZ3RoXG4gICAgdGhpcy5zaG93UGFnZShuZXh0SW5kZXgpXG4gIH1cblxuICBwcmV2UGFnZSgpOiB2b2lkIHtcbiAgICBjb25zdCBwcmV2SW5kZXggPSAodGhpcy5jdXJyZW50UGFnZSAtIDEgKyB0aGlzLnBhZ2VUYXJnZXRzLmxlbmd0aCkgJSB0aGlzLnBhZ2VUYXJnZXRzLmxlbmd0aFxuICAgIHRoaXMuc2hvd1BhZ2UocHJldkluZGV4KVxuICB9XG5cbiAgcHJpdmF0ZSBzaG93UGFnZShwYWdlSW5kZXg6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIEhpZGUgYWxsIHBhZ2VzXG4gICAgdGhpcy5wYWdlVGFyZ2V0cy5mb3JFYWNoKChwYWdlLCBpbmRleCkgPT4ge1xuICAgICAgaWYgKGluZGV4ID09PSBwYWdlSW5kZXgpIHtcbiAgICAgICAgcGFnZS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYWdlLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gVXBkYXRlIGRvdHNcbiAgICB0aGlzLmRvdFRhcmdldHMuZm9yRWFjaCgoZG90LCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgYnV0dG9uID0gZG90IGFzIEhUTUxCdXR0b25FbGVtZW50XG4gICAgICBpZiAoaW5kZXggPT09IHBhZ2VJbmRleCkge1xuICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImJnLWdyYXktMzAwXCIsIFwidy0xLjVcIiwgXCJoLTEuNVwiKVxuICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZChcInctNlwiLCBcImgtMVwiKVxuICAgICAgICBidXR0b24uc3R5bGUuYmFja2dyb3VuZCA9IFwiI0ZGRDcwMFwiXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcInctNlwiLCBcImgtMVwiKVxuICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZChcImJnLWdyYXktMzAwXCIsIFwidy0xLjVcIiwgXCJoLTEuNVwiKVxuICAgICAgICBidXR0b24uc3R5bGUuYmFja2dyb3VuZCA9IFwiXCJcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgdGhpcy5jdXJyZW50UGFnZSA9IHBhZ2VJbmRleFxuICB9XG59XG5cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlciB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwibW9kYWxcIixcbiAgICBcIm1vZGFsVGl0bGVcIixcbiAgICBcInNlbGVjdGVkRGlzcGxheVwiLFxuICAgIFwicGFzc2VuZ2VyVGFiXCIsXG4gICAgXCJjb3VudFRhYlwiLFxuICAgIFwicGFzc2VuZ2VyTGlzdFBhbmVsXCIsXG4gICAgXCJjb3VudFBhbmVsXCIsXG4gICAgXCJhZHVsdHNDb3VudFwiLFxuICAgIFwiY2hpbGRyZW5Db3VudFwiLFxuICAgIFwiaW5mYW50c0NvdW50XCJcbiAgXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbW9kYWxUaXRsZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzZWxlY3RlZERpc3BsYXlUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VsZWN0ZWREaXNwbGF5VGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IHBhc3NlbmdlclRhYlRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjb3VudFRhYlRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBwYXNzZW5nZXJMaXN0UGFuZWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY291bnRQYW5lbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBhZHVsdHNDb3VudFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjaGlsZHJlbkNvdW50VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGluZmFudHNDb3VudFRhcmdldDogSFRNTEVsZW1lbnRcblxuICBwcml2YXRlIGFkdWx0czogbnVtYmVyID0gMFxuICBwcml2YXRlIGNoaWxkcmVuOiBudW1iZXIgPSAwXG4gIHByaXZhdGUgaW5mYW50czogbnVtYmVyID0gMFxuICBwcml2YXRlIHNlbGVjdGVkUGFzc2VuZ2VySWRzOiBTZXQ8bnVtYmVyPiA9IG5ldyBTZXQoKVxuICBwcml2YXRlIHNlbGVjdGVkUGFzc2VuZ2VyTmFtZXM6IE1hcDxudW1iZXIsIHN0cmluZz4gPSBuZXcgTWFwKClcbiAgcHJpdmF0ZSBoYXNTZWxlY3Rpb246IGJvb2xlYW4gPSBmYWxzZVxuXG4gIC8vIEJhY2t1cCBvZiBjb25maXJtZWQgc3RhdGVcbiAgcHJpdmF0ZSBjb25maXJtZWRBZHVsdHM6IG51bWJlciA9IDBcbiAgcHJpdmF0ZSBjb25maXJtZWRDaGlsZHJlbjogbnVtYmVyID0gMFxuICBwcml2YXRlIGNvbmZpcm1lZEluZmFudHM6IG51bWJlciA9IDBcbiAgcHJpdmF0ZSBjb25maXJtZWRQYXNzZW5nZXJJZHM6IFNldDxudW1iZXI+ID0gbmV3IFNldCgpXG4gIHByaXZhdGUgY29uZmlybWVkUGFzc2VuZ2VyTmFtZXM6IE1hcDxudW1iZXIsIHN0cmluZz4gPSBuZXcgTWFwKClcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIExvYWQgc2F2ZWQgc3RhdGUgZnJvbSBsb2NhbFN0b3JhZ2VcbiAgICB0aGlzLmxvYWRGcm9tTG9jYWxTdG9yYWdlKClcbiAgICAvLyBVcGRhdGUgZGlzcGxheSBpZiB0aGVyZSdzIGEgc2F2ZWQgc2VsZWN0aW9uXG4gICAgaWYgKHRoaXMuaGFzU2VsZWN0aW9uKSB7XG4gICAgICB0aGlzLnVwZGF0ZURpc3BsYXkoKVxuICAgIH1cbiAgfVxuXG4gIG9wZW5Nb2RhbChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIlxuICAgIFxuICAgIC8vIFNob3cgcGFzc2VuZ2VyIGxpc3QgcGFuZWwgYnkgZGVmYXVsdFxuICAgIHRoaXMuc3dpdGNoVG9QYXNzZW5nZXJUYWIoZXZlbnQpXG4gIH1cblxuICBjbG9zZU1vZGFsKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIFxuICAgIC8vIFJlc3RvcmUgdG8gY29uZmlybWVkIHN0YXRlIHdoZW4gY2xvc2luZyB3aXRob3V0IGNvbmZpcm1pbmdcbiAgICB0aGlzLmFkdWx0cyA9IHRoaXMuY29uZmlybWVkQWR1bHRzXG4gICAgdGhpcy5jaGlsZHJlbiA9IHRoaXMuY29uZmlybWVkQ2hpbGRyZW5cbiAgICB0aGlzLmluZmFudHMgPSB0aGlzLmNvbmZpcm1lZEluZmFudHNcbiAgICB0aGlzLnNlbGVjdGVkUGFzc2VuZ2VySWRzID0gbmV3IFNldCh0aGlzLmNvbmZpcm1lZFBhc3NlbmdlcklkcylcbiAgICB0aGlzLnNlbGVjdGVkUGFzc2VuZ2VyTmFtZXMgPSBuZXcgTWFwKHRoaXMuY29uZmlybWVkUGFzc2VuZ2VyTmFtZXMpXG4gICAgXG4gICAgLy8gUmVzdG9yZSBjaGVja2JveCBzdGF0ZXNcbiAgICBjb25zdCBjaGVja2JveGVzID0gdGhpcy5wYXNzZW5nZXJMaXN0UGFuZWxUYXJnZXQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJylcbiAgICBjaGVja2JveGVzLmZvckVhY2goKGNoZWNrYm94OiBFbGVtZW50KSA9PiB7XG4gICAgICBjb25zdCBjYiA9IGNoZWNrYm94IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICAgIGNvbnN0IHBhc3NlbmdlcklkID0gcGFyc2VJbnQoY2IudmFsdWUpXG4gICAgICBjYi5jaGVja2VkID0gdGhpcy5jb25maXJtZWRQYXNzZW5nZXJJZHMuaGFzKHBhc3NlbmdlcklkKVxuICAgIH0pXG4gICAgXG4gICAgLy8gVXBkYXRlIGNvdW50ZXJzIHRvIHNob3cgY29uZmlybWVkIHZhbHVlc1xuICAgIHRoaXMudXBkYXRlQ291bnRlcnMoKVxuICAgIFxuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcIlwiXG4gIH1cblxuICBzdG9wUHJvcGFnYXRpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgfVxuXG4gIHN3aXRjaFRvUGFzc2VuZ2VyVGFiKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIFxuICAgIC8vIFVwZGF0ZSB0YWIgc3R5bGVzXG4gICAgdGhpcy5wYXNzZW5nZXJUYWJUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ibHVlLTUwMFwiKVxuICAgIHRoaXMucGFzc2VuZ2VyVGFiVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItdHJhbnNwYXJlbnRcIilcbiAgICB0aGlzLmNvdW50VGFiVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItYmx1ZS01MDBcIilcbiAgICB0aGlzLmNvdW50VGFiVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItdHJhbnNwYXJlbnRcIilcbiAgICBcbiAgICAvLyBTaG93IHBhc3NlbmdlciBsaXN0IHBhbmVsLCBoaWRlIGNvdW50IHBhbmVsXG4gICAgdGhpcy5wYXNzZW5nZXJMaXN0UGFuZWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgIHRoaXMuY291bnRQYW5lbFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gIH1cblxuICBzd2l0Y2hUb0NvdW50VGFiKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIFxuICAgIC8vIFVwZGF0ZSB0YWIgc3R5bGVzXG4gICAgdGhpcy5jb3VudFRhYlRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWJsdWUtNTAwXCIpXG4gICAgdGhpcy5jb3VudFRhYlRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYm9yZGVyLXRyYW5zcGFyZW50XCIpXG4gICAgdGhpcy5wYXNzZW5nZXJUYWJUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJvcmRlci1ibHVlLTUwMFwiKVxuICAgIHRoaXMucGFzc2VuZ2VyVGFiVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItdHJhbnNwYXJlbnRcIilcbiAgICBcbiAgICAvLyBTaG93IGNvdW50IHBhbmVsLCBoaWRlIHBhc3NlbmdlciBsaXN0IHBhbmVsXG4gICAgdGhpcy5jb3VudFBhbmVsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICB0aGlzLnBhc3Nlbmdlckxpc3RQYW5lbFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gIH1cblxuICB0b2dnbGVQYXNzZW5nZXIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY2hlY2tib3ggPSBldmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IHBhc3NlbmdlcklkID0gcGFyc2VJbnQoY2hlY2tib3gudmFsdWUpXG4gICAgY29uc3QgcGFzc2VuZ2VyTmFtZSA9IGNoZWNrYm94LmRhdGFzZXQucGFzc2VuZ2VyTmFtZSB8fCAnJ1xuICAgIFxuICAgIGlmIChjaGVja2JveC5jaGVja2VkKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkUGFzc2VuZ2VySWRzLmFkZChwYXNzZW5nZXJJZClcbiAgICAgIHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJOYW1lcy5zZXQocGFzc2VuZ2VySWQsIHBhc3Nlbmdlck5hbWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJJZHMuZGVsZXRlKHBhc3NlbmdlcklkKVxuICAgICAgdGhpcy5zZWxlY3RlZFBhc3Nlbmdlck5hbWVzLmRlbGV0ZShwYXNzZW5nZXJJZClcbiAgICB9XG4gICAgXG4gICAgLy8gQXV0by11cGRhdGUgYWR1bHRzIGNvdW50IGJhc2VkIG9uIG51bWJlciBvZiBzZWxlY3RlZCBwYXNzZW5nZXJzXG4gICAgY29uc3Qgc2VsZWN0ZWRDb3VudCA9IHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJOYW1lcy5zaXplXG4gICAgdGhpcy5hZHVsdHMgPSBzZWxlY3RlZENvdW50XG4gICAgXG4gICAgLy8gVXBkYXRlIG1vZGFsIHRpdGxlIGFuZCBjb3VudGVycyB0byByZWZsZWN0IGN1cnJlbnQgc2VsZWN0aW9uXG4gICAgdGhpcy51cGRhdGVDb3VudGVycygpXG4gIH1cblxuICBpbmNyZW1lbnRBZHVsdHMoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgXG4gICAgaWYgKHRoaXMuYWR1bHRzIDwgOSkge1xuICAgICAgdGhpcy5hZHVsdHMrK1xuICAgICAgdGhpcy51cGRhdGVDb3VudGVycygpXG4gICAgfVxuICB9XG5cbiAgZGVjcmVtZW50QWR1bHRzKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIFxuICAgIGlmICh0aGlzLmFkdWx0cyA+IDApIHtcbiAgICAgIHRoaXMuYWR1bHRzLS1cbiAgICAgIHRoaXMudXBkYXRlQ291bnRlcnMoKVxuICAgIH1cbiAgfVxuXG4gIGluY3JlbWVudENoaWxkcmVuKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIFxuICAgIGlmICh0aGlzLmNoaWxkcmVuIDwgOCkge1xuICAgICAgdGhpcy5jaGlsZHJlbisrXG4gICAgICB0aGlzLnVwZGF0ZUNvdW50ZXJzKClcbiAgICB9XG4gIH1cblxuICBkZWNyZW1lbnRDaGlsZHJlbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBcbiAgICBpZiAodGhpcy5jaGlsZHJlbiA+IDApIHtcbiAgICAgIHRoaXMuY2hpbGRyZW4tLVxuICAgICAgdGhpcy51cGRhdGVDb3VudGVycygpXG4gICAgfVxuICB9XG5cbiAgaW5jcmVtZW50SW5mYW50cyhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBcbiAgICBpZiAodGhpcy5pbmZhbnRzIDwgdGhpcy5hZHVsdHMpIHtcbiAgICAgIHRoaXMuaW5mYW50cysrXG4gICAgICB0aGlzLnVwZGF0ZUNvdW50ZXJzKClcbiAgICB9XG4gIH1cblxuICBkZWNyZW1lbnRJbmZhbnRzKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIFxuICAgIGlmICh0aGlzLmluZmFudHMgPiAwKSB7XG4gICAgICB0aGlzLmluZmFudHMtLVxuICAgICAgdGhpcy51cGRhdGVDb3VudGVycygpXG4gICAgfVxuICB9XG5cbiAgcmVzZXQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgXG4gICAgdGhpcy5hZHVsdHMgPSAwXG4gICAgdGhpcy5jaGlsZHJlbiA9IDBcbiAgICB0aGlzLmluZmFudHMgPSAwXG4gICAgdGhpcy5zZWxlY3RlZFBhc3Nlbmdlcklkcy5jbGVhcigpXG4gICAgdGhpcy5zZWxlY3RlZFBhc3Nlbmdlck5hbWVzLmNsZWFyKClcbiAgICB0aGlzLmhhc1NlbGVjdGlvbiA9IGZhbHNlXG4gICAgXG4gICAgLy8gQWxzbyByZXNldCBjb25maXJtZWQgc3RhdGVcbiAgICB0aGlzLmNvbmZpcm1lZEFkdWx0cyA9IDBcbiAgICB0aGlzLmNvbmZpcm1lZENoaWxkcmVuID0gMFxuICAgIHRoaXMuY29uZmlybWVkSW5mYW50cyA9IDBcbiAgICB0aGlzLmNvbmZpcm1lZFBhc3Nlbmdlcklkcy5jbGVhcigpXG4gICAgdGhpcy5jb25maXJtZWRQYXNzZW5nZXJOYW1lcy5jbGVhcigpXG4gICAgXG4gICAgLy8gQ2xlYXIgbG9jYWxTdG9yYWdlXG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Bhc3Nlbmdlcl9zZWxlY3Rpb24nKVxuICAgIFxuICAgIC8vIFVuY2hlY2sgYWxsIGNoZWNrYm94ZXNcbiAgICBjb25zdCBjaGVja2JveGVzID0gdGhpcy5wYXNzZW5nZXJMaXN0UGFuZWxUYXJnZXQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJylcbiAgICBjaGVja2JveGVzLmZvckVhY2goKGNoZWNrYm94OiBFbGVtZW50KSA9PiB7XG4gICAgICAoY2hlY2tib3ggYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZCA9IGZhbHNlXG4gICAgfSlcbiAgICBcbiAgICB0aGlzLnVwZGF0ZUNvdW50ZXJzKClcbiAgICB0aGlzLnVwZGF0ZURpc3BsYXkoKVxuICB9XG5cbiAgY29uZmlybShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBcbiAgICAvLyBDaGVjayBpZiB3ZSdyZSBvbiB0aGUgY291bnQgcGFuZWwgKG5vdCBwYXNzZW5nZXIgbGlzdCBwYW5lbClcbiAgICBjb25zdCBpc0NvdW50UGFuZWxBY3RpdmUgPSAhdGhpcy5jb3VudFBhbmVsVGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImhpZGRlblwiKVxuICAgIFxuICAgIC8vIE11dHVhbGx5IGV4Y2x1c2l2ZSBtb2RlczogY2xlYXIgb3Bwb3NpdGUgbW9kZSBkYXRhXG4gICAgaWYgKGlzQ291bnRQYW5lbEFjdGl2ZSkge1xuICAgICAgLy8gQ291bnQgbW9kZTogY2xlYXIgcGFzc2VuZ2VyIG5hbWVzL0lEc1xuICAgICAgdGhpcy5zZWxlY3RlZFBhc3Nlbmdlcklkcy5jbGVhcigpXG4gICAgICB0aGlzLnNlbGVjdGVkUGFzc2VuZ2VyTmFtZXMuY2xlYXIoKVxuICAgICAgXG4gICAgICAvLyBVbmNoZWNrIGFsbCBjaGVja2JveGVzIGluIHBhc3NlbmdlciBsaXN0XG4gICAgICBjb25zdCBjaGVja2JveGVzID0gdGhpcy5wYXNzZW5nZXJMaXN0UGFuZWxUYXJnZXQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJylcbiAgICAgIGNoZWNrYm94ZXMuZm9yRWFjaCgoY2hlY2tib3g6IEVsZW1lbnQpID0+IHtcbiAgICAgICAgKGNoZWNrYm94IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmNoZWNrZWQgPSBmYWxzZVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUGFzc2VuZ2VyIG5hbWUgbW9kZTogY2xlYXIgY291bnRzXG4gICAgICB0aGlzLmFkdWx0cyA9IDBcbiAgICAgIHRoaXMuY2hpbGRyZW4gPSAwXG4gICAgICB0aGlzLmluZmFudHMgPSAwXG4gICAgfVxuICAgIFxuICAgIC8vIFNhdmUgY3VycmVudCBzdGF0ZSBhcyBjb25maXJtZWQgc3RhdGVcbiAgICB0aGlzLmNvbmZpcm1lZEFkdWx0cyA9IHRoaXMuYWR1bHRzXG4gICAgdGhpcy5jb25maXJtZWRDaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW5cbiAgICB0aGlzLmNvbmZpcm1lZEluZmFudHMgPSB0aGlzLmluZmFudHNcbiAgICB0aGlzLmNvbmZpcm1lZFBhc3NlbmdlcklkcyA9IG5ldyBTZXQodGhpcy5zZWxlY3RlZFBhc3NlbmdlcklkcylcbiAgICB0aGlzLmNvbmZpcm1lZFBhc3Nlbmdlck5hbWVzID0gbmV3IE1hcCh0aGlzLnNlbGVjdGVkUGFzc2VuZ2VyTmFtZXMpXG4gICAgXG4gICAgdGhpcy5oYXNTZWxlY3Rpb24gPSB0cnVlXG4gICAgdGhpcy5zYXZlVG9Mb2NhbFN0b3JhZ2UoKVxuICAgIHRoaXMudXBkYXRlRGlzcGxheSgpXG4gICAgXG4gICAgLy8gQ2xvc2UgbW9kYWwgZGlyZWN0bHkgd2l0aG91dCB0cmlnZ2VyaW5nIHJlc3RvcmUgbG9naWNcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJcIlxuICB9XG5cbiAgdG9nZ2xlRWRpdCgpOiB2b2lkIHtcbiAgICAvLyBUaGlzIG1ldGhvZCBpcyB1c2VkIGluIHZpZXdzIHRvIHRvZ2dsZSBiZXR3ZWVuIGVkaXQgYW5kIGRpc3BsYXkgbW9kZXNcbiAgICBjb25zdCBldmVudCA9IG5ldyBFdmVudCgnY2xpY2snKVxuICAgIHRoaXMub3Blbk1vZGFsKGV2ZW50KVxuICB9XG5cbiAgc2VsZWN0UGFzc2VuZ2VyKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIC8vIERlbGVnYXRlIHRvIHRvZ2dsZVBhc3NlbmdlclxuICAgIHRoaXMudG9nZ2xlUGFzc2VuZ2VyKGV2ZW50KVxuICB9XG5cbiAgZGVjcmVhc2UoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgLy8gR2VuZXJhbCBkZWNyZWFzZSBtZXRob2QgdGhhdCBjYW4gYmUgdXNlZCBmb3IgYW55IGNvdW50XG4gICAgdGhpcy5kZWNyZW1lbnRBZHVsdHMoZXZlbnQpXG4gIH1cblxuICBpbmNyZWFzZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICAvLyBHZW5lcmFsIGluY3JlYXNlIG1ldGhvZCB0aGF0IGNhbiBiZSB1c2VkIGZvciBhbnkgY291bnRcbiAgICB0aGlzLmluY3JlbWVudEFkdWx0cyhldmVudClcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQ291bnRlcnMoKTogdm9pZCB7XG4gICAgdGhpcy5hZHVsdHNDb3VudFRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMuYWR1bHRzLnRvU3RyaW5nKClcbiAgICB0aGlzLmNoaWxkcmVuQ291bnRUYXJnZXQudGV4dENvbnRlbnQgPSB0aGlzLmNoaWxkcmVuLnRvU3RyaW5nKClcbiAgICB0aGlzLmluZmFudHNDb3VudFRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMuaW5mYW50cy50b1N0cmluZygpXG4gICAgdGhpcy51cGRhdGVNb2RhbFRpdGxlKClcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlTW9kYWxUaXRsZSgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGl0bGVUYXJnZXQudGV4dENvbnRlbnQgPSBgXHU1RjUzXHU1MjREXHU1REYyXHU5MDA5OiAke3RoaXMuYWR1bHRzfVx1NjIxMFx1NEVCQSAke3RoaXMuY2hpbGRyZW59XHU1MTNGXHU3QUU1ICR7dGhpcy5pbmZhbnRzfVx1NUE3NFx1NTEzRmBcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlRGlzcGxheSgpOiB2b2lkIHtcbiAgICBjb25zdCB0b3RhbCA9IHRoaXMuY29uZmlybWVkQWR1bHRzICsgdGhpcy5jb25maXJtZWRDaGlsZHJlbiArIHRoaXMuY29uZmlybWVkSW5mYW50c1xuICAgIFxuICAgIC8vIFVwZGF0ZSBhbGwgYnV0dG9uIGRpc3BsYXlzIG9uIHRoZSBwYWdlXG4gICAgdGhpcy5zZWxlY3RlZERpc3BsYXlUYXJnZXRzLmZvckVhY2goKGRpc3BsYXlDb250YWluZXIpID0+IHtcbiAgICAgIGNvbnN0IG1haW5EaXYgPSBkaXNwbGF5Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50ZXh0LWJhc2UnKSBhcyBIVE1MRWxlbWVudFxuICAgICAgY29uc3Qgc3VidGl0bGVEaXYgPSBkaXNwbGF5Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50ZXh0LXNtJykgYXMgSFRNTEVsZW1lbnRcbiAgICAgIFxuICAgICAgaWYgKG1haW5EaXYgJiYgc3VidGl0bGVEaXYpIHtcbiAgICAgICAgLy8gTW9kZSAxOiBQYXNzZW5nZXIgTmFtZSBNb2RlIC0gc2hvdyBuYW1lcywgaGlkZSBjb3VudFxuICAgICAgICBpZiAodGhpcy5jb25maXJtZWRQYXNzZW5nZXJOYW1lcy5zaXplID4gMCkge1xuICAgICAgICAgIGNvbnN0IG5hbWVzID0gQXJyYXkuZnJvbSh0aGlzLmNvbmZpcm1lZFBhc3Nlbmdlck5hbWVzLnZhbHVlcygpKVxuICAgICAgICAgIG1haW5EaXYudGV4dENvbnRlbnQgPSBuYW1lcy5qb2luKCdcdTMwMDEnKVxuICAgICAgICAgIHN1YnRpdGxlRGl2LnRleHRDb250ZW50ID0gYCR7bmFtZXMubGVuZ3RofVx1NEY0RFx1NEU1OFx1NjczQVx1NEVCQWAgLy8gSGlkZSBkZXRhaWxlZCBjb3VudCBicmVha2Rvd25cbiAgICAgICAgfSBcbiAgICAgICAgLy8gTW9kZSAyOiBDb3VudCBNb2RlIC0gc2hvdyBjb3VudCBicmVha2Rvd24sIG5vIG5hbWVzXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaGFzU2VsZWN0aW9uICYmIHRvdGFsID4gMCkge1xuICAgICAgICAgIG1haW5EaXYudGV4dENvbnRlbnQgPSBgJHt0aGlzLmNvbmZpcm1lZEFkdWx0c31cdTYyMTBcdTRFQkEgJHt0aGlzLmNvbmZpcm1lZENoaWxkcmVufVx1NTEzRlx1N0FFNSAke3RoaXMuY29uZmlybWVkSW5mYW50c31cdTVBNzRcdTUxM0ZgXG4gICAgICAgICAgc3VidGl0bGVEaXYudGV4dENvbnRlbnQgPSBgXHU1MTcxJHt0b3RhbH1cdTRGNERcdTRFNThcdTY3M0FcdTRFQkFgXG4gICAgICAgIH1cbiAgICAgICAgLy8gRGVmYXVsdDogTm8gc2VsZWN0aW9uXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIG1haW5EaXYudGV4dENvbnRlbnQgPSAnXHU5MDA5XHU2MkU5XHU0RTU4XHU2NzNBXHU0RUJBJ1xuICAgICAgICAgIHN1YnRpdGxlRGl2LnRleHRDb250ZW50ID0gJ1x1NUZFQlx1OTAxRlx1NjI3RVx1NTIzMFx1NEY0RVx1NEVGN1x1Nzk2OCdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgdGhpcy51cGRhdGVNb2RhbFRpdGxlKClcbiAgfVxuXG4gIHByaXZhdGUgc2F2ZVRvTG9jYWxTdG9yYWdlKCk6IHZvaWQge1xuICAgIGNvbnN0IHN0YXRlID0ge1xuICAgICAgYWR1bHRzOiB0aGlzLmNvbmZpcm1lZEFkdWx0cyxcbiAgICAgIGNoaWxkcmVuOiB0aGlzLmNvbmZpcm1lZENoaWxkcmVuLFxuICAgICAgaW5mYW50czogdGhpcy5jb25maXJtZWRJbmZhbnRzLFxuICAgICAgcGFzc2VuZ2VySWRzOiBBcnJheS5mcm9tKHRoaXMuY29uZmlybWVkUGFzc2VuZ2VySWRzKSxcbiAgICAgIHBhc3Nlbmdlck5hbWVzOiBBcnJheS5mcm9tKHRoaXMuY29uZmlybWVkUGFzc2VuZ2VyTmFtZXMuZW50cmllcygpKSxcbiAgICAgIGhhc1NlbGVjdGlvbjogdGhpcy5oYXNTZWxlY3Rpb25cbiAgICB9XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Bhc3Nlbmdlcl9zZWxlY3Rpb24nLCBKU09OLnN0cmluZ2lmeShzdGF0ZSkpXG4gIH1cblxuICBwcml2YXRlIGxvYWRGcm9tTG9jYWxTdG9yYWdlKCk6IHZvaWQge1xuICAgIGNvbnN0IHNhdmVkU3RhdGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncGFzc2VuZ2VyX3NlbGVjdGlvbicpXG4gICAgaWYgKHNhdmVkU3RhdGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gSlNPTi5wYXJzZShzYXZlZFN0YXRlKVxuICAgICAgICB0aGlzLmFkdWx0cyA9IHN0YXRlLmFkdWx0cyB8fCAwXG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBzdGF0ZS5jaGlsZHJlbiB8fCAwXG4gICAgICAgIHRoaXMuaW5mYW50cyA9IHN0YXRlLmluZmFudHMgfHwgMFxuICAgICAgICB0aGlzLmNvbmZpcm1lZEFkdWx0cyA9IHN0YXRlLmFkdWx0cyB8fCAwXG4gICAgICAgIHRoaXMuY29uZmlybWVkQ2hpbGRyZW4gPSBzdGF0ZS5jaGlsZHJlbiB8fCAwXG4gICAgICAgIHRoaXMuY29uZmlybWVkSW5mYW50cyA9IHN0YXRlLmluZmFudHMgfHwgMFxuICAgICAgICB0aGlzLnNlbGVjdGVkUGFzc2VuZ2VySWRzID0gbmV3IFNldChzdGF0ZS5wYXNzZW5nZXJJZHMgfHwgW10pXG4gICAgICAgIHRoaXMuY29uZmlybWVkUGFzc2VuZ2VySWRzID0gbmV3IFNldChzdGF0ZS5wYXNzZW5nZXJJZHMgfHwgW10pXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJOYW1lcyA9IG5ldyBNYXAoc3RhdGUucGFzc2VuZ2VyTmFtZXMgfHwgW10pXG4gICAgICAgIHRoaXMuY29uZmlybWVkUGFzc2VuZ2VyTmFtZXMgPSBuZXcgTWFwKHN0YXRlLnBhc3Nlbmdlck5hbWVzIHx8IFtdKVxuICAgICAgICB0aGlzLmhhc1NlbGVjdGlvbiA9IHN0YXRlLmhhc1NlbGVjdGlvbiB8fCBmYWxzZVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBwYXNzZW5nZXIgc2VsZWN0aW9uIGZyb20gbG9jYWxTdG9yYWdlOicsIGUpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJidXR0b25cIiwgXCJoaWRkZW5JbnB1dFwiXVxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIHNlbGVjdGVkOiBTdHJpbmdcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgYnV0dG9uVGFyZ2V0czogSFRNTEJ1dHRvbkVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IGhpZGRlbklucHV0VGFyZ2V0czogSFRNTElucHV0RWxlbWVudFtdXG4gIGRlY2xhcmUgc2VsZWN0ZWRWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkNhYmluU2VsZWN0b3IgY29ubmVjdGVkXCIpXG4gICAgLy8gQ2hlY2sgaWYgdGhlcmUncyBhIHByZXZpb3VzbHkgc2VsZWN0ZWQgdmFsdWUgZnJvbSBmb3JtXG4gICAgLy8gVXNlIHRoZSBmaXJzdCBoaWRkZW5JbnB1dCB0byBnZXQgdGhlIHZhbHVlICh0aGV5IHNob3VsZCBhbGwgaGF2ZSB0aGUgc2FtZSB2YWx1ZSlcbiAgICBjb25zdCBjdXJyZW50VmFsdWUgPSB0aGlzLmhpZGRlbklucHV0VGFyZ2V0c1swXT8udmFsdWVcbiAgICAvLyBIYW5kbGUgYm90aCBlbXB0eSBzdHJpbmcgYW5kIHVuZGVmaW5lZCAtIGRlZmF1bHQgdG8gJ2FsbCdcbiAgICBjb25zdCBjYWJpblZhbHVlID0gY3VycmVudFZhbHVlICYmIGN1cnJlbnRWYWx1ZSAhPT0gJycgPyBjdXJyZW50VmFsdWUgOiAnYWxsJ1xuICAgIHRoaXMuc2VsZWN0Q2FiaW4oY2FiaW5WYWx1ZSlcbiAgfVxuXG4gIHNlbGVjdENhYmluKGNhYmluVHlwZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5zZWxlY3RlZFZhbHVlID0gY2FiaW5UeXBlXG4gICAgXG4gICAgLy8gVXBkYXRlIEFMTCBoaWRkZW4gaW5wdXQgdmFsdWVzIGZvciBmb3JtIHN1Ym1pc3Npb24gKGJvdGggc2luZ2xlL3JvdW5kLXRyaXAgYW5kIG11bHRpLWNpdHkgZm9ybXMpXG4gICAgdGhpcy5oaWRkZW5JbnB1dFRhcmdldHMuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICBpbnB1dC52YWx1ZSA9IGNhYmluVHlwZVxuICAgIH0pXG4gICAgXG4gICAgLy8gVXBkYXRlIGJ1dHRvbiBzdHlsZXNcbiAgICB0aGlzLmJ1dHRvblRhcmdldHMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgY29uc3QgYnV0dG9uVHlwZSA9IGJ1dHRvbi5kYXRhc2V0LmNhYmluVHlwZVxuICAgICAgXG4gICAgICBpZiAoYnV0dG9uVHlwZSA9PT0gY2FiaW5UeXBlKSB7XG4gICAgICAgIC8vIFNlbGVjdGVkIHN0YXRlIC0gd2hpdGUgYmFja2dyb3VuZCB3aXRoIHN1YnRsZSBzaGFkb3dcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJiZy13aGl0ZVwiLCBcInNoYWRvdy1zbVwiLCBcInRleHQtZ3JheS05MDBcIilcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJ0ZXh0LWdyYXktNjAwXCIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBVbnNlbGVjdGVkIHN0YXRlIC0gdHJhbnNwYXJlbnQgYmFja2dyb3VuZFxuICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImJnLXdoaXRlXCIsIFwic2hhZG93LXNtXCIsIFwidGV4dC1ncmF5LTkwMFwiKVxuICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZChcInRleHQtZ3JheS02MDBcIilcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgc2VsZWN0KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBjb25zdCBjYWJpblR5cGUgPSBidXR0b24uZGF0YXNldC5jYWJpblR5cGVcbiAgICBcbiAgICBpZiAoY2FiaW5UeXBlKSB7XG4gICAgICAvLyBJZiBhbHJlYWR5IHNlbGVjdGVkLCBkbyBub3RoaW5nIChtdXN0IGtlZXAgb25lIHNlbGVjdGVkKVxuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRWYWx1ZSA9PT0gY2FiaW5UeXBlKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgdGhpcy5zZWxlY3RDYWJpbihjYWJpblR5cGUpXG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJ0YWJcIiwgXG4gICAgXCJyZXR1cm5EYXRlU2VjdGlvblwiLCBcbiAgICBcInRyaXBUeXBlSW5wdXRcIiwgXG4gICAgXCJyZXR1cm5EYXRlSW5wdXRcIixcbiAgICBcIm9uZVdheVJvdW5kVHJpcEZvcm1cIixcbiAgICBcIm11bHRpQ2l0eUZvcm1cIixcbiAgICBcInByb21vdGlvbkJhbm5lclwiXG4gIF1cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBjdXJyZW50VHlwZTogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IFwib25lX3dheVwiIH1cbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgdGFiVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IHJldHVybkRhdGVTZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRyaXBUeXBlSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSByZXR1cm5EYXRlSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBvbmVXYXlSb3VuZFRyaXBGb3JtVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IG11bHRpQ2l0eUZvcm1UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgcHJvbW90aW9uQmFubmVyVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1RyaXBUeXBlSW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNSZXR1cm5EYXRlU2VjdGlvblRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1JldHVybkRhdGVJbnB1dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc09uZVdheVJvdW5kVHJpcEZvcm1UYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNNdWx0aUNpdHlGb3JtVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUHJvbW90aW9uQmFubmVyVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgY3VycmVudFR5cGVWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlRyaXBUeXBlIGNvbm5lY3RlZFwiKVxuICAgIHRoaXMudXBkYXRlVUkoKVxuICB9XG5cbiAgLy8gXHU1MjA3XHU2MzYyXHU4ODRDXHU3QTBCXHU3QzdCXHU1NzhCXG4gIHNlbGVjdFR5cGUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHRyaXBUeXBlID0gYnV0dG9uLmRhdGFzZXQudHJpcFR5cGUgfHwgJ29uZV93YXknXG4gICAgXG4gICAgdGhpcy5jdXJyZW50VHlwZVZhbHVlID0gdHJpcFR5cGVcbiAgICB0aGlzLnVwZGF0ZVVJKClcbiAgICBcbiAgICAvLyBcdTU5ODJcdTY3OUNcdTUyMDdcdTYzNjJcdTUyMzBcdTVGODBcdThGRDRcdTRFMTRcdThGRDRcdTdBMEJcdTY1RTVcdTY3MUZcdTRFM0FcdTdBN0FcdUZGMENcdThCQkVcdTdGNkVcdTlFRDhcdThCQTRcdThGRDRcdTdBMEJcdTY1RTVcdTY3MUZcdTRFM0FcdTUzQkJcdTdBMEIrMVx1NTkyOVxuICAgIGlmICh0cmlwVHlwZSA9PT0gJ3JvdW5kX3RyaXAnICYmIHRoaXMuaGFzUmV0dXJuRGF0ZUlucHV0VGFyZ2V0KSB7XG4gICAgICBpZiAoIXRoaXMucmV0dXJuRGF0ZUlucHV0VGFyZ2V0LnZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGRlcGFydHVyZURhdGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWRhdGUtcGlja2VyLXRhcmdldD1cImRhdGVJbnB1dFwiXScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICAgICAgaWYgKGRlcGFydHVyZURhdGVJbnB1dCAmJiBkZXBhcnR1cmVEYXRlSW5wdXQudmFsdWUpIHtcbiAgICAgICAgICBjb25zdCBkZXBhcnR1cmVEYXRlID0gbmV3IERhdGUoZGVwYXJ0dXJlRGF0ZUlucHV0LnZhbHVlKVxuICAgICAgICAgIGRlcGFydHVyZURhdGUuc2V0RGF0ZShkZXBhcnR1cmVEYXRlLmdldERhdGUoKSArIDEpXG4gICAgICAgICAgY29uc3QgcmV0dXJuRGF0ZVN0ciA9IHRoaXMuZm9ybWF0RGF0ZShkZXBhcnR1cmVEYXRlKVxuICAgICAgICAgIHRoaXMucmV0dXJuRGF0ZUlucHV0VGFyZ2V0LnZhbHVlID0gcmV0dXJuRGF0ZVN0clxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFx1ODlFNlx1NTNEMVx1OEZENFx1N0EwQlx1NjVFNVx1NjcxRlx1OTAwOVx1NjJFOVx1NTY2OFx1NjZGNFx1NjVCMFx1NjYzRVx1NzkzQVxuICAgICAgICAgIGNvbnN0IHJldHVybkRhdGVDb250cm9sbGVyID0gdGhpcy5hcHBsaWNhdGlvbi5nZXRDb250cm9sbGVyRm9yRWxlbWVudEFuZElkZW50aWZpZXIoXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQsXG4gICAgICAgICAgICAncmV0dXJuLWRhdGUtcGlja2VyJ1xuICAgICAgICAgIClcbiAgICAgICAgICBpZiAocmV0dXJuRGF0ZUNvbnRyb2xsZXIgJiYgJ2N1cnJlbnREYXRlVmFsdWUnIGluIHJldHVybkRhdGVDb250cm9sbGVyKSB7XG4gICAgICAgICAgICAocmV0dXJuRGF0ZUNvbnRyb2xsZXIgYXMgYW55KS5jdXJyZW50RGF0ZVZhbHVlID0gcmV0dXJuRGF0ZVN0clxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1NjZGNFx1NjVCMFVJXHU3MkI2XHU2MDAxXG4gIHByaXZhdGUgdXBkYXRlVUkoKTogdm9pZCB7XG4gICAgLy8gXHU2NkY0XHU2NUIwXHU2MzA5XHU5NEFFXHU3MkI2XHU2MDAxXG4gICAgdGhpcy50YWJUYXJnZXRzLmZvckVhY2godGFiID0+IHtcbiAgICAgIGNvbnN0IGlzQWN0aXZlID0gdGFiLmRhdGFzZXQudHJpcFR5cGUgPT09IHRoaXMuY3VycmVudFR5cGVWYWx1ZVxuICAgICAgXG4gICAgICBpZiAoaXNBY3RpdmUpIHtcbiAgICAgICAgdGFiLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS01MDAnKVxuICAgICAgICB0YWIuY2xhc3NMaXN0LmFkZCgnZm9udC1ib2xkJywgJ2JvcmRlci1iLTInLCAnYm9yZGVyLWJsYWNrJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhYi5jbGFzc0xpc3QucmVtb3ZlKCdmb250LWJvbGQnLCAnYm9yZGVyLWItMicsICdib3JkZXItYmxhY2snKVxuICAgICAgICB0YWIuY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTUwMCcpXG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIFx1NjZGNFx1NjVCMFx1OTY5MFx1ODVDRlx1ODg2OFx1NTM1NVx1NUI1N1x1NkJCNVxuICAgIGlmICh0aGlzLmhhc1RyaXBUeXBlSW5wdXRUYXJnZXQpIHtcbiAgICAgIHRoaXMudHJpcFR5cGVJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMuY3VycmVudFR5cGVWYWx1ZVxuICAgIH1cblxuICAgIC8vIFx1NUM1NVx1NzkzQS9cdTk2OTBcdTg1Q0ZcdThGRDRcdTdBMEJcdTY1RTVcdTY3MUZcdTkwMDlcdTYyRTlcbiAgICBpZiAodGhpcy5oYXNSZXR1cm5EYXRlU2VjdGlvblRhcmdldCkge1xuICAgICAgaWYgKHRoaXMuY3VycmVudFR5cGVWYWx1ZSA9PT0gJ3JvdW5kX3RyaXAnKSB7XG4gICAgICAgIHRoaXMucmV0dXJuRGF0ZVNlY3Rpb25UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmV0dXJuRGF0ZVNlY3Rpb25UYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdTVDNTVcdTc5M0EvXHU5NjkwXHU4NUNGXHU1MzU1XHU3QTBCXHU1RjgwXHU4RkQ0XHU4ODY4XHU1MzU1IHZzIFx1NTkxQVx1N0EwQlx1ODg2OFx1NTM1NVxuICAgIGlmICh0aGlzLmhhc09uZVdheVJvdW5kVHJpcEZvcm1UYXJnZXQgJiYgdGhpcy5oYXNNdWx0aUNpdHlGb3JtVGFyZ2V0KSB7XG4gICAgICBpZiAodGhpcy5jdXJyZW50VHlwZVZhbHVlID09PSAnbXVsdGlfY2l0eScpIHtcbiAgICAgICAgdGhpcy5vbmVXYXlSb3VuZFRyaXBGb3JtVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICAgIHRoaXMubXVsdGlDaXR5Rm9ybVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgICBcbiAgICAgICAgLy8gXHU4OUU2XHU1M0QxXHU4MUVBXHU1QjlBXHU0RTQ5XHU0RThCXHU0RUY2XHU5MDFBXHU3N0U1IG11bHRpLWNpdHkgXHU2M0E3XHU1MjM2XHU1NjY4XHU1MjFEXHU1OUNCXHU1MzE2XG4gICAgICAgIGNvbnN0IG11bHRpQ2l0eUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCd0cmlwLXR5cGU6bXVsdGktY2l0eS1zaG93bicsIHtcbiAgICAgICAgICBidWJibGVzOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuZWxlbWVudC5kaXNwYXRjaEV2ZW50KG11bHRpQ2l0eUV2ZW50KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vbmVXYXlSb3VuZFRyaXBGb3JtVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICAgIHRoaXMubXVsdGlDaXR5Rm9ybVRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1NTkxQVx1N0EwQlx1NkEyMVx1NUYwRlx1NEUwQlx1OTY5MFx1ODVDRlx1NEZDM1x1OTUwMFx1NkEyQVx1NUU0NVxuICAgIGlmICh0aGlzLmhhc1Byb21vdGlvbkJhbm5lclRhcmdldCkge1xuICAgICAgaWYgKHRoaXMuY3VycmVudFR5cGVWYWx1ZSA9PT0gJ211bHRpX2NpdHknKSB7XG4gICAgICAgIHRoaXMucHJvbW90aW9uQmFubmVyVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnByb21vdGlvbkJhbm5lclRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0RGF0ZShkYXRlOiBEYXRlKTogc3RyaW5nIHtcbiAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpXG4gICAgY29uc3QgbW9udGggPSBTdHJpbmcoZGF0ZS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKVxuICAgIGNvbnN0IGRheSA9IFN0cmluZyhkYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKVxuICAgIHJldHVybiBgJHt5ZWFyfS0ke21vbnRofS0ke2RheX1gXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcIm1vZGFsXCIsIFwic2VsZWN0ZWREYXRlXCIsIFwiZGF0ZUlucHV0XCJdXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgY3VycmVudERhdGU6IFN0cmluZyxcbiAgICBtaW5EYXRlOiBTdHJpbmdcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VsZWN0ZWREYXRlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRhdGVJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIGN1cnJlbnREYXRlVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIG1pbkRhdGVWYWx1ZTogc3RyaW5nXG5cbiAgcHJpdmF0ZSBzZWxlY3RlZERhdGVPYmo6IERhdGUgfCBudWxsID0gbnVsbFxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJSZXR1cm5EYXRlUGlja2VyIGNvbm5lY3RlZFwiKVxuICAgIC8vIEluaXRpYWxpemUgd2l0aCBkZXBhcnR1cmUgZGF0ZSArIDEgaWYgbm8gcmV0dXJuIGRhdGUgaXMgc2V0XG4gICAgaWYgKHRoaXMuY3VycmVudERhdGVWYWx1ZSkge1xuICAgICAgdGhpcy5zZWxlY3RlZERhdGVPYmogPSBuZXcgRGF0ZSh0aGlzLmN1cnJlbnREYXRlVmFsdWUpXG4gICAgfSBlbHNlIGlmICh0aGlzLm1pbkRhdGVWYWx1ZSkge1xuICAgICAgY29uc3QgbWluRGF0ZSA9IG5ldyBEYXRlKHRoaXMubWluRGF0ZVZhbHVlKVxuICAgICAgbWluRGF0ZS5zZXREYXRlKG1pbkRhdGUuZ2V0RGF0ZSgpICsgMSlcbiAgICAgIHRoaXMuc2VsZWN0ZWREYXRlT2JqID0gbWluRGF0ZVxuICAgICAgdGhpcy5jdXJyZW50RGF0ZVZhbHVlID0gdGhpcy5mb3JtYXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlT2JqKVxuICAgIH1cbiAgICBpZiAodGhpcy5zZWxlY3RlZERhdGVPYmopIHtcbiAgICAgIHRoaXMudXBkYXRlRGlzcGxheWVkRGF0ZSgpXG4gICAgfVxuICB9XG5cbiAgb3Blbk1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbidcbiAgfVxuXG4gIGNsb3NlTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJ1xuICB9XG5cbiAgc2VsZWN0RGF0ZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgZGF0ZVN0ciA9IGJ1dHRvbi5kYXRhc2V0LmRhdGUgfHwgJydcbiAgICBcbiAgICBpZiAoIWRhdGVTdHIpIHJldHVyblxuXG4gICAgdGhpcy5zZWxlY3RlZERhdGVPYmogPSBuZXcgRGF0ZShkYXRlU3RyKVxuICAgIHRoaXMuY3VycmVudERhdGVWYWx1ZSA9IGRhdGVTdHJcbiAgICB0aGlzLnVwZGF0ZURpc3BsYXllZERhdGUoKVxuICAgIHRoaXMuZGF0ZUlucHV0VGFyZ2V0LnZhbHVlID0gZGF0ZVN0clxuICAgIHRoaXMuY2xvc2VNb2RhbCgpXG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZURpc3BsYXllZERhdGUoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnNlbGVjdGVkRGF0ZU9iaikgcmV0dXJuXG4gICAgXG4gICAgY29uc3QgbW9udGggPSB0aGlzLnNlbGVjdGVkRGF0ZU9iai5nZXRNb250aCgpICsgMVxuICAgIGNvbnN0IGRheSA9IHRoaXMuc2VsZWN0ZWREYXRlT2JqLmdldERhdGUoKVxuICAgIGNvbnN0IGRheU5hbWUgPSB0aGlzLmdldERheU5hbWUodGhpcy5zZWxlY3RlZERhdGVPYmopXG4gICAgXG4gICAgdGhpcy5zZWxlY3RlZERhdGVUYXJnZXQuaW5uZXJIVE1MID0gYFxuICAgICAgJHttb250aH08c3BhbiBjbGFzcz1cInRleHQtbGcgZm9udC1tZWRpdW0gbXgtMC41XCI+XHU2NzA4PC9zcGFuPiR7ZGF5fTxzcGFuIGNsYXNzPVwidGV4dC1sZyBmb250LW1lZGl1bSBtbC0wLjUgbXItMlwiPlx1NjVFNTwvc3Bhbj5cbiAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1iYXNlIHRleHQtZ3JheS01MDAgZm9udC1tZWRpdW1cIj4ke2RheU5hbWV9PC9zcGFuPlxuICAgIGBcbiAgfVxuXG4gIHByaXZhdGUgZ2V0RGF5TmFtZShkYXRlOiBEYXRlKTogc3RyaW5nIHtcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKClcbiAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICAgIGNvbnN0IHRhcmdldERhdGUgPSBuZXcgRGF0ZShkYXRlKVxuICAgIHRhcmdldERhdGUuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICBcbiAgICBjb25zdCBkaWZmVGltZSA9IHRhcmdldERhdGUuZ2V0VGltZSgpIC0gdG9kYXkuZ2V0VGltZSgpXG4gICAgY29uc3QgZGlmZkRheXMgPSBNYXRoLnJvdW5kKGRpZmZUaW1lIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKVxuICAgIFxuICAgIGlmIChkaWZmRGF5cyA9PT0gMCkgcmV0dXJuICdcdTRFQ0FcdTU5MjknXG4gICAgaWYgKGRpZmZEYXlzID09PSAxKSByZXR1cm4gJ1x1NjYwRVx1NTkyOSdcbiAgICBpZiAoZGlmZkRheXMgPT09IDIpIHJldHVybiAnXHU1NDBFXHU1OTI5J1xuICAgIFxuICAgIGNvbnN0IHdlZWtkYXlzID0gWydcdTU0NjhcdTY1RTUnLCAnXHU1NDY4XHU0RTAwJywgJ1x1NTQ2OFx1NEU4QycsICdcdTU0NjhcdTRFMDknLCAnXHU1NDY4XHU1NkRCJywgJ1x1NTQ2OFx1NEU5NCcsICdcdTU0NjhcdTUxNkQnXVxuICAgIHJldHVybiB3ZWVrZGF5c1tkYXRlLmdldERheSgpXVxuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXREYXRlKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKClcbiAgICBjb25zdCBtb250aCA9IFN0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpXG4gICAgY29uc3QgZGF5ID0gU3RyaW5nKGRhdGUuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpXG4gICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fWBcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyIHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJvdXRib3VuZEZsaWdodFwiLCBcInJldHVybkZsaWdodFwiLCBcInN1Ym1pdEJ1dHRvblwiLCBcInNlbGVjdGVkT3V0Ym91bmRJZFwiLCBcInNlbGVjdGVkUmV0dXJuSWRcIiwgXCJ0b3RhbFByaWNlXCJdXG5cbiAgc2VsZWN0ZWRPdXRib3VuZElkVmFsdWU6IHN0cmluZyA9IFwiXCJcbiAgc2VsZWN0ZWRSZXR1cm5JZFZhbHVlOiBzdHJpbmcgPSBcIlwiXG4gIG91dGJvdW5kUHJpY2U6IG51bWJlciA9IDBcbiAgcmV0dXJuUHJpY2U6IG51bWJlciA9IDBcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIHRoaXMudXBkYXRlU3VibWl0QnV0dG9uKClcbiAgfVxuXG4gIHNlbGVjdE91dGJvdW5kKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBjYXJkID0gKGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsb3Nlc3QoJ1tkYXRhLWZsaWdodC1pZF0nKSBhcyBIVE1MRWxlbWVudFxuICAgIGlmICghY2FyZCkgcmV0dXJuXG5cbiAgICBjb25zdCBmbGlnaHRJZCA9IGNhcmQuZGF0YXNldC5mbGlnaHRJZCB8fCBcIlwiXG4gICAgY29uc3QgcHJpY2UgPSBwYXJzZUZsb2F0KGNhcmQuZGF0YXNldC5wcmljZSB8fCBcIjBcIilcblxuICAgIC8vIFJlbW92ZSBwcmV2aW91cyBzZWxlY3Rpb25cbiAgICB0aGlzLm91dGJvdW5kRmxpZ2h0VGFyZ2V0cy5mb3JFYWNoKGVsID0+IHtcbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3JpbmctMicsICdyaW5nLWJsdWUtNTAwJywgJ2JnLWJsdWUtNTAnKVxuICAgIH0pXG5cbiAgICAvLyBBZGQgc2VsZWN0aW9uIHRvIGN1cnJlbnRcbiAgICBjYXJkLmNsYXNzTGlzdC5hZGQoJ3JpbmctMicsICdyaW5nLWJsdWUtNTAwJywgJ2JnLWJsdWUtNTAnKVxuXG4gICAgdGhpcy5zZWxlY3RlZE91dGJvdW5kSWRWYWx1ZSA9IGZsaWdodElkXG4gICAgdGhpcy5vdXRib3VuZFByaWNlID0gcHJpY2VcbiAgICBcbiAgICBpZiAodGhpcy5oYXNTZWxlY3RlZE91dGJvdW5kSWRUYXJnZXQpIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRPdXRib3VuZElkVGFyZ2V0LnZhbHVlID0gZmxpZ2h0SWRcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVN1Ym1pdEJ1dHRvbigpXG4gIH1cblxuICBzZWxlY3RSZXR1cm4oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGNhcmQgPSAoZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xvc2VzdCgnW2RhdGEtZmxpZ2h0LWlkXScpIGFzIEhUTUxFbGVtZW50XG4gICAgaWYgKCFjYXJkKSByZXR1cm5cblxuICAgIGNvbnN0IGZsaWdodElkID0gY2FyZC5kYXRhc2V0LmZsaWdodElkIHx8IFwiXCJcbiAgICBjb25zdCBwcmljZSA9IHBhcnNlRmxvYXQoY2FyZC5kYXRhc2V0LnByaWNlIHx8IFwiMFwiKVxuXG4gICAgLy8gUmVtb3ZlIHByZXZpb3VzIHNlbGVjdGlvblxuICAgIHRoaXMucmV0dXJuRmxpZ2h0VGFyZ2V0cy5mb3JFYWNoKGVsID0+IHtcbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3JpbmctMicsICdyaW5nLWJsdWUtNTAwJywgJ2JnLWJsdWUtNTAnKVxuICAgIH0pXG5cbiAgICAvLyBBZGQgc2VsZWN0aW9uIHRvIGN1cnJlbnRcbiAgICBjYXJkLmNsYXNzTGlzdC5hZGQoJ3JpbmctMicsICdyaW5nLWJsdWUtNTAwJywgJ2JnLWJsdWUtNTAnKVxuXG4gICAgdGhpcy5zZWxlY3RlZFJldHVybklkVmFsdWUgPSBmbGlnaHRJZFxuICAgIHRoaXMucmV0dXJuUHJpY2UgPSBwcmljZVxuICAgIFxuICAgIGlmICh0aGlzLmhhc1NlbGVjdGVkUmV0dXJuSWRUYXJnZXQpIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRSZXR1cm5JZFRhcmdldC52YWx1ZSA9IGZsaWdodElkXG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVTdWJtaXRCdXR0b24oKVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVTdWJtaXRCdXR0b24oKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc1N1Ym1pdEJ1dHRvblRhcmdldCkgcmV0dXJuXG5cbiAgICBjb25zdCBib3RoU2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkT3V0Ym91bmRJZFZhbHVlICYmIHRoaXMuc2VsZWN0ZWRSZXR1cm5JZFZhbHVlXG5cbiAgICBpZiAoYm90aFNlbGVjdGVkKSB7XG4gICAgICB0aGlzLnN1Ym1pdEJ1dHRvblRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdvcGFjaXR5LTUwJywgJ2N1cnNvci1ub3QtYWxsb3dlZCcpXG4gICAgICB0aGlzLnN1Ym1pdEJ1dHRvblRhcmdldC5jbGFzc0xpc3QuYWRkKCdjdXJzb3ItcG9pbnRlcicpXG4gICAgICB0aGlzLnN1Ym1pdEJ1dHRvblRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJylcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIHRvdGFsIHByaWNlIGRpc3BsYXlcbiAgICAgIGlmICh0aGlzLmhhc1RvdGFsUHJpY2VUYXJnZXQpIHtcbiAgICAgICAgY29uc3QgdG90YWwgPSB0aGlzLm91dGJvdW5kUHJpY2UgKyB0aGlzLnJldHVyblByaWNlXG4gICAgICAgIHRoaXMudG90YWxQcmljZVRhcmdldC50ZXh0Q29udGVudCA9IGBcdTAwQTUke3RvdGFsLnRvRml4ZWQoMCl9YFxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN1Ym1pdEJ1dHRvblRhcmdldC5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LTUwJywgJ2N1cnNvci1ub3QtYWxsb3dlZCcpXG4gICAgICB0aGlzLnN1Ym1pdEJ1dHRvblRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdjdXJzb3ItcG9pbnRlcicpXG4gICAgICB0aGlzLnN1Ym1pdEJ1dHRvblRhcmdldC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJylcbiAgICAgIFxuICAgICAgaWYgKHRoaXMuaGFzVG90YWxQcmljZVRhcmdldCkge1xuICAgICAgICB0aGlzLnRvdGFsUHJpY2VUYXJnZXQudGV4dENvbnRlbnQgPSAnXHU4QkY3XHU5MDA5XHU2MkU5XHU1M0JCXHU3QTBCXHU1NDhDXHU4RkQ0XHU3QTBCXHU4MjJBXHU3M0VEJ1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN1Ym1pdChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuc2VsZWN0ZWRPdXRib3VuZElkVmFsdWUgfHwgIXRoaXMuc2VsZWN0ZWRSZXR1cm5JZFZhbHVlKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBhbGVydCgnXHU4QkY3XHU5MDA5XHU2MkU5XHU1M0JCXHU3QTBCXHU1NDhDXHU4RkQ0XHU3QTBCXHU4MjJBXHU3M0VEJylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIEZvcm0gd2lsbCBzdWJtaXQgbmF0dXJhbGx5IHdpdGggaGlkZGVuIGlucHV0c1xuICB9XG5cbiAgZGVjbGFyZSBvdXRib3VuZEZsaWdodFRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZXR1cm5GbGlnaHRUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgc3VibWl0QnV0dG9uVGFyZ2V0OiBIVE1MQnV0dG9uRWxlbWVudFxuICBkZWNsYXJlIHNlbGVjdGVkT3V0Ym91bmRJZFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHNlbGVjdGVkUmV0dXJuSWRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSB0b3RhbFByaWNlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIGhhc1N1Ym1pdEJ1dHRvblRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIGhhc1NlbGVjdGVkT3V0Ym91bmRJZFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIGhhc1NlbGVjdGVkUmV0dXJuSWRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSBoYXNUb3RhbFByaWNlVGFyZ2V0OiBib29sZWFuXG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJkZXBhcnR1cmVDaXR5XCIsXG4gICAgXCJhcnJpdmFsQ2l0eVwiLFxuICAgIFwiZGVwYXJ0dXJlQ2l0eUlucHV0XCIsXG4gICAgXCJhcnJpdmFsQ2l0eUlucHV0XCIsXG4gICAgXCJzZWxlY3RlZERhdGVcIixcbiAgICBcImRhdGVJbnB1dFwiLFxuICAgIFwic3R1ZGVudFRpY2tldFwiLFxuICAgIFwiaGlnaFNwZWVkT25seVwiXG4gIF1cblxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIGRlcGFydHVyZUNpdHk6IFN0cmluZyxcbiAgICBhcnJpdmFsQ2l0eTogU3RyaW5nLFxuICAgIGRhdGU6IFN0cmluZ1xuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBkZXBhcnR1cmVDaXR5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGFycml2YWxDaXR5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRlcGFydHVyZUNpdHlJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGFycml2YWxDaXR5SW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzZWxlY3RlZERhdGVUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGF0ZUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc3R1ZGVudFRpY2tldFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhpZ2hTcGVlZE9ubHlUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSBkZXBhcnR1cmVDaXR5VmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIGFycml2YWxDaXR5VmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIGRhdGVWYWx1ZTogc3RyaW5nXG5cbiAgcHJpdmF0ZSBzZWxlY3RlZERhdGVPYmo6IERhdGUgPSBuZXcgRGF0ZSgpXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlRyYWluU2VhcmNoIGNvbm5lY3RlZFwiKVxuICAgIC8vIEluaXRpYWxpemUgZGVmYXVsdCB2YWx1ZXNcbiAgICBpZiAoIXRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlKSB0aGlzLmRlcGFydHVyZUNpdHlWYWx1ZSA9IFwiXHU1MzE3XHU0RUFDXHU1RTAyXCJcbiAgICBpZiAoIXRoaXMuYXJyaXZhbENpdHlWYWx1ZSkgdGhpcy5hcnJpdmFsQ2l0eVZhbHVlID0gXCJcdTY3NkRcdTVEREVcdTVFMDJcIlxuICAgIGlmICghdGhpcy5kYXRlVmFsdWUpIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWREYXRlT2JqID0gbmV3IERhdGUoKVxuICAgICAgLy8gU2V0IHRvIHRvbW9ycm93IGJ5IGRlZmF1bHRcbiAgICAgIHRoaXMuc2VsZWN0ZWREYXRlT2JqLnNldERhdGUodGhpcy5zZWxlY3RlZERhdGVPYmouZ2V0RGF0ZSgpICsgMSlcbiAgICAgIHRoaXMuZGF0ZVZhbHVlID0gdGhpcy5mb3JtYXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlT2JqKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlbGVjdGVkRGF0ZU9iaiA9IG5ldyBEYXRlKHRoaXMuZGF0ZVZhbHVlKVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBpbml0aWFsIGRpc3BsYXlcbiAgICB0aGlzLnVwZGF0ZUNpdHlEaXNwbGF5KClcbiAgICB0aGlzLnVwZGF0ZURhdGVEaXNwbGF5KClcbiAgfVxuXG4gIC8vIFN3aXRjaCBjaXRpZXNcbiAgc3dpdGNoQ2l0aWVzKCk6IHZvaWQge1xuICAgIGNvbnN0IHRlbXAgPSB0aGlzLmRlcGFydHVyZUNpdHlWYWx1ZVxuICAgIHRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlID0gdGhpcy5hcnJpdmFsQ2l0eVZhbHVlXG4gICAgdGhpcy5hcnJpdmFsQ2l0eVZhbHVlID0gdGVtcFxuICAgIFxuICAgIHRoaXMudXBkYXRlQ2l0eURpc3BsYXkoKVxuICB9XG5cbiAgLy8gVXBkYXRlIGNpdHkgZGlzcGxheVxuICBwcml2YXRlIHVwZGF0ZUNpdHlEaXNwbGF5KCk6IHZvaWQge1xuICAgIHRoaXMuZGVwYXJ0dXJlQ2l0eVRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlXG4gICAgdGhpcy5hcnJpdmFsQ2l0eVRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMuYXJyaXZhbENpdHlWYWx1ZVxuICAgIHRoaXMuZGVwYXJ0dXJlQ2l0eUlucHV0VGFyZ2V0LnZhbHVlID0gdGhpcy5kZXBhcnR1cmVDaXR5VmFsdWVcbiAgICB0aGlzLmFycml2YWxDaXR5SW5wdXRUYXJnZXQudmFsdWUgPSB0aGlzLmFycml2YWxDaXR5VmFsdWVcbiAgfVxuXG4gIC8vIFVwZGF0ZSBkYXRlIGRpc3BsYXlcbiAgcHJpdmF0ZSB1cGRhdGVEYXRlRGlzcGxheSgpOiB2b2lkIHtcbiAgICBjb25zdCBtb250aCA9IHRoaXMuc2VsZWN0ZWREYXRlT2JqLmdldE1vbnRoKCkgKyAxXG4gICAgY29uc3QgZGF5ID0gdGhpcy5zZWxlY3RlZERhdGVPYmouZ2V0RGF0ZSgpXG4gICAgY29uc3QgZGF5TmFtZSA9IHRoaXMuZ2V0RGF5TmFtZSh0aGlzLnNlbGVjdGVkRGF0ZU9iailcbiAgICBcbiAgICB0aGlzLnNlbGVjdGVkRGF0ZVRhcmdldC5pbm5lckhUTUwgPSBgXG4gICAgICAke21vbnRofTxzcGFuIGNsYXNzPVwidGV4dC1zbVwiPlx1NjcwODwvc3Bhbj4ke2RheX08c3BhbiBjbGFzcz1cInRleHQtc21cIj5cdTY1RTU8L3NwYW4+IDxzcGFuIGNsYXNzPVwidGV4dC1zbVwiPiR7ZGF5TmFtZX08L3NwYW4+XG4gICAgYFxuICAgIHRoaXMuZGF0ZUlucHV0VGFyZ2V0LnZhbHVlID0gdGhpcy5kYXRlVmFsdWVcbiAgfVxuXG4gIC8vIEdldCBkYXkgbmFtZSBpbiBDaGluZXNlXG4gIHByaXZhdGUgZ2V0RGF5TmFtZShkYXRlOiBEYXRlKTogc3RyaW5nIHtcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKClcbiAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICAgIGNvbnN0IHRhcmdldERhdGUgPSBuZXcgRGF0ZShkYXRlKVxuICAgIHRhcmdldERhdGUuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICBcbiAgICBjb25zdCBkaWZmVGltZSA9IHRhcmdldERhdGUuZ2V0VGltZSgpIC0gdG9kYXkuZ2V0VGltZSgpXG4gICAgY29uc3QgZGlmZkRheXMgPSBNYXRoLnJvdW5kKGRpZmZUaW1lIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKVxuICAgIFxuICAgIGlmIChkaWZmRGF5cyA9PT0gMCkgcmV0dXJuICdcdTRFQ0FcdTU5MjknXG4gICAgaWYgKGRpZmZEYXlzID09PSAxKSByZXR1cm4gJ1x1NjYwRVx1NTkyOSdcbiAgICBpZiAoZGlmZkRheXMgPT09IDIpIHJldHVybiAnXHU1NDBFXHU1OTI5J1xuICAgIFxuICAgIGNvbnN0IHdlZWtkYXlzID0gWydcdTU0NjhcdTY1RTUnLCAnXHU1NDY4XHU0RTAwJywgJ1x1NTQ2OFx1NEU4QycsICdcdTU0NjhcdTRFMDknLCAnXHU1NDY4XHU1NkRCJywgJ1x1NTQ2OFx1NEU5NCcsICdcdTU0NjhcdTUxNkQnXVxuICAgIHJldHVybiB3ZWVrZGF5c1tkYXRlLmdldERheSgpXVxuICB9XG5cbiAgLy8gRm9ybWF0IGRhdGUgYXMgWVlZWS1NTS1ERFxuICBwcml2YXRlIGZvcm1hdERhdGUoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKVxuICAgIGNvbnN0IG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJylcbiAgICBjb25zdCBkYXkgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJylcbiAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YFxuICB9XG5cbiAgLy8gVG9nZ2xlIHN0dWRlbnQgdGlja2V0XG4gIHRvZ2dsZVN0dWRlbnRUaWNrZXQoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJTdHVkZW50IHRpY2tldCB0b2dnbGVkOlwiLCB0aGlzLnN0dWRlbnRUaWNrZXRUYXJnZXQuY2hlY2tlZClcbiAgfVxuXG4gIC8vIFRvZ2dsZSBoaWdoIHNwZWVkIG9ubHlcbiAgdG9nZ2xlSGlnaFNwZWVkT25seSgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkhpZ2ggc3BlZWQgb25seSB0b2dnbGVkOlwiLCB0aGlzLmhpZ2hTcGVlZE9ubHlUYXJnZXQuY2hlY2tlZClcbiAgfVxuXG4gIC8vIEhhbmRsZSBzZWFyY2ggZm9ybSBzdWJtaXNzaW9uIChUdXJibyBoYW5kbGVzIGFjdHVhbCBzdWJtaXNzaW9uKVxuICAvLyBUaGlzIGlzIGp1c3QgZm9yIGFueSBwcmUtc3VibWlzc2lvbiBVSSBmZWVkYmFjayBpZiBuZWVkZWRcbiAgc2VhcmNoKCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiU2VhcmNoaW5nIHRyYWluczpcIiwge1xuICAgICAgZnJvbTogdGhpcy5kZXBhcnR1cmVDaXR5VmFsdWUsXG4gICAgICB0bzogdGhpcy5hcnJpdmFsQ2l0eVZhbHVlLFxuICAgICAgZGF0ZTogdGhpcy5kYXRlVmFsdWVcbiAgICB9KVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJ0cmFpbkl0ZW1cIlxuICBdXG5cbiAgZGVjbGFyZSByZWFkb25seSB0cmFpbkl0ZW1UYXJnZXRzOiBIVE1MRWxlbWVudFtdXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlRyYWluTGlzdCBjb25uZWN0ZWRcIilcbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJUcmFpbkxpc3QgZGlzY29ubmVjdGVkXCIpXG4gIH1cblxuICB0b2dnbGVGaWx0ZXIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdiZy1wcmltYXJ5JylcbiAgICBidXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgndGV4dC1wcmltYXJ5LWZvcmVncm91bmQnKVxuICAgIGJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdiZy1zdXJmYWNlLWVsZXZhdGVkJylcbiAgICBidXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgndGV4dC1mb3JlZ3JvdW5kJylcbiAgfVxuXG4gIHRvZ2dsZVN0YXRpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdiZy1wcmltYXJ5JylcbiAgICBidXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgndGV4dC1wcmltYXJ5LWZvcmVncm91bmQnKVxuICAgIGJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdiZy1zdXJmYWNlLWVsZXZhdGVkJylcbiAgICBidXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgndGV4dC1mb3JlZ3JvdW5kJylcbiAgfVxuXG4gIHNob3dBZHZhbmNlZEZpbHRlcnMoKTogdm9pZCB7XG4gICAgLy8gU2hvdyBhZHZhbmNlZCBmaWx0ZXJzIG1vZGFsIChmdXR1cmUgaW1wbGVtZW50YXRpb24pXG4gICAgY29uc29sZS5sb2coJ1Nob3cgYWR2YW5jZWQgZmlsdGVycycpXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcIm1vZGFsXCIsXG4gICAgXCJkZXBhcnR1cmVcIixcbiAgICBcImRlc3RpbmF0aW9uXCIsXG4gICAgXCJkZXBhcnR1cmVDaXR5SW5wdXRcIixcbiAgICBcImRlc3RpbmF0aW9uQ2l0eUlucHV0XCIsXG4gICAgXCJ0YWJEZXBhcnR1cmVcIixcbiAgICBcInRhYkRlc3RpbmF0aW9uXCIsXG4gICAgXCJzZWFyY2hJbnB1dFwiLFxuICAgIFwiZG9tZXN0aWNMaXN0XCIsXG4gICAgXCJpbnRlcm5hdGlvbmFsTGlzdFwiLFxuICAgIFwiaGlzdG9yeVNlY3Rpb25cIixcbiAgICBcImN1cnJlbnRDaXR5XCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgZGVwYXJ0dXJlQ2l0eTogU3RyaW5nLFxuICAgIGRlc3RpbmF0aW9uQ2l0eTogU3RyaW5nXG4gIH1cblxuICBwcml2YXRlIHNlbGVjdGlvblR5cGU6ICdkZXBhcnR1cmUnIHwgJ2Rlc3RpbmF0aW9uJyA9ICdkZXBhcnR1cmUnXG5cbiAgZGVjbGFyZSByZWFkb25seSBkZXBhcnR1cmVUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVzdGluYXRpb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVwYXJ0dXJlQ2l0eUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVzdGluYXRpb25DaXR5SW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNNb2RhbFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IHRhYkRlcGFydHVyZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0YWJEZXN0aW5hdGlvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzZWFyY2hJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRvbWVzdGljTGlzdFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBpbnRlcm5hdGlvbmFsTGlzdFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoaXN0b3J5U2VjdGlvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjdXJyZW50Q2l0eVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSBkZXBhcnR1cmVDaXR5VmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIGRlc3RpbmF0aW9uQ2l0eVZhbHVlOiBzdHJpbmdcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiVHJhaW5DaXR5U2VsZWN0b3IgY29ubmVjdGVkXCIpXG4gICAgLy8gSW5pdGlhbGl6ZSBkZWZhdWx0IHZhbHVlc1xuICAgIGlmICghdGhpcy5kZXBhcnR1cmVDaXR5VmFsdWUpIHRoaXMuZGVwYXJ0dXJlQ2l0eVZhbHVlID0gXCJcdTUzMTdcdTRFQUNcIlxuICAgIGlmICghdGhpcy5kZXN0aW5hdGlvbkNpdHlWYWx1ZSkgdGhpcy5kZXN0aW5hdGlvbkNpdHlWYWx1ZSA9IFwiXHU2NzZEXHU1RERFXCJcbiAgICBcbiAgICAvLyBTZXQgaW5pdGlhbCB2YWx1ZXMgdG8gaGlkZGVuIGlucHV0c1xuICAgIHRoaXMuZGVwYXJ0dXJlQ2l0eUlucHV0VGFyZ2V0LnZhbHVlID0gdGhpcy5kZXBhcnR1cmVDaXR5VmFsdWVcbiAgICB0aGlzLmRlc3RpbmF0aW9uQ2l0eUlucHV0VGFyZ2V0LnZhbHVlID0gdGhpcy5kZXN0aW5hdGlvbkNpdHlWYWx1ZVxuICB9XG5cbiAgLy8gT3BlbiBtb2RhbCBmb3IgZGVwYXJ0dXJlIGNpdHkgc2VsZWN0aW9uXG4gIG9wZW5EZXBhcnR1cmUoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc01vZGFsVGFyZ2V0KSB7XG4gICAgICBjb25zb2xlLmxvZygnVHJhaW5DaXR5U2VsZWN0b3I6IE5vIG1vZGFsIGF2YWlsYWJsZSwgc2tpcHBpbmcnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRoaXMuc2VsZWN0aW9uVHlwZSA9ICdkZXBhcnR1cmUnXG4gICAgdGhpcy51cGRhdGVNb2RhbFRpdGxlKClcbiAgICB0aGlzLnNob3dNb2RhbCgpXG4gIH1cblxuICAvLyBPcGVuIG1vZGFsIGZvciBkZXN0aW5hdGlvbiBjaXR5IHNlbGVjdGlvblxuICBvcGVuRGVzdGluYXRpb24oKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc01vZGFsVGFyZ2V0KSB7XG4gICAgICBjb25zb2xlLmxvZygnVHJhaW5DaXR5U2VsZWN0b3I6IE5vIG1vZGFsIGF2YWlsYWJsZSwgc2tpcHBpbmcnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRoaXMuc2VsZWN0aW9uVHlwZSA9ICdkZXN0aW5hdGlvbidcbiAgICB0aGlzLnVwZGF0ZU1vZGFsVGl0bGUoKVxuICAgIHRoaXMuc2hvd01vZGFsKClcbiAgfVxuXG4gIC8vIFNob3cgbW9kYWxcbiAgc2hvd01vZGFsKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNNb2RhbFRhcmdldCkgcmV0dXJuXG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJ1xuICB9XG5cbiAgLy8gQ2xvc2UgbW9kYWxcbiAgY2xvc2VNb2RhbCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaGFzTW9kYWxUYXJnZXQpIHJldHVyblxuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJydcbiAgICB0aGlzLmNsZWFyU2VhcmNoKClcbiAgfVxuXG4gIC8vIFNlbGVjdCBjaXR5XG4gIHNlbGVjdENpdHkoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGNpdHlOYW1lID0gYnV0dG9uLmRhdGFzZXQuY2l0eU5hbWUgfHwgJydcbiAgICBcbiAgICBpZiAodGhpcy5zZWxlY3Rpb25UeXBlID09PSAnZGVwYXJ0dXJlJykge1xuICAgICAgdGhpcy5kZXBhcnR1cmVDaXR5VmFsdWUgPSBjaXR5TmFtZVxuICAgICAgdGhpcy5kZXBhcnR1cmVUYXJnZXQudGV4dENvbnRlbnQgPSBjaXR5TmFtZVxuICAgICAgdGhpcy5kZXBhcnR1cmVDaXR5SW5wdXRUYXJnZXQudmFsdWUgPSBjaXR5TmFtZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRlc3RpbmF0aW9uQ2l0eVZhbHVlID0gY2l0eU5hbWVcbiAgICAgIHRoaXMuZGVzdGluYXRpb25UYXJnZXQudGV4dENvbnRlbnQgPSBjaXR5TmFtZVxuICAgICAgdGhpcy5kZXN0aW5hdGlvbkNpdHlJbnB1dFRhcmdldC52YWx1ZSA9IGNpdHlOYW1lXG4gICAgfVxuICAgIFxuICAgIHRoaXMuY2xvc2VNb2RhbCgpXG4gIH1cblxuICAvLyBTd2l0Y2ggY2l0aWVzXG4gIHN3aXRjaENpdGllcygpOiB2b2lkIHtcbiAgICBjb25zdCB0ZW1wID0gdGhpcy5kZXBhcnR1cmVDaXR5VmFsdWVcbiAgICB0aGlzLmRlcGFydHVyZUNpdHlWYWx1ZSA9IHRoaXMuZGVzdGluYXRpb25DaXR5VmFsdWVcbiAgICB0aGlzLmRlc3RpbmF0aW9uQ2l0eVZhbHVlID0gdGVtcFxuICAgIFxuICAgIHRoaXMuZGVwYXJ0dXJlVGFyZ2V0LnRleHRDb250ZW50ID0gdGhpcy5kZXBhcnR1cmVDaXR5VmFsdWVcbiAgICB0aGlzLmRlc3RpbmF0aW9uVGFyZ2V0LnRleHRDb250ZW50ID0gdGhpcy5kZXN0aW5hdGlvbkNpdHlWYWx1ZVxuICAgIHRoaXMuZGVwYXJ0dXJlQ2l0eUlucHV0VGFyZ2V0LnZhbHVlID0gdGhpcy5kZXBhcnR1cmVDaXR5VmFsdWVcbiAgICB0aGlzLmRlc3RpbmF0aW9uQ2l0eUlucHV0VGFyZ2V0LnZhbHVlID0gdGhpcy5kZXN0aW5hdGlvbkNpdHlWYWx1ZVxuICB9XG5cbiAgLy8gU3dpdGNoIGJldHdlZW4gZG9tZXN0aWMgYW5kIGludGVybmF0aW9uYWwgdGFic1xuICBzaG93RG9tZXN0aWMoKTogdm9pZCB7XG4gICAgdGhpcy5kb21lc3RpY0xpc3RUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICB0aGlzLmludGVybmF0aW9uYWxMaXN0VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgdGhpcy50YWJEZXBhcnR1cmVUYXJnZXQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlLXRhYicpXG4gICAgdGhpcy50YWJEZXN0aW5hdGlvblRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUtdGFiJylcbiAgfVxuXG4gIHNob3dJbnRlcm5hdGlvbmFsKCk6IHZvaWQge1xuICAgIHRoaXMuZG9tZXN0aWNMaXN0VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgdGhpcy5pbnRlcm5hdGlvbmFsTGlzdFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIHRoaXMudGFiRGVwYXJ0dXJlVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZS10YWInKVxuICAgIHRoaXMudGFiRGVzdGluYXRpb25UYXJnZXQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlLXRhYicpXG4gIH1cblxuICAvLyBTZWFyY2ggY2l0aWVzXG4gIHNlYXJjaCgpOiB2b2lkIHtcbiAgICBjb25zdCBxdWVyeSA9IHRoaXMuc2VhcmNoSW5wdXRUYXJnZXQudmFsdWUudG9Mb3dlckNhc2UoKS50cmltKClcbiAgICBcbiAgICBpZiAocXVlcnkgPT09ICcnKSB7XG4gICAgICB0aGlzLmNsZWFyU2VhcmNoKClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIEhpZGUgaGlzdG9yeSBzZWN0aW9uIHdoZW4gc2VhcmNoaW5nXG4gICAgdGhpcy5oaXN0b3J5U2VjdGlvblRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIFxuICAgIC8vIEZpbHRlciBjaXRpZXMgaW4gYm90aCBsaXN0c1xuICAgIHRoaXMuZmlsdGVyQ2l0aWVzKHRoaXMuZG9tZXN0aWNMaXN0VGFyZ2V0LCBxdWVyeSlcbiAgICBpZiAoIXRoaXMuaW50ZXJuYXRpb25hbExpc3RUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgICAgdGhpcy5maWx0ZXJDaXRpZXModGhpcy5pbnRlcm5hdGlvbmFsTGlzdFRhcmdldCwgcXVlcnkpXG4gICAgfVxuICB9XG5cbiAgLy8gRmlsdGVyIGNpdGllcyBoZWxwZXJcbiAgcHJpdmF0ZSBmaWx0ZXJDaXRpZXMobGlzdFRhcmdldDogSFRNTEVsZW1lbnQsIHF1ZXJ5OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBjaXR5QnV0dG9ucyA9IGxpc3RUYXJnZXQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtY2l0eS1uYW1lXScpXG4gICAgY2l0eUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgICBjb25zdCBjaXR5TmFtZSA9IChidXR0b24gYXMgSFRNTEVsZW1lbnQpLmRhdGFzZXQuY2l0eU5hbWU/LnRvTG93ZXJDYXNlKCkgfHwgJydcbiAgICAgIGNvbnN0IGNpdHlQaW55aW4gPSAoYnV0dG9uIGFzIEhUTUxFbGVtZW50KS5kYXRhc2V0LmNpdHlQaW55aW4/LnRvTG93ZXJDYXNlKCkgfHwgJydcbiAgICAgIFxuICAgICAgaWYgKGNpdHlOYW1lLmluY2x1ZGVzKHF1ZXJ5KSB8fCBjaXR5UGlueWluLmluY2x1ZGVzKHF1ZXJ5KSkge1xuICAgICAgICAoYnV0dG9uIGFzIEhUTUxFbGVtZW50KS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgKGJ1dHRvbiBhcyBIVE1MRWxlbWVudCkuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgLy8gQ2xlYXIgc2VhcmNoXG4gIGNsZWFyU2VhcmNoKCk6IHZvaWQge1xuICAgIHRoaXMuc2VhcmNoSW5wdXRUYXJnZXQudmFsdWUgPSAnJ1xuICAgIHRoaXMuaGlzdG9yeVNlY3Rpb25UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICBcbiAgICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gICAgLy8gU2hvdyBhbGwgY2l0aWVzXG4gICAgY29uc3QgYWxsQnV0dG9ucyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1jaXR5LW5hbWVdJylcbiAgICBhbGxCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgICAgKGJ1dHRvbiBhcyBIVE1MRWxlbWVudCkuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICB9KVxuICB9XG5cbiAgLy8gVXBkYXRlIG1vZGFsIHRpdGxlIGJhc2VkIG9uIHNlbGVjdGlvbiB0eXBlXG4gIHByaXZhdGUgdXBkYXRlTW9kYWxUaXRsZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaGFzTW9kYWxUYXJnZXQpIHJldHVyblxuICAgIGNvbnN0IHRpdGxlRWxlbWVudCA9IHRoaXMubW9kYWxUYXJnZXQucXVlcnlTZWxlY3RvcignW2RhdGEtbW9kYWwtdGl0bGVdJylcbiAgICBpZiAodGl0bGVFbGVtZW50KSB7XG4gICAgICB0aXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLnNlbGVjdGlvblR5cGUgPT09ICdkZXBhcnR1cmUnID8gJ1x1NTM1NVx1OTAwOVx1NTFGQVx1NTNEMVx1NTczMCcgOiAnXHU1MzU1XHU5MDA5XHU3NkVFXHU3Njg0XHU1NzMwJ1xuICAgIH1cbiAgfVxuXG4gIC8vIEp1bXAgdG8gbGV0dGVyIHNlY3Rpb25cbiAganVtcFRvTGV0dGVyKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBsZXR0ZXIgPSBidXR0b24uZGF0YXNldC5sZXR0ZXIgfHwgJydcbiAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5kb21lc3RpY0xpc3RUYXJnZXQucXVlcnlTZWxlY3RvcihgW2RhdGEtbGV0dGVyLXNlY3Rpb249XCIke2xldHRlcn1cIl1gKVxuICAgIFxuICAgIGlmIChzZWN0aW9uKSB7XG4gICAgICBzZWN0aW9uLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwidHJpZ2dlclwiLCAgICAgIC8vIFx1ODlFNlx1NTNEMVx1NTJBMFx1OEY3RFx1NzY4NFx1NEUwRFx1NTNFRlx1ODlDMVx1NTE0M1x1N0QyMFxuICAgIFwiY29udGFpbmVyXCIsICAgIC8vIFx1NTE4NVx1NUJCOVx1NUJCOVx1NTY2OFxuICAgIFwibG9hZGluZ1wiICAgICAgIC8vIFx1NTJBMFx1OEY3RFx1NjMwN1x1NzkzQVx1NTY2OFxuICBdXG5cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBwYWdlOiBOdW1iZXIsICAgICAgLy8gXHU1RjUzXHU1MjREXHU5ODc1XHU3ODAxXG4gICAgaGFzTW9yZTogQm9vbGVhbiAgIC8vIFx1NjYyRlx1NTQyNlx1OEZEOFx1NjcwOVx1NjZGNFx1NTkxQVx1NjU3MFx1NjM2RVxuICB9XG5cbiAgLy8gRGVjbGFyZSB0YXJnZXRzIGFuZCB2YWx1ZXNcbiAgZGVjbGFyZSByZWFkb25seSB0cmlnZ2VyVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNvbnRhaW5lclRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBsb2FkaW5nVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHBhZ2VWYWx1ZTogbnVtYmVyXG4gIGRlY2xhcmUgaGFzTW9yZVZhbHVlOiBib29sZWFuXG5cbiAgcHJpdmF0ZSBvYnNlcnZlcjogSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgfCBudWxsID0gbnVsbFxuICBwcml2YXRlIGlzTG9hZGluZzogYm9vbGVhbiA9IGZhbHNlXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkluZmluaXRlU2Nyb2xsIGNvbm5lY3RlZCwgaW5pdGlhbCBwYWdlOlwiLCB0aGlzLnBhZ2VWYWx1ZSwgXCJoYXNNb3JlOlwiLCB0aGlzLmhhc01vcmVWYWx1ZSlcbiAgICBcbiAgICAvLyBcdTUzRUFcdTY3MDlcdTU3MjhcdTY3MDlcdTY2RjRcdTU5MUFcdTY1NzBcdTYzNkVcdTY1RjZcdTYyNERcdThCQkVcdTdGNkVvYnNlcnZlclxuICAgIGlmICh0aGlzLmhhc01vcmVWYWx1ZSkge1xuICAgICAgdGhpcy5zZXR1cE9ic2VydmVyKClcbiAgICB9XG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiSW5maW5pdGVTY3JvbGwgZGlzY29ubmVjdGVkXCIpXG4gICAgaWYgKHRoaXMub2JzZXJ2ZXIpIHtcbiAgICAgIHRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCgpXG4gICAgICB0aGlzLm9ic2VydmVyID0gbnVsbFxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2V0dXBPYnNlcnZlcigpOiB2b2lkIHtcbiAgICAvLyBcdTUyMUJcdTVFRkFJbnRlcnNlY3Rpb25PYnNlcnZlclx1NzZEMVx1NTQyQ3RyaWdnZXJcdTUxNDNcdTdEMjBcbiAgICB0aGlzLm9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKFxuICAgICAgKGVudHJpZXMpID0+IHtcbiAgICAgICAgZW50cmllcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xuICAgICAgICAgIC8vIFx1NUY1M3RyaWdnZXJcdTUxNDNcdTdEMjBcdThGREJcdTUxNjVcdTg5QzZcdTUzRTNcdTY1RjZcdTg5RTZcdTUzRDFcdTUyQTBcdThGN0RcbiAgICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcgJiYgdGhpcy5oYXNNb3JlVmFsdWUgJiYgIXRoaXMuaXNMb2FkaW5nKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRNb3JlKClcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICByb290OiBudWxsLCAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4dmlld3BvcnRcdTRGNUNcdTRFM0Fyb290XG4gICAgICAgIHJvb3RNYXJnaW46IFwiMTAwcHhcIiwgIC8vIFx1NjNEMFx1NTI0RDEwMHB4XHU4OUU2XHU1M0QxXG4gICAgICAgIHRocmVzaG9sZDogMC4xICAgICAgICAvLyAxMCVcdTUzRUZcdTg5QzFcdTY1RjZcdTg5RTZcdTUzRDFcbiAgICAgIH1cbiAgICApXG5cbiAgICAvLyBcdTVGMDBcdTU5Q0JcdTg5QzJcdTVCREZ0cmlnZ2VyXHU1MTQzXHU3RDIwXG4gICAgdGhpcy5vYnNlcnZlci5vYnNlcnZlKHRoaXMudHJpZ2dlclRhcmdldClcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbG9hZE1vcmUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMuaXNMb2FkaW5nIHx8ICF0aGlzLmhhc01vcmVWYWx1ZSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlXG4gICAgdGhpcy5zaG93TG9hZGluZygpXG5cbiAgICBjb25zb2xlLmxvZyhcIkxvYWRpbmcgbW9yZSB0cmlwcywgcGFnZTpcIiwgdGhpcy5wYWdlVmFsdWUpXG5cbiAgICB0cnkge1xuICAgICAgLy8gXHU0RjdGXHU3NTI4VHVyYm9cdTUzRDFcdThENzdcdThCRjdcdTZDNDJcdUZGMENcdTgxRUFcdTUyQThcdTU5MDRcdTc0MDZ0dXJib19zdHJlYW1cdTU0Q0RcdTVFOTRcbiAgICAgIGNvbnN0IHVybCA9IGAvdHJpcHMvbG9hZF9tb3JlP3BhZ2U9JHt0aGlzLnBhZ2VWYWx1ZX1gXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJBY2NlcHRcIjogXCJ0ZXh0L3ZuZC50dXJiby1zdHJlYW0uaHRtbFwiLFxuICAgICAgICAgIFwiWC1SZXF1ZXN0ZWQtV2l0aFwiOiBcIlhNTEh0dHBSZXF1ZXN0XCJcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZXNwb25zZS50ZXh0KClcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NjI0Qlx1NTJBOFx1NTkwNFx1NzQwNlR1cmJvIFN0cmVhbVx1NTRDRFx1NUU5NFxuICAgICAgICBjb25zdCBzdHJlYW1FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgc3RyZWFtRWxlbWVudC5pbm5lckhUTUwgPSBodG1sXG4gICAgICAgIFxuICAgICAgICAvLyBcdTYyNjdcdTg4NEN0dXJiby1zdHJlYW1cdTY4MDdcdTdCN0VcbiAgICAgICAgY29uc3QgdHVyYm9TdHJlYW1zID0gc3RyZWFtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0dXJiby1zdHJlYW0nKVxuICAgICAgICB0dXJib1N0cmVhbXMuZm9yRWFjaCgoc3RyZWFtKSA9PiB7XG4gICAgICAgICAgLy8gVHVyYm9cdTRGMUFcdTgxRUFcdTUyQThcdTU5MDRcdTc0MDZcdThGRDlcdTRFOUJcdTUxNDNcdTdEMjBcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHN0cmVhbSlcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NTg5RVx1NTJBMFx1OTg3NVx1NzgwMVxuICAgICAgICB0aGlzLnBhZ2VWYWx1ZSsrXG4gICAgICAgIFxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdThGRDhcdTY3MDlcdTY2RjRcdTU5MUFcdTY1NzBcdTYzNkVcdUZGMDhcdTkwMUFcdThGQzdcdTY4QzBcdTY3RTVcdTU0Q0RcdTVFOTRcdTRFMkRcdTY2MkZcdTU0MjZcdTUzMDVcdTU0MkJoYXNfbW9yZVx1NEZFMVx1NjA2Rlx1RkYwOVxuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDlcdTY2RjRcdTU5MUFcdTY1NzBcdTYzNkVcdUZGMENcdTUwNUNcdTZCNjJvYnNlcnZlclxuICAgICAgICBpZiAoaHRtbC5pbmNsdWRlcygnXHU1REYyXHU2NjNFXHU3OTNBXHU1MTY4XHU5MEU4XHU4ODRDXHU3QTBCJykpIHtcbiAgICAgICAgICB0aGlzLmhhc01vcmVWYWx1ZSA9IGZhbHNlXG4gICAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCgpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhcIkxvYWRlZCBtb3JlIHRyaXBzLCBuZXcgcGFnZTpcIiwgdGhpcy5wYWdlVmFsdWUsIFwiaGFzTW9yZTpcIiwgdGhpcy5oYXNNb3JlVmFsdWUpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gbG9hZCBtb3JlIHRyaXBzOlwiLCBlcnJvcilcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZVxuICAgICAgdGhpcy5oaWRlTG9hZGluZygpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzaG93TG9hZGluZygpOiB2b2lkIHtcbiAgICB0aGlzLmxvYWRpbmdUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgfVxuXG4gIHByaXZhdGUgaGlkZUxvYWRpbmcoKTogdm9pZCB7XG4gICAgdGhpcy5sb2FkaW5nVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbi8vIENvbm5lY3RzIHRvIGRhdGEtY29udHJvbGxlcj1cImRlZXAtdHJhdmVsXCJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlciB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1widmlkZW9cIiwgXCJ2aWRlb0NvbnRhaW5lclwiLCBcInRhYlwiLCBcImNvbnRlbnRcIl1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHZpZGVvVGFyZ2V0OiBIVE1MVmlkZW9FbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdmlkZW9Db250YWluZXJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdGFiVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IGNvbnRlbnRUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG5cbiAgY29ubmVjdCgpIHtcbiAgICBjb25zb2xlLmxvZyhcIkRlZXAgdHJhdmVsIGNvbnRyb2xsZXIgY29ubmVjdGVkXCIpXG4gIH1cblxuICBwbGF5VmlkZW8oZXZlbnQ6IEV2ZW50KSB7XG4gICAgY29uc3QgdmlkZW8gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxWaWRlb0VsZW1lbnRcbiAgICBpZiAodmlkZW8ucGF1c2VkKSB7XG4gICAgICB2aWRlby5wbGF5KClcbiAgICB9IGVsc2Uge1xuICAgICAgdmlkZW8ucGF1c2UoKVxuICAgIH1cbiAgfVxuXG4gIHRvZ2dsZUZ1bGxzY3JlZW4oZXZlbnQ6IEV2ZW50KSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gKGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsb3Nlc3QoJ1tkYXRhLWRlZXAtdHJhdmVsLXRhcmdldD1cInZpZGVvQ29udGFpbmVyXCJdJykgYXMgSFRNTEVsZW1lbnRcbiAgICBpZiAoIWRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50KSB7XG4gICAgICBjb250YWluZXIucmVxdWVzdEZ1bGxzY3JlZW4oKVxuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5leGl0RnVsbHNjcmVlbigpXG4gICAgfVxuICB9XG5cbiAgc3dpdGNoVGFiKGV2ZW50OiBFdmVudCkge1xuICAgIGNvbnN0IGNsaWNrZWRUYWIgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgdGFiTmFtZSA9IGNsaWNrZWRUYWIuZGF0YXNldC50YWJcblxuICAgIC8vIFVwZGF0ZSB0YWIgc3R5bGVzXG4gICAgdGhpcy50YWJUYXJnZXRzLmZvckVhY2godGFiID0+IHtcbiAgICAgIGlmICh0YWIgPT09IGNsaWNrZWRUYWIpIHtcbiAgICAgICAgdGFiLmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS05MDAnLCAnYm9yZGVyLWItMicsICdib3JkZXIteWVsbG93LTQwMCcsICdiZy15ZWxsb3ctNTAnKVxuICAgICAgICB0YWIuY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTYwMCcpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YWIuY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTkwMCcsICdib3JkZXItYi0yJywgJ2JvcmRlci15ZWxsb3ctNDAwJywgJ2JnLXllbGxvdy01MCcpXG4gICAgICAgIHRhYi5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktNjAwJylcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gU2hvdy9oaWRlIGNvbnRlbnRcbiAgICB0aGlzLmNvbnRlbnRUYXJnZXRzLmZvckVhY2goY29udGVudCA9PiB7XG4gICAgICBpZiAoY29udGVudC5kYXRhc2V0LmNvbnRlbnQgPT09IHRhYk5hbWUpIHtcbiAgICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGVudC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbi8vIFx1ODg0Q1x1N0EwQlx1NkJCNVx1NjNBNVx1NTNFM1xuaW50ZXJmYWNlIFNlZ21lbnQge1xuICBpZDogc3RyaW5nXG4gIGRlcGFydHVyZUNpdHk6IHN0cmluZ1xuICBkZXN0aW5hdGlvbkNpdHk6IHN0cmluZ1xuICBkYXRlOiBzdHJpbmdcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wic2VnbWVudHNDb250YWluZXJcIiwgXCJzZWdtZW50XCIsIFwiYWRkQnV0dG9uXCIsIFwiaGlkZGVuU2VnbWVudHNJbnB1dFwiXVxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIHNlZ21lbnRzOiB7IHR5cGU6IEFycmF5LCBkZWZhdWx0OiBbXSB9LFxuICAgIHN3aXRjaEljb25Vcmw6IFN0cmluZ1xuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBzZWdtZW50c0NvbnRhaW5lclRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzZWdtZW50VGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IGFkZEJ1dHRvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoaWRkZW5TZWdtZW50c0lucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzU2VnbWVudHNDb250YWluZXJUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNBZGRCdXR0b25UYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNIaWRkZW5TZWdtZW50c0lucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgc2VnbWVudHNWYWx1ZTogU2VnbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgc3dpdGNoSWNvblVybFZhbHVlOiBzdHJpbmdcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiTXVsdGlDaXR5IGNvbnRyb2xsZXIgY29ubmVjdGVkXCIpXG4gICAgXG4gICAgLy8gT25seSBpbml0aWFsaXplIGlmIHRoZSBjb250YWluZXIgdGFyZ2V0IGlzIGF2YWlsYWJsZVxuICAgIGlmICghdGhpcy5oYXNTZWdtZW50c0NvbnRhaW5lclRhcmdldCkge1xuICAgICAgY29uc29sZS5sb2coXCJNdWx0aUNpdHkgY29udHJvbGxlcjogc2VnbWVudHNDb250YWluZXIgbm90IGF2YWlsYWJsZSB5ZXQsIHNraXBwaW5nIGluaXRpYWxpemF0aW9uXCIpXG4gICAgICBcbiAgICAgIC8vIExpc3RlbiBmb3IgdGhlIGV2ZW50IHdoZW4gbXVsdGktY2l0eSBmb3JtIGJlY29tZXMgdmlzaWJsZVxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndHJpcC10eXBlOm11bHRpLWNpdHktc2hvd24nLCB0aGlzLmhhbmRsZU11bHRpQ2l0eVNob3duLmJpbmQodGhpcykpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgdGhpcy5pbml0aWFsaXplU2VnbWVudHMoKVxuICAgIFxuICAgIC8vIExpc3RlbiBmb3IgY2l0eSBzZWxlY3Rpb24gZXZlbnRzIG9uIGRvY3VtZW50IGZvciBiZXR0ZXIgZXZlbnQgY2FwdHVyZVxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NpdHktc2VsZWN0b3I6Y2l0eS1zZWxlY3RlZCcsIHRoaXMuaGFuZGxlQ2l0eVNlbGVjdGVkLmJpbmQodGhpcykpXG4gICAgY29uc29sZS5sb2coJ011bHRpLWNpdHk6IEFkZGVkIGV2ZW50IGxpc3RlbmVyIGZvciBjaXR5LXNlbGVjdG9yOmNpdHktc2VsZWN0ZWQnKVxuICAgIFxuICAgIC8vIExpc3RlbiBmb3IgZGF0ZSBzZWxlY3Rpb24gZXZlbnRzXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZGF0ZS1waWNrZXI6ZGF0ZS1zZWxlY3RlZCcsIHRoaXMuaGFuZGxlRGF0ZVNlbGVjdGVkLmJpbmQodGhpcykgYXMgdW5rbm93biBhcyBFdmVudExpc3RlbmVyKVxuICAgIGNvbnNvbGUubG9nKCdNdWx0aS1jaXR5OiBBZGRlZCBldmVudCBsaXN0ZW5lciBmb3IgZGF0ZS1waWNrZXI6ZGF0ZS1zZWxlY3RlZCcpXG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NpdHktc2VsZWN0b3I6Y2l0eS1zZWxlY3RlZCcsIHRoaXMuaGFuZGxlQ2l0eVNlbGVjdGVkLmJpbmQodGhpcykpXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZGF0ZS1waWNrZXI6ZGF0ZS1zZWxlY3RlZCcsIHRoaXMuaGFuZGxlRGF0ZVNlbGVjdGVkLmJpbmQodGhpcykgYXMgdW5rbm93biBhcyBFdmVudExpc3RlbmVyKVxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyaXAtdHlwZTptdWx0aS1jaXR5LXNob3duJywgdGhpcy5oYW5kbGVNdWx0aUNpdHlTaG93bi5iaW5kKHRoaXMpKVxuICB9XG5cbiAgLy8gU3RpbXVsdXMgdmFsdWUgY2hhbmdlZCBjYWxsYmFjayAtIGF1dG9tYXRpY2FsbHkgY2FsbGVkIHdoZW4gc2VnbWVudHNWYWx1ZSBjaGFuZ2VzXG4gIHNlZ21lbnRzVmFsdWVDaGFuZ2VkKCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKCdNdWx0aS1jaXR5OiBzZWdtZW50c1ZhbHVlQ2hhbmdlZCB0cmlnZ2VyZWQnKVxuICAgIC8vIE9ubHkgcmVuZGVyIGlmIHRoZSBjb250YWluZXIgaXMgYXZhaWxhYmxlXG4gICAgaWYgKHRoaXMuaGFzU2VnbWVudHNDb250YWluZXJUYXJnZXQpIHtcbiAgICAgIHRoaXMucmVuZGVyKClcbiAgICB9XG4gIH1cblxuICAvLyBIYW5kbGUgd2hlbiBtdWx0aS1jaXR5IGZvcm0gaXMgc2hvd25cbiAgcHJpdmF0ZSBoYW5kbGVNdWx0aUNpdHlTaG93bigpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygnTXVsdGktY2l0eTogRm9ybSBpcyBub3cgdmlzaWJsZSwgaW5pdGlhbGl6aW5nLi4uJylcbiAgICBcbiAgICAvLyBDaGVjayBpZiB0YXJnZXRzIGFyZSBub3cgYXZhaWxhYmxlXG4gICAgaWYgKHRoaXMuaGFzU2VnbWVudHNDb250YWluZXJUYXJnZXQpIHtcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZVNlZ21lbnRzKClcbiAgICAgIFxuICAgICAgLy8gTGlzdGVuIGZvciBjaXR5IHNlbGVjdGlvbiBldmVudHNcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NpdHktc2VsZWN0b3I6Y2l0eS1zZWxlY3RlZCcsIHRoaXMuaGFuZGxlQ2l0eVNlbGVjdGVkLmJpbmQodGhpcykpXG4gICAgICBjb25zb2xlLmxvZygnTXVsdGktY2l0eTogQWRkZWQgZXZlbnQgbGlzdGVuZXIgZm9yIGNpdHktc2VsZWN0b3I6Y2l0eS1zZWxlY3RlZCcpXG4gICAgICBcbiAgICAgIC8vIExpc3RlbiBmb3IgZGF0ZSBzZWxlY3Rpb24gZXZlbnRzXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RhdGUtcGlja2VyOmRhdGUtc2VsZWN0ZWQnLCB0aGlzLmhhbmRsZURhdGVTZWxlY3RlZC5iaW5kKHRoaXMpIGFzIHVua25vd24gYXMgRXZlbnRMaXN0ZW5lcilcbiAgICAgIGNvbnNvbGUubG9nKCdNdWx0aS1jaXR5OiBBZGRlZCBldmVudCBsaXN0ZW5lciBmb3IgZGF0ZS1waWNrZXI6ZGF0ZS1zZWxlY3RlZCcpXG4gICAgfVxuICB9XG5cbiAgLy8gSW5pdGlhbGl6ZSB0aGUgc2VnbWVudHNcbiAgcHJpdmF0ZSBpbml0aWFsaXplU2VnbWVudHMoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ011bHRpLWNpdHk6IEluaXRpYWxpemluZyBzZWdtZW50cycpXG4gICAgXG4gICAgLy8gXHU1MjFEXHU1OUNCXHU1MzE2XHU5RUQ4XHU4QkE0XHU4ODRDXHU3QTBCXHU2QkI1XG4gICAgaWYgKHRoaXMuc2VnbWVudHNWYWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuc2VnbWVudHNWYWx1ZSA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiB0aGlzLmdlbmVyYXRlSWQoKSxcbiAgICAgICAgICBkZXBhcnR1cmVDaXR5OiBcIlx1NkI2Nlx1NkM0OVwiLFxuICAgICAgICAgIGRlc3RpbmF0aW9uQ2l0eTogXCJcdTZERjFcdTU3MzNcIixcbiAgICAgICAgICBkYXRlOiB0aGlzLmZvcm1hdERhdGUobmV3IERhdGUoKSlcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiB0aGlzLmdlbmVyYXRlSWQoKSxcbiAgICAgICAgICBkZXBhcnR1cmVDaXR5OiBcIlx1NUU3Rlx1NURERVwiLFxuICAgICAgICAgIGRlc3RpbmF0aW9uQ2l0eTogXCJcdTY3NkRcdTVEREVcIixcbiAgICAgICAgICBkYXRlOiB0aGlzLmZvcm1hdERhdGUobmV3IERhdGUoRGF0ZS5ub3coKSArIDMgKiAyNCAqIDYwICogNjAgKiAxMDAwKSkgLy8gM1x1NTkyOVx1NTQwRVxuICAgICAgICB9XG4gICAgICBdXG4gICAgfVxuICAgIFxuICAgIHRoaXMucmVuZGVyKClcbiAgICB0aGlzLnVwZGF0ZUFkZEJ1dHRvblN0YXRlKClcbiAgfVxuXG4gIC8vIEhhbmRsZSBjaXR5IHNlbGVjdGlvbiBmcm9tIGNpdHkgc2VsZWN0b3JcbiAgcHJpdmF0ZSBoYW5kbGVDaXR5U2VsZWN0ZWQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY3VzdG9tRXZlbnQgPSBldmVudCBhcyBDdXN0b21FdmVudFxuICAgIGNvbnNvbGUubG9nKCdNdWx0aS1jaXR5OiBSZWNlaXZlZCBjaXR5LXNlbGVjdG9yOmNpdHktc2VsZWN0ZWQgZXZlbnQnLCBjdXN0b21FdmVudC5kZXRhaWwpXG4gICAgY29uc3QgeyBzZWdtZW50SWQsIGNpdHlUeXBlLCBjaXR5TmFtZSB9ID0gY3VzdG9tRXZlbnQuZGV0YWlsXG4gICAgXG4gICAgY29uc29sZS5sb2coJ011bHRpLWNpdHk6IEN1cnJlbnQgc2VnbWVudHMgYmVmb3JlIHVwZGF0ZTonLCBKU09OLnN0cmluZ2lmeSh0aGlzLnNlZ21lbnRzVmFsdWUpKVxuICAgIFxuICAgIGNvbnN0IHNlZ21lbnRJbmRleCA9IHRoaXMuc2VnbWVudHNWYWx1ZS5maW5kSW5kZXgoc2VnID0+IHNlZy5pZCA9PT0gc2VnbWVudElkKVxuICAgIFxuICAgIGlmIChzZWdtZW50SW5kZXggIT09IC0xKSB7XG4gICAgICBjb25zb2xlLmxvZyhgTXVsdGktY2l0eTogRm91bmQgc2VnbWVudCAke3NlZ21lbnRJZH0sIHVwZGF0aW5nICR7Y2l0eVR5cGV9IHRvICR7Y2l0eU5hbWV9YClcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIGEgbmV3IGFycmF5IHdpdGggdXBkYXRlZCBzZWdtZW50IHRvIHRyaWdnZXIgU3RpbXVsdXMgcmVhY3Rpdml0eVxuICAgICAgdGhpcy5zZWdtZW50c1ZhbHVlID0gdGhpcy5zZWdtZW50c1ZhbHVlLm1hcCgoc2VnLCBpbmRleCkgPT4ge1xuICAgICAgICBpZiAoaW5kZXggPT09IHNlZ21lbnRJbmRleCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdNdWx0aS1jaXR5OiBTZWdtZW50IGJlZm9yZSB1cGRhdGU6JywgSlNPTi5zdHJpbmdpZnkoc2VnKSlcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCB1cGRhdGVkU2VnbWVudCA9IHtcbiAgICAgICAgICAgIC4uLnNlZyxcbiAgICAgICAgICAgIGRlcGFydHVyZUNpdHk6IGNpdHlUeXBlID09PSAnZGVwYXJ0dXJlJyA/IGNpdHlOYW1lIDogc2VnLmRlcGFydHVyZUNpdHksXG4gICAgICAgICAgICBkZXN0aW5hdGlvbkNpdHk6IGNpdHlUeXBlID09PSAnZGVzdGluYXRpb24nID8gY2l0eU5hbWUgOiBzZWcuZGVzdGluYXRpb25DaXR5XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGNvbnNvbGUubG9nKCdNdWx0aS1jaXR5OiBTZWdtZW50IGFmdGVyIHVwZGF0ZTonLCBKU09OLnN0cmluZ2lmeSh1cGRhdGVkU2VnbWVudCkpXG4gICAgICAgICAgcmV0dXJuIHVwZGF0ZWRTZWdtZW50XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlZ1xuICAgICAgfSlcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ011bHRpLWNpdHk6IEFsbCBzZWdtZW50cyBhZnRlciB1cGRhdGU6JywgSlNPTi5zdHJpbmdpZnkodGhpcy5zZWdtZW50c1ZhbHVlKSlcbiAgICAgIGNvbnNvbGUubG9nKCdNdWx0aS1jaXR5OiBTZWdtZW50IHVwZGF0ZWQsIHJlbmRlciB3aWxsIGJlIHRyaWdnZXJlZCBieSB2YWx1ZUNoYW5nZWQnKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLndhcm4oJ011bHRpLWNpdHk6IFNlZ21lbnQgbm90IGZvdW5kOicsIHNlZ21lbnRJZClcbiAgICAgIGNvbnNvbGUud2FybignTXVsdGktY2l0eTogQXZhaWxhYmxlIHNlZ21lbnQgSURzOicsIHRoaXMuc2VnbWVudHNWYWx1ZS5tYXAocyA9PiBzLmlkKSlcbiAgICB9XG4gIH1cblxuICAvLyBIYW5kbGUgZGF0ZSBzZWxlY3Rpb24gZnJvbSBkYXRlIHBpY2tlclxuICBwcml2YXRlIGhhbmRsZURhdGVTZWxlY3RlZChldmVudDogQ3VzdG9tRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygnTXVsdGktY2l0eTogUmVjZWl2ZWQgZGF0ZS1waWNrZXI6ZGF0ZS1zZWxlY3RlZCBldmVudCcsIGV2ZW50LmRldGFpbClcbiAgICBjb25zdCB7IHNlZ21lbnRJZCwgZGF0ZSB9ID0gZXZlbnQuZGV0YWlsXG4gICAgXG4gICAgY29uc3Qgc2VnbWVudEluZGV4ID0gdGhpcy5zZWdtZW50c1ZhbHVlLmZpbmRJbmRleChzZWcgPT4gc2VnLmlkID09PSBzZWdtZW50SWQpXG4gICAgXG4gICAgaWYgKHNlZ21lbnRJbmRleCAhPT0gLTEpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBNdWx0aS1jaXR5OiBVcGRhdGluZyBzZWdtZW50ICR7c2VnbWVudElkfSBkYXRlIHRvICR7ZGF0ZX1gKVxuICAgICAgXG4gICAgICAvLyBDcmVhdGUgYSBuZXcgYXJyYXkgd2l0aCB1cGRhdGVkIHNlZ21lbnQgdG8gdHJpZ2dlciBTdGltdWx1cyByZWFjdGl2aXR5XG4gICAgICB0aGlzLnNlZ21lbnRzVmFsdWUgPSB0aGlzLnNlZ21lbnRzVmFsdWUubWFwKChzZWcsIGluZGV4KSA9PiB7XG4gICAgICAgIGlmIChpbmRleCA9PT0gc2VnbWVudEluZGV4KSB7XG4gICAgICAgICAgcmV0dXJuIHsgLi4uc2VnLCBkYXRlIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2VnXG4gICAgICB9KVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnTXVsdGktY2l0eTogU2VnbWVudCBkYXRlIHVwZGF0ZWQnKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLndhcm4oJ011bHRpLWNpdHk6IFNlZ21lbnQgbm90IGZvdW5kOicsIHNlZ21lbnRJZClcbiAgICB9XG4gIH1cblxuICAvLyBcdTZERkJcdTUyQTBcdTY1QjBcdTc2ODRcdTg4NENcdTdBMEJcdTZCQjVcbiAgYWRkU2VnbWVudCgpOiB2b2lkIHtcbiAgICAvLyBcdTY3MDBcdTU5MUFcdTY1MkZcdTYzMDE4XHU0RTJBXHU4ODRDXHU3QTBCXHU2QkI1XG4gICAgaWYgKHRoaXMuc2VnbWVudHNWYWx1ZS5sZW5ndGggPj0gOCkge1xuICAgICAgYWxlcnQoXCJcdTY3MDBcdTU5MUFcdTY1MkZcdTYzMDE4XHU0RTJBXHU4ODRDXHU3QTBCXHU2QkI1XCIpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBsYXN0U2VnbWVudCA9IHRoaXMuc2VnbWVudHNWYWx1ZVt0aGlzLnNlZ21lbnRzVmFsdWUubGVuZ3RoIC0gMV1cbiAgICBcbiAgICAvLyBcdTY1QjBcdTg4NENcdTdBMEJcdTZCQjVcdTc2ODRcdTUxRkFcdTUzRDFcdTU3MzBcdTlFRDhcdThCQTRcdTRFM0FcdTRFMEFcdTRFMDBcdTZCQjVcdTc2ODRcdTc2RUVcdTc2ODRcdTU3MzBcbiAgICBjb25zdCBuZXdTZWdtZW50OiBTZWdtZW50ID0ge1xuICAgICAgaWQ6IHRoaXMuZ2VuZXJhdGVJZCgpLFxuICAgICAgZGVwYXJ0dXJlQ2l0eTogbGFzdFNlZ21lbnQgPyBsYXN0U2VnbWVudC5kZXN0aW5hdGlvbkNpdHkgOiBcIlx1NTMxN1x1NEVBQ1wiLFxuICAgICAgZGVzdGluYXRpb25DaXR5OiBcIlx1NEUwQVx1NkQ3N1wiLFxuICAgICAgZGF0ZTogbGFzdFNlZ21lbnQgXG4gICAgICAgID8gdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKG5ldyBEYXRlKGxhc3RTZWdtZW50LmRhdGUpLmdldFRpbWUoKSArIDI0ICogNjAgKiA2MCAqIDEwMDApKVxuICAgICAgICA6IHRoaXMuZm9ybWF0RGF0ZShuZXcgRGF0ZSgpKVxuICAgIH1cblxuICAgIHRoaXMuc2VnbWVudHNWYWx1ZSA9IFsuLi50aGlzLnNlZ21lbnRzVmFsdWUsIG5ld1NlZ21lbnRdXG4gICAgdGhpcy5yZW5kZXIoKVxuICAgIHRoaXMudXBkYXRlQWRkQnV0dG9uU3RhdGUoKVxuICB9XG5cbiAgLy8gXHU1MjIwXHU5NjY0XHU4ODRDXHU3QTBCXHU2QkI1XG4gIHJlbW92ZVNlZ21lbnQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHNlZ21lbnRJZCA9IGJ1dHRvbi5kYXRhc2V0LnNlZ21lbnRJZFxuXG4gICAgLy8gXHU4MUYzXHU1QzExXHU0RkREXHU3NTU5Mlx1NEUyQVx1ODg0Q1x1N0EwQlx1NkJCNVxuICAgIGlmICh0aGlzLnNlZ21lbnRzVmFsdWUubGVuZ3RoIDw9IDIpIHtcbiAgICAgIGFsZXJ0KFwiXHU4MUYzXHU1QzExXHU5NzAwXHU4OTgxXHU0RkREXHU3NTU5Mlx1NEUyQVx1ODg0Q1x1N0EwQlx1NkJCNVwiKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdGhpcy5zZWdtZW50c1ZhbHVlID0gdGhpcy5zZWdtZW50c1ZhbHVlLmZpbHRlcihzZWcgPT4gc2VnLmlkICE9PSBzZWdtZW50SWQpXG4gICAgdGhpcy5yZW5kZXIoKVxuICAgIHRoaXMudXBkYXRlQWRkQnV0dG9uU3RhdGUoKVxuICB9XG5cbiAgLy8gXHU2NkY0XHU2NUIwXHU4ODRDXHU3QTBCXHU2QkI1XHU3Njg0XHU1N0NFXHU1RTAyXG4gIHVwZGF0ZUNpdHkoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgaW5wdXQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBzZWdtZW50SWQgPSBpbnB1dC5kYXRhc2V0LnNlZ21lbnRJZFxuICAgIGNvbnN0IGNpdHlUeXBlID0gaW5wdXQuZGF0YXNldC5jaXR5VHlwZSAvLyAnZGVwYXJ0dXJlJyBvciAnZGVzdGluYXRpb24nXG5cbiAgICBjb25zdCBzZWdtZW50ID0gdGhpcy5zZWdtZW50c1ZhbHVlLmZpbmQoc2VnID0+IHNlZy5pZCA9PT0gc2VnbWVudElkKVxuICAgIGlmIChzZWdtZW50KSB7XG4gICAgICBpZiAoY2l0eVR5cGUgPT09ICdkZXBhcnR1cmUnKSB7XG4gICAgICAgIHNlZ21lbnQuZGVwYXJ0dXJlQ2l0eSA9IGlucHV0LnZhbHVlXG4gICAgICB9IGVsc2UgaWYgKGNpdHlUeXBlID09PSAnZGVzdGluYXRpb24nKSB7XG4gICAgICAgIHNlZ21lbnQuZGVzdGluYXRpb25DaXR5ID0gaW5wdXQudmFsdWVcbiAgICAgIH1cbiAgICAgIHRoaXMudXBkYXRlSGlkZGVuSW5wdXQoKVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1NjZGNFx1NjVCMFx1ODg0Q1x1N0EwQlx1NkJCNVx1NzY4NFx1NjVFNVx1NjcxRlxuICB1cGRhdGVEYXRlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGlucHV0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3Qgc2VnbWVudElkID0gaW5wdXQuZGF0YXNldC5zZWdtZW50SWRcblxuICAgIGNvbnN0IHNlZ21lbnQgPSB0aGlzLnNlZ21lbnRzVmFsdWUuZmluZChzZWcgPT4gc2VnLmlkID09PSBzZWdtZW50SWQpXG4gICAgaWYgKHNlZ21lbnQpIHtcbiAgICAgIHNlZ21lbnQuZGF0ZSA9IGlucHV0LnZhbHVlXG4gICAgICB0aGlzLnVwZGF0ZUhpZGRlbklucHV0KClcbiAgICB9XG4gIH1cblxuICAvLyBcdTYyNTNcdTVGMDBcdTU3Q0VcdTVFMDJcdTkwMDlcdTYyRTlcdTU2NjhcbiAgb3BlbkNpdHlTZWxlY3RvcihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3Qgc2VnbWVudElkID0gYnV0dG9uLmRhdGFzZXQuc2VnbWVudElkXG4gICAgY29uc3QgY2l0eVR5cGUgPSBidXR0b24uZGF0YXNldC5jaXR5VHlwZVxuXG4gICAgY29uc29sZS5sb2coYE11bHRpLWNpdHk6IE9wZW5pbmcgY2l0eSBzZWxlY3RvciBmb3Igc2VnbWVudCAke3NlZ21lbnRJZH0sIGNpdHlUeXBlICR7Y2l0eVR5cGV9YClcbiAgICBcbiAgICAvLyBcdTg5RTZcdTUzRDFcdTU3Q0VcdTVFMDJcdTkwMDlcdTYyRTlcdTU2NjhcdTc2ODRcdTgxRUFcdTVCOUFcdTRFNDlcdTRFOEJcdTRFRjZcbiAgICBjb25zdCBjdXN0b21FdmVudCA9IG5ldyBDdXN0b21FdmVudCgnbXVsdGktY2l0eTpvcGVuLWNpdHktc2VsZWN0b3InLCB7XG4gICAgICBkZXRhaWw6IHsgc2VnbWVudElkLCBjaXR5VHlwZSB9LFxuICAgICAgYnViYmxlczogdHJ1ZVxuICAgIH0pXG4gICAgdGhpcy5lbGVtZW50LmRpc3BhdGNoRXZlbnQoY3VzdG9tRXZlbnQpXG4gIH1cblxuICAvLyBcdTYyNTNcdTVGMDBcdTY1RTVcdTY3MUZcdTkwMDlcdTYyRTlcdTU2NjhcbiAgb3BlbkRhdGVQaWNrZXIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHNlZ21lbnRJZCA9IGJ1dHRvbi5kYXRhc2V0LnNlZ21lbnRJZFxuXG4gICAgLy8gXHU4OUU2XHU1M0QxXHU2NUU1XHU2NzFGXHU5MDA5XHU2MkU5XHU1NjY4XHU3Njg0XHU4MUVBXHU1QjlBXHU0RTQ5XHU0RThCXHU0RUY2XG4gICAgY29uc3QgY3VzdG9tRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ211bHRpLWNpdHk6b3Blbi1kYXRlLXBpY2tlcicsIHtcbiAgICAgIGRldGFpbDogeyBzZWdtZW50SWQgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICB9KVxuICAgIHRoaXMuZWxlbWVudC5kaXNwYXRjaEV2ZW50KGN1c3RvbUV2ZW50KVxuICB9XG5cbiAgLy8gXHU2RTMyXHU2N0QzXHU2MjQwXHU2NzA5XHU4ODRDXHU3QTBCXHU2QkI1XG4gIHByaXZhdGUgcmVuZGVyKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNTZWdtZW50c0NvbnRhaW5lclRhcmdldCkge1xuICAgICAgY29uc29sZS5sb2coXCJNdWx0aUNpdHk6IENhbm5vdCByZW5kZXIsIHNlZ21lbnRzQ29udGFpbmVyIG5vdCBhdmFpbGFibGVcIilcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygnTXVsdGktY2l0eTogcmVuZGVyKCkgY2FsbGVkIHdpdGggc2VnbWVudHM6JywgSlNPTi5zdHJpbmdpZnkodGhpcy5zZWdtZW50c1ZhbHVlKSlcbiAgICBcbiAgICB0aGlzLnNlZ21lbnRzQ29udGFpbmVyVGFyZ2V0LmlubmVySFRNTCA9IFwiXCJcblxuICAgIHRoaXMuc2VnbWVudHNWYWx1ZS5mb3JFYWNoKChzZWdtZW50LCBpbmRleCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coYE11bHRpLWNpdHk6IENyZWF0aW5nIGVsZW1lbnQgZm9yIHNlZ21lbnQgJHtpbmRleH06YCwgSlNPTi5zdHJpbmdpZnkoc2VnbWVudCkpXG4gICAgICBjb25zdCBzZWdtZW50RWxlbWVudCA9IHRoaXMuY3JlYXRlU2VnbWVudEVsZW1lbnQoc2VnbWVudCwgaW5kZXgpXG4gICAgICB0aGlzLnNlZ21lbnRzQ29udGFpbmVyVGFyZ2V0LmFwcGVuZENoaWxkKHNlZ21lbnRFbGVtZW50KVxuICAgIH0pXG5cbiAgICB0aGlzLnVwZGF0ZUhpZGRlbklucHV0KClcbiAgfVxuXG4gIC8vIFx1NTIxQlx1NUVGQVx1NTM1NVx1NEUyQVx1ODg0Q1x1N0EwQlx1NkJCNVx1NTE0M1x1N0QyMFxuICBwcml2YXRlIGNyZWF0ZVNlZ21lbnRFbGVtZW50KHNlZ21lbnQ6IFNlZ21lbnQsIGluZGV4OiBudW1iZXIpOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc29sZS5sb2coYE11bHRpLWNpdHk6IGNyZWF0ZVNlZ21lbnRFbGVtZW50IGNhbGxlZCBmb3Igc2VnbWVudCAke3NlZ21lbnQuaWR9OmAsIHtcbiAgICAgIGRlcGFydHVyZUNpdHk6IHNlZ21lbnQuZGVwYXJ0dXJlQ2l0eSxcbiAgICAgIGRlc3RpbmF0aW9uQ2l0eTogc2VnbWVudC5kZXN0aW5hdGlvbkNpdHksXG4gICAgICBkYXRlOiBzZWdtZW50LmRhdGVcbiAgICB9KVxuICAgIFxuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcbiAgICBkaXYuY2xhc3NOYW1lID0gXCJib3JkZXItYiBib3JkZXItZ3JheS0xMDAgcHktNFwiXG4gICAgZGl2LmRhdGFzZXQubXVsdGlDaXR5VGFyZ2V0ID0gXCJzZWdtZW50XCJcblxuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShzZWdtZW50LmRhdGUpXG4gICAgY29uc3Qgd2Vla2RheSA9IHRoaXMuZ2V0V2Vla2RheShkYXRlKVxuXG4gICAgZGl2LmlubmVySFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbWItM1wiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB3LTUgaC01IHJvdW5kZWQtZnVsbCBiZy1ibHVlLTUwMCB0ZXh0LXdoaXRlIHRleHQteHMgZm9udC1ib2xkXCI+XG4gICAgICAgICAgICAke2luZGV4ICsgMX1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj5cdTdCMkMke3RoaXMubnVtYmVyVG9DaGluZXNlKGluZGV4ICsgMSl9XHU3QTBCPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgJHt0aGlzLnNlZ21lbnRzVmFsdWUubGVuZ3RoID4gMiA/IGBcbiAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBkYXRhLWFjdGlvbj1cImNsaWNrLT5tdWx0aS1jaXR5I3JlbW92ZVNlZ21lbnRcIlxuICAgICAgICAgICAgZGF0YS1zZWdtZW50LWlkPVwiJHtzZWdtZW50LmlkfVwiXG4gICAgICAgICAgICBjbGFzcz1cInRleHQtZ3JheS00MDAgaG92ZXI6dGV4dC1yZWQtNTAwXCI+XG4gICAgICAgICAgICA8c3ZnIGNsYXNzPVwidy01IGgtNVwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCI+XG4gICAgICAgICAgICAgIDxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIlxuICAgICAgICAgICAgICAgIGQ9XCJNNC4yOTMgNC4yOTNhMSAxIDAgMDExLjQxNCAwTDEwIDguNTg2bDQuMjkzLTQuMjkzYTEgMSAwIDExMS40MTQgMS40MTRMMTEuNDE0IDEwbDQuMjkzIDQuMjkzYTEgMSAwXG4gICAgICAgICAgICAgICAgICAtMS40MTQgMS40MTRMMTAgMTEuNDE0bC00LjI5MyA0LjI5M2ExIDEgMCAwMS0xLjQxNC0xLjQxNEw4LjU4NiAxMCA0LjI5MyA1LjcwN2ExIDEgMCAwMTAtMS40MTR6XCJcbiAgICAgICAgICAgICAgICBjbGlwLXJ1bGU9XCJldmVub2RkXCIvPlxuICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIGAgOiAnJ31cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgIDxidXR0b24gXG4gICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgZGF0YS1hY3Rpb249XCJjbGljay0+bXVsdGktY2l0eSNvcGVuQ2l0eVNlbGVjdG9yXCJcbiAgICAgICAgICBkYXRhLXNlZ21lbnQtaWQ9XCIke3NlZ21lbnQuaWR9XCJcbiAgICAgICAgICBkYXRhLWNpdHktdHlwZT1cImRlcGFydHVyZVwiXG4gICAgICAgICAgY2xhc3M9XCJmbGV4LTEgdGV4dC1sZWZ0XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtWzMycHhdIGZvbnQtYm9sZCBsZWFkaW5nLXRpZ2h0XCI+JHtzZWdtZW50LmRlcGFydHVyZUNpdHl9PC9kaXY+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICBcbiAgICAgICAgPGRpdiBjbGFzcz1cIm14LTQgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICA8aW1nIHNyYz1cIiR7dGhpcy5zd2l0Y2hJY29uVXJsVmFsdWV9XCIgY2xhc3M9XCJ3LTEyIGgtMTJcIiBhbHQ9XCJcdTUyMDdcdTYzNjJcIiAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgXG4gICAgICAgIDxidXR0b24gXG4gICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgZGF0YS1hY3Rpb249XCJjbGljay0+bXVsdGktY2l0eSNvcGVuQ2l0eVNlbGVjdG9yXCJcbiAgICAgICAgICBkYXRhLXNlZ21lbnQtaWQ9XCIke3NlZ21lbnQuaWR9XCJcbiAgICAgICAgICBkYXRhLWNpdHktdHlwZT1cImRlc3RpbmF0aW9uXCJcbiAgICAgICAgICBjbGFzcz1cImZsZXgtMSB0ZXh0LXJpZ2h0XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtWzMycHhdIGZvbnQtYm9sZCBsZWFkaW5nLXRpZ2h0XCI+JHtzZWdtZW50LmRlc3RpbmF0aW9uQ2l0eX08L2Rpdj5cbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGJ1dHRvbiBcbiAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgIGRhdGEtYWN0aW9uPVwiY2xpY2stPm11bHRpLWNpdHkjb3BlbkRhdGVQaWNrZXJcIlxuICAgICAgICBkYXRhLXNlZ21lbnQtaWQ9XCIke3NlZ21lbnQuaWR9XCJcbiAgICAgICAgY2xhc3M9XCJtdC0yIHRleHQtbGVmdFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1sZyBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwXCI+XG4gICAgICAgICAgJHtkYXRlLmdldE1vbnRoKCkgKyAxfVx1NjcwOCR7ZGF0ZS5nZXREYXRlKCl9XHU2NUU1ICR7d2Vla2RheX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2J1dHRvbj5cbiAgICBgXG4gICAgXG4gICAgY29uc29sZS5sb2coYE11bHRpLWNpdHk6IENyZWF0ZWQgSFRNTCBmb3Igc2VnbWVudCAke3NlZ21lbnQuaWR9LCBkZXBhcnR1cmU6ICR7c2VnbWVudC5kZXBhcnR1cmVDaXR5fSwgZGVzdGluYXRpb246ICR7c2VnbWVudC5kZXN0aW5hdGlvbkNpdHl9YClcblxuICAgIHJldHVybiBkaXZcbiAgfVxuXG4gIC8vIFx1NjZGNFx1NjVCMFx1NkRGQlx1NTJBMFx1NjMwOVx1OTRBRVx1NzJCNlx1NjAwMVxuICBwcml2YXRlIHVwZGF0ZUFkZEJ1dHRvblN0YXRlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNBZGRCdXR0b25UYXJnZXQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiTXVsdGlDaXR5OiBDYW5ub3QgdXBkYXRlIGFkZCBidXR0b24gc3RhdGUsIGJ1dHRvbiBub3QgYXZhaWxhYmxlXCIpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuc2VnbWVudHNWYWx1ZS5sZW5ndGggPj0gOCkge1xuICAgICAgdGhpcy5hZGRCdXR0b25UYXJnZXQuY2xhc3NMaXN0LmFkZChcIm9wYWNpdHktNTBcIiwgXCJjdXJzb3Itbm90LWFsbG93ZWRcIilcbiAgICAgIHRoaXMuYWRkQnV0dG9uVGFyZ2V0LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFkZEJ1dHRvblRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwib3BhY2l0eS01MFwiLCBcImN1cnNvci1ub3QtYWxsb3dlZFwiKVxuICAgICAgdGhpcy5hZGRCdXR0b25UYXJnZXQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIilcbiAgICB9XG4gIH1cblxuICAvLyBcdTY2RjRcdTY1QjBcdTk2OTBcdTg1Q0ZcdTc2ODRcdTg4NjhcdTUzNTVcdThGOTNcdTUxNjVcbiAgcHJpdmF0ZSB1cGRhdGVIaWRkZW5JbnB1dCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5oYXNIaWRkZW5TZWdtZW50c0lucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLmhpZGRlblNlZ21lbnRzSW5wdXRUYXJnZXQudmFsdWUgPSBKU09OLnN0cmluZ2lmeSh0aGlzLnNlZ21lbnRzVmFsdWUpXG4gICAgfVxuICB9XG5cbiAgLy8gXHU3NTFGXHU2MjEwXHU1NTJGXHU0RTAwSURcbiAgcHJpdmF0ZSBnZW5lcmF0ZUlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBzZWdtZW50LSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTEpfWBcbiAgfVxuXG4gIC8vIFx1NjgzQ1x1NUYwRlx1NTMxNlx1NjVFNVx1NjcxRlxuICBwcml2YXRlIGZvcm1hdERhdGUoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKVxuICAgIGNvbnN0IG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJylcbiAgICBjb25zdCBkYXkgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJylcbiAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YFxuICB9XG5cbiAgLy8gXHU4M0I3XHU1M0Q2XHU2NjFGXHU2NzFGXHU1MUUwXG4gIHByaXZhdGUgZ2V0V2Vla2RheShkYXRlOiBEYXRlKTogc3RyaW5nIHtcbiAgICBjb25zdCB3ZWVrZGF5cyA9IFsnXHU1NDY4XHU2NUU1JywgJ1x1NTQ2OFx1NEUwMCcsICdcdTU0NjhcdTRFOEMnLCAnXHU1NDY4XHU0RTA5JywgJ1x1NTQ2OFx1NTZEQicsICdcdTU0NjhcdTRFOTQnLCAnXHU1NDY4XHU1MTZEJ11cbiAgICByZXR1cm4gd2Vla2RheXNbZGF0ZS5nZXREYXkoKV1cbiAgfVxuXG4gIC8vIFx1NjU3MFx1NUI1N1x1OEY2Q1x1NEUyRFx1NjU4N1xuICBwcml2YXRlIG51bWJlclRvQ2hpbmVzZShudW06IG51bWJlcik6IHN0cmluZyB7XG4gICAgY29uc3QgY2hpbmVzZSA9IFsnXHU0RTAwJywgJ1x1NEU4QycsICdcdTRFMDknLCAnXHU1NkRCJywgJ1x1NEU5NCcsICdcdTUxNkQnLCAnXHU0RTAzJywgJ1x1NTE2QiddXG4gICAgcmV0dXJuIGNoaW5lc2VbbnVtIC0gMV0gfHwgbnVtLnRvU3RyaW5nKClcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwibW9kYWxcIixcbiAgICBcIm92ZXJsYXlcIixcbiAgICBcImZsaWdodFByZWZlcmVuY2VUYWJcIixcbiAgICBcImFpcmxpbmVDb21wYW55VGFiXCIsXG4gICAgXCJhaXJwb3J0VGFiXCIsXG4gICAgXCJkZXBhcnR1cmVUaW1lVGFiXCIsXG4gICAgXCJ0cmFuc2ZlckNpdHlUYWJcIixcbiAgICBcInRyYW5zZmVyVGltZXNUYWJcIixcbiAgICBcInRyYW5zZmVyRHVyYXRpb25UYWJcIixcbiAgICBcInRvdGFsRHVyYXRpb25UYWJcIixcbiAgICBcInNlYXRDbGFzc1RhYlwiLFxuICAgIFwiYWlyY3JhZnRNb2RlbFRhYlwiLFxuICAgIFwidGlja2V0Q2FuY2VsbGF0aW9uVGFiXCIsXG4gICAgXCJmbGlnaHRQcmVmZXJlbmNlU2VjdGlvblwiLFxuICAgIFwiYWlybGluZUNvbXBhbnlTZWN0aW9uXCIsXG4gICAgXCJhaXJwb3J0U2VjdGlvblwiLFxuICAgIFwiZGVwYXJ0dXJlVGltZVNlY3Rpb25cIixcbiAgICBcInRyYW5zZmVyQ2l0eVNlY3Rpb25cIixcbiAgICBcInRyYW5zZmVyVGltZXNTZWN0aW9uXCIsXG4gICAgXCJ0cmFuc2ZlckR1cmF0aW9uU2VjdGlvblwiLFxuICAgIFwidG90YWxEdXJhdGlvblNlY3Rpb25cIixcbiAgICBcInNlYXRDbGFzc1NlY3Rpb25cIixcbiAgICBcImFpcmNyYWZ0TW9kZWxTZWN0aW9uXCIsXG4gICAgXCJ0aWNrZXRDYW5jZWxsYXRpb25TZWN0aW9uXCIsXG4gICAgXCJyZXN1bHRDb3VudFwiLFxuICAgIFwiZGlyZWN0RmxpZ2h0Q2hlY2tib3hcIixcbiAgICBcIm5vVHJhbnNpdENoZWNrYm94XCIsXG4gICAgXCJpbmNsdWRlQ2hlY2tlZEx1Z2dhZ2VDaGVja2JveFwiLFxuICAgIFwibm9TaGFyZWRGbGlnaHRDaGVja2JveFwiLFxuICAgIFwiZGlzY291bnRQcmljZUNoZWNrYm94XCIsXG4gICAgXCJyZXNldEJ1dHRvblwiLFxuICAgIFwiY29uZmlybUJ1dHRvblwiLFxuICAgIFwiZmlsdGVyQmFkZ2VcIixcbiAgICBcInNlbGVjdGVkRmlsdGVyc0NvbnRhaW5lclwiLFxuICAgIFwic2VsZWN0ZWRGaWx0ZXJzTGlzdFwiLFxuICAgIC8vIENhcmQgdGFyZ2V0cyBmb3IgZ3JpZCBsYXlvdXRcbiAgICBcImRpcmVjdEZsaWdodENhcmRcIixcbiAgICBcImNoZWNrZWRMdWdnYWdlQ2FyZFwiLFxuICAgIFwibm9TaGFyZWRGbGlnaHRDYXJkXCIsXG4gICAgXCJub1RyYW5zaXRDYXJkXCIsXG4gICAgXCJkaXNjb3VudFByaWNlQ2FyZFwiLFxuICAgIC8vIFF1aWNrIGZpbHRlciBidXR0b24gdGFyZ2V0c1xuICAgIFwicXVpY2tEaXJlY3RGbGlnaHRcIixcbiAgICBcInF1aWNrTm9TaGFyZWRGbGlnaHRcIixcbiAgICBcInF1aWNrQ2hlY2tlZEx1Z2dhZ2VcIixcbiAgICBcInF1aWNrTm9UcmFuc2l0XCIsXG4gICAgXCJxdWlja0Rpc2NvdW50UHJpY2VcIlxuICBdXG5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBvdmVybGF5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGZsaWdodFByZWZlcmVuY2VUYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgYWlybGluZUNvbXBhbnlUYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgYWlycG9ydFRhYlRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkZXBhcnR1cmVUaW1lVGFiVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRyYW5zZmVyQ2l0eVRhYlRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0cmFuc2ZlclRpbWVzVGFiVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRyYW5zZmVyRHVyYXRpb25UYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdG90YWxEdXJhdGlvblRhYlRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzZWF0Q2xhc3NUYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgYWlyY3JhZnRNb2RlbFRhYlRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0aWNrZXRDYW5jZWxsYXRpb25UYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZmxpZ2h0UHJlZmVyZW5jZVNlY3Rpb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgYWlybGluZUNvbXBhbnlTZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGFpcnBvcnRTZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRlcGFydHVyZVRpbWVTZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRyYW5zZmVyQ2l0eVNlY3Rpb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdHJhbnNmZXJUaW1lc1NlY3Rpb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdHJhbnNmZXJEdXJhdGlvblNlY3Rpb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdG90YWxEdXJhdGlvblNlY3Rpb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VhdENsYXNzU2VjdGlvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBhaXJjcmFmdE1vZGVsU2VjdGlvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0aWNrZXRDYW5jZWxsYXRpb25TZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHJlc3VsdENvdW50VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRpcmVjdEZsaWdodENoZWNrYm94VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbm9UcmFuc2l0Q2hlY2tib3hUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBpbmNsdWRlQ2hlY2tlZEx1Z2dhZ2VDaGVja2JveFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IG5vU2hhcmVkRmxpZ2h0Q2hlY2tib3hUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkaXNjb3VudFByaWNlQ2hlY2tib3hUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSByZXNldEJ1dHRvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjb25maXJtQnV0dG9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGZpbHRlckJhZGdlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlbGVjdGVkRmlsdGVyc0NvbnRhaW5lclRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzZWxlY3RlZEZpbHRlcnNMaXN0VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRpcmVjdEZsaWdodENhcmRUYXJnZXQ/OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNoZWNrZWRMdWdnYWdlQ2FyZFRhcmdldD86IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbm9TaGFyZWRGbGlnaHRDYXJkVGFyZ2V0PzogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBub1RyYW5zaXRDYXJkVGFyZ2V0PzogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkaXNjb3VudFByaWNlQ2FyZFRhcmdldD86IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgcXVpY2tEaXJlY3RGbGlnaHRUYXJnZXQ/OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHF1aWNrTm9TaGFyZWRGbGlnaHRUYXJnZXQ/OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHF1aWNrQ2hlY2tlZEx1Z2dhZ2VUYXJnZXQ/OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHF1aWNrTm9UcmFuc2l0VGFyZ2V0PzogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBxdWlja0Rpc2NvdW50UHJpY2VUYXJnZXQ/OiBIVE1MRWxlbWVudFxuXG4gIGRlY2xhcmUgY3VycmVudFRhYjogc3RyaW5nXG4gIGRlY2xhcmUgZmlsdGVyczoge1xuICAgIGRpcmVjdEZsaWdodDogYm9vbGVhblxuICAgIG5vVHJhbnNpdDogYm9vbGVhblxuICAgIGluY2x1ZGVDaGVja2VkTHVnZ2FnZTogYm9vbGVhblxuICAgIG5vU2hhcmVkRmxpZ2h0OiBib29sZWFuXG4gICAgZGlzY291bnRQcmljZTogYm9vbGVhblxuICAgIGFpcmxpbmVzOiBTZXQ8c3RyaW5nPlxuICAgIGRlcGFydHVyZUFpcnBvcnRzOiBTZXQ8c3RyaW5nPlxuICAgIGFycml2YWxBaXJwb3J0czogU2V0PHN0cmluZz5cbiAgICBkZXBhcnR1cmVUaW1lUmFuZ2VzOiBTZXQ8c3RyaW5nPlxuICAgIGFpcmNyYWZ0TW9kZWxzOiBTZXQ8c3RyaW5nPlxuICB9XG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkZsaWdodEZpbHRlciBjb250cm9sbGVyIGNvbm5lY3RlZFwiKVxuICAgIHRoaXMuY3VycmVudFRhYiA9IFwiZmxpZ2h0UHJlZmVyZW5jZVwiXG4gICAgdGhpcy5pbml0aWFsaXplRmlsdGVycygpXG4gIH1cblxuICBpbml0aWFsaXplRmlsdGVycygpOiB2b2lkIHtcbiAgICB0aGlzLmZpbHRlcnMgPSB7XG4gICAgICBkaXJlY3RGbGlnaHQ6IGZhbHNlLFxuICAgICAgbm9UcmFuc2l0OiBmYWxzZSxcbiAgICAgIGluY2x1ZGVDaGVja2VkTHVnZ2FnZTogZmFsc2UsXG4gICAgICBub1NoYXJlZEZsaWdodDogZmFsc2UsXG4gICAgICBkaXNjb3VudFByaWNlOiBmYWxzZSxcbiAgICAgIGFpcmxpbmVzOiBuZXcgU2V0KCksXG4gICAgICBkZXBhcnR1cmVBaXJwb3J0czogbmV3IFNldCgpLFxuICAgICAgYXJyaXZhbEFpcnBvcnRzOiBuZXcgU2V0KCksXG4gICAgICBkZXBhcnR1cmVUaW1lUmFuZ2VzOiBuZXcgU2V0KCksXG4gICAgICBhaXJjcmFmdE1vZGVsczogbmV3IFNldCgpXG4gICAgfVxuICB9XG5cbiAgb3Blbk1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgIHRoaXMub3ZlcmxheVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCJcbiAgfVxuXG4gIGNsb3NlTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgdGhpcy5vdmVybGF5VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJcIlxuICB9XG5cbiAgc2VsZWN0VGFiKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCB0YWJOYW1lID0gYnV0dG9uLmRhdGFzZXQudGFiXG4gICAgaWYgKCF0YWJOYW1lKSByZXR1cm5cblxuICAgIHRoaXMuY3VycmVudFRhYiA9IHRhYk5hbWVcblxuICAgIC8vIFVwZGF0ZSB0YWIgYnV0dG9uc1xuICAgIGNvbnN0IGFsbFRhYnMgPSBbXG4gICAgICB0aGlzLmZsaWdodFByZWZlcmVuY2VUYWJUYXJnZXQsXG4gICAgICB0aGlzLmFpcmxpbmVDb21wYW55VGFiVGFyZ2V0LFxuICAgICAgdGhpcy5haXJwb3J0VGFiVGFyZ2V0LFxuICAgICAgdGhpcy5kZXBhcnR1cmVUaW1lVGFiVGFyZ2V0LFxuICAgICAgdGhpcy50cmFuc2ZlckNpdHlUYWJUYXJnZXQsXG4gICAgICB0aGlzLnRyYW5zZmVyVGltZXNUYWJUYXJnZXQsXG4gICAgICB0aGlzLnRyYW5zZmVyRHVyYXRpb25UYWJUYXJnZXQsXG4gICAgICB0aGlzLnRvdGFsRHVyYXRpb25UYWJUYXJnZXQsXG4gICAgICB0aGlzLnNlYXRDbGFzc1RhYlRhcmdldCxcbiAgICAgIHRoaXMuYWlyY3JhZnRNb2RlbFRhYlRhcmdldCxcbiAgICAgIHRoaXMudGlja2V0Q2FuY2VsbGF0aW9uVGFiVGFyZ2V0XG4gICAgXVxuXG4gICAgYWxsVGFicy5mb3JFYWNoKHRhYiA9PiB7XG4gICAgICB0YWIuY2xhc3NMaXN0LnJlbW92ZShcImJvcmRlci1ibHVlLTUwMFwiLCBcInRleHQtYmx1ZS02MDBcIiwgXCJmb250LWJvbGRcIilcbiAgICAgIHRhYi5jbGFzc0xpc3QuYWRkKFwidGV4dC1ncmF5LTYwMFwiKVxuICAgIH0pXG5cbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZChcImJvcmRlci1ibHVlLTUwMFwiLCBcInRleHQtYmx1ZS02MDBcIiwgXCJmb250LWJvbGRcIilcbiAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcInRleHQtZ3JheS02MDBcIilcblxuICAgIC8vIFVwZGF0ZSBzZWN0aW9uc1xuICAgIGNvbnN0IGFsbFNlY3Rpb25zID0gW1xuICAgICAgdGhpcy5mbGlnaHRQcmVmZXJlbmNlU2VjdGlvblRhcmdldCxcbiAgICAgIHRoaXMuYWlybGluZUNvbXBhbnlTZWN0aW9uVGFyZ2V0LFxuICAgICAgdGhpcy5haXJwb3J0U2VjdGlvblRhcmdldCxcbiAgICAgIHRoaXMuZGVwYXJ0dXJlVGltZVNlY3Rpb25UYXJnZXQsXG4gICAgICB0aGlzLnRyYW5zZmVyQ2l0eVNlY3Rpb25UYXJnZXQsXG4gICAgICB0aGlzLnRyYW5zZmVyVGltZXNTZWN0aW9uVGFyZ2V0LFxuICAgICAgdGhpcy50cmFuc2ZlckR1cmF0aW9uU2VjdGlvblRhcmdldCxcbiAgICAgIHRoaXMudG90YWxEdXJhdGlvblNlY3Rpb25UYXJnZXQsXG4gICAgICB0aGlzLnNlYXRDbGFzc1NlY3Rpb25UYXJnZXQsXG4gICAgICB0aGlzLmFpcmNyYWZ0TW9kZWxTZWN0aW9uVGFyZ2V0LFxuICAgICAgdGhpcy50aWNrZXRDYW5jZWxsYXRpb25TZWN0aW9uVGFyZ2V0XG4gICAgXVxuXG4gICAgYWxsU2VjdGlvbnMuZm9yRWFjaChzZWN0aW9uID0+IHNlY3Rpb24uY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKSlcblxuICAgIGNvbnN0IHNlY3Rpb25NYXA6IHsgW2tleTogc3RyaW5nXTogSFRNTEVsZW1lbnQgfSA9IHtcbiAgICAgIGZsaWdodFByZWZlcmVuY2U6IHRoaXMuZmxpZ2h0UHJlZmVyZW5jZVNlY3Rpb25UYXJnZXQsXG4gICAgICBhaXJsaW5lQ29tcGFueTogdGhpcy5haXJsaW5lQ29tcGFueVNlY3Rpb25UYXJnZXQsXG4gICAgICBhaXJwb3J0OiB0aGlzLmFpcnBvcnRTZWN0aW9uVGFyZ2V0LFxuICAgICAgZGVwYXJ0dXJlVGltZTogdGhpcy5kZXBhcnR1cmVUaW1lU2VjdGlvblRhcmdldCxcbiAgICAgIHRyYW5zZmVyQ2l0eTogdGhpcy50cmFuc2ZlckNpdHlTZWN0aW9uVGFyZ2V0LFxuICAgICAgdHJhbnNmZXJUaW1lczogdGhpcy50cmFuc2ZlclRpbWVzU2VjdGlvblRhcmdldCxcbiAgICAgIHRyYW5zZmVyRHVyYXRpb246IHRoaXMudHJhbnNmZXJEdXJhdGlvblNlY3Rpb25UYXJnZXQsXG4gICAgICB0b3RhbER1cmF0aW9uOiB0aGlzLnRvdGFsRHVyYXRpb25TZWN0aW9uVGFyZ2V0LFxuICAgICAgc2VhdENsYXNzOiB0aGlzLnNlYXRDbGFzc1NlY3Rpb25UYXJnZXQsXG4gICAgICBhaXJjcmFmdE1vZGVsOiB0aGlzLmFpcmNyYWZ0TW9kZWxTZWN0aW9uVGFyZ2V0LFxuICAgICAgdGlja2V0Q2FuY2VsbGF0aW9uOiB0aGlzLnRpY2tldENhbmNlbGxhdGlvblNlY3Rpb25UYXJnZXRcbiAgICB9XG5cbiAgICBjb25zdCB0YXJnZXRTZWN0aW9uID0gc2VjdGlvbk1hcFt0YWJOYW1lXVxuICAgIGlmICh0YXJnZXRTZWN0aW9uKSB7XG4gICAgICB0YXJnZXRTZWN0aW9uLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICB9XG4gIH1cblxuICAvLyBGbGlnaHQgcHJlZmVyZW5jZSB0b2dnbGVzXG4gIHRvZ2dsZURpcmVjdEZsaWdodCgpOiB2b2lkIHtcbiAgICAvLyBUb2dnbGUgY2hlY2tib3ggc3RhdGVcbiAgICB0aGlzLmRpcmVjdEZsaWdodENoZWNrYm94VGFyZ2V0LmNoZWNrZWQgPSAhdGhpcy5kaXJlY3RGbGlnaHRDaGVja2JveFRhcmdldC5jaGVja2VkXG4gICAgdGhpcy5maWx0ZXJzLmRpcmVjdEZsaWdodCA9IHRoaXMuZGlyZWN0RmxpZ2h0Q2hlY2tib3hUYXJnZXQuY2hlY2tlZFxuICAgIFxuICAgIC8vIFVwZGF0ZSBjYXJkIHN0eWxlXG4gICAgaWYgKHRoaXMuZGlyZWN0RmxpZ2h0Q2FyZFRhcmdldCkge1xuICAgICAgaWYgKHRoaXMuZmlsdGVycy5kaXJlY3RGbGlnaHQpIHtcbiAgICAgICAgdGhpcy5kaXJlY3RGbGlnaHRDYXJkVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI2Y2ZjdmOV1cIilcbiAgICAgICAgdGhpcy5kaXJlY3RGbGlnaHRDYXJkVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy1bI2ZmZjllNl1cIiwgXCJib3JkZXItWzAuNXB4XVwiLCBcImJvcmRlci1bI2ZmZGE4MF1cIilcbiAgICAgICAgLy8gQWRkIGNoZWNrbWFya1xuICAgICAgICBpZiAoIXRoaXMuZGlyZWN0RmxpZ2h0Q2FyZFRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbWFya1wiKSkge1xuICAgICAgICAgIGNvbnN0IGNoZWNrbWFyayA9IHRoaXMuY3JlYXRlQ2hlY2ttYXJrKClcbiAgICAgICAgICB0aGlzLmRpcmVjdEZsaWdodENhcmRUYXJnZXQuYXBwZW5kQ2hpbGQoY2hlY2ttYXJrKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRpcmVjdEZsaWdodENhcmRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLVsjZjZmN2Y5XVwiKVxuICAgICAgICB0aGlzLmRpcmVjdEZsaWdodENhcmRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLVsjZmZmOWU2XVwiLCBcImJvcmRlci1bMC41cHhdXCIsIFwiYm9yZGVyLVsjZmZkYTgwXVwiKVxuICAgICAgICAvLyBSZW1vdmUgY2hlY2ttYXJrXG4gICAgICAgIGNvbnN0IGNoZWNrbWFyayA9IHRoaXMuZGlyZWN0RmxpZ2h0Q2FyZFRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbWFya1wiKVxuICAgICAgICBpZiAoY2hlY2ttYXJrKSBjaGVja21hcmsucmVtb3ZlKClcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gU3luYyB3aXRoIHF1aWNrIGZpbHRlciBidXR0b24gaWYgZXhpc3RzXG4gICAgaWYgKHRoaXMucXVpY2tEaXJlY3RGbGlnaHRUYXJnZXQpIHtcbiAgICAgIGlmICh0aGlzLmZpbHRlcnMuZGlyZWN0RmxpZ2h0KSB7XG4gICAgICAgIHRoaXMucXVpY2tEaXJlY3RGbGlnaHRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgICB0aGlzLnF1aWNrRGlyZWN0RmxpZ2h0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucXVpY2tEaXJlY3RGbGlnaHRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgICB0aGlzLnF1aWNrRGlyZWN0RmxpZ2h0VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy51cGRhdGVSZXN1bHRDb3VudCgpXG4gIH1cblxuICB0b2dnbGVOb1RyYW5zaXQoKTogdm9pZCB7XG4gICAgLy8gVG9nZ2xlIGNoZWNrYm94IHN0YXRlXG4gICAgdGhpcy5ub1RyYW5zaXRDaGVja2JveFRhcmdldC5jaGVja2VkID0gIXRoaXMubm9UcmFuc2l0Q2hlY2tib3hUYXJnZXQuY2hlY2tlZFxuICAgIHRoaXMuZmlsdGVycy5ub1RyYW5zaXQgPSB0aGlzLm5vVHJhbnNpdENoZWNrYm94VGFyZ2V0LmNoZWNrZWRcbiAgICBcbiAgICAvLyBVcGRhdGUgY2FyZCBzdHlsZVxuICAgIGlmICh0aGlzLm5vVHJhbnNpdENhcmRUYXJnZXQpIHtcbiAgICAgIGlmICh0aGlzLmZpbHRlcnMubm9UcmFuc2l0KSB7XG4gICAgICAgIHRoaXMubm9UcmFuc2l0Q2FyZFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNmNmY3ZjldXCIpXG4gICAgICAgIHRoaXMubm9UcmFuc2l0Q2FyZFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNmZmY5ZTZdXCIsIFwiYm9yZGVyLVswLjVweF1cIiwgXCJib3JkZXItWyNmZmRhODBdXCIpXG4gICAgICAgIC8vIEFkZCBjaGVja21hcmtcbiAgICAgICAgaWYgKCF0aGlzLm5vVHJhbnNpdENhcmRUYXJnZXQucXVlcnlTZWxlY3RvcihcIi5jaGVja21hcmtcIikpIHtcbiAgICAgICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLmNyZWF0ZUNoZWNrbWFyaygpXG4gICAgICAgICAgdGhpcy5ub1RyYW5zaXRDYXJkVGFyZ2V0LmFwcGVuZENoaWxkKGNoZWNrbWFyaylcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5ub1RyYW5zaXRDYXJkVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy1bI2Y2ZjdmOV1cIilcbiAgICAgICAgdGhpcy5ub1RyYW5zaXRDYXJkVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI2ZmZjllNl1cIiwgXCJib3JkZXItWzAuNXB4XVwiLCBcImJvcmRlci1bI2ZmZGE4MF1cIilcbiAgICAgICAgLy8gUmVtb3ZlIGNoZWNrbWFya1xuICAgICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLm5vVHJhbnNpdENhcmRUYXJnZXQucXVlcnlTZWxlY3RvcihcIi5jaGVja21hcmtcIilcbiAgICAgICAgaWYgKGNoZWNrbWFyaykgY2hlY2ttYXJrLnJlbW92ZSgpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFN5bmMgd2l0aCBxdWljayBmaWx0ZXIgYnV0dG9uIGlmIGV4aXN0c1xuICAgIGlmICh0aGlzLnF1aWNrTm9UcmFuc2l0VGFyZ2V0KSB7XG4gICAgICBpZiAodGhpcy5maWx0ZXJzLm5vVHJhbnNpdCkge1xuICAgICAgICB0aGlzLnF1aWNrTm9UcmFuc2l0VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgICAgdGhpcy5xdWlja05vVHJhbnNpdFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnF1aWNrTm9UcmFuc2l0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgICAgdGhpcy5xdWlja05vVHJhbnNpdFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMudXBkYXRlUmVzdWx0Q291bnQoKVxuICB9XG5cbiAgdG9nZ2xlQ2hlY2tlZEx1Z2dhZ2UoKTogdm9pZCB7XG4gICAgLy8gVG9nZ2xlIGNoZWNrYm94IHN0YXRlXG4gICAgdGhpcy5pbmNsdWRlQ2hlY2tlZEx1Z2dhZ2VDaGVja2JveFRhcmdldC5jaGVja2VkID0gIXRoaXMuaW5jbHVkZUNoZWNrZWRMdWdnYWdlQ2hlY2tib3hUYXJnZXQuY2hlY2tlZFxuICAgIHRoaXMuZmlsdGVycy5pbmNsdWRlQ2hlY2tlZEx1Z2dhZ2UgPSB0aGlzLmluY2x1ZGVDaGVja2VkTHVnZ2FnZUNoZWNrYm94VGFyZ2V0LmNoZWNrZWRcbiAgICBcbiAgICAvLyBVcGRhdGUgY2FyZCBzdHlsZVxuICAgIGlmICh0aGlzLmNoZWNrZWRMdWdnYWdlQ2FyZFRhcmdldCkge1xuICAgICAgaWYgKHRoaXMuZmlsdGVycy5pbmNsdWRlQ2hlY2tlZEx1Z2dhZ2UpIHtcbiAgICAgICAgdGhpcy5jaGVja2VkTHVnZ2FnZUNhcmRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLVsjZjZmN2Y5XVwiKVxuICAgICAgICB0aGlzLmNoZWNrZWRMdWdnYWdlQ2FyZFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNmZmY5ZTZdXCIsIFwiYm9yZGVyLVswLjVweF1cIiwgXCJib3JkZXItWyNmZmRhODBdXCIpXG4gICAgICAgIC8vIEFkZCBjaGVja21hcmtcbiAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWRMdWdnYWdlQ2FyZFRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbWFya1wiKSkge1xuICAgICAgICAgIGNvbnN0IGNoZWNrbWFyayA9IHRoaXMuY3JlYXRlQ2hlY2ttYXJrKClcbiAgICAgICAgICB0aGlzLmNoZWNrZWRMdWdnYWdlQ2FyZFRhcmdldC5hcHBlbmRDaGlsZChjaGVja21hcmspXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY2hlY2tlZEx1Z2dhZ2VDYXJkVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy1bI2Y2ZjdmOV1cIilcbiAgICAgICAgdGhpcy5jaGVja2VkTHVnZ2FnZUNhcmRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLVsjZmZmOWU2XVwiLCBcImJvcmRlci1bMC41cHhdXCIsIFwiYm9yZGVyLVsjZmZkYTgwXVwiKVxuICAgICAgICAvLyBSZW1vdmUgY2hlY2ttYXJrXG4gICAgICAgIGNvbnN0IGNoZWNrbWFyayA9IHRoaXMuY2hlY2tlZEx1Z2dhZ2VDYXJkVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrXCIpXG4gICAgICAgIGlmIChjaGVja21hcmspIGNoZWNrbWFyay5yZW1vdmUoKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBTeW5jIHdpdGggcXVpY2sgZmlsdGVyIGJ1dHRvbiBpZiBleGlzdHNcbiAgICBpZiAodGhpcy5xdWlja0NoZWNrZWRMdWdnYWdlVGFyZ2V0KSB7XG4gICAgICBpZiAodGhpcy5maWx0ZXJzLmluY2x1ZGVDaGVja2VkTHVnZ2FnZSkge1xuICAgICAgICB0aGlzLnF1aWNrQ2hlY2tlZEx1Z2dhZ2VUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgICB0aGlzLnF1aWNrQ2hlY2tlZEx1Z2dhZ2VUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5xdWlja0NoZWNrZWRMdWdnYWdlVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgICAgdGhpcy5xdWlja0NoZWNrZWRMdWdnYWdlVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy51cGRhdGVSZXN1bHRDb3VudCgpXG4gIH1cblxuICB0b2dnbGVOb1NoYXJlZEZsaWdodCgpOiB2b2lkIHtcbiAgICAvLyBUb2dnbGUgY2hlY2tib3ggc3RhdGVcbiAgICB0aGlzLm5vU2hhcmVkRmxpZ2h0Q2hlY2tib3hUYXJnZXQuY2hlY2tlZCA9ICF0aGlzLm5vU2hhcmVkRmxpZ2h0Q2hlY2tib3hUYXJnZXQuY2hlY2tlZFxuICAgIHRoaXMuZmlsdGVycy5ub1NoYXJlZEZsaWdodCA9IHRoaXMubm9TaGFyZWRGbGlnaHRDaGVja2JveFRhcmdldC5jaGVja2VkXG4gICAgXG4gICAgLy8gVXBkYXRlIGNhcmQgc3R5bGVcbiAgICBpZiAodGhpcy5ub1NoYXJlZEZsaWdodENhcmRUYXJnZXQpIHtcbiAgICAgIGlmICh0aGlzLmZpbHRlcnMubm9TaGFyZWRGbGlnaHQpIHtcbiAgICAgICAgdGhpcy5ub1NoYXJlZEZsaWdodENhcmRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLVsjZjZmN2Y5XVwiKVxuICAgICAgICB0aGlzLm5vU2hhcmVkRmxpZ2h0Q2FyZFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNmZmY5ZTZdXCIsIFwiYm9yZGVyLVswLjVweF1cIiwgXCJib3JkZXItWyNmZmRhODBdXCIpXG4gICAgICAgIC8vIEFkZCBjaGVja21hcmtcbiAgICAgICAgaWYgKCF0aGlzLm5vU2hhcmVkRmxpZ2h0Q2FyZFRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbWFya1wiKSkge1xuICAgICAgICAgIGNvbnN0IGNoZWNrbWFyayA9IHRoaXMuY3JlYXRlQ2hlY2ttYXJrKClcbiAgICAgICAgICB0aGlzLm5vU2hhcmVkRmxpZ2h0Q2FyZFRhcmdldC5hcHBlbmRDaGlsZChjaGVja21hcmspXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubm9TaGFyZWRGbGlnaHRDYXJkVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy1bI2Y2ZjdmOV1cIilcbiAgICAgICAgdGhpcy5ub1NoYXJlZEZsaWdodENhcmRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLVsjZmZmOWU2XVwiLCBcImJvcmRlci1bMC41cHhdXCIsIFwiYm9yZGVyLVsjZmZkYTgwXVwiKVxuICAgICAgICAvLyBSZW1vdmUgY2hlY2ttYXJrXG4gICAgICAgIGNvbnN0IGNoZWNrbWFyayA9IHRoaXMubm9TaGFyZWRGbGlnaHRDYXJkVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrXCIpXG4gICAgICAgIGlmIChjaGVja21hcmspIGNoZWNrbWFyay5yZW1vdmUoKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBTeW5jIHdpdGggcXVpY2sgZmlsdGVyIGJ1dHRvbiBpZiBleGlzdHNcbiAgICBpZiAodGhpcy5xdWlja05vU2hhcmVkRmxpZ2h0VGFyZ2V0KSB7XG4gICAgICBpZiAodGhpcy5maWx0ZXJzLm5vU2hhcmVkRmxpZ2h0KSB7XG4gICAgICAgIHRoaXMucXVpY2tOb1NoYXJlZEZsaWdodFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgIHRoaXMucXVpY2tOb1NoYXJlZEZsaWdodFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnF1aWNrTm9TaGFyZWRGbGlnaHRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgICB0aGlzLnF1aWNrTm9TaGFyZWRGbGlnaHRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnVwZGF0ZVJlc3VsdENvdW50KClcbiAgfVxuXG4gIHRvZ2dsZURpc2NvdW50UHJpY2UoKTogdm9pZCB7XG4gICAgLy8gVG9nZ2xlIGNoZWNrYm94IHN0YXRlXG4gICAgdGhpcy5kaXNjb3VudFByaWNlQ2hlY2tib3hUYXJnZXQuY2hlY2tlZCA9ICF0aGlzLmRpc2NvdW50UHJpY2VDaGVja2JveFRhcmdldC5jaGVja2VkXG4gICAgdGhpcy5maWx0ZXJzLmRpc2NvdW50UHJpY2UgPSB0aGlzLmRpc2NvdW50UHJpY2VDaGVja2JveFRhcmdldC5jaGVja2VkXG4gICAgXG4gICAgLy8gVXBkYXRlIGNhcmQgc3R5bGVcbiAgICBpZiAodGhpcy5kaXNjb3VudFByaWNlQ2FyZFRhcmdldCkge1xuICAgICAgaWYgKHRoaXMuZmlsdGVycy5kaXNjb3VudFByaWNlKSB7XG4gICAgICAgIHRoaXMuZGlzY291bnRQcmljZUNhcmRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLVsjZjZmN2Y5XVwiKVxuICAgICAgICB0aGlzLmRpc2NvdW50UHJpY2VDYXJkVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy1bI2ZmZjllNl1cIiwgXCJib3JkZXItWzAuNXB4XVwiLCBcImJvcmRlci1bI2ZmZGE4MF1cIilcbiAgICAgICAgLy8gQWRkIGNoZWNrbWFya1xuICAgICAgICBpZiAoIXRoaXMuZGlzY291bnRQcmljZUNhcmRUYXJnZXQucXVlcnlTZWxlY3RvcihcIi5jaGVja21hcmtcIikpIHtcbiAgICAgICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLmNyZWF0ZUNoZWNrbWFyaygpXG4gICAgICAgICAgdGhpcy5kaXNjb3VudFByaWNlQ2FyZFRhcmdldC5hcHBlbmRDaGlsZChjaGVja21hcmspXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGlzY291bnRQcmljZUNhcmRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLVsjZjZmN2Y5XVwiKVxuICAgICAgICB0aGlzLmRpc2NvdW50UHJpY2VDYXJkVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI2ZmZjllNl1cIiwgXCJib3JkZXItWzAuNXB4XVwiLCBcImJvcmRlci1bI2ZmZGE4MF1cIilcbiAgICAgICAgLy8gUmVtb3ZlIGNoZWNrbWFya1xuICAgICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLmRpc2NvdW50UHJpY2VDYXJkVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrXCIpXG4gICAgICAgIGlmIChjaGVja21hcmspIGNoZWNrbWFyay5yZW1vdmUoKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBTeW5jIHdpdGggcXVpY2sgZmlsdGVyIGJ1dHRvbiBpZiBleGlzdHNcbiAgICBpZiAodGhpcy5xdWlja0Rpc2NvdW50UHJpY2VUYXJnZXQpIHtcbiAgICAgIGlmICh0aGlzLmZpbHRlcnMuZGlzY291bnRQcmljZSkge1xuICAgICAgICB0aGlzLnF1aWNrRGlzY291bnRQcmljZVRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgIHRoaXMucXVpY2tEaXNjb3VudFByaWNlVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucXVpY2tEaXNjb3VudFByaWNlVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgICAgdGhpcy5xdWlja0Rpc2NvdW50UHJpY2VUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnVwZGF0ZVJlc3VsdENvdW50KClcbiAgfVxuXG4gIC8vIFF1aWNrIGZpbHRlciBidXR0b24gYWN0aW9uc1xuICB0b2dnbGVRdWlja0RpcmVjdEZsaWdodCgpOiB2b2lkIHtcbiAgICB0aGlzLmZpbHRlcnMuZGlyZWN0RmxpZ2h0ID0gIXRoaXMuZmlsdGVycy5kaXJlY3RGbGlnaHRcbiAgICB0aGlzLmRpcmVjdEZsaWdodENoZWNrYm94VGFyZ2V0LmNoZWNrZWQgPSB0aGlzLmZpbHRlcnMuZGlyZWN0RmxpZ2h0XG4gICAgXG4gICAgLy8gVXBkYXRlIHF1aWNrIGJ1dHRvbiBzdHlsZVxuICAgIGlmICh0aGlzLnF1aWNrRGlyZWN0RmxpZ2h0VGFyZ2V0KSB7XG4gICAgICBpZiAodGhpcy5maWx0ZXJzLmRpcmVjdEZsaWdodCkge1xuICAgICAgICB0aGlzLnF1aWNrRGlyZWN0RmxpZ2h0VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgICAgdGhpcy5xdWlja0RpcmVjdEZsaWdodFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnF1aWNrRGlyZWN0RmxpZ2h0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgICAgdGhpcy5xdWlja0RpcmVjdEZsaWdodFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMudXBkYXRlUmVzdWx0Q291bnQoKVxuICB9XG5cbiAgdG9nZ2xlUXVpY2tOb1NoYXJlZEZsaWdodCgpOiB2b2lkIHtcbiAgICB0aGlzLmZpbHRlcnMubm9TaGFyZWRGbGlnaHQgPSAhdGhpcy5maWx0ZXJzLm5vU2hhcmVkRmxpZ2h0XG4gICAgdGhpcy5ub1NoYXJlZEZsaWdodENoZWNrYm94VGFyZ2V0LmNoZWNrZWQgPSB0aGlzLmZpbHRlcnMubm9TaGFyZWRGbGlnaHRcbiAgICBcbiAgICAvLyBVcGRhdGUgcXVpY2sgYnV0dG9uIHN0eWxlXG4gICAgaWYgKHRoaXMucXVpY2tOb1NoYXJlZEZsaWdodFRhcmdldCkge1xuICAgICAgaWYgKHRoaXMuZmlsdGVycy5ub1NoYXJlZEZsaWdodCkge1xuICAgICAgICB0aGlzLnF1aWNrTm9TaGFyZWRGbGlnaHRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgICB0aGlzLnF1aWNrTm9TaGFyZWRGbGlnaHRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5xdWlja05vU2hhcmVkRmxpZ2h0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgICAgdGhpcy5xdWlja05vU2hhcmVkRmxpZ2h0VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy51cGRhdGVSZXN1bHRDb3VudCgpXG4gIH1cblxuICB0b2dnbGVRdWlja0NoZWNrZWRMdWdnYWdlKCk6IHZvaWQge1xuICAgIHRoaXMuZmlsdGVycy5pbmNsdWRlQ2hlY2tlZEx1Z2dhZ2UgPSAhdGhpcy5maWx0ZXJzLmluY2x1ZGVDaGVja2VkTHVnZ2FnZVxuICAgIHRoaXMuaW5jbHVkZUNoZWNrZWRMdWdnYWdlQ2hlY2tib3hUYXJnZXQuY2hlY2tlZCA9IHRoaXMuZmlsdGVycy5pbmNsdWRlQ2hlY2tlZEx1Z2dhZ2VcbiAgICBcbiAgICAvLyBVcGRhdGUgcXVpY2sgYnV0dG9uIHN0eWxlXG4gICAgaWYgKHRoaXMucXVpY2tDaGVja2VkTHVnZ2FnZVRhcmdldCkge1xuICAgICAgaWYgKHRoaXMuZmlsdGVycy5pbmNsdWRlQ2hlY2tlZEx1Z2dhZ2UpIHtcbiAgICAgICAgdGhpcy5xdWlja0NoZWNrZWRMdWdnYWdlVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgICAgdGhpcy5xdWlja0NoZWNrZWRMdWdnYWdlVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucXVpY2tDaGVja2VkTHVnZ2FnZVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgIHRoaXMucXVpY2tDaGVja2VkTHVnZ2FnZVRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMudXBkYXRlUmVzdWx0Q291bnQoKVxuICB9XG5cbiAgdG9nZ2xlUXVpY2tOb1RyYW5zaXQoKTogdm9pZCB7XG4gICAgdGhpcy5maWx0ZXJzLm5vVHJhbnNpdCA9ICF0aGlzLmZpbHRlcnMubm9UcmFuc2l0XG4gICAgdGhpcy5ub1RyYW5zaXRDaGVja2JveFRhcmdldC5jaGVja2VkID0gdGhpcy5maWx0ZXJzLm5vVHJhbnNpdFxuICAgIFxuICAgIC8vIFVwZGF0ZSBxdWljayBidXR0b24gc3R5bGVcbiAgICBpZiAodGhpcy5xdWlja05vVHJhbnNpdFRhcmdldCkge1xuICAgICAgaWYgKHRoaXMuZmlsdGVycy5ub1RyYW5zaXQpIHtcbiAgICAgICAgdGhpcy5xdWlja05vVHJhbnNpdFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgIHRoaXMucXVpY2tOb1RyYW5zaXRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5xdWlja05vVHJhbnNpdFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgIHRoaXMucXVpY2tOb1RyYW5zaXRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnVwZGF0ZVJlc3VsdENvdW50KClcbiAgfVxuXG4gIHRvZ2dsZVF1aWNrRGlzY291bnRQcmljZSgpOiB2b2lkIHtcbiAgICB0aGlzLmZpbHRlcnMuZGlzY291bnRQcmljZSA9ICF0aGlzLmZpbHRlcnMuZGlzY291bnRQcmljZVxuICAgIHRoaXMuZGlzY291bnRQcmljZUNoZWNrYm94VGFyZ2V0LmNoZWNrZWQgPSB0aGlzLmZpbHRlcnMuZGlzY291bnRQcmljZVxuICAgIFxuICAgIC8vIFVwZGF0ZSBxdWljayBidXR0b24gc3R5bGVcbiAgICBpZiAodGhpcy5xdWlja0Rpc2NvdW50UHJpY2VUYXJnZXQpIHtcbiAgICAgIGlmICh0aGlzLmZpbHRlcnMuZGlzY291bnRQcmljZSkge1xuICAgICAgICB0aGlzLnF1aWNrRGlzY291bnRQcmljZVRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgIHRoaXMucXVpY2tEaXNjb3VudFByaWNlVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucXVpY2tEaXNjb3VudFByaWNlVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgICAgdGhpcy5xdWlja0Rpc2NvdW50UHJpY2VUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnVwZGF0ZVJlc3VsdENvdW50KClcbiAgfVxuXG4gIC8vIEFpcmxpbmUgc2VsZWN0aW9uXG4gIHRvZ2dsZUFpcmxpbmUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY2hlY2tib3ggPSBldmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IGFpcmxpbmUgPSBjaGVja2JveC52YWx1ZVxuICAgIFxuICAgIGlmIChjaGVja2JveC5jaGVja2VkKSB7XG4gICAgICB0aGlzLmZpbHRlcnMuYWlybGluZXMuYWRkKGFpcmxpbmUpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZmlsdGVycy5haXJsaW5lcy5kZWxldGUoYWlybGluZSlcbiAgICB9XG4gICAgXG4gICAgdGhpcy51cGRhdGVSZXN1bHRDb3VudCgpXG4gIH1cblxuICAvLyBBaXJwb3J0IHNlbGVjdGlvblxuICB0b2dnbGVEZXBhcnR1cmVBaXJwb3J0KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNoZWNrYm94ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBhaXJwb3J0ID0gY2hlY2tib3gudmFsdWVcbiAgICBcbiAgICBpZiAoY2hlY2tib3guY2hlY2tlZCkge1xuICAgICAgdGhpcy5maWx0ZXJzLmRlcGFydHVyZUFpcnBvcnRzLmFkZChhaXJwb3J0KVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZpbHRlcnMuZGVwYXJ0dXJlQWlycG9ydHMuZGVsZXRlKGFpcnBvcnQpXG4gICAgfVxuICAgIFxuICAgIHRoaXMudXBkYXRlUmVzdWx0Q291bnQoKVxuICB9XG5cbiAgdG9nZ2xlQXJyaXZhbEFpcnBvcnQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY2hlY2tib3ggPSBldmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IGFpcnBvcnQgPSBjaGVja2JveC52YWx1ZVxuICAgIFxuICAgIGlmIChjaGVja2JveC5jaGVja2VkKSB7XG4gICAgICB0aGlzLmZpbHRlcnMuYXJyaXZhbEFpcnBvcnRzLmFkZChhaXJwb3J0KVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZpbHRlcnMuYXJyaXZhbEFpcnBvcnRzLmRlbGV0ZShhaXJwb3J0KVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnVwZGF0ZVJlc3VsdENvdW50KClcbiAgfVxuXG4gIC8vIERlcGFydHVyZSB0aW1lIHNlbGVjdGlvblxuICB0b2dnbGVEZXBhcnR1cmVUaW1lKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNoZWNrYm94ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCB0aW1lUmFuZ2UgPSBjaGVja2JveC52YWx1ZVxuICAgIFxuICAgIGlmIChjaGVja2JveC5jaGVja2VkKSB7XG4gICAgICB0aGlzLmZpbHRlcnMuZGVwYXJ0dXJlVGltZVJhbmdlcy5hZGQodGltZVJhbmdlKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZpbHRlcnMuZGVwYXJ0dXJlVGltZVJhbmdlcy5kZWxldGUodGltZVJhbmdlKVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnVwZGF0ZVJlc3VsdENvdW50KClcbiAgfVxuXG4gIC8vIEFpcmNyYWZ0IG1vZGVsIHNlbGVjdGlvblxuICB0b2dnbGVBaXJjcmFmdE1vZGVsKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNoZWNrYm94ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBtb2RlbCA9IGNoZWNrYm94LnZhbHVlXG4gICAgXG4gICAgaWYgKGNoZWNrYm94LmNoZWNrZWQpIHtcbiAgICAgIHRoaXMuZmlsdGVycy5haXJjcmFmdE1vZGVscy5hZGQobW9kZWwpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZmlsdGVycy5haXJjcmFmdE1vZGVscy5kZWxldGUobW9kZWwpXG4gICAgfVxuICAgIFxuICAgIHRoaXMudXBkYXRlUmVzdWx0Q291bnQoKVxuICB9XG5cbiAgLy8gUmVzZXQgYWxsIGZpbHRlcnNcbiAgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5pbml0aWFsaXplRmlsdGVycygpXG4gICAgXG4gICAgLy8gUmVzZXQgYWxsIGNoZWNrYm94ZXNcbiAgICB0aGlzLmRpcmVjdEZsaWdodENoZWNrYm94VGFyZ2V0LmNoZWNrZWQgPSBmYWxzZVxuICAgIHRoaXMubm9UcmFuc2l0Q2hlY2tib3hUYXJnZXQuY2hlY2tlZCA9IGZhbHNlXG4gICAgdGhpcy5pbmNsdWRlQ2hlY2tlZEx1Z2dhZ2VDaGVja2JveFRhcmdldC5jaGVja2VkID0gZmFsc2VcbiAgICB0aGlzLm5vU2hhcmVkRmxpZ2h0Q2hlY2tib3hUYXJnZXQuY2hlY2tlZCA9IGZhbHNlXG4gICAgdGhpcy5kaXNjb3VudFByaWNlQ2hlY2tib3hUYXJnZXQuY2hlY2tlZCA9IGZhbHNlXG4gICAgXG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIGNvbnN0IGFpcmxpbmVDaGVja2JveGVzID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTElucHV0RWxlbWVudD4oJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXVtkYXRhLWZpbHRlci10eXBlPVwiYWlybGluZVwiXScpXG4gICAgYWlybGluZUNoZWNrYm94ZXMuZm9yRWFjaChjYiA9PiBjYi5jaGVja2VkID0gZmFsc2UpXG4gICAgXG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIGNvbnN0IGFpcnBvcnRDaGVja2JveGVzID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTElucHV0RWxlbWVudD4oJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXVtkYXRhLWZpbHRlci10eXBlPVwiYWlycG9ydFwiXScpXG4gICAgYWlycG9ydENoZWNrYm94ZXMuZm9yRWFjaChjYiA9PiBjYi5jaGVja2VkID0gZmFsc2UpXG4gICAgXG4gICAgLy8gc3RpbXVsdXMtdmFsaWRhdG9yOiBkaXNhYmxlLW5leHQtbGluZVxuICAgIGNvbnN0IHRpbWVDaGVja2JveGVzID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTElucHV0RWxlbWVudD4oJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXVtkYXRhLWZpbHRlci10eXBlPVwiZGVwYXJ0dXJlLXRpbWVcIl0nKVxuICAgIHRpbWVDaGVja2JveGVzLmZvckVhY2goY2IgPT4gY2IuY2hlY2tlZCA9IGZhbHNlKVxuICAgIFxuICAgIC8vIHN0aW11bHVzLXZhbGlkYXRvcjogZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBjb25zdCBtb2RlbENoZWNrYm94ZXMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbDxIVE1MSW5wdXRFbGVtZW50PignaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdW2RhdGEtZmlsdGVyLXR5cGU9XCJhaXJjcmFmdC1tb2RlbFwiXScpXG4gICAgbW9kZWxDaGVja2JveGVzLmZvckVhY2goY2IgPT4gY2IuY2hlY2tlZCA9IGZhbHNlKVxuICAgIFxuICAgIC8vIFJlc2V0IHF1aWNrIGZpbHRlciBidXR0b25zXG4gICAgaWYgKHRoaXMucXVpY2tEaXJlY3RGbGlnaHRUYXJnZXQpIHtcbiAgICAgIHRoaXMucXVpY2tEaXJlY3RGbGlnaHRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgdGhpcy5xdWlja0RpcmVjdEZsaWdodFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLnF1aWNrTm9TaGFyZWRGbGlnaHRUYXJnZXQpIHtcbiAgICAgIHRoaXMucXVpY2tOb1NoYXJlZEZsaWdodFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICB0aGlzLnF1aWNrTm9TaGFyZWRGbGlnaHRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5xdWlja0NoZWNrZWRMdWdnYWdlVGFyZ2V0KSB7XG4gICAgICB0aGlzLnF1aWNrQ2hlY2tlZEx1Z2dhZ2VUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgdGhpcy5xdWlja0NoZWNrZWRMdWdnYWdlVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMucXVpY2tOb1RyYW5zaXRUYXJnZXQpIHtcbiAgICAgIHRoaXMucXVpY2tOb1RyYW5zaXRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgdGhpcy5xdWlja05vVHJhbnNpdFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLnF1aWNrRGlzY291bnRQcmljZVRhcmdldCkge1xuICAgICAgdGhpcy5xdWlja0Rpc2NvdW50UHJpY2VUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgdGhpcy5xdWlja0Rpc2NvdW50UHJpY2VUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgIH1cbiAgICBcbiAgICAvLyBSZXNldCBjYXJkIHZpc3VhbCBzdGF0ZXNcbiAgICBpZiAodGhpcy5kaXJlY3RGbGlnaHRDYXJkVGFyZ2V0KSB7XG4gICAgICB0aGlzLmRpcmVjdEZsaWdodENhcmRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLVsjZjZmN2Y5XVwiKVxuICAgICAgdGhpcy5kaXJlY3RGbGlnaHRDYXJkVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI2ZmZjllNl1cIiwgXCJib3JkZXItWzAuNXB4XVwiLCBcImJvcmRlci1bI2ZmZGE4MF1cIilcbiAgICAgIGNvbnN0IGNoZWNrbWFyayA9IHRoaXMuZGlyZWN0RmxpZ2h0Q2FyZFRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbWFya1wiKVxuICAgICAgaWYgKGNoZWNrbWFyaykgY2hlY2ttYXJrLnJlbW92ZSgpXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLm5vU2hhcmVkRmxpZ2h0Q2FyZFRhcmdldCkge1xuICAgICAgdGhpcy5ub1NoYXJlZEZsaWdodENhcmRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLVsjZjZmN2Y5XVwiKVxuICAgICAgdGhpcy5ub1NoYXJlZEZsaWdodENhcmRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLVsjZmZmOWU2XVwiLCBcImJvcmRlci1bMC41cHhdXCIsIFwiYm9yZGVyLVsjZmZkYTgwXVwiKVxuICAgICAgY29uc3QgY2hlY2ttYXJrID0gdGhpcy5ub1NoYXJlZEZsaWdodENhcmRUYXJnZXQucXVlcnlTZWxlY3RvcihcIi5jaGVja21hcmtcIilcbiAgICAgIGlmIChjaGVja21hcmspIGNoZWNrbWFyay5yZW1vdmUoKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5jaGVja2VkTHVnZ2FnZUNhcmRUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2hlY2tlZEx1Z2dhZ2VDYXJkVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy1bI2Y2ZjdmOV1cIilcbiAgICAgIHRoaXMuY2hlY2tlZEx1Z2dhZ2VDYXJkVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI2ZmZjllNl1cIiwgXCJib3JkZXItWzAuNXB4XVwiLCBcImJvcmRlci1bI2ZmZGE4MF1cIilcbiAgICAgIGNvbnN0IGNoZWNrbWFyayA9IHRoaXMuY2hlY2tlZEx1Z2dhZ2VDYXJkVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrXCIpXG4gICAgICBpZiAoY2hlY2ttYXJrKSBjaGVja21hcmsucmVtb3ZlKClcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMubm9UcmFuc2l0Q2FyZFRhcmdldCkge1xuICAgICAgdGhpcy5ub1RyYW5zaXRDYXJkVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy1bI2Y2ZjdmOV1cIilcbiAgICAgIHRoaXMubm9UcmFuc2l0Q2FyZFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNmZmY5ZTZdXCIsIFwiYm9yZGVyLVswLjVweF1cIiwgXCJib3JkZXItWyNmZmRhODBdXCIpXG4gICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLm5vVHJhbnNpdENhcmRUYXJnZXQucXVlcnlTZWxlY3RvcihcIi5jaGVja21hcmtcIilcbiAgICAgIGlmIChjaGVja21hcmspIGNoZWNrbWFyay5yZW1vdmUoKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5kaXNjb3VudFByaWNlQ2FyZFRhcmdldCkge1xuICAgICAgdGhpcy5kaXNjb3VudFByaWNlQ2FyZFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNmNmY3ZjldXCIpXG4gICAgICB0aGlzLmRpc2NvdW50UHJpY2VDYXJkVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI2ZmZjllNl1cIiwgXCJib3JkZXItWzAuNXB4XVwiLCBcImJvcmRlci1bI2ZmZGE4MF1cIilcbiAgICAgIGNvbnN0IGNoZWNrbWFyayA9IHRoaXMuZGlzY291bnRQcmljZUNhcmRUYXJnZXQucXVlcnlTZWxlY3RvcihcIi5jaGVja21hcmtcIilcbiAgICAgIGlmIChjaGVja21hcmspIGNoZWNrbWFyay5yZW1vdmUoKVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnVwZGF0ZVJlc3VsdENvdW50KClcbiAgfVxuXG4gIC8vIEFwcGx5IGZpbHRlcnMgYW5kIGNsb3NlIG1vZGFsXG4gIGNvbmZpcm0oKTogdm9pZCB7XG4gICAgLy8gSW4gYSByZWFsIGFwcGxpY2F0aW9uLCB0aGlzIHdvdWxkIHRyaWdnZXIgZmlsdGVyaW5nIG9mIHRoZSBmbGlnaHQgbGlzdFxuICAgIC8vIEZvciBub3csIHdlIGp1c3QgY2xvc2UgdGhlIG1vZGFsXG4gICAgdGhpcy5jbG9zZU1vZGFsKClcbiAgICBcbiAgICAvLyBEaXNwYXRjaCBjdXN0b20gZXZlbnQgZm9yIG90aGVyIGNvbnRyb2xsZXJzIHRvIGxpc3RlbiB0b1xuICAgIHRoaXMuZWxlbWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnZmlsdGVycy1hcHBsaWVkJywge1xuICAgICAgZGV0YWlsOiB7IGZpbHRlcnM6IHRoaXMuZmlsdGVycyB9LFxuICAgICAgYnViYmxlczogdHJ1ZVxuICAgIH0pKVxuICB9XG5cbiAgLy8gVXBkYXRlIHJlc3VsdCBjb3VudCAocGxhY2Vob2xkZXIgLSBpbiByZWFsIGFwcCB3b3VsZCBjb3VudCBmaWx0ZXJlZCBmbGlnaHRzKVxuICB1cGRhdGVSZXN1bHRDb3VudCgpOiB2b2lkIHtcbiAgICAvLyBNb2NrIGNhbGN1bGF0aW9uIC0gaW4gcmVhbCBhcHAgd291bGQgZmlsdGVyIGFjdHVhbCBmbGlnaHQgZGF0YVxuICAgIGxldCBjb3VudCA9IDY2IC8vIEJhc2UgY291bnQgZnJvbSBzY3JlZW5zaG90XG4gICAgXG4gICAgaWYgKHRoaXMuZmlsdGVycy5kaXJlY3RGbGlnaHQpIGNvdW50ID0gTWF0aC5mbG9vcihjb3VudCAqIDAuNylcbiAgICBpZiAodGhpcy5maWx0ZXJzLm5vVHJhbnNpdCkgY291bnQgPSBNYXRoLmZsb29yKGNvdW50ICogMC44KVxuICAgIGlmICh0aGlzLmZpbHRlcnMuYWlybGluZXMuc2l6ZSA+IDApIGNvdW50ID0gTWF0aC5mbG9vcihjb3VudCAqIDAuNilcbiAgICBpZiAodGhpcy5maWx0ZXJzLmRlcGFydHVyZUFpcnBvcnRzLnNpemUgPiAwKSBjb3VudCA9IE1hdGguZmxvb3IoY291bnQgKiAwLjcpXG4gICAgaWYgKHRoaXMuZmlsdGVycy5hcnJpdmFsQWlycG9ydHMuc2l6ZSA+IDApIGNvdW50ID0gTWF0aC5mbG9vcihjb3VudCAqIDAuNylcbiAgICBpZiAodGhpcy5maWx0ZXJzLmRlcGFydHVyZVRpbWVSYW5nZXMuc2l6ZSA+IDApIGNvdW50ID0gTWF0aC5mbG9vcihjb3VudCAqIDAuNSlcbiAgICBpZiAodGhpcy5maWx0ZXJzLmFpcmNyYWZ0TW9kZWxzLnNpemUgPiAwKSBjb3VudCA9IE1hdGguZmxvb3IoY291bnQgKiAwLjYpXG4gICAgXG4gICAgdGhpcy5yZXN1bHRDb3VudFRhcmdldC50ZXh0Q29udGVudCA9IGNvdW50LnRvU3RyaW5nKClcbiAgICBcbiAgICAvLyBVcGRhdGUgZmlsdGVyIGJhZGdlXG4gICAgdGhpcy51cGRhdGVGaWx0ZXJCYWRnZSgpXG4gICAgXG4gICAgLy8gVXBkYXRlIHNlbGVjdGVkIGZpbHRlcnMgZGlzcGxheVxuICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRGaWx0ZXJzRGlzcGxheSgpXG4gIH1cblxuICAvLyBVcGRhdGUgZmlsdGVyIGJhZGdlIGNvdW50XG4gIHVwZGF0ZUZpbHRlckJhZGdlKCk6IHZvaWQge1xuICAgIGxldCBhY3RpdmVGaWx0ZXJDb3VudCA9IDBcbiAgICBcbiAgICAvLyBDb3VudCBib29sZWFuIGZpbHRlcnNcbiAgICBpZiAodGhpcy5maWx0ZXJzLmRpcmVjdEZsaWdodCkgYWN0aXZlRmlsdGVyQ291bnQrK1xuICAgIGlmICh0aGlzLmZpbHRlcnMubm9UcmFuc2l0KSBhY3RpdmVGaWx0ZXJDb3VudCsrXG4gICAgaWYgKHRoaXMuZmlsdGVycy5pbmNsdWRlQ2hlY2tlZEx1Z2dhZ2UpIGFjdGl2ZUZpbHRlckNvdW50KytcbiAgICBpZiAodGhpcy5maWx0ZXJzLm5vU2hhcmVkRmxpZ2h0KSBhY3RpdmVGaWx0ZXJDb3VudCsrXG4gICAgaWYgKHRoaXMuZmlsdGVycy5kaXNjb3VudFByaWNlKSBhY3RpdmVGaWx0ZXJDb3VudCsrXG4gICAgXG4gICAgLy8gQ291bnQgU2V0LWJhc2VkIGZpbHRlcnNcbiAgICBhY3RpdmVGaWx0ZXJDb3VudCArPSB0aGlzLmZpbHRlcnMuYWlybGluZXMuc2l6ZVxuICAgIGFjdGl2ZUZpbHRlckNvdW50ICs9IHRoaXMuZmlsdGVycy5kZXBhcnR1cmVBaXJwb3J0cy5zaXplXG4gICAgYWN0aXZlRmlsdGVyQ291bnQgKz0gdGhpcy5maWx0ZXJzLmFycml2YWxBaXJwb3J0cy5zaXplXG4gICAgYWN0aXZlRmlsdGVyQ291bnQgKz0gdGhpcy5maWx0ZXJzLmRlcGFydHVyZVRpbWVSYW5nZXMuc2l6ZVxuICAgIGFjdGl2ZUZpbHRlckNvdW50ICs9IHRoaXMuZmlsdGVycy5haXJjcmFmdE1vZGVscy5zaXplXG4gICAgXG4gICAgLy8gVXBkYXRlIGJhZGdlIGRpc3BsYXlcbiAgICBpZiAoYWN0aXZlRmlsdGVyQ291bnQgPiAwKSB7XG4gICAgICB0aGlzLmZpbHRlckJhZGdlVGFyZ2V0LnRleHRDb250ZW50ID0gYWN0aXZlRmlsdGVyQ291bnQudG9TdHJpbmcoKVxuICAgICAgdGhpcy5maWx0ZXJCYWRnZVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZmlsdGVyQmFkZ2VUYXJnZXQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgIH1cbiAgfVxuXG4gIC8vIFVwZGF0ZSBzZWxlY3RlZCBmaWx0ZXJzIGRpc3BsYXlcbiAgdXBkYXRlU2VsZWN0ZWRGaWx0ZXJzRGlzcGxheSgpOiB2b2lkIHtcbiAgICBjb25zdCBmaWx0ZXJMYWJlbHM6IHsgdGV4dDogc3RyaW5nOyB0eXBlOiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfVtdID0gW11cbiAgICBcbiAgICAvLyBBZGQgYm9vbGVhbiBmaWx0ZXJzXG4gICAgY29uc3QgZmlsdGVyTmFtZU1hcDogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHtcbiAgICAgIGRpcmVjdEZsaWdodDogXCJcdTUzRUFcdTc3MEJcdTc2RjRcdTk4REVcIixcbiAgICAgIG5vU2hhcmVkRmxpZ2h0OiBcIlx1NEUwRFx1NzcwQlx1NTE3MVx1NEVBQlx1ODIyQVx1NzNFRFwiLFxuICAgICAgaW5jbHVkZUNoZWNrZWRMdWdnYWdlOiBcIlx1NTQyQlx1NjI1OFx1OEZEMFx1ODg0Q1x1Njc0RVx1OTg5RFwiLFxuICAgICAgbm9UcmFuc2l0OiBcIlx1NjVFMFx1OTcwMFx1OEZDN1x1NTg4M1x1N0I3RVwiLFxuICAgICAgZGlzY291bnRQcmljZTogXCJcdTc3MEJcdTRGMThcdTYwRTBcdTUyNERcdTRFRjdcdTY4M0NcIlxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5maWx0ZXJzLmRpcmVjdEZsaWdodCkge1xuICAgICAgZmlsdGVyTGFiZWxzLnB1c2goeyB0ZXh0OiBmaWx0ZXJOYW1lTWFwLmRpcmVjdEZsaWdodCwgdHlwZTogXCJkaXJlY3RGbGlnaHRcIiwgdmFsdWU6IFwiXCIgfSlcbiAgICB9XG4gICAgaWYgKHRoaXMuZmlsdGVycy5ub1NoYXJlZEZsaWdodCkge1xuICAgICAgZmlsdGVyTGFiZWxzLnB1c2goeyB0ZXh0OiBmaWx0ZXJOYW1lTWFwLm5vU2hhcmVkRmxpZ2h0LCB0eXBlOiBcIm5vU2hhcmVkRmxpZ2h0XCIsIHZhbHVlOiBcIlwiIH0pXG4gICAgfVxuICAgIGlmICh0aGlzLmZpbHRlcnMuaW5jbHVkZUNoZWNrZWRMdWdnYWdlKSB7XG4gICAgICBmaWx0ZXJMYWJlbHMucHVzaCh7IHRleHQ6IGZpbHRlck5hbWVNYXAuaW5jbHVkZUNoZWNrZWRMdWdnYWdlLCB0eXBlOiBcImluY2x1ZGVDaGVja2VkTHVnZ2FnZVwiLCB2YWx1ZTogXCJcIiB9KVxuICAgIH1cbiAgICBpZiAodGhpcy5maWx0ZXJzLm5vVHJhbnNpdCkge1xuICAgICAgZmlsdGVyTGFiZWxzLnB1c2goeyB0ZXh0OiBmaWx0ZXJOYW1lTWFwLm5vVHJhbnNpdCwgdHlwZTogXCJub1RyYW5zaXRcIiwgdmFsdWU6IFwiXCIgfSlcbiAgICB9XG4gICAgaWYgKHRoaXMuZmlsdGVycy5kaXNjb3VudFByaWNlKSB7XG4gICAgICBmaWx0ZXJMYWJlbHMucHVzaCh7IHRleHQ6IGZpbHRlck5hbWVNYXAuZGlzY291bnRQcmljZSwgdHlwZTogXCJkaXNjb3VudFByaWNlXCIsIHZhbHVlOiBcIlwiIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIEFkZCBTZXQtYmFzZWQgZmlsdGVyc1xuICAgIHRoaXMuZmlsdGVycy5haXJsaW5lcy5mb3JFYWNoKGFpcmxpbmUgPT4ge1xuICAgICAgZmlsdGVyTGFiZWxzLnB1c2goeyB0ZXh0OiBhaXJsaW5lLCB0eXBlOiBcImFpcmxpbmVcIiwgdmFsdWU6IGFpcmxpbmUgfSlcbiAgICB9KVxuICAgIFxuICAgIHRoaXMuZmlsdGVycy5kZXBhcnR1cmVBaXJwb3J0cy5mb3JFYWNoKGFpcnBvcnQgPT4ge1xuICAgICAgZmlsdGVyTGFiZWxzLnB1c2goeyB0ZXh0OiBhaXJwb3J0LCB0eXBlOiBcImRlcGFydHVyZUFpcnBvcnRcIiwgdmFsdWU6IGFpcnBvcnQgfSlcbiAgICB9KVxuICAgIFxuICAgIHRoaXMuZmlsdGVycy5hcnJpdmFsQWlycG9ydHMuZm9yRWFjaChhaXJwb3J0ID0+IHtcbiAgICAgIGZpbHRlckxhYmVscy5wdXNoKHsgdGV4dDogYWlycG9ydCwgdHlwZTogXCJhcnJpdmFsQWlycG9ydFwiLCB2YWx1ZTogYWlycG9ydCB9KVxuICAgIH0pXG4gICAgXG4gICAgdGhpcy5maWx0ZXJzLmRlcGFydHVyZVRpbWVSYW5nZXMuZm9yRWFjaChyYW5nZSA9PiB7XG4gICAgICBmaWx0ZXJMYWJlbHMucHVzaCh7IHRleHQ6IHJhbmdlLCB0eXBlOiBcImRlcGFydHVyZVRpbWVcIiwgdmFsdWU6IHJhbmdlIH0pXG4gICAgfSlcbiAgICBcbiAgICB0aGlzLmZpbHRlcnMuYWlyY3JhZnRNb2RlbHMuZm9yRWFjaChtb2RlbCA9PiB7XG4gICAgICBmaWx0ZXJMYWJlbHMucHVzaCh7IHRleHQ6IG1vZGVsLCB0eXBlOiBcImFpcmNyYWZ0TW9kZWxcIiwgdmFsdWU6IG1vZGVsIH0pXG4gICAgfSlcbiAgICBcbiAgICAvLyBDbGVhciBleGlzdGluZyBmaWx0ZXIgdGFnc1xuICAgIHRoaXMuc2VsZWN0ZWRGaWx0ZXJzTGlzdFRhcmdldC5pbm5lckhUTUwgPSBcIlwiXG4gICAgXG4gICAgLy8gU2hvdy9oaWRlIGNvbnRhaW5lciBiYXNlZCBvbiB3aGV0aGVyIHRoZXJlIGFyZSBmaWx0ZXJzXG4gICAgaWYgKGZpbHRlckxhYmVscy5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkRmlsdGVyc0NvbnRhaW5lclRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBhbmQgYXBwZW5kIGZpbHRlciB0YWdzXG4gICAgICBmaWx0ZXJMYWJlbHMuZm9yRWFjaChmaWx0ZXIgPT4ge1xuICAgICAgICBjb25zdCB0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpXG4gICAgICAgIHRhZy5jbGFzc05hbWUgPSBcImlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSBweC0yIHB5LTEgYmcteWVsbG93LTEwMCB0ZXh0LXllbGxvdy04MDAgdGV4dC14cyByb3VuZGVkLWZ1bGwgYm9yZGVyIGJvcmRlci15ZWxsb3ctMzAwIGhvdmVyOmJnLXllbGxvdy0yMDBcIlxuICAgICAgICB0YWcuZGF0YXNldC5maWx0ZXJUeXBlID0gZmlsdGVyLnR5cGVcbiAgICAgICAgdGFnLmRhdGFzZXQuZmlsdGVyVmFsdWUgPSBmaWx0ZXIudmFsdWVcbiAgICAgICAgdGFnLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAke2ZpbHRlci50ZXh0fVxuICAgICAgICAgIDxzdmcgY2xhc3M9XCJ3LTMgaC0zXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIj5cbiAgICAgICAgICAgIDxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIlxuICAgICAgICAgICAgICBkPVwiTTQuMjkzIDQuMjkzYTEgMSAwIDAxMS40MTQgMEwxMCA4LjU4Nmw0LjI5My00LjI5M2ExIDEgMCAxMTEuNDE0IDEuNDE0TDExLjQxNCAxMGw0LjI5MyA0LjI5M2ExIDEgMFxuICAgICAgICAgICAgICAgIC0xLjQxNCAxLjQxNEwxMCAxMS40MTRsLTQuMjkzIDQuMjkzYTEgMSAwIDAxLTEuNDE0LTEuNDE0TDguNTg2IDEwIDQuMjkzIDUuNzA3YTEgMSAwIDAxMC0xLjQxNHpcIlxuICAgICAgICAgICAgICBjbGlwLXJ1bGU9XCJldmVub2RkXCIvPlxuICAgICAgICAgIDwvc3ZnPlxuICAgICAgICBgXG4gICAgICAgIHRhZy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5yZW1vdmVGaWx0ZXIoZmlsdGVyLnR5cGUsIGZpbHRlci52YWx1ZSkpXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRGaWx0ZXJzTGlzdFRhcmdldC5hcHBlbmRDaGlsZCh0YWcpXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlbGVjdGVkRmlsdGVyc0NvbnRhaW5lclRhcmdldC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgfVxuICB9XG5cbiAgLy8gUmVtb3ZlIGEgc2luZ2xlIGZpbHRlclxuICByZW1vdmVGaWx0ZXIodHlwZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogdm9pZCB7XG4gICAgc3dpdGNoKHR5cGUpIHtcbiAgICAgIGNhc2UgXCJkaXJlY3RGbGlnaHRcIjpcbiAgICAgICAgdGhpcy5maWx0ZXJzLmRpcmVjdEZsaWdodCA9IGZhbHNlXG4gICAgICAgIHRoaXMuZGlyZWN0RmxpZ2h0Q2hlY2tib3hUYXJnZXQuY2hlY2tlZCA9IGZhbHNlXG4gICAgICAgIGlmICh0aGlzLnF1aWNrRGlyZWN0RmxpZ2h0VGFyZ2V0KSB7XG4gICAgICAgICAgdGhpcy5xdWlja0RpcmVjdEZsaWdodFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgICAgdGhpcy5xdWlja0RpcmVjdEZsaWdodFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGlyZWN0RmxpZ2h0Q2FyZFRhcmdldCkge1xuICAgICAgICAgIHRoaXMuZGlyZWN0RmxpZ2h0Q2FyZFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNmNmY3ZjldXCIpXG4gICAgICAgICAgdGhpcy5kaXJlY3RGbGlnaHRDYXJkVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI2ZmZjllNl1cIiwgXCJib3JkZXItWzAuNXB4XVwiLCBcImJvcmRlci1bI2ZmZGE4MF1cIilcbiAgICAgICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLmRpcmVjdEZsaWdodENhcmRUYXJnZXQucXVlcnlTZWxlY3RvcihcIi5jaGVja21hcmtcIilcbiAgICAgICAgICBpZiAoY2hlY2ttYXJrKSBjaGVja21hcmsucmVtb3ZlKClcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBcIm5vU2hhcmVkRmxpZ2h0XCI6XG4gICAgICAgIHRoaXMuZmlsdGVycy5ub1NoYXJlZEZsaWdodCA9IGZhbHNlXG4gICAgICAgIHRoaXMubm9TaGFyZWRGbGlnaHRDaGVja2JveFRhcmdldC5jaGVja2VkID0gZmFsc2VcbiAgICAgICAgaWYgKHRoaXMucXVpY2tOb1NoYXJlZEZsaWdodFRhcmdldCkge1xuICAgICAgICAgIHRoaXMucXVpY2tOb1NoYXJlZEZsaWdodFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmcteWVsbG93LTEwMFwiLCBcImJvcmRlci15ZWxsb3ctNDAwXCIsIFwidGV4dC15ZWxsb3ctODAwXCIpXG4gICAgICAgICAgdGhpcy5xdWlja05vU2hhcmVkRmxpZ2h0VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItZ3JheS0zMDBcIilcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5ub1NoYXJlZEZsaWdodENhcmRUYXJnZXQpIHtcbiAgICAgICAgICB0aGlzLm5vU2hhcmVkRmxpZ2h0Q2FyZFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNmNmY3ZjldXCIpXG4gICAgICAgICAgdGhpcy5ub1NoYXJlZEZsaWdodENhcmRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLVsjZmZmOWU2XVwiLCBcImJvcmRlci1bMC41cHhdXCIsIFwiYm9yZGVyLVsjZmZkYTgwXVwiKVxuICAgICAgICAgIGNvbnN0IGNoZWNrbWFyayA9IHRoaXMubm9TaGFyZWRGbGlnaHRDYXJkVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrXCIpXG4gICAgICAgICAgaWYgKGNoZWNrbWFyaykgY2hlY2ttYXJrLnJlbW92ZSgpXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgXCJpbmNsdWRlQ2hlY2tlZEx1Z2dhZ2VcIjpcbiAgICAgICAgdGhpcy5maWx0ZXJzLmluY2x1ZGVDaGVja2VkTHVnZ2FnZSA9IGZhbHNlXG4gICAgICAgIHRoaXMuaW5jbHVkZUNoZWNrZWRMdWdnYWdlQ2hlY2tib3hUYXJnZXQuY2hlY2tlZCA9IGZhbHNlXG4gICAgICAgIGlmICh0aGlzLnF1aWNrQ2hlY2tlZEx1Z2dhZ2VUYXJnZXQpIHtcbiAgICAgICAgICB0aGlzLnF1aWNrQ2hlY2tlZEx1Z2dhZ2VUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgICAgIHRoaXMucXVpY2tDaGVja2VkTHVnZ2FnZVRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY2hlY2tlZEx1Z2dhZ2VDYXJkVGFyZ2V0KSB7XG4gICAgICAgICAgdGhpcy5jaGVja2VkTHVnZ2FnZUNhcmRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLVsjZjZmN2Y5XVwiKVxuICAgICAgICAgIHRoaXMuY2hlY2tlZEx1Z2dhZ2VDYXJkVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI2ZmZjllNl1cIiwgXCJib3JkZXItWzAuNXB4XVwiLCBcImJvcmRlci1bI2ZmZGE4MF1cIilcbiAgICAgICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLmNoZWNrZWRMdWdnYWdlQ2FyZFRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbWFya1wiKVxuICAgICAgICAgIGlmIChjaGVja21hcmspIGNoZWNrbWFyay5yZW1vdmUoKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIFwibm9UcmFuc2l0XCI6XG4gICAgICAgIHRoaXMuZmlsdGVycy5ub1RyYW5zaXQgPSBmYWxzZVxuICAgICAgICB0aGlzLm5vVHJhbnNpdENoZWNrYm94VGFyZ2V0LmNoZWNrZWQgPSBmYWxzZVxuICAgICAgICBpZiAodGhpcy5xdWlja05vVHJhbnNpdFRhcmdldCkge1xuICAgICAgICAgIHRoaXMucXVpY2tOb1RyYW5zaXRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLXllbGxvdy0xMDBcIiwgXCJib3JkZXIteWVsbG93LTQwMFwiLCBcInRleHQteWVsbG93LTgwMFwiKVxuICAgICAgICAgIHRoaXMucXVpY2tOb1RyYW5zaXRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ncmF5LTMwMFwiKVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm5vVHJhbnNpdENhcmRUYXJnZXQpIHtcbiAgICAgICAgICB0aGlzLm5vVHJhbnNpdENhcmRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLVsjZjZmN2Y5XVwiKVxuICAgICAgICAgIHRoaXMubm9UcmFuc2l0Q2FyZFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNmZmY5ZTZdXCIsIFwiYm9yZGVyLVswLjVweF1cIiwgXCJib3JkZXItWyNmZmRhODBdXCIpXG4gICAgICAgICAgY29uc3QgY2hlY2ttYXJrID0gdGhpcy5ub1RyYW5zaXRDYXJkVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrXCIpXG4gICAgICAgICAgaWYgKGNoZWNrbWFyaykgY2hlY2ttYXJrLnJlbW92ZSgpXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgXCJkaXNjb3VudFByaWNlXCI6XG4gICAgICAgIHRoaXMuZmlsdGVycy5kaXNjb3VudFByaWNlID0gZmFsc2VcbiAgICAgICAgdGhpcy5kaXNjb3VudFByaWNlQ2hlY2tib3hUYXJnZXQuY2hlY2tlZCA9IGZhbHNlXG4gICAgICAgIGlmICh0aGlzLnF1aWNrRGlzY291bnRQcmljZVRhcmdldCkge1xuICAgICAgICAgIHRoaXMucXVpY2tEaXNjb3VudFByaWNlVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy15ZWxsb3ctMTAwXCIsIFwiYm9yZGVyLXllbGxvdy00MDBcIiwgXCJ0ZXh0LXllbGxvdy04MDBcIilcbiAgICAgICAgICB0aGlzLnF1aWNrRGlzY291bnRQcmljZVRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWdyYXktMzAwXCIpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGlzY291bnRQcmljZUNhcmRUYXJnZXQpIHtcbiAgICAgICAgICB0aGlzLmRpc2NvdW50UHJpY2VDYXJkVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy1bI2Y2ZjdmOV1cIilcbiAgICAgICAgICB0aGlzLmRpc2NvdW50UHJpY2VDYXJkVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI2ZmZjllNl1cIiwgXCJib3JkZXItWzAuNXB4XVwiLCBcImJvcmRlci1bI2ZmZGE4MF1cIilcbiAgICAgICAgICBjb25zdCBjaGVja21hcmsgPSB0aGlzLmRpc2NvdW50UHJpY2VDYXJkVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrXCIpXG4gICAgICAgICAgaWYgKGNoZWNrbWFyaykgY2hlY2ttYXJrLnJlbW92ZSgpXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgXCJhaXJsaW5lXCI6IHtcbiAgICAgICAgdGhpcy5maWx0ZXJzLmFpcmxpbmVzLmRlbGV0ZSh2YWx1ZSlcbiAgICAgICAgY29uc3QgYWlybGluZUNoZWNrYm94ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oYGlucHV0W3R5cGU9XCJjaGVja2JveFwiXVtkYXRhLWZpbHRlci10eXBlPVwiYWlybGluZVwiXVt2YWx1ZT1cIiR7dmFsdWV9XCJdYClcbiAgICAgICAgaWYgKGFpcmxpbmVDaGVja2JveCkgYWlybGluZUNoZWNrYm94LmNoZWNrZWQgPSBmYWxzZVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSBcImRlcGFydHVyZUFpcnBvcnRcIjoge1xuICAgICAgICB0aGlzLmZpbHRlcnMuZGVwYXJ0dXJlQWlycG9ydHMuZGVsZXRlKHZhbHVlKVxuICAgICAgICBjb25zdCBkZXBBaXJwb3J0Q2hlY2tib3ggPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PihgaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdW2RhdGEtZmlsdGVyLXR5cGU9XCJhaXJwb3J0XCJdW3ZhbHVlPVwiJHt2YWx1ZX1cIl1gKVxuICAgICAgICBpZiAoZGVwQWlycG9ydENoZWNrYm94KSBkZXBBaXJwb3J0Q2hlY2tib3guY2hlY2tlZCA9IGZhbHNlXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlIFwiYXJyaXZhbEFpcnBvcnRcIjoge1xuICAgICAgICB0aGlzLmZpbHRlcnMuYXJyaXZhbEFpcnBvcnRzLmRlbGV0ZSh2YWx1ZSlcbiAgICAgICAgY29uc3QgYXJyQWlycG9ydENoZWNrYm94ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oYGlucHV0W3R5cGU9XCJjaGVja2JveFwiXVtkYXRhLWZpbHRlci10eXBlPVwiYWlycG9ydFwiXVt2YWx1ZT1cIiR7dmFsdWV9XCJdYClcbiAgICAgICAgaWYgKGFyckFpcnBvcnRDaGVja2JveCkgYXJyQWlycG9ydENoZWNrYm94LmNoZWNrZWQgPSBmYWxzZVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSBcImRlcGFydHVyZVRpbWVcIjoge1xuICAgICAgICB0aGlzLmZpbHRlcnMuZGVwYXJ0dXJlVGltZVJhbmdlcy5kZWxldGUodmFsdWUpXG4gICAgICAgIGNvbnN0IHRpbWVDaGVja2JveCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KGBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl1bZGF0YS1maWx0ZXItdHlwZT1cImRlcGFydHVyZS10aW1lXCJdW3ZhbHVlPVwiJHt2YWx1ZX1cIl1gKVxuICAgICAgICBpZiAodGltZUNoZWNrYm94KSB0aW1lQ2hlY2tib3guY2hlY2tlZCA9IGZhbHNlXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlIFwiYWlyY3JhZnRNb2RlbFwiOiB7XG4gICAgICAgIHRoaXMuZmlsdGVycy5haXJjcmFmdE1vZGVscy5kZWxldGUodmFsdWUpXG4gICAgICAgIGNvbnN0IG1vZGVsQ2hlY2tib3ggPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PihgaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdW2RhdGEtZmlsdGVyLXR5cGU9XCJhaXJjcmFmdC1tb2RlbFwiXVt2YWx1ZT1cIiR7dmFsdWV9XCJdYClcbiAgICAgICAgaWYgKG1vZGVsQ2hlY2tib3gpIG1vZGVsQ2hlY2tib3guY2hlY2tlZCA9IGZhbHNlXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMudXBkYXRlUmVzdWx0Q291bnQoKVxuICB9XG5cbiAgLy8gSGVscGVyIG1ldGhvZCB0byBjcmVhdGUgY2hlY2ttYXJrIFNWR1xuICBwcml2YXRlIGNyZWF0ZUNoZWNrbWFyaygpOiBTVkdFbGVtZW50IHtcbiAgICBjb25zdCBzdmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInN2Z1wiKVxuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNoZWNrbWFyayBhYnNvbHV0ZSBib3R0b20tMCByaWdodC0wXCIpXG4gICAgc3ZnLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIFwiMTZcIilcbiAgICBzdmcuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIFwiMTZcIilcbiAgICBzdmcuc2V0QXR0cmlidXRlKFwidmlld0JveFwiLCBcIjAgMCAyNCAyNFwiKVxuICAgIFxuICAgIC8vIEJhY2tncm91bmQgdHJpYW5nbGVcbiAgICBjb25zdCBiZ1BhdGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInBhdGhcIilcbiAgICBiZ1BhdGguc2V0QXR0cmlidXRlKFwiZFwiLCBcIk0yNCAyNEgwTDI0IDBWMjRaXCIpXG4gICAgYmdQYXRoLnNldEF0dHJpYnV0ZShcImZpbGxcIiwgXCIjZmNjMzJhXCIpXG4gICAgc3ZnLmFwcGVuZENoaWxkKGJnUGF0aClcbiAgICBcbiAgICAvLyBDaGVja21hcmsgcGF0aFxuICAgIGNvbnN0IGNoZWNrUGF0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwicGF0aFwiKVxuICAgIGNoZWNrUGF0aC5zZXRBdHRyaWJ1dGUoXCJkXCIsIFwiTTE0IDE4bDIgMiA0LTRcIilcbiAgICBjaGVja1BhdGguc2V0QXR0cmlidXRlKFwic3Ryb2tlXCIsIFwid2hpdGVcIilcbiAgICBjaGVja1BhdGguc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMlwiKVxuICAgIGNoZWNrUGF0aC5zZXRBdHRyaWJ1dGUoXCJzdHJva2UtbGluZWNhcFwiLCBcInJvdW5kXCIpXG4gICAgY2hlY2tQYXRoLnNldEF0dHJpYnV0ZShcInN0cm9rZS1saW5lam9pblwiLCBcInJvdW5kXCIpXG4gICAgY2hlY2tQYXRoLnNldEF0dHJpYnV0ZShcImZpbGxcIiwgXCJub25lXCIpXG4gICAgc3ZnLmFwcGVuZENoaWxkKGNoZWNrUGF0aClcbiAgICBcbiAgICByZXR1cm4gc3ZnXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcIm1vZGFsXCIsXG4gICAgXCJvdmVybGF5XCIsXG4gICAgXCJkaXJlY3RQcmlvcml0eUJ1dHRvblwiLFxuICAgIFwicHJpY2VQcmlvcml0eUJ1dHRvblwiLFxuICAgIFwidGltZVNvcnRCdXR0b25cIixcbiAgICBcImZsaWdodExpc3RcIlxuICBdXG4gIFxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIGluaXRpYWxTb3J0OiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCJkZWZhdWx0XCIgfVxuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBvdmVybGF5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRpcmVjdFByaW9yaXR5QnV0dG9uVGFyZ2V0OiBIVE1MQnV0dG9uRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHByaWNlUHJpb3JpdHlCdXR0b25UYXJnZXQ6IEhUTUxCdXR0b25FbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdGltZVNvcnRCdXR0b25UYXJnZXQ6IEhUTUxCdXR0b25FbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZmxpZ2h0TGlzdFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBpbml0aWFsU29ydFZhbHVlOiBzdHJpbmdcblxuICAvLyBTb3J0IHN0YXRlXG4gIHByaXZhdGUgY3VycmVudFNvcnQ6IHN0cmluZyA9IFwiZGVmYXVsdFwiIC8vIGRlZmF1bHQsIGRpcmVjdF9wcmlvcml0eSwgcHJpY2VfYXNjLCBkZXBhcnR1cmVfZWFybHksIGRlcGFydHVyZV9sYXRlLCBhcnJpdmFsX2Vhcmx5LCBhcnJpdmFsX2xhdGUsIGR1cmF0aW9uX3Nob3J0XG4gIHByaXZhdGUgZGlyZWN0UHJpb3JpdHlBY3RpdmU6IGJvb2xlYW4gPSBmYWxzZVxuICBwcml2YXRlIHByaWNlUHJpb3JpdHlBY3RpdmU6IGJvb2xlYW4gPSBmYWxzZVxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJGbGlnaHRTb3J0IGNvbnRyb2xsZXIgY29ubmVjdGVkXCIpXG4gICAgXG4gICAgLy8gSW5pdGlhbGl6ZSBzb3J0IHN0YXRlIGJhc2VkIG9uIGluaXRpYWxTb3J0IHZhbHVlXG4gICAgaWYgKHRoaXMuaW5pdGlhbFNvcnRWYWx1ZSA9PT0gXCJwcmljZV9hc2NcIikge1xuICAgICAgdGhpcy5jdXJyZW50U29ydCA9IFwicHJpY2VfYXNjXCJcbiAgICAgIHRoaXMucHJpY2VQcmlvcml0eUFjdGl2ZSA9IHRydWVcbiAgICAgIHRoaXMucHJpY2VQcmlvcml0eUJ1dHRvblRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWItMlwiLCBcImJvcmRlci1ibGFja1wiKVxuICAgICAgdGhpcy5wcmljZVByaW9yaXR5QnV0dG9uVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCJzcGFuXCIpPy5jbGFzc0xpc3QuYWRkKFwiZm9udC1ib2xkXCIpXG4gICAgICB0aGlzLnByaWNlUHJpb3JpdHlCdXR0b25UYXJnZXQucXVlcnlTZWxlY3RvcihcInNwYW5cIik/LmNsYXNzTGlzdC5yZW1vdmUoXCJ0ZXh0LWdyYXktNjAwXCIpXG4gICAgfVxuICB9XG5cbiAgLy8gVG9nZ2xlIGRpcmVjdCBmbGlnaHQgcHJpb3JpdHlcbiAgdG9nZ2xlRGlyZWN0UHJpb3JpdHkoKTogdm9pZCB7XG4gICAgdGhpcy5kaXJlY3RQcmlvcml0eUFjdGl2ZSA9ICF0aGlzLmRpcmVjdFByaW9yaXR5QWN0aXZlXG4gICAgXG4gICAgaWYgKHRoaXMuZGlyZWN0UHJpb3JpdHlBY3RpdmUpIHtcbiAgICAgIHRoaXMuY3VycmVudFNvcnQgPSBcImRpcmVjdF9wcmlvcml0eVwiXG4gICAgICB0aGlzLmRpcmVjdFByaW9yaXR5QnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItYi0yXCIsIFwiYm9yZGVyLWJsYWNrXCIpXG4gICAgICB0aGlzLmRpcmVjdFByaW9yaXR5QnV0dG9uVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCJzcGFuXCIpPy5jbGFzc0xpc3QuYWRkKFwiZm9udC1ib2xkXCIpXG4gICAgICB0aGlzLmRpcmVjdFByaW9yaXR5QnV0dG9uVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCJzcGFuXCIpPy5jbGFzc0xpc3QucmVtb3ZlKFwidGV4dC1ncmF5LTYwMFwiKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmN1cnJlbnRTb3J0ID0gXCJkZWZhdWx0XCJcbiAgICAgIHRoaXMuZGlyZWN0UHJpb3JpdHlCdXR0b25UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJvcmRlci1iLTJcIiwgXCJib3JkZXItYmxhY2tcIilcbiAgICAgIHRoaXMuZGlyZWN0UHJpb3JpdHlCdXR0b25UYXJnZXQucXVlcnlTZWxlY3RvcihcInNwYW5cIik/LmNsYXNzTGlzdC5yZW1vdmUoXCJmb250LWJvbGRcIilcbiAgICAgIHRoaXMuZGlyZWN0UHJpb3JpdHlCdXR0b25UYXJnZXQucXVlcnlTZWxlY3RvcihcInNwYW5cIik/LmNsYXNzTGlzdC5hZGQoXCJ0ZXh0LWdyYXktNjAwXCIpXG4gICAgfVxuICAgIFxuICAgIHRoaXMuYXBwbHlTb3J0KClcbiAgfVxuXG4gIC8vIFRvZ2dsZSBwcmljZSBwcmlvcml0eSAobG93IHByaWNlIGZpcnN0KVxuICB0b2dnbGVQcmljZVByaW9yaXR5KCk6IHZvaWQge1xuICAgIHRoaXMucHJpY2VQcmlvcml0eUFjdGl2ZSA9ICF0aGlzLnByaWNlUHJpb3JpdHlBY3RpdmVcbiAgICBcbiAgICBpZiAodGhpcy5wcmljZVByaW9yaXR5QWN0aXZlKSB7XG4gICAgICB0aGlzLmN1cnJlbnRTb3J0ID0gXCJwcmljZV9hc2NcIlxuICAgICAgdGhpcy5wcmljZVByaW9yaXR5QnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJib3JkZXItYi0yXCIsIFwiYm9yZGVyLWJsYWNrXCIpXG4gICAgICB0aGlzLnByaWNlUHJpb3JpdHlCdXR0b25UYXJnZXQucXVlcnlTZWxlY3RvcihcInNwYW5cIik/LmNsYXNzTGlzdC5hZGQoXCJmb250LWJvbGRcIilcbiAgICAgIHRoaXMucHJpY2VQcmlvcml0eUJ1dHRvblRhcmdldC5xdWVyeVNlbGVjdG9yKFwic3BhblwiKT8uY2xhc3NMaXN0LnJlbW92ZShcInRleHQtZ3JheS02MDBcIilcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdXJyZW50U29ydCA9IFwiZGVmYXVsdFwiXG4gICAgICB0aGlzLnByaWNlUHJpb3JpdHlCdXR0b25UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJvcmRlci1iLTJcIiwgXCJib3JkZXItYmxhY2tcIilcbiAgICAgIHRoaXMucHJpY2VQcmlvcml0eUJ1dHRvblRhcmdldC5xdWVyeVNlbGVjdG9yKFwic3BhblwiKT8uY2xhc3NMaXN0LnJlbW92ZShcImZvbnQtYm9sZFwiKVxuICAgICAgdGhpcy5wcmljZVByaW9yaXR5QnV0dG9uVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCJzcGFuXCIpPy5jbGFzc0xpc3QuYWRkKFwidGV4dC1ncmF5LTYwMFwiKVxuICAgIH1cbiAgICBcbiAgICB0aGlzLmFwcGx5U29ydCgpXG4gIH1cblxuICAvLyBPcGVuIHRpbWUgc29ydCBtb2RhbFxuICBvcGVuVGltZVNvcnRNb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICB0aGlzLm92ZXJsYXlUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgIFxuICAgIC8vIEFuaW1hdGUgbW9kYWxcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcInRyYW5zbGF0ZS15LWZ1bGxcIilcbiAgICAgIHRoaXMub3ZlcmxheVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwib3BhY2l0eS0wXCIpXG4gICAgfSwgMTApXG4gIH1cblxuICAvLyBDbG9zZSBtb2RhbFxuICBjbG9zZU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZChcInRyYW5zbGF0ZS15LWZ1bGxcIilcbiAgICB0aGlzLm92ZXJsYXlUYXJnZXQuY2xhc3NMaXN0LmFkZChcIm9wYWNpdHktMFwiKVxuICAgIFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgICB0aGlzLm92ZXJsYXlUYXJnZXQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgIH0sIDMwMClcbiAgfVxuXG4gIC8vIEFwcGx5IHNvcnQgb3B0aW9uIGZyb20gdGltZSBzb3J0IG1vZGFsXG4gIGFwcGx5U29ydE9wdGlvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50XG4gICAgY29uc3Qgc29ydFR5cGUgPSBidXR0b24uZGF0YXNldC5zb3J0VHlwZVxuICAgIFxuICAgIGlmICghc29ydFR5cGUpIHJldHVyblxuICAgIFxuICAgIHRoaXMuY3VycmVudFNvcnQgPSBzb3J0VHlwZVxuICAgIFxuICAgIC8vIFVwZGF0ZSB0aW1lIHNvcnQgYnV0dG9uIHRleHQgYW5kIHN0YXRlXG4gICAgdGhpcy51cGRhdGVUaW1lU29ydEJ1dHRvblRleHQoc29ydFR5cGUpXG4gICAgXG4gICAgdGhpcy5hcHBseVNvcnQoKVxuICAgIHRoaXMuY2xvc2VNb2RhbCgpXG4gIH1cblxuICAvLyBVcGRhdGUgdGltZSBzb3J0IGJ1dHRvbiB0ZXh0IGJhc2VkIG9uIHNlbGVjdGVkIHNvcnRcbiAgcHJpdmF0ZSB1cGRhdGVUaW1lU29ydEJ1dHRvblRleHQoc29ydFR5cGU6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IHRleHRNYXA6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7XG4gICAgICBcImRlcGFydHVyZV9lYXJseVwiOiBcIlx1OEQ3N1x1OThERVx1NjVFOS1cdTY2NUFcIixcbiAgICAgIFwiZGVwYXJ0dXJlX2xhdGVcIjogXCJcdThENzdcdTk4REVcdTY2NUEtXHU2NUU5XCIsXG4gICAgICBcImFycml2YWxfZWFybHlcIjogXCJcdTUyMzBcdThGQkVcdTY1RTktXHU2NjVBXCIsXG4gICAgICBcImFycml2YWxfbGF0ZVwiOiBcIlx1NTIzMFx1OEZCRVx1NjY1QS1cdTY1RTlcIixcbiAgICAgIFwiZHVyYXRpb25fc2hvcnRcIjogXCJcdTgwMTdcdTY1RjZcdTc3RUQtXHU5NTdGXCJcbiAgICB9XG4gICAgXG4gICAgY29uc3QgYnV0dG9uVGV4dCA9IHRleHRNYXBbc29ydFR5cGVdXG4gICAgaWYgKGJ1dHRvblRleHQpIHtcbiAgICAgIGNvbnN0IHNwYW4gPSB0aGlzLnRpbWVTb3J0QnV0dG9uVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCJzcGFuXCIpXG4gICAgICBpZiAoc3Bhbikge1xuICAgICAgICBzcGFuLnRleHRDb250ZW50ID0gYnV0dG9uVGV4dFxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBVcGRhdGUgYnV0dG9uIGFjdGl2ZSBzdGF0ZVxuICAgICAgdGhpcy50aW1lU29ydEJ1dHRvblRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWItMlwiLCBcImJvcmRlci1ibGFja1wiKVxuICAgICAgdGhpcy50aW1lU29ydEJ1dHRvblRhcmdldC5xdWVyeVNlbGVjdG9yKFwic3BhblwiKT8uY2xhc3NMaXN0LmFkZChcImZvbnQtYm9sZFwiKVxuICAgICAgdGhpcy50aW1lU29ydEJ1dHRvblRhcmdldC5xdWVyeVNlbGVjdG9yKFwic3BhblwiKT8uY2xhc3NMaXN0LnJlbW92ZShcInRleHQtZ3JheS02MDBcIilcbiAgICB9XG4gIH1cblxuICAvLyBBcHBseSB0aGUgY3VycmVudCBzb3J0IHRvIGZsaWdodCBsaXN0XG4gIHByaXZhdGUgYXBwbHlTb3J0KCk6IHZvaWQge1xuICAgIGNvbnN0IGZsaWdodENhcmRzID0gQXJyYXkuZnJvbSh0aGlzLmZsaWdodExpc3RUYXJnZXQuY2hpbGRyZW4pIGFzIEhUTUxFbGVtZW50W11cbiAgICBcbiAgICBpZiAoZmxpZ2h0Q2FyZHMubGVuZ3RoID09PSAwKSByZXR1cm5cbiAgICBcbiAgICBsZXQgc29ydGVkQ2FyZHM6IEhUTUxFbGVtZW50W10gPSBbXVxuICAgIFxuICAgIHN3aXRjaCAodGhpcy5jdXJyZW50U29ydCkge1xuICAgICAgY2FzZSBcImRpcmVjdF9wcmlvcml0eVwiOlxuICAgICAgICAvLyBTb3J0IGJ5IGRpcmVjdCBmbGlnaHRzIGZpcnN0IChubyB0cmFuc2ZlciBpbmRpY2F0b3IpXG4gICAgICAgIHNvcnRlZENhcmRzID0gZmxpZ2h0Q2FyZHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgIGNvbnN0IGFEaXJlY3QgPSAhYS50ZXh0Q29udGVudD8uaW5jbHVkZXMoXCJcdTRFMkRcdTU2RkRcdTk5OTlcdTZFMkZcIikgJiYgIWEudGV4dENvbnRlbnQ/LmluY2x1ZGVzKFwiXHU2NzZEXHU1RERFXCIpXG4gICAgICAgICAgY29uc3QgYkRpcmVjdCA9ICFiLnRleHRDb250ZW50Py5pbmNsdWRlcyhcIlx1NEUyRFx1NTZGRFx1OTk5OVx1NkUyRlwiKSAmJiAhYi50ZXh0Q29udGVudD8uaW5jbHVkZXMoXCJcdTY3NkRcdTVEREVcIilcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoYURpcmVjdCAmJiAhYkRpcmVjdCkgcmV0dXJuIC0xXG4gICAgICAgICAgaWYgKCFhRGlyZWN0ICYmIGJEaXJlY3QpIHJldHVybiAxXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVGhlbiBzb3J0IGJ5IHByaWNlXG4gICAgICAgICAgY29uc3QgYVByaWNlID0gdGhpcy5leHRyYWN0UHJpY2UoYSlcbiAgICAgICAgICBjb25zdCBiUHJpY2UgPSB0aGlzLmV4dHJhY3RQcmljZShiKVxuICAgICAgICAgIHJldHVybiBhUHJpY2UgLSBiUHJpY2VcbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgICAgXG4gICAgICBjYXNlIFwicHJpY2VfYXNjXCI6XG4gICAgICAgIC8vIFNvcnQgYnkgcHJpY2UgYXNjZW5kaW5nXG4gICAgICAgIHNvcnRlZENhcmRzID0gZmxpZ2h0Q2FyZHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLmV4dHJhY3RQcmljZShhKSAtIHRoaXMuZXh0cmFjdFByaWNlKGIpXG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICAgIFxuICAgICAgXG4gICAgICBjYXNlIFwiZGVwYXJ0dXJlX2Vhcmx5XCI6XG4gICAgICAgIC8vIFNvcnQgYnkgZGVwYXJ0dXJlIHRpbWUgZWFybHkgdG8gbGF0ZVxuICAgICAgICBzb3J0ZWRDYXJkcyA9IGZsaWdodENhcmRzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5leHRyYWN0RGVwYXJ0dXJlVGltZShhKSAtIHRoaXMuZXh0cmFjdERlcGFydHVyZVRpbWUoYilcbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgICAgXG4gICAgICBjYXNlIFwiZGVwYXJ0dXJlX2xhdGVcIjpcbiAgICAgICAgLy8gU29ydCBieSBkZXBhcnR1cmUgdGltZSBsYXRlIHRvIGVhcmx5XG4gICAgICAgIHNvcnRlZENhcmRzID0gZmxpZ2h0Q2FyZHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLmV4dHJhY3REZXBhcnR1cmVUaW1lKGIpIC0gdGhpcy5leHRyYWN0RGVwYXJ0dXJlVGltZShhKVxuICAgICAgICB9KVxuICAgICAgICBicmVha1xuICAgICAgICBcbiAgICAgIGNhc2UgXCJhcnJpdmFsX2Vhcmx5XCI6XG4gICAgICAgIC8vIFNvcnQgYnkgYXJyaXZhbCB0aW1lIGVhcmx5IHRvIGxhdGVcbiAgICAgICAgc29ydGVkQ2FyZHMgPSBmbGlnaHRDYXJkcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZXh0cmFjdEFycml2YWxUaW1lKGEpIC0gdGhpcy5leHRyYWN0QXJyaXZhbFRpbWUoYilcbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgICAgXG4gICAgICBjYXNlIFwiYXJyaXZhbF9sYXRlXCI6XG4gICAgICAgIC8vIFNvcnQgYnkgYXJyaXZhbCB0aW1lIGxhdGUgdG8gZWFybHlcbiAgICAgICAgc29ydGVkQ2FyZHMgPSBmbGlnaHRDYXJkcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZXh0cmFjdEFycml2YWxUaW1lKGIpIC0gdGhpcy5leHRyYWN0QXJyaXZhbFRpbWUoYSlcbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgICAgXG4gICAgICBjYXNlIFwiZHVyYXRpb25fc2hvcnRcIjpcbiAgICAgICAgLy8gU29ydCBieSBkdXJhdGlvbiBzaG9ydCB0byBsb25nXG4gICAgICAgIHNvcnRlZENhcmRzID0gZmxpZ2h0Q2FyZHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLmV4dHJhY3REdXJhdGlvbihhKSAtIHRoaXMuZXh0cmFjdER1cmF0aW9uKGIpXG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICAgIFxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgc29ydGVkQ2FyZHMgPSBmbGlnaHRDYXJkc1xuICAgIH1cbiAgICBcbiAgICAvLyBSZS1hcHBlbmQgY2FyZHMgaW4gc29ydGVkIG9yZGVyXG4gICAgc29ydGVkQ2FyZHMuZm9yRWFjaChjYXJkID0+IHtcbiAgICAgIHRoaXMuZmxpZ2h0TGlzdFRhcmdldC5hcHBlbmRDaGlsZChjYXJkKVxuICAgIH0pXG4gICAgXG4gICAgLy8gQWRkIGFuaW1hdGlvblxuICAgIHRoaXMuZmxpZ2h0TGlzdFRhcmdldC5jbGFzc0xpc3QuYWRkKFwib3BhY2l0eS01MFwiKVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5mbGlnaHRMaXN0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJvcGFjaXR5LTUwXCIpXG4gICAgfSwgMTUwKVxuICB9XG5cbiAgLy8gRXh0cmFjdCBwcmljZSBmcm9tIGZsaWdodCBjYXJkXG4gIHByaXZhdGUgZXh0cmFjdFByaWNlKGNhcmQ6IEhUTUxFbGVtZW50KTogbnVtYmVyIHtcbiAgICBjb25zdCBwcmljZVRleHQgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoXCIudGV4dC1yZWQtNTAwLmZvbnQtYm9sZFwiKT8udGV4dENvbnRlbnRcbiAgICBpZiAoIXByaWNlVGV4dCkgcmV0dXJuIDBcbiAgICBcbiAgICBjb25zdCBtYXRjaCA9IHByaWNlVGV4dC5tYXRjaCgvXHUwMEE1KFxcZCspLylcbiAgICByZXR1cm4gbWF0Y2ggPyBwYXJzZUludChtYXRjaFsxXSkgOiAwXG4gIH1cblxuICAvLyBFeHRyYWN0IGRlcGFydHVyZSB0aW1lIGZyb20gZmxpZ2h0IGNhcmQgKGNvbnZlcnQgdG8gbWludXRlcyBzaW5jZSBtaWRuaWdodClcbiAgcHJpdmF0ZSBleHRyYWN0RGVwYXJ0dXJlVGltZShjYXJkOiBIVE1MRWxlbWVudCk6IG51bWJlciB7XG4gICAgY29uc3QgdGltZVRleHQgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoXCIudGV4dC0zeGwuZm9udC1ib2xkXCIpPy50ZXh0Q29udGVudFxuICAgIGlmICghdGltZVRleHQpIHJldHVybiAwXG4gICAgXG4gICAgY29uc3QgbWF0Y2ggPSB0aW1lVGV4dC5tYXRjaCgvKFxcZCspOihcXGQrKS8pXG4gICAgaWYgKCFtYXRjaCkgcmV0dXJuIDBcbiAgICBcbiAgICBjb25zdCBob3VycyA9IHBhcnNlSW50KG1hdGNoWzFdKVxuICAgIGNvbnN0IG1pbnV0ZXMgPSBwYXJzZUludChtYXRjaFsyXSlcbiAgICByZXR1cm4gaG91cnMgKiA2MCArIG1pbnV0ZXNcbiAgfVxuXG4gIC8vIEV4dHJhY3QgYXJyaXZhbCB0aW1lIGZyb20gZmxpZ2h0IGNhcmRcbiAgcHJpdmF0ZSBleHRyYWN0QXJyaXZhbFRpbWUoY2FyZDogSFRNTEVsZW1lbnQpOiBudW1iZXIge1xuICAgIGNvbnN0IHRpbWVFbGVtZW50cyA9IGNhcmQucXVlcnlTZWxlY3RvckFsbChcIi50ZXh0LTN4bC5mb250LWJvbGRcIilcbiAgICBpZiAodGltZUVsZW1lbnRzLmxlbmd0aCA8IDIpIHJldHVybiAwXG4gICAgXG4gICAgY29uc3QgdGltZVRleHQgPSB0aW1lRWxlbWVudHNbMV0udGV4dENvbnRlbnRcbiAgICBpZiAoIXRpbWVUZXh0KSByZXR1cm4gMFxuICAgIFxuICAgIGNvbnN0IG1hdGNoID0gdGltZVRleHQubWF0Y2goLyhcXGQrKTooXFxkKykvKVxuICAgIGlmICghbWF0Y2gpIHJldHVybiAwXG4gICAgXG4gICAgY29uc3QgaG91cnMgPSBwYXJzZUludChtYXRjaFsxXSlcbiAgICBjb25zdCBtaW51dGVzID0gcGFyc2VJbnQobWF0Y2hbMl0pXG4gICAgXG4gICAgLy8gSGFuZGxlIG5leHQgZGF5IGFycml2YWxzIChpZiB0aW1lIGlzIGVhcmxpZXIgdGhhbiBkZXBhcnR1cmUpXG4gICAgY29uc3QgZGVwYXJ0dXJlVGltZSA9IHRoaXMuZXh0cmFjdERlcGFydHVyZVRpbWUoY2FyZClcbiAgICBjb25zdCBhcnJpdmFsVGltZSA9IGhvdXJzICogNjAgKyBtaW51dGVzXG4gICAgXG4gICAgcmV0dXJuIGFycml2YWxUaW1lIDwgZGVwYXJ0dXJlVGltZSA/IGFycml2YWxUaW1lICsgMjQgKiA2MCA6IGFycml2YWxUaW1lXG4gIH1cblxuICAvLyBFeHRyYWN0IGR1cmF0aW9uIGZyb20gZmxpZ2h0IGNhcmRcbiAgcHJpdmF0ZSBleHRyYWN0RHVyYXRpb24oY2FyZDogSFRNTEVsZW1lbnQpOiBudW1iZXIge1xuICAgIGNvbnN0IGR1cmF0aW9uVGV4dCA9IGNhcmQudGV4dENvbnRlbnRcbiAgICBpZiAoIWR1cmF0aW9uVGV4dCkgcmV0dXJuIDBcbiAgICBcbiAgICAvLyBMb29rIGZvciBwYXR0ZXJucyBsaWtlIFwiXHU2MDNCNGhcIiwgXCJcdTYwM0IxOGg0MG1cIiwgZXRjLlxuICAgIGNvbnN0IG1hdGNoID0gZHVyYXRpb25UZXh0Lm1hdGNoKC9cdTYwM0IoXFxkKyloKD86KFxcZCspbSk/LylcbiAgICBpZiAoIW1hdGNoKSByZXR1cm4gMFxuICAgIFxuICAgIGNvbnN0IGhvdXJzID0gcGFyc2VJbnQobWF0Y2hbMV0pXG4gICAgY29uc3QgbWludXRlcyA9IG1hdGNoWzJdID8gcGFyc2VJbnQobWF0Y2hbMl0pIDogMFxuICAgIHJldHVybiBob3VycyAqIDYwICsgbWludXRlc1xuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXIge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcImluZm9cIl1cbiAgc3RhdGljIHZhbHVlcyA9IHsgY2FiaW5DbGFzczogU3RyaW5nIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IGluZm9UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY2FiaW5DbGFzc1ZhbHVlOiBzdHJpbmdcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIHRoaXMudXBkYXRlRGlzcGxheSgpXG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZURpc3BsYXkoKTogdm9pZCB7XG4gICAgY29uc3Qgc2F2ZWRTdGF0ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwYXNzZW5nZXJfc2VsZWN0aW9uJylcbiAgICBsZXQgZGlzcGxheVRleHQgPSAnMVx1NjIxMFx1NEVCQScgLy8gRGVmYXVsdFxuICAgIFxuICAgIGlmIChzYXZlZFN0YXRlKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IEpTT04ucGFyc2Uoc2F2ZWRTdGF0ZSlcbiAgICAgICAgY29uc3QgcGFzc2VuZ2VyTmFtZXMgPSBzdGF0ZS5wYXNzZW5nZXJOYW1lcyB8fCBbXVxuICAgICAgICBcbiAgICAgICAgLy8gSWYgdXNlciBzZWxlY3RlZCBzcGVjaWZpYyBwYXNzZW5nZXJzLCBkaXNwbGF5IGNvdW50IGJhc2VkIG9uIHBhc3Nlbmdlck5hbWVzXG4gICAgICAgIGlmIChwYXNzZW5nZXJOYW1lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgZGlzcGxheVRleHQgPSBgJHtwYXNzZW5nZXJOYW1lcy5sZW5ndGh9XHU0RjREXHU0RTU4XHU2NzNBXHU0RUJBYFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIElmIHVzZXIgc2VsZWN0ZWQgYnkgY291bnQgb25seVxuICAgICAgICAgIGNvbnN0IGFkdWx0cyA9IHN0YXRlLmFkdWx0cyB8fCAxXG4gICAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBzdGF0ZS5jaGlsZHJlbiB8fCAwXG4gICAgICAgICAgXG4gICAgICAgICAgZGlzcGxheVRleHQgPSBgJHthZHVsdHN9XHU2MjEwXHU0RUJBYFxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFkZCBjaGlsZHJlbiBpZiBhbnlcbiAgICAgICAgICBpZiAoY2hpbGRyZW4gPiAwKSB7XG4gICAgICAgICAgICBkaXNwbGF5VGV4dCArPSBgICR7Y2hpbGRyZW59XHU1MTNGXHU3QUU1YFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBwYXNzZW5nZXIgc2VsZWN0aW9uIGZyb20gbG9jYWxTdG9yYWdlOicsIGUpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEFkZCBjYWJpbiBjbGFzcyBpZiBidXNpbmVzcy9maXJzdCBjbGFzc1xuICAgIGlmICh0aGlzLmNhYmluQ2xhc3NWYWx1ZSA9PT0gJ2J1c2luZXNzJykge1xuICAgICAgZGlzcGxheVRleHQgKz0gJyBcdTAwQjcgXHU1MTZDXHU1MkExXHU4MjMxJ1xuICAgIH0gZWxzZSBpZiAodGhpcy5jYWJpbkNsYXNzVmFsdWUgPT09ICdmaXJzdF9jbGFzcycpIHtcbiAgICAgIGRpc3BsYXlUZXh0ICs9ICcgXHUwMEI3IFx1NTkzNFx1N0I0OVx1ODIzMSdcbiAgICB9XG4gICAgXG4gICAgdGhpcy5pbmZvVGFyZ2V0LnRleHRDb250ZW50ID0gZGlzcGxheVRleHRcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcbmltcG9ydCAqIGFzIFR1cmJvIGZyb20gXCJAaG90d2lyZWQvdHVyYm9cIlxuXG4vLyBIYW5kbGVzIGRhdGUgbGluayBjbGlja3MgZm9yIG11bHRpLWNpdHkgZmxpZ2h0IGRhdGUgc2VsZWN0aW9uIHdpdGggY29tcHJlaGVuc2l2ZSB2YWxpZGF0aW9uXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXIge1xuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIHVybDogU3RyaW5nLFxuICAgIHNlbGVjdGVkRGF0ZTogU3RyaW5nLFxuICAgIGFsbFNlZ21lbnREYXRlczogQXJyYXksXG4gICAgc2VsZWN0ZWRGbGlnaHREYXRlczogQXJyYXksXG4gICAgY3VycmVudFNlZ21lbnRJbmRleDogTnVtYmVyXG4gIH1cblxuICBkZWNsYXJlIHVybFZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBzZWxlY3RlZERhdGVWYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgYWxsU2VnbWVudERhdGVzVmFsdWU6IHN0cmluZ1tdXG4gIGRlY2xhcmUgc2VsZWN0ZWRGbGlnaHREYXRlc1ZhbHVlOiBzdHJpbmdbXVxuICBkZWNsYXJlIGN1cnJlbnRTZWdtZW50SW5kZXhWYWx1ZTogbnVtYmVyXG5cbiAgYXN5bmMgbmF2aWdhdGUoZXZlbnQ6IEV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIFxuICAgIC8vIEZyb250ZW5kIHZhbGlkYXRpb246IGNoZWNrIGRhdGUgY29uc3RyYWludHNcbiAgICBpZiAodGhpcy5zZWxlY3RlZERhdGVWYWx1ZSAmJiB0aGlzLmFsbFNlZ21lbnREYXRlc1ZhbHVlICYmIHRoaXMuYWxsU2VnbWVudERhdGVzVmFsdWUubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3Qgc2VsZWN0ZWREYXRlID0gbmV3IERhdGUodGhpcy5zZWxlY3RlZERhdGVWYWx1ZSlcbiAgICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IHRoaXMuY3VycmVudFNlZ21lbnRJbmRleFZhbHVlXG4gICAgICBjb25zdCBzZWdtZW50TnVtYmVyID0gY3VycmVudEluZGV4ICsgMVxuICAgICAgXG4gICAgICAvLyBcdTgzQjdcdTUzRDZcdTUyNERcdTRFMDBcdTdBMEJcdTc2ODRcdTY1RTVcdTY3MUZcdUZGMDhcdTU5ODJcdTY3OUNcdTY3MDlcdTVERjJcdTkwMDlcdTgyMkFcdTczRURcdUZGMENcdTc1MjhcdTVERjJcdTkwMDlcdTgyMkFcdTczRURcdTc2ODRcdTY1RTVcdTY3MUZcdUZGMUJcdTU0MjZcdTUyMTlcdTc1MjhcdTUzOUZcdTU5Q0JzZWdtZW50XHU2NUU1XHU2NzFGXHVGRjA5XG4gICAgICBsZXQgcHJldmlvdXNEYXRlOiBEYXRlIHwgbnVsbCA9IG51bGxcbiAgICAgIGlmIChjdXJyZW50SW5kZXggPiAwKSB7XG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjcwOVx1NURGMlx1OTAwOVx1ODIyQVx1NzNFRFx1RkYwQ1x1NEY3Rlx1NzUyOFx1NURGMlx1OTAwOVx1ODIyQVx1NzNFRFx1NzY4NFx1NjVFNVx1NjcxRlxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEZsaWdodERhdGVzVmFsdWUgJiYgdGhpcy5zZWxlY3RlZEZsaWdodERhdGVzVmFsdWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IGxhc3RTZWxlY3RlZEZsaWdodERhdGUgPSB0aGlzLnNlbGVjdGVkRmxpZ2h0RGF0ZXNWYWx1ZVt0aGlzLnNlbGVjdGVkRmxpZ2h0RGF0ZXNWYWx1ZS5sZW5ndGggLSAxXVxuICAgICAgICAgIGlmIChsYXN0U2VsZWN0ZWRGbGlnaHREYXRlKSB7XG4gICAgICAgICAgICBwcmV2aW91c0RhdGUgPSBuZXcgRGF0ZShsYXN0U2VsZWN0ZWRGbGlnaHREYXRlKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDlcdTVERjJcdTkwMDlcdTgyMkFcdTczRURcdUZGMENcdTRGN0ZcdTc1MjhcdTUzOUZcdTU5Q0JzZWdtZW50XHU2NUU1XHU2NzFGXG4gICAgICAgIGlmICghcHJldmlvdXNEYXRlICYmIHRoaXMuYWxsU2VnbWVudERhdGVzVmFsdWVbY3VycmVudEluZGV4IC0gMV0pIHtcbiAgICAgICAgICBwcmV2aW91c0RhdGUgPSBuZXcgRGF0ZSh0aGlzLmFsbFNlZ21lbnREYXRlc1ZhbHVlW2N1cnJlbnRJbmRleCAtIDFdKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFx1ODNCN1x1NTNENlx1NEUwQlx1NEUwMFx1N0EwQlx1NzY4NFx1NjVFNVx1NjcxRlx1RkYwOFx1NEY3Rlx1NzUyOFx1NTM5Rlx1NTlDQnNlZ21lbnRcdTY1RTVcdTY3MUZcdUZGMDlcbiAgICAgIGxldCBuZXh0RGF0ZTogRGF0ZSB8IG51bGwgPSBudWxsXG4gICAgICBpZiAoY3VycmVudEluZGV4ICsgMSA8IHRoaXMuYWxsU2VnbWVudERhdGVzVmFsdWUubGVuZ3RoKSB7XG4gICAgICAgIG5leHREYXRlID0gbmV3IERhdGUodGhpcy5hbGxTZWdtZW50RGF0ZXNWYWx1ZVtjdXJyZW50SW5kZXggKyAxXSlcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gXHU2ODIxXHU5QThDXHVGRjFBXHU0RTBEXHU4MEZEXHU2NUU5XHU0RThFXHU1MjREXHU0RTAwXHU3QTBCXG4gICAgICBpZiAocHJldmlvdXNEYXRlICYmIHNlbGVjdGVkRGF0ZSA8IHByZXZpb3VzRGF0ZSkge1xuICAgICAgICBpZiAod2luZG93LnNob3dUb2FzdCkge1xuICAgICAgICAgIHdpbmRvdy5zaG93VG9hc3QoYFx1N0IyQyR7c2VnbWVudE51bWJlcn1cdTdBMEJcdTY1RTVcdTY3MUZcdTRFMERcdTgwRkRcdTY1RTlcdTRFOEVcdTdCMkMke2N1cnJlbnRJbmRleH1cdTdBMEJcdUZGMENcdThCRjdcdThGRDRcdTU2REVcdTgyMkFcdTczRURcdTk5OTZcdTk4NzVcdTRGRUVcdTY1MzlgKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAvLyBQcmV2ZW50IG5hdmlnYXRpb25cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gXHU2ODIxXHU5QThDXHVGRjFBXHU0RTBEXHU4MEZEXHU2NjVBXHU0RThFXHU0RTBCXHU0RTAwXHU3QTBCXG4gICAgICBpZiAobmV4dERhdGUgJiYgc2VsZWN0ZWREYXRlID4gbmV4dERhdGUpIHtcbiAgICAgICAgaWYgKHdpbmRvdy5zaG93VG9hc3QpIHtcbiAgICAgICAgICB3aW5kb3cuc2hvd1RvYXN0KGBcdTdCMkMke3NlZ21lbnROdW1iZXJ9XHU3QTBCXHU2NUU1XHU2NzFGXHU0RTBEXHU4MEZEXHU2NjVBXHU0RThFXHU3QjJDJHtjdXJyZW50SW5kZXggKyAyfVx1N0EwQlx1RkYwQ1x1OEJGN1x1OEZENFx1NTZERVx1ODIyQVx1NzNFRFx1OTk5Nlx1OTg3NVx1NEZFRVx1NjUzOWApXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC8vIFByZXZlbnQgbmF2aWdhdGlvblxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBJZiB2YWxpZGF0aW9uIHBhc3NlcywgcHJvY2VlZCB3aXRoIG5hdmlnYXRpb25cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLnVybFZhbHVlLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQWNjZXB0JzogJ3RleHQvdm5kLnR1cmJvLXN0cmVhbS5odG1sLCB0ZXh0L2h0bWwnLFxuICAgICAgICAgICdUdXJiby1GcmFtZSc6ICdfdG9wJ1xuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICBjb25zdCBjb250ZW50VHlwZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdDb250ZW50LVR5cGUnKVxuICAgICAgXG4gICAgICBpZiAoY29udGVudFR5cGU/LmluY2x1ZGVzKCd0dXJiby1zdHJlYW0nKSkge1xuICAgICAgICAvLyBJdCdzIGEgVHVyYm8gU3RyZWFtIHJlc3BvbnNlICh2YWxpZGF0aW9uIGVycm9yIHdpdGggVG9hc3QpXG4gICAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZXNwb25zZS50ZXh0KClcbiAgICAgICAgVHVyYm8ucmVuZGVyU3RyZWFtTWVzc2FnZShodG1sKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSXQncyBhIHJlZ3VsYXIgSFRNTCByZXNwb25zZSAoc3VjY2VzcyAtIG5hdmlnYXRlIHRvIG5ldyBwYWdlKVxuICAgICAgICBUdXJiby52aXNpdCh0aGlzLnVybFZhbHVlKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdOYXZpZ2F0aW9uIGVycm9yOicsIGVycm9yKVxuICAgICAgLy8gRmFsbGJhY2sgdG8gcmVndWxhciBuYXZpZ2F0aW9uXG4gICAgICBUdXJiby52aXNpdCh0aGlzLnVybFZhbHVlKVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwibW9kYWxcIixcbiAgICBcInJvb21zQ291bnRcIixcbiAgICBcImFkdWx0c0NvdW50XCIsXG4gICAgXCJjaGlsZHJlbkNvdW50XCIsXG4gICAgXCJyb29tc0lucHV0XCIsXG4gICAgXCJhZHVsdHNJbnB1dFwiLFxuICAgIFwiY2hpbGRyZW5JbnB1dFwiLFxuICAgIFwiZGlzcGxheVRleHRcIlxuICBdXG5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNSb29tc0lucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQWR1bHRzSW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNDaGlsZHJlbklucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzRGlzcGxheVRleHRUYXJnZXQ6IGJvb2xlYW5cblxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIHJvb21zOiBOdW1iZXIsXG4gICAgYWR1bHRzOiBOdW1iZXIsXG4gICAgY2hpbGRyZW46IE51bWJlclxuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSByb29tc0NvdW50VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGFkdWx0c0NvdW50VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNoaWxkcmVuQ291bnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgcm9vbXNJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGFkdWx0c0lucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hpbGRyZW5JbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRpc3BsYXlUZXh0VGFyZ2V0OiBIVE1MRWxlbWVudFxuXG4gIGRlY2xhcmUgcm9vbXNWYWx1ZTogbnVtYmVyXG4gIGRlY2xhcmUgYWR1bHRzVmFsdWU6IG51bWJlclxuICBkZWNsYXJlIGNoaWxkcmVuVmFsdWU6IG51bWJlclxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJIb3RlbEd1ZXN0U2VsZWN0b3IgY29ubmVjdGVkXCIpXG4gICAgXG4gICAgLy8gVHJ5IHRvIHJlYWQgaW5pdGlhbCB2YWx1ZXMgZnJvbSBVUkwgcGFyYW1ldGVycyBmaXJzdFxuICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaClcbiAgICBjb25zdCByb29tc1BhcmFtID0gdXJsUGFyYW1zLmdldCgncm9vbXMnKVxuICAgIGNvbnN0IGFkdWx0c1BhcmFtID0gdXJsUGFyYW1zLmdldCgnYWR1bHRzJylcbiAgICBjb25zdCBjaGlsZHJlblBhcmFtID0gdXJsUGFyYW1zLmdldCgnY2hpbGRyZW4nKVxuICAgIFxuICAgIC8vIE9ubHkgaW5pdGlhbGl6ZSBpZiBpbnB1dCB0YXJnZXRzIGV4aXN0IChtb2RhbCB2aWV3KVxuICAgIGlmICh0aGlzLmhhc1Jvb21zSW5wdXRUYXJnZXQgJiYgdGhpcy5oYXNBZHVsdHNJbnB1dFRhcmdldCAmJiB0aGlzLmhhc0NoaWxkcmVuSW5wdXRUYXJnZXQpIHtcbiAgICAgIC8vIFByaW9yaXRpemUgVVJMIHBhcmFtZXRlcnMsIGZhbGwgYmFjayB0byBoaWRkZW4gaW5wdXQgdmFsdWVzXG4gICAgICB0aGlzLnJvb21zVmFsdWUgPSByb29tc1BhcmFtICYmIHJvb21zUGFyYW0gIT09ICcnID8gcGFyc2VJbnQocm9vbXNQYXJhbSkgOiAocGFyc2VJbnQodGhpcy5yb29tc0lucHV0VGFyZ2V0LnZhbHVlKSB8fCAxKVxuICAgICAgdGhpcy5hZHVsdHNWYWx1ZSA9IGFkdWx0c1BhcmFtICYmIGFkdWx0c1BhcmFtICE9PSAnJyA/IHBhcnNlSW50KGFkdWx0c1BhcmFtKSA6IChwYXJzZUludCh0aGlzLmFkdWx0c0lucHV0VGFyZ2V0LnZhbHVlKSB8fCAxKVxuICAgICAgdGhpcy5jaGlsZHJlblZhbHVlID0gY2hpbGRyZW5QYXJhbSAmJiBjaGlsZHJlblBhcmFtICE9PSAnJyA/IHBhcnNlSW50KGNoaWxkcmVuUGFyYW0pIDogKHBhcnNlSW50KHRoaXMuY2hpbGRyZW5JbnB1dFRhcmdldC52YWx1ZSkgfHwgMClcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIG1vZGFsIGRpc3BsYXkgYW5kIGhpZGRlbiBpbnB1dHNcbiAgICAgIHRoaXMudXBkYXRlQ291bnRzKClcbiAgICAgIHRoaXMudXBkYXRlRGlzcGxheSgpXG4gICAgfVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkhvdGVsR3Vlc3RTZWxlY3RvciBkaXNjb25uZWN0ZWRcIilcbiAgfVxuXG4gIC8vIE9wZW4gbW9kYWxcbiAgb3Blbk1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbidcbiAgfVxuXG4gIC8vIENsb3NlIG1vZGFsXG4gIGNsb3NlTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJ1xuICB9XG5cbiAgLy8gSW5jcmVtZW50IHJvb21zXG4gIGluY3JlbWVudFJvb21zKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnJvb21zVmFsdWUgPCAxMCkge1xuICAgICAgdGhpcy5yb29tc1ZhbHVlKytcbiAgICAgIHRoaXMudXBkYXRlQ291bnRzKClcbiAgICB9XG4gIH1cblxuICAvLyBEZWNyZW1lbnQgcm9vbXNcbiAgZGVjcmVtZW50Um9vbXMoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucm9vbXNWYWx1ZSA+IDEpIHtcbiAgICAgIHRoaXMucm9vbXNWYWx1ZS0tXG4gICAgICB0aGlzLnVwZGF0ZUNvdW50cygpXG4gICAgfVxuICB9XG5cbiAgLy8gSW5jcmVtZW50IGFkdWx0c1xuICBpbmNyZW1lbnRBZHVsdHMoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuYWR1bHRzVmFsdWUgPCAyMCkge1xuICAgICAgdGhpcy5hZHVsdHNWYWx1ZSsrXG4gICAgICB0aGlzLnVwZGF0ZUNvdW50cygpXG4gICAgfVxuICB9XG5cbiAgLy8gRGVjcmVtZW50IGFkdWx0c1xuICBkZWNyZW1lbnRBZHVsdHMoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuYWR1bHRzVmFsdWUgPiAxKSB7XG4gICAgICB0aGlzLmFkdWx0c1ZhbHVlLS1cbiAgICAgIHRoaXMudXBkYXRlQ291bnRzKClcbiAgICB9XG4gIH1cblxuICAvLyBJbmNyZW1lbnQgY2hpbGRyZW5cbiAgaW5jcmVtZW50Q2hpbGRyZW4oKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY2hpbGRyZW5WYWx1ZSA8IDEwKSB7XG4gICAgICB0aGlzLmNoaWxkcmVuVmFsdWUrK1xuICAgICAgdGhpcy51cGRhdGVDb3VudHMoKVxuICAgIH1cbiAgfVxuXG4gIC8vIERlY3JlbWVudCBjaGlsZHJlblxuICBkZWNyZW1lbnRDaGlsZHJlbigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jaGlsZHJlblZhbHVlID4gMCkge1xuICAgICAgdGhpcy5jaGlsZHJlblZhbHVlLS1cbiAgICAgIHRoaXMudXBkYXRlQ291bnRzKClcbiAgICB9XG4gIH1cblxuICAvLyBSZXNldCB0byBkZWZhdWx0c1xuICByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLnJvb21zVmFsdWUgPSAxXG4gICAgdGhpcy5hZHVsdHNWYWx1ZSA9IDFcbiAgICB0aGlzLmNoaWxkcmVuVmFsdWUgPSAwXG4gICAgdGhpcy51cGRhdGVDb3VudHMoKVxuICB9XG5cbiAgLy8gQ29uZmlybSBhbmQgY2xvc2VcbiAgY29uZmlybSgpOiB2b2lkIHtcbiAgICB0aGlzLnVwZGF0ZURpc3BsYXkoKVxuICAgIC8vIERpc3BhdGNoIGV2ZW50IHRvIG5vdGlmeSBob3RlbC1zZWFyY2ggY29udHJvbGxlclxuICAgIHRoaXMuZGlzcGF0Y2hHdWVzdFVwZGF0ZUV2ZW50KClcbiAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICB9XG5cbiAgLy8gVXBkYXRlIGNvdW50IGRpc3BsYXlzIGFuZCBoaWRkZW4gaW5wdXRzXG4gIHByaXZhdGUgdXBkYXRlQ291bnRzKCk6IHZvaWQge1xuICAgIHRoaXMucm9vbXNDb3VudFRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMucm9vbXNWYWx1ZS50b1N0cmluZygpXG4gICAgdGhpcy5hZHVsdHNDb3VudFRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMuYWR1bHRzVmFsdWUudG9TdHJpbmcoKVxuICAgIHRoaXMuY2hpbGRyZW5Db3VudFRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMuY2hpbGRyZW5WYWx1ZS50b1N0cmluZygpXG4gICAgXG4gICAgdGhpcy5yb29tc0lucHV0VGFyZ2V0LnZhbHVlID0gdGhpcy5yb29tc1ZhbHVlLnRvU3RyaW5nKClcbiAgICB0aGlzLmFkdWx0c0lucHV0VGFyZ2V0LnZhbHVlID0gdGhpcy5hZHVsdHNWYWx1ZS50b1N0cmluZygpXG4gICAgdGhpcy5jaGlsZHJlbklucHV0VGFyZ2V0LnZhbHVlID0gdGhpcy5jaGlsZHJlblZhbHVlLnRvU3RyaW5nKClcbiAgfVxuXG4gIC8vIFVwZGF0ZSBkaXNwbGF5IHRleHRcbiAgcHJpdmF0ZSB1cGRhdGVEaXNwbGF5KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmhhc0Rpc3BsYXlUZXh0VGFyZ2V0KSB7XG4gICAgICB0aGlzLmRpc3BsYXlUZXh0VGFyZ2V0LnRleHRDb250ZW50ID0gYCR7dGhpcy5yb29tc1ZhbHVlfVx1OTVGNFx1NjIzRiAke3RoaXMuYWR1bHRzVmFsdWV9XHU2MjEwXHU0RUJBICR7dGhpcy5jaGlsZHJlblZhbHVlfVx1NTEzRlx1N0FFNWBcbiAgICB9XG4gIH1cblxuICAvLyBEaXNwYXRjaCBldmVudCB0byBub3RpZnkgaG90ZWwtc2VhcmNoIGNvbnRyb2xsZXJcbiAgcHJpdmF0ZSBkaXNwYXRjaEd1ZXN0VXBkYXRlRXZlbnQoKTogdm9pZCB7XG4gICAgY29uc3QgZ3Vlc3RVcGRhdGVFdmVudCA9IG5ldyBDdXN0b21FdmVudCgnaG90ZWwtZ3Vlc3Qtc2VsZWN0b3I6Z3Vlc3RzLXVwZGF0ZWQnLCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgcm9vbXM6IHRoaXMucm9vbXNWYWx1ZSxcbiAgICAgICAgYWR1bHRzOiB0aGlzLmFkdWx0c1ZhbHVlLFxuICAgICAgICBjaGlsZHJlbjogdGhpcy5jaGlsZHJlblZhbHVlXG4gICAgICB9LFxuICAgICAgYnViYmxlczogdHJ1ZVxuICAgIH0pXG4gICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChndWVzdFVwZGF0ZUV2ZW50KVxuICAgIGNvbnNvbGUubG9nKCdIb3RlbCBndWVzdCBzZWxlY3RvcjogRGlzcGF0Y2hlZCBndWVzdCB1cGRhdGUgZXZlbnQnLCB7XG4gICAgICByb29tczogdGhpcy5yb29tc1ZhbHVlLFxuICAgICAgYWR1bHRzOiB0aGlzLmFkdWx0c1ZhbHVlLFxuICAgICAgY2hpbGRyZW46IHRoaXMuY2hpbGRyZW5WYWx1ZVxuICAgIH0pXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmludGVyZmFjZSBDYWxlbmRhckRheSB7XG4gIGRhdGU6IERhdGVcbiAgZGF5T2ZNb250aDogbnVtYmVyXG4gIGlzQ3VycmVudE1vbnRoOiBib29sZWFuXG4gIGlzVG9kYXk6IGJvb2xlYW5cbiAgaXNTZWxlY3RlZDogYm9vbGVhblxuICBpc0luUmFuZ2U6IGJvb2xlYW5cbiAgaXNEaXNhYmxlZDogYm9vbGVhblxuICBsYWJlbD86IHN0cmluZ1xuICBob2xpZGF5Pzogc3RyaW5nXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcIm1vZGFsXCIsIFwiY2FsZW5kYXJcIiwgXCJtb250aExhYmVsXCIsIFwicHJvbXB0VGV4dFwiLFxuICAgIFwiY2hlY2tJbklucHV0XCIsIFwiY2hlY2tPdXRJbnB1dFwiLCBcImNoZWNrSW5EaXNwbGF5XCIsIFwiY2hlY2tPdXREaXNwbGF5XCIsXG4gICAgXCJuaWdodHNEaXNwbGF5XCJcbiAgXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQ2hlY2tJbklucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQ2hlY2tPdXRJbnB1dFRhcmdldDogYm9vbGVhblxuICBcbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBjaGVja0luOiBTdHJpbmcsXG4gICAgY2hlY2tPdXQ6IFN0cmluZyxcbiAgICBzZWxlY3RpbmdDaGVja0luOiBCb29sZWFuXG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IG1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNhbGVuZGFyVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IG1vbnRoTGFiZWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgcHJvbXB0VGV4dFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjaGVja0luSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjaGVja091dElucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hlY2tJbkRpc3BsYXlUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hlY2tPdXREaXNwbGF5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc05pZ2h0c0Rpc3BsYXlUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBuaWdodHNEaXNwbGF5VGFyZ2V0OiBIVE1MRWxlbWVudFxuXG4gIGRlY2xhcmUgY2hlY2tJblZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBjaGVja091dFZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBzZWxlY3RpbmdDaGVja0luVmFsdWU6IGJvb2xlYW5cblxuICBwcml2YXRlIGN1cnJlbnRNb250aDogRGF0ZSA9IG5ldyBEYXRlKClcbiAgcHJpdmF0ZSBjaGVja0luRGF0ZTogRGF0ZSB8IG51bGwgPSBudWxsXG4gIHByaXZhdGUgY2hlY2tPdXREYXRlOiBEYXRlIHwgbnVsbCA9IG51bGxcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIE9ubHkgaW5pdGlhbGl6ZSBpZiBpbnB1dCB0YXJnZXRzIGV4aXN0IChtb2RhbCB2aWV3KVxuICAgIGlmICh0aGlzLmhhc0NoZWNrSW5JbnB1dFRhcmdldCAmJiB0aGlzLmhhc0NoZWNrT3V0SW5wdXRUYXJnZXQpIHtcbiAgICAgIGlmICh0aGlzLmNoZWNrSW5JbnB1dFRhcmdldC52YWx1ZSkge1xuICAgICAgICB0aGlzLmNoZWNrSW5EYXRlID0gdGhpcy5wYXJzZUxvY2FsRGF0ZSh0aGlzLmNoZWNrSW5JbnB1dFRhcmdldC52YWx1ZSlcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmNoZWNrT3V0SW5wdXRUYXJnZXQudmFsdWUpIHtcbiAgICAgICAgdGhpcy5jaGVja091dERhdGUgPSB0aGlzLnBhcnNlTG9jYWxEYXRlKHRoaXMuY2hlY2tPdXRJbnB1dFRhcmdldC52YWx1ZSlcbiAgICAgIH1cbiAgICAgIHRoaXMudXBkYXRlRGlzcGxheSgpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBwYXJzZUxvY2FsRGF0ZShkYXRlU3RyOiBzdHJpbmcpOiBEYXRlIHtcbiAgICAvLyBQYXJzZSBkYXRlIHN0cmluZyBhcyBsb2NhbCBkYXRlIChZWVlZLU1NLUREKVxuICAgIGNvbnN0IHBhcnRzID0gZGF0ZVN0ci5zcGxpdCgnLScpXG4gICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMykge1xuICAgICAgY29uc3QgeWVhciA9IHBhcnNlSW50KHBhcnRzWzBdLCAxMClcbiAgICAgIGNvbnN0IG1vbnRoID0gcGFyc2VJbnQocGFydHNbMV0sIDEwKSAtIDEgLy8gTW9udGggaXMgMC1pbmRleGVkXG4gICAgICBjb25zdCBkYXkgPSBwYXJzZUludChwYXJ0c1syXSwgMTApXG4gICAgICByZXR1cm4gbmV3IERhdGUoeWVhciwgbW9udGgsIGRheSlcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBEYXRlKClcbiAgfVxuXG4gIG9wZW5Nb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLnNlbGVjdGluZ0NoZWNrSW5WYWx1ZSA9IHRydWVcbiAgICB0aGlzLnByb21wdFRleHRUYXJnZXQudGV4dENvbnRlbnQgPSBcIlx1OEJGN1x1OTAwOVx1NjJFOVx1NTE2NVx1NEY0Rlx1NjVFNVx1NjcxRlwiXG4gICAgdGhpcy5jdXJyZW50TW9udGggPSBuZXcgRGF0ZSgpXG4gICAgdGhpcy5yZW5kZXJNdWx0aU1vbnRoQ2FsZW5kYXIoKVxuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbidcbiAgfVxuXG4gIGNsb3NlTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJ1xuICB9XG5cbiAgc2VsZWN0RGF0ZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50XG4gICAgY29uc3QgZGF0ZVN0ciA9IGJ1dHRvbi5kYXRhc2V0LmRhdGVcbiAgICBpZiAoIWRhdGVTdHIpIHJldHVyblxuXG4gICAgY29uc3Qgc2VsZWN0ZWREYXRlID0gdGhpcy5wYXJzZUxvY2FsRGF0ZShkYXRlU3RyKVxuICAgIFxuICAgIGlmICh0aGlzLnNlbGVjdGluZ0NoZWNrSW5WYWx1ZSkge1xuICAgICAgLy8gU2VsZWN0aW5nIGNoZWNrLWluIGRhdGVcbiAgICAgIHRoaXMuY2hlY2tJbkRhdGUgPSBzZWxlY3RlZERhdGVcbiAgICAgIHRoaXMuY2hlY2tPdXREYXRlID0gbnVsbCAvLyBSZXNldCBjaGVjay1vdXQgd2hlbiBjaGFuZ2luZyBjaGVjay1pblxuICAgICAgdGhpcy5zZWxlY3RpbmdDaGVja0luVmFsdWUgPSBmYWxzZVxuICAgICAgdGhpcy5wcm9tcHRUZXh0VGFyZ2V0LnRleHRDb250ZW50ID0gXCJcdThCRjdcdTkwMDlcdTYyRTlcdTc5QkJcdTVFOTdcdTY1RTVcdTY3MUZcIlxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTZWxlY3RpbmcgY2hlY2stb3V0IGRhdGVcbiAgICAgIGlmICh0aGlzLmNoZWNrSW5EYXRlICYmIHNlbGVjdGVkRGF0ZSA8PSB0aGlzLmNoZWNrSW5EYXRlKSB7XG4gICAgICAgIC8vIElmIHNlbGVjdGVkIGRhdGUgaXMgYmVmb3JlIG9yIHNhbWUgYXMgY2hlY2staW4sIG1ha2UgaXQgdGhlIG5ldyBjaGVjay1pblxuICAgICAgICB0aGlzLmNoZWNrSW5EYXRlID0gc2VsZWN0ZWREYXRlXG4gICAgICAgIHRoaXMuY2hlY2tPdXREYXRlID0gbnVsbFxuICAgICAgICB0aGlzLnByb21wdFRleHRUYXJnZXQudGV4dENvbnRlbnQgPSBcIlx1OEJGN1x1OTAwOVx1NjJFOVx1NzlCQlx1NUU5N1x1NjVFNVx1NjcxRlwiXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNoZWNrT3V0RGF0ZSA9IHNlbGVjdGVkRGF0ZVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMucmVuZGVyTXVsdGlNb250aENhbGVuZGFyKClcbiAgfVxuXG4gIGNvbmZpcm0oKTogdm9pZCB7XG4gICAgLy8gQWx3YXlzIGFsbG93IGNvbmZpcm0gLSBldmVuIGlmIGRhdGVzIGFyZSByZXNldC9jbGVhcmVkXG4gICAgaWYgKHRoaXMuY2hlY2tJbkRhdGUgJiYgdGhpcy5jaGVja091dERhdGUpIHtcbiAgICAgIHRoaXMuY2hlY2tJbklucHV0VGFyZ2V0LnZhbHVlID0gdGhpcy5mb3JtYXREYXRlKHRoaXMuY2hlY2tJbkRhdGUpXG4gICAgICB0aGlzLmNoZWNrT3V0SW5wdXRUYXJnZXQudmFsdWUgPSB0aGlzLmZvcm1hdERhdGUodGhpcy5jaGVja091dERhdGUpXG4gICAgICB0aGlzLnVwZGF0ZURpc3BsYXkoKVxuICAgICAgXG4gICAgICAvLyBEaXNwYXRjaCBldmVudCB0byBub3RpZnkgaG90ZWwtc2VhcmNoIGNvbnRyb2xsZXJcbiAgICAgIHRoaXMuZGlzcGF0Y2hEYXRlVXBkYXRlRXZlbnQoKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJZiBkYXRlcyBhcmUgY2xlYXJlZCAoYWZ0ZXIgcmVzZXQpLCBjbGVhciB0aGUgaW5wdXRzXG4gICAgICBpZiAodGhpcy5oYXNDaGVja0luSW5wdXRUYXJnZXQpIHtcbiAgICAgICAgdGhpcy5jaGVja0luSW5wdXRUYXJnZXQudmFsdWUgPSAnJ1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaGFzQ2hlY2tPdXRJbnB1dFRhcmdldCkge1xuICAgICAgICB0aGlzLmNoZWNrT3V0SW5wdXRUYXJnZXQudmFsdWUgPSAnJ1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBEaXNwYXRjaCBldmVudCB3aXRoIGVtcHR5IGRhdGVzIHRvIGNsZWFyIGZpbHRlclxuICAgICAgY29uc3QgZGF0ZVVwZGF0ZUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdob3RlbC1kYXRlLXBpY2tlcjpkYXRlcy1zZWxlY3RlZCcsIHtcbiAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgY2hlY2tJbjogJycsXG4gICAgICAgICAgY2hlY2tPdXQ6ICcnXG4gICAgICAgIH0sXG4gICAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICAgIH0pXG4gICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGRhdGVVcGRhdGVFdmVudClcbiAgICB9XG4gICAgXG4gICAgdGhpcy5jbG9zZU1vZGFsKClcbiAgfVxuXG4gIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuY2hlY2tJbkRhdGUgPSBudWxsXG4gICAgdGhpcy5jaGVja091dERhdGUgPSBudWxsXG4gICAgdGhpcy5zZWxlY3RpbmdDaGVja0luVmFsdWUgPSB0cnVlXG4gICAgdGhpcy5wcm9tcHRUZXh0VGFyZ2V0LnRleHRDb250ZW50ID0gXCJcdThCRjdcdTkwMDlcdTYyRTlcdTUxNjVcdTRGNEZcdTY1RTVcdTY3MUZcIlxuICAgIFxuICAgIC8vIENsZWFyIHRoZSBpbnB1dCBmaWVsZHNcbiAgICBpZiAodGhpcy5oYXNDaGVja0luSW5wdXRUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2hlY2tJbklucHV0VGFyZ2V0LnZhbHVlID0gJydcbiAgICB9XG4gICAgaWYgKHRoaXMuaGFzQ2hlY2tPdXRJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5jaGVja091dElucHV0VGFyZ2V0LnZhbHVlID0gJydcbiAgICB9XG4gICAgXG4gICAgdGhpcy5yZW5kZXJNdWx0aU1vbnRoQ2FsZW5kYXIoKVxuICAgIHRoaXMudXBkYXRlRGlzcGxheSgpXG4gIH1cblxuICBwcmV2aW91c01vbnRoKCk6IHZvaWQge1xuICAgIHRoaXMuY3VycmVudE1vbnRoID0gbmV3IERhdGUodGhpcy5jdXJyZW50TW9udGguZ2V0RnVsbFllYXIoKSwgdGhpcy5jdXJyZW50TW9udGguZ2V0TW9udGgoKSAtIDEsIDEpXG4gICAgdGhpcy5yZW5kZXJNdWx0aU1vbnRoQ2FsZW5kYXIoKVxuICB9XG5cbiAgbmV4dE1vbnRoKCk6IHZvaWQge1xuICAgIHRoaXMuY3VycmVudE1vbnRoID0gbmV3IERhdGUodGhpcy5jdXJyZW50TW9udGguZ2V0RnVsbFllYXIoKSwgdGhpcy5jdXJyZW50TW9udGguZ2V0TW9udGgoKSArIDEsIDEpXG4gICAgdGhpcy5yZW5kZXJNdWx0aU1vbnRoQ2FsZW5kYXIoKVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJNdWx0aU1vbnRoQ2FsZW5kYXIoKTogdm9pZCB7XG4gICAgLy8gUmVuZGVyIDMgY29uc2VjdXRpdmUgbW9udGhzXG4gICAgbGV0IGh0bWwgPSAnJ1xuICAgIFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICBjb25zdCBkaXNwbGF5TW9udGggPSBuZXcgRGF0ZSh0aGlzLmN1cnJlbnRNb250aC5nZXRGdWxsWWVhcigpLCB0aGlzLmN1cnJlbnRNb250aC5nZXRNb250aCgpICsgaSwgMSlcbiAgICAgIGh0bWwgKz0gdGhpcy5yZW5kZXJTaW5nbGVNb250aChkaXNwbGF5TW9udGgpXG4gICAgfVxuICAgIFxuICAgIHRoaXMuY2FsZW5kYXJUYXJnZXQuaW5uZXJIVE1MID0gaHRtbFxuICAgIFxuICAgIC8vIFVwZGF0ZSBtb250aCBsYWJlbCB0byBzaG93IGZpcnN0IG1vbnRoXG4gICAgY29uc3QgeWVhciA9IHRoaXMuY3VycmVudE1vbnRoLmdldEZ1bGxZZWFyKClcbiAgICBjb25zdCBtb250aCA9IHRoaXMuY3VycmVudE1vbnRoLmdldE1vbnRoKClcbiAgICB0aGlzLm1vbnRoTGFiZWxUYXJnZXQudGV4dENvbnRlbnQgPSBgJHt5ZWFyfVx1NUU3NCR7bW9udGggKyAxfVx1NjcwOGBcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyU2luZ2xlTW9udGgoZGlzcGxheU1vbnRoOiBEYXRlKTogc3RyaW5nIHtcbiAgICBjb25zdCB5ZWFyID0gZGlzcGxheU1vbnRoLmdldEZ1bGxZZWFyKClcbiAgICBjb25zdCBtb250aCA9IGRpc3BsYXlNb250aC5nZXRNb250aCgpXG4gICAgXG4gICAgLy8gTW9udGggaGVhZGVyXG4gICAgbGV0IGh0bWwgPSBgPGRpdiBjbGFzcz1cIm1iLTZcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWxnIGZvbnQtYm9sZCB0ZXh0LWdyYXktOTAwIG1iLTNcIj4ke3llYXJ9XHU1RTc0JHttb250aCArIDF9XHU2NzA4PC9kaXY+XG4gICAgYFxuICAgIFxuICAgIGNvbnN0IGZpcnN0RGF5ID0gbmV3IERhdGUoeWVhciwgbW9udGgsIDEpXG4gICAgY29uc3QgbGFzdERheSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoICsgMSwgMClcbiAgICBjb25zdCBkYXlzSW5Nb250aCA9IGxhc3REYXkuZ2V0RGF0ZSgpXG4gICAgY29uc3Qgc3RhcnRpbmdEYXlPZldlZWsgPSBmaXJzdERheS5nZXREYXkoKVxuICAgIFxuICAgIGNvbnN0IGRheXM6IENhbGVuZGFyRGF5W10gPSBbXVxuICAgIFxuICAgIC8vIFByZXZpb3VzIG1vbnRoIGRheXNcbiAgICBjb25zdCBwcmV2TW9udGhMYXN0RGF5ID0gbmV3IERhdGUoeWVhciwgbW9udGgsIDApLmdldERhdGUoKVxuICAgIGZvciAobGV0IGkgPSBzdGFydGluZ0RheU9mV2VlayAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBjb25zdCBkYXkgPSBwcmV2TW9udGhMYXN0RGF5IC0gaVxuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoIC0gMSwgZGF5KVxuICAgICAgZGF5cy5wdXNoKHtcbiAgICAgICAgZGF0ZSxcbiAgICAgICAgZGF5T2ZNb250aDogZGF5LFxuICAgICAgICBpc0N1cnJlbnRNb250aDogZmFsc2UsXG4gICAgICAgIGlzVG9kYXk6IGZhbHNlLFxuICAgICAgICBpc1NlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgaXNJblJhbmdlOiBmYWxzZSxcbiAgICAgICAgaXNEaXNhYmxlZDogdGhpcy5pc0RhdGVEaXNhYmxlZChkYXRlKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gQ3VycmVudCBtb250aCBkYXlzXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXG4gICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICBcbiAgICBmb3IgKGxldCBkYXkgPSAxOyBkYXkgPD0gZGF5c0luTW9udGg7IGRheSsrKSB7XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoeWVhciwgbW9udGgsIGRheSlcbiAgICAgIGNvbnN0IGlzVG9kYXkgPSBkYXRlLmdldFRpbWUoKSA9PT0gdG9kYXkuZ2V0VGltZSgpXG4gICAgICBjb25zdCBpc1NlbGVjdGVkID0gdGhpcy5pc0RhdGVTZWxlY3RlZChkYXRlKVxuICAgICAgY29uc3QgaXNJblJhbmdlID0gdGhpcy5pc0RhdGVJblJhbmdlKGRhdGUpXG4gICAgICBcbiAgICAgIGRheXMucHVzaCh7XG4gICAgICAgIGRhdGUsXG4gICAgICAgIGRheU9mTW9udGg6IGRheSxcbiAgICAgICAgaXNDdXJyZW50TW9udGg6IHRydWUsXG4gICAgICAgIGlzVG9kYXksXG4gICAgICAgIGlzU2VsZWN0ZWQsXG4gICAgICAgIGlzSW5SYW5nZSxcbiAgICAgICAgaXNEaXNhYmxlZDogdGhpcy5pc0RhdGVEaXNhYmxlZChkYXRlKSxcbiAgICAgICAgbGFiZWw6IHRoaXMuZ2V0RGF0ZUxhYmVsKGRhdGUpLFxuICAgICAgICBob2xpZGF5OiB0aGlzLmdldEhvbGlkYXkoZGF0ZSlcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIE5leHQgbW9udGggZGF5c1xuICAgIGNvbnN0IHJlbWFpbmluZ0RheXMgPSA0MiAtIGRheXMubGVuZ3RoIC8vIDYgcm93cyAqIDcgZGF5c1xuICAgIGZvciAobGV0IGRheSA9IDE7IGRheSA8PSByZW1haW5pbmdEYXlzOyBkYXkrKykge1xuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoICsgMSwgZGF5KVxuICAgICAgZGF5cy5wdXNoKHtcbiAgICAgICAgZGF0ZSxcbiAgICAgICAgZGF5T2ZNb250aDogZGF5LFxuICAgICAgICBpc0N1cnJlbnRNb250aDogZmFsc2UsXG4gICAgICAgIGlzVG9kYXk6IGZhbHNlLFxuICAgICAgICBpc1NlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgaXNJblJhbmdlOiBmYWxzZSxcbiAgICAgICAgaXNEaXNhYmxlZDogdGhpcy5pc0RhdGVEaXNhYmxlZChkYXRlKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgaHRtbCArPSB0aGlzLnJlbmRlckRheXMoZGF5cylcbiAgICBodG1sICs9ICc8L2Rpdj4nIC8vIENsb3NlIG1vbnRoIGNvbnRhaW5lclxuICAgIFxuICAgIHJldHVybiBodG1sXG4gIH1cblxuICBwcml2YXRlIHJlbmRlckRheXMoZGF5czogQ2FsZW5kYXJEYXlbXSk6IHN0cmluZyB7XG4gICAgY29uc3Qgd2Vla2RheXMgPSBbJ1x1NjVFNScsICdcdTRFMDAnLCAnXHU0RThDJywgJ1x1NEUwOScsICdcdTU2REInLCAnXHU0RTk0JywgJ1x1NTE2RCddXG4gICAgXG4gICAgbGV0IGh0bWwgPSAnPGRpdiBjbGFzcz1cImdyaWQgZ3JpZC1jb2xzLTcgZ2FwLTEgbWItMlwiPidcbiAgICB3ZWVrZGF5cy5mb3JFYWNoKGRheSA9PiB7XG4gICAgICBodG1sICs9IGA8ZGl2IGNsYXNzPVwidGV4dC1jZW50ZXIgdGV4dC1zbSB0ZXh0LWdyYXktNTAwIHB5LTJcIj4ke2RheX08L2Rpdj5gXG4gICAgfSlcbiAgICBodG1sICs9ICc8L2Rpdj4nXG4gICAgXG4gICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cImdyaWQgZ3JpZC1jb2xzLTcgZ2FwLTFcIj4nXG4gICAgXG4gICAgZGF5cy5mb3JFYWNoKGRheSA9PiB7XG4gICAgICBjb25zdCBkYXRlU3RyID0gdGhpcy5mb3JtYXREYXRlKGRheS5kYXRlKVxuICAgICAgY29uc3QgYmFzZUNsYXNzZXMgPSBcInJlbGF0aXZlIGgtMTIgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC1zbSByb3VuZGVkLWxnXCJcbiAgICAgIFxuICAgICAgbGV0IGNsYXNzZXMgPSBiYXNlQ2xhc3Nlc1xuICAgICAgbGV0IHRleHRDb2xvciA9IGRheS5pc0N1cnJlbnRNb250aCA/ICd0ZXh0LWdyYXktOTAwJyA6ICd0ZXh0LWdyYXktMzAwJ1xuICAgICAgbGV0IGJnQ29sb3IgPSAnJ1xuICAgICAgXG4gICAgICBpZiAoZGF5LmlzRGlzYWJsZWQpIHtcbiAgICAgICAgY2xhc3NlcyArPSAnIG9wYWNpdHktNDAgY3Vyc29yLW5vdC1hbGxvd2VkJ1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2xhc3NlcyArPSAnIGN1cnNvci1wb2ludGVyIGhvdmVyOmJnLWdyYXktMTAwJ1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoZGF5LmlzU2VsZWN0ZWQpIHtcbiAgICAgICAgYmdDb2xvciA9ICdiZy15ZWxsb3ctNDAwJ1xuICAgICAgICB0ZXh0Q29sb3IgPSAndGV4dC13aGl0ZSBmb250LWJvbGQnXG4gICAgICB9IGVsc2UgaWYgKGRheS5pc0luUmFuZ2UpIHtcbiAgICAgICAgYmdDb2xvciA9ICdiZy15ZWxsb3ctNTAnXG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChkYXkuaXNUb2RheSAmJiAhZGF5LmlzU2VsZWN0ZWQpIHtcbiAgICAgICAgY2xhc3NlcyArPSAnIGJvcmRlci0yIGJvcmRlci1ibHVlLTUwMCdcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgbGFiZWwgPSBkYXkubGFiZWwgfHwgZGF5LmhvbGlkYXkgfHwgJydcbiAgICAgIGNvbnN0IGxhYmVsQ2xhc3MgPSBkYXkuaG9saWRheSA/ICd0ZXh0LXJlZC01MDAnIDogJ3RleHQtYmx1ZS01MDAnXG4gICAgICBcbiAgICAgIGh0bWwgKz0gYFxuICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgIGRhdGEtZGF0ZT1cIiR7ZGF0ZVN0cn1cIlxuICAgICAgICAgIGRhdGEtYWN0aW9uPVwiY2xpY2stPmhvdGVsLWRhdGUtcGlja2VyI3NlbGVjdERhdGVcIlxuICAgICAgICAgIGNsYXNzPVwiJHtjbGFzc2VzfSAke2JnQ29sb3J9ICR7dGV4dENvbG9yfVwiXG4gICAgICAgICAgJHtkYXkuaXNEaXNhYmxlZCA/ICdkaXNhYmxlZCcgOiAnJ31cbiAgICAgICAgPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZm9udC1tZWRpdW1cIj4ke2RheS5kYXlPZk1vbnRofTwvc3Bhbj5cbiAgICAgICAgICAke2xhYmVsID8gYDxzcGFuIGNsYXNzPVwidGV4dC14cyAke2xhYmVsQ2xhc3N9IGFic29sdXRlIGJvdHRvbS0wXCI+JHtsYWJlbH08L3NwYW4+YCA6ICcnfVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIGBcbiAgICB9KVxuICAgIFxuICAgIGh0bWwgKz0gJzwvZGl2PidcbiAgICByZXR1cm4gaHRtbFxuICB9XG5cbiAgcHJpdmF0ZSBpc0RhdGVEaXNhYmxlZChkYXRlOiBEYXRlKTogYm9vbGVhbiB7XG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXG4gICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICByZXR1cm4gZGF0ZSA8IHRvZGF5XG4gIH1cblxuICBwcml2YXRlIGlzRGF0ZVNlbGVjdGVkKGRhdGU6IERhdGUpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5jaGVja0luRGF0ZSAmJiB0aGlzLmlzU2FtZURheShkYXRlLCB0aGlzLmNoZWNrSW5EYXRlKSkgcmV0dXJuIHRydWVcbiAgICBpZiAodGhpcy5jaGVja091dERhdGUgJiYgdGhpcy5pc1NhbWVEYXkoZGF0ZSwgdGhpcy5jaGVja091dERhdGUpKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgcHJpdmF0ZSBpc0RhdGVJblJhbmdlKGRhdGU6IERhdGUpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuY2hlY2tJbkRhdGUgfHwgIXRoaXMuY2hlY2tPdXREYXRlKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gZGF0ZSA+IHRoaXMuY2hlY2tJbkRhdGUgJiYgZGF0ZSA8IHRoaXMuY2hlY2tPdXREYXRlXG4gIH1cblxuICBwcml2YXRlIGlzU2FtZURheShkYXRlMTogRGF0ZSwgZGF0ZTI6IERhdGUpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZGF0ZTEuZ2V0RnVsbFllYXIoKSA9PT0gZGF0ZTIuZ2V0RnVsbFllYXIoKSAmJlxuICAgICAgICAgICBkYXRlMS5nZXRNb250aCgpID09PSBkYXRlMi5nZXRNb250aCgpICYmXG4gICAgICAgICAgIGRhdGUxLmdldERhdGUoKSA9PT0gZGF0ZTIuZ2V0RGF0ZSgpXG4gIH1cblxuICBwcml2YXRlIGZvcm1hdERhdGUoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKVxuICAgIGNvbnN0IG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJylcbiAgICBjb25zdCBkYXkgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJylcbiAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YFxuICB9XG5cbiAgcHJpdmF0ZSBnZXREYXRlTGFiZWwoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXG4gICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICBjb25zdCB0YXJnZXREYXRlID0gbmV3IERhdGUoZGF0ZSlcbiAgICB0YXJnZXREYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgXG4gICAgY29uc3QgZGlmZlRpbWUgPSB0YXJnZXREYXRlLmdldFRpbWUoKSAtIHRvZGF5LmdldFRpbWUoKVxuICAgIGNvbnN0IGRpZmZEYXlzID0gTWF0aC5yb3VuZChkaWZmVGltZSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSlcbiAgICBcbiAgICBpZiAoZGlmZkRheXMgPT09IDApIHJldHVybiAnXHU0RUNBXHU1OTI5J1xuICAgIGlmIChkaWZmRGF5cyA9PT0gMSkgcmV0dXJuICdcdTY2MEVcdTU5MjknXG4gICAgaWYgKGRpZmZEYXlzID09PSAyKSByZXR1cm4gJ1x1NTQwRVx1NTkyOSdcbiAgICBcbiAgICBjb25zdCB3ZWVrZGF5cyA9IFsnXHU1NDY4XHU2NUU1JywgJ1x1NTQ2OFx1NEUwMCcsICdcdTU0NjhcdTRFOEMnLCAnXHU1NDY4XHU0RTA5JywgJ1x1NTQ2OFx1NTZEQicsICdcdTU0NjhcdTRFOTQnLCAnXHU1NDY4XHU1MTZEJ11cbiAgICByZXR1cm4gd2Vla2RheXNbZGF0ZS5nZXREYXkoKV1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0SG9saWRheShkYXRlOiBEYXRlKTogc3RyaW5nIHtcbiAgICAvLyBTaW1wbGUgaG9saWRheSBtYXBwaW5nIC0gY2FuIGJlIGV4cGFuZGVkXG4gICAgY29uc3QgbW9udGggPSBkYXRlLmdldE1vbnRoKCkgKyAxXG4gICAgY29uc3QgZGF5ID0gZGF0ZS5nZXREYXRlKClcbiAgICBcbiAgICBpZiAobW9udGggPT09IDEgJiYgZGF5ID09PSAxKSByZXR1cm4gJ1x1NTE0M1x1NjVFNidcbiAgICBpZiAobW9udGggPT09IDIgJiYgZGF5ID09PSAxNCkgcmV0dXJuICdcdTYwQzVcdTRFQkFcdTgyODInXG4gICAgaWYgKG1vbnRoID09PSA1ICYmIGRheSA9PT0gMSkgcmV0dXJuICdcdTUyQjNcdTUyQThcdTgyODInXG4gICAgaWYgKG1vbnRoID09PSA2ICYmIGRheSA9PT0gMSkgcmV0dXJuICdcdTUxM0ZcdTdBRTVcdTgyODInXG4gICAgaWYgKG1vbnRoID09PSAxMCAmJiBkYXkgPT09IDEpIHJldHVybiAnXHU1NkZEXHU1RTg2XHU4MjgyJ1xuICAgIGlmIChtb250aCA9PT0gMTIgJiYgZGF5ID09PSAyNSkgcmV0dXJuICdcdTU3MjNcdThCREVcdTgyODInXG4gICAgXG4gICAgcmV0dXJuICcnXG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZURpc3BsYXkoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY2hlY2tJbkRhdGUpIHtcbiAgICAgIGNvbnN0IG1vbnRoID0gdGhpcy5jaGVja0luRGF0ZS5nZXRNb250aCgpICsgMVxuICAgICAgY29uc3QgZGF5ID0gdGhpcy5jaGVja0luRGF0ZS5nZXREYXRlKClcbiAgICAgIHRoaXMuY2hlY2tJbkRpc3BsYXlUYXJnZXQudGV4dENvbnRlbnQgPSBgJHttb250aH1cdTY3MDgke2RheX1cdTY1RTVgXG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBsYWJlbCBiZWxvdyBjaGVjay1pbiBkYXRlXG4gICAgICBjb25zdCBjaGVja0luTGFiZWwgPSB0aGlzLmNoZWNrSW5EaXNwbGF5VGFyZ2V0Lm5leHRFbGVtZW50U2libGluZ1xuICAgICAgaWYgKGNoZWNrSW5MYWJlbCkge1xuICAgICAgICBjaGVja0luTGFiZWwudGV4dENvbnRlbnQgPSB0aGlzLmdldERhdGVMYWJlbCh0aGlzLmNoZWNrSW5EYXRlKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5jaGVja091dERhdGUpIHtcbiAgICAgIGNvbnN0IG1vbnRoID0gdGhpcy5jaGVja091dERhdGUuZ2V0TW9udGgoKSArIDFcbiAgICAgIGNvbnN0IGRheSA9IHRoaXMuY2hlY2tPdXREYXRlLmdldERhdGUoKVxuICAgICAgdGhpcy5jaGVja091dERpc3BsYXlUYXJnZXQudGV4dENvbnRlbnQgPSBgJHttb250aH1cdTY3MDgke2RheX1cdTY1RTVgXG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBsYWJlbCBiZWxvdyBjaGVjay1vdXQgZGF0ZVxuICAgICAgY29uc3QgY2hlY2tPdXRMYWJlbCA9IHRoaXMuY2hlY2tPdXREaXNwbGF5VGFyZ2V0Lm5leHRFbGVtZW50U2libGluZ1xuICAgICAgaWYgKGNoZWNrT3V0TGFiZWwpIHtcbiAgICAgICAgY2hlY2tPdXRMYWJlbC50ZXh0Q29udGVudCA9IHRoaXMuZ2V0RGF0ZUxhYmVsKHRoaXMuY2hlY2tPdXREYXRlKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5jaGVja0luRGF0ZSAmJiB0aGlzLmNoZWNrT3V0RGF0ZSAmJiB0aGlzLmhhc05pZ2h0c0Rpc3BsYXlUYXJnZXQpIHtcbiAgICAgIGNvbnN0IG5pZ2h0cyA9IE1hdGguZmxvb3IoKHRoaXMuY2hlY2tPdXREYXRlLmdldFRpbWUoKSAtIHRoaXMuY2hlY2tJbkRhdGUuZ2V0VGltZSgpKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSlcbiAgICAgIHRoaXMubmlnaHRzRGlzcGxheVRhcmdldC50ZXh0Q29udGVudCA9IGAke25pZ2h0c31cdTY2NUFgXG4gICAgfVxuICB9XG5cbiAgLy8gRGlzcGF0Y2ggZGF0ZSB1cGRhdGUgZXZlbnQgZm9yIGhvdGVsLXNlYXJjaCBjb250cm9sbGVyXG4gIHByaXZhdGUgZGlzcGF0Y2hEYXRlVXBkYXRlRXZlbnQoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmNoZWNrSW5EYXRlIHx8ICF0aGlzLmNoZWNrT3V0RGF0ZSkgcmV0dXJuXG4gICAgXG4gICAgY29uc3QgZGF0ZVVwZGF0ZUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdob3RlbC1kYXRlLXBpY2tlcjpkYXRlcy1zZWxlY3RlZCcsIHtcbiAgICAgIGRldGFpbDoge1xuICAgICAgICBjaGVja0luOiB0aGlzLmZvcm1hdERhdGUodGhpcy5jaGVja0luRGF0ZSksXG4gICAgICAgIGNoZWNrT3V0OiB0aGlzLmZvcm1hdERhdGUodGhpcy5jaGVja091dERhdGUpXG4gICAgICB9LFxuICAgICAgYnViYmxlczogdHJ1ZVxuICAgIH0pXG4gICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChkYXRlVXBkYXRlRXZlbnQpXG4gICAgY29uc29sZS5sb2coJ0hvdGVsIGRhdGUgcGlja2VyOiBEaXNwYXRjaGVkIGRhdGVzIHVwZGF0ZSBldmVudCcsIHtcbiAgICAgIGNoZWNrSW46IHRoaXMuZm9ybWF0RGF0ZSh0aGlzLmNoZWNrSW5EYXRlKSxcbiAgICAgIGNoZWNrT3V0OiB0aGlzLmZvcm1hdERhdGUodGhpcy5jaGVja091dERhdGUpXG4gICAgfSlcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwibW9kYWxcIixcbiAgICBcImJhY2tkcm9wXCIsXG4gICAgXCJwYXltZW50T3B0aW9uXCIsXG4gICAgXCJwYXltZW50TWV0aG9kSW5wdXRcIlxuICBdXG5cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICB0b3RhbFByaWNlOiBTdHJpbmdcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgYmFja2Ryb3BUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgcGF5bWVudE9wdGlvblRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBwYXltZW50TWV0aG9kSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0b3RhbFByaWNlVmFsdWU6IHN0cmluZ1xuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJQYXltZW50TW9kYWwgY29ubmVjdGVkXCIpXG4gIH1cblxuICAvLyBcdTYyNTNcdTVGMDBcdTVGMzlcdTdBOTdcbiAgb3BlbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgdGhpcy5iYWNrZHJvcFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCJcbiAgfVxuXG4gIC8vIFx1NTE3M1x1OTVFRFx1NUYzOVx1N0E5N1xuICBjbG9zZShldmVudD86IEV2ZW50KTogdm9pZCB7XG4gICAgaWYgKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgfVxuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgIHRoaXMuYmFja2Ryb3BUYXJnZXQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcIlwiXG4gIH1cblxuICAvLyBcdTcwQjlcdTUxRkJcdTgwQ0NcdTY2NkZcdTUxNzNcdTk1RURcbiAgY2xvc2VPbkJhY2tkcm9wKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGlmIChldmVudC50YXJnZXQgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2xvc2UoKVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1OTAwOVx1NjJFOVx1NjUyRlx1NEVEOFx1NjVCOVx1NUYwRlxuICBzZWxlY3RQYXltZW50KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBwYXltZW50TWV0aG9kID0gdGFyZ2V0LmRhdGFzZXQucGF5bWVudE1ldGhvZFxuXG4gICAgLy8gXHU3OUZCXHU5NjY0XHU2MjQwXHU2NzA5XHU5MDA5XHU0RTJEXHU3MkI2XHU2MDAxXG4gICAgdGhpcy5wYXltZW50T3B0aW9uVGFyZ2V0cy5mb3JFYWNoKG9wdGlvbiA9PiB7XG4gICAgICBvcHRpb24uY2xhc3NMaXN0LnJlbW92ZShcImJvcmRlci1ibHVlLTUwMFwiLCBcImJnLWJsdWUtNTBcIilcbiAgICAgIG9wdGlvbi5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWdyYXktMjAwXCIpXG4gICAgICBjb25zdCBjaGVja21hcmsgPSBvcHRpb24ucXVlcnlTZWxlY3RvcihcIi5jaGVja21hcmtcIilcbiAgICAgIGlmIChjaGVja21hcmspIHtcbiAgICAgICAgY2hlY2ttYXJrLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gXHU2REZCXHU1MkEwXHU5MDA5XHU0RTJEXHU3MkI2XHU2MDAxXG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItZ3JheS0yMDBcIilcbiAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1ibHVlLTUwMFwiLCBcImJnLWJsdWUtNTBcIilcbiAgICBjb25zdCBjaGVja21hcmsgPSB0YXJnZXQucXVlcnlTZWxlY3RvcihcIi5jaGVja21hcmtcIilcbiAgICBpZiAoY2hlY2ttYXJrKSB7XG4gICAgICBjaGVja21hcmsuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgIH1cblxuICAgIC8vIFx1NjZGNFx1NjVCMFx1OTY5MFx1ODVDRlx1NzY4NFx1ODg2OFx1NTM1NVx1NUI1N1x1NkJCNVxuICAgIGlmIChwYXltZW50TWV0aG9kKSB7XG4gICAgICB0aGlzLnBheW1lbnRNZXRob2RJbnB1dFRhcmdldC52YWx1ZSA9IHBheW1lbnRNZXRob2RcbiAgICB9XG4gIH1cblxuICAvLyBcdTc4NkVcdThCQTRcdTRFRDhcdTZCM0UgLSBcdTYzRDBcdTRFQTRcdTg4NjhcdTUzNTVcbiAgY29uZmlybVBheW1lbnQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGZvcm0gPSB0aGlzLmVsZW1lbnQuY2xvc2VzdChcImZvcm1cIikgYXMgSFRNTEZvcm1FbGVtZW50XG4gICAgaWYgKGZvcm0pIHtcbiAgICAgIGZvcm0ucmVxdWVzdFN1Ym1pdCgpXG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXIge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcInBhc3N3b3JkTW9kYWxcIixcbiAgICBcImZpbmdlcnByaW50TW9kYWxcIixcbiAgICBcInByb2Nlc3NpbmdNb2RhbFwiLFxuICAgIFwic3RhdHVzTW9kYWxcIixcbiAgICBcInBhc3N3b3JkRG90c1wiLFxuICAgIFwicGFzc3dvcmRBbW91bnRcIixcbiAgICBcInByb2Nlc3NpbmdBbW91bnRcIixcbiAgICBcInVzZXJFbWFpbFwiLFxuICAgIFwic3RhdHVzQW1vdW50XCIsXG4gICAgXCJzdGF0dXNVc2VyRW1haWxcIixcbiAgICBcInN0YXR1c0ljb25cIixcbiAgICBcInN0YXR1c1RleHRcIixcbiAgICBcInN0YXR1c0RvdHNcIlxuICBdXG5cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBhbW91bnQ6IFN0cmluZyxcbiAgICB1c2VyRW1haWw6IFN0cmluZyxcbiAgICBwYXltZW50VXJsOiBTdHJpbmcsXG4gICAgc3VjY2Vzc1VybDogU3RyaW5nXG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHBhc3N3b3JkTW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUGFzc3dvcmRNb2RhbFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0ZpbmdlcnByaW50TW9kYWxUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNQcm9jZXNzaW5nTW9kYWxUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBzdGF0dXNNb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNTdGF0dXNNb2RhbFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IHBhc3N3b3JkRG90c1RhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNQYXNzd29yZERvdHNUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBwYXNzd29yZEFtb3VudFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNQYXNzd29yZEFtb3VudFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IHN0YXR1c0Ftb3VudFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNTdGF0dXNBbW91bnRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBzdGF0dXNVc2VyRW1haWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzU3RhdHVzVXNlckVtYWlsVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgc3RhdHVzSWNvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNTdGF0dXNJY29uVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgc3RhdHVzVGV4dFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNTdGF0dXNUZXh0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgc3RhdHVzRG90c1RhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNTdGF0dXNEb3RzVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgYW1vdW50VmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHJlYWRvbmx5IHVzZXJFbWFpbFZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSByZWFkb25seSBwYXltZW50VXJsVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHJlYWRvbmx5IHN1Y2Nlc3NVcmxWYWx1ZTogc3RyaW5nXG5cbiAgcHJpdmF0ZSBwYXNzd29yZDogc3RyaW5nID0gXCJcIlxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgLy8gSW5pdGlhbGl6ZSBjb250cm9sbGVyXG4gICAgY29uc29sZS5sb2coXCJQYXltZW50IGNvbmZpcm1hdGlvbiBjb250cm9sbGVyIGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgc2hvd1Bhc3N3b3JkTW9kYWwoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc1Bhc3N3b3JkTW9kYWxUYXJnZXQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJQYXNzd29yZCBtb2RhbCB0YXJnZXQgbm90IGZvdW5kXCIpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgdGhpcy5wYXNzd29yZCA9IFwiXCJcbiAgICBpZiAodGhpcy5oYXNQYXNzd29yZERvdHNUYXJnZXQpIHtcbiAgICAgIHRoaXMudXBkYXRlUGFzc3dvcmREb3RzKClcbiAgICB9XG4gICAgaWYgKHRoaXMuaGFzUGFzc3dvcmRBbW91bnRUYXJnZXQpIHtcbiAgICAgIHRoaXMucGFzc3dvcmRBbW91bnRUYXJnZXQudGV4dENvbnRlbnQgPSB0aGlzLmFtb3VudFZhbHVlXG4gICAgfVxuICAgIHRoaXMucGFzc3dvcmRNb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICB9XG5cbiAgY2xvc2VQYXNzd29yZE1vZGFsKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmhhc1Bhc3N3b3JkTW9kYWxUYXJnZXQpIHtcbiAgICAgIHRoaXMucGFzc3dvcmRNb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIH1cbiAgfVxuXG4gIGlucHV0UGFzc3dvcmQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGNvbnN0IG51bWJlciA9IGJ1dHRvbi5kYXRhc2V0Lm51bWJlclxuXG4gICAgaWYgKCFudW1iZXIpIHJldHVyblxuXG4gICAgaWYgKHRoaXMucGFzc3dvcmQubGVuZ3RoIDwgNikge1xuICAgICAgdGhpcy5wYXNzd29yZCArPSBudW1iZXJcbiAgICAgIHRoaXMudXBkYXRlUGFzc3dvcmREb3RzKClcblxuICAgICAgaWYgKHRoaXMucGFzc3dvcmQubGVuZ3RoID09PSA2KSB7XG4gICAgICAgIHRoaXMucHJvY2Vzc1Bhc3N3b3JkUGF5bWVudCgpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZGVsZXRlUGFzc3dvcmQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucGFzc3dvcmQubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5wYXNzd29yZCA9IHRoaXMucGFzc3dvcmQuc2xpY2UoMCwgLTEpXG4gICAgICB0aGlzLnVwZGF0ZVBhc3N3b3JkRG90cygpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVQYXNzd29yZERvdHMoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc1Bhc3N3b3JkRG90c1RhcmdldCkgcmV0dXJuXG4gICAgXG4gICAgY29uc3QgZG90cyA9IHRoaXMucGFzc3dvcmREb3RzVGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wYXNzd29yZC1kb3QnKVxuICAgIGRvdHMuZm9yRWFjaCgoZG90LCBpbmRleCkgPT4ge1xuICAgICAgaWYgKGluZGV4IDwgdGhpcy5wYXNzd29yZC5sZW5ndGgpIHtcbiAgICAgICAgZG90LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb3QuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgcHJvY2Vzc1Bhc3N3b3JkUGF5bWVudCgpOiB2b2lkIHtcbiAgICAvLyBEbyBOT1QgY2xvc2UgbW9kYWwgaGVyZSAtIHdhaXQgZm9yIHZlcmlmaWNhdGlvbiByZXN1bHRcbiAgICAvLyBGaXJzdCB2ZXJpZnkgcGFzc3dvcmQgYmVmb3JlIHNob3dpbmcgcGF5bWVudCBzdGF0dXNcbiAgICB0aGlzLnZlcmlmeVBhc3N3b3JkVGhlblBheSgpXG4gIH1cblxuICBhc3luYyB2ZXJpZnlQYXNzd29yZFRoZW5QYXkoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENhbGwgdmVyaWZ5IEFQSSBmaXJzdFxuICAgICAgY29uc3QgdmVyaWZ5UmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL3Byb2ZpbGUvdmVyaWZ5X3BheV9wYXNzd29yZCcsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICdYLUNTUkYtVG9rZW4nOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxNZXRhRWxlbWVudD4oJ21ldGFbbmFtZT1cImNzcmYtdG9rZW5cIl0nKT8uY29udGVudCB8fCAnJ1xuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgcGF5X3Bhc3N3b3JkOiB0aGlzLnBhc3N3b3JkXG4gICAgICAgIH0pXG4gICAgICB9KVxuXG4gICAgICBjb25zdCB2ZXJpZnlEYXRhID0gYXdhaXQgdmVyaWZ5UmVzcG9uc2UuanNvbigpXG5cbiAgICAgIGlmICghdmVyaWZ5UmVzcG9uc2Uub2sgfHwgIXZlcmlmeURhdGEuc3VjY2Vzcykge1xuICAgICAgICAvLyBQYXNzd29yZCBpcyB3cm9uZyAtIHNob3cgdG9hc3QgYW5kIHJlc2V0XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB2ZXJpZnlEYXRhLm1lc3NhZ2UgfHwgJ1x1NjUyRlx1NEVEOFx1NUJDNlx1NzgwMVx1OTUxOVx1OEJFRidcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjYyRlx1OTcwMFx1ODk4MVx1OEJCRVx1N0Y2RVx1NjUyRlx1NEVEOFx1NUJDNlx1NzgwMVx1RkYwQ1x1NzZGNFx1NjNBNVx1OERGM1x1OEY2Q1xuICAgICAgICBpZiAobWVzc2FnZS5pbmNsdWRlcygnXHU4QkY3XHU1MTQ4XHU4QkJFXHU3RjZFXHU2NTJGXHU0RUQ4XHU1QkM2XHU3ODAxJykgfHwgbWVzc2FnZS5pbmNsdWRlcygnXHU4QkJFXHU3RjZFXHU2NTJGXHU0RUQ4XHU1QkM2XHU3ODAxJykpIHtcbiAgICAgICAgICBpZiAodGhpcy5oYXNQYXNzd29yZE1vZGFsVGFyZ2V0KSB7XG4gICAgICAgICAgICB0aGlzLnBhc3N3b3JkTW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgICAgICB9XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL3Byb2ZpbGUvZWRpdF9wYXlfcGFzc3dvcmQnXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICh0eXBlb2YgKHdpbmRvdyBhcyBhbnkpLnNob3dUb2FzdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICh3aW5kb3cgYXMgYW55KS5zaG93VG9hc3QobWVzc2FnZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhbGVydChtZXNzYWdlKVxuICAgICAgICB9XG4gICAgICAgIC8vIENsZWFyIHBhc3N3b3JkIGFuZCBzdGF5IG9uIHBhc3N3b3JkIGlucHV0IHBhZ2VcbiAgICAgICAgdGhpcy5wYXNzd29yZCA9IFwiXCJcbiAgICAgICAgdGhpcy51cGRhdGVQYXNzd29yZERvdHMoKVxuICAgICAgICBpZiAodGhpcy5oYXNQYXNzd29yZE1vZGFsVGFyZ2V0KSB7XG4gICAgICAgICAgdGhpcy5wYXNzd29yZE1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIC8vIFBhc3N3b3JkIGlzIGNvcnJlY3QgLSBwcm9jZWVkIHdpdGggcGF5bWVudFxuICAgICAgaWYgKHRoaXMuaGFzUGFzc3dvcmRNb2RhbFRhcmdldCkge1xuICAgICAgICB0aGlzLnBhc3N3b3JkTW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgIH1cbiAgICAgIHRoaXMuc2hvd1BheWluZ1N0YXR1cygpXG4gICAgICBcbiAgICAgIC8vIFByb2Nlc3MgYWN0dWFsIHBheW1lbnRcbiAgICAgIGF3YWl0IHRoaXMucHJvY2Vzc0FjdHVhbFBheW1lbnQoKVxuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1OUE4Q1x1OEJDMVx1NjUyRlx1NEVEOFx1NUJDNlx1NzgwMVx1NTkzMVx1OEQyNTonLCBlcnJvcilcbiAgICAgIGlmICh0eXBlb2YgKHdpbmRvdyBhcyBhbnkpLnNob3dUb2FzdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAod2luZG93IGFzIGFueSkuc2hvd1RvYXN0KCdcdTdGNTFcdTdFRENcdTk1MTlcdThCRUZcdUZGMENcdThCRjdcdTkxQ0RcdThCRDUnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxlcnQoJ1x1N0Y1MVx1N0VEQ1x1OTUxOVx1OEJFRlx1RkYwQ1x1OEJGN1x1OTFDRFx1OEJENScpXG4gICAgICB9XG4gICAgICB0aGlzLnBhc3N3b3JkID0gXCJcIlxuICAgICAgdGhpcy51cGRhdGVQYXNzd29yZERvdHMoKVxuICAgICAgaWYgKHRoaXMuaGFzUGFzc3dvcmRNb2RhbFRhcmdldCkge1xuICAgICAgICB0aGlzLnBhc3N3b3JkTW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBwcm9jZXNzQWN0dWFsUGF5bWVudCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLnBheW1lbnRVcmxWYWx1ZX0uanNvbmAsIHtcbiAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICdYLUNTUkYtVG9rZW4nOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxNZXRhRWxlbWVudD4oJ21ldGFbbmFtZT1cImNzcmYtdG9rZW5cIl0nKT8uY29udGVudCB8fCAnJ1xuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7fSkgLy8gUGFzc3dvcmQgYWxyZWFkeSB2ZXJpZmllZCwganVzdCB0cmlnZ2VyIHBheW1lbnRcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcblxuICAgICAgaWYgKHJlc3BvbnNlLm9rICYmIGRhdGEuc3VjY2Vzcykge1xuICAgICAgICAvLyBTaG93IHN1Y2Nlc3Mgc3RhdHVzXG4gICAgICAgIHRoaXMuc2hvd1BheW1lbnRTdWNjZXNzKClcbiAgICAgICAgLy8gUmVkaXJlY3QgYWZ0ZXIgc2hvd2luZyBzdWNjZXNzXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdGhpcy5zdWNjZXNzVXJsVmFsdWVcbiAgICAgICAgfSwgMjAwMClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLm1lc3NhZ2UgfHwgJ1x1NjUyRlx1NEVEOFx1NTkzMVx1OEQyNScpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NjUyRlx1NEVEOFx1NTkzMVx1OEQyNTonLCBlcnJvcilcbiAgICAgIHRoaXMuY2xvc2VTdGF0dXNNb2RhbCgpXG4gICAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnXHU2NTJGXHU0RUQ4XHU1OTMxXHU4RDI1XHVGRjBDXHU4QkY3XHU5MUNEXHU4QkQ1J1xuICAgICAgaWYgKHR5cGVvZiAod2luZG93IGFzIGFueSkuc2hvd1RvYXN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICh3aW5kb3cgYXMgYW55KS5zaG93VG9hc3QobWVzc2FnZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KG1lc3NhZ2UpXG4gICAgICB9XG4gICAgICB0aGlzLnBhc3N3b3JkID0gXCJcIlxuICAgICAgdGhpcy5zaG93UGFzc3dvcmRNb2RhbCgpXG4gICAgfVxuICB9XG5cbiAgc2hvd1BheWluZ1N0YXR1cygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaGFzU3RhdHVzTW9kYWxUYXJnZXQpIHJldHVyblxuICAgIFxuICAgIGlmICh0aGlzLmhhc1N0YXR1c0Ftb3VudFRhcmdldCkge1xuICAgICAgdGhpcy5zdGF0dXNBbW91bnRUYXJnZXQudGV4dENvbnRlbnQgPSB0aGlzLmFtb3VudFZhbHVlXG4gICAgfVxuICAgIGlmICh0aGlzLmhhc1N0YXR1c1VzZXJFbWFpbFRhcmdldCkge1xuICAgICAgdGhpcy5zdGF0dXNVc2VyRW1haWxUYXJnZXQudGV4dENvbnRlbnQgPSB0aGlzLnVzZXJFbWFpbFZhbHVlXG4gICAgfVxuICAgIGlmICh0aGlzLmhhc1N0YXR1c0ljb25UYXJnZXQpIHtcbiAgICAgIHRoaXMuc3RhdHVzSWNvblRhcmdldC50ZXh0Q29udGVudCA9ICdcdUQ4M0RcdURDQjMnXG4gICAgfVxuICAgIGlmICh0aGlzLmhhc1N0YXR1c1RleHRUYXJnZXQpIHtcbiAgICAgIHRoaXMuc3RhdHVzVGV4dFRhcmdldC50ZXh0Q29udGVudCA9ICdcdTZCNjNcdTU3MjhcdTRFRDhcdTZCM0UnXG4gICAgfVxuICAgIGlmICh0aGlzLmhhc1N0YXR1c0RvdHNUYXJnZXQpIHtcbiAgICAgIHRoaXMuc3RhdHVzRG90c1RhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgIH1cbiAgICB0aGlzLnN0YXR1c01vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gIH1cblxuICBjbG9zZVByb2Nlc3NpbmdNb2RhbCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5oYXNTdGF0dXNNb2RhbFRhcmdldCkge1xuICAgICAgdGhpcy5zdGF0dXNNb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIH1cbiAgfVxuXG4gIHN3aXRjaFRvUGFzc3dvcmRQYXkoKTogdm9pZCB7XG4gICAgLy8gQ2xvc2UgYW55IG9wZW4gbW9kYWxzIGFuZCBzaG93IHBhc3N3b3JkIG1vZGFsXG4gICAgdGhpcy5jbG9zZVN0YXR1c01vZGFsKClcbiAgICB0aGlzLnNob3dQYXNzd29yZE1vZGFsKClcbiAgfVxuXG4gIHNob3dQYXltZW50U3VjY2VzcygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5oYXNTdGF0dXNJY29uVGFyZ2V0KSB7XG4gICAgICB0aGlzLnN0YXR1c0ljb25UYXJnZXQudGV4dENvbnRlbnQgPSAnXHUyNzEzJ1xuICAgIH1cbiAgICBpZiAodGhpcy5oYXNTdGF0dXNUZXh0VGFyZ2V0KSB7XG4gICAgICB0aGlzLnN0YXR1c1RleHRUYXJnZXQudGV4dENvbnRlbnQgPSAnXHU0RUQ4XHU2QjNFXHU2MjEwXHU1MjlGJ1xuICAgIH1cbiAgICBpZiAodGhpcy5oYXNTdGF0dXNEb3RzVGFyZ2V0KSB7XG4gICAgICB0aGlzLnN0YXR1c0RvdHNUYXJnZXQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIH1cbiAgfVxuXG4gIGNsb3NlU3RhdHVzTW9kYWwoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaGFzU3RhdHVzTW9kYWxUYXJnZXQpIHtcbiAgICAgIHRoaXMuc3RhdHVzTW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlciB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1widGFiXCJdXG4gIFxuICBkZWNsYXJlIHJlYWRvbmx5IHRhYlRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgcHJpdmF0ZSBhY3RpdmVUYWJUeXBlOiBzdHJpbmcgPSAnZG9tZXN0aWMnXG4gIFxuICBjb25uZWN0KCkge1xuICAgIC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1NjVGNlx1OEJGQlx1NTNENlx1NUY1M1x1NTI0RFx1NkZDMFx1NkQzQlx1NzY4NFx1NjgwN1x1N0I3RVxuICAgIGNvbnN0IGFjdGl2ZVRhYiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS10YWItdHlwZV0uYmctd2hpdGUnKSBhcyBIVE1MRWxlbWVudFxuICAgIHRoaXMuYWN0aXZlVGFiVHlwZSA9IGFjdGl2ZVRhYj8uZGF0YXNldC50YWJUeXBlIHx8ICdkb21lc3RpYydcbiAgICBcbiAgICAvLyBMaXN0ZW4gZm9yIGNpdHkgc2VsZWN0b3IgaW50ZXJuYXRpb25hbCBzd2l0Y2ggZXZlbnRcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjaXR5LXNlbGVjdG9yOnN3aXRjaC10by1pbnRlcm5hdGlvbmFsJywgdGhpcy5oYW5kbGVJbnRlcm5hdGlvbmFsU3dpdGNoLmJpbmQodGhpcykpXG4gIH1cbiAgXG4gIGRpc2Nvbm5lY3QoKSB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2l0eS1zZWxlY3Rvcjpzd2l0Y2gtdG8taW50ZXJuYXRpb25hbCcsIHRoaXMuaGFuZGxlSW50ZXJuYXRpb25hbFN3aXRjaC5iaW5kKHRoaXMpKVxuICB9XG4gIFxuICAvLyBIYW5kbGUgaW50ZXJuYXRpb25hbCBzd2l0Y2ggZnJvbSBjaXR5IHNlbGVjdG9yXG4gIHByaXZhdGUgaGFuZGxlSW50ZXJuYXRpb25hbFN3aXRjaCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygnSG90ZWwgdGFiczogUmVjZWl2ZWQgc3dpdGNoIHRvIGludGVybmF0aW9uYWwgZXZlbnQnKVxuICAgIC8vIEZpbmQgYW5kIGNsaWNrIHRoZSBpbnRlcm5hdGlvbmFsIHRhYlxuICAgIGNvbnN0IGludGVybmF0aW9uYWxUYWIgPSB0aGlzLnRhYlRhcmdldHMuZmluZCh0YWIgPT4gdGFiLmRhdGFzZXQudGFiVHlwZSA9PT0gJ2ludGVybmF0aW9uYWwnKVxuICAgIGlmIChpbnRlcm5hdGlvbmFsVGFiICYmIHRoaXMuYWN0aXZlVGFiVHlwZSAhPT0gJ2ludGVybmF0aW9uYWwnKSB7XG4gICAgICAvLyBTaW11bGF0ZSBjbGljayB0byB0cmlnZ2VyIHRhYiBzd2l0Y2hcbiAgICAgIGludGVybmF0aW9uYWxUYWIuY2xpY2soKVxuICAgIH1cbiAgfVxuXG4gIHN3aXRjaFRhYihldmVudDogRXZlbnQpIHtcbiAgICBjb25zdCBjbGlja2VkVGFiID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IG5ld1RhYlR5cGUgPSBjbGlja2VkVGFiLmRhdGFzZXQudGFiVHlwZVxuICAgIFxuICAgIGlmICghbmV3VGFiVHlwZSkgcmV0dXJuXG4gICAgXG4gICAgLy8gXHU1OTgyXHU2NzlDXHU3MEI5XHU1MUZCXHU3Njg0XHU2NjJGXHU1RjUzXHU1MjREXHU2RkMwXHU2RDNCXHU3Njg0XHU2ODA3XHU3QjdFXHVGRjBDXHU0RTBEXHU1MDVBXHU0RUZCXHU0RjU1XHU2NENEXHU0RjVDXG4gICAgaWYgKG5ld1RhYlR5cGUgPT09IHRoaXMuYWN0aXZlVGFiVHlwZSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIFx1NjZGNFx1NjVCMFx1NkZDMFx1NkQzQlx1NzJCNlx1NjAwMVxuICAgIHRoaXMuYWN0aXZlVGFiVHlwZSA9IG5ld1RhYlR5cGVcbiAgICBcbiAgICAvLyBcdTc5RkJcdTk2NjRcdTYyNDBcdTY3MDlcdTY4MDdcdTdCN0VcdTc2ODRcdTZGQzBcdTZEM0JcdTY4MzdcdTVGMEZcbiAgICB0aGlzLnRhYlRhcmdldHMuZm9yRWFjaCgodGFiOiBIVE1MRWxlbWVudCkgPT4ge1xuICAgICAgdGFiLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLXdoaXRlJywgJ3JvdW5kZWQtdC1bMTJweF0nLCAncHgtMycsICdweS0yLjUnLCAncmVsYXRpdmUnKVxuICAgICAgdGFiLmNsYXNzTGlzdC5hZGQoJ3B4LTInLCAncHktMicpXG4gICAgICBcbiAgICAgIGNvbnN0IHNwYW4gPSB0YWIucXVlcnlTZWxlY3Rvcignc3BhbicpXG4gICAgICBpZiAoc3Bhbikge1xuICAgICAgICBzcGFuLmNsYXNzTmFtZSA9ICd0ZXh0LVsxM3B4XSBmb250LW1lZGl1bSB0ZXh0LVsjNjY2NjY2XSdcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2NjJGIGJ1dHRvblx1RkYwQ1x1Nzg2RVx1NEZERFx1NjgzN1x1NUYwRlx1NkI2M1x1Nzg2RVxuICAgICAgaWYgKHRhYi50YWdOYW1lID09PSAnQlVUVE9OJykge1xuICAgICAgICB0YWIuY2xhc3NMaXN0LmFkZCgndGV4dC1bMTNweF0nLCAnZm9udC1tZWRpdW0nLCAndGV4dC1bIzY2NjY2Nl0nLCAnY3Vyc29yLXBvaW50ZXInLCAnd2hpdGVzcGFjZS1ub3dyYXAnKVxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgLy8gXHU0RTNBXHU4OEFCXHU3MEI5XHU1MUZCXHU3Njg0XHU2ODA3XHU3QjdFXHU2REZCXHU1MkEwXHU2RkMwXHU2RDNCXHU2ODM3XHU1RjBGXG4gICAgY2xpY2tlZFRhYi5jbGFzc0xpc3QucmVtb3ZlKCdweC0yJywgJ3B5LTInKVxuICAgIGNsaWNrZWRUYWIuY2xhc3NMaXN0LmFkZCgncmVsYXRpdmUnLCAnYmctd2hpdGUnLCAncm91bmRlZC10LVsxMnB4XScsICdweC0zJywgJ3B5LTIuNScpXG4gICAgXG4gICAgLy8gXHU1OTgyXHU2NzlDXHU2NjJGIGJ1dHRvblx1RkYwQ1x1OTcwMFx1ODk4MVx1NTIxQlx1NUVGQVx1NjVCMFx1NzY4NFx1N0VEM1x1Njc4NFxuICAgIGlmIChjbGlja2VkVGFiLnRhZ05hbWUgPT09ICdCVVRUT04nKSB7XG4gICAgICBjb25zdCBsYWJlbCA9IGNsaWNrZWRUYWIudGV4dENvbnRlbnQ/LnRyaW0oKSB8fCAnJ1xuICAgICAgY2xpY2tlZFRhYi5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1bMTVweF0gZm9udC1ib2xkIHRleHQtWyMxYTFhMWFdIGxlYWRpbmctdGlnaHQgd2hpdGVzcGFjZS1ub3dyYXBcIj4ke2xhYmVsfTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICBgXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NURGMlx1N0VDRlx1NjYyRiBkaXZcdUZGMENcdTUzRUFcdTk3MDBcdTg5ODFcdTY2RjRcdTY1QjAgc3BhblxuICAgICAgY29uc3Qgc3BhbiA9IGNsaWNrZWRUYWIucXVlcnlTZWxlY3Rvcignc3BhbicpXG4gICAgICBpZiAoc3Bhbikge1xuICAgICAgICBzcGFuLmNsYXNzTmFtZSA9ICd0ZXh0LVsxNXB4XSBmb250LWJvbGQgdGV4dC1bIzFhMWExYV0gbGVhZGluZy10aWdodCB3aGl0ZXNwYWNlLW5vd3JhcCdcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gXHU4OUU2XHU1M0QxXHU3QzdCXHU1NzhCXHU1MjA3XHU2MzYyXHU0RThCXHU0RUY2XHVGRjBDXHU0RjlCXHU1MTc2XHU0RUQ2XHU2M0E3XHU1MjM2XHU1NjY4XHU3NkQxXHU1NDJDXG4gICAgdGhpcy5kaXNwYXRjaCgndHlwZUNoYW5nZWQnLCB7IGRldGFpbDogeyB0eXBlOiBuZXdUYWJUeXBlIH0gfSlcbiAgICBcbiAgICAvLyBcdTY4MzlcdTYzNkVcdTdDN0JcdTU3OEJcdTdCNUJcdTkwMDlcdTkxNTJcdTVFOTdcdTUyMTdcdTg4NjhcbiAgICB0aGlzLmZpbHRlckhvdGVscyhuZXdUYWJUeXBlKVxuICB9XG4gIFxuICBmaWx0ZXJIb3RlbHModHlwZTogc3RyaW5nKSB7XG4gICAgLy8gXHU2ODM5XHU2MzZFXHU3QzdCXHU1NzhCXHU3QjVCXHU5MDA5XHU5MTUyXHU1RTk3XG4gICAgLy8gZG9tZXN0aWM6IFx1NTZGRFx1NTE4NVx1NTdDRVx1NUUwMlxuICAgIC8vIGludGVybmF0aW9uYWw6IFx1NTZGRFx1NTkxNlx1NTQ4Q1x1NEUyRFx1NTZGRFx1NkUyRlx1NkZCM1xuICAgIC8vIGhvdXJseTogXHU5NDlGXHU3MEI5XHU2MjNGXHVGRjA4XHU2N0U1XHU4QkUyXHU2MjQwXHU2NzA5XHU2NzA5XHU5NDlGXHU3MEI5XHU2MjNGXHU3Njg0XHU5MTUyXHU1RTk3XHU1NDhDXHU2QzExXHU1QkJGXHVGRjA5XG4gICAgLy8gaG9tZXN0YXk6IFx1NkMxMVx1NUJCRlxuICAgIFxuICAgIGNvbnNvbGUubG9nKGBcdTUyMDdcdTYzNjJcdTUyMzBcdTdDN0JcdTU3OEI6ICR7dHlwZX1gKVxuICAgIFxuICAgIC8vIFx1Njc4NFx1NUVGQSBVUkwgXHU1M0MyXHU2NTcwXG4gICAgY29uc3QgY3VycmVudFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaClcbiAgICBcbiAgICAvLyBcdTRFQ0UgY2l0eS1zZWxlY3RvciBcdTYzQTdcdTUyMzZcdTU2NjhcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTkwMDlcdTYyRTlcdTc2ODRcdTU3Q0VcdTVFMDJcbiAgICBjb25zdCBjaXR5U2VsZWN0b3JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtY29udHJvbGxlcio9XCJjaXR5LXNlbGVjdG9yXCJdJylcbiAgICBpZiAoY2l0eVNlbGVjdG9yRWxlbWVudCkge1xuICAgICAgY29uc3QgZGVwYXJ0dXJlQ2l0eUlucHV0ID0gY2l0eVNlbGVjdG9yRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jaXR5LXNlbGVjdG9yLXRhcmdldD1cImRlcGFydHVyZUNpdHlJbnB1dFwiXScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICAgIGlmIChkZXBhcnR1cmVDaXR5SW5wdXQgJiYgZGVwYXJ0dXJlQ2l0eUlucHV0LnZhbHVlKSB7XG4gICAgICAgIC8vIFx1NUMwNlx1OTAwOVx1NjJFOVx1NzY4NFx1NTdDRVx1NUUwMlx1NkRGQlx1NTJBMFx1NTIzMCBVUkwgXHU1M0MyXHU2NTcwXHU0RTJEXG4gICAgICAgIGN1cnJlbnRQYXJhbXMuc2V0KCdjaXR5JywgZGVwYXJ0dXJlQ2l0eUlucHV0LnZhbHVlKVxuICAgICAgICBjb25zb2xlLmxvZyhgXHU0RkREXHU3NTU5XHU5MDA5XHU2MkU5XHU3Njg0XHU1N0NFXHU1RTAyOiAke2RlcGFydHVyZUNpdHlJbnB1dC52YWx1ZX1gKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBcdTZFMDVcdTk2NjRcdTUzRUZcdTgwRkRcdTUxQjJcdTdBODFcdTc2ODRcdTUzQzJcdTY1NzBcbiAgICBjdXJyZW50UGFyYW1zLmRlbGV0ZSgndHlwZScpXG4gICAgY3VycmVudFBhcmFtcy5kZWxldGUoJ3Jvb21fY2F0ZWdvcnknKVxuICAgIFxuICAgIC8vIFx1OEJCRVx1N0Y2RSBsb2NhdGlvbl90eXBlIFx1NTQ4Q1x1N0I1Qlx1OTAwOVx1NTNDMlx1NjU3MFxuICAgIGlmICh0eXBlID09PSAnZG9tZXN0aWMnKSB7XG4gICAgICBjdXJyZW50UGFyYW1zLnNldCgnbG9jYXRpb25fdHlwZScsICdkb21lc3RpYycpXG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnaW50ZXJuYXRpb25hbCcpIHtcbiAgICAgIGN1cnJlbnRQYXJhbXMuc2V0KCdsb2NhdGlvbl90eXBlJywgJ2ludGVybmF0aW9uYWwnKVxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2hvdXJseScpIHtcbiAgICAgIC8vIFx1OTQ5Rlx1NzBCOVx1NjIzRlx1RkYxQVx1NEY3Rlx1NzUyOCByb29tX2NhdGVnb3J5IFx1NTNDMlx1NjU3MFx1N0I1Qlx1OTAwOVx1NjcwOVx1OTQ5Rlx1NzBCOVx1NjIzRlx1NzY4NFx1NEY0Rlx1NUJCRlx1NTczQVx1NjI0MFxuICAgICAgY3VycmVudFBhcmFtcy5zZXQoJ2xvY2F0aW9uX3R5cGUnLCAnZG9tZXN0aWMnKVxuICAgICAgY3VycmVudFBhcmFtcy5zZXQoJ3Jvb21fY2F0ZWdvcnknLCAnaG91cmx5JylcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdob21lc3RheScpIHtcbiAgICAgIC8vIFx1NkMxMVx1NUJCRlx1RkYxQVx1NEY3Rlx1NzUyOCB0eXBlIFx1NTNDMlx1NjU3MFx1N0I1Qlx1OTAwOVx1NEY0Rlx1NUJCRlx1N0M3Qlx1NTc4QlxuICAgICAgY3VycmVudFBhcmFtcy5zZXQoJ2xvY2F0aW9uX3R5cGUnLCAnZG9tZXN0aWMnKVxuICAgICAgY3VycmVudFBhcmFtcy5zZXQoJ3R5cGUnLCAnaG9tZXN0YXknKVxuICAgIH1cbiAgICBcbiAgICAvLyBcdTkxQ0RcdTY1QjBcdTUyQTBcdThGN0RcdTk4NzVcdTk3NjJcdTVFMjZcdTY1QjBcdTUzQzJcdTY1NzBcbiAgICBjb25zdCBuZXdVcmwgPSBgJHt3aW5kb3cubG9jYXRpb24ucGF0aG5hbWV9PyR7Y3VycmVudFBhcmFtcy50b1N0cmluZygpfWBcbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IG5ld1VybFxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJtb2RhbFwiLFxuICAgIFwiZ3Vlc3ROYW1lSW5wdXRcIixcbiAgICBcImd1ZXN0UGhvbmVJbnB1dFwiLFxuICAgIFwic2VsZWN0ZWRQYXNzZW5nZXJcIixcbiAgICBcImNoZWNrYm94XCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgc2VsZWN0ZWRQYXNzZW5nZXJJZDogU3RyaW5nLFxuICAgIHNlbGVjdGVkUGFzc2VuZ2VyTmFtZTogU3RyaW5nLFxuICAgIHNlbGVjdGVkUGFzc2VuZ2VyUGhvbmU6IFN0cmluZ1xuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBndWVzdE5hbWVJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGd1ZXN0UGhvbmVJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlbGVjdGVkUGFzc2VuZ2VyVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1NlbGVjdGVkUGFzc2VuZ2VyVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hlY2tib3hUYXJnZXRzOiBIVE1MSW5wdXRFbGVtZW50W11cblxuICBkZWNsYXJlIHNlbGVjdGVkUGFzc2VuZ2VySWRWYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgc2VsZWN0ZWRQYXNzZW5nZXJOYW1lVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHNlbGVjdGVkUGFzc2VuZ2VyUGhvbmVWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkhvdGVsVHJhdmVsZXJTZWxlY3RvciBjb25uZWN0ZWRcIilcbiAgfVxuXG4gIC8vIE9wZW4gbW9kYWxcbiAgb3Blbk1vZGFsKCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiT3BlbmluZyB0cmF2ZWxlciBzZWxlY3RvciBtb2RhbFwiKVxuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbidcbiAgfVxuXG4gIC8vIENsb3NlIG1vZGFsXG4gIGNsb3NlTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJ1xuICB9XG5cbiAgLy8gVG9nZ2xlIHBhc3NlbmdlciBzZWxlY3Rpb24gdmlhIGNoZWNrYm94XG4gIHRvZ2dsZVBhc3NlbmdlcihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjaGVja2JveCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IHBhc3NlbmdlcklkID0gY2hlY2tib3guZGF0YXNldC5wYXNzZW5nZXJJZCB8fCAnJ1xuICAgIGNvbnN0IHBhc3Nlbmdlck5hbWUgPSBjaGVja2JveC5kYXRhc2V0LnBhc3Nlbmdlck5hbWUgfHwgJydcbiAgICBjb25zdCBwYXNzZW5nZXJQaG9uZSA9IGNoZWNrYm94LmRhdGFzZXQucGFzc2VuZ2VyUGhvbmUgfHwgJydcblxuICAgIGlmIChjaGVja2JveC5jaGVja2VkKSB7XG4gICAgICAvLyBVbmNoZWNrIGFsbCBvdGhlciBjaGVja2JveGVzIChvbmx5IGFsbG93IG9uZSBzZWxlY3Rpb24pXG4gICAgICB0aGlzLmNoZWNrYm94VGFyZ2V0cy5mb3JFYWNoKGNiID0+IHtcbiAgICAgICAgaWYgKGNiICE9PSBjaGVja2JveCkge1xuICAgICAgICAgIGNiLmNoZWNrZWQgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICBjb25zb2xlLmxvZyhcIlNlbGVjdGVkIHBhc3NlbmdlcjpcIiwgeyBwYXNzZW5nZXJJZCwgcGFzc2VuZ2VyTmFtZSwgcGFzc2VuZ2VyUGhvbmUgfSlcblxuICAgICAgLy8gU3RvcmUgc2VsZWN0ZWQgdmFsdWVzXG4gICAgICB0aGlzLnNlbGVjdGVkUGFzc2VuZ2VySWRWYWx1ZSA9IHBhc3NlbmdlcklkXG4gICAgICB0aGlzLnNlbGVjdGVkUGFzc2VuZ2VyTmFtZVZhbHVlID0gcGFzc2VuZ2VyTmFtZVxuICAgICAgdGhpcy5zZWxlY3RlZFBhc3NlbmdlclBob25lVmFsdWUgPSBwYXNzZW5nZXJQaG9uZVxuXG4gICAgICAvLyBVcGRhdGUgZm9ybSBpbnB1dHNcbiAgICAgIHRoaXMuZ3Vlc3ROYW1lSW5wdXRUYXJnZXQudmFsdWUgPSBwYXNzZW5nZXJOYW1lXG4gICAgICB0aGlzLmd1ZXN0UGhvbmVJbnB1dFRhcmdldC52YWx1ZSA9IHBhc3NlbmdlclBob25lXG5cbiAgICAgIC8vIFVwZGF0ZSBzZWxlY3RlZCBkaXNwbGF5IGlmIGV4aXN0c1xuICAgICAgaWYgKHRoaXMuaGFzU2VsZWN0ZWRQYXNzZW5nZXJUYXJnZXQpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFBhc3NlbmdlclRhcmdldC50ZXh0Q29udGVudCA9IHBhc3Nlbmdlck5hbWVcbiAgICAgIH1cblxuICAgICAgLy8gQ2xvc2UgbW9kYWwgYWZ0ZXIgc2VsZWN0aW9uXG4gICAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBVbmNoZWNrZWQgLSBjbGVhciBmb3JtIGlucHV0c1xuICAgICAgY29uc29sZS5sb2coXCJVbnNlbGVjdGVkIHBhc3NlbmdlclwiKVxuICAgICAgXG4gICAgICB0aGlzLnNlbGVjdGVkUGFzc2VuZ2VySWRWYWx1ZSA9ICcnXG4gICAgICB0aGlzLnNlbGVjdGVkUGFzc2VuZ2VyTmFtZVZhbHVlID0gJydcbiAgICAgIHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJQaG9uZVZhbHVlID0gJydcblxuICAgICAgLy8gQ2xlYXIgZm9ybSBpbnB1dHNcbiAgICAgIHRoaXMuZ3Vlc3ROYW1lSW5wdXRUYXJnZXQudmFsdWUgPSAnJ1xuICAgICAgdGhpcy5ndWVzdFBob25lSW5wdXRUYXJnZXQudmFsdWUgPSAnJ1xuXG4gICAgICAvLyBDbGVhciBzZWxlY3RlZCBkaXNwbGF5IGlmIGV4aXN0c1xuICAgICAgaWYgKHRoaXMuaGFzU2VsZWN0ZWRQYXNzZW5nZXJUYXJnZXQpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFBhc3NlbmdlclRhcmdldC50ZXh0Q29udGVudCA9ICcnXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gTWFudWFsIGlucHV0IC0gY2xlYXIgc2VsZWN0aW9uXG4gIGNsZWFyU2VsZWN0aW9uKCk6IHZvaWQge1xuICAgIHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJJZFZhbHVlID0gJydcbiAgICB0aGlzLnNlbGVjdGVkUGFzc2VuZ2VyTmFtZVZhbHVlID0gJydcbiAgICB0aGlzLnNlbGVjdGVkUGFzc2VuZ2VyUGhvbmVWYWx1ZSA9ICcnXG4gIH1cblxuICAvLyBTdG9wIHByb3BhZ2F0aW9uIGZvciBpbm5lciBjbGlja3NcbiAgc3RvcFByb3BhZ2F0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIEF1dG8tZGlzbWlzcyBhZnRlciAyIHNlY29uZHNcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdhbmltYXRlLWZhZGUtb3V0JylcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5lbGVtZW50LnBhcmVudE5vZGUpIHtcbiAgICAgICAgICB0aGlzLmVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpXG4gICAgICAgIH1cbiAgICAgIH0sIDMwMClcbiAgICB9LCAyMDAwKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG4vLyBBdXRvbWF0aWNhbGx5IGRpc3BsYXlzIGEgdG9hc3QgbWVzc2FnZSB3aGVuIHRoZSBjb250cm9sbGVyIGNvbm5lY3RzXG4vLyBVc2VkIHdpdGggVHVyYm8gU3RyZWFtIHJlc3BvbnNlcyB0byBzaG93IHZhbGlkYXRpb24gZXJyb3JzXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXIge1xuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIG1lc3NhZ2U6IFN0cmluZ1xuICB9XG5cbiAgZGVjbGFyZSBtZXNzYWdlVmFsdWU6IHN0cmluZ1xuXG4gIGNvbm5lY3QoKSB7XG4gICAgLy8gU2hvdyB0aGUgdG9hc3QgaW1tZWRpYXRlbHkgd2hlbiBlbGVtZW50IGlzIGluc2VydGVkXG4gICAgaWYgKHRoaXMubWVzc2FnZVZhbHVlICYmIHdpbmRvdy5zaG93VG9hc3QpIHtcbiAgICAgIHdpbmRvdy5zaG93VG9hc3QodGhpcy5tZXNzYWdlVmFsdWUpXG4gICAgfVxuICAgIFxuICAgIC8vIFJlbW92ZSB0aGUgdHJpZ2dlciBlbGVtZW50IGZyb20gRE9NXG4gICAgdGhpcy5lbGVtZW50LnJlbW92ZSgpXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcImluc3VyYW5jZU1vZGFsXCIsIFwiY29uZmlybU1vZGFsXCIsIFwiZm9ybVwiLCBcInRvdGFsUHJpY2VBbW91bnRcIiwgXCJyb29tc0NvdW50XCIsIFwicm9vbXNJbnB1dFwiXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaW5zdXJhbmNlTW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY29uZmlybU1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGZvcm1UYXJnZXQ6IEhUTUxGb3JtRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRvdGFsUHJpY2VBbW91bnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgcm9vbXNDb3VudFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSByb29tc0lucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG5cbiAgLy8gSGFuZGxlIGluc3VyYW5jZSBvcHRpb24gc2VsZWN0aW9uIGluIGZvcm1cbiAgc2VsZWN0SW5zdXJhbmNlT3B0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHJhZGlvID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgaW5zdXJhbmNlVHlwZSA9IHJhZGlvLmRhdGFzZXQuaW5zdXJhbmNlVHlwZSB8fCAnbm9uZSdcbiAgICBjb25zdCBpbnN1cmFuY2VQcmljZSA9IHJhZGlvLmRhdGFzZXQuaW5zdXJhbmNlUHJpY2UgfHwgJzAnXG4gICAgXG4gICAgLy8gVXBkYXRlIGhpZGRlbiBmaWVsZHNcbiAgICB0aGlzLnNldEluc3VyYW5jZVZhbHVlcyhpbnN1cmFuY2VUeXBlLCBpbnN1cmFuY2VQcmljZSlcbiAgICBcbiAgICAvLyBVcGRhdGUgdmlzdWFsIGluZGljYXRvcnMgKGJvcmRlciBhbmQgY2hlY2ttYXJrKVxuICAgIGNvbnN0IGFsbENhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtaW5zdXJhbmNlLWNhcmRdJylcbiAgICBhbGxDYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xuICAgICAgY2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItb3JhbmdlLTQwMCcsICdib3JkZXItZ3JheS00MDAnKVxuICAgICAgY2FyZC5jbGFzc0xpc3QuYWRkKCdib3JkZXItMicsICdib3JkZXItZ3JheS0zMDAnKVxuICAgIH0pXG4gICAgXG4gICAgLy8gQWRkIHN0eWxlIHRvIHNlbGVjdGVkIGNhcmRcbiAgICBjb25zdCBzZWxlY3RlZENhcmQgPSByYWRpby5jbG9zZXN0KCdbZGF0YS1pbnN1cmFuY2UtY2FyZF0nKSBhcyBIVE1MRWxlbWVudFxuICAgIGlmIChzZWxlY3RlZENhcmQpIHtcbiAgICAgIHNlbGVjdGVkQ2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItZ3JheS0zMDAnKVxuICAgICAgaWYgKGluc3VyYW5jZVR5cGUgPT09ICdub25lJykge1xuICAgICAgICBzZWxlY3RlZENhcmQuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLWdyYXktNDAwJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGVjdGVkQ2FyZC5jbGFzc0xpc3QuYWRkKCdib3JkZXItb3JhbmdlLTQwMCcpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHRvdGFsIHByaWNlXG4gICAgdGhpcy51cGRhdGVUb3RhbFByaWNlKClcbiAgfVxuXG4gIC8vIFVwZGF0ZSB0b3RhbCBwcmljZSBkaXNwbGF5XG4gIHByaXZhdGUgdXBkYXRlVG90YWxQcmljZSgpOiB2b2lkIHtcbiAgICAvLyBSZXVzZSB0aGUgdXBkYXRlVG90YWxQcmljZVdpdGhSb29tcyBtZXRob2QgZm9yIGNvbnNpc3RlbmN5XG4gICAgdGhpcy51cGRhdGVUb3RhbFByaWNlV2l0aFJvb21zKClcbiAgfVxuXG4gIHNldEluc3VyYW5jZVZhbHVlcyhpbnN1cmFuY2VUeXBlOiBzdHJpbmcsIGluc3VyYW5jZVByaWNlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBpbnN1cmFuY2VUeXBlRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaG90ZWxfYm9va2luZ19pbnN1cmFuY2VfdHlwZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBpbnN1cmFuY2VQcmljZUZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvdGVsX2Jvb2tpbmdfaW5zdXJhbmNlX3ByaWNlJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIFxuICAgIGlmIChpbnN1cmFuY2VUeXBlRmllbGQpIHtcbiAgICAgIGluc3VyYW5jZVR5cGVGaWVsZC52YWx1ZSA9IGluc3VyYW5jZVR5cGVcbiAgICB9XG4gICAgXG4gICAgaWYgKGluc3VyYW5jZVByaWNlRmllbGQpIHtcbiAgICAgIGluc3VyYW5jZVByaWNlRmllbGQudmFsdWUgPSBpbnN1cmFuY2VQcmljZVxuICAgIH1cbiAgfVxuXG4gIC8vIEhhbmRsZSBzdWJtaXQgYnV0dG9uIGNsaWNrXG4gIGhhbmRsZVN1Ym1pdChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgXG4gICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzXG4gICAgY29uc3QgZ3Vlc3ROYW1lRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaG90ZWxfYm9va2luZ19ndWVzdF9uYW1lJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IGd1ZXN0UGhvbmVGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdob3RlbF9ib29raW5nX2d1ZXN0X3Bob25lJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIFxuICAgIGNvbnN0IGd1ZXN0TmFtZSA9IGd1ZXN0TmFtZUZpZWxkPy52YWx1ZT8udHJpbSgpIHx8ICcnXG4gICAgY29uc3QgZ3Vlc3RQaG9uZSA9IGd1ZXN0UGhvbmVGaWVsZD8udmFsdWU/LnRyaW0oKSB8fCAnJ1xuICAgIFxuICAgIGlmICghZ3Vlc3ROYW1lKSB7XG4gICAgICBhbGVydCgnXHU4QkY3XHU1ODZCXHU1MTk5XHU1MTY1XHU0RjRGXHU0RUJBXHU1OUQzXHU1NDBEJylcbiAgICAgIGd1ZXN0TmFtZUZpZWxkPy5mb2N1cygpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgaWYgKCFndWVzdFBob25lKSB7XG4gICAgICBhbGVydCgnXHU4QkY3XHU1ODZCXHU1MTk5XHU4MDU0XHU3Q0ZCXHU2MjRCXHU2NzNBJylcbiAgICAgIGd1ZXN0UGhvbmVGaWVsZD8uZm9jdXMoKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIFZhbGlkYXRlIHBob25lIG51bWJlciBmb3JtYXQgKHNpbXBsZSB2YWxpZGF0aW9uKVxuICAgIGNvbnN0IHBob25lUmVnZXggPSAvXjFbMy05XVxcZHs5fSQvXG4gICAgaWYgKCFwaG9uZVJlZ2V4LnRlc3QoZ3Vlc3RQaG9uZSkpIHtcbiAgICAgIGFsZXJ0KCdcdThCRjdcdTU4NkJcdTUxOTlcdTZCNjNcdTc4NkVcdTc2ODRcdTYyNEJcdTY3M0FcdTUzRjdcdTc4MDEnKVxuICAgICAgZ3Vlc3RQaG9uZUZpZWxkPy5mb2N1cygpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdXNlciBoYXMgc2VsZWN0ZWQgaW5zdXJhbmNlXG4gICAgY29uc3QgaW5zdXJhbmNlVHlwZUZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvdGVsX2Jvb2tpbmdfaW5zdXJhbmNlX3R5cGUnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgaW5zdXJhbmNlVHlwZSA9IGluc3VyYW5jZVR5cGVGaWVsZD8udmFsdWUgfHwgJ25vbmUnXG4gICAgXG4gICAgaWYgKGluc3VyYW5jZVR5cGUgPT09ICdub25lJykge1xuICAgICAgLy8gVXNlciBoYXNuJ3Qgc2VsZWN0ZWQgaW5zdXJhbmNlLCBzaG93IGluc3VyYW5jZSByZWNvbW1lbmRhdGlvbiBtb2RhbFxuICAgICAgdGhpcy5zaG93SW5zdXJhbmNlTW9kYWwoKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBVc2VyIGhhcyBzZWxlY3RlZCBpbnN1cmFuY2UsIHByb2NlZWQgdG8gY29uZmlybWF0aW9uXG4gICAgICB0aGlzLnNob3dDb25maXJtTW9kYWwoKVxuICAgIH1cbiAgfVxuXG4gIHNob3dJbnN1cmFuY2VNb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLmluc3VyYW5jZU1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gIH1cblxuICBjbG9zZUluc3VyYW5jZU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMuaW5zdXJhbmNlTW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgfVxuXG4gIC8vIFNlbGVjdCByZWNvbW1lbmRlZCBpbnN1cmFuY2UgZnJvbSBtb2RhbFxuICBzZWxlY3RSZWNvbW1lbmRlZEluc3VyYW5jZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50XG4gICAgY29uc3QgaW5zdXJhbmNlVHlwZSA9IGJ1dHRvbi5kYXRhc2V0Lmluc3VyYW5jZVR5cGUgfHwgJ2hvdGVsX2NhbmNlbGxhdGlvbidcbiAgICBjb25zdCBpbnN1cmFuY2VQcmljZSA9IGJ1dHRvbi5kYXRhc2V0Lmluc3VyYW5jZVByaWNlIHx8ICcxNidcbiAgICBcbiAgICAvLyBVcGRhdGUgaW5zdXJhbmNlIHZhbHVlc1xuICAgIHRoaXMuc2V0SW5zdXJhbmNlVmFsdWVzKGluc3VyYW5jZVR5cGUsIGluc3VyYW5jZVByaWNlKVxuICAgIFxuICAgIC8vIFVwZGF0ZSBVSSB0byBzaG93IHNlbGVjdGVkIGluc3VyYW5jZVxuICAgIGNvbnN0IHRhcmdldFJhZGlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgaW5wdXRbbmFtZT1cImluc3VyYW5jZV9zZWxlY3Rpb25cIl1bdmFsdWU9XCIke2luc3VyYW5jZVR5cGV9XCJdYCkgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGlmICh0YXJnZXRSYWRpbykge1xuICAgICAgdGFyZ2V0UmFkaW8uY2hlY2tlZCA9IHRydWVcbiAgICAgIC8vIFRyaWdnZXIgY2hhbmdlIGV2ZW50IHRvIHVwZGF0ZSB2aXN1YWwgaW5kaWNhdG9yc1xuICAgICAgdGFyZ2V0UmFkaW8uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2NoYW5nZScsIHsgYnViYmxlczogdHJ1ZSB9KSlcbiAgICB9XG4gICAgXG4gICAgLy8gQ2xvc2UgaW5zdXJhbmNlIG1vZGFsIGFuZCBzaG93IGNvbmZpcm1hdGlvblxuICAgIHRoaXMuY2xvc2VJbnN1cmFuY2VNb2RhbCgpXG4gICAgdGhpcy5zaG93Q29uZmlybU1vZGFsKClcbiAgfVxuXG4gIC8vIFNraXAgaW5zdXJhbmNlIHNlbGVjdGlvblxuICBza2lwSW5zdXJhbmNlKCk6IHZvaWQge1xuICAgIHRoaXMuc2V0SW5zdXJhbmNlVmFsdWVzKCdub25lJywgJzAnKVxuICAgIHRoaXMuY2xvc2VJbnN1cmFuY2VNb2RhbCgpXG4gICAgdGhpcy5zaG93Q29uZmlybU1vZGFsKClcbiAgfVxuXG4gIHNob3dDb25maXJtTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5jb25maXJtTW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICBcbiAgICAvLyBXYWl0IDEwIHNlY29uZHMgdGhlbiBzdWJtaXQgZm9ybSAoc2ltdWxhdGluZyByb29tIGxvY2tpbmcgcHJvY2VzcylcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuc3VibWl0Rm9ybSgpXG4gICAgfSwgMTAwMDApXG4gIH1cblxuICBjbG9zZUNvbmZpcm1Nb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLmNvbmZpcm1Nb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICB9XG5cbiAgc3VibWl0Rm9ybSgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygnU3VibWl0dGluZyBmb3JtOicsIHRoaXMuZm9ybVRhcmdldClcbiAgICBcbiAgICAvLyBTdWJtaXQgZm9ybSBub3JtYWxseSAtIGxldCBSYWlscyBoYW5kbGUgdGhlIHJlZGlyZWN0XG4gICAgdGhpcy5mb3JtVGFyZ2V0LnN1Ym1pdCgpXG4gIH1cblxuICAvLyBJbmNyZWFzZSByb29tIGNvdW50XG4gIGluY3JlYXNlUm9vbXMoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGN1cnJlbnRDb3VudCA9IHBhcnNlSW50KHRoaXMucm9vbXNJbnB1dFRhcmdldC52YWx1ZSB8fCAnMScpXG4gICAgY29uc3QgbmV3Q291bnQgPSBjdXJyZW50Q291bnQgKyAxXG4gICAgXG4gICAgLy8gVXBkYXRlIGhpZGRlbiBpbnB1dCBhbmQgZGlzcGxheVxuICAgIHRoaXMucm9vbXNJbnB1dFRhcmdldC52YWx1ZSA9IG5ld0NvdW50LnRvU3RyaW5nKClcbiAgICB0aGlzLnJvb21zQ291bnRUYXJnZXQudGV4dENvbnRlbnQgPSBgJHtuZXdDb3VudH1cdTk1RjRgXG4gICAgXG4gICAgLy8gVXBkYXRlIHRvdGFsIHByaWNlXG4gICAgdGhpcy51cGRhdGVUb3RhbFByaWNlV2l0aFJvb21zKClcbiAgfVxuXG4gIC8vIERlY3JlYXNlIHJvb20gY291bnRcbiAgZGVjcmVhc2VSb29tcyhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgY3VycmVudENvdW50ID0gcGFyc2VJbnQodGhpcy5yb29tc0lucHV0VGFyZ2V0LnZhbHVlIHx8ICcxJylcbiAgICBcbiAgICAvLyBNaW5pbXVtIDEgcm9vbVxuICAgIGlmIChjdXJyZW50Q291bnQgPD0gMSkgcmV0dXJuXG4gICAgXG4gICAgY29uc3QgbmV3Q291bnQgPSBjdXJyZW50Q291bnQgLSAxXG4gICAgXG4gICAgLy8gVXBkYXRlIGhpZGRlbiBpbnB1dCBhbmQgZGlzcGxheVxuICAgIHRoaXMucm9vbXNJbnB1dFRhcmdldC52YWx1ZSA9IG5ld0NvdW50LnRvU3RyaW5nKClcbiAgICB0aGlzLnJvb21zQ291bnRUYXJnZXQudGV4dENvbnRlbnQgPSBgJHtuZXdDb3VudH1cdTk1RjRgXG4gICAgXG4gICAgLy8gVXBkYXRlIHRvdGFsIHByaWNlXG4gICAgdGhpcy51cGRhdGVUb3RhbFByaWNlV2l0aFJvb21zKClcbiAgfVxuXG4gIC8vIFVwZGF0ZSB0b3RhbCBwcmljZSBjb25zaWRlcmluZyByb29tcyBjb3VudFxuICBwcml2YXRlIHVwZGF0ZVRvdGFsUHJpY2VXaXRoUm9vbXMoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnRvdGFsUHJpY2VBbW91bnRUYXJnZXQpIHJldHVyblxuICAgIFxuICAgIC8vIEdldCByb29tIHByaWNlIHBlciBuaWdodCBmcm9tIGRhdGEgYXR0cmlidXRlXG4gICAgY29uc3Qgcm9vbVByaWNlID0gcGFyc2VGbG9hdCh0aGlzLnRvdGFsUHJpY2VBbW91bnRUYXJnZXQuZGF0YXNldC5yb29tUHJpY2UgfHwgJzAnKVxuICAgIGNvbnN0IG5pZ2h0cyA9IHBhcnNlSW50KHRoaXMudG90YWxQcmljZUFtb3VudFRhcmdldC5kYXRhc2V0Lm5pZ2h0cyB8fCAnMScpXG4gICAgXG4gICAgLy8gR2V0IHJvb20gY291bnRcbiAgICBjb25zdCByb29tc0NvdW50ID0gcGFyc2VJbnQodGhpcy5yb29tc0lucHV0VGFyZ2V0LnZhbHVlIHx8ICcxJylcbiAgICBcbiAgICAvLyBHZXQgaW5zdXJhbmNlIHByaWNlXG4gICAgY29uc3QgaW5zdXJhbmNlUHJpY2VGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdob3RlbF9ib29raW5nX2luc3VyYW5jZV9wcmljZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBpbnN1cmFuY2VQcmljZSA9IHBhcnNlRmxvYXQoaW5zdXJhbmNlUHJpY2VGaWVsZD8udmFsdWUgfHwgJzAnKVxuICAgIFxuICAgIC8vIENhbGN1bGF0ZTogKHJvb20gcHJpY2UgKiBuaWdodHMgKiByb29tcykgKyBpbnN1cmFuY2VcbiAgICBjb25zdCBiYXNlUHJpY2UgPSByb29tUHJpY2UgKiBuaWdodHMgKiByb29tc0NvdW50XG4gICAgY29uc3QgdG90YWxQcmljZSA9IGJhc2VQcmljZSArIGluc3VyYW5jZVByaWNlXG4gICAgXG4gICAgdGhpcy50b3RhbFByaWNlQW1vdW50VGFyZ2V0LnRleHRDb250ZW50ID0gdG90YWxQcmljZS50b0ZpeGVkKDIpXG4gICAgXG4gICAgLy8gVXBkYXRlIGJhc2UgcHJpY2UgZGF0YSBhdHRyaWJ1dGUgZm9yIGZ1dHVyZSBpbnN1cmFuY2UgY2FsY3VsYXRpb25zXG4gICAgdGhpcy50b3RhbFByaWNlQW1vdW50VGFyZ2V0LmRhdGFzZXQuYmFzZVByaWNlID0gYmFzZVByaWNlLnRvRml4ZWQoMilcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwicGFja2FnZVNlbGVjdG9yXCIsXG4gICAgXCJwcmljZURpc3BsYXlcIlxuICBdXG5cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBzZWxlY3RlZFBhY2thZ2VJZDogTnVtYmVyXG4gIH1cblxuICAvLyBEZWNsYXJlIHlvdXIgdGFyZ2V0cyBhbmQgdmFsdWVzXG4gIGRlY2xhcmUgcmVhZG9ubHkgcGFja2FnZVNlbGVjdG9yVGFyZ2V0PzogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBwcmljZURpc3BsYXlUYXJnZXQ/OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHNlbGVjdGVkUGFja2FnZUlkVmFsdWU6IG51bWJlclxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJUb3VyRGV0YWlsIGNvbnRyb2xsZXIgY29ubmVjdGVkXCIpXG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiVG91ckRldGFpbCBjb250cm9sbGVyIGRpc2Nvbm5lY3RlZFwiKVxuICB9XG5cbiAgLy8gTmF2aWdhdGUgdG8gcGFja2FnZXMgdGFiXG4gIHNlbGVjdFBhY2thZ2UoKTogdm9pZCB7XG4gICAgY29uc3QgY3VycmVudFVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpXG4gICAgY3VycmVudFVybC5zZWFyY2hQYXJhbXMuc2V0KCd0YWInLCAncGFja2FnZXMnKVxuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gY3VycmVudFVybC50b1N0cmluZygpXG4gIH1cblxuICAvLyBTZWxlY3QgYSBzcGVjaWZpYyBwYWNrYWdlXG4gIHNlbGVjdFRoaXNQYWNrYWdlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBwYWNrYWdlSWQgPSB0YXJnZXQuZGF0YXNldC5wYWNrYWdlSWRcbiAgICBcbiAgICBpZiAocGFja2FnZUlkKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkUGFja2FnZUlkVmFsdWUgPSBwYXJzZUludChwYWNrYWdlSWQpXG4gICAgICBcbiAgICAgIC8vIE5hdmlnYXRlIGJhY2sgdG8gb3ZlcnZpZXcgdGFiIHdpdGggc2VsZWN0ZWQgcGFja2FnZVxuICAgICAgY29uc3QgY3VycmVudFVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpXG4gICAgICBjdXJyZW50VXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3RhYicsICdvdmVydmlldycpXG4gICAgICBjdXJyZW50VXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3BhY2thZ2VfaWQnLCBwYWNrYWdlSWQpXG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGN1cnJlbnRVcmwudG9TdHJpbmcoKVxuICAgIH1cbiAgfVxuXG4gIC8vIFNjcm9sbCB0byBzcGVjaWZpYyBzZWN0aW9uIChmb3Igc21vb3RoIG5hdmlnYXRpb24pXG4gIHNjcm9sbFRvU2VjdGlvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3Qgc2VjdGlvbklkID0gdGFyZ2V0LmRhdGFzZXQuc2VjdGlvblxuICAgIFxuICAgIGlmIChzZWN0aW9uSWQpIHtcbiAgICAgIGNvbnN0IHNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWN0aW9uSWQpXG4gICAgICBpZiAoc2VjdGlvbikge1xuICAgICAgICBzZWN0aW9uLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wic2xpZGVcIiwgXCJpbmRpY2F0b3JcIl1cbiAgXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgaW5kZXg6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXG4gICAgYXV0b3BsYXk6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSxcbiAgICBpbnRlcnZhbDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDUwMDAgfVxuICB9XG5cbiAgLy8gRGVjbGFyZSB5b3VyIHRhcmdldHMgYW5kIHZhbHVlc1xuICBkZWNsYXJlIHJlYWRvbmx5IHNsaWRlVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IGluZGljYXRvclRhcmdldHM/OiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzSW5kaWNhdG9yVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgaW5kZXhWYWx1ZTogbnVtYmVyXG4gIGRlY2xhcmUgcmVhZG9ubHkgYXV0b3BsYXlWYWx1ZTogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGludGVydmFsVmFsdWU6IG51bWJlclxuICBcbiAgcHJpdmF0ZSBhdXRvcGxheVRpbWVyPzogbnVtYmVyXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkNhcm91c2VsIGNvbnRyb2xsZXIgY29ubmVjdGVkXCIpXG4gICAgdGhpcy5zaG93U2xpZGUodGhpcy5pbmRleFZhbHVlKVxuICAgIFxuICAgIGlmICh0aGlzLmF1dG9wbGF5VmFsdWUpIHtcbiAgICAgIHRoaXMuc3RhcnRBdXRvcGxheSgpXG4gICAgfVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkNhcm91c2VsIGNvbnRyb2xsZXIgZGlzY29ubmVjdGVkXCIpXG4gICAgdGhpcy5zdG9wQXV0b3BsYXkoKVxuICB9XG5cbiAgLy8gTmF2aWdhdGUgdG8gcHJldmlvdXMgc2xpZGVcbiAgcHJldmlvdXMoKTogdm9pZCB7XG4gICAgdGhpcy5zdG9wQXV0b3BsYXkoKVxuICAgIGNvbnN0IG5ld0luZGV4ID0gdGhpcy5pbmRleFZhbHVlID4gMCA/IHRoaXMuaW5kZXhWYWx1ZSAtIDEgOiB0aGlzLnNsaWRlVGFyZ2V0cy5sZW5ndGggLSAxXG4gICAgdGhpcy5pbmRleFZhbHVlID0gbmV3SW5kZXhcbiAgICB0aGlzLnNob3dTbGlkZShuZXdJbmRleClcbiAgfVxuXG4gIC8vIE5hdmlnYXRlIHRvIG5leHQgc2xpZGVcbiAgbmV4dCgpOiB2b2lkIHtcbiAgICB0aGlzLnN0b3BBdXRvcGxheSgpXG4gICAgY29uc3QgbmV3SW5kZXggPSB0aGlzLmluZGV4VmFsdWUgPCB0aGlzLnNsaWRlVGFyZ2V0cy5sZW5ndGggLSAxID8gdGhpcy5pbmRleFZhbHVlICsgMSA6IDBcbiAgICB0aGlzLmluZGV4VmFsdWUgPSBuZXdJbmRleFxuICAgIHRoaXMuc2hvd1NsaWRlKG5ld0luZGV4KVxuICB9XG5cbiAgLy8gR28gdG8gc3BlY2lmaWMgc2xpZGVcbiAgZ29UbyhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLnN0b3BBdXRvcGxheSgpXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQodGFyZ2V0LmRhdGFzZXQuaW5kZXggfHwgXCIwXCIpXG4gICAgdGhpcy5pbmRleFZhbHVlID0gaW5kZXhcbiAgICB0aGlzLnNob3dTbGlkZShpbmRleClcbiAgfVxuXG4gIC8vIFNob3cgc3BlY2lmaWMgc2xpZGVcbiAgcHJpdmF0ZSBzaG93U2xpZGUoaW5kZXg6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIEhpZGUgYWxsIHNsaWRlc1xuICAgIHRoaXMuc2xpZGVUYXJnZXRzLmZvckVhY2goKHNsaWRlLCBpKSA9PiB7XG4gICAgICBpZiAoaSA9PT0gaW5kZXgpIHtcbiAgICAgICAgc2xpZGUuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNsaWRlLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIFVwZGF0ZSBpbmRpY2F0b3JzIGlmIHRoZXkgZXhpc3RcbiAgICBpZiAodGhpcy5oYXNJbmRpY2F0b3JUYXJnZXQpIHtcbiAgICAgIHRoaXMuaW5kaWNhdG9yVGFyZ2V0cz8uZm9yRWFjaCgoaW5kaWNhdG9yLCBpKSA9PiB7XG4gICAgICAgIGlmIChpID09PSBpbmRleCkge1xuICAgICAgICAgIGluZGljYXRvci5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGluZGljYXRvci5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8vIEF1dG9wbGF5IGZ1bmN0aW9uYWxpdHlcbiAgcHJpdmF0ZSBzdGFydEF1dG9wbGF5KCk6IHZvaWQge1xuICAgIHRoaXMuYXV0b3BsYXlUaW1lciA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLm5leHQoKVxuICAgIH0sIHRoaXMuaW50ZXJ2YWxWYWx1ZSlcbiAgfVxuXG4gIHByaXZhdGUgc3RvcEF1dG9wbGF5KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmF1dG9wbGF5VGltZXIpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5hdXRvcGxheVRpbWVyKVxuICAgICAgdGhpcy5hdXRvcGxheVRpbWVyID0gdW5kZWZpbmVkXG4gICAgfVxuICB9XG5cbiAgLy8gSGFuZGxlIHRvdWNoL3N3aXBlIGdlc3R1cmVzXG4gIHByaXZhdGUgdG91Y2hTdGFydFggPSAwXG4gIHByaXZhdGUgdG91Y2hFbmRYID0gMFxuXG4gIGhhbmRsZVRvdWNoU3RhcnQoZXZlbnQ6IFRvdWNoRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLnRvdWNoU3RhcnRYID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uc2NyZWVuWFxuICB9XG5cbiAgaGFuZGxlVG91Y2hFbmQoZXZlbnQ6IFRvdWNoRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLnRvdWNoRW5kWCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnNjcmVlblhcbiAgICB0aGlzLmhhbmRsZVN3aXBlKClcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlU3dpcGUoKTogdm9pZCB7XG4gICAgY29uc3Qgc3dpcGVUaHJlc2hvbGQgPSA1MFxuICAgIGNvbnN0IGRpZmYgPSB0aGlzLnRvdWNoU3RhcnRYIC0gdGhpcy50b3VjaEVuZFhcblxuICAgIGlmIChNYXRoLmFicyhkaWZmKSA+IHN3aXBlVGhyZXNob2xkKSB7XG4gICAgICBpZiAoZGlmZiA+IDApIHtcbiAgICAgICAgLy8gU3dpcGVkIGxlZnQgLSBuZXh0IHNsaWRlXG4gICAgICAgIHRoaXMubmV4dCgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBTd2lwZWQgcmlnaHQgLSBwcmV2aW91cyBzbGlkZVxuICAgICAgICB0aGlzLnByZXZpb3VzKClcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcInRhYlwiLCBcInNlY3Rpb25cIl1cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBvZmZzZXQ6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAxMjAgfSAvLyBUb3Agb2Zmc2V0IGZvciBuYXYgYmFycyAodG9wIG5hdiA1NnB4ICsgdGFiIG5hdiA1NnB4ICsgZXh0cmEgOHB4KVxuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSB0YWJUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VjdGlvblRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBvZmZzZXRWYWx1ZTogbnVtYmVyXG5cbiAgcHJpdmF0ZSBvYnNlcnZlcjogSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgfCBudWxsID0gbnVsbFxuICBwcml2YXRlIGlzU2Nyb2xsaW5nID0gZmFsc2VcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiU2Nyb2xsU3B5IGNvbnRyb2xsZXIgY29ubmVjdGVkXCIpXG4gICAgdGhpcy5zZXR1cEludGVyc2VjdGlvbk9ic2VydmVyKClcbiAgICBcbiAgICAvLyBJbml0aWFsIGFjdGl2ZSB0YWIgb24gcGFnZSBsb2FkXG4gICAgdGhpcy51cGRhdGVBY3RpdmVUYWIoKVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5vYnNlcnZlcikge1xuICAgICAgdGhpcy5vYnNlcnZlci5kaXNjb25uZWN0KClcbiAgICB9XG4gIH1cblxuICBzZXR1cEludGVyc2VjdGlvbk9ic2VydmVyKCk6IHZvaWQge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICByb290OiBudWxsLFxuICAgICAgcm9vdE1hcmdpbjogYC0ke3RoaXMub2Zmc2V0VmFsdWV9cHggMHB4IC01MCUgMHB4YCwgLy8gQWN0aXZlIHdoZW4gc2VjdGlvbiBpcyBuZWFyIHRvcFxuICAgICAgdGhyZXNob2xkOiAwXG4gICAgfVxuXG4gICAgdGhpcy5vYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcigoZW50cmllcykgPT4ge1xuICAgICAgLy8gT25seSB1cGRhdGUgaWYgd2UncmUgbm90IGN1cnJlbnRseSBhdXRvLXNjcm9sbGluZ1xuICAgICAgaWYgKHRoaXMuaXNTY3JvbGxpbmcpIHJldHVyblxuXG4gICAgICBlbnRyaWVzLmZvckVhY2goKGVudHJ5KSA9PiB7XG4gICAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZykge1xuICAgICAgICAgIGNvbnN0IHNlY3Rpb25JZCA9IGVudHJ5LnRhcmdldC5pZFxuICAgICAgICAgIHRoaXMuc2V0QWN0aXZlVGFiKHNlY3Rpb25JZClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9LCBvcHRpb25zKVxuXG4gICAgLy8gT2JzZXJ2ZSBhbGwgc2VjdGlvbnNcbiAgICB0aGlzLnNlY3Rpb25UYXJnZXRzLmZvckVhY2goKHNlY3Rpb24pID0+IHtcbiAgICAgIHRoaXMub2JzZXJ2ZXI/Lm9ic2VydmUoc2VjdGlvbilcbiAgICB9KVxuICB9XG5cbiAgc2Nyb2xsVG9TZWN0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIFxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBzZWN0aW9uSWQgPSB0YXJnZXQuZGF0YXNldC5zZWN0aW9uXG4gICAgXG4gICAgaWYgKCFzZWN0aW9uSWQpIHJldHVyblxuXG4gICAgY29uc3Qgc2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlY3Rpb25JZClcbiAgICBpZiAoIXNlY3Rpb24pIHJldHVyblxuXG4gICAgLy8gU2V0IGZsYWcgdG8gcHJldmVudCBvYnNlcnZlciBmcm9tIHRyaWdnZXJpbmcgZHVyaW5nIGF1dG8tc2Nyb2xsXG4gICAgdGhpcy5pc1Njcm9sbGluZyA9IHRydWVcblxuICAgIC8vIENhbGN1bGF0ZSBzY3JvbGwgcG9zaXRpb24gYWNjb3VudGluZyBmb3Igc3RpY2t5IGhlYWRlcnNcbiAgICBjb25zdCBzZWN0aW9uVG9wID0gc2VjdGlvbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyB3aW5kb3cuc2Nyb2xsWVxuICAgIGNvbnN0IHNjcm9sbFRvID0gc2VjdGlvblRvcCAtIHRoaXMub2Zmc2V0VmFsdWVcblxuICAgIC8vIFNtb290aCBzY3JvbGwgdG8gc2VjdGlvblxuICAgIHdpbmRvdy5zY3JvbGxUbyh7XG4gICAgICB0b3A6IHNjcm9sbFRvLFxuICAgICAgYmVoYXZpb3I6IFwic21vb3RoXCJcbiAgICB9KVxuXG4gICAgLy8gSW1tZWRpYXRlbHkgdXBkYXRlIGFjdGl2ZSB0YWJcbiAgICB0aGlzLnNldEFjdGl2ZVRhYihzZWN0aW9uSWQpXG5cbiAgICAvLyBSZXNldCBmbGFnIGFmdGVyIHNjcm9sbCBjb21wbGV0ZXNcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuaXNTY3JvbGxpbmcgPSBmYWxzZVxuICAgIH0sIDEwMDApIC8vIEluY3JlYXNlZCB0aW1lb3V0IHRvIGVuc3VyZSBzbW9vdGggc2Nyb2xsIGNvbXBsZXRlc1xuICB9XG5cbiAgc2V0QWN0aXZlVGFiKHNlY3Rpb25JZDogc3RyaW5nKTogdm9pZCB7XG4gICAgLy8gUmVtb3ZlIGFjdGl2ZSBjbGFzcyBmcm9tIGFsbCB0YWJzXG4gICAgdGhpcy50YWJUYXJnZXRzLmZvckVhY2goKHRhYikgPT4ge1xuICAgICAgdGFiLmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItcHJpbWFyeVwiLCBcInRleHQtcHJpbWFyeVwiKVxuICAgICAgdGFiLmNsYXNzTGlzdC5hZGQoXCJib3JkZXItdHJhbnNwYXJlbnRcIiwgXCJ0ZXh0LWZvcmVncm91bmQtbXV0ZWRcIilcbiAgICB9KVxuXG4gICAgLy8gQWRkIGFjdGl2ZSBjbGFzcyB0byBtYXRjaGluZyB0YWJcbiAgICBjb25zdCBhY3RpdmVUYWIgPSB0aGlzLnRhYlRhcmdldHMuZmluZCgodGFiKSA9PiB0YWIuZGF0YXNldC5zZWN0aW9uID09PSBzZWN0aW9uSWQpXG4gICAgaWYgKGFjdGl2ZVRhYikge1xuICAgICAgYWN0aXZlVGFiLmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItdHJhbnNwYXJlbnRcIiwgXCJ0ZXh0LWZvcmVncm91bmQtbXV0ZWRcIilcbiAgICAgIGFjdGl2ZVRhYi5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLXByaW1hcnlcIiwgXCJ0ZXh0LXByaW1hcnlcIilcbiAgICAgIFxuICAgICAgLy8gU2Nyb2xsIHRhYiBpbnRvIHZpZXcgaWYgbmVlZGVkIChob3Jpem9udGFsIHNjcm9sbClcbiAgICAgIGFjdGl2ZVRhYi5zY3JvbGxJbnRvVmlldyh7XG4gICAgICAgIGJlaGF2aW9yOiBcInNtb290aFwiLFxuICAgICAgICBibG9jazogXCJuZWFyZXN0XCIsXG4gICAgICAgIGlubGluZTogXCJjZW50ZXJcIlxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICB1cGRhdGVBY3RpdmVUYWIoKTogdm9pZCB7XG4gICAgLy8gRmluZCB0aGUgZmlyc3QgdmlzaWJsZSBzZWN0aW9uXG4gICAgY29uc3Qgc2Nyb2xsUG9zaXRpb24gPSB3aW5kb3cucGFnZVlPZmZzZXQgKyB0aGlzLm9mZnNldFZhbHVlICsgMTBcblxuICAgIGZvciAobGV0IGkgPSB0aGlzLnNlY3Rpb25UYXJnZXRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5zZWN0aW9uVGFyZ2V0c1tpXVxuICAgICAgY29uc3Qgc2VjdGlvblRvcCA9IHNlY3Rpb24ub2Zmc2V0VG9wXG5cbiAgICAgIGlmIChzY3JvbGxQb3NpdGlvbiA+PSBzZWN0aW9uVG9wKSB7XG4gICAgICAgIHRoaXMuc2V0QWN0aXZlVGFiKHNlY3Rpb24uaWQpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJjYXJkXCIsIFwiZGV0YWlsc1wiXVxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIHNlbGVjdGVkSWQ6IE51bWJlclxuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBjYXJkVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IGRldGFpbHNUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgc2VsZWN0ZWRJZFZhbHVlOiBudW1iZXJcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiUGFja2FnZVN3aXRjaGVyIGNvbm5lY3RlZFwiKVxuICAgIFxuICAgIC8vIExpc3RlbiBmb3IgcGFja2FnZSBzZWxlY3Rpb24gY2hhbmdlcyBmcm9tIGJvb2tpbmcgbW9kYWxcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImJvb2tpbmctbW9kYWw6cGFja2FnZS1jaGFuZ2VkXCIsIChldmVudDogRXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnRcbiAgICAgIGNvbnN0IHBhY2thZ2VJZCA9IGN1c3RvbUV2ZW50LmRldGFpbC5wYWNrYWdlSWRcbiAgICAgIGlmIChwYWNrYWdlSWQgJiYgcGFja2FnZUlkICE9PSB0aGlzLnNlbGVjdGVkSWRWYWx1ZSkge1xuICAgICAgICB0aGlzLnN5bmNQYWNrYWdlU2VsZWN0aW9uKHBhY2thZ2VJZClcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIC8vIExpc3RlbiBmb3Igc3luYyByZXF1ZXN0cyBmcm9tIGJvb2tpbmcgbW9kYWxcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImJvb2tpbmctbW9kYWw6cmVxdWVzdC1zeW5jXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHN5bmNFdmVudCA9IG5ldyBDdXN0b21FdmVudChcInBhY2thZ2U6c2VsZWN0ZWRcIiwge1xuICAgICAgICBkZXRhaWw6IHsgcGFja2FnZUlkOiB0aGlzLnNlbGVjdGVkSWRWYWx1ZSB9XG4gICAgICB9KVxuICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQoc3luY0V2ZW50KVxuICAgIH0pXG4gIH1cblxuICBzZWxlY3RQYWNrYWdlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgcGFja2FnZUlkID0gcGFyc2VJbnQoY2FyZC5kYXRhc2V0LnBhY2thZ2VJZCB8fCBcIjBcIilcbiAgICBcbiAgICBpZiAocGFja2FnZUlkID09PSB0aGlzLnNlbGVjdGVkSWRWYWx1ZSkge1xuICAgICAgcmV0dXJuIC8vIEFscmVhZHkgc2VsZWN0ZWRcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgc2VsZWN0ZWQgSURcbiAgICB0aGlzLnNlbGVjdGVkSWRWYWx1ZSA9IHBhY2thZ2VJZFxuICAgIHRoaXMudXBkYXRlUGFja2FnZVVJKHBhY2thZ2VJZClcbiAgICBcbiAgICAvLyBOb3RpZnkgYm9va2luZyBtb2RhbFxuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFwicGFja2FnZTpzZWxlY3RlZFwiLCB7XG4gICAgICBkZXRhaWw6IHsgcGFja2FnZUlkIH1cbiAgICB9KVxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGN1c3RvbUV2ZW50KVxuICB9XG5cbiAgcHJpdmF0ZSBzeW5jUGFja2FnZVNlbGVjdGlvbihwYWNrYWdlSWQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuc2VsZWN0ZWRJZFZhbHVlID0gcGFja2FnZUlkXG4gICAgdGhpcy51cGRhdGVQYWNrYWdlVUkocGFja2FnZUlkKVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVQYWNrYWdlVUkocGFja2FnZUlkOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBVcGRhdGUgY2FyZCBzdHlsZXNcbiAgICB0aGlzLmNhcmRUYXJnZXRzLmZvckVhY2goY2FyZEVsID0+IHtcbiAgICAgIGNvbnN0IGNhcmRQYWNrYWdlSWQgPSBwYXJzZUludChjYXJkRWwuZGF0YXNldC5wYWNrYWdlSWQgfHwgXCIwXCIpXG4gICAgICBcbiAgICAgIGlmIChjYXJkUGFja2FnZUlkID09PSBwYWNrYWdlSWQpIHtcbiAgICAgICAgLy8gU2VsZWN0ZWQgc3RhdGVcbiAgICAgICAgY2FyZEVsLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLXdoaXRlJywgJ2JvcmRlci1ncmF5LTEwMCcsICdib3JkZXInKVxuICAgICAgICBjYXJkRWwuY2xhc3NMaXN0LmFkZCgnYmctWyNGRkY5RTZdJywgJ2JvcmRlci0yJywgJ2JvcmRlci1bI0ZGRDcwMF0nKVxuICAgICAgICBcbiAgICAgICAgLy8gU2hvdyBjaGVja21hcmssIGhpZGUgc2VsZWN0IHRleHRcbiAgICAgICAgY29uc3QgY2hlY2ttYXJrID0gY2FyZEVsLnF1ZXJ5U2VsZWN0b3IoJ3N2Z1t2aWV3Qm94PVwiMCAwIDIwIDIwXCJdJylcbiAgICAgICAgaWYgKGNoZWNrbWFyaykge1xuICAgICAgICAgIGNoZWNrbWFyay5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBVbnNlbGVjdGVkIHN0YXRlXG4gICAgICAgIGNhcmRFbC5jbGFzc0xpc3QucmVtb3ZlKCdiZy1bI0ZGRjlFNl0nLCAnYm9yZGVyLTInLCAnYm9yZGVyLVsjRkZENzAwXScpXG4gICAgICAgIGNhcmRFbC5jbGFzc0xpc3QuYWRkKCdiZy13aGl0ZScsICdib3JkZXInLCAnYm9yZGVyLWdyYXktMTAwJylcbiAgICAgICAgXG4gICAgICAgIC8vIEhpZGUgY2hlY2ttYXJrXG4gICAgICAgIGNvbnN0IGNoZWNrbWFyayA9IGNhcmRFbC5xdWVyeVNlbGVjdG9yKCdzdmdbdmlld0JveD1cIjAgMCAyMCAyMFwiXScpXG4gICAgICAgIGlmIChjaGVja21hcmspIHtcbiAgICAgICAgICBjaGVja21hcmsuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBVcGRhdGUgZGV0YWlscyBzZWN0aW9uXG4gICAgY29uc3QgZGV0YWlsc0NvbnRhaW5lciA9IHRoaXMuZGV0YWlsc1RhcmdldFxuICAgIGNvbnN0IGFsbERldGFpbHMgPSBkZXRhaWxzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXBhY2thZ2UtaWRdJylcbiAgICBcbiAgICBhbGxEZXRhaWxzLmZvckVhY2goZGV0YWlsID0+IHtcbiAgICAgIGNvbnN0IGRldGFpbEVsZW1lbnQgPSBkZXRhaWwgYXMgSFRNTEVsZW1lbnRcbiAgICAgIGNvbnN0IGRldGFpbFBhY2thZ2VJZCA9IHBhcnNlSW50KGRldGFpbEVsZW1lbnQuZGF0YXNldC5wYWNrYWdlSWQgfHwgXCIwXCIpXG4gICAgICBcbiAgICAgIGlmIChkZXRhaWxQYWNrYWdlSWQgPT09IHBhY2thZ2VJZCkge1xuICAgICAgICBkZXRhaWxFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZXRhaWxFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICB9XG4gICAgfSlcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyIHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJtb2RhbFwiLFxuICAgIFwicGFja2FnZUJ0blwiLFxuICAgIFwibW9udGhUYWJcIixcbiAgICBcImNhbGVuZGFyXCIsXG4gICAgXCJkYXRlQnRuXCIsXG4gICAgXCJhZHVsdENvdW50XCIsXG4gICAgXCJjaGlsZENvdW50XCJcbiAgXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgcGFja2FnZUJ0blRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBtb250aFRhYlRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBjYWxlbmRhclRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkYXRlQnRuVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IGFkdWx0Q291bnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hpbGRDb3VudFRhcmdldDogSFRNTEVsZW1lbnRcblxuICBwcml2YXRlIHNlbGVjdGVkUGFja2FnZUlkOiBudW1iZXIgfCBudWxsID0gbnVsbFxuICBwcml2YXRlIHNlbGVjdGVkRGF0ZTogc3RyaW5nIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSBhZHVsdFF1YW50aXR5OiBudW1iZXIgPSAxXG4gIHByaXZhdGUgY2hpbGRRdWFudGl0eTogbnVtYmVyID0gMFxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJCb29raW5nIG1vZGFsIGNvbnRyb2xsZXIgY29ubmVjdGVkXCIpXG4gICAgXG4gICAgLy8gTGlzdGVuIGZvciBwYWNrYWdlIHNlbGVjdGlvbiBjaGFuZ2VzIGZyb20gb3V0c2lkZVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFja2FnZTpzZWxlY3RlZFwiLCAoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgICBjb25zdCBjdXN0b21FdmVudCA9IGV2ZW50IGFzIEN1c3RvbUV2ZW50XG4gICAgICBjb25zdCBwYWNrYWdlSWQgPSBjdXN0b21FdmVudC5kZXRhaWwucGFja2FnZUlkXG4gICAgICBpZiAocGFja2FnZUlkICYmIHBhY2thZ2VJZCAhPT0gdGhpcy5zZWxlY3RlZFBhY2thZ2VJZCkge1xuICAgICAgICB0aGlzLnN5bmNQYWNrYWdlU2VsZWN0aW9uKHBhY2thZ2VJZClcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIC8vIExpc3RlbiBmb3IgYm90dG9tIGJhciBtb2RhbCBvcGVuIHJlcXVlc3RzXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJib3R0b20tYmFyOm9wZW4tbW9kYWxcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5vcGVuKClcbiAgICB9KVxuICB9XG5cbiAgb3BlbigpOiB2b2lkIHtcbiAgICAvLyBTeW5jIHdpdGggY3VycmVudCBleHRlcm5hbCBzZWxlY3Rpb24gd2hlbiBvcGVuaW5nXG4gICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoXCJib29raW5nLW1vZGFsOnJlcXVlc3Qtc3luY1wiKVxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KVxuICAgIFxuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiXG4gIH1cblxuICBjbG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJcIlxuICB9XG5cbiAgc2VsZWN0UGFja2FnZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidG4gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgcGFja2FnZUlkID0gcGFyc2VJbnQoYnRuLmRhdGFzZXQucGFja2FnZUlkIHx8IFwiMFwiKVxuICAgIFxuICAgIHRoaXMuc2VsZWN0ZWRQYWNrYWdlSWQgPSBwYWNrYWdlSWRcbiAgICB0aGlzLnVwZGF0ZVBhY2thZ2VCdXR0b25zKHBhY2thZ2VJZClcbiAgICBcbiAgICAvLyBOb3RpZnkgZXh0ZXJuYWwgcGFja2FnZSBzd2l0Y2hlclxuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFwiYm9va2luZy1tb2RhbDpwYWNrYWdlLWNoYW5nZWRcIiwge1xuICAgICAgZGV0YWlsOiB7IHBhY2thZ2VJZCB9XG4gICAgfSlcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChjdXN0b21FdmVudClcbiAgfVxuXG4gIHByaXZhdGUgc3luY1BhY2thZ2VTZWxlY3Rpb24ocGFja2FnZUlkOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLnNlbGVjdGVkUGFja2FnZUlkID0gcGFja2FnZUlkXG4gICAgdGhpcy51cGRhdGVQYWNrYWdlQnV0dG9ucyhwYWNrYWdlSWQpXG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVBhY2thZ2VCdXR0b25zKHBhY2thZ2VJZDogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gVXBkYXRlIGJ1dHRvbiBzdHlsZXNcbiAgICB0aGlzLnBhY2thZ2VCdG5UYXJnZXRzLmZvckVhY2goYnRuRWwgPT4ge1xuICAgICAgY29uc3QgYnRuUGFja2FnZUlkID0gcGFyc2VJbnQoYnRuRWwuZGF0YXNldC5wYWNrYWdlSWQgfHwgXCIwXCIpXG4gICAgICBcbiAgICAgIGlmIChidG5QYWNrYWdlSWQgPT09IHBhY2thZ2VJZCkge1xuICAgICAgICBidG5FbC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctd2hpdGVcIiwgXCJib3JkZXItZ3JheS0yMDBcIilcbiAgICAgICAgYnRuRWwuY2xhc3NMaXN0LmFkZChcImJnLVsjRkZGOUU2XVwiLCBcImJvcmRlci1bI0ZGRDcwMF1cIilcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBjaGVja21hcmsgaWYgbm90IGV4aXN0c1xuICAgICAgICBpZiAoIWJ0bkVsLnF1ZXJ5U2VsZWN0b3IoXCJzdmdcIikpIHtcbiAgICAgICAgICBjb25zdCBjaGVja21hcmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInN2Z1wiKVxuICAgICAgICAgIGNoZWNrbWFyay5jbGFzc0xpc3QuYWRkKFwiYWJzb2x1dGVcIiwgXCJ0b3AtMlwiLCBcInJpZ2h0LTJcIiwgXCJ3LTVcIiwgXCJoLTVcIilcbiAgICAgICAgICBjaGVja21hcmsuc3R5bGUuY29sb3IgPSBcIiNGRkQ3MDBcIlxuICAgICAgICAgIGNoZWNrbWFyay5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsIFwiY3VycmVudENvbG9yXCIpXG4gICAgICAgICAgY2hlY2ttYXJrLnNldEF0dHJpYnV0ZShcInZpZXdCb3hcIiwgXCIwIDAgMjAgMjBcIilcbiAgICAgICAgICBjb25zdCBwYXRoRCA9ICdNMTAgMThhOCA4IDAgMTAwLTE2IDggOCAwIDAwMCAxNnptMy43MDctOS4yOTNhMSAxIDAgMDAtMS40MTQtMS40MTRMOSAxMC41ODYgNy43MDcgOS4yOTNhMSAxIDAgMDAtMS40MTQgMS40MTRsMiAyYTEgMSAwIDAwMS40MTQgMGw0LTR6J1xuICAgICAgICAgIGNoZWNrbWFyay5pbm5lckhUTUwgPSBgPHBhdGggZmlsbC1ydWxlPVwiZXZlbm9kZFwiIGQ9XCIke3BhdGhEfVwiIGNsaXAtcnVsZT1cImV2ZW5vZGRcIj48L3BhdGg+YFxuICAgICAgICAgIGJ0bkVsLmFwcGVuZENoaWxkKGNoZWNrbWFyaylcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnRuRWwuY2xhc3NMaXN0LnJlbW92ZShcImJnLVsjRkZGOUU2XVwiLCBcImJvcmRlci1bI0ZGRDcwMF1cIilcbiAgICAgICAgYnRuRWwuY2xhc3NMaXN0LmFkZChcImJnLXdoaXRlXCIsIFwiYm9yZGVyLWdyYXktMjAwXCIpXG4gICAgICAgIFxuICAgICAgICAvLyBSZW1vdmUgY2hlY2ttYXJrXG4gICAgICAgIGNvbnN0IGNoZWNrbWFyayA9IGJ0bkVsLnF1ZXJ5U2VsZWN0b3IoXCJzdmdcIilcbiAgICAgICAgaWYgKGNoZWNrbWFyaykge1xuICAgICAgICAgIGNoZWNrbWFyay5yZW1vdmUoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHNlbGVjdE1vbnRoKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ0biA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBtb250aCA9IGJ0bi5kYXRhc2V0Lm1vbnRoXG5cbiAgICAvLyBVcGRhdGUgdGFiIHN0eWxlc1xuICAgIHRoaXMubW9udGhUYWJUYXJnZXRzLmZvckVhY2godGFiRWwgPT4ge1xuICAgICAgaWYgKHRhYkVsLmRhdGFzZXQubW9udGggPT09IG1vbnRoKSB7XG4gICAgICAgIHRhYkVsLmNsYXNzTGlzdC5yZW1vdmUoXCJ0ZXh0LWZvcmVncm91bmQtbXV0ZWRcIilcbiAgICAgICAgdGFiRWwuY2xhc3NMaXN0LmFkZChcInRleHQtcmVkLTUwMFwiLCBcImJvcmRlci1iLTJcIiwgXCJib3JkZXItcmVkLTUwMFwiKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFiRWwuY2xhc3NMaXN0LnJlbW92ZShcInRleHQtcmVkLTUwMFwiLCBcImJvcmRlci1iLTJcIiwgXCJib3JkZXItcmVkLTUwMFwiKVxuICAgICAgICB0YWJFbC5jbGFzc0xpc3QuYWRkKFwidGV4dC1mb3JlZ3JvdW5kLW11dGVkXCIpXG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIFRPRE86IFVwZGF0ZSBjYWxlbmRhciBkaXNwbGF5IGZvciBzZWxlY3RlZCBtb250aFxuICB9XG5cbiAgc2VsZWN0RGF0ZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidG4gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50XG4gICAgY29uc3QgZGF0ZSA9IGJ0bi5kYXRhc2V0LmRhdGVcblxuICAgIGlmICghZGF0ZSB8fCBidG4uZGlzYWJsZWQpIHJldHVyblxuXG4gICAgdGhpcy5zZWxlY3RlZERhdGUgPSBkYXRlXG5cbiAgICAvLyBVcGRhdGUgZGF0ZSBidXR0b24gc3R5bGVzXG4gICAgdGhpcy5kYXRlQnRuVGFyZ2V0cy5mb3JFYWNoKGRhdGVCdG4gPT4ge1xuICAgICAgaWYgKGRhdGVCdG4uZGF0YXNldC5kYXRlID09PSBkYXRlKSB7XG4gICAgICAgIGRhdGVCdG4uc3R5bGUuYmFja2dyb3VuZCA9IFwiI0ZGRDcwMFwiXG4gICAgICAgIGRhdGVCdG4uc3R5bGUuY29sb3IgPSBcIiMwMDBcIlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0ZUJ0bi5zdHlsZS5iYWNrZ3JvdW5kID0gXCJcIlxuICAgICAgICBkYXRlQnRuLnN0eWxlLmNvbG9yID0gXCJcIlxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBpbmNyZWFzZUFkdWx0KCk6IHZvaWQge1xuICAgIHRoaXMuYWR1bHRRdWFudGl0eSsrXG4gICAgdGhpcy5hZHVsdENvdW50VGFyZ2V0LnRleHRDb250ZW50ID0gdGhpcy5hZHVsdFF1YW50aXR5LnRvU3RyaW5nKClcbiAgfVxuXG4gIGRlY3JlYXNlQWR1bHQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuYWR1bHRRdWFudGl0eSA+IDEpIHtcbiAgICAgIHRoaXMuYWR1bHRRdWFudGl0eS0tXG4gICAgICB0aGlzLmFkdWx0Q291bnRUYXJnZXQudGV4dENvbnRlbnQgPSB0aGlzLmFkdWx0UXVhbnRpdHkudG9TdHJpbmcoKVxuICAgIH1cbiAgfVxuXG4gIGluY3JlYXNlQ2hpbGQoKTogdm9pZCB7XG4gICAgdGhpcy5jaGlsZFF1YW50aXR5KytcbiAgICB0aGlzLmNoaWxkQ291bnRUYXJnZXQudGV4dENvbnRlbnQgPSB0aGlzLmNoaWxkUXVhbnRpdHkudG9TdHJpbmcoKVxuICB9XG5cbiAgZGVjcmVhc2VDaGlsZCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jaGlsZFF1YW50aXR5ID4gMCkge1xuICAgICAgdGhpcy5jaGlsZFF1YW50aXR5LS1cbiAgICAgIHRoaXMuY2hpbGRDb3VudFRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMuY2hpbGRRdWFudGl0eS50b1N0cmluZygpXG4gICAgfVxuICB9XG5cbiAgYWRkVG9DYXJ0KCk6IHZvaWQge1xuICAgIGlmICghdGhpcy52YWxpZGF0ZVNlbGVjdGlvbigpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcIkFkZGluZyB0byBjYXJ0OlwiLCB7XG4gICAgICBwYWNrYWdlSWQ6IHRoaXMuc2VsZWN0ZWRQYWNrYWdlSWQsXG4gICAgICBkYXRlOiB0aGlzLnNlbGVjdGVkRGF0ZSxcbiAgICAgIGFkdWx0czogdGhpcy5hZHVsdFF1YW50aXR5LFxuICAgICAgY2hpbGRyZW46IHRoaXMuY2hpbGRRdWFudGl0eVxuICAgIH0pXG5cbiAgICBhbGVydChcIlx1NURGMlx1NTJBMFx1NTE2NVx1OEQyRFx1NzI2OVx1OEY2NlwiKVxuICAgIHRoaXMuY2xvc2UoKVxuICB9XG5cbiAgYnV5Tm93KCk6IHZvaWQge1xuICAgIGlmICghdGhpcy52YWxpZGF0ZVNlbGVjdGlvbigpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTk4NzVcdTk3NjJcdTc2ODQgcHJvZHVjdF9pZFx1RkYwOFx1NEVDRSBVUkwgXHU0RTJEXHU4M0I3XHU1M0Q2XHVGRjA5XG4gICAgY29uc3QgcHJvZHVjdElkID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KCcvJykucG9wKClcbiAgICBcbiAgICAvLyBcdTY3ODRcdTVFRkFcdThCQTJcdTUzNTVcdTk4NzVcdTk3NjIgVVJMXG4gICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICBwcm9kdWN0X2lkOiBwcm9kdWN0SWQgfHwgJycsXG4gICAgICBwYWNrYWdlX2lkOiAodGhpcy5zZWxlY3RlZFBhY2thZ2VJZCB8fCAnJykudG9TdHJpbmcoKSxcbiAgICAgIHRyYXZlbF9kYXRlOiB0aGlzLnNlbGVjdGVkRGF0ZSB8fCAnJyxcbiAgICAgIGFkdWx0X2NvdW50OiB0aGlzLmFkdWx0UXVhbnRpdHkudG9TdHJpbmcoKSxcbiAgICAgIGNoaWxkX2NvdW50OiB0aGlzLmNoaWxkUXVhbnRpdHkudG9TdHJpbmcoKVxuICAgIH0pXG4gICAgXG4gICAgLy8gXHU4REYzXHU4RjZDXHU1MjMwXHU4QkEyXHU1MzU1XHU5ODc1XHU5NzYyXG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgL3RvdXJfZ3JvdXBfYm9va2luZ3MvbmV3PyR7cGFyYW1zLnRvU3RyaW5nKCl9YFxuICB9XG5cbiAgcHJpdmF0ZSB2YWxpZGF0ZVNlbGVjdGlvbigpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuc2VsZWN0ZWREYXRlKSB7XG4gICAgICBhbGVydChcIlx1OEJGN1x1OTAwOVx1NjJFOVx1NTFGQVx1ODg0Q1x1NjVFNVx1NjcxRlwiKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYWR1bHRRdWFudGl0eSA8IDEpIHtcbiAgICAgIGFsZXJ0KFwiXHU4MUYzXHU1QzExXHU5NzAwXHU4OTgxMVx1NEY0RFx1NjIxMFx1NEVCQVwiKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWVcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyIHtcbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkJvdHRvbSBiYXIgY29udHJvbGxlciBjb25uZWN0ZWRcIilcbiAgfVxuXG4gIG9wZW5Nb2RhbCgpOiB2b2lkIHtcbiAgICAvLyBUcmlnZ2VyIG1vZGFsIG9wZW4gdmlhIEN1c3RvbUV2ZW50XG4gICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoXCJib3R0b20tYmFyOm9wZW4tbW9kYWxcIilcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudClcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wicmFkaW9cIiwgXCJ0b3RhbFByaWNlXCJdXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgYmFzZVByaWNlOiBOdW1iZXIsXG4gICAgYWR1bHRDb3VudDogTnVtYmVyLFxuICAgIGNoaWxkQ291bnQ6IE51bWJlclxuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSByYWRpb1RhcmdldHM6IEhUTUxJbnB1dEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IHRvdGFsUHJpY2VUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgYmFzZVByaWNlVmFsdWU6IG51bWJlclxuICBkZWNsYXJlIHJlYWRvbmx5IGFkdWx0Q291bnRWYWx1ZTogbnVtYmVyXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hpbGRDb3VudFZhbHVlOiBudW1iZXJcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiSW5zdXJhbmNlU2VsZWN0b3IgY29ubmVjdGVkXCIpXG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiSW5zdXJhbmNlU2VsZWN0b3IgZGlzY29ubmVjdGVkXCIpXG4gIH1cblxuICB1cGRhdGVQcmljZSgpOiB2b2lkIHtcbiAgICBjb25zdCBzZWxlY3RlZFJhZGlvID0gdGhpcy5yYWRpb1RhcmdldHMuZmluZCgocmFkaW8pID0+IHJhZGlvLmNoZWNrZWQpXG4gICAgaWYgKCFzZWxlY3RlZFJhZGlvKSByZXR1cm5cblxuICAgIGNvbnN0IGluc3VyYW5jZVR5cGUgPSBzZWxlY3RlZFJhZGlvLnZhbHVlXG4gICAgY29uc3QgdG90YWxQZW9wbGUgPSB0aGlzLmFkdWx0Q291bnRWYWx1ZSArIHRoaXMuY2hpbGRDb3VudFZhbHVlXG4gICAgbGV0IGluc3VyYW5jZVByaWNlID0gMFxuXG4gICAgaWYgKGluc3VyYW5jZVR5cGUgPT09IFwic3RhbmRhcmRcIikge1xuICAgICAgaW5zdXJhbmNlUHJpY2UgPSAxNSAqIHRvdGFsUGVvcGxlXG4gICAgfSBlbHNlIGlmIChpbnN1cmFuY2VUeXBlID09PSBcInByZW1pdW1cIikge1xuICAgICAgaW5zdXJhbmNlUHJpY2UgPSAzNSAqIHRvdGFsUGVvcGxlXG4gICAgfVxuXG4gICAgY29uc3QgdG90YWxQcmljZSA9IHRoaXMuYmFzZVByaWNlVmFsdWUgKyBpbnN1cmFuY2VQcmljZVxuICAgIHRoaXMudG90YWxQcmljZVRhcmdldC50ZXh0Q29udGVudCA9IGBcdTAwQTUke01hdGgucm91bmQodG90YWxQcmljZSl9YFxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJtb2RhbFwiLFxuICAgIFwidHJhdmVsZXJOYW1lSW5wdXRcIixcbiAgICBcInRyYXZlbGVySWRJbnB1dFwiXG4gIF1cblxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIHNlbGVjdGVkUGFzc2VuZ2VySWQ6IFN0cmluZyxcbiAgICBzZWxlY3RlZFBhc3Nlbmdlck5hbWU6IFN0cmluZyxcbiAgICBzZWxlY3RlZFBhc3NlbmdlcklkTnVtYmVyOiBTdHJpbmcsXG4gICAgdHJhdmVsZXJJbmRleDogTnVtYmVyXG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IG1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRyYXZlbGVyTmFtZUlucHV0VGFyZ2V0czogSFRNTElucHV0RWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgdHJhdmVsZXJJZElucHV0VGFyZ2V0czogSFRNTElucHV0RWxlbWVudFtdXG5cbiAgZGVjbGFyZSBzZWxlY3RlZFBhc3NlbmdlcklkVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHNlbGVjdGVkUGFzc2VuZ2VyTmFtZVZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBzZWxlY3RlZFBhc3NlbmdlcklkTnVtYmVyVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHRyYXZlbGVySW5kZXhWYWx1ZTogbnVtYmVyXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlRvdXJUcmF2ZWxlclNlbGVjdG9yIGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlRvdXJUcmF2ZWxlclNlbGVjdG9yIGRpc2Nvbm5lY3RlZFwiKVxuICB9XG5cbiAgLy8gT3BlbiBtb2RhbCBmb3Igc3BlY2lmaWMgdHJhdmVsZXJcbiAgb3Blbk1vZGFsKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCB0cmF2ZWxlckluZGV4ID0gcGFyc2VJbnQodGFyZ2V0LmRhdGFzZXQudHJhdmVsZXJJbmRleCB8fCAnMCcpXG4gICAgXG4gICAgY29uc29sZS5sb2coXCJPcGVuaW5nIHRyYXZlbGVyIHNlbGVjdG9yIG1vZGFsIGZvciBpbmRleDpcIiwgdHJhdmVsZXJJbmRleClcbiAgICBcbiAgICB0aGlzLnRyYXZlbGVySW5kZXhWYWx1ZSA9IHRyYXZlbGVySW5kZXhcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nXG4gIH1cblxuICAvLyBDbG9zZSBtb2RhbFxuICBjbG9zZU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJydcbiAgfVxuXG4gIC8vIFNlbGVjdCBhIHBhc3NlbmdlciBmcm9tIHRoZSBsaXN0XG4gIHNlbGVjdFBhc3NlbmdlcihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgcGFzc2VuZ2VySWQgPSB0YXJnZXQuZGF0YXNldC5wYXNzZW5nZXJJZCB8fCAnJ1xuICAgIGNvbnN0IHBhc3Nlbmdlck5hbWUgPSB0YXJnZXQuZGF0YXNldC5wYXNzZW5nZXJOYW1lIHx8ICcnXG4gICAgY29uc3QgcGFzc2VuZ2VySWROdW1iZXIgPSB0YXJnZXQuZGF0YXNldC5wYXNzZW5nZXJJZE51bWJlciB8fCAnJ1xuXG4gICAgY29uc29sZS5sb2coXCJTZWxlY3RlZCBwYXNzZW5nZXI6XCIsIHsgcGFzc2VuZ2VySWQsIHBhc3Nlbmdlck5hbWUsIHBhc3NlbmdlcklkTnVtYmVyLCB0cmF2ZWxlckluZGV4OiB0aGlzLnRyYXZlbGVySW5kZXhWYWx1ZSB9KVxuXG4gICAgLy8gU3RvcmUgc2VsZWN0ZWQgdmFsdWVzXG4gICAgdGhpcy5zZWxlY3RlZFBhc3NlbmdlcklkVmFsdWUgPSBwYXNzZW5nZXJJZFxuICAgIHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJOYW1lVmFsdWUgPSBwYXNzZW5nZXJOYW1lXG4gICAgdGhpcy5zZWxlY3RlZFBhc3NlbmdlcklkTnVtYmVyVmFsdWUgPSBwYXNzZW5nZXJJZE51bWJlclxuXG4gICAgLy8gVXBkYXRlIGZvcm0gaW5wdXRzIGZvciBzcGVjaWZpYyB0cmF2ZWxlclxuICAgIGlmICh0aGlzLnRyYXZlbGVyTmFtZUlucHV0VGFyZ2V0c1t0aGlzLnRyYXZlbGVySW5kZXhWYWx1ZV0pIHtcbiAgICAgIHRoaXMudHJhdmVsZXJOYW1lSW5wdXRUYXJnZXRzW3RoaXMudHJhdmVsZXJJbmRleFZhbHVlXS52YWx1ZSA9IHBhc3Nlbmdlck5hbWVcbiAgICB9XG4gICAgaWYgKHRoaXMudHJhdmVsZXJJZElucHV0VGFyZ2V0c1t0aGlzLnRyYXZlbGVySW5kZXhWYWx1ZV0pIHtcbiAgICAgIHRoaXMudHJhdmVsZXJJZElucHV0VGFyZ2V0c1t0aGlzLnRyYXZlbGVySW5kZXhWYWx1ZV0udmFsdWUgPSBwYXNzZW5nZXJJZE51bWJlclxuICAgIH1cblxuICAgIC8vIENsb3NlIG1vZGFsXG4gICAgdGhpcy5jbG9zZU1vZGFsKClcbiAgfVxuXG4gIC8vIFN0b3AgcHJvcGFnYXRpb24gZm9yIGlubmVyIGNsaWNrc1xuICBzdG9wUHJvcGFnYXRpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxGb3JtRWxlbWVudD4ge1xuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiU3BlY2lhbEZsaWdodHNGb3JtIGNvbnRyb2xsZXIgY29ubmVjdGVkXCIpXG4gIH1cblxuICBoYW5kbGVTdWJtaXQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIFxuICAgIGNvbnN0IGZvcm0gPSB0aGlzLmVsZW1lbnQgYXMgSFRNTEZvcm1FbGVtZW50XG4gICAgXG4gICAgLy8gR2V0IGZvcm0gZGF0YVxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGZvcm0pXG4gICAgY29uc3QgZGVzdGluYXRpb25DaXRpZXMgPSBmb3JtRGF0YS5nZXQoJ2Rlc3RpbmF0aW9uX2NpdGllcycpIGFzIHN0cmluZ1xuICAgIGNvbnN0IGRlcGFydHVyZUNpdHkgPSBmb3JtRGF0YS5nZXQoJ2RlcGFydHVyZV9jaXR5JykgYXMgc3RyaW5nXG4gICAgY29uc3QgZGF0ZSA9IGZvcm1EYXRhLmdldCgnZGF0ZScpIGFzIHN0cmluZ1xuICAgIGNvbnN0IHNvcnRCeSA9IGZvcm1EYXRhLmdldCgnc29ydF9ieScpIGFzIHN0cmluZ1xuICAgIGNvbnN0IHRyaXBUeXBlID0gZm9ybURhdGEuZ2V0KCd0cmlwX3R5cGUnKSBhcyBzdHJpbmdcbiAgICBcbiAgICAvLyBDaGVjayBpZiBtdWx0aXBsZSBjaXRpZXMgYXJlIHNlbGVjdGVkXG4gICAgY29uc3QgY2l0aWVzID0gZGVzdGluYXRpb25DaXRpZXMuc3BsaXQoJywnKS5tYXAoY2l0eSA9PiBjaXR5LnRyaW0oKSkuZmlsdGVyKGNpdHkgPT4gY2l0eSAhPT0gJycpXG4gICAgY29uc3QgaXNNdWx0aUNpdHkgPSBjaXRpZXMubGVuZ3RoID4gMVxuICAgIFxuICAgIC8vIEJ1aWxkIFVSTCBiYXNlZCBvbiBkZXN0aW5hdGlvbiBjb3VudFxuICAgIGxldCB1cmw6IHN0cmluZ1xuICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKVxuICAgIFxuICAgIGlmIChpc011bHRpQ2l0eSkge1xuICAgICAgLy8gTXVsdGlwbGUgY2l0aWVzIC0+IC9mbGlnaHRzL2NvbWJpbmF0aW9uc1xuICAgICAgdXJsID0gJy9mbGlnaHRzL2NvbWJpbmF0aW9ucydcbiAgICAgIHBhcmFtcy5hcHBlbmQoJ2RlcGFydHVyZV9jaXR5JywgZGVwYXJ0dXJlQ2l0eSlcbiAgICAgIHBhcmFtcy5hcHBlbmQoJ2Rlc3RpbmF0aW9uX2NpdGllcycsIGRlc3RpbmF0aW9uQ2l0aWVzKVxuICAgICAgcGFyYW1zLmFwcGVuZCgnZGF0ZScsIGRhdGUpXG4gICAgICBwYXJhbXMuYXBwZW5kKCdzb3J0X2J5Jywgc29ydEJ5KVxuICAgICAgcGFyYW1zLmFwcGVuZCgndHJpcF90eXBlJywgdHJpcFR5cGUpXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNpbmdsZSBjaXR5IC0+IC9mbGlnaHRzL3NlYXJjaFxuICAgICAgdXJsID0gJy9mbGlnaHRzL3NlYXJjaCdcbiAgICAgIHBhcmFtcy5hcHBlbmQoJ2RlcGFydHVyZV9jaXR5JywgZGVwYXJ0dXJlQ2l0eSlcbiAgICAgIHBhcmFtcy5hcHBlbmQoJ2Rlc3RpbmF0aW9uX2NpdHknLCBjaXRpZXNbMF0gfHwgZGVzdGluYXRpb25DaXRpZXMpXG4gICAgICBwYXJhbXMuYXBwZW5kKCdkYXRlJywgZGF0ZSlcbiAgICAgIHBhcmFtcy5hcHBlbmQoJ3NvcnRfYnknLCBzb3J0QnkpXG4gICAgICBwYXJhbXMuYXBwZW5kKCd0cmlwX3R5cGUnLCB0cmlwVHlwZSlcbiAgICB9XG4gICAgXG4gICAgLy8gTmF2aWdhdGUgdG8gdGhlIGFwcHJvcHJpYXRlIHBhZ2VcbiAgICBjb25zdCBmdWxsVXJsID0gYCR7dXJsfT8ke3BhcmFtcy50b1N0cmluZygpfWBcbiAgICBjb25zb2xlLmxvZygnUmVkaXJlY3RpbmcgdG86JywgZnVsbFVybClcbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGZ1bGxVcmxcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwidG90YWxQcmljZVwiLFxuICAgIFwic2VsZWN0ZWRDYXJyaWFnZVwiLFxuICAgIFwiY2FycmlhZ2VCdXR0b25cIixcbiAgICBcInNlYXRCdXR0b25cIixcbiAgICBcInNlbGVjdGVkU2VhdENvdW50XCJcbiAgXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgdG90YWxQcmljZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzZWxlY3RlZENhcnJpYWdlVGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY2FycmlhZ2VCdXR0b25UYXJnZXRzOiBIVE1MQnV0dG9uRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VhdEJ1dHRvblRhcmdldHM6IEhUTUxCdXR0b25FbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBzZWxlY3RlZFNlYXRDb3VudFRhcmdldDogSFRNTEVsZW1lbnRcblxuICBwcml2YXRlIGJhc2VQcmljZTogbnVtYmVyID0gMFxuICBwcml2YXRlIGluc3VyYW5jZVByaWNlOiBudW1iZXIgPSAwXG4gIHByaXZhdGUgY3VycmVudENhcnJpYWdlOiBzdHJpbmcgPSAnJ1xuICBwcml2YXRlIHNlbGVjdGVkU2VhdHM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpXG4gIHByaXZhdGUgbWF4U2VhdHM6IG51bWJlciA9IDFcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIEdldCBiYXNlIHByaWNlIGZyb20gaGlkZGVuIGZpZWxkXG4gICAgY29uc3QgcHJpY2VGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib29raW5nX3RvdGFsX3ByaWNlJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGlmIChwcmljZUZpZWxkKSB7XG4gICAgICB0aGlzLmJhc2VQcmljZSA9IHBhcnNlRmxvYXQocHJpY2VGaWVsZC52YWx1ZSB8fCAnMCcpXG4gICAgfVxuICAgIHRoaXMudXBkYXRlVG90YWxQcmljZSgpXG4gIH1cblxuICBzZWxlY3RQYXNzZW5nZXIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgcmFkaW8gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBwYXNzZW5nZXJOYW1lID0gcmFkaW8uZGF0YXNldC5wYXNzZW5nZXJOYW1lIHx8ICcnXG4gICAgY29uc3QgaWROdW1iZXIgPSByYWRpby5kYXRhc2V0LmlkTnVtYmVyIHx8ICcnXG4gICAgY29uc3QgcGhvbmUgPSByYWRpby5kYXRhc2V0LnBob25lIHx8ICcnXG5cbiAgICAvLyBVcGRhdGUgaGlkZGVuIGZpZWxkc1xuICAgIGNvbnN0IG5hbWVGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib29raW5nX3Bhc3Nlbmdlcl9uYW1lJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IGlkRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9va2luZ19wYXNzZW5nZXJfaWRfbnVtYmVyJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IHBob25lRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9va2luZ19jb250YWN0X3Bob25lJykgYXMgSFRNTElucHV0RWxlbWVudFxuXG4gICAgaWYgKG5hbWVGaWVsZCkgbmFtZUZpZWxkLnZhbHVlID0gcGFzc2VuZ2VyTmFtZVxuICAgIGlmIChpZEZpZWxkKSBpZEZpZWxkLnZhbHVlID0gaWROdW1iZXJcbiAgICBpZiAocGhvbmVGaWVsZCkgcGhvbmVGaWVsZC52YWx1ZSA9IHBob25lXG4gIH1cblxuICBzZWxlY3RDYXJyaWFnZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50XG4gICAgY29uc3QgY2FycmlhZ2UgPSBidXR0b24uZGF0YXNldC5jYXJyaWFnZSB8fCAnJ1xuXG4gICAgLy8gQ2hlY2sgaWYgY2xpY2tpbmcgdGhlIGFscmVhZHkgc2VsZWN0ZWQgY2FycmlhZ2UgKHRvZ2dsZSBvZmYpXG4gICAgaWYgKHRoaXMuY3VycmVudENhcnJpYWdlID09PSBjYXJyaWFnZSkge1xuICAgICAgLy8gRGVzZWxlY3QgY3VycmVudCBjYXJyaWFnZVxuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLW9yYW5nZS01MDAnLCAndGV4dC13aGl0ZScsICdib3JkZXItb3JhbmdlLTUwMCcpXG4gICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYmctd2hpdGUnLCAndGV4dC1ncmF5LTcwMCcsICdib3JkZXItZ3JheS0zMDAnKVxuICAgICAgdGhpcy5zZWxlY3RlZENhcnJpYWdlVGFyZ2V0LnZhbHVlID0gJydcbiAgICAgIHRoaXMuY3VycmVudENhcnJpYWdlID0gJydcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRGVzZWxlY3QgYWxsIGJ1dHRvbnMgZmlyc3RcbiAgICAgIHRoaXMuY2FycmlhZ2VCdXR0b25UYXJnZXRzLmZvckVhY2goYnRuID0+IHtcbiAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLW9yYW5nZS01MDAnLCAndGV4dC13aGl0ZScsICdib3JkZXItb3JhbmdlLTUwMCcpXG4gICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdiZy13aGl0ZScsICd0ZXh0LWdyYXktNzAwJywgJ2JvcmRlci1ncmF5LTMwMCcpXG4gICAgICB9KVxuXG4gICAgICAvLyBTZWxlY3QgbmV3IGNhcnJpYWdlXG4gICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYmctd2hpdGUnLCAndGV4dC1ncmF5LTcwMCcsICdib3JkZXItZ3JheS0zMDAnKVxuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2JnLW9yYW5nZS01MDAnLCAndGV4dC13aGl0ZScsICdib3JkZXItb3JhbmdlLTUwMCcpXG4gICAgICB0aGlzLnNlbGVjdGVkQ2FycmlhZ2VUYXJnZXQudmFsdWUgPSBjYXJyaWFnZVxuICAgICAgdGhpcy5jdXJyZW50Q2FycmlhZ2UgPSBjYXJyaWFnZVxuICAgIH1cbiAgfVxuXG4gIHNlbGVjdFNlYXQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGNvbnN0IHNlYXRMZXR0ZXIgPSBidXR0b24uZGF0YXNldC5zZWF0TGV0dGVyIHx8ICcnXG5cbiAgICBpZiAoIXNlYXRMZXR0ZXIpIHJldHVyblxuXG4gICAgLy8gVG9nZ2xlIHNlYXQgc2VsZWN0aW9uXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRTZWF0cy5oYXMoc2VhdExldHRlcikpIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRTZWF0cy5kZWxldGUoc2VhdExldHRlcilcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1vcmFuZ2UtNTAwJywgJ3RleHQtd2hpdGUnLCAnYm9yZGVyLW9yYW5nZS01MDAnKVxuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2JnLXdoaXRlJywgJ3RleHQtZ3JheS03MDAnLCAnYm9yZGVyLWdyYXktMzAwJylcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQ2hlY2sgaWYgbWF4IHNlYXRzIHJlYWNoZWRcbiAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2VhdHMuc2l6ZSA+PSB0aGlzLm1heFNlYXRzKSB7XG4gICAgICAgIHdpbmRvdy5zaG93VG9hc3QoYFx1NjcwMFx1NTkxQVx1NTNFQVx1ODBGRFx1OTAwOVx1NjJFOSR7dGhpcy5tYXhTZWF0c31cdTRFMkFcdTVFQTdcdTRGNERgKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIHRoaXMuc2VsZWN0ZWRTZWF0cy5hZGQoc2VhdExldHRlcilcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdiZy13aGl0ZScsICd0ZXh0LWdyYXktNzAwJywgJ2JvcmRlci1ncmF5LTMwMCcsICdiZy1ncmF5LTEwMCcsICd0ZXh0LWdyYXktNDAwJylcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdiZy1vcmFuZ2UtNTAwJywgJ3RleHQtd2hpdGUnLCAnYm9yZGVyLW9yYW5nZS01MDAnKVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBzZWxlY3RlZCBjb3VudCBkaXNwbGF5XG4gICAgdGhpcy51cGRhdGVTZWxlY3RlZFNlYXRDb3VudCgpXG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVNlbGVjdGVkU2VhdENvdW50KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNlbGVjdGVkU2VhdENvdW50VGFyZ2V0KSB7XG4gICAgICB0aGlzLnNlbGVjdGVkU2VhdENvdW50VGFyZ2V0LnRleHRDb250ZW50ID0gYCR7dGhpcy5zZWxlY3RlZFNlYXRzLnNpemV9LyR7dGhpcy5tYXhTZWF0c31gXG4gICAgfVxuICB9XG5cbiAgdG9nZ2xlTmVhckRvb3IoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY2hlY2tib3ggPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICAvLyBUaGlzIGlzIGp1c3QgZm9yIFVJIGludGVyYWN0aW9uXG4gICAgLy8gUmVhbCBpbXBsZW1lbnRhdGlvbiB3b3VsZCBhZGQgXHUwMEE1MTIgdG8gdGhlIHByaWNlXG4gICAgaWYgKGNoZWNrYm94LmNoZWNrZWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdOZWFyIGRvb3Igb3B0aW9uIHNlbGVjdGVkJylcbiAgICB9XG4gIH1cblxuICBoYW5kbGVOb3JtYWxCb29raW5nKCk6IHZvaWQge1xuICAgIC8vIFZhbGlkYXRlIGFuZCBzdWJtaXQgdGhlIGZvcm0gZm9yIG5vcm1hbCBib29raW5nXG4gICAgY29uc3QgZm9ybSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJykgYXMgSFRNTEZvcm1FbGVtZW50XG4gICAgaWYgKCFmb3JtKSByZXR1cm5cblxuICAgIC8vIFZhbGlkYXRlIHBhc3NlbmdlciBzZWxlY3Rpb25cbiAgICBjb25zdCBwYXNzZW5nZXJSYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJwYXNzZW5nZXJcIl06Y2hlY2tlZCcpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBpZiAoIXBhc3NlbmdlclJhZGlvKSB7XG4gICAgICB3aW5kb3cuc2hvd1RvYXN0KCdcdThCRjdcdTkwMDlcdTYyRTlcdTRFNThcdThGNjZcdTRFQkEnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgY29udGFjdCBwaG9uZVxuICAgIGNvbnN0IHBob25lRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9va2luZ19jb250YWN0X3Bob25lJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGlmICghcGhvbmVGaWVsZCB8fCAhcGhvbmVGaWVsZC52YWx1ZS50cmltKCkpIHtcbiAgICAgIHdpbmRvdy5zaG93VG9hc3QoJ1x1OEJGN1x1OEY5M1x1NTE2NVx1ODA1NFx1N0NGQlx1NjI0Qlx1NjczQScpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBTZXQgYWNjZXB0X3Rlcm1zIHRvIDEgKFx1NjY2RVx1OTAxQVx1OTg4NFx1OEJBMlx1ODFFQVx1NTJBOFx1NTQwQ1x1NjEwRlx1NTM0Rlx1OEJBRSlcbiAgICBjb25zdCBhY2NlcHRUZXJtc0ZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jvb2tpbmdfYWNjZXB0X3Rlcm1zJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGlmIChhY2NlcHRUZXJtc0ZpZWxkKSB7XG4gICAgICBhY2NlcHRUZXJtc0ZpZWxkLnZhbHVlID0gJzEnXG4gICAgfVxuXG4gICAgLy8gVXNlIG5hdGl2ZSBzdWJtaXQgdG8gYnlwYXNzIGhhbmRsZVN1Ym1pdCBldmVudCBsaXN0ZW5lclxuICAgIEhUTUxGb3JtRWxlbWVudC5wcm90b3R5cGUuc3VibWl0LmNhbGwoZm9ybSlcbiAgfVxuXG4gIHNlbGVjdEluc3VyYW5jZU9wdGlvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCByYWRpbyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IGluc3VyYW5jZVR5cGUgPSByYWRpby52YWx1ZVxuICAgIGNvbnN0IGluc3VyYW5jZVByaWNlID0gcGFyc2VGbG9hdChyYWRpby5kYXRhc2V0LnByaWNlIHx8ICcwJylcblxuICAgIGNvbnN0IGluc3VyYW5jZVR5cGVGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib29raW5nX2luc3VyYW5jZV90eXBlJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IGluc3VyYW5jZVByaWNlRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9va2luZ19pbnN1cmFuY2VfcHJpY2UnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG5cbiAgICBpZiAoaW5zdXJhbmNlVHlwZUZpZWxkKSBpbnN1cmFuY2VUeXBlRmllbGQudmFsdWUgPSBpbnN1cmFuY2VUeXBlXG4gICAgaWYgKGluc3VyYW5jZVByaWNlRmllbGQpIGluc3VyYW5jZVByaWNlRmllbGQudmFsdWUgPSBpbnN1cmFuY2VQcmljZS50b1N0cmluZygpXG5cbiAgICB0aGlzLmluc3VyYW5jZVByaWNlID0gaW5zdXJhbmNlUHJpY2VcbiAgICB0aGlzLnVwZGF0ZVRvdGFsUHJpY2UoKVxuICB9XG5cbiAgaGFuZGxlU3VibWl0KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIC8vIFZhbGlkYXRlIHBhc3NlbmdlciBzZWxlY3Rpb25cbiAgICBjb25zdCBwYXNzZW5nZXJSYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJwYXNzZW5nZXJcIl06Y2hlY2tlZCcpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBpZiAoIXBhc3NlbmdlclJhZGlvKSB7XG4gICAgICBhbGVydCgnXHU4QkY3XHU5MDA5XHU2MkU5XHU0RTU4XHU4RjY2XHU0RUJBJylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIGNvbnRhY3QgcGhvbmVcbiAgICBjb25zdCBwaG9uZUZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jvb2tpbmdfY29udGFjdF9waG9uZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBpZiAoIXBob25lRmllbGQgfHwgIXBob25lRmllbGQudmFsdWUudHJpbSgpKSB7XG4gICAgICBhbGVydCgnXHU4QkY3XHU4RjkzXHU1MTY1XHU4MDU0XHU3Q0ZCXHU2MjRCXHU2NzNBJylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIENoZWNrIHRlcm1zIGFjY2VwdGFuY2VcbiAgICBjb25zdCB2aXN1YWxDaGVja2JveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aXN1YWxfYWNjZXB0X3Rlcm1zJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGlmICghdmlzdWFsQ2hlY2tib3ggfHwgIXZpc3VhbENoZWNrYm94LmNoZWNrZWQpIHtcbiAgICAgIHRoaXMuc2hvd1Rlcm1zTW9kYWwoKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaW5zdXJhbmNlIHNlbGVjdGlvblxuICAgIGNvbnN0IGluc3VyYW5jZVR5cGVGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib29raW5nX2luc3VyYW5jZV90eXBlJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IGluc3VyYW5jZVR5cGUgPSBpbnN1cmFuY2VUeXBlRmllbGQ/LnZhbHVlIHx8ICdub25lJ1xuXG4gICAgaWYgKGluc3VyYW5jZVR5cGUgPT09ICdub25lJykge1xuICAgICAgdGhpcy5zaG93SW5zdXJhbmNlTW9kYWwoKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN1Ym1pdEJvb2tpbmcoKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2hvd1Rlcm1zTW9kYWwoKTogdm9pZCB7XG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIG1vZGFsLmNsYXNzTmFtZSA9ICdmaXhlZCBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgei01MCdcbiAgICBtb2RhbC5pbm5lckhUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwiYmctd2hpdGUgcm91bmRlZC1sZyBwLTYgbWF4LXctbWQgbXgtNFwiPlxuICAgICAgICA8aDMgY2xhc3M9XCJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi00XCI+XHU3NTI4XHU2MjM3XHU1MzRGXHU4QkFFXHU1NDhDXHU5NjkwXHU3OUMxXHU2NTNGXHU3QjU2PC9oMz5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm1heC1oLTYwIG92ZXJmbG93LXktYXV0byBtYi00IHRleHQtc20gdGV4dC1ncmF5LTYwMFwiPlxuICAgICAgICAgIDxwIGNsYXNzPVwibWItMlwiPlx1NkIyMlx1OEZDRVx1NEY3Rlx1NzUyOFx1NjIxMVx1NEVFQ1x1NzY4NFx1NjcwRFx1NTJBMVx1MzAwMlx1OEJGN1x1NEVENFx1N0VDNlx1OTYwNVx1OEJGQlx1NEVFNVx1NEUwQlx1Njc2MVx1NkIzRVx1RkYxQTwvcD5cbiAgICAgICAgICA8cCBjbGFzcz1cIm1iLTJcIj4xLiBcdTY3MERcdTUyQTFcdTY3NjFcdTZCM0UuLi48L3A+XG4gICAgICAgICAgPHAgY2xhc3M9XCJtYi0yXCI+Mi4gXHU5NjkwXHU3OUMxXHU2NTNGXHU3QjU2Li4uPC9wPlxuICAgICAgICAgIDxwIGNsYXNzPVwibWItMlwiPjMuIFx1OTAwMFx1NjUzOVx1ODlDNFx1NTIxOS4uLjwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IHNwYWNlLXgtM1wiPlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJmbGV4LTEgcHktMyBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWRcIiBkYXRhLWFjdGlvbj1cImRlY2xpbmVcIj5cbiAgICAgICAgICAgIFx1NEUwRFx1NTQwQ1x1NjEwRlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJmbGV4LTEgcHktMyBiZy1vcmFuZ2UtNTAwIHRleHQtd2hpdGUgcm91bmRlZFwiIGRhdGEtYWN0aW9uPVwiYWNjZXB0XCI+XG4gICAgICAgICAgICBcdTU0MENcdTYxMEZcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgXG5cbiAgICBjb25zdCBkZWNsaW5lQnRuID0gbW9kYWwucXVlcnlTZWxlY3RvcignW2RhdGEtYWN0aW9uPVwiZGVjbGluZVwiXScpXG4gICAgY29uc3QgYWNjZXB0QnRuID0gbW9kYWwucXVlcnlTZWxlY3RvcignW2RhdGEtYWN0aW9uPVwiYWNjZXB0XCJdJylcblxuICAgIGRlY2xpbmVCdG4/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChtb2RhbClcbiAgICB9KVxuXG4gICAgYWNjZXB0QnRuPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuYWNjZXB0VGVybXMoKVxuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChtb2RhbClcbiAgICB9KVxuXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtb2RhbClcbiAgfVxuXG4gIHByaXZhdGUgYWNjZXB0VGVybXMoKTogdm9pZCB7XG4gICAgY29uc3QgdmlzdWFsQ2hlY2tib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlzdWFsX2FjY2VwdF90ZXJtcycpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBoaWRkZW5GaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib29raW5nX2FjY2VwdF90ZXJtcycpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBcbiAgICBpZiAodmlzdWFsQ2hlY2tib3gpIHZpc3VhbENoZWNrYm94LmNoZWNrZWQgPSB0cnVlXG4gICAgaWYgKGhpZGRlbkZpZWxkKSBoaWRkZW5GaWVsZC52YWx1ZSA9ICcxJ1xuXG4gICAgLy8gQ2hlY2sgaW5zdXJhbmNlIGFnYWluXG4gICAgY29uc3QgaW5zdXJhbmNlVHlwZUZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jvb2tpbmdfaW5zdXJhbmNlX3R5cGUnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgaW5zdXJhbmNlVHlwZSA9IGluc3VyYW5jZVR5cGVGaWVsZD8udmFsdWUgfHwgJ25vbmUnXG5cbiAgICBpZiAoaW5zdXJhbmNlVHlwZSA9PT0gJ25vbmUnKSB7XG4gICAgICB0aGlzLnNob3dJbnN1cmFuY2VNb2RhbCgpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3VibWl0Qm9va2luZygpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzaG93SW5zdXJhbmNlTW9kYWwoKTogdm9pZCB7XG4gICAgY29uc3QgZXhpc3RpbmdNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnN1cmFuY2VfcmVjb21tZW5kYXRpb25fbW9kYWwnKVxuICAgIGlmIChleGlzdGluZ01vZGFsKSB7XG4gICAgICBleGlzdGluZ01vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgbW9kYWwuaWQgPSAnaW5zdXJhbmNlX3JlY29tbWVuZGF0aW9uX21vZGFsJ1xuICAgIG1vZGFsLmNsYXNzTmFtZSA9ICdmaXhlZCBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgei01MCdcbiAgICBtb2RhbC5pbm5lckhUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwiYmctd2hpdGUgcm91bmRlZC1sZyBwLTYgbWF4LXctbWQgbXgtNFwiPlxuICAgICAgICA8aDMgY2xhc3M9XCJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi00XCI+XHU1RUZBXHU4QkFFXHU4RDJEXHU0RTcwXHU0RkREXHU5NjY5PC9oMz5cbiAgICAgICAgPHAgY2xhc3M9XCJ0ZXh0LWdyYXktNjAwIG1iLTZcIj5cdTRFM0FcdTRFODZcdTYwQThcdTc2ODRcdTUxRkFcdTg4NENcdTVCODlcdTUxNjhcdUZGMENcdTVFRkFcdThCQUVcdThEMkRcdTRFNzBcdTUxRkFcdTg4NENcdTRGRERcdTk2Njk8L3A+XG4gICAgICAgIFxuICAgICAgICA8ZGl2IGNsYXNzPVwic3BhY2UteS0zIG1iLTZcIj5cbiAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcC0zIGJvcmRlciByb3VuZGVkIGN1cnNvci1wb2ludGVyXCI+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9udC1tZWRpdW1cIj5cdTY4MDdcdTUxQzZcdTRGRERcdTk2Njk8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtc20gdGV4dC1ncmF5LTUwMFwiPlx1MDBBNTMwPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIiBuYW1lPVwiaW5zdXJhbmNlX21vZGFsXCIgdmFsdWU9XCJzdGFuZGFyZFwiIGRhdGEtcHJpY2U9XCIzMFwiIGNsYXNzPVwidy01IGgtNVwiIC8+XG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICBcbiAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcC0zIGJvcmRlciByb3VuZGVkIGN1cnNvci1wb2ludGVyXCI+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9udC1tZWRpdW1cIj5cdTlBRDhcdTdFQTdcdTRGRERcdTk2Njk8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtc20gdGV4dC1ncmF5LTUwMFwiPlx1MDBBNTUwPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIiBuYW1lPVwiaW5zdXJhbmNlX21vZGFsXCIgdmFsdWU9XCJwcmVtaXVtXCIgZGF0YS1wcmljZT1cIjUwXCIgY2xhc3M9XCJ3LTUgaC01XCIgLz5cbiAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IHNwYWNlLXgtM1wiPlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJmbGV4LTEgcHktMyBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWRcIiBkYXRhLWFjdGlvbj1cInNraXAtaW5zdXJhbmNlXCI+XG4gICAgICAgICAgICBcdTY1M0VcdTVGMDNcdTRGRERcdTk2NjlcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZmxleC0xIHB5LTMgYmctb3JhbmdlLTUwMCB0ZXh0LXdoaXRlIHJvdW5kZWRcIiBkYXRhLWFjdGlvbj1cInNlbGVjdC1pbnN1cmFuY2VcIj5cbiAgICAgICAgICAgIFx1Nzg2RVx1OEJBNFx1OTAwOVx1NjJFOVxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIGBcblxuICAgIGNvbnN0IHNraXBCdG4gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hY3Rpb249XCJza2lwLWluc3VyYW5jZVwiXScpXG4gICAgY29uc3Qgc2VsZWN0QnRuID0gbW9kYWwucXVlcnlTZWxlY3RvcignW2RhdGEtYWN0aW9uPVwic2VsZWN0LWluc3VyYW5jZVwiXScpXG5cbiAgICBza2lwQnRuPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobW9kYWwpXG4gICAgICB0aGlzLnN1Ym1pdEJvb2tpbmcoKVxuICAgIH0pXG5cbiAgICBzZWxlY3RCdG4/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VsZWN0ZWRSYWRpbyA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJpbnN1cmFuY2VfbW9kYWxcIl06Y2hlY2tlZCcpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICAgIGlmIChzZWxlY3RlZFJhZGlvKSB7XG4gICAgICAgIGNvbnN0IGluc3VyYW5jZVR5cGUgPSBzZWxlY3RlZFJhZGlvLnZhbHVlXG4gICAgICAgIGNvbnN0IGluc3VyYW5jZVByaWNlID0gcGFyc2VGbG9hdChzZWxlY3RlZFJhZGlvLmRhdGFzZXQucHJpY2UgfHwgJzAnKVxuXG4gICAgICAgIGNvbnN0IGluc3VyYW5jZVR5cGVGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib29raW5nX2luc3VyYW5jZV90eXBlJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgICAgICBjb25zdCBpbnN1cmFuY2VQcmljZUZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jvb2tpbmdfaW5zdXJhbmNlX3ByaWNlJykgYXMgSFRNTElucHV0RWxlbWVudFxuXG4gICAgICAgIGlmIChpbnN1cmFuY2VUeXBlRmllbGQpIGluc3VyYW5jZVR5cGVGaWVsZC52YWx1ZSA9IGluc3VyYW5jZVR5cGVcbiAgICAgICAgaWYgKGluc3VyYW5jZVByaWNlRmllbGQpIGluc3VyYW5jZVByaWNlRmllbGQudmFsdWUgPSBpbnN1cmFuY2VQcmljZS50b1N0cmluZygpXG5cbiAgICAgICAgdGhpcy5pbnN1cmFuY2VQcmljZSA9IGluc3VyYW5jZVByaWNlXG4gICAgICAgIHRoaXMudXBkYXRlVG90YWxQcmljZSgpXG4gICAgICB9XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG1vZGFsKVxuICAgICAgdGhpcy5zdWJtaXRCb29raW5nKClcbiAgICB9KVxuXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtb2RhbClcbiAgfVxuXG4gIHByaXZhdGUgc3VibWl0Qm9va2luZygpOiB2b2lkIHtcbiAgICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gICAgY29uc3QgZm9ybSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJykgYXMgSFRNTEZvcm1FbGVtZW50XG4gICAgaWYgKGZvcm0pIHtcbiAgICAgIGZvcm0uc3VibWl0KClcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVRvdGFsUHJpY2UoKTogdm9pZCB7XG4gICAgY29uc3QgdG90YWwgPSB0aGlzLmJhc2VQcmljZSArIHRoaXMuaW5zdXJhbmNlUHJpY2VcbiAgICBpZiAodGhpcy50b3RhbFByaWNlVGFyZ2V0KSB7XG4gICAgICB0aGlzLnRvdGFsUHJpY2VUYXJnZXQudGV4dENvbnRlbnQgPSBgXHUwMEE1JHtNYXRoLnJvdW5kKHRvdGFsKX1gXG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJzdGF0dXNUaXRsZVwiLFxuICAgIFwic3RhdHVzTWVzc2FnZVwiLFxuICAgIFwicHJvZ3Jlc3NQZXJjZW50XCIsXG4gICAgXCJwcm9ncmVzc0NpcmNsZVwiLFxuICAgIFwic2VhdEljb25cIixcbiAgICBcInNlYXREaXNwbGF5XCIsXG4gICAgXCJzZWF0QmFkZ2VcIixcbiAgICBcInBheW1lbnRCYXJcIixcbiAgICBcImNhbmNlbEJhclwiXG4gIF1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHN0YXR1c1RpdGxlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHN0YXR1c01lc3NhZ2VUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgcHJvZ3Jlc3NQZXJjZW50VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHByb2dyZXNzQ2lyY2xlVGFyZ2V0OiBTVkdDaXJjbGVFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VhdEljb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VhdERpc3BsYXlUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VhdEJhZGdlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHBheW1lbnRCYXJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY2FuY2VsQmFyVGFyZ2V0OiBIVE1MRWxlbWVudFxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzU3RhdHVzVGl0bGVUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNTdGF0dXNNZXNzYWdlVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUHJvZ3Jlc3NQZXJjZW50VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUHJvZ3Jlc3NDaXJjbGVUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNTZWF0SWNvblRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1NlYXREaXNwbGF5VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzU2VhdEJhZGdlVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUGF5bWVudEJhclRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0NhbmNlbEJhclRhcmdldDogYm9vbGVhblxuXG4gIHByaXZhdGUgbG9ja2luZ0ludGVydmFsOiBudW1iZXIgfCBudWxsID0gbnVsbFxuICBwcml2YXRlIGN1cnJlbnRQcm9ncmVzczogbnVtYmVyID0gMFxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgLy8gU3RhcnQgdGhlIGxvY2tpbmcgYW5pbWF0aW9uXG4gICAgdGhpcy5zdGFydExvY2tpbmdBbmltYXRpb24oKVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5sb2NraW5nSW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5sb2NraW5nSW50ZXJ2YWwpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzdGFydExvY2tpbmdBbmltYXRpb24oKTogdm9pZCB7XG4gICAgY29uc3QgdG90YWxEdXJhdGlvbiA9IDUwMDAgLy8gNSBzZWNvbmRzXG4gICAgY29uc3QgdXBkYXRlSW50ZXJ2YWwgPSA1MCAvLyBVcGRhdGUgZXZlcnkgNTBtc1xuICAgIGNvbnN0IHRvdGFsU3RlcHMgPSB0b3RhbER1cmF0aW9uIC8gdXBkYXRlSW50ZXJ2YWxcbiAgICBjb25zdCBwcm9ncmVzc1N0ZXAgPSAxMDAgLyB0b3RhbFN0ZXBzXG5cbiAgICB0aGlzLmxvY2tpbmdJbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLmN1cnJlbnRQcm9ncmVzcyArPSBwcm9ncmVzc1N0ZXBcblxuICAgICAgaWYgKHRoaXMuY3VycmVudFByb2dyZXNzID49IDEwMCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRQcm9ncmVzcyA9IDEwMFxuICAgICAgICB0aGlzLmNvbXBsZXRlTG9ja2luZygpXG4gICAgICAgIGlmICh0aGlzLmxvY2tpbmdJbnRlcnZhbCkge1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5sb2NraW5nSW50ZXJ2YWwpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy51cGRhdGVQcm9ncmVzcyh0aGlzLmN1cnJlbnRQcm9ncmVzcylcbiAgICB9LCB1cGRhdGVJbnRlcnZhbClcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlUHJvZ3Jlc3MocHJvZ3Jlc3M6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIFVwZGF0ZSBwZXJjZW50YWdlIHRleHRcbiAgICBpZiAodGhpcy5oYXNQcm9ncmVzc1BlcmNlbnRUYXJnZXQpIHtcbiAgICAgIHRoaXMucHJvZ3Jlc3NQZXJjZW50VGFyZ2V0LnRleHRDb250ZW50ID0gTWF0aC5mbG9vcihwcm9ncmVzcykudG9TdHJpbmcoKVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBjaXJjdWxhciBwcm9ncmVzc1xuICAgIGlmICh0aGlzLmhhc1Byb2dyZXNzQ2lyY2xlVGFyZ2V0KSB7XG4gICAgICBjb25zdCBjaXJjdW1mZXJlbmNlID0gNTM0IC8vIDIgKiBQSSAqIDg1XG4gICAgICBjb25zdCBvZmZzZXQgPSBjaXJjdW1mZXJlbmNlIC0gKHByb2dyZXNzIC8gMTAwKSAqIGNpcmN1bWZlcmVuY2VcbiAgICAgIHRoaXMucHJvZ3Jlc3NDaXJjbGVUYXJnZXQuc3R5bGUuc3Ryb2tlRGFzaG9mZnNldCA9IG9mZnNldC50b1N0cmluZygpXG4gICAgfVxuXG4gICAgLy8gQW5pbWF0ZSBzZWF0IGljb25cbiAgICBpZiAodGhpcy5oYXNTZWF0SWNvblRhcmdldCkge1xuICAgICAgLy8gUHVsc2UgYW5pbWF0aW9uIGF0IGNlcnRhaW4gcHJvZ3Jlc3MgcG9pbnRzXG4gICAgICBpZiAocHJvZ3Jlc3MgJSAyMCA8IDIpIHtcbiAgICAgICAgdGhpcy5zZWF0SWNvblRhcmdldC5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGUoMS4yKSdcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMuaGFzU2VhdEljb25UYXJnZXQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VhdEljb25UYXJnZXQuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDEpJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgMjAwKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY29tcGxldGVMb2NraW5nKCk6IHZvaWQge1xuICAgIC8vIFVwZGF0ZSBzdGF0dXMgdGl0bGVcbiAgICBpZiAodGhpcy5oYXNTdGF0dXNUaXRsZVRhcmdldCkge1xuICAgICAgdGhpcy5zdGF0dXNUaXRsZVRhcmdldC50ZXh0Q29udGVudCA9ICdcdTUzNjBcdTVFQTdcdTYyMTBcdTUyOUYnXG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHN0YXR1cyBtZXNzYWdlIHdpdGggY291bnRkb3duXG4gICAgaWYgKHRoaXMuaGFzU3RhdHVzTWVzc2FnZVRhcmdldCkge1xuICAgICAgY29uc3QgZXhwaXJ5VGltZSA9IG5ldyBEYXRlKClcbiAgICAgIGV4cGlyeVRpbWUuc2V0TWludXRlcyhleHBpcnlUaW1lLmdldE1pbnV0ZXMoKSArIDE1KVxuICAgICAgY29uc3QgaG91cnMgPSBleHBpcnlUaW1lLmdldEhvdXJzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpXG4gICAgICBjb25zdCBtaW51dGVzID0gZXhwaXJ5VGltZS5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpXG4gICAgICBjb25zdCB0aW1lU3RyaW5nID0gYCR7aG91cnN9OiR7bWludXRlc31gXG4gICAgICB0aGlzLnN0YXR1c01lc3NhZ2VUYXJnZXQuaW5uZXJIVE1MID0gYFx1OEJGN1x1NTcyODxzcGFuIGNsYXNzPVwidGV4dC1yZWQtNjAwXCI+JHt0aW1lU3RyaW5nfTwvc3Bhbj5cdTUxODVcdTVCOENcdTYyMTBcdTY1MkZcdTRFRDhcdUZGMENcdThEODVcdTY1RjZcdThCQTJcdTUzNTVcdTVDMDZcdTUxNzNcdTk1RURgXG4gICAgfVxuXG4gICAgLy8gU2hvdyBzZWF0IGluZm9ybWF0aW9uXG4gICAgaWYgKHRoaXMuaGFzU2VhdERpc3BsYXlUYXJnZXQpIHtcbiAgICAgIHRoaXMuc2VhdERpc3BsYXlUYXJnZXQuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaGFzU2VhdEJhZGdlVGFyZ2V0KSB7XG4gICAgICB0aGlzLnNlYXRCYWRnZVRhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jaydcbiAgICB9XG5cbiAgICAvLyBDaGFuZ2Ugc2VhdCBpY29uIHRvIGluZGljYXRlIHN1Y2Nlc3NcbiAgICBpZiAodGhpcy5oYXNTZWF0SWNvblRhcmdldCkge1xuICAgICAgdGhpcy5zZWF0SWNvblRhcmdldC50ZXh0Q29udGVudCA9ICdcdUQ4M0VcdURFOTEnXG4gICAgICB0aGlzLnNlYXRJY29uVGFyZ2V0LnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZSgxLjMpJ1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmhhc1NlYXRJY29uVGFyZ2V0KSB7XG4gICAgICAgICAgdGhpcy5zZWF0SWNvblRhcmdldC5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGUoMSknXG4gICAgICAgIH1cbiAgICAgIH0sIDMwMClcbiAgICB9XG5cbiAgICAvLyBIaWRlIGNhbmNlbCBidXR0b24sIHNob3cgcGF5bWVudCBidXR0b25cbiAgICBpZiAodGhpcy5oYXNDYW5jZWxCYXJUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2FuY2VsQmFyVGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICB9XG5cbiAgICBpZiAodGhpcy5oYXNQYXltZW50QmFyVGFyZ2V0KSB7XG4gICAgICB0aGlzLnBheW1lbnRCYXJUYXJnZXQuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcInNlYXRUYWJcIiwgXCJvcHRpb25zQ29udGFpbmVyXCJdXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgdHJhaW5JZDogU3RyaW5nLFxuICAgIHNlbGVjdGVkU2VhdFR5cGU6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiBcInNlY29uZF9jbGFzc1wiIH1cbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VhdFRhYlRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBvcHRpb25zQ29udGFpbmVyVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHRyYWluSWRWYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgc2VsZWN0ZWRTZWF0VHlwZVZhbHVlOiBzdHJpbmdcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiVHJhaW5TZWF0U2VsZWN0b3IgY29ubmVjdGVkXCIpXG4gICAgLy8gXHU5RUQ4XHU4QkE0XHU5MDA5XHU0RTJEXHU3QjJDXHU0RTAwXHU0RTJBXHU1RUE3XHU0RjREXHU3QzdCXHU1NzhCXG4gICAgaWYgKHRoaXMuc2VhdFRhYlRhcmdldHMubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5zZWxlY3RTZWF0KHRoaXMuc2VhdFRhYlRhcmdldHNbMF0pXG4gICAgfVxuICB9XG5cbiAgLy8gXHU5MDA5XHU2MkU5XHU1RUE3XHU0RjREXHU3QzdCXHU1NzhCXG4gIHNlbGVjdFNlYXQoZXZlbnQ6IEV2ZW50IHwgSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudCBpbnN0YW5jZW9mIEV2ZW50ID8gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudCA6IGV2ZW50XG4gICAgY29uc3Qgc2VhdFR5cGUgPSB0YXJnZXQuZGF0YXNldC5zZWF0VHlwZVxuICAgIGNvbnN0IHNlYXRQcmljZSA9IHBhcnNlRmxvYXQodGFyZ2V0LmRhdGFzZXQuc2VhdFByaWNlIHx8ICcwJylcbiAgICBcbiAgICBpZiAoIXNlYXRUeXBlKSByZXR1cm5cblxuICAgIC8vIFx1NjZGNFx1NjVCMFx1OTAwOVx1NEUyRFx1NzJCNlx1NjAwMVxuICAgIHRoaXMuc2VhdFRhYlRhcmdldHMuZm9yRWFjaCh0YWIgPT4ge1xuICAgICAgdGFiLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLXdoaXRlJywgJ3NoYWRvdycpXG4gICAgfSlcbiAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnYmctd2hpdGUnLCAnc2hhZG93JylcblxuICAgIC8vIFx1NjYzRVx1NzkzQS9cdTk2OTBcdTg1Q0ZcdTVDMEZcdTRFMDlcdTg5RDJcdTVGNjJcbiAgICB0aGlzLnNlYXRUYWJUYXJnZXRzLmZvckVhY2godGFiID0+IHtcbiAgICAgIGNvbnN0IGFycm93ID0gdGFiLnF1ZXJ5U2VsZWN0b3IoJy5zZWF0LWFycm93JylcbiAgICAgIGlmIChhcnJvdykge1xuICAgICAgICBpZiAodGFiID09PSB0YXJnZXQpIHtcbiAgICAgICAgICBhcnJvdy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFycm93LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gXHU2NkY0XHU2NUIwXHU1RjUzXHU1MjREXHU5MDA5XHU0RTJEXHU3Njg0XHU1RUE3XHU0RjREXHU3QzdCXHU1NzhCXG4gICAgdGhpcy5zZWxlY3RlZFNlYXRUeXBlVmFsdWUgPSBzZWF0VHlwZVxuXG4gICAgLy8gXHU2NkY0XHU2NUIwXHU4QkEyXHU3OTY4XHU5MDA5XHU5ODc5XHU0RTJEXHU3Njg0XHU0RUY3XHU2ODNDXHU1NDhDXHU5NEZFXHU2M0E1XG4gICAgdGhpcy51cGRhdGVCb29raW5nT3B0aW9ucyhzZWF0UHJpY2UpXG4gIH1cblxuICAvLyBcdTY2RjRcdTY1QjBcdTYyNDBcdTY3MDlcdThCQTJcdTc5NjhcdTkwMDlcdTk4NzlcdTc2ODRcdTRFRjdcdTY4M0NcdTU0OENcdTk0RkVcdTYzQTVcbiAgdXBkYXRlQm9va2luZ09wdGlvbnMoYmFzZVByaWNlOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBcdTY2RjRcdTY1QjBcdTk0RkVcdTYzQTVcdTc2ODRzZWF0X3R5cGVcdTUzQzJcdTY1NzBcbiAgICBjb25zdCBsaW5rcyA9IHRoaXMub3B0aW9uc0NvbnRhaW5lclRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKCdhW2hyZWYqPVwidHJhaW5fYm9va2luZ3MvbmV3XCJdJylcbiAgICBsaW5rcy5mb3JFYWNoKChsaW5rOiBFbGVtZW50KSA9PiB7XG4gICAgICBpZiAobGluayBpbnN0YW5jZW9mIEhUTUxBbmNob3JFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwobGluay5ocmVmLCB3aW5kb3cubG9jYXRpb24ub3JpZ2luKVxuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnc2VhdF90eXBlJywgdGhpcy5zZWxlY3RlZFNlYXRUeXBlVmFsdWUpXG4gICAgICAgIGxpbmsuaHJlZiA9IHVybC50b1N0cmluZygpXG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIFx1NjZGNFx1NjVCMFx1NEVGN1x1NjgzQ1x1NjYzRVx1NzkzQVxuICAgIGNvbnN0IHByaWNlRWxlbWVudHMgPSB0aGlzLm9wdGlvbnNDb250YWluZXJUYXJnZXQucXVlcnlTZWxlY3RvckFsbCgnLmJvb2tpbmctb3B0aW9uLXByaWNlJylcbiAgICBwcmljZUVsZW1lbnRzLmZvckVhY2goKHByaWNlRWw6IEVsZW1lbnQpID0+IHtcbiAgICAgIGlmIChwcmljZUVsIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgZXh0cmFGZWUgPSBwYXJzZUZsb2F0KHByaWNlRWwuZGF0YXNldC5leHRyYUZlZSB8fCAnMCcpXG4gICAgICAgIGNvbnN0IHRvdGFsUHJpY2UgPSBNYXRoLmZsb29yKGJhc2VQcmljZSArIGV4dHJhRmVlKVxuICAgICAgICBwcmljZUVsLnRleHRDb250ZW50ID0gdG90YWxQcmljZS50b1N0cmluZygpXG4gICAgICB9XG4gICAgfSlcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwiZGVzdGluYXRpb25JbnB1dFwiLFxuICAgIFwiZHVyYXRpb25JbnB1dFwiLFxuICAgIFwiZ3JvdXBTaXplSW5wdXRcIixcbiAgICBcImRlc3RpbmF0aW9uQnV0dG9uXCIsXG4gICAgXCJkdXJhdGlvbkJ1dHRvblwiLFxuICAgIFwiZ3JvdXBTaXplQnV0dG9uXCIsXG4gICAgXCJkZXBhcnR1cmVEaXNwbGF5XCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgZGVzdGluYXRpb246IFN0cmluZyxcbiAgICBkdXJhdGlvbjogU3RyaW5nLFxuICAgIGdyb3VwU2l6ZTogU3RyaW5nXG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IGRlc3RpbmF0aW9uSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkdXJhdGlvbklucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZ3JvdXBTaXplSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkZXN0aW5hdGlvbkJ1dHRvblRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBkdXJhdGlvbkJ1dHRvblRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBncm91cFNpemVCdXR0b25UYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVwYXJ0dXJlRGlzcGxheVRhcmdldDogSFRNTEVsZW1lbnRcbiAgXG4gIGRlY2xhcmUgZGVzdGluYXRpb25WYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgZHVyYXRpb25WYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgZ3JvdXBTaXplVmFsdWU6IHN0cmluZ1xuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgLy8gTGlzdGVuIGZvciBjaXR5IHNlbGVjdGlvbiBjaGFuZ2VzIGZyb20gY2l0eS1zZWxlY3RvclxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjaXR5LXNlbGVjdG9yOmNpdHktY2hhbmdlZCcsIHRoaXMuaGFuZGxlQ2l0eUNoYW5nZWQuYmluZCh0aGlzKSlcbiAgICBcbiAgICAvLyBBdXRvLXNlbGVjdCBncm91cCBzaXplIGlmIHByb3ZpZGVkIHZpYSBVUkwgcGFyYW1ldGVyXG4gICAgaWYgKHRoaXMuZ3JvdXBTaXplVmFsdWUpIHtcbiAgICAgIHRoaXMuYXV0b1NlbGVjdEdyb3VwU2l6ZSh0aGlzLmdyb3VwU2l6ZVZhbHVlKVxuICAgIH1cbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NpdHktc2VsZWN0b3I6Y2l0eS1jaGFuZ2VkJywgdGhpcy5oYW5kbGVDaXR5Q2hhbmdlZC5iaW5kKHRoaXMpKVxuICB9XG5cbiAgLy8gSGFuZGxlIGNpdHkgY2hhbmdlIGZyb20gY2l0eS1zZWxlY3RvciBtb2RhbFxuICBwcml2YXRlIGhhbmRsZUNpdHlDaGFuZ2VkKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnRcbiAgICBjb25zdCB7IGNpdHlOYW1lIH0gPSBjdXN0b21FdmVudC5kZXRhaWxcbiAgICBjb25zb2xlLmxvZygnVG91ckdyb3VwRmlsdGVyOiBDaXR5IGNoYW5nZWQgdG8nLCBjaXR5TmFtZSlcbiAgICBcbiAgICAvLyBVcGRhdGUgZGVzdGluYXRpb24gdmFsdWVcbiAgICB0aGlzLmRlc3RpbmF0aW9uVmFsdWUgPSBjaXR5TmFtZVxuICAgIHRoaXMuZGVzdGluYXRpb25JbnB1dFRhcmdldC52YWx1ZSA9IGNpdHlOYW1lXG4gICAgXG4gICAgLy8gVXBkYXRlIGhvdCBkZXN0aW5hdGlvbiBidXR0b25zIC0gb25seSBoaWdobGlnaHQgaWYgY2l0eSBpcyBpbiB0aGUgbGlzdFxuICAgIHRoaXMudXBkYXRlSG90RGVzdGluYXRpb25CdXR0b25zKGNpdHlOYW1lKVxuICB9XG5cbiAgLy8gVXBkYXRlIGhvdCBkZXN0aW5hdGlvbiBidXR0b25zIGJhc2VkIG9uIHNlbGVjdGVkIGNpdHlcbiAgcHJpdmF0ZSB1cGRhdGVIb3REZXN0aW5hdGlvbkJ1dHRvbnMoY2l0eU5hbWU6IHN0cmluZyk6IHZvaWQge1xuICAgIGxldCBjaXR5SW5Ib3RMaXN0ID0gZmFsc2VcbiAgICBcbiAgICB0aGlzLmRlc3RpbmF0aW9uQnV0dG9uVGFyZ2V0cy5mb3JFYWNoKGJ0biA9PiB7XG4gICAgICBpZiAoYnRuLmRhdGFzZXQuZGVzdGluYXRpb24gPT09IGNpdHlOYW1lKSB7XG4gICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1ncmF5LTUwJylcbiAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ2JnLVsjRkZFOENDXScpXG4gICAgICAgIGNpdHlJbkhvdExpc3QgPSB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBidG4uY2xhc3NMaXN0LmFkZCgnYmctZ3JheS01MCcpXG4gICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1bI0ZGRThDQ10nKVxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgY29uc29sZS5sb2coYENpdHkgXCIke2NpdHlOYW1lfVwiICR7Y2l0eUluSG90TGlzdCA/ICdpcycgOiAnaXMgbm90J30gaW4gaG90IGRlc3RpbmF0aW9uIGxpc3RgKVxuICB9XG5cbiAgLy8gXHU5MDA5XHU2MkU5XHU3NkVFXHU3Njg0XHU1NzMwXG4gIHNlbGVjdERlc3RpbmF0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBkZXN0aW5hdGlvbiA9IGJ1dHRvbi5kYXRhc2V0LmRlc3RpbmF0aW9uIHx8ICcnXG4gICAgXG4gICAgdGhpcy5kZXN0aW5hdGlvblZhbHVlID0gZGVzdGluYXRpb25cbiAgICB0aGlzLmRlc3RpbmF0aW9uSW5wdXRUYXJnZXQudmFsdWUgPSBkZXN0aW5hdGlvblxuICAgIFxuICAgIC8vIFVwZGF0ZSBcIlx1NjIxMVx1NjBGM1x1NTNCQlwiIGRpc3BsYXkgdGV4dFxuICAgIHRoaXMuZGVwYXJ0dXJlRGlzcGxheVRhcmdldC50ZXh0Q29udGVudCA9IGRlc3RpbmF0aW9uXG4gICAgXG4gICAgLy8gXHU2NkY0XHU2NUIwXHU2MzA5XHU5NEFFXHU2ODM3XHU1RjBGXG4gICAgdGhpcy51cGRhdGVIb3REZXN0aW5hdGlvbkJ1dHRvbnMoZGVzdGluYXRpb24pXG4gIH1cblxuICAvLyBcdTkwMDlcdTYyRTlcdTU5MjlcdTY1NzBcbiAgc2VsZWN0RHVyYXRpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGR1cmF0aW9uID0gYnV0dG9uLmRhdGFzZXQuZHVyYXRpb24gfHwgJydcbiAgICBcbiAgICB0aGlzLmR1cmF0aW9uVmFsdWUgPSBkdXJhdGlvblxuICAgIHRoaXMuZHVyYXRpb25JbnB1dFRhcmdldC52YWx1ZSA9IGR1cmF0aW9uXG4gICAgXG4gICAgLy8gXHU2NkY0XHU2NUIwXHU2MzA5XHU5NEFFXHU2ODM3XHU1RjBGXG4gICAgdGhpcy5kdXJhdGlvbkJ1dHRvblRhcmdldHMuZm9yRWFjaChidG4gPT4ge1xuICAgICAgaWYgKGJ0bi5kYXRhc2V0LmR1cmF0aW9uID09PSBkdXJhdGlvbikge1xuICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYmctZ3JheS01MCcpXG4gICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdiZy1bI0ZGRThDQ10nKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ2JnLWdyYXktNTAnKVxuICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYmctWyNGRkU4Q0NdJylcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgLy8gXHU5MDA5XHU2MkU5XHU1NkUyXHU5NjFGXHU1OTI3XHU1QzBGXG4gIHNlbGVjdEdyb3VwU2l6ZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgZ3JvdXBTaXplID0gYnV0dG9uLmRhdGFzZXQuZ3JvdXBTaXplIHx8ICcnXG4gICAgXG4gICAgdGhpcy5ncm91cFNpemVWYWx1ZSA9IGdyb3VwU2l6ZVxuICAgIHRoaXMuZ3JvdXBTaXplSW5wdXRUYXJnZXQudmFsdWUgPSBncm91cFNpemVcbiAgICBcbiAgICAvLyBcdTY2RjRcdTY1QjBcdTUzNTVcdTkwMDlcdTYzMDlcdTk0QUVcdTY4MzdcdTVGMEZcbiAgICB0aGlzLnVwZGF0ZUdyb3VwU2l6ZUJ1dHRvbnMoZ3JvdXBTaXplKVxuICB9XG4gIFxuICAvLyBBdXRvLXNlbGVjdCBncm91cCBzaXplIG9uIHBhZ2UgbG9hZFxuICBwcml2YXRlIGF1dG9TZWxlY3RHcm91cFNpemUoZ3JvdXBTaXplOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyBTZXQgdGhlIGhpZGRlbiBpbnB1dCB2YWx1ZVxuICAgIGlmICh0aGlzLmdyb3VwU2l6ZUlucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLmdyb3VwU2l6ZUlucHV0VGFyZ2V0LnZhbHVlID0gZ3JvdXBTaXplXG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSBidXR0b24gc3R5bGVzXG4gICAgdGhpcy51cGRhdGVHcm91cFNpemVCdXR0b25zKGdyb3VwU2l6ZSlcbiAgfVxuICBcbiAgLy8gVXBkYXRlIGdyb3VwIHNpemUgYnV0dG9uIHN0eWxlc1xuICBwcml2YXRlIHVwZGF0ZUdyb3VwU2l6ZUJ1dHRvbnMoZ3JvdXBTaXplOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLmdyb3VwU2l6ZUJ1dHRvblRhcmdldHMuZm9yRWFjaChidG4gPT4ge1xuICAgICAgY29uc3QgcmFkaW8gPSBidG4ucXVlcnlTZWxlY3RvcignLnJhZGlvLWNpcmNsZScpIGFzIEhUTUxFbGVtZW50XG4gICAgICBpZiAoYnRuLmRhdGFzZXQuZ3JvdXBTaXplID09PSBncm91cFNpemUpIHtcbiAgICAgICAgcmFkaW8/LmNsYXNzTGlzdC5hZGQoJ2JnLVsjRkZENzAwXScpXG4gICAgICAgIHJhZGlvPy5jbGFzc0xpc3QucmVtb3ZlKCdiZy10cmFuc3BhcmVudCcpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByYWRpbz8uY2xhc3NMaXN0LmFkZCgnYmctdHJhbnNwYXJlbnQnKVxuICAgICAgICByYWRpbz8uY2xhc3NMaXN0LnJlbW92ZSgnYmctWyNGRkQ3MDBdJylcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXIge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcImRvbWVzdGljQnV0dG9uXCIsIFwiaW50ZXJuYXRpb25hbEJ1dHRvblwiLCBcInN3YXBUb2dnbGVcIiwgXCJzd2FwSW5kaWNhdG9yXCJdXG5cbiAgZGVjbGFyZSByZWFkb25seSBkb21lc3RpY0J1dHRvblRhcmdldDogSFRNTEJ1dHRvbkVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBpbnRlcm5hdGlvbmFsQnV0dG9uVGFyZ2V0OiBIVE1MQnV0dG9uRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHN3YXBUb2dnbGVUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc3dhcEluZGljYXRvclRhcmdldDogSFRNTEVsZW1lbnRcblxuICBwcml2YXRlIGlzRG9tZXN0aWM6IGJvb2xlYW4gPSB0cnVlXG4gIHByaXZhdGUgaXNTd2FwRW5hYmxlZDogYm9vbGVhbiA9IGZhbHNlXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICB0aGlzLnVwZGF0ZURvbWVzdGljVmlldygpXG4gIH1cblxuICBzZWxlY3REb21lc3RpYygpOiB2b2lkIHtcbiAgICB0aGlzLmlzRG9tZXN0aWMgPSB0cnVlXG4gICAgdGhpcy51cGRhdGVEb21lc3RpY1ZpZXcoKVxuICB9XG5cbiAgc2VsZWN0SW50ZXJuYXRpb25hbCgpOiB2b2lkIHtcbiAgICB0aGlzLmlzRG9tZXN0aWMgPSBmYWxzZVxuICAgIHRoaXMudXBkYXRlSW50ZXJuYXRpb25hbFZpZXcoKVxuICB9XG5cbiAgdG9nZ2xlU3dhcCgpOiB2b2lkIHtcbiAgICB0aGlzLmlzU3dhcEVuYWJsZWQgPSAhdGhpcy5pc1N3YXBFbmFibGVkXG4gICAgdGhpcy51cGRhdGVTd2FwVG9nZ2xlKClcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlRG9tZXN0aWNWaWV3KCk6IHZvaWQge1xuICAgIHRoaXMuZG9tZXN0aWNCdXR0b25UYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLXdoaXRlXCIsIFwic2hhZG93LXNtXCIsIFwiZm9udC1ib2xkXCIpXG4gICAgdGhpcy5kb21lc3RpY0J1dHRvblRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwidGV4dC1ncmF5LTUwMFwiKVxuICAgIFxuICAgIHRoaXMuaW50ZXJuYXRpb25hbEJ1dHRvblRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctd2hpdGVcIiwgXCJzaGFkb3ctc21cIiwgXCJmb250LWJvbGRcIilcbiAgICB0aGlzLmludGVybmF0aW9uYWxCdXR0b25UYXJnZXQuY2xhc3NMaXN0LmFkZChcInRleHQtZ3JheS01MDBcIilcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlSW50ZXJuYXRpb25hbFZpZXcoKTogdm9pZCB7XG4gICAgdGhpcy5pbnRlcm5hdGlvbmFsQnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy13aGl0ZVwiLCBcInNoYWRvdy1zbVwiLCBcImZvbnQtYm9sZFwiKVxuICAgIHRoaXMuaW50ZXJuYXRpb25hbEJ1dHRvblRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwidGV4dC1ncmF5LTUwMFwiKVxuICAgIFxuICAgIHRoaXMuZG9tZXN0aWNCdXR0b25UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLXdoaXRlXCIsIFwic2hhZG93LXNtXCIsIFwiZm9udC1ib2xkXCIpXG4gICAgdGhpcy5kb21lc3RpY0J1dHRvblRhcmdldC5jbGFzc0xpc3QuYWRkKFwidGV4dC1ncmF5LTUwMFwiKVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVTd2FwVG9nZ2xlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmlzU3dhcEVuYWJsZWQpIHtcbiAgICAgIHRoaXMuc3dhcEluZGljYXRvclRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwibGVmdC0xXCIpXG4gICAgICB0aGlzLnN3YXBJbmRpY2F0b3JUYXJnZXQuY2xhc3NMaXN0LmFkZChcImxlZnQtNVwiKVxuICAgICAgdGhpcy5zd2FwVG9nZ2xlVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1ncmF5LTIwMFwiKVxuICAgICAgdGhpcy5zd2FwVG9nZ2xlVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy1ibHVlLTUwMFwiKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN3YXBJbmRpY2F0b3JUYXJnZXQuY2xhc3NMaXN0LmFkZChcImxlZnQtMVwiKVxuICAgICAgdGhpcy5zd2FwSW5kaWNhdG9yVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJsZWZ0LTVcIilcbiAgICAgIHRoaXMuc3dhcFRvZ2dsZVRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctZ3JheS0yMDBcIilcbiAgICAgIHRoaXMuc3dhcFRvZ2dsZVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctYmx1ZS01MDBcIilcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICAvLyBBZGQgeW91ciB0YXJnZXRzIGhlcmUsIGUuZy46XG4gICAgLy8gXCJtZXNzYWdlSW5wdXRcIiwgXCJtZXNzYWdlc0NvbnRhaW5lclwiLCBcInNlbmRCdXR0b25cIlxuICBdXG5cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICAvLyBBZGQgeW91ciB2YWx1ZXMgaGVyZSwgZS5nLjpcbiAgICAvLyByb29tSWQ6IFN0cmluZyxcbiAgICAvLyB1c2VySWQ6IFN0cmluZ1xuICB9XG5cbiAgLy8gRGVjbGFyZSB5b3VyIHRhcmdldHMgYW5kIHZhbHVlc1xuICAvLyBkZWNsYXJlIHJlYWRvbmx5IG1lc3NhZ2VJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICAvLyBkZWNsYXJlIHJlYWRvbmx5IG1lc3NhZ2VzQ29udGFpbmVyVGFyZ2V0OiBIVE1MRWxlbWVudFxuICAvLyBkZWNsYXJlIHJlYWRvbmx5IHJvb21JZFZhbHVlOiBzdHJpbmdcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiSG90ZWxQYWNrYWdlU2VhcmNoIGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkhvdGVsUGFja2FnZVNlYXJjaCBkaXNjb25uZWN0ZWRcIilcbiAgfVxuXG4gIC8vIEFkZCB5b3VyIGFjdGlvbiBtZXRob2RzIGhlcmVcbiAgLy8gRXhhbXBsZTpcbiAgLy8gY2xpY2soKTogdm9pZCB7XG4gIC8vICAgY29uc29sZS5sb2coXCJCdXR0b24gY2xpY2tlZFwiKVxuICAvLyB9XG5cbiAgLy8gRk9STVM6IFR1cmJvICsgVHVyYm8gU3RyZWFtcyBoYW5kbGUgZXZlcnl0aGluZyBhdXRvbWF0aWNhbGx5XG4gIC8vIC0gRm9ybXMgc3VibWl0IHZpYSBBSkFYIChUdXJibyBEcml2ZSlcbiAgLy8gLSBTZXJ2ZXIgcmVzcG9uZHMgd2l0aCBmb3JtYXQudHVyYm9fc3RyZWFtXG4gIC8vIC0gVHVyYm8gU3RyZWFtcyB1cGRhdGUgRE9NIGF1dG9tYXRpY2FsbHlcbiAgLy8gLSBOTyBtYW51YWwgZm9ybSBoYW5kbGluZyBuZWVkZWQgaW4gU3RpbXVsdXNcbiAgLy9cbiAgLy8gVXNlIFN0aW11bHVzIGZvcjpcbiAgLy8gLSBVSSBpbnRlcmFjdGlvbnMgKHRvZ2dsZSwgc2hvdy9oaWRlKVxuICAvLyAtIElucHV0IHZhbGlkYXRpb24vZm9ybWF0dGluZ1xuICAvLyAtIER5bmFtaWMgZm9ybSBmaWVsZHNcbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcInF1YW50aXR5SW5wdXRcIixcbiAgICBcInRvdGFsUHJpY2VcIixcbiAgICBcImJvdHRvbVByaWNlXCIsXG4gICAgXCJkZWNyZWFzZUJ0blwiLFxuICAgIFwiaW5jcmVhc2VCdG5cIixcbiAgICBcInN0b2NrdXBUYWJcIixcbiAgICBcImluc3RhbnRUYWJcIixcbiAgICBcImJvb2tpbmdUeXBlSW5wdXRcIixcbiAgICBcImNvbnRhY3ROYW1lSW5wdXRcIixcbiAgICBcImNvbnRhY3RQaG9uZUlucHV0XCIsXG4gICAgXCJjb25maXJtTW9kYWxcIixcbiAgICBcImNvbmZpcm1RdWFudGl0eVwiLFxuICAgIFwiY29uZmlybUNvbnRhY3RcIixcbiAgICBcImNvbmZpcm1Cb29raW5nVHlwZVwiLFxuICAgIFwiY29uZmlybVRvdGFsUHJpY2VcIlxuICBdXG5cbiAgZGVjbGFyZSByZWFkb25seSBxdWFudGl0eUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdG90YWxQcmljZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBib3R0b21QcmljZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkZWNyZWFzZUJ0blRhcmdldDogSFRNTEJ1dHRvbkVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBpbmNyZWFzZUJ0blRhcmdldDogSFRNTEJ1dHRvbkVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzdG9ja3VwVGFiVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGluc3RhbnRUYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgYm9va2luZ1R5cGVJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNvbnRhY3ROYW1lSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjb250YWN0UGhvbmVJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNvbmZpcm1Nb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjb25maXJtUXVhbnRpdHlUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY29uZmlybUNvbnRhY3RUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY29uZmlybUJvb2tpbmdUeXBlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNvbmZpcm1Ub3RhbFByaWNlVGFyZ2V0OiBIVE1MRWxlbWVudFxuXG4gIHByaXZhdGUgcGVuZGluZ0Zvcm1EYXRhOiBGb3JtRGF0YSB8IG51bGwgPSBudWxsXG4gIHByaXZhdGUgYWxsb3dTdWJtaXNzaW9uOiBib29sZWFuID0gZmFsc2VcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiSG90ZWxQYWNrYWdlT3JkZXIgY29ubmVjdGVkXCIpXG4gICAgdGhpcy51cGRhdGVCdXR0b25TdGF0ZXMoKVxuICB9XG5cbiAgaW5jcmVhc2VRdWFudGl0eShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgY3VycmVudFF1YW50aXR5ID0gcGFyc2VJbnQodGhpcy5xdWFudGl0eUlucHV0VGFyZ2V0LnZhbHVlKSB8fCAxXG4gICAgY29uc3QgbmV3UXVhbnRpdHkgPSBjdXJyZW50UXVhbnRpdHkgKyAxXG4gICAgXG4gICAgaWYgKG5ld1F1YW50aXR5IDw9IDk5KSB7XG4gICAgICB0aGlzLnF1YW50aXR5SW5wdXRUYXJnZXQudmFsdWUgPSBuZXdRdWFudGl0eS50b1N0cmluZygpXG4gICAgICB0aGlzLnVwZGF0ZVByaWNlKClcbiAgICAgIHRoaXMudXBkYXRlQnV0dG9uU3RhdGVzKClcbiAgICB9XG4gIH1cblxuICBkZWNyZWFzZVF1YW50aXR5KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBjdXJyZW50UXVhbnRpdHkgPSBwYXJzZUludCh0aGlzLnF1YW50aXR5SW5wdXRUYXJnZXQudmFsdWUpIHx8IDFcbiAgICBjb25zdCBuZXdRdWFudGl0eSA9IGN1cnJlbnRRdWFudGl0eSAtIDFcbiAgICBcbiAgICBpZiAobmV3UXVhbnRpdHkgPj0gMSkge1xuICAgICAgdGhpcy5xdWFudGl0eUlucHV0VGFyZ2V0LnZhbHVlID0gbmV3UXVhbnRpdHkudG9TdHJpbmcoKVxuICAgICAgdGhpcy51cGRhdGVQcmljZSgpXG4gICAgICB0aGlzLnVwZGF0ZUJ1dHRvblN0YXRlcygpXG4gICAgfVxuICB9XG5cbiAgdXBkYXRlUHJpY2UoKTogdm9pZCB7XG4gICAgY29uc3QgcXVhbnRpdHkgPSBwYXJzZUludCh0aGlzLnF1YW50aXR5SW5wdXRUYXJnZXQudmFsdWUpIHx8IDFcbiAgICBjb25zdCB1bml0UHJpY2UgPSBwYXJzZUZsb2F0KHRoaXMuaW5jcmVhc2VCdG5UYXJnZXQuZGF0YXNldC5wcmljZSB8fCBcIjBcIilcbiAgICBjb25zdCB0b3RhbFByaWNlID0gcXVhbnRpdHkgKiB1bml0UHJpY2VcblxuICAgIC8vIFVwZGF0ZSB0b3AgcHJpY2UgKHdpdGggMiBkZWNpbWFscylcbiAgICB0aGlzLnRvdGFsUHJpY2VUYXJnZXQudGV4dENvbnRlbnQgPSBgXHUwMEE1JHt0b3RhbFByaWNlLnRvRml4ZWQoMil9YFxuICAgIFxuICAgIC8vIFVwZGF0ZSBib3R0b20gcHJpY2UgKGludGVnZXIgb25seSlcbiAgICB0aGlzLmJvdHRvbVByaWNlVGFyZ2V0LnRleHRDb250ZW50ID0gTWF0aC5yb3VuZCh0b3RhbFByaWNlKS50b1N0cmluZygpXG4gICAgXG4gICAgLy8gVXBkYXRlIHBheW1lbnQgY29uZmlybWF0aW9uIGFtb3VudFxuICAgIHRoaXMudXBkYXRlUGF5bWVudENvbmZpcm1hdGlvbkFtb3VudChNYXRoLnJvdW5kKHRvdGFsUHJpY2UpKVxuICB9XG5cbiAgdXBkYXRlQnV0dG9uU3RhdGVzKCk6IHZvaWQge1xuICAgIGNvbnN0IHF1YW50aXR5ID0gcGFyc2VJbnQodGhpcy5xdWFudGl0eUlucHV0VGFyZ2V0LnZhbHVlKSB8fCAxXG4gICAgXG4gICAgLy8gVXBkYXRlIGRlY3JlYXNlIGJ1dHRvblxuICAgIGlmIChxdWFudGl0eSA8PSAxKSB7XG4gICAgICB0aGlzLmRlY3JlYXNlQnRuVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJib3JkZXItYmx1ZS01MDBcIiwgXCJiZy1ibHVlLTUwXCIsIFwidGV4dC1ibHVlLTYwMFwiKVxuICAgICAgdGhpcy5kZWNyZWFzZUJ0blRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWdyYXktMjAwXCIsIFwidGV4dC1ncmF5LTMwMFwiKVxuICAgICAgdGhpcy5kZWNyZWFzZUJ0blRhcmdldC5kaXNhYmxlZCA9IHRydWVcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kZWNyZWFzZUJ0blRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYm9yZGVyLWdyYXktMjAwXCIsIFwidGV4dC1ncmF5LTMwMFwiKVxuICAgICAgdGhpcy5kZWNyZWFzZUJ0blRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYm9yZGVyLWJsdWUtNTAwXCIsIFwiYmctYmx1ZS01MFwiLCBcInRleHQtYmx1ZS02MDBcIilcbiAgICAgIHRoaXMuZGVjcmVhc2VCdG5UYXJnZXQuZGlzYWJsZWQgPSBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIHNlbGVjdFRhYihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHRhYlR5cGUgPSB0YXJnZXQuZGF0YXNldC50YWJcbiAgICBcbiAgICBpZiAodGFiVHlwZSA9PT0gXCJzdG9ja3VwXCIpIHtcbiAgICAgIC8vIEFjdGl2YXRlIHN0b2NrdXAgdGFiXG4gICAgICB0aGlzLnN0b2NrdXBUYWJUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLVsjRkNFRUE4XVwiLCBcImJnLW9wYWNpdHktNjBcIiwgXCJ0ZXh0LWdyYXktNzAwXCIpXG4gICAgICB0aGlzLnN0b2NrdXBUYWJUYXJnZXQuY2xhc3NMaXN0LmFkZChcImJnLVsjRjVGOEZBXVwiLCBcInotMTBcIilcbiAgICAgIHRoaXMuc3RvY2t1cFRhYlRhcmdldC5xdWVyeVNlbGVjdG9yKFwic3BhbjpmaXJzdC1jaGlsZFwiKT8uY2xhc3NMaXN0LnJlbW92ZShcImZvbnQtbWVkaXVtXCIpXG4gICAgICB0aGlzLnN0b2NrdXBUYWJUYXJnZXQucXVlcnlTZWxlY3RvcihcInNwYW46Zmlyc3QtY2hpbGRcIik/LmNsYXNzTGlzdC5hZGQoXCJmb250LWJvbGRcIiwgXCJ0ZXh0LWJsYWNrXCIpXG4gICAgICBcbiAgICAgIC8vIERlYWN0aXZhdGUgaW5zdGFudCB0YWJcbiAgICAgIHRoaXMuaW5zdGFudFRhYlRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNGNUY4RkFdXCIsIFwiei0xMFwiKVxuICAgICAgdGhpcy5pbnN0YW50VGFiVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy1bI0ZDRUVBOF1cIiwgXCJiZy1vcGFjaXR5LTYwXCIsIFwidGV4dC1ncmF5LTcwMFwiKVxuICAgICAgdGhpcy5pbnN0YW50VGFiVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCJzcGFuOmZpcnN0LWNoaWxkXCIpPy5jbGFzc0xpc3QucmVtb3ZlKFwiZm9udC1ib2xkXCIsIFwidGV4dC1ibGFja1wiKVxuICAgICAgdGhpcy5pbnN0YW50VGFiVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCJzcGFuOmZpcnN0LWNoaWxkXCIpPy5jbGFzc0xpc3QuYWRkKFwiZm9udC1tZWRpdW1cIilcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIGhpZGRlbiBmaWVsZFxuICAgICAgdGhpcy5ib29raW5nVHlwZUlucHV0VGFyZ2V0LnZhbHVlID0gXCJzdG9ja3VwXCJcbiAgICB9IGVsc2UgaWYgKHRhYlR5cGUgPT09IFwiaW5zdGFudFwiKSB7XG4gICAgICAvLyBBY3RpdmF0ZSBpbnN0YW50IHRhYlxuICAgICAgdGhpcy5pbnN0YW50VGFiVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI0ZDRUVBOF1cIiwgXCJiZy1vcGFjaXR5LTYwXCIsIFwidGV4dC1ncmF5LTcwMFwiKVxuICAgICAgdGhpcy5pbnN0YW50VGFiVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJiZy1bI0Y1RjhGQV1cIiwgXCJ6LTEwXCIpXG4gICAgICB0aGlzLmluc3RhbnRUYWJUYXJnZXQucXVlcnlTZWxlY3RvcihcInNwYW46Zmlyc3QtY2hpbGRcIik/LmNsYXNzTGlzdC5yZW1vdmUoXCJmb250LW1lZGl1bVwiKVxuICAgICAgdGhpcy5pbnN0YW50VGFiVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCJzcGFuOmZpcnN0LWNoaWxkXCIpPy5jbGFzc0xpc3QuYWRkKFwiZm9udC1ib2xkXCIsIFwidGV4dC1ibGFja1wiKVxuICAgICAgXG4gICAgICAvLyBEZWFjdGl2YXRlIHN0b2NrdXAgdGFiXG4gICAgICB0aGlzLnN0b2NrdXBUYWJUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJnLVsjRjVGOEZBXVwiLCBcInotMTBcIilcbiAgICAgIHRoaXMuc3RvY2t1cFRhYlRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYmctWyNGQ0VFQThdXCIsIFwiYmctb3BhY2l0eS02MFwiLCBcInRleHQtZ3JheS03MDBcIilcbiAgICAgIHRoaXMuc3RvY2t1cFRhYlRhcmdldC5xdWVyeVNlbGVjdG9yKFwic3BhbjpmaXJzdC1jaGlsZFwiKT8uY2xhc3NMaXN0LnJlbW92ZShcImZvbnQtYm9sZFwiLCBcInRleHQtYmxhY2tcIilcbiAgICAgIHRoaXMuc3RvY2t1cFRhYlRhcmdldC5xdWVyeVNlbGVjdG9yKFwic3BhbjpmaXJzdC1jaGlsZFwiKT8uY2xhc3NMaXN0LmFkZChcImZvbnQtbWVkaXVtXCIpXG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBoaWRkZW4gZmllbGRcbiAgICAgIHRoaXMuYm9va2luZ1R5cGVJbnB1dFRhcmdldC52YWx1ZSA9IFwiaW5zdGFudFwiXG4gICAgfVxuICB9XG5cbiAgc2VsZWN0UGFzc2VuZ2VyKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGxhYmVsID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IG5hbWUgPSBsYWJlbC5kYXRhc2V0LnBhc3Nlbmdlck5hbWUgfHwgXCJcIlxuICAgIGNvbnN0IHBob25lID0gbGFiZWwuZGF0YXNldC5wYXNzZW5nZXJQaG9uZSB8fCBcIlwiXG4gICAgXG4gICAgLy8gVXBkYXRlIGhpZGRlbiBmaWVsZHNcbiAgICB0aGlzLmNvbnRhY3ROYW1lSW5wdXRUYXJnZXQudmFsdWUgPSBuYW1lXG4gICAgdGhpcy5jb250YWN0UGhvbmVJbnB1dFRhcmdldC52YWx1ZSA9IHBob25lXG4gIH1cblxuICBoYW5kbGVTdWJtaXQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgLy8gQWxsb3cgc3VibWlzc2lvbiBpZiBmbGFnIGlzIHNldFxuICAgIGlmICh0aGlzLmFsbG93U3VibWlzc2lvbikge1xuICAgICAgY29uc29sZS5sb2coJ0FsbG93aW5nIGZvcm0gc3VibWlzc2lvbicpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIFxuICAgIC8vIFZhbGlkYXRlIGNvbnRhY3QgaW5mb1xuICAgIGlmICghdGhpcy5jb250YWN0TmFtZUlucHV0VGFyZ2V0LnZhbHVlIHx8ICF0aGlzLmNvbnRhY3RQaG9uZUlucHV0VGFyZ2V0LnZhbHVlKSB7XG4gICAgICBhbGVydCgnXHU4QkY3XHU5MDA5XHU2MkU5XHU4MDU0XHU3Q0ZCXHU0RUJBJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBTdG9yZSBmb3JtIGRhdGEgZm9yIGxhdGVyIHN1Ym1pc3Npb25cbiAgICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gICAgY29uc3QgZm9ybSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJykgYXMgSFRNTEZvcm1FbGVtZW50XG4gICAgaWYgKGZvcm0pIHtcbiAgICAgIHRoaXMucGVuZGluZ0Zvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGZvcm0pXG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSBtb2RhbCB3aXRoIGN1cnJlbnQgZm9ybSB2YWx1ZXNcbiAgICB0aGlzLnVwZGF0ZUNvbmZpcm1Nb2RhbCgpXG4gICAgXG4gICAgLy8gU2hvdyBtb2RhbFxuICAgIHRoaXMuc2hvd0NvbmZpcm1Nb2RhbCgpXG4gIH1cblxuICB1cGRhdGVDb25maXJtTW9kYWwoKTogdm9pZCB7XG4gICAgLy8gVXBkYXRlIHF1YW50aXR5XG4gICAgY29uc3QgcXVhbnRpdHkgPSB0aGlzLnF1YW50aXR5SW5wdXRUYXJnZXQudmFsdWVcbiAgICB0aGlzLmNvbmZpcm1RdWFudGl0eVRhcmdldC50ZXh0Q29udGVudCA9IHF1YW50aXR5XG4gICAgXG4gICAgLy8gVXBkYXRlIGNvbnRhY3RcbiAgICBjb25zdCBjb250YWN0TmFtZSA9IHRoaXMuY29udGFjdE5hbWVJbnB1dFRhcmdldC52YWx1ZVxuICAgIGNvbnN0IGNvbnRhY3RQaG9uZSA9IHRoaXMuY29udGFjdFBob25lSW5wdXRUYXJnZXQudmFsdWVcbiAgICB0aGlzLmNvbmZpcm1Db250YWN0VGFyZ2V0LnRleHRDb250ZW50ID0gYCR7Y29udGFjdE5hbWV9ICR7Y29udGFjdFBob25lfWBcbiAgICBcbiAgICAvLyBVcGRhdGUgYm9va2luZyB0eXBlXG4gICAgY29uc3QgYm9va2luZ1R5cGUgPSB0aGlzLmJvb2tpbmdUeXBlSW5wdXRUYXJnZXQudmFsdWVcbiAgICB0aGlzLmNvbmZpcm1Cb29raW5nVHlwZVRhcmdldC50ZXh0Q29udGVudCA9IGJvb2tpbmdUeXBlID09PSAnc3RvY2t1cCcgPyAnXHU1MTQ4XHU1NkU0XHU1NDBFXHU3RUE2JyA6ICdcdTdBQ0JcdTUzNzNcdTk4ODRcdTdFQTYnXG4gICAgXG4gICAgLy8gVXBkYXRlIHRvdGFsIHByaWNlXG4gICAgY29uc3QgdG90YWxQcmljZSA9IHRoaXMuYm90dG9tUHJpY2VUYXJnZXQudGV4dENvbnRlbnRcbiAgICB0aGlzLmNvbmZpcm1Ub3RhbFByaWNlVGFyZ2V0LnRleHRDb250ZW50ID0gdG90YWxQcmljZSB8fCAnMCdcbiAgfVxuXG4gIHNob3dDb25maXJtTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5jb25maXJtTW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICBcbiAgICAvLyBBdXRvLWNsb3NlIGFuZCBzaG93IHBhc3N3b3JkIG1vZGFsIGFmdGVyIDItMyBzZWNvbmRzXG4gICAgY29uc3Qgd2FpdFRpbWUgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoMzAwMCAtIDIwMDAgKyAxKSkgKyAyMDAwXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlQ29uZmlybU1vZGFsKClcbiAgICAgIHRoaXMuc2hvd1BheW1lbnRQYXNzd29yZE1vZGFsKClcbiAgICB9LCB3YWl0VGltZSlcbiAgfVxuXG4gIGNsb3NlQ29uZmlybU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMuY29uZmlybU1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gIH1cblxuICBzaG93UGF5bWVudFBhc3N3b3JkTW9kYWwoKTogdm9pZCB7XG4gICAgLy8gR2V0IHBheW1lbnQgY29uZmlybWF0aW9uIGNvbnRyb2xsZXIgYW5kIHNob3cgcGFzc3dvcmQgbW9kYWxcbiAgICBjb25zdCBwYXltZW50Q29udHJvbGxlciA9IHRoaXMuYXBwbGljYXRpb24uZ2V0Q29udHJvbGxlckZvckVsZW1lbnRBbmRJZGVudGlmaWVyKFxuICAgICAgdGhpcy5lbGVtZW50LFxuICAgICAgJ3BheW1lbnQtY29uZmlybWF0aW9uJ1xuICAgICkgYXMgYW55XG4gICAgXG4gICAgaWYgKHBheW1lbnRDb250cm9sbGVyICYmIHR5cGVvZiBwYXltZW50Q29udHJvbGxlci5zaG93UGFzc3dvcmRNb2RhbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcGF5bWVudENvbnRyb2xsZXIuc2hvd1Bhc3N3b3JkTW9kYWwoKVxuICAgICAgXG4gICAgICAvLyBMaXN0ZW4gZm9yIHBheW1lbnQgc3VjY2VzcyB0byBzdWJtaXQgZm9ybVxuICAgICAgdGhpcy5zZXR1cFBheW1lbnRTdWNjZXNzTGlzdGVuZXIoKVxuICAgIH1cbiAgfVxuXG4gIHNldHVwUGF5bWVudFN1Y2Nlc3NMaXN0ZW5lcigpOiB2b2lkIHtcbiAgICAvLyBPdmVycmlkZSB0aGUgcGF5bWVudCBjb25maXJtYXRpb24ncyBwcm9jZXNzQWN0dWFsUGF5bWVudCB0byBzdWJtaXQgb3VyIGZvcm1cbiAgICBjb25zdCBwYXltZW50Q29udHJvbGxlciA9IHRoaXMuYXBwbGljYXRpb24uZ2V0Q29udHJvbGxlckZvckVsZW1lbnRBbmRJZGVudGlmaWVyKFxuICAgICAgdGhpcy5lbGVtZW50LFxuICAgICAgJ3BheW1lbnQtY29uZmlybWF0aW9uJ1xuICAgICkgYXMgYW55XG4gICAgXG4gICAgaWYgKHBheW1lbnRDb250cm9sbGVyKSB7XG4gICAgICAvLyBDb21wbGV0ZWx5IG92ZXJyaWRlIHRoZSBwcm9jZXNzQWN0dWFsUGF5bWVudCBtZXRob2RcbiAgICAgIHBheW1lbnRDb250cm9sbGVyLnByb2Nlc3NBY3R1YWxQYXltZW50ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAvLyBTdWJtaXQgdGhlIGZvcm0gaW1tZWRpYXRlbHkgLSBubyBBUEkgY2FsbCBuZWVkZWRcbiAgICAgICAgdGhpcy5zdWJtaXRGb3JtV2l0aERhdGEoKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN1Ym1pdEZvcm1XaXRoRGF0YSgpOiB2b2lkIHtcbiAgICAvLyBzdGltdWx1cy12YWxpZGF0b3I6IGRpc2FibGUtbmV4dC1saW5lXG4gICAgY29uc3QgZm9ybSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJykgYXMgSFRNTEZvcm1FbGVtZW50XG4gICAgaWYgKGZvcm0pIHtcbiAgICAgIGNvbnNvbGUubG9nKCdTZXR0aW5nIGFsbG93U3VibWlzc2lvbiBmbGFnIGFuZCBzdWJtaXR0aW5nIGZvcm0uLi4nKVxuICAgICAgLy8gU2V0IGZsYWcgdG8gYWxsb3cgc3VibWlzc2lvblxuICAgICAgdGhpcy5hbGxvd1N1Ym1pc3Npb24gPSB0cnVlXG4gICAgICAvLyBTdWJtaXQgdGhlIGZvcm0gdXNpbmcgVHVyYm9cbiAgICAgIGZvcm0ucmVxdWVzdFN1Ym1pdCgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Zvcm0gbm90IGZvdW5kJylcbiAgICB9XG4gIH1cblxuICB1cGRhdGVQYXltZW50Q29uZmlybWF0aW9uQW1vdW50KGFtb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gVXBkYXRlIHRoZSBwYXltZW50IGNvbmZpcm1hdGlvbiBjb250cm9sbGVyJ3MgYW1vdW50IHZhbHVlXG4gICAgY29uc3QgcGF5bWVudENvbnRyb2xsZXIgPSB0aGlzLmFwcGxpY2F0aW9uLmdldENvbnRyb2xsZXJGb3JFbGVtZW50QW5kSWRlbnRpZmllcihcbiAgICAgIHRoaXMuZWxlbWVudCxcbiAgICAgICdwYXltZW50LWNvbmZpcm1hdGlvbidcbiAgICApIGFzIGFueVxuICAgIFxuICAgIGlmIChwYXltZW50Q29udHJvbGxlcikge1xuICAgICAgcGF5bWVudENvbnRyb2xsZXIuYW1vdW50VmFsdWUgPSBhbW91bnQudG9TdHJpbmcoKVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuaW50ZXJmYWNlIEJlZm9yZUluc3RhbGxQcm9tcHRFdmVudCBleHRlbmRzIEV2ZW50IHtcbiAgcmVhZG9ubHkgcGxhdGZvcm1zOiBzdHJpbmdbXVxuICByZWFkb25seSB1c2VyQ2hvaWNlOiBQcm9taXNlPHtcbiAgICBvdXRjb21lOiAnYWNjZXB0ZWQnIHwgJ2Rpc21pc3NlZCdcbiAgICBwbGF0Zm9ybTogc3RyaW5nXG4gIH0+XG4gIHByb21wdCgpOiBQcm9taXNlPHZvaWQ+XG59XG5cbi8qKlxuICogUFdBIEluc3RhbGwgQ29udHJvbGxlclxuICpcbiAqIEhhbmRsZXMgUHJvZ3Jlc3NpdmUgV2ViIEFwcCBpbnN0YWxsYXRpb24gcHJvbXB0XG4gKlxuICogVXNhZ2U6XG4gKiAgIDxkaXYgZGF0YS1jb250cm9sbGVyPVwicHdhLWluc3RhbGxcIj5cbiAqICAgICA8YnV0dG9uXG4gKiAgICAgICBkYXRhLXB3YS1pbnN0YWxsLXRhcmdldD1cImluc3RhbGxCdXR0b25cIlxuICogICAgICAgZGF0YS1hY3Rpb249XCJjbGljay0+cHdhLWluc3RhbGwjaW5zdGFsbFwiXG4gKiAgICAgICBjbGFzcz1cImhpZGRlblwiPlxuICogICAgICAgSW5zdGFsbCBBcHBcbiAqICAgICA8L2J1dHRvbj5cbiAqICAgPC9kaXY+XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlciB7XG4gIGRlY2xhcmUgcmVhZG9ubHkgaW5zdGFsbEJ1dHRvblRhcmdldDogSFRNTEJ1dHRvbkVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNJbnN0YWxsQnV0dG9uVGFyZ2V0OiBib29sZWFuXG5cbiAgcHJpdmF0ZSBkZWZlcnJlZFByb21wdDogQmVmb3JlSW5zdGFsbFByb21wdEV2ZW50IHwgbnVsbCA9IG51bGxcblxuICBjb25uZWN0KCkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmVpbnN0YWxscHJvbXB0JywgdGhpcy5oYW5kbGVCZWZvcmVJbnN0YWxsUHJvbXB0LmJpbmQodGhpcykpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2FwcGluc3RhbGxlZCcsIHRoaXMuaGFuZGxlQXBwSW5zdGFsbGVkLmJpbmQodGhpcykpXG5cbiAgICBpZiAodGhpcy5pc1N0YW5kYWxvbmUoKSkge1xuICAgICAgdGhpcy5oaWRlSW5zdGFsbEJ1dHRvbigpXG4gICAgfVxuICB9XG5cbiAgZGlzY29ubmVjdCgpIHtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmVmb3JlaW5zdGFsbHByb21wdCcsIHRoaXMuaGFuZGxlQmVmb3JlSW5zdGFsbFByb21wdC5iaW5kKHRoaXMpKVxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdhcHBpbnN0YWxsZWQnLCB0aGlzLmhhbmRsZUFwcEluc3RhbGxlZC5iaW5kKHRoaXMpKVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVCZWZvcmVJbnN0YWxsUHJvbXB0KGU6IEV2ZW50KSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgdGhpcy5kZWZlcnJlZFByb21wdCA9IGUgYXMgQmVmb3JlSW5zdGFsbFByb21wdEV2ZW50XG5cbiAgICBpZiAodGhpcy5oYXNJbnN0YWxsQnV0dG9uVGFyZ2V0KSB7XG4gICAgICB0aGlzLmluc3RhbGxCdXR0b25UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUFwcEluc3RhbGxlZCgpIHtcbiAgICB0aGlzLmRlZmVycmVkUHJvbXB0ID0gbnVsbFxuICAgIHRoaXMuaGlkZUluc3RhbGxCdXR0b24oKVxuICB9XG5cbiAgYXN5bmMgaW5zdGFsbCgpIHtcbiAgICBpZiAoIXRoaXMuZGVmZXJyZWRQcm9tcHQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMuZGVmZXJyZWRQcm9tcHQucHJvbXB0KClcblxuICAgIGNvbnN0IHsgb3V0Y29tZSB9ID0gYXdhaXQgdGhpcy5kZWZlcnJlZFByb21wdC51c2VyQ2hvaWNlXG5cbiAgICBpZiAob3V0Y29tZSA9PT0gJ2FjY2VwdGVkJykge1xuICAgICAgY29uc29sZS5sb2coJ1BXQSBpbnN0YWxsYXRpb24gYWNjZXB0ZWQnKVxuICAgIH1cblxuICAgIHRoaXMuZGVmZXJyZWRQcm9tcHQgPSBudWxsXG4gICAgdGhpcy5oaWRlSW5zdGFsbEJ1dHRvbigpXG4gIH1cblxuICBwcml2YXRlIGlzU3RhbmRhbG9uZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gd2luZG93Lm1hdGNoTWVkaWEoJyhkaXNwbGF5LW1vZGU6IHN0YW5kYWxvbmUpJykubWF0Y2hlcyB8fFxuICAgICAgICAgICAod2luZG93Lm5hdmlnYXRvciBhcyBhbnkpLnN0YW5kYWxvbmUgPT09IHRydWVcbiAgfVxuXG4gIHByaXZhdGUgaGlkZUluc3RhbGxCdXR0b24oKSB7XG4gICAgaWYgKHRoaXMuaGFzSW5zdGFsbEJ1dHRvblRhcmdldCkge1xuICAgICAgdGhpcy5pbnN0YWxsQnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHRhcmdldHMgPSBbXCJpbnN0YWxsQnV0dG9uXCJdXG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJtb2RhbFwiLFxuICAgIFwic2VsZWN0ZWREYXRlXCIsXG4gICAgXCJkYXRlSW5wdXRcIixcbiAgICBcImRhdGVCdXR0b25cIlxuICBdXG5cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBjdXJyZW50RGF0ZTogU3RyaW5nXG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IG1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc01vZGFsVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VsZWN0ZWREYXRlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRhdGVJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRhdGVCdXR0b25UYXJnZXRzOiBIVE1MQnV0dG9uRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzU2VsZWN0ZWREYXRlVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzRGF0ZUlucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgY3VycmVudERhdGVWYWx1ZTogc3RyaW5nXG5cbiAgcHJpdmF0ZSBzZWxlY3RlZERhdGVPYmo6IERhdGUgPSBuZXcgRGF0ZSgpXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkJ1c0RhdGVQaWNrZXIgY29ubmVjdGVkXCIpXG4gICAgLy8gSW5pdGlhbGl6ZSB3aXRoIHRvZGF5J3MgZGF0ZSB1c2luZyBjbGllbnQgdGltZXpvbmVcbiAgICB0aGlzLnNlbGVjdGVkRGF0ZU9iaiA9IG5ldyBEYXRlKClcbiAgICB0aGlzLmN1cnJlbnREYXRlVmFsdWUgPSB0aGlzLmZvcm1hdERhdGUodGhpcy5zZWxlY3RlZERhdGVPYmopXG4gICAgXG4gICAgLy8gVXBkYXRlIGRpc3BsYXllZCBkYXRlIGltbWVkaWF0ZWx5IHdpdGggY2xpZW50IHRpbWV6b25lXG4gICAgaWYgKHRoaXMuaGFzU2VsZWN0ZWREYXRlVGFyZ2V0KSB7XG4gICAgICB0aGlzLnVwZGF0ZURpc3BsYXllZERhdGUoKVxuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgaGlkZGVuIGlucHV0IHdpdGggY2xpZW50IHRpbWV6b25lIGRhdGVcbiAgICBpZiAodGhpcy5oYXNEYXRlSW5wdXRUYXJnZXQpIHtcbiAgICAgIHRoaXMuZGF0ZUlucHV0VGFyZ2V0LnZhbHVlID0gdGhpcy5jdXJyZW50RGF0ZVZhbHVlXG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSBwYXN0IGRhdGUgYnV0dG9ucyBiYXNlZCBvbiBjbGllbnQgdGltZXpvbmVcbiAgICB0aGlzLnVwZGF0ZVBhc3REYXRlcygpXG4gIH1cblxuICAvLyBPcGVuIGRhdGUgcGlja2VyIG1vZGFsXG4gIG9wZW5Nb2RhbCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaGFzTW9kYWxUYXJnZXQpIHJldHVyblxuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbidcbiAgfVxuXG4gIC8vIENsb3NlIGRhdGUgcGlja2VyIG1vZGFsXG4gIGNsb3NlTW9kYWwoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc01vZGFsVGFyZ2V0KSByZXR1cm5cbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICcnXG4gIH1cblxuICAvLyBTZWxlY3QgYSBkYXRlXG4gIHNlbGVjdERhdGUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGRhdGVTdHIgPSBidXR0b24uZGF0YXNldC5kYXRlIHx8ICcnXG4gICAgXG4gICAgaWYgKCFkYXRlU3RyKSByZXR1cm5cblxuICAgIC8vIFByZXZlbnQgc2VsZWN0aW5nIGRhdGVzIGJlZm9yZSB0b2RheSAodXNpbmcgY2xpZW50IHRpbWV6b25lKVxuICAgIGNvbnN0IHNlbGVjdGVkRGF0ZSA9IG5ldyBEYXRlKGAke2RhdGVTdHJ9VDAwOjAwOjAwYClcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKClcbiAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICAgIHNlbGVjdGVkRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICAgIFxuICAgIGlmIChzZWxlY3RlZERhdGUgPCB0b2RheSkge1xuICAgICAgY29uc29sZS5sb2coJ0Nhbm5vdCBzZWxlY3QgcGFzdCBkYXRlcyAoY2xpZW50IHRpbWV6b25lIGNoZWNrKScpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB0aGlzLnNlbGVjdGVkRGF0ZU9iaiA9IHNlbGVjdGVkRGF0ZVxuICAgIHRoaXMuY3VycmVudERhdGVWYWx1ZSA9IGRhdGVTdHJcbiAgICBcbiAgICAvLyBVcGRhdGUgZGlzcGxheWVkIGRhdGVcbiAgICBpZiAodGhpcy5oYXNTZWxlY3RlZERhdGVUYXJnZXQpIHtcbiAgICAgIHRoaXMudXBkYXRlRGlzcGxheWVkRGF0ZSgpXG4gICAgfVxuICAgIGlmICh0aGlzLmhhc0RhdGVJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5kYXRlSW5wdXRUYXJnZXQudmFsdWUgPSBkYXRlU3RyXG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGlmIHdlJ3JlIG9uIHRoZSBzZWFyY2ggcGFnZSBieSBjaGVja2luZyBVUkwgcGF0aFxuICAgIGNvbnN0IGN1cnJlbnRQYXRoID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lXG4gICAgaWYgKGN1cnJlbnRQYXRoLmluY2x1ZGVzKCcvYnVzX3RpY2tldHMvc2VhcmNoJykpIHtcbiAgICAgIC8vIE9uIHNlYXJjaCBwYWdlOiBjbG9zZSBtb2RhbCBhbmQgcmVmcmVzaCB3aXRoIG5ldyBkYXRlXG4gICAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICAgICAgdGhpcy5yZWZyZXNoU2VhcmNoUmVzdWx0cyhkYXRlU3RyKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBPbiBpbmRleCBwYWdlOiBqdXN0IGNsb3NlIG1vZGFsXG4gICAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICAgIH1cbiAgfVxuXG4gIC8vIFJlZnJlc2ggc2VhcmNoIHJlc3VsdHMgd2l0aCBuZXcgZGF0ZSAoc2VhcmNoIHBhZ2Ugb25seSlcbiAgcHJpdmF0ZSByZWZyZXNoU2VhcmNoUmVzdWx0cyhkYXRlU3RyOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpXG4gICAgcGFyYW1zLnNldCgnZGF0ZScsIGRhdGVTdHIpXG4gICAgXG4gICAgLy8gVXNlIFR1cmJvIHRvIG5hdmlnYXRlIHdpdGggbmV3IGRhdGUgcGFyYW1ldGVyXG4gICAgY29uc3QgbmV3VXJsID0gYCR7d2luZG93LmxvY2F0aW9uLnBhdGhuYW1lfT8ke3BhcmFtcy50b1N0cmluZygpfWBcbiAgICAvLyBAdHMtaWdub3JlIC0gVHVyYm8gaXMgYXZhaWxhYmxlIGdsb2JhbGx5XG4gICAgaWYgKHR5cGVvZiBUdXJibyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgICAgVHVyYm8udmlzaXQobmV3VXJsKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGYWxsYmFjayB0byByZWd1bGFyIHBhZ2UgcmVsb2FkXG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IG5ld1VybFxuICAgIH1cbiAgfVxuXG4gIC8vIFVwZGF0ZSB0aGUgZGlzcGxheWVkIGRhdGUgaW4gdGhlIG1haW4gdmlld1xuICBwcml2YXRlIHVwZGF0ZURpc3BsYXllZERhdGUoKTogdm9pZCB7XG4gICAgY29uc3QgbW9udGggPSB0aGlzLnNlbGVjdGVkRGF0ZU9iai5nZXRNb250aCgpICsgMVxuICAgIGNvbnN0IGRheSA9IHRoaXMuc2VsZWN0ZWREYXRlT2JqLmdldERhdGUoKVxuICAgIGNvbnN0IGRheU5hbWUgPSB0aGlzLmdldERheU5hbWUodGhpcy5zZWxlY3RlZERhdGVPYmopXG4gICAgXG4gICAgdGhpcy5zZWxlY3RlZERhdGVUYXJnZXQuaW5uZXJIVE1MID0gYFxuICAgICAgJHttb250aH08c3BhbiBjbGFzcz1cInRleHQtYmFzZSBteC0wLjVcIj5cdTY3MDg8L3NwYW4+JHtkYXl9PHNwYW4gY2xhc3M9XCJ0ZXh0LWJhc2UgbWwtMC41IG1yLTJcIj5cdTY1RTU8L3NwYW4+XG4gICAgYFxuICAgIFxuICAgIC8vIFVwZGF0ZSB0aGUgXCJcdTRFQ0FcdTU5MjlcIiB0ZXh0IGFmdGVyIHRoZSBkYXRlXG4gICAgY29uc3QgZGF5TGFiZWwgPSB0aGlzLnNlbGVjdGVkRGF0ZVRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmdcbiAgICBpZiAoZGF5TGFiZWwpIHtcbiAgICAgIGRheUxhYmVsLnRleHRDb250ZW50ID0gZGF5TmFtZVxuICAgIH1cbiAgfVxuXG4gIC8vIEdldCBkYXkgbmFtZSBpbiBDaGluZXNlXG4gIHByaXZhdGUgZ2V0RGF5TmFtZShkYXRlOiBEYXRlKTogc3RyaW5nIHtcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKClcbiAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICAgIGNvbnN0IHRhcmdldERhdGUgPSBuZXcgRGF0ZShkYXRlKVxuICAgIHRhcmdldERhdGUuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICBcbiAgICBjb25zdCBkaWZmVGltZSA9IHRhcmdldERhdGUuZ2V0VGltZSgpIC0gdG9kYXkuZ2V0VGltZSgpXG4gICAgY29uc3QgZGlmZkRheXMgPSBNYXRoLnJvdW5kKGRpZmZUaW1lIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKVxuICAgIFxuICAgIGlmIChkaWZmRGF5cyA9PT0gMCkgcmV0dXJuICdcdTRFQ0FcdTU5MjknXG4gICAgaWYgKGRpZmZEYXlzID09PSAxKSByZXR1cm4gJ1x1NjYwRVx1NTkyOSdcbiAgICBpZiAoZGlmZkRheXMgPT09IDIpIHJldHVybiAnXHU1NDBFXHU1OTI5J1xuICAgIFxuICAgIGNvbnN0IHdlZWtkYXlzID0gWydcdTU0NjhcdTY1RTUnLCAnXHU1NDY4XHU0RTAwJywgJ1x1NTQ2OFx1NEU4QycsICdcdTU0NjhcdTRFMDknLCAnXHU1NDY4XHU1NkRCJywgJ1x1NTQ2OFx1NEU5NCcsICdcdTU0NjhcdTUxNkQnXVxuICAgIHJldHVybiB3ZWVrZGF5c1tkYXRlLmdldERheSgpXVxuICB9XG5cbiAgLy8gRm9ybWF0IGRhdGUgYXMgWVlZWS1NTS1ERFxuICBwcml2YXRlIGZvcm1hdERhdGUoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKVxuICAgIGNvbnN0IG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJylcbiAgICBjb25zdCBkYXkgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJylcbiAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YFxuICB9XG5cbiAgLy8gVXBkYXRlIHBhc3QgZGF0ZXMgdG8gYmUgZGlzYWJsZWRcbiAgcHJpdmF0ZSB1cGRhdGVQYXN0RGF0ZXMoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmRhdGVCdXR0b25UYXJnZXRzKSByZXR1cm5cbiAgICBcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKClcbiAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICAgIFxuICAgIHRoaXMuZGF0ZUJ1dHRvblRhcmdldHMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgY29uc3QgZGF0ZVN0ciA9IGJ1dHRvbi5kYXRhc2V0LmRhdGVcbiAgICAgIGlmICghZGF0ZVN0cikgcmV0dXJuXG4gICAgICBcbiAgICAgIGNvbnN0IGJ1dHRvbkRhdGUgPSBuZXcgRGF0ZShgJHtkYXRlU3RyfVQwMDowMDowMGApXG4gICAgICBidXR0b25EYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgICBcbiAgICAgIGlmIChidXR0b25EYXRlIDwgdG9kYXkpIHtcbiAgICAgICAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZVxuICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS00MCcsICdjdXJzb3Itbm90LWFsbG93ZWQnKVxuICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaG92ZXI6YmctYmx1ZS01MCcpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8vIENoZWNrIGlmIGRhdGUgaXMgdG9kYXlcbiAgcHJpdmF0ZSBpc1RvZGF5KGRhdGU6IERhdGUpOiBib29sZWFuIHtcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKClcbiAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICAgIGNvbnN0IGNvbXBhcmVEYXRlID0gbmV3IERhdGUoZGF0ZSlcbiAgICBjb21wYXJlRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICAgIHJldHVybiBjb21wYXJlRGF0ZS5nZXRUaW1lKCkgPT09IHRvZGF5LmdldFRpbWUoKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuaW1wb3J0ICogYXMgVHVyYm8gZnJvbSBcIkBob3R3aXJlZC90dXJib1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlciB7XG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgb3JpZ2luOiBTdHJpbmcsXG4gICAgZGVzdGluYXRpb246IFN0cmluZyxcbiAgICBkYXRlOiBTdHJpbmdcbiAgfVxuXG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwib3ZlcmxheVwiLFxuICAgIFwibW9kYWxcIixcbiAgICBcImRlcGFydHVyZVRpbWVUYWJcIixcbiAgICBcInNlYXRUeXBlVGFiXCIsXG4gICAgXCJkZXBhcnR1cmVTdGF0aW9uVGFiXCIsXG4gICAgXCJhcnJpdmFsU3RhdGlvblRhYlwiLFxuICAgIFwiZGVwYXJ0dXJlVGltZVNlY3Rpb25cIixcbiAgICBcInNlYXRUeXBlU2VjdGlvblwiLFxuICAgIFwiZGVwYXJ0dXJlU3RhdGlvblNlY3Rpb25cIixcbiAgICBcImFycml2YWxTdGF0aW9uU2VjdGlvblwiLFxuICAgIFwiZGVwYXJ0dXJlVGltZUNhcmRcIixcbiAgICBcInNlYXRUeXBlQ2FyZFwiLFxuICAgIFwiZGVwYXJ0dXJlU3RhdGlvbkNhcmRcIixcbiAgICBcImFycml2YWxTdGF0aW9uQ2FyZFwiLFxuICAgIFwiYXBwbHlCdXR0b25cIixcbiAgICBcImZpbHRlckJhZGdlXCIsXG4gICAgXCJzZWxlY3RlZFRhZ3NDb250YWluZXJcIixcbiAgICBcInNlbGVjdGVkVGFnc0xpc3RcIixcbiAgICBcInNvcnRNb2RhbFwiLFxuICAgIFwic29ydE9wdGlvblwiLFxuICAgIFwidGltZUJ1dHRvblwiLFxuICAgIFwicHJpY2VCdXR0b25cIlxuICBdXG5cbiAgZGVjbGFyZSByZWFkb25seSBvdmVybGF5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IG1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRlcGFydHVyZVRpbWVUYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VhdFR5cGVUYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVwYXJ0dXJlU3RhdGlvblRhYlRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBhcnJpdmFsU3RhdGlvblRhYlRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkZXBhcnR1cmVUaW1lU2VjdGlvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzZWF0VHlwZVNlY3Rpb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVwYXJ0dXJlU3RhdGlvblNlY3Rpb25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgYXJyaXZhbFN0YXRpb25TZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRlcGFydHVyZVRpbWVDYXJkVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IHNlYXRUeXBlQ2FyZFRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBkZXBhcnR1cmVTdGF0aW9uQ2FyZFRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBhcnJpdmFsU3RhdGlvbkNhcmRUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgYXBwbHlCdXR0b25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZmlsdGVyQmFkZ2VUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VsZWN0ZWRUYWdzQ29udGFpbmVyVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlbGVjdGVkVGFnc0xpc3RUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc29ydE1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNvcnRPcHRpb25UYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgdGltZUJ1dHRvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBwcmljZUJ1dHRvblRhcmdldDogSFRNTEVsZW1lbnRcblxuICBkZWNsYXJlIHJlYWRvbmx5IG9yaWdpblZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSByZWFkb25seSBkZXN0aW5hdGlvblZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSByZWFkb25seSBkYXRlVmFsdWU6IHN0cmluZ1xuXG4gIHNlbGVjdGVkRGVwYXJ0dXJlVGltZXM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpXG4gIHNlbGVjdGVkU2VhdFR5cGVzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKVxuICBzZWxlY3RlZERlcGFydHVyZVN0YXRpb25zOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKVxuICBzZWxlY3RlZEFycml2YWxTdGF0aW9uczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KClcbiAgY3VycmVudFNvcnRGaWVsZDogc3RyaW5nID0gJ2RlZmF1bHQnXG4gIGN1cnJlbnRTb3J0RGlyZWN0aW9uOiBzdHJpbmcgPSAnJ1xuXG4gIC8vIFx1NjYyMFx1NUMwNFx1NTE3M1x1N0NGQlx1RkYxQVx1NjgwN1x1OEJDNlx1N0IyNiAtPiBcdTY2M0VcdTc5M0FcdTY1ODdcdTVCNTdcbiAgdGltZVNsb3RMYWJlbHM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7XG4gICAgbW9ybmluZzogJ1x1NTFDQ1x1NjY2OCAwMDowMC0wNTo1OScsXG4gICAgbW9ybmluZzI6ICdcdTRFMEFcdTUzNDggMDY6MDAtMTE6NTknLFxuICAgIGFmdGVybm9vbjogJ1x1NEUwQlx1NTM0OCAxMjowMC0xNzo1OScsXG4gICAgZXZlbmluZzogJ1x1NjY1QVx1NEUwQSAxODowMC0yMzo1OSdcbiAgfVxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgLy8gXHU5ODc1XHU5NzYyXHU1MkEwXHU4RjdEXHU2NUY2XHU0RUNFIFVSTCBcdTUzQzJcdTY1NzBcdTYwNjJcdTU5MERcdTdCNUJcdTkwMDlcdTcyQjZcdTYwMDFcbiAgICB0aGlzLnJlc3RvcmVGaWx0ZXJzRnJvbVVybCgpXG4gICAgdGhpcy5yZXN0b3JlU29ydEZyb21VcmwoKVxuICB9XG5cbiAgLy8gXHU0RUNFIFVSTCBcdTUzQzJcdTY1NzBcdTYwNjJcdTU5MERcdTdCNUJcdTkwMDlcdTcyQjZcdTYwMDFcbiAgcmVzdG9yZUZpbHRlcnNGcm9tVXJsKCk6IHZvaWQge1xuICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaClcbiAgICBcbiAgICAvLyBcdTYwNjJcdTU5MERcdTUzRDFcdThGNjZcdTY1RjZcdTZCQjVcbiAgICBjb25zdCB0aW1lU2xvdHMgPSB1cmxQYXJhbXMuZ2V0KCd0aW1lX3Nsb3RzJylcbiAgICBpZiAodGltZVNsb3RzKSB7XG4gICAgICB0aW1lU2xvdHMuc3BsaXQoJywnKS5mb3JFYWNoKHRpbWUgPT4ge1xuICAgICAgICB0aGlzLnNlbGVjdGVkRGVwYXJ0dXJlVGltZXMuYWRkKHRpbWUpXG4gICAgICAgIC8vIFx1NjI3RVx1NTIzMFx1NUJGOVx1NUU5NFx1NzY4NFx1NTM2MVx1NzI0N1x1NUU3Nlx1NkRGQlx1NTJBMFx1OTAwOVx1NEUyRFx1NjgzN1x1NUYwRlxuICAgICAgICBjb25zdCB0aW1lQ2FyZCA9IHRoaXMuZGVwYXJ0dXJlVGltZUNhcmRUYXJnZXRzLmZpbmQoXG4gICAgICAgICAgY2FyZCA9PiBjYXJkLmRhdGFzZXQudGltZSA9PT0gdGltZVxuICAgICAgICApXG4gICAgICAgIGlmICh0aW1lQ2FyZCkgdGhpcy5hZGRTZWxlY3RlZFN0eWxlKHRpbWVDYXJkKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gXHU2MDYyXHU1OTBEXHU1RUE3XHU0RjREXHU3QzdCXHU1NzhCXG4gICAgY29uc3Qgc2VhdFR5cGVzID0gdXJsUGFyYW1zLmdldCgnc2VhdF90eXBlcycpXG4gICAgaWYgKHNlYXRUeXBlcykge1xuICAgICAgc2VhdFR5cGVzLnNwbGl0KCcsJykuZm9yRWFjaChzZWF0VHlwZSA9PiB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRTZWF0VHlwZXMuYWRkKHNlYXRUeXBlKVxuICAgICAgICBjb25zdCBzZWF0Q2FyZCA9IHRoaXMuc2VhdFR5cGVDYXJkVGFyZ2V0cy5maW5kKFxuICAgICAgICAgIGNhcmQgPT4gY2FyZC5kYXRhc2V0LnNlYXRUeXBlID09PSBzZWF0VHlwZVxuICAgICAgICApXG4gICAgICAgIGlmIChzZWF0Q2FyZCkgdGhpcy5hZGRTZWxlY3RlZFN0eWxlKHNlYXRDYXJkKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gXHU2MDYyXHU1OTBEXHU1MUZBXHU1M0QxXHU4RjY2XHU3QUQ5XG4gICAgY29uc3QgZGVwYXJ0dXJlU3RhdGlvbnMgPSB1cmxQYXJhbXMuZ2V0KCdkZXBhcnR1cmVfc3RhdGlvbnMnKVxuICAgIGlmIChkZXBhcnR1cmVTdGF0aW9ucykge1xuICAgICAgZGVwYXJ0dXJlU3RhdGlvbnMuc3BsaXQoJywnKS5mb3JFYWNoKHN0YXRpb24gPT4ge1xuICAgICAgICB0aGlzLnNlbGVjdGVkRGVwYXJ0dXJlU3RhdGlvbnMuYWRkKHN0YXRpb24pXG4gICAgICAgIGNvbnN0IGRlcENhcmQgPSB0aGlzLmRlcGFydHVyZVN0YXRpb25DYXJkVGFyZ2V0cy5maW5kKFxuICAgICAgICAgIGNhcmQgPT4gY2FyZC5kYXRhc2V0LnN0YXRpb24gPT09IHN0YXRpb25cbiAgICAgICAgKVxuICAgICAgICBpZiAoZGVwQ2FyZCkgdGhpcy5hZGRTZWxlY3RlZFN0eWxlKGRlcENhcmQpXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBcdTYwNjJcdTU5MERcdTUyMzBcdThGQkVcdThGNjZcdTdBRDlcbiAgICBjb25zdCBhcnJpdmFsU3RhdGlvbnMgPSB1cmxQYXJhbXMuZ2V0KCdhcnJpdmFsX3N0YXRpb25zJylcbiAgICBpZiAoYXJyaXZhbFN0YXRpb25zKSB7XG4gICAgICBhcnJpdmFsU3RhdGlvbnMuc3BsaXQoJywnKS5mb3JFYWNoKHN0YXRpb24gPT4ge1xuICAgICAgICB0aGlzLnNlbGVjdGVkQXJyaXZhbFN0YXRpb25zLmFkZChzdGF0aW9uKVxuICAgICAgICBjb25zdCBhcnJDYXJkID0gdGhpcy5hcnJpdmFsU3RhdGlvbkNhcmRUYXJnZXRzLmZpbmQoXG4gICAgICAgICAgY2FyZCA9PiBjYXJkLmRhdGFzZXQuc3RhdGlvbiA9PT0gc3RhdGlvblxuICAgICAgICApXG4gICAgICAgIGlmIChhcnJDYXJkKSB0aGlzLmFkZFNlbGVjdGVkU3R5bGUoYXJyQ2FyZClcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIFx1NjZGNFx1NjVCMFx1NzU0Q1x1OTc2Mlx1NzJCNlx1NjAwMVxuICAgIHRoaXMudXBkYXRlRmlsdGVyQmFkZ2UoKVxuICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRUYWdzKClcbiAgfVxuXG4gIG9wZW5GaWx0ZXIoKTogdm9pZCB7XG4gICAgdGhpcy5vdmVybGF5VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgfVxuXG4gIGNsb3NlTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5vdmVybGF5VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgfVxuXG4gIHNlbGVjdFRhYihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgdGFiID0gYnV0dG9uLmRhdGFzZXQudGFiXG5cbiAgICBpZiAoIXRhYikgcmV0dXJuXG5cbiAgICAvLyBcdTc5RkJcdTk2NjRcdTYyNDBcdTY3MDl0YWJcdTc2ODRcdTkwMDlcdTRFMkRcdTY4MzdcdTVGMEZcbiAgICBjb25zdCB0YWJzID0gW1xuICAgICAgdGhpcy5kZXBhcnR1cmVUaW1lVGFiVGFyZ2V0LFxuICAgICAgdGhpcy5zZWF0VHlwZVRhYlRhcmdldCxcbiAgICAgIHRoaXMuZGVwYXJ0dXJlU3RhdGlvblRhYlRhcmdldCxcbiAgICAgIHRoaXMuYXJyaXZhbFN0YXRpb25UYWJUYXJnZXRcbiAgICBdXG4gICAgdGFicy5mb3JFYWNoKCh0KSA9PiB7XG4gICAgICB0LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy13aGl0ZVwiLCBcImJvcmRlci1bI0ZGRDkwMF1cIiwgXCJ0ZXh0LWdyYXktOTAwXCIsIFwiZm9udC1tZWRpdW1cIilcbiAgICAgIHQuY2xhc3NMaXN0LmFkZChcInRleHQtZ3JheS02MDBcIilcbiAgICAgIHQuY2xhc3NMaXN0LnJlbW92ZShcImJvcmRlci1sLTRcIilcbiAgICAgIHQuY2xhc3NMaXN0LmFkZChcImJvcmRlci1sLTJcIiwgXCJib3JkZXItdHJhbnNwYXJlbnRcIilcbiAgICB9KVxuXG4gICAgLy8gXHU2REZCXHU1MkEwXHU1RjUzXHU1MjREdGFiXHU3Njg0XHU5MDA5XHU0RTJEXHU2ODM3XHU1RjBGXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJiZy13aGl0ZVwiLCBcImJvcmRlci1sLTRcIiwgXCJib3JkZXItWyNGRkQ5MDBdXCIsIFwidGV4dC1ncmF5LTkwMFwiLCBcImZvbnQtbWVkaXVtXCIpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJ0ZXh0LWdyYXktNjAwXCIsIFwiYm9yZGVyLWwtMlwiLCBcImJvcmRlci10cmFuc3BhcmVudFwiKVxuXG4gICAgLy8gXHU5NjkwXHU4NUNGXHU2MjQwXHU2NzA5c2VjdGlvblxuICAgIGNvbnN0IHNlY3Rpb25zID0gW1xuICAgICAgdGhpcy5kZXBhcnR1cmVUaW1lU2VjdGlvblRhcmdldCxcbiAgICAgIHRoaXMuc2VhdFR5cGVTZWN0aW9uVGFyZ2V0LFxuICAgICAgdGhpcy5kZXBhcnR1cmVTdGF0aW9uU2VjdGlvblRhcmdldCxcbiAgICAgIHRoaXMuYXJyaXZhbFN0YXRpb25TZWN0aW9uVGFyZ2V0XG4gICAgXVxuICAgIHNlY3Rpb25zLmZvckVhY2goKHMpID0+IHMuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKSlcblxuICAgIC8vIFx1NjYzRVx1NzkzQVx1NUJGOVx1NUU5NFx1NzY4NHNlY3Rpb25cbiAgICBjb25zdCBzZWN0aW9uTWFwOiB7IFtrZXk6IHN0cmluZ106IEhUTUxFbGVtZW50IH0gPSB7XG4gICAgICBkZXBhcnR1cmVUaW1lOiB0aGlzLmRlcGFydHVyZVRpbWVTZWN0aW9uVGFyZ2V0LFxuICAgICAgc2VhdFR5cGU6IHRoaXMuc2VhdFR5cGVTZWN0aW9uVGFyZ2V0LFxuICAgICAgZGVwYXJ0dXJlU3RhdGlvbjogdGhpcy5kZXBhcnR1cmVTdGF0aW9uU2VjdGlvblRhcmdldCxcbiAgICAgIGFycml2YWxTdGF0aW9uOiB0aGlzLmFycml2YWxTdGF0aW9uU2VjdGlvblRhcmdldFxuICAgIH1cblxuICAgIGNvbnN0IHRhcmdldFNlY3Rpb24gPSBzZWN0aW9uTWFwW3RhYl1cbiAgICBpZiAodGFyZ2V0U2VjdGlvbikge1xuICAgICAgdGFyZ2V0U2VjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgfVxuICB9XG5cbiAgdG9nZ2xlRGVwYXJ0dXJlVGltZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHRpbWUgPSBjYXJkLmRhdGFzZXQudGltZVxuXG4gICAgaWYgKCF0aW1lKSByZXR1cm5cblxuICAgIGlmICh0aGlzLnNlbGVjdGVkRGVwYXJ0dXJlVGltZXMuaGFzKHRpbWUpKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkRGVwYXJ0dXJlVGltZXMuZGVsZXRlKHRpbWUpXG4gICAgICB0aGlzLnJlbW92ZVNlbGVjdGVkU3R5bGUoY2FyZClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZWxlY3RlZERlcGFydHVyZVRpbWVzLmFkZCh0aW1lKVxuICAgICAgdGhpcy5hZGRTZWxlY3RlZFN0eWxlKGNhcmQpXG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVGaWx0ZXJCYWRnZSgpXG4gICAgdGhpcy51cGRhdGVBcHBseUJ1dHRvbigpXG4gICAgdGhpcy51cGRhdGVTZWxlY3RlZFRhZ3MoKVxuICB9XG5cbiAgdG9nZ2xlU2VhdFR5cGUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBzZWF0VHlwZSA9IGNhcmQuZGF0YXNldC5zZWF0VHlwZVxuXG4gICAgaWYgKCFzZWF0VHlwZSkgcmV0dXJuXG5cbiAgICBpZiAodGhpcy5zZWxlY3RlZFNlYXRUeXBlcy5oYXMoc2VhdFR5cGUpKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkU2VhdFR5cGVzLmRlbGV0ZShzZWF0VHlwZSlcbiAgICAgIHRoaXMucmVtb3ZlU2VsZWN0ZWRTdHlsZShjYXJkKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlbGVjdGVkU2VhdFR5cGVzLmFkZChzZWF0VHlwZSlcbiAgICAgIHRoaXMuYWRkU2VsZWN0ZWRTdHlsZShjYXJkKVxuICAgIH1cblxuICAgIHRoaXMudXBkYXRlRmlsdGVyQmFkZ2UoKVxuICAgIHRoaXMudXBkYXRlQXBwbHlCdXR0b24oKVxuICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRUYWdzKClcbiAgfVxuXG4gIHRvZ2dsZURlcGFydHVyZVN0YXRpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBzdGF0aW9uID0gY2FyZC5kYXRhc2V0LnN0YXRpb25cblxuICAgIGlmICghc3RhdGlvbikgcmV0dXJuXG5cbiAgICBpZiAodGhpcy5zZWxlY3RlZERlcGFydHVyZVN0YXRpb25zLmhhcyhzdGF0aW9uKSkge1xuICAgICAgdGhpcy5zZWxlY3RlZERlcGFydHVyZVN0YXRpb25zLmRlbGV0ZShzdGF0aW9uKVxuICAgICAgdGhpcy5yZW1vdmVTZWxlY3RlZFN0eWxlKGNhcmQpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWREZXBhcnR1cmVTdGF0aW9ucy5hZGQoc3RhdGlvbilcbiAgICAgIHRoaXMuYWRkU2VsZWN0ZWRTdHlsZShjYXJkKVxuICAgIH1cblxuICAgIHRoaXMudXBkYXRlRmlsdGVyQmFkZ2UoKVxuICAgIHRoaXMudXBkYXRlQXBwbHlCdXR0b24oKVxuICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRUYWdzKClcbiAgfVxuXG4gIHRvZ2dsZUFycml2YWxTdGF0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3Qgc3RhdGlvbiA9IGNhcmQuZGF0YXNldC5zdGF0aW9uXG5cbiAgICBpZiAoIXN0YXRpb24pIHJldHVyblxuXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRBcnJpdmFsU3RhdGlvbnMuaGFzKHN0YXRpb24pKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkQXJyaXZhbFN0YXRpb25zLmRlbGV0ZShzdGF0aW9uKVxuICAgICAgdGhpcy5yZW1vdmVTZWxlY3RlZFN0eWxlKGNhcmQpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRBcnJpdmFsU3RhdGlvbnMuYWRkKHN0YXRpb24pXG4gICAgICB0aGlzLmFkZFNlbGVjdGVkU3R5bGUoY2FyZClcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZUZpbHRlckJhZGdlKClcbiAgICB0aGlzLnVwZGF0ZUFwcGx5QnV0dG9uKClcbiAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkVGFncygpXG4gIH1cblxuICBhZGRTZWxlY3RlZFN0eWxlKGNhcmQ6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgLy8gXHU2REZCXHU1MkEwXHU5RUM0XHU4MjcyXHU4MENDXHU2NjZGXG4gICAgY2FyZC5jbGFzc0xpc3QucmVtb3ZlKFwiYmctWyNGN0Y4RkFdXCIpXG4gICAgY2FyZC5jbGFzc0xpc3QuYWRkKFwiYmctWyNGRkQ5MDBdXCIpXG4gICAgXG4gICAgLy8gXHU2REZCXHU1MkEwXHU1QkY5XHU1MkZFXHU1NkZFXHU2ODA3XHVGRjA4XHU1OTgyXHU2NzlDXHU0RTBEXHU1QjU4XHU1NzI4XHVGRjA5XG4gICAgaWYgKCFjYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrLWljb25cIikpIHtcbiAgICAgIGNvbnN0IGNoZWNrbWFyayA9IHRoaXMuY3JlYXRlQ2hlY2ttYXJrKClcbiAgICAgIGNhcmQuYXBwZW5kQ2hpbGQoY2hlY2ttYXJrKVxuICAgIH1cbiAgfVxuXG4gIHJlbW92ZVNlbGVjdGVkU3R5bGUoY2FyZDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAvLyBcdTc5RkJcdTk2NjRcdTlFQzRcdTgyNzJcdTgwQ0NcdTY2NkZcbiAgICBjYXJkLmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI0ZGRDkwMF1cIilcbiAgICBjYXJkLmNsYXNzTGlzdC5hZGQoXCJiZy1bI0Y3RjhGQV1cIilcbiAgICBcbiAgICAvLyBcdTc5RkJcdTk2NjRcdTVCRjlcdTUyRkVcdTU2RkVcdTY4MDdcbiAgICBjb25zdCBjaGVja21hcmsgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2ttYXJrLWljb25cIilcbiAgICBpZiAoY2hlY2ttYXJrKSB7XG4gICAgICBjaGVja21hcmsucmVtb3ZlKClcbiAgICB9XG4gIH1cblxuICBjcmVhdGVDaGVja21hcmsoKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IGNoZWNrbWFyayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcbiAgICBjaGVja21hcmsuY2xhc3NOYW1lID0gXCJjaGVja21hcmstaWNvbiBhYnNvbHV0ZSB0b3AtMiByaWdodC0yXCJcbiAgICBjaGVja21hcmsuaW5uZXJIVE1MID0gYFxuICAgICAgPHN2ZyBjbGFzcz1cInctNSBoLTUgdGV4dC1ncmF5LTkwMFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCI+XG4gICAgICAgIDxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiBkPVwiTTE2LjcwNyA1LjI5M2ExIDEgMCAwMTAgMS40MTRsLTggOGExIDEgMCAwMS0xLjQxNCAwbC00LTRhMSAxIDAgMDExLjQxNC0xLjQxNEw4IDEyLjU4Nmw3LjI5My03LjI5M2ExIDEgMCAwMTEuNDE0IDB6XCIgY2xpcC1ydWxlPVwiZXZlbm9kZFwiPjwvcGF0aD5cbiAgICAgIDwvc3ZnPlxuICAgIGBcbiAgICByZXR1cm4gY2hlY2ttYXJrXG4gIH1cblxuICB1cGRhdGVGaWx0ZXJCYWRnZSgpOiB2b2lkIHtcbiAgICBjb25zdCB0b3RhbEZpbHRlcnMgPSBcbiAgICAgIHRoaXMuc2VsZWN0ZWREZXBhcnR1cmVUaW1lcy5zaXplICtcbiAgICAgIHRoaXMuc2VsZWN0ZWRTZWF0VHlwZXMuc2l6ZSArXG4gICAgICB0aGlzLnNlbGVjdGVkRGVwYXJ0dXJlU3RhdGlvbnMuc2l6ZSArXG4gICAgICB0aGlzLnNlbGVjdGVkQXJyaXZhbFN0YXRpb25zLnNpemVcblxuICAgIGlmICh0b3RhbEZpbHRlcnMgPiAwKSB7XG4gICAgICB0aGlzLmZpbHRlckJhZGdlVGFyZ2V0LnRleHRDb250ZW50ID0gdG90YWxGaWx0ZXJzLnRvU3RyaW5nKClcbiAgICAgIHRoaXMuZmlsdGVyQmFkZ2VUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZpbHRlckJhZGdlVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgICB9XG4gIH1cblxuICB1cGRhdGVBcHBseUJ1dHRvbigpOiB2b2lkIHtcbiAgICAvLyBcdTVCOUVcdTY1RjZcdThCQTFcdTdCOTdcdTdCNUJcdTkwMDlcdTdFRDNcdTY3OUNcdTY1NzBcdTkxQ0ZcbiAgICB0aGlzLmZldGNoRmlsdGVyZWRDb3VudCgpXG4gIH1cblxuICByZXNldEZpbHRlcnMoKTogdm9pZCB7XG4gICAgLy8gXHU2RTA1XHU3QTdBXHU2MjQwXHU2NzA5XHU5MDA5XHU0RTJEXG4gICAgdGhpcy5zZWxlY3RlZERlcGFydHVyZVRpbWVzLmNsZWFyKClcbiAgICB0aGlzLnNlbGVjdGVkU2VhdFR5cGVzLmNsZWFyKClcbiAgICB0aGlzLnNlbGVjdGVkRGVwYXJ0dXJlU3RhdGlvbnMuY2xlYXIoKVxuICAgIHRoaXMuc2VsZWN0ZWRBcnJpdmFsU3RhdGlvbnMuY2xlYXIoKVxuXG4gICAgLy8gXHU3OUZCXHU5NjY0XHU2MjQwXHU2NzA5XHU1MzYxXHU3MjQ3XHU3Njg0XHU5MDA5XHU0RTJEXHU2ODM3XHU1RjBGXG4gICAgY29uc3QgYWxsQ2FyZHMgPSBbXG4gICAgICAuLi50aGlzLmRlcGFydHVyZVRpbWVDYXJkVGFyZ2V0cyxcbiAgICAgIC4uLnRoaXMuc2VhdFR5cGVDYXJkVGFyZ2V0cyxcbiAgICAgIC4uLnRoaXMuZGVwYXJ0dXJlU3RhdGlvbkNhcmRUYXJnZXRzLFxuICAgICAgLi4udGhpcy5hcnJpdmFsU3RhdGlvbkNhcmRUYXJnZXRzXG4gICAgXVxuXG4gICAgYWxsQ2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgICAgdGhpcy5yZW1vdmVTZWxlY3RlZFN0eWxlKGNhcmQpXG4gICAgfSlcblxuICAgIC8vIFx1NjZGNFx1NjVCMFx1ODlEMlx1NjgwN1x1NTQ4Q1x1NjMwOVx1OTRBRVxuICAgIHRoaXMudXBkYXRlRmlsdGVyQmFkZ2UoKVxuICAgIHRoaXMudXBkYXRlQXBwbHlCdXR0b24oKVxuICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRUYWdzKClcbiAgfVxuXG4gIGFwcGx5RmlsdGVycygpOiB2b2lkIHtcbiAgICAvLyBcdTY3ODRcdTVFRkFcdTdCNUJcdTkwMDlcdTUzQzJcdTY1NzBcbiAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKClcbiAgICBwYXJhbXMuc2V0KCdvcmlnaW4nLCB0aGlzLm9yaWdpblZhbHVlKVxuICAgIHBhcmFtcy5zZXQoJ2Rlc3RpbmF0aW9uJywgdGhpcy5kZXN0aW5hdGlvblZhbHVlKVxuICAgIHBhcmFtcy5zZXQoJ2RhdGUnLCB0aGlzLmRhdGVWYWx1ZSlcbiAgICBcbiAgICAvLyBcdTZERkJcdTUyQTBcdTdCNUJcdTkwMDlcdTY3NjFcdTRFRjZcbiAgICBpZiAodGhpcy5zZWxlY3RlZERlcGFydHVyZVRpbWVzLnNpemUgPiAwKSB7XG4gICAgICBwYXJhbXMuc2V0KCd0aW1lX3Nsb3RzJywgQXJyYXkuZnJvbSh0aGlzLnNlbGVjdGVkRGVwYXJ0dXJlVGltZXMpLmpvaW4oJywnKSlcbiAgICB9XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRTZWF0VHlwZXMuc2l6ZSA+IDApIHtcbiAgICAgIHBhcmFtcy5zZXQoJ3NlYXRfdHlwZXMnLCBBcnJheS5mcm9tKHRoaXMuc2VsZWN0ZWRTZWF0VHlwZXMpLmpvaW4oJywnKSlcbiAgICB9XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWREZXBhcnR1cmVTdGF0aW9ucy5zaXplID4gMCkge1xuICAgICAgcGFyYW1zLnNldCgnZGVwYXJ0dXJlX3N0YXRpb25zJywgQXJyYXkuZnJvbSh0aGlzLnNlbGVjdGVkRGVwYXJ0dXJlU3RhdGlvbnMpLmpvaW4oJywnKSlcbiAgICB9XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRBcnJpdmFsU3RhdGlvbnMuc2l6ZSA+IDApIHtcbiAgICAgIHBhcmFtcy5zZXQoJ2Fycml2YWxfc3RhdGlvbnMnLCBBcnJheS5mcm9tKHRoaXMuc2VsZWN0ZWRBcnJpdmFsU3RhdGlvbnMpLmpvaW4oJywnKSlcbiAgICB9XG4gICAgXG4gICAgLy8gXHU1MTczXHU5NUVEXHU1RjM5XHU3QTk3XG4gICAgdGhpcy5jbG9zZU1vZGFsKClcbiAgICBcbiAgICAvLyBcdTRGN0ZcdTc1MjhUdXJiby52aXNpdFx1NTIzN1x1NjVCMFx1OTg3NVx1OTc2MlxuICAgIFR1cmJvLnZpc2l0KGAvYnVzX3RpY2tldHMvc2VhcmNoPyR7cGFyYW1zLnRvU3RyaW5nKCl9YClcbiAgfVxuXG4gIC8vIFx1NjZGNFx1NjVCMFx1NURGMlx1OTAwOVx1N0I1Qlx1OTAwOVx1OTg3OVx1NjgwN1x1N0I3RVx1NjYzRVx1NzkzQVxuICB1cGRhdGVTZWxlY3RlZFRhZ3MoKTogdm9pZCB7XG4gICAgY29uc3QgdGFnczogQXJyYXk8e3R5cGU6IHN0cmluZywgdmFsdWU6IHN0cmluZywgbGFiZWw6IHN0cmluZ30+ID0gW11cblxuICAgIC8vIFx1NTNEMVx1OEY2Nlx1NjVGNlx1NkJCNVxuICAgIHRoaXMuc2VsZWN0ZWREZXBhcnR1cmVUaW1lcy5mb3JFYWNoKHRpbWUgPT4ge1xuICAgICAgdGFncy5wdXNoKHtcbiAgICAgICAgdHlwZTogJ2RlcGFydHVyZVRpbWUnLFxuICAgICAgICB2YWx1ZTogdGltZSxcbiAgICAgICAgbGFiZWw6IHRoaXMudGltZVNsb3RMYWJlbHNbdGltZV0gfHwgdGltZVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgLy8gXHU4RjY2XHU1NzhCXG4gICAgdGhpcy5zZWxlY3RlZFNlYXRUeXBlcy5mb3JFYWNoKHNlYXRUeXBlID0+IHtcbiAgICAgIHRhZ3MucHVzaCh7XG4gICAgICAgIHR5cGU6ICdzZWF0VHlwZScsXG4gICAgICAgIHZhbHVlOiBzZWF0VHlwZSxcbiAgICAgICAgbGFiZWw6IHNlYXRUeXBlXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICAvLyBcdTUxRkFcdTUzRDFcdThGNjZcdTdBRDlcbiAgICB0aGlzLnNlbGVjdGVkRGVwYXJ0dXJlU3RhdGlvbnMuZm9yRWFjaChzdGF0aW9uID0+IHtcbiAgICAgIHRhZ3MucHVzaCh7XG4gICAgICAgIHR5cGU6ICdkZXBhcnR1cmVTdGF0aW9uJyxcbiAgICAgICAgdmFsdWU6IHN0YXRpb24sXG4gICAgICAgIGxhYmVsOiBzdGF0aW9uXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICAvLyBcdTUyMzBcdThGQkVcdThGNjZcdTdBRDlcbiAgICB0aGlzLnNlbGVjdGVkQXJyaXZhbFN0YXRpb25zLmZvckVhY2goc3RhdGlvbiA9PiB7XG4gICAgICB0YWdzLnB1c2goe1xuICAgICAgICB0eXBlOiAnYXJyaXZhbFN0YXRpb24nLFxuICAgICAgICB2YWx1ZTogc3RhdGlvbixcbiAgICAgICAgbGFiZWw6IHN0YXRpb25cbiAgICAgIH0pXG4gICAgfSlcblxuICAgIC8vIFx1NkUwNVx1N0E3QVx1NjgwN1x1N0I3RVx1NTIxN1x1ODg2OFxuICAgIHRoaXMuc2VsZWN0ZWRUYWdzTGlzdFRhcmdldC5pbm5lckhUTUwgPSAnJ1xuXG4gICAgaWYgKHRhZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBcdTk2OTBcdTg1Q0ZcdTVCQjlcdTU2NjhcbiAgICAgIHRoaXMuc2VsZWN0ZWRUYWdzQ29udGFpbmVyVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFx1NjYzRVx1NzkzQVx1NUJCOVx1NTY2OFxuICAgICAgdGhpcy5zZWxlY3RlZFRhZ3NDb250YWluZXJUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcblxuICAgICAgLy8gXHU2REZCXHU1MkEwXHU2QkNGXHU0RTJBXHU2ODA3XHU3QjdFXG4gICAgICB0YWdzLmZvckVhY2godGFnID0+IHtcbiAgICAgICAgY29uc3QgdGFnRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgIHRhZ0VsZW1lbnQuY2xhc3NOYW1lID0gJ2JnLVsjRkZEOTAwXSB0ZXh0LWdyYXktOTAwIHRleHQtWzEzcHhdIHB4LTMgcHktMSByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEnXG4gICAgICAgIHRhZ0VsZW1lbnQuaW5uZXJIVE1MID0gYFxuICAgICAgICAgIDxzcGFuPiR7dGFnLmxhYmVsfTwvc3Bhbj5cbiAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBcbiAgICAgICAgICAgIGRhdGEtYWN0aW9uPVwiY2xpY2stPmJ1cy10aWNrZXQtc2VhcmNoI3JlbW92ZVRhZ1wiXG4gICAgICAgICAgICBkYXRhLXRhZy10eXBlPVwiJHt0YWcudHlwZX1cIlxuICAgICAgICAgICAgZGF0YS10YWctdmFsdWU9XCIke3RhZy52YWx1ZX1cIlxuICAgICAgICAgICAgY2xhc3M9XCJ0ZXh0LWdyYXktOTAwIGhvdmVyOnRleHQtZ3JheS03MDAgZm9udC1ib2xkXCI+XG4gICAgICAgICAgICBcdTI3MTVcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgYFxuICAgICAgICB0aGlzLnNlbGVjdGVkVGFnc0xpc3RUYXJnZXQuYXBwZW5kQ2hpbGQodGFnRWxlbWVudClcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLy8gXHU3OUZCXHU5NjY0XHU1MzU1XHU0RTJBXHU2ODA3XHU3QjdFXG4gIHJlbW92ZVRhZyhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgdGFnVHlwZSA9IGJ1dHRvbi5kYXRhc2V0LnRhZ1R5cGVcbiAgICBjb25zdCB0YWdWYWx1ZSA9IGJ1dHRvbi5kYXRhc2V0LnRhZ1ZhbHVlXG5cbiAgICBpZiAoIXRhZ1R5cGUgfHwgIXRhZ1ZhbHVlKSByZXR1cm5cblxuICAgIC8vIFx1NjgzOVx1NjM2RVx1N0M3Qlx1NTc4Qlx1NzlGQlx1OTY2NFx1NUJGOVx1NUU5NFx1NzY4NFx1OTAwOVx1NEUyRFx1OTg3OVxuICAgIHN3aXRjaCAodGFnVHlwZSkge1xuICAgICAgY2FzZSAnZGVwYXJ0dXJlVGltZSc6IHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZERlcGFydHVyZVRpbWVzLmRlbGV0ZSh0YWdWYWx1ZSlcbiAgICAgICAgLy8gXHU3OUZCXHU5NjY0XHU1QkY5XHU1RTk0XHU1MzYxXHU3MjQ3XHU3Njg0XHU5MDA5XHU0RTJEXHU2ODM3XHU1RjBGXG4gICAgICAgIGNvbnN0IHRpbWVDYXJkID0gdGhpcy5kZXBhcnR1cmVUaW1lQ2FyZFRhcmdldHMuZmluZChcbiAgICAgICAgICBjYXJkID0+IGNhcmQuZGF0YXNldC50aW1lID09PSB0YWdWYWx1ZVxuICAgICAgICApXG4gICAgICAgIGlmICh0aW1lQ2FyZCkgdGhpcy5yZW1vdmVTZWxlY3RlZFN0eWxlKHRpbWVDYXJkKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdzZWF0VHlwZSc6IHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFNlYXRUeXBlcy5kZWxldGUodGFnVmFsdWUpXG4gICAgICAgIGNvbnN0IHNlYXRDYXJkID0gdGhpcy5zZWF0VHlwZUNhcmRUYXJnZXRzLmZpbmQoXG4gICAgICAgICAgY2FyZCA9PiBjYXJkLmRhdGFzZXQuc2VhdFR5cGUgPT09IHRhZ1ZhbHVlXG4gICAgICAgIClcbiAgICAgICAgaWYgKHNlYXRDYXJkKSB0aGlzLnJlbW92ZVNlbGVjdGVkU3R5bGUoc2VhdENhcmQpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2RlcGFydHVyZVN0YXRpb24nOiB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWREZXBhcnR1cmVTdGF0aW9ucy5kZWxldGUodGFnVmFsdWUpXG4gICAgICAgIGNvbnN0IGRlcENhcmQgPSB0aGlzLmRlcGFydHVyZVN0YXRpb25DYXJkVGFyZ2V0cy5maW5kKFxuICAgICAgICAgIGNhcmQgPT4gY2FyZC5kYXRhc2V0LnN0YXRpb24gPT09IHRhZ1ZhbHVlXG4gICAgICAgIClcbiAgICAgICAgaWYgKGRlcENhcmQpIHRoaXMucmVtb3ZlU2VsZWN0ZWRTdHlsZShkZXBDYXJkKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdhcnJpdmFsU3RhdGlvbic6IHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZEFycml2YWxTdGF0aW9ucy5kZWxldGUodGFnVmFsdWUpXG4gICAgICAgIGNvbnN0IGFyckNhcmQgPSB0aGlzLmFycml2YWxTdGF0aW9uQ2FyZFRhcmdldHMuZmluZChcbiAgICAgICAgICBjYXJkID0+IGNhcmQuZGF0YXNldC5zdGF0aW9uID09PSB0YWdWYWx1ZVxuICAgICAgICApXG4gICAgICAgIGlmIChhcnJDYXJkKSB0aGlzLnJlbW92ZVNlbGVjdGVkU3R5bGUoYXJyQ2FyZClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdTY2RjRcdTY1QjBcdTc1NENcdTk3NjJcbiAgICB0aGlzLnVwZGF0ZUZpbHRlckJhZGdlKClcbiAgICB0aGlzLnVwZGF0ZUFwcGx5QnV0dG9uKClcbiAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkVGFncygpXG4gIH1cblxuICAvLyBcdTVCOUVcdTY1RjZcdTgzQjdcdTUzRDZcdTdCNUJcdTkwMDlcdTdFRDNcdTY3OUNcdTY1NzBcdTkxQ0ZcbiAgYXN5bmMgZmV0Y2hGaWx0ZXJlZENvdW50KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBcdTY3ODRcdTVFRkFcdTY3RTVcdThCRTJcdTUzQzJcdTY1NzBcbiAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKVxuICAgICAgcGFyYW1zLnNldCgnb3JpZ2luJywgdGhpcy5vcmlnaW5WYWx1ZSlcbiAgICAgIHBhcmFtcy5zZXQoJ2Rlc3RpbmF0aW9uJywgdGhpcy5kZXN0aW5hdGlvblZhbHVlKVxuICAgICAgcGFyYW1zLnNldCgnZGF0ZScsIHRoaXMuZGF0ZVZhbHVlKVxuICAgICAgXG4gICAgICAvLyBcdTZERkJcdTUyQTBcdTdCNUJcdTkwMDlcdTY3NjFcdTRFRjZcbiAgICAgIGlmICh0aGlzLnNlbGVjdGVkRGVwYXJ0dXJlVGltZXMuc2l6ZSA+IDApIHtcbiAgICAgICAgcGFyYW1zLnNldCgndGltZV9zbG90cycsIEFycmF5LmZyb20odGhpcy5zZWxlY3RlZERlcGFydHVyZVRpbWVzKS5qb2luKCcsJykpXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zZWxlY3RlZFNlYXRUeXBlcy5zaXplID4gMCkge1xuICAgICAgICBwYXJhbXMuc2V0KCdzZWF0X3R5cGVzJywgQXJyYXkuZnJvbSh0aGlzLnNlbGVjdGVkU2VhdFR5cGVzKS5qb2luKCcsJykpXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zZWxlY3RlZERlcGFydHVyZVN0YXRpb25zLnNpemUgPiAwKSB7XG4gICAgICAgIHBhcmFtcy5zZXQoJ2RlcGFydHVyZV9zdGF0aW9ucycsIEFycmF5LmZyb20odGhpcy5zZWxlY3RlZERlcGFydHVyZVN0YXRpb25zKS5qb2luKCcsJykpXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zZWxlY3RlZEFycml2YWxTdGF0aW9ucy5zaXplID4gMCkge1xuICAgICAgICBwYXJhbXMuc2V0KCdhcnJpdmFsX3N0YXRpb25zJywgQXJyYXkuZnJvbSh0aGlzLnNlbGVjdGVkQXJyaXZhbFN0YXRpb25zKS5qb2luKCcsJykpXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFx1NTNEMVx1OEQ3N0FKQVhcdThCRjdcdTZDNDJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9idXNfdGlja2V0cy9jb3VudF9maWx0ZXJlZF9yZXN1bHRzPyR7cGFyYW1zLnRvU3RyaW5nKCl9YClcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICAgIFxuICAgICAgLy8gXHU2NkY0XHU2NUIwXHU2MzA5XHU5NEFFXHU2NTg3XHU1QjU3XG4gICAgICB0aGlzLmFwcGx5QnV0dG9uVGFyZ2V0LnRleHRDb250ZW50ID0gYFx1NjdFNVx1NzcwQiR7ZGF0YS5jb3VudH1cdTY3NjFcdTdFRDNcdTY3OUNgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1ODNCN1x1NTNENlx1N0I1Qlx1OTAwOVx1N0VEM1x1Njc5Q1x1NjU3MFx1OTFDRlx1NTkzMVx1OEQyNTonLCBlcnJvcilcbiAgICAgIC8vIFx1OTUxOVx1OEJFRlx1NjVGNlx1NjYzRVx1NzkzQVx1OUVEOFx1OEJBNFx1NjU4N1x1NUI1N1xuICAgICAgdGhpcy5hcHBseUJ1dHRvblRhcmdldC50ZXh0Q29udGVudCA9ICdcdTY3RTVcdTc3MEJcdTdFRDNcdTY3OUMnXG4gICAgfVxuICB9XG5cbiAgLy8gPT09PT0gXHU2MzkyXHU1RThGXHU1MjlGXHU4MEZEID09PT09XG5cbiAgLy8gXHU0RUNFIFVSTCBcdTUzQzJcdTY1NzBcdTYwNjJcdTU5MERcdTYzOTJcdTVFOEZcdTcyQjZcdTYwMDFcbiAgcmVzdG9yZVNvcnRGcm9tVXJsKCk6IHZvaWQge1xuICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaClcbiAgICBjb25zdCBzb3J0QnkgPSB1cmxQYXJhbXMuZ2V0KCdzb3J0X2J5JylcbiAgICBjb25zdCBzb3J0RGlyZWN0aW9uID0gdXJsUGFyYW1zLmdldCgnc29ydF9kaXJlY3Rpb24nKVxuXG4gICAgaWYgKHNvcnRCeSkge1xuICAgICAgdGhpcy5jdXJyZW50U29ydEZpZWxkID0gc29ydEJ5XG4gICAgICB0aGlzLmN1cnJlbnRTb3J0RGlyZWN0aW9uID0gc29ydERpcmVjdGlvbiB8fCAnJ1xuICAgICAgdGhpcy51cGRhdGVTb3J0QnV0dG9uc0Rpc3BsYXkoKVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1NjI1M1x1NUYwMFx1NjM5Mlx1NUU4Rlx1NUYzOVx1N0E5N1xuICBvcGVuU29ydE1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMuc29ydE1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgLy8gXHU5QUQ4XHU0RUFFXHU1RjUzXHU1MjREXHU5MDA5XHU0RTJEXHU3Njg0XHU2MzkyXHU1RThGXHU5MDA5XHU5ODc5XG4gICAgdGhpcy5oaWdobGlnaHRDdXJyZW50U29ydCgpXG4gIH1cblxuICAvLyBcdTUxNzNcdTk1RURcdTYzOTJcdTVFOEZcdTVGMzlcdTdBOTdcbiAgY2xvc2VTb3J0TW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5zb3J0TW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgfVxuXG4gIC8vIFx1OTYzQlx1NkI2Mlx1NEU4Qlx1NEVGNlx1NTE5Mlx1NkNFMVxuICBzdG9wUHJvcGFnYXRpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgfVxuXG4gIC8vIFx1OTAwOVx1NjJFOVx1NjM5Mlx1NUU4Rlx1OTAwOVx1OTg3OVxuICBzZWxlY3RTb3J0KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBzb3J0RmllbGQgPSBidXR0b24uZGF0YXNldC5zb3J0RmllbGRcbiAgICBjb25zdCBzb3J0RGlyZWN0aW9uID0gYnV0dG9uLmRhdGFzZXQuc29ydERpcmVjdGlvblxuXG4gICAgaWYgKCFzb3J0RmllbGQpIHJldHVyblxuXG4gICAgLy8gXHU1M0Q2XHU2RDg4XHU2MjQwXHU2NzA5XHU5MDA5XHU5ODc5XHU3Njg0XHU5QUQ4XHU0RUFFXG4gICAgdGhpcy5zb3J0T3B0aW9uVGFyZ2V0cy5mb3JFYWNoKG9wdGlvbiA9PiB7XG4gICAgICBvcHRpb24uY2xhc3NMaXN0LnJlbW92ZSgnYmctWyNGRkQ5MDBdJywgJ2JvcmRlci0yJywgJ2JvcmRlci1bI0ZGNkEwMF0nKVxuICAgICAgb3B0aW9uLmNsYXNzTGlzdC5hZGQoJ2JnLVsjRjdGOEZBXScpXG4gICAgfSlcblxuICAgIC8vIFx1OUFEOFx1NEVBRVx1NUY1M1x1NTI0RFx1OTAwOVx1OTg3OVxuICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1bI0Y3RjhGQV0nKVxuICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdiZy1bI0ZGRDkwMF0nLCAnYm9yZGVyLTInLCAnYm9yZGVyLVsjRkY2QTAwXScpXG5cbiAgICAvLyBcdTRGRERcdTVCNThcdTVGNTNcdTUyNERcdTkwMDlcdTYyRTlcbiAgICB0aGlzLmN1cnJlbnRTb3J0RmllbGQgPSBzb3J0RmllbGRcbiAgICB0aGlzLmN1cnJlbnRTb3J0RGlyZWN0aW9uID0gc29ydERpcmVjdGlvbiB8fCAnJ1xuICB9XG5cbiAgLy8gXHU1RTk0XHU3NTI4XHU2MzkyXHU1RThGXHU1RTc2XHU1MTczXHU5NUVEXHU1RjM5XHU3QTk3XG4gIGFwcGx5U29ydEFuZENsb3NlKCk6IHZvaWQge1xuICAgIHRoaXMuY2xvc2VTb3J0TW9kYWwoKVxuICAgIHRoaXMuYXBwbHlTb3J0KClcbiAgfVxuXG4gIC8vIFx1NUU5NFx1NzUyOFx1NjM5Mlx1NUU4RlxuICBhcHBseVNvcnQoKTogdm9pZCB7XG4gICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKVxuXG4gICAgLy8gXHU3OUZCXHU5NjY0XHU2NUU3XHU3Njg0XHU2MzkyXHU1RThGXHU1M0MyXHU2NTcwXG4gICAgcGFyYW1zLmRlbGV0ZSgnc29ydF9ieScpXG4gICAgcGFyYW1zLmRlbGV0ZSgnc29ydF9kaXJlY3Rpb24nKVxuXG4gICAgLy8gXHU2REZCXHU1MkEwXHU2NUIwXHU3Njg0XHU2MzkyXHU1RThGXHU1M0MyXHU2NTcwXHVGRjA4XHU1OTgyXHU2NzlDXHU0RTBEXHU2NjJGXHU5RUQ4XHU4QkE0XHU2MzkyXHU1RThGXHVGRjA5XG4gICAgaWYgKHRoaXMuY3VycmVudFNvcnRGaWVsZCAhPT0gJ2RlZmF1bHQnKSB7XG4gICAgICBwYXJhbXMuc2V0KCdzb3J0X2J5JywgdGhpcy5jdXJyZW50U29ydEZpZWxkKVxuICAgICAgaWYgKHRoaXMuY3VycmVudFNvcnREaXJlY3Rpb24pIHtcbiAgICAgICAgcGFyYW1zLnNldCgnc29ydF9kaXJlY3Rpb24nLCB0aGlzLmN1cnJlbnRTb3J0RGlyZWN0aW9uKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1NjZGNFx1NjVCMFx1NjMwOVx1OTRBRVx1NjYzRVx1NzkzQVxuICAgIHRoaXMudXBkYXRlU29ydEJ1dHRvbnNEaXNwbGF5KClcblxuICAgIC8vIFx1NEY3Rlx1NzUyOCBUdXJibyBcdTUyMzdcdTY1QjBcdTk4NzVcdTk3NjJcbiAgICBUdXJiby52aXNpdChgL2J1c190aWNrZXRzL3NlYXJjaD8ke3BhcmFtcy50b1N0cmluZygpfWApXG4gIH1cblxuICAvLyBcdTlBRDhcdTRFQUVcdTVGNTNcdTUyNERcdTYzOTJcdTVFOEZcdTkwMDlcdTk4NzlcbiAgaGlnaGxpZ2h0Q3VycmVudFNvcnQoKTogdm9pZCB7XG4gICAgdGhpcy5zb3J0T3B0aW9uVGFyZ2V0cy5mb3JFYWNoKG9wdGlvbiA9PiB7XG4gICAgICBjb25zdCBzb3J0RmllbGQgPSBvcHRpb24uZGF0YXNldC5zb3J0RmllbGRcbiAgICAgIGNvbnN0IHNvcnREaXJlY3Rpb24gPSBvcHRpb24uZGF0YXNldC5zb3J0RGlyZWN0aW9uIHx8ICcnXG5cbiAgICAgIGlmIChzb3J0RmllbGQgPT09IHRoaXMuY3VycmVudFNvcnRGaWVsZCAmJiBzb3J0RGlyZWN0aW9uID09PSB0aGlzLmN1cnJlbnRTb3J0RGlyZWN0aW9uKSB7XG4gICAgICAgIG9wdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1bI0Y3RjhGQV0nKVxuICAgICAgICBvcHRpb24uY2xhc3NMaXN0LmFkZCgnYmctWyNGRkQ5MDBdJywgJ2JvcmRlci0yJywgJ2JvcmRlci1bI0ZGNkEwMF0nKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3B0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLVsjRkZEOTAwXScsICdib3JkZXItMicsICdib3JkZXItWyNGRjZBMDBdJylcbiAgICAgICAgb3B0aW9uLmNsYXNzTGlzdC5hZGQoJ2JnLVsjRjdGOEZBXScpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8vIFx1NjZGNFx1NjVCMFx1NUU5NVx1OTBFOFx1NjM5Mlx1NUU4Rlx1NjMwOVx1OTRBRVx1NjYzRVx1NzkzQVxuICB1cGRhdGVTb3J0QnV0dG9uc0Rpc3BsYXkoKTogdm9pZCB7XG4gICAgLy8gXHU5MUNEXHU3RjZFXHU2MjQwXHU2NzA5XHU2MzA5XHU5NEFFXHU2ODM3XHU1RjBGXG4gICAgaWYgKHRoaXMudGltZUJ1dHRvblRhcmdldCkge1xuICAgICAgdGhpcy5yZXNldEJ1dHRvblN0eWxlKHRoaXMudGltZUJ1dHRvblRhcmdldClcbiAgICB9XG4gICAgaWYgKHRoaXMucHJpY2VCdXR0b25UYXJnZXQpIHtcbiAgICAgIHRoaXMucmVzZXRCdXR0b25TdHlsZSh0aGlzLnByaWNlQnV0dG9uVGFyZ2V0KVxuICAgIH1cblxuICAgIC8vIFx1NjgzOVx1NjM2RVx1NUY1M1x1NTI0RFx1NjM5Mlx1NUU4Rlx1OUFEOFx1NEVBRVx1NUJGOVx1NUU5NFx1NjMwOVx1OTRBRVxuICAgIGlmICh0aGlzLmN1cnJlbnRTb3J0RmllbGQgPT09ICd0aW1lJyAmJiB0aGlzLnRpbWVCdXR0b25UYXJnZXQpIHtcbiAgICAgIHRoaXMuaGlnaGxpZ2h0QnV0dG9uKHRoaXMudGltZUJ1dHRvblRhcmdldCwgdGhpcy5jdXJyZW50U29ydERpcmVjdGlvbiA9PT0gJ2FzYycgPyAnXHU2NUU5XHUyMTkyXHU2NjVBJyA6ICdcdTY2NUFcdTIxOTJcdTY1RTknKVxuICAgIH0gZWxzZSBpZiAodGhpcy5jdXJyZW50U29ydEZpZWxkID09PSAncHJpY2UnICYmIHRoaXMucHJpY2VCdXR0b25UYXJnZXQpIHtcbiAgICAgIHRoaXMuaGlnaGxpZ2h0QnV0dG9uKHRoaXMucHJpY2VCdXR0b25UYXJnZXQsIHRoaXMuY3VycmVudFNvcnREaXJlY3Rpb24gPT09ICdhc2MnID8gJ1x1NEY0RVx1MjE5Mlx1OUFEOCcgOiAnXHU5QUQ4XHUyMTkyXHU0RjRFJylcbiAgICB9XG4gIH1cblxuICAvLyBcdTkxQ0RcdTdGNkVcdTYzMDlcdTk0QUVcdTY4MzdcdTVGMEZcbiAgcmVzZXRCdXR0b25TdHlsZShidXR0b246IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgY29uc3QgaWNvbiA9IGJ1dHRvbi5xdWVyeVNlbGVjdG9yKCcudy02LmgtNicpXG4gICAgY29uc3QgdGV4dCA9IGJ1dHRvbi5xdWVyeVNlbGVjdG9yKCcudGV4dC1cXFxcWzExcHhcXFxcXScpXG4gICAgXG4gICAgaWYgKGljb24pIHtcbiAgICAgIGljb24uY2xhc3NMaXN0LnJlbW92ZSgnYmctWyNGRkQ5MDBdJywgJ2JvcmRlci1bI0ZGNkEwMF0nKVxuICAgICAgaWNvbi5jbGFzc0xpc3QuYWRkKCdib3JkZXItZ3JheS02MDAnKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGV4dCkge1xuICAgICAgdGV4dC5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LVsjRkY2QTAwXScsICdmb250LXNlbWlib2xkJylcbiAgICAgIHRleHQuY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTcwMCcpXG4gICAgfVxuICB9XG5cbiAgLy8gXHU5QUQ4XHU0RUFFXHU2MzA5XHU5NEFFXG4gIGhpZ2hsaWdodEJ1dHRvbihidXR0b246IEhUTUxFbGVtZW50LCBsYWJlbDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgaWNvbiA9IGJ1dHRvbi5xdWVyeVNlbGVjdG9yKCcudy02LmgtNicpXG4gICAgY29uc3QgdGV4dCA9IGJ1dHRvbi5xdWVyeVNlbGVjdG9yKCcudGV4dC1cXFxcWzExcHhcXFxcXScpXG4gICAgXG4gICAgaWYgKGljb24pIHtcbiAgICAgIGljb24uY2xhc3NMaXN0LnJlbW92ZSgnYm9yZGVyLWdyYXktNjAwJylcbiAgICAgIGljb24uY2xhc3NMaXN0LmFkZCgnYmctWyNGRkQ5MDBdJywgJ2JvcmRlci1bI0ZGNkEwMF0nKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGV4dCkge1xuICAgICAgdGV4dC5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktNzAwJylcbiAgICAgIHRleHQuY2xhc3NMaXN0LmFkZCgndGV4dC1bI0ZGNkEwMF0nLCAnZm9udC1zZW1pYm9sZCcpXG4gICAgICB0ZXh0LnRleHRDb250ZW50ID0gbGFiZWxcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcImNoZWNrSWNvblwiLFxuICAgIFwicGFzc2VuZ2VyQ291bnRcIixcbiAgICBcInRvdGFsUHJpY2VcIixcbiAgICBcImNvbnRhY3RQaG9uZVwiLFxuICAgIFwiZm9ybURhdGFcIlxuICBdXG5cbiAgZGVjbGFyZSByZWFkb25seSBjaGVja0ljb25UYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgcGFzc2VuZ2VyQ291bnRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdG90YWxQcmljZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjb250YWN0UGhvbmVUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZm9ybURhdGFUYXJnZXQ6IEhUTUxFbGVtZW50XG5cbiAgcHJpdmF0ZSBzZWxlY3RlZFBhc3NlbmdlcnM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpXG4gIHByaXZhdGUgYmFzZVByaWNlOiBudW1iZXIgPSAwXG4gIHByaXZhdGUgaW5zdXJhbmNlUHJpY2U6IG51bWJlciA9IDBcbiAgcHJpdmF0ZSBpbnN1cmFuY2VUeXBlOiBzdHJpbmcgPSAnbm9uZSdcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiQnVzVGlja2V0T3JkZXIgY29ubmVjdGVkXCIpXG4gICAgXG4gICAgLy8gUmVhZCBpbml0aWFsIGluc3VyYW5jZSBkYXRhIGZyb20gZm9ybSBkYXRhIGVsZW1lbnRcbiAgICB0aGlzLmluc3VyYW5jZVR5cGUgPSB0aGlzLmZvcm1EYXRhVGFyZ2V0LmRhdGFzZXQuaW5zdXJhbmNlVHlwZSB8fCAnbm9uZSdcbiAgICB0aGlzLmluc3VyYW5jZVByaWNlID0gcGFyc2VJbnQodGhpcy5mb3JtRGF0YVRhcmdldC5kYXRhc2V0Lmluc3VyYW5jZVByaWNlIHx8ICcwJylcbiAgICBcbiAgICAvLyBBdXRvLXNlbGVjdCBmaXJzdCBwYXNzZW5nZXIgaWYgZXhpc3RzXG4gICAgY29uc3QgZmlyc3RQYXNzZW5nZXIgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtcGFzc2VuZ2VyLWlkXScpIGFzIEhUTUxFbGVtZW50XG4gICAgaWYgKGZpcnN0UGFzc2VuZ2VyKSB7XG4gICAgICBjb25zdCBwYXNzZW5nZXJJZCA9IGZpcnN0UGFzc2VuZ2VyLmRhdGFzZXQucGFzc2VuZ2VySWRcbiAgICAgIGlmIChwYXNzZW5nZXJJZCkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkUGFzc2VuZ2Vycy5hZGQocGFzc2VuZ2VySWQpXG4gICAgICAgIHRoaXMudXBkYXRlUGFzc2VuZ2VyVUkoZmlyc3RQYXNzZW5nZXIsIHRydWUpXG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgY29udGFjdCBwaG9uZSB3aXRoIGZpcnN0IHBhc3NlbmdlcidzIHBob25lXG4gICAgICAgIGNvbnN0IHBob25lID0gZmlyc3RQYXNzZW5nZXIuZGF0YXNldC5wYXNzZW5nZXJQaG9uZVxuICAgICAgICBpZiAocGhvbmUpIHtcbiAgICAgICAgICB0aGlzLmNvbnRhY3RQaG9uZVRhcmdldC50ZXh0Q29udGVudCA9IHBob25lXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy51cGRhdGVUb3RhbCgpXG4gIH1cblxuICB0b2dnbGVQYXNzZW5nZXIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHBhc3NlbmdlcklkID0gdGFyZ2V0LmRhdGFzZXQucGFzc2VuZ2VySWRcbiAgICBcbiAgICBpZiAoIXBhc3NlbmdlcklkKSByZXR1cm5cbiAgICBcbiAgICAvLyBDaGVjayBpZiBhbHJlYWR5IHNlbGVjdGVkXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJzLmhhcyhwYXNzZW5nZXJJZCkpIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJzLmRlbGV0ZShwYXNzZW5nZXJJZClcbiAgICAgIHRoaXMudXBkYXRlUGFzc2VuZ2VyVUkodGFyZ2V0LCBmYWxzZSlcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQ2hlY2sgbWF4IGxpbWl0ICg1IHBhc3NlbmdlcnMpXG4gICAgICBpZiAodGhpcy5zZWxlY3RlZFBhc3NlbmdlcnMuc2l6ZSA+PSA1KSB7XG4gICAgICAgIGFsZXJ0KCdcdTY3MDBcdTU5MUFcdTUzRUFcdTgwRkRcdTkwMDlcdTYyRTk1XHU0RjREXHU0RTU4XHU4RjY2XHU0RUJBJylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBcbiAgICAgIHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJzLmFkZChwYXNzZW5nZXJJZClcbiAgICAgIHRoaXMudXBkYXRlUGFzc2VuZ2VyVUkodGFyZ2V0LCB0cnVlKVxuICAgICAgXG4gICAgICAvLyBJZiB0aGlzIGlzIHRoZSBmaXJzdCBzZWxlY3Rpb24sIHVwZGF0ZSBjb250YWN0IHBob25lXG4gICAgICBpZiAodGhpcy5zZWxlY3RlZFBhc3NlbmdlcnMuc2l6ZSA9PT0gMSkge1xuICAgICAgICBjb25zdCBwaG9uZSA9IHRhcmdldC5kYXRhc2V0LnBhc3NlbmdlclBob25lXG4gICAgICAgIGlmIChwaG9uZSkge1xuICAgICAgICAgIHRoaXMuY29udGFjdFBob25lVGFyZ2V0LnRleHRDb250ZW50ID0gcGhvbmVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnVwZGF0ZVRvdGFsKClcbiAgfVxuXG4gIHNlbGVjdEluc3VyYW5jZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgdGhpcy5pbnN1cmFuY2VUeXBlID0gdGFyZ2V0LmRhdGFzZXQuaW5zdXJhbmNlVHlwZSB8fCAnbm9uZSdcbiAgICB0aGlzLmluc3VyYW5jZVByaWNlID0gcGFyc2VJbnQodGFyZ2V0LmRhdGFzZXQuaW5zdXJhbmNlUHJpY2UgfHwgJzAnKVxuICAgIFxuICAgIC8vIFVwZGF0ZSBVSTogaGlnaGxpZ2h0IHNlbGVjdGVkIGluc3VyYW5jZSBjYXJkXG4gICAgY29uc3QgYWxsSW5zdXJhbmNlQ2FyZHMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtaW5zdXJhbmNlLXR5cGVdJylcbiAgICBhbGxJbnN1cmFuY2VDYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkIGFzIEhUTUxFbGVtZW50XG4gICAgICBjb25zdCBjYXJkVHlwZSA9IGNhcmRFbGVtZW50LmRhdGFzZXQuaW5zdXJhbmNlVHlwZVxuICAgICAgY29uc3QgY2hlY2tJY29uID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3Rvcignc3ZnOmxhc3QtY2hpbGQnKVxuICAgICAgXG4gICAgICBpZiAoY2FyZFR5cGUgPT09IHRoaXMuaW5zdXJhbmNlVHlwZSkge1xuICAgICAgICAvLyBTZWxlY3RlZCBjYXJkIHN0eWxpbmdcbiAgICAgICAgaWYgKGNhcmRUeXBlID09PSAnbm9uZScpIHtcbiAgICAgICAgICBjYXJkRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdib3JkZXItWyNGRkQ5NDRdJylcbiAgICAgICAgICBjYXJkRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItZ3JheS0xMDAnKVxuICAgICAgICAgIGlmIChjaGVja0ljb24pIGNoZWNrSWNvbi5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktMzAwJylcbiAgICAgICAgICBpZiAoY2hlY2tJY29uKSBjaGVja0ljb24uY2xhc3NMaXN0LmFkZCgndGV4dC1bI0ZGRDk0NF0nKVxuICAgICAgICB9IGVsc2UgaWYgKGNhcmRUeXBlID09PSAncHJlbWl1bScpIHtcbiAgICAgICAgICBjYXJkRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdiZy1bI0ZGRkFFRF0nLCAnYm9yZGVyLVsjRkZEOTQ0XScpXG4gICAgICAgICAgY2FyZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYmctZ3JheS01MCcsICdib3JkZXItZ3JheS0xMDAnKVxuICAgICAgICAgIGlmIChjaGVja0ljb24pIGNoZWNrSWNvbi5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktMzAwJylcbiAgICAgICAgICBpZiAoY2hlY2tJY29uKSBjaGVja0ljb24uY2xhc3NMaXN0LmFkZCgndGV4dC1bI0ZGRDk0NF0nKVxuICAgICAgICB9IGVsc2UgaWYgKGNhcmRUeXBlID09PSAncmVmdW5kJykge1xuICAgICAgICAgIGNhcmRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2JnLVsjRjBGN0ZGXScsICdib3JkZXItWyM1RDlDRUNdJylcbiAgICAgICAgICBjYXJkRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdiZy1ncmF5LTUwJywgJ2JvcmRlci1ncmF5LTEwMCcpXG4gICAgICAgICAgaWYgKGNoZWNrSWNvbikgY2hlY2tJY29uLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS0zMDAnKVxuICAgICAgICAgIGlmIChjaGVja0ljb24pIGNoZWNrSWNvbi5jbGFzc0xpc3QuYWRkKCd0ZXh0LVsjNUQ5Q0VDXScpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFVuc2VsZWN0ZWQgY2FyZCBzdHlsaW5nXG4gICAgICAgIGlmIChjYXJkVHlwZSA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgY2FyZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYm9yZGVyLVsjRkZEOTQ0XScpXG4gICAgICAgICAgY2FyZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLWdyYXktMTAwJylcbiAgICAgICAgICBpZiAoY2hlY2tJY29uKSBjaGVja0ljb24uY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTMwMCcpXG4gICAgICAgICAgaWYgKGNoZWNrSWNvbikgY2hlY2tJY29uLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtWyNGRkQ5NDRdJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYXJkRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdiZy1bI0ZGRkFFRF0nLCAnYmctWyNGMEY3RkZdJywgJ2JvcmRlci1bI0ZGRDk0NF0nLCAnYm9yZGVyLVsjNUQ5Q0VDXScpXG4gICAgICAgICAgY2FyZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYmctZ3JheS01MCcsICdib3JkZXItZ3JheS0xMDAnKVxuICAgICAgICAgIGlmIChjaGVja0ljb24pIGNoZWNrSWNvbi5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktMzAwJylcbiAgICAgICAgICBpZiAoY2hlY2tJY29uKSBjaGVja0ljb24uY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1bI0ZGRDk0NF0nLCAndGV4dC1bIzVEOUNFQ10nKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICB0aGlzLnVwZGF0ZVRvdGFsKClcbiAgfVxuXG4gIGFzeW5jIHN1Ym1pdE9yZGVyKGV2ZW50OiBFdmVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50XG4gICAgY29uc3QgYnVzVGlja2V0SWQgPSBidXR0b24uZGF0YXNldC5idXNUaWNrZXRJZFxuICAgIGNvbnN0IGJhc2VQcmljZSA9IHBhcnNlSW50KGJ1dHRvbi5kYXRhc2V0LmJhc2VQcmljZSB8fCAnMCcpXG4gICAgXG4gICAgLy8gU3RvcmUgYmFzZSBwcmljZSBmb3IgY2FsY3VsYXRpb25zXG4gICAgdGhpcy5iYXNlUHJpY2UgPSBiYXNlUHJpY2VcbiAgICBcbiAgICAvLyBWYWxpZGF0ZSBwYXNzZW5nZXIgc2VsZWN0aW9uXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRQYXNzZW5nZXJzLnNpemUgPT09IDApIHtcbiAgICAgIGFsZXJ0KCdcdThCRjdcdTgxRjNcdTVDMTFcdTkwMDlcdTYyRTlcdTRFMDBcdTRGNERcdTRFNThcdThGNjZcdTRFQkEnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIEdldCBwYXNzZW5nZXIgZGV0YWlscyBmb3Igc3VibWlzc2lvblxuICAgIGNvbnN0IHBhc3NlbmdlcklkcyA9IEFycmF5LmZyb20odGhpcy5zZWxlY3RlZFBhc3NlbmdlcnMpXG4gICAgY29uc3QgdG90YWxQcmljZSA9IHRoaXMuY2FsY3VsYXRlVG90YWwoKVxuICAgIGNvbnN0IHRvdGFsSW5zdXJhbmNlUHJpY2UgPSB0aGlzLmluc3VyYW5jZVByaWNlICogcGFzc2VuZ2VySWRzLmxlbmd0aFxuICAgIFxuICAgIC8vIFByZXBhcmUgb3JkZXIgZGF0YVxuICAgIGNvbnN0IG9yZGVyRGF0YSA9IHtcbiAgICAgIGJ1c190aWNrZXRfb3JkZXI6IHtcbiAgICAgICAgYnVzX3RpY2tldF9pZDogYnVzVGlja2V0SWQsXG4gICAgICAgIHBhc3Nlbmdlcl9pZHM6IHBhc3NlbmdlcklkcyxcbiAgICAgICAgaW5zdXJhbmNlX3R5cGU6IHRoaXMuaW5zdXJhbmNlVHlwZSxcbiAgICAgICAgaW5zdXJhbmNlX3ByaWNlOiB0b3RhbEluc3VyYW5jZVByaWNlLFxuICAgICAgICB0b3RhbF9wcmljZTogdG90YWxQcmljZVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBEaXNhYmxlIGJ1dHRvbiBkdXJpbmcgc3VibWlzc2lvblxuICAgIGJ1dHRvbi5kaXNhYmxlZCA9IHRydWVcbiAgICBidXR0b24udGV4dENvbnRlbnQgPSAnXHU1MjFCXHU1RUZBXHU0RTJELi4uJ1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBDcmVhdGUgb3JkZXIgdmlhIEFKQVhcbiAgICAgIGNvbnN0IGNzcmZUb2tlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTE1ldGFFbGVtZW50PignbWV0YVtuYW1lPVwiY3NyZi10b2tlblwiXScpPy5jb250ZW50IHx8ICcnXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYnVzX3RpY2tldF9vcmRlcnMnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAnWC1DU1JGLVRva2VuJzogY3NyZlRva2VuXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG9yZGVyRGF0YSlcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLm9rICYmIGRhdGEuc3VjY2Vzcykge1xuICAgICAgICAvLyBPcmRlciBjcmVhdGVkIHN1Y2Nlc3NmdWxseSwgdHJpZ2dlciBwYXltZW50IG1vZGFsXG4gICAgICAgIHRoaXMudHJpZ2dlclBheW1lbnRNb2RhbCh0b3RhbFByaWNlLnRvU3RyaW5nKCksIGRhdGEucGF5bWVudF91cmwsIGRhdGEuc3VjY2Vzc191cmwpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YS5tZXNzYWdlIHx8ICdcdTUyMUJcdTVFRkFcdThCQTJcdTUzNTVcdTU5MzFcdThEMjUnKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBvcmRlcjonLCBlcnJvcilcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdcdTUyMUJcdTVFRkFcdThCQTJcdTUzNTVcdTU5MzFcdThEMjVcdUZGMENcdThCRjdcdTkxQ0RcdThCRDUnXG4gICAgICBhbGVydChtZXNzYWdlKVxuICAgICAgYnV0dG9uLmRpc2FibGVkID0gZmFsc2VcbiAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdcdTUzQkJcdTY1MkZcdTRFRDgnXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB0cmlnZ2VyUGF5bWVudE1vZGFsKGFtb3VudDogc3RyaW5nLCBwYXltZW50VXJsOiBzdHJpbmcsIHN1Y2Nlc3NVcmw6IHN0cmluZyk6IHZvaWQge1xuICAgIC8vIEZpbmQgcGF5bWVudC1jb25maXJtYXRpb24gY29udHJvbGxlciBhbmQgdHJpZ2dlciBpdFxuICAgIGNvbnN0IHBheW1lbnRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtY29udHJvbGxlcio9XCJwYXltZW50LWNvbmZpcm1hdGlvblwiXScpIGFzIEhUTUxFbGVtZW50XG4gICAgXG4gICAgaWYgKCFwYXltZW50RWxlbWVudCkge1xuICAgICAgY29uc29sZS5lcnJvcignUGF5bWVudCBjb25maXJtYXRpb24gY29udHJvbGxlciBub3QgZm91bmQnKVxuICAgICAgYWxlcnQoJ1x1NjUyRlx1NEVEOFx1N0NGQlx1N0VERlx1NjcyQVx1NTJBMFx1OEY3RFx1RkYwQ1x1OEJGN1x1NTIzN1x1NjVCMFx1OTg3NVx1OTc2Mlx1OTFDRFx1OEJENScpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gR2V0IHRoZSBTdGltdWx1cyBjb250cm9sbGVyIGluc3RhbmNlXG4gICAgY29uc3QgYXBwID0gKHdpbmRvdyBhcyBhbnkpLlN0aW11bHVzXG4gICAgaWYgKCFhcHApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N0aW11bHVzIG5vdCBmb3VuZCcpXG4gICAgICBhbGVydCgnXHU3Q0ZCXHU3RURGXHU5NTE5XHU4QkVGXHVGRjBDXHU4QkY3XHU1MjM3XHU2NUIwXHU5ODc1XHU5NzYyXHU5MUNEXHU4QkQ1JylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICBjb25zdCBwYXltZW50Q29udHJvbGxlciA9IGFwcC5nZXRDb250cm9sbGVyRm9yRWxlbWVudEFuZElkZW50aWZpZXIocGF5bWVudEVsZW1lbnQsICdwYXltZW50LWNvbmZpcm1hdGlvbicpXG4gICAgXG4gICAgaWYgKHBheW1lbnRDb250cm9sbGVyKSB7XG4gICAgICAvLyBTZXQgdmFsdWVzXG4gICAgICBwYXltZW50Q29udHJvbGxlci5hbW91bnRWYWx1ZSA9IGFtb3VudFxuICAgICAgLy8gR2V0IGN1cnJlbnQgdXNlciBlbWFpbCBmcm9tIG1ldGEgdGFnIG9yIGVsZW1lbnRcbiAgICAgIGNvbnN0IHVzZXJFbWFpbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTE1ldGFFbGVtZW50PignbWV0YVtuYW1lPVwidXNlci1lbWFpbFwiXScpPy5jb250ZW50IHx8IFxuICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS11c2VyLWVtYWlsXScpPy5nZXRBdHRyaWJ1dGUoJ2RhdGEtdXNlci1lbWFpbCcpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICdkZW1vQGV4YW1wbGUuY29tJ1xuICAgICAgcGF5bWVudENvbnRyb2xsZXIudXNlckVtYWlsVmFsdWUgPSB1c2VyRW1haWxcbiAgICAgIHBheW1lbnRDb250cm9sbGVyLnBheW1lbnRVcmxWYWx1ZSA9IHBheW1lbnRVcmxcbiAgICAgIHBheW1lbnRDb250cm9sbGVyLnN1Y2Nlc3NVcmxWYWx1ZSA9IHN1Y2Nlc3NVcmxcbiAgICAgIFxuICAgICAgLy8gU2hvdyBwYXNzd29yZCBtb2RhbFxuICAgICAgcGF5bWVudENvbnRyb2xsZXIuc2hvd1Bhc3N3b3JkTW9kYWwoKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdQYXltZW50IGNvbnRyb2xsZXIgbm90IGluaXRpYWxpemVkJylcbiAgICAgIGFsZXJ0KCdcdTY1MkZcdTRFRDhcdTdDRkJcdTdFREZcdTY3MkFcdTUyMURcdTU5Q0JcdTUzMTZcdUZGMENcdThCRjdcdTUyMzdcdTY1QjBcdTk4NzVcdTk3NjJcdTkxQ0RcdThCRDUnKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlUGFzc2VuZ2VyVUkoZWxlbWVudDogSFRNTEVsZW1lbnQsIHNlbGVjdGVkOiBib29sZWFuKTogdm9pZCB7XG4gICAgY29uc3QgY2hlY2tJY29uID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1idXMtdGlja2V0LW9yZGVyLXRhcmdldD1cImNoZWNrSWNvblwiXScpIGFzIEhUTUxFbGVtZW50XG4gICAgaWYgKGNoZWNrSWNvbikge1xuICAgICAgaWYgKHNlbGVjdGVkKSB7XG4gICAgICAgIGNoZWNrSWNvbi5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktMzAwJylcbiAgICAgICAgY2hlY2tJY29uLmNsYXNzTGlzdC5hZGQoJ3RleHQtWyNGRkQ5NDRdJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoZWNrSWNvbi5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktMzAwJylcbiAgICAgICAgY2hlY2tJY29uLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtWyNGRkQ5NDRdJylcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVRvdGFsKCk6IHZvaWQge1xuICAgIGNvbnN0IHBhc3NlbmdlckNvdW50ID0gdGhpcy5zZWxlY3RlZFBhc3NlbmdlcnMuc2l6ZVxuICAgIHRoaXMucGFzc2VuZ2VyQ291bnRUYXJnZXQudGV4dENvbnRlbnQgPSBgXHU1MTcxJHtwYXNzZW5nZXJDb3VudH1cdTRFQkFgXG4gICAgXG4gICAgY29uc3QgdG90YWwgPSB0aGlzLmNhbGN1bGF0ZVRvdGFsKClcbiAgICB0aGlzLnRvdGFsUHJpY2VUYXJnZXQudGV4dENvbnRlbnQgPSB0b3RhbC50b1N0cmluZygpXG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZVRvdGFsKCk6IG51bWJlciB7XG4gICAgY29uc3QgcGFzc2VuZ2VyQ291bnQgPSB0aGlzLnNlbGVjdGVkUGFzc2VuZ2Vycy5zaXplXG4gICAgaWYgKHBhc3NlbmdlckNvdW50ID09PSAwKSByZXR1cm4gMFxuICAgIFxuICAgIC8vIEdldCBiYXNlIHByaWNlIGZyb20gYnV0dG9uIG9yIGZvcm1EYXRhXG4gICAgY29uc3QgYnV0dG9uID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWJhc2UtcHJpY2VdJykgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBiYXNlUHJpY2UgPSBwYXJzZUludChidXR0b24/LmRhdGFzZXQuYmFzZVByaWNlIHx8ICcwJylcbiAgICBcbiAgICByZXR1cm4gKGJhc2VQcmljZSArIHRoaXMuaW5zdXJhbmNlUHJpY2UpICogcGFzc2VuZ2VyQ291bnRcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwicHJvZHVjdENhcmRcIixcbiAgICBcImRhdGVNb2RhbFwiLFxuICAgIFwiY291bnRNb2RhbFwiLFxuICAgIFwiYWR1bHRDb3VudFwiLFxuICAgIFwiY2hpbGRDb3VudFwiLFxuICAgIFwic2VsZWN0ZWREYXRlXCIsXG4gICAgXCJ0b3RhbFByaWNlXCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgZ3VpZGVJZDogU3RyaW5nLFxuICAgIHNlbGVjdGVkRGF0ZTogU3RyaW5nLFxuICAgIGFkdWx0Q291bnQ6IE51bWJlcixcbiAgICBjaGlsZENvdW50OiBOdW1iZXIsXG4gICAgcHJpY2VQZXJQZXJzb246IE51bWJlclxuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBwcm9kdWN0Q2FyZFRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBkYXRlTW9kYWxUYXJnZXQ/OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNvdW50TW9kYWxUYXJnZXQ/OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGFkdWx0Q291bnRUYXJnZXQ/OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNoaWxkQ291bnRUYXJnZXQ/OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlbGVjdGVkRGF0ZVRhcmdldD86IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdG90YWxQcmljZVRhcmdldD86IEhUTUxFbGVtZW50XG4gIFxuICBkZWNsYXJlIGd1aWRlSWRWYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgc2VsZWN0ZWREYXRlVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIGFkdWx0Q291bnRWYWx1ZTogbnVtYmVyXG4gIGRlY2xhcmUgY2hpbGRDb3VudFZhbHVlOiBudW1iZXJcbiAgZGVjbGFyZSBwcmljZVBlclBlcnNvblZhbHVlOiBudW1iZXJcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiRGVlcEJvb2tpbmcgY29udHJvbGxlciBjb25uZWN0ZWRcIilcbiAgICAvLyBJbml0aWFsaXplIGRlZmF1bHQgdmFsdWVzXG4gICAgdGhpcy5hZHVsdENvdW50VmFsdWUgPSAxXG4gICAgdGhpcy5jaGlsZENvdW50VmFsdWUgPSAwXG4gICAgXG4gICAgLy8gR2V0IHByaWNlIGZyb20gZmlyc3QgcHJvZHVjdCBjYXJkIGlmIGF2YWlsYWJsZVxuICAgIGlmICh0aGlzLnByb2R1Y3RDYXJkVGFyZ2V0cyAmJiB0aGlzLnByb2R1Y3RDYXJkVGFyZ2V0cy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBwcmljZUVsZW1lbnQgPSB0aGlzLnByb2R1Y3RDYXJkVGFyZ2V0c1swXS5xdWVyeVNlbGVjdG9yKCcudGV4dC14bC5mb250LWJvbGQudGV4dC1cXFxcW1xcXFwjZmY1MzM2XFxcXF0nKVxuICAgICAgaWYgKHByaWNlRWxlbWVudCkge1xuICAgICAgICB0aGlzLnByaWNlUGVyUGVyc29uVmFsdWUgPSBwYXJzZUludChwcmljZUVsZW1lbnQudGV4dENvbnRlbnQgfHwgXCIxOTJcIilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucHJpY2VQZXJQZXJzb25WYWx1ZSA9IDE5MlxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnByaWNlUGVyUGVyc29uVmFsdWUgPSAxOTJcbiAgICB9XG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiRGVlcEJvb2tpbmcgZGlzY29ubmVjdGVkXCIpXG4gIH1cblxuICAvLyBcdTkwMDlcdTYyRTlcdTY1RTVcdTY3MUZcbiAgc2VsZWN0RGF0ZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50XG4gICAgY29uc3QgZGF0ZSA9IGJ1dHRvbi5kYXRhc2V0LmRhdGVcbiAgICBcbiAgICBpZiAoIWRhdGUpIHJldHVyblxuICAgIFxuICAgIHRoaXMuc2VsZWN0ZWREYXRlVmFsdWUgPSBkYXRlXG4gICAgY29uc29sZS5sb2coXCJTZWxlY3RlZCBkYXRlOlwiLCBkYXRlKVxuICAgIFxuICAgIC8vIFVwZGF0ZSBVSSB0byBzaG93IHNlbGVjdGVkIGRhdGVcbiAgICBjb25zdCBkYXRlQnV0dG9ucyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1hY3Rpb24qPVwic2VsZWN0RGF0ZVwiXScpXG4gICAgZGF0ZUJ1dHRvbnMuZm9yRWFjaCgoYnRuKSA9PiB7XG4gICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYmctWyNmZmVlYjhdJywgJ2JvcmRlci1bI2ZmZWViOF0nKVxuICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ2JnLVsjZjVmN2ZhXScpXG4gICAgfSlcbiAgICBcbiAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYmctWyNmNWY3ZmFdJylcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYmctWyNmZmVlYjhdJywgJ2JvcmRlci1bI2ZmZWViOF0nKVxuICB9XG5cbiAgLy8gXHU2MjUzXHU1RjAwXHU2NUU1XHU1Mzg2XHU1RjM5XHU3QTk3XG4gIG9wZW5DYWxlbmRhcihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc29sZS5sb2coXCJPcGVuaW5nIGNhbGVuZGFyIG1vZGFsXCIpXG4gICAgLy8gVE9ETzogSW1wbGVtZW50IGNhbGVuZGFyIG1vZGFsXG4gICAgLy8gRm9yIG5vdywganVzdCBzaG93IGEgdG9hc3QgbWVzc2FnZVxuICAgIHRoaXMuc2hvd1RvYXN0KFwiXHU2NUU1XHU1Mzg2XHU5MDA5XHU2MkU5XHU1MjlGXHU4MEZEXHU1MzczXHU1QzA2XHU0RTBBXHU3RUJGXCIpXG4gIH1cblxuICAvLyBcdTYyNTNcdTVGMDBcdTRFQkFcdTY1NzBcdTkwMDlcdTYyRTlcdTVGMzlcdTdBOTdcbiAgb3BlbkNvdW50TW9kYWwoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIFxuICAgIGlmICghdGhpcy5zZWxlY3RlZERhdGVWYWx1ZSkge1xuICAgICAgdGhpcy5zaG93VG9hc3QoXCJcdThCRjdcdTUxNDhcdTkwMDlcdTYyRTlcdTUxRkFcdTg4NENcdTY1RTVcdTY3MUZcIilcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZyhcIk9wZW5pbmcgY291bnQgbW9kYWxcIilcbiAgICBcbiAgICAvLyBDcmVhdGUgbW9kYWwgSFRNTFxuICAgICBcbiAgICBjb25zdCBtb2RhbEhUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwiZml4ZWQgaW5zZXQtMCBiZy1ibGFjay82MCB6LTQwXCIgXG4gICAgICAgICAgIGRhdGEtYWN0aW9uPVwiY2xpY2stPmRlZXAtYm9va2luZyNjbG9zZUNvdW50TW9kYWxcIiBcbiAgICAgICAgICAgZGF0YS1kZWVwLWJvb2tpbmctdGFyZ2V0PVwiY291bnRNb2RhbFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiYWJzb2x1dGUgYm90dG9tLTAgdy1mdWxsIG1heC13LVs0MTRweF0gbGVmdC0xLzIgLXRyYW5zbGF0ZS14LTEvMiBiZy13aGl0ZSB6LTUwIHJvdW5kZWQtdC0yeGwgcHgtNSBwdC01IHBiLTggYW5pbWF0ZS1zbGlkZS11cFwiIFxuICAgICAgICAgICAgIGRhdGEtYWN0aW9uPVwiY2xpY2stPmRlZXAtYm9va2luZyNzdG9wUHJvcGFnYXRpb25cIj5cbiAgICAgICAgICBcbiAgICAgICAgICA8IS0tIFx1NUYzOVx1N0E5N1x1NjgwN1x1OTg5OFx1NjgwRiAtLT5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG1iLTggcmVsYXRpdmVcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ3LWZ1bGwgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgPGgzIGNsYXNzPVwidGV4dC1sZyBmb250LWJvbGQgdGV4dC1ncmF5LTkwMFwiPlx1OTg4NFx1N0VBNlx1NEVCQVx1NjU3MDwvaDM+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJhYnNvbHV0ZSByaWdodC0wIHRvcC0wIHAtMVwiIGRhdGEtYWN0aW9uPVwiY2xpY2stPmRlZXAtYm9va2luZyNjbG9zZUNvdW50TW9kYWxcIj5cbiAgICAgICAgICAgICAgPHN2ZyB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgY2xhc3M9XCJ0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgICAgPHBhdGggZD1cIk0xOCA2TDYgMThNNiA2bDEyIDEyXCIgLz5cbiAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDwhLS0gXHU1MjE3XHU4ODY4XHU5ODc5XHVGRjFBXHU2MjEwXHU0RUJBIC0tPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbWItOFwiPlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtbGcgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMFwiPlx1NjIxMFx1NEVCQTwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1zbSB0ZXh0LWdyYXktNDAwIG10LTFcIj5cdTUzNTVcdTRFRjc6IFx1MDBBNSR7dGhpcy5wcmljZVBlclBlcnNvblZhbHVlfTwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTRcIj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInctNyBoLTcgcm91bmRlZC1mdWxsIGJvcmRlciBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0cmFuc2l0aW9uLWNvbG9ycyAke1xuICB0aGlzLmFkdWx0Q291bnRWYWx1ZSA8PSAxXG4gICAgPyAnYm9yZGVyLWdyYXktMzAwIHRleHQtZ3JheS0zMDAgY3Vyc29yLW5vdC1hbGxvd2VkJ1xuICAgIDogJ2JvcmRlci1ibHVlLWN1c3RvbSB0ZXh0LWJsdWUtY3VzdG9tIGhvdmVyOmJnLWJsdWUtNTAnXG59XCJcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhLWFjdGlvbj1cImNsaWNrLT5kZWVwLWJvb2tpbmcjZGVjcmVtZW50QWR1bHRcIlxuICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5hZHVsdENvdW50VmFsdWUgPD0gMSA/ICdkaXNhYmxlZCcgOiAnJ30+XG4gICAgICAgICAgICAgICAgPHN2ZyB3aWR0aD1cIjEyXCIgaGVpZ2h0PVwiMlwiIHZpZXdCb3g9XCIwIDAgMTIgMlwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICAgIDxyZWN0IHdpZHRoPVwiMTJcIiBoZWlnaHQ9XCIyXCIgcng9XCIxXCIvPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1sZyBmb250LW1lZGl1bSB3LTQgdGV4dC1jZW50ZXJcIiBkYXRhLWRlZXAtYm9va2luZy10YXJnZXQ9XCJhZHVsdENvdW50XCI+JHt0aGlzLmFkdWx0Q291bnRWYWx1ZX08L3NwYW4+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwidy03IGgtNyByb3VuZGVkLWZ1bGwgYm9yZGVyIGJvcmRlci1ibHVlLWN1c3RvbSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LWJsdWUtY3VzdG9tIGhvdmVyOmJnLWJsdWUtNTBcIlxuICAgICAgICAgICAgICAgICAgICAgIGRhdGEtYWN0aW9uPVwiY2xpY2stPmRlZXAtYm9va2luZyNpbmNyZW1lbnRBZHVsdFwiPlxuICAgICAgICAgICAgICAgIDxzdmcgd2lkdGg9XCIxMlwiIGhlaWdodD1cIjEyXCIgdmlld0JveD1cIjAgMCAxMiAxMlwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICAgIDxyZWN0IHk9XCI1XCIgd2lkdGg9XCIxMlwiIGhlaWdodD1cIjJcIiByeD1cIjFcIi8+XG4gICAgICAgICAgICAgICAgICA8cmVjdCB4PVwiNVwiIHdpZHRoPVwiMlwiIGhlaWdodD1cIjEyXCIgcng9XCIxXCIvPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPCEtLSBcdTUyMTdcdTg4NjhcdTk4NzlcdUZGMUFcdTUxM0ZcdTdBRTUgLS0+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtYi0xMFwiPlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtbGcgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMFwiPlx1NTEzRlx1N0FFNTwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1zbSB0ZXh0LWdyYXktNDAwIG10LTFcIj5cdTUzNTVcdTRFRjc6IFx1MDBBNSR7TWF0aC5yb3VuZCh0aGlzLnByaWNlUGVyUGVyc29uVmFsdWUgKiAwLjgpfTwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTRcIj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInctNyBoLTcgcm91bmRlZC1mdWxsIGJvcmRlciBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0cmFuc2l0aW9uLWNvbG9ycyAke1xuICB0aGlzLmNoaWxkQ291bnRWYWx1ZSA8PSAwXG4gICAgPyAnYm9yZGVyLWdyYXktMzAwIHRleHQtZ3JheS0zMDAgY3Vyc29yLW5vdC1hbGxvd2VkJ1xuICAgIDogJ2JvcmRlci1ibHVlLWN1c3RvbSB0ZXh0LWJsdWUtY3VzdG9tIGhvdmVyOmJnLWJsdWUtNTAnXG59XCJcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhLWFjdGlvbj1cImNsaWNrLT5kZWVwLWJvb2tpbmcjZGVjcmVtZW50Q2hpbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5jaGlsZENvdW50VmFsdWUgPD0gMCA/ICdkaXNhYmxlZCcgOiAnJ30+XG4gICAgICAgICAgICAgICAgPHN2ZyB3aWR0aD1cIjEyXCIgaGVpZ2h0PVwiMlwiIHZpZXdCb3g9XCIwIDAgMTIgMlwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICAgIDxyZWN0IHdpZHRoPVwiMTJcIiBoZWlnaHQ9XCIyXCIgcng9XCIxXCIvPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1sZyBmb250LW1lZGl1bSB3LTQgdGV4dC1jZW50ZXJcIiBkYXRhLWRlZXAtYm9va2luZy10YXJnZXQ9XCJjaGlsZENvdW50XCI+JHt0aGlzLmNoaWxkQ291bnRWYWx1ZX08L3NwYW4+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwidy03IGgtNyByb3VuZGVkLWZ1bGwgYm9yZGVyIGJvcmRlci1ibHVlLWN1c3RvbSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LWJsdWUtY3VzdG9tIGhvdmVyOmJnLWJsdWUtNTBcIlxuICAgICAgICAgICAgICAgICAgICAgIGRhdGEtYWN0aW9uPVwiY2xpY2stPmRlZXAtYm9va2luZyNpbmNyZW1lbnRDaGlsZFwiPlxuICAgICAgICAgICAgICAgIDxzdmcgd2lkdGg9XCIxMlwiIGhlaWdodD1cIjEyXCIgdmlld0JveD1cIjAgMCAxMiAxMlwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICAgIDxyZWN0IHk9XCI1XCIgd2lkdGg9XCIxMlwiIGhlaWdodD1cIjJcIiByeD1cIjFcIi8+XG4gICAgICAgICAgICAgICAgICA8cmVjdCB4PVwiNVwiIHdpZHRoPVwiMlwiIGhlaWdodD1cIjEyXCIgcng9XCIxXCIvPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPCEtLSBcdTVFOTVcdTkwRThcdTYzMDlcdTk0QUUgLS0+XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInctZnVsbCBiZy1bI0ZGNUE0M10gdGV4dC13aGl0ZSB0ZXh0LWxnIGZvbnQtYm9sZCBweS0zLjUgcm91bmRlZC1mdWxsIHNoYWRvdy1sZyBhY3RpdmU6b3BhY2l0eS05MCB0cmFuc2l0aW9uLW9wYWNpdHlcIlxuICAgICAgICAgICAgICAgICAgZGF0YS1hY3Rpb249XCJjbGljay0+ZGVlcC1ib29raW5nI2NvbmZpcm1Cb29raW5nXCI+XG4gICAgICAgICAgICBcdTdBQ0JcdTUzNzNcdTk4ODRcdTdFQTZcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICBcbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgXG4gICAgIFxuICAgIFxuICAgIHRoaXMuZWxlbWVudC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIG1vZGFsSFRNTClcbiAgfVxuXG4gIC8vIFx1NTE3M1x1OTVFRFx1NEVCQVx1NjU3MFx1OTAwOVx1NjJFOVx1NUYzOVx1N0E5N1xuICBjbG9zZUNvdW50TW9kYWwoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtZGVlcC1ib29raW5nLXRhcmdldD1cImNvdW50TW9kYWxcIl0nKVxuICAgIGlmIChtb2RhbCkge1xuICAgICAgbW9kYWwucmVtb3ZlKClcbiAgICB9XG4gIH1cblxuICAvLyBcdTk2M0JcdTZCNjJcdTRFOEJcdTRFRjZcdTUxOTJcdTZDRTFcbiAgc3RvcFByb3BhZ2F0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gIH1cblxuICAvLyBcdTU4OUVcdTUyQTBcdTYyMTBcdTRFQkFcdTY1NzBcdTkxQ0ZcbiAgaW5jcmVtZW50QWR1bHQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIHRoaXMuYWR1bHRDb3VudFZhbHVlKytcbiAgICB0aGlzLnVwZGF0ZUNvdW50RGlzcGxheSgpXG4gIH1cblxuICAvLyBcdTUxQ0ZcdTVDMTFcdTYyMTBcdTRFQkFcdTY1NzBcdTkxQ0ZcbiAgZGVjcmVtZW50QWR1bHQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlmICh0aGlzLmFkdWx0Q291bnRWYWx1ZSA+IDEpIHtcbiAgICAgIHRoaXMuYWR1bHRDb3VudFZhbHVlLS1cbiAgICAgIHRoaXMudXBkYXRlQ291bnREaXNwbGF5KClcbiAgICB9XG4gIH1cblxuICAvLyBcdTU4OUVcdTUyQTBcdTUxM0ZcdTdBRTVcdTY1NzBcdTkxQ0ZcbiAgaW5jcmVtZW50Q2hpbGQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIHRoaXMuY2hpbGRDb3VudFZhbHVlKytcbiAgICB0aGlzLnVwZGF0ZUNvdW50RGlzcGxheSgpXG4gIH1cblxuICAvLyBcdTUxQ0ZcdTVDMTFcdTUxM0ZcdTdBRTVcdTY1NzBcdTkxQ0ZcbiAgZGVjcmVtZW50Q2hpbGQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlmICh0aGlzLmNoaWxkQ291bnRWYWx1ZSA+IDApIHtcbiAgICAgIHRoaXMuY2hpbGRDb3VudFZhbHVlLS1cbiAgICAgIHRoaXMudXBkYXRlQ291bnREaXNwbGF5KClcbiAgICB9XG4gIH1cblxuICAvLyBcdTY2RjRcdTY1QjBcdTY1NzBcdTkxQ0ZcdTY2M0VcdTc5M0FcbiAgdXBkYXRlQ291bnREaXNwbGF5KCk6IHZvaWQge1xuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtZGVlcC1ib29raW5nLXRhcmdldD1cImNvdW50TW9kYWxcIl0nKVxuICAgIGlmICghbW9kYWwpIHJldHVyblxuXG4gICAgLy8gVXBkYXRlIGFkdWx0IGNvdW50XG4gICAgY29uc3QgYWR1bHRDb3VudEVsID0gbW9kYWwucXVlcnlTZWxlY3RvcignW2RhdGEtZGVlcC1ib29raW5nLXRhcmdldD1cImFkdWx0Q291bnRcIl0nKVxuICAgIGlmIChhZHVsdENvdW50RWwpIHtcbiAgICAgIGFkdWx0Q291bnRFbC50ZXh0Q29udGVudCA9IHRoaXMuYWR1bHRDb3VudFZhbHVlLnRvU3RyaW5nKClcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgY2hpbGQgY291bnRcbiAgICBjb25zdCBjaGlsZENvdW50RWwgPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1kZWVwLWJvb2tpbmctdGFyZ2V0PVwiY2hpbGRDb3VudFwiXScpXG4gICAgaWYgKGNoaWxkQ291bnRFbCkge1xuICAgICAgY2hpbGRDb3VudEVsLnRleHRDb250ZW50ID0gdGhpcy5jaGlsZENvdW50VmFsdWUudG9TdHJpbmcoKVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBidXR0b24gc3RhdGVzXG4gICAgY29uc3QgZGVjcmVtZW50QWR1bHRCdG4gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hY3Rpb24qPVwiZGVjcmVtZW50QWR1bHRcIl0nKSBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGlmIChkZWNyZW1lbnRBZHVsdEJ0bikge1xuICAgICAgaWYgKHRoaXMuYWR1bHRDb3VudFZhbHVlIDw9IDEpIHtcbiAgICAgICAgZGVjcmVtZW50QWR1bHRCdG4uZGlzYWJsZWQgPSB0cnVlXG4gICAgICAgIGRlY3JlbWVudEFkdWx0QnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1ibHVlLWN1c3RvbScsICd0ZXh0LWJsdWUtY3VzdG9tJywgJ2hvdmVyOmJnLWJsdWUtNTAnKVxuICAgICAgICBkZWNyZW1lbnRBZHVsdEJ0bi5jbGFzc0xpc3QuYWRkKCdib3JkZXItZ3JheS0zMDAnLCAndGV4dC1ncmF5LTMwMCcsICdjdXJzb3Itbm90LWFsbG93ZWQnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVjcmVtZW50QWR1bHRCdG4uZGlzYWJsZWQgPSBmYWxzZVxuICAgICAgICBkZWNyZW1lbnRBZHVsdEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItZ3JheS0zMDAnLCAndGV4dC1ncmF5LTMwMCcsICdjdXJzb3Itbm90LWFsbG93ZWQnKVxuICAgICAgICBkZWNyZW1lbnRBZHVsdEJ0bi5jbGFzc0xpc3QuYWRkKCdib3JkZXItYmx1ZS1jdXN0b20nLCAndGV4dC1ibHVlLWN1c3RvbScsICdob3ZlcjpiZy1ibHVlLTUwJylcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBkZWNyZW1lbnRDaGlsZEJ0biA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWFjdGlvbio9XCJkZWNyZW1lbnRDaGlsZFwiXScpIGFzIEhUTUxCdXR0b25FbGVtZW50XG4gICAgaWYgKGRlY3JlbWVudENoaWxkQnRuKSB7XG4gICAgICBpZiAodGhpcy5jaGlsZENvdW50VmFsdWUgPD0gMCkge1xuICAgICAgICBkZWNyZW1lbnRDaGlsZEJ0bi5kaXNhYmxlZCA9IHRydWVcbiAgICAgICAgZGVjcmVtZW50Q2hpbGRCdG4uY2xhc3NMaXN0LnJlbW92ZSgnYm9yZGVyLWJsdWUtY3VzdG9tJywgJ3RleHQtYmx1ZS1jdXN0b20nLCAnaG92ZXI6YmctYmx1ZS01MCcpXG4gICAgICAgIGRlY3JlbWVudENoaWxkQnRuLmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1ncmF5LTMwMCcsICd0ZXh0LWdyYXktMzAwJywgJ2N1cnNvci1ub3QtYWxsb3dlZCcpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWNyZW1lbnRDaGlsZEJ0bi5kaXNhYmxlZCA9IGZhbHNlXG4gICAgICAgIGRlY3JlbWVudENoaWxkQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1ncmF5LTMwMCcsICd0ZXh0LWdyYXktMzAwJywgJ2N1cnNvci1ub3QtYWxsb3dlZCcpXG4gICAgICAgIGRlY3JlbWVudENoaWxkQnRuLmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1ibHVlLWN1c3RvbScsICd0ZXh0LWJsdWUtY3VzdG9tJywgJ2hvdmVyOmJnLWJsdWUtNTAnKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1Nzg2RVx1OEJBNFx1OTg4NFx1N0VBNiAtIFx1OERGM1x1OEY2Q1x1NTIzMFx1NTg2Qlx1NTE5OVx1OEJBMlx1NTM1NVx1OTg3NVxuICBjb25maXJtQm9va2luZyhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgXG4gICAgLy8gXHU2Nzg0XHU1RUZBXHU4REYzXHU4RjZDVVJMXG4gICAgY29uc3QgdXJsID0gYC9kZWVwX3RyYXZlbF9ib29raW5ncy9uZXc/Z3VpZGVfaWQ9JHt0aGlzLmd1aWRlSWRWYWx1ZX0mZGF0ZT0ke3RoaXMuc2VsZWN0ZWREYXRlVmFsdWV9JmFkdWx0X2NvdW50PSR7dGhpcy5hZHVsdENvdW50VmFsdWV9JmNoaWxkX2NvdW50PSR7dGhpcy5jaGlsZENvdW50VmFsdWV9YFxuICAgIFxuICAgIGNvbnNvbGUubG9nKFwiQ29uZmlybWluZyBib29raW5nOlwiLCB7XG4gICAgICBndWlkZUlkOiB0aGlzLmd1aWRlSWRWYWx1ZSxcbiAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWREYXRlVmFsdWUsXG4gICAgICBhZHVsdENvdW50OiB0aGlzLmFkdWx0Q291bnRWYWx1ZSxcbiAgICAgIGNoaWxkQ291bnQ6IHRoaXMuY2hpbGRDb3VudFZhbHVlLFxuICAgICAgdXJsXG4gICAgfSlcbiAgICBcbiAgICAvLyBOYXZpZ2F0ZSB0byBib29raW5nIGZvcm0gcGFnZVxuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsXG4gIH1cblxuICAvLyBcdTY2M0VcdTc5M0FcdTYzRDBcdTc5M0FcdTZEODhcdTYwNkZcbiAgc2hvd1RvYXN0KG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xuICAgIC8vIFVzZSBleGlzdGluZyB0b2FzdCBmdW5jdGlvbmFsaXR5IGlmIGF2YWlsYWJsZVxuICAgIGlmICh0eXBlb2YgKHdpbmRvdyBhcyBhbnkpLnNob3dUb2FzdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgKHdpbmRvdyBhcyBhbnkpLnNob3dUb2FzdChtZXNzYWdlKVxuICAgIH0gZWxzZSB7XG4gICAgICBhbGVydChtZXNzYWdlKVxuICAgIH1cbiAgfVxufVxuXG4vLyBBZGQgY3VzdG9tIHN0eWxlc1xuY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpXG5zdHlsZS50ZXh0Q29udGVudCA9IGBcbiAgLmJvcmRlci1ibHVlLWN1c3RvbSB7XG4gICAgYm9yZGVyLWNvbG9yOiAjNEU2RUYyO1xuICB9XG4gIC50ZXh0LWJsdWUtY3VzdG9tIHtcbiAgICBjb2xvcjogIzRFNkVGMjtcbiAgfVxuICBAa2V5ZnJhbWVzIHNsaWRlLXVwIHtcbiAgICBmcm9tIHtcbiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgxMDAlKTtcbiAgICB9XG4gICAgdG8ge1xuICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApO1xuICAgIH1cbiAgfVxuICAuYW5pbWF0ZS1zbGlkZS11cCB7XG4gICAgYW5pbWF0aW9uOiBzbGlkZS11cCAwLjNzIGVhc2Utb3V0O1xuICB9XG5gXG5kb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1widG90YWxQcmljZVwiLCBcImRlbGl2ZXJ5QWRkcmVzc1wiXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgdG90YWxQcmljZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkZWxpdmVyeUFkZHJlc3NUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiVmlzYU9yZGVyIGNvbnRyb2xsZXIgY29ubmVjdGVkXCIpXG4gIH1cblxuICBhc3luYyBzdWJtaXRPcmRlcihldmVudDogRXZlbnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgXG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIFxuICAgIC8vIEdldCBvcmRlciBkYXRhIGZyb20gYnV0dG9uIGRhdGFzZXRcbiAgICBjb25zdCB2aXNhUHJvZHVjdElkID0gYnV0dG9uLmRhdGFzZXQudmlzYVByb2R1Y3RJZCB8fCAnJ1xuICAgIGNvbnN0IHRyYXZlbGVyQ291bnQgPSBwYXJzZUludChidXR0b24uZGF0YXNldC50cmF2ZWxlckNvdW50IHx8ICcxJylcbiAgICBjb25zdCB0b3RhbFByaWNlID0gcGFyc2VGbG9hdChidXR0b24uZGF0YXNldC50b3RhbFByaWNlIHx8ICcwJylcbiAgICBjb25zdCBpbnN1cmFuY2VUeXBlID0gYnV0dG9uLmRhdGFzZXQuaW5zdXJhbmNlVHlwZSB8fCAnbm9uZSdcbiAgICBjb25zdCBpbnN1cmFuY2VQcmljZSA9IHBhcnNlRmxvYXQoYnV0dG9uLmRhdGFzZXQuaW5zdXJhbmNlUHJpY2UgfHwgJzAnKVxuICAgIGNvbnN0IGNvbnRhY3ROYW1lID0gYnV0dG9uLmRhdGFzZXQuY29udGFjdE5hbWUgfHwgJydcbiAgICBjb25zdCBjb250YWN0UGhvbmUgPSBidXR0b24uZGF0YXNldC5jb250YWN0UGhvbmUgfHwgJydcbiAgICBjb25zdCBkZWxpdmVyeUFkZHJlc3MgPSBidXR0b24uZGF0YXNldC5kZWxpdmVyeUFkZHJlc3MgfHwgJydcblxuICAgIC8vIEJhc2ljIHZhbGlkYXRpb25cbiAgICBpZiAoIWNvbnRhY3ROYW1lIHx8IGNvbnRhY3ROYW1lLnRyaW0oKSA9PT0gJycpIHtcbiAgICAgIGFsZXJ0KCdcdThCRjdcdTU4NkJcdTUxOTlcdTgwNTRcdTdDRkJcdTRFQkFcdTU5RDNcdTU0MEQnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIGlmICghY29udGFjdFBob25lIHx8IGNvbnRhY3RQaG9uZS50cmltKCkgPT09ICcnKSB7XG4gICAgICBhbGVydCgnXHU4QkY3XHU1ODZCXHU1MTk5XHU4MDU0XHU3Q0ZCXHU0RUJBXHU3NTM1XHU4QkREJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICBpZiAoIWRlbGl2ZXJ5QWRkcmVzcyB8fCBkZWxpdmVyeUFkZHJlc3MudHJpbSgpID09PSAnJykge1xuICAgICAgYWxlcnQoJ1x1OEJGN1x1NTg2Qlx1NTE5OVx1OTBBRVx1NUJDNFx1NTczMFx1NTc0MCcpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBQcmVwYXJlIG9yZGVyIGRhdGEgKHNpbXBsaWZpZWQgLSBubyB0cmF2ZWxlcnMgZm9yIG5vdylcbiAgICBjb25zdCBvcmRlckRhdGEgPSB7XG4gICAgICB2aXNhX29yZGVyOiB7XG4gICAgICAgIHZpc2FfcHJvZHVjdF9pZDogdmlzYVByb2R1Y3RJZCxcbiAgICAgICAgdHJhdmVsZXJfY291bnQ6IHRyYXZlbGVyQ291bnQsXG4gICAgICAgIGluc3VyYW5jZV90eXBlOiBpbnN1cmFuY2VUeXBlLFxuICAgICAgICBpbnN1cmFuY2VfcHJpY2U6IGluc3VyYW5jZVByaWNlLFxuICAgICAgICB0b3RhbF9wcmljZTogdG90YWxQcmljZSxcbiAgICAgICAgY29udGFjdF9uYW1lOiBjb250YWN0TmFtZS50cmltKCksXG4gICAgICAgIGNvbnRhY3RfcGhvbmU6IGNvbnRhY3RQaG9uZS50cmltKCksXG4gICAgICAgIGRlbGl2ZXJ5X2FkZHJlc3M6IGRlbGl2ZXJ5QWRkcmVzcy50cmltKClcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBEaXNhYmxlIGJ1dHRvbiBkdXJpbmcgc3VibWlzc2lvblxuICAgIGJ1dHRvbi5kaXNhYmxlZCA9IHRydWVcbiAgICBidXR0b24udGV4dENvbnRlbnQgPSAnXHU1MjFCXHU1RUZBXHU0RTJELi4uJ1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIENyZWF0ZSBvcmRlciB2aWEgQUpBWFxuICAgICAgY29uc3QgY3NyZlRva2VuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MTWV0YUVsZW1lbnQ+KCdtZXRhW25hbWU9XCJjc3JmLXRva2VuXCJdJyk/LmNvbnRlbnQgfHwgJydcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy92aXNhX29yZGVycycsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICdYLUNTUkYtVG9rZW4nOiBjc3JmVG9rZW5cbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkob3JkZXJEYXRhKVxuICAgICAgfSlcblxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuXG4gICAgICBpZiAocmVzcG9uc2Uub2sgJiYgZGF0YS5zdWNjZXNzKSB7XG4gICAgICAgIC8vIE9yZGVyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5LCB0cmlnZ2VyIHBheW1lbnQgbW9kYWxcbiAgICAgICAgdGhpcy50cmlnZ2VyUGF5bWVudE1vZGFsKHRvdGFsUHJpY2UudG9TdHJpbmcoKSwgZGF0YS5wYXltZW50X3VybCwgZGF0YS5zdWNjZXNzX3VybClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLm1lc3NhZ2UgfHwgJ1x1NTIxQlx1NUVGQVx1OEJBMlx1NTM1NVx1NTkzMVx1OEQyNScpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIG9yZGVyOicsIGVycm9yKVxuICAgICAgY29uc3QgbWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1x1NTIxQlx1NUVGQVx1OEJBMlx1NTM1NVx1NTkzMVx1OEQyNVx1RkYwQ1x1OEJGN1x1OTFDRFx1OEJENSdcbiAgICAgIGFsZXJ0KG1lc3NhZ2UpXG4gICAgICBidXR0b24uZGlzYWJsZWQgPSBmYWxzZVxuICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ1x1N0FDQlx1NTIzQlx1NjUyRlx1NEVEOCdcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHRyaWdnZXJQYXltZW50TW9kYWwoYW1vdW50OiBzdHJpbmcsIHBheW1lbnRVcmw6IHN0cmluZywgc3VjY2Vzc1VybDogc3RyaW5nKTogdm9pZCB7XG4gICAgLy8gRmluZCBwYXltZW50LWNvbmZpcm1hdGlvbiBjb250cm9sbGVyIGFuZCB0cmlnZ2VyIGl0XG4gICAgY29uc3QgcGF5bWVudEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jb250cm9sbGVyKj1cInBheW1lbnQtY29uZmlybWF0aW9uXCJdJykgYXMgSFRNTEVsZW1lbnRcblxuICAgIGlmICghcGF5bWVudEVsZW1lbnQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1BheW1lbnQgY29uZmlybWF0aW9uIGNvbnRyb2xsZXIgbm90IGZvdW5kJylcbiAgICAgIGFsZXJ0KCdcdTY1MkZcdTRFRDhcdTdDRkJcdTdFREZcdTY3MkFcdTUyQTBcdThGN0RcdUZGMENcdThCRjdcdTUyMzdcdTY1QjBcdTk4NzVcdTk3NjJcdTkxQ0RcdThCRDUnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gR2V0IHRoZSBTdGltdWx1cyBjb250cm9sbGVyIGluc3RhbmNlXG4gICAgY29uc3QgYXBwID0gKHdpbmRvdyBhcyBhbnkpLlN0aW11bHVzXG4gICAgaWYgKCFhcHApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N0aW11bHVzIG5vdCBmb3VuZCcpXG4gICAgICBhbGVydCgnXHU3Q0ZCXHU3RURGXHU5NTE5XHU4QkVGXHVGRjBDXHU4QkY3XHU1MjM3XHU2NUIwXHU5ODc1XHU5NzYyXHU5MUNEXHU4QkQ1JylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHBheW1lbnRDb250cm9sbGVyID0gYXBwLmdldENvbnRyb2xsZXJGb3JFbGVtZW50QW5kSWRlbnRpZmllcihwYXltZW50RWxlbWVudCwgJ3BheW1lbnQtY29uZmlybWF0aW9uJylcblxuICAgIGlmIChwYXltZW50Q29udHJvbGxlcikge1xuICAgICAgLy8gU2V0IHZhbHVlc1xuICAgICAgcGF5bWVudENvbnRyb2xsZXIuYW1vdW50VmFsdWUgPSBhbW91bnRcbiAgICAgIC8vIEdldCBjdXJyZW50IHVzZXIgZW1haWwgZnJvbSBtZXRhIHRhZyBvciBlbGVtZW50XG4gICAgICBjb25zdCB1c2VyRW1haWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxNZXRhRWxlbWVudD4oJ21ldGFbbmFtZT1cInVzZXItZW1haWxcIl0nKT8uY29udGVudCB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtdXNlci1lbWFpbF0nKT8uZ2V0QXR0cmlidXRlKCdkYXRhLXVzZXItZW1haWwnKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAnZGVtb0BleGFtcGxlLmNvbSdcbiAgICAgIHBheW1lbnRDb250cm9sbGVyLnVzZXJFbWFpbFZhbHVlID0gdXNlckVtYWlsXG4gICAgICBwYXltZW50Q29udHJvbGxlci5wYXltZW50VXJsVmFsdWUgPSBwYXltZW50VXJsXG4gICAgICBwYXltZW50Q29udHJvbGxlci5zdWNjZXNzVXJsVmFsdWUgPSBzdWNjZXNzVXJsXG5cbiAgICAgIC8vIFNob3cgcGFzc3dvcmQgbW9kYWxcbiAgICAgIHBheW1lbnRDb250cm9sbGVyLnNob3dQYXNzd29yZE1vZGFsKClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcignUGF5bWVudCBjb250cm9sbGVyIG5vdCBpbml0aWFsaXplZCcpXG4gICAgICBhbGVydCgnXHU2NTJGXHU0RUQ4XHU3Q0ZCXHU3RURGXHU2NzJBXHU1MjFEXHU1OUNCXHU1MzE2XHVGRjBDXHU4QkY3XHU1MjM3XHU2NUIwXHU5ODc1XHU5NzYyXHU5MUNEXHU4QkQ1JylcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcInJlZ2lvbkJ1dHRvblwiLCBcInJlZ2lvbkNvbnRlbnRcIiwgXCJ0aWNrZXRUeXBlQnV0dG9uXCIsIFwidGlja2V0VHlwZUNvbnRlbnRcIl1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHJlZ2lvbkJ1dHRvblRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSByZWdpb25Db250ZW50VGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBkZWNsYXJlIHJlYWRvbmx5IHRpY2tldFR5cGVCdXR0b25UYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgdGlja2V0VHlwZUNvbnRlbnRUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUmVnaW9uQnV0dG9uVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzVGlja2V0VHlwZUJ1dHRvblRhcmdldDogYm9vbGVhblxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJBYnJvYWRSZWdpb25TZWxlY3RvciBjb25uZWN0ZWRcIilcbiAgfVxuXG4gIHNlbGVjdFJlZ2lvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjbGlja2VkQnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHJlZ2lvbiA9IGNsaWNrZWRCdXR0b24uZGF0YXNldC5yZWdpb25cblxuICAgIC8vIFVwZGF0ZSBidXR0b24gc3RhdGVzXG4gICAgaWYgKHRoaXMuaGFzUmVnaW9uQnV0dG9uVGFyZ2V0KSB7XG4gICAgICB0aGlzLnJlZ2lvbkJ1dHRvblRhcmdldHMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwidGV4dC15ZWxsb3ctNjAwXCIsIFwiZm9udC1ib2xkXCIsIFwiYm9yZGVyLWItMlwiLCBcImJvcmRlci15ZWxsb3ctNjAwXCIpXG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwidGV4dC1ncmF5LTUwMFwiKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBjbGlja2VkQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJ0ZXh0LWdyYXktNTAwXCIpXG4gICAgY2xpY2tlZEJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwidGV4dC15ZWxsb3ctNjAwXCIsIFwiZm9udC1ib2xkXCIsIFwiYm9yZGVyLWItMlwiLCBcImJvcmRlci15ZWxsb3ctNjAwXCIpXG5cbiAgICAvLyBVcGRhdGUgY29udGVudCB2aXNpYmlsaXR5XG4gICAgdGhpcy5yZWdpb25Db250ZW50VGFyZ2V0cy5mb3JFYWNoKChjb250ZW50KSA9PiB7XG4gICAgICBpZiAoY29udGVudC5kYXRhc2V0LnJlZ2lvbiA9PT0gcmVnaW9uKSB7XG4gICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGVudC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHNlbGVjdFRpY2tldFR5cGUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY2xpY2tlZEJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCB0aWNrZXRUeXBlID0gY2xpY2tlZEJ1dHRvbi5kYXRhc2V0LnRpY2tldFR5cGVcblxuICAgIC8vIFVwZGF0ZSBidXR0b24gc3RhdGVzXG4gICAgaWYgKHRoaXMuaGFzVGlja2V0VHlwZUJ1dHRvblRhcmdldCkge1xuICAgICAgdGhpcy50aWNrZXRUeXBlQnV0dG9uVGFyZ2V0cy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJiZy15ZWxsb3ctNTAwXCIsIFwidGV4dC13aGl0ZVwiKVxuICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZChcImJnLWdyYXktMTAwXCIsIFwidGV4dC1ncmF5LTcwMFwiKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBjbGlja2VkQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1ncmF5LTEwMFwiLCBcInRleHQtZ3JheS03MDBcIilcbiAgICBjbGlja2VkQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJiZy15ZWxsb3ctNTAwXCIsIFwidGV4dC13aGl0ZVwiKVxuXG4gICAgLy8gVXBkYXRlIGNvbnRlbnQgdmlzaWJpbGl0eVxuICAgIHRoaXMudGlja2V0VHlwZUNvbnRlbnRUYXJnZXRzLmZvckVhY2goKGNvbnRlbnQpID0+IHtcbiAgICAgIGlmIChjb250ZW50LmRhdGFzZXQudGlja2V0VHlwZSA9PT0gdGlja2V0VHlwZSkge1xuICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBzd2FwU3RhdGlvbnMoKTogdm9pZCB7XG4gICAgY29uc3Qgb3JpZ2luU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW25hbWU9XCJvcmlnaW5cIl0nKSBhcyBIVE1MU2VsZWN0RWxlbWVudFxuICAgIGNvbnN0IGRlc3RpbmF0aW9uU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW25hbWU9XCJkZXN0aW5hdGlvblwiXScpIGFzIEhUTUxTZWxlY3RFbGVtZW50XG5cbiAgICBpZiAob3JpZ2luU2VsZWN0ICYmIGRlc3RpbmF0aW9uU2VsZWN0KSB7XG4gICAgICBjb25zdCB0ZW1wID0gb3JpZ2luU2VsZWN0LnZhbHVlXG4gICAgICBvcmlnaW5TZWxlY3QudmFsdWUgPSBkZXN0aW5hdGlvblNlbGVjdC52YWx1ZVxuICAgICAgZGVzdGluYXRpb25TZWxlY3QudmFsdWUgPSB0ZW1wXG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJtb2RhbFwiLCBcImRhdGVCdXR0b25cIl1cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBjdXJyZW50RGF0ZTogU3RyaW5nXG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IG1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRhdGVCdXR0b25UYXJnZXRzOiBIVE1MQnV0dG9uRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgY3VycmVudERhdGVWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkFicm9hZERhdGVQaWNrZXIgY29ubmVjdGVkXCIpXG4gICAgXG4gICAgLy8gTGlzdGVuIGZvciBvcGVuIGRhdGUgcGlja2VyIGV2ZW50XG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Ficm9hZC10aWNrZXQtc2VhcmNoOm9wZW4tZGF0ZS1waWNrZXInLCAoKSA9PiB7XG4gICAgICB0aGlzLm9wZW5Nb2RhbCgpXG4gICAgfSlcbiAgICBcbiAgICAvLyBVcGRhdGUgcGFzdCBkYXRlcyBiYXNlZCBvbiBjbGllbnQgdGltZXpvbmVcbiAgICB0aGlzLnVwZGF0ZVBhc3REYXRlcygpXG4gIH1cblxuICBvcGVuTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nXG4gIH1cblxuICBjbG9zZU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJ1xuICB9XG5cbiAgc2VsZWN0RGF0ZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgZGF0ZVN0ciA9IHRhcmdldC5kYXRhc2V0LmRhdGVcblxuICAgIGlmIChkYXRlU3RyKSB7XG4gICAgICAvLyBDaGVjayBpZiBkYXRlIGlzIG5vdCBpbiB0aGUgcGFzdFxuICAgICAgY29uc3Qgc2VsZWN0ZWREYXRlID0gbmV3IERhdGUoYCR7ZGF0ZVN0cn1UMDA6MDA6MDBgKVxuICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXG4gICAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICAgICAgc2VsZWN0ZWREYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgICBcbiAgICAgIGlmIChzZWxlY3RlZERhdGUgPCB0b2RheSkge1xuICAgICAgICByZXR1cm4gLy8gRG9uJ3Qgc2VsZWN0IHBhc3QgZGF0ZXNcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRmluZCB0aGUgYWJyb2FkLXRpY2tldC1zZWFyY2ggY29udHJvbGxlciBhbmQgY2FsbCBpdHMgdXBkYXRlRGF0ZSBtZXRob2RcbiAgICAgIGNvbnN0IHNlYXJjaENvbnRyb2xsZXIgPSB0aGlzLmFwcGxpY2F0aW9uLmdldENvbnRyb2xsZXJGb3JFbGVtZW50QW5kSWRlbnRpZmllcihcbiAgICAgICAgdGhpcy5lbGVtZW50LFxuICAgICAgICAnYWJyb2FkLXRpY2tldC1zZWFyY2gnXG4gICAgICApXG4gICAgICBcbiAgICAgIGlmIChzZWFyY2hDb250cm9sbGVyICYmICd1cGRhdGVEYXRlJyBpbiBzZWFyY2hDb250cm9sbGVyKSB7XG4gICAgICAgIChzZWFyY2hDb250cm9sbGVyIGFzIGFueSkudXBkYXRlRGF0ZShkYXRlU3RyKVxuICAgICAgfVxuICAgICAgXG4gICAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICAgIH1cbiAgfVxuXG4gIG9wZW5DYWxlbmRhcigpOiB2b2lkIHtcbiAgICB0aGlzLm9wZW5Nb2RhbCgpXG4gIH1cbiAgXG4gIC8vIFVwZGF0ZSBwYXN0IGRhdGVzIHRvIGJlIGRpc2FibGVkXG4gIHByaXZhdGUgdXBkYXRlUGFzdERhdGVzKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5kYXRlQnV0dG9uVGFyZ2V0cykgcmV0dXJuXG4gICAgXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXG4gICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgICBcbiAgICB0aGlzLmRhdGVCdXR0b25UYXJnZXRzLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgIGNvbnN0IGRhdGVTdHIgPSBidXR0b24uZGF0YXNldC5kYXRlXG4gICAgICBpZiAoIWRhdGVTdHIpIHJldHVyblxuICAgICAgXG4gICAgICBjb25zdCBidXR0b25EYXRlID0gbmV3IERhdGUoYCR7ZGF0ZVN0cn1UMDA6MDA6MDBgKVxuICAgICAgYnV0dG9uRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICAgICAgXG4gICAgICBpZiAoYnV0dG9uRGF0ZSA8IHRvZGF5KSB7XG4gICAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IHRydWVcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktNDAnLCAnY3Vyc29yLW5vdC1hbGxvd2VkJylcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2hvdmVyOmJnLWJsdWUtNTAnKVxuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcInR5cGVcIl1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHR5cGVUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzVHlwZVRhcmdldDogYm9vbGVhblxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJBYnJvYWRQYXNzZW5nZXJTZWxlY3RvciBjb25uZWN0ZWRcIilcbiAgfVxuXG4gIHNlbGVjdChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjbGlja2VkRWxlbWVudCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBzZWxlY3RlZFR5cGUgPSBjbGlja2VkRWxlbWVudC5kYXRhc2V0LmFicm9hZFBhc3NlbmdlclNlbGVjdG9yVHlwZVBhcmFtXG5cbiAgICAvLyBSZW1vdmUgc2VsZWN0ZWQgc3RhdGUgZnJvbSBhbGwgdHlwZSBlbGVtZW50c1xuICAgIGlmICh0aGlzLmhhc1R5cGVUYXJnZXQpIHtcbiAgICAgIHRoaXMudHlwZVRhcmdldHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1bI0ZGRkJGMF1cIiwgXCJib3JkZXJcIiwgXCJib3JkZXItWyNGRkU1QjVdXCIpXG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImJnLWdyYXktMTAwXCIpXG4gICAgICAgIFxuICAgICAgICAvLyBSZW1vdmUgY2hlY2ttYXJrXG4gICAgICAgIGNvbnN0IGNoZWNrbWFyayA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5hYnNvbHV0ZVwiKVxuICAgICAgICBpZiAoY2hlY2ttYXJrKSB7XG4gICAgICAgICAgY2hlY2ttYXJrLnJlbW92ZSgpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gQWRkIHNlbGVjdGVkIHN0YXRlIHRvIGNsaWNrZWQgZWxlbWVudFxuICAgIGNsaWNrZWRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1ncmF5LTEwMFwiKVxuICAgIGNsaWNrZWRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJiZy1bI0ZGRkJGMF1cIiwgXCJib3JkZXJcIiwgXCJib3JkZXItWyNGRkU1QjVdXCIpXG4gICAgXG4gICAgLy8gQWRkIGNoZWNrbWFya1xuICAgIGNvbnN0IGNoZWNrbWFya0hUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwiYWJzb2x1dGUgYm90dG9tLTAgcmlnaHQtMCB3LTMgaC0zIGJnLVsjRkZDQzAwXSByb3VuZGVkLXRsLWxnIHJvdW5kZWQtYnItbGcgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgPHN2ZyBjbGFzcz1cInctMiBoLTIgdGV4dC13aGl0ZVwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICAgICAgICAgIDxwYXRoIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZS13aWR0aD1cIjRcIiBkPVwiTTUgMTNsNCA0TDE5IDdcIj48L3BhdGg+XG4gICAgICAgIDwvc3ZnPlxuICAgICAgPC9kaXY+XG4gICAgYFxuICAgIGNsaWNrZWRFbGVtZW50Lmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBjaGVja21hcmtIVE1MKVxuXG4gICAgLy8gVXBkYXRlIHRoZSBVUkwgcGFyYW1ldGVycyB0byBpbmNsdWRlIHRoZSBzZWxlY3RlZCBwYXNzZW5nZXIgdHlwZVxuICAgIGlmIChzZWxlY3RlZFR5cGUpIHtcbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpXG4gICAgICBjb25zdCB0aWNrZXRJZCA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwiYWJyb2FkX3RpY2tldF9pZFwiKVxuICAgICAgY29uc3Qgc2VhdENhdGVnb3J5ID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJzZWF0X2NhdGVnb3J5XCIpXG4gICAgICBcbiAgICAgIGlmICh0aWNrZXRJZCAmJiBzZWF0Q2F0ZWdvcnkpIHtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBib29raW5nIGJ1dHRvbiBsaW5rc1xuICAgICAgICBjb25zdCBib29raW5nQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2FbaHJlZio9XCJuZXdfYWJyb2FkX3RpY2tldF9vcmRlclwiXScpXG4gICAgICAgIGJvb2tpbmdCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgICAgICAgIGNvbnN0IGhyZWYgPSBidXR0b24uZ2V0QXR0cmlidXRlKFwiaHJlZlwiKVxuICAgICAgICAgIGlmIChocmVmKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdVcmwgPSBuZXcgVVJMKGhyZWYsIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4pXG4gICAgICAgICAgICBuZXdVcmwuc2VhcmNoUGFyYW1zLnNldChcInBhc3Nlbmdlcl90eXBlXCIsIHNlbGVjdGVkVHlwZSlcbiAgICAgICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIG5ld1VybC50b1N0cmluZygpKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcIm1vZGFsXCIsIFwibmFtZUlucHV0XCIsIFwicGhvbmVJbnB1dFwiLCBcImVtYWlsSW5wdXRcIl1cblxuICBkZWNsYXJlIHJlYWRvbmx5IG1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IG5hbWVJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHBob25lSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBlbWFpbElucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzTmFtZUlucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUGhvbmVJbnB1dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0VtYWlsSW5wdXRUYXJnZXQ6IGJvb2xlYW5cblxuICBhc3luYyBzdWJtaXRPcmRlcihldmVudDogRXZlbnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgXG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGNvbnN0IGFicm9hZFRpY2tldElkID0gYnV0dG9uLmRhdGFzZXQuYWJyb2FkVGlja2V0SWRcbiAgICBjb25zdCB0b3RhbFByaWNlID0gYnV0dG9uLmRhdGFzZXQudG90YWxQcmljZVxuICAgIFxuICAgIC8vIFZhbGlkYXRlIGZvcm0gaW5wdXRzXG4gICAgaWYgKCF0aGlzLnZhbGlkYXRlRm9ybSgpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gR2V0IGZvcm0gZGF0YSBmcm9tIGlucHV0IGZpZWxkc1xuICAgIGNvbnN0IHBhc3NlbmdlclR5cGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXNzZW5nZXJfdHlwZScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBzZWF0Q2F0ZWdvcnlJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWF0X2NhdGVnb3J5JykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IG5vdGVzSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbm90ZXMnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgXG4gICAgY29uc3QgZm9ybURhdGEgPSB7XG4gICAgICBhYnJvYWRfdGlja2V0X29yZGVyOiB7XG4gICAgICAgIGFicm9hZF90aWNrZXRfaWQ6IGFicm9hZFRpY2tldElkLFxuICAgICAgICBwYXNzZW5nZXJfbmFtZTogdGhpcy5uYW1lSW5wdXRUYXJnZXQudmFsdWUsXG4gICAgICAgIGNvbnRhY3RfcGhvbmU6IHRoaXMucGhvbmVJbnB1dFRhcmdldC52YWx1ZSxcbiAgICAgICAgY29udGFjdF9lbWFpbDogdGhpcy5lbWFpbElucHV0VGFyZ2V0LnZhbHVlLFxuICAgICAgICBwYXNzZW5nZXJfdHlwZTogcGFzc2VuZ2VyVHlwZUlucHV0Py52YWx1ZSB8fCAnJyxcbiAgICAgICAgc2VhdF9jYXRlZ29yeTogc2VhdENhdGVnb3J5SW5wdXQ/LnZhbHVlIHx8ICcnLFxuICAgICAgICB0b3RhbF9wcmljZTogdG90YWxQcmljZSxcbiAgICAgICAgbm90ZXM6IG5vdGVzSW5wdXQ/LnZhbHVlIHx8ICcnXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIERpc2FibGUgYnV0dG9uIGR1cmluZyBzdWJtaXNzaW9uXG4gICAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZVxuICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdcdTUyMUJcdTVFRkFcdTRFMkQuLi4nXG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNzcmZUb2tlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTE1ldGFFbGVtZW50PignbWV0YVtuYW1lPVwiY3NyZi10b2tlblwiXScpPy5jb250ZW50IHx8ICcnXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYWJyb2FkX3RpY2tldF9vcmRlcnMuanNvbicsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ1gtQ1NSRi1Ub2tlbic6IGNzcmZUb2tlblxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShmb3JtRGF0YSlcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLm9rICYmIGRhdGEuc3VjY2Vzcykge1xuICAgICAgICAvLyBPcmRlciBjcmVhdGVkIHN1Y2Nlc3NmdWxseSwgdHJpZ2dlciBwYXltZW50IG1vZGFsXG4gICAgICAgIHRoaXMudHJpZ2dlclBheW1lbnRNb2RhbCh0b3RhbFByaWNlIHx8ICcwJywgZGF0YS5wYXltZW50X3VybCwgZGF0YS5zdWNjZXNzX3VybClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLm1lc3NhZ2UgfHwgJ1x1NTIxQlx1NUVGQVx1OEJBMlx1NTM1NVx1NTkzMVx1OEQyNScpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIG9yZGVyOicsIGVycm9yKVxuICAgICAgY29uc3QgbWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1x1NTIxQlx1NUVGQVx1OEJBMlx1NTM1NVx1NTkzMVx1OEQyNVx1RkYwQ1x1OEJGN1x1OTFDRFx1OEJENSdcbiAgICAgIGFsZXJ0KG1lc3NhZ2UpXG4gICAgICBidXR0b24uZGlzYWJsZWQgPSBmYWxzZVxuICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ1x1N0FDQlx1NTM3M1x1OTg4NFx1OEJBMidcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHZhbGlkYXRlRm9ybSgpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuaGFzTmFtZUlucHV0VGFyZ2V0IHx8ICF0aGlzLm5hbWVJbnB1dFRhcmdldC52YWx1ZS50cmltKCkpIHtcbiAgICAgIGFsZXJ0KCdcdThCRjdcdThGOTNcdTUxNjVcdTU5RDNcdTU0MEQnKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIFxuICAgIGlmICghdGhpcy5oYXNQaG9uZUlucHV0VGFyZ2V0IHx8ICF0aGlzLnBob25lSW5wdXRUYXJnZXQudmFsdWUudHJpbSgpKSB7XG4gICAgICBhbGVydCgnXHU4QkY3XHU4RjkzXHU1MTY1XHU2MjRCXHU2NzNBXHU1M0Y3JylcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBcbiAgICBpZiAoIXRoaXMuaGFzRW1haWxJbnB1dFRhcmdldCB8fCAhdGhpcy5lbWFpbElucHV0VGFyZ2V0LnZhbHVlLnRyaW0oKSkge1xuICAgICAgYWxlcnQoJ1x1OEJGN1x1OEY5M1x1NTE2NVx1OTBBRVx1N0JCMScpXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgXG4gICAgLy8gRW1haWwgZm9ybWF0IHZhbGlkYXRpb25cbiAgICBjb25zdCBlbWFpbFJlZ2V4ID0gL15bXlxcc0BdK0BbXlxcc0BdK1xcLlteXFxzQF0rJC9cbiAgICBpZiAoIWVtYWlsUmVnZXgudGVzdCh0aGlzLmVtYWlsSW5wdXRUYXJnZXQudmFsdWUpKSB7XG4gICAgICBhbGVydCgnXHU4QkY3XHU4RjkzXHU1MTY1XHU2NzA5XHU2NTQ4XHU3Njg0XHU5MEFFXHU3QkIxXHU1NzMwXHU1NzQwJylcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgcHJpdmF0ZSB0cmlnZ2VyUGF5bWVudE1vZGFsKGFtb3VudDogc3RyaW5nLCBwYXltZW50VXJsOiBzdHJpbmcsIHN1Y2Nlc3NVcmw6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IHBheW1lbnRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtY29udHJvbGxlcio9XCJwYXltZW50LWNvbmZpcm1hdGlvblwiXScpIGFzIEhUTUxFbGVtZW50XG4gICAgXG4gICAgaWYgKCFwYXltZW50RWxlbWVudCkge1xuICAgICAgY29uc29sZS5lcnJvcignUGF5bWVudCBjb25maXJtYXRpb24gY29udHJvbGxlciBub3QgZm91bmQnKVxuICAgICAgYWxlcnQoJ1x1NjUyRlx1NEVEOFx1N0NGQlx1N0VERlx1NjcyQVx1NTJBMFx1OEY3RFx1RkYwQ1x1OEJGN1x1NTIzN1x1NjVCMFx1OTg3NVx1OTc2Mlx1OTFDRFx1OEJENScpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgY29uc3QgYXBwID0gKHdpbmRvdyBhcyBhbnkpLlN0aW11bHVzXG4gICAgaWYgKCFhcHApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N0aW11bHVzIG5vdCBmb3VuZCcpXG4gICAgICBhbGVydCgnXHU3Q0ZCXHU3RURGXHU5NTE5XHU4QkVGXHVGRjBDXHU4QkY3XHU1MjM3XHU2NUIwXHU5ODc1XHU5NzYyXHU5MUNEXHU4QkQ1JylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICBjb25zdCBwYXltZW50Q29udHJvbGxlciA9IGFwcC5nZXRDb250cm9sbGVyRm9yRWxlbWVudEFuZElkZW50aWZpZXIocGF5bWVudEVsZW1lbnQsICdwYXltZW50LWNvbmZpcm1hdGlvbicpXG4gICAgXG4gICAgaWYgKHBheW1lbnRDb250cm9sbGVyKSB7XG4gICAgICBwYXltZW50Q29udHJvbGxlci5hbW91bnRWYWx1ZSA9IGFtb3VudFxuICAgICAgcGF5bWVudENvbnRyb2xsZXIudXNlckVtYWlsVmFsdWUgPSB0aGlzLmVtYWlsSW5wdXRUYXJnZXQudmFsdWVcbiAgICAgIHBheW1lbnRDb250cm9sbGVyLnBheW1lbnRVcmxWYWx1ZSA9IHBheW1lbnRVcmxcbiAgICAgIHBheW1lbnRDb250cm9sbGVyLnN1Y2Nlc3NVcmxWYWx1ZSA9IHN1Y2Nlc3NVcmxcbiAgICAgIFxuICAgICAgcGF5bWVudENvbnRyb2xsZXIuc2hvd1Bhc3N3b3JkTW9kYWwoKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdQYXltZW50IGNvbnRyb2xsZXIgbm90IGluaXRpYWxpemVkJylcbiAgICAgIGFsZXJ0KCdcdTY1MkZcdTRFRDhcdTdDRkJcdTdFREZcdTY3MkFcdTUyMURcdTU5Q0JcdTUzMTZcdUZGMENcdThCRjdcdTUyMzdcdTY1QjBcdTk4NzVcdTk3NjJcdTkxQ0RcdThCRDUnKVxuICAgIH1cbiAgfVxuXG4gIG9wZW5QYXNzZW5nZXJTZWxlY3RvcigpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gIH1cblxuICBjbG9zZVBhc3NlbmdlclNlbGVjdG9yKCk6IHZvaWQge1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgfVxuXG4gIHNlbGVjdFBhc3NlbmdlcihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBlbGVtZW50ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IG5hbWUgPSBlbGVtZW50LmRhdGFzZXQuYWJyb2FkT3JkZXJGb3JtTmFtZVBhcmFtIHx8ICcnXG4gICAgY29uc3QgcGhvbmUgPSBlbGVtZW50LmRhdGFzZXQuYWJyb2FkT3JkZXJGb3JtUGhvbmVQYXJhbSB8fCAnJ1xuICAgIFxuICAgIGlmICh0aGlzLmhhc05hbWVJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5uYW1lSW5wdXRUYXJnZXQudmFsdWUgPSBuYW1lXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLmhhc1Bob25lSW5wdXRUYXJnZXQpIHtcbiAgICAgIHRoaXMucGhvbmVJbnB1dFRhcmdldC52YWx1ZSA9IHBob25lXG4gICAgfVxuICAgIFxuICAgIHRoaXMuY2xvc2VQYXNzZW5nZXJTZWxlY3RvcigpXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbi8vIFN0YXRpb24gZGF0YSBpbnRlcmZhY2VcbmludGVyZmFjZSBTdGF0aW9uIHtcbiAgbmFtZTogc3RyaW5nXG4gIG5hbWVFbjogc3RyaW5nXG4gIGNpdHk6IHN0cmluZ1xufVxuXG4vLyBTdGF0aW9uIHNlbGVjdGlvbiBjb250cm9sbGVyIGZvciBhYnJvYWQgdGlja2V0c1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwiZm9ybVwiLFxuICAgIFwicmVnaW9uSW5wdXRcIixcbiAgICBcIm9yaWdpbklucHV0XCIsXG4gICAgXCJkZXN0aW5hdGlvbklucHV0XCIsXG4gICAgXCJvcmlnaW5UZXh0XCIsXG4gICAgXCJkZXN0aW5hdGlvblRleHRcIixcbiAgICBcImRhdGVJbnB1dFwiLFxuICAgIFwiZGF0ZVRleHRcIixcbiAgICBcInN0YXRpb25Nb2RhbFwiLFxuICAgIFwic3RhdGlvbkxpc3RcIixcbiAgICBcInNlYXJjaElucHV0XCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgY3VycmVudERhdGU6IFN0cmluZ1xuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBmb3JtVGFyZ2V0OiBIVE1MRm9ybUVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSByZWdpb25JbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IG9yaWdpbklucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVzdGluYXRpb25JbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IG9yaWdpblRleHRUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGVzdGluYXRpb25UZXh0VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRhdGVJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGRhdGVUZXh0VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHN0YXRpb25Nb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzdGF0aW9uTGlzdFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzZWFyY2hJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIGN1cnJlbnREYXRlVmFsdWU6IHN0cmluZ1xuXG4gIHByaXZhdGUgY3VycmVudFNlbGVjdGlvblR5cGU6ICdvcmlnaW4nIHwgJ2Rlc3RpbmF0aW9uJyA9ICdvcmlnaW4nXG4gIHByaXZhdGUgY3VycmVudFJlZ2lvbjogc3RyaW5nID0gJ2phcGFuJ1xuXG4gIC8vIFx1NjVFNVx1NjcyQ1x1N0FEOVx1NzBCOVx1NjU3MFx1NjM2RVxuICBwcml2YXRlIGphcGFuU3RhdGlvbnM6IFJlY29yZDxzdHJpbmcsIFN0YXRpb25bXT4gPSB7XG4gICAgJ1x1NEUxQ1x1NEVBQyc6IFtcbiAgICAgIHsgbmFtZTogJ1x1NEUxQ1x1NEVBQ1x1N0FEOScsIG5hbWVFbjogJ1Rva3lvIFN0YXRpb24nLCBjaXR5OiAnXHU0RTFDXHU0RUFDJyB9LFxuICAgICAgeyBuYW1lOiAnXHU2NUIwXHU1QkJGXHU3QUQ5JywgbmFtZUVuOiAnU2hpbmp1a3UgU3RhdGlvbicsIGNpdHk6ICdcdTRFMUNcdTRFQUMnIH0sXG4gICAgICB7IG5hbWU6ICdcdTZEQTlcdThDMzdcdTdBRDknLCBuYW1lRW46ICdTaGlidXlhIFN0YXRpb24nLCBjaXR5OiAnXHU0RTFDXHU0RUFDJyB9LFxuICAgICAgeyBuYW1lOiAnXHU2QzYwXHU4ODhCXHU3QUQ5JywgbmFtZUVuOiAnSWtlYnVrdXJvIFN0YXRpb24nLCBjaXR5OiAnXHU0RTFDXHU0RUFDJyB9LFxuICAgICAgeyBuYW1lOiAnXHU1NEMxXHU1REREXHU3QUQ5JywgbmFtZUVuOiAnU2hpbmFnYXdhIFN0YXRpb24nLCBjaXR5OiAnXHU0RTFDXHU0RUFDJyB9XG4gICAgXSxcbiAgICAnXHU1OTI3XHU5NjJBJzogW1xuICAgICAgeyBuYW1lOiAnXHU2NUIwXHU1OTI3XHU5NjJBXHU3QUQ5JywgbmFtZUVuOiAnU2hpbi1Pc2FrYSBTdGF0aW9uJywgY2l0eTogJ1x1NTkyN1x1OTYyQScgfSxcbiAgICAgIHsgbmFtZTogJ1x1NTkyN1x1OTYyQVx1N0FEOScsIG5hbWVFbjogJ09zYWthIFN0YXRpb24nLCBjaXR5OiAnXHU1OTI3XHU5NjJBJyB9LFxuICAgICAgeyBuYW1lOiAnXHU5NkJFXHU2Q0UyXHU3QUQ5JywgbmFtZUVuOiAnTmFtYmEgU3RhdGlvbicsIGNpdHk6ICdcdTU5MjdcdTk2MkEnIH0sXG4gICAgICB7IG5hbWU6ICdcdTU5MjlcdTczOEJcdTVCRkFcdTdBRDknLCBuYW1lRW46ICdUZW5ub2ppIFN0YXRpb24nLCBjaXR5OiAnXHU1OTI3XHU5NjJBJyB9XG4gICAgXSxcbiAgICAnXHU0RUFDXHU5MEZEJzogW1xuICAgICAgeyBuYW1lOiAnXHU0RUFDXHU5MEZEXHU3QUQ5JywgbmFtZUVuOiAnS3lvdG8gU3RhdGlvbicsIGNpdHk6ICdcdTRFQUNcdTkwRkQnIH0sXG4gICAgICB7IG5hbWU6ICdcdTU0QzFcdTVERERcdTdBRDknLCBuYW1lRW46ICdTaGluYWdhd2EgU3RhdGlvbicsIGNpdHk6ICdcdTRFQUNcdTkwRkQnIH1cbiAgICBdLFxuICAgICdcdTU0MERcdTUzRTRcdTVDNEInOiBbXG4gICAgICB7IG5hbWU6ICdcdTU0MERcdTUzRTRcdTVDNEJcdTdBRDknLCBuYW1lRW46ICdOYWdveWEgU3RhdGlvbicsIGNpdHk6ICdcdTU0MERcdTUzRTRcdTVDNEInIH1cbiAgICBdLFxuICAgICdcdTRFRDlcdTUzRjAnOiBbXG4gICAgICB7IG5hbWU6ICdcdTRFRDlcdTUzRjBcdTdBRDknLCBuYW1lRW46ICdTZW5kYWkgU3RhdGlvbicsIGNpdHk6ICdcdTRFRDlcdTUzRjAnIH1cbiAgICBdLFxuICAgICdcdTk3NTJcdTY4RUUnOiBbXG4gICAgICB7IG5hbWU6ICdcdTk3NTJcdTY4RUVcdTdBRDknLCBuYW1lRW46ICdBb21vcmkgU3RhdGlvbicsIGNpdHk6ICdcdTk3NTJcdTY4RUUnIH1cbiAgICBdLFxuICAgICdcdTY1QjBcdTZGNUYnOiBbXG4gICAgICB7IG5hbWU6ICdcdTY1QjBcdTZGNUZcdTdBRDknLCBuYW1lRW46ICdOaWlnYXRhIFN0YXRpb24nLCBjaXR5OiAnXHU2NUIwXHU2RjVGJyB9XG4gICAgXSxcbiAgICAnXHU1RTdGXHU1QzlCJzogW1xuICAgICAgeyBuYW1lOiAnXHU1RTdGXHU1QzlCXHU3QUQ5JywgbmFtZUVuOiAnSGlyb3NoaW1hIFN0YXRpb24nLCBjaXR5OiAnXHU1RTdGXHU1QzlCJyB9XG4gICAgXSxcbiAgICAnXHU3OThGXHU1MTg4JzogW1xuICAgICAgeyBuYW1lOiAnXHU1MzVBXHU1OTFBXHU3QUQ5JywgbmFtZUVuOiAnSGFrYXRhIFN0YXRpb24nLCBjaXR5OiAnXHU3OThGXHU1MTg4JyB9XG4gICAgXSxcbiAgICAnXHU5RTdGXHU1MTNGXHU1QzlCJzogW1xuICAgICAgeyBuYW1lOiAnXHU5RTdGXHU1MTNGXHU1QzlCXHU0RTJEXHU1OTJFXHU3QUQ5JywgbmFtZUVuOiAnS2Fnb3NoaW1hLUNodW8gU3RhdGlvbicsIGNpdHk6ICdcdTlFN0ZcdTUxM0ZcdTVDOUInIH1cbiAgICBdLFxuICAgICdcdTUzMTdcdTZENzdcdTkwNTMnOiBbXG4gICAgICB7IG5hbWU6ICdcdTY3MkRcdTVFNENcdTdBRDknLCBuYW1lRW46ICdTYXBwb3JvIFN0YXRpb24nLCBjaXR5OiAnXHU1MzE3XHU2RDc3XHU5MDUzJyB9XG4gICAgXVxuICB9XG5cbiAgLy8gXHU2QjI3XHU2RDMyXHU3QUQ5XHU3MEI5XHU2NTcwXHU2MzZFXG4gIHByaXZhdGUgZXVyb3BlU3RhdGlvbnM6IFJlY29yZDxzdHJpbmcsIFN0YXRpb25bXT4gPSB7XG4gICAgJ1x1NkNENVx1NTZGRCc6IFtcbiAgICAgIHsgbmFtZTogJ1x1NURGNFx1OUVDRVx1NTMxN1x1N0FEOScsIG5hbWVFbjogJ1BhcmlzIE5vcmQnLCBjaXR5OiAnXHU2Q0Q1XHU1NkZEJyB9LFxuICAgICAgeyBuYW1lOiAnXHU1REY0XHU5RUNFXHU5MUNDXHU2NjAyXHU3QUQ5JywgbmFtZUVuOiAnUGFyaXMgR2FyZSBkZSBMeW9uJywgY2l0eTogJ1x1NkNENVx1NTZGRCcgfSxcbiAgICAgIHsgbmFtZTogJ1x1OTFDQ1x1NjYwMlx1N0FEOScsIG5hbWVFbjogJ0x5b24gU3RhdGlvbicsIGNpdHk6ICdcdTZDRDVcdTU2RkQnIH0sXG4gICAgICB7IG5hbWU6ICdcdTlBNkNcdThENUJcdTdBRDknLCBuYW1lRW46ICdNYXJzZWlsbGUgU3RhdGlvbicsIGNpdHk6ICdcdTZDRDVcdTU2RkQnIH1cbiAgICBdLFxuICAgICdcdTgzNzdcdTUxNzAnOiBbXG4gICAgICB7IG5hbWU6ICdcdTk2M0ZcdTU5QzZcdTY1QUZcdTcyNzlcdTRFMzlcdTRFMkRcdTU5MkVcdThGNjZcdTdBRDknLCBuYW1lRW46ICdBbXN0ZXJkYW0gQ2VudHJhYWwnLCBjaXR5OiAnXHU4Mzc3XHU1MTcwJyB9LFxuICAgICAgeyBuYW1lOiAnXHU5RTdGXHU3Mjc5XHU0RTM5XHU0RTJEXHU1OTJFXHU4RjY2XHU3QUQ5JywgbmFtZUVuOiAnUm90dGVyZGFtIENlbnRyYWFsJywgY2l0eTogJ1x1ODM3N1x1NTE3MCcgfVxuICAgIF0sXG4gICAgJ1x1NUZCN1x1NTZGRCc6IFtcbiAgICAgIHsgbmFtZTogJ1x1NjdDRlx1Njc5N1x1NEUyRFx1NTkyRVx1OEY2Nlx1N0FEOScsIG5hbWVFbjogJ0JlcmxpbiBIYXVwdGJhaG5ob2YnLCBjaXR5OiAnXHU1RkI3XHU1NkZEJyB9LFxuICAgICAgeyBuYW1lOiAnXHU2MTU1XHU1QzNDXHU5RUQxXHU0RTJEXHU1OTJFXHU4RjY2XHU3QUQ5JywgbmFtZUVuOiAnTVx1MDBGQ25jaGVuIEhhdXB0YmFobmhvZicsIGNpdHk6ICdcdTVGQjdcdTU2RkQnIH0sXG4gICAgICB7IG5hbWU6ICdcdTZDRDVcdTUxNzBcdTUxNEJcdTc5OEZcdTRFMkRcdTU5MkVcdThGNjZcdTdBRDknLCBuYW1lRW46ICdGcmFua2Z1cnQgSGF1cHRiYWhuaG9mJywgY2l0eTogJ1x1NUZCN1x1NTZGRCcgfVxuICAgIF0sXG4gICAgJ1x1NjEwRlx1NTkyN1x1NTIyOSc6IFtcbiAgICAgIHsgbmFtZTogJ1x1N0Y1N1x1OUE2Q1x1NzI3OVx1N0M3M1x1NUMzQ1x1N0FEOScsIG5hbWVFbjogJ1JvbWEgVGVybWluaScsIGNpdHk6ICdcdTYxMEZcdTU5MjdcdTUyMjknIH0sXG4gICAgICB7IG5hbWU6ICdcdTdDNzNcdTUxNzBcdTRFMkRcdTU5MkVcdThGNjZcdTdBRDknLCBuYW1lRW46ICdNaWxhbm8gQ2VudHJhbGUnLCBjaXR5OiAnXHU2MTBGXHU1OTI3XHU1MjI5JyB9LFxuICAgICAgeyBuYW1lOiAnXHU0RjVCXHU3RjU3XHU0RjI2XHU4NDI4XHU1NzIzXHU2QkNEXHU3MzlCXHU1MjI5XHU0RTlBXHU4RjY2XHU3QUQ5JywgbmFtZUVuOiAnRmlyZW56ZSBTYW50YSBNYXJpYSBOb3ZlbGxhJywgY2l0eTogJ1x1NjEwRlx1NTkyN1x1NTIyOScgfVxuICAgIF0sXG4gICAgJ1x1ODk3Rlx1NzNFRFx1NzI1OSc6IFtcbiAgICAgIHsgbmFtZTogJ1x1OUE2Q1x1NUZCN1x1OTFDQ1x1OTYzRlx1NjI1OFx1NjdFNVx1N0FEOScsIG5hbWVFbjogJ01hZHJpZCBBdG9jaGEnLCBjaXR5OiAnXHU4OTdGXHU3M0VEXHU3MjU5JyB9LFxuICAgICAgeyBuYW1lOiAnXHU1REY0XHU1ODVFXHU3RjU3XHU5MEEzXHU2ODUxXHU2NUFGXHU3QUQ5JywgbmFtZUVuOiAnQmFyY2Vsb25hIFNhbnRzJywgY2l0eTogJ1x1ODk3Rlx1NzNFRFx1NzI1OScgfVxuICAgIF1cbiAgfVxuXG4gIC8vIFx1NzBFRFx1OTVFOFx1N0VCRlx1OERFRlxuICBwcml2YXRlIHBvcHVsYXJSb3V0ZXMgPSB7XG4gICAgamFwYW46IFtcbiAgICAgIHsgb3JpZ2luOiAnXHU0RTFDXHU0RUFDXHU3QUQ5JywgZGVzdGluYXRpb246ICdcdTRFQUNcdTkwRkRcdTdBRDknIH0sXG4gICAgICB7IG9yaWdpbjogJ1x1NEUxQ1x1NEVBQ1x1N0FEOScsIGRlc3RpbmF0aW9uOiAnXHU2NUIwXHU1OTI3XHU5NjJBXHU3QUQ5JyB9XG4gICAgXSxcbiAgICBldXJvcGU6IFtcbiAgICAgIHsgb3JpZ2luOiAnXHU1REY0XHU5RUNFXHU1MzE3XHU3QUQ5JywgZGVzdGluYXRpb246ICdcdTk2M0ZcdTU5QzZcdTY1QUZcdTcyNzlcdTRFMzlcdTRFMkRcdTU5MkVcdThGNjZcdTdBRDknIH0sXG4gICAgICB7IG9yaWdpbjogJ1x1NURGNFx1OUVDRVx1OTFDQ1x1NjYwMlx1N0FEOScsIGRlc3RpbmF0aW9uOiAnXHU3RjU3XHU5QTZDXHU3Mjc5XHU3QzczXHU1QzNDXHU3QUQ5JyB9XG4gICAgXVxuICB9XG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICB0aGlzLmN1cnJlbnRSZWdpb24gPSB0aGlzLnJlZ2lvbklucHV0VGFyZ2V0LnZhbHVlXG4gICAgY29uc29sZS5sb2coJ0Ficm9hZCB0aWNrZXQgc2VhcmNoIGNvbnRyb2xsZXIgY29ubmVjdGVkJylcbiAgfVxuXG4gIHNlbGVjdFJlZ2lvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgcmVnaW9uID0gYnV0dG9uLmRhdGFzZXQuYWJyb2FkVGlja2V0U2VhcmNoUmVnaW9uUGFyYW1cbiAgICBcbiAgICBpZiAocmVnaW9uICYmIHJlZ2lvbiAhPT0gdGhpcy5jdXJyZW50UmVnaW9uKSB7XG4gICAgICAvLyBVc2UgVHVyYm8udmlzaXQgdG8gcmVsb2FkIHRoZSBwYWdlIHdpdGggbmV3IHJlZ2lvbiBwYXJhbWV0ZXJcbiAgICAgIC8vIFRoaXMga2VlcHMgdXMgb24gdGhlIGluZGV4IHBhZ2UgaW5zdGVhZCBvZiBuYXZpZ2F0aW5nIHRvIHNlYXJjaFxuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZilcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdyZWdpb24nLCByZWdpb24pXG4gICAgICB3aW5kb3cuVHVyYm8udmlzaXQodXJsLnRvU3RyaW5nKCkpXG4gICAgfVxuICB9XG5cbiAgc2VsZWN0VGlja2V0VHlwZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIGNvbnN0IHRpY2tldFR5cGUgPSBidXR0b24uZGF0YXNldC5hYnJvYWRUaWNrZXRTZWFyY2hUaWNrZXRUeXBlUGFyYW1cbiAgICBcbiAgICAvLyBVcGRhdGUgYnV0dG9uIHN0eWxlc1xuICAgIGNvbnN0IGFsbEJ1dHRvbnMgPSBidXR0b24ucGFyZW50RWxlbWVudD8ucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uJykgfHwgW11cbiAgICBhbGxCdXR0b25zLmZvckVhY2goYnRuID0+IHtcbiAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdiZy13aGl0ZScsICdzaGFkb3ctc20nLCAnZm9udC1ib2xkJylcbiAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdmb250LW1lZGl1bScsICd0ZXh0LWdyYXktNTAwJylcbiAgICB9KVxuICAgIFxuICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdmb250LW1lZGl1bScsICd0ZXh0LWdyYXktNTAwJylcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYmctd2hpdGUnLCAnc2hhZG93LXNtJywgJ2ZvbnQtYm9sZCcpXG4gICAgXG4gICAgLy8gVE9ETzogSGFuZGxlIHRpY2tldCB0eXBlIGNoYW5nZSAodHJhaW4gdnMgcGFzcylcbiAgICBjb25zb2xlLmxvZygnU2VsZWN0ZWQgdGlja2V0IHR5cGU6JywgdGlja2V0VHlwZSlcbiAgfVxuXG4gIHNlbGVjdE9yaWdpbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgdGhpcy5jdXJyZW50U2VsZWN0aW9uVHlwZSA9ICdvcmlnaW4nXG4gICAgdGhpcy5vcGVuU3RhdGlvbk1vZGFsKClcbiAgfVxuXG4gIHNlbGVjdERlc3RpbmF0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICB0aGlzLmN1cnJlbnRTZWxlY3Rpb25UeXBlID0gJ2Rlc3RpbmF0aW9uJ1xuICAgIHRoaXMub3BlblN0YXRpb25Nb2RhbCgpXG4gIH1cblxuICBzd2FwU3RhdGlvbnMoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIFxuICAgIGNvbnN0IG9yaWdpblZhbHVlID0gdGhpcy5vcmlnaW5JbnB1dFRhcmdldC52YWx1ZVxuICAgIGNvbnN0IGRlc3RpbmF0aW9uVmFsdWUgPSB0aGlzLmRlc3RpbmF0aW9uSW5wdXRUYXJnZXQudmFsdWVcbiAgICBcbiAgICB0aGlzLm9yaWdpbklucHV0VGFyZ2V0LnZhbHVlID0gZGVzdGluYXRpb25WYWx1ZVxuICAgIHRoaXMuZGVzdGluYXRpb25JbnB1dFRhcmdldC52YWx1ZSA9IG9yaWdpblZhbHVlXG4gICAgXG4gICAgdGhpcy5vcmlnaW5UZXh0VGFyZ2V0LnRleHRDb250ZW50ID0gZGVzdGluYXRpb25WYWx1ZVxuICAgIHRoaXMuZGVzdGluYXRpb25UZXh0VGFyZ2V0LnRleHRDb250ZW50ID0gb3JpZ2luVmFsdWVcbiAgfVxuXG4gIG9wZW5EYXRlUGlja2VyKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAvLyBEaXNwYXRjaCBldmVudCB0byBhYnJvYWQtZGF0ZS1waWNrZXIgY29udHJvbGxlclxuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdhYnJvYWQtdGlja2V0LXNlYXJjaDpvcGVuLWRhdGUtcGlja2VyJywge1xuICAgICAgYnViYmxlczogdHJ1ZVxuICAgIH0pXG4gICAgdGhpcy5lbGVtZW50LmRpc3BhdGNoRXZlbnQoY3VzdG9tRXZlbnQpXG4gIH1cblxuICB1cGRhdGVEYXRlKGRhdGVTdHI6IHN0cmluZyk6IHZvaWQge1xuICAgIC8vIFVwZGF0ZSB0aGUgZGF0ZSBpbnB1dCBhbmQgdGV4dCBkaXNwbGF5XG4gICAgdGhpcy5kYXRlSW5wdXRUYXJnZXQudmFsdWUgPSBkYXRlU3RyXG4gICAgdGhpcy5jdXJyZW50RGF0ZVZhbHVlID0gZGF0ZVN0clxuICAgIFxuICAgIC8vIFVwZGF0ZSB0aGUgZGF0ZSBkaXNwbGF5IHRleHRcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoYCR7ZGF0ZVN0cn1UMDA6MDA6MDBgKVxuICAgIGNvbnN0IG1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMVxuICAgIGNvbnN0IGRheSA9IGRhdGUuZ2V0RGF0ZSgpXG4gICAgY29uc3Qgd2Vla2RheXMgPSBbJ1x1NTQ2OFx1NjVFNScsICdcdTU0NjhcdTRFMDAnLCAnXHU1NDY4XHU0RThDJywgJ1x1NTQ2OFx1NEUwOScsICdcdTU0NjhcdTU2REInLCAnXHU1NDY4XHU0RTk0JywgJ1x1NTQ2OFx1NTE2RCddXG4gICAgY29uc3Qgd2Vla2RheSA9IHdlZWtkYXlzW2RhdGUuZ2V0RGF5KCldXG4gICAgXG4gICAgdGhpcy5kYXRlVGV4dFRhcmdldC50ZXh0Q29udGVudCA9IGAke21vbnRofVx1NjcwOCR7ZGF5fVx1NjVFNWBcbiAgICBcbiAgICAvLyBVcGRhdGUgd2Vla2RheSBpZiB0aGVyZSdzIGEgc2libGluZyBlbGVtZW50XG4gICAgY29uc3Qgd2Vla2RheUVsZW1lbnQgPSB0aGlzLmRhdGVUZXh0VGFyZ2V0Lm5leHRFbGVtZW50U2libGluZ1xuICAgIGlmICh3ZWVrZGF5RWxlbWVudCkge1xuICAgICAgd2Vla2RheUVsZW1lbnQudGV4dENvbnRlbnQgPSB3ZWVrZGF5XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBvcGVuU3RhdGlvbk1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMuc3RhdGlvbk1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgdGhpcy5yZW5kZXJTdGF0aW9uTGlzdCgpXG4gICAgdGhpcy5zZWFyY2hJbnB1dFRhcmdldC52YWx1ZSA9ICcnXG4gICAgdGhpcy5zZWFyY2hJbnB1dFRhcmdldC5mb2N1cygpXG4gIH1cblxuICBjbG9zZVN0YXRpb25Nb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLnN0YXRpb25Nb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICB9XG5cbiAgc2VsZWN0U3RhdGlvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBlbGVtZW50ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHN0YXRpb25OYW1lID0gZWxlbWVudC5kYXRhc2V0LnN0YXRpb25OYW1lXG4gICAgY29uc3Qgc3RhdGlvbk5hbWVFbiA9IGVsZW1lbnQuZGF0YXNldC5zdGF0aW9uTmFtZUVuXG4gICAgXG4gICAgaWYgKCFzdGF0aW9uTmFtZSkgcmV0dXJuXG4gICAgXG4gICAgaWYgKHRoaXMuY3VycmVudFNlbGVjdGlvblR5cGUgPT09ICdvcmlnaW4nKSB7XG4gICAgICB0aGlzLm9yaWdpbklucHV0VGFyZ2V0LnZhbHVlID0gc3RhdGlvbk5hbWVcbiAgICAgIHRoaXMub3JpZ2luVGV4dFRhcmdldC50ZXh0Q29udGVudCA9IHN0YXRpb25OYW1lXG4gICAgICAvLyBVcGRhdGUgRW5nbGlzaCBuYW1lIGluIHRoZSBzdWJ0aXRsZVxuICAgICAgY29uc3Qgc3VidGl0bGUgPSB0aGlzLm9yaWdpblRleHRUYXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nXG4gICAgICBpZiAoc3VidGl0bGUpIHtcbiAgICAgICAgc3VidGl0bGUudGV4dENvbnRlbnQgPSBzdGF0aW9uTmFtZUVuIHx8ICcnXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGVzdGluYXRpb25JbnB1dFRhcmdldC52YWx1ZSA9IHN0YXRpb25OYW1lXG4gICAgICB0aGlzLmRlc3RpbmF0aW9uVGV4dFRhcmdldC50ZXh0Q29udGVudCA9IHN0YXRpb25OYW1lXG4gICAgICAvLyBVcGRhdGUgRW5nbGlzaCBuYW1lIGluIHRoZSBzdWJ0aXRsZVxuICAgICAgY29uc3Qgc3VidGl0bGUgPSB0aGlzLmRlc3RpbmF0aW9uVGV4dFRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmdcbiAgICAgIGlmIChzdWJ0aXRsZSkge1xuICAgICAgICBzdWJ0aXRsZS50ZXh0Q29udGVudCA9IHN0YXRpb25OYW1lRW4gfHwgJydcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy5jbG9zZVN0YXRpb25Nb2RhbCgpXG4gIH1cblxuICBzZWFyY2hTdGF0aW9ucyhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBpbnB1dCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IHF1ZXJ5ID0gaW5wdXQudmFsdWUudHJpbSgpLnRvTG93ZXJDYXNlKClcbiAgICBcbiAgICB0aGlzLnJlbmRlclN0YXRpb25MaXN0KHF1ZXJ5KVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJTdGF0aW9uTGlzdChzZWFyY2hRdWVyeTogc3RyaW5nID0gJycpOiB2b2lkIHtcbiAgICBjb25zdCBzdGF0aW9ucyA9IHRoaXMuY3VycmVudFJlZ2lvbiA9PT0gJ2phcGFuJyA/IHRoaXMuamFwYW5TdGF0aW9ucyA6IHRoaXMuZXVyb3BlU3RhdGlvbnNcbiAgICBjb25zdCBwb3B1bGFyUm91dGVzID0gdGhpcy5jdXJyZW50UmVnaW9uID09PSAnamFwYW4nID8gdGhpcy5wb3B1bGFyUm91dGVzLmphcGFuIDogdGhpcy5wb3B1bGFyUm91dGVzLmV1cm9wZVxuICAgIFxuICAgIC8qIGVzbGludC1kaXNhYmxlIGluZGVudCAqL1xuICAgIGxldCBodG1sID0gJydcbiAgICBcbiAgICAvLyBQb3B1bGFyIHJvdXRlcyAob25seSBzaG93IHdoZW4gbm8gc2VhcmNoIHF1ZXJ5KVxuICAgIGlmICghc2VhcmNoUXVlcnkgJiYgcG9wdWxhclJvdXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICBodG1sICs9IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cIm1iLTZcIj5cbiAgICAgICAgICA8aDMgY2xhc3M9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS01MDAgbWItMyBweC00XCI+XHU3MEVEXHU5NUU4XHU4REVGXHU3RUJGPC9oMz5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBnYXAtMyBweC00IG92ZXJmbG93LXgtYXV0b1wiPlxuICAgICAgICAgICAgJHtwb3B1bGFyUm91dGVzLm1hcChyb3V0ZSA9PiBgXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJiZy1ncmF5LTUwIHJvdW5kZWQtbGcgcHgtNCBweS0yIHdoaXRlc3BhY2Utbm93cmFwIGN1cnNvci1wb2ludGVyIGhvdmVyOmJnLWdyYXktMTAwXCJcbiAgICAgICAgICAgICAgICAgICBkYXRhLWFjdGlvbj1cImNsaWNrLT5hYnJvYWQtdGlja2V0LXNlYXJjaCNzZWxlY3RQb3B1bGFyUm91dGVcIlxuICAgICAgICAgICAgICAgICAgIGRhdGEtb3JpZ2luPVwiJHtyb3V0ZS5vcmlnaW59XCJcbiAgICAgICAgICAgICAgICAgICBkYXRhLWRlc3RpbmF0aW9uPVwiJHtyb3V0ZS5kZXN0aW5hdGlvbn1cIj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRleHQtc20gZm9udC1tZWRpdW1cIj4ke3JvdXRlLm9yaWdpbn0gLSAke3JvdXRlLmRlc3RpbmF0aW9ufTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgKS5qb2luKCcnKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICBgXG4gICAgfVxuICAgIFxuICAgIC8vIFN0YXRpb24gbGlzdCBncm91cGVkIGJ5IGNpdHkvcmVnaW9uXG4gICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cIm1iLTRcIj48aDMgY2xhc3M9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS01MDAgbWItMyBweC00XCI+XHU3QUQ5XHU3MEI5XHU5MDA5XHU2MkU5PC9oMz48L2Rpdj4nXG4gICAgXG4gICAgT2JqZWN0LmVudHJpZXMoc3RhdGlvbnMpLmZvckVhY2goKFtjaXR5LCBzdGF0aW9uTGlzdF0pID0+IHtcbiAgICAgIGNvbnN0IGZpbHRlcmVkU3RhdGlvbnMgPSBzdGF0aW9uTGlzdC5maWx0ZXIoc3RhdGlvbiA9PiBcbiAgICAgICAgIXNlYXJjaFF1ZXJ5IHx8IFxuICAgICAgICBzdGF0aW9uLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hRdWVyeSkgfHwgXG4gICAgICAgIHN0YXRpb24ubmFtZUVuLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoUXVlcnkpIHx8XG4gICAgICAgIGNpdHkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hRdWVyeSlcbiAgICAgIClcbiAgICAgIFxuICAgICAgaWYgKGZpbHRlcmVkU3RhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICBodG1sICs9IGBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwibWItNFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggaXRlbXMtY2VudGVyIHB4LTQgcHktMiBiZy1ncmF5LTUwXCI+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1zbSBmb250LWJvbGQgdGV4dC1ncmF5LTcwMFwiPiR7Y2l0eX08L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICR7ZmlsdGVyZWRTdGF0aW9ucy5tYXAoc3RhdGlvbiA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGlzU2VsZWN0ZWQgPSAoXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VsZWN0aW9uVHlwZSA9PT0gJ29yaWdpbicgJiZcbiAgICAgICAgICAgICAgICB0aGlzLm9yaWdpbklucHV0VGFyZ2V0LnZhbHVlID09PSBzdGF0aW9uLm5hbWVcbiAgICAgICAgICAgICAgKSB8fCAoXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VsZWN0aW9uVHlwZSA9PT0gJ2Rlc3RpbmF0aW9uJyAmJlxuICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb25JbnB1dFRhcmdldC52YWx1ZSA9PT0gc3RhdGlvbi5uYW1lXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBweC00IHB5LTMgYm9yZGVyLWIgYm9yZGVyLWdyYXktMTAwIGN1cnNvci1wb2ludGVyIGhvdmVyOmJnLWdyYXktNTBcIlxuICAgICAgICAgICAgICAgICAgICAgZGF0YS1hY3Rpb249XCJjbGljay0+YWJyb2FkLXRpY2tldC1zZWFyY2gjc2VsZWN0U3RhdGlvblwiXG4gICAgICAgICAgICAgICAgICAgICBkYXRhLXN0YXRpb24tbmFtZT1cIiR7c3RhdGlvbi5uYW1lfVwiXG4gICAgICAgICAgICAgICAgICAgICBkYXRhLXN0YXRpb24tbmFtZS1lbj1cIiR7c3RhdGlvbi5uYW1lRW59XCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleC0xXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWJhc2UgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMFwiPiR7c3RhdGlvbi5uYW1lfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC14cyB0ZXh0LWdyYXktNDAwIG10LTAuNVwiPiR7c3RhdGlvbi5uYW1lRW59PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICR7aXNTZWxlY3RlZCA/IGBcbiAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz1cInctNSBoLTUgdGV4dC15ZWxsb3ctNDAwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsLXJ1bGU9XCJldmVub2RkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkPVwiTTE2LjcwNyA1LjI5M2ExIDEgMCAwMTAgMS40MTRsLTggOGExIDEgMCAwMS0xLjQxNCAwbC00LTRhMSAxIDAgMDExLjQxNC0xLjQxNEw4IDEyLjU4Nmw3LjI5My03LjI5M2ExIDEgMCAwMTEuNDE0IDB6XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGlwLXJ1bGU9XCJldmVub2RkXCIvPlxuICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICAgIGAgOiAnJ31cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgfSkuam9pbignJyl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIGBcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIGNvbnN0IG5vUmVzdWx0c0hlYWRlciA9ICc8ZGl2IGNsYXNzPVwibWItNFwiPjxoMyBjbGFzcz1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTUwMCBtYi0zIHB4LTRcIj5cdTdBRDlcdTcwQjlcdTkwMDlcdTYyRTk8L2gzPjwvZGl2PidcbiAgICBpZiAoaHRtbCA9PT0gbm9SZXN1bHRzSGVhZGVyKSB7XG4gICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwidGV4dC1jZW50ZXIgcHktOCB0ZXh0LWdyYXktNDAwXCI+XHU2NzJBXHU2MjdFXHU1MjMwXHU1MzM5XHU5MTREXHU3Njg0XHU3QUQ5XHU3MEI5PC9kaXY+J1xuICAgIH1cbiAgICAvKiBlc2xpbnQtZW5hYmxlIGluZGVudCwgbWF4LWxlbiAqL1xuICAgIFxuICAgIHRoaXMuc3RhdGlvbkxpc3RUYXJnZXQuaW5uZXJIVE1MID0gaHRtbFxuICB9XG5cbiAgc2VsZWN0UG9wdWxhclJvdXRlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3Qgb3JpZ2luID0gZWxlbWVudC5kYXRhc2V0Lm9yaWdpblxuICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gZWxlbWVudC5kYXRhc2V0LmRlc3RpbmF0aW9uXG4gICAgXG4gICAgaWYgKG9yaWdpbiAmJiBkZXN0aW5hdGlvbikge1xuICAgICAgLy8gRmluZCBzdGF0aW9uIGRldGFpbHNcbiAgICAgIGNvbnN0IHN0YXRpb25zID0gdGhpcy5jdXJyZW50UmVnaW9uID09PSAnamFwYW4nID8gdGhpcy5qYXBhblN0YXRpb25zIDogdGhpcy5ldXJvcGVTdGF0aW9uc1xuICAgICAgbGV0IG9yaWdpblN0YXRpb246IFN0YXRpb24gfCB1bmRlZmluZWRcbiAgICAgIGxldCBkZXN0aW5hdGlvblN0YXRpb246IFN0YXRpb24gfCB1bmRlZmluZWRcbiAgICAgIFxuICAgICAgT2JqZWN0LnZhbHVlcyhzdGF0aW9ucykuZm9yRWFjaCgoc3RhdGlvbkxpc3Q6IFN0YXRpb25bXSkgPT4ge1xuICAgICAgICBzdGF0aW9uTGlzdC5mb3JFYWNoKChzdGF0aW9uOiBTdGF0aW9uKSA9PiB7XG4gICAgICAgICAgaWYgKHN0YXRpb24ubmFtZSA9PT0gb3JpZ2luKSBvcmlnaW5TdGF0aW9uID0gc3RhdGlvblxuICAgICAgICAgIGlmIChzdGF0aW9uLm5hbWUgPT09IGRlc3RpbmF0aW9uKSBkZXN0aW5hdGlvblN0YXRpb24gPSBzdGF0aW9uXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgICAgXG4gICAgICBpZiAob3JpZ2luU3RhdGlvbikge1xuICAgICAgICB0aGlzLm9yaWdpbklucHV0VGFyZ2V0LnZhbHVlID0gb3JpZ2luU3RhdGlvbi5uYW1lXG4gICAgICAgIHRoaXMub3JpZ2luVGV4dFRhcmdldC50ZXh0Q29udGVudCA9IG9yaWdpblN0YXRpb24ubmFtZVxuICAgICAgICBjb25zdCBzdWJ0aXRsZSA9IHRoaXMub3JpZ2luVGV4dFRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmdcbiAgICAgICAgaWYgKHN1YnRpdGxlKSBzdWJ0aXRsZS50ZXh0Q29udGVudCA9IG9yaWdpblN0YXRpb24ubmFtZUVuXG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChkZXN0aW5hdGlvblN0YXRpb24pIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbklucHV0VGFyZ2V0LnZhbHVlID0gZGVzdGluYXRpb25TdGF0aW9uLm5hbWVcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvblRleHRUYXJnZXQudGV4dENvbnRlbnQgPSBkZXN0aW5hdGlvblN0YXRpb24ubmFtZVxuICAgICAgICBjb25zdCBzdWJ0aXRsZSA9IHRoaXMuZGVzdGluYXRpb25UZXh0VGFyZ2V0Lm5leHRFbGVtZW50U2libGluZ1xuICAgICAgICBpZiAoc3VidGl0bGUpIHN1YnRpdGxlLnRleHRDb250ZW50ID0gZGVzdGluYXRpb25TdGF0aW9uLm5hbWVFblxuICAgICAgfVxuICAgICAgXG4gICAgICB0aGlzLmNsb3NlU3RhdGlvbk1vZGFsKClcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcInNlYXJjaEZvcm1cIixcbiAgICBcImNpdHlJbnB1dFwiLFxuICAgIFwiY2l0eURpc3BsYXlcIixcbiAgICBcImNoZWNrSW5JbnB1dFwiLFxuICAgIFwiY2hlY2tPdXRJbnB1dFwiLFxuICAgIFwicm9vbXNJbnB1dFwiLFxuICAgIFwiYWR1bHRzSW5wdXRcIixcbiAgICBcImNoaWxkcmVuSW5wdXRcIixcbiAgICBcInF1ZXJ5SW5wdXRcIixcbiAgICBcImRvbWVzdGljVGFiXCIsXG4gICAgXCJpbnRlcm5hdGlvbmFsVGFiXCIsXG4gICAgXCJkb21lc3RpY0luZGljYXRvclwiLFxuICAgIFwiaW50ZXJuYXRpb25hbEluZGljYXRvclwiXG4gIF1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHNlYXJjaEZvcm1UYXJnZXQ6IEhUTUxGb3JtRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0NpdHlJbnB1dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGNpdHlJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0NpdHlEaXNwbGF5VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2l0eURpc3BsYXlUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQ2hlY2tJbklucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hlY2tJbklucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQ2hlY2tPdXRJbnB1dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGNoZWNrT3V0SW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNSb29tc0lucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgcm9vbXNJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0FkdWx0c0lucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgYWR1bHRzSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBoYXNDaGlsZHJlbklucHV0VGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hpbGRyZW5JbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1F1ZXJ5SW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBxdWVyeUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZG9tZXN0aWNUYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaW50ZXJuYXRpb25hbFRhYlRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkb21lc3RpY0luZGljYXRvclRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBpbnRlcm5hdGlvbmFsSW5kaWNhdG9yVGFyZ2V0OiBIVE1MRWxlbWVudFxuXG4gIHByaXZhdGUgY3VycmVudExvY2F0aW9uVHlwZTogJ2RvbWVzdGljJyB8ICdpbnRlcm5hdGlvbmFsJyA9ICdkb21lc3RpYydcbiAgcHJpdmF0ZSBsYXN0RG9tZXN0aWNDaXR5OiBzdHJpbmcgPSAnXHU1MzE3XHU0RUFDJ1xuICBwcml2YXRlIGxhc3RJbnRlcm5hdGlvbmFsQ2l0eTogc3RyaW5nID0gJ1x1OTk5OVx1NkUyRidcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiSG9tZXN0YXlTZWFyY2ggY29ubmVjdGVkXCIpXG4gICAgXG4gICAgLy8gSW5pdGlhbGl6ZTogUmVhZCBjdXJyZW50IGNpdHkgYW5kIHN0b3JlIGl0IGFzIGRvbWVzdGljIGNpdHkgKGRlZmF1bHQgc3RhdGUpXG4gICAgaWYgKHRoaXMuaGFzQ2l0eUlucHV0VGFyZ2V0KSB7XG4gICAgICBjb25zdCBjdXJyZW50Q2l0eSA9IHRoaXMuY2l0eUlucHV0VGFyZ2V0LnZhbHVlXG4gICAgICBpZiAoY3VycmVudENpdHkpIHtcbiAgICAgICAgdGhpcy5sYXN0RG9tZXN0aWNDaXR5ID0gY3VycmVudENpdHlcbiAgICAgICAgY29uc29sZS5sb2coJ0hvbWVzdGF5U2VhcmNoOiBJbml0aWFsaXplZCBsYXN0RG9tZXN0aWNDaXR5IHRvOicsIGN1cnJlbnRDaXR5KVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBMaXN0ZW4gZm9yIGNpdHktc2VsZWN0b3IgdXBkYXRlc1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NpdHktc2VsZWN0b3I6Y2l0eS1zZWxlY3RlZC1mb3ItaG90ZWwnLCB0aGlzLmhhbmRsZUNpdHlVcGRhdGUuYmluZCh0aGlzKSlcbiAgICAvLyBMaXN0ZW4gZm9yIGRhdGUtcGlja2VyIHVwZGF0ZXNcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdob3RlbC1kYXRlLXBpY2tlcjpkYXRlcy1zZWxlY3RlZCcsIHRoaXMuaGFuZGxlRGF0ZVVwZGF0ZS5iaW5kKHRoaXMpKVxuICAgIC8vIExpc3RlbiBmb3IgZ3Vlc3Qtc2VsZWN0b3IgdXBkYXRlc1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2hvdGVsLWd1ZXN0LXNlbGVjdG9yOmd1ZXN0cy11cGRhdGVkJywgdGhpcy5oYW5kbGVHdWVzdFVwZGF0ZS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkhvbWVzdGF5U2VhcmNoIGRpc2Nvbm5lY3RlZFwiKVxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NpdHktc2VsZWN0b3I6Y2l0eS1zZWxlY3RlZC1mb3ItaG90ZWwnLCB0aGlzLmhhbmRsZUNpdHlVcGRhdGUuYmluZCh0aGlzKSlcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdob3RlbC1kYXRlLXBpY2tlcjpkYXRlcy1zZWxlY3RlZCcsIHRoaXMuaGFuZGxlRGF0ZVVwZGF0ZS5iaW5kKHRoaXMpKVxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2hvdGVsLWd1ZXN0LXNlbGVjdG9yOmd1ZXN0cy11cGRhdGVkJywgdGhpcy5oYW5kbGVHdWVzdFVwZGF0ZS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgLy8gSGFuZGxlIGNpdHkgc2VsZWN0aW9uIHVwZGF0ZSBmcm9tIGNpdHktc2VsZWN0b3JcbiAgaGFuZGxlQ2l0eVVwZGF0ZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjdXN0b21FdmVudCA9IGV2ZW50IGFzIEN1c3RvbUV2ZW50XG4gICAgY29uc3QgeyBjaXR5TmFtZSwgaXNJbnRlcm5hdGlvbmFsIH0gPSBjdXN0b21FdmVudC5kZXRhaWxcbiAgICBjb25zb2xlLmxvZygnSG9tZXN0YXlTZWFyY2g6IFJlY2VpdmVkIGNpdHkgdXBkYXRlOicsIGNpdHlOYW1lLCAnaXNJbnRlcm5hdGlvbmFsOicsIGlzSW50ZXJuYXRpb25hbClcbiAgICBcbiAgICAvLyBSZW1lbWJlciB0aGUgY2l0eSBmb3IgdGhpcyBsb2NhdGlvbiB0eXBlXG4gICAgaWYgKGlzSW50ZXJuYXRpb25hbCkge1xuICAgICAgdGhpcy5sYXN0SW50ZXJuYXRpb25hbENpdHkgPSBjaXR5TmFtZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxhc3REb21lc3RpY0NpdHkgPSBjaXR5TmFtZVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5oYXNDaXR5SW5wdXRUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2l0eUlucHV0VGFyZ2V0LnZhbHVlID0gY2l0eU5hbWVcbiAgICAgIGNvbnNvbGUubG9nKCdIb21lc3RheVNlYXJjaDogVXBkYXRlZCBjaXR5IGlucHV0IHRvOicsIGNpdHlOYW1lKVxuICAgIH1cblxuICAgIC8vIEF1dG8tc3dpdGNoIHRhYiBiYXNlZCBvbiBjaXR5IHR5cGVcbiAgICBpZiAoaXNJbnRlcm5hdGlvbmFsKSB7XG4gICAgICB0aGlzLnN3aXRjaFRvSW50ZXJuYXRpb25hbChmYWxzZSkgLy8gZmFsc2UgPSBkb24ndCB1cGRhdGUgY2l0eVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN3aXRjaFRvRG9tZXN0aWMoZmFsc2UpIC8vIGZhbHNlID0gZG9uJ3QgdXBkYXRlIGNpdHlcbiAgICB9XG4gIH1cblxuICAvLyBIYW5kbGUgZGF0ZSBzZWxlY3Rpb24gdXBkYXRlIGZyb20gaG90ZWwtZGF0ZS1waWNrZXJcbiAgaGFuZGxlRGF0ZVVwZGF0ZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjdXN0b21FdmVudCA9IGV2ZW50IGFzIEN1c3RvbUV2ZW50XG4gICAgY29uc3QgeyBjaGVja0luLCBjaGVja091dCB9ID0gY3VzdG9tRXZlbnQuZGV0YWlsXG4gICAgY29uc29sZS5sb2coJ0hvbWVzdGF5U2VhcmNoOiBSZWNlaXZlZCBkYXRlIHVwZGF0ZTonLCB7IGNoZWNrSW4sIGNoZWNrT3V0IH0pXG4gICAgXG4gICAgaWYgKHRoaXMuaGFzQ2hlY2tJbklucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLmNoZWNrSW5JbnB1dFRhcmdldC52YWx1ZSA9IGNoZWNrSW5cbiAgICAgIGNvbnNvbGUubG9nKCdIb21lc3RheVNlYXJjaDogVXBkYXRlZCBjaGVjay1pbiB0bzonLCBjaGVja0luKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5oYXNDaGVja091dElucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLmNoZWNrT3V0SW5wdXRUYXJnZXQudmFsdWUgPSBjaGVja091dFxuICAgICAgY29uc29sZS5sb2coJ0hvbWVzdGF5U2VhcmNoOiBVcGRhdGVkIGNoZWNrLW91dCB0bzonLCBjaGVja091dClcbiAgICB9XG4gIH1cblxuICAvLyBIYW5kbGUgZ3Vlc3Qgc2VsZWN0aW9uIHVwZGF0ZSBmcm9tIGhvdGVsLWd1ZXN0LXNlbGVjdG9yXG4gIGhhbmRsZUd1ZXN0VXBkYXRlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnRcbiAgICBjb25zdCB7IHJvb21zLCBhZHVsdHMsIGNoaWxkcmVuIH0gPSBjdXN0b21FdmVudC5kZXRhaWxcbiAgICBjb25zb2xlLmxvZygnSG9tZXN0YXlTZWFyY2g6IFJlY2VpdmVkIGd1ZXN0IHVwZGF0ZTonLCB7IHJvb21zLCBhZHVsdHMsIGNoaWxkcmVuIH0pXG4gICAgXG4gICAgaWYgKHRoaXMuaGFzUm9vbXNJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5yb29tc0lucHV0VGFyZ2V0LnZhbHVlID0gcm9vbXMudG9TdHJpbmcoKVxuICAgICAgY29uc29sZS5sb2coJ0hvbWVzdGF5U2VhcmNoOiBVcGRhdGVkIHJvb21zIHRvOicsIHJvb21zKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5oYXNBZHVsdHNJbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5hZHVsdHNJbnB1dFRhcmdldC52YWx1ZSA9IGFkdWx0cy50b1N0cmluZygpXG4gICAgICBjb25zb2xlLmxvZygnSG9tZXN0YXlTZWFyY2g6IFVwZGF0ZWQgYWR1bHRzIHRvOicsIGFkdWx0cylcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuaGFzQ2hpbGRyZW5JbnB1dFRhcmdldCkge1xuICAgICAgdGhpcy5jaGlsZHJlbklucHV0VGFyZ2V0LnZhbHVlID0gY2hpbGRyZW4udG9TdHJpbmcoKVxuICAgICAgY29uc29sZS5sb2coJ0hvbWVzdGF5U2VhcmNoOiBVcGRhdGVkIGNoaWxkcmVuIHRvOicsIGNoaWxkcmVuKVxuICAgIH1cbiAgfVxuXG4gIG9wZW5TZWFyY2hNb2RhbCgpOiB2b2lkIHtcbiAgICAvLyBTaG93IGEgcHJvbXB0IGZvciBzZWFyY2gga2V5d29yZFxuICAgIGNvbnN0IGtleXdvcmQgPSBwcm9tcHQoJ1x1OEJGN1x1OEY5M1x1NTE2NVx1NkMxMVx1NUJCRlx1NTQwRFx1NzlGMFx1MzAwMVx1NTczMFx1NTQwRFx1NjIxNlx1NTE3M1x1OTUyRVx1OEJDRFx1RkYxQScpXG4gICAgXG4gICAgaWYgKGtleXdvcmQgIT09IG51bGwgJiYgdGhpcy5oYXNRdWVyeUlucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLnF1ZXJ5SW5wdXRUYXJnZXQudmFsdWUgPSBrZXl3b3JkXG4gICAgICBcbiAgICAgIC8vIFN1Ym1pdCB0aGUgZm9ybVxuICAgICAgaWYgKHRoaXMuc2VhcmNoRm9ybVRhcmdldCkge1xuICAgICAgICB0aGlzLnNlYXJjaEZvcm1UYXJnZXQucmVxdWVzdFN1Ym1pdCgpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gU3dpdGNoIHRvIGRvbWVzdGljIHRhYlxuICBzd2l0Y2hUb0RvbWVzdGljKHVwZGF0ZUNpdHk6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY3VycmVudExvY2F0aW9uVHlwZSA9PT0gJ2RvbWVzdGljJykgcmV0dXJuXG5cbiAgICBjb25zb2xlLmxvZygnSG9tZXN0YXlTZWFyY2g6IFN3aXRjaGluZyB0byBkb21lc3RpYycpXG4gICAgdGhpcy5jdXJyZW50TG9jYXRpb25UeXBlID0gJ2RvbWVzdGljJ1xuXG4gICAgLy8gVXBkYXRlIGNpdHkgaW5wdXQgdG8gbGFzdCBkb21lc3RpYyBjaXR5IHdoZW4gbWFudWFsbHkgc3dpdGNoaW5nXG4gICAgaWYgKHVwZGF0ZUNpdHkpIHtcbiAgICAgIGlmICh0aGlzLmhhc0NpdHlJbnB1dFRhcmdldCkge1xuICAgICAgICB0aGlzLmNpdHlJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMubGFzdERvbWVzdGljQ2l0eVxuICAgICAgICBjb25zb2xlLmxvZygnSG9tZXN0YXlTZWFyY2g6IFJlc3RvcmVkIGRvbWVzdGljIGNpdHkgdG86JywgdGhpcy5sYXN0RG9tZXN0aWNDaXR5KVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaGFzQ2l0eURpc3BsYXlUYXJnZXQpIHtcbiAgICAgICAgdGhpcy5jaXR5RGlzcGxheVRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMubGFzdERvbWVzdGljQ2l0eVxuICAgICAgICBjb25zb2xlLmxvZygnSG9tZXN0YXlTZWFyY2g6IFVwZGF0ZWQgY2l0eSBkaXNwbGF5IHRvOicsIHRoaXMubGFzdERvbWVzdGljQ2l0eSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgZG9tZXN0aWMgdGFiIHN0eWxlc1xuICAgIGNvbnN0IGRvbWVzdGljU3BhbiA9IHRoaXMuZG9tZXN0aWNUYWJUYXJnZXQucXVlcnlTZWxlY3Rvcignc3BhbicpXG4gICAgaWYgKGRvbWVzdGljU3Bhbikge1xuICAgICAgZG9tZXN0aWNTcGFuLmNsYXNzTGlzdC5yZW1vdmUoJ2ZvbnQtbWVkaXVtJylcbiAgICAgIGRvbWVzdGljU3Bhbi5jbGFzc0xpc3QuYWRkKCdmb250LWJvbGQnKVxuICAgIH1cbiAgICB0aGlzLmRvbWVzdGljVGFiVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS01MDAnKVxuICAgIHRoaXMuZG9tZXN0aWNUYWJUYXJnZXQuY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTgwMCcpXG4gICAgdGhpcy5kb21lc3RpY0luZGljYXRvclRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuXG4gICAgLy8gVXBkYXRlIGludGVybmF0aW9uYWwgdGFiIHN0eWxlc1xuICAgIGNvbnN0IGludGVybmF0aW9uYWxTcGFuID0gdGhpcy5pbnRlcm5hdGlvbmFsVGFiVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKVxuICAgIGlmIChpbnRlcm5hdGlvbmFsU3Bhbikge1xuICAgICAgaW50ZXJuYXRpb25hbFNwYW4uY2xhc3NMaXN0LnJlbW92ZSgnZm9udC1ib2xkJylcbiAgICAgIGludGVybmF0aW9uYWxTcGFuLmNsYXNzTGlzdC5hZGQoJ2ZvbnQtbWVkaXVtJylcbiAgICB9XG4gICAgdGhpcy5pbnRlcm5hdGlvbmFsVGFiVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS04MDAnKVxuICAgIHRoaXMuaW50ZXJuYXRpb25hbFRhYlRhcmdldC5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktNTAwJylcbiAgICB0aGlzLmludGVybmF0aW9uYWxJbmRpY2F0b3JUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgfVxuXG4gIC8vIFN3aXRjaCB0byBpbnRlcm5hdGlvbmFsIHRhYlxuICBzd2l0Y2hUb0ludGVybmF0aW9uYWwodXBkYXRlQ2l0eTogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jdXJyZW50TG9jYXRpb25UeXBlID09PSAnaW50ZXJuYXRpb25hbCcpIHJldHVyblxuXG4gICAgY29uc29sZS5sb2coJ0hvbWVzdGF5U2VhcmNoOiBTd2l0Y2hpbmcgdG8gaW50ZXJuYXRpb25hbCcpXG4gICAgdGhpcy5jdXJyZW50TG9jYXRpb25UeXBlID0gJ2ludGVybmF0aW9uYWwnXG5cbiAgICAvLyBVcGRhdGUgY2l0eSBpbnB1dCB0byBsYXN0IGludGVybmF0aW9uYWwgY2l0eSB3aGVuIG1hbnVhbGx5IHN3aXRjaGluZ1xuICAgIGlmICh1cGRhdGVDaXR5KSB7XG4gICAgICBpZiAodGhpcy5oYXNDaXR5SW5wdXRUYXJnZXQpIHtcbiAgICAgICAgdGhpcy5jaXR5SW5wdXRUYXJnZXQudmFsdWUgPSB0aGlzLmxhc3RJbnRlcm5hdGlvbmFsQ2l0eVxuICAgICAgICBjb25zb2xlLmxvZygnSG9tZXN0YXlTZWFyY2g6IFJlc3RvcmVkIGludGVybmF0aW9uYWwgY2l0eSB0bzonLCB0aGlzLmxhc3RJbnRlcm5hdGlvbmFsQ2l0eSlcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhhc0NpdHlEaXNwbGF5VGFyZ2V0KSB7XG4gICAgICAgIHRoaXMuY2l0eURpc3BsYXlUYXJnZXQudGV4dENvbnRlbnQgPSB0aGlzLmxhc3RJbnRlcm5hdGlvbmFsQ2l0eVxuICAgICAgICBjb25zb2xlLmxvZygnSG9tZXN0YXlTZWFyY2g6IFVwZGF0ZWQgY2l0eSBkaXNwbGF5IHRvOicsIHRoaXMubGFzdEludGVybmF0aW9uYWxDaXR5KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBpbnRlcm5hdGlvbmFsIHRhYiBzdHlsZXNcbiAgICBjb25zdCBpbnRlcm5hdGlvbmFsU3BhbiA9IHRoaXMuaW50ZXJuYXRpb25hbFRhYlRhcmdldC5xdWVyeVNlbGVjdG9yKCdzcGFuJylcbiAgICBpZiAoaW50ZXJuYXRpb25hbFNwYW4pIHtcbiAgICAgIGludGVybmF0aW9uYWxTcGFuLmNsYXNzTGlzdC5yZW1vdmUoJ2ZvbnQtbWVkaXVtJylcbiAgICAgIGludGVybmF0aW9uYWxTcGFuLmNsYXNzTGlzdC5hZGQoJ2ZvbnQtYm9sZCcpXG4gICAgfVxuICAgIHRoaXMuaW50ZXJuYXRpb25hbFRhYlRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktNTAwJylcbiAgICB0aGlzLmludGVybmF0aW9uYWxUYWJUYXJnZXQuY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTgwMCcpXG4gICAgdGhpcy5pbnRlcm5hdGlvbmFsSW5kaWNhdG9yVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG5cbiAgICAvLyBVcGRhdGUgZG9tZXN0aWMgdGFiIHN0eWxlc1xuICAgIGNvbnN0IGRvbWVzdGljU3BhbiA9IHRoaXMuZG9tZXN0aWNUYWJUYXJnZXQucXVlcnlTZWxlY3Rvcignc3BhbicpXG4gICAgaWYgKGRvbWVzdGljU3Bhbikge1xuICAgICAgZG9tZXN0aWNTcGFuLmNsYXNzTGlzdC5yZW1vdmUoJ2ZvbnQtYm9sZCcpXG4gICAgICBkb21lc3RpY1NwYW4uY2xhc3NMaXN0LmFkZCgnZm9udC1tZWRpdW0nKVxuICAgIH1cbiAgICB0aGlzLmRvbWVzdGljVGFiVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS04MDAnKVxuICAgIHRoaXMuZG9tZXN0aWNUYWJUYXJnZXQuY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTUwMCcpXG4gICAgdGhpcy5kb21lc3RpY0luZGljYXRvclRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkludGVybmV0U2VydmljZXMgY29ubmVjdGVkXCIpXG4gIH1cblxuICBzd2l0Y2hUYWIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgLy8gVHVyYm8gRHJpdmUgd2lsbCBoYW5kbGUgbmF2aWdhdGlvbiBhdXRvbWF0aWNhbGx5XG4gICAgLy8gVGhpcyBpcyBqdXN0IGZvciBhZGRpdGlvbmFsIFVJIGZlZWRiYWNrIGlmIG5lZWRlZFxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlNpbUNhcmRGaWx0ZXIgY29ubmVjdGVkXCIpXG4gIH1cblxuICBzZWxlY3REZWxpdmVyeShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgbWV0aG9kID0gYnV0dG9uLmRhdGFzZXQubWV0aG9kXG4gICAgXG4gICAgY29uc3QgYWxsQnV0dG9ucyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1tZXRob2RdJylcbiAgICBhbGxCdXR0b25zLmZvckVhY2goYiA9PiB7XG4gICAgICBiLmNsYXNzTGlzdC5yZW1vdmUoJ2ZvbnQtbWVkaXVtJylcbiAgICAgIGIuY2xhc3NMaXN0LmFkZCgndGV4dC1ncmF5LTcwMCcpXG4gICAgfSlcbiAgICBcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnZm9udC1tZWRpdW0nKVxuICB9XG5cbiAgc2VsZWN0RGF5cyhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgXG4gICAgY29uc3QgYWxsQnV0dG9ucyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1kYXlzXScpXG4gICAgYWxsQnV0dG9ucy5mb3JFYWNoKGIgPT4ge1xuICAgICAgYi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1bI0ZGRjhEOF0nLCAnYm9yZGVyLVsjRkZDQzAwXScsICdmb250LW1lZGl1bScpXG4gICAgICBiLmNsYXNzTGlzdC5hZGQoJ2JnLWdyYXktNTAnLCAndGV4dC1ncmF5LTcwMCcpXG4gICAgICAvLyBSZW1vdmUgY2hlY2ttYXJrXG4gICAgICBiLnF1ZXJ5U2VsZWN0b3JBbGwoJy5hYnNvbHV0ZScpLmZvckVhY2goZWwgPT4gZWwucmVtb3ZlKCkpXG4gICAgfSlcbiAgICBcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYmctWyNGRkY4RDhdJywgJ2JvcmRlci1bI0ZGQ0MwMF0nLCAnZm9udC1tZWRpdW0nKVxuICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1ncmF5LTUwJywgJ3RleHQtZ3JheS03MDAnKVxuICAgIFxuICAgIC8vIEFkZCBjaGVja21hcmtcbiAgICBjb25zdCBjaGVja21hcmtIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cImFic29sdXRlIGJvdHRvbS0wIHJpZ2h0LTAgdy0zIGgtMyBiZy1bI0ZGQ0MwMF0gcm91bmRlZC10bC1sZ1wiPjwvZGl2PlxuICAgICAgPHN2ZyBjbGFzcz1cImFic29sdXRlIGJvdHRvbS0wLjUgcmlnaHQtMC41IHctMS41IGgtMS41IHRleHQtYmxhY2sgei0xMFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICAgICAgICA8cGF0aCBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBzdHJva2Utd2lkdGg9XCI0XCIgZD1cIk01IDEzbDQgNEwxOSA3XCI+PC9wYXRoPlxuICAgICAgPC9zdmc+XG4gICAgYFxuICAgIGJ1dHRvbi5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGNoZWNrbWFya0hUTUwpXG4gIH1cblxuICBzZWxlY3REYXRhKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBcbiAgICBjb25zdCBhbGxCdXR0b25zID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWRhdGFdJylcbiAgICBhbGxCdXR0b25zLmZvckVhY2goYiA9PiB7XG4gICAgICBiLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLVsjRkZGOEQ4XScsICdib3JkZXItWyNGRkNDMDBdJywgJ2ZvbnQtbWVkaXVtJylcbiAgICAgIGIuY2xhc3NMaXN0LmFkZCgnYmctZ3JheS01MCcsICd0ZXh0LWdyYXktNzAwJylcbiAgICAgIC8vIFJlbW92ZSBjaGVja21hcmtcbiAgICAgIGIucXVlcnlTZWxlY3RvckFsbCgnLmFic29sdXRlJykuZm9yRWFjaChlbCA9PiBlbC5yZW1vdmUoKSlcbiAgICB9KVxuICAgIFxuICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdiZy1bI0ZGRjhEOF0nLCAnYm9yZGVyLVsjRkZDQzAwXScsICdmb250LW1lZGl1bScpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLWdyYXktNTAnLCAndGV4dC1ncmF5LTcwMCcpXG4gICAgXG4gICAgLy8gQWRkIGNoZWNrbWFya1xuICAgIGNvbnN0IGNoZWNrbWFya0hUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwiYWJzb2x1dGUgYm90dG9tLTAgcmlnaHQtMCB3LTMgaC0zIGJnLVsjRkZDQzAwXSByb3VuZGVkLXRsLWxnXCI+PC9kaXY+XG4gICAgICA8c3ZnIGNsYXNzPVwiYWJzb2x1dGUgYm90dG9tLTAuNSByaWdodC0wLjUgdy0xLjUgaC0xLjUgdGV4dC1ibGFjayB6LTEwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gICAgICAgIDxwYXRoIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZS13aWR0aD1cIjRcIiBkPVwiTTUgMTNsNCA0TDE5IDdcIj48L3BhdGg+XG4gICAgICA8L3N2Zz5cbiAgICBgXG4gICAgYnV0dG9uLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgY2hlY2ttYXJrSFRNTClcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1widG90YWxQcmljZVwiLCBcInBheW1lbnRCdXR0b25cIl1cbiAgZGVjbGFyZSByZWFkb25seSB0b3RhbFByaWNlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1RvdGFsUHJpY2VUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBwYXltZW50QnV0dG9uVGFyZ2V0OiBIVE1MQW5jaG9yRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1BheW1lbnRCdXR0b25UYXJnZXQ6IGJvb2xlYW5cblxuICBwcml2YXRlIHNlbGVjdGVkUGxhbklkOiBzdHJpbmcgPSBcIlwiXG4gIHByaXZhdGUgc2VsZWN0ZWRQcmljZTogbnVtYmVyID0gMzVcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiRGF0YVBsYW4gY29ubmVjdGVkXCIpXG4gIH1cblxuICBzZWxlY3RQbGFuKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgcGxhbklkID0gY2FyZC5kYXRhc2V0LnBsYW5JZCB8fCBcIlwiXG4gICAgY29uc3QgcHJpY2UgPSBwYXJzZUZsb2F0KGNhcmQuZGF0YXNldC5wbGFuUHJpY2UgfHwgXCIzNVwiKVxuICAgIFxuICAgIHRoaXMuc2VsZWN0ZWRQbGFuSWQgPSBwbGFuSWRcbiAgICB0aGlzLnNlbGVjdGVkUHJpY2UgPSBwcmljZVxuICAgIFxuICAgIC8vIFVwZGF0ZSB0b3RhbCBwcmljZVxuICAgIGlmICh0aGlzLmhhc1RvdGFsUHJpY2VUYXJnZXQpIHtcbiAgICAgIHRoaXMudG90YWxQcmljZVRhcmdldC50ZXh0Q29udGVudCA9IHByaWNlLnRvRml4ZWQoMClcbiAgICB9XG4gICAgXG4gICAgLy8gVXBkYXRlIHBheW1lbnQgYnV0dG9uIFVSTFxuICAgIGlmICh0aGlzLmhhc1BheW1lbnRCdXR0b25UYXJnZXQpIHtcbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwodGhpcy5wYXltZW50QnV0dG9uVGFyZ2V0LmhyZWYpXG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnb3JkZXJhYmxlX2lkJywgcGxhbklkKVxuICAgICAgdGhpcy5wYXltZW50QnV0dG9uVGFyZ2V0LmhyZWYgPSB1cmwudG9TdHJpbmcoKVxuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgVUkgLSByZW1vdmUgYWxsIHNlbGVjdGlvbnMgZmlyc3RcbiAgICBjb25zdCBhbGxDYXJkcyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1wbGFuLWlkXScpXG4gICAgYWxsQ2FyZHMuZm9yRWFjaChjID0+IHtcbiAgICAgIGMuY2xhc3NMaXN0LnJlbW92ZSgnYmctWyNGRkY5RTZdJywgJ2JvcmRlci1bI0ZGRDIwMF0nKVxuICAgICAgYy5jbGFzc0xpc3QuYWRkKCdiZy1bI0Y3RjhGQV0nKVxuICAgICAgLy8gUmVtb3ZlIGNoZWNrbWFyayBpZiBleGlzdHNcbiAgICAgIGNvbnN0IGNoZWNrbWFyayA9IGMucXVlcnlTZWxlY3RvcignLmFic29sdXRlJylcbiAgICAgIGlmIChjaGVja21hcmspIGNoZWNrbWFyay5yZW1vdmUoKVxuICAgIH0pXG4gICAgXG4gICAgLy8gQWRkIHNlbGVjdGlvbiB0byBjbGlja2VkIGNhcmRcbiAgICBjYXJkLmNsYXNzTGlzdC5hZGQoJ2JnLVsjRkZGOUU2XScsICdib3JkZXItWyNGRkQyMDBdJylcbiAgICBjYXJkLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLVsjRjdGOEZBXScpXG4gICAgXG4gICAgLy8gQWRkIGNoZWNrbWFya1xuICAgIGNvbnN0IGNoZWNrbWFya0hUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwiYWJzb2x1dGUgYm90dG9tLTAgcmlnaHQtMCB3LTAgaC0wIGJvcmRlci1zb2xpZCBib3JkZXItWzBfMF8yMHB4XzI0cHhdIGJvcmRlci10cmFuc3BhcmVudCBib3JkZXItYi1bI0ZGRDIwMF0gcm91bmRlZC1ici1sZ1wiPlxuICAgICAgICA8c3ZnIGNsYXNzPVwiYWJzb2x1dGUgYm90dG9tLVstMTZweF0gcmlnaHQtWzJweF0gdy0yIGgtMiB0ZXh0LWJsYWNrXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlLXdpZHRoPVwiNFwiPlxuICAgICAgICAgIDxwYXRoIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGQ9XCJNNSAxM2w0IDRMMTkgN1wiPjwvcGF0aD5cbiAgICAgICAgPC9zdmc+XG4gICAgICA8L2Rpdj5cbiAgICBgXG4gICAgY2FyZC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGNoZWNrbWFya0hUTUwpXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcInF1YW50aXR5XCIsIFwidG90YWxQcmljZVwiLCBcImNvbnRhY3ROYW1lXCIsIFwiY29udGFjdFBob25lXCIsIFwiZGF0ZVJhbmdlXCIsXG4gICAgXCJtYWlsVGFiXCIsIFwicGlja3VwVGFiXCIsIFwiYWRkcmVzc1NlY3Rpb25cIiwgXCJtYWlsQWRkcmVzc1wiXVxuICBcbiAgZGVjbGFyZSByZWFkb25seSBxdWFudGl0eVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0b3RhbFByaWNlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNvbnRhY3ROYW1lVGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY29udGFjdFBob25lVGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZGF0ZVJhbmdlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IG1haWxUYWJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgcGlja3VwVGFiVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGFkZHJlc3NTZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IG1haWxBZGRyZXNzVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1RvdGFsUHJpY2VUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNNYWlsVGFiVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUGlja3VwVGFiVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzQWRkcmVzc1NlY3Rpb25UYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNNYWlsQWRkcmVzc1RhcmdldDogYm9vbGVhblxuXG4gIHByaXZhdGUgc2VsZWN0ZWRQbGFuSWQ6IHN0cmluZyA9IFwiXCJcbiAgcHJpdmF0ZSBkYWlseVByaWNlOiBudW1iZXIgPSAxN1xuICBwcml2YXRlIGRheXM6IG51bWJlciA9IDdcbiAgcHJpdmF0ZSBjdXJyZW50RGVsaXZlcnlNZXRob2Q6IHN0cmluZyA9ICdwaWNrdXAnXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICAvLyBcdTUyMURcdTU5Q0JcdTUzMTZcdTlFRDhcdThCQTRcdTkwMDlcdTRFMkRcdTc2ODRcdTU5NTdcdTk5MTBcdTRFRjdcdTY4M0NcbiAgICBjb25zdCBmaXJzdFBsYW4gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtd2lmaS1pZF0nKVxuICAgIGlmIChmaXJzdFBsYW4pIHtcbiAgICAgIGNvbnN0IGlkID0gZmlyc3RQbGFuLmdldEF0dHJpYnV0ZSgnZGF0YS13aWZpLWlkJylcbiAgICAgIGNvbnN0IHByaWNlID0gZmlyc3RQbGFuLmdldEF0dHJpYnV0ZSgnZGF0YS13aWZpLXByaWNlJylcbiAgICAgIGlmIChpZCkgdGhpcy5zZWxlY3RlZFBsYW5JZCA9IGlkXG4gICAgICBpZiAocHJpY2UpIHRoaXMuZGFpbHlQcmljZSA9IHBhcnNlRmxvYXQocHJpY2UpXG4gICAgfVxuICAgIHRoaXMudXBkYXRlVG90YWxQcmljZSgpXG4gICAgdGhpcy51cGRhdGVQYXltZW50QnV0dG9uKClcbiAgfVxuXG4gIHNlbGVjdFBsYW4oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBwbGFuSWQgPSBjYXJkLmRhdGFzZXQud2lmaUlkIHx8IFwiXCJcbiAgICBjb25zdCBwcmljZSA9IHBhcnNlRmxvYXQoY2FyZC5kYXRhc2V0LndpZmlQcmljZSB8fCBcIjE3XCIpXG4gICAgXG4gICAgdGhpcy5zZWxlY3RlZFBsYW5JZCA9IHBsYW5JZFxuICAgIHRoaXMuZGFpbHlQcmljZSA9IHByaWNlXG4gICAgdGhpcy51cGRhdGVUb3RhbFByaWNlKClcbiAgICBcbiAgICAvLyBcdTY2RjRcdTY1QjBcdTY1MkZcdTRFRDhcdTYzMDlcdTk0QUVcdTc2ODRvcmRlcmFibGVJZFxuICAgIHRoaXMudXBkYXRlUGF5bWVudEJ1dHRvbigpXG4gICAgXG4gICAgLy8gVXBkYXRlIFVJIC0gcmVtb3ZlIGFsbCBzZWxlY3Rpb25zIGZpcnN0XG4gICAgY29uc3QgYWxsQ2FyZHMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtd2lmaS1pZF0nKVxuICAgIGFsbENhcmRzLmZvckVhY2goYyA9PiB7XG4gICAgICBjLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLVsjRkZGREYyXScsICdib3JkZXItWyNGRkREMDBdJylcbiAgICAgIGMuY2xhc3NMaXN0LmFkZCgnYmctd2hpdGUnKVxuICAgICAgY29uc3QgY2hlY2ttYXJrID0gYy5xdWVyeVNlbGVjdG9yKCcuYmctWyNGRkREMDBdJylcbiAgICAgIGlmIChjaGVja21hcmspIHtcbiAgICAgICAgY2hlY2ttYXJrLm91dGVySFRNTCA9ICc8ZGl2IGNsYXNzPVwidy01IGgtNSBtbC0yIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1mdWxsXCI+PC9kaXY+J1xuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgLy8gQWRkIHNlbGVjdGlvbiB0byBjbGlja2VkIGNhcmRcbiAgICBjYXJkLmNsYXNzTGlzdC5hZGQoJ2JnLVsjRkZGREYyXScsICdib3JkZXItWyNGRkREMDBdJylcbiAgICBjYXJkLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLXdoaXRlJylcbiAgICBjb25zdCBjaXJjbGUgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5ib3JkZXItZ3JheS0zMDAnKVxuICAgIGlmIChjaXJjbGUpIHtcbiAgICAgIGNvbnN0IGNoZWNrbWFya1NWRyA9ICc8c3ZnIGNsYXNzPVwidy0zLjUgaC0zLjUgdGV4dC1ibGFja1wiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPidcbiAgICAgICAgKyAnPHBhdGggc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlLXdpZHRoPVwiM1wiIGQ9XCJNNSAxM2w0IDRMMTkgN1wiPjwvcGF0aD48L3N2Zz4nXG4gICAgICBjb25zdCBjaGVja21hcmtIVE1MID0gYDxkaXYgY2xhc3M9XCJ3LTUgaC01IG1sLTIgYmctWyNGRkREMDBdIHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPiR7XG4gICAgICAgIGNoZWNrbWFya1NWRyAgfTwvZGl2PmBcbiAgICAgIGNpcmNsZS5vdXRlckhUTUwgPSBjaGVja21hcmtIVE1MXG4gICAgfVxuICB9XG5cbiAgc2VsZWN0RGVsaXZlcnkoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBtZXRob2QgPSBidXR0b24uZGF0YXNldC5tZXRob2RcbiAgICBcbiAgICBpZiAoIW1ldGhvZCkgcmV0dXJuXG4gICAgXG4gICAgdGhpcy5jdXJyZW50RGVsaXZlcnlNZXRob2QgPSBtZXRob2RcbiAgICBcbiAgICAvLyBcdTY2RjRcdTY1QjBUYWJcdTY4MzdcdTVGMEZcbiAgICBpZiAodGhpcy5oYXNNYWlsVGFiVGFyZ2V0ICYmIHRoaXMuaGFzUGlja3VwVGFiVGFyZ2V0KSB7XG4gICAgICB0aGlzLm1haWxUYWJUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZm9udC1ib2xkJywgJ2JnLXdoaXRlJywgJ3NoYWRvdy1zbScsICd0ZXh0LWdyYXktODAwJylcbiAgICAgIHRoaXMubWFpbFRhYlRhcmdldC5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktNTAwJylcbiAgICAgIHRoaXMucGlja3VwVGFiVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2ZvbnQtYm9sZCcsICdiZy13aGl0ZScsICdzaGFkb3ctc20nLCAndGV4dC1ncmF5LTgwMCcpXG4gICAgICB0aGlzLnBpY2t1cFRhYlRhcmdldC5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktNTAwJylcbiAgICAgIFxuICAgICAgaWYgKG1ldGhvZCA9PT0gJ21haWwnKSB7XG4gICAgICAgIHRoaXMubWFpbFRhYlRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyYXktNTAwJylcbiAgICAgICAgdGhpcy5tYWlsVGFiVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2ZvbnQtYm9sZCcsICdiZy13aGl0ZScsICdzaGFkb3ctc20nLCAndGV4dC1ncmF5LTgwMCcpXG4gICAgICAgIC8vIFx1NjYzRVx1NzkzQVx1OTBBRVx1NUJDNFx1NTczMFx1NTc0MFx1RkYwQ1x1OTY5MFx1ODVDRlx1ODFFQVx1NTNENlx1NTczMFx1NTc0MFxuICAgICAgICBpZiAodGhpcy5oYXNBZGRyZXNzU2VjdGlvblRhcmdldCkgdGhpcy5hZGRyZXNzU2VjdGlvblRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgICAgICBpZiAodGhpcy5oYXNNYWlsQWRkcmVzc1RhcmdldCkgdGhpcy5tYWlsQWRkcmVzc1RhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5waWNrdXBUYWJUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTUwMCcpXG4gICAgICAgIHRoaXMucGlja3VwVGFiVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2ZvbnQtYm9sZCcsICdiZy13aGl0ZScsICdzaGFkb3ctc20nLCAndGV4dC1ncmF5LTgwMCcpXG4gICAgICAgIC8vIFx1NjYzRVx1NzkzQVx1ODFFQVx1NTNENlx1NTczMFx1NTc0MFx1RkYwQ1x1OTY5MFx1ODVDRlx1OTBBRVx1NUJDNFx1NTczMFx1NTc0MFxuICAgICAgICBpZiAodGhpcy5oYXNBZGRyZXNzU2VjdGlvblRhcmdldCkgdGhpcy5hZGRyZXNzU2VjdGlvblRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgICBpZiAodGhpcy5oYXNNYWlsQWRkcmVzc1RhcmdldCkgdGhpcy5tYWlsQWRkcmVzc1RhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGluY3JlYXNlKCk6IHZvaWQge1xuICAgIGNvbnN0IGN1cnJlbnRRdHkgPSBwYXJzZUludCh0aGlzLnF1YW50aXR5VGFyZ2V0LnRleHRDb250ZW50IHx8IFwiMVwiKVxuICAgIHRoaXMucXVhbnRpdHlUYXJnZXQudGV4dENvbnRlbnQgPSAoY3VycmVudFF0eSArIDEpLnRvU3RyaW5nKClcbiAgICB0aGlzLnVwZGF0ZVRvdGFsUHJpY2UoKVxuICB9XG5cbiAgZGVjcmVhc2UoKTogdm9pZCB7XG4gICAgY29uc3QgY3VycmVudFF0eSA9IHBhcnNlSW50KHRoaXMucXVhbnRpdHlUYXJnZXQudGV4dENvbnRlbnQgfHwgXCIxXCIpXG4gICAgaWYgKGN1cnJlbnRRdHkgPiAxKSB7XG4gICAgICB0aGlzLnF1YW50aXR5VGFyZ2V0LnRleHRDb250ZW50ID0gKGN1cnJlbnRRdHkgLSAxKS50b1N0cmluZygpXG4gICAgICB0aGlzLnVwZGF0ZVRvdGFsUHJpY2UoKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlVG90YWxQcmljZSgpOiB2b2lkIHtcbiAgICBjb25zdCBxdWFudGl0eSA9IHBhcnNlSW50KHRoaXMucXVhbnRpdHlUYXJnZXQudGV4dENvbnRlbnQgfHwgXCIxXCIpXG4gICAgY29uc3QgdG90YWwgPSB0aGlzLmRhaWx5UHJpY2UgKiB0aGlzLmRheXMgKiBxdWFudGl0eVxuICAgIGlmICh0aGlzLmhhc1RvdGFsUHJpY2VUYXJnZXQpIHtcbiAgICAgIHRoaXMudG90YWxQcmljZVRhcmdldC50ZXh0Q29udGVudCA9IHRvdGFsLnRvRml4ZWQoMClcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVBheW1lbnRCdXR0b24oKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ1tXaUZpXSB1cGRhdGVQYXltZW50QnV0dG9uIGNhbGxlZCwgc2VsZWN0ZWRQbGFuSWQ6JywgdGhpcy5zZWxlY3RlZFBsYW5JZClcbiAgICBjb25zdCBwYXltZW50TGluayA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdhI3dpZmktcGF5bWVudC1saW5rJykgYXMgSFRNTEFuY2hvckVsZW1lbnRcbiAgICBjb25zb2xlLmxvZygnW1dpRmldIEZvdW5kIHBheW1lbnRMaW5rOicsIHBheW1lbnRMaW5rKVxuICAgIGlmIChwYXltZW50TGluayAmJiB0aGlzLnNlbGVjdGVkUGxhbklkKSB7XG4gICAgICAvLyBcdTY2RjRcdTY1QjBsaW5rXHU3Njg0aHJlZlx1RkYwQ1x1NEZFRVx1NjUzOW9yZGVyYWJsZV9pZFx1NTNDMlx1NjU3MFxuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChwYXltZW50TGluay5ocmVmKVxuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ29yZGVyYWJsZV9pZCcsIHRoaXMuc2VsZWN0ZWRQbGFuSWQpXG4gICAgICBwYXltZW50TGluay5ocmVmID0gdXJsLnRvU3RyaW5nKClcbiAgICAgIGNvbnNvbGUubG9nKCdbV2lGaV0gVXBkYXRlZCBwYXltZW50TGluayBocmVmIHRvOicsIHBheW1lbnRMaW5rLmhyZWYpXG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJxdWFudGl0eVwiLCBcInRvdGFsUHJpY2VcIl1cbiAgZGVjbGFyZSByZWFkb25seSBxdWFudGl0eVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSB0b3RhbFByaWNlVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc1RvdGFsUHJpY2VUYXJnZXQ6IGJvb2xlYW5cblxuICBwcml2YXRlIGJhc2VQcmljZTogbnVtYmVyID0gMFxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJJbnRlcm5ldE9yZGVyRm9ybSBjb25uZWN0ZWRcIilcbiAgICBjb25zdCB0b3RhbFByaWNlRmllbGQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaW50ZXJuZXQtb3JkZXItZm9ybS10YXJnZXQ9XCJ0b3RhbFByaWNlRmllbGRcIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgaWYgKHRvdGFsUHJpY2VGaWVsZCkge1xuICAgICAgdGhpcy5iYXNlUHJpY2UgPSBwYXJzZUZsb2F0KHRvdGFsUHJpY2VGaWVsZC52YWx1ZSkgfHwgMFxuICAgIH1cbiAgfVxuXG4gIHNlbGVjdEFkZHJlc3MoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgcmFkaW8gPSBldmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IHNlbGVjdGVkSW5kZXggPSBwYXJzZUludChyYWRpby52YWx1ZSlcbiAgICBcbiAgICAvLyBcdTYyN0VcdTUyMzBcdTYyNDBcdTY3MDlcdTU3MzBcdTU3NDBcdTc2ODRsYWJlbFxuICAgIGNvbnN0IGxhYmVscyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1pbnRlcm5ldC1vcmRlci1mb3JtLXRhcmdldD1cIm1haWxTZWN0aW9uXCJdIGxhYmVsJylcbiAgICBcbiAgICBsYWJlbHMuZm9yRWFjaCgobGFiZWwsIGluZGV4KSA9PiB7XG4gICAgICAvLyBcdTY2RjRcdTY1QjBcdTY4MzdcdTVGMEZcbiAgICAgIGlmIChpbmRleCA9PT0gc2VsZWN0ZWRJbmRleCkge1xuICAgICAgICBsYWJlbC5jbGFzc0xpc3QuYWRkKCdib3JkZXItWyNGRkREMDBdJywgJ2JnLVsjRkZGRUY4XScpXG4gICAgICAgIGxhYmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1ncmF5LTIwMCcpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsYWJlbC5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItWyNGRkREMDBdJywgJ2JnLVsjRkZGRUY4XScpXG4gICAgICAgIGxhYmVsLmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1ncmF5LTIwMCcpXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEVuYWJsZS9kaXNhYmxlXHU1QkY5XHU1RTk0XHU3Njg0aGlkZGVuIGZpZWxkc1xuICAgICAgY29uc3QgaGlkZGVuRmllbGRzID0gbGFiZWwucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImhpZGRlblwiXScpXG4gICAgICBoaWRkZW5GaWVsZHMuZm9yRWFjaCgoZmllbGQpID0+IHtcbiAgICAgICAgKGZpZWxkIGFzIEhUTUxJbnB1dEVsZW1lbnQpLmRpc2FibGVkID0gKGluZGV4ICE9PSBzZWxlY3RlZEluZGV4KVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgc2VsZWN0UGFzc2VuZ2VyKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHJhZGlvID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBzZWxlY3RlZEluZGV4ID0gcGFyc2VJbnQocmFkaW8udmFsdWUpXG4gICAgXG4gICAgLy8gXHU2MjdFXHU1MjMwXHU2MjQwXHU2NzA5XHU0RTU4XHU1QkEyXHU3Njg0bGFiZWxcbiAgICBjb25zdCBsYWJlbHMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtaW50ZXJuZXQtb3JkZXItZm9ybS10YXJnZXQ9XCJwaWNrdXBTZWN0aW9uXCJdIGxhYmVsJylcbiAgICBcbiAgICBsYWJlbHMuZm9yRWFjaCgobGFiZWwsIGluZGV4KSA9PiB7XG4gICAgICAvLyBcdTY2RjRcdTY1QjBcdTY4MzdcdTVGMEZcbiAgICAgIGlmIChpbmRleCA9PT0gc2VsZWN0ZWRJbmRleCkge1xuICAgICAgICBsYWJlbC5jbGFzc0xpc3QuYWRkKCdib3JkZXItWyNGRkREMDBdJywgJ2JnLVsjRkZGRUY4XScpXG4gICAgICAgIGxhYmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1ncmF5LTIwMCcpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsYWJlbC5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItWyNGRkREMDBdJywgJ2JnLVsjRkZGRUY4XScpXG4gICAgICAgIGxhYmVsLmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1ncmF5LTIwMCcpXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEVuYWJsZS9kaXNhYmxlXHU1QkY5XHU1RTk0XHU3Njg0aGlkZGVuIGZpZWxkc1xuICAgICAgY29uc3QgaGlkZGVuRmllbGRzID0gbGFiZWwucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImhpZGRlblwiXScpXG4gICAgICBoaWRkZW5GaWVsZHMuZm9yRWFjaCgoZmllbGQpID0+IHtcbiAgICAgICAgKGZpZWxkIGFzIEhUTUxJbnB1dEVsZW1lbnQpLmRpc2FibGVkID0gKGluZGV4ICE9PSBzZWxlY3RlZEluZGV4KVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgaW5jcmVhc2UoKTogdm9pZCB7XG4gICAgY29uc3QgY3VycmVudFF0eSA9IHBhcnNlSW50KHRoaXMucXVhbnRpdHlUYXJnZXQudGV4dENvbnRlbnQgfHwgXCIxXCIpXG4gICAgY29uc3QgbmV3UXR5ID0gY3VycmVudFF0eSArIDFcbiAgICB0aGlzLnF1YW50aXR5VGFyZ2V0LnRleHRDb250ZW50ID0gbmV3UXR5LnRvU3RyaW5nKClcbiAgICB0aGlzLnVwZGF0ZVF1YW50aXR5RmllbGQobmV3UXR5KVxuICAgIHRoaXMudXBkYXRlVG90YWxQcmljZShuZXdRdHkpXG4gIH1cblxuICBkZWNyZWFzZSgpOiB2b2lkIHtcbiAgICBjb25zdCBjdXJyZW50UXR5ID0gcGFyc2VJbnQodGhpcy5xdWFudGl0eVRhcmdldC50ZXh0Q29udGVudCB8fCBcIjFcIilcbiAgICBpZiAoY3VycmVudFF0eSA+IDEpIHtcbiAgICAgIGNvbnN0IG5ld1F0eSA9IGN1cnJlbnRRdHkgLSAxXG4gICAgICB0aGlzLnF1YW50aXR5VGFyZ2V0LnRleHRDb250ZW50ID0gbmV3UXR5LnRvU3RyaW5nKClcbiAgICAgIHRoaXMudXBkYXRlUXVhbnRpdHlGaWVsZChuZXdRdHkpXG4gICAgICB0aGlzLnVwZGF0ZVRvdGFsUHJpY2UobmV3UXR5KVxuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZVJlbnRhbERheXMoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgaW5wdXQgPSBldmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IGRheXMgPSBwYXJzZUludChpbnB1dC52YWx1ZSkgfHwgMVxuICAgIHRoaXMudXBkYXRlVG90YWxQcmljZShkYXlzKVxuICAgIFxuICAgIC8vIFx1NjZGNFx1NjVCMHJlbnRhbF9pbmZvXHU3Njg0aGlkZGVuIGZpZWxkc1xuICAgIGNvbnN0IHJlbnRhbERheXNGaWVsZCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pbnRlcm5ldC1vcmRlci1mb3JtLXRhcmdldD1cInJlbnRhbERheXNGaWVsZFwiXScpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBpZiAocmVudGFsRGF5c0ZpZWxkKSB7XG4gICAgICByZW50YWxEYXlzRmllbGQudmFsdWUgPSBkYXlzLnRvU3RyaW5nKClcbiAgICAgIFxuICAgICAgLy8gXHU4QkExXHU3Qjk3cmV0dXJuX2RhdGVcbiAgICAgIGNvbnN0IHBpY2t1cERhdGVGaWVsZCA9IHJlbnRhbERheXNGaWVsZC5jbG9zZXN0KCdkaXYnKT8ucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZSo9XCJbcGlja3VwX2RhdGVdXCJdJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgICAgY29uc3QgcmV0dXJuRGF0ZUZpZWxkID0gcmVudGFsRGF5c0ZpZWxkLmNsb3Nlc3QoJ2RpdicpPy5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lKj1cIltyZXR1cm5fZGF0ZV1cIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgICBcbiAgICAgIGlmIChwaWNrdXBEYXRlRmllbGQgJiYgcmV0dXJuRGF0ZUZpZWxkKSB7XG4gICAgICAgIGNvbnN0IHBpY2t1cERhdGUgPSBuZXcgRGF0ZShwaWNrdXBEYXRlRmllbGQudmFsdWUpXG4gICAgICAgIGNvbnN0IHJldHVybkRhdGUgPSBuZXcgRGF0ZShwaWNrdXBEYXRlKVxuICAgICAgICByZXR1cm5EYXRlLnNldERhdGUocmV0dXJuRGF0ZS5nZXREYXRlKCkgKyBkYXlzKVxuICAgICAgICByZXR1cm5EYXRlRmllbGQudmFsdWUgPSByZXR1cm5EYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNlbGVjdERlbGl2ZXJ5TWV0aG9kKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHJhZGlvID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBtYWlsU2VjdGlvbiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pbnRlcm5ldC1vcmRlci1mb3JtLXRhcmdldD1cIm1haWxTZWN0aW9uXCJdJylcbiAgICBjb25zdCBwaWNrdXBTZWN0aW9uID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWludGVybmV0LW9yZGVyLWZvcm0tdGFyZ2V0PVwicGlja3VwU2VjdGlvblwiXScpXG4gICAgY29uc3QgbWFpbExhYmVsID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWludGVybmV0LW9yZGVyLWZvcm0tdGFyZ2V0PVwibWFpbExhYmVsXCJdJylcbiAgICBjb25zdCBwaWNrdXBMYWJlbCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pbnRlcm5ldC1vcmRlci1mb3JtLXRhcmdldD1cInBpY2t1cExhYmVsXCJdJylcblxuICAgIGlmIChyYWRpby52YWx1ZSA9PT0gJ21haWwnKSB7XG4gICAgICBtYWlsU2VjdGlvbj8uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgIHBpY2t1cFNlY3Rpb24/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICBtYWlsTGFiZWw/LmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1bI0ZGREQwMF0nLCAnYmctWyNGRkZFRjhdJylcbiAgICAgIHBpY2t1cExhYmVsPy5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItWyNGRkREMDBdJywgJ2JnLVsjRkZGRUY4XScpXG4gICAgfSBlbHNlIHtcbiAgICAgIG1haWxTZWN0aW9uPy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgICAgcGlja3VwU2VjdGlvbj8uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgIHBpY2t1cExhYmVsPy5jbGFzc0xpc3QuYWRkKCdib3JkZXItWyNGRkREMDBdJywgJ2JnLVsjRkZGRUY4XScpXG4gICAgICBtYWlsTGFiZWw/LmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1bI0ZGREQwMF0nLCAnYmctWyNGRkZFRjhdJylcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVF1YW50aXR5RmllbGQocXVhbnRpdHk6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IHF1YW50aXR5RmllbGQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaW50ZXJuZXQtb3JkZXItZm9ybS10YXJnZXQ9XCJxdWFudGl0eUZpZWxkXCJdJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGlmIChxdWFudGl0eUZpZWxkKSB7XG4gICAgICBxdWFudGl0eUZpZWxkLnZhbHVlID0gcXVhbnRpdHkudG9TdHJpbmcoKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlVG90YWxQcmljZShtdWx0aXBsaWVyOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCB0b3RhbCA9IHRoaXMuYmFzZVByaWNlICogbXVsdGlwbGllclxuICAgIGlmICh0aGlzLmhhc1RvdGFsUHJpY2VUYXJnZXQpIHtcbiAgICAgIHRoaXMudG90YWxQcmljZVRhcmdldC50ZXh0Q29udGVudCA9IHRvdGFsLnRvRml4ZWQoMClcbiAgICB9XG4gICAgY29uc3QgdG90YWxQcmljZUZpZWxkID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWludGVybmV0LW9yZGVyLWZvcm0tdGFyZ2V0PVwidG90YWxQcmljZUZpZWxkXCJdJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGlmICh0b3RhbFByaWNlRmllbGQpIHtcbiAgICAgIHRvdGFsUHJpY2VGaWVsZC52YWx1ZSA9IHRvdGFsLnRvU3RyaW5nKClcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzZWxlY3QoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIC8vIFVwZGF0ZSBVSSB0byBzaG93IHRoaXMgY2FyZCBpcyBzZWxlY3RlZFxuICAgIGNvbnN0IGNhcmQgPSB0aGlzLmVsZW1lbnRcbiAgICAvLyBSZW1vdmUgc2VsZWN0aW9uIGZyb20gYWxsIG90aGVyIGNhcmRzXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtY29udHJvbGxlcj1cInByb2R1Y3QtY2FyZFwiXScpLmZvckVhY2goZWwgPT4ge1xuICAgICAgY29uc3QgY2hlY2tib3ggPSBlbC5xdWVyeVNlbGVjdG9yKCcudy01LmgtNS5yb3VuZGVkLWZ1bGwnKVxuICAgICAgaWYgKGNoZWNrYm94ICYmICFjaGVja2JveC5jbGFzc0xpc3QuY29udGFpbnMoJ2JvcmRlcicpKSB7XG4gICAgICAgIC8vIEFscmVhZHkgc2VsZWN0ZWQsIGNvbnZlcnQgdG8gdW5zZWxlY3RlZFxuICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItWyNGRkNDMDBdJywgJ2JnLVsjRkZGRUY4XScpXG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1ncmF5LTEwMCcsICdiZy13aGl0ZScpXG4gICAgICB9XG4gICAgfSlcbiAgICAvLyBBZGQgc2VsZWN0aW9uIHRvIHRoaXMgY2FyZFxuICAgIGNhcmQuY2xhc3NMaXN0LnJlbW92ZSgnYm9yZGVyLWdyYXktMTAwJywgJ2JnLXdoaXRlJylcbiAgICBjYXJkLmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1bI0ZGQ0MwMF0nLCAnYmctWyNGRkZFRjhdJylcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wicXVhbnRpdHlcIiwgXCJ0b3RhbFByaWNlXCJdXG4gIHN0YXRpYyB2YWx1ZXMgPSB7IG9yZGVyYWJsZVR5cGU6IFN0cmluZyB9XG4gIGRlY2xhcmUgcmVhZG9ubHkgcXVhbnRpdHlUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgdG90YWxQcmljZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBvcmRlcmFibGVUeXBlVmFsdWU6IHN0cmluZ1xuXG4gIHByaXZhdGUgYmFzZVByaWNlOiBudW1iZXIgPSA5LjlcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIEdldCBiYXNlIHByaWNlIGZyb20gZmlyc3QgcHJvZHVjdFxuICAgIGNvbnN0IGZpcnN0UHJvZHVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNvbnRyb2xsZXI9XCJwcm9kdWN0LWNhcmRcIl0nKVxuICAgIGlmIChmaXJzdFByb2R1Y3QpIHtcbiAgICAgIGNvbnN0IHByaWNlRWwgPSBmaXJzdFByb2R1Y3QucXVlcnlTZWxlY3RvcignLnRleHQteGwuZm9udC1ib2xkLnRleHQtXFxcXFtcXFxcI0ZGNDQwMFxcXFxdJylcbiAgICAgIGlmIChwcmljZUVsKSB7XG4gICAgICAgIHRoaXMuYmFzZVByaWNlID0gcGFyc2VGbG9hdChwcmljZUVsLnRleHRDb250ZW50IHx8ICc5LjknKVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnVwZGF0ZVRvdGFsUHJpY2UoKVxuICB9XG5cbiAgZGVjcmVhc2UoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGN1cnJlbnRRdHkgPSBwYXJzZUludCh0aGlzLnF1YW50aXR5VGFyZ2V0LnRleHRDb250ZW50IHx8ICcxJylcbiAgICBpZiAoY3VycmVudFF0eSA+IDEpIHtcbiAgICAgIHRoaXMucXVhbnRpdHlUYXJnZXQudGV4dENvbnRlbnQgPSAoY3VycmVudFF0eSAtIDEpLnRvU3RyaW5nKClcbiAgICAgIHRoaXMudXBkYXRlVG90YWxQcmljZSgpXG4gICAgfVxuICB9XG5cbiAgaW5jcmVhc2UoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGN1cnJlbnRRdHkgPSBwYXJzZUludCh0aGlzLnF1YW50aXR5VGFyZ2V0LnRleHRDb250ZW50IHx8ICcxJylcbiAgICB0aGlzLnF1YW50aXR5VGFyZ2V0LnRleHRDb250ZW50ID0gKGN1cnJlbnRRdHkgKyAxKS50b1N0cmluZygpXG4gICAgdGhpcy51cGRhdGVUb3RhbFByaWNlKClcbiAgfVxuXG4gIGNoZWNrb3V0KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBcbiAgICAvLyBGaW5kIHNlbGVjdGVkIHByb2R1Y3QgYnkgY2hlY2tpbmcgYWxsIHByb2R1Y3QgY2FyZHNcbiAgICBjb25zdCBhbGxDYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWNvbnRyb2xsZXI9XCJwcm9kdWN0LWNhcmRcIl0nKVxuICAgIGxldCBzZWxlY3RlZENhcmQ6IEVsZW1lbnQgfCBudWxsID0gbnVsbFxuICAgIFxuICAgIC8vIEZpbmQgdGhlIGNhcmQgd2l0aCB5ZWxsb3cgYm9yZGVyIChGRkNDMDApXG4gICAgYWxsQ2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgICAgY29uc3QgY2xhc3NlcyA9IGNhcmQuY2xhc3NOYW1lXG4gICAgICBpZiAoY2xhc3Nlcy5pbmNsdWRlcygnRkZDQzAwJykgfHwgY2xhc3Nlcy5pbmNsdWRlcygnYm9yZGVyLVsjRkZDQzAwXScpKSB7XG4gICAgICAgIHNlbGVjdGVkQ2FyZCA9IGNhcmRcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIC8vIEZhbGxiYWNrOiBpZiBubyBjYXJkIHNlbGVjdGVkLCB1c2UgdGhlIGZpcnN0IGNhcmQgKGRlZmF1bHQgc2VsZWN0ZWQpXG4gICAgaWYgKCFzZWxlY3RlZENhcmQgJiYgYWxsQ2FyZHMubGVuZ3RoID4gMCkge1xuICAgICAgc2VsZWN0ZWRDYXJkID0gYWxsQ2FyZHNbMF1cbiAgICB9XG4gICAgXG4gICAgaWYgKCFzZWxlY3RlZENhcmQpIHtcbiAgICAgIGFsZXJ0KCdcdThCRjdcdTkwMDlcdTYyRTlcdTRFMDBcdTRFMkFTSU1cdTUzNjFcdTRFQTdcdTU0QzEnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3Qgb3JkZXJhYmxlSWQgPSAoc2VsZWN0ZWRDYXJkIGFzIEhUTUxFbGVtZW50KS5kYXRhc2V0LnByb2R1Y3RJZFxuICAgIGNvbnN0IG9yZGVyYWJsZVR5cGUgPSB0aGlzLm9yZGVyYWJsZVR5cGVWYWx1ZVxuICAgIGNvbnN0IHF1YW50aXR5ID0gdGhpcy5xdWFudGl0eVRhcmdldC50ZXh0Q29udGVudFxuXG4gICAgLy8gTmF2aWdhdGUgdG8gb3JkZXIgcGFnZSB3aXRoIHBhcmFtc1xuICAgIGNvbnN0IHVybCA9IGAvaW50ZXJuZXRfb3JkZXJzL25ldz9vcmRlcmFibGVfdHlwZT0ke29yZGVyYWJsZVR5cGV9Jm9yZGVyYWJsZV9pZD0ke29yZGVyYWJsZUlkfSZxdWFudGl0eT0ke3F1YW50aXR5fWBcbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybFxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVUb3RhbFByaWNlKCk6IHZvaWQge1xuICAgIGNvbnN0IHF1YW50aXR5ID0gcGFyc2VJbnQodGhpcy5xdWFudGl0eVRhcmdldC50ZXh0Q29udGVudCB8fCAnMScpXG4gICAgY29uc3QgdG90YWwgPSB0aGlzLmJhc2VQcmljZSAqIHF1YW50aXR5XG4gICAgdGhpcy50b3RhbFByaWNlVGFyZ2V0LnRleHRDb250ZW50ID0gdG90YWwudG9GaXhlZCgxKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJtb2RhbFwiLCBcImNvbnRlbnRcIl1cblxuICBkZWNsYXJlIHJlYWRvbmx5IG1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNvbnRlbnRUYXJnZXQ6IEhUTUxFbGVtZW50XG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlFyY29kZU1vZGFsIGNvbnRyb2xsZXIgY29ubmVjdGVkXCIpXG4gIH1cblxuICAvLyBcdTY2M0VcdTc5M0FcdTRFOENcdTdFRjRcdTc4MDFcdTVGMzlcdTdBOTdcbiAgc2hvdyhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgLy8gXHU2REZCXHU1MkEwXHU2REUxXHU1MTY1XHU1MkE4XHU3NTNCXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmNvbnRlbnRUYXJnZXQuY2xhc3NMaXN0LmFkZChcInNjYWxlLTEwMFwiLCBcIm9wYWNpdHktMTAwXCIpXG4gICAgfSwgMTApXG4gIH1cblxuICAvLyBcdTk2OTBcdTg1Q0ZcdTRFOENcdTdFRjRcdTc4MDFcdTVGMzlcdTdBOTdcbiAgaGlkZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLy8gXHU2REZCXHU1MkEwXHU2REUxXHU1MUZBXHU1MkE4XHU3NTNCXG4gICAgdGhpcy5jb250ZW50VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJzY2FsZS0xMDBcIiwgXCJvcGFjaXR5LTEwMFwiKVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgfSwgMjAwKVxuICB9XG5cbiAgLy8gXHU3MEI5XHU1MUZCXHU4MENDXHU2NjZGXHU1MTczXHU5NUVEXHU1RjM5XHU3QTk3XG4gIGJhY2tkcm9wQ2xpY2soZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gdGhpcy5tb2RhbFRhcmdldCkge1xuICAgICAgdGhpcy5oaWRlKGV2ZW50KVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwibW9kYWxcIixcbiAgICBcInNlYXJjaElucHV0XCIsXG4gICAgXCJsb2NhdGlvbkxpc3RcIixcbiAgICBcImxvY2F0aW9uSW5wdXRcIixcbiAgICBcImxvY2F0aW9uRGlzcGxheVwiLFxuICAgIFwicmVjZW50U2VjdGlvblwiLFxuICAgIFwicmVjZW50TGlzdFwiXG4gIF1cblxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIGxvY2F0aW9uVHlwZTogU3RyaW5nLCAvLyBcImZyb21cIiBvciBcInRvXCJcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2VhcmNoSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBsb2NhdGlvbkxpc3RUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbG9jYXRpb25JbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGxvY2F0aW9uRGlzcGxheVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSByZWNlbnRTZWN0aW9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHJlY2VudExpc3RUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzTG9jYXRpb25JbnB1dFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0xvY2F0aW9uRGlzcGxheVRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGxvY2F0aW9uVHlwZVZhbHVlOiBzdHJpbmdcblxuICBwcml2YXRlIHNlbGVjdGVkTG9jYXRpb246IHsgbmFtZTogc3RyaW5nOyBhZGRyZXNzOiBzdHJpbmcgfSB8IG51bGwgPSBudWxsXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkxvY2F0aW9uU2VsZWN0b3IgY29ubmVjdGVkXCIpXG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiTG9jYXRpb25TZWxlY3RvciBkaXNjb25uZWN0ZWRcIilcbiAgfVxuXG4gIG9wZW5Nb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICB0aGlzLnNlYXJjaElucHV0VGFyZ2V0LnZhbHVlID0gXCJcIlxuICAgIHRoaXMuc2VhcmNoSW5wdXRUYXJnZXQuZm9jdXMoKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiXG4gIH1cblxuICBjbG9zZU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcIlwiXG4gIH1cblxuICBzdG9wUHJvcGFnYXRpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgfVxuXG4gIHNlbGVjdExvY2F0aW9uKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBuYW1lID0gYnV0dG9uLmRhdGFzZXQubG9jYXRpb25OYW1lIHx8IFwiXCJcbiAgICBjb25zdCBhZGRyZXNzID0gYnV0dG9uLmRhdGFzZXQubG9jYXRpb25BZGRyZXNzIHx8IFwiXCJcbiAgICBcbiAgICB0aGlzLnNlbGVjdGVkTG9jYXRpb24gPSB7IG5hbWUsIGFkZHJlc3MgfVxuXG4gICAgLy8gVXBkYXRlIFVJIHRvIHNob3cgc2VsZWN0ZWQgc3RhdGVcbiAgICB0aGlzLmxvY2F0aW9uTGlzdFRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKFwiYnV0dG9uXCIpLmZvckVhY2goYnRuID0+IHtcbiAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiYmctcHJpbWFyeS1saWdodFwiLCBcImJvcmRlci1wcmltYXJ5XCIpXG4gICAgfSlcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZChcImJnLXByaW1hcnktbGlnaHRcIiwgXCJib3JkZXJcIiwgXCJib3JkZXItcHJpbWFyeVwiKVxuICB9XG5cbiAgY29uZmlybSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuc2VsZWN0ZWRMb2NhdGlvbikge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGhpZGRlbiBpbnB1dCBmaWVsZCBpZiBleGlzdHNcbiAgICBpZiAodGhpcy5oYXNMb2NhdGlvbklucHV0VGFyZ2V0KSB7XG4gICAgICB0aGlzLmxvY2F0aW9uSW5wdXRUYXJnZXQudmFsdWUgPSB0aGlzLnNlbGVjdGVkTG9jYXRpb24ubmFtZVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBkaXNwbGF5IGVsZW1lbnQgaWYgZXhpc3RzXG4gICAgaWYgKHRoaXMuaGFzTG9jYXRpb25EaXNwbGF5VGFyZ2V0KSB7XG4gICAgICB0aGlzLmxvY2F0aW9uRGlzcGxheVRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMuc2VsZWN0ZWRMb2NhdGlvbi5uYW1lXG4gICAgICB0aGlzLmxvY2F0aW9uRGlzcGxheVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwidGV4dC10ZXh0LW11dGVkXCIpXG4gICAgICB0aGlzLmxvY2F0aW9uRGlzcGxheVRhcmdldC5jbGFzc0xpc3QuYWRkKFwidGV4dC10ZXh0LXByaW1hcnlcIilcbiAgICB9XG5cbiAgICAvLyBTYXZlIHRvIHJlY2VudCBsb2NhdGlvbnNcbiAgICB0aGlzLnNhdmVUb1JlY2VudCh0aGlzLnNlbGVjdGVkTG9jYXRpb24pXG5cbiAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICB9XG5cbiAgc2VhcmNoKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGlucHV0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBjb25zdCBxdWVyeSA9IGlucHV0LnZhbHVlLnRvTG93ZXJDYXNlKCkudHJpbSgpXG5cbiAgICBjb25zdCBidXR0b25zID0gdGhpcy5sb2NhdGlvbkxpc3RUYXJnZXQucXVlcnlTZWxlY3RvckFsbChcImJ1dHRvbltkYXRhLWxvY2F0aW9uLW5hbWVdXCIpXG4gICAgXG4gICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gYnV0dG9uIGFzIEhUTUxFbGVtZW50XG4gICAgICBjb25zdCBuYW1lID0gZWxlbWVudC5kYXRhc2V0LmxvY2F0aW9uTmFtZT8udG9Mb3dlckNhc2UoKSB8fCBcIlwiXG4gICAgICBjb25zdCBhZGRyZXNzID0gZWxlbWVudC5kYXRhc2V0LmxvY2F0aW9uQWRkcmVzcz8udG9Mb3dlckNhc2UoKSB8fCBcIlwiXG4gICAgICBcbiAgICAgIGlmIChuYW1lLmluY2x1ZGVzKHF1ZXJ5KSB8fCBhZGRyZXNzLmluY2x1ZGVzKHF1ZXJ5KSkge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBwcml2YXRlIHNhdmVUb1JlY2VudChsb2NhdGlvbjogeyBuYW1lOiBzdHJpbmc7IGFkZHJlc3M6IHN0cmluZyB9KTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGtleSA9IFwicmVjZW50X3RyYW5zZmVyX2xvY2F0aW9uc1wiXG4gICAgICBjb25zdCBzdG9yZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpXG4gICAgICBsZXQgcmVjZW50OiBBcnJheTx7IG5hbWU6IHN0cmluZzsgYWRkcmVzczogc3RyaW5nIH0+ID0gc3RvcmVkID8gSlNPTi5wYXJzZShzdG9yZWQpIDogW11cblxuICAgICAgLy8gUmVtb3ZlIGlmIGFscmVhZHkgZXhpc3RzXG4gICAgICByZWNlbnQgPSByZWNlbnQuZmlsdGVyKGxvYyA9PiBsb2MubmFtZSAhPT0gbG9jYXRpb24ubmFtZSlcblxuICAgICAgLy8gQWRkIHRvIGZyb250XG4gICAgICByZWNlbnQudW5zaGlmdChsb2NhdGlvbilcblxuICAgICAgLy8gS2VlcCBvbmx5IGxhc3QgNVxuICAgICAgcmVjZW50ID0gcmVjZW50LnNsaWNlKDAsIDUpXG5cbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkocmVjZW50KSlcblxuICAgICAgLy8gVXBkYXRlIFVJXG4gICAgICB0aGlzLnVwZGF0ZVJlY2VudExpc3QocmVjZW50KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHNhdmUgcmVjZW50IGxvY2F0aW9uOlwiLCBlcnJvcilcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVJlY2VudExpc3QobG9jYXRpb25zOiBBcnJheTx7IG5hbWU6IHN0cmluZzsgYWRkcmVzczogc3RyaW5nIH0+KTogdm9pZCB7XG4gICAgaWYgKGxvY2F0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMucmVjZW50U2VjdGlvblRhcmdldC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB0aGlzLnJlY2VudFNlY3Rpb25UYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgIFxuICAgIGNvbnN0IGh0bWwgPSBsb2NhdGlvbnMubWFwKGxvYyA9PiBgXG4gICAgICA8YnV0dG9uXG4gICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICBkYXRhLWFjdGlvbj1cImNsaWNrLT5sb2NhdGlvbi1zZWxlY3RvciNzZWxlY3RMb2NhdGlvblwiXG4gICAgICAgIGRhdGEtbG9jYXRpb24tbmFtZT1cIiR7bG9jLm5hbWV9XCJcbiAgICAgICAgZGF0YS1sb2NhdGlvbi1hZGRyZXNzPVwiJHtsb2MuYWRkcmVzc31cIlxuICAgICAgICBjbGFzcz1cInctZnVsbCB0ZXh0LWxlZnQgcC0zIHJvdW5kZWQtbGcgaG92ZXI6Ymctc3VyZmFjZS1ob3ZlciB0cmFuc2l0aW9uLWNvbG9yc1wiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBpdGVtcy1zdGFydFwiPlxuICAgICAgICAgIDxzdmcgY2xhc3M9XCJ3LTUgaC01IHRleHQtdGV4dC1tdXRlZCBtdC0wLjUgbXItMyBmbGV4LXNocmluay0wXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIj5cbiAgICAgICAgICAgIDxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiBkPVwiTTUuMDUgNC4wNWE3IDcgMCAxMTkuOSA5LjlMMTAgMTguOWwtNC45NS00Ljk1YTcgNyAwIDAxMC05Ljl6TTEwIDExYTIgMiAwIDEwMC00IDIgMiAwIDAwMCA0elwiIGNsaXAtcnVsZT1cImV2ZW5vZGRcIi8+XG4gICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgtMVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtdGV4dC1wcmltYXJ5IGZvbnQtbWVkaXVtXCI+JHtsb2MubmFtZX08L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LXhzIHRleHQtdGV4dC1tdXRlZCBtdC0wLjVcIj4ke2xvYy5hZGRyZXNzfTwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvYnV0dG9uPlxuICAgIGApLmpvaW4oXCJcIilcblxuICAgIHRoaXMucmVjZW50TGlzdFRhcmdldC5pbm5lckhUTUwgPSBodG1sXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIHRyYW5zZmVyVHlwZTogU3RyaW5nLFxuICAgIHNlcnZpY2VUeXBlOiBTdHJpbmcsXG4gICAgZmxpZ2h0SWQ6IFN0cmluZyxcbiAgICB0cmFpbklkOiBTdHJpbmdcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgdHJhbnNmZXJUeXBlVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHJlYWRvbmx5IHNlcnZpY2VUeXBlVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHJlYWRvbmx5IGZsaWdodElkVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHJlYWRvbmx5IHRyYWluSWRWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlRyYW5zZmVyU2VhcmNoIGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgaGFuZGxlU2VhcmNoKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBcbiAgICAvLyBHZXQgbG9jYXRpb25fdG8gZnJvbSB0aGUgaGlkZGVuIGlucHV0XG4gICAgY29uc3QgbG9jYXRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWxvY2F0aW9uLXNlbGVjdG9yLXRhcmdldD1cImxvY2F0aW9uSW5wdXRcIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgY29uc3QgbG9jYXRpb25UbyA9IGxvY2F0aW9uSW5wdXQ/LnZhbHVlXG4gICAgXG4gICAgaWYgKCFsb2NhdGlvblRvIHx8IGxvY2F0aW9uVG8udHJpbSgpID09PSAnJykge1xuICAgICAgLy8gU2hvdyBhbGVydCBpZiBsb2NhdGlvbiBub3Qgc2VsZWN0ZWRcbiAgICAgIGFsZXJ0KCdcdThCRjdcdTUxNDhcdTkwMDlcdTYyRTlcdTRFMEJcdThGNjZcdTcwQjknKVxuICAgICAgXG4gICAgICAvLyBUcmlnZ2VyIG1vZGFsIG9wZW5cbiAgICAgIGNvbnN0IG1vZGFsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtYWN0aW9uPVwiY2xpY2stPmxvY2F0aW9uLXNlbGVjdG9yI29wZW5Nb2RhbFwiXScpIGFzIEhUTUxCdXR0b25FbGVtZW50XG4gICAgICBpZiAobW9kYWxCdXR0b24pIHtcbiAgICAgICAgbW9kYWxCdXR0b24uY2xpY2soKVxuICAgICAgfVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIEdldCBsb2NhdGlvbl9mcm9tIGJhc2VkIG9uIGZsaWdodCBvciB0cmFpblxuICAgIGxldCBsb2NhdGlvbkZyb20gPSAnJ1xuICAgIGlmICh0aGlzLmZsaWdodElkVmFsdWUpIHtcbiAgICAgIC8vIEZvciBmbGlnaHRzLCBnZXQgYWlycG9ydCBmcm9tIHRoZSBwYWdlXG4gICAgICBjb25zdCBmbGlnaHRMb2NhdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGV4dC14bC5mb250LWJvbGQudGV4dC10ZXh0LXByaW1hcnknKSBhcyBIVE1MRWxlbWVudFxuICAgICAgbG9jYXRpb25Gcm9tID0gZmxpZ2h0TG9jYXRpb25FbGVtZW50Py50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnXG4gICAgfSBlbHNlIGlmICh0aGlzLnRyYWluSWRWYWx1ZSkge1xuICAgICAgLy8gRm9yIHRyYWlucywgZ2V0IHN0YXRpb24gZnJvbSB0aGUgcGFnZVxuICAgICAgY29uc3QgdHJhaW5Mb2NhdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGV4dC14bC5mb250LWJvbGQudGV4dC10ZXh0LXByaW1hcnknKSBhcyBIVE1MRWxlbWVudFxuICAgICAgbG9jYXRpb25Gcm9tID0gdHJhaW5Mb2NhdGlvbkVsZW1lbnQ/LnRleHRDb250ZW50Py50cmltKCkgfHwgJydcbiAgICB9XG4gICAgXG4gICAgLy8gQnVpbGQgVVJMIHdpdGggYWxsIHBhcmFtZXRlcnNcbiAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKClcbiAgICBwYXJhbXMuYXBwZW5kKCd0cmFuc2Zlcl90eXBlJywgdGhpcy50cmFuc2ZlclR5cGVWYWx1ZSlcbiAgICBwYXJhbXMuYXBwZW5kKCdzZXJ2aWNlX3R5cGUnLCB0aGlzLnNlcnZpY2VUeXBlVmFsdWUpXG4gICAgcGFyYW1zLmFwcGVuZCgnbG9jYXRpb25fdG8nLCBsb2NhdGlvblRvKVxuICAgIFxuICAgIGlmIChsb2NhdGlvbkZyb20pIHtcbiAgICAgIHBhcmFtcy5hcHBlbmQoJ2xvY2F0aW9uX2Zyb20nLCBsb2NhdGlvbkZyb20pXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLmZsaWdodElkVmFsdWUpIHtcbiAgICAgIHBhcmFtcy5hcHBlbmQoJ2ZsaWdodF9pZCcsIHRoaXMuZmxpZ2h0SWRWYWx1ZSlcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMudHJhaW5JZFZhbHVlKSB7XG4gICAgICBwYXJhbXMuYXBwZW5kKCd0cmFpbl9pZCcsIHRoaXMudHJhaW5JZFZhbHVlKVxuICAgIH1cbiAgICBcbiAgICAvLyBOYXZpZ2F0ZSB0byBwYWNrYWdlcyBwYWdlXG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgL3RyYW5zZmVycy9wYWNrYWdlcz8ke3BhcmFtcy50b1N0cmluZygpfWBcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wibW9kYWxcIiwgXCJuYW1lXCIsIFwicGhvbmVcIiwgXCJhZGRyZXNzXCIsIFwic2VsZWN0ZWRJbmZvXCJdXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgYWRkcmVzc0lkOiBTdHJpbmdcbiAgfVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgbW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbmFtZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBwaG9uZVRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBhZGRyZXNzVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHNlbGVjdGVkSW5mb1RhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSBhZGRyZXNzSWRWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkFkZHJlc3NTZWxlY3RvciBjb25uZWN0ZWRcIilcbiAgfVxuXG4gIG9wZW5Nb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gIH1cblxuICBjbG9zZU1vZGFsKCk6IHZvaWQge1xuICAgIHRoaXMubW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgfVxuXG4gIHNlbGVjdEFkZHJlc3MoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGFkZHJlc3NJZCA9IHRhcmdldC5kYXRhc2V0LmFkZHJlc3NJZCB8fCAnJ1xuICAgIGNvbnN0IG5hbWUgPSB0YXJnZXQuZGF0YXNldC5uYW1lIHx8ICcnXG4gICAgY29uc3QgcGhvbmUgPSB0YXJnZXQuZGF0YXNldC5waG9uZSB8fCAnJ1xuICAgIGNvbnN0IGFkZHJlc3MgPSB0YXJnZXQuZGF0YXNldC5hZGRyZXNzIHx8ICcnXG5cbiAgICAvLyBVcGRhdGUgaGlkZGVuIGZpZWxkXG4gICAgdGhpcy5hZGRyZXNzSWRWYWx1ZSA9IGFkZHJlc3NJZFxuICAgIFxuICAgIC8vIFVwZGF0ZSBkaXNwbGF5XG4gICAgdGhpcy5uYW1lVGFyZ2V0LnRleHRDb250ZW50ID0gbmFtZVxuICAgIHRoaXMucGhvbmVUYXJnZXQudGV4dENvbnRlbnQgPSBwaG9uZVxuICAgIHRoaXMuYWRkcmVzc1RhcmdldC50ZXh0Q29udGVudCA9IGFkZHJlc3NcbiAgICBcbiAgICAvLyBVcGRhdGUgb3JkZXIgY29udHJvbGxlcidzIGRlbGl2ZXJ5IGFkZHJlc3NcbiAgICBjb25zdCB2aXNhT3JkZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtY29udHJvbGxlcio9XCJ2aXNhLW9yZGVyXCJdJylcbiAgICBpZiAodmlzYU9yZGVyRWxlbWVudCkge1xuICAgICAgY29uc3QgaW5wdXQgPSB2aXNhT3JkZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXZpc2Etb3JkZXItdGFyZ2V0PVwiZGVsaXZlcnlBZGRyZXNzXCJdJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgICAgaWYgKGlucHV0KSB7XG4gICAgICAgIGlucHV0LnZhbHVlID0gYWRkcmVzc1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLmNsb3NlTW9kYWwoKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXIge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcImlucHV0XCJdXG5cbiAgZGVjbGFyZSByZWFkb25seSBpbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuXG4gIHNlYXJjaChldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgbGV0IHF1ZXJ5ID0gdGhpcy5pbnB1dFRhcmdldC52YWx1ZS50cmltKClcbiAgICBcbiAgICAvLyBcdTU5ODJcdTY3OUNcdThGOTNcdTUxNjVcdTY4NDZcdTRFM0FcdTdBN0FcdUZGMENcdTRGN0ZcdTc1MjggcGxhY2Vob2xkZXIgXHU3Njg0XHU1MDNDXG4gICAgaWYgKHF1ZXJ5ID09PSBcIlwiKSB7XG4gICAgICBxdWVyeSA9IHRoaXMuaW5wdXRUYXJnZXQucGxhY2Vob2xkZXJcbiAgICB9XG4gICAgXG4gICAgLy8gVE9ETzogSW1wbGVtZW50IGFjdHVhbCBzZWFyY2ggZnVuY3Rpb25hbGl0eVxuICAgIHdpbmRvdy5zaG93VG9hc3QoYFx1NjQxQ1x1N0QyMlwiJHtxdWVyeX1cIlx1NTI5Rlx1ODBGRFx1NTM3M1x1NUMwNlx1NEUwQVx1N0VCRlx1RkYwQ1x1NjU2Q1x1OEJGN1x1NjcxRlx1NUY4NWApXG4gIH1cblxuICBjbGVhcigpOiB2b2lkIHtcbiAgICB0aGlzLmlucHV0VGFyZ2V0LnZhbHVlID0gXCJcIlxuICAgIHRoaXMuaW5wdXRUYXJnZXQuZm9jdXMoKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5pbnRlcmZhY2UgRmlsdGVyU3RhdGUge1xuICBjaXR5OiBzdHJpbmdcbiAgY2hlY2tJbjogc3RyaW5nXG4gIGNoZWNrT3V0OiBzdHJpbmdcbiAgcm9vbXM6IG51bWJlclxuICBhZHVsdHM6IG51bWJlclxuICBjaGlsZHJlbjogbnVtYmVyXG4gIHByaWNlTWluOiBzdHJpbmdcbiAgcHJpY2VNYXg6IHN0cmluZ1xuICBzdGFyTGV2ZWw6IHN0cmluZ1xuICBxdWVyeTogc3RyaW5nXG4gIHRpbWVzdGFtcDogbnVtYmVyXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBwcml2YXRlIHJlYWRvbmx5IFNUT1JBR0VfS0VZID0gJ2hvdGVsX2ZpbHRlcnNfc3RhdGUnXG4gIHByaXZhdGUgcmVhZG9ubHkgRVhQSVJZX1RJTUUgPSAyNCAqIDYwICogNjAgKiAxMDAwIC8vIDI0IGhvdXJzXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkhvdGVsRmlsdGVyUGVyc2lzdGVuY2UgY29ubmVjdGVkXCIpXG4gICAgXG4gICAgLy8gUmVzdG9yZSBmaWx0ZXJzIGZyb20gc2Vzc2lvblN0b3JhZ2Ugd2hlbiBwYWdlIGxvYWRzXG4gICAgdGhpcy5yZXN0b3JlRmlsdGVycygpXG4gICAgXG4gICAgLy8gU2F2ZSBmaWx0ZXJzIHdoZW4gdXNlciBuYXZpZ2F0ZXMgYXdheVxuICAgIHRoaXMuc2V0dXBTYXZlT25OYXZpZ2F0aW9uKClcbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJIb3RlbEZpbHRlclBlcnNpc3RlbmNlIGRpc2Nvbm5lY3RlZFwiKVxuICAgIC8vIFNhdmUgZmlsdGVycyB3aGVuIGNvbnRyb2xsZXIgZGlzY29ubmVjdHMgKHBhZ2UgbmF2aWdhdGlvbilcbiAgICB0aGlzLnNhdmVGaWx0ZXJzKClcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBsaXN0ZW5lcnMgdG8gc2F2ZSBmaWx0ZXJzIG9uIG5hdmlnYXRpb25cbiAgICovXG4gIHByaXZhdGUgc2V0dXBTYXZlT25OYXZpZ2F0aW9uKCk6IHZvaWQge1xuICAgIC8vIFNhdmUgb24gYmVmb3JldW5sb2FkIChyZWZyZXNoL2Nsb3NlKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCB0aGlzLnNhdmVGaWx0ZXJzLmJpbmQodGhpcykpXG4gICAgXG4gICAgLy8gU2F2ZSB3aGVuIGNsaWNraW5nIGFueSBsaW5rIChUdXJibyBuYXZpZ2F0aW9uKVxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3R1cmJvOmJlZm9yZS12aXNpdCcsIHRoaXMuc2F2ZUZpbHRlcnMuYmluZCh0aGlzKSlcbiAgICBcbiAgICAvLyBTYXZlIHdoZW4gZm9ybSBpcyBzdWJtaXR0ZWQgKHNlYXJjaCBidXR0b24gY2xpY2tlZClcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVthY3Rpb24qPVwiaG90ZWxzXCJdJylcbiAgICBpZiAoZm9ybSkge1xuICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLnNhdmVGaWx0ZXJzLmJpbmQodGhpcykpXG4gICAgfVxuICAgIFxuICAgIC8vIFNhdmUgaW1tZWRpYXRlbHkgd2hlbiBVUkwgaGFzIGZpbHRlciBwYXJhbWV0ZXJzICh1c2VyIGp1c3Qgc2VhcmNoZWQpXG4gICAgLy8gVGhpcyBlbnN1cmVzIHdlIGNhcHR1cmUgdGhlIGxhdGVzdCBmaWx0ZXIgc3RhdGUgcmlnaHQgYWZ0ZXIgc2VhcmNoXG4gICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKVxuICAgIGlmICh1cmxQYXJhbXMuaGFzKCdjaGVja19pbicpICYmIHVybFBhcmFtcy5oYXMoJ2NoZWNrX291dCcpKSB7XG4gICAgICBjb25zb2xlLmxvZygnRGV0ZWN0ZWQgZmlsdGVyIHBhcmFtZXRlcnMgaW4gVVJMLCBzYXZpbmcgaW1tZWRpYXRlbHknKVxuICAgICAgdGhpcy5zYXZlRmlsdGVycygpXG4gICAgfVxuICAgIFxuICAgIC8vIE1vbml0b3IgaGlkZGVuIGlucHV0IGNoYW5nZXMgKHdoZW4gdXNlciBtb2RpZmllcyBmaWx0ZXJzIGJ1dCBkb2Vzbid0IHNlYXJjaCB5ZXQpXG4gICAgdGhpcy5tb25pdG9ySW5wdXRDaGFuZ2VzKClcbiAgfVxuICBcbiAgLyoqXG4gICAqIE1vbml0b3IgaGlkZGVuIGlucHV0IGZpZWxkIGNoYW5nZXMgYW5kIHNhdmUgaW1tZWRpYXRlbHlcbiAgICovXG4gIHByaXZhdGUgbW9uaXRvcklucHV0Q2hhbmdlcygpOiB2b2lkIHtcbiAgICAvLyBHZXQgYWxsIGhpZGRlbiBpbnB1dHMgdGhhdCBzdG9yZSBmaWx0ZXIgdmFsdWVzXG4gICAgY29uc3QgZmlsdGVySW5wdXRzID0gW1xuICAgICAgJ2NoZWNrSW5JbnB1dCcsXG4gICAgICAnY2hlY2tPdXRJbnB1dCcsIFxuICAgICAgJ3Jvb21zSW5wdXQnLFxuICAgICAgJ2FkdWx0c0lucHV0JyxcbiAgICAgICdjaGlsZHJlbklucHV0JyxcbiAgICAgICdtaW5QcmljZUlucHV0JyxcbiAgICAgICdtYXhQcmljZUlucHV0JyxcbiAgICAgICdzdGFyc0lucHV0J1xuICAgIF1cbiAgICBcbiAgICBmaWx0ZXJJbnB1dHMuZm9yRWFjaCh0YXJnZXROYW1lID0+IHtcbiAgICAgIGNvbnN0IHNlbGVjdG9yID0gW1xuICAgICAgICBgW2RhdGEtaG90ZWwtc2VhcmNoLXRhcmdldD1cIiR7dGFyZ2V0TmFtZX1cIl1gLFxuICAgICAgICBgW2RhdGEtaG90ZWwtZGF0ZS1waWNrZXItdGFyZ2V0PVwiJHt0YXJnZXROYW1lfVwiXWAsXG4gICAgICAgIGBbZGF0YS1ob3RlbC1ndWVzdC1zZWxlY3Rvci10YXJnZXQ9XCIke3RhcmdldE5hbWV9XCJdYCxcbiAgICAgICAgYFtkYXRhLWhvdGVsLXByaWNlLWZpbHRlci10YXJnZXQ9XCIke3RhcmdldE5hbWV9XCJdYFxuICAgICAgXS5qb2luKCcsICcpXG4gICAgICBcbiAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcikgYXMgSFRNTElucHV0RWxlbWVudFxuICAgICAgaWYgKGlucHV0KSB7XG4gICAgICAgIC8vIFVzZSBNdXRhdGlvbk9ic2VydmVyIHRvIGRldGVjdCB2YWx1ZSBjaGFuZ2VzIChzaW5jZSBoaWRkZW4gaW5wdXRzIGRvbid0IGZpcmUgJ2NoYW5nZScgZXZlbnRzIHJlbGlhYmx5KVxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgRmlsdGVyIGlucHV0IGNoYW5nZWQ6ICR7dGFyZ2V0TmFtZX0sIHNhdmluZy4uLmApXG4gICAgICAgICAgdGhpcy5zYXZlRmlsdGVycygpXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGlucHV0LCB7XG4gICAgICAgICAgYXR0cmlidXRlczogdHJ1ZSxcbiAgICAgICAgICBhdHRyaWJ1dGVGaWx0ZXI6IFsndmFsdWUnXVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgLy8gQWxzbyBsaXN0ZW4gdG8gaW5wdXQgZXZlbnRcbiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coYEZpbHRlciBpbnB1dCBjaGFuZ2VkOiAke3RhcmdldE5hbWV9LCBzYXZpbmcuLi5gKVxuICAgICAgICAgIHRoaXMuc2F2ZUZpbHRlcnMoKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogU2F2ZSBjdXJyZW50IGZpbHRlciBzdGF0ZSB0byBzZXNzaW9uU3RvcmFnZVxuICAgKi9cbiAgcHJpdmF0ZSBzYXZlRmlsdGVycygpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKVxuICAgICAgXG4gICAgICAvLyBDb2xsZWN0IGRhdGUgdmFsdWVzXG4gICAgICBjb25zdCBjaGVja0luID0gdXJsUGFyYW1zLmdldCgnY2hlY2tfaW4nKSB8fCB0aGlzLmdldElucHV0VmFsdWUoJ2NoZWNrSW5JbnB1dCcpIHx8ICcnXG4gICAgICBjb25zdCBjaGVja091dCA9IHVybFBhcmFtcy5nZXQoJ2NoZWNrX291dCcpIHx8IHRoaXMuZ2V0SW5wdXRWYWx1ZSgnY2hlY2tPdXRJbnB1dCcpIHx8ICcnXG4gICAgICBcbiAgICAgIC8vIERvbid0IHNhdmUgaWYgZGF0ZXMgYXJlIGVtcHR5IC0gdGhpcyBtZWFucyB1c2VyIGhhc24ndCBzZXQgZGF0ZXMgeWV0XG4gICAgICBpZiAoIWNoZWNrSW4gfHwgIWNoZWNrT3V0KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTa2lwcGluZyBzYXZlIC0gZGF0ZXMgbm90IHNldCB5ZXQnKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgZmlsdGVyU3RhdGU6IEZpbHRlclN0YXRlID0ge1xuICAgICAgICBjaXR5OiB1cmxQYXJhbXMuZ2V0KCdjaXR5JykgfHwgdGhpcy5nZXRJbnB1dFZhbHVlKCdjaXR5SW5wdXQnKSB8fCAnXHU2REYxXHU1NzMzJyxcbiAgICAgICAgY2hlY2tJbjogY2hlY2tJbixcbiAgICAgICAgY2hlY2tPdXQ6IGNoZWNrT3V0LFxuICAgICAgICByb29tczogcGFyc2VJbnQodXJsUGFyYW1zLmdldCgncm9vbXMnKSB8fCB0aGlzLmdldElucHV0VmFsdWUoJ3Jvb21zSW5wdXQnKSB8fCAnMScpLFxuICAgICAgICBhZHVsdHM6IHBhcnNlSW50KHVybFBhcmFtcy5nZXQoJ2FkdWx0cycpIHx8IHRoaXMuZ2V0SW5wdXRWYWx1ZSgnYWR1bHRzSW5wdXQnKSB8fCAnMScpLFxuICAgICAgICBjaGlsZHJlbjogcGFyc2VJbnQodXJsUGFyYW1zLmdldCgnY2hpbGRyZW4nKSB8fCB0aGlzLmdldElucHV0VmFsdWUoJ2NoaWxkcmVuSW5wdXQnKSB8fCAnMCcpLFxuICAgICAgICBwcmljZU1pbjogdXJsUGFyYW1zLmdldCgncHJpY2VfbWluJykgfHwgdGhpcy5nZXRJbnB1dFZhbHVlKCdtaW5QcmljZUlucHV0JykgfHwgJycsXG4gICAgICAgIHByaWNlTWF4OiB1cmxQYXJhbXMuZ2V0KCdwcmljZV9tYXgnKSB8fCB0aGlzLmdldElucHV0VmFsdWUoJ21heFByaWNlSW5wdXQnKSB8fCAnJyxcbiAgICAgICAgc3RhckxldmVsOiB1cmxQYXJhbXMuZ2V0KCdzdGFyX2xldmVsJykgfHwgdGhpcy5nZXRJbnB1dFZhbHVlKCdzdGFyc0lucHV0JykgfHwgJycsXG4gICAgICAgIHF1ZXJ5OiB1cmxQYXJhbXMuZ2V0KCdxJykgfHwgJycsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfVxuXG4gICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKHRoaXMuU1RPUkFHRV9LRVksIEpTT04uc3RyaW5naWZ5KGZpbHRlclN0YXRlKSlcbiAgICAgIGNvbnNvbGUubG9nKCdIb3RlbCBmaWx0ZXJzIHNhdmVkIHRvIHNlc3Npb25TdG9yYWdlOicsIGZpbHRlclN0YXRlKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2F2ZSBob3RlbCBmaWx0ZXJzOicsIGVycm9yKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN0b3JlIGZpbHRlciBzdGF0ZSBmcm9tIHNlc3Npb25TdG9yYWdlIGFuZCBhcHBseSB0byBVUkxcbiAgICovXG4gIHByaXZhdGUgcmVzdG9yZUZpbHRlcnMoKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0b3JlZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0odGhpcy5TVE9SQUdFX0tFWSlcbiAgICAgIGlmICghc3RvcmVkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdObyBzYXZlZCBob3RlbCBmaWx0ZXJzIGZvdW5kJylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGZpbHRlclN0YXRlOiBGaWx0ZXJTdGF0ZSA9IEpTT04ucGFyc2Uoc3RvcmVkKVxuICAgICAgXG4gICAgICAvLyBWYWxpZGF0ZSB0aGF0IHN0b3JlZCBkYXRhIGhhcyByZXF1aXJlZCBkYXRlIGZpZWxkc1xuICAgICAgaWYgKCFmaWx0ZXJTdGF0ZS5jaGVja0luIHx8ICFmaWx0ZXJTdGF0ZS5jaGVja091dCkge1xuICAgICAgICBjb25zb2xlLmxvZygnU3RvcmVkIGZpbHRlcnMgbWlzc2luZyBkYXRlcywgY2xlYXJpbmcuLi4nKVxuICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMuU1RPUkFHRV9LRVkpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiBzdG9yZWQgZGF0YSBpcyBleHBpcmVkXG4gICAgICBpZiAoRGF0ZS5ub3coKSAtIGZpbHRlclN0YXRlLnRpbWVzdGFtcCA+IHRoaXMuRVhQSVJZX1RJTUUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1N0b3JlZCBob3RlbCBmaWx0ZXJzIGV4cGlyZWQsIGNsZWFyaW5nLi4uJylcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSh0aGlzLlNUT1JBR0VfS0VZKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgdXNlciBjYW1lIGZyb20gaG9tZXBhZ2Ugb3IgYW5vdGhlciBpbnRlcm5hbCBwYWdlXG4gICAgICAvLyBJZiB0aGV5IGNhbWUgZnJvbSBob21lcGFnZSAod2l0aCBkZWZhdWx0IGNpdHkgcGFyYW0gb25seSksIHJlc3RvcmUgc2F2ZWQgZmlsdGVyc1xuICAgICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKVxuICAgICAgY29uc3QgaGFzT3RoZXJQYXJhbXMgPSBBcnJheS5mcm9tKHVybFBhcmFtcy5rZXlzKCkpLmZpbHRlcihrID0+IGsgIT09ICdjaXR5JykubGVuZ3RoID4gMFxuICAgICAgXG4gICAgICAvLyBPbmx5IHJlc3RvcmUgaWY6XG4gICAgICAvLyAxLiBObyBVUkwgcGFyYW1zIGF0IGFsbCAoZGlyZWN0IG5hdmlnYXRpb24pLCBPUlxuICAgICAgLy8gMi4gT25seSBoYXMgZGVmYXVsdCBjaXR5IHBhcmFtIGZyb20gaG9tZXBhZ2UgbGluayAobm8gb3RoZXIgZmlsdGVyIHBhcmFtcylcbiAgICAgIGNvbnN0IHNob3VsZFJlc3RvcmUgPSAhaGFzT3RoZXJQYXJhbXNcbiAgICAgIFxuICAgICAgaWYgKHNob3VsZFJlc3RvcmUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1Jlc3RvcmluZyBob3RlbCBmaWx0ZXJzIGZyb20gc2Vzc2lvblN0b3JhZ2U6JywgZmlsdGVyU3RhdGUpXG4gICAgICAgIHRoaXMuYXBwbHlGaWx0ZXJzVG9VUkwoZmlsdGVyU3RhdGUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygnVVJMIGhhcyBleGlzdGluZyBmaWx0ZXIgcGFyYW1ldGVycywgc2tpcHBpbmcgcmVzdG9yZScpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byByZXN0b3JlIGhvdGVsIGZpbHRlcnM6JywgZXJyb3IpXG4gICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMuU1RPUkFHRV9LRVkpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFwcGx5IGZpbHRlciBzdGF0ZSB0byBVUkwgYW5kIHJlbG9hZCBwYWdlXG4gICAqL1xuICBwcml2YXRlIGFwcGx5RmlsdGVyc1RvVVJMKGZpbHRlclN0YXRlOiBGaWx0ZXJTdGF0ZSk6IHZvaWQge1xuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpXG4gICAgXG4gICAgLy8gU2V0IGFsbCBmaWx0ZXIgcGFyYW1ldGVyc1xuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdjaXR5JywgZmlsdGVyU3RhdGUuY2l0eSlcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnY2hlY2tfaW4nLCBmaWx0ZXJTdGF0ZS5jaGVja0luKVxuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdjaGVja19vdXQnLCBmaWx0ZXJTdGF0ZS5jaGVja091dClcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgncm9vbXMnLCBmaWx0ZXJTdGF0ZS5yb29tcy50b1N0cmluZygpKVxuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdhZHVsdHMnLCBmaWx0ZXJTdGF0ZS5hZHVsdHMudG9TdHJpbmcoKSlcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnY2hpbGRyZW4nLCBmaWx0ZXJTdGF0ZS5jaGlsZHJlbi50b1N0cmluZygpKVxuICAgIFxuICAgIGlmIChmaWx0ZXJTdGF0ZS5wcmljZU1pbikge1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3ByaWNlX21pbicsIGZpbHRlclN0YXRlLnByaWNlTWluKVxuICAgIH1cbiAgICBpZiAoZmlsdGVyU3RhdGUucHJpY2VNYXgpIHtcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdwcmljZV9tYXgnLCBmaWx0ZXJTdGF0ZS5wcmljZU1heClcbiAgICB9XG4gICAgaWYgKGZpbHRlclN0YXRlLnN0YXJMZXZlbCkge1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3N0YXJfbGV2ZWwnLCBmaWx0ZXJTdGF0ZS5zdGFyTGV2ZWwpXG4gICAgfVxuICAgIGlmIChmaWx0ZXJTdGF0ZS5xdWVyeSkge1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3EnLCBmaWx0ZXJTdGF0ZS5xdWVyeSlcbiAgICB9XG4gICAgXG4gICAgLy8gT25seSByZWRpcmVjdCBpZiBVUkwgd291bGQgYWN0dWFsbHkgY2hhbmdlXG4gICAgY29uc3QgbmV3VVJMID0gdXJsLnRvU3RyaW5nKClcbiAgICBpZiAobmV3VVJMICE9PSB3aW5kb3cubG9jYXRpb24uaHJlZikge1xuICAgICAgY29uc29sZS5sb2coJ1JlZGlyZWN0aW5nIHdpdGggcmVzdG9yZWQgZmlsdGVyczonLCBuZXdVUkwpXG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IG5ld1VSTFxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygnVVJMIGFscmVhZHkgbWF0Y2hlcyBzdG9yZWQgZmlsdGVycywgc2tpcHBpbmcgcmVkaXJlY3QnKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgbWV0aG9kIHRvIGdldCBpbnB1dCB2YWx1ZSBieSBkYXRhLXRhcmdldCBhdHRyaWJ1dGVcbiAgICovXG4gIHByaXZhdGUgZ2V0SW5wdXRWYWx1ZSh0YXJnZXROYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IHNlbGVjdG9yID0gW1xuICAgICAgYFtkYXRhLWhvdGVsLXNlYXJjaC10YXJnZXQ9XCIke3RhcmdldE5hbWV9XCJdYCxcbiAgICAgIGBbZGF0YS1ob3RlbC1kYXRlLXBpY2tlci10YXJnZXQ9XCIke3RhcmdldE5hbWV9XCJdYCxcbiAgICAgIGBbZGF0YS1ob3RlbC1ndWVzdC1zZWxlY3Rvci10YXJnZXQ9XCIke3RhcmdldE5hbWV9XCJdYCxcbiAgICAgIGBbZGF0YS1ob3RlbC1wcmljZS1maWx0ZXItdGFyZ2V0PVwiJHt0YXJnZXROYW1lfVwiXWBcbiAgICBdLmpvaW4oJywgJylcbiAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICByZXR1cm4gaW5wdXQgPyBpbnB1dC52YWx1ZSA6ICcnXG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgc2F2ZWQgZmlsdGVycyAoY2FuIGJlIGNhbGxlZCBtYW51YWxseSBpZiBuZWVkZWQpXG4gICAqL1xuICBjbGVhclNhdmVkRmlsdGVycygpOiB2b2lkIHtcbiAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMuU1RPUkFHRV9LRVkpXG4gICAgY29uc29sZS5sb2coJ0hvdGVsIGZpbHRlcnMgY2xlYXJlZCBmcm9tIHNlc3Npb25TdG9yYWdlJylcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wiY2l0eUlucHV0XCIsIFwiY2hlY2tJbklucHV0XCIsIFwiY2hlY2tPdXRJbnB1dFwiXVxuXG4gIGRlY2xhcmUgcmVhZG9ubHkgY2l0eUlucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hlY2tJbklucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgY2hlY2tPdXRJbnB1dFRhcmdldDogSFRNTElucHV0RWxlbWVudFxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJIb3RlbFNlcnZpY2VzU2VhcmNoIGNvbm5lY3RlZFwiKVxuICAgIFxuICAgIC8vIExpc3RlbiBmb3IgY2l0eSBzZWxlY3Rpb24gY2hhbmdlc1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NpdHktc2VsZWN0b3I6Y2l0eS1jaGFuZ2VkJywgdGhpcy5oYW5kbGVDaXR5Q2hhbmdlLmJpbmQodGhpcykpXG4gICAgXG4gICAgLy8gTGlzdGVuIGZvciBkYXRlIHNlbGVjdGlvbiBjaGFuZ2VzXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaG90ZWwtZGF0ZS1waWNrZXI6ZGF0ZXMtc2VsZWN0ZWQnLCB0aGlzLmhhbmRsZURhdGVDaGFuZ2UuYmluZCh0aGlzKSlcbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2l0eS1zZWxlY3RvcjpjaXR5LWNoYW5nZWQnLCB0aGlzLmhhbmRsZUNpdHlDaGFuZ2UuYmluZCh0aGlzKSlcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdob3RlbC1kYXRlLXBpY2tlcjpkYXRlcy1zZWxlY3RlZCcsIHRoaXMuaGFuZGxlRGF0ZUNoYW5nZS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVDaXR5Q2hhbmdlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnRcbiAgICBjb25zdCBjaXR5TmFtZSA9IGN1c3RvbUV2ZW50LmRldGFpbC5jaXR5TmFtZVxuICAgIGNvbnNvbGUubG9nKCdIb3RlbFNlcnZpY2VzU2VhcmNoOiBDaXR5IGNoYW5nZWQgdG8nLCBjaXR5TmFtZSlcbiAgICBcbiAgICAvLyBVcGRhdGUgaGlkZGVuIGlucHV0XG4gICAgdGhpcy5jaXR5SW5wdXRUYXJnZXQudmFsdWUgPSBjaXR5TmFtZVxuICAgIFxuICAgIC8vIFVwZGF0ZSBVUkwgYW5kIHJlbG9hZCBwYWdlXG4gICAgdGhpcy51cGRhdGVVUkxBbmRSZWxvYWQoKVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVEYXRlQ2hhbmdlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnRcbiAgICBjb25zdCB7IGNoZWNrSW4sIGNoZWNrT3V0IH0gPSBjdXN0b21FdmVudC5kZXRhaWxcbiAgICBjb25zb2xlLmxvZygnSG90ZWxTZXJ2aWNlc1NlYXJjaDogRGF0ZXMgY2hhbmdlZCcsIHsgY2hlY2tJbiwgY2hlY2tPdXQgfSlcbiAgICBcbiAgICAvLyBVcGRhdGUgaGlkZGVuIGlucHV0c1xuICAgIHRoaXMuY2hlY2tJbklucHV0VGFyZ2V0LnZhbHVlID0gY2hlY2tJblxuICAgIHRoaXMuY2hlY2tPdXRJbnB1dFRhcmdldC52YWx1ZSA9IGNoZWNrT3V0XG4gICAgXG4gICAgLy8gVXBkYXRlIFVSTCBhbmQgcmVsb2FkIHBhZ2VcbiAgICB0aGlzLnVwZGF0ZVVSTEFuZFJlbG9hZCgpXG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVVSTEFuZFJlbG9hZCgpOiB2b2lkIHtcbiAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpXG4gICAgXG4gICAgLy8gVXBkYXRlIG9yIHJlbW92ZSBjaXR5IHBhcmFtZXRlclxuICAgIGlmICh0aGlzLmNpdHlJbnB1dFRhcmdldC52YWx1ZSkge1xuICAgICAgcGFyYW1zLnNldCgnY2l0eScsIHRoaXMuY2l0eUlucHV0VGFyZ2V0LnZhbHVlKVxuICAgIH0gZWxzZSB7XG4gICAgICBwYXJhbXMuZGVsZXRlKCdjaXR5JylcbiAgICB9XG4gICAgXG4gICAgLy8gVXBkYXRlIG9yIHJlbW92ZSBkYXRlIHBhcmFtZXRlcnNcbiAgICAvLyBJZiBkYXRlcyBhcmUgZW1wdHkgc3RyaW5ncyAoYWZ0ZXIgcmVzZXQpLCByZW1vdmUgdGhlbSBmcm9tIFVSTFxuICAgIGlmICh0aGlzLmNoZWNrSW5JbnB1dFRhcmdldC52YWx1ZSkge1xuICAgICAgcGFyYW1zLnNldCgnY2hlY2tfaW4nLCB0aGlzLmNoZWNrSW5JbnB1dFRhcmdldC52YWx1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgcGFyYW1zLmRlbGV0ZSgnY2hlY2tfaW4nKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5jaGVja091dElucHV0VGFyZ2V0LnZhbHVlKSB7XG4gICAgICBwYXJhbXMuc2V0KCdjaGVja19vdXQnLCB0aGlzLmNoZWNrT3V0SW5wdXRUYXJnZXQudmFsdWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIHBhcmFtcy5kZWxldGUoJ2NoZWNrX291dCcpXG4gICAgfVxuICAgIFxuICAgIC8vIFJlbG9hZCBwYWdlIHdpdGggdXBkYXRlZCBwYXJhbWV0ZXJzXG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgJHt3aW5kb3cubG9jYXRpb24ucGF0aG5hbWV9PyR7cGFyYW1zLnRvU3RyaW5nKCl9YFxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJ3cmFwcGVyXCIsIFwic2xpZGVcIl1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHdyYXBwZXJUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc2xpZGVUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG5cbiAgcHJpdmF0ZSBjdXJyZW50SW5kZXg6IG51bWJlciA9IDBcbiAgcHJpdmF0ZSBzdGFydFk6IG51bWJlciA9IDBcbiAgcHJpdmF0ZSBzdGFydFRpbWU6IG51bWJlciA9IDBcbiAgcHJpdmF0ZSBpc0RyYWdnaW5nOiBib29sZWFuID0gZmFsc2VcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiTGl2ZVJvb20gY29ubmVjdGVkXCIpXG4gICAgXG4gICAgLy8gQWRkIHRvdWNoIGV2ZW50IGxpc3RlbmVyc1xuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5oYW5kbGVUb3VjaFN0YXJ0LmJpbmQodGhpcyksIHsgcGFzc2l2ZTogdHJ1ZSB9KVxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLmhhbmRsZVRvdWNoTW92ZS5iaW5kKHRoaXMpLCB7IHBhc3NpdmU6IGZhbHNlIH0pXG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5oYW5kbGVUb3VjaEVuZC5iaW5kKHRoaXMpLCB7IHBhc3NpdmU6IHRydWUgfSlcbiAgICBcbiAgICAvLyBJbml0aWFsaXplIGZpcnN0IHNsaWRlXG4gICAgdGhpcy5zaG93U2xpZGUoMClcbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJMaXZlUm9vbSBkaXNjb25uZWN0ZWRcIilcbiAgICBcbiAgICAvLyBSZW1vdmUgZXZlbnQgbGlzdGVuZXJzXG4gICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLmhhbmRsZVRvdWNoU3RhcnQuYmluZCh0aGlzKSlcbiAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5oYW5kbGVUb3VjaE1vdmUuYmluZCh0aGlzKSlcbiAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLmhhbmRsZVRvdWNoRW5kLmJpbmQodGhpcykpXG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVRvdWNoU3RhcnQoZTogVG91Y2hFdmVudCk6IHZvaWQge1xuICAgIHRoaXMuc3RhcnRZID0gZS50b3VjaGVzWzBdLmNsaWVudFlcbiAgICB0aGlzLnN0YXJ0VGltZSA9IERhdGUubm93KClcbiAgICB0aGlzLmlzRHJhZ2dpbmcgPSB0cnVlXG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVRvdWNoTW92ZShlOiBUb3VjaEV2ZW50KTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmlzRHJhZ2dpbmcpIHJldHVyblxuICAgIFxuICAgIGNvbnN0IGN1cnJlbnRZID0gZS50b3VjaGVzWzBdLmNsaWVudFlcbiAgICBjb25zdCBkaWZmWSA9IGN1cnJlbnRZIC0gdGhpcy5zdGFydFlcbiAgICBcbiAgICAvLyBQcmV2ZW50IGRlZmF1bHQgc2Nyb2xsIGlmIHN3aXBpbmcgdmVydGljYWxseVxuICAgIGlmIChNYXRoLmFicyhkaWZmWSkgPiAxMCkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVUb3VjaEVuZChlOiBUb3VjaEV2ZW50KTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmlzRHJhZ2dpbmcpIHJldHVyblxuICAgIFxuICAgIGNvbnN0IGVuZFkgPSBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFlcbiAgICBjb25zdCBkaWZmWSA9IGVuZFkgLSB0aGlzLnN0YXJ0WVxuICAgIGNvbnN0IGRpZmZUaW1lID0gRGF0ZS5ub3coKSAtIHRoaXMuc3RhcnRUaW1lXG4gICAgXG4gICAgdGhpcy5pc0RyYWdnaW5nID0gZmFsc2VcbiAgICBcbiAgICAvLyBDYWxjdWxhdGUgc3dpcGUgdmVsb2NpdHlcbiAgICBjb25zdCB2ZWxvY2l0eSA9IE1hdGguYWJzKGRpZmZZKSAvIGRpZmZUaW1lXG4gICAgXG4gICAgLy8gRGV0ZXJtaW5lIGlmIHN3aXBlIGlzIHZhbGlkICh0aHJlc2hvbGQ6IDUwcHggb3IgZmFzdCBzd2lwZSlcbiAgICBjb25zdCBpc1N3aXBlVXAgPSBkaWZmWSA8IC01MCB8fCAoZGlmZlkgPCAtMzAgJiYgdmVsb2NpdHkgPiAwLjUpXG4gICAgY29uc3QgaXNTd2lwZURvd24gPSBkaWZmWSA+IDUwIHx8IChkaWZmWSA+IDMwICYmIHZlbG9jaXR5ID4gMC41KVxuICAgIFxuICAgIGlmIChpc1N3aXBlVXApIHtcbiAgICAgIC8vIFN3aXBlIHVwIC0gZ28gdG8gbmV4dCBzbGlkZVxuICAgICAgdGhpcy5uZXh0U2xpZGUoKVxuICAgIH0gZWxzZSBpZiAoaXNTd2lwZURvd24pIHtcbiAgICAgIC8vIFN3aXBlIGRvd24gLSBnbyB0byBwcmV2aW91cyBzbGlkZVxuICAgICAgdGhpcy5wcmV2U2xpZGUoKVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnN0YXJ0WSA9IDBcbiAgICB0aGlzLnN0YXJ0VGltZSA9IDBcbiAgfVxuXG4gIHByaXZhdGUgbmV4dFNsaWRlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmN1cnJlbnRJbmRleCA8IHRoaXMuc2xpZGVUYXJnZXRzLmxlbmd0aCAtIDEpIHtcbiAgICAgIHRoaXMuc2hvd1NsaWRlKHRoaXMuY3VycmVudEluZGV4ICsgMSlcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHByZXZTbGlkZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jdXJyZW50SW5kZXggPiAwKSB7XG4gICAgICB0aGlzLnNob3dTbGlkZSh0aGlzLmN1cnJlbnRJbmRleCAtIDEpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzaG93U2xpZGUoaW5kZXg6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIFJlbW92ZSBhY3RpdmUgY2xhc3MgZnJvbSBhbGwgc2xpZGVzXG4gICAgdGhpcy5zbGlkZVRhcmdldHMuZm9yRWFjaCgoc2xpZGUsIGkpID0+IHtcbiAgICAgIHNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScsICdwcmV2JylcbiAgICAgIFxuICAgICAgaWYgKGkgPT09IGluZGV4KSB7XG4gICAgICAgIHNsaWRlLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXG4gICAgICB9IGVsc2UgaWYgKGkgPT09IGluZGV4IC0gMSkge1xuICAgICAgICBzbGlkZS5jbGFzc0xpc3QuYWRkKCdwcmV2JylcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIHRoaXMuY3VycmVudEluZGV4ID0gaW5kZXhcbiAgICBcbiAgICAvLyBIaWRlIHN3aXBlIGhpbnQgYWZ0ZXIgZmlyc3Qgc3dpcGVcbiAgICBpZiAoaW5kZXggPiAwKSB7XG4gICAgICBjb25zdCBzd2lwZUhpbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGl2ZS1zd2lwZS1oaW50JykgYXMgSFRNTEVsZW1lbnRcbiAgICAgIGlmIChzd2lwZUhpbnQpIHtcbiAgICAgICAgc3dpcGVIaW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbi8vIERlY2xhcmUgVHVyYm8gZ2xvYmFsIHR5cGVcbmRlY2xhcmUgY29uc3QgVHVyYm86IGFueVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXCJzZWFyY2hJbnB1dFwiXVxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIGNpdHk6IFN0cmluZyxcbiAgICBxdWVyeTogU3RyaW5nXG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHNlYXJjaElucHV0VGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzU2VhcmNoSW5wdXRUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSBjaXR5VmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHF1ZXJ5VmFsdWU6IHN0cmluZ1xuXG4gIHByaXZhdGUgc2VhcmNoVGltZW91dDogbnVtYmVyIHwgbnVsbCA9IG51bGxcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIEluaXRpYWxpemUgc2VhcmNoIGlucHV0IHdpdGggY3VycmVudCBxdWVyeVxuICAgIGlmICh0aGlzLmhhc1NlYXJjaElucHV0VGFyZ2V0ICYmIHRoaXMucXVlcnlWYWx1ZSkge1xuICAgICAgdGhpcy5zZWFyY2hJbnB1dFRhcmdldC52YWx1ZSA9IHRoaXMucXVlcnlWYWx1ZVxuICAgIH1cbiAgfVxuXG4gIC8vIFNlYXJjaCBob3RlbHMgd2l0aCBkZWJvdW5jZVxuICBzZWFyY2goKTogdm9pZCB7XG4gICAgLy8gQ2xlYXIgcHJldmlvdXMgdGltZW91dFxuICAgIGlmICh0aGlzLnNlYXJjaFRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnNlYXJjaFRpbWVvdXQpXG4gICAgfVxuXG4gICAgLy8gRGVib3VuY2Ugc2VhcmNoIGJ5IDUwMG1zXG4gICAgdGhpcy5zZWFyY2hUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5wZXJmb3JtU2VhcmNoKClcbiAgICB9LCA1MDApXG4gIH1cblxuICAvLyBQZXJmb3JtIHRoZSBhY3R1YWwgc2VhcmNoXG4gIHByaXZhdGUgcGVyZm9ybVNlYXJjaCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaGFzU2VhcmNoSW5wdXRUYXJnZXQpIHJldHVyblxuXG4gICAgY29uc3QgcXVlcnkgPSB0aGlzLnNlYXJjaElucHV0VGFyZ2V0LnZhbHVlLnRyaW0oKVxuICAgIGNvbnN0IGNpdHkgPSB0aGlzLmNpdHlWYWx1ZSB8fCAnXHU1MzE3XHU0RUFDXHU1RTAyJ1xuXG4gICAgLy8gQnVpbGQgVVJMIHdpdGggY2l0eSBhbmQgcXVlcnkgcGFyYW1ldGVyc1xuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoJy9zcGVjaWFsX2hvdGVscycsIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4pXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2NpdHknLCBjaXR5KVxuICAgIFxuICAgIGlmIChxdWVyeSkge1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3F1ZXJ5JywgcXVlcnkpXG4gICAgfVxuXG4gICAgLy8gTmF2aWdhdGUgdG8gdGhlIG5ldyBVUkwgd2l0aCBUdXJib1xuICAgIFR1cmJvLnZpc2l0KHVybC50b1N0cmluZygpKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG4vLyBEZWNsYXJlIFR1cmJvIGdsb2JhbCB0eXBlXG5kZWNsYXJlIGNvbnN0IFR1cmJvOiBhbnlcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1xuICAgIFwic29ydE1vZGFsXCIsXG4gICAgXCJkaXN0cmljdE1vZGFsXCIsIFxuICAgIFwicHJpY2VNb2RhbFwiLFxuICAgIFwiZmlsdGVyTW9kYWxcIixcbiAgICBcInNvcnRCdXR0b25cIixcbiAgICBcImRpc3RyaWN0QnV0dG9uXCIsXG4gICAgXCJwcmljZUJ1dHRvblwiLFxuICAgIFwiZmlsdGVyQnV0dG9uXCIsXG4gICAgXCJzb3J0T3B0aW9uXCIsXG4gICAgXCJkaXN0cmljdE9wdGlvblwiLFxuICAgIFwicHJpY2VPcHRpb25cIixcbiAgICBcInN0YXJPcHRpb25cIlxuICBdXG4gIFxuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIGNpdHk6IFN0cmluZyxcbiAgICBxdWVyeTogU3RyaW5nLFxuICAgIHNvcnQ6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiBcInByaWNlXCIgfSxcbiAgICBkaXN0cmljdDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IFwiXCIgfSxcbiAgICBwcmljZVJhbmdlOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCJcIiB9LFxuICAgIHN0YXJzOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCJcIiB9XG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHNvcnRNb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkaXN0cmljdE1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHByaWNlTW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZmlsdGVyTW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc29ydEJ1dHRvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkaXN0cmljdEJ1dHRvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBwcmljZUJ1dHRvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBmaWx0ZXJCdXR0b25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc29ydE9wdGlvblRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBkaXN0cmljdE9wdGlvblRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBwcmljZU9wdGlvblRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBzdGFyT3B0aW9uVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBcbiAgZGVjbGFyZSByZWFkb25seSBoYXNTb3J0TW9kYWxUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNEaXN0cmljdE1vZGFsVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUHJpY2VNb2RhbFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0ZpbHRlck1vZGFsVGFyZ2V0OiBib29sZWFuXG4gIFxuICBkZWNsYXJlIGNpdHlWYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgcXVlcnlWYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgc29ydFZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBkaXN0cmljdFZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBwcmljZVJhbmdlVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHN0YXJzVmFsdWU6IHN0cmluZ1xuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgdGhpcy51cGRhdGVCdXR0b25TdGF0ZXMoKVxuICB9XG5cbiAgLy8gT3BlbiBtb2RhbHNcbiAgb3BlblNvcnRNb2RhbCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5oYXNTb3J0TW9kYWxUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2xvc2VBbGxNb2RhbHMoKVxuICAgICAgdGhpcy5zb3J0TW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICB9XG4gIH1cblxuICBvcGVuRGlzdHJpY3RNb2RhbCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5oYXNEaXN0cmljdE1vZGFsVGFyZ2V0KSB7XG4gICAgICB0aGlzLmNsb3NlQWxsTW9kYWxzKClcbiAgICAgIHRoaXMuZGlzdHJpY3RNb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIH1cbiAgfVxuXG4gIG9wZW5QcmljZU1vZGFsKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmhhc1ByaWNlTW9kYWxUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2xvc2VBbGxNb2RhbHMoKVxuICAgICAgdGhpcy5wcmljZU1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgfVxuICB9XG5cbiAgb3BlbkZpbHRlck1vZGFsKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmhhc0ZpbHRlck1vZGFsVGFyZ2V0KSB7XG4gICAgICB0aGlzLmNsb3NlQWxsTW9kYWxzKClcbiAgICAgIHRoaXMuZmlsdGVyTW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICB9XG4gIH1cblxuICAvLyBDbG9zZSBhbGwgbW9kYWxzXG4gIGNsb3NlQWxsTW9kYWxzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmhhc1NvcnRNb2RhbFRhcmdldCkgdGhpcy5zb3J0TW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBpZiAodGhpcy5oYXNEaXN0cmljdE1vZGFsVGFyZ2V0KSB0aGlzLmRpc3RyaWN0TW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBpZiAodGhpcy5oYXNQcmljZU1vZGFsVGFyZ2V0KSB0aGlzLnByaWNlTW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBpZiAodGhpcy5oYXNGaWx0ZXJNb2RhbFRhcmdldCkgdGhpcy5maWx0ZXJNb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICB9XG5cbiAgLy8gU2VsZWN0IHNvcnQgb3B0aW9uXG4gIHNlbGVjdFNvcnQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHNvcnRWYWx1ZSA9IHRhcmdldC5kYXRhc2V0LnZhbHVlIHx8ICdwcmljZSdcbiAgICB0aGlzLnNvcnRWYWx1ZSA9IHNvcnRWYWx1ZVxuICAgIHRoaXMuY2xvc2VBbGxNb2RhbHMoKVxuICAgIHRoaXMuYXBwbHlGaWx0ZXJzKClcbiAgfVxuXG4gIC8vIFNlbGVjdCBkaXN0cmljdCBvcHRpb25cbiAgc2VsZWN0RGlzdHJpY3QoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGRpc3RyaWN0VmFsdWUgPSB0YXJnZXQuZGF0YXNldC52YWx1ZSB8fCAnJ1xuICAgIHRoaXMuZGlzdHJpY3RWYWx1ZSA9IGRpc3RyaWN0VmFsdWVcbiAgICB0aGlzLmNsb3NlQWxsTW9kYWxzKClcbiAgICB0aGlzLmFwcGx5RmlsdGVycygpXG4gIH1cblxuICAvLyBTZWxlY3QgcHJpY2UgcmFuZ2Ugb3B0aW9uXG4gIHNlbGVjdFByaWNlUmFuZ2UoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHByaWNlVmFsdWUgPSB0YXJnZXQuZGF0YXNldC52YWx1ZSB8fCAnJ1xuICAgIHRoaXMucHJpY2VSYW5nZVZhbHVlID0gcHJpY2VWYWx1ZVxuICAgIHRoaXMuY2xvc2VBbGxNb2RhbHMoKVxuICAgIHRoaXMuYXBwbHlGaWx0ZXJzKClcbiAgfVxuXG4gIC8vIFRvZ2dsZSBzdGFyIHJhdGluZ1xuICB0b2dnbGVTdGFyKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBzdGFyVmFsdWUgPSB0YXJnZXQuZGF0YXNldC52YWx1ZSB8fCAnJ1xuICAgIFxuICAgIC8vIFRvZ2dsZSB0aGUgc3RhciB2YWx1ZVxuICAgIGlmICh0aGlzLnN0YXJzVmFsdWUgPT09IHN0YXJWYWx1ZSkge1xuICAgICAgdGhpcy5zdGFyc1ZhbHVlID0gJydcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdGFyc1ZhbHVlID0gc3RhclZhbHVlXG4gICAgfVxuICAgIFxuICAgIHRoaXMudXBkYXRlU3RhclN0YXRlcygpXG4gIH1cblxuICAvLyBBcHBseSBhbGwgZmlsdGVyc1xuICBhcHBseUZpbHRlcnMoKTogdm9pZCB7XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTCgnL3NwZWNpYWxfaG90ZWxzJywgd2luZG93LmxvY2F0aW9uLm9yaWdpbilcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnY2l0eScsIHRoaXMuY2l0eVZhbHVlIHx8ICdcdTUzMTdcdTRFQUNcdTVFMDInKVxuICAgIFxuICAgIGlmICh0aGlzLnF1ZXJ5VmFsdWUpIHtcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdxdWVyeScsIHRoaXMucXVlcnlWYWx1ZSlcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuc29ydFZhbHVlICYmIHRoaXMuc29ydFZhbHVlICE9PSAncHJpY2UnKSB7XG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnc29ydCcsIHRoaXMuc29ydFZhbHVlKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5kaXN0cmljdFZhbHVlKSB7XG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnZGlzdHJpY3QnLCB0aGlzLmRpc3RyaWN0VmFsdWUpXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLnByaWNlUmFuZ2VWYWx1ZSkge1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3ByaWNlX3JhbmdlJywgdGhpcy5wcmljZVJhbmdlVmFsdWUpXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLnN0YXJzVmFsdWUpIHtcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdzdGFycycsIHRoaXMuc3RhcnNWYWx1ZSlcbiAgICB9XG4gICAgXG4gICAgdGhpcy5jbG9zZUFsbE1vZGFscygpXG4gICAgVHVyYm8udmlzaXQodXJsLnRvU3RyaW5nKCkpXG4gIH1cblxuICAvLyBDbGVhciBhbGwgZmlsdGVyc1xuICBjbGVhckZpbHRlcnMoKTogdm9pZCB7XG4gICAgdGhpcy5zb3J0VmFsdWUgPSAncHJpY2UnXG4gICAgdGhpcy5kaXN0cmljdFZhbHVlID0gJydcbiAgICB0aGlzLnByaWNlUmFuZ2VWYWx1ZSA9ICcnXG4gICAgdGhpcy5zdGFyc1ZhbHVlID0gJydcbiAgICB0aGlzLmFwcGx5RmlsdGVycygpXG4gIH1cblxuICAvLyBVcGRhdGUgYnV0dG9uIHN0YXRlcyBiYXNlZCBvbiBhY3RpdmUgZmlsdGVyc1xuICBwcml2YXRlIHVwZGF0ZUJ1dHRvblN0YXRlcygpOiB2b2lkIHtcbiAgICAvLyBVcGRhdGUgc29ydCBidXR0b25cbiAgICBpZiAodGhpcy5zb3J0VmFsdWUgIT09ICdwcmljZScpIHtcbiAgICAgIHRoaXMuc29ydEJ1dHRvblRhcmdldC5jbGFzc0xpc3QuYWRkKCd0ZXh0LXByaW1hcnknKVxuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgZGlzdHJpY3QgYnV0dG9uXG4gICAgaWYgKHRoaXMuZGlzdHJpY3RWYWx1ZSkge1xuICAgICAgdGhpcy5kaXN0cmljdEJ1dHRvblRhcmdldC5jbGFzc0xpc3QuYWRkKCd0ZXh0LXByaW1hcnknKVxuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgcHJpY2UgYnV0dG9uXG4gICAgaWYgKHRoaXMucHJpY2VSYW5nZVZhbHVlKSB7XG4gICAgICB0aGlzLnByaWNlQnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3RleHQtcHJpbWFyeScpXG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSBmaWx0ZXIgYnV0dG9uXG4gICAgaWYgKHRoaXMuc3RhcnNWYWx1ZSkge1xuICAgICAgdGhpcy5maWx0ZXJCdXR0b25UYXJnZXQuY2xhc3NMaXN0LmFkZCgndGV4dC1wcmltYXJ5JylcbiAgICB9XG4gIH1cblxuICAvLyBVcGRhdGUgc3RhciByYXRpbmcgdmlzdWFsIHN0YXRlc1xuICBwcml2YXRlIHVwZGF0ZVN0YXJTdGF0ZXMoKTogdm9pZCB7XG4gICAgdGhpcy5zdGFyT3B0aW9uVGFyZ2V0cy5mb3JFYWNoKHRhcmdldCA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHRhcmdldC5kYXRhc2V0LnZhbHVlIHx8ICcnXG4gICAgICBpZiAodmFsdWUgPT09IHRoaXMuc3RhcnNWYWx1ZSkge1xuICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnYmctcHJpbWFyeScsICd0ZXh0LXdoaXRlJylcbiAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2JnLWdyYXktMTAwJywgJ3RleHQtZ3JheS03MDAnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2JnLXByaW1hcnknLCAndGV4dC13aGl0ZScpXG4gICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdiZy1ncmF5LTEwMCcsICd0ZXh0LWdyYXktNzAwJylcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgLy8gU3RvcCBldmVudCBwcm9wYWdhdGlvblxuICBzdG9wUHJvcGFnYXRpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuLy8gRGVjbGFyZSBUdXJibyBnbG9iYWwgdHlwZVxuZGVjbGFyZSBjb25zdCBUdXJibzogYW55XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcInNvcnRNb2RhbFwiLFxuICAgIFwiZGlzdHJpY3RNb2RhbFwiLCBcbiAgICBcInByaWNlTW9kYWxcIixcbiAgICBcImZpbHRlck1vZGFsXCIsXG4gICAgXCJzb3J0QnV0dG9uXCIsXG4gICAgXCJkaXN0cmljdEJ1dHRvblwiLFxuICAgIFwicHJpY2VCdXR0b25cIixcbiAgICBcImZpbHRlckJ1dHRvblwiLFxuICAgIFwic29ydE9wdGlvblwiLFxuICAgIFwiZGlzdHJpY3RPcHRpb25cIixcbiAgICBcInByaWNlT3B0aW9uXCIsXG4gICAgXCJzdGFyT3B0aW9uXCJcbiAgXVxuICBcbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBjaXR5OiBTdHJpbmcsXG4gICAgY2hlY2tJbjogU3RyaW5nLFxuICAgIGNoZWNrT3V0OiBTdHJpbmcsXG4gICAgcm9vbXM6IE51bWJlcixcbiAgICBhZHVsdHM6IE51bWJlcixcbiAgICBjaGlsZHJlbjogTnVtYmVyLFxuICAgIHF1ZXJ5OiBTdHJpbmcsXG4gICAgc29ydDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IFwicmVjb21tZW5kXCIgfSxcbiAgICBkaXN0cmljdDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IFwiXCIgfSxcbiAgICBwcmljZVJhbmdlOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCJcIiB9LFxuICAgIHN0YXJzOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCJcIiB9XG4gIH1cblxuICBkZWNsYXJlIHJlYWRvbmx5IHNvcnRNb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkaXN0cmljdE1vZGFsVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHByaWNlTW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgZmlsdGVyTW9kYWxUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc29ydEJ1dHRvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBkaXN0cmljdEJ1dHRvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBwcmljZUJ1dHRvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBmaWx0ZXJCdXR0b25UYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgc29ydE9wdGlvblRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBkaXN0cmljdE9wdGlvblRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBwcmljZU9wdGlvblRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBzdGFyT3B0aW9uVGFyZ2V0czogSFRNTEVsZW1lbnRbXVxuICBcbiAgZGVjbGFyZSByZWFkb25seSBoYXNTb3J0TW9kYWxUYXJnZXQ6IGJvb2xlYW5cbiAgZGVjbGFyZSByZWFkb25seSBoYXNEaXN0cmljdE1vZGFsVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzUHJpY2VNb2RhbFRhcmdldDogYm9vbGVhblxuICBkZWNsYXJlIHJlYWRvbmx5IGhhc0ZpbHRlck1vZGFsVGFyZ2V0OiBib29sZWFuXG4gIFxuICBkZWNsYXJlIGNpdHlWYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgY2hlY2tJblZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBjaGVja091dFZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSByb29tc1ZhbHVlOiBudW1iZXJcbiAgZGVjbGFyZSBhZHVsdHNWYWx1ZTogbnVtYmVyXG4gIGRlY2xhcmUgY2hpbGRyZW5WYWx1ZTogbnVtYmVyXG4gIGRlY2xhcmUgcXVlcnlWYWx1ZTogc3RyaW5nXG4gIGRlY2xhcmUgc29ydFZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBkaXN0cmljdFZhbHVlOiBzdHJpbmdcbiAgZGVjbGFyZSBwcmljZVJhbmdlVmFsdWU6IHN0cmluZ1xuICBkZWNsYXJlIHN0YXJzVmFsdWU6IHN0cmluZ1xuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgdGhpcy51cGRhdGVCdXR0b25TdGF0ZXMoKVxuICB9XG5cbiAgLy8gT3BlbiBtb2RhbHNcbiAgb3BlblNvcnRNb2RhbCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5oYXNTb3J0TW9kYWxUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2xvc2VBbGxNb2RhbHMoKVxuICAgICAgdGhpcy5zb3J0TW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICB9XG4gIH1cblxuICBvcGVuRGlzdHJpY3RNb2RhbCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5oYXNEaXN0cmljdE1vZGFsVGFyZ2V0KSB7XG4gICAgICB0aGlzLmNsb3NlQWxsTW9kYWxzKClcbiAgICAgIHRoaXMuZGlzdHJpY3RNb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIH1cbiAgfVxuXG4gIG9wZW5QcmljZU1vZGFsKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmhhc1ByaWNlTW9kYWxUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2xvc2VBbGxNb2RhbHMoKVxuICAgICAgdGhpcy5wcmljZU1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgfVxuICB9XG5cbiAgb3BlbkZpbHRlck1vZGFsKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmhhc0ZpbHRlck1vZGFsVGFyZ2V0KSB7XG4gICAgICB0aGlzLmNsb3NlQWxsTW9kYWxzKClcbiAgICAgIHRoaXMuZmlsdGVyTW9kYWxUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICB9XG4gIH1cblxuICAvLyBDbG9zZSBhbGwgbW9kYWxzXG4gIGNsb3NlQWxsTW9kYWxzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmhhc1NvcnRNb2RhbFRhcmdldCkgdGhpcy5zb3J0TW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBpZiAodGhpcy5oYXNEaXN0cmljdE1vZGFsVGFyZ2V0KSB0aGlzLmRpc3RyaWN0TW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBpZiAodGhpcy5oYXNQcmljZU1vZGFsVGFyZ2V0KSB0aGlzLnByaWNlTW9kYWxUYXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBpZiAodGhpcy5oYXNGaWx0ZXJNb2RhbFRhcmdldCkgdGhpcy5maWx0ZXJNb2RhbFRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICB9XG5cbiAgLy8gU2VsZWN0IHNvcnQgb3B0aW9uXG4gIHNlbGVjdFNvcnQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHNvcnRWYWx1ZSA9IHRhcmdldC5kYXRhc2V0LnZhbHVlIHx8ICdyZWNvbW1lbmQnXG4gICAgdGhpcy5zb3J0VmFsdWUgPSBzb3J0VmFsdWVcbiAgICB0aGlzLmNsb3NlQWxsTW9kYWxzKClcbiAgICB0aGlzLmFwcGx5RmlsdGVycygpXG4gIH1cblxuICAvLyBTZWxlY3QgZGlzdHJpY3Qgb3B0aW9uXG4gIHNlbGVjdERpc3RyaWN0KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBkaXN0cmljdFZhbHVlID0gdGFyZ2V0LmRhdGFzZXQudmFsdWUgfHwgJydcbiAgICB0aGlzLmRpc3RyaWN0VmFsdWUgPSBkaXN0cmljdFZhbHVlXG4gICAgdGhpcy5jbG9zZUFsbE1vZGFscygpXG4gICAgdGhpcy5hcHBseUZpbHRlcnMoKVxuICB9XG5cbiAgLy8gU2VsZWN0IHByaWNlIHJhbmdlIG9wdGlvblxuICBzZWxlY3RQcmljZVJhbmdlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBwcmljZVZhbHVlID0gdGFyZ2V0LmRhdGFzZXQudmFsdWUgfHwgJydcbiAgICB0aGlzLnByaWNlUmFuZ2VWYWx1ZSA9IHByaWNlVmFsdWVcbiAgICB0aGlzLmNsb3NlQWxsTW9kYWxzKClcbiAgICB0aGlzLmFwcGx5RmlsdGVycygpXG4gIH1cblxuICAvLyBUb2dnbGUgc3RhciByYXRpbmdcbiAgdG9nZ2xlU3RhcihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3Qgc3RhclZhbHVlID0gdGFyZ2V0LmRhdGFzZXQudmFsdWUgfHwgJydcbiAgICBcbiAgICAvLyBUb2dnbGUgdGhlIHN0YXIgdmFsdWVcbiAgICBpZiAodGhpcy5zdGFyc1ZhbHVlID09PSBzdGFyVmFsdWUpIHtcbiAgICAgIHRoaXMuc3RhcnNWYWx1ZSA9ICcnXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhcnNWYWx1ZSA9IHN0YXJWYWx1ZVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnVwZGF0ZVN0YXJTdGF0ZXMoKVxuICB9XG5cbiAgLy8gQXBwbHkgYWxsIGZpbHRlcnNcbiAgYXBwbHlGaWx0ZXJzKCk6IHZvaWQge1xuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoJy9ob3RlbHMvc2VhcmNoJywgd2luZG93LmxvY2F0aW9uLm9yaWdpbilcbiAgICBcbiAgICAvLyBQcmVzZXJ2ZSBib29raW5nIHBhcmFtZXRlcnNcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnY2l0eScsIHRoaXMuY2l0eVZhbHVlIHx8ICdcdTZERjFcdTU3MzNcdTVFMDInKVxuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdjaGVja19pbicsIHRoaXMuY2hlY2tJblZhbHVlKVxuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdjaGVja19vdXQnLCB0aGlzLmNoZWNrT3V0VmFsdWUpXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3Jvb21zJywgdGhpcy5yb29tc1ZhbHVlLnRvU3RyaW5nKCkpXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2FkdWx0cycsIHRoaXMuYWR1bHRzVmFsdWUudG9TdHJpbmcoKSlcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnY2hpbGRyZW4nLCB0aGlzLmNoaWxkcmVuVmFsdWUudG9TdHJpbmcoKSlcbiAgICBcbiAgICAvLyBBZGQgc2VhcmNoIHF1ZXJ5IGlmIHByZXNlbnRcbiAgICBpZiAodGhpcy5xdWVyeVZhbHVlKSB7XG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgncScsIHRoaXMucXVlcnlWYWx1ZSlcbiAgICB9XG4gICAgXG4gICAgLy8gQWRkIGZpbHRlciBwYXJhbWV0ZXJzXG4gICAgaWYgKHRoaXMuc29ydFZhbHVlICYmIHRoaXMuc29ydFZhbHVlICE9PSAncmVjb21tZW5kJykge1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3NvcnQnLCB0aGlzLnNvcnRWYWx1ZSlcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuZGlzdHJpY3RWYWx1ZSkge1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2Rpc3RyaWN0JywgdGhpcy5kaXN0cmljdFZhbHVlKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5wcmljZVJhbmdlVmFsdWUpIHtcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdwcmljZV9yYW5nZScsIHRoaXMucHJpY2VSYW5nZVZhbHVlKVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5zdGFyc1ZhbHVlKSB7XG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnc3Rhcl9sZXZlbCcsIHRoaXMuc3RhcnNWYWx1ZSlcbiAgICB9XG4gICAgXG4gICAgdGhpcy5jbG9zZUFsbE1vZGFscygpXG4gICAgVHVyYm8udmlzaXQodXJsLnRvU3RyaW5nKCkpXG4gIH1cblxuICAvLyBDbGVhciBhbGwgZmlsdGVyc1xuICBjbGVhckZpbHRlcnMoKTogdm9pZCB7XG4gICAgdGhpcy5zb3J0VmFsdWUgPSAncmVjb21tZW5kJ1xuICAgIHRoaXMuZGlzdHJpY3RWYWx1ZSA9ICcnXG4gICAgdGhpcy5wcmljZVJhbmdlVmFsdWUgPSAnJ1xuICAgIHRoaXMuc3RhcnNWYWx1ZSA9ICcnXG4gICAgdGhpcy5hcHBseUZpbHRlcnMoKVxuICB9XG5cbiAgLy8gVXBkYXRlIGJ1dHRvbiBzdGF0ZXMgYmFzZWQgb24gYWN0aXZlIGZpbHRlcnNcbiAgcHJpdmF0ZSB1cGRhdGVCdXR0b25TdGF0ZXMoKTogdm9pZCB7XG4gICAgLy8gVXBkYXRlIHNvcnQgYnV0dG9uXG4gICAgaWYgKHRoaXMuc29ydFZhbHVlICE9PSAncmVjb21tZW5kJykge1xuICAgICAgdGhpcy5zb3J0QnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3RleHQtcHJpbWFyeScpXG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSBkaXN0cmljdCBidXR0b25cbiAgICBpZiAodGhpcy5kaXN0cmljdFZhbHVlKSB7XG4gICAgICB0aGlzLmRpc3RyaWN0QnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3RleHQtcHJpbWFyeScpXG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSBwcmljZSBidXR0b25cbiAgICBpZiAodGhpcy5wcmljZVJhbmdlVmFsdWUpIHtcbiAgICAgIHRoaXMucHJpY2VCdXR0b25UYXJnZXQuY2xhc3NMaXN0LmFkZCgndGV4dC1wcmltYXJ5JylcbiAgICB9XG4gICAgXG4gICAgLy8gVXBkYXRlIGZpbHRlciBidXR0b25cbiAgICBpZiAodGhpcy5zdGFyc1ZhbHVlKSB7XG4gICAgICB0aGlzLmZpbHRlckJ1dHRvblRhcmdldC5jbGFzc0xpc3QuYWRkKCd0ZXh0LXByaW1hcnknKVxuICAgIH1cbiAgfVxuXG4gIC8vIFVwZGF0ZSBzdGFyIHJhdGluZyB2aXN1YWwgc3RhdGVzXG4gIHByaXZhdGUgdXBkYXRlU3RhclN0YXRlcygpOiB2b2lkIHtcbiAgICB0aGlzLnN0YXJPcHRpb25UYXJnZXRzLmZvckVhY2godGFyZ2V0ID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gdGFyZ2V0LmRhdGFzZXQudmFsdWUgfHwgJydcbiAgICAgIGlmICh2YWx1ZSA9PT0gdGhpcy5zdGFyc1ZhbHVlKSB7XG4gICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdiZy1wcmltYXJ5JywgJ3RleHQtd2hpdGUnKVxuICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnYmctZ3JheS0xMDAnLCAndGV4dC1ncmF5LTcwMCcpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnYmctcHJpbWFyeScsICd0ZXh0LXdoaXRlJylcbiAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2JnLWdyYXktMTAwJywgJ3RleHQtZ3JheS03MDAnKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyBTdG9wIGV2ZW50IHByb3BhZ2F0aW9uXG4gIHN0b3BQcm9wYWdhdGlvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgLy8gQWRkIHlvdXIgdGFyZ2V0cyBoZXJlLCBlLmcuOlxuICAgIC8vIFwibWVzc2FnZUlucHV0XCIsIFwibWVzc2FnZXNDb250YWluZXJcIiwgXCJzZW5kQnV0dG9uXCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgLy8gQWRkIHlvdXIgdmFsdWVzIGhlcmUsIGUuZy46XG4gICAgLy8gcm9vbUlkOiBTdHJpbmcsXG4gICAgLy8gdXNlcklkOiBTdHJpbmdcbiAgfVxuXG4gIC8vIERlY2xhcmUgeW91ciB0YXJnZXRzIGFuZCB2YWx1ZXNcbiAgLy8gZGVjbGFyZSByZWFkb25seSBtZXNzYWdlSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgLy8gZGVjbGFyZSByZWFkb25seSBtZXNzYWdlc0NvbnRhaW5lclRhcmdldDogSFRNTEVsZW1lbnRcbiAgLy8gZGVjbGFyZSByZWFkb25seSByb29tSWRWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkJsaW5kQm94IGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkJsaW5kQm94IGRpc2Nvbm5lY3RlZFwiKVxuICB9XG5cbiAgLy8gQWRkIHlvdXIgYWN0aW9uIG1ldGhvZHMgaGVyZVxuICAvLyBFeGFtcGxlOlxuICAvLyBjbGljaygpOiB2b2lkIHtcbiAgLy8gICBjb25zb2xlLmxvZyhcIkJ1dHRvbiBjbGlja2VkXCIpXG4gIC8vIH1cblxuICAvLyBGT1JNUzogVHVyYm8gKyBUdXJibyBTdHJlYW1zIGhhbmRsZSBldmVyeXRoaW5nIGF1dG9tYXRpY2FsbHlcbiAgLy8gLSBGb3JtcyBzdWJtaXQgdmlhIEFKQVggKFR1cmJvIERyaXZlKVxuICAvLyAtIFNlcnZlciByZXNwb25kcyB3aXRoIGZvcm1hdC50dXJib19zdHJlYW1cbiAgLy8gLSBUdXJibyBTdHJlYW1zIHVwZGF0ZSBET00gYXV0b21hdGljYWxseVxuICAvLyAtIE5PIG1hbnVhbCBmb3JtIGhhbmRsaW5nIG5lZWRlZCBpbiBTdGltdWx1c1xuICAvL1xuICAvLyBVc2UgU3RpbXVsdXMgZm9yOlxuICAvLyAtIFVJIGludGVyYWN0aW9ucyAodG9nZ2xlLCBzaG93L2hpZGUpXG4gIC8vIC0gSW5wdXQgdmFsaWRhdGlvbi9mb3JtYXR0aW5nXG4gIC8vIC0gRHluYW1pYyBmb3JtIGZpZWxkc1xufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wibWFwQ29udGFpbmVyXCIsIFwiY2xvc2VCdXR0b25cIiwgXCJleHBhbmRCdXR0b25cIl1cbiAgXG4gIGRlY2xhcmUgcmVhZG9ubHkgbWFwQ29udGFpbmVyVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGNsb3NlQnV0dG9uVGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IGV4cGFuZEJ1dHRvblRhcmdldDogSFRNTEVsZW1lbnRcbiAgXG4gIHByaXZhdGUgaXNFeHBhbmRlZDogYm9vbGVhbiA9IGZhbHNlXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkhvdGVsTWFwVG9nZ2xlIGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgdG9nZ2xlKCk6IHZvaWQge1xuICAgIHRoaXMuaXNFeHBhbmRlZCA9ICF0aGlzLmlzRXhwYW5kZWRcbiAgICBcbiAgICBpZiAodGhpcy5pc0V4cGFuZGVkKSB7XG4gICAgICAvLyBcdTYyNjlcdTU5MjdcdTU3MzBcdTU2RkVcbiAgICAgIHRoaXMubWFwQ29udGFpbmVyVGFyZ2V0LnN0eWxlLmhlaWdodCA9IFwiNjAwcHhcIlxuICAgICAgdGhpcy5leHBhbmRCdXR0b25UYXJnZXQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgICAgdGhpcy5jbG9zZUJ1dHRvblRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgICBcbiAgICAgIC8vIFx1NkVEQVx1NTJBOFx1NTIzMFx1NTczMFx1NTZGRVx1OTg3Nlx1OTBFOFxuICAgICAgdGhpcy5tYXBDb250YWluZXJUYXJnZXQuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFx1N0YyOVx1NUMwRlx1NTczMFx1NTZGRVxuICAgICAgdGhpcy5tYXBDb250YWluZXJUYXJnZXQuc3R5bGUuaGVpZ2h0ID0gXCIxMjhweFwiXG4gICAgICB0aGlzLmV4cGFuZEJ1dHRvblRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgICB0aGlzLmNsb3NlQnV0dG9uVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgICB9XG4gIH1cblxuICAvLyBcdTRFQ0VcdTU5MTZcdTkwRThcdTYzMDlcdTk0QUVcdUZGMDhcdTU5ODJcdTVCOUFcdTRGNERcdTYzMDlcdTk0QUVcdUZGMDlcdTg5RTZcdTUzRDFcdTU3MzBcdTU2RkVcdTYyNjlcdTVDNTVcbiAgdG9nZ2xlQW5kU2Nyb2xsKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBcbiAgICAvLyBcdTY3RTVcdTYyN0VcdTk4NzVcdTk3NjJcdTRFMEFcdTc2ODRcdTU3MzBcdTU2RkVcdTVCQjlcdTU2NjhcbiAgICBjb25zdCBtYXBDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1ob3RlbC1tYXAtdG9nZ2xlLXRhcmdldD1cIm1hcENvbnRhaW5lclwiXScpIGFzIEhUTUxFbGVtZW50XG4gICAgaWYgKCFtYXBDb250YWluZXIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcdTYyN0VcdTRFMERcdTUyMzBcdTU3MzBcdTU2RkVcdTVCQjlcdTU2NjhcIilcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBcdTY3RTVcdTYyN0VcdTU3MzBcdTU2RkVcdTYzQTdcdTUyMzZcdTU2NjhcdTVCOUVcdTRGOEJcbiAgICBjb25zdCBtYXBDb250cm9sbGVyID0gdGhpcy5hcHBsaWNhdGlvbi5nZXRDb250cm9sbGVyRm9yRWxlbWVudEFuZElkZW50aWZpZXIoXG4gICAgICBtYXBDb250YWluZXIuY2xvc2VzdCgnW2RhdGEtY29udHJvbGxlcn49XCJob3RlbC1tYXAtdG9nZ2xlXCJdJykgYXMgSFRNTEVsZW1lbnQsXG4gICAgICBcImhvdGVsLW1hcC10b2dnbGVcIlxuICAgICkgYXMgYW55XG4gICAgXG4gICAgaWYgKG1hcENvbnRyb2xsZXIpIHtcbiAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NTczMFx1NTZGRVx1NURGMlx1NUM1NVx1NUYwMFx1RkYwQ1x1NTIxOVx1NEUwRFx1NTA1QVx1NEVGQlx1NEY1NVx1NjRDRFx1NEY1Q1xuICAgICAgaWYgKG1hcENvbnRyb2xsZXIuaXNFeHBhbmRlZCkge1xuICAgICAgICBtYXBDb250YWluZXIuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBcdTg5RTZcdTUzRDFcdTU3MzBcdTU2RkVcdTVDNTVcdTVGMDBcbiAgICAgICAgbWFwQ29udHJvbGxlci50b2dnbGUoKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXHU2MjdFXHU0RTBEXHU1MjMwXHU1NzMwXHU1NkZFXHU2M0E3XHU1MjM2XHU1NjY4XCIpXG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgXCJtYXJrZXJcIixcbiAgICBcImhvdGVsQ2FyZFwiXG4gIF1cblxuICBkZWNsYXJlIHJlYWRvbmx5IG1hcmtlclRhcmdldHM6IEhUTUxFbGVtZW50W11cbiAgZGVjbGFyZSByZWFkb25seSBob3RlbENhcmRUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzTWFya2VyVGFyZ2V0OiBib29sZWFuXG4gIGRlY2xhcmUgcmVhZG9ubHkgaGFzSG90ZWxDYXJkVGFyZ2V0OiBib29sZWFuXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkhvdGVsTWFwIGNvbm5lY3RlZFwiKVxuICB9XG5cbiAgZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIkhvdGVsTWFwIGRpc2Nvbm5lY3RlZFwiKVxuICB9XG5cbiAgLy8gU2hvdyBob3RlbCBpbmZvIHdoZW4gbWFya2VyIGlzIGNsaWNrZWRcbiAgc2hvd0hvdGVsSW5mbyhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbWFya2VyID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGhvdGVsSWQgPSBtYXJrZXIuZGF0YXNldC5ob3RlbElkXG4gICAgXG4gICAgaWYgKCFob3RlbElkKSByZXR1cm5cbiAgICBcbiAgICAvLyBGaW5kIHRoZSBjb3JyZXNwb25kaW5nIGhvdGVsIGNhcmRcbiAgICBjb25zdCBob3RlbENhcmQgPSB0aGlzLmhvdGVsQ2FyZFRhcmdldHMuZmluZChcbiAgICAgIGNhcmQgPT4gY2FyZC5kYXRhc2V0LmhvdGVsSWQgPT09IGhvdGVsSWRcbiAgICApXG4gICAgXG4gICAgaWYgKGhvdGVsQ2FyZCkge1xuICAgICAgLy8gU2Nyb2xsIHRvIHRoZSBob3RlbCBjYXJkIHNtb290aGx5XG4gICAgICBob3RlbENhcmQuc2Nyb2xsSW50b1ZpZXcoeyBcbiAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnLCBcbiAgICAgICAgYmxvY2s6ICdjZW50ZXInIFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gQWRkIGhpZ2hsaWdodCBlZmZlY3RcbiAgICAgIGhvdGVsQ2FyZC5jbGFzc0xpc3QuYWRkKCdiZy15ZWxsb3ctNTAnKVxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGhvdGVsQ2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdiZy15ZWxsb3ctNTAnKVxuICAgICAgfSwgMjAwMClcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdmFsdWVzID0ge1xuICAgIGZhbGxiYWNrOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCIvXCIgfVxuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBmYWxsYmFja1ZhbHVlOiBzdHJpbmdcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIC8vIE5vIGNvbnNvbGUubG9nIG5lZWRlZFxuICB9XG5cbiAgLyoqXG4gICAqIFNtYXJ0IGJhY2sgbmF2aWdhdGlvbiBiYXNlZCBvbiByZWZlcnJlclxuICAgKiAtIElmIHVzZXIgY2FtZSBmcm9tIHNhbWUgc2l0ZTogZ28gYmFja1xuICAgKiAtIElmIHVzZXIgY2FtZSBmcm9tIGV4dGVybmFsIHNpdGUgb3IgZGlyZWN0IGFjY2VzczogZ28gdG8gZmFsbGJhY2tcbiAgICovXG4gIGdvQmFjayhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgXG4gICAgY29uc3QgcmVmZXJyZXIgPSBkb2N1bWVudC5yZWZlcnJlclxuICAgIGNvbnN0IGN1cnJlbnRIb3N0ID0gd2luZG93LmxvY2F0aW9uLmhvc3RcbiAgICBcbiAgICAvLyBDaGVjayBpZiByZWZlcnJlciBpcyBmcm9tIHNhbWUgc2l0ZVxuICAgIGlmIChyZWZlcnJlciAmJiByZWZlcnJlci5pbmNsdWRlcyhjdXJyZW50SG9zdCkpIHtcbiAgICAgIC8vIENoZWNrIGlmIHRoZXJlJ3MgYWN0dWFsIGhpc3RvcnlcbiAgICAgIGlmICh3aW5kb3cuaGlzdG9yeS5sZW5ndGggPiAxKSB7XG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gRmFsbGJhY2s6IGdvIHRvIHNwZWNpZmllZCBwYXRoIG9yIHJvb3RcbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHRoaXMuZmFsbGJhY2tWYWx1ZVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXI8SFRNTEVsZW1lbnQ+IHtcbiAgc3RhdGljIHRhcmdldHMgPSBbXG4gICAgLy8gQWRkIHlvdXIgdGFyZ2V0cyBoZXJlLCBlLmcuOlxuICAgIC8vIFwibWVzc2FnZUlucHV0XCIsIFwibWVzc2FnZXNDb250YWluZXJcIiwgXCJzZW5kQnV0dG9uXCJcbiAgXVxuXG4gIHN0YXRpYyB2YWx1ZXMgPSB7XG4gICAgLy8gQWRkIHlvdXIgdmFsdWVzIGhlcmUsIGUuZy46XG4gICAgLy8gcm9vbUlkOiBTdHJpbmcsXG4gICAgLy8gdXNlcklkOiBTdHJpbmdcbiAgfVxuXG4gIC8vIERlY2xhcmUgeW91ciB0YXJnZXRzIGFuZCB2YWx1ZXNcbiAgLy8gZGVjbGFyZSByZWFkb25seSBtZXNzYWdlSW5wdXRUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgLy8gZGVjbGFyZSByZWFkb25seSBtZXNzYWdlc0NvbnRhaW5lclRhcmdldDogSFRNTEVsZW1lbnRcbiAgLy8gZGVjbGFyZSByZWFkb25seSByb29tSWRWYWx1ZTogc3RyaW5nXG5cbiAgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIlRvdXJHcm91cFRhYnMgY29ubmVjdGVkXCIpXG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiVG91ckdyb3VwVGFicyBkaXNjb25uZWN0ZWRcIilcbiAgfVxuXG4gIC8vIEFkZCB5b3VyIGFjdGlvbiBtZXRob2RzIGhlcmVcbiAgLy8gRXhhbXBsZTpcbiAgLy8gY2xpY2soKTogdm9pZCB7XG4gIC8vICAgY29uc29sZS5sb2coXCJCdXR0b24gY2xpY2tlZFwiKVxuICAvLyB9XG5cbiAgLy8gRk9STVM6IFR1cmJvICsgVHVyYm8gU3RyZWFtcyBoYW5kbGUgZXZlcnl0aGluZyBhdXRvbWF0aWNhbGx5XG4gIC8vIC0gRm9ybXMgc3VibWl0IHZpYSBBSkFYIChUdXJibyBEcml2ZSlcbiAgLy8gLSBTZXJ2ZXIgcmVzcG9uZHMgd2l0aCBmb3JtYXQudHVyYm9fc3RyZWFtXG4gIC8vIC0gVHVyYm8gU3RyZWFtcyB1cGRhdGUgRE9NIGF1dG9tYXRpY2FsbHlcbiAgLy8gLSBOTyBtYW51YWwgZm9ybSBoYW5kbGluZyBuZWVkZWQgaW4gU3RpbXVsdXNcbiAgLy9cbiAgLy8gVXNlIFN0aW11bHVzIGZvcjpcbiAgLy8gLSBVSSBpbnRlcmFjdGlvbnMgKHRvZ2dsZSwgc2hvdy9oaWRlKVxuICAvLyAtIElucHV0IHZhbGlkYXRpb24vZm9ybWF0dGluZ1xuICAvLyAtIER5bmFtaWMgZm9ybSBmaWVsZHNcbn1cbiIsICJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgQ29udHJvbGxlcjxIVE1MRWxlbWVudD4ge1xuICBzdGF0aWMgdGFyZ2V0cyA9IFtcbiAgICBcIm1vZGFsXCIsXG4gICAgXCJtaW5TbGlkZXJcIixcbiAgICBcIm1heFNsaWRlclwiLFxuICAgIFwic2xpZGVyVHJhY2tcIixcbiAgICBcIm1pblByaWNlRGlzcGxheVwiLFxuICAgIFwibWF4UHJpY2VEaXNwbGF5XCIsXG4gICAgXCJzdGFyUmF0aW5nXCIsXG4gICAgXCJwcmljZVByZXNldFwiLFxuICAgIFwiZGlzcGxheVRleHRcIlxuICBdXG5cbiAgc3RhdGljIHZhbHVlcyA9IHtcbiAgICBtaW5QcmljZTogTnVtYmVyLFxuICAgIG1heFByaWNlOiBOdW1iZXIsXG4gICAgc3RhcnM6IE51bWJlclxuICB9XG5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBtaW5TbGlkZXJUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBtYXhTbGlkZXJUYXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBzbGlkZXJUcmFja1RhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBtaW5QcmljZURpc3BsYXlUYXJnZXQ6IEhUTUxFbGVtZW50XG4gIGRlY2xhcmUgcmVhZG9ubHkgbWF4UHJpY2VEaXNwbGF5VGFyZ2V0OiBIVE1MRWxlbWVudFxuICBkZWNsYXJlIHJlYWRvbmx5IHN0YXJSYXRpbmdUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgcHJpY2VQcmVzZXRUYXJnZXRzOiBIVE1MRWxlbWVudFtdXG4gIGRlY2xhcmUgcmVhZG9ubHkgZGlzcGxheVRleHRUYXJnZXQ6IEhUTUxFbGVtZW50XG5cbiAgZGVjbGFyZSBtaW5QcmljZVZhbHVlOiBudW1iZXJcbiAgZGVjbGFyZSBtYXhQcmljZVZhbHVlOiBudW1iZXJcbiAgZGVjbGFyZSBzdGFyc1ZhbHVlOiBudW1iZXJcblxuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiSG90ZWxQcmljZUZpbHRlciBjb25uZWN0ZWRcIilcbiAgICBcbiAgICAvLyBUcnkgdG8gcmVhZCBpbml0aWFsIHZhbHVlcyBmcm9tIFVSTCBwYXJhbWV0ZXJzIG9yIGhpZGRlbiBmb3JtIGZpZWxkc1xuICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaClcbiAgICBjb25zdCBtaW5QcmljZVBhcmFtID0gdXJsUGFyYW1zLmdldCgncHJpY2VfbWluJylcbiAgICBjb25zdCBtYXhQcmljZVBhcmFtID0gdXJsUGFyYW1zLmdldCgncHJpY2VfbWF4JylcbiAgICBjb25zdCBzdGFyTGV2ZWxQYXJhbSA9IHVybFBhcmFtcy5nZXQoJ3N0YXJfbGV2ZWwnKVxuICAgIFxuICAgIC8vIEluaXRpYWxpemUgZnJvbSBVUkwgcGFyYW1zIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIHVzZSBkZWZhdWx0c1xuICAgIHRoaXMubWluUHJpY2VWYWx1ZSA9IG1pblByaWNlUGFyYW0gJiYgbWluUHJpY2VQYXJhbSAhPT0gJycgPyBwYXJzZUludChtaW5QcmljZVBhcmFtKSA6IDBcbiAgICB0aGlzLm1heFByaWNlVmFsdWUgPSBtYXhQcmljZVBhcmFtICYmIG1heFByaWNlUGFyYW0gIT09ICcnID8gcGFyc2VJbnQobWF4UHJpY2VQYXJhbSkgOiAzMDAwXG4gICAgdGhpcy5zdGFyc1ZhbHVlID0gc3RhckxldmVsUGFyYW0gJiYgc3RhckxldmVsUGFyYW0gIT09ICcnID8gcGFyc2VJbnQoc3RhckxldmVsUGFyYW0pIDogMFxuICAgIFxuICAgIC8vIFVwZGF0ZSBVSSB0byByZWZsZWN0IGxvYWRlZCB2YWx1ZXNcbiAgICB0aGlzLm1pblNsaWRlclRhcmdldC52YWx1ZSA9IHRoaXMubWluUHJpY2VWYWx1ZS50b1N0cmluZygpXG4gICAgdGhpcy5tYXhTbGlkZXJUYXJnZXQudmFsdWUgPSB0aGlzLm1heFByaWNlVmFsdWUudG9TdHJpbmcoKVxuICAgIHRoaXMubWluUHJpY2VEaXNwbGF5VGFyZ2V0LnRleHRDb250ZW50ID0gdGhpcy5taW5QcmljZVZhbHVlLnRvU3RyaW5nKClcbiAgICB0aGlzLm1heFByaWNlRGlzcGxheVRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMubWF4UHJpY2VWYWx1ZS50b1N0cmluZygpXG4gICAgXG4gICAgLy8gVXBkYXRlIHNsaWRlciB0cmFjayB2aXN1YWxcbiAgICB0aGlzLnVwZGF0ZVNsaWRlclRyYWNrKClcbiAgICBcbiAgICAvLyBVcGRhdGUgcHJpY2UgcHJlc2V0IGJ1dHRvbiBzZWxlY3Rpb24gaWYgdmFsdWVzIG1hdGNoIGEgcHJlc2V0XG4gICAgdGhpcy51cGRhdGVQcmVzZXRTZWxlY3Rpb24oKVxuICAgIFxuICAgIC8vIFVwZGF0ZSBzdGFyIHJhdGluZyBidXR0b24gc2VsZWN0aW9uXG4gICAgdGhpcy51cGRhdGVTdGFyU2VsZWN0aW9uKClcbiAgICBcbiAgICAvLyBVcGRhdGUgZGlzcGxheSB0ZXh0XG4gICAgdGhpcy51cGRhdGVEaXNwbGF5VGV4dCgpXG4gIH1cblxuICBvcGVuTW9kYWwoKTogdm9pZCB7XG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJ1xuICB9XG5cbiAgY2xvc2VNb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICcnXG4gIH1cblxuICB1cGRhdGVNaW5QcmljZSgpOiB2b2lkIHtcbiAgICBjb25zdCBtaW5WYWx1ZSA9IHBhcnNlSW50KHRoaXMubWluU2xpZGVyVGFyZ2V0LnZhbHVlKVxuICAgIGNvbnN0IG1heFZhbHVlID0gcGFyc2VJbnQodGhpcy5tYXhTbGlkZXJUYXJnZXQudmFsdWUpXG5cbiAgICAvLyBBdXRvLWFkanVzdDogbWluIGNhbm5vdCBleGNlZWQgbWF4XG4gICAgaWYgKG1pblZhbHVlID4gbWF4VmFsdWUpIHtcbiAgICAgIHRoaXMubWluU2xpZGVyVGFyZ2V0LnZhbHVlID0gbWF4VmFsdWUudG9TdHJpbmcoKVxuICAgICAgdGhpcy5taW5QcmljZVZhbHVlID0gbWF4VmFsdWVcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5taW5QcmljZVZhbHVlID0gbWluVmFsdWVcbiAgICB9XG5cbiAgICB0aGlzLm1pblByaWNlRGlzcGxheVRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMubWluUHJpY2VWYWx1ZS50b1N0cmluZygpXG4gICAgdGhpcy51cGRhdGVTbGlkZXJUcmFjaygpXG4gIH1cblxuICB1cGRhdGVNYXhQcmljZSgpOiB2b2lkIHtcbiAgICBjb25zdCBtaW5WYWx1ZSA9IHBhcnNlSW50KHRoaXMubWluU2xpZGVyVGFyZ2V0LnZhbHVlKVxuICAgIGNvbnN0IG1heFZhbHVlID0gcGFyc2VJbnQodGhpcy5tYXhTbGlkZXJUYXJnZXQudmFsdWUpXG5cbiAgICAvLyBBdXRvLWFkanVzdDogbWF4IGNhbm5vdCBiZSBsZXNzIHRoYW4gbWluXG4gICAgaWYgKG1heFZhbHVlIDwgbWluVmFsdWUpIHtcbiAgICAgIHRoaXMubWF4U2xpZGVyVGFyZ2V0LnZhbHVlID0gbWluVmFsdWUudG9TdHJpbmcoKVxuICAgICAgdGhpcy5tYXhQcmljZVZhbHVlID0gbWluVmFsdWVcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tYXhQcmljZVZhbHVlID0gbWF4VmFsdWVcbiAgICB9XG5cbiAgICB0aGlzLm1heFByaWNlRGlzcGxheVRhcmdldC50ZXh0Q29udGVudCA9IHRoaXMubWF4UHJpY2VWYWx1ZS50b1N0cmluZygpXG4gICAgdGhpcy51cGRhdGVTbGlkZXJUcmFjaygpXG4gIH1cblxuICBzZXRRdWlja1ByaWNlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBtaW4gPSBwYXJzZUludChidXR0b24uZGF0YXNldC5taW4gfHwgJzAnKVxuICAgIGNvbnN0IG1heCA9IHBhcnNlSW50KGJ1dHRvbi5kYXRhc2V0Lm1heCB8fCAnMzAwMCcpXG5cbiAgICAvLyBDbGVhciBhbGwgcHJpY2UgcHJlc2V0IHNlbGVjdGlvbnMgZmlyc3RcbiAgICB0aGlzLnByaWNlUHJlc2V0VGFyZ2V0cy5mb3JFYWNoKGVsID0+IHtcbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJywgJ2JvcmRlci15ZWxsb3ctNTAwJywgJ2JnLXllbGxvdy01MCcpXG4gICAgICBlbC5jbGFzc0xpc3QuYWRkKCdib3JkZXItZ3JheS0zMDAnKVxuICAgIH0pXG5cbiAgICAvLyBTZWxlY3QgdGhlIGNsaWNrZWQgcHJlc2V0XG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1ncmF5LTMwMCcpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJywgJ2JvcmRlci15ZWxsb3ctNTAwJywgJ2JnLXllbGxvdy01MCcpXG5cbiAgICB0aGlzLm1pblNsaWRlclRhcmdldC52YWx1ZSA9IG1pbi50b1N0cmluZygpXG4gICAgdGhpcy5tYXhTbGlkZXJUYXJnZXQudmFsdWUgPSBtYXgudG9TdHJpbmcoKVxuICAgIHRoaXMubWluUHJpY2VWYWx1ZSA9IG1pblxuICAgIHRoaXMubWF4UHJpY2VWYWx1ZSA9IG1heFxuICAgIHRoaXMubWluUHJpY2VEaXNwbGF5VGFyZ2V0LnRleHRDb250ZW50ID0gbWluLnRvU3RyaW5nKClcbiAgICB0aGlzLm1heFByaWNlRGlzcGxheVRhcmdldC50ZXh0Q29udGVudCA9IG1heC50b1N0cmluZygpXG4gICAgdGhpcy51cGRhdGVTbGlkZXJUcmFjaygpXG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVNsaWRlclRyYWNrKCk6IHZvaWQge1xuICAgIGNvbnN0IHNsaWRlck1heCA9IDMwMDBcbiAgICBjb25zdCBtaW5QZXJjZW50ID0gKHRoaXMubWluUHJpY2VWYWx1ZSAvIHNsaWRlck1heCkgKiAxMDBcbiAgICBjb25zdCBtYXhQZXJjZW50ID0gKHRoaXMubWF4UHJpY2VWYWx1ZSAvIHNsaWRlck1heCkgKiAxMDBcblxuICAgIHRoaXMuc2xpZGVyVHJhY2tUYXJnZXQuc3R5bGUubGVmdCA9IGAke21pblBlcmNlbnR9JWBcbiAgICB0aGlzLnNsaWRlclRyYWNrVGFyZ2V0LnN0eWxlLnJpZ2h0ID0gYCR7MTAwIC0gbWF4UGVyY2VudH0lYFxuICB9XG5cbiAgc2VsZWN0U3RhclJhdGluZyhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3Qgc3RhcnMgPSBwYXJzZUludCh0YXJnZXQuZGF0YXNldC5zdGFycyB8fCAnMCcpXG5cbiAgICAvLyBUb2dnbGUgc2VsZWN0aW9uOiBpZiBhbHJlYWR5IHNlbGVjdGVkLCBkZXNlbGVjdFxuICAgIGlmICh0aGlzLnN0YXJzVmFsdWUgPT09IHN0YXJzKSB7XG4gICAgICB0aGlzLnN0YXJzVmFsdWUgPSAwXG4gICAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnLCAnYm9yZGVyLXllbGxvdy01MDAnLCAnYmcteWVsbG93LTUwJylcbiAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdib3JkZXItZ3JheS0zMDAnKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDbGVhciBhbGwgc2VsZWN0aW9ucyBmaXJzdFxuICAgICAgdGhpcy5zdGFyUmF0aW5nVGFyZ2V0cy5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnLCAnYm9yZGVyLXllbGxvdy01MDAnLCAnYmcteWVsbG93LTUwJylcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLWdyYXktMzAwJylcbiAgICAgIH0pXG5cbiAgICAgIC8vIFNlbGVjdCB0aGUgY2xpY2tlZCBvbmVcbiAgICAgIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItZ3JheS0zMDAnKVxuICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJywgJ2JvcmRlci15ZWxsb3ctNTAwJywgJ2JnLXllbGxvdy01MCcpXG4gICAgICB0aGlzLnN0YXJzVmFsdWUgPSBzdGFyc1xuICAgIH1cbiAgfVxuXG4gIHJlc2V0KCk6IHZvaWQge1xuICAgIC8vIFJlc2V0IHByaWNlIHNsaWRlcnNcbiAgICB0aGlzLm1pblByaWNlVmFsdWUgPSAwXG4gICAgdGhpcy5tYXhQcmljZVZhbHVlID0gMzAwMFxuICAgIHRoaXMubWluU2xpZGVyVGFyZ2V0LnZhbHVlID0gJzAnXG4gICAgdGhpcy5tYXhTbGlkZXJUYXJnZXQudmFsdWUgPSAnMzAwMCdcbiAgICB0aGlzLm1pblByaWNlRGlzcGxheVRhcmdldC50ZXh0Q29udGVudCA9ICcwJ1xuICAgIHRoaXMubWF4UHJpY2VEaXNwbGF5VGFyZ2V0LnRleHRDb250ZW50ID0gJzMwMDAnXG4gICAgdGhpcy51cGRhdGVTbGlkZXJUcmFjaygpXG5cbiAgICAvLyBSZXNldCBwcmljZSBwcmVzZXRzXG4gICAgdGhpcy5wcmljZVByZXNldFRhcmdldHMuZm9yRWFjaChlbCA9PiB7XG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcsICdib3JkZXIteWVsbG93LTUwMCcsICdiZy15ZWxsb3ctNTAnKVxuICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLWdyYXktMzAwJylcbiAgICB9KVxuXG4gICAgLy8gUmVzZXQgc3RhciByYXRpbmdzXG4gICAgdGhpcy5zdGFyc1ZhbHVlID0gMFxuICAgIHRoaXMuc3RhclJhdGluZ1RhcmdldHMuZm9yRWFjaChlbCA9PiB7XG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcsICdib3JkZXIteWVsbG93LTUwMCcsICdiZy15ZWxsb3ctNTAnKVxuICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLWdyYXktMzAwJylcbiAgICB9KVxuXG4gICAgLy8gVXBkYXRlIGRpc3BsYXkgdGV4dFxuICAgIHRoaXMudXBkYXRlRGlzcGxheVRleHQoKVxuICB9XG5cbiAgY29uZmlybSgpOiB2b2lkIHtcbiAgICB0aGlzLnVwZGF0ZURpc3BsYXlUZXh0KClcbiAgICB0aGlzLmRpc3BhdGNoRmlsdGVyVXBkYXRlRXZlbnQoKVxuICAgIHRoaXMuY2xvc2VNb2RhbCgpXG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZURpc3BsYXlUZXh0KCk6IHZvaWQge1xuICAgIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFtdXG4gICAgXG4gICAgLy8gQWRkIHByaWNlIHJhbmdlIGlmIG5vdCBkZWZhdWx0ICgwLTMwMDApXG4gICAgaWYgKHRoaXMubWluUHJpY2VWYWx1ZSA+IDAgfHwgdGhpcy5tYXhQcmljZVZhbHVlIDwgMzAwMCkge1xuICAgICAgaWYgKHRoaXMubWF4UHJpY2VWYWx1ZSA+PSAzMDAwKSB7XG4gICAgICAgIHBhcnRzLnB1c2goYFx1MDBBNSR7dGhpcy5taW5QcmljZVZhbHVlfStgKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFydHMucHVzaChgXHUwMEE1JHt0aGlzLm1pblByaWNlVmFsdWV9LSR7dGhpcy5tYXhQcmljZVZhbHVlfWApXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEFkZCBzdGFyIHJhdGluZyBpZiBzZWxlY3RlZFxuICAgIGlmICh0aGlzLnN0YXJzVmFsdWUgPiAwKSB7XG4gICAgICBjb25zdCBzdGFyTGFiZWxzOiBSZWNvcmQ8bnVtYmVyLCBzdHJpbmc+ID0ge1xuICAgICAgICAyOiAnXHU0RThDXHU2NjFGJyxcbiAgICAgICAgMzogJ1x1NEUwOVx1NjYxRicsXG4gICAgICAgIDQ6ICdcdTU2REJcdTY2MUYnLFxuICAgICAgICA1OiAnXHU0RTk0XHU2NjFGJ1xuICAgICAgfVxuICAgICAgcGFydHMucHVzaChzdGFyTGFiZWxzW3RoaXMuc3RhcnNWYWx1ZV0gfHwgYCR7dGhpcy5zdGFyc1ZhbHVlfVx1NjYxRmApXG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSBkaXNwbGF5IHRleHRcbiAgICBpZiAocGFydHMubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5kaXNwbGF5VGV4dFRhcmdldC50ZXh0Q29udGVudCA9IHBhcnRzLmpvaW4oJyBcdTAwQjcgJylcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kaXNwbGF5VGV4dFRhcmdldC50ZXh0Q29udGVudCA9ICdcdTRFRjdcdTY4M0MvXHU2NjFGXHU3RUE3J1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZGlzcGF0Y2hGaWx0ZXJVcGRhdGVFdmVudCgpOiB2b2lkIHtcbiAgICBjb25zdCBmaWx0ZXJVcGRhdGVFdmVudCA9IG5ldyBDdXN0b21FdmVudCgnaG90ZWwtcHJpY2UtZmlsdGVyOmZpbHRlci11cGRhdGVkJywge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIG1pblByaWNlOiB0aGlzLm1pblByaWNlVmFsdWUsXG4gICAgICAgIG1heFByaWNlOiB0aGlzLm1heFByaWNlVmFsdWUsXG4gICAgICAgIHN0YXJzOiB0aGlzLnN0YXJzVmFsdWVcbiAgICAgIH0sXG4gICAgICBidWJibGVzOiB0cnVlXG4gICAgfSlcbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGZpbHRlclVwZGF0ZUV2ZW50KVxuICAgIGNvbnNvbGUubG9nKCdIb3RlbCBwcmljZSBmaWx0ZXI6IERpc3BhdGNoZWQgZmlsdGVyIHVwZGF0ZSBldmVudCcsIHtcbiAgICAgIG1pblByaWNlOiB0aGlzLm1pblByaWNlVmFsdWUsXG4gICAgICBtYXhQcmljZTogdGhpcy5tYXhQcmljZVZhbHVlLFxuICAgICAgc3RhcnM6IHRoaXMuc3RhcnNWYWx1ZVxuICAgIH0pXG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVByZXNldFNlbGVjdGlvbigpOiB2b2lkIHtcbiAgICAvLyBGaW5kIG1hdGNoaW5nIHByZXNldCBidXR0b24gYW5kIG1hcmsgaXQgYXMgc2VsZWN0ZWRcbiAgICB0aGlzLnByaWNlUHJlc2V0VGFyZ2V0cy5mb3JFYWNoKGVsID0+IHtcbiAgICAgIGNvbnN0IG1pbiA9IHBhcnNlSW50KGVsLmRhdGFzZXQubWluIHx8ICcwJylcbiAgICAgIGNvbnN0IG1heCA9IHBhcnNlSW50KGVsLmRhdGFzZXQubWF4IHx8ICczMDAwJylcbiAgICAgIFxuICAgICAgaWYgKG1pbiA9PT0gdGhpcy5taW5QcmljZVZhbHVlICYmIG1heCA9PT0gdGhpcy5tYXhQcmljZVZhbHVlKSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1ncmF5LTMwMCcpXG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJywgJ2JvcmRlci15ZWxsb3ctNTAwJywgJ2JnLXllbGxvdy01MCcpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcsICdib3JkZXIteWVsbG93LTUwMCcsICdiZy15ZWxsb3ctNTAnKVxuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdib3JkZXItZ3JheS0zMDAnKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVN0YXJTZWxlY3Rpb24oKTogdm9pZCB7XG4gICAgLy8gVXBkYXRlIHN0YXIgcmF0aW5nIGJ1dHRvbiBzZWxlY3Rpb25cbiAgICB0aGlzLnN0YXJSYXRpbmdUYXJnZXRzLmZvckVhY2goZWwgPT4ge1xuICAgICAgY29uc3Qgc3RhcnMgPSBwYXJzZUludChlbC5kYXRhc2V0LnN0YXJzIHx8ICcwJylcbiAgICAgIFxuICAgICAgaWYgKHN0YXJzID09PSB0aGlzLnN0YXJzVmFsdWUgJiYgdGhpcy5zdGFyc1ZhbHVlID4gMCkge1xuICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItZ3JheS0zMDAnKVxuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcsICdib3JkZXIteWVsbG93LTUwMCcsICdiZy15ZWxsb3ctNTAnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnLCAnYm9yZGVyLXllbGxvdy01MDAnLCAnYmcteWVsbG93LTUwJylcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLWdyYXktMzAwJylcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cblxufVxuIiwgImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiQGhvdHdpcmVkL3N0aW11bHVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBDb250cm9sbGVyPEhUTUxFbGVtZW50PiB7XG4gIHN0YXRpYyB0YXJnZXRzID0gW1wibW9kYWxcIiwgXCJjb250ZW50XCJdXG5cbiAgZGVjbGFyZSByZWFkb25seSBtb2RhbFRhcmdldDogSFRNTEVsZW1lbnRcbiAgZGVjbGFyZSByZWFkb25seSBjb250ZW50VGFyZ2V0OiBIVE1MRWxlbWVudFxuXG4gIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJIb3RlbEd1YXJhbnRlZSBjb25uZWN0ZWRcIilcbiAgfVxuXG4gIG9wZW4oKTogdm9pZCB7XG4gICAgdGhpcy5tb2RhbFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gIH1cblxuICBjbG9zZShldmVudD86IEV2ZW50KTogdm9pZCB7XG4gICAgaWYgKGV2ZW50KSB7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIH1cbiAgICB0aGlzLm1vZGFsVGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgfVxuXG4gIGNsb3NlT25CYWNrZHJvcChldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIGlmIChldmVudC50YXJnZXQgPT09IHRoaXMubW9kYWxUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2xvc2UoKVxuICAgIH1cbiAgfVxuXG4gIHN0b3BQcm9wYWdhdGlvbihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXIge1xuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiQWJyb2FkVGlja2V0VHlwZSBjb250cm9sbGVyIGNvbm5lY3RlZFwiKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCJAaG90d2lyZWQvc3RpbXVsdXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbnRyb2xsZXIge1xuICBjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiTGFuZG1hcmtGaWx0ZXIgY29udHJvbGxlciBjb25uZWN0ZWRcIilcbiAgfVxufVxuIiwgImltcG9ydCB7IEFwcGxpY2F0aW9uIH0gZnJvbSBcIkBob3R3aXJlZC9zdGltdWx1c1wiXG5cbmltcG9ydCBUaGVtZUNvbnRyb2xsZXIgZnJvbSBcIi4vdGhlbWVfY29udHJvbGxlclwiXG5pbXBvcnQgRHJvcGRvd25Db250cm9sbGVyIGZyb20gXCIuL2Ryb3Bkb3duX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFNka0ludGVncmF0aW9uQ29udHJvbGxlciBmcm9tIFwiLi9zZGtfaW50ZWdyYXRpb25fY29udHJvbGxlclwiXG5pbXBvcnQgQ2xpcGJvYXJkQ29udHJvbGxlciBmcm9tIFwiLi9jbGlwYm9hcmRfY29udHJvbGxlclwiXG5pbXBvcnQgQ2l0eVNlbGVjdG9yQ29udHJvbGxlciBmcm9tIFwiLi9jaXR5X3NlbGVjdG9yX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEZsaWdodFNlYXJjaENvbnRyb2xsZXIgZnJvbSBcIi4vZmxpZ2h0X3NlYXJjaF9jb250cm9sbGVyXCJcbmltcG9ydCBGbGlnaHRIaXN0b3J5Q29udHJvbGxlciBmcm9tIFwiLi9mbGlnaHRfaGlzdG9yeV9jb250cm9sbGVyXCJcbmltcG9ydCBEYXRlUGlja2VyQ29udHJvbGxlciBmcm9tIFwiLi9kYXRlX3BpY2tlcl9jb250cm9sbGVyXCJcbmltcG9ydCBCb29raW5nQ29udHJvbGxlciBmcm9tIFwiLi9ib29raW5nX2NvbnRyb2xsZXJcIlxuaW1wb3J0IENvdXBvbkNvbnRyb2xsZXIgZnJvbSBcIi4vY291cG9uX2NvbnRyb2xsZXJcIlxuLy8gQ29taW5nU29vbkNvbnRyb2xsZXIgcmVtb3ZlZCAtIHVzaW5nIHdpbmRvdy5zaG93VG9hc3QoKSBpbnN0ZWFkXG5pbXBvcnQgRGVzdGluYXRpb25Db250cm9sbGVyIGZyb20gXCIuL2Rlc3RpbmF0aW9uX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFJlZ2lvblNlbGVjdG9yQ29udHJvbGxlciBmcm9tIFwiLi9yZWdpb25fc2VsZWN0b3JfY29udHJvbGxlclwiXG5pbXBvcnQgSG90ZWxTZWFyY2hDb250cm9sbGVyIGZyb20gXCIuL2hvdGVsX3NlYXJjaF9jb250cm9sbGVyXCJcbmltcG9ydCBIb3RlbERldGFpbENvbnRyb2xsZXIgZnJvbSBcIi4vaG90ZWxfZGV0YWlsX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFNlcnZpY2VHcmlkQ29udHJvbGxlciBmcm9tIFwiLi9zZXJ2aWNlX2dyaWRfY29udHJvbGxlclwiXG5pbXBvcnQgUGFzc2VuZ2VyU2VsZWN0b3JDb250cm9sbGVyIGZyb20gXCIuL3Bhc3Nlbmdlcl9zZWxlY3Rvcl9jb250cm9sbGVyXCJcbmltcG9ydCBDYWJpblNlbGVjdG9yQ29udHJvbGxlciBmcm9tIFwiLi9jYWJpbl9zZWxlY3Rvcl9jb250cm9sbGVyXCJcbmltcG9ydCBUcmlwVHlwZUNvbnRyb2xsZXIgZnJvbSBcIi4vdHJpcF90eXBlX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFJldHVybkRhdGVQaWNrZXJDb250cm9sbGVyIGZyb20gXCIuL3JldHVybl9kYXRlX3BpY2tlcl9jb250cm9sbGVyXCJcbmltcG9ydCBSb3VuZFRyaXBTZWxlY3RvckNvbnRyb2xsZXIgZnJvbSBcIi4vcm91bmRfdHJpcF9zZWxlY3Rvcl9jb250cm9sbGVyXCJcbmltcG9ydCBUcmFpblNlYXJjaENvbnRyb2xsZXIgZnJvbSBcIi4vdHJhaW5fc2VhcmNoX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFRyYWluTGlzdENvbnRyb2xsZXIgZnJvbSBcIi4vdHJhaW5fbGlzdF9jb250cm9sbGVyXCJcbmltcG9ydCBUcmFpbkNpdHlTZWxlY3RvckNvbnRyb2xsZXIgZnJvbSBcIi4vdHJhaW5fY2l0eV9zZWxlY3Rvcl9jb250cm9sbGVyXCJcbmltcG9ydCBJbmZpbml0ZVNjcm9sbENvbnRyb2xsZXIgZnJvbSBcIi4vaW5maW5pdGVfc2Nyb2xsX2NvbnRyb2xsZXJcIlxuaW1wb3J0IERlZXBUcmF2ZWxDb250cm9sbGVyIGZyb20gXCIuL2RlZXBfdHJhdmVsX2NvbnRyb2xsZXJcIlxuaW1wb3J0IE11bHRpQ2l0eUNvbnRyb2xsZXIgZnJvbSBcIi4vbXVsdGlfY2l0eV9jb250cm9sbGVyXCJcbmltcG9ydCBGbGlnaHRGaWx0ZXJDb250cm9sbGVyIGZyb20gXCIuL2ZsaWdodF9maWx0ZXJfY29udHJvbGxlclwiXG5pbXBvcnQgRmxpZ2h0U29ydENvbnRyb2xsZXIgZnJvbSBcIi4vZmxpZ2h0X3NvcnRfY29udHJvbGxlclwiXG5pbXBvcnQgRmxpZ2h0SW5mb0Rpc3BsYXlDb250cm9sbGVyIGZyb20gXCIuL2ZsaWdodF9pbmZvX2Rpc3BsYXlfY29udHJvbGxlclwiXG5pbXBvcnQgRGF0ZUxpbmtDb250cm9sbGVyIGZyb20gXCIuL2RhdGVfbGlua19jb250cm9sbGVyXCJcbmltcG9ydCBIb3RlbEd1ZXN0U2VsZWN0b3JDb250cm9sbGVyIGZyb20gXCIuL2hvdGVsX2d1ZXN0X3NlbGVjdG9yX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEhvdGVsRGF0ZVBpY2tlckNvbnRyb2xsZXIgZnJvbSBcIi4vaG90ZWxfZGF0ZV9waWNrZXJfY29udHJvbGxlclwiXG5pbXBvcnQgUGF5bWVudE1vZGFsQ29udHJvbGxlciBmcm9tIFwiLi9wYXltZW50X21vZGFsX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFBheW1lbnRDb25maXJtYXRpb25Db250cm9sbGVyIGZyb20gXCIuL3BheW1lbnRfY29uZmlybWF0aW9uX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEhvdGVsVGFic0NvbnRyb2xsZXIgZnJvbSBcIi4vaG90ZWxfdGFic19jb250cm9sbGVyXCJcbmltcG9ydCBIb3RlbFRyYXZlbGVyU2VsZWN0b3JDb250cm9sbGVyIGZyb20gXCIuL2hvdGVsX3RyYXZlbGVyX3NlbGVjdG9yX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFRvYXN0Q29udHJvbGxlciBmcm9tIFwiLi90b2FzdF9jb250cm9sbGVyXCJcbmltcG9ydCBUb2FzdFRyaWdnZXJDb250cm9sbGVyIGZyb20gXCIuL3RvYXN0X3RyaWdnZXJfY29udHJvbGxlclwiXG5pbXBvcnQgSG90ZWxCb29raW5nQ29udHJvbGxlciBmcm9tIFwiLi9ob3RlbF9ib29raW5nX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFRvdXJEZXRhaWxDb250cm9sbGVyIGZyb20gXCIuL3RvdXJfZGV0YWlsX2NvbnRyb2xsZXJcIlxuaW1wb3J0IENhcm91c2VsQ29udHJvbGxlciBmcm9tIFwiLi9jYXJvdXNlbF9jb250cm9sbGVyXCJcbmltcG9ydCBTY3JvbGxTcHlDb250cm9sbGVyIGZyb20gXCIuL3Njcm9sbF9zcHlfY29udHJvbGxlclwiXG5pbXBvcnQgUGFja2FnZVN3aXRjaGVyQ29udHJvbGxlciBmcm9tIFwiLi9wYWNrYWdlX3N3aXRjaGVyX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEJvb2tpbmdNb2RhbENvbnRyb2xsZXIgZnJvbSBcIi4vYm9va2luZ19tb2RhbF9jb250cm9sbGVyXCJcbmltcG9ydCBCb3R0b21CYXJDb250cm9sbGVyIGZyb20gXCIuL2JvdHRvbV9iYXJfY29udHJvbGxlclwiXG5pbXBvcnQgSW5zdXJhbmNlU2VsZWN0b3JDb250cm9sbGVyIGZyb20gXCIuL2luc3VyYW5jZV9zZWxlY3Rvcl9jb250cm9sbGVyXCJcbmltcG9ydCBUb3VyVHJhdmVsZXJTZWxlY3RvckNvbnRyb2xsZXIgZnJvbSBcIi4vdG91cl90cmF2ZWxlcl9zZWxlY3Rvcl9jb250cm9sbGVyXCJcbmltcG9ydCBTcGVjaWFsRmxpZ2h0c0Zvcm1Db250cm9sbGVyIGZyb20gXCIuL3NwZWNpYWxfZmxpZ2h0c19mb3JtX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFRyYWluQm9va2luZ0NvbnRyb2xsZXIgZnJvbSBcIi4vdHJhaW5fYm9va2luZ19jb250cm9sbGVyXCJcbmltcG9ydCBUcmFpbkJvb2tpbmdMb2NrQ29udHJvbGxlciBmcm9tIFwiLi90cmFpbl9ib29raW5nX2xvY2tfY29udHJvbGxlclwiXG5pbXBvcnQgVHJhaW5TZWF0U2VsZWN0b3JDb250cm9sbGVyIGZyb20gXCIuL3RyYWluX3NlYXRfc2VsZWN0b3JfY29udHJvbGxlclwiXG5pbXBvcnQgVG91ckdyb3VwRmlsdGVyQ29udHJvbGxlciBmcm9tIFwiLi90b3VyX2dyb3VwX2ZpbHRlcl9jb250cm9sbGVyXCJcbmltcG9ydCBDYXJSZW50YWxUYWJzQ29udHJvbGxlciBmcm9tIFwiLi9jYXJfcmVudGFsX3RhYnNfY29udHJvbGxlclwiXG5pbXBvcnQgSG90ZWxQYWNrYWdlU2VhcmNoQ29udHJvbGxlciBmcm9tIFwiLi9ob3RlbF9wYWNrYWdlX3NlYXJjaF9jb250cm9sbGVyXCJcbmltcG9ydCBIb3RlbFBhY2thZ2VPcmRlckNvbnRyb2xsZXIgZnJvbSBcIi4vaG90ZWxfcGFja2FnZV9vcmRlcl9jb250cm9sbGVyXCJcbmltcG9ydCBQd2FJbnN0YWxsQ29udHJvbGxlciBmcm9tIFwiLi9wd2FfaW5zdGFsbF9jb250cm9sbGVyXCJcbmltcG9ydCBCdXNEYXRlUGlja2VyQ29udHJvbGxlciBmcm9tIFwiLi9idXNfZGF0ZV9waWNrZXJfY29udHJvbGxlclwiXG5pbXBvcnQgQnVzVGlja2V0U2VhcmNoQ29udHJvbGxlciBmcm9tIFwiLi9idXNfdGlja2V0X3NlYXJjaF9jb250cm9sbGVyXCJcbmltcG9ydCBCdXNUaWNrZXRPcmRlckNvbnRyb2xsZXIgZnJvbSBcIi4vYnVzX3RpY2tldF9vcmRlcl9jb250cm9sbGVyXCJcbmltcG9ydCBEZWVwQm9va2luZ0NvbnRyb2xsZXIgZnJvbSBcIi4vZGVlcF9ib29raW5nX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFZpc2FPcmRlckNvbnRyb2xsZXIgZnJvbSBcIi4vdmlzYV9vcmRlcl9jb250cm9sbGVyXCJcbmltcG9ydCBBYnJvYWRSZWdpb25TZWxlY3RvckNvbnRyb2xsZXIgZnJvbSBcIi4vYWJyb2FkX3JlZ2lvbl9zZWxlY3Rvcl9jb250cm9sbGVyXCJcbmltcG9ydCBBYnJvYWREYXRlUGlja2VyQ29udHJvbGxlciBmcm9tIFwiLi9hYnJvYWRfZGF0ZV9waWNrZXJfY29udHJvbGxlclwiXG5pbXBvcnQgQWJyb2FkUGFzc2VuZ2VyU2VsZWN0b3JDb250cm9sbGVyIGZyb20gXCIuL2Ficm9hZF9wYXNzZW5nZXJfc2VsZWN0b3JfY29udHJvbGxlclwiXG5pbXBvcnQgQWJyb2FkT3JkZXJGb3JtQ29udHJvbGxlciBmcm9tIFwiLi9hYnJvYWRfb3JkZXJfZm9ybV9jb250cm9sbGVyXCJcbmltcG9ydCBBYnJvYWRUaWNrZXRTZWFyY2hDb250cm9sbGVyIGZyb20gXCIuL2Ficm9hZF90aWNrZXRfc2VhcmNoX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEhvbWVzdGF5U2VhcmNoQ29udHJvbGxlciBmcm9tIFwiLi9ob21lc3RheV9zZWFyY2hfY29udHJvbGxlclwiXG5pbXBvcnQgSW50ZXJuZXRTZXJ2aWNlc0NvbnRyb2xsZXIgZnJvbSBcIi4vaW50ZXJuZXRfc2VydmljZXNfY29udHJvbGxlclwiXG5pbXBvcnQgU2ltQ2FyZEZpbHRlckNvbnRyb2xsZXIgZnJvbSBcIi4vc2ltX2NhcmRfZmlsdGVyX2NvbnRyb2xsZXJcIlxuaW1wb3J0IERhdGFQbGFuQ29udHJvbGxlciBmcm9tIFwiLi9kYXRhX3BsYW5fY29udHJvbGxlclwiXG5pbXBvcnQgV2lmaUJvb2tpbmdDb250cm9sbGVyIGZyb20gXCIuL3dpZmlfYm9va2luZ19jb250cm9sbGVyXCJcbmltcG9ydCBJbnRlcm5ldE9yZGVyRm9ybUNvbnRyb2xsZXIgZnJvbSBcIi4vaW50ZXJuZXRfb3JkZXJfZm9ybV9jb250cm9sbGVyXCJcbmltcG9ydCBQcm9kdWN0Q2FyZENvbnRyb2xsZXIgZnJvbSBcIi4vcHJvZHVjdF9jYXJkX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFNpbUNhcmRCb29raW5nQ29udHJvbGxlciBmcm9tIFwiLi9zaW1fY2FyZF9ib29raW5nX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFFyY29kZU1vZGFsQ29udHJvbGxlciBmcm9tIFwiLi9xcmNvZGVfbW9kYWxfY29udHJvbGxlclwiXG5pbXBvcnQgTG9jYXRpb25TZWxlY3RvckNvbnRyb2xsZXIgZnJvbSBcIi4vbG9jYXRpb25fc2VsZWN0b3JfY29udHJvbGxlclwiXG5pbXBvcnQgVHJhbnNmZXJTZWFyY2hDb250cm9sbGVyIGZyb20gXCIuL3RyYW5zZmVyX3NlYXJjaF9jb250cm9sbGVyXCJcbmltcG9ydCBBZGRyZXNzU2VsZWN0b3JDb250cm9sbGVyIGZyb20gXCIuL2FkZHJlc3Nfc2VsZWN0b3JfY29udHJvbGxlclwiXG5pbXBvcnQgU2VhcmNoQ29udHJvbGxlciBmcm9tIFwiLi9zZWFyY2hfY29udHJvbGxlclwiXG5pbXBvcnQgSG90ZWxGaWx0ZXJQZXJzaXN0ZW5jZUNvbnRyb2xsZXIgZnJvbSBcIi4vaG90ZWxfZmlsdGVyX3BlcnNpc3RlbmNlX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEhvdGVsU2VydmljZXNTZWFyY2hDb250cm9sbGVyIGZyb20gXCIuL2hvdGVsX3NlcnZpY2VzX3NlYXJjaF9jb250cm9sbGVyXCJcbmltcG9ydCBMaXZlUm9vbUNvbnRyb2xsZXIgZnJvbSBcIi4vbGl2ZV9yb29tX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFNwZWNpYWxIb3RlbFNlYXJjaENvbnRyb2xsZXIgZnJvbSBcIi4vc3BlY2lhbF9ob3RlbF9zZWFyY2hfY29udHJvbGxlclwiXG5pbXBvcnQgU3BlY2lhbEhvdGVsRmlsdGVyQ29udHJvbGxlciBmcm9tIFwiLi9zcGVjaWFsX2hvdGVsX2ZpbHRlcl9jb250cm9sbGVyXCJcbmltcG9ydCBIb3RlbFNlYXJjaEZpbHRlckNvbnRyb2xsZXIgZnJvbSBcIi4vaG90ZWxfc2VhcmNoX2ZpbHRlcl9jb250cm9sbGVyXCJcbmltcG9ydCBCbGluZEJveENvbnRyb2xsZXIgZnJvbSBcIi4vYmxpbmRfYm94X2NvbnRyb2xsZXJcIlxuaW1wb3J0IEhvdGVsTWFwVG9nZ2xlQ29udHJvbGxlciBmcm9tIFwiLi9ob3RlbF9tYXBfdG9nZ2xlX2NvbnRyb2xsZXJcIlxuaW1wb3J0IEhvdGVsTWFwQ29udHJvbGxlciBmcm9tIFwiLi9ob3RlbF9tYXBfY29udHJvbGxlclwiXG5pbXBvcnQgU21hcnRCYWNrQ29udHJvbGxlciBmcm9tIFwiLi9zbWFydF9iYWNrX2NvbnRyb2xsZXJcIlxuaW1wb3J0IFRvdXJHcm91cFRhYnNDb250cm9sbGVyIGZyb20gXCIuL3RvdXJfZ3JvdXBfdGFic19jb250cm9sbGVyXCJcbmltcG9ydCBIb3RlbFByaWNlRmlsdGVyQ29udHJvbGxlciBmcm9tIFwiLi9ob3RlbF9wcmljZV9maWx0ZXJfY29udHJvbGxlclwiXG5pbXBvcnQgSG90ZWxHdWFyYW50ZWVDb250cm9sbGVyIGZyb20gXCIuL2hvdGVsX2d1YXJhbnRlZV9jb250cm9sbGVyXCJcbmltcG9ydCBBYnJvYWRUaWNrZXRUeXBlQ29udHJvbGxlciBmcm9tIFwiLi9hYnJvYWRfdGlja2V0X3R5cGVfY29udHJvbGxlclwiXG5pbXBvcnQgTGFuZG1hcmtGaWx0ZXJDb250cm9sbGVyIGZyb20gXCIuL2xhbmRtYXJrX2ZpbHRlcl9jb250cm9sbGVyXCJcblxuY29uc3QgYXBwbGljYXRpb24gPSBBcHBsaWNhdGlvbi5zdGFydCgpXG5cbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwidGhlbWVcIiwgVGhlbWVDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJkcm9wZG93blwiLCBEcm9wZG93bkNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInNkay1pbnRlZ3JhdGlvblwiLCBTZGtJbnRlZ3JhdGlvbkNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImNsaXBib2FyZFwiLCBDbGlwYm9hcmRDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJjaXR5LXNlbGVjdG9yXCIsIENpdHlTZWxlY3RvckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImZsaWdodC1zZWFyY2hcIiwgRmxpZ2h0U2VhcmNoQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiZmxpZ2h0LWhpc3RvcnlcIiwgRmxpZ2h0SGlzdG9yeUNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImRhdGUtcGlja2VyXCIsIERhdGVQaWNrZXJDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJib29raW5nXCIsIEJvb2tpbmdDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJjb3Vwb25cIiwgQ291cG9uQ29udHJvbGxlcilcbi8vIENvbWluZ1Nvb25Db250cm9sbGVyIHJlbW92ZWQgLSB1c2luZyB3aW5kb3cuc2hvd1RvYXN0KCkgaW5zdGVhZFxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJkZXN0aW5hdGlvblwiLCBEZXN0aW5hdGlvbkNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInJlZ2lvbi1zZWxlY3RvclwiLCBSZWdpb25TZWxlY3RvckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImhvdGVsLXNlYXJjaFwiLCBIb3RlbFNlYXJjaENvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImhvdGVsLWRldGFpbFwiLCBIb3RlbERldGFpbENvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInNlcnZpY2UtZ3JpZFwiLCBTZXJ2aWNlR3JpZENvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInBhc3Nlbmdlci1zZWxlY3RvclwiLCBQYXNzZW5nZXJTZWxlY3RvckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImNhYmluLXNlbGVjdG9yXCIsIENhYmluU2VsZWN0b3JDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJ0cmlwLXR5cGVcIiwgVHJpcFR5cGVDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJyZXR1cm4tZGF0ZS1waWNrZXJcIiwgUmV0dXJuRGF0ZVBpY2tlckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInJvdW5kLXRyaXAtc2VsZWN0b3JcIiwgUm91bmRUcmlwU2VsZWN0b3JDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJ0cmFpbi1zZWFyY2hcIiwgVHJhaW5TZWFyY2hDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJ0cmFpbi1saXN0XCIsIFRyYWluTGlzdENvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInRyYWluLWNpdHktc2VsZWN0b3JcIiwgVHJhaW5DaXR5U2VsZWN0b3JDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJpbmZpbml0ZS1zY3JvbGxcIiwgSW5maW5pdGVTY3JvbGxDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJkZWVwLXRyYXZlbFwiLCBEZWVwVHJhdmVsQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwibXVsdGktY2l0eVwiLCBNdWx0aUNpdHlDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJmbGlnaHQtZmlsdGVyXCIsIEZsaWdodEZpbHRlckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImZsaWdodC1zb3J0XCIsIEZsaWdodFNvcnRDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJmbGlnaHQtaW5mby1kaXNwbGF5XCIsIEZsaWdodEluZm9EaXNwbGF5Q29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiZGF0ZS1saW5rXCIsIERhdGVMaW5rQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiaG90ZWwtZ3Vlc3Qtc2VsZWN0b3JcIiwgSG90ZWxHdWVzdFNlbGVjdG9yQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiaG90ZWwtZGF0ZS1waWNrZXJcIiwgSG90ZWxEYXRlUGlja2VyQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwicGF5bWVudC1tb2RhbFwiLCBQYXltZW50TW9kYWxDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJwYXltZW50LWNvbmZpcm1hdGlvblwiLCBQYXltZW50Q29uZmlybWF0aW9uQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiaG90ZWwtdGFic1wiLCBIb3RlbFRhYnNDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJob3RlbC10cmF2ZWxlci1zZWxlY3RvclwiLCBIb3RlbFRyYXZlbGVyU2VsZWN0b3JDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJ0b2FzdFwiLCBUb2FzdENvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInRvYXN0LXRyaWdnZXJcIiwgVG9hc3RUcmlnZ2VyQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiaG90ZWwtYm9va2luZ1wiLCBIb3RlbEJvb2tpbmdDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJ0b3VyLWRldGFpbFwiLCBUb3VyRGV0YWlsQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiY2Fyb3VzZWxcIiwgQ2Fyb3VzZWxDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJzY3JvbGwtc3B5XCIsIFNjcm9sbFNweUNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInBhY2thZ2Utc3dpdGNoZXJcIiwgUGFja2FnZVN3aXRjaGVyQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiYm9va2luZy1tb2RhbFwiLCBCb29raW5nTW9kYWxDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJib3R0b20tYmFyXCIsIEJvdHRvbUJhckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImluc3VyYW5jZS1zZWxlY3RvclwiLCBJbnN1cmFuY2VTZWxlY3RvckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInRvdXItdHJhdmVsZXItc2VsZWN0b3JcIiwgVG91clRyYXZlbGVyU2VsZWN0b3JDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJzcGVjaWFsLWZsaWdodHMtZm9ybVwiLCBTcGVjaWFsRmxpZ2h0c0Zvcm1Db250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJ0cmFpbi1ib29raW5nXCIsIFRyYWluQm9va2luZ0NvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInRyYWluLWJvb2tpbmctbG9ja1wiLCBUcmFpbkJvb2tpbmdMb2NrQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwidHJhaW4tc2VhdC1zZWxlY3RvclwiLCBUcmFpblNlYXRTZWxlY3RvckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInRvdXItZ3JvdXAtZmlsdGVyXCIsIFRvdXJHcm91cEZpbHRlckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImNhci1yZW50YWwtdGFic1wiLCBDYXJSZW50YWxUYWJzQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiaG90ZWwtcGFja2FnZS1zZWFyY2hcIiwgSG90ZWxQYWNrYWdlU2VhcmNoQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiaG90ZWwtcGFja2FnZS1vcmRlclwiLCBIb3RlbFBhY2thZ2VPcmRlckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInB3YS1pbnN0YWxsXCIsIFB3YUluc3RhbGxDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJidXMtZGF0ZS1waWNrZXJcIiwgQnVzRGF0ZVBpY2tlckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImJ1cy10aWNrZXQtc2VhcmNoXCIsIEJ1c1RpY2tldFNlYXJjaENvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImJ1cy10aWNrZXQtb3JkZXJcIiwgQnVzVGlja2V0T3JkZXJDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJkZWVwLWJvb2tpbmdcIiwgRGVlcEJvb2tpbmdDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJ2aXNhLW9yZGVyXCIsIFZpc2FPcmRlckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImFicm9hZC1yZWdpb24tc2VsZWN0b3JcIiwgQWJyb2FkUmVnaW9uU2VsZWN0b3JDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJhYnJvYWQtZGF0ZS1waWNrZXJcIiwgQWJyb2FkRGF0ZVBpY2tlckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImFicm9hZC1wYXNzZW5nZXItc2VsZWN0b3JcIiwgQWJyb2FkUGFzc2VuZ2VyU2VsZWN0b3JDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJhYnJvYWQtb3JkZXItZm9ybVwiLCBBYnJvYWRPcmRlckZvcm1Db250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJhYnJvYWQtdGlja2V0LXNlYXJjaFwiLCBBYnJvYWRUaWNrZXRTZWFyY2hDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJob21lc3RheS1zZWFyY2hcIiwgSG9tZXN0YXlTZWFyY2hDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJpbnRlcm5ldC1zZXJ2aWNlc1wiLCBJbnRlcm5ldFNlcnZpY2VzQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwic2ltLWNhcmQtZmlsdGVyXCIsIFNpbUNhcmRGaWx0ZXJDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJkYXRhLXBsYW5cIiwgRGF0YVBsYW5Db250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJ3aWZpLWJvb2tpbmdcIiwgV2lmaUJvb2tpbmdDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJpbnRlcm5ldC1vcmRlci1mb3JtXCIsIEludGVybmV0T3JkZXJGb3JtQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwicHJvZHVjdC1jYXJkXCIsIFByb2R1Y3RDYXJkQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwic2ltLWNhcmQtYm9va2luZ1wiLCBTaW1DYXJkQm9va2luZ0NvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInFyY29kZS1tb2RhbFwiLCBRcmNvZGVNb2RhbENvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImxvY2F0aW9uLXNlbGVjdG9yXCIsIExvY2F0aW9uU2VsZWN0b3JDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJ0cmFuc2Zlci1zZWFyY2hcIiwgVHJhbnNmZXJTZWFyY2hDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJhZGRyZXNzLXNlbGVjdG9yXCIsIEFkZHJlc3NTZWxlY3RvckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInNlYXJjaFwiLCBTZWFyY2hDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJob3RlbC1maWx0ZXItcGVyc2lzdGVuY2VcIiwgSG90ZWxGaWx0ZXJQZXJzaXN0ZW5jZUNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImhvdGVsLXNlcnZpY2VzLXNlYXJjaFwiLCBIb3RlbFNlcnZpY2VzU2VhcmNoQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwibGl2ZS1yb29tXCIsIExpdmVSb29tQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwic3BlY2lhbC1ob3RlbC1zZWFyY2hcIiwgU3BlY2lhbEhvdGVsU2VhcmNoQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwic3BlY2lhbC1ob3RlbC1maWx0ZXJcIiwgU3BlY2lhbEhvdGVsRmlsdGVyQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiaG90ZWwtc2VhcmNoLWZpbHRlclwiLCBIb3RlbFNlYXJjaEZpbHRlckNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImJsaW5kLWJveFwiLCBCbGluZEJveENvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImhvdGVsLW1hcC10b2dnbGVcIiwgSG90ZWxNYXBUb2dnbGVDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJob3RlbC1tYXBcIiwgSG90ZWxNYXBDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJzbWFydC1iYWNrXCIsIFNtYXJ0QmFja0NvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcInRvdXItZ3JvdXAtdGFic1wiLCBUb3VyR3JvdXBUYWJzQ29udHJvbGxlcilcbmFwcGxpY2F0aW9uLnJlZ2lzdGVyKFwiaG90ZWwtcHJpY2UtZmlsdGVyXCIsIEhvdGVsUHJpY2VGaWx0ZXJDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJob3RlbC1ndWFyYW50ZWVcIiwgSG90ZWxHdWFyYW50ZWVDb250cm9sbGVyKVxuYXBwbGljYXRpb24ucmVnaXN0ZXIoXCJhYnJvYWQtdGlja2V0LXR5cGVcIiwgQWJyb2FkVGlja2V0VHlwZUNvbnRyb2xsZXIpXG5hcHBsaWNhdGlvbi5yZWdpc3RlcihcImxhbmRtYXJrLWZpbHRlclwiLCBMYW5kbWFya0ZpbHRlckNvbnRyb2xsZXIpXG5cbndpbmRvdy5TdGltdWx1cyA9IGFwcGxpY2F0aW9uXG4iLCAiLy8gU2ltcGxlIENsaXBib2FyZCBVdGlsaXR5XG4vLyBDb3B5IHRvIGNsaXBib2FyZCB3aXRoIGZhbGxiYWNrIHN1cHBvcnQgZm9yIGlmcmFtZSBhbmQgb2xkZXIgYnJvd3NlcnNcblxuZnVuY3Rpb24gY29weVRvQ2xpcGJvYXJkKHRleHQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICByZXR1cm4gbmV3IFByb21pc2U8Ym9vbGVhbj4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIC8vIFRyeSBtb2Rlcm4gQ2xpcGJvYXJkIEFQSSBmaXJzdFxuICAgIGlmIChuYXZpZ2F0b3IuY2xpcGJvYXJkICYmIHdpbmRvdy5pc1NlY3VyZUNvbnRleHQpIHtcbiAgICAgIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHRleHQpXG4gICAgICAgIC50aGVuKCgpID0+IHJlc29sdmUodHJ1ZSkpXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgaWYgKGZhbGxiYWNrQ29weSh0ZXh0KSkge1xuICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignQ29weSBmYWlsZWQnKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGZhbGxiYWNrQ29weSh0ZXh0KSkge1xuICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignQ29weSBmYWlsZWQnKSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gZmFsbGJhY2tDb3B5KHRleHQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCB0ZXh0QXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XG4gIHRleHRBcmVhLnZhbHVlID0gdGV4dDtcbiAgdGV4dEFyZWEuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xuICB0ZXh0QXJlYS5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRleHRBcmVhKTtcbiAgdGV4dEFyZWEuc2VsZWN0KCk7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBzdWNjZXNzID0gZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKTtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRleHRBcmVhKTtcbiAgICByZXR1cm4gc3VjY2VzcztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRleHRBcmVhKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLy8gRXhwb3J0IGdsb2JhbGx5XG53aW5kb3cuY29weVRvQ2xpcGJvYXJkID0gY29weVRvQ2xpcGJvYXJkO1xuIiwgIi8vIFNESyBVdGlsaXR5IGZvciBjaGF0Ym94IGludGVncmF0aW9uXG4vLyBIYW5kbGVzIGNoYXRib3ggU0RLIGRldGVjdGlvbiBhbmQgbWVzc2FnZSBzZW5kaW5nXG5cbmNsYXNzIFNES1V0aWxzIHtcbiAgcHJpdmF0ZSBpc0F2YWlsYWJsZTogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmlzQXZhaWxhYmxlID0gdGhpcy5jaGVja1NES0F2YWlsYWJpbGl0eSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIFNESyBpcyBhdmFpbGFibGUgaW4gY3VycmVudCBjb250ZXh0XG4gICAqL1xuICBjaGVja1NES0F2YWlsYWJpbGl0eSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdHlwZW9mIHdpbmRvdy5zZGsgIT09ICd1bmRlZmluZWQnICYmIFxuICAgICAgICAgICB3aW5kb3cuc2RrICYmIFxuICAgICAgICAgICB0eXBlb2Ygd2luZG93LnNkay5zZW5kID09PSAnZnVuY3Rpb24nO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmQgbWVzc2FnZSB0byBjaGF0Ym94IGlmIFNESyBpcyBhdmFpbGFibGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgLSBNZXNzYWdlIHRvIHNlbmRcbiAgICogQHJldHVybnMge2Jvb2xlYW59IC0gV2hldGhlciBtZXNzYWdlIHdhcyBzZW50IHN1Y2Nlc3NmdWxseVxuICAgKi9cbiAgc2VuZE1lc3NhZ2UobWVzc2FnZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMuaXNBdmFpbGFibGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHdpbmRvdy5zZGshLnNlbmQobWVzc2FnZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNZXNzYWdlIHNlbnQgdG8gY2hhdGJveDonLCBtZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2VuZCBtZXNzYWdlIHRvIFNESzonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coJ1NESyBub3QgYXZhaWxhYmxlLiBXb3VsZCBzZW5kIG1lc3NhZ2U6JywgbWVzc2FnZSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNlbmQgZXJyb3IgZGV0YWlscyB0byBjaGF0Ym94IGZvciBmaXhpbmdcbiAgICogQHBhcmFtIHtPYmplY3R9IGVycm9ySW5mbyAtIEVycm9yIGluZm9ybWF0aW9uIG9iamVjdFxuICAgKi9cbiAgc2VuZEVycm9yRm9yRml4KGVycm9ySW5mbzogYW55ID0ge30pOiBib29sZWFuIHtcbiAgICBjb25zdCB7XG4gICAgICB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZixcbiAgICAgIHBhdGggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuc3Vic3RyaW5nKDEpLFxuICAgICAgZXJyb3JNZXNzYWdlID0gJ1Vua25vd24gZXJyb3InLFxuICAgICAgYWRkaXRpb25hbENvbnRleHQgPSAnJ1xuICAgIH0gPSBlcnJvckluZm87XG5cbiAgICBjb25zdCBtZXNzYWdlID0gYEZpeCB0aGlzIGVycm9yOlxuVVJMOiAke3VybH1cbkVycm9yOiAke2Vycm9yTWVzc2FnZX1cblBhdGg6ICR7cGF0aH0ke2FkZGl0aW9uYWxDb250ZXh0ID8gYFxcblxcbkFkZGl0aW9uYWwgQ29udGV4dDpcXG4keyAgYWRkaXRpb25hbENvbnRleHR9YCA6ICcnfVxuXG5QbGVhc2UgaGVscCBtZSBmaXggdGhpcyBpc3N1ZS5gO1xuXG4gICAgcmV0dXJuIHRoaXMuc2VuZE1lc3NhZ2UobWVzc2FnZSk7XG4gIH1cblxuICAvKipcbiAgICogUmVmcmVzaCBTREsgYXZhaWxhYmlsaXR5IHN0YXR1c1xuICAgKi9cbiAgcmVmcmVzaCgpOiBib29sZWFuIHtcbiAgICB0aGlzLmlzQXZhaWxhYmxlID0gdGhpcy5jaGVja1NES0F2YWlsYWJpbGl0eSgpO1xuICAgIHJldHVybiB0aGlzLmlzQXZhaWxhYmxlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IFNESyBzdGF0dXNcbiAgICovXG4gIGdldFN0YXR1cygpOiB7IGlzQXZhaWxhYmxlOiBib29sZWFuOyBoYXNTREs6IGJvb2xlYW47IGhhc1NlbmRNZXRob2Q6IGJvb2xlYW4gfSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzQXZhaWxhYmxlOiB0aGlzLmlzQXZhaWxhYmxlLFxuICAgICAgaGFzU0RLOiB0eXBlb2Ygd2luZG93LnNkayAhPT0gJ3VuZGVmaW5lZCcsXG4gICAgICBoYXNTZW5kTWV0aG9kOiB0eXBlb2Ygd2luZG93LnNkaz8uc2VuZCA9PT0gJ2Z1bmN0aW9uJ1xuICAgIH07XG4gIH1cbn1cblxuLy8gQ3JlYXRlIHNpbmdsZXRvbiBpbnN0YW5jZVxuY29uc3Qgc2RrVXRpbHMgPSBuZXcgU0RLVXRpbHMoKTtcblxuLy8gR2xvYmFsIGZ1bmN0aW9uIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG53aW5kb3cuc2VuZFRvU0RLID0gKG1lc3NhZ2UpID0+IHNka1V0aWxzLnNlbmRNZXNzYWdlKG1lc3NhZ2UpO1xud2luZG93LnNlbmRFcnJvclRvU0RLID0gKGVycm9ySW5mbykgPT4gc2RrVXRpbHMuc2VuZEVycm9yRm9yRml4KGVycm9ySW5mbyk7XG53aW5kb3cuaXNTREtBdmFpbGFibGUgPSAoKSA9PiBzZGtVdGlscy5nZXRTdGF0dXMoKS5pc0F2YWlsYWJsZTtcblxuLy8gRXhwb3J0IGdsb2JhbGx5XG53aW5kb3cuc2RrVXRpbHMgPSBzZGtVdGlscztcblxuZXhwb3J0IGRlZmF1bHQgc2RrVXRpbHM7XG4iLCAiLy8gU3RpbXVsdXMgQ29udHJvbGxlciBWYWxpZGF0b3Jcbi8vIENoZWNrcyBmb3IgbWlzc2luZyBzdGltdWx1cyBjb250cm9sbGVycyByZWZlcmVuY2VkIGluIHZpZXdzXG5cbmNsYXNzIFN0aW11bHVzVmFsaWRhdG9yIHtcbiAgcHJpdmF0ZSByZWdpc3RlcmVkQ29udHJvbGxlcnM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuICBwcml2YXRlIG1pc3NpbmdDb250cm9sbGVyczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7XG4gIHByaXZhdGUgaGFzUmVwb3J0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBlbGVtZW50SXNzdWVzOiBNYXA8c3RyaW5nLCBzdHJpbmdbXT4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgc3RpbXVsdXMgPSB3aW5kb3cuU3RpbXVsdXM7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5pbml0VmFsaWRhdG9yKCk7XG4gIH1cblxuICBwcml2YXRlIGluaXRWYWxpZGF0b3IoKTogdm9pZCB7XG4gICAgLy8gT25seSBydW4gaW4gZGV2ZWxvcG1lbnQgZW52aXJvbm1lbnRcbiAgICAvL1xuICAgIGlmICghdGhpcy5pc0RldmVsb3BtZW50KCkpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdTdGltdWx1c1ZhbGlkYXRvciBub3QgZW5hYmxlIGluIG5vbi1kZXZlbG9wIGVudmlyb25tZW50LicpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoIXdpbmRvdy5TdGltdWx1cykge1xuICAgICAgY29uc29sZS5sb2coJ1N0aW11bHVzVmFsaWRhdG9yIG5vdCBlbmFibGUgd2hpbGUgU3RpbXVsdXMgbm90IGZvdW5kJylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMuc2V0dXBTdGltdWx1c0Vycm9ySGFuZGxlcigpO1xuICAgIHRoaXMuY29sbGVjdFJlZ2lzdGVyZWRDb250cm9sbGVycygpO1xuICAgIHRoaXMudmFsaWRhdGVPbkRPTVJlYWR5KCk7XG4gICAgdGhpcy5pbnRlcmNlcHRBY3Rpb25DbGlja3MoKTtcbiAgfVxuXG4gIHByaXZhdGUgaXNEZXZlbG9wbWVudCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISF3aW5kb3cuZXJyb3JIYW5kbGVyXG4gIH1cblxuICBwcml2YXRlIHNldHVwU3RpbXVsdXNFcnJvckhhbmRsZXIoKTogdm9pZCB7XG4gICAgLy8gU2V0dXAgU3RpbXVsdXMgYXBwbGljYXRpb24gZXJyb3IgaGFuZGxpbmcgdXNpbmcgYXBwbGljYXRpb24uaGFuZGxlRXJyb3JcbiAgICBjb25zdCBzZXR1cEhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICBjb25zdCBzdGltdWx1cyA9IHdpbmRvdy5TdGltdWx1cyBhcyBhbnk7XG4gICAgICBpZiAoc3RpbXVsdXMgJiYgdHlwZW9mIHN0aW11bHVzLmhhbmRsZUVycm9yID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzdGltdWx1cy5oYW5kbGVFcnJvciA9IChlcnJvcjogRXJyb3IsIG1lc3NhZ2U6IHN0cmluZywgZGV0YWlsOiBhbnkpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdTdGltdWx1cyBFcnJvcjonLCB7IGVycm9yLCBtZXNzYWdlLCBkZXRhaWwgfSk7XG5cbiAgICAgICAgICAvLyBVc2UgdGhlIGdsb2JhbCBlcnJvciBoYW5kbGVyIHRvIGNhcHR1cmUgU3RpbXVsdXMgZXJyb3JzXG4gICAgICAgICAgaWYgKHdpbmRvdy5lcnJvckhhbmRsZXIpIHtcbiAgICAgICAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSBtZXNzYWdlIHx8IGVycm9yLm1lc3NhZ2UgfHwgJ1N0aW11bHVzIGVycm9yIG9jY3VycmVkJztcbiAgICAgICAgICAgIGxldCBjb250cm9sbGVyTmFtZSA9ICcnO1xuICAgICAgICAgICAgbGV0IGFjdGlvbiA9ICcnO1xuICAgICAgICAgICAgbGV0IHN1YlR5cGU6ICdtaXNzaW5nLWNvbnRyb2xsZXInIHwgJ3Njb3BlLWVycm9yJyB8ICdwb3NpdGlvbmluZy1pc3N1ZXMnIHwgJ2FjdGlvbi1jbGljaycgfCAnbWlzc2luZy10YXJnZXQnIHwgJ21pc3NpbmctYWN0aW9uJyB8ICdtZXRob2Qtbm90LWZvdW5kJyA9ICdzY29wZS1lcnJvcic7XG4gICAgICAgICAgICBsZXQgc3VnZ2VzdGlvbiA9ICcnO1xuICAgICAgICAgICAgbGV0IGVsZW1lbnRJbmZvID0gbnVsbDtcblxuICAgICAgICAgICAgLy8gRXh0cmFjdCBjb250cm9sbGVyIGFuZCBhY3Rpb24gaW5mb3JtYXRpb24gZnJvbSBkZXRhaWwgb3IgZXJyb3IgY29udGV4dFxuICAgICAgICAgICAgaWYgKGRldGFpbCkge1xuICAgICAgICAgICAgICBpZiAoZGV0YWlsLmlkZW50aWZpZXIpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyTmFtZSA9IGRldGFpbC5pZGVudGlmaWVyO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChkZXRhaWwuYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgYWN0aW9uID0gZGV0YWlsLmFjdGlvbjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoZGV0YWlsLmVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50SW5mbyA9IHtcbiAgICAgICAgICAgICAgICAgIHRhZ05hbWU6IGRldGFpbC5lbGVtZW50LnRhZ05hbWUsXG4gICAgICAgICAgICAgICAgICBpZDogZGV0YWlsLmVsZW1lbnQuaWQsXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGRldGFpbC5lbGVtZW50LmNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICAgIG91dGVySFRNTDogYCR7ZGV0YWlsLmVsZW1lbnQub3V0ZXJIVE1MPy5zdWJzdHJpbmcoMCwgMjAwKSAgfS4uLmBcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFuYWx5emUgZXJyb3IgdHlwZSBhbmQgcHJvdmlkZSBzcGVjaWZpYyBzdWdnZXN0aW9uc1xuICAgICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0NvbnRyb2xsZXInKSAmJiBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdpcyBub3QgZGVmaW5lZCcpKSB7XG4gICAgICAgICAgICAgIHN1YlR5cGUgPSAnbWlzc2luZy1jb250cm9sbGVyJztcbiAgICAgICAgICAgICAgY29uc3QgY29udHJvbGxlck1hdGNoID0gZXJyb3IubWVzc2FnZS5tYXRjaCgvKFxcdyspQ29udHJvbGxlciBpcyBub3QgZGVmaW5lZC8pO1xuICAgICAgICAgICAgICBpZiAoY29udHJvbGxlck1hdGNoKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlck5hbWUgPSBjb250cm9sbGVyTWF0Y2hbMV0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBgU3RpbXVsdXMgY29udHJvbGxlciBcIiR7Y29udHJvbGxlck5hbWV9XCIgaXMgbm90IGRlZmluZWQgb3Igbm90IHJlZ2lzdGVyZWRgO1xuICAgICAgICAgICAgICAgIHN1Z2dlc3Rpb24gPSBgTWFrZSBzdXJlIHRvIGltcG9ydCBhbmQgcmVnaXN0ZXIgdGhlIFwiJHtjb250cm9sbGVyTmFtZX1cIiBjb250cm9sbGVyIGluIGFwcC9qYXZhc2NyaXB0L2NvbnRyb2xsZXJzL2luZGV4LnRzLiBgICtcbiAgICAgICAgICAgICAgICAgIGBDaGVjayBpZiB0aGUgY29udHJvbGxlciBmaWxlIGV4aXN0cyBhdCBhcHAvamF2YXNjcmlwdC9jb250cm9sbGVycy8ke2NvbnRyb2xsZXJOYW1lfV9jb250cm9sbGVyLnRzYDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdNaXNzaW5nIHRhcmdldCBlbGVtZW50JykpIHtcbiAgICAgICAgICAgICAgc3ViVHlwZSA9ICdtaXNzaW5nLXRhcmdldCc7XG4gICAgICAgICAgICAgIHN1Z2dlc3Rpb24gPSAnQ2hlY2sgdGhhdCB0aGUgdGFyZ2V0IGVsZW1lbnQgZXhpc3RzIGluIHRoZSBET00gYW5kIGhhcyB0aGUgY29ycmVjdCBkYXRhLVtjb250cm9sbGVyXS10YXJnZXQgYXR0cmlidXRlJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnTWlzc2luZyBhY3Rpb24nKSkge1xuICAgICAgICAgICAgICBzdWJUeXBlID0gJ21pc3NpbmctYWN0aW9uJztcbiAgICAgICAgICAgICAgc3VnZ2VzdGlvbiA9ICdWZXJpZnkgdGhhdCB0aGUgYWN0aW9uIG1ldGhvZCBleGlzdHMgaW4gdGhlIGNvbnRyb2xsZXIgY2xhc3MgYW5kIGlzIHByb3Blcmx5IGRlZmluZWQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlICYmIG1lc3NhZ2UuaW5jbHVkZXMoJ2NsaWNrJykpIHtcbiAgICAgICAgICAgICAgc3ViVHlwZSA9ICdhY3Rpb24tY2xpY2snO1xuICAgICAgICAgICAgICBzdWdnZXN0aW9uID0gJ0NoZWNrIGlmIHRoZSBjbGljayBhY3Rpb24gaGFuZGxlciBleGlzdHMgYW5kIHRoZSBlbGVtZW50IGhhcyB0aGUgY29ycmVjdCBkYXRhLWFjdGlvbiBhdHRyaWJ1dGUnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBSZXBvcnQgdGhlIGVycm9yIHRvIHRoZSBlcnJvciBoYW5kbGVyXG4gICAgICAgICAgICB3aW5kb3cuZXJyb3JIYW5kbGVyLmhhbmRsZUVycm9yKHtcbiAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgICB0eXBlOiAnc3RpbXVsdXMnLFxuICAgICAgICAgICAgICBzdWJUeXBlOiBzdWJUeXBlLFxuICAgICAgICAgICAgICBjb250cm9sbGVyTmFtZTogY29udHJvbGxlck5hbWUsXG4gICAgICAgICAgICAgIGFjdGlvbjogYWN0aW9uLFxuICAgICAgICAgICAgICBzdWdnZXN0aW9uOiBzdWdnZXN0aW9uLFxuICAgICAgICAgICAgICBlbGVtZW50SW5mbzogZWxlbWVudEluZm8sXG4gICAgICAgICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICAgICAgICBvcmlnaW5hbE1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6IGVycm9yLm5hbWUsXG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgc3RhY2s6IGVycm9yLnN0YWNrXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZXRhaWw6IGRldGFpbFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgZmlsZW5hbWU6ICdzdGltdWx1cy1hcHBsaWNhdGlvbicsXG4gICAgICAgICAgICAgIGVycm9yOiBlcnJvclxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdTdGltdWx1cyBlcnJvciBoYW5kbGluZyBjb25maWd1cmVkIHZpYSBzdGltdWx1c192YWxpZGF0b3InKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gVHJ5IHRvIHNldHVwIGltbWVkaWF0ZWx5IGlmIFN0aW11bHVzIGlzIGFscmVhZHkgYXZhaWxhYmxlXG4gICAgaWYgKHdpbmRvdy5TdGltdWx1cykge1xuICAgICAgc2V0dXBIYW5kbGVyKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFdhaXQgZm9yIFN0aW11bHVzIHRvIGJlIGF2YWlsYWJsZVxuICAgICAgY29uc3QgY2hlY2tTdGltdWx1cyA9ICgpID0+IHtcbiAgICAgICAgaWYgKHdpbmRvdy5TdGltdWx1cykge1xuICAgICAgICAgIHNldHVwSGFuZGxlcigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldFRpbWVvdXQoY2hlY2tTdGltdWx1cywgMTAwKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGNoZWNrU3RpbXVsdXMoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNvbGxlY3RSZWdpc3RlcmVkQ29udHJvbGxlcnMoKTogdm9pZCB7XG4gICAgLy8gR2V0IHJlZ2lzdGVyZWQgY29udHJvbGxlcnMgZnJvbSBTdGltdWx1cyBhcHBsaWNhdGlvblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdGltdWx1cyA9IHdpbmRvdy5TdGltdWx1cyBhcyBhbnk7XG4gICAgICBpZiAoc3RpbXVsdXM/LnJvdXRlcj8ubW9kdWxlc0J5SWRlbnRpZmllcikge1xuICAgICAgICBjb25zdCBtb2R1bGVzID0gc3RpbXVsdXMucm91dGVyLm1vZHVsZXNCeUlkZW50aWZpZXI7XG4gICAgICAgIGZvciAoY29uc3QgW2lkZW50aWZpZXJdIG9mIG1vZHVsZXMpIHtcbiAgICAgICAgICB0aGlzLnJlZ2lzdGVyZWRDb250cm9sbGVycy5hZGQoaWRlbnRpZmllcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCdDb3VsZCBub3QgYWNjZXNzIFN0aW11bHVzIGNvbnRyb2xsZXJzOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHZhbGlkYXRlT25ET01SZWFkeSgpOiB2b2lkIHtcbiAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2xvYWRpbmcnKSB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4gdGhpcy52YWxpZGF0ZUNvbnRyb2xsZXJzKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnZhbGlkYXRlQ29udHJvbGxlcnMoKTtcbiAgICB9XG5cbiAgICAvLyBBbHNvIHZhbGlkYXRlIHdoZW4gbmV3IGNvbnRlbnQgaXMgYWRkZWQgZHluYW1pY2FsbHlcbiAgICB0aGlzLm9ic2VydmVOZXdDb250ZW50KCk7XG4gIH1cblxuICBwcml2YXRlIHZhbGlkYXRlQ29udHJvbGxlcnMoKTogdm9pZCB7XG4gICAgY29uc3QgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1jb250cm9sbGVyXScpO1xuXG4gICAgZWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgIGNvbnN0IGNvbnRyb2xsZXJzID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29udHJvbGxlcicpPy5zcGxpdCgnICcpIHx8IFtdO1xuXG4gICAgICBjb250cm9sbGVycy5mb3JFYWNoKGNvbnRyb2xsZXIgPT4ge1xuICAgICAgICBjb25zdCB0cmltbWVkQ29udHJvbGxlciA9IGNvbnRyb2xsZXIudHJpbSgpO1xuICAgICAgICBpZiAodHJpbW1lZENvbnRyb2xsZXIgJiYgIXRoaXMucmVnaXN0ZXJlZENvbnRyb2xsZXJzLmhhcyh0cmltbWVkQ29udHJvbGxlcikpIHtcbiAgICAgICAgICB0aGlzLm1pc3NpbmdDb250cm9sbGVycy5hZGQodHJpbW1lZENvbnRyb2xsZXIpO1xuICAgICAgICB9IGVsc2UgaWYgKHRyaW1tZWRDb250cm9sbGVyICYmIHRoaXMucmVnaXN0ZXJlZENvbnRyb2xsZXJzLmhhcyh0cmltbWVkQ29udHJvbGxlcikpIHtcbiAgICAgICAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCB0YXJnZXRzIGZvciByZWdpc3RlcmVkIGNvbnRyb2xsZXJzXG4gICAgICAgICAgdGhpcy52YWxpZGF0ZVJlcXVpcmVkVGFyZ2V0cyhlbGVtZW50LCB0cmltbWVkQ29udHJvbGxlcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBWYWxpZGF0ZSBlbGVtZW50IHBvc2l0aW9uaW5nIGlzc3Vlc1xuICAgICAgdGhpcy52YWxpZGF0ZUVsZW1lbnRQb3NpdGlvbmluZyhlbGVtZW50KTtcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLm1pc3NpbmdDb250cm9sbGVycy5zaXplID4gMCkge1xuICAgICAgdGhpcy5yZXBvcnRNaXNzaW5nQ29udHJvbGxlcnMoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5lbGVtZW50SXNzdWVzLnNpemUgPiAwKSB7XG4gICAgICB0aGlzLnJlcG9ydEVsZW1lbnRJc3N1ZXMoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIG9ic2VydmVOZXdDb250ZW50KCk6IHZvaWQge1xuICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIobXV0YXRpb25zID0+IHtcbiAgICAgIGxldCBoYXNOZXdFbGVtZW50cyA9IGZhbHNlO1xuXG4gICAgICBtdXRhdGlvbnMuZm9yRWFjaChtdXRhdGlvbiA9PiB7XG4gICAgICAgIGlmIChtdXRhdGlvbi50eXBlID09PSAnY2hpbGRMaXN0JyAmJiBtdXRhdGlvbi5hZGRlZE5vZGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAvLyBJZ25vcmUgZXJyb3IgaGFuZGxlciBVSSBjaGFuZ2VzIHRvIHByZXZlbnQgaW5maW5pdGUgbG9vcHNcbiAgICAgICAgICBjb25zdCBoYXNSZWxldmFudENoYW5nZXMgPSBBcnJheS5mcm9tKG11dGF0aW9uLmFkZGVkTm9kZXMpLnNvbWUobm9kZSA9PiB7XG4gICAgICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUpIHtcbiAgICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IG5vZGUgYXMgRWxlbWVudDtcbiAgICAgICAgICAgICAgLy8gU2tpcCBlcnJvciBoYW5kbGVyIGVsZW1lbnRzXG4gICAgICAgICAgICAgIGlmIChlbGVtZW50LmlkID09PSAnanMtZXJyb3Itc3RhdHVzLWJhcicgfHxcbiAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xvc2VzdCgnI2pzLWVycm9yLXN0YXR1cy1iYXInKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvLyBPbmx5IGNhcmUgYWJvdXQgZWxlbWVudHMgd2l0aCBkYXRhLWNvbnRyb2xsZXIgYXR0cmlidXRlc1xuICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2RhdGEtY29udHJvbGxlcicpIHx8XG4gICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNvbnRyb2xsZXJdJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAoaGFzUmVsZXZhbnRDaGFuZ2VzKSB7XG4gICAgICAgICAgICBoYXNOZXdFbGVtZW50cyA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKGhhc05ld0VsZW1lbnRzKSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy52YWxpZGF0ZUNvbnRyb2xsZXJzKCksIDEwMCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcbiAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgIHN1YnRyZWU6IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVwb3J0TWlzc2luZ0NvbnRyb2xsZXJzKCk6IHZvaWQge1xuICAgIC8vIFByZXZlbnQgZHVwbGljYXRlIHJlcG9ydHNcbiAgICBpZiAodGhpcy5oYXNSZXBvcnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG1pc3NpbmdMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLm1pc3NpbmdDb250cm9sbGVycyk7XG4gICAgdGhpcy5oYXNSZXBvcnRlZCA9IHRydWU7XG5cbiAgICAvLyBSZXBvcnQgdG8gZXJyb3IgaGFuZGxlciBpZiBhdmFpbGFibGVcbiAgICBpZiAod2luZG93LmVycm9ySGFuZGxlcikge1xuICAgICAgd2luZG93LmVycm9ySGFuZGxlci5oYW5kbGVFcnJvcih7XG4gICAgICAgIG1lc3NhZ2U6IGBNaXNzaW5nIFN0aW11bHVzIGNvbnRyb2xsZXJzOiAke21pc3NpbmdMaXN0LmpvaW4oJywgJyl9YCxcbiAgICAgICAgdHlwZTogJ3N0aW11bHVzJyxcbiAgICAgICAgc3ViVHlwZTogJ21pc3NpbmctY29udHJvbGxlcicsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBtaXNzaW5nQ29udHJvbGxlcnM6IG1pc3NpbmdMaXN0LFxuICAgICAgICBzdWdnZXN0aW9uOiBgUnVuOiByYWlscyBnZW5lcmF0ZSBzdGltdWx1c19jb250cm9sbGVyICR7bWlzc2luZ0xpc3RbMF19YCxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIGNvbnRyb2xsZXJzOiBtaXNzaW5nTGlzdCxcbiAgICAgICAgICBnZW5lcmF0b3JDb21tYW5kczogbWlzc2luZ0xpc3QubWFwKG5hbWUgPT4gYHJhaWxzIGdlbmVyYXRlIHN0aW11bHVzX2NvbnRyb2xsZXIgJHtuYW1lfWApXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGYWxsYmFjayB0byBjb25zb2xlXG4gICAgICBjb25zb2xlLmVycm9yKCdcdUQ4M0RcdUREMzQgTWlzc2luZyBTdGltdWx1cyBDb250cm9sbGVyczonLCBtaXNzaW5nTGlzdCk7XG4gICAgICBjb25zb2xlLmluZm8oJ1x1RDgzRFx1RENBMSBHZW5lcmF0ZSBtaXNzaW5nIGNvbnRyb2xsZXJzOicsIG1pc3NpbmdMaXN0Lm1hcChuYW1lID0+XG4gICAgICAgIGByYWlscyBnZW5lcmF0ZSBzdGltdWx1c19jb250cm9sbGVyICR7bmFtZX1gXG4gICAgICApLmpvaW4oJ1xcbicpKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHZhbGlkYXRlUmVxdWlyZWRUYXJnZXRzKGNvbnRyb2xsZXJFbGVtZW50OiBFbGVtZW50LCBjb250cm9sbGVyTmFtZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0aW11bHVzID0gd2luZG93LlN0aW11bHVzIGFzIGFueTtcbiAgICAgIGlmIChzdGltdWx1cz8ucm91dGVyPy5tb2R1bGVzQnlJZGVudGlmaWVyKSB7XG4gICAgICAgIGNvbnN0IG1vZHVsZSA9IHN0aW11bHVzLnJvdXRlci5tb2R1bGVzQnlJZGVudGlmaWVyLmdldChjb250cm9sbGVyTmFtZSk7XG4gICAgICAgIGlmIChtb2R1bGUpIHtcbiAgICAgICAgICBjb25zdCBjb250cm9sbGVyQ2xhc3MgPSBtb2R1bGUuZGVmaW5pdGlvbi5jb250cm9sbGVyQ29uc3RydWN0b3I7XG5cbiAgICAgICAgICBjb25zdCBkZWZpbmVkVGFyZ2V0cyA9IGNvbnRyb2xsZXJDbGFzcy50YXJnZXRzIHx8IFtdO1xuICAgICAgICAgIGNvbnN0IG1pc3NpbmdUYXJnZXRzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICAgIGNvbnN0IG91dE9mU2NvcGVUYXJnZXRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAgICAgLy8gR2V0IG9wdGlvbmFsIHRhcmdldHMgYnkgY2hlY2tpbmcgZm9yIGhhc1hYWFRhcmdldCBwcm9wZXJ0aWVzXG4gICAgICAgICAgY29uc3Qgb3B0aW9uYWxUYXJnZXRzID0gdGhpcy5nZXRPcHRpb25hbFRhcmdldHMoY29udHJvbGxlckNsYXNzKTtcblxuICAgICAgICAgIGRlZmluZWRUYXJnZXRzLmZvckVhY2goKHRhcmdldE5hbWU6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgLy8gU2tpcCB2YWxpZGF0aW9uIGZvciBvcHRpb25hbCB0YXJnZXRzXG4gICAgICAgICAgICBpZiAob3B0aW9uYWxUYXJnZXRzLmhhcyh0YXJnZXROYW1lKSkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHRhcmdldFNlbGVjdG9yID0gYFtkYXRhLSR7Y29udHJvbGxlck5hbWV9LXRhcmdldD1cIiR7dGFyZ2V0TmFtZX1cIl1gO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0RWxlbWVudCA9IGNvbnRyb2xsZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0U2VsZWN0b3IpO1xuXG4gICAgICAgICAgICBpZiAoIXRhcmdldEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGFyZ2V0IGV4aXN0cyBnbG9iYWxseSBidXQgb3V0c2lkZSBjb250cm9sbGVyIHNjb3BlXG4gICAgICAgICAgICAgIGNvbnN0IGdsb2JhbFRhcmdldEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldFNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgaWYgKGdsb2JhbFRhcmdldEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBvdXRPZlNjb3BlVGFyZ2V0cy5wdXNoKHRhcmdldE5hbWUpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG1pc3NpbmdUYXJnZXRzLnB1c2godGFyZ2V0TmFtZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChtaXNzaW5nVGFyZ2V0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnJlcG9ydE1pc3NpbmdUYXJnZXRzKGNvbnRyb2xsZXJOYW1lLCBtaXNzaW5nVGFyZ2V0cywgY29udHJvbGxlckVsZW1lbnQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChvdXRPZlNjb3BlVGFyZ2V0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnJlcG9ydE91dE9mU2NvcGVUYXJnZXRzKGNvbnRyb2xsZXJOYW1lLCBvdXRPZlNjb3BlVGFyZ2V0cywgY29udHJvbGxlckVsZW1lbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCB2YWxpZGF0ZSB0YXJnZXRzIGZvciBjb250cm9sbGVyICR7Y29udHJvbGxlck5hbWV9OmAsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldE9wdGlvbmFsVGFyZ2V0cyhjb250cm9sbGVyQ2xhc3M6IGFueSk6IFNldDxzdHJpbmc+IHtcbiAgICBjb25zdCBvcHRpb25hbFRhcmdldHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgZGVmaW5lZCB0YXJnZXRzXG4gICAgICBjb25zdCBkZWZpbmVkVGFyZ2V0cyA9IGNvbnRyb2xsZXJDbGFzcy50YXJnZXRzIHx8IFtdO1xuXG4gICAgICBkZWZpbmVkVGFyZ2V0cy5mb3JFYWNoKCh0YXJnZXROYW1lOiBzdHJpbmcpID0+IHtcbiAgICAgICAgLy8gQ29udmVydCB0YXJnZXQgbmFtZSB0byBoYXNYWFhUYXJnZXQgcHJvcGVydHkgbmFtZVxuICAgICAgICBjb25zdCBjYXBpdGFsaXplZFRhcmdldCA9IHRhcmdldE5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0YXJnZXROYW1lLnNsaWNlKDEpO1xuICAgICAgICBjb25zdCBoYXNUYXJnZXRQcm9wZXJ0eSA9IGBoYXMke2NhcGl0YWxpemVkVGFyZ2V0fVRhcmdldGA7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgaGFzWFhYVGFyZ2V0IGlzIGRlY2xhcmVkIGFzIGEgcHJvcGVydHkgb24gdGhlIGNsYXNzXG4gICAgICAgIC8vIFRoaXMgaW5kaWNhdGVzIHRoZSB0YXJnZXQgaXMgb3B0aW9uYWxcbiAgICAgICAgaWYgKGhhc1RhcmdldFByb3BlcnR5IGluIGNvbnRyb2xsZXJDbGFzcy5wcm90b3R5cGUgfHxcbiAgICAgICAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoY29udHJvbGxlckNsYXNzLnByb3RvdHlwZSwgaGFzVGFyZ2V0UHJvcGVydHkpIHx8XG4gICAgICAgICAgICBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChjb250cm9sbGVyQ2xhc3MucHJvdG90eXBlLCBoYXNUYXJnZXRQcm9wZXJ0eSkpIHtcbiAgICAgICAgICBvcHRpb25hbFRhcmdldHMuYWRkKHRhcmdldE5hbWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCdDb3VsZCBub3QgYW5hbHl6ZSBjb250cm9sbGVyIGZvciBvcHRpb25hbCB0YXJnZXRzOicsIGVycm9yKTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3B0aW9uYWxUYXJnZXRzO1xuICB9XG5cbiAgcHJpdmF0ZSB2YWxpZGF0ZUVsZW1lbnRQb3NpdGlvbmluZyhjb250cm9sbGVyRWxlbWVudDogRWxlbWVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNvbnRyb2xsZXJOYW1lID0gY29udHJvbGxlckVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbnRyb2xsZXInKT8uc3BsaXQoJyAnKVswXTtcbiAgICBpZiAoIWNvbnRyb2xsZXJOYW1lKSByZXR1cm47XG5cbiAgICBjb25zdCBpc3N1ZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICB0aGlzLmNoZWNrQ29tbW9uU2VsZWN0b3JzKGNvbnRyb2xsZXJFbGVtZW50LCBjb250cm9sbGVyTmFtZSwgaXNzdWVzKTtcblxuICAgIGlmIChpc3N1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5lbGVtZW50SXNzdWVzLnNldChjb250cm9sbGVyTmFtZSwgaXNzdWVzKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNoZWNrQ29tbW9uU2VsZWN0b3JzKGVsZW1lbnQ6IEVsZW1lbnQsIGNvbnRyb2xsZXJOYW1lOiBzdHJpbmcsIGlzc3Vlczogc3RyaW5nW10pOiB2b2lkIHtcbiAgICBjb25zdCByZWxldmFudElkczogc3RyaW5nW10gPSBbXTtcblxuICAgIHJlbGV2YW50SWRzLnB1c2goYCR7Y29udHJvbGxlck5hbWV9LWlucHV0YCwgYCR7Y29udHJvbGxlck5hbWV9LWJ1dHRvbmAsIGAke2NvbnRyb2xsZXJOYW1lfS1mb3JtYCk7XG5cbiAgICByZWxldmFudElkcy5mb3JFYWNoKGlkID0+IHtcbiAgICAgIGNvbnN0IGdsb2JhbEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgICBpZiAoZ2xvYmFsRWxlbWVudCkge1xuICAgICAgICBjb25zdCBpc0luU2NvcGUgPSBnbG9iYWxFbGVtZW50ID09PSBlbGVtZW50IHx8IGVsZW1lbnQuY29udGFpbnMoZ2xvYmFsRWxlbWVudCk7XG5cbiAgICAgICAgaWYgKCFpc0luU2NvcGUpIHtcbiAgICAgICAgICBpc3N1ZXMucHVzaChgRWxlbWVudCAjJHtpZH0gZXhpc3RzIGJ1dCBvdXRzaWRlIGNvbnRyb2xsZXIgc2NvcGVgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBpbnRlcmNlcHRBY3Rpb25DbGlja3MoKTogdm9pZCB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldCBhcyBFbGVtZW50O1xuICAgICAgaWYgKCF0YXJnZXQpIHJldHVybjtcblxuICAgICAgY29uc3QgYWN0aW9uRWxlbWVudCA9IHRhcmdldC5jbG9zZXN0KCdbZGF0YS1hY3Rpb25dJyk7XG4gICAgICBpZiAoIWFjdGlvbkVsZW1lbnQpIHJldHVybjtcblxuICAgICAgY29uc3QgYWN0aW9ucyA9IGFjdGlvbkVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWFjdGlvbicpPy5zcGxpdCgnICcpIHx8IFtdO1xuXG4gICAgICBhY3Rpb25zLmZvckVhY2goYWN0aW9uID0+IHtcbiAgICAgICAgY29uc3QgY29udHJvbGxlck1hdGNoID0gYWN0aW9uLm1hdGNoKC8oW1xcdy1dKykjKFtcXHctXSspLyk7XG4gICAgICAgIGlmIChjb250cm9sbGVyTWF0Y2gpIHtcbiAgICAgICAgICBjb25zdCBjb250cm9sbGVyTmFtZSA9IGNvbnRyb2xsZXJNYXRjaFsxXTtcbiAgICAgICAgICBjb25zdCBtZXRob2ROYW1lID0gY29udHJvbGxlck1hdGNoWzJdO1xuXG4gICAgICAgICAgaWYgKCF0aGlzLnJlZ2lzdGVyZWRDb250cm9sbGVycy5oYXMoY29udHJvbGxlck5hbWUpKSB7XG4gICAgICAgICAgICB0aGlzLnJlcG9ydE1pc3NpbmdBY3Rpb25Db250cm9sbGVyKGNvbnRyb2xsZXJOYW1lLCBhY3Rpb24sIGFjdGlvbkVsZW1lbnQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGNvbnRyb2xsZXJFbGVtZW50ID0gYWN0aW9uRWxlbWVudC5jbG9zZXN0KGBbZGF0YS1jb250cm9sbGVyKj1cIiR7Y29udHJvbGxlck5hbWV9XCJdYCk7XG4gICAgICAgICAgaWYgKCFjb250cm9sbGVyRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5yZXBvcnRNaXNzaW5nQ29udHJvbGxlclNjb3BlKGNvbnRyb2xsZXJOYW1lLCBhY3Rpb24sIGFjdGlvbkVsZW1lbnQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuY2hlY2tNZXRob2RFeGlzdHMoY29udHJvbGxlck5hbWUsIG1ldGhvZE5hbWUsIGFjdGlvbiwgYWN0aW9uRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sIHRydWUpO1xuICB9XG5cbiAgcHJpdmF0ZSByZXBvcnRNaXNzaW5nVGFyZ2V0cyhjb250cm9sbGVyTmFtZTogc3RyaW5nLCBtaXNzaW5nVGFyZ2V0czogc3RyaW5nW10sIGNvbnRyb2xsZXJFbGVtZW50OiBFbGVtZW50KTogdm9pZCB7XG4gICAgaWYgKHdpbmRvdy5lcnJvckhhbmRsZXIpIHtcbiAgICAgIGNvbnN0IHRhcmdldExpc3QgPSBtaXNzaW5nVGFyZ2V0cy5qb2luKCcsICcpO1xuICAgICAgY29uc3QgdGFyZ2V0RXhhbXBsZXMgPSBtaXNzaW5nVGFyZ2V0cy5tYXAodGFyZ2V0ID0+XG4gICAgICAgIGA8ZGl2IGRhdGEtJHtjb250cm9sbGVyTmFtZX0tdGFyZ2V0PVwiJHt0YXJnZXR9XCI+Li4uPC9kaXY+YFxuICAgICAgKS5qb2luKCdcXG4nKTtcblxuICAgICAgd2luZG93LmVycm9ySGFuZGxlci5oYW5kbGVFcnJvcih7XG4gICAgICAgIG1lc3NhZ2U6IGBTdGltdWx1cyBjb250cm9sbGVyIFwiJHtjb250cm9sbGVyTmFtZX1cIiByZXF1aXJlcyBtaXNzaW5nIHRhcmdldCBlbGVtZW50czogJHt0YXJnZXRMaXN0fWAsXG4gICAgICAgIHR5cGU6ICdzdGltdWx1cycsXG4gICAgICAgIHN1YlR5cGU6ICdtaXNzaW5nLXRhcmdldCcsXG4gICAgICAgIGNvbnRyb2xsZXJOYW1lLFxuICAgICAgICBtaXNzaW5nVGFyZ2V0cyxcbiAgICAgICAgZWxlbWVudEluZm86IHRoaXMuZ2V0RWxlbWVudEluZm8oY29udHJvbGxlckVsZW1lbnQpLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgc3VnZ2VzdGlvbjogYEFkZCB0aGUgcmVxdWlyZWQgdGFyZ2V0IGVsZW1lbnRzIHRvIHRoZSBET00gd2l0aGluIHRoZSBjb250cm9sbGVyIHNjb3BlLCBvciBtYWtlIHRoZW0gb3B0aW9uYWwgYnkgYWRkaW5nIGAgK1xuICAgICAgICAgIGAnZGVjbGFyZSByZWFkb25seSBoYXMke21pc3NpbmdUYXJnZXRzLm1hcCh0ID0+IHQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0LnNsaWNlKDEpKS5qb2luKCdUYXJnZXQ6IGJvb2xlYW4sIGRlY2xhcmUgcmVhZG9ubHkgaGFzJyl9VGFyZ2V0OiBib29sZWFuJyB0byB0aGUgY29udHJvbGxlcmAsXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICBlcnJvclR5cGU6ICdNaXNzaW5nIFJlcXVpcmVkIFRhcmdldHMnLFxuICAgICAgICAgIGNvbnRyb2xsZXJOYW1lLFxuICAgICAgICAgIG1pc3NpbmdUYXJnZXRzLFxuICAgICAgICAgIHJlcXVpcmVkRWxlbWVudHM6IHRhcmdldEV4YW1wbGVzLFxuICAgICAgICAgIGVsZW1lbnRJbmZvOiB0aGlzLmdldEVsZW1lbnRJbmZvKGNvbnRyb2xsZXJFbGVtZW50KSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogYFRoZSBjb250cm9sbGVyIFwiJHtjb250cm9sbGVyTmFtZX1cIiBkZWZpbmVzIHRhcmdldHMgWyR7dGFyZ2V0TGlzdH1dIGJ1dCB0aGVzZSBlbGVtZW50cyBhcmUgbm90IGZvdW5kIGluIHRoZSBET00gd2l0aGluIHRoZSBjb250cm9sbGVyIHNjb3BlYFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlcG9ydE91dE9mU2NvcGVUYXJnZXRzKGNvbnRyb2xsZXJOYW1lOiBzdHJpbmcsIG91dE9mU2NvcGVUYXJnZXRzOiBzdHJpbmdbXSwgY29udHJvbGxlckVsZW1lbnQ6IEVsZW1lbnQpOiB2b2lkIHtcbiAgICBpZiAod2luZG93LmVycm9ySGFuZGxlcikge1xuICAgICAgY29uc3QgdGFyZ2V0TGlzdCA9IG91dE9mU2NvcGVUYXJnZXRzLmpvaW4oJywgJyk7XG5cbiAgICAgIHdpbmRvdy5lcnJvckhhbmRsZXIuaGFuZGxlRXJyb3Ioe1xuICAgICAgICBtZXNzYWdlOiBgU3RpbXVsdXMgY29udHJvbGxlciBcIiR7Y29udHJvbGxlck5hbWV9XCIgdGFyZ2V0cyBleGlzdCBidXQgYXJlIG91dHNpZGUgY29udHJvbGxlciBzY29wZTogJHt0YXJnZXRMaXN0fWAsXG4gICAgICAgIHR5cGU6ICdzdGltdWx1cycsXG4gICAgICAgIHN1YlR5cGU6ICd0YXJnZXQtc2NvcGUtZXJyb3InLFxuICAgICAgICBjb250cm9sbGVyTmFtZSxcbiAgICAgICAgb3V0T2ZTY29wZVRhcmdldHMsXG4gICAgICAgIGVsZW1lbnRJbmZvOiB0aGlzLmdldEVsZW1lbnRJbmZvKGNvbnRyb2xsZXJFbGVtZW50KSxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHN1Z2dlc3Rpb246IGBNb3ZlIHRhcmdldCBlbGVtZW50cyBpbnNpZGUgY29udHJvbGxlciBzY29wZSBvciBleHBhbmQgY29udHJvbGxlciBzY29wZSB0byBpbmNsdWRlIHRhcmdldHNgLFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgZXJyb3JUeXBlOiAnVGFyZ2V0cyBPdXRzaWRlIENvbnRyb2xsZXIgU2NvcGUnLFxuICAgICAgICAgIGNvbnRyb2xsZXJOYW1lLFxuICAgICAgICAgIG91dE9mU2NvcGVUYXJnZXRzLFxuICAgICAgICAgIGVsZW1lbnRJbmZvOiB0aGlzLmdldEVsZW1lbnRJbmZvKGNvbnRyb2xsZXJFbGVtZW50KSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogYFRoZSBjb250cm9sbGVyIFwiJHtjb250cm9sbGVyTmFtZX1cIiBkZWZpbmVzIHRhcmdldHMgWyR7dGFyZ2V0TGlzdH1dIGFuZCB0aGVzZSBlbGVtZW50cyBleGlzdCBpbiB0aGUgRE9NIGJ1dCBhcmUgb3V0c2lkZSB0aGUgY29udHJvbGxlciBzY29wZWAsXG4gICAgICAgICAgc29sdXRpb246IGBFaXRoZXIgbW92ZSB0aGUgdGFyZ2V0IGVsZW1lbnRzIGluc2lkZSB0aGUgY29udHJvbGxlciBzY29wZSwgb3IgZXhwYW5kIHRoZSBjb250cm9sbGVyIHNjb3BlIHRvIGluY2x1ZGUgYCArXG4gICAgICAgICAgICBgdGhlIHRhcmdldHMgYnkgbW92aW5nIHRoZSBkYXRhLWNvbnRyb2xsZXIgYXR0cmlidXRlIHRvIGEgcGFyZW50IGVsZW1lbnQgdGhhdCBjb250YWlucyBib3RoIHRoZSBjb250cm9sbGVyIGxvZ2ljIGFuZCB0aGUgdGFyZ2V0IGVsZW1lbnRzLmBcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZXBvcnRNaXNzaW5nQWN0aW9uQ29udHJvbGxlcihjb250cm9sbGVyTmFtZTogc3RyaW5nLCBhY3Rpb246IHN0cmluZywgZWxlbWVudDogRWxlbWVudCk6IHZvaWQge1xuICAgIGlmICh3aW5kb3cuZXJyb3JIYW5kbGVyKSB7XG4gICAgICB3aW5kb3cuZXJyb3JIYW5kbGVyLmhhbmRsZUVycm9yKHtcbiAgICAgICAgbWVzc2FnZTogYFVzZXIgY2xpY2tlZCBhY3Rpb24gXCIke2FjdGlvbn1cIiBidXQgY29udHJvbGxlciBcIiR7Y29udHJvbGxlck5hbWV9XCIgaXMgbm90IHJlZ2lzdGVyZWRgLFxuICAgICAgICB0eXBlOiAnc3RpbXVsdXMnLFxuICAgICAgICBzdWJUeXBlOiAnYWN0aW9uLWNsaWNrJyxcbiAgICAgICAgY29udHJvbGxlck5hbWUsXG4gICAgICAgIGFjdGlvbixcbiAgICAgICAgZWxlbWVudEluZm86IHRoaXMuZ2V0RWxlbWVudEluZm8oZWxlbWVudCksXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBzdWdnZXN0aW9uOiBgUnVuOiByYWlscyBnZW5lcmF0ZSBzdGltdWx1c19jb250cm9sbGVyICR7Y29udHJvbGxlck5hbWV9YCxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIGVycm9yVHlwZTogJ01pc3NpbmcgQ29udHJvbGxlciBvbiBBY3Rpb24gQ2xpY2snLFxuICAgICAgICAgIGNvbnRyb2xsZXJOYW1lLFxuICAgICAgICAgIGFjdGlvbixcbiAgICAgICAgICBlbGVtZW50SW5mbzogdGhpcy5nZXRFbGVtZW50SW5mbyhlbGVtZW50KSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1VzZXIgYXR0ZW1wdGVkIHRvIHRyaWdnZXIgYW4gYWN0aW9uIGJ1dCB0aGUgcmVxdWlyZWQgY29udHJvbGxlciBpcyBub3QgcmVnaXN0ZXJlZCdcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZXBvcnRNaXNzaW5nQ29udHJvbGxlclNjb3BlKGNvbnRyb2xsZXJOYW1lOiBzdHJpbmcsIGFjdGlvbjogc3RyaW5nLCBlbGVtZW50OiBFbGVtZW50KTogdm9pZCB7XG4gICAgaWYgKHdpbmRvdy5lcnJvckhhbmRsZXIpIHtcbiAgICAgIHdpbmRvdy5lcnJvckhhbmRsZXIuaGFuZGxlRXJyb3Ioe1xuICAgICAgICBtZXNzYWdlOiBgVXNlciBjbGlja2VkIGFjdGlvbiBcIiR7YWN0aW9ufVwiIGJ1dCBubyBcIiR7Y29udHJvbGxlck5hbWV9XCIgY29udHJvbGxlciBmb3VuZCBpbiBwYXJlbnQgc2NvcGVgLFxuICAgICAgICB0eXBlOiAnc3RpbXVsdXMnLFxuICAgICAgICBzdWJUeXBlOiAnc2NvcGUtZXJyb3InLFxuICAgICAgICBjb250cm9sbGVyTmFtZSxcbiAgICAgICAgYWN0aW9uLFxuICAgICAgICBlbGVtZW50SW5mbzogdGhpcy5nZXRFbGVtZW50SW5mbyhlbGVtZW50KSxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHN1Z2dlc3Rpb246IGBBZGQgZGF0YS1jb250cm9sbGVyPVwiJHtjb250cm9sbGVyTmFtZX1cIiB0byBhIHBhcmVudCBlbGVtZW50IG9yIG1vdmUgdGhpcyBlbGVtZW50IGluc2lkZSB0aGUgY29udHJvbGxlciBzY29wZWAsXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICBlcnJvclR5cGU6ICdDb250cm9sbGVyIFNjb3BlIE1pc3NpbmcnLFxuICAgICAgICAgIGNvbnRyb2xsZXJOYW1lLFxuICAgICAgICAgIGFjdGlvbixcbiAgICAgICAgICBlbGVtZW50SW5mbzogdGhpcy5nZXRFbGVtZW50SW5mbyhlbGVtZW50KSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0FjdGlvbiBlbGVtZW50IGlzIG5vdCB3aXRoaW4gdGhlIHNjb3BlIG9mIGl0cyB0YXJnZXQgY29udHJvbGxlcicsXG4gICAgICAgICAgc29sdXRpb246IGBXcmFwIHRoZSBlbGVtZW50IHdpdGggPGRpdiBkYXRhLWNvbnRyb2xsZXI9XCIke2NvbnRyb2xsZXJOYW1lfVwiPi4uLjwvZGl2PmBcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjaGVja01ldGhvZEV4aXN0cyhjb250cm9sbGVyTmFtZTogc3RyaW5nLCBtZXRob2ROYW1lOiBzdHJpbmcsIGFjdGlvbjogc3RyaW5nLCBlbGVtZW50OiBFbGVtZW50KTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCB0aGUgYWN0dWFsIGNvbnRyb2xsZXIgaW5zdGFuY2UgZnJvbSBTdGltdWx1c1xuICAgICAgY29uc3Qgc3RpbXVsdXMgPSB3aW5kb3cuU3RpbXVsdXMgYXMgYW55O1xuICAgICAgaWYgKHN0aW11bHVzPy5yb3V0ZXI/Lm1vZHVsZXNCeUlkZW50aWZpZXIpIHtcbiAgICAgICAgY29uc3QgbW9kdWxlID0gc3RpbXVsdXMucm91dGVyLm1vZHVsZXNCeUlkZW50aWZpZXIuZ2V0KGNvbnRyb2xsZXJOYW1lKTtcbiAgICAgICAgaWYgKG1vZHVsZSkge1xuICAgICAgICAgIGNvbnN0IGNvbnRyb2xsZXJDbGFzcyA9IG1vZHVsZS5kZWZpbml0aW9uLmNvbnRyb2xsZXJDb25zdHJ1Y3RvcjtcbiAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IG5ldyBjb250cm9sbGVyQ2xhc3MoKTtcblxuICAgICAgICAgIC8vIENoZWNrIGlmIG1ldGhvZCBleGlzdHMgYW5kIGlzIGNhbGxhYmxlXG4gICAgICAgICAgaWYgKHR5cGVvZiBpbnN0YW5jZVttZXRob2ROYW1lXSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpcy5yZXBvcnRNaXNzaW5nTWV0aG9kKGNvbnRyb2xsZXJOYW1lLCBtZXRob2ROYW1lLCBhY3Rpb24sIGVsZW1lbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgLy8gSWYgd2UgY2FuJ3QgaW5zdGFudGlhdGUgdGhlIGNvbnRyb2xsZXIsIHRyeSBhbHRlcm5hdGl2ZSBhcHByb2FjaFxuICAgICAgdGhpcy5jaGVja01ldGhvZEV4aXN0c0FsdGVybmF0aXZlKGNvbnRyb2xsZXJOYW1lLCBtZXRob2ROYW1lLCBhY3Rpb24sIGVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY2hlY2tNZXRob2RFeGlzdHNBbHRlcm5hdGl2ZShjb250cm9sbGVyTmFtZTogc3RyaW5nLCBtZXRob2ROYW1lOiBzdHJpbmcsIGFjdGlvbjogc3RyaW5nLCBlbGVtZW50OiBFbGVtZW50KTogdm9pZCB7XG4gICAgLy8gVHJ5IHRvIGdldCBjb250cm9sbGVyIGNvbnN0cnVjdG9yIGRpcmVjdGx5XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0aW11bHVzID0gd2luZG93LlN0aW11bHVzIGFzIGFueTtcbiAgICAgIGlmIChzdGltdWx1cz8ucm91dGVyPy5tb2R1bGVzQnlJZGVudGlmaWVyKSB7XG4gICAgICAgIGNvbnN0IG1vZHVsZSA9IHN0aW11bHVzLnJvdXRlci5tb2R1bGVzQnlJZGVudGlmaWVyLmdldChjb250cm9sbGVyTmFtZSk7XG4gICAgICAgIGlmIChtb2R1bGUpIHtcbiAgICAgICAgICBjb25zdCBjb250cm9sbGVyQ2xhc3MgPSBtb2R1bGUuZGVmaW5pdGlvbi5jb250cm9sbGVyQ29uc3RydWN0b3I7XG5cbiAgICAgICAgICAvLyBDaGVjayBwcm90b3R5cGUgZm9yIG1ldGhvZFxuICAgICAgICAgIGlmICghY29udHJvbGxlckNsYXNzLnByb3RvdHlwZVttZXRob2ROYW1lXSB8fCB0eXBlb2YgY29udHJvbGxlckNsYXNzLnByb3RvdHlwZVttZXRob2ROYW1lXSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpcy5yZXBvcnRNaXNzaW5nTWV0aG9kKGNvbnRyb2xsZXJOYW1lLCBtZXRob2ROYW1lLCBhY3Rpb24sIGVsZW1lbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCB2YWxpZGF0ZSBtZXRob2QgZXhpc3RlbmNlIGZvciAke2NvbnRyb2xsZXJOYW1lfSMke21ldGhvZE5hbWV9OmAsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlcG9ydE1pc3NpbmdNZXRob2QoY29udHJvbGxlck5hbWU6IHN0cmluZywgbWV0aG9kTmFtZTogc3RyaW5nLCBhY3Rpb246IHN0cmluZywgZWxlbWVudDogRWxlbWVudCk6IHZvaWQge1xuICAgIGlmICh3aW5kb3cuZXJyb3JIYW5kbGVyKSB7XG4gICAgICB3aW5kb3cuZXJyb3JIYW5kbGVyLmhhbmRsZUVycm9yKHtcbiAgICAgICAgbWVzc2FnZTogYFVzZXIgY2xpY2tlZCBhY3Rpb24gXCIke2FjdGlvbn1cIiBidXQgbWV0aG9kIFwiJHttZXRob2ROYW1lfVwiIGRvZXMgbm90IGV4aXN0IGluIGNvbnRyb2xsZXIgXCIke2NvbnRyb2xsZXJOYW1lfVwiYCxcbiAgICAgICAgdHlwZTogJ3N0aW11bHVzJyxcbiAgICAgICAgc3ViVHlwZTogJ21ldGhvZC1ub3QtZm91bmQnLFxuICAgICAgICBjb250cm9sbGVyTmFtZSxcbiAgICAgICAgbWV0aG9kTmFtZSxcbiAgICAgICAgYWN0aW9uLFxuICAgICAgICBlbGVtZW50SW5mbzogdGhpcy5nZXRFbGVtZW50SW5mbyhlbGVtZW50KSxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHN1Z2dlc3Rpb246IGBBZGQgbWV0aG9kIFwiJHttZXRob2ROYW1lfVwiIHRvIHRoZSAke2NvbnRyb2xsZXJOYW1lfSBjb250cm9sbGVyIG9yIGZpeCB0aGUgYWN0aW9uIG5hbWVgLFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgZXJyb3JUeXBlOiAnTWV0aG9kIE5vdCBGb3VuZCcsXG4gICAgICAgICAgY29udHJvbGxlck5hbWUsXG4gICAgICAgICAgbWV0aG9kTmFtZSxcbiAgICAgICAgICBhY3Rpb24sXG4gICAgICAgICAgZWxlbWVudEluZm86IHRoaXMuZ2V0RWxlbWVudEluZm8oZWxlbWVudCksXG4gICAgICAgICAgZGVzY3JpcHRpb246IGBUaGUgbWV0aG9kIFwiJHttZXRob2ROYW1lfVwiIHdhcyBjYWxsZWQgYnV0IGRvZXMgbm90IGV4aXN0IGluIHRoZSBjb250cm9sbGVyYCxcbiAgICAgICAgICBzb2x1dGlvbjogYEFkZCB0aGUgbWV0aG9kIHRvIHlvdXIgY29udHJvbGxlcjpcXG5cXG4ke21ldGhvZE5hbWV9KCk6IHZvaWQge1xcbiAgLy8gWW91ciBpbXBsZW1lbnRhdGlvbiBoZXJlXFxufWBcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZXBvcnRFbGVtZW50SXNzdWVzKCk6IHZvaWQge1xuICAgIGNvbnN0IGFsbElzc3Vlczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCBkZXRhaWxlZElzc3VlczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmdbXSB9ID0ge307XG5cbiAgICB0aGlzLmVsZW1lbnRJc3N1ZXMuZm9yRWFjaCgoaXNzdWVzLCBjb250cm9sbGVyTmFtZSkgPT4ge1xuICAgICAgYWxsSXNzdWVzLnB1c2goYCR7Y29udHJvbGxlck5hbWV9OiAke2lzc3Vlcy5qb2luKCcsICcpfWApO1xuICAgICAgZGV0YWlsZWRJc3N1ZXNbY29udHJvbGxlck5hbWVdID0gaXNzdWVzO1xuICAgIH0pO1xuXG4gICAgaWYgKHdpbmRvdy5lcnJvckhhbmRsZXIpIHtcbiAgICAgIHdpbmRvdy5lcnJvckhhbmRsZXIuaGFuZGxlRXJyb3Ioe1xuICAgICAgICBtZXNzYWdlOiBgU3RpbXVsdXMgZWxlbWVudCBwb3NpdGlvbmluZyBpc3N1ZXMgZGV0ZWN0ZWRgLFxuICAgICAgICB0eXBlOiAnc3RpbXVsdXMnLFxuICAgICAgICBzdWJUeXBlOiAncG9zaXRpb25pbmctaXNzdWVzJyxcbiAgICAgICAgcG9zaXRpb25pbmdJc3N1ZXM6IGFsbElzc3VlcyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHN1Z2dlc3Rpb246ICdDb25zaWRlciB1c2luZyBkYXRhLXRhcmdldHMgb3IgbW92aW5nIGVsZW1lbnRzIGluc2lkZSBjb250cm9sbGVyIHNjb3BlJyxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIGVycm9yVHlwZTogJ0VsZW1lbnQgUG9zaXRpb25pbmcgSXNzdWVzJyxcbiAgICAgICAgICBjb250cm9sbGVyczogT2JqZWN0LmtleXMoZGV0YWlsZWRJc3N1ZXMpLFxuICAgICAgICAgIGlzc3Vlc0J5Q29udHJvbGxlcjogZGV0YWlsZWRJc3N1ZXMsXG4gICAgICAgICAgdG90YWxJc3N1ZXM6IGFsbElzc3Vlcy5sZW5ndGgsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdTb21lIGVsZW1lbnRzIGFyZSByZWZlcmVuY2VkIGJ5IGNvbnRyb2xsZXJzIGJ1dCBleGlzdCBvdXRzaWRlIHRoZWlyIHNjb3BlJyxcbiAgICAgICAgICBwb3NzaWJsZVNvbHV0aW9uczogW1xuICAgICAgICAgICAgJ01vdmUgZWxlbWVudHMgaW5zaWRlIGNvbnRyb2xsZXIgc2NvcGUnLFxuICAgICAgICAgICAgJ1VzZSBkYXRhLXRhcmdldHMgZm9yIGV4dGVybmFsIGVsZW1lbnRzJyxcbiAgICAgICAgICAgICdDaGVjayBjb250cm9sbGVyIGRhdGEtY29udHJvbGxlciBhdHRyaWJ1dGUgcGxhY2VtZW50J1xuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5lbGVtZW50SXNzdWVzLmNsZWFyKCk7XG4gIH1cblxuICBwcml2YXRlIGdldEVsZW1lbnRJbmZvKGVsZW1lbnQ6IEVsZW1lbnQpOiBvYmplY3Qge1xuICAgIHJldHVybiB7XG4gICAgICB0YWdOYW1lOiBlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKSxcbiAgICAgIGlkOiBlbGVtZW50LmlkIHx8ICduby1pZCcsXG4gICAgICBjbGFzc05hbWU6IGVsZW1lbnQuY2xhc3NOYW1lIHx8ICduby1jbGFzcycsXG4gICAgICB0ZXh0Q29udGVudDogKGVsZW1lbnQudGV4dENvbnRlbnQgfHwgJycpLnN1YnN0cmluZygwLCA1MClcbiAgICB9O1xuICB9XG5cbiAgLy8gUHVibGljIEFQSVxuICBwdWJsaWMgZ2V0UmVnaXN0ZXJlZENvbnRyb2xsZXJzKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnJlZ2lzdGVyZWRDb250cm9sbGVycyk7XG4gIH1cblxuICBwdWJsaWMgZ2V0TWlzc2luZ0NvbnRyb2xsZXJzKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLm1pc3NpbmdDb250cm9sbGVycyk7XG4gIH1cblxuICBwdWJsaWMgZm9yY2VWYWxpZGF0aW9uKCk6IHZvaWQge1xuICAgIHRoaXMubWlzc2luZ0NvbnRyb2xsZXJzLmNsZWFyKCk7XG4gICAgdGhpcy5lbGVtZW50SXNzdWVzLmNsZWFyKCk7XG4gICAgdGhpcy5oYXNSZXBvcnRlZCA9IGZhbHNlO1xuICAgIHRoaXMudmFsaWRhdGVDb250cm9sbGVycygpO1xuICB9XG59XG5cbi8vIE5vdGU6IEdsb2JhbCB0eXBlcyBhcmUgZGVjbGFyZWQgaW4gdHlwZXMvZ2xvYmFsLmQudHNcblxuLy8gSW5pdGlhbGl6ZSB2YWxpZGF0b3JcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICB3aW5kb3cuc3RpbXVsdXNWYWxpZGF0b3IgPSBuZXcgU3RpbXVsdXNWYWxpZGF0b3IoKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgU3RpbXVsdXNWYWxpZGF0b3I7XG4iLCAiLy8gQWN0aW9uIENhYmxlIHByb3ZpZGVzIHRoZSBmcmFtZXdvcmsgdG8gZGVhbCB3aXRoIFdlYlNvY2tldHMgaW4gUmFpbHMuXG4vLyBZb3UgY2FuIGdlbmVyYXRlIG5ldyBjaGFubmVscyB3aGVyZSBXZWJTb2NrZXQgZmVhdHVyZXMgbGl2ZSB1c2luZyB0aGUgYGJpbi9yYWlscyBnZW5lcmF0ZSBjaGFubmVsYCBjb21tYW5kLlxuXG5pbXBvcnQgeyBjcmVhdGVDb25zdW1lciB9IGZyb20gJ0ByYWlscy9hY3Rpb25jYWJsZSdcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlQ29uc3VtZXIoKVxuIiwgIi8vIGJhc2UgZGVwZW5kZW5jeSBsaWJyYXJ5LCBpdCBzaG91bGQgYmUgb25seSBpbXBvcnRlZCBieSBgYWRtaW4udHNgIGFuZCBgYXBwbGljYXRpb24udHNgLlxuLy9cbi8vIEdsb2JhbCBwYXRjaGVzIChtdXN0IGJlIGZpcnN0KVxuaW1wb3J0ICcuL2Zvcm1fZGF0YV9wYXRjaCdcblxuaW1wb3J0ICogYXMgQWN0aXZlU3RvcmFnZSBmcm9tICdAcmFpbHMvYWN0aXZlc3RvcmFnZSdcbmltcG9ydCBBbHBpbmUgZnJvbSAnYWxwaW5lanMnXG5pbXBvcnQgKiBhcyBBY3Rpb25DYWJsZSBmcm9tIFwiQHJhaWxzL2FjdGlvbmNhYmxlXCJcbi8vIEB0cy1pZ25vcmUgLSBAaG90d2lyZWQvdHVyYm8tcmFpbHMgaGFzIG5vIHR5cGUgZGVmaW5pdGlvbnMsIHVzZXMgQGhvdHdpcmVkL3R1cmJvIHR5cGVzXG5pbXBvcnQgeyBUdXJibyB9IGZyb20gXCJAaG90d2lyZWQvdHVyYm8tcmFpbHNcIlxuaW1wb3J0IHsgU3RyZWFtQWN0aW9ucyB9IGZyb20gXCJAaG90d2lyZWQvdHVyYm9cIlxuaW1wb3J0ICcuL2NvbnRyb2xsZXJzJ1xuaW1wb3J0ICcuL2NsaXBib2FyZF91dGlscydcbmltcG9ydCAnLi9zZGtfdXRpbHMnXG5pbXBvcnQgJy4vc3RpbXVsdXNfdmFsaWRhdG9yJ1xuaW1wb3J0ICcuL2NoYW5uZWxzJ1xuXG5BY3RpdmVTdG9yYWdlLnN0YXJ0KClcbndpbmRvdy5BY3Rpb25DYWJsZSA9IEFjdGlvbkNhYmxlXG5cbkFscGluZS5zdGFydCgpXG53aW5kb3cuQWxwaW5lID0gQWxwaW5lXG5cbi8vIFR1cmJvIGNvbmZpZ3VyYXRpb246IEVuYWJsZSBEcml2ZSBmb3IgZnVsbCBTUEEgZXhwZXJpZW5jZVxuLy8gVHVyYm8gRHJpdmUgaXMgbm93IGVuYWJsZWQgYnkgZGVmYXVsdCAocmVwbGFjZWQgUmFpbHMtVUpTKVxud2luZG93LlR1cmJvID0gVHVyYm9cblxuLy8gR2xvYmFsIGZ1bmN0aW9uIHRvIHJlc3RvcmUgZGlzYWJsZWQgYnV0dG9ucyAoZm9yIEFjdGlvbkNhYmxlIGNhbGxiYWNrcylcbndpbmRvdy5yZXN0b3JlQnV0dG9uU3RhdGVzID0gZnVuY3Rpb24oKTogdm9pZCB7XG4gIGNvbnN0IGRpc2FibGVkQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTElucHV0RWxlbWVudCB8IEhUTUxCdXR0b25FbGVtZW50PihcbiAgICAnaW5wdXRbdHlwZT1cInN1Ym1pdFwiXVtkaXNhYmxlZF0sIGJ1dHRvblt0eXBlPVwic3VibWl0XCJdW2Rpc2FibGVkXSwgYnV0dG9uOm5vdChbdHlwZV0pW2Rpc2FibGVkXSdcbiAgKVxuXG4gIGRpc2FibGVkQnV0dG9ucy5mb3JFYWNoKChidXR0b246IEhUTUxJbnB1dEVsZW1lbnQgfCBIVE1MQnV0dG9uRWxlbWVudCkgPT4ge1xuICAgIGJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlXG4gICAgLy8gUmVzdG9yZSBvcmlnaW5hbCB0ZXh0IGlmIGRhdGEtZGlzYWJsZS13aXRoIHdhcyB1c2VkXG4gICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gYnV0dG9uLmRhdGFzZXQub3JpZ2luYWxUZXh0XG4gICAgaWYgKG9yaWdpbmFsVGV4dCkge1xuICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gb3JpZ2luYWxUZXh0XG4gICAgICBkZWxldGUgYnV0dG9uLmRhdGFzZXQub3JpZ2luYWxUZXh0XG4gICAgfVxuICAgIC8vIFJlbW92ZSBsb2FkaW5nIGNsYXNzIGlmIHByZXNlbnRcbiAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnbG9hZGluZycpXG4gIH0pXG59XG5cbi8vIExlZ2FjeSBSYWlscy1VSlMgY29tcGF0aWJpbGl0eTogYXV0by1jb252ZXJ0IGF0dHJpYnV0ZXMgdG8gVHVyYm8gZXF1aXZhbGVudHNcbmZ1bmN0aW9uIGNvbnZlcnRMZWdhY3lBdHRyaWJ1dGVzKCk6IHZvaWQge1xuICAvLyBkYXRhLW1ldGhvZCBcdTIxOTIgZGF0YS10dXJiby1tZXRob2RcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbDxIVE1MRWxlbWVudD4oJ1tkYXRhLW1ldGhvZF06bm90KFtkYXRhLXR1cmJvLW1ldGhvZF0pJykuZm9yRWFjaChlbCA9PiB7XG4gICAgY29uc3QgbWV0aG9kID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLW1ldGhvZCcpXG4gICAgaWYgKG1ldGhvZCAmJiBtZXRob2QgIT09ICdnZXQnKSB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdHVyYm8tbWV0aG9kJywgbWV0aG9kKVxuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdkYXRhLW1ldGhvZCcpXG4gICAgfVxuICB9KVxuXG4gIC8vIGRhdGEtY29uZmlybSBcdTIxOTIgZGF0YS10dXJiby1jb25maXJtXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTEVsZW1lbnQ+KCdbZGF0YS1jb25maXJtXTpub3QoW2RhdGEtdHVyYm8tY29uZmlybV0pJykuZm9yRWFjaChlbCA9PiB7XG4gICAgY29uc3QgY29uZmlybSA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1jb25maXJtJylcbiAgICBpZiAoY29uZmlybSkge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdkYXRhLXR1cmJvLWNvbmZpcm0nLCBjb25maXJtKVxuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWNvbmZpcm0nKVxuICAgIH1cbiAgfSlcblxuICAvLyBSZW1vdmUgZGF0YS1yZW1vdGU9XCJ0cnVlXCIgKFR1cmJvIGhhbmRsZXMgYnkgZGVmYXVsdClcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbDxIVE1MRWxlbWVudD4oJ1tkYXRhLXJlbW90ZT1cInRydWVcIl0nKS5mb3JFYWNoKGVsID0+IHtcbiAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtcmVtb3RlJylcbiAgfSlcblxuICAvLyBkYXRhLWRpc2FibGUtd2l0aCBcdTIxOTIgZGF0YS10dXJiby1zdWJtaXRzLXdpdGggKHNraXAgaWYgdHVyYm8gaXMgZGlzYWJsZWQpXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTEVsZW1lbnQ+KCdbZGF0YS1kaXNhYmxlLXdpdGhdOm5vdChbZGF0YS10dXJiby1zdWJtaXRzLXdpdGhdKScpLmZvckVhY2goZWwgPT4ge1xuICAgIC8vIFNraXAgaWYgZWxlbWVudCBvciBpdHMgcGFyZW50IGZvcm0gaGFzIGRhdGEtdHVyYm89XCJmYWxzZVwiXG4gICAgaWYgKGVsLmRhdGFzZXQudHVyYm8gPT09ICdmYWxzZScpIHJldHVyblxuICAgIGNvbnN0IHBhcmVudEZvcm0gPSBlbC5jbG9zZXN0KCdmb3JtJylcbiAgICBpZiAocGFyZW50Rm9ybT8uZGF0YXNldC50dXJibyA9PT0gJ2ZhbHNlJykgcmV0dXJuXG5cbiAgICBjb25zdCB0ZXh0ID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWRpc2FibGUtd2l0aCcpXG4gICAgaWYgKHRleHQpIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGF0YS10dXJiby1zdWJtaXRzLXdpdGgnLCB0ZXh0KVxuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWRpc2FibGUtd2l0aCcpXG4gICAgfVxuICB9KVxufVxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgY29udmVydExlZ2FjeUF0dHJpYnV0ZXMpXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0dXJibzpsb2FkJywgY29udmVydExlZ2FjeUF0dHJpYnV0ZXMpXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0dXJibzpmcmFtZS1sb2FkJywgY29udmVydExlZ2FjeUF0dHJpYnV0ZXMpXG5cbi8vIEhhbmRsZSBkYXRhLWRpc2FibGUtd2l0aCBmb3IgZm9ybXMgd2l0aCBkYXRhLXR1cmJvPVwiZmFsc2VcIiAobGlrZSBPQXV0aClcbi8vIFNpbmNlIFR1cmJvIGlzIGRpc2FibGVkLCB3ZSBuZWVkIHRvIG1hbnVhbGx5IGhhbmRsZSBzdWJtaXQgZWxlbWVudCBkaXNhYmxlL2VuYWJsZVxuZnVuY3Rpb24gaGFuZGxlTm9uVHVyYm9Gb3JtU3VibWl0KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICBjb25zdCBmb3JtID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxGb3JtRWxlbWVudFxuICBjb25zdCBzdWJtaXQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3I8SFRNTEJ1dHRvbkVsZW1lbnQgfCBIVE1MSW5wdXRFbGVtZW50PihcbiAgICAnYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0sIGJ1dHRvbjpub3QoW3R5cGVdKSwgaW5wdXRbdHlwZT1cInN1Ym1pdFwiXSdcbiAgKVxuXG4gIC8vIENoZWNrIGlmIHR1cmJvIGlzIGRpc2FibGVkXG4gIGNvbnN0IGlzVHVyYm9EaXNhYmxlZCA9IGZvcm0uZGF0YXNldC50dXJibyA9PT0gJ2ZhbHNlJyB8fCBzdWJtaXQ/LmRhdGFzZXQudHVyYm8gPT09ICdmYWxzZSdcblxuICBpZiAoaXNUdXJib0Rpc2FibGVkICYmIHN1Ym1pdD8uZGF0YXNldC5kaXNhYmxlV2l0aCkge1xuICAgIGNvbnN0IGlzQnV0dG9uID0gc3VibWl0IGluc3RhbmNlb2YgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBjb25zdCBrZXkgPSBpc0J1dHRvbiA/ICd0ZXh0Q29udGVudCcgOiAndmFsdWUnXG4gICAgc3VibWl0LmRhdGFzZXQub3JpZ2luYWxUZXh0ID0gc3VibWl0W2tleV0gfHwgJydcbiAgICBzdWJtaXRba2V5XSA9IHN1Ym1pdC5kYXRhc2V0LmRpc2FibGVXaXRoXG4gICAgc3VibWl0LmRpc2FibGVkID0gdHJ1ZVxuICB9XG59XG5cbi8vIFJlLWVuYWJsZSBzdWJtaXQgZWxlbWVudHMgd2hlbiBwYWdlIGJlY29tZXMgdmlzaWJsZSAoZS5nLiwgc3dpdGNoaW5nIGJhY2sgZnJvbSBwYXltZW50IHdpbmRvdylcbmZ1bmN0aW9uIGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UoKTogdm9pZCB7XG4gIGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09ICd2aXNpYmxlJykge1xuICAgIGNvbnN0IHNlbGVjdG9yID0gJ2Zvcm1bZGF0YS10dXJibz1cImZhbHNlXCJdIFtkaXNhYmxlZF1bZGF0YS1vcmlnaW5hbC10ZXh0XSwgW2RhdGEtdHVyYm89XCJmYWxzZVwiXVtkaXNhYmxlZF1bZGF0YS1vcmlnaW5hbC10ZXh0XSdcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxCdXR0b25FbGVtZW50IHwgSFRNTElucHV0RWxlbWVudD4oc2VsZWN0b3IpLmZvckVhY2goc3VibWl0ID0+IHtcbiAgICAgIHN1Ym1pdC5kaXNhYmxlZCA9IGZhbHNlXG4gICAgICBjb25zdCBvcmlnaW5hbFRleHQgPSBzdWJtaXQuZGF0YXNldC5vcmlnaW5hbFRleHRcbiAgICAgIGlmIChvcmlnaW5hbFRleHQpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gc3VibWl0IGluc3RhbmNlb2YgSFRNTEJ1dHRvbkVsZW1lbnQgPyAndGV4dENvbnRlbnQnIDogJ3ZhbHVlJ1xuICAgICAgICBzdWJtaXRba2V5XSA9IG9yaWdpbmFsVGV4dFxuICAgICAgICBkZWxldGUgc3VibWl0LmRhdGFzZXQub3JpZ2luYWxUZXh0XG4gICAgICB9XG4gICAgfSlcbiAgfVxufVxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBoYW5kbGVOb25UdXJib0Zvcm1TdWJtaXQpXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSlcblxuLy8gUmVnaXN0ZXIgY3VzdG9tIFR1cmJvIFN0cmVhbSBhY3Rpb24gZm9yIGFzeW5jIGpvYiBlcnJvcnNcblN0cmVhbUFjdGlvbnMucmVwb3J0X2FzeW5jX2Vycm9yID0gZnVuY3Rpb24odGhpczogYW55KSB7XG4gIGNvbnN0IGVycm9yRGF0YSA9IEpTT04ucGFyc2UodGhpcy5nZXRBdHRyaWJ1dGUoJ2RhdGEtZXJyb3InKSB8fCAne30nKVxuXG4gIGlmICh3aW5kb3cuZXJyb3JIYW5kbGVyKSB7XG4gICAgd2luZG93LmVycm9ySGFuZGxlci5oYW5kbGVFcnJvcih7XG4gICAgICB0eXBlOiAnYXN5bmNqb2InLFxuICAgICAgbWVzc2FnZTogZXJyb3JEYXRhLm1lc3NhZ2UgfHwgJ0FzeW5jIGpvYiBlcnJvciBvY2N1cnJlZCcsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIGpvYl9jbGFzczogZXJyb3JEYXRhLmpvYl9jbGFzcyxcbiAgICAgIGpvYl9pZDogZXJyb3JEYXRhLmpvYl9pZCxcbiAgICAgIHF1ZXVlOiBlcnJvckRhdGEucXVldWUsXG4gICAgICBleGNlcHRpb25fY2xhc3M6IGVycm9yRGF0YS5leGNlcHRpb25fY2xhc3MsXG4gICAgICBiYWNrdHJhY2U6IGVycm9yRGF0YS5iYWNrdHJhY2UsXG4gICAgICBkZXRhaWxzOiBlcnJvckRhdGFcbiAgICB9KVxuICB9XG59XG5cbi8vIFJlZ2lzdGVyIGN1c3RvbSBUdXJibyBTdHJlYW0gYWN0aW9uIGZvciByZWRpcmVjdCB3aXRoIHR1cmJvOiBmYWxzZVxuU3RyZWFtQWN0aW9ucy5yZWRpcmVjdCA9IGZ1bmN0aW9uKHRoaXM6IGFueSkge1xuICBjb25zdCB1cmwgPSB0aGlzLmdldEF0dHJpYnV0ZSgndXJsJylcbiAgY29uc3QgdHVyYm8gPSB0aGlzLmdldEF0dHJpYnV0ZSgnZGF0YS10dXJibycpXG5cbiAgaWYgKHVybCkge1xuICAgIGlmICh0dXJibyA9PT0gJ2ZhbHNlJykge1xuICAgICAgLy8gRnVsbCBwYWdlIHJlZGlyZWN0ICh0dXJibzogZmFsc2UpXG4gICAgICAvLyBDaGVjayBpZiBpbiBpZnJhbWUgYW5kIG9wZW4gaW4gbmV3IHdpbmRvdyB0byBhdm9pZCBYLUZyYW1lLU9wdGlvbnMgZXJyb3JzXG4gICAgICBpZiAod2luZG93LnNlbGYgIT09IHdpbmRvdy5wYXJlbnQpIHtcbiAgICAgICAgLy8gSW4gaWZyYW1lLCBvcGVuIGluIG5ldyB3aW5kb3dcbiAgICAgICAgd2luZG93Lm9wZW4odXJsLCAnX2JsYW5rJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE5vcm1hbCByZWRpcmVjdFxuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybFxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUdXJibyBuYXZpZ2F0aW9uXG4gICAgICBUdXJiby52aXNpdCh1cmwpXG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0ICcuL2Jhc2UnO1xuXG4vLyBHbG9iYWwgdG9hc3QgZnVuY3Rpb24gd2l0aCBpbXByb3ZlZCBzdHlsaW5nXG53aW5kb3cuc2hvd1RvYXN0ID0gZnVuY3Rpb24obWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gIC8vIFJlbW92ZSBleGlzdGluZyB0b2FzdCBpZiBhbnlcbiAgY29uc3QgZXhpc3RpbmdUb2FzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2FzdC1tZXNzYWdlJylcbiAgaWYgKGV4aXN0aW5nVG9hc3QpIHtcbiAgICBleGlzdGluZ1RvYXN0LnJlbW92ZSgpXG4gIH1cbiAgXG4gIC8vIENyZWF0ZSB0b2FzdCBlbGVtZW50IHdpdGggaWNvblxuICBjb25zdCB0b2FzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gIHRvYXN0LmNsYXNzTmFtZSA9ICd0b2FzdC1tZXNzYWdlIGZpeGVkIHotNTAnXG4gIHRvYXN0LnN0eWxlLmNzc1RleHQgPSAndG9wOiA1MCU7IGxlZnQ6IDUwJTsgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7J1xuICB0b2FzdC5zdHlsZS5hbmltYXRpb24gPSAnZmFkZUluIDAuM3MgZWFzZS1pbi1vdXQnXG4gIHRvYXN0LmlubmVySFRNTCA9IGBcbiAgICA8ZGl2IGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC13aGl0ZSBweC00IHB5LTMgcm91bmRlZC1sZyBzaGFkb3ctMnhsIGJhY2tkcm9wLWJsdXItc21cIiBcbiAgICAgICAgIHN0eWxlPVwibWluLXdpZHRoOiAyMDBweDsgbWF4LXdpZHRoOiA5MHZ3OyBiYWNrZ3JvdW5kOiByZ2JhKDMxLCA0MSwgNTUsIDAuODUpO1wiPlxuICAgICAgPHNwYW4gY2xhc3M9XCJ0ZXh0LXNtXCI+JHttZXNzYWdlfTwvc3Bhbj5cbiAgICA8L2Rpdj5cbiAgYFxuICBcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0b2FzdClcbiAgXG4gIC8vIEF1dG8gZGlzbWlzcyBhZnRlciAyLjUgc2Vjb25kc1xuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICB0b2FzdC5zdHlsZS5hbmltYXRpb24gPSAnZmFkZU91dCAwLjNzIGVhc2UtaW4tb3V0J1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKHRvYXN0LnBhcmVudE5vZGUpIHtcbiAgICAgICAgdG9hc3QucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0b2FzdClcbiAgICAgIH1cbiAgICB9LCAzMDApXG4gIH0sIDI1MDApXG59XG5cbi8vIEFkZCBDU1MgYW5pbWF0aW9uc1xuY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpXG5zdHlsZS50ZXh0Q29udGVudCA9IGBcbiAgQGtleWZyYW1lcyBmYWRlSW4ge1xuICAgIGZyb20ge1xuICAgICAgb3BhY2l0eTogMDtcbiAgICB9XG4gICAgdG8ge1xuICAgICAgb3BhY2l0eTogMTtcbiAgICB9XG4gIH1cbiAgXG4gIEBrZXlmcmFtZXMgZmFkZU91dCB7XG4gICAgZnJvbSB7XG4gICAgICBvcGFjaXR5OiAxO1xuICAgIH1cbiAgICB0byB7XG4gICAgICBvcGFjaXR5OiAwO1xuICAgIH1cbiAgfVxuYFxuZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSlcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7O0FBQUEsSUFBTztBQUFQO0FBQUE7QUFBQSxJQUFPLG1CQUFRO0FBQUEsTUFDYixRQUFRLE9BQU8sWUFBWSxj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QUFLLEtBQUssS0FBSyxNQUFNLE1BQU0sSUFBSTtBQUMvQixZQUFNLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxFQUFFLEVBQUUsSUFBSSxhQUFhO0FBQzdDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLFlBQVk7QUFDM0MsV0FBSyxLQUFLLElBQUksTUFBTSxNQUFNLElBQUk7QUFDOUIsWUFBTSxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLElBQUksYUFBYTtBQUM1QyxXQUFLLEtBQUssSUFBSSxNQUFNLE1BQU0sSUFBSTtBQUM5QixZQUFNLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFLEVBQUUsSUFBSSxZQUFZO0FBQzVDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLFlBQVk7QUFDM0MsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLElBQUksWUFBWTtBQUMzQyxXQUFLLEtBQUssSUFBSSxNQUFNLE1BQU0sSUFBSTtBQUM5QixZQUFNLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFLEVBQUUsSUFBSSxXQUFXO0FBQzNDLFdBQUssS0FBSyxJQUFJLE1BQU0sTUFBTSxJQUFJO0FBQzlCLFlBQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRSxJQUFJLFlBQVk7QUFDNUMsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLElBQUksWUFBWTtBQUMzQyxXQUFLLEtBQUssS0FBSyxNQUFNLE1BQU0sSUFBSTtBQUMvQixZQUFNLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsSUFBSSxZQUFZO0FBQzNDLFdBQUssS0FBSyxJQUFJLE1BQU0sTUFBTSxJQUFJO0FBQzlCLFlBQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRSxJQUFJLGFBQWE7QUFDN0MsV0FBSyxLQUFLLElBQUksTUFBTSxNQUFNLElBQUk7QUFDOUIsWUFBTSxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLElBQUksWUFBWTtBQUMzQyxXQUFLLEtBQUssS0FBSyxNQUFNLE1BQU0sSUFBSTtBQUMvQixZQUFNLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsSUFBSSxhQUFhO0FBQzVDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRSxJQUFJLGFBQWE7QUFDN0MsV0FBSyxLQUFLLElBQUksTUFBTSxNQUFNLElBQUk7QUFDOUIsWUFBTSxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLElBQUksV0FBVztBQUMxQyxXQUFLLEtBQUssSUFBSSxNQUFNLE1BQU0sSUFBSTtBQUM5QixZQUFNLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsSUFBSSxhQUFhO0FBQzVDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRSxJQUFJLGFBQWE7QUFDN0MsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxJQUFJLElBQUksS0FBSyxFQUFFLENBQUMsSUFBSSxTQUFTO0FBQ25DLFdBQUssS0FBSyxJQUFJLE1BQU0sTUFBTSxJQUFJO0FBQzlCLFlBQU0sSUFBSSxJQUFJLEtBQUssRUFBRSxDQUFDLElBQUksYUFBYTtBQUN2QyxXQUFLLEtBQUssS0FBSyxNQUFNLE1BQU0sSUFBSTtBQUMvQixZQUFNLElBQUksSUFBSSxLQUFLLEVBQUUsRUFBRSxJQUFJLGFBQWE7QUFDeEMsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxJQUFJLElBQUksS0FBSyxFQUFFLEVBQUUsSUFBSSxXQUFXO0FBQ3RDLFdBQUssS0FBSyxLQUFLLE1BQU0sS0FBSyxJQUFJO0FBQzlCLFlBQU0sSUFBSSxJQUFJLEtBQUssRUFBRSxDQUFDLElBQUksYUFBYTtBQUN2QyxXQUFLLEtBQUssSUFBSSxNQUFNLE1BQU0sSUFBSTtBQUM5QixZQUFNLElBQUksSUFBSSxLQUFLLEVBQUUsQ0FBQyxJQUFJLGFBQWE7QUFDdkMsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxJQUFJLElBQUksS0FBSyxFQUFFLENBQUMsSUFBSSxZQUFZO0FBQ3RDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sSUFBSSxJQUFJLEtBQUssRUFBRSxFQUFFLElBQUksYUFBYTtBQUN4QyxXQUFLLEtBQUssS0FBSyxNQUFNLEtBQUssSUFBSTtBQUM5QixZQUFNLElBQUksSUFBSSxLQUFLLEVBQUUsRUFBRSxJQUFJLFlBQVk7QUFDdkMsV0FBSyxLQUFLLElBQUksTUFBTSxNQUFNLElBQUk7QUFDOUIsWUFBTSxJQUFJLElBQUksS0FBSyxFQUFFLENBQUMsSUFBSSxZQUFZO0FBQ3RDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sSUFBSSxJQUFJLEtBQUssRUFBRSxDQUFDLElBQUksWUFBWTtBQUN0QyxXQUFLLEtBQUssS0FBSyxNQUFNLE1BQU0sSUFBSTtBQUMvQixZQUFNLElBQUksSUFBSSxLQUFLLEVBQUUsQ0FBQyxJQUFJLFdBQVc7QUFDckMsV0FBSyxLQUFLLEtBQUssTUFBTSxLQUFLLElBQUk7QUFDOUIsWUFBTSxJQUFJLElBQUksS0FBSyxFQUFFLENBQUMsSUFBSSxZQUFZO0FBQ3RDLFdBQUssS0FBSyxJQUFJLE1BQU0sTUFBTSxJQUFJO0FBQzlCLFlBQU0sSUFBSSxJQUFJLEtBQUssRUFBRSxFQUFFLElBQUksWUFBWTtBQUN2QyxXQUFLLEtBQUssS0FBSyxNQUFNLE1BQU0sSUFBSTtBQUMvQixZQUFNLElBQUksSUFBSSxLQUFLLEVBQUUsRUFBRSxJQUFJLFlBQVk7QUFDdkMsV0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLElBQUk7QUFDL0IsWUFBTSxJQUFJLElBQUksS0FBSyxFQUFFLENBQUMsSUFBSSxZQUFZO0FBQ3RDLFdBQUssS0FBSyxLQUFLLE1BQU0sS0FBSyxJQUFJO0FBQzlCLFlBQU0sS0FBSyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsSUFBSSxZQUFZO0FBQ3pDLFdBQUssS0FBSyxJQUFJLE1BQU0sTUFBTSxJQUFJO0FBQzlCLFlBQU0sS0FBSyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsSUFBSSxhQUFhO0FBQzFDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sS0FBSyxJQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsSUFBSSxhQUFhO0FBQzNDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sS0FBSyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsSUFBSSxXQUFXO0FBQ3hDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sS0FBSyxJQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsSUFBSSxhQUFhO0FBQzNDLFdBQUssS0FBSyxJQUFJLE1BQU0sTUFBTSxJQUFJO0FBQzlCLFlBQU0sS0FBSyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsSUFBSSxhQUFhO0FBQzFDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sS0FBSyxJQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsSUFBSSxVQUFVO0FBQ3hDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJO0FBQy9CLFlBQU0sS0FBSyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsSUFBSSxhQUFhO0FBQzFDLFdBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxJQUFJ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QkFBTSxNQUFNLEdBQUc7QUFBQSxJQUNqQjtBQUFBLEVBQ0Y7QUFDRjs7O0FDdEtBLE9BQU8sWUFBWSxTQUFTLFNBQXVCO0FBRWpELFFBQU0sZ0JBQWdCLFNBQVMsY0FBYyxnQkFBZ0I7QUFDN0QsTUFBSSxlQUFlO0FBQ2pCLGtCQUFjLE9BQU87QUFBQSxFQUN2QjtBQUdBLFFBQU0sUUFBUSxTQUFTLGNBQWMsS0FBSztBQUMxQyxRQUFNLFlBQVk7QUFDbEIsUUFBTSxNQUFNLFVBQVU7QUFDdEIsUUFBTSxNQUFNLFlBQVk7QUFDeEIsUUFBTSxZQUFZO0FBQUE7QUFBQTtBQUFBLDhCQUdVLE9BQU87QUFBQTtBQUFBO0FBSW5DLFdBQVMsS0FBSyxZQUFZLEtBQUs7QUFHL0IsYUFBVyxNQUFNO0FBQ2YsVUFBTSxNQUFNLFlBQVk7QUFDeEIsZUFBVyxNQUFNO0FBQ2YsVUFBSSxNQUFNLFlBQVk7QUFDcEIsY0FBTSxXQUFXLFlBQVksS0FBSztBQUFBLE1BQ3BDO0FBQUEsSUFDRixHQUFHLEdBQUc7QUFBQSxFQUNSLEdBQUcsSUFBSTtBQUNUO0FBR0EsSUFBTUMsU0FBUSxTQUFTLGNBQWMsT0FBTztBQUM1Q0EsT0FBTSxjQUFjO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBbUJwQixTQUFTLEtBQUssWUFBWUEsTUFBSzsiLAogICJuYW1lcyI6IFsibm93IiwgInNlY29uZHNTaW5jZSIsICJDb25uZWN0aW9uTW9uaXRvciIsICJtZXNzYWdlX3R5cGVzIiwgInByb3RvY29scyIsICJzdXBwb3J0ZWRQcm90b2NvbHMiLCAiaW5kZXhPZiIsICJDb25uZWN0aW9uIiwgImNvbnN1bWVyIiwgImRhdGEiLCAiZXJyb3IiLCAiaGFuZGxlciIsICJldmVudCIsICJleHRlbmQiLCAiU3Vic2NyaXB0aW9uIiwgImNvbnN1bWVyIiwgImRhdGEiLCAiU3Vic2NyaXB0aW9uR3VhcmFudG9yIiwgIlN1YnNjcmlwdGlvbnMiLCAiY29uc3VtZXIiLCAiU3Vic2NyaXB0aW9uIiwgInN1YnNjcmlwdGlvbiIsICJjcmVhdGVXZWJTb2NrZXRVUkwiLCAiQ29uc3VtZXIiLCAiU3Vic2NyaXB0aW9ucyIsICJkYXRhIiwgIkNvbnN1bWVyIiwgIlN1YnNjcmlwdGlvbiIsICJTdWJzY3JpcHRpb25zIiwgImNyZWF0ZUNvbnN1bWVyIiwgImNyZWF0ZVdlYlNvY2tldFVSTCIsICJnZXRDb25maWciLCAiaGV4IiwgIlNwYXJrTUQ1IiwgInJhdyIsICJldmVudCIsICJzdGFydCIsICJkaXNwYXRjaEV2ZW50IiwgImVycm9yIiwgImFkZDIiLCAiZXJyb3IyIiwgImNhY2hlIiwgInN0YXJ0ZWQiLCAic3RhcnQiLCAic3RhcnQyIiwgImlkIiwgImV2ZW50IiwgImNvbnN1bWVyIiwgImRhdGEiLCAiZXJyb3IiLCAiaGFuZGxlciIsICJldmVudCIsICJzdWJzY3JpcHRpb24iLCAic3RhcnQiLCAic3VibWl0dGVyIiwgImV2ZW50IiwgInN0eWxlIiwgImRpc3BhdGNoIiwgImRlYm91bmNlIiwgImNvbmZpZyIsICJwcmVmaXgiLCAibG9jYXRpb24iLCAiZXJyb3IiLCAiY29va2llIiwgImlkIiwgImNsb25lIiwgImN0eCIsICJtb3JwaENoaWxkcmVuIiwgImZpbmRCZXN0TWF0Y2giLCAibW9ycGhOb2RlIiwgImNyZWF0ZU1vcnBoQ29udGV4dCIsICJub3JtYWxpemVFbGVtZW50IiwgIm5vcm1hbGl6ZVBhcmVudCIsICJzZXNzaW9uIiwgInZpc2l0IiwgInNpemUiLCAicmVjZW50UmVxdWVzdHMiLCAiVHVyYm8iLCAiZG9jdW1lbnQiLCAiY3JlYXRlQ29uc3VtZXIiLCAid2FsayIsICJkYXRhIiwgImV2ZW50IiwgIndhbGsiLCAiZXZlbnQiLCAic3VibWl0dGVyIiwgImV2ZW50IiwgImFwcGxpY2F0aW9uIiwgImVycm9yIiwgImNhbWVsaXplIiwgImNhcGl0YWxpemUiLCAiYWRkIiwgImZldGNoIiwgInNldCIsICJzaXplIiwgIm1hdGNoIiwgIm9sZFZhbHVlIiwgImVycm9yIiwgImNhcGl0YWxpemUiLCAiY29uc3RydWN0b3IiLCAib2JzZXJ2ZXIiLCAic2NvcGUiLCAiZXh0ZW5kIiwgImFwcGxpY2F0aW9uIiwgImxvZ2dlciIsICJlbGVtZW50IiwgImNhbWVsaXplIiwgInByZWZpeCIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJldmVudCIsICJkYXRhIiwgImVycm9yIiwgImhpc3RvcnkiLCAiZXZlbnQiLCAiZXZlbnQiLCAiaGlzdG9yeSIsICJldmVudCIsICJldmVudCIsICJkYXRhIiwgImVycm9yIiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImVycm9yIiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImVycm9yIiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImVycm9yIiwgImV2ZW50IiwgImV2ZW50IiwgImNoZWNrbWFyayIsICJldmVudCIsICJlcnJvciIsICJkYXRhIiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImRhdGEiLCAiZXJyb3IiLCAiZXZlbnQiLCAiZGF0YSIsICJlcnJvciIsICJldmVudCIsICJldmVudCIsICJkYXRhIiwgImVycm9yIiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImV2ZW50IiwgImRhdGEiLCAiZXJyb3IiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAiaWQiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAibG9jYXRpb24iLCAiZXJyb3IiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAib2JzZXJ2ZXIiLCAiZXJyb3IiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXZlbnQiLCAiZXJyb3IiLCAiZXJyb3IiLCAiZXJyb3IiLCAib2JzZXJ2ZXIiLCAiaWQiLCAiZXZlbnQiLCAiY29uZmlybSIsICJldmVudCIsICJzdHlsZSJdCn0K
